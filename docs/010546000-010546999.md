# StackOverflow 问答 10546000-10546999

# javascript - 为什么我的 JavaScript 代码不起作用？

> ID：10546001
> 
> 赞同：-1
> 
> 时间：2012-05-11T05:41:31.467
> 
> 标签：javascript

写了一个简单的函数来计算任何一组数字的平均值。问题是当我单击刷新按钮时，它不会在我的网页上显示任何输出。

代码：

```
function avg() {
    var average = 0, argLength = arguments.length;
    for (var i = o; i < argLength; i++) {
        average += arguments[i];
    }
    return average / argLength;
}

document.write(avg(3,2)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T05:43:18.657

看起来您在循环中使用了小写字母`o`而不是零。`for`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T05:43:31.327

错字： for (var i = o

应该是 0

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-11T05:43:35.610

在这一行

```
for (var i = o; i < argLength; i++) {
             |
           THIS SHOULD BE 0 
```

[http://jsfiddle.net/mCUpa/](http://jsfiddle.net/mCUpa/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-11T05:44:48.543

问题是您键入`i = o`而不是`i = 0`; 您将数字 0 的小写字母 o 混淆了。

不过，一般来说，将单个数组作为参数的函数比使用可变数量参数的函数更有用。所以，像

```
function avg(input) {
    var average = 0;
    for (var i = 0; i < input.length; i++) {
        average += input[i];
    }
    return average / input.length;
}

document.write(avg([2,3])) # will write 2.5 
```

# c# - 时间：2019-04-01 标签：c#metrostyleappsreferencesjavascriptmetrostyleapps

> ID：10546008
> 
> 赞同：0
> 
> 时间：2012-05-11T05:42:20.860
> 
> 标签：c#, javascript, windows-8, windows-runtime, winjs

我正在使用 c# 构建一个 Metro 风格的应用程序，但在中间我意识到我必须用 javascript 做一些事情。现在我很困惑该怎么办？我是否必须使用 javascript 和 html5 制作整个应用程序，或者有一种方法可以将 c#metro 样式应用程序引用到所需的 js metro 样式应用程序，然后稍后将其引用回我的 c#metro 样式项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T08:01:24.577

这应该是您的解决方案：[创建引用 C# 和 C++ 代码的 HTML Metro 风格应用程序](http://blendinsider.com/technical/creating-an-html-metro-style-app-that-references-c-and-c-code-2012-04-13/)

检查参考链接中的部分`Configure C# projects to generate WinMD files`和`Set up project references`部分。您需要设置 c# 项目输出 WinMD（Windows 元数据）。混合项目可能会解决您的问题。

希望这可以帮助您尝试实施..

# javascript - 如何为 html5 标签创建新属性？

> ID：10546013
> 
> 赞同：-1
> 
> 时间：2012-05-11T05:42:39.550
> 
> 标签：javascript, html

如何为 html5 标签创建新属性？

我正在编写 Javascript 代码，并希望将这些属性用作变量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T05:44:57.413

您可以使用`data-`属性:) [Data-Attributes](http://ejohn.org/blog/html-5-data-attributes/)，[Custom data-Attributes](http://html5doctor.com/html5-custom-data-attributes/) 例如：

```
<div class="user" data-name="Stack" data-city="London"
     data-lang="js" data-food="Bacon">asdasd</div> 
```

然后您可以使用[Jquery.data() 方法](http://api.jquery.com/data/)在 Jquery 中访问，如下所示

```
alert($('.user').data('name'))//will print Stack 
```

[在JSFiddle](http://jsfiddle.net/8py6q/)中查看演示

# android - 如何在微调器中添加项目？其中第一项是静态添加的，其他是动态添加的？

> ID：10546018
> 
> 赞同：0
> 
> 时间：2012-05-11T05:42:56.493
> 
> 标签：android, spinner

我想在微调器中按数组添加第一项静态和其他项。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T05:48:11.217

您可以覆盖适配器的 getCount 和 getItem 方法。

```
public int getCount()
{
  return arr.length+1;
}

public Object getItem(int position)
{
   if(position==0)
      return "Select";
   else
      return arr[position-1];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T05:55:14.013

使用这种方式。希望它可以帮助你。

我在我的活动中创建了一个全局数组列表。

喜欢 ：

```
public static ArrayList<String> Party_list = new ArrayList<String>(); 
```

在 oncreate put 方法中，如下所示：

```
public void distic_party_name() {
        // TODO Auto-generated method stub
        main_genral_class.Party_list.add("Party");
        sqldb = this.getReadableDatabase();
        Cursor cursor = sqldb.query(true, TB_NAME2, new String[] { TB2_fld0 },
                TB2_fld23 + " = 'no'", null, null, null, null, null);

        if (cursor != null) {
            if (cursor.moveToFirst()) {
                do {

                    String a = cursor
                            .getString(cursor.getColumnIndex(TB2_fld0));

                    main_genral_class.Party_list.add("" + a);

                } while (cursor.moveToNext());
            }
        }
        cursor.close();
    } 
```

我在方法的第一行添加了静态数据。

```
Party_list.add("Party"); 
```

# c++ - 无法包含来自不同位置的 jpegLib.h？

> ID：10546020
> 
> 赞同：0
> 
> 时间：2012-05-11T05:43:06.520
> 
> 标签：c++

我正在使用 vs2005 构建一个库。我正在使用 makefile 系统来构建它。在包含部分中，我包含了“../vc/include/”文件夹和 jpeg 第三方库，其顺序与我提到它们的名称的顺序相同。由于 Jpeg 库包含在 vc/include 之后，所以我认为两个文件夹中的所有文件都应该包含在 jpeg 库中。

但目前它正在从 vc/include 中挑选所有文件。这种行为是否正确，如果是，请建议我正确的行为。如果不是，请告诉我哪里做错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T06:39:05.350

不，您误会了，将路径添加到包含路径仅意味着这些路径中的文件对您的代码可见，因此您可以使用`#include`它们，但这并不意味着这些文件夹中的所有文件都将被`#include`此行为删除。您仍然需要`#include "jpegLib.h"`在代码中的某个地方明确需要。

另外，您是否用`;`分号分隔路径，它们是否相对于 VC++ 所在的位置？

# c# - 如何使用 Web 编程创建文本曲线效果。首选（c#、vb javascript 或 jquery）

> ID：10546026
> 
> 赞同：0
> 
> 时间：2012-05-11T05:43:44.940
> 
> 标签：c#, javascript, jquery, css

我真正坚持的是从用户的文本输入动态创建文字艺术类型效果。我用谷歌搜索，但找不到任何东西。

当前使用它的网站是

[http://www.customink.com/lab/](http://www.customink.com/lab/) ...请查看其添加文本>>效果

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T05:59:46.123

这里

[http://www.imagemagick.org/script/index.php](http://www.imagemagick.org/script/index.php)

选择

[http://www.botell.com/gd/](http://www.boutell.com/gd/)

# objective-c - 在 ARC 项目中，类 (A) 继承自非 arc 文件中包含的另一个类 (B)

> ID：10546031
> 
> 赞同：-1
> 
> 时间：2012-05-11T05:44:12.997
> 
> 标签：objective-c, ios, crash, automatic-ref-counting, didreceivememorywarning

当我在我的项目中使用A并在模拟器中模拟内存警告时，应用程序经常在[super didReceiveMemoryWarning]中崩溃。如果我想从 ARC 项目中的非 ARC 文件继承类，有什么需要注意的吗？任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T07:06:39.033

1.  我没有遵循 didReceiveMemoryWarning 和 ARC/非 ARC 问题之间的逻辑联系。

2.  ARC/非 ARC 问题与之前的[SO 讨论](https://stackoverflow.com/questions/8790620/subclass-non-arc-file-into-arc-project-in-xcode-4)重复。

3.  除了其他讨论中提到的项目（用 适当地标记非 ARC 文件`–fno-objc-arc`），您可能需要考虑[转换到 ARC](http://developer.apple.com/library/ios/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)中概述的规则，特别是方法的命名约定（至少如果它们是方法由 ARC 子类调用）。

# c++ - 使用 c/c++ 编写的共享库的 Linux C 程序

> ID：10546032
> 
> 赞同：4
> 
> 时间：2012-05-11T05:44:25.163
> 
> 标签：c++, c, linux, makefile, shared-libraries

我正在做一个项目，主程序用 C 编写，它在嵌入式 Linux 系统上。另一家公司提供的硬件，在那里我得到了他们的库（c和c ++语言的静态库）。为了以后移植到其他设备，我制作了新的库（共享库）来链接c语言的应用程序，即：

```
 their libs(static libs,c/c++) --> my libs(shared libs,c) --> my applications(c). 
```

所有的 c 静态库对我都很好，在使用 c++ 库时，我的库编译得很好，但是在链接到我的应用程序时出现 2 个错误：

> libplate.so：未定义的引用`operator delete(void*)`
> libplate.so：未定义的引用`vtable for __cxxabiv1::__class_type_info`

这是用于编译此共享库的 makefile 部分。

```
CFLAGS = -Wall -mlittle-endian -I$(INC_PATH)/plate
CPPFLAGS = -Wall -mlittle-endian -I$(PLAT_PATH)/include/sfc -I$(INC_PATH)/plate
OBJ = $(patsubst %.c, %.o, $(SRC)) 
OBJ += $(patsubst %.cpp,%.o,$(SOURCPP))

$(D_LIB):$(OBJ)

$(CC) -o $(D_LIB)  -lm -lpthread -lc -shared -fPCI $(OBJ) $(LIB)
$(STRIP) -s $(D_LIB)

%.o : %.c 
$(CC) $(CFLAGS) -c $< 
```

**#CC 使用 gcc**

```
%.o :%.cpp
    $(CXX) $(CPPFLAGS)  -c $< 
```

**#CXX 使用 g++**

**我为 CPPFLAGS 添加了选项，例如 (-fno-rtti -fno-exceptions)，但它们不起作用**

对于应用程序，由于所有库都是用 c 语言编译的，所以我在下面制作了我的 makefile：

```
CFLAGS = -Wall -I$(INC_PATH)/logic ->I$(INC_PATH)/plate

$(BIN):$(OBJ)

$(CC) -o $(BIN) $(OBJ) -Wl,-rpath,$(LD_RUN_PATH) $(LIBS)

%.o : %.c 

$(CC) $(CFLAGS) -c $< 
```

我尝试添加一些其他系统库（-ldl -lc）它不起作用。

PS：当我将此库直接链接到 c 程序时，c++ 静态库工作得很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T06:24:53.733

您需要使用 g++ 编译您的共享库。此外，您在使用 -fPCI 时犯了一个错误。应该是-fPIC。要么，要么出于某种奇怪的原因，您在这里重新输入了 Makefile 而不是使用剪切和粘贴。

因此，该行应如下所示：

```
$(D_LIB):$(OBJ)
    $(CXX) -o $(D_LIB) -lm -lpthread -shared -fPIC $(OBJ) $(LIB) 
```

使用 g++ 编译链接了 C++ 需要的支持库，并确保包含重要信息，例如类型信息类和异常。

如果您要链接的 C++ 库使用 RTTI 或异常，则需要将它们链接进去。在共享对象链接期间提供标志 -fno-rtti 或 -fno-exceptions 只会破坏程序。

# windows-phone-7 - WP7 的服务器应用程序

> ID：10546041
> 
> 赞同：0
> 
> 时间：2012-05-11T05:45:06.317
> 
> 标签：windows-phone-7

我一直试图让我的 WP7 应用程序被标记，但它被拒绝，因为 WP7 应用程序正在使用的服务器应用程序正在测试 PC 上。

测试团队已经下载并安装了服务器应用程序，但是当它启动时，它失败了我从应用程序团队收到的错误消息是这样的：“媒体中心上的错误消息：”程序没有响应。Tokotech MediaCenter Server 程序已停止响应，将返回到 Windows Media Center”</p>

我尝试在许多不同的电脑上安装和启动它，在我的开发电脑上，在全新的干净安装上，作为管理员和普通用户，在英语安装和其他语言安装等等。我简单地无法重现此错误，它可以正常工作！

任何人都可以尝试在带有 Media Center 的 Win 7 上下载并安装服务器应用程序，启动 Media Center，然后查看服务器应用程序是否会启动，如果没有向我提供应用程序事件日志的副本，然后是 Media中心事件日志和 logfile.txt 在这里找到：C:\Users[UserName]\AppData\Local\MediaCenterServer

可以从她那里下载： [http](http://www.tokotech.net/software/MediaCenterRemote/setup.exe) ://www.tokotech.net/software/MediaCenterRemote/setup.exe 并安装在带有 Media Center 的 windows 7 PC 上

非常感谢你！

托本·科福德

任何人请！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T14:23:42.683

看来测试组用的是64位版本的windows，而服务端app只有32位。

# java - 将 Eclipse 项目与 Google Drive 同步

> ID：10546049
> 
> 赞同：1
> 
> 时间：2012-05-11T05:46:28.380
> 
> 标签：java, eclipse, google-drive-api

我尝试按照本指南建议的步骤同步项目：http: [//blog.utahcon.com/computers/cloud-storage/dropbox-eclipse-awesome](http://blog.utahcon.com/computers/cloud-storage/dropbox-eclipse-awesome)

它可以工作，但是在我的笔记本电脑上，当我打开项目时，出现了问题。我对 Eclipse 或 Java 不是很擅长，但我认为它找不到编译器，因为所有内容都带有红色下划线，就好像它找不到库或其他东西一样。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T05:52:53.823

您需要在使用谷歌驱动器同步的每台电脑上拥有相同的工作区和 JDK 位置。显然，您有不同的路径到 jdk 和/或其他重要库（例如，在 eclipse 中为此项目配置的外部库）。或者你只是没有在你的第二台电脑上安装 JDK。请给我们截图，以便我们了解您缺少哪些库。

# java - 做动画的“Java”方式

> ID：10546053
> 
> 赞同：2
> 
> 时间：2012-05-11T05:46:53.683
> 
> 标签：java, swing, animation

我想用Java做动画。我看过：[http ://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)

令我惊讶的是在计时器操作处理程序中：

*   我们实际上并不绘制函数调用；我们只是更新状态——所以看起来计时器动作用于“模拟”
*   我们提出重绘请求
*   Swing 在方便时重新绘制它的请求

这对我来说似乎有些奇怪，因为：

*   Swing 可以将多个重绘请求整理成一个
*   如果我在计时器中计算 fps，我可能会过度计数（因为多次重绘变成了一次）

问题：我是否误读了示例代码，或者这是用 Java 制作动画的“正确”方式？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T05:59:49.593

分别进行状态更新和渲染是很正常的。

Java/Swing 在这方面很正常。

原因：

*   很多事情都可以更新状态（计时器事件、用户输入等），因此使更改非常轻量级并将它们与屏幕刷新分离是很有用的，这样您就可以随时进行更改
*   您通常希望屏幕刷新以与模型状态更新不同的速率运行。通常，您希望动画/状态更新的时间间隔固定，但希望屏幕刷新尽可能快。如果您在动画中进行插值，则尤其如此。
*   渲染通常需要在特定的上下文中进行（在本例中为 Swing UI 线程）。您不必将状态更改限制为仅在此上下文中发生
*   将视图（屏幕演示）与数据模型分开是一种很好的做法。除了作为一个很好的概念设计区别之外，这还允许您执行诸如独立于显示测试数据模型、在没有 GUI 的服务器上运行模型版本等操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T06:11:35.960

在“动画”的情况下，JavaFX 比 Java 好得多，因为它主要是为此目的而构建的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T10:51:48.657

您可能想尝试[三叉戟](http://kenai.com/projects/trident/pages/Home)。它是一个干净简单的动画库，没有很多花里胡哨，如果您尝试在 Swing 中制作动画，它会让您的生活变得更轻松。

# c# - 如何在 C# 中生成系统（PC/笔记本电脑）硬件唯一 ID？

> ID：10546055
> 
> 赞同：0
> 
> 时间：2012-05-11T05:47:05.960
> 
> 标签：c#

如何在 C# 中生成系统（PC/笔记本电脑）硬件唯一 ID？

**请注意：**所有系统的配置都相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T05:50:27.520

您可以使用[Guid](http://msdn.microsoft.com/en-us/library/system.guid.aspx)类和[NewGuid](http://msdn.microsoft.com/en-us/library/system.guid.newguid)方法：

```
var uniqueId = Guid.NewGuid(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-06-18T10:26:21.053

我想不是 MAC 地址，因为它基于可以更改的外围设备，您可以使用处理器和主板 ID 来识别系统，因为它们只会在损坏时更改，并在更改时创建新系统

```
Func<string> SystemId = () =>
    {
        ManagementObjectCollection mbsList = null;
        ManagementObjectSearcher mbs = new ManagementObjectSearcher("Select * From Win32_processor");
        mbsList = mbs.Get();
        string id = "";
        foreach (ManagementObject mo in mbsList)
        {
            id = mo["ProcessorID"].ToString();
        }

        ManagementObjectSearcher mos = new ManagementObjectSearcher("SELECT * FROM Win32_BaseBoard");
        ManagementObjectCollection moc = mos.Get();
        string motherBoard = "";
        foreach (ManagementObject mo in moc)
        {
            motherBoard = (string)mo["SerialNumber"];
        }

        string uniqueSystemId = id + motherBoard;
        return uniqueSystemId;
    };

    Console.WriteLine(SystemId()); 
```

甚至可以更新处理器，因此可以忽略+我知道甚至微软曾经有主板ID来识别/激活窗口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T05:59:59.197

您可以使用*“Microsoft Windows SDK”*工具*“GUID Generator”*（**guidgen.exe**）以非编程方式生成 GUID。此工具有不同的方式来表示生成的 GUID，因此您可以在应用程序中进一步使用它。

![在此处输入图像描述](../Images/05104d0b9843f24e6bbe2bb3d47ac283.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T05:55:30.643

通常最可靠的方法之一是查看您是否无法获取网卡的 MAC 地址。通常这些是唯一的（除非您还将所有 MAC 地址配置为相同，在这种情况下您将遇到更大的问题 :)）但我支持前面的评论。如果这是为了保护版权，请不要这样做。当用户更换网卡或淘汰 PC 以迁移到更新的硬件时，他们会感到沮丧。

# java - 从网络摄像头保存图像

> ID：10546063
> 
> 赞同：2
> 
> 时间：2012-05-11T05:48:15.123
> 
> 标签：java, image, webcam, jmf

语言：Java
另外使用：JMF

下面是代码（没有 Swing-forms），它允许使用 WEB 相机捕获图像：

```
MediaLocator getWebCam = new MediaLocator("vfw://0");
    private Player player;
    Timer timer = new Timer(40, this);

    public BufferedImage grabFrameImage() {

        Image image = null;
        FrameGrabbingControl frameGrabbingControl = null;

        if (player != null)
            frameGrabbingControl = (FrameGrabbingControl) player.getControl("javax.media.control.FrameGrabbingControl");
        Buffer buffer = frameGrabbingControl.grabFrame();
        if (buffer != null)
            image = new BufferToImage((VideoFormat) buffer.getFormat()).createImage(buffer);
        if (image != null)
            return (BufferedImage) image;

        return null;
    }

    public WorkWithWebCam() throws NoDataSourceException, IOException, NoPlayerException {

            initComponents();
            player = Manager.createPlayer(Manager.createDataSource(getWebCam));
            player.start();

    }
private void jButton1ActionPerformed(ActionEvent e) {
        timer.start();
    }

    public static void main(String args[]) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try{
                    new WorkWithWebCam().setVisible(true);
                }catch(Exception ex){}
            }
        });
    }

    public void actionPerformed(ActionEvent e) {
        panelMain.getGraphics().drawImage(this.grabFrameImage(), 0, 0, 400, 300, null);
    } 
```

您能告诉我如何使用网络摄像头保存图像吗？

展望未来，我们扩展了 actionPerformed 方法：

```
public void actionPerformed(ActionEvent e) {
        panelMain.getGraphics().drawImage(this.grabFrameImage(), 0, 0, 400, 300, null);
        BufferedImage image = new BufferedImage(400, 300, BufferedImage.TYPE_INT_RGB);
        String fileOut = "temp.jpg";
        Graphics g = image.getGraphics();
        panelMain.paint(g);
        try {
            ImageIO.write(image, "jpg", new FileOutputStream(fileOut));
        } catch (IOException e1) {
            e1.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
        }

    } 
```

唯一的一点是，没有使用网络摄像头保存图片，并且右侧带有垂直条纹的白色背景。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T06:08:29.023

```
image = new BufferToImage((VideoFormat) buffer.getFormat()).createImage(buffer);
ImageIO.write(image, "png", new File("screengrab.png")); 
```

详情请参阅[`ImageIO.write(RenderedImage,String,File)`](http://docs.oracle.com/javase/7/docs/api/javax/imageio/ImageIO.html#write%28java.awt.image.RenderedImage,%20java.lang.String,%20java.io.File%29)。

# ruby-on-rails-3 - Rails 3在索引视图上提供完全静态页面，未启用缓存

> ID：10546064
> 
> 赞同：0
> 
> 时间：2012-05-11T05:48:15.590
> 
> 标签：ruby-on-rails-3, caching, controller

我已经安装了 memcached 并将其设置为要使用的默认缓存存储。然而，在开发模式下，它关闭了，我的 memcached 服务器甚至没有运行，但 rails 正在提供一个完全静态的索引视图。我从控制器中删除了 caches_page 等，因此控制器中的所有内容都是普通 CRUD 控制器的样子。我什至从 rails 应用程序中删除了索引操作和索引视图，但 rails 仍然为静态页面提供服务。我删除了 /tmp 目录，确保在开发环境中将 perform_caching 设置为 false 并且它没有效果。它仅在这一页上，其他一切都按应有的方式工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T05:57:08.500

一周前我有同样的问题。检查您的公用文件夹。并清除浏览器的缓存。

# c# - 模拟“Windows”键和“+”键放大

> ID：10546069
> 
> 赞同：3
> 
> 时间：2012-05-11T05:48:53.273
> 
> 标签：c#, automation, autoit, keystroke

Windows 7（最终）具有内置的屏幕缩放功能。按住“Windows”键，然后可以使用“+”键放大，“-”键缩小。因此，我一直在尝试模拟这种组合。使用 AutoIt 我尝试过：

1)

```
Send("{LWINDOWN}" & "+" & "{LWINUP}") 
```

2)

```
$x = Chr(43)
Send("{LWINDOWN}" & $x & "{LWINUP}") 
```

3)

```
Send("#{+}") ;//works but it also sends "+" key 
```

4)

```
Send("{LWINDOWN}")
Sleep(10)
Send("+",1)
Sleep(10)
Send("{LWINUP}") 
```

**这4个步骤都不起作用...**

我实际上想在 c# 上使用此功能。如果我设法用 autoit 做到这一点，我可以用 c# 调用该脚本，所以我不介意语言。我也在模拟击键，因为我不知道如何使用 c# 进行放大。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T12:50:19.053

导入位于以下位置的库：

[http://inputsimulator.codeplex.com/](http://inputsimulator.codeplex.com/)

然后做：

```
 WindowsInput.InputSimulator.SimulateKeyDown
                          (WindowsInput.VirtualKeyCode.LWIN);
 WindowsInput.InputSimulator.SimulateKeyPress
                          (WindowsInput.VirtualKeyCode.OEM_PLUS);
 WindowsInput.InputSimulator.SimulateKeyUp
                          (WindowsInput.VirtualKeyCode.LWIN); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-29T00:13:40.617

你几乎做对了……实际的语法是 Send("{LWIN DOWN}" & "+" & "{LWIN UP}")。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T06:45:54.190

你可以做这样的事情

`SendKeys.SendWait("{F1}");`

如果您想将其调用到某个窗口，您可以使用

```
 [DllImport("user32.dll")]
public static extern int SetForegroundWindow(IntPtr hWnd); 
```

进而

```
Process[] processes = Process.GetProcessesByName("Some.exe");

        foreach(Process proc in processes)
        {
            SetForegroundWindow(proc.MainWindowHandle);
            SendKeys.SendWait("{F1}");
        } 
```

# c# - 将 WPF 应用程序拆分为多个 dll 是好是坏？

> ID：10546071
> 
> 赞同：1
> 
> 时间：2012-05-11T05:49:22.177
> 
> 标签：c#, .net, wpf, dll, exe

以前我的 WPF 应用程序大小为 4096KB，作为单个 .exe 文件。

现在我已经像这样将应用程序拆分为多个

```
JIMS.exe           Main Application-->103KB
JIMSDAL.dll        Data Access Layer-->43KB
JIMS.Core.dll      Core classes for MVVM-->110KB
JIMS.Commands.dll  MVVM Commands-->11KB
JIMS.Controls.dll  WPF UserControls-->25KB
JIMS.Resources.dll Fonts,icons and xaml resources.-->44KB
UtilityClasses.dll Other classes like Helper classes-->10KB 
```

我进一步考虑通过将视图模型从 JIMS.exe 删除到 JIMS.ViewModel.dll 来添加另外两个 dll。

现在我的问题是，这是将单个 EXE 吐入多个 dll 的好方法吗？

请让我知道这样做的优点和缺点是什么。

我有一些意见，如果有更多的 dll，JIMS.exe 将难以使用该应用程序联系许多 dll。由于每次调用都必须读取相应的 dll。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T08:45:35.890

我没看到有人提到，所以我会插话。

根据我的经验，在 C# 中使用这种方法的主要原因是`exchangeability`- 能够轻松替换系统的某些部分。

举个例子，我们在我当前的项目中使用这种方法。每个 GUI 组件（或`UserControl`）都是它自己的 dll，并在启动时动态导入。这使我们能够为我们的 GUI 实现插件架构，并允许我们的 GUI 开发人员在单独的项目中工作，而不必加载所有逻辑/等。

我不能告诉你它是“好”还是“坏”——这是你为特定目的所需要的。我可以告诉你的是，这不是*“错误的”*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T05:56:12.133

如果您打算在其他项目中独立使用这些 dll，那么请确保您可以拆分它们，否则有什么好处？我不确定您的应用程序，但如果您正在编写一个控件，供其他开发人员使用或将应用程序集成到其他应用程序中，那么单独管理 dll 可能会成为一项艰巨的任务。我不太确定你的最后意见。我希望看到社区对此的投入

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T06:03:18.923

它有很多好处：

-如果您正在做一个小更新，您的用户不必下载完整的 exe，他们只需要下载一些更小的 dll -如果您正在编写另一个使用 dll 的程序，您的用户可以保存内存 - 如果你的程序变得巨大并且你有几分钟的构建时间，你不必重建所有，如果你正在做更改，你可以再次构建更改后的 dll

但它有一些负面的观点： -您的用户可能会删除 dll（如果他们真的很愚蠢），然后想知道为什么程序不再工作 -没有 dll，您的用户可以快速构建可移植版本

如果您的项目很大（听起来像，因为 4MB exe），我会拆分程序，但如果它是一个小程序，我不会拆分程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T12:34:15.243

我在我正在开发的应用程序中采用了类似的方法，但对我来说，主要原因是启用应用程序的控制台版本的开发。这样我就可以使用 XAML GUI 在应用程序中提供简单的一次性操作，然后使用控制台版本安排更长时间的运行/维护操作。它们都使用相同的模型和视图模型层，但显然是不同的“视图”。

对我来说，这感觉像是 MVVM 的一大好处，尤其是当您将组件分解为单独的项目/库时。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-25T17:59:12.497

我们目前正在开发针对特定利基市场的大规模应用程序，但我们的许多客户需要小型定制应用程序，这些应用程序虽然根据他们的需求量身定制，但他们经常使用使用单个数据库的产品的许多不同功能。因此，我们将 Wpf 应用程序拆分为许多不同的程序集，这是能够做到这一点的唯一真正方法。在许多方面，它几乎使这些附加工具成为我们创建部分新开发和部分集成现有开发的一部分，这使得这些新应用程序可以非常快速地与大多数经过测试的代码组合在一起。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-11T05:56:36.800

最好将应用程序拆分为多个 dll。这使得项目更易于管理，更容易添加/删除功能，更容易使用现有的 dll 编写全新的应用程序。我认为动态链接更适合应用程序.....

**动态调用的好处**

1.  如果您更改子程序中的某些内容，则无需重新链接您的应用程序；只有子例程 DLL 需要重新链接。
2.  所有调用此子例程的可执行文件将共享同一个 DLL；代码和数据。由于您的应用程序只加载一个动态调用的子例程的副本，因此它使用的内存更少。
3.  动态调用的子例程中包含的值的更改对所有使用它的 DLL 都是可用的，因为它们都共享子例程的相同副本。
4.  您可以通过取消子例程来释放动态调用的子例程正在使用的内存。然而，这在 32 位 Windows 虚拟内存环境中通常没有多大用处，因为无论如何 Windows 都会从计算机的实际内存池中“分页”非活动数据。
5.  项目清单

**动态调用的坏处**

1.  每个动态调用的子例程都必须作为 DLL 链接（除非您使用导入库来公开 DLL 中的其他入口点）。因此，如果您的应用程序包含数百个子例程并且它们都是动态调用的，那么您将需要分发数百个 DLL。
2.  可以混合您的 DLL 的版本。这对于分发您的应用程序和最终用户不正确地安装更新都可能是一个问题。
3.  如果您的某个 DLL 丢失，您可能不知道它，直到用户使用一些尝试调用该 DLL 的工具。届时，除非您处理这种情况，否则您的应用程序将异常终止。
4.  如果你调用一个 DLL，取消它，然后再次调用它，你会产生更多的 I/O，因为如果你取消它，则需要重新加载例程。这会降低应用程序的速度，因为它需要更多的磁盘活动。同样，在 Windows 环境中，这通常是不必要的，因为 Windows 在管理内存方面做得很好。
5.  如果您混合和匹配对同一子例程的静态和动态调用，您的软件可能会同时在内存中拥有多个不同的版本。猜猜尝试调试这个烂摊子会有多有趣？

有关更多信息，请参见[此处](http://www.screenio.com/tips/calls.htm)

# php - 如何从硬盘中完全删除 mamp？

> ID：10546072
> 
> 赞同：0
> 
> 时间：2012-05-11T05:49:23.887
> 
> 标签：php, mamp

Mamp 开始出现问题，所以我决定删除并尝试全新安装。我将应用程序文件夹中的两个 mamp 文件夹拖到了垃圾箱中。完成此操作后，我尝试再次安装 mamp。新的 mamp mysql 将无法启动，所以我关闭了 apache 并在我的浏览器中访问了 localhost，即使我删除了它们，php 和 apache 仍在工作。我彻底搜索了我的应用程序文件夹中是否有任何残留的 mamp 痕迹，但没有。所以为了确保，我删除了新的 mamp 安装，创建了一个包含 phpinfo() 函数的文件，并在本地主机下的浏览器中打开它。phpinfo 显示。这完全令人费解。在 php 信息中，所有内容都指向 /Applications/MAMP。我已经搜索了好几次，在应用程序中找不到 mamp。有没有办法一劳永逸地删除这个，可能来自终端？有没有人对如何解决这个问题有任何建议？

**编辑：**到目前为止，我已经尝试了所有建议的地方，不知何故 apache 和 mysql 仍在运行。我通过打开一个带有 phpinfo() 函数的 .php 文件来验证这一点。我在活动监视器中搜索了 mysqld、php 或 mamp 的任何迹象，但什么也没有。当我打开 phpinfo 时，所有路径都指向 /Applications/MAMP 和 /Applications/MAMPbin/php/php5.3.6/conf 等。我已经查找了这些文件，甚至尝试从终端 cd 进入它们而且没有他们的踪迹。特别是有一条道路会引发危险信号。这是 apache 环境的路径： /usr/bin:/bin:/usr/sbin:/sbin 这是唯一与其他环境不同的路径。由于 apache 是 php 运行所必需的，我认为这条通往 apache 的路径一定是导致问题的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T13:04:11.600

[http://www.freemacsoft.net/appcleaner/](http://www.freemacsoft.net/appcleaner/)

到目前为止，AppCleaner 非常适合我。试试看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T06:00:36.063

**编辑**

如您的帖子评论中所述，使用卸载程序将是将您的系统恢复到以前状态的最可靠方法。使用它，但也要检查我在这里提到的东西，并在将来记下它们。

**/编辑**

检查您的 php/mysql 进程的活动监视器，一旦找到它们，打开终端并键入“killall”，进程名称周围没有 < >。

值得注意的是，OS X 已经安装了 Apache 和 PHP，可以通过在 System Prefs->Sharing 中启用“Web Sharing”来启用它们。MySQL 可以很容易地单独安装并链接到 PHP 安装。

此外，请务必检查 ~/Library/Application Support 和 /Library/Application Support 以获取其他 MAMP 文件。

最后，请务必检查 ~/Library/Preferences、/Library/Preferences、~/Library/LaunchAgents、/Library/LaunchAgents、/Library/LaunchDaemons 和 /System/Library/Extensions 以获取第三方扩展。

以上是基本的清理方法，例如，您可能不会在 Extensions 中担心任何问题。但是有一点值得注意 - 扩展（内核扩展）可能会对您的系统造成严重破坏。确保您没有任何不需要安装的第三方扩展。您可以通过打开终端并键入以下内容来查看它们：

`kextstat | grep -v apple`

这将告诉您第三方扩展名的确切文件名，然后您可以在 Extensions 文件夹中删除这些文件名。它将要求您以超级用户身份进行身份验证。

完成后重新启动系统。

# jquery - 跨浏览器问题。需要建议

> ID：10546074
> 
> 赞同：0
> 
> 时间：2012-05-11T05:49:39.173
> 
> 标签：jquery, html, file-upload, cross-browser

我使用我在某处搜索过的 jquery 设计了一个输入上传框，问题是 IE 上的“浏览”按钮不起作用（不可点击）。任何人都可以查看代码并帮助我应该做什么或调整它以使其在 IE 上工作吗？非常感谢。我在下面的 jsfiddle 中包含了 html/css/js 文件。

[jsfiddle](http://jsfiddle.net/S2zHX/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T05:58:43.693

您添加的“浏览”按钮在 IE 7/8/9、Chrome 或 Firefox 中不起作用。您可能有不同的经历，这加强了我将尝试提出的观点。

最好使用基于 Flash 的文件上传来完全替换默认 UI（我相信 GMail 仍然这样做），或者只保留默认输入，尽管它可能很丑陋/不一致。样式文件上传有很多技巧，但没有真正的解决方案（至少我遇到过）。

我发现最接近纯 HTML/CSS 解决方案的方法是在文件输入的“浏览”按钮顶部覆盖一个样式按钮并隐藏其余部分。然后我通过将整个东西放在一个`IFRAME`. 这个解决方案确实/仍然有效，但我浪费了数小时在视觉上对其进行调整，添加了一堆额外的代码来挂钩`IFRAME`到包含页面，并增加了整体解决方案的复杂性。任何浏览器的下一次更新都可能会破坏它。

HTML 5 确实为文件上传过程提供了更大的灵活性（[请参见此处](http://www.matlus.com/html5-file-upload-with-progress/)），但此类解决方案尚未得到普遍支持，也不一定能解决审美问题。

[拖放功能](http://tutorialzine.com/2011/09/html5-file-upload-jquery-php/)可能对您有用，因为您可以完全隐藏文件输入。您可以在较新的浏览器中使用这样的解决方案，并在不支持它的旧浏览器上降级为标准文件输入。

[渐进增强的另一个例子](http://blogs.sitepointstatic.com/examples/tech/filedrag/3/index.html)。

# javascript - 表单上所有元素的公共事件

> ID：10546076
> 
> 赞同：2
> 
> 时间：2012-05-11T05:49:42.113
> 
> 标签：javascript, jquery, forms, events

每当表单中任何元素的值发生变化时，我都想触发一个公共事件。基于表单元素的值，我想实现代码。

我正在编写下面的代码，但 onchange 事件在 formid 上不起作用。

```
$("#formid").change(function () {
    //code 
}); 

or this

$("#formid").bind("change", function () {
    //code 
}); 
```

每当元素的值发生任何变化时，如何在表单上触发事件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T05:53:24.210

> 每当元素的值发生任何变化时，如何在表单上触发事件？

就像你已经完成的那样做。`change`将事件绑定到`form`元素。

```
$("form").change(function() {
   // Some descendant changed.
}); 
```

只要您不干扰事件的传播，这将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T06:00:50.613

```
$(this).toArray().each(function(index, element){
    $(element).change(function(){.....}); 
```

});

把它放在document.ready...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T05:53:43.727

您可以为所有必要的表单控件绑定更改事件

```
$('input, select, textarea', $('#formid')).change(function()
{
    //your code here
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T05:53:49.867

循环遍历文档或表单的所有元素，并将它们的 onChange 事件设置为您的处理函数。喜欢：

```
for (var i = 0; i < yourelements.length; i++)
yourelements[i].onchange = change; 
```

# cassandra - 如何获取在 Cassandra 中添加的最后一行的行键

> ID：10546078
> 
> 赞同：4
> 
> 时间：2012-05-11T05:50:19.460
> 
> 标签：cassandra, thrift

假设使用 OrderPreservingPartitioner 并且 rowkeys 严格按升序排列，是否有一种简单的方法可以使用 Cassandra 客户端获取最近添加的行的 row key？我知道我可以执行 get_range_slices 查询来获取所有行并迭代到最后以找到最后一个行键。但我觉得这将是一个耗时的操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T10:05:21.987

我认为不可能获得最后插入的行键，即使它们按升序排列并且使用了 OPP。

1.  一个天真的解决方案是将最后插入的密钥存储在文件中或类似的方式。不要为此考虑卡桑德拉：P
2.  如果您想使用 cassandra，最好将所有插入的原始 CF (OCF) 行键作为列存储在临时 CF (TCF) 中。确保`comparator`您的 TCF 与您`key_validation_class`的 OCF相同

解决方案 2 会将 OCF 最后插入的 row_key 保留为 TCF 中一行的最后一列。您可以在列上使用反向范围切片从最后一个获取第一个；）

```
SELECT FIRST 1 REVERSED * from TCF where KEY='yourkey' 
```

您可以使用列的到期属性来控制 Temporary_CF 中行的大小，并以这种方式对数据进行建模，您也可以选择在最后插入 n 个 row_key。

```
SELECT FIRST N REVERSED * from TCF where KEY='yourkey' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T21:43:17.303

使用模式：我们经常需要加载最后添加的行

实现：在序列化之前“反转”RowKey；使用 OrderPreservingPartitioner；使用“时间戳”作为 RowKey。

例如，您的 RowKey 是一个长数字（代表时间戳）。然后，使用 reverted (Long.MAX_VALUE - timestamp) 对时间戳进行序列化。第一行将是插入的最后一行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-17T23:41:16.347

如果您绝对需要知道跨节点网络的时间戳详细信息下方的最后一行......我想不出任何东西。

但是 cassandra 通过最近的时间戳获胜来解决竞争单元格（行+列）更新，因此对于所有插入，还更新与该表对应的单行中的单个列，并使用 ALL 查询该单元格。我建议每个列族/表使用不同的行，以防止该行的更新成为瓶颈。

如果有两个相互竞争的相同时间戳更新......那么，我们可能会在这一点上解决哲学问题。除非你想要一个网络序列生成器的一些减速点，这很糟糕。

将一致性从 ALL 删除到 QUORUM 或 ONE 可能也会加快快速插入行的速度，具体取决于您需要结果的精确程度。

# android - 在Android中使用DOM从本地硬盘解析XML文件

> ID：10546087
> 
> 赞同：1
> 
> 时间：2012-05-11T05:51:06.333
> 
> 标签：android, parsing, dom, xml-parsing

如何使用 DOM 解析硬盘中的 xml 文件？代码可以是一个很好的帮助..

```
InputStream catDoc = context.getResources().openRawResource(R.raw.testingxml);
DocumentBuilder builder = DocumentBuilderFactory.newInstance().newDocumentBuilder();
dom = builder.parse(catDoc, null); 
```

这里的上下文是什么？我不太明白..请帮助..我是这里的初学者所以...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T06:08:29.397

该行代码中的上下文是调用活动的上下文。基本上它代表分配给您的应用程序的资源。除此之外，您的问题太模糊而无法直接回答，也许首先访问谷歌教程以了解 android 的工作原理会满足您的需求。[安卓开发者](http://developer.android.com/guide/basics/what-is-android.html)

# windows-installer - 当安装程序以静默模式运行时，如何从命令行设置 msi 属性？

> ID：10546092
> 
> 赞同：4
> 
> 时间：2012-05-11T05:51:43.040
> 
> 标签：windows-installer, installshield, installshield-2009

我有一个应用程序，它在安装时收到一些设置，收到的设置存储在一些文件中，以便应用程序正常工作。

这些是由自定义操作完成的。每个自定义操作都在安装向导的各个阶段执行。这些自定义操作设置和检索各种 msi 属性。（自定义操作检索到的属性值是用户提供的值。）

例如：- 使用用户提供的值检查有效的数据库。

这些都与我使用 Installshield 2009 制作的安装程序 EXE 一起正常工作

现在我必须让安装程序在静默模式下工作。

如何通过命令行设置 MSI 属性？目前安装程序是 EXE 而不是 msi。

我需要在安装程序部分进行任何更改吗？我可以使用当前的 EXE 吗？

任何人请帮助......提前谢谢......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T07:26:31.007

您可以使用 /v 将参数从 exe 传递到 msi。

例如，要使 msi 打印详细日志，您应该将其运行为：

```
 setup.exe /v"/L*v\"%temp%\install.log\" 
```

同样，要使用 exe 设置 msi 属性，您应该使用：

```
 setup.exe /v"NEWPROP=1" 
```

查看以下内容以获取更多详细信息：http: [//publib.boulder.ibm.com/infocenter/pcomhelp/v6r0/index.jsp ?topic=%2Fcom.ibm.pcomm.doc%2Fbooks%2Fhtml%2Finstall_guide12.htm](http://publib.boulder.ibm.com/infocenter/pcomhelp/v6r0/index.jsp?topic=%2Fcom.ibm.pcomm.doc%2Fbooks%2Fhtml%2Finstall_guide12.htm)

# python - 在类中使用递归

> ID：10546094
> 
> 赞同：0
> 
> 时间：2012-05-11T05:52:08.110
> 
> 标签：python, syntax

我正在练习考试并试图弄清楚这一点。我只是不完全用 add 方法做什么。这是我到目前为止所拥有的：

```
class recursion:
    def __init__(self, lst=[]):
        self.lst = lst

    def add(self, x, y):
        return x + y

    def recurs(self):
        if len(self.lst) == 1:
            return lst[0]
        else:
            return self.lst[0].add(self.recurs(lst[1:]) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T06:05:09.440

假设您正在尝试递归获取列表的总和：

本质上，`recursive_sum_helper`用更小的列表来调用自己：

> 总和(1, 2, 3, 4) = 1+总和(2,3,4) = 1+( 2 + 总和(3,4) ) = ...

```
class recursive_summer:
    def __init__(self, lst=[]):
        self.lst = lst
    def recursive_sum(self):
        return self.recursive_sum_helper(self.lst)
    def recursive_sum_helper(self, a_lst):
        if len(a_lst) == 1:
            return a_lst[0]
        else:
            first_element = a_lst[0]
            list_without_first_element = a_lst[1:]
            return first_element + self.recursive_sum_helper( list_without_first_element )

r = recursive_summer([1,2,3,4])
r.recursive_sum() 
```

输出为 10。

希望这有助于解决您要解决的任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T07:05:34.583

这是这样做的递归方式，但更干净：

它使用列表中的[弹出](http://docs.python.org/tutorial/datastructures.html)方法

```
class rec(object):
    def __init__(self):
        self.sum = 0

    def recur(self, list):
        if len(list) > 0:
            self.sum += list.pop()
            self.recur(list)
        else:
            return self.sum 
```

使用：

```
>>> from code import rec
>>> a = rec()
>>> b = [1,2,3]
>>> print a.recur(b)
6 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T06:12:39.753

另一种无需递归即可获得列表总和的方法，但更快更有效：

```
>>> a = [1,2,3]
>>> sum(a)
6
>>> 
```

# jquery - jqueryui可拖动的可放置问题

> ID：10546097
> 
> 赞同：1
> 
> 时间：2012-05-11T05:52:45.367
> 
> 标签：jquery, draggable, drag, droppable

我需要一些帮助来理解这有什么问题。

当将项目拖放到可放置区域（模板位置）时，它会移动到另一个位置，然后当再次尝试将其拖动到正确的位置时，它会移动得更远......

例如：在我将苹果和香蕉都放到可掉落区域后，如果我将香蕉靠近苹果，它会粘在一起。

拖动项目光标移动距离项目本身很远，假设如果我没有设置光标位置，它会出现在我想要拖动项目时鼠标所在的位置，所以很奇怪......

只要 item 从 droppable 区域移出，它就需要飞回 draggable 并整齐地显示在 draggable 区域（项目列表位置）。但似乎一直锁定/不能整齐地飞回来

```
 <link rel="stylesheet" href="http://jqueryui.com/themes/base/jquery.ui.all.css">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.js"></script>

        <style>

    #droppable {
            border:1px solid #000;
            font-weight:bold;
            background-color:#FFF;
            width: 300px;
            height: 400px;
            padding: 0.5em;
            float: left;
            margin: 10px;
        }

    #draggable{
        width:300px;
        float:left;
        border:1px solid #000;
        background-color:#E2EBED;
        padding:3px;
        height:500px;
    }

    .dragableBox{
        border:1px solid #000;
        background-color:#FFF;
        font-weight:bold;
        text-align:center;
        width:150px;
        height:auto;
        margin-bottom:5px;
        padding:3px;
    }

    </style>

        <script type="text/javascript">

    $(function() {

                //draggable setting
        $( ".dragableBox" ).draggable({
                   revert: "invalid",
                   revertDuration: 1000,
                   cursor: "move",
                   delay: 200,
                   opacity: .45,
                   refreshPositions: true,
                   snap: true,
                   containment: "#droppable"
                   //helper: "clone"
                });

                //to allow item at droppable div go back to draggable div neatly.
        $( "#draggable" ).droppable({
                        accept: '.dragableBox',
            drop: function( event, ui ) {

                          var draggable = ui.draggable;

                                $("#draggable").append(ui.droppable);
            }
        });

                //to append and show it out
        $( "#droppable" ).droppable({

                        accept: '.dragableBox',

            drop: function( event, ui ) {

                          var draggable = ui.draggable;

                          var html= 'Dropped!' + '<br>' +
                              'The square with ID "' + draggable.attr('id') + '" was dropped onto me!' + '<br>' +
                              'left:'+ ui.position.left + ' top:'+ ui.position.top;

              //ajax save actual position to db for later retrieval.

                                $("#droppable").append(ui.draggable);
            }
        });
    });

    </script>

<div class="demo">

<div id="draggable" >
        <div class="dragableBox" id="box1">apple</div>
        <div class="dragableBox" id="box2">banana</div>
        <div class="dragableBox" id="box2">mango</div>
</div>

<div id="droppable" >

</div>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T06:47:56.983

看到这个演示：http: [//jsfiddle.net/pHJgP/5/](http://jsfiddle.net/pHJgP/5/)

**jQuery代码**

```
$(document).ready(function() {
    var currentParent;

        $("#draggable .dragableBox").draggable({
            cursor: "move",
            delay: 200,
            opacity: .45,
            refreshPositions: true,
            snap: true,
            revertDuration: 1000,     
            revert: 'invalid',
            start: function(){
                currentParent = $(this).parent().attr('id');
            }
        });

    $('#draggable, #droppable').droppable({
        accept:'.dragableBox',
        drop: function(event,ui){
            if (currentParent != $(this).attr('id')){
              $(ui.draggable).addClass( "ui-state-highlight" );
            }
        }
    });

}); 
```

**HTML 代码**

```
<div class="demo">

<div id="draggable" >
        <div class="dragableBox" id="box1">apple</div>
        <div class="dragableBox" id="box2">banana</div>
        <div class="dragableBox" id="box2">mango</div>
</div>

<div id="droppable" > 
```

**你的风格**

```
#droppable {
            border:1px solid #000;
            font-weight:bold;
            background-color:#FFF;
            width: 300px;
            height: 200px;
            padding: 0.5em;
            float: left;
            margin: 10px;
        }

    #draggable{
        width:300px;
        float:left;
        border:1px solid #000;
        background-color:#E2EBED;
        padding:3px;
        height:200px;
    }

    .dragableBox{
        border:1px solid #000;
        background-color:#FFF;
        font-weight:bold;
        text-align:center;
        width:150px;
        height:auto;
        margin-bottom:5px;
        padding:3px;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T06:18:18.090

嗨检查这个jsfiddle链接

[http://jsfiddle.net/BbSLy/21/](http://jsfiddle.net/BbSLy/21/)

希望这是您正在寻找的解决方案谢谢

# z3 - Z3是否给出了迄今为止最小的不可满足的核心？

> ID：10546099
> 
> 赞同：4
> 
> 时间：2012-05-11T05:52:48.247
> 
> 标签：z3

我想知道Z3现在能不能给出最小的不能满足的核心。或者是否有人为此开发了良好的支持？有人知道吗？

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T17:35:34.320

Z3 产生无法满足的核心，但它们*不一定*是最小的。

这是一个关于如何提取未饱和核心的示例： [http ://rise4fun.com/Z3/smtc_core](http://rise4fun.com/Z3/smtc_core)

您可能还想检查以下问题：

[Z3 中的软/硬约束](https://stackoverflow.com/questions/8439556/soft-hard-constraints-in-z3)

[z3 中 SMT-LIB 2.0 断言上的标签](https://stackoverflow.com/questions/7804163/label-on-smt-lib-2-0-assertions-in-z3)

# iphone - Increasing speed for spinning effect

> ID：10546101
> 
> 赞同：0
> 
> 时间：2012-05-11T05:52:57.607
> 
> 标签：iphone, cocoa-touch, animation, uikit, transform

In my iPhone app, I have an image on the screen (UIImageView). I would like to spin it and increase the speed at a fixed rate. Basically I'm trying to create an effect where it starts to spin slowly and then increases the speed until the spinning is so fast so you cannot see the image anymore (only a fast animation).

I though of using an animation block and changing the rotation property of a transform, but I'm not sure how to control the speed.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T05:57:49.097

You're going to want to use an animation with the animation curve set to `UIViewAnimationCurveEaseIn`. Set the duration to a long interval, perhaps around 5 seconds. That should accomplish the effect you're looking for.

* * *

Sample code:

```
CABasicAnimation *spin = [CABasicAnimation animationWithKeyPath:@"transform.rotation"];
spin.toValue = [NSNumber numberWithFloat:50*2*M_PI];
spin.duration = 5.f;
spin.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseIn];
[imageView.layer addAnimation:spin forKey:@"spinningAnimation"]; 
```

If you wish to define your own animation curve, look into CAMediaTimingFunction's [`functionWithControlPoints::::`](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/CAMediaTimingFunction_class/Introduction/Introduction.html#//apple_ref/occ/clm/CAMediaTimingFunction/functionWithControlPoints%3a%3a%3a%3a) method.

# git - 如何在git中恢复？

> ID：10546103
> 
> 赞同：0
> 
> 时间：2012-05-11T05:53:22.680
> 
> 标签：git, revert

我将我的代码恢复到以前的版本，现在我想将它恢复到我的最新版本。我怎样才能做到这一点 ？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T05:57:24.077

尝试以下操作：

```
git checkout master 
```

（或者您所说的还原是什么意思？）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T06:01:01.280

您可以使用例如，您在此之前检查的最后一个位置来回顾各个参考（标签，分支，结帐）的`HEAD@{1}`历史，并且您可以使用 获得一个很好的历史目录`git log -g --decorate --oneline`。

William Pursell 指出`git reflog`，一个比 git log 简单得多的命令，只关注工作历史日志`.git/logs`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T06:01:25.883

你说的“还原”是什么意思？*混帐还原*？

您可以使用`git reset --soft YOUR_SHA`HEAD 指向特定的提交。或者，如果您迷失在“分离的头”状态中，则可以简单`git checkout master`地返回“树干”……

答案实际上取决于您当前的状态。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T06:09:50.380

如果你用过

`git checkout <commit hash>`

那么您的代码处于分离状态，这意味着它不属于任何分支。您可以简单地 `git checkout branch_name` 将代码带到最新版本

* * *

如果你用过

`git reset <commit hash>`

然后你可以清理你的更改然后

`git pull`

或者如果你记得 `<commit hash>` 你最新的版本，

`git reset <commit hash>`

# java - 如果我覆盖equals而不使用任何散列集合，是否有必要覆盖hashcode

> ID：10546106
> 
> 赞同：1
> 
> 时间：2012-05-11T05:53:25.163
> 
> 标签：java, equals, hashcode

我有一个**对象**，我只想重写*equals*方法来比较两个对象，我没有在程序中的任何地方使用任何散列集合。在这种情况下，为什么在 hashCode 和 equals 方法中有一个合同，即如果两个对象相等，那么它们应该具有相同的 hashcode。如果您想将此对象作为某个使用散列然后覆盖它的集合中的键，那么一般哈希码合同不应该是特定情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T05:58:19.857

我会说是的，因为您不知道您（或更重要的是，另一个开发人员）是否希望将来使用散列将它们放入集合中。这可能是直接的，也可能是间接的，即您可以将您的对象传递给另一个不是您编写的方法，并且该其他方法在其实现中使用散列集合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T05:57:50.683

这被认为是一种很好的做法（或强制性的），因为您不能确定没有其他人（或下个月的您）会重用您的课程。

例如，需要等于的对象才有资格用作键，因此需要哈希码。

您可以将其视为一种约定，例如缩进或参数和类名的大小写，但这种约定有助于管理代码。看到 equals 方法的人会正确地假设存在*hashcode*方法（可能在超类中）。不要让他感到惊讶（这是一般规则）。

也就是说，你有很多帮助库来制作 hashode 方法，你可以从你的 IDE 中获得灵感（例如，Eclipse 有一个生成 equals 和 hashcode 方法的功能，非常冗长，但在检查并修复它们后大多可用）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T22:42:54.737

如果你在重新定义`equals`，你应该重新定义`hashCode`，但不需要投入太多精力。只需选择您最喜欢的号码（8675309 或其他号码），然后让您的`hashCode`方法返回该号码即可。这样做将确保在插入对象时散列集合的行为正确（尽管速度很慢）。

# multithreading - 在系统命令中超时线程

> ID：10546107
> 
> 赞同：1
> 
> 时间：2012-05-11T05:53:26.560
> 
> 标签：multithreading, perl, interrupt-handling

我有一个看似简单的问题。我需要并行执行一系列系统命令（使用反引号）。

除了演示我的问题之外，下面的代码已经被剥夺了任何有意义的东西：

```
#!/usr/bin/perl -w 
use strict; 
use threads; 
use POSIX; 
my @threads = (); 
sub timeout { 
  print "TIMEOUT\n"; 
  foreach my $thread (@threads) { 
    $thread->kill("ALRM") if $thread->is_running(); 
  } 
} 

POSIX::sigaction(SIGALRM, POSIX::SigAction->new(\&timeout)); 
alarm(2); 
sub threadsub { 
  sub handletimeout { 
    print "KILL\n"; 
    threads->exit(1); 
  } 
  POSIX::sigaction(SIGALRM, POSIX::SigAction->new(\&handletimeout)); 
  # while(1) { sleep(1); } 
  return `sleep 10`; 
} 

for(my $i=0; $i < 10; $i++) { 
  push(@threads, thread->create(\&threadsub)); 
} 

foreach my $thread (@threads) { 
  my $res = $thread->join(); 
} 
```

现在，问题是当线程在系统调用中被阻塞时，发送给线程的 ALRM 信号永远不会被捕获。如果您取消注释 while 循环，则会按预期捕获信号。我该如何进行这项工作，以便即使线程卡在系统命令中，我也可以使线程超时？

谢谢，

卡斯帕

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T07:55:20.090

从**人线程**

```
 Unsafe signals
       Since Perl 5.8.0, signals have been made safer in Perl by postponing their handling until the interpreter is in a safe state.  See "Safe
       Signals" in perl58delta and "Deferred Signals (Safe Signals)" in perlipc for more details.

       Safe signals is the default behavior, and the old, immediate, unsafe signalling behavior is only in effect in the following situations:

       ?   Perl has been built with "PERL_OLD_SIGNALS" (see "perl -V").

       ?   The environment variable "PERL_SIGNALS" is set to "unsafe" (see "PERL_SIGNALS" in perlrun).

       ?   The module Perl::Unsafe::Signals is used.

       If unsafe signals is in effect, then signal handling is not thread-safe, and the "->kill()" signalling method cannot be used. 
```

这实际上表明信号将被推迟到 perl 处于不安全状态。如果我们切换到 'unsafe-signals' 程序终止，并**在 threads.pl 处出现消息 Cannot signal threads without safe signals**。请检查**不安全信号**是否在您的系统中工作。虽然它有效，但它是**不安全的**。建议迁移到进程。下面的代码应该会给你想要的结果。

```
use strict;
use POSIX;

my $pid=fork();

sub timeout {
  print "TIMEOUT\n";
  kill SIGALRM,$pid;
}

if( $pid ) { ## parent
    alarm(2);
    POSIX::sigaction(SIGALRM, POSIX::SigAction->new(\&timeout));
    waitpid $pid,0;
} else { ## child
    sub handletimeout {
        print "SIGALRM child\n";
        exit(1);
    }
    POSIX::sigaction(SIGALRM, POSIX::SigAction->new(\&handletimeout));
    `sleep 10`;
    print "child normal exit";
} 
```

# javascript - 反向地理编码不正确的结果

> ID：10546108
> 
> 赞同：1
> 
> 时间：2012-05-11T05:53:30.627
> 
> 标签：javascript, google-maps, geocoding, reverse-geocoding

我有一个小的地理编码应用程序[http://www.galerie-insecte.org/galerie/ll3.php](http://www.galerie-insecte.org/galerie/ll3.php)。

原理很简单：在上面的输入行中输入一些数据，API 会在下面的窗口中获取地图和一些数据（纬度、经度、行政地址和海拔高度）。

现在的问题是：如果我以十进制格式 (43.588278,5.776472) 或 DMS 格式 (43°35'17.8",5°46'35.3") 给出 latlng，我会得到正确的地图（也就是说，标记是正确的定位[用户准确识别他拍摄照片的位置]）。但是显示的经纬度数据是假的（43.6044691,5.7687348）。

此外，移动标记并不总是会更改下部窗口中的数据。我找不到一个清晰的顺序来重现这个问题（换成另一个放大倍数？换成卫星视图？它们都在一起？）

它为你们敲响了警钟吗？

提前致谢。

普杜姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T06:33:54.277

地理编码服务获取最近的、人类可读的地址。因此，当您使用反向地理编码服务从地图中找到标签的位置时，它仅显示该地址的纬度/经度

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T14:00:53.223

谢谢，你可能正中了钉子。我不得不更改我的代码。我现在使用 geocoder.geocode (address...) 调用返回的原始 latlng，当我有 location_type ROOFTOP 时，我只显示通过 geocoder.geocode (location...) 调用获得的街道地址。如果没有，我只显示地区、邮政编码和国家。对于我的网站（昆虫学门户网站）来说，这在很大程度上已经足够了。并且现在显示的经纬度数据是正确的。

# php - 垂直显示 mysql 表 - 用于比较或打印目的

> ID：10546117
> 
> 赞同：1
> 
> 时间：2012-05-11T05:55:20.960
> 
> 标签：php, mysql

假设您有这样的表格视图

```
seed_id     name           country
-------     ----------     -------

1           John           America
2           Jose           Mexico
3           Khan           Pakistan 
```

并且您想垂直绘制 HMTL，如下所示；

```
seed_id     1             2           3
name        John          Jose        Khan
country     America       Mexico      Pakistan 
```

这种视图在两种情况下非常方便。

您想打印表格视图或并排比较字段。

在打印视图中，在具有 50 个字段的表上，即使打印单个记录视图也不会为您提供可查看的打印输出。纸张可能会在第 10 场左右剪掉打印件。

但是对于垂直视图，表格有多少字段并不重要。

同样，当您并排比较记录时，就像在这个漂亮的例子中

[http://www.dpreview.com/products/compare/side-by-side?products=nikon_d90&products=nikon_d3&products=nikon_d4&sortDir=ascending](http://www.dpreview.com/products/compare/side-by-side?products=nikon_d90&products=nikon_d3&products=nikon_d4&sortDir=ascending)

你会得到一个非常有用的视图。

我现在可以坐下来写这个库函数，但现在没有时间。但我敢肯定，有人有时间，或者已经写好了。请你分享一下好吗？

getview ($dbh,"select * from tableX where 1=1","vertical");

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T06:04:35.343

您可以使用`\G`标志。

```
SELECT * FROM mytbl \G 
```

* * *

UPD：示例文章：[http ://slaptijack.com/software/enabling-vertical-g-output-in-the-mysql-client/](http://slaptijack.com/software/enabling-vertical-g-output-in-the-mysql-client/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T06:48:54.233

eggyal 我没有回答我的问题。但这是我在 stackoverflow 上知道的唯一方法，可以重新发布代码作为对我最初问题的跟进。

无论如何，我试过你的链接。（即[在 PHP 中转置多维数组](https://stackoverflow.com/questions/797251/transposing-multidimensional-arrays-in-php/3423692#3423692)）但是，它不适用于我的情况。

你可以自己试试看。我附加了两个功能来尝试这个。您只需要一个 mysql $dbh 连接来执行此功能。您会看到，在我的功能中，我利用了`flipdiagonally`在该链接中被投票 24 次的功能。

当您调用设置为 $direction_v_or_h 的函数时，`h,`它可以工作。但这对我们来说不是新闻。这是`v`我追求的模式。

试试这样的限制

```
SQL_getview($dbh, "select * from yourTable limit 2","h"); 
```

和

```
SQL_getview($dbh, "select * from yourTable limit 2","v"); 
```

我得到的错误是这样的；对表中的每个字段重复

```
Warning: Invalid argument supplied for foreach() in D:\Hosting\5291100\html\blueprint\sql.php on line 739

function SQL_getview($dbh,$sql,$direction_v_or_h = 'h')

{

    $result = $result = mysql_query($sql,$dbh);

    $fields_num = mysql_num_fields($result);

    if ($direction_v_or_h == "h"):
        echo "<table border='1'><tr>";
        // printing table headers
        for($i=0; $i<$fields_num; $i++)
        {
                $field = mysql_fetch_field($result);
                echo "<td>{$field->name}</td>";
        }
        echo "</tr>\n";
        while($row = mysql_fetch_row($result))
        {
                echo "<tr>";
                foreach($row as $cell)
                        echo "<td>$cell</td>";
                        echo "</tr>\n";
        }
        echo "</table>";
    else:
        if (1):    //turn this to 0 to see the good old print_r workaround
            echo "<table border='1'><tr>";
            // printing table headers
            for($i=0; $i<$fields_num; $i++)
            {
                    $field = mysql_fetch_field($result);
                    echo "<td>{$field->name}</td>";
            }
            echo "</tr>\n";
            while($row = mysql_fetch_assoc($result)) 
            {
                    echo "<tr>";
                        $row = flipDiagonally($row);                

                    foreach($row as $cell)
                            echo "<td>$cell</td>";
                            echo "</tr>\n";
            }
            echo "</table>";
        else:
            while($row = mysql_fetch_assoc($result)) 
            {
                    echo "<tr>";
                    echo "<pre>";
                    print_r ($row);
                    echo "</pre>";
                    echo "<hr>";
            }

        endif;
    endif;
    mysql_free_result($result); 
}

function flipDiagonally($arr) {
    $out = array();
    foreach ($arr as $key => $subarr) {
        foreach ($subarr as $subkey => $subvalue) {
                $out[$subkey][$key] = $subvalue;
        }
    }
    return $out;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T06:02:56.610

循环可能有更好的方法......

```
$table = array();
foreach($result_row as $row)
{
  foreach(array('seed_id','name','country') as $index)
  {
    $table[$index][] = $row[$index];
  }
} 
```

类似的东西应该将你的数组重新组织成你需要的结构

# java - Java exec - 交互式进程的输出保持到进程终止

> ID：10546122
> 
> 赞同：1
> 
> 时间：2012-05-11T05:55:45.013
> 
> 标签：java, process, exec

我对 Java 中的交互过程有疑问。我有线程来读取 STDOUT 和 STDERR 以及一个线程来处理进程的输入。但是在进程终止之前，STDOUT 流中没有可用的数据。然后是一次打印整个输出。

```
DBG    | Pipe action-STDERR started
DBG    | Pipe action-STDIN started
DBG    | Pipe action-STDOUT started

STDIN  | Try to put some input.
STDIN  | I cannot see any output.
STDIN  | Nevertheless the interaction works.
STDIN  | It works on background.
STDIN  | Let's terminate the process to see the truth.
STDIN  | quit

STDOUT | Enter some text, please: The text is 'Try to put some input.'
STDOUT | Enter some text, please: The text is 'I cannot see any output.'
STDOUT | Enter some text, please: The text is 'Nevertheless the'
STDOUT | Enter some text, please: The text is 'interaction works.'
STDOUT | Enter some text, please: The text is 'It works on background.'
STDOUT | Enter some text, please: The text is 'Let's terminate the process to see the truth.'
STDOUT | Enter some text, please: The text is 'quit'
STDOUT | Bye!
DBG    | Trying to kill thread action-STDOUT
DBG    | Trying to kill thread action-STDERR
DBG    | Trying to kill thread action-STDIN
DBG    | Pipe action-STDERR finished
DBG    | Finished
DBG    | Pipe action-STDIN finished
DBG    | Pipe action-STDOUT finished 
```

以 STDOUT 为前缀的行是进程写入的行。以 STDIN 为前缀的行是我写的行。以 DBG 为前缀的行是被测试的 Java 程序编写的作为调试信息的行。让我们尝试在系统控制台中执行相同的过程。

```
Enter some text, please: Text
The text is 'Text'
Enter some text, please: quit
The text is 'quit'
Bye! 
```

这种行为完全符合我的期望。我被要求提供一些意见。我这样做并得到答案。

我很惊讶，我在网上找到了几篇帖子，包括 Stackoverflow，但没有任何答案被标记为可接受的解决方案。（例如[，从 Java Process 读取 InputStream 时出现问题](https://stackoverflow.com/questions/3159913/problem-reading-inputstream-from-java-process-runtime-getruntime-exec-or-pr)。）Java 开发人员似乎从未处理过交互式进程的执行。奇怪的是，非交互式进程的输出（如 ping）在进程运行时按顺序出现。没有任何问题。但是当进程正在等待用户输入时，输出会以某种方式被阻塞。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T07:15:47.440

遗憾的是，这不是一个错误，而是一个功能。无论是在 Linux 上还是在 Windows 上，管道都是这样实现的。它们被缓冲以提高性能。一个进程产生数据，第二个进程接管它们。无需交互，该模型在 99% 的情况下也适用。

然而，控制台是另一种应用程序。系统控制台是操作系统的一部分，它的工作方式与我们用 Java 编写的控制台有点不同。当然，系统控制台会立即打印所有数据。一切正常。然后从我们的代码执行的相同过程不会打印提示，尽管它应该工作。怎么了？系统控制台和进程之间没有缓冲区。但是相反，我们的进程和我们的 Java 代码之间有一个缓冲区。这就是原因。

该进程不会自动刷新输出。不管进程是用哪种语言编写的。用 Java、Perl 或 C 编写的进程从不打印提示，直到将显式刷新添加到其代码中。如果您可以影响您将与之交互的进程的代码，请更新代码（伪代码如下）：

```
print 'Give me a number '
flush STDOUT
number = get STDIN
print 'You wrote ' + number
flush STDOUT 
```

没有其他解决方案。如果第三方应用程序没有刷新其输出，则您无法在控制台中使用它。你几乎无法逃避缓冲。尽管如此，还是有可能的。有一些库，或者您可以找到一个可以与有问题的进程交互并检查其代码的开源应用程序。

***提示：**查看[Apache Commons Exec](http://commons.apache.org/exec/)。它是一个专门用于进程执行的库。*

# c# - MTOM - 在 VS 2010 中读取时遇到无效的 MIME 内容类型标头

> ID：10546123
> 
> 赞同：3
> 
> 时间：2012-05-11T05:55:53.430
> 
> 标签：c#, .net, parsing, c#-4.0, mtom

我在磁盘上有一个 MTOM 响应，我正在尝试加载和解析响应。在创建 MTOM 阅读器时，我不断收到错误消息。

```
Invalid MIME content-type header encountered on read. 
```

这是一个错误还是内容类型的标题真的意味着 Visual Studio 无法理解内容类型？

```
MIME-Version: 1.0
Content-Type: Multipart/Related;boundary=DeltaSync91ABCB4AF5D24B8F988B77ED7A19733D?MTOM;
    type="application/xop+xml";
    start="<DeltaSyncMTOMFetchResponse@mail.services.live.com>";

    --DeltaSync91ABCB4AF5D24B8F988B77ED7A19733D?MTOM
    content-transfer-encoding: binary
    content-type: application/xop+xml; charset=utf-8; type="application/xop+xml"
    content-id: <DeltaSyncMTOMFetchResponse@mail.services.live.com>

    <ItemOperations xmlns:xop="http://www.w3.org/2004/08/xop/include" xmlns:B="HMMAIL:" xmlns:D="HMSYNC:" xmlns="ItemOperations:"><Status>1</Status><Responses><Fetch><ServerId>E631966A-9439-11E1-8E7B-00215AD9A7B8</ServerId><Status>1</Status><Message><xop:Include href="cid:1.634715231374437235@example.org" /></Message></Fetch></Responses></ItemOperations>
    --DeltaSync91ABCB4AF5D24B8F988B77ED7A19733D?MTOM
    content-transfer-encoding: binary
    content-type: application/octet-stream
    content-id: <1.634715231374437235@example.org> 
```

这是创建 MTOM 阅读器的简单代码。

```
XmlDictionaryReader mtomReader = XmlDictionaryReader.CreateMtomReader
            (
             fStream,
             Encoding.UTF8,
             XmlDictionaryReaderQuotas.Max
            ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:08:10.943

您的数据存在几个问题：

*   您需要在 Content-Type 标头中编码边界字符串，因为它包含`?`字符。
*   第 5 行到结尾是缩进的 - 您需要删除前导空格
*   您缺少结束边界字符串

这是对我有用的修改后的内容：

```
MIME-Version: 1.0
Content-Type: Multipart/Related;boundary="DeltaSync91ABCB4AF5D24B8F988B77ED7A19733D?MTOM"";
    type="application/xop+xml"";
    start="<DeltaSyncMTOMFetchResponse@mail.services.live.com>"";

--DeltaSync91ABCB4AF5D24B8F988B77ED7A19733D?MTOM
content-transfer-encoding: binary
content-type: application/xop+xml; charset=utf-8; type="application/xop+xml""
content-id: <DeltaSyncMTOMFetchResponse@mail.services.live.com>

<ItemOperations xmlns:xop="http://www.w3.org/2004/08/xop/include"" xmlns:B=""HMMAIL:"" xmlns:D=""HMSYNC:"" xmlns=""ItemOperations:""><Status>1</Status><Responses><Fetch><ServerId>E631966A-9439-11E1-8E7B-00215AD9A7B8</ServerId><Status>1</Status><Message><xop:Include href=""cid:1.634715231374437235@example.org"" /></Message></Fetch></Responses></ItemOperations>
--DeltaSync91ABCB4AF5D24B8F988B77ED7A19733D?MTOM
content-transfer-encoding: binary
content-type: application/octet-stream
content-id: <1.634715231374437235@example.org>
--DeltaSync91ABCB4AF5D24B8F988B77ED7A19733D?MTOM-- 
```

# perforce - Perforce：如何找出客户端视图包含给定路径

> ID：10546126
> 
> 赞同：0
> 
> 时间：2012-05-11T05:56:03.103
> 
> 标签：perforce

我有一个使用 perforce 通配符定义的视图行的客户端规范。
例如，

```
//depot/*/xyz/... //myClient/*/xyz/...
//depot/abc... //myClient/abc...
//depot/jkl/*pqr... //myClient/jkl/*pqr... 
```

现在，给定一个路径字符串，我需要找出视图行是否包含它。

在上面的示例中，第三个视图行包含**//depot/jkl/123pqr789/dfg.c**

我正在为此编写java程序。我查看了 p4java API，但它无济于事，因为 ViewMap 类的 javadoc 说，

*这种视图地图的实现（还）不包括高级 Perforce 功能（例如翻译或测试地图以查看路径是否被映射），但未来版本将；这里的重点是为 P4Java 视图映射建立一个通用基础。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T13:52:02.747

尝试向服务器发出“p4 where”命令，让它告诉你：[http ://www.perforce.com/perforce/doc.current/manuals/cmdref/where.html#1040665](http://www.perforce.com/perforce/doc.current/manuals/cmdref/where.html#1040665)

# google-bigquery - BigQuery 是否可以进行近似字符串匹配/模糊字符串搜索？

> ID：10546130
> 
> 赞同：3
> 
> 时间：2012-05-11T05:56:30.923
> 
> 标签：google-bigquery

感谢 Google 提供 BigQuery，太棒了！
BigQuery 是否可以进行近似字符串匹配/模糊字符串搜索？
Google 是否有计划将此功能添加到 BigQuery？

当然，Google 专有的近似字符串匹配算法可用于向 BigQuery 提供此功能，同时仍保留 Google 知识产权。我们搜索了所有 BigQuery 文档和 Stack Overflow 问题。当然有很多算法可以做到这一点，但如何与 BigQuery 集成？

我们的需求很简单，比较两个几乎相同但可能略有不同的字符串。例如：

```
"Rhodes USA" vs. "Rhodes USA, LLC", vs. "Rhodes USA LLC". 
```

从我们的 BigQuery 测试看来，两个字符串需要完全匹配，BigQuery 才能加入它们，甚至可以降低到每个字符串中尾随空格的数量。非常感谢添加此功能或与 BigQuery 集成的指南。这是为了支持 Milwaukee Jets，这是一家位于威斯康星州密尔沃基的区域性、创新性、部分喷气式飞机所有权公司。再次感谢 Google 提供 BigQuery。

非常感谢您和最诚挚的问候， Andrew Paullin (414) 212-5372

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T15:22:22.267

不幸的是，不支持近似字符串匹配。最接近的方法是使用正则表达式。您最好的选择可能是在数据到达 BigQuery 之前对其进行规范化 - 即将“Rhodes USA”和“Rhodes, USA.”转换为相同的字符串。不过，我会为此支持添加一个功能请求错误。

# java - 应维护缓存，以便即使网络不可用，用户也可以查看上次访问的页面

> ID：10546133
> 
> 赞同：0
> 
> 时间：2012-05-11T05:56:44.383
> 
> 标签：java, android, offline-caching

我已经创建了一个应用程序，如果我们在线阅读一些页面，我希望它也可以在离线模式下维护。这意味着无论我在在线模式下阅读什么，我也希望能够在离线模式下阅读它。谁能告诉我我该怎么做？我是安卓新手。请告诉我逻辑，否则如果有人有相关示例，请发布。

# web-services - Axis2 错误 - 类 HelloAxisService 中没有这样的方法 sayHello

> ID：10546134
> 
> 赞同：0
> 
> 时间：2012-05-11T05:56:48.270
> 
> 标签：web-services, axis2

我正在尝试在axis2中实现一个简单的示例。我创建了服务类和 xml，生成了 aar 并在服务目录中展开。我可以注意到我的服务和操作 sayHello，但是在测试 web 服务时，它说在我的类 HelloAxisService 中没有这样的方法 sayHello。

这是services.xml

```
<service name="HelloAxisService">

<description>Hello Axis service</description>

        <messageReceivers>
   <messageReceiver mep="http://www.w3.org/2004/08/wsdl/in-out"
                     class="org.apache.axis2.rpc.receivers.RPCMessageReceiver"/>
    </messageReceivers>

    <parameter name="ServiceClass">com.my.axis.HelloAxisService</parameter>

</service> 
```

这是我的课

```
package com.my.axis;

public class HelloAxisService {

    private String sayHello(String name){

        return "Hello"+ name;
    }
} 
```

我的网址是`http://localhost:8080/axis2/services/HelloAxisService/sayHello?name=dude`

尽管该服务存在于以下服务列表中，但我在浏览器和使用 axiom 的客户端程序中都遇到了错误

```
Available services

HelloAxisService

Service EPR : http://localhost:8080/axis2/services/HelloAxisService
Service Description : No description available for this service

Service Status : Active
Available Operations
sayHello 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T09:16:32.713

在代码处仔细观察一番后，发现了问题所在。它是`private`sayHello 方法的访问修饰符。改变它来`public`为我做这件事。

# javascript - 使用 Javascript 在 SVG 中附加路径子项

> ID：10546135
> 
> 赞同：36
> 
> 时间：2012-05-11T05:56:54.787
> 
> 标签：javascript, svg

再会，

我在创建路径并在 SVG 元素中使用“appendChild”显示它时遇到了难以置信的困难。

我必须遗漏一些非常简单的东西，因为我已经倾注了 W3C 的规范、w3schools.com、这里的各种帖子并试图以各种方式忍者谷歌。

我在 FireFox 和 Chrome 中进行测试。

我有一个简单的 svg 文件，因此：

```
<svg xmlns:svg ... id="fullPageID">
 <image id="timer1" x="100" y="100" width="100px" height="100px" xlink:href="../component/timer/timer1.svg" />  
 <image id="battery1" x="200" y="200" width="100px" height="100px" xlink:href="../component/battery/30x20_ochre.svg" />
 <script xlink:href="pathMaker.js" type="text/javascript" id="pathMaker" />  
</svg> 
```

我尝试使用的脚本如下所示：

```
newpath = document.createElementNS("SVG","path");  
newpath.setAttribute("id", "pathIdD");  
newpath.setAttribute("d", "M 1,97.857143 C 19.285714,96.428571 24.016862,131.64801 90.714286,132.85714 140.78762,133.7649 202.79376,66.16041 202.79376,66.16041");  
newpath.setAttribute("stroke", "black");  
newpath.setAttribute("stroke-width", 3);  
newpath.setAttribute("opacity", 1);  
newpath.setAttribute("fill", "none");

document.getElementById("fullPageID").appendChild(newpath); 
```

我只想做一些简单的工作。我是否认为我不需要像在[Library 中找到的那样复杂的解决方案来使用 Javascript 生成 SVG 路径？](https://stackoverflow.com/questions/4441451/library-to-generate-svg-path-with-javascript)?

谢谢。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-05-11T06:46:47.663

有两个问题：

1.  正如已经指出的，您必须使用完整的命名空间 uri，所以在这种情况下：

    ```
    newpath = document.createElementNS('http://www.w3.org/2000/svg',"path"); 
    ```

2.  还需要考虑命名空间来设置属性。好消息是您可以`null`作为命名空间 uri 传入，因此：

    ```
    newpath.setAttributeNS(null, "d", "M 1,97.857143 C 19.285714,96.428571 24.016862,131.64801 90.714286,132.85714 140.78762,133.7649 202.79376,66.16041 202.79376,66.16041"); 
    ```

此外，这里有两种方法可以更轻松地处理 svg 命名空间（假设它是一个独立的 svg，而不是嵌入在 HTML 中）：

*   要引用 svg 元素，您可以使用`document.rootElement`.
*   `document.rootElement.getAttribute(null, "xmlns")`返回一个空字符串（虽然使用此方法请求其他属性确实有效。相反，使用`document.rootElement.namespaceURI`.

因此，在您的代码中，您可以进行以下重写：

从：

```
 newpath = document.createElementNS("http://www.w3.org/2000/svg","path"); 
```

至：

```
 newpath = document.createElementNS(document.rootElement.namespaceURI,"path"); 
```

要附加元素，您可以从：

```
document.getElementById("fullPageID").appendChild(newpath); 
```

至：

```
document.rootElement.appendChild(newpath); 
```

所以最终的脚本是：

```
newpath = document.createElementNS(document.rootElement.namespaceURI,"path");  
newpath.setAttributeNS(null, "id", "pathIdD");  
newpath.setAttributeNS(null, "d", "M 1,97.857143 C 19.285714,96.428571 24.016862,131.64801 90.714286,132.85714 140.78762,133.7649 202.79376,66.16041 202.79376,66.16041");  
newpath.setAttributeNS(null, "stroke", "black"); 
newpath.setAttributeNS(null, "stroke-width", 3);  
newpath.setAttributeNS(null, "opacity", 1);  
newpath.setAttributeNS(null, "fill", "none");

document.rootElement.appendChild(newpath); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-11T06:13:30.133

命名空间需要是“http://www.w3.org/2000/svg”，而不是`createElementNS`调用中的“SVG”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-27T01:07:34.113

你可以得到一个免费的命名空间并且偷偷地通过放置一个路径元素，使用一个 id 来隐藏它，然后克隆它。这是一个使用 jQuery 的示例：

HTML

```
<svg ...>
  <path id="pathFactory"></path>
</svg> 
```

CSS

```
#pathFactory {
  display: none;
} 
```

Javascript

```
var path = $('#pathFactory').clone().removeAttr('id'); 
```

您的路径变量现在是一个完整的工作路径，具有适当的命名空间，未隐藏并准备附加到 svg。

# java - “公共”或“受保护”方法对于不实现任何接口的私有嵌套类没有任何区别..？

> ID：10546137
> 
> 赞同：1
> 
> 时间：2012-05-11T05:57:01.527
> 
> 标签：java, inner-classes, modifier

“公共”或“受保护”方法对于不实现任何接口的私有嵌套类没有任何区别..？

如果私有嵌套类没有实现任何接口或从任何类继承，对于其方法的修饰符，似乎“public”或“protected”或没有修饰符没有任何区别。如果编译器只允许它们“私有”，那将更有意义。那么为什么java允许它们呢？

```
class Enclosing {

    private class Inner {
        private void f1() {}
        void f2() {}
        protected void f3() {}
        public void f4() {}
    }

    void test() {
        Inner o= new Inner();
        o.f1();
        o.f2();
        o.f3();
        o.f4();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T06:27:15.097

这是我刚刚尝试过的：

```
public class Test {

    public void method(){

        Innerclass ic = new Innerclass();
        InnerClass2 ic2 = new InnerClass2();
        System.out.println(ic.i);
        System.out.println(ic.j);
        System.out.println(ic.k);
        System.out.println(ic.l);

        System.out.println(ic2.i);  // Compile Error
        System.out.println(ic2.j);
        System.out.println(ic2.k);
        System.out.println(ic2.l);
    }

    private class Innerclass{

        private int i;
        public int j;
        protected int k;
        int l;

    };

    private class InnerClass2 extends Innerclass{

    }

} 
```

如上所述，这有一个错误。

1.  即使内部类是私有的，内部类的所有成员都可以被封闭/外部类访问，而不管它们的可见性/访问修饰符如何。
2.  但是，如果一个内部类正在扩展另一个内部类，则访问修饰符确实很重要。
3.  这些是适用于任何与继承相关的类的**一般继承规则。**
4.  因此，java 允许私有内部类中的所有访问修饰符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T06:05:30.240

`private`意味着只能通过类范围访问。这条规则突然不适用于嵌套类是不合逻辑的。

我没有定义任何其他类型的嵌套类，除了`private`. 以及我希望从我让他们成为的父类访问他们的成员`public`。

# timer - 秒表在 Android 操作系统中的准确度如何？

> ID：10546139
> 
> 赞同：0
> 
> 时间：2012-05-11T05:57:04.050
> 
> 标签：timer, android, stopwatch

所以我需要为**安卓**设备（变压器平板电脑）制作一个简单但可靠的秒表，精度为**1 毫秒。**我对安卓完全没有经验。搜索后，我没有找到任何关于我在这个特定上下文中可以获得的最大准确度的细节（如下所述）。也许这里有人可以给我我需要的信息。由于秒表将用于时间反应和诊断，因此 1 毫秒是我们需要的准确度。

 ****秒表应该做的很简单：**

*   显然，程序从 00:00.000 开始，从那里将采取 7 项措施。当用户按下按键或屏幕时，程序应记录经过的时间。在第 7 次，程序会将测量值保存在 txt 文件中。

我什至不需要显示印章或经过的时间并刷新显示。除了操作系统应用程序，没有其他应用程序将运行。

理论上 System.nanoTime() 或时间戳会做到这一点。但我不确定这是否会给我所需的 1 毫秒精度。**他们能给我我正在寻找的准确性吗？一个简短的解释会很有用。还有其他方法吗？** 如果有人是 android 开发人员，我们将不胜感激。

谢谢，

**更新**：尽管用户 Nanno 对 Android 操作系统的限制提出了一个有效的观点，因此在“仅限平板电脑”的情况下不可能实现 1 毫秒精度秒表，朱利安的进一步回答描述了一个有趣且相对便宜的解决方案来实现使用该目标的目标Android ADK（外部硬件）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T06:45:11.210

使用您当前的设置，我怀疑您能否获得这种准确性，仅仅是因为`users push a key or the screen`.

在您成功推送屏幕、捕获事件并调用函数之前，您的准确性将会下降。尤其是当您考虑时`nanoTime`，界面会在您的测量中添加一个我不相信的随机因素。

Android 不是为运行实时程序而设计的，即使您没有在后台运行其他程序，系统也已为它做好了准备。它可以在后台广播意图或做其他意想不到的事情。当然，您的界面确实具有优先权，但是您所暗示的准确性？我不这么认为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T07:16:45.443

可以使用以下方法使 <1ms 准确的 android 秒表解决方案工作：

[http://developer.android.com/guide/topics/usb/adk.html](http://developer.android.com/guide/topics/usb/adk.html)

将按钮连接到板上，并将您的时序代码放入远程处理器（AVR，使用 arduino 工具编程。对于嵌入式初学者来说非常容易）然后通过 USB 在 android 平板电脑和开放式附件开发套件之间进行通信，以在药片。

当然，如果您希望人们能够从 google play 将它下载到他们在世界各地的设备上，这个解决方案当然不是很有用......但是看到您提到了一个特定的设备，也许您只是想让这个项目用于你自己？

在那种情况下，它是可行的，只是以一种非常迂回的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T06:15:36.907

为什么不使用 System.currentTimeMillis，你可以在[这里](http://goldb.org/stopwatchjava.html)找到一个秒表的例子，它写成具有毫秒精度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-13T10:05:36.927

你应该先试试这个：

**使用您的 android 平板电脑但不使用 android OS 在按键和时钟停止之间获得 1 ms 的准确度是合理的**。你应该在安卓设备上使用**UBUNTU**。

在这里得到它：[http ://www.ubuntu.com/devices/android](http://www.ubuntu.com/devices/android)

关于代码，使用 C++ 高精度计时器。

将应用程序和呼叫设置为更高的优先级。

正如我所说，试试吧。你可以节省时间和金钱！（比开始购买外部硬件要好）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T22:45:12.000

关于使用 System.currentTimeMillis 作为秒表的一条评论，我一直试图在这个应用程序中使用它，当用户更改开始和停止事件之间的时间时它会失败。例如，当秒表开始计时 5 分钟事件时，当前时间可能是下午 3:09。

然后，在下午 3 点 11 分，用户可以将时间提前一小时，即下午 4 点 11 分。然后，5 分钟后，秒表停止，并调用 System.currentTimeMilli's，它将在下午 4:14 返回。程序将减去两次并返回秒表经过的时间 1 小时 5 分钟（而不是正确的 5 分钟）！！！**

# sparql - 有什么方法可以在不将所有数据加载到内存的情况下使用 Jena 进行推理？

> ID：10546141
> 
> 赞同：2
> 
> 时间：2012-05-11T05:57:17.587
> 
> 标签：sparql, jena, jena-rules

我有大量的 RDF 数据要推断，我需要开发自己的推断规则。我的问题是，是否有任何方法可以做到这一点？可以使用 Jena 规则和 SPARQL 这样做吗？Jena 规则和 sparql 查询是否必须将所有数据加载到内存中？希望尽快得到答案，并提前感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T07:54:44.300

当所有数据都加载到内存中时，Jena[推理引擎肯定工作得最好。](http://jena.apache.org/documentation/inference/index.html)这是因为，虽然可以将推理引擎连接到任何 Jena `Model`，包括[TDB](http://jena.apache.org/documentation/tdb/index.html)等持久存储，但推理算法会进行*多次*调用以检查模型中是否存在特定三元组。当该检查需要命中磁盘时，这只会变得低效。

如果您有相对简单的推理需求，您可以通过精心构建的 SPARQL 查询来表达您的需求，在这种情况下，您可能可以直接查询 TDB 或 SDB 存储。它仅取决于查询的复杂性。

如果三重存储的内容相当稳定，或者可以划分为稳定的持久集和动态内存集，那么策略是预先计算推理闭包并将其存储在持久存储中。换句话说，经典的空间/时间权衡。有两种方法可以做到这一点：首先，使用内存存储的推理引擎，使用尽可能多的堆空间；第二次使用 Jena 的[RIOT 推断命令行脚本](http://jena.apache.org/documentation/io/riot.html#inference)。

对于大规模 RDF 推理，开源 Jena 平台的替代方案是来自 Clark & Parsia 的商业产品[Stardog](http://stardog.com/)（我相信它有一个 Jena 模型连接器，但我自己没有使用过）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T08:13:49.257

除了 Ian 所说的并且根据您的规则，如果在您的情况下以流方式实现所有推断的三元组是可行的，请查看 RIOT 的推断源代码，如果您需要的不仅仅是 RDFS，请考虑如何添加支持对于 OWL 的一个子集。你可以在这里找到源代码：

*   [https://svn.apache.org/repos/asf/jena/trunk/jena-arq/src/main/java/riotcmd/infer.java](https://svn.apache.org/repos/asf/jena/trunk/jena-arq/src/main/java/riotcmd/infer.java)
*   [https://svn.apache.org/repos/asf/jena/trunk/jena-arq/src/main/java/org/openjena/riot/pipeline/inf/InferenceSetupRDFS.java](https://svn.apache.org/repos/asf/jena/trunk/jena-arq/src/main/java/org/openjena/riot/pipeline/inf/InferenceSetupRDFS.java)
*   [https://svn.apache.org/repos/asf/jena/trunk/jena-arq/src/main/java/org/openjena/riot/pipeline/inf/InferenceProcessorRDFS.java](https://svn.apache.org/repos/asf/jena/trunk/jena-arq/src/main/java/org/openjena/riot/pipeline/inf/InferenceProcessorRDFS.java)

RIOT 的 infer 命令的方法也可以与 MapReduce 一起使用，您可以在此处找到示例：

*   [https://github.com/castagna/tdbloader4/blob/f5363fa49d16a04a362898c1a5084ade620ee81b/src/main/java/org/apache/jena/tdbloader4/InferDriver.java](https://github.com/castagna/tdbloader4/blob/f5363fa49d16a04a362898c1a5084ade620ee81b/src/main/java/org/apache/jena/tdbloader4/InferDriver.java)

# node.js - 猫鼬没有正确插入 MongoDB

> ID：10546145
> 
> 赞同：2
> 
> 时间：2012-05-11T05:57:31.933
> 
> 标签：node.js, mongodb, mongoose

当我在节点脚本中运行此代码时，由于某种原因，当我使用 db.test.find() 检查数据库时，什么都没有显示。有什么线索吗？

```
 var mongoose = require('mongoose');
  var db = mongoose.connect('mongodb://localhost/test');
  var Schema = mongoose.Schema,
    ObjectId = Schema.ObjectId;
  UserSchema = new Schema({
  'title': { type: String, index: true },
  });
  var User = mongoose.model('user', UserSchema);
  var user = new User();
  user.title = "TEST TITLE";
  user.save(); 
```

多谢你们

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T10:20:22.967

您需要在控制台中使用数据库“测试”。为什么要测试？因为你在这一行告诉它：

`var db = mongoose.connect('mongodb://localhost/test');`

安慰：

`> use test`

还有猫鼬；它使集合多元化，因此将其保存到“用户”中。

`> db.users.find()`

# java - 具有远程方法调用（rmi）的对等系统

> ID：10546147
> 
> 赞同：2
> 
> 时间：2012-05-11T05:57:42.610
> 
> 标签：java, jakarta-ee, rmi, distributed-system

您如何将分布式算法（例如向量时间戳、领导者选举算法）整合到使用 RMI 创建的对等系统中？我必须想出一个利用分布式算法的对等系统。如果有人能给我一些想法，我将不胜感激。

干杯

# android - 如何使用android中的GPS坐标测量从当前位置到另一个位置的区域

> ID：10546150
> 
> 赞同：1
> 
> 时间：2012-05-11T05:57:49.300
> 
> 标签：android

我正在Android平板电脑上开发一个应用程序，我有一个新要求，我需要找出一个点到另一个选定点之间的距离，谁能帮我实现这个

我发现在谷歌地图中，​​我们在实验室菜单中有一个名为“测量”的选项，我需要同样的要求，谁能告诉我如何在谷歌地图中调用/实现以编程方式测量的功能。

请检查下图以获得更好的理解。

等待您的宝贵意见...![在此处输入图像描述](../Images/71c90a26a834131a2b3c2b673d8ce9a9.png)

我正在使用下面的代码来显示当前的 gps 位置现在我需要知道如何指向其他位置并画线然后测量区域请检查我的代码并建议我

```
public class Tracking extends MapActivity implements LocationListener {

   LocationManager locman;
   LocationListener loclis;
   Location Location;
   private MapView map;

   List<GeoPoint> geoPointsArray = new ArrayList<GeoPoint>();
   private MapController controller;
   String provider = LocationManager.GPS_PROVIDER;
   double lat;
   double lon;

   @Override
      public void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
         setContentView(R.layout.main);
         initMapView();
         initMyLocation();
         locman = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
         //locman.requestLocationUpdates(provider,60000, 100,loclis);
         //Location = locman.getLastKnownLocation(provider);

      }
   /** Find and initialize the map view. */
      private void initMapView() {
         map = (MapView) findViewById(R.id.mapView);
         controller = map.getController();
         map.setSatellite(false);
         map.setBuiltInZoomControls(true);
      }

      /** Find Current Position on Map. */
      private void initMyLocation() {
         final MyLocationOverlay overlay = new MyLocationOverlay(this, map);
         overlay.enableMyLocation();
         overlay.enableCompass(); // does not work in emulator
         overlay.runOnFirstFix(new Runnable() {
            public void run() {
               // Zoom in to current location
               controller.setZoom(24);
               controller.animateTo(overlay.getMyLocation());
            }
         });
         map.getOverlays().add(overlay);
      }

   @Override
   public void onLocationChanged(Location location) {
      if (Location != null){
         lat = Location.getLatitude();
          lon = Location.getLongitude();
          GeoPoint New_geopoint = new GeoPoint((int)(lat*1e6),(int)(lon*1e6));
          controller.animateTo(New_geopoint);
          geoPointsArray.add(New_geopoint);

      }

   }
   public double getDistance(double lat1, double lon1, double lat2, double lon2) {
        double latA = Math.toRadians(lat1);
        double lonA = Math.toRadians(lon1);
        double latB = Math.toRadians(lat2);
        double lonB = Math.toRadians(lon2);
        double cosAng = (Math.cos(latA) * Math.cos(latB) * Math.cos(lonB-lonA)) +
                        (Math.sin(latA) * Math.sin(latB));
        double ang = Math.acos(cosAng);
        double dist = ang *6371;
        return dist;
    }

   class MyOverlay extends Overlay{
       public MyOverlay(){
       }   
       public void draw(Canvas canvas, MapView mapv, boolean shadow){
       super.draw(canvas, mapv, shadow);

        Projection projection = map.getProjection();
        Path p = new Path();
        for (int i = 0; i < geoPointsArray.size(); i++) {
        if (i == geoPointsArray.size() - 1) {
            break;
        }
        Point from = new Point();
        Point to = new Point();
        projection.toPixels(geoPointsArray.get(i), from);
        projection.toPixels(geoPointsArray.get(i + 1), to);
        p.moveTo(from.x, from.y);
        p.lineTo(to.x, to.y);
        }
        Paint mPaint = new Paint();
        mPaint.setStyle(Style.STROKE);
        mPaint.setColor(0xFFFF0000);
        mPaint.setAntiAlias(true);
        canvas.drawLine(0, 4,5,50, mPaint);
        canvas.drawPath(p, mPaint);
        super.draw(canvas, map, shadow);
    }   
}

   @Override
   public void onProviderDisabled(String provider) {
      // TODO Auto-generated method stub

   }
   @Override
   public void onProviderEnabled(String provider) {
      // TODO Auto-generated method stub

   }

   @Override
   protected boolean isRouteDisplayed() {
      // TODO Auto-generated method stub
      return false;
   }

@Override
public void onStatusChanged(String arg0, int arg1, Bundle arg2) {
    // TODO Auto-generated method stub

}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T06:10:10.987

此链接可能会对您有所帮助

[使用 gps 获取一个人走过的距离](https://stackoverflow.com/questions/9664587/using-gps-get-the-distance-a-person-has-walked)

[GPS - 在跑步和步行时获取距离、时间](https://stackoverflow.com/questions/9662320/gps-getting-the-distance-time-while-running-and-walking)

请通过链接。它详细解释

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T09:10:25.227

如果您想在两个位置之间绘制路径，则可以参考以下链接

[J2ME/Android/BlackBerry - 行车路线，两个地点之间的路线](https://stackoverflow.com/questions/2023669/j2me-android-blackberry-driving-directions-route-between-two-locations)

您也可以从[这里](http://code.google.com/p/j2memaprouteprovider/source/browse/#svn/trunk/J2MEMapRouteAndroidEx)获取源代码。

# c# - javascript警报asp.net中的服务器端变量

> ID：10546156
> 
> 赞同：2
> 
> 时间：2012-05-11T05:58:44.850
> 
> 标签：c#, javascript, asp.net, gridview

我想在 javascript 警报中访问服务器端变量。

```
 <asp:Button id="btnDelete" runat="server" class="deleteicon" Text='<%# Eval("iuser_id") %>' OnClick="deleteclick" onclientclick="return confirm('Are you sure you want to delete this record?'+<%# Eval("struser_name") %>);"/> 
```

这是网格视图中的删除按钮。单击它时，我想提醒消息和用户名。我收到服务器标签未格式化错误。

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T06:01:15.083

**编辑**

在gridview的rowDataBound事件中附加javascript单击功能最安全，最简单的方法...代码如下

```
protected void GridView1_RowDataBond(object source, GridViewRowEventArgs e) 
    { 
        if (e.Row.RowType == DataControlRowType.DataRow) 
        { 
            Button btnAlertStatus = (Button)e.Row.FindControl("btnAlertStatus"); 

            DataRowView drv = (DataRowView)e.Row.DataItem; 

            string username = drv["User_name"].ToString(); 

            btnAlertStatus.Attributes.Add("onclick", "return confirm('Are you sure you want to delete this record?"+ username + "')"); //error because of javascript left one bracket
        } 
    } 
```

**预**

尝试

JavaScript

```
function confirmMsg()
{

  var Variable = '<%= ServerVaraible %>';
  return confirm('Are you sure you want to delete this record?'+ Variable );
} 
```

HTML

```
 <asp:Button id="btnDelete" runat="server" class="deleteicon" Text='<%# Eval("iuser_id") %>' OnClick="deleteclick" onclientclick="return confirmMsg();"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T06:01:26.827

```
 <asp:Button id="btnDelete" runat="server" class="deleteicon" Text='<%# Eval("iuser_id") %>' OnClick="deleteclick" onclientclick='return confirm("Are you sure you want to delete this record? <%# Eval("struser_name") %>");'/> 
```

更新。尝试更改引号

# php - 以不同方式显示总成员

> ID：10546161
> 
> 赞同：0
> 
> 时间：2012-05-11T05:59:09.770
> 
> 标签：php

我正在工作多层次营销概念，计算后将所有成员存储在这个 $member 变量中，我想以不同的方式显示所有成员

**条件：**前4箱不大于10，后4箱不大于100

**案例1：** $member = 37，这样显示会员

![在此处输入图像描述](../Images/7536b7033fab1b49c8b229ed69282cd6.png)

**案例2：** $member = 300 ，这样显示成员

![在此处输入图像描述](../Images/d1009f215f4f243862324e49ecc5677f.png)

```
$a = array_fill(1, $member, 1);
$chunked_array = array_chunk($a, 10);

foreach($chunked_array as $key=>$single_arr)
    { ?>
      <div class="id_box1"><?php echo array_sum($single_arr); ?></div>
  <?php } ?> 
```

如果我有 40 个或更少的成员，我上面的代码工作正常，但如果成员大于 40，我不知道如何处理代码

帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T06:24:41.403

如果 $member 变量是一个简单的数字，那么仅仅为了将其分成 8 个切片而制作一个 ($member) 元素数组是……有点多余。我个人会使用 2 个“for”循环，这有点粗糙，但很明显并且应该可以正常工作：

```
$calcval=$member
$a=array();
for($i=0;$i<4;$i++)
    {
    $a[$i]=( ($calcval>10) ? 10 : $calcval);
    $calcval -= $a[$i];
    }
for($i=4;$i<7;$i++)
    {
    $a[$i]=( ($calcval>100) ? 100 : $calcval);
    $calcval -= $a[$i];
    } 
```

或者，如果您想坚持使用数组，请在输出之前在代码中添加以下内容：

```
$sliced_array=array_slice($a, 40);
$chunked_array2 = array_chunk($sliced_array, 100);
$output = array_merge(array_slice($chunked_array, 0, 4),array_slice($chunked_array2, 0, 4)); 
```

没有机会测试上述解决方案，但我认为您可以大致了解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T06:24:12.640

```
 <?php
 $member = 370;
 if ($member <= 40) {
$count = 40;
$a = array_fill(1, $count, 1);
$chunked_array = array_chunk($a, 10);
foreach($chunked_array as $key=>$single_arr){  
  ?><div class="id_box1"><?php echo array_sum($single_arr); ?></div>
<? } 
} else if ($member > 40) {
$count = 40;
$b = array_fill(1, $count, 1);
$chunked_array = array_chunk($b, 10);
foreach($chunked_array as $key=>$single_arr){ 
?>
<div class="id_box1"><?php echo array_sum($single_arr); ?></div>
<?
}
$c = array_fill(1, ($member - $count), 1);
$chunk_array = array_chunk($c, 100);
foreach($chunk_array as $key=>$single_array){
    ?>
<div class="id_box2"><?php echo array_sum($single_array); ?></div>
    <?
}
}  
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T06:30:22.277

```
$a = array_fill(0, $member, 1);
if ($member > 40) {
    $decs = array_slice($a, 0, 40);
    $chunked_array = array_chunk($decs, 10);
} else {
    $chunked_array = array_chunk($a, 10);
}
// draw 10 box
foreach($chunked_array as $key=>$single_arr)
{ ?>
      <div class="id_box1"><?php echo array_sum($single_arr); ?></div>
<?php } 

// draw 100 box
if ($member > 40) {
    $hundred = array_slice($a, 40);
    $chunked_array = array_chunk($hundred, 100);
    foreach($chunked_array as $key=>$single_arr)
    { ?>
      <div class="id_box1"><?php echo array_sum($single_arr); ?></div>
    <?php } 
}
?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-11T06:51:04.537

首先列出你需要的东西：

*   有 4 个不能大于 10 的盒子。
*   还有 4 个不能大于 100 的盒子。
*   所有的箱子都必须按顺序填写。

然后创建一个实现该功能的逻辑：

*   用 10 填充前 4 个框，然后从成员变量中减去它。如果 $member 低于 10，只需将其写入当前框。
*   用 100 填充 otger 4 框并从成员变量中减去它。如果 $member 低于 10，只需将其写入当前框。

如您所见，这两个操作几乎相同。然后你可以使它成为一个操作：

*   填充 8 个框 [如果前 4 个框 = 10，否则 100] 并从 $member 中减去。如果 $member 低于 [如果前 4 个框 = 10，否则 100] 只需将其写入当前框。

这是一些解决方案（可能还有更多）：

使用 Closure 的 2 个数组的 Php 5.3+ 解决方案：

```
<?php
$member = 300;

$small_boxes = array_map(function ($value) use(&$member) {
    $return = $member > 10 ? 10 : $member;
    $member = $member > 10 ? $member - 10 : 0;

    return $return;
}, array_fill(0, 4, 0));

$big_boxes = array_map(function ($value) use(&$member) {
    $return = $member > 100 ? 100 : $member;
    $member = $member > 100 ? $member - 100 : 0;

    return $return;
}, array_fill(0, 4, 0));

var_dump($small_boxes, $big_boxes);
?> 
```

使用 Closure 的 1 个数组的 PHP 5.3+ 解决方案：

```
<?php
$member = 300;
$count = 1;
$boxes = array_map(function ($value) use(&$member, &$count) {
    if ($count <= 4)
    {
        $return = $member > 10 ? 10 : $member;
        $member = $member > 10 ? $member - 10 : 0;
    }
    else
    {
        $return = $member > 100 ? 100 : $member;
        $member = $member > 100 ? $member - 100 : 0;
    }

    $count++;

    return $return;
}, array_fill(0, 8, 0));

var_dump($boxes);
?> 
```

使用 foreach 的 2 个数组的 PHP 5.3- 解决方案：

```
<?php
$member = 300;

$small_boxes = $big_boxes = array_fill(0, 4, 0);

foreach ($small_boxes as $key => $value)
{
    if ($member > 10)
    {
        $small_boxes[$key] = 10;
        $member -= 10;
    }
    else
    {
        $small_boxes[$key] = $member;
        $member = 0;
        break;
    }
}

foreach ($big_boxes as $key => $value)
{
    if ($member > 100)
    {
        $big_boxes[$key] = 100;
        $member -= 10;
    }
    else
    {
        $big_boxes[$key] = $member;
        $member = 0;
        break;
    }
}

var_dump($small_boxes, $big_boxes);
?> 
```

使用 foreach 的 1 个数组的 PHP 5.3- 解决方案：

```
<?php

$member = 300;

$box = array_fill(0, 8, 0);

foreach ($box as $key => $value)
{
    if ($key < 4)
    {
        $box[$key] = $member > 10 ? 10 : $member;
        $member = $member > 10 ? $member - 10 : 0;
    }
    else
    {
        $box[$key] = $member > 100 ? 100 : $member;
        $member = $member > 100 ? $member - 100 : 0;
    }
}

var_dump($box);

?> 
```

使用你喜欢的任何东西:)

您只需要使用 foreach 打印它/它们。

# symfony - 在 symfony2 Sonata 管理包中设置默认值

> ID：10546168
> 
> 赞同：19
> 
> 时间：2012-05-11T06:00:14.240
> 
> 标签：symfony, symfony-sonata

如何在奏鸣曲管理包中设置默认值 configureFormFields 方法中缺少数据选项

```
protected function configureFormFields(FormMapper $formMapper)
{
    $formMapper
        ->add('name', null, array('required' => true, 'data' => "my default value"))
    ;
} 
```

如何使用数据属性在字段内设置默认值？？？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-06-27T12:17:45.900

我想您现在可能已经解决了这个问题，但是作为对其他任何人的引用，您可以覆盖 getNewInstance() 方法并在对象上设置默认值：

```
public function getNewInstance()
{
    $instance = parent::getNewInstance();
    $instance->setName('my default value');

    return $instance;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-02-15T16:40:30.273

您还可以直接将默认值分配给实体的属性：

```
class TheEntity
{
    private $name = 'default name';
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-09-03T14:16:26.247

除了@RobMasters 解决方案：

如果要设置关系，可以从 entitymanager 获取引用（而不是完整对象）：

```
public function getNewInstance()
{
    $instance = parent::getNewInstance();

    if ($this->hasRequest()) {
        $branch = $this->getRequest()->get('branch', null);

        if ($branch !== null) {
            $entityManager = $this->getModelManager()->getEntityManager('MyBundle\Entity\Branch');
            $branchReference = $entityManager->getReference('MyBundle\Entity\Branch', $branch);

            $instance->setBranch($branchReference);
        }
    }
    return $instance;
} 
```

我将示例添加到我的博客： [http ://blog.webdevilopers.net/populate-resp-set-default-values-on-form-resp-object-or-instance-in-sonataadminbundle/](http://blog.webdevilopers.net/populate-resp-set-default-values-on-form-resp-object-or-instance-in-sonataadminbundle/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-27T11:19:25.993

对于布尔值，另一种选择是在传递给您的方法`data`的第一个数组中设置一个值，在`add``configureFormFields`

所以在一些记忆之后，我的代码（对于一个我想默认检查的复选框）最终看起来像这样：

```
protected function configureFormFields(FormMapper $formMapper)
{
    $formMapper
        ->add('name')
        ->add('visible', null, ['label'=>'Visibility', 'data' => true ])
    ;
} 
```

...这在我的文件顶部保存了几行，因为我可以摆脱 getNewInstance() 定义。

# .net - 应用程序请求不起作用

> ID：10546169
> 
> 赞同：1
> 
> 时间：2012-05-11T06:00:14.947
> 
> 标签：.net, facebook-graph-api

我正在使用图形 api apprequests url 向朋友列表中的一位朋友创建应用请求。但该请求仅发布到我的个人资料中。

```
www.graph.facebook.com/125xxx5287/apprequests 
```

输入是

```
"message" : "Hi"   
       "to" : {
    "name": "xxx",
    "id": "19034532452334"
  } 
```

这是应用请求被发布到我的个人资料而不是我的朋友个人资料中。这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T15:48:26.540

您使用的是什么文档？这不是有效的 API 调用。

应用程序可以通过ing 向任何现有用户添加应用程序- [> 用户请求](https://developers.facebook.com/docs/requests/)，但您所做的是尝试以编程方式创建用户-> 用户请求。创建此类请求时[唯一有效](https://developers.facebook.com/docs/reference/api/user/#apprequests)的参数是和。收件人用户 ID 已在路径中指定。`POST``/USER_ID/apprequests``message``data`

这是不可能的，您必须使用[请求对话框](https://developers.facebook.com/docs/reference/dialogs/requests/)来处理此类请求。

# android - SearchView 始终位于顶部

> ID：10546170
> 
> 赞同：0
> 
> 时间：2012-05-11T06:00:18.043
> 
> 标签：android

我想知道如何让`SearchView`小部件始终位于屏幕顶部，而不是每次按下搜索按钮时都调用它。

我添加了`onSearchRequested`以使其在我的活动中默认保持可见，但是当我从一个活动转换到另一个活动时，它会返回到其原始形式，即在点击搜索按钮时出现。

如何使其永久可见？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T06:32:19.040

来自[android 网站](https://stackoverflow.com/questions/10546170/searchview-always-on-top)- “一个活动代表一个带有用户界面的单个屏幕。......虽然活动一起工作以形成一个有凝聚力的用户体验......但每个活动都独立于其他活动。”。

因此，请尝试添加`SearchView`到`ActonBar`，如[android 网站](http://developer.android.com/guide/topics/ui/actionbar.html#ActionView)上指定的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T04:33:41.510

找到了解决方案。只需在 onResume() 中再次调用该函数；

# iphone - 是否可以将第 3 方库添加到适用于 iOS 的 CoronaSDK 应用程序？

> ID：10546174
> 
> 赞同：0
> 
> 时间：2012-05-11T06:00:39.760
> 
> 标签：iphone, coronasdk

我正在使用 CoronaSDK 开发游戏。最近有人问我是否可以向`Yogi Play`它添加一个库。正如我所看到的，它是一个 iOS 框架，带有 NIB 文件等资源......并且他们给出了通过 CocoaTouch 的自定义 ViewControllers 集成它的说明。

那么，是否可以将其放入 Corona SDK 应用程序中并以某种方式调用？或者还有其他方法可以将 Yogi Play 与 Corona 捆绑在一起吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T01:12:38.413

如果您获得企业许可证，这是可能的。

# c - C的定时器有些混乱

> ID：10546183
> 
> 赞同：0
> 
> 时间：2012-05-11T06:01:19.107
> 
> 标签：c, linux, timer

我想制作一个计时器，它在一定间隔后调用我的函数，然后继续。每当我的特定过程完成时，我就想停止这个计时器。在这里，我有一个函数，我想在特定时间后调用它，但我想在这个函数中传递参数。

我的问题如下。

1.  如何将参数传递给该函数？
2.  有什么方法可以实现这个目标。

目前我正在使用此代码。请阅读我在代码之间写的代码注释，以便您了解我的目标。

代码：

```
#include <stdio.h>
#include <sys/time.h>
#include <sys/wait.h>
#include <signal.h>

int main()
{
    int result = 10;
    int i =0;

    // here I make timer which calls getP() function and I want to pass some
    // parameter to my getP function from here.
    // I don't want to make these variables global.
    initSigaction();
    initTime();
    // other process thread. If this process will be completed then I have to stop timer.
    pauseTime();
}

void initSigaction(void)
{
    struct sigaction act;
    act.sa_handler = getP;//;
    act.sa_flags = 0;
    sigemptyset(&act.sa_mask);
    sigaction(SIGPROF, &act, NULL);
}

void initTime(void)
{
    struct itimerval val;
    //printDebugLog(WIFI,"Timer value : %d",TIMER);
    val.it_value.tv_sec = 1;
    val.it_value.tv_usec = 0;
    val.it_interval = val.it_value;
    printf("\nProgress Timer started\n");
    setitimer(ITIMER_PROF, &val, NULL);
}

void getP()
{
    // I want to get some parameter from main function and want to do some
    // calculation on this.  How can I get that parameter?
    printf("HI Hello");
}

int pauseTime(void)
{
    struct itimerval val;
    val.it_value.tv_sec = 0;
    val.it_value.tv_usec = 0;
    val.it_interval = val.it_value;
    setitimer(ITIMER_PROF, &val, NULL);
    printf("\n Stop Progress Timer\n");
    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T06:17:49.573

您可能想在这里退后一步；您可以在信号处理程序中安全调用的函数集非常有限 - 请参阅[signal(2)](http://www.cl.cam.ac.uk/cgi-bin/manpage?2+signal)。

一种策略是简单地在信号处理程序中增加一个变量（类型为 sig_atomic_t），并在其他地方检查这个标志。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T06:19:53.630

在`signal.h`我的 Linux 系统中，类型`sighandler`定义为：

```
void (*__sighandler_t) (int) 
```

这意味着`sighandler`（`getP()`在您的示例中）必须是指向返回函数的指针`void`。An`int`被传递给它——信号号。所以没有办法让信号库将任何其他参数传递给`getP()`.

这看起来像是全局变量的情况。

# c# - 如何使用 JavaScriptSerializer 在 C# .NET 中转义 HTML 元素？

> ID：10546186
> 
> 赞同：0
> 
> 时间：2012-05-11T06:01:28.753
> 
> 标签：c#, .net, json, serialization, javascriptserializer

考虑这段代码：

```
// Dictionary created.

Dictionary<string, string> objDic = new Dictionary<string, string>();
string test = "<>";
objDic.Add("html", test);

var Json = new JavaScriptSerializer();

string response = Json.Serialize(return_obj); 
```

输出响应：

```
[{"html":"\u003c\u003e"}] 
```

预期响应：

```
[{"html":"<>"}] 
```

如何获得预期的响应？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T06:08:34.177

然后你可以使用[Json.NET](http://json.codeplex.com/)：

```
var str = JsonConvert.SerializeObject(new {html="<>"}) //returns {"html":"<>"} 
```

# ios - 通用应用程序，模拟器检测到〜iphone .xib，但设备仍显示ipad .xibs

> ID：10546188
> 
> 赞同：0
> 
> 时间：2012-05-11T06:01:57.040
> 
> 标签：ios, universal, universal-binary, ios-universal-app

我创建了一个只有 iPad 的应用程序，现在客户希望我让它通用。我创建了新的 .xib，它们通过 ~iphone 后缀自动检测并在模拟器上正常工作。但是，当我在 iPhone 4s 上运行它进行调试时，似乎只有 iPad .xib 出现了。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T06:07:56.380

好吧，你能告诉我你是如何`UIViewController`在你的应用程序中创建一个吗？因为我们有两个选择：

1.  您正在做正确的事情，并且您正在对大多数类进行子类化，因此您拥有一个`-iPhone`和一个`-iPad`版本。
2.  您正在放置`ifs`并检查您使用的设备类型。

您对目标设置进行了哪些更改？

# extjs4 - 用于 mdi 的 Extjs 4 扩展应用程序

> ID：10546190
> 
> 赞同：0
> 
> 时间：2012-05-11T06:02:01.730
> 
> 标签：extjs4, mdi, extend

有没有办法将一个应用程序扩展到另一个 mdi 应用程序？例如。我有 3 个应用程序：“Transaction”、“SalesOrder”和“PurchaseOrder”我想通过在“SalesOrder”和“PurchaseOrder”中扩展它来重用“Transaction”。干净的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T11:22:24.680

您可以简单地定义一个`application`具有特定名称的名称，然后`extend`从中定义。

`BaseApp.js`：

```
Ext.application({
    name: 'BaseApp',
    launch: function () {
        alert("Base App Launch");
    }
}); 
```

`ChildApp.js`：

```
Ext.application({
    //extend from base app
    extend: 'BaseApp',
    name: 'ChildApp',
    launch: function () {
        alert("Child App Launch");
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-13T08:23:32.807

是的，从 ExtJS 4.2 开始就有可能。

[在http://docs.sencha.com/extjs/4.2.2/#!/api/Ext.app.Application](http://docs.sencha.com/extjs/4.2.2/#!/api/Ext.app.Application)检查文档部分“从 Ext.app.Application 派生”

这是一个小例子：

```
Ext.define('Transaction.Application', {
    extend: 'Ext.app.Application',
    requires: [],

    // application namespace
    name: 'Transaction',

    // name of the app instance in DOM (e.g. Transaction.instance)
    //appProperty: 'instance',

    // application folder
    appFolder: '/js/Transaction',

    autoCreateViewport: true,

    controllers: [
    ],

    views: [
    ],

    launch: function() {
        console.log('application started');
    }
});

Ext.define('SalesOrder.Application', {
    extend: 'Transaction.Application',
    requires: [],

    // application namespace
    name: 'SalesOrder',

    // application folder
    appFolder: '/js/SalesOrder',

    autoCreateViewport: false,

    controllers: [
    ],

    views: [
    ],

    launch: function() {
        Ext.create('Ext.container.Viewport');
        this.callParent();
    }
});

Ext.define('PurchaseOrder.Application', {
    extend: 'Transaction.Application',
    requires: [],

    // application namespace
    name: 'PurchaseOrder',

    // application folder
    appFolder: '/js/PurchaseOrder',

    autoCreateViewport: false,

    controllers: [
    ],

    views: [
    ],

    launch: function() {
        Ext.create('Ext.container.Viewport');
        this.callParent();
    }
});

Ext.application('PurchaseOrder.Application');

// Then you can acces your application instance anywhere:
var app = PurchaseOrder.getApplication(); 
```

# node.js - 如何使用node.js http服务器从mongodb返回大量行？

> ID：10546193
> 
> 赞同：19
> 
> 时间：2012-05-11T06:02:14.797
> 
> 标签：node.js, mongodb, rest, http, bigdata

我在 mongodb 中有一个用户数据库，我想通过 JSON 中的 REST 接口导出它。问题是，在最坏的情况下，返回的行数远远超过 200 万。

首先我试过这个

```
var mongo = require('mongodb'),
  Server = mongo.Server,
  Db = mongo.Db;
var server = new Server('localhost', 27017, {auto_reconnect: true});
var db = new Db('tracking', server);
var http = require('http');

http.createServer(function (request, response) {
  db.collection('users', function(err, collection) {
    collection.find({}, function(err, cursor){
      cursor.toArray(function(err, items) {
        output = '{"users" : ' + JSON.stringify(items) + '}';

        response.setHeader("Content-Type", "application/json");
        response.end(output);
      });
    });
  });
}).listen(8008);
console.log('Server running at localhost:8008'); 
```

内存不足时失败。该示例使用 node-mongodb-native 驱动程序和基本的 http 包。

> 致命错误：CALL_AND_RETRY_2 分配失败 - 进程内存不足

（请注意，在实际场景中，我使用的参数会根据需要限制结果，但此示例会查询所有这些参数，这是最坏的情况）

数据本身很简单，比如

> {“_id”：ObjectId（“4f993d1c5656d3320851aadb”），“userid”：“80ec39f7-37e2-4b13-b442-6bea57472537”，“user-agent”：“Mozilla/4.0（兼容；MSIE 8.0；Windows NT 5.1；Trident/ 4.0；.NET CLR 1.1.4322)"，"ip"："127.0.0.1"，"lastupdate"：1335442716 }

我也尝试过类似的东西

```
while(cursor != null)
{
  cursor.nextObject(function(err, item) {
    response.write(JSON.stringify(item));
  });
} 
```

但这也耗尽了内存。

我应该如何进行？应该有一种方法可以逐行流式传输数据，但我一直无法找到合适的示例。由于外部应用程序的要求，对数据进行分页是不可能的。我想过将数据写入文件然后发布，但这会导致不需要的 io。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-12T19:45:33.727

本`cursor.streamRecords()`机`MongoDB`驱动程序的方法已弃用，该方法`stream()`更快。

我已经解析了一个 40,000,000 行的 acatalog 文档，没有问题`Mongodb`+ `stream()`+`process.nextTick()`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-14T04:36:52.570

我发现 node-mongodb-native Cursor 对象也有一个用于`collection.find().streamRecords()`记录的流选项（与 一起使用），即使它没有在[驱动程序的 github 页面中](https://github.com/mongodb/node-mongodb-native)提及。查看[光标源代码](https://github.com/mongodb/node-mongodb-native/blob/master/lib/mongodb/cursor.js)并搜索“streamRecords”。

最后代码是这样的：

```
db.collection('users', function(err, collection) {
  var first = true;

  response.setHeader("Content-Type", "application/json");
  response.write('{"users" : [');

  var stream = collection.find().streamRecords();

  stream.on('data', function(item) {
    var prefix = first ? '' : ', ';
    response.write(prefix + JSON.stringify(item));
    first = false;
  });
  stream.on('end', function() {
    response.write(']}');
    response.end();
  });
}); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-11T07:25:03.767

像这样的东西**应该**工作。如果不是，您可能应该在[mongodb-native bug tracker](https://github.com/mongodb/node-mongodb-native/issues)中打开一个问题。

```
http.createServer(function (request, response) {
  db.collection('users', function(err, collection) {
    collection.find({}, function(err, cursor){
      response.setHeader("Content-Type", "application/json");
      cursor.each(function(err, item) {
        if (item) {
          response.write(JSON.stringify(item));
        } else {
          response.end();
        }
      });
    });
  });
}).listen(8008); 
```

PS：它只是一个存根，我的意思是我不记得确切的语法，但它是`each`您正在寻找的功能。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-11T06:23:41.133

好吧，我不再使用 mongodb 原生 javascript 驱动程序，但是在[mongoose](http://mongoosejs.com/docs/querystream.html)中有很好的流实现。

这两个驱动程序的语法非常相似。你可以用猫鼬做到这一点：

```
response.setHeader("Content-Type", "application/json");
var stream = collection.find().stream();
stream.on('data', function(doc) {
   response.write(doc);  
});
stream.on('close', function() {
   response.end();
}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-03-25T11:13:14.440

使用 Node 的[`stream.Transform`](http://nodejs.org/api/stream.html#stream_class_stream_transform)类的一个小模块：

```
var stream = require('stream');

function createCursorStream(){

    var cursorStream = new stream.Transform({objectMode:true});

    cursorStream._transform = function(chunk,encoding,done){
        if(cursorStream.started){
            cursorStream.push(', ' + JSON.stringify(chunk));
        }else{
            cursorStream.push('[' + JSON.stringify(chunk));
            cursorStream.started = true;
        }
        done();
    };

    cursorStream._flush = function(done){
        cursorStream.push(']');
        done();
    };

    return cursorStream;
}

module.exports.streamCursorToResponse = function(cursor,response){
    cursor.stream().pipe(createCursorStream()).pipe(response);
}; 
```

您可以更改`JSON.Stringify`部件以对来自 mongodb 游标的对象进行任何其他类型的“即时”转换，并节省一些内存。

# android - 为什么我将位图（BitmapFactory.decodeFile 的输出）保存到比原始图像文件大的文件中？

> ID：10546195
> 
> 赞同：0
> 
> 时间：2012-05-11T06:02:36.500
> 
> 标签：android, opencv, bitmap, filesize, bitmapfactory

我使用opencv（android-jni）调整位图文件的大小并将输出位图保存到名为/mnt/sdcard/org.jpg的文件中

然后使用

```
resultBitmap = BitmapFactory.decodeFile("/mnt/sdcard/org.jpg"); 
```

获取位图并将此 resultBitmap 重新保存到文件 /mnt/sdcard/result.jpg

那么 org.jpg 大小为 100k，result.jpg 大小约为 300k

为什么？

我的调整大小方法在 jni 中使用 opencv，如下所示：

```
int FUN_ENTRY JNICALL Java_com_funlib_imagefilter_ImageUtily_nativeResizeBitmap(    
                                                                                JNIEnv* env, jobject obj , jstring srcPath , jstring destPath,  int w , int h , int quality)
{
    char* srcPath1 = jstringTostring(env , srcPath);
    IplImage *src = cvLoadImage(srcPath1,CV_LOAD_IMAGE_ANYDEPTH | CV_LOAD_IMAGE_ANYCOLOR);
    if(srcPath1!=NULL)
    {
        free(srcPath1);
        srcPath1 = NULL;
    }
    if(src==NULL)
    {
        return -1;
    }

    CvSize sz;
    double rate1 = ((double) src->width) / (double) w + 0.1; 
    double rate2 = ((double) src->height) / (double) h + 0.1; 

    double rate = rate1 > rate2 ? rate1 : rate2; 
    sz.width = (int) (((double) src->width) / rate); 
    sz.height = (int) (((double) src->height) / rate); 
    IplImage *desc = cvCreateImage(sz,src->depth,src->nChannels);
    if(desc==NULL)
    {
        cvReleaseImage(&src);
        return -1;
    }
    cvResize(src,desc,CV_INTER_CUBIC);
    if(desc==NULL)
    {
        cvReleaseImage(&src);
        return -1;
    }
    char* destPath1 = jstringTostring(env , destPath);

    int p[3];
    p[0] = CV_IMWRITE_JPEG_QUALITY;
    p[1] = quality;
    p[2] = 0;

    cvSaveImage(destPath1 , desc , p);
    cvReleaseImage(&src);
    cvReleaseImage(&desc);
    if(destPath1!=NULL)
    {
        free(destPath1);
        destPath1 = NULL;
    }

    return 0;
} 
```

我的主要是

```
File f = new File(filePath);
    String tmpDestPath = f.getParent();
    if(!tmpDestPath.endsWith(File.separator))
        tmpDestPath += File.separator;
    tmpDestPath += "org.jpg";
    int ret = nativeResizeBitmap(filePath, tmpDestPath, width, height , quality);         //get the org.jpg file
    Bitmap bmp = null;
    if(ret == 0){
        bmp = BitmapFactory.decodeFile(tmpDestPath);
    }

    try {
        ImageUtily.saveBitmapToFile("result", bmp);  //get the result.jpg file
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

我的 saveBitmapToFile 是

```
 public static void saveBitmapToFile(String fileName, Bitmap bmp) throws IOException
{
    File f = new File("/sdcard/DCIM/TEMP/" + fileName + ".jpg");
    f.createNewFile();
    FileOutputStream fOut = null;
    try {
        fOut = new FileOutputStream(f);
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    }

    bmp.compress(Bitmap.CompressFormat.JPEG, 100, fOut);
    try {
        fOut.flush();
    } catch (IOException e) {
        e.printStackTrace();
    }
    try {
        fOut.close();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T06:14:25.650

我不知道 OpenCV / Android-JNI，所以我可以试着给你一个提示。

我想该函数`saveBitmapToFile`会按照它在锡上所说的那样做：按原样保存位图（如[BMP 文件格式](http://en.wikipedia.org/wiki/BMP_file_format)）。你需要压缩你的`bmp`第一个，也许[这](https://stackoverflow.com/questions/649154/android-bitmap-save-to-location)可以为你指明正确的方向。

至于为什么新文件更大：如果您真的想知道（并且不仅仅是对如何修复它感兴趣），请启动您选择的十六进制编辑器并查看[文件头](http://en.wikipedia.org/wiki/BMP_file_format#DIB_header_.28bitmap_information_header.29)。位图使用在此过程中可能已更改的各种位深度和压缩。

# xamarin.android - OnChildClick inside ExpandableListActivity does not fire

> ID：10546200
> 
> 赞同：1
> 
> 时间：2012-05-11T06:03:05.617
> 
> 标签：xamarin.android

I am having an issue that I have spend way too much time trying to figure out. I can't get the OnChildClick listener to fire when one of the child items in my ExpandableListAdapter is clicked.

It was my understanding that the overridden OnChildClick event of the ViewCheckListActivity.cs file below should fire when one of the rows of the children are clicked. I'm sure that I am missing something silly, but was wondering if anyone had any experience and could point me in the right direction for getting this working.

Code is all listed below:

CheckListItem_Group.axml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/loGroup"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:orientation="horizontal"
  android:minWidth="25px"
  android:minHeight="25px">
  <CheckedTextView
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:layout_marginLeft="20px"
      android:paddingLeft="35dip"
      android:textStyle="bold"
      android:textSize="14dip"
      android:gravity="center_vertical"
      android:layout_gravity="right"
      android:drawableRight="?android:attr/listChoiceIndicatorMultiple"
      android:id="@+id/chkCheckList" />
</LinearLayout> 
```

CheckListItem_Item.axml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/loItem"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:minWidth="25px"
    android:minHeight="25px">
    <CheckedTextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="20px"
        android:paddingLeft="35dip"
        android:textStyle="bold"
        android:textSize="14dip"
        android:gravity="center_vertical"
        android:layout_gravity="right"
        android:clickable="false"
        android:focusable="true"
        android:drawableRight="?android:attr/listChoiceIndicatorMultiple"
        android:id="@+id/chkCheckListItem" />
</LinearLayout> 
```

ViewCheckListActivity.cs

```
public class ViewCheckListActivity : ExpandableListActivity
{
    private Int32? _checkListId;
    protected static DiversLogDao Dao;

    protected override void OnCreate(Bundle bundle)
    {
        base.OnCreate(bundle);

        var checkListItems = Dao.GetCheckListItems(_checkListId.Value);

        var adapter = new CheckListItemAdapter(this, checkListItems);
        SetListAdapter(adapter);

        ExpandableListView.ChoiceMode = ChoiceMode.Multiple;
        ExpandableListView.SetOnChildClickListener(this);
    }

    public override bool OnChildClick (ExpandableListView parent, View v, int groupPosition, int childPosition, long id)
    {
        return base.OnChildClick (parent, v, groupPosition, childPosition, id);
    }
} 
```

CheckListItemAdapter.cs

```
public class CheckListItemAdapter : BaseExpandableListAdapter
{
    private readonly List<Item> _checkListItems;
    public readonly Activity Context;

    public CheckListItemAdapter(Activity context, List<CheckListItem> checkListItems)
    {
        _checkListItems =
            checkListItems.Where(i => i.ParentId == null)
                .Select(i => new Item
                                    {
                                        Id = i.Id,
                                        Name = i.Name,
                                        Description = i.Description,
                                        ChildItems = checkListItems.Where(c => c.ParentId == i.Id)
                                            .Select(c => new ChildItem
                                                            {
                                                                Id = c.Id,
                                                                CheckListId = c.CheckListId,
                                                                ParentId = c.ParentId,
                                                                Name = c.Name,
                                                                Description = c.Description,
                                                                LastUpdated = c.LastUpdated,
                                                                Checked = false
                                                            }).ToList()
                                    }).ToList();
        Context = context;
    }

    public override View GetGroupView(int groupPosition, bool isExpanded, View convertView, ViewGroup parent)
    {
        if (convertView == null)
        {
            convertView = Context.LayoutInflater.Inflate(Resource.Layout.CheckListItem_Group, null) as LinearLayout;
        }

        if (convertView != null)
        {
            var checkList = convertView.FindViewById<CheckedTextView>(Resource.Id.chkCheckList);
            checkList.SetText(_checkListItems[groupPosition].Name, TextView.BufferType.Normal);
            checkList.Checked = _checkListItems[groupPosition].AllChildrenChecked();
        }

        return convertView;
    }

    public override View GetChildView(int groupPosition, int childPosition, bool isLastChild, View convertView, ViewGroup parent)
    {
        if(convertView == null)
        {
            convertView = Context.LayoutInflater.Inflate(Resource.Layout.CheckListItem_Item, parent, false) as LinearLayout;
        }

        if (convertView != null)
        {
            var checkListItem = convertView.FindViewById<CheckedTextView>(Resource.Id.chkCheckListItem);
            checkListItem.SetText(_checkListItems[groupPosition].ChildItems[childPosition].Name, TextView.BufferType.Normal);
            checkListItem.Checked = _checkListItems[groupPosition].ChildItems[childPosition].Checked;
            checkListItem.Tag = _checkListItems[groupPosition].ChildItems[childPosition];

            checkListItem.Click -= CheckListItemClick;
            checkListItem.Click += CheckListItemClick;
        }

        return convertView;
    }

    protected void CheckListItemClick(object sender, EventArgs e)
    {
        var chkItem = sender as CheckedTextView;

        if (chkItem == null) return;

        chkItem.Toggle();

        var childItem = chkItem.Tag as ChildItem;

        if (childItem == null) return;

        childItem.Checked = chkItem.Checked;
    }

    public override Object GetChild(int groupPosition, int childPosition)
    {
        return _checkListItems[groupPosition].ChildItems[childPosition];
    }

    public override long GetChildId(int groupPosition, int childPosition)
    {
        return _checkListItems[groupPosition].ChildItems[childPosition].Id;
    }

    public override int GetChildrenCount(int groupPosition)
    {
        return _checkListItems[groupPosition].ChildItems.Count();
    }

    public override Object GetGroup(int groupPosition)
    {
        return _checkListItems[groupPosition];
    }

    public override long GetGroupId(int groupPosition)
    {
        return _checkListItems[groupPosition].Id;
    }

    public override bool IsChildSelectable(int groupPosition, int childPosition)
    {
        return true;
    }

    public override int GroupCount
    {
        get { return _checkListItems.Count(); }
    }

    public override bool HasStableIds
    {
        get { return true; }
    }

    private class Item : Object
    {
        public Int32 Id { get; set; }
        public String Name { get; set; }
        public String Description { get; set; }
        public List<ChildItem> ChildItems { get; set; } 

        public bool AllChildrenChecked()
        {
            return ChildItems.All(i => i.Checked);
        }
    }

    private class ChildItem : Object
    {
        public Int32 Id { get; set; }
        public Int32 CheckListId { get; set; }
        public Int32? ParentId { get; set; }
        public String Name { get; set; }
        public String Description { get; set; }
        public DateTime LastUpdated { get; set; }
        public Boolean Checked { get; set; }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T01:04:17.260

I tried to reproduce this myself, and as far as I can tell this is a bug in the current version of Mono for Android. I submitted a [bug report to Xamarin](https://bugzilla.xamarin.com/show_bug.cgi?id=5055) with a repro app, and an equivalent app in Java that is working.

That said, there is another option for hooking into when an item is clicked that you can use. You can assign a handler for the [`Click`](http://docs.mono-android.net/?link=E%3aAndroid.Views.View.Click) event on the view in the [`GetChildView`](http://docs.mono-android.net/?link=M%3aAndroid.Widget.BaseExpandableListAdapter.GetChildView) method of your adapter:

```
public override View GetChildView(int groupPosition, int childPosition, bool isLastChild, View convertView, ViewGroup parent)
{
    // ...existing code in this method...

    convertView.Click += delegate 
    {
        // do stuff
    };

    return convertView;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T05:56:25.060

I was able to finally get this working. Here is what I did to get it working.

The first was to add the focusable attribute to the layouts items as shown below:

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/loItem"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:focusable="false"
    android:minWidth="25px"
    android:minHeight="25px">
    <CheckedTextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="20px"
        android:paddingLeft="35dip"
        android:textStyle="bold"
        android:textSize="14dip"
        android:gravity="center_vertical"
        android:layout_gravity="right"
        android:focusable="false"
        android:drawableRight="?android:attr/listChoiceIndicatorMultiple"
        android:id="@+id/chkCheckListItem" />
</LinearLayout> 
```

And

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/loGroup"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:orientation="horizontal"
  android:focusable="false"
  android:minWidth="25px"
  android:minHeight="25px">
  <CheckedTextView
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:layout_marginLeft="20px"
      android:paddingLeft="35dip"
      android:textStyle="bold"
      android:textSize="14dip"
      android:gravity="center_vertical"
      android:layout_gravity="right"
      android:focusable="false"      
      android:drawableRight="?android:attr/listChoiceIndicatorMultiple"
      android:id="@+id/chkCheckList" />
</LinearLayout> 
```

Doing that alone didn't fix the issue. The next thing is the removable of the click event added to the checkbox list.

```
checkListItem.Click -= CheckListItemClick;
checkListItem.Click += CheckListItemClick; 
```

Doing those 2 changes allowed the event to propagate all the way up to the activity itself.

I just hope that this information will help someone else out in the future. Not sure if this is as designed or not.

Chaitanya Marvici

# drupal-7 - 在用户从 Drupal 的列表中选择一个之前，如何设置默认过滤条件？

> ID：10546202
> 
> 赞同：0
> 
> 时间：2012-05-11T06:03:15.047
> 
> 标签：drupal-7, drupal-views

我正在尝试使用 Drupal 7 为杂志建立一个网站。我必须为内容类型、问题和文章。Issue 包含杂志的第一页，Article 为其内容。我还有一个分类术语字段（问题编号）来关联这两种内容类型。然后，我用Issue和Artcile做了一个视图。一个页面，显示作为 Issue 发布的最新节点（这意味着这里要显示的项目数为 1），以及一个显示与该问题相关的 Artciles 的附件（这里对显示的项目没有限制）。我还添加了一个过滤条件，允许用户选择每个问题编号，并且效果很好：在底部显示最新问题及其文章。现在我的问题在这里：

*   在您选择特定的问题编号之前，该视图会显示所有文章，而不仅仅是与上一个问题相关的文章。我想找到一种方法来为我的文章设置默认过滤器（最后一期编号）。我不想限制要显示的项目数量，因为对于每个问题，它都是不同的数字。

我已经有几天了，非常感谢你的帮助。（也在 drupal.stackexchange 中问过这个问题，但没有收到任何答案！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T13:44:49.990

您可以查看您的分类术语“问题字段编号”，将该视图限制为 1，并按最后创建的顺序设置。

然后附加另一个视图来打印文章，因此只显示最后创建的“问题”的文章

# asp.net - 如何在javascript中显示具有标题的消息框？

> ID：10546205
> 
> 赞同：1
> 
> 时间：2012-05-11T06:03:26.250
> 
> 标签：asp.net

如何在javascript中创建一个带有标题而不是“本地主机：页面说”的消息框？我知道使用警报框是不可能的。在警告框中，我无法更改标题。我正在使用 asp.net、C# 和 javascript。我不知道vb脚本。在javascript中可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T06:08:32.110

据我所知，它没有任何实现的“开箱即用”功能。

您可以构建自己的函数来生成 div 并将其显示在页面中间，或者您可以使用实现该功能的 javascript 框架扩展之一。

或者您可以查看[jQuery UI modal](http://jqueryui.com/demos/dialog/)，因为它使用起来非常简单

另一方面，vbscript 是一个旧的 MS 产品，它不再使用，仅适用于 Internet Explorer

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T06:18:18.870

查看此站点[http://www.abeautifulsite.net/blog/2008/12/jquery-alert-dialogs/](http://www.abeautifulsite.net/blog/2008/12/jquery-alert-dialogs/) 您可以随时使用 jquery 警报。

# css - 为 HTML 文件元素设置哪些可能的 css 属性？

> ID：10546208
> 
> 赞同：0
> 
> 时间：2012-05-11T06:04:02.153
> 
> 标签：css

我希望`file`我的公式中的一个元素具有与具有此 css 的文本字段相同的 css ：

```
.formulaire .inputlong {  // formulaire is the form and inputlong is the name of the css for textfields
    width: 250px;
    background-color:#FFF; 
    border:1px solid;
    border-color:#b80500;
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;
    border: 1px solid #bbb;
    color: #000;
    background-position: 10px 6px;
    float: left;
} 
```

我试图将文件的 css 设置为 inputlong css 但什么也没有！

那么如何为文件元素创建一个类似的css呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T06:11:24.387

出于安全原因，您无法使用`file`.

我知道的大多数解决方案都会更改“浏览”按钮的不透明度，以便用户看到后面的内容。

例如 ：

[http://www.shauninman.com/archive/2007/09/10/styling_file_inputs_with_css_and_the_dom](http://www.shauninman.com/archive/2007/09/10/styling_file_inputs_with_css_and_the_dom)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T06:21:12.493

一个[`file`元素](http://www.quirksmode.org/dom/inputfile.html)，像一个`select`，`checkbox`或`radiobutton`元素是一个操作系统/浏览器控制的html元素。您可以[使用 javascripts 设置样式，](http://blueimp.github.com/jQuery-File-Upload/)但（几乎）不能使用 css

# java - 如何在java中包装来自httprequest.getparameter的文本

> ID：10546210
> 
> 赞同：0
> 
> 时间：2012-05-11T06:04:25.317
> 
> 标签：java, html, css, jakarta-ee

我想将来自文本框的测试包装为 servlet 请求，并在设置参数时包装数据。我该怎么做？

示例代码：

```
lModule.setDescription(pRequest.getParameter("Description")); 
```

我想包装描述的文本。

请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T06:43:24.053

如果您使用的是 HTML 文本框，一种简单的方法是在标签中包含行和列，这将使您能够换行文本。

有关更多详细信息，请参阅此链接： [如何在普通 html 文本框中自动换行？](https://stackoverflow.com/questions/1819748/how-to-word-wrap-in-normal-html-textbox)

另一种选择是使用具有 'wrap' 属性的文本区域：

'wrap' 属性有 3 个值：

**
软硬
关闭 **

软 - 将换行设置为仅出现在 HTML 表单中 - 提交表单时不包括所有行间距和换行符。

硬 - 将换行设置为出现在表单中，行间距和换行符与表单数据一起发送。

关闭 - 关闭换行并将文本放置在一个正在进行的行中。

一个示例： `<textarea cols="20" rows="5" wrap="hard"> As you can see many times word wrapping is often the desired look for your textareas. Since it makes everything nice and easy to read and preserves line breaks. </textarea>`

希望能帮助到你。

# blackberry - 黑莓中的 onClose() 有什么用

> ID：10546212
> 
> 赞同：0
> 
> 时间：2012-05-11T06:04:41.883
> 
> 标签：blackberry, user-interface, java-me

```
public boolean onClose() {
    if (isRequireSettle()) {
        Dialog.alert("close??");
    } else {
        close();
        return true;
    }
} 
```

如果`onClose()`调用该方法，屏幕上会发生什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T06:09:47.273

表示发生了关闭事件。

默认实现是通过指定来激活的`Screen.DEFAULT_CLOSE`。`Screen.onSavePrompt()`如果屏幕脏了就会调用，如果`Screen.close()`成功就调用。

> 返回：如果屏幕关闭则为真；否则为假。
> 自：黑莓 API 3.6.0

参考：[net.rim.device.api.ui - 类屏幕](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/ui/Screen.html)

# javascript - 使用 for..in 循环对象

> ID：10546213
> 
> 赞同：0
> 
> 时间：2012-05-11T06:04:50.653
> 
> 标签：javascript, jquery

我正在尝试使用 for..in 循环来选择变量中的对象，但它没有显示必要的 Li 对象。

```
var mUlLi = $(mUl).find('>li');      //select all li's in main Ul   
var listLength = $(mUlLi).length;
if(listLength >0 ){
    /*for(i=0;i <listLength; i++) {
        console.log(mUlLi[i]);   // works fine show the li objects  
    }*/
    for(var obj in mUlLi) {
        console.log(obj);   // show's diff objects
    }
} 
```

我怎样才能解决这个问题 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T06:06:10.950

jQuery 有一个[`each()`](http://api.jquery.com/each/)做同样的事情。

```
$(mUl).find('>li').each(function(){ //for each of the elements found
    console.log(this);              //in here, "this" is the DOM element <li>
}); 
```

如果您`for in`在 jQuery 对象上使用 a ，您还将循环浏览 jQuery 方法和属性。

但是，如果您真的想对`for`从该 jQuery 获得的元素进行循环（因为您不想使用`each()`），请直接执行：

```
var nodes = $(mUl).find('>li'),
    nodesLength = nodes.length,
    i, node;

for(i=0,i<nodesLength;i++){
    node = nodes[i];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T06:05:52.443

您可以通过使用正确的方法来迭代数组来解决此问题 -[`for(.. in ..)`](https://developer.mozilla.org/en/JavaScript/Reference/Statements/for...in)不是用于迭代数组元素/索引，而是用于对象属性 - 这不是您想要的**。**

只需通过以下方式使用**jQuery**方式[`.each()`](http://api.jquery.com/each/)：

```
mUlLi.each(function() {
    console.log(this);
}); 
```

如果出于某种原因（可能不是正当理由！）您不想要这个，您也可以使用一个好的旧`for`循环：

```
for(var i = 0; i < listLength; i++) {
    var elem = mUlLi[i];
    console.log(elem);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-11T06:07:06.543

`mUlLi`（有问题的变量名）不是一个常规对象，是一个 jQuery 集合。您可以使用`each()`.

```
mUlLi.each(function(){
   // `$(this)` is the current jQuery element
}) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-11T06:10:04.320

使用 jQuery 的 each 函数怎么样？

[http://api.jquery.com/jQuery.each/](http://api.jquery.com/jQuery.each/)

```
$(mUl).find('>li').each(function(i,v) {
    console.log(v);
}); 
```

# sql - 在 SSIS 包中遵循的最佳方法

> ID：10546215
> 
> 赞同：0
> 
> 时间：2012-05-11T06:05:03.587
> 
> 标签：sql, sql-server-2008, ssis

我正在研究简单的转换 SSIS 包以从一台服务器导入数据并加载到另一台服务器。每个人只使用一张桌子。我想知道，由于它只是刷新数据，在加载之前是否需要删除表中的旧数据，我需要专家建议我应该怎么做。我应该截断旧表还是使用删除？我还应该记住哪些其他问题？请给出你的答案的理由，这将有助于在技术上与我的领导进行斗争。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T08:42:33.240

这取决于要求是什么。

您是否需要跟踪数据的任何更改？如果是这样，每次截断数据将不允许您跟踪数据的历史记录。在这种情况下，一个不错的选择是将源数据暂存到单独的表/数据库中，并将所需数据加载到另一个结构中（可能具有历史跟踪，例如，具有缓慢变化维度的事实表）。

截断是删除数据的最佳选择，因为它是最少记录的操作。

# gnome-terminal - 如何在终端模拟器选项卡或标题栏中查看进程名称

> ID：10546217
> 
> 赞同：3
> 
> 时间：2012-05-11T06:05:05.613
> 
> 标签：gnome-terminal, terminal-emulator

如何将当前正在运行的进程名称放入 GNOME 终端选项卡标题（或只有一个选项卡时的标题栏）？

尽管[https://superuser.com/questions/42362/gnome-terminal-process-name-in-tab-title](https://superuser.com/questions/42362/gnome-terminal-process-name-in-tab-title)提供了一个解决方案（如下），但它在每个选项卡启动时完全混乱，以致出现损坏。有没有更好的办法？

```
case "$TERM" in
xterm*|rxvt*)
    set -o functrace
    trap 'echo -ne "\e]0;$BASH_COMMAND\007"' DEBUG
    PS1="\e]0;\s\007$PS1"
    ;;
*)
    ;;
esac 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T14:03:46.150

好吧，既然每个人似乎都已经知道 David Pashley 的解决方案，我有点惊讶我花了这么长时间才找到这个解决方案。它实际上解决了 bash 完成问题。

需要明确的是：除了研究之外，我自己什么也没做。所有功劳归于 Marius Gedminas ( [http://mg.pov.lt/blog/bash-prompt.html](http://mg.pov.lt/blog/bash-prompt.html) )。

这对我来说非常适合 Gnome-Terminal/Terminator

```
# If this is an xterm set the title to user@host:dir
case "$TERM" in
xterm*|rxvt*)
    PROMPT_COMMAND='echo -ne "\033]0;${USER}@${HOSTNAME}: ${PWD}\007"'

    # Show the currently running command in the terminal title:
    # http://www.davidpashley.com/articles/xterm-titles-with-bash.html
    show_command_in_title_bar()
    {
        case "$BASH_COMMAND" in
            *\033]0*)
                # The command is trying to set the title bar as well;
                # this is most likely the execution of $PROMPT_COMMAND.
                # In any case nested escapes confuse the terminal, so don't
                # output them.
                ;;
            *)
                echo -ne "\033]0;${USER}@${HOSTNAME}: ${BASH_COMMAND}\007"
                ;;
        esac
    }
    trap show_command_in_title_bar DEBUG
    ;;
*)
    ;;
esac 
```

# iphone - 我的代码片段正在泄漏

> ID：10546222
> 
> 赞同：0
> 
> 时间：2012-05-11T06:05:39.943
> 
> 标签：iphone, objective-c, ios, ios4

当我尝试构建和分析事物时，下面的代码片段会泄漏。

这段代码有什么问题，请告诉我

```
- ( NSString *) getSubCategoryTitle:(NSString*)dbPath:(NSString*)ID{
        NSString *subCategoryTitle;

    if (sqlite3_open([dbPath UTF8String], &database) == SQLITE_OK) 
    {
        NSString *selectSQL = [NSString stringWithFormat: @"select sub_category_name from sub_categories where id = %@",ID];

        NSLog(@"%@ I am creashes here", selectSQL);

        const char *sql_query_stmt = [selectSQL UTF8String];

        sqlite3_stmt *selectstmt;

        if(sqlite3_prepare_v2(database, sql_query_stmt, -1, &selectstmt, NULL) == SQLITE_OK) 
        {

            while(sqlite3_step(selectstmt) == SQLITE_ROW) 
            {

                subCategoryTitle = [[NSString alloc] initWithUTF8String:
                                    (const char *) sqlite3_column_text(selectstmt, 0)];

            }
        }

        sqlite3_finalize(selectstmt);    

    }   
    sqlite3_close(database); 

    return [subCategoryTitle autorelease];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T06:07:32.017

您将实例分配到`subCategoryTitle`循环中，但不要释放先前的分配。

```
subCategoryTitle = [[NSString alloc] initWithUTF8String:
                                (const char *) sqlite3_column_text(selectstmt, 0)]; 
```

要么（自动）释放它，要么直接转到最后一行，并避免这种情况，因为它没有多大意义。

仅创建最后一个对象的示例：

```
char * col_text = NULL;
while(sqlite3_step(selectstmt) == SQLITE_ROW) 
{
    col_text = sqlite3_column_text(selectstmt, 0);
}
if (col_text != NULL)
{
    subCategoryTitle = [[NSString alloc] initWithUTF8String:col_text];
} 
```

# jquery - jquery验证全名字段

> ID：10546225
> 
> 赞同：0
> 
> 时间：2012-05-11T06:06:11.607
> 
> 标签：jquery, validation, text

我想对“全名”字段进行 jquery 验证，根据我的定义，它至少是两个单词，但不限于两个，当然没有数字。

```
 function validateFullName()
 {
 var fullname=document.forms["CollectData"]["FullName"].value;

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T06:16:32.777

像这样的东西应该工作。`true`如果给定字符串至少有两个单词，考虑到一个单词至少有 2 个字符，则此函数将返回。

```
var isName = function(str){
    var match = str.match(/\b[A-Za-z]{2,}\b/g);
    return match.length > 1;
}; 
```

您还可以使用[jQuery 验证插件](http://docs.jquery.com/Plugins/Validation)或[jq-idealforms](https://github.com/elclanrs/jq-idealforms)，这是我为表单和东西制作的一个小插件，它也具有验证功能。

# java - 我的 JApplet 中的线程“AWT-EventQueue-1”java.lang.NullPointerException 中的异常

> ID：10546226
> 
> 赞同：1
> 
> 时间：2012-05-11T06:06:22.593
> 
> 标签：java, netbeans, applet, nullpointerexception, japplet

我在尝试修复这段代码时遇到了一个巨大的问题，我不断收到一个巨大的错误：

```
Exception in thread "AWT-EventQueue-1" java.lang.NullPointerException
at com.allcare.arfile.CloudStoreInfo.getStoreInfoFromProvider(CloudStoreInfo.java:62)
at com.allcare.arfile.ArFileJApplet.listBlobStoreContents(ArFileJApplet.java:959)
at com.allcare.arfile.ArFileJApplet.uploadFile(ArFileJApplet.java:938)
at com.allcare.arfile.ArFileJApplet.sendCloud_buttonActionPerformed(ArFileJApplet.java:807)
at com.allcare.arfile.ArFileJApplet.access$1400(ArFileJApplet.java:26)
at com.allcare.arfile.ArFileJApplet$14.actionPerformed(ArFileJApplet.java:445)
at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
at java.awt.Component.processMouseEvent(Component.java:6505)
at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
at java.awt.Component.processEvent(Component.java:6270)
at java.awt.Container.processEvent(Container.java:2229)
at java.awt.Component.dispatchEventImpl(Component.java:4861)
at java.awt.Container.dispatchEventImpl(Container.java:2287)
at java.awt.Component.dispatchEvent(Component.java:4687)
at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
at java.awt.Container.dispatchEventImpl(Container.java:2273)
at java.awt.Component.dispatchEvent(Component.java:4687)
at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:707)
at java.awt.EventQueue.access$000(EventQueue.java:101)
at java.awt.EventQueue$3.run(EventQueue.java:666)
at java.awt.EventQueue$3.run(EventQueue.java:664)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
at java.awt.EventQueue$4.run(EventQueue.java:680)
at java.awt.EventQueue$4.run(EventQueue.java:678)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
at java.awt.EventQueue.dispatchEvent(EventQueue.java:677)
at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
at java.awt.EventDispatchThread.run(EventDispatchThread.java:90) 
```

我认为问题出在我的任务上。我知道我得到的列表中至少有 1 个完整的部分变量。我已经尝试打印出 elements 变量的每个元素并且它们都在那里（但我必须在开始分配之前执行此操作，否则它不会到达函数），但它根本不会进入我的 print 语句（这也不是原因，我试过评论它）。我只是找不到究竟是什么空：

```
public void getStoreInfoFromProvider(BlobStore blobStore)
{
    ListContainerOptions listOptions = new ListContainerOptions();
    String temp = blobStore.list("", listOptions.recursive()).toString(); // returns a string containing all info of the filesystem on the cloud

    // remove the [ and ] characters as well as split whenever encounters [t
    temp = temp.replaceFirst("\\[\\[", "");
    temp = temp.replaceFirst("\\]\\]", "");
    String[] parts = temp.split("\\[t"); 

    for (int x = 0; x < 1; x++)
    {
        String[] elements = parts[x].split(", ");

        System.out.println(elements.length);
        System.out.println(elements[x]);

// this line below is where the code breaks, if i comment it out, then the next line breaks and so on and so forth
        type[x] = elements[0];
        providerId[x] = elements[1];
        name[x] = elements[2];
        location[x] = elements[3];
        scope[x] = elements[4];
        description[x] = elements[5];
        parent[x] = elements[6];
        isoCodes[x] = elements[7];
        metadata[x] = elements[8];
        uri[x] = elements[9];
        userMetadata[x] = elements[10];

        printSingleCloudStoreInfo(x);
    }
} 
```

任何帮助或建议将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T09:07:31.013

听说过简化的 for 循环吗？好吧，有理由称它为简化...

```
public void getStoreInfoFromProvider (BlobStore blobStore)
{
    ListContainerOptions listOptions = new ListContainerOptions ();
    // returns a string containing all info of the filesystem on the cloud
    String temp = blobStore.list ("", listOptions.recursive ()).toString (); 

    temp = temp.replaceFirst("\\[\\[", "");
    temp = temp.replaceFirst("\\]\\]", "");
    String[] parts = temp.split("\\[t"); 

    for (String part: parts) 
    {
        String[] elements = part.split(", ");
        System.out.println(elements.length);
        // ... 
```

我只是在猜测，第 62 行在哪里。您应该用评论标记它或通过引用它以某种方式描述它。

### 更新：

由于现在标记了第 62 行：

如果 type 设置为 null，则它不会被初始化，而是 null。你必须用你需要的大小来初始化它——例如，因为它是一个字符串数组：String [] type = new String[2];。如果不初始化，就没有预留空间来存储类型[0]；

# jquery - jquery中的日期时间选择器问题

> ID：10546228
> 
> 赞同：0
> 
> 时间：2012-05-11T06:06:43.117
> 
> 标签：jquery, function, datetimepicker

使用下面的代码，我可以从日期时间选择器中选择日期。

发生的事情是在 startdate 我得到今天的日期和前一个日期，而在 enddate 我得到今天以后的日期表格，突出显示。

我想在 startdate 中选择日期后，选择 startdate 之后的所有日期都应该在 enddate 中突出显示。

```
$(function () {
  $('#event_start_date').datetimepicker({ maxDate: '0' });
});

$(function () {
  $("#event_end_date").datetimepicker({ minDate: '0' });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T08:57:39.940

将此用作参数...

```
minDate: new Date() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T06:55:17.783

我想这可能对你有帮助......

```
$(function() {
    $('#event_start_date').datetimepicker({
        dateFormat:'yy-mm-dd',
        timeFormat: 'hh:mm:ss',
        showSecond: true,
        onClose: function(dateText, inst) {
            var endDateTextBox = $('#event_start_date');
            if (endDateTextBox.val() != '') {
                var testStartDate = new Date(dateText);
                var testEndDate = new Date(endDateTextBox.val());
                if (testStartDate > testEndDate)
                    endDateTextBox.val(dateText);
            }
            else {
                endDateTextBox.val(dateText);
            }
        },
        onSelect: function (selectedDateTime){
            var start = $(this).datetimepicker('getDate');
            $('#event_start_date').datetimepicker('option', 'minDate', new Date(start.getTime()));
        }
    });
    $('#event_start_date').datetimepicker({
        dateFormat:'yy-mm-dd',
        timeFormat: 'hh:mm:ss',
        showSecond: true,
        onClose: function(dateText, inst) {
            var startDateTextBox = $('#event_start_date');
            if (startDateTextBox.val() != '') {
                var testStartDate = new Date(startDateTextBox.val());
                var testEndDate = new Date(dateText);
                if (testStartDate > testEndDate)
                    startDateTextBox.val(dateText);
            }
            else {
                startDateTextBox.val(dateText);
            }
        },
        onSelect: function (selectedDateTime){
            var end = $(this).datetimepicker('getDate');
            $('#event_start_date').datetimepicker('option', 'maxDate', new Date(end.getTime()) );
        }
    });
}); 
```

# java - 尝试在 ArrayList 中遍历时如何修复 java.util.ConcurrentModificationException 错误

> ID：10546229
> 
> 赞同：1
> 
> 时间：2012-05-11T06:06:47.440
> 
> 标签：java, exception

如果满足条件，我正在尝试将新对象添加到我的 ArrayList 中。但是当我尝试运行它时，它给了我这个 ConcurrentModificationExeption。希望你能帮助我：

```
public void addTaskCollection(Task t){ 
    ListIterator<Task> iterator = this.taskCollection.listIterator();
    if(this.taskCollection.isEmpty())
        this.taskCollection.add(t);
    while (iterator.hasNext()){
        if(t.isOverlapped(iterator.next()))
            this.taskCollection.add(t);
    }    
} 
```

这是例外错误

```
Exception in thread "main" java.util.ConcurrentModificationException
at java.util.ArrayList$Itr.checkForComodification(ArrayList.java:819)
at java.util.ArrayList$Itr.next(ArrayList.java:791)
at Diary.addTaskCollection(Diary.java:36)
at Test.main(Test.java:50)
Java Result: 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T06:07:55.973

复制数组并更改原始数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T06:18:59.393

看来您遇到了竞争条件。多个线程正在访问/修改同一个集合。使用线程安全的 List 实现。

此外，您不得在使用迭代器对其进行迭代时修改集合（添加/删除）。

**编辑**

*ConcurrentModificationExeption*听起来好像 taskCollection 被多个线程同时访问和修改（如果您的程序是单线程或多线程，我们不能说您提供的代码段）。如果您在多个线程之间共享 taskCollection，请使用线程安全列表实现。

但是，这里的错误实际上显然是由于您在获得迭代器的那一刻和使用该迭代器的那一刻之间向集合中添加了一个元素。要修复该问题，将临时列表中的新元素复制并在迭代结束时将它们全部添加一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T06:25:19.143

将您的代码替换为：

```
ListIterator<Task> iterator = this.taskCollection.listIterator();
boolean marker = false;

if(taskCollection.isEmpty())
    this.taskCollection.add(t);
else {
   while (iterator.hasNext()) {
      if(iterator.next().isOverlapped(t) == false)
         marker = true;
   }
}

if (marker == true)
    taskCollection.add(t); 
```

避免 ConcurrentModificationException。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-14T20:45:06.450

从评论中重新格式化了 Truong 的答案：

```
ListIterator<Task> iterator = this.taskCollection.listIterator();
boolean marker = false;

if(taskCollection.isEmpty())
  this.taskCollection.add(t);
else {
  while (iterator.hasNext()) {
    if(iterator.next().isOverlapped(t) == false)
      marker = true;
  }
  if (marker == true)
    taskCollection.add(t);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-15T07:39:11.687

维护两个迭代器。

```
import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;

public class Example_v3 {

     public static void main(String[] args) {
          List<String> list = new ArrayList<String>();

          // Insert some sample values.
          list.add("Value1");
          list.add("Value2");
          list.add("Value3");

          // Get two iterators.
          Iterator<String> ite = list.iterator();
          Iterator<String> ite2 = list.iterator();

          // Point to the first object of the list and then, remove it.
          ite.next();
          ite.remove();

          /* The second iterator tries to remove the first object as well. The object does
           * not exist and thus, a ConcurrentModificationException is thrown. */
          ite2.next();
          ite2.remove();
     }
} 
```

# cordova - Phonegap 应用程序。数据库问题/问题

> ID：10546230
> 
> 赞同：0
> 
> 时间：2012-05-11T06:06:50.993
> 
> 标签：cordova

作为一名最近意识到 phonegap 的 Web 开发人员，我决定采取早就应该采取的措施并创建我的第一个 iPhone 应用程序。

我有一个想法并准备开始，但首先有一个与数据库有关的问题。

我的应用程序是使用本地数据库来存储用户提供的大量信息并基于此提供统计信息。在我开始确保数据不会丢失之前，有什么我应该注意的或我应该采取的任何措施。

另外，当我对应用程序进行更新时，如何确保现有数据不被覆盖？我假设我提交给 Apple 以包含在应用商店中的包将包含数据库框架。我需要来自任何以前版本的应用程序的数据来保持更新。

您在应用商店中阅读评论，其中应用似乎无缘无故丢失了用户数据。这是我不能让这个应用程序发生的事情。如果用户由于更新或任何其他原因丢失了他们的数据，这将使应用程序对他们毫无用处。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T13:27:03.307

如果您不希望使用 Apple 的云选项，您可以使用本地数据库（Phonegap 使这很容易），但也可以编写自己的代码以使用 ajax 每小时/每一次将用户的数据同步到您托管的服务器天。

Phonegap 还使您能够写入文件系统......肯定会在任何数量的应用程序恶作剧中幸存下来吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T20:14:01.740

您需要了解数据库将保存在哪里，以便它在云中持久存在。

为了防止数据丢失，您还需要跟上 iOS、Android 等不断变化的环境，并准备好更改代码以适应。

通常，iOS 应用程序的更新会保留用户的数据。

# vb.net - 在linq中添加多个数字字符串值

> ID：10546233
> 
> 赞同：0
> 
> 时间：2012-05-11T06:07:23.467
> 
> 标签：vb.net, linq, entity-framework, ef-code-first

我首先使用实体​​框架代码并从我们的数据库中提取一些数据。在我正在访问的表中，有 13 个列将客户在过去 13 周内每周购买的商品数量存储为 char 字段。我无法控制这些数据的存储方式。我需要将 13 周的结果加起来才能得到总和，所以取第 1 周 + 第 2 周 + 第 3 周 .... = 13 周内购买的物品总数。

在 SQL 中，我只是将 char 转换为 Integer 并将值相加。但我正在努力寻找在 linq 中执行此操作的解决方案。

我试过

```
(From c in Table
Select New With {.Usage = (Convert.ToInt32(c.week1) + 
                           Convert.ToInt32(c.week2) + etc)}).ToList() 
```

以及尝试使用 Integer.Parse 而不是 Convert.ToInt32。

如果您有任何可以帮助我的东西，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T06:16:02.743

EF 无法将 Convert.Int32 （以及许多其他 LINQ 语句......）转换为 SQL。您应该只使用 LINQ to Entities 正常执行查询，然后在 LINQ 之外执行转换。

# windows - 构建 OpenSSL x64 静态库时出现错误“错误 A2009：表达式中的语法错误”

> ID：10546234
> 
> 赞同：2
> 
> 时间：2012-05-11T06:07:30.927
> 
> 标签：windows, visual-studio, openssl, 64-bit, nmake

我需要 Openssl 的静态库。我按照[这里](https://stackoverflow.com/questions/158232/how-do-you-compile-openssl-for-x64)的说明进行操作。我做的步骤如下：

1.  运行“Visual Studio 2008 x64 跨工具命令提示符”。
2.  执行**perl 配置 VC-WIN64A no-shared no-idea**
3.  执行**ms\do_win64a**
4.  编辑**ms\nt.mak**并将输出目录中的“32”更改为“64”。
5.  执行**nmake -f ms\nt.mak**

完成所有这些之后，我在第 5 步得到一个错误：

```
Assembling: tmp32\md5-x86_64.asm
tmp32\md5-x86_64.asm(8) : error A2009: syntax error in expression
tmp32\md5-x86_64.asm(9) : error A2009: syntax error in expression
tmp32\md5-x86_64.asm(677) : error A2009: syntax error in expression
tmp32\md5-x86_64.asm(678) : error A2009: syntax error in expression
NMAKE : fatal error U1077: '"C:\Program Files (x86)\Microsoft Visual Studio 8\VC
\BIN\x86_amd64\ml64.EXE"' : return code '0x1'
Stop. 
```

这里出了什么问题？或者任何人都可以提供我可以在 Visual Studio 20005 中使用的 Openssl 静态库的链接吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-24T09:15:07.230

我也遇到了这个问题，发现 Perl 太旧了。x86_64-xlate.pl 中的以下行没有生成“PTR”，尽管设置了变量 $PTR：

```
$func .= "  mov QWORD${PTR}[8+rsp],rdi\t;WIN64 prologue\n"; 
```

当我安装 ActiveState Perl 5.16.3 时，它运行良好！

（我只安装了 Visual Studio masm，我猜使用 nasm 生成的代码会起作用，因为 nasm 似乎不需要 PTR 关键字）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T06:36:46.867

我找到了这个问题的答案。不知何故，`nasm`没有安装在我的机器上。这里显示的错误也没有说明 nasm。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-30T18:18:04.677

似乎活跃状态在我的环境中也很旧。我不确定我是否使用了正确版本的 nasm，但我的 ml64.exe 通过命令行参数与 nasm 不兼容。人们说我必须将 asm 变量添加到我的环境中。所以我在 crypto\perlasm\x86_64-xlate.pl 文件中进行了全局更改：“PTR}[”到“PTR}[”。只是在变量后添加了一个空格。

# java - 消息摘要末尾的“=”

> ID：10546241
> 
> 赞同：0
> 
> 时间：2012-05-11T06:08:14.030
> 
> 标签：java, base64, sha1

为什么`"="`在 sha1 消息摘要的末尾有一个符号？（在经过 base64 编码之后）
该`"="`符号甚至出现在 base64 endcoded 签名（rsa）的末尾。为什么base 64包含它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T06:09:42.390

它只是 base64 的一部分——与摘要无关。添加“=”用于填充，因此整体结果始终是四个字符的倍数，但读者可以分辨出四个字符的“块”何时仅代表一个或两个字节（而不是通常的三个）。

有关更多信息，请参阅[维基百科](http://en.wikipedia.org/wiki/Base64#Padding)。（请注意，虽然它说仅在某些情况下才需要填充，但我认为我从未见过*不*包含填充的 base64 编码器，至少在默认情况下是这样。包含填充比不包含填充要常见得多这样做。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T06:12:25.397

'==' 序列表示最后一组仅包含 1 个字节，而 '=' 表示它包含 2 个字节。

# apache - 为什么要让 Apache Web 服务器监听多个端口

> ID：10546247
> 
> 赞同：1
> 
> 时间：2012-05-11T06:08:41.983
> 
> 标签：apache, webserver, port, listen

让 Apache Web 服务器监听多个端口有什么用？

任何人都可以解释我的用例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T15:28:15.477

我可以看到至少两个可能的用例：

1.  假设您的应用程序可以通过端口 80 对公众进行访问。但是您希望通过[phpmyadmin（一种用于管理 MySQL 服务器的 php 工具）](http://www.phpmyadmin.net/)来管理您的数据库。因此，您可以以某种方式配置 Apache Web 服务器，它会在其他一些“私有”端口上侦听 phpmyadmin 调用。这样，只有您和您的团队可以访问它。

2.  当您没有注册域名时，您可以在您的服务器上创建多个运行的站点并将不同的端口分配给不同的站点。这样，您可以测试您的网站，直到您的域名被注册。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T06:11:16.030

您可能希望同时使用 IPv4 和 IPv6，使用 HTTP 和 HTTPS，等等。

[http://httpd.apache.org/docs/2.2/bind.html](http://httpd.apache.org/docs/2.2/bind.html)

您可能有多个网络提供商，并且每个提供商都提供多个 IP。虽然收听 0.0.0.0 将收听*所有*地址，但有时您可能希望收听选定的地址，而不是所有地址。

**编辑**：忘记了：还有一个重要原因是当您必须从一个主机（一个 IP）为多个站点和多个域提供服务时。然后，您将为每个不同的站点使用不同的端口。它们被称为基于名称的虚拟主机。

如果您需要它，这里有一个关于如何从 apache 文档中命名基于名称的虚拟主机的[链接。](http://httpd.apache.org/docs/2.0/vhosts/examples.html#port)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T06:11:39.273

嗯......对于http，默认端口是80，HTTPS默认是443

出于某种原因，您可以在另一个港口服务。

# visual-studio-2010 - 如何在 C++/CLI 中定义字符串数组？

> ID：10546250
> 
> 赞同：3
> 
> 时间：2012-05-11T06:08:57.980
> 
> 标签：visual-studio-2010, c++-cli

这有什么问题：

对于所有 5 个定义，我都收到了这些错误：

```
 error C3698: 'System::String ^' : cannot use this type as argument of 'gcnew'
 error C2512: 'System::String::String' : no appropriate default constructor available    

array<String^>^ arr = gcnew array<String^>
{
    gcnew String^ "Madam I'm Adam.",    
    gcnew String^ "Don't cry for me,Marge and Tina.",   //error C2143: syntax error : missing '}' before 'string'   AND error C2143: syntax error : missing ';' before 'string'
    gcnew String^ "Lid off a daffodil.",
    gcnew String^ "Red lost Soldier.",
    gcnew String^ "Cigar? Toss it in a can. It is so tragic."
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T06:14:02.260

您不应该`gcnew`在数组初始值设定项内使用：

```
array<String^>^ arr = gcnew array<String^> {
    "Madam I'm Adam.",    
    "Don't cry for me,Marge and Tina.",
    "Lid off a daffodil.",
    "Red lost Soldier.",
    "Cigar? Toss it in a can. It is so tragic."
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T12:30:27.017

另一个应答器具有正确的语法，但这不是因为您在数组初始化程序中。

您的字符串初始化有两个错误。

1.  使用 gcnew 时，不需要包含`^`. 您正在构建一个新对象，而不是一个新引用。
2.  调用构造函数时需要括号。

所以正确的构造函数语法是调用`gcnew String("Madam I'm Adam.")`.

但是，正如其他回答者指出的那样，您不需要这样做。字符串文字已经是一个 String 对象，因此您可以删除对构造函数的调用，直接使用字符串文字。这与在 C# 中调用相同`new String("Madam I'm Adam.")`：它已经是一个字符串对象，调用`new String`是多余的。

# android - 无法从真实设备上的 android 应用程序发送电子邮件

> ID：10546252
> 
> 赞同：1
> 
> 时间：2012-05-11T06:09:19.090
> 
> 标签：android

我开发了一个发送电子邮件的应用程序。在设备上运行它时，它会显示消息“消息发送...”，但实际上并未发送电子邮件。

这是我的代码：

```
Intent email = new Intent(Intent.ACTION_SEND);
email.putExtra(Intent.EXTRA_EMAIL, new String[]{"abc@gmail.com"});

email.putExtra(Intent.EXTRA_SUBJECT, "subject");
email.putExtra(Intent.EXTRA_TEXT, body);
email.setType("plain/text");
startActivity(Intent.createChooser(email, "Sending mail...")); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T08:00:01.100

```
Intent sendIntent = new Intent(Intent.ACTION_SEND);
String []mailto = { "Your emill id"};
sendIntent.putExtra(Intent.EXTRA_EMAIL,mailto);
sendIntent.putExtra(Intent.EXTRA_SUBJECT,"");
sendIntent.putExtra(Intent.EXTRA_TEXT, "");
sendIntent.setType("text/plain");
startActivity(Intent.createChooser(sendIntent, "MySendMail")); 
```

在你的清单中：

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T07:44:05.093

您正在使用意图，它们不应该发送电子邮件，而是启动设备上安装的任何电子邮件客户端。

Android 将自动过滤表示可以发送纯文本/文本的应用程序，并提示用户他想使用哪个应用程序。

但是，根据用户最终选择的应用程序，用户将有机会在发送邮件之前查看邮件和其他内容。

如果您只想发送电子邮件，那么您将必须实现自己的电子邮件客户端（有很多可用的 java 电子邮件库）或使用显式意图（而不是您现在使用的隐式）到您知道的应用程序直接发送电子邮件。

我希望我足够清楚

有关官方文档的更多信息：http: [//developer.android.com/reference/android/content/Intent.html](http://developer.android.com/reference/android/content/Intent.html)

# c# - 刷新后不显示Highcharts

> ID：10546253
> 
> 赞同：1
> 
> 时间：2012-05-11T06:09:22.613
> 
> 标签：c#, highcharts

我正在使用高图表，并成功地在页面重新加载时显示它们。我正在使用以下代码在服务器端创建图表：-

```
DateTime dt = DateTime.Now;
Series[] series=null;

            Series Store1 = new Series();
            Store1.Data = new Data(new object[]
                                  {
                                      lst[0].target1,lst[0].target2,lst[0].target3,lst[0].target4,lst[0].target5,lst[0].target6,lst[0].target7
                                  });

            Store1.Name = lst[0].StoreName;
            Store1.Type = DotNet.Highcharts.Enums.ChartTypes.Bar;

            Series Store2 = new Series();
            Store2.Data = new Data(new object[]
                                  {
                                      lst[1].target1,lst[1].target2,lst[1].target3,lst[1].target4,lst[1].target5,lst[1].target6,lst[1].target7
                                  });
            Store2.Name = lst[1].StoreName;
            Store2.Type = DotNet.Highcharts.Enums.ChartTypes.Bar;

            series = new Series[] { Store1, Store2 };

            DotNet.Highcharts.Highcharts bar = new DotNet.Highcharts.Highcharts("chart")
            .SetPlotOptions(new PlotOptions
            {
                Bar = new PlotOptionsBar
                {
                    AllowPointSelect = true,                   
                    Cursor = DotNet.Highcharts.Enums.Cursors.Pointer,
                    ShowInLegend = true,
                    DataLabels = new PlotOptionsBarDataLabels
                    {
                        Color = System.Drawing.ColorTranslator.FromHtml("#000000"),
                        //ConnectorColor = System.Drawing.ColorTranslator.FromHtml("#000000"),
                    }
                }
            }) 
            .SetLegend(new Legend{
            Layout=DotNet.Highcharts.Enums.Layouts.Vertical
            })
                .SetXAxis(new XAxis
                {
                    Categories = new string[] {dt.DayOfWeek.ToString(),
                    dt.AddDays(-1).DayOfWeek.ToString(),
                    dt.AddDays(-2).DayOfWeek.ToString(),
                    dt.AddDays(-3).DayOfWeek.ToString(),
                    dt.AddDays(-4).DayOfWeek.ToString(),
                    dt.AddDays(-5).DayOfWeek.ToString(),
                    dt.AddDays(-6).DayOfWeek.ToString()
                    }
                })
            .SetTitle(new Title { Text = "Store Details" })
            .SetSeries(series);

            ltrchart.Text = bar.ToHtmlString(); 
```

客户端代码

```
<script src="Js/jquery-1.5.1.js" type="text/javascript"></script>
<script src="Js/highcharts.js" type="text/javascript"></script>
<asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">
<ContentTemplate>
    <asp:Literal ID="ltrchart" runat="server"></asp:Literal>        
</ContentTemplate>
</asp:UpdatePanel> 
```

我正在使用更新面板，但每当我刷新图表时，我的图表就会消失。如果我重新加载页面，它工作正常，但是当我尝试更改图表而不将其放入更新面板时，它不会改变。我想使用更新面板并希望我的图表改变而不是消失。无论是服务器端还是客户端，我都没有收到任何错误。请帮助我。

问候阿布舍克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T07:18:29.963

我能够刷新以重新加载图表但不能重新加载数据点。

一个客户端，您需要将其添加到代码中。

Sys.Application.add_load( // 图表渲染代码在这里 )

这将使图表在更新面板更新时重新呈现。

# jquery - 通过jquery从文件上传字段中获取值

> ID：10546257
> 
> 赞同：1
> 
> 时间：2012-05-11T06:09:48.903
> 
> 标签：jquery

我有联系表格，在那里我使用了文件上传文件。现在我想获取值，它表示 jQuery 文件上传字段的路径。文件上传字段具有名为 filebrowse 的类，我想存储该值并在另一个输入字段中回显该值。我使用此代码检索路径

```
var val = jQuery(".filebrowse").val();
console.log(val);
jQuery('.file-input').attr('value', val); 
```

它可以工作，但没有在输入框字段中显示值。因为默认情况下输入框是空的，所以它什么也不显示。现在我想在一个浏览文件到文件上传字段时在输入框中显示值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T06:14:29.320

你的意思是，获取文件字段的值：

```
$('.filebrowse').change( function(){
    console.log( $(this).val() );
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T06:12:43.433

由于安全原因，无法设置文件输入的值。恶意 javascript 可以让您设置文件，然后以编程方式提交表单，允许他们通过强制上传窃取您系统上的任何文件，前提是他们知道文件的路径。

编辑 - 嘿，我误读了问题并根据示例代码回答。通常可以获得文件输入值的文件名，但出于安全原因，它不包括路径。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2016-01-14T14:30:54.877

我知道这篇文章有点老了，但这是我在 MVC 中需要做的。

```
<input type="file" style="width:100%;" class="fu" id="fileUploader" name="fileUploader" /> 
```

然后通过类访问它。

```
var fileValue = $('.fu').val(); 
```

# automated-tests - 为什么断点在 TestComplete 中不起作用？

> ID：10546261
> 
> 赞同：0
> 
> 时间：2012-05-11T06:10:05.303
> 
> 标签：automated-tests, breakpoints, testcomplete

我正在使用 TestComplete 8.70.720.7 的试用版进行测试自动化。我遇到了断点问题——即使打开了测试调试，它们也不起作用。问题的原因可能是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T09:03:54.487

TestComplete uses the Microsoft Script Debugger to debug JScript and VBScript scripts. So, this functionality depends on the MS script debugging components installed on your computer. If the break points are not working, there is something wrong with the script debugging components - TestComplete can't use them for some reason. There are multiple reasons for this problem to occur. Many of them are described in the following FAQ entry in the SmartBear Support Portal:

[http://support.smartbear.com/viewarticle/8874/](http://support.smartbear.com/viewarticle/8874/)

If the suggestions from that article do not help, this may mean that you have faced a situation when TestComplete is trying to use the Script Debugger installed with Visual Studio. At that, not all versions of the VS Script Debugger are compatible with TestComplete. So, if you have VS installed on your PC, try doing the following:

1.  Close Visual Studio and TestComplete.
2.  Rename the VS7Debug folder on your disk (the path to it looks like this: C:\Program Files\Common Files\microsoft shared), to something else like "_VS7Debug".
3.  Reinstall the Microsoft Script Debugger using the link from the FAQ article above. When installing under Windows 7, Vista, or Win Server 2008, run the installation with elevated permissions (use the "Run As Administrator" context menu command).

Does this fix the problem?

# html - 行为可疑的字符集

> ID：10546265
> 
> 赞同：0
> 
> 时间：2012-05-11T06:10:29.453
> 
> 标签：html, character-encoding

我在网页上显示某些字符时遇到问题。虽然管理员和前端都是 utf-8，但在管理员中我可以看到字符很好，而在前端我得到问号。关于什么会干扰我在前端的字符集的任何想法？javascript可以对此负责吗？

# delphi - Delphi 7中FreeAndNil的替代品是什么？

> ID：10546267
> 
> 赞同：2
> 
> 时间：2012-05-11T06:10:39.370
> 
> 标签：delphi, delphi-7

我怀疑 FreeAndNil 是否是处置对象的理想方法。我遇到过类似的代码

```
StringList1.Free; 
StringList1 := Nil; 
```

用来。上面的行是矫枉过正，还是更好的做事方式？这两种方法有什么区别？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-11T06:34:45.637

严格来说，要处理一个对象，您只需要调用[`Destroy`](http://docwiki.embarcadero.com/Libraries/en/System.TObject.Destroy). 但是，如果参考是`nil`，即。尚未分配指向对象的有效实例的指针，这将导致访问冲突，因此建议先调用[`Free`](http://docwiki.embarcadero.com/Libraries/en/System.TObject.Free)which 来检查传递的引用是否为 nil 并且在这种情况下不执行任何操作。 [`FreeAndNil`](http://docwiki.embarcadero.com/Libraries/en/System.SysUtils.FreeAndNil)首先将传递的引用分配给临时局部变量，然后分配`nil`给传递的引用，然后调用`Free`dispose 实例。`FreeAndNil`和您的序列之间的唯一区别`obj.Free; obj := nil;`是，在第一种情况下，`nil`即使析构函数引发异常，传递的引用也是如此。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-11T06:30:15.387

您问题中的代码可能是由不了解`FreeAndNil`. 或者也许它最初是在`FreeAndNil`添加到 RTL 之前编写的。如果您想取消引用，那么您也可以使用`FreeAndNil`. 用手写的方式写出来并没有帮助。

唯一真正的区别是即使加注`FreeAndNil`也会将引用设置为。但是你的析构函数无论如何都不应该加注，所以在我看来这没什么大不了的。`Nil``Free`

有一个常见的陷阱`FreeAndNil`。因为它需要一个无类型参数，所以你可以传递任何东西。例如，您可以传递一个接口、一条记录等。如果您犯了这个错误，那么您通常会遇到奇怪的运行时错误。

我不会开始讨论是否`FreeAndNil`是一个合适的设计选择。该主题已在其他地方进行了深入讨论。

# iphone - UIScrollview 中的 UIActivityIndi catorView

> ID：10546268
> 
> 赞同：0
> 
> 时间：2012-05-11T06:10:46.693
> 
> 标签：iphone, ios, uiscrollview, uiactivityindicatorview

我有一个全屏 UIScrollView 来显示我的图像。UIActivityIndi​​catorView 被添加到 UIScrollView 中，它旋转得很好，但是当我滚动、缩放、旋转时，如何让它始终在屏幕中间旋转？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T06:24:04.447

如果将 UIActivityIndi​​catorView 直接添加到滚动视图中，它将随滚动视图一起滚动。但是，如果您将它添加到滚动视图的父级，它将保留在它放置的位置。因此，解决方案是将其添加到滚动视图的父级。

笔记：

我建议在你的窗口中有一个 UIViewController，然后将它们都添加到 UIViewController。

请参阅此处有关将视图直接添加到窗口的讨论：

[视图控制器被发送消息，即使它已被释放](https://stackoverflow.com/questions/1585688/view-controller-being-sent-a-message-even-though-it-has-been-deallocated)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T06:38:36.663

```
In ur .h file

        UIView *primaryImage;
    UIView *secondaryImage;
    UIActivityIndicatorView *indicator;

In ur .m file 

-(void)indicatorView
{
    primaryImage = [[UIView alloc] initWithFrame:CGRectMake(0,0,320,480)]; 
    primaryImage.backgroundColor = [UIColor blackColor];
    primaryImage.alpha =0.5;
    //[self.view.superview insertSubview:primaryImage aboveSubview:self.view.superview];

    //[theTableView addSubview:primaryImage];
    [self.view addSubview:primaryImage];

    secondaryImage = [[UIView alloc] initWithFrame:CGRectMake(127.50,215,65,50)];
    secondaryImage.backgroundColor = [UIColor blackColor];
    secondaryImage.alpha = 0.9;
    secondaryImage.layer.cornerRadius = 12;
    [primaryImage addSubview:secondaryImage];

    indicator = [[UIActivityIndicatorView alloc] initWithFrame:CGRectMake(30, 25, 25, 25)];
    indicator.center = CGPointMake(32, 25);
    //[indicator hidesWhenStopped];
    [indicator startAnimating];
    [secondaryImage addSubview:indicator];
}

-(void)dismissCoverImageView {

    [indicator stopAnimating];
    [indicator removeFromSuperview];
    [secondaryImage removeFromSuperview];
    [primaryImage removeFromSuperview]; 
}

and after that you can call         [self indicatorView];
and [self dismissCoverImageView]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T06:28:21.700

定义 UIScrollView 的 UIScrollViewDelegate。并在委托方法中`–(void)scrollViewDidScroll:(UIScrollView *)scrollView`更改 UIActivityIndi​​cator 对象的框架。

# ajax - 用 Jquery 回调替换 Ajax 回调

> ID：10546269
> 
> 赞同：0
> 
> 时间：2012-05-11T06:10:47.277
> 
> 标签：ajax, jquery

如何用 jquery 回调方法替换以下 ajax 回调方法？

```
function PostCall() {
  $('#txtRes').val('Please Wait......');
  var reqval = $('#txtReq').val();
  $.ajax({
    url: "myPage",
    type: 'post',
    data: "{'name':'" + reqval + "'}",
    async: true,
    contentType: "application/json",
    success: function (result) {
      $('#txtRes').val(result);
    }
  });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T06:41:59.117

只需在您的 ajax 语句末尾附加成功（例如）：

```
}.success(function(){
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T06:47:24.773

如果您想坚持使用 Ajax，请使用 jQuery 1.8 方式并尝试以下操作：

```
function PostCall() {
    $('#txtRes').val('Please Wait......');
    var reqval = $('#txtReq').val();
    $.ajax({
        url: 'myPage',
        type: 'post',
        data: "{'name':'" + reqval + "'}",
        dataType: 'json',
        async: true,
        contentType: "application/json",
    })
    .done(function(result) {
        $('#txtRes').val(result);
    })
    .fail(function(jqXhr, textStatus) {
        console.log('Error: ...' + textStatus);
    })
    .always(function() {
    });
} 
```

该`.done()`函数替换您的`success`回调。

如果 Ajax 不适合您，请查看：

*   [网络套接字](https://stackoverflow.com/questions/6753587/best-alternative-to-ajax?answertab=votes#tab-top)
*   Http POST 请求（需要重新加载整个页面）

# sharepoint-2010 - SharePoint 2010 中的沙盒解决方案和场解决方案有什么区别

> ID：10546270
> 
> 赞同：9
> 
> 时间：2012-05-11T06:11:10.517
> 
> 标签：sharepoint-2010

我是 SharePoint 2010 的新手。沙盒和场解决方案之间的主要区别是什么。你能给我5个不同的地方来记住吗？我用谷歌搜索，但有很多事情要理解。作为一个创业者，我想知道基本的区别。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-11T06:13:54.123

场解决方案：托管在 IIS 工作进程 (W3WP.exe) 中的场解决方案运行的代码会影响整个场。当您调试设置了沙盒解决方案属性的 SharePoint 项目时。

沙盒解决方案：托管在 SharePoint 用户代码解决方案工作进程 (SPUCWorkerProcess.exe) 中的沙盒解决方案运行的代码只能影响解决方案的网站集。因为沙盒解决方案不在 IIS 工作进程中运行，所以 IIS 应用程序池和 IIS 服务器都不必重新启动。Visual Studio 将调试器附加到 SharePoint 中的 SPUserCodeV4 服务自动触发和控制的 SPUCWorkerProcess 进程。SPUCWorkerProcess 进程不需要循环加载最新版本的解决方案。

更多请参考此[链接](http://msdn.microsoft.com/en-us/library/ee361616.aspx)

你也可以参考这个了解沙盒解决方案[goodlink](http://blah.winsmarts.com/2009-11-Top_10_things_to_consider_when_writing_SandBoxed_Solutions.aspx)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-11T06:29:43.307

农场解决方案：

*   场解决方案托管在 IIS 工作进程 (W3WP.exe) 中。
*   如果您在农场解决方案中运行任何代码，整个农场都会受到影响。
*   如果您部署任何功能或收回任何功能，整个应用程序池都会被回收。
*   由于它们被限定为场级别，因此它们具有对所有资源的完全信任访问权限。
*   当 Sand boxed Solution 属性设置为 False 时，选择 Build\Deploy 会将解决方案部署到 Farm Solution Gallery。

沙盒解决方案：

*   沙盒解决方案托管在 SharePoint 用户代码解决方案工作进程 (SPUCWorkerProcess.exe) 中。

尝试此链接 - 该进程在 CAS 策略下运行，该策略限制对沙箱外任何资源的编程访问。- 所以它永远不会重新启动 IIS 应用程序池。- 如果您运行任何代码，它只会影响解决方案的网站集。- 如果您有共享主机，这很有帮助。- 当沙盒解决方案属性设置为 True 时，选择构建\部署解决方案会将解决方案部署到网站集解决方案库。

部署的一个主要区别是安装和部署农场解决方案。沙盒解决方案已上传并激活。

此链接[http://www.enjoysharepoint.com/Articles/Details/differences-between-sandboxed-and-farm-solutions-i-66.aspx](http://www.enjoysharepoint.com/Articles/Details/differences-between-sandboxed-and-farm-solutions-i-66.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T15:15:06.640

一个主要区别是我们不能在沙盒解决方案中创建应用程序页面。因为应用程序页面存储在沙盒中`14\TEMPLATES\_LAYOUTS`，当我们部署为沙盒时，我们没有物理文件夹的权限。

*   我们也不能在 Sandbox soultions 中创建 VISUAL web 部件。
*   我们无法使用代码连接到外部 Web 服务或沙盒解决方案中的数据库
*   农场解决方案已安装和部署。沙盒解决方案已上传并激活。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-11T06:13:14.447

托管在 IIS 工作进程 (W3WP.exe) 中的场解决方案运行的代码**会影响整个场**。
托管在 SharePoint 用户代码解决方案工作进程 (SPUCWorkerProcess.exe) 中的沙盒解决方案运行的代码**只能影响解决方案的网站集**。
（来自[http://msdn.microsoft.com/en-us/library/ee361616.aspx](http://msdn.microsoft.com/en-us/library/ee361616.aspx)）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-23T14:57:29.357

通常我们使用沙盒解决方案进行在线共享点，例如 office365。在这种情况下，用户将获得一个可以使用的解决方案，但不是物理系统文件夹。所以我们不能将任何图像或内容放入 Layout 文件夹（它是受限制的）。最主要的是我们无法使用沙盒解决方案中的一些 SP 类功能（可以获取有关其他农场解决方案和服务器信息的信息）。因此，农场解决方案限制了这个 SP 类、系统文件夹以及 SPUCWorkerProcess 进程。

我们可以**在 2013 年将 Visual Webparts 创建为沙盒解决方案，**但我们必须确保类，并且我们永远不想使用布局文件夹等。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-17T05:14:57.667

农场解决方案属性：

*   场解决方案托管在 IIS 工作进程 (W3WP.exe) 中。
*   如果您在农场解决方案中运行任何代码，整个农场都会受到影响。
*   如果您部署任何功能或收回任何功能，整个应用程序池都会被回收。

由于它们被限定为场级别，因此它们具有对所有资源的完全信任访问权限。

当 Sand boxed Solution 属性设置为 False 时，选择 Build\Deploy 会将解决方案部署到 Farm Solution Gallery。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-06-02T14:04:30.137

一个主要区别是我们无法在沙盒解决方案中创建应用程序页面。因为应用程序页面存储在 14\TEMPLATES_LAYOUTS 中，当我们部署为沙盒时，我们没有物理文件夹的权限。

*   我们也不能在 Sandbox soultions 中创建 VISUAL web 部件。
*   我们无法使用代码连接到外部 Web 服务或沙盒解决方案中的数据库
*   农场解决方案已安装和部署。沙盒解决方案已上传并激活。

托管在 IIS 工作进程 (W3WP.exe) 中的场解决方案运行的代码会影响整个场。托管在 SharePoint 用户代码解决方案工作进程 (SPUCWorkerProcess.exe) 中的沙盒解决方案运行的代码只能影响解决方案的网站集。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2015-04-18T16:14:36.177

请查看包含有关农场解决方案和沙盒解决方案详细信息的更多详细信息的网站：

[http://www.techcontents.com/uncategorized/difference-farm-solutions-sandbox-solutions-sharepoint-2010/](http://www.techcontents.com/uncategorized/difference-farm-solutions-sandbox-solutions-sharepoint-2010/)

# iphone - UITableView 将内容拆分为部分

> ID：10546272
> 
> 赞同：0
> 
> 时间：2012-05-11T06:11:21.090
> 
> 标签：iphone, ios, uitableview

我有一个`UITableView`我列出了下面的代码。

如何将这些对象划分出来，如下所示？

***数学***
代数
几何
微积分

***科学***
综合 1
综合 2

这是代码：

```
- (void)viewDidLoad {

    NSArray *array = [[NSArray alloc] initWithObjects:@"Math",@"Science",@"English",@"Social Studies",@"Spanish",@"German",@"French",@"Biology",nil];

    self.listData = array;
    [array release];
    [super viewDidLoad];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T06:22:52.350

在 UITableView 对象的 UITableViewDataSource 中；

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
   return array.count;
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {
    return [array objectAtIndex:section];
} 
```

将为您的案例做“切片”部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T08:17:52.823

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
   return [yourarray count];
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {
    return [yourarray objectAtIndex:section];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T06:17:29.787

您必须使用分段表视图，这是实现此目的的最佳方式。您可以参考以下教程- [http://www.xcode-tutorials.com/uitableview-–-3-sectioned-table-view/](http://www.xcode-tutorials.com/uitableview-)

# zooming - 放大jfreechart后如何禁用自动范围？

> ID：10546281
> 
> 赞同：0
> 
> 时间：2012-05-11T06:12:18.270
> 
> 标签：zooming, range, jfreechart

嗨，我是 jfreechart 的新手。

我已经为 xAxis 和 yAxis 设置了手动范围。当我在图形上执行缩放操作时，它会被缩放。

但问题是，每当我缩小图表时，RangeAxis(yAxis values) 被设置为其默认值，而不是在 YAXIS 上设置我自己的值。

缩放时是否有任何属性可以禁用 yaxis 上的自动范围？

请帮助我，我一直在为这个问题而烦恼..

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-13T16:07:20.180

请参阅[`ChartPanel`文档](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/ChartPanel.html)：

```
chartPanel.setDomainZoomable(false);
chartPanel.setRangeZoomable(false); 
```

[正如另一个问题](https://stackoverflow.com/a/8715475/1098603)`ChartPanel.restoreAutoBounds()`中所建议的那样，您还可以考虑覆盖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-21T18:27:23.533

从谷歌搜索中偶然发现了这篇旧帖子。如果有人提出这个问题，我认为在这种情况下你想要的是：

```
plot.getRangeAxis().setAutoRange( false ); 
```

应该告诉 y 轴不要重新计算和覆盖您手动定义的范围，我相信这就是您所追求的。当你问这个问题时，不知道这是否存在于几年前，但它现在就在那里。

# android - 如何在 ListView 中设置标签按钮

> ID：10546282
> 
> 赞同：-4
> 
> 时间：2012-05-11T06:12:18.877
> 
> 标签：android, listview, button

我在 row.xml 文件中生成了 Button，因此它将创建与列表项相同的按钮数量，因此我想 setTag ListView 中的所有 Button 以 getTag 并从数据库中检索数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T06:34:57.740

假设您为 ListView 使用自定义适配器，您将能够为适配器的 getView() 中的每个按钮设置标签，

```
@Override
    public View getView(int pos, View convertView, ViewGroup parent) {

       convertView =    inflaterObject.inflate(R.layout.row,parent,false);
       Button tagButton=(Button)convertView.findviewbyId(R.id.buttonID);
       tagButton.setTag(pos);

      //To fetch the button Tag

      Log.i("Button Tab at Pos "+pos,tagButton.getTag()+"");

} 
```

# ruby-on-rails - 如何使用 Locomotive CMS（或任何其他）在 Ruby on Rails 上创建网站？

> ID：10546285
> 
> 赞同：1
> 
> 时间：2012-05-11T06:12:29.517
> 
> 标签：ruby-on-rails, web

我需要制作一个简单的网站——一些信息、文章、照片和视频。我希望它使用 Ruby on Rails。这是我第一个使用 RoR 的项目。

只要我发现我必须使用 CMS+host。Locomotive CMS + Heroku 主机对我来说看起来不错，但如果您知道更好（更快）的方式使其工作，我将感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T04:20:50.033

一开始看

[“开始使用 Locomotive”](http://doc.locomotivecms.com/guides/get-started/requirements)和[“如何使用 Locomotive CMS 从头开始​​构建网站”](http://www.tommyblue.it/2011/02/28/how-to-build-a-website-with-locomotive-cms-from-scratch/)

# c# - 使用 MVC 控制器替换 .ashx

> ID：10546288
> 
> 赞同：1
> 
> 时间：2012-05-11T06:12:38.880
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3

我需要一个控制器来处理文件上传。是否可以让处理程序直接将文本打印到页面而不是 return view(); ?

```
public ActionResult Upload(HttpContext context)
        {
            HttpPostedFile file = context.Request.Files["fileData"];

            Guid userGuid = (Guid)Membership.GetUser().ProviderUserKey;
            string userID = userGuid.ToString();

            string targetLocation = "D:\\inetpub\\wwwroot\\RTDOTNETMEMBER\\audio\\songs\\mp3\\" + userID + "\\" + file.FileName;

            file.SaveAs(targetLocation);

            Response.Write("Testing");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T21:49:41.757

只需将您的操作方法的返回类型更改为字符串并返回一个字符串。它看起来像这样：

> ```
>  public string ReturnString()
>     {
>         return "Just a string";
>     } 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T06:27:47.040

也许使用**ContentResult**可以完成这项工作：

```
return new ContentResult() { 
    Content = "Testing", 
    ContentEncoding = System.Text.Encoding.UTF32, 
    ContentType = "text/plain" 
}; 
```

# css - 使用浮动时页脚中心对齐

> ID：10546293
> 
> 赞同：-2
> 
> 时间：2012-05-11T06:12:59.550
> 
> 标签：css, css-float, footer

我正在使用 UL Li Elements 创建页脚链接，如链接[http://mink7.com/projects/cmrc/home.html](http://mink7.com/projects/cmrc/home.html)

我想居中对齐。页脚的所有元素。由于我使用的是 Float，我不确定如何实现它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T06:23:55.520

用过一次，不知道是不是[你](http://www.markrushworth.com/css-center-unordered-list-ulli-based-menu/)需要的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T06:26:21.160

使用`display:inline`or`inline-block`和父标签将文本居中对齐`text-align:center`，可能会对您有所帮助..

# mysql - 如何避免重复子查询？

> ID：10546301
> 
> 赞同：0
> 
> 时间：2012-05-11T06:13:31.183
> 
> 标签：mysql, subquery

我正在使用 MySql，这是我当前任务的示例：

```
SELECT a.name, SUM(a.points), (REPEATING_SUBQUERY)
FROM table_1 AS a
GROUP BY a.name
HAVING SUM(a.points) > (REPEATING_SUBQUERY)
OR (REPEATING_SUBQUERY) IS NULL 
```

无论如何将'REPEATING_SUBQUERY'设置为参数并加快处理时间？

谢谢！

# c# - 在 C# 中查找字符串中的所有模式索引

> ID：10546302
> 
> 赞同：5
> 
> 时间：2012-05-11T06:13:33.610
> 
> 标签：c#, regex, string, indexing

如何使用 c# 在字符串中查找模式的所有索引？

例如，我想`##`在这样的字符串中查找所有模式索引`45##78$$#56$$JK01UU`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-11T06:40:44.873

```
 string pattern = "##";
 string sentence = "45##78$$#56$$J##K01UU";
 IList<int> indeces = new List<int>();
 foreach (Match match in Regex.Matches(sentence, pattern))
 {
      indeces.Add(match.Index);
 } 
```

indeces 将有 2, 14

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T06:22:28.520

编辑代码以使其成为更简洁的功能。

```
public IEnumerable<int> FindAllIndexes(string str, string pattern)
{
    int prevIndex = -pattern.Length; // so we start at index 0
    int index;
    while((index = str.IndexOf(pattern, prevIndex + pattern.Length)) != -1)
    {
        prevIndex = index;
        yield return index;
    }
}

string str = "45##78$$#56$$JK01UU";
string pattern = "##";

var indexes = FindAllIndexes(str, pattern); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-11T06:22:33.980

您可以使用这样的正则表达式搜索来获取字符串中模式的所有索引。

```
string input = "45##78$$#56$$JK01UU", pattern = Regex.Escape("##");
Regex rx = new Regex(pattern);
var indices = new List<int>();
var matches = rx.Matches(s);
for (int i=0 ; i<matches.Length ; i++)
{
    indices.Add(matches[i].Index);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T06:26:52.890

另一个试图提高效率的方法：

```
public IEnumerable<int> FindPatternIndexes(string input, string search)
{
    var sb = new StringBuilder(input);

    for (var i = 0; search.Length <= sb.Length; i++)
    {
        if (sb.ToString().StartsWith(search)) yield return i;
        sb.Remove(0,1);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T06:38:06.320

经测试。工作。但是有点傻。

```
string foo = "45##78$$#56$$JK01UU";
char[] fooChar = foo.ToCharArray();

int i = 0;
bool register = false;

foreach (char fc in fooChar)
{
    if (fc == '#' && register == true)
    {
        MessageBox.Show("Index: " + (i-1));
    }
    else if (fc == '#')
    {
        register = true;
    }
    else
    {
        register = false;
    }
    i++;
} 
```

# java - 为什么我的代码 java.lang.StackOverflowError？

> ID：10546308
> 
> 赞同：1
> 
> 时间：2012-05-11T06:13:56.727
> 
> 标签：java, stack-overflow

```
private void findRute(int x1, int y1, int x2, int y2, int counter)
    {
        try
        {
            if((x1 == x2) && (y1 == y2))
            {
                if(this.min > counter)
                {
                    this.min = counter;
                }
            }
            else
            {
                if(map[x1-1][y1] == 0)
                {
                    this.findRute(x1 - 1, y1, x2, y2, counter + 1);
                }
                if(map[x1+1][y1] == 0)
                {
                    this.findRute(x1 + 1, y1, x2, y2, counter + 1);
                }
                if(map[x1][y1 + 1] == 0)
                {
                    this.findRute(x1, y1 + 1, x2, y2, counter + 1);
                }
                if(map[x1][y1 - 1] == 0)
                {
                    this.findRute(x1, y1 - 1, x2, y2, counter + 1);
                }
            }
        }
        catch(IndexOutOfBoundsException z)
        {

        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T06:15:04.750

假设地图完全由零组成，而您位于左上角。你要向右移动一步，然后向左移动一步，然后再向右移动一步，以此类推。

您需要以某种方式标记您已经访问过的单元格，以防止无限递归。

此外，捕获的`IndexOutOfBoundsException`不是一个好主意：

*   首先，我不认为它是好的风格：如果稍后你要在`try`块内添加一些也可以 throw`IndexOutOfBoundsException`的代码，你的代码将开始默默地失败；
*   其次，如果第一个检查 ( `map[x1-1][y1]`) 超出范围，您将跳过剩余的检查；

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-11T06:16:19.327

可能您尝试访问 -1 索引或长度+1

想想边缘发生了什么

# python - 如何使用python更新列表中的值的sqlite表？

> ID：10546309
> 
> 赞同：2
> 
> 时间：2012-05-11T06:13:58.627
> 
> 标签：python, sqlite, list

我想更新包含多行的sqlite上的表

```
tablenew  
id  status
a   old
b   ask
c   old
d   old 
```

ETC...

```
list = ['a', 'b', 'c']

cur.execute("update tablenew set status =? where id = ?", ('new',list)) 
```

如何在python中做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T06:14:42.550

使用`IN`运算符：

```
cur.execute("update tablenew set status = ? where id IN ?", ('new', list)) 
```

# java - JavaFX 2.0+ 中的 Outlook 类似日历控件

> ID：10546315
> 
> 赞同：4
> 
> 时间：2012-05-11T06:14:31.333
> 
> 标签：java, calendar, javafx-2

javaFX 2.0+ 中是否有类似日历控件的前景？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T08:29:49.060

我还没有遇到在纯 javaFX 2.0 中实现的日历控件。但是您可以选择其他方式：
1\. 将 Swing 日历组件集成到 JavaFX 中。参见例如[Migcalendar](http://migcalendar.com)。虽然它是商业的。
2\. webEngine加载并通过webView查看的HTML文件中的JS/JQuery日历控件。参见例如[Fullcalendar](http://arshaw.com/fullcalendar/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T06:52:51.120

你可以试试：

*   [http://javafxwidgets.blogspot.com/2012/01/simple-calendar-for-javafx-20.html](http://javafxwidgets.blogspot.com/2012/01/simple-calendar-for-javafx-20.html)
*   [http://netbeans.dzone.com/articles/creating-datepicker-control](http://netbeans.dzone.com/articles/creating-datepicker-control)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T09:10:02.877

与 Uluk 的第二个建议类似，除非您想自己构建一个纯 JavaFX 版本，否则我建议将[Google Calendar](https://www.google.com/calendar)之类的东西包装在[WebView](http://docs.oracle.com/javafx/2/api/javafx/scene/web/WebView.html)中并通过 Java/JavaScript 桥接对其进行编程。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-30T06:36:29.977

也许现在您使用的是 JavaFX 8。然后您可以尝试[CalendarFX](http://calendarfx.com)。

# math - 从 4x4 齐次变换矩阵中移除旋转

> ID：10546320
> 
> 赞同：5
> 
> 时间：2012-05-11T06:15:07.390
> 
> 标签：math, matrix

我正在研究一个变换矩阵，我想要做的是移除旋转变换并保留缩放、平移等。

我该怎么做呢？我正在寻求创建一个手动编程的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T06:19:12.743

您需要使用仿射矩阵分解，有几种方法各有利弊。你必须调查一下。这里有一些链接可以帮助您入门：

[http://callumhay.blogspot.com/2010/10/decomposing-affine-transforms.html](http://callumhay.blogspot.com/2010/10/decomposing-affine-transforms.html)

[http://www.itk.org/pipermail/insight-users/2006-August/019025.html](http://www.itk.org/pipermail/insight-users/2006-August/019025.html)

不过，这可能更简单或更复杂，具体取决于您转换的性质，我假设它是仿射的。但是如果它是线性/刚性的，那么这会容易得多，如果是透视变换，那么我想它会更复杂。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T06:23:12.963

如果您确定您的矩阵是旋转+平移+缩放，那么您可以提取您需要的参数：

```
rotation = atan2(m12, m11)
scale = sqrt(m11*m11 + m12*m12)
translation = (m31, m32) 
```

# 编辑

我没有注意到您对 3d 转换感兴趣，在这种情况下，旋转部分是令人讨厌的部分，但如果您只想平移和缩放...

```
translation = (m41, m42, m43)
scale = sqrt(m11*m11 + m12*m12 + m13*m13) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-14T03:18:00.340

4×4 齐次变换矩阵定义为：

```
| x2 |   | R11*SX R12*SY R13*SZ TX | | x1 |
| y2 | = | R21*SX R22*SY R23*SZ TY | | y1 |
| z2 |   | R31*SX R32*SY R33*SZ TZ | | z1 |
| 1  |   | 0      0      0      1  | |  1 | 
```

其中`(SX,SY,SZ)`是比例因子，`(TX,TY,TZ)`是平移因子，`Rij`是旋转系数。

由于您选择了最后一列，因此获得翻译是微不足道的。要获得缩放，您使用转换是旋转乘以对角缩放 ( `A=R*S`) 的属性，因此

```
tr(A)*A = tr(R*S)*(R*S) = tr(S)*tr(R)*R*S = tr(S)*S 
```

转置运算符在哪里`tr(A)`。计算比例因子

```
S2 = tr(A)*A 
```

并选择前三个对角项的平方根

```
SX = sqrt(S2(1,1))
SY = sqrt(S2(2,2))
SZ = sqrt(S2(3,3)) 
```

然后将新的转换组装为：

```
| SX   0   0  TX |
|  0  SY   0  TY |
|  0   0  SZ  TZ |
|  0   0   0   1 | 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-07T17:25:54.820

到目前为止，我不喜欢任何解决方案。3x4（或 4x4）仿射变换首先应用旋转，然后在目标帧中进行平移。该变换中的最后一个列向量是平移，但在目标帧​​中，而不是在原始帧中！因此，如果我们对变换进行反变换，那么我们可以将最终的列向量作为原始帧中的平移。

这是我的做法（在 numpy 中）：

```
b_to_a = np.linalg.inv(a_to_b)
a_to_b_only_translation = np.eye(4)
a_to_b_only_translation[:,3] = -b_to_a[:,3] 
```

# .net - 通过 curl 传递 IList<> 作为参数

> ID：10546322
> 
> 赞同：0
> 
> 时间：2012-05-11T06:15:15.303
> 
> 标签：.net, wcf, curl, azure

我创建了一个 Azure WCF 服务，我想为 RESTful 请求提供服务。其中一个需要一个 IList 列表作为参数，但我不能让它变得奇怪，我不知道我是否使用 curl 错误或定义了服务错误。我给你代码：

接口类：

```
 [OperationContract]
    [WebInvoke(Method = "POST", UriTemplate = "generate", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.WrappedRequest)]
    HttpResponseMessage Generate(IList<string> valami); 
```

service.svc.cs：

```
public HttpResponseMessage Generate(IList<string> valami)
    {

        HttpResponseMessage result = new HttpResponseMessage(HttpStatusCode.OK);
    } 
```

网络配置：

```
<configuration>
<configSections>
</configSections>
<system.diagnostics>
    <trace>
        <listeners>
            <add type="Microsoft.WindowsAzure.Diagnostics.DiagnosticMonitorTraceListener, Microsoft.WindowsAzure.Diagnostics, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
              name="AzureDiagnostics">
                <filter type="" />
            </add>
        </listeners>
    </trace>
</system.diagnostics>
<system.web>
    <compilation debug="true" targetFramework="4.0" />
</system.web>
<system.serviceModel>
    <behaviors>
        <serviceBehaviors>
            <behavior>
                <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
                <serviceMetadata httpGetEnabled="true"/>
                <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
                <serviceDebug includeExceptionDetailInFaults="false"/>
            </behavior>
        </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
</system.serviceModel>
<system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
</system.webServer> 
```

这就是我使用 curl 的方式：

```
curl.exe -i -X POST http://127.0.0.1:81/PowerpointService.svc/generate -H "Content-Type: application/json" -d @ilistcontent.json 
```

ilistcontent.json 是：["egy","ketto","harom","negy"]

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T06:44:13.410

我相信（仅从我在网上看到的示例）JSON 应该是`{"valami": ["egy", "ketto", "harom", "negy"]}`.

# c - 关于在视频中寻找学生

> ID：10546323
> 
> 赞同：5
> 
> 时间：2012-05-11T06:15:19.353
> 
> 标签：c, matlab, opencv, eye-tracking, iris-recognition

我现在正在做一个眼动追踪项目。在这个项目中，我在网络摄像头视频中跟踪眼睛（分辨率为 640X480）。

我可以在每一帧中定位和跟踪眼睛，但我需要定位瞳孔。我阅读了很多论文，其中大部分参考了 Alan Yuille 的可变形模板方法来提取和跟踪眼睛特征。任何人都可以用任何语言（matlab/OpenCV）帮助我编写此方法的代码吗？

我尝试过使用不同的阈值，但由于眼部区域的分辨率较低，因此效果不佳。我将非常感谢有关在视频中寻找瞳孔甚至虹膜的任何帮助。

![示例图像](../Images/50c339ea7e5cb03436b10637cf11db91.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T18:22:56.710

您需要做的是将网络摄像头转换为近红外摄像头。网上有很多教程。[试试这个](http://www.wikihow.com/Make-a-Webcam-Into-an-Infrared-Camera)。

从 NIR 摄像头拍摄的图像看起来像这样 -

![在此处输入图像描述](../Images/63f2168999d1e8a94f5a60bb12317ec0.png)

然后您可以使用 OpenCV 来设置阈值。

![在此处输入图像描述](../Images/7a05b579b882e6ec01eb05b84a17bc28.png)

然后使用 Erode 函数。

![在此处输入图像描述](../Images/5ce793f5384181c34c1baf140daf829c.png)

在此之后用一些颜色填充图像，以角作为种子点。

![在此处输入图像描述](../Images/eecdaf6b894b7970f79535f35ac26c15.png)

消除孔洞并反转图像。

![在此处输入图像描述](../Images/57857d1aed5e2bb55f43cc26a9fefb3e.png)

使用距离变换到最近的非零值。

![在此处输入图像描述](../Images/59df1a930c3799ff8461ffe6008fbe4c.png)

找到最大值的坐标并画一个圆。

![在此处输入图像描述](../Images/3786f13b75ab2f9b23466a7baf3f6d14.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-01T01:06:49.413

如果您仍在为此工作，请查看我的 OptimEyes 项目：[https ://github.com/LukeAllen/optimeyes](https://github.com/LukeAllen/optimeyes)

它使用 Python 和 OpenCV，并且可以很好地处理来自 640x480 网络摄像头的图像。您也可以在该页面上查看“理论论文”和演示视频。（这是今年早些时候斯坦福大学的一个课堂项目；它不是很完善，但我们尝试对代码进行一些注释。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T06:55:53.580

根据跟踪瞳孔的应用程序，我会为眼睛找到一个边界框，然后在该框内找到最暗的像素。

一些伪代码：

```
box left_location = findlefteye()
box right_location = findrighteye()
image_matrix left = image[left_location]
image_matrix right = image[right_location]
image_matrix average = left + right
pixel min = min(average)
pixel left_pupil = left_location.corner + min
pixel right_pupil = right_location.corner + min 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-03T20:26:36.947

在 Anirudth 建议的第一个答案中......
只需在阈值函数（第二步）之后应用 HoughCirles 函数。
然后您可以直接在瞳孔周围绘制圆圈，并使用半径（r）和眼睛中心（x，y）您可以轻松找到眼睛中心。

# iphone - Iphone - PhoneGap Build 失败并出现 7 个错误？

> ID：10546328
> 
> 赞同：1
> 
> 时间：2012-05-11T06:15:47.813
> 
> 标签：iphone, cordova

我有 xCode 3.2.6 并且我已经安装了 phonegap cordova 1.7.0 。我按照自述说明进行安装。使用模板创建新应用程序后，我运行该应用程序。但是构建失败，显示了大约 7 个错误。

/Users/xxx/Desktop/testPGAP/build/testPGAP.build/Debug-iphonesimulator/testPGAP.build/Script-304B58A110DAC018002A0835.sh：第2行：触摸：找不到命令

命令 /Developer/Library/Xcode/Plug-ins/CoreBuildTasks.xcplugin/Contents/Resources/copyplist 失败，退出代码为 127

和 libCordova.a、cordova.framework、cordovaLibTests.octest 和 cordovaLibApp.app 以红色显示。

可能是什么问题。克服这个问题的解决方案是什么。

# python - Tweepy 中的分页

> ID：10546330
> 
> 赞同：1
> 
> 时间：2012-05-11T06:15:58.033
> 
> 标签：python, django

我想在 tweepy 中对用户推文进行分页，以便每页仅显示 5 条推文或状态。我尝试添加以下代码，但它不起作用。现在的问题是，我怎样才能让它对每一页进行分页？

意见：

```
 def testdat(request):
      if request.method=="GET":
         treats=Cursor(api.list_timeline, owner=request.user, slug="").items(20)
         for treat in treats:
             treat.__getstate__()
             top=Twet(text= treat.text, author_screen_name= treat.author.screen_name, created_at= treat.created_at, source= treat.source) #Twet is the db created.
             top.save()
         treats=Cursor(api.list_timeline, owner=request.user, slug='').items(20)

         fab=Twet.objects.all()
         paginator=Paginator(fab, 5)
         try:
             page=request.GET.get('page', '1')
         except ValueError:
             page=1
         try:
           map=paginator.page(page)
         except (EmptyPage, InvalidPage):
             map=paginator.page(paginator.num_pages)
         return render_to_response('dashy.html',{'treats': treats, 'fab':fab, 'map':map},context_instance=RequestContext(request)) 
```

模板：

```
 {% block content %}

           {% for treat in treats %}  

            <center> <p> {{ treat.author.screen_name}} </p>
       <p>  {{ treat.text|safe }}  {{ treat.url }} </p>
       <p> {{ treat.created_at }}  Via: {{treat.source}} </p> </center>

           {% empty %} 

             <p> Sorry, No Update Could Be Loaded At This Time.  </p>
            {% endfor %} 

         <div class="pagination">
           <span class="step-links">
            {% if treats.has_previous %}
                  <a href="?page={{ treats.previous_page_number }}">previous</a>
            {% endif %}

              <span class="current">
              Page {{ treats.number }} of {{ treats.paginator.num_pages }}
             </span>

               {% if treats.has_next %}
                  <a href="?page={{ treats.next_page_number }}">next</a>
               {% endif %}
             </span>
           </div>
       {% endblock %} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T08:07:15.363

如果你不想在数据库中对保存为 Django 对象的推文进行分页，你可以使用[django-pagination](http://pypi.python.org/pypi/django-pagination)应用程序。

如果您想对 tweepy 返回的推文进行分页，[tweepy 光标教程](http://packages.python.org/tweepy/html/cursor_tutorial.html)可能会有所帮助。

编辑：上面的 tweepy 光标教程链接不起作用。访问[http://tweepy.readthedocs.org/en/v3.5.0/cursor_tutorial.html](http://tweepy.readthedocs.org/en/v3.5.0/cursor_tutorial.html) 获取教程。

# python - redis.py - 按特定字段对哈希进行排序

> ID：10546333
> 
> 赞同：4
> 
> 时间：2012-05-11T06:16:11.887
> 
> 标签：python, sorting, hash, redis

我正在使用**redis.py**并且想知道如何按给定字段排序。我已阅读文档并尝试使用谷歌搜索示例，但没有找到任何内容。

在这种情况下，我有一个时间列表和相应的温度。对于给定的“时间”范围，例如 1000 到 1100，我将返回给定时间范围内的最高 temp' 值，并将其分配给变量**hightemp**。同样，我也想用**lowtemp 来做**。

**是否可以在 redis 中执行此操作，而不是将所有内容再次转换回内存，就像我使用 python 排序的情况一样**

```
import redis
red = redis.Redis()

red.hmset('temperature', {'time':900, 'temp':123})
red.hmset('temperature', {'time':930, 'temp':123})
red.hmset('temperature', {'time':1000, 'temp':121})
red.hmset('temperature', {'time':1030, 'temp':125})
red.hmset('temperature', {'time':1100, 'temp':126})
red.hmset('temperature', {'time':1130, 'temp':127})
red.hmset('temperature', {'time':1200, 'temp':128}) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T08:08:50.537

在思考了一段时间之后，我不得不说这很棘手。我能想出的最佳解决方案是：将数据存储在一个[排序集中](http://redis.io/commands/#sorted_set)，`time`作为分数和`time:temperature`作为值（以保持值的唯一性）。然后你使用[ZRANGEBYSCORE](http://redis.io/commands/zrangebyscore)得到想要的子集：

```
redis 127.0.0.1:6379> zadd temperature 1000 1000:123
(integer) 1
redis 127.0.0.1:6379> zadd temperature 1050 1050:122
(integer) 1
redis 127.0.0.1:6379> zadd temperature 1100 1100:125
(integer) 1
redis 127.0.0.1:6379> zrangebyscore temperature 1000 1100
1) "1000:123"
2) "1050:122"
3) "1100:125"
redis 127.0.0.1:6379> 
```

然而，这些值将按分数排序，即温度。因此，您将不得不对客户端中的子集进行排序：

```
# Result from Redis
result = ['1000:123', '1050:122', '1100:125']
# Weed out the temperatures
temperatures = [int(x.split(':')[1]) for x in result]
# Get max and min temperatures
max_temp, min_temp = max(temperatures), min(temperatures) 
```

它不是超级漂亮，但它应该可以工作。Lloyd Moore 在他的回答中所说的是正确的，您可以按哈希中的字段进行排序，但[SORT](http://redis.io/commands/sort)命令不会让您轻松选择子集。如果我想到更好的解决方案，我会更新这个答案，或者我们只希望在评论中进行健康的讨论！

**编辑：**在 Didier Speza 的建议之后从 python 更改`sort()`为`max`/ 。`min`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T07:43:35.117

每次运行 red.hmset 时，都会覆盖温度值。鉴于您想要对这些值进行排序，您需要为每个条目指定一个唯一标识符。

温度：1，温度：2 ...

然后你可以使用 redis 排序命令

SORT mylist BY weight_* GET object_*

在外键上。

希望在某种程度上有所帮助。如果您需要更多帮助，请告诉我。

# sorting - uniq 命令 - 如何获取分隔符选项并根据列进行搜索？

> ID：10546337
> 
> 赞同：1
> 
> 时间：2012-05-11T06:16:34.330
> 
> 标签：sorting, command, uniq

下面是排序的（基于第一列）选项卡划定的名为 file.txt 的文件

```
barbie  325 social activist
david   214 IT professional
david   457 mathematician
david   458 biologist
john    85  engineer
john    98  doctor
peter   100 statistician 
```

我想使用选项在第一列的基础上运行 uniq 命令（-t 和 -k 在排序命令的情况下）

```
uniq -d (-t$'\t' -k1,1) file.txt [this is incorrect syntax in bracket , but i want to run it in similar way] 
```

好吧，这很容易，但我无法找到自己的方式。

这样我就可以得到输出：

```
david   214 IT professional
john    85  engineer 
```

帮助我，在此先感谢:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T06:19:22.337

Debian`uniq`曾经有此选项，但出于兼容性原因已将其删除。您可以轻松创建自己的 AWK 或 Perl 脚本。这仅打印第一次出现第一个字段的行：

```
awk -F '\t' '!x[$1]++' file.txt 
```

`x[$1]`是第一个字段 ( `$1`) 内容的关联数组；它为每一行递增，但它也是指定是否应打印当前行的条件；使用否定，只有当这个字段值之前没有遇到过时才为真。（提醒：AWK 脚本的一般形式是零个或多个，`condition { action }`两个部分都是可选的；如果`{action}`缺少，则默认操作是打印当前行。[如果缺少条件，则无条件执行操作。]）

# ruby-on-rails - 数据库索引如何使搜索更快

> ID：10546340
> 
> 赞同：3
> 
> 时间：2012-05-11T06:16:46.087
> 
> 标签：ruby-on-rails, database

我正在阅读rails教程（http://ruby.railstutorial.org/book/ruby-on-rails-tutorial#sidebar-database_indices），但对数据库索引的解释感到困惑，基本上作者建议而不是搜索O（ n）通过电子邮件列表（用于登录）创建索引要快得多，给出以下示例：

> 要理解数据库索引，考虑书籍索引的类比会很有帮助。在一本书中，要查找给定字符串的所有出现，比如“foobar”，您必须扫描每个页面以查找“foobar”。另一方面，使用图书索引，您只需在索引中查找“foobar”即可查看包含“foobar”的所有页面。 **来源**： [http:](http://ruby.railstutorial.org/chapters/modeling-users#sidebar:database_indices) //ruby.railstutorial.org/chapters/modeling-users#sidebar:database_indices **

所以我从那个例子中了解到，单词可以在文本中重复，所以“索引页”由唯一的条目组成。但是，在 railstutorial 站点中，登录设置为每个电子邮件地址对一个帐户都是唯一的，那么当我们最多可以有每封电子邮件出现一次时，如何使用索引使其更快呢？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T06:22:53.980

索引不是（很多）关于重复的。这是关于秩序的。

当您进行搜索时，您希望有某种顺序，让您（例如）进行二进制搜索以在对数时间内查找数据，而不是搜索每条记录以找到您关心的数据（即不是唯一的索引类型，但它可能是最常见的）。

不幸的是，您只能按单一顺序排列记录本身。

索引仅包含您将用于搜索的数据（或其子集），以及指向包含实际数据的记录的指针（或某种类型）。这允许您（例如）根据您关心的尽可能多的不同字段进行搜索，并且仍然能够对所有这些字段进行二进制搜索，因为每个索引都按该字段的顺序排列。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-11T06:22:25.973

因为数据库和给定示例中的索引是*按*字母顺序排序的。原始表/书不是。然后想一想：如果知道索引已排序，您如何搜索*它*？我猜你没有从“A”开始阅读到你感兴趣的点。相反，您大致跳到 POI 并从那里开始搜索。基本上数据库可以与索引相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T06:25:11.237

它更快，因为索引只包含来自相关列的值，因此它分布在比整个表更少的页面上。此外，索引通常包括额外的优化，例如哈希表，以限制所需的读取次数。

# hibernate - 错误：运算符不存在：字符变化 = bytea

> ID：10546344
> 
> 赞同：17
> 
> 时间：2012-05-11T06:17:22.943
> 
> 标签：hibernate, postgresql

我在 postgres 中有一个具有以下结构的表

```
CREATE TABLE rpaul."HK_LOGIN_DETAILS"
(
  "HK_LOGIN_DETAILS_ID" bigint NOT NULL,
  "HK_LOGIN_DETAILS_USERNAME" character varying(10) NOT NULL,
  "HK_LOGIN_DETAILS_PASSWORD" character varying(50) NOT NULL,
  CONSTRAINT "HK_LOGIN_DETAILS_PK" PRIMARY KEY ("HK_LOGIN_DETAILS_ID" ),
  CONSTRAINT "HK_LOGIN_DETAILS_UK" UNIQUE ("HK_LOGIN_DETAILS_USERNAME" )
) 
```

该表的休眠映射如下所述

```
<hibernate-mapping package="net.rpaul.projects.homekeeping.domain.login">
    <class name="LoginDetails" table="`HK_LOGIN_DETAILS`">
        <id name="id" column="`HK_LOGIN_DETAILS_ID`" type="long">
            <generator class="assigned" />
        </id>
        <property name="userName" type="string" column="`HK_LOGIN_DETAILS_USERNAME`" not-null="true" />
        <property name="password" type="string" column="`HK_LOGIN_DETAILS_PASSWORD`" not-null="true" />
    </class>
</hibernate-mapping> 
```

在 LoginDetails.java 中，我将 id 字段声明为 long，将 userName 和 password 字段声明为 String。仍然当我尝试执行以下操作时

```
List list =  getHibernateTemplate().find("from LoginDetails ld where ld.userName = ?", userName); 
```

我明白了

> 错误：运算符不存在：字符变化 = bytea

我不明白出了什么问题。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-12T21:24:36.920

我认为您应该检查您的变量“userName”是否不为空。在这种情况下，我遇到了这个消息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-09-29T10:33:56.133

似乎 Hibernate 出于某种原因将类型参数作为 bytea（或者更确切地说，可能是 java.sql.Types.BLOB）发送，而不是让服务器推断或将其设置为文本（java.sql.Types.细绳）。这是与[参数上的解决方案 JPA lower() 函数类似的问题](https://stackoverflow.com/questions/27663235/jpa-lower-function-on-parameter)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-11-03T11:59:51.947

*这个问题很老，但如果有人需要，我仍然分享我在 Spring Boot 中使用的解决方案。*

您可以使用以下 WHERE 条件来处理 NULL 值或在 Postgres 查询中使参数可选。

```
SELECT * FROM table 
WHERE 
          (?1 is null OR column1 = cast(?1 AS text)) 
          AND 
          (?2 is null OR column2 = cast(?2 AS text)) 
```

如果 column1 和 column2 作为 NULL 传递，则此处整个 WHERE 条件将为 TRUE。如果不是 NULL，则在查询中将考虑 column1 和 column2。

> **?1 为空或 column1 = ?1 ：**将检查传递的值是否为空，然后整个 where 条件为真（如果为空，则不检查第二个条件 [column1 = null] - PG 优化）
> 
> **cast(?1 AS text) ：**如果由于某种原因将值作为 bytea 传递，则可能很有用。如果传递的值是真正的 null，如果不强制转换，它仍然会给出“字符变化 bytea”错误。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-02-23T14:47:28.660

对于本机查询，我们可以使用

```
SELECT * FROM table 
WHERE 
          (:paramName is null OR column1 = cast(:paramName AS text)) 
```

接着

`query.setParamter(paramName,value)`;

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-24T14:37:31.350

故障排除清单：

#1：根据您使用的数据库类型，您可能希望使用以下 SQL 命令查找列名及其各自的数据类型：

```
SELECT
   table_name,
   column_name,
   data_type
FROM
   information_schema.columns
WHERE
   table_name = 'the-name-of-the-table-in-the-database'; 
```

预期结果将为您提供三列；尤其是“data_type”列。

确保您的 Pojo 类和相应的数据类型正确匹配。

注意：数据库里面的表中的bigint（数据类型）可以与Long无缝匹配。带 int 的整数。字符随 String 或主要的 java 类而变化，例如。一个存储枚举的类，等等。

确认上述后，进行下一步检查 -> 故障排除：

#2：此故障排除的主要检查是检查所有数据类型是否完全匹配。并注意传递给查询的参数。

传递枚举或任何其他数据类型或不符合 SQL 数据类型的枚举类型可能会触发“未映射”错误，即使 pojo 类与数据库中的表结构完全匹配。

pojo 示例：UserAccountBalance.class

```
import io.swagger.v3.oas.annotations.media.Schema;
import lombok.*;

@Builder//Lombok
@AllArgsConstructor(access = AccessLevel.PRIVATE)
@NoArgsConstructor(access = AccessLevel.PUBLIC)
@Data//Lombok
@EqualsAndHashCode(callSuper = true)
@ToString(callSuper = true)
@Schema
@Entity(name = "user_account_balance")
@Table(name = "user_account_balance")
public class UserAccountBalance {

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    @Column(name = "id")
    private long id;

    @NotNull
    @Column(name = "username", nullable = false)
    private String userName;

    @NotNull
    @Column(name="currency_code", nullable = false)
    @Enumerated(EnumType.STRING)
    private CurrencyCode currencyCode;

    @NotNull
    @Column(name = "balance", nullable = false)
    private BigDecimal balance;

//Could be placed into and AuditModel class
    @Column(name = "datecreated", nullable = false, updatable = false)
    @JsonIgnore
    @DateCreated
    @CreationTimestamp
    private LocalDateTime dateCreated;

    @Column(name = "date_updated", nullable = false, updatable = false)
    @JsonIgnore
    @DateUpdated
    private LocalDateTime dateUpdated;

    @NotNull
    @Column(name = "active")
    @JsonIgnore
    private int active;

    @Column(name = "deleted")
    @JsonIgnore
    private int deleted;

} 
```

存储库类：

//选项1：UserAccountBalanceRepository.class

```
@Repository
public abstract class UserAccountBalanceRepository implements CrudRepository<UserAccountBalance, Long> {

    private final EntityManager entityManager;

    public UserAccountBalanceRepository(@CurrentSession EntityManager entityManager){
        this.entityManager = entityManager;
    }

    @Transactional(readOnly = true)
    @Query(
            value="SELECT uab.*" +
                    " FROM public.user_account_balance uab" +
                    " WHERE (currency_code =cast(:currencyCode AS text)" +
                    " AND userName =:userName" +
                    " AND active =:active)",
            countQuery = "SELECT uab.*" +
                    " FROM public.user_account_balance uab" +
                    " WHERE (currency_code = cast(:currencyCode AS text)" +
                    " AND userName =:userName" +
                    " AND active =:active)",
            nativeQuery = true
    )
    public abstract Optional<UserAccountBalance> findByUserAccountBalance_UserName_And_CurrencyCode(
            String userName,
            CurrencyCode currencyCode,
            int active
    );

} 
```

//选项2：UserAccountBalanceRepository.class

```
@Repository
public abstract class UserAccountBalanceRepository implements CrudRepository<UserAccountBalance, Long> {

    private final EntityManager entityManager;

    public UserAccountBalanceRepository(@CurrentSession EntityManager entityManager){
        this.entityManager = entityManager;
    }

    @Transactional(readOnly = true)
    @Query(
            value="SELECT uab.*" +
                    " FROM public.user_account_balance uab" +
                    " WHERE (currency_code =:currencyCode" +
                    " AND userName =:userName" +
                    " AND active =:active)",
            countQuery = "SELECT uab.*" +
                    " FROM public.user_account_balance uab" +
                    " WHERE (currency_code = :currencyCode" +
                    " AND userName =:userName" +
                    " AND active =:active)",
            nativeQuery = true
    )
    public abstract Optional<UserAccountBalance> findByUserAccountBalance_UserName_And_CurrencyCode(
            String userName,
            String currencyCode,/*this is what truly worked out for me perfectly*/
            int active
    );

} 
```

#3。测试并再次测试。如果问题仍然存在，请耐心等待并再次查看所有变量和类。

#4。如果使用选项 #3 进行故障排除仍然没有帮助，请考虑散散步，稍作休息，并以全新的眼光从故障排除 #1 中重新审视它。

我希望这有帮助。欢呼与和平。

# .net - 奇怪的解析错误

> ID：10546346
> 
> 赞同：0
> 
> 时间：2012-05-11T06:17:35.423
> 
> 标签：.net

```
<asp:HiddenField ID="hidden<%# Eval("WeekNo") %>" Value="hidden" runat="server" /> 
```

给我：

> 解析器错误消息：服务器标记格式不正确。

谁能告诉我为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T06:19:36.500

我不明白为什么要动态更改隐藏字段的 ID，而不是在值中传递此信息或使用 CSS 类（如果您需要在 javascript 中访问它）。不幸的是，您不能使用动态表达式来设置`ID`控件的属性。

# hibernate - 找不到 hibernate.cfg.xml

> ID：10546357
> 
> 赞同：1
> 
> 时间：2012-05-11T06:18:40.890
> 
> 标签：hibernate

我是hibernate的新手..我正在使用netbeans IDE，我设置了所有东西..我将所有东西（配置和映射文件）放入一个名为**myfirsthibernate**的包中，同时运行示例应用程序它显示错误找不到文件**hibernate.cfg.xml**。但它在**myfirsthibernate**包中。如何纠正这一点以及为什么会这样？

请帮助我，谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T07:58:18.857

默认情况下，hibernate.cfg.xml 文件放在 /src/java/resource （默认在类路径目录中）。你能试着把cfg文件放在那里吗？

您能否也给我一些有关您项目的目录结构的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T06:30:55.220

hibernate.cfg.xml 也需要在您的类路径中。也许编写一个 ant 任务来为您自动执行此复制。另外，请参阅[hibernate.cfg.xml not found](https://stackoverflow.com/questions/8196370/hibernate-cfg-xml-not-found)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-07T16:13:02.427

假设您的项目结构看起来像这样`src>myfirsthibernate>[some files]`，[Hibernate 文档](http://docs.jboss.org/hibernate/core/3.3/reference/en/html/session-configuration.html#configuration-xmlconfig)`hibernate.cfg.xml`说 hibernate 期望在默认情况下在类路径的根目录中找到该文件。所以为了像这样开始休眠

`SessionFactory sf = new Configuration().configure().buildSessionFactory();`

你的目录结构应该是这样的

```
>src
   >myfirsthibernate
      >[your entity classes and mapping files here]
   >hibernate.cfg.xml 
```

如果您希望将文件保留在`myfirsthibernate`package 下，则需要在配置期间添加它的位置：

`SessionFactory sf = new Configuration() .configure("myfirsthibernate/hibernate.cfg.xml") .buildSessionFactory();`

# html - 谷歌翻译工具对输入类型文本值不起作用？

> ID：10546360
> 
> 赞同：0
> 
> 时间：2012-05-11T06:18:57.543
> 
> 标签：html, google-translate

我在我的页面上为网站使用谷歌翻译工具，它工作正常，但是当我在带有表单的页面上检查相同的内容时，它并没有改变输入字段中写入的值。

我是否遗漏了什么或谷歌翻译工具没有做到这一点？

PFB 我的测试片段：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
<title>Untitled Page</title>
</head>
<body>
<div id="google_translate_element"></div><script>
                                         function googleTranslateElementInit() {
                                             new google.translate.TranslateElement({
                                                 pageLanguage: 'en',
                                                 autoDisplay: false,
                                                 layout: google.translate.TranslateElement.InlineLayout.SIMPLE
                                             }, 'google_translate_element');
                                         }
</script><script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
<form>
<input type="text" value="system" />

<select>
<option value="welcome">Welcome</option>
</select>
<input type="radio" />Right?
<input type="submit" value="Submit" />
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T08:08:56.513

`input`显然，即使在 HTML 源代码中设置，Google 网站翻译器也不会翻译元素值。我也用一个`textarea`元素进行了测试，结果相同。但是，它*确实*通过表单字段以外的元素翻译用户输入。可以使用属性创建此类元素，该属性[在现代浏览器中得到](http://caniuse.com/#feat=contenteditable)`contenteditable`广泛支持（尽管不是很普遍）。但是需要额外的措施来使翻译后的文本与表单一起提交（因为它不会在表单字段中）。

在我的[《用 JavaScript 和 Globalize.js 走向全球](http://www.bytelevelbooks.com/books/global_javascript.html)》一书中，我描述了自动翻译中的一些问题，并建议虽然在网页上为其设置小部件可能不是一个好主意，但它可能对*用户输入*很有用. 例如，考虑一个以英语进行讨论的论坛。您可以添加功能，让每个人都使用他的母语，将其立即翻译成英语，检查并提交。有一个简单的演示： [用户输入的翻译](http://www.bytelevelbooks.com/code/javascript/transinput.html)。（它使用 contenteditable 元素并将翻译后的内容写入隐藏字段。）

# php - 通过 Graph API 而不是评论插件在您的网站上发表 Facebook 评论？

> ID：10546362
> 
> 赞同：1
> 
> 时间：2012-05-11T06:19:00.667
> 
> 标签：php, facebook-graph-api, facebook-comments

Facebook 提供了评论插件，用于向任何网站添加评论：

[https://developers.facebook.com/docs/reference/plugins/comments/](https://developers.facebook.com/docs/reference/plugins/comments/)

是否可以通过 Graph API 获取和发布评论到您的网站？

我的“评论网址”是`http://www.examplesite.com/test/`. 如果我使用上述评论插件向我的网站添加评论，我可以通过以下 URL 访问所有评论：

[https://graph.facebook.com/comments/?id=http://www.examplesite.com/test](https://graph.facebook.com/comments/?id=http://www.examplesite.com/test)

现在，有没有办法通过 Graph API 发布和获取对此的评论？我假设我的“帖子 ID”是`http://www.examplesite.com/test`. 我正在尝试像这样使用 PHP SDK：

```
$params = array( 'message' => 'Hello World!!' );
$facebook->api("http://www.examplesite.com/test/comments", "POST", $params); 
```

还尝试获取评论：

```
$comments = $facebook->api("http://www.examplesite.com/test/comments", "GET"); 
```

没有任何一个骰子。无法发表评论或获取评论。

难道我做错了什么？还是无法通过 API 向您的网站添加评论？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T00:44:51.100

不知道评论帖子。但您可以通过 API 将评论作为 assoc 数组获取，如下所示：

```
 $url = 'http://test.com';
    $arr = $this->facebook->api('comments/?ids='.$url); 

    echo("<pre>");
    print_r($arr[$url]['comments']['data']); 
```

# wolfram-mathematica - Mathematica - 我可以使用单个变量定义代码块吗？

> ID：10546364
> 
> 赞同：0
> 
> 时间：2012-05-11T06:19:03.007
> 
> 标签：wolfram-mathematica

自从我使用 Mathematica 已经有一段时间了，我查看了整个帮助菜单。我认为我遇到的一个问题是我不知道到底要查找什么。我有一段代码，包括附加列表和做基本数学，我想将其定义为单个变量。

我的目标是遍历一个序列，并且在需要时我想调用一段代码，我将在整个循环中多次使用该代码块。我猜我应该把它全部放在一个循环中，但我希望能够将它全部定义为一个函数。

看起来这应该是一个简单直接的过程。我错过了一些简单的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T06:44:16.837

这是 Mathematica 中函数定义的基本格式。

```
 myFunc[par1_,par2_]:=Module[{localVar1,localVar2}, 
statement1; statement2; returnStatement ] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T11:29:00.247

你的问题并不完全清楚，但我解释说你想要这样的东西：

```
facRand[] :=
 ({b, x} = Last@FactorInteger[RandomInteger[1*^12]]; Print[b]) 
```

现在每次`facRand[]`调用一个新的随机整数被分解，全局变量被赋值，`b`并且`x`值`b`被打印出来。这也可以通过以下方式完成`Function`：

```
Clear[facRand]

facRand =
 ({b, x} = Last@FactorInteger[RandomInteger[1*^12]]; Print[b]) & 
```

这也称为 with `facRand[]`。这种形式是标准的，允许在`facRand`不触发评估的情况下寻址或传递符号。

# xcode - 如何在 Xcode 4.3.2 上将框架添加到项目中

> ID：10546374
> 
> 赞同：18
> 
> 时间：2012-05-11T06:19:38.020
> 
> 标签：xcode, frameworks, xcode4.3

我如何向 XCode 4.3.2 项目添加框架？

因为 XCode.app 中的 SDK 目录，我无法通过“将文件添加到 ...”来添加框架

**更新：**

对于此操作，您可以执行以下步骤：

1.  单击左侧表格中的项目

2.  单击右表上的“构建阶段”

3.  单击“将二进制文件与库链接”

4.  点击“+”

5.  找到需要的框架并点击“添加”

以及您在项目中需要的框架。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-11T06:23:07.407

以下是步骤-

1) 在导航区点击项目

2) 选择“目标”选项卡

3）点击“构建阶段”

4) 选择“将二进制文件与库链接”

然后您可以在该区域底部看到“+”按钮。您现在可以添加所需的框架。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-10T00:40:07.700

尽管 rishi 的回答效果很好，但这并没有将框架添加到 Project Navigator 的“Frameworks”文件夹中。

另一种方法是右键单击项目导航器的“框架”文件夹中的任何现有框架，选择“在 Finder 中显示”，然后只需拖放要添加的框架。

当它询问您要如何添加框架时，请确保将其添加到目标中，然后将其添加到构建阶段的“与库链接”部分中。

**更新：**

这只是为那些正在寻找框架以显示在他们的“框架”文件夹中的人添加框架的一种便捷方法。

阅读有关未选择“复制到组的目标文件夹”复选框的评论，因为它会不必要地将其添加到项目文件夹的根目录中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-03T04:46:07.180

您可以通过以下方式将框架添加到您的应用程序。

单击项目面板并单击 xcode 项目并选择目标。

选择 Targets 后，单击 Build Phases。

在 Build Phases 中，您会看到类似的活动列表。a) 目标依赖 b) 编译器源 c) 将二进制文件与库链接 d) 复制捆绑资源

单击面板展开后，请单击 Link Binary with Libraries，您可以看到框架列表。现在您必须单击 +（按钮），然后您可以选择和添加现有框架。

希望它会帮助你。

# symfony - 通过 Symfony2 中的命令行执行时，CRON 作业不起作用

> ID：10546379
> 
> 赞同：2
> 
> 时间：2012-05-11T06:20:29.083
> 
> 标签：symfony, cron, doctrine-orm

我目前正在尝试通过在终端中执行命令来执行 CRON 作业。但它会引发以下错误。

```
PHP Fatal error:  Call to a member function has() on a non-object in /MyProject/vendor/symfony/src/Symfony/Bundle/FrameworkBundle/Controller/Controller.php on line 161 
```

这是我在命令文件中的代码。

```
namespace MyProject\UtilityBundle\Command;
use Symfony\Component\Console\Command\Command;
use Symfony\Component\Console\Input\InputArgument;
use Symfony\Component\Console\Input\InputInterface;
use Symfony\Component\Console\Input\InputOption;
use Symfony\Component\Console\Output\OutputInterface;

    class projectOngoingCommand extends Command
    {
        protected function configure()
        {
            $this
                ->setName('projectOngoingEstimation:submit')
                ->setDescription('Submit Ongoing Project Estimation')

                ;
        }

        protected function execute(InputInterface $input, OutputInterface $output)
        {

           ;
            $projectController= new \MyProject\ProjectBundle\Controller\DefaultController();  

             $msg = $projectController->updateMonthlyOngoingAllocation();

            $output->writeln($msg);
        }
    } 
```

这是我在默认控制器中的代码。

```
// cron job code
    public function updateMonthlyOngoingAllocation() {

              $em = $this->getDoctrine()->getEntityManager();
        $project = $this->getDoctrine()->getRepository('MyProjectEntityBundle:Project')
                    ->getAllOngoingProjectList();
       return "hello";
      } 
```

使用命令调用此方法成功

`sudo php app/console projectOngoingEstimation:submit`

但它在第一行抛出错误。IE

```
 $em = $this->getDoctrine()->getEntityManager(); 
```

当我尝试从控制器中的另一个 Action 方法调用该函数时，它工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T09:54:06.430

我认为您在这里使用的策略不正确。您尝试在命令中调用您的控制器，并且根据您收到的错误消息，这似乎不是一个好主意。

你应该创建一个服务并在你的控制器和命令中调用这个服务。

```
class ProjectManager
{
    private $em;

    public function __construct(EntityManager $em) {
        $this->em = $em;
    }

    public function updateMonthlyOngoingAllocation() {
        $project = $this->em->getRepository('MyProjectEntityBundle:Project')
                ->getAllOngoingProjectList();
        return "hello";
    }    
} 
```

然后在 config.yml

```
services:
    project_manager:
        class: MyBundle\Manager\ProjectManager
        arguments: ["@doctrine.orm.entity_manager"] 
```

现在您可以调用此服务：

*   从你的控制器`$this->get('project_manager')->updateMonthlyOngoingAllocation()`
*   从您的命令（如果您的类从而`ContainerAwareCommand`不是扩展`Command`）使用`$this->getContainer()->get('project_manager')->updateMonthlyOngoingAllocation()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-12T07:11:48.423

您只需执行以下操作。无需注入任何东西，因为控制台是容器感知的。

```
 public function updateMonthlyOngoingAllocation() {
                  $project = $this->getContainer()
                           ->get('doctrine')
                           ->getRepository('MyProjectEntityBundle:Project')
                           ->getAllOngoingProjectList();
           return "hello";
          } 
```

# mysql - MYsql分组计数查询

> ID：10546381
> 
> 赞同：1
> 
> 时间：2012-05-11T06:20:41.460
> 
> 标签：mysql

任何人请帮助我。

我有一个查询需要提取数据，这些数据必须显示流程中某个模型的详细信息。

这是我的查询。

```
 select
x.Sequence as 'Sequence',
x.Process as 'Process',
x.pdt as 'Production Date',
x.mdl as 'Model',
count(x.bigbook) as 'Bigbook Count',
x.sb as 'Smallbook'
from
(
select distinct
'1' as 'Sequence',
'Cutting' as 'Process',
cut_pdt as 'PDT',
cut_shf as 'Shift',
cut_mdl as 'Mdl',
cut_bbn as 'Bigbook',
 count(cut_sbn) as 'SB'
from sum_cut_001 group by cut_bbn) x
group by x.mdl 
```

它显示的那个结果是这样的。

```
---------|---------|-----------------|-------|----------------|------------------|
Sequence | Process | Production Date | Model | Big book Count | Small Book Count |
---------|---------|-----------------|-------|----------------|------------------|
1        | Cutting |    2012-01-30   |  GSX1 |     3          |        12        | 
```

每个模型有 1 个大本，每个大本有 18 个小本

因此，如果我有 3 本 GSX1 型号的 bigbook，那么输出应该是。

```
---------|---------|-----------------|-------|----------------|------------------|
Sequence | Process | Production Date | Model | Big book Count | Small Book Count |
---------|---------|-----------------|-------|----------------|------------------|
1        | Cutting |    2012-01-30   |  GSX1 |     3          |        54        | 
```

请帮助我如何正确查询它。

预先感谢。

# c# - 按日期排序列表框，并将日期显示为“dddd”后跟日期？

> ID：10546386
> 
> 赞同：0
> 
> 时间：2012-05-11T06:21:12.713
> 
> 标签：c#, linq, windows-phone-7, listboxitems

我想用今天、明天和后天的祈祷时间填充一个列表框。XML 有日期和月份的值，而不是年份。除非明天或后天是在下一年，否则查询没有问题。然后列表首先显示 01.01 的值，然后是 02.01 和最后一个 31.12。

问题：1）如何对其进行排序，以便根据日期升序排序。2）如何修复“日期”，使其值显示为星期一 01.01.2012 而不是“01.01.2012 12:00AM” 2）如何将 01.01 和 02.01 显示为 2013 年而不是 2012 年，因为年份会发生变化。

这在我的列表框中显示如下：

```
01.01.2012 12:00AM
Fajr 07:00
Soloppgang 09:19
etc..

02.01.2012 12:00AM
Fajr 07:00
Soloppgang 09:19
etc..

31.12.2012 12:00AM
Fajr 07:00
Soloppgang 09:19
etc... 
```

我想要的结果是全年实现，而不是在 nextDay 或thirdDay 是在下一年。

我的 XML：

```
 <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
    <WIMPrayerTable>
        <Prayertime
            Day ="1" 
            Month="1" 
            Fajr="07:00" 
            Soloppgang="09:19" 
            Zohr="12:26" 
            Asr="13:36"
            Maghrib="15:26" 
        />

        <Prayertime
            Day ="2" 
            Month="1" 
            Fajr="07:00" 
            Soloppgang="09:19" 
            Zohr="12:25" 
            Asr="13:33"
            Maghrib="15:23" 
            Isha="17:39" 
        /> 
```

//一年中剩下的时间介于两者之间。我没有在这里展示

我的课：

```
public class Bonn3
{

    public string Fajr { get; set; }
    public string Soloppgang { get; set; }
    public string Zohr { get; set; }
    public string Asr { get; set; }
    public string Maghrib { get; set; }
    public string Isha { get; set; }
    public string Jumma { get; set; }
    public DateTime Date { get; set; }
  } 
```

我的查询：

```
DateTime myDay = DateTime.Now;
DateTime NextDay = myDay.AddDays(1);
DateTime thirdDay = myDay.AddDays(2);

var filteredData = from c in loadedCustomData.Descendants("Bønnetid")
   where c.Attribute("Dag").Value == myDay.Day.ToString() && c.Attribute("Måned").Value == myDay.Month.ToString()
|| c.Attribute("Dag").Value == NextDay.Day.ToString() && c.Attribute("Måned").Value == NextDay.Month.ToString()
|| c.Attribute("Dag").Value == thirdDay.Day.ToString() && c.Attribute("Måned").Value == thirdDay.Month.ToString() 

select new Bonn3()
{
Date = new DateTime(myDay.Year,int.Parse(c.Attribute("Måned").Value),int.Parse(c.Attribute("Dag").Value)),

Fajr = c.Attribute("Fajr").Value,
Soloppgang = c.Attribute("Soloppgang").Value,
Zohr = c.Attribute("Zohr").Value,
Asr = c.Attribute("Asr").Value,
Maghrib = c.Attribute("Maghrib").Value,
Isha = c.Attribute("Isha").Value,

};

listBox1.ItemsSource = filteredData; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T08:56:53.197

如果数据中没有年份，您将不得不自己添加对年份变化的处理。这应该只是对月份的检查，尽管相对简单。

您可以通过在转换为字符串时对其进行格式化来更改日期的显示方式。
请参阅：http: [//msdn.microsoft.com/en-us/library/8kb3ddd4.aspx](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

[您可能会发现使用CollectionViewSource](http://msdn.microsoft.com/en-us/library/system.windows.data.collectionviewsource%28v=vs.95%29.aspx)更容易，而不是使用该 LINQ 语句进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T19:41:04.250

你能做的精髓是这样的：

```
int year = DateTime.Now.Year;
int lastMonth = 12;
var bonn3s = new List<Bonn3>();
foreach (var d in filtererData)
{
    int month = int.Parse(c.Attribute("Måned").Value);
    if (lastMonth - month < 0)
        year--;

    bonn3s.Add(new Bonn3()
    {
        Date = new DateTime(year,month,int.Parse(c.Attribute("Dag").Value)),

    ....
    lastMonth = month;
} 
```

* * *

**编辑**

你可以给 Bonn3 一个属性 DateString （或类似的）：

```
public string DateString
{
    get { return this.Date.ToShortDateString(); }
} 
```

并绑定到它以用于显示目的。

# android - 使用 dropbox API 列出所有 Dropbox 文件和文件夹，并下载在 android 中单击的文件

> ID：10546388
> 
> 赞同：6
> 
> 时间：2012-05-11T06:21:21.420
> 
> 标签：android, android-intent

我在谷歌上进行了很多研究，也阅读了 www.dropbox.com 上提到的步骤，但是我没有找到任何方法来使用 Dropbox API 列出我的应用程序中的所有文件和文件夹。我知道如何下载Dropbox 中的文件以及如何将文件上传到 Dropbox。

但是任何人请建议我这是否可以列出保管箱的所有文件和文件夹，每当您单击任何文件时，该文件就会开始下载并保存到您的 SD 卡中。

任何人都请帮我一些样品....plsss

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-11T06:54:24.323

简单的样本。

```
Entry entries = mApi.metadata(Path, 100, null, true, null);

for (Entry e : entries.contents) {
    if (!e.isDeleted) {
        Log.i("Is Folder",String.valueOf(e.isDir));
        Log.i("Item Name",e.fileName);
    }
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-11T06:26:00.477

使用[`/metadata`](https://www.dropbox.com/developers/reference/api#metadata)带有`list`参数集的方法`true`来获取有关文件夹及其内容的所有信息。

# ios - UITextField 蓝色背景，出乎意料

> ID：10546389
> 
> 赞同：1
> 
> 时间：2012-05-11T06:21:21.450
> 
> 标签：ios, ios5

我在 UITableView 中有几个 UITextField 元素。我可以自由编辑它们，但由于我无法理解或无法轻松复制的原因 - 有时，其中一个字段会变成蓝色背景并保持这种状态。编辑仍然有效，只是由于某种原因被涂成蓝色。

![在此处输入图像描述](../Images/4d09a57026afd52ed49eb7ba1ed0d4c6.png)

我错过了什么？

在 iPad 3 上试用我的应用程序。Xcode 4.3.x，IOS 5.1.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T06:24:42.110

我认为它也是被选中的单元格......我认为这应该可以解决问题：

```
cell.selectionStyle = UITableViewCellSelectionStyleNone; 
```

# c++ - 将一个类成员函数指定为另一个类的朋友？

> ID：10546391
> 
> 赞同：20
> 
> 时间：2012-05-11T06:21:29.877
> 
> 标签：c++, friend

根据 C++ Primer 一书，作者提到我们可以将一个类成员函数指定为另一个类的友元，而不是整个类（第 634 页）。

然后，我测试了这段代码：

```
class A
{
public:
    friend void B::fB(A& a);
    void fA(){}
};
class B
{
public:
    void fB(A& a){};
    void fB2(A& a){};
}; 
```

我只是想`fB()`成为朋友`class A`，而不是整个`class B`。但是上面的代码产生了一个错误：`'B' : is not a class or namespace name`. （我正在使用 Visual C++ 2005）

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-11T06:24:02.073

尝试将 B 定义放在 A 之前：

```
class A; // forward declaration of A needed by B

class B
{
public:
    // if these require full definition of A, then put body in implementation file
    void fB(A& a); // Note: no body, unlike original.
    void fB2(A& a); // no body.
};

class A
{
public:
    friend void B::fB(A& a);
    void fA(){}
}; 
```

`A`需要完整的定义`B`。但是，`B`需要了解`A`，但不需要完整定义，因此您需要 的前向声明`A`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-03-19T05:07:35.677

当编译器开始编译代码（通常从顶部）并遇到这一行：

```
friend void B::fB(A& a); 
```

1.  此时，编译器不知道 B 的类型信息，因此会引发错误（ 'B' : is not a class or namespace name ）。

2.  通过类 B 的前向声明，编译器在其与所有成员的实际声明之前就知道 B 的类型是 Class。

3.  在 B 类的前向声明之后运行下面的代码。

///////////////

```
class B;
class A
{
public:
    friend void B::fB(A& a); 
    void fA(){};
};
class B
{
public:
    void fB(A& a){};
    void fB2(A& a){};
}; 
```

还是错误！！！

因为前向声明只是程序员尚未给出完整定义的标识符的声明。因此编译器需要在 A 类之前对 B 进行完整定义。

注意：A 类的定义依赖于 B 的类型，也依赖于 B 的定义（即 B::fB），所以单靠前向声明无法解析，完整的 B 类定义需要在 A 类之前定义。

4 运行这段代码

////////

```
class B
{
public:
    void fB(A& a){};
    void fB2(A& a){};
};
class A
{
public:
    friend void B::fB(A& a); 
    void fA(){}
}; 
```

还是错误！！！

因为 B 类成员函数 fB 和 fB2 具有 A 类型的参数，但编译器不知道 A 的类型信息，所以通过 A 类的前向声明，我们可以让编译器知道 A 的类型信息。注意：B 类定义仅依赖于A 的类型不是 A 的成员，因此 A 的前向声明解决了步骤 4。

5.  最终代码

//////////////////////

```
class A;  // forward declaration of A needed by B
class B
{
public:
    void fB(A& a);
};

class A
{
    int i;
public:
    friend void fA(A& a);    //specifying function fA as a friend of A, fA is not member function of A
    friend void B::fB(A& a); //specifying B class member function fB as a friend of A
};

// fA is Friend function of A
void fA(A& a)
{
    a.i  = 11; // accessing and modifying Class A private member i
    cout<<a.i<<endl;
}

// B::fB should be defined after class A definition only because this member function can access Class A members
void B::fB(A& a)
{
    a.i  = 22; // accessing and modifying Class A private member i in Class B member function fB
    cout<<a.i<<endl;
}

int main()
{
    A a;
    fA(a);    // calling friend function of class A

    B b;
    b.fB(a);  // calling B class member function fB, B:fB is friend of class A

    return 0;
} 
```

6 练习：

```
// Cyclic dependency 
#include<iostream>
using namespace std;

class A;

class B
{
public:
    void fB(A& a);
    friend void A::fA(B& b); //specifying class A's member function fA as a friend of B
};

class A
{
    int i;
public:
    void fA(B& b);  
    friend void B::fB(A& a); //specifying class B's member function fB as a friend of A
};

int main()
{
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-11T06:23:14.073

为此，`B`需要在定义 之前了解的完整定义`A`。

所以转发声明`A`，因为`B`不需要完整类型，并切换定义：

```
class A;
class B
{
public:
    void fB(A& a){};
    void fB2(A& a){};
};
class A
{
public:
    friend void B::fB(A& a);
    void fA(){}
}; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-02-24T18:45:59.107

当编译器开始读取代码（通常从顶部）并遇到此行时：

`friend void B::fB(A& a);`

然后编译器不明白 this 是什么意思`B::`。即使您稍后在代码中定义了此类，但编译器也不知道。因此，`class Name;`如果定义位于代码的后面，那么练习前向声明 class() 通常是一个好习惯。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-23T12:25:38.240

@juanchopanza @ipkiss 关于由于 A 尚未定义而无法在 fB(A& a) 中访问 A 的数据成员的问题。您可以在定义类 A 之后定义函数 fB(A& a)，以便 fB(A& a) 能够看到 A 的数据成员，而不是将其定义在单独的文件中并包含它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-26T12:38:57.997

首先向前声明A类，使其在B类定义中可见。然后定义包含类 B 的友元函数的类 A。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-12-20T13:38:06.883

首先，在使用特定的类名之前，您必须先声明它。因此，在最初声明 B 类之前，您需要在 A 类中使用 B 类的前向声明。

其次，在定义了两个类之后，您需要定义函数（使用两个类中的变量——这里是友元函数）。否则我们可能会面临错误。

例如

```
#include<iostream>

using namespace std;

class alpha1;

class alpha2
{
    public:

        void put_bata(int a,int b);
};

void alpha2 :: put_bata(int a,int b)
{
    alpha1 net;

    net.roll=a;

    net.id=b;

    net.get_data();
}

class alpha1
{
    int roll;

    int id;

    public:

        void get_data(void)
        {
            cout<<roll<<endl<<id<<endl;
        }

        friend void alpha2 :: put_bata(int a,int b);
};

int main()
{
    alpha2 gamma;

    gamma.put_bata(5,6);

    return 0;
} 
```

将向我们显示错误，因为 put_bata 会在定义之前尝试访问 roll 和 id，即使我们有该类的前向声明，但下面给出的代码也可以正常工作。

```
#include<iostream>

using namespace std;

class alpha1;

class alpha2
{
    public:

        void put_bata(int a,int b);
};

class alpha1
{
    int roll;

    int id;

    public:

        void get_data(void)
        {
            cout<<roll<<endl<<id<<endl;
        }

        friend void alpha2 :: put_bata(int a,int b);
};

void alpha2 :: put_bata(int a,int b)
{
    alpha1 net;

    net.roll=a;

    net.id=b;

    net.get_data();
}

int main()
{
    alpha2 gamma;

    gamma.put_bata(5,6);

    return 0;
} 
```

# java - 如何使用 hadoop 配置 nutch 1.4？

> ID：10546393
> 
> 赞同：0
> 
> 时间：2012-05-11T06:21:53.943
> 
> 标签：java, hadoop, nutch

当我触发这个命令时

```
./bin/hadoop dfs -put url/urls_test url/urls_test 
```

URL 正在正确启动。

但是下面的命令显示错误

```
./bin/nutch crawl url/urls_test -dir cr_demo -depth 1 
```

错误

```
java.lang.RuntimeException: Error in configuring object 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T09:47:57.913

如果 NUTCH_CONF_DIR 和 NUTCH_HOME 未导出或指向错误的位置，则会出现您粘贴的错误。

有关将 nutch 1.4 与 hadoop 0.20 一起使用的详细步骤，请参阅此[http://www.rui-yang.com/develop/build-nutch-1-4-cluster-with-hadoop/](http://www.rui-yang.com/develop/build-nutch-1-4-cluster-with-hadoop/)

# php - PHP MySQL选择语句错误

> ID：10546394
> 
> 赞同：1
> 
> 时间：2012-05-11T06:22:05.490
> 
> 标签：php, mysql, select

我是 MySQL 和 PHP 的新手，并且在使用此代码时遇到了问题。请告诉我哪里出错了：

这是代码：

```
<?php

include('connection.php');

$num1  = '1';
$num2  = '2';

// Get all the data from the  table

$sql = mysql_query("SELECT * FROM table1 WHERE num1 = '$num1' AND num2 = '$num2'");

$row = mysql_fetch_assoc($sql) or die("No rows returned by query");

while ($row = mysql_fetch_assoc($sql)) {
echo $row["num1"];
echo '</br>';
echo $row["num2"];
echo '</br>';
}

?> 
```

如果我改变

```
$sql = mysql_query("SELECT * FROM table1 WHERE num1 = '$num1' AND num2 = '$num2'"); 
```

至

```
$sql = mysql_query("SELECT * FROM table1 WHERE num1 > '$num1' AND num2 > '$num2'"); 
```

有用。尽管有一些记录需要打印出来，但它不适用于等号。

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T06:24:29.077

再试一次

```
SELECT * FROM table1 WHERE num1 = $num1 AND num2 = $num2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T07:07:13.010

您的问题是您要获取两次结果，因此请在 while 循环**($row = mysql_fetch_assoc($sql) 或 die("No rows returned by query");)** 之外删除 fetch 语句，它应该可以工作。如果这有效，请更新。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T06:26:38.077

由于您正在比较数字，请尝试使用不带引号的数字。

```
SELECT * FROM table1 WHERE num1=$num1 AND num2=$num2 
```

# clojure - ClojureScript的设计与实现

> ID：10546402
> 
> 赞同：5
> 
> 时间：2012-05-11T06:22:44.260
> 
> 标签：clojure

我的问题不是关于如何使用 ClojureScript 生成 JavaScript 代码。

我对 ClojureScript 很感兴趣，因为它在 Clojure 中实现了 Clojure \ {eval}，并且能够将其编译成另一种语言。因此，我对让 ClojureScript 以其他平台为目标的可能性很感兴趣。

问题：除了源代码之外，ClojureScript 的设计和实现是否在任何地方都有记录？我想要一个关于编译器的各个部分如何协同工作的高级概述：*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T06:33:50.517

至于“Clojurescript 管道以及如何挂钩”的文档，您可以查看[此](http://blog.fogus.me/2012/04/25/the-clojurescript-compilation-pipeline/)博客条目。

# php - 在点击链接之前提交表格

> ID：10546403
> 
> 赞同：1
> 
> 时间：2012-05-11T06:22:50.383
> 
> 标签：php, jquery, symfony

我有一个包含一些输入的页面、一个验证按钮以及一些链接。

我希望有以下行为：当用户单击链接时，在点击链接之前提交表单（保存数据）。

我尝试在链接点击事件上使用 jquery form.submit()，但数据没有保存。如果我在 form.submit() 之前使用 event.preventDefault()，则保存数据但未打开链接，而是打开提交按钮的操作链接。

我怎么能这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T06:29:19.130

您需要使用 Ajax 来实现此功能

```
<a href="somepage.html" class="link">Link</a>

$(document).ready(function(){
$('.link').click(function(e){

var href = $(this).attr('href');
e.preventDefault();
//do ajax for saving the data-- refer jquery ajax

$.ajax({
      url:'your form action',
      type:'post',
      data:anydata to send
     success:funtion(msg){ //return a value ok if form saved or fail if form not saved
    if(msg == 'ok'){
    location.href = href; //just redirect
      }    
     }

});    
});   

}); 
```

# html - 列表视图 css 中的问题

> ID：10546412
> 
> 赞同：1
> 
> 时间：2012-05-11T06:23:25.057
> 
> 标签：html, css, html-lists

我想要 ul 的以下结构

```
_________________________________

     1      2       3       4
_________________________________

     5      6       7       8
_________________________________

     9      10 
```

但我无法制作最后一行。我的输出是

```
_________________________________

     1      2       3       4
_________________________________

     5      6       7       8
__________________

     9      10 
```

你参考这个小提琴[http://jsfiddle.net/tmp38/](http://jsfiddle.net/tmp38/)

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T06:46:43.973

检查要在第一行显示的 li 属性的编号，然后将剩余的空 `<li>&nbsp;</li>`放在最后一行。

否则使用**div**转换您的结构。

检查它：http: [//jsfiddle.net/varunk007/EMG2F/5/](http://jsfiddle.net/varunk007/EMG2F/5/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T07:35:47.590

如果js没问题这里是动态解决方案。[jsfiddle](http://jsfiddle.net/T9B3m/3/) 它首先查看有多少`li`适合一行，然后查看最后一行以查看缺少多少。`li`最后它根据 a 的大小和缺少的数字在右侧添加一个填充

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T06:44:57.120

您要么必须添加空白 li 元素，例如：

```
<ul class="packages">
     <li>1</li>
     <li>2</li>
     <li>1</li>
     <li>2</li>
     <li>1</li>
     <li>2</li>
     <li>1</li>
    <!--ADD BLANK -->
    <li></li>
</ul> 
```

或为 7 和 8 设置自定义类以在底部有边框：

CSS：

```
.border-bottom {
        border-bottom: 1px solid #444;
} 
```

HTML

```
<ul class="packages">
     <li>1</li>
     <li>2</li>
     <li>3</li>
     <li>4</li>
     <li>5</li>
     <li>6</li>
     <li class="border-bottom">7</li>
     <li class="border-bottom">8</li>
     <li>9</li>
     <li>10</li>
</ul> 
```

有很多方法可以解决这个问题，这取决于你想要完成什么。这是一个带有嵌套元素的示例。

CSS：

```
.packages li
{
    float:left;
    margin:0 0 30px 0;
    width:176px;   
    padding-top:30px;  
    border-top
    text-align:center;
}
.packages ul {
    border-top:1px solid #444;
    overflow: hidden;
    width: 352px;
} 
```

HTML：

```
<ul class="packages">
 <ul>
     <li>1</li>
     <li>2</li>
 </ul>
 <ul>
     <li>1</li>
     <li>2</li>
 </ul>
 <ul>
     <li>1</li>
     <li>2</li>
 </ul>
 <ul>
     <li>1</li>
 </ul>
</ul> 
```

# java - 我们应该避免在迭代器中调用 hasNext() 吗？

> ID：10546413
> 
> 赞同：3
> 
> 时间：2012-05-11T06:23:34.973
> 
> 标签：java, iterator

是否建议不要使用 iterator.hasNext() 在迭代器上循环？

例如，我想将值 obj 设置为列表的每个元素。我可以使用以下代码或通过在循环中使用 hasNext() 使其更具可读性。

```
int size = list.size();
ListIterator<? super T> itr = list.listIterator();
for (int i=0; i<size; i++) {
     itr.next();
     itr.set(obj);
} 
```

代替这些行，我可以编写如下代码。

```
for (ListIterator<? super T> itr = list.listIterator(); itr.hasNext(); ) {
    itr.next();
    itr.set(obj);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T06:27:20.853

> 是否建议不要使用 iterator.hasNext() 在迭代器上循环？

不。`hasNext`是您使用迭代器进行迭代的*标准方式。*例如，这就是[enhanced-for 语句](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.14.2)在可迭代的幕后所做的事情。

话虽如此，您的代码已经是 ListIterator 特定的，因为您正在使用`ListIterator.set`- 所以您的第二个代码块目前实际上不会编译。即使这样做了，它也不起作用，因为您仍然需要调用`next()`. 不过，这会起作用：

```
for (ListIterator<? super T> itr = list.listIterator(); itr.hasNext(); ) {
    itr.next();
    itr.set(obj);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T06:27:33.660

好吧，当 NetBeans 重构您的 for-each 循环以使用迭代器时，它们会以下列方式进行。

对于每个：

```
for (T object : list) {
} 
```

迭代器模式：

```
for (Iterator<T> it = list.iterator(); it.hasNext();) {
    T object = it.next();
} 
```

我认为在迭代时在迭代器上使用 hasNext() 是完全可以的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T06:27:49.040

没有这样的建议不要使用`hasNext`。

Iterator API 列表只有三个方法`add`，`remove`和`hasNext`

同样从干净的代码来看，第二种方法看起来比第一种方法好得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T06:28:23.777

使用迭代器时，应始终调用 hasNext() 方法。否则，在调用 next() 方法时可能会遇到 NoSuchElementException。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T06:39:48.050

当然，您应该使用`hasNext()`，但仅用于*迭代* 集合，而不用于填充集合。要填充集合，请处理集合本身，而不是它的迭代器，并使用@JMelnik 描述的循环从集合中*读取。*`for`

**填写收藏**

```
Collection<MyObject> list = ...;
while (something) {
    list.add(myObject);
} 
```

**阅读收藏**

```
for (MyObject myObject : list) {
    ...
} 
```

# java - Java Swing - 如何在 Mac 上双击项目文件以打开我的应用程序并加载文件？

> ID：10546427
> 
> 赞同：5
> 
> 时间：2012-05-11T06:24:24.430
> 
> 标签：java, macos, swing

我创建了一个 Mac Java Swing 应用程序，并在“Info.plist”文件中为其设置了文件扩展名 (*.pkkt)，因此当双击该文件时，它会打开我的应用程序。

当我这样做时，程序运行良好。现在我需要在程序中加载 (*.pkkt) 项目，但文件路径没有像 Windows 操作系统中那样作为参数传递给 Mac 中的 main(...) 方法。

经过一番搜索，我发现了一个 Apple 处理 jar“ [MRJToolkitStubs](http://www.jarfinder.com/index.php/java/info/com.apple.mrj.MRJAboutHandler) ”，它具有**MRJOpenDocumentHandler**接口来处理此类单击的文件。我曾尝试通过在主程序类中实现该接口来使用它来加载该文件，但它不起作用。程序启动时永远不会调用已实现的方法。

***这个接口如何运行？***

- - - - - - - - - - - - - - - - - - - - - - - - - 编辑: 添加代码示例

这是我正在使用的代码：

> ```
> public static void main( final String[] args ) {         
>     .                   
>     .         
>     .       
>         MacOpenHandler macOpenHandler = new MacOpenHandler();        
>         String projectFilePath = macOpenHandler.getProjectFilePath();  // Always Empty !!           
>     } 
> ```

```
class MacOpenHandler implements MRJOpenDocumentHandler {
    private String projectFilePath = ""; 

    public MacOpenHandler () {
        com.apple.mrj.MRJApplicationUtils.registerOpenDocumentHandler(this) ; 
    }

    @Override
    public void handleOpenFile( File projectFile ) { 
        try {
            if( projectFile != null ) {
                projectFilePath = projectFile.getCanonicalPath();
                   System.out.println( projectFilePath );  // Prints the path fine.
            }
        } catch (IOException e) {}  
    }

    public String getProjectFilePath() {
        return projectFilePath;
    }
} 
```

**正如上面的评论中提到的，“getProjectFilePath()”总是空的！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-09-19T01:05:55.177

## 在 Java 9 上，使用[`Desktop.setOpenFileHandler()`](http://download.java.net/java/jdk9/docs/api/java/awt/Desktop.html#setOpenFileHandler-java.awt.desktop.OpenFilesHandler-)

专有`com.apple.eawt`包已从 Java 的最新版本中删除，并已合并到`Desktop`类中的各种方法中。对于您的具体示例：

```
import java.awt.desktop.OpenFilesHandler;
import java.awt.desktop.OpenFilesEvent;
import java.io.File;
import java.util.List;

public class MyOpenFileHandler implements OpenFilesHandler {

    @Override
    public void openFiles​(OpenFilesEvent e) {
        for (File file: e.getFiles​()) {
            // Do whatever
        }
    }
} 
```

然后在其他地方添加：

```
Desktop.getDesktop().setOpenFileHandler(new MyOpenFileHandler()); 
```

该类`OpenFilesEvent`也有一个[`getSearchTerm()`](http://download.java.net/java/jdk9/docs/api/java/awt/desktop/OpenFilesEvent.html#getSearchTerm--)方法。假设有人在 macOS 上使用 Spotlight 搜索“StackOverflow”这个词，然后决定打开一个文档。使用此方法，您能否确定“StackOverflow”是他们搜索的单词，并选择对其进行处理（可能突出显示该单词的第一次出现）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-14T05:10:53.830

您将要使用[Apple Java Extensions](https://developer.apple.com/library/mac/documentation/Java/Conceptual/Java14Development/)。

它们应该包含在任何在 Mac OS X 上运行的 JDK 中，但是文档很难获得。有关更多详细信息，请参阅[此答案](https://stackoverflow.com/a/26352880/1294423)。

具体来说，您需要制作一个`OpenFilesHandeler`.

此代码段应该可以工作：

```
import com.apple.eawt.event.OpenFilesHandeler;
import com.apple.eawt.event.AppEvent;
import java.io.File;
import java.util.List;

class MacOpenHandler implements OpenFilesHandeler {

    @Override
    public void openFiles(AppEvent.OpenFilesEvent e)  { 
        List<File> files = e.getFiles();
        // do something
    }

} 
```

在某处：

```
import com.apple.eawt.Application;

...

MacOpenHandeler myOpenHandeler = new MacOpenHandeler();
Application.getApplication().setOpenFileHandler(myOpenHandeler); 
```

# matrix - how to change a 1*1 matrix in Eigen to float?

> ID：10546432
> 
> 赞同：3
> 
> 时间：2012-05-11T06:24:39.783
> 
> 标签：matrix, eigen

I'm using eigen matrix library.

How can I convert a matrix of 1* 1 to a number(float or others)?

It's OK to do this

```
cout << ((MatrixXf(1,2) << 0, 2).finished()) * ((MatrixXf(2,1) << 0, 2).finished()) << endl; 
```

But when I try to do this

```
MatrixXf mtemp(2,1);
mtemp(0,0) = ((MatrixXf(1,2) << 0, 2).finished()) * ((MatrixXf(2,1) << 0, 2).finished()); 
```

It said 'cannot convert const Eigen::GeneralProduct to float in assignment'.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T08:57:23.320

If `mat` is an 1-by-1 matrix, then `mat.value()` is its only entry as a scalar.

Thus, you can do

```
mtemp(0,0) = (((MatrixXf(1,2) << 0, 2).finished()) 
              * ((MatrixXf(2,1) << 0, 2).finished())).value(); 
```

# python - 使用 multipart_encode 的问题（海报库）

> ID：10546437
> 
> 赞同：1
> 
> 时间：2012-05-11T06:24:49.520
> 
> 标签：python, mime, encode, multipartform-data, poster

我正在尝试上传文件`multipart_encode`以实现该`MIME`过程。但是，我遇到了以下错误`AttributeError: multipart_yielder instance has no attribute '__len__'`。以下是我的方法，如果有人能给我一些建议，我真的很感激。

```
url = "https://pi-user-files.s3-external-1.amazonaws.com/"           
post_data = {}
#data is a dict
post_data['AWSAccessKeyId']=(data['ticket']['AWSAccessKeyId'])
post_data['success_action_redirect']=(data['ticket']['success_action_redirect'])
post_data['acl']=(data['ticket']['acl'])
post_data['key']=(data['ticket']['key'])
post_data['signature']=(data['ticket']['signature'])
post_data['policy']=(data['ticket']['policy'])
post_data['Content-Type']=(data['ticket']['Content-Type'])

#I would like to upload a text file "new 2"
post_data['file']=open("new  2.txt", "rb")

datagen, headers = multipart_encode(post_data)
request2 = urllib2.Request(url, datagen, headers)
result = urllib2.urlopen(request2) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T06:59:37.437

如果你想发送一个文件，你应该用一个`MultipartParam`对象包装其他参数，用于创建发送文件请求的示例代码：

```
from poster.encode import multipart_encode, MultipartParam
import urllib2

def postFileRequest(url, paramName, fileObj, additionalHeaders={}, additionalParams={}):
    items = []
    #wrap post parameters
    for name, value in additionalParams.items():
        items.append(MultipartParam(name, value))
    #add file
    items.append(MultipartParam.from_file(paramName, fileObj))
    datagen, headers = multipart_encode(items)
    #add headers
    for item, value in additionalHeaders.iteritems():
        headers[item] = value
    return urllib2.Request(url, datagen, headers) 
```

另外我认为你应该`register_openers()`在开始时执行一次。您可以在[文档中找到一些详细信息](http://atlee.ca/software/poster/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-02-10T19:06:44.650

问题在于，在 httplib.py 中，生成器没有被检测到，而是被视为包含要发送的完整数据的字符串（因此它试图找到它的长度）：

```
if hasattr(data,'read') and not isinstance(data, array): # generator 
    if self.debuglevel > 0: print "sendIng a read()able"
    .... 
```

一个解决方案是让生成器像 read()able 一样工作：

```
class GeneratorToReadable():
    def __init__(self, datagen):
        self.generator = datagen
        self._end = False
        self.data = ''

    def read(self, n_bytes):
        while not self._end and len(self.data) < n_bytes:
            try:
                next_chunk = self.generator.next()
                if next_chunk:
                    self.data += next_chunk
                else:
                    self._end = True
            except StopIteration:
                self._end = True
        result = self.data[0:n_bytes]
        self.data = self.data[n_bytes:]
        return result 
```

并像这样使用：

```
datagen, headers = multipart_encode(post_data)
readable = GeneratorToReadable(datagen)
req = urllib2.Request(url, readable, headers)
result = urllib2.urlopen(req) 
```

# cakephp - cakephp 删除线程记录

> ID：10546438
> 
> 赞同：0
> 
> 时间：2012-05-11T06:24:50.330
> 
> 标签：cakephp

我已经使用 CakePHP 和它的特性在我的一个站点中实现了评论功能`find('threaded')`。

当我删除父评论时，我希望它的所有子评论（n 级子）也被删除，使用 CakePHP 模型的删除方法。

说，以下是这种情况：

id = 5 parent_id = 0;
id = 6 parent_id = 5;
id = 7 parent_id = 5;
id = 8 parent_id = **7** ;

我这样做：

```
$this->Comment->id = 5;
$this->Comment->delete(); 
```

我希望删除评论 id = 5、6、7、8 的记录。

请指教。
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T06:37:00.703

我没有测试以下代码，但我会做这样的事情：

```
<?php
class Comment extends AppModel {
    public function afterDelete() {
        $this->deleteChildren($this->id);
    }

    private function deleteChildren($parentId) {
        $children = $this->findByParentId($parentId);
        if (!empty($children)) {
            foreach ($children as $child) {
                $this->deleteChildren($child['Comment']['id']);
                $this->delete($child['Comment']['id']);
            }
        }
    }
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T09:41:01.277

上面@greew 的回答中的小修正，它对我来说如下所示：

```
public function afterDelete() {
     $this->__deleteChildren($this->id);
}

private function __deleteChildren($parentId) {
   $children = $this->findAllByParentId($parentId);
   if (!empty($children)) {
        foreach ($children as $child) {
           $this->delete($child['Comment']['id']);
        }
    }
} 
```

非常感谢绿！

# python - 带有utf8问题的python正则表达式

> ID：10546442
> 
> 赞同：9
> 
> 时间：2012-05-11T06:25:06.987
> 
> 标签：python, regex, utf-8, python-2.7

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-11T06:45:59.493

There are several issues with your code. First you should use `re.compile(ur'<unicode string>')`. Also it is nice to add re.UNICODE flag (not sure if really needed here though). Next one is that still you will not receive a match since `\d+` doesn't handle decimals just a series of numbers, you should use `\d+\.?\d+` instead (you want number, probably a dot and a number). Example code:

```
#coding: utf-8

text = u"PROCESS：类型：关爱积分[NOTIFY]   交易号：2012022900000109   订单号：W12022910079166    交易金额：0.01元    交易状态：true 2012-2-29 10:13:08"
import re
pattern = re.compile(ur'交易金额：(\d+\.?\d+)元', re.UNICODE)

print pattern.search(text).group(1) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-11T06:27:42.713

You need to use [`.search()`](http://docs.python.org/library/re.html#re.search) since [`.match()`](http://docs.python.org/library/re.html#re.match) is like starting your regex with `^`, i.e. it only checks at the beginning of the string.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-31T10:22:06.523

If you use utf-8, you can use flags=re.LOCALE

```
#coding: utf-8
import re
pattern = re.compile(r'交易金额：(\d+\.?\d+)元', flags=re.LOCALE)
for line in open('xx.txt'):
    match = pattern.match(line) 
```

More details, see [re.LOCALE](https://docs.python.org/2/library/re.html#re.LOCALE). There is no need to convert utf-8 to unicode.

# bash - Create a new sequence of files from an existing sequence, along with numbering

> ID：10546447
> 
> 赞同：1
> 
> 时间：2012-05-11T06:25:20.297
> 
> 标签：bash, rename

I know this question has been asked, but I can't find more than one solution, and it does not work for me. Essentially, I'm looking for a bash script that will take a file list that looks like this:

image1.jpg
image2.jpg
image3.jpg

And then make a copy of each one, but number it sequentially backwards. So, the sequence would have three new files created, being:

image4.jpg
image5.jpg
image6.jpg

And yet, image4.jpg would have been an untouched copy of image3.jpg, and image5.jpg an untouched copy of image2.jpg, and so on. I have already tried the solution outlined in [this stackoverflow question](https://stackoverflow.com/questions/7136222/bash-script-to-copy-numbered-files-in-reverse-order) with no luck. I am admittedly not very far down the bash scripting path, and if I take the chunk of code in the first listed answer and make a script, I always get "2: Syntax error: "(" unexpected" over and over. I've tried changing the syntax with the ( around a bit, but no success ever. So, either I am doing something wrong or there's a better script around.

Sorry for not posting this earlier, but the code I'm using is:

```
image=( image*.jpg )  
MAX=${#image[*]}  
for i in ${image[*]}  
do  
   num=${i:5:3} # grab the digits  
   compliment=$(printf '%03d' $(echo $MAX-$num | bc))  
   ln $i copy_of_image$compliment.jpg  
done 
```

And I'm taking this code and pasting it into a file with nano, and adding !#/bin/bash as the first line, then `chmod +x script` and executing in bash via `sh script`. Of course, in my test runs, I'm using files appropriately titled image1.jpg - but I was also wondering about a way to apply this script to a directory of jpegs, not necessarily titled image(integer).jpg - in my file keeping structure, most of these are a single word, followed by a number, then .jpg, and it would be nice to not have to rewrite the script for each use.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T08:53:09.210

*   Maybe your real test data runs from 001 to 300, but here you have image1 2 3, and therefore you extract one, not three digits from the filename. num=${i:5:1}

*   Integer arithmetic can be done in the bash without calling bc

*   ${#image[@]} is more robust than ${#image[*]}, but shouldn't be a difference here.
*   I didn't consult a dictionary, but isn't compliment something for your girl friend? The opposite is complement, isn't it? :)
*   the other command made links - to make copies, call cp.

Code:

```
#!/bin/bash
image=( image*.jpg )
MAX=${#image[@]}
for i in ${image[@]}
do
    num=${i:5:1}
    complement=$((2*$MAX-$num+1))
    cp $i image$complement.jpg
done 
```

Most important: If it is bash, call it with bash. Best: do a shebang (as you did), make it executable and call it by ./name . Calling it with sh name will force the wrong interpreter. If you don't make it executable, call it bash name.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T11:56:08.383

Perhaps something like this. It will work well for something like `script image*.jpg` where the wildcard matches a set of files which match a regular pattern with monotonously increasing numbers of the same length, and less ideally with a less regular subset of the files in the current directory. It simply assumes that the last file's digit index plus one through the total number of file names is the range of digits to loop over.

```
#!/bin/sh

# Extract number from final file name
eval lastidx=\$$#
tmp=${lastidx#*[!0-9][0-9]}
lastidx=${lastidx#${lastidx%[0-9]$tmp}}
tmp=${lastidx%[0-9][!0-9]*}
lastidx=${lastidx%${lastidx#$tmp[0-9]}}

num=$(expr $lastidx + $#)
width=${#lastidx}

for f; do
    pref=${f%%[0-9]*}
    suff=${f##*[0-9]}
    # Maybe show a warning if pref, suff, or width changed since the previous file
    printf "cp '$f' '$pref%0${width}i$suff'\\n" $num
    num=$(expr $num - 1)
done |
sh 
```

This is `sh`-compatible; the `expr` stuff and the substring extraction up front is ugly but Bourne-compatible. If you are fine with the built-in arithmetic and string manipulation constructs of Bash, converting to that form should be trivial.

(To be explicit, `${var%foo}` returns the value of `$var` with `foo` trimmed off the end, and `${var#foo}` does similar trimming from the beginning of the value. Regular shell wildcard matching operators are available in the expression for what to trim. `${#var}` returns the length of the value of `$var`.)

# apache-flex - 图表（ColumnChart、BarChart、LineChart、AreaChart 等） - 另存为不带 ScrollBar 的图像

> ID：10546448
> 
> 赞同：0
> 
> 时间：2012-05-11T06:25:27.367
> 
> 标签：apache-flex, charts

我有一个与图表有关的问题。

我有 1000 多列的柱形图，上面有滚动条。现在我想将它作为图像保存到我的 Disktop 或任何不滚动的位置。

**我从其中一个链接下载的 **ScrollableAxisRenderer 类请在下面找到它： -** [http://www.connectedpixel.com/blog/scrollingcharts](http://www.connectedpixel.com/blog/scrollingcharts)**

 ****示例柱形图示例：-**

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
               xmlns:s="library://ns.adobe.com/flex/spark"
               xmlns:mx="library://ns.adobe.com/flex/mx"
               creationComplete="init();" xmlns:charts="com.connectedpixel.charts.*">
    <fx:Declarations>
        <fx:XML xmlns="" id="myData">
            <items>
                <item year="1960" rain="92" />
                <item year="1961" rain="192" />
                <item year="1962" rain="32" />
                <item year="1963" rain="52" />
                <item year="1964" rain="112" />
                <item year="1965" rain="52" />
                <item year="1966" rain="88" />
                <item year="1967" rain="52" />
                <item year="1968" rain="66" />
                <item year="1969" rain="39" />
                <item year="1970" rain="192" />
                <item year="1971" rain="182" />
                <item year="1972" rain="177" />
                <item year="1973" rain="179" />
                <item year="1974" rain="198" />
                <item year="1975" rain="207" />
                <item year="1976" rain="388" />
                <item year="1977" rain="372" />
                <item year="1978" rain="352" />
            </items>
        </fx:XML>

        <s:XMLListCollection id="rainData" source="{myData.children()}" />

    </fx:Declarations>
    <fx:Script>
        <![CDATA[
            import mx.graphics.ImageSnapshot;
            import mx.graphics.codec.PNGEncoder;

            protected function initCreationComp():void
            {
                var image:ImageSnapshot = ImageSnapshot.captureImage(myChart,300,new PNGEncoder(),true);
                var file:FileReference = new FileReference();
                var chartName:String = "myChart"+count+".png";
                file.save(image.data, chartName);
            }

        ]]>
    </fx:Script>

    <mx:VBox width="100%" height="100%" x="50" y="50">
        <s:Button label="Download Image" click="initCreationComp()"/>

        <mx:ColumnChart id="myChart" name="myChart"  
                        width="80%" height="80%" 
                        dataProvider="{myData.children()}" 
                        showDataTips="true" maxColumnWidth="35">
            <mx:horizontalAxis>
                <mx:CategoryAxis id="yearAxis"  categoryField="@year"   />
            </mx:horizontalAxis>

            <mx:series>
                <mx:ColumnSeries xField="@year"  yField="@rain" displayName="Rain" />
            </mx:series>

            <mx:horizontalAxisRenderers>
                <charts:ScrollableAxisRenderer id="scrollAxisRenderer" axis="{yearAxis}" tickPlacement="none"   
                                               placement="bottom" labelGap="3" maxVisibleColumns="4"/>
            </mx:horizontalAxisRenderers>

        </mx:ColumnChart>
    </mx:VBox>
</s:Application> 
```

提前致谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T06:40:59.833

将图表放在将显示滚动条而不是图表的容器中：

```
<mx:VBox width="100%" height="100%" x="50" y="50">
    <s:Button label="Download Image" click="initCreationComp()"/>
    <mx:VBox width="80%" height="80%"
             minWidth="100" minHeight="100">
        <mx:ColumnChart id="myChart" name="myChart"  
                        dataProvider="{myData.children()}" 
                        showDataTips="true" maxColumnWidth="35">
         <!-- etc -->
        </mx:ColumnChart>
    </mx:VBox>
</mx:VBox> 
```**

# web-services - 我无法部署我的网络服务

> ID：10546452
> 
> 赞同：1
> 
> 时间：2012-05-11T06:25:45.540
> 
> 标签：web-services

java.lang.LinkageError：您正在从 jar:file:/C:/dev/wrks/wrk_iris_2/IRISBuild/iris_lib_runtime/orabpel.jar!/javax/xml/soap/MessageFactory.class 加载旧 SAAJ

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T06:29:46.257

删除axis-saaj-1.4.jar 并重新部署您的服务器。

# iphone - UIImageView 的图像在 iPhone 的 postnotification 上没有改变

> ID：10546456
> 
> 赞同：0
> 
> 时间：2012-05-11T06:26:03.530
> 
> 标签：iphone, ios, uiscrollview, uiimageview, nsnotificationcenter

在我的应用程序中，我有一个 UIImageView 并且在运行时下载图像后，我正在通过 postnotification 更改图像，但图像没有改变，我检查了笔尖和任何地方的所有连接，它看起来对我来说很好，但图像仍然是没有人能在这方面帮助我。我的 uiimageview 在滚动视图中，而滚动视图在我的主视图中

在 postnotification 上调用了以下方法

```
- (void) refreshimages:(NSNotification *)notofication {
    if ([[notofication name] isEqualToString:@"DownloadImgBinary"]) {
        [activityview stopAnimating];
        [activityview removeFromSuperview];
        [self.view bringSubviewToFront:scrollView];
        [self.scrollView bringSubviewToFront:imgCamera];
        self.imgCamera.image = td.imgPhoto;
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T06:33:56.723

你需要检查*两件事*。

**首先，**确保您确实收到了通知。

在观察者的目标方法中放置一个断点，或者在其中粘贴一个 NSLog。如果在您执行此操作时，您都没有看到它们，那么您的通知就没有收到。

**其次，**确保图像实际上正在下载。

要么使用 Web 调试代理（我使用[Charles](http://www.charlesproxy.com/)，但它有点贵，还有其他选择），或者再次在某个地方设置断点。或者在按下时尝试设置 UIImageView 的图像、运行应用程序并在确定图像已下载后按下按钮的某个位置插入手动按钮。

**最后，**为了确保没有发生可疑的事情，在你的项目中粘贴两个图像，给 imageView 一个默认图像（像棋盘图案一样明显），然后在通知中（假设它正在触发），将其设置为其他也很明显的东西。然后测试。通过这种方式，您知道将子视图置于前台正在工作，并且您的 IB 链接正在工作。

# c - 为什么 epoll_ctl 说我的 fd 不好？

> ID：10546459
> 
> 赞同：1
> 
> 时间：2012-05-11T06:26:26.243
> 
> 标签：c, linux, http, sockets, epoll

为了了解更多关于 linux 中的 epoll 通知功能，我一直在使用 http 服务器。服务器的结构基本上是有一个表示请求的事件结构数组，然后在一些嵌套的 for 和 while 循环中对其进行迭代。

当我第一次编写这个原始事件循环时，它运行得相当好。但是，当我重构代码时，循环变得不那么可靠了。特别是，我开始收到一堆（大约 75% 的请求）epoll_ctl 错误，其中 errno 被设置为 BADFD。epoll_ctl 显然认为我的套接字文件描述符并不是真正的套接字文件描述符。

然而，我真的很困惑为什么性能会如此下降，因为重构只包括 a) 清理请求的解析和 b) 将 main 函数移到程序的开头。我检查了服务器的先前提交，并将主要功能与新版本进行了比较——它是相同的。

有没有人对这里可能发生的事情有所了解？将不胜感激。

下面是main函数的代码供参考：

```
int main(int argc, char *argv[]) {
    c("in main");
    char *progname=argv[0];
    int sockfd, newsockfd, portno, clilen, n, pid, epollfd;
    struct sockaddr_in serv_addr, cli_addr;

    initFt();
    if (argc < 2 ) {
        fprintf(stderr, "\nERROR: No Port Provided\n");
        exit(EXIT_FAILURE);
    }
    if (!createSocket(&sockfd)) {
        fprintf(stderr, "%s ERROR, COULD NOT CREATE SERVER SOCKET\n", progname);
        exit(EXIT_FAILURE);
    }

    serv_addr.sin_family = AF_INET;
    serv_addr.sin_port = htons(atoi(argv[1]));
    serv_addr.sin_addr.s_addr = INADDR_ANY;
    Bind(&sockfd, &serv_addr);
    listen(sockfd, 5);

    struct epoll_event *events = calloc(SOMAXCONN,  sizeof(struct epoll_event));
    struct epoll_event event;
    makeSocketNB(&sockfd);
    event.events = EPOLLIN | EPOLLET;
    event.data.fd = sockfd;

    if ((epollfd = createpoll())<0) {
        fprintf(stderr, "epoll create error\n");
        exit(EXIT_FAILURE);
    }
    if (epoll_ctl(epollfd, EPOLL_CTL_ADD, sockfd, &event) == -1) {
        fprintf(stderr, "error with epoll_ctl on sockfd");
        exit(EXIT_FAILURE);
    }

    while (1) {
        int n, e; //e for events
        e = epoll_wait(epollfd, events, SOMAXCONN, -1);

        for (n=0; n<e; n++) {
            if ((events[n].events & EPOLLERR) || (events[n].events & EPOLLHUP) || !(events[n].events & EPOLLIN)) {
                fprintf (stderr, "epoll error\n");
                close (events[n].data.fd);
                continue;
            }
            else if (events[n].data.fd == sockfd) {
                while (1) {
                    newsockfd=accept(sockfd, (struct sockaddr *) &cli_addr, &clilen);
                    if (newsockfd>0) {
                        makeSocketNB(&newsockfd);
                        fprintf(stderr, "Accepted a new connection on fd %d, made nonblocking\n", newsockfd);
                    }
                    else if (errno == EAGAIN || errno == EWOULDBLOCK) {
                        fprintf (stderr, "we have accepted all the clients on this event\n");
                        break;
                    }
                    event.data.fd = newsockfd;
                    event.events = EPOLLIN | EPOLLET;
                    if (epoll_ctl(epollfd, EPOLL_CTL_ADD, newsockfd, &event)<0) {
                        fprintf(stderr, "epoll_ctl error\n");
                        if (errno == EEXIST) {
                            fprintf(stderr, "fd already registered\n");
                        }
                        else if (errno == EBADF) {
                            fprintf(stderr, "fd bad\n%d\n", newsockfd);
                            break;
                        }
                        else if (errno == ENOMEM) {
                            fprintf(stderr, "no memory\n");
                        }
                        else if (errno == ENOSPC) {
                            fprintf(stderr, "enospc\n");
                        }
                        exit(EXIT_FAILURE);
                    }
                    continue;
                }
            }
            else { // there is stuff for us to read
                handleResponse(&events[n].data.fd);
                fprintf(stderr, "we are about to close file descriptor %d\n", events[n].data.fd);
                close (events[n].data.fd);
                fprintf(stderr, "connection closed\n");
            }
        }
    }

    exit(EXIT_SUCCESS);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T06:37:42.797

您的`accept`代码并没有真正处理错误：它只处理“成功”情况和将阻止情况。

```
if (newsockfd>0) {
    /* success */
} else if (errno == EAGAIN || errno == EWOULDBLOCK) {
    /* wouldblock */
}

/* Could be error but you call `epoll_ctl` anyway. */ 
```

# html - div没有填充高度

> ID：10546470
> 
> 赞同：1
> 
> 时间：2012-05-11T06:27:39.377
> 
> 标签：html, css

努力帮助一名学生完成他的项目，试图让他的 Div 填满整个页面。

我已经尝试按照 HTML 和 BODY 标签设置为 100% 的各种示例进行操作，但是当我为我的 Div 设置最小高度时，它不会填充页面的完整高度。这是我的代码。当它呈现绿色应该填满页面但它没有。

谢谢KT

```
<html>
<center>
<head>

    <link href="styles.css"  rel="stylesheet" type="text/css"/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head>
<body>

    <div class="tblwrap" height="100%">    
    <table  class="scndtable" >
            <tr class="headerrow">
                <td height=100%><a href="summary.html">Summary</a> </td>
                <td><a href="map.html">Map</a> </td>
                <td><a href="videos.html">Videos</a> </td>
            </tr>
        </table> 
    </div>
    <p style="font-weight: bold;text-align: center;"> </p>

</body>
</center> 
```

这是我的 CSS

```
html
{
height:100%;
}
body
{
margin:0;
padding:0;

vertical-align: middle;
height: 100%;
border: 20px solid skyblue;
}
body table
{
margin-left:auto;
margin-right:auto;
height:100%;

}
.tblwrap
{
background-color:green;
min-height: 100%;

    vertical-align: middle;
border:solid 3px red;
}
.headerrow{
text-align: center;

}
.scndtable
{
border-spacing:20px;
height: 100%;

}
.headerrow td{
font-size: 20pt;

background-color:silver;

}
.headerrow td a{
text-decoration: none;
color: black;
}
.headerrow td a:hover{
text-decoration: none;
color: gray;
}
.selectednav
{   
font-size: 72px;
font-weight: bold;
color:navy;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T06:30:35.323

```
 .tblwrap{position:absolute;
    top:0px;
    left:0px;
    right:0px;
    bottom:0px;
    background-color:green;
    vertical-align: middle;
    border:solid 3px red;
    oveflow:auto;
    } 
```

这对你有用:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T06:34:23.170

在您在 StackOverflow 上提问之前，在 JSFiddle 中重新创建您的问题总是有帮助的。我试图重新创建您的特定问题，但在我的情况下，div 很容易拉伸视口的高度：

[http://jsfiddle.net/hWGVr/](http://jsfiddle.net/hWGVr/)

但与 Ankit Gautam 的解决方案一样，这将始终覆盖视口的高度，不会进一步拉伸

# ruby-on-rails - 删除后如何更改大小而不刷新页面？

> ID：10546475
> 
> 赞同：0
> 
> 时间：2012-05-11T06:27:59.323
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3, jquery

我正在使用 ajax 删除评论。这很好，但是当我删除评论时，评论大小不会在不刷新页面的情况下更新。我没有得到我应该写什么来更新评论计数而不刷新页面：

以下是我在其中显示评论计数的 sidebar.html.haml 代码：

```
%li.link_li
    #commentsize
      = link_to "<span>#{@current_user.comments.size}</span>Comments".html_safe, "#", :class => "nav-icon icon-articles" 
```

下面是delete.js.haml通过ajax删除评论的代码：

```
$("#comment_#{@comment.id}").fadeOut().remove(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T06:49:05.033

您还可以更改值`delete.js.haml`

```
$("#commentsize").find("a").find("span").html("<%= @current_user.reload.comment_size %>"); 
```

# php - 无法正确设置 cookie

> ID：10546478
> 
> 赞同：0
> 
> 时间：2012-05-11T06:28:03.293
> 
> 标签：php, codeigniter

基于 Code Igniter 框架构建的站点。我有两个链接（喜欢和不喜欢）。单击链接时，相应的值会增加或减少。您可以查看该网站：http: [//joke.guluzade.com/jokes/view/24](http://joke.guluzade.com/jokes/view/24)

我想要什么：该用户只能更改此值一次。我用饼干做的。例如，如果用户单击“喜欢”链接，则值 +5 变为 +6。然后，如果您单击“不喜欢”，则该值不得更改。用户应该只有一次喜欢或不喜欢的机会。现在它不能正常工作，如果你点击喜欢你也可以点击不喜欢，但我只想改变一次谎言或不喜欢的价值。

我怎么做：我检查是否设置了 cookie，函数什么也不做，如果没有，它会设置 cookie 并更改值。但是，如果 cookie 设置为喜欢，当您单击不喜欢时，它不会看到该 cookie。

这是代码：

```
function vote ($mm, $id){ //get the parameters (like or dislike and id)
    $name = $mm;
    $value = (int)$id;
    $time = time()+3600;
    if(isset($_COOKIE[$value])){
            redirect($_SERVER['HTTP_REFERER']);
    } else {
        SetCookie($value, $name, $time);
        if($name == "like"){
            $this->db->select('like');
            $this->db->where('id', $id);
            $query = $this->db->get('jokes');
            $data = $query->row_array();
            $likes = $data['like'];
            $likes++;
            $dd = array();
            $dd['like'] = $likes;        
            $this->db->where('id', $id);
            $this->db->update('jokes', $dd);
            redirect($_SERVER['HTTP_REFERER']);                 
        } else {
            $this->db->select('dislike');
            $this->db->where('id', $id);
            $query = $this->db->get('jokes');
            $data = $query->row_array();
            $likes = $data['dislike'];
            $likes--;
            $dd = array();
            $dd['dislike'] = $likes;
            $this->db->where('id', $id);
            $this->db->update('jokes', $dd);   
            redirect($_SERVER['HTTP_REFERER']);               
        }    
    }
} 
```

谁能说，我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T06:54:09.683

使用 get_cookie('some_cookie') 或 get_cookie('some_cookie',TRUE); 而不是 $cookie[$value]。

此外，使用设置完整域的 cookie

```
 $cookie = array(
               'name'   => 'The Cookie Name',
               'value'  => 'The Value',
               'expire' => '86500',
               'domain' => '.some-domain.com',
               'path'   => '/',

                );

               set_cookie($cookie); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T11:07:43.153

您可以从以下帖子中找到答案。

[如何设置 cookie 然后在 PHP 中重定向？](https://stackoverflow.com/questions/612034/how-can-i-set-a-cookie-and-then-redirect-in-php)

[http://www.tek-tips.com/viewthread.cfm?qid=1509045](http://www.tek-tips.com/viewthread.cfm?qid=1509045)

# c# - CRUD数据库中所有表的asp.net公共页面是否存在？

> ID：10546480
> 
> 赞同：0
> 
> 时间：2012-05-11T06:28:13.810
> 
> 标签：c#, asp.net

我想要一个超级管理员的页面来 CRUD 数据库中的所有表。管理员可以使用一个 asp.net 页面在下拉列表中选择特定的表，并可以在该页面上执行 CRUD 操作。

我认为这是数据库访问的常见主题，已搜索但未找到此类模块。谁能给我建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T06:36:53.883

[ASP.NET 动态数据](http://msdn.microsoft.com/en-us/library/ee845452%28v=VS.100%29.aspx)可能是您需要的。

> 动态数据支持脚手架，这是一种为数据库中的每个表自动生成网页的方法。脚手架允许您创建一个功能性网站，用于根据数据模式查看和编辑数据。您可以轻松自定义脚手架元素或创建新元素以覆盖默认行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T06:31:55.803

它不作为内置功能存在，因此您必须自己从头开始实现它。

假设您使用的是 SQL Server，一个好的起点是通过查询系统表（例如 systables 和 syscolumns）来设置屏幕，然后设置 CRUD 操作。

# mysql - 交易像大查询吗？

> ID：10546488
> 
> 赞同：1
> 
> 时间：2012-05-11T06:29:19.830
> 
> 标签：mysql, database, transactions, database-optimization

我知道就效率而言，最好有一个大查询而不是许多小查询，因为最好将与数据库的连接数量减少到最低限度（尤其是在网络流量密集的情况下）。

*所以我的问题是，除了隔离和原子化一组数据库操作（如果其中一个操作*失败则进行回滚）之外，事务是否像一个大查询？我的意思是，如果你需要做很多数据库操作，你能把它包装在一个事务中，然后把它变成一个单一的大操作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T06:33:48.940

这种方法的问题是：你会锁定一些资源并且不利于并发。如果你在一个查询中有一个错误，那么回滚将是巨大的。

我尽量避免交易，如果可能的话，有时我需要实施某种补偿交易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T06:35:25.633

不，如果我明白你在问什么。您可以将事务视为在数据库历史记录中设置检查点，因此如果事务中的任何单个操作失败，则可以将数据库状态恢复到检查点。这是一个很大的简化，但从概念上讲，这就是事务的工作方式。

在事务中，单独的查询是单独执行的。

“一个大查询而不是许多小查询”并不总是更好或更有效。这取决于查询是什么。在一个大查询中请求一组行比一次请求一个更有效。我实际上已经看到了执行此操作的代码（伪代码）：

```
SELECT id FROM people WHERE ... ORDER BY lastname;

for each (id) {
    SELECT firstname, lastname, phone from people WHERE id = {id};
    ...
} 
```

这会更有效率，因为

```
SELECT id, firstname, lastname, phone FROM people WHERE ... ORDER BY lastname; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T06:31:52.717

> 如果你需要做很多数据库操作，你能不能把它包装在一个事务中，把它变成一个单一的大操作

是的。该操作将是原子的，就像单个行更新一样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T06:37:22.933

在磁盘 I/O 方面：可能（取决于事务的大小和许多其他因素）。就您所询问的网络 I/O 而言：**否**。事务在服务器端实现。

# php - 根据时间或两个日期从 Php/Mysql 中的表中选择行？

> ID：10546501
> 
> 赞同：1
> 
> 时间：2012-05-11T06:30:29.177
> 
> 标签：php, mysql, phpmyadmin

嗨，我在 mysql 中有玩家表。

我需要选择在联赛中 6 个月没有参加过比赛的不活跃球员。

例如->

```
select * from players where player (matchplayed == true && (in last 6 months condition)); 
```

我是mysql的新手

所以会喜欢一些如何处理时间的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T06:34:09.930

像这样的事情可能会起作用：

```
SELECT * from players where player_matchplayed == true
 && lastmatch_played_date > DATE_SUB(curdate(),INTERVAL 6 MONTH); 
```

**DATE_SUB(curdate(),INTERVAL 6 MONTH)**将为您提供从当前日期开始的最后六个月的间隔。您可以使用它来检查`lastmatch_playeddate`是否大于它。

希望这可以帮助 。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T06:34:02.310

试试这个查询

```
SELECT * FROM players
WHERE matchplayed IS NOT NULL
AND last_match < NOW() - INTERVAL 6 MONTH 
```

`last_match`是一个 mysql DATE 字段，最后一场比赛信息
`matchplayed`是 NULL（未播放）或已播放的另一个值

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-11T06:33:53.720

看看 mysql 日期/时间函数：[http ://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html)

我认为 DATE_SUB 将完成这项工作或 DATE_DIFF 进行比较。

# java - 异常处理，创建日志并在JAVA中继续程序

> ID：10546504
> 
> 赞同：0
> 
> 时间：2012-05-11T06:30:39.457
> 
> 标签：java, exception, text, io, iteration

我正在用 JAVA 设计一个程序，该程序在大约 10 次迭代中捕获结果。在这些迭代结束时，所有结果都必须写入日志文件。

如果发生任何异常，那么它应该写在我的文本文件中，其次程序不能停止，它必须继续直到最后一次迭代完成......

也就是说 - 如果任何迭代的任何部分发生错误，*程序不能停*在这里。该错误必须在我的结果中以错误名称提及，并且它必须继续并更新我的日志文件。

到目前为止，我的代码有点长...使用了 try-catch，try 块正在执行我的计算并编写我的文本文件，但是如果发生某些异常，我需要我的程序不能停止并且必须在我的日志中更新该异常文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T06:36:47.867

```
OutputStream os = ....;
PrintStream  ps = new PrintStream(os);

while(notDone) {
    try {
        doStuff();
    }
    catch(Throwable t) {
        t.printStackTrace(ps);
    }
    ps.print(results);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T06:32:41.533

您正在寻找`try`-`catch`块。例如，请参阅[本教程](http://docs.oracle.com/javase/tutorial/essential/exceptions/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T06:52:44.193

情况是，在这种问题中，您最好提供给我们一个示例代码，这样我们才能确定问题没有任何问题。

如果您只需要查看错误，那么“e.printStackTrace”将为您提供帮助。“e”是类“Exception”的一个实例。

但是，如果您需要 LOG，那么“Logger”类将帮助您，使用 Exception 类。例如，

```
try {
                    f = location.createNewFile();
                } catch (IOException ex) {
                    Logger.getLogger(TestForm.class.getName()).log(Level.SEVERE, null, ex);
                } 
```

要完成所有这些，最好用 try catch 块包围你的代码

# javascript - jquery 查找函数

> ID：10546508
> 
> 赞同：1
> 
> 时间：2012-05-11T06:30:55.513
> 
> 标签：javascript, jquery, jquery-selectors

如何通过 jquery find 选择特定的元素 id？或者甚至有可能？

HTML：

```
 <div id="bar">
    <a id="1" href="#"></a>
    <a id="2" href="#"></a>
    <a id="3" href="#"></a>
    <a id="4" href="#"></a>
    </div>

Javascript:

 $('#bar a').find('id',2).css("background-color","blue"); 
```

但不工作

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T06:33:36.227

ID**必须是唯一的**，因此只需使用`$('#2')`来选择元素。通常不需要使 ID 选择器更具体，这样做只会减慢它的速度。

除此之外，除非您使用 HTML5，否则 ID 不能以数字开头。使用 eg`whatever-2`而不是仅仅`2`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T06:32:02.593

```
$('#bar a#1') 
```

将选择 id 为“1”的。

Alltho，#1 不是有效的 ID 名称，我认为它们不能以数字开头。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T06:32:10.500

要么找到后代

```
$('#bar').find('#2').css("background-color","blue"); 
```

或过滤后代

```
$('#bar a').filter('#2').css("background-color","blue"); 
```

或通过上下文获取：

```
var parent = $('#bar');
$('#2',parent).css("background-color","blue"); 
```

或者直接获取！因为 ID 无论如何都是唯一的（除非您经常在页面中移动此元素，这就是您需要父元素的原因）：

```
$('#2').css("background-color","blue"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T06:33:26.413

[您可以使用 eq 方法通过索引http://api.jquery.com/eq/](http://api.jquery.com/eq/)获取元素

```
 $('#bar a').eq(2).css("background-color","blue"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T06:39:05.687

使用 find() 搜索 id 没有意义，因为根据定义 id 必须是唯一的。当您想在任何父元素中查找类或 html 标记元素时，Find() 函数会更好。文档中的好例子：当您想更改特定元素内所有跨度的 css 时，请使用 find：

```
 $("p").find("span").css('color','red'); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-11T06:43:51.747

你可以试试 $("#bar").find("#2").css("background-color", "blue");

正如 ThiefMaster 所说，你可以随时使用 $("#id").css("background-color", "blue");

# ios - 将 JSON 数据映射到 Objective-C 数据模型类的解决方案？

> ID：10546509
> 
> 赞同：1
> 
> 时间：2012-05-11T06:30:57.213
> 
> 标签：ios, json, parsing, persistence

服务器端通常为不同的客户端提供 JSON 数据响应，例如浏览器、iOS 客户端应用程序、Android 客户端应用程序等。

在客户端，一些解析器将用于将此类 JSON 数据转换为由 Objective-C 或 Java 等定义的特定数据模型类（取决于语言或设备客户端）。

我们真的需要在 JSON 数据和数据模型类之间进行转换吗？或者只是充分利用 JSON 的解决方案（持久化 JSON 数据，使用 JSON 数据？）

或者，如果我们真的需要做一些类似转换的事情，有什么好的做法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T06:47:55.763

我认为这是将 JSON 数据映射到数据模型/对象的最简单方法。

看看[RestKit](http://restkit.org/)：

> RestKit 是一个用于 iOS 的 Objective-C 框架，旨在使与 RESTful Web 服务的交互变得简单、快速和有趣。它结合了干净、简单的 HTTP 请求/响应 API 和强大的对象映射系统，减少了完成工作所需编写的代码量。

在我看来，这是处理 JSON/XML RESTful Web 服务的最好和最简单的方法。您可以轻松地将 JSON 映射到对象，甚至直接映射到核心数据中的托管对象。

# jquery - 在幻灯片结束时上一页

> ID：10546510
> 
> 赞同：0
> 
> 时间：2012-05-11T06:30:57.587
> 
> 标签：jquery, slideshow

我有一个非常简单的幻灯片，但最后它会上升。所以它看起来像一个老虎机。但这不是我想要的。我在 jQuery 方面不是很有经验，但我认为我需要一个 if 语句。

但是最简单的方法是什么？我正在努力学习，所以不要给我直接的答案:-)

```
function slideShow (){
var current = 1;
var start=1;
var top = 194;
var zero = 0;
var transition = 3000;

$.timer(transition*4, function (change) {
    switch(current){
        case 1:
            $(".slide").stop().animate({top: -top+"px"}, { duration: transition});
            current++;
        break;
        case 2:
            $(".slide").stop().animate({top: -top*2+"px"}, { duration: transition});
            current++;
        break;
        case 3:
            $(".slide").stop().animate({top: -top*3+"px"}, { duration: transition});
            current++;
        break;
        case 4:
        $(".slide").stop().animate({top: zero+"px"}, {duration: transition});
            current = start;
        break;  
        timer.reset();
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T06:35:51.563

当您到达**'case 4'**时，您再次将*'current'*变量设置为 1。因此，您的滑块从**'case 1'**开始，从而产生老虎机效果。

此外，在您的第四次切换之后， timer.reset() 代码无法访问，因为它在中断之后。

# android - 在同一应用程序的 PreferenceActivity 和 Service 中管理 SharedPreferences

> ID：10546511
> 
> 赞同：1
> 
> 时间：2012-05-11T06:31:00.660
> 
> 标签：android, sharedpreferences, android-service, android-preferences, preferenceactivity

我正在构建一个带有*PreferenceActivity*和*Service*的应用程序（由于*android:process=":remote"*标志在它自己的远程进程中运行）并且两者都需要以编程方式访问*SharedPreferences*。目前，我正在使用以下代码获取*SharedPreference对象，该对象使用**Service*和*PreferenceActivity*类中定义的*getSharedPreferences*方法：

 **```
SharedPreferences sharedPrefs = getSharedPreferences("com.mypackage_preferences", MODE_PRIVATE, MODE_MULTI_PROCESS) 
```

这和下面的一样吗？

```
SharedPreferences sharedPrefs = PreferenceManager.getDefaultSharedPreferences() 
```

**1）**在第二个中我不能指定标志，或者有没有办法指定它们？

**2）**我是否真的需要指定 MODE_MULTI_PROCESS 因为我正在访问/修改来自*Service*和*PreferenceActivity*的共享首选项？我认为大多数时候你有一个修改属性的*PreferenceActivity和另一个读取/修改它们的**Activity ，所以 MODE_MULTI_PROCESS 几乎总是需要，或者只有在对**SharedPreferences*有多个并且可能同时访问时才需要它（如在我的情况下，当您在*PreferenceActivity*中编辑首选项时，后台服务可以处于活动状态）

**3)** [MODE_MULTI_PROCESS](http://developer.android.com/reference/android/content/Context.html#MODE_MULTI_PROCESS%20MODE_MULTI_PROCESS)的文档说*在应用程序有多个进程的情况下有时需要这种行为，所有进程都写入同一个 SharedPreferences 文件*，这是否意味着我的*Service*和我的*PreferenceActivity*可以指向不同的首选项文件？如何更改*PreferenceActivity*中的首选项文件名？

**4)**以这种方式命名共享首选项是因为它们在您的应用程序的所有组件（活动、服务等）之间共享，对吗？非共享首选项（即您可以在活动中使用*getPreferences()*获得的首选项）对于创建它们的组件是本地的，但被保存在同一个 *com.mypackage_preferences* 文件中？这可以回答我在第**3 点中的疑问）**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T07:34:06.293

`MODE_MULTI_PROCESS`仅当您从不同**进程**访问首选项时才需要。如果您只是有使用共享首选项的不同活动，那么您不需要`MODE_MULTI_PROCESS`.

你提到你有一项服务。只要该服务与您仍然不需要的活动在同一进程中运行`MODE_MULTI_PROCESS`。除非您在清单`android:process="..."`中的标记中指定，否则该服务将默认在同一进程中运行。`<service>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T20:23:48.080

另一大优势：繁忙服务中的垃圾收集不会干扰用户界面中的动画。**

# c++ - 初始化宽字符数组

> ID：10546514
> 
> 赞同：0
> 
> 时间：2012-05-11T06:31:38.350
> 
> 标签：c++

我有一个宽 char 变量，我想用一个字符串大小对其进行初始化。我尝试了以下但没有奏效。

```
std::string s = "aaaaaaaaaaaaaaaaaaaaa"; //this could be any length 
const int Strl = s.length();
wchar_t wStr[Strl ]; // This throws error message as constant expression expected. 
```

我有什么选择来实现这一目标？malloc 在这种情况下会起作用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T06:32:17.507

由于这是 C++，请使用`new`而不是`malloc`.

它不起作用，因为 C++ 不支持 VLA。（可变长度数组）

数组的大小必须是编译时常量。

```
 wchar_t* wStr = new wchar_t[Strl];

 //free the memory
 delete[] wStr; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T06:35:04.107

首先，你*不能*只是将一个字符串复制到一个宽字符数组中——一切都会对你发狂。

A`std::string`是用 建造的`char`，a`std::wstring`是用 建造的`wchar_t`。将 a 复制`string`到 a`wchar_t[]`是行不通的——你会得到胡言乱语。阅读 UTF8 和 UTF16 以获取更多信息。

也就是说，正如[Luchian](https://stackoverflow.com/users/673730/luchian-grigore)所说，[VLA 不能在 C++ 中完成](https://stackoverflow.com/a/10546523)，他的堆分配可以解决问题。

但是，我必须问你*为什么*要这样做？如果您正在使用`std::string`，则（几乎）不需要使用字符数组。我假设您正在尝试将字符串传递给以字符数组/指针作为参数的函数 - 您知道`.c_str()`将返回指向内容的指针的字符串函数吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T06:50:46.527

```
std::wstring ws;
ws.resize(s.length()); 
```

这将为您提供一个 wchar_t 容器，该容器将用于此目的，并且在概念上是一个可变长度容器。并尽量远离 C++ 中的 C 样式数组，标准容器适合各种情况，包括与 C api 库的接口。如果您需要将字符串从 char 转换为 wchar_t ，c++11 引入了一些字符串转换函数来将 wchar_t 转换为 char，但我不确定它们是否可以反过来工作。

# jquery - 通过 href 链接到的图像的 jQuery 预加载

> ID：10546520
> 
> 赞同：-2
> 
> 时间：2012-05-11T06:32:06.510
> 
> 标签：jquery

我已经链接了图像 src 表单 href 并添加了导航到图像现在我的图像加载非常慢所以我需要预加载 href 链接到 img src 的图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T06:39:55.460

您可以做的是将所有这些图像设置在第一页底部，宽度为 0px，就像这是最简单的方法，对我来说效果很好

# sql-server - FOR LOGIN 和 FROM LOGIN 有什么区别

> ID：10546538
> 
> 赞同：2
> 
> 时间：2012-05-11T06:33:38.007
> 
> 标签：sql-server, tsql

使用 SQL Server 身份验证基于登录创建用户时，CREATE USER 语句中的 FOR LOGIN 和 FROM LOGIN 有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T06:35:29.640

没有什么。但是，您必须使用其中一种。

[MSDN](http://msdn.microsoft.com/en-us/library/ms173463.aspx)上用于 CREATE USER 的各种示例显示了这一点。

# java - Android：在图片捕获后添加新按钮以接受/拒绝图像

> ID：10546541
> 
> 赞同：1
> 
> 时间：2012-05-11T06:33:49.553
> 
> 标签：java, android, android-intent, sdk, android-camera

我还是开发新手，我想知道是否有人可以在我的情况下引导我朝着正确的方向前进，因为我不确定从哪里开始：

方案：

按 a`capture_button`捕获图像（`capture_button`并且`imagePreview`处于同一活动中）后，我想删除`capture_button`并有一个`ACCEPT`或`DECLINE`按钮。这些按钮应该是`accept`图像然后保存，或者`decline`图像并返回图像预览。

现在，我不确定是否应该在`capture_button`按下时创建另一个活动，

PhotoActivity.java

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.photo);

        mCamera = getCameraInstant();
        mCameraPreview = new CameraPreview(this, mCamera);

        FrameLayout preview = (FrameLayout) findViewById(id.camera_preview);
        preview.addView(mCameraPreview);

        // Add a listener to the Capture button
        Button captureButton = (Button) findViewById(id.button_capture);
        captureButton.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {
                    // get an image from the camera
                    mCamera.takePicture(null, null, mPicture);

                }
            }
        );  
    }

PictureCallback mPicture = new PictureCallback(){
        @Override
        public void onPictureTaken(byte[] data, Camera camera) {
        Log.e("photo","pictureCallback");   
            // TODO Auto-generated method stub
            File pictureFile = getOutputMediaFile(MEDIA_TYPE_IMAGE);
            if(pictureFile==null){
                return;
            }
            try {
                FileOutputStream fos = new FileOutputStream(pictureFile);
                fos.write(data);
                fos.close();
            } catch (FileNotFoundException e) {
                Log.d(TAG, "File not found: " + e.getMessage());
            } catch (IOException e){
                Log.d(TAG, "Error accessing file: " + e.getMessage());
            }
        }
};

    private File getOutputMediaFile(int type){
        File mediaStorageDir = new File(Environment.getExternalStoragePublicDirectory(
                  Environment.DIRECTORY_PICTURES), "Photo");
        if (!mediaStorageDir.exists()){
            if (! mediaStorageDir.mkdirs()){
                Log.d("Photo", "failed to create directory");
                return null;
            }
        }
        // Create a media file name
        String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss").format(new Date());
        File mediaFile;
            mediaFile = new File(mediaStorageDir.getPath() + File.separator +
            "IMG_"+ timeStamp + ".jpg");
        return mediaFile;
    } 
```

现在，我应该`Intent`在`capture_button`点击后做某种事情，还是在

```
PictureCallback mPicture = new PictureCallback(){ 
```

然后`onPictureTaken`参加其他活动？还是我的想法全错了？

请帮忙？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T08:17:04.850

我做过的一件事是使用拍照后弹出的警报对话框。您可以设置 onclick 侦听器以执行您需要的任何操作，具体取决于您想要发生的事情（接受或拒绝）。这将避免对布局进行任何更改并添加按钮并将它们删除。您可以通过将 alertdialog.show() 方法放在 onPictureTaken 方法的末尾来启动 alertdialog。

如果你这样做，你必须有你刚刚拍摄的图像的文件路径，这样你就可以允许用户在他们拒绝它时销毁它，并且在某些设备上，媒体服务可能需要几秒钟来更新图像文件路径，所以如果你去破坏它看不到的图像，你可以用力关闭。有几种方法可以做到这一点，我现在不记得了，但其中一种比其他方法快得多。

除非您计划启动其他类型的操作、活动、服务等，否则您不需要意图。例如，如果您想将图像的文件路径传递给另一个活动，您可以对其进行更改、上传或其他活动，您可以将图像的文件路径添加到这样的意图：intent.putExtra("图像路径”，图像路径）；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T07:08:02.677

试试这个它会帮助你

```
 final LinearLayout accept_deciline  = new LinearLayout(getApplicationContext());
       LayoutParams lp = new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT);
       accept_deciline.setOrientation(LinearLayout.HORIZONTAL);
       Button accept = new Button(getApplicationContext());
       accept.setText("Accept");
       Button decline = new Button(getApplicationContext());
       decline.setText("Decline");
       accept_deciline.addView(accept);
       accept_deciline.addView(decline);
       addContentView(accept_deciline, lp);
       accept_deciline.setVisibility(View.INVISIBLE);

       accept.setOnClickListener(new View.OnClickListener() {
           @Override
           public void onClick(View v) {
               // SAVE YOUR IMAGE.
           }
       });

       decline.setOnClickListener(new View.OnClickListener() {

           @Override
            public void onClick(View v) {
            }
       });
       //KEEP THIS LINE IN YOUR PICTURE CALLBACK NOT HERE.
       accept_deciline.setVisibility(View.VISIBLE); 
```

如果您在 XML 文件中创建您的接受拒绝布局并使其不可见，当您拍摄的照片将被调用时，它会更好，只是让它可见。

# php - 无法访问 $.getJSON 函数

> ID：10546548
> 
> 赞同：0
> 
> 时间：2012-05-11T06:34:06.290
> 
> 标签：php, javascript, jquery, json

这是一个尝试访问 $.getJSON 的代码，但它没有响应。这可能是什么原因。

```
 function getTerms()
        {
            alert("hello"); //it alerts hello           
            $.getJSON('http://localhost/context-search.php?callback=?', function(r) {
                //not here
                alert("Hello");
            });
        }
        $(document).ready(function(){
        alert("hello");         
        getTerms(); 
    }); 
```

context-search.php 以如下形式返回 json 数据

**{"options":["osi","tcp","ip","http 协议","ethernet","网络协议","协议含义\n"]}**

我哪里可能出错了？？请帮我解决这个问题！谢谢你！！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T06:38:18.600

你检查你的控制台日志了吗？如果它不包含错误，请改为执行这样的 json 请求

```
$.ajax({
    url: url,
    dataType: 'json',
    data: data,
    success: function(){},
    error: function(jqXHR, textStatus, errorThrown) {
        console.log("error " + textStatus);
        console.log("incoming Text " + jqXHR.responseText);
    }
}); 
```

这将为您提供适当的错误处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T06:41:42.590

可能是[同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)。假设这是在 localhost 上运行的，您是否尝试过

$.getJSON('/context-search.php?callback=?', ...);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T06:43:52.033

像这样使用

```
 $(document).ready(function(){
  $.getJSON('/ITTA/SavePreference/?t=' + new Date(), { id: id3 },
                   function (data) {
                       if (data != null && data != undefined && data != '') {
                           top.location.href = '/ITTA/Entries/' + id3;
                       }
                   }); }); 
```

# java - 如何在 jsp 上显示在服务器上生成的 Jfreechart 图像

> ID：10546559
> 
> 赞同：1
> 
> 时间：2012-05-11T06:35:19.457
> 
> 标签：java, spring-mvc, jfreechart

我是 jfreechart 的新手。我已经制作了一个条形图并将其作为图像存储在 java.io.tmpdir 的服务器上。它一切正常。现在我想要在我的 jsp 页面上显示这个图像。在我的控制器上
`String imageFile = System.getProperty("java.io.tmpdir") + "barChart.jpeg";`

 ````
 File file = new File (imageFile);

    uiModel.addAttribute("path", file.getAbsolutePath()); 
```` 

`在 jsp 上我正在做 `< img src=${path} />` ，但这不起作用。`

 `请帮助我如何在 jsp 上显示该图像。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T06:38:04.760

```
<%-- 
    Document   : s1
    Created on : 23.07.2012, 15:36:31
    Author     : r.khamidullin
--%>

<%@page import="org.jfree.chart.renderer.xy.XYStepAreaRenderer"%>
<%@page import="org.jfree.chart.renderer.xy.XYShapeRenderer"%>
<%@page import="org.jfree.chart.renderer.xy.XYBarRenderer"%>
<%@page import="org.jfree.chart.renderer.xy.XYDotRenderer"%>
<%@page import="org.jfree.chart.renderer.xy.XYItemRenderer"%>
<%@page import="org.jfree.chart.plot.XYPlot"%>
<%@page import="org.jfree.data.time.TimeSeriesCollection"%>
<%@page import="org.jfree.data.time.TimeSeries"%>
<%@page import="java.io.OutputStream"%>
<%@page import="org.jfree.chart.JFreeChart"%>
<%@page import="org.jfree.chart.ChartFactory"%>

<%@page import="org.jfree.chart.ChartUtilities"%>
<%@page import="java.sql.ResultSet"%>
<%@page import="java.sql.PreparedStatement"%>
<%@page import="java.sql.SQLException"%>
<%@page import="java.sql.DriverManager"%>
<%@page import="java.sql.Connection"%>
<%@page contentType="image/png" pageEncoding="UTF-8"%> 
        <%

            Connection conn = null;
            try {

                Class.forName("com.mysql.jdbc.Driver").newInstance();
            } catch (Exception ex) {
            }
            try {
                conn =
                        DriverManager.getConnection("jdbc:mysql://localhost:3306/xxx?"
                        + "user=xxxz");

            } catch (SQLException ex) {

                System.out.println("SQLException: " + ex.getMessage());
                System.out.println("SQLState: " + ex.getSQLState());
                System.out.println("VendorError: " + ex.getErrorCode());

            }

            PreparedStatement statement = null;
            ResultSet resultSet = null;

            statement = conn.prepareStatement("SELECT * FROM XXX where CURRENT_TIMESTAMP - ddatetime < 12000 and XXX is not null and XXX < 100000");
            resultSet = statement.executeQuery();
        TimeSeries s1;
        s1 = new TimeSeries("Delays, sec");

        TimeSeriesCollection dataset = new TimeSeriesCollection();
        dataset.addSeries(s1);
            while (resultSet.next()) {
                s1.addOrUpdate(org.jfree.data.time.Second.parseSecond( resultSet.getString("ddatetime").substring(0, 19)), resultSet.getInt("XXX"));

            }

        JFreeChart mychart = ChartFactory.createTimeSeriesChart("Delays", "T, sec", "DateTime", dataset, true, true, true);

        XYPlot plot = (XYPlot) mychart.getPlot(); // график
        //plot.setRenderer(new XYDotRenderer()); // точки
        plot.setRenderer(new XYBarRenderer() ); //столбики
        //plot.setRenderer(new XYShapeRenderer() ); // кружки - shapes
        //plot.setRenderer(new XYStepAreaRenderer() );
        ChartUtilities.writeChartAsPNG(response.getOutputStream(), mychart, 800, 200);
        out.close();
            statement.close();

        %> 
````

# c# - 在 C# 中动态创建和释放控件

> ID：10546564
> 
> 赞同：1
> 
> 时间：2012-05-11T06:35:26.240
> 
> 标签：c#, .net, winforms

作为 .NET 领域的新手并来自 Delphi 背景，我习惯于动态创建控件并在需要时手动释放它们。

在.net 中，被垃圾收集等等，我猜你不需要显式释放控件。

在我的情况下（WinForms），我动态地填充了一个带有面板的 flowLayoutPanel，其中包含一些其他控件。在某些情况下，我需要移除一些面板。我正在做的事情是

```
flowPanel.Controls.Remove(thePanelToRemove); 
```

这具有所需的效果：面板从 flowLayoutPanel 中消失，但我没有得到的是：垃圾收集器是否删除了控件？这将是理想的行为，因为我将创建许多控件，当用户删除它们时将不再使用它们。如果没有，我如何确定控件被释放？类似的东西（伪代码）

```
flowPanel.Controls.Remove(thePanelToRemove);
thePanelToRemove.Free(); 
```

或类似的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T06:38:59.517

简短的回答：是的，垃圾收集器会在需要内存时移除控制。

更长的答案：一些控件声称垃圾收集器无法释放的资源。这些控件实现了 IDisposable 接口，当您不再需要它时，您应该在控件上调用 dispose。Dispose 将清理这些非托管资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T06:37:10.563

> 这具有所需的效果：面板从 flowLayoutPanel 中消失，但我没有得到的是：垃圾收集器是否删除了控件？

是的，当一个对象超出范围时，它就有资格进行垃圾回收。您不需要调用任何 .Free 方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T06:37:18.347

假设控件没有被其他东西引用，它的引用计数将在删除时降至零，并且将按预期进行垃圾收集。这是一个简化的描述（如果您想阅读更多内容，请点击下面的链接），但作为*完全托管*资源的一般规则，您很少需要担心确定性处置和最终确定。

当然，控件引用的任何*非托管资源都应该被适当地释放和/或处置。*非托管资源可以是文件流、数据库连接、对分配给图像处理的非托管字节数组的引用、从 Win32 API 获得的窗口句柄等。

[.Net 中的垃圾收集](http://msdn.microsoft.com/en-us/library/ms973837.aspx)概述（旧文章，但看起来仍然准确，除了[c# 4.0 的 GC 更改](http://geekswithblogs.net/sdorman/archive/2008/11/07/clr-4.0-garbage-collection-changes.aspx)）。

更多[垃圾收集](http://www.c-sharpcorner.com/UploadFile/DipalChoksi/UnderstandingGarbageCollectioninNETFramework11292005051110AM/UnderstandingGarbageCollectioninNETFramework.aspx)。

# java - 使用 Play 创建 zip 文件很热门！框架？

> ID：10546565
> 
> 赞同：1
> 
> 时间：2012-05-11T06:35:26.870
> 
> 标签：java, playframework, zip

我有一堆公共资产，我想压缩并提供下载。

Play中有没有简单的方法！为文件/文件夹列表创建一个 zip？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T06:38:37.150

我想你总是可以使用 Java 库。有关详细信息，请参阅[JavaDocs](http://docs.oracle.com/javase/6/docs/api/java/util/zip/package-summary.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T07:59:19.267

`play war "project_dir" -o "war_file_name" --zip`

注意：我使用的是 Play-1.2.3

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T05:42:47.650

您可以使用 Play 助手类 Files.zip

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-01T19:07:45.557

在控制器中使用这个：

```
public class Public extends Controller {
  public static void download() {
    File dir = VirtualFile.fromRelativePath("/dir-to-zip/").getRealFile();
    File zip = VirtualFile.fromRelativePath("/files.zip").getRealFile();
    Files.zip(dir, zip);
    renderBinary(zip);
  }
} 
```

然后将其添加到您的路线文件中：

```
*        /download                 Public.download 
```

请注意，文件路径来自您的应用程序根目录，而不是您的文件系统根目录。

# iphone - IOS异步请求中的开放数据协议

> ID：10546566
> 
> 赞同：0
> 
> 时间：2012-05-11T06:35:28.053
> 
> 标签：iphone, objective-c

我们如何请求 OData 提要 URL 异步。SDK 提供同步请求。我们需要有异步请求才能使 UI 不阻塞。

[http://www.odata.org/](http://www.odata.org/)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T06:40:08.813

您还可以通过同步请求避免 UI 冻结

```
[self performSelectorInBackground:@selector(sendRequest) withObject:nil]; 
```

UI 不会冻结

# java - 如何使代理静止并创建新代理并在其上添加参数并将其移动到远程？

> ID：10546567
> 
> 赞同：0
> 
> 时间：2012-05-11T06:35:28.117
> 
> 标签：java, agents-jade

我是第一次在 Jade 编程。我需要一些关于代理流动性问题的帮助。

为了让 Jade 的代理成为固定移动，我应该扩展jade.core.Agent 还是其他类？如果我希望它将我在本地创建的新代理的参数移动或分派到远程，我该怎么办？当我发送它时，我是否需要知道远程主机的地址或代理？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T13:33:01.703

没有什么像固定或远程代理。您编写的任何代理都将扩展 jam.core.Agent 类。您编写的每个代理都能够通过两种方式移动到远程主机：

1.  通过满足某些条件或接收到来自其他代理的触发消息时的循环行为，在代理内部调用 doMove() 方法。

2.  使用 move-agent ontology 请求 AMS 代理移动您的代理。

现在来了解目的地地址。将您的应用程序创建为具有远程容器的单个分布式平台通常是一种很好的做法，要移动代理，您所需要的只是要移动到的远程容器名称。如果你想跨平台代理移动你必须使用一个 JADE 插件，它默认不启用。

# grails - 更新 grails 域、控制器和视图类

> ID：10546569
> 
> 赞同：0
> 
> 时间：2012-05-11T06:35:40.580
> 
> 标签：grails, code-generation

我是 Grails 框架的新手。

在试了一下之后，我创建了自己的域类并使用 generate-all 功能来生成控制器和视图。在此之后，我修改（添加了一些更多需要的功能并删除了一些不需要的东西）生成的控制器和视图。该应用程序运行没有问题。

接下来，我需要对我已经创建和自定义的控制器和视图的域类进行某些更改。对域类进行更改后，有什么方法（或正确的方法）可以重新生成控制器并查看我以前的更新完好无损的类。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T06:42:33.700

执行 grails install-templates 安装模板并修改它们 ( [http://grails.org/doc/1.3.7/ref/Command%20Line/install-templates.html](http://grails.org/doc/1.3.7/ref/Command%20Line/install-templates.html) )

下次生成视图和/或控制器时，将使用这些更改的模板。

# performance - JMeter中的thread.join之类的东西？

> ID：10546572
> 
> 赞同：0
> 
> 时间：2012-05-11T06:35:56.633
> 
> 标签：performance, jmeter

我有大约 50 个用户的 jmeter 测试。测试的开始执行登录和一些设置的东西。我不希望这一切同时发生，因为对于我不感兴趣的部分测试会有太多的争用。所以我有一个 10 秒的加速期。然后有一个特定的 HTTP 请求，我希望 50 个用户发送超过 1 秒的时间间隔，即每 20 毫秒发送一个 HTTP 请求。这是为了确保 50 个用户同时执行这部分。理想情况下，登录/加速后的 thread.join() 之类的东西会在这里有所帮助，然后是另一个高斯计时器。

jmeter中是否有类似于thread.join（）的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T07:57:59.663

要模仿 thread.join，您可以使用[Synchronizing Timer](http://jmeter.apache.org/usermanual/component_reference.html#Synchronizing_Timer)，这将阻塞 n 个线程，直到它们到达一个点，然后同时执行它们。

如果您希望每 20 毫秒 1 的请求负载继续（而不是单次突发），那么您可以使用[恒定吞吐量控制器](http://jmeter.apache.org/usermanual/component_reference.html#Constant_Throughput_Timer)来定义您希望 JMeter 运行的实际请求速率。您可以将每个线程配置为以每分钟 60 个请求的速率运行，这将使您每 20 毫秒命中一次（基于 50 个响应时间始终小于 1 秒的线程）。您还可以告诉 JMeter 确保负载为 1/20 毫秒，无论您使用多少线程，它都会动态调整。此选项在负载测试的上下文中可能更有用。

笔记。使用 CTT 控制器时，您可能希望将登录请求放在[Once Only COntroller](http://jmeter.apache.org/usermanual/component_reference.html#Once_Only_Controller)或[设置线程组](http://jmeter.apache.org/usermanual/component_reference.html#setUp_Thread_Group)中。

# java - 根据特定条件将实体映射到不同的表

> ID：10546577
> 
> 赞同：1
> 
> 时间：2012-05-11T06:36:12.593
> 
> 标签：java, hibernate, jpa, orm

我有一个名为 Transaction 的实体，它在数据库中的相关表是 TAB_TRANSACTIONS。整个系统运行良好；现在出现了一个新要求，其中客户要求将所有超过 30 天的事务移到另一个存档表，例如 TAB_TRANSACTIONS_HIST。

目前，作为一种解决方法，我给了他们一个计划每 24 小时运行一次的脚本，它只是将数据从 Source 移动到 Dest。

我想知道使用休眠有没有更好的解决方案？

我可以获取事务实体，然后将它们存储在 TAB_TRANSACTIONS_HISTORY 中吗？我查看了许多类似的问题，但找不到解决方案，任何建议都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T07:08:02.450

我认为，只有依靠两种不同的持久性上下文才能实现您搜索的解决方案。

单个持久性上下文以非动态方式将实体映射到表，因此您无法执行从映射表到另一个表的“运行时切换”。但是您可以创建一个不同的持久性上下文（或在休眠中并行配置，而不是使用 2 个不同的上下文），然后在不同的 EntityManager 中加载这个新配置，并执行所有任务。

这是目前唯一想到的解决方案。真的不知道够不够。。。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T07:28:20.590

您可能希望为此任务创建一个石英调度程序。这是`Job`调度程序

```
public class DatabaseBackupJob implements Job {
    public void execute(JobExecutionContext jec) throws JobExecutionException {
        Configuration cfg=new Configuration();
        cfg.configure("hibernate.cfg.xml");
        Session session = cfg.buildSessionFactory().openSession();
        Query q = session.createQuery("insert into Tab_Transaction_History(trans) select t.trans as trans from Tab_Transaction t where t.date < :date")
        .setParameter("date", reqDate);
        try{
           Trasaction t = session.beginTransaction();
           q.executeNonQuery();
           t.commit();
        } catch(Exception e){
        } finally {
           session.close();
        }
    }

} 
```

PS hibernate 不提供调度程序，因此您无法使用核心 hibernate 执行此活动，因此您需要外部 API，如石英调度程序

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T07:08:29.270

我认为每 24 小时运行一次脚本是个好主意。如果你不开心，你可以缩短间隔。

但是，如果您已经有一个工作脚本，那么您的实际问题在哪里？检查所有交易的年龄并将超过 30 天的交易移动到另一个列表或地图是我认为的最佳方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T11:08:55.193

您将需要某种调度机制。可以是定期唤醒的线程，也可以是其他适合您的触发器。

您还可以使用批量插入操作

```
Query q = session.createQuery(
"insert into TabTransactionHistory tth
(.....)
select .... from TabTransaction tt"
);
int createdObjects = q.executeUpdate(); 
```

（用实际字段替换 ...）

您还可以使用“where 子句”，该子句可用于根据条目的年龄来缩减结果。

# knockout.js - 提供带有敲除重复的点击索引

> ID：10546579
> 
> 赞同：0
> 
> 时间：2012-05-11T06:36:22.263
> 
> 标签：knockout.js, knockout-2.0

我正在尝试为单击处理程序提供一些单击链接。由于某种原因，它提供了整个淘汰模型，而不是 $index。这是jsfiddle：http: [//jsfiddle.net/yaroslavya/hfWs8/13/](http://jsfiddle.net/yaroslavya/hfWs8/13/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T11:48:25.603

第一个参数`.bind`确定`this`处理程序中的内容。因此，您可以`$index`作为第二个参数传递，也可以使用`this`当前代码在处理程序中进行操作。

示例：http: [//jsfiddle.net/rniemeyer/Ff9rh/](http://jsfiddle.net/rniemeyer/Ff9rh/)

# delphi - 在 Delphi 中旋转 TImage

> ID：10546582
> 
> 赞同：3
> 
> 时间：2012-05-11T06:36:28.740
> 
> 标签：delphi, image-processing, rotation

我只是为了好玩而使用虚拟桌面与朋友一起玩[Magic The Gathering 。](http://en.wikipedia.org/wiki/Magic%3a_The_Gathering)我使用的是 Delphi 2010。卡片在应用程序中由`TImage`组件表示（加载从数据库加载的卡片的 PNG 文件）。这里的重点是，在 MTG 中，一个非常常见的做法是点击一张牌（将其向右旋转 90 度）。有一种简单的方法可以做到这一点吗？我真的不需要“动画”，只需单击旋转一次的卡片（动画会很好）。游戏应该与许多卡片同时工作，并且它们可以在表格中的任何位置移动。我正在考虑在数据库中点击和取消点击卡片的图像，但如果有一种很好且有效的方式来旋转卡片，这可能是一种矫枉过正的做法。

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T20:47:52.147

这样做的老式方法是使用[PlgBlt](http://msdn.microsoft.com/en-us/library/dd162804%28v=vs.85%29.aspx)。

```
procedure RotateBitmap90CW(b1,b2:TBitmap);
var
  x,y:integer;
  p:array[0..2] of TPoint;
begin
  x:=b1.Width;
  y:=b1.Height;
  b2.Width:=y;
  b2.Height:=x;
  p[0].X:=y;
  p[0].Y:=0;
  p[1].X:=y;
  p[1].Y:=x;
  p[2].X:=0;
  p[2].Y:=0;
  PlgBlt(b2.Canvas.Handle,p,b1.Canvas.Handle,0,0,x,y,0,0,0);
end; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-11T12:03:46.747

或者您可以离开[`TImage`](http://docwiki.embarcadero.com/Libraries/en/Vcl.ExtCtrls.TImage)并使用例如[`TPaintBox`](http://docwiki.embarcadero.com/Libraries/en/Vcl.ExtCtrls.TPaintBox)和 GDI+ 库。GDI+ 有 [`RotateFlip`](http://msdn.microsoft.com/en-us/library/ms535401%28v=vs.85%29.aspx)直接执行此操作的方法。使用[`GDI+ Library for Delphi`](http://www.bilsen.com/gdiplus/index.shtml)它看起来像：

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls, ExtCtrls, ActiveX, GDIPOBJ, GDIPAPI;

type
  TForm1 = class(TForm)
    Button1: TButton;
    PaintBox1: TPaintBox;
    procedure FormCreate(Sender: TObject);
    procedure FormDestroy(Sender: TObject);
    procedure Button1Click(Sender: TObject);
    procedure PaintBox1Paint(Sender: TObject);
  private
    FImage: TGPImage;
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

procedure TForm1.FormCreate(Sender: TObject);
var
  Stream: IStream;
  BlobStream: TMemoryStream;
begin
  BlobStream := TMemoryStream.Create;
  try
    // assuming the BlobStream here has a valid image loaded from a database
    Stream := TStreamAdapter.Create(BlobStream);
    FImage := TGPImage.Create(Stream);
  finally
    BlobStream.Free;
  end;
end;

procedure TForm1.FormDestroy(Sender: TObject);
begin
  FImage.Free;
end;

procedure TForm1.Button1Click(Sender: TObject);
begin
  FImage.RotateFlip(Rotate90FlipNone);
  PaintBox1.Invalidate;
end;

procedure TForm1.PaintBox1Paint(Sender: TObject);
begin
  with TGPGraphics.Create(PaintBox1.Canvas.Handle) do
  try
    DrawImage(FImage, 0, 0);
  finally
    Free;
  end;
end;

end. 
```

如此矫枉过正，不是吗:-？

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-11T07:31:48.243

您可以使用 TPaintBox 而不是 TImage 并使用带有旋转矩阵的 SetWorldTransform 来绘制被点击的卡片[。](http://msdn.microsoft.com/en-us/library/dd145104%28v=vs.85%29.aspx)我为此使用 StretchDrawRotated：

```
procedure XForm_SetRotation(out AXForm: TXForm; AAngle: Extended; ACenter: TPoint);
var
  SinA, CosA: Extended;
begin
  SinCos(AAngle, SinA, CosA);
  AXForm.eM11 := CosA;
  AXForm.eM12 := SinA;
  AXForm.eM21 := -SinA;
  AXForm.eM22 := CosA;
  AXForm.eDx := (ACenter.X - (CosA * ACenter.X)) + ((SinA * ACenter.Y));
  AXForm.eDy := (ACenter.Y - (SinA * ACenter.X)) - ((CosA * ACenter.Y));
end;

procedure StretchDrawRotated(ACanvas: TCanvas; const ARect: TRect; AAngle: Extended; ACenter: TPoint; AGraphic: TGraphic);
var
  XForm, XFormOld: TXForm;
  GMode: Integer;
begin
  GMode := SetGraphicsMode(ACanvas.Handle, GM_ADVANCED);
  try
    if GetWorldTransform(ACanvas.Handle, XFormOld) then
      try
        XForm_SetRotation(XForm, AAngle, ACenter);
        SetWorldTransform(ACanvas.Handle, XForm);
        ACanvas.StretchDraw(ARect, AGraphic);
      finally
        SetWorldTransform(ACanvas.Handle, XFormOld);
      end;
  finally
    SetGraphicsMode(ACanvas.Handle, GMode);
  end;
end; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-11T08:06:57.933

您还可以使用 Graphics32 库或我前段时间从 CodeCentral 获取的这个函数：

```
{by Gustavo Daud (Submited on 21 May 2006 )
Use this method to rotate RGB and RGB Alpha 'Portable Network Graphics' Images using a smooth antialiased algorithm in order to get much better results.
Note: Part of this code was based on JansFreeware code [http://jansfreeware.com/]
This is only possible when using the 1.56 library version.}

{Smooth rotate a png object}
procedure SmoothRotate(var aPng: TPNGImage; Angle: Extended);

  {Supporting functions}
  function TrimInt(i, Min, Max: Integer): Integer;
  begin
    if      i>Max then Result:=Max
    else if i<Min then Result:=Min
    else               Result:=i;
  end;
  function IntToByte(i:Integer):Byte;
  begin
    if      i>255 then Result:=255
    else if i<0   then Result:=0
    else               Result:=i;
  end;
  function Min(A, B: Double): Double;
  begin
    if A < B then Result := A else Result := B;
  end;
  function Max(A, B: Double): Double;
  begin
    if A > B then Result := A else Result := B;
  end;
  function Ceil(A: Double): Integer;
  begin
    Result := Integer(Trunc(A));
    if Frac(A) > 0 then
      Inc(Result);
  end;

  {Calculates the png new size}
  function newsize: tsize;
  var
    fRadians: Extended;
    fCosine, fSine: Double;
    fPoint1x, fPoint1y, fPoint2x, fPoint2y, fPoint3x, fPoint3y: Double;
    fMinx, fMiny, fMaxx, fMaxy: Double;
  begin
    {Convert degrees to radians}
    fRadians := (2 * PI * Angle) / 360;

    fCosine := abs(cos(fRadians));
    fSine := abs(sin(fRadians));

    fPoint1x := (-apng.Height * fSine);
    fPoint1y := (apng.Height * fCosine);
    fPoint2x := (apng.Width * fCosine - apng.Height * fSine);
    fPoint2y := (apng.Height * fCosine + apng.Width * fSine);
    fPoint3x := (apng.Width * fCosine);
    fPoint3y := (apng.Width * fSine);

    fMinx := min(0,min(fPoint1x,min(fPoint2x,fPoint3x)));
    fMiny := min(0,min(fPoint1y,min(fPoint2y,fPoint3y)));
    fMaxx := max(fPoint1x,max(fPoint2x,fPoint3x));
    fMaxy := max(fPoint1y,max(fPoint2y,fPoint3y));

    Result.cx := ceil(fMaxx-fMinx);
    Result.cy := ceil(fMaxy-fMiny);
  end;
type
 TFColor  = record b,g,r:Byte end;
var
Top, Bottom, Left, Right, eww,nsw, fx,fy, wx,wy: Extended;
cAngle, sAngle:   Double;
xDiff, yDiff, ifx,ify, px,py, ix,iy, x,y, cx, cy: Integer;
nw,ne, sw,se: TFColor;
anw,ane, asw,ase: Byte;
P1,P2,P3:Pbytearray;
A1,A2,A3: pbytearray;
dst: TPNGImage;
IsAlpha: Boolean;
new_colortype: Integer;
begin
  {Only allows RGB and RGBALPHA images}
  if not (apng.Header.ColorType in [COLOR_RGBALPHA, COLOR_RGB]) then
    raise Exception.Create('Only COLOR_RGBALPHA and COLOR_RGB formats' +
    ' are supported');
  IsAlpha := apng.Header.ColorType in [COLOR_RGBALPHA];
  if IsAlpha then new_colortype := COLOR_RGBALPHA else
    new_colortype := COLOR_RGB;

  {Creates a copy}
  dst := tpngobject.Create;
  with newsize do
    dst.createblank(new_colortype, 8, cx, cy);
  cx := dst.width div 2; cy := dst.height div 2;

  {Gather some variables}
  Angle:=angle;
  Angle:=-Angle*Pi/180;
  sAngle:=Sin(Angle);
  cAngle:=Cos(Angle);
  xDiff:=(Dst.Width-apng.Width)div 2;
  yDiff:=(Dst.Height-apng.Height)div 2;

  {Iterates over each line}
  for y:=0 to Dst.Height-1 do
  begin
    P3:=Dst.scanline[y];
    if IsAlpha then A3 := Dst.AlphaScanline[y];
    py:=2*(y-cy)+1;
    {Iterates over each column}
    for x:=0 to Dst.Width-1 do
    begin
      px:=2*(x-cx)+1;
      fx:=(((px*cAngle-py*sAngle)-1)/ 2+cx)-xDiff;
      fy:=(((px*sAngle+py*cAngle)-1)/ 2+cy)-yDiff;
      ifx:=Round(fx);
      ify:=Round(fy);

      {Only continues if it does not exceed image boundaries}
      if(ifx>-1)and(ifx<apng.Width)and(ify>-1)and(ify<apng.Height)then
      begin
        {Obtains data to paint the new pixel}
        eww:=fx-ifx;
        nsw:=fy-ify;
        iy:=TrimInt(ify+1,0,apng.Height-1);
        ix:=TrimInt(ifx+1,0,apng.Width-1);
        P1:=apng.scanline[ify];
        P2:=apng.scanline[iy];
        if IsAlpha then A1 := apng.alphascanline[ify];
        if IsAlpha then A2 := apng.alphascanline[iy];
        nw.r:=P1[ifx*3];
        nw.g:=P1[ifx*3+1];
        nw.b:=P1[ifx*3+2];
        if IsAlpha then anw:=A1[ifx];
        ne.r:=P1[ix*3];
        ne.g:=P1[ix*3+1];
        ne.b:=P1[ix*3+2];
        if IsAlpha then ane:=A1[ix];
        sw.r:=P2[ifx*3];
        sw.g:=P2[ifx*3+1];
        sw.b:=P2[ifx*3+2];
        if IsAlpha then asw:=A2[ifx];
        se.r:=P2[ix*3];
        se.g:=P2[ix*3+1];
        se.b:=P2[ix*3+2];
        if IsAlpha then ase:=A2[ix];

        {Defines the new pixel}
        Top:=nw.b+eww*(ne.b-nw.b);
        Bottom:=sw.b+eww*(se.b-sw.b);
        P3[x*3+2]:=IntToByte(Round(Top+nsw*(Bottom-Top)));
        Top:=nw.g+eww*(ne.g-nw.g);
        Bottom:=sw.g+eww*(se.g-sw.g);
        P3[x*3+1]:=IntToByte(Round(Top+nsw*(Bottom-Top)));
        Top:=nw.r+eww*(ne.r-nw.r);
        Bottom:=sw.r+eww*(se.r-sw.r);
        P3[x*3]:=IntToByte(Round(Top+nsw*(Bottom-Top)));

        {Only for alpha}
        if IsAlpha then
        begin
          Top:=anw+eww*(ane-anw);
          Bottom:=asw+eww*(ase-asw);
          A3[x]:=IntToByte(Round(Top+nsw*(Bottom-Top)));
        end;

      end;
    end;
  end;

  apng.assign(dst);
  dst.free;
end; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-04T17:49:59.560

上面已经提到了 Graphics32 库。

*   [http://graphics32.org/documentation/Docs/Units/GR32_Transforms/Classes/TAffineTransformation/Methods/Rotate.htm](http://graphics32.org/documentation/Docs/Units/GR32_Transforms/Classes/TAffineTransformation/Methods/Rotate.htm)
*   [http://graphics32.org](http://graphics32.org)

我想再提一个好的图书馆，`Vampyre Imaging`

*   [http://galfar.vevb.net/imaging/doc/imaging.html](http://galfar.vevb.net/imaging/doc/imaging.html)
*   [http://ImagingLib.sf.net/](http://ImagingLib.sf.net/)

# android - 在android webview中选择文件错误

> ID：10546585
> 
> 赞同：2
> 
> 时间：2012-05-11T06:36:52.713
> 
> 标签：android, android-webview

我正在为我自己的网站开发带有 android 的 webview 应用程序。我有将照片上传到网站的模块，所以我在网站上有一个“选择文件”按钮，当从 webview 调用它时无法点击。它在浏览器中运行良好。解决此问题的任何解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-29T16:29:29.933

For others surfing here PLEASE BE AWARE that the undocumented function openFileChooser is now not currently available in Android 4.4+ (KitKat) !!!

Google Engineer:"unfortunately, openFileChooser is not a public API. We are working on a public API in future releases of Android."

See [https://code.google.com/p/android/issues/detail?id=62220](https://code.google.com/p/android/issues/detail?id=62220) for more info and much gnashing of teeth...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T02:03:43.443

虽然已经很久没有问过了，但我会尽量给出一个比我在网上找到的更全面的答案。

您可能的解决方案是：[WebView 中的文件上传](https://stackoverflow.com/questions/5907369/file-upload-in-webview)

但是，我发现这篇文章也很有用：[File upload in through WebView on Android](http://m0s-programming.blogspot.co.uk/2011/02/file-upload-in-through-webview-on.html)

这个问题是由一个未记录的魔法方法引起的`onFileChooser`，它不能作为@override 使用，但是一旦你添加它就可以正常工作。

# android - 如何从 iframe 获取数据到 android？

> ID：10546588
> 
> 赞同：0
> 
> 时间：2012-05-11T06:37:03.650
> 
> 标签：android, html

有目标iframe页面的html源码

```
<html>
......
<body>    
......
<div id="XXX"><p>**target**</p>
  <div><p>**target**</p><span>**target**</span><p>**target**</p></div>
<p></p>
</div>
</body>
...... 
```

我要做的是检索哪个id =“XXX”的数据到我的项目（这意味着如图所示的四个**目标**），是否可以通过现有android库中的getElementById（）方法获取结果？或者有什么更好的建议吗？感谢提前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T08:36:50.833

如果您在 webview 或扩展 webview 的类中查看它，您可以创建一个 javascript 函数，该函数将使用 javascriptinterface 将数据从浏览器传递到 Activity。仅从您发布的少量代码和信息中就很难说出您要完成的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T07:53:45.003

您可以使用 Android 的 Jsoup HTML 解析器。

# javascript - 了解 JavaScript 中的自定义 abs 函数

> ID：10546593
> 
> 赞同：-2
> 
> 时间：2012-05-11T06:37:25.133
> 
> 标签：javascript, math, ternary-operator

我希望我的逻辑没有缺陷，但我正在阅读 JavaScript 权威指南，但我不明白这个自定义 abs 函数是如何工作的......

```
function abs(x) {
  if (x >= 0) {
    return x;
  } else {
    return -x;
  }
} 
```

我使用三元运算符重新制作它以试图理解它......

```
var res = (x >= 0) ? x : -x;
return res; 
```

...但我仍然不明白它是如何工作的。

假设我使用 -10 作为 x，它如何返回 +10？符号如何反转？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T06:39:53.180

```
function abs(x) {
    if (x >= 0) {

        //If the number passed is greater than or equal to zero (positive)
        //return it back as is
        return x;

    } else {

        //If less than zero (negative)
        //return the negative of it (which makes it positive)
        // -(-10) === 10
        return -x;

    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T06:40:34.447

负数 10 不大于等于 0，所以返回它的相反数。

将负号放在变量前面与将其乘以负 1 是一样的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-11T06:40:14.460

它看起来像

```
var res = (x >= 0) ? 1 * x : -1 * x; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-11T06:40:36.200

> 假设我使用 -10 作为 x，它如何返回 +10？符号如何反转？

那是因为这个检查：

```
x >= 0 
```

如果 number 为 0 或更大，则返回它`else`返回负数版本，该版本由于`-`前面的符号而变为正数。

# javascript - 在本地运行时从不同域中删除 cookie

> ID：10546595
> 
> 赞同：0
> 
> 时间：2012-05-11T06:37:26.713
> 
> 标签：javascript, cookies, setcookie

根据 cookie 规范，这是不允许的（与 ajax 调用的同源策略相同的原则）。就 SOP 而言，当您从 file:/// 运行 javascript 时（例如在 UIWebView 内部），它并不适用。这是有据可查的，并且在我的示例中也有效。饼干呢？

我有一个应用程序通过运行 javascript 向服务器发出请求，用于所有意图和目的，本地 (file:///)。身份验证请求设置一个名为“alpha”、路径：“/”和域“serverdomain.com”的 cookie。在注销期间，我需要清除上述 cookie，但我感觉我的尝试失败了，因为我无权访问它，因为它被认为来自不同的域。这听起来很熟悉吗？还是我离这儿很远？有没有办法完成这样的壮举？

例子

我在 Chrome 上运行我的 javascript（使用 file:/// 作为 URI）。我开始登录，很快我就可以在 cookie 管理器插件中看到以下 cookie（这不是实际的 cookie，但除了我们可以说它是 'alpha' 的名称外，它看起来一样）。该 cookie 并未仅标记为 http，而是选中了“会话”和“安全”复选框（与下面的屏幕截图不同）。

![来自 cookie 管理器的屏幕截图](../Images/f8730cc0b2aa6e3532f784cbcfaaeb0e.png)

现在请记住，如果我使用 Chrome 的“检查元素”功能并转到“Cookie”，我会得到“此站点没有 Cookie”。

![chrome - 检查元素/cookie](../Images/3e993961189cc0a08a9dbc51b2405f21.png)

在注销期间，我需要删除该 cookie。所以我在javascript中这样做：

```
document.cookie="alpha=; expires=Thu, 10 May 2000 15:07:07 GMT" 
```

饼干不会消失。我可以让它消失的唯一方法是从 cookie 管理器中删除它。我应该能够删除这个 cookie（从 file:/// 运行时）吗？如果有怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T06:41:03.307

如果 cookie 是在不同的域上创建的，则客户端不会将此 cookie 发送到第二个域上的服务器，因此您无法将其删除。您可以在此域上设置一个同名的 cookie，但它与第一​​个域上存在的 cookie 不同。

# android - 更改 ACTION_VIDEO_CAPTURE 的格式

> ID：10546596
> 
> 赞同：1
> 
> 时间：2012-05-11T06:37:30.333
> 
> 标签：android, video, format

有没有办法通过设置额外的 Intent 来选择录制的视频的视频格式输出？或者我可以在录音后处理功能中做到这一点吗？我正在尝试做的是拍摄我刚刚录制的视频，并使用 ACTION_SEND 意图在 MMS 消息中发送它，但它不会采用相机存储它的 .mp4 格式。

我该怎么做呢？

编辑：这是我的录音代码：

```
Intent videoIntent = new Intent(MediaStore.ACTION_VIDEO_CAPTURE);
videoIntent.putExtra(MediaStore.EXTRA_DURATION_LIMIT, 60);
videoIntent.putExtra(MediaStore.EXTRA_VIDEO_QUALITY, 0);
startActivityForResult(videoIntent, VIDEO_ACTIVITY); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T07:00:52.110

您可以将以下任何额外内容传递给意图，`ACTION_VIDEO_CAPTURE`尽管我很确定这不是您真正想要的，但让我们再深入研究一下。

```
EXTRA_OUTPUT
EXTRA_VIDEO_QUALITY
EXTRA_SIZE_LIMIT
EXTRA_DURATION_LIMIT 
```

虽然我认为 mms 的文件大小没有协议限制，但可能在 Android 中存在限制（~~这里只是推测在~~300kb 和 500kb 之间，尽管有些设备允许您在消息设置中增加它）所以尝试发送视频质量较低，可能还有大小限制，以检查是否可以解决您的问题。

我这么说的原因是因为我记得不久前类似的事情，并且错误消息类似于（引用我的记忆）：

> 抱歉，您不能将此视频添加到您的消息中

原来是我提到的大小限制，而不是编码或文件类型。

**更新**

[在查看文档时，](http://developer.android.com/reference/android/provider/MediaStore.html#EXTRA_VIDEO_QUALITY)我发现在 MediaStore 的东西上提到了 mms，特别是在那个上`EXTRA_VIDEO_QUALITY`，它是：

> 用于控制录制视频质量的 Intent-extra 的名称。这是一个整数属性。**当前值为 0 表示低质量，适用于彩信**，值为 1 表示高质量。将来可能会添加其他质量级别。

# map - 路由服务地图

> ID：10546604
> 
> 赞同：1
> 
> 时间：2012-05-11T06:38:45.620
> 
> 标签：map

我得到了安装路由服务 OpenStreetMap 的任务，但在我必须安装路由服务之前（你的）

所以我现在想尝试另一个版本，你能提供教程安装路由服务 url MapQuest 或 Navigation 吗？

请帮助我谢谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T08:32:38.467

You could use their API to ask for directions. Thank you can display the coordinates and the description. For displaying the coordinates use OpenStreetMap / Leflet.

# java - 如何让 c 函数在同步方法完成其工作之前等待？

> ID：10546605
> 
> 赞同：2
> 
> 时间：2012-05-11T06:38:54.043
> 
> 标签：java, c, multithreading, java-native-interface

以下 java 代码沿主线程创建 2 个线程。在创建的 2 个线程上，调用了一个执行 I/O 函数的 C 函数。然后从主线程调用另一个 C 函数 ( `againCallReadFile`)，然后调用该`firstThread`方法。这个先前调用的方法很可能正在休眠或仍在工作。现在我如何确保`synchronised method`在它返回或完成它的工作后调用它？

Java 代码：

```
package Package;

public class Multithreading {

private native void readFile();
private native void writeFile();
private native void againCallReadFile();

public static void main(String args[]) {
    Multithreading.firstThread(); 
    Multithreading.secondThread();
    // the above functions sleep for 15 seconds
    new Multithreading().againCallReadFile(); // WILL GIVE THE FATAL ERROR ! B'COZ THAT METHOD SLEEPS FOR 15 SECONDS AFTER IT IS CALLED.
}

public synchronized static void firstThread() {
    Runnable r = new Runnable() {
        @Override
        public void run() {
            System.out.println("First Thread Started at " + new java.util.Date());
            System.out.println();
            new Multithreading().readFile();
            try {
                Thread.sleep(15 * 1000); // sleep for 15 seconds
            } catch(Exception exc) {
                exc.printStackTrace();
            }
        }
    };
    new Thread(r,"FirstThread").start();
}

public synchronized static void secondThread() {
    Runnable r = new Runnable() {
        @Override
        public void run() {
            System.out.println("Second Thread Started at " + new java.util.Date());
            System.out.println();
            new Multithreading().writeFile();
            try {
                Thread.sleep(15 * 1000); // sleep for 15 seconds
            }catch(Exception exc) {
                exc.printStackTrace();
            }
        }
    };
    new Thread(r,"Second Thread").start();
}

  static {
       System.loadLibrary("Multithreading");
  }
} 
```

C代码：

```
#include "stdio.h"
#include "string.h"
#include "Package_Multithreading.h"

/*
 * Class:     Package_Multithreading
 * Method:    readFile
 * Signature: ()V
 */

void Java_Package_Multithreading_readFile
  (JNIEnv *env, jobject obj) { // function that reads a file

 printf("In the C method that reads file!\n");
 FILE *f_open = fopen("c_io/file_r.txt","r");
 fseek(f_open,0,SEEK_END);
 long lSize = ftell(f_open);
 rewind(f_open);
 // allocate memory to contain whole file
 char *buffer = (char*)malloc(sizeof(char)*lSize);
 size_t result = fread(buffer,1,lSize,f_open); // file is now loaded in the memory buffer
 int i = 0;
 for(i=0;i<strlen(buffer);i++) {
    printf("%c",buffer[i]);
 }
 fclose(f_open);
}

/*
 * Class:     Package_Multithreading
 * Method:    writeFile
 * Signature: ()V
 */

void Java_Package_Multithreading_writeFile
  (JNIEnv *env, jobject obj) { // function that writes a file

 printf("In the C method that writes to the file !\n");
 char buffer[] = "This data is a result of JNI !";
 FILE *f_open = fopen("c_io/file_w.txt","wb");
 int x = fwrite(buffer,1,sizeof(buffer),f_open);
 fclose(f_open);
 printf("Data has been written to the file !");
}

void Java_Package_Multithreading_againCallReadFile
  (JNIEnv *env, jobject obj) { // function that calls the already called synchronised method

  // The following snippet calls the function firstThread of java that could be sleeping. It sleeps for 15 seconds !

  jclass cls = (*env)->GetObjectClass(env,obj);
  jmethodID mid = (*env)->GetMethodID(env,cls,"firstThread","()V");
  (*env)->CallVoidMethod(env,obj,mid); // call the synchronized method that sleeps for 5 minutes !
} 
```

我怎样才能让里面的代码`Java_Package_Multithreading_againCallReadFile`等到`firstThread`java中的方法完成，或者有什么方法可以知道在调用同步函数之前我必须等待？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T07:00:00.200

I prefer to implement synchronisation on java side, not on C side. You can use lock for synchronisation:

```
 private static final Lock lock = new ReentalLock();

    public static void firstThread() {
        final CountDownLatch waitToFinishLatch = new CountDownLatch(1);
        Runnable r = new Runnable() {
            @Override
            public void run() {            
                try {
                    // Will wait until other thread call unloak or if no lock was called:
                    lock.lock();
                    System.out.println("First Thread Started at " + new java.util.Date());
                    System.out.println();
                    new Multithreading().readFile();
                    try {
                        Thread.sleep(15 * 1000); // sleep for 15 seconds
                    } catch(Exception exc) {
                        exc.printStackTrace();
                    }
                } finally {
                    lock.unlock();
                    waitToFinishLatch.countDown();
                }
            }
        };
        new Thread(r,"FirstThread").start();
        try {
            // Here we are waiting for thread to be finish
            waitToFinishLatch.await();
        } catch(InterruptedException e) {
            throw new RuntimeException(e);
        }
    }

    public synchronized static void secondThread() {
        final CountDownLatch waitToFinishLatch = new CountDownLatch(1);
        Runnable r = new Runnable() {
            @Override
            public void run() {
                try {
                    // Will wait until other thread call unloak or if no lock was called:
                    lock.lock();
                    System.out.println("Second Thread Started at " + new java.util.Date());
                    System.out.println();
                    new Multithreading().writeFile();
                    try {
                        Thread.sleep(15 * 1000); // sleep for 15 seconds
                    }catch(Exception exc) {
                        exc.printStackTrace();
                } finally {
                    lock.unlock();
                    waitToFinishLatch.countDown();
                }
            }
        }
        try {
            // Here we are waiting for thread to be finish
            waitToFinishLatch.await();
        } catch(InterruptedException e) {
            throw new RuntimeException(e);
        }
    };
    new Thread(r,"Second Thread").start();
} 
```

In this case thread will wait for each other.

# c++ - Qt中的编译错误

> ID：10546608
> 
> 赞同：1
> 
> 时间：2012-05-11T06:39:05.633
> 
> 标签：c++, qt, linker

我正在尝试将我的大型项目分解为子目录并将其作为单个可执行文件运行。但是当我执行代码时，它给了我以下错误：

1.  qtmain_win.cpp:-1: 错误：未定义的对 `qMain(int, char**)' 的引用
2.  collect2: ld 返回 1 个退出状态

任何人都可以解释这些错误背后的原因是什么......

提前致谢！！！！

我制作了一个 .pro 文件，其中包含所有子目录的路径。然后每个目录都有自己的 .pro 和 .pri 文件，其中一个目录在所有目录中都是通用的。这个目录是作为一个库。然后是 main.pro 和 main.cpp。我在这里粘贴所有三个文件：项目的专业文件：

```
# build all components recursive

TEMPLATE = subdirs

######## normal build process ########
#
# Make sure your Main.pro is in the last line to ensure correct linking!
#
SUBDIRS =D:/MultiFuncTester/Modes/Start/Build/Start.pro \
     D:/MultiFuncTester/Modes/MainMenu/Build/MainMenu.pro \
     D:/MultiFuncTester/Modes/Solar/Build/Solar.pro \
     D:/MultiFuncTester/Modes/Main/Build/Main.pro\ 
```

配置 += 已订购

Main.pro：

```
# ################ include pri file #################
!include("Main.pri"):error("Main.pri not found")

# ################ override some pri settings #################
TEMPLATE = app
TARGET = MultiFuncTester
CONFIG =-static
QT +=core\
gui\

# ################ own sources #################
INCLUDEPATH +=D:/MultiFuncTester/
SOURCES +=../Sources/Main.cpp 
```

项目的 pri 文件，在作为 lib 的所有目录中通用

```
######################
# common stuff for all components
######################

TEMPLATE = lib

CONFIG += static \
         warn_on \
         qt \

QT += gui \
      core \

INCLUDEPATH +=D:/MultiFuncTester/Modes \
DEPENDPATH +=D:/MultiFuncTester/Modes \

CONFIG += debug_and_release
CONFIG += build_all

CONFIG(debug, debug|release) {
CONFIG_SUFFIX = dbg
} else {
CONFIG_SUFFIX = rel
DEFINES += QT_NO_DEBUG \
          QT_NO_DEBUG_OUTPUT \
         NDEBUG
CONFIG(gcov) {
    QMAKE_CXXFLAGS_RELEASE += -fprofile-arcs -ftest-coverage
    QMAKE_LFLAGS_RELEASE += -fprofile-arcs
    QMAKE_CXXFLAGS_RELEASE -= -O2
    QMAKE_CXXFLAGS_RELEASE += -O0
}
}

CONFIG(crosstgt) {
#To be able to build Target run qmake as follows:
qmake CONFIG+=crosstgt
CONFIG_SUFFIX = $${CONFIG_SUFFIX}_tgt
DEFINES += TARGET_BUILD
}

OBJECTS_DIR = obj_$${CONFIG_SUFFIX}
MOC_DIR = moc_$${CONFIG_SUFFIX}
DESTDIR = lib_$${CONFIG_SUFFIX} 
```

# c# - c# 替代抽象

> ID：10546610
> 
> 赞同：3
> 
> 时间：2012-05-11T06:39:13.593
> 
> 标签：c#, .net

如何强制派生形式实现基类的方法而不使其抽象？

我收到的错误是“设计者必须创建一个'X'类型的实例，但它不能，因为该类型被声明为抽象”。先感谢您。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-11T06:42:00.777

我会创建一个**接口**，以便每个表单都实现它。你能详细说明你的问题吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T06:43:33.470

你不能强制一个类重写基类方法，除非它被标记为抽象，这也要求基类是抽象的。你有没有想过为这些方法定义一个接口？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-11T07:18:16.690

正如 renato 所说，您可以创建一个抽象基类，该基类需要构造函数中的接口。这是我在 AS3 中执行此操作的示例，应该很容易理解发生的情况并将其应用于您的解决方案：

* * *

```
public class PyramidenMain extends ProbabilityGame implements IProbabilityGame{
    public function PyramidenMain(){
        super(this);
        super.initialize();
    }   

    //implement interface
}

public interface IProbabilityGame{
        function getGame():MovieClip;
        function customInit():void;
        function customLoginSuccessful():void;
        function customLoginError(xml:XML):void;
        function customShowError(msg:String):void;
        function createDemoProtocol():IProtocol;
    }

public class ProbabilityGame {
    public function ProbabilityGame(game:IProbabilityGame) {
        if(game == null) {
            throw new Exception("unmet requirement, parameter containing an instance of IProbabilityGame");
        }
        _game = game;
    }

    public function initialize() {
        //do some logic
        _game.customInit();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T07:02:30.183

您可以覆盖基类并定义抽象或虚拟方法。也许这就是你想要的。这是工作环境中的现实。

# android - 使用并行多个异步任务处理单个进度对话框

> ID：10546612
> 
> 赞同：3
> 
> 时间：2012-05-11T06:39:19.890
> 
> 标签：android, android-asynctask, progressdialog

在我的项目中，我想在加载页面时从 3 个不同的 url（webservice）并行加载数据。

为此，我使用 3 个不同的 asynctask 来加载数据。

我想在第一个异步任务启动时将进度对话框消息显示为“正在加载”，并在最后一个异步任务完成后关闭对话框（直到完成 3 个任务显示进度对话框）。

请告诉我处理这种情况的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T06:51:26.113

有不同的方法来处理这种情况。

1.  您可以使用使用任务数初始化的计数器变量，并且该计数器在`AsyncTask`完成时递减。当计数器为 0 时，将`ProgressDialog`关闭。您可以执行此递减并检查每个`AysncTask`.`onPostExecute`

2.  您可能不需要 3 个不同`AsyncTask`的 s。您可以将单个`AsyncTask`与 a 一起[`CountDownLatch`](http://developer.android.com/reference/java/util/concurrent/CountDownLatch.html)用于`Thread`同步。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T06:50:58.113

您可以做的一种方法是创建一个接口`OnThreadFinishListener`（使用`onThreadFinish()`方法）并让您的活动实现它。你们所有人都`AsyncTask`应该将自己注册到侦听器，以便每次线程完成时都会调用该`onThreadFinish`方法。在 onThreadFinish 方法中，它应该检查是否仍有线程在后台运行（类似于`if (asyncTask1.getStatus() == AsyncTask.Status.RUNNING || asyncTask2.getStatus() == AsyncTask.Status.RUNNING ... )`）

如果一切都是假的，那么你可以解雇`progress dialog`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T06:50:43.110

你可以这样做：

```
//define progress dialog object globally in your parent class
ProgressDialog pd = null; 
```

**异步任务1** `onPreExecute`：

```
pd = ProgressDialog.show(this, "title", "loading", true); 
```

**异步任务2**：

```
//do nothing 
```

**异步任务3** `onPostExecute`：

```
if(pd!=null)
    pd.dismiss(); 
```

# django - 简短的 if-else django 模板

> ID：10546614
> 
> 赞同：6
> 
> 时间：2012-05-11T06:39:33.043
> 
> 标签：django, django-templates

我想知道是否有任何方法可以在 django 模板中做一个简短的 if-else，例如在 php 中？

```
 <?=$variable ? 'String for true' : 'String for false'?> 
```

如果变量值为真，则显示`String for true`否则`String for false`

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-11T06:45:13.780

有一个[yesno](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#yesno)模板过滤器，它映射 true、false 的值。

```
{{ variable|yesno:'String for true,String for false' }} 
```

# mysql - WHERE x IN (1,2,3,4) 工作流程

> ID：10546615
> 
> 赞同：0
> 
> 时间：2012-05-11T06:39:38.597
> 
> 标签：mysql, sql, excel

我正在寻找一种简化的方法来创建每周搜索几十个新 IN 值的 WHERE IN 查询。我们以 .xls 格式获取 IN 值，并且正在寻找一种在每个数字之间添加逗号的方法，这样我们就可以在括号内剪切和粘贴值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T06:43:25.943

这取决于 Excel 工作表中的值。您可以将它们导出为 CSV，然后拥有并复制它们。或者您也可以使用一些 VBA 来获得可以执行的脚本。该脚本也可能会执行查询，这样您就不需要自己执行任何操作。但这也取决于您使用 VBA 的经验。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T07:04:07.967

另一种可能的方式是

1.  只需从 Excel 复制整个列
2.  将其粘贴到一些高级文本板中，例如 Notepad++、TextPad、Editplus
3.  在其中创建一个宏，您可以在线获得足够的帮助以创建一个宏（只需一次）
4.  现在运行创建的宏

这种方法肯定会帮助您完成许多其他可重复的任务。

# windows - 有没有办法减少 Azure 部署开始和调用角色 OnStart() 代码之间的时间？

> ID：10546624
> 
> 赞同：5
> 
> 时间：2012-05-11T06:40:15.200
> 
> 标签：windows, deployment, azure

目前，当我使用 Windows Azure 管理门户创建部署时，运行我角色中的代码大约需要 9（9！）分钟`OnStart()`。我觉得那里有些不对劲——九分钟太长了。

我有一个小型启动任务，我希望在几秒钟内完成（在 Compute Emulator 下运行时它会在几秒钟内完成），所以看起来 Azure 基础设施一直在那里*做着大事。*

有没有办法加快这个过程？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-11T16:55:18.397

当您将应用程序部署到 Windows Azure 时，取决于您的 VM 大小和实例数，会发生以下情况：

1.  您提供 VM 类型（小型、中型、大型、特大型）和实例数（例如 N）

2.  取决于虚拟机类型设置，如果您选择了小型，那么 Fabric Controller (FC) 需要找到一个可以为您启动单核虚拟机的插槽，或者如果您选择超大型，那么 FC 需要找到一个主机来托管8 核来宾虚拟机。在此步骤中，可能会出现 2 种可能性（还有更多，但为简单起见，我仅引用 2 种）：

    2.1 FC 可以找到一个就绪节点（或机架），它已经有 1 个或多个空闲内核来托管您的 VM 2.2 FC 可能在所有正在运行的主机节点中找不到任何空内核，并且您需要重新启动一个新节点以托管您的访客虚拟机

3.  如果您的 VM 被选择用于路径 2.1，在这种情况下，主机 VM 已经打开，并且主机只需要根据您的大小为您配置一个来宾 VM。这可能需要更少的时间，因为系统只需要配置和启动您的 VM。

4.  如果您的 VM 被选择用于路径 2.2，在这种情况下，首先主机将启动（如果它没有运行并且这很常见*），然后需要配置并启动您的来宾 VM。这条路径将比路径 2.1 花费更长的时间。

注意：在 2.1 和 2.2 中，部署同一个应用程序时可能需要分离经验。

1.  同样的事情会发生在为您的服务找到 N 个实例运行，但是这个过程将与 2.1/2.2 并行发生，但时间几乎相同。此外，FC 还需要为每个实例找到不同的故障域，以便在一个实例关闭的情况下，其他实例仍然处于活动状态。

因此，在系统内部，除了简单地打开 Windows Server 2008 机器之外，还有很多事情要做。因为多个虚拟机在一个主机上运行，​​所以安全性是主要的，所以在配置来宾虚拟机时，需要做很多事情来保持工作正常。

About your comment on "small fleet of servers readily available at all times", that is good comment but when there a data center serving to whole world "Small" is very "huge" number and just to keep thousands of machine running without any guest is not logical. Also you just deploy once in a while, this is not what you will do on daily basis so having under 10 minutes is still comprehensible.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-11T06:58:10.280

部署 Windows Azure 通常需要 5-15 分钟。它正在做的是启动服务器、虚拟机、启动 Windows 等。随着时间的推移，它变得越来越快，但 9 分钟肯定不是不寻常的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-14T15:29:45.247

If you are referring to existing VMs in Azure that you stop (deallocate) and start once in a while, then yes - there is a way to make it super fast, but you pay for it. You have to move your VMs to use premium storage.

主要区别在于，高级存储不仅在速度更快的 SSD 驱动器上，而且在不使用时也不会被存档 - 因此即使您的虚拟机处于离线状态，您也需要为它付费。看，普通存储虚拟机，当你启动它时，它们会复制到 VHD 到另一个运行它的存储中，当你完成后，它会被存档并且你不需要为该磁盘付费。

但是使用高级存储，您的 VHD 始终准备好运行，因此当您启动 VM 时，它不会被复制到任何地方。这使它更快。缺点：即使 VM 被解除分配，您也需要为 VHD 付费。

因此，您是否愿意支付这笔费用取决于您 - 但有办法做到这一点。

（我不是 azure 专家，但我确实询问了一些 MVP 同事，这就是他们的解释。如果这不准确，我很想听听）。

# c - NUL 未声明 - 在此函数中首次使用

> ID：10546625
> 
> 赞同：2
> 
> 时间：2012-05-11T06:40:16.210
> 
> 标签：c, nul

从[网上](http://www.allinterview.com/showanswers/27930.html)我了解到 C 包含`NUL`关键字。

但是在编译时出现错误

```
NUL undeclared first use in this function' 
```

我的代码片段：

```
for (;;) {
        char ch = (*pzDest = *pzSrc);
        if (ch == NUL)
            break;
        if (ch == ':') {
            *pzDest = NUL;
            break;
        }
        pzDest++;
        pzSrc++;
    } 
```

知道为什么我会收到此错误吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-11T06:43:25.207

有**NULL**，然后有**NUL**。

NULL 在 stddef.h 中定义，使用非常广泛，是对空指针的引用。

NUL 不同——它是标准 ASCII 字符集中的第一个字符，更重要的是，*它不是标准宏*。您可能必须自己定义它。

要定义 NUL，请执行以下操作：

```
#define NUL '\0' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-11T06:41:33.907

不，这不是标准。在代码的开头添加此代码或仅使用`0`：

```
#define NUL 0 
```

**我推断你不是在寻找，`NULL`因为你在做`ch == NUL`**

在各种文本中，经常提到`'\0'`as `NUL`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-11T06:41:35.327

是`NULL`，不是`NUL`。

编辑

您甚至阅读过您发布的链接吗？它非常明确地说“NULL 不是 NUL。NUL 不是 C++ 中定义的关键字”

> NULL 是为空指针定义的宏。
> NUL 是 ASCII 字符集中第一个字符的名称。它对应于零值。C 中没有
> 标准的宏 NUL，但有些人喜欢定义它。
> 数字 0 对应于十进制值 80。不要混淆数字 0 和 ?? （无）！
> NULL 可以定义为 ((void*)0)，NUL 可以定义为??。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-09-17T14:41:44.650

定义你自己的 NULL 值不是标准的，而且很容易出错，而且在最好的情况下，这肯定会让你没有睡眠和头痛。

C 和 C++ 之间以及 C++ 98、C++0x 和 C++11中的**NULL 值**概念的问题并不新鲜，这就是为什么从 C++0x 开始引入**nullptr**宏以避免问题和协调一些事情。

但是，如果您使用继承自遗留 NULL 负担问题的代码：

根据您的配置、包含外部和库的顺序等，您可能需要确保按时定义 NULL。

最简单的方法是包含“stddef.h”，注意 stddef.h 的内容可能会根据您的系统/linux 风格而有很大差异，这是一个示例：

```
#ifndef _LINUX_STDDEF_H
#define _LINUX_STDDEF_H

#undef NULL
#if defined(__cplusplus)
#define NULL 0
#else
#define NULL ((void *)0)
#endif

#endif 
```

例子：

我在尝试使用 i2c 库在 Raspberry-pi 上驱动 i2c 总线时遇到问题。在我的情况下，包括 i2c lib 是不够的，我必须创建一个 utils.h 文件来代替 i2c lib 标头：

```
#ifndef UTILS_H
#define UTILS_H

/// if you have to use i2c-dev.h then use this utils header instead of make sure to include stddef.h before.
/// otherwise you will end up with the following error:
/// .../arm-unknown-linux-gnueabi/arm-unknown-linux-     gnueabi/sysroot/usr/include/linux/i2c-dev.h:175: error: 'NULL' undeclared (first         use in this function)
/// return i2c_smbus_access(file,value,0,I2C_SMBUS_QUICK,NULL);
///                                                       ^
#include <stddef.h>
#include <linux/i2c-dev.h>
#endif // UTILS_H 
```

# iphone - 如何获取 UIButton 中的点击次数？

> ID：10546627
> 
> 赞同：0
> 
> 时间：2012-05-11T06:40:31.190
> 
> 标签：iphone, ios, uibutton, uitouch

我的设置页面中有两个`UIButton`，一个按钮是增加文本的字体大小，另一个是减小文本的字体大小。但我所需要的只是当用户点击`UIButton`以增加字体大小时，它需要切割 18pt，然后用户再次点击或在同一个按钮上再点击一次它需要将字体大小设置为 24pt，然后再次点击相同的按钮导致字体大小为 32pt。我需要限制或点击计数。反之亦然，减小字体大小按钮的效果相同。

```
-(IBAction)_clickfontsizeincrease:(id)sender
{ 
      self.multiPageView.font = [UIFont systemFontOfSize:30.0f];   
}

-(IBAction)_clickfontsizedecrease:(id)sender
{
        self.multiPageView.font = [UIFont systemFontOfSize:10.0f];
} 
```

这该怎么做？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T06:44:35.550

```
static int tapCount = 0;
- (IBAction) buttonTapped :(id)sender {
    tapCount++;

    // Based upon tapCount condition you can do whatever you want.

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T06:45:10.150

```
float current_font_size;

-(id) init
{
    current_font_size = 10f;
}

-(IBAction)_clickfontsizeincrease:(id)sender
{
      current_font_size += 8;
      self.multiPageView.font = [UIFont systemFontOfSize:current_font_size];

}
-(IBAction)_clickfontsizedecrease:(id)sender
{
        current_font_size -= 8;
        self.multiPageView.font = [UIFont systemFontOfSize:current_font_size];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T06:45:59.230

您必须在类中的某处管理按钮的状态，例如在头文件中声明一个变量`int counterOfFontIncrease`，然后在每次单击按钮时增加该变量并将其置于类似条件。

```
if (counterOfFontIncrease == 3)
      {

         counterOfFontIncrease = 1;
      } 
```

这样做也是为了减少字体按钮。

# iphone - 核心数据属性类型列表？

> ID：10546632
> 
> 赞同：6
> 
> 时间：2012-05-11T06:40:53.157
> 
> 标签：iphone, objective-c, xcode, core-data, attributes

我搜索了核心数据属性类型，但没有成功。

当我打开我的实体和属性时，有几种类型：

1.  整数
2.  双倍的
3.  细绳
4.  布尔值

等等

如果有一些 Apple 页面解释了使用类型的每个属性，我很感兴趣。

例如，我需要一个属性类型，我将在其中保存大约 1000 个字符的字符串。我对这种类型的插入使用哪种属性类型？

感谢帮助

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-11T06:49:54.020

类`NSAttributeDescription` [引用](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/CoreDataFramework/Classes/NSAttributeDescription_Class/reference.html#//apple_ref/occ/cl/NSAttributeDescription)常量部分给出：

```
typedef enum {
NSUndefinedAttributeType = 0,
NSInteger16AttributeType = 100,
NSInteger32AttributeType = 200,
NSInteger64AttributeType = 300,
NSDecimalAttributeType = 400,
NSDoubleAttributeType = 500,
NSFloatAttributeType = 600,
NSStringAttributeType = 700,
NSBooleanAttributeType = 800,
NSDateAttributeType = 900,
NSBinaryDataAttributeType = 1000,
NSTransformableAttributeType = 1800,
NSObjectIDAttributeType = 2000
} NSAttributeType; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-11T06:51:41.897

[您可以在此处](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/CoreDataFramework/Classes/NSAttributeDescription_Class/reference.html#//apple_ref/occ/cl/NSAttributeDescription)找到列表，具体描述在常量部分。

```
Specifically, typedef enum {
NSUndefinedAttributeType = 0,
NSInteger16AttributeType = 100,
NSInteger32AttributeType = 200,
NSInteger64AttributeType = 300,
NSDecimalAttributeType = 400,
NSDoubleAttributeType = 500,
NSFloatAttributeType = 600,
NSStringAttributeType = 700,
NSBooleanAttributeType = 800,
NSDateAttributeType = 900,
NSBinaryDataAttributeType = 1000,
NSTransformableAttributeType = 1800,
NSObjectIDAttributeType = 2000
} NSAttributeType; 
```

这意味着您可以使用的类型是：

**Undefined/transient、short、integer、long、float、double、NSDecimalNumber、NSString、Boolean、NSDate、NSData、值转换器和 id**

# winapi - 如果我对某些术语（mfc、win32、在 vc++ 中）有错误，请纠正我

> ID：10546636
> 
> 赞同：0
> 
> 时间：2012-05-11T06:41:09.420
> 
> 标签：winapi, visual-c++, cil, base-class-library

据我了解，使用 Wiki 和我发布的[这个](https://stackoverflow.com/questions/10529544/cannot-understand-relationship-between-normal-c-vs-vc-win32-programming-mf)问题，微软有自己的编译器，称为 VC++，它与许多其他东西一起包含在 .net 框架中。由于以下原因（以及其他原因），它可以做出非常好的应用程序：

1.  我们可以在其中使用一个非常好的和广泛的库，称为 Base CLass Library
2.  编译后，它会生成一个独立于平台的可移植中间代码，称为字节码（也称为通用中间语言）。此 CIL 是公共语言基础结构规范 (CLI) 的 Microsoft 实现。
3.  在其他类型中，我们可以制作被称为 Win32 的应用程序，因为它们是由 32 位内存地址组成的。此外，win32编。包括使用各种 gui 元素进行编程。

我对吗？现在，我的问题

1.  mfc 和 bcl 之间的关系是什么？
2.  cts和cil是什么关系。
3.  Win32 编程的定义是否更多地关注具有 32 位地址的应用程序”而不是“包括 gui 元素的应用程序”，反之亦然？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T07:24:38.613

首先，使用 BCL 和 Win32 进行编程的主要区别之一是 BCL 用于托管代码（用于 CLR），而 Win32 用于本机代码。使用 C++/CLI，您可以编写两种类型的代码。

1.  [MFC 是 Microsoft Foundation Classes](http://en.wikipedia.org/wiki/Microsoft_Foundation_Class_Library)，它基本上将 Windows API 包装成一个面向对象的框架。它通常由本机 C++ 使用。[BCL（基类库）](http://en.wikipedia.org/wiki/Base_Class_Library)
    的相似之处在于它也是常用类的集合，但它是为 CLR 语言（如 C#、VB.Net 或 C++/CLI）使用而设计的。所以这两者并不是真正相关的，它们的目的相似，但它们是为不同的平台设计的。

2.  CTS （[通用类型系统）](http://en.wikipedia.org/wiki/Common_Type_System)是关于类型定义、类型安全和值如何表示的。
    [CIL 是 Common Intermediate Language](http://en.wikipedia.org/wiki/Common_Intermediate_Language)，所以你用任何语言定义的每一种类型都会被编译成 CIL 代码，它必须符合 CTS 定义的规则。这确保了其他 CLR 语言可以使用该类型，无论使用哪种语言创建它。

3.  如今，Win32 这个名字并没有真正说明比特的数量。它的根源在于 16 位窗口，它还支持 64 位窗口。所以它是一个旧名称，仍在广泛使用。您也可以将其称为“Windows API”。为了解决您的问题，它既不关注。顾名思义，它只是在 Windows 上运行的应用程序的原生 API。您可以创建 GUI 元素、访问系统资源和功能等等。Windows 应用程序不需要具有 GUI 元素。

# javascript - Safari 5 中一个奇怪的 javascript 表单提交错误的解决方法是什么？

> ID：10546653
> 
> 赞同：4
> 
> 时间：2012-05-11T06:42:52.950
> 
> 标签：javascript, safari

我不确定这是否是一个现有的错误，但在调试了我正在处理的 Web 应用程序后，我发现 Safari 5 中出现了一些奇怪的行为。这是场景：

页面 A ---- HTTP POST ----> 页面 B ---- HTTP POST ----> 页面 C

**页面 A：**

```
<body onload="document.forms[0].submit()">
        <form method="post" action="pageB.php">
                <input type="hidden" name="display" value="ABC" />
        </form>
</body> 
```

**B页：**

```
<body onload="document.forms[0].submit()">
        <form method="post" action="pageC.php">
                <input type="hidden" name="display" value="123" />
                <input type="hidden" name="extra" value="XXX" />
        </form>
</body> 
```

**C页：**

```
<body>
<?php

        print_r($_REQUEST);
?>
</body> 
```

在我目前测试过的所有浏览器中，只有 Safari 5（Mac 版）会显示 name="display" 的值 "ABC"，我仍然可以看到字段 "extra" 的值 "XXX"。所有其他浏览器（包括 Safari 3、4）将显示正确的值“123”。

由于某些原因，我仍然需要使用页面 A 和页面 B 提交表单，在这种情况下，Safari 5 的解决方法是什么？（为了让它在页面 B 提交正确的值，应该是 123，而不是像将值从页面 A 转发到页面 C 那样排序）

非常感谢！

*   Edit1：仅在 Mac OS（Snow Leopard、Lion）Safari 5 上发生
*   Edit2：使示例更清晰

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T03:58:32.717

Safari is filling in the form field using [autofill behaviour](http://my.safaribooksonline.com/book/web-applications-and-services/9781615420957/use-autofill-for-forms-and-passwords/use_autofill_for_forms_and_passwords). You probably have the "Other forms" option enabled in your preferences. Even Apple recommend you turn this feature off since it can be used for stealing private information.

To workaround this for people who have it turned on anyway try `<form autocomplete="off">`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T05:29:27.160

启动像 Fiddler [http://www.fiddler2.com/](http://www.fiddler2.com/)这样的代理并观察表单之间的发布数据移动。如果它只发生在这台机器上的一个浏览器上，它看起来更像是浏览器缓存而不是表单发布错误。如果你从pageB开始呢？如果你先清除缓存怎么办？

# javascript - JSON文件的WebGl渲染非常慢，是因为JSON文件的大小吗？

> ID：10546654
> 
> 赞同：1
> 
> 时间：2012-05-11T06:43:03.780
> 
> 标签：javascript, webgl, three.js

我正在尝试使用 json 文件渲染一个非常复杂的模型。json 文件的大小是 40MB，这是一个巨大的数据，我可以在画布上渲染模型。

现在的问题是渲染非常非常缓慢。如果我尝试旋转模型或放大，整个浏览器就会挂起，这太慢了。

作为 webgl 的新手，我不知道是什么导致了这个问题。环顾四周没有发现任何东西。

是影响渲染的json文件的大小吗？我怎样才能使性能更好？应该提一下，这不是显卡的问题。身体浏览器之类的东西非常快。

我正在为此方法使用three.js jason loader

```
loader = new THREE.JSONLoader();
loader.load( 'file.js', function ( geometry ) {
    geometry.computeVertexNormals();
    mesh = new THREE.Mesh( geometry, new THREE.MeshFaceMaterial( ) );
    scene.add( mesh );
} ); 
```

对于渲染，我在 init 中执行此操作

```
renderer = new THREE.CanvasRenderer();
renderer.setSize( window.innerWidth, window.innerHeight );
container.appendChild( renderer.domElement ); 
```

在 animate() 中调用渲染函数

```
function animate() {
    requestAnimationFrame( animate );
    render();
    stats.update();
} 
```

并在渲染函数中像这样旋转网格

```
function render() {
    mesh.rotation.x += ( targetXRotation - mesh.rotation.x ) * 0.05;
    mesh.rotation.y += ( targetYRotation - mesh.rotation.y ) * 0.05;
    renderer.render( scene, camera );
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T13:14:13.213

您将此问题标记为“webgl”，所以我认为您想使用**WebGL**渲染器：

```
renderer = new THREE.WebGLRenderer(); 
```

而不是**画布**：

```
renderer = new THREE.CanvasRenderer(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T01:53:54.523

这可能取决于 40meg 文件的结构。有多少个单独的模型？模型越多，速度就越慢。

我所说的模型是什么意思？

好吧，如果你进入你最喜欢的建模包并制作 2 个球体，你就有 2 个模型。如果您制作 1000 个球体，假设每个球体 1000 个多边形并导出它可能会运行缓慢。但是，如果您知道如何将这 1000 个球体模型折叠成一个包含 1000 个球体的模型并再次导出，它可能会运行得很快。

画一件大事往往比画一千件小事要快。

# iphone - 如何以编程方式在 iOS 中显示 SSL 证书的信任

> ID：10546661
> 
> 赞同：4
> 
> 时间：2012-05-11T06:43:34.210
> 
> 标签：iphone, ipad, ios

我想显示服务器在 iOS 应用程序中发送的 SSL 证书，以便用户可以接受/取消连接或更改信任设置。

在 OS X 上有[SFCertificateView](https://developer.apple.com/library/mac/#documentation/Security/Reference/SecurityInterfaceFramework/Classes/SFCertificateView_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40003983)类和相应的 SFCertificatePanel 和[SFCertificateTrustPanel](https://developer.apple.com/library/mac/#documentation/Security/Reference/SecurityInterfaceFramework/Classes/SFCertificateTrustPanel_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40003982)类。

你知道 iOS 对应的类/函数吗？最好是“合法的”，意思是：没有私人电话，因为众所周知，Apple 会拒绝他们提交 App Store。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T07:58:58.280

没有内置任何东西。您可以接受 iOS 的默认信任评估，或者您的应用程序可以覆盖操作系统并自行决定接受或拒绝提供的证书。如果您想让用户参与该决定，您需要设计自己的 UI。

# php - 重用mysql_fetch_array带来的数据

> ID：10546662
> 
> 赞同：0
> 
> 时间：2012-05-11T06:43:35.197
> 
> 标签：php, mysql

我有一个名为 books 的表，其中包含以下字段

> book_id | 标题 | 作者 | 概括

使用下面的代码查询数据库并显示书名和作者列表。列出后，每当单击一本书的标题链接时，我想显示该书的摘要而不再次查询数据库...如何在不重新查询数据库并仅使用 $books_query_result 中存储的数据的情况下完成此操作？

```
$books_query="SELECT * FROM books";
$books_query_result=mysql_query($books_query) or die("Could not get list".mysql_error());

echo "<table><tr>";
echo "<td>";

  while($list=mysql_fetch_array($books_query_result)){
    echo "<A href=\"" .$list['book_id'] ."\"> ". $list['title']. "</a>";
    echo $list['author']."<br>";
  }

# Now I want to reset and re-use mysql_fetch_array

  mysql_data_seek($books_query_result, 0); 
  $summary=mysql_fetch_array($books_query_result);

  echo "</td>";
  echo "<td>";

#display summary here

  echo "<td>";
  echo "</tr></table>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T06:49:49.677

打印所有数据，就像它应该是可见的一样，并使用 `style="display:none" 将摘要打印到 div 中。然后在链接上添加对用于切换可见性的函数的调用：[http](http://www.randomsnippets.com/2008/02/12/how-to-hide-and-show-your-div/) ://www.randomsnippets.com/2008/02/12/how-to-hide-and-show-your-div/ 。确保您还将该功能添加到您的 javascript 中。这样，您的数据始终存在，您无需重新加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T06:53:17.750

如果您正在寻找重置和再次迭代 $books_query_result，那么您应该使用 mysql_data_seek($books_query_result, 0); 而是 mysql_data_seek($selectcompany_query_result, 0)。

只需在 while 循环内准备数组，然后在任何地方使用它

```
while($list=mysql_fetch_array($books_query_result)){
    //echo "<A href=\"" .$list['book_id'] ."\"> ". $list['title']. "</a>";
    //echo $list['author']."<br>";

    // prepare array here
    $resultArray[] = $list;
} 
```

现在使用 $resultArray。

# c# - 如何返回 JSON，包括视图的 html 文本

> ID：10546663
> 
> 赞同：0
> 
> 时间：2012-05-11T06:43:42.400
> 
> 标签：c#, asp.net-mvc-3

我想返回带有“IsError”标志的错误 html 文本。
我怎么能实现它？
这是我的审判。
假设我提交了 Ajax.BeginForm 并且在服务器端发生了错误。

**全球.asax**

```
void Application_Error(Object sender, EventArgs e)
{
    var exception = Server.GetLastError();
    var number = GetErrorNumber();
    Server.ClearError();
    Response.Redirect("/Error?number=" + number, false);
} 
```

**查看错误/索引**

```
<div>
An error occurred<br>
Error number : @ViewBag.ErrorNumber
</div> 
```

**ErrorController**我想返回 JSON，包括视图 html 和“IsError = true”！！

```
ViewBag.ErrorNumber = number;
return View(); 
```

客户端 JavaScript 捕获返回的值。
如果“IsError”为真，则返回的 html 文本将呈现。（我希望）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T06:48:47.147

我认为您应该返回 json 并使用 javascript 在客户端创建 HTML DIV。我认为您不能在 json 中返回 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T06:49:40.273

您的需求似乎不寻常，这通常表明其他地方存在问题。

我建议采用以下方法：

1.  使用标准的 try-catch 捕获操作中的错误。
2.  [用IsAjaxRequest](http://msdn.microsoft.com/en-us/library/system.web.mvc.ajaxrequestextensions.isajaxrequest.aspx)检查是否是 ajax 请求，如果为真则返回 json，否则返回标准 html 视图

这是您的操作的示例：

```
 public ActionResult FormPostHandler()
    {

        try
        {

            // Process request

        }
        catch (Exception ex)
        {
            if (Request.IsAjaxRequest())
            {
                return Json(new
                {
                    Success = false,
                    ErrorNo = 1
                });
            }
            else
            {
                return View("ErrorView"); // add model for error
            }
        }

    } 
```

**更新：**

再次阅读您的问题后，我可能已经弄清楚您要达到的目标。

1.  使用上面的代码输出一个 json 结果。
2.  在客户端，创建显示错误所需的 html（如果`Success`为 false）并将其添加到 HTML DOM。

我会说用 JSON 返回 html 是不好的做法，最好让 JSON 只携带信息并让您的表示层（html 和 javascript）处理外观。

如果您使用 jQuery、原型等，这应该非常简单。

# javascript - 如何选择所有具有某些特定 src 的子图像的 Div？

> ID：10546670
> 
> 赞同：0
> 
> 时间：2012-05-11T06:44:17.253
> 
> 标签：javascript, jquery

假设我有，

```
<div>
  <img src='aaBB_a.png' />
</div>

<div>
  <img src='aaa_a.png' />
</div>

<div>
  <img src='aaBB_a.png' />
</div> 
```

我需要选择包含 src 包含 BB_ 的 img 子项的所有 div（不是图像）。在上面的例子中，我需要选择第一个和第三个（不是第二个）。我试过这个，

```
'div img[src*="BB_"]', 
```

但它选择的是图像而不是 div。

**更新**：我需要将此传递给 jquery 委托，

$('#container').delegate('div img[src*="BB_"]','mouseover',function(){ })

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T06:46:42.180

使用 jQuery[`has()`](http://api.jquery.com/has/)将初始结果过滤为*具有*这些后代的结果

```
var divsBB = $('div').has('img[src*="BB_"]'); 
```

对于[选择器版本 `:has()`](http://api.jquery.com/has-selector/)：

```
$('#container').delegate('div:has(>img[src*="BB_"])','mouseover',function(){...}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T06:48:10.460

```
$('div img[src*="BB_"]').parent("div"); 
```

我认为这会奏效

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T06:51:44.560

您可以使用每个标签的父级`$('some_kind_img').parent()`

# android - 如何向 Android SQLite 数据库添加两个新列？

> ID：10546672
> 
> 赞同：14
> 
> 时间：2012-05-11T06:44:31.357
> 
> 标签：android, database, sqlite

我在 android 市场上有一个应用程序，现在我想更改数据库归档。我想在特定表中添加两个新字段。你能帮我如何在表中添加两个新列吗？

这是我的代码。

```
 private static final String ALTER_USER_TABLE = "ALTER TABLE user_table ADD user_society text,user_street1 text;"; 

 @Override
 public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) 
 {
    db.execSQL(ALTER_USER_TABLE);
 } 
```

执行后出现以下错误。

```
W/System.err(  717): android.database.sqlite.SQLiteException: near ",": syntax error: ALTER TABLE user_table ADD user_society text,user_street1 text;
W/System.err(  717):    at android.database.sqlite.SQLiteDatabase.native_execSQL(Native Method)
W/System.err(  717):    at android.database.sqlite.SQLiteDatabase.execSQL(SQLiteDatabase.java:1727)
W/System.err(  717):    at com.kbobs.org.database.Database$DatabaseHelper.onUpgrade(Database.java:48)
W/System.err(  717):    at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:108)
W/System.err(  717):    at com.kbobs.org.database.Database.OpenDatabase(Database.java:54)
W/System.err(  717):    at com.kbobs.org.ui.Login$2.handleMessage(Login.java:222)
W/System.err(  717):    at android.os.Handler.dispatchMessage(Handler.java:99)
W/System.err(  717):    at android.os.Looper.loop(Looper.java:123)
W/System.err(  717):    at android.app.ActivityThread.main(ActivityThread.java:4627)
W/System.err(  717):    at java.lang.reflect.Method.invokeNative(Native Method)
W/System.err(  717):    at java.lang.reflect.Method.invoke(Method.java:521)
W/System.err(  717):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
W/System.err(  717):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626) 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-05-11T06:47:47.357

您一次只能添加一列。把它分成两个`ALTER TABLE`语句，你应该没问题。

```
private static final String ALTER_USER_TABLE_ADD_USER_SOCIETY = 
    "ALTER TABLE user_table ADD user_society TEXT";
private static final String ALTER_USER_TABLE_ADD_USER_STREET1 = 
    "ALTER TABLE user_table ADD user_street1 TEXT";

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) 
{
   db.execSQL(ALTER_USER_TABLE_ADD_USER_SOCIETY);
   db.execSQL(ALTER_USER_TABLE_ADD_USER_STREET1);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-04T12:44:43.630

例如在版本 2 中，将新列添加到 DB 的正确方法是：

```
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    if (oldVersion < 2) {
         db.execSQL("ALTER TABLE mytable ADD COLUMN mycolumn TEXT");
    }
} 
```

它涵盖了所有陷阱，包括主要问题：如果用户从版本 1 升级到 3，他们将完全错过升级查询！这些用户将处于尴尬的境地，他们缺少一些中间更新并且没有预期的 sql 模式。

也不要忘记更改添加新列的创建语句。

# postgresql - 将整个数据库从 CD ISO 复制到 Ubuntu (PostgreSQL)

> ID：10546676
> 
> 赞同：0
> 
> 时间：2012-05-11T06:44:56.233
> 
> 标签：postgresql

我有运行 PostgreSQL 的 ubuntu 11.10（目标系统）。此外，我还有另一个 Linux 操作系统的 CD 映像，其中包含 PostgreSQL 以及一些现有的数据库。我想要的是使用 postgreSQL 将数据库从 OS CD 复制到目标系统（ubuntu）。怎么可能呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T08:04:47.930

我会创建一个虚拟机（例如使用 qemu-kvm），将操作系统从这张 CD 还原到虚拟机，并`pg_dumpall`在其中使用它来备份数据库。然后将其还原到新计算机。

如果不是那么容易，例如因为您在 CD 上的备份不是完整系统，您可以使用具有相同主要版本 Postgres 的 LiveCD 的虚拟机。您可以将备份 CD 中的数据目录（在我基于 RPM 的发行版中，它位于 /var/lib/pgsql 中）复制到虚拟机，然后使用`pg_dumpall`.

但有时将这份工作交给精通 Linux 和 Postgres 管理的人会更经济——这将花费你例如 60 美元，但它会在一个小时内完成。

# apache - 隐藏“https”连接的 index.php？

> ID：10546682
> 
> 赞同：2
> 
> 时间：2012-05-11T06:45:13.913
> 
> 标签：apache, .htaccess, https, url-rewriting, symfony-1.4

我想从 URL 中隐藏“index.php”，但它根本不起作用。我通过谷歌，堆栈尝试了很多东西，但它根本没有帮助我。我的 .htaccess 文件中指定了以下规则。此外，当我使用“https://www.domain.com/index.php/login”访问 URL 时，它可以正常工作，但是当我使用“https://www.domain.com/login”访问该站点时，它会显示404 页面（找不到页面）。我不确定我是否遗漏了什么。[注意：我使用的是 symfony 1.4，我也尝试使用[http://www.symfony-project.org/plugins/lapeSSLFilterPlugin](http://www.symfony-project.org/plugins/lapeSSLFilterPlugin)之类的过滤器来处理 ssl，但它不起作用。我还检查了 ssl 的错误日志，但在日志中没有收到任何相关错误。]

```
Options +FollowSymLinks +ExecCGI
<IfModule mod_rewrite.c>
   RewriteEngine On

   # uncomment the following line, if you are having trouble
   # getting no_script_name to work
   RewriteBase /

   # we skip all files with .something
   #RewriteCond %{REQUEST_URI} \..+$
   #RewriteCond %{REQUEST_URI} !\.html$
   #RewriteRule .* - [L]

   # we check if the .html version is here (caching)
   RewriteRule ^$ index.html [QSA]
   RewriteRule ^([^.]+)$ $1.html [QSA]
   RewriteCond %{REQUEST_FILENAME} !-f

   # no, so we redirect to our front web controller
   RewriteCond %{SERVER_PORT} !^443$
   RewriteRule ^.*$ https://%{SERVER_NAME}%{REQUEST_URI}        [R=301,L]
   RewriteRule ^(.*)$ index.php [QSA,L]
</IfModule> 
```

ssl.conf 文件包含以下内容：

```
LoadModule ssl_module modules/mod_ssl.so
Listen 443

<VirtualHost _default_:443>
  DocumentRoot /var/www/html/domain/web
  ServerName www.domain.com
  RewriteEngine On
  DirectoryIndex index.php
  Alias /sf /var/www/html/domain/lib/vendor/symfony/data/web/sf
  <Directory "/var/www/html/domain/lib/vendor/symfony/data/web/sf">
      AllowOverride All
      Allow from All
  </Directory>
  <Directory "/var/www/html/domain/web">
      AllowOverride All
      Allow from All
  </Directory>

  ErrorLog logs/ssl_error_log
  TransferLog logs/ssl_access_log
  LogLevel warn

  SSLEngine on
  SSLCertificateFile /etc/ssl/certs/domain.com.crt
  SSLCertificateKeyFile /etc/ssl/certs/domain.key
  SSLCertificateChainFile /etc/ssl/certs/gd_bundle.crt
  SSLCACertificateFile /etc/ssl/certs/gd_bundle.crt
</VirtualHost> 
```

httpd.conf 文件包含以下虚拟主机设置：

```
<VirtualHost *:80>
   ServerName www.domain.com
   DocumentRoot "/var/www/html/domain/web"
   DirectoryIndex index.php
   RewriteEngine On
   <Directory "/var/www/html/domain/web">
     AllowOverride All
     Allow from All
   </Directory>
   Alias /sf /var/www/html/domain/lib/vendor/symfony/data/web/sf
   <Directory "/var/www/html/domain/lib/vendor/symfony/data/web/sf">
      AllowOverride All
      Allow from All
   </Directory>
</VirtualHost> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T13:43:57.593

问题在你的 symfony 配置中。所有 apache 配置文件都可以。

您需要在全局 security.yml 中添加它

```
default:
  is_secure: false
  is_ssl: true 
```

sfGuardAuth/config/security.yml

```
secure:
  is_secure: false
  is_ssl: true

signin:
  is_secure: false
  is_ssl: true

signout:
  is_secure: false 
```

如果你不想在你的 URL 集中没有“index.php”

```
no_script_name:         true 
```

在您的全局应用程序 settings.yml

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T11:58:08.017

该网站是否可以在没有 index.php 和 http（不是 https）的情况下工作？

如果站点在没有 https 的情况下无法在 http 中运行，则问题可能出在 symfony 部分。你能告诉我们你的`apps/[your apps]/config/settings.yml`吗？特别寻找选项[`no_script_name`](http://www.symfony-project.org/reference/1_4/en/04-Settings#chapter_04_sub_no_script_name)：

> 该`no_script_name`设置确定是否将前端控制器脚本名称附加到生成的 URL 之前。默认情况下，它`true`由创建的第一个应用程序的环境的`generate:app`任务设置。`prod`

# android - 以编程方式将标准小部件添加到主屏幕

> ID：10546686
> 
> 赞同：2
> 
> 时间：2012-05-11T06:45:32.840
> 
> 标签：android, android-widget

是否可以以编程方式将现有的小部件（如日历、音乐小部件）添加到 Android 中的 HomeScreen？

谢谢， 巴瓦尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-12T18:53:17.150

不，你不能。只有您可以自己创建小部件主机并让用户将现有小部件添加到其中。

# c++ - 我们是否需要为分配有“新位置”的“简单 POD 类”显式调用析构函数？

> ID：10546695
> 
> 赞同：13
> 
> 时间：2012-05-11T06:46:24.177
> 
> 标签：c++, destructor, placement-new, explicit-destructor-call

这里的“简单”是指具有非虚拟空析构函数或 POD 类型的类。

典型例子：

```
char buffer[SIZE];
T *p = new(buffer) T;
...
p->~T();  // <---- always ? 
```

如果我们不调用显式析构函数 on 会发生什么`p`？我不认为这是未定义的行为或内存泄漏。
重复使用有什么问题`buffer`吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-11T06:54:58.120

从技术上讲，假设析构函数不释放构造过程中获取的任何资源，则可能没有必要。

但是，考虑到非技术方面 - 代码的维护和演变 - 我会坚持最佳实践 - 构建的内容应该被破坏。需要考虑的场景 - 如果将来某些更改将决定相关代码放入析构函数中怎么办？你会记得你对那种类型的对象的破坏持怀疑态度吗？

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-11T06:57:29.233

对于 POD 类型或具有*微不足道*的析构函数的类：否。当对象的存储被释放或重用时，对象的生命周期将结束。如果您不想，则不必显式调用析构函数。

也就是说，没有理由不这样做。对于具有普通析构函数的类型，析构函数调用不会生成任何代码。

如果通过具有“空”析构函数的类，您允许该类具有具有非平凡析构函数的成员或基类，那么如果您的程序依赖于调用这些析构函数，您可能会得到未定义的行为。

请注意，用户提供的析构函数是一个重要的析构函数，即使它是非虚拟的并且是空的。尽管如此，您仍然可以通过简单地释放或重用其存储空间来结束具有此类析构函数的对象的生命周期，前提是您的程序不依赖于析构函数的任何副作用。（参见 ISO/IEC 14882:2011 的 3.8 [basic.life] / 4）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T06:55:37.373

如果您的类处理一些资源（堆内存、句柄、计数器、互斥体...）或包含一些处理资源的字段，如果您不显式调用析构函数，这些资源将不会被释放。否则没有任何破坏的麻烦。您可以将未破坏的类视为内存中的垃圾，并在同一位置自由构建新的类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T06:57:44.927

是的，您必须显式调用析构函数（请记住 T 的副作用，即释放一些额外的内存）。此外，在使用placement new 时，您必须注意内存对齐。

如果您愿意，您可以重用缓冲内存。

另请参阅[http://www.parashift.com/c++-faq-lite/dtors.html#faq-11.14](http://www.parashift.com/c++-faq-lite/dtors.html#faq-11.14)

# ruby-on-rails-3 - Rails 版本控制

> ID：10546697
> 
> 赞同：0
> 
> 时间：2012-05-11T06:46:31.080
> 
> 标签：ruby-on-rails-3, version-control

我一直在按照指南在 rails 中安装一个名为 sharebox 的应用程序。目前我正在使用 rails 3.2，但刚刚意识到该指南使用的是 rails 3.0.3。

作为 Rails 世界的新手，我的第一个问题是这两个版本之间有什么区别，以及是什么导致该应用程序无法在 3.2 上完全正常运行

其次，有没有办法让应用程序在 3.2 上兼容，还是我需要使用 3.0.3？

一如既往的感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T09:59:33.273

> 作为 Rails 世界的新手，我的第一个问题是这两个版本之间有什么区别，以及是什么导致该应用程序无法在 3.2 上完全正常运行

为您服务的发行说明：[Rails 3.2](http://guides.rubyonrails.org/3_2_release_notes.html)、[Rails 3.1](http://guides.rubyonrails.org/3_1_release_notes.html)

> 其次，有没有办法让应用程序在 3.2 上兼容，还是我需要使用 3.0.3？

如果`sharebox`是商业项目，那么供应商应该对此有答案。无论哪种情况，您都可以自己测试与 3.2 的兼容性并向项目开发人员报告问题。

> 我研究了我用来控制我的 Ruby 版本的 RVM，但不明白如何同时管理 Rails 版本。

您需要将gemset 与在[Gemfile](https://rvm.io/gemsets/)中编辑 Rails（及其依赖项）版本配对使用。

PS`Sergio Tulentsev`完全正确。如果你要做这个项目，你必须赶上 Ruby 和 Rails 生态系统（rvm、rvm gemsets、bundler、Gemfile 等）。ruby（尤其是 Rails）社区中的项目开发非常密集，您将无法在 SO 上询问所有内容。结论：学习阅读文档、rdocs、rspecs 等 :)

祝你一开始好运。

# php - 远程登录不适用于 Curl

> ID：10546701
> 
> 赞同：0
> 
> 时间：2012-05-11T06:47:13.333
> 
> 标签：php, curl, login, connect

嗨，我有远程登录代码并尝试连接到我的目标站点，但我不能。

```
$url="http://hipfile.com"; 

$postdata = "login=bnnoor&password=########&op=login";

$ch = curl_init(); 
curl_setopt ($ch, CURLOPT_URL, $url); 
curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, FALSE); 
curl_setopt ($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.6) Gecko/20070725 Firefox/2.0.0.6"); 
curl_setopt ($ch, CURLOPT_TIMEOUT, 60); 
curl_setopt ($ch, CURLOPT_FOLLOWLOCATION, 1); 
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1); 
curl_setopt ($ch, CURLOPT_REFERER, $url); 

curl_setopt ($ch, CURLOPT_POSTFIELDS, $postdata); 
curl_setopt ($ch, CURLOPT_POST, 1); 
$result = curl_exec ($ch); 

if (!$result) { 
        $http_code = curl_getinfo($ch, CURLINFO_HTTP_CODE); 
        curl_close($ch); // make sure we closeany current curl sessions 
        die($http_code.' Unable to connect to server. Please come back later.'); 
    } 
echo $result;  
curl_close($ch); 
```

网站中的登录表单是

```
 <form method="POST" action="http://hipfile.com/" name="FL">

<input type="hidden" name="op" value="login">
<input type="hidden" name="redirect" value="http://hipfile.com/">
<div class="clear span-5">Username:&nbsp;<input type="text" name="login" value="bnnoor" class="myForm"></div>
Password:&nbsp;<input type="password" name="password" class="myForm">
<input type="image" style="height: 34px; padding-left:10px; padding-bottom: 3px; vertical-align: middle;" src="http://hipfile.com/images/login.png">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://hipfile.com/?op=forgot_pass">Forgot your password?</a><br>

</form> 
```

但我无法访问我在站点中的文件，并且在开始页面重定向到站点中的登录页面后？请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T08:24:11.967

A. 无效的网址

你正在使用`http://hipfile.com`哪个会返回`HTTP/1.1 500 - Bad Response`

您需要使用的是（注意`/`最后的）

```
 $url = "http://hipfile.com/" ; 
```

B. 无效的推荐人

您还需要更改`CURLOPT_REFERER`为`http://hipfile.com/login.html`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T08:23:15.913

设置`CURLOPT_COOKIEFILE`和`CURLOPT_COOKIEJAR`，下次连接时您将保留cookie

[http://php.net/manual/en/function.curl-setopt.php](http://php.net/manual/en/function.curl-setopt.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T08:13:08.373

只是为了检查，在登录页面上做一个 GET 并存储设置的 cookie 值。将该 cookie 与您的帖子一起使用。

此外，将重定向隐藏字段与您的帖子变量一起发送

# function - 我无法通过传递参数获得 Start-Job 来启动

> ID：10546706
> 
> 赞同：1
> 
> 时间：2012-05-11T06:47:46.107
> 
> 标签：function, url, powershell, parameters, start-job

我正在尝试使用这个：

```
$Properties = @((0,100),(20,200))
$URLS = @(("www.google.com","www.yahoo.com"),("www.bing.com","www.msn.com"))

for ($a=0; $a -le 0; $a++)
{
for ($b=0; $b -le 1; $b++)
    {
        Start-Job -name ("Job"+$a+$b) -FilePath "C:\Users\Robert\Desktop\Voodoo\Voodoo-v2\Jobs\NewJob1-1.ps1" -ArgumentList $a,$b,$Properties,$URLS
        Start-Sleep -Seconds 1
    }
} 
```

要运行这个：

```
param $c $d $Prop $U

function OpenBrowserWindow([int]$top,[int]$left)
    {
        $date = get-date
        $Global:ie = new-object -comobject "InternetExplorer.Application"  
        $ie.visible = $true  
        $ie.Top = $top
        $ie.Left = $left
        #$ie.FullScreen = $true
    }

function URL($URL1,$URL2)
    {     
        $ie.navigate($URL1) 
        start-sleep -s 5
        $ie.navigate($URL2)
        start-sleep -s 5
    }

OpenBrowserWindow $Prop[$c][$d] $Prop[$c][1];

do
{
    URL $U[$c][$d] $U[$c][1];
}
until ($date.year -ieq 2020) 
```

但我不断得到：

> ```
> Start-Job : Missing ')' in function parameter list.
> At C:\Users\Robert\Desktop\Voodoo\Homer\Tester22.ps1:9 char:13
> +             Start-Job <<<<  -name ("Job"+$a+$b) -FilePath "C:\Users\Robert\Desktop\Voodoo\Voodoo-v2\Jobs\NewJob1-1.ps1" -ArgumentList $a,$b,$Properties,$URLS
> + CategoryInfo          : ParserError: (CloseParenToken:TokenId) [Start->Job], ParseException
> + FullyQualifiedErrorId : MissingEndParenthesisInFunctionParameterList,Microsoft.PowerShell.Commands.StartJobCommand 
> ```

我一遍又一遍地检查了这个东西，但似乎找不到我错过'）'的地方

如果有人可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-24T00:23:52.993

错误在`ps1`. 参数必须用括号括起来。

```
param( $c $d $Prop $U)

function OpenBrowserWindow([int]$top,[int]$left)
    {
        $date = get-date
        $Global:ie = new-object -comobject "InternetExplorer.Application"  
        $ie.visible = $true  
        $ie.Top = $top
        $ie.Left = $left
        #$ie.FullScreen = $true
    }

function URL($URL1,$URL2)
    {     
        $ie.navigate($URL1) 
        start-sleep -s 5
        $ie.navigate($URL2)
        start-sleep -s 5
    }

OpenBrowserWindow $Prop[$c][$d] $Prop[$c][1];

do
{
    URL $U[$c][$d] $U[$c][1];
}
until ($date.year -ieq 2020) 
```

# c# - 从另一个单选按钮的“CheckedChanged”事件中取消选择其他单选按钮

> ID：10546711
> 
> 赞同：2
> 
> 时间：2012-05-11T06:48:07.300
> 
> 标签：c#, asp.net, radio-button, web-controls

我基本上想实现 RadioButtonList 的功能，而不使用该控件（即保持单选按钮分开。）。所以我将两个常规 RadioButton（不是列表）控件拖到页面中。两个单选按钮都设置为 AutoPostback=true。

我尝试使用以下两个事件处理程序：

```
protected void radio1_CheckedChanged(object sender, EventArgs e)
{
    radio2.Checked = false;
}

protected void radio2_CheckedChanged(object sender, EventArgs e)
{
    radio1.Checked = false;
} 
```

所以我期望的是，如果用户点击了 radio1，radio2 应该取消选中。这不会发生。没有错误或任何东西。我一步一步发现，确实在选择其中一个单选按钮时，事件确实触发了。并将另一个单选按钮的 .Checked 状态更改为 false。但是，在页面上，两个单选按钮仍处于选中状态。（我知道，这似乎是一个回发问题，但事实并非如此）。

* * *

我不能使用 RadioButtonList 控件的原因是，鉴于页面上的其他选项，我需要禁用某些单选按钮选项。例如，在下拉列表中选择项目 A 会禁用 radio1，因此它甚至不是一个选择，但再次选择项目 B 会重新启用 radio1，并禁用 radio2。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T06:54:00.780

您不需要服务器端事件来实现这一点。使用单选按钮的 GroupName 属性并将所有单选按钮保留在相同的 groupName 下，例如 -

```
<asp:RadioButton ID="RadioButton1"  GroupName = "a" runat="server" />
<asp:RadioButton ID="RadioButton2" GroupName = "a" runat="server" />
<asp:RadioButton ID="RadioButton3" GroupName = "a"  runat="server" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T06:56:36.673

我只是添加一个检查是否选中了另一个单选按钮并且它可以工作

```
 private void radioButton1_CheckedChanged(object sender, EventArgs e)
    {
        if (radioButton1.Checked)
        radioButton2.Checked = false;
    }

    private void radioButton2_CheckedChanged(object sender, EventArgs e)
    {
        if (radioButton2.Checked)
        radioButton1.Checked = false;
    } 
```

# java - 当我们在 Eclipse 调试模式下修改某些对象时，类加载是如何发生的

> ID：10546713
> 
> 赞同：1
> 
> 时间：2012-05-11T06:48:19.370
> 
> 标签：java, eclipse, debugging, classloader

在eclipse中调试一些程序时，我们可以修改一些变量/对象的值/引用，之后eclipse会重新加载该类，如果是的话如何？或者基本上eclipse内部如何处理这些事情？

我用谷歌搜索但找不到任何相关结果。欢迎任何形式的参考..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T15:48:13.277

我认为 Eclipse 只是改变了记忆。也就是说，它不会重新加载类，而是*改变*它的 .class 表示。

# css - 如何将位置属性用于非背景图像

> ID：10546714
> 
> 赞同：0
> 
> 时间：2012-05-11T06:48:22.073
> 
> 标签：css, image, position

我在主页中使用滑动横幅。我使用的横幅尺寸为 1680X525。我只想显示该图像的中心部分。我知道有一个名为的 CSS 属性`background-position: center center;`

但我使用的图像不是背景图像。`Background-position`给我一个解决方案，在不使用属性的情况下显示图像的中心部分

# android - Android设置偏好类别的背景颜色

> ID：10546715
> 
> 赞同：4
> 
> 时间：2012-05-11T06:48:22.663
> 
> 标签：android, background-color, preferenceactivity

我尝试自定义偏好类别的背景颜色。我已经更改了首选项本身的背景颜色，但我找不到如何更改类别背景颜色的方法。

我找到了两种方法，但它们对我不起作用： [更改偏好类别标签颜色背景](https://stackoverflow.com/questions/7048089/changing-the-preference-category-label-color-background)

通过[这个链接](https://stackoverflow.com/questions/5571603/change-preferenceactivity-text-color)，我找到[了这个](http://udinic.wordpress.com/2011/08/18/dress-up-your-preferenceactivity/)，但我没有尝试过对我有用。这些布局片段是我迄今为止尝试过的：

```
<resources>
    <style name="setBackgroundTheme" parent="android:Theme">
        <item name="android:background">@color/darkbluelogo</item>
    </style>
</resources> 
```

在`onCreate`方法中，我将主题设置为：

```
setTheme(R.style.setBackgroundTheme); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-08T03:41:44.907

使用您的背景颜色自定义布局文件，将其设置在您的 PreferenceCategory 中：

```
<PreferenceCategory
    android:layout="@layout/your_layout"> 
```

# php - 如何从 php 中的 cookie 将数据保存在 mysql 中？

> ID：10546717
> 
> 赞同：-5
> 
> 时间：2012-05-11T06:48:30.350
> 
> 标签：php, mysql, database, cookies

> **可能重复：**
> [将我的 cookie 数据保存到 MySQL 数据库？](https://stackoverflow.com/questions/10550441/save-my-cookie-data-to-mysql-database)

我想从php 中**的 **cookies 将数据保存到 mysql **database****中。**我有一个将数据存储在离线服务器上的 cookie 中的应用程序，我想在我上网时将此 cookie 保存在我的 sql 数据库中。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-05-11T07:07:54.343

您的问题不清楚，但它可能对您有用。

您可以遍历 php cookie 数组并将其插入表中。

```
foreach($_COOKIE as $name => $cookie){
    // you can check any conditions based on cookie name $name
    $query1 = "INSERT INTO table_name(field_name) VALUES(" . mysql_escape_string($cookie) . ")";
    mysql_query($query1);
    unset($query1);
} 
```

# java - eclipse出现编译错误时如何执行java代码

> ID：10546718
> 
> 赞同：3
> 
> 时间：2012-05-11T06:48:32.597
> 
> 标签：java, eclipse, compilation

在eclipse中执行以下java代码时，它给出了正确的输出（即打印'Class B'），但是根据java规范，无法编译代码（因为超类构造函数需要一个`int`参数并且构造函数由对 B 类的编译器包括对未定义的超类无 arg 构造函数的调用），当尝试在命令行中使用 javac 命令编译文件时，它只编译超类，即 A 类，并因以下编译而失败错误：

```
B.java:8: cannot find symbol
symbol  : constructor A()
location: class A
public class B extends A {
   ^
1 error 
```

以下是java文件内容：

```
class A {

    public A(int x) {
        //
    }
}

public class B extends A {

    public static void main(String[] args) {
        System.out.println("Class b");
    }
} 
```

有人可以解释 eclipse 如何在 bieng 无法编译类的情况下执行 main 方法。提前致谢。

**更新**

我删除了bin文件夹中eclipse创建的.class文件并尝试执行该类，但无法编译，因此没有运行。但是当我创建一个带有公共类名的源文件并保存时没有任何内容，然后添加上面的内容，它就起作用了。如果eclipse使用之前编译的版本来执行，怎么能给出方法的输出呢，因为在编译成功的时候`main`没有方法呢？`main`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T06:52:57.203

实际上，eclipse尝试编译该类并且由于构建错误而无法编译，当您简单地运行它执行先前编译的类的那些文件时，这些文件之前已成功编译（eclipse尝试在每次保存时编译和构建文件为每个通用设置）。

为了解决您可以在运行之前尝试清理项目，而对于 javac，它只是编译，

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-23T17:04:08.363

Eclipse 使用它自己的 Java 编译器（称为`ecj`）而不是`javac`. 该编译器[允许（部分）编译损坏的源文件](https://stackoverflow.com/a/16394204/1016939)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T12:53:32.037

Eclipse 不应该那样做。它导致模棱两可的结果。如果无法编译一个类，则应删除其对应的 .class 文件。

如果您检查 bin 文件夹，则存在 B.class 和 A.class。不知道为什么它会创建 B.class 即使 B 没有编译

# jsf - 如果我不想在 faces-config.xml 中输入条目，如何指定导航规则

> ID：10546719
> 
> 赞同：0
> 
> 时间：2012-05-11T06:48:36.463
> 
> 标签：jsf, myfaces

现在我在 faces-config.xml 文件中给出我的导航规则。如果我想停止在 faces-config.xml 中输入条目。

**如果我不想在 faces-config.xml 中指定导航规则，如何指定？**

“面孔-config.xml”

```
<?xml version="1.0"?>
<faces-config version="1.2" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_1_2.xsd">
    <navigation-rule>
        <description>Navigation from the hello page.</description>
        <from-view-id>/login.xhtml</from-view-id>
        <navigation-case>
            <from-outcome>success</from-outcome>
            <to-view-id>/wsListing.xhtml</to-view-id>
            <redirect />
        </navigation-case>
    </navigation-rule>
    <navigation-rule>
        <description>Navigation from the hello page.</description>
        <from-view-id>/wsListing.xhtml</from-view-id>
        <navigation-case>
            <from-outcome>ebzService</from-outcome>
            <to-view-id>/ebzinput.xhtml</to-view-id>
            <redirect />
        </navigation-case>
        <navigation-case>
            <from-outcome>filterEbz</from-outcome>
            <to-view-id>/filterebzinput.xhtml</to-view-id>
            <redirect />
        </navigation-case>
    </navigation-rule>

    <navigation-rule>
        <description>Navigation from the hello page.</description>
        <from-view-id>/ebzinput.xhtml</from-view-id>
        <navigation-case>
            <from-outcome>success</from-outcome>
            <to-view-id>/ebzoutput.xhtml</to-view-id>
            <redirect />
        </navigation-case>
        </navigation-rule>

</faces-config> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T11:22:40.693

仅从 JSF 2.0 开始支持隐式导航。根据 XML 文件根声明和您的问题历史记录，您使用的是 JSF 1.2，所以这就是故事的结尾。

但是，根据您当前的导航案例，您似乎每次都在重定向。为此，您也可以`ExternalContext#redirect()`改用。

```
public void login() throws IOException {
    // ...

    FacesContext.getCurrentInstance().getExternalContext().redirect("wsListing.xhtml");
} 
```

或者，如果您实际上根本不需要执行业务操作，只需使用普通链接即可。

```
<h:outputLink value="ebzinput.xhtml">go to ebzinput</h:outputLink> 
```

另一个优点是它变得可搜索机器人索引（因此更好的 SEO）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T08:07:42.003

例如，操作方法可能会返回视图 ID，而不是“成功”

```
public String login() { return "wsListing"; } 
```

通过这种方式，您可以将导航规则转移到托管 bean。如果你想强制重定向使用

```
public String login() { return "wsListing?faces-redirect=true"; } 
```

# java - 如何在java中编译包？

> ID：10546720
> 
> 赞同：26
> 
> 时间：2012-05-11T06:48:41.630
> 
> 标签：java

我写了一个简单的打包程序：

* * *

```
 //A simple package

       package MyPack

       class Balance
       {
        String name;
        double bal;

        Balance(String n, double b)
        {
            name=n;
                    bal=b;
            }

        void show()
            {
            if(bal<0)
            System.out.println("-->");
            System.out.println(name+ ": $:" +bal);
        }
        }

        class AccountBalance
        {
            public static void main(String args[])
            {
                       Balance current[]=new Balance[3];
                    current[0]=new Balance("A.K.Juwatkar",123.123);
                    current[1]=new Balance("A.P.Dhoke",345.67);
                    current[2]=new Balance("Anil Sarang",100.98);

                    for(int i=0;i<3;i++)
                current[i].show();
               }
        } 
```

* * *

我正在使用 Ubuntu 10.04 & 当我使用它编译它时

```
java MyPack.AccountBalance 
```

我收到以下消息：

```
Exception in thread "main" java.lang.NoClassDefFoundError: MyPack/AccountBalance
Caused by: java.lang.ClassNotFoundException: MyPack.AccountBalance
    at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
Could not find the main class: MyPack.AccountBalance. Program will exit. 
```

怎么了？请帮帮我。我已经安装了openjdk，我还需要安装什么吗？我正在使用 Ubuntu 10.04，请帮帮我

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-11T07:09:20.063

最好是从包外部编译和运行类：

首先你用 javac 编译：

```
$javac MyPack/AccountBalance.java 
```

这将在 MyPack 文件夹中创建一个名为 AccountBalance.class 的新文件

然后你可以运行它：

```
$java MyPack.AccountBalance 
```

顺便说一句：不鼓励包名以大写字母开头。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-05-11T07:10:52.933

当您尝试编译 java 类时，使用“-d”选项（目标）指定 .class 文件的位置。

```
javac -d "classes" AccountBalance.java 
```

并且当您运行程序时，请确保您的类路径中包含相同的文件夹：

```
java -classpath "classes" MyPack.AccountBalance 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-11T06:52:50.040

尝试创建名为的文件夹`MyPack`并在其中移动 .class 文件，或使用以下命令行编译 java 代码并将 .class 文件移动到`MyPack`文件夹中。

```
javac YourFileName.java -d . 
```

并运行使用，

```
java MyPack.AccountBalance 
```

看看 [javac](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/solaris/javac.html)工具

> 来自工具文档：默认情况下，编译器将每个类文件与其源文件放在同一目录中。您可以使用 -d 指定单独的目标目录（请参阅下面的选项）。

和[包](http://docs.oracle.com/javase/tutorial/java/package/packages.html)教程。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-10-02T02:31:55.083

如果您经常通过`javac`和`java`命令编译和运行，请使用

```
javac MyJavaClass.java && java MyJavaClass 
```

这将编译该类，然后运行您刚刚编译的类。

注意：如果使用 Windows powershell ，请替换`&&`为。`;`

# ruby - 为什么 RubyGem 电子表格不能在 Ruby 1.9.3 中工作？

> ID：10546728
> 
> 赞同：0
> 
> 时间：2012-05-11T06:49:07.807
> 
> 标签：ruby, excel, gem, warnings, spreadsheet

我已经使用“sudo gem install spreadsheet”在 Mac OS X 10.7 中安装了电子表格。但是当我运行一个示例时，它无法成功运行。

```
/Users/dearkx/.rvm/gems/ruby-1.9.3-p0/gems/spreadsheet-0.7.1/lib/spreadsheet/excel/writer/workbook.rb:189: warning: assigned but unused variable - len
/Users/dearkx/.rvm/gems/ruby-1.9.3-p0/gems/spreadsheet-0.7.1/lib/spreadsheet/excel/writer/workbook.rb:527: warning: assigned but unused variable - bef
/Users/dearkx/.rvm/gems/ruby-1.9.3-p0/gems/spreadsheet-0.7.1/lib/spreadsheet/excel/writer/worksheet.rb:292: warning: assigned but unused variable - len
/Users/dearkx/.rvm/gems/ruby-1.9.3-p0/gems/spreadsheet-0.7.1/lib/spreadsheet/excel/writer/worksheet.rb:599: warning: assigned but unused variable - links
/Users/dearkx/.rvm/gems/ruby-1.9.3-p0/gems/ruby-ole-1.2.11.3/lib/ole/storage/base.rb:232: warning: assigned but unused variable - before
/Users/dearkx/.rvm/gems/ruby-1.9.3-p0/gems/ruby-ole-1.2.11.3/lib/ole/types/property_set.rb:36: warning: assigned but unused variable - map
/Users/dearkx/.rvm/gems/ruby-1.9.3-p0/gems/ruby-ole-1.2.11.3/lib/ole/storage/meta_data.rb:79: warning: assigned but unused variable - compobj_version
⋯⋯⋯⋯
⋯⋯⋯⋯ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T07:04:44.853

它们只是警告，而不是错误。它们只是在 gem 中指出程序员不应该做的事情，但 Ruby 仍然会执行代码。

这些警告是在[2010 年](https://stackoverflow.com/questions/6397078/when-did-assigned-but-unused-become-a-warning-for-ruby)添加的，这可以解释为什么它没有出现在 Ruby 1.8.7 中。

# c# - 上传图片失败到系统

> ID：10546729
> 
> 赞同：0
> 
> 时间：2012-05-11T06:49:08.950
> 
> 标签：c#, web-services

我创建了一个表单来将图片上传到我的系统，但图片上传失败。

我尝试了我的网络服务是否已`getCurrentTime()`在我的系统中使用并且已成功连接。

我的朋友告诉我这应该是服务器问题，但我和我的朋友真的不知道如何检查我们的服务器是否成功连接到我们的系统。

谁能帮我解决这个问题？

预先感谢。

我的代码

```
 protected void btnSave_Click(object sender, EventArgs e)
    {
        string fileName = string.Empty;
        if (File2.PostedFile != null)
        {
            fileName = System.IO.Path.GetFileName(File2.PostedFile.FileName);
        }
        if (fileName != string.Empty)
        {
            if (!this.CheckFileFormat(fileName))
            {
                WindowJS.WindowAlert("Image format is incorrect !");
                return;
            }
            string server = ImageURL;
            string unique = Guid.NewGuid().ToString();
            string filePath = server.TrimEnd('\\').TrimEnd('/') + ImageURLRelative + unique + "." + fileName.Split('.')[1].ToString();
           // string LocalfilePath = Server.MapPath("..") + unique + "." + fileName.Split('.')[1].ToString();
            string uploadFileName = unique + "." + fileName.Split('.')[1].ToString();
            try
            {
                HttpPostedFile mFile = File2.PostedFile;

                int fileSize = mFile.ContentLength;
                int done = 0;

                byte[] mFileByte = new Byte[fileSize];
                mFile.InputStream.Read(mFileByte, 0, fileSize);

                string WebServiceUrl = string.Empty;

                try
                {                    
                    Rewards.high5.RedemptionUpload high5UploadService = new Rewards.high5.RedemptionUpload();

                    if (Brand == "high5")
                    {
                        done = high5UploadService.UploadImage(uploadFileName, mFileByte);

                        if (done == 1)
                        {

                        }
                        else
                        {
                            WindowJS.WindowAlert("Error: Upload image fail.");
                            return;
                        }
                    }
                    //else if (Brand == "TLC")
                    //{
                    //    done = TLCUploadService.UploadImage(uploadFileName, mFileByte);
                    //}

                }
                catch (Exception ex)
                {
                    WindowJS.WindowAlert("Error: Upload image fail.");
                    return;
                }
            }
            catch (Exception ex)
            { WindowJS.WindowAlert(ex.Message.ToString()); }
            try
            {
                File2.PostedFile.SaveAs(filePath);
                ImgUrl.ImageUrl = ImageURLRelative + unique + "." + fileName.Split('.')[1].ToString();
            }
            catch (Exception ex)
            {
                WindowJS.WindowAlert(ex.Message.ToString());
            }
            ViewState["IMG"] = ImageURLRelative + unique + "." + fileName.Split('.')[1].ToString();
        }
        if (txtName.Text.Trim() == string.Empty)
        {
            WindowJS.WindowAlert("Please input the Name !");
            return;
        }
        try
        {
            Convert.ToDecimal(txtPoint.Text.Trim());
        }
        catch
        {
            WindowJS.WindowAlert("Please input the Points correctly");
            return;
        }
        if (ViewState["Type"].ToString() == "E")
        {
            int rows = EditRedemption();
            if (rows == 0)
            {
                WindowJS.WindowAlert("Failed to modify");
            }
            else
            {
                WindowJS.WindowAlert("Modified successfully");
                LoadInfo("V");

            }

            return;
        }
        else if (ViewState["Type"].ToString() == "A")
        {
            AB5VIP.BLL.Redemption red = new AB5VIP.BLL.Redemption();
            if (red.Exists_RedName(txtName.Text.Trim()))
            {
                WindowJS.WindowAlert("This Redemption already existed !");
                return;
            }
            int rows = AddRedemption();
            WindowJS.WindowAlert(rows == 0 ? "Failed to save" : "save successfully");
        }
        else if (ViewState["Type"].ToString() == "V")
        {
            AB5VIP.BLL.Redemption redlang = new AB5VIP.BLL.Redemption();

            int rows = redlang.UpdateRedemptionLang(Convert.ToInt32(ViewState["ID"].ToString()), ddlLang.SelectedItem.Value, txtName.Text, txtTitle.Text.ToString(), txtDesc.Text, Session["ABP_LoginName"].ToString(), System.DateTime.Now);
            WindowJS.WindowAlert(rows == 0 ? "Failed to save" : "save successfully");
        }
        lblCode.Text = string.Empty;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T06:57:27.297

Your application need writing permission on the folder where you're going to save the pictures. Depending wich version of IIS you're running, permissions most be granted to ASPNET user (IIS 6) or the account used for application pool (IIS 7).

[http://blogs.msdn.com/b/david.wang/archive/2005/08/20/why-can-i-upload-a-file-without-iis-write-permission.aspx](http://blogs.msdn.com/b/david.wang/archive/2005/08/20/why-can-i-upload-a-file-without-iis-write-permission.aspx)

Best regards.

# iphone - 手动重新创建 UIImagePicker 允许编辑属性

> ID：10546733
> 
> 赞同：1
> 
> 时间：2012-05-11T06:49:41.727
> 
> 标签：iphone, ios, uiimagepickercontroller

在 UIImagePicker 类中，有一个属性 allowEditing，它将带您进入一个视图，您可以在其中移动/调整大小并最终将图像裁剪到特定区域。

视图如下所示：![在此处输入图像描述](../Images/19be02b76d0355b027bb93aaee403bc1.png)

我需要手动重新创建这个视图。会有任何现有的解决方案吗？否则，任何帮助将不胜感激！

现在，我所做的是创建一个 View 应用程序，其中我有一个可缩放的 UIScrollView。所以在这一点上，我可以移动/缩放到 UIImageView，它是滚动视图的子视图。但是，我不确定如何在视图上显示边界矩形，并且只能提取该矩形内的图像。

谢谢！

# html - 输入 onchange 事件不起作用

> ID：10546734
> 
> 赞同：1
> 
> 时间：2012-05-11T06:49:41.833
> 
> 标签：html, forms, submit

我有一个日期选择器脚本，它将选择的日期放入我的输入文本中：

```
<script type="text/javascript" language="javascript">
$(function () {
    $(".datepicker").datepicker({ onSelect: function (dateText, inst) { },
        altField: ".alternate"
    });

}); 
```

这是我的表格：

```
<form action="/" >

   <input type="text" class="alternate" onchange='this.form.submit()' readonly="readonly" />

</form> 
```

我想在每次输入文本的值发生变化时自动提交表单。每次我在日期选择器中选择一个新日期时，输入文本都会发生变化，但表单不提交......我怎么能这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T06:52:33.860

```
 $("#EleId").click({
         alert("Called");
    });

<form action="/" >

   <input type="text" id="EleId" class="alternate" onchange='this.form.submit()' />

</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T06:52:40.930

请参阅[通过以编程方式更改文本框值来调用 Javascript onchange 事件](https://stackoverflow.com/questions/735462/call-javascript-onchange-event-by-programatically-changing-textbox-value)

为什么不直接使用`onSelect`datepicker 中的事件来提交表单呢？

就像是：

```
$(function () {
    $(".datepicker").datepicker({ onSelect: function (dateText, inst) { 
           $("#textboxID").val(dateText);
           $("FORM").submit();
        },
        altField: ".alternate"
    });
}); 
```

# bash - Sublime text 2 - 如何通过 ssh 运行 shell 命令？

> ID：10546739
> 
> 赞同：10
> 
> 时间：2012-05-11T06:50:30.260
> 
> 标签：bash, editor, sublimetext2

我是*Sublime Text 2*的新手，还有一些我还没有弄清楚的东西，如何通过 SSH 运行 bash 命令？

例如，要查看我的开发服务器上的*Apache*错误日志，我希望能够运行：

```
ssh root@192.168.0.2 "tail -10 /var/log/httpd-error-user.log" 
```

我不想打开终端，而是想在编辑器中使用键盘快捷键运行它。

我已经阅读了有关[构建系统](http://docs.sublimetext.info/en/latest/reference/build_systems.html)的信息，但我不确定这是要走的路，而且它似乎只允许一个命令。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-11T15:16:17.237

我会回答我自己的问题。您可以轻松地创建指向任何脚本的构建，所以我所要做的就是创建`myscript.sh`包含：

```
#!/bin/bash
ssh root@192.168.0.2 "tail -10 /var/log/httpd-error-user.log" 
```

然后在*ST2*中创建一个新的*构建系统*来调用它：

 *```
{
    "cmd": ["./myscript.sh"]
} 
```

**注意**：在这个例子中（我在 Linux 上），`myscript.sh`位于`/home/mike/.config/sublime-text-2/Packages/User/`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-01-09T08:52:51.353

如果你在 Windows 机器上，你可以试试这个：

1.  安装[腻子](http://the.earth.li/~sgtatham/putty/latest/x86/putty-0.63-installer.exe)。你我们需要`plink`从这个包中。
2.  `PATH`使用 Putty 安装目录更新您的变量。
3.  在 Sublime 中创建构建系统

    ```
    {
     "cmd": ["plink", "-pw", "<password>", "<userid>@<remotehost>", "./your-script.sh"]
    } 
    ```

我用它来遥控`make`，效果很好。

**请注意**，您的密码在这里是纯文本。我知道这不好;]。这只是一个例子。要修复它，可以使用基于密钥的登录。谷歌*PuttyGen*和自动*登录*。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-11T09:12:57.073

您是否尝试过查看[Sublime SFTP](http://wbond.net/sublime_packages/sftp)插件？*

# jsf - TabView 中的 ActiveIndex 未更新

> ID：10546741
> 
> 赞同：0
> 
> 时间：2012-05-11T06:50:31.680
> 
> 标签：jsf, datatable, primefaces, selection, tabview

我有以下问题。

有一个带有 3 个选项卡的 TabView。在每个选项卡中，我有两个数据表。如果我在第一个表中选择一行，关联的数据将被加载到第二个表中。例如（伪代码）：

```
<form>
<tabview>
    <tab>
        <datatable>
           (data in table A)
        <datatable/>
        <datatable>
           (data that is dynamically loaded if one row in table A is selected)
        <datatable/>
   <tab/>
        <datatable>
           ........
        <datatable/>
        <datatable>
           ........
        <datatable/>
  <tab/>
  <tab>
        <datatable>
           ........
        <datatable/>
        <datatable>
           ........
        <datatable/>
  <tab/>
 <tabview/>
<form/> 
```

如果我在第一个表（表 A）中选择项目，则关联的数据将加载到第二个表中（如上例所示）。但在我可以切换到另一个表之前，我必须明确取消选择第一个表中的选定行，以便更新 activeIndex 并且我在支持 bean 中的取消选择事件将被触发，这将清除第二个表中的关联数据。如果我不执行此取消选择，我的 tabview 中的 activeIndex 将不会更新，并且我会收到此错误消息。

**

```
INFO: javax.el.PropertyNotFoundException: /auslegerStativEdit.xhtml @160,66 value="#{dataRowDuesKombi.auslegertyp}": Target Unreachable, identifier 'dataRowDuesKombi' resolved to null
javax.el.PropertyNotFoundException: /auslegerStativEdit.xhtml @160,66 value="#{dataRowDuesKombi.auslegertyp}": Target Unreachable, identifier 'dataRowDuesKombi' resolved to null
    at com.sun.faces.facelets.el.TagValueExpression.getType(TagValueExpression.java:100)
    at org.primefaces.renderkit.InputRenderer.getConverter(InputRenderer.java:162)
    at org.primefaces.renderkit.InputRenderer.getConvertedValue(InputRenderer.java:175)
    at javax.faces.component.UIInput.getConvertedValue(UIInput.java:1030)
    at javax.faces.component.UIInput.validate(UIInput.java:960)
    at javax.faces.component.UIInput.executeValidate(UIInput.java:1233)
    at javax.faces.component.UIInput.processValidators(UIInput.java:698)
    at javax.faces.component.UIComponentBase.processValidators(UIComponentBase.java:1214)
    at javax.faces.component.UIData.iterate(UIData.java:1999)
    at javax.faces.component.UIData.processValidators(UIData.java:1204)
    at javax.faces.component.UIComponentBase.processValidators(UIComponentBase.java:1214)
    at javax.faces.component.UIComponentBase.processValidators(UIComponentBase.java:1214)
    at org.primefaces.component.tabview.TabView.processValidators(TabView.java:322)
    at com.sun.faces.context.PartialViewContextImpl$PhaseAwareVisitCallback.visit(PartialViewContextImpl.java:508)
    at com.sun.faces.component.visit.PartialVisitContext.invokeVisitCallback(PartialVisitContext.java:183)
    at org.primefaces.component.tabview.TabView.visitTree(TabView.java:391)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
    at javax.faces.component.UIForm.visitTree(UIForm.java:362)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
    at com.sun.faces.context.PartialViewContextImpl.processComponents(PartialViewContextImpl.java:376)
    at com.sun.faces.context.PartialViewContextImpl.processPartial(PartialViewContextImpl.java:252)
    at javax.faces.context.PartialViewContextWrapper.processPartial(PartialViewContextWrapper.java:183)
    at javax.faces.component.UIViewRoot.processValidators(UIViewRoot.java:1170)
    at com.sun.faces.lifecycle.ProcessValidationsPhase.execute(ProcessValidationsPhase.java:76)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at at.beko.rainstar2.ui.filter.CustomCharacterEncodingFilter.doFilter(CustomCharacterEncodingFilter.java:25)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:311)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:116)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.preauth.AbstractPreAuthenticatedProcessingFilter.doFilter(AbstractPreAuthenticatedProcessingFilter.java:88)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:173)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:928)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:539)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:298)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:619)
11.05.2012 08:29:38 com.sun.faces.context.flash.ELFlash setCookie
WARNUNG: JSF1095: The response was already committed by the time we tried to set the outgoing cookie for the flash.  Any values stored to the flash will not be available on the next request. 
```

**

这是一个示例代码

xhtml

```
 <h:form id="form" prependId="false">
        <p:tabView id="tabView"
            activeIndex="#{auslegerStativEditBean.activeTabIndex}">
            <p:ajax event="tabChange"
                listener="#{auslegerStativEditBean.onTabChange}" immediate="true" />

            <p:tab title="#{msg.menu_auslegerstativ_duesen}" id="one">
                <p:outputPanel>
                    <p:dataTable var="dataRowDues"
                        selection="#{auslegerStativEditBean.auslduesSelection}"
                        first="#{auslegerStativEditBean.firstRowIndexDues}"
                        value="#{auslegerStativEditBean.auslduesList}" editable="true"
                        id="dues" paginator="true"
                        rows="#{auslegerStativEditBean.rowsPerPageDues}"
                        paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                        rowsPerPageTemplate="15,25,35"
                        rowKey="#{dataRowDues.auslegertyp}" selectionMode="single"
                        widgetVar="dues">
                        <p:column
                            headerText="#{msg.table_auslegerstativ_dues_auslegertyp}">
                            <p:cellEditor>
                                <f:facet name="output">
                                    <h:outputText value="#{dataRowDues.auslegertyp}" />
                                </f:facet>
                                <f:facet name="input">
                                    <p:inputText required="true"
                                        value="#{dataRowDues.auslegertyp}" />
                                </f:facet>
                            </p:cellEditor>
                        </p:column>
                        <p:column
                            headerText="#{msg.table_auslegerstativ_dues_auslegerbreite}">
                            <p:cellEditor>
                                <f:facet name="output">
                                    <h:outputText value="#{dataRowDues.auslegerbreite}" />
                                </f:facet>
                                <f:facet name="input">
                                    <p:inputText required="true"
                                        value="#{dataRowDues.auslegerbreite}" />
                                </f:facet>
                            </p:cellEditor>
                        </p:column>
                        <p:column
                            headerText="#{msg.table_auslegerstativ_dues_streifenbreite}">
                            <p:cellEditor>
                                <f:facet name="output">
                                    <h:outputText value="#{dataRowDues.streifenbreite}" />
                                </f:facet>
                                <f:facet name="input">
                                    <p:inputText required="true"
                                        value="#{dataRowDues.streifenbreite}" />
                                </f:facet>
                            </p:cellEditor>
                        </p:column>
                        <p:column
                            headerText="#{msg.table_auslegerstativ_dues_auslegergewicht}">
                            <p:cellEditor>
                                <f:facet name="output">
                                    <h:outputText value="#{dataRowDues.auslegergewicht}" />
                                </f:facet>
                                <f:facet name="input">
                                    <p:inputText required="true"
                                        value="#{dataRowDues.auslegergewicht}" />
                                </f:facet>
                            </p:cellEditor>
                        </p:column>
                        <p:column headerText="#{msg.table_auslegerstativ_dues_mindruck}">
                            <p:cellEditor>
                                <f:facet name="output">
                                    <h:outputText value="#{dataRowDues.mindruck}" />
                                </f:facet>
                                <f:facet name="input">
                                    <p:inputText required="true" value="#{dataRowDues.mindruck}" />
                                </f:facet>
                            </p:cellEditor>
                        </p:column>
                        <p:column
                            headerText="#{msg.table_auslegerstativ_dues_niederschlagsindex}">
                            <p:cellEditor>
                                <f:facet name="output">
                                    <h:outputText value="#{dataRowDues.niederschlagsindex}" />
                                </f:facet>
                                <f:facet name="input">
                                    <p:inputText required="true"
                                        value="#{dataRowDues.niederschlagsindex}" />
                                </f:facet>
                            </p:cellEditor>
                        </p:column>
                        <p:column headerText="#{msg.table_auslegerstativ_dues_druck1}">
                            <p:cellEditor>
                                <f:facet name="output">
                                    <h:outputText value="#{dataRowDues.druck1}" />
                                </f:facet>
                                <f:facet name="input">
                                    <p:inputText required="true" value="#{dataRowDues.druck1}" />
                                </f:facet>
                            </p:cellEditor>
                        </p:column>
                        <p:column headerText="#{msg.table_auslegerstativ_dues_druck2}">
                            <p:cellEditor>
                                <f:facet name="output">
                                    <h:outputText value="#{dataRowDues.druck2}" />
                                </f:facet>
                                <f:facet name="input">
                                    <p:inputText required="true" value="#{dataRowDues.druck2}" />
                                </f:facet>
                            </p:cellEditor>
                        </p:column>
                        <p:column headerText="#{msg.table_auslegerstativ_dues_druck3}">
                            <p:cellEditor>
                                <f:facet name="output">
                                    <h:outputText value="#{dataRowDues.druck3}" />
                                </f:facet>
                                <f:facet name="input">
                                    <p:inputText required="true" value="#{dataRowDues.druck3}" />
                                </f:facet>
                            </p:cellEditor>
                        </p:column>
                        <p:column headerText="#{msg.column_head_edit}">
                            <p:rowEditor />
                            <p:commandButton icon="ui-icon-close"
                                styleClass="rainstar-button-small-edit"
                                action="#{auslegerStativEditBean.btn_deleteEntryClick0()}"
                                update=":form">
                                <f:setPropertyActionListener
                                    target="#{auslegerStativEditBean.selectedAusldues}"
                                    value="#{dataRowDues}" />
                            </p:commandButton>
                        </p:column>
                        <p:ajax event="rowEdit"
                            listener="#{auslegerStativEditBean.btn_editEntryClick0}"
                            update=":form" />
                        <p:ajax event="rowSelect"
                            listener="#{auslegerStativEditBean.selectionChangeAusldues}"
                            update=":form" />
                        <p:ajax event="rowUnselect"
                            listener="#{auslegerStativEditBean.deselectionChangeAusldues()}"
                            update=":form" />
                    </p:dataTable>

                    <p:dataTable var="dataRowDuesKombi"
                        binding="#{auslegerStativEditBean.auslduesKombiTable}"
                        value="#{auslegerStativEditBean.auslduesKombiList}"
                        editable="true" id="duesK" paginator="true" rows="15"
                        paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                        rowsPerPageTemplate="15,25,35">
                        <p:column
                            headerText="#{msg.table_auslegerstativ_dues_kombi_auslegertyp}">
                            <p:cellEditor>
                                <f:facet name="output">
                                    <h:outputText value="#{dataRowDuesKombi.auslegertyp}" />
                                </f:facet>
                                <f:facet name="input">
                                    <p:inputText required="true"
                                        value="#{dataRowDuesKombi.auslegertyp}" />
                                </f:facet>
                            </p:cellEditor>
                        </p:column>
                        <p:column
                            headerText="#{msg.table_auslegerstativ_dues_kombi_duesenkomb}">
                            <p:cellEditor>
                                <f:facet name="output">
                                    <h:outputText value="#{dataRowDuesKombi.duesenkomb}" />
                                </f:facet>
                                <f:facet name="input">
                                    <p:inputText required="true"
                                        value="#{dataRowDuesKombi.duesenkomb}" />
                                </f:facet>
                            </p:cellEditor>
                        </p:column>
                        <p:column
                            headerText="#{msg.table_auslegerstativ_dues_kombi_vollkreis_Anz}">
                            <p:cellEditor>
                                <f:facet name="output">
                                    <h:outputText value="#{dataRowDuesKombi.vollkreis_Anz}" />
                                </f:facet>
                                <f:facet name="input">
                                    <p:inputText required="true"
                                        value="#{dataRowDuesKombi.vollkreis_Anz}" />
                                </f:facet>
                            </p:cellEditor>
                        </p:column>
                        <p:column
                            headerText="#{msg.table_auslegerstativ_dues_kombi_vollkreis_Groesse}">
                            <p:cellEditor>
                                <f:facet name="output">
                                    <h:outputText value="#{dataRowDuesKombi.vollkreis_Groesse}" />
                                </f:facet>
                                <f:facet name="input">
                                    <p:inputText required="true"
                                        value="#{dataRowDuesKombi.vollkreis_Groesse}" />
                                </f:facet>
                            </p:cellEditor>
                        </p:column>
                        <p:column
                            headerText="#{msg.table_auslegerstativ_dues_kombi_halbkreis_Anz}">
                            <p:cellEditor>
                                <f:facet name="output">
                                    <h:outputText value="#{dataRowDuesKombi.halbkreis_Anz}" />
                                </f:facet>
                                <f:facet name="input">
                                    <p:inputText required="true"
                                        value="#{dataRowDuesKombi.halbkreis_Anz}" />
                                </f:facet>
                            </p:cellEditor>
                        </p:column>
                        <p:column
                            headerText="#{msg.table_auslegerstativ_dues_kombi_halbkreis_Groesse}">
                            <p:cellEditor>
                                <f:facet name="output">
                                    <h:outputText value="#{dataRowDuesKombi.halbkreis_Groesse}" />
                                </f:facet>
                                <f:facet name="input">
                                    <p:inputText required="true"
                                        value="#{dataRowDuesKombi.halbkreis_Groesse}" />
                                </f:facet>
                            </p:cellEditor>
                        </p:column>
                        <p:column
                            headerText="#{msg.table_auslegerstativ_dues_kombi_ges_Alpha}">
                            <p:cellEditor>
                                <f:facet name="output">
                                    <h:outputText value="#{dataRowDuesKombi.ges_Alpha}" />
                                </f:facet>
                                <f:facet name="input">
                                    <p:inputText required="true"
                                        value="#{dataRowDuesKombi.ges_Alpha}" />
                                </f:facet>
                            </p:cellEditor>
                        </p:column>
                        <p:column
                            headerText="#{msg.table_auslegerstativ_dues_kombi_equival_dm}">
                            <p:cellEditor>
                                <f:facet name="output">
                                    <h:outputText value="#{dataRowDuesKombi.equival_dm}" />
                                </f:facet>
                                <f:facet name="input">
                                    <p:inputText required="true"
                                        value="#{dataRowDuesKombi.equival_dm}" />
                                </f:facet>
                            </p:cellEditor>
                        </p:column>
                        <p:column
                            headerText="#{msg.table_auslegerstativ_dues_kombi_intensitaets_Index}">
                            <p:cellEditor>
                                <f:facet name="output">
                                    <h:outputText value="#{dataRowDuesKombi.intensitaets_Index}" />
                                </f:facet>
                                <f:facet name="input">
                                    <p:inputText required="true"
                                        value="#{dataRowDuesKombi.intensitaets_Index}" />
                                </f:facet>
                            </p:cellEditor>
                        </p:column>
                        <p:column headerText="#{msg.column_head_edit}">
                            <p:rowEditor />
                            <p:commandButton icon="ui-icon-close"
                                styleClass="rainstar-button-small-edit"
                                action="#{auslegerStativEditBean.btn_deleteEntryClick1()}"
                                update=":form">
                                <f:setPropertyActionListener
                                    target="#{auslegerStativEditBean.selectedAuslduesKombi}"
                                    value="#{dataRowDuesKombi}" />
                            </p:commandButton>
                        </p:column>
                        <p:ajax event="rowEdit"
                            listener="#{auslegerStativEditBean.btn_editEntryClick1}"
                            update=":form" />
                    </p:dataTable>
                </p:outputPanel>
            </p:tab>

            .
            // THE SAME FOR THE NEXT TWO TABS
            .
            .
            .
        </p:tabView>

        <div class="button-footer">
            <p:commandButton value="#{msg.button_new_entry}" icon="ui-icon-plus"
                styleClass="button-header"
                action="#{auslegerStativEditBean.btn_addNewEntryClick()}"
                update=":form" />
        </div>
    </h:form> 
```

豆

```
@Named("auslegerStativEditBean")

@SessionScoped public class AuslegerStativEditController {

@Inject
private AuslduesService auslduesService;

@Getter
@Setter
private List<Ausldues> auslduesList;
@Getter
@Setter
private List<AuslduesKombi> auslduesKombiList;

@Getter
@Setter
private Ausldues selectedAusldues;
@Getter
@Setter
private AuslduesKombi selectedAuslduesKombi;

public AuslegerStativEditController() {
    selectedAusldues = new Ausldues();
    selectedAuslduesKombi = new AuslduesKombi();
}

public final void onTabChange(final TabChangeEvent event) {
    TabView tv = (TabView) event.getComponent();
    activeTabIndex = tv.getActiveIndex();
}

@PostConstruct
public void init() {
    auslduesList = auslduesService.findAll();
    ausleg2List = ausleg2Service.findAll();
    auslregnList = auslregnService.findAll();
    duesend2List = duesend2Service.findAll();
}

public void selectionChange(SelectEvent event) {
    switch (activeTabIndex) {
    case 0: {
        Ausldues a = (Ausldues) event.getObject();
        auslduesKombiList = auslduesKombiService.findByAusldues(a);
        break;
    }
    case 1: {
        Ausleg2 a = (Ausleg2) event.getObject();
        ausleg2KombiList = ausleg2KombiService.findByAusleg2(a);
        break;
    }
    case 2: {
        Auslregn a = (Auslregn) event.getObject();
        auslregnKombiList = auslregnKombiService.findByAuslregn(a);
        break;
    }
    }
}

public void deselectionChange(UnselectEvent event) {
    switch (activeTabIndex) {
    case 0: {
        auslduesKombiList = null;
        break;
    }
    case 1: {
        ausleg2KombiList = null;
        break;
    }
    case 2: {
        auslregnKombiList = null;
        break;
    }
    }
}

} 
```

当然，我遗漏了一些不相关的代码部分。

# python - Python 天才如何迭代 Python 元组中的单个值？

> ID：10546745
> 
> 赞同：0
> 
> 时间：2012-05-11T06:50:44.143
> 
> 标签：python, tuples, loops

我有一个名为“score”的字典，其中的键是元组。每个元组的形式为 (x, y, tag)。

一些可能的分数初始化是：

```
score[(0, 1, 'N')] = 1.0
score[(0, 1, 'V')] = 1.5
score[(0, 1, 'NP')] = 1.2
score[(1, 2, 'N')] = 0.2
score[(1, 2, 'PP')] = 0.1
score[(1, 2, 'V')] = 0.1 
```

我希望能够保持 x 和 y 不变（例如 0、1），然后迭代标签的给定值（例如 N、V、NP）。

那里有任何 Python 天才知道如何做到这一点吗？我正在为此寻找多种选择。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-11T06:59:00.570

```
[tag for x,y,tag in score if x==0 and y==1] 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-11T06:54:53.853

列表理解怎么样：

```
[ x[2] for x in score.keys() if x[0:2] == (0,1)] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T06:51:59.853

您必须遍历所有元素并检查它们的键是否与您要查找的内容匹配。但是，您可以通过使用过滤迭代器很好地做到这一点：

```
elems = (item for item in score.iteritems() if item[0][:2] == (0, 1)) 
```

您还可以使用只为您提供标签值和元素而不是整个项目元组的迭代器：

```
elems = ((item[0][2], item[1]) for item in score.iteritems() if item[0][:2] == (0, 1)) 
```

如果你真的只需要标签值而不是相应的元素，你可以更容易地做到：

```
tags = [k[2] for k in score if k[:2] == (0, 1)] 
```

演示：

```
>>> score
{(0, 1, 'NP'): 1.2,
 (0, 1, 'V'): 1.5,
 (1, 2, 'N'): 0.2,
 (1, 2, 'PP'): 0.1,
 (1, 2, 'V'): 0.1}

>>> list(item for item in score.iteritems() if item[0][:2] == (0, 1))
[((0, 1, 'NP'), 1.2), ((0, 1, 'V'), 1.5)]

>>> list(((item[0][2], item[1]) for item in score.iteritems() if item[0][:2] == (0, 1)))
[('NP', 1.2), ('V', 1.5)]

>>> [k[2] for k in score if k[:2] == (0, 1)]
['NP', 'V'] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-11T07:11:19.393

我的智商超过 200，所以我希望这很重要：

```
score = {}
score[(0, 1, 'N')] = 1.0
score[(0, 1, 'V')] = 1.5
score[(0, 1, 'NP')] = 1.2
score[(1, 2, 'N')] = 0.2
score[(1, 2, 'PP')] = 0.1
score[(1, 2, 'V')] = 0.1

from itertools import groupby

def group_key(dict_key):
    return dict_key[:2]

sorted_keys = sorted(score)
for group_key, group_of_dict_keys in groupby(sorted_keys, key=group_key):
    print group_key
    print [(dict_key, score[dict_key]) for dict_key in group_of_dict_keys]

"""
(0, 1)
[((0, 1, 'N'), 1.0), ((0, 1, 'NP'), 1.2), ((0, 1, 'V'), 1.5)]
(1, 2)
[((1, 2, 'N'), 0.2), ((1, 2, 'PP'), 0.1), ((1, 2, 'V'), 0.1)]
""" 
```

当然，如果您只想要标签本身，请更改循环：

```
for group_key, group_of_dict_keys in groupby(sorted_keys, key=group_key):
    print group_key
    tags = [tag for x, y, tag in group_of_dict_keys]
    print tags
"""
(0, 1)
['N', 'NP', 'V']
(1, 2)
['N', 'PP', 'V']
""" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T07:17:41.650

如果您只想要标签，那么 defaultdict 将是最简单的选择。

```
score = {}
score[(0, 1, 'N')] = 1.0
score[(0, 1, 'V')] = 1.5
score[(0, 1, 'NP')] = 1.2
score[(1, 2, 'N')] = 0.2
score[(1, 2, 'PP')] = 0.1
score[(1, 2, 'V')] = 0.1

from collections import defaultdict

dict_ = defaultdict(list)

for x,y,tag in score:
    dict_[x,y].append(tag)

#now get a result for any x,y we like:
print dict_[0,1]
"""['NP', 'N', 'V']""" 
```

# google-maps - 在 JSF 应用程序中在没有 Internet 连接的情况下访问 GoogleMaps

> ID：10546746
> 
> 赞同：0
> 
> 时间：2012-05-11T06:50:45.423
> 
> 标签：google-maps, jsf, google-maps-api-3, richfaces

到目前为止，我一直在基于 JSF 和 RF3.3 的应用程序中使用 GoogleMaps API 在应用程序中显示谷歌地图。

为此，我使用 gmaps4jsf。

但是，与每个地图请求的情况一样，请求 googlemap api 来验证 api 密钥。当我的应用程序位于公共域时，这没有问题。

现在我的应用程序在我公司的内部域上，与外部世界没有互联网连接。因此我将无法为应用程序使用 gmaps4jsf 或 googlemaps api。

可能的解决方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T08:17:07.347

我不知道解决方法，但我知道另一种方法：要求 googlemaps api 使用另一个图块提供程序。例如，您可以使用 OpenStreetMap 瓦片而不是 Google 地图瓦片。
[样品在这里](http://wiki.openstreetmap.org/wiki/Google_Maps_Example#Example_Using_Google_Maps_API_V3)

当您保留 googlemaps api 时，这不应该是太多的工作。

您可以在内部服务器上自由地存储来自 openstreetmap 的地图图块。

PS：下次试试[Open Layers](http://www.openlayers.org)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T07:53:19.340

您不能在 Intranet 上使用免费 API，因此您需要 Premier/Business 许可证。这得到了 Google 对此类问题的建议的支持。

但是：**即使您获得在专用网络上使用 API 的许可，**地图图块也来自互联网（除非您有空间*和*权限自行存储它们），因此您仍然可能需要互联网连接。

# jquery - html中的固定按钮

> ID：10546747
> 
> 赞同：0
> 
> 时间：2012-05-11T06:50:46.383
> 
> 标签：jquery, html, css

我希望将按钮固定在其位置，但事实是我不知道按钮的位置，我的意思是我创建了一个放置按钮的页面（即**我没有固定其高度或宽度**），什么我希望在页面中创建该按钮的任何位置，在滚动时其位置保持固定。

```
<table width='100%' border='1'>
   <tr><td><input type='submit' value='LogOut'></td></tr>
</table> 
```

现在我不知道这个**提交**按钮将**显示**在哪里，但我希望它应该在创建它的地方。

现在我正在使用此代码将三个按钮设置为固定，但它们的左侧属性是**自动**使它们相互重叠。

```
$('#headerHome,#headerAccount,#btnSignOut').button().each(function(){
    alert(''+$(this).css('left'));
  //$(this).css({
  //  'position' : 'fixed',
  //  'top': "'"+ $(this).css('top') +"'",
  //  'left': "'"+ ($(this).css('left')-100) +"'",
  //  'z-index' : '100'
  //});
}); 
```

请说明一下。在此先感谢。

**PS。我正在使用 JQuery**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T06:58:05.157

just add the css below... no need to go for jquery to place the div on a fixed position on a page.

```
table input[type=submit]
{
position:fixed;
top:150px;
} 
```

hope this helps

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T07:03:49.477

尝试这个：

```
$(document).ready(function(){
    $('#yourButtonId').css({
        position: 'fixed',
        top: $('#yourButtonId').position().top,
        left: $('#yourButtonId').position().left
    });
}); 
```

# xamarin.ios - 检查应用程序是否由 TestFlight 发布

> ID：10546750
> 
> 赞同：2
> 
> 时间：2012-05-11T06:50:52.670
> 
> 标签：xamarin.ios, testflight

如果应用程序是由 TestFlight 启动或发布的，是否可以签入代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T17:42:58.943

你不能在编译时这样做吗？

```
#if TESTFLIGHT
public const bool IsTestFlightBuild = true;
#else
public const bool IsTestFlightBuild = false;
#endif 
```

`TestFlight|iPhone`然后在您的项目设置中，使用set创建构建配置`TESTFLIGHT`。仅使用此构建配置发布到 TestFlight。

# xml - XSLT：相同命名空间的不同值

> ID：10546754
> 
> 赞同：-1
> 
> 时间：2012-05-11T06:51:23.270
> 
> 标签：xml, xslt

我的输入 XML 如下：

```
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
    <SOAP-ENV:Header>
        <ns0:PartyInfo xmlns:ns0="http://www.google.com/"> 
             <name xmlns="">John</name> 
        </ns0:PartyInfo> 
    </SOAP-ENV:Header>

    <SOAP-ENV:Body>
        <ns0:OperationRequest xmlns:ns0="http://www.yahoo.com"> 
            <name xmlns="">Mary</name> 
        </ns0:OperationRequest>
    </SOAP-ENV:Body>

</SOAP-ENV:Envelope> 
```

1）第一个问题：在我的 XSLT 中，我只能为我的“ns0”命名空间声明值，所以我只能访问其中一个节点。如何访问它们（最好在同一个 xslt 文件中）？

2）假设我声明

```
xmlns:ns0="http://www.google.com" 
```

然后输出带有额外字符的“John”字符串：

![在此处输入图像描述](../Images/f8c369763925391f7a9adda4324af8cc.png)

我可以使用 normalize-space 来解决这个问题，但它似乎不对。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T08:43:24.190

您在 XSLT 代码中使用的名称空间前缀不必与源文档中使用的前缀相同。只有 URI 需要匹配。因此，在您的 XSLT 中，只需将不同的前缀绑定到两个名称空间 URI。

# video - 如何创建具有图像和不同时间间隔的视频？

> ID：10546755
> 
> 赞同：0
> 
> 时间：2012-05-11T06:51:23.997
> 
> 标签：video, ffmpeg

我正在努力使用这个命令：

**ffmpeg -loop 1 -r 5 -i img_0.jpg -c:v libx264 -preset slow -tune stillimage -crf 24 -t 20 $frame_target**

它使用一张图像创建 20 秒的视频。我需要放更多的图像，所以我这样做：

**ffmpeg -loop 1 -r 5 -i img_%d.jpg -c:v libx264 -preset slow -tune stillimage -crf 24 -t 20 $frame_target**

但是这个东西会创建 20 秒的视频，但图像会多次变化。基本上我想划分时间间隔，每个图像都应该只显示一个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T06:27:09.893

我找到了答案：

```
ffmpeg -loop 1 -f image2 -r 0.5 -b 1800 -i img_%d.jpg -c:v libx264 -preset slow -tune stillimage -r 5 -t 22 -y output.mp4 
```

这里`-r 0.5`每两秒更改一次图像，`-t`并使视频长 22 秒。

谢谢普里特

# android - android线程以未捕获的异常退出（组= 0x40015560）

> ID：10546760
> 
> 赞同：0
> 
> 时间：2012-05-11T06:51:45.150
> 
> 标签：android, sqlite

强文本我正在使用带有 android sdk r18 的 eclipse 来执行一些数据库操作：

我有一个名为“advance_search”的视图，并存储了一些有关请求调用的数据。

现在我想使用一个简单的 rawquery 函数从数据库中轮询一些记录。但我失败了！不知道为什么！！

谁能给我一些建议？

日志：

```
05-11 06:37:11.057: E/Status(1306): Database Initialize OK!
05-11 06:37:11.098: E/Status(1306): Starting Database Check procedure
05-11 06:37:11.098: E/Status(1306): Database already exist!
05-11 06:37:11.117: E/Status(1306): Open Database OK
05-11 06:37:11.117: E/LogSQLProcess(1306): String id is :6326
05-11 06:37:11.138: E/LogSQLProcess(1306): SQLiteDatabase in READ MODE!
05-11 06:37:11.148: E/LogSQLProcess(1306): DB Query Logon_info View complete!
05-11 06:37:11.148: E/LogSQLProcess(1306): Cursor moved to Position 0!
05-11 06:37:11.148: E/LogSQLProcess(1306): USER Name is John
05-11 06:37:11.168: D/AndroidRuntime(1306): Shutting down VM
05-11 06:37:11.168: W/dalvikvm(1306): threadid=1: thread exiting with uncaught exception (group=0x40015560)
05-11 06:37:11.178: E/AndroidRuntime(1306): FATAL EXCEPTION: main
05-11 06:37:11.178: E/AndroidRuntime(1306): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.TicketDroid.PKG/com.TicketDroid.PKG.User_Search}: java.lang.ArrayIndexOutOfBoundsException
05-11 06:37:11.178: E/AndroidRuntime(1306):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
05-11 06:37:11.178: E/AndroidRuntime(1306):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
05-11 06:37:11.178: E/AndroidRuntime(1306):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
05-11 06:37:11.178: E/AndroidRuntime(1306):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
05-11 06:37:11.178: E/AndroidRuntime(1306):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-11 06:37:11.178: E/AndroidRuntime(1306):     at android.os.Looper.loop(Looper.java:123)
05-11 06:37:11.178: E/AndroidRuntime(1306):     at android.app.ActivityThread.main(ActivityThread.java:3683)
05-11 06:37:11.178: E/AndroidRuntime(1306):     at java.lang.reflect.Method.invokeNative(Native Method)
05-11 06:37:11.178: E/AndroidRuntime(1306):     at java.lang.reflect.Method.invoke(Method.java:507)
05-11 06:37:11.178: E/AndroidRuntime(1306):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
05-11 06:37:11.178: E/AndroidRuntime(1306):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
05-11 06:37:11.178: E/AndroidRuntime(1306):     at dalvik.system.NativeStart.main(Native Method)
05-11 06:37:11.178: E/AndroidRuntime(1306): Caused by: java.lang.ArrayIndexOutOfBoundsException
05-11 06:37:11.178: E/AndroidRuntime(1306):     at com.TicketDroid.PKG.User_Search.onCreate(User_Search.java:105)
05-11 06:37:11.178: E/AndroidRuntime(1306):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-11 06:37:11.178: E/AndroidRuntime(1306):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
05-11 06:37:11.178: E/AndroidRuntime(1306):     ... 11 more 
```

com.TicketDroid.PKG/com.TicketDroid.PKG.User_Search 是我的 JAVA 文件

数据库操作代码：

```
 public Cursor UserSearch(String id) {
    // TODO Auto-generated method stub
    Log.e("LogSQLProcess", "String id is :"+id);
    SQLiteDatabase dbs = this.getReadableDatabase();
    Log.e("LogSQLProcess", "SQLiteDatabase in READ MODE!");
    String selectionArgs[] = new String[] {id};
    Cursor n=dbs.rawQuery("SELECT * FROM logon_info WHERE _id= ?", selectionArgs);
    Log.e("LogSQLProcess", "DB Query Logon_info View complete!");
    n.moveToPosition(0);
    Log.e("LogSQLProcess", "Cursor moved to Position 0!");
    String name=n.getString(0);
    Log.e("LogSQLProcess", "USER Name is "+name);
    String Args[] = new String[] {name};
    return dbs.rawQuery("select * from advance_search where REQUEST_PERSON= ?", Args); 
```

我已经在 sqlite3 NAD 中测试了 sql 语句，肯定可以正常工作！

* * *

很抱歉造成不便！

这是完整的代码：

DBInitialize.java

```
 public class DB_Initialize extends SQLiteOpenHelper{

//The Android's default system path of your application database.
private static String DB_PATH = "/data/data/com.TicketDroid.PKG/databases/";

private static String DB_NAME = "TicketDroid";
private static String DB = "TicketDroid";
private SQLiteDatabase myDataBase;  
private final Context myContext;    
public static String LOGON_TABLE = "LOGON";
public static String LOGON_VIEW = "logon_info";
public static String TICKET_VIEW = "advance_search";

public DB_Initialize(Context context) {

    super(context, DB_NAME, null, 1);
    this.myContext = context;
    Log.e("Status", "Database Initialize OK!");
}   

public void createDataBase() throws IOException{

    boolean dbExist = checkDataBase();

    if(dbExist){
        //do nothing - database already exist
    }else{

        this.getReadableDatabase();
        Log.e("Status", "Create Database in REAED MODE");

        try {

            copyDataBase();

        } catch (IOException e) {

            throw new Error("Error copying database");

        }
    }

}

private boolean checkDataBase(){

    SQLiteDatabase checkDB = null;

    try{
        String Path = DB_PATH + DB;
        checkDB = SQLiteDatabase.openDatabase(Path, null, SQLiteDatabase.OPEN_READONLY);
        Log.e("Status", "Starting Database Check procedure");

    }catch(SQLiteException e){
        Log.e("Status", "Database doesn't exist!");
        //database does't exist yet.

    }

    if(checkDB != null){

        checkDB.close();
        Log.e("Status", "Database already exist!");

    }

    return checkDB != null ? true : false;
}

private void copyDataBase() throws IOException{
    Log.e(" Status :","Prepare to copy database!" );

    InputStream myInput = myContext.getAssets().open(DB_NAME); 
    String outFileName = DB_PATH + DB_NAME;
    OutputStream myOutput = new FileOutputStream(outFileName);
    byte[] buffer = new byte[1024];
    int length;
    while ((length = myInput.read(buffer))>0){
        myOutput.write(buffer, 0, length);
    } 
    Log.e("Status", "Copy Database file complete");
    //Close the streams
    Log.e(" Status :","Prepare to Close file stream!" );
    myOutput.flush();
    myOutput.close();
    myInput.close();
    Log.e("Status", "Closed file stream!");

}

public void openDataBase() throws SQLException{

    //Open the database
    String myPath = DB_PATH + DB_NAME;
    myDataBase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);
    Log.e("Status", "Open Database OK");

}

@Override
public synchronized void close() {

        if(myDataBase != null)
            myDataBase.close();
        Log.e("Status", "Database closed");
        super.close();

}

@Override
public void onCreate(SQLiteDatabase db) {

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

}

public Cursor UserSearch(String id) {
    // TODO Auto-generated method stub
    Log.e("LogSQLProcess", "String id is :"+id);
    SQLiteDatabase dbs = this.getReadableDatabase();
    Log.e("LogSQLProcess", "SQLiteDatabase in READ MODE!"); 
    String selectionArgs[] = new String[] {id};
    Cursor n=dbs.rawQuery("SELECT * FROM logon_info WHERE _id= ?", selectionArgs);
    Log.e("LogSQLProcess", "DB Query Logon_info View complete!");
    n.moveToPosition(0);
    Log.e("LogSQLProcess", "Cursor moved to Position 0!");
    String name=n.getString(0);
    Log.e("LogSQLProcess", "USER Name is "+name);
    n.close();
    String Args[] = new String[] {name};
    return dbs.rawQuery("select * from advance_search where REQUEST_PERSON= ?", Args); } 
```

用户搜索.java

```
public class User_Search extends Activity implements OnClickListener {

Button srhu_back,srhu_next,srhu_previous;
TextView tv_result;

String Password;
String Type;
String ID;

Integer count=0;
Cursor srh = null;
ArrayList<String> array=new ArrayList<String>(); 
String str[]={};
String strg="";

String[] rset=new String[] {
      "REQUEST_PERSON","USER_EXT",
        "DEPARTMENT_CODE","EMAIL_ADDR",
        "_id","TICKET_Title",
        "PROBLEM_SOFT","CATEGORY",
        "SYMPTONS","CONTACT",
        "STATUS","FINISH_DATE","ACTIONS",
        "ENGINEER1","ENGINEER1_EXT",
        "ENGINEER1","ENGINEER1_EXT",
};

String res = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.user_search);
    srhu_back = (Button) findViewById(R.id.srhu_bBack);
    srhu_next = (Button) findViewById(R.id.srhu_bNext);
    srhu_previous = (Button) findViewById(R.id.srhu_bPrevious);
    tv_result = (TextView) findViewById(R.id.srhu_tvresult);
    srhu_back.setOnClickListener(this);
    srhu_next.setOnClickListener(this);
    srhu_previous.setOnClickListener(this);

    Bundle bundle = getIntent().getExtras();     
      Password=bundle.getString("Password");
      Type=bundle.getString("Type");
      ID=bundle.getString("ID");   

        DB_Initialize srh_ret = new DB_Initialize(User_Search.this);

           try {     
               srh_ret.createDataBase();

            } catch (IOException ioe) {          
            throw new Error("Unable to create database");            
            }
            try {
                srh_ret.openDataBase();
            }catch(SQLException sqle){
                throw sqle;
            }

                try {
                    srh=srh_ret.UserSearch(ID);
                }                   
                 catch (Exception e) {
                    e.printStackTrace();
                     Toast.makeText(User_Search.this, "Cannot Fetch any records!", Toast.LENGTH_LONG).show();
                } finally {             

                    for(srh.moveToFirst(); srh.moveToNext(); srh.isAfterLast()) {
                        // The Cursor is now set to the right position
                        for(int i=0; i<=16; i++) {
                            if (srh.isNull(i)) strg="N/A"; 
                            else strg=srh.getString(i);
                            res = res+rset[i]+ " : "+strg+"\n"; 
                            Log.e("TextString","result is "+res+"\n");
                        }
                        array.add(res);  
                    }

                }
                tv_result.setText(str[count]);  
                count++;
    Toast.makeText(User_Search.this, "Record Searching Successful!", Toast.LENGTH_LONG).show();  } 
```

日志：

```
05-11 09:18:29.807: D/dalvikvm(370): GC_EXTERNAL_ALLOC freed 50K, 53% free 2553K/5379K, external 1625K/2137K, paused 60ms
05-11 09:18:35.807: W/KeyCharacterMap(370): No keyboard for id 0
05-11 09:18:35.807: W/KeyCharacterMap(370): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
05-11 09:18:39.187: E/Status(370): Database Initialize OK!
05-11 09:18:39.237: E/Status(370): Starting Database Check procedure
05-11 09:18:39.247: E/Status(370): Database already exist!
05-11 09:18:39.268: E/Status(370): Open Database OK
05-11 09:18:39.287: E/LogSQLProcess(370): SQLiteDatabase in READ MODE!
05-11 09:18:39.287: E/LogSQLProcess(370): SQLiteQueryBuilder created!
05-11 09:18:39.297: E/LogSQLProcess(370): SQLiteQueryBuilder set Table!
05-11 09:18:39.297: E/LogSQLProcess 0(370): John
05-11 09:18:39.297: E/LogSQLProcess 1(370): john
05-11 09:18:39.306: E/LogSQLProcess 2(370): USER
05-11 09:18:39.306: E/LogSQLProcess 3(370): 6326
05-11 09:18:39.306: V/CursorValues(370): Johnjohn
05-11 09:18:39.306: V/CursorValues After Moved to First(370): Johnjohn
05-11 09:18:39.306: V/Values(370): John/john
05-11 09:18:39.306: V/CursorValues Now(370): Johnjohn
05-11 09:18:39.306: E/Check Logon Process(370): user and password entered correct!
05-11 09:18:39.306: E/Check Logon Process(370): JohnjohnUSER6326
05-11 09:18:39.326: E/Status(370): Database closed
05-11 09:18:39.337: V/USER TYPE SELECT :(370): USER
05-11 09:18:41.927: E/Status(370): Database Initialize OK!
05-11 09:18:41.946: E/Status(370): Starting Database Check procedure
05-11 09:18:41.946: E/Status(370): Database already exist!
05-11 09:18:41.966: E/Status(370): Open Database OK
05-11 09:18:41.966: E/LogSQLProcess(370): String id is :6326
05-11 09:18:41.997: E/LogSQLProcess(370): SQLiteDatabase in READ MODE!
05-11 09:18:41.997: E/LogSQLProcess(370): DB Query Logon_info View complete!
05-11 09:18:41.997: E/LogSQLProcess(370): Cursor moved to Position 0!
05-11 09:18:41.997: E/LogSQLProcess(370): USER Name is John
05-11 09:18:42.018: D/AndroidRuntime(370): Shutting down VM
05-11 09:18:42.018: W/dalvikvm(370): threadid=1: thread exiting with uncaught exception (group=0x40015560)
05-11 09:18:42.027: E/AndroidRuntime(370): FATAL EXCEPTION: main
05-11 09:18:42.027: E/AndroidRuntime(370): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.TicketDroid.PKG/com.TicketDroid.PKG.User_Search}: java.lang.ArrayIndexOutOfBoundsException
05-11 09:18:42.027: E/AndroidRuntime(370):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
05-11 09:18:42.027: E/AndroidRuntime(370):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
05-11 09:18:42.027: E/AndroidRuntime(370):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
05-11 09:18:42.027: E/AndroidRuntime(370):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
05-11 09:18:42.027: E/AndroidRuntime(370):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-11 09:18:42.027: E/AndroidRuntime(370):  at android.os.Looper.loop(Looper.java:123)
05-11 09:18:42.027: E/AndroidRuntime(370):  at android.app.ActivityThread.main(ActivityThread.java:3683)
05-11 09:18:42.027: E/AndroidRuntime(370):  at java.lang.reflect.Method.invokeNative(Native Method)
05-11 09:18:42.027: E/AndroidRuntime(370):  at java.lang.reflect.Method.invoke(Method.java:507)
05-11 09:18:42.027: E/AndroidRuntime(370):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
05-11 09:18:42.027: E/AndroidRuntime(370):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
05-11 09:18:42.027: E/AndroidRuntime(370):  at dalvik.system.NativeStart.main(Native Method)
05-11 09:18:42.027: E/AndroidRuntime(370): Caused by: java.lang.ArrayIndexOutOfBoundsException
05-11 09:18:42.027: E/AndroidRuntime(370):  at com.TicketDroid.PKG.User_Search.onCreate(User_Search.java:122)
05-11 09:18:42.027: E/AndroidRuntime(370):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-11 09:18:42.027: E/AndroidRuntime(370):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
05-11 09:18:42.027: E/AndroidRuntime(370):  ... 11 more
05-11 09:18:46.587: I/Process(370): Sending signal. PID: 370 SIG: 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T07:02:29.170

引起：java.lang.ArrayIndexOutOfBoundsException

在您的 onCreate 方法中。

`n.moveToPosition(0);`在先检查它是否不为空之前...执行此操作

```
if(n.moveToFirst()==true) {
     String name = n.getString(n.getColumnIndex(<column name>));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T15:06:01.457

为什么不调试应用程序，以便在遇到异常时 Eclipse 会中断。然后您可以查看所有变量和堆栈调用，看看您错过了什么。它在你的代码中的某个地方。

# php - Imagemagick：带有标签 37724 的未知字段

> ID：10546761
> 
> 赞同：1
> 
> 时间：2012-05-11T06:51:45.690
> 
> 标签：php, image, image-processing, imagemagick, tiff

要将 TIF 文件转换为 JPG 文件，我使用的是 ImageMagick。

但是在某些文件上，我有以下错误：

遇到带有标记 37724 (0x935c) 的未知字段。`TIFFReadDirectory'@warning/tiff.c/TIFFWarnings/704。

我在 ImageMagick 论坛上阅读了有关此问题的一些主题，但我不知道为什么这些文件可能会出现此错误。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T07:19:37.157

看起来像一个 ImageMagick 错误：

[http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=16390](http://www.imagemagick.org/discourse-server/viewtopic.php?f=3&t=16390)

# c - 为什么 strace 遵循不同的执行流程？

> ID：10546782
> 
> 赞同：0
> 
> 时间：2012-05-11T06:53:06.000
> 
> 标签：c, system-calls, ptrace, strace

我指的是以下[文章](http://www.cgsecurity.org/Articles/SecProg/Art5/index.html)学习符号链接攻击：

```
struct stat st;
FILE * fp;
if (argc != 3) {
 fprintf (stderr, "usage : %s file message\n", argv [0]);
 exit(EXIT_FAILURE);
}

if (stat (argv [1], & st) < 0) {
 fprintf (stderr, "can't find %s\n", argv [1]);
 exit(EXIT_FAILURE);
}

if (st . st_uid != getuid ()) {
 fprintf (stderr, "not the owner of %s \n", argv [1]);
 exit(EXIT_FAILURE);
}

if (! S_ISREG (st . st_mode)) {
 fprintf (stderr, "%s is not a normal file\n", argv[1]);
 exit(EXIT_FAILURE);
}

sleep (25);

if ((fp = fopen (argv [1], "w")) == NULL) {
  fprintf (stderr, "Can't open\n");
  exit(EXIT_FAILURE);
}

fprintf (fp, "%s\n", argv [2]);
fclose (fp);
fprintf (stderr, "Write Ok\n");
exit(EXIT_SUCCESS); 
```

现在，当程序休眠时，我`rm`将 arg[1]（使用另一个终端）作为文件名，然后为同一个文件创建一个符号链接。当我按照文章中所说的那样执行时，我正在写入链接指向的文件。

然后我使用 strace 传递了相同的参数，它给了我“无法打开”，这意味着我无权访问作为 arg[1] 传递的文件。但是当我正常执行时情况并非如此 strace 是如何检测到这个的？任何帮助都是非常有价值的。

我正在使用 ptrace 编写自己的应用程序来检测此类攻击。我尝试使用 inode 编号来检测这一点，但我的应用程序仍在引用我正在传递的文件的 inode 编号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T07:11:48.703

如上所述，二进制文件以 suid 标志 ( `chmod u+s a.out`) 开始。由于`strace`需要监视进程，并且如果它以其他用户身份运行则不能这样做，它会默默地忽略 s-bits。

解决方案：在运行程序的 shell 窗口中，使用无需 strace 即可使用的登录名/用户 ID——假设您只是`chmod u+s a.out`以该用户身份进行操作，那么可以安全地假设您可以使用该帐户登录。

为了完整起见：要更改单个 shell 窗口的用户 ID，只需使用`su - otherlogin`，替换`otherlogin`为登录名。（`su`=“切换用户”）

# c - 解释 DWORD 在串行通信中 DWORD 的使用

> ID：10546784
> 
> 赞同：0
> 
> 时间：2012-05-11T06:53:25.457
> 
> 标签：c, serial-port, readfile

我现在正在使用 C 研究与 win32 的串行通信。从串口读取如下所示。

```
DWORD dwEventMask;
DWORD dwSize;

if(!SetCommMask(hSerial, EV_RXCHAR)){
    //Error handling
    printf("Error Setting Comm Mask \n");
}

if(WaitCommEvent(hSerial, &dwEventMask, NULL))
{
    unsigned char szBuf[1024];
    DWORD dwIncommingReadSize;

    do
    {
        if(ReadFile(hSerial, &szBuf, 1, &dwIncommingReadSize, NULL) != 0) {
            //Handle Error Condition
        }

        if(dwIncommingReadSize > 0)
        {
            dwSize += dwIncommingReadSize;
            sb.sputn(&szBuf, dwIncommingReadSize);
            printf("Reading from port \n");
        }
        else{
        //Handle Error Condition
        }
        printf("Reading data from port \n");
    } while(dwIncommingReadSize > 0);
}
else
{
        //Handle Error Condition
} 
```

他们使用 DWORD dwIncommingReadSize 作为 while 条件 (while(dwIncommingReadSize > 0);.

请解释如何满足这个条件。没有任何修改可以看到。

再次请解释以下部分。

```
if(dwIncommingReadSize > 0)
{
    dwSize += dwIncommingReadSize;
    sb.sputn(&szBuf, dwIncommingReadSize);
    printf("Reading from port \n");
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T06:55:13.690

这一行：

```
if(ReadFile(hSerial, &szBuf, 1, &dwIncommingReadSize, NULL) 
```

将*地址*（`dwIncommingReadSize`无论拼写多么糟糕）传递给函数，以便它可以将其更改为它想要的任何内容。

它类似于：

```
void fn (int *x) { *x = 42; }
:
int xyzzy = 1;
fn (&xyzzy);
// Here, xyzzy is now 42. 
```

* * *

关于你的第二个问题，如果没有看到更多代码，这有点难以判断，但看起来它只是为读入的每个数据块增加一个“总大小”变量（加上`sb.sputn`应该做的任何事情）。

这是典型的单次读取可能无法获得您想要的所有数据的情况 - 您只需存储您获得的数据，然后返回获取更多数据。

# iphone - 如何在iphone中创建一个仅显示两条线的简单图形

> ID：10546787
> 
> 赞同：-3
> 
> 时间：2012-05-11T06:53:47.380
> 
> 标签：iphone, objective-c, xcode

我想创建一个简单的图表，它将获取值并显示如下图所示的图表

![显示颜色线的图表](../Images/4efdd997f64430a6ce3fc10a92b48494.png)

我还使用饼图类创建了其他图表，但是如何使这个简单的图表显示两条这样的线

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-07-17T18:07:00.200

[您可以使用SciChart](http://www.scichart.com)为 iPhone 创建条形图（或柱形图）。

有一个示例显示 Objective-C 和 Swift 代码]在这里生成柱形图：[https ://www.scichart.com/example/ios-column-chart-demo/](https://www.scichart.com/example/ios-column-chart-demo/)

[![在此处输入图像描述](../Images/dff878a21526b744a6efdb6489d4423b.png)](https://i.stack.imgur.com/hwSOO.png)

这里有一个关于如何将系列添加到[iOS/iPhone/iPad 图表](https://www.scichart.com/documentation/ios/v2.x/Tutorial%2003%20-%20Adding%20Series%20to%20a%20Chart.html)的快速教程，以及[github](https://github.com/ABTSoftware/SciChart.iOS.Examples)上教程的源代码。

*披露：我是 SciChart 项目的技术负责人*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T07:00:30.113

一个常用的 Cocoa“原生”图表库是[Core Plot。](http://code.google.com/p/core-plot/). 虽然我还没有亲自使用它，但它似乎[很受欢迎](http://code.google.com/p/core-plot/wiki/AppsUsingCorePlot)并且正在积极开发中。

或者

您可以查看[PowerPlot 库](http://powerplot.nua-schroers.de/)。它是 iOS 上原生图表的强大选择，这里有两个示例条形图：

喜欢的图片

![在此处输入图像描述](../Images/b7370893ae9538db26d886314d7bd613.png) ![在此处输入图像描述](../Images/b4683a5bbf706b24fa8d81cdb3b9a938.png)

使用 PowerPlot，生成这两个图表所需的代码可[在此处（上图）](http://powerplot.nua-schroers.de/examples/fedelect.html)和[此处（下图）](http://powerplot.nua-schroers.de/examples/webtraffic.html)获得。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T06:59:36.313

此线程[中 iOS 应用程序中的条形图](https://stackoverflow.com/questions/5164523/bar-graphs-in-ios-app/5164573#5164573)可能重复。在提供的链接上，您可以使用很多框架。对于绘制简单的图形，有比 CorePlot 更简单的框架。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T07:01:27.027

您可以查看此[Quartz-2d 教程](http://buildmobile.com/creating-a-graph-with-quartz-2d-part-2/#fbid=o0fDk6vTjVC)。

# bash - 如何在bash历史输出中更改行号和历史条目之间的文本字符串格式？

> ID：10546796
> 
> 赞同：2
> 
> 时间：2012-05-11T06:54:38.767
> 
> 标签：bash, history

如何在bash历史输出中更改行号和历史条目之间的文本字符串格式？

如果`history`在 bash 打印中运行，例如：

```
5  history 
```

如何将其更改为此，例如：

```
5....history 
```

或者

```
5_anyString_history 
```

此外，对齐`history`已经通过调整空格数来完成。如何也包含此功能？也就是说，如果 . 用作字符串，如何根据行号中的位数改变点数？另外，我想删除前导空格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T11:24:59.503

```
history | sed 's/^\( *[0-9]*\) */\1../' 
```

当我这样做时`history`，行号后面总是有两个空格。对齐是通过改变数字*前*的空格数来完成的。

这是如何替换*前导*空格（数量不同）的示例：

```
history | sed 's/^ */&\n/; :a; s/ \(.*\n\)/.\1/; ta; s/\n//' 
```

**编辑：**

这个版本的工作方式与上面的第二个类似，但是它将点移动到数字之后，因此没有前导空格，并且可变的点数导致历史条目左对齐。

```
sed 's/^ */&\n/; :a; s/ \(.*\n\)/.\1/; ta; s/\n//;s/\(\.*\)\([^ ]*\) */\2\1/'
1....aaa bbb ccc
22...ddd eee fff
333..ghi jkl mno 
```

这是它的工作原理：

*   在初始空格序列之后添加换行符（分而治之）
*   `:a`- 分支标签
*   用点替换换行符前的一个空格
*   `ta`- 如果进行了替换，则分支到标签`:a`，一旦所有前导空格都被替换，继续通过分支指令
*   删除换行符
*   捕获两个捕获组中的点和非空格（数字）并排除数字后面的空格
*   并交换两组（所以点现在在数字之后）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T08:58:55.790

```
type history 
history is a shell builtin 
```

告诉我们，历史是内置的，因此您需要获取 bash 的源代码并对其进行修改。

# wpf - 使用 MVVM 模式时如何绑定到应用程序设置并能够编写单元测试？

> ID：10546799
> 
> 赞同：1
> 
> 时间：2012-05-11T06:54:51.367
> 
> 标签：wpf, unit-testing, binding, mvvm

我正在尝试开始使用 MVVM 模式并且正在努力解决这个问题。

我有一个输入字段，我在其中输入搜索过滤器的值。我想记住该值，因此通常我会将其保存在应用程序设置中。

输入字段是 2way 绑定到视图中的设置，它可以正常工作并且不会在 ViewModel 中创建任何应用程序依赖项。我认为这对单元测试很重要。

现在我想响应输入字段中的更改并应用过滤器，但绑定是应用程序设置而不是 ViewModel。

我怎么解决这个问题？我可以将一个字段“双重绑定”到设置和 ViewModel 吗？在这种情况下，明智和务实的做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T07:23:40.773

有几种简单的方法可以解决这个问题，具体取决于您的确切设置。

如果您只有一个用户输入的文本框，并且您以交互方式过滤数据，那么您可以在视图*后面的代码中使用[TextChanged事件处理程序。](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.textboxbase.textchanged.aspx)然后，您可以从该事件处理程序调用视图模型公开的命令，该命令可以将搜索文本作为其输入并相应地过滤数据。当然，视图模型也可以访问您的应用程序设置数据对象，但我更喜欢将其作为命令参数的更直接和声明性的方法。

如果您有文本框，然后通过按钮启动搜索/过滤器，那么您可以从按钮绑定到的视图模型中公开一个命令，并且作为命令参数，您可以使用元素绑定将文本传递给命令。

使用这些方法中的任何一种，您在视图模型中的搜索/过滤代码都是非常可测试的。您通常不会对 UI 中的代码进行单元测试，因此您无需担心 TextChanged 处理程序中的代码。我还应该提到，如果您使用交互式搜索，那么[Reactive Extensions](http://msdn.microsoft.com/en-us/data/gg577609)可能对您非常有用，因为它们提供了一种方便的方式来限制对视图模型的调用。

*一些认为自己是绝对纯粹主义者的人会在视图中出现代码时不寒而栗，但如果它是纯粹的 UI/显示相关代码，则可以这样做，然后您可以通过它的界面调用视图模型。

# javascript - 使用 JavaScript JQUERY 或 CSS 制作可扩展的顶栏

> ID：10546802
> 
> 赞同：1
> 
> 时间：2012-05-11T06:55:03.117
> 
> 标签：javascript, jquery, css

可以使用 CSS 和 JQUERY 制作 Fixed Tob Bar 或 Bootom Bar 菜单、下拉菜单。是否可以像在 Android 手机中一样创建可扩展的顶部栏。可扩展意味着如果我向下拖动顶部栏菜单，那么它应该将其区域扩展到页面底部。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T08:32:11.117

当然可以复制Android通知栏效果，你只需要尝试一下。实际上，您可以对悬停做类似的效果。像这样：http: [//jsfiddle.net/3shEE/](http://jsfiddle.net/3shEE/)

html:

```
<div id="expandable">
    <span>Hover over me</span>

    <ul>
        <li>List 1</li>
        <li>List 2</li>
        <li>List 3</li>
        <li>List 4</li>
    </ul>
</div>​ 
```

CSS：

```
#expandable {
    width: 100%; height: 50px;
    background: #ddd;
    overflow: hidden;
    font-family: sans-serif;
    font-size: 17px;
}
#expandable span {
    display: block;
    width: 100%; height: 50px;
    line-height: 50px; text-align: center;
    cursor: pointer;
}
#expandable ul {
    width: 100%;
    line-height: 50px;
}
​ 
```

javascript:

```
$("#expandable").hover(function() {
    $(this).stop().animate({"height":"300px"},1000);
}, function() {
    $(this).stop().animate({"height":"50px"},1000);
});​ 
```

# android - Eclipse 太慢了

> ID：10546803
> 
> 赞同：2
> 
> 时间：2012-05-11T06:55:06.037
> 
> 标签：android

> **可能重复：**
> [Android Eclipse 插件太慢](https://stackoverflow.com/questions/6243737/android-eclipse-plugin-too-slow)

我是一名Android程序员，如果程序非常大，使用eclipse编程时，每当我更改Android XML文件的内容时，eclipse需要很长时间才能重构，我想知道是否有任何其他IDE或语言可以使用对于android开发并且比eclipse更快，或者是否存在让eclipse更快的方法？谢谢

顺便说一句，我的机器是win7，AMD 640，8G内存，1T硬盘，HD6770显卡。所以我不认为是因为我的慢机器使日食变慢。而且eclipse IDE运行只有在程序足够大的时候才会显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T06:58:26.190

无法了解其他 IDE，但您可以关闭自动构建（项目 -> 自动构建）。但是这样你将不得不手动重建项目。

# c - while(!volatile); 是什么意思？做？

> ID：10546804
> 
> 赞同：6
> 
> 时间：2012-05-11T06:55:11.850
> 
> 标签：c, volatile

我在同事代码中从未调用过的部分中看到了这一点：

```
volatile unsigned char vol_flag = 0;
// ...
while(!vol_flag); 
```

`vol_flag`在头文件中声明，但从不更改。我是否正确，这会导致程序陷入无限循环？有没有办法摆脱它？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-11T06:58:22.423

通常，这样的代码表示`vol_flag`预计会在某个时候在*外部进行更改。*在这里，*外部*可能意味着不同的线程、中断处理程序、硬件（在内存映射 IO 的情况下）等。此循环有效地等待更改标志的外部事件。

关键字是程序员表达这样一个事实的`volatile`一种方式，即假设从代码中显而易见的事实是不安全的：即标志在循环中没有改变。因此，它可以防止编译器进行可能损害代码背后意图的优化。相反，编译器被迫进行内存引用以获取标志的值。

请注意（与 Java 不同）`volatile`在 C/C++ 中不建立*先发生*关系，也不保证内存引用在 volatile 访问中的任何顺序或可见性。此外，它不能确保变量引用的原子性。因此，它不是线程间通信的工具。有关详细信息，请参阅[此](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2006/n2016.html)。

# mysql - 单个mysql查询

> ID：10546807
> 
> 赞同：0
> 
> 时间：2012-05-11T06:55:30.010
> 
> 标签：mysql, group-by, subquery, sum

我希望单个 mysql 查询向以下查询添加一个新行，其中包含所有列值的总和值。请帮我

```
SELECT username,enddt,SUM(zerotothirty) AS 0To30,
SUM(thirtytosixty) AS 31To60,SUM(sixtytoonetwenty) AS 61To120,
SUM(onetwentytotwoforty) AS 121To240,SUM(greaterthantwoforty) AS '>240' 
FROM 
(SELECT username,DATE(enddt) AS enddt,tickid,
 IF(duration <=30, 1,0) zerotothirty,
 IF(duration BETWEEN 31 AND 60, 1,0) thirtytosixty,
 IF(duration BETWEEN 61 AND 120,1,0) sixtytoonetwenty,
 IF(duration BETWEEN 121 AND 240,1,0) onetwentytotwoforty,
 IF(duration >240,1,0) greaterthantwoforty
 FROM report)AS r
 GROUP BY username,DATE(enddt); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T06:58:01.897

Use the [`WITH ROLLUP`](http://dev.mysql.com/doc/en/group-by-modifiers.html) modifier to `GROUP BY`:

```
GROUP BY username,DATE(enddt) WITH ROLLUP; 
```

(In your case, this will show subtotals for each username, and a total for all results).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T13:05:52.800

为了用汇总来补充 Eggyal 的答案，您可以通过将 IF() 求和简化为

```
SELECT 
      username,
      DATE(enddt) AS enddt,
      SUM( IF(duration <=30, 1,0 )) as 0To30,
      SUM( IF(duration BETWEEN 31 AND 60, 1,0 )) as 31To60,
      SUM( IF(duration BETWEEN 61 AND 120,1,0 )) as 61To120,
      SUM( IF(duration BETWEEN 121 AND 240,1,0 )) as 121To240,
      SUM( IF(duration >240,1,0)) as '>240'
   FROM 
      report
   GROUP BY 
      username,
      DATE(enddt)
   WITH ROLLUP 
```

# asp.net - ASP.NET 在回发时动态添加 UserControl 和缓存数据

> ID：10546808
> 
> 赞同：0
> 
> 时间：2012-05-11T06:55:31.817
> 
> 标签：asp.net, c#-4.0, user-controls

我有一个 Report.aspx 页面，该页面加载不同`UserControls`以交替查看特定对象数据。`UserControls`继承相同的基类型类，其中覆盖特定的操作方法。我为每个服务类使用一个特定的服务类`UserControl`来获取实现具有操作签名的特定接口的数据。

我现在使用工厂模式将实际`UserControl`类型返回给 Report.aspx 并将其加载到 a`PanelControl`中，然后调用控制方法根据一些参数获取一些数据。

由于它的动态特性，这`UserControl`应该在每次回发中加载，任何其他解决方案都可以接受。尽管我不需要从调用 DL 的 BL 加载数据，但在每次回发时。我试图找到一个解决方案来向 BL 表明我不需要您再次要求数据，因为我只是针对其他问题回帖（例如下载报告文件、打印等）。我希望这发生在 BL 级别，而不是 ASPX 前端。到目前为止，我认为我应该让 BL 以某种方式知道这一点（PostBack 或！PostBack）。我想我可以只创建一个参数 true、false 并传递 PostBack 属性。

欢迎任何想法、架构和最佳实践。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T07:12:13.003

您能否详细说明您的陈述“在每次回发时，尽管我不需要从调用 DL 的 BL 加载数据。”？？在每次回发期间，用户控件需要显示数据（即使它与上次回发的数据相同），因为用户控件与 ASPNET 网页经历相同的生命周期。你怎么能防止呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T13:56:10.367

我决定一个非常好的解决方案是 .NET 4.0 中的 System.Runtime.Caching。非常适合您需要使用它的每一层。

[http://msdn.microsoft.com/en-us/library/dd985642](http://msdn.microsoft.com/en-us/library/dd985642)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T07:06:04.190

为什么不将逻辑包装在 if(!Page.IsPostback){....} 中调用 BL？

# android - 从其他活动设置 TypeFace - 在每个活动中调用方法或创建新实例？

> ID：10546812
> 
> 赞同：1
> 
> 时间：2012-05-11T06:56:13.750
> 
> 标签：android, android-activity, typeface

我有一个包含 3 个活动的应用程序。在我的开幕活动（主要活动）中，我使用 static 关键字为我的应用程序设置字体，以便我可以重用它。其他 2 个活动从主要活动中获取字体。这构成了一个问题 - 当用户处于活动编号 3 中，然后返回主页（桌面），而不关闭应用程序然后重新打开应用程序 - 他将获得默认字体，而不是我的自定义字体。

这意味着我必须在每个活动中初始化 TypeFace 以避免这种情况。我的问题是，这样做的权利是什么？我应该在每个活动中初始化它们吗？我应该将字体放在方法内的主要活动中，然后从不同的活动中调用该方法吗？我在这里想念的还有其他方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T07:20:03.087

如果您要为其设置自定义字体的不同类型的视图数量很少（仅说`TextView`），请按照[Android Widgets](http://helpmeco.de/2012/2/custom-fonts-in-android-widgets)中的自定义字体了解如何在 XML 中进行设置，这样您就不必每次都这样做活动。

如果您真的想共享`TypeFace`跨活动，推荐的方法是创建一个`Activity`包含`TypeFace`作为成员变量的子类。然后，您必须将此类用作所有活动的父级。

# php - 代码点火器文档类型

> ID：10546813
> 
> 赞同：0
> 
> 时间：2012-05-11T06:56:19.327
> 
> 标签：php, html, css, codeigniter, doctype

我在 Code Igniter 中编写了一个应用程序。

除非我`<!DOCTYPE HTML>`在 index.php 的开头声明（由 Code Igniter 提供的根目录中的文件），否则 Internet Explorer 会强制自己进入怪癖模式并完全弄乱我的页面。我试过把我的观点放在开头，但没有运气。

这通常不是问题，但其中一个控制器为移动身份验证系统提供动力，该系统在视图中返回 JSON 响应并`<!DOCTYPE HTML>`阻碍响应。

那么为什么将文档类型声明放在我的视图顶部时会被忽略？为什么它放在 index.php 的顶部时会起作用？

更重要的是，我该如何解决这个问题？

谢谢你的帮助！

编辑：

这是加载视图的控制器方法的示例：

```
public function login()
    {
        ?><script type="text/javascript">console.log("Admin log in panel loaded");</script><?php

        //This method will have the credentials validation
        $this->load->library('form_validation');
        $this->form_validation->set_rules('email', 'Email', 'trim|required|xss_clean');
        $this->form_validation->set_rules('password', 'Password', 'trim|required|xss_clean|callback_checkDatabase');//Database gets queried with a call-back here.

        //Set custom validation messages:
        $this->form_validation->set_message('checkDatabase', 'Invalid credentials');

        //This is executed when the form is submitted
        if($this->form_validation->run() == FALSE)
        {
            //Field validation failed. User remains on login page.
            $this->load->view('header');
            $this->load->view('useradminviews/login');
            $this->load->view('footer');

        } else {
            //Login successful, redirect to admin dashboard
            ?><script type="text/javascript">console.log("User logged in successfully");</script><?php
            redirect('useradmin?login', 'refresh');
        }
    } 
```

这是header.php：

```
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>COFRA</title>
<link rel="icon" type="image/png" href="<?php echo base_url();?>/images/favicon.png" />
<script type="text/javascript" src="<?php echo base_url();?>/javascript/jquery.js"></script>

<?php

//Load different CSS for IE users:
if ($this->agent->is_browser('Internet Explorer'))
{
    ?>
        <link href="<?php echo base_url();?>/javascript/placeholder/css/style.css" rel="stylesheet" type="text/css" media="screen"/>
        <link href="<?php echo base_url();?>/css/COFRAIE.css" rel="stylesheet" type="text/css" media="screen"/>
        <script type="text/javascript" src="<?php echo base_url();?>/javascript/placeholder/js/jquery.placeholder.js"></script>
    <?php

} else {
    ?><link href="<?php echo base_url();?>/css/COFRA.css" rel="stylesheet" type="text/css" media="screen"/><?php
}
?>

</head> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T09:21:54.217

删除 JavaScript 打印到控制台。他们不应该在视图之前运行。

# google-maps - Google Maps V3 折线加载失败

> ID：10546818
> 
> 赞同：1
> 
> 时间：2012-05-11T06:56:37.330
> 
> 标签：google-maps, google-maps-api-3

我需要 Google 地图折线方面的帮助

我刚刚下载了这段代码（只是一个简单的地图），它工作得很好。我已经注册了 google API 。

```
<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map_canvas { height: 100% }
    </style>

      <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD4nINMTYXMM9Mkb35C8Jy_mZ--grp9B1Y&sensor=false">
    </script>
    <script type="text/javascript">
      function initialize() {
        var myOptions = {
          center: new google.maps.LatLng(-34.397, 150.644),
          zoom: 8,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(document.getElementById("map_canvas"),
            myOptions);
      }
    </script>
  </head>

  <body onload="initialize()">
    <div id="map_canvas" style="width:100%; height:100%"></div>
  </body>
</html> 
```

但是这个不能在我的电脑上运行？？

任何原因，请帮助

```
<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
<title>Google Maps JavaScript API v3 Example: Polyline Simple</title>
<link href="/maps/documentation/javascript/examples/default.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD4nINMTYXMM9Mkb35C8Jy_mZ--grp9B1Y&sensor=false"></script>
<script type="text/javascript">

  function initialize() {
    var myLatLng = new google.maps.LatLng(0, -180);
    var myOptions = {
      zoom: 3,
      center: myLatLng,
      mapTypeId: google.maps.MapTypeId.TERRAIN
    };

    var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

    var flightPlanCoordinates = [
        new google.maps.LatLng(37.772323, -122.214897),
        new google.maps.LatLng(21.291982, -157.821856),
        new google.maps.LatLng(-18.142599, 178.431),
        new google.maps.LatLng(-27.46758, 153.027892)
    ];
    var flightPath = new google.maps.Polyline({
      path: flightPlanCoordinates,
      strokeColor: "#FF0000",
      strokeOpacity: 1.0,
      strokeWeight: 2
    });

   flightPath.setMap(map);
  }

</script>
</head>
<body onload="initialize()">
  <div id="map_canvas"></div>
</body>

</html> 
```

调试（当它工作正常时）：

```
[12:46:00.874] file:///C:/Users/Haile/Desktop/polyoverflow.html
[12:46:00.974] GET https://maps.googleapis.com/maps/api/js?key=AIzaSyD4nINMTYXMM9Mkb35C8Jy_mZ--grp9B1Y&sensor=false [HTTP/1.1 200 OK 6738ms]
--
[12:46:07.779] GET https://maps.gstatic.com/intl/en_us/mapfiles/api-3/8/11/main.js [HTTP/1.1 304 Not Modified 667ms]
[12:46:08.622] Error in parsing value for 'background'.  Declaration dropped. @ file:///C:/Users/Haile/Desktop/polyoverflow.html
[12:46:08.718] GET https://maps.gstatic.com/mapfiles/openhand_8_8.cur [HTTP/1.1 304 Not Modified 4200ms]
[12:46:08.744] GET https://maps.gstatic.com/mapfiles/transparent.png [HTTP/1.1 304 Not Modified 6536ms]
[12:46:08.776] GET https://maps.gstatic.com/mapfiles/undo_poly.png [HTTP/1.1 304 Not Modified 2389ms]
[12:46:08.792] GET https://mts1.googleapis.com/vt?lyrs=t@128,r@177000000&src=apiv3&hl=en-US&x=7&y=3&z=3&s=&style=api%7Csmartmaps [HTTP/1.1 200 OK 3746ms]
[12:46:08.808] GET https://mts1.googleapis.com/vt?lyrs=t@128,r@177000000&src=apiv3&hl=en-US&x=7&y=4&z=3&s=G&style=api%7Csmartmaps [HTTP/1.1 200 OK 8703ms]
[12:46:08.826] GET https://mts0.googleapis.com/vt?lyrs=t@128,r@177000000&src=apiv3&hl=en-US&x=0&y=3&z=3&s=Gal&style=api%7Csmartmaps [HTTP/1.1 200 OK 7659ms]
[12:46:08.845] GET https://mts0.googleapis.com/vt?lyrs=t@128,r@177000000&src=apiv3&hl=en-US&x=0&y=4&z=3&s=Gali&style=api%7Csmartmaps [HTTP/1.1 200 OK 8420ms]
[12:46:08.863] GET https://mts0.googleapis.com/vt?lyrs=t@128,r@177000000&src=apiv3&hl=en-US&x=6&y=3&z=3&s=Galil&style=api%7Csmartmaps [HTTP/1.1 200 OK 16613ms]
[12:46:08.890] GET https://mts0.googleapis.com/vt?lyrs=t@128,r@177000000&src=apiv3&hl=en-US&x=6&y=4&z=3&s=Galile&style=api%7Csmartmaps [HTTP/1.1 200 OK 12093ms]
[12:46:08.914] GET https://mts1.googleapis.com/vt?lyrs=t@128,r@177000000&src=apiv3&hl=en-US&x=1&y=3&z=3&s=Galile&style=api%7Csmartmaps [HTTP/1.1 200 OK 19585ms]
[12:46:08.939] GET https://mts1.googleapis.com/vt?lyrs=t@128,r@177000000&src=apiv3&hl=en-US&x=1&y=4&z=3&s=Galileo&style=api%7Csmartmaps [HTTP/1.1 200 OK 2753ms]
[12:46:08.963] GET https://mts1.googleapis.com/vt?lyrs=t@128,r@177000000&src=apiv3&hl=en-US&x=5&y=3&z=3&s=Ga&style=api%7Csmartmaps [HTTP/1.1 200 OK 12625ms]
[12:46:08.988] GET https://mts1.googleapis.com/vt?lyrs=t@128,r@177000000&src=apiv3&hl=en-US&x=5&y=4&z=3&s=Gal&style=api%7Csmartmaps [HTTP/1.1 200 OK 9987ms]
[12:46:09.014] GET https://mts0.googleapis.com/vt?lyrs=t@128,r@177000000&src=apiv3&hl=en-US&x=2&y=3&z=3&s=G&style=api%7Csmartmaps [HTTP/1.1 200 OK 8728ms]
[12:46:09.047] GET https://mts0.googleapis.com/vt?lyrs=t@128,r@177000000&src=apiv3&hl=en-US&x=2&y=4&z=3&s=Ga&style=api%7Csmartmaps [HTTP/1.1 200 OK 2984ms]
[12:46:09.078] GET https://maps.googleapis.com/maps/api/js/ViewportInfoService.GetViewportInfo?1m6&1m2&1d-67.60159243714006&2d-180&2m2&1d67.60159243714006&2d180&2u3&4sen-US&5e4&6sr%40177000000&7b0&8e0&9b0&callback=_xdc_._q07umg&token=24170 [HTTP/1.1 200 OK 10083ms]
[12:46:09.294] GET https://maps.gstatic.com/mapfiles/google_white.png [HTTP/1.1 304 Not Modified 2013ms]
[12:46:09.329] GET https://maps.gstatic.com/mapfiles/mv/imgs8.png [HTTP/1.1 304 Not Modified 2413ms]
[12:46:09.367] GET https://maps.gstatic.com/mapfiles/cb/mod_cb_scout/cb_scout_sprite_api_003.png [HTTP/1.1 304 Not Modified 3958ms]
[12:46:09.404] GET https://maps.gstatic.com/mapfiles/rotate2.png [HTTP/1.1 304 Not Modified 2713ms]
[12:46:09.441] GET https://maps.gstatic.com/mapfiles/szc4.png [HTTP/1.1 304 Not Modified 7609ms]
[12:46:10.190] GET https://maps.googleapis.com/maps/gen_204?ev=api_viewport&cad=src:apiv3,ts:1336902369211 [HTTP/1.0 200 Connection established 25338ms]
[12:46:12.591] GET https://maps.googleapis.com/maps/gen_204?ev=api_ads&cad=src:apiv3,ads:0 [HTTP/1.1 204 No Content 2181ms]
[12:46:13.461] GET https://maps.googleapis.com/maps/api/js/AuthenticationService.Authenticate?1sfile%3A%2F%2F%2FC%3A%2FUsers%2FHaile%2FDesktop%2Fpolyoverflow.html&4sAIzaSyD4nINMTYXMM9Mkb35C8Jy_mZ--grp9B1Y&5e1&callback=_xdc_._q8yv43&token=112869 [HTTP/1.0 200 Connection established 12274ms]
--
[12:46:20.489] GET https://maps.googleapis.com/maps/gen_204?ev=api_marker&cad=src:apiv3,m:2,d:0,s:0 [HTTP/1.1 204 No Content 660ms]
--
[12:46:29.340] GET https://csi.gstatic.com/csi?v=2&s=mapsapi3&action=apiboot&rt=jl.737,mc.784,mb.871,vt.20582,prt.20582,plt.20535,mt.20583&size=1366x246&maptype=r [HTTP/1.1 204 No Content 7383ms]
--
[12:46:38.478] GET https://maps.googleapis.com/maps/api/js/QuotaService.RecordEvent?1sfile%3A%2F%2F%2FC%3A%2FUsers%2FHaile%2FDesktop%2Fpolyoverflow.html&3sAIzaSyD4nINMTYXMM9Mkb35C8Jy_mZ--grp9B1Y&4e1&5e0&6u1&7s5x64nd&callback=_xdc_._9r0xgo&token=4472 [HTTP/1.1 200 OK 697ms] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T07:48:29.687

您已包含 Google 的 CSS。把它拿出来定义你自己的，类似于你的工作示例。您可能需要`height:100%; width:100%`，而不仅仅是设置高度。

```
function initialize() {
    var myLatLng = new google.maps.LatLng(0, -180);
    var myOptions = {
        zoom: 3,
        center: myLatLng,
        mapTypeId: google.maps.MapTypeId.TERRAIN
    };

    var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

    var flightPlanCoordinates = [
        new google.maps.LatLng(37.772323, -122.214897),
        new google.maps.LatLng(21.291982, -157.821856),
        new google.maps.LatLng(-18.142599, 178.431),
        new google.maps.LatLng(-27.46758, 153.027892)
    ];
    var flightPath = new google.maps.Polyline({
        path: flightPlanCoordinates,
        strokeColor: "#FF0000",
        strokeOpacity: 1.0,
        strokeWeight: 2
    });

   flightPath.setMap(map);
}
initialize();
```

```
html { height: 100% ; width: 100%}
      body { height: 100%; width:100%; margin: 0; padding: 0 }
      #map_canvas { height: 100%; width:100% }
```

```
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD4nINMTYXMM9Mkb35C8Jy_mZ--grp9B1Y"></script>
<div id="map_canvas"></div>
```

# javascript - jquery onclick 穿透到父元素

> ID：10546819
> 
> 赞同：9
> 
> 时间：2012-05-11T06:56:37.673
> 
> 标签：javascript, jquery, onclick, parent-child

我将如何阻止`onclick`内部元素也单击其父元素。

```
<div id="1" onclick="alert('1')">
<div id="2" onclick="alert('2')"></div>
</div> 
```

如果第二个 div (id="2") 明显位于第一个 div 之上，并且被单击，您将同时收到警报 1 和 2。

我怎样才能避免这种情况，所以我只能从我（明显）点击的内容中获得警报，而不会完全禁用外部 div 可能拥有的任何 onclick 功能。

**示例：http:** [//jsfiddle.net/DPCx8/](http://jsfiddle.net/DPCx8/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T07:01:26.807

```
​var outer = document.getElementById('outer');
outer.onclick = function(event)
    {
        alert('outer');
        event.stopPropagation();
    }​​
    var inner = document.getElementById('inner');
inner.onclick = function(event)
    {
        alert('inner');
        event.stopPropagation();
    } 
```

[http://jsfiddle.net/DYykA/1/](http://jsfiddle.net/DYykA/1/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-11T06:58:18.163

您需要在子级[停止传播](http://api.jquery.com/event.stopPropagation/)，因此事件不会冒泡到父级。

```
$("#inner").on("click", function(e){
  e.stopPropagation();
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-11T06:59:32.757

用于`event.stopPropogation();`防止事件冒泡

# iphone - UIDocumentInteractionController 不预览 zip 文件

> ID：10546820
> 
> 赞同：2
> 
> 时间：2012-05-11T06:56:40.727
> 
> 标签：iphone, ios, cocoa-touch, ipad, uidocumentinteraction

我使用 a`UIDocumentInteractionController`在我的应用程序中显示几乎所有文档类型的预览。在 iOS 5.1 之前，zip 文件由`UIDocumentInteractionController`- 它不预览内容而是显示占位符来处理。但是，`UIDocumentInteractionController`根本不再显示预览。任何有关`UIDocumentInteractionController`预览 zip 文件的建议将不胜感激。

# windows - 将 Windows 程序复制到另一台机器

> ID：10546821
> 
> 赞同：-2
> 
> 时间：2012-05-11T06:56:47.027
> 
> 标签：windows, copy

我在笔记本电脑的 Windows 7 上安装了一个程序。我希望在我的桌面上的 Windows 7 上安装相同的程序。不幸的是，我已经没有源文件了。如何将整个程序从一台机器复制到另一台机器并使其运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T07:02:40.160

请参阅[如何在没有启动盘的情况下将程序从一台计算机复制到另一台计算机](http://www.ehow.com/how_5061188_copy-computer-another-startup-disk.html)。我希望它会起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T07:03:24.763

这取决于程序是否可能。

您必须知道安装程序将哪些部分复制到您的计算机以及复制到哪些目录。即使这样，安装程序也有可能检查了先决条件，在笔记本电脑上找到了它们，但在台式计算机上却找不到它们。

您可以尝试从 %ProgramFiles% 目录中复制文件，但如果这样做会很糟糕，而且您无法确定它是否正常工作。因此，您最好的选择是再次组织安装程序包。

# jquery - setRequestHeader 在使用 jQuery 的 JSONP 中不起作用

> ID：10546822
> 
> 赞同：0
> 
> 时间：2012-05-11T06:56:47.047
> 
> 标签：jquery, jsonp, restful-authentication, basic-authentication

我正在使用 jQuery Mobile、jQuery 1.7.2 和 PhoneGap 构建一个 iPhone 应用程序

尝试使用此代码从 ASP.NET RESTful Web 服务获取 JSONP，问题是我需要先进行身份验证并获取令牌，然后再将其发回。

这是我的功能：

```
var setToken = function () {
    var serverToken = '';
    $.support.cors = true;
    jQuery('body').ajaxSend(function (evt, xhr) {
        xhr.setRequestHeader("Authorization", "Basic " + $.base64.encode(username + ":" + password));
        xhr.setRequestHeader('X-Accept', 'application/json');
    });
    $.getJSON(url + "?jsoncallback=?", null, function (res) {
        console.log(res);
        serverToken = res.Token;
    });

    $('body').ajaxSend(function (evt, xhr, ajaxOptions) {
        xhr.setRequestHeader('NewToken', serverToken);
    });

}; 
```

我得到 401 (Unauthorized) 检查标题：

```
 Request URL:http://192.168.0.44/call/?jsoncallback=jQuery17206244203052483243499_132336710607307&_=1336742104278
    Request Method:GET
    Status Code:401 Unauthorized

    Request Headers
    Accept:*/*
    Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
    Accept-Encoding:gzip,deflate,sdch
    Accept-Language:en-US,en;q=0.8
    Connection:keep-alive
    Host:192.168.0.44
    Referer:http://localhost/myMobileApp/
    User-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_3) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.168 Safari/535.19
    Query String Parametersview URL encoded
    jsoncallback:jQuery17206244203052483243499_132336710607307
    _:1336710704278

    Response Headers
    Access-Control-Allow-Origin:*
    Cache-Control:private
    Content-Length:0
    Date:Fri, 11 May 2012 04:31:52 GMT
    Server:Microsoft-IIS/7.5
    WWW-Authenticate:Basic
    X-AspNetMvc-Version:3.0
    X-Powered-By:ASP.NET 
```

setRequestHeader 没有添加标题。

我究竟做错了什么？

请记住，服务器端已经设置为返回 JSONP，我认为我们不需要在那里进行更改，但任何想法都会有所帮助

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T07:06:19.070

JSONP 请求不使用实际的 ajax 调用，您可以在其中控制 http 请求。

相反，它将脚本标记注入您的页面，然后浏览器请求该脚本 src 文件。返回的结果脚本执行并通过该 javascript 执行（调用回调函数）传回其结果。因为请求是通过脚本标记插入而不是直接 ajax 调用生成的，所以无法在 JSONP 请求上设置请求标头。

如果您的请求是跨域的，那么 JSONP 是您唯一的机制。

如果您的请求与页面的来源相同（不是跨域），那么您可以将请求重组为返回 JSON 数据的实际 ajax 调用。如果你这样做了，你可以在 ajax 调用上设置请求标头。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T07:19:58.467

正如`jfriend00`所说，

> JSONP 请求不使用可以控制 HTTP 请求的实际 ajax 调用。

但是，在您的情况下-您尝试添加的标头是基本授权-您可以像“通常”那样将其注入到 URL 中。因此，要使用用户“user”和密码“pass”在[http://example.com](http://example.com)进行身份验证，URL 将是[http://user:pass@example.com/](http://user:pass@example.com/)。

# sql - 在 CakePHP 中查询多个模型的相似数据（联合？）

> ID：10546824
> 
> 赞同：3
> 
> 时间：2012-05-11T06:56:55.050
> 
> 标签：sql, cakephp, model, cakephp-2.0

所以我有以下示例表：

```
Table A:
id
name
type
hat_size
created

Table B:
id
name
type
favorite_food
created

Table C:
id
name
type
some_other_thing
created 
```

假设我想使用来自模型`A`、、`B`和`C`使用`id`、、、`name`和`type`的结果创建搜索`created`。

我的目标是搜索所有三个表，按其中一个字段排序（让我们`created`用作`ORDER_BY`字段），并限制为 20 个结果。

通常我会简单地对这些进行联合，按字段排序，然后`LIMIT`得到结果。

现在，我知道我可以创建一个原始查询来执行此操作……但这意味着我必须重写分页方法，始终进行清理等。此外，它很笨重，不一定能跨多个 SQL 数据库移植。如果可能的话，我更愿意使用模型本身来以更友好的 MVC 方式来做这件事。

我可以用 CakePHP 解决这个问题的最佳方法是什么？

谢谢你，詹姆斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T00:12:00.370

一种选择是创建一个`VIEW`保存`UNION`查询的。然后在视图上执行您的 Cake 查询。

然而，我最近开始避免视图，因为在服务器之间传输它们很困难（以及`DEFINER`通常包含在导出中的烦人的命令）。

# r - R查询'$'（）

> ID：10546826
> 
> 赞同：2
> 
> 时间：2012-05-11T06:57:04.950
> 
> 标签：r

我创建了一个数据框并尝试访问数据框中的列。代码如下图

```
df <- data.frame(n = c('A','B','C'),
                 mark_1 = c(23,25, 17),
                 mark_2 = c(45,46,50))

j <- paste('mark',1,sep="_")
j

f <- '$'(df,j)
summary(f)

n <- '$'(df,"mark_1")
summary(n) 
```

当我运行这段代码时，这就是我得到的

```
 > j <- paste('mark',1,sep="_")
    > j
    [1] "mark_1"
    > f <- '$'(df,j)
    > summary(f)
    Length  Class   Mode 
         0   NULL   NULL 
    > n <- '$'(df,"mark_1")
    > summary(n)
       Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
      17.00   20.00   23.00   21.67   24.00   25.00 
    > 
```

为什么摘要（f）不起作用？j 正确连接到“mark_1”。那为什么会发生错误？

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T07:21:30.080

@TylerRinker 向您展示了该怎么做。

...但是您不能使用的原因`'$'(df,j)`是美元运算符按字面意思使用第二个参数。

......所以`'$'(df,mark_1)`会很好。但是您根本无法将变量传递给它。这`[`就是`[[`：

```
df[,j]  # The j'th column
df[[j]] # Pretend df is a list of columns and get the j'th element 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-11T07:07:21.043

在 as 上使用索引`$`：

```
df[, j]
summary(df[, j]) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-11T07:23:10.210

`'$'(df,j)`相当于`df$j`-- 它查看参数的名称，而不是其值。您可以使用`df[[j]]`or `df[,j]`or`'[['(df,j)`代替（但要避免使用最后一个，除非您想让代码难以阅读）。

```
df$j <- 1

# The "j" column
df$j
`$`(df,j)
`[[`(df,"j")
df[["j"]]
df[,"j"]

# The "mark_1" column
df[[j]]
df[,j]
`[[`(df,j) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-11T11:24:30.197

如果您将它与`do.call`. `do.call`在您将函数名称作为字符而不是语言值的情况下很有用。在这种情况下，它还评估第二个参数，即数据框列表和列名。

```
do.call('$', list(df, j))
[1] 23 25 17 
```

也就是说，我认为你最好使用 '[[' 或 '[' 来评估第二个参数。

# macos - Jar bundler -d32 vm arguments

> ID：10546827
> 
> 赞同：0
> 
> 时间：2012-05-11T06:57:11.573
> 
> 标签：macos, jvm-arguments, jarbundler

I have created an application which uses 32bit libraries on my 64bit Mac Lion so to run my application I need to pass -d32 vm argument in eclipse and it works fine. I created runnable jar of application and it also works fine when I run jar from terminal with -d32 vm arguments but the problem comes when I creates .app file of my application using jar bundler. I passed -d32 in vm options textbox of jar bundler but when I run .app the application icon comes up in dock but application window does not show up.

I think it is vm argument issue but I am not sure about it. I was wondering if there is some other way to pass vm arguments in jar bundler.

Any suggestions related to this problem are welcome.

Thanks in advance

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T23:50:12.313

我还没有找到通过 Jar Bundler 应用程序执行此操作的方法，但它们是一种解决方案。

`.app`像往常一样使用 Jar Bundler创建。右键单击并在新创建的应用程序上“获取信息”，选中“以 32 位模式打开”框。

以编程方式设置此标志[似乎很棘手](https://stackoverflow.com/questions/7064450/forcing-a-cocoa-application-to-start-in-32-bit-mode-programatically)，但可能。

# cryptography - 公钥指纹与数字签名

> ID：10546837
> 
> 赞同：6
> 
> 时间：2012-05-11T06:58:06.390
> 
> 标签：cryptography, openssl, rsa

[公钥指纹](http://en.wikipedia.org/wiki/Public_key_fingerprint)和数字签名有何不同？还是两者都一样？如果它们不同，公钥指纹的应用是什么？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T07:06:08.363

公钥指纹是用于验证或查找较长公钥的短字节序列。指纹是通过对公钥应用加密散列函数来创建的。由于指纹比它们所指的密钥短，因此它们可用于简化某些密钥管理任务

数字签名是一种数学方案，用于证明数字消息或文档的真实性。有效的数字签名使收件人有理由相信该消息是由已知的发件人创建的，并且在传输过程中没有被更改。数字签名通常用于软件分发、金融交易以及其他需要检测伪造或篡改的情况

公钥指纹是公钥的简短版本，用于验证较长的公钥，如果它们不匹配，则表示较长的公钥已被篡改。因此，基本上数字签名是由用户签名的，只有该用户可以签名，因此您可以确定它来自该用户。

所以客户端使用公钥指纹，服务器使用数字签名

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T07:05:20.593

指纹是密钥的哈希值。数字签名与某些消息相关联，通常是消息的单向加密散列。

两者有不同的用途：您可以将公钥指纹放在您的卡上，或者，*如果您认出手机上的其他人，则*使用它来验证您是否获得了正确的公钥。它自己什么也没说。另一方面，数字签名表示该消息是使用那里的密钥签名的，您不需要任何其他渠道来验证该事实。

# php - php插入preg_match_all数组

> ID：10546842
> 
> 赞同：0
> 
> 时间：2012-05-11T06:58:22.760
> 
> 标签：php, mysql, arrays, insert, short

这是一个在 POST 中捕获所有 url 并将它们短路然后将它们中的每一个插入到 mysql 中的代码.....但是这里它是在一行中插入所有 url ?? 那么我怎样才能让它捕获第一个 url 然后将其插入数据库然后返回第二个并做同样的事情..???

```
$urlinput=mysql_real_escape_string($_POST['url']); 
$pattren="/(http:\/\/)[a-zA-Z0-9]*\.[a-z]*(.*)|(www)\.[a-zA-Z0-9]*\.[com]*(.*)/";
preg_match_all( $pattren, $urlinput, $matches );
foreach($matches[0] as $match) {

$id=rand(10000,99999);
$shorturl=base_convert($id,20,36);
$sql = "insert into url values('$id','$match','$shorturl')";
mysql_query($sql,$con);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T07:03:05.347

在这里[http://php.net/manual/en/function.preg-match-all.php](http://php.net/manual/en/function.preg-match-all.php)您可以阅读有关 preg_match_all 的第四个参数的信息。您可以遍历找到的网址。我改变了你的正则表达式的结尾，所以它不会抓住整行：

```
$urlinput=mysql_real_escape_string($_POST['url']); 
$pattren="/(http:\/\/)[a-zA-Z0-9]*\.[a-z]*(.*)|(www)\.[a-zA-Z0-9]*\.[com]*([a-zA-Z0-9\.\-_\/\?=\:]*)/";
preg_match_all( $pattren, $urlinput, $matches, PREG_SET_ORDER );
foreach($matches as $match) {
  $id=rand(10000,99999);
  $shorturl=base_convert($id,20,36);
  $sql = "insert into url values('$id','" . mysql_real_escape_string($match[0]) . "','$shorturl')";
  mysql_query($sql,$con);
} 
```

还要小心 SQL 注入，并在查询中使用用户数据时使用 mysql_real_escape_string。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T07:05:44.580

好吧，正则表达式中的“（。*）”在找到网址的开头后匹配所有内容。因此，如果您希望一个字符串中有多个 url，或者逗号分隔或其他，它们将被捆绑在一起。

您需要能够先拆分您的输入，然后验证每个元素是一个有效的 url，然后再选择它进行插入。

# javascript - 一个视图的事件

> ID：10546843
> 
> 赞同：0
> 
> 时间：2012-05-11T06:58:25.293
> 
> 标签：javascript, asp.net-mvc

我有一个事件，当按下键盘上的按钮时引发。我希望仅针对一个视图调用此事件。现在，在我的布局视图中，我有：

```
<body onkeydown="theMethod()"> 
```

但这在应用程序的所有页面中都会被调用。如何调用唯一的一个视图？视图没有正文标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T07:00:40.067

在您希望触发它的一个视图中动态绑定事件。

在您*确实*希望处理主体上的关键事件的视图中，将这样的代码添加到视图的标记中：

```
$(function(){
    $("BODY").keydown(theMethod);
}); 
```

这是一个 jQuery 示例（您可以不使用 jQuery，但它包含在 MVC 脚手架中，并且非常适合此类情况）。

从内联声明中抽象出事件处理是一种很好的做法，并且使这样的场景更容易处理。

# ruby - Passing variable from Sinatra module to view?

> ID：10546845
> 
> 赞同：2
> 
> 时间：2012-05-11T06:58:37.980
> 
> 标签：ruby, sinatra, erb

I have function in a module in the lib dir of my Sinatra app, that I want to be able to pass a variable back to a view.

Trying to pass it like :

```
@errorMessage = params["testing error"]
erb :error 
```

Bring the error erb that's in ../views from the lib directory, but does not show the errorMessage var.

erb code :

```
<p> Error message : <% @errorMessage %></p> 
```

Anyone have any idea?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T08:39:00.800

您可以尝试使用 :locals

```
erb :error, :locals => {:errorMessage => "My message"} 
```

然后在模板中使用 errorMessage 作为变量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T14:32:57.887

它应该是`<%= @errorMessage %>`而不是`<% @errorMessage %>`。

# css - Browser height DIV creates an extra space at the bottom

> ID：10546846
> 
> 赞同：0
> 
> 时间：2012-05-11T06:58:38.840
> 
> 标签：css, html, whitespace, footer

I am having a simple div with header,content and footer.Now my issue is that there is a gap at the bottom of my div.And if I resize browser window some more extra `white-space` is adding at the `bottom` of my div.

The entire leftContainer should be of `browser height`.

For example I need something like [this](http://www.picmonkey.com/)(actually this is done n flash I want it to be done in HTML)

This is how it looks now:

![enter image description here](../Images/f4a1e424350924ad48663b4a94c1ce79.png)

Here is my CSS:

```
html, body
{
     margin: 0; 
     border: 0 none; 
     padding: 0; 
          overflow: hidden;
}
html, body, #wrapper, #left, #right 
{
     height: 100%; 
     min-height: 400;
}
.leftContainer 
{
    width:308px;
    max-height: 100%;
    height:100%;
    border-style: solid;
    border-width: 2px 0px 0px 0px;
    background-color: #ffffff;
    box-shadow: 0px 0px 7px #292929;
    -moz-box-shadow: 0px 0px 7px #292929;
    -webkit-box-shadow: 0px 0px 7px #292929;
}
.mainbody
{
    padding-left: 5px;
    margin-top: 0;
    min-height: 150px;
    max-height:736px;
    height: 100%;
    background-color: #F9F9F9;
}
.header
{

    height: 40px;
    color: #000;
    border-bottom: 1px solid #EEE;
}

.footer 
{
    padding-left:20px;
    height: 40px;
    background-color: whiteSmoke;
    border-top: 1px solid #DDD;
    -webkit-border-bottom-left-radius: 5px;
    -webkit-border-bottom-right-radius: 5px;
    -moz-border-radius-bottomleft: 5px;
    -moz-border-radius-bottomright: 5px;
    border-bottom-left-radius: 5px;
    border-bottom-right-radius: 5px;
}​ 
```

HTML:

```
<div class="leftContainer ">
<div class="header">Header</div>
<div class="mainbody">
    <p>Body</p>
</div> 
<div class="footer">Footer</div>
</div> 
```

I don't want the footer to be seperate it should be within its parent div(`leftContainer`)

**[DEMO](http://jsfiddle.net/UqJTX/3/embedded/result/)**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T07:05:37.190

您是否尝试过添加

```
position: relative; 
```

到您的 .leftContainer 和

```
position: absolute;
bottom: 0;
left: 0;
right: 0; 
```

到你的 .footer ？应该做你想要的。

看看：http: [//jsfiddle.net/UqJTX/7/embedded/result/](http://jsfiddle.net/UqJTX/7/embedded/result/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T07:35:54.630

看看这个[演示](http://jsfiddle.net/ScePQ/11/)它工作正常

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T07:07:16.023

阴影存在一些问题，它们在某些浏览器中被添加到长度中，因此请尝试仅放置侧阴影并应用负边距。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T07:11:20.720

您是否尝试过添加

```
position: absolute;
bottom: 0;
left: 0;
right: 0;
top:0;
overflow:auto; 
```

到您的 .leftContainer 和

```
position: absolute;
bottom: 0;
left: 0;
right: 0; 
```

到你的 .footer ？应该做你想要的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T07:16:21.697

您必须以百分比形式提及每个 div 的宽度。左容器总高度为 100%，然后以适当的百分比确定三个 div 的高度（如页眉 10%、正文 85% 和页脚 5%）。不建议以像素为单位提及高度或宽度。

用于`firebug`轻松调试 HTML 和 CSS。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-11T08:11:36.900

像这样使用`min-height:100%`

可能对你有用吗

# ruby-on-rails - Newly assigned Sequence is not working

> ID：10546850
> 
> 赞同：3
> 
> 时间：2012-05-11T06:59:06.890
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, activerecord, rails-postgresql

In PostgreSQL, I created a new table and assigned a new sequence to the `id` column. If I insert a record from the PostgreSQL console it works but when I try to import a record from from Rails, it raises an exception that it is unable to find the associated sequence.

Here is the table:

```
\d+ user_messages;
                                                  Table "public.user_messages"
   Column    |            Type             |                         Modifiers                          | Storage  | Description 
-------------+-----------------------------+------------------------------------------------------------+----------+-------------
 id          | integer                     | not null default nextval('new_user_messages_id'::regclass) | plain    | 
```

But when I try to get the sequence with the SQL query which Rails uses, it returns NULL:

```
select pg_catalog.pg_get_serial_sequence('user_messages', 'id');
 pg_get_serial_sequence 
------------------------

(1 row) 
```

The error being raised by Rails is:

```
UserMessage.import [UserMessage.new]
NoMethodError: undefined method `split' for nil:NilClass
    from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.3/lib/active_record/connection_adapters/postgresql_adapter.rb:910:in `default_sequence_name' 
```

This problem only occurs when I use the ActiveRecord extension for importing bulk records, single records get saved through ActiveRecord.

How do I fix it?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T07:33:59.570

我认为您的问题是您手动设置了所有这些，而不是使用`serial`列。当您使用`serial`列时，PostgreSQL 将创建序列，设置适当的默认值，并确保序列由相关的表和列拥有。来自[精美手册](http://www.postgresql.org/docs/current/static/functions-info.html#FUNCTIONS-INFO-CATALOG-TABLE)：

> `pg_get_serial_sequence(table_name, column_name)`
> 获取序列或大序列列使用的序列的名称

但是您没有使用`serial`或`bigserial`因此`pg_get_serial_sequence`无济于事。

您可以通过以下方式解决此问题：

```
alter sequence new_user_messages_id owned by user_messages.id 
```

我不确定这是否是一个完整的解决方案，并且有人（嗨 Erwin）可能会填补缺失的部分。

[`serial`](http://www.postgresql.org/docs/current/static/datatype-numeric.html#DATATYPE-SERIAL)通过使用作为列的数据类型，您可以在此处省去一些麻烦`id`。这将为您创建和连接序列。

例如：

```
=> create sequence seq_test_id;
=> create table seq_test (id integer not null default nextval('seq_test_id'::regclass));
=> select pg_catalog.pg_get_serial_sequence('seq_test','id');
 pg_get_serial_sequence 
------------------------

(1 row)
=> alter sequence seq_test_id owned by seq_test.id;
=> select pg_catalog.pg_get_serial_sequence('seq_test','id');
 pg_get_serial_sequence 
------------------------
 public.seq_test_id
(1 row) 
```

# javascript - 禁用 iOS Overscroll 但允许正文滚动

> ID：10546857
> 
> 赞同：6
> 
> 时间：2012-05-11T06:59:45.720
> 
> 标签：javascript, jquery, html, ios, web-applications

我想禁用 web 应用程序中的 iOS 过度滚动，但仍允许滚动正文。

```
$(document).on('touchmove', function(e) {
    e.preventDefault();
}); 
```

完全禁用滚动（正如人们所期望的那样）。

有没有办法做我想做的事？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-26T05:54:24.333

我有几乎[同样的问题](https://stackoverflow.com/questions/10238084/ios-safari-how-to-disable-overscroll-but-allow-scrollable-divs-to-scroll-norma)。这应该可以帮助您：

```
// Disable overscroll / viewport moving on everything but scrollable divs
 $('body').on('touchmove', function (e) {
         if (!$('.scrollable').has($(e.target)).length) e.preventDefault();
 }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T07:03:30.400

```
document.body.addEventListener('touchmove',function(e){
     if(!$(e.target).hasClass("scrollable")) {
       e.preventDefault();
     }
 }); 
```

试试这个我刚通过谷歌进来的

# c++ - 我什么时候需要 MSVCRT 可再发行组件？

> ID：10546865
> 
> 赞同：2
> 
> 时间：2012-05-11T07:00:32.567
> 
> 标签：c++, visual-studio, installation

我已经在 Visual Studio 2010 中构建了一个 MFC 应用程序，但我正在为在安装程序中包含重新分发而摸不着头脑。

该应用程序是静态链接的，所以我不应该需要可再发行组件，它是自包含的，对吧？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T07:06:47.630

这是一个测试您是否需要可再发行组件的简单方法：

*   在 VirtualBox 上安装干净的 Windows 7（甚至更好的 Windows XP SP 2，因为它没有您期望的基本内容）
*   在此 VirtualBox 上运行您的软件

如果它不起作用，您可能需要包含可再发行组件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T07:03:18.163

是的，它应该没问题，但我会安装在您预期的目标平台上，看看它是否有效，如果没有，那么您需要添加更多 dll 或作为先决条件添加以在安装您的应用程序之前安装 VC 可再发行组件。

尽管您可能已包含 MFC dll，但您的目标操作系统上的 Visual C 运行时可能不同，因此您可能仍需要在您的应用程序中包含 VC 可再发行组件。

有关执行上述操作的 MSDN 链接：http: [//msdn.microsoft.com/en-us/library/ms235299.aspx](http://msdn.microsoft.com/en-us/library/ms235299.aspx)和演练：http: [//msdn.microsoft.com/en-us/library/dd293575.aspx](http://msdn.microsoft.com/en-us/library/dd293575.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T07:22:19.863

任何时候静态链接 DLL 或可再发行组件时，都不需要再分发它。这是静态链接和动态链接之间的核心区别。

它实际上会将您使用的部分（或整个事物，取决于）嵌入到您的应用程序中。通过重新分发您的应用程序，您实际上也在重新分发其依赖项。

请注意，您不能总是使用静态链接，即使可以使用它也并不总是有意义。

# multithreading - 当一个函数有互斥锁时，为什么我们要让它递归呢？

> ID：10546867
> 
> 赞同：1
> 
> 时间：2012-05-11T07:00:37.603
> 
> 标签：multithreading, pthreads, mutex

[https://stackoverflow.com/a/5524120/462608](https://stackoverflow.com/a/5524120/462608)

> 如果你想递归调用函数来锁定同一个互斥锁，那么它们要么必须使用一个递归互斥锁，要么
> 必须一次又一次地解锁和锁定同一个非递归互斥锁（当心并发线程！），或者
> 必须以某种方式注释它们已经锁定的互斥锁（模拟递归所有权/互斥锁）。

无论如何，这是一个“明智的”设计决定，使已经具有互斥锁的函数递归？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T07:05:30.313

嗯，*一种*可能性是您使用的资源自然适合递归算法。

考虑搜索二叉树，同时防止其他人使用（尤其是修改）带有互斥锁的树。

如果您使用递归互斥锁，您可以简单地拥有一个`search()`将根节点传递给的函数。然后它按照正常的二叉树搜索递归地调用自己，但它在该函数中做的第一件事是锁定互斥锁（虽然这*看起来*像 Python，但这实际上只是因为 Python 是伪代码的理想基础）：

```
def search (haystack, mutex, needle):
    lock mutex recursively

    if haystack == NULL:
        unlock mutex and return NULL

    if haystack.payload == needle:
        unlock mutex and return haystack

    if haystack.payload > needle:
        found = search (haystack.left, mutex, needle)
    else:
        found = search (haystack.right, mutex, needle)

    unlock mutex and return found 
```

另一种方法是将互斥锁和搜索分离为两个*单独*的函数，例如`search()`（公共）和`search_while_locked()`（很可能是私有）：

```
def private search_while_locked (haystack, needle):
    if haystack == NULL:
        return NULL

    if haystack.payload == needle:
        return haystack

    if haystack.payload > needle:
        return search_while_locked (haystack.left, needle)

    return search_while_locked (haystack.right, needle)

def search (haystack, mutex, needle):
    lock mutex non-recursively

    found = search_while_locked (haystack.right, needle)

    unlock mutex and return found 
```

虽然这*会*破坏递归解决方案的优雅，但我实际上更喜欢它，因为它减少了需要完成的工作量（无论工作量多么小，它仍然有效）。

易于使用公共/私有功能的语言可以很好地封装细节。您班级的*用户对您如何在班级**内*做事一无所知（或需要知识），他们只是调用公共 API。

但是，您*自己的*函数可以访问所有非公开内容，并且完全了解某些操作需要哪些锁。

* * *

另一种可能性与此非常相关，但*不是*递归的。

想一想您可能希望用户对您的数据执行的*任何有用的操作，这些操作要求在此期间没有其他人使用它。*到目前为止，您已经有了非递归互斥锁的经典案例。例如，清除队列中的所有条目：

```
def clearQueue():
    lock mutex
    while myQueue.first <> null:
        myQueue.pop()
    unlock mutex 
```

*现在*假设您发现它非常有用并想从您的析构函数中调用它，该析构函数*已经*锁定了互斥锁：

```
def destructor():
    lock mutex
    clearQueue()
    doSomethingElseNeedingLock()
    unlock mutex 
```

显然，对于非递归互斥锁，它会`clearQueue`在你的析构函数调用它之后锁定在第一行，这可能是你想要一个递归互斥锁的一个原因。

您*可以*使用上述提供锁定公共函数和非锁定私有函数的方法：

```
def clearQueueLocked():
    while myQueue.first <> null:
        myQueue.pop()

def clearQueue():
    lock mutex
    clearQueueLocked():
    unlock mutex

def destructor():
    lock mutex
    clearQueueLocked():
    doSomethingElseNeedingLock()
    unlock mutex and return 
```

但是，如果这些公共/私有函数对的数量很大，它可能会变得有点混乱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T08:15:31.930

除了使用实际递归函数的 paxdiablo 示例之外，不要忘记递归使用互斥锁并不一定意味着所涉及的函数是递归的。我发现递归互斥锁可用于处理复杂操作的情况，这些操作需要对某些数据结构是原子的，这些复杂操作依赖于更基本的操作，这些操作仍然需要使用互斥锁，因为基本操作也可以单独使用。一个示例可能类似于以下内容（请注意，代码只是说明性的 - 它没有使用在处理帐户和日志时可能真正需要的正确错误处理或事务技术）：

```
struct account
{
    mutex mux;

    int balance;

    // other important stuff...

    FILE* transaction_log;
};

void write_timestamp( FILE*);

// "fundamental" operation to write to transaction log
void log_info( struct account* account, char* logmsg)
{
    mutex_acquire( &account->mux);

    write_timestamp( account->transaction_log);
    fputs( logmsg, account->transaction_log);

    mutex_release( &account->mux);
}

// "composed" operation that uses the fundamental operation.
//  This relies on the mutex being recursive
void update_balance( struct account* account, int amount)
{
    mutex_acquire( &account->mux);

    int new_balance = account->balance + amount;

    char msg[MAX_MSG_LEN];
    snprintf( msg, sizeof(msg), "update_balance: %d, %d, %d", account->balance, amount, new_balance);

    // the following call will acquire the mutex recursively
    log_info( account, msg);

    account->balance = new_balance;

    mutex_release( &account->mux);
} 
```

在没有递归互斥锁的情况下做或多或少等效的事情意味着代码需要注意不要重新获取已经持有的互斥锁。一种选择是在数据结构中添加某种标志（或线程 ID）以指示互斥锁是否已被持有。在这种情况下，您实际上是在实现递归互斥锁 - 一项比起初看起来要正确的工作更棘手。另一种方法是传递一个标志，表明您已经获得了互斥锁作为参数（更容易实现和正确），或者只是有更基本的操作，假设互斥锁已经获得，并从更高级别的函数调用那些关于获取互斥锁的责任：

```
// "fundamental" operation to write to transaction log
//  this version assumes that the lock is already held
static
void log_info_nolock( struct account* account, char* log msg)
{
    write_timestamp( account->transaction_log);
    fputs( logmsg, account->transaction_log);
}

// "public" version of the log_info() function that
//      acquires the  mutex
void log_info( struct account* account, char* logmsg)
{
    mutex_acquire( &account->mux);
    log_info_nolock( account, logmsg);    
    mutex_release( &account->mux);
}

// "composed operation that uses the fundamental operation
//      since this function acquires the mutex, it much call the
//      "nolock" version of the log_info() function
void update_balance( int amount)
{
    mutex_acquire( &account->mux);

    int new_balance = account->balance + amount;

    char msg[MAX_MSG_LEN];
    snprintf( msg, sizeof(msg), "update_balance: %d, %d, %d", account->balance, amount, new_balance);

    // the following call assumes the lock is already acquired
    log_info_nolock( account, msg);

    account->balance = new_balance;

    mutex_release( &account->mux);
} 
```

# c# - Requests stuck in RequestAquireState Module Name: Session

> ID：10546872
> 
> 赞同：5
> 
> 时间：2012-05-11T07:00:53.513
> 
> 标签：c#, asp.net, iis

I have an asp.net 4.0 website which runs in IIS 7. Starting a couple of days ago, a lot of requests were stuck in RequestAquireState.

Do you have any idea where I can start look into finding a solution for my problem ? In my code ? in IIS ? Have you ever encountered something like this ?

![enter image description here](../Images/b04807e9a4e8c93dc0dbd1e5c675128e.png)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-10-20T13:28:37.833

这可能是一个 IIS 错误，请参阅[此处](https://support.microsoft.com/en-us/kb/2828841)的问题 6 。

# php - 将php变量值传递给javascript函数

> ID：10546873
> 
> 赞同：0
> 
> 时间：2012-05-11T07:00:58.297
> 
> 标签：php, javascript

我正在传递这样的 PHP 变量值：

```
<input type="button" name="delete" value="Remove" onclick="del(<?echo $arr1[0]?>);"/> 
```

`del()`是一个 Javascript 函数，例如：`$arr1[0]=234-675-90`$arr1[0] 的值是从 MYSQL 数据库中获取的，它在 mysql 中的数据类型是 varchar。

我正在使用 mysql_query 获取值。

我面临的问题是，当将值传递给 JavaScript 函数时，它会错误地使用它（例如：而不是 234-675-99 作为 -876）。是否需要进行任何转换才能将值从 PHP 传递到 JavaScript？

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T07:03:20.957

您应该将值作为字符串传递：

```
<input type="button" name="delete" value="Remove" onclick="del('<?echo $arr1[0]?>');"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T07:02:59.940

用于`json_encode()`将值转换为值 JavaScript：

```
<input type="button" name="delete" value="Remove" onclick="del(<?=htmlspecialchars(json_encode($arr1[0]))?>);"/> 
```

# sql-server-2008 - getting data by maximum witheffect date

> ID：10546877
> 
> 赞同：0
> 
> 时间：2012-05-11T07:01:08.170
> 
> 标签：sql-server-2008, sql-server-2008-r2

I have a table named table1 where datas are entered as below.

slno `scxid` exid `cv` `witheffectdate

2007 `213`35`5000`2012-03-01 00:00:00.000`

2008 `214`35`1000`2012-03-01 00:00:00.000`

2009 `215`35`500`2012-03-01 00:00:00.000`

2010 `213`35`7000`2012-04-01 00:00:00.000`

2011 `214`35`1500`2012-04-01 00:00:00.000`

2012 `215`35`700`2012-04-01 00:00:00.000`

I need to only display the data of exid=35 with maximum witheffectdate only. That is here display only datas from slno 2010 to 2012. Please helpme.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T07:03:48.420

```
select slno, scxid, exid, cv,  max(witheffectdate) 
from table1
where exid=35 
```

# javascript - 如何在可排序的两个 UL 之间重新排列 li id？

> ID：10546879
> 
> 赞同：1
> 
> 时间：2012-05-11T07:01:21.977
> 
> 标签：javascript, jquery, html, jquery-ui

**注意：更新的问题**

下面是HTML，

```
 <ul id="sortable1" class="connectedSortable">
  <li id="listItem_1">test1</li>
  <li id="listItem_2">test2</li>
  <li id="listItem_3">test3</li>
 </ul> 
```

第二个 UL 就像

```
 <ul id="sortable2" class="connectedSortable">
  <li id="secondlistItem_1">second test1</li>
  <li id="secondlistItem_2">second test2</li>
  <li id="secondlistItem_3">second test3</li>
 </ul> 
```

jquery 可排序代码就像，

```
jQuery(function() {
    jQuery( "#sortable1, #sortable2" ).sortable({
        connectWith: ".connectedSortable",
    update : function () { 

        jQuery.post(BASE_URL+"tabs/index", jQuery('#sortable1').sortable('serialize'),
            function(data) {
               //alert(data);         
            });                           
    }
    }).disableSelection();   
}); 
```

我在更新事件上调用 ajax 函数并使用 serialize.so 传递所有 li 位置，以便我能够轻松更新 li 位置。但是当我们从第二个 UL li 放置到第一个 UL LI 时，需要在调用 update 事件之前用新的 id 和位置更新新附加的 LI。

`sortable2`一旦用户更改了 LI，我如何重新排列 li id 和新附加的 li 来自或来自其自身？

例如，用户在两个 UL 之间进行一些更改，例如，

```
 <ul id="sortable1" class="connectedSortable">
  <li id="secondlistItem_1">second test1</li>
  <li id="listItem_1">test1</li>
  <li id="listItem_3">test3</li>
 </ul> 
```

上面的 UL 应该重新排列 li id

```
 <ul id="sortable1" class="connectedSortable">
  <li id="listItem_1">second test1</li>
  <li id="listItem_2">test1</li>
  <li id="listItem_3">test3</li>
 </ul> 
```

有可能在`receive`事件中做到这一点吗？请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T10:17:57.173

我正在使用以下方式重新生成我的ul li id，

```
jQuery(function() { 
    jQuery( "#sortable1, #sortable2" ).sortable({
        connectWith: ".connectedSortable",
        receive : function(event, ui){
           jQuery('#sortable1 li').each(function(index) {
                jQuery(this).attr('id','listItem_'+parseInt(index+1));
                console.log(index + ': ' + jQuery(this).attr('id'));
            });        
           jQuery('#sortable2 li').each(function(index) {
                jQuery(this).attr('id','secondlistItem_'+parseInt(index+1));
                console.log(index + ': ' + jQuery(this).attr('id'));
            })            
        },
        update : function () {

           var order1 = jQuery('#sortable1').sortable('serialize'); 
            jQuery.post(BASE_URL+"appbuilder/tabs/index", jQuery('#sortable1').sortable('serialize'),
                function(data) {
                       console.log(data);
                });       
            jQuery.post(BASE_URL+"appbuilder/tabs/index", jQuery('#sortable2').sortable('serialize'),
                function(data) {
                            console.log(data);
                });                    
        }
    }).disableSelection();   
}); 
```

# c# - 我们可以在 Session 中持有 DataModel(Poco) 吗？

> ID：10546883
> 
> 赞同：0
> 
> 时间：2012-05-11T07:01:44.597
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-3, entity-framework

我的`SessionContext`课程如下，我想将 User 属性设置为 SiteUserDomainModel（它是一个 POCO 模型）。但我在想，如果这是一个好主意吗？我可以将其替换为 SiteUserSessionModel（它将从 SiteUserDomainModel 映射）之类的东西吗？

实际上，我的问题是；在一个会话中，我们可以举办域（POCO）课程吗？

```
public static class SessionContext
{
   public static SiteUserDomainModel User
   {
      get
      {
         var user = HttpContext.Current.Session["CurrentUser"] as SiteUserDomainModel;
         return user;
                    }
      set
      {
         HttpContext.Current.Session["CurrentUser"] = value;
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T09:48:58.400

你能做到吗？是的，只要它们是 [Serializable]。

这是个好主意吗？不，尽量避免。

# ios - 在 monotouch 中处理 ObjC 异常

> ID：10546884
> 
> 赞同：5
> 
> 时间：2012-05-11T07:01:48.373
> 
> 标签：ios, exception-handling, xamarin.ios

有时我会从 Objective-C 代码中得到异常。在我的示例中，这些异常并不重要，我希望应用程序继续工作。问题是如何处理这些异常？

例如，当我使用 GeoCoder 类时，我的应用程序会不时崩溃。我真的不在乎地理编码器是否无法对位置进行地理编码并希望让我的应用程序保持活动状态。在 try-catch 块中包含地理编码器调用并不能解决问题。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T10:15:39.997

MonoTouch 在一定程度上尝试将 ObjC 异常转换为托管异常。这是通过为 ObjC 异常添加一个未处理的异常处理程序来完成的，并在其中抛出一个托管异常。这适用于辅助线程，但不适用于主线程，因为 iOS 在其主运行循环中有一个 try-catch 处理程序，如果有任何异常到达它，它将杀死您的应用程序（换句话说，异常已被处理，因此它永远不会到达 MonoTouch 的未处理异常处理程序）。

最好的方法是首先避免 ObjC 异常（Apple 的文档指出，ObjC 异常应该只用于真正的异常情况，因为它们有很多问题 - 例如内存泄漏很常见）。

显然不可能避免所有 ObjC 异常，因此我们尝试为仍然发生的情况寻找解决方法。为您的特定案例完成此操作的最佳方法是创建一个完整的测试案例并在此处打开错误报告：http: [//bugzilla.xamarin.com](http://bugzilla.xamarin.com)，附上测试案例。

# continuous-integration - 拆分 Sonar 测试运行和分析阶段

> ID：10546885
> 
> 赞同：0
> 
> 时间：2012-05-11T07:01:49.387
> 
> 标签：continuous-integration, jenkins, sonarqube

我们正在使用 Jenkins 并试图使我们项目的 CI 构建尽可能模块化，即检查/构建/测试/分析/部署的独立作业，然后可以在需要时链接在一起。

问题是我不知道如何让 Sonar 只运行测试或只运行分析。关于前者，我完全迷失了；对于后者，我知道我可以设置`sonar.dynamicAnalysis = reuseReport`. 但是我们的测试是 MSTest 格式，我们使用 Gallio 来运行它们，而且由于 Sonar 似乎只支持[surefire/cobertura/clover 报告文件](http://docs.codehaus.org/display/SONAR/Advanced+parameters#Advancedparameters-Dynamicanalysis)- 而不是 Gallio/MSTest - 我不确定如何让 Sonar 读取测试输出。

那么如何让 Sonar 拆分其测试和分析阶段呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T09:18:50.067

IMO，您可以让 Sonar 同时处理测试和分析 - 这将使您的配置更加简单（=> 如果在构建/测试和 Sonar 分析之间移动程序集，使用“reuseReport”可能会导致麻烦） .

所以基本上，我要说的是，在你的“分析”工作中，Sonar 会做测试+静态分析。这就是我们在 SonarSource 所做的，我们拥有：

*   一个持续集成过程，在每次提交时执行“checkout/build/test/deploy”
*   一个连续的检查过程，每晚都会“检查/构建/声纳”

# jquery - django 应用程序集成固定图像

> ID：10546886
> 
> 赞同：-2
> 
> 时间：2012-05-11T07:01:56.730
> 
> 标签：jquery, django, image

我正在开发一个**django**应用程序。我想在我的网站中集成 pin it 功能。

即，当用户将按钮（固定）拖动到任何具有图像的网站时。它会显示其中的所有图像

网站并要求将其固定。当用户单击固定它时，这些图像必须存储到数据库或

登录用户的文件系统。

请帮助整合这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T15:24:18.617

首先，我为我的要求道歉。

我成功地完成了固定功能。

我在onclick上设计了一个带有javascript的按钮，它重定向到一个js。在那个js中，我编写了函数来捕获当前网站的url并将其传递给我的视图（即django）。这个视图将处理这个url并获取所有img标签（我使用 beautifulsoup 来获取所有 img 标签）。并在弹出窗口中显示该 img 标签。当用户选择一个 img 时，它将被添加到我的存储中。

用户可以在书签工具栏中添加此按钮，并且每当用户想要固定图像时，他都可以单击此按钮。

# java - 算法的时间复杂度：计算时间后如何决定哪个算法

> ID：10546888
> 
> 赞同：0
> 
> 时间：2012-05-11T07:02:14.590
> 
> 标签：java, algorithm, time-complexity

今天我遇到了 msdn 中的博客，我注意到如何计算算法的时间复杂度。我完全理解如何计算算法的时间复杂度，但最后作者提到了以下几行

> 把我得到的所有东西都加起来
> 
> (N+4)+(5N+2)+(4N+2) = 10N+8
> 
> 所以上面代码的渐近时间复杂度是O(N)，也就是说上面的算法是线性时间复杂度算法。

那么作者怎么会说它是基于线性时间复杂度算法的。博客的链接

[http://blogs.msdn.com/b/nmallick/archive/2010/03/30/how-to-calculate-time-complexity-for-a-given-algorithm.aspx](http://blogs.msdn.com/b/nmallick/archive/2010/03/30/how-to-calculate-time-complexity-for-a-given-algorithm.aspx)。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T07:08:49.800

他说因为10N+8是一个线性方程。如果你画出这个方程，你会得到一条直线。尝试`10 * x + 8`在此网站上输入（[功能图](http://rechneronline.de/function-graphs/)）并亲自查看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T08:23:14.043

一个非常务实的规则是：

**当算法 si 的复杂度由 poly 表示时，复杂度**的`A*n^2+B*n+C` **阶数** （即 O(something) ）**等于变量 n 的最高阶**。

在`A*n^2+B*n+C`poly 中，顺序为 O(n^2)。

就像 josnidhin 解释的那样，如果 poly 有

*   1阶（即n）-称为线性
*   2 阶（即 n^2） - 称为二次
*   ... 等等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T07:12:13.220

笔者只是根据自己的经验选择了最合适的。您应该知道，计算算法的复杂性几乎总是意味着要找到一个**Big-Oh**函数，而该函数又只是给定函数的**上限（在您的情况下为****10N+8**）。

只有几种众所周知的复杂度类型：*线性*复杂度、*二次*复杂度[等](http://en.wikipedia.org/wiki/Time_complexity)。因此，计算时间复杂度的最后一步包括选择可用于给定函数的不太复杂的类型（我的意思是，*线性*比*二次*复杂，*二次比**指数*复杂，依此类推） ，它正确地描述了它的复杂性。

在您的情况下， O(n) 和 O(n^2) 甚至 O(2^n) 确实是**正确的答案**。[但是，在Big-Oh 符号定义](http://en.wikipedia.org/wiki/Big_O_notation)中完全适合的不太复杂的函数是**O(n)**，这是这里的答案。

这是一篇[真正的好文章](http://www.csee.umbc.edu/~chang/cs202.f98/readings/asymptotic/asymptotic.html)，充分解释了**Big-Oh 符号**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T07:14:08.690

时间复杂度升序（常见的）

```
O(1) - Constant
O(log n) - logarithmic
O(n) - linear
O(n log n) - loglinear
O(n^2) - quadratic 
```

注：N 无限增加

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T07:16:58.477

对于复杂性理论，您绝对应该阅读一些背景理论。它通常是关于渐近复杂度的，这就是为什么你可以删除较小的部分，只保留复杂度类。

`N`关键思想是，和`N+5`变得可以忽略不计之间的差异`N`真的很大。

有关更多详细信息，请从此处开始阅读：

[http://en.wikipedia.org/wiki/Big_O_notation](http://en.wikipedia.org/wiki/Big_O_notation)

# c - C - 跨进程处理事件

> ID：10546895
> 
> 赞同：0
> 
> 时间：2012-05-11T07:02:59.200
> 
> 标签：c, events

我试图弄清楚如何设置一个可以带到子进程中的事件。我需要这个来计算父进程与子进程通信所花费的时间。我得到的代码在这里：[http](http://pastebin.com/euVfSNeg) ://pastebin.com/euVfSNeg 问题是当 app2.exe 调用 app3.exe 时没有任何反应，因为事件没有被触发/监听（不知道哪个是案子）。我需要尽快解决这个问题，因为我必须在几个小时内提交。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T07:08:37.987

[MSDN 页面](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682396)说：

> `lpEventAttributes`指向`SECURITY_ATTRIBUTES`结构的指针。如果该参数为NULL，**则句柄不能被子进程继承**。
> 
> **如果 CreateEvent 的 lpEventAttributes 参数启用了继承，**则由 CreateProcess 函数创建的子进程可以继承事件对象的句柄

 **你`NULL`作为第一个参数传递。**

# ruby-on-rails - 通过使用 Rails 重构删除重复的表单代码

> ID：10546898
> 
> 赞同：0
> 
> 时间：2012-05-11T07:03:04.720
> 
> 标签：ruby-on-rails, ruby-on-rails-3, refactoring, ruby-on-rails-3.2, code-duplication

```
Finished in 15.53 seconds
←[31m86 examples, 4 failures←[0m 
```

失败的例子：

```
←[31mrspec ./spec/requests/user_pages_spec.rb:95←[0m ←[36m# User pages signup wi
th valid information should create a user←[0m
←[31mrspec ./spec/requests/user_pages_spec.rb:104←[0m ←[36m# User pages signup w
ith valid information after saving the user ←[0m
←[31mrspec ./spec/requests/user_pages_spec.rb:105←[0m ←[36m# User pages signup w
ith valid information after saving the user ←[0m
←[31mrspec ./spec/requests/user_pages_spec.rb:106←[0m ←[36m# User pages signup w
ith valid information after saving the user ←[0m 
```

不明白为什么我会收到此错误。我按照红宝石指南中的说明，问题 5 .. [http://ruby.railstutorial.org/chapters/updating-showing-and-deleting-users?version=3.2#sec:updating_deleting_exercises](http://ruby.railstutorial.org/chapters/updating-showing-and-deleting-users?version=3.2#sec:updating_deleting_exercises)

应用程序/视图/用户/new.html.erb

```
<%= provide(:title, 'Sign up') %>
<h1>Sign up</h1>

<div class="row">
<div class="span6 offset3">
<%= form_for(@user) do |f| %>
<%= render 'fields', f: f %>
<%= f.submit "Create my account", class: "btn btn-large btn-primary" %>
<% end %>
</div>
</div> 
```

应用程序/视图/用户/edit.html.erb

```
<%= provide(:title, 'Edit user') %>
<h1>Update your profile</h1>

<div class="row">
<div class="span6 offset3">
<%= form_for(@user) do |f| %>
<%= render 'fields', f: f %>
<%= f.submit "Save changes", class: "btn btn-large btn-primary" %>
<% end %>

<%= gravatar_for @user %>
<%= link_to "change", "http://gravatar.com/emails", :target => "_new"%>

</div>
</div> 
```

应用程序/视图/用户/_fields.html.erb

```
<%= render 'shared/error_messages' %>

<%= f.label :name %>
<%= f.text_field :name %>

<%= f.label :email %>
<%= f.text_field :email %>

<%= f.label :password %>
<%= f.password_field :password %>

<%= f.label :password_confirmation, "Confirm Password" %>
<%= f.password_field :password_confirmation %> 
```

当我不尝试解决重构此代码并使其重复时，我没有收到任何错误..所以我在想**/spec/requests/user_pages_spec.rb**并没有真正的问题..任何建议将不胜感激.

这很奇怪，因为该应用程序似乎没有任何问题（或者它似乎没有任何问题），但是它工作得非常好......它只是那个让我烦恼的错误。

-马克

# c# - 具有不同值的xml appendchild

> ID：10546900
> 
> 赞同：1
> 
> 时间：2012-05-11T07:03:17.393
> 
> 标签：c#, xml, appendchild, xmlnode

我正在尝试以编程方式写入 xml。

试图实现这样的目标：-

```
<module>
  <moduleCode>EIGA501</moduleCode>
  <moduleTitle>Introduction to 3D Graphics</moduleTitle>
  <credits>15</credits>
  <semester>1</semester>
  <assessmentDetails>
    <assessment>
      <assessmentName>Coursework1</assessmentName>
      <assessmentType>Coursework</assessmentType>
      <assessmentWeighting>25</assessmentWeighting>
    </assessment>
    <assessment>
      <assessmentName>Coursework2</assessmentName>
      <assessmentType>Coursework</assessmentType>
      <assessmentWeighting>35</assessmentWeighting>
    </assessment>
    <assessment>
      <assessmentName>Exam</assessmentName>
      <assessmentType>Exam</assessmentType>
      <assessmentWeighting>40</assessmentWeighting>
    </assessment>
  </assessmentDetails>
  <school>ECS</school>
</module> 
```

请注意，assesmentDetails 节点的格式非常精美，而我正在实现这一点：

```
<module>
  <moduleCode>someCode</moduleCode>
  <moduleTitle>someCourseTitle</moduleTitle>
  <credits>someCredits</credits>
  <semester>2</semester>
  <assesmentDetails>
    <assesment>
    </assesment>
    <assesment>
    </assesment>
    <assesment>
      <assesmentName>AssesmentName1AssesmentName2</assesmentName>
      <assesmentType>AssesmentType1AssesmentType2</assesmentType>
      <assesmentWeighting>12</assesmentWeighting>
    </assesment>
  </assesmentDetails>
  <school>ECS</school>
</module> 
```

如您所见，我成功地构建了 xml 的其余部分，我正在使用 for 循环尝试“动态地”构建评估部分。如图所示：

```
for (int i = 0; i < textboxComputer.Count; i++)
            {
                XmlElement newAssesment = document.CreateElement("assesment");
                newAssesmentD.AppendChild(newAssesment);

                TextBox tb1 = (TextBox)textboxComputer[i];
                TextBox tb2 = (TextBox)textboxP[i];
                TextBox tb3 = (TextBox)textboxPercent[i];

                XmlText assesmentN = document.CreateTextNode(tb1.Text);
                XmlText assesmentT = document.CreateTextNode(tb2.Text);
                XmlText assesmentW = document.CreateTextNode(tb3.Text);

                newAssesment.AppendChild(newAssesmentN);
                newAssesment.AppendChild(newAssesmentT);
                newAssesment.AppendChild(newAssesmentW);

                newAssesmentN.AppendChild(assesmentN);
                newAssesmentT.AppendChild(assesmentT);
                newAssesmentW.AppendChild(assesmentW); 
            } 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T07:31:03.330

如果可以使用 LinqToXml，则可以以这种方式添加节点。

```
XElement a = new XElement("assesment");
a.Add(new XElement("assesmentName", "name text"); 
```

你可以找到这样的`assesmentDetails`节点，

```
XElement root = XElement.Load(file);
XElement module = root.Elements("module")
             .FirstOrDefault(x => x.Element("moduleCode").Value == "code");
if(null != module)
{
    XElement assesmentDetails = module.Element("assesmentDetails");
    assesmentDetails.Add(a); // <-- Add your new assesment
} 
```

# jquery - jquery'如果与之交互'？

> ID：10546904
> 
> 赞同：2
> 
> 时间：2012-05-11T07:03:27.080
> 
> 标签：jquery, hide, show

我正在做一个“悬停偷看”脚本，希望大师能给我一些指导。请先阅读代码，然后阅读我的“代码说话”

```
$(".peek").mouseenter(function() {
    var $peek = $("#peek");
    if ($peek.data("active")) { return; }
    $peek.show().data("active", true);
    setTimeout(function() {
        $peek.hide().data("active", false);
    }, 1000);
}); 
```

我怎么能说：“如果 $peek 已被激活或 $peek 已被隐藏”这样做（）

我的最终目标是：

如果将鼠标悬停在 .peek 上，则显示 #peek 1 秒钟，然后如果您已看到 #peek，请禁用悬停在 .peek 上的功能，这样您就无法再看到 #peek。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T07:08:03.170

在`hide`你设置`active`为假。如果你不这样做，它只是`return`在显示之前，在任何后续悬停时，对吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T07:08:14.537

```
$(".peek").mouseenter(function() {
    var $peek = $("#peek");
    if (typeof $peek.data("active") !== "undefined") return;

    $peek.show().data("active", true);
    setTimeout(function() {
        $peek.hide().data("active", false);
    }, 1000);
}); 
```

在您的代码中，`if ($peek.data("active"))`检索`false`或`undefined`，而您只想运行其余代码（如果它是 ）`undefined`。

# c# - 数组作为参数传递？

> ID：10546912
> 
> 赞同：1
> 
> 时间：2012-05-11T07:04:22.187
> 
> 标签：c#, interface

我正在学习如何使用 C# 接口，我正在阅读这篇文章：http: [//www.codeproject.com/Articles/286863/I-Interface](http://www.codeproject.com/Articles/286863/I-Interface)

示例之一：

```
 public class TaskComposite : ITask
{
    public TaskComposite(params ITask[] tasks)
    {
        this.composedTasks = new List<ITask>();
        if(tasks != null)
        {
            foreach(var task in tasks)
                AddTask(task);
        }
    }

    public void Do()
    {
        foreach(var task in this.composedTasks)
            task.Do();
    }

    public void AddTask(ITask task)
    {
         if(task != null)
             this.composedTasks.Add(task);
    }

    private List<ITask> composedTasks;
} 
```

描述说：

> 我们可以将一组任务组合在一起以串行执行。

我创建了一个 Windows 窗体作为创建 TaskComposite 类的新实例，但是接下来我应该做什么？

```
public partial class FormInterface : Form
{
    public FormInterface()
    {
        InitializeComponent();
    }

    private void FormInterface_Load(object sender, EventArgs e)
    {
        ITask[] TaskAry = new ITask[] { };
        TaskAry[0] = new TaskClass().Do(); //<=Error
        TaskComposite tc = new TaskComposite(TaskAry);
    }

    class TaskClass : ITask
    {
        public void Do()
        {
            Console.WriteLine(DateTime.Now.ToString());
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T07:12:41.657

初始化数组，方法`Do`返回`void`

```
// wrong
ITask[] TaskAry = new ITask[] { }; 
TaskAry[0] = new TaskClass().Do();

// correct
ITask[] TaskAry = new ITask[] { new TaskClass() };  
TaskAry[0].Do();

// better
// TaskComposite constructor accepts param array
TaskComposite tc = new TaskComposite(new TaskClass()); 
tc.Do(); // execute passed instance of TaskClass 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T07:14:55.430

宁愿做这样的事情：-

```
private void FormInterface_Load(object sender, EventArgs e)
{
ITask[] TaskAry = new[]{ new TaskClass() };
TaskComposite tc = new TaskComposite(TaskAry);
tc.Do(); //This Will Start Your Task, In Case you Want To Start It Here.
}

class TaskClass : ITask
{
public void Do()
{
    Console.WriteLine(DateTime.Now.ToString());
}
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-11T07:41:11.817

你这里有几个错误。

首先，当你创建一个数组时，你应该指定它的大小，或者初始化它。这是集合（具有可变大小）和数组之间的区别。所以，你应该提供尺寸

```
ITask[] TaskAry = new ITask[1]; 
TaskAry[0] = new TaskClass(); 
```

或初始化（大小将由编译器计算）：

```
ITask[] TaskAry = new ITask[] { new TaskClass() }; 
```

但是在您的情况下，何时`params ITask[] tasks`使用，您可以简单地传递任务列表：

```
TaskComposite tc = new TaskComposite(new TaskClass()); 
```

Pattern [Composite](http://en.wikipedia.org/wiki/Composite_pattern)允许您将一组对象视为单个对象。在您的情况下，此处的复合任务允许您将多个任务视为一个任务对象。因此，如果没有复合任务，您将需要使用任务的数组/集合并手动执行每个任务。像这样：

```
ITask[] tasks = new ITask[] { new TaskClass(), new TaskClass() };
foreach(ITask task in tasks)
    task.Do(); 
```

使用复合任务，您无需遍历所有任务：

```
ITask compositeTask = new TaskComposite(new TaskClass(), new TaskClass());
compositeTask.Do(); // executes all tasks 
```

您可以在需要简单 ITask 的地方传递复合任务。没有人会知道实际上有一堆任务。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-11T07:11:08.963

因为你没有指定里面的大小

```
 ITask[] TaskAry = new ITask[10]; //Specify the size or specify a value in {}
    TaskAry[0] = new TaskClass(); //Also this interface may hold an object of TaskClass
    TaskComposite tc = new TaskComposite(TaskAry); 
```

# php - mysqli_num_rows() 期望参数 1 是 mysqli_result 地理位置

> ID：10546913
> 
> 赞同：1
> 
> 时间：2012-05-11T07:04:26.327
> 
> 标签：php, mysqli

我真的不知道我做错了什么。我想计算查询中的行数。我的 id 从 1 开始到 ... step 1，所以最大的数字是最后一条记录。我只想让脚本在 de DB 的最后一条记录上运行。所以这是我的代码。

```
public function saveLongLan()
    {
        define("MAPS_HOST", "maps.google.com");
        define("KEY", "MYKEY");

        $link = mysql_connect('localhost', 'root', 'root');
        if (!$link) {
         die('Not connected : ' . mysql_error());
        }

        // Set the active MySQL database
        $db_selected = mysql_select_db('Foodsquare', $link);
        if (!$db_selected)  
        {
            die("Can\'t use db : " . mysql_error());
        }

        $query = "SELECT * FROM tblPlaces WHERE 1";
        $result = mysql_query($query);
        $row_cnt = mysqli_num_rows($result);

            if (!$result) 
                {
                    die("Invalid query: " . mysql_error());
                }

        $delay = 0;
        $base_url = "http://" . MAPS_HOST . "/maps/geo?output=xml" . "&key=" . KEY;

        while ($row = @mysql_fetch_assoc($result)) 
            {
                $geocode_pending = true;

                    while ($geocode_pending) 
                        {
                            $address = $row["Street"];
                            $id = $row["Id"];
                            $request_url = $base_url . "&q=" . urlencode($address);
                            $xml = simplexml_load_file($request_url) or die("url not loading");

                            $status = $xml->Response->Status->code;
                            if (strcmp($status, "200") == 0) 
                                {
                                      // Successful geocode
                                      $geocode_pending = false;
                                      $coordinates = $xml->Response->Placemark->Point->coordinates;
                                      //explode functie breekt een string af vanaf een bepaald teken en stopt hem dan in een array
                                      $coordinatesSplit = explode(',', $coordinates);
                                      // formaat: Longitude, Latitude, Altitude
                                      $lat = $coordinatesSplit[1];//getal = plaats in array
                                      $lng = $coordinatesSplit[0];

                                      $query = sprintf("UPDATE tblPlaces " .
                                                " SET lat = '%s', lng = '%s' " .
                                                " WHERE id = '". $row_cnt . "' LIMIT 1;",
                                             mysql_real_escape_string($lat),
                                             mysql_real_escape_string($lng),
                                             mysql_real_escape_string($id));
                                      $update_result = mysql_query($query);
                                          if (!$update_result) 
                                            {
                                            die("Invalid query: " . mysql_error());
                                            }
                                } else if (strcmp($status, "620") == 0) 
                                    {
                                          // sent geocodes too fast
                                          $delay += 100000;
                                    } 
                                    else 
                                    {
                                        // failure to geocode
                                        $geocode_pending = false;
                                        echo "Address " . $address . " failed to geocoded. ";
                                    echo "Received status " . $status . " \n";
                                    }
                                usleep($delay);
                        }
            }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T07:19:50.470

您的查询不正确`$query = "SELECT * FROM tblPlaces WHERE 1"`；

您应该在 where 子句之后指定列名，以便与值进行比较，例如：`WHERE column_name = 1`或类似的东西。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-11T07:11:02.203

您正在使用 mysqli_num_rows($result) 但您没有使用 MySQLi。

改变：

```
$row_cnt = mysqli_num_rows($result); 
```

至：

```
$row_cnt = mysql_num_rows($result); 
```

你应该很高兴。

# php - FB 'pages' 有 $pageID，什么是网站等价物？

> ID：10546915
> 
> 赞同：1
> 
> 时间：2012-05-11T07:04:29.540
> 
> 标签：php, facebook, facebook-like, tracking, externalinterface

我正在尝试为我的网站编写一个简单的应用程序并在 1 点上苦苦挣扎。

Facebook页面有；

```
$pageID = 'dorimedia'; 
```

一个网站有什么是平等的？我想获得显示外部网站被“喜欢”多少次的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T07:13:16.660

没有什么。您可以在完整路由中使用域名或域名+路径，但本身没有短 ID。

*   [http://www.google.com](http://www.google.com)可能是`id`
*   [http://www.google.com/route](http://www.google.com/route)也可以是`id`

如果您需要更短的内容，并且您不一定可以阅读，您可以对其进行哈希处理或对完整的 url 应用一些加密算法以获得更短的`id`，请尝试查看`md5`、`sha1`或`hash`方法（假设您使用 php ）

**更新** 如果您需要的是一个网站有多少 facebook，那么 google 有一个直接用于此的 API，如下所示：

```
http://api.facebook.com/restserver.php?method=links.getStats&urls=www.google.com 
```

这会产生一个 xml 响应，其中包括评论、喜欢和其他有趣的信息。例如，谷歌有以下回应：

```
<links_getStats_response xmlns="http://api.facebook.com/1.0/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://api.facebook.com/1.0/ http://api.facebook.com/1.0/facebook.xsd" list="true">
     <link_stat>
        <url>www.google.com</url>
        <normalized_url>http://www.google.com/</normalized_url>
        <share_count>2095550</share_count>
        <like_count>795778</like_count>
        <comment_count>705595</comment_count>
        <total_count>3596923</total_count>
        <click_count>265614</click_count>
        <comments_fbid>381702034999</comments_fbid>
        <commentsbox_count>307</commentsbox_count>
    </link_stat>
</links_getStats_response> 
```

然后是从 XML 中提取信息的问题，就像这样很容易：

```
$url = "http://api.facebook.com/restserver.php?method=links.getStats&urls=".urlencode($source_url);
$xml = file_get_contents($url);
$xml = simplexml_load_string($xml);
$shares =  $xml->link_stat->share_count;
$likes =  $xml->link_stat->like_count;
$comments = $xml->link_stat->comment_count;
$total = $xml->link_stat->total_count;
$max = max($shares,$likes,$comments); 
```

[点击这里查看**来源**](http://allfacebook.com/calculate-facebook-like_b44023)

# oracle - Oracle 数据库备份错误

> ID：10546918
> 
> 赞同：0
> 
> 时间：2012-05-11T07:05:03.063
> 
> 标签：oracle, oracle10g, oracle11g, oracle-apex

以前我用过`oracle 10g version`。但今天我卸载`oracle 10g version`并安装了`oracle 11g version`。之后，我安装`apex_4.1.1_en`并创建了新的工作区并安装了 apex 备份。然后我尝试安装数据库备份（我将备份作为模式备份）。但我无法成功安装备份。我无法成功创建表。我收到错误消息`tablespace does not exist`，如下所示。

```
tablespace 'APEX_11560722039238920' does not exist 
```

我该如何解决这个问题？我怎样才能安装我的数据库备份？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T08:57:42.557

有更多方法可以解决此问题，具体取决于您如何进行导出。如果您使用旧的 exp 实用程序，您可以创建一个 ddl 脚本并更改脚本中的表空间名称，运行该脚本并重做 imp。用于`imp help=y`查看 cmdline 选项，查找 indexfile。

如果您使用 expdp，则之前的修复是有效的，但您也可以使用 remap tablespace 指令将表/索引创建重定向到您选择的表空间。用于`impdp help=y`所需的命令行选项。

由于这是您自己的数据库，因此处理此问题的最简单方法是创建缺少的表空间。

```
create tablespace APEX_11560722039238920 datafile '/where/you/want/APEX_11560722039238920.dbf' size 512m autoextend on next 512m maxsize 2g;
alter user your_apex_owner quota unlimited on APEX_11560722039238920; 
```

# java - 在编写文本文件时遇到问题

> ID：10546919
> 
> 赞同：0
> 
> 时间：2012-05-11T07:05:04.107
> 
> 标签：java, file

我正在使用`FileWriter`该类在 Java 中编写文本文件。

"\n" 不起作用，所以为了克服这个问题，我使用了`BufferedWriter`class 及其方法`newLine()`。它帮助我进入下一行，但是，它总是继续修改我以前的文件。我希望每次运行程序时都会生成一个新文件！

请有人在这方面帮助我。为什么“\n”不起作用？我的问题的可能解决方案是什么？

```
FileWriter write = new FileWriter ("D:/final project/report.txt", true);
BufferedWriter bufferedWriter = new BufferedWriter (write);

bufferedWriter.write("Current Time : " + hour + ":"+ minute + ":" + second + " " + am_pm);
bufferedWriter.newLine();
bufferedWriter.write("Current Date : " + date + "/"+ (month+1) + "/" + year + "  d/m/y ");
bufferedWriter.newLine(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T07:11:14.883

你真的有两个完全正交的问题......

> 我希望每次运行程序时都会生成一个新文件！

那么目前这就是你创建的方式`FileWriter`：

```
new FileWriter ("D:/final project/report.txt", true); 
```

那是使用[带有`append`参数](http://docs.oracle.com/javase/7/docs/api/java/io/FileWriter.html#FileWriter%28java.io.File,%20boolean%29)的构造函数重载，您将其设置为`true`...建议您*要附加到现有文件*。

如果您*不想*附加到现有文件，为什么要指定`true`该参数？要么指定`false`，要么只使用没有该参数的重载，并默认覆盖文件。

就个人而言，我强烈建议不要`FileWriter`直接使用 - 我会使用`FileOutputStream`包装在 an 中`OutputStreamWriter`，以便您可以指定编码。否则它将使用平台默认编码，这在 IMO 很少是一个好主意。（当我有选择的时候，我个人倾向于使用 UTF-8。）

> 为什么“\n”不起作用？

它的工作原理是将`\n`字符 (U+000A) 写入文件。但是，无论您用来*读取*该文件的任何内容，都可能不会将其视为换行符 - 因为 Windows 上的换行符通常是`\r\n`. `BufferedWriter.newLine()`将使用平台默认换行符，这就是它起作用的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T07:11:40.617

使用正确的行分隔符：

```
String lineSep = System.getProperty("line.separator"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T07:24:14.790

您可以使用 FileOutputStream 并将其包装在 DataOutputStream

```
 FileOutputStream fo=new FileOutputStream("c:/xyz/report.txt");
    DataOutputStream ds=new DataOutputStream(fo);

    ds.writeBytes("Current Time : " +new Date() );
    ds.writeBytes(System.getProperty("line.separator")+"Current Date : " +new Date() ); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-11T07:12:10.673

Java 用回车和换行来终止每一行，而不仅仅是换行。也就是说，Java 使用“\r\n”而不是“\n”终止。

# c# - 在类库中实例化 Castle Windsor 容器时的最佳实践是什么？

> ID：10546920
> 
> 赞同：5
> 
> 时间：2012-05-11T07:05:04.370
> 
> 标签：c#, inversion-of-control, castle-windsor, .net-assembly, castle

我想知道在类库中实例化城堡 Windsor 容器的最佳位置在哪里。

我应该简单地在我正在使用的类的构造函数中执行它，还是我不知道的程序集有一个入口点？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T08:51:05.900

注入对象图的配置完全取决于实际使用它的应用程序的需求。使用容器的目的是能够在运行时配置依赖项——一个库不知道将如何使用它。

库类的编写方式应该允许您使用您喜欢的任何容器，或者消费者认为合适的穷人依赖注入。将库耦合到容器是一种气味。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-11T07:59:45.753

我可能会说你不应该直接在你的类库中使用容器。您的类库应该在库中的类之间具有依赖关系。应用程序（应用程序图的前端/根）将使用容器来解析所有依赖项，包括那些到您的类库中的依赖项。恕我直言，`IoC`在类库中使用类似于 ServiceLocator。

# c# - 指定在 teamcity 上运行的 nunit 测试的顺序

> ID：10546927
> 
> 赞同：2
> 
> 时间：2012-05-11T07:05:23.543
> 
> 标签：c#, nunit, teamcity

是否可以指定在 teamcity 中运行 nunit 测试的顺序？

如果是，该怎么做？这些测试数据量很大，我想避免每次都为它们填充数据。数据填充在测试夹具中，如果订购有效，我不需要为每个测试设置我的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T09:40:56.330

总结评论，测试按字母顺序执行。但是，我不想用前缀重命名测试，以便它们以某种特定的顺序运行。考虑到 Jon 的评论，我将数据设置从测试夹具移到了测试设置。

# facebook - 应用程序的 Facebook 页面

> ID：10546930
> 
> 赞同：0
> 
> 时间：2012-05-11T07:05:35.577
> 
> 标签：facebook, facebook-page

首先是我拥有的：我有一个可以添加到 Facebook 页面但不应该直接访问的 Canvas 应用程序。我的意思是没有用户应该能够直接打开应用程序。仅通过添加我的应用程序的页面上的“选项卡”。

但是当我搜索该应用程序并单击它时，我被重定向到该应用程序而不是（就像它是一段时间/几个月前一样）到一个我可以选择“添加到我的页面”的页面。

（我不知道如何更好地描述它。我希望你明白我的意思。）

我怎样才能让这个“页面”回到我能够将应用程序添加到我的其他粉丝页面之一的地方？

提前致谢。

# sql - SQL 排序规则与来自 Delphi 应用程序的临时表和过程参数冲突

> ID：10546931
> 
> 赞同：3
> 
> 时间：2012-05-11T07:05:35.423
> 
> 标签：sql, delphi, collation

几年来我一直在使用 MS SQL，在我以前的工作中从未遇到过这样的事情。但是在我现在工作的地方，我遇到了一个错误，我真的很想知道原因。

我制作了一个存储过程，并在我的 Delphi 5（是的，我知道）应用程序中使用一些参数调用它。这在两个数据库（不同时间的副本）上运行良好。但是现在我在另一个数据库（又是一个副本）上尝试了它，但它给了我以下错误：

```
Cannot resolve the collation conflict between "Latin1_General_CI_AS" and 
"SQL_Latin1_General_CP1_CI_AS" in the equal to operation. 
```

我通过创建一个临时表然后尝试插入一些数据来得到这个。我什至不加入。有趣的是：当我删除整个 WHERE 子句时，它就起作用了。当我离开它时（尽管它只将参数与一张表进行比较），它失败了。

```
create table #TOP (EDAID int, ParentID char(30), ChildID char(30),
    Position int, OrgQty_modified_manually bit) 
```

这失败了：

```
insert into #TOP
select EDAID, ParentID, ChildID, Position, OrgQty_modified_manually
from EDA_SOBOM
where OrderNr = @OrderNr
    and Position = @Position
    and LN = @LN
    and DL = @DL
    and rtrim(ChildID) = @CurrentPart
    and rtrim(ParentID) = @ParentID 
```

这有效：

```
insert into #TOP
select EDAID, ParentID, ChildID, Position, OrgQty_modified_manually
from EDA_SOBOM 
```

过程参数声明如下：@PartID char(30)、@Position int、@OrderNr char(8)、@LN char(2)、@DL char(2)、@ParentID char(30)、@Modified bit输出

我在这里找到了解决方案：[Cannot resolve the collat​​ion conflict between "SQL_Latin1_General_CP1_CI_AS" and "Latin1_General_CI_AS" in the equal to operation](https://stackoverflow.com/questions/1607560/cannot-resolve-the-collation-conflict-between-sql-latin1-general-cp1-ci-as-and)。

所以我在 CREATE 之后添加了这个：

```
ALTER TABLE #TOP
  ALTER COLUMN ParentID
    VARCHAR(30) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL

ALTER TABLE #TOP
  ALTER COLUMN ChildID
    VARCHAR(30) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL 
```

这使得整个事情再次起作用......但我不明白为什么只有参数比较的 WHERE 子句会失败......**参数也可以有排序规则吗？**

DB 有排序规则 SQL_Latin1_General_CP1_CI_AS。表 EDA_SOBOM 在 char 列上也有排序规则 SQL_Latin1_General_CP1_CI_AS。我通过以下查询找到了这一点：

```
SELECT col.name, col.collation_name
FROM sys.columns col
WHERE object_id = OBJECT_ID('EDA_SOBOM') 
```

除了数据库级别和列级别之外，还有其他地方可以设置排序规则吗？

我想知道这是怎么回事...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T07:56:19.590

任何比较不同排序规则字符串的运算符都会出现排序规则冲突，即您选择的等号。

TempDb 采用服务器默认排序规则，而您的真实 Db 可能有不同的排序规则，导致使用 DDL 创建的任何临时表都有排序规则差异。

您可以在应该修复它的相等运算符之后添加“collat​​e database_default”子句。或者您可以使用以下方法创建临时表：

```
select top 0 EDAID, ParentID, ChildID, Position, OrgQty_modified_manually 
into #top
from EDA_SOBOM 
```

这将强制临时表列从您的数据库中获取数据类型（和排序规则）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T08:13:42.310

有一个服务器级排序规则设置作为所有系统数据库的默认设置。正如您所说，有一个数据库级别的排序规则。列和表达式可以定义排序规则。

当数据库与系统数据库（尤其是 tempdb）具有不同的排序规则时，会出现许多问题。

在不重复我同意的 Peter Wishart 的回答的情况下，我只想补充一点，在开发产品时，您应该决定要允许的整理灵活性级别。为避免出现问题，您必须围绕该选择设计代码。如果您不要求您的数据库对象与服务器排序规则一致，那么您必须应用排序规则修饰符或控制在 tempdb 中创建表、使用系统表或完成比较时使用的排序规则。这可能是大型产品中的大量代码。

SQLServer 中经常忽略另一种排序规则。这是任何 .Net SP 或函数中使用的默认排序规则。该排序规则是根据 SQLServer 进程的 Windows 用户配置文件定义的。它在文档中通常不称为排序规则，它是 Windows 区域设置的一部分。在注册表中称为 LCID。

因此，即使您的数据库、sqlserver、表、列排序规则都匹配，如果您在 CLR 存储过程代码中进行字符串比较，您仍然可能会出现不匹配，除非您编写该代码来避免它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-20T19:54:49.263

要解决排序规则冲突，请在“=”运算符周围添加*“COLLATE DATABASE_DEFAULT”关键字。*

```
SELECT col.name, col.collation_name
FROM sys.columns col
WHERE object_id COLLATE DATABASE_DEFAULT = OBJECT_ID('EDA_SOBOM') COLLATE DATABASE_DEFAULT 
```

希望这可以帮助...

# text - 在 csv 字段中插入多行文本

> ID：10546933
> 
> 赞同：17
> 
> 时间：2012-05-11T07:05:39.270
> 
> 标签：text, csv, multiline, export-to-csv

我想在 CSV 字段中插入多行文本数据。

前任：

```
var data = "\nanything\nin\nthis\nfield";
var fields = "\"Datafield1\",\"Datafield2:"+data+"\"\n"; 
```

当我保存`fields`到**csv**文件并使用 MS Excel 打开它时，我只能看到第一列。但是当我使用文本编辑器打开文件时，我看到：

> "Datafield1","Datafield2: 此 字段 中的
> 任何内容"

我不知道我是否违反了**CSV**标准。即使我反对请帮助我解决问题。

谢谢...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-11T07:09:39.953

默认情况下，MS Excel 使用分号作为分隔符。使用`;`，你会看到：

![在此处输入图像描述](../Images/da080f75c3e27bde7da08497dd035503.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-15T19:42:05.400

在这里，我放置了一些文本，然后是*NewLine*字符，然后是更多文本，并且整个字符串必须引用到 csv 文件中的字段中。

不要使用 CR，因为 EXCEL 会将它放在下一个单元格中。

> ""2" + NL + "日期""

当您调用 EXCEL 时，您将看到这一点。您可能必须自动调整高度才能看到整个单元格。

2

日期

这是Basic中的代码

```
CHR$(34,"2", 10,"DATE", 34) 
```

# javascript - Dreamweaver 缩小插件

> ID：10546937
> 
> 赞同：3
> 
> 时间：2012-05-11T07:05:54.287
> 
> 标签：javascript, jquery, plugins, dreamweaver, minify

是否有人知道可以与 Dreamweaver 或任何其他编码实用程序一起使用的插件，可以在您上传文件时缩小您的 javascript/css？

因此，例如，我创建了一个名为 的文件`functions-global.js`，然后，当我上传文件时，它会按原样上传该文件并创建一个缩小的副本，名为`functions-global.minified.js`?

我无法想象这将是一个非常难写的插件，只要你有这里用于 js - [Compress Javascript](http://jscompress.com/)的缩小算法，而这个用于 CSS - [Compress CSS](http://www.minifycss.com/css-compressor/)

我纯粹出于熟悉目的使用dreamweaver，如果有其他软件可以做到这一点，请告诉我。

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T07:12:14.763

这是一个用于缩小 js 的 Dreamweaver 扩展：

[http://www.dwbooster.com/miscellaneous/javascript-minify](http://www.dwbooster.com/miscellaneous/javascript-minify)

# c++ - 在 C++ builder XE2 中使用 Windows.Management 命名空间

> ID：10546938
> 
> 赞同：3
> 
> 时间：2012-05-11T07:05:57.397
> 
> 标签：c++, wmi, c++builder-xe2

我对 Embarcadero XE2 上的 C++ 非常陌生。目前我想转移以下课程 [http://weblogs.asp.net/whaggard/archive/2006/02/11/438006.aspx](http://weblogs.asp.net/whaggard/archive/2006/02/11/438006.aspx)

到 c++ 版本。

但是我想知道我可以在 Embarcadero XE2 上使用 System.Management，或者我仍然必须使用 wbemidl.h 来处理 WMI。（我刚刚试了一下，它返回错误：管理不是系统的成员）

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T14:50:47.400

是`System.Management`.Net命名空间，C++ Builder不是.Net开发工具，所以不能在c++ builder下使用这个命名空间。从 C++ 访问 WMI 的自然方法是使用 wbemcli.h 或 wbemidl.h 文件中定义的接口直接使用 COM。

# jquery - 延迟 5 秒后用文字替换图像

> ID：10546946
> 
> 赞同：3
> 
> 时间：2012-05-11T07:06:23.247
> 
> 标签：jquery, image, html, text, replace

**目标**
使用 jQuery 延迟 5 秒后将一个 div 替换为另一个。

**描述**
我想在一个 div 中显示一个图像 5 秒，然后它应该被另一个 div 中的文本替换。

**HTML 代码**

```
<div id="outer">Image here</div>
<div id="text">Text here</div> 
```

**jQuery 代码**

```
<script type="text/javascript">
    $(document).ready(function()
    {
        setTimeout(function()
        {
            $("div#outer").fadeOut("slow", function ()
            {
                $("div#outer").remove();
            });
         }, 5000);
     });
</script> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T07:09:02.110

尝试这个：

```
<script type="text/javascript">
        $(document).ready(function()
        {
            setTimeout(function()
            {
                $("div#outer").fadeOut("slow", function ()
                {
                    $("div#outer").hide();
                    $("div#text").show();
                });
             }, 5000);
         });
    </script> 
```

或者，如果您实际上是在尝试将包含的文本移动`div text`到中`div outer`，请执行以下操作：

```
<script type="text/javascript">
            $(document).ready(function()
            {
                setTimeout(function()
                {
                    $("div#outer").fadeOut("slow", function ()
                    {
                        $("div#outer").html($("div#text").html()); //.html or .text
                    });
                 }, 5000);
             });
        </script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T07:15:00.467

如果您的问题是仅在图像消失后才显示文本 - 那么这里有一个选项可以让您不必对文本容器执行任何 JavaScript 工作。

只需将图像容器放在文本上，然后像现在一样淡出，如下所示：

* * *

​<strong>JavaScript

```
$(function() {
    setTimeout(function()
    {
        var $el = $('div#outer');        
        $el.fadeOut("slow", $el.remove);
     }, 5000);
});​ 
```

**HTML**

```
<div class="transition-wrapper">
    <div id="outer">Image here</div>
    <div id="text">Text here</div>
</div> 
```

**​CSS**

 ***请注意，此处的颜色仅用于说明*

```
.transition-wrapper {
    position: relative;    
    width: 500px;
    height: 500px;
}
#outer {
    position:absolute;
    z-index: 100;
    width: 500px;
    height: 500px;
    background: red;
}
#text {
    background: blue;
    height: 100%;
    width: 100%;
} 
```

**JSFiddle**

[http://jsfiddle.net/mJUzr/](http://jsfiddle.net/mJUzr/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T07:22:49.680

这是演示链接：http: [//jsfiddle.net/pHJgP/8/](http://jsfiddle.net/pHJgP/8/)

**HTML 代码：**

```
<div id="outer"><img src="http://existdissolve.com/wp-content/uploads/2010/08/microsoft-logo-64x64.png" alt="" /></div>
<div id="text" style="display:none">Text here</div> 
```

**jQuery代码：**

```
$(document).ready(function()
    {
        setTimeout(function()
        {
            $("div#outer").fadeOut("slow", function ()
            {
                $("div#outer img").remove();                
                $("div#outer").html($("div#text").text());
                $("div#outer").show();
            });
         }, 5000);
     }); 
```

希望这对你有帮助。**

# objective-c - 在 NSDictionary 中存储 indexPath

> ID：10546947
> 
> 赞同：2
> 
> 时间：2012-05-11T07:06:27.747
> 
> 标签：objective-c, ios, nsdictionary

我想存储一个`NSIndexPath`数组`NSDictionaries`供以后比较。

我知道我可以通过将 2 个数字存储为 2 个键来做到这一点

```
NSNumber *selRow = [[NSNumber alloc] initWithInteger:indexPath.row]; 
NSNumber *selSection = [[NSNumber alloc] initWithInteger:indexPath.section]; 
```

但是这样我就不能一次过滤过滤器数组。

有没有办法直接存储（并取回）`NSIndexPath`？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T07:08:49.347

为什么不直接保存呢？`NSIndexPath`是一个对象，所以没关系。您可以在[继承](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSIndexPath_Class/Reference/Reference.html)自`NSObject`.

# directx - 我可以使用 DirectX 11 开发应用程序吗

> ID：10546950
> 
> 赞同：0
> 
> 时间：2012-05-11T07:06:39.163
> 
> 标签：directx, directx-11

我想知道我们是否可以使用 DirectX 11 开发 C#、WPF 应用程序。我有一个使用 DirectX 编写的应用程序（中等大小）。我们需要使用 Directx 11 中的功能，例如并行渲染。是否可以使用 DirectX 11 开发应用程序？如果是的话，任何人都可以为此提供一些示例应用程序吗？我们不能选择像 SlimDX 这样的其他选项，因为我们负担不起重写整个代码的费用。

请建议对我来说最好的选择是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T19:59:59.063

我自己没有尝试将 C# 与 DirectX 一起使用，但根据我所读到的，您对 DirectX 和 C# 的主要选择是 SlimDX（您不计入）或 XNA，许多用户似乎发现缺乏功能，尤其是来自较新版本的 DirectX。

# vba - 比较行以识别匹配和不匹配

> ID：10546951
> 
> 赞同：0
> 
> 时间：2012-05-11T07:06:40.110
> 
> 标签：vba, excel

我有一张超过 10000 行的工作表，但数据来自 2 个来源，因此相同的唯一键组合存在重复项。因此，假设 A 列和 B 列是唯一标识符。C 到 K 列包含有关由唯一键指定的项目的数据。我需要检查是否第二次出现唯一键组合，如果是，第二次出现的 C 到 K 列中的数据是否与第一次出现相同。如果它们相同，则将该行复制到工作表 2。

> 如果 a1 = a2 和 b1 = b2 然后检查 c1:k1 是否等于 c2:k2 -> 复制到工作表 2

我需要创建单独的匹配和不匹配列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T20:48:41.733

Have you tried using vlookup? When you do this in both directions, you know what the differences are between the two lists. When doing this, make sure that things like spaces are exactly the same. Try using trim on both lists first to remove extra spaces.

# c++ - C++。写入相关文件后，我无法显示内容

> ID：10546952
> 
> 赞同：1
> 
> 时间：2012-05-11T07:06:40.630
> 
> 标签：c++, file, fstream, seek, fixed-length-record

我可以写入相对文件¹，然后当我尝试读取内容并将其显示在屏幕上（以检查数据是否实际进入文件）时，我没有我认为文件中已经存在的记录. 我正在使用 Dev-C++。任何帮助将不胜感激。代码如下；

```
#include <iostream>   //   cin, cout
#include <iomanip>
#include <fstream>
#include <conio.h>
using namespace std;

#define SIZE 10

struct     client        // Client record
{   
    int    account;      // from 1 to SIZE
    char   name[20];
    double balance;
};

void make_file(char filename[], int number_of_records)
{
  cout << "\nMAKE_FILE: Creating a blank relative file " << filename
     << " containing " << number_of_records << " records.";
  ofstream OS(filename, ios::out);
  if(!OS) {cerr << "File open error." << endl; exit(1);}

  client blank={0, "", 0.0}; // Create an empty client record
  while(number_of_records--)
  OS.write((char *)&blank, sizeof(blank));
  cout << "\nFile created.";
  OS.close();
}
int main(void)
{  
   client c;
   void *ptr; 
   int n=0;  
   char *fname = "credit.txt";
   make_file(fname, SIZE);

   fstream iof("credit.txt",ios::in | ios::out);
   if(!iof)
   {
       cerr<<"File open error! "<<endl;
       exit(1);
   }
   cout<<"\n\nenter the 10 customers into the file: "<< fname<<endl<<endl;

   while(0 < c.account) // && c.account <= maxrec)
   {
      iof.seekp((c.account-1) * sizeof(client));  // position the pointer
      iof.write((char *)&c, sizeof(c));
      cout << "Account[1.."<< SIZE
       << "], Name, Balance  (0 0 0 to exit)= ";
      cin >> c.account >> c.name >> c.balance;
   }

    cout << "\n\nSHOW_FILE: The contents of file " << fname;
    iof.seekg (0, ios::beg);  
    while(iof.read((char *)&c, sizeof(c)))  //where I think the problem is
    {
        cout <<'\n'<< setw(3)<< ++n << setw(6) << c.account <<setw(20)
       << c.name << setw(10) << c.balance ;
       // << "     |  " << IS.eof() << "  " << ptr;

    }
    iof.close();

    cout << "\n\n"; 
    system("pause");
    return 0;

} 
```

* * *

1.  相对文件是一个文件，其中每个记录都由其在文件中的序号位置标识，允许随机访问和顺序访问。

    [相关文件](https://documentation.microfocus.com/help/index.jsp?topic=%2FGUID-0E0191D8-C39A-44D1-BA4C-D67107BAF784%2FBKFHFHORGSS007.html)

    [相对文件组织](https://www.ibm.com/support/knowledgecenter/en/SS6SGM_4.1.1/com.ibm.cobol.aix.doc/PGandLR/concepts/cpfio08.html)

    [http://cayfer.bilkent.edu.tr/~cayfer/ctp108/relative.htm](http://cayfer.bilkent.edu.tr/~cayfer/ctp108/relative.htm)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T07:17:01.887

您需要使用二进制读/写。

```
fstream iof("credit.txt",ios::in | ios::out | ios::binary); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T07:17:19.123

在您的代码中，在第一个循环中，`c.account`未初始化。也许您正在用未初始化的值覆盖文件：

```
 while(0 < c.account) //  <--- c.account is not initialized!!
   {
      iof.seekp((c.account-1) * sizeof(client));  // position the pointer
      iof.write((char *)&c, sizeof(c));    // <-- overwriting data?? 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T23:28:45.087

你的程序让我很感兴趣，因为我没有对 iostream 做太多的工作。如果您曾经处理必须基于每条记录进行编辑的数据，您将使用某种类型的数据库或专门的库来封装所有这些东西，例如 xml 库。由于您的数据非常小，因此使用数据结构数组将所有数据加载到您的应用程序中会更容易。之后，当您有新的用户输入时，最简单的方法是清除文件，然后重新写入数据。这就是我所做的。

```
#include <stdio.h>
#include <tchar.h>
#include <iostream>   //   cin, cout
#include <iomanip>
#include <fstream>
#include <conio.h>

using namespace std;

#define SIZE 10
#define BUFFER_SIZE 100
#define NAME_SIZE 20

struct     client        // Client record
{   
    int    account;      // from 1 to SIZE
    char   name[NAME_SIZE];
    double balance;
};

/* Makes file if files does not exist.
 * Returns true if file already exists
 */
bool make_file(char filename[], int number_of_records)
{
    // Check if file exists
    fstream file;
    file.open(filename, ios_base::out | ios_base::in);  // will not create file
    if (file.is_open())
    {
        file.close();
        return true;
    }
    else
    {
        file.clear();
        file.open(filename, ios_base::out);
        if(!file) {cerr << "File open error." << endl; exit(1);}
        cout << "File created. \n";
        file.close();
        return false;
    }
}

/* Create an application that reads x number of accounts from a text file
 * into an array of client data structures.
 */
int _tmain(int argc, _TCHAR* argv[])
{  
        client clientArray[SIZE];
        char cleanName[NAME_SIZE];
        for(int i = 0; i < NAME_SIZE; i++)
            cleanName[i] = NULL;

        // Make file if doesn't not exist.
        char *fname = "credit.txt";
        bool fileExisted = false;
        fileExisted = make_file(fname, SIZE);

        // initialize client array
        for(int j = 0; j < SIZE; j++)
        {
            clientArray[j].account = -1;
            strcpy_s(clientArray[j].name, cleanName);
            clientArray[j].balance = 0.0;
        }

        // Open file and populate the client array
        fstream readFile("credit.txt", ios::in | ios::binary);
        if(fileExisted)
        {
            if(!readFile)
            {
               cerr<<"File open error! "<<endl;
               exit(1);
            }

            int index = 0;
            bool firstRun = true;
            client temp;

            while(index < SIZE)
            {
                readFile >> temp.account;
                readFile >> temp.name;
                readFile >> temp.balance;

                if(readFile.eof())
                    break;

                if(firstRun)
                {
                    cout << "Data read \n";
                    cout << "----------\n";
                    firstRun = false;
                }

                clientArray[index].account = temp.account;
                strcpy_s(clientArray[index].name, temp.name);
                clientArray[index].balance = temp.balance;

                cout << setw(3)  << index+1;
                cout << setw(6)  << clientArray[index].account;
                cout << setw(20) << clientArray[index].name;
                cout << setw(10) << clientArray[index].balance << "\n";
                index++;
            }
            readFile.close();
            readFile.clear();
        }

        // Get user input
        {
            client temp;        // Create and initialize temp client
            temp.account = 0;
            temp.balance = 0;
            strcpy_s(temp.name, cleanName);
            int index = 0;

            bool keepLooping = true;
            while(keepLooping)
            {
                cout << "Account[1.."<< SIZE << "], Name, Balance  (-1 to exit)= ";
                cin >> temp.account;

                // If user exited
                if(temp.account == -1)
                    keepLooping = false;
                else
                {
                    cin >> temp.name; // If not keep reading data
                    cin >> temp.balance;

                    // Find either unused account or same account
                    bool found = false;
                    int firstEmpty = -1;
                    for(int i = 0; i<SIZE; i++)
                    {
                        if(temp.account == clientArray[i].account) // Same account found
                        {
                            strcpy_s(clientArray[i].name, temp.name);
                            clientArray[i].balance = temp.balance;
                            found = true;
                            break;
                        }
                        else if((clientArray[i].account == -1)&&(firstEmpty == -1)) // Empty account found
                        {
                            firstEmpty = i;
                        }
                    }
                    if((firstEmpty != -1)&&(!found)) // Copy input to empty account
                    {
                        clientArray[firstEmpty].account = temp.account;
                        strcpy_s(clientArray[firstEmpty].name, temp.name);
                        clientArray[firstEmpty].balance = temp.balance;
                    }
                    else if(found) // 
                    {
                        cout << "Updating Client Data. \n";
                    }
                    else // No empty accounts break loop
                    {
                        cout << "Client array is full!\n";
                        keepLooping = false;
                    }
                }
            }
        } // end of user input scope

        // Clear file and write only valid data to new file
        {
            ofstream out;
            out.open("credit.txt");
            for(int i=0 ; i<SIZE ; i++)
            {
                if(clientArray[i].account != -1)
                {
                    out << clientArray[i].account << "\t";
                    out << clientArray[i].name << "\t";
                    out << clientArray[i].balance << "\n";
                }
            }
            out.close();
            out.clear();
        }

        // Open file and read the data
        {
            ifstream readFile("credit.txt", ios::in | ios::binary);
            // readFile("credit.txt", ios::in | ios::binary);
            if(!readFile)
            {
               cerr<<"File open error! "<<endl;
               exit(1);
            }
            if(!readFile.good())
            {
                cerr<<"File open error!2"<<endl;
                exit(1);
            }

            int index = 0; // scope variables
            client temp;
            temp.account = 0;
            temp.balance = 0;
            strcpy_s(temp.name, cleanName);

            cout << "\nAccounts" << "\n";
            cout << "----------" << "\n";
            bool readFileb = readFile.good();
            while(index < SIZE)
            {
                readFile >> temp.account;
                readFile >> temp.name;
                readFile >> temp.balance;
                if(readFile.eof())
                    break;
                cout << setw(3)  << index+1;
                cout << setw(6)  << temp.account;
                cout << setw(20) << temp.name;
                cout << setw(10) << temp.balance << "\n";
                index++;
            }
            readFile.close();
            readFile.clear();
        }

        system("pause");
} 
```

# mysql - nodejs上是否有支持存储过程的mysql驱动程序？

> ID：10546956
> 
> 赞同：11
> 
> 时间：2012-05-11T07:07:01.653
> 
> 标签：mysql, node.js, stored-procedures

我正在寻找支持存储过程的 nodejs 的 mySQL 驱动程序。我一直在使用的[http://nodejsdb.org/db-mysql/给出了错误](http://nodejsdb.org/db-mysql/)

PROCEDURE 无法返回给定上下文中的结果集

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-21T14:29:05.773

Felix Geisendörfer 的[node-mysql](https://github.com/felixge/node-mysql)支持存储过程，但您需要通过`SELECT`成功/失败标志结束存储过程，然后像查询一样查询它`SELECT`。以下是存储过程的外观：

```
DELIMITER //
DROP PROCEDURE IF EXISTS MyProcedure //
CREATE PROCEDURE MyProcedure(IN param1 VARCHAR/*, My, Parameters, ... */)
BEGIN

    DECLARE EXIT HANDLER FOR NOT FOUND, SQLWARNING, SQLEXCEPTION SELECT 0 AS res;
    # My Queries etc. ...

    SELECT 1 AS res;

END //
DELIMITER ; 
```

您的节点代码将如下所示：

```
var mysql = require('mysql');

var client = mysql.createConnection({
    host    : '127.0.0.1',
    user    : 'username',
    password: 'password'
});
client.query('USE mydatabase');

var myParams = "'param1', 'param2', ... ";
client.query("CALL MyProcedure(" + myParams + ")", function(err, results, fields) {
    if (err || results[0].res === 0) {
        throw new Error("My Error ... ");
    } else {
        // My Callback Stuff ...

    }
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-11-21T03:54:42.973

[node-mysql](http://www.javascriptpoint.com/nodejs-mysql-tutorial-example/)驱动程序使用存储过程，它非常简单，只需使用参数调用您的存储过程。

```
CREATE PROCEDURE GetAllStudent(id int)
BEGIN
SELECT * FROM student where userid = id ;
END; 
```

并在节点中调用

```
app.get('/sp', function (req, res, next) {
    connection.connect();
    connection.query('CALL GetAllStudent(?)',[req.body.id],function (err, rows, fields) {
        if (err) {
            res.status(400).send(err);
        }
        res.status(200).send(rows);
    });

    connection.end();
}); 
```

这样就不用担心sql注入了。

[这](http://www.javascriptpoint.com/nodejs-mysql-tutorial-example/)是关于nodejs和mysql的好教程

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-11T11:08:42.830

它适用于[nodejs-mysql-native](https://github.com/sidorares/nodejs-mysql-native)

存储过程：

```
DELIMITER //
CREATE PROCEDURE test1p1()
  BEGIN
  SELECT 1+1;
  END //
DELIMITER ; 
```

node.js 脚本：

```
mysql = require('mysql-native');
var db = mysql.createTCPClient();
    db.auth('test', 'tester', ''); // db, user, password

db.query('call test.test1p1;').on('row', function(r) {
    console.log(r);
}).on('end', function() {
    console.log('OK!');
}); 
```

输出：

```
{ '1+1': 2 }
OK! 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-06-06T16:17:56.377

虽然已经回答了这个问题，但我会用我自己的版本做出贡献，希望它可以帮助你和其他任何偶然发现这篇文章的人

就您而言，这就是我将如何在单个文件中执行（2019 年的方式，有点...）您想要实现的目标（除了表达框架和大多数人的默认 mysql 包之外，不需要任何其他东西用途）

首先，安装这两个包：

*   快递：[https ://www.npmjs.com/package/express](https://www.npmjs.com/package/express)
*   mysql：[https ://www.npmjs.com/package/mysql](https://www.npmjs.com/package/mysql)

其次，像这样创建一个存储过程：

```
DELIMITER //
DROP PROCEDURE IF EXISTS myProcedure //
CREATE PROCEDURE myProcedure()
  BEGIN
    SELECT 'hello from procedure' AS message;
  END //
DELIMITER ; 
```

最后，创建一个 node js 脚本，打开它并编写以下代码行：

```
//handles the requests/responses in your API
const express = require('express');

//handles the mysql stuff 
const mysql = require('mysql');

const app = express(); //create your express based app

//database access config
const config = {
  host: '127.0.0.1',
  user: 'username',
  password: 'password'
  database: 'test-db'
}

//Example route(you can add more of these for POST, PATCH and so on)
//If you need other methods just change the 'app.get' to 'app.<method here>'.
app.get('/test-route', (req, res) => { 
  try
  {
    const dbConn = mysql.createConnection(config); //creates a connection with the config above
    dbConn.connect((err) => { //connect to the db
      if(err)//if the connection fails log and send a error response
      {
        console.log(`Error: ${err.stack}`);
        res.status(500).send({error: "Something went wrong."});
      }
      else
      {
        let stmt = `CALL myProcedure();`; //sql query for running the example procedure 

        //You don't need to wrap anything in a try catch block if you don't mind 
        //your app crashing if any mysql related errors occur.
        //Console.log isn't required either. 
        //Use these above only if you need.
        try 
        {
          dbConn.query(stmt, (err, rows) => {
            if(err)//if the query fails log and send a error response
            {
              console.log(`Error: ${err.stack}`);
              res.status(500).send({error: "Something went wrong."});
            }
            else
            {
              try
              {
                //closes the connection and sends the result of executing the procedure
                dbConn.end();
                res.send({message: rows[0][0].message});
              }
              catch(err)
              {
                console.log(`Error: ${err.stack}`);
                res.status(500).send({error: "Something went wrong."});
              }
            }
          });
        }
        catch(err) 
        {
          console.log(`Error: ${err.stack}`);
          res.status(500).send({error: "Something went wrong."});
        }
      }
    });
  }
  catch(err)
  {
    console.log(`Error: ${err.stack}`);
    res.status(500).send({error: "Something went wrong."});
  }
}

//this must always be your last line of code in order
//for you to be able to run your express app
app.listen(5555, () => console.log('Server running...\nListening on port: 5555')); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-24T16:48:36.753

将多个解决方案放在一起以确保完整性

存储过程：

```
CREATE PROCEDURE GetStudent(id int)
BEGIN
SELECT * FROM student where userid = id ;
END; 
```

Node.js 和 Express 代码：

```
var express = require('express');
var mysql = require("mysql");
var

app = express();

var pool = mysql.createPool({
    connectionLimit: 100,
    host: 'localhost',
    user: 'root',
    password: '',
    database: 'demo'
});

app.get('/pool', function (req, res) {

    var studentId = req.body.id;

    pool.getConnection(function (err, connection) {
        // connected! (unless `err` is set)
        if (err) {
            res.status(400).send(err);
        }
        connection.query('CALL GetStudent(?)',[studentId], function (err, rows, fields) {
             connection.release();
             if (err) {
                res.status(400).send(err);
            }
            res.status(200).send(rows);
        });     
    });
});

app.listen(4000, function () {
    console.log('Server is running.. on Port 4000');
}); 
```

（来源：Pushker Yadav 和“ [http://www.javascriptpoint.com/nodejs-mysql-tutorial-example/](http://www.javascriptpoint.com/nodejs-mysql-tutorial-example/) ”）

# wordpress - 带有图片的 Wordpress 下一个/上一个帖子链接

> ID：10546964
> 
> 赞同：0
> 
> 时间：2012-05-11T07:07:37.127
> 
> 标签：wordpress, wordpress-theming

我正在尝试将图像用于上一个和下一个帖子链接。以下代码行被拒绝，因为我应该使用`get_template_directory_uri()`. 我应该如何修改 php 中的以下代码以包含此功能？

```
<?php next_posts_link('<img src="./wp-content/themes/Icecap/images/next.png" />'); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T07:12:34.867

他们在谈论不使用`/wp-content/themes/`etc 路径。

所以，这应该工作：

```
<?php next_posts_link('<img src="'.get_template_directory_uri().'/images/next.png" />'); ?> 
```

# java - 如何使用 Selenium WebDriver 从带有 Java 的下拉框中选择一个项目？

> ID：10546974
> 
> 赞同：0
> 
> 时间：2012-05-11T07:08:12.293
> 
> 标签：java, selenium, selenium-webdriver

我正在尝试使用 java 代码自动化测试用例。我使用 selenium 服务器库。现在，当我到达某个页面时，我得到一个包含一定数量元素的下拉框。下拉框称为“类型'。现在我想要做的是单击我想要展开的下拉框，以便在下一步我能够单击特定项目，例如。摇滚/金属/流行音乐等。以上所有内容我都在尝试自动化，但每次我这样做时都会抛出相同的异常：

```
Exception in thread "main" org.openqa.selenium.NoSuchElementException: Unable to locate element: {"method":"xpath","selector":"//*[@id='Genre']"} 
```

我已经尝试了 By 可用的各种方法，即 By.xpath、By.name、By.id 等，但无济于事。因此，我复制了与“流派”框相关的粘贴信息供您参考。请指导我使用哪种方法使用，以便我可以成功实现我刚才描述的目标。

当我突出显示流派给我时查看选择源：

```
<td id="genre" width="50%">
                                                                Genre <br><select name="Genre" id="Genre" class="input_boxbbb" onchange="subgener(this.value)"><option value="0000">All</option><option value="26">AIRTEL JINGLE</option><option value="19">ARTISTS</option><option value="27">BATTERY</option><option value="25">BOLLYWOOD</option><option value="28"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T09:51:14.590

Ok so the code Pavel suggested is correct and should work.

i have just one comment about it. instead of iterating over all options manually you can just use one the following:

```
genres.selectByIndex(int index)
genres.selectByValue(String value) 
genres.selectByVisibleText(String text) 
```

the problem is with the HTML, notice you have 2 elements with the same id but a different case.

```
<td id="genre" width="50%">
<select name="Genre" id="Genre"> 
```

this may cause problems in curtain browsers and is in general bad practice.

if you control the HTML i would suggest changing the id of the `<td>` element to something else and use the above code.

if you are not the one writing the the HTML try using

```
Select genre = new Select(driver.findElementBy(By.name("Genre"))) [Notice the Case sensetivity]; 
```

if even that doesn't work try this to inspect all `<select>` elements in the page and use it to pick the one you need:

```
List<WebElement> selects = driver.findElementsBy(By.tagName("select"));
for (WebElement select : selects) {
   System.out.println(select)
} 
```

hope it helps

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T08:38:41.383

假设您正在使用 WebDriver。稍后的`driver`变量被认为是有效的 Webdriver 实例：

```
public void selectGenre(String genreName){ 
   Select genres = new Select(driver.findElement(By.id("genre")));
   List<WebElement> options = new ArrayList<WebElement>;
   options = genres.getOptions();
   for (WebElement genre:options){
       if(genre.getText().equals(genreName)){
           genre.click();
       }
   }
} 
```

# routes - 我想通过两种方式出站到 TCP 客户端

> ID：10546986
> 
> 赞同：0
> 
> 时间：2012-05-11T07:08:57.690
> 
> 标签：routes, spring-integration

我正在配置 Spring 集成设置。有两个 TCP 服务器，它是共享同一通道的出站通道。

我希望使用标头的值路由通道。我该如何解决这个问题？

```
<ip:tcp-connection-factory id="admMsgRcvServer"
    type="server" port="#{afiProperties.admMsgRcvPort}" deserializer="byteArrayCharLengthSerializer"
    serializer="byteArrayCharLengthSerializer" single-use="true" />

<ip:tcp-connection-factory id="simMsgSndClient"
    type="client" host="#{afiProperties.msgSndHost}" port="#{afiProperties.msgSndPort}"
    single-use="true" so-timeout="10000" deserializer="byteArrayCharLengthSerializer"
    serializer="byteArrayCharLengthSerializer" />

<ip:tcp-outbound-channel-adapter id="msgSnd" 
    connection-factory="simMsgRcvServer" channel="afiHeadToHeaderChannel"  />   

<ip:tcp-outbound-channel-adapter id="simMsgSnd"
    channel="afiHeadToHeaderChannel" connection-factory="simMsgSndClient" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T11:50:28.567

您可以使用 an 根据标头的值路由到通道。

```
<int:header-value-router header-name="foo">
    <int:mapping value="fooValue1" channel="channel1"/>
    <int:mapping value="fooValue2" channel="channel2"/>
</int:header-value-router> 
```

也就是说，您的一个适配器使用“服务器”连接工厂；这将无法按配置工作。您不能向服务器连接工厂创建的连接发送任意消息；它通常必须是对传入消息的回复；有一些先进的技术可以做到这一点，但你总是首先需要至少一条传入消息。

# jquery - 显示加载微调器并防止页面上的任何其他操作

> ID：10546988
> 
> 赞同：1
> 
> 时间：2012-05-11T07:09:03.173
> 
> 标签：jquery, asp.net-mvc-3, loading

我有一个 asp.net MVC3 Web 应用程序，我在其中搜索特定条件并在网格中显示搜索结果，单击网格中的行时，我将结果加载到新页面中。同时，当我单击表格中的行时，我会在表格顶部显示加载图像。我在行选择上显示微调器。

```
function onRowSelected(e) {
    var grid = $(this).data('tGrid');
   // populate some data here
    $("#spinner").show();
    $.ajax({
        type: "POST",
        contentType: "application/json; charset=utf-8",
        url: "/Search/GetResults",
        data: populate the data to be sent,
        dataType: "text json",
        success:
        function (data, textStatus) {
            if (data != "Success") {
                ShowError(data);
            }
            else {
                window.location.href = "/Search/Test/";
               }
        },
        error:
        function (XMLHttpRequest, textStatus, errorThrown) {
            alert("Error Occured!");

        }

    });
} 
```

微调器的代码是：

```
<div id='spinner' style='display:none;'><center><img alt='' src='../../Images/loading.gif' title='Loading...' /><b>Loading...</b></center> </div> 
```

我的问题是，当用户选择一行并显示加载符号时，他可以点击另一行。一旦加载微调器可见，我想阻止用户单击或选择页面上的任何内容。任何帮助

**更新**：

我的问题不在于加载图像的位置..我希望它显示为覆盖或类似的东西，以便后面的页面将变灰并且用户无法选择任何内容

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T07:13:21.357

只需添加CSS

```
 #spinner
    {
        background: url("image") repeat scroll #AAA;
        opacity: 0.3;
        height: 100%;
        left: 0;
        position: absolute;
        top: 0;
        width: 100%;
        z-index:2000;
    } 
```

希望这有效

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T07:13:06.600

尝试将 css 样式添加到您的`#spinner`（可能不需要高度和宽度属性）：

```
#spinner {
    position: absolute;
    width: 100%;
    height: 100%;
    z-index: 99999; // puts your div on top on others
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T07:19:39.253

您可以定义一个 javascript 变量，例如`bool_spinner`，默认情况下`false`设置为显示微调器时设置，并在加载数据后`true`设置回。`false`

然后，您可以在您的函数内部（如 onRowSelected 内部）测试此变量，以根据微调器的状态控制发生的情况。

然后，您可以使用类似这样的东西（未经测试）来防止其他活动的 HTML 元素（如链接和表单提交按钮）在您单击页面时做出反应：

```
$("body").click(function(e) {
    if (bool_spinner) e.preventDefault();
} 
```

编辑：如果需要，您还可以准确检查已单击的内容，如下所示：

```
 var target = $(e.target);  
  if (target.is("#tGrid")) {
      etc.        
  } 
```

更新：实际上，您甚至不需要设置新的脚本变量，您可以直接[测试](http://api.jquery.com/hidden-selector/)微调器的状态：

```
if ($('#spinner').is(':hidden')) { 
  etc. 
} 
```

# c# - 对象的通用 html 编码

> ID：10546989
> 
> 赞同：1
> 
> 时间：2012-05-11T07:09:08.283
> 
> 标签：c#, html-encode

我需要编写一个方法，该方法接受任何对象并返回等效对象，但如果对象是引用类型，则在所有公共可写字符串属性/字段上应用 html-encode。如果对象是一个字符串，它显然应该返回传递的字符串的 html-encode。如果它是可枚举类型，它应该枚举该类型并对列表中的每个项目应用与上述相同的逻辑。

这听起来可能吗？我一直在玩弄一些代码（使用 ObjectDumper.cs 作为起点），但还没有走多远。

这个想法是我可以将它作为一个方面应用到我的所有服务方法中，这样返回的对象字段就可以安全地与 html ui 绑定，这由几个有时忘记触发客户端上的编码的人正在研究边。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T07:20:15.407

> 这听起来可能吗？

是的，但是快速而肮脏的方法是使用反射，与常规属性调用相比，这将导致巨大的（30-100 倍）性能损失。这对您可能很重要，也可能无关紧要。

如果你走反射路线，你可以：

*   通过在要修改的实例上调用 GetType() 来发现类型信息
*   [使用Type.GetProperties()](http://msdn.microsoft.com/en-us/library/kyaxdd3x.aspx)发现所有公共属性
*   检查`PropertyInfo`属性是字符串还是可枚举字符串
*   `PropertyInfo`从对象获取 get 访问器：`GetGetMethod()`
*   获取价值
*   转换价值
*   使用 set 访问器设置值`GetSetMethod()`

对于`IEnumerable`，您需要做一些额外的工作，即通过后期绑定调用获取集合，然后枚举它。根据您的类型，您可能还需要忽略某些属性、修改字段等。

如果我必须这样做（并且我怀疑这是否是解决问题的正确方法），我将使用反射扫描对象的接口一次，并为每个属性创建[动态](http://msdn.microsoft.com/en-us/library/exczf7b9.aspx)getter/setter 并将它们缓存在基于 Dictionary 的在类型上。随后处理对象的请求将使用这些缓存的方法并实现类似于正常 get/set 调用的性能。

[如果您熟悉 IL 生成和/或表达式树](http://msdn.microsoft.com/en-us/library/bb397951.aspx)，则枚举处理起来会有点麻烦，但非常可行。

> 几个人正在研究这个问题，他们有时会忘记在客户端触发编码。

我认为代码的设计应该让开发人员的生活更轻松，但你怎么能解释人们忘记了什么？我不反对防弹代码，但谁知道还有什么会被遗忘。只是一个想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-23T14:55:00.853

使用反射对字符串属性进行编码。然后将响应对象投射到您的对象。

```
MyClass myObject = new MyClass();
myObject.propA = "string Value";
var response = EncodeProperties(myObject.getType(),myObject);
myObject = response as myObject ;

    public static object EncodeProperties(Type type, object obj)
    {
        var propertiesInfo = type.GetProperties();

        foreach (PropertyInfo p in propertiesInfo)
        {
            if (p.PropertyType.IsPrimitive
                && p.PropertyType.FullName == "System.String")               
            {
                    p.SetValue(obj, HttpUtility.HtmlEncode(value), null);

            }
        }
        return obj;
    } 
```

# mysql - 左连接的最新记录

> ID：10546997
> 
> 赞同：1
> 
> 时间：2012-05-11T07:09:58.720
> 
> 标签：mysql

我正在使用 mysql，我的表 A 包含帐户信息，表 B 包含人口统计信息，例如出生日期、地址和保险单信息（主要、次要）。表 B 的保险字段已更新，所以我想要最新的表 B 中的数据。表 B 没有任何日期字段。那么我如何从 B 获取稍后要与 A 连接的最新记录。

```
select  
   A.num,
   A.openingamount,
   A.action,
   A.current_status,
   B.dob,
   B.primary_policy,
   B.secondary_policy 
from A 
left outer join B 
    on (B.uniqueid = A.ponum) 
where A.num ='123' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T02:30:59.923

juergen d 在上面的评论中是正确的，指出您需要表 B 中的*一些有*序列来确定什么是最新的。如果`B.uniqueid`是一个自动递增的列，那么你可以使用它；如果不是，那么您需要添加一个新列来订购 B。

然后，您可以通过与 B 的双连接来获取数据，其中第二个连接用于查找`B`大于最大值的行`uniqueid`（即*什么都没有*）。

```
SELECT
  A.num, A.openingamount, A.action, A.current_status,
  B.dob, B.primary_policy, B.secondary_policy 
FROM A 
  LEFT JOIN B ON (B.a_ponum = A.ponum) 
  LEFT JOIN B2 ON (B2.a_ponum = A.ponum AND B2.uniqueid > B.uniqueid) 
WHERE
  B2.uniqueid IS NULL
  AND A.num ='123' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T07:15:06.427

如果您没有日期列，则需要一个增量列：

```
select  
   A.num,
   A.openingamount,
   A.action,
   A.current_status,
   B.dob,
   B.primary_policy,
   B.secondary_policy 
from A 
left outer join B 
    on (B.uniqueid = A.ponum) 
where A.num ='123'
order by B.increment_id desc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T07:51:44.897

您可能还想添加一个自动更新的 TIMESTAMP 字段 -

```
ALTER TABLE B
  ADD COLUMN ts
    TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP; 
```

[TIMESTAMP 的自动初始化和更新](http://dev.mysql.com/doc/refman/5.5/en/timestamp-initialization.html)。

然后使用此字段查找最近的记录。

# oauth - 如何编写应用程序以使用谷歌域电子邮件帐户登录

> ID：10546999
> 
> 赞同：0
> 
> 时间：2012-05-11T07:10:03.987
> 
> 标签：oauth, gmail

场景是这样的：有一个登录入口，用户可以使用google app域邮箱登录。这些代码怎么写？我知道可能需要OAUTH来获取，但是我需要找google app管理员吗帐户来做到这一点，或者只是让开发者帐户来做到这一点？对不起我的英语不好，希望有人能帮助我~

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T04:00:35.313

这应该适合您： [https ://developers.google.com/accounts/docs/OAuth2Login](https://developers.google.com/accounts/docs/OAuth2Login)

任何 Google 个人（例如 gmail）或 Apps 用户都可以使用它进行身份验证——无论是管理员还是普通用户。

您的开发者帐户可以是任何类型的帐户（个人、Google Apps 管理员、Google Apps 普通用户）。