# StackOverflow 问答 10361000-10361999

# c# - 抽象用户控件

> ID：10361001
> 
> 赞同：0
> 
> 时间：2012-04-28T05:53:31.300
> 
> 标签：c#, wpf, user-controls, polymorphism, abstract

我对 WPF MVVM 相当陌生。

我有一个名为 MyButtonsView 的用户控件，它继承自 UserControl。此用户控件应显示另外两个用户控件。

我有几个视图模型类：MyRedButtonViewModel、MyBlueButtonViewModel。它们都派生自一个名为 MyAbsButtonViewModel 的抽象类。此抽象视图模型强制所有派生视图模型实现属性名称 GetImage。

在 MyButtonsView 的 XAML 中，我有一个应该有两行的网格。在第一行我想要 MyRedButtonViewModel，在第二行我想要 MyBlueButtonViewModel。两者都应在绑定到 GetImage 属性的按钮内显示图像。（它是多态的）。

如何告诉 XAML 为每一行加载正确的视图模型？

有没有合适的方法来实现它。我愿意改变我的设计。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T07:32:14.167

您可以为两个按钮定义使用不同的 ViewModel 作为 DataContext。

MyButtonsView 绑定到 MyButtonsViewModel，MyButtonsViewModel 有两个属性 MyBlueButtonViewModel 和 MyRedButtonViewModel。

在 MyButtonsView 中，您可以定义如下内容：

```
<MyRedButton DataContext = "MyRedButtonViewModel" ..../>
<MyBlueButton DataContext = "MyBlueButtonViewModel" .../> 
```

# c# - 中断后立即在 aspx 页面上触发服务器端方法

> ID：10361002
> 
> 赞同：1
> 
> 时间：2012-04-28T05:54:03.570
> 
> 标签：c#, asp.net, ajax

想象一下，我有一个 aspx 页面，它是我网站的主页，用户在上面花费时间。现在我需要在发生事件后，将此页面变为更新。例如，如果一个新用户加入网站，所有用户都会在他们的主页上看到它。我使用 ajax 计时器来解决我的问题，并且每隔一秒调用一种方法，如果我的网站已更改，我可以将其展示给用户。但这不是一个好的解决方案。请告诉我如何在上述示例的中断后立即触发方法。（我认为当我们收到一些新电子邮件时，雅虎邮件也会使用这种方式）

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T06:16:59.237

您可以使当前线程“睡眠”直到出现新的更改。每个 Web 请求对应一个线程。并且您需要使用全局集合来跟踪所有当前正在休眠的线程。

```
var lastMsgTime=Global.NewMsgTime;  
while(true){     
     Thread.Sleep(300);  
     if(!Response.IsClientConnected||RequeGlobal.NewMsgTime!=lastMsgTime){
          lastMsgTime!=Global.NewMsgTime;
          break;  
     }  
} 
```

您仍将在客户端使用 ajax。

# iphone - 模拟器中的当前位置

> ID：10361003
> 
> 赞同：7
> 
> 时间：2012-04-28T05:54:07.850
> 
> 标签：iphone

我正在做一个应用程序，我必须在其中找到用户的当前位置。我可以使用 CLLocationmanager 在 iOS 5 模拟器中获取用户的当前位置吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-28T05:59:28.820

xcode - 编辑方案 - 运行 you.app - 选项

选中允许位置模拟，然后选择“默认位置”

```
Add GPX File to Project 
```

[像这样](http://www.weston-fl.com/blog/?p=3120)的格式

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-28T10:31:16.197

在 Xcode 中，您可以使用控制台上方的小按钮选择要模拟的位置。

![在此处输入图像描述](../Images/79636d88eafc9ce35235120ac0f8b8bb.png)

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-04-28T10:17:53.643

```
- (void)viewDidLoad{
    [super viewDidLoad];
    self.title = @"MapView";
    self.navigationController.navigationBarHidden = NO;
    locationManager = [[CLLocationManager alloc] init];
    locationManager.delegate = self;
    locationManager.distanceFilter = kCLDistanceFilterNone; // whenever we move
    locationManager.desiredAccuracy = kCLLocationAccuracyHundredMeters; // 100 m
    [locationManager startUpdatingLocation];
}

- (void) loadPin {
    iCodeBlogAnnotation *appleStore1;
    CLLocationCoordinate2D workingCoordinate;
    workingCoordinate.latitude = [latitude doubleValue];
    workingCoordinate.longitude = [longitude doubleValue];
    appleStore1 = [[iCodeBlogAnnotation alloc] initWithCoordinate:workingCoordinate];
    [appleStore1 setTitle:[NSString stringWithFormat:@"Default Point"]];

    //[appleStore1 setSubtitle:[NSString stringWithFormat:@"Distance %.2f Miles",miles]];
    [appleStore1 setAnnotationType:iCodeBlogAnnotationTypeEDU];
    [mapView addAnnotation:appleStore1];
    [(MKMapView*)self.mapView selectAnnotation:appleStore1 animated:NO];
    MKCoordinateRegion region;
    region.center.latitude = [latitude doubleValue];
    region.center.longitude = [longitude doubleValue];
    region.span.latitudeDelta = .5;
    region.span.longitudeDelta = .5;
    [mapView setRegion:region animated:YES];
}

- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation {
    latitude = [[NSString alloc] initWithFormat:@"%f", newLocation.coordinate.latitude];
    longitude = [[NSString alloc] initWithFormat:@"%f", newLocation.coordinate.longitude];
    [locationManager stopUpdatingLocation];
    if (latitude > 0) {
        [self loadPin];
    }
} 
```

# algorithm - 从大文件中删除重复项

> ID：10361007
> 
> 赞同：1
> 
> 时间：2012-04-28T05:54:44.823
> 
> 标签：algorithm, file-io, large-files

我们有大量数据，我们想对它们执行一些操作。删除重复项是主要操作之一。

前任。

```
a,me,123,2631272164
yrw,wq,1237,123712,126128361
yrw,dsfswq,1323237,12xcvcx3712,1sd26128361 
```

这是文件中的三个条目，我们希望根据第一列删除重复项。因此，应删除第 3 行。每行可能有不同数量的列，但我们感兴趣的列将始终存在。

在内存中操作看起来不可行。

另一种选择是将数据存储在数据库中并从那里删除重复项，但这又不是一项简单的任务。我应该遵循什么设计将数据转储到数据库中并删除重复项？

我假设人们一定遇到过这样的问题并解决了它。

我们通常如何解决这个问题？

PS：请将此视为现实生活中的问题，而不是面试问题；）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T06:04:38.977

如果键的数量也无法加载到内存中，则必须进行稳定（保留顺序）外部合并排序以对数据进行排序，然后进行线性扫描以进行重复删除。或者您可以修改外部合并排序以在合并排序运行时提供重复消除。

我想因为这不是面试问题，或者效率/优雅似乎不是问题（？）。编写一个 hack python 脚本，以第一个字段作为主键创建 1 个表。解析此文件并将记录插入数据库，将插入包装到 try except 语句中。然后在表上执行一个select *，解析数据并逐行写回文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T06:28:47.547

如果您沿着数据库路线走，您可以将 csv 加载到数据库中并使用“重复密钥更新”

使用 mysql:-

1.  创建一个包含行以匹配您的数据的表（您可能只需要 2 行 - id 和数据）
2.  使用类似的东西转储数据

    LOAD DATA LOCAL infile "rs.txt" REPLACE INTO TABLE data_table FIELDS TERMINATED BY ',';

3.  然后，您应该能够将数据转储回 csv 格式而不会重复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T06:00:48.273

如果输入已排序或可以排序，则只需在内存中存储一​​个值即可：

```
r = read_row()
if r is None:
    os.exit()
last = r[0]
write_row(r)
while True:
    r = read_row()
    if r is None:
        os.exit()
    if r[0] != last:
        write_row(r)
        last = r[0] 
```

除此以外：

我要做的是保留一组我已经看到的第一列值，如果它在该集合中，则删除该行。

```
S = set()
while True:
    r = read_row()
    if r is None:
       os.exit()
    if r[0] not in S:
       write_row(r)
       S.add(r[0]) 
```

这将仅使用与第一列中值集的大小成比例的内存流过输入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-28T06:00:57.283

如果唯一键的数量不是很高，您可以简单地这样做；
（伪代码，因为你没有提到语言）

```
Set keySet;

while(not end_of_input_file)
    read line from input file
    if first column is not in keySet
        add first column to keySet
        write line to output file
end while 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-28T12:19:55.593

如果您需要在原始数据中保留顺序，则创建位置和数据元组的新数据可能是明智的，然后对要删除的数据进行排序。一旦您按数据排序，重复数据删除（本质上）就是线性扫描。之后，您可以通过对元组的位置部分进行排序来重新创建原始顺序，然后将其剥离。

假设您有以下数据：a、c、a、b

使用 pos/data 元组，按数据排序，我们最终得到：0/a、2/a、3/b、1/c

然后我们可以进行重复数据删除，可以轻松地选择要保留的第一个或最后一个条目（我们也可以使用更多的内存消耗，保留另一个）并获得：0/a、3/b、1/c。

然后我们按位置排序并去掉：a、c、b

这将涉及对数据集的三个线性扫描和两个排序步骤。

# iphone - 在 iphone sdk 上像矩阵结构一样绘制点

> ID：10361011
> 
> 赞同：1
> 
> 时间：2012-04-28T05:55:18.643
> 
> 标签：iphone, ios

我想在 iphone sdk 中像矩阵结构一样绘制点。

如果我想生成点列和行（如 2x2、3x3、4x4）。

但我不知道这一代人。

我想要如下图所示的输出。

![在此处输入图像描述](../Images/c232acfbb0385b3ead5d00478acb76ed.png)

例如代码或教程的任何帮助..！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-28T06:20:58.923

一个简单的解决方案是：

```
- (void)drawRect:(CGRect)rect {
  int n = 12;         // row and column count
  int padding = 5;    // distance beetween dots
  float radius = MIN((rect.size.width-(n+1)*padding)/(n*2), (rect.size.height-(n+1)*padding)/(n*2)); // radius depending on rect size

  CGContextRef context = UIGraphicsGetCurrentContext();
  CGContextSetFillColorWithColor(context, [[UIColor whiteColor] CGColor]); // background color
  CGContextFillRect(context, rect); // setting background color

  CGContextSetFillColorWithColor(context, [[UIColor blackColor] CGColor]); // dot color

  for (int y = 0; y<n; y++) {
    for (int x = 0; x<n; x++) {
      CGContextAddArc(context, padding+radius+(padding+radius*2)*x, padding+radius+(padding+radius*2)*y, radius, 0, M_PI*2, 0); // adding dot path
      CGContextFillPath(context); // drawing dot path
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-28T06:10:20.613

您使用此代码...

```
- (void)drawRect:(CGRect)rect 
{
CGContextRef contextRef = UIGraphicsGetCurrentContext();

CGContextSetRGBFillColor(contextRef, 0, 0, 255, 0.1);
//CGContextSetRGBFillColor(contextRef, 0, 10, 200, 0.2);

CGContextSetRGBStrokeColor(contextRef, 0, 0, 255, 0.5);

// Draw a circle (filled)
//CGContextFillEllipseInRect(contextRef, CGRectMake(100, 100, 25, 25));

// Draw a circle (border only)
CGContextStrokeEllipseInRect(contextRef, CGRectMake(100, 100, 25, 25));

// Get the graphics context and clear it
CGContextRef ctx = UIGraphicsGetCurrentContext();
CGContextClearRect(ctx, rect);

// Draw a green solid circle
CGContextSetRGBFillColor(ctx, 0, 255, 0, 1);
CGContextFillEllipseInRect(ctx, CGRectMake(20, 50, 8, 8));

CGContextSetRGBFillColor(ctx, 0, 255, 0, 1);
CGContextFillEllipseInRect(ctx, CGRectMake(50, 50, 8, 8));

CGContextSetRGBFillColor(ctx, 0, 255, 0, 1);
CGContextFillEllipseInRect(ctx, CGRectMake(80, 50, 8, 8));

CGContextSetRGBFillColor(ctx, 0, 255, 0, 1);
CGContextFillEllipseInRect(ctx, CGRectMake(110, 50, 8, 8));

CGContextSetRGBFillColor(ctx, 0, 255, 0, 1);
CGContextFillEllipseInRect(ctx, CGRectMake(140, 50, 8, 8));

CGContextSetRGBFillColor(ctx, 0, 255, 0, 1);
CGContextFillEllipseInRect(ctx, CGRectMake(170, 50, 8, 8));

CGContextSetRGBFillColor(ctx, 0, 255, 0, 1);
CGContextFillEllipseInRect(ctx, CGRectMake(20, 100, 8, 8));

CGContextSetRGBFillColor(ctx, 0, 255, 0, 1);
CGContextFillEllipseInRect(ctx, CGRectMake(50, 100, 8, 8));

CGContextSetRGBFillColor(ctx, 0, 255, 0, 1);
CGContextFillEllipseInRect(ctx, CGRectMake(80, 100, 8, 8));

CGContextSetRGBFillColor(ctx, 0, 255, 0, 1);
CGContextFillEllipseInRect(ctx, CGRectMake(110, 100, 8, 8));

CGContextSetRGBFillColor(ctx, 0, 255, 0, 1);
CGContextFillEllipseInRect(ctx, CGRectMake(140, 100, 8, 8));

CGContextSetRGBFillColor(ctx, 0, 255, 0, 1);
CGContextFillEllipseInRect(ctx, CGRectMake(170, 100, 8, 8));

CGContextSetRGBFillColor(ctx, 0, 255, 0, 1);
CGContextFillEllipseInRect(ctx, CGRectMake(20, 150, 8, 8));

CGContextSetRGBFillColor(ctx, 0, 255, 0, 1);
CGContextFillEllipseInRect(ctx, CGRectMake(50, 150, 8, 8));

CGContextSetRGBFillColor(ctx, 0, 255, 0, 1);
CGContextFillEllipseInRect(ctx, CGRectMake(80, 150, 8, 8));

CGContextSetRGBFillColor(ctx, 0, 255, 0, 1);
CGContextFillEllipseInRect(ctx, CGRectMake(110, 150, 8, 8));

CGContextSetRGBFillColor(ctx, 0, 255, 0, 1);
CGContextFillEllipseInRect(ctx, CGRectMake(140, 150, 8, 8));

CGContextSetRGBFillColor(ctx, 0, 255, 0, 1);
CGContextFillEllipseInRect(ctx, CGRectMake(170, 150, 8, 8));

CGContextSetRGBFillColor(ctx, 0, 255, 0, 1);
CGContextFillEllipseInRect(ctx, CGRectMake(20, 200, 8, 8));

CGContextSetRGBFillColor(ctx, 0, 255, 0, 1);
CGContextFillEllipseInRect(ctx, CGRectMake(50, 200, 8, 8));

CGContextSetRGBFillColor(ctx, 0, 255, 0, 1);
CGContextFillEllipseInRect(ctx, CGRectMake(80, 200, 8, 8));

CGContextSetRGBFillColor(ctx, 0, 255, 0, 1);
CGContextFillEllipseInRect(ctx, CGRectMake(110, 200, 8, 8));

CGContextSetRGBFillColor(ctx, 0, 255, 0, 1);
CGContextFillEllipseInRect(ctx, CGRectMake(140, 200, 8, 8));

CGContextSetRGBFillColor(ctx, 0, 255, 0, 1);
CGContextFillEllipseInRect(ctx, CGRectMake(170, 200, 8, 8));
} 
```

您的输出显示如下 ![在此处输入图像描述](../Images/bfdf7ce147ccdfb959631dfc2de2ab67.png)

# c# - WCF - 无法获取元数据

> ID：10361013
> 
> 赞同：4
> 
> 时间：2012-04-28T05:55:27.413
> 
> 标签：c#, wcf, wcf-binding, wcf-security, wcftestclient

它使用 IIS 7 在 Intranet 中运行，只要我在 IIS 管理器中启用匿名身份验证，它就可以正常工作。如果我禁用它并尝试使用 wcftestclient 运行它，则会收到以下错误，

```
Error: Cannot obtain Metadata from http://myserver/testing/eval.svc If this is a Windows (R) Communication Foundation service to which you have access, please check that you have enabled metadata publishing at the specified address.  For help enabling metadata publishing, please refer to the MSDN documentation at http://go.microsoft.com/fwlink/?LinkId=65455.WS-Metadata Exchange Error    URI: http://myserver/testing/eval.svc    Metadata contains a reference that cannot be resolved: 'http://myserver/testing/eval.svc'.    The HTTP request is unauthorized with client authentication scheme 'Anonymous'. 
```

这是我的 web.config 文件，

```
<system.serviceModel>
<bindings>
    <wsHttpBinding>
        <binding name="Binding1">
            <security mode="Transport">
                <transport clientCredentialType="Windows" />
                <message establishSecurityContext="true" />
            </security>
        </binding>
    </wsHttpBinding>
    <basicHttpBinding>
        <binding name="httpBinding">
            <security mode="Transport">
                <transport clientCredentialType="Windows" />
            </security>
        </binding>
    </basicHttpBinding>     
</bindings>

<services>
  <service behaviorConfiguration="ServiceBehavior" name="EvalServiceLibrary.EvalService">
    <endpoint address="" binding="wsHttpBinding" bindingConfiguration="Binding1" contract="EvalServiceLibrary.IEvalService">
      <identity>
        <dns value="myserver.mydomain.com" />
      </identity>
    </endpoint>
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
    <endpoint address="basic" binding="basicHttpBinding" contract="EvalServiceLibrary.IEvalService" />
  </service>
</services>

<behaviors>
  <serviceBehaviors>
    <behavior name="ServiceBehavior">
      <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
      <serviceMetadata httpGetEnabled="true" />
      <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
      <serviceDebug includeExceptionDetailInFaults="false" />
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

如您所见，我正在使用 mexHttpBinding 端点填充元数据。所以欢迎任何建议。

谢谢你，m0dest0。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T12:04:33.903

删除 MEX 端点并离开。Mex 端点需要启用匿名身份验证。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-29T01:46:32.673

Javi 是对的，我必须删除 mex 端点，只是为了记录，这是 web.config 的最终版本：

```
<system.serviceModel>
<bindings> 
    <basicHttpBinding> 
        <binding name="basicBinding"> 
            <security mode="TransportCredentialOnly"> 
                <transport clientCredentialType="Windows" /> 
            </security> 
        </binding>
    </basicHttpBinding> 
</bindings> 
<services> 
    <service name="EvalServiceLibrary.EvalService" behaviorConfiguration="ServiceBehavior"> 
        <endpoint address="" binding="basicHttpBinding" bindingConfiguration="basicBinding" contract="EvalServiceLibrary.IEvalService"> 
        </endpoint> 
    </service> 
</services> 
<behaviors> 
    <serviceBehaviors> 
        <behavior name="ServiceBehavior"> 
            <serviceDebug includeExceptionDetailInFaults="true" /> 
            <serviceMetadata httpGetEnabled="false" />
        </behavior> 
    </serviceBehaviors> 
</behaviors>
</system.serviceModel> 
```

更多细节在这里， [IIS 托管 WCF-service + Windows auth in IIS + TransportCredentialOnly/Windows auth in basicHttpBinding](https://stackoverflow.com/questions/219151/iis-hosted-wcf-service-windows-auth-in-iis-transportcredentialonly-windows-a)

# c# - WPF 相对绑定异常

> ID：10361014
> 
> 赞同：2
> 
> 时间：2012-04-28T05:56:13.870
> 
> 标签：c#, .net, wpf, xaml

给定一个绑定到如下定义的视图模型的用户控件

```
class MyViewModel
{
    public DataView MyView { get; set; }
    public DataView MyTypes { get; set; }
} 
```

XAML大致标记如下

```
<Grid>
    <dxg:GridControl AutoPopulateColumns="True" Name="gridControl1" ItemsSource="{ Binding MyView}">
        <dxg:GridControl.Columns>
            <dxg:GridColumn FieldName="col1">
                <dxg:GridColumn.EditTemplate>
                    <ControlTemplate>
                        <dxe:ComboBoxEdit Name="cmbTypes" 
                       ItemsSource="{Binding RelativeSource={RelativeSource AncestorType={x:Type UserControl}},
                            Path=ViewModel.MyTypes}"/>
                    </ControlTemplate>
                </dxg:GridColumn.EditTemplate>
            </dxg:GridColumn>
            <dxg:GridColumn FieldName="col2"/>
            <dxg:GridColumn FieldName="col3" Width="75"/>
        </dxg:GridControl.Columns>
        <dxg:GridControl.View>
            <dxg:TableView Name="tableView1" AutoWidth="True" ShowTotalSummary="True" />
        </dxg:GridControl.View>
    </dxg:GridControl>
</Grid> 
```

绑定如下

```
internal MyViewModel ViewModel
{
    get { return (MyViewModel)DataContext; }
    set { DataContext = value; }
} 
```

当然 ComboBox 不显示 ListTypes 的选择，它确实有值

问题是 - 如何从 Grid.Column 引用 ViewModel 的 ListTypes 属性，其中 Grid 绑定到没有属性 ListTypes 的 DataView MyItems，与 ListTypes 处于同一级别！！！

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T21:30:35.547

如果我正确理解了这个问题，我希望以下工作：

```
{Binding RelativeSource={RelativeSource AncestorType={x:Type UserControl}},
                        Path=DataContext.MyTypes} 
```

这可能`Path=ViewModel.MyTypes`只是因为您没有在`ViewModel`属性上实现更改通知而无法正常工作。不过，正如我所说，您应该能够与`Path=DataContext.MyTypes`.

注意：您似乎在问题中都将属性称为属性`MyTypes`-`ListTypes`不确定哪个对您的对象模型是正确的。

# c# - LinqToEntitiesDataController MVC 4 单页应用程序 - 会话变量

> ID：10361017
> 
> 赞同：0
> 
> 时间：2012-04-28T05:56:26.053
> 
> 标签：c#, asp.net-mvc, single-page-application

SPA MVC4 的新手，尝试将会话变量从帐户控制器传递给 LinqToEntitiesDataController，以通过以下方式识别用户：

```
 using (DALEntities db = new DALEntities())
                        {
                            string PHN = (from p in db.Patients
                                          where p.UserName == model.UserName
                                          select p.PHN).First();
                            Session["P"] = PHN;
                        } 
```

在 LinqToEntitiesDataController 我尝试使用如下变量：

```
public partial class DALController : LinqToEntitiesDataController<MyVDC.Models.DALEntities>
    {
        public IQueryable<MyVDC.Models.TestModel> GetTestModel()
        {
            **string phn = (string)Session["P"];**
            return ObjectContext.TestModels.Where(b => b.PHN == phn).OrderBy(b => b.ID);

        }
} 
```

我得到这个错误：

```
The name 'Session' does not exist in the current context 
```

这是唯一的方法，还是有更好的方法来使用这个控制器的会话变量。

我还尝试在帐户控制器中使用：

```
 HttpContext.Current.Session["P"] = PHN; 
```

但我得到这个错误：

```
'System.Web.HttpContextBase' does not contain a definition for 'Current' and no extension method 'Current' accepting a first argument of type 'System.Web.HttpContextBase' could be found 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T15:14:17.540

```
public class SessionHttpControllerRouteHandler : HttpControllerRouteHandler
{
    protected override IHttpHandler GetHttpHandler(System.Web.Routing.RequestContext requestContext)
    {
        return new SessionHttpControllerHandler(requestContext.RouteData);
    }
}

public class SessionHttpControllerHandler : HttpControllerHandler, IRequiresSessionState
{
    public SessionHttpControllerHandler(RouteData routeData) : base(routeData) { }
} 
```

创建会话支持HttpControllerHandler，并在Global.asax中路由入口这个类。

```
 routes.Add("SessionApis",
        new HttpWebRoute(
            url: "api/{controller}/{id}",
            defaults: new RouteValueDictionary(new {id = RouteParameter.Optional}),
            routeHandler: new SessionHttpControllerRouteHandler()
    )); 
```

但是，我认为 ApiController 很适合无会话使用。如此可扩展和 REST 原则。

LinqToEntitiesDataController 路由添加在自定义区域注册类（DALRouteRegistration 类？）。更改脚手架默认区域寄存器代码。

从

```
 RouteTable.Routes.MapHttpRoute(
        "DAL", // Route name
        "api/DAL/{action}", // URL with parameters
        new { controller = "DAL" } // Parameter defaults
    ); 
```

至

```
 RouteTable.Routes.Add("SessionDALApis",
        new HttpWebRoute(
            url: "api/DAL/{action}",
            defaults: new RouteValueDictionary(new { controller = "DAL" }),
            routeHandler: new SessionHttpControllerRouteHandler()
    )); 
```

这个怎么样？

# python - 在多个龙卷风实例之间共享数据

> ID：10361018
> 
> 赞同：0
> 
> 时间：2012-04-28T05:56:45.273
> 
> 标签：python, nginx, tornado, sharing

我有 nginx 服务器代理请求到一些龙卷风实例。每个 tornado 实例都基于 Tornado 附带的长轮询聊天演示。该脚本有一个存储回调的数组，然后用于将消息发送回客户端。

我遇到的问题是，当有多个龙卷风实例时，nginx 使用循环策略。由于回调是按实例存储的（而不是集中维护），因此根据发出请求的时间，它会转到其中一个实例。因此，当必须推送数据时，它只会转到存储在同一个龙卷风实例中的回调。

是否有如何在多个龙卷风实例之间存储数据的标准做法？我正在考虑使用 memcached，但是如果我需要迭代存储中的所有键，那将是不可能的（尽管它不是我一直需要的东西）。我只是想知道是否有在多个 python 进程之间存储数据的标准做法。我还阅读了有关[mmap](http://blog.schmichael.com/2011/05/15/sharing-python-data-between-processes-using-mmap/)的信息，但不确定它如何与存储回调（它们是 python 方法）一起工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T11:15:34.750

没有现成的配方，您可以使用 mmap 或消息提供程序（如 RabbitMQ）或简单的 noSQL DB（如 Redis）。在你的情况下，我可能会尝试 ZeroMQ。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T18:07:36.667

如果它是一个“聊天”风格的应用程序，你最好看看 Redis 和那里实现的 Pub/Sub 处理。

这是一个关于 pub/sub 的好问题。 [在 Tornado 中处理 Redis 连接的正确方法是什么？（异步 - 发布/订阅）](https://stackoverflow.com/questions/8466838/what-is-the-proper-way-to-handle-redis-connection-in-tornado-async-pub-sub)

# emacs - Emacs - 如何找到命令的名称（用于调用 Mx ) 用于键绑定？

> ID：10361019
> 
> 赞同：14
> 
> 时间：2012-04-28T05:35:05.557
> 
> 标签：emacs, keyboard-shortcuts

在 Emacs 中，以下命令的名称是什么：

*   在缓冲区内全部缩进（根据您使用的语言）（相当于选择所有缓冲区并按 Tab）

*   移动“段落”（相当于 ctrl-up 和 ctrl-down）

*   按字移动（相当于 ctrl-right 和 ctrl-left）

事实是，我出于专业原因转向了 macbook，而这些功能是不可能的，因为 ctrl+ 上的操作系统快捷方式绑定...

我已经尝试在谷歌上找到这个但没有结果。我将在 .emacs 中为这些函数分配新的绑定。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-28T06:05:50.740

帮助你帮助自己：`C-h k`是描述的关键。只需按下它，然后按下您的组合键，然后它就会为您提供绑定 elisp 函数的名称和文档。

对你来说是：

*   缩进区域（这通常取决于模式）

*   前段和后段

*   后向词和前向词

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T08:56:28.070

如前所述，您可以使用`C-h``k`来显示给定绑定的文档。另一个有用的命令是 当您知道函数名称的一部分时，`apropos-command`一定`C-h``a`会找到函数。

但是对齐文本的另一个非常酷的功能是`align-regexp` 绑定到`C-x``\`.

例如

```
a = 12;
baz_to_bar = 3.14;
foo = 42; 
```

选择区域，然后使用 `C-x``\``=``RET`

```
a          = 12;
baz_to_bar = 3.14;
foo        = 42; 
```

顾名思义，您可以使用正则表达式来确定 emacs 将如何对齐您的文本。享受！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T06:06:21.117

*   `M-x indent-region`
*   `M-x backward-paragraph`和`M-x forward-paragraph`
*   `M-x backward-word`和`M-x forward-word`

# objective-c - 在 Objective-C 中获取公共 IP？

> ID：10361023
> 
> 赞同：1
> 
> 时间：2012-04-28T05:57:55.907
> 
> 标签：objective-c, ip, ip-address, external

在我的应用程序中，我需要获取一个 NSString 对象值，该值等于用户公共/互联网 IP 地址的值。我已经尝试过解决这个问题的方法，但两者都返回本地 IP 地址不公开。下面是我的两种方法。一种更精确，并且始终返回数组中的正确项。另一个没有。（因为只是选择一个随机索引）......

```
- (NSString *)getPublicIP {   
    NSHost *publicIP = [[[NSHost currentHost] addresses] objectAtIndex:0];
    return publicIP;  
} 
```

其他更准确的：（但没有获得公共IP）

```
 //start get ip
- (NSString *)getIPWithNSHost { 

NSArray *addresses = [[NSHost currentHost] addresses];
NSString *stringAddress;
for (NSString *anAddress in addresses) {
    if (![anAddress hasPrefix:@"127"] && [[anAddress componentsSeparatedByString:@"."] count] == 4) {
    stringAddress = anAddress;
    break;
    }
    else {
    stringAddress = @"IPv4 address not available" ;

}
    //NSLog(stringAddress);
}
NSLog (@"getIPWithNSHost: stringAddress = %@ ",stringAddress); 
stringAddress = (@"getIPWithNSHost: stringAddress = %@ ",stringAddress);

return  stringAddress;

} 
```

无论哪种方式，我只需要一种方法来获取外部/公共/互联网 IP 地址。（只是为了澄清外部/公共/互联网 ip 是可以从 whatsmyip.org 检索到的）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-03-22T14:21:36.637

这是 joshbillions 答案的 iOS 友好版本：

```
+(void)getPublicIP:(void(^)(NSString *))block {
    NSURL *url = [NSURL URLWithString:@"http://checkip.dyndns.org"];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    [[[NSURLSession sharedSession]dataTaskWithRequest:request completionHandler:^(NSData *data, NSURLResponse *response, NSError *error) {
        if (error) {
            // consider handling error
        } else {
            NSString *html = [[NSString alloc]initWithData:data encoding:NSUTF8StringEncoding];
            NSCharacterSet *numbers = [NSCharacterSet characterSetWithCharactersInString:@"0123456789."];
            NSString *ipAddr = [[html componentsSeparatedByCharactersInSet:numbers.invertedSet]componentsJoinedByString:@""];
            if (block) {
                block(ipAddr);
            }
        }
    }]resume];
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-28T06:09:53.443

由于[NAT](https://en.wikipedia.org/wiki/Network_address_translation)，您不能指望您的机器在其任何接口上都可以使用其外部 IP。
获取您的外部 IP 的唯一半可靠方法是询问 Internet 上的一台机器（如您提到的 whatsmyip.org），该机器在通过任何本地路由器/防火墙后查看您的 IP 流量。

例如，在 IP 电话中使用的一种要求此信息的标准方法是使用[STUN 协议](https://en.wikipedia.org/wiki/STUN)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-21T22:08:54.370

它像罪恶一样丑陋，但这对我有用：

```
NSTask *task = [[[NSTask alloc] init] autorelease];
[task setLaunchPath:@"/usr/bin/curl"];
[task setArguments:[NSArray arrayWithObjects:@"-s",@"http://checkip.dyndns.org", nil]];
NSPipe *outputPipe = [NSPipe pipe];
[task setStandardOutput:outputPipe];
[task launch];
NSData *curlData = [[outputPipe fileHandleForReading] readDataToEndOfFile];
NSString *curlString = [[NSString alloc] initWithData:curlData encoding:NSASCIIStringEncoding];
NSMutableString *strippedString = [NSMutableString
                                   stringWithCapacity:curlString.length];

NSScanner *scanner = [NSScanner scannerWithString:curlString];
NSCharacterSet *numbers = [NSCharacterSet
                           characterSetWithCharactersInString:@"0123456789."];

while ([scanner isAtEnd] == NO) {
    NSString *buffer;
    if ([scanner scanCharactersFromSet:numbers intoString:&buffer]) {
        [strippedString appendString:buffer];

    } else {
        [scanner setScanLocation:([scanner scanLocation] + 1)];
    }
}
NSLog(@"IP Address: %@", strippedString); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-20T19:19:01.717

STUN 协议是获取公共 IP 和端口的好解决方案 - 查看 iOS 的 STUN 协议实现[https://github.com/soulfly/STUN-iOS](https://github.com/soulfly/STUN-iOS)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-28T06:09:39.763

*   `get`除非您通过引用传递参数，否则方法永远不应使用前缀...

但这并不能回答你的问题。

回答需要一个问题；你想做什么？

除了最有限的情况外，您设备的 IP 地址很可能毫无意义。

*   如果在蜂窝网络上，它可能无法路由

*   如果在任何类型的消费者互联网连接上，它可能位于某种 NAT 路由器后面

*   即使在极少数情况下获得可路由地址，您的设备也可能位于防火墙后面

除了最罕见的 [通常是管理密集型案例] 之外，您应该使用 Bonjour 进行非以 IP 为中心的服务发现或类似 Game Center 的东西来进行人对人匹配（或其他特定于域的匹配代理）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-11T00:57:01.357

我使用[ifconfig.me](https://ifconfig.me/)，这是一个很棒的站点，可以使用多种输出格式（包括 JSON）来获取您的公共 IP 地址和其他信息。

```
- (void)myPublicIPAddressWithCompletitionBlock:(void (^)(NSString *))completitionBlock {
    NSURLSessionConfiguration *sessionConfiguration = [NSURLSessionConfiguration defaultSessionConfiguration];
    [sessionConfiguration setHTTPAdditionalHeaders:@{@"Content-Type": @"application/json"}];

    NSURLSession *session = [NSURLSession sessionWithConfiguration:sessionConfiguration];

    NSURL *url = [NSURL URLWithString:@"https://ifconfig.me/all.json"];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];

    NSURLSessionDataTask *task = [session dataTaskWithRequest:request completionHandler:^(NSData * _Nullable data, NSURLResponse * _Nullable response, NSError * _Nullable error) {
        if (!error) {
            NSError *jsonError = nil;
            NSDictionary *jsonResponse = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&jsonError];
            if (!jsonError) {
                if (jsonResponse[@"ip_addr"]) {
                    if (completitionBlock) {
                        dispatch_async(dispatch_get_main_queue(), ^{
                            completitionBlock(jsonResponse[@"ip_addr"]);
                        });
                    }

                    return ;
                }
            }
        }

        if (completitionBlock) {
            dispatch_async(dispatch_get_main_queue(), ^{
                completitionBlock(@"none");
            });
        }
    }];

    [task resume];
} 
```

# javascript - 禁用 Internet Explorer IE9 中的最小化按钮

> ID：10361025
> 
> 赞同：1
> 
> 时间：2012-04-28T05:57:59.307
> 
> 标签：javascript, internet-explorer-9

我可以使用`window.open resizable=no`禁用/灰显最大化按钮，但是当我尝试使用`dialog=yes,minimizable=no`最小化按钮时不会灰显/禁用，请帮助我找到一种方法来禁用此最小化按钮，谢谢！

我想将此设置应用于自助服务终端计算机，因为我不希望用户最小化他们的浏览器并将他们的凭据留给下一个人

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T06:02:17.673

“对话”和“最小化”不是[有效的选项](http://msdn.microsoft.com/en-us/library/ie/ms536651%28v=vs.85%29.aspx)。您不能也不应该阻止用户最小化其桌面上的窗口。

如果您希望在 Kiosk 上运行浏览器，我建议您在[Kiosk 模式下](http://support.microsoft.com/kb/154780)加载浏览器。

# javascript - 用于学习的强大的基于 Node.js 的开源项目？

> ID：10361027
> 
> 赞同：0
> 
> 时间：2012-04-28T05:58:38.570
> 
> 标签：javascript, node.js, towerjs

我正在学习特定的 node.js（特别是 tower.js）。我希望看到一些非常健壮的开源应用程序示例，它们围绕更复杂的场景展开，尤其是在**映射领域**。到目前为止，我还没有找到一个可靠的例子，我觉得我可以投入其中，但我希望有人可以将我指向一个***谷歌地图***或***Open MapQuest 风格的应用程序***，如果可能的话，它是在节点上构建的。

在这方面有什么建议吗？任何强大的示例应用程序都很好，只是其中一种场景会更合适。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T18:47:30.483

我自己一直在 Node.js 上开发基于 Open MapQuest 的应用程序。这是我能找到的最好的全栈参考：[Node.js、Express、Leaflet、PostGIS](http://boomphisto.blogspot.com/2011/07/nodejs-express-leaflet-postgis-awesome.html)。但它远非强大。事实上，它很容易受到 SQL 注入的影响！

一般来说，你需要两件事：

*   像[Leaflet](http://leaflet.cloudmade.com)这样的客户端地图渲染器，非常棒。
*   像[MongoDB这样的地理空间数据库，它具有内置的地理空间索引](http://www.mongodb.org/display/DOCS/Geospatial+Indexing)并且我正在使用，或者他们在该教程中使用的PostGIS。

然后，只需按照 Tower 教程，创建一个 RESTful 端点，在给定经度和纬度的情况下查询附近感兴趣的项目。您可能无法使用 Tower Models，因为它们不支持地理空间查询 AFAIK。在客户端，检查您的地图是否已移动，并获取端点以更新附近的项目。

# ruby-on-rails - 如何为嵌套资源丰富的路线制作更短的路径

> ID：10361030
> 
> 赞同：3
> 
> 时间：2012-04-28T05:58:55.290
> 
> 标签：ruby-on-rails, url, rest, routing, restful-url

我有类别，类别有条目。在这种情况下，“show”资源丰富的路径的公共路径将是：**/categories/:category_id/entries/:entry_id**

我可以使用 friendly_id 使这条路径更友好[，](https://github.com/norman/friendly_id)所以它看起来像： **/categories/:category_name/entries/:entry_name**

但最后我希望路径更简单，例如： **/:category_name/:entry_name**。 *这可能吗？如何？这样的路径（及其实现）是否仍然是资源丰富的（RESTful）？任何搜索引擎（如谷歌等）会比第二个更快地找到这样的路径吗？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T06:54:12.057

你试过简单吗：

```
resources :categories, path: '' do
  resources :entries, path: ''
end 
```

?

# objective-c - 使用完成块创建自定义方法

> ID：10361032
> 
> 赞同：10
> 
> 时间：2012-04-28T05:59:10.940
> 
> 标签：objective-c, ios, objective-c-blocks, nsoperation

> **可能重复：**
> [实现一个将块用作回调的方法](https://stackoverflow.com/questions/7180552/implementing-a-method-taking-a-block-to-use-as-callback)

我找不到任何关于如何实现执行完成块的方法的明确解释。

我知道 NSOperation 可以是子类并与调用一起使用`setCompletionBlock:`。任何人都知道这是否可能仅通过在 m 中实现。文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-28T06:10:12.987

您可能不相信，但有一篇[Code Samurai 文章](http://cocoasamurai.blogspot.com/2011/02/practical-design-patterns-with-blocks.html?m=1)涵盖了您问题的确切基础！大约三分之一的时候，他们用一个示例完成块继承了 NSOperation。

# spring - 有时会出现“会话已关闭”异常

> ID：10361035
> 
> 赞同：2
> 
> 时间：2012-04-28T05:59:35.030
> 
> 标签：spring, hibernate, jpa

我在我的项目中使用 Spring + JPA + Hibernate。项目结构如下： - DAO 层 - 负责获取数据。DAO 以模型对象的形式返回数据。- 服务层 - 调用 DAO 并以 UI 所需的形式处理/转换（模型）数据。

我将@Transactional 用于服务层上的方法。

我面临的问题是，有时在从延迟加载的集合中读取数据时出现“会话已关闭”错误。我也没有一直面临这个问题。从 TestNG 测试运行时以及将应用程序部署为 WAR 时，有时会出现此错误。

我正在粘贴运行 TestNG 测试时遇到的异常：

org.hibernate.SessionException：会话已关闭！在 org.hibernate.impl.AbstractSessionImpl.errorIfClosed(AbstractSessionImpl.java:72) 在 org.hibernate.impl.SessionImpl.getBatcher(SessionImpl.java:305) 在 org.hibernate.loader.Loader.doQuery(Loader.java:854 ) 在 org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:274) 在 org.hibernate.loader.Loader.loadEntity(Loader.java:2037) 在 org.hibernate.loader.entity.AbstractEntityLoader.load(AbstractEntityLoader. java:86) at org.hibernate.loader.entity.AbstractEntityLoader.load(AbstractEntityLoader.java:76) at org.hibernate.persister.entity.AbstractEntityPersister.load(AbstractEntityPersister.java:3268) at org.hibernate.event.def .DefaultLoadEventListener.loadFromDatasource(DefaultLoadEventListener.java:496) 在 org.hibernate.event.def。

这是我第一个使用 Spring/JPA/Hibernate 的项目。我无法找出可能导致此问题的原因？还有什么可以解决这个问题？

如果需要更多信息，请告诉我。任何帮助/指针都非常感谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T09:07:01.587

当您获取惰性对象时，您会收到代理对象而不是真实对象。

这可能是因为您在事务完成和会话关闭后尝试访问未启动的代理对象。

我相信您需要考虑以下两种选择：

1.  认真检查您的事务边界，并确保您的所有对象操作都发生在这些事务边界内。这将类似于“在视图中打开会话”设计模式。

2.  制作您的所有收藏品`EAGER`。在这种情况下，您将收到很多不必要的数据库查询。

希望能帮助到你。

# javascript - Javascript 数据层架构协助

> ID：10361036
> 
> 赞同：2
> 
> 时间：2012-04-28T05:59:35.237
> 
> 标签：javascript, html, data-layers

我正在制作一个相当复杂的 HTML 5 + Javascript 游戏。客户端将不得不根据他们所在的区域在游戏的不同点下载图像和数据。我在解决 Javascript 架构的数据层部分的一些问题时遇到了很大的问题。

我需要用数据层解决的问题：

1.  每当调用服务器以检索新数据时，应用程序中使用的过时数据都需要自动更新。
2.  从服务器检索的数据应存储在本地，以减少因两次请求相同数据而产生的任何开销。
3.  无论数据是否已经在本地可用，任何需要访问数据的代码部分都应该能够以统一的方式轻松地检索它。

我试图做的是构建一个数据层，它有两个主要组成部分：1\. 层中提供数据访问权限的部分（通过 get* 方法） 2\. 层中存储和将本地数据与来自服务器的数据同步。

工作流程如下：

当游戏需要访问某些数据时，它会在数据层中为该数据调用 get* 方法，并传递一个回调函数。

```
bs.data.getInventory({ teamId: this.refTeam.PartyId, callback: this.inventories.initialize.bind(this.inventories) }); 
```

get* 方法确定数据是否已在本地可用。如果是这样，它要么直接返回数据（如果没有指定回调），要么调用回调函数将数据传递给它。

如果数据不可用，它会在本地存储回调方法（setupListener），并调用通信对象传递最初请求的信息。

```
getInventory: function (obj) {

    if ((obj.teamId && !this.teamInventory[obj.teamId]) || obj.refresh) {
        this.setupListener(this.inventoryNotifier, obj);
        bs.com.getInventory({ teamId: obj.teamId });
    }
    else if (typeof (obj.callback) === "function") {
        if (obj.teamId) {
            obj.callback(this.team[obj.teamId].InventoryList);
        }
    }
    else {
        if (obj.teamId) {
            return this.team[obj.teamId].InventoryList;
        }
    }
} 
```

然后，通信对象对服务器进行 ajax 调用并等待数据返回。

当数据返回时，再次调用数据层，要求它发布检索到的数据。

```
getInventory: function (obj) {
    if (obj.teamId) {
        this.doAjaxCall({ orig: obj, url: "/Item/GetTeamEquipment/" + obj.teamId, event: "inventoryRefreshed" });
    }
},
doAjaxCall: function (obj) {

    var that = this;

    if (!this.inprocess[obj.url + obj.data]) {
        this.inprocess[obj.url + obj.data] = true;
        $.ajax({
            type: obj.type || "GET",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            data: obj.data,
            url: obj.url,
            async: true,
            success: function (data) {
                try {
                    ig.fire(bs.com, obj.event, { data: data, orig: obj.orig });
                }
                catch (ex) {
                    // this enables ajaxComplete to fire
                    ig.log(ex.message + '\n' + ex.stack);
                }
                finally {
                    that.inprocess[obj.url + obj.data] = false;
                }
            },
            error: function () { that.inprocess[obj.url + obj.data] = false; }
        });
    }
} 
```

然后数据层将所有数据存储在本地对象中，最后调用原始回调函数，将请求的数据传递给它。

```
publishInventory: function (data) {

    if (!this.inventory) this.inventory = {};

    for (var i = 0; i < data.data.length; i++) {
        if (this.inventory[data.data[i].Id]) {
            this.preservingUpdate(this.inventory[data.data[i].Id], data.data[i]);
        }
        else {
            this.inventory[data.data[i].Id] = data.data[i];
        }
    }

    // if we pulled this inventory for a team, update the team
    // with the inventory
    if (data.orig.teamId && this.team[data.orig.teamId]) {
        this.teamInventory[data.orig.teamId] = true;
        this.team[data.orig.teamId].InventoryList = [];
        for (var i = 0; i < data.data.length; i++) {
            this.team[data.orig.teamId].InventoryList.push(data.data[i]);
        }
    }

    // set up the data we'll notify with
    var notifyData = [];

    for (var i = 0; i < data.data.length; i++) {
        notifyData.push(this.inventory[data.data[i].Id]);
    }

    ig.fire(this.inventoryNotifier, "refresh", notifyData, null, true);
} 
```

这有几个问题一直困扰着我。我会按照最烦人的顺序列出它们:)。

1.  每当我必须添加一个经过此过程的呼叫时，都需要花费太多时间。（至少一个小时）
2.  跳转和回调传递的数量变得令人困惑，并且似乎很容易出错。
3.  我存储数据的分层方式非常难以同步和管理。更多关于下一个。

关于上面的问题 #3，如果我在数据层中存储的对象具有如下结构：

```
this.Account = {Battles[{ Teams: [{ TeamId: 392, Characters: [{}] }] }]}
this.Teams[392] = {Characters: [{}]} 
```

因为我想以一种可以传递 TeamId 来检索数据的方式存储团队（例如`return Teams[392];`），但我也想存储与他们所在的战斗相关的团队（`this.Account.Battles[0].Teams[0]`）；我有一个噩梦，让同一个团队的每个实例保持新鲜并保持相同的对象身份（所以我实际上并没有将它存储两次，这样我的数据就会在任何使用它的地方自动更新，这是目标#1数据层）。

它只是看起来如此凌乱和混乱。

我真的很感激任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T06:31:14.520

您应该考虑使用 jquery 的延迟对象。

例子：

```
var deferredObject = $.Deferred();
$.ajax({
     ...
     success: function(data){
         deferredObject.resolve(data);
     }
});
return deferredObject; 
```

现在返回 deferredObject，你可以像这样附加回调：

```
var inventoryDfd = getInventory();
$.when(inventoryDfd).done(function(){
     // code that needs data to continue
} 
```

而且您可能不太容易出错。您甚至可以嵌套延迟对象，或将它们组合起来，以便在下载多个服务器调用之前不会调用回调。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T05:41:22.783

骨干+1——它为你做了一些很重的工作。

还可以查看 Douglas Crockford 的 Javascript the Good Parts 一书中的 Memoizer。它很浓，但很棒。我修改了它以使`memo`数据存储成为可选，并添加了更多功能，例如无需先查询即可设置值的能力——例如处理数据新鲜度。

# multithreading - 带有成员函数的 QtConcurrent::map() = 无法编译

> ID：10361044
> 
> 赞同：3
> 
> 时间：2012-04-28T06:00:57.427
> 
> 标签：multithreading, qt, qtconcurrent

我的项目是创建一个小程序来演示搜索引擎的工作：为任意查询建立索引和返回结果。我已经完成了索引器部分的工作，现在我想通过一次索引多个文件来改进它。MainWindow 类在这里：

```
class MainWindow : public QMainWindow
{
    Q_OBJECT
    .....
private:
    Indexer * indexer;
    QStringList fileList;
    ....
    void index(QStringList list);
    void add(const QString &filename);
} 
```

这是`add`（`add`需要访问`fileList`以避免再次索引相同的文件，因此它不能是静态方法）的实现：

```
void MainWindow::add(const QString &filename)
{
    if (!fileList.contains(filename))
    {
        indexer->addDocument(filename.toStdString());
        fileList.append(filename);
        qDebug() << "Indexed" << filename;
        emit updatedList(fileList);
    }
} 
```

方法的实现`index`是接收一个文件列表并调用`add`每个文件名：

```
void MainWindow::index(QStringList list)
{
    ....
    QtConcurrent::map(list, &MainWindow::add);
    ....
} 
```

编译这些代码时收到的错误是：

```
usr/include/qt4/QtCore/qtconcurrentmapkernel.h: In member function 'bool QtConcurrent::MapKernel<Iterator, MapFunctor>::runIteration(Iterator, int, void*) [with Iterator = QList<QString>::iterator, MapFunctor = QtConcurrent::MemberFunctionWrapper1<void, MainWindow, const QString&>]':
../search-engine/mainwindow.cpp:361:1:   instantiated from here
/usr/include/qt4/QtCore/qtconcurrentmapkernel.h:73:9: error: no match for call to '(QtConcurrent::MemberFunctionWrapper1<void, MainWindow, const QString&>) (QString&)'
/usr/include/qt4/QtCore/qtconcurrentfunctionwrappers.h:128:7: note: candidate is:
/usr/include/qt4/QtCore/qtconcurrentfunctionwrappers.h:138:14: note: T QtConcurrent::MemberFunctionWrapper1<T, C, U>::operator()(C&, U) [with T = void, C = MainWindow, U = const QString&]
/usr/include/qt4/QtCore/qtconcurrentfunctionwrappers.h:138:14: note:   candidate expects 2 arguments, 1 provided 
```

我不太熟悉 QtConcurrent 的工作原理，文档也没有提供太多关于它的细节。我真的希望这里有人可以提供帮助。提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-28T07:52:56.920

为了能够调用指向成员的指针，除了函数形式参数之外，您还需要该类的实例（`this`您在成员函数中获得的指针）。

有两种方法可以处理这个问题：创建一个简单的函子来包装调用，或者使用 lambda。

仿函数看起来像这样：

```
struct AddWrapper {
  MainWindow *instance;
  AddWrapper(MainWindow *w): instance(w) {}
  void operator()(QString const& data) {
    instance->add(data);
  }
}; 
```

你会像这样使用它：

```
AddWrapper wrap(this);
QtConcurrent::map(list, wrap); 
```

（但请注意该包装器的生命周期。您可以使其更通用 - 例如，您还可以在包装器中存储指向成员的指针，和/或如果您想将该结构重用于其他类型，则将其设为模板.)

如果你有一个带有 lambdas 的 C++11 编译器，你可以避免所有的样板：

```
QtConcurrent::map(list, [this] (QString const& data) { add(data); }); 
```

* * *

注意：我不确定如何`QtConcurrent::MemberFunctionWrapper1`参与您的示例，我在这里没有看到。因此，对于这种情况，Qt 中可能已经有一个通用包装器，但我不知道。

# jquery - 使用 Jquery 在图像上添加或删除标记

> ID：10361045
> 
> 赞同：0
> 
> 时间：2012-04-28T06:00:58.627
> 
> 标签：jquery, css, image

我有一个 html DIV 如下

```
<div id="mapimage" style="background-image: url('images/physical-map.jpg'); width: 500; height: 548; background-repeat: no-repeat"></div> 
```

要在此 DIV 背景图像上添加标记，我正在执行以下操作。

```
$(document).ready(function () {
    $('div#mapimage').mousedown(function (e) {
         e.preventDefault();
                var x = e.pageX - this.offsetLeft;
                var y = e.pageY - this.offsetTop;
                var img = $('<img>');
                img.css('top', y);
                img.css('left', x);
                img.attr('src', 'images/red-dot.png');
                img.appendTo('#mapimage');
    }); 
```

这工作正常，我需要的是 - 第一次，我将在 DIV 的位置 (10,122) 添加一个标记。如果我第二次点击相同的位置，添加的标记应该从那里删除。这个怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T06:07:59.017

每次单击地图图像时，向 中添加一个类`img`并删除该类。

```
$(document).ready(function () {
    $('div#mapimage').mousedown(function (e) {
        e.preventDefault();

        // remove all images
        $('.remove-me').remove();

        var x = e.pageX - this.offsetLeft;
        var y = e.pageY - this.offsetTop;
        var img = $('<img>');
        img.css('top', y);
        img.css('left', x);
        img.attr('src', 'images/red-dot.png');

        // add a class to the image
        img.addClass('remove-me');

        img.appendTo('#mapimage');
    });
}); 
```

**或者**

无需在每次单击地图时删除所有图像，只需删除单击的图像即可。

```
$(document).ready(function () {
    // remove images that are clicked
    $('.remove-me').on('click', function(){
        $(this).remove();
    });

    $('div#mapimage').mousedown(function (e) {
        e.preventDefault();
        var x = e.pageX - this.offsetLeft;
        var y = e.pageY - this.offsetTop;
        var img = $('<img>');
        img.css('top', y);
        img.css('left', x);
        img.attr('src', 'images/red-dot.png');

        // add a class to the image
        img.addClass('remove-me');

        img.appendTo('#mapimage');
    });
}); 
```

# redmine - Redmine - 如何在 DDL 中添加活动

> ID：10361049
> 
> 赞同：2
> 
> 时间：2012-04-28T06:02:29.290
> 
> 标签：redmine

哇。我不敢相信 redmine 设置是多么原始。

无论如何..我想更新项目中的票，并且有一个活动下拉列表。除非我指定活动，否则我无法保存。空无一人。如何从 UI 填充活动列表？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T09:50:06.807

时间追踪活动：下拉内容在全局设置，[相关redmine指南链接](http://www.redmine.org/projects/redmine/wiki/RedmineEnumerations)。

顺便说一句，如果您没有在“*记录时间”部分输入任何**花费时间*和相关*评论*，则不必选择活动。

# c++ - 如何在 Qt 中创建类似连续子表单（小部件）的 ms-access？

> ID：10361053
> 
> 赞同：6
> 
> 时间：2012-04-28T06:02:57.137
> 
> 标签：c++, qt, qt4, pyqt

我正在考虑将我的访问应用程序移植到 Qt。我有兴趣学习如何做连续的子表单，子自定义小部件，用于以可滚动的非数据网格方式从记录集中呈现/编辑/插入数据。这意味着我可以为每条记录放置按钮、标签、组合、lineEdit ......等等。

我喜欢 QTableView 和代表。我只是不知道是否可以对其进行修改以完全模拟访问子表单。

Sidequestion（也许是相同的答案）......他们如何在引擎盖下访问这些连续形式。

谢谢

...在该示例记录集中不是真正的应用程序数据

![设计](../Images/8890255f155a45e8ae9db6f60157e5f2.png)

![作品](../Images/aafa8642a18db9838b0cd88dd015c919.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T10:41:44.593

Qt MVC 可能是您问题的最佳/最简单的答案（[http://qt-project.org/doc/qt-4.8/model-view-programming.html](http://qt-project.org/doc/qt-4.8/model-view-programming.html)），并且使用 QTableView 您应该能够实现您想要的.

另一种解决方案可能是：如果您在每一行中都有一组固定的列项目，您可以简单地设计一个包含该行内容的 QWidget 并将您的项目（行）粘贴到 QVerticalLayout 中。

虽然我建议尝试使用 MVC，因为这是首选方式，在这种情况下，如果需要，您甚至可以将其移植到使用 QML UI（同时您可以为“后端”使用相同的数据类）。QML 绝对是（甚至是轻微的）动画 UI 的最佳方法，并且已经足够成熟，可以使用它（它是 Qt 4.8 的一部分，并将成为 Qt 5 的“明星”）。

# django - 在django中将多个对象传递给RequestContext

> ID：10361056
> 
> 赞同：4
> 
> 时间：2012-04-28T06:03:23.813
> 
> 标签：django, django-views, requestcontext

我需要将字典和对象传递给模板。所以，我这样做

```
rc = RequestContext(request, {'prob':prob}, {'result':result})
return render_to_response('subject/question.html', context_instance=rc) 
```

但我得到一个错误。

```
Traceback: File "C:\Python27\lib\site-packages\django\core\handlers\base.py" in get_response
  111\.  response = callback(request, *callback_args, **callback_kwargs) File "E:\django-sample\proschools\..\proschools\subject\views.py" in eval_c
  72\.   rc = RequestContext(request, {'prob':prob}, {'result':result}) File "C:\Python27\lib\site-packages\django\template\context.py" in __init__
  173\.  self.update(processor(request))

Exception Type: TypeError at /practice/c/eval/ 
Exception Value: 'str' object is not callable 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-28T06:08:05.020

```
rc = RequestContext(request, {'prob':prob, 'result':result}) 
```

第三个参数`processors`应该是元组或列表

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-28T07:22:52.060

您还可以使用包含的[`render`快捷方式](http://django.me/render)`RequestContext`，然后正常传递变量。

```
from django.shortcuts import render

def someview(request):
    return render(request,'subject/response.html',{'prob':prob,'result':result}) 
```

# c# - Gridview 中按钮单击的Server.Transfer 不会转移到指定页面。

> ID：10361060
> 
> 赞同：1
> 
> 时间：2012-04-28T06:04:19.420
> 
> 标签：c#, asp.net, visual-studio, visual-studio-2010

我需要帮助来弄清楚为什么 Gridview 中的按钮在单击时没有转移到指定页面。

我在 GridView 之外添加了一个按钮 (Button1)，Server.Transfer("Page2.aspx") 将为此工作，但它不适用于 GridView 中的按钮（它只是将回发呈现到同一页面）。有谁知道为什么 GridView 的按钮单击不会转到 Page2.aspx？

（我已经用谷歌搜索了这个问题，其他人收到的答案对我的程序不起作用）。

部分代码：

```
 protected void Page_Load(object sender, EventArgs e)
    {

    }

    protected void GridView1_RowCommand(object sender, GridViewCommandEventArgs e)
    {
        if (e.CommandName.Equals("GoToPageTwo"))
        {
            int index = Convert.ToInt32(e.CommandArgument);
            GridViewRow row = GridView1.Rows[index];
            Server.Transfer("Page2.aspx");
        }
    }

    protected void Button1_Click(object sender, EventArgs e)
    {
       Server.Transfer("Page2.aspx");
    }

    protected void GridView1_SelectedIndexChanged(object sender, EventArgs e)
    {

    } 
```

# c - strncat 实现？

> ID：10361063
> 
> 赞同：0
> 
> 时间：2012-04-28T06:04:35.020
> 
> 标签：c, strcat

如果这太入门级，我很抱歉，但我尝试实现~~strcpy~~`strncat()`的库函数如下：

```
#include <stdio.h>

void strncat (char *s, char *t, int n) {
// malloc to extend size of s
s = (char*)malloc (strlen(t) + 1);

// add t to the end of s for at most n characters
while (*s != '\0') // move pointer
    s++;

int count = 0;

while (++count <= n)
    *s++ = *t++;

*(++s) = '\0';
}

int main () {
char *t = " Bluish";
char *s = "Red and";

// before concat
printf ("Before concat: %s\n", s);

strncat(s, t, 4);

// after concat
printf ("After concat: %s\n", s);

return 0;
} 
```

它编译并运行良好......只是它根本没有连接！

非常感谢任何反馈...谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T06:16:22.310

看起来你用你的 malloc 重新定义了 s 指针，因为你已经完成了它，它并不指向你的第一个连接字符串。

首先函数返回类型应该是 char*

```
char* strncat (char *s, char *t, int n) 
```

之后，我认为您应该创建本地字符指针。

```
char* localString; 
```

使用 malloc 通过此指针分配空间

```
localString = malloc (n + strlen(s) + 1); 
```

而且你不需要在这里进行类型转换，因为 malloc 自己做

事实上，你应该在这里使用你的尺寸参数 (n)，而不是 strlen(t)

并在使用此指针执行所有连接操作后返回它

```
return localString 
```

# iphone - iPhone 的文档文件夹的容量是否有限制？

> ID：10361065
> 
> 赞同：0
> 
> 时间：2012-04-28T06:04:42.203
> 
> 标签：iphone

> **可能重复：**
> [IOS应用程序的文档中是否有文件大小限制](https://stackoverflow.com/questions/7493780/is-there-any-limit-of-file-size-in-the-document-of-ios-app)

我正在尝试将文本文件保存在 iPhone 上的 Documents 文件夹中。这个文件夹有容量限制吗？还是仅取决于 iPhone 的内存容量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T09:33:49.087

除了设备本身的剩余容量外，沙盒的大小没有限制。

```
 To manage program memory, iPhone OS uses essentially the same virtual memory system found in Mac OS X. 
In iPhone   OS, each program still has its own virtual address space, but (unlike
Mac OS X) its usable virtual memory is  constrained by the amount of physical memory 
available. This is because iPhone OS does not write volatile pages to disk when memory
gets full. Instead, the virtual memory system frees up volatile memory, 
as needed, to make sure the running application has the space it needs. It does 
this by removing memory pages that are not being used and that contain read-only contents,
such as code pages. Such pages can always be loaded back into memory later if they are needed again.

     If memory continues to be constrained, the system may also send notifications to 
the running applications, asking them to free up additional memory. All applications 
should respond to this notification and do their part to help relieve the memory pressure. 
For information on how to handle such notifications in your application, see 
“Observing Low-Memory Warnings.” 
```

# c# - 如果我希望项目中的每个类都可以访问对象，那么在哪里存储对象

> ID：10361067
> 
> 赞同：0
> 
> 时间：2012-04-28T06:04:47.443
> 
> 标签：c#, object

就像标题所说的那样。我的数组很少，列表也很少，我需要程序中的每个类都可以访问它们。这甚至可能吗？我很着急，在网上找不到答案，谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T06:08:25.610

创建一个名为`Global`或类似的类，并将所有数组和列表作为`static`公共属性放在那里。然后，您可以使用`Global.ArrayThis`或访问它们`Global.ListThat`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T06:07:20.407

你应该使用[静态](http://msdn.microsoft.com/en-us/library/98f28cdx.aspx)

**编辑**

例如你可以这样做

```
public class MyClass
{
    public static string str="Str";
    ////
}

public class NewClass
{
    public static string newstr="New "+MyClass.str;
    ////
} 
```

# .net - 在 VB.NET Windows 窗体中显示桌面按钮

> ID：10361069
> 
> 赞同：3
> 
> 时间：2012-04-28T06:04:58.697
> 
> 标签：.net, vb.net, winforms

在我的 vb.net windows 窗体应用程序中，我想制作一个按钮，当用户单击该按钮时，应该显示桌面（显示桌面按钮）。

考虑一个表单名称为form1，它有一个像“显示桌面”这样的按钮，当用户点击时，所有的应用程序都应该被最小化并且它应该显示桌面，是否有VB.NET Windows Form应用程序的代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T06:11:05.657

**编辑**

虽然我提出的解决方案有效，但我建议使用下面**的 Code Gray 的** [答案](https://stackoverflow.com/a/54916328/395500)，因为这是正确的方法。

* * *

在 C# 中是这样的：

```
using System;
using System.Runtime.InteropServices;

namespace ConsoleApplication1 {
class Program {
    [DllImport("user32.dll", EntryPoint = "FindWindow", SetLastError = true)]
    static extern IntPtr FindWindow(string lpClassName, string lpWindowName);
    [DllImport("user32.dll", EntryPoint = "SendMessage", SetLastError = true)]
    static extern IntPtr SendMessage(IntPtr hWnd, Int32 Msg, IntPtr wParam, IntPtr lParam);

    const int WM_COMMAND = 0x111;
    const int MIN_ALL = 419;
    const int MIN_ALL_UNDO = 416;

    static void Main(string[] args) {
        IntPtr lHwnd = FindWindow("Shell_TrayWnd", null);
        SendMessage(lHwnd, WM_COMMAND, (IntPtr)MIN_ALL, IntPtr.Zero); 
        System.Threading.Thread.Sleep(2000);
        SendMessage(lHwnd, WM_COMMAND, (IntPtr)MIN_ALL_UNDO, IntPtr.Zero);
    }
}
} 
```

我使用[在线转换器工具](http://converter.telerik.com/)来转换上述代码，请验证它是否有效

```
Imports System
Imports System.Runtime.InteropServices

Namespace ConsoleApplication1
    Class Program
        <DllImport("user32.dll", EntryPoint := "FindWindow", SetLastError := True)> _
        Private Shared Function FindWindow(lpClassName As String, lpWindowName As String) As IntPtr
        End Function
        <DllImport("user32.dll", EntryPoint := "SendMessage", SetLastError := True)> _
        Private Shared Function SendMessage(hWnd As IntPtr, Msg As Int32, wParam As IntPtr, lParam As IntPtr) As IntPtr
        End Function

        Const WM_COMMAND As Integer = &H111
        Const MIN_ALL As Integer = 419
        Const MIN_ALL_UNDO As Integer = 416

        Private Shared Sub Main(args As String())
            Dim lHwnd As IntPtr = FindWindow("Shell_TrayWnd", Nothing)
            SendMessage(lHwnd, WM_COMMAND, DirectCast(MIN_ALL, IntPtr), IntPtr.Zero)
            System.Threading.Thread.Sleep(2000)
            SendMessage(lHwnd, WM_COMMAND, DirectCast(MIN_ALL_UNDO, IntPtr), IntPtr.Zero)
        End Sub
    End Class
End Namespace 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-02-27T23:51:40.030

现有答案中提出的解决方案是依赖于 Windows 未记录方面的黑客攻击。它们现在可以工作，但它们随时可能因 Windows 更新而停止工作。

[Marshal 的解决方案](https://stackoverflow.com/a/10361106)试图在任务栏中找到实际的“显示桌面”按钮。一个明显的问题是窗口的名称和 ID 是硬编码的，这意味着如果操作系统本身发生更改，代码就会中断。这些操作系统内部没有记录，也没有用于应用程序的编程操作，并且随时可能更改。我也不知道如果用户修改他们的操作系统设置以不在任务栏中显示此按钮会发生什么。代码是否继续有效？这些消息是否仍受支持？我不知道。你？

[Harsh 的解决方案](https://stackoverflow.com/a/10361113)依赖于合成按下`Win`+`D`组合键，这是显示桌面的键盘快捷键。这有合成键盘输入的所有标准问题，另外一个缺点是它使用了旧的、不推荐使用的`keybd_event`函数 (`SendInput`是它的替代品，它解决了 的一些问题`keybd_input`，即没有办法处理错误，但没有解决合成键盘事件的更大问题。）此解决方案不太可能因 Windows 更新而中断，因为此键盘快捷键已记录在案，但可能会产生不良副作用以及与其他系统功能和/或应用程序交互的细微问题。

更好的解决方案是委托给 COM 组件 Shell32.dll，调用其记录的[`ToggleDesktop`方法](https://docs.microsoft.com/en-us/windows/desktop/shell/shell-toggledesktop)，这正是您想要做的。从 MSDN 文档：

> **此方法与任务栏上的显示桌面**按钮具有相同的效果。它要么隐藏所有打开的窗口以显示桌面，要么通过显示所有打开的窗口来隐藏桌面。该`ToggleDesktop`方法不显示用户界面，它只是调用切换操作。

由于这已记录在案，因此随着 Windows 的更新，它更有可能继续工作。由于它不依赖黑客或合成事件，因此不太可能导致细微的不兼容。它也*更容易使用*。

C# 和 VB.NET 都可以轻松访问 COM 库。在 C# 中，调用函数很简单：

```
Shell32.Shell shell = new Shell32.Shell();
shell.ToggleDesktop(); 
```

在 VB.NET 中，这变成（看 ma，没有分号）：

```
Dim shell As Shell32.Shell = New Shell32.Shell()
shell.ToggleDesktop() 
```

如果您的项目中尚不存在“Microsoft Shell 控件和自动化”（Shell32.dll 库），您可能需要添加一个引用。这是一个系统 DLL，因此它存在于所有系统上。

唯一的要求是您从使用单线程单元 (STA) 模型的线程调用此函数。换句话说，它不是线程安全的，也不处理自己的同步。然而，这并不是一个重大缺点，因为所有 Windows 窗体应用程序都使用 STA 线程：它是主线程，即处理 UI 和泵送消息的线程。UI 线程几乎总是 STA，并且保证在 WinForms 中也是如此。只是不要尝试从后台/工作线程调用它。不是你会，因为你应该只尝试显示桌面以响应直接的用户交互，无论如何这将在 UI 线程上处理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T06:11:41.737

检查此链接。这包含最小化所有显示桌面的窗口的代码。 [http://www.dreamincode.net/code/snippet2109.htm](http://www.dreamincode.net/code/snippet2109.htm)

```
Public Sub ShowDesktop()
keybd_event(VK_LWIN, 0, 0, 0)
keybd_event(77, 0, 0, 0)
keybd_event(VK_LWIN, 0, KEYEVENTF_KEYUP, 0)
End Sub

Private Declare Sub keybd_event Lib "user32" (ByVal bVk As Byte, ByVal bScan As Byte, _
ByVal dwFlags As Long, ByVal dwExtraInfo As Long)
Private Const KEYEVENTF_KEYUP = &H2
Private Const VK_LWIN = &H5B

Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs)         Handles Button1.Click
Call ShowDesktop()
End Sub 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-15T11:07:23.680

`shell:::{3080F90D-D7AD-11D9-BD98-0000947B0257}`确实是最好的解决方案，因为它是 MSDN 中已知的记录 CLSID

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2019-02-27T20:25:10.370

```
 Shell("cmd.exe /c %windir%\explorer.exe shell:::{3080F90D-D7AD-11D9-BD98-0000947B0257}", AppWinStyle.MinimizedNoFocus) 
```

最佳解决方案

# javascript - PhoneGap禁用屏幕在单页上旋转？

> ID：10361070
> 
> 赞同：6
> 
> 时间：2012-04-28T06:05:41.430
> 
> 标签：javascript, android, cordova

我正在使用 PhoneGap，并且正在使用基于 Android 网络的应用程序。

如何仅禁用一页的屏幕旋转？

我已经搜索过这个解决方案，但所有解决方案都说在 AndroidManifest.xml 文件中禁用屏幕旋转。但是，这会禁用整个应用程序的旋转。我只需要禁用一页的旋转。

这可以使用 PhoneGap / Javascript 代码来完成吗？我没有使用任何 Java 代码。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T07:15:33.373

您可以简单地删除以下标签或将其设置为 config.xml 文件中的“肖像”：

```
<preference name="orientation" value="portrait" /> 
```

有关更多信息，请阅读 phonegap 文档：

[https://build.phonegap.com/docs/config-xml](https://build.phonegap.com/docs/config-xml)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-23T10:06:08.617

我知道这篇文章已经有几个月了，但是有一个 phonegap 插件可以帮助你……它是一个可以锁定或解锁屏幕方向的插件。

[OrientationLock - Android PhoneGap](https://github.com/cogitor/PhoneGap-OrientationLock)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-17T02:51:22.250

这是锁定旋转的简单方法：

1/。在 config.xml 文件中编辑：

```
<preference name="orientation" value="portrait" /> 
```

2/。将此代码放入 Android Manifestxml 文件中：

```
<activity>
    ...
    android:screenOrientation="portrait"
    ...
</activity> 
```

# ruby-on-rails - 居中对齐分页

> ID：10361072
> 
> 赞同：1
> 
> 时间：2012-04-28T06:05:52.413
> 
> 标签：ruby-on-rails, css, ruby-on-rails-3, will-paginate

我正在使用 will_paginate 进行分页，并使用代码根据 Digg 使用的样式设置分页链接的样式。这是[“指南”的链接](http://mislav.uniqpath.com/will_paginate/)。我正在尝试使分页居中对齐，但似乎无法获得指向中心的实际链接。我尝试将它们包装在自己的 div 中并做 margin: auto; 但链接仍然保持左对齐。在此先感谢，这是 rails 和 css 代码：

导轨

```
<div class="pagination">
    <div class="page_info">
        <%= page_entries_info @vars %>
    </div>
    <div class="pagination_links">
        <%= will_paginate @vars, param_name: 'index_paginate', :container => false %>
    </div>
</div> 
```

CSS

```
.pagination {
  background: white;
  cursor: default;
  /* self-clearing method: */ }
  .pagination a, .pagination span, .pagination em {
    padding: 0.2em 0.5em;
    display: block;
    float: left;
    margin-right: 1px; }
  .pagination .disabled {
    color: #999999;
    border: 1px solid #dddddd; }
  .pagination .current {
    font-style: normal;
    font-weight: bold;
    background: #2e6ab1;
    color: white;
    border: 1px solid #2e6ab1; }
  .pagination a {
    text-decoration: none;
    color: #105cb6;
    border: 1px solid #9aafe5; }
  .pagination a:hover, .pagination a:focus {
    background: white;
    color: #000044;
    border-color: #000044; }
.pagination .pagination_links {
    margin: 0 auto;
    width: 70%;
    text-align: center;
}
  .pagination .page_info {
    margin: 0 auto;
    background: #2e6ab1;
    color: white;
    padding: 0.4em 0.6em;
    width: 22em;
    margin-bottom: 0.3em; }
  .pagination .page_info b {
    color: #000033;
    background: #6aa6ed;
    padding: 0.1em 0.25em; }
  .pagination:after {
    content: ".";
    display: block;
    height: 0;
    clear: both;
    visibility: hidden; }
  * html .pagination {
    height: 1%; }
  *:first-child + html .pagination {
    overflow: hidden; } 
```

更新：我是 CSS 新手，我认为 div 会根据其内容自动调整大小。我一直在寻找一个解决方案来解决这个问题。在我意识到我在寻找什么之后，我用谷歌搜索并找到了答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T08:31:19.460

我创建了一个 jsfiddle [http://jsfiddle.net/trickeedickee/B2Ku3/](http://jsfiddle.net/trickeedickee/B2Ku3/)供您查看答案。它要求您将带有分页类的 div 包装在一个包装 div 中，然后给它一个宽度

```
margin: 0 auto; 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T08:24:47.740

我认为你应该这样做

```
 and make width 50% in digg_pagination class

 <div class="pagination">
    <div class="page_info" style="text-align: right">
         <%= page_entries_info @vars %>
    </div>
    <div class="pagination_links">
         <%= will_paginate @vars, param_name: 'index_paginate', :container => false %>
    </div>
 </div> 
```

谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-12T21:58:46.847

如果您不希望居中具有宽度，我建议您查看[此答案](https://stackoverflow.com/a/6353345/3843101)。

# php - 使用 CodeIgniter 创建 XML

> ID：10361074
> 
> 赞同：8
> 
> 时间：2012-04-28T06:05:54.020
> 
> 标签：php, xml, codeigniter

我在 Codeigniter 中使用此代码生成 XML：

```
public function get_cuisine()
{
    $this->load->dbutil();
    $sql = "select * from cuisine";
    $query = $this->db->query($sql);
    $config = array (
        'root'    => 'root',
        'element' => 'element',
        'newline' => "\n",
        'tab'     => "\t"
    );
    echo $this->dbutil->xml_from_result($query, $config);   
} 
```

但这显示了一般的打印格式。如何让它显示为 XML 类型的页面？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-28T06:19:39.750

如果要直接输出文件，则需要设置 XML 标头：

使用 Codeigniter[输出类](http://codeigniter.com/user_guide/libraries/output.html)：

```
$xml = $this->dbutil->xml_from_result($query, $config);
$this->output->set_content_type('text/xml');
$this->output->set_output($xml); 
```

或者您可以使用纯 PHP 来设置[标题](http://php.net/manual/en/function.header.php)：

```
header('Content-type: text/xml');
echo $this->dbutil->xml_from_result($query, $config); 
```

或者您可以使用 CI[下载助手](http://codeigniter.com/user_guide/helpers/download_helper.html)：

```
$xml = $this->dbutil->xml_from_result($query, $config);
$this->load->helper('download');
force_download('myfile.xml', $xml); 
```

[或者使用文件助手](http://codeigniter.com/user_guide/helpers/file_helper.html)将其写入文件：

```
$xml = $this->dbutil->xml_from_result($query, $config);
$this->load->helper('file');
$file_name = '/path/to/myfile.xml';
write_file($file_name, $xml);
// Optionally redirect to the file you (hopefully) just created
redirect($file_name); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-25T13:25:11.220

我也有同样的问题。我已经用谷歌搜索过了。找到了这个解决方案。它非常适合我。 [点击这里获取源代码](https://github.com/accent-interactive/xml_writer)

只需下载并解压缩（解压缩）

然后将提取文件夹的 application->libraries 中的 xml_writer.php复制到**Codeigniter项目中的 library 文件夹中。**

还将application->controller 中的**xml.php**复制到您的控制器文件夹中

最后将提取文件夹视图中的**xml.php**复制到您的视图中并运行它..

就是这样...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-16T17:50:44.093

定制解决方案：

```
$mysql_data = $this->db->get('products')
                    ->result_array();
$xml = '<root>';
foreach($mysql_data as $row){
  $xml .= '<item>
             <name>'.$row['title'].'</name>
             <price>'.$row['price'].'</price>
             <image>'.$row['pic'].'</image>
           </item>';
}
$xml .= '</root>';
$this->output->set_content_type('text/xml');
$this->output->set_output($xml); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-21T16:40:35.000

对于 CodeIgniter 4，这要容易得多。您可以使用集成响应对象并执行以下操作：

```
return $this->response->setXML($xmlString); 
```

这大大简化了它，在我的例子中，我使用视图生成 XML，然后使用同样的东西输出 XML，就像：

```
return $this->response->setXML(view('myfeed')); 
```

# javascript - 使用 id 作为 var 访问 DOM 元素

> ID：10361077
> 
> 赞同：2
> 
> 时间：2012-04-28T06:06:29.663
> 
> 标签：javascript, dom

我只是偶然遇到了这个，我想检查这是否真的应该发生。

我的页面中有一个带有 id 的 div `box`。在我的 Javascript 中，我将样式设置为名为 box: 的变量`box.style.webkitTransform = "yadda yadda"`。

我认为这`box`是在范围内，声明为`var box = document.getElementById('box');`，但它不是（声明在另一个函数中！）。也没有在`var box`全球或任何其他地方定义。

但是，样式分配得很好。那么以某种方式元素的 id 可以在 Javascript 中全局使用吗？方便，但我害怕使用它。我假设如果名称用于实际变量，它将覆盖此行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T06:32:08.497

一些浏览器添加“命名元素”作为`document`或`window`对象的属性。请参阅[此 SO-question](https://stackoverflow.com/questions/3434278/ie-chrome-are-dom-tree-elements-global-variables-here)，尤其是[bobince的出色答案](https://stackoverflow.com/users/18936/bobince)

# android - android中的pdf到文本

> ID：10361078
> 
> 赞同：0
> 
> 时间：2012-04-28T06:06:46.590
> 
> 标签：android

请帮助我了解如何在 android 中将 pdf 文件转换为文本（字符串或字符）。我尝试使用 jpedal 的 jar 文件。但是 decodePdf.openPdfFile(file_name) 函数不起作用。它显示了一个问题需要 javax.swing 之类的问题。我该如何解决？请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T06:11:10.720

我用谷歌找到了[Android PDF 库](http://www.pdftron.com/pdfnet/mobile/android_pdf_library.html "Android PDF 库")，它看起来很可靠。还有很多关于这个主题的以前的[StackOverflow 问题。](https://stackoverflow.com/questions/4665957/pdf-parsing-library-for-android "StackOverflow 问题")

# assembly - 汇编程序中的无限循环

> ID：10361079
> 
> 赞同：-2
> 
> 时间：2012-04-28T06:06:50.640
> 
> 标签：assembly, x86-16

我为字符串比较制作了这个 8086 汇编程序，但它包含一个无限循环。我已经检查并重新检查。谁能找到我错的地方？

```
org 100
jmp start
str1: db "hello$"
str2: db "ello$"

start: 
lea bx,str1
mov si,bx
lea ax,str2
mov di,ax  
mov ax,1234
jmp compare

compare:
mov bl,[si]
cmp [di],bl
jne notequal
cmp bx,'$'
je equal
inc si
inc di
jmp compare

notequal:
mov ax,0000h 
hlt

equal:
mov bx,0001h
hlt
  ret 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T06:23:16.463

我不知道您检查并重新检查了什么，但是您正在从其中一个字符串中读取字节，`bl`然后将整个字符串`bx`与“$”进行比较，而不是与“$”进行比较`bl`。

你有没有考虑调试你的代码？？？

另外我不知道你为什么使用`hlt`. 如果中断被禁用，您的程序将永远不会返回。

`org 100`最后，如果这是一个用于 DOS 的 .COM 程序，那么和.COM 之间存在“微小”差异`org 100h`。

# c# - 单击jqGrid中的一行获取列的值

> ID：10361083
> 
> 赞同：2
> 
> 时间：2012-04-28T06:07:49.840
> 
> 标签：c#, asp.net, jqgrid, jqgrid-asp.net

我正在使用`Asp.Net/C#`，在我`jqGrid`用来向其中显示用户列表的页面之一中`Admin`，`jqGrid`包含以下列

1.  用户代码
2.  名
3.  中间名字
4.  姓
5.  电子邮件

这是我的标记

```
<cc1:JQGrid ID="ModifyAccountUserDetailsjqGrid"    AppearanceSettings-Caption="User Details"         runat="server" Width=800   DataSourceID=ModifyAccountDataSource>
    <Columns>
    <cc1:JQGridColumn HeaderText="User Code" ShowToolTip=false   PrimaryKey=true    DataField="UserCode"></cc1:JQGridColumn>
    <cc1:JQGridColumn HeaderText="First Name" ShowToolTip=false    DataField="FirstName"></cc1:JQGridColumn>
    <cc1:JQGridColumn HeaderText="Middle Name" ShowToolTip=false   DataField="MiddleName"></cc1:JQGridColumn>
    <cc1:JQGridColumn HeaderText="Last Name" ShowToolTip=false     DataField="LastName"></cc1:JQGridColumn>
    <cc1:JQGridColumn HeaderText="Email"  ShowToolTip=false        DataField="Email"></cc1:JQGridColumn>
    <cc1:JQGridColumn HeaderText="Contact No" ShowToolTip=false    DataField="ContactNo"></cc1:JQGridColumn>
    <cc1:JQGridColumn HeaderText="Division Name" ShowToolTip=false   DataField="DivisionName"></cc1:JQGridColumn>
    <cc1:JQGridColumn HeaderText="Last Name" ShowToolTip=false     DataField="BranchName"></cc1:JQGridColumn>
    </Columns> 
</cc1:JQGrid> 
```

我需要的是，当管理员单击一行时，我想获取单击行的用户代码的值。我是新手`jqGrid`，所以我不知道如何去做。谁能指出我正确的方向。欢迎提出任何建议。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T09:33:01.630

首先，您应该选择符合您要求的最佳回调。通常它会是`onSelectRow`，但在某些其他情况下，另一个回调像`onCellSelect`, `beforeSelectRow`or`ondblClickRow`更好。

在回调中，您将`rowid`（`id`或`<tr>`行）作为第一个参数。您可以使用`getCell`,`getRowData`或`getLocalRow`来获取某个单元格的包含。例如

```
onSelectRow: function (id) {
    // get data from the column 'userCode'
    var userCode = $(this).jqGrid('getCell', 'userCode');
    alert(userCode);
} 
```

或者

```
onSelectRow: function (id) {
    var localRowData = $(this).jqGrid('getLocalRow');
    alert(localRowData.userCode);
} 
```

`datatype: 'local'`如果 jqGrid 具有本地数据（您使用或远程数据类型，例如`datatype: 'json'`与 结合使用） ，则最后一种方法是最好的`loadonce: true`。

**更新**：在评论中的一些帖子和问题文本的更新之后，我看到您使用[jqSuite 用于 ASP.NET WebForms](http://www.trirand.net/download.aspx)或其他基于 jqGrid 的*商业产品*，而不是免费的开源 JavaScript 库[jqGrid](https://stackoverflow.com/tags/jqgrid/info)。我不使用 jqSuite，也不知道应该如何在 jqSuite 中实现 JavaScript 回调。

我可以建议您使用新的 jqGrid 4.3.2 功能：[jQuery like events](http://www.trirand.com/blog/?page_id=393/feature-request/usage-of-jquery-events-in-jqgrid-together-with-callback-functions-used-currently/#p25559)。你可以做的是像这样的代码

```
var $grid = jQuery("#<%= ModifyAccountUserDetailsjqGrid.ClientID %>");
$grid.bind("jqGridSelectRow", function (id) {
    var userCode = $(this).jqGrid('getCell', 'userCode');
    alert(userCode);
}); 
```

或者

```
var $grid = jQuery("#<%= ModifyAccountUserDetailsjqGrid.ClientID %>");
$grid.bind("jqGridSelectRow", function (id) {
    var localRowData = $(this).jqGrid('getLocalRow');
    alert(localRowData.userCode);
}); 
```

像“jqGridSelectRow”这样的事件的事件处理程序可以在创建网格之前或之后定义（但在创建等于的`<table>`元素之后）。此外，如果需要，您可以将更多定义为一个事件处理程序。这是非常实用的，您希望在您的项目中为所有网格实施一些通用操作。`id``<%= ModifyAccountUserDetailsjqGrid.ClientID %>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T07:18:33.783

以下代码将帮助您通过一些修改来获取您的案例中的用户代码

```
 <asp:SqlDataSource runat="server" ID="SqlDataSource1" 
    ConnectionString="<%$ ConnectionStrings:SQL2008_449777_fhsConnectionString %>" 
     SelectCommand="SELECT [OrderID], [RequiredDate], [ShipName],
      [ShipCity], [Freight] FROM [Orders]">    </asp:SqlDataSource>    
      <trirand:JQGrid runat="server" ID="JQGrid1" DataSourceID="SqlDataSource1" 
```

宽度="600px" >

以下是 jquery，它为您提供列 ID

```
<script type="text/javascript">
function getSelectedRow() { 
       var grid = jQuery("#<%= JQGrid1.ClientID %>");
        var rowKey = grid.getGridParam("selrow");
        if (rowKey)
            alert("Selected row primary key is: " + rowKey); 
          else
            alert("No rows are selected");
      }
    function selectSecondRow() {
        var grid = jQuery("#<%= JQGrid1.ClientID %>");
        grid.setSelection('10249');
        } 
   </script> 
```

或查看以下网址：

[http://www.trirand.net/examples/grid/selection/selectedrow_client/default.aspx](http://www.trirand.net/examples/grid/selection/selectedrow_client/default.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T07:20:21.500

请通读 API。

希望这是您正在寻找的：[http ://www.trirand.com/jqgridwiki/doku.php?id=wiki:events](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aevents)

onSelectRow 事件

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T06:00:42.050

最后为了得到我需要的东西，我从[Example](http://www.trirand.net/examples/grid/selection/masterdetail/default.aspx)得到了很多帮助 ，所以解决方案是在 jqGrid 的 Rowselecting 事件上，我使用 jqGrid.SelectedRow 来获取我的单元格的值。

例子：

```
protected void ModifyAccountUserDetailsjqGrid_RowSelecting(object sender, Trirand.Web.UI.WebControls.JQGridRowSelectEventArgs e)
        {
            ModifyAccountUserDetailsjqGrid.SelectedRow;   
        } 
```

PS Oleg 非常感谢您的慷慨帮助。非常感谢。

# ios - iOS：Tapku日历：需要选择多个日期

> ID：10361084
> 
> 赞同：0
> 
> 时间：2012-04-28T06:07:51.620
> 
> 标签：ios, date, calendar, tapku

我一直在检查 Tapku 日历代码，并在这里搜索并阅读了所有相关的问题和回复，但似乎没有一个真正为问题提供正确的解决方案：如何以编程方式或通过点击选择多个日期。只需在两个相邻日期上放置一个简单的蓝色瓷砖就会让我高兴:-) 下面的帖子似乎有一个类似的问题，但答案不起作用。除非月份发生变化，否则代码中的位置不会被命中 - 这不正是我想要的。更好的是 selectDate 的更高级别的实现：它将选择多个日期。但是，如果任何人都更熟悉代码，那么在库中进行调整的正确位置将是一个很好的起点。非常感激。

[iOS：Tapku 日历库 - 允许为当月选择多个日期](https://stackoverflow.com/questions/9686684/ios-tapku-calendar-library-allow-selecting-multiple-dates-for-current-month)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T20:50:32.517

因此，在逐步浏览代码之后，我有了这个使用锤子的基本方法。我采用了 TKCalendarMonthView.m->selectDay:day 方法中的大部分代码。我创建的方法基本上是创建一个新的 TKCalendarMonthTiles 对象并填写详细信息，然后将子视图添加到主 TKCalendarMonthTiles 对象（self）上。我标记了子视图，因此如果它们在方法开始时存在，我可以首先将它们删除，因为我只想再选择一天（如果您希望它们保留在 UI 中，可以将子视图保留为附加状态）。我不跟踪日期或存储它们或任何东西，但这符合我的需要。

这个想法是简单地创建一个视图，其中包含您要使用的正确平铺图像以及包含实际“日期”的文本标签（如“14”）的视图，然后将这些视图作为子视图添加到 self. 借用的代码对日期图块在网格中的“位置”进行所有计算，因此视图绘制在正确的位置。代码：

```
- (void)markDay:(int)day {

// First, remove any old subviews
[[self viewWithTag:42] removeFromSuperview];
[[self viewWithTag:43] removeFromSuperview];

int pre = firstOfPrev < 0 ?  0 : lastOfPrev - firstOfPrev + 1;
int tot = day + pre;
int row = tot / 7;
int column = (tot % 7)-1;

TKCalendarMonthTiles *deliveryTile = [[TKCalendarMonthTiles alloc] init];
deliveryTile.selectedImageView.image = [UIImage imageWithContentsOfFile:TKBUNDLE(@"TapkuLibrary.bundle/Images/calendar/MyDateTile.png")];
deliveryTile.currentDay.text = [NSString stringWithFormat:@"%d",day];

if(column < 0){
    column = 6;
    row--;
}

CGRect r = deliveryTile.selectedImageView.frame;
r.origin.x = (column*46);
r.origin.y = (row*44)-1;
deliveryTile.selectedImageView.frame = r;
deliveryTile.currentDay.frame = r;
[[deliveryTile selectedImageView] setTag:42];
[[deliveryTile currentDay] setTag:43];
[self addSubview:deliveryTile.selectedImageView];
[self addSubview:deliveryTile.currentDay];
} // markDay: 
```

我在 TKCalendarMonthView.m->selectDay:day 的末尾以及 TKCalendarMonthView.m->-reactToTouch:down 的末尾调用此方法。到目前为止，有限的测试非常好。关闭以弄清楚为什么时区设置一直在考虑明天（我在太平洋时区）。

干杯，迈克尔

# c++ - 将二维数组传递给函数而不指定二维时的编译器错误

> ID：10361093
> 
> 赞同：2
> 
> 时间：2012-04-28T06:08:33.187
> 
> 标签：c++, arrays, compiler-errors, argument-passing, multidimensional-array

为什么会这样：

```
void SomeFunction(int SomeArray[][30]); 
```

但这不是吗？

```
void SomeFunction(int SomeArray[30][]); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T06:10:49.573

直观地说，因为编译器无法计算第二个声明中形式元素的常量大小。那里的每个元素都有`int[]`在编译时没有已知大小的类型。

形式上，因为标准 C++ 规范不允许这种语法！

您可能想使用C++11`std::array`的`std::vector`模板。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T06:12:24.907

因为，当将数组作为参数传递时，第一个`[]`是可选的，但是第二个以后的参数是强制性的。这就是语言语法的约定。

此外，您实际上并没有传递数组，而是传递了一个指向元素数组的指针`[30]`。为了更好地解释，请看以下内容：

```
T a1[10], a2[10][20];
T *p1;    // pointer to an 'int'
T (*p2)[20];  // pointer to an 'int[20]'

p1 = a1;  // a1 decays to int[], so can be pointed by p1
p2 = a2;  // a2 decays to int[][20], so can be pointed by p2 
```

还要记住，`int[]`是另一种形式，`int*`是`int[][20]`另一种形式`int (*)[20]`

# android - android 应用程序错误：应用程序已意外停止，重试甚至无法启动应用程序

> ID：10361095
> 
> 赞同：0
> 
> 时间：2012-04-28T06:09:03.250
> 
> 标签：android, android-emulator

我正在编辑一个基于我之前做过的类似应用的安卓应用。这次它不起作用，但我不知道为什么。

应用程序错误：

```
The Application Buchanan Java Quiz Game (process hu.csc395.javaquizgame) has stopped unexpectedly Please Try again. 
```

我的日志显示：

```
04-28 04:31:40.326: D/AndroidRuntime(337): Shutting down VM
04-28 04:31:40.326: W/dalvikvm(337): threadid=1: thread exiting with uncaught exception    (group=0x40015560)
04-28 04:31:40.395: E/AndroidRuntime(337): FATAL EXCEPTION: main
04-28 04:31:40.395: E/AndroidRuntime(337): java.lang.RuntimeException: Unable to start activity      ComponentInfo{hu.csc395.javaquizgame/hu.csc395.javaquizgame.Buchanan_JavaQuizGameActivity}:    java.lang.IllegalArgumentException 
```

我不知道这些在哪里，所以也许我只是想念它。

完整的 Logcat 除外：

```
 04-28 04:31:40.326: D/AndroidRuntime(337): Shutting down VM
    04-28 04:31:40.326: W/dalvikvm(337): threadid=1: thread exiting with uncaught exception (group=0x40015560)
    04-28 04:31:40.395: E/AndroidRuntime(337): FATAL EXCEPTION: main
04-28 04:31:40.395: E/AndroidRuntime(337): java.lang.RuntimeException: Unable to start activity ComponentInfo{hu.csc395.javaquizgame/hu.csc395.javaquizgame.Buchanan_JavaQuizGameActivity}: java.lang.IllegalArgumentException
    04-28 04:31:40.395: E/AndroidRuntime(337):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
    04-28 04:31:40.395: E/AndroidRuntime(337):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
   04-28 04:31:40.395: E/AndroidRuntime(337):   at android.app.ActivityThread.access$1500(ActivityThread.java:117)
   04-28 04:31:40.395: E/AndroidRuntime(337):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
   04-28 04:31:40.395: E/AndroidRuntime(337):   at android.os.Handler.dispatchMessage(Handler.java:99)
   04-28 04:31:40.395: E/AndroidRuntime(337):   at android.os.Looper.loop(Looper.java:123)
   04-28 04:31:40.395: E/AndroidRuntime(337):   at android.app.ActivityThread.main(ActivityThread.java:3683)
   04-28 04:31:40.395: E/AndroidRuntime(337):   at java.lang.reflect.Method.invokeNative(Native Method)
   04-28 04:31:40.395: E/AndroidRuntime(337):   at java.lang.reflect.Method.invoke(Method.java:507)
   04-28 04:31:40.395: E/AndroidRuntime(337):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
   04-28 04:31:40.395: E/AndroidRuntime(337):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
   04-28 04:31:40.395: E/AndroidRuntime(337):   at dalvik.system.NativeStart.main(Native Method)
   04-28 04:31:40.395: E/AndroidRuntime(337): Caused by: java.lang.IllegalArgumentException
   04-28 04:31:40.395: E/AndroidRuntime(337):   at java.util.Random.nextInt(Random.java:186)   
   04-28 04:31:40.395: E/AndroidRuntime(337):   at hu.csc395.javaquizgame.Buchanan_JavaQuizGameActivity.resetQuiz(Buchanan_JavaQuizGameActivity.java:121)
   04-28 04:31:40.395: E/AndroidRuntime(337):   at hu.csc395.javaquizgame.Buchanan_JavaQuizGameActivity.onCreate(Buchanan_JavaQuizGameActivity.java:85)
   04-28 04:31:40.395: E/AndroidRuntime(337):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
   04-28 04:31:40.395: E/AndroidRuntime(337):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
   04-28 04:31:40.395: E/AndroidRuntime(337):   ... 11 more
   04-28 04:34:37.995: I/Process(337): Sending signal. PID: 337 SIG: 9 
```

我的控制台显示一切正常运行，直到：

```
 [2012-04-28 01:48:17 - Emulator] emulator: WARNING: Unable to create sensors port: Unknown error
[2012-04-28 01:48:17 - Buchanan_JavaQuizGame] New emulator found: emulator-5554 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T06:16:44.733

可能是因为同时打开了两个模拟器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T06:50:24.573

在您的代码中的某处，您使用了类的`nextInt`方法，`Random`我认为您将其传递给负数`integer`，这将抛出`IllegalArgumentException`（它要求方法参数为正数）。

这发生在您的`resetQuiz`方法中，因此请检查您在代码中所做的事情。

# dependency-walker - Dependency Walker 如何工作？

> ID：10361099
> 
> 赞同：2
> 
> 时间：2012-04-28T06:09:56.093
> 
> 标签：dependency-walker

我希望能够编写自己版本的依赖遍历器工具（我认为这是学习事物的好方法）。但是，给定一个 PE 文件（dll/exe），我没有必要的知识能够知道——它的依赖是什么。

我希望能参考一个可以为我提供这些知识的地方（教程/文章/文学/等..）。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T16:52:12.453

原则上是直截了当的（我脑海中的伪代码）：

```
Create empty dependency list (list 1)
Create empty list of references yet to be looked at (list 2)
Add main module to list 2
repeat
  Select first module in list 2
  Open the PE file
  Parse header to find import section
  Enumerate import modules
  for each module imported
    if not already in list 1, Add it
    if not already in list 2, Add it
  Remove from list 2
until list 2 is empty.
Result in list 1. 
```

要弄清楚如何实际解析 PE 的相关部分，您可以从 msdn.microsoft.com 获取 Portable Executable 规范。

# javascript - OS X 滚动条样式更改时是否会触发浏览器事件？

> ID：10361100
> 
> 赞同：14
> 
> 时间：2012-04-28T06:10:10.627
> 
> 标签：javascript, macos, webkit, dom-events, osx-lion

OS X Lion 及更高版本允许用户打开/关闭 iOS 风格的浮动滚动条 - 通过系统偏好设置手动或插入鼠标。

基于 WebKit 的浏览器（也许还有 Opera？）会立即切换它们的滚动条样式 -**发生这种情况时是否会触发事件？**（WebKit-only 就可以了）

* * *

## 一些注意事项：

*   OS X`NSPreferredScrollerStyleDidChangeNotification`在用户切换滚动条样式时触发

*   WebKit 似乎没有订阅此事件（grep 时没有命中）。

*   我怀疑 WebKit 正在通过`NSViewBoundsDidChangeNotification`事件处理这个问题（我假设它会为滚动视图的内容视图触发）。

*   WebKit[在 内`-[WebHTMLView _frameOrBoundsChanged]`](http://trac.webkit.org/browser/trunk/Source/WebKit/mac/WebView/WebHTMLView.mm#L1199)处理此事件，这似乎是一个潜在的重新布局点。

*   `WebPDFView`在和检查员的通知中也有提到这个通知`WebNodeHighlight`——两者似乎都与本案无关。

*   [`-[WebDynamicScrollBarsView adjustForScrollOriginChange]`](http://trac.webkit.org/browser/trunk/Source/WebKit/mac/WebView/WebDynamicScrollBarsView.mm#L244)似乎表明事件可能不会被触发（如果是这样，很高兴看到一些确认）

* * *

轮询更改对我来说不是一个可接受的答案（用户更改值后性能和布局跳跃）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T17:55:30.243

从我目前所读的所有内容来看，在这种样式转换期间**没有触发 DOM 事件。**

最有说服力的例子是创建一个`overflow: auto`div，然后通过[`monitorEvents`](http://www.briangrinstead.com/blog/chrome-developer-tools-monitorevents). 更改滚动条样式时不会记录任何内容。

我在这个问题上有一个[开放的 webkit 错误](https://bugs.webkit.org/show_bug.cgi?id=85287)（尽管它可能很小，我们不会看到任何动作）。

# wpf - WPF 绑定不起作用

> ID：10361110
> 
> 赞同：1
> 
> 时间：2012-04-28T06:11:26.030
> 
> 标签：wpf, binding

我有简化的例子：

XAML：

```
<CheckBox IsChecked="{Binding Path=IsSelected, Mode=TwoWay}" Name="cb" />
<Button Name="button1" Click="button1_Click" /> 
```

后面的代码：

```
public partial class MainWindow : Window
{
    private ObservableCollection<MyObject> collection = new ObservableCollection<MyObject>();

    public MainWindow()
    {
        InitializeComponent();

        collection.Add(new MyObject(true));
        //grid.DataContext = collection[0];
    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        collection[0].IsSelected = false;
    }
}

public class MyObject
{
    public bool IsSelected { get; set; }

    public MyObject(bool isSelected)
    {
        this.IsSelected = isSelected;
    }
} 
```

**尽管 collection[0].IsSelected 已更改，但 cb.IsChecked 不会通过单击按钮而更改。**

即使我取消注释 grid.DataContext = collection[0]; - 没有改变。

在实际示例中，我在列表框的项目模板中有相同的复选框。所以行为是一样的——复选框的选择不会改变。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T06:29:38.823

您需要在 MyObject 类型上实现 INotifyPropertyChanged

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T07:23:21.973

请尝试以下代码：

```
public class MyObject : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    private void NotifyPropertyChanged(string info)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(info));
        }
    }

    private bool _isSelected;

    public bool IsSelected
    {
        get { return _isSelected; }
        set
        {
            _isSelected = value;
            NotifyPropertyChanged("IsSelected");
        }
    }

    public MyObject(bool isSelected)
    {
        this.IsSelected = isSelected;
    }
} 
```

# jquery - html div滚动条错误

> ID：10361117
> 
> 赞同：0
> 
> 时间：2012-04-28T06:12:00.570
> 
> 标签：jquery, css, html, google-chrome

如何将 z-index 位置应用于 html 滚动条。![在此处输入图像描述](../Images/a919bd302ce50fe701860ec02a4b1c9e.png)

问题是显示背景文本的滚动条。

该问题仅出现在 google chrome 浏览器中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T06:17:29.480

如果没有正确定位，Z-index 将不起作用。尝试添加`position: relative;`到该 textarea 元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T07:42:27.050

滚动条的父容器的不透明度 < 1.0，这意味着该容器的所有子容器最多具有该不透明度。

如何解决？

使用两个容器。

```
<div> <!-- Position this centrally, i.e what you have, but 1.0 opacity and no background -->
  <div></div> <!-- textarea/div with overflow & scrollbars here -->
  <div></div> <!-- content here with background color, opacity < 1.0 etc -->
</div> 
```

# jquery - 如何关闭 div（模态）点击外部。Pinterest 和 Facebook 方式

> ID：10361118
> 
> 赞同：4
> 
> 时间：2012-04-28T06:12:11.727
> 
> 标签：jquery, css, facebook, pinterest

做一个模态的经典方法是一个带有内容（对话框）的 div 和一个 z-index 较低的 div（覆盖）然后，我可以在覆盖上绑定点击事件并隐藏内容对话框。

```
<div class="dialog">...</div>
<div class="overlay" style="background-color:rgba(255, 255, 255, 0.9)"> 
```

但我注意到 Pinterest 和 Facebook 将其合并为一个 div。

```
<div class="overlay" style="background-color:rgba(255, 255, 255, 0.9);position: fixed; z-index: 9999;top: 0;right: 0;bottom: 0;left: 0;">
      <div class="dialog" style="position: static;"></div>
</div> 
```

但是在这种方法中，我如何才能将点击事件绑定到仅在没有对话框的叠加层中关闭 de 对话框？

[http://jsfiddle.net/mCupS/9/](http://jsfiddle.net/mCupS/9/)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-28T06:15:48.683

通过做这样的事情：

```
$('.modal').click(function(){
     $('.modal, .inner').hide(); 
});                                    
$('.inner').click(function(e){
   e.stopPropagation();
});              
​ 
```

[http://jsfiddle.net/mCupS/10/](http://jsfiddle.net/mCupS/10/)

[`event.stopPropagation()`](http://api.jquery.com/event.stopPropagation/): 防止事件在 DOM 树中冒泡，防止任何父处理程序收到事件通知。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T06:17:20.490

`stopPropagation`将停止事件传播到父控件，您将不会获得模型点击事件：

```
$('.modal ').click(function(){
    alert("a");
});

$('.inner').click(function(e){
    alert("b");
    e.stopPropagation();
}); 
```

**编辑**，实现上述目的的更好方法。

正如评论中指出的那样，可能有更好的方法，然后上面建议的解决方案如[The Dangers of Stopping Event Propagation](https://css-tricks.com/dangers-stopping-event-propagation/)中讨论的那样。通过这种方式，您可以确保内部项目不会被单击隐藏。

[现场演示](http://jsfiddle.net/mCupS/177/)

```
$(document).on('click', function(event) {
  if (!$(event.target).closest('.inner').length) {
    $('.modal .inner').hide();
  }
}); 
```

# delphi - 什么决定了 UnicodeString 类型的变量代表 Unicode 字符串还是 ANSI 字符串？

> ID：10361121
> 
> 赞同：0
> 
> 时间：2012-04-28T06:12:39.807
> 
> 标签：delphi, unicode, delphi-xe2

我对 Delphi 有经验，但对 Unicode 很陌生。

关于 UnicodeString (System.UnicodeString) 的嵌入式 Delphi XE2 文档说：

“Delphi 使用了几种字符串类型。UnicodeString 可以包含 Unicode 和 ANSI 字符串。

对此类型的支持包括以下功能：

与可用内存一样大的字符串。通过共享引用有效地使用内存。根据当前语言环境评估字符串的例程和运算符。尽管它的名字，UnicodeString 可以表示 ANSI 字符集字符串和 Unicode 字符串。"

我不明白“可以”这个词是什么意思。（“它可以同时包含 Unicode 和 ANSI。” ... “尽管它的名字，UnicodeString 可以表示 ANSI 字符集字符串和 Unicode 字符串。”）

我的问题：是什么决定了 UnicodeString 类型的变量代表 Unicode 字符串还是 ANSI 字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T15:34:02.697

文档已过时。`UnicodeString`在 XE2 中只能包含 Unicode 数据。

在 CB2009 和 D2009`UnicodeString`首次引入时，有一些案例，主要是在 C++<->Delphi 交互中，其中 RTL 允许将 Ansi 数据存储在 a 中`UnicodeString`，将 Unicode 数据存储在 an 中`AnsiString`，以帮助用户将遗留的 Ansi 代码迁移到统一码。 `UnicodeString`并且`AnsiString`确实有一个统一的内部结构，并且 Delphi 编译器有一个`{$STRINGCHECKS}`指令可以检测任何差异并在需要时执行静默数据转换。虽然它确实有效，但如果你不小心，它也会产生微妙的副作用。

到 XE 发布时，Embarcadero 认为用户已经有足够的时间进行迁移，因此`{$STRINGCHECKS}`删除了指令和支持 RTL 功能。`UnicodeString`并且`AnsiString`仍然具有统一的内部结构，因此在技术上可以将 Ansi 数据存储在 a`UnicodeString`中，将 Unicode 存储在 an 中`AnsiString`，但是您必须直接手动操作内存来手动执行此操作，编译器/RTL 不会在“正常”代码中执行此操作，并且在存在差异时将不再执行静默转换，因此如果您不小心，可能会发生数据损坏和/或崩溃。

# wpf - 在 WPF 中创建 Common DataGridTemplateColumn

> ID：10361122
> 
> 赞同：5
> 
> 时间：2012-04-28T06:12:49.130
> 
> 标签：wpf, xaml, datagridtemplatecolumn

我需要创建一个 common `DataGridTemplateColumn`，以便我可以在具有不同对象和属性的应用程序中使用它。

这是一些示例代码，我在我的项目中使用

```
<DataGridTemplateColumn Width="100*">
    <DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding Path=Age}"/>
        </DataTemplate>
    </DataGridTemplateColumn.CellTemplate>   
    <DataGridTemplateColumn.CellEditingTemplate>
        <DataTemplate>
            <TextBox Text="{Binding Path=Age}"/>
        </DataTemplate>
    </DataGridTemplateColumn.CellEditingTemplate>
</DataGridTemplateColumn> 
```

我需要一个通用版本的代码，以便我可以将其`DataTemplate`放入`app.xaml`并在我的代码中引用它

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-28T09:16:24.967

你不能`DataGridTemplateColumn`直接模板。*但幸运的是，您可以为单元格*使用全局模板。看一个例子：

**应用程序.xaml**

```
<Application.Resources>

    <DataTemplate x:Key="CellEdintingTemplate">
        <TextBox Text="{Binding Path=Age}" />
    </DataTemplate>
    <DataTemplate x:Key="CellTemplate">
        <TextBlock Text="{Binding Path=Age}" />
    </DataTemplate>

</Application.Resources> 
```

**使用**

```
 <DataGrid>
        <DataGrid.Columns>
            <DataGridTemplateColumn 
                 CellEditingTemplate="{StaticResource CellEdintingTemplate}" 
                 CellTemplate="{StaticResource CellTemplate}" />
        </DataGrid.Columns>
    </DataGrid> 
```

# ruby-on-rails-3 - 我的 rspec 助手应该去哪里？

> ID：10361132
> 
> 赞同：7
> 
> 时间：2012-04-28T06:14:55.953
> 
> 标签：ruby-on-rails-3, rspec

我想写一个只在我的规范文件中使用的助手，我不知道这段代码应该去哪里。

我不是在尝试测试应用程序助手，也不想创建仅用于测试的应用程序助手。

什么是好的做法？

谢谢，

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-28T07:58:42.877

通常我把这些放在`spec/support/spec_helpers`. 然后，我将这些模块包含在适当的示例中。

如果您有一些对某种类型的所有规范（例如所有请求规范）有用，那么您可以这样做

```
config.include SomeHelper, :type => :request 
```

它将将该模块包含到您的所有请求示例组中。

# php - 信号处理程序返回时跳出循环

> ID：10361133
> 
> 赞同：2
> 
> 时间：2012-04-28T06:15:15.883
> 
> 标签：php, loops, signals, break

被信号中断时是否可以跳出循环？当我运行以下代码时，如果我在循环的第一次迭代期间发送 SIGINT，则会调用信号处理程序，但随后我又回到了循环中。我想处理信号，然后跳过循环的其余部分（不退出脚本）。

```
<?php
  declare(ticks = 1);

  function sig_handler($signo) {
    switch($signo) {
      case SIGINT:
        echo 'SIGINT' . PHP_EOL;
        break;
      default:
    }
  }

  pcntl_signal(SIGINT, 'sig_handler');

  $vars = array('foo', 'bar', 'baz');
  foreach ($vars as $var) {
    echo $var . PHP_EOL;
    sleep(3);
  }

  // Do other stuff
?> 
```

输出（每次睡眠时按 ctrl+C）：

```
$ php foreach_test.php
foo
SIGINT
bar
SIGINT
baz
SIGINT 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-06T16:10:28.407

从它的外观来看，你的“break”语句打破了“switch”，而不是循环。而是这样说：

```
if ($signo == SIGINT){
    echo 'SIGINT' . PHP_EOL;
    break;
} 
```

# javascript - 页面底部的固定 div 在给定位置停止的问题

> ID：10361143
> 
> 赞同：3
> 
> 时间：2012-04-28T06:17:03.930
> 
> 标签：javascript, jquery, html, css

我们需要一个位于页面底部的页脚工具栏，并在页面滚动到该区域下方时粘在某个区域。

我们确实使用以下脚本实现了这一点：

[固定页面底部的 div 停止在给定位置](https://stackoverflow.com/questions/5141425/fixed-div-on-bottom-of-page-that-stops-in-given-place)

但是在某些页面上存在一个问题，页脚工具栏刚刚从页面中消失，然后在页面进一步向下滚动时再次出现。

我们发现这个特定问题只出现在少数页面上，当页面有一些内容，如图像、视频或 Ajax 加载其他内容时，在页面加载后填充了内容（或正在填充空间）。

我不知道如何解决这个问题。

这是来自带有问题页面的实时站点的链接。

[http://www.sandiegopchelp.com/services/cellphone-repair/htc/](http://www.sandiegopchelp.com/services/cellphone-repair/htc/)

[http://www.sandiegopchelp.com/top-10-tips-to-help-secure-your-computer/](http://www.sandiegopchelp.com/top-10-tips-to-help-secure-your-computer/)

[http://www.sandiegopchelp.com/notes-on-the-phablet-does-the-world-need-one](http://www.sandiegopchelp.com/notes-on-the-phablet-does-the-world-need-one) /

它通常在有很多评论的博客文章中更明显。可能是由于在页面完全加载后加载了 Disqus 评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T16:36:24.823

这看起来怎么样？

[http://jsfiddle.net/LukeGT/NxSc3/](http://jsfiddle.net/LukeGT/NxSc3/)

```
$(window).scroll(function() {

    $('#bar').css('position', 'static');
    console.log($('#bar').position().top);
    console.log($(window).scrollTop() + $(window).height());

    if ($(window).scrollTop() + $(window).height() < $('#bar').position().top + $('#bar').height()) {
        $('#bar').css('position', 'fixed');
    }
});

setTimeout(function() {
    $('#extra').show();
}, 1000);​ 
```

我通过仅在 1 秒后显示一些额外的 div 来模拟图像的延迟加载。我认为问题出在这样一个事实，即在栏的代码运行后页面的高度发生了变化，因此如果页面较短（没有图像/ajax 等），它的行为应该如此。

我所做的是每次滚动页面时将条放置在页面底部的位置，从顶部计算它的高度，并将其与滚动高度进行比较。如果我们离得太远，它会将栏定位在页面底部的固定位置，否则将不理会它。它在 Chrome 中运行顺利，但我没有在其他地方测试过。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T22:48:45.150

我想这是`$(window).height()`函数的问题。[在这里](https://stackoverflow.com/questions/5205838/calculating-height-using-jquery-differs-in-firefox-and-chrome)检查。对于所有动态内容，如图像、视频或 Ajax 加载的内容，高度不会添加到结果中，`$(window).height()`除非它在 ​​HTML 或 CSS 中的某处指定（从引用的链接中我看到这仅在 Chrome 中发生。你可能想要确认这一点）。对于这些动态内容，您可以尝试`height`在 html 中添加属性或`height`在相应样式中添加属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T04:25:55.037

尝试在粘性 div 的位置上方添加一个高度为零的 div，它会在页面调整大小时保持在该位置，然后在滚动时检查该位置以确定粘性 div 应该停止的位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T15:42:46.190

在初始状态下，您的 div 处于其中，`position: relative`因此它的偏移量基于容器元素，而不是页面的总高度。该变量`stickyOffset`是基于该相对偏移量设置的，这就是为什么它在滚动时比预期更快地被剪辑，也是为什么它在您的 JSFiddle 中工作的原因，因为容器本身就是页面（Iframe）。

在您的`$(document).ready`函数中，您不仅需要添加页脚的偏移量，还需要添加包含元素顶部的其余偏移量，以便偏移量基于总页面而不是包含的 div。

希望有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-28T06:50:06.013

这不是答案，但我在检查您的网站时发现了一些东西...这是您的实际 HTML，当它可以正常工作时...

```
<div class="footer-toolbar-container" id="sticky_for_a_while" style="position: fixed; "> 
```

但是当它不工作时，`Position`属性会从`Fixed`变为`Relative`。

```
<div class="footer-toolbar-container" id="sticky_for_a_while" style="position: relative; "> 
```

你可以检查你的脚本或在这里发布你的脚本......

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-12T07:59:51.247

最后通过两种技术解决了这个问题，尽可能使用 CSS 设置显式高度，并在加载所有图像后延迟 jQuery 函数。参考这个：[延迟一些jQuery函数，直到所有图像都完全加载](https://stackoverflow.com/questions/10863277/delay-some-jquery-function-until-all-images-are-loaded-completely)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-04T08:16:07.437

[通过使用 chrome 在http://www.sandiegopchelp.com/services/cellphone-repair/htc/](http://www.sandiegopchelp.com/services/cellphone-repair/htc/)上查看您的示例，我可以看到您的页脚在到达“相关链接”部分时消失了。此时，您将页脚的位置设置为“相对”，因此它将在文档的常规流程中替换它，并且它的位置实际上在“相关链接”部分下方，这就是它从屏幕上消失的原因（在“相关链接”）。

但是你计算了它应该在页面加载时变得相对的位置，只有在添加“相关链接”部分后你应该重新计算它的位置，因为它改变了页面高度（我知道你是在之后添加的，对吗​​？）。

# android - 如何删除android中sd卡中的所有文件？

> ID：10361145
> 
> 赞同：0
> 
> 时间：2012-04-28T06:17:10.350
> 
> 标签：android, android-sdcard

> **可能重复：**
> [如何在 Android 2.2 中以编程方式删除 sdcard 的全部内容](https://stackoverflow.com/questions/6006811/how-to-delete-entire-contents-of-sdcard-programmatically-in-android-2-2)

我想以**编程方式清除 android 设备中的所有文件**。

任何人都可以建议我的方式或代码，因此我可以执行此操作...

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T06:19:03.887

```
public static boolean deleteDirectory(File path) {
        // TODO Auto-generated method stub
        if( path.exists() ) {
            File[] files = path.listFiles();
            for(int i=0; i<files.length; i++) {
                if(files[i].isDirectory()) {
                    deleteDirectory(files[i]);
                }
                else {
                    files[i].delete();
                }
            }
        }
        return(path.delete());
    } 
```

添加代码只需在您需要使用要删除的目录的路径或要删除的文件时调用它

# php - 我们可以将 python 和 php 都保留在同一个 apache 服务器上吗？

> ID：10361151
> 
> 赞同：5
> 
> 时间：2012-04-28T06:17:59.933
> 
> 标签：php, python, apache

我熟悉 Apache 服务器上的 PHP-MYSQL，现在我想尝试使用 Apache 和 Mysql 的 PYTHON。我的机器已经安装了 Apache-PHP-MYSQL。所以我想知道是否可以在同一台服务器上配置 Python。请让我知道一些有关此文档的链接。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T06:20:03.163

您可能需要[mod_wsgi](http://code.google.com/p/modwsgi/)，它允许您从 httpd运行 Python 代码（针对[WSGI构建）。](http://www.wsgi.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T06:22:01.737

绝对有可能，事实上你听说过[PiP](https://www.csh.rit.edu/~jon/projects/pip/)吗？我什至在没有画中画的情况下调用了 Python，并且之前在 HTML 表中回显了行。奇迹般有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T06:29:53.963

当然可以，它应该只是插入到 apache 中的另一个模块。

您可以使用旧的 CGI 方式（[http://www.modpython.org/](http://www.modpython.org/)），但现在我们有一个快速的[WSGI](http://code.google.com/p/modwsgi/)，如上面的帖子所述。

我建议您查看[http://docs.python.org/howto/webservers.html](http://docs.python.org/howto/webservers.html)，我认为它涵盖了您需要的所有信息。

# iphone - 当表中没有行时，在 tableView 后面放置标签

> ID：10361156
> 
> 赞同：0
> 
> 时间：2012-04-28T06:19:41.797
> 
> 标签：iphone, uitableview

我正在查看 iPhone 上的闹钟应用程序，我看到当他们为 UITableViewCells 使用自定义图形作为灰色渐变时，当表格中没有单元格时，背景看起来类似于分组的表格视图单元格背景，标签显示无警报。

我怎样才能达到这个效果？目前在我的视图控制器中，我有 viewController 的视图、“无警报”标签和 tableView。当我在表格中有零警报时，我只显示标签，并隐藏表格，当有警报时，反之亦然。我遇到的问题是图形。

作为测试，如果我将表格的背景颜色更改为亮橙色，则该橙色会照射到我的 tableViewCells。tableViewCells 和 tableView 都设置为默认的白色，而不是 clearColor，但 viewController 的视图仍然可以通过。我错过了什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T08:10:43.140

使用 XIB 文件将视图的背景设置为“组表背景颜色”。我们可以为我们的视图设置相同的背景图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T08:53:15.290

您需要确保“无警报”标签是视图层次结构中最顶层的子视图。如果是，那么您不必担心隐藏表格视图，也不必处理橙色/白色背景所遇到的问题。

以编程方式，向顶层视图添加标签看起来像：

```
UILabel *label = [[UILabel alloc] init];
label.text = @"No Alarms";
// set the properties, autoresizing, etc...
[label sizeToFit];
[self.view addSubview:label]; 
```

最后一行是将标签实际添加到您的视图中。如果您想让标签在您想要使用的视图中居中，`initWithFrame:`而不是仅仅使用 init 方式，您可以将它放在视图的中心。

另一种选择（如果您使用的是 NIB 或情节提要）是只创建一个“无警报”标签并确保它是 IB 项目浏览器上视图的子视图层次结构中的最顶层子视图（我认为这至少是所谓的 -无论哪种方式，我指的是弹出菜单，您可以在其中选择视图中的对象）。然后，当您的程序逻辑显示有警报和没有警报时，只需隐藏和取消隐藏标签即可。这就是我可能会这样做的方式......

# django - 重组 Django 模板

> ID：10361157
> 
> 赞同：0
> 
> 时间：2012-04-28T06:19:51.853
> 
> 标签：django, django-templates

我的 django 模板中有这段代码：

```
{%for client in clients %}
    {% regroup books by com_name as com_name_list %}
       {% for com_name in com_name_list %}
            <tr>
            <td>
            <h3>{{ com_name.grouper }}</h3>
            </td>                                           
            </tr>
            {% for book in com_name.list %}
                {%if client.client.id == book.client.id %}
            <tr>
            <td></td>
            <td>
            {{book.id}}
            </td>
            <td>{{ book.created }}</td>
            <td>
            {% if client.client.b_type == 'ticketing'%}
                {{ book.date_select }}
            {% endif %}
            {% if client.client.b_type == 'hotel'%}
                {{ book.check_in }} - {{ book.check_out }}
            {% endif %}
            </td>
            <td>{{ book.last_name }}, {{ book.first_name }}</td>
            <td>{{ book.product }}</td>
            <td>{{ book.quantity }}</td>
                <td>{{ book.totalcost_rate|floatformat:2|intcomma }}</td>                                          <td>{{ book.status }} {{book.com_name}}</td>
             </tr>
            {%endif%}
        {% endfor %}
    {% endfor %}
{%endfor%} 
```

但我想知道为什么输出是这样的：

```
Partner ID  Transaction Date    Booking Date              Guest Name    Product        Qty  Amount          Status
test
        2   April 19, 2012   April 1, 2012 - April 2, 2012    hjb, jbh  Dormitory Room  1   1,000.00    Complete test
        3   April 19, 2012   April 10, 2012 - April 11, 2012  KJNJK, hbk    Dormitory Room  1   1,000.00    Complete test
direct h
        4   April 19, 2012   April 19, 2012 - April 20, 2012  HBH, JGVJ Dormitory Room  1   1,000.00    Complete direct h
        5   April 19, 2012   April 9, 2012 - April 10, 2012   kjnkj, njkjn  g           1   1,000.00    Complete direct h
test
        9   April 27, 2012   May 1, 2012 - May 2, 2012    ljnd, asdf    Dormitory Room  1   1,000.00    Complete test
       10   April 27, 2012   April 27, 2012 - April 28, 2012  jhbjh, dsjg   Dormitory Room  1   1,000.00    Complete test
       11   April 28, 2012   April 9, 2012 - April 10, 2012   jnj, asjn Dormitory Room  1   1,000.00    Complete test
       12   April 28, 2012   April 11, 2012 - April 12, 2012  jnj, jjn  Dormitory Room  1   1,000.00    Complete test 
```

我的重组不正确吗？我应该怎么做才能像这样对它进行分组。

```
Partner ID  Transaction Date    Booking Date              Guest Name    Product        Qty  Amount          Status
test
        2   April 19, 2012   April 1, 2012 - April 2, 2012    hjb, jbh  Dormitory Room  1   1,000.00    Complete test
        3   April 19, 2012   April 10, 2012 - April 11, 2012  KJNJK, hbk    Dormitory Room  1   1,000.00    Complete test
        9   April 27, 2012   May 1, 2012 - May 2, 2012    ljnd, asdf    Dormitory Room  1   1,000.00    Complete test
       10   April 27, 2012   April 27, 2012 - April 28, 2012  jhbjh, dsjg   Dormitory Room  1   1,000.00    Complete test
       11   April 28, 2012   April 9, 2012 - April 10, 2012   jnj, asjn Dormitory Room  1   1,000.00    Complete test
       12   April 28, 2012   April 11, 2012 - April 12, 2012  jnj, jjn  Dormitory Room  1   1,000.00    Complete test

direct h
        4   April 19, 2012   April 19, 2012 - April 20, 2012  HBH, JGVJ Dormitory Room  1   1,000.00    Complete direct h
        5   April 19, 2012   April 9, 2012 - April 10, 2012   kjnkj, njkjn  g           1   1,000.00    Complete direct h 
```

任何人都可以在我的情况下帮助我吗？提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T09:01:16.830

regroup 不会对其输入进行排序。在将列表传递给重组之前，您必须按 com_name 对列表进行排序。[文档](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#regroup)对此进行了解释并举了一个例子。

# c# - 执行插入语句并将 id 放入局部变量？

> ID：10361162
> 
> 赞同：1
> 
> 时间：2012-04-28T06:20:55.760
> 
> 标签：c#, sql-server

```
SqlDataSource myQuiz = new SqlDataSource();

myQuiz.ConnectionString = ConfigurationManager.ConnectionStrings["yafnet"].ToString();
myQuiz.InsertCommand = "INSERT INTO [QuizTable]([Quiz_Title],[Quiz_Description]) VALUES (@Quiz_Title,@Quiz_Description)";

myQuiz.InsertParameters.Add("Quiz_Title",Quiz_Title.Text);
myQuiz.InsertParameters.Add("Quiz_Description",Quiz_Description.Text);

myQuiz.Insert();
Response.Redirect("QuizQuests.aspx"); 
```

有没有办法取回自动生成的新行的 ID 并将其放入局部变量中？

非常感谢，阿德里安

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T06:55:42.173

采用

```
SELECT IDENT_CURRENT(‘QuizTable’) 
```

它返回表中生成的最后一个 IDENTITY 值，与创建该值的连接无关，也与生成该值的语句的范围无关。IDENT_CURRENT 不受范围和会话限制；它仅限于指定的表。IDENT_CURRENT 返回为任何会话和任何范围内的特定表生成的标识值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T07:09:16.533

@Adrian De Barro：嗨，您可以使用以下代码获取插入的记录 ID 并保存在变量中

在您的 sqlquery 中添加以下语句：

```
return @@IDENTITY 
```

您的 C# 代码将如下所示：

```
 SqlConnection cn = new   
    SqlConnection(ConfigurationManager.AppSettings["ConnectionString"]);        
    cn.Open();
    SqlCommand cmd = new SqlCommand(procname, cn);
    cmd.CommandType = CommandType.StoredProcedure;
    SqlParameter str = new SqlParameter("name", SqlDbType.VarChar);
    str.Direction = ParameterDirection.ReturnValue;
    foreach (SqlParameter par in param)
    {
        cmd.Parameters.Add(par);
    }
    string name = Convert.ToString(cmd.ExecuteScalar());
    cmd.Dispose();
    cn.Close();
    return name; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T15:51:56.633

如果你想 100% 确定你真的从你的 insert 中获得了你的身份`QuizTable`，你应该使用`SCOPE_IDENTITY()`（正如 Luiggi Mendoza 在他的评论中已经提到的那样），而不是`@@IDENTITY`or `IDENT_CURRENT`。

`@@IDENTITY`可能不起作用，因为它会[从您的连接中发生的](http://blog.sqlauthority.com/2007/03/25/sql-server-identity-vs-scope_identity-vs-ident_current-retrieve-last-inserted-identity-of-record/)[**最后一次**](http://blog.sqlauthority.com/2007/03/25/sql-server-identity-vs-scope_identity-vs-ident_current-retrieve-last-inserted-identity-of-record/)[插入返回标识](http://blog.sqlauthority.com/2007/03/25/sql-server-identity-vs-scope_identity-vs-ident_current-retrieve-last-inserted-identity-of-record/)**。因此，如果您的触发器`QuizTable`在另一个具有标识列的表中插入一行，`@@IDENTITY`则将返回第二个插入的值，而不是原始插入的值`QuizTable`。**

 **`IDENT_CURRENT`将返回您的表的最后一个标识值（并且仅适用于您的表，因此是否存在上一个示例中的触发器并不重要）。**但它返回任何**会话
的最后一个身份值。因此，如果从 your和 your之间的另一个会话中插入另一行，[您将从](http://msdn.microsoft.com/de-de/library/ms175098.aspx)[**该**](http://msdn.microsoft.com/de-de/library/ms175098.aspx)[行而不是您的行中获取标识值。](http://msdn.microsoft.com/de-de/library/ms175098.aspx)**`INSERT``IDENT_CURRENT`[](http://msdn.microsoft.com/de-de/library/ms175098.aspx)****

# android - 如何创建具有一定复杂性的 JSON 数据？

> ID：10361165
> 
> 赞同：4
> 
> 时间：2012-04-28T06:21:30.530
> 
> 标签：android, json

我想创建格式如下的 json 数据：

```
{
   "Credential":{
      "ref1":"Test",
      "ref2":"test",
      "ref3":"test"
   },
   "ref4":"data"
} 
```

我尝试了很多，但我没有找到办法做到这一点。谁能帮帮我吗。 **编辑：**

我可以将数据如下所示：

```
 {
      "ref1":"Test",
      "ref2":"test",
      "ref3":"test"
   } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-28T06:38:03.797

你总是可以使用`JSONStringer`类来这样做，

```
JSONStringer jsonstr  = new JSONStringer()
                           .object().key("Credential")
                                    .object().key("ref1").value("Test")
                                             .key("ref2").value("test")
                                             .key("ref3").value("test")
                                    .endObject()
                                    .key("ref4").value("data")
                           .endObject();
Log.i("JSONStringer", jsonstr.toString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T06:27:36.507

你为什么不使用[谷歌 gson](http://code.google.com/p/google-gson/downloads/list)？

```
// get Json string
Gson gson = new Gson();
String strJson = gson.toJson(yourObject); 
```

这不是更好的解决方案吗？

# php - 将 $_get 结果与 db 存储值进行比较

> ID：10361166
> 
> 赞同：0
> 
> 时间：2012-04-28T06:21:32.383
> 
> 标签：php, mysql, forms, post, get

我有一个多项选择测验，它通过这样的 URL 发送一个可能的答案

```
<form method="post" action="test2score.php?q=<?php echo $quiz_id; ?>"> 
```

在 test2score.php 页面上，它读取并尝试像这样比较值

```
$ans = mysql_result(mysql_query('select c_answer from quiz where quiz_id = "'.$_GET['q'].'"'),0);
    if ($_POST['answer'] == $ans){
        echo "You got it right!";
    }else if ($_POST['answer'] <> $ans){
        echo "You got it wrong!";
    } 
```

其中 c_answer 是存储在 db 中的正确答案，但即使我选择了正确的答案并发布它仍然会回显“你弄错了”

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T06:25:06.213

您的表格`method="post"`已发布，您的接收值`$_GET['q']`请更正其中一个或使用

```
$_REQUEST['q']` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T06:27:04.617

使用隐藏字段 q 并将该值发布到您的操作页面并使用接收该值

```
$_POST['q'] and use that in your query. 
```

谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T06:28:32.967

为什么在 $_POST 表单的操作中使用 $_GET 请求？既然您不担心您的用户会看到 的价值，`q`那么为什么不在表单中放置一个隐藏的输入，其结果为`q`：

```
<input type="hidden" value=<?php echo $quiz_id ?> name="q" /> 
```

然后在您的查询中，检查`$_POST['q']`

似乎是实现这一目标的更理智、更合乎逻辑的方式

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-28T06:32:38.407

而不是从表单操作中传递测验 id 从隐藏的表单字段中传递它

像下面将表单操作设置为

```
action="test2score.php" 
```

并将隐藏的表单字段作为

```
<input type="hidden" name="q" value=<?php echo $quiz_id; ?> /> 
```

并获得如下所示的值

```
$_POST['q']; 
```

# c - 如何打印命令行命令的一部分

> ID：10361168
> 
> 赞同：0
> 
> 时间：2012-04-28T06:21:44.800
> 
> 标签：c, command-line-arguments, zcat

您好，我目前正在尝试在运行程序时打印命令行的某个部分。我目前运行我的程序如下

```
zcat gcc | sim 
```

我想要完成的是将命令行的“gcc”部分打印到单独的文件中。有什么办法可以做到这一点。谢谢您的帮助

我忘了提到这是在 c 而不是 C++

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T07:01:42.587

您正在将`zcat`（通过管道）的输出传递给您的程序，它不知道传递给`zcat`. 您可以将其作为输入流的一部分显式传递，

```
(echo 'zcat gcc'; zcat gcc ) | sim 
```

但这是一个黑客。如果您打算仅以这种方式运行程序，那可能没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T06:58:18.177

“sim”程序只知道它有来自标准输入的数据。它不知道是什么将数据传递给标准输入——它可能是另一个程序，或者重定向的输入，或者来自设备。

从'sim' POV，只有来自标准输入的数据。

**如果**您可以**保证**始终通过管道从另一个进程接收数据，则可以开始寻找与“sim”进程匹配的进程标头，然后从相关进程中提取进程信息。但是，我怀疑这超出了您的意愿。

# linux - 如何根据汇编语句以编程方式获取内存空间中的确切地址

> ID：10361170
> 
> 赞同：0
> 
> 时间：2012-04-28T06:22:25.770
> 
> 标签：linux, assembly, x86

嗯，希望我能清楚地表达我的问题。

现在我有一个汇编语句字符串，如：

```
movss ****,xmm0; (intel style) 
```

在执行这个汇编语句之后，进程的一部分内存发生了变化。所以`****`必须是内存地址，它可能是这样的：

```
DWORD PTR [eax],
DWORD PTR [eax + 0x4],
DWORD PTR [ebp - 0x4]
...Some style i have not seen, if you know that, please do tell me. 
```

我的问题是如何通过分析汇编语句字符串以编程方式获取内存地址。

例如：如果`****`是：

```
DWORD PTR [eax] 
```

也许我可以搜索字符串，找到 EAX 寄存器，然后从 EAX 寄存器中获取数据，也许是内存地址，也许不是，这取决于寻址系统，对吗？最后，我怎样才能得到确切的地址？</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T06:52:18.130

您可以使用`LEA`“加载有效地址”指令吗？对不起，我对英特尔组装不太熟悉，但这就是我会尝试的。

这可能会有所帮助：[http ://en.wikibooks.org/wiki/X86_Assembly/Data_Transfer#Load_Effective_Address](http://en.wikibooks.org/wiki/X86_Assembly/Data_Transfer#Load_Effective_Address)

希望这可以帮助！

# packet-capture - 如何使用 tshark 在任何接口上的特定端口捕获包

> ID：10361174
> 
> 赞同：16
> 
> 时间：2012-04-28T06:22:48.430
> 
> 标签：packet-capture, tshark

我想在我机器的**任何接口上的特定端口上捕获包。**

我知道如何使用特定接口在特定端口上捕获包。命令是

> tshark -f "udp 端口​​ 162" -i bond0

如果没有指定接口，TShark 会搜索接口列表，如果有非环回接口，则选择第一个非环回接口。

但是我想在我机器的**所有接口上捕获包。**有人可以帮我吗？

非常感谢！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-28T06:26:22.280

```
tshark -f "udp port 162" -i any 
```

在 Linux（CentOS）上为我工作。

# python - 在 Python 中，我什么时候应该使用元类？

> ID：10361181
> 
> 赞同：6
> 
> 时间：2012-04-28T06:24:53.273
> 
> 标签：python, oop

我经历过这个：[什么是 Python 中的元类？](https://stackoverflow.com/questions/100003/what-is-a-metaclass-in-python)

但是谁能更具体地解释一下我什么时候应该使用元类概念，什么时候非常方便？

假设我有一个像下面这样的类：

```
 class Book(object):
    CATEGORIES = ['programming','literature','physics']
    def _get_book_name(self,book):
        return book['title']
    def _get_category(self, book):
        for cat in self.CATEGORIES:
            if book['title'].find(cat) > -1:
                return cat  
        return "Other"

if __name__ == '__main__':
    b = Book()
    dummy_book = {'title':'Python Guide of Programming', 'status':'available'}
    print b._get_category(dummy_book) 
```

对于这堂课。

在什么情况下我应该使用元类，它为什么有用？

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-28T07:10:05.613

当您想要在创建类时对其进行变异时，您可以使用元*类*。几乎不需要元类，它们很难调试，也很难理解——但有时它们可​​以使框架更易于使用。在我们的 600Kloc 代码库中，我们使用了 7 次元类：一次 ABCMeta，4 个来自 Django 的 models.SubfieldBase，以及两次使类可用作 Django 中的视图的元类。正如@Ignacio 所写，如果您不*知道*您需要一个元类（并且已经考虑了所有其他选项），那么您*就*不需要一个元类。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-28T09:15:48.837

从概念上讲，一个类的存在是为了定义一组对象（类的实例）的共同点。就这样。它允许您根据类定义的共享模式来考虑类的实例。如果每个对象都不同，我们就不会费心使用类，我们只会使用字典。

元类是一个普通的类，它的存在也是出于同样的原因；定义其实例的共同点。默认元类`type`提供了使类和实例按照您习惯的方式工作的所有常规规则，例如：

*   实例上的属性查找检查实例后跟它的类，然后按照 MRO 顺序检查所有超类
*   调用`MyClass(*args, **kwargs)`调用`i = MyClass.__new__(MyClass, *args, **kwargs)`来获取一个实例，然后调用`i.__init__(*args, **kwargs)`来初始化它
*   通过将类块中绑定的所有名称变为类的属性，从类块中的定义创建类
*   ETC

如果您想要一些与普通类不同的类，您可以定义一个元类并使您的不寻常类成为元类的实例，而不是`type`. 您的元类几乎肯定是 的子类`type`，因为您可能不想让您的不同类型的类**完全**不同；就像您可能希望让某些 Books 子集的行为有所不同（例如，作为其他作品汇编的书籍）并使用子类`Book`而不是完全不同的类。

如果您不想定义一种使某些类的工作方式与普通类不同的方法，那么元类可能不是最合适的解决方案。请注意，“类定义它们的实例如何工作”*已经*是一个非常灵活和抽象的范例；大多数时候你不需要改变类的工作方式。

如果你四处搜索，你会看到很多元类的例子，它们实际上只是被用来做一些关于类创建的事情；通常会自动处理类属性，或者从某个地方自动查找新属性。我不会真的把这些伟大的用途称为元类。他们并没有改变类的工作方式，他们只是在处理一些类。在我看来，创建类的工厂函数，或者在类创建后立即调用的类方法，或者最好的类装饰器，将是实现这类事情的更好方法。

但有时你会发现自己编写复杂的代码来让 Python 的类的默认行为来做一些概念上简单的事情，这实际上有助于“更进一步”并在元类级别实现它。

一个相当简单的例子是“单例模式”，你有一个类，其中只能有一个实例；如果已经创建了一个实例，则调用该类将返回一个现有实例。我个人反对单例并且不建议使用它们（我认为它们只是全局变量，巧妙地伪装成看起来像新创建的实例，以便更有可能导致细微的错误）。但是人们使用它们，并且有大量使用`__new__`和来制作单例类的方法`__init__`。这样做可能有点烦人，主要是因为Python想调用`__new__`然后调用`__init__`因此，您必须找到一种方法，使您的初始化代码在每次有人请求访问单例时都不会重新运行。但是，如果我们可以在调用类时直接告诉 Python 我们想要发生什么，而不是尝试设置 Python 想要做的事情以便它们最终碰巧做我们想要做的事情，这不是更容易吗？

```
class Singleton(type):
    def __init__(self, *args, **kwargs):
        super(Singleton, self).__init__(*args, **kwargs)
        self.__instance = None

    def __call__(self, *args, **kwargs):
        if self.__instance is None:
            self.__instance = super(Singleton, self).__call__(*args, **kwargs)
        return self.__instance 
```

不到 10 行，只需添加 即可将普通类变成单例`__metaclass__ = Singleton`，即*声明它们是单例*。在这个级别实现这种东西比直接在类级别上破解一些东西更*容易。*

但是对于您的特定`Book`课程，您似乎不需要做任何可以由元类帮助的事情。你真的不需要接触元类，除非你发现类如何工作的正常规则阻止你以简单的方式做一些应该简单的事情（这**不同于**“伙计，我希望我不必为所有这些类输入这么多，我想知道我是否可以自动生成公共位？”）。事实上，尽管我每天在工作中都使用 Python，但我从来没有真正使用过元类。我所有的元类都是像上面这样的玩具例子，`Singleton`或者只是愚蠢的探索。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-28T09:54:48.940

每当您需要覆盖类的默认行为（包括它们的创建）时，都会使用元类。

一个类是从*名称*、一个*基*元组和一个类*dict*创建的。您可以拦截创建过程以更改任何这些输入。

您还可以覆盖类提供的任何服务：

*   __call__ 用于创建实例
*   __getattribute__ 用于查找类的属性和方法
*   __setattr__ 控制设置属性
*   __repr__ 控制类的显示方式

总之，当您需要控制类的创建方式或需要更改类提供的任何服务时，可以使用元类。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-28T07:33:21.890

如果您出于某种原因想做诸如 等之类的事情`Class[x]`，`x in Class`则必须使用元类：

```
class Meta(type):
    def __getitem__(cls, x):
        return x ** 2

    def __contains__(cls, x):
        return int(x ** (0.5)) == x ** 0.5

# Python 2.x
class Class(object):
    __metaclass__ = Meta

# Python 3.x
class Class(metaclass=Meta):
    pass

print Class[2]
print 4 in Class 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-28T10:24:26.430

检查链接[Meta Class Made Easy](http://www.voidspace.org.uk/python/articles/metaclasses.shtml)了解如何以及何时使用元类。

# java - 可运行的jar文件错误

> ID：10361182
> 
> 赞同：0
> 
> 时间：2012-04-28T06:24:56.463
> 
> 标签：java, eclipse, executable-jar

当我使用以下命令通过 CMD 打开 .jar 文件时：

```
java -jar myapp.jar" 
```

我收到以下错误：“未找到主类。程序将退出..”
Myapp.jar 有一个清单文件，如下所示：

```
Manifest-Version: 1.0
Main-Class: EMP_details.login 
```

我在 Eclipse 中通过 Project>export>Jar 制作了这个 .jar 文件。

如何避免/修复此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T06:49:15.310

尝试通过 eclipse>Project>export> **Runnable** Jar 制作 jar。但首先你必须选择文件并右键单击>Run As>Run Configurations。然后您可以在 Runnable JAR File Specificationoin Dialog > Launch configuration 复选框中选择此文件。

# iphone - 在 MonoTouch 中使用 CIImage.ImageByCroppingToRect 或 CICrop 裁剪图像

> ID：10361185
> 
> 赞同：0
> 
> 时间：2012-04-28T06:25:20.233
> 
> 标签：iphone, xamarin.ios, crop

我有一个非常大的图像，我想显示一个 200x200px 的缩略图（显示图像的一部分，而不是整个图像的拉伸版本）。为了实现这一点，我正在考虑使用 CIImage.ImageByCroppingToRect 或 CICrop - 但我无法获得任何有用的东西。结果要么只是黑色（我假设我看到的是裁剪图像的黑色部分），要么我得到一个 SIGABRT（“无法使用给定的 GLES 上下文处理 (6000 x 3000) 大小的纹理！”）

此线程中有一个 ObjC 示例： [使用 CICrop 裁剪 CIImage 无法正常工作](https://stackoverflow.com/questions/9601242/cropping-ciimage-with-cicrop-isnt-working-properly)

但我还没有设法将它翻译成 C# 并让它正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T01:29:17.353

这是您提到的帖子中答案的 MonoTouch 端口：

```
var croppedImaged = CIImage.FromCGImage (inputCGImage).ImageByCroppingToRect (new RectangleF (150, 150, 300, 300));              
var transformFilter = new CIAffineTransform();
var affineTransform = CGAffineTransform.MakeTranslation (-150, 150);
transformFilter.Transform = affineTransform;
transformFilter.Image = croppedImaged;           
CIImage transformedImage = transformFilter.OutputImage; 
```

# jquery - MVC jquery post到方法工作到id但不适用于字符串或列表

> ID：10361187
> 
> 赞同：0
> 
> 时间：2012-04-28T06:25:25.727
> 
> 标签：jquery, asp.net-mvc

我有一些 jquery 要发布到 MVC 方法：

```
[HttpPost]
        public void MarkAsPaid(int id)
        {
            ...
        } 
```

这适用于这个 jquery 调用：

```
$.post('/Invoice/MarkAsPaid/'+ invoiceId, function (data) {
                        ...
                    }); 
```

但是，我该如何更改它以通过字符串格式的 id 列表发送，例如。“1,4,5”？

我试过了：

```
[HttpPost]
            public void MarkAsPaid(string ids)
            {
                ...
            }

    $.post('/Invoice/MarkAsPaid/'+ "1,4,5", function (data) {
                            ...
                        }); 
```

ids 以 null 的形式出现。

我目前正在考虑我实际上如何在帖子中传递变量看起来根本不正确，这可能是它不起作用的原因。也可能是因为我将 MarkAsPaid 中的类型名称更改为 ids 而不是 id。

有人可以告诉我该怎么做吗？在列表中传递它们也是一个适当的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T06:30:23.557

尝试：

```
 $.post('/Invoice/MarkAsPaid/'+ encodeURI("1,4,5"), function (data) {
                            ...
                        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T06:32:42.777

```
'1,4,5' 
```

只需删除双引号

# javascript - window.onblur 不工作

> ID：10361188
> 
> 赞同：6
> 
> 时间：2012-04-28T06:25:32.527
> 
> 标签：javascript, window, onblur

我似乎无法让 window.onblur 正常工作。

```
window.onblur = console.log('blur'); 
```

当监听器应用于窗口时，它只是在页面加载时运行，而不是在窗口失去焦点时运行。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-28T21:22:24.927

Ryudice 已经告诉你该怎么做，但没有解释*为什么*它没有按照你的方式工作。了解它的机制将帮助您弄清楚如何进一步进行。

原因是您的原始代码立即*运行*该`console.log('blur')`命令，并将该调用的返回值用作窗口 onblur 事件。

的返回值`console.log()`因浏览器而异，但为了论证，假设它返回一个布尔`true`值。这意味着您的原始代码相当于编写以下代码：

```
window.onblur = true; 
```

这显然不会像你期望的那样工作。

您需要`window.onblur`设置一个函数，每次`onblur`触发事件时都会调用该函数。`function() {}`根据 Ryudice 的回答，这是通过将代码包装在 a 中来实现的。

您也可以在简单的情况下通过不在要调用的函数名称上提供方括号来实现它。但是这种方法仅在您没有任何要传递给函数的参数时才有效，因此不适合您的`console.log`示例。

希望有帮助。如果您仍然感到困惑，那么网络上有很多资源。尝试在谷歌上搜索“javascript 将函数作为参数传递”之类的短语，看看会发生什么。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-04-28T06:27:40.360

```
window.onblur = function() { console.log('blur'); } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-22T20:12:51.193

```
window.onblur = () => console.log( "blur" ); 
```

# css - 未找到 CSS 定义的字体

> ID：10361200
> 
> 赞同：27
> 
> 时间：2012-04-28T06:28:29.487
> 
> 标签：css, webfonts

> **可能重复：**
> [@font-face 不能在客户端站点上工作？](https://stackoverflow.com/questions/2714429/font-face-not-working-on-a-client-site)

我的 ASP.Net MVC Web 应用程序的此文件夹结构中有以下字体文件：

-[根]

|-- 公开

||--字体

|||--NuvoWeb-Medi.eot

|||--NuvoWeb-Medi.woff

在我的 CSS 文件中，我有以下字体声明：

```
@font-face 
{
    font-family: NuvoWeb;
    src: url(/Public/fonts/NuvoWeb-Medi.eot);
}
@font-face 
{
    font-family: NuvoWeb;
    src: url(/Public/fonts/NuvoWeb-Medi.woff) format('woff');
} 
```

但是，当我运行该应用程序时，Firebug 返回以下错误：

> “网络错误：404 未找到 - [http://localhost:60194/Public/fonts/NuvoWeb-Medi.woff](http://localhost:60194/Public/fonts/NuvoWeb-Medi.woff) ”

请告知我缺少什么以使其正常工作。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-04-28T10:24:19.563

[在这里](http://www.localwisdom.com/blog/2011/10/iis-7-web-config-change-for-html5-and-css3-mime-types/)找到解决方案...

问题是 IIS 不知道如何提供这些新文件，除非我们告诉它如何提供服务。`<system.webServer>`这可以通过添加以下代码段在 web.config 部分的 web.config 中轻松完成：

```
<staticContent>
    <mimeMap fileExtension=".mp4" mimeType="video/mp4" />
    <mimeMap fileExtension=".m4v" mimeType="video/m4v" />
    <mimeMap fileExtension=".ogg" mimeType="video/ogg" />
    <mimeMap fileExtension=".ogv" mimeType="video/ogg" />
    <mimeMap fileExtension=".webm" mimeType="video/webm" />
    <mimeMap fileExtension=".oga" mimeType="audio/ogg" />
    <mimeMap fileExtension=".spx" mimeType="audio/ogg" />
    <mimeMap fileExtension=".svg" mimeType="image/svg+xml" />
    <mimeMap fileExtension=".svgz" mimeType="image/svg+xml" />
    <remove fileExtension=".eot" />
    <mimeMap fileExtension=".eot" mimeType="application/vnd.ms-fontobject" />
    <mimeMap fileExtension=".otf" mimeType="font/otf" />
    <mimeMap fileExtension=".woff" mimeType="application/font-woff" />
</staticContent> 
```

请注意，其中一些扩展可能已经在 IIS 中处理（对我来说，.svg 很好）。您要么需要从本节中删除这些映射，要么包括额外`<remove>`的行，例如 .eot 的行。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-06T08:00:45.063

注册 MIME 类型`web.config`如下：

```
<system.webServer>
    <staticContent>
      <remove fileExtension=".eot" />
      <mimeMap fileExtension=".eot" mimeType="application/vnd.ms-fontobject" />
    </staticContent>
</system.webServer> 
```

这解决了问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-28T07:58:16.180

公共文件夹（此处为 css）---> 字体文件夹（此处为字体 -NuvoWeb-Medi.eot）

```
@font-face 
{
    font-family: 'NuvoWeb';
    src: url(fonts/NuvoWeb-Medi.eot);
} 
```

你错过了引用符号 font-family: 'NuvoWeb';

# python - 如何从脚本运行 IPython 魔法（或计时 Python 脚本）

> ID：10361206
> 
> 赞同：60
> 
> 时间：2012-04-28T06:29:04.833
> 
> 标签：python, ipython

IPython %timeit 魔术命令可以很好地测量运行某些 Python 代码所需的时间。现在，我想在 Python 脚本中使用类似的东西。我知道 timeit 模块，但是，它有几个缺点，例如，如何自适应地选择运行次数？即，默认代码

```
import timeit
t=timeit.Timer("code(f)", "from __main__ import code,f")
t.timeit() 
```

运行代码百万次。%timeit IPyhton 魔术命令会自动执行此操作。我建议我可以使用类似 MATLAB 代码 [http://www.mathworks.com/matlabcentral/fileexchange/18798](http://www.mathworks.com/matlabcentral/fileexchange/18798)

它会自动完成所有工作（并且还会告诉函数的开销是否很大）。

如何从 Python 脚本中调用 %timeit 魔法（或者也许有更好的计时解决方案）？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-04-09T09:56:59.193

这取决于您拥有的 IPython 版本。如果你有 1.x：

```
from IPython import get_ipython
ipython = get_ipython() 
```

如果您有旧版本：

```
import IPython.core.ipapi  
ipython = IPython.core.ipapi.get() 
```

或者

```
import IPython.ipapi  
ipython = IPython.ipapi.get() 
```

**完成后**，运行如下魔术命令：

```
ipython.magic("timeit abs(-42)") 
```

请注意，脚本必须通过`ipython`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-28T10:05:50.850

IPython 和`timeit`模块都在使用 调用时`python -m timeit`，执行相同的循环，数值不断增加，*直到*计时结果超过某个阈值，从而保证时间测量几乎不受操作系统干扰。

您可以将[魔术的](https://github.com/ipython/ipython/blob/ea199a6ddc6cd80f46d0c106c7c7db95ebadc985/IPython/core/magic.py#L1923)[IPython 实现`%timeit`](https://github.com/ipython/ipython/blob/ea199a6ddc6cd80f46d0c106c7c7db95ebadc985/IPython/core/magic.py#L1923)与[Python`timeit`标准模块](http://hg.python.org/cpython/file/70274d53c1dd/Lib/timeit.py#l294)进行比较，以发现它们的工作基本相同。

因此，回答您的问题时，您可能应该复制相同的循环，直到找到*number*参数的正确值。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-01T21:43:22.940

如果在 IPython 中以交互方式运行 Python 脚本，则以下方法有效。例如，`test.py`：

```
def f():
    # Algorithm 1
    pass

def g():
    # Algorithm 2
    pass

# which one is faster?
mgc = get_ipython().magic
mgc(u'%timeit f()')
mgc(u'%timeit g()') 
```

然后在 IPython 中以交互方式运行它

```
%run -i test.py 
```

吐出时间。开关是必要的`-i`，以便变量在范围内。我还没有想出如何在不运行 IPython 实例的情况下做到这一点，即通过简单地`timeit`从 IPython 导入并将其用作函数。但是，此解决方案适用于我的目的，即自动化一些计时运行。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-04-14T07:42:59.890

运行 ipython 魔术函数的一种方法可能是使用嵌入 ipython 实例。
例如：（大部分代码是从[ipython网站](http://ipython.org/ipython-doc/dev/interactive/reference.html#embedding)借来的）

```
from IPython.terminal.embed import InteractiveShellEmbed

ipshell = InteractiveShellEmbed()
ipshell.dummy_mode = True
print('\nTrying to call IPython which is now "dummy":')
ipshell.magic("%timeit abs(-42)");
ipshell()
print('Nothing happened...') 
```

这可以通过使用 python 解释器
PS：使用 dummy_mode 将阻止调用交互式 shell。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-08-19T18:42:58.643

根据模块的[文档](https://docs.python.org/2/library/timeit.html#module-timeit)，当在命令行模式下运行时，`timeit.py``timeit`

> 如果未给出 -n，则通过尝试连续的 10 次方来计算合适的循环次数，直到总时间至少为 0.2 秒。

这就是 IPython 所做的。这就是为什么循环数总是 10 的幂。您可以在自己的代码中执行类似的操作，方法是将调用嵌入到`t.timeit()`循环中，以确保您不会等待太久：

```
import timeit
t = timeit.Timer("code(f)", "from __main__ import code, f")

max_time = 0.2
N = 0
curr_time = t.timeit(1)

while curr_time < max_time:
    N += 1
    curr_time = t.timeit(10**N)

mean_time = curr_time / float(10**N) 
```

这将确保分析时间至少为 0.2 秒，但不会显着增加 --- 除非调用该函数一次需要很长时间。

# c# - 结构体中的结构体数组

> ID：10361211
> 
> 赞同：2
> 
> 时间：2012-04-28T06:30:17.717
> 
> 标签：c#, .net

是否可以在另一个中声明`struct`数组字段`struct`？

```
[StructLayout(LayoutKind.Sequential, Pack = 1)]
public unsafe struct A
{
}

[StructLayout(LayoutKind.Sequential, Pack = 1)]
public unsafe struct B
{
    public fixed A FieldA[123];
} 
```

Visual Studio 告诉它`FieldA`只能是任何简单类型的数组，而不是`struct`. 这里有什么解决方案/解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T06:36:38.453

> 是否可以在另一个结构中声明结构数组字段？

是的，但是如果你想让它成为一个固定大小的缓冲区，会有一些限制。从 C# 4 规范的第 18.7.1 节：

> 固定大小缓冲区声明的缓冲区元素类型指定声明引入的缓冲区的元素类型。缓冲区元素类型必须是预定义类型之一`sbyte`, `byte`, `short`, `ushort`, `int`, `uint`, `long`, `ulong`, `char`, `float`,`double`或`bool`。

我不知道有任何替代方法可以模拟任意结构的固定大小的缓冲区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T06:41:22.997

尝试以这种方式定义第二个结构：

```
[StructLayout(LayoutKind.Sequential, Pack = 1)]
public unsafe struct B
{
    [MarshalAs(UnmanagedType.ByValArray, SizeConst=123)]
    public fixed A[] FieldA;
} 
```

# android - Android 如何获取所有浏览器应用中的浏览器历史记录？

> ID：10361212
> 
> 赞同：3
> 
> 时间：2012-04-28T06:30:20.873
> 
> 标签：android, browser

我想从android手机的不同浏览器中获取所有浏览器历史记录？（也许如您所知，手机中通常有多个浏览器应用程序）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T07:27:25.457

您可以在 Activity 中执行此操作以在 android 浏览器中获取历史记录。

```
 Cursor mCur = activity.managedQuery(Browser.BOOKMARKS_URI,
                Browser.HISTORY_PROJECTION, null, null, null);
        mCur.moveToFirst();
        if (mCur.moveToFirst() && mCur.getCount() > 0) {
            while (mCur.isAfterLast() == false) {
                Log.v("titleIdx", mCur
                        .getString(Browser.HISTORY_PROJECTION_TITLE_INDEX));
                Log.v("urlIdx", mCur
                        .getString(Browser.HISTORY_PROJECTION_URL_INDEX));
                mCur.moveToNext();
            }
        } 
```

您可能还需要添加打击权限才能获取历史记录。

```
 <uses-permission android:name="com.android.browser.permission.READ_HISTORY_BOOKMARKS"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T07:17:59.673

假设您所有的浏览器都使用此 API 来保存历史记录，这应该对您有用：http: [//developer.android.com/reference/android/provider/Browser.html](http://developer.android.com/reference/android/provider/Browser.html)。否则，这实际上是不可能的。

# delphi - GeoJSON 开源库

> ID：10361218
> 
> 赞同：2
> 
> 时间：2012-04-28T06:30:54.847
> 
> 标签：delphi, open-source, geojson

我在网上进行了广泛的搜索，但仍然是徒劳的。

我正在寻找一个开源的 GeoJSON 库。

请帮帮我。

**最后更新：**

我更喜欢建立在[SuperObject](http://code.google.com/p/superobject/)库之上的东西。

*   [GeoJSON 规范](http://geojson.org/geojson-spec.html)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T10:31:46.697

我正在使用 SuperObject 来解析我从 GeoServer 中提取的（geojson）结果。

GeoJson 并不复杂，所以我认为您使用哪个库并不重要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T07:44:14.267

AFAIK 没有。

但是您可以使用 JSON 库轻松检索和创建 GeoJSON 内容。GeoJSON 内容只是 JSON 对象的树。

最近版本的 Delphi 有一个内置的 JSON 解析器。

或者看看[Delphi JSON library for XE2 available for object serialization](https://stackoverflow.com/questions/7731833/delphi-json-library-for-xe2-available-for-object-serialization)找出一些库。我喜欢嵌入在 DWScript 中的那个。

# .net - 使用 protobuf-net 问题序列化 WPF DrawingBrush

> ID：10361220
> 
> 赞同：1
> 
> 时间：2012-04-28T06:31:10.010
> 
> 标签：.net, wpf, serialization, protobuf-net

需要序列化一些包含 DrawingBrush 的 BL 结构。我已将其重写如下：

```
[ProtoContract]
public class BaseProtoBuf : INotifyPropertyChanged, IFormattable
{
    [ProtoMember(1)]
    public string ID { get; set; }
    // Bunch of properties of .net primitive types
    // ..
    private DrawingBrush _geometry;
    [ProtoMember(9)]
    [Browsable(false)]
    public DrawingBrush Geometry
    {
            get { return _geometry; }
            set
            {
                _geometry = value; 
                ScaleDrawing();
            }
    }
}
[ProtoContract]
[ProtoInclude(1, typeof(string))]
// All other includes
[ProtoInclude(9, typeof(DrawingBrush)]
public class DerivedProtoBuf : BaseProtoBuf, ICloneable
{        
    // Some additional properties of primitive types, annotated starting with ProtoMember 10 and so on
} 
```

要序列化我正在执行以下代码：

```
const string fileName = "Protobuf.bin";
using (var file = File.Create(fileName))
{
    file.Position = 0;
    var testBase = new BaseProtoBuf
                                   {
                                      Height = 100,
                                      Width = 100,
                                      Name = "Test 1",
                                      OffsetX = 200,
                                      OffsetY = 200,
                                      Geometry = sourceList[0].Geometry // some not-null DrawingBrush
                                  };
    Serializer.Serialize(file, testBase);
    file.Position = 0;
    var restored = Serializer.Deserialize<BaseProtoBuf>>(file);
}
} 
```

我需要序列化 ​​Derived 类对象，但在 Base 序列化期间，我得到*“没有找到合适的默认 DrawingBrush 编码”*。认为这是因为 DrawingBrush 对于某些对象可以为空，但在测试中它不是。正确序列化的任何解决方法 1) 具有非空 DrawingBrush 的基础对象 2) 具有空 DrawingBrush 的派生对象？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T12:07:38.233

为简单的 WPF Brush 序列化正确的 RuntimeTypeModel 配置：

```
RuntimeTypeModel.Default.Add(typeof(Brush), false)
               .AddSubType(300, typeof(SolidColorBrush));
RuntimeTypeModel.Default.Add(typeof(SolidColorBrush), false)
                .Add("Color");
RuntimeTypeModel.Default.Add(typeof(Color), false)
                .Add("A", "R", "G", "B"); // needed for proper color serialization
RuntimeTypeModel.Default.Add(typeof(SolidColorBrush), false)
        .Add("Color");
RuntimeTypeModel.Default.Add(typeof(DrawingBrush), false)
        .Add("Stretch", "Drawing");
RuntimeTypeModel.Default.Add(typeof(Drawing), false)
        .AddSubType(100, typeof(DrawingGroup))
        .AddSubType(200, typeof(GeometryDrawing));
RuntimeTypeModel.Default.Add(typeof(DrawingGroup), false)
        .Add("Children");
RuntimeTypeModel.Default.Add(typeof(Pen), false)
        .Add("Brush", "Thickness", "LineJoin");
RuntimeTypeModel.Default.Add(typeof(GeometryDrawing), false)
       .Add("Brush", "Geometry", "Pen"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T08:05:01.703

由于未定义合同，因此 DrawingBrush 不能立即序列化。这里有各种选项：

*   如果类型相当简单，您可以在运行时通过 RuntimeTypeModel 配置合约，根据需要添加属性/子类型等
*   在某些情况下，可能首选使用“代理”——一种具有双向转换运算符的类型，用作动态 DTO——同样，可以通过 RuntimeTypeModel 指定代理；“代理”让您使用现有模型，但根据需要交换 DTO 类型
*   否则，请考虑在模型中避免使用特定于框架的类型，而只使用带有所需信息的 DTO 类型。在运行时从中*构造*框架所需的值

# mysql - MYSQL同步同一个数据库中两个表的记录

> ID：10361221
> 
> 赞同：1
> 
> 时间：2012-04-28T06:31:12.333
> 
> 标签：mysql, sync

我有两个具有相同字段的表，例如：

表 A：fname、lname、地址、年龄、电子邮件、手机、网站、博客 表 B：fname、lname、地址、年龄、电子邮件

这两个表都被我网站上的不同模块使用。我想同步两个表的前五个字段，这样每当在表 A 中添加新行或修改现有行时，表 B 都会自动更新，反之亦然。

例如。

1.  用户在表 A 中创建了一条新记录。现在表 B 也应使用此新信息进行更新。反之亦然，如果用户在表 B 中创建新记录，则表 A 也应使用此新信息进行更新。

2.  用户修改了表 A 中的记录。现在表 B 也应该使用修改后的信息进行更新。反之亦然，如果用户修改表 B 中的新记录，则表 A 也应使用修改后的信息进行更新。

我怎样才能做到这一点。我想过使用触发器，但它不会创建无限循环导致服务器错误！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T07:35:00.970

如果你只需要更新一个表以防另一个表被更新，而不是创建一个表（作为其他表的一部分），创建一个视图，它也像一个表，但虚拟的（不是真实的）。
但既然你已经要求双方更新。

我相信你应该回过头来解决这个问题......并告诉我们为什么你需要根据另一个表更新两个表，
因为你只是在两个地方保留重复数据没必要。

因此，请尝试考虑是否可以在不创建两个表的情况下完成，或者像创建一个表和一个视图来满足部分列的要求。

这不是您的问题的答案，但我正在尝试以优化的方式解决您的问题，这对每个人的健康都有好处....希望您理解我试图告诉您的内容。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T06:38:47.260

这 5 个字段中的任何字段都保证是唯一的吗？您可以向触发器添加条件，以在将记录插入表中之前检查该字段是否存在。

您可能还想重新考虑设计。在 2 个地方存储重复记录似乎有点吓人。您将必须有更新、插入和删除的触发器。

# search - GSA 中的视频搜索

> ID：10361226
> 
> 赞同：0
> 
> 时间：2012-04-28T06:32:22.210
> 
> 标签：search, markup, google-search-appliance

是否可以标记页面上显示的视频并使用 GSA 检索它们，因为谷歌搜索会这样做。

我特别指的是这个：

[https://developers.google.com/webmasters/videosearch/sitemaps](https://developers.google.com/webmasters/videosearch/sitemaps)

# jquery - 在向跨域服务器发送请求之前，跨域 jquery.ajax 调用被中止

> ID：10361227
> 
> 赞同：0
> 
> 时间：2012-04-28T06:32:29.010
> 
> 标签：jquery, cross-domain

我们正在使用 jquery.ajax() 来运行跨域 ajax 调用。有时我们观察到这些 ajax 调用被中止，并且它的 http 请求没有发送到跨域服务器。在浏览器端中止 ajax 调用时，没有注意到错误消息。您能否让我们知道为什么在向服务器发送请求之前会中止 ajax 调用，还请让我们知道捕获并重新发送中止的请求？如果您需要更多详细信息，请告诉我们。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T06:39:03.690

最常见的方法是将您的服务器用作代理。您将向您的服务器发送请求，您的服务器将向远程服务器发出请求，然后获取结果响应。然后在您的服务器上处理来自远程服务器的响应后，您可以轻松地将响应发送回您的客户端。

如果你是 php 用户，这可以通过 curl 轻松实现：[http](http://www.php.net/manual/en/curl.examples-basic.php) : //www.php.net/manual/en/curl.examples-basic.php，http: [//net.tutsplus.com/tutorials/php/techniques -and-resources-for-mastering-curl/](http://net.tutsplus.com/tutorials/php/techniques-and-resources-for-mastering-curl/)

# assembly - 在 x86 汇编中计算“$ - label”之类的字符串长度时，美元符号 ($) 是什么意思？

> ID：10361231
> 
> 赞同：45
> 
> 时间：2012-04-28T06:32:49.697
> 
> 标签：assembly, x86, intel-syntax

例如，如果我们正在编写一个简单的 hello world 类型程序，.data 部分可能包含如下内容：

```
section .data

msg     db      'Enter something: '
len     equ     $ - msg 
```

这个例子中的 $ 代表什么，为什么`$ - msg`等于字符串的长度？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-28T06:35:48.150

在这种情况下，$ 表示根据汇编程序的当前地址。$ - msg 是汇编程序的当前地址减去 msg 的地址，即字符串的长度。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-10-04T18:23:20.247

**NASM 文档**

[http://www.nasm.us/doc/nasmdoc3.html#section-3.5](http://www.nasm.us/doc/nasmdoc3.html#section-3.5)

> NASM 支持表达式中的两个特殊标记，允许计算涉及当前装配位置：$ 和 $$ 标记。$ 计算为包含表达式的行首的装配位置；因此您可以使用 JMP $ 编写无限循环。

[http://www.nasm.us/doc/nasmdoc3.html#section-3.2.4](http://www.nasm.us/doc/nasmdoc3.html#section-3.2.4)

> EQU 为给定的常量值定义了一个符号：当使用 EQU 时，源代码行必须包含一个标签。EQU 的作用是将给定的标签名称定义为其（唯一）操作数的值。这个定义是绝对的，以后不能改变。所以，例如，
> 
> ```
> message         db      'hello, world' 
> msglen          equ     $-message 
> ```
> 
> 将 msglen 定义为常数 12

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-09T23:45:26.633

$ 用于引用当前地址，$$ 用于引用汇编中当前节的开始地址。

例子：

```
section .text
  Mov A,0x0000
  Mov B,0x0000
  Mov C,0x0000 
```

对于第 3 行，$ 指的是行本身的地址，而 $$ 指的是第一行的地址（我们的部分开始的地方）。这个约定在 nasm 中对我有用。

来源：[nasm.us](http://nasm.us/doc/nasmdoc3.html)

# wpf - 如何在 WPF 中显示树视图样式？

> ID：10361232
> 
> 赞同：1
> 
> 时间：2012-04-28T06:33:38.123
> 
> 标签：wpf

我的输入

```
 Sore | aye
    A    |   1 
    A    |   2
    A    |   3
    B    |   1
    B    |   2 
```

OutPut：我想将顶部表格排序到下面的树视图中

```
A
   1 
   2 
   3
B  
   1
   2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T07:04:47.590

假设您有一个`Table`包含两个属性的类`list<string> Sore`，并且`List<int> aye`

```
public class Table
{
    public String Sore { get; set; }
    public int Aye { get; set; }
}

var table = new List<Table>
                {
                    new Table{  Sore = "A" , Aye = 1},
                    new Table{  Sore = "A" , Aye = 2},
                    new Table{  Sore = "A" , Aye = 3},
                    new Table{  Sore = "B" , Aye = 1},
                    new Table{  Sore = "B" , Aye = 2},
                };
var group = table.GroupBy(q => q.Sore).ToList();
foreach (var g in group)
{
    Debug.WriteLine(g.Key);
    foreach (var i in g)
    {
        Debug.WriteLine("   "+i.Aye);
    }
} 
```

输出将是：

```
A
   1
   2
   3
B
   1
   2 
```

# asp.net - 在 ListView 中编辑/添加列（例如，添加文本框或按钮）？

> ID：10361234
> 
> 赞同：-1
> 
> 时间：2012-04-28T06:33:54.787
> 
> 标签：asp.net, visual-studio, visual-studio-2010

ListView 是否有与 GridView 一样的编辑/添加列功能？如果是这样，您如何访问它？

只是想知道，因为我想在 ListView 中添加带有文本框和按钮的列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T10:29:36.543

是的。您还可以查看此图表以了解哪种控件最适合您。 [http://weblogs.asp.net/anasghanem/archive/2008/09/06/comparing-listview-with-gridview-datalist-and-repeater.aspx](http://weblogs.asp.net/anasghanem/archive/2008/09/06/comparing-listview-with-gridview-datalist-and-repeater.aspx)

# android - Android：应用程序蓝牙共享已停止工作

> ID：10361237
> 
> 赞同：0
> 
> 时间：2012-04-28T06:34:51.363
> 
> 标签：android, bluetooth, motorola-droid

我在安卓设备上面临一个关于蓝牙的奇怪问题。我的 android 项目有一台 Motorola Milestone 和两台 HTC-Nexus 设备。我正在使用设备之间的蓝牙进行文件传输，它们工作得很好。

因此，在 Milestone 的项目调试过程中，收到文件后，我发现我的代码中有一些错误（从 DB 获取），我在中间停止了调试器。我得到了上述标题错误。我重新启动，重置我的设备，但没有白费。

然后同样的事情发生在我的一台 HTC Nexus 设备上。任何想法/帮助将不胜感激。我只有一周的时间来完成我的项目。

确切的错误是：

应用程序蓝牙共享（进程 com.android.bluetooth）意外停止。“强制关闭”/报告选项仅可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T08:58:44.383

我通过重置出厂数据使我的设备正常工作。但是为了避免将来的混乱，我更改了我的项目包名称。我认为，正如 dljava 指出的那样，android OS 导致了这个命名空间的问题。谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-23T20:23:30.873

在下面做了，它马上就起作用了。

> 设置 > 应用程序 > 全部 > LogsProvider > 清除数据

搏一搏。

# javascript - IE 中的 Javascript 问题 - 预期对象？

> ID：10361238
> 
> 赞同：1
> 
> 时间：2012-04-28T06:35:03.117
> 
> 标签：javascript, jquery, internet-explorer, internet-explorer-8, wysihat

我在我的一个项目中使用 Wysihat 的[jQuery fork](https://github.com/swilliams/jq-wysihat)作为 Wysiwig 编辑器。除了（惊喜，惊喜）IE（特别是 IE8）之外，它在所有浏览器中都能完美运行。我在这里上传了示例文件：

[http://pezholio.co.uk/wysihat/examples/custom_buttons.html](http://pezholio.co.uk/wysihat/examples/custom_buttons.html)

在 IE 中运行文件时，出现错误`Object expected`，它似乎发生在此函数中：

```
window.getSelection = (function() {
  var selection = new Selection(document);
  return function() { return selection; };
})(); 
```

任何想法可能导致问题，我可以做些什么来解决它？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T10:26:06.230

喔好吧。我想我现在已经搞定了。我已经删除了现有的 IE 后备代码并改用[selection.js](https://github.com/timcameronryan/selection.js)。您可以在下面的要点中看到代码：

[https://gist.github.com/2556956](https://gist.github.com/2556956)

# django - 模板过滤器修剪任何前导或尾随空格

> ID：10361240
> 
> 赞同：32
> 
> 时间：2012-04-28T06:35:20.577
> 
> 标签：django, django-template-filters

django 中是否有一个模板过滤器，可以修剪输入文本中的任何前导或尾随空格。

就像是：`{{ var.example|trim }}`

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-09-11T11:40:24.647

[Django 模板](https://docs.djangoproject.com/en/dev/ref/templates/language/#variables)允许您使用“.”来访问方法和属性。句法：

```
{{ var.example.strip }} 
```

在处理 HTML 时，您可以通过链接其他过滤器来扩展它，例如：

```
{{ var.example.strip|safe|removetags:"p img" }} 
```

在这里，我们首先删除任何`<p>`和`<img>`标签，然后告诉 Django 它可以安全地呈现我们已删除任何空白的其余内容。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-04-28T06:41:32.803

你可以自己做

```
from django import template
from django.template.defaultfilters import stringfilter

register = template.Library()

@register.filter
@stringfilter
def trim(value):
    return value.strip() 
```

[文档](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#template-filters-that-expect-strings)

# android - 检查 Android 中的互联网连接，如果活动不可用，请重新加载活动

> ID：10361243
> 
> 赞同：0
> 
> 时间：2012-04-28T06:35:39.337
> 
> 标签：android, android-networking

我开发了一个 Android RSS 阅读器。我创建了一个选项卡布局，并为每种类型的新闻（比如标题、国家、国际等）创建了每个选项卡。

然后我在 tablayout 的第一页的自定义列表视图中列出了 RSS 标题及其图像。见下图。

![在此处输入图像描述](../Images/ca9f2f58c9b678d9ff0db3564d7cd36b.png)

现在，当用户单击新闻标题时，会打开另一个带有新闻描述的活动（页面）。

我的问题是当用户单击选项卡并加载时，如果互联网连接不可用，我想显示一个带有两个按钮的对话框，重试和退出。

当用户单击重试时，应重新加载活动。我使用了一种方法（ if(International.Title==null) ）。但我认为它不是正确的方法。我想知道是否有更好的解决方案检查网络是否可用....

这是我的代码，

```
 public class International extends Activity {
    static final String URL = "http://www.abcd.com/en/taxonomy/term/3/0/feed";
    static final String KEY_HEAD = "item";
    static final String KEY_DATE = "pubDate";
    ListView list;
    InternationalAdapter adapter;

    public static String[] Title;
    public static String[] Description;
    public static String[] image;
    public static String[] Date;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.headlines);

        Bundle mybundle = new Bundle();
        mybundle.putString("number", "0");
        new DoInBackground().execute();
    }
    public void do_update() 
        {
            internationalparser.parse();//this is the function to parse RSS feeds

        }

    public void populate_listview()
     {

        ArrayList<HashMap<String, String>> newsList = new ArrayList<HashMap<String, String>>();

        XMLParser parser = new XMLParser();
        String xml = parser.getXmlFromUrl(URL); // getting XML from URL
        Document doc = parser.getDomElement(xml); // getting DOM element

        NodeList nl = doc.getElementsByTagName(KEY_HEAD);
        // looping through all song nodes <song>
        NodeList itemLst = doc.getElementsByTagName("item");

        for (int i = 0; i < nl.getLength(); i++) {
            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();
            Element e = (Element) nl.item(i);

            //map.put(KEY_DATE, parser.getValue(e, KEY_DATE));

            newsList.add(map);
        }

        list=(ListView)findViewById(R.id.list);

        // Getting adapter by passing xml data ArrayList
        adapter=new InternationalAdapter(this, newsList);        
        list.setAdapter(adapter);

        // Click event for single list row
        list.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
                Intent myintent = new Intent("com.abcd.rssreaderinternationalpodcast.PODCAST");
                Bundle mybundle = new Bundle();
                mybundle.putInt("number", position);
                myintent.putExtras(mybundle);

                startActivity(myintent);

            }

        }); 

    }

     private class DoInBackground extends AsyncTask<Void, Void, Void>
     implements DialogInterface.OnCancelListener
{   
private ProgressDialog dialog;
private Intent intent;
private Intent intent2;

public void onPreExecute() 
{

    dialog = ProgressDialog.show(International.this, "", "Loading", true);

}

protected Void doInBackground(Void... unused) 
{ 

do_update(); 
return null; 
}

public void retry()
{

    internationalparser.parse();
}

protected void onPostExecute(Void unused) 
{ 

    if(International.Title!=null)
    {

        dialog.dismiss();
        populate_listview();

    }
    if(International.Title==null) ///this is what I tried.
    {
        dialog.dismiss();
         AlertDialog.Builder alertbox = new AlertDialog.Builder(International.this);

          alertbox.setMessage("Error in connection!");
          alertbox.setPositiveButton("Retry", new DialogInterface.OnClickListener() {

             public void onClick(DialogInterface arg0, int arg1) {

               retry();             //here i want to reload  activity

             }

         });

         alertbox.setNegativeButton("Exit", new DialogInterface.OnClickListener() {

             public void onClick(DialogInterface arg0, int arg1) {

                 finish();

             }

         });

         alertbox.show();

    }

}

public void onCancel(DialogInterface dialog) 
{ 
cancel(true); 
dialog.dismiss(); 
  }
 }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T22:52:41.757

这是我的重试/退出互联网连接课程

用法：

```
URLContent httpContent = new URLContent(this);
String test =  httpContent.getContent("http://www.hotmail.com/"); 
```

班级：

```
import java.io.BufferedReader;

import java.io.InputStream;
import java.io.InputStreamReader;
import java.net.URI;

import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;

import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;

public class URLContent {

    MainActivity mMainActivity;
    String returnData;
    String address;

    public URLContent(MainActivity mMainActivity)  
    {
        this.mMainActivity = mMainActivity;
    }

    public String getContent(String address)
    {
        this.address = address;
        processContent(address);
        return returnData;
    }

    private void processContent(String address)
    {

        try {

            if (!isNetworkAvailable(mMainActivity))
            {
                throw new Exception("No internet connectivity.");
            }

            HttpClient client = new DefaultHttpClient();
            HttpGet request = new HttpGet();
            request.setURI(new URI(address));
            HttpResponse response = client.execute(request);

                if (response.getStatusLine().getStatusCode() == 200)
                {
                    InputStream ips  = response.getEntity().getContent();
                    BufferedReader buf = new BufferedReader(new InputStreamReader(ips,"UTF-8"));

                    StringBuilder sb = new StringBuilder();
                    String s;
                    while(true)
                    {
                        s = buf.readLine();
                        if(s==null || s.length()==0)
                            break;
                        sb.append(s);

                    }
                    buf.close();
                    ips.close();

                    returnData = sb.toString();
                }
                else
                {
                    throw new Exception();
                }

        } catch (Exception e) {

             makeAndShowDialogBox(e.getMessage()).show();
        }

    }

    private static boolean isNetworkAvailable(Context context) 
    {
       ConnectivityManager connectivity = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
       if (connectivity == null) 
       {
           return false;
       } else 
       {
          NetworkInfo[] info = connectivity.getAllNetworkInfo();
          if (info != null) 
          {
             for (int i = 0; i < info.length; i++) 
             {
                if (info[i].getState() == NetworkInfo.State.CONNECTED) 
                {
                   return true;
                }
             }
          }
       }
       return false;
    }

    private AlertDialog makeAndShowDialogBox(String msg)
    {
        AlertDialog myQuittingDialogBox =  new AlertDialog.Builder(mMainActivity) 

            .setCancelable(false)
            .setTitle(R.string.connectionerr) 
            .setMessage(msg) 

            .setPositiveButton("Retry", new DialogInterface.OnClickListener() { 
                public void onClick(DialogInterface dialog, int whichButton) { 
                 //whatever should be done when answering "YES" goes here
                    getContent(address);
                }              
            })//setPositiveButton
            .setNegativeButton("Exit", new DialogInterface.OnClickListener() { 
                public void onClick(DialogInterface dialog, int whichButton) { 
                 //whatever should be done when answering "NO" goes here
                    mMainActivity.finish();
             } 
            })//setNegativeButton

            .create();

            return myQuittingDialogBox;
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T06:37:46.467

```
public static boolean isNetworkAvailable(Context context) {
        isNetworkAvailable = false;
       ConnectivityManager connectivity = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
       if (connectivity == null) {
           return false;
       } else {
          NetworkInfo[] info = connectivity.getAllNetworkInfo();
          if (info != null) {
             for (int i = 0; i < info.length; i++) {
                if (info[i].getState() == NetworkInfo.State.CONNECTED) {
                    isNetworkAvailable = true;
                   return true;
                }
             }
          }
       }
       return false;
    }//isNetworkAvailable() 
```

使用上述方法检查互联网连接，如果没有互联网连接，则引发 AlertDialog。

```
private AlertDialog makeAndShowDialogBox(){
    AlertDialog myQuittingDialogBox = 

        new AlertDialog.Builder(this) 
        //set message, title, and icon
        .setTitle("Terminator") 
        .setMessage("Are you sure that you want to quit?") 
        .setIcon(R.drawable.ic_menu_end_conversation)

        .setPositiveButton("Retry", new DialogInterface.OnClickListener() { 
            public void onClick(DialogInterface dialog, int whichButton) { 
             //whatever should be done when answering "YES" goes here
            }              
        })//setPositiveButton
        .setNegativeButton("NO", new DialogInterface.OnClickListener() { 
            public void onClick(DialogInterface dialog, int whichButton) { 
             //whatever should be done when answering "NO" goes here
         } 
        })//setNegativeButton

        .create();

        return myQuittingDialogBox;
} 
```

更新：：

```
new DoInBackground().execute(); 
```

如下替换此行并尝试

```
if(isNetworkAvailable(YourActivity.this))
    new DoInBackground().execute();
else{
    makeAndShowDialogBox();
} 
```

# c# - 将图像文件从一个 URL 下载到另一台服务器

> ID：10361246
> 
> 赞同：0
> 
> 时间：2012-04-28T06:35:55.237
> 
> 标签：c#, asp.net, .net, file-upload, download

我必须从实时 URL 下载图像并保存到实时服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T06:50:51.627

您可以使用 WebClient 并下载和存储图像，非常简单：

```
WebClient wc = new WebClient;
wc.DownloadFile("http://www.site.com/image.jpg", 
                 Server.MapPath("~\images\image.jpg")); 
```

当然，您必须设置可从您的网络应用程序写入的图像目录

# ruby - Ruby 中的 Set 是否始终保留插入顺序？

> ID：10361250
> 
> 赞同：12
> 
> 时间：2012-04-28T06:36:51.677
> 
> 标签：ruby, set

即，Ruby 的 Set 是否等同于 Java 的 LinkedHashSet？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-28T06:41:25.183

在 Ruby 1.9 中：**是**的。在 Ruby 1.8 中：*可能不是*.

`Set` [`Hash`在内部使用 a](https://github.com/ruby/ruby/blob/trunk/lib/set.rb#L222)；并且由于哈希在 1.9 中是按插入排序的，所以您可以开始了！

由于[mu 太短](https://stackoverflow.com/users/479863/mu-is-too-short)了，这是一个实现细节，将来可能会改变（尽管不太可能）。值得庆幸的是，当前的实现是纯 ruby​​，如果您愿意，将来`Set`可以改编成`OrderedSet`

# android - android对话框关闭按钮

> ID：10361257
> 
> 赞同：0
> 
> 时间：2012-04-28T06:38:20.060
> 
> 标签：android

我有一个活动，我已使用设置为对话框

```
<activity android:name=".ChangeUserImageActivity" android:theme="@android:style/Theme.Dialog"></activity> 
```

如何在右上角创建关闭按钮？目前，我的布局如下，我使用的是绝对布局......

```
 <Button
    android:id="@+id/closebtn"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_x="260px"
    android:layout_y="5px"
    android:text="X"
    android:textSize="18sp"
    android:onClick="close_click"
    /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T06:42:06.387

修改您当前的布局，使父级为 a `RelativeLayout`，然后您`Button`将如下所示：

```
<Button
    android:id="@+id/closebtn"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:text="X"
    android:textSize="18sp"
    android:onClick="close_click"
    /> 
```

当然，您必须修改当前布局才能使用`RelativeLayout`（您没有添加到问题中的布局）

# iis-7 - 创建子域时 IIS7 中的绑定

> ID：10361260
> 
> 赞同：0
> 
> 时间：2012-04-28T06:38:57.910
> 
> 标签：iis-7, ip, subdomain

我`www.foo.com`通过 NameCheap 购买了域名。

我将该域名指向我的 VPS 的静态 IP 地址，并在 IIS7 中创建了一个 Web 应用程序，它工作正常。

现在我创建了另一个单独的 Web 应用程序并将其绑定设置为`forums.foo.com`.

然而，浏览器并没有进入该站点，而且似乎绑定并没有完全符合我的预期。

在 Firefox 中，我得到：

> 找不到服务器
> 
> Firefox 在 forums.foo.com 上找不到服务器。

为了使子域正确指向我的文件夹，我是否需要进行某种特殊配置`inetpub`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T06:52:35.747

不用先用namecheap配置子域吗？谁为子域提供 dns？

# google-drive-api - 即使在安装应用程序后，我也面临“经过身份验证的用户尚未安装具有客户端 ID 的应用程序”错误

> ID：10361278
> 
> 赞同：0
> 
> 时间：2012-04-28T06:42:23.410
> 
> 标签：google-drive-api

> **可能重复：**
> [为什么我在本地使用 Google Drive API 时收到“经过身份验证的用户没有安装带有客户端 ID 的应用程序”错误？](https://stackoverflow.com/questions/10345904/why-am-i-getting-the-authenticated-user-has-not-installed-the-app-with-client-i)

我已经创建了我的应用程序的网络商店列表并安装了它，但在尝试插入文件时仍然遇到错误“经过身份验证的用户尚未安装具有客户端 ID 的应用程序”。

它的确切原因是什么？

# domain-driven-design - 多个聚合根之间的分页

> ID：10361280
> 
> 赞同：0
> 
> 时间：2012-04-28T06:42:49.120
> 
> 标签：domain-driven-design, paging, aggregateroot

我是 DDD 的新手，所以如果某些术语/理解有点偏离，请执行我。但请纠正我，任何建议表示赞赏。

假设我正在做一个社会工作委员会网站，并且我已经确定了我的总根源：候选人、工作和公司。非常不同的事物/上下文，因此每个都有自己的数据库表、存储库和服务。但现在我必须构建一个 Pinterest 风格的主页，其中的数据块显示候选人、工作或公司的数据。

现在棘手的部分是数据块必须在最后一次发生在它所代表的聚合上时进行排序（一家公司被点赞/评论，或者工作被更新等），并且分页再次以无限滚动的形式发生就像 Pinterest 一样。由于这些聚合是独立发生的，因此我无法知道任何特定页面上有多少聚合。（但如果我这样做了，比如说一个跟踪聚合上次更新时间的表，我别无选择，只能将其提升为另一个聚合根，并拥有自己的存储库？）

我将在哪里实现分页逻辑？我在某处读到，每个聚合根每个存储库应该有一个服务，所以我应该在控制器中排序和分页（顺便说一下，我正在使用 MVC）？还是应该有一个独立的应用程序服务来做这样的跨界工作？无论哪种情况，我都必须从数据库中获取所有聚合的所有实体？

这已经有太多问题了，但我基本上是在问：

1.  是分页呈现、业务还是持久化逻辑？哪个水平层？
2.  跨界代码应该在 DDD 中的哪个位置？哪个垂直堆栈？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T12:00:53.117

有几件事浮现在脑海。

*   这些汇总数据需要多新鲜？我怀疑实时是否会增加很多价值。与商务人士交谈并讨价还价。这将允许您为问题构建一个更简单的解决方案。
*   为什么不让一些进程异步地进行扫描、聚合、排序和存储结果呢？甚至不需要在数据库中（Redis）。讨价还价的延迟可能是运行进程的时间间隔。
*   在您的示例中，分页几乎不是业务决策问题。您只需要提供无限滚动和一些获取缓存、聚合、排序信息的 ajax 调用。这与 DDD 关系不大。
*   您的 UI 工件和聚合、排序过程似乎非常独立，它们与数据一起工作，或者 - 更好的是 - 每个上下文的数据组件，以所需的格式提供数据。

# java - 关于方法在 StringBuffer 和 StringBuilder 中没有被覆盖？

> ID：10361281
> 
> 赞同：0
> 
> 时间：2012-04-28T06:42:58.803
> 
> 标签：java

`hashCode()`和`equals()`方法没有被覆盖`StringBuffer`，`StringBuilder`我在下面尝试这段代码..

```
 //StringBuffer does not override equals & hashCode
        //StringBuffer s = new StringBuffer("saral");
        //StringBuffer s1 = new StringBuffer("saral");

        StringBuilder s = new StringBuilder("saral");
        StringBuilder s1 = new StringBuilder("saral");          

        //String s = new String("saral");
        //String s1 = new String("saral");

       HashSet set=new HashSet();
        set.add(s);
        set.add(s1);
        set.add(null);
       System.out.println("There are "+set.size()+" elements in the set."); 
```

结果我得到的结果在我使用的两种情况下都是 3，`StringBuffer`或者`StringBuilder`在 string 的情况下是 2，因为 string 已经覆盖了`hashCode()`and`equals()`方法，请告知。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T06:48:54.457

StringBuilder/StringBuffer 是为了更有效的字符串操作而创建的，而不是为了存储值。因此，您不应将其用作键或实现您的版本。或者干脆调用`toString`它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T07:32:47.787

您不能让 hashCode、equals 或 compareTo 依赖于在将对象添加到集合后可能更改的任何内容。例如

```
StringBuilder s1 = new StringBuilder("saral");
StringBuilder s2 = new StringBuilder("saral");          

HashSet set = new HashSet();
set.add(s1);
set.add(s2);
assert set.size() == 2;

s2.append("-two");
assert set.size() == 2; 
```

如果您设置了 s1.equals(s2)，那么只有一个条目，而当您更改 s2 时，会发生什么？你现在会有一两个条目吗？

在 StringBuilder 的情况下，内容可以更改，因此它的 hashCode 和 equals 不依赖于此，因此它只有默认实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T07:29:42.977

正如 Paul Vargas 所说，StringBuffer/StringBuilder 是可变的。

这意味着两个 StringBuilder 或两个 StringBuffer 不能真正说是相等的，除非它们实际上是同一个实例。因此，身份相等是最合适的语义。

StringBuffers 和 StringBuilders 是可变的这一事实也意味着它们不适合用作基于值的键等。您应该首先创建一个字符串。

如果您真的，真的需要一个具有按值等于语义的“可变字符串”类，您总是可以复制`AbstractStringBuilder`...的代码或从头开始实现它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-28T07:15:44.677

`StringBuilder`并且`StringBuffer`是可变的字符序列并且`String`是不可变的。

# objective-c - 一种方法只使用一个 NSThread

> ID：10361284
> 
> 赞同：0
> 
> 时间：2012-04-28T06:43:27.490
> 
> 标签：objective-c, multithreading, core-data, nsthread

我`doRefresh`在后台线程中运行的应用程序和方法“”中有刷新按钮。现在，如果用户按下双击 - 方法`doRefresh`运行 2 次或更多次。我希望如果用户按下双击和更多的点击，所有 previos 线程停止工作并完成。新方法开始在新线程中运行。我该怎么做？

更多细节：我使用 CoreData，并为填充关系对象解析长 XML 文件。例如，当用户按下刷新按钮 10 次时，hi catch 下一个错误：

```
 reason: '*** Collection <__NSCFSet: 0x5b7dd50> was mutated while being enumerated.<CFBasicHash 0x5b7dd50 [0x1503400]>{type = mutable set, count = 8 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T06:56:05.870

```
Here's how things may work
1\. Keep a reference to last thread spawned
2\. In each thread spawned keep a variable, say var_cancel
3\. When a new thread is created, set the var_cancel to true for previous thread.
4\. In the thread, check for var_cancel at short durations. If found true, exit the thread.
5\. Make sure the thread does not produce any side effects between var_cancel set true to exit of thread. 
```

# android - 使用谷歌地图和安卓多目的地进行方向？

> ID：10361288
> 
> 赞同：1
> 
> 时间：2012-04-28T06:43:51.747
> 
> 标签：android, google-maps, google-maps-api-3

如何使用具有多个目的地的 Google 地图和 Android 来确定方向？

例如，起点：A 镇

*   目的地 1：C镇
*   目的地 2：B镇
*   目的地 3：F镇

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:58:54.700

到目前为止我发现的最好的方法是安装船浏览器并在桌面模式下运行。然后在该浏览器中登录谷歌地图并输入您的搜索（就像在 PC 上一样）。

完成后，在 androids 谷歌地图中，​​您现在可以选择“我的地点”和“最近”并选择您的路线。

我只是希望你是一种更简单的方法。

# svn - 找不到 subrepo 的错误“svn”可执行文件 '

> ID：10361292
> 
> 赞同：3
> 
> 时间：2012-04-28T06:44:11.430
> 
> 标签：svn, mercurial

建立：
TortoiseSVN 1.7.6（64位）；
TortoiseHg 2.3.2（64 位）；

该项目包含一个托管在 SVN 中的文件夹。
克隆 Mercurial - 找不到子存储库“[文件夹名称]”的错误“svn”可执行文件

访问那里的 SVN 存储库。访问密码已保存。
TortoiseSVN 和 TortoiseHg 在 PATH 中注册。

你能告诉我如何解决这个问题吗？

**更新：**

问题已解决。

解决方法：
1) 输入cmd命令“svn”。

2) 如果出现错误：

'svn' 不是内部或外部命令、可运行程序或批处理文件。

安装TortoiseSVN时必须重新安装并标记“命令行客户端工具”项
或单独安装Subversion命令行客户端

谢谢大家的意见

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T19:44:44.197

问题已经解决了。

解决方法：
1) 输入cmd命令“svn”。

2）如果出现错误：

'svn' 不是内部或外部命令、可运行程序或批处理文件。

安装TortoiseSVN时必须重新安装并标记“命令行客户端工具”项
或单独安装Subversion命令行客户端

谢谢大家的意见

# iphone - 从枚举类型“UIViewAnimationCurve”到不同枚举类型“UIViewAnimationTransition”的隐式转换

> ID：10361293
> 
> 赞同：3
> 
> 时间：2012-04-28T06:44:22.657
> 
> 标签：iphone, objective-c, ios5

当我使用这行代码时，我收到了一些警告。

```
[UIView setAnimationTransition:UIViewAnimationCurveEaseInOut forView:nil cache:YES]; 
```

然后我收到一些警告，这是以下内容

> `UIViewAnimationCurve`从枚举类型到不同枚举类型的隐式转换`UIViewAnimationTransition`

所以请向我建议如何在 iOS 5.0 中解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T06:50:09.377

UIViewAnimationCurveEaseInOut 不是 uiview 动画过渡的过渡类型，它是动画曲线的类型。以下是根据苹果开发人员参考的有效转换。

```
 UIViewAnimationTransitionNone,
   UIViewAnimationTransitionFlipFromLeft,
   UIViewAnimationTransitionFlipFromRight,
   UIViewAnimationTransitionCurlUp,
   UIViewAnimationTransitionCurlDown. 
```

请使用其中之一。如果要设置动画曲线，请执行以下操作。

```
[UIView setAnimationCurve:UIViewAnimationCurveEaseInOut]; 
```

# ios - 使用 nsstring 时开始 EXC_BAD_ACCESS

> ID：10361297
> 
> 赞同：0
> 
> 时间：2012-04-28T06:45:00.173
> 
> 标签：ios, iphone, objective-c, exc-bad-access

我在 4 小时内变得疯狂，我真的需要帮助。这是代码：

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    //check if strGroup has prefix and suffix #
    BOOL result;

    result = [strGroup hasPrefix: @"#"];

    if (result)
    {
        result = [strGroup hasSuffix: @"#"];

        if (result)
        {

            NSMutableString* string = [NSMutableString stringWithString: strGroup];
            str = [strGroup substringWithRange: NSMakeRange (1, [string length]-2)];

            strToHoldAllContact = [NSString stringWithFormat:@"%@",str];
        }
    }
    NSLog(@"strToHoldAllContact=%@",strToHoldAllContact);
} 
```

我得到了`strToHoldAllContact`正确的价值。但是当我尝试`strToHoldAllContact`从另一种方法访问时，我收到了错误：

```
[CFString respondsToSelector:]: message sent to deallocated instance 0x856f2a0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T09:11:07.653

利用

```
strToHoldAllContact = [NSString stringWithFormat:@"%@",str];
[[strToHoldAllContact retain] autorelease]; 
```

忘记释放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T09:31:12.957

使用 ARC，在 .h 中将 strToHoldAllContact 声明为：

```
@property(strong) NSString *strToHoldAllContact; 
```

在.m 中，使用它（在@synthesize 之后），因为`self.strToHoldAllContact = [NSString stringWithFormat:@"%@",str];` 这样你就不会遇到问题。

没有 ARC，在 .h 中声明 strToHoldAllContact 为：

```
@property(retain) NSString *strToHoldAllContact; 
```

并以与 ARC in.m 文件相同的方式使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T08:55:22.777

只需更换

```
strToHoldAllContact = [NSString stringWithFormat:@"%@",str]; 
```

至

```
strToHoldAllContact = [[NSString alloc] initWithFormat:@"%@",str]; 
```

并在你不再需要它之后释放它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-28T07:50:22.030

无论您在哪里初始化或设置字符串，请执行此`[strToHoldAllContact retain];`操作，并且不要忘记在完成使用后释放它

# android - 如何在 Android 中更新 WiFi 配置的频率？

> ID：10361299
> 
> 赞同：2
> 
> 时间：2012-04-28T06:46:04.703
> 
> 标签：android, wifi, frequency

我想改变wifi的频率来获得每个频道的信号强度。我想用Java反射但不能出来效果。所以我想向你寻求帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T21:13:39.973

你的问题不清楚。频率与获得信号强度无关。信号强度由 WiFi 客户端在接收到帧时计算。如果要获取每个通道的信号强度，则需要进行 WiFi 扫描。扫描在 802.11 (WiFi) 协议中定义，每 n 个时间单位进行一次，无需用户干预。

# python - 具有经过身份验证的用户的基于 Django 视图的缓存

> ID：10361300
> 
> 赞同：4
> 
> 时间：2012-04-28T06:46:45.630
> 
> 标签：python, django, caching

所以我在 django 中使用基于视图的缓存，因为我有一些并不真正适合缓存的视图和其他真正适合的视图。但是，在我缓存的其中一些视图中，不同用户的输出会有所不同。有没有办法为不同的用户分开基于视图的缓存？@vary_on_cookie 装饰器看起来正是我需要的，但它似乎不适用于基于视图的缓存？

目前，在我看来，我有：

```
@vary_on_cookie
@cache_page(60 * 5)
def view(request): 
```

如果您以匿名身份登录，您可以查看登录用户的缓存内容。

有任何想法吗？我知道我可能会使用低级缓存来解决这类问题，但如果没有更简单的 django 方法来解决这个问题，我会感到惊讶，这似乎是一个常见问题。

谢谢

汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T08:19:42.523

这里有一个使用 Django 缓存框架的[片段。](http://djangosnippets.org/snippets/1493/)我想你可以自己修改它。第 38 行：

```
key = make_cache_key(request.get_full_path(), getattr(request, 'supports_html5', None)) 
```

您可以将其更改为

```
key = make_cache_key(request.user[.id], request.get_full_path(), getattr(request, 'supports_html5', None)) 
```

使用户拥有不同的页面键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T07:32:17.860

您可以简单地将基于客户端的缓存与`cache_control`. 喜欢：

```
@cache_control(max_age=60 * 5)
def view(request): 
```

# ios - UIWebView 复用

> ID：10361301
> 
> 赞同：3
> 
> 时间：2012-04-28T06:46:53.370
> 
> 标签：ios, uiwebview, load, reusability

我想在不同的视图控制器中使用 UIWebview，但我不希望这些视图控制器重新加载网页，换句话说，我希望 UIWebview 加载页面一次，并在任何地方使用它。所以我想创建一个网页视图并以单例方式加载网页。我的问题是：这可能还是合适？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T14:30:51.363

您要呈现的 html 类型是什么？它是静态 HTML 内容还是动态 URL 源？

**对于静态 HTML 内容**

我建议您创建首选 HTML 文件并直接加载它们。

```
NSString *htmlContent = @"Your Static HTML Code";
NSData *htmlData = [htmlContent dataUsingEncoding:NSUTF8StringEncoding];

if (htmlData) {
    NSString *_path = [[NSBundle mainBundle] bundlePath];
    NSURL *_baseURL = [NSURL fileURLWithPath:_path];
    [self.BottomWebView loadData:htmlData MIMEType:@"text/html" textEncodingName:@"UTF-8" baseURL:_baseURL];
} 
```

**基于您的 URL 源的动态 HTML 内容**

当您在第一个请求中加载数据时，您可以将它们存储在 NSData 中，它可以是您的单例类中的属性。当然，你可以在任何地方调用它们，任何 ViewController 来获取你的数据并通过一次连接将它们加载到你的 UIWebview 中。

希望对你有帮助！

# regex - 我如何知道何时在正则表达式解析树中插入连接节点？

> ID：10361303
> 
> 赞同：1
> 
> 时间：2012-04-28T06:47:08.897
> 
> 标签：regex, parsing, haskell

我正在从事一个有趣的项目，该项目涉及从正则表达式生成解析树。我已经让它大部分工作了，但我对如何集成连接很感兴趣。

```
*Main> :l regex.hs 
[1 of 1] Compiling Main             ( regex.hs, interpreted )
Ok, modules loaded: Main.
*Main> toPostfix "a"
"a"
*Main> toPostfix "a|b"
"ab|"
*Main> toPostfix "((a|b)|c)"
"ab|c|"
*Main> toPostfix "((a|b)|c)de"
"ab|c|de"
*Main> toPostfix "((a|b)|c)*de"
"ab|c|*de"
*Main> toPostfix "(ab)*"
"ab*" -- Should be ab&*
*Main> toPostfix "(ab|bc)"
"abbc|" -- Should be ab&bc&| 
```

这是我的代码：

```
import Data.List
import Control.Monad

data Reg = Epsilon |
           Literal Char |
           Or Reg Reg |
           Concat Reg Reg |
           Star Reg
           deriving Eq

showReg :: Reg -> [Char]
showReg Epsilon        = "@"
showReg (Literal c)    = [c]
showReg (Or r1 r2)     = "(" ++ showReg r1 ++  "|" ++ showReg r2 ++ ")"
showReg (Concat r1 r2)   = "(" ++ showReg r1 ++ showReg r2 ++ ")"
showReg (Star r)       = showReg r ++ "*"

instance Show Reg where
    show = showReg

evalPostfix :: String -> Reg 
evalPostfix = head . foldl comb []
    where
        comb :: [Reg] -> Char -> [Reg]
        comb (x:y:ys) '|'   = (Or y x) : ys
        comb (x:y:ys) '&'   = (Concat y x) : ys
        comb (x:xs) '*'     = (Star x) : xs
        comb xs '@'         = Epsilon : xs
        comb xs s           = (Literal s) : xs

-- Apply the shunting-yard algorithm to turn an infix expression
-- into a postfix expression.
shunt :: String -> String -> String -> String
shunt o p [] = (reverse o) ++ p
shunt o [] (x:xs)
    | x == '(' = shunt o [x] xs
    | x == '|' = shunt o [x] xs
    | otherwise = shunt (x:o) [] xs
shunt o (p:ps) (x:xs)
    | x == '(' = shunt o (x:p:ps) xs
    | x == ')' = case (span (/= '(') (p:ps)) of
        (as, b:bs) -> shunt (as ++ o) bs xs
    | x == '|' = case (p) of
        '(' -> shunt o (x:p:ps) xs
        otherwise -> shunt (p:o) (x:ps) xs
    | x == '*' = shunt (x:o) (p:ps) xs
    | otherwise = shunt (x:o) (p:ps) xs

-- | Convert an infix expression to postfix
toPostfix :: String -> String
toPostfix = shunt [] []

-- | Evaluate an infix expression
eval :: String -> Reg
eval = evalPostfix . toPostfix 
```

特别是，分流功能正在完成所有繁重的工作，是应该进行更改的地方。（这棵树可以很容易地在 evalPostfix 中构建。）

现在，我花了最后几个小时寻找解释如何做到这一点的教程，但没有任何运气。我想说我需要跟踪我有多少悬挂表达式，如果我会做任何会创建三个的事情，请插入一个“&”，但这似乎效率低下，我确信有更好的方法. 如果有人可以看到如何更改代码或可以指出我正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T10:55:34.177

调车场算法主要用于处理中缀运算符到后缀运算符的转换。两个复杂性是正则表达式语法已经有一个后缀运算符 *，并且中缀连接运算符是隐式的。这些组合使解析变得烦人。

“abcd”与中缀 & 看起来如何？这是a&b&c&d。这应该是后缀ab&c&d&还是abcd&&&？第一个是左关联的，第二个是右关联的。我声称第二个更适合解析正则表达式。

现在，a、b、c 或 d 中的每一个都可能是括号中的正则表达式，并且每个都可能后跟一个“*”。

我将看到有关增强您的代码以添加 &...

更新：您的代码错误

```
*Main> toPostfix' "a|bcd"
"abcd|" 
```

我不能轻易修复错误并将其扩展为添加 &，所以我现在放弃了。

# python - 修改字符串并向 irc 用户发送 PM/查询

> ID：10361307
> 
> 赞同：0
> 
> 时间：2012-04-28T06:48:46.237
> 
> 标签：python, irc

我正在尝试规范化来自连接到 IRC 的 python 机器人的输入。
我的python脚本是这样的：http: [//pastebin.com/St4A1vLf](http://pastebin.com/St4A1vLf)

如果有人说“ `!help`”，这将出现在命令提示符中（当我在命令提示符下运行脚本时）。

```
:bot!~botty@112.443.22.5 #fish :!help 
```

我想要做的是获取变量“ `data`”并将其规范化，以便它只显示用户的昵称，即“ `bot`”，因此凝视冒号 ' `:`' 和字符串的其余部分（来自`!~`）也被删除。

在此之后，我希望它向说“ `!help`”的用户发送带有“”的私人消息/查询`no help settings`。（我稍后会添加帮助命令。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T08:31:30.427

首先：您发布的行没有意义，因为缺少命令。你可能的意思是

```
:bot!~botty@112.443.22.5 PRIVMSG #fish :!help 
```

但是为什么不使用现有的 Python 的 irc 实现之一，例如twisted-words？它们允许您轻松处理某些命令（例如您的情况下的 PRIVMSG）。

如果您不想这样做，您需要手动解析传入的消息并提取您需要的任何信息。

这是一个简单的解析器。`line`是从服务器接收到的一行。

```
def parse_irc(line):
    src = None
    parts = line.split(' ')
    if parts[0][0] == ':':
        srcpart = parts.pop(0)[1:]
        src = {'ident': None, 'host': None}
        if '!' not in srcpart:
            # e.g. a message from a server
            src['nick'] = srcpart
        else:
            # nick!ident@host
            tmp = srcpart.split('!', 1)
            src['nick'] = tmp[0]
            src['ident'], src['host'] = tmp[1].split('@', 1)
    cmd = parts.pop(0)
    args = []
    for i, arg in enumerate(parts):
        if arg[0] == ':':
            args.append(' '.join(parts[i:])[1:])
            break
        args.append(arg)
    return src, cmd, args 
```

解析后的行如下所示：

```
> python ircparser.py 'PING :12345'
src:  None
cmd:  'PING'
args: ['12345']
> python ircparser.py 'NOTICE AUTH :Welcome to this server'
src:  None
cmd:  'NOTICE'
args: ['AUTH', 'Welcome to this server']
> python ircparser.py ':me!ident@host PRIVMSG #channel :hi'
src:  {'nick': 'me', 'host': 'host', 'ident': 'ident'}
cmd:  'PRIVMSG'
args: ['#channel', 'hi']
> python ircparser.py ':me!ident@host PRIVMSG #channel :!help me'
src:  {'nick': 'me', 'host': 'host', 'ident': 'ident'}
cmd:  'PRIVMSG'
args: ['#channel', '!help me'] 
```

# oracle - 从 Dot Net 中的 Oracle 异常获取实际错误消息

> ID：10361309
> 
> 赞同：4
> 
> 时间：2012-04-28T06:49:02.863
> 
> 标签：oracle, stored-procedures

我有这个程序：

```
create or replace PROCEDURE MyProc
(
     <some-parameters>
)
AS
  BEGIN
    if(<some-condition>) then
        RAISE_APPLICATION_ERROR('my custom error message');
    end if;
  END; 
```

从 C# 调用它时：

```
try
{
    <call procedure>
}
catch(OracleException x)
{
    lblMessage.Text = x.Message;
} 
```

我收到如下错误消息：

```
ORA-28008: my custom error message ORA-06512: at blah, line blah ORA-06512: at line blah 
```

我只想：

```
my custom error message 
```

没有内部异常。错误收集没有帮助。使用 Exception 而不是 OracleException 时的情况相同。

我错过了什么？

我可以使用字符串操作，但错误消息的格式有多固定？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T21:54:35.967

我使用返回参数来捕获 php。我认为相同的技术将在.net 中有用。（我认为可以在异常处理中捕获自定义消息并仅重新引发该自定义消息，但下面的方法肯定有效。:)

```
create or replace PROCEDURE MyProc (p_result out varchar2)
is
  ...
begin
  ...
  if error then
    p_result := 'my custom error message';
    return; -- exit procedure 
  end if;

  p_result := 'ok';
end; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-28T07:21:45.920

尝试

PKG_MSG.RAISE_ERROR(0,null,'我的自定义错误信息',null,null,null,null,null,null,null,null,null,null );

代替

RAISE_APPLICATION_ERROR('我的自定义错误信息');

# java - BEA Weblogic中的JRockit与Sun Java实现的区别

> ID：10361311
> 
> 赞同：5
> 
> 时间：2012-04-28T06:49:40.070
> 
> 标签：java, sun, jrockit, bea

我们有来自 2 个供应商的不同 JRE 实现，一个是 BEA 的 Jrockit，另一个是 Sun。在我的项目中，该文档明确指出使用 BEA 的 Jrockit 实现。所以我想知道 Jrockit 与标准 sun JVM 的区别和优势。

谢谢普尼斯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-28T07:59:31.073

首先，BEA和Sun都被甲骨文收购。所以 JRockit 和 HotSpot 现在都是 Oracle 产品。

JRockit 最初是作为服务器端代码比 Hotspot 更快的 JVM，但从那时起已经做了很多工作以使 Hotspot 更快，因此尚不清楚这是否仍然适用。我记得的另一件事是 JRockit 有（有）不同的堆大小策略。特别是，您不需要为堆提供固定的上限。这可能是好事也可能是坏事，取决于你的观点。

从纯粹功能的角度来看，相同 Java 基线的 JRockit 和 HotSpot 实现*应该*几乎相同。

以下是一些其他资源（来自 Google 搜索）：

*   [《Sun JDK 与 Oracle JRockit 的比较》](http://weblogic-wonders.com/weblogic/2010/12/06/comparison-between-sun-jdk-and-oracle-jrockit/)
*   [JRockit JVM 与 HotSpot JVM](https://stackoverflow.com/questions/8068717/jrockit-jvm-versus-hotspot-jvm)
*   [维基百科的 JRockit 页面](http://en.wikipedia.org/wiki/JRockit)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T07:57:45.220

从技术上讲，它们现在都来自 Oracle。;)

鉴于前 Sun JVM 的大多数开发人员都来自 JRockit 团队，我怀疑随着时间的推移差异会越来越小（即两种产品只有一个开发团队）

# solr - 使用 solr 索引时作业失败

> ID：10361312
> 
> 赞同：1
> 
> 时间：2012-04-28T06:49:42.117
> 
> 标签：solr, hadoop, nutch

我已经将 nutch 与 hadoop 集成并用它进行了爬行。但是当我想为数据创建 solrindex 时，我得到了 Job Failed。这是我的命令：

```
$bin/nutch solrindex http://namenode:8983/solr/ crawl/crawldb -linkdb crawl/linkdb crawl/segments/* 
```

'crawl' 目录存储数据，它位于 HDFS 中。我只是在 solr 版本中使用了这个例子。在单节点模式（不是分布式模式）下运行命令时它工作正常。这是输出的片段，请原谅我以如此混乱的方式发布它：

```
12/04/28 13:51:22 INFO mapred.JobClient:  map 100% reduce 23%
12/04/28 13:51:30 INFO mapred.JobClient: Task Id : attempt_201204212112_0076_r_000000_0, Status : FAILED
java.io.IOException
    at org.apache.nutch.indexer.solr.SolrWriter.makeIOException(SolrWriter.java:103)
    at org.apache.nutch.indexer.solr.SolrWriter.close(SolrWriter.java:98)
    at org.apache.nutch.indexer.IndexerOutputFormat$1.close(IndexerOutputFormat.java:48)
    at org.apache.hadoop.mapred.ReduceTask$OldTrackingRecordWriter.close(ReduceTask.java:466)
    at org.apache.hadoop.mapred.ReduceTask.runOldReducer(ReduceTask.java:530)
    at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:420)
    at org.apache.hadoop.mapred.Child$4.run(Child.java:255)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Unknown Source)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1059)
    at org.apache.hadoop.mapred.Child.main(Child.java:249)
Caused by: org.apache.solr.client.solrj.SolrServerException: java.net.ConnectException: Connection refused
    at org.apache.solr.client.solrj.impl.CommonsHttpSolrServer.request(CommonsHttpSolrServer.java:478)
    at org.apache.solr.client.solrj.impl.CommonsHttpSolrServer.request(CommonsHttpSolrServer.java:244)
    at org.apache.solr.client.solrj.request.AbstractUpdateRequest.process(AbstractUpdateRequest.java:105)
    at org.apache.solr.client.solrj.SolrServer.add(SolrServer.java:49)
    at org.apache.nutch.indexer.solr.SolrWriter.close(SolrWriter.java:93)
    ... 9 more
Caused by: java.net.ConnectException: Connection refused
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.PlainSocketImpl.doConnect(Unknown Source)
    at java.net.PlainSocketImpl.connectToAddress(Unknown Source)
    at java.net.PlainSocketImpl.connect(Unknown Source)
    at java.net.SocksSocketImpl.connect(Unknown Source)
    at java.net.Socket.connect(Unknown Source)
    at java.net.Socket.connect(Unknown Source)
    at java.net.Socket.<init>(Unknown Source)
    at java.net.Socket.<init>(Unknown Source)
    at org.apache.commons.httpclient.protocol.DefaultProtocolSocketFactory.createSocket(DefaultProtocolSocketFactory.java:79)
    at org.apache.commons.httpclient.protocol.DefaultProtocolSocketFactory.createSocket(DefaultProtocolSocketFactory.java:121)
    at org.apache.commons.httpclient.HttpConnection.open(HttpConnection.java:706)
    at org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry(HttpMethodDirector.java:386)
    at org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:170)
    at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:396)
    at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:324)
    at org.apache.solr.client.solrj.impl.CommonsHttpSolrServer.request(CommonsHttpSolrServer.java:422)
    ... 13 more 
```

# asp.net - 没有 MS Office inteop 或任何其他第三方库的 Excel 下载，正在生成的 xls 文件中插入额外的 html 标记

> ID：10361318
> 
> 赞同：0
> 
> 时间：2012-04-28T06:50:34.653
> 
> 标签：asp.net, c#-2.0

嗨，我正在使用 jQuery 和 Microsoft ASP.net 2.0、C# 作为服务器端在 Web 上开发富客户端 UI，我基本上有 2 个问题，列在下面

1.  为此，我正在使用 HTMLTextWriter 和 StringWriter 类库。我在互联网上搜索并从各种教程和/或提示中学到了什么正在传输数据，并且在那部分一切正常，但是在将 html 转换为 excel 电子表格时，它还将下载页面的 html 标记附加到 excel 标记中。
2.  当我在输出数据后调用 Response.Close() 时，出现连接中止错误。

这是代码片段

```
公共 StringWriter getHTMLStream(){

            输出 = 新的 StringWriter();
            htmlWriter = new HtmlTextWriter(输出);
            字符串 html=@"
      表 {mso-displayed-decimal-separator:'\.'; mso-displayed-thousand-separator:'\,';}.xlGeneral {padding-top:1px; 填充右：1px；填充左：1px；mso忽略：填充；颜色：窗口文本；字体大小：10.0pt；字体粗细：400；字体样式：正常；文字装饰：无；字体系列：宋体；mso 通用字体系列：自动；mso字体字符集：0；mso 数字格式：一般；文本对齐：一般；垂直对齐：底部；mso-背景源：自动；mso 模式：自动；空白：nowrap；}“；
            html+=""+this.headerName+"-"+this.vehicleName+"";
            totalCols = (this.reportOrientation == "Horiz")?data.Columns.Count:2;
            if (this.reportOrientation == "Horiz")
            {
                html+="";
                // 添加标题列
                foreach（this.data.Columns 中的 DataColumn colName）
                {
                    html+=""+colName.ColumnName.Trim()+"";
                }
                html+="";

                // 现在添加数据
                foreach（this.data.Rows 中的 DataRow dr）
                {
                    html+="";
                    foreach（dr.ItemArray 中的字符串 colData）
                    {
                        html+=""+colData+"";
                    }
                    html+="";
                }
            }
            别的
            {
                // 获取列
                colsArr = 新字符串[this.data.Columns.Count];
                int colCounter = 0;
                foreach（this.data.Columns 中的 DataColumn colName）
                {
                    colsArr[colCounter] = colName.ColumnName;
                    colCounter++;
                }
                //tableHeads = arrayToString(colsArr);
                // 获取字符串数组中的行数据
                rowArr = 新字符串[this.data.Columns.Count];

                foreach（this.data.Rows 中的 DataRow dr）
                {
                    colCounter = 0;
                    foreach（dr.ItemArray 中的字符串 col）
                    {
                        rowArr[colCounter] = col;
                        colCounter++;
                    }
                }
                //tableHeads = arrayToString(colsArr);
                // 添加 PDF 表格单元格
                for (int i = 0; i "+colsArr[i].Trim()+""+rowArr[i].Trim()+"";
                }

            }
            html+= "";
            htmlWriter.Write(html);
            返回输出；
        }

        私有字符串arrayToString（字符串[]数组）{
            字符串结果 = string.Join(",", 数组);
            结果 = result.Substring(0, result.Length - 1);
            返回结果；
        }
    }

```

这就是我访问它的方式

```
响应。清除（）；
            createHTML speedXLS = new createHTML("车速报告", "Horiz", vehicleName, speedDT);
            Response.ContentType = "应用程序/vnd.xls";
            Response.AddHeader("content-disposition", "attachment;filename=VSpeedReport-" + vehicleName + ".xls");
            Response.Write(speedXLS.getHTMLStream().ToString());
            //Response.Close();

```

这是附加到我的 excel 标记的下载页面标记旁边想要的 xls 标记的内容。如何告诉服务器不要在响应正文中附加页面的标记？ `**`

 ````
 <html xmlns="http://www.w3.org/1999/xhtml">
    <head><title>

    </title></head>
    <body>
        <form name="form1" method="post" action="downloadData.aspx?reportType=speed&amp;value=1&amp;valUnit=Miles&amp;reqType=XLS&amp;selVehicle=GTA02&amp;Email=gps%40gtalimo.com&amp;startDate=2012-4-27+23%3a21%3a00&amp;endDate=2012-4-28+01%3a21%3a00&amp;vehicleName=GTA+07" id="form1">
    <div>
    <input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwULLTE2MTY2ODcyMjlkZKkkaxju0wAdoc1rGUJiLkzjS9eU" />
    </div>

        <div>

        </div>
        </form>
    </body>
    </html> 
```` 

`**` 请提出意见或建议！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T07:10:35.347

生成 html 表并欺骗浏览器在 excel 中显示它并不是将数据导出到 excel 的最佳方法。这是一个黑客而不是解决方案，而且 IMO 什么时候停止工作只是时间问题，可能是在下一个 excel 版本中，或者因为某些病毒/反恶意软件/任何检测到您正在发送带有错误标题的内容，并且 excel 2007/2010 已经警告用户关于那个。

**更新：**在我看来，最好的方法是使用可以生成真正的 excel 文件的 3rd 方 excel 库，然后浏览器将打开 excel，并且内容匹配标题。并且有非常好的开源库，我真的不明白为什么不应该使用它们。

[NPOI](http://npoi.codeplex.com/) (xls) 或/和[EPPlus](http://epplus.codeplex.com/) (xlsx)

因此，如果您仍然想在不使用 CSV 格式的情况下执行此操作，并且第 3 方库使用 CSV 格式，请在此处查看将 DataTable 导出为 CSV 的示例：

[将 DataTable 转换为 CSV 流](https://stackoverflow.com/questions/888181/convert-datatable-to-csv-stream)

替代方法是使用 excel 模式导出到 XML。这是代码：

```
public static MemoryStream DataSetToExcelXml(DataSet ADataset)
{
  MemoryStream result = new MemoryStream();
  XmlDataDocument doc = new XmlDataDocument(ADataset);
  XslCompiledTransform trans = new XslCompiledTransform();
  XmlDocument xmlDoc = new XmlDocument();
  Stream shema = Assembly.GetExecutingAssembly().GetManifestResourceStream("ResPathToExcelSheet.xsl");
  xmlDoc.Load(shema);
  trans.Load(xmlDoc);
  trans.Transform(doc, null, result);
  return result;
} 
```

架构

```
<xsl:stylesheet version="1.0"
    xmlns="urn:schemas-microsoft-com:office:spreadsheet"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
 xmlns:msxsl="urn:schemas-microsoft-com:xslt"
 xmlns:user="urn:my-scripts"
 xmlns:o="urn:schemas-microsoft-com:office:office"
 xmlns:x="urn:schemas-microsoft-com:office:excel"
 xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet" >  
<xsl:template match="/">
  <Workbook xmlns="urn:schemas-microsoft-com:office:spreadsheet"
    xmlns:o="urn:schemas-microsoft-com:office:office"
    xmlns:x="urn:schemas-microsoft-com:office:excel"
    xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet"
    xmlns:html="http://www.w3.org/TR/REC-html40">
    <xsl:apply-templates/>
  </Workbook>
</xsl:template>
<xsl:template match="/*">
  <Worksheet>
  <xsl:attribute name="ss:Name">
  <xsl:value-of select="local-name(/*/*)"/>
  </xsl:attribute>
    <Table x:FullColumns="1" x:FullRows="1">
      <Row>
        <xsl:for-each select="*[position() = 1]/*">
          <Cell><Data ss:Type="String">
          <xsl:value-of select="local-name()"/>
          </Data></Cell>
        </xsl:for-each>
      </Row>
      <xsl:apply-templates/>
    </Table>
  </Worksheet>
</xsl:template>
<xsl:template match="/*/*">
  <Row>
    <xsl:apply-templates/>
  </Row>
</xsl:template>
<xsl:template match="/*/*/*">
  <Cell><Data ss:Type="String">
    <xsl:value-of select="."/>
  </Data></Cell>
</xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T07:14:42.733

1.代替

```
 **strong text** Response.Clear();
createHTML speedXLS = new createHTML("Vehicle Speed Report", "Horiz", vehicleName, speedDT);
Response.ContentType = "application/vnd.xls";
Response.AddHeader("content-disposition", "attachment;filename=VSpeedReport-" + vehicleName + ".xls");
Response.Write(speedXLS.getHTMLStream().ToString()); 
```

采用

```
 **Response.Buffer = true;**

   createHTML speedXLS = new createHTML("Vehicle Speed Report", "Horiz", vehicleName, speedDT);
        Response.ContentType = "application/vnd.xls";
        Response.AddHeader("content-disposition", "attachment;filename=VSpeedReport-" + vehicleName + ".xls");
        Response.Write(speedXLS.getHTMLStream().ToString()); 
```

1.  当您使用流类时，请使用“使用”语句。

# javascript - 访问 CSS 属性值

> ID：10361321
> 
> 赞同：0
> 
> 时间：2012-04-28T06:51:01.467
> 
> 标签：javascript

```
function getSitePallete(Selector) {
    var Selectors = document.styleSheets[8].rules;
    var pallete = new Array();    
    for (var i = 0; i < Selectors.length; i++) {
        for (var j = 0; j < Selectors[i].style.length; j++) {
            if (Selectors[i].style[j] == "color")
                // here i want the value of color property (like if color : #ffffff so i want #ffffff )
        }
    }
} 
```

我想访问颜色属性的值。如何访问它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T07:04:55.477

这个网站（[http://htmlbook.ru/css/color](http://htmlbook.ru/css/color)）说颜色 CSS 属性可以通过以下 DOM 代码访问

```
[window.]document.getElementById("elementID").style.color 
```

我认为您可以根据自己的需要采用它。

# git - 克隆存储库的 git status 显示文件已删除

> ID：10361322
> 
> 赞同：11
> 
> 时间：2012-04-28T06:51:17.243
> 
> 标签：git

我已将 cvs 存储库迁移到 git 存储库，它位于服务器中。在我的本地，我尝试克隆该存储库。它被克隆了。但是当我检查 git status 时，它显示的结果如下所示。

```
$ cd FMS_RE_ENGG/

$ git status

#   deleted:    FMS_RE_ENGG/Gemfile
#   deleted:    FMS_RE_ENGG/Gemfile.lock
#   deleted:    FMS_RE_ENGG/PACKAGING/CONFIG/fms-frontend.ini
#   deleted:    FMS_RE_ENGG/PACKAGING/DEBIAN/postinst
#   deleted:    FMS_RE_ENGG/PACKAGING/DEBIAN/postrm
#   deleted:    FMS_RE_ENGG/PACKAGING/DEBIAN/preinst
#   deleted:    FMS_RE_ENGG/PACKAGING/DEBIAN/prerm
#   deleted:    FMS_RE_ENGG/PACKAGING/DEBIAN/templates 
```

ETC。，

问题是什么？为什么我没有得到源文件？如果我在克隆它之后运行 git checkout FMS_RE_ENGG，那么我就能得到它。为什么它在克隆自身时不提供源文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T10:41:50.980

You have probably used *git fast-import* to fill your repository with the cvs data. This will modify the data structures inside your .git subdirectories but it will not create a working checkout.

So *git status* "thinks" that you have deleted ALL your files and that the next commit will remove them from the repository.

Just do *git reset --hard* to reset your working copy to a clean checkout from your master branch.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-10-11T05:20:12.830

只需尝试以下命令。它对我有用。

```
git checkout -f HEAD 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T17:21:27.457

克隆完成后会显示什么`git branch -a`？问题可能在于`git clone`询问远程它具有哪个分支作为其当前分支并将其反映在克隆的（您的本地）存储库中。

假设您的转换工具搞砸了一些东西，或者远程仓库在某种程度上搞砸了它关于其活动分支的想法。

我们需要您提供更多信息以便做出更好的猜测。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-28T17:14:54.423

如果我理解正确，我假设您正在通过基本克隆命令获取存储库，例如

```
git clone gitRepositoryLink 
```

当你运行时：

```
git checkout FMS_RE_ENGG 
```

这是在您的 GIT 存储库中检出一个不同的分支。如果您的源文件是 FMS_RE_ENGG 分支的一部分，但不是 master 分支，那么当您克隆存储库时，您将看不到源文件，因为您不在 FMS_RE_ENGG 分支上工作。

# php - Ajax 调用在 enter 按键上不起作用，仅适用于点击功能

> ID：10361328
> 
> 赞同：0
> 
> 时间：2012-04-28T06:52:40.677
> 
> 标签：php, forms, function, jquery, keypress

我有一个从 php 文件调用数据的 ajax 方法，我是从一个博客中学到的，现在它适用于提交按钮单击功能的文件，但是当我按下`enter`变量时，地址栏中会显示并且 ajax 进程没有执行，可以任何人请帮我按回车方法....

这是我的代码：-

```
<script type='text/javascript'>//<![CDATA[ 
$(window).load(function(){
$(document).ready(function() {
    $("input[name='search_user_submit']").click(function() {
        var cv = $('#newInput').val();
        var cvtwo = $('input[name="search_option"]:checked').val();
        var data = { "cv" : cv, "cvtwo" : cvtwo }; // sending two variables
        $("#SearchResult").html('<img src="../../involve/images/elements/loading.gif"/>').show();
        var url = "../elements/search-user.php";
        $.post(url, data, function(data) {
            $("#SearchResult").html(data).show();
        });
    });
});
});//]]>  
</script> 
```

我已经通过使用 if 条件和按键事件来尝试它仍然无法正常工作：-

```
if (e.keyCode == 13) { // Do stuff }
else { // My above code }
//In this also it seems that i am doing something wrong. 
```

任何人都可以请赐教哦，如何做到这一点。

我的输入字段是：-

```
<input type="text" name="searchuser_text" id="newInput" maxlength="255" class="inputbox MarginTop10"> 
```

我的提交按钮是：-

```
<input class="Button" name="search_user_submit" type="button" value="Search"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T08:21:46.153

当您键入 enter 时，会执行表单的默认 onSubmit 处理程序。您可以使用提交 jquery 函数来处理输入和单击提交按钮。

```
$("form").submit(function() {
    var cv = $('#newInput').val();
    var cvtwo = $('input[name="search_option"]:checked').val();
    var data = { "cv" : cv, "cvtwo" : cvtwo }; // sending two variables
    $("#SearchResult").html('<img src="../../involve/images/elements/loading.gif"/>').show();
    var url = "../elements/search-user.php";
    $.post(url, data, function(data) {
        $("#SearchResult").html(data).show();
    });
    return false;
}); 
```

在此函数中返回 false 将阻止提交表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T07:05:55.037

您可以尝试使用`event.preventDefault();`输入键。

谢谢。

# ajax - Ruby rails - 文本字段更改事件和 ajax

> ID：10361329
> 
> 赞同：0
> 
> 时间：2012-04-28T06:52:58.957
> 
> 标签：ajax, ruby-on-rails-3

好的..我经常遇到这类问题。我的大部分 html 都是 ajax 渲染的，我使用渲染页面中的字段和值来发出新的 ajax 请求。但似乎没有一个事件发生。需要明白这是为什么。

这是一个带有文本字段的简单表单，我想在更改事件上进行 ajax 调用，以跳过表单/按钮。它不工作。我在这里改变什么？

```
<div><%= form_tag users_search_path, :remote => true, :id => 'search_form' do %>
<%= text_field_tag  :keyword, nil, :maxlength => 11, :size => 20 %># Tried this putting outside of this form, didn't work. 
<%= submit_tag " Search ", :id => "search_button", :onclick => "javascript:user_search()"%>
<% end %></div> 
```

`<%= text_field_tag :keyword, nil, :maxlength => 11, :size => 20 %>`在这个表格之外尝试了这个，没有用。

```
$(function(){
$("#keyword").change(function() {
        alert('ok');
        $.post('/users/search', function(data) {
      $("#search").html(data);
    });
  });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-11T19:00:11.353

因为最后一个 jquery 代码是一个函数，所以在你调用它之前它不会被执行。删除第一行和最后一行，然后它将在页面加载时运行，以便将内部定义的函数附加到您的文本框中。

# graph - 如何从有向无环图中找出可能的最大点？

> ID：10361331
> 
> 赞同：0
> 
> 时间：2012-04-28T06:53:24.960
> 
> 标签：graph

抱歉标题不好。我是图形算法的新手。

我被一个问题困扰了好几天。如果有向无环图的所有节点都被加权，而权重可以是负数，我如何找出权重总和最大的集合？

例如，我们有一个 5 个节点的图 -

*   节点 1：权重 30，有一条指向节点 4 的边
*   节点 2：权重 25，边指向节点 4,5
*   节点 3：权重 -65，没有边缘
*   节点 4：权重 -20，边到节点 5
*   节点 5：权重 2，没有边缘

在找出最大点时，例如，如果选择节点 1，则必须选择节点 4 和节点 5（因为它们与节点 1 直接/间接相邻）。

所以我们可以得到的最大点是 - (30-20+2)+(25)=37

对于节点 1 和后代 4,5，然后对于节点 2（不再考虑节点 4,5）

我希望我把我的问题说清楚了。谁能告诉我如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T07:10:47.827

如果我正确理解了您的问题...您想要的是找到一个节点，该节点使该节点可以达到的值的总和最大化。

这是一些可以为您执行此操作的伪代码

```
def maxVertex(Vertices):
    for vertex in reversed_topological_sorted(Vertices):
         vertex.value = vertex.weight
         if vertex.neighbors:
                vertex.value += sum( other_vertex.value for other_vetrex in vertex.neighbors )

     return max(Vertices,key=lambda vertex: vertex.value) 
```

# objective-c - 如何将类别添加到“隐藏”类

> ID：10361332
> 
> 赞同：2
> 
> 时间：2012-04-28T06:53:51.940
> 
> 标签：objective-c, ios, objective-c-category

有没有办法将类别添加到您无法访问其头文件的类？

出于测试目的，我想向 中添加一个类别`UITableViewCellDeleteConfirmationControl`，但该类（据我所知）是私有框架的一部分。

我怎样才能做到这一点？

* * *

详细说明（根据 mihirios 的要求）：

我正在尝试扩展 Frank 测试框架以模拟点击当您尝试删除`UITableViewCell`. Frank`tap`向`UIControl`. 出于某种原因，Frank 通常点击控件的方式不适用于`UITableViewCellDeleteConfirmationControl`类（哪些子类`UIControl`）。

我已经创建了一个解决方法。`UITableViewCell`我使用以下方法添加了一个类别。

```
- (BOOL)confirmDeletion {
    if (![self showingDeleteConfirmation]) {
        return NO;
    }
    UITableView *tableView = (UITableView *)[self superview];
    id <UITableViewDataSource> dataSource = [tableView dataSource];
    NSIndexPath *indexPath = [tableView indexPathForCell:self];
    [dataSource tableView:tableView
       commitEditingStyle:UITableViewCellEditingStyleDelete
        forRowAtIndexPath:indexPath];
    return YES;
} 
```

这将找到表的数据源并调用其`tableView:commitEditingStyle:forRowAtIndexPath:`方法，（根据文档`UITableView`）当用户点击确认按钮时系统会执行此操作。

这行得通，但我更愿意`UITableViewCellDeleteConfirmationControl`通过向它添加一个方法来使其看起来像一个可点击的按钮`tap`，覆盖弗兰克的默认方法。该`tap`方法将找到包含确认按钮的单元格，然后调用`[cell confirmDeletion]`.

当我尝试为 声明一个类别时`UITableViewCellDeleteConfirmationControl`，编译器抱怨它“无法解析接口 'UITableViewCellDeleteConfirmationControl'”。

当我尝试使用某人使用类转储生成的头文件时，链接器抱怨它找不到符号_OBJC_CLASS_$_UITableViewCellDeleteConfirmationControl。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T07:14:57.617

出于测试目的，您始终可以使用获取类对象`NSClassFromString`，然后使用`class_replaceMethod`运行时方法来执行您需要的任何操作。有关详细信息，请参阅[Objective-C 运行时参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html#//apple_ref/doc/uid/TP40001418)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T07:24:33.387

据我所知，您不能使用类别，但您可以在运行时手动添加方法。

一种可能的方法是，创建一个新类，实现您想要的方法，然后使用适当的 objc 运行时函数将此方法发送到 UITableViewCellDeleteConfirmationControl。有一些事情需要注意，比如存储原始函数以供以后在重载时使用，同样在你的“类别”类中，当你想调用 super 时你必须注意，因为这不起作用，你有改为使用 objc 运行时函数 objc_msgSendSuper。

只要您不需要调用 super 就可以了：

```
#import <objc/runtime.h>
#import <objc/message.h>

void implementInstanceMethods(Class src, Class dest) {
    unsigned int count;
    Method *methods = class_copyMethodList(src, &count);

    for (int i = 0; i < count; ++i) {
        IMP imp = method_getImplementation(methods[i]);
        SEL selector = method_getName(methods[i]);
        NSString *selectorName = NSStringFromSelector(selector);
        const char *types = method_getTypeEncoding(methods[i]);

    class_replaceMethod(dest, selector, imp, types);        
    }
    free(methods);
} 
```

调用该方法的一个好点是在 main.m 中，例如：

```
@autoreleasepool {
        implementInstanceMethods([MyCategory class], NSClassFromString(@"UITableViewCellDeleteConfirmationControl"));
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([YourAppDelegate class]));
} 
```

但我不知道你为什么不只是在控制器类中移动确认处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T07:00:07.677

只要编译器可以（最终）链接到有问题的类，您就可以为它创建一个类别。更重要的问题是如何设计类别，因为您似乎无法访问原始类的源代码。

# cordova - 创建基于 PhoneGap 的项目

> ID：10361336
> 
> 赞同：0
> 
> 时间：2012-04-28T06:54:15.490
> 
> 标签：cordova, sencha-touch, extjs, sencha-touch-2

我刚刚创建了一个基于 Phonegap 的项目，但出现以下错误：

1.)

```
2012-04-28 12:21:25.862 cordovaApp[1215:fb03] Multi-tasking -> Device: YES, App: YES
2012-04-28 12:21:35.028 cordovaApp[1215:fb03] ERROR whitelist rejection: url='http://docs.phonegap.com/en/edge/guide_getting-started_ios_index.md.html#Getting%20Started%20with%20iOS' 
```

2.)

```
 Error: executing module function 'setInfo' in module 'cordova/plugin/ios/device'. Have you included the iOS version of the cordova-1.7.0rc1.js file? 
```

为什么会发生这种情况，我该如何摆脱它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T07:18:53.007

您必须将您的应用程序要访问的网址列入白名单。为此，请打开您的 .plist 文件并在 ExternalHosts 键下添加一个条目。

还可以在以下位置找到解决方案：[使用 iPhone 模拟器的 weinre](https://stackoverflow.com/questions/7260337/weinre-with-iphone-simulator)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T15:55:19.287

例如，我在 html 页面中的脚本标记中有一个错误的引用

```
<script type="text/javascript" charset="utf-8" src="cordova-1.8.0.js"> 
```

我已经更正了 .js 文件的正确版本，它工作正常！

# google-chrome - 如何在铬上安装铬扩展？

> ID：10361337
> 
> 赞同：5
> 
> 时间：2012-04-28T06:54:16.260
> 
> 标签：google-chrome, google-chrome-extension, chromium

某些 chrome 扩展不适用于铬。例如：[http ://code.google.com/chrome/extensions/samples.html#5d81304a17cf7ac2887484f730fbd2b01e51e166](http://code.google.com/chrome/extensions/samples.html#5d81304a17cf7ac2887484f730fbd2b01e51e166)

我怎样才能让它在铬上工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T07:49:17.387

我可以成功加载它（Chromium 18.0.1025.151，Ubuntu 11.10）。
我只遇到了一个问题，当我从字面上将代码拖到[`nano`](http://en.wikipedia.org/wiki/Nano_%28text_editor%29)：一些换行符被截断，导致代码被注释时。检查您是否正确复制粘贴代码。

[![](../Images/409072acd30fc2f46667c6c5cc8d216c.png)](https://i.stack.imgur.com/j6w4T.png)

当扩展加载，但“没有任何反应”时，检查控制台是否有错误。可以按照[以下步骤](https://stackoverflow.com/a/10258029/938089?google-chrome-extension-logging-from-background-js)打开后台页面的控制台。

# c# - 从事件中获取信息的更好形式是什么？

> ID：10361339
> 
> 赞同：1
> 
> 时间：2012-04-28T06:55:07.207
> 
> 标签：c#, mono, gtk#

从事件的“发送者”获取信息的更好形式是什么？要转换为已知发件人的类型，还是直接使用名称？我怀疑铸造会是更好的形式，但如果你知道这个名字，这似乎是一种相当迂回的处理方式。以下是我正在考虑的示例：

```
protected void OnEntry1Changed (object sender, System.EventArgs e) {
            if ((sender as Gtk.Entry).Text != "some specific value" && (sender as Gtk.Entry).Text != "" && anotherEntry.Text !="") {
                //  Do some stuff here...
            } else {
                // Do some other stuff here...
            }
        } 
```

另一个版本是像这样直接访问条目：

```
protected void OnEntry1Changed(object sender, System.EventArgs e) {
    if (Entry1.Text != "some specific value" && Entry1.Text != "" && anotherEntry.Text !="") {
        //Do some stuff here...
    } else {
        // Do some other stuff here...
    }
} 
```

...似乎第二个版本会更直接，但是一个或另一个被认为更“正确的代码形式”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T15:55:18.910

我宁愿做第一名 - `(sender as Gtk.Entry)`。这样，如果您必须在应用程序的其他地方复制该条目的功能，您可以重用信号处理程序。

# python - Python、cx_freeze 和 Windows 控制台

> ID：10361344
> 
> 赞同：3
> 
> 时间：2012-04-28T06:56:07.850
> 
> 标签：python, cx-freeze

我正在使用 cx_freeze 为 Windows 制作可执行文件。

它工作正常，但是当我输入所有变量时，我得到计算出的 V 值，然后控制台应用程序立即关闭。

我需要的是非常微不足道的：在计算最后一个值后将保持控制台打开的命令或函数的名称。

知道的请给个提示。

```
 print "Caculate bullet speed measurement with the use of Ballistic Pendulum. Warning: only numbers are allowed!"
    M = float(raw_input("enter M value: "))
    R = float(raw_input("enter R value: ")) 
    m = float(raw_input("enter m value: ")) 
    l = float(raw_input("enter l value: "))
    g = float(raw_input("enter g value: "))
    s = float(raw_input("enter s value: "))
    t = float(raw_input("enter t value: "))
    n = float(raw_input("enter n value: "))
    pi = 3.14
    #we could use math.py module but a permanent value is fine
    #or use division where one value is float e.g. 22.0/7
    A = ((M * R + m * l) * g * s * t)
    B = (2 * pi * n * m *(l ** 2))
    print "V =", A/B 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T07:18:56.077

结束它

```
raw_input("press enter to close.") 
```

# c# - 编辑一个 List<> 编辑它的克隆

> ID：10361345
> 
> 赞同：0
> 
> 时间：2012-04-28T06:56:13.963
> 
> 标签：c#

我有这个自定义类对象列表：

```
List<URL> URLs = new List<URL>(); 
```

我正在尝试将副本推送到堆栈：

```
Stack<List<URL>> undo = new Stack<List<URL>>();

List<URL> temp = new List<URL>();
temp.AddRange(new List<URL>(URLs));
undo.Push(temp); 
```

现在，每当我从原始（URL）列表中删除一个对象时，堆栈上的那个（临时）一切都很好。但是，当我从原始（URL）对象内的列表中删除列表元素时，相同的元素会在堆栈上的该对象列表的副本中消失。

我从 URL 中删除对象的方式与删除该对象内的列表元素相同。有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T06:57:37.387

那是因为 List 基本上是一个数组，即一个引用类型。他们只会互相参考。

使用扩展方法进行深度复制

```
public static class ExtensionMethod
{  
    public static T DeepClone<T>(this T element)
    { 
        MemoryStream m = new MemoryStream();
        BinaryFormatter b = new BinaryFormatter();
        b.Serialize(m, element);
        m.Position = 0;
        return (T)b.Deserialize(m);
    }
} 
```

并确保你像这样声明你的 URL 类

```
[Serializable]
public class URL
{
   //..... Your Class
} 
```

并称它为

```
temp.AddRange(URLs.DeepClone().ToList()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T07:01:56.800

您需要创建克隆

```
static class Extensions
{
        public static IList<T> Clone<T>(this IList<T> listToClone) where T: ICloneable
        {
                return listToClone.Select(item => (T)item.Clone()).ToList();
        }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T07:02:31.577

列表或堆栈仅保存对其包含的对象的*引用。*您的两个列表都包含对相同对象的引用。因此，如果您更改从一个列表到达的对象，则该对象与从另一个列表到达的对象相同。

正如@simply denis 建议的那样，您可以在创建第二个列表时克隆对象，以便每个列表都有自己的对象副本。

另一种解决方案是使用*不可变*对象。例如`string`，.NET 中的类是不可变的。字符串一旦创建就无法更改。所有字符串操作例程都返回一个新字符串。不可变类型有效地防止了此类问题，因为任何操作都会自动创建一个新实例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-28T07:04:42.773

那是因为您正在制作列表的浅表副本。您会得到两个引用相同`URL`对象的列表。

（请注意，您实际上是在制作两个浅拷贝，其中`new List<URL>(URLs)`制作了一个中间拷贝，您只能从中读取然后丢弃。）

如果您想要一个深层副本，您必须`URL`为该副本创建新实例。我不知道你在`URL`课堂上实现了什么，但基本上：

```
List<URL> temp = new List<URL>(URLs.Select(u => u.Clone())); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-28T07:07:02.100

这是因为*undo中的 URL 对象引用的对象与**URLs*中的那些 URL 对象相同。因此，修改一个会影响另一个。您需要做的是制作 URL 对象的深层副本。如何进行深拷贝实际上取决于您的 URL 类的实现。这是一种通用方法：[如何在 .NET（特别是 C#）中对对象进行深层复制？](https://stackoverflow.com/questions/129389/how-do-you-do-a-deep-copy-an-object-in-net-c-specifically)

但请注意，您可能有更好/更有效的方法来克隆您的`URL`对象。您需要先向我们展示该类的实现。

# macos - ErrorException JMS\SerializerBundle\JMSSerializerBundle

> ID：10361346
> 
> 赞同：4
> 
> 时间：2012-04-28T06:56:15.403
> 
> 标签：macos, symfony, osx-lion

我正在尝试在 osx lion 上为以下项目[连接安装供应商。](https://github.com/dsyph3r/connect)

```
cd /tmp
git clone git://github.com/dsyph3r/connect
cd connect
git submodule update --init

php bin/vendors install 
```

当我运行以下命令时`php bin/vendors install`，我收到以下消息：

```
[ErrorException]

Catchable Fatal Error:
Argument 1 passed to JMS\SerializerBundle\JMSSerializerBundle::__construct()
must implement interface Symfony\Component\HttpKernel\KernelInterface, 
none given, called in /Users/antoniopierro/Sites/connect/app/AppKernel.php on line 21
and defined in /Users/antoniopierro/Sites/connect/vendor/bundles/JMS/SerializerBundle/JMSSerializerBundle.php line 37 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-28T09:31:30.190

您需要将内核传递给包的构造函数：

```
$bundles = array(
    //...
    new JMS\SerializerBundle\JMSSerializerBundle($this),
    //...
); 
```

# c# - 如何使用 WinForm 将图像正确添加到 TabControls 中的选项卡

> ID：10361347
> 
> 赞同：2
> 
> 时间：2012-04-28T06:56:42.437
> 
> 标签：c#, .net, winforms

我想在 TabControl 的选项卡中使用图像而不是文本，所以我这样做了：

*   在 ImageList 中添加图像
*   myTabControl.ImageList 指向这个 ImageList
*   TabPage.ImageIndex 具有该图像的索引

这是结果：

![选项卡中的图像](../Images/1d7795c42c2e770192b7c48bbe8fbc57.png)

如您所见，图像完全模糊。

如果我修改 TabPage.BackgroundImage 以指向此图像，则图像看起来很好，如下所示：

![图像作为 TabPage 中的背景](../Images/62a3eade508f726d4405e052848cfd95.png)

有没有办法让标签中的图像看起来那么好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T07:30:58.663

默认情况下，您的图像列表包含图像 16x16，您应该更改图像的大小。之后，形象将成为常态

**编辑**

要知道图像的大小，你应该打开图像文件的属性，在“附加”选项卡中你可以找到尺寸，这个尺寸必须在你的 Imagelist 属性 ImageSize

# android - 知道小部件是否安装？

> ID：10361355
> 
> 赞同：0
> 
> 时间：2012-04-28T06:58:13.013
> 
> 标签：android, android-widget

我想知道我的小部件是否由用户安装，你知道有什么方法可以找出用户是否安装了我的小部件，我知道没有具体或记录的方法可以做到这一点。

你有什么建议吗？

谢谢

**如果当用户安装我的小部件时，我得到一些代码或任何我会收到通知的地方（如 OnUpDate），我可以将其保存在我的共享首选项中。**

你知道这个代码或方式吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T13:17:59.547

```
ComponentName thisWidget = new ComponentName(getApplicationContext(), MyWidgetProvider.class);
int[] allWidgetIds2 = appWidgetManager.getAppWidgetIds(thisWidget); 
```

allWidgetIds2 数组将包含已添加到主屏幕的相关 Widget 实例

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-28T07:40:30.810

您可以使用`getInstalledProviders`获取所有已安装应用程序 widgets.as 的列表：

```
AppWidgetManager mAppWidgetManager= AppWidgetManager.getInstance(context);
List<AppWidgetProviderInfo> installed = mAppWidgetManager.getInstalledProviders();
//YOUR APP WIDGET INFO HERE
AppWidgetProviderInfo appWidgetInfo = mAppWidgetManager.getAppWidgetInfo(appWidgetId); 
```

# dns - 域名长度受哪个应用程序限制，如果是不同的 DNS 实现，是否可以更改？

> ID：10361358
> 
> 赞同：0
> 
> 时间：2012-04-28T06:58:30.440
> 
> 标签：dns, domain-name

我目前正在实施分散式 DNS，并且想知道域名字符限制是否特定于 DNS 记录的存储

根据[维基百科](http://en.wikipedia.org/wiki/Domain_name)

> 完整的域名总长度不得超过 255 个字符

但是下面它也说

> 在实践中，一些域名注册机构可能有更短的限制。

我也在[这里](https://stackoverflow.com/a/8718510/453438)查看了这个答案，其中提到 -

> 我的理解是 255 个字符的限制是在 IDNA 转换后考虑的。
> 
> **这是因为 DNS 记录有这个字符限制**......

这是真的吗？如果是这样，这是否意味着我的实现可以解析大于 256 个字符的域？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T07:02:59.563

这是您需要的 RFC 文档：http: [//www.faqs.org/rfcs/rfc1035.html](http://www.faqs.org/rfcs/rfc1035.html)

根据这个不同的DNS记录有它自己的限制。

可能您不应该考虑特定的软件或不同的实践，而应该查看适当的文档（rfc 规范）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T21:38:00.203

有两个限制：

*   总长度 255 个字符 - 这是任意的“为了简化实现”（RFC 1035 的第 3.1 节）

*   每个标签 63 个字符 - 这由 6 位长度字段固定

*DNS 的有线格式*没有将名称限制为 255 个字符的内在属性，但所有 DNS 实现都应支持该限制，*仅*此而已。

# php - 为什么 `session_destroy()` 在 PHP 中不起作用？

> ID：10361362
> 
> 赞同：1
> 
> 时间：2012-04-28T06:59:50.647
> 
> 标签：php, session, sessionid

我在 PHP 中的会话有这个问题，我永远无法理解！
我在 PHP 文件中有以下代码：

```
session_start();
$sid = session_id();
session_unset();
session_destroy();
echo $sid; 
```

从逻辑上讲，每次它应该给我不同的会话 ID，因为显然我会打电话`session_destroy()`，但它不会终止会话。它总是给我相同的会话 ID！
我做错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T07:02:38.877

对我来说，只有以下组合才能完全破坏会话：

```
session_destroy();
session_unset();
session_regenerate_id(true); 
```

编辑：你试过这个：

```
<?php
session_start();
$sid = session_id();
echo $sid;
echo "<br />";

//destroy session
session_destroy();
session_unset();

//now start the new session
session_start();
session_regenerate_id(true);
$sid = session_id();
echo $sid;
?> 
```

它工作得很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T07:07:01.683

[seesion_id() 概念](http://theserverpages.com/php/manual/en/function.session-id.php)

参考这个链接。它说**如果指定了 id，它将替换当前会话 id。为此，需要在 session_start() 之前调用 session_id()**。

这里有一个例子说明

从 php 4.3.3 开始，您会在两次启动会话时收到通知。您可以使用 session_id() 来检测会话是否已经启动。在制作脚本之前，您必须知道 session_id() 在不知道会话 ID 时返回 false。所以现在我们可以制作一个脚本来检测会话是否启动，如果没有，它会启动一个会话。

```
This is what you get then:
<?php
if(!session_id()){
 session_start();
}
?> 
```

# java - jasper 报告中的编译错误-错误填充打印

> ID：10361368
> 
> 赞同：1
> 
> 时间：2012-04-28T07:01:03.417
> 
> 标签：java, jasper-reports, ireport

我在填写报告期间收到此错误：

```
Setting net.sf.jasperreports.engine.query.JRJdbcQueryExecuterFactory as Query Executer Factory for language: sql
  Filling report...
  Locale: English (United States)
  Time zone: Default
Error filling print... java.lang.NoClassDefFoundError: Could not initialize class org.codehaus.groovy.runtime.InvokerHelper null 
java.lang.NoClassDefFoundError: Could not initialize class org.codehaus.groovy.runtime.InvokerHelper     
 at org.codehaus.groovy.runtime.ScriptBytecodeAdapter.initMetaClass(ScriptBytecodeAdapter.java:782)      
at null_1335588078591_507644.$getStaticMetaClass(calculator_null_1335588078591_507644)      
at null_1335588078591_507644.<init>(calculator_null_1335588078591_507644:18)      
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)      
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)      
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)      
at java.lang.reflect.Constructor.newInstance(Constructor.java:525)      
at java.lang.Class.newInstance0(Class.java:372)      
at java.lang.Class.newInstance(Class.java:325)      
at net.sf.jasperreports.engine.design.JRAbstractJavaCompiler.loadEvaluator(JRAbstractJavaCompiler.java:98)      
at net.sf.jasperreports.engine.design.JRAbstractCompiler.loadEvaluator(JRAbstractCompiler.java:320)      
at net.sf.jasperreports.engine.JasperCompileManager.loadEvaluator(JasperCompileManager.java:237)      
at net.sf.jasperreports.engine.fill.JRFillDataset.createCalculator(JRFillDataset.java:427)      
at net.sf.jasperreports.engine.fill.JRBaseFiller.<init>(JRBaseFiller.java:363)      
at net.sf.jasperreports.engine.fill.JRVerticalFiller.<init>(JRVerticalFiller.java:77)      
at net.sf.jasperreports.engine.fill.JRVerticalFiller.<init>(JRVerticalFiller.java:87)      
at net.sf.jasperreports.engine.fill.JRVerticalFiller.<init>(JRVerticalFiller.java:57)      
at net.sf.jasperreports.engine.fill.JRFiller.createFiller(JRFiller.java:142)      
at net.sf.jasperreports.engine.fill.JRFiller.fillReport(JRFiller.java:78)      
at net.sf.jasperreports.engine.JasperFillManager.fillReport(JasperFillManager.java:624)      
at net.sf.jasperreports.engine.JasperFillManager.fillReport(JasperFillManager.java:540)      
at com.jaspersoft.ireport.designer.compiler.IReportCompiler.run(IReportCompiler.java:916)      
at org.openide.util.RequestProcessor$Task.run(RequestProcessor.java:1411)      
at org.openide.util.RequestProcessor$Processor.run(RequestProcessor.java:1991)  
Print not filled. Try to use an EmptyDataSource... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T20:36:15.470

正如 Alex K 所指出的，您可以看到这篇文章：

[JasperReports 编译错误](https://stackoverflow.com/questions/8935925/jasperreports-compile-error)

这对我有用。

您还可以将 jar 库添加到 iReport 类路径。这可以通过**Window-> Options -> iReport -> Classpath**选项卡来完成。

将库添加到项目中不会解决此问题。

# c# - 在 C# 委托中元帅 va_list

> ID：10361369
> 
> 赞同：5
> 
> 时间：2012-04-28T07:01:08.987
> 
> 标签：c#, c++, pinvoke, marshalling

我正在尝试从 c# 中完成这项工作：

C头文件：

```
typedef void (LogFunc) (const char *format, va_list args);

bool Init(uint32 version, LogFunc *log) 
```

C#实现：

```
static class NativeMethods
{
    [DllImport("My.dll", SetLastError = true)]
    internal static extern bool Init(uint version, LogFunc log);

    [UnmanagedFunctionPointer(CallingConvention.Cdecl, SetLastError = true)]
    internal delegate void LogFunc(string format, string[] args);
}

class Program
{
    public static void Main(string[] args)
    {
         NativeMethods.Init(5, LogMessage);
         Console.ReadLine();
    }

    private static void LogMessage(string format, string[] args)
    {
         Console.WriteLine("Format: {0}, args: {1}", format, DisplayArgs(args));
    }
} 
```

这里发生的是对`NativeMethods.Init`回调的调用`LogMessage`并将来自非托管代码的数据作为参数传递。这适用于参数是字符串的大多数情况。但是，有一个调用格式为：

*为版本 %d 加载插件 %s。*

并且 args 仅包含一个字符串（插件名称）。它们不包含版本值，这是有道理的，因为我`string[]`在委托声明中使用了。问题是，我应该如何编写委托来获取字符串和 int？

我尝试使用`object[] args`并得到此异常： *在从非托管 VARIANT 转换为托管对象期间检测到无效的 VARIANT。将无效的 VARIANT 传递给 CLR 可能会导致意外异常、损坏或数据丢失。*

编辑：我可以将委托签名更改为：

```
internal delegate void LogFunc(string format, IntPtr args); 
```

我可以解析格式并找出期望的参数数量和类型。例如，*对于版本 %d 的已加载插件 %s。*我希望有一个字符串和一个整数。有没有办法从 IntPtr 中取出这两个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T07:37:02.733

以防万一它对某人有所帮助，这是一个整理论点的解决方案。委托被声明为：

```
[UnmanagedFunctionPointer(CallingConvention.Cdecl, SetLastError = true)] // Cdecl is a must
internal delegate void LogFunc(string format, IntPtr argsAddress); 
```

这`argsAddress`是数组开始的非托管内存地址（我认为）。`format`给出数组的大小。知道了这一点，我可以创建托管数组并填充它。伪代码：

```
size <- get size from format
if size = 0 then return

array <- new IntPtr[size]
Marshal.Copy(argsAddress, array, 0, size);
args <- new string[size]

for i = 0 to size-1 do
   placeholder <- get the i-th placeholder from format // e.g. "%s"
   switch (placeholder)
       case "%s": args[i] <- Marshal.PtrToStringAnsi(array[i])
       case "%d": args[i] <- array[i].ToString() // i can't explain why the array contains the value, but it does
       default: throw exception("todo: handle {placeholder}") 
```

说实话，我不确定这是如何工作的。它似乎得到了正确的数据。我并没有声称它是正确的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-12-03T00:24:35.820

另一种方法是将 va_list 传递回本机代码，例如在 .net 中调用 vprintf。我有同样的问题，我想要它跨平台。所以我写了一个示例项目来演示它如何在多个平台上工作。

见[https://github.com/jeremyVignelles/va-list-interop-demo](https://github.com/jeremyVignelles/va-list-interop-demo)

基本思想是：

你声明你的回调委托：

```
[UnmanagedFunctionPointer(CallingConvention.Cdecl)]
internal delegate void LogFunc(string format, IntPtr args); 
```

你传递你的回调，就像你做的那样：

```
NativeMethods.Init(5, LogMessage); 
```

在回调中，您处理不同平台的特定情况。您需要了解它在每个平台上的工作原理。根据我的测试和理解，您可以将 IntPtr 按原样传递给 Windows（x86、x64）和 Linux x86 上的 vprintf* 系列函数，但在 Linux x64 上，您需要复制一个结构才能使其工作。

有关更多说明，请参阅我的演示。

编辑：我们不久前在 .net 运行时的存储库上发布了一个问题，您可以在此处查看[https://github.com/dotnet/runtime/issues/9316](https://github.com/dotnet/runtime/issues/9316)。不幸的是，它没有走多远，因为我们缺乏正式的提案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-16T12:59:44.737

.NET 可以（在某种程度上）在`va_list`和之间编组`ArgIterator`。你可以试试这个：

```
[UnmanagedFunctionPointer(CallingConvention.Cdecl, SetLastError = true)]
internal delegate void LogFunc(string format, ArgIterator args); 
```

我不确定如何传递参数（可能是作为指针的字符串）。你可能有一些运气[`ArgIterator.GetNextArgType`](https://msdn.microsoft.com/library/system.argiterator.getnextargtype(v=vs.110).aspx)。最终，您可能必须解析格式字符串中的占位符以获取参数类型。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-28T07:14:15.403

我知道 C# 中还有一个“__arglist”关键字可用：

*   [http://www.dotnetinterop.com/faq/?q=Vararg](http://www.dotnetinterop.com/faq/?q=Vararg)

*   [http://bartdesmet.net/blogs/bart/archive/2006/09/28/4473.aspx](http://bartdesmet.net/blogs/bart/archive/2006/09/28/4473.aspx)

# android - Android背景图像出现在Eclipse中但不是模拟器

> ID：10361370
> 
> 赞同：0
> 
> 时间：2012-04-28T07:01:25.990
> 
> 标签：android, background-image

我从我的应用程序创建了一个背景图像，并将图像的副本添加到每个可绘制文件夹（低、中、高分辨率），然后在 main.xml 中定义代码如下

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <RelativeLayout
        android:id="@+id/relativeLayout1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0.57" 
        android:background="@drawable/scrollviewtexture">

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_centerHorizontal="true"
            android:layout_marginTop="90dp"
            android:text="Memorable"
            android:textAppearance="?android:attr/textAppearanceMedium" android:typeface="sans"/>

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/textView1"
            android:layout_centerHorizontal="true"
            android:text="(Swipe To Generate Password)"
            android:textAppearance="?android:attr/textAppearanceSmall" android:textSize="5pt"/>

    </RelativeLayout>

</LinearLayout> 
```

在Eclipse中它显示背景图像没有问题，但是当我在模拟器中运行时不显示。它哪里出错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T07:29:21.633

关于该问题的另一种选择是，您以 Android 操作系统将其屏幕确定为`xhdpi`. 如果图像被放置在`drawable`资源文件夹中，那么 Android 将尝试重新缩放它以适应不同的分辨率。但是，如果图像仅出现在某些分辨率文件夹（谎言`drawable-ldpi`等）中，则图像将仅以该分辨率提供。

请创建文件夹`drawable-xhdpi`并将图像也放在那里，或者创建文件夹`drawable`并将图像放在那里。它将用于备份。

请参阅有关图像文件夹的[文档。](http://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T07:21:02.433

您收到任何错误消息吗？

您是否将 AVD 设置为实际使用您保存在 drawble 文件夹中的图像文件的适当设置？

也尝试清理项目并再次运行。Eclipse 不会在不明确清理整个项目的情况下定期更新这些文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T07:41:20.353

我尝试了它工作正常的布局。您创建一个名为`drawable`类似于的文件夹`drawable-hdpi`。将您的图像放入 `drawable`文件夹中。它工作正常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-02T14:53:01.553

有同样的问题..背景在预览中看起来不错，但在运行应用程序时它没有显示出来。一旦我使用较低的分辨率图像就可以工作。

[http://developer.android.com/training/basics/supporting-devices/screens.html](http://developer.android.com/training/basics/supporting-devices/screens.html) 为同一图像创建具有不同分辨率的不同文件夹可以让您的应用程序选择最适合其运行的设备。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-06-14T07:53:07.780

我遇到了这个问题，因为我在我的 xml drawable中使用了一种颜色`?attr`。将其更改为我在我的问题`colorControlActivated`中定义的十六进制代码（相同颜色） 。`@colors file`

# php - Apache突然不解析php

> ID：10361374
> 
> 赞同：1
> 
> 时间：2012-04-28T07:02:08.627
> 
> 标签：php, apache

所以我的服务器突然停止解析 PHP（将原始 php 发送到客户端）。我不确定它是什么时候发生的，但我今天才注意到。我在搞乱一些 mod_rewrite 的东西，但我把它放回去了，它没有改变。除此之外，我没有改变任何东西（据我所知）。想法？顺便说一句，这是一个 Ubuntu 11.10 服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T07:32:10.340

几件事可以尝试...

第一的：

```
 apachectl -t -D DUMP_MODULES | grep php 
```

你应该得到类似的东西：

```
 php5_module (shared) 
```

至少。

其次......你如何重新启动apache？你确定它会被杀死？在此之前，我使用了一个 apache init.d 脚本，它实际上会运行一个`apachectl configtest`以确保它在停止和重新启动之前没有错误。所以，也许你需要停下来，确保它停止，然后重新开始。

此外，在您的配置中，请确保您具有以下内容：

```
<IfModule php5_module>
    AddType application/x-httpd-php .php
</IfModule> 
```

您不一定需要该`<IfModule>`指令，但不会受到伤害。

你运行的是什么版本的apache？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T07:05:42.853

删除 Rewrite 设置可能是您返回错误。

并重新启动 Apache 服务器。希望这能解决问题。

可以参考

[http://www.matthewwittering.co.uk/blog/ubuntu-tips/apache-not-running-php-files.htm](http://www.matthewwittering.co.uk/blog/ubuntu-tips/apache-not-running-php-files.htm)

[https://askubuntu.com/questions/59272/php-not-working-in-apache2-after-system-upgrade](https://askubuntu.com/questions/59272/php-not-working-in-apache2-after-system-upgrade)

```
<IfModule mod_php5.c>
    <FilesMatch "\.ph(p3?|tml)$">
        SetHandler application/x-httpd-php
    </FilesMatch>
    <FilesMatch "\.phps$">
        SetHandler application/x-httpd-php-source
    </FilesMatch>
    # To re-enable php in user directories comment the following lines
    # (from <IfModule ...> to </IfModule>.) Do NOT set it to On as it
    # prevents .htaccess files from disabling it.
    <IfModule mod_userdir.c>
        <Directory /home/*/public_html>
            php_admin_value engine Off
        </Directory>
    </IfModule>
</IfModule> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T07:09:00.700

查看：

*   PHP 文件设置了可执行位
*   将“index.php”设置为您的 Web 根目录中的默认索引文件之一
*   该 php 模块由 apache 加载（请参阅 apache 配置文件，可能在附近启用 mod_rewrite 模块）

# html - asp.net mvc中的textarea innerHtml输出？

> ID：10361378
> 
> 赞同：0
> 
> 时间：2012-04-28T07:02:43.503
> 
> 标签：html, asp.net-mvc, textarea

这是我的文本区域：

```
<div>@Html.TextAreaFor(m => m.Article.ArticleContent, new { @class = "my_textarea", id = "textareaInput" }) 
```

和脚本：

```
<script type="text/javascript">
    $(document).ready(function () {
        $('#textareaInput').click(function () {
            var htmlStr = $('#textareaInput').val();
            $('#textareaInput').val($('<div/>').text(htmlStr).html());
        });
    });
</script> 
```

当我写`<p>some code</p>`输出是：`&lt;p&gt;some code&lt;/p&gt;` 。但我希望：`some code`。

我该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T16:33:51.093

如果您打算清除标签，请尝试`$('<div/>').html(htmlStr).text()`：

```
 $(document).ready(function () {

        $('#textareaInput').change(function () {

            var htmlStr = $('#textareaInput').val();
            $('#textareaInput').val( $.trim( $('<div/>').html(htmlStr).text() ) );

        });
    }); 
```

# jquery - 无法让我的 jquery formvalidator 工作

> ID：10361384
> 
> 赞同：0
> 
> 时间：2012-04-28T07:04:03.050
> 
> 标签：jquery

刚开始玩 jquery，但我无法得到一个简单的验证来工作，呵呵。

Validator.js -

```
 $(document).ready(function(){

    var form = $("#contactForm");
    var name = $("#cfvname");
    var email = $("#cfvemail");
    var msg = $("#cfvmessage");

    name.blur(validateName);
    email.blur(validateEmail);

    form.submit(function(){
        if(validateName() & validateEmail() & validateMsg()){
            return true;
        }
        else{
            return false;
        }
    });

    function validateEmail(){
        var a = $("email").val();
        var filter = /^[a-zA-Z0-9]+[a-zA-Z0-9_.-]+[a-zA-Z0-9_-]+@[a-zA-Z0-9]+[a-zA-Z0-9.-]+[a-zA-Z0-9­]+.[a-z]{2,4}$/;

        if(filter.test(a){
            email.removeClass("error");
            return true;

        } 
        else{
            email.addClass("error");
            return false;
        }
    }

    function validateName(){
        if(name.val().length < 5){
            name.addClass("error");
            return false;       
    } 
        else{
            name.removeClass("error");
            return true;
    }

    function validateMsg(){
        if(msg.val().length < 50){  
            msg.addClass("error");
            return false;
        }
        else{
            msg.removeClass("error");
            return true;
        }
    }
}); 
```

HTML -

```
<form id="contactForm" method="post" action="">
    <div>   
        <label for="dwc_name">Name</label>
        <br />
        <input type="text" id="cfvname" name="dwc_name" />
    </div>
    <div>       
        <label for="dwc_email">Email</label>
        <br />
        <input type="text" id="cfvemail" name="email" />
    </div>
    <div>
        <label for="dwc_message">Message</label>
        <br />
        <input type="textarea" id="cfvmessage" name="dwc_message" />
    </div>
    <div>
        <br />
        <input type="submit" id="send" value="Send" name="dwc_submit" />
    </div>
</form> 
```

如果有意义的话，我只是想验证字符的名称和消息以及正确的电子邮件的电子邮件。英语不是我最擅长的语言。

我从同一目录运行所有文件。并且它们被正确地包括在内，因为我让其他东西工作了*哇*。

无论如何，任何帮助都是值得的。

再一次，对不起烦人的英语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T08:11:26.473

这条线是错误的

```
var a = $("email").val(); 
```

而不是它，你需要使用

```
var a = email.val(); 
```

# google-docs-api - Google Drive API 是否支持上传内容范围？

> ID：10361393
> 
> 赞同：5
> 
> 时间：2012-04-28T07:05:28.763
> 
> 标签：google-docs-api, google-drive-api

与此问题类似：[Google Drive API 如何支持 Content-Range 下载请求？](https://stackoverflow.com/questions/10303126/how-does-google-drive-api-support-content-range-for-download-requests)

但对于**上传**。如果您想更新现有文件中的某些字节，Drive/Docs API 是否允许您设置范围？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T16:12:22.953

这取决于你想要做什么。

您不能以随机访问方式将几个字节上传到现有文件。但是，该 API 确实支持[可恢复上传](https://developers.google.com/gdata/docs/resumable_upload)协议，以便您可以分块上传大文件。这是每个块的容错，如果出现故障，可以出于任何原因重新启动上传。

# matlab - 如何让matlab检测不兼容的类型分配？

> ID：10361398
> 
> 赞同：0
> 
> 时间：2012-04-28T07:05:36.613
> 
> 标签：matlab, type-conversion, variable-assignment

嗨，matlab 有一个大问题。我有一个函数，它有时会返回控制 ascii 字符。我如何检查这些控件 ascii 的存在？

我的代码看起来像这样

```
d = out.autoc 
```

d 有时接收控制 ascii 字符而不是实际的双精度值。有人知道如何捕捉这种不兼容的任务吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T08:34:44.087

如果要检查的值`d`是双精度，而不是字符串。你可以这样检查：

```
if ~isnumeric(d) || ~isdouble(d)
    fprintf('d is not of class double\n');
end 
```

但是，如果您想将 to 的值分配`out.autoc`给`d`only if`out.autoc`是 double，您可以这样做：

```
if isnumeric(out.autoc) && isequal(class(out.autoc), 'double')
    d = out.autoc;
else
    fprintf('out.autoc is not of class double, no assignment made.\n');
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T08:18:22.057

我认为这应该可行，但您可能需要仔细检查要排除的 ASCII 代码。

```
%here I load Ctrl-C
s = sprintf('%s', 3);
code = bin2dec(dec2bin(s,8));
if code < 32 
  fprintf('ignore');
else
  fprintf('do somsething');
end 
```

# ruby - 从无操作的集合中删除修改的对象？

> ID：10361400
> 
> 赞同：4
> 
> 时间：2012-04-28T07:05:41.693
> 
> 标签：ruby, set

请参阅下面的示例

```
require "set"
s = [[1, 2], [3, 4]].to_set # s = {[1, 2], [3, 4]}
m = s.max_by {|a| a[0]} # m = [3, 4]
m[0] = 9 # m = [9, 4], s = {[1, 2], [9, 4]}
s.delete(m) # s = {[1, 2], [9, 4]} ????? 
```

这与数组的行为不同。（如果我们删除`.to_set`，我们会得到`s = [[1, 2]]`预期的结果。）这是一个错误吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-28T07:34:36.453

是的，这是一个错误，或者至少我称之为错误。有人会称之为“一个意外泄露给外界的实现细节”，但这只是花哨的城市男孩对*bug*的谈话。

问题有两个主要原因：

1.  您在 Set 不知情的情况下修改 Set 的元素。
2.  标准的 Ruby [Set](http://ruby-doc.org/stdlib/libdoc/set/rdoc/Set.html)实现为 Hash。

结果是您在 Hash 不知道的情况下修改了内部 Hash 的键，这使可怜的 Hash 变得不知道它有什么键。Hash 类有一个[`rehash`方法](http://ruby-doc.org/core/Hash.html#method-i-rehash)：

> **重新散列→hsh**
> 
> 根据每个键的当前哈希值重建哈希。如果键对象的值在插入后发生了变化，则此方法将重新索引*hsh*。
> 
> ```
> a = [ "a", "b" ]
> c = [ "c", "d" ]
> h = { a => 100, c => 300 }
> h[a]       #=> 100
> a[0] = "z"
> h[a]       #=> nil
> h.rehash   #=> {["z", "b"]=>100, ["c", "d"]=>300}
> h[a]       #=> 100 
> ```

`rehash`请注意文档中包含的示例中的有趣行为。`k.hash`哈希使用key 的值来跟踪事物`k`。如果你有一个数组作为键并且你改变了数组，你也可以改变数组的`hash`值；结果是哈希仍然将该数组作为键，但哈希将无法找到该数组作为键，因为它将在桶中查找新`hash`值，但该数组将在桶中旧`hash`值。但是，如果你`rehash`是 Hash，它会突然再次找到它的所有密钥，并且衰老消失了。非数组键也会出现类似的问题：您只需更改键，使其`hash`值更改并且包含该键的哈希会变得混乱并四处游荡，直到您丢失为止`rehash`。

[Set 类](http://ruby-doc.org/stdlib/libdoc/set/rdoc/Set.html)在内部使用 Hash 来存储其成员，并且成员用作散列的键。因此，如果您更改成员，则 Set 将变得混乱。如果 Set 有一个`rehash`方法，那么您可以通过将 Set 倒置头部来解决问题，以使其具有`rehash`某种意义；唉，Set中没有这样的方法。但是，您可以修改自己的猴子补丁：

```
class Set
  def rehash
    @hash.rehash
  end
end 
```

然后您可以更改键，调用`rehash`Set，您的`delete`（以及其他各种方法，例如`member?`）将正常工作。

# php - smarty - 如何输出变量“{$myvar@display}”

> ID：10361409
> 
> 赞同：1
> 
> 时间：2012-04-28T07:07:25.147
> 
> 标签：php, smarty3

我似乎无法找到一种方法来逃避 smarty 变量输出块中的“@”符号。

这是我的设置：

```
$data = array("myvar@display"=>4534534);
$smarty->assign($data); 
```

[在此处分配 doco](http://www.smarty.net/docsv2/en/api.assign)

在我的模板文件中：

```
<body>
 {$myvar@display}
</body> 
```

**输出：**

```
Message: Undefined property: Smarty_Variable::$display 
```

任何想法如何在不更改“@”符号的情况下显示它（我无法修改它，因为它是整个应用程序中使用的约定，我无法控制它）

运行 LAMP 5.2.17、Smarty 3

* * *

PS我试过这个没有成功......

```
{assign var=jason value="$myvar@display"}{eval var=$jason} 
```

*输出*

```
4534534@display 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T08:32:48.783

我看到 smarty 3（禁用标签 {php}）的唯一方法是分配一个新变量。

如果您可以访问 php 代码中的某处，则可以输入：

```
$smarty->assign('at','@'); 
```

并在 tpl 中获取 var 名称：

```
{$myvar{$at}display} 
```

我认为这比重新制作复杂变量名背后的逻辑更简单。

或者，您可以尝试启用标签 {php} 并获取私有 smarty 数组的索引。

编辑

这对我有用

```
{assign var=foo value='myvar@display'}
{${$foo}} 
```

# c++ - 删除/修改 ACL 中的继承 ACE (Windows)

> ID：10361410
> 
> 赞同：4
> 
> 时间：2012-04-28T07:07:28.620
> 
> 标签：c++, windows, acl

我正在尝试修改目录（及其子目录）上的现有 ACL，以删除内置用户组的写访问权限。该目录从其父目录继承此特定权限。我尝试使用 AtlSetDacl() 设置新的 ACL，但这并没有清除继承的写权限。分段：

```
ATL::CDacl dacl;
ATL::AtlGetDacl(directoryName.c_str(), SE_FILE_OBJECT, &dacl);
UINT aceCount = dacl.GetAceCount();
ATL::CDacl newDacl;
for (UINT i = 0; i < aceCount; ++i)
{
   ATL::CSid sid;
   ACCESS_MASK mask = 0;
   BYTE flags = 0;
   dacl.GetAclEntry(i,
                    &sid,
                    &mask,
                    (BYTE*) 0,
                    &flags);
   if (sid != Sids::Users())
       newDacl.AddAllowedAce(sid, mask, flags);
}
newDacl.AddAllowedAce(Sids::Users(),FILE_LIST_DIRECTORY | FILE_READ_EA | FILE_EXECUTE | FILE_READ_ATTRIBUTES, CONTAINER_INHERIT_ACE | OBJECT_INHERIT_ACE);
AtlSetDacl(directoryName.c_str(), SE_FILE_OBJECT, newDacl); 
```

我还尝试过 SetNamedSecurityInfo() 和相关 API 来擦除现有 ACL 并创建一个新 ACL，但这里也没有运气。看起来这应该不是那么难。使用 cacls.exe 这是小菜一碟（不幸的是，这不是我的选择）。关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-29T21:54:08.310

要删除继承的 ACE，请调用[SetNamedSecurityInfo](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379579%28v=vs.85%29.aspx)并传递`DACL_SECURITY_INFORMATION | PROTECTED_DACL_SECURITY_INFORMATION`SecurityInfo 参数。

该`PROTECTED_DACL_SECURITY_INFORMATION`标志防止来自父级的可继承 ACE 添加到您指定的 ACL。

如果您不需要复制其他继承的权限，而只需指定要使用的特定 ACL，那会更简单。如果您确实需要复制其他继承的权限，则需要在现有代码中保留 read-compare-add 循环，但您还应该清除 INHERITED_ACE 标志，因为这些现在是显式权限。

# string - 使用 XSL 从属性值中删除星号和单引号

> ID：10361414
> 
> 赞同：1
> 
> 时间：2012-04-28T07:08:08.103
> 
> 标签：string, xslt

我有这个 XML 片段：

```
<svrl:successful-report test="."
location="/*[local-name()='ClinicalDocument']/*[local-name()='component']/*[local-name()='structuredBody']/*[local-name()='component'][1]/*[local-name()='section']"> 
```

我想获取值`@location`并删除特殊字符`" *[local-name()=' "`和`" '] "`. 换句话说，我希望输出是

```
/ClinicalDocument/component/structuredBody/component[1]/section 
```

我目前正在使用这个字符串替换模板：

```
<xsl:template name="string-replace-all">
<xsl:param name="text" />
<xsl:param name="replace" />
<xsl:param name="by" />
<xsl:choose>
  <xsl:when test="contains($text, $replace)">
    <xsl:value-of select="substring-before($text,$replace)" />
    <xsl:value-of select="$by" />
    <xsl:call-template name="string-replace-all">
      <xsl:with-param name="text"
      select="substring-after($text,$replace)" />
      <xsl:with-param name="replace" select="$replace" />
      <xsl:with-param name="by" select="$by" />
    </xsl:call-template>
  </xsl:when>
  <xsl:otherwise>
    <xsl:value-of select="$text" />
  </xsl:otherwise>
</xsl:choose>
</xsl:template> 
```

并像这样应用模板

```
 <xsl:call-template name="string-replace-all">
                <xsl:with-param name="text" select="@location"/>
                 <xsl:with-param name="replace" select="'[local-name()='"/>
                 <xsl:with-param name="by" select="''"/>         
            </xsl:call-template> 
```

这只给出了这个结果：

```
/*'ClinicalDocument']/*'component']/*'structuredBody']/*'component'][1]/*'section'] 
```

我怎样才能得到我想要的输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T08:04:53.810

您需要在这里进行两次“查找和替换”。首先，您需要删除所有前缀***[local-name()='**，然后您需要删除**']的后缀**

您可以通过将第一个**调用模板**的结果作为参数传递给第二个**调用模板来做到这一点**

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:svrl="my:my">
   <xsl:template match="svrl:successful-report">
      <xsl:call-template name="string-replace-all">
         <xsl:with-param name="text">
            <xsl:call-template name="string-replace-all">
               <xsl:with-param name="text" select="@location"/>
               <xsl:with-param name="replace" select="&quot;*[local-name()='&quot;"/>
               <xsl:with-param name="by" select="''"/>
            </xsl:call-template>
         </xsl:with-param>
         <xsl:with-param name="replace" select="&quot;']&quot;"/>
         <xsl:with-param name="by" select="''"/>
      </xsl:call-template>
   </xsl:template>

   <xsl:template name="string-replace-all">
      <xsl:param name="text"/>
      <xsl:param name="replace"/>
      <xsl:param name="by"/>
      <xsl:choose>
         <xsl:when test="contains($text, $replace)">
            <xsl:value-of select="substring-before($text,$replace)"/>
            <xsl:value-of select="$by"/>
            <xsl:call-template name="string-replace-all">
               <xsl:with-param name="text" select="substring-after($text,$replace)"/>
               <xsl:with-param name="replace" select="$replace"/>
               <xsl:with-param name="by" select="$by"/>
            </xsl:call-template>
         </xsl:when>
         <xsl:otherwise>
            <xsl:value-of select="$text"/>
         </xsl:otherwise>
      </xsl:choose>
   </xsl:template>
</xsl:stylesheet> 
```

应用于以下 XML 时

```
<test xmlns:svrl="my:my">
   <svrl:successful-report test="." location="/*[local-name()='ClinicalDocument']/*[local-name()='component']/*[local-name()='structuredBody']/*[local-name()='component'][1]/*[local-name()='section']"/>
</test> 
```

以下是输出

```
/ClinicalDocument/component/structuredBody/component[1]/section 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T14:40:24.247

**这个问题的另一个答案是一个很好的答案，但是像这样的源 XML 文档存在问题**：

```
<test xmlns:svrl="my:my">
 <svrl:successful-report test="." location=
 "/*[local-name()='ClinicalDocument']/*[local-name()='component'][.='abc']"/>
</test> 
```

应用于本文档时产生的结果是：

```
 /ClinicalDocument/component[.='abc 
```

但正确的结果是：

```
 /ClinicalDocument/component[.='abc'] 
```

**这种转换与上述 XML 文档没有问题**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="@location">
  <xsl:attribute name="location">
    <xsl:call-template name="makeExplicit">
     <xsl:with-param name="pText" select="substring(.,2)"/>
    </xsl:call-template>
  </xsl:attribute>
 </xsl:template>

 <xsl:template name="makeExplicit">
  <xsl:param name="pText" select="."/>
  <xsl:if test="$pText">
   <xsl:variable name="vStep" select="substring-before(concat($pText, '/'), '/')"/>
   <xsl:call-template name="processStep">
     <xsl:with-param name="pStep" select="$vStep"/>
   </xsl:call-template>
   <xsl:call-template name="makeExplicit">
     <xsl:with-param name="pText" select="substring-after($pText, '/')"/>
   </xsl:call-template>
  </xsl:if>
 </xsl:template>

 <xsl:template name="processStep">
  <xsl:param name="pStep"/>
  <xsl:text>/</xsl:text>
  <xsl:value-of select="substring-before(concat($pStep, '*['), '*[')"/>

  <xsl:variable name="vPred" select="substring-after($pStep, '*[local-name()=')"/>
  <xsl:value-of select="substring-before(substring($vPred, 2), &quot;'&quot;)"/>
  <xsl:value-of select="substring-after($vPred, ']')"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于上述文件时，会产生正确的、想要的结果**：

```
<test xmlns:svrl="my:my">
   <svrl:successful-report test="." 
      location="/ClinicalDocument/component[.='abc']"/>
</test> 
```

# multithreading - 是否可以允许同一个空中应用程序的多个实例同时运行？

> ID：10361416
> 
> 赞同：0
> 
> 时间：2012-04-28T07:08:15.673
> 
> 标签：multithreading, flash, air

实际上我需要的是多线程，但似乎我不能只使用应用程序的一个实例进行多线程。但似乎 adobe 也不允许“多处理”？

有没有办法绕过这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T10:23:19.237

无意间发现了一个转转：

...应用程序 ID 以纯文本形式存储，没有打包或任何其他阻止更改它的方式。所以我可以只拥有几个具有不同 ID 的程序副本。

# ios - ASIHTTPRequest 的包装器

> ID：10361419
> 
> 赞同：0
> 
> 时间：2012-04-28T07:08:44.113
> 
> 标签：ios, cocoa-touch, asihttprequest

我正在使用 ASIHTTPRequest 框架在我的 iOS 应用程序中进行网络调用。但我不想在我的应用程序的所有控制器中直接使用它。所以我想围绕 ASIHTTPRequest 写一个层。我的代码使用这一层来使用 ASIHTTPRequest。好处是将来我应该能够用其他框架替换这个框架，我的代码将不会改变，只是层会改变。我想知道这样做的策略应该是什么。我应该从 ASIHTTPRequest 类继承我的类，还是实现我自己的类。我应该考虑实施什么方法。

目前我正在像这样实现它。我的包装是

```
MyRequestHandler.h : NSObject       
@property ASIHTTPRequest *asiHttpReq;    

-(void) sendAsyncGetRequest
{
    self.asiRequest = [ASIHTTPRequest requestWithURL:self.url];
    if(self.tag != 0){
        self.asiRequest.tag = self.tag;
    }
    [self.asiRequest setDelegate:self];
    [self.asiRequest startAsynchronous];        
}

- (void)requestFinished:(ASIHTTPRequest *)request{
     MyResponseObj *respone = <From request obj>
     if([delegate respondsToSelector:@selector(requestFinished:)]){
            [delegate performSelector:@selector(requestFinished:) withObject:response];
        }
 } 
```

在我的视图控制器中，我会这样做：

```
MyViewController.h : UIViewContoller
@property MyRequestHandler *reqHandler;

-(void) fireRequest
{
NSString* requestUrl = <create URL>;
if(requestUrl){

    // [self showLoadingIndicatorView];

    // Proceed for request.
    NSURL *url = [NSURL URLWithString:requestUrl];
    reqHandler = [MyRequestHandler requestWithURL:url];
    reqHandler.tag = 1000;
    [reqHandler setDelegate:self];
    [reqHandler sendAsyncGetRequest];
}
}

- (void)requestFinished:(MyResponse*) responseData{
        // Do Your parsing n all here.
}

- (void)requestFailed:(MyResponse*) responseData{
        // Handle the error here.
} 
```

这是正确的方法吗。这里的问题是我在视图控制器中创建了 myrequesthandler 的属性，我一次只能发出一个请求，并且失去了 ASIHTTPRequest 同时发出多个请求的能力。

你能建议我如何解决这样的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T08:16:24.690

这就是我正在使用的：

```
#import "ASIFormDataRequest.h"

@interface RequestPerformer : NSObject {
    id localCopy; // to avoid exec_bad_access with arc
    ASIHTTPRequest *getRequest;
    ASIFormDataRequest *postRequest;
}

@property (nonatomic, retain) id delegate;
@property (nonatomic, readwrite) SEL callback;
@property (nonatomic, readwrite) SEL errorCallback;

- (void)performGetRequestWithString:(NSString *)string stringDictionary:(NSDictionary *)stringDictionary delegate:(id)requestDelegate requestSelector:(SEL)requestSelector errorSelector:(SEL)errorSelector;
- (void)performPostRequestWithString:(NSString *)string stringDictionary:(NSDictionary *)stringDictionary dataDictionary:(NSDictionary *)dataDictionary delegate:(id)requestDelegate requestSelector:(SEL)requestSelector errorSelector:(SEL)errorSelector;

@end 
```

//

```
#import "RequestPerformer.h"
#import "ASIHTTPRequest.h"
#import "ASIFormDataRequest.h"

@implementation RequestPerformer

@synthesize delegate;
@synthesize callback, errorCallback;

- (void)performGetRequestWithString:(NSString *)string stringDictionary:(NSDictionary *)stringDictionary delegate:(id)requestDelegate requestSelector:(SEL)requestSelector errorSelector:(SEL)errorSelector {

    localCopy = self;

    self.delegate = requestDelegate;
    self.callback = requestSelector;
    self.errorCallback = errorSelector;

    NSMutableString *requestStringData = [[NSMutableString alloc] init];
    if (stringDictionary)
        for (NSString *key in [stringDictionary allKeys])
            [requestStringData appendFormat:@"%@=%@&", key, [stringDictionary objectForKey:key]];
    NSString *resultString = [requestStringData substringToIndex:[requestStringData length]-1];

    getRequest = [[ASIFormDataRequest alloc] initWithURL:[NSURL URLWithString:[NSString stringWithFormat:@"%@?%@", string, [resultString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]]]];
    [getRequest setDelegate:self];
    [getRequest setRequestMethod:@"GET"];

    //NSLog(@"request url = %@", [getRequest.url absoluteString]);
    [getRequest startAsynchronous];
}

- (void)performPostRequestWithString:(NSString *)string stringDictionary:(NSDictionary *)stringDictionary dataDictionary:(NSDictionary *)dataDictionary delegate:(id)requestDelegate requestSelector:(SEL)requestSelector errorSelector:(SEL)errorSelector {

    localCopy = self;

    self.delegate = requestDelegate;
    self.callback = requestSelector;
    self.errorCallback = errorSelector;

    NSURL *url = [NSURL URLWithString:string];

    postRequest = [[ASIFormDataRequest alloc] initWithURL:url];
    [postRequest setDelegate:self];
    [postRequest setRequestMethod:@"POST"];

    if (stringDictionary)
        for (NSString *key in [stringDictionary allKeys])
            [postRequest setPostValue:[stringDictionary objectForKey:key] forKey:key];

    if (dataDictionary)
        for (NSString *key in [dataDictionary allKeys])
            [postRequest setData:[dataDictionary objectForKey:key] forKey:key];

    //NSLog(@"request url = %@", [postRequest.url absoluteString]);
    [postRequest startAsynchronous];
}

#pragma mark - ASIHTTPRequest Delegate Implementation

- (void)requestFinished:(ASIHTTPRequest *)crequest {
    NSString *status = [crequest responseString];

    if (self.delegate && self.callback) {
        if([self.delegate respondsToSelector:self.callback])
            [self.delegate performSelectorOnMainThread:self.callback withObject:status waitUntilDone:YES];
        else
            NSLog(@"No response from delegate");
    }
    localCopy = nil;
}
- (void)requestFailed:(ASIHTTPRequest *)crequest {
    if (self.delegate && self.errorCallback) {
        if([self.delegate respondsToSelector:self.errorCallback])
            [self.delegate performSelectorOnMainThread:self.errorCallback withObject:crequest.error waitUntilDone:YES];
        else
            NSLog(@"No response from delegate");
    }
    localCopy = nil;
}

@end 
```

要使用它，只需导入`RequestPerformer.h`您的`UIViewController`并执行以下操作：

```
[requestManager performGetRequestWithString:tempString stringDictionary:stringDictionary dataDictionary:dataDictionary delegate:self requestSelector:@selector(requestSucceeded:) errorSelector:@selector(requestFailed:)]; 
```

参数：

*   `(NSString *)string`- url 字符串，在哪里发布您的请求；
*   `(NSDictionary *)stringDictionary`- 字典，包含所有文本信息（如姓名、ID 等）；
*   `(NSDictionary *)dataDictionary`- 字典，包含所有数据信息（如照片、文件等）；
*   `(id)requestDelegate`- 委托执行以下选择器；
*   `(SEL)requestSelector`- 选择器，将在成功请求时执行；
*   `(SEL)errorSelector`- 选择器，将在发生错误时执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T19:15:07.613

在上面的答案（demon9733）中，包装类已经创建了带有保留的委托属性。通常，应分配委托属性以删除保留周期。

# php - PHP 引用数组元素 (&$array['element']) 创建元素

> ID：10361433
> 
> 赞同：1
> 
> 时间：2012-04-28T07:11:19.400
> 
> 标签：php, function, pass-by-reference

我有一个检查变量是否存在的函数。

```
function variable( &$var, $default = NULL )
{
    if( (!isset($var) && !is_array($var)) || empty($var) )
    {
        return FALSE;
    }
    elseif( is_array($var) && count($var) <= 0 )
    {
        return FALSE;       
    }
    else
    {
        return $var;
    }
} 
```

我的问题是，当我传递像 $array['element'] 这样的数组元素引用时，这个函数会创建一个数组，即使它以前不存在，也会创建数组 $array 和索引“元素”。

该函数应该做的是有类似 echo variable($var); 的东西。即使未定义 $var 也不会产生错误。

有没有办法再次删除它，或者最好不要让函数创建数组？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T08:36:45.370

见这里：[http ://ch.php.net/manual/de/function.array-key-exists.php](http://ch.php.net/manual/de/function.array-key-exists.php)

array_key_exists 是“关键”，没有双关语:-)

像这样：

```
if (array_key_exists('element', $array)({
    // do the fan dango
} 
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-04-28T07:17:12.130

要删除，可以使用 unset($array['element']); 或未设置（$array）；取决于你的目标。为了确保数组变成字符串，只需使用 implode("",$array);

# iphone - 如何从数组中在tableview中添加图像

> ID：10361434
> 
> 赞同：0
> 
> 时间：2012-04-28T07:11:36.247
> 
> 标签：iphone

我想在 tableview 上添加图像。我创建了一个 UITableViewCell 对象。在 .h 文件中

```
@interface MainView1 : UITableViewCell{

IBOutlet UILabel *cellText;

IBOutlet UIImageView *productImg;

IBOutlet UILabel *cellText1;

}

- (void)LabelText:(NSString *)_text;

- (void)LabelText1:(NSString *)_text;

- (void)ProductImage:(NSString *)_text;

 @end 
```

和 .m 文件

```
- (void)LabelText:(NSString *)_text;{

  cellText.text = _text;
}

- (void)LabelText1:(NSString *)_text;{

     cellText1.text=_text;
 }

  - (void)ProductImage:(NSString *)_text;{

productImg.image = [UIImage imageNamed:_text];
  } 
```

并在主文件中

//页面包含表格

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
  MainView1 *cell = (MainView1 *)[tableView dequeueReusableCellWithIdentifier: MyIdentifier];
if(cell == nil) {
    [[NSBundle mainBundle] loadNibNamed:@"MainView1" owner:self options:nil];
    cell = tableCell1;  
    [cell LabelText:[arryList objectAtIndex:indexPath.row]];
[cell ProductImage:[imgNameArray objectAtIndex:indexPath.row]];

    [cell LabelText1:[yesArray objectAtIndex:indexPath.row]];

} 
```

图像数组来自这样的数据库

```
 NSData   *imgdata=[[NSData alloc]initWithBytes:sqlite3_column_blob(cmp_sqlstmt,0)       length:sqlite3_column_bytes(cmp_sqlstmt,0)];

 [imgNameArray addObject:dataImage]; 
```

问题是只有图像没有显示错误显示是无法识别的选择器发送到实例 0x4e53940'

如何解决它问候KL BAIJU

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T11:07:51.063

从数据库中，您可以获取`NSData`. 您将其保存在数据源数组中。

但是，您将其传递为`NSString`

`[cell ProductImage:[imgNameArray objectAtIndex:indexPath.row]];`

在哪里

```
- (void)ProductImage:(NSString *)_text;{

productImg.image = [UIImage imageNamed:_text];

} 
```

您基本上需要将方法参数更改为`NSData`类型

```
- (void)ProductImage:(NSData *) imageData{

    productImg.image = [UIImage imageNamed:_text];

} 
```

但这仍然行不通。因为`[UIImage imageNamed:]`方法试图从主包中获取命名图像。但是在您的情况下，您需要来自您拥有的数据的图像。所以你的最终方法应该是这样的。

```
- (void)ProductImage:(NSData *) imageData{

        productImg.image = [UIImage imageWithData: imageData];

} 
```

另外不要忘记将头文件中的方法声明更改为

`- (void)ProductImage:(NSData *) imageData;`

# java - 我收到 SelectManyCheckBox 的“值不是有效选项”

> ID：10361440
> 
> 赞同：0
> 
> 时间：2012-04-28T07:12:20.103
> 
> 标签：java, jsf

我的 JSP 页面中有这段代码：

```
<h:selectManyCheckbox id="chb" value="#{MyBean.selectedCheckBoxes}" layout="pageDirection">
     <f:selectItems value="#{MyBean.checkBoxItems}"/>
</h:selectManyCheckbox> 
```

在我的 MyBean 中：

```
public class MyBean {

    public MyBean() {
        for (Elem section : sections) {
            checkBoxItems.put(section.getName(), section.getObjectID());
        }
    }

    private String[] selectedCheckBoxes;
    private Map<String, Object> checkBoxItems = new LinkedHashMap<String, Object>();

    public String save() {
        //save is not being executed....
        return FORWARD;
    }

    public Map<String, Object> getCheckBoxItems() {
        return checkBoxItems;
    }

    public void setCheckBoxItems(Map<String, Object> checkBoxItems) {
        this.checkBoxItems = checkBoxItems;
    }

    public String[] getSelectedCheckBoxes() {
        return selectedCheckBoxes;
    }

    public void setSelectedCheckBoxes(String[] selectedCheckBoxes) {
        this.selectedCheckBoxes = selectedCheckBoxes;
    }
} 
```

当我单击保存时，它会在`<t:message for="chb"/>`

> “chb”：值不是有效选项。

**即使我没有为 添加`required`属性`h:selectManyCheckbox`**，它也在尝试验证或执行其他操作...我已将`checkBoxItems` 变量类型（使用 getter/setter）更改为`List<SelectItem>`，但它无法正常工作。可能是什么原因，我该如何解决？
PS：我正在使用 JSF 1.1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T12:16:26.213

[`equals()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)当对所选项目的测试*未*返回*任何*可用项目时`true`，您将收到此错误。因此，当在 JSF 的掩护下大致发生以下情况时：

 *```
boolean valid = false;

for (Object availableItem : availableItems) {
    if (selectedItem.equals(availableItem)) {
        valid = true;
        break;
    }
}

if (!valid) {
    // Validation error: Value is not valid!
} 
```

在您的特定情况下，这仅意味着`section.getObjectID()`不返回`String`您声明的 a ，而是未实现或破坏`selectedCheckboxes`的不同类型或自定义类型。`equals()`

* * *

**根据您的评论**更新**`getObjectID()`，返回`Integer`。因此它被视为`String`因为`selectedCheckBoxes`被声明为`String[]`. 您应该更改以下内容**

 **```
private String[] selectedCheckBoxes;
private Map<String, Object> checkBoxItems = new LinkedHashMap<String, Object>(); 
```

到

```
private Integer[] selectedCheckBoxes;
private Map<String, Integer> checkBoxItems = new LinkedHashMap<String, Integer>(); 
```

也许（不确定，现在不能从头顶上分辨出来）还明确提供了一个转换器：

```
<h:selectManyCheckbox ... converter="javax.faces.Integer"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T11:48:57.017

我在代码中没有发现任何问题，我认为您传递给 oneManyCheckBox 的列表存在问题。

在 getter 中硬编码列表中的一些值而不是检查

```
 public Map<String, Object> getCheckBoxItems() {

    checkBoxItems.clear();
    checkBoxItems.put("aaaa", "aaaa");
    checkBoxItems.put("bbbb", "bbbb");
    checkBoxItems.put("cccc", "cccc");
    checkBoxItems.put("dddd", "dddd");
    checkBoxItems.put("eeee", "eeee");

    return checkBoxItems;
   } 
```***

# delphi - Delphi Indy 10 演示应用程序客户端服务器

> ID：10361446
> 
> 赞同：1
> 
> 时间：2012-04-28T07:13:59.583
> 
> 标签：delphi, indy, indy10

此代码基于使用 indy10 和 delphi xe 或 delphi 2010 的源代码伪造的演示应用程序。我尝试添加一些改进，但现在客户端在与服务器交换数据时挂断了

```
> procedure TServerMainForm.**IdTCPServerExecute(AContext:
> TIdContext);** var   LBuffer: TBytes;
> 
>   LSize: LongInt;
> 
>   CMD_CLASS: Integer;   line: String;
> 
>   aMs: TMemoryStream;
> 
>   aINDYCMD: TGenericRecord<TINDYCMD>;   aMyRecord:
> TGenericRecord<TMyRecord>;
> 
> begin
> 
>   aINDYCMD := TGenericRecord<TINDYCMD>.Create;   aMyRecord :=
> TGenericRecord<TMyRecord>.Create;
> 
>   AIndyRecord_TS := TINDYCMDThreadSafeRecord.Create;   // NEW THREAD
> SAVE RECORDE.. IF I NEED VCL ACCESS !!!   aMyRecord_TS :=
> TMyRECORDThreadSafeRecord.CReate;
> 
> 
> 
>   AContext.Connection.IOHandler.ReadTimeout := 90000;
> 
>   // 'server execute start'
> 
>   if (ReceiveBuffer(AContext, LBuffer) = False) then   begin
>     TIdNotify.NotifyMethod(ShowCannotGetDataErrorMessage);
>     Exit;   end   else   begin
>     TIdNotify.NotifyMethod(ShowDataReceivedMessage);
> 
>     aINDYCMD.value := aINDYCMD.ByteArrayToMyRecord(LBuffer);
> 
>     AIndyRecord_TS.lock;
> 
>     AIndyRecord_TS.value := aINDYCMD.value;
> 
>     //  TIdNotify.NotifyMethod(RecordReceived_TMyRecord);      BUGGY CODE I GUESS
>     // TIdNotify.NotifyMethod(RecordReceived_TINDY_CMD);
>     AIndyRecord_TS.unlock;
> 
>   end;
> 
>   aINDYCMD.value := aINDYCMD.ByteArrayToMyRecord(LBuffer);
> 
> 
>   CMD_CLASS := aINDYCMD.value.CMD_CLASS;
> 
>   // MainStatusBar.SimpleText := ' CMD_CLASS -> ' + 
> INtToStr(aINDYCMD.value.CMD_CLASS);
> 
>   case CMD_CLASS of
>     0:
>       begin
>         /// receive a simple string from client
>         line := AContext.Connection.IOHandler.ReadLn();
>         // Memo1.Lines.Add('');
>         // Memo1.Lines.Add('CLIENT STRING -> ' + line);
>         // Memo1.Lines.Add('');
>       end;
> 
>     1:
>       begin
>         ///
>         // Memo1.Lines.Add('');
>         // Memo1.Lines.Add('SEND RECORD BACK TO CLIENT#1');
>         // Memo1.Lines.Add('');
> 
>         AIndyRecord_TS.lock;
>         AIndyRecord_TS.value.CMD_TIMESTAMP := now;
>         AIndyRecord_TS.value.CMD_VALUE := ' TEST SEND BACK SERVER TIME -> ' +
>           dateToStr(now) + '/' + TimeToStr(now);
>         AIndyRecord_TS.value.CMD_CLASS := 100;
>         aINDYCMD.value := AIndyRecord_TS.value;
>         AIndyRecord_TS.unlock;
> 
>         LBuffer := aINDYCMD.MyRecordToByteArray(aINDYCMD.value);
> 
>         if (SendBuffer(AContext, LBuffer) = False) then
>         begin
>           TIdNotify.NotifyMethod(ShowCannotSendDataErrorMessage);
>         end
>         else
>         begin
>           TIdNotify.NotifyMethod(ShowDataSendMessage);
>         end;
>       end;
>     2:
>       begin
>         // Memo1.Lines.Add('');
>         // Memo1.Lines.Add('SEND RECORD BACK TO CLIENT#2');
>         // Memo1.Lines.Add('');
>         aMyRecord_TS.value.Details := ' complex server response ......';
>         aMyRecord_TS.value.FileName := 'TEXT TEST TEXT TEST';
>         aMyRecord_TS.value.FileDate := now;
>         aMyRecord_TS.value.Recordsize := Random(100);
>         aMyRecord_TS.value.FileSize := 1234567890;
> 
>         aMyRecord.value := aMyRecord.value;
> 
>         LBuffer := aMyRecord.MyRecordToByteArray(aMyRecord.value);
> 
>         if (SendBuffer(AContext, LBuffer) = False) then
>         begin
>           TIdNotify.NotifyMethod(ShowCannotSendDataErrorMessage);
>         end
>         else
>         begin
>           TIdNotify.NotifyMethod(ShowDataSendMessage);
>         end;
> 
>       end;
> 
>     3:
>       begin
>         ///
>         // Memo1.Lines.Add('record received, paint random record !');
> 
>         abmp.Height := 300;
>         abmp.Width := 300;
> 
>         DrawRandomBitMap(abmp);
> 
>         ServerImage.Picture.Bitmap.Assign(abmp);
> 
>       end;
>     4:
>       begin
>         ///
>         // Memo1.Lines.Add('send stream back !');
>         ///
>         aMs := TMemoryStream.Create;
>         abmp.SaveToStream(aMs);
> 
>         if (SendStream(AContext, TStream(aMs)) = False) then
>         begin
>           TIdNotify.NotifyMethod(ShowCannotSendStreamDataErrorMessage);
>           Exit;
>         end;
> 
>         aMs.Free;
> 
>       end;
> 
>   else
>     //   end;
> 
>   LEDShape.brush.Color := clgreen;
> 
>   // Memo1.Lines.Add('server execute done');
> 
>   aINDYCMD.Free;   aMyRecord.Free;
> 
>   AIndyRecord_TS.Free;   aMyRecord_TS.Free;
> 
> end;
> 
> procedure TServerMainForm.DrawRandomBitMap(aBitMap: TBitMap); var   i,
> j: Integer;   rx1, rx2: Integer;   ry1, ry2: Integer;   w, h: Integer;
> 
> begin   w := aBitMap.Width;   h := aBitMap.Height;
> 
>   abmp.Canvas.FloodFill(0, 0, clwhite, fsSurface);
> 
>   for i := 1 to 30 do   begin
> 
>     randomize;
> 
>     rx1 := Random(w - 1);
>     rx2 := Random(w - 1);
> 
>     ry1 := Random(h - 1);
>     ry2 := Random(h - 1);
> 
>     aBitMap.Canvas.Pen.Color := RandomColor;
> 
>     aBitMap.Canvas.MoveTo(rx1, ry1);
> 
>     aBitMap.Canvas.LineTo(rx2, ry2);
> 
>   end;
> 
> end;

procedure TServerMainForm.RecordReceived_TINDY_CMD;
begin
  Memo1.Lines.Add('------------------< RECORD VALUES >-------------');
  Memo1.Lines.Add(' CMD_Value -> ' + AIndyRecord_TS.value.CMD_VALUE);
  Memo1.Lines.Add(' CMD_CLASS -> ' + INtToStr(AIndyRecord_TS.value.CMD_CLASS));
  Memo1.Lines.Add(' CMD_CLASS -> ' +
    dateToStr(AIndyRecord_TS.value.CMD_TIMESTAMP));
  Memo1.Lines.Add('--------------------< END >----------------------')
end;

procedure TServerMainForm.RecordReceived_TMyRecord;
begin
  Memo1.Lines.Add('--------------------< RECORD VALUES >----------------');
  // Memo1.Lines.Add('Details ' + aMyRecord.value.Details);
  // Memo1.Lines.Add('FileName = ' + aMyRecord.value.FileName);
  // Memo1.Lines.Add('FileSize = ' + INtToStr(aMyRecord.value.FileSize));
  // Memo1.Lines.Add('RecordSize = ' + INtToStr(aMyRecord.value.Recordsize));
  Memo1.Lines.Add('--------------------< END >------------------------')
end;

///
/// ...
///
procedure TServerMainForm.ServerActiveCheckBoxClick(Sender: TObject);
begin
  IdTCPServer.Active := ServerActiveCheckBox.Checked;

  if IdTCPServer.Active then
    LEDShape.brush.Color := clgreen
  else
    LEDShape.brush.Color := clred;

end;

///
/// not yet implemented  ....
///
procedure TServerMainForm.ServerBindingsButtonClick(Sender: TObject);
var
  SocketHandle: TIDSocketHandles;
begin

  // binding set to 127.0.0.1   ::  50000

  IdTCPServer.Active := False;

  IdTCPServer.Bindings.Add.IPVersion := Id_IPv4;
  // else, throw socket error # 98 , address already in use ...
  IdTCPServer.Bindings.Add.IP := IPEdit.text; // '127.0.0.1';
  IdTCPServer.Bindings.Add.Port := StrToInt(PortEdit.text); // 5000;

  // customization
  ServerActiveCheckBox.Checked := true;
  IdTCPServer.Active := ServerActiveCheckBox.Checked;

  //
  MainStatusBar.SimpleText := 'server running on port ' + PortEdit.text +
    ' host ip ->' + IPEdit.text;

end;

///
/// get all available IP's
///
procedure TServerMainForm.PopolateIPLIstButtonClick(Sender: TObject);
var
  MYIdStack: TIdStack;
begin

  /// methode #1  , working with INDY IDIPWatch
  IdIPWatch.Active := true;
  MainStatusBar.SimpleText := IdIPWatch.LocalIP + '...' + IdIPWatch.CurrentIP;

  /// meathode #2 , see ....

  with IPListCheckListBox do
  begin
    Clear;
    Items := GStack.LocalAddresses;
    If IPListCheckListBox.Items.Strings[0] <> '127.0.0.1' then
      Items.Insert(0, '127.0.0.1');

    Checked[0] := true;

  end;

end;

procedure TServerMainForm.ShowDataReceivedMessage;
begin
  Memo1.Lines.Add('Data received' + TimeToStr(now));
end;

procedure TServerMainForm.ShowDataSendMessage;
begin
  Memo1.Lines.Add('Data send' + TimeToStr(now));
end;

procedure TServerMainForm.ShowCannotGetDataErrorMessage;
begin
  Memo1.Lines.Add('Cannot get data from client, Unknown error occured' +
    TimeToStr(now));
end;

procedure TServerMainForm.ShowCannotSendDataErrorMessage;
begin
  Memo1.Lines.Add('Cannot send data to client, Unknown error occured' +
    TimeToStr(now));
end;

procedure TServerMainForm.ShowCannotSendStreamDataErrorMessage;
begin
  Memo1.Lines.Add('Cannot send STREAM data to client, Unknown error occured' +
    TimeToStr(now));
end;

procedure TServerMainForm.IdTCPServerException(AContext: TIdContext;
  AException: Exception);
begin
  with AContext.Connection.IOHandler do
  begin
    writeln('server.exception' + TimeToStr(now));
  end;
end;

end. 
```

相关客户端代码也相对于源伪造上的原始版本进行了更改，请参见此处的客户端内容

```
/// selct a command from a CMD List box, today only trial code
procedure TIndyClientMainForm.ClientExecuteButtonClick(Sender: TObject);
var
  aINDYCMD: TGenericRecord<TINDYCMD>;
  aINDYCMD_temp: TINDYCMD;
  aMyRecord: TGenericRecord<TMyRecord>;
  aMyRecord_temp: TMyRecord;
  CmdIndex: Integer;
  line: String;
  LBuffer: TBytes;

  aMemStream: TMemoryStream;
begin

  /// very simple record type to send to the server

  aINDYCMD := TGenericRecord<TINDYCMD>.Create;

  aMyRecord := TGenericRecord<TMyRecord>.Create;

  CmdIndex := CommandComboBox.ItemIndex;

  // Memo1.Lines.Add('start client execute : ' + IntToStr(CmdIndex));

  MakeINDYCommand(aINDYCMD_temp, CmdIndex);
  aINDYCMD.Value := aINDYCMD_temp;

  MakeMyRecord(aMyRecord_temp);
  aMyRecord.Value := aMyRecord_temp;

  /// start   communication client server .....

  LBuffer := aINDYCMD.MyRecordToByteArray(aINDYCMD.Value);
  if (SendBuffer(MyIdTCPClient, LBuffer) = false) then
  begin
     TIdNotify.NotifyMethod(ShowCannotSendDataErrorMessage);
  end
  else
  begin
     TIdNotify.NotifyMethod(ShowDataSendMessage);
  end;

  case CmdIndex of
    0:
      /// send a string tp the server
      begin
        ///  'send text  ;
        MyIdTCPClient.IOHandler.WriteLn(SendTextEdit.Text);
        TIdNotify.NotifyMethod(ShowDataSendMessage);
      end;
    1:
      /// send INDY CMD and get INDY CMD from the server
      begin

        ///
        ///
        if ( NOT ReceiveBuffer(MyIdTCPClient, LBuffer)) then
        begin
              // 'Cannot receive record/buffer from server.'
              TIdNotify.NotifyMethod(ShowCannotGetDataErrorMessage);
        end
        else
        begin
          aINDYCMD.Value := aINDYCMD.ByteArrayToMyRecord(LBuffer);
          //  ShowCMDRecord('ServerResponse', aINDYCMD.Value);
           TIdNotify.NotifyMethod(ShowDataReceivedMessage);
        end;
      end;
    2:
      /// send INDY RECORD GET CLIENTSVR RECORD from server
      begin
        ///
        ///
        if (NOT ReceiveBuffer(MyIdTCPClient, LBuffer)) then
        begin
         // 'Cannot receive record/buffer from server.'
          TIdNotify.NotifyMethod(ShowCannotGetDataErrorMessage);
        end
        else
        begin
          aMyRecord.Value := aMyRecord.ByteArrayToMyRecord(LBuffer);
           TIdNotify.NotifyMethod(ShowDataReceivedMessage);
          // ShowDataRecord('ServerResponse', aMyRecord.Value);
        end;
      end;

    3:

      begin
        /// do nothing !!!!!!!
      end;
    4:
      /// get a file from the server
      begin
        /// *   todo  !!!!
        ///
        ///
        ///
        aMemStream := TMemoryStream.Create;

        if (ReceiveStream(MyIdTCPClient, TStream(aMemStream)) = false) then
        begin
          Memo1.Lines.Add
            ('Cannot get STREAM from server, Unknown error occured');
          Exit;
        end;

        ClientImage.Picture.Bitmap.LoadFromStream(TStream(aMemStream));

        aMemStream.Free;

      end
  else
    ///
  end;

  aINDYCMD.Free;

  aMyRecord.Free;

end; 
```

我不知道为什么客户端现在在将记录发送到服务器后挂断了？服务器说他可以发送记录实际上客户端已冻结

供参考的助手 indy 包装函数

```
///
/// -------------   HELPER FUNCTION FOR RECORD EXCHANGE   ---------------------
///

function ReceiveBuffer(AClient: TIdTCPClient; var ABuffer: TBytes)
  : Boolean; overload;
var
  LSize: LongInt;
begin
  Result := True;
  try
    LSize := AClient.IOHandler.ReadLongInt();
    AClient.IOHandler.ReadBytes(ABuffer, LSize, False);
  except
    Result := False;
  end;
end;

function SendBuffer(AClient: TIdTCPClient; ABuffer: TBytes): Boolean; overload;
begin
  try
    Result := True;
    try
      AClient.IOHandler.Write(LongInt(Length(ABuffer)));
      AClient.IOHandler.WriteBufferOpen;
      AClient.IOHandler.Write(ABuffer, Length(ABuffer));
      AClient.IOHandler.WriteBufferFlush;
    finally
      AClient.IOHandler.WriteBufferClose;
    end;
  except
    Result := False;
  end;

end;

function SendBuffer(AContext: TIdContext; ABuffer: TBytes): Boolean; overload;
begin
  try
    Result := True;
    try
      AContext.Connection.IOHandler.Write(LongInt(Length(ABuffer)));
      AContext.Connection.IOHandler.WriteBufferOpen;
      AContext.Connection.IOHandler.Write(ABuffer, Length(ABuffer));
      AContext.Connection.IOHandler.WriteBufferFlush;
    finally
      AContext.Connection.IOHandler.WriteBufferClose;
    end;
  except
    Result := False;
  end;
end;

function ReceiveBuffer(AContext: TIdContext; var ABuffer: TBytes)
  : Boolean; overload;
var
  LSize: LongInt;
begin
  Result := True;
  try
    LSize := AContext.Connection.IOHandler.ReadLongInt();
    AContext.Connection.IOHandler.ReadBytes(ABuffer, LSize, False);
  except
    Result := False;
  end;
end;

///
/// ---------------------   HELP FUNCTION FOR STREAM  EXCHANGE  --------------
///

function ReceiveStream(AContext: TIdContext; var AStream: TStream)
  : Boolean; overload;
var
  LSize: LongInt;
begin
  Result := True;
  try
    LSize := AContext.Connection.IOHandler.ReadLongInt();
    AContext.Connection.IOHandler.ReadStream(AStream, LSize, False);
  except
    Result := False;
  end;
end;

function ReceiveStream(AClient: TIdTCPClient; var AStream: TStream)
  : Boolean; overload;
var
  LSize: LongInt;
begin
  Result := True;
  try
    LSize := AClient.IOHandler.ReadLongInt();
    AClient.IOHandler.ReadStream(AStream, LSize, False);
  except
    Result := False;
  end;
end;

function SendStream(AContext: TIdContext; AStream: TStream): Boolean; overload;
var
  StreamSize: LongInt;
begin
  try
    Result := True;
    try
      StreamSize := (AStream.Size);

      // AStream.Seek(0, soFromBeginning);

      AContext.Connection.IOHandler.Write(LongInt(StreamSize));
      AContext.Connection.IOHandler.WriteBufferOpen;
      AContext.Connection.IOHandler.Write(AStream, 0, False);
      AContext.Connection.IOHandler.WriteBufferFlush;
    finally
      AContext.Connection.IOHandler.WriteBufferClose;
    end;
  except
    Result := False;
  end;

end;

function SendStream(AClient: TIdTCPClient; AStream: TStream): Boolean; overload;
var
  StreamSize: LongInt;
begin
  try
    Result := True;
    try
      StreamSize := (AStream.Size);

      // AStream.Seek(0, soFromBeginning);
      // AClient.IOHandler.LargeStream := True;
      // AClient.IOHandler.SendBufferSize := 32768;

      AClient.IOHandler.Write(LongInt(StreamSize));
      AClient.IOHandler.WriteBufferOpen;
      AClient.IOHandler.Write(AStream, 0, False);
      AClient.IOHandler.WriteBufferFlush;
    finally
      AClient.IOHandler.WriteBufferClose;
    end;
  except
    Result := False;
  end;
end;

///
/// ---------------      HELPER FUNCTIONS FOR FILES EXCHANGE  ----------------
///
function ClientSendFile(AClient: TIdTCPClient; Filename: String): Boolean;
begin

  AClient.IOHandler.LargeStream := True; // fully support large streams
  Result := True;
  try
    AClient.IOHandler.WriteFile(Filename); // send file stream data
  except
    Result := False;
  end;

end;

function ClientReceiveFile(AClient: TIdTCPClient; Filename: String): Boolean;
begin

  /// todo ......

end;

function ServerSendFile(AContext: TIdContext; Filename: String): Boolean;
begin

  /// todo ......

end;

function ServerReceiveFile(AContext: TIdContext; ServerFilename: String;
  var ClientFilename: String): Boolean;
var
  // LSize: String;
  AStream: TFileStream;
begin
  try
    Result := True;
    AStream := TFileStream.Create(ServerFilename, fmCreate + fmShareDenyNone);
    try
      AContext.Connection.IOHandler.ReadStream(AStream);
    finally
      FreeAndNil(AStream);
    end;
  except
    Result := False;
  end;
end;

///
/// ---------------   HELPER FUNCTION FOR RECORD EXCHANGE  ------------------
/// (not using generic syntax features of DELPHI 2009 and better )

function MyRecordToByteArray(aRecord: TMyRecord): TBytes;
var
  LSource: PAnsiChar;
begin
  LSource := PAnsiChar(@aRecord);
  SetLength(Result, SizeOf(TMyRecord));
  Move(LSource[0], Result[0], SizeOf(TMyRecord));
end;

function ByteArrayToMyRecord(ABuffer: TBytes): TMyRecord;
var
  LDest: PAnsiChar;
begin
  LDest := PAnsiChar(@Result);
  Move(ABuffer[0], LDest[0], SizeOf(TMyRecord));
end;

function TGenericRecord<TRecordType>.MyRecordToByteArray
  (aRecord: TRecordType): TBytes;
var
  LSource: PAnsiChar;
begin
  LSource := PAnsiChar(@aRecord);
  SetLength(Result, SizeOf(TRecordType));
  Move(LSource[0], Result[0], SizeOf(TRecordType));
end;

function TGenericRecord<TRecordType>.ByteArrayToMyRecord(ABuffer: TBytes)
  : TRecordType;
var
  LDest: PAnsiChar;
begin
  LDest := PAnsiChar(@Result);
  Move(ABuffer[0], LDest[0], SizeOf(TRecordType));
end; 
```

# objective-c - UIView 的子类。如何通过 Interface Builder 添加？

> ID：10361453
> 
> 赞同：1
> 
> 时间：2012-04-28T07:15:09.987
> 
> 标签：objective-c, uiview, interface-builder, subclass

我有一个 UITextField 的子类，并且希望能够将它添加到 IB 中的视图中。我所做的是添加 UITextField 并将其类更改为我在 Inspector 的 Identity 选项卡中的子类。但我只能在视图上看到 UITextField 。

代码：

```
@interface ExtendedTextField : UITextField {
}

//implementation

@implementation ExtendedTextField

- (void)baseInit
{
    UIImage * curImage = [UIImage imageNamed:@"tfbg.png"];
    [self baseInitWithImage : curImage];
}

- (void)baseInitWithImage : (UIImage *) aImage
{
    aImage = [aImage stretchableImageWithLeftCapWidth:29 topCapHeight:29];
    self.background = aImage;
    self.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;

    UIView * curLeftView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 10, self.frame.size.height)];

    self.leftView = curLeftView;
    self.rightView = curLeftView;
    [curLeftView release];
    self.leftViewMode = UITextFieldViewModeAlways;
    self.rightViewMode = UITextFieldViewModeAlways;
    [self setTextColor:[UIColor greenColor]];
}

- (void)awakeFromNib
{
    [super awakeFromNib];
    [self baseInit];
}

/*
- (id)initWithCoder:(NSCoder *)aDecoder
{
    self = [super initWithCoder:aDecoder];
    if (self) {
        [self baseInit];
    }
    return self;
}
*/

- (id)initWithFrame:(CGRect)frame {
    self = [super initWithFrame:frame];
    if (self)
    {
        [self baseInit];
    }
    return self;
}

- (id)initWithFrame:(CGRect)frame withImage:(UIImage*)aImage
{
    self = [super initWithFrame:frame];
    if (self) {
        [self baseInitWithImage : aImage];
    }
    return self;
}

- (void)dealloc {
    [super dealloc];
}

@end 
```

**编辑：**我注意到几件事：

-- 如果我在里面放 [super initWithFrame:...] 而不是 [super initWithCoder:...]

(id)initWithCoder:(NSCoder *)aDecoder

它运作良好。

-- 现在我使用的是 awakefromnib 而不是 initwithcoder，而在 textfield 中唯一改变的是 textColor。有人可以解释为什么会这样吗？

**解决方案**我需要将边框样式设置为无。BS 叠加 bg 图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T07:18:39.853

在 Xcode 中显示您的 .xib 时，显示右侧窗格，选择您的视图，然后在第三个选项卡中，更改`Class`为您想要的任何内容。

# msbuild - 是否可以在 MonoDroid 中使用引用 System.Net 的可移植类库？

> ID：10361457
> 
> 赞同：9
> 
> 时间：2012-04-28T07:15:47.920
> 
> 标签：msbuild, xamarin.android, portable-class-library

继[如何为可移植类库构建目标包？](https://stackoverflow.com/questions/10261604/how-can-i-build-a-targetting-pack-for-portable-class-libraries)以及[http://jpobst.blogspot.com/2012/04/mono-for-android-portable-libraries-in.html](http://jpobst.blogspot.com/2012/04/mono-for-android-portable-libraries-in.html)中的建议我已经设法构建了一些使用可移植类库的 monodroid 示例程序。

但是，如果我的任何输入 PCL 引用 System.Net 程序集，则 monodroid 无法打包我的 apk - 因为它抱怨 System.Net.dll 找不到文件。

据我了解（来自[http://docs.xamarin.com/android/about/assemblies），MonoDroid](http://docs.xamarin.com/android/about/assemblies)将所有 System.Net 功能捆绑在 System.dll 中。

有什么方法可以让 MonoDroid 使用这些引用 System.Net 的 PCL？

*   有什么方法可以让 monodroid 打包器理解这个 System.net-> 系统重定向？
*   或者是否有一些我可以运行的预打包步骤将“纠正”仅针对 monodroid 的引用？
*   或者有什么其他建议？

* * *

更新技术信息：

打包过程目前在以下级别失败：

```
"C:\Projects\Misc\MVVMCROSS\Sample - Tutorial\Tutorial\Tutorial.UI.Droid\Tutorial.UI.Droid.csproj" (SignAndroidPackage target) (1) ->
(_ResolveAssemblies target) -> 
  C:\Program Files (x86)\MSBuild\Novell\Novell.MonoDroid.Common.targets(441,2): error : Exception while loading assemblies: System.IO.FileNotFoundException: Could not load assembly 'System.Net, Version=2.0.5.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e'. Perhaps it doesn't exist in the Mono for Android profile? [C:\Projects\Misc\MVVMCROSS\Sample - Tutorial\Tutorial\Tutorial.UI.Droid\Tutorial.UI.Droid.csproj]
C:\Program Files (x86)\MSBuild\Novell\Novell.MonoDroid.Common.targets(441,2): error : File name: 'System.Net.dll' [C:\Projects\Misc\MVVMCROSS\Sample - Tutorial\Tutorial\Tutorial.UI.Droid\Tutorial.UI.Droid.csproj]
C:\Program Files (x86)\MSBuild\Novell\Novell.MonoDroid.Common.targets(441,2): error :    at Monodroid.Tuner.MonoDroidResolver.Resolve(AssemblyNameReference reference, ReaderParameters parameters) [C:\Projects\Misc\MVVMCROSS\Sample - Tutorial\Tutorial\Tutorial.UI.Droid\Tutorial.UI.Droid.csproj]
C:\Program Files (x86)\MSBuild\Novell\Novell.MonoDroid.Common.targets(441,2): error :    at Xamarin.Android.Tasks.ResolveAssemblies.AddAssemblyReferences(List`1 assemblies, AssemblyDefinition assembly) [C:\Projects\Misc\MVVMCROSS\Sample - Tutorial\Tutorial\Tutorial.UI.Droid\Tutorial.UI.Droid.csproj]
C:\Program Files (x86)\MSBuild\Novell\Novell.MonoDroid.Common.targets(441,2): error :    at Xamarin.Android.Tasks.ResolveAssemblies.AddAssemblyReferences(List`1 assemblies, AssemblyDefinition assembly) [C:\Projects\Misc\MVVMCROSS\Sample - Tutorial\Tutorial\Tutorial.UI.Droid\Tutorial.UI.Droid.csproj]
C:\Program Files (x86)\MSBuild\Novell\Novell.MonoDroid.Common.targets(441,2): error :    at Xamarin.Android.Tasks.ResolveAssemblies.AddAssemblyReferences(List`1 assemblies, AssemblyDefinition assembly) [C:\Projects\Misc\MVVMCROSS\Sample - Tutorial\Tutorial\Tutorial.UI.Droid\Tutorial.UI.Droid.csproj]
C:\Program Files (x86)\MSBuild\Novell\Novell.MonoDroid.Common.targets(441,2): error :    at Xamarin.Android.Tasks.ResolveAssemblies.Execute() [C:\Projects\Misc\MVVMCROSS\Sample - Tutorial\Tutorial\Tutorial.UI.Droid\Tutorial.UI.Droid.csproj] 
```

这发生在 MSBuild 任务中：

```
<!-- Find all the assemblies this app requires -->
<ResolveAssemblies
    Assemblies="$(ProjectDir)$(OutDir)$(TargetFileName);@(ReferencePath)"
    I18nAssemblies="$(MandroidI18n)"
    LinkMode="$(AndroidLinkMode)"
    ReferenceAssembliesDirectory="$(TargetFrameworkDirectory)">
        <Output TaskParameter="ResolvedAssemblies" ItemName="ResolvedAssemblies" />
  <Output TaskParameter="ResolvedUserAssemblies" ItemName="ResolvedUserAssemblies" />
  <Output TaskParameter="ResolvedFrameworkAssemblies" ItemName="ResolvedFrameworkAssemblies" />
  <Output TaskParameter="ResolvedSymbols" ItemName="ResolvedSymbols" />
  </ResolveAssemblies> 
```

进口自：

```
 <UsingTask TaskName="Xamarin.Android.Tasks.ResolveAssemblies" AssemblyFile="Novell.MonoDroid.Build.Tasks.dll" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T05:53:27.653

一个可能的解决方案（假设 MonoDroid 支持类型转发）是拥有一个 System.Net.dll 程序集，该程序集将相关类型转发到 System.dll。

在完整的 .NET Framework 中，我相信那些 System.Net 类型位于 System.dll 中，如果您在 .NET 4.0.3 或 4.5 上查看 System.Net.dll，您将看到这些类型的[TypeForwardedToAttributes](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.typeforwardedtoattribute.aspx)，它允许那些在要重定向到 System.dll 的可移植库中键入对 System.Net.dll 的引用。Jeremy Likness 关于[理解便携式库](http://csharperimage.jeremylikness.com/2012/03/understanding-portable-library-by.html)的系列博文详细介绍了这一切是如何工作的。

可移植库中的引用引用 System.Net.dll 的完整强名称。因此，由于您没有私钥，因此您无法自己生成具有这些类型的正确签名的程序集。但是，MonoDroid 可能会以不同的方式处理强名称或签名验证。因此，您可能能够生成一个具有 MonoDroid 将接受的转发类型的 System.Net.dll，并将其与您的 MonoDroid 应用程序打包在一起。

# ruby-on-rails - 无法在控制器内的渲染更新中使用`page.select`

> ID：10361458
> 
> 赞同：0
> 
> 时间：2012-04-28T07:15:51.573
> 
> 标签：ruby-on-rails, rjs

在我的控制器中，我正在使用渲染更新，但我只想在 div 元素存在时更新。为了检查 div 元素是否存在，我正在使用`page.select`但它没有任何响应，既没有错误也没有输出，这是我的代码

```
def post_update
render :update do |page|
   page.replace_html('div_id':partial=>'my_partial') unless page.select("#div_id").blank?
  end
end 
```

我在这里有什么遗漏吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T07:27:09.367

您不能在 rjs 中使用像这样的 ruby​​ 条件：“除非”并且`page.select`在您的服务器上执行并且不知道 DOM 的内容是什么。

我曾经写过一篇[博客文章](http://www.spacevatican.org/2008/5/26/conditional-rjs-explained)，其中有几种处理方法。简短的版本可能是“根据您的条件生成 Javascript 片段”。这些天，我会远离 rjs：渲染 json 或 HTML，并在您的页面上放置一些知道如何处理它的 JavaScript。

# asp.net-mvc - 在 VS2010 中创建了一个新的 MVC 3 项目。用户存储在哪里？什么是 MVC3 的好教程？

> ID：10361459
> 
> 赞同：0
> 
> 时间：2012-04-28T07:15:53.763
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework

我在 VS 2010 中创建了一个新的 MVC3 项目。没有进行任何更改并启动了网站，已经内置了一个登录和注册页面。如果我没有在任何地方设置数据库，当我注册帐户时，我的帐户究竟存储在哪里？
任何人都可以推荐一个关于 MVC3 的教程，这对刚进入 Web 端编程的人有好处。实体框架也不错。

我可以遍历代码到这一点：

```
Membership.CreateUser(model.UserName, model.Password, model.Email, null, null, true, null, out createStatus); 
```

但是我看不到 CreateUser ，所以我不太确定它在做什么，以及用户的存储位置。

感谢所有的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T07:25:02.853

您可以打开您的项目 web.config 文件并在顶部附近找到连接字符串。这将告诉您它指向哪个数据库。您的默认值应类似于：

```
data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|aspnetdb.mdf;User Instance=true" 
```

它说使用 SQL Express，并附加到项目中的文件 aspnetdb.mdf。您将需要创建此数据库，并在 Visual Studio 2010 命令提示符内使用[aspnet_regsql命令。](http://msdn.microsoft.com/en-us/library/ms229862%28v=vs.80%29.aspx)[这将创建您的用户表和使用ASP.NET Membership Provider](http://msdn.microsoft.com/en-us/library/yh26yfzy.aspx)所需的架构，这是您默认看到的身份验证代码。

最好的教程是[Nerd Diner](http://nerddinner.codeplex.com/)教程。它将引导您完成从数据库模型、表单验证、身份验证、控制器和视图模型等所有内容。

编辑添加：[这](http://nerddinnerbook.s3.amazonaws.com/Intro.htm)是最初的 Nerd Diner 教程，并不像它在 codeplex 网站上演变成的那样复杂。您可能会发现原版更容易一些，并且仍然主要相关。

# html - 如何更改或删除 HTML5 表单验证默认错误消息？

> ID：10361460
> 
> 赞同：158
> 
> 时间：2012-04-28T07:16:14.550
> 
> 标签：html, validation

例如我有一个`textfield`. 该字段是必填的，只需要数字，值的长度必须是 10。当我尝试提交长度为 5 的表单时，会出现默认错误消息：`Please match the requested format`

```
<input type="text" required="" pattern="[0-9]{10}" value=""> 
```

1.  如何更改 HTML 5 表单验证错误默认消息？
2.  如果可以做到第一点，那么有没有办法创建一些属性文件并在该文件中设置自定义错误消息？

* * *

## 回答 #1

> 赞同：232
> 
> 时间：2012-09-11T07:02:52.383

这是 JavaScript 解决方案：

```
 <input type="text"
    pattern="[a-zA-Z]+"
    oninvalid="setCustomValidity('Please enter Alphabets.')"
    onchange="try{setCustomValidity('')}catch(e){}" /> 
```

设置无效输入数据时需要“onchange”事件，然后更正输入并再次发送表单。我已经在 Firefox、Chrome 和 Safari 上对其进行了测试。

**但对于现代浏览器：**

现代浏览器不需要任何 JavaScript 进行验证。这样做：

```
<input type="text"
    pattern="[a-zA-Z]+"
    title="Please enter Alphabets."
    required="" /> 
```

* * *

## 回答 #2

> 赞同：106
> 
> 时间：2012-10-08T19:23:44.113

使用 pattern= 时，它将显示您在标题属性中输入的任何内容，因此不需要 JS 只需执行以下操作：

```
<input type="text" required="" pattern="[0-9]{10}" value="" title="This is an error message" /> 
```

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2012-04-28T11:56:37.673

```
<input type="text" pattern="[a-zA-Z]+"
oninvalid="setCustomValidity('Plz enter on Alphabets ')" /> 
```

我在另一篇文章中找到了这段代码。

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2014-03-14T02:30:18.867

**HTML：**

```
<input type="text" pattern="[0-9]{10}" oninvalid="InvalidMsg(this);" name="email" oninput="InvalidMsg(this);"  /> 
```

**JAVASCRIPT：**

```
function InvalidMsg(textbox) {

     if(textbox.validity.patternMismatch){
        textbox.setCustomValidity('please enter 10 numeric value.');
    }    
    else {
        textbox.setCustomValidity('');
    }
    return true;
} 
```

`[**Fiddle Demo**](http://jsfiddle.net/patelriki13/Sqq8e/5)`

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2014-07-31T06:32:59.977

您可以通过执行以下操作删除此警报：

```
<input type="text" pattern="[a-zA-Z]+"
    oninvalid="setCustomValidity(' ')"
/> 
```

只需将自定义消息设置为一个空格

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2015-05-04T12:39:43.943

要防止浏览器验证消息出现在您的文档中，请使用 jQuery：

```
$('input, select, textarea').on("invalid", function(e) {
    e.preventDefault();
}); 
```

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2012-04-28T08:40:42.513

您可以通过约束验证 api 更改它们：http: [//www.w3.org/TR/html5/constraints.html#dom-cva-setcustomvalidity](http://www.w3.org/TR/html5/constraints.html#dom-cva-setcustomvalidity)

如果您想要一个简单的解决方案，您可以使用 civem.js，自定义输入验证错误消息 JavaScript 库在这里下载：[https](https://github.com/javanto/civem.js) ://github.com/javanto/civem.js 现场演示：http: [//jsfiddle.net/ hleinone/njSbH/](http://jsfiddle.net/hleinone/njSbH/)

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2014-01-07T17:05:39.420

setCustomValidity 让您可以更改默认验证消息。这是一个简单的使用示例。

```
var age  =  document.getElementById('age');
    age.form.onsubmit = function () {
    age.setCustomValidity("This is not a valid age.");
 }; 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2016-09-12T02:49:32.903

我现在意外找到了一种方法：您可以使用这个：data-error:""

```
<input type="username" class="form-control" name="username" value=""
placeholder="the least 4 character"
data-minlength="4" data-minlength-error="the least 4 character"
data-error="This is a custom Errot Text fot patern and fill blank"
max-length="15" pattern="[A-Za-z0-9]{4,}"
title="4~15 character" required/> 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2017-02-24T03:23:00.057

我在 Mahoor13 答案上发现了一个错误，它没有循环工作，所以我用这个更正修复了它：

**HTML：**

```
<input type="email" id="eid" name="email_field" oninput="check(this)"> 
```

**Javascript：**

```
function check(input) {  
    if(input.validity.typeMismatch){  
        input.setCustomValidity("Dude '" + input.value + "' is not a valid email. Enter something nice!!");  
    }  
    else {  
        input.setCustomValidity("");  
    }                 
} 
```

它将完美地循环运行。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2018-08-28T11:17:01.647

要为 HTML 5 验证设置自定义错误消息，

```
oninvalid="this.setCustomValidity('Your custom message goes here.')" 
```

并在用户输入有效数据使用时删除此消息，

```
onkeyup="setCustomValidity('')" 
```

希望这对你有用。享受 ;）

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2015-11-27T13:31:16.047

这是我发现的关于检查 html5 验证的各种属性的非常好的链接。

[https://dzone.com/articles/custom-validation-messages](https://dzone.com/articles/custom-validation-messages)

希望它可以帮助某人。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2016-09-21T12:58:07.573

正如你在这里看到的：

[修复输入字段后，html5 oninvalid 不起作用](https://stackoverflow.com/a/14834276/5497937)

这样对你有好处，因为当你修复错误时会消失警告消息。

```
<input type="text" pattern="[a-zA-Z]+"
oninvalid="this.setCustomValidity(this.willValidate?'':'your custom message')" /> 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2017-11-03T03:40:47.020

这在 Chrome 中对我有用

```
<input type="text" name="product_title" class="form-control" 
    required placeholder="Product Name" value="" pattern="([A-z0-9À-ž\s]){2,}"
    oninvalid="setCustomValidity('Please enter on Producut Name at least 2 characters long')" />
```

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2018-02-20T09:28:29.257

简单地说，你可以对 <form> 标签使用“novalidate”

[点击这里了解更多详情](https://stackoverflow.com/a/3094185/9384789)

# list - 从 Amazon S3 删除文件并获取对象列表

> ID：10361461
> 
> 赞同：0
> 
> 时间：2012-04-28T07:16:43.007
> 
> 标签：list, rest, amazon-web-services, amazon-s3, delete-file

我已经为经典 asp (REST) 开发了几个类

```
uploadFile.asp
deleteFile.asp
getListObject.asp 
```

测试后，我对结果感到惊讶：

1.  上传文件到服务器
2.  删除文件
3.  获取列表对象

该文件保留在列表中

我使用 cloudberry explorer 并看到该文件不存在。

可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T20:54:00.753

我找到了答案。也许这是经典asp的问题。我需要一个动态查询字符串。当我使用另一种身份验证方法并且它可以工作时。

# java - Java EE 示例不起作用

> ID：10361465
> 
> 赞同：0
> 
> 时间：2012-04-28T07:17:30.563
> 
> 标签：java, hibernate, jpa-2.0

在这个[文档](http://docs.oracle.com/javaee/6/api/javax/persistence/CollectionTable.html)中，我们可以看到用法`@CollectioTable`注释的示例

我写了同样的代码

```
@Entity public class Person {
       @ElementCollection
       @CollectionTable(name="HOMES", joinColumns = @Column(name = "PERSON_ID"))  
       @Column(name="HOME_STATE")
       protected List<String> vacationHomes;
       ...
    } 
```

*使用**Hibernate-jpa-2*版本1.0.0.Final

 *在 JBoss 4.3.0.GA 上部署

并获得异常（在部署时），即`column HOME_STATE cann't be mapped on java.util.List`

所以我将 List 更改为 ArrayList

在该应用程序部署良好之后。
但是效果不好！我执行了简单的查询，但是注释`@ElementCollection`并被`@CollectionTable` 忽略了！仅工作`@Column`注释

旧的 JBoss 版本可能有问题吗？
不知道哪里出了问题...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T12:42:11.417

作为 JPA 2.0 一部分的功能不起作用。那是因为缺少实现。在这种情况下，只有新的注解，但没有处理（hibernate-jpa-2.0-api-1.0.0.Final 只是 JPA 2.0 接口，不是实现）。

根据[发布说明](http://sourceforge.net/project/shownotes.php?release_id=614346&group_id=22866)，JBoss 4.3.0.GA 是随 Hibernate 3.2.1 一起发布的，它不是 JPA 2.0 的实现。

正如您可以从[这个问题](https://stackoverflow.com/questions/8476944/class-loading-isolation-issue-or-how-to-use-jpa2-on-jboss-5-x)中看到的那样，使用 JBoss 5 使其工作也是不可能的。如果您至少不能更新到 JBoss 6.x，那么坚持使用 JPA 1 会更容易。*

# javascript - Math.random 使用什么算法？

> ID：10361466
> 
> 赞同：4
> 
> 时间：2012-04-28T07:17:59.317
> 
> 标签：javascript, random, mersenne-twister

自从我学习计算机科学以来，每当出现随机数时，总是 Mersenne Twister。从来没有一个问题，没有选择。只是，使用 Mersenne Twister。

那么 JavaScript 的 Math.random 使用什么？似乎它应该使用 Mersenne Twister，因为它显然没有同行，但我找不到任何关于它是否使用的参考。

有谁知道它依赖什么，和/或为什么不是 MT，如果是这样的话？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-28T07:19:38.930

它可能是特定于实现的。[ECMAScript 规范](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf)不强制使用任何算法，因此 Linux JavaScript 实现很可能使用`/dev/urandom`.

# php - 使用 ajaxupload 上传图片

> ID：10361468
> 
> 赞同：0
> 
> 时间：2012-04-28T07:18:26.607
> 
> 标签：php, jquery

我正在使用[Ajax Upload](http://code.google.com/p/aspnet-mvc-dynamic-file-upload-example/source/browse/trunk/MultiFileUpload/Scripts/ajaxupload.3.5.js?r=2)通过 ajax 和 php 进行文件上传。在 js 文件中，我编写了以下代码行：

```
$(document).ready(function() {
    if ($('#uploadExists').length) {
        var btnUpload = $('#uploadExists');
        var u = new AjaxUpload(btnUpload, {
            action: '/upload',
            name: 'fname',
            onSubmit: function(file, ext){
                if (! (ext && /^(jpg|png|jpeg|gif)$/.test(ext))) {
                        //Bad file                                                                                                                                                                         
                    return false;
                }
            },
            onComplete: function(file, response){
                if (! (/(\.jpg|\.png|\.jpeg|\.gif)/.test(response))) {
                    //Bad file                                                                                                                                                                             
                    console.log(response);
                    return false;
                } else {
                    console.log(response);
            }
        }
        });
    }
}); 
```

在`/upload`url 我该怎么办？我正在写东西`PHP.`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T07:24:23.140

在 /upload（例如 /upload/index.php），您通过 $_POST 变量接收文件。尝试执行 var_dump($_POST) 以查看文件名是什么。然后您可以使用[http://php.net/manual/en/function.move-uploaded-file.php](http://php.net/manual/en/function.move-uploaded-file.php)根据需要移动文件。此脚本将从多文件上传中一次发送 1 个文件，因此您可以像处理通过标准 html 表单处理单个上传一样处理上传。

# asp.net-mvc-3 - 数据注释似乎不起作用

> ID：10361472
> 
> 赞同：0
> 
> 时间：2012-04-28T07:18:44.743
> 
> 标签：asp.net-mvc-3

我有一个带有数据注释的模型联系人

```
[Required(ErrorMessage = "Please enter a Contact Name")]
public string ContactName
  { get; set; }

[Required(ErrorMessage = "Please enter a Region")]
public string Region
  { get; set; } 
```

我将此模型作为另一个模型 ClientModel 中的列表传递

```
[Required(ErrorMessage = "Please enter a name")]
public string clientname
  {get;set;}

Public List<Contact> contact
  {get;set;} 
```

现在在我看来，我正在像这样绑定我的 ClientModel

```
@model MyContact.Models.ClientModel 
```

当我提交相应的视图时，只有 clientname 带有验证消息。有一些文本框是从中填充的，`List<Contact>`但它们不验证。我已经在布局中复制了所需的脚本，还添加了验证摘要。我不明白为什么没有发生验证。

* * *

```
these are my textboxes

<table border="0" id="tbl2" cellspacing="10" cellpadding="0">
 @for (int i = 0; i < Model.ContactList.Count; i++)
  {
  <tr>
   <td>
     @Html.CheckBox("chk1", true, new { @class = "BASESAccountTeamChkBoxItem" })
         </td>                   
   <td>
 @Html.TextBoxFor(m => m.ContactList[i].ContactName, new { style = "width:170px;"})
 @Html.ValidationMessageFor((m => m.ContactList[i].ContactName)

 </td>
<td>
@Html.TextBoxFor(m => m.ContactList[i].Region, new { style = "width:170px;" })
 @Html.ValidationMessageFor((m => m.ContactList[i].ContactName)
 </td>
 <td>
 @Html.TextBoxFor(m => m.ContactList[i].Email, new { style = "width:170px;" })
 @Html.ValidationMessageFor((m => m.ContactList[i].Email) 
 </td>
 <td>
 @Html.TextBoxFor(m => m.ContactList[i].Phone,  style = "width:170px;" })
 @Html.ValidationMessageFor((m => m.ContactList[i].Phone) 
  </td>
 <td>
  @Html.TextBoxFor(m => m.ContactList[i].Fax, new { style = "width:170px;" })
 @Html.ValidationMessageFor((m => m.ContactList[i].Fax)
     </td>
    </tr>
 }
 </table> 
```

这是将添加新行的 javascript

+添加新联系人

函数 addRow(tableID) {

```
var table = document.getElementById(tableID);

var rowCount = table.rows.length;
var row = table.insertRow(rowCount);

var colCount = table.rows[0].cells.length;

for (var i = 0; i < colCount; i++) {

    var newcell = row.insertCell(i);

    newcell.innerHTML = table.rows[0].cells[i].innerHTML;
    //alert(newcell.childNodes);
    if (table.rows[0].cells[i].innerHTML != "") {
        switch (newcell.childNodes[0].type) {
            case "text":
                newcell.childNodes[0].value = "";
                break;
            case "checkbox":
                newcell.childNodes[0].checked = false;
                break;
            case "select-one":
                newcell.childNodes[0].selectedIndex = 0;
                break;
        }
    }
} 
```

当我添加一个新行时，验证不起作用。我不知道为什么会这样而且我只在@Html.Beginform 中保留了我的观点。由于我的观点很大，我没有发布整个代码。我也有脚本。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T17:51:20.073

很久以前我也遇到过这个问题，当时我开始学习 ASP.Net MVC3。以下是您可以尝试的一些提示。

如果您也将视图（或视图的一部分）粘贴到此处，我们可能会提供更好的帮助。

1.  你的表格是否被一个

    @using(Html.BeginForm()){}

    片段？

    如果不是这样，并且您正在手动填写表单，则 MVC Javascript 验证器可能会出现意外行为。

2.  你包括

    @Html.ValidationFor()

    对于您的每个文本框？

    而不仅仅是一个 ValidationFor() 的列表？

# google-app-engine - GWT RequestFactory 入门

> ID：10361475
> 
> 赞同：1
> 
> 时间：2012-04-28T07:19:13.613
> 
> 标签：google-app-engine, requestfactory

我是 GWT 的新手。我已经完成了有关如何构建简单 StockWatcher 应用程序的教程。现在，我想从服务器加载数据。在阅读了在 GWT 中执行此操作的许多不同方法后，我决定使用 RequestFactory，因为显然它是编写可维护应用程序的最有效方式。

问题是没有关于 RequestFactory 的教程，而且当你知道时，Eclipse 很难管理，当我使用像 GWT 这样的新工具时，管理起来就更难了。

我已经设法找到 RequestFactory 所需的不同罐子，例如

1.  gwt-servlet.jar
2.  gwt-servlet-deps.jar
3.  requestfactory-server.jar

现在我收到以下错误：

```
java.lang.RuntimeException: The RequestFactory ValidationTool must be run for the com.google.gwt.sample.stockwatcher.shared.service.StockWatcherRequestFactory RequestFactory type 
```

我什至也为此找到了方向：[RequestFactoryInterfaceValidation](http://code.google.com/p/google-web-toolkit/wiki/RequestFactoryInterfaceValidation) ，但它仍然无法正常工作。

我已将 com.google.web.bindery.requestfactory.apt.ValidationTool 添加到我的构建路径中，它似乎有帮助（消息消失了），但后来我收到了不同的错误消息。

我已将源推送到[github 存储库](https://github.com/ido-ran/StockWatcherRequestFactory)。

任何帮助都会很棒。一旦我设法让它工作，我会尝试发表一篇文章，以便其他人可以使用它。

谢谢你，伊多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T10:30:55.387

我想通了。对象不是声明类的实例意味着我们尝试在对象上调用实例方法，该对象不是声明该方法的类型。

我的错误是，在我的 ServiceLocator 实现中，我错误地返回了我的域模型对象 (StockQuote) 而不是 DAO (StockQuoteDao) 的实例。这会导致 RequestFactory 代码尝试在 StockQuote 实例上调用 StockQuoteDao.getNum 方法。

我愿意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T22:23:26.050

如果您使用 Eclipse 的谷歌插件，请使用此 [http://vivagwt.blogspot.com/2011/09/requestfactory-en-gwt-24.html](http://vivagwt.blogspot.com/2011/09/requestfactory-en-gwt-24.html) 每次更改 requestcontext 时都需要重建项目

注意：如果使用 RPC，则需要 gwt-servlet.jar

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-02T13:21:29.663

`RequestFactory ValidationTool`您也可以在编译阶段使用 maven自动运行：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-compiler-plugin</artifactId>
    <version>3.1</version>
    <configuration>
        <forceJavacCompilerUse>true</forceJavacCompilerUse>
    </configuration>
    <dependencies>
        <dependency>
            <groupId>com.google.web.bindery</groupId>
            <artifactId>requestfactory-apt</artifactId>
            <version>2.6.1</version>
        </dependency>
    </dependencies>
</plugin> 
```

# c# - 如何在不保存的情况下上传实时图像

> ID：10361476
> 
> 赞同：-1
> 
> 时间：2012-04-28T07:19:25.453
> 
> 标签：c#, asp.net

我有一个实时 URL，我想下载图像而不保存它。我还想将图像上传到另一个实时 URL。我想使用线程或套接字编程对此进行编码。如何将图像文件从一台服务器保存到另一台服务器而不将其保存到本地？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T08:31:16.027

下载到 MemoryStream，倒回流，然后将流的内容上传到第二个站点。请参阅[http://odetocode.com/Blogs/scott/archive/2004/10/05/webrequest-and-binary-data.aspx](http://odetocode.com/Blogs/scott/archive/2004/10/05/webrequest-and-binary-data.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T11:54:00.290

这肯定会帮助你，

```
byte[] imgcontent;
                //Convert live images into byte array to pass it for ftp server
                HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
                WebResponse response = request.GetResponse();

                Stream stream = response.GetResponseStream(); 
```

# user-data - 如何使用 eventbrite 类获取 Eventbrite 用户的数据

> ID：10361477
> 
> 赞同：1
> 
> 时间：2012-04-28T07:19:25.610
> 
> 标签：user-data, eventbrite

如何使用 eventbrite 类获取 Eventbrite 用户的数据。

问候， 米斯特里桑迪普

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T05:04:44.450

这取决于您使用的语言以及您想要访问的数据类型。Eventbrite 的各种 API 客户端库可在其[开源项目](http://eventbrite.github.com/#libraries)页面上找到。

Eventbrite 的每个[API 请求方法](http://developer.eventbrite.com/doc/#methods)都可以作为附加到任何已[初始化](http://developer.eventbrite.com/doc/authentication)API 客户端对象的函数调用使用。

有关更多具体信息，请参阅与任何 API 客户端库捆绑的 README 文件。

# windows - 使用 DXVA2 加速通过 ffmpeg 在应用程序中播放 H.264 视频

> ID：10361481
> 
> 赞同：1
> 
> 时间：2012-04-28T07:20:32.520
> 
> 标签：windows, video, ffmpeg, h.264, dxva

我正在尝试在 Windows 应用程序中输出 H.264 视频。我对 FFMPEG 比较熟悉，并且我已经成功地让它在 SDL 窗口中播放 H.264 没有问题。不过，我真的会从使用硬件加速中受益（可能通过 DXVA2）

我正在阅读原始 H264 视频，没有容器，没有音频……只有原始视频（没有 B 帧，只有 I 和 P）。此外，我知道将使用此应用程序的所有系统都具有至少支持 VP3 的 Nvidia GPU。考虑到这组假设，我希望能走捷径，让它变得简单而不是笼统，让它适用于我的特定场景。

到目前为止，我知道我需要通过调用 ff_find_hwaccel 填充 hwaccel 成员来在编解码器上下文中设置硬件加速。我的计划是看看 Media Player Classic Home Cinema，它在解码 H.264 时使用 FFMPEG 支持 DXVA2 方面做得很好。但是，代码很大，我不确定在哪里看。我可以在 h264.c 中找到调用 ff_find_hwaccel 的地方，但我想知道我应该在哪里看。

更具体地说，我想知道为了让 DXVA2 通过 FFMPEG 工作而必须编写的最少步骤集是什么？

编辑：如果有人知道我在哪里可以找到“重要”的代码片段，我愿意查看 VLC 或其他任何东西。我刚刚提到了 MPC-HC，因为我认为它是最容易在 Windows 中编译的。

# php - 试图在我的网站上进行 ajax 调用。适用于现代浏览器（IE9、Chrome、FF）但 IE8

> ID：10361488
> 
> 赞同：0
> 
> 时间：2012-04-28T07:21:43.103
> 
> 标签：php, jquery, ajax

我正在尝试使用 ajax 调用内容的网站，主要是因为该网站有一个广播电台，我希望我网站的用户不要因为他们正在阅读其他文章或类似的东西而停止收听广播.

我正在使用 Jquery。

所以...我有这个功能：

```
$(function(){    

            // Get a reference to the content div (into which we will load content).
            var jContent = $( "#content" );

            // Hook up link click events to load content.
            $( ".enlaceajax" ).live("click", function( objEvent ){
                    var jLink =  $(this) ;

                    // Clear status list.
                    $( "#ajax-status" ).empty();

                    //Obtenemos de donde estan obteniendo el valor del enlace. ya sea que den clic en el combo box o en un enlace normal.

                    var value = jLink.attr("value");
                    var href = jLink.attr("href");
                    alert(href);
                    if(typeof value === 'undefined')
                    {
                    var linkgo = href;  
                    }
                    else {
                    var linkgo = value; 
                    }

                    // Launch AJAX request.
                    $.ajax(
                        {
                            // The link we are accessing.
                            url: linkgo,
                            // The type of request.
                            type: "GET",
                            // The type of data that is getting returned.
                            dataType: "html",

                            success: function( strData ){
                                // Load the content in to the page.

                                jContent.html( strData );
                                $('html, body').animate({ scrollTop: 0 }, 0);
                            }
                        }                           
                        );

                    // Prevent default click.
                    return( false );                    
                }
                );

        }
        ); 
```

我通过外部文件在我的网站上添加代码。文件正确加载，jQuery 也正确加载。我用 firebug 在 Firefox 上进行测试，一切正常，脚本正常工作，所有内容都加载到 div“内容”上。

但是，由于某种原因，当我在 IE8 上尝试此代码时，它不适用于 PHP 文件。当我单击 PHP 文件（类似`nota.php?nota=12345`）时，div 内容就会消失。但是，如果我单击 html 链接（如`test.html`），它可以正常工作。

我已经尝试在几个地方寻找，但我没有找到任何解决方案......而且，我是 jquery 上的真正菜鸟......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T08:29:12.613

除了“只是消失”之外，您还需要有关错误的更多详细信息。尝试加载 IE 开发者工具栏。 [http://www.microsoft.com/download/en/details.aspx?id=18359](http://www.microsoft.com/download/en/details.aspx?id=18359)

# java - 使用 AlarmManager 在特定时间之间每天轮询用户位置

> ID：10361491
> 
> 赞同：3
> 
> 时间：2012-04-28T07:22:21.323
> 
> 标签：java, android, alarmmanager

我正在使用`AlarmManager`定期轮询用户位置，这工作正常 - 现在我想为我的应用用户提供一个选项，以便他们可以通过指定时间说“晚上 8 点到晚上 10 点”来限制位置轮询。

现在我正在使用`AlarmManager.setRepeating`调度方法，但我无法配置我的警报服务，使其每天运行，但在特定小时内运行。我已经知道如何`AlarmManager`在一天中的特定时间安排重复任务，但如何设置结束时间是我正在寻找的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T07:32:40.137

您不能`AlarmManager`确切地告诉这样做，但您可以检查何时调用您的服务以查看它是否在指定的时间内。如果是，那么您照常进行，如果不是，则重新安排警报以在下一个轮询周期开始时开始。

# php - 通过 PHP 为 utf-8 字符导出 CSV

> ID：10361492
> 
> 赞同：3
> 
> 时间：2012-04-28T07:22:26.923
> 
> 标签：php, excel, csv, header

我需要用 php 导出一个 .csv 文件。我使用下面的代码来做到这一点：

```
header('Content-Encoding: UTF-8');
header('Content-type: application/csv; charset=UTF-8');
header("Content-Disposition: attachment; filename=$fn");
echo "\xEF\xBB\xBF"; // UTF-8 BOM
print($csv); 
```

`$csv`包含一些波斯字符。当我用 ms excel 打开导出的文件时，显示错误的字符。当我打开带有记事本字符的文件时，显示正确。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-29T10:55:03.280

这就是我的做法。

```
header('Content-Encoding: UTF-8');
header('Content-type: text/csv; charset=UTF-8');
header("Content-Disposition: attachment; filename=file.csv");
header("Pragma: no-cache");
header("Expires: 0");
header('Content-Transfer-Encoding: binary');
echo "\xEF\xBB\xBF"; 
```

早些时候我得到了垃圾字符，现在导出了正确的数据。

# c++ - 在 QListWidget 中动态插入项目

> ID：10361496
> 
> 赞同：0
> 
> 时间：2012-04-28T07:23:58.283
> 
> 标签：c++, sql, qt

我想做的是从sql数据库中获取输入并将所有这些数据放在QListWidget中，但我不知道会有多少，我还需要知道点击时点击了哪个id .

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T07:37:35.330

如果 str 是您的 sql 查询中的标签并且 n 是 id 则：

创建您的项目：

```
QListWidgetItem* i = new QListWidgetItem(str); 
```

使用以下命令设置 ID：

```
i->setData(Qt::UserRole, n); 
```

并将其添加到小部件：

```
myListWidget->addItem(i); 
```

然后当它点击你会得到信号

```
void QListWidget::itemActivated ( QListWidgetItem * item ) [signal] 
```

将此连接到您班级中的一个插槽并使用

```
item->data(Qt::UserRole).toInt(); 
```

但这也是使用 QTableView 和 QSqlQueryModel 的好时机。

# android-emulator - 无法在模拟器上从 eclipse 运行 .apk

> ID：10361497
> 
> 赞同：0
> 
> 时间：2012-04-28T07:24:11.437
> 
> 标签：android-emulator

当我运行我的 android Helloworld 应用程序时，它不会在模拟器上运行并卡住以下消息。请指导我如何解决这个问题。

```
[2012-04-28 12:45:56 - HelloAndroid] ------------------------------
[2012-04-28 12:45:56 - HelloAndroid] Android Launch!
[2012-04-28 12:45:56 - HelloAndroid] adb is running normally.
[2012-04-28 12:45:56 - HelloAndroid] Performing com.demo.HelloAndroidActivity activity launch
[2012-04-28 12:45:56 - HelloAndroid] Automatic Target Mode: using existing emulator 'emulator-5554' running compatible AVD 'Hello'
[2012-04-28 12:45:56 - HelloAndroid] Uploading HelloAndroid.apk onto device 'emulator-5554'
[2012-04-28 12:45:57 - HelloAndroid] Installing HelloAndroid.apk... 
```

以上是我从 Eclipse 窗口运行程序时出现的控制台日志。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T08:06:38.313

看起来不错。您可能会收到“应用程序已退出”或类似的信息吗？如果是，那么您的项目有问题需要修复。

# mysql - 关于我的业务逻辑的数据库设计

> ID：10361504
> 
> 赞同：3
> 
> 时间：2012-04-28T07:24:43.727
> 
> 标签：mysql, database-design, relational-database

我正在构建一个包含以下业务逻辑的发票应用程序。

> **a)**为客户下一个新订单。（订单是一组三个相关的组件，估价、发票和采购订单）
> 
> **b)**下订单后，可以生成新的估价。一个订单将只有一个估价。（估价由项目详细信息组成）
> 
> **c)**参考订单的估计。可以生成发票。发票有资格享受价格折扣。除了项目详细信息外，发票还包含一些费用。订单只能包含一张发票
> 
> **d)**参考订单的发票，可以生成PurchaseOrder。PurchaseOrder 包含有关供应商采购的项目信息。一个订单可以包含多个 PurchaseOrder。

这是我想出的数据库表设计。

![在此处输入图像描述](../Images/a17763bc1848482b0dbef5e8b1a64634.png)

虽然一切看起来都不错，但我很难决定将属于特定估计、发票或采购订单的项目列表存储在哪里。

我曾想过几个解决方案。

> **方法A：**为每个项目列表创建不同的表。（估计，发票和采购订单）
> **表：** `estimate_item`，，，`invoice_item`。`purchaseorder_item`（此表包含类似于上图中的 order_item 的列）。
> **问题：**这种方法的问题是所有三个表都由存储相同信息的相同列组成，唯一的区别是将存储的外键。
> 
> **方法 B：**创建一个项目列表表`order_item`
> **tablename：** `order_item`
> **问题：**不确定在该表中存储什么作为外键，因为外键可以来自三个不同的表。我想到了几种处理该表中外键的方法，如下所示。
> 
> **1）foreignKey 表参考列：**类型（示例值：估计、发票、采购订单） foreignKey 列：type_id（由三个表中的任何一个的 foreignKey 组成）
> **问题：**我正在使用列名的命名约定，例如以结尾的列名`tablename_id`定义外键。这种方法违反了规则。
> 
> **2) foreignKeyColumn:** `order_id` , `estimate_id`, `invoice_id`, `purchaseorder_id`.
> **问题：**定义了不必要的外键列。

我想知道我应该如何将外键存储在`order_item`表中，以便它识别它所属的订单和估计/发票/采购订单。

表的关系是：

> `id`是所有表的主键

```
table name: order relates to (contact, estimate, invoice, shipment) tables.
column name: contact_id (foreign key(referring to id column of the contact table)).
column name: estimate_id (foreign key(referring to id column of the estimate table)).
column name: invoice_id (foreign key(referring to id column of the invoice table)).
column name: shipment_id (foreign key(referring to id column of the shipment table)).

tablename: purchaseorder (this have one to many relationship with order table)
column name: order_id (foreign key(referring to id column of the order table)).
column name: contact_id (foreign key(referring to id column of the contact table)). 
```

问题是关于如何在 order_item 表中存储外键。

谢谢你。

**更新1：**

请注意，每张桌子`estimate`都有自己的物品`invoice` ，`purchaseorder`彼此没有关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T07:33:33.527

嗨，我不确定这种关系是如何发生的。例如，您有 'estimate' 指向 'order item'，但我看不出您必须使用什么键才能进行连接（或查找）。作为另一个“订单”指向“估计”，但是这两个是如何加入的？我没有看到这两个实体都具有的任何共享属性。

我假设'id'只是使每个特定表中的行唯一的东西，但不是对应用程序有价值的id。所以，我认为您需要将estimate.reference number 带入“order item”表中。这只是一个粗略的评论。

另外，如果首先列出键，是否会为清楚起见。因此，在“订单项”中，您将属性“订单 ID”（似乎是一个 FK）埋在其他属性列表的末尾。使这难以阅读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T08:11:58.607

如果我理解正确，与订单相关联的每个文档（即`estimate`和`purchaseorder`/或`invoice`）可能包含不同的项目列表。

如果是这种情况，我可能会`Documents`按照以下几行创建一个表：

```
CREATE TABLE Documents (
  DocumentId   INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
  OrderId      INT NOT NULL,
  -- you can move any fields common to all document types here
  -- e.g. date created, reference #, etc.
  FOREIGN KEY (OrderId) REFERENCES order (id)
); 
```

然后您的`order_item`、`estimate`和`purchaseorder`表`invoice`都在此表中引用它们的关联条目：

```
ALTER TABLE [tablename]
  ADD COLUMN DocumentId INT NOT NULL,
  ADD FOREIGN KEY (DocumentId) REFERENCES Documents (DocumentId)
); 
```

这就是你所追求的吗？

# python - WxPython使用选项卡按钮在控件之间切换

> ID：10361505
> 
> 赞同：0
> 
> 时间：2012-04-28T07:24:58.473
> 
> 标签：python, tabs, wxpython

我有一个包含不同类型控件的窗口。

```
class FindReplaceWindow(wx.MiniFrame):
  def __init__(self, parent):
    Style = wx.DEFAULT_MINIFRAME_STYLE|wx.SYSTEM_MENU|wx.CLOSE_BOX
    super(FindReplaceWindow, self).__init__(parent, -1, 'Find and Replace', style = Style)
    self.BackgroundColour = wx.WHITE
    self.MaxSize = wx.Size(400,300)
    self.MinSize = self.MaxSize
    self.CenterOnParent()
    self.LabelFind = wx.StaticText(self, label = 'Find')
    self.LabelReplace = wx.StaticText(self, label = 'Replace')
    self.LabelTransparency = wx.StaticText(self, label = 'Transparency')
    self.TextFind = wx.TextCtrl(self, size = (350,20), style = wx.TE_PROCESS_TAB)
    self.TextReplace = wx.TextCtrl(self, size = (350,20), style = wx.TE_PROCESS_TAB)
    self.SearchDirection = wx.RadioBox(self, -1, 'Search Direction',
     size = (110,-1), choices = ('Up','Down'), style = wx.RA_VERTICAL)
    self.SearchMode = wx.RadioBox(self, -1, 'Search Mode',
     size = (110, -1), choices = ('Text','Regex'), style = wx.RA_VERTICAL)
    self.Flags = wx.CheckListBox(self, -1, wx.DefaultPosition,
     (95,-1), ('Ignore Case','Whole Word(s)','Selection Only'), wx.VERTICAL)
    self.ButtonFind = wx.Button(self, wx.ID_FIND, 'Find')
    self.ButtonReplace = wx.Button(self, wx.ID_REPLACE, 'Replace')
    self.ButtonReplaceAll = wx.Button(self, wx.ID_REPLACE_ALL, 'Replace All') 
```

如何使用 Tab 按钮在它们之间切换？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T07:47:23.970

看一下 wx.TAB_TRAVERSAL 标志。这里有一些示例代码（它还包括另一种方法）：[http ://wiki.wxpython.org/Getting%20Started#How_to_get_tabs_to_work](http://wiki.wxpython.org/Getting%20Started#How_to_get_tabs_to_work)

# c++ - 枚举和枚举类的链接兼容性

> ID：10361507
> 
> 赞同：6
> 
> 时间：2012-04-28T07:25:12.153
> 
> 标签：c++, linker, c++11, abi, enum-class

假设有一个使用枚举类的 C++11 API：

```
// api.hpp
enum class E {A, B, C};
void f(E);
...

// api.cpp
void f(E e)
{
    if (e == E::A)
       ...
} 
```

现在假设我想使用这个 API，但我没有 C++11 编译器。所以我：

*   修改`api.hpp`枚举类并将其更改为常规枚举。
*   编写一些包含修改后的代码代码`api.hpp`并正常使用API​​（例如调用`f`）。
*   使用我的非 C++11 编译器编译此代码，并将其链接到使用 C++11 编译器编译的 API 实现（使用未修改的`api.hpp`）。

这似乎适用于 GCC，但总的来说它是安全的，还是我在玩火（违反 ODR 等）？

假设这两个编译器在其他方面是链接兼容的，那么只有 enum 与 enum 类有问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T09:40:20.273

就像 ildjarn 所说，这是未定义的行为。这实际上可能在实际实现中失败的原因是普通的 C++03 枚举没有固定的底层类型。虽然您的枚举类类型*始终*将“int”作为其基础类型，但相应的 C++03 枚举可能将“short”作为其基础类型，从而使代码与布局不兼容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T07:54:15.967

您将违反[单一定义规则](http://en.wikipedia.org/wiki/One_Definition_Rule)(§3.2/5)。结果：未定义的行为。

# java - 停止sql注入

> ID：10361510
> 
> 赞同：2
> 
> 时间：2012-04-28T07:25:36.147
> 
> 标签：java, jdbc, sql-injection

如何防止sql注入我使用下面的代码登录

```
con = DriverManager.getConnection("", "", "");

Statement  statement = con.createStatement();

ResultSet  rs= statement.executeQuery("SELECT email,pass FROM db_pass where email='" + email + "'and pass='" + password + "'"    );

if (rs.next()) {

    String a=rs.getString(1);
    String b=rs.getString(2);
    rs.close(); 
```

它工作正常，但是当它输入 (nitin' OR '1'='1) 时，用户无需输入有效密码即可访问

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-28T07:26:52.480

使用`PreparedStatement`. [您可以在http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)中找到一个示例

为防止[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)，所有查询都应参数化，并且永远不应使用字符串连接来创建动态 SQL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T07:36:00.010

使用 ORM（对象关系映射器）可能是个好主意。ORM 通常具有针对 SQL 注入的内置防御。

防止 sql 注入的另一个好方法是使用白名单（即可接受的用户输入列表）。当您收到用户的输入时，检查它是否在白名单中；如果不是拒绝它。

就您而言，您希望拥有可能的用户名白名单和可能的密码白名单；您可以使用正则表达式描述用户名白名单和密码白名单。不过，不要自制自己的正则表达式，网上有很多预先构建的正则表达式。您不想自己制作，因为它的公式很容易出错，从而使其容易受到 SQL 注入的影响。

希望这有帮助，祝你好运！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-28T07:30:23.687

一种典型且简单的方法是比较散列操作（md5 或 sha1）的结果。然后查询看起来像

```
SELECT email, pass from db_pass where md5(email)='" + md5(email) + "' and md5(pass)='" + md5(password) + "'" 
```

但是，这意味着您有一个可用的 md5 函数以您正在开发的语言，并且您的 DB 系统也有一个可用的 md5 函数（例如，mysql 有）。请注意，这并不会使 SQL 注入完全不可能，而是对您给出的示例提供了很好的基本保护。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-28T07:40:27.403

你需要转换你的字符串，如果你的字符串是 abc'，如果你的字符串像''，你应该把字符串 abc'' 给 sql。

# python - 项目不会显示

> ID：10361511
> 
> 赞同：0
> 
> 时间：2012-04-28T07:26:04.913
> 
> 标签：python, django

网址.py

```
from item.models import ItemCategory, Item
from django.conf.urls.defaults import patterns, include, url

urlpatterns = patterns('order.views',
    url(r'^$', 'index'),
    url(r'category/$', 'category'),
    url(r'(?P<cat_id>\d+)/$', 'item'),
) 
```

视图.py

```
from django.http import HttpResponse
from item.models import ItemCategory, Item
from django.shortcuts import render_to_response, get_object_or_404

def item(request, cat_id):
    item_list = get_object_or_404(ItemCategory, pk=cat_id)
    return render_to_response('order/item.html', {'item_list':item_list}) 
```

项目.html

```
{% if item_list %}
    <h3>{{ item_list.name }}</h3>
    <ul>
        {% for item in item_list.choice_set.all %}
            <li>{{ item.id }} - {{ item.item }}</li>
        {% endfor %}
    </ul>
{% endif %} 
```

鉴于上述代码，它应该显示：

### 第一类

```
- item 1
- item 2 
```

但它只是这样显示：

### 第一类

它不显示项目

这可能有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T07:56:49.797

您是否从教程中复制了此代码？连接模型是`choice_set`故意调用的吗？如果你的`Item`模型有`ForeignKey(ItemCategory)`，那么它应该是`item_set`。但这只是一个纯粹的猜测。

在它返回之前，我会在视图中放置一条调试线，并检查该项目是否在choice_set 中具有这些选项。如果你有一个调试器并且可以看到真正发生的事情而不是阅读代码和猜测，那么问题就很容易解决。

```
def item(request, cat_id):
    item_list = get_object_or_404(ItemCategory, pk=cat_id)
    import pdb; pdb.set_trace()
    return render_to_response('order/item.html', {'item_list':item_list}) 
```

或更好的 IPDB（您必须使用 easy_install 或 pip 安装它）

```
def item(request, cat_id):
    item_list = get_object_or_404(ItemCategory, pk=cat_id)
    import ipdb; ipdb.set_trace()
    return render_to_response('order/item.html', {'item_list':item_list}) 
```

在调试器中，编写变量并检查它是否符合您的预期：

```
>>> item_list
[some output]
>>> item_list.choice_set.all()
[some output] 
```

（题外话）有 django_annoying 应用程序有用的快捷方式：

```
from annoying.decorators import render_to

@render_to('order/item.html')
def item(request, cat_id):
    item_list = get_object_or_404(ItemCategory, pk=cat_id)
    return {'item_list':item_list} 
```

# itext - 使用飞碟/iText 进行图像渲染

> ID：10361514
> 
> 赞同：1
> 
> 时间：2012-04-28T07:26:14.423
> 
> 标签：itext, flying-saucer

我正在尝试从包含 html 代码的 Java 字符串生成 pdf 文档。我使用“Freemarker”作为模板引擎来生成 html 内容，然后使用“Flying-Saucer”将生成的 html 转换为 pdf。我的问题是生成的 pdf 中没有呈现图像。关于我如何生成的确切细节如下：

```
import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.io.OutputStream;
import java.io.OutputStreamWriter;
import java.io.Writer;
import java.util.List;

import org.xhtmlrenderer.pdf.ITextRenderer;

import com.google.inject.Inject;
import com.google.inject.Singleton;
import com.lowagie.text.DocumentException;

import freemarker.template.Configuration;
import freemarker.template.DefaultObjectWrapper;
import freemarker.template.SimpleHash;
import freemarker.template.SimpleSequence;
import freemarker.template.Template;
import freemarker.template.TemplateException;

@Singleton
public class FlyingSaucerTaxInvoicePdfPrinter implements ITaxInvoicePdfPrinter {
    private final Configuration m_cfg;

    @Inject
    public FlyingSaucerTaxInvoicePdfPrinter() {
        // TODO: Following should be singletons and injected
        m_cfg = new Configuration();
        m_cfg.setObjectWrapper(new DefaultObjectWrapper());
        m_cfg.setClassForTemplateLoading(this.getClass(), "/");
    }

    private Template getTemplate() throws IOException {
        return m_cfg.getTemplate(PdfResources.TAX_INVOICE_TEMPLATE);
    }

    @Override
    public void printToPdf(TaxInvoiceUiPb taxInvoice, OutputStream pdfOutputStream) {
        OutputStream htmlOuputStream = null;
        try {
            htmlOuputStream = new ByteArrayOutputStream();
            printHtml(htmlOuputStream, taxInvoice);
            generatePDF(htmlOuputStream, pdfOutputStream);
        } catch (Exception e) {
            throw new LoggedRuntimeException(e);
        } finally {
            try {
                htmlOuputStream.close();
            } catch (IOException e) {
                throw new LoggedRuntimeException(e);
            }
        }
    }

    private void generatePDF(OutputStream htmlOuputStream, OutputStream pdfOutputStream)
                    throws DocumentException, IOException {
        try {
            ITextRenderer renderer = new ITextRenderer(30.666f, 20);
            String html = htmlOuputStream.toString();
            logHtml(html);
            renderer.setDocumentFromString(html);
            renderer.layout();
            renderer.createPDF(pdfOutputStream);
        } finally {
            pdfOutputStream.close();
        }
    }

// Some methods not shown as irrelevant
} 
```

生成的 html（仅显示相关部分）是：

```
<body>
<div class="main" background="images/invoice-bg.jpg">
    <img src="images/invoice-bg.jpg"></img>
    <div class="header">
    <div class="logo"><img src="images/invoice-logo.jpg" alt="" border="0" /></div>
    <div class="heading">booking invoice</div>
    </div>
    <div class="clear"></div>
</div>
</body> 
```

此代码作为部署在 Tomcat 上的 War 运行。作为 tree 命令的输出（在 WEB-INF 中运行），War 中图像的位置是：

```
|-- classes
|   |-- com
|   |   `-- ilodge
|   |       `-- pmsServerWar
|   |           |-- PmsServerWarListener.class
|   |           `-- PmsServerWarServletModule.class
|   |-- images
|   |   |-- invoice-bg.jpg
|   |   |-- rupees-icon-total.png
|   |   |-- thank-you.jpg
|   |   |-- total-bold-rupee.png
|   |   `-- ul-bor.jpg
|   |-- taxInvoice.css
|   |-- taxInvoiceFooter.ftl
|   |-- taxInvoice.ftl
|   `-- test.ftl
|-- lib
|   |-- addressServer-1.0-SNAPSHOT.jar
|   |-- addressUiProtobuf-1.0-SNAPSHOT.jar
|   `-- xml-apis-1.3.03.jar
`-- web.xml 
```

为简洁起见，我截断了输出。请帮忙。

谢谢和问候， 罗希特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-01T16:32:36.473

尝试设置 baseUrl 参数。

我遇到了同样的问题 - 我正在传递 html 并且没有在 pdf 中获取图像（或 css）。我用了和你一样的东西：

```
renderer.setDocumentFromString(html); 
```

该方法还可以采用基本 url 参数：

```
renderer.setDocumentFromString(content, baseUrl) 
```

其中 baseUrl = 根文件夹（在我的情况下，它是一个 Web 应用程序，所以它是“http://server:port/app”）。它似乎像基本 href 一样工作 - 相对路径建立在 baseUrl 上。一旦我添加了它，blammo - 图像和 css。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T13:50:13.280

一个可能的问题是您在 html 代码中使用了相对 URL。尝试使用绝对 URL，而不是相对 URL。

# c++ - C++ 中的 3.5 和 3.5f 是否相同？

> ID：10361515
> 
> 赞同：5
> 
> 时间：2012-04-28T07:26:28.113
> 
> 标签：c++, floating-point, number-formatting

> **可能重复：**
> [float 与 float 文字比较的奇怪输出](https://stackoverflow.com/questions/1839422/strange-output-in-comparision-of-float-with-float-literal)
> [为什么比较 double 和 float 会导致意外结果？](https://stackoverflow.com/questions/6722293/why-comparing-double-and-float-leads-to-unexpected-result)

在下面的代码中，我期望答案是“不等于”，因为默认情况下`3.5` 应该`double`在 C++ 中，但结果是“等于”。

`float a=3.5f`声明和有什么区别`float a=3.5`？

```
#include<iostream>
using namespace std;

int main()
{
    float a=3.5;
    if(a==3.5)  
        cout<<"equal"<<endl;
    else
        cout<<"Not equal"<<endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-28T07:29:31.077

不。

的类型`3.5`是`double`，而类型`3.5f`是浮动的。因此，**不能保证**它们的值相等。

```
#include<iostream>

void f(double) { std::cout << "it is double" << std::endl; }
void f(float)  { std::cout << "it is float" << std::endl; }

int main()
{
   f(3.5);
   f(3.5f);
} 
```

[输出](http://ideone.com/V8diH)：

```
it is double
it is float 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T07:29:33.430

浮点数不是一个确切的数字。将它们与 == 进行比较绝不是一个好主意。原因如下：[每位计算机科学家都应该了解浮点运算](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)

# android - 在 iPhone/Android 上的数据库中存储机密信息

> ID：10361522
> 
> 赞同：1
> 
> 时间：2012-04-28T07:27:22.777
> 
> 标签：android, iphone, database

我需要在 iPhone 和 Android 上的数据库中存储几千个文本/数字组合。虽然在任一设备上创建数据库都没有问题 - 我想知道在这些数据库中实际制作数据的“机密性”如何？

我想避免的是任何人都“破解”了包含所有条目的完整数据库。

虽然我不在乎是否可以通过任何方式获得某些条目。

从数据库中提取所有数据应该尽可能困难。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T08:11:44.460

用户387184，

对于 iOS 上最关键的数据，我个人建议使用 Keychain API（可以在[Security](http://developer.apple.com/library/ios/#documentation/Security/Reference/SecurityFrameworkReference/_index.html)框架中找到。Keychain 是一种加密存储，可用于存储帐户、密码、敏感数据。

但是，如果您希望加密整个数据库，您应该查看 Apple 的[数据保护 API](https://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/AdvancedAppTricks/AdvancedAppTricks.html)，它允许您使用 NSFileProtectionComplete 标志轻松加密整个数据库。

至于 Android，我不确定是否有用于此类操作的公开 API。您可以查看[Android Encryption](http://source.android.com/tech/encryption/android_crypto_implementation.html)，但它适用于 Android 3.0 及更高版本的 Android 设备。

Android 的另一种方法是使用使用简单 PIN 码加密的存储，并提示用户在每次后续启动应用程序时输入密钥（但从用户体验的角度来看，这不是一个好的解决方案）。

# php - 在 PHP 中使用 gettext_noop 函数有什么用？

> ID：10361528
> 
> 赞同：1
> 
> 时间：2012-04-28T07:28:33.213
> 
> 标签：php, windows, localization, internationalization, gettext

我的问题是关于 gettext 本身，我有点看不到 gettext_noop 函数的使用。我知道它的作用，但有什么好处？

如果我用 gettext_noop() 标记文本，它不会被翻译，但 xgettext 可以识别它，并且当我将字符串作为变量输出时会发生翻译。

这是因为内存使用，还是什么？在 PHP 中使用它更好，还是只使用 _()（或 gettext()）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:13:03.687

The [Gettext manual](http://www.gnu.org/software/gettext/manual/html_node/Special-cases.html#Special-cases) covers nicely the way `gettext_noop` may be useful when programming in C.

In PHP, however, it doesn't seem to make sense to do:

```
$options = array( gettext_noop("one string"),
           gettext_noop("another string") ,);
echo _($options[0]); 
```

It should be perfectly ok to do:

```
$options = array( _("one string") ,
           _("another string"), );
echo $options[0]; 
```

Since PHP is a dynamically typed language, we'd need to be a lot more creative to find a good use for `gettext_noop`. Most likely, you won't need it in PHP.

That's probably the reason gettext_noop doesn't exist in a vanilla installation and doesn't even figure in [PHP's manual](http://mx2.php.net/manual/en/ref.gettext.php).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-10T13:24:09.053

# 一个用例`gettext_noop`

它在某些情况下很有用。例如，假设您有一个表单下拉列表的允许值数组：

```
$allowed_values = ["red", "orange", "blue"]; 
```

在表单中，您希望用户看到已翻译的值，但请求提交未翻译的值：

```
<select name="color">
<?php foreach ($allowed_values as $allowed_value) : ?>
    <option value="<?= htmlspecialchars($allowed_value) ?>">
        <?= htmlspecialchars(_($allowed_value)) ?>
    </option>
<?php endforeach ?>
</select> 
```

不幸的是，`xgettext`找不到可翻译的字符串，因为它们没有被标记。您可以像这样标记它们：

```
$allowed_values = [_("red"), _("orange"), _("blue")]; 
```

但是现在您以后无法检索未翻译的值。

相反，您可以这样做：

```
$allowed_values = [gettext_noop("red"), gettext_noop("orange"), gettext_noop("blue")]; 
```

现在，只要您实施此答案的其余部分，一切都可以按预期工作。

# 如何实施`gettext_noop`

默认情况下， PHP 实际上并不包含`gettext_noop`。要自己实现它，请添加以下 PHP：

```
function gettext_noop($string)
{
    return $string;
} 
```

并在`xgettext`命令行上调用 ，包括以下`--keyword`参数：

```
xgettext --keyword=gettext_noop ... 
```

# sql - SQL Azure 隐私问题

> ID：10361535
> 
> 赞同：1
> 
> 时间：2012-04-28T07:29:40.877
> 
> 标签：sql, azure, privacy

我刚开始了解 SQL Azure，与一些潜在客户交谈过，他们说由于客户信息的私密性，他们没有选择 Azure。

阅读有关 Azure 的信息，它有防火墙以防止未经授权的访问。

我只是想知道还有什么其他方式可以推广 Azure，这样可能想要使用它的客户就不会担心隐私问题。

另外据我了解，Azure 支持混合解决方案，您可以在其中本地或远程存储数据？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T09:08:17.877

SQL Azure 是一项公共服务，数据存储在云提供商设施的某处。通过包括防火墙和哨兵在内的所有安全措施，数据仍处于零客户控制之下。

因此，提供商可能会进行一些备份并将其存储很长时间，而您可能希望尽快销毁数据，但无法完成。

这也是技术上*可能发生*的事情（不是我说的可能）：

*   提供商可能会处理未损坏的硬盘
*   错误可能导致授权失败并允许未经身份验证的用户（因为您看到，您无法控制提供商应用的软件更新）
*   提供者员工可能被贿赂并复制数据

所以如果用户真的想要隐私（或者法律规定他处理的数据必须按照一定的要求进行处理）或者他想要实际控制数据的处理方式，那么像 SQL Azure 这样的公共存储服务在技术上对他来说是不适用的. 你试图将 Azure 推销为提供与本地设施相同级别的控制和安全性，这是在欺骗客户。

悲伤但真实，*你不能对编译器撒谎*。在公共存储服务中没有控制您的数据这样的事情。负面结果的风险被认为相当低，但它们确实存在并且是真实的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T07:49:49.650

是的，[Azure 服务总线](https://www.windowsazure.com/en-us/home/features/service-bus/)具有连接私有云和公共云的功能。将敏感数据保存在本地可能是您的客户想要/需要将部分基础架构推送到云端的原因，尽管要确保这种分离清晰需要付出一些努力，而且我不只是在谈论技术。

也就是说，向尚未为云做好准备的客户营销 Azure 很可能会让您失去整个交易，因此请确保您没有推动*他们*尚未准备好应对的任何事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T11:56:52.657

一个很好的起点是[Windows Azure 信任中心](https://www.windowsazure.com/en-us/support/trust-center/)，以了解 Windows Azure 隐私和安全性。

ISV 开发人员社区博客上还有一个由 7 部分组成的 Windows Azure 安全最佳实践系列。[第 1 部分](http://blogs.msdn.com/b/usisvde/archive/2012/03/07/windows-azure-security-best-practices-part-1-the-challenges-defense-in-depth.aspxa)在帖子末尾有指向其余条目的链接。

Microsoft 的数据中心由[Global Foundation Services](http://www.globalfoundationservices.com/)运营，它拥有自己的一套[安全性和合规性](http://www.globalfoundationservices.com/security-and-compliance.aspx)。在那里你会找到一个[数据中心参观视频](http://cdn.globalfoundationservices.com/videos/Video_Data_Center_Long_Tour_8000k.wmv)

# xhtml - 在 xhtml 中嵌入视频

> ID：10361538
> 
> 赞同：0
> 
> 时间：2012-04-28T07:30:03.963
> 
> 标签：xhtml, blogs, video-embedding

我正在尝试在 tumblr 中自定义一个主题，以便它在博客中嵌入完整的视频，但我似乎做不到......

这是代码中引用视频的实例

```
.video-post .video {margin-bottom:1.5em;}

{block:Video}
<div class="content video-post">
  <div class="video">{Video-500}</div>

  {block:Caption}<div class="caption">{Caption}</div>{/block:Caption}
</div>
{/block:Video} 
```

我尝试了一些基本的东西，比如删除 -500 和/或添加 height="100%"; width="100%" 在某些地方，但它不起作用..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T20:10:19.893

请参阅[http://webdesignerwall.com/tutorials/css-elastic-videos](http://webdesignerwall.com/tutorials/css-elastic-videos)或[http://fitvidsjs.com/](http://fitvidsjs.com/)

# c# - 获取集合中的对象数量

> ID：10361540
> 
> 赞同：0
> 
> 时间：2012-04-28T07:30:27.317
> 
> 标签：c#, mongodb

在 C# 中，如何查找特定集合中的对象数？就像集合中的所有对象一样。我使用 MongoCursor 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T07:34:04.767

```
int itemCount = yourCollection.Count; 
```

# android - 如何为 Android 创建一个实时得分手应用程序？

> ID：10361541
> 
> 赞同：0
> 
> 时间：2012-04-28T07:30:29.873
> 
> 标签：android, live

我正在开发一个 android 应用程序，我将在其中提供一个按钮，当用户单击该按钮时，他们将获得足球比赛的实时比分更新。

是否有任何教程或任何可用的开源代码

我正在尝试实现一些类似于下面给出的图像：

![在此处输入图像描述](../Images/cc171238b4460bde190492adcb3df94a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T08:29:54.070

您所需的任务非常简单。我建议你使用 android 开发者网站来学习 android 编程所涉及的基础知识和工具栈。在此过程的早期，您会遇到“视图”教程，其中概述了您需要做的大约一半（以漂亮的格式显示分数）。

我建议您首先运行它的这一部分（只是一个带有测试分数的漂亮显示），然后使用 Android 或 apache HTTP 类创建网络请求并从服务器获取数据应该是一个相当简单的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T08:03:35.380

您必须以某种方式从服务器检索当前分数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-06T14:53:44.373

例如，您基本上需要一个可以为您提供 xml 格式的实时数据的站点。有提供这个的网站。当然，他们不会免费提供。可能您会免费获得一些较小的联赛供您测试。如果您使用 c# 作为脚本语言，您可以使用 xml 序列化或 XmlDocument 简单地读取 xml。

我做了一个简单的谷歌搜索，我找到了 www.thegamecontriver.com 的这篇文章，他们使用统一创建了一个 Live Standing 应用程序。也许你会发现这很有用。当然，使用相同的方法来处理 Live Scores 并不难。

您可以在此处找到帖子的链接 [实时排名应用程序教程](http://www.thegamecontriver.com/2014/12/how-to-make-live-football-soccer-score.html)

# c - 使用 pthread 模拟发送和接收

> ID：10361543
> 
> 赞同：-1
> 
> 时间：2012-04-28T07:30:37.020
> 
> 标签：c, synchronization, pthreads

我正在尝试使用 pthread 模拟发送和接收功能。我确实实现了以下代码。但有时它会挂起或产生错误的结果。

```
int g_sender,g_receiver; //global variables to keep track of the sender and receiver
void send(double ** data,int sender,int receiver, int size[],int block_size){
    int i;
    pthread_mutex_lock(&lock);  
    for (i=0;i<size[0];i++)
            memcpy(sharedA[i],data[i],size[1]*block_size);
    g_sender = sender;
    g_receiver = receiver;
    sem_wait(&sem);
    pthread_mutex_unlock(&lock);

}

void receive(double ** data, int sender,int receiver, int size[],int block_size){
        int i;
    while(!(sender==g_sender && receiver==g_receiver));
    for(i=0;i<size[0];i++)
        memcpy(data[i],sharedA[i],size[1]*block_size);
    g_sender =-1;
    g_receiver = -1;
    sem_post(&sem);
} 
```

你认为我在这里错过了什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T08:02:01.540

很多 ：）

*   持有锁的目的是什么？
*   持有锁时永远不要等待信号量
*   始终检查库函数的返回值。特别是这些 `sem_`功能是可中断的，您**必须**检查是否发生了中断`sem_wait`
*   如果您对 POSIX 线程没有那么丰富的经验，请不要使用 `sem_t`. 请改用互斥锁和条件变量。它们是更适合应用程序代码的更高级别的接口。

# java - 如何在android中将数据从一个视图传递到另一个视图？

> ID：10361550
> 
> 赞同：-1
> 
> 时间：2012-04-28T07:31:40.267
> 
> 标签：java, android

我有两个名为：`first_view`和`second_view`.

第一个视图由一个按钮和一个可编辑的文本视图组成。第二个视图由单个文本视图组成。

在我的第一个视图中，我想在可数据文本视图中放置一个数字。当我单击按钮时，它应该在第二个视图中显示数字。

如何为这两个视图编写 Java 类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T07:48:26.907

如果在同一个活动中有两个视图，你可以这样做

```
 Button btn;
    EditText txtInput;
    TextView txtShow;
    //btn=firstView.findViewWithTag(tag)
    btn=firstView.findViewById(R.id.**);
    txtInput=firstView.findViewById(R.id.**);
    txtShow=secondView.findViewById(R.id.**);

    btn.setOnClickListener(new OnClickListener(){

        @Override
        public void onClick(View v) {

            String input=txtInput.getText().toString();
            txtShow.setText(input);
        }

    }); 
```

如果您有两个活动：

```
Button btn;
EditText txtInput;
String VALUE_KEY="show";
private void test()
{

    btn=(Button)findViewById(R.id.**);
    txtInput=(Button)findViewById(R.id.**);

    btn.setOnClickListener(new OnClickListener(){

        @Override
        public void onClick(View v) {

            String input=txtInput.getText().toString();
            Intent intent=new Intent(this, AnotherActivity.Class);
            intent.putExtra(VALUE_KEY, input);
        }

    });

} 
```

在另一个活动上：

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        Intent intent=this.getIntent();
        String value=intent.getStringExtra(VALUE_KEY);

        TextView view=(TextView)findViewById(R.id.txt);
        view.setText(value);
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T07:43:09.013

我假设你想在同一个活动中设置文本，如果不是这样，那么告诉我，我会改变我的答案。

这是你必须做的。

```
public class MyActivity extends Activity {  
Button btn;
EditText et;
TextView tv;

public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        btn = (Button)findViewById(R.id.yourbtnID);
        et = (EditText) findViewById(R.id.yourEtID);
        tv = (TextView) findViewById(R.id.yourtvID);

        btn.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
        String myText = et.getText().toString();
        tv.setText(myText); 
    }
});
}
} 
```

如果要在两个活动之间传递文本，请使用`Intent`.

在您当前`Activity`执行此操作。

```
Intent i = new Intent(YourCurrentActivity.this, YourNextActivity.class);
String str = yourEditText.getText().toString();
i.putExtra("edittextvalue" , str);
startActivity(i); 
```

然后在下一个活动中执行此操作..

```
Bundle extras = getIntent().getExtras(); 
String myEtText;

if (extras != null) {
myEtText = extras.getString("edittextvalue");
yourTextView.setText(myEtText);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T07:42:10.850

试试这个，把你的价值放在字符串中：`String et_str = EditText.getText().toString();`

当你调用另一个意图时，

```
Intent i = new Intent(first_view .class, second_view.class);
i.putExtra("REF",et_str);
StartActivity(i); 
```

在第二个视图中，使用`getExtra()`

# recording - CTCallStateIncoming 时 AVAssetWriter 完成写入失败

> ID：10361551
> 
> 赞同：1
> 
> 时间：2012-04-28T07:31:56.367
> 
> 标签：recording, avassetwriter

我使用 AVAssetWriter AVCaptureSession 来录制视频。它运行良好。我使用 UIApplicationDidEnterBackgroundNotification 和 CTCallCenter.callEventHandler 在应用程序进入后台或来电时停止记录。UIApplicationDidEnterBackgroundNotification 运行良好。但在 CTCallCenter.callEventHandler,[AVAssetWriter finishWriting] 返回 NO 。这是 AVAssetWriter.error：

Error Domain=AVFoundationErrorDomain Code=-111800 "这个操作无法完成" UserInfo=0x6c0bc20 {NSLocalizedFailureReason=发生未知错误（-12785）, NSUnderlyingError=0x6c0fc80 "The operation could not be completed. (OSStatus error -12785.)", NSLocalizedDescription=本次操作无法完成}

来电时似乎 AVAssetWriter 立即失败。录制的文件未完成，无法播放。有人能告诉我怎么处理吗？

CTCallCenter 代码：

```
 m_callCenter = [[CTCallCenter alloc] init];
    m_callCenter.callEventHandler= ^(CTCall* call)
    {
        if (call.callState == CTCallStateDialing || call.callState == CTCallStateIncoming){
            [self stopRecording];
            //[self performSelectorOnMainThread:@selector(stopRecording) withObject:nil waitUntilDone:NO];
        }
    }; 
```

stopRecording 在其他情况下工作正常。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-28T22:58:02.567

电话会导致`AudioSession`中断，因此如果您使用`AudioSession`回拨，您可能会更快发现。虽然我怀疑你现在`AVAssetWriter`可能已经被炸了。

设置`AVAssetWriter.movieFragmentInterval`应该有助于最大限度地减少您的损失 - 来自 AVAssetWriter.h：

> 使用电影片段时，写入意外中断的部分写入资产可以成功打开并播放至指定时间间隔的倍数。

# php - 分配对象和分配对象引用有什么区别？

> ID：10361561
> 
> 赞同：2
> 
> 时间：2012-04-28T07:33:48.597
> 
> 标签：php, oop, object, reference

我在 PHP 中阅读了对象引用。我对对象引用做了一些实验。

我的疑问是：

我将一个对象分配给另一个变量。然后，我更改了变量的值并打印了变量。两个变量都受到影响。我将对象引用分配给另一个变量。然后我将变量的值更改为一个，这对两者都有影响。

```
 <?php

 ##Class 
 class A
 {
  var $foo = 1;
 }

 #Assignment
 $a = new A();
 $b = $a;

 echo "Assignment:\n";
 $b->foo = 8; 
 echo $a->foo."\n";
 echo $b->foo."\n";

 #Reference
 $c = new A();
 $d =& $c;

 echo "References:\n";
 $d->foo = 4;
 echo $c->foo."\n";
 echo $d->foo."\n";

 ?> 
```

我的问题是：

分配对象和分配对象引用有什么区别。

两者是一样的还是有区别的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T16:44:14.493

> 分配对象和分配对象引用有什么区别

PHP 没有对象引用，因此您无法与不存在的东西进行比较。

但是我假设您想知道以下之间的区别：

```
$a = new Foo;
$b = $a; 
```

和

```
$a = new Foo;
$b = &$a; 
```

第一个是对象的赋值（它是一个对象标识符），第二个是`$b`为`$a`. 如果我们稍微改变一下流程，区别应该会变得很明显：

```
$a = NULL;
$b = $a;
$a = new Foo; 
```

和

```
$a = NULL;
$b = &$a;
$a = new Foo; 
```

在第一个示例（作业）中，`$b`是`NULL`. 在第二个例子中，`$b`是一个变量别名（又名 PHP 变量引用）。

执行后，第一个例子`$b`自然是`NULL`，而第二个例子是什么`$a`。

如您所见，独立于对象，进行赋值与创建变量引用不同。

我希望这可以为您澄清一点。不谈引用，只谈变量别名。这更好地匹配它在 PHP 世界中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T07:46:17.953

这**[在手册](http://php.net/manual/en/language.oop5.references.php)**中有详细解释，但我会再次解释：

当 PHP 创建一个对象时，它为变量分配一个对象标识符，它允许访问该对象。当您将对象作为参数传递或将其分配给变量时，实际上是为变量提供了该标识符的副本。

对于几乎所有的测试用例和情况，它们都是相同的。

# php - 在 PHP 中使用正则表达式将括号嵌套到数组

> ID：10361562
> 
> 赞同：0
> 
> 时间：2012-04-28T07:34:02.057
> 
> 标签：php, regex, preg-match, preg-match-all

> **可能重复：**
> [正则表达式匹配外括号](https://stackoverflow.com/questions/546433/regular-expression-to-match-outer-brackets)

我有以下格式的字符串：

((((aaa (bbb) ccc)(ddd (eee) fff) ggg)(hhh (iii) )(jjj (kkk) lll) mmm)(nnn (ooo) ppp)(qqq (rrr) sss)

它基本上有3个主要部分：

((((aaa (bbb) ccc)(ddd (eee) fff) ggg)(hhh (iii) )(jjj (kkk) lll) mmm)

(nnn (ooo) ppp)

(qqq (rrr) sss)

我需要搜索表达式来获取数组中的 3 个部分（忽略任何子括号）。完成后，我需要另一个搜索表达式来拆分各个部分（仅第二个和第三个）：

(nnn (ooo) ppp) => nnn,ooo,ppp

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T07:57:41.093

这就是我认为我会这样做的方式：

```
<?php

$string = '(((aaa (bbb) ccc)(ddd (eee) fff) ggg)(hhh (iii) )(jjj (kkk) lll) mmm)(nnn (ooo) ppp)(qqq (rrr) sss)';

function parse_string($input) {
    $len = strlen($input);
    $substrings = array();
    $paren_count = 0;
    $cur_string = '';
    for ($i = 0; $i < $len; $i++) {
        $char = $input[$i];
        if ($char == '(') {
            $paren_count += 1;
        } elseif ($char == ')') {
            $paren_count -= 1;
        }
        $cur_string .= $char;
        if ($paren_count == 0 && strlen($cur_string)) {
            $substrings[] = $cur_string;
            $cur_string = '';
        }
    }
    return $substrings;
}

function convert_str($input) {
    $search = array('(', ')', ' ');
    $replace = array('', '', ',');
    return str_replace($search, $replace, $input);
}

$parsed_string = parse_string($string);
echo convert_str($parsed_string[1]); 
```

输出：

```
nnn,ooo,ppp 
```

这是一种状态机。

# couchdb - 沙发数据库中的日期

> ID：10361565
> 
> 赞同：3
> 
> 时间：2012-04-28T07:34:24.100
> 
> 标签：couchdb

你如何在 couchdb 中插入日期？作为字符串？

我有 couchdb-1.0.3。

1.

我这样做了：

```
$ curl -X PUT 127.0.0.1:5984/misc/doc1  -d '{"date":"2011-13-01T17:30:12+01:00"}' 
```

这有效，但这个日期不存在。

2.

我想我必须这样做：

```
$ curl -X PUT 127.0.0.1:5984/misc/doc1  -d '{"date":new Date("2011-12-01)}' 
```

但这是无效的 JSON。

3.

当我使用这种格式时，

```
$ curl -X PUT 127.0.0.1:5984/misc/doc1  -d '{"date":"2011/12/01 00:00:00"}' 
```

我不能很好地使用这种格式

```
$ curl -X GET '127.0.0.1:5984/misc/_design/foo/_view/view1?startkey="2012-02-02"' 
```

因为文档显示在结果中。

谢谢，

埃里克·J。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T23:48:15.380

我建议你使用你的第一种格式，或者可能是[JSON2 标准格式](https://stackoverflow.com/questions/4812235/whats-the-best-way-to-store-datetimes-timestamps-in-couchdb)，这对 JavaScript 来说最方便。这是大多数人所做的，它适用于您的示例请求：

```
$ curl '127.0.0.1:5984/misc/_design/foo/_view/view1?startkey="2012-02-02"' 
```

要*验证*您的数据，请使用[验证功能](http://guide.couchdb.org/draft/validation.html)。

# asp.net-mvc - Jqgrid排序不起作用

> ID：10361567
> 
> 赞同：0
> 
> 时间：2012-04-28T07:34:39.953
> 
> 标签：asp.net-mvc, linq, sorting, jqgrid

我用下面的代码创建了一个 jqgrid，我成功地创建了 jqgrid 而没有排序。所以我修改了代码，但它没有对数据进行排序并显示以下错误，

```
'firstName' could not be resolved in the current scope or context. Make sure that all referenced variables are in scope, that required schemas are loaded, and that namespaces are referenced correctly. Near simple identifier, line 6, column 1. 
```

## 控制器

```
public ActionResult GridData(string sidx, string sord, int page, int rows)
    {
        int pageIndex = Convert.ToInt32(page) - 1;
        int pageSize = rows;
        int totalRecords = db.customers.Count();
        int totalPages = (int)Math.Ceiling((float)totalRecords / (float)pageSize);

        var _Customers = db.customers.OrderBy(sidx + " " + sord).Skip(pageIndex * pageSize).Take(pageSize).ToArray();

        var jsonData = new
        {
            total = (int)Math.Ceiling((float)totalRecords / (float)rows),
            page = page,
            records = totalRecords,
            rows = (from r in _Customers.AsEnumerable()
                    select new
                    {

                        id = r.id,
                        cell = new[] { "<input type='radio' style='cursor:pointer' class='view_Account'  name='selectedCall'  id='" + r.id + "' value='" + r.id + "' />", r.firstName, r.lastName }
                    }
                   ).ToArray()
        };
        return Json(jsonData, JsonRequestBehavior.AllowGet);

    } 
```

## 看法

```
$("#list").jqGrid({
        url: '/Customer/GridData/',
        datatype: 'json',
        colNames: ['', 'FirstName', 'LastName'],
        colModel: [
        { name: 'ssss', width: 20, search: false },
                    { name: 'firstName', sortable: true, sorttype: "text", searchoptions: { sopt: ['eq', 'ne'] }, width: 180 },
                    { name: 'lastName', sortable: true, sorttype: "text", width: 183 }

                ],
        rowNum: 100,
        width: '200px',
        height: '100px',
        sortname: 'firstName',
        sortorder: "asc",
        pager: jQuery('#pager')
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T04:00:39.950

var _Customers = db.customers.OrderBy("it." + sidx + " " + sord).Skip(pageIndex * pageSize).Take(pageSize).ToArray();

你只需改变“它”。按您的要求按钥匙工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T07:36:25.640

雷克斯

您的 colmodel 中缺少一个属性。

为了使排序工作，您需要添加一个索引，如下所示：

```
{ name: 'firstName', index: 'firstName', sortable: true, sorttype: "text", searchoptions: { sopt: ['eq', 'ne'] }, width: 180 } 
```

# android - Android OpenGL-ES 渐变背景

> ID：10361569
> 
> 赞同：0
> 
> 时间：2012-04-28T07:35:09.283
> 
> 标签：android, opengl-es, gradient

我想在OpenGL中有一个渐变背景

我找到了这两个链接，但我无法重现它：

[iPhone 上的 OpenGL 渐变填充看起来有条纹](https://stackoverflow.com/questions/3791351/opengl-gradient-fill-on-iphone-looks-striped)

[Android上的OpenGL渐变带](https://stackoverflow.com/questions/8669765/opengl-gradient-banding-on-android)

我尝试了第一个链接的以下内容：

```
 // Begin Render
    //IntBuffer redBits = null, greenBits = null, blueBits = null;
    //gl.glGetIntegerv (GL10.GL_RED_BITS, redBits); // ==> 8
    //gl.glGetIntegerv (GL10.GL_GREEN_BITS, greenBits); // ==> 8
    //gl.glGetIntegerv (GL10.GL_BLUE_BITS, blueBits); // ==> 8

    gl.glDisable(GL10.GL_BLEND);
    gl.glDisable(GL10.GL_DITHER);
    gl.glDisable(GL10.GL_FOG);
    gl.glDisable(GL10.GL_LIGHTING);
    gl.glDisable(GL10.GL_TEXTURE_2D);
    gl.glShadeModel(GL10.GL_SMOOTH);

    float[] vertices = {
        0, 0,
        320, 0,
        0, 480,
        320, 480,
    };
    FloatBuffer vertsBuffer = makeFloatBuffer(vertices); 

    int[] colors = {
    255, 255, 255, 255,
    255, 255, 255, 255,
    200, 200, 200, 255,
    200, 200, 200, 255,
    };

    IntBuffer colorBuffer = makeIntBuffer(colors);

    gl.glVertexPointer(2, GL10.GL_FLOAT, 0, vertsBuffer);
    gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
    gl.glColorPointer(4, GL10.GL_UNSIGNED_BYTE, 0, colorBuffer);
    gl.glEnableClientState(GL10.GL_COLOR_ARRAY);
    gl.glDrawArrays(GL10.GL_TRIANGLE_STRIP, 0, 4);
    // End Render

protected static FloatBuffer makeFloatBuffer(float[] arr) {
    ByteBuffer bb = ByteBuffer.allocateDirect(arr.length*4);
    bb.order(ByteOrder.nativeOrder());
    FloatBuffer fb = bb.asFloatBuffer();
    fb.put(arr);
    fb.position(0);
    return fb;
}

protected static IntBuffer makeIntBuffer(int[] arr) {
    ByteBuffer bb = ByteBuffer.allocateDirect(arr.length*4);
    bb.order(ByteOrder.nativeOrder());
    IntBuffer ib = bb.asIntBuffer();
    ib.put(arr);
    ib.position(0);
    return ib;
} 
```

但它只是在右上角显示一个矩形。但是不知道有没有

glGetIntegerv

会有影响吗？任何想法/链接如何使其运行？

=== 解决方案

```
 // set orthographic perspective
    setOrtho2D(activity, gl);

    gl.glDisable(GL10.GL_BLEND);
    //gl.glDisable(GL10.GL_DITHER);
    gl.glDisable(GL10.GL_FOG);
    gl.glDisable(GL10.GL_LIGHTING);
    gl.glDisable(GL10.GL_TEXTURE_2D);
    gl.glShadeModel(GL10.GL_SMOOTH);

    float[] vertices = {
            0, 0,
            _winWidth, 0,
            0, _winHeight,
            _winWidth, _winHeight
        };

    FloatBuffer vertsBuffer = makeFloatBuffer(vertices); 

    float[] colors = {
    1.0f, 1.0f, 1.0f, 1.0f,
    1.0f, 1.0f, 1.0f, 1.0f,
    0.2f, 0.2f, 0.2f, 1.0f,
    0.2f, 0.2f, 0.2f, 1.0f
    };

    FloatBuffer colorBuffer = makeFloatBuffer(colors);

    gl.glVertexPointer(2, GL10.GL_FLOAT, 0, vertsBuffer);
    gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
    gl.glColorPointer(4, GL10.GL_FLOAT, 0, colorBuffer);
    gl.glEnableClientState(GL10.GL_COLOR_ARRAY);
    gl.glDrawArrays(GL10.GL_TRIANGLE_STRIP, 0, 4); 
```

我忘了再次评论透视线。我还将顶点顺序从“U”形更改为“Z”形（感谢尼克）。现在看起来像这样：![android_gradient_background](../Images/a7760a9c1770de3a3ec41d384ad09b13.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T08:45:26.453

这是个问题：

```
int[] colors;
....
gl.glColorPointer(4, GL10.GL_UNSIGNED_BYTE, 0, colorBuffer); 
```

您正在为颜色通道使用有符号的四字节整数，然后告诉 opengl 它们是无符号的一字节整数。您应该使用一个充满无符号字节的缓冲区。

但是，只使用浮点数会更容易：

```
float[] colors = {
    1.0f, 1.0f, 1.0f, 1.0f,
    1.0f, 1.0f, 1.0f, 1.0f,
    0.5f, 0.5f, 0.5f, 1.0f,
    0.5f, 0.5f, 0.5f, 1.0f,
    };

float vertices[] = {
    0,  0,
    800, 0,
    0, 480,
    480, 800,
    };

FloatBuffer colorBuffer = makeFloatBuffer(colors);

gl.glColorPointer(4, GL10.GL_FLOAT, 0, colorBuffer); 
```

# sql - 编写sql查询

> ID：10361570
> 
> 赞同：0
> 
> 时间：2012-04-28T07:35:18.880
> 
> 标签：sql, sql-server-2008

您将如何编写查询以从预订数据库中选择 2012 年 5 月 1 日至 2012 年 11 月 1 日之间预订的房间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T07:39:11.163

```
select r.* from rooms r 
left outer join bookings b on b.roomno = r.roomno
where b.dateto not between '2012-05-01' and '2012-11-01'
and b.datefrom not between '2012-05-01' and '2012-11-01'
or b.roomno is null 
```

[SQLFiddle 示例](http://sqlfiddle.com/#!3/7c4f8/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T07:48:39.477

这应该包括在两个给定日期之间未预订的所有房间：

```
SELECT * FROM Room r
JOIN Booking b ON b.hotelNo = r.hotelNo AND r.roomNo = b.roomNo
WHERE NOT ('2012-05-01' BETWEEN (b.dateFrom AND b.dateTo)
OR '2012-11-01' BETWEEN (b.dateFrom AND b.dateTo)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T07:41:20.300

请尝试以下

```
SELECT * from room
WHERE (roomNo, hotelNo) not in
( select roomNo, hotelNo
  from booking
  where datefrom between '2012-05-01' and '2012-11-01'
  or dateto between '2012-05-01' and '2012-11-01'
) 
```

# jquery - 有没有更好的方法来获取复选框值并从中创建一个字符串

> ID：10361576
> 
> 赞同：1
> 
> 时间：2012-04-28T07:36:10.860
> 
> 标签：jquery

我有一些这样的代码：

```
$('input:checkbox:checked').each(function (index) {

            indexArray.push($(this).attr("data-invoiceid"));
        });

            var postData = { values: indexArray.join(',') }; 
```

如您所见，我正在尝试检查复选框的所有发票 ID，并将它们作为逗号分隔的字符串添加到帖子数据的 values 属性中。值可以设置为“1,2,5”。

所以这个作品找到了。我想知道是否有更好的方法可以删除首先将值添加到数组的步骤？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T07:45:53.813

你也可以使用地图。虽然它仍然使用数组，但它更干净并且遵循函数方法。

```
var indexArray = $('input:checkbox:checked').map(function () {
  return $(this).attr("data-invoiceid");
}).get().join(',');
var postData = { values: indexArray}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T07:41:34.537

试试这个：

```
 indexArray = "";
    $('input:checkbox:checked').each(function() {
          indexArray += $(this).data("invoiceid") + ",";
    }); 
```

# xml - 来自 Codeigniter 的 XML 页面视图

> ID：10361577
> 
> 赞同：-1
> 
> 时间：2012-04-28T07:36:19.627
> 
> 标签：xml, codeigniter, view

> **可能重复：**
> [使用 CodeIgniter 创建 XML](https://stackoverflow.com/questions/10361074/xml-creation-using-codeigniter)

```
$this->output->set_content_type('text/xml');
echo $this->dbutil->xml_from_result($query, $config) 
```

从上面的代码中，我看不到 XML 格式的数据集。在我的视图页面中，它以我之前看到的普通视图显示数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T18:10:39.693

也许你应该试试这个

```
function user_get()
{
    if(!$this->get('id'))
    {
        $this->response(NULL, 400);
    }

        function users($id){

            $query = $this->db->get('student');
                    $this->db->where('EID', $id); 
            $config = array (
                              'root'    => 'users',
                              'element' => 'item',
                              'newline' => "\n",
                              'tab'    => "\t"
                            );
            $this->load->dbutil();
            echo '<?xml version="1.0" encoding="utf-8" ?> ';
            print $this->dbutil->xml_from_result($query, $config);
        } 

    $id = @$users[$this->get('id')];

    if($user)
    {
        $this->response($user, 200); // 200 being the HTTP response code
    }

    else
    {
        $this->response(array('error' => 'User could not be found'), 404);
    }

} 
```

# unicode - Unicode 和 Ascii 字符是否相同？

> ID：10361579
> 
> 赞同：35
> 
> 时间：2012-04-28T07:36:35.067
> 
> 标签：unicode, ascii

什么是 unicode 字符代码？它们与 ascii 字符有何不同？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-04-28T07:38:48.787

Unicode 是一种为当今使用的几乎所有语言的字符以及许多其他字符（例如数学符号）分配唯一编号（称为代码点）的方法。有很多方法可以将 Unicode 字符串编码为字节，例如[UTF-8](http://en.wikipedia.org/wiki/UTF-8)和[UTF-16](http://en.wikipedia.org/wiki/UTF-16/UCS-2)。

ASCII 仅将值分配给 128 个字符（az、AZ、0-9、空格、一些标点符号和一些控制字符）。

对于每个具有 ASCII 值的字符，Unicode 代码点和该字符的 ASCII 值是相同的。

在大多数现代应用程序中，您应该更喜欢使用 Unicode 字符串而不是 ASCII。例如，这将允许您让用户的姓名或地址中带有重音字符，并将您的界面本地化为英语以外的语言。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-28T07:44:53.783

前 128个[Unicode](http://en.wikipedia.org/wiki/Unicode)代码点与 ASCII 相同。然后他们有100,000左右。

Unicode 有两种常见格式， [UTF-8](http://www.utf8-chartable.de/)对每个值使用 1-4 个字节（因此对于前 128 个字符，UTF-8 与 ASCII 完全相同）和 UTF-16，使用 2 或 4 个字节。

# uiview - 用偏移量旋转 UIView

> ID：10361580
> 
> 赞同：0
> 
> 时间：2012-04-28T07:36:43.260
> 
> 标签：uiview, xamarin.ios, uibutton, rotation

我正在编写一个 MonoTouch iOS 应用程序。

我的主视图上有一组 4 个 UIButton。它们或多或少地排成一排。我想将它们旋转一个角度（-90 到 +90 度之间）作为一组，最右边的按钮是按钮组的“锚点”。

我不知道该怎么做。

我尝试的一件事是将这些按钮放在 UIView 内，然后将 Transform 设置为 CGAffineTransform.MakeRotation，但它围绕 UIView 的中心旋转。我还尝试让这个父 UIView 比它需要的更宽，以便组中最右边的按钮位于 UIView 的中心。这适用于旋转，但是作为父 UIView 右半部分的大空白部分覆盖了我需要可见的主视图上的其他按钮。

所以我的问题是如何旋转 UIView 的 UIButtons，其中旋转围绕一个不是 UIButton 或 UIView 中心的点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T20:54:11.453

您可以更改视图图层的 AnchorPoint 以及 Position 以补偿由于设置 AnchorPoint 而造成的偏移。例如，假设您有一个名为 ButtonGroup 的视图，其中包含按钮。以下代码会将它们围绕视图的左下角旋转 90 度：

```
ButtonGroup.Layer.Position = new PointF(ButtonGroup.Frame.Left, ButtonGroup.Frame.Bottom);
ButtonGroup.Layer.AnchorPoint = new PointF (0,1);            
ButtonGroup.Layer.AffineTransform = CGAffineTransform.MakeRotation((float)Math.PI/-2); 
```

# jquery - 没有插件的 jQuery 验证

> ID：10361582
> 
> 赞同：0
> 
> 时间：2012-04-28T07:37:30.633
> 
> 标签：jquery, asp.net

是否可以在不为此使用任何插件的情况下实现 jQuery 验证。

在我的 asp.net 应用程序中，我使用 asp:textboxes 接收输入，但按钮不是 asp 控件，在按钮单击事件中调用 jQuery 文件...我需要在不使用任何插件的情况下验证输入.. ......我怎样才能做到这一点......

我尝试将必填字段验证器放在文本框之后，例如，

```
<asp:TextBox ID="txtName" runat="server" ClientIDMode="Static"></asp:TextBox>
<div>
   <asp:RequiredFieldValidator ID="reqValName" ControlToValidate="txtName" 
        runat="server" CssClass="validation" ErrorMessage="*Required">
   </asp:RequiredFieldValidator>
</div> 
```

并在我的 js 文件中检查验证，例如，

```
$(function () {
$("#txtName").change(function () {
    if ($("#txtName").val() == "") {
        $(".reqValName").val();
    }
}); 
```

当我尝试删除文本框中的值（使其为空）时它工作，如果我从这里离开它会显示“*必需”错误....很好....我尝试了模糊功能，它不工作并且另外，我需要在清除此验证错误之前停止按钮单击事件，在服务器端，如果它是 asp 按钮，我从不担心这一点，但这里是 html，我不知道该怎么做，以及如何使用常规此文本框的表达式.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T10:14:47.757

如果您确实想要服务器端验证，您始终可以通过添加 runat="server" 将 html 按钮转换为服务器端控件，然后您可以提供一个按钮单击事件来验证服务器端的数据。请参阅下面的示例：

在 html 中：

```
<input runat="server" type="submit" value="Submit" 
       id="btnSubmit" onserverclick="btnSubmit_Click" /> 
```

在后面的代码中：

```
protected void btnSubmit_Click(object sender, EventArgs e)
{
    if(txtName.Text == "Ray")
    {
        reqValName.IsValid = false; // Ray is taken
    }
} 
```

# php - 避免 serevr 中的输出缓冲错误

> ID：10361584
> 
> 赞同：0
> 
> 时间：2012-04-28T07:37:36.520
> 
> 标签：php

我正在开发 w 网站。在这里，我包含了一个缩略图页面。它在我的本地主机中运行良好。但是当我上传它时，我会看到一个错误

```
Warning: Cannot modify header information - headers already sent by (output started at /mydomain/demo1/admin/thumbnail.php:50) in /mydomain/demo1/admin/act-addVehicle.php on line 191 
```

我的代码

```
if(move_uploaded_file ($tmpName,$path.$actual_image_name)){
                        $succ=1;
                        chmod("$add",0777);
                        $imgSucc=1; 
                            //strt image thumbnail
                        include("./thumbnail.php");
                        // ends
                        }else{ echo "Failed to upload file Contact Site admin to fix the problem"; 
                        exit;} 
```

如何避免此错误 php ini 中是否有任何设置？

有人知道吗 ？请回复

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T08:01:12.260

如果没有看到*thumbnail.php*的代码，很难确切地知道发生了什么，但基本上它在第 191 行*的 act-addVehicle.php*之前输出的东西是设置另一个标题。

很可能是脚本末尾的一个空格。`?>`如果就在第 50 行之后，请检查。

您可以将 include('thumbnail.php') 包装到 ob_start() 和 ob_end_clean() 中，但这不会解决在设置新标头之前输出的基本问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T07:50:36.093

这种错误通常来自您的一个文件中有一个关闭的 php 标记，后面跟着一些空格。当脚本在执行“header()”函数之前执行时，这个空白被发送到浏览器。

例如，您的 thumbnail.php 或 act-addverhicule.php 以“？>”标签结尾并且后面有一些空格，我不会感到惊讶。

作为一种好的做法，最好删除文件末尾的所有关闭 php 标记（“？>”）以避免此类问题...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T07:40:55.973

当然。在代码开头的某处使用[ob_start函数](http://php.net/manual/en/function.ob-start.php)

# c++ - 变量后的+号是什么意思？

> ID：10361585
> 
> 赞同：5
> 
> 时间：2012-04-28T07:37:50.483
> 
> 标签：c++, c

以下代码的输出将是什么
`int x,a=3;
x=+ +a+ + +a+ + +5;
printf("%d %d",x,a);`

输出是：11 3.我想知道怎么做？+ 在一个手段之后是什么符号？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-28T07:48:49.880

我认为 DrYap 是对的。

```
x = + + a + + + a + + + 5; 
```

是相同的：

```
x = + (+ a) + (+ (+ a)) + (+ (+ 5)); 
```

这里的关键点是：

1) c, c++ 没有 + 作为后缀运算符，所以我们知道我们必须将其解释为前缀

2）一元+比二元+绑定更紧密（优先级更高）

好笑不是吗？如果这些是 - 迹象，它看起来不会那么奇怪。Monadic +/- 只是一个前导符号，或者换句话说，“+x”与“0+x”相同。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-28T07:41:11.303

a 之后的 + 被视为下一个值之前的 +。如果您使用一致的间距，则它与以下内容相同：

```
x = + + a + + + a + + + 5; 
```

但并非所有的 +s 都是必需的，因此它的作用与执行以下操作相同：

```
x = a + a + 5; 
```

a 的值没有改变，因为您从未使用过递增运算符，即 ++，两个 + 符号之间没有空格。+ 和 ++ 是两个独立的运算符。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-28T07:54:05.780

该代码似乎等同于：

`x= (+(+(a)))+ (+ (+(a)))+ (+(+(5)));`

即`x = a + a + 5`。哪个是 11。你知道你可以在数字前加上 + 或 - 号，对吧？现在那些`+`仅仅表示变量的符号。由于符号为`+`，变量保持不变即“+5”表示“5”，因此“+a”表示“a”，“+ +a”表示“+(+a)”表示“a”。以同样的方式你可以写`x = + + + 3 + + + + 3 + + + + 5`. 或`x = - + + - 3 + - + - 3 - - + 5;`。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-28T07:54:40.890

由于`+`运算符从不是两个相邻的，而是始终由空格分隔，因此该语句 `x=+ +a+ + +a+ + +5;`实际上读作

`x=+ (nothing)+a+(nothing) +(nothing) +a+(nothing) +(nothing) +5;`

所以基本上最终的方程变成了这种类型 `x=a+a+5;`，从而得到了结果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-28T08:53:49.117

x=+ +a+ + +a+ + +5 ：这相当于

x = x=+ +a+ + +a+ + +5 或者我们可以把它写成 x = + (+ a) + (+ (+ a)) + (+ (+ 5)) 并且+只是表示最终将被评估为 x = a + a + 5 的符号。

# dump - 定期 W3WP.exe 崩溃

> ID：10361588
> 
> 赞同：0
> 
> 时间：2012-04-28T07:38:22.360
> 
> 标签：dump, crash-dumps, w3wp.exe

我有 ASP.NET 应用程序。它会定期下降，让我的用户不满意。

在日志中我看到：

```
错误应用程序名称：w3wp.exe，版本：7.5.7601.17514，时间戳：0x4ce7afa2
错误模块名称：nlssorting.dll，版本：4.0.30319.261，时间戳：0x4ec9f3aa
异常代码：0xc00000fd
故障偏移：0x0000000000002296
错误进程ID：0xfe4
错误应用程序启动时间：0x01cd23bb335b5514
错误的应用程序路径：c:\windows\system32\inetsrv\w3wp.exe
错误模块路径：C:\Windows\Microsoft.NET\Framework64\v4.0.30319\nlssorting.dll
报告 ID：f25aaeba-8fae-11e1-aeea-0030488d6555

```

在故障转储中，我看到：

```
00000000`18187760 00000000`ffffffff app_code!FunBeatRace.Configuration.SiteConfiguration.get_CurrentBrand+0x5a
00000000`181877a0 00000000`ffffffff app_code!FunBeatRace.Globalization.CustomResourceProvider.CreateResourceKeyFromCultureName+0x16
00000000`181877f0 00000000`ffffffff app_code!FunBeatRace.Globalization.CustomResourceProvider.GetResourceCache+0x78
00000000`181878c0 00000000`ffffffff app_code!FunBeatRace.Globalization.CustomResourceProvider.System.Web.Compilation.IResourceProvider.GetObject+0x9b
00000000`18187900 00000000`ffffffff system_web_ni!System.Web.Compilation.ResourceExpressionBuilder.GetResourceObject+0x1f
00000000`18187940 00000000`ffffffff system_web_ni!System.Web.HttpContext.GetGlobalResourceObject+0x27

```

这是正常的应用程序工作。但在那之后发生

```
000000001819D600 000007FF001E116B App_Code!FunBeatRace.Configuration.SiteConfiguration.get_CurrentBrand()+0x1cb
000000001819D640 000007FF001E2F06 App_Code!FunBeatRace.Globalization.CustomResourceProvider.CreateResourceKeyFromCultureName(System.String)+0x16
000000001819D690 000007FF001E29E8 App_Code!FunBeatRace.Globalization.CustomResourceProvider.GetResourceCache(System.String)+0x78

MANAGED_STACK_COMMAND：_EFN_StackTrace

LAST_CONTROL_TRANSFER：从 000007fef99c3742 到 000007fef80b2296

ADDITIONAL_DEBUG_TEXT：基于属性 [Is_ChosenCrashFollowupThread] 的后续集来自 Frame:[0] on thread:[PSEUDO_THREAD]

FAULTING_THREAD：ffffffffffffffff

BUGCHECK_STR：APPLICATION_FAULT_STACK_OVERFLOW_WRONG_SYMBOLS_CALL

PRIMARY_PROBLEM_CLASS：STACK_OVERFLOW_CALL

DEFAULT_BUCKET_ID：STACK_OVERFLOW_CALL

堆栈文本：  
00000000`18187530 00000000`ffffffff mscorlib_ni!DomainNeutralILStubClass.IL_STUB_PInvoke+0xbe
00000000`18187620 00000000`ffffffff mscorlib_ni!System.Globalization.CompareInfo.GetHashCodeOfString+0xa9
00000000`18187670 00000000`ffffffff mscorlib_ni!System.Collections.Hashtable.get_Item+0x5c
00000000`18187720 00000000`ffffffff system_web_ni!System.Web.SessionState.SessionStateItemCollection.get_Item+0x32

```

结果我们有：

```
SYMBOL_NAME：mscorlib_ni!DomainNeutralILStubClass.IL_STUB_PInvoke

FOLLOWUP_NAME：机器所有者

模块名称：mscorlib_ni

IMAGE_NAME：mscorlib.ni.dll

DEBUG_FLR_IMAGE_TIMESTAMP：4ec9f74e

STACK_COMMAND：_EFN_StackTrace；** 伪上下文 ** ; KB

FAILURE_BUCKET_ID：STACK_OVERFLOW_CALL_c00000fd_mscorlib.ni.dll！DomainNeutralILStubClass.IL_STUB_PInvoke

BUCKET_ID：X64_APPLICATION_FAULT_STACK_OVERFLOW_WRONG_SYMBOLS_CALL_mscorlib_ni!DomainNeutralILStubClass.IL_STUB_PInvoke

WATSON_STAGEONE_URL：http://watson.microsoft.com/StageOne/w3wp_exe/7_5_7601_17514/4ce7afa2/nlssorting_dll/4_0_30319_261/4ec9f3aa/c00000fd/00002296.htm?Retriage=1

跟进：MachineOwner

```

但我不知道有什么麻烦。

请告诉我如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T08:21:54.393

这看起来很相似：[http ://connect.microsoft.com/VisualStudio/feedback/details/665157/nlssorting-fault-crashes-iis](http://connect.microsoft.com/VisualStudio/feedback/details/665157/nlssorting-fault-crashes-iis)

您还可以在使用如下代码尝试捕获 Global.asax.cs 的 Application_Error() 方法中的错误时发现价值：

```
protected void Application_Error(Object sender, EventArgs e) {
    Exception ex = HttpContext.Current.Server.GetLastError();
    // handle it
    HttpContext.Current.Context.ClearError();
} 
```

随着时间的推移，您也可能会加入一个解决方案，例如[如何让 ELMAH 与 ASP.NET MVC [HandleError] 属性一起使用？](https://stackoverflow.com/questions/766610/how-to-get-elmah-to-work-with-asp-net-mvc-handleerror-attribute/779961#779961)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-03T13:57:09.223

根据微软的文档，`w3wp.exe`有时会在遇到未处理的异常时崩溃。

根据我的经验`w3wp.exe`，当堆栈由于溢出而无可救药地损坏时会崩溃，并且由于内存损坏，try-catch 块无法处理这种错误。

主要原因可能是递归调用过多，因为每次调用在退出之前都会使用一定数量的堆栈。可能有无限递归吗？

第二个原因是 w3wp.exe 或 .NET Framework 中的内存管理不善，导致发生内存损坏，而不是检测这种情况并通知用户有关 Stack Overflow 的信息。

# internet-explorer-9 - IE 9 在我的网站上崩溃

> ID：10361592
> 
> 赞同：1
> 
> 时间：2012-04-28T07:38:55.103
> 
> 标签：internet-explorer-9

我的网站在 Internet Explorer 9 中崩溃，但在 Firefox 和 Chrome 中运行良好。主页在 IE 中加载正常，但任何帖子页面都会崩溃，例如在我的联系页面上：[http ://www.poker006.com/2008/02/contact-me.html](http://www.poker006.com/2008/02/contact-me.html)

我不知道这只是我的 Internet Explorer 版本还是我网站上的代码有问题。

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T10:12:44.847

[使用HTML-Validator](http://validator.w3.org/check?verbose=1&uri=http://www.poker006.com/2008/02/contact-me.html)检查您的页面。它有 281 个错误和 302 个警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T19:15:14.617

它可能是一个附加组件或您为 IE 安装的东西导致了问题。转到您的主页，按 F12 进入开发工具，然后单击脚本并按开始。转到该 URL 以查看您的页面的任何错误。

您的网站看起来像是使用 Wordpress 创建的。不应该是特定浏览器的任何重大问题，否则您会看到它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T08:00:25.643

它在 IE9 中对我来说工作得很好：

![](../Images/8cabd99df01dcf411455a673ad067446.png)

我建议在您的页面上添加条件评论：

```
 <!--[if lt IE 8]>
     <!--This will alert anyone using IE8 and below-->
       <script>
         alert("Please Update Your Browser");
       </script>
    <![endif]--> 
```

您还可以重定向它们：

```
 <!--[if lt IE 8]>
     <!--This will redirect anyone using IE8 and below-->
      meta HTTP-EQUIV="REFRESH" content="0; url=http://windows.microsoft.com/en-us/internet-explorer/products/ie/home">
    <![endif]--> 
```

或者，当然，两者都有：

```
 <!--[if lt IE 8]>
     <!--This will alert & redirect anyone using IE8 and below-->
       <script>
         alert("Please Update Your Browser");
       </script>
      meta HTTP-EQUIV="REFRESH" content="0; url=http://windows.microsoft.com/en-us/internet-explorer/products/ie/home">
    <![endif]--> 
```

# c# - 尝试抓住不良的编程习惯

> ID：10361597
> 
> 赞同：3
> 
> 时间：2012-04-28T07:39:47.123
> 
> 标签：c#, try-catch

我正在执行一个存储过程并返回一个字符串。该字符串设置为 return `1`，`0`或`"USER DOES NOT EXISTS"`取决于条件。

只是想知道以下是否是一种不好的编程习惯。

```
string result = _db.GetParameterValue(cmdObj, "@strMessage").ToString();
try
{
    int a = int.Parse(result);
    if (a == 1)
        Console.WriteLine("A");
    else
        Console.WriteLine("B");
}
catch
{
    Console.WriteLine(result);
}

Console.WriteLine(result); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-28T07:45:56.200

最好专门匹配而不是基于捕获失败的 int 解析来假定它是“用户不存在”。

尝试/捕捉/吞咽总是不好的做法。如果您要捕获异常，请记录或抛出异常。

你没有指定一种语言，所以假设它是 C#，`int.TryParse()`比`int.Parse`在`try/catch`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-28T07:45:50.753

您应该使用`tryParse`而**不是**将其包含在 try catch 块中。

```
 int outValue = -1;
 int.TryParse(result, out outValue); 
```

# java - 使用枚举开关时出现奇怪的编译错误

> ID：10361599
> 
> 赞同：2
> 
> 时间：2012-04-28T07:39:57.527
> 
> 标签：java, compiler-errors, switch-statement

我刚刚注意到一个奇怪的案例，想看看是否有人能够解释它。这是我的情况：

```
private enum Classifiers {
    NEURAL_NETWORK, NEAREST_NEIGHBOURS, IDENTITY;
}
private ClassifierInterface getClassifierInstance(Classifiers classifier) {
    switch (classifier) {
    case NEURAL_NETWORK:
        return new DoubleLayeredNeuralNetwork();
    case NEAREST_NEIGHBOURS:
        return new NearestNeighbours();
    case IDENTITY:
        return new IdentityClassifier();
    }
    return null; // If I comment out this line I get compilation error
} 
```

见评论。我希望`Unreachable code`该行会报告该错误。相反，`Method must return value`如果我注释掉这一行，我会得到错误。但是，程序流无法通过那里。

我什至认为这将是`null`传入值的情况的保护情况，但正如预期的那样，这会触发`NullPointerException`切换条件。

我不`switch`经常使用，可能我在这里遗漏了一些东西。有人可以尝试帮助理解这种行为吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T07:47:09.460

这是正确的行为，因为您没有默认 case 语句。问题是您可以为后者添加一个值，`enum`而不是重新编译使用它的代码。当它不是值之一时，强制您始终处理，这被涵盖了。

顺便说一句：`classifier`可能是 null 这是另一个选项开关不幸无法处理。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-28T07:50:20.367

这个问题很有趣……

我们有这样的东西，编译器很高兴！

```
public enum Coin {
     PENNY,
     NICKEL,
     DIME,
     QUARTER;
}

private enum CoinColor { COPPER, NICKEL, SILVER }
private static CoinColor color(Coin c) {
    switch(c) {
        case PENNY:
            return CoinColor.COPPER;
        case NICKEL:
            return CoinColor.NICKEL;
        case DIME: case QUARTER:
            return CoinColor.SILVER;
        default:
            throw new AssertionError("Unknown coin: " + c);
    }
} 
```

Java 语言规范说：

> 如果枚举值表达式上的开关缺少默认标签并且缺少一个或多个枚举类型常量的大小写标签，则鼓励（但不是必需）Java 编译器提供警告。（如果表达式的计算结果为丢失的常量之一，那么这样的语句将默默地不做任何事情。）

# ios - XCode 将重复和不正确的图标文件名添加到 Info.plist

> ID：10361612
> 
> 赞同：3
> 
> 时间：2012-04-28T07:41:50.770
> 
> 标签：ios, xcode, xcode4.3, info.plist

当我运行 XCode 'Archive' 命令时，我收到七条关于丢失文件的错误消息。大多数是用于应该存在的启动文件，但其中一个包含拼写错误的“Portait”。

```
warning: Icon specified in the Info.plist not found under the top level app wrapper: Default-Portait~ipad.png (-19007)
Unable to validate your application. - (null) 
```

几个月前我确实错误地输入了那个文件名，但我以为我把它从项目中删除了。这是我的应用程序的“Info.plist”文件。**请注意，除了Icon file**之外，它没有图标条目。

![应用程序的 Info.plist](../Images/8d3788cefcdfcb9f6a27018be190fcda.png)

这是我的目标摘要。我已经指定了启动图像。

![XCode 目标摘要](../Images/0a540c050ed86eac0058d966a258d30f.png)

当我查看新创建的存档中的“Info.plist”文件时，它包含一个完整的图标列表。我在这里展示了**Icon files (iOS 5)**，但该列表在**Icon files**下重复。“Portait”拼写错误在那里，还有几个重复。这是一团糟。

![在此处输入图像描述](../Images/8bcb148864586288b5c3d5e85d216c6f.png)

我知道 XCode 会自动为“Info.plist”生成一些内容，但是这个长长的文件名列表来自哪里*？*而且，我怎样才能防止它们被生成？

## 我试过的

1.  我已经运行了“清理”并删除了我的 XCode 的“DerivedData”目录，但警告消息和虚假的 Info.plist 条目仍然存在。
2.  我检查了本地化的“InfoPlist.strings”，但它只包含`/* Localized versions of Info.plist keys */`.
3.  我查看了我的“.xcodeproj”包的内容，但没有发现它试图找到的文件。
4.  我尝试将一个空的图标文件数组添加到我的“Info.plist”中，或者添加我想要的确切文件的名称。当我存档时，错误和重复的名称仍会附加到末尾。
5.  我尝试复制目标（与往常一样，复制了现有`Info.plist`文件）。归档新目标会导致同样的错误。
6.  构建设置**预处理 Info.plist 文件**已关闭。我试着打开它；它没有任何区别。
7.  我尝试关闭**Info.Plist File 中的 Build Setting Expand Build Settings**。它告诉我正在尝试运行文件'$ {EXECUTABLE_NAME}'。我去了我的“Info.plist”并将**可执行文件**从“${EXECUTABLE_NAME}”更改为硬编码文本值，并手动替换了其他“${...}”条目。尽管如此，它仍坚持尝试运行“${EXECUTABLE_NAME}”。可能添加到图标设置的任何内容也会覆盖我的可执行文件名称。

## 我宁愿不做的事

我可以通过将文件添加到项目中期望的名称来抑制警告，包括`Default-Portait~ipad.png`. 我真的宁愿首先停止将这些名称添加到“Info.plist”中，因为这些重复的条目可能会导致其他问题。

## 其他详情

该项目创建于 2011 年初，并已通过更新版本的 XCode 逐步迁移。它目前在 XCode 版本 4.3.2 (4E2002) 中打开。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T12:15:08.607

找到它：选择一个目标并转到“信息”选项卡，您会得到类似于“Info.plist”的内容......但在那里所做的更改可能会覆盖您的 Info.plist。这尤其令人困惑，因为我故意让多个目标共享同一个“Info.plist”文件，以避免需要在多个地方进行相同的更改。

我仍然欢迎解释这些设置在“.xcodeproj”包中的存储位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T01:32:14.487

我有同样的问题——Xcode 对我做了一个新项目。我在目标上的信息选项卡显示同样的混乱。我想我会检查更新的 iOS6 文档并将此处的条目编辑为最佳形式。

# ssl - OpenSSL 中的自签名证书是什么意思

> ID：10361613
> 
> 赞同：5
> 
> 时间：2012-04-28T07:41:57.173
> 
> 标签：ssl, cryptography, openssl, ssl-certificate

我是`OpenSSL`工具的初学者。我不明白一些概念。你能给我解释一下这些概念吗？我想了解诸如`CA`或`Self-Signed Certificate`任何概念以便更好地理解。

（对不起，如果我使用了错误的术语或语法，我正在学习英语。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T16:30:23.557

证书的目的是以您可以验证的方式声明一条信息。公钥证书，在此上下文中更具体地说是 X.509 证书，断言公钥、标识符（主题可分辨名称和/或主题备用名称）和各种其他属性之间的绑定。总之，对这些信息进行签名以形成证书。

X.509 证书同时具有颁发者和主题。主题是表示该证书标识谁或什么（以及谁或什么拥有与该证书中的公钥匹配的私钥）的标识符。颁发者代表使用其私钥签署此证书的个人或组织的标识符。

证书的使用可以大致分为两个不同的类别：用于特定应用程序或服务的证书（例如验证 SSL/TLS 服务器），以及用于证明其他证书有效性的证书。

对于后者，证书被用作公钥基础设施 (PKI) 的构建块。证书颁发机构 (CA) 是颁发证书的机构：它签署将证书中的公钥绑定到主题的断言。这样做时，它将自己的名称作为颁发者名称放入其颁发的证书中。

如果您将证书与护照（将您的照片和您的姓名绑定在一起）进行比较，那么 CA 将是您的护照授权机构：那些真正证明护照内容真实的人，以便其他人能够验证它。

信任 CA 允许您信任它颁发的证书。您可以在您信任的 CA 和您以前从未见过的 CA 颁发的证书之间建立信任链。

随之而来的是一个“引导”问题：您如何信任 CA 本身？

自签名证书是颁发者和主体相同的证书；它们使用与其包含的公钥匹配的私钥进行签名。他们处于信任链的顶端。它们往往是 CA 证书（除非为特定服务定制，如果没有外部验证，您将无法信任该证书）。

CA 证书是可用于颁发/验证其他证书的证书。（如果它们位于根/自签名 CA 证书和您希望验证的证书之间的链中间，则它们可以是中间 CA 证书。）定义如何使用证书来验证其他证书的规则在[PKIX 规范 (RFC 3280/5280)](https://www.rfc-editor.org/rfc/rfc5280)。

默认情况下，浏览器和操作系统附带一个预先安装的 CA 证书列表。这些主要是商业 CA，它们检查证书中有关服务的信息，通常是收费的。相反，您可以信任他们颁发的证书的内容（大多数时候，这不是一个完美的系统）。这里涉及到“信仰的飞跃”，因为您需要相信浏览器/操作系统只包含有信誉的 CA 证书。

如果您使用`openssl s_client`并看到诸如“链中的自签名证书”或“无法验证证书”之类的消息，这并不一定意味着出现问题，而是`openssl`未使用预定义的受信任 CA 列表默认证书。它的大多数命令都有一个选项，例如`-CAfile`或`CApath`允许您指定您愿意信任的 CA 证书。

服务的自签名证书是一种特殊情况，即服务自行声明其内容。您通常无法验证此类证书的真实性，除非您有外部信任它的方式（例如，如果您自己将其安装在机器上并手动更改检查其内容，或者如果您信任的人提供了它给你）。

（您可能还对[这个](https://security.stackexchange.com/a/14089/2435)关于如何使用 HTTPS 服务器证书的问题感兴趣。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T07:55:59.223

一般来说，证书的目的是建立信任链：“我信任这家第三方公司，他们信任你，所以我可以信任你。” 自签名证书意味着您自己生成了它，因此我真的不信任您。（这些非常适合测试，但仅此而已。）另一种类型是受信任的证书，通过让信誉良好的公司向您出售证书（如 Verisign）获得。这是一个商品市场，因此它们的价格在公司之间非常一致。它确实取决于预期用途和证书的范围。（例如，用于签署 Android 应用程序的证书与用于验证[https://www.example.com/](https://www.example.com/)的证书非常不同。）

“CA”或证书颁发机构是颁发证书的公司。在可信证书的情况下，它是那家公司——例如 Verisign。在自签名证书的情况下，CA 是您——您颁发了证书。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T08:04:00.217

自签名证书会在大多数浏览器中引起某种“不受信任”警报，询问您是否要继续并添加异常等。但这并不意味着连接的安全性降低——它仍然通过 SSL。

一般来说，CA 是收费的，但如果你搜索的话，周围有一些免费的。

# c# - 在客户端加密的最佳实践

> ID：10361614
> 
> 赞同：0
> 
> 时间：2012-04-28T07:42:04.600
> 
> 标签：c#, .net, security, encryption

我目前正在使用允许“加密”选项的 Web API。

我可以将我的帐户设置为具有“共享密钥”，并且使用此密钥我应该在提交到服务器之前加密客户端上的所有数据。

他们网站上的详细信息：

> 加密算法：DES
> 
> 区块模式：欧洲央行
> 
> 填充：PKCS7 或 PKCS5（它们是可互换的）

在这个意义上，我相信“共享密钥”是一种对称算法 - 用于解密/加密的相同密钥，尽管我可能在这个问题上错了。

我想知道在客户端处理这种情况的最佳做法是什么？

如果我的应用程序的逻辑应该使用此密钥来加密数据，那么它对黑客的安全性如何？

请注意，我的应用程序是用 C# 编写的，这意味着它实际上可以免费反编译。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T09:00:16.827

除非您的密钥被泄露，否则您的数据传输是安全的——任何窃听您的客户端-服务器连接的人都无法解密您的数据，除非他们拥有您的密钥。

您的主要挑战在于在客户端和服务器上本地安全存储密钥。为此，我建议研究通过 .NET 中的[ProtectedData](http://msdn.microsoft.com/en-us/library/system.security.cryptography.protecteddata.aspx)类公开的 Windows 数据保护 API (DPAPI)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T08:27:00.063

如果`shared key`意味着`public key`，那么您很可能正在使用一种称为[非对称加密](http://en.wikipedia.org/wiki/Asymmetric_encryption)的算法。这样你对黑客来说是安全的，因为公钥不能用于解密数据。

如果它是对称的，那么一切都取决于密钥的安全性。您可以将其与程序分开存储（因此用户可以将其安全地存储在闪存驱动器上）。所以每个用户都必须有自己的密钥，不可能对所有人都使用一个对称密钥。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T10:36:55.613

这样，客户端将使用不同的密钥对数据进行加密，而服务器将使用不同的密钥进行解密。这称为非对称加密/解密。

.NET Framework 为非对称加密提供了 RSACryptoServiceProvider 和 DSACryptoServiceProvider 类。当您使用默认构造函数创建新实例时，这些类会创建一个公钥/私钥对。非对称密钥可以存储以供多个会话使用，也可以仅为一个会话生成。虽然公钥可以普遍可用，但私钥应受到严密保护。

```
For example [VB.NET]: 

Dim cspParam as CspParameters = new CspParameters()
cspParam.Flags = CspProviderFlags.UseMachineKeyStore
Dim RSA As System.Security.Cryptography.RSACryptoServiceProvider
           = New System.Security.Cryptography.RSACryptoServiceProvider(cspParam)

The key information from the cspParam object above can be saved via:

Dim publicKey as String = RSA.ToXmlString(False) ' gets the public key
Dim privateKey as String = RSA.ToXmlString(True) ' gets the private key

The above methods enable you to convert the public and / or private keys to Xml Strings.
 And of course, as you would guess, there is a corresponding FromXmlString method to get them back. 
 So to encrypt some data with the Public key. The no-parameter constructor is used as we are loading our keys from XML and 
 do not need to create a new cspParams object:

Dim str as String = "HelloThere"
Dim RSA2 As RSACryptoServiceProvider = New RSACryptoServiceProvider()
' ---Load the private key---
RSA2.FromXmlString(privateKey)
Dim EncryptedStrAsByt() As Byte =RSA2.Encrypt(System.Text.Encoding.Unicode.GetBytes(str),False)
Dim EncryptedStrAsString = System.Text.Encoding.Unicode.GetString(EncryptedStrAsByt)

and as a "proof of concept", to DECRYPT the same data, but now using the Public key:

Dim RSA3 As RSACryptoServiceProvider = New RSACryptoServiceProvider(cspParam)
'---Load the Public key---
RSA3.FromXmlString(publicKey)
Dim DecryptedStrAsByt() As Byte =RSA3.Decrypt(System.Text.Encoding.Unicode.GetBytes(EncryptedStrAsString), False)
Dim DecryptedStrAsString = System.Text.Encoding.Unicode.GetString(DecryptedStrAsByt) 
```

# c++ - 多级继承/多态性和虚函数

> ID：10361625
> 
> 赞同：0
> 
> 时间：2012-04-28T07:43:26.360
> 
> 标签：c++, function, inheritance, polymorphism, virtual

我有一个多级继承（来自 Ship 类 -> MedicShip 类 -> Medic 类），其虚函数代码如下。我想结果应该是：

医生 10
医生 10

但它产生了奇怪的结果。另一方面，如果我只使用一个级别的继承（从 Ship 类 -> Medic 类，中间没有 MedicShip 类），结果就可以了。你能找出我的错误吗？多谢....

```
#ifndef FLEET_H
#define FLEET_H
#include <string>
#include <vector>

using namespace std;

class Ship
{
    public:
        Ship(){};
        ~Ship(){};
        int weight;
        string typeName;

        int getWeight() const;
        virtual string getTypeName() const = 0;
};

class MedicShip: public Ship
{
    public:
        MedicShip(){};
        ~MedicShip(){};
        string getTypeName() const;
};

class Medic: public MedicShip
{
    public:
        Medic();
};

class Fleet
{
    public:
        Fleet(){};
        vector<Ship*> ships;
        vector<Ship*> shipList() const;
};
#endif // FLEET_H

#include "Fleet.h"
#include <iostream>

using namespace std;

vector<Ship*> Fleet::shipList() const
{
    return ships;
}

int Ship::getWeight() const
{
    return weight;
}

string Ship::getTypeName() const
{
    return typeName;
}

string MedicShip::getTypeName() const
{
    return typeName;
}

Medic::Medic()
{    
    weight = 10;    
    typeName = "Medic";
}

int main()
{
    Fleet fleet;
    MedicShip newMedic;

    fleet.ships.push_back(&newMedic);
    fleet.ships.push_back(&newMedic);

    for (int j=0; j< fleet.shipList().size(); ++j)
    {
        Ship* s =  fleet.shipList().at(j);
        cout << s->getTypeName() << "\t" << s->getWeight() << endl;
    }

    cin.get();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T07:59:45.330

您还没有创建任何 class 实例`Medic`。你的意思是说

```
Medic newMedic; 
```

代替

```
MedicShip newMedic; 
```

也许？所以，`Medic`构造函数没有被调用，`weight`也`typeName`没有被初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T07:51:35.887

```
~Ship(){}; 
```

第一个错误就在这里。`virtual`如果您想通过基类指针删除派生类对象，则应该使用此析构函数 。

# javascript - Javascript：尝试使表单提交按钮在新窗口中打开，链接由单选按钮确定

> ID：10361626
> 
> 赞同：0
> 
> 时间：2012-04-28T07:43:45.107
> 
> 标签：javascript, window.open

```
<script>
function onRadioClick(radio) {
  radio.form.action = radio.value;
}
function onFormSubmit(form) {
  window.location = form.action;
  return false;   
}
</script>

<form name="input" action="#" method="get" onsubmit="window.open.return onFormSubmit(this)">
<label><input type="radio" name="destination" onclick="onRadioClick(this)" value="yes.html" />YES!</label><label><input type="radio" name="destination" 

onclick="onRadioClick(this)" value="no.html"/>No</label>
<input type="submit" value="Submit"> 
```

我不明白为什么“window.open”不起作用。提交按钮在当前选项卡中打开链接。我让它正常工作一次，我认为这是这个确切的代码，但我没有保存我的工作，现在我无法让它再次工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T07:48:44.513

这是一个语法错误： `onsubmit="window.open.return onFormSubmit(this)"`

试试这个：

`onsubmit="window.open('the url')"`

或这个：

`onsubmit="return onFormSubmit(this)"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T07:51:32.393

你可以试试这个：

```
form.setAttribute("target", "_blank"); 
```

（或这个

```
<form target="_blank" ...></form> 
```

# ios - 如何在 iOS 的 UIWebView 中显示离线连接错误？

> ID：10361628
> 
> 赞同：0
> 
> 时间：2012-04-28T07:44:28.273
> 
> 标签：ios, cocoa-touch

当互联网连接在 UIWebView 中脱机时，我想向用户显示错误。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T07:52:56.773

您可以简单地使用[Reachability](https://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html) Class 。看看 Andrew Zimmer[那里](https://stackoverflow.com/questions/1083701/how-to-check-for-an-active-internet-connection-on-iphone-sdk)以简单方式制作的答案的实施步骤。

用于 ARC 模式的现代开发。您可以使用[这些](https://github.com/tonymillion/Reachability)与 ARC 模式兼容的项目。

祝你好运 ！

# php - 谷歌图表显示“无可用数据”

> ID：10361631
> 
> 赞同：0
> 
> 时间：2012-04-28T07:44:49.043
> 
> 标签：php, javascript, mysql, charts, google-visualization

我想使用 php 从 MySQL 中的数据创建图表。我使用 json_encode 在谷歌图表中获取数据。我可以看到图表，但它显示没有可用的数据。下面是我的图表页面的页面源。

```
<html>
<head>
</head>
<body>

 <script type="text/javascript">
   var encoded_P1data = ["1111","1234","1111","1111","1234","1111","1111","1234","1111","1111"];
   var encoded_P2data = ["2222","2345","2222","2222","2345","2222","2222","2345","2222","2222"];
   var encoded_P3data = ["3333","3456","3333","3333","3456","3333","3333","3456","3333","3333"];
   var encoded_P4data = ["4444","4567","4444","4444","4567","4444","4444","4567","4444","4444"];
   var encoded_xdata = ["10:20:00","10:20:00","10:20:00","10:20:00","10:20:00","10:20:00","10:20:00","10:20:00","10:20:00","10:20:00"];
 </script>
 <script  type="text/javascript" src="jsapi.js"></script> 
 <script type="text/javascript">
   google.load('visualization', '1', {'packages':['annotatedtimeline']});
   google.setOnLoadCallback(drawChart);
   var RecordTime= new Array;
   var P1data = new Array;  // This would be the first array passed from PHP
   var P2data = new Array;  // This would be the second array passed from PHP
   var P3data= new Array; // This would be the third array passed from PHP
   var P4data = new Array;  // This would be the second array passed from PHP

  P1data = encoded_P1data;  
  P2data = encoded_P2data;  
  P3data= encoded_P3data; 
  P4data = encoded_P4data; 
  RecordTime = encoded_xdata ;

  function drawChart() {
    var data = new google.visualization.DataTable();

   data.addColumn('datetime', 'RecordTime');
   data.addColumn('number', 'P1');
   data.addColumn('number', 'P2');
   data.addColumn('number', 'P3');
   data.addColumn('number', 'P4');

   /* create for loops to add as many columns as necessary */
   var len = encoded_P1data.length;
   data.addRows(len);
   for(i=0; i<len; i++) {
     data.setValue(i, 0, new Date(RecordTime[i])),
     //data.setValue(i, 0, RecordTime([i]));     /* x-axis */
     data.setValue(i, 1, parseInt(P1data[i])),   /* Y-axis category #1*/
     data.setValue(i, 2, parseInt(P2data[i])),   /* Y-axis category #2*/
     data.setValue(i, 1, parseInt(P3data[i])),   /* Y-axis category #3*/
     data.setValue(i, 2, parseInt(P4data[i]))   /* Y-axis category #4*/
   }

   /**************************end of loops*****************************/

   var chart = new
     google.visualization.AnnotatedTimeLine(document.getElementById('chart_div'));
   chart.allowRedraw = true;
   chart.draw(data, {displayAnnotations: false });
 }
 //chart.draw(data);
 </script>
 </body>

 <div id='chart_div' style='width: 800px; height: 600px;'></div>

 </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T04:17:59.883

这是上面我自己的问题的答案...

```
 <html>
   <head>
   </head>
   <body>

      <script type="text/javascript">
           var encoded_P1data =["1111","1234","1111","1111","1234","1111","1111","1234","1111","1111"];
           var encoded_P2data = ["2222","2345","2222","2222","2345","2222","2222","2345","2222","2222"];
           var encoded_P3data = ["3333","3456","3333","3333","3456","3333","3333","3456","3333","3333"];
           var encoded_P4data=["4444","4567","4444","4444","4567","4444","4444","4567","4444","4444"];
           var encoded_xdata = ["10:20:00","10:20:00","10:20:00","10:40:00","10:50:00","11:00:00","11:10:00","11:20:00","11:30:00","11:40:00"];
       </script>

        <script  type="text/javascript" src="jsapi.js"></script> 
        <script type="text/javascript">
        google.load('visualization', '1', {'packages':['annotatedtimeline']});
         google.setOnLoadCallback(drawChart);
        var RecordTime= new Array;
        var P1data = new Array;  // This would be the first array passed from PHP
        var P2data = new Array;  // This would be the second array passed from PHP
        var P3data= new Array; // This would be the third array passed from PHP
        var P4data = new Array;  // This would be the second array passed from PHP

       P1data = encoded_P1data;  
       P2data = encoded_P2data;  
       P3data= encoded_P3data; 
       P4data = encoded_P4data; 
       RecordTime = encoded_xdata ;

         function drawChart() {
     var data = new google.visualization.DataTable();

    data.addColumn('datetime', 'RecordTime');
    data.addColumn('number', 'P1');
    data.addColumn('number', 'P2');
    data.addColumn('number', 'P3');
    data.addColumn('number', 'P4');

      /* create for loops to add as many columns as necessary */

      // changed because you didn't give me a jsonarray variable
      //var len = jsonarray.length;
     var len = RecordTime.length;

     data.addRows(len);
    for (i = 0; i < len; i++) {
       // we need to convert times to Date objects
        var timesplit = RecordTime[i].split(':');
         data.setValue(i, 0, new Date(2000, 0, 0, timesplit[0], timesplit[1], timesplit[2])); /* x-axis */
        data.setValue(i, 1, parseInt(P1data[i])); /* Y-axis category #1*/
        data.setValue(i, 2, parseInt(P2data[i])); /* Y-axis category #2*/
        data.setValue(i, 3, parseInt(P3data[i])); /* Y-axis category #1*/
        data.setValue(i, 4, parseInt(P4data[i])); /* Y-axis category #2*/
     }
    /*********************************end of 
      loops***************************************/

     // changed chart to AnnotatedTimeline
    var chart = new     google.visualization.AnnotatedTimeLine(document.getElementById('chart_div'));
     chart.allowRedraw = true;
     chart.draw(data, {
        displayAnnotations: false,
         // format time to show only hours:minutes:seconds
        dateFormat: 'HH:mm:ss'
      });
   }​
 </script>
      <div id="chart_div" style="height: 400px; width: 600px;"></div>​
  </body>
  </html> 
```

# asp.net - 调试内存使用

> ID：10361640
> 
> 赞同：1
> 
> 时间：2012-04-28T07:46:17.500
> 
> 标签：asp.net, asp.net-mvc-3

我们的一个 ASP.NET MVC3 Web 应用程序在单个 IIS7 池上托管时占用了太多内存。有时高达 1GB。我应该从哪里开始以及如何找到内存问题，有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T07:53:13.340

我会先查看数据库，因为这主要是为了增加内存分配。

*   你要关闭所有打开的连接吗？
*   您是否正在重用打开的连接以从数据库中获取更多数据？
*   您是否打开和关闭每个呼叫的连接？

有几种工具可以为您提供代码和内存分析，但在跳入其中之一之前，请尝试“我们的”自己的**StackOverflow Profiling** ，现在称为[Mini Profiler](http://miniprofiler.com/)，以帮助您了解您在哪里浪费更多时间，多长时间您的查询会查看您是否正确地进行了数据库访问...

如果这没有帮助，请尝试其中一种免费/商业工具，例如：

*   [.Net 内存分析器](http://memprofiler.com/)
*   [ANTS 性能分析器](http://www.red-gate.com/products/ants_performance_profiler/)
*   [dotTrace 4 性能](http://www.jetbrains.com/profiler/)
*   [EQATEC 轮廓仪](http://eqatec.com/profiler/)

或跟进这个问题

> [有没有像样的 C# 分析器？](https://stackoverflow.com/questions/10644/any-decent-c-sharp-profilers-out-there)

# android - 动态创建 EditText 并从每个 EditText 获取它们的文本

> ID：10361643
> 
> 赞同：1
> 
> 时间：2012-04-28T07:46:50.697
> 
> 标签：android

我已经动态创建了 EditText 视图现在我想将他们的文本放入一个列表或数组中，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T07:52:57.740

当您像这样动态地创建它们时，您必须获取您的编辑文本的参考。

```
 EditText ed;
    List<EditText> allEds = new ArrayList<EditText>();

 for (int i = 0; i < count; i++) {   
   //count is number of edittext fields
ed = new EditText(MyActivity.this);
allEds.add(ed);

linear.addView(ed);
} 
```

现在 allEds 将具有对您的编辑文本的引用..您可以获得这样的文本..

```
 String [] items=new String[allEds.size()]
 for(int i=0; i < allEds.size(); i++){
 items[i]=allEds.get(i).getText().toString();
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T08:14:24.133

您可以创建两个`List`，一个用于存储动态创建`EditText`的，一个用于存储其文本。

然后使用循环遍历`EditText`列表`for-each`并获取每个文本`EditText`并将其添加到文本列表中。

```
List<EditText> myList = new ArrayList<EditText>();
List<String> etText = new ArrayList<String>();
EditText myEt1 = new EditText(this);
EditText myEt2 = new EditText(this);
EditText myEt3 = new EditText(this);
//so on...

myList.add(myEt1);
myList.add(myEt2);
myList.add(myEt3);

for(EditText et : myList){
String settext = et.getText().toString();
etText.add(settext);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T08:22:21.383

如果您的问题是对这些视图的可访问性：

```
// assume ll is your container LinearLayout and your EditTexts inserted in it
LinearLayout ll;
int nViews = ll.getChildCount();

for (int i = 0; i < nViews; i++) {
    View child = ll.getChildAt(i);
    if (child instanceof EditText ) {
        EditText edt= (EditText) child;
        //...
    }
} 
```

# algorithm - 蛮力排列

> ID：10361649
> 
> 赞同：1
> 
> 时间：2012-04-28T07:48:18.587
> 
> 标签：algorithm

我正在阅读以下文章，无法理解第 4 段背后的逻辑

> 给你 N 个灯和四个开关。第一个开关切换所有灯，第二个切换偶数灯，第三个切换奇数灯，最后一个开关切换灯 1、4、7、10，...。
> 
> 给定灯的数量 N、按下按钮的次数（最多 10,000 次）以及一些灯的状态（例如灯 7 关闭），输出灯可能处于的所有可能状态。
> 
> 天真地，对于每个按钮按下，您必须尝试 4 种可能性，总共 4^10000 （大约 10^6020 ），这意味着您无法进行完整搜索（这种特定算法将利用递归）。
> 
> 注意到按钮按下的顺序无关紧要，这个数字下降到大约 10000^4 （大约 10^16 ），仍然太大而无法完全搜索（但肯定更接近 10^6000 倍）。
> 
> 但是，按两次按钮与没有按一次按钮相同，因此您真正需要检查的是按每个按钮 0 次或 1 次。这只是 2^4 = 16 种可能性，肯定是在时间限制内可以解决的迭代次数。

当订单无关紧要时，总配置的数量是多少 10000^4 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T07:54:05.077

作者规定按钮按下次数限制为 10,000 次：

> 按下按钮的次数（最多 10,000 次）

and if you know the order of button presses doesn't matter, but nothing else, then all that matters is how many times each button has been pressed. There are 10,000 possibilities for each of 4 buttons, so about 10000^4 overall. (Of course the real number is a bit smaller because you can't, e.g., have pressed all four buttons 10,000 times each.)

# jquery - 用于网站注释/旅游的 jquery 插件？

> ID：10361655
> 
> 赞同：12
> 
> 时间：2012-04-28T07:48:53.817
> 
> 标签：jquery, plugins

是否有一个 jquery 插件可以像网站的教程一样一步一步地屏蔽和聚焦一些 html 元素？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-28T08:01:22.983

[Jquery Guiders](https://github.com/jeff-optimizely/Guiders-JS)是一个不错的选择。

Revaxarts 提供了一个[出色的站点浏览插件。](http://codecanyon.net/item/jquery-tour-the-flexible-tour-plugin/1052564)（付费/非免费）

如果你不喜欢这个，那么[jQuery Tools 暴露插件](http://jquerytools.org/demos/toolbox/expose/index.html)就是你所需要的。

另一种选择可以是[this](http://www.zurb.com/playground/jquery-joyride-feature-tour-plugin)。

# java - 在java中加密数据库用户名和密码？

> ID：10361659
> 
> 赞同：0
> 
> 时间：2012-04-28T07:49:21.127
> 
> 标签：java, database, oracle, encryption, jdbc

实际上，通过来自 java 的类型 4 db 连接，我正在连接到 oracle 数据库，如下所示：

在 dbconnection.java 我写在下面：

```
 Class.forName("oracle.jdbc.driver.OracleDriver"); 
   con=DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:database host name","database user name", "database user password"); 
  return con; 
```

有什么方法可以在java类dbconnection.java中以加密形式编写这3个字段（数据库主机，数据库用户名，数据库用户密码），如下所示：

```
 Class.forName("oracle.jdbc.driver.OracleDriver"); 
   con=DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:wrtwtr#$%$_rfwrw","regfwerfgwf", "%%5frfr^&%$%4"); 
  return con; 
```

**并且在数据库连接过程中，这些加密字段会被解密，并以实名连接到oracle数据库**

然后在 servlet 中我调用如下：

```
 dbconnection db= new dbconnection(); 
```

请提供任何帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T08:10:01.180

我不知道有什么方法可以做到这一点。

但我也看不出这样做会取得什么成果。当然，用户名和密码没有清楚地显示，但是有权访问这些加密字符串的坏人将能够像您的程序一样使用它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T09:03:03.497

您应该提供一种安全的方式来允许外部控制的应用程序（或应用程序的实例）访问您的数据库，而不是试图隐藏您的连接详细信息。

API 基本上是您的数据库和您无法控制的应用程序之间的中间层。例如，facebook 不允许直接访问他们的数据库，而是允许开发人员通过 API 访问他们的数据。这意味着可以对应用程序进行身份验证（因此可以对它们负责），并且您可以明确控制哪些应用程序可以查看和编辑哪些应用程序。

基本上，通过 API，您可以保护您的数据库，同时跟踪谁在做什么（尽管保护方面通常是主要吸引力）。

我必须说，有时，如果您信任使用该应用程序的人，那么不用担心会更容易。例如，如果您在一家有能力、善意的小公司工作，那么允许应用程序直接连接到数据库可能是安全的。

但是，如果您将程序分发给公众，或者您不完全信任的一大群人，那么无论采取何种预防措施，您都不应允许直接访问。

假设您确实知道如何加密您的凭据。在某些时候，您仍然必须建立连接。如果用户获取解密/连接代码，建立连接，然后在其后插入他自己的代码，现在会发生什么？突然，他可以访问您的数据库。使用 API，最坏的情况是，他可以窃取 API 密钥并获得有限的、可追踪的、可轻松撤销的访问权限。

此外，如果您允许访问 API，则您只允许用户执行您希望他们执行的操作。所以最坏的情况是，如果他确实弄清楚如何直接使用 API，那么他所能做的就是程序允许他做的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T08:22:01.283

将加密数据传递给服务器`DriverManager`不是一种选择。
您应该将解密的字符串传递到`DriverManager`. 所以在某个地方你会加密用户名和密码，然后在将它们传递给**之前**`DriverManager`
解密它们 然后你会有其他问题，例如在哪里存储私钥等，但作为第一道防御它会比使用明文更好，因为我的理解是你有一些安全要求。

你没有提到你正在使用什么操作系统。如果您使用的是 Windows，我建议使用[基于 Windows 的身份验证](http://docs.oracle.com/cd/B28359_01/win.111/b32010/authen.htm)（与数据库的连接是针对当前 Windows 用户进行身份验证的）。因此无需在连接字符串中提供用户名和密码。检查 Oracle 是否支持此功能（仅尝试使用 MS-SQL 服务器。希望我提供的链接有用）。
这是恕我直言的最佳选择。对于 Linux，必须有等价的东西。

# php - 我如何在 mac 中为 slim 框架配置 .htacces

> ID：10361670
> 
> 赞同：0
> 
> 时间：2012-04-28T07:51:44.730
> 
> 标签：php, apache, .htaccess, slim

当我想在 Mac 操作系统上使用 Slim 运行我的第一个应用程序时，我遇到了问题。我已经像这样配置了 .htaccess 文件：

```
RewriteEngine On 
RewriteCond %{REQUEST_FILENAME} !-f 
RewriteRule ^(.*)$ index.php [QSA,L] 
```

我已经在 httpd.conf 中配置了加载模块重写，并将 index.php 放在与 .htaccess 文件相同的目录中。

这是我的 PHP 代码（我使用的是 PHP 5.3）

```
<?php                                            
require 'Slim/Slim.php';                         
$app = new Slim();                               
$app->get('hello/:name',function($name) {         
    echo 'Hello' .$name;                         
});                                              
$app->run();                                     
?> 
```

当我在浏览器中使用 运行它时`http://localhost/slim/hello/test`，我收到错误 404。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T10:55:11.733

对不起，我解决了问题，我的代码中没有`/`字符

```
$app->get('hello/:name',function($name){         
    echo 'Hello' .$name;                         
}); 
```

我用这段代码解决了

```
$app->get('/hello/:name',function($name){         
    echo 'Hello' .$name;                         
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T10:35:09.080

我认为重写规则应该是（在 index.php 上使用前导“/”表示我们希望 index.php 在根目录中）

```
RewriteRule ^(.*)$ /index.php [QSA,L] 
```

# javascript - 如何在网页中添加两个css文件，一个用于safari浏览器，一个用于ipad桌面版

> ID：10361676
> 
> 赞同：-1
> 
> 时间：2012-04-28T07:53:07.630
> 
> 标签：javascript, html, css, ipad

我有一个网页，我希望应该有两个 css 文件我的网页是在 ipad 上的 safari 浏览器中打开的，它应该加载 css 一个，如果它在没有浏览器的情况下直接打开，它应该加载 css 两个。当你有网页书签时它有ipad 主屏幕上的图标，所以当我点击它时，它会打开没有地址栏的网页，比如 safari 浏览器，它会显示来自 botton 的空格，这在 safari 上使用地址栏在线时不会显示

```
 <link type="text/css" href="newstyle.css" media="only screen and (min-device-height:674px)and (min-device-width:1024px)  and (orientation:landscape)" rel="stylesheet"  />

      <link type="text/css" href="newstyle_1.css" media="only screen and (min-device-height:748px) and  (min-device-width:1024px)  and (orientation:landscape)" rel="stylesheet"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T08:15:24.767

请根据宽度使用这种方法，我们可以解决问题，我们正在使用这种方法

```
<link rel="stylesheet" media="screen and (max-width: 768x)" href="ipad.css" />

<link rel="stylesheet" media="screen and (max-width: 1024px)" href="desktop.css" />

<link rel="stylesheet"href="comon.css" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T07:55:06.340

为什么不将它们完全合并呢？节省您的时间、精力和 HTTP 请求。并且在您使用 CSS 压缩器时也可以使用它，从而节省下载时间和带宽。

# jquery - Struts2 JQGrid，需要例子来做

> ID：10361678
> 
> 赞同：0
> 
> 时间：2012-04-28T07:53:17.777
> 
> 标签：jquery, json, jqgrid, struts2, annotations

struts2 框架的新手。

我想以网格格式查看客户详细信息。

在网上搜索，最好的结果说使用 jqgrid。

我做了以下事情：

1.  添加了必要的 Jar 文件，例如，jquery、json、jqgrid、convention...
2.  使用 jsp 和 jqgrid 标签创建设计视图，
3.  带有注释的 Cated 动作类...

它没有显示任何错误，但在部署或运行​​时它不起作用。

请任何人提供完整的工作示例供我参考

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T09:11:59.600

你看过展示应用程序吗？这是一个完整的工作示例。也许下面的幻灯片给你一个开始。

[http://www.slideshare.net/johannesgeppert1/introduction-into-struts2-jquery-grid-tags](http://www.slideshare.net/johannesgeppert1/introduction-into-struts2-jquery-grid-tags)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T12:22:18.927

```
Here is the Solution for your problem create a grid action which is shown as below 

    port java.util.ArrayList;
    import java.util.List;
    import java.util.Map;

    import javax.servlet.http.HttpServletRequest;

    import org.apache.struts2.interceptor.ServletRequestAware;

    import com.opensymphony.xwork2.ActionContext;
    import com.opensymphony.xwork2.ActionSupport;
    import com.opsbuds.rju.modules.usermgmt.bo.RoleManagementBo;
    import com.opsbuds.rju.modules.usermgmt.bo.UserManagementBo;
    import com.opsbuds.rju.modules.usermgmt.model.Role;

    public class viewRolesGridAction extends ActionSupport  implements 
    ServletRequestAware{
        private List<String> module = new ArrayList<String>();
        private Map session;
        HttpServletRequest request;
        private List<Role> roles; 
        private List<Role> roles1; 
        public List<Role> getRoles() {
            return roles;
        }

        /**
         * @return the roles1
         */
        public List<Role> getRoles1() {
            return roles1;
        }

        /**
         * @param roles the roles to set
         */
        public void setRoles(List<Role> roles) {
            this.roles = roles;
        }
            public void setRoles1(List<Role> roles1) {
            this.roles1 = roles1;
        }
        public List getModule() {
            return module;
        }
        public void setModule(List module) {
            this.module = module;
        }      
        public void getModules() {       
        Map session = ActionContext.getContext().getSession();
        session.get("module");
        setModule((List) session.get("module"));
        }
         public List<Role> getGridModel() {
                return gridModel;
            }

            public void setGridModel(List<Role> gridModel) {
                this.gridModel = gridModel;
            }

          private List<Role>      gridModel;

          //get how many rows we want to have into the grid - rowNum attribute in the grid
          private Integer             rows             = 0;

          //Get the requested page. By default grid sets this to 1.
          private Integer             page             = 0;

          // sorting order - asc or desc
          private String              sord;

            public Integer getPage() {
                return page;
            }

            public void setPage(Integer page) {
                this.page = page;
            }

          // get index row - i.e. user click to sort.
          private String              sidx;

          // Search Field
          private String              searchField;

          // The Search String
          private String              searchString;

          // he Search Operation ['eq','ne','lt','le','gt','ge','bw','bn','in','ni','ew','en','cn','nc']
          private String              searchOper;

          // Your Total Pages
          private Integer             total            = 0;

            public Integer getRecords() {
                return records;
            }

            public void setRecords(Integer records) {
                this.records = records;
            }

            public Integer getTotal() {
                return total;
            }

            public void setTotal(Integer total) {
                this.total = total;
            }

          // All Record
          private Integer             records          = 0;

             public Integer getRows() {
                 return rows;
         }

         public void setRows(Integer rows) {
                 this.rows = rows;
         }
         public void setServletRequest(HttpServletRequest request) {
                this.request = request;
            }

        //  @Actions( {
    //      @Action(value = "/viewRolestemp", results = {
    //        @Result(name = "success", type = "json")
    //      })
        //  })
          public String execute()
          {
              getModules();

             // rows=10;
              System.out.println("xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxInside VIEWRolesAct execute method---------------------------------------------------------------------");

        //
            int to = (rows * page);
            int from = to - rows;

            //Count Rows (select count(*) from custumer)
          //records = 9;
              RoleManagementBo rolemgmt = new RoleManagementBo();
                if (RoleAction.rolesinserttatus) {
                    System.out.println("role status");
                    addActionMessage(("Role saved successfully"));
                    RoleAction.rolesinserttatus = false;
                }
                if (RoleAction.roleupdatestatus) {
                    addActionMessage(("Role updated successfully"));

                }
                try{
                roles = rolemgmt.viewRoles();
                records=roles.size();
                getModules();
                RoleAction.rolesinserttatus = false;
                RoleAction.roleupdatestatus = false;
                }catch (Exception e) {
                    addActionError(getText(""));
                }

            to = (getRows() * getPage());
            if (to > getRecords())
                    to = getRecords();
            roles1 =  new ArrayList();

            for(int i=from;i<to;i++)
                {
                roles1.add(roles.get(i));

                }

              gridModel = roles1;

            setTotal((int) Math.ceil((double) getRecords() / (double) getRows()));

            return SUCCESS;
          }

          public String getJSON()
          {
              getModules();
            return execute();
          }
    } 
```

创建一个在这里显示的jsp

```
<s:url id="remoteurl" action="viewRolestemp" />

                <sjg:grid id="gridtable" caption="Roles" dataType="json"
                    href="%{remoteurl}" pager="true" gridModel="gridModel"
                    rowList="10,15,20" rowNum="10" rownumbers="true"
                    width="800" navigator="true" navigatorView="false" navigatorDelete="false" navigatorAdd="false" navigatorEdit="false" navigatorSearch="false">

                    <sjg:gridColumn name="roleName" index="roleName" title="Role Name"
                        sortable="true" formatter="editrole" />
                    <sjg:gridColumn name="createdDate" index="createdDate"
                        title="Created Date" sortable="true" />
                    <sjg:gridColumn name="modificationDate" index="modificationDate"
                        title="Modified on" sortable="true" />

                </sjg:grid> 
```

在动作类中配置

```
<action name="viewRolestemp"
            class="com.opsbuds.rju.modules.usermgmt.action.viewRolesGridAction">
            <result name="input">/jsp/usermgmt/viewRoles.jsp</result>
            <result name="success" type="json">>/jsp/usermgmt/viewRoles.jsp
            </result>
            <result name="error">/jsp/usermgmt/viewRoles.jsp</result>
        </action> 
```

# php - cURL不处理外来http字符php

> ID：10361687
> 
> 赞同：0
> 
> 时间：2012-04-28T07:54:19.533
> 
> 标签：php, curl, urlencode

我在一个字符串中有一个不幸的是外来字符的 url。当我将它们发送到 curl_setopt ($go, CURLOPT_URL, $url) 时，没有任何反应，命令没有运行。另一方面，当我使用我的 chrome 浏览器并复制链接位置时，它有外来字符并突然将它们粘贴到浏览器上，外来字符被编码为 %20%D5%F0%EF%EB%EF%E3 %E9%F3%F4%DD%F2 ，我知道 %20 代表空格 .. 这个转换后的字符串适用于 curl 命令 使用过 urlencode ， iconv 但还没有找到正确的方法。结果与粘贴的不匹配。有什么功能可以做到吗？字符是希腊语。非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-10T18:43:04.977

我有同样的问题。

当我运行 curl 函数并且 url 只包含英文字符时，一切都很好。

但是当 url 包含希腊字符时，它不起作用并返回“HTTP 错误 400。请求 URL 无效。”

我搜索了很多，**解决方案**是使用以下命令：

```
$url = mb_convert_encoding($url, "iso-8859-7", "UTF-8"); 
```

下面是一个完整的例子：

```
$ch = curl_init(); 
$url = mb_convert_encoding($url, "iso-8859-7", "UTF-8");
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); 
curl_setopt($ch, CURLOPT_COOKIEJAR, $cookie_file);
curl_setopt($ch, CURLOPT_COOKIEFILE, $cookie_file);
curl_setopt($ch, CURLOPT_HEADER, true);
$page = curl_exec($ch); 
curl_close($ch); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T08:04:47.330

该网页的原始编码是什么？你能给我们网址和部分源代码吗？

尝试将字符串转换为请求的字符编码

```
$response = html_entity_decode(htmlentities(curl_exec($ch)), ENT_COMPAT, 'UTF-8'); 
$response = iconv('windows-1253','utf-8',$response ); 
```

# database-design - 构建嵌套集

> ID：10361690
> 
> 赞同：0
> 
> 时间：2012-04-28T07:54:33.550
> 
> 标签：database-design, adjacency-list-model

我需要帮助我正在处理的一个项目：假设所有输入没有特定顺序，我如何在嵌套集模型中计算左右。

分发了 4 张表格，每张表格带 4 人，每 4 人带另外 4 人。该网络向下增长直到 7 代。假设我决定选择任何级别的节点，我如何找到下线和上线？

```
 A
|    |   |   |
B    C   D   E 
             |
         ------------
         |   |   |   |
         F   G   H    J
         |
     ----------
     |   |  |  |
     W   X  Y  Z 
```

解释：

```
A brings A B C D
E then brings F G H J
F brings WXYZ 
```

等等等等。在第 7 代，我们经历了停顿。同时，每个节点开始一个沿袭下词。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T12:49:02.147

计算左右访问次数是一个迭代的程序操作。它不能在单个查询中完成，但您可以使用递归调用自身的单个过程来完成。

您的过程需要有两个参数：

*   您正在处理的节点的 ID
*   迄今为止使用的最高访问次数（下一个 LEFT 是 this + 1）

该过程需要返回它应用的最高访问次数（最后一个 RIGHT）。

在该过程中，您运行查询以查找具有给定 ID 的节点的所有子节点。如果它们是有序的，您可以相应地排序 - 或者您可以使用任意顺序。对于找到的每个孩子，设置左边的数字，然后在该孩子上递归调用该过程。当递归调用返回时，使用返回码设置正确的访问次数。

Joe Celko 在书中有一[整章](http://www.amazon.ca/Joe-Celkos-SQL-Smarties-Programming/dp/1558605762)专门介绍如何聪明高效地计算访问次数。如果您的数据集非常大并且经常编辑，您可能需要阅读它 - 否则您可以在每次编辑节点列表时重新计算所有访问次数。

# javascript - 等待 Json 调用在 javascript 中完成

> ID：10361699
> 
> 赞同：5
> 
> 时间：2012-04-28T07:56:00.117
> 
> 标签：javascript, json

我在我的 javascript 方法中使用下面的**json 调用**

```
function go123(){
    var cityName = "";
    var temp = $.getJSON("https://abc.in/api/city?callback=?", args,function (data) {
        if (data.properties.city != null){ 
            cityName = data.properties.city;
            check = true;
        } else {
            cityName = "NaN"
        }
    }); // end of my Json Call.

    // my validation is done below
    if(cityName != "NaN"){
        return false;
    } else {
    // here I except the cityName to not be "" but be some value which  is set as :cityName = data.properties.city;
        return true;
    }
} // end of my function 
```

现在我面临的问题是，在我的 Json 调用完成之前**，**下一组语句（在“//我的验证在下面完成”行下方的代码中）已经执行。

我想获取在我的 json 调用（cityName）中设置的值，并且只有在调用完成时才一次，然后我只希望执行下一组语句。

请帮助我。任何意见/想法/建议将不胜感激！谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-28T08:01:51.077

您传递给 $.getJSON() 的函数是函数成功完成时运行的回调。在其他条件相同的情况下，将“其余部分”粘贴在该方法中。如果你不能这样做，你所追求的就是 jQuery Deferred。有关代码，请参见[http://www.erichynds.com/jquery/using-deferreds-in-jquery/](http://www.erichynds.com/jquery/using-deferreds-in-jquery/)和[http://joseoncode.com/2011/09/26/a-walkthrough-jquery-deferred-and-promise/](http://joseoncode.com/2011/09/26/a-walkthrough-jquery-deferred-and-promise/)看起来像这样：

```
var req = $.getJSON('blah', 'de', 'blah');

req.success(function(response){
    // The request is done, and we can do something else
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-28T08:05:30.407

AJAX 调用是异步的。他们不等待答复。它们在后台运行，并在调用后立即执行其后面的代码。因此，`getJSON`当执行下面的操作时，接收到的数据还没有出现。

您可以将所需的操作放在回调中，以便在接收数据时执行它们：

```
function go123(callback){
    var temp = $.getJSON("https://abc.in/api/city?callback=?", args,function (data) {
        //execute the callback, passing it the data
        callback(data);
    });
}

//when you call go123, it get's back the result:
function goBefore123(){

    //get our JSON
    go123(function(data){

        //when we get our data, evaluate
        if (data.properties.city != null){

            cityName = data.properties.city;
            check = true;

            alert('executed after returned');
            afterCall();
        } else {
            cityName = "NaN"
        }
    });

    alert('i am executed before anything else');
}

function afterCall(){
    alert('im also executed after');
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-28T08:07:55.087

调用外部url会花费太多时间，等待结果检查下面

```
var jqxhr = $.getJSON("example.json", function() {
  alert("success");
})
.success(function() { alert("second success"); })
.error(function() { alert("error"); })
.complete(function() { alert("complete"); }); 
```

[http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-28T08:01:48.247

。成功

[http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

# javascript - SproutCore：SC.TableView 替代品

> ID：10361701
> 
> 赞同：0
> 
> 时间：2012-04-28T07:57:01.467
> 
> 标签：javascript, tableview, sproutcore

我正在开发一个基于 SproutCore 1.8 的项目。我的应用程序必须在复杂的表格视图中显示大量数据。事实上，表格视图将是应用程序界面的核心元素之一。此外，我可能需要一个大纲/树视图，允许我在类似表视图的界面组件中显示分层数据。

我最初尝试使用`SC.TableView`，但从 SproutCore 框架的 v1.6 开始，这似乎已被弃用。我得到一个控制台输出，建议使用社区 tableview，但没有找到那么多。

我在 SC Google Groups 中发现了一些提示，建议应该考虑使用[SlickGrid](https://github.com/mleibman/SlickGrid)，并且有人[围绕 SlickGrid 编写了一个小型 SproutCore 包装器](https://gist.github.com/838826)，您可以将其插入到您的 SproutCore 应用程序中。我不得不承认，我还没有尝试过。

但是，由于我的应用程序不是一个大型实验，并且我不太愿意在标准 UI 组件上投入太多精力，我希望这些组件可以在复杂的 UI 框架中随时可用，所以我想问一下是否有任何可靠且可靠的解决方案在 SproutCore 框架中“开箱即用”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T14:00:07.670

> 但是，由于我的应用程序不是一个大型实验，并且我不太愿意在标准 UI 组件上投入太多精力，我希望这些组件可以在复杂的 UI 框架中随时可用，所以我想问一下是否有任何可靠且可靠的解决方案在 SproutCore 框架中“开箱即用”？

不幸的是，简短的回答是否定的。Sproutcore 是一个很好的框架，有很多优势，但诚实的事实是没有开箱即用的好表视图。

您最好的选择是按照 google 群组的建议使用 SlickGrig。如果该外部库满足您的所有需求，那么让它与 SC 一起工作并不难*。*您将创建一个`SC.View`. 实现该`didAppendToDocument`方法并在其中根据其说明初始化光滑网格。从那里，用于`SC.Event.add`侦听光滑网格 dom 上的事件，并在您的处理程序中调用您的应用程序逻辑。一定要包裹在一个`SC.run(function(){...})`所以你得到一个运行循环。所以基本上，您正在编写一个代理光滑网格实例的视图。您将面临的最大挑战是浏览器可计算性问题，使数据的 SC 表示与 SG 的内部表示（用于排序等）保持同步，如果您打算利用 SG 的大量功能，它可能是一些代码。

另一种选择是滚动您自己的网格。但这还有很多工作要做。

真的，如果 SG 路径看起来太难，实际上，你最好选择一个有网格的框架。

# apache - 从几个网址（www 和非 www）重定向到原始网址

> ID：10361702
> 
> 赞同：0
> 
> 时间：2012-04-28T07:57:05.053
> 
> 标签：apache, mod-rewrite, redirect

如何缩短这个表达式？我不想使用 2 行，而是检查与 mysite.com 不同的任何域，例如带有或不带有 www 和重定向的 mysite.org 或 www.mysite.org。

```
Options +FollowSymlinks
RewriteEngine On

RewriteCond %{HTTP_HOST} ^www\.mysite\.com$ [OR]
RewriteCond %{HTTP_HOST} ^mysite\.org$ [OR]
RewriteCond %{HTTP_HOST} ^www\.mysite\.org$ [OR]
RewriteCond %{HTTP_HOST} ^mysite\.net$ [OR]
RewriteCond %{HTTP_HOST} ^www\.mysite\.net$

RewriteRule ^(.*)$ http://mysite.com/$1 [R=301,L] 
```

使用 [OR] 或这样做是否更快

```
 RewriteCond %{HTTP_HOST} ^www\.mysite\.com$
    RewriteRule ^(.*)$ http://mysite.com/$1 [R=301,L]
    RewriteCond %{HTTP_HOST} ^mysite\.org$
    RewriteRule ^(.*)$ http://mysite.com/$1 [R=301,L]
    RewriteCond %{HTTP_HOST} ^www\.mysite\.org$
    RewriteRule ^(.*)$ http://mysite.com/$1 [R=301,L]
    RewriteCond %{HTTP_HOST} ^mysite\.net$
    RewriteRule ^(.*)$ http://mysite.com/$1 [R=301,L] 
```

PS为什么即使我不使用[NC]，这也是不区分大小写的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T08:25:15.837

您可能想查看有关[规范主机名](http://httpd.apache.org/docs/2.0/rewrite/rewrite_guide.html#canonicalhost)的 Apache 文档，您的规则可以表示为否定

```
RewriteEngine On
RewriteCond %{HTTP_HOST}    !^mysite\.com$ [NC]
RewriteCond %{HTTP_HOST}    !^$
RewriteRule ^(.*)$  http://mysite.com/$1 [L,R=301] 
```

而对于没有 [NC] 的规则匹配，它可能取决于浏览器发送给服务器的内容。

# cocoa - 如何使用子类方法

> ID：10361703
> 
> 赞同：0
> 
> 时间：2012-04-28T07:57:05.460
> 
> 标签：cocoa

我在课堂上有这种方法。我如何在我的子类（这个类）中使用它，因为当我调用 [self shiftViewUpForKeyboard]; 它需要参数，但是当我键入 theNotification 时，它会给出错误。我知道这可能是非常基本的，但它确实会在我的整个应用程序中帮助我很多。

```
- (void) shiftViewUpForKeyboard: (NSNotification*) theNotification;
{

    CGRect keyboardFrame;
    NSDictionary* userInfo = theNotification.userInfo;
    keyboardSlideDuration = [[userInfo objectForKey: UIKeyboardAnimationDurationUserInfoKey] floatValue];
    keyboardFrame = [[userInfo objectForKey: UIKeyboardFrameBeginUserInfoKey] CGRectValue];

    UIInterfaceOrientation theStatusBarOrientation = [[UIApplication sharedApplication] statusBarOrientation];

    if UIInterfaceOrientationIsLandscape(theStatusBarOrientation)
        keyboardShiftAmount = keyboardFrame.size.width;
    else 
        keyboardShiftAmount = keyboardFrame.size.height;

    [UIView beginAnimations: @"ShiftUp" context: nil];
    [UIView setAnimationDuration: keyboardSlideDuration];
    self.view.center = CGPointMake( self.view.center.x, self.view.center.y - keyboardShiftAmount);
    [UIView commitAnimations];
    viewShiftedForKeyboard = TRUE;

} 
```

非常感谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T08:02:18.433

这看起来像一个通知处理程序。您通常不应该自己调用通知处理程序。通知处理程序方法通常由`NSNotificationCenter`. 通知中心向`NSNotification`处理程序方法发送一个对象。在您的情况下，通知包括一些额外的用户信息。

您可能类似于代码中的用户信息字典，它应该直接调用处理程序并将其传递给处理程序方法（`NSNotification`使用所需的用户信息字典构建您自己的对象）。但是，这很容易出错，我认为这是一种“黑客行为”。

我建议您将代码放入不同的方法中，从您的问题的通知处理程序中调用该方法，然后使用不同的方法进行直接调用。

然后，您将拥有：

```
- (void) shiftViewUpForKeyboard: (NSNotification*) theNotification;
{
    NSDictionary* userInfo = theNotification.userInfo;
    keyboardSlideDuration = [[userInfo objectForKey: UIKeyboardAnimationDurationUserInfoKey] floatValue];
    keyboardFrame = [[userInfo objectForKey: UIKeyboardFrameBeginUserInfoKey] CGRectValue];
    [self doSomethingWithSlideDuration:keyboardSlideDuration frame:keyboardFrame];
} 
```

将该`doSomethingWithSlideDuration:frame:`方法实现为类的实例方法。在直接调用它的代码中，调用`doSomethingWithSlideDuration:frame`而不是调用通知处理程序。

直接调用方法时需要自己传递幻灯片时长和帧数。

# vhdl - 在 Synopsys tetramax 中处理时钟

> ID：10361705
> 
> 赞同：1
> 
> 时间：2012-04-28T07:57:37.760
> 
> 标签：vhdl, simulation, clock, hdl, vlsi

我正在使用 tetramax 来测量一些测试台的故障覆盖率。我正在运行测试台并转储我要测试的核心的 VCD 文件输入和输出。

时钟和重置已经由我的外部测试平台管理。我想因此我不需要在我的 Tetramax 脚本中添加时钟和重置。

但是我不知道指定时钟是否有任何副作用......例如在输入和输出之间的一些内部延迟计算中。

有没有人有更多关于在 tetramax 脚本中添加时钟和重置效果的信息？

干杯，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T18:09:59.473

> 时钟和重置已经由我的外部测试平台管理。我想因此我不需要在我的 Tetramax 脚本中添加时钟和重置。

错误的！你需要告诉它哪个信号是时钟，哪个是复位，因为这些是它需要知道的特殊信号。你的测试台做什么并不重要。它甚至不应该被加载。

Tetramax 需要知道如何控制设计中的触发器。其中一部分是知道如何重置它们并为它们计时。当您指定时钟并重置时，它会告诉 Tetramax 如何执行此操作。它需要知道这一点才能生成或模拟测试模式。如果你不给它这个信息，它就什么也做不了，或者更确切地说，它仅限于测试不涉及触发器的东西（这并不多）。

您还需要告诉它必须启用的任何测试控制信号，以启用测试模式、扫描链等。

# c# - 项目欧拉数10#

> ID：10361712
> 
> 赞同：1
> 
> 时间：2012-04-28T07:58:40.560
> 
> 标签：c#

```
The sum of the primes below 10 is 2 + 3 + 5 + 7 = 17.

Find the sum of all the primes below two million. 
```

我的回答是：

```
bool IsRishoni;
int soap = 0;
for (int i = 3; i < 2000000; i++)
{
    IsRishoni = true;
    for (int a = 2; (a <= Math.Sqrt(i)) && (IsRishoni); a++)
    {
        if (i % a == 0)
            IsRishoni = false;
    }
    if (IsRishoni)
    {
        soap = i + soap;
    }
}
Console.WriteLine(soap + 2);
Console.ReadLine(); 
```

为什么这不起作用？我得到的答案是 1179908154 ...请帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-28T08:11:02.483

代替

```
soap = i + soap; 
```

和

```
soap = checked(i + soap); 
```

..问题应该暴露出来。

这个问题有更多细节：[No overflow exception for int in C#?](https://stackoverflow.com/questions/2056445/no-overflow-exception-for-int-in-c)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T08:05:09.027

您的答案（存储在 中`soap`）是一个大于`int.Maxvalue`(2,147,483,647) 的值。

你的答案是 ~ 150,000,000,000

换句话说，您需要使用比这更大的数据类型。

```
long.MaxValue = 9,223,372,036,854,775,807
int.Maxvalue = 2,147,483,647 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T08:29:53.703

您所追求的结果可能太大而无法通过 32 位有符号整数 ( `int`) 来表示。

*让我们首先通过假设所有*数字都是素数来确定结果的上限。通过[求和](http://en.wikipedia.org/wiki/Summation)，我们知道直到`N`（包括）所有数字的总和是`N * (N + 1) / 2`；因此，直到 2,000,000 的所有素数之和的上限为 2,000,001,000,000。这大于`int`2,147,483,647 所允许的最大值，因此您可能会得到一个被默默忽略的数字溢出。

如果您想要更准确地估计您的答案，您可以使用[素数定理](http://en.wikipedia.org/wiki/Prime_number_theorem)，它指出 0 和`N`素数之间的随机整数的概率约为`1 / ln(N)`。结合我们之前的公式，所有素数的近似和`N`为`N * (N + 1) / (2 * ln(N))`。对于 2,000,000，计算结果约为 138,000,000,000，仍大于 的最大值`int`。

要解决您的问题，您只需将用于`soap`变量的整数数据类型切换为 64 位整数表示，例如`long`. 它的最大值是9,223,372,036,854,775,807，所以它肯定可以代表你的数字。

```
long soap = 0; 
```

单独说明：由于您使用的是素数*序列，因此如果您将实现更改*[为 Eratosthenes 筛](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)，您可以获得巨大的性能提升（至少 100 倍）。

# python - 帮助开发人员更快地阅读类层次结构的工具

> ID：10361714
> 
> 赞同：7
> 
> 时间：2012-04-28T07:58:50.373
> 
> 标签：python, django, class

在我的日常工作中，我主要花时间在 Python/Django 和 Objective-C/CocoaTouch 和 js/jQuery 上。

我选择的编辑器是`vim`Python/Django 和 js/jQuery 以及`xcode`Objective-C/CocoaTouch。

我的开发速度的瓶颈之一是我阅读现有代码的速度，尤其是我使用的开源库。

以 Python/Django 为例，当我遇到 django 开发人员引入的一些新特性时，我会很好奇并开始手动探索代码库。例如，当从 django 1.3 开始引入基于类的视图时，请参考 - [https://docs.djangoproject.com/en/dev/topics/class-based-views/](https://docs.djangoproject.com/en/dev/topics/class-based-views/) - 我将查看显示的示例代码：

```
from django.views.generic import TemplateView

class AboutView(TemplateView):
    template_name = "about.html" 
```

并在我的一个项目中试一试。更重要的是，我很好奇幕后发生了什么，所以我将深入研究源代码——

```
# django/views/generic/__init__.py file

from django.views.generic.base import View, TemplateView, RedirectView
from django.views.generic.dates import (ArchiveIndexView, YearArchiveView, MonthArchiveView,
                                     WeekArchiveView, DayArchiveView, TodayArchiveView,
                                     DateDetailView)
from django.views.generic.detail import DetailView
from django.views.generic.edit import FormView, CreateView, UpdateView, DeleteView
from django.views.generic.list import ListView

class GenericViewError(Exception):
    """A problem in a generic view."""
    pass 
```

从这里，我将追溯它到 django/views/generic/base.py 文件，并找出`TemplateView`类的确切作用：-

```
class TemplateView(TemplateResponseMixin, View):
    """
    A view that renders a template.
    """
    def get_context_data(self, **kwargs):
        return {
            'params': kwargs
        }

    def get(self, request, *args, **kwargs):
        context = self.get_context_data(**kwargs)
        return self.render_to_response(context) 
```

这表明`TemplateView`类继承自`TemplateResponseMixin`和`View`类......我继续深入挖掘......等等......

**问题是，这是一个非常低效和缓慢的过程（手动“遵循”类层次结构并一路打开每个文件）。**

所以问题是 - 是否有一种简单的方法/UI 工具（或其他可视化解决方案）可以解析特定项目中的 Python 代码并可视化类层次结构，然后我可以通过“单击”我有兴趣阅读的特定类轻松检查关于？

**请注意**，我知道 IPython shell，但它似乎不像可视化显示工具那样用户友好。

例如，`F-Script`在 Objective-C/iOS/Mac 编程的世界中，它不仅提供了一个 shell（很像 python 或 IPython shell），而且为开发人员提供了一种可视化的方式来内省类层次结构。

参考截图：-

![在此处输入图像描述](../Images/8e5592ebe411c0b0e0f81d0ddd4dc3b1.png)

那么是否有一个类层次结构可视化工具（专门针对 Python，但如果它是通用的并且可以用于不同的语言就更好了）？？？在阅读开源代码时，你有什么方法可以有效地加快速度？？？

**更新**

根据下面的建议，我尝试了`ctags`vim 插件`taglist`，并且能够`:TlistOpen`像这样在 vim 中打开一个侧缓冲区：-

![在此处输入图像描述](../Images/1f84a00c3a784fd9bf9e74609f941d1c.png)

这看起来真的很酷，因为`:TlistOpen`现在基本上向我展示了我当前打开的缓冲区中可用的所有类和函数。

我现在的问题是，当我尝试`Ctrl``]`在光标打开时执行此操作时`TemplateView`，出现以下错误：-

![在此处输入图像描述](../Images/b888a51cc48daed2972dcd4c9ed9ad0a.png)

我究竟做错了什么？是因为我的 django 源代码在一个`virtualenv`？或者我需要做些什么来让`ctags`/ `taglist`“意识到”django源代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T08:03:50.760

标签确实是一个很好的开始。（上面的东西太多了，所以我只会为您提供一个额外的关键字供您搜索：ctags。）

在 Vim 中，最终（在基本情况下）`Ctrl+]`转到类/函数定义并`Ctrl+T`返回。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-28T08:14:55.163

我一直在为 vim使用带有[taglist的](http://www.vim.org/scripts/script.php?script_id=273)[exuberant ctags 。](http://ctags.sourceforge.net/)用于跳转到当前窗口中的类定义，跳转到拆分窗口中的定义。`ctrl``]``ctrl``w``]`

你可以通过 homebrew 安装 exuberant ctags：

```
brew install ctags 
```

一定要使用`/usr/local/bin`homebrew 安装的那个，而不是旧`ctags`的`/usr/bin`.

跳过 Python 文件的索引变量和导入也很有帮助`--python-kinds=-vi`。`~/.ctags`

另一种选择是使用的变体，`cscope`或者`pyscope`尽管您必须在`cscope`启用选项的情况下编译您的 vim。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-28T08:22:48.347

Python 附带的 IDLE 编辑器有[一个有效的类浏览器](http://hg.python.org/cpython/file/3bac1e1a0e0d/Lib/idlelib/ClassBrowser.py)，可以有效地导航给定模块中的所有内容。[我相信在检查模块](http://docs.python.org/library/inspect.html#module-inspect)和[pyclbr 模块](http://docs.python.org/library/pyclbr.html#module-pyclbr)的帮助下，修改该工具以导航完整的类层次结构并不难。

# javascript - 从外部源动态更改弹出内容

> ID：10361720
> 
> 赞同：0
> 
> 时间：2012-04-28T07:59:36.530
> 
> 标签：javascript, jquery, html, popup

我有一个计数器，可以计算聊天室中的观众人数，并显示在聊天上方的主网站上。这是通过 json 从我的主网站上运行的脚本中提取的。如果用户想要弹出聊天，他们应该能够点击一个按钮，它应该会弹出。当我需要从我的主要网站脚本中获取查看器值并将其动态放置在弹出窗口内的 div 中而不刷新它时，问题就出现了。

我试图避免调用 json 两次，因为在我的主要网站上它已经被每秒调用一次。我尝试创建一个简单的测试，以查看从外部 javascript 文件（未在弹出窗口中链接）动态更改弹出窗口的文本颜色。

我的外部 javascript 文件有一个在用户单击链接时被调用的函数：

```
function popUp() {
    newwindow=window.open('mod.html','test','height=200,width=150');
        newwindow.focus();
    $('#blue').css('color', 'red');
    return false;
} 
```

这是我的 mod.html 的内容

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<body>
    <div id="blue" style="color:blue">
        This is Blue
    </div>
</body>
</html> 
```

我没有收到错误，但我也没有得到任何结果...

**TL;DR** *如何从弹出窗口中未链接的外部 javascript 文件更改弹出窗口中的文本。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T08:08:13.757

简短的回答是您的弹出窗口是一个完全独立的浏览器窗口，因此需要自己完成所有操作，因此您也必须在此页面的 DOM 中进行 ajax 调用。

长答案是你可能会更好地使用包含指定内容的 CSS 样式的“弹出”div，而不是打开一个全新的浏览器窗口。请参阅[http://jqueryui.com/demos/dialog/](http://jqueryui.com/demos/dialog/) 如果您有一个 div 弹出窗口，它只是另一个 div，您可以像页面上的任何其他 div 一样突出显示、更改内容等。

# facebook - 脸书粉丝门

> ID：10361728
> 
> 赞同：0
> 
> 时间：2012-04-28T08:01:33.880
> 
> 标签：facebook, facebook-page

我正在构建一个 php 页面，该页面将具有不同的 url，例如：

[http://example.com/fb.php?id=1](http://example.com/fb.php?id=1)

等等..

我制作了 facebook fan gate，它实际上适用于静态页面：但是对于变量它不起作用，我不知道为什么。我需要在这里获得权限：

```
$loginUrl = $facebook->getLoginUrl(array(
    'canvas' => 1,
    'fbconnect' => 1,
    'display' => 'page',
    'req_perms' => 'user_likes',
    'next' => 'http://example.com/fb.php',
    'cancel_url'=> 'http://example.com/fb.php'
)); 
```

我需要把变量放在这里，在下一个 url 和 cancel_url 就像[http://example.com/fb.php?id=1](http://example.com/fb.php?id=1) 但它不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T06:57:40.793

您需要将所需的参数添加到作为`next`或传递的 URL `cancel_url`。如果你想

另请注意，这`req_perms`被称为`scope`（很长一段时间）并且在您更改之前不会授予您的应用程序任何权限（除了基本权限，这不是真正的权限）。

下一个代码应该做你想做的事（我省略了不推荐使用/删除的参数，`display`默认情况下等于`page`）：

```
$loginUrl = $facebook->getLoginUrl(array(
  'scope' => 'user_likes',
  'next' => 'http://site.com/fb.php?id=1',
  'cancel_url'=> 'http://site.com/fb.php?id=1'
)); 
```

`getLoginUrl`默认情况下将使用当前 URL `next`，`cancel_url`因此如果您需要在用户授权或取消您的授权步骤后访问当前页面，这可以很简单：

```
$loginUrl = $facebook->getLoginUrl(array(
  'scope' => 'user_likes'
)); 
```

请阅读[文档以`Facebook::getLoginUrl`](http://developers.facebook.com/docs/reference/php/facebook-getLoginUrl/)获取更多详细信息

# cordova - 在 Sencha touch 中运行 Hello World 程序（基础）

> ID：10361735
> 
> 赞同：0
> 
> 时间：2012-04-28T08:02:35.490
> 
> 标签：cordova, sencha-touch, extjs, sencha-touch-2

我有 2 个问题，关于`Sencha touch`和`phone gap`;

我正在阅读 Ajith kumar 的 SenchaTouch CookBook。我正在按照第 1 章中给出的示例程序进行操作。所以据此我做了以下。

这是我的`index.html`

```
<!DOCTYPE HTML>
    <html>
        <head>
            <title>Yapps! - Your daily applications!</title>
            <link rel="stylesheet" href="sencha-
                touch/resources/css/sencha-touch.css" type="text/css">
                <link rel="stylesheet" href="sencha-
                    touch/resources/css/yapps-all.css" type="text/css">
                <script type="text/javascript" charset="utf-8"
                    src="phonegap.1.0.0.js"></script>
                <script type="text/javascript" charset="utf-8" src="sencha-
                    touch/sencha-touch.js"></script>
                <script type="text/javascript" charset="utf-8"
                    src="ch01/ch01_03.js"></script>
                <script type="text/javascript" charset="utf-8" src="sencha-
                    touch/yapps-all.js"></script>

        </head>
        <body></body>
    </html> 
```

该`ch01_03.js`文件。被告知将这些 .JS 文件添加到 WWW 文件夹中，但我无法在该文件夹中添加任何文件，因此我将其添加到文件夹之外。

```
Ext.setup({
          onReady: function() {
          ￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼var supportedFeatures = "Ext.supports.AudioTag : " +
          (Ext.supports.AudioTag ? "On" : "Off");
          supportedFeatures += "\nExt.supports.CSS3BorderRadius : " +
          (Ext.supports.CSS3BorderRadius ? "On" : "Off");
          supportedFeatures += "\nExt.supports.CSS3DTransform : " +
          (Ext.supports.CSS3DTransform ? "On" : "Off");
          supportedFeatures += "\nExt.supports.CSS3LinearGradient : " +
          (Ext.supports.CSS3LinearGradient ? "On" : "Off");
          supportedFeatures += "\nExt.supports.Canvas : " +
          (Ext.supports.Canvas ? "On" : "Off");
          supportedFeatures += "\nExt.supports.DeviceMotion : " +
          (Ext.supports.DeviceMotion ? "On" : "Off");
          supportedFeatures += "\nExt.supports.Float : " +
          (Ext.supports.Float ? "On" : "Off");
          supportedFeatures += "\nExt.supports.GeoLocation : " +
          (Ext.supports.GeoLocation ? "On" : "Off");
          supportedFeatures += "\nExt.supports.History : " +
          (Ext.supports.History ? "On" : "Off");
          supportedFeatures += "\nExt.supports.OrientationChange : " +
          (Ext.supports.OrientationChange ? "On" : "Off");
          supportedFeatures += "\nExt.supports.RightMargin : " +
          (Ext.supports.RightMargin ? "On" : "Off");
          supportedFeatures += "\nExt.supports.SVG : " +
          (Ext.supports.SVG ? "On" : "Off");
          supportedFeatures += "\nExt.supports.Touch : " +
          (Ext.supports.Touch ? "On" : "Off");
          supportedFeatures += "\nExt.supports.Transitions : " +
          (Ext.supports.Transitions ? "On" : "Off");
          supportedFeatures += "\nExt.supports.TransparentColor : " +
          (Ext.supports.TransparentColor ? "On" : "Off");
          supportedFeatures += "\nExt.supports.VML : " +
          (Ext.supports.VML ? "On" : "Off");
          Ext.Msg.alert("INFO", supportedFeatures);
          }
          }); 
```

1.) 问题是当我在 iPhone 和 Stimulator 上运行它时，我只看到一个空白屏幕。这是怎么回事，我应该怎么做才能让警报显示在视图上？

2.) 我需要检测我正在运行应用程序的设备。在书中，它展示了如何检测 iPad、Android 应用程序和 Blackberry。但不是 iPhone。如何检测 iPhone？

```
Ext.setup({
          onReady: function() {

          if (Ext.is.Android)
          Ext.Msg.alert("INFO", "Welcome Android user!");
          if (Ext.is.Blackberry)
          Ext.Msg.alert("INFO", "Welcome Blackberry user!");
          if (Ext.is.iPad)
          Ext.Msg.alert("INFO", "Welcome iPad user!");

          } }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T08:43:51.870

由于这个问题被标记在 下`sencha-touch-2`，我假设您使用的是 Sencha Touch 2。

[`Ext.is`](http://docs.sencha.com/touch/2-0/#!/api/Ext.is)Sencha Touch 2.0 版已弃用

相反，您可以使用`Ext.env.OS`package 来检测设备上正在运行的操作系统。

此外，您可以使用 is 属性来检测特定设备，如 iPad、iPhone、Android 等。

*   `Ext.os.is.Android`: 安卓平台
*   `Ext.os.is.iPhone`： 苹果手机
*   `Ext.os.is.iPad`: iPad等..

**编辑 ：**

是的，您可以检测到 p'cular 设备。检查下面的代码...

```
var navigation = Ext.global.navigator,
    userAgent = navigation.userAgent,
    osEnv, osName, deviceType;

Ext.os = osEnv = new this(userAgent, navigation.platform);

osName = osEnv.name;

var search = window.location.search.match(/deviceType=(Tablet|Phone)/),
nativeDeviceType = window.deviceType;

if (search && search[1]) {
    deviceType = search[1];
}
else if (nativeDeviceType === 'iPhone') {
    deviceType = 'Phone';
}
else if (nativeDeviceType === 'iPad') {
    deviceType = 'Tablet';
} 
```

[**使用 PhoneGap 的 Sencha Touch MVC 的**](http://www.sencha.com/learn/a-sencha-touch-mvc-application-with-phonegap/)好例子[](http://www.sencha.com/learn/a-sencha-touch-mvc-application-with-phonegap/)

# phpmyadmin - phpMyAdmin 不再自动登录

> ID：10361737
> 
> 赞同：2
> 
> 时间：2012-04-28T08:03:32.480
> 
> 标签：phpmyadmin, cpanel, geoip

我不确定这是否是导致它自动停止登录的原因，但我做的最后一件事是安装 GeoIP 库并使用“pecl install geoip”安装/编译它。

phpMyAdmin 位于我的 CentOS 版本 5.8（最终版）服务器上的 /usr/local/cpanel/base/3rdparty/phpMyAdmin/ 中。

这是我的 config.inc.php 的内容。我编辑了我的 blowfish_secret 并删除了大部分被注释掉的代码：

```
<?php

$cfg['blowfish_secret'] = 'XXXXXXXXXXXXXXXXX'; /* YOU MUST FILL IN THIS FOR COOKIE AUTH! */

/*
 * Servers configuration
 */
$i = 0;

/*
 * First server
 */
$i++;
/* Authentication type */
//cpanel:$cfg['Servers'][$i]['auth_type'] = 'cookie';
$cfg['Servers'][$i]['auth_type'] = 'cpanel';

/* Server parameters */
//cpanel:$cfg['Servers'][$i]['host'] = 'localhost';
$cfg['Servers'][$i]['host'] = 'localhost';
$cfg['Servers'][$i]['connect_type'] = 'tcp';
$cfg['Servers'][$i]['compress'] = false;
/* Select mysql if your server does not have mysqli */
// cPanel case 56677
$cfg['Servers'][$i]['extension'] = 'mysql';
$cfg['Servers'][$i]['AllowNoPassword'] = true;

/*
 * phpMyAdmin configuration storage settings.
 */
// cPanel case 5760
$cfg['UserprefsDisallow'] = array(
    'ShowCreateDb',
    'SuggestDBName',
    'Export/quick_export_onserver',
    'Export/quick_export_onserver_overwrite',
    'Export/onserver',
    'Export/onserver_overwrite',
);

/*
 * End of servers configuration
 */

/*
 * Directories for saving/loading files from server
 */
$cfg['UploadDir'] = '';
$cfg['SaveDir'] = '';

// cpanel: cases 36079, 36080, 36144
$cfg['ShowChgPassword'] = false;
$cfg['ShowCreateDb'] = false;
$cfg['SuggestDBName'] = false;
$cfg['AllowUserDropDatabase'] = false;

?> 
```

我已经读过更改 cPanel 密码并将其同步到 mysql 数据库可以解决这个问题，但它在每个密码上都可以正常工作，出于安全原因，我更愿意保持这种方式。

任何人都知道为什么会发生这种情况和/或如何从使用 cPanel 中恢复自动登录功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-06T16:53:50.587

我相信，当您修改河豚 cookie 秘密时，您破坏了 cPANel/WHM 和 PhpMyAdmin 之间的身份验证连接。如果您有配置文件的备份，我建议您恢复它。否则，您可以通过使用以下命令重新安装 PhpMyAdmin 来解决此问题。

备份当前的 PhpMyAdmin

```
mv -v  /usr/local/cpanel/base/3rdparty/phpMyAdmin{,.backup.`date +%F.%T`} 
```

重新安装 PhpMyAdmin

```
/usr/local/cpanel/bin/updatephpmyadmin --force 
```

# php - Codeigniter没有输入文件指定错误

> ID：10361742
> 
> 赞同：6
> 
> 时间：2012-04-28T08:04:09.057
> 
> 标签：php, codeigniter

我已经在子目录 www.siteb.com/rexona 中安装了 CI

我在 www.siteb.com/rexona 中的 .htaccess ：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /rexona

#Removes access to the system folder by users.
#Additionally this will allow you to create a System.php controller,
#previously this would not have been possible.
#‘system’ can be replaced if you have renamed your system folder.
RewriteCond %{REQUEST_URI} ^system.*
RewriteRule ^(.*)$ /index.php/$1 [L]

#Checks to see if the user is attempting to access a valid file,
#such as an image or css document, if this isn’t true it sends the
#request to index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
#This last condition enables access to the images and css folders, and the robots.txt file
#Submitted by Michael Radlmaier (mradlmaier)
RewriteCond $1 !^(index\.php|images|robots\.txt|css)
RewriteRule ^(.*)$ index.php/$1 [L]
</IfModule>

<IfModule !mod_rewrite.c>

ErrorDocument 404 /index.php
</IfModule> 
```

在 config.php 中：

```
$config['index_page'] = '';
$config['base_url'] = '';
$config['uri_protocol'] = 'AUTO'; 
```

每当我尝试访问控制器时，我都会得到**No input file specified**。但是它确实加载了默认控制器，但我也无法访问默认控制器中的任何方法。

有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-28T08:44:20.380

您`uri_protocol`需要设置一些东西 - 至少将其设置为自动。

您收到的错误是因为 PHP 作为 CGI 运行，这意味着您需要将 URL 重写传递给`index.php?/$1`（注意问号）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-18T13:45:36.437

Godaddy 托管，似乎是固定`on.htaccess`的，我自己通过更改来工作：

```
RewriteRule ^(.*)$ index.php/$1 [L] 
```

到

```
RewriteRule ^(.*)$ index.php?/$1 [QSA,L] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T08:11:41.943

你的`$config['uri_protocol']`不应该是空的。默认值为`AUTO`，传入一个空字符串将破坏核心 URI 类，该类用于通过 Router 类路由您的请求。

```
/*
|--------------------------------------------------------------------------
| URI PROTOCOL
|--------------------------------------------------------------------------
|
| This item determines which server global should be used to retrieve the
| URI string.  The default setting of 'AUTO' works for most servers.
| If your links do not seem to work, try one of the other delicious flavors:
|
| 'AUTO'            Default - auto detects
| 'PATH_INFO'       Uses the PATH_INFO
| 'QUERY_STRING'    Uses the QUERY_STRING
| 'REQUEST_URI'     Uses the REQUEST_URI
| 'ORIG_PATH_INFO'  Uses the ORIG_PATH_INFO
|
*/
$config['uri_protocol'] = 'AUTO'; 
```

正如评论所说：*“如果您的链接似乎不起作用，请尝试其他美味口味之一”*。
空字符串不是其中一种风格，它最终会尝试从 读取`$_SERVER['']`，这通常是空的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-22T02:26:18.503

我在托管免费帐户中遇到了同样的错误，解决了上面 jhon foo 提出的问题。

我的 .htaccess

```
RewriteBase /MY_SUBFOLDER_UNDER_HTML_DIRECTORY/
RewriteEngine on

RewriteBase /mY_subfolder/
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?/$0 [QSA,L] 
```

这工作很好，非常感谢！

# java - Android - 如何使edittext中的所有行都加下划线？

> ID：10361755
> 
> 赞同：4
> 
> 时间：2012-04-28T08:05:43.450
> 
> 标签：java, android, android-edittext

从教程中我创建了布局：

```
 public static class LinedEditText extends EditText {
        private Rect mRect;
        private Paint mPaint;

        // we need this constructor for LayoutInflater
        public LinedEditText(Context context, AttributeSet attrs) {
            super(context, attrs);

            mRect = new Rect();
            mPaint = new Paint();
            mPaint.setStyle(Paint.Style.STROKE);
            mPaint.setColor(0x80000000);
        }

        @Override
        protected void onDraw(Canvas canvas) {
            int count = getLineCount();
            Rect r = mRect;
            Paint paint = mPaint;

            for (int i = 0; i < count; i++) {
                int baseline = getLineBounds(i, r);
                canvas.drawLine(r.left, baseline + 1, r.right, baseline + 1, paint);
            }

            super.onDraw(canvas);
        }
    }

<view xmlns:android="http://schemas.android.com/apk/res/android"
    class="com.bbbfr.mynotepad.NotepadText$LinedEditText"
    android:id="@+id/note"
    android:background="#ffd6e5"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="5dp"
    android:scrollbars="vertical"
    android:fadingEdge="vertical"
    android:gravity="top"
    android:textSize="22sp"
    android:textColor="#000000"
    android:inputType="textMultiLine"
    android:capitalize="sentences"
/> 
```

这只会使第一行加下划线。即使编辑文本中只有一行，是否可以将所有行都加下划线？

我尝试更改循环，例如 `for (int i = 0; i < 5; i++)`但随后收到此错误：

> 04-28 08:29:05.093: E/AndroidRuntime(14398): java.lang.IndexOutOfBoundsException: 2, 1 04-28 08:29:05.093: E/AndroidRuntime(14398): at android.text.PackedIntVector.getValue( PackedIntVector.java:70) 04-28 08:29:05.093: E/AndroidRuntime(14398): 在 android.text.DynamicLayout.getLineTop(DynamicLayout.java:367) 04-28 08:29:05.093: E/AndroidRuntime( 14398): 在 android.text.Layout.getLineBottom(Layout.java:831) 04-28 08:29:05.093: E/AndroidRuntime(14398): 在 android.text.Layout.getLineBounds(Layout.java:437) 04 -28 08:29:05.093: E/AndroidRuntime(14398): 在 android.widget.TextView.getLineBounds(TextView.java:4122) 04-28 08:29:05.093: E/AndroidRuntime(14398): 在 com.bbbfr .mynotepad.NotepadText$LinedEditText.onDraw(NotepadText.java:56)

到这一行：`int baseline = getLineBounds(i, r);`

我也在`android:lines="5"`视图中设置了。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-28T09:02:59.310

~~`EditText`如果您不介意下划线[`UnderlineSpan`](http://developer.android.com/reference/android/text/style/UnderlineSpan.html)与`Html.fromHtml(...)`.~~

 ~~```
private void createUnderlinedText() {
    String text = "I am underlined text\nLine #2\nLine #3\nLine #4\nLine #5";

    EditText underlineSpanEditText = (EditText) findViewById(R.id.underlinespan_edittext);
    SpannableStringBuilder sb = new SpannableStringBuilder(text);
    sb.setSpan(new UnderlineSpan(), 0, text.length(), Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
    underlineSpanEditText.setText(sb);

    EditText htmlUnderlineEditText = (EditText) findViewById(R.id.html_underline_edittext);
    String html = "<u>I am underlined text</br>Line #2</br>Line #3</br>Line #4</br>Line #5</u>";
    htmlUnderlineEditText.setText(Html.fromHtml(html));
} 
```~~ 

~~您当前方法的主要区别在于，这只会在实际文本下划线，而不是整个文本行。例如，如果您运行我的代码片段，您会发现下划线在被`\n`or断开时并没有延伸到行尾`<br/>`。但是，根据您之后的行为，这可能不是您想要的。~~

* * *

**编辑：**所以如果我理解正确，你基本上想在你的 中画水平线`EditText`，不管有没有文字？您问题中的“下划线”部分有点误导，因为事实证明，这与它几乎没有关系（在这个词的传统含义中:)）。

无论如何，您不能使用`getLineCount()`，因为它总是会返回包含实际文本的行数。这意味着您必须用换行符“填充”任何剩余空间才能获得所需的效果，这听起来有点恶心......更好的选择可能是将水平线的绘制基于`EditText`. 一个简单的示例，您显然可以根据自己的喜好对其进行调整：

```
public class LinedEditText extends EditText {
    private Paint mPaint = new Paint();

    public LinedEditText(Context context) {
        super(context);
        initPaint();
    }

    public LinedEditText(Context context, AttributeSet attrs) {
        super(context, attrs);
        initPaint();
    }

    public LinedEditText(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        initPaint();
    }

    private void initPaint() {
        mPaint.setStyle(Paint.Style.STROKE);
        mPaint.setColor(0x80000000);
    }

    @Override protected void onDraw(Canvas canvas) {
        int left = getLeft();
        int right = getRight();
        int paddingTop = getPaddingTop();
        int paddingBottom = getPaddingBottom();
        int paddingLeft = getPaddingLeft();
        int paddingRight = getPaddingRight();
        int height = getHeight();
        int lineHeight = getLineHeight();
        int count = (height-paddingTop-paddingBottom) / lineHeight;

        for (int i = 0; i < count; i++) {
            int baseline = lineHeight * (i+1) + paddingTop;
            canvas.drawLine(left+paddingLeft, baseline, right-paddingRight, baseline, mPaint);
        }

        super.onDraw(canvas);
    }
} 
```

结果如下所示：

![内衬编辑文本](../Images/a4324516de1788987ae4c0bdd92d7b22.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T08:13:22.247

从您的代码中可以看出，您正在从for 循环中绘制`underline`for`edit text`行并设置为. 所以只会增加 EditText 中现有的行数！通过更改计数的数量，您可以绘制任意数量的下划线！`0 to count``count``int count = getLineCount();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T09:09:30.230

最简单的解决方法是您可以在构造函数中仅使用行分隔符调用 setText，例如“\n\n\n”（您可以根据需要的行数动态构建它），然后您当前的 LinedEditText 将具有下划线你要。

# haskell - 无法解决对 yesod-auth-oauth 包的依赖

> ID：10361757
> 
> 赞同：2
> 
> 时间：2012-04-28T08:06:36.190
> 
> 标签：haskell, cabal, yesod

我想将 Yesod Web 框架与 yesod-auth-oauth 一起使用，但我遇到了一个依赖问题`cabal-dev install`：

```
/Users/kenta/myapp/oryza% cabal-dev install
Resolving dependencies...
cabal: cannot configure yesod-platform-1.0.2\. It requires data-default ==0.4.0
For the dependency on data-default ==0.4.0 there are these packages:
data-default-0.4.0\. However none of them are available.
data-default-0.4.0 was excluded because authenticate-oauth-1.3.0 requires
data-default ==0.3.*
data-default-0.4.0 was excluded because data-default-0.3.0 was selected
instead
data-default-0.4.0 was excluded because oryza-0.0.0 requires data-default
==0.3.* 
```

我不知道出了什么问题。我所做的只是在 Cabal 文件中插入一行： `yesod-auth-oauth >= 1.0 && < 1.1`

默认的脚手架可以正常工作，它是通过`yesod init`.

版本信息

*   是的核心：1.0.1
*   cabal-dev：0.9.1（使用 Cabal 1.14.0 构建）
*   阴谋安装：0.10.2
*   GHC：7.0.4
*   操作系统：Mac OS X Lion

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T17:48:03.303

这看起来像是 authenticate-oauth 包中的一个过度限制的上限。最好直接与该软件包的维护者联系。

[一般来说，这类问题是遵循Package Versioning Policy](http://www.haskell.org/haskellwiki/Package_versioning_policy)的副作用。基本上，这是在这些“拒绝编译”的烦恼和更隐蔽的“无法编译”问题之间进行权衡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T05:04:48.450

我不记得了，但我*认为* 我对 yesod-auth-oauth[的 cabal 文件的更改解决了这个问题。](https://github.com/rlpowell/yesod)

# cmake - CMake：在其他 CMake 项目中自动查找目标依赖项

> ID：10361758
> 
> 赞同：2
> 
> 时间：2012-04-28T08:06:37.013
> 
> 标签：cmake

如果我们有一个高度分散的开发环境，其中有许多存储库和项目，CMake 中是否有一个现有功能可以自动查找目标之间的依赖关系而无需顶级 CMake 文件？

工作流程是这样的，您指定一个目录，并且所有目标都默认配置在给定的树中。然后你可以去构建任何项目。我正在寻找与构建 Android 操作系统时类似的行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:14:47.877

CMake 中没有跨不同项目的构建时依赖跟踪。对于这种情况，您需要在顶层有一个添加所有子目录的项目，以便目标名称在单个 CMake 项目中可用。

我知道一个围绕 CMake 的帮助脚本，它提供了所需的项目间依赖项：[https](https://github.com/aldebaran/qibuild) ://github.com/aldebaran/qibuild 我会说它已经接近成熟的代码库。但是，它需要每个项目的附加描述符文件。可能值得一看。

# spring - TransactionTemplate 与 @Transactional（传播 = Propagation.REQUIRES_NEW）

> ID：10361761
> 
> 赞同：2
> 
> 时间：2012-04-28T08:06:51.453
> 
> 标签：spring, hibernate

有人可以解释为什么第一个单元测试类有效，而第二个测试类因锁定等待超时错误而失败？

第一个测试班：

```
public class Test1 extends AbstractTransactionalJUnit4SpringContextTests {

    @Before
    public void setUp() {
       // do stuff through hibernate to populate database with test data
    }

    @Test
    @Transactional(propagation = Propagation.NEVER)
    public void testDeleteObject() {

    TransactionTemplate transactionTemplate = new TransactionTemplate(transactionManager);
    transactionTemplate.execute(new TransactionCallbackWithoutResult() {
        @Override
        protected void doInTransactionWithoutResult(TransactionStatus status) {
            try {
               // execute sql that deletes data populated in setUp() [i.e. this will require locks on the objects].
            }
        });
    }
} 
```

第二个测试类【获取锁等待超时错误】：

```
public class Test2 extends AbstractTransactionalJUnit4SpringContextTests {

    @Before
    public void setUp() {
       // do stuff through hibernate to populate database with test data
    }

    @Test
    @Transactional(propagation = Propagation.REQUIRES_NEW)
    public void testObject() {

    // execute sql that deletes data populated in setUp() [i.e. this will require locks on the objects].

    }
} 
```

我知道第二个测试类失败了，因为这两个事务正在争夺相同的锁，但由于其 in_progress 事务状态，两者都不能放弃锁。我很困惑的是为什么第一个测试类成功执行了 sql。我可能理解错了，但是当 transactionTemplate 执行事务回调时，不会创建新事务吗？在那种情况下，不应该发生同样的事情（锁定等待超时）吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T08:26:28.060

TransactionTemplate 默认不创建新事务。默认传播行为是 PROPAGATION_REQUIRED。在您的第一种情况下，没有锁定问题，因为设置和删除是在同一个事务中完成的。

您可以通过将 org.springframework.orm.jpa.JpaTransactionManager 类（甚至整个 org.springframework 包）的日志级别设置为 DEBUG 来查看何时创建新事务或重用现有事务。

[传播行为的 Javadoc](https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/transaction/support/DefaultTransactionDefinition.html#setPropagationBehavior-int-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T10:21:11.467

只有当有两个或多个连接访问相同的数据时才会发生死锁。如果使用传播注释的测试用例，`NEVER`您只有一个事务，一个由`TransactionTemplate`.

第二种情况对我来说有点模糊。异常意味着有两个并发连接/事务 - 一个 for`setUp`和一个 for `testObject`。`REQUIRES_NEW`即使检测到一个连接，传播确实会强制执行另一个连接，但我也希望`setUp`在此事务中启动。你可以尝试摆脱`@Transactional`上`testObject`。用我相信的默认传播对其自身进行`AbstractTransactionalJUnit4SpringContextTests`注释。`@Transactional``REQUIRED`

# c# - 在c#中使用invoke在线程之间发送多个对象

> ID：10361765
> 
> 赞同：1
> 
> 时间：2012-04-28T08:07:24.417
> 
> 标签：c#, invoke

我在将加载的数据从一个线程传递到另一个线程以将数据添加到表单时遇到问题。我在“var obj = new object[] { names }”中添加了另一个对象并得到“参数计数不匹配”。我仍然希望将第二个线程中的“LoadData()”中的“Clients”和“Messages”传递给第一个线程中的“UpdateFormMethod()”，但我不知道该怎么做。如果有人可以帮助我解决这个问题，我将不胜感激。

这是一个类中代码的重要部分：

```
private readonly Thread _thread;
    public readonly Loader Loader = new Loader();
    public Dictionary<string, Client> Clients;
    public Dictionary<string, Message> Messages;
    private bool _stopData = false;
    public delegate void UpdateForm(object data);
    public UpdateForm MyDelegate;

    public Fcon() {
        InitializeComponent();
        MyDelegate = new UpdateForm(UpdateFormMethod);
        _thread = new Thread(LoadData);
        _thread.Start();
    }

    public void UpdateFormMethod(object data) {
        foreach (var str in ((IEnumerable<string>)data).Where(str => !fcon_container_users_list.Items.Contains(str))) {
            fcon_container_users_list.Items.Insert(0, str);
        }
    }

    public void LoadData() {
        while (!_stopData) {
            Clients = Loader.GetClients(Operator);
            Messages = Loader.GetMessages(Operator);
            var status = Loader.SetStatus(Operator);
            var names = new string[Clients.Count];
            var x = 0;
            foreach (var kvp in Clients) {
                names[x] = "user_" + kvp.Value.id_fcon_client;
                x++;
            }
            var obj = new object[] { names };
            this.Invoke(this.MyDelegate, obj);    
            Thread.Sleep(1000);
        }
    }

    public void StopData() {
        _stopData = true;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T08:15:18.150

听起来您并不完全清楚签名的来源。这是您自己的委托 - 如果您想更改签名，只需更改委托的签名和实现它的方法：

```
public delegate void UpdateForm(IEnumerable<string> data, int foo);

...

public void UpdateFormMethod(IEnumerable<string> data, int foo) {
    foreach (var str in data.Where(str => 
               !fcon_container_users_list.Items.Contains(str))) {
        fcon_container_users_list.Items.Insert(0, str);
    }
} 
```

然后：

```
var obj = new object[] { names, someIntVariable };
this.Invoke(this.MyDelegate, obj); 
```

或者更简单地说：

```
this.Invoke(this.MyDelegate, names, someIntVariable); 
```

如果您需要返回类型，我可能会使用现有的`Action<T>`,`Action<T1, T2>`代表而不是创建新的代表 OR T Func<T1 [,T2]> 。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-28T08:15:12.133

你正在传递一个对象 [] 但你应该只传递对象。

发送它只需将其作为对象即

```
this.Invoke(this.MyDelegate, (object)obj); 
```

并将其转换回方法中。他们指定 object 作为参数类型的原因是它允许他们不必指定很多我认为的签名

# javascript - 如果更改事件，则保持 textarea 打开，否则在模糊时对其进行动画处理

> ID：10361766
> 
> 赞同：0
> 
> 时间：2012-04-28T08:07:29.420
> 
> 标签：javascript, jquery, jquery-events, onblur

我想要做的是：

你点击一个文本区域，它会扩大到 100 像素。通常它是50px。如果您在外部单击（或在文本区域中单击后触发模糊事件...），它应该回到正常的 50 像素高度。

如果您通过在文本区域中输入内容来触发更改事件，我希望能够单击提交按钮而不会触发模糊（将其移回 50 像素）。

我在正确的轨道上吗？

```
var expandTextarea = function() {
$('.js-textarea-slide').on('click', function(e) {
    var typed = false;
    $(this).change(function() {
        typed = true;
    });
    $(this).animate({
        height: '100'
    }, 0);
});

$('.js-textarea-slide').blur(function(typed, e) {
    if (!typed) {
        alert('yo');
        return false;
    } else {

        $(this).animate({
            height: '50'
        }, 0);
    }
});
}; 
```

[http://jsfiddle.net/khE4A/](http://jsfiddle.net/khE4A/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T08:13:24.370

[http://jsfiddle.net/khE4A/4/](http://jsfiddle.net/khE4A/4/)

```
var expandTextarea = function() {

    //Note that this is in a scope such that the click, blur and change handlers can all see it
    var typed = false;

    $('.js-textarea-slide').on('click', function(e) {
        //If you bind the change handler in here, it will be bound every time the click event
        //is fired, not just once like you want it to be
        $(this).animate({
            height: '100'
        }, 0);
    }).change(function() {
        typed = true;
    });

    //Note that I got rid of typed and e.
    //If typed were included here, it would not have the value of the typed on line 4.
    //Rather, it would have the value of whatever jQuery's event processing passes as the first
    //parameter.  In addition, it would hide the typed on line 4 from being accessible since
    //they have the same name.
    //Also, I got rid of the e parameter because it's not used, and in JavaScript, it's perfectly
    //acceptable to have a paramter calling/definition count mismatch.
    $('.js-textarea-slide').blur(function() {
        if (!typed) {
            $(this).animate({
                height: '50'
            }, 0);
        }
    });

};

//Since expandTextarea doesn't depend on the context it's called from, there's no need to wrap it
//in an extra function.
$(expandTextarea);​ 
```

请注意，这遵循您在问题中描述的逻辑，而不是您的代码尝试执行的操作。无论如何，一些重要的变化：

每次单击文本区域时都会绑定您的更改事件，而不是一次。例如，如果您单击 textarea 3 次，您将绑定事件 3 次，而不是只需要 1 次。

此外，实际上导致代码损坏的部分是 typed 超出了模糊处理程序的范围。给回调一个具有特定名称的参数不会将该变量拉入范围。事实上，如果变量在以前可访问的范围内，它会屏蔽它。

另一个[迂腐]的事情：

```
$(function() {
    expandTextarea();
});​ 
```

函数包装是不必要的。由于expandTextarea不使用`this`，可以直接使用该函数：

```
$(expandTextarea); 
```

无论如何，鉴于您问题中的问题描述，我相信您正在寻找的是：http: [//jsfiddle.net/khE4A/2/](http://jsfiddle.net/khE4A/2/)

# iphone - iPhone屏幕中的随机填充按钮

> ID：10361771
> 
> 赞同：2
> 
> 时间：2012-04-28T08:08:23.723
> 
> 标签：iphone, objective-c, ios, memory-management

我正在开发一个不使用任何 CA 或 Cocos2D 东西的简单游戏，在我的应用程序中，我正在创建一些飞行对象（带有图像的 UIButton），一旦用户触摸这些对象中的任何一个，我就会在屏幕上随机移动它，我将只显示另一个图像和隐藏该对象。

现在我的问题是一旦对象隐藏我需要再次创建它说，一旦我的应用程序开始运行

1.  最初说，10 个对象在 2 秒内创建，然后
2.  在另外 2 秒内，必须像这样连续创建 20 个对象，如果用户触摸任何需要消失的对象，则必须创建对象。我怎样才能做到这一点？

    **我的意思是我怎样才能不断地填充对象？，我需要每次都分配吗？或者有什么方法可以重用 1 个对象？** 提前感谢任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T08:18:45.153

您不能将隐藏的位置移动到下一个位置并在需要时显示它吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T19:19:22.433

您可以每次都分配一个对象，但由于分配和显示新 UIButton 和图像所涉及的开销，您的游戏可能会变得缓慢和不稳定。

创建一个由 40 个左右的 UIButtons + 图像组成的数组并重用它们会更有效。当用户触摸其中一个时，将其设置为隐藏。当您需要“创建”一个新的时，只需遍历您的数组以寻找隐藏的。使其可见并将其放在新的位置和大小。

# iphone - 归档项目给我以下错误：身份'iPhone Distribution：

> ID：10361773
> 
> 赞同：1
> 
> 时间：2012-04-28T08:08:38.673
> 
> 标签：iphone, objective-c, ios

我将我的项目从一台mac移动到另一台新的，我尝试构建项目并且没有出现错误，当我尝试存档时出现以下错误

“身份‘iPhone Distribution: Jeeran for Software Development’与默认钥匙串中的任何有效、未过期的证书/私钥对不匹配”

请告诉我我可以用错误做什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T08:22:20.847

假设设备的存档和构建在您的旧系统上运行良好，最可能的解释是您忘记从旧 Mac 迁移您的私钥。

在旧 Mac 上打开 Keychain：

*   选择**类别：**左侧窗格中的键

*   找到您用于协同设计的*密钥*，而不是*证书*（键入“私钥”）。

*   选择**文件**| **出口项目**。将密钥导出为`*.p12`文件。

*   在您的新 Mac 上导入。

如果操作正确，从 Xcode Organizer 的 Provisioning Profiles 下，您应该不会看到任何警告。

**编辑**

*   这个问题很常见：​​记录在[Xcode FAQ的顶部](https://developer.apple.com/support/xcode/)

*   您需要知道的一切都在[iOS 代码签名设置、过程和故障排除](https://developer.apple.com/library/ios/#technotes/tn2250/_index.html)技术说明中

*   包括如果您不再有权访问[该怎么办：如何删除/撤销我的证书并重新开始？](https://developer.apple.com/library/ios/#technotes/tn2250/_index.html)

# android - Android：使用我们的应用程序更改模拟器日期时间

> ID：10361777
> 
> 赞同：1
> 
> 时间：2012-04-28T08:09:09.527
> 
> 标签：android, android-emulator

如何通过应用程序更改模拟器日期时间设置？

谁能帮我？

# javascript - 拖放以重新排序 HTML 列表

> ID：10361779
> 
> 赞同：33
> 
> 时间：2012-04-28T08:09:26.970
> 
> 标签：javascript, user-interface, drag-and-drop

我有一个应用程序，我希望能够对其进行拖放以重新排序并将颜色分组。jQuery 对网格的[排序](http://jqueryui.com/demos/sortable/#display-grid)似乎反应迟钝，而且有点问题。[microjs](http://microjs.com/#drag)推荐[kbjr 的 DragDrop](http://kbjr.github.com/DragDrop/)，但该库没有列表的概念，只有可移动对象。[Sproutcore](http://demo.sproutcore.com/drag_list/)有一个很好的实现，但我找不到它适用于网格的演示。

我的用户界面如下所示：

![颜色组](../Images/4f6f636a28bb1a231abf6c729a416858.png)

我希望用户能够在组内拖动颜色以及在组之间拖动它们。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-04-29T06:08:29.417

试试[这个](http://farhadi.ir/projects/html5sortable/)：HTML5 可排序。它是一个使用原生 HTML5 拖放 API 创建可排序列表和网格的 jQuery 插件。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2016-01-12T08:13:21.320

只是一个友好的更新，因为这个问题出现在搜索中。HTML5Sortable 不再维护。推荐的库是[Sortable](https://github.com/RubaXa/Sortable)。大小：12kb 缩小。

代码：

```
var sortable = Sortable.create($('#items')); 
```

希望这对下一个流浪者有所帮助。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-05-09T12:26:41.797

我发现[**这个**](http://dbushell.github.io/Nestable/)（**Nastable**）更有用，因为它具有嵌套功能。

**更新** 实际上最终使用了带有更多选项的[**这个**](http://johnny.github.io/jquery-sortable/)插件。

希望能帮助到你。干杯!

# php - 如何从 mysql db 中获取 xmlrpc 响应，例如字段名称作为元素和记录作为数据？

> ID：10361781
> 
> 赞同：3
> 
> 时间：2012-04-28T08:10:04.957
> 
> 标签：php, mysql, web-services, xml-parsing, xml-rpc

我正在使用 xmlrpc-epi 为基于 PHP/MySQL 的网站使用 web 服务，我得到 xmlrpc 客户端响应，如下所示：

```
opening socket to host: comingsoon.com, port: 80, uri: /CM_server.php
sending http request:
POST /CM_server.php HTTP/1.0
User-Agent: xmlrpc-epi-php/0.2 (PHP) 
Host: fn24dev.com:80 Content-Type: text/xml 
Content-Length: 117 
<?xml version="1.0" encoding="iso-8859-1"?>
<methodCall> 
<methodName>listVideos</methodName> 
<params/> 
</methodCall>
receiving response...
got response:
<?xml version="1.0" encoding="iso-8859-1"?> 
<methodResponse> 
<params>
 <param>
  <value>
   <array>
    <data>
     <value>
      <struct>
       <member>
        <name>0</name>
         <value>
          <string>63</string>
         </value>
       </member>
       <member>
        <name>indexer</name>
         <value>
          <string>63</string>
         </value>
       </member>
       <member>
        <name>1</name>
        <value>
         <string>02_CHIMPPANTS_24-03-2012_04-43-06</string>
        </value>
       </member>
       <member>
        <name>video_id</name>
        <value>
         <string>02_CHIMPPANTS_24-03-2012_04-43-06</string>
        </value>
       </member>
       <member>
        <name>2</name>
        <value>
        <string>mp4</string>
        </value> </member>
      <member>
        <name>type</name>
        <value>
         <string>mp4</string>
        </value>
      </member>
     </struct>
   </value> 
  </data> 
  </array>
</value>
</param>
</params>
</methodResponse> 
```

在此，我将 mysql 表字段名和字段值都作为 xml 文本内容。但我想得到像 mysql 字段名作为元素和字段值作为文本内容的响应。如下所示，

```
<member>
       <indexer>63</indexer>
</member>

<member>
      <video_id>02_CHIMPPANTS_24-03-2012_04-43-06</video_id>
</member>
<member>
  <type>mp4</type>
</member> 
```

我添加了 PHP 代码和 mysql 表和数据以进行说明。

```
Table_name: videos
    indexer     video_id                           type
    --------       ----------------------------------  -----
    63          02_CHIMPPANTS_24-03-2012_04-43-06      mp4
    54          02_Friday_23-03-2012_05-11-18          mp4 
```

**CM_server.php**

```
<?php
function Connect(){
$connect = mysql_connect("localhost","root","");
$db = mysql_select_db("database") or die("Database is not valid");
}

//Get the Videos
function getVideos(){
//connect database
Connect();
$videoquery = mysql_query("select * from videos");
    if(mysql_num_rows($videoquery) == "0"){
        $returnquery = "0";
    } else {
        while($getquery = mysql_fetch_array($videoquery)){
            $returnquery[] = $getquery;
        }
    }
    return $returnquery;
}
//server creating and check a list a method
$request = $HTTP_RAW_POST_DATA;
if (!$request) $request_xml = $HTTP_POST_VARS['xml'];
$server = xmlrpc_server_create( );
if (!$server) die("Couldn't create server");
xmlrpc_server_register_method($server, 'listVideos', 'getVideos');
$options = array('output_type' => 'xml', 'version' => 'auto');
echo xmlrpc_server_call_method($server, $request, null, $options);
xmlrpc_server_destroy($server);
?> 
```

**客户端.php**

```
<?php
include("utils.php");
$options = array('output_type' => 'xml', 'version' => 'xmlrpc');
$result1 = xu_rpc_http_concise(array(method => 'listVideos',host  => 'comingsoon.com',uri=> '/CM_server.php',options => $options,debug => 1));
?> 
```

**实用程序.php**

```
<?php
xu_load_extension();
// a function to ensure the xmlrpc extension is loaded.
// xmlrpc_epi_dir = directory where libxmlrpc.so.0 is located
// xmlrpc_php_dir = directory where xmlrpc-epi-php.so is located
function xu_load_extension($xmlrpc_php_dir="") {
   if(!extension_loaded('xmlrpc')) {
      $bSuccess = true;
      putenv("LD_LIBRARY_PATH=/usr/lib/php4/apache/xmlrpc/");
      if ($xmlrpc_php_dir) {
         $xmlrpc_php_dir .= '/';
      }
      if (!extension_loaded("xmlrpc")) {
         $bSuccess = dl($xmlrpc_php_dir . "xmlrpc-epi-php.so");
      }
   }
   return $bSuccess;
}

/* generic function to call an http server with post method */
function xu_query_http_post($request, $host, $uri, $port, $debug, 
                            $timeout, $user, $pass, $secure=false) {
   $response_buf = "";
   if ($host && $uri && $port) {
      $content_len = strlen($request);

      $fsockopen = $secure ? "fsockopen_ssl" : "fsockopen";

      dbg1("opening socket to host: $host, port: $port, uri: $uri", $debug);
      $query_fd = $fsockopen($host, $port, $errno, $errstr, 10);

      if ($query_fd) {

         $auth = "";
         if ($user) {
            $auth = "Authorization: Basic " .
                    base64_encode($user . ":" . $pass) . "\r\n";
         }

         $http_request = 
         "POST $uri HTTP/1.0\r\n" .
         "User-Agent: xmlrpc-epi-php/0.2 (PHP)\r\n" .
         "Host: $host:$port\r\n" .
         $auth .
         "Content-Type: text/xml\r\n" .
         "Content-Length: $content_len\r\n" . 
         "\r\n" .
         $request;

         dbg1("sending http request:</h3> <xmp>\n$http_request\n</xmp>", $debug);

         fputs($query_fd, $http_request, strlen($http_request));

         dbg1("receiving response...", $debug);

         $header_parsed = false;

         $line = fgets($query_fd, 4096);
         while ($line) {
            if (!$header_parsed) {
               if ($line === "\r\n" || $line === "\n") {
                  $header_parsed = 1;
               }
               dbg2("got header - $line", $debug);
            }
            else {
               $response_buf .= $line;
            }
            $line = fgets($query_fd, 4096);
         }

         fclose($query_fd);
      }
      else {
         dbg1("socket open failed", $debug);
      }
   }
   else {
      dbg1("missing param(s)", $debug);
   }

   dbg1("got response:</h3>. <xmp>\n$response_buf\n</xmp>\n", $debug);

   return $response_buf;
}

function xu_fault_code($code, $string) {
   return array('faultCode' => $code,
                'faultString' => $string);
}

function find_and_decode_xml($buf, $debug) {
   if (strlen($buf)) {
      $xml_begin = substr($buf, strpos($buf, "<?xml"));
      if (strlen($xml_begin)) {

         $retval = xmlrpc_decode($xml_begin);
      }
      else {
         dbg1("xml start token not found", $debug);
      }
   }
   else {
      dbg1("no data", $debug);
   }
   return $retval;
}

function xu_rpc_http_concise($params) {
   $host = $uri = $port = $method = $args = $debug = null;
   $timeout = $user = $pass = $secure = $debug = null;

    extract($params);

    // default values
    if(!$port) {
        $port = 80;
    }
    if(!$uri) {
        $uri = '/';
    }
    if(!$output) {
        $output = array(version => 'xmlrpc');
    }

   $response_buf = "";
   if ($host && $uri && $port) {
      $request_xml = xmlrpc_encode_request($method, $args, $output);
      $response_buf = xu_query_http_post($request_xml, $host, $uri, $port, $debug,
                                         $timeout, $user, $pass, $secure);

      $retval = find_and_decode_xml($response_buf, $debug);
   }
   return $retval;
}

/* call an xmlrpc method on a remote http server. legacy support. */
function xu_rpc_http($method, $args, $host, $uri="/", $port=80, $debug=false, 
                     $timeout=0, $user=false, $pass=false, $secure=false) {
    return xu_rpc_http_concise(
        array(
            method  => $method,
            args    => $args,
            host    => $host,
            uri     => $uri,
            port    => $port,
            debug   => $debug,
            timeout => $timeout,
            user    => $user,
            pass    => $pass,
            secure  => $secure
        ));
}

function xu_is_fault($arg) {
   // xmlrpc extension finally supports this.
   return is_array($arg) ? xmlrpc_is_fault($arg) : false;
}

/* sets some http headers and prints xml */
function xu_server_send_http_response($xml) {
    header("Content-type: text/xml");
    header("Content-length: " . strlen($xml) );
    echo $xml;
}

function dbg($msg) {
   echo "<h3>$msg</h3>"; flush();
}
function dbg1($msg, $debug_level) {
   if ($debug_level >= 1) {
      dbg($msg);
   }
}
function dbg2($msg, $debug_level) {
   if ($debug_level >= 2) {
      dbg($msg);
   }
}

?> 
```

如果有人知道 xmlrpc 来获得这个解决方案，请指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T15:46:23.450

您要求的结构不是 XML-RPC，因此您将无法使用 PHP 的 XML-RPC 扩展来实现它。[XML-RPC 规范](http://xmlrpc.scripting.com/spec)定义了一个精确的响应结构，包括可用的类型。

您心目中的那种 XML 服务只需要一个 XML 解析库（例如 SimpleXML）、一些 XML 创建函数（可能是将 PHP 数组转换为 XML 格式字符串的递归函数）和少量“调度代码” " 在一个 URL 上支持不同的方法：

```
$request_xml = file_get_contents('php://input');
$request_sx = simplexml_load_string($request_xml);
switch ( (string)$request_sx->Method )
{
    case 'listVideos':
        $data = getVideos( (string)$request_sx->Params->SearchTerm );
        $response_xml = generate_xml($data);
    break;
}

header('Content-Type: text/xml');
echo $response_xml;
exit; 
```

# c# - 如何在 WPF 中滚动保留 DataGrid 组标题？

> ID：10361791
> 
> 赞同：2
> 
> 时间：2012-04-28T08:11:59.153
> 
> 标签：c#, wpf, datagrid, wpfdatagrid

当 a`DataGrid`填充了许多条目以便出现垂直滚动条时，我不希望`DataGrid`滚动查看器隐藏组标题。相反，我希望`ScrollBar`每个*group*都有一个。就我而言，总是只有两 (2) 个组，因此会有 0-2 个滚动条。

这是一个简约的示例代码： http: [//www.wpftutorial.net/datagrid.html#grouping](http://www.wpftutorial.net/datagrid.html#grouping)

```
Customers = new ListCollectionView(_customers);
Customers.GroupDescriptions.Add(new PropertyGroupDescription("Gender")); 
```

XAML：

```
<DataGrid ItemsSource="{Binding GroupedCustomers}">
    <DataGrid.GroupStyle>
        <GroupStyle>
            <GroupStyle.HeaderTemplate>
                <DataTemplate>
                    <StackPanel>
                        <TextBlock Text="{Binding Path=Name}" />
                    </StackPanel>
                </DataTemplate>
            </GroupStyle.HeaderTemplate>
            <GroupStyle.ContainerStyle>
                <Style TargetType="{x:Type GroupItem}">
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="{x:Type GroupItem}">
                                <Expander>
                                    <Expander.Header>
                                        <StackPanel Orientation="Horizontal">
                                          <TextBlock Text="{Binding Path=Name}" />
                                          <TextBlock Text="{Binding Path=ItemCount}"/>
                                          <TextBlock Text="Items"/>
                                        </StackPanel>
                                    </Expander.Header>
                                    <ItemsPresenter />
                                </Expander>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </GroupStyle.ContainerStyle>
        </GroupStyle>
    </DataGrid.GroupStyle>
</DataGrid> 
```

即使在那个基本示例中也会出现问题。我想我需要在`ScrollViewer`某个地方使用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T09:35:19.757

将您的 XAML 更改为以下内容：

```
<DataGrid ItemsSource="{Binding GroupedCustomers}">
<DataGrid.GroupStyle>
    <GroupStyle>
        <GroupStyle.HeaderTemplate>
            <DataTemplate>
                <StackPanel>
                    <TextBlock Text="{Binding Path=Name}" />
                </StackPanel>
            </DataTemplate>
        </GroupStyle.HeaderTemplate>
        <GroupStyle.ContainerStyle>
            <Style TargetType="{x:Type GroupItem}">
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type GroupItem}">
                            <Expander>
                                <Expander.Header>
                                    <StackPanel Orientation="Horizontal">
                                      <TextBlock Text="{Binding Path=Name}" />
                                      <TextBlock Text="{Binding Path=ItemCount}"/>
                                      <TextBlock Text="Items"/>
                                    </StackPanel>
                                </Expander.Header>

                                <ScrollViewer Height="100">
                                     <ItemsPresenter/>
                                </ScrollViewer>

                            </Expander>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </GroupStyle.ContainerStyle>
    </GroupStyle>
</DataGrid.GroupStyle> 
```

您仍然需要 DataGrid ScrollBar 以防您的组在展开时超过了可用高度。

结果是这样的：

![滚动组](../Images/ecb6bb7fe03854a1d978d9ed3c872ca5.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T08:22:13.877

使用`ScrollViewer`包装`ItemsPresenter`in `Expander`：

```
<ScrollViewer>
    <ItemsPresenter />
</ScrollViewer> 
```

也许您必须禁用`VerticalScrollBar`for `DataGrid`：

```
<DataGrid VerticalScrollBarVisibility="Disabled" /> 
```

# windows-phone-7 - WP7对gestureListener上图像宽度/高度的限制

> ID：10361799
> 
> 赞同：1
> 
> 时间：2012-04-28T08:13:16.723
> 
> 标签：windows-phone-7

我正在关注这篇[文章](http://msdn.microsoft.com/hi-in/magazine/gg650664%28en-us%29.aspx)来学习如何在 windows phone 7 中捏合、拖动和旋转图像。但我注意到图像可以从屏幕上拖动、缩小。

有没有办法限制图像的宽度/高度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T10:15:11.367

我认为您将需要自己实施约束。基本上你总是有一个包含图像的容器元素，我假设这个容器有一个宽度/高度集。

容器和图像都有 4 个空间点（左上、右上、左下、右下）。对于约束，您只需要检查图像的这些点都不会超过容器点。

要计算左上角点，请使用：

```
var transform = image.TransformToVisual(container);         
Point topLeftPoint = transform.Transform(new Point(0, 0)); 
```

要计算右上角点，只需将 Image.Width 添加到 topLeftPoint.X。要计算左下角点，请将 Image.Height 添加到 topLeftPoint.Y。要计算右下角点，请将 Image.Height 添加到 topLeftPoint.Y 并将 Image.Width 添加到 topLeftPoint.X。

然后您只需要检查 ContainerTopLeftPoint.X >= ImageTopLeftPoint.X 和 ContainerTopLeftPoint.Y >= ImageTopLeftPoint.Y... 对每个点进行类似检查（但请记住，对于底点，它应该是 <= 而不是 >= ）。

纯数学:)

# android - 完整的 Android 应用程序流程图

> ID：10361802
> 
> 赞同：2
> 
> 时间：2012-04-28T08:13:29.827
> 
> 标签：android, lifecycle, flowchart

有没有人遇到过**整个应用程序**生命周期的流程图？我已经看到了**单个 Activity的生命周期流程图**

我知道有一个对象**应用程序**可以在活动中创建和保留**全局变量。**这必须在活动生命周期*之外创建。*

我还在一些帖子中读到**第一个 Activity**很特别，它最后被销毁了。

我也知道即使父 Activity 暂停/停止，后台任务仍会执行。也想看看他们的生命周期。

如果有一个完整的图表来说明 Android 操作系统如何创建和管理从出生到死亡的**所有**应​​用程序组件，那就太好了。

# javascript - 在 Javascript 中，“Object.create”和“new”之间的区别

> ID：10361803
> 
> 赞同：6
> 
> 时间：2012-04-28T08:13:30.040
> 
> 标签：javascript, inheritance, prototype, prototypal-inheritance

我认为差异已经在我脑海中响起，但我想确定一下。

在 Douglas Crockford 页面[Prototypal Inheritance in JavaScript](http://javascript.crockford.com/prototypal.html)上，他说

> 在原型系统中，对象继承自对象。然而，JavaScript 缺少执行该操作的运算符。相反，它有一个 new 运算符，这样 new f() 会生成一个继承自 f.prototype 的新对象。

我真的不明白他在这句话中想说什么，所以我做了一些测试。在我看来，关键的区别在于，如果我在纯原型系统中基于另一个对象创建一个对象，那么所有父父成员都应该在新对象的原型上，而不是在新对象本身上。

这是测试：

```
var Person = function(name, age) {
        this.name = name;
        this.age = age;
}
Person.prototype.toString = function(){return this.name + ', ' + this.age};

// The old way...
var jim = new Person("Jim",13);
for (n in jim) {
    if (jim.hasOwnProperty(n)) {
        console.log(n);
     }
}
// This will output 'name' and 'age'.

// The pure way...
var tim = Object.create(new Person("Tim",14));
for (n in tim) {
    if (tim.hasOwnProperty(n)) {
        console.log(n);
     }
}
// This will output nothing because all the members belong to the prototype.
// If I remove the hasOwnProperty check then 'name' and 'age' will be output. 
```

我的理解是否正确，只有在测试对象本身的成员时差异才会变得明显？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T09:16:44.640

您的假设是正确的，但是 Douglas 没有过多谈论另一种模式 - 原型也可以用于属性。你的 person 类可以写成：

```
var Person = function(name, age) {
    this.name = name;
    this.age = age;
}
Person.prototype.name = null; //default value if you don't init in ctor
Person.prototype.age = null;
Person.prototype.gender = "male";
Person.prototype.toString = function(){return this.name + ', ' + this.age;}; 
```

在这种情况下，正如您在示例中所做的那样，迭代此类实例的属性不会为“性别”属性生成任何输出。

编辑 1：在构造函数中分配 name 和 age*确实*使 hasOwnProperty 可见属性（感谢@matt 提醒我这一点）。除非有人在实例上设置它，否则未分配的性别属性将不可见。

编辑 2：为了进一步补充这一点，我提出了一种替代继承模式 - 我个人用于非常大的项目的一种：

```
var inherits = function(childCtor, parentCtor) {
  function tempCtor() {};
  tempCtor.prototype = parentCtor.prototype;
  childCtor.superclass = parentCtor.prototype; 
  childCtor.prototype = new tempCtor();
  childCtor.prototype.constructor = childCtor;
};

var Person = function(name){
    this.name = name;
}
Person.prototype.name = "";
Person.prototype.toString = function(){
    return "My name is " + this.name;
}

var OldPerson = function(name, age){
    OldPerson.superclass.constructor.call(this);
    this.age = age
};
inherits(OldPerson, Person);
OldPerson.prototype.age = 0;
OldPerson.prototype.toString = function(){
    var oldString =  OldPerson.superclass.toString.call(this);
    return oldString + " and my age is " + this.age;
} 
```

这是一个相当常见的模式，但有一点小变化——父类通过“超类”属性附加到子类，允许您访问被子类覆盖的方法/属性。从技术上讲，您可以替换`OldPerson.superclass`为`Person`，但这并不理想。如果您曾经将 OldPerson 更改为从 Person 以外的类继承，则您还必须更新对 Person 的所有引用。

编辑 3：只是为了把这个完整的循环，这里是一个“继承”函数的版本，它利用了 Object.create 和功能与我之前描述的完全相同：

```
var inherits = function(childCtor, parentCtor) {
    childCtor.prototype = Object.create(parentCtor.prototype);
    childCtor.superclass = parentCtor.prototype; 
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-10T15:12:24.140

编辑：这个答案最初是对@jordancpaul 的回答的回应，他已经更正了。我将留下有助于解释原型属性和实例属性之间重要区别的部分答案：

在某些情况下，属性*是*在所有实例之间共享的，每当您在原型上声明属性时都需要非常小心。考虑这个例子：

`Person.prototype.favoriteColors = []; //Do not do this!`

现在，如果您使用`Object.create`or创建一个新的 Person 实例`new`，它不会像您预期的那样工作......

```
var jim = new Person("Jim",13);
jim.favoriteColors.push('red');
var tim = new Person("Tim",14);
tim.favoriteColors.push('blue');

console.log(tim.favoriteColors); //outputs an array containing red AND blue! 
```

这并不意味着你永远不能在原型上声明属性，但如果你这样做了，你和每一个在你的代码上工作的开发人员都需要意识到这个陷阱。在这种情况下，如果您出于某种原因更喜欢在原型上声明属性，您可以这样做：

`Person.prototype.favoriteColors = null`

并在构造函数中将其初始化为一个空数组：

```
var Person = function(name, age) {
    ...
    this.favoriteColors = [];
} 
```

使用此方法时的一般规则是，可以直接在原型上设置简单文字属性（字符串、数字、布尔值）的默认值，但任何继承自 Object 的属性（包括数组和日期）都应设置为 null，然后在构造函数中初始化。

更安全的方法是只在原型上声明方法，并且总是在构造函数中声明属性。

无论如何，问题是关于 Object.create ...

传递给 Object.create 的第一个参数被设置为新实例的原型。更好的用法是：

```
var person = {
    initialize: function(name, age) {
        this.name = name;
        this.age = age;
        return this;
    },

    toString: function() {
        return this.name + ', ' + this.age;
    }
};

var tim = Object.create(person).initialize("Tim",14); 
```

现在输出将与您的第一个示例相同。

如您所见，这是一种与 Javascript 中更经典的 OOP 风格不同的哲学方法。使用 Object.create，重点是从现有对象创建新对象，而不是构造函数。然后初始化成为一个单独的步骤。

就我个人而言，我对 Object.create 方法的感受很复杂；它非常适合继承，因为您可以使用第二个参数向现有原型添加其他属性，但它也更冗长，因此 instanceof 检查不再起作用（本示例中的替代方法是 check `person.isPrototypeOf(tim)`）。

我说 Object.create 冗长的主要原因是因为第二个参数，但是那里有一些有用的库可以解决这个问题：

[https://github.com/Gozala/selfish](https://github.com/Gozala/selfish)

[https://github.com/Raynos/pd](https://github.com/Raynos/pd)

（和别的）

我希望这比令人困惑更具有启发性！

# c# - 将字符串格式化为货币

> ID：10361809
> 
> 赞同：1
> 
> 时间：2012-04-28T08:15:15.257
> 
> 标签：c#

我有`string`包含价格的变量。例如，`10000`。我想为千位分隔符使用空间。
例如显示`10000`为`10 000`, `150000`as`150 000`
我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-28T08:18:41.027

试试这个

```
 NumberFormatInfo info = (NumberFormatInfo)CultureInfo.InvariantCulture.NumberFormat.Clone();
    info.NumberGroupSeparator = " ";

    Console.WriteLine(12345.ToString("n", info )); // 12 345.00 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T08:38:01.863

使用 linq 手动转换：

```
var n = "10000000";
var s = n
    .Select((c, i) => c + ((n.Length - i - 1) % 3 == 0 ? " " : ""))
    .Aggregate((s2, s3) => s2 + s3); 
```

# python - python 类中的声明等价于_init_？

> ID：10361810
> 
> 赞同：3
> 
> 时间：2012-04-28T08:15:17.450
> 
> 标签：python

我想知道放在 python 类顶部的声明是否等同于中的语句`__init__`？例如

```
import sys

class bla():
    print 'not init'
    def __init__(self):
        print 'init'
    def whatever(self):
        print 'whatever'

def main():
    b=bla()
    b.whatever()
    return 0

if __name__ == '__main__':
    sys.exit( main() ) 
```

输出是：

```
not init
init
whatever 
```

作为旁注，现在我还得到：

```
Fatal Python error: PyImport_GetModuleDict: no module dictionary!

This application has requested the Runtime to terminate it in an unusual way.
Please contact the application's support team for more information. 
```

关于为什么会这样的任何想法？先感谢您！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-28T08:22:01.497

不，它不等同。该语句在定义`print 'not init'`类时运行`bla`，甚至在您实例化类型对象之前`bla`。

```
>>> class bla():
...    print 'not init'
...    def __init__(self):
...        print 'init'
not init

>>> b = bla()
init 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T08:22:17.343

它们并不完全相同，因为如果你`c=bla()`之后这样做，它只会打印`init`

此外，如果你减少你`main()`的只是`return 0`它仍然打印`not init`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T08:23:00.570

诸如此类的声明适用于整个班级。如果 print 是一个变量赋值而不是一个 print 语句，那么这个变量就是一个类变量。这意味着不是类的每个对象都有自己的，而是整个类只有一个变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-28T08:23:36.153

它们不是等价的。在定义他的类时，只调用一次**init**方法之外的 print 语句。例如，如果我要将您的 main() 例程修改为以下内容：

```
def main():
    b=bla()
    b.whatever()
    c = bla()
    c.whatever()
    return 0 
```

我得到以下输出：

```
not init
init
whatever
init
whatever 
```

not init print 语句在定义类时执行一次。

# python - 简单的 Twisted Echo 客户端

> ID：10361820
> 
> 赞同：2
> 
> 时间：2012-04-28T08:17:49.497
> 
> 标签：python, twisted, twisted.client

我正在尝试在 Twisted 中编写一个简单的 Echo 客户端，它将键盘输入发送到服务器，并由用户自己输入“q”终止。简而言之，我只是想修改[这个页面](http://twistedmatrix.com/documents/current/core/examples/#auto0)上的简单回显客户端（和变体） 。一点都不性感，只是基本款。

我正在为非常基本的事件循环而苦苦挣扎。看起来我无法启动/停止循环内的反应器，因为停止的反应器无法[重新启动](http://twistedmatrix.com/trac/wiki/FrequentlyAskedQuestions#WhycanttheTwistedsreactorberestarted)。如果我不停止反应器，那么我将永远无法进入下一行获得键盘输入。

让我的回声客户端工作的任何帮助将不胜感激。

```
from twisted.internet.protocol import ClientFactory
from twisted.protocols.basic import LineReceiver
from twisted.internet import reactor

class EchoClient(LineReceiver):
    end="Bye-bye!"
    def connectionMade(self):
        #only write and end transmission if the message isn't empty
        if len(self.factory.message) > 0:
            self.sendLine(self.factory.message)
            self.sendLine(self.end)
        else:
        #Else just terminate the connection
            self.transport.loseConnection()

    def lineReceived(self, line):
        print "receive:", line
        if line==self.end:
            self.transport.loseConnection()

class EchoClientFactory(ClientFactory):
    message = ""

    def buildProtocol(self, address):
        p = EchoClient()
        p.factory = self
        return p

    def clientConnectionFailed(self, connector, reason):
        reactor.stop()

    def clientConnectionLost(self, connector, reason):
        reactor.stop()

def main():

    s = raw_input('Text to send (''q'' to terminate): ')
    while s != 'q':
        factory = EchoClientFactory()
        factory.message = s
        reactor.connectTCP('localhost', 8000, factory)

        #This is bad because reactor cannot be restarted once it's been stopped
        reactor.run()

        s = raw_input('Text to send(''q'' to terminate): ')

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T10:15:55.127

根据经验 - 在极少数情况下您想要重新启动或停止反应器，除非您要完全终止程序。如果您遇到一段代码会导致阻塞，例如数据库访问、长时间计算或在您的情况下为 raw_input，您必须：找到一个扭曲的替代方案（在数据库的情况下为 twisted.enterprise.adabi）或使其扭曲兼容。“解除阻塞”代码的最简单方法是利用 twisted.internet.threads 中的 deferToThread 将阻塞位移动到线程中。考虑这个例子：

```
from twisted.internet.threads import deferToThread as __deferToThread
from twisted.internet import reactor

def mmprint(s):
    print(s)

class TwistedRAWInput(object):
    def start(self,callable,terminator):
        self.callable=callable
        self.terminator=terminator
        self.startReceiving()
    def startReceiving(self,s=''):
        if s!=self.terminator:
            self.callable(s)
            __deferToThread(raw_input,':').addCallback(self.startReceiving)

tri = TwistedRAWInput()
reactor.callWhenRunning(tri.start,mmprint,'q')
reactor.run() 
```

您永远不必停止反应器，因为 raw_input 将发生在外部线程中，在每个新行上都会延迟回调。

# blackberry - 如何在黑莓的横向和纵向模式下设置屏幕方向

> ID：10361822
> 
> 赞同：0
> 
> 时间：2012-04-28T08:18:17.577
> 
> 标签：blackberry

如何在纵向模式下设置组件的位置。当我将其更改为横向模式时，组件的位置以不同的方式显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T08:29:15.320

你试过这个吗？

[http://docs.blackberry.com/en/developers/deliverables/11958/Specifying_display_direction_of_screen_647783_11.jsp](http://docs.blackberry.com/en/developers/deliverables/11958/Specifying_display_direction_of_screen_647783_11.jsp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T05:12:25.213

为此，您可以使用MainSceen 的**subLayout()**方法。试试这个

```
 protected void sublayout(final int width, final int height) {

 switch (Display.getOrientation()) {
 case Display.ORIENTATION_LANDSCAPE:
      {
        do something
      }
     break;
 case Display.ORIENTATION_PORTRAIT:
      {
        do something
      }
     break;

 }

  super.sublayout(width, height);
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T11:23:05.253

这是更改屏幕方向的代码 这是我的 LoadingScreen。这里 StartUp 是另一个 className。我们在这里创建 ScreenOrientation 方法。

```
 public class LoadingScreen extends MainScreen
{
public LoadingScreen()
{       
    createGUI();
}

protected void sublayout(int width, int height) 
{
    StartUp.screenOrientation();        
    if(StartUp.isLandscape)
    {
        deleteAll();
        createGUI();            
        invalidate();           
    }
    else
    {   
        deleteAll();
        orientGUI();            
        invalidate();
    }
    super.sublayout(width,height);  
}

public void createGUI()
{
    //For LANDSCAPE Display;
}

public void orientGUI()
{
    //For PORTRAIT Display;
}   
} 
```

屏幕方向方法：

```
 public static void screenOrientation()
{
    if(Display.getOrientation()==Display.ORIENTATION_LANDSCAPE)     
    {
        isLandscape=true;
        width=480;
        height=360;
    }
    else
    {
        isLandscape=false;
        width=360;
        height=480;
    }
} 
```

# php - 使用 PHP 读取 XML 样式文件

> ID：10361826
> 
> 赞同：0
> 
> 时间：2012-04-28T08:18:53.283
> 
> 标签：php, string, parsing, xml-parsing

我正在尝试从此 XML 样式文件中检索数据：

```
<Product_Group>
  <Product_Group_ID>131</Product_Group_ID>
  <Product_Group_Title>Thanks for the Memories</Product_Group_Title>
  <Products>
    <On_Sale_Date>03/01/12 00:00:00.000</On_Sale_Date>
    <ISBN>9780007233694</ISBN>
    <Title>Thanks for the Memories</Title>
    <Format>Paperback</Format>
    <Sub_Format/>
    <CoverImageURL_Small>http://www.harpercollins.com/harperimages/isbn/small/4/9780007233694.jpg</CoverImageURL_Small>
  </Products>
</Product_Group> 
```

我正在使用以下代码，但这似乎什么也没得到。任何解决此问题的帮助将不胜感激

```
$xml = simplexml_load_string($response);
//$xml= $response;
$updates = array();
//loop through all the entry(s) in the feed
for ($i=0; $i<count($xml->Product_Group); $i++)
{
    //get the id from entry
    $ISBN = $xml->entry[$i]->ISBN;

    //get the account link
    $Title = $xml->entry[$i]->Title;

    //get the tweet
    $Product_Group_SEO_Copy = $xml->entry[$i]->Product_Group_SEO_Copy;  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T08:32:26.683

1) 它不是有效的 XML。你看到了什么警告？您需要修复它们`simplexml_load_string`才能正常工作。

例如，`</CoverImageURL_Small>`应该是`<CoverImageURL_Small/>`

2）假设这`Product_Group`不是您的实际文档根（如果它`$xml`已经指向它并且`$xml->Product_Group`将不起作用）那么您可以访问每个元素，例如

`$xml->Product_Group->Products[$i]->ISBN;`

3)在处理 simplexml 时，使用循环通常比使用`foreach`循环更简单`for`

```
foreach($xml->Product_Group->Products as $p)
{
    $ISBN = $p->ISBN;
    //var_dump($ISBN);
} 
```

# mysql - 如何将日期格式从 SQL Server 转换为 MySQL

> ID：10361828
> 
> 赞同：2
> 
> 时间：2012-04-28T08:19:19.820
> 
> 标签：mysql, sql-server, string, datetime, database-migration

我已经在互联网上搜索了将近 6 个小时，以最快地解决我的问题。

我有一个 SQL Server 数据库，其中一些表的列具有 DATETIME 格式，但这些列中的值采用以下格式：

DD-MM-YYYY HH:MM 例如。18-12-2012 00:00

根据我的研究，MySQL 仅接受以下格式的 DATETIME 值：

YYYY-MM-DD HH:MM:SS

现在，我实际上是在尝试在脚本本身而不是数据库中进行转换。

基本上我在 SQL Server 脚本格式的多个表中有超过 250,000 条记录。除了这部分之外，我已经将所有语法更改为 MySQL。

任何帮助或建议将不胜感激。紧迫的。

谢谢 这是桌子

```
CREATE TABLE Price(
  AirlineCode   char(2)     NOT NULL
, FlightNumber  varchar(6)  NOT NULL
, ClassCode     char(3)     NOT NULL
, TicketCode    char(1)     NOT NULL
, StartDate     DateTime    NOT NULL
, EndDate       DateTime    NOT NULL
, Price         decimal     NOT NULL
, PriceLeg1     decimal         NULL
, PriceLeg2     decimal         NULL

, PRIMARY KEY   ( 
                    AirlineCode, 
                    FlightNumber, 
                    ClassCode, 
                    TicketCode, 
                    StartDate 
                )
, FOREIGN KEY (AirlineCode) REFERENCES Airlines (AirlineCode)
, FOREIGN KEY (ClassCode)   REFERENCES TicketClass (ClassCode)
, FOREIGN KEY (TicketCode)  REFERENCES TicketType (TicketCode)); 
```

这是一个示例插入：

```
INSERT INTO Price VALUES ( 'QF', 'QF67',   'ECO', 'E', '18-12-2012 00:00', '04-01-2013 00:00', 3427.82, 1636.14, 2045.20 ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T09:17:46.973

您可以使用 MySQL[`STR_TO_DATE()`](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_str-to-date)函数将日期从*已知*格式转换为日期时间值。假设您有日期`dd-mm-yyyy hh:mm`（所有数字 0 填充并且 hh:mm 是 24 小时时间），您可以使用：

```
SELECT STR_TO_DATE('18-12-2012 00:00', '%d-%m-%Y %k:%i')
-- 2012-12-18 00:00:00 
```

您*可以*在插入查询中使用此函数，如下所示：

```
INSERT INTO Price VALUES (
'QF',
'QF67',
'ECO',
'E',
STR_TO_DATE('18-12-2012 00:00', '%d-%m-%Y %k:%i'),
STR_TO_DATE('04-01-2013 00:00', '%d-%m-%Y %k:%i'),
3427.82,
1636.14,
2045.20
); 
```

# 编辑

如果无法编辑插入查询，则可以让 MySQL 完成所有转换。将日期时间列的数据类型临时更改为`VARCHAR`并导入数据。然后添加一个临时字段，例如`StartDate_Temp DATETIME`并运行更新查询：

```
UPDATE Price SET StartDate_Temp = STR_TO_DATE(StartDate, '%d-%m-%Y %k:%i') 
```

确认数据正常后，删除临时列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T10:27:30.413

**编辑答案：**

此外，您可以[在 SQL Server Management Studio 中使用 RegEx](http://msdn.microsoft.com/en-us/library/ms174214.aspx)：

找什么：`{[0-9][0-9]}\-{[0-9][0-9]}\-{[0-9][0-9][0-9][0-9]} {[0-9][0-9]}\:{[0-9][0-9]}`

用。。。来代替：`\3-\2-\1`

![在此处输入图像描述](../Images/5cd57c9e0f966adaea1dfdb2272542aa.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T01:49:39.643

首先，我想对大家的努力表示感谢。这是我在 StackOverflow.com 上提出的第一个问题，并且对支持水平印象深刻。

经过一点点的研究，我想起了我去年学习的 RegEx 的旧工具包。所以我决定好好利用它。

在 Notepad++ 中，由于其正则表达式搜索功能，我设法追踪了 250000 条记录中的每个日期值，并将它们替换为所需的值。

([0-9][0-9])-([0-9][0-9])-([0-9][0-9][0-9][0-9]) ([ 0-9][0-9]:[0-9][0-9])

这是我对我拥有的日期格式进行的搜索，然后我交换了年份和日期值，并在其中添加了秒数，方法是在替换为框中添加以下内容：

\3-\2-\1 \4:00

问题解决了。

# java - 使用java添加android日历事件

> ID：10361831
> 
> 赞同：3
> 
> 时间：2012-04-28T08:19:47.343
> 
> 标签：java, android, android-calendar

您好我正在尝试将事件添加到 android 日历。我是android开发的新手。请帮助我如何将事件添加到 android 日历。这是我的代码，它不起作用。当我运行它时，它会给我一条消息“应用程序日历（进程 com.something.something）已意外停止”并有此按钮“强制停止”。这是我的代码

```
package com.zafar.calendar;

import android.app.Activity;
import android.content.ContentValues;
import android.database.Cursor;
import android.net.Uri;
import android.os.Bundle;

public class Calendar extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Cursor cursor=getContentResolver().query(Uri.parse("content://com.android.calendar/calendars"), new String[]{"_id", "displayname"}, null, null, null);

    cursor.moveToFirst();
    // Get calendars name
    String calendarNames[] = new String[cursor.getCount()];
    // Get calendars id
    int[] calendarId = new int[cursor.getCount()];
    for (int i = 0; i < calendarNames.length; i++)
    {
             calendarId[i] = cursor.getInt(0);
             calendarNames[i] = cursor.getString(1);
             cursor.moveToNext();
    }
    cursor.close();

    ContentValues contentEvent = new ContentValues();
     contentEvent.put("calendar_id", 1);
     contentEvent.put("title", "Wedding");
     contentEvent.put("eventLocation", "New York");
     contentEvent.put("dtstart","1335432431000");
     contentEvent.put("dtend","1335436031000");

     Uri eventsUri = Uri.parse("content://com.android.calendar/events");
     getContentResolver().insert(eventsUri, contentEvent);

}
} 
```

**更新** 这是我的清单文件

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".Calendar"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <uses-permission android:name="android.permission.READ_CALENDAR"></uses-permission>
    <uses-permission android:name="android.permission.WRITE_CALENDAR"></uses-permission>
</application> 
```

**日志猫**

我是android开发的新手。我不完全了解 logcat。我在命令提示符下运行了 logcat 命令，我得到了这个

```
 04-28 09:16:57.956: D/AndroidRuntime(333): Shutting down VM
04-28 09:16:57.956: W/dalvikvm(333): threadid=1: thread exiting with uncaught exception (group=0x40015560)
04-28 09:16:57.975: E/AndroidRuntime(333): FATAL EXCEPTION: main
04-28 09:16:57.975: E/AndroidRuntime(333): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.zafar.calendar/com.zafar.calendar.Calendar}: java.lang.NullPointerException
04-28 09:16:57.975: E/AndroidRuntime(333):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
04-28 09:16:57.975: E/AndroidRuntime(333):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
04-28 09:16:57.975: E/AndroidRuntime(333):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
04-28 09:16:57.975: E/AndroidRuntime(333):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
04-28 09:16:57.975: E/AndroidRuntime(333):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-28 09:16:57.975: E/AndroidRuntime(333):  at android.os.Looper.loop(Looper.java:123)
04-28 09:16:57.975: E/AndroidRuntime(333):  at android.app.ActivityThread.main(ActivityThread.java:3683)
04-28 09:16:57.975: E/AndroidRuntime(333):  at java.lang.reflect.Method.invokeNative(Native Method)
04-28 09:16:57.975: E/AndroidRuntime(333):  at java.lang.reflect.Method.invoke(Method.java:507)
04-28 09:16:57.975: E/AndroidRuntime(333):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-28 09:16:57.975: E/AndroidRuntime(333):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-28 09:16:57.975: E/AndroidRuntime(333):  at dalvik.system.NativeStart.main(Native Method)
04-28 09:16:57.975: E/AndroidRuntime(333): Caused by: java.lang.NullPointerException
04-28 09:16:57.975: E/AndroidRuntime(333):  at com.zafar.calendar.Calendar.onCreate(Calendar.java:51)
04-28 09:16:57.975: E/AndroidRuntime(333):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-28 09:16:57.975: E/AndroidRuntime(333):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
04-28 09:16:57.975: E/AndroidRuntime(333):  ... 11 more
04-28 09:21:58.095: I/Process(333): Sending signal. PID: 333 SIG: 9 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T08:52:21.143

您的代码中的错误：

1.  `new String[]{"calendar_id", "displayname"}, null, null, null);`

日历数据库中不存在名称 calendar_id 的列。正确的是**_id**而不是 calendar_id。所以它将是 new String[]{" **_id** ", "displayname"}, null, null, null);

并看到这个参考。[https://stackoverflow.com/a/10310258](https://stackoverflow.com/a/10310258)和[http://android.arnodenhond.com/tutorials/calendar](http://android.arnodenhond.com/tutorials/calendar)

**编辑**

要插入新事件，需要 3 个值。Calendar_id、EventStartTime 和 EventEndTime。如果没有这些值，您将无法插入新事件。EventStartTime 和 EventEndTime 需要转换为 epoch 格式。

对于正常日期到纪元日期：[https](https://stackoverflow.com/a/6687502/1160207)
://stackoverflow.com/a/6687502/1160207 对于从纪元到正常日期：[https ://stackoverflow.com/a/10028980/1160207](https://stackoverflow.com/a/10028980/1160207)

这是对我来说完美的代码。

```
Cursor cursor=getContentResolver().query(Uri.parse("content://com.android.calendar/calendars"), new String[]{"_id", "displayname"}, null, null, null);

cursor.moveToFirst();
// Get calendars name
String calendarNames[] = new String[cursor.getCount()];
// Get calendars id
int[] calendarId = new int[cursor.getCount()];
for (int i = 0; i < calendarNames.length; i++)
{
         calendarId[i] = cursor.getInt(0);
         calendarNames[i] = cursor.getString(1);
         cursor.moveToNext();
}
cursor.close();

ContentValues contentEvent = new ContentValues();
 contentEvent.put("calendar_id", 1);
 contentEvent.put("title", "Wedding");
 contentEvent.put("eventLocation", "New York");                
 contentEvent.put("dtstart","1335432431000");
 contentEvent.put("dtend","1335436031000");

 Uri eventsUri = Uri.parse("content://com.android.calendar/events");
 getContentResolver().insert(eventsUri, contentEvent); 
```

希望这会帮助你。如果它对您有帮助，请不要忘记接受它。

谢谢...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T02:56:45.047

如果您希望集成特定的日历应用程序，请联系他们的开发人员并确定他们是否提供 API。因此，例如，Mayra 引用的 Android 开源项目中的日历应用程序没有提供文档化和支持的 API。谷歌甚至明确告诉开发人员不要使用 Mayra 引用的教程中概述的技术。

另一种选择是让您将事件添加到相关的 Internet 日历中。例如，将事件从 Android 开源项目添加到日历应用程序的最佳方法是通过适当的 GData API 将事件添加到用户的 Google 日历。

# extjs - ExtJS 3.3.1 grouptabpanel 如何更改选项卡

> ID：10361835
> 
> 赞同：2
> 
> 时间：2012-04-28T08:20:44.597
> 
> 标签：extjs, tabs

我有以下选项卡定义：

```
var viewport = new Ext.Viewport({
      layout: 'fit',
      items: {
          xtype: 'grouptabpanel',
          tabWidth: 150,
          id: 'tabPanel',
          activeGroup: undefined,
          items: [aItems1]
      }
  }); 
```

where`aItems1`是一个数组数组，例如：

```
aItems1[0] = {
    activeTab: 1,
    items: [{
            title: 'foo',
            tabTip: 'foo'
        }, {
            id: 'main-foo1',
            title: 'foo1',
            tabTip: 'foo1',
            iconCls: 'x-icon-page',
            style: 'padding: 10px;',
            layout: 'fit',
            items: [new Inp.Demands()]
        },
        {
            id: 'main-foo2',
            title: 'foo2',
            tabTip: 'foo2',
            iconCls: 'x-icon-exit'
        }
    ]
}; 
```

我需要`activate`制表符`main-foo2`。

```
var tabPanel = Ext.getCmp('tabPanel');
tabPanel.setActiveTab('main-foo2'); 
```

但是这段代码并没有改变任何东西。

使用`tabPanel.setActiveTab(NUMBER)`，我可以更改活动组，但是应该怎么做才能打开确切的选项卡？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T03:12:23.767

看起来这个实现基本上（但实际上不是）使用了两个 TabPanel。因此，为了设置活动选项卡，您`setActiveGroup`还需要`setActiveTab`为该组设置。

因此，鉴于`exactTabId`您要打开的选项卡，这样的事情可能会起作用：

```
var tab = Ext.getCmp(exactTabId);
var tabGroup = tab.ownerCt;
var groupingPanel = tabGroup.ownerCt;

groupingPanel.setActiveGroup(tabGroup);
tabGroup.setActiveTab(tab); 
```

我使用[GroupTabPanel](http://code.google.com/p/extjsdyntran/source/browse/trunk/extjsdyntran/WebContent/main/ux/GroupTabPanel.js?r=181)和[GroupTab](http://code.google.com/p/extjsdyntran/source/browse/trunk/extjsdyntran/WebContent/main/ux/GroupTab.js?r=181)作为可用方法调用的指南。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-11-28T16:31:50.167

```
aItems1[0] = {
            activeGroup:1, //该属性用于激活特定项
            项目： [
                    {
                     标题：“富”，
                     选项卡提示：'foo'
                },{
                     id:'main-foo1',
                     标题：'foo1'，
                     tabTip: 'foo1',
                     iconCls: 'x-icon-page',
                     样式：'填充：10px；'，
                     布局：'适合'，
                     项目：[新的 Inp.Demands()]
                },{
                     id:'main-foo2',
                     标题：'foo2'，
                     tabTip: 'foo2',
                     iconCls: 'x-icon-exit'
            }]
};

```

# android - Android Bitmap in Out of Memory 的一些问题

> ID：10361837
> 
> 赞同：1
> 
> 时间：2012-04-28T08:21:14.340
> 
> 标签：android, android-layout, bitmap, out-of-memory

我创建了一个 ViewFlipper 以在单个活动中显示来自 Internet 的图像。投掷时，将图像设置为imageView，然后将其添加到viewflipper。但问题是，在显示大约 20 张图像后总是出现 OOM。我做了一些干净的工作来解决它，但它没有用！这是代码。

```
public class ImageCache {

static private ImageCache cache;
private Hashtable<Integer, MySoftRef> hashRefs;
private ReferenceQueue<Bitmap> q;

private class MySoftRef extends SoftReference<Bitmap> {
    private Integer _key = 0;

    public MySoftRef(Bitmap bmp, ReferenceQueue<Bitmap> q, int key) {
        super(bmp, q);
        _key = key;
    }
}

public ImageCache() {
    hashRefs = new Hashtable<Integer, MySoftRef>();
    q = new ReferenceQueue<Bitmap>();
}

public static ImageCache getInstance() {
    if (cache == null) {
        cache = new ImageCache();
    }
    return cache;
}

private void addCacheBitmap(Bitmap bmp, Integer key) {
    cleanCache();
    MySoftRef ref = new MySoftRef(bmp, q, key);
    hashRefs.put(key, ref);
}

public Bitmap getBitmap(int resId) {
    Bitmap bmp = null;
    if (hashRefs.containsKey(resId)) {
        MySoftRef ref = (MySoftRef) hashRefs.get(resId);
        bmp = (Bitmap) ref.get();
    }

    if (bmp == null) {
        URL imgUrl = null;
        try {
            imgUrl = new URL("http:/example/images/" + resId
                    + ".jpg");
            HttpURLConnection conn = (HttpURLConnection) imgUrl
                    .openConnection();
            conn.connect();
            InputStream is = conn.getInputStream();
            bmp  = BitmapFactory.decodeStream(is);
            is.close();
            addCacheBitmap(bmp, resId);
        } catch (Exception e) {
            e.printStackTrace();
        }

    }
    return bmp;
}

private void cleanCache() {
    MySoftRef ref = null;
    while ((ref = (MySoftRef) q.poll()) != null) {
        hashRefs.remove(ref._key);
    }
}

public void clearCache() {
    cleanCache();
    hashRefs.clear();
    System.gc();
    System.runFinalization();
} 
```

这是加载图像代码。

```
public void LoadImage(int n){
    iv = new ImageView(this);
    imageCache = new ImageCache();
    Bitmap bm = imageCache.getBitmap(n);
    iv.setImageBitmap(bm);
    iv.setScaleType(ImageView.ScaleType.CENTER);
    viewFlipper.addView(iv, new LayoutParams(LayoutParams.FILL_PARENT,
            LayoutParams.FILL_PARENT));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T08:36:11.853

释放位图分配的内存的唯一方法是[`recycle()`](http://developer.android.com/reference/android/graphics/Bitmap.html#recycle%28%29). 您应该[`removeView(View)`](http://developer.android.com/reference/android/widget/ViewAnimator.html#removeView%28android.view.View%29)不在范围内`[current - 1; current + 1]`，然后`recycle`是您自己分配的位图。所有这些代码对我来说似乎都是多余的，而且调用 GC 也不是一个好主意。您可以将 InputStream 的内容保存在永久网络存储中，这样就不会产生网络开销。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T08:38:25.123

您应该只加载并保存您需要的 3 个图像：

*   上一张图片
*   现在的一个
*   下一个

只是释放其他人的记忆。为此使用[recycle()](http://developer.android.com/reference/android/graphics/Bitmap.html#recycle%28%29)函数。
如果需要，您甚至可以保留 5 张图像。但没有必要全部保留。

如果您希望您的应用程序具有反应性，您可以将缩略图保存在内存中，显示它，并且仅当您在图像上停留超过 x 秒时才加载完整图像。

这是创建较小图像和管理位图列表的代码

```
Options mThumbOpts = new Options();
mThumbOpts.inSampleSize = 4;

/** The fonction to get a Bitmap from the list */
private Bitmap getBitmap(int id) {
    // TODO recycle previous/next bitmaps here (id -2 and id +2 if they exist)

    // Reload the image if necessary
    if (bitmapList[id] == null || bitmapList[id].isRecycled()) {
        bitmapList[id] = BitmapFactory.decodeFile(imagePath, mThumbOpts);
    }
    return bitmapList[id];
} 
```

[inSampleSize](http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html#inSampleSize)设置为 > 1 的值，请求解码器对原始图像进行二次采样，返回较小的图像以节省内存。
使用 2 的幂可以提高效率。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T08:43:25.000

根据您的代码，您不使用类的单例性质，每次调用时都会`ImageCache`创建新实例：`ImageCache``LoadImage(int n)`

```
imageCache = new ImageCache();
Bitmap bm = imageCache.getBitmap(n); 
```

这真的很奇怪。改用：

```
imageCache = ImageCache.getInstance(); 
```

# c++ - 如何在 main .exe 中从 Lib 和 python27.dll 打包 python .py

> ID：10361838
> 
> 赞同：0
> 
> 时间：2012-04-28T08:21:32.973
> 
> 标签：c++, python, exe

我使用 c++ 代码中的一些 python 代码，但是当我将代码编译为 .exe 时，它​​需要 python27.dll 和 puthon/Lib 中的一些 .py 文件。我想把这个需要的文件打包成 .exe 文件，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T08:28:34.790

这当然是一个重复的问题，但[cx_freeze](http://cx-freeze.sourceforge.net/)、[py2exe](http://www.py2exe.org/)和[pyinstaller](http://www.pyinstaller.org/)是其中的几个选项

# java - GWT 奇怪的序列化异常

> ID：10361839
> 
> 赞同：3
> 
> 时间：2012-04-28T08:21:34.120
> 
> 标签：java, exception, gwt, serialization

我有一个应用程序可以计算 9 个统计信息，这些统计信息存储在复杂的数据结构中，`HashMap<String, TreeMap<String, Integer>>`甚至更复杂。每个统计都实现接口 IStatistic。结果存储在`List<IStatistic>`其中，其大小（最大示例）为 3.5MB（我已手动对其进行序列化并将其放入文件中）。当我有时向客户端发送结果时（通常当数据大小超过 1.5MB 时，即当小于某个限制异常时不会发生）奇怪的异常发生并且它永远不会在同一个地方..

我已经阅读并尝试了针对我在此处和 GWT 官方页面上找到的问题的所有类似解决方案，例如：

> " [https://developers.google.com/web-toolkit/doc/latest/tutorial/RPC](https://developers.google.com/web-toolkit/doc/latest/tutorial/RPC) http://stackoverflow.com/questions/2122798/gwt-occasional-com-google-gwt-user-client-rpc- serializationexception 你检查 了[http://code.google.com/webtoolkit/doc/latest/tutorial/RPC.html#serialize](http://code.google.com/webtoolkit/doc/latest/tutorial/RPC.html#serialize) 文章说：它有一个默认的（零参数）构造函数和任何访问修饰符（例如私有 Foo() {} 会工作）我总是忘记 zeroargument const。当我制作可序列化对象时：D“

但没有任何帮助。还尝试对其进行调试，但它在 GWT 源代码中的某处发生故障，我看不到源代码。有趣的是，对于较小的数据样本，一切都很顺利。

我正在使用 GWT 2.4.0。没有应用引擎。

有没有人有类似的问题或有一些建议来处理这个问题？

```
Here are some example exceptions:
    FIRST EXAMPLE:
    com.google.gwt.user.client.rpc.IncompatibleRemoteServiceException: The response could not be deserialized
        at com.google.gwt.user.client.rpc.impl.RequestCallbackAdapter.onResponseReceived(RequestCallbackAdapter.java:221)
        at com.google.gwt.http.client.Request.fireOnResponseReceived(Request.java:287)
        at com.google.gwt.http.client.RequestBuilder$1.onReadyStateChange(RequestBuilder.java:395)
        at sun.reflect.GeneratedMethodAccessor52.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
        at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
        at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
        at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessagesWhileWaitingForReturn(BrowserChannelServer.java:337)
        at com.google.gwt.dev.shell.BrowserChannelServer.invokeJavascript(BrowserChannelServer.java:218)
        at com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke(ModuleSpaceOOPHM.java:136)
        at com.google.gwt.dev.shell.ModuleSpace.invokeNative(ModuleSpace.java:561)
        at com.google.gwt.dev.shell.ModuleSpace.invokeNativeObject(ModuleSpace.java:269)
        at com.google.gwt.dev.shell.JavaScriptHost.invokeNativeObject(JavaScriptHost.java:91)
        at com.google.gwt.core.client.impl.Impl.apply(Impl.java)
        at com.google.gwt.core.client.impl.Impl.entry0(Impl.java:213)
        at sun.reflect.GeneratedMethodAccessor32.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
        at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
        at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
        at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessages(BrowserChannelServer.java:292)
        at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:546)
        at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:363)
        at java.lang.Thread.run(Unknown Source)
    Caused by: com.google.gwt.user.client.rpc.SerializationException: 2AS (6) 
        at com.google.gwt.user.client.rpc.impl.SerializerBase.getTypeHandler(SerializerBase.java:153)
        at com.google.gwt.user.client.rpc.impl.SerializerBase.instantiate(SerializerBase.java:114)
        at com.google.gwt.user.client.rpc.impl.ClientSerializationStreamReader.deserialize(ClientSerializationStreamReader.java:111)
        at com.google.gwt.user.client.rpc.impl.AbstractSerializationStreamReader.readObject(AbstractSerializationStreamReader.java:119)
        at com.google.gwt.user.client.rpc.core.java.util.Map_CustomFieldSerializerBase.deserialize(Map_CustomFieldSerializerBase.java:38)
        at com.google.gwt.user.client.rpc.core.java.util.TreeMap_CustomFieldSerializer.deserialize(TreeMap_CustomFieldSerializer.java:36)
        at com.google.gwt.user.client.rpc.core.java.util.TreeMap_FieldSerializer.deserial(TreeMap_FieldSerializer.java:15)
        at com.google.gwt.user.client.rpc.impl.SerializerBase.deserialize(SerializerBase.java:95)
        at com.google.gwt.user.client.rpc.impl.ClientSerializationStreamReader.deserialize(ClientSerializationStreamReader.java:113)
        at com.google.gwt.user.client.rpc.impl.AbstractSerializationStreamReader.readObject(AbstractSerializationStreamReader.java:119)
        at com.google.gwt.user.client.rpc.core.java.util.Map_CustomFieldSerializerBase.deserialize(Map_CustomFieldSerializerBase.java:39)
        at com.google.gwt.user.client.rpc.core.java.util.HashMap_CustomFieldSerializer.deserialize(HashMap_CustomFieldSerializer.java:34)
        at com.google.gwt.user.client.rpc.core.java.util.HashMap_FieldSerializer.deserial(HashMap_FieldSerializer.java:19)
        at com.google.gwt.user.client.rpc.impl.SerializerBase.deserialize(SerializerBase.java:95)
        at com.google.gwt.user.client.rpc.impl.ClientSerializationStreamReader.deserialize(ClientSerializationStreamReader.java:113)
        at com.google.gwt.user.client.rpc.impl.AbstractSerializationStreamReader.readObject(AbstractSerializationStreamReader.java:119)
        at hr.fer.zesoi.metals.shared.statistic.result.StatisticM1Result_FieldSerializer.deserialize(StatisticM1Result_FieldSerializer.java:29)
        at hr.fer.zesoi.metals.shared.statistic.result.StatisticM1Result_FieldSerializer.deserial(StatisticM1Result_FieldSerializer.java:51)
        at com.google.gwt.user.client.rpc.impl.SerializerBase.deserialize(SerializerBase.java:95)
        at com.google.gwt.user.client.rpc.impl.ClientSerializationStreamReader.deserialize(ClientSerializationStreamReader.java:113)
        at com.google.gwt.user.client.rpc.impl.AbstractSerializationStreamReader.readObject(AbstractSerializationStreamReader.java:119)
        at com.google.gwt.user.client.rpc.core.java.util.Collection_CustomFieldSerializerBase.deserialize(Collection_CustomFieldSerializerBase.java:34)
        at com.google.gwt.user.client.rpc.core.java.util.ArrayList_CustomFieldSerializer.deserialize(ArrayList_CustomFieldSerializer.java:34)
        at com.google.gwt.user.client.rpc.core.java.util.ArrayList_FieldSerializer.deserial(ArrayList_FieldSerializer.java:19)
        at com.google.gwt.user.client.rpc.impl.SerializerBase.deserialize(SerializerBase.java:95)
        at com.google.gwt.user.client.rpc.impl.ClientSerializationStreamReader.deserialize(ClientSerializationStreamReader.java:113)
        at com.google.gwt.user.client.rpc.impl.AbstractSerializationStreamReader.readObject(AbstractSerializationStreamReader.java:119)
        at com.google.gwt.user.client.rpc.impl.RequestCallbackAdapter$ResponseReader$8.read(RequestCallbackAdapter.java:106)
        at com.google.gwt.user.client.rpc.impl.RequestCallbackAdapter.onResponseReceived(RequestCallbackAdapter.java:214)
        ... 26 more

SECOND EXAMPLE:
com.google.gwt.dev.shell.HostedModeException: Something other than an int was returned from JSNI method '@com.google.gwt.user.client.rpc.impl.ClientSerializationStreamReader::readInt()': JS value of type string, expected int
    at com.google.gwt.dev.shell.JsValueGlue.getIntRange(JsValueGlue.java:266)
    at com.google.gwt.dev.shell.JsValueGlue.get(JsValueGlue.java:144)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNativeInt(ModuleSpace.java:247)
    at com.google.gwt.dev.shell.JavaScriptHost.invokeNativeInt(JavaScriptHost.java:75)
    at com.google.gwt.user.client.rpc.impl.ClientSerializationStreamReader.readInt(ClientSerializationStreamReader.java)
    at com.google.gwt.user.client.rpc.impl.ClientSerializationStreamReader.readString(ClientSerializationStreamReader.java:104)
    at com.google.gwt.user.client.rpc.core.java.lang.String_CustomFieldSerializer.instantiate(String_CustomFieldSerializer.java:37)
    at com.google.gwt.user.client.rpc.core.java.lang.String_FieldSerializer.create(String_FieldSerializer.java:11)
    at com.google.gwt.user.client.rpc.impl.SerializerBase.instantiate(SerializerBase.java:115)
    at com.google.gwt.user.client.rpc.impl.ClientSerializationStreamReader.deserialize(ClientSerializationStreamReader.java:111)
    at com.google.gwt.user.client.rpc.impl.AbstractSerializationStreamReader.readObject(AbstractSerializationStreamReader.java:119)
    at com.google.gwt.user.client.rpc.core.java.util.Collection_CustomFieldSerializerBase.deserialize(Collection_CustomFieldSerializerBase.java:34)
    at com.google.gwt.user.client.rpc.core.java.util.TreeSet_CustomFieldSerializer.deserialize(TreeSet_CustomFieldSerializer.java:36)
    at com.google.gwt.user.client.rpc.core.java.util.TreeSet_FieldSerializer.deserial(TreeSet_FieldSerializer.java:15)
    at com.google.gwt.user.client.rpc.impl.SerializerBase.deserialize(SerializerBase.java:95)
    at com.google.gwt.user.client.rpc.impl.ClientSerializationStreamReader.deserialize(ClientSerializationStreamReader.java:113)
    at com.google.gwt.user.client.rpc.impl.AbstractSerializationStreamReader.readObject(AbstractSerializationStreamReader.java:119)
    at com.google.gwt.user.client.rpc.core.java.util.Map_CustomFieldSerializerBase.deserialize(Map_CustomFieldSerializerBase.java:39)
    at com.google.gwt.user.client.rpc.core.java.util.HashMap_CustomFieldSerializer.deserialize(HashMap_CustomFieldSerializer.java:34)
    at com.google.gwt.user.client.rpc.core.java.util.HashMap_FieldSerializer.deserial(HashMap_FieldSerializer.java:19)
    at com.google.gwt.user.client.rpc.impl.SerializerBase.deserialize(SerializerBase.java:95)
    at com.google.gwt.user.client.rpc.impl.ClientSerializationStreamReader.deserialize(ClientSerializationStreamReader.java:113)
    at com.google.gwt.user.client.rpc.impl.AbstractSerializationStreamReader.readObject(AbstractSerializationStreamReader.java:119)
    at hr.fer.zesoi.metals.shared.statistic.IStatisticResult_FieldSerializer.deserialize(IStatisticResult_FieldSerializer.java:13)
    at hr.fer.zesoi.metals.shared.statistic.result.StatisticM2Result_FieldSerializer.deserialize(StatisticM2Result_FieldSerializer.java:22)
    at hr.fer.zesoi.metals.shared.statistic.result.StatisticM2Result_FieldSerializer.deserial(StatisticM2Result_FieldSerializer.java:40)
    at com.google.gwt.user.client.rpc.impl.SerializerBase.deserialize(SerializerBase.java:95)
    at com.google.gwt.user.client.rpc.impl.ClientSerializationStreamReader.deserialize(ClientSerializationStreamReader.java:113)
    at com.google.gwt.user.client.rpc.impl.AbstractSerializationStreamReader.readObject(AbstractSerializationStreamReader.java:119)
    at com.google.gwt.user.client.rpc.core.java.util.Collection_CustomFieldSerializerBase.deserialize(Collection_CustomFieldSerializerBase.java:34)
    at com.google.gwt.user.client.rpc.core.java.util.ArrayList_CustomFieldSerializer.deserialize(ArrayList_CustomFieldSerializer.java:34)
    at com.google.gwt.user.client.rpc.core.java.util.ArrayList_FieldSerializer.deserial(ArrayList_FieldSerializer.java:19)
    at com.google.gwt.user.client.rpc.impl.SerializerBase.deserialize(SerializerBase.java:95)
    at com.google.gwt.user.client.rpc.impl.ClientSerializationStreamReader.deserialize(ClientSerializationStreamReader.java:113)
    at com.google.gwt.user.client.rpc.impl.AbstractSerializationStreamReader.readObject(AbstractSerializationStreamReader.java:119)
    at com.google.gwt.user.client.rpc.impl.RequestCallbackAdapter$ResponseReader$8.read(RequestCallbackAdapter.java:106)
    at com.google.gwt.user.client.rpc.impl.RequestCallbackAdapter.onResponseReceived(RequestCallbackAdapter.java:214)
    at com.google.gwt.http.client.Request.fireOnResponseReceived(Request.java:287)
    at com.google.gwt.http.client.RequestBuilder$1.onReadyStateChange(RequestBuilder.java:395)
    at sun.reflect.GeneratedMethodAccessor37.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessagesWhileWaitingForReturn(BrowserChannelServer.java:337)
    at com.google.gwt.dev.shell.BrowserChannelServer.invokeJavascript(BrowserChannelServer.java:218)
    at com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke(ModuleSpaceOOPHM.java:136)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNative(ModuleSpace.java:561)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNativeObject(ModuleSpace.java:269)
    at com.google.gwt.dev.shell.JavaScriptHost.invokeNativeObject(JavaScriptHost.java:91)
    at com.google.gwt.core.client.impl.Impl.apply(Impl.java)
    at com.google.gwt.core.client.impl.Impl.entry0(Impl.java:213)
    at sun.reflect.GeneratedMethodAccessor32.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessages(BrowserChannelServer.java:292)
    at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:546)
    at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:363)
    at java.lang.Thread.run(Unknown Source)

THIRD EXAMPLE:

    java.lang.NullPointerException
    at java.util.TreeMap.put(Unknown Source)
    at java.util.TreeSet.add(Unknown Source)
    at com.google.gwt.user.client.rpc.core.java.util.Collection_CustomFieldSerializerBase.deserialize(Collection_CustomFieldSerializerBase.java:35)
    at com.google.gwt.user.client.rpc.core.java.util.TreeSet_CustomFieldSerializer.deserialize(TreeSet_CustomFieldSerializer.java:36)
    at com.google.gwt.user.client.rpc.core.java.util.TreeSet_FieldSerializer.deserial(TreeSet_FieldSerializer.java:15)
    at com.google.gwt.user.client.rpc.impl.SerializerBase.deserialize(SerializerBase.java:95)
    at com.google.gwt.user.client.rpc.impl.ClientSerializationStreamReader.deserialize(ClientSerializationStreamReader.java:113)
    at com.google.gwt.user.client.rpc.impl.AbstractSerializationStreamReader.readObject(AbstractSerializationStreamReader.java:119)
    at com.google.gwt.user.client.rpc.core.java.util.Map_CustomFieldSerializerBase.deserialize(Map_CustomFieldSerializerBase.java:39)
    at com.google.gwt.user.client.rpc.core.java.util.HashMap_CustomFieldSerializer.deserialize(HashMap_CustomFieldSerializer.java:34)
    at com.google.gwt.user.client.rpc.core.java.util.HashMap_FieldSerializer.deserial(HashMap_FieldSerializer.java:19)
    at com.google.gwt.user.client.rpc.impl.SerializerBase.deserialize(SerializerBase.java:95)
    at com.google.gwt.user.client.rpc.impl.ClientSerializationStreamReader.deserialize(ClientSerializationStreamReader.java:113)
    at com.google.gwt.user.client.rpc.impl.AbstractSerializationStreamReader.readObject(AbstractSerializationStreamReader.java:119)
    at hr.fer.zesoi.metals.shared.statistic.IStatisticResult_FieldSerializer.deserialize(IStatisticResult_FieldSerializer.java:13)
    at hr.fer.zesoi.metals.shared.statistic.result.StatisticM4Result_FieldSerializer.deserialize(StatisticM4Result_FieldSerializer.java:44)
    at hr.fer.zesoi.metals.shared.statistic.result.StatisticM4Result_FieldSerializer.deserial(StatisticM4Result_FieldSerializer.java:66)
    at com.google.gwt.user.client.rpc.impl.SerializerBase.deserialize(SerializerBase.java:95)
    at com.google.gwt.user.client.rpc.impl.ClientSerializationStreamReader.deserialize(ClientSerializationStreamReader.java:113)
    at com.google.gwt.user.client.rpc.impl.AbstractSerializationStreamReader.readObject(AbstractSerializationStreamReader.java:119)
    at com.google.gwt.user.client.rpc.core.java.util.Collection_CustomFieldSerializerBase.deserialize(Collection_CustomFieldSerializerBase.java:34)
    at com.google.gwt.user.client.rpc.core.java.util.ArrayList_CustomFieldSerializer.deserialize(ArrayList_CustomFieldSerializer.java:34)
    at com.google.gwt.user.client.rpc.core.java.util.ArrayList_FieldSerializer.deserial(ArrayList_FieldSerializer.java:19)
    at com.google.gwt.user.client.rpc.impl.SerializerBase.deserialize(SerializerBase.java:95)
    at com.google.gwt.user.client.rpc.impl.ClientSerializationStreamReader.deserialize(ClientSerializationStreamReader.java:113)
    at com.google.gwt.user.client.rpc.impl.AbstractSerializationStreamReader.readObject(AbstractSerializationStreamReader.java:119)
    at com.google.gwt.user.client.rpc.impl.RequestCallbackAdapter$ResponseReader$8.read(RequestCallbackAdapter.java:106)
    at com.google.gwt.user.client.rpc.impl.RequestCallbackAdapter.onResponseReceived(RequestCallbackAdapter.java:214)
    at com.google.gwt.http.client.Request.fireOnResponseReceived(Request.java:287)
    at com.google.gwt.http.client.RequestBuilder$1.onReadyStateChange(RequestBuilder.java:395)
    at sun.reflect.GeneratedMethodAccessor47.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessagesWhileWaitingForReturn(BrowserChannelServer.java:337)
    at com.google.gwt.dev.shell.BrowserChannelServer.invokeJavascript(BrowserChannelServer.java:218)
    at com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke(ModuleSpaceOOPHM.java:136)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNative(ModuleSpace.java:561)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNativeObject(ModuleSpace.java:269)
    at com.google.gwt.dev.shell.JavaScriptHost.invokeNativeObject(JavaScriptHost.java:91)
    at com.google.gwt.core.client.impl.Impl.apply(Impl.java)
    at com.google.gwt.core.client.impl.Impl.entry0(Impl.java:213)
    at sun.reflect.GeneratedMethodAccessor42.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessages(BrowserChannelServer.java:292)
    at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:546)
    at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:363)
    at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T20:50:12.400

对于第一个错误，这几乎肯定表明您的服务器和客户端不同步，并且对可以序列化和反序列化的内容有不同的看法。清除浏览器缓存，或确保服务器运行与客户端相同的代码（如果从 google 的 appengine 服务器运行，则重新部署到服务器，如果在本地运行，则重新部署）。从字符串 " `2AS`" 看来，您可能正在混淆类型名称 - 考虑禁用该功能，直到您确定解决此问题。

第二个错误：

```
com.google.gwt.dev.shell.HostedModeException: Something other than an int was returned from JSNI method '@com.google.gwt.user.client.rpc.impl.ClientSerializationStreamReader::readInt()': JS value of type string, expected int
at com.google.gwt.dev.shell.JsValueGlue.getIntRange(JsValueGlue.java:266)
at com.google.gwt.dev.shell.JsValueGlue.get(JsValueGlue.java:144)
at com.google.gwt.dev.shell.ModuleSpace.invokeNativeInt(ModuleSpace.java:247)
at com.google.gwt.dev.shell.JavaScriptHost.invokeNativeInt(JavaScriptHost.java:75) 
```

幸运的是，这是 Chrome+Dev 模式下的一个已知问题。在其他浏览器中不会出现，在网页模式的Chrome中也不会出现。使用不同的浏览器是避免这种情况的最简单方法——任何运行大量 JSNI 代码（例如任何 RPC 代码）的代码最终都会遇到这种情况。

```
java.lang.NullPointerException
at java.util.TreeMap.put(Unknown Source)
at java.util.TreeSet.add(Unknown Source)
at com.google.gwt.user.client.rpc.core.java.util.Collection_CustomFieldSerializerBase.deserialize(Collection_CustomFieldSerializerBase.java:35)
at com.google.gwt.user.client.rpc.core.java.util.TreeSet_CustomFieldSerializer.deserialize(TreeSet_CustomFieldSerializer.java:36)
at com.google.gwt.user.client.rpc.core.java.util.TreeSet_FieldSerializer.deserial(TreeSet_FieldSerializer.java:15) 
```

这发生在这段代码中：

```
@SuppressWarnings("unchecked")
public final class Collection_CustomFieldSerializerBase {

  public static void deserialize(SerializationStreamReader streamReader,
      Collection instance) throws SerializationException {
    int size = streamReader.readInt();
    for (int i = 0; i < size; ++i) {
      Object obj = streamReader.readObject();
      instance.add(obj); //line 35
    }
  } 
```

这表明该行为`obj`空，并且您可能正在向 TreeSet 添加一些空对象（在我想象的 TreeMap 中）。可能值得在该类中设置断点，条件是 obj 为 null 以确定这是否是原因，如果是，如何确定它。

# php - 修复 PHP 中的“未定义索引”错误

> ID：10361841
> 
> 赞同：-2
> 
> 时间：2012-04-28T08:21:48.670
> 
> 标签：php

```
if ((!$_GET['month']) && (!$_GET['year'])) {
  $month = date ("n");
  $year = date ("Y");
} else {
  $month = $_GET['month'];
  $year = $_GET['year'];
} 
```

它显示`Notice: Undefined index: month in....`。

我知道如果我使用`error_reporting(null);`上面的代码，通知不会出现，但是有没有办法修复这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T08:24:53.300

如果数组元素不存在，您会收到通知，因为您正在尝试*访问*不存在的元素。您需要使用[`isset()`](http://php.net/isset)或[`empty()`](http://php.net/empty)检查它（这些不是函数，而是语言结构，因此不考虑访问这些元素）。由于您可能永远不会有空/零年/月，因此`empty`更有意义；但您也可以使用`!isset()`, then`0`并且也允许使用空字符串。

```
if(empty($_GET['month']) || empty($_GET['year'])) {
    $month = date('n');
    $year = date('Y');
}
else {
    $month = (int)$_GET['month'];
    $year = (int)$_GET['year'];
} 
```

但是，单独检查这两个变量可能更有意义：

```
$month = empty($_GET['month']) ? date('n') : $_GET['month'];
$year = empty($_GET['year']) ? date('Y') : $_GET['year']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T08:27:36.687

您当前拥有它的方式是同时检查两者，如果一个失败同时更改两者，也许最好预设月份和日期，然后如果参数通过则更改。另外，检查那里的数字是个好主意。否则字符串可能会进一步破坏您的代码

```
<?php 
$month = date ("n");
$year = date ("Y");
if (isset($_GET['month']) && is_numeric($_GET['month'])) {
    $month = $_GET['month'];
}
if (isset($_GET['year']) && is_numeric($_GET['year'])) {
    $year = $_GET['year'];
}

//Or better yet
$month = (isset($_GET['month']) && is_numeric($_GET['month']))?$_GET['month']:date("n");
$year = (isset($_GET['year']) && is_numeric($_GET['year']))?$_GET['year']:date("Y");
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T08:23:48.230

您必须使用`empty()`或`isset()`检查变量是否已定义。

```
if ( empty($_GET['month']) || empty($_GET['year']) ) {
   $month = date ("n");
   $year = date ("Y");
} else {
   $month = $_GET['month'];
   $year = $_GET['year'];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-28T08:25:48.243

```
 $month = date('n');
 $year = date('Y');
 if (isset($_GET['month'])) {
   $month=$_GET['month'];
 }
 if (isset($_GET['year'])) {
   $year=$_GET['year'];
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-28T08:26:38.007

是的，您可以`if(isset($_GET['month']) && isset($_GET['year']))`在 if 块中使用

# eclipse - Papyrus 0.9.0M6 安装到 Eclipse Juno 无法完成

> ID：10361847
> 
> 赞同：2
> 
> 时间：2012-04-28T08:22:17.163
> 
> 标签：eclipse, papyrus

通过下载的 .Zip 文件将 Papyrus 0.9.0M6 安装到 Eclipse Juno 时，

朱诺说，

无法完成安装，因为找不到一项或多项所需项目。正在安装的软件：Papyrus SDK Binaries (Incubation) 0.9.0.v201203211542 (org.eclipse.papyrus.sdk.feature.feature.group 0.9.0.v201203211542) 缺少要求：XWT (Incubation) 0.9.1.v20110603 (org. eclipse.e4.xwt 0.9.1.v20110603)

## 需要 'bundle org.pushingpixels.trident 1.2.0' 但找不到

无法满足依赖：来自：XWT UI Plug-in (Incubation) 0.9.0.v20101021 (org.eclipse.e4.xwt.tools.ui 0.9.0.v20101021) 到：bundle org.eclipse.e4.xwt 0.0.0无法满足依赖关系：来自：Papyrus SDK Binaries (Incubation) 0.9.0.v201203211542 (org.eclipse.papyrus.sdk.feature.feature.group 0.9.0.v201203211542) 至：org.eclipse.e4.xwt.tools.ui [0.9.0.v20101021]

* * *

我无法从任何地方获得“org.pushingpixels.trident 1.2.0”。

当我通过“帮助 > 安装建模组件 > Papyrus”安装 Papyrus 时，Juno 会产生错误，但没有异常堆栈跟踪。

我在哪里可以获得 pushpixels 捆绑包以成功将 Papyrus 0.9.0M6 安装到 Juno。

如果需要该捆绑包将 Papyrus 0.9.0M6 安装到 Juno，我建议 Papyrus 应该在其发行版中包含该捆绑包。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T08:45:31.693

为了让 Papyrus0.9.0M6 在 Eclipse Juno 4.2 中工作，我们需要安装下面的其他插件。

*   **EMF** Facet SDK
*   可操作**的 QVT** SDK
*   **MoDisco** SDK
*   **WST** XML 核心
*   **xText** SDK
*   **OCL**示例和编辑器
*   颠覆性**的 SVN**团队提供者

所有这些都可以在 Juno 更新站点上找到，用上面的粗体字母过滤。

我不知道其中哪些包含“org.pushingpixels.trident”，但是在您成功安装以上所有内容后，您会在包资源管理器中看到“org.pushingpixels.trident”。

# android - 发送 LatLong 到服务器

> ID：10361854
> 
> 赞同：-1
> 
> 时间：2012-04-28T08:23:00.493
> 
> 标签：android, ip-address

我创建了一个 Lat-Long 应用程序，它需要将接收到的 Lat-Long 发送到服务器并将其存储在我的数据库中。请建议我如何将经纬度发送到服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T08:32:27.783

如果您使用的是 MySQL，您可以使用接收 lat 和 long 作为参数并将它们解析为查询的 php 脚本。

```
ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
nameValuePairs.add(new BasicNameValuePair("lat", lat));
nameValuePairs.add(new BasicNameValuePair("lng", lng));

try {
            HttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost("http://yourserver.com/script.php");
            httpPost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            HttpResponse response = httpClient.execute(httpPost);
            HttpEntity entity = response.getEntity();
            is = entity.getContent();               
        }catch (Exception e) {
            // TODO: handle exception
            Log.e("log_tag", e.toString());
            return false;
            //Toast.makeText(this, e.toString(), Toast.LENGTH_LONG).show();
        } 
```

# c# - Winform TextBox 无法显示文本

> ID：10361855
> 
> 赞同：6
> 
> 时间：2012-04-28T08:23:21.843
> 
> 标签：c#, winforms, string

今天发现TextBox.Text有个奇怪的问题，如果字符串长度太大，文本框看起来像空的，但实际上我仍然可以选择/复制/粘贴，只是看不到字符。

我写了一个小winform来测试，发现如果字符串长度超过5460就会出现问题。

我正在使用Win7 64，VS2010。我知道在单行文本框中显示这么大的字符串是没有意义的，但我想知道根本原因。

而且我还注意到在Win2008中没有发生这种情况，即使在Win7中，当我使用屏幕录像机时，问题也消失了！太奇怪了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-26T14:37:53.893

您可以制作一个 if-checker，它接受一个字符串，检查字符串是否超过允许的长度。然后，您可以在字符串上运行一个函数，该函数返回一个缩减为所需长度的字符串，最后可能带有 .. 以表明它已被缩短。也许是这样的：

```
public string Truncate(string source, int length)
{
    if (source.Length > length) 
    {
            source = source.Substring(0, length -2); //-2 because of the ".."
            source += "..";
    }
    return source;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-13T14:50:07.370

我遇到了同样的错误，设置多行为真解决了它。你可以试试这个

```
<TextBox>.Multiline = true; 
```

# actionscript-3 - 我们什么时候需要将舞台的引用从一个类添加到另一个类

> ID：10361856
> 
> 赞同：1
> 
> 时间：2012-04-28T08:23:25.857
> 
> 标签：actionscript-3, flash, class, reference, stage

我们什么时候需要像本教程中那样将阶段的引用从一个 as3 类传递到另一个类

[http://asgamer.com/2009/as3-flash-games-for-beginners-firing-weapons-with-delays](http://asgamer.com/2009/as3-flash-games-for-beginners-firing-weapons-with-delays)

他在从子弹类到船类的舞台上添加了一个参考

据我了解，当我们想在另一个类中使用某个类中的函数时需要引用，但为什么我们必须引用阶段不是整个项目的一个阶段还是每个类都有自己的阶段？

我很困扰

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T08:29:43.820

只有连接到舞台的对象才会显示在屏幕上。在教程中，他将激光添加到舞台显示列表中，以便它出现在屏幕上。`visible`在添加之前，无论属性如何，它都不会被渲染。

有关显示列表的更多信息，请参阅[此内容。](http://www.republicofcode.com/tutorials/flash/as3displaylist/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T16:23:29.500

@Geotarget 是正确的，但答案有点间接。

不在显示列表中的对象实际上没有对 的引用`stage`。因此，例如，如果您创建一个`var mc:MovieClip = new MovieClip();`未添加到显示列表中的 （如`addChild(mc)`），那么`mc.stage`将是`null`。（此外，检查`if(mc.stage){[...]}`也是一种验证是否`MovieClip`是显示列表的一部分的方法。）

因此，您可以传递`stage`对非显示列表对象的引用，以允许它们访问诸如`stageWidth`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T16:40:22.117

是的，当您想要访问该特定类（引用所属）中存在的函数时，需要引用。这是用途之一。

整个项目只有一个阶段。

在您正在学习的教程中，这两个类都使用了 COMMON Stage 的引用，因此它们都可以访问 Stage。这就像给两个人一个地方的地址。这样他们两个都可以去那里。当然，提供地址并不意味着我们为每个地址建造两个地方。

五。

# android - 启动画面图像。如何在我的应用程序中添加这个？

> ID：10361860
> 
> 赞同：-3
> 
> 时间：2012-04-28T08:23:48.313
> 
> 标签：android, android-layout, android-intent, android-widget

我想在我的应用程序中添加启动画面图像。最简单的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T08:27:02.377

将活动设置为主要活动。在其 XML 布局中添加一个`ImageView`. 为此设置图像`ImageView`。创建一个线程以在特定时间内运行此活动。一旦该时间结束，调用下一个活动的意图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T08:31:53.913

[http://docs.xamarin.com/android/tutorials/Creating_a_Splash_Screen](http://docs.xamarin.com/android/tutorials/Creating_a_Splash_Screen)

这是一个简单的教程

# report - stimulsoftreports.net 是否支持样式标签

> ID：10361862
> 
> 赞同：1
> 
> 时间：2012-04-28T08:24:13.770
> 
> 标签：report

我在 ASP.NET 的 ckeditor 中编辑了一封信，其中包含样式标签以获取信函作者的标志。我将它传递给一个文本框，现在我想在 stimulsoftreport.net 中报告这封信，但是当我这样做时，报告中不显示符号，只显示文本。我怎样才能完整地报告这封信？我可以对 stimulsoft 做些什么来支持样式标签。我尝试了 **允许 html 标记**并**允许属性后面的图像，**但它没有解决问题。有人有其他想法吗？感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:40:52.183

Unfortunately, there is a limited support of the html tags.

You could read about it in the **3.6 HTML Tags** section of the [Stimulsoft Reports Universal User Manual](http://www.stimulsoft.com/en/documentation).

You should put StiImage component on the page.

# c# - C# 项目的资源编译

> ID：10361866
> 
> 赞同：1
> 
> 时间：2012-04-28T08:25:15.077
> 
> 标签：c#, resource-files

我有一个 C# 项目，资源中有大量图像文件。每次构建项目时，编译这些资源大约需要 30 秒。

我想知道如果没有更改，是否可以配置 Visual Studio 2010 以防止资源编译。

谢谢。

**更新**

非常感谢您的帮助。问题已解决如下。我将所有资源的*持久性*属性从 «Linked at compile time» 更改为 «Embedded in .resx»。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T08:32:34.840

显式创建资源文件并嵌入到您的程序集中。Moee 详细信息，请参阅以下链接 **[创建资源文件](http://msdn.microsoft.com/en-us/library/xbx3z216.aspx)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T08:30:55.177

在 Visual Studio 中：

*   选择所有图像
*   打开属性窗口 (F4)
*   设置`Build Action`为**内容**
*   如果较新，则设置`Copy to Output Directory`为**复制**

![在此处输入图像描述](../Images/dc7fed56b7f6f248e47cc3eb76164633.png)

# c# - 如何检查嵌套引用中的空值

> ID：10361868
> 
> 赞同：9
> 
> 时间：2012-04-28T08:25:19.127
> 
> 标签：c#, c#-4.0, nullreferenceexception

寻找一些最佳实践指导。假设我有这样一行代码：

```
Color color = someOrder.Customer.LastOrder.Product.Color; 
```

其中 Customer、LastOrder、Product 和 Color 可能`null`处于正常条件下。但是，如果路径中的任何一个对象为空，我希望颜色为空；为了避免空引用异常，我需要检查每个对象的空条件，例如

```
Color color = someOrder == null ||
              someOrder.Customer == null || 
              someOrder.Customer.LastOrder == null ||
              someOrder.Customer.Product == null ? 
              null : someOrder.Customer.LastOrder.Product.Color; 
```

或者我可以这样做

```
Color color = null;
try {color = someOrder.Customer.LastOrder.Product.Color}
catch (NullReferenceException) {} 
```

第一种方法显然有效，但编码似乎有点乏味且难以阅读。第二种方法更容易一些，但为此使用异常处理可能不是一个好主意。

是否有另一种检查空值并在必要时将空值分配给颜色的快捷方式？或者关于在使用此类嵌套引用时如何避免 NullReferenceExceptions 的任何想法？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-28T08:27:40.220

您正在寻找 null 安全取消引用运算符。

```
Color color = someOrder?.Customer?.LastOrder?.Product?.Color; 
```

不幸的是，C# 不支持它。也许稍后会添加它，但目前没有计划这样做。

**有关的**

*   [深度空值检查，有没有更好的方法？](https://stackoverflow.com/questions/2080647/deep-null-checking-is-there-a-better-way)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T09:50:37.477

最佳做法是遵循[得墨忒耳法则](http://en.wikipedia.org/wiki/Law_of_Demeter)，听起来是：不要与陌生人交谈。即对象应避免调用由另一个方法返回的成员对象的方法。这允许编写更少耦合、更易维护和可读的代码。

所以，避免使用“火车残骸”之类的`someOrder.Customer.LastOrder.Product.Color`，因为它们完全违反了得墨忒耳法则。甚至很难理解这段代码有什么商业意义。为什么你会得到其他订单产品的颜色，而不是当前订单？

移除火车残骸的可能方法 - 将功能推向更接近有趣的残骸末端。在您的情况下，还可以考虑将最后一个产品传递给您的方法，而不是使用一些订单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-31T09:58:15.277

你需要在哪里实现这一点。

用法

```
Color color = someOrder.ComplexGet(x => x.Customer.LastOrder.Product.Color); 
```

或者

```
Color color = Complex.Get(() => someOrder.Customer.LastOrder.Product.Color); 
```

助手类实现

```
public static class Complex
{
    public static T1 ComplexGet<T1, T2>(this T2 root, Func<T2, T1> func)
    {
        return Get(() => func(root));
    }

    public static T Get<T>(Func<T> func)
    {
        try
        {
            return func();
        }
        catch (Exception)
        {
            return default(T);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-28T08:29:13.117

我肯定更喜欢第一种方法......第二种方法利用程序流的异常机制，恕我直言，这是不好的做法......

AFAIK 在 C# 中没有快捷方式或“空安全解除引用运算符”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-28T08:50:11.930

定义访问嵌套属性的唯一方法。例如像这样

```
private Customoer GetCustomer(Order order)
{
  return order != null ? order.Customer : null;
}

private Order GetLastOrder(Customer customer)
{
   return customer != null ? customer.LastOrder : null;
} 
```

使用定义的方法在应用程序中访问您的属性

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-14T15:17:52.177

您还可以在 if 语句中使用 Null 条件运算符。如果有很多嵌套值，它真的很有用。

例子：

```
public class DummyDto
{
    public string Name { get; set; }

    public DummyDto Parent { get; set; }
}

class Program
{
    static void Main(string[] args)
    {

        var dummyDto = new DummyDto();

        //Both if statements will be true below
        if(dummyDto.Parent?.Name == null)
        {
            Console.WriteLine("DummyDto is null");
        }

        if (dummyDto.Parent == null || dummyDto.Parent.Name == null)
        {
            Console.WriteLine("DummyDto is null");
        }
    }
} 
```

# c - 有理多项式数组的编译错误

> ID：10361869
> 
> 赞同：0
> 
> 时间：2012-04-28T08:25:29.707
> 
> 标签：c, struct, polynomial-math

我正在编写一个矩阵，其条目是具有有理系数的多项式。任何帮助将不胜感激。
我声明了有理数和有理多项式：
rational_number.h

```
struct long_rational{
    long p;
    long q;
    };

typedef struct long_rational rational; 
```

多项式.h

```
#define MAX_DEGREE 200

struct rational_polynomial{
    long degree;
    rational coef[MAX_DEGREE]; //rational coefficients in increase power.
};

typedef struct rational_polynomial polynomial; 
```

完整的 poly_mat.c

```
#include "poly_mat.h"

#define NR_END 1
#define FREE_ARG char*

polynomial **poly_matrix( long nrl, long nrh, long ncl, long nch )
/* allocates a matrix with polynomial entries in the range m[nrl..nrh][ncl..nch] */
{
    long i, nrow=nrh-nrl+1,ncol=nch-ncl+1;
    polynomial **m;
    /* allocate pointers to rows */
    m=( polynomial ** ) malloc( ( size_t )( ( nrow+NR_END )*sizeof( polynomial* ) ) );
    if ( !m ) nrerror( "allocation failure 1 in matrix()" );
    m += NR_END;
    m -= nrl;
    /* allocate rows and set pointers to them */
    m[nrl]=( polynomial * ) malloc( ( size_t )( ( nrow*ncol+NR_END )*sizeof( polynomial ) ) );
    if ( !m[nrl] ) nrerror( "allocation failure 2 in matrix()" );
    m[nrl] += NR_END;
    m[nrl] -= ncl;
    for ( i=nrl+1; i<=nrh; i++ ) m[i]=m[i-1]+ncol;
    /* return pointer to array of pointers to rows */
    return m;
}

void **free_poly_matrix( polynomial **m, long nrl, long nrh, long ncl, long nch )
/* free a polynomial matrix allocated by poly_matrix() */
{
    free( ( FREE_ARG ) ( m[nrl]+ncl-NR_END ) );
    free( ( FREE_ARG ) ( m+nrl-NR_END ) );
}

void init_random_poly_matrix( int **m, long nrl, long nrh, long ncl, long nch )
/* initialize a random polynomial matrix with coefficient <=100*/
{
    long i,j;
    long iseed = ( long )time( NULL );
    srand ( iseed );
    for ( i=nrl; i<=nrh; i++ )
    {
        for ( j=ncl; j<=nch; j++ )
        {
            m[i][j].degree=( rand()%MAX_DEGREE );
            for ( k=0;k<=MAX_DEGREE;k++ )
            {
                m[i][j].coef[k].p = (rand()%100 );
                m[i][j].coef[k].q = (1+rand()%100 );
            }
        }
    }
} 
```

这是神秘的错误消息：

```
gcc -Wall -c -o poly_mat.o poly_mat.c
poly_mat.c：在函数“init_random_poly_matrix”中：
poly_mat.c:6：错误：“（”标记之前的预期声明说明符
poly_mat.c:28：错误：在 '{' 标记之前应为 '='、','、';'、'asm' 或 '__attribute__'
poly_mat.c:35：错误：在 '{' 标记之前应为 '='、','、';'、'asm' 或 '__attribute__'
poly_mat.h:14：错误：原型函数定义中的旧式参数声明
poly_mat.c:51：错误：输入结束时应为“{”
制作：*** [poly_mat.o] 错误 1

```

poly_mat.h 用缺少的分号填充。

```
#ifndef POLY_MAT_H
#define POLY_MAT_H

#include <math.h>
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include "nrutil.h"
#include "rational_number.h"
#include "polynomial.h"

/* matrix with polynomial entries */
polynomial **poly_matrix( long nrl, long nrh, long ncl, long nch );
void init_random_poly_matrix( int **m, long nrl, long nrh, long ncl, long nch );
void **free_poly_matrix( polynomial **m, long nrl, long nrh, long ncl, long nch );

#endif 
```

现在我无法使用点运算符访问数组中的多项式成员。
新的错误信息：

```
gcc -Wall -c -o poly_mat.o poly_mat.c
poly_mat.c：在函数“init_random_poly_matrix”中：
poly_mat.c:43：错误：请求成员“学位”不是结构或联合
poly_mat.c:46：错误：在不是结构或联合的东西中请求成员“coef”
poly_mat.c:47：错误：在不是结构或联合的东西中请求成员“coef”
制作：*** [poly_mat.o] 错误 1

```

编辑2：发现错误。将其声明为 int** 而不是多项式**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T09:45:48.880

不知道 poly_mat.h，但我理解错误消息，poly_mat.h 中存在语法错误。我相信在声明 init_random_poly_matrix() 的原型时，在第 14 行或之前缺少括号/大括号或分号。

# c# - 组织方法以更好地访问它们

> ID：10361877
> 
> 赞同：1
> 
> 时间：2012-04-28T08:26:40.163
> 
> 标签：c#

我正在尝试创建一个通用库，其中包含用于管理数据库中数据的所有方法。

这个库会有很多方法，所以我想让它更有条理。我希望它与以下语法一起使用。

```
db.setData().insertNewAccount(username, password);

db.modifyData().deleteAccount(username, password);

db.getData().getAccount(); 
```

如果我键入 setData 例如与 setData 相关的方法会出现，我将如何使其工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T08:33:17.030

听起来您以错误的方式处理此问题-通常，您会开设一个`AccountRepository`包含与帐户相关的所有成员的类；那么你会有（比如说）一个`ArticleRepository`包含所有与文章相关的成员的类。

换句话说，按照*您正在处理的数据类型进行*组织，而不是您是否尝试获取、更新、插入等。

然后，您可以使用依赖注入，这样每个业务类将只获得它使用的存储库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T08:40:53.537

如果你真的想这样做，那么你可以做这样的事情（伪代码）：

```
class DataRepository
{
    public SetDataHelper setData()
    { return new SetDataHelper(); }

    public ModifyDataHelper modifyData()
    { return new ModifyDataHelper(); }

    public GetDataHelper getData()
    { return new GetDataHelper(); }
}

class SetDataHelper
{
    public void insertNewAccount(username, password) { ... }
}

class ModifyDataHelper
{
    public void deleteAccount(username, password) { ... }
}

class GetDataHelper
{
    public Account getAccount() { ... }
} 
```

And then you could do it your way, more fluently:

```
var db = new DataRepository();

db.setData().insertNewAccount(username, password);

db.modifyData().deleteAccount(username, password);

db.getData().getAccount(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T08:39:45.973

您可以创建具有不同功能的不同接口，并且您的类可以实现所有这些接口。然后，您`setData()`可以返回类本身，并将其转换为相应的接口。例如：

```
interface SetData {
  int insertNewAccount(A, B);
}

interface ModifyData {
  int deleteAccount(A, B);
}

interface GetData {
  int getAccount(A, B);
}

class DBHandler : SetData, ModifyData , GetData {
  //
  // Implement the interfaces...
  //

  // Returns the interfaces
  SetData setData(){ return (SetData)this; }
  ModifyData modifyData (){ return (ModifyData )this; }
  GetData getData (){ return (GetData )this; }
} 
```

它可以满足您的需求，当然可以根据您的项目使用访问修饰符。而且此解决方案不会阻止您直接访问已实现的接口函数，这将需要另一个类或代理所有对 DB 类的调用的东西。

# c - USB笔驱动模块

> ID：10361878
> 
> 赞同：1
> 
> 时间：2012-04-28T08:26:54.840
> 
> 标签：c, linux-kernel, kernel-module

[按照此处](http://www.linuxforu.com/2011/10/usb-drivers-in-linux-1/)的示例，我正在制作一个模块来在我的笔式驱动器中做一些基本的事情。它声明 USB 存储（在我的情况下是笔式驱动器）设备使用 USB 存储驱动程序。我在硬件信息中看到它的 usb_storage(这与我执行 rmmod usb -storage 时的 usb-storage 相同，它指出 ERROR: Module usb_storage does not exist in /proc/modules) 。我什至在有和没有设备的情况下都完成了 lsmod，它没有显示任何模块名称 usb-storage。

我的疑问很简单，如何知道哪个模块控制哪个设备，我知道它可以被 rmmod （模块名称）卸载。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T08:30:16.397

假设您的内核实际上支持 usb-storage，这意味着该模块是内置在内核中的，无法删除。

在将 usb-storage 支持更改为构建为模块后尝试重建内核，而不是直接构建到内核中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T19:21:06.013

如果您是超级用户，删除模块应该没有问题。否则，请更改为超级用户，然后尝试将其删除。可以通过`sudo su`命令来完成。

对于正在使用的模块列表，您可以查看设备日志`dmesg`并签出。

# perl - 如何执行存储在 shell 脚本变量中的 Perl 代码？

> ID：10361885
> 
> 赞同：6
> 
> 时间：2012-04-28T08:28:17.200
> 
> 标签：perl, bash, escaping

我有一个脚本，它调用 Perl 的 Time::HiRes 模块来计算经过的时间。基本上，脚本通过以下单行来获取时间：

```
use Time::HiRes qw(time); print time 
```

通过反引号到 Perl 解释器并取回结果。

```
#/bin/sh

START_TIME=`perl -e 'use Time::HiRes qw(time); print time'`
END_TIME=`perl -e 'use Time::HiRes qw(time); print time'`
ELAPSED_TIME=$(echo "($END_TIME - $START_TIME)" | bc)
echo $ELAPSED_TIME 
```

我试图以更模块化的方式重写它，但我被 Bash shell 的引用规则难住了。

```
#/bin/sh
CALCULATE='bc'
NOW="perl -e 'use Time::HiRes qw(time); print time'"
START_TIME=`$NOW`
[Some long running task ...]
ELAPSED_TIME=$(echo "($NOW - $START_TIME)" | $CALCULATE)
echo $ELAPSED_TIME 
```

Bash 抱怨没有正确引用某些内容。为什么 Bash 不只是扩展 $NOW 中的命令并将其传递给反引号以执行？

我尝试了各种方法将 Perl 代码嵌入到 shell 脚本变量中，但我似乎无法做到正确。

如何在 shell 脚本中正确引用 Perl 代码？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-28T08:37:49.587

我认为使用函数是最直接的方法：

```
#! /bin/bash

now() {
    perl -e 'use Time::HiRes qw(time); print time';
}

calc=bc
time1=$(now)
time2=$(now)
elapsed=$(echo $time2 - $time1 | $calc)
echo $elapsed $time1 $time2 
```

基本上不需要引用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-28T08:40:49.020

你的问题是它`$NOW`只是一个带有一些 Perl 代码的字符串。你需要告诉 Bash 执行它，使用反引号或`$()`：

```
ELAPSED_TIME=$(echo "($($NOW) - $START_TIME)" | $CALCULATE) 
```

此外，Bash 可以原生地进行算术运算：

```
ELAPSED_TIME=$(( $($NOW) - $START_TIME)) 
```

没有任何需要调用`bc`.

最后，启动和停止`perl`可能会花费大量时间，这会给您的结果增加噪音。我建议`perl`只运行一次，并让`perl`自己执行长时间运行的任务。然后，您还可以在 Perl 本身内进行所有计算：

```
#!/usr/bin/perl

use Time::HiRes qw(time);

my $start = time;
system(@ARGV);
my $end = time;

print "Elapsed: ", ($end - $start), "\n" 
```

或者您可以使用 Bash 内置函数`time`（或`/usr/bin/time`）直接进行所有计时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T08:46:31.317

如果`$NOW`在引号之外，它会被空格分割。

```
$ perl -E'say 0+@ARGV; say for @ARGV' $NOW
7
perl
-e
'use
Time::HiRes
qw(time);
print
time' 
```

您可以用双引号将变量括起来以避免这种情况：

```
$ perl -E'say 0+@ARGV; say for @ARGV' "$NOW"
1
perl -e 'use Time::HiRes qw(time); print time' 
```

但是您想将该字符串作为 shell 命令执行。为此，使用`eval`.

```
$ eval "$NOW"
1335602750.57325 
```

最后，为了分配它，我们使用反引号（或等效的`$( ... )`）。

```
$ START_TIME=$(eval "$NOW")
$ echo $START_TIME
1335602898.78472 
```

之前发布的功能显然更干净，但您说您需要报价方面的帮助。

* * *

顺便一提，

```
perl -e 'use Time::HiRes qw(time); print time' 
```

可以缩短为

```
perl -MTime::HiRes=time -e'print time' 
```

甚至到以下内容（因为尾随的新行非常好）：

```
perl -MTime::HiRes=time -E'say time' 
```

或者，如果您真的想打高尔夫球：

```
perl -MTime::HiRes=time -Esay+time 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-28T09:19:40.437

以下是您的脚本的修改版本。您基本上需要了解某些应用程序的标准输出是针对标准错误（stderr），所以当您没有看到它们的输出放入变量时，您只需将其重定向到标准输出（stdout）：

```
#/bin/sh
CALCULATE='bc'
echo 'starting'
NOW=$(perl -e 'use Time::HiRes qw(time); print time' 2>&1)
sleep 3
echo 'ending'
END_TIME=$(perl -e 'use Time::HiRes qw(time); print time' 2>&1)
ELAPSED_TIME=$(echo "($NOW - $START_TIME)")
echo $ELAPSED_TIME 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-08T08:27:25.367

我认为 HiRes 时间的好处`perl`被一个相对繁重的外部过程所否定，并且它被单独调用两次。

如果您不需要那么多小数位的值。您可以使用 Bash 中的内置时间，例如

```
task() {
    [Some long running task ...]
}
TIMEFORMAT=%R
elapse=$({ time task > task.out 2>&1; } 2>&1)
echo $elapse 
```

# java - 如何注册监听器以更改方向？

> ID：10361888
> 
> 赞同：5
> 
> 时间：2012-04-28T08:29:03.487
> 
> 标签：java, android, orientation

我的 android 应用程序将在后台运行，当方向改变时我需要立即通知。例如。当用户将手机从纵向旋转到横向（或横向到纵向）时，系统应该告诉我的应用程序方向已经改变。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-28T08:34:45.130

屏幕旋转时调用此方法

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);
        //Do stuff here
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-28T08:44:08.483

您不必显式设置 Orientation 侦听器。

`onConfigurationChanged`将被系统调用。

```
@Override
public void onConfigurationChanged(Configuration myConfig) {
    super.onConfigurationChanged(myConfig);
    int orient = getResources().getConfiguration().orientation; 
    switch(orient) {
                case Configuration.ORIENTATION_LANDSCAPE:
                    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
                    break;
                case Configuration.ORIENTATION_PORTRAIT:
                    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
                    break;
                default:
                    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_UNSPECIFIED);
                }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-06T20:21:27.437

但是你可以在守护进程中实现 onConfigurationChanged。这里：[服务](http://developer.android.com/reference/android/app/Service.html)。

# visual-studio-2010 - 只是我的代码 - Visual Studio 2010

> ID：10361897
> 
> 赞同：4
> 
> 时间：2012-04-28T08:30:03.143
> 
> 标签：visual-studio-2010

我在调试选项中启用了*Just My Code*，但它说它仅用于托管。

当我将调试器置于托管模式时，它会运行，但之后会立即关闭，我无法进入每一行代码。

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T08:33:23.017

启用“仅我的代码”后，可以在“调试”菜单上选择“中断”并在没有“我的代码”显示的位置停止执行。发生这种情况时，不会显示任何代码。此外，如果您选择 Step 命令，它将带您进入 My Code 的下一行。

首先尝试阅读*[如何：单步执行我的代码](http://msdn.microsoft.com/en-us/library/h5e30exc%28v=vs.80%29.aspx)*，然后了解它们的作用。

正如您所说的调试器没有运行，可能有很多原因：

1.  您可以键入`Devenv.exe /SafeMode`，以安全模式启动 Visual Studio，仅加载默认环境和服务。
2.  如果它不起作用，您可以键入`Devenv.exe /resetsettings`. 它将 Visual Studio 恢复为默认设置。或者，将设置重置为指定的`.vssettings`文件。
    *   有关 Devenv.exe 命令行的[更多信息。](http://msdn.microsoft.com/en-us/library/xee0c8y7%28v=vs.80%29.aspx)
3.  切换其他帐户或创建一个新帐户，然后重试。
4.  如果还是不行，请通过添加/删除程序彻底卸载 Visual Studio，然后重新安装。

# css - 如何在包含的两个 css 文件中只应用一个 css 文件？

> ID：10361900
> 
> 赞同：0
> 
> 时间：2012-04-28T08:30:47.623
> 
> 标签：css, jqgrid

我目前正在使用 Twitter Bootstrap 开发网络应用程序。现在我还需要为同一个应用程序使用 jqgrid。所以，我为一个页面包含了几个 CSS。

```
<link href="../css/bootstrap.min.css" rel="stylesheet">
<link href="../css/flick/jquery-ui-1.8.19.custom.css" rel="stylesheet">
<link href="../css/ui.jqgrid.css" rel="stylesheet"> 
```

但是，页面上由 jqgrid 生成的网格表看起来有点奇怪，因为您在 jgrid 表中找到了类似 Twitter 的单元格。

所以我想知道是否有任何方法可以禁用我为页面的某个元素包含的几个 CSS 文件中的一个 CSS？这一次，我想为 id=grid 的 div 标签禁用 bootstrap css，其中网格将显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T08:47:52.547

您不能禁用样式表引用，但可以将其中的选择器更改为更具描述性。例如，如果这两个样式表都只是 style `div`，那么您当然会遇到冲突。但是，如果您将引导程序的选择器修改为`#twitter div`，您将获得更精确的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T08:58:19.997

非常模糊，但这是您的解决方案：在您选择的浏览器中使用开发工具，但我将使用 Chrome 进行解释：

*   将鼠标悬停在受影响的 jqgrid 表上并单击检查元素。开发工具将打开，您应该从单独的样式表中看到该元素上声明的所有样式。
*   如果您看到任何来自 jqgrid 的样式被划掉（被覆盖），您需要在您的 jqgrid 样式表中指定它们，例如，通过添加类、id、父选择器或链接。
*   此外，如果有样式引导程序声明 jqgrid 没有解决（这些您将不得不手动筛选），同样的解决方案适用：将这些样式添加到 jqgrid，同时指定您想要的样式并添加特异性您的声明，以便它们覆盖引导程序。

如果您发布了链接，我可以向您展示，我认为这比这个解释要容易得多。但这将实现您想要的样式。

# python - 为什么 python hash_ring 这么慢？

> ID：10361902
> 
> 赞同：1
> 
> 时间：2012-04-28T08:31:04.327
> 
> 标签：python, memcached

好吧，我发现 hash_ring.MemcacheRing 太慢了，rate test 无法直接击败 db access 而，我用 memcache.Client 替换它，rate test 恢复正常 rps 是在多线程环境下测试的

`memcache.Client rps2500
hash_ring.MemcacheRing rps 600
directly db access:rps960` 

我使用hotshot来跟踪hash_ring.MemcacheRing，我发现hash_ring肯定有问题，你可以发现hash_ring花费太多的cpu，在以下配置文件数据收集的热点配置文件数据中收集在单线程环境中

```
ncalls tottime percall cumtime percall filename:lineno(function)
    10000 0.066 0.000 8.297 0.001 Memcached.py:16(__getitem__)
    10000 0.262 0.000 6.544 0.001 构建/bdist.linux-x86_64/egg/memcache.py:818(_unsafe_get)
        1 0.000 0.000 0.000 0.000 /usr/local/Python-2.6.4/lib/python2.6/socket.py:180(__init__)
    20000 0.064 0.000 0.064 0.000 build/bdist.linux-x86_64/egg/memcache.py:310(_statlog)
    80000 0.118 0.000 0.118 0.000 build/bdist.linux-x86_64/egg/hash_ring/hash_ring.py:148()
    10000 0.148 0.000 8.168 0.001 构建/bdist.linux-x86_64/egg/memcache.py:812(_get)
    20000 0.086 0.000 0.157 0.000 构建/bdist.linux-x86_64/egg/memcache.py:1086(_get_socket)
    30000 10.539 0.000 10.539 0.000 build/bdist.linux-x86_64/egg/memcache.py:1118(readline)
    10000 0.102 0.000 0.102 0.000 build/bdist.linux-x86_64/egg/memcache.py:1142(recv)
    20000 0.243 0.000 0.243 0.000 构建/bdist.linux-x86_64/egg/hash_ring/hash_ring.py:156(_hash_digest)
    20000 0.103 0.000 0.103 0.000 build/bdist.linux-x86_64/egg/hash_ring/hash_ring.py:124(distinct_filter)
    10000 0.167 0.000 0.269 0.000 构建/bdist.linux-x86_64/egg/memcache.py:965(_recv_value)
        1 0.148 0.148 15.701 15.701 Memcached.py:25(foo)
    10000 0.236 0.000 5.409 0.001 构建/bdist.linux-x86_64/egg/memcache.py:953(_expectvalue)
    20002 0.336 0.000 0.336 0.000 :1（设置超时）
    10000 0.061 0.000 7.207 0.001 构建/bdist.linux-x86_64/egg/memcache.py:541（设置）
    20000 0.116 0.000 0.606 0.000 build/bdist.linux-x86_64/egg/hash_ring/hash_ring.py:141(gen_key)
    20000 0.279 0.000 1.680 0.000 build/bdist.linux-x86_64/egg/hash_ring/memcache_ring.py:20(_get_server)
    40000 0.346 0.000 1.236 0.000 构建/bdist.linux-x86_64/egg/hash_ring/hash_ring.py:111（迭代节点）
    10000 0.144 0.000 7.146 0.001 构建/bdist.linux-x86_64/egg/memcache.py:771(_set)
    20000 0.129 0.000 0.247 0.000 构建/bdist.linux-x86_64/egg/hash_ring/hash_ring.py:150(_hash_val)
    20000 0.098 0.000 0.433 0.000 build/bdist.linux-x86_64/egg/memcache.py:1111(send_cmd)
    10000 0.063 0.000 8.231 0.001 build/bdist.linux-x86_64/egg/memcache.py:857(get)
    10000 0.049 0.000 7.256 0.001 Memcached.py:13(__setitem__)
    20000 0.144 0.000 5.510 0.000 build/bdist.linux-x86_64/egg/memcache.py:1135（预期）
    20000 0.181 0.000 0.787 0.000 构建/bdist.linux-x86_64/egg/hash_ring/hash_ring.py:92(get_node_pos)
    20000 0.070 0.000 0.070 0.000 build/bdist.linux-x86_64/egg/memcache.py:1070(_check_dead)
    10000 0.084 0.000 0.084 0.000 构建/bdist.linux-x86_64/egg/memcache.py:725(_val_to_store_info)
    20000 0.068 0.000 0.225 0.000 build/bdist.linux-x86_64/egg/memcache.py:1076（连接）
    20000 1.036 0.000 1.036 0.000 build/bdist.linux-x86_64/egg/memcache.py:1000(check_key)
    10000 0.216 0.000 5.702 0.001 构建/bdist.linux-x86_64/egg/memcache.py:777(_unsafe_set)
        0 0.000 0.000 轮廓：0（轮廓仪）

```

以下是 memcache.Client 的配置文件数据

```
ncalls tottime percall cumtime percall filename:lineno(function)
    10000 0.064 0.000 8.022 0.001 Memcached.py:16(__getitem__)
    10000 0.263 0.000 6.885 0.001 构建/bdist.linux-x86_64/egg/memcache.py:818(_unsafe_get)
        1 0.000 0.000 0.000 0.000 /usr/local/Python-2.6.4/lib/python2.6/socket.py:180(__init__)
    20000 0.069 0.000 0.069 0.000 build/bdist.linux-x86_64/egg/memcache.py:310(_statlog)
    10000 0.127 0.000 7.897 0.001 构建/bdist.linux-x86_64/egg/memcache.py:812(_get)
    20000 0.091 0.000 0.164 0.000 构建/bdist.linux-x86_64/egg/memcache.py:1086(_get_socket)
    30000 11.074 0.000 11.074 0.000 build/bdist.linux-x86_64/egg/memcache.py:1118(readline)
    10000 0.098 0.000 0.098 0.000 构建/bdist.linux-x86_64/egg/memcache.py:1142(recv)
    20000 0.259 0.000 0.568 0.000 build/bdist.linux-x86_64/egg/memcache.py:329(_get_server)
        1 0.149 0.149 15.036 15.036 Memcached.py:25(foo)
    10000 0.236 0.000 5.645 0.001 build/bdist.linux-x86_64/egg/memcache.py:953(_expectvalue)
    20002 0.351 0.000 0.351 0.000 :1（设置超时）
    10000 0.064 0.000 6.814 0.001 构建/bdist.linux-x86_64/egg/memcache.py:541（设置）
    10000 0.124 0.000 6.751 0.001 构建/bdist.linux-x86_64/egg/memcache.py:771(_set)
    20000 1.039 0.000 1.039 0.000 build/bdist.linux-x86_64/egg/memcache.py:1000(check_key)
    20000 0.092 0.000 0.442 0.000 build/bdist.linux-x86_64/egg/memcache.py:1111(send_cmd)
    10000 0.061 0.000 7.958 0.001 构建/bdist.linux-x86_64/egg/memcache.py:857（获取）
    10000 0.050 0.000 6.864 0.001 Memcached.py:13(__setitem__)
    20000 0.148 0.000 5.812 0.000 build/bdist.linux-x86_64/egg/memcache.py:1135（预期）
    20000 0.073 0.000 0.073 0.000 build/bdist.linux-x86_64/egg/memcache.py:1070(_check_dead)
    10000 0.087 0.000 0.087 0.000 build/bdist.linux-x86_64/egg/memcache.py:725(_val_to_store_info)
    20000 0.072 0.000 0.236 0.000 build/bdist.linux-x86_64/egg/memcache.py:1076（连接）
    20000 0.072 0.000 0.072 0.000 构建/bdist.linux-x86_64/egg/memcache.py:57(cmemcache_hash)
    10000 0.218 0.000 5.905 0.001 构建/bdist.linux-x86_64/egg/memcache.py:777(_unsafe_set)
        0 0.000 0.000 轮廓：0（轮廓仪）
    10000 0.156 0.000 0.255 0.000 build/bdist.linux-x86_64/egg/memcache.py:965(_recv_value)

```

和个人资料数据如下

```
ncalls tottime percall cumtime percall filename:lineno(function)
    20000 2.278 0.000 4.260 0.000 build/bdist.linux-x86_64/egg/memcache.py:1000(check_key)
   640000 1.624 0.000 1.624 0.000 :0 (ord)
    20000 0.658 0.000 1.445 0.000 构建/bdist.linux-x86_64/egg/memcache.py:329(_get_server)
   100010 0.477 0.000 0.477 0.000 :0(len)
    30000 0.460 0.000 0.827 0.000 build/bdist.linux-x86_64/egg/memcache.py:1118(readline)
   110000 0.414 0.000 0.414 0.000 :0（实例）
    20000 0.412 0.000 0.412 0.000 :0（发送）
    10000 0.349 0.000 1.974 0.000 构建/bdist.linux-x86_64/egg/memcache.py:818(_unsafe_get)
    10000 0.344 0.000 0.633 0.000 构建/bdist.linux-x86_64/egg/memcache.py:725(_val_to_store_info)
    10000 0.344 0.000 2.006 0.000 build/bdist.linux-x86_64/egg/memcache.py:777(_unsafe_set)
    10000 0.325 0.000 0.624 0.000 构建/bdist.linux-x86_64/egg/memcache.py:965(_recv_value)
    50000 0.233 0.000 0.233 0.000 :0（查找）
    20000 0.200 0.000 0.808 0.000 build/bdist.linux-x86_64/egg/memcache.py:1135（预期）
    10000 0.194 0.000 5.292 0.001 构建/bdist.linux-x86_64/egg/memcache.py:812(_get)
    20000 0.190 0.000 0.357 0.000 build/bdist.linux-x86_64/egg/memcache.py:1076（连接）
    10000 0.185 0.000 4.771 0.000 构建/bdist.linux-x86_64/egg/memcache.py:771(_set)
    10000 0.173 0.000 0.187 0.000 构建/bdist.linux-x86_64/egg/memcache.py:1142(recv)
    10000 0.163 0.000 0.400 0.000 build/bdist.linux-x86_64/egg/memcache.py:953(_expectvalue)
    20000 0.152 0.000 0.564 0.000 :1（发送）
    20000 0.147 0.000 0.711 0.000 build/bdist.linux-x86_64/egg/memcache.py:1111(send_cmd)
    20000 0.142 0.000 0.232 0.000 构建/bdist.linux-x86_64/egg/memcache.py:57(cmemcache_hash)

```

```
ncalls tottime percall cumtime percall filename:lineno(function)
    20000 2.679 0.000 4.921 0.000 build/bdist.linux-x86_64/egg/memcache.py:1000(check_key)
   640000 2.125 0.000 2.125 0.000 :0 (ord)
    20000 0.636 0.000 2.887 0.000 构建/bdist.linux-x86_64/egg/hash_ring/memcache_ring.py:20(_get_server)
    20000 0.582 0.000 1.673 0.000 构建/bdist.linux-x86_64/egg/hash_ring/hash_ring.py:92(get_node_pos)
    30000 0.565 0.000 0.979 0.000 build/bdist.linux-x86_64/egg/memcache.py:1118(readline)
    20000 0.345 0.000 0.630 0.000 构建/bdist.linux-x86_64/egg/hash_ring/hash_ring.py:156(_hash_digest)
    40000 0.328 0.000 2.065 0.000 构建/bdist.linux-x86_64/egg/hash_ring/hash_ring.py:111（迭代节点）
    20003 0.294 0.000 0.294 0.000 :0（接收）
    10000 0.287 0.000 1.119 0.000 build/bdist.linux-x86_64/egg/memcache.py:953(_expectvalue)
    10000 0.176 0.000 4.437 0.000 构建/bdist.linux-x86_64/egg/memcache.py:771(_set)
    10000 0.175 0.000 1.697 0.000 构建/bdist.linux-x86_64/egg/memcache.py:818(_unsafe_get)
    10000 0.160 0.000 5.899 0.001 构建/bdist.linux-x86_64/egg/memcache.py:812(_get)
    20000 0.157 0.000 1.051 0.000 build/bdist.linux-x86_64/egg/hash_ring/hash_ring.py:141(gen_key)
    10000 0.148 0.000 0.251 0.000 构建/bdist.linux-x86_64/egg/memcache.py:965(_recv_value)
    20000 0.144 0.000 0.264 0.000 构建/bdist.linux-x86_64/egg/hash_ring/hash_ring.py:150(_hash_val)
    90000 0.122 0.000 0.122 0.000 :0（实例）
    50000 0.120 0.000 0.120 0.000 :0（查找）
    80000 0.120 0.000 0.120 0.000 构建/bdist.linux-x86_64/egg/hash_ring/hash_ring.py:148()

```

# ios - “清除图形上下文”是什么意思？

> ID：10361903
> 
> 赞同：51
> 
> 时间：2012-04-28T08:31:10.083
> 
> 标签：ios, uiview

在 Xcode 4.3 中，当您选择一些放置在 .xib 中的 UIView 对象时，您会发现有一个选项说“清除图形上下文”。这是什么意思？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-04-28T13:12:17.027

> 当它被选中时，iOS 会在实际绘制对象之前将对象覆盖的整个区域绘制为透明黑色。
> 很少需要它。

* * *

[开始 IOS 5 开发：探索 IOS SDK，第 81 页，第 3 段。](http://books.google.com.ua/books?id=sikKz-oQNFIC&lpg=PA88&ots=Bs5y9c16Pn&dq=Clear%20Graphics%20Context%20checkbox&hl=ru&pg=PA81#v=onepage&q&f=false)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-28T08:45:12.670

它将**`"clear context"`**在启动 UIView 的 DrawRect 函数之前应用 OpenGL：

```
glClearColor(0, 0, 0, 0);
glClear(GL_COLOR_BUFFER_BIT); 
```

# c++ - 单类实例 C++

> ID：10361908
> 
> 赞同：5
> 
> 时间：2012-04-28T08:31:36.847
> 
> 标签：c++, class

是否可以创建一个可以只构建一次的类？如果您尝试创建它的其他实例，则会发生编译时错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-28T08:36:34.450

实例化是动态的，在运行时。编译错误发生在编译时。所以答案是否定的，在任何第二次实例化时都不可能出现编译错误。

但是，您可以使用单例，但要非常仔细地考虑它是​​否真的需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T08:36:07.420

只有一个实例的类称为单例类，

有很多方法可以做到这一点。最简单的如下图

```
class MySingleton
    {
    public:
      static MySingleton& Instance()
      {
        static MySingleton singleton;
        return singleton;
      }

    // Other non-static member functions
    private:
      MySingleton() {};                                 // Private constructor
      MySingleton(const MySingleton&);                 // Prevent copy-construction
      MySingleton& operator=(const MySingleton&);      // Prevent assignment
    }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T08:35:09.623

为什么编译错误？我认为你只需要实现单例设计模式。看[这里](http://en.wikipedia.org/wiki/Singleton_pattern)

# php - 在 wordpress 中显示图像的正确图像 src 路径是什么？

> ID：10361920
> 
> 赞同：0
> 
> 时间：2012-04-28T08:32:55.097
> 
> 标签：php, html, wordpress

例如，我编写了自己的 Wordpress 插件，该插件使用 Transient API 来检索 Facebook 粉丝的总数，并且我想在我的 wordpress 主题侧栏上的 Facebook 粉丝总数旁边显示一个 Facebook 图标。

在我的代码中，我把

```
<p><img src="../../transientlabel/facebook.png" alt="Facebook"> 
```

因为我的瞬态标签是我的自定义插件文件夹。但是，wordpress 不喜欢这样，所以我不知道为什么 Wordpress 不允许我这样做。

我确认上面的图标图像确实存在，并且它肯定位于该文件夹中。

有人知道我能做些什么来解决这个小问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T08:40:18.787

```
<p><img src="<?php echo plugins_url( 'facebook.png' , __FILE__ ); ?>" alt="Facebook"></p> 
```

# c++ - 这个添加类会导致内存泄漏吗？

> ID：10361926
> 
> 赞同：1
> 
> 时间：2012-04-28T08:34:09.283
> 
> 标签：c++, memory, overloading, memory-leaks, operator-keyword

这是可用于`+`操作的类的示例。

```
class A
{
public:
   int *array;

   A()
   {
      array = new int[10];
   }

   ~A()
   {
      delete[] array;
   }

   A operator+ (const A &b)
   {
      A c;
      for(int i=0; i<10; i++)
         c.array[i] += array[i] + b.array[i];
      return c;
   }
};

int main()
{
   A a,b,c,d;

   /* puts some random numbers into the arrays of b,c and d */
   a = b+c+d;
} 
```

`a`在复制结果之前会运行析构函数`b+c+d`吗？如果没有，我如何确保没有内存泄漏？

`+`运算符重载是这样设计的，因此不会修改操作数。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-28T08:38:30.197

您需要向 A 添加一个等号运算符。此外，您[可能希望创建一个复制构造函数](http://en.wikipedia.org/wiki/Rule_of_three_%28C++_programming%29)。

当 a 变成 b+c+d 的返回值时，`array`指针 in`a`会被覆盖而`delete[]`不会被调用。您需要创建一个 operator= 来删除`array`.

operator= 的示例如下：

```
A& operator=(A const& a)
{
    if (&a != this) {
        int* tmp = this->array;
        this->array = new int[10];
        //copy a.array to this->array
        delete[] tmp;
    }
    return *this;
} 
```

如果您不熟悉`operator=`.

特别是，检查是否`a`等`this`于是必要的，因为这样写是完全有效的：

```
A a;
a = a; 
```

这将导致无意义的复制，并且在大多数情况下`operator=`会导致错误。

另一个微妙之处与其说是一种要求，不如说是一种编码风格（尽管是一个非常广泛的传播标准）。当复制动态分配的东西时，您总是希望在释放之前分配和复制。这样，如果 new 抛出异常（或其他失败），对象仍处于稳定状态，尽管它是旧数据而不是新的预期日期。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T08:48:56.167

> 这会导致内存泄漏吗？

是的，它会。您忘记添加复制构造函数和赋值运算符。[见三法则](http://en.wikipedia.org/wiki/Rule_of_three_%28C++_programming%29)

You could also use `std::vector<int>` for `A::array` instead of `int*`. In this case you wouldn't need to worry about copy constructor/assignment operator (as long as you don't add something else that must be handled in destrcutor).

# google-cloud-storage - 如何使用java将文件上传到谷歌云存储？

> ID：10361934
> 
> 赞同：2
> 
> 时间：2012-04-28T08:36:06.807
> 
> 标签：google-cloud-storage

我使用 org.apache.commons.fileupload 上传文件
类 StorageService 是使用云存储 API 存储文件的服务 这是我的代码

```
public class UploadFileAction extends org.apache.struts.action.Action {

private static final String SUCCESS = "success";
private StorageService storage = new StorageService();
private static final int BUFFER_SIZE = 1024 * 1024;

@Override
public ActionForward execute(ActionMapping mapping, ActionForm form,
        HttpServletRequest request, HttpServletResponse response)
        throws Exception {

    ServletFileUpload upload = new ServletFileUpload();
    FileItemIterator iter = upload.getItemIterator(request);
    while (iter.hasNext()) {
        FileItemStream item = iter.next();
        String fileName = item.getName();
        String mime = item.getContentType();
        storage.init(fileName, mime);
        InputStream is = item.openStream();

        byte[] b = new byte[BUFFER_SIZE];
        int readBytes = is.read(b, 0, BUFFER_SIZE);
        while (readBytes != -1) {
            storage.storeFile(b, BUFFER_SIZE);
            readBytes = is.read(b, 0, readBytes);
        }

        is.close();
        storage.destroy();
    }

    return mapping.findForward(SUCCESS);
}
}

package storageservice;

import com.google.appengine.api.files.*;
import com.google.appengine.api.files.GSFileOptions.GSFileOptionsBuilder;
import java.io.*;
import java.nio.channels.Channels;

public class StorageService {

private static final String BUCKET_NAME = "thoitbk";

private FileWriteChannel writeChannel = null;
private OutputStream os = null;

public void init(String fileName, String mime) throws Exception {
    FileService fileService = FileServiceFactory.getFileService();
    GSFileOptionsBuilder builder = new GSFileOptionsBuilder()
            .setAcl("public_read")
            .setBucket(BUCKET_NAME)
            .setKey(fileName)
            .setMimeType(mime);
    AppEngineFile writableFile = fileService.createNewGSFile(builder.build());
    boolean lock = true;
    writeChannel = fileService.openWriteChannel(writableFile, lock);
    os = Channels.newOutputStream(writeChannel);
}

public void storeFile(byte[] b, int readSize) throws Exception {
    os.write(b, 0, readSize);
    os.flush();
}

public void destroy() throws Exception {
    os.close();
    writeChannel.closeFinally();
}
} 
```

在本地这工作正常，但当我部署我的应用程序时出错
请帮助我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T00:41:15.800

确保您的应用程序的服务帐户具有对相关存储桶的 WRITE 访问权限，方法是将该服务帐户添加到具有*可编辑*权限的团队，或者更新存储桶 acl 以明确授予服务帐户 WRITE 访问权限。有关更多详细信息，请参阅[此问题](https://stackoverflow.com/questions/8072436/google-cloud-storage-authentication-for-app-engine)。

# python - 运行简单的python脚本时出错

> ID：10361940
> 
> 赞同：0
> 
> 时间：2012-04-28T08:36:50.533
> 
> 标签：python

当我运行以下命令时：

```
import sys

if __name__ == '__main__':
    print 'before exit'
    sys.exit(0) 
```

输出是：

```
before exit
Exception in thread Thread-1 (most likely raised during interpreter shutdown):
Traceback (most recent call last): 
```

我不知道为什么会发生异常，但有人建议它可能是 Python 安装不当。我想知道是否有人知道解决此问题的方法？我正在运行 Windows 7 x64，但所有内容都安装了 x32。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T11:24:29.257

我同意评论者的意见，即您的 python 安装错误（运行如此简单的东西时抛出的异常是腐败的明显迹象）。但是重新安装不必很痛苦。

这就是我要做的。

首先，重命名你的 python 目录（在 Windows 上它类似于 c:\python2.x）

接下来，安装新的 python 副本（确保它与您已经运行的版本相同）

最后，将以前安装的 Site-packages 文件夹复制到新安装中。

# qt - Qt 布局大于应有的大小

> ID：10361941
> 
> 赞同：2
> 
> 时间：2012-04-28T08:37:11.047
> 
> 标签：qt, qt-designer

我有一个在 Qt 中设计得很好的布局，但是当我单击父窗口并将其设置为网格布局时，一切都变得很不稳定。我已经阅读了我能找到的所有教程以及 Qt 设计器手册，但无法弄清楚为什么会发生这种情况。我附上了一个屏幕截图来显示问题： ![在此处输入图像描述](../Images/b04ca3d50598c5d0e4b7376c6a73ffc8.png)

正如你所看到的，左边的垂直布局坚持比它包含的孩子更宽。label 和 treeview 都设置为 sizePolicy 最大值，最大宽度设置为 260px。孩子们自己保持正确的大小，但包含它们的垂直布局却没有。

中间的垂直布局设置为展开，最右侧的设置与左侧的设置相同，只有一个似乎可以使用。如何使第一个垂直布局符合它的孩子的宽度？

另外，如果我可以偷偷问第二个问题，我在右下角的选项卡小部件内有一个 QTextEdit，但它不会填充以占用完整选项卡视图的空间。您在屏幕截图中看不到这一点，但如果我将 tabview 拉起，其中的 textedit 不会随之拉伸。如何使它符合标签的大小？它已经设置为 sizePolicy 扩展，但这似乎没有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T14:59:00.000

问题很可能是您需要尝试“拉伸”布局。Stretch 设置布局单元格彼此之间的关系。默认值为 0，表示不发生拉伸。

在您的情况下，我相信您希望将第一列（第 0 列）的拉伸设置为 0，将第二列和第三列的拉伸设置为 1。这意味着第一列将始终尽可能小，并且第二列和第三列将尽量等宽。

您可以很容易地以编程方式设置拉伸；例如，要将第一列设置为拉伸 0：

```
layout->setColumnStretch(0, 0); 
```

在 Qt Designer 中，您可以像访问任何普通属性一样访问列和行延伸。

# c# - 多任务处理的最佳线程策略

> ID：10361943
> 
> 赞同：0
> 
> 时间：2012-04-28T08:37:37.913
> 
> 标签：c#, multithreading

我想从你的专家那里得到一些建议。我有一个执行此任务的 Windows 程序

1.  在一个线程中读入一个文件（激光扫描数据）1000 万个点。大约需要 1 分钟。当它完成时。
2.  在新线程中计算 GRID。大约需要 3 分钟。然后用户可以选择不同的任务之类的。
3.  创建位图（图像）或其他对象，如高程轮廓。它是用其他线程制成的。大约需要 1 分钟。
4.  最后，用户可以将位图或对象保存到文件中。

我现在的意图是允许用户选择一堆文件并指定 GRID 设置和他/她想要的位图的批处理任务。

你认为最好的策略是什么？我不是高级程序员，我看过BackgroundWorker。如果您喜欢使用具有两个或更多内核的新计算机，这是一种方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T09:06:25.980

听起来不错。我不了解您的整个应用程序，但听起来您应该能够并行执行某些操作。

你能定义一个类来保存批处理作业的品脱和 GRID 数据，并具有执行所有这些步骤的方法吗？

可以将 GRID 计算拆分为对点数组的独立段进行操作的子任务，还是必须在任何 GRID 计算开始之前所有点都可用？

# objective-c - 通过多个函数为对象属性赋值

> ID：10361947
> 
> 赞同：0
> 
> 时间：2012-04-28T08:37:50.270
> 
> 标签：objective-c, ios, pointers, uitableview

我有一个 UITableView，用户可以在其中输入对象标题、日期和其他值。

我希望用户定义的变量（它们是属性）驻留在 NSDictionary 中。

在风投`- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`

我设置了一个具有以下功能的自定义单元格

`[cell setUpCellWithVariable:[variableToShowInTable objectForKey:nameOfVariable]];`

在这个函数中，我根据传递的变量类型来确定 inputView 和其他内容。当我关闭 VC（通过自定义按钮）时，我想将每个单元格具有的任何变量保存到传递给它的变量中。

这是我想不通的部分。由于我正在传递一个指针，因此当我将指针重新定义为等于单元格中的输入值时，指针的 rValue 会发生变化。因此对象属性指针指向它的原始值。

我希望保存传递变量的原始地址，并且可以使用 & 访问，但在单元格对象中，仅保留指针参数的 rValue。此外，由于我希望用户定义的变量是一个属性（而不是实例变量），因此我无法获取它的地址并将其传递到方法中。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T11:53:30.923

您应该从您的自定义单元类中提供一些代码。

您是否尝试过通过 MVC 模式存储输入变量？如果是，则不应存在此类问题。

# iphone - 单例属性变量 Release 和 Access

> ID：10361954
> 
> 赞同：-1
> 
> 时间：2012-04-28T08:38:38.297
> 
> 标签：iphone, objective-c, memory-management, singleton

这是我的问题，我有一个单例类，我从各种类中调用它，并且我在该单例类中有一个属性可以从当前类传递 self（将执行哪个启动单例），我使用 self 对象调用当前类中的方法来自单身人士。每次调用单例类时，这里都会将此代理对象（单例属性）设置为单例中的 nil。

因此，如果我快速运行应用程序并再次（即非常快速地调用该单例）应用程序在 Web 视图中崩溃确实完成了加载方法。

对此有任何建议和想法。

这里代码供参考。

```
 +(Signout *)sharedInstance{
        @synchronized(self) {
            if (signOutInstance == nil) 
            {
                signOutInstance= [[self alloc] init]; 
            }
        }
        return signOutInstance;
    }

    -(void)signOut {

        [self signOutWebView];

    }

- (void)webViewDidFinishLoad:(UIWebView *)twebView {

    if (nil != self.instance) {
        if ([self.instance respondsToSelector:@selector(removeIndicator)]) {
            [self.instance removeLoadingIndicator];
        }
    }

} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T11:06:55.487

试试这个可能会有帮助。

```
if (nil != self.instance) {
        if ([self.instance respondsToSelector:@selector(removeIndicator)]) {
            [self.instance removeLoadingIndicator];
            self.instance = nil;
        }
    } 
```

通过打印语句调试您的代码以找出它崩溃的原因 您是否尝试过使用僵尸来查找崩溃的原因。

# java - Java系统时间

> ID：10361955
> 
> 赞同：1
> 
> 时间：2012-04-28T08:38:38.483
> 
> 标签：java, time, systemtime

我从 SO 的一个问题中复制了这段代码：

```
public static String getCurrentTimeStamp() {
  SimpleDateFormat sdfDate = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
  Date now = new Date();
  String strDate = sdfDate.format(now);
  return strDate;
} 
```

我只想获取系统时间而不是日期。然后我必须将第二行代码更改为：

```
SimpleDateFormat sdfDate = new SimpleDateFormat(" HH:mm:ss") ; 
```

然后，DATE() 必须获取当前时间。到目前为止清楚，但我无法理解使用的 format() 函数。我的意思是我们不能简单地输出变量`now`而不是`strdate`？仅仅是因为函数的返回类型`getCurrentTimeStamp()`是String吗？

请澄清一下，如果还有其他更简单的一行代码可以单独获取系统时间，请分享。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-28T08:41:21.043

> 我的意思是我们现在不能简单地输出变量而不是 strdate。

好吧，您*可以*返回`now.toString()`-但这将使用`Date.toString()`恰好选择的格式，而您想要特定的格式。在这种情况下，对象的要点`SimpleDateFormat`是将 a `Date`（这是一个时间点，不参考任何特定的日历或时区）转换为 a `String`，应用适当的时区、日历系统和文本格式（在您的情况下`HH:mm:ss`） .

不过，您仍然可以通过删除局部变量（每个变量只使用一次）来简化您的方法：

```
public static String getCurrentTimeStamp() {
    return new SimpleDateFormat("HH:mm:ss").format(new Date());
} 
```

或者，也许您会发现保留日期格式的变量而不是日期和返回值更具可读性：

```
public static String getCurrentTimeStamp() {
    DateFormat format = new SimpleDateFormat("HH:mm:ss");
    return format.format(new Date());
} 
```

我个人建议改用[Joda Time](http://joda-time.sf.net)，请注意——它是一个更好的日期/时间 API，并且它的格式是线程安全的，因此您可以轻松地保留对*单个*格式对象的引用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-28T09:19:16.553

```
public static String getCurrentTimeStampwithTimeOnly() {
    return new SimpleDateFormat("HH:mm:ss").format(new Date());
} 
```

帮助您做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T08:43:35.063

您可以随时拨打此电话

```
现在日期 = 新日期（）； 

```

now 变量将包含当前时间戳 format 函数只是从这个时间戳生成一个字符串

还可以看看 Calendar 类（Calendar.getInstance()）

# python - 子类化生成器函数是否可行且可取？

> ID：10361956
> 
> 赞同：4
> 
> 时间：2012-04-28T08:38:59.897
> 
> 标签：python, generator, python-2.7

我经常使用返回某个类的生成器。我想做的是生成生成器类的子类，以便我可以在其上使用适合生成该类实例的生成器的方法。例如，我想做的一件事是有一个方法，该方法返回一个过滤器基础生成器的生成器。

我想做这样的事情：

```
class Clothes(object):
    def __init__(self, generator):
        self.generator = generator

    def get_red(self):
        return (c for c in self.generator if c.color=="red")

    def get_hats(self):
        return (c for c in self.generator if c.headgear) 
```

我想将衣服类视为衣服的集合。我没有对集合进行子类化的原因是我很少想按原样使用整个衣服集合，通常只需要进一步过滤它。但是，我经常需要各种过滤后的衣服集合。如果可能的话，我希望 Clothes 本身就是一个生成器，因为这就是我打算使用它的方式，但是在尝试子类化时出现错误`types.GeneratorType`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-28T10:55:48.147

```
types.GeneratorType 
```

定义为：

```
def _g():
    yield 1
GeneratorType = type(_g()) 
```

如您所见，它不是常规的`class`.

现在，是什么让发电机特别？不多。要使用 ，`generator protocol`只需执行`iterator protocol`. 有一个不错的捷径：当您是发电机`next()`时，您可以免费获得。`__iter__`这正是`collections.Iterable`定义的方式：

```
class Iterable(metaclass=ABCMeta):

    @abstractmethod
    def __iter__(self):
        while False:
            yield None

    @classmethod
    def __subclasshook__(cls, C):
        if cls is Iterable:
            if any("__iter__" in B.__dict__ for B in C.__mro__):
                return True
        return NotImplemented 
```

因此，只需使用它来构建您的生成器。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-28T10:49:18.463

正如您先前问题的评论中所指出的，返回生成器表达式通常是一个坏主意。引用[PEP 289](http://www.python.org/dev/peps/pep-0289/#early-binding-versus-late-binding)：

> ...强烈鼓励用户在立即使用其参数的函数中使用生成器表达式。对于更复杂的应用程序，完整的生成器定义在范围、生命周期和绑定方面总是更明显。

本着上述精神，我建议：

*   `__iter__`通过定义（反过来，可以是生成器）使主类可迭代。
*   定义`get_xxx`为迭代的生成器`self`和`yield`来自它的特定值

例子：

```
class Numbers(object):

    def __iter__(self):
        for x in range(10):
            yield x

    def get_odd(self):
        for x in self:
            if x & 1:
                yield x

nums = Numbers()

for x in nums:
    print x   # 0 1 2 3...

for x in nums.get_odd():
    print x # 1 3 5... 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-28T09:40:08.680

生成器的行为类似于迭代器，但与元组或列表不同，它所代表的序列是为每个迭代步骤延迟生成的。创建生成器的常用方法是使用生成器表达式或使用`yield`语句；任何其他机制，如果存在的话，都是黑魔法，你应该远离它。

因此，您应该忘记`types.GeneratorType`并继承它。您通常将生成器包装或链接在一起。您可以使用生成器表达式来做到这一点，就像您在示例代码中所做的那样，或者您可以使用出色的[`itertools`标准模块](http://docs.python.org/library/itertools.html)。

# android - Android 游戏开发 - 对所有内容都使用单一视图？

> ID：10361963
> 
> 赞同：1
> 
> 时间：2012-04-28T08:40:41.687
> 
> 标签：android, android-layout

因此，我正在尝试为 android 编写游戏，并且我有几个关于 android dev 的“最佳实践”的问题。我正在编写的游戏将在屏幕顶部有一些骰子，用户应该能够拖动它，在屏幕的下半部分，我需要显示不同数字的列表，更新为骰子被扔到一个新的位置。那么，解决这个问题的最佳方法是什么？我使用单个视图编写了一些示例代码（有效），并绘制了骰子位图和数字，但一切都非常依赖于分辨率，以至于它让我烦恼。通过切换到 xml 定义的视图、添加骰子视图和数字列表视图并分别绘制它们，我会得到什么吗？是否有我应该遵循的标准或最佳实践？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T08:54:35.620

在`xml`文件中定义布局是一个很好的做法，这样您的应用程序就可以在不同的屏幕尺寸上运行。

有关为什么应该使用 xml 文件的更多信息，请参阅[Android 设计指南](http://developer.android.com/design/index.html)。

使用 xml 文件时，使用 dp 作为大小，使用 sp 作为文本大小，尽可能使用`wrap_content`and 。`match_parent`

您还可以在代码中制作与密度无关的像素。请看这个。。

```
public float typedDimension(int a){
         return  TypedValue.applyDimension(
                    TypedValue.COMPLEX_UNIT_DIP, (float) a,
                    getResources().getDisplayMetrics());
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T08:55:57.467

首先，[SurfaceView](http://developer.android.com/reference/android/view/SurfaceView.html)是游戏开发的好选择——它会给你比标准视图更好的性能。

其次，我见过的一种很好的技术是写入标准尺寸的离屏表面，然后将该位图缩放到屏幕尺寸。当您拥有不同尺寸的屏幕时，一切仍将在正确的位置。请注意，您应该按比例缩小而不是按比例放大，因此您可能希望使用不同大小的图像（用于 mdpi、hdpi、xhdpi）以避免在较低的设备上使用过多的内存。

# image - SVG 图像在 Chrome 中更新订单时闪烁

> ID：10361964
> 
> 赞同：2
> 
> 时间：2012-04-28T08:40:42.497
> 
> 标签：image, google-chrome, svg

我有一个奇怪的问题。我有一个将图像加载到 SVG 中的脚本，然后用户可以通过单击它们手动更新它们的顺序：单击的图像在 SVG 树中上升。

问题是，在 Chrome 中，当它们在树中的顺序发生变化时，所有图像都会闪烁。但是，Firefox 和 Safari 工作时不会闪烁。此外，我在另一个域上有这个脚本的副本，它也不会在那里闪烁。

闪烁是否可能是由某些与域相关的问题引起的？在这两种情况下，图像都与页面位于同一域中。我使用 Chrome 18。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T09:04:22.950

`suspendRedraw()`当您需要进行复杂的操作或遇到您所描述的错误时，您可以在 SVG 中的任何元素上调用方法。当您完成操作后，调用`unsuspendRedraw()`同一元素以让浏览器重新呈现图像。我会调用图像的父元素上的方法。

# netbeans - 如何使 Netbeans 窗口不装饰？

> ID：10361966
> 
> 赞同：0
> 
> 时间：2012-04-28T08:40:46.573
> 
> 标签：netbeans, gnome, titlebar

我在笔记本电脑的小屏幕上使用 Netbeans IDE，所以我不想为它的标题栏浪费空间。菜单或命令行中是否有任何选项可以删除它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T09:30:55.083

一种选择（很可能是唯一的选择）是将 NB 置于全屏模式。为此，您可以使用`View > Full Screen`菜单项 (Alt + Shift + Enter)。

请注意，我在 Windows 上运行，我真的不能说 Gnome 会用它做什么。

# ios - 如何制作从popoverview到backview的动画？

> ID：10361972
> 
> 赞同：0
> 
> 时间：2012-04-28T08:42:01.593
> 
> 标签：ios, animation

![我有一个自定义 imagePickerControl](../Images/99ec2736abbba6380203c336eb1a0bdb.png)

当我选择一个图像时，我想要一个从选择器到 mainView（这是模糊区域）的动画，有人有个好主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T08:55:02.747

基本理念：

1.  使用选定的图像创建一个新的 temp-ImageView。
2.  将此添加到窗口中原始 ImageView 的确切位置。
3.  删除 original-ImageView （如果你愿意的话）
4.  将 temp-ImageView 移动/缩放到屏幕上所需的位置。
5.  将 final-ImageView 添加到蓝色区域中的所需位置。
6.  删除 temp-ImageView。

您将不得不使用 - (CGRect)convertRect:(CGRect)rect fromView:(UIView *)view 进行一些计算不确定，但选择器可能位于与蓝色区域不同的窗口中。

```
CGRect destRect; // position in window, height/width need to be flipped, so the size is correct after rotation

// add a ContainerView so rotation-handling is easier, esp. durring moving/scaling
UIView *containerView = [[UIView alloc] initWithFrame:destRect];

// set the frame of the imageView, origin 0/0 so rotation is easy to handle, height/width flipp back
UIImageView *tempImageView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, destRect.size.height, destRect.size.width)];

// flip layer center as well
[tempImageView setCenter:CGPointMake(camView.center.y, camView.center.x)];

// add the rotation 
[tempImageView setTransform:CGAffineTransformMakeRotation(M_PI_2)];

[tempImageView setAutoresizingMask:UIViewAutoresizingFlexibleWidth|UIViewAutoresizingFlexibleHeight]; 
```

# objective-c - 使用 vDSP_ctoz() 和 vDSP_ztoz() 去交错和交错缓冲区？

> ID：10361974
> 
> 赞同：8
> 
> 时间：2012-04-28T08:42:21.273
> 
> 标签：objective-c, signal-processing, core-audio, accelerate-framework

如何将`float *newAudio`into`float *channel1`和`float* channel2`interleave it back into 去交错`newAudio`？

```
Novocaine *audioManager = [Novocaine audioManager];

__block float *channel1;
__block float *channel2;
[audioManager setInputBlock:^(float *newAudio, UInt32 numSamples, UInt32 numChannels) {
  // Audio comes in interleaved, so, 
  // if numChannels = 2, newAudio[0] is channel 1, newAudio[1] is channel 2, newAudio[2] is channel 1, etc. 

      // Deinterleave with vDSP_ctoz()/vDSP_ztoz(); and fill channel1 and channel2
      // ... processing on channel1 & channel2
      // Interleave channel1 and channel2 with vDSP_ctoz()/vDSP_ztoz(); to newAudio
}]; 
```

这两行代码会是什么样子？我不明白 ctoz/ztoz 的语法。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-29T16:58:42.323

我在 Novocaine 的附件类（如 Ringbuffer）中为去交错所做的工作：

```
float zero = 0.0;  
vDSP_vsadd(data, numChannels, &zero, leftSampleData, 1, numFrames);   
vDSP_vsadd(data+1, numChannels, &zero, rightSampleData, 1, numFrames); 
```

对于交错：

```
float zero = 0.0;  
vDSP_vsadd(leftSampleData, 1, &zero, data, numChannels, numFrames);   
vDSP_vsadd(rightSampleData, 1, &zero, data+1, numChannels, numFrames); 
```

更一般的做事方式是有一个数组数组，比如

```
int maxNumChannels = 2; 
int maxNumFrames = 1024;
float **arrays = (float **)calloc(maxNumChannels, sizeof(float *));  
for (int i=0; i < maxNumChannels; ++i) {  
    arrays[i] = (float *)calloc(maxNumFrames, sizeof(float));
}

[[Novocaine audioManager] setInputBlock:^(float *data, UInt32 numFrames, UInt32 numChannels) {
    float zero = 0.0;
    for (int iChannel = 0; iChannel < numChannels; ++iChannel) {
        vDSP_vsadd(data, numChannels, &zero, arrays[iChannel], 1, numFrames);
    }
}]; 
```

这是我在 Novocaine 的 RingBuffer 附件类中大量使用的。我对 vDSP_vsadd 与 memcpy 的速度进行了计时，并且（非常非常令人惊讶）没有速度差异。

当然，您总是可以只使用环形缓冲区，省去麻烦

```
#import "RingBuffer.h"

int maxNumFrames = 4096
int maxNumChannels = 2
RingBuffer *ringBuffer = new RingBuffer(maxNumFrames, maxNumChannels)

[[Novocaine audioManager] setInputBlock:^(float *data, UInt32 numFrames, UInt32 numChannels) {
    ringBuffer->AddNewInterleavedFloatData(data, numFrames, numChannels);
}];

[[Novocaine audioManager] setOuputBlock:^(float *data, UInt32 numFrames, UInt32 numChannels) {
    ringBuffer->FetchInterleavedData(data, numFrames, numChannels);
}]; 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-28T12:31:46.747

这是一个例子：

```
#include <Accelerate/Accelerate.h>

int main(int argc, const char * argv[])
{
    // Bogus interleaved stereo data
    float stereoInput [1024];
    for(int i = 0; i < 1024; ++i)
        stereoInput[i] = (float)i;

    // Buffers to hold the deinterleaved data
    float leftSampleData [1024 / 2];
    float rightSampleData [1024 / 2];

    DSPSplitComplex output = {
        .realp = leftSampleData,
        .imagp = rightSampleData
    };

    // Split the data.  The left (even) samples will end up in leftSampleData, and the right (odd) will end up in rightSampleData
    vDSP_ctoz((const DSPComplex *)stereoInput, 2, &output, 1, 1024 / 2);

    // Print the result for verification
    for(int i = 0; i < 512; ++i)
        printf("%d: %f + %f\n", i, leftSampleData[i], rightSampleData[i]);

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-26T13:25:10.203

sbooth 回答了如何使用 vDSP_ctoz 去交错。这是互补操作，即使用 vDSP_ztoc 进行交错。

```
#include <stdio.h>
#include <Accelerate/Accelerate.h>

int main(int argc, const char * argv[])
{
    const int NUM_FRAMES = 16;
    const int NUM_CHANNELS = 2;

    // Buffers for left/right channels
    float xL[NUM_FRAMES];
    float xR[NUM_FRAMES];

    // Initialize with some identifiable data
    for (int i = 0; i < NUM_FRAMES; i++)
    {
        xL[i] = 2*i;    // Even
        xR[i] = 2*i+1;  // Odd
    }

    // Buffer for interleaved data
    float stereo[NUM_CHANNELS*NUM_FRAMES];
    vDSP_vclr(stereo, 1, NUM_CHANNELS*NUM_FRAMES);

    // Interleave - take separate left & right buffers, and combine into
    // single buffer alternating left/right/left/right, etc.
    DSPSplitComplex    x = {xL, xR};
    vDSP_ztoc(&x, 1, (DSPComplex*)stereo, 2, NUM_FRAMES);

    // Print the result for verification. Should give output like
    //    i:     L,     R
    //    0:  0.00,  1.00
    //    1:  2.00,  3.00
    //    etc...
    printf(" i:     L,     R\n");
    for (int i = 0; i < NUM_FRAMES; i++)
    {
        printf("%2d: %5.2f, %5.2f\n", i, stereo[2*i], stereo[2*i+1]);
    }
    return 0;
} 
```

# windows - 当操作系统完成加载其所有应用程序\服务时，如何以编程方式检测？

> ID：10361983
> 
> 赞同：3
> 
> 时间：2012-04-28T08:43:35.360
> 
> 标签：windows, winapi, com, operating-system, windows-shell

**编辑**：我改写了我的问题，请忽略以下所有评论（截至 5 月 7 日）。

首先，我将尝试解释问题：
我的过程正在尝试使用 ITrayDeskBand::ShowDeskBand 以编程方式显示 Deskband。
它在任何时候都可以很好地工作，除非操作系统正在加载其所有进程（在重置或注销之后）。

Windows 启动并开始加载各种应用程序\服务后，鼠标光标设置为等待几秒钟（取决于正在运行的应用程序数量\一切的速度）。

如果将鼠标光标设置为等待并且在此期间进程正在运行，则调用将失败。
但是，如果我的进程等待几秒钟（在此之后光标变为常规）然后调用调用，一切正常。

此行为在 Windows 7 和 Windows Vista 上都重现。

所以基本上我要问的是：

**1）只是为了基础知识，当光标设置为忙时操作系统会做什么？**
**2）更重要的问题：当这个过程结束时，我如何以编程方式检测？**

起初，我认为资源管理器没有正确加载，所以我使用[了 WaitForInputIdle](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687022%28v=vs.85%29.aspx)但事实并非如此。

后来我认为繁忙的光标表示 CPU 很忙，所以我创建了我的进程，`IDLE_PRIORITY_CLASS`但在光标繁忙时收到了空闲时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T02:16:52.600

如果`ITrayDeskBand::ShowDeskBand`失败，则等待`TaskbarCreated`消息，然后重试。（这与通知图标使用的技术相同。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-08T11:57:41.430

Windows 永远不会停止加载应用程序和/或服务！

事实上，应用程序来来去去，其中一些是交互的，其中一些没有任何用户交互。甚至服务在不同的时间点加载（取决于它们的设置和外部条件 - 例如，智能卡资源管理器服务可能仅在操作系统检测到智能卡设备已连接时启动）。应用程序可以（但不能）自动停止，某些服务也是如此。

人们永远不知道 Windows 何时停止加载所有应用程序和/或服务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T02:05:43.777

显而易见的方法是检查 ShowDeskband 是否工作，如果没有，几秒钟后重试。我假设您已经考虑并拒绝了此选项。

既然您似乎已经缩小了显示光标的标准，那么等待您想要的特定光标怎么样？您可以像这样找到显示的光标：

```
CURSORINFO cinfo;
ICONINFOEX info;

cinfo.cbSize = sizeof(cinfo);
if (!GetCursorInfo(&cinfo)) fail();

info.cbSize = sizeof(info);
if (!GetIconInfoEx(cinfo.hCursor, &info)) fail();

printf("szModName = %ws\n", info.szModName);
printf("wResID = %u\n", info.wResID); 
```

大多数简单游标都在模块 USER32 中。[GetIconInfo](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648070%28v=vs.85%29.aspx)文章中列出了相关的资源 ID 。

您显然想等待标准箭头光标出现。这是在模块 USER32 中，资源 ID 是 32512 (IDC_ARROW)。

我建议你每秒检查十次光标类型。当您连续十次看到箭头光标时（即持续一整秒），Explorer 很可能已完成启动。

# windows-phone-7 - 是否可以在指定位置获得所有新签到？

> ID：10361985
> 
> 赞同：0
> 
> 时间：2012-04-28T08:43:57.270
> 
> 标签：windows-phone-7, foursquare

我正在开发一个基于foursquare API 的windows phone 应用程序，这里有一个这样的场景：用户带着手机走在路上。他使用我的应用程序找出谁刚刚在他的位置周围的foursquare中签到（包括陌生人的签到），是否可以实现这个请求？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T00:57:55.367

对foursquare API 的快速检查表明，似乎有一种方法可以满足您的需求。只需获取附近场所的列表，然后找出每个场所的人：

[https://developer.foursquare.com/docs/venues/search](https://developer.foursquare.com/docs/venues/search)

[https://developer.foursquare.com/docs/venues/herenow](https://developer.foursquare.com/docs/venues/herenow)

# fractals - 无法真正理解 mandelbrot 集背后的数学原理

> ID：10361989
> 
> 赞同：1
> 
> 时间：2012-04-28T08:44:29.847
> 
> 标签：fractals, mandelbrot

根据以下文章：[wolfram Mandelbrot set](http://mathworld.wolfram.com/MandelbrotSet.html)，我试图了解他们如何准确地计算出`Ln(C)=Zn=R(max) values.` 我确实知道 Rmax 是一个常数，等于 2，（|Zn| < 4 对于 Mandelbrot 集合内的所有点） , Ln(C) 应该是我为每个 C(point) 花费的迭代次数，但是我如何使用这 2 个来计算

```
L1(C)   =   C   
L2(C)   =   C(C+1)
          ....
          .... 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T08:53:08.023

您首先设置 z=C（或者，基本上等同于发生的情况，z=0），然后重复设置 z := z^2+C。继续这样做，直到得到 |z|>Rmax 的 az。

如果你从不这样做——当然在实践中你不会永远继续下去，而是会在一定的最大迭代次数后停止——那么你的观点就在 Mandelbrot 集中，如果你在画一幅画，你通常将其涂成黑色。

如果在 N 次迭代之后你*确实*得到了 |z|>Rmax，那么你的点不在 Mandelbrot 集合中，并且 N 给出了一些指示它在集合之外的程度；如果您正在绘制图片，则通常以 N 确定的颜色绘制点。

Wolfram 页面上对 L_n 的描述非常糟糕。它们的意思是：定义 L_n(C) 为使用参数 C 时经过 n 次迭代后 z 的值；然后您可以绘制由|L_n(c)|=Rmax 定义的曲线。当您如上所述绘制点时，这些是不同颜色区域之间的边界。

# hadoop - 在集群中启动和停止 hadoop 守护进程/进程

> ID：10361991
> 
> 赞同：1
> 
> 时间：2012-04-28T08:44:35.653
> 
> 标签：hadoop, mapreduce, cloudera

我有一个有 9 个节点的 linux 集群，我已经安装了 hadoop 1.0.2。我有一个使用多个从站运行的 GIS 程序。我需要使用 1、2、3、4 .. 8 个从节点来测量我的程序的 speedUp。一旦我通过改变从属设备的数量在 conf/slaves 文件中进行了更改，我就使用 start-all.sh/stop-all.sh 脚本来启动/停止我的集群。但是这样做时我遇到了奇怪的错误，感觉我没有使用正确的技术来添加/删除集群中的从节点。

任何有关“更改从属文件和重新启动集群的技术”的理想帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T13:01:40.207

问题可能是您不允许 Hadoop 从系统中正常删除节点。

您要做的是[*停用*](http://developer.yahoo.com/hadoop/tutorial/module2.html#decommission)节点，以便 HDFS 有时间在其他地方重新复制文件。该过程本质上是将一些节点添加到`excludes`文件中。然后，您运行`bin/hadoop dfsadmin -refreshNodes`，它会读取配置并刷新集群的节点视图。

在添加节点时，甚至可能在删除节点时，您应该考虑运行[rebalancer](http://developer.yahoo.com/hadoop/tutorial/module2.html#rebalancing)。这将使数据均匀分布，并有助于提高一些性能，如果新节点没有任何数据，您可能会看到。

# c++ - C ++中的插件框架

> ID：10361996
> 
> 赞同：2
> 
> 时间：2012-04-28T08:46:09.937
> 
> 标签：c++, plugins, boost, frameworks, template-meta-programming

我正在为可扩展架构设计（集思广益）一个 C++ 插件框架。每个插件注册一个接口，由插件自己实现。这样的框架可能运行在相对强大的嵌入式设备（例如 Atom/ARM）上，所以我可以使用 STL 和 Boost。

目前我已经设法编写了一个类似的框架，其中接口是预先知道的，并且插件（从动态库加载）注册实现它们的对象。这些对象由它们的工厂方法根据需要进行实例化，并且方法被正确调用。

现在我想让它更灵活，让插件注册新接口（不仅仅是实现现有接口），从而扩展框架用户可用的 API。

我想过使用 std::map<std::string, FunctionPtr>，我读过的几篇文章和 stackoverflow 回复也提到了这一点。不幸的是，它似乎没有捕捉到不同方法接口的情况。

我觉得它可能与模板元编程或特征有关，但我无法弄清楚它应该如何工作。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T14:48:00.733

尝试查看 XPCOM 为您解决这些问题 - 通过重新实现 COM。

您有不知道插件为您的应用程序提供什么接口的问题，因此您需要一种方法让开发人员访问它，而编译器不知道它是什么（但是，如果您提供头文件，那么突然间您就知道了它是什么，你可以编译它而不需要插件未知接口的花哨）

因此，您将不得不依赖接口的运行时确定性，这大致要求您以某种方式定义接口，以便框架可以在其上调用任意方法，我认为您可以做到这一点的唯一现实方法就是将每个接口定义为一组函数指针，单独加载，然后存储在数据中供用户调用。这几乎意味着指向名称的函数指针映射。这也意味着您只能通过使函数名称唯一来用户编译器的细节（例如重载）。编译器通过将所有函数“修改”为唯一的编码名称来为您完成此操作。

[Type Traits](http://www.boost.org/doc/libs/1_49_0/libs/type_traits/doc/html/boost_typetraits/background.html) will help you wrap your imported functions in your framework, so you can inspect them and create classes that work with any imported type, but it isn't going to solve the main problem of importing arbitrary functions.

Possibly one approach that you'll want to read is [Metaclasses and Reflection](http://www.vollmann.com/en/pubs/meta/meta/meta.html) by Vollmann. This was referenced by the C++ standard body, though I don't know if it will become part of a future spec. Alternatively you can look at [Boost.Extension](http://boost-extension.redshoelace.com/docs/boost/extension/boost_extension/introduction.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T09:32:59.083

也许您需要检查的第一件事是 COM。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T09:33:59.760

任何可以用模板完成的事情，都可以不用手工编写“模板实例”来完成，尽管方式可能不太方便。

如果您的框架在编译时没有看到 的声明`class MyNewShinyInterface`，则它不能存储 type 的指针，`MyNewShinyInterface *`也不能将它们返回给框架用户。再多的模板魔法也无法改变这一点。该框架只能存储指向某个基类的指针。用户将不得不做一个`dynamic_cast`检索正确类型的指针。

函数指针也是如此，只有函数没有基类，并且必须执行容易出错的操作`reinterpret_cast`才能检索正确的类型。（这只是更喜欢正确对象而不是函数指针的另一个原因。）

# python - 如何在 Django 字段中使用多个小部件？

> ID：10361999
> 
> 赞同：3
> 
> 时间：2012-04-28T08:46:40.817
> 
> 标签：python, django, forms, widget

我在表单中有一个特定字段，它需要一个自定义属性，并且我们将其设置为密码框。目前我有：

```
login_password = forms.CharField(label=(u'password')) 
```

但我需要这两个：

```
widget=forms.TextInput(attrs={'placeholder': 'password'})
widget=forms.PasswordInput(render_value=False) 
```

我怎样才能使该字段使用这两个小部件？我已经阅读过，`MultiWidget`但我不确定这是否是我需要使用的或者如何准确地使用它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T08:52:59.333

`PasswordInput`也接受`attrs`。

```
login_password = forms.CharField(label=u'password', widget=forms.PasswordInput(render_value=False, attrs={'placeholder': 'password'})) 
```