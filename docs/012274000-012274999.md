# StackOverflow 问答 12274000-12274999

# python - 游戏ai Line of Sight Python

> ID：12274004
> 
> 赞同：-1
> 
> 时间：2012-09-05T03:11:23.027
> 
> 标签：python, pyglet, game-ai

我如何检查玩家是否在暴徒的范围内？（我正在 pyglet 中制作一个自上而下的游戏）我正在制作它，以便如果玩家在一定距离内，小怪会跟随并攻击玩家，但我不确定如何有效地做到这一点。我需要做一个“if”语句来查看 x > mob.x - 50 和 x < mob.x + 50 等吗？

我有一个针对暴徒的课程

```
class zombie(pyglet.sprite.Sprite):

    def __init__(self, image, x, y, batch,trees):
            pyglet.sprite.Sprite.__init__(self, image, x, y, batch=None) 
```

然后我使用了几个函数作为他们可以做的不同动作

```
 def move(self):
        ...
    def idle(self):
        ... 
```

玩家的位置是“player.x”和“player.y”（对于小怪来说相同，但用“zombie而不是player”）

正如 Joran 所说，我认为找到生物与玩家坐标之间的距离是最好的方法，我将制作另一个函数来检查距离。

抱歉，如果不清楚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T03:14:04.777

你可能需要计算怪物和玩家之间的距离

```
sqrt((mob.x-player.x)**2 + (mob.y-player.y)**2) 
```

您可能可以简化它并摆脱 sqrt ...

# php - 网络上的熵源

> ID：12274005
> 
> 赞同：4
> 
> 时间：2012-09-05T03:11:36.390
> 
> 标签：php, web-services, entropy, chaos

为了保证随机数生成器的真实性，我们的想法是，如果用户愿意，他们可以验证该数字实际上是从公共熵源生成的。这使系统能够确保服务器**无法**选择随机数的用户。

```
$entropy = "what_do_you_think";
$md5 = md5($entropy);
/*take the first 10 hex characters of the md5 hash*/
$hex = substr($md5, 0, 9);
/*convert the hex to decimal*/
$dec = hexdec($hex);
/*use this decimal as a seed*/  
srand($dec);
/*pick a random number between 0 and 9, ultimately seeded by the entropy*/
$rand = rand(0,9); 
```

我的问题是：有哪些好的公共熵源（最好是不可变的和混乱的），并且绝对可以引用，它们可以连接在一起形成一个字符串并输入 md5？一些想法是特定的股票价格、温度（来自诚实的来源）、比特币区块链中包含的哈希值......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T21:32:40.623

查看 xkcd 的地理哈希算法。我认为这几乎是您正在寻找的东西。

[http://wiki.xkcd.com/geohashing/Implementations](http://wiki.xkcd.com/geohashing/Implementations)

地理散列算法使用道琼斯指数作为熵源。本页讨论通过网络获取道琼斯指数开盘价的方法。 [http://wiki.xkcd.com/geohashing/Dow_Jones_Industrial_Average](http://wiki.xkcd.com/geohashing/Dow_Jones_Industrial_Average)

但我认为最好的公开、不可变和可验证熵的来源可以在比特币交易数据库中找到。它广泛分布并不断验证，并具有定义的协议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T03:43:37.237

使用物理熵的安全价值在于它是不可预测的，即除了收单方之外的任何人都不知道。使用任何人都可以使用的熵到底有什么意义？不妨将 Pi 的打印输出打开到一百万个位置并选择一个起点。

除此之外，原则上没有办法确定服务器给你的随机数是否实际上来自它显然使用的熵源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T03:15:20.583

# php - Doctrine2 命名空间对象

> ID：12274006
> 
> 赞同：1
> 
> 时间：2012-09-05T03:11:40.457
> 
> 标签：php, zend-framework, doctrine-orm

我刚刚开始在 Zend Framework 中使用 Doctrine2（也刚刚开始使用命名空间）并且正在从数据库中获取数据。我从数据库中获取行并将它们分配给视图没有问题，但是当循环遍历行并尝试回显一个值时，我得到一个空字符串。

```
<?php
  foreach ( $this->rows as $row )
  {
    echo 'id = ' . $row->id . ' <br>';
  }
?> 
```

结果是`"id = "`

A `var_dump()`on`$row`结果：

```
object(My\Entity\Events)#227 (11) {
  ["id":"My\Entity\Events":private]=>
  int(1)
  ["_userId":"My\Entity\Events":private]=>
  int(1)
  ["_startDateTime":"My\Entity\Events":private]=>
  object(DateTime)#224 (3) {
    ["date"]=>
    string(19) "2012-09-08 19:00:00"
    ["timezone_type"]=>
    int(3)
    ["timezone"]=>
    string(16) "America/New_York"
  }
  ["_endDateTime":"My\Entity\Events":private]=>
  object(DateTime)#220 (3) {
    ["date"]=>
    string(19) "2012-09-08 20:00:00"
    ["timezone_type"]=>
    int(3)
    ["timezone"]=>
    string(16) "America/New_York"
  }
  ["_eventTitle":"My\Entity\Events":private]=>
  string(11) "Dummy Event"
  ["_data":"My\Entity\AbstractEntity":private]=>
  NULL
} 
```

我猜这是我想念/不知道的简单事情，并希望有任何见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T07:08:53.573

从您自己的`var_dump()`，该`id`属性是私有的，因此不能像您在`foreach`循环中那样直接访问它。

您必须创建一个访问器方法，例如`getId()`，它将返回`id`属性的值。

See also [http://php.net/manual/en/language.oop5.visibility.php](http://php.net/manual/en/language.oop5.visibility.php)

# android - Android：如何从 PreferenceScreen 更改主视图背景

> ID：12274010
> 
> 赞同：2
> 
> 时间：2012-09-05T03:12:08.653
> 
> 标签：android, background, sharedpreferences, preferenceactivity

我有一个preferenceScreen，可以选择更改main_layout 的背景。我试图创建另一个活动来完成这项工作，但它根本不起作用。现在我只能使用按钮从 main_view 进行更改。当我在 setOnPreferenceClickListener 中尝试此操作时：

```
View view=(View) findViewByid(R.id.main_layout);
view.setBackgroundDrawable(draw); 
```

我收到了这个错误：

```
java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1, result=-1, data=Intent { dat=content://media/external/images/media/1 }} to activity {com.helloworld/com.helloworld.Preferences}: java.lang.NullPointerException 
```

如何从我的偏好屏幕更改背景以及如何保存它？

# c# - 为什么 MVC 会创建所有这些新的配置文件？

> ID：12274013
> 
> 赞同：1
> 
> 时间：2012-09-05T03:12:49.707
> 
> 标签：c#, entity-framework, asp.net-mvc-4

每次我上传新图像并将其与个人资料链接时，它也会在错误的数据库中创建一个新的个人资料。

我想它是通过以下代码创建的：

```
var imageMeta = new ImageMeta
    {
        Name = imageForm.Name,
        User = Profile,
    };
...
db.Images.Add(imageMeta);
db.SaveChanges(); 
```

`Profile`我从哪里来`BaseController`：

```
public class BaseController : Controller
{
    private UsersContext _udb = new UsersContext();
    private UserProfile _profile = null;

    public new UserProfile Profile
    {
        get
        {
            if(_profile == null && User.Identity.IsAuthenticated)
            {
                _profile = _udb.UserProfiles.Single(p => p.UserName == User.Identity.Name);
            }
            return _profile;
        }
    }
} 
```

该方法`Profile.get`从 中提取登录用户的正确配置文件`UsersContext`，但`db`第一个片段中的实际是`GalleryContext`.

我猜它在该数据库/上下文中看不到配置文件，所以它正在创建表并将新记录插入其中？我可以告诉它不要那样做吗？用户和图像只是存储在两个不同的数据库中。

我不介意将它们放在同一个数据库中，但它[似乎不喜欢将 DefaultContext 用于我的 images](https://stackoverflow.com/q/12239707/65387)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T03:49:18.067

如果您`ImageMeta`和`UserProfile`属于两个独立的数据库，那么您几乎没有选择。

您可以提供标量属性，而不是在类中拥有`UserProfile`类型属性。`User``ImageMeta``UserId`

```
public class ImageMeta
{
    [Key]
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public int Id { get; set; }
    public int UserId { get; set; }
    public string Name { get; set; }
    public virtual ICollection<ImageFile> Files { get; set; } 
} 
```

然后`ImageMeta`插入看起来像

```
var imageMeta = new ImageMeta
    {
        Name = imageForm.Name,
        UserId = Profile.Id,
    };
...
db.Images.Add(imageMeta);
db.SaveChanges(); 
```

您可以创建数据库的物化视图`UserProfile`。 `GalleryContext`然后两个上下文将使用同一个表。之后，您可以在保存时将`Profile`实例从中分离`UsersContext`并附加到。`GalleryContext``ImageMeta`

# javascript - 如果 JS 中的函数是一等的，那么是什么允许它们在定义之前被调用？

> ID：12274014
> 
> 赞同：18
> 
> 时间：2012-09-05T03:13:19.363
> 
> 标签：javascript, syntax, functional-programming, first-class-functions

头等函数不是意味着它们表现为变量吗？显然，它们的行为与变量并不完全相同，因为：

```
console.log(foo);
var foo = 'bar'; 
```

...不起作用，而这个：

```
console.log(foo());
function foo() {
 return('bar');
} 
```

...做。

也就是说，这个：

```
console.log(foo());
var foo = function() { return 'bar'; }; 
```

不起作用，这是更一致的。

是什么赋予了？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-05T03:18:26.850

你所经历的被称为提升。当使用如下**函数声明**时：

```
function foo() {} 
```

`foo`将被移动到最近的作用域（函数）的顶部。

另一方面，当您使用**函数表达式**或**函数赋值**时，例如：

```
var foo = function() {} 
```

变量`foo`将被移到顶部，但在需要时会进行赋值。

**[学到更多](http://javascriptweblog.wordpress.com/2010/07/06/function-declarations-vs-function-expressions/)**

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-05T03:24:05.673

因为你不比较同一件事。在您的示例中-您将**函数声明** `function foo()...`与**变量声明和赋值**进行比较`var foo = 'bar';`

更正确的比较是：

```
console.log(foo);
var foo = 'bar'; 
```

和

```
console.log(foo());
var foo = function() {
 return 'bar';
} 
```

由于**提升的工作方式，****功能声明**的解释不同。提升将所有**声明**移动到最近范围的顶部，**同时将分配留**在原处。

 ******函数声明在这个意义上是特殊的，因为它在一个语句中既是声明又是表达式/赋值，因此被提升在一起。

例如：您可以查看以下表达式：

```
console.log(foo);
var foo = 'bar'; 
```

像这样：

```
var foo;
console.log(foo); //prints undefined
foo = 'bar'; 
```

和

```
console.log(foo());
var foo = function() {
 return 'bar';
} 
```

像这样：

```
var foo;
console.log(foo());
foo = function() {
 return 'bar';
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-05T03:18:19.860

在 JS 中，函数声明会自动跳到作用域的顶部

```
console.log(foo());
function foo() {
 return('bar');
} 
```

实际上被解释为

```
function foo() {
 return('bar');
}
console.log(foo()); 
```

第二段代码就是这样工作的，因为 foo 是变量，而不是函数（它恰好有一个匿名函数作为值）。变量也被顶到了顶部，所以

```
console.log(foo());
var foo = function() { return 'bar'; }; 
```

变成

```
var foo; //empty variable
console.log(foo()); //undefined
foo = function() { return 'bar'; }; //creates a function without name and assigns it to foo 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-05T03:24:09.197

函数声明和变量声明将始终移动到其作用域的顶部。

```
console.log(foo());
function foo() {
   return 'bar';
} 
```

被解释为：

```
function foo() {
   return 'bar';
}
console.log(foo()); 
```

* * *

```
console.log(foo());
var foo = function () {
   return 'bar';
}; 
```

被解释为：

```
var foo;
console.log(foo());
foo = function () {
   return 'bar';
}; 
```******

# android - Admod AddTestDevice 已发布

> ID：12274017
> 
> 赞同：0
> 
> 时间：2012-09-05T03:14:21.283
> 
> 标签：android, admob

我在我的 admob 代码中使用这一行

```
 adRequest.addTestDevice("xxxxxxxxx"); 
```

这是否意味着它只会在 MY DEVICE 上显示测试广告？

在我将 PUBLISH 混搭在我的新游戏上之前，我只是想确定一下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T17:09:58.427

是的，addTestDevice 仅将您的设备列入测试广告白名单。AdMob API 可防止您在脚下开枪。

# reference - 这些密码算法符号是什么意思？

> ID：12274018
> 
> 赞同：1
> 
> 时间：2012-09-05T03:14:37.010
> 
> 标签：reference, encryption

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-08T15:28:55.860

**异或**

![异或](../Images/6b17480485ff8b21f2a5b609cf9c4f26.png)

方法：使用 XOR 组合两个输入。所以，这个符号确实可以读作“⊕”。

**添加**

![添加](../Images/1c883ad003a4e67a059c7089f8ee953d.png)

方法：使用加法组合两个输入。这个符号确实可以读作“+”。

**诺塔贝内**

在您询问的图像中，注意到 S-box 采用 8 位（= unsigned char）输入并返回 32 位（= unsigned int）......这意味着密码希望您对 unsigned 进行加法和 XOR整数。

![形象的](../Images/8e26bae46620080bdffa3b723db302f6.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T03:25:19.590

盒子里的加号是加法 mod 2 ^(32)（实际上，我不记得了——它可能是 mod 2 ^(32) -1，但无论如何它都是加法）。

# java - 如何为 Spring Data 中的类配置 MongoDb 集合名称

> ID：12274019
> 
> 赞同：30
> 
> 时间：2012-09-05T03:15:08.617
> 
> 标签：java, spring, mongodb, spring-data, spring-data-mongodb

我`Products`在我的 MongoDB 数据库中调用了一个集合，它由`IProductPrice`我的 Java 代码中的接口表示。以下存储库声明导致 Spring Date 查找集合`db.collection: Intelliprice.iProductPrice`。

我希望它配置它以`db.collection: Intelliprice.Products`使用外部配置进行查看，而不是`@Collection(..)`在`IProductPrice`. 这可能吗？我怎样才能做到这一点？

```
public interface ProductsRepository extends
    MongoRepository<IProductPrice, String> {
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-06T09:04:05.470

您目前可以实现此目的的唯一方法是`@Document`使用`collection`属性注释您的域类，以定义此类的集合实例的名称应持久保存到。

然而，有一个开放的[JIRA 问题](https://jira.springsource.org/browse/DATAMONGO-525)建议添加一个可插入的命名策略来配置以更全局的方式处理类、集合和属性名称的方式。随意评论您的用例并投票。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2016-01-11T16:04:02.827

使用上面 Oliver Gierke 的回答，在我需要为一个实体创建多个集合的项目中工作，我想使用 spring 存储库，并且需要在使用存储库之前指定要使用的实体。

我设法使用该系统按需修改存储库集合名称，它使用 SPeL。但是，您一次只能处理 1 个集合。

域对象

```
@Document(collection = "#{personRepository.getCollectionName()}")
public class Person{} 
```

默认 Spring 存储库：

```
public interface PersonRepository 
     extends MongoRepository<Person, String>, PersonRepositoryCustom{
} 
```

自定义存储库接口：

```
public interface PersonRepositoryCustom {
    String getCollectionName();

    void setCollectionName(String collectionName);
} 
```

执行：

```
public class PersonRepositoryImpl implements PersonRepositoryCustom {

    private static String collectionName = "Person";

    @Override
    public String getCollectionName() {
        return collectionName;
    }

    @Override
    public void setCollectionName(String collectionName) {
        this.collectionName = collectionName;
    }
} 
```

要使用它：

```
@Autowired
PersonRepository personRepository;

public void testRetrievePeopleFrom2SeparateCollectionsWithSpringRepo(){
        List<Person> people = new ArrayList<>();
        personRepository.setCollectionName("collectionA");
        people.addAll(personRepository.findAll());
        personDocumentRepository.setCollectionName("collectionB");
        people.addAll(personRepository.findAll());
        Assert.assertEquals(4, people.size());
} 
```

否则，如果您需要使用配置变量，您可以使用这样的东西吗？[资源](http://docs.spring.io/spring/docs/current/spring-framework-reference/html/expressions.html#expressions-beandef-annotation-based)

```
@Value("#{systemProperties['pop3.port'] ?: 25}") 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2020-10-13T16:59:32.323

有点晚了，但我发现您可以在 spring-boot 中动态设置 mongo 集合名称，直接访问应用程序配置。

```
@Document(collection = "#{@environment.getProperty('configuration.property.key')}")
public class DomainModel {...} 
```

我怀疑您可以通过这种方式设置任何注释属性。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-02-16T17:30:28.200

我可以添加的唯一评论是您必须在 bean 名称中添加 @ 前缀：

```
collection = "#{@beanName.method()}" 
```

让 bean factory 注入 bean：

```
@Document(collection = "#{@configRepositoryCustom.getCollectionName()}")
public class Config {

} 
```

我努力想通了。。

完整示例：

```
@Document(collection = "#{@configRepositoryCustom.getCollectionName()}")
public class Config implements Serializable {
 @Id
 private String uuid;
 private String profile;
 private String domain;
 private String label;
 private Map<String, Object> data;
 // get/set
}

 public interface ConfigRepositoryCustom {
   String getCollectionName();
   void setCollectionName(String collectionName);
 }

@Component("configRepositoryCustom")
public class ConfigRepositoryCustomImpl implements ConfigRepositoryCustom {
 private static String collectionName = "config";
 @Override
 public String getCollectionName() {
  return collectionName;
 }
 @Override
 public void setCollectionName(String collectionName) {
 this.collectionName = collectionName;
 }
}

@Repository("configurations")
public interface ConfigurationRepository extends MongoRepository<Config, String>, ConfigRepositoryCustom {
  public Optional<Config> findOneByUuid(String Uuid);
  public Optional<Config> findOneByProfileAndDomain(String profile, String domain);
} 
```

serviceImpl 中的用法：

```
@Service
public class ConfigrationServiceImpl implements ConfigrationService {
 @Autowired
 private ConfigRepositoryCustom configRepositoryCustom;

 @Override
 public Config create(Config configuration) {
   configRepositoryCustom.setCollectionName( configuration.getDomain() ); // set the collection name that comes in my example in class member 'domain'
   Config configDB = configurationRepository.save(configuration);
   return configDB;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-03-26T12:05:30.017

我在 SpEL 中使用静态类和方法；

```
public class CollectionNameHolder {
    private static final ThreadLocal<String> collectionNameThreadLocal = new ThreadLocal<>();

    public static String get(){
        String collectionName = collectionNameThreadLocal.get();
        if(collectionName == null){
            collectionName = DataCenterApiConstant.APP_WECHAT_DOCTOR_PATIENT_COLLECTION_NAME;
            collectionNameThreadLocal.set(collectionName);
        }
        return collectionName;
    }

    public static void set(String collectionName){
        collectionNameThreadLocal.set(collectionName);
    }

    public static void reset(){
        collectionNameThreadLocal.remove();
    }
} 
```

在实体类中，@Document(collection = "#{T(com.test.data.CollectionNameHolder).get()}")

然后，使用

```
CollectionNameHolder.set("testx_"+pageNum) 
```

在服务中，和

```
CollectionNameHolder.reset(); 
```

希望它可以帮助你。

# objective-c - 覆盖 Objective-C 中的方法

> ID：12274022
> 
> 赞同：1
> 
> 时间：2012-09-05T03:15:17.960
> 
> 标签：objective-c, overriding, getter

我正在尝试覆盖 Objective-C 中的吸气剂。我有两个班级，`First`并且`Second`，例如：

`First.h`：

```
@interface First : MashapeResponse {
    NSString* message;
}

@property(readwrite, retain) NSString* message;

@end 
```

`First.m`：

```
#import "First.h"

@implementation First

@synthesize message;

@end 
```

`Second.h`：

```
#import "First.h"

@interface Second : First

-(NSString*) message;

@end 
```

`Second.m`：

```
#import "Second.h"

@implementation Second

-(NSString*) message {
    return [NSString stringWithFormat:@"%@%@", @"Message is ", message];
}

@end 
```

我正在尝试执行以下代码，但似乎`Second`永远不会执行覆盖的方法。

```
First* first = [[First alloc] init];
[first setMessage:@"hello"];
NSLog(@"%@", [first message]); // "hello" expected

Second* second = (Second*) first;
NSLog(@"%@", [second message]); // "Message is hello" expected, but it's still "hello" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T03:19:13.247

您实际上是在将 a 转换`First`为 a `Second`（这是不好的形式）；但基础类型仍然是`First`，这就是为什么您看到原始类型`message`（来自`First`）。Alloc a `Second`，它应该按预期工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T03:19:59.647

问题不在于您如何覆盖，而在于您如何分配：

```
Second* second = [[Second alloc] init];
second.message = @"Hello";
NSLog(@"%@", [second message]); 
```

当您强制`First*`转换为 时`Second*`，该对象仍然是它原来的样子 - 的一个实例`First`。您需要分配一个实例`Second`才能看到您的覆盖工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T03:21:43.713

在 Objective-C 中，强制转换只会向编译器声明一个对象属于某种类型。他们不会以任何方式改变实际对象。在向下转换`first`为指向`Second`实例的指针时，您向编译器做出了实际上不正确的断言 - 因为现在两者都指向的对象`first`仍然`second`是`First`. 希望这可以帮助！

# android - 将 ArrayList 适配为 ListView

> ID：12274025
> 
> 赞同：0
> 
> 时间：2012-09-05T03:15:43.627
> 
> 标签：android, listview, android-listview

我有一个 XML 文件，我已经成功地将数据解析到 textView 中，现在我想将该数据绑定到 ArrayList 或 List 中并在 ListView 中显示。

但我不知道如何将arraylist 数据绑定到ListView。我已成功将所有数据添加到数组列表中，如下面的代码中所述。

```
List al = new ArrayList();
al.add(parser.getAttributeValue(null, "firstnames")); 
```

请帮助我解决上述问题的代码语法。

问候 。

提前感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T03:33:19.267

请查看[http://codinglookseasy.blogspot.in/2012/07/android-list-view-sample.html](http://codinglookseasy.blogspot.in/2012/07/android-list-view-sample.html)上的示例 而不是这个

```
aa = new ArrayAdapter(this,
android.R.layout.simple_list_item_1, months);
setListAdapter(aa); 
```

在你的情况下使用这个

```
aa = new ArrayAdapter(this,
android.R.layout.simple_list_item_1, al);
setListAdapter(aa); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T03:20:43.543

您需要使用 Adapter 将 List 绑定到 ListView，如下所示：

```
List<String> list = new ArrayList<String>();
// add data to list

ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, list);
ListView listView = (ListView) findViewById(R.id.listView);
listView.setAdapter(adapter); 
```

请注意，List 的子类型（即 String）与 ArrayAdapter 的子类型（也是 String）相匹配。布局`android.R.layout.simple_list_item_1`定义了字符串在每一行中的显示方式。您可以在 SDK 中查找此布局的细节，如果您愿意，也可以使用自己的布局。希望对您有所帮助，祝您学习Android好运！

# c++ - OpenGL 库

> ID：12274026
> 
> 赞同：3
> 
> 时间：2012-09-05T03:15:52.143
> 
> 标签：c++, opengl, libraries, deprecated

我读过很多关于OpenGL的弃用。我听说这与着色器的实现有关。是否有任何库受此弃用影响？似乎建议将 SFML、GLFW 和 SDL 作为最新的库。其他库（如 glew 或 glut）是否存在弃用问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T06:30:47.957

[GLUT](http://www.opengl.org/resources/libraries/glut/)是一个实用程序库，其中包含主要与 GUI 相关的有用方法。GLUT 已经过时了 10 年，因此它不能与新的（可编程）管道一起使用。据我[所知](http://www.opengl.org/discussion_boards/showthread.php/176638-GLUT-and-OpenGL-3-2)，它仅支持最高 GL 3.1。替代GLUT的项目是[FREE GLUT](http://freeglut.sourceforge.net/)它是最新的，可以与新旧 OpenGL 版本一起使用。Glew 是为 Windows 用户公开 GL API 的库。它既有弃用的功能，也有当前的功能。使用哪个取决于您，因为它主要取决于您选择的 GL 版本和配置文件类型。例如，如果您在 OpenGL 4.0 版本中使用兼容性配置文件，那么您可以混合使用已弃用的和 4.0 API 特定功能。但是，如果您选择核心配置文件，则使用不推荐使用的方法将不起作用。

# javascript - iframe 吃掉了我的 JavaScript 代码。怎么了？

> ID：12274027
> 
> 赞同：-1
> 
> 时间：2012-09-05T03:15:53.017
> 
> 标签：javascript, iframe

```
<!DOCTYPE html>
<html>
<head>  
</head>
<body>
<div>
    <iframe id="frame" allowfullscreen="allowfullscreen" frameborder="0" style="height: 300px; width: 100%">
</div>

<script type="text/javascript">
    console.log("test");
</script>
<body>
</html> 
```

在这里，我把JS代码放在了页面的底部。结果是它被吃掉了。如果我删除 iframe 元素，代码工作正常。显然，我放在这里的 iframe 是一个空的，没有链接到任何来源。因此，没有引入其他内联 JS 代码。顺便说一句，如果我将脚本放在头块中，它们也可以正常工作。

我真的不知道为什么？有人可以给我一些意见吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T03:18:27.990

使用验证器（例如[http://html5.validator.nu/](http://html5.validator.nu/)或[http://validator.w3c.org](http://validator.w3.org/#validate_by_input)）。您遇到的最大问题是您没有使用`</iframe>`标签关闭 iframe。iframe 标记之间的任何内容只会显示给禁用 iframe 的客户。

最终代码应如下所示：

```
<iframe id="frame" allowfullscreen="allowfullscreen" frameborder="0" style="height: 300px; width: 100%">
    This page requires iframes... blah blah.
</iframe> 
```

将来，当您不确定 110% 时，请**始终进行验证。**

# sockets - 使用 getaddrinfo/getnameinfo 获取本地主机名作为目标

> ID：12274028
> 
> 赞同：1
> 
> 时间：2012-09-05T03:16:01.530
> 
> 标签：sockets

我正在查看一些过时的代码，这些代码使用`getaddrinfo`并确定主机名信息，然后`getnameinfo`回退到如果失败。`gethostname``gethostbyname``getnameinfo`

现在，这对我来说似乎是错误的。我正在尝试了解代码的意图，以便提出建议。我不想在这里重新发布整个代码，因为它又长又复杂，但我会尝试总结一下：

据我所知，这段代码的重点是生成一个字符串，另一个进程可以使用该字符串连接到侦听套接字。这似乎不仅适用于本地进程，也适用于远程主机连接回这台计算机。

所以有问题的代码基本上是在做以下事情：

*   `getaddrinfo(node = NULL, service = port, hints.ai_flags = AI_PASSIVE, ai);`-- 这会得到一个可能的参数列表，`socket()`可以与`bind()`.
*   浏览结果列表并创建一个套接字。
*   第一次成功创建套接字时，将其选为“已使用” `addrinfo`。
*   对于`ai_addr`选定的`addrinfo`，调用`getnameinfo()`以获取关联的主机名。
*   如果失败，调用`gethostname()`，然后查看`gethostbyname()`结果。

我认为这是错误的有几个原因，但我想验证我的逻辑。首先，从一些实验看来，`getnameinfo()`这里几乎总是失败。我想输入地址是未知的，因为它是一个监听套接字，而不是一个目的地，所以从这个角度来看，它不需要一个有效的 IP。然后，调用`gethostname()`并将结果传递给`gethostbyname()`几乎总是返回与`gethostname()`自身相同的结果。换句话说，它只是验证本地主机名，对我来说似乎毫无意义。这是有问题的，因为远程主机甚至不一定可以使用它，是吗？

不知何故，我认为尝试在子网上确定您自己的主机名的整个想法可能不是那么有用，而是您必须向另一台主机发送一条消息并查看他们认为它是什么 IP 地址。（不幸的是，在这种情况下这没有意义，因为我不知道该程序级别的其他对等方。）例如，本地主机可能有多个 NIC，因此有多个 IP 地址，因此尝试确定单个主机地址对是无意义的。（正确的解决方法是`bind()`同时收听*所有* `addrinfo`结果吗？）

我还注意到，只需将名称传递给`getaddrinfo()`并设置`AI_CANONNAME`标志即可解析名称，这意味着该`getnameinfo()`步骤可能是多余的。但是，我想这里没有这样做，因为他们试图在不提供先验信息的情况下确定主机名的某种公正视图。当然，它失败了，他们最终还是使用了`gethostname()`！我还尝试向 提供“localhost” `getaddrinfo()`，它会在 ai_canonname` 中报告 Linux 下的主机名，但在 OS X 上只会产生“localhost”，所以它不是那么有用，因为这应该是跨平台的。

我想总结一下，我的问题是，在现代套接字编程中，如果存在一个可以向子网对等方宣布的本地主机名，那么*正确的方法是什么？*我倾向于用简单地返回结果来替换这段代码`gethostname()`，但我想知道是否有更合适的解决方案使用现代调用，如`getaddrinfo()`.

如果答案是没有办法做到这一点，我将不得不使用`gethostname()`反正，因为我必须在这里返回一些东西，否则会破坏 API。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T03:28:40.870

我认为你应该看看[Ulrich Drepper](http://www.akkadia.org/drepper/userapi-ipv6.html)关于 IPv6 编程的文章。它相对较短，可能会回答您的一些问题。我发现它真的很有用。我发布此链接，因为没有（至少）伪代码很难回答您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T04:08:32.733

如果我没看错，您只想获得一个非本地主机套接字地址，该地址可能会成功创建本地套接字，并让远程主机重新连接。

我有一个我写的函数，你可以引用它，叫做“GetBestAddressForSocketBind”。你可以从我的 GitHub 项目页面上得到[它](https://github.com/jselbie/stunserver/blob/master/networkutils/adapters.cpp#L76)。您可能需要引用父目录中的一些代码。

该代码本质上只是使用[getifaddrs](http://www.kernel.org/doc/man-pages/online/pages/man3/getifaddrs.3.html)来枚举适配器并选择第一个“启动”的适配器，而不是环回/本地并且具有所需地址系列（AF_INET 或 AF_INET6）的 IP 地址。

希望这可以帮助。

# php - 为什么不使用 Jquery 发送此 POST？

> ID：12274029
> 
> 赞同：0
> 
> 时间：2012-09-05T03:16:03.313
> 
> 标签：php, jquery, html

我有一个表格，我想用 POST 提交。当我去捕捉 POST 变量时，没有发送任何内容。

```
<?php require_once("../includes/initialize.php"); ?>
<html><head>
<link href="css/style.css" rel="stylesheet" type="text/css" />
<script src="jquery-1.8.1.min.js" type="text/javascript"></script>
<script type="text/javascript">
$(document).ready(function(){
    $('form').submit(function (e) {
        var $this = $(this);
        e.preventDefault(); // This prevents the form submission.

        $("#messageSent").show("slow");
        $this.closest('#contactForm').slideUp('slow', function () {
           $this[0].submit(); // Actual submission.
        });                
    });

    $("#contactLink").click(function(){
        if ($("#contactForm").is(":hidden")){
            $("#contactForm").slideDown("slow");
        }else{
            $("#contactForm").slideUp("slow");
        }
    });

});
</script></head><body>
<?php 
if(isset($_POST['signupSubmit'])){
echo "Post is set";
echo $_POST['name'], "<br />";
echo $_POST['email'];
}else{
echo "post is not set";
}
if(isset($_POST['signupSubmit'])){
    $signup = new Signup();
    $signup->name = $_POST['name'];
    $signup->email = $_POST['email'];
    if($signup->save()) {
        $session->message("We will contact you with details.");
    } else {
        $session->message("Failed", $signup->errors);
    }
}
echo output_message($message);
?>
    <div id="contactFormContainer">
        <div id="contactLink"></div>
        <div id="contactForm">
            <form action="test2.php" enctype="multipart/form-data" method="post">
            <fieldset>
                <label for="name">Name *</label>
                <input id="name" type="text" name="name" />
                <label for="email">Email address *</label>
                <input id="email" type="text" name="email" />
                <input id="sendMail" type="submit" name="signupSubmit" />
                <span id="messageSent"></span>
            </fieldset>
            </form>
        </div>
    </div>

</body>
</html> 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T03:19:23.480

那是因为当您使用它提交表单时，`$this[0].submit();`它仍然运行提交处理程序，它无条件地阻止表单提交。设置一些标志，以便表单在动画后提交。

```
$('form').submit(function (e) {
    var $this = $(this);
    if (!$this.data('afteranimation')){
        $("#messageSent").show("slow");
        $this.closest('#contactForm').slideUp('slow', function () {
            $this.data('afteranimation', true);
            $this.submit(); // Actual submission.
        });                
        e.preventDefault(); // This prevents the form submission.
    }

}); 
```

# reportviewer - 如何隐藏 WinForms ReportViewer 中的 + 号？

> ID：12274034
> 
> 赞同：1
> 
> 时间：2012-09-05T03:16:51.687
> 
> 标签：reportviewer

我对reportviewer有点陌生，所以我有一个问题可以解决我对此的疑问。我创建了一个 DataSet 并使用 DataSet 绑定表，并创建了一个报告并使用 reportviewer 显示数据。我似乎无法解决的问题来了。下面是我给大家看的图片。

![在此处输入图像描述](../Images/b406a31343a2af83c171c2e15a6b07d6.png)

注意到框中的 + 号了吗？如何让reportviewer 不显示+ 号并立即显示我输入的所有数据。我需要点击几次才能看到reportviewer中的全部数据，如下图所示。

![在此处输入图像描述](../Images/5f78c5ba27bb53e5436d7cec979cd99d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T04:09:42.913

我刚刚找到了这个疑问的答案。这是在创建时取消选中“展开/折叠”组复选框。

# sql-server-2008 - 在下面使用此查询更新列

> ID：12274035
> 
> 赞同：0
> 
> 时间：2012-09-05T03:17:05.150
> 
> 标签：sql-server-2008, sql-update

我正在尝试更新一个列，该列是另一个列的累积总和..

这是我对累计金额的查询。现在我需要在我的表中更新它。请就此提出建议。

```
SELECT s.[MM], s.[ProjectID], s.[Total_To_Bill],
    ISNULL((
        SELECT SUM(SS.[Total_To_Bill])
        FROM @mtss1 SS WHERE SS.[ProjectID] = s.[ProjectID] 
            AND SS.MM <= S.MM), 0) AS [ProjectedBillable] FROM @mtss1 AS s 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T15:12:35.477

假设 MM 是每一行的唯一键，以下实现了您想要的：

```
with toupdate as (
     SELECT s.[MM],s.[ProjectID], s.[Total_To_Bill],
             Isnull((select SUM(SS.[Total_To_Bill])
                     FROM @mtss1 SS 
                     WHERE  SS.[ProjectID] = s.[ProjectID] and SS.MM <= S.MM) ,0
                    ) As [ProjectedBillable]
     From @mtss1 As s
    )
update t
    set t.cumsum = toupdate.ProjectedBillable
    from toupdate
    where t.mm= toupdate.MM and t.MM 
```

如果 MM 没有定义每一行，那么你需要一个列或列的组合来定义。

# git - Cannot change a file to untracked

> ID：12274038
> 
> 赞同：2
> 
> 时间：2012-09-05T03:17:43.713
> 
> 标签：git

I have tried reset but it doesn't work.how to change a file to untracked?

```
git status
   untracked files:
   bin
   gen

git add gen
git status
   untracked files:
   bin

git reset gen
git status
   untracked files:
   bin 
```

it doesn't work.is the command right?how to change a file to untracked?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T03:29:48.450

```
git rm --cache gen 
```

does not delete the file, but change to untracked

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T03:20:23.423

Did you try using ?

```
git rm gen 
```

I think that is what you want. Or you can simply rm the file. This will remove the file, but if it is on a different branch then you change branch and it will return. Alternatively you could mv the file out of the tracked directory if you are worried about losing it ie.

```
mv gen /tmp 
```

I also recommend using gitx app strongly you can just shift things from stagged to unstagged with a double click.

# perl - 有什么方法可以在 Perl 上通过安全连接设置 LDAP 服务器？

> ID：12274043
> 
> 赞同：1
> 
> 时间：2012-09-05T03:18:31.083
> 
> 标签：perl, ldap

目前我正在使用 Net::LDAP::Server 来设置我的服务器，但它不够安全。是否有任何模块或方法可以让我通过 TLS 或其他安全连接设置 LDAP 服务器？

我刚刚找到了许多有关如何连接到安全 ldap 服务器的信息，但找不到如何设置安全 ldap 服务器。任何人都可以提供一些建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T04:18:26.697

LDAPS 连接如何工作

LDAPS 是一个非官方的协议。LDAP 之于 HTTPS 之于 HTTP，即在与端口 636（默认情况下）的安全 SSL（“安全套接字层”）连接上运行的完全相同的协议（但在本例中为 LDAPv2 或 LDAPv3）。

并非所有服务器都将配置为侦听 LDAPS 连接，但如果这样做，它通常位于与普通纯文本 LDAP 端口不同的端口上。

使用 LDAPS 可以潜在地解决上述漏洞，但您应该知道，简单地“使用”SSL 并不是自动使您的系统“安全”的灵丹妙药。

首先，LDAPS 可以解决验证您是否连接到正确服务器的问题。当客户端和服务器连接时，它们会执行特殊的 SSL“握手”，其中一部分涉及服务器和客户端交换加密密钥，这些密钥使用 X.509 证书进行描述。如果客户端希望确认它连接到正确的服务器，它需要做的就是验证握手中发送的服务器证书。这是通过两种方式完成的：

检查证书是否由您信任的人签署（信任），并且证书尚未被吊销。例如，服务器的证书可能已由 Verisign (www.verisign.com) 签名，而您决定要信任 Verisign 来签署合法证书。检查服务器证书的 DN 中最不重要的 cn RDN 是否是您在创建 LDAPS 对象时连接到的主机名的完全限定主机名。例如，如果服务器是 ，则要检查的 RDN 是 cn=ldap.example.com。您可以在创建 Net::LDAPS 对象时使用 cafile 和 capath 选项，并将验证选项设置为“require”。

为防止黑客“嗅探”您的连接上的密码和其他信息，您还必须确保 SSL 连接使用的加密算法足够好。这也是由 SSL 握手决定的——如果客户端和服务器不能就可接受的算法达成一致，则不会建立连接。

Net::LDAPS 默认使用所有内置在您的 OpenSSL 副本中的算法，除了那些被认为使用“低”强度加密和使用导出强度加密的算法。您可以在使用 'ciphers' 选项创建 Net::LDAPS 对象时覆盖它。

建立安全连接后，您还应该检查实际使用的加密算法是否是您认为可以接受的加密算法。在现场观察到损坏的服务器会“故障转移”并为您提供未加密的连接，因此您应该检查一下。

LDAP 和 TLS 如何工作

SSL 可以很好地解决许多网络安全问题，但它不是标准。IETF 纠正了 SSL 机制中的一些缺陷，并发布了一个名为 RFC 2246 的标准，该标准描述了 TLS（“传输层安全性”），它只是 SSL 的清理和标准化版本。

您只能将 TLS 与 LDAPv3 服务器一起使用。这是因为 LDAP 和 TLS 的标准 (RFC 2830) 要求可以根据需要将普通 LDAP 连接（即端口 389）从纯文本切换到 TLS 连接。切换机制使用特殊的扩展 LDAP 操作，由于这些在 LDAPv2 中是不合法的，因此您只能在 LDAPv3 连接上切换到 TLS。

因此，将 TLS 与 LDAPv3 一起使用的方式是使用 Net::LDAP::new() 创建正常的 LDAPv3 连接，然后使用 Net::LDAP::start_tls() 执行切换。start_tls() 方法采用与 Net::LDAPS::new() 几乎相同的参数，因此请查看上面的详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T11:16:20.857

好吧，也许 LDAPS 不是 RFC，但要说它不是标准或安全的，肯定有点牵强。

所有 LDAP 服务器供应商都支持 LDAPS。LDAPS 至少与 HTTPS 一样安全。与所有 SSL（或 TLS）一样，安全弱点是证书的处理方式。

LDAP 服务器供应商和客户当然比 TLS 更支持 LDAPS。例如，Active Directory 不支持 TLS。查询supportedExtention 1.3.6.1.4.1.1466.20037 的rootDSE 将（应该）显示任何特定LDAP 服务器是否支持TLS。

我们在以下网址有一些示例： http: [//ldapwiki.willeke.com/wiki/Perl%20LDAP%20Samples](http://ldapwiki.willeke.com/wiki/Perl%20LDAP%20Samples)。

# windows - 上传代码到github

> ID：12274044
> 
> 赞同：-1
> 
> 时间：2012-09-05T03:18:58.537
> 
> 标签：windows, linux, git

我在 github 上创建了一个名为 appengine-testers 的存储库。它是一个公共存储库。虽然我很容易设法创建了一个存储库，但我不知道如何在那里存储代码。我需要上传代码/文件夹吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T07:42:10.827

有多种选择可以做到这一点，我将简单地告诉一个简单的选择。

```
git clone ssh-path-to-project 
```

它在项目中创建用于引用的 .git 文件夹。

```
cd project 
```

从任何位置复制整个项目代码并将其粘贴到此文件夹中。

现在添加所有未跟踪的文件。

```
git add .
git commit -am <"commit message"> 
```

或者

```
git commit -a 
```

哪个会自动进行更改。最后

```
git push 
```

它将整个代码推送到存储库

一个更简单的选择是做

```
git init 
```

在项目文件夹中，然后更改项目文件夹内创建的 .git 文件夹中的远程 url

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T03:24:55.140

`git@github.com:yourusername/appengine-testers.git`一旦您在 github 上创建了 repo，它就会为您提供一个带有推送访问权限的 URL（看起来有点像）。从那里，您只需从本地存储库推送到该 URL。

如果将该 URL 添加为远程，可能会更容易。通常你会称之为“起源”。

# mysql - 关闭 mysql 不安全语句警告

> ID：12274047
> 
> 赞同：7
> 
> 时间：2012-09-05T03:19:02.310
> 
> 标签：mysql, insert, primary-key, composite-primary-key

我正在使用 log-error 将警告/错误写入文件。当我执行 INSERT IGNORE..SELECT 语句时，它只是继续写这个警告信息。

```
120905  3:01:23 [Warning] Unsafe statement written to the binary log using statement format since BINLOG_FORMAT = STATEMENT. INSERT IGNORE... SELECT is unsafe because the order in which rows are retrieved by the SELECT determines which (if any) rows are ignored. This order cannot be predicted and may differ on master and the slave. 
```

我想停止 mysql logwriter 一遍又一遍地写上面的错误。（我看不到其他日志，因为它们填写了整个日志文件......）

首先，我将 (a, b, c) 插入到表中。c在表中应该是唯一的，用a、b来选择。查询将是这样的

```
SELECT c FROM table WHERE a=value1 AND value2<b AND b<value3 
```

我的插入查询是

```
INSERT IGNORE INTO table VALUES (,,),(,,)...(,,) 
```

我以为我可以更改查询不产生警告，但我的数据包含唯一字段，我需要保证该字段在表中是唯一的。每隔几秒钟应该插入500~2000行，所以我需要做批量插入。

如果已经插入了几千万行，我需要在几秒钟内再插入 2000 行。如何在不使用警告填充日志文件的情况下将它们安全地插入表中？

（我无法关闭二进制日志，因为我需要使用 mysql 复制。）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-14T19:45:44.540

您可以使用

```
SET GLOBAL LOG_WARNINGS = 0 
```

关闭日志记录和

```
SET GLOBAL LOG_WARNINGS = 1 
```

将其重新打开。我个人的建议是用这些来包装有问题的查询，而不是全局设置它，以便您可以跟踪其他查询是否也会导致问题。

请注意，旧版本的 MySQL 不支持此功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-11-16T13:58:37.887

我认为这个问题仍然悬而未决。利用 `set max_error_count=0;` `your unsafe queries;` `set max_error_count=64;`

在您要运行的查询之前，它是一个会话变量，因此您无需成为超级用户即可使用。不仅，当你调用 show warnings limit 5 时不会发出警告；但此类警告未在 mysql 日志文件中报告。您也可以在存储过程中使用它。在您知道不安全的查询之后，您可以将此变量恢复为其原始值。

# cocoa-touch - 处理没有日期的时间

> ID：12274050
> 
> 赞同：1
> 
> 时间：2012-09-05T03:19:16.193
> 
> 标签：cocoa-touch, time, nsdate

对象表示绝对日期和时间，例如 2012年`NSDate`9 月 4 日，晚上 10:00 CDT。虽然当事件确实在某个时刻确实发生时这很好用，`NSDate`但当您处理重复发生的事件时，处理起来就麻烦多了。例如，我目前正在开发一个存储企业营业时间的应用程序。大多数企业都有每周计划，这意味着我想存储每个工作日的时间，无论日期如何。

有几种解决方案：创建一个额外的实体（我正在使用核心数据），小时，具有工作日、小时和分钟的属性，然后以这种方式计算出来。这可以用于简单的显示，但我还要添加一个“状态”（例如“打开到 x”、“在 y 分钟内关闭”或“将在 z 处打开”）。这意味着我要么必须创建`NSDate`对象来进行比较，要么获取 current 的 weekday、hour 和 minute 属性`NSDate`。

另一种选择是为`NSDate`每个企业存储两个 s（打开和关闭），忽略实际日期，仅使用工作日、小时和分钟属性。我已经尝试过了，但是为了能够比较日期，我仍然必须操作`NSDate`对象。

这些是我想出的解决方案。两者都需要大量的数学运算，并涉及大量如果、但是和可能。简单地拥有某种我可以做所有事情的“NSTime”对象真的很容易，但这并不（似乎）存在。

有没有其他人遇到过同样的问题并找到了更好的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T03:30:51.333

我认为你最好创建自己的抽象。这将更适合您要解决的问题。一些帮助提示：

*   Fowler 的[日历重复事件 (pdf)](http://martinfowler.com/apsupp/recurring.pdf)模式。
*   [ice_cube](https://github.com/seejohnrun/ice_cube)：用于重复事件的 ruby​​ 库（用于设计理念）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T04:01:08.033

> 简单地拥有某种我可以做所有事情的“NSTime”对象真的很容易，但这并不（似乎）存在。

一种选择是使用 NSDateComponents，您可以在其中仅存储您感兴趣的日期部分，例如小时、分钟和秒。

由于您真的只想存储一天中的某个时间，另一种选择是创建您自己的 Time 类。NSDate 将时刻存储为单个数字：自固定时间以来的秒数，即纪元。您的 Time 类几乎可以做同样的事情，除了它将使用午夜作为参考点。但是，如果您无法指出一天结束后的时间，您可能会遇到问题。例如，如果餐厅一直营业到凌晨 2 点，您可能希望能够表示相对于餐厅营业当天的情况。也许更好的选择是让您的 Time 类在内部使用 NSDate，但始终使用固定的开始日期。

# php - 从网站调用带有许多参数的外部程序

> ID：12274054
> 
> 赞同：0
> 
> 时间：2012-09-05T03:19:30.580
> 
> 标签：php, html, external, argument-passing

我是网络编程的新手，也许这个问题似乎很明显。我在网站上有一个表格和一个按钮。当按下按钮时，我想调用位于服务器上的外部程序（Linux 可执行文件），并将页面上填写的表单中的所有文本数据作为参数传递给该程序，然后将输出返回给用户。例如：（./myprogram 用户名 userjob ...）。

如何实施？我应该使用什么语言？Javascript、PHP、Python？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T03:21:07.267

你可以简单地使用 php：

```
<?php exec("./yourscript.sh"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T03:24:05.710

[您可以使用系统](http://php.net/system)调用执行程序，并将用户发布的参数添加到程序的末尾。它看起来像这样：

```
$theResults = system(escapeshellcmd('./myProgram '.$_REQUEST['arguments']));
echo $theResult; 
```

一个完整的工作示例是这样的：

```
<?php
if(!empty($_REQUEST['arguments'])){
    $results = system(escapeshellcmd('./myProgram '.$_REQUEST['arguments']));
}
?>

<html>
<head>
    <title></title>
</head>
<body>
    <?php
        if(!empty($results)){
            echo $results;
        }
    ?>
    <form method="post" action="">
        Your Arguments: <input type="text" name="arguments" value="" /><input type="submit" name="Submit" value="Submit" />
    </form>
</body>
</html> 
```

# java - 为 java 6 和 7 组织 github 存储库

> ID：12274056
> 
> 赞同：0
> 
> 时间：2012-09-05T03:19:54.637
> 
> 标签：java, github, multiple-versions

我想创建一个 gihub 存储库，它提供的基准代码适用于仅在 JDK 1.7 (Fork/Join) 中可用的并发功能以及在 JDK 1.6 中找到的旧功能。

提供这两种选择对我的需要很重要。

有没有人建议我应该如何构建存储库。

我正计划在它下面调用一个 repo：

```
jdk17
   build
   src
     mycode ...
jdk16
   build
   src
     mycode 
```

请提出任何替代方案，可能使用 Maven 或其他更实用的方法（如果有）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T03:34:51.960

除非您需要同时拥有两个版本的源代码，否则您可以将它们放在单独的分支中。

# python - Python 是否使用链表作为列表？为什么插入慢？

> ID：12274060
> 
> 赞同：14
> 
> 时间：2012-09-05T03:20:18.767
> 
> 标签：python

刚学Python。阅读官方教程。我遇到了这个：

> 虽然从列表末尾追加和弹出很快，但从列表开头插入或弹出很慢（因为所有其他元素都必须移动一个）。

我会猜到像 Python 这样的成熟语言会有各种优化，那么为什么 Python [似乎] 不使用链表来快速插入呢？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-05T03:22:01.390

Python 在内存中使用线性列表布局，因此*索引*速度很快 (O(1))。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-05T03:26:52.707

正如 Greg Hewgill 已经指出的那样，python 列表使用连续的内存块来加快索引速度。[`deque`](http://docs.python.org/library/collections.html#collections.deque)如果您想要链表的性能特征，可以使用 a 。但你最初的前提对我来说似乎有缺陷。到（标准）链表中间的索引插入也很慢。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-05T03:27:19.090

`list`被实现为一个数组列表。如果要频繁插入，可以使用a `deque`（但要注意遍历到中间很费钱）。

或者，您可以使用堆。如果您花时间查看文档，它就在那里。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-09-05T03:29:02.803

Python 所称的“列表”实际上并不是链表。它们更像是数组。请参阅[Python 词汇表中的列表条目](http://docs.python.org/glossary.html#term-list)以及[如何在 Python 中创建数组？](http://docs.python.org/faq/programming.html#what-are-the-rules-for-local-and-global-variables-in-python)来自 Python 常见问题解答。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-07-03T17:40:16.230

Python 列表是使用可调整大小的对其他对象的引用数组来实现的。与链表实现的 O(n) 查找相比，这提供了 O(1) 查找。

请参阅[列表是如何实现的？](https://docs.python.org/2/faq/design.html#how-are-lists-implemented)

正如您所提到的，此实现使插入到 Python 列表的开头或中间的速度变慢，因为插入点右侧的数组中的每个元素都必须移动到一个元素上。此外，有时必须调整数组的大小以容纳更多元素。对于插入链表，您仍然需要 O(n) 时间来找到要插入的位置，但实际插入本身将是 O(1)，因为您只需要立即更改节点中的引用在插入点之前和之后（假设是双向链表）。

因此，让 Python 列表使用动态数组而不是链表的决定与语言实现的“成熟度”无关。在不同的数据结构之间存在简单的权衡，Python 的设计者认为动态数组是总体上最好的选择。他们可能认为索引列表比向列表中插入数据更常见，因此在这种情况下使动态数组成为更好的选择。

有关各种数据结构性能特征的比较，请参阅动态数组维基百科文章中的下表：

[https://en.wikipedia.org/wiki/Dynamic_array#Performance](https://en.wikipedia.org/wiki/Dynamic_array#Performance)

# php - 使用 get 方法和 htaccess 管理友好的 URL

> ID：12274064
> 
> 赞同：0
> 
> 时间：2012-09-05T03:20:58.363
> 
> 标签：php, .htaccess, get

我正在尝试使用 PHP 创建一个友好的 url 管理器。

我的问题是，我有这个网址：

```
mywebsite.com/page.php?var1=value1&var2=value2.....etc 
```

我如何以这种方式获得相同的信息：

```
mywebsite.com/page/var1/value1/var2/value2 
```

var1,var2,etc.. 是动态变量，它们可以有其他动态名称

感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T03:45:18.317

我不明白你需要什么，但我们开始......：

.ht 访问：

```
Options +FollowSymLinks
IndexIgnore */*
DirectoryIndex index.php
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteRule .* index.php [L]
</IfModule> 
```

php:

```
$vars = array();
if(isset($_SERVER['REQUEST_URI'])):
    $tmp = explode('/',$_SERVER['REQUEST_URI']);
    for ($n=0;$n<count($tmp);$n++):
        $vars[$tmp[$n]] = (isset($tmp[$n+1]))?$tmp[$n+1]:NULL;
        $n++;
    endfor;
endif; 
```

你得到了 ：

```
 yourlink.com/var1/value1/var2/value2
 $var[value1] = value1
 $var[value2] = value2 
```

# yii - yii 不翻译韩语

> ID：12274074
> 
> 赞同：0
> 
> 时间：2012-09-05T03:23:30.760
> 
> 标签：yii, localization

在数据库中，我设置了韩语的语言代码 - 'ko'，但是当 yii 打印错误时，这些错误是英语默认值，如下所示：
`이메일 cannot be blank.`.
Semilar with Maori... 那么，这些语言的语言代码到底是什么？
在哪里可以看到 Yii 支持的语言代码列表？谢谢...

# python - 如何对python中元组中的日期进行排序

> ID：12274083
> 
> 赞同：0
> 
> 时间：2012-09-05T03:24:29.447
> 
> 标签：python, sorting, dictionary, date-sorting

我正在尝试对元组字典进行排序，其中第二项包含要排序的日期。字典看起来像这样：

```
time_founded: {Soonr: 2005-5-1, SpePharm: 2006-9-1, and so on...} 
```

现在我正在尝试像这样对日期进行排序：

```
dict = sortedLists[category]    
sortedtime = sorted(dict.iteritems(),  key=lambda  d: map(int, d.split('-'))) 
```

但我收到一个错误，因为它试图对元组（Soonr：2005-5-1）进行排序，而不仅仅是日期。如何更新排序参数以告诉它只查看日期而不是整个元组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T04:06:09.683

试试这个：

```
sortedtime = sorted(dict.iteritems(), key=lambda d: map(int, d[1].split('-'))) 
```

唯一的区别是`[1]`它选择了项目的价值部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T04:04:03.850

不确定您是否可以控制数据结构，但如果可以，请将数据结构的第一个元素更改为您需要排序的日期。Python 按它找到的第一个元素对可迭代对象进行排序，或者，它可以按[您定义的键](http://docs.python.org/dev/howto/sorting.html#key-functions)进行排序。

我建议你把它做成一个元组，里面有一本字典*，*以简化事情：

```
>>> dates = [ ('2006-9-1', {Soonr:'2005-5-1'}),
              ('2006-8-9', {Soonr:'2005-8-28'})
            ]
>>> dates.sort() #will sort by the first element of the list items, if iterable...
>>> dates
[('2006-8-9', {Soonr:'2005-8-28'}), ('2006-9-1', {Soonr:'2005-5-1'})] 
```

# android - 根据当前主屏幕获取部分壁纸

> ID：12274092
> 
> 赞同：0
> 
> 时间：2012-09-05T03:25:22.427
> 
> 标签：android, android-canvas, live-wallpaper

我正在制作一个动态壁纸，可以用各种过渡切换图像。但我只想将过渡应用到用户可以看到的图像部分。并且当过渡完成后，整个壁纸就被绘制出来了。

有任何想法吗？我认为我无法获取用户所在的主屏幕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T16:02:40.743

这可以通过覆盖该`onOffsetsChanged()`方法轻松实现。

# iphone - 我使用 Core Plot 绘制视图，但未找到“CPTAnnotation.h”

> ID：12274096
> 
> 赞同：0
> 
> 时间：2012-09-05T03:26:01.107
> 
> 标签：iphone, ios, core-plot

我最近切换到开发者版本 4.3 并发现 CPTAnnotation.h not found 问题，以前没有。知道我错过了什么。这与coreplot有关。谢谢

# delphi - 如何获取动态创建的计时器标签

> ID：12274098
> 
> 赞同：1
> 
> 时间：2012-09-05T03:26:15.290
> 
> 标签：delphi

如何在处理其到期的函数中获取动态创建的计时器标签？

```
procedure TMainForm.TimerExpired(Sender: TObject);
begin
   // how do I get the tag here? 
```

谁是`Sender`？主要形式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T03:36:38.240

Sender 是指向您的计时器对象的指针，它调用此事件处理程序。

`TTimer(Sender).Tag`计时器的标记值也是如此。

# qtp - 如何在运行时优先考虑库文件顺序

> ID：12274099
> 
> 赞同：0
> 
> 时间：2012-09-05T03:26:16.067
> 
> 标签：qtp

我已经使用下面的代码动态加载了三个库文件。我已经覆盖了 B.vbs 中 A.vbs 的一些功能。所以，我想将优先顺序从“A.vbs->B.vbs->C.vbs”更改为“B.vbs->A.vbs->C.vbs”。

执行以下代码后如何更改库文件（B.vbs）的优先级位置。在 "C:\A.vbs" 之前执行 ExecuteFile "C:\B.vbs" 很容易，但我需要根据用户指定的输入位置更改库的位置。

```
ExecuteFile "C:\A.vbs"  
ExecuteFile "C:\B.vbs"  
ExecuteFile "C:\C.vbs" 
```

-什雷什塔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T07:08:38.587

虽然我无法完全理解您为什么要这样做，但最简单的方法是将您的 Execute 语句包装在 if 或基于用户 I/p 的 switch 语句中。例如

```
select case choice

case 0 : ExecuteFile "C:\A.vbs" 
         ExecuteFile "C:\B.vbs"
         ExecuteFile "C:\C.vbs"

case 1:  ExecuteFile "C:\B.vbs" 
         ExecuteFile "C:\A.vbs"
         ExecuteFile "C:\C.vbs" 
```

等等。

其中“选择”将是用户的输入，它将决定顺序。

如果您希望用户给出确切的序列，您还可以执行以下操作：

```
case "123" : ExecuteFile ... ' Order A, B, C
case "213" : ExecuteFile ... ' Order B, A, C 
```

等等

# android - Android：ProgressDialog，我设置了IndeterminateDrawable(drawable)，但是drawable没有旋转（动画）

> ID：12274101
> 
> 赞同：0
> 
> 时间：2012-09-05T03:26:21.387
> 
> 标签：android, user-interface, progressdialog

我想定制我的`ProgressDialog`，我做了

`setIndeterminateDrawable(context.getResources().getDrawable(R.drawable.processbar_style))`,

这是 R.drawable.processbar_style：

```
<?xml version="1.0" encoding="utf-8"?>
<rotate xmlns:android="http://schemas.android.com/apk/res/android"
    android:drawable="@drawable/processbar"
    android:pivotX="50%"
    android:pivotY="50%" 
 /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T04:50:12.893

像这样以编程方式使用它：

无论您从哪里开始您想要显示进度的工作，定义并启动您的进度对话框

```
 pd=new ProgressDialog(this);
    pd=ProgressDialog.show(*Your_Activity*.this,"","Please wait"); 
```

并在工作完成时结束它。

```
 pd.dismiss(); 
```

它在进度对话框中为我提供了动画进度显示。

# distributed - 多paxos实例

> ID：12274112
> 
> 赞同：1
> 
> 时间：2012-09-05T03:27:45.600
> 
> 标签：distributed, paxos

在维基百科[http://en.wikipedia.org/wiki/Paxos_(computer_science)](http://en.wikipedia.org/wiki/Paxos_(computer_science))中，提案编号和实例编号不一致。
消息流：Multi-Paxos，稳态
| X--------->|->|->| | | Accept!(N,I+1,W)

消息流：Collapsed Multi-Paxos，稳定状态
| X->|->| 接受！(N+1,I,W)

一个是实例编号的增量，一个是选票编号，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T11:45:35.440

很好，以下是*应该*发生的事情：

*   在 Multi-Paxos 协议的 Start 阶段，发送一个 Promise 消息：这里你将选票号码 N 增加 1；
*   在 Multi-Paxos 协议的稳定阶段，发送一个 Accept 消息：这里将实例编号 I 增加 1。

因此，对于 Multi-Paxos 和 Collapsed Multi-Paxos 稳态，正确答案是 Accept(N,I+1,W)。

# javascript - 在javascript中对函数调用进行排序-回调是唯一的方法吗？

> ID：12274114
> 
> 赞同：10
> 
> 时间：2012-09-05T03:28:08.520
> 
> 标签：javascript, callback, jquery-callback, sequential

例如，我通读了像[这样](https://stackoverflow.com/questions/1859185/how-to-force-sequential-javascript-execution)的各种线程。

但它真的让我无法完成以下任务：

我有 4 个功能，并希望它们依次发生。请注意，它们的顺序不正确，以表达我的观点。我想要输出“1,2,3,4'的结果

```
function firstFunction(){
  // some very time consuming asynchronous code...
  console.log('1');
}
function thirdFunction(){
  // definitely dont wanna do this until secondFunction is finished
  console.log('3');
}
function secondFunction(){
  // waits for firstFunction to be completed
  console.log('2');
}
function fourthFunction(){
  // last function, not executed until the other 3 are done.
  console.log('4');
} 
```

我试图弄清楚回调但迷路了:(

没有一些简单的方法可以做到这一点吗？就像循环遍历一个数组...

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-05T03:33:53.953

[这是开始使用jQuery Deferred](http://api.jquery.com/category/deferred-object/)的好机会。

除了基于回调的解决方案之外，代码可读性强、灵活且可维护性强

[http://jsfiddle.net/zerkms/zJhph/](http://jsfiddle.net/zerkms/zJhph/)

```
function firstFunction(){
  var d = $.Deferred();
  // some very time consuming asynchronous code...
  setTimeout(function() {
    console.log('1');
    d.resolve();
  }, 1000);
  return d.promise();
}
function thirdFunction(){
  var d = $.Deferred();
  // definitely dont wanna do this until secondFunction is finished
  setTimeout(function() {
    console.log('3');
    d.resolve();
  }, 1000);
  return d.promise();
}
function secondFunction(){
  var d = $.Deferred();
  setTimeout(function() {
    console.log('2');
    d.resolve();
  }, 1000);
  return d.promise();
}
function fourthFunction(){
  var d = $.Deferred();
  // last function, not executed until the other 3 are done.
  setTimeout(function() {
    console.log('4');
    d.resolve();
  }, 1000);
  return d.promise();
}

firstFunction().pipe(secondFunction).pipe(thirdFunction).pipe(fourthFunction);​ 
```

PS：作为我使用的异步代码的示例`setTimeout`。最主要的是，在异步部分的最后，您需要调用`d.resolve()`以继续链接方法。

进一步阅读：http: [//joseoncode.com/2011/09/26/a-walkthrough-jquery-deferred-and-promise/](http://joseoncode.com/2011/09/26/a-walkthrough-jquery-deferred-and-promise/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T03:32:01.897

这个想法是你会做类似以下的事情，这样一旦第一个函数完成运行，它就会知道要运行什么，而不是你必须在函数之外自己弄清楚：

```
function firstFunction(callback){
  // some very time consuming asynchronous code...
  console.log('1');

  return callback(function(){
    alert("Second function finished.");
    return true;
  });
}
function secondFunction(callback){
  // waits for firstFunction to be completed
  console.log('2');

  return callback();
}

firstFunction(secondFunction); 
```

[`.apply()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)也抬头看[`.call()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T03:43:17.737

如果我使用回调，我的工作解决方案现在看起来像这样：

```
 one(two);
    function one(callb){
        console.log('1');
        callb(three);
    }
    function four(){
        console.log('4');
    }
    function two(callb){
        console.log('2');
        callb(four);
    }
    function three(callb){
        console.log('3');
        callb();
    } 
```

我觉得那很可怕。如果有超过 2-3 个序列，我应该如何跟踪这些东西？不寒而栗...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T20:47:06.110

已经有一段时间了，我注意到`deferreds`jquery 文档中的一些内容，特别是`when`核心 API 函数。

```
$.when( $.ajax("test.aspx") ).then(function(ajaxArgs){ 
     alert(ajaxArgs[1]); /* ajaxArgs is [ "success", statusText, jqXHR ] */
}); 
```

取自[http://jqapi.com/#p=jQuery.when的代码示例](http://jqapi.com/#p=jQuery.when)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-03T18:18:22.533

我玩过 Promise、Sequence、Exception、Callback 以了解它是如何工作的，最后制作了这段代码。

使用回调调用函数并将结果作为参数依次发送到另一个函数并捕获错误。

```
function firstFunction(par) {
    return new Promise(function (resolve, reject) {
        console.log("start " + par);
        setTimeout(function (par) {
            console.log(par);
            resolve(par + 1);
        }, 1000, par);
    });
}
function secondFunction(par) {
    return new Promise(function (resolve, reject) {
        console.log("start " + par);
        setTimeout(function (par) {
            console.log(par);
            try{
                throw "Let's make an error...";
            }
            catch(err)
            {
                reject(err);
            }
            resolve(par + 1);
        }, 1000, par);
    })
}
function thirdFunction(par) {
    return new Promise(function (resolve, reject) {
        console.log("start " + par);
        setTimeout(function (par) {
            console.log(par);
            resolve(par + 1);
        }, 1000, par);
    });
}

function CatchError(error) {
    console.log("Exception: " + error);
}

//Break all chain in second function
function ChainBrake() {
    firstFunction(1)
    .then(secondFunction)
    .then(thirdFunction)
    .catch(CatchError);    
}

//Log error and continue executing chain
function ChainContinue() {
    firstFunction(1)
    .catch(CatchError)
    .then(secondFunction)
    .catch(CatchError)
    .then(thirdFunction)
    .catch(CatchError);
} 
```

# perl - 如何在 perl scipt 中运行 shell 命令并将结果返回到我的 perl 脚本中的变量（而不将结果返回到 unix）

> ID：12274118
> 
> 赞同：1
> 
> 时间：2012-09-05T03:28:49.840
> 
> 标签：perl, unix, command

> **可能重复：**
> [如何将 Perl 的系统函数输出存储到变量中？](https://stackoverflow.com/questions/2415954/how-can-i-store-perls-system-function-output-to-a-variable)

我试图在我的 Perl 脚本中运行一个 shell 命令。一个例子如下：

```
system ("ls -al"); 
```

结果在 Unix 上打印得很好。

有没有办法`$string`在我的 Perl 脚本中返回结果而不是在 Unix 上返回结果？

我不希望结果打印在我的 Unix 上。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-05T03:44:18.987

使用反引号：

```
$string = `ls -al`; 
```

'qx' 定界符是这个的同义词：

```
$string = qx{ls -al}; 
```

这[在](http://perldoc.perl.org/perlop.html)[perlop 手册页](https://perldoc.perl.org/perlop.html)中有记录。

或者，您可以使用`open`'|' 像这样：

```
open my $filehandle, "ls -al|" or die "Open failed!\n";
while(<$filehandle>) {do_something($_);}
close $filehandle; 
```

在这种情况下，您正在打开附加到命令输出的管道的文件句柄（基本上将输出视为文件）。如果该命令需要很长时间或产生的输出多于您一次存储在内存中的数量，这将非常方便。这在[Perl 开放手册](http://perldoc.perl.org/functions/open.html)中有记录。

# types - 列数据类型

> ID：12274119
> 
> 赞同：0
> 
> 时间：2012-09-05T03:28:52.923
> 
> 标签：types, schema, h2

我有一个应用程序，它必须在运行时为不同的任务加载各种 H2 数据库文件，并且必须能够验证加载的数据库是否符合预定义的模式。我的意思是我查询信息模式以检查是否存在特定表以及这些表是否包含正确定义的列（例如数据类型、长度、索引等）。

我的问题是关于 H2 的内部数据类型以及它们如何映射到`INFORMATION_SCHEMA.COLUMNS`. 例如，我是否更正了该表中的 data_type 列正确反映了在表创建期间给出的列数据类型，例如

```
CREATE TABLE test (id int primary key, some_string varchar(32) ... ) 
```

int 映射到 4 的数据类型？是否有数据类型到内部代码的映射列表，这些是否会改变？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T04:45:52.033

`DATA_TYPE`表表中的列`INFORMATION_SCHEMA.COLUMNS`映射到`DATA_TYPE`方法的第 5()列[`DatabaseMetaData.getColumns`](http://docs.oracle.com/javase/6/docs/api/java/sql/DatabaseMetaData.html#getColumns%28java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%29)。根据规范，这需要是一个整数，如[`java.sql.Types`](http://docs.oracle.com/javase/6/docs/api/java/sql/Types.html). 常数的[`4`意思`INTEGER`](http://docs.oracle.com/javase/6/docs/api/constant-values.html#java.sql.Types.INTEGER)。

这是 JDBC 标准的一部分，不会改变。

# java - Java迭代与递归

> ID：12274120
> 
> 赞同：3
> 
> 时间：2012-09-05T03:28:53.070
> 
> 标签：java, recursion

谁能解释为什么以下递归方法比迭代方法更快（两者都在进行字符串连接）？迭代方法不是要打败递归方法吗？加上每个递归调用都会在堆栈顶部添加一个新层，这可能会非常低效。

```
 private static void string_concat(StringBuilder sb, int count){
        if(count >= 9999) return;
        string_concat(sb.append(count), count+1);
    }
    public static void main(String [] arg){

        long s = System.currentTimeMillis();
        StringBuilder sb = new StringBuilder();
        for(int i = 0; i < 9999; i++){
            sb.append(i);
        }
        System.out.println(System.currentTimeMillis()-s);
        s = System.currentTimeMillis();
        string_concat(new StringBuilder(),0);
        System.out.println(System.currentTimeMillis()-s);

    } 
```

我多次运行程序，递归的总是比迭代的快 3-4 倍。导致迭代速度变慢的主要原因可能是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-05T03:34:48.657

见[我的评论](https://stackoverflow.com/questions/12274120/java-iterative-vs-recursive#comment16460153_12274120)。

> 确保您学习如何正确地进行微基准测试。您应该为这两者的多次迭代计时，并为您的时间平均这些迭代。除此之外，您应该确保虚拟机不会通过不编译第一个来给第二个带来不公平的优势。
> 
> 事实上，默认的 HotSpot 编译阈值（可通过 配置`-XX:CompileThreshold`）是 10,000 次调用，这可能解释了您在此处看到的结果。HotSpot 并没有真正做任何尾部优化，所以递归解决方案更快是很奇怪的。`StringBuilder.append`主要是为了递归解决方案而编译为本机代码是很合理的。

我决定重写基准测试并亲自查看结果。

```
public final class AppendMicrobenchmark {

  static void recursive(final StringBuilder builder, final int n) {
    if (n > 0) {
      recursive(builder.append(n), n - 1);
    }
  }

  static void iterative(final StringBuilder builder) {
    for (int i = 10000; i >= 0; --i) {
      builder.append(i);
    }
  }

  public static void main(final String[] argv) {
    /* warm-up */
    for (int i = 200000; i >= 0; --i) {
      new StringBuilder().append(i);
    }

    /* recursive benchmark */
    long start = System.nanoTime();
    for (int i = 1000; i >= 0; --i) {
      recursive(new StringBuilder(), 10000);
    }
    System.out.printf("recursive: %.2fus\n", (System.nanoTime() - start) / 1000000D);

    /* iterative benchmark */
    start = System.nanoTime();
    for (int i = 1000; i >= 0; --i) {
      iterative(new StringBuilder());
    }
    System.out.printf("iterative: %.2fus\n", (System.nanoTime() - start) / 1000000D);
  }
} 
```

这是我的结果...

> ```
> C:\dev\scrap>java AppendMicrobenchmark
> recursive: 405.41us
> iterative: 313.20us
> 
> C:\dev\scrap>java -server AppendMicrobenchmark
> recursive: 397.43us
> iterative: 312.14us 
> ```

这些是每种方法平均超过 1000 次试验的时间。

从本质上讲，您的基准测试的问题在于它不会在多次试验（[大数定律](http://en.wikipedia.org/wiki/Law_of_large_numbers)）中取平均值，并且它高度依赖于各个基准测试的顺序。我给你的原始结果：

> ```
> C:\dev\scrap>java StringBuilderBenchmark
> 80
> 41 
> ```

这对我来说意义不大。HotSpot VM 上的递归很可能不会像迭代那样快，因为到目前为止它还没有实现任何类型的尾部优化，你可能会发现它用于函数式语言。

现在，这里发生的有趣的事情是默认的 HotSpot JIT 编译阈值为 10,000 次调用。您的迭代基准测试很可能在编译*之前* 大部分时间都在执行。`append`另一方面，您的递归方法应该相对较快，因为它很可能会在编译`append` *后使用。*为了消除这种影响结果，我通过`-XX:CompileThreshold=0`并发现......

> ```
> C:\dev\scrap>java -XX:CompileThreshold=0 StringBuilderBenchmark
> 8
> 8 
> ```

因此，归根结底，它们的速度大致相等。但是请注意，如果您以更高的精度进行平均，迭代似乎会更快一些。顺序也可能对我的基准测试产生影响，因为后一个基准测试将具有 VM 为其动态优化收集更多统计数据的优势。

# scala - 如何恢复（垃圾收集）在 scala repl 中分配的内存？

> ID：12274124
> 
> 赞同：3
> 
> 时间：2012-09-05T03:29:34.517
> 
> 标签：scala, memory, garbage-collection, read-eval-print-loop

我有一个带有大型不可变对象的程序，该对象在执行特定操作时返回其自身的修改版本。我尝试在 sbt 控制台中对其进行测试，例如 var myObj = getInitialObject(); 然后反复调用 myObj = myObj.getNewOne();

没有对旧对象的引用，但内存似乎没有被释放。最终我得到一个 OutOfMemoryError: GC 开销限制超出。我能够在 scala repl 提示符下通过一个简单的示例重现该问题：

```
scala> val foo = List.fill(1000000) { new Object() }
foo: List[java.lang.Object] = List(java.lang.Object@14fd510, java.lang.Object@202d0e1c, java.lang.Object@6df960c4, java.lang.Object@f401c44, java.lang.Object @39ffbc2e，java.lang.Object@449b8dc1，java.lang.Object@40779d17，java.lang.Object@6cea7211，java.lang.Object@13e6f1f4，java.lang.Object@1f16d461，java.lang.Object@13d13c39 , java.lang.Object@dc8cc59, java.lang.Object@79dfee20, java.lang.Object@5c8ab562, java.lang.Object@168a6465, java.lang.Object@57c52e72, java.lang.Object@526c6b62, java .lang.Object@4bfe1934, java.lang.Object@1728cbe6, java.lang.Object@776274ea, java.lang.Object@60e9ebe1, java.lang.Object@1d7d327c, java.lang.Object@67d7a04, java.lang .Object@17d59ff0, java.lang.Object@49f751c9, java.lang.Object@c1a890f, java.lang.Object@221c3dfe, java.lang.Object@6c2a0030, java.lang.O...
scala> val foo = List.fill(1000000) { new Object() }
foo: List[java.lang.Object] = List(java.lang.Object@6e8fb561, java.lang.Object@1ccd2bfc, java.lang.Object@6202bc29,.... （省略其余输出）
scala> val foo = List.fill(1000000) { new Object() }
....再重复几次，得到：

scala> val foo = List.fill(1000000) { new Object() }
无效的

java.lang.OutOfMemoryError：超出 GC 开销限制
    在 scala.tools.nsc.transform.SpecializeTypes$$anonfun$13.apply(SpecializeTypes.scala:669)
    在 scala.tools.nsc.transform.SpecializeTypes$$anonfun$13.apply(SpecializeTypes.scala:667)
    在 scala.collection.TraversableLike$$anonfun$flatMap$1.apply(TraversableLike.scala:200)
    在 scala.collection.TraversableLike$$anonfun$flatMap$1.apply(TraversableLike.scala:200)
    在 scala.collection.LinearSeqOptimized$class.foreach(LinearSeqOptimized.scala:59)
    在 scala.collection.immutable.List.foreach(List.scala:45)
    在 scala.collection.TraversableLike$class.flatMap(TraversableLike.scala:200)
    在 scala.collection.immutable.List.flatMap(List.scala:45)
    在 scala.tools.nsc.transform.SpecializeTypes.specializeClass(SpecializeTypes.scala:667)
    在 scala.tools.nsc.transform.SpecializeTypes.transformInfo(SpecializeTypes.scala:1065)
    在 scala.tools.nsc.transform.InfoTransform$Phase$$anon$1.transform(InfoTransform.scala:38)
......
……

```

每次使用没有重新声明的“var”而不是 val 似乎没有帮助。如何让 repl/sbt 为不再相关的对象引用释放/垃圾收集内存？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T08:35:34.360

到目前为止，你还不能。 [https://issues.scala-lang.org/browse/SI-4331](https://issues.scala-lang.org/browse/SI-4331)

# css - 为什么“移动”光标没有阴影？(OSX 狮子)

> ID：12274130
> 
> 赞同：2
> 
> 时间：2012-09-05T03:31:00.250
> 
> 标签：css, cursor

在 OSX 上的 Chrome 中，`move`光标[没有阴影](https://s3.amazonaws.com/uploads.hipchat.com/10819/42395/muhf06n1nx7iqgs/Cursor%20move%20-%20no%20shadow.m4v)，而`default`,`pointer`和许多其他的都有。

这是否发生在操作系统级别？Chrome 是否使用某种自定义光标，触发 OSX 以不同于“内置”光标的方式呈现它？

有没有办法（除了指定自定义光标图像）来添加阴影？

[光标参考](http://www.worldtimzone.com/mozilla/testcase/css3cursors.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T01:52:14.537

Chrome 中的光标似乎是 Mac OS X 系统光标，并且`move`光标没有阴影。值得一提的是，十字准线和文本选择（I-beam）光标也缺少投影。您可以使用 url() 提供自己的光标图像，或者只是接受会有一些平台差异以及 Apple 更新其光标资产时（就像他们最近更新手/指针光标时所做的那样，并添加了高分辨率 Retina 版本他们的光标）您的网站/应用程序将自动使用它们。

# excel - 无法设置范围类运行时错误“1003”的隐藏属性

> ID：12274131
> 
> 赞同：7
> 
> 时间：2012-09-05T03:31:11.567
> 
> 标签：excel, vba

我在这个模块中有代码：

```
Sub HideSalTable()

User = Worksheets("log").Range("R1").Value
If User = ThisWorkbook.Worksheets("SSSSSS").Range("za1").Value Then
Columns("S:AA").EntireColumn.Hidden = True

ElseIf User = ThisWorkbook.Worksheets("SSSSSS").Range("za3").Value Then
Columns("S:AA").EntireColumn.Hidden = False

ElseIf User = ThisWorkbook.Worksheets("SSSSSS").Range("za4").Value Then
Columns("S:AA").EntireColumn.Hidden = False

End If

End Sub 
```

我有一个按钮可以使用以下代码将我重定向到 ThisWorkbook.Worksheets("SSSSSS")：

```
Private Sub Change_SSSSSS_Button_Click()

 Dim pass1 As String
  Dim pass2 As String
  pass1 = ThisWorkbook.Worksheets("SSSSSS").Range("za3").Value
   pass2 = ThisWorkbook.Worksheets("SSSSSS").Range("za4").Value
  Dim Inp
    Dim lTries As Long

    lTries = 1
    Do
        Inp = InputBoxDK("enter password", "Zmhnk")
        If Inp = "" Or Inp = vbCancel Then Exit Sub          '* Cancel button pressed or nothing entered
        If Inp = (pass1) Or Inp = (pass2) Then
            Exit Do
        End If
        lTries = lTries + 1
        If lTries > 4 Then
            MsgBox "Error", vbInformation, "Zmhnk"
            Exit Sub
        Else
            If MsgBox("try again", vbYesNo, "error_Zmhnk") = vbNo Then Exit Sub
        End If
    Loop

 Application.ScreenUpdating = False

 Sheets("SSSSSS").Visible = True
 Sheets("SSSSSS").Activate

 Application.ScreenUpdating = True

End Sub 
```

问题是当用户使用第二个代码按下按钮时，我遇到了一个错误，我不知道为什么。

错误：

```
Unable to set the hidden property of the range class run time error '1003' 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-05T06:56:04.740

两件事情

1) 你没有完全限定你的范围。我了解您正在被重定向，但这更安全。

```
Columns("S:AA").EntireColumn.Hidden = True 
```

将其更改为

```
ThisWorkbook.Sheets("SSSSSS").Columns("S:AA").EntireColumn.Hidden = True 
```

2) 我相信您的工作表受到保护。你必须取消保护它。你可以这样做

```
ThisWorkbook.Sheets("SSSSSS").Unprotect "myPassword" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-07T14:21:46.950

当您从表单获得控件时，没有问题
，但如果您从工作表本身获得它，那么它实际上可以工作，但出现错误：1004
，所以只需使用（On Error Resume Next）

```
Private Sub ComboBox1_Change()
Dim wsMon As Worksheet
Set wsMon = ThisWorkbook.Worksheets("Montag")
On Error Resume Next
Select Case ComboBox1.ListIndex
       Case 0
            xHide (False)
            wsMon.Rows("12:25").EntireRow.Hidden = True
            xHide (True)
       Case 1
            xHide (False)
            wsMon.Rows("12:25").EntireRow.Hidden = False
            wsMon.Rows("19:25").EntireRow.Hidden = True
            xHide (True)
       Case 2
            xHide (False)
            wsMon.Rows("12:25").EntireRow.Hidden = False
            xHide (True)
End Select

End Sub 
```

xHide 是一个布尔函数：true

```
Application.ScreenUpdating = True
Application.DisplayAlerts = True 
```

或假

```
Application.ScreenUpdating = False
Application.DisplayAlerts = False 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2021-02-23T12:38:00.730

我有一个类似的问题（只有错误代码是 1004，但错误消息是相同的）。在我的 Excel 工作表上解决问题的方法是删除我试图隐藏的范围内的评论。似乎在应该隐藏的范围内不允许评论。

# vb.net - 条件语句 - If Then 与 Select Case

> ID：12274132
> 
> 赞同：0
> 
> 时间：2012-09-05T03:31:20.367
> 
> 标签：vb.net

我对编程有点陌生，根据我在网上阅读的少数资料和我正在学习自学的书籍，他们能够定义什么是 IF THEN 和 SELECT CASE 条件语句，但是有未能比较为什么我会使用一个而不是另一个，以及什么最佳实践决定了这一点。

如果我正确理解这些条件语句，那么两者都基于一组条件，其结果基于满足这些条件，如果不满足条件，则可以定义替代结果。

我无法理解何时使用 IF THEN 语句，何时使用 SELECT CASE 语句，以及使用哪些最佳实践来定义此决定。

对此的任何见解将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T03:35:10.880

这很简单：

*   IF THEN 用于一般**条件**（布尔条件）
*   当您想根据**表达式**的值（解析为值）做不同的事情时使用 SELECT CASE 并且当您对不同的值有多种选择时它很有用，因为该语句更具可读性并且可能以更有效的方式编译方法

当您看到在同一表达式的链中使用超过 3-4 个 if/else 语句时，通常使用 case 指令是一个好主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T03:34:43.273

本质上，你可以对两者做同样的事情。如果你发现自己写了大量的 if 语句：
if
else if
else if
else if
else if
etc. 。.

然后你会想写一个 switch case 块。这将使代码更具可读性。从技术上讲，任何一个都可以使代码工作，但通常在大约 4 个 if 语句之后使用 switch case 块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T03:34:50.707

`SELECT...CASE`条件句和条件句之间的真正区别在于`If/Then/Else`能够在 If/Then/Else 中使用多个不同的条件，并且相应地需要为每个 If/ElseIf 条件重新评估条件句中的任何变量值。由于每个 CASE 条件只能进行一次评估，因此编译器对其进行优化以仅对条件变量进行一次评估。每次需要评估一个变量时，这意味着要访问一个内存位置。在现代系统中，这种情况发生得非常快，但是如果您要针对数百万个事务进行优化，那么每次都会占用内存通道数。希望这是有道理的。

# javascript - Raphaeljs 用图像填充圆圈

> ID：12274137
> 
> 赞同：1
> 
> 时间：2012-09-05T03:32:45.163
> 
> 标签：javascript, svg, raphael

好的，那么我们有一个基本的情况，那就是画一个圆圈并用图像填充它。这可以通过使用以下方法轻松完成：

el.attr({'fill': 'url(image_url)'});

但上面的缺点是不能缩放图像以适应圆圈。

所以基本上我正在寻找这样的东西（基于CSS）：

[http://jsfiddle.net/hKyzT/](http://jsfiddle.net/hKyzT/)

任何提示？

任何帮助表示赞赏！

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T12:23:52.250

这是 Raphaël 的修改版本：

[http://xn--dahlstrm-t4a.net/svg/raphaeljs/fill-shape-with-image.html](http://xn--dahlstrm-t4a.net/svg/raphaeljs/fill-shape-with-image.html)

# html - 内容超出 IE8 中的 div 标签

> ID：12274138
> 
> 赞同：1
> 
> 时间：2012-09-05T03:33:00.213
> 
> 标签：html, internet-explorer-8, overflow

我在 div 标签中有一个很长的句子。当我使用 IE8 时，这句话脱离了 div 标签。在其他浏览器中它工作正常。我已经`overflow:auto`在 div 中设置了。它只是创建我不想要的滚动条。我希望根据 div 大小在多行中调整内容。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T03:52:27.550

溢出：自动会添加一个滚动条。

您在主题 div 中使用了哪些其他标签？听起来 IE 想要根据其框模型呈现该元素。

发布带有样式信息的代码片段会很有帮助。

* * *

编辑1：

正如我所料，你的罪魁祸首是`<FIELDSET>`&`<LEGEND>`元素以及 IE 与其他浏览器相比如何呈现它们。

这是使用 fieldset 标签时 IE 与其他浏览器相比的一个不错的示例：

[http://www.themaninblue.com/experiment/InForm/fieldset.htm](http://www.themaninblue.com/experiment/InForm/fieldset.htm)

不完全是您正在寻找的答案，但我希望这是一个很好的起点。

* * *

编辑2：

此链接描述了您的确切问题，并就如何处理它提供了一些非常好的见解，享受！

[http://www.456bereastreet.com/archive/200905/line_wrapping_text_in_legend_elements/](http://www.456bereastreet.com/archive/200905/line_wrapping_text_in_legend_elements/)

# java - 是否可以将 json 与带有空间的 json 实体的 java 类映射？

> ID：12274139
> 
> 赞同：0
> 
> 时间：2012-09-05T03:33:00.483
> 
> 标签：java, android, json

我有一些像这样的json代码：

```
{
"First name": "David",
"Last name": "Esseiva"
} 
```

我想用我的java类映射它。但通常我们不能像这样在 java 类中创建属性：

```
class Name{
String first name;
String last name;
} 
```

如果我们这样创建：

```
class Name{
String first_name;
String last_name;
} 
```

可以让它一起映射吗？

所以，我想知道将这些映射在一起的可能方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T03:57:54.710

是的，Gson 就是你要找的东西

[http://code.google.com/p/google-gson/](http://code.google.com/p/google-gson/)

在你的情况下，你会做这样的事情

```
Name nameObjectModel = gsonObj.fromJson("JsonStringHere", Name.class) 
```

它会为你做所有的序列化:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T03:48:30.860

试用[Jackson JSON 处理器的数据绑定](http://wiki.fasterxml.com/JacksonDataBinding)。

# c# - 如何让 VC# 重建自动生成的 .cs 文件？

> ID：12274151
> 
> 赞同：1
> 
> 时间：2012-09-05T03:34:52.820
> 
> 标签：c#, visual-studio-2010

我想这个问题已经被问到并得到了回答，但我找不到它。

我想制作一个简单的 GUI 来连接 Windows 7 命令。我通常使用 Wx，但由于这是一个仅限 Windows 的东西，所以我决定看看我是否可以使用我以前从未使用过的 Visual C# 2010 Express 真正快速地把它拿出来。

事情开始得很好。我创建了一个表单，在上面放了一些按钮和文本框等，然后点击调试。它就这样跑了起来。没有混乱，没有大惊小怪。因此，我按照我想要的方式设计了表单，将控件从“Button1”等重命名为有意义的名称。但现在是一团糟。通过点击，我发现 VC# 自动生成了两个名为 Form1.cs 和 Form1.Designer.cs 的文件。后者包含函数之间的绑定以及用户点击等生成的事件，前者包含这些函数的无操作代码，由我完成。

问题是，名称仍然是原来的“Button1”等等，不是新的，而且我第一次运行后添加的新控件根本没有出现。

我希望它从完成的表格中重新生成所有这些东西。如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T03:40:40.850

您*可能*没有实际问题，*除非*您在`Form1.Designer.cs`. 如果您不理会该文件，那么事情应该可以正常工作。

每当您双击按钮或使用事件界面创建事件处理程序时，将使用以下模式创建处理程序：

```
ObjectName_EventName() 
```

因此，例如：

```
Button1_Click() 
```

如果稍后更改 Button1 的名称，事件处理程序的名称也不会更改。但它仍然附加到正确的事件，再次假设您没有在 Form1.Designer.cs 中编辑任何内容

如果您在 Form1.Designer.cs 中查看（但不要触摸！），您可能会发现类似以下内容：

```
MyNewButtonName.Click += Button1_Click; 
```

（我不记得编辑器用于连接事件处理程序的确切语法；原则是您应该看到*新*按钮名称附加到*旧*处理程序名称）

# sql - Oracle 合并与选择然后插入或更新

> ID：12274156
> 
> 赞同：11
> 
> 时间：2012-09-05T03:35:35.147
> 
> 标签：sql, oracle, sql-merge

什么更快？

合并声明

```
 MERGE INTO table_name 
     USING dual
     ON (row_id = 'some_id')
    WHEN MATCHED THEN
     UPDATE SET col_name = 'some_val'
    WHEN NOT MATCHED THEN
     INSERT (row_id, col_name)
     VALUES ('some_id', 'some_val') 
```

或者

查询 select 语句，然后使用 update 或 insert 语句。

```
 SELECT * FROM table_name where row_id = 'some_id' 
```

如果行数 == 0

```
 INSERT INTO table_name (row_id,col_name) VALUES ('some_id','some_val') 
```

别的

```
 UPDATE table_name SET col_name='some_val' WHERE row_id='some_id' 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-05T03:36:52.833

*经验法则*是，如果您可以在一个 SQL 中执行此操作，它通常会比在多个 SQL 语句中执行更好。

如果它完成这项工作，我会选择 MERGE。

另外 - 另一个建议：您可以避免在您的声明中重复数据，例如：

```
MERGE INTO table
 USING (SELECT 'some_id' AS newid,
               'some_val' AS newval
        FROM dual)
 ON (rowid = newid)
WHEN MATCHED THEN
 UPDATE SET colname = newval
WHEN NOT MATCHED THEN
 INSERT (rowid, colname)
 VALUES (newid, newval) 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2016-05-03T11:32:43.473

照顾合并。它可以`TEMP`使用`HASH JOIN`. 使用提示测试他`FIRST_ROWS`或使用`UPDATE`view join plus `INSERT`with `NOT EXISTS`。

# python - 任何表示对象分配的方法？

> ID：12274157
> 
> 赞同：0
> 
> 时间：2012-09-05T03:35:41.860
> 
> 标签：python, oop, magic-methods

我一直在研究 Python 中的魔术方法，并且一直想知道是否有办法概述以下具体操作：

```
a = MyClass(*params).method() 
```

相对：

```
MyClass(*params).method() 
```

从某种意义上说，也许，我可能想要返回一个已在`'\n'`字符上拆分的列表，而不是将原始列表转储到`a`保持`'\n'`不变的变量中。

有没有办法询问 Python 的下一个动作是否即将向变量返回一个值，并改变动作，如果是这样的话？我刚在想：

```
class MyClass(object):
    def __init__(params):
        self.end = self.method(*params)

    def __asgn__(self):
        return self.method(*params).split('\n')

    def __str__(self):
        """this is the fallback if __asgn__ is not called"""
        return self.method(*params) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T03:37:32.140

不可以。您无法更改分配给裸名时发生的情况。

如果左侧的分配目标是对象的属性或项，您*可以更改发生的情况。*您可以覆盖`a[blah] = ...`with`__setitem__`和`a.blah = ...`with `__setattr__`（尽管您只能连接到这些 on `a`，而不是正在分配的对象上）。但是您不能覆盖或以任何方式影响`a = ...`。

请注意，根据“将要发生”的情况进行*右侧*更改会更奇怪，而且非常糟糕。那将意味着

```
someFunc(MyClass().method()) 
```

可能不同于

```
a = MyClass().method()
someFunc(a) 
```

在 Python 中，名称只是附加到对象的标签。对象不知道它们附有什么标签，这是一件好事。您可能会将计算结果分配给中间变量，以使后续行更具可读性，并且您不希望该分配更改该计算的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T04:02:50.043

直接调用和将其分配给变量应该*没有*区别。`MyClass(*params).method()`您可能会在此处看到您的解释器自动打印返回结果，这就是为什么当变量值包含 EOL 标记时它似乎被拆分的原因。

无法覆盖对变量的默认分配。但是，通过使用对象，您可以轻松地提供自己的挂钩：

```
class Assigner(object):
    def __init__(self, assignment_callback):
        self.assignment = assignment_callback

    def __setattr__(self, key, value):
        if hasattr(self, 'assignment'):
            value = self.assignment(value)
        super(Assigner, self).__setattr__( key, value )       

def uppercase(value):
    # example function to perform on each attribute assignment
    return value.upper() 
```

然后在您的代码中，而不是直接分配给变量，而是分配给对象的属性：

```
>>> my = Assigner(uppercase)
>>> my.a = 'foo'
>>> print my.a
FOO 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-04-13T12:39:14.300

是的。* Python 允许检查自己的堆栈，可用于查看下一条指令。

```
#!/usr/bin/env python3
import dis
import inspect
from itertools import dropwhile

class MyClass(object):
    def method(self):
        # inspect the stack to get calling line of code
        frame = inspect.stack()[1].frame
        # disassemble stack frame
        ins = dis.get_instructions(frame.f_code)
        # move to last instruction
        ins = dropwhile(lambda x: x.offset < frame.f_lasti, ins)
        # the last call would have been to this method/function
        current_instruction = ins.__next__()
        assert current_instruction.opname.startswith('CALL_') 
        # peek ahead at the next instruction
        next_instruction = ins.__next__()
        # vary behaviour depending on the next instruction
        if next_instruction.opname.startswith('STORE_'):
            return "returning to assignment"
        elif next_instruction.opname.startswith('CALL_'):
            return "returning to function/method call"
        elif next_instruction.opname == 'POP_TOP':
            print("return value thrown away")
            return "return ignored"
        elif next_instruction.opname == 'PRINT_EXPR':
            return "return to interactive console"
        else:
            return "return to {}".format(next_instruction.opname) 
```

这将导致以下行为：

```
a = MyClass().method()
print(a)
# returning to assignment

def someFunc(x):
    return x.split()

b = someFunc(MyClass().method())
print(b)
# ['returning', 'to', 'function/method', 'call']

MyClass().method()
# return value thrown away       (if called as program)
# return to interactive console  (if run interactively) 
```

**尽管正如公认的答案所指出的那样，这样做是*“非常糟糕的”。*它也很脆弱，因为它可能会受到字节码优化的影响。*另请参阅：[嵌套字典，在设置项目时充当默认字典，但在获取项目时不充当](https://stackoverflow.com/questions/61118676/nested-dictionary-that-acts-as-defaultdict-when-setting-items-but-not-when-getti/61143071#61143071)

# java - 为什么java中Collections的fill()、copy()、reverse()和shuffle()是这样实现的

> ID：12274166
> 
> 赞同：7
> 
> 时间：2012-09-05T03:36:56.797
> 
> 标签：java, performance, list, collections, iterator

根据javadoc ... Collections.fill() 编写如下：

```
public static <T> void fill(List<? super T> list, T obj) {
        int size = list.size();

        if (size < FILL_THRESHOLD || list instanceof RandomAccess) {
            for (int i=0; i<size; i++)
                list.set(i, obj);
        } else {
            ListIterator<? super T> itr = list.listIterator();
            for (int i=0; i<size; i++) {
                itr.next();
                itr.set(obj);
            }
        }
    } 
```

很容易理解他们为什么不使用 listIterator

```
if (size < FILL_THRESHOLD || list instanceof RandomAccess) 
```

RandomAccess 的条件。但是`size < FILL_THRESHOLD`上面的有什么用呢？

`iterator`我的意思是使用for`size>=FILL_THRESHOLD`而不是 for有什么显着的性能优势`size < FILL_THRESHOLD`吗？

我也看到 Collections.copy() 的相同方法：

```
 public static <T> void copy(List<? super T> dest, List<? extends T> src) {
        int srcSize = src.size();
        if (srcSize > dest.size())
            throw new IndexOutOfBoundsException("Source does not fit in dest");

        if (srcSize < COPY_THRESHOLD ||
            (src instanceof RandomAccess && dest instanceof RandomAccess)) {
            for (int i=0; i<srcSize; i++)
                dest.set(i, src.get(i));
        } else {
            ListIterator<? super T> di=dest.listIterator();
        ListIterator<? extends T> si=src.listIterator();
            for (int i=0; i<srcSize; i++) {
                di.next();
                di.set(si.next());
            }
        }
    } 
```

供参考：

```
 private static final int FILL_THRESHOLD           =   25;

 private static final int COPY_THRESHOLD           =   10; 
```

以下相同的方法：

```
 public static void reverse(List<?> list)
 public static void shuffle(List<?> list, Random rnd) 
```

**编辑 ：**

我的困惑是`size<FILL_THRESHOLD`部分原因，而不是`RandomAccess`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T03:40:32.653

我想这是因为通用列表并不意味着是`ArrayList`. 不能保证在恒定的*O(1)*时间内设置随机索引。同时构建一个迭代器并对其进行处理有其开销。

总之，对于小列表，您可以通过节省创建迭代器本身的开销来牺牲使用迭代器会降低访问连续元素的复杂性这一事实。

这是因为`list.set(i, obj)`可能会更昂贵，`itr.set(obj)`但在后者中，您将隐含管理迭代器的开销。由于复杂度可以是线性的*O(n)*，`list.set(i, obj)`因此用于更大的列表可能是一个有效的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T05:50:45.207

Java 1.2 引入了集合框架，Java 1.3 使用了 ListIterator 的直接方法：

```
public static void fill(List list, Object o) {
    for (ListIterator i = list.listIterator(); i.hasNext(); ) {
        i.next();
        i.set(o);
    }
} 
```

阈值是在 Java 1.4 中与[RandomAccess](http://docs.oracle.com/javase/7/docs/api/java/util/RandomAccess.html)标记接口一起引入的（所有这些都基于 Oracle 网站上的 JDK 遗留代码）。

我认为这是对旧垃圾收集算法的优化——这些旧算法[对创建新对象](http://oreilly.com/catalog/javapt/chapter/ch04.html)（例如 ListIterator）有相当大的惩罚。因此，对非 O(1) 列表使用 setter 是有意义的。

颇具讽刺意味的是，*Java 1.4.1*引入了一个新的垃圾收集器，它使得对象创建对于像迭代器这样的短期对象来说更便宜。

# go - 为什么 GO 中 slice 的内容没有变化？

> ID：12274167
> 
> 赞同：4
> 
> 时间：2012-09-05T03:37:04.457
> 
> 标签：go, slice

我认为在 GO 语言中，切片是通过引用传递的。但是为什么下面的代码没有改变 slice c 的内容呢？我错过了什么吗？谢谢你。

```
package main

import (
    "fmt"
)

func call(c []int) {
    c = append(c, 1)
    fmt.Println(c)
}

func main() {
    c := make([]int, 1, 5)
    fmt.Println(c)
    call(c)
    fmt.Println(c)
} 
```

打印的结果是：

> [0] [0 1] [0]

在我期待的时候

> [0] [0 1] [0 1]

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-05T03:44:55.743

切片的长度保存在不通过引用传递的切片头中。您可以将切片视为包含指向数组的指针、长度和容量的结构。

当您附加到切片时，您修改了数据数组中的索引 1，然后增加了切片标头中的长度。当您返回时，`c`主函数中的长度为 1，因此打印了相同的数据。

切片以这种方式工作的原因是您可以让多个切片指向相同的数据。例如：

```
x := []int{1,2,3}
y := x[:2] // [1 2]
z := x[1:] // [2 3] 
```

所有这三个切片都指向同一底层数组中的重叠数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T19:26:39.367

Go 总是按值传递。某些类型是引用类型，如指针、映射、通道；或部分引用类型，如切片（包括对底层数组的引用以及长度和容量的值）。但无论类型如何，一切都是按值传递的。因此，分配给局部变量永远不会影响外部的任何东西。

# android - 如何在android中将2d int数组转换为位图

> ID：12274170
> 
> 赞同：5
> 
> 时间：2012-09-05T03:38:01.430
> 
> 标签：android

我需要将二维整数数组（subSrc）转换为位图。有什么解决办法吗？

```
 private Bitmap decimation(Bitmap src){
     Bitmap dest = Bitmap.createBitmap(
       src.getWidth(), src.getHeight(), src.getConfig());

     int bmWidth = src.getWidth();
     int bmHeight = src.getHeight();`enter code here`

int[][] subSrc = new int[bmWidth/2][bmWidth/2];
       for(int k = 0; k < bmWidth-2; k++){
        for(int l = 0; l < bmHeight-2; l++){
         subSrc[k][l] = src.getPixel(2*k, 2*l); <---- ?? 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-09-13T10:35:15.027

我寻找了一个接收二维数组（int[][]）并创建了一个位图的方法，但没有找到，所以我自己写了一个：

```
public static Bitmap bitmapFromArray(int[][] pixels2d){
    int width = pixels2d.length;
    int height = pixels2d[0].length;
    int[] pixels = new int[width * height];
    int pixelsIndex = 0;
    for (int i = 0; i < width; i++)
    {
        for (int j = 0; j < height; j++)
        {
               pixels[pixelsIndex] = pixels2d[i][j];
               pixelsIndex ++;
        } 
    }
    return Bitmap.createBitmap(pixels, width, height, Bitmap.Config.ARGB_8888);
} 
```

我还写了一个反向方法：

```
public static int[][] arrayFromBitmap(Bitmap source){
int width = source.getWidth();
int height = source.getHeight();
int[][] result = new int[width][height];
int[] pixels = new int[width*height];
source.getPixels(pixels, 0, width, 0, 0, width, height);
int pixelsIndex = 0;
for (int i = 0; i < width; i++)
{
    for (int j = 0; j < height; j++)
    {
      result[i][j] =  pixels[pixelsIndex];
      pixelsIndex++;
    }
}
return result;
} 
```

希望对你有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T03:57:47.143

您可以使用 [setPixel(int, int, int)](http://developer.android.com/reference/android/graphics/Bitmap.html#setPixel%28int,%20int,%20int%29)或[setPixels (int[] pixel, int offset, int stride, int x, int y, int width, int height)](http://developer.android.com/reference/android/graphics/Bitmap.html#setPixels%28int%5B%5D,%20int,%20int,%20int,%20int,%20int,%20int%29)方法位图类。

```
 Bitmap dest = Bitmap.createBitmap(
       src.getWidth()/2, src.getHeight()/2, src.getConfig());

     int bmWidth = src.getWidth();
     int bmHeight = src.getHeight();

       for(int k = 0; k < bmWidth/2; k++){
        for(int l = 0; l < bmHeight/2; l++){
         dest.setPixel(k,l,src.getPixel(2*k, 2*l)); 
```

但我认为这会慢一些。

对于第二种方法，你必须做这样的事情

```
int subSrc = new int[(bmWidth/2*)(bmHeight/2)];
       for(int k = 0; k < bmWidth-2; k++){
         subSrc[k] = src.getPixel(2*(k/bmWidth), 2*(k%bmHeight)); <---- ?? 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T04:00:02.890

所以，您实际上是在尝试提取像素，对它们做一些事情，然后制作一个位图？

例程期望像素位于一维数组中，因此您需要将它们放入数组中，如下所示：

```
int data[] = new int[size]; 
data[x + width*y] = pixel(x,y);
... 
```

然后使用接受一维数组的 Bitmap.createBitmap()。您需要在示例中使用 ARGB 的 Bitmap.Config，因为您使用的 b.getPixel(x,y) 始终返回 ARGB 格式的颜色。

```
Bitmap result = Bitmap.createBitmap(data, width, height, Bitmap.Config.ARGB_8888); 
```

# .htaccess - Allow_url_include 有没有一种方法允许仅包含一个 url

> ID：12274174
> 
> 赞同：0
> 
> 时间：2012-09-05T03:38:41.280
> 
> 标签：.htaccess, php

`allow_url_include`有没有办法允许只包含一个网址。也许使用 Htaccess 或在 PHP 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T04:23:48.497

否。要获取 URL 的内容，请使用[`file_get_contents()`](http://php.net/manual/en/function.file-get-contents.php). 然后，要将结果发送回等待的浏览器，只需使用`echo()`.

```
$contents = file_get_contents('http://www.example.com/');
echo( $contents ); 
```

以上将要求您设置配置`allow_url_fopen=1`（默认情况下已设置）。

* * *

如果您要使用`include`，而不是我上面显示的方法，则会有一个主要区别：`include`还*执行*它在获取的文档中找到的任何 PHP 代码。通常，除非您知道自己控制了所包含文档内容的 100%，否则允许这样做是一件非常危险的事情。

就是说：如果您*确实*想要与 完全一样的代码，`include`则可以执行以下操作（这更安全，因为它只获取单个 URL，并且*不需要*您启用`allow_url_include`）。

```
$contents = file_get_contents('http://www.example.com/');
eval('?>'.$contents); 
```

如果您选择这样做，**请确保您控制远程 URL 的全部内容**。如果其他人控制该文件，他们将能够在您的服务器上执行任意代码。不要让这种情况发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T03:50:42.680

那么为什么你需要它，你可以控制代码，你可以在包含时只使用一个 url。除了使用 allow_url_include 是非常危险的。如果你还想使用，你可以这样做。

制作自定义函数（粗略代码）

```
function url_include($url){
   //now check if $url is the one you want to be included
   if($url=="http://www.mysite.com/file.php"){
     include($url);
   }else{
      //show error or something.
   }
} 
```

现在`url_include("http://www.mysite.com/file.php");`在您的页面中使用它来包含 url。

希望这可以帮助

# python - 必须在 def __init__ 中声明所有 Python 实例变量吗？

> ID：12274179
> 
> 赞同：13
> 
> 时间：2012-09-05T03:39:20.703
> 
> 标签：python, instance-variables

或者可以以其他方式声明它们吗？

下面的代码不起作用：

```
class BinaryNode():
    self.parent = None
    self.left_child = None 
```

他们需要在 中声明`__init__`吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-05T03:40:48.907

它们不必在 中声明`__init__`，但为了使用 设置实例变量`self`，需要有对 的引用`self`，而您定义变量的地方则没有。

然而，

```
class BinaryNode():
    parent = None
    left_child = None

    def run(self):
        self.parent = "Foo"
        print self.parent
        print self.left_child 
```

输出将是

```
Foo
None 
```

要在评论中回答您的问题，是的。在我的示例中，您可以说：

```
bn = BinaryNode()
bn.new_variable = "Bar" 
```

或者，正如我所展示的，您可以设置一个类级别的变量。类的所有新实例都将在实例化时获得类级别变量的副本。

也许您不知道您可以将参数传递给构造函数：

```
class BinaryNode(object):

    def __init__(self, parent=None, left_child=None):
        self.parent = parent
        self.left_child = left_child

bn = BinaryNode(node_parent, node_to_the_left) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T03:48:11.880

没有。我喜欢这个`@property`变量：

```
class Data(object):
    """give me some data, and I'll give you more"""
    def __init__(self, some, others):
        self.some   = some
        self.others = others

    @property
    def more(self):
        """you don't instantiate this with __init__, per say..."""
        return zip(self.some, self.others)

>>> mydata = Data([1, 2, 3], ['a', 'b', 'c'])
>>> mydata.more
[(1, 'a'), (2, 'b'), (3, 'c')] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-07-24T17:27:13.103

*必须在 def 中声明所有 Python 实例变量`__init__`吗？* 简短的回答：没有。但这实际上取决于如何/在哪里使用它们。

*或者可以以其他方式声明它们吗？* 是的，它们可以以其他方式声明（不是实例变量）。由于您指的是类中的变量，是的，如果您不想使用`__init__`使用关键字的构造函数，可以在其中声明一个局部变量（例如） `self`。

*下面的代码不起作用：*

```
class BinaryNode():
    self.parent = None
    self.left_child = None 
```

不工作是什么意思？如果您指的是大多数开发人员如何使用一个类，那么您是对的，因为您不能创建一个类对象（它也称为类实例），然后假设它们调用它的一个实例变量，所以它不起作用被正确声明（即：声明在扮演构造方法角色的**init方法中。）**

换句话说：如果您在构造函数方法**init**之外声明一个变量，那么它被称为类变量而不是实例变量。要启动一个实例变量，它需要在实际构造（实例化）类实例（类对象）及其关联的实例变量（实例属性）的**init方法中。**

例如：

如果你有`parent = None`而不是`self.parent = None`你只是在你的类中创建了一个局部变量。

`self`因此，当您调用类实例时，该词将占据一席之地，它被传入以代替`self`. 因此，这个词`self`只是作为一个参数来保存一个位置，用于传递我们想要在其位置调用的任何实例变量。所以这个词`self`在这里只是帮了忙。

同样，在创建类对象并说要创建实例变量时，必须使用属性词`self`（不一定要，`self`但由于大多数python开发人员都使用它，因此使用它成为python中的约定和良好实践）它将作为引用（持有者）来完成构造函数的工作，该函数`__init__`将分配传入的类实例（对象）中的参数值，该值被创建为属于类实例的实例变量副本的新值创建的。

现在，让我们尝试另一个场景来更好地巩固这个概念：

如果我们使用`__init__`函数而不使用关键字`self`怎么办？如果你创建了一个名为的类对象`object_x`，然后你想从 中调用它的一个实例变量`instance_y`，然后你执行程序，它会抛出一个错误，指出创建的类对象没有属性（实例变量）。

它只是一个局部变量，具有您在定义它时分配给它的任何值。

发生错误是因为当它缺少引用 word 时，它无法将其识别为类中定义的实例变量之一`self`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T03:52:48.460

此外，您可以拥有类级别的变量，但我称它们为类常量。

```
class Connection(object):
    """helps you connect to the server at work"""
    YOUR_IP = '10.0.9.99'

    def __init__(self, username, password):
        self.ip = Connection.YOUR_IP
        self.un = username
        self.pw = password

    #...and so on 
```

# ios - 使用带有 Rails 后端的 Carrierwave 的 iOS 应用程序

> ID：12274180
> 
> 赞同：1
> 
> 时间：2012-09-05T03:39:20.837
> 
> 标签：ios, ruby-on-rails, carrierwave

我有一个带有 Rails 后端的 iOS 应用程序。我使用带有 Amazon S3 的carrierwave 将图像从网页发布到我的服务器。我希望能够从我的 iOS 应用程序将图像发布到服务器，但不确定如何执行此操作。我已经通过使用 Rails 控制台中显示的正确参数访问某些端点提出了其他请求。但是，我不确定如何形成此请求：

```
Started POST "/images" for 173.22.40.246 at 2012-08-27 18:14:50 +0000
2012-08-27T18:14:50+00:00 app[web.1]: Processing by ImagesController#create as HTML
Parameters: {"utf8"=>"✓", "authenticity_token"=>"1234", "image"=>{"name"=>"", "path"=>#<ActionDispatch::Http::UploadedFile:0x00000004e92830 @original_filename="image.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"image[path]\"; filename=\"image.jpeg\"\r\nContent-Type: image/jpeg\r\n", @tempfile=#<File:/tmp/RackMultipart20120827-2-1us2x41>>}, "commit"=>"Create Image"} 
```

任何帮助将不胜感激！

# java - 为什么 drJava 在我的字符串上给我一个错误？

> ID：12274186
> 
> 赞同：3
> 
> 时间：2012-09-05T03:40:39.533
> 
> 标签：java, string, drjava

我知道这可能是一个非常愚蠢的问题，但我正在测试 drJav 中的交互窗格。

我创建了一个字符串变量，然后尝试对其进行操作`.length`：

```
 String fish;
 String[] hooo;
 hooo.length 
```

然后我得到一个错误，这让我很困惑：

```
edu.rice.cs.util.UnexpectedException: java.lang.NullPointerException
    at edu.rice.cs.drjava.model.repl.newjvm.MainJVM$ResultHandler.forUnexpectedException(MainJVM.java:1045)
    at edu.rice.cs.drjava.model.repl.newjvm.MainJVM$ResultHandler.forUnexpectedException(MainJVM.java:992)
    at edu.rice.cs.drjava.model.repl.newjvm.InterpretResult$UnexpectedExceptionResult.apply(InterpretResult.java:111)
    at edu.rice.cs.drjava.model.repl.newjvm.MainJVM.interpret(MainJVM.java:351)
    at edu.rice.cs.drjava.model.repl.RMIInteractionsModel._interpret(RMIInteractionsModel.java:75)
    at edu.rice.cs.drjava.model.repl.InteractionsModel.interpret(InteractionsModel.java:291)
    at edu.rice.cs.drjava.model.repl.InteractionsModel$2$1.run(InteractionsModel.java:241)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.NullPointerException
    at java.lang.reflect.Array.getLength(Native Method)
    at edu.rice.cs.dynamicjava.symbol.ArrayLengthField$1.value(ArrayLengthField.java:27)
    at edu.rice.cs.dynamicjava.interpreter.ExpressionEvaluator.visit(ExpressionEvaluator.java:56)
    at koala.dynamicjava.tree.ObjectFieldAccess.acceptVisitor(ObjectFieldAccess.java:92)
    at edu.rice.cs.dynamicjava.interpreter.ExpressionEvaluator.value(ExpressionEvaluator.java:38)
    at edu.rice.cs.dynamicjava.interpreter.ExpressionEvaluator.value(ExpressionEvaluator.java:37)
    at edu.rice.cs.dynamicjava.interpreter.StatementEvaluator.visit(StatementEvaluator.java:106)
    at edu.rice.cs.dynamicjava.interpreter.StatementEvaluator.visit(StatementEvaluator.java:29)
    at koala.dynamicjava.tree.ExpressionStatement.acceptVisitor(ExpressionStatement.java:101)
    at edu.rice.cs.dynamicjava.interpreter.StatementEvaluator.evaluateSequence(StatementEvaluator.java:66)
    at edu.rice.cs.dynamicjava.interpreter.Interpreter.evaluate(Interpreter.java:77)
    at edu.rice.cs.dynamicjava.interpreter.Interpreter.interpret(Interpreter.java:47)
    at edu.rice.cs.drjava.model.repl.newjvm.InterpreterJVM.interpret(InterpreterJVM.java:246)
    at edu.rice.cs.drjava.model.repl.newjvm.InterpreterJVM.interpret(InterpreterJVM.java:220)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at sun.rmi.server.UnicastServerRef.dispatch(Unknown Source)
    at sun.rmi.transport.Transport$1.run(Unknown Source)
    at sun.rmi.transport.Transport$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.rmi.transport.Transport.serviceCall(Unknown Source)
    at sun.rmi.transport.tcp.TCPTransport.handleMessages(Unknown Source)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(Unknown Source)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    ... 1 more

Caused by:
java.lang.NullPointerException
    at java.lang.reflect.Array.getLength(Native Method)
    at edu.rice.cs.dynamicjava.symbol.ArrayLengthField$1.value(ArrayLengthField.java:27)
    at edu.rice.cs.dynamicjava.interpreter.ExpressionEvaluator.visit(ExpressionEvaluator.java:56)
    at koala.dynamicjava.tree.ObjectFieldAccess.acceptVisitor(ObjectFieldAccess.java:92)
    at edu.rice.cs.dynamicjava.interpreter.ExpressionEvaluator.value(ExpressionEvaluator.java:38)
    at edu.rice.cs.dynamicjava.interpreter.ExpressionEvaluator.value(ExpressionEvaluator.java:37)
    at edu.rice.cs.dynamicjava.interpreter.StatementEvaluator.visit(StatementEvaluator.java:106)
    at edu.rice.cs.dynamicjava.interpreter.StatementEvaluator.visit(StatementEvaluator.java:29)
    at koala.dynamicjava.tree.ExpressionStatement.acceptVisitor(ExpressionStatement.java:101)
    at edu.rice.cs.dynamicjava.interpreter.StatementEvaluator.evaluateSequence(StatementEvaluator.java:66)
    at edu.rice.cs.dynamicjava.interpreter.Interpreter.evaluate(Interpreter.java:77)
    at edu.rice.cs.dynamicjava.interpreter.Interpreter.interpret(Interpreter.java:47)
    at edu.rice.cs.drjava.model.repl.newjvm.InterpreterJVM.interpret(InterpreterJVM.java:246)
    at edu.rice.cs.drjava.model.repl.newjvm.InterpreterJVM.interpret(InterpreterJVM.java:220)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at sun.rmi.server.UnicastServerRef.dispatch(Unknown Source)
    at sun.rmi.transport.Transport$1.run(Unknown Source)
    at sun.rmi.transport.Transport$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.rmi.transport.Transport.serviceCall(Unknown Source)
    at sun.rmi.transport.tcp.TCPTransport.handleMessages(Unknown Source)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(Unknown Source)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)

 Thank You, 
```

我知道这是一个空数组，但我希望它向我展示 - 即`0`应该出现。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T03:42:19.920

你没有给 赋值`hooo`，所以它的值为`null`。当您尝试访问`null`对象的属性时，会抛出一个`NullPointerException`.

相反，请尝试以下操作。

```
String fish;
String[] hooo = {"Hello!", "Let's be friends."};
hooo.length; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T03:59:58.360

因为在这里您没有初始化变量`hooo`，这就是它给出错误的原因。你可以这样做

```
 String[] hooo = new String[0]; 
```

或者

```
String[] hooo = {"hooo", "hoooo", "hoooooooooooo"}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T04:10:02.473

仅仅通过声明一个变量并不会初始化它！您需要创建一个新的数组对象并分配给它。

# html - 物理宽度与内容宽度？

> ID：12274190
> 
> 赞同：4
> 
> 时间：2012-09-05T03:41:26.083
> 
> 标签：html, css

我正在学习 CSS，但我在物理宽度和内容宽度的概念上遇到了麻烦。网站似乎引用了它们，但从未真正解释过它们之间的区别。

我知道这与 CSS 盒子模型有关，如果其他人可以帮助我，那就太好了。

例如，如果在 css 中给出以下内容：

```
div {
width: 400px;
padding-left: 20px;
padding-right: 10px;
margin: 0px 10px;
border: 2px solid pink;
} 
```

物理宽度包含什么？内容宽度是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T03:46:35.807

*   “宽度”是指内容区域；把它想象成你盒子的“内部”。
*   “填充”是*额外的*，添加在内容区域之外。它可以是 0。
*   “边框”是额外的，在填充之外，如果有的话。
*   “边距”又是额外的，在边界之外，如果有的话。

所以，如果你有宽度 400，填充左边 20，右边 10，边距 20（每边 10）和 4 像素的边框（每边 2），你的整个盒子将是`400+20+10+20+4=454px`

所以，如果你想把它放到一个只有 400 像素宽的空间里，你需要在某个地方减少一些东西；例如，您可以将宽度减少 54 像素，使总宽度为 400。

* * *

请注意，这不适用于“怪癖模式”，它使用略有不同的盒子模型，如肖恩的回答中所述。这仅适用于没有适当文档类型的 IE；通常希望避免怪癖模式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T03:48:58.253

这取决于浏览器使用的[盒子模型。](http://www.quirksmode.org/css/box.html)两种可能性是：

*   `content-box`: 元素的宽度*不包括*padding 和border 属性。这是除 IE 以外的所有东西的默认模型，在 quirks 模式下。
*   `border-box`: 元素的宽度*包括*内边距和边框。

在[较新的浏览器](http://caniuse.com/#feat=css3-boxsizing)中，您可以使用该`box-sizing`属性选择要使用的浏览器。

因此，给定您在`content-box`模型中提供的代码，宽度`div`将为：

```
 400  # from width
+  20  # from padding-left
+  10  # from padding-right
+   4  # from the left and right borders
+  20  # from the left and right margins
-----------------------------------------
Physical width = 454
Content width  = 400 
```

虽然`border-box`模型会将宽度设置`div`为：

```
 366  # the declared width is shrunk by the amount of padding and border
+  20  # from padding-left
+  10  # from padding-right
+   4  # from the left and right borders
+  20  # from the left and right margins
-----------------------------------------
Physical width = 420
Content width  = 366 
```

有关更多信息，请参阅[Quirk's Mode 关于该主题的优秀文章](http://www.quirksmode.org/css/box.html)。

# javascript - WinJs 中的视图状态更改事件在哪里？

> ID：12274197
> 
> 赞同：3
> 
> 时间：2012-09-05T03:42:49.560
> 
> 标签：javascript, windows-8, winjs

在 Windows 8 中，当视图状态从捕捉到填充到全屏时；

如何捕获这些事件并使用 WinJs 响应它们？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T04:36:24.177

请参阅[此](http://blogs.msdn.com/b/windowsappdev/archive/2012/04/19/getting-the-most-out-of-your-pixels-adapting-to-view-state-changes.aspx)博客文章，了解如何捕获视图状态更改。基本上，建议归结为捕获调整大小事件，然后检查视图状态，如下所示：

```
 window.addEventListener("resize", onResize);

function onResize() { 
    // Update view for the new window size 
    updateView(); 
} 

function updateView() { 
    // Query for the current view state 
    var myViewState = Windows.UI.ViewManagement.ApplicationView.value; 

    var viewStates = Windows.UI.ViewManagement.ApplicationViewState; 
    var statusText; 

    // Assign text according to view state 
    switch (myViewState) { 
        case viewStates.snapped: 
            statusText = "This app is snapped!"; 
            break; 
        case viewStates.filled: 
            statusText = "This app is in filled state!"; 
            break; 
        case viewStates.fullScreenLandscape: 
            statusText = "This app is full screen landscape!"; 
            break; 
        case viewStates.fullScreenPortrait: 
            statusText = "This app is full screen portrait!"; 
            break; 
        default: 
            statusText = "Error: Invalid view state returned."; 
            break; 
    } 
```

如果您查看适用[于 Javascript 的 Microsoft Visual Studio Express 2012 RC for Windows 8 模板，](http://msdn.microsoft.com/en-us/library/windows/apps/hh758331.aspx#handling_view_state)您将在 navigator.js 中看到如下内容：

```
window.onresize = this._resized.bind(this);

_resized: function(args) {
    if (this.pageControl && this.pageControl.updateLayout) {
        this.pageControl.updateLayout.call(this.pageControl, this.pageElement, appView.value, this.lastViewstate);
    }
    this.lastViewstate = appView.value;
},

//*page*.js

updateLayout: function (element, viewState, lastViewState) {
     /// <param name="element" domElement="true" />
     var listView = element.querySelector(".itemslist").winControl;
     if (lastViewState !== viewState) {
          if (lastViewState === appViewState.snapped || viewState === appViewState.snapped) {
               var handler = function (e) {
               listView.removeEventListener("contentanimating", handler, false);
               e.preventDefault();
          }
          listView.addEventListener("contentanimating", handler, false);
          var firstVisible = listView.indexOfFirstVisible;
          this._initializeLayout(listView, viewState);
          if (firstVisible >= 0 && listView.itemDataSource.list.length > 0) {
                listView.indexOfFirstVisible = firstVisible;
           }
       }
   }
},

_initializeLayout: function (listView, viewState) {

    if (viewState === appViewState.snapped) {
        listView.layout = new ui.ListLayout();
    } else {
        listView.layout = new ui.GridLayout();
    }
}, 
```

根据[这个](http://msdn.microsoft.com/en-us/library/windows/apps/hh465371.aspx#snap_ux)msdn 页面，您还可以在视图状态更改影响 CSS 中指定的 CSS 属性或布局时使用媒体查询。对于所有其他更改，应使用 onResize。

# html - 固定宽度左列，可变宽度右列

> ID：12274199
> 
> 赞同：4
> 
> 时间：2012-09-05T03:42:56.807
> 
> 标签：html, css

这是网站的简化布局：

```
#left_column {
  width: 200px;
  height: 100%;
}

<div id="left_column">
</div>

<div id="right_column">
  /* A bunch of 100px width photos that are being floated */
</div> 
```

所以正如代码所暗示的，我有一个左列和一个右列。左列应为 200 像素宽并位于屏幕底部。右列应该占据其余的宽度，并将包含一堆浮动图像（有点像谷歌图像搜索的样子）。如何使用 CSS 和 HTML 做到这一点？我宁愿不使用 JavaScript。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T03:49:37.563

只需在右列的左边缘添加 200px 的边距，然后浮动左列。

```
#left_column {
  width: 200px;
  float: left;
}

#right_column {
  margin-left: 200px;
} 
```

100% 的高度不会像你认为的那样起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T03:57:32.290

HTML：

```
<div id="leftcol">Demo text</div>
<div id="rightcol">More demo text</div> 
```

​CSS：

```
#leftcol{
    position:fixed;
    left:0;
    top:0;
    height:100%;
    width:200px;
    background-color:yellow;
}

#rightcol{
    width:100%;
    -moz-box-sizing: border-box; /*The rest of the browsers support this now*/
    box-sizing: border-box;
    margin:0;
    padding:0;
    padding-left:200px;
    min-height:2000px;
    background-color:blue;
}
​ 
```

[演示](http://jsfiddle.net/ttJfg/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T04:00:25.803

试试这个小提琴 -

[http://jsfiddle.net/hKyzT/](http://jsfiddle.net/hKyzT/)

> HTML

```
<div id="left_column">
    /* A bunch of 100px width photos that are being floated *//* A bunch of 100px width photos that are being floated */
</div>

<div id="right_column">
/* A bunch of 100px width photos that are being floated *//* A bunch of 100px width photos that are being floated *//* A bunch of 100px width photos that are being floated *//* A bunch of 100px width photos that are being floated *//* A bunch of 100px width photos that are being floated *//* A bunch of 100px width photos that are being floated *//* A bunch of 100px width photos that are being floated *//* A bunch of 100px width photos that are being floated *//* A bunch of 100px width photos that are being floated *//* A bunch of 100px width photos that are being floated *//* A bunch of 100px width photos that are being floated *//* A bunch of 100px width photos that are being floated *//* A bunch of 100px width photos that are being floated *//* A bunch of 100px width photos that are being floated *//* A bunch of 100px width photos that are being floated */
</div> 
```

**CSS**

```
html, body, #wrapper, #left_column, #right_column { height: 100%; min-height: 100%; }

#left_column {
  width: 200px;
  float: left;
    border:1px solid green;
    height: 100%;
    min-height: 100%;
}

#right_column {
  margin-left: 200px; border:1px solid red;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T04:14:56.340

我认为高度需要有一个像素值 - 百分比值似乎不会增加高度。

```
<style type="text/css">
#left_column {
    width: 20%;
    float:left;
    background-color:blue;
}
#right_column {
    width:80%;
    float:right;
    background-color:green;
}
div {
    height:1000px;
}
</style>

<div id="left_column">&nbsp;</div>
<div id="right_column">&nbsp;</div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-27T00:08:54.923

这些解决方案并不适合我。根据我在[http://derpturkey.com/two-columns-with-one-fixed-width-and-one-variable-width/](http://derpturkey.com/two-columns-with-one-fixed-width-and-one-variable-width/)上读到的内容，我最终得到了以下内容：

```
#right_column {
    margin-left: 200px;
    float: left;
}

#left_column {
    float: left; 
    width: 200px;
    margin-left: -100%;
} 
```

# ruby-on-rails - 使用 capybara / rspec 测试 .mobile mime 格式

> ID：12274201
> 
> 赞同：0
> 
> 时间：2012-09-05T03:43:07.777
> 
> 标签：ruby-on-rails, url-routing, capybara, mime-types

为了检测和响应移动用户代理，我正在使用

```
Mime::Type.register_alias "text/html", :mobile 
```

我想知道用水豚进行测试的最佳方法是什么。本文建议使用以下方式设置 iphone 驱动程序 `Capybara.register_driver :iphone do |app|`

[http://blog.plataformatec.com.br/2011/03/configuring-user-agents-with-capybara-selenium-webdriver/](http://blog.plataformatec.com.br/2011/03/configuring-user-agents-with-capybara-selenium-webdriver/)

但我想要一种更灵活的方法，通过 url 扩展名设置 mime 类型

```
localhost/index.mobile 
```

我在哪里可以做到这一点

```
visit user_path( format: :mobile) 
```

Rails 理解扩展名并`format`在`params`散列中设置 ，但是我如何获取 url 辅助方法以将其作为文件扩展名添加到所有 url 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T21:43:43.087

我的答案是根据这个 Railscast 将格式保存在会话变量中： [http](http://railscasts.com/episodes/199-mobile-devices) ://railscasts.com/episodes/199-mobile-devices 。我选择使用 URL 扩展而不是查询字符串参数，因为它看起来更匹配。

这是我的代码`application_controller.rb`：

```
def mobile_device?
  session.has_key?(:mobile) ? session[:mobile] : request.user_agent =~ /Mobile|webOS/
end
helper_method :mobile_device?

def prepare_for_mobile
  # avoid messing with .json, .xml
  if request.format == 'text/html'
    # only do this when an explicit extension is present
    case File.extname(URI.parse(request.fullpath).path)
    when '.html'
      session[:mobile] = false
    when '.mobile'
      session[:mobile] = true
    end
    # stop using a session param and go back to letting the user_agent decide
    when '.ua'
      session.delete(:mobile)
    end
    request.format = mobile_device? ? :mobile : :html
  end
end 
```

这是`mime_types.rb`

```
Mime::Type.register_alias "text/html", :ua      # let the user agent decide
Mime::Type.register_alias "text/html", :mobile  # mobile 
```

# javascript - 在 Kinetic.js 中通过多个层处理事件？

> ID：12274208
> 
> 赞同：0
> 
> 时间：2012-09-05T03:43:49.343
> 
> 标签：javascript, events, event-handling, dom-events, kineticjs

我在 layer1 上有一个圆圈，然后在 layer2 上有一个正方形。圆的直径是正方形的宽度，它们的中心相同，圆在正方形的顶部。我该如何设置，以便如果我在 layer1 上触发任何事件，相同的事件将在 layer2 的同一位置执行。所以在这种情况下，如果我点击圆形，也会触发方形的点击事件。当然，这并不意味着我只是想将圆圈的事件连接到正方形的事件，而是我基本上希望在两层都触发事件。

例如，如果

```
circle.on( "click", function() {
    alert("foo");
});

square.on( "click", function() {
    alert("bar");
}); 
```

然后点击圆心应该触发方形点击事件。

而不是通过

```
circle.on( "click", function() {
    alert("foo");
    square.simulate("click"); // don't want this
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T06:17:32.977

如何将圆形和方形添加到组中，然后将点击事件附加到组中？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-24T01:33:09.937

Kinetic 有两件事可以帮助您。

1.  getIntersections() -- 返回鼠标点击点下的所有形状
2.  fire() -- 触发一个事件

Kinetic 文档提到 getIntersections() 执行速度很慢，所以他们更喜欢 getIntersection()，但我从来没有使用过，所以我不能说多少。

[http://kineticjs.com/docs/Kinetic.Stage.html#getIntersection](http://kineticjs.com/docs/Kinetic.Stage.html#getIntersection)

希望这可以帮助。

# android - 带有 Galaxy S3 的 Android 蓝牙 SPP

> ID：12274210
> 
> 赞同：1
> 
> 时间：2012-09-05T03:44:32.057
> 
> 标签：android, bluetooth, galaxy, spp

我正在尝试在运行 Android 4.0.3 的三星 Galaxy S3 和 RN 42 蓝牙芯片之间建立蓝牙连接，[型号](http://www.rovingnetworks.com/products/RN_42_RN42_I_RM)如下：

我使用了很多不同的代码来设置蓝牙串行通信，并且它们都在我之前使用的 HTC Wildfire 上运行良好。但现在我使用的是 Galaxy s3 手机，无法建立连接。这是我正在使用的代码，我在[这里](http://nononux.free.fr/index.php?page=elec-brico-bluetooth-android-microcontroleur)找到了它：

我把权限放在android清单中。

首先，我的蓝牙接口：

```
public class BtInterface {

private BluetoothDevice device = null;
private BluetoothSocket socket = null;
private InputStream receiveStream = null;
private OutputStream sendStream = null;

private ReceiverThread receiverThread;

Handler handler;

public BtInterface(Handler hstatus, Handler h) {
    Set<BluetoothDevice> setpairedDevices = BluetoothAdapter.getDefaultAdapter().getBondedDevices();
    BluetoothDevice[] pairedDevices = (BluetoothDevice[]) setpairedDevices.toArray(new BluetoothDevice[setpairedDevices.size()]);

    for(int i=0;i<pairedDevices.length;i++) {
        if(pairedDevices[i].getName().contains("MyBluetoothChip")) {
            device = pairedDevices[i];
            try {
                socket = device.createRfcommSocketToServiceRecord(UUID.fromString("00001101-0000-1000-8000-00805F9B34FB"));
                receiveStream = socket.getInputStream();
                sendStream = socket.getOutputStream();
            } catch (IOException e) {
                e.printStackTrace();
            }
            break;
        }
    }

    handler = hstatus;

    receiverThread = new ReceiverThread(h);
}

public void sendData(String data) {
    sendData(data, false);
}

public void sendData(String data, boolean deleteScheduledData) {
    try {
        sendStream.write(data.getBytes());
        sendStream.flush();
    } catch (IOException e) {
        e.printStackTrace();
    }
}

public void connect() {
    new Thread() {
        @Override public void run() {
            try {
                socket.connect();

                Message msg = handler.obtainMessage();
                msg.arg1 = 1;
                handler.sendMessage(msg);

                receiverThread.start();

            } catch (IOException e) {
                Log.v("N", "Connection Failed : "+e.getMessage());
                e.printStackTrace();
            }
        }
    }.start();
}

public void close() {
    try {
        socket.close();
    } catch (IOException e) {
        e.printStackTrace();
    }
}

public BluetoothDevice getDevice() {
    return device;
}

private class ReceiverThread extends Thread {
    Handler handler;

    ReceiverThread(Handler h) {
        handler = h;
    }

    @Override public void run() {
        while(true) {
            try {
                if(receiveStream.available() > 0) {

                    byte buffer[] = new byte[100];
                    int k = receiveStream.read(buffer, 0, 100);

                    if(k > 0) {
                        byte rawdata[] = new byte[k];
                        for(int i=0;i<k;i++)
                            rawdata[i] = buffer[i];

                        String data = new String(rawdata);

                        Message msg = handler.obtainMessage();
                        Bundle b = new Bundle();
                        b.putString("receivedData", data);
                        msg.setData(b);
                        handler.sendMessage(msg);
                    }
                }
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }
}
} 
```

然后，我的主要活动，只有一个按钮来连接和聊天：

```
public class MonApp extends Activity implements OnClickListener {

private TextView logview;
private EditText sendtext;
private Button connect, send;

private BtInterface bt = null;

private long lastTime = 0;

final Handler handler = new Handler() {
    public void handleMessage(Message msg) {
        String data = msg.getData().getString("receivedData");

        long t = System.currentTimeMillis();
        if(t-lastTime > 100) {// Pour Èviter que les messages soit coupÈs
            logview.append("\n");
            lastTime = System.currentTimeMillis();
        }
        logview.append(data);
    }
};

final Handler handlerStatus = new Handler() {
    public void handleMessage(Message msg) {
        int co = msg.arg1;
        if(co == 1) {
            logview.append("Connected\n");
        } else if(co == 2) {
            logview.append("Disconnected\n");
        }
    }
};

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    bt = new BtInterface(handlerStatus, handler);

    logview = (TextView)findViewById(R.id.logview);
    sendtext = (EditText)findViewById(R.id.sendtxt);

    connect = (Button)findViewById(R.id.connect);
    connect.setOnClickListener(this);

    send = (Button)findViewById(R.id.send);
    send.setOnClickListener(this);
}

@Override
public void onClick(View v) {
    if(v == connect) {
        bt.connect();
    } else if(v == send) {
        bt.sendData(sendtext.getText().toString());
    }
}
} 
```

当我尝试连接到芯片时，这是我从 logcat 得到的：

```
09-05 11:37:05.515: I/BluetoothPolicyService(2097): getBluetoothDataTransferAllowed 
09-05 11:37:05.520: D/BluetoothPolicyService(2097): MDM: isProfileEnabled = true
09-05 11:37:05.520: D/BluetoothUtils(6868): isSocketAllowedBySecurityPolicy start : device null
09-05 11:37:05.525: V/BluetoothService.cpp(2097): createDeviceNative
09-05 11:37:05.525: V/BluetoothService.cpp(2097): createDeviceNative
09-05 11:37:05.525: V/BluetoothEventLoop.cpp(2097): onCreateDeviceResult
09-05 11:37:05.525: V/BluetoothEventLoop.cpp(2097): onCreateDeviceResult
09-05 11:37:05.525: E/BluetoothEventLoop.cpp(2097): onCreateDeviceResult: D-Bus error: org.bluez.Error.AlreadyExists (Already Exists)
09-05 11:37:05.525: V/BluetoothService.cpp(2097): discoverServicesNative
09-05 11:37:05.525: V/BluetoothService.cpp(2097): ... Object Path = /org/bluez/3094/hci0/dev_00_06_66_43_A1_E6
09-05 11:37:05.525: V/BluetoothService.cpp(2097): ... Pattern = , strlen = 0
09-05 11:37:10.660: V/BluetoothEventLoop.cpp(2097): onDiscoverServicesResult
09-05 11:37:10.660: V/BluetoothEventLoop.cpp(2097): ... Device Path = /org/bluez/3094/hci0/dev_00_06_66_43_A1_E6
09-05 11:37:10.660: E/BluetoothEventLoop.cpp(2097): onDiscoverServicesResult: D-Bus error: org.bluez.Error.ConnectionAttemptFailed (Host is down)
09-05 11:37:10.670: V/N(6868): Connection Failed : Service discovery failed
09-05 11:37:10.670: W/System.err(6868): java.io.IOException: Service discovery failed
09-05 11:37:10.675: W/System.err(6868):     at android.bluetooth.BluetoothSocket$SdpHelper.doSdp(BluetoothSocket.java:462)
09-05 11:37:10.675: W/System.err(6868):     at android.bluetooth.BluetoothSocket.connect(BluetoothSocket.java:240)
09-05 11:37:10.675: W/System.err(6868):     at com.example.bluetooth.BtInterface$1.run(BtInterface.java:68) 
```

我无法弄清楚为什么此代码不适用于 Galaxy s3。我试图在谷歌上搜索蓝牙兼容性问题，但到目前为止我没有找到任何东西。

谢谢 ！

纪尧姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T08:38:06.063

新的 Android ICS 存在大量蓝牙不兼容问题。显然，他们弄乱了蓝牙代码以“提高安全性”。

我发现并报告的一个[错误](http://code.google.com/p/android/issues/detail?id=34161&can=4&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars)（使我的整个嵌入式板无法与任何 Android ICS 设备连接一周）是，在建立与已配对设备的连接时，Android ICS 需要重新验证 - 有或没有 PIN取决于您是否使用[蓝牙 SSP](http://en.wikipedia.org/wiki/Bluetooth#Pairing_mechanisms)（我使用它 - 这意味着对我来说，在没有用户交互的情况下，仍然可以在 Android ICS 上连接 2 个绑定设备 - 但需要更长的时间）。

[请在 Google Bugtracker 上投票这个错误 - 也许有人会修复它......](http://code.google.com/p/android/issues/detail?id=34161&can=4&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars)

也许这也是你的问题？您能否准确指定您的代码在哪一行中断？用 try/catch 等包围你所有的蓝牙系统代码。

无论如何，新的蓝牙行为非常非常糟糕，我听说很多人因此无法连接到他们的旧耳机。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T10:55:38.523

您的代码似乎正确，但正如 Radu 所说，新的蓝牙行为并不那么好。我自己确实遇到了一些麻烦（使用 Android 4.1+），最后使用 BlueTerm 作为我的应用程序的基础，因为它是开源的并且正在工作（至少对于连接部分）。

你可以在这里找到它的来源：http:
[//pymasde.es/blueterm/](http://pymasde.es/blueterm/)

我希望它可以帮助你！
D

# android - Android 应用程序后台数据

> ID：12274213
> 
> 赞同：0
> 
> 时间：2012-09-05T03:44:56.663
> 
> 标签：android

我得到了所有正在运行的后台进程

但我想要一个需要互联网的正在运行/已安装的应用程序列表

例如

当我在手机中安装 Facebook 应用程序时，它将在后台运行并需要互联网

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T05:05:45.423

您需要使用 PackageManager.GET_PERMISSIONS 标志，例如：

```
PackageManager p = context.getPackageManager(); 
final List<PackageInfo> appinstall = 
    p.getInstalledPackages(PackageManager.GET_PERMISSIONS | 
                                      PackageManager.GET_PROVIDERS) 
```

# facebook - 是否有可靠的方法来记录用户发起的 facebook apprequests？

> ID：12274223
> 
> 赞同：0
> 
> 时间：2012-09-05T03:46:32.143
> 
> 标签：facebook

似乎`apprequests`从用户到用户的唯一方法是通过对话。似乎我还需要在我的服务器上发布一个带有邀请 ID 的 ajax 帖子来记录它们的发生。这有点不可靠。

有没有一种方法可以让我在不需要发帖的情况下获取请求列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T04:13:34.050

您只能通过调用`/me/apprequests`用户来列出待处理的请求。任何其他已处理的请求，您需要在请求的初始点保存它们。

# vba - 从 Excel VBA 设置单词表边框

> ID：12274228
> 
> 赞同：1
> 
> 时间：2012-09-05T03:47:48.080
> 
> 标签：vba, excel, border

我正在尝试从 Excel VBA 设置单词表的边框。许多网站建议如下：

```
wrdTable.Borders(wdBorderTop).LineStyle = wdLineStyleSingle 
```

但我在尝试时遇到错误（集合的请求成员不存在）。但是，我可以使用以下代码带来内部边框：

```
wrdTable.Borders(xlDiagonalUp).LineStyle = xlContinuous 
```

同样我试过：

```
wrdTable.Borders(xlEdgeTop).LineStyle = xlContinuous 
```

带来顶部边框，但我得到对角线。如何在我的单词表中应用边框（内边框和外边框）？我用的是office 2007。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T04:25:05.667

这些文章将使您走上正确的轨道：

[http://www.shaunakelly.com/word/formatting/border-basics.html](http://www.shaunakelly.com/word/formatting/border-basics.html)

[http://www.shaunakelly.com/word/styles/borders-in-table-styles.html](http://www.shaunakelly.com/word/styles/borders-in-table-styles.html)

假设您`wrdTable`已正确设置为 msword 文档中的 table 对象，您有几个选项：

```
wrdTable.Borders.Enable = True 
```

将此设置为 True 将对象的边框设置为与该对象的当前默认边框属性相同的线型和线宽。

否则指南是

*   首先设置 .LineStyle。
*   仅当 .LineStyle 不是 wdLineStyleNone 时
    *   设置 .LineWidth
    *   设置.Color。

这是一个更详细的版本：

```
With wrdTable.Borders
    .OutsideLineStyle = wdLineStyleSingle
    .OutsideLineWidth = wdLineWidth075pt
    .OutsideColor = wdDarkRed
End With 
```

有关语法的其他参考，请参阅此页面：

[http://msdn.microsoft.com/en-us/library/office/aa221392(v=office.11​​).aspx](http://msdn.microsoft.com/en-us/library/office/aa221392(v=office.11).aspx)

（注意，这个代码我是用手机输入的，所以未经测试）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-12T17:03:16.120

在“Microsoft Visual Basic”中选择菜单“Tools”->“References”并激活“Microsoft Word xx.x Object Library”。然后

```
wrdTable.Borders(wdBorderTop).LineStyle = wdLineStyleSingle 
```

将工作。

我也在寻找相同的功能几个小时。

# python - 在 Django 模板中获取 GAE 类 collection_name 的计数

> ID：12274233
> 
> 赞同：0
> 
> 时间：2012-09-05T03:49:06.390
> 
> 标签：python, google-app-engine, django-templates, google-cloud-datastore

我正在使用带有 python 2.7 和 Django 模板的 Google App Engine。

我的对象模型是这样设置的：

```
Class parent(db.Model):
  parentName = db.StringProperty()

Class child(db.Mode):
  childName = db.StringProperty()
  parent = db.ReferenceProperty(parent, collection_name='children') 
```

我的python代码将所有父母传递给模板

```
qry_parents = parent.all()
parents = qry_parents.fetch(30)
template_values = {'parents':parents}

self.response.out.write(template.render(path, template_values)) 
```

现在，我正在尝试做但似乎无法弄清楚的是如何从父对象中的隐含集合“孩子”中显示孩子的数量。这是我的 template.html 示例

```
<html>
<body>
  <table>
  {% for p in parents %}
    <tr>
      <td>{{ p.parentName }}</td>
      <td>{{ p.children.items|length }}</td> <!-- always zero! -->
    </tr>
  {% endfor %}
  </table>
</body>
</html> 
```

我似乎无法参考正确的方法来计算孩子的数量。我觉得我很接近了，因为我得到了零，而不是 None 或 null。有人可以指出我正确的方向吗？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T08:48:44.223

你不需要`items`。`children`已经是一个`db.Query`对象了。你最好还是这样做`p.children.count`。

# java - 如何使用反射在运行时更改注释值？

> ID：12274234
> 
> 赞同：3
> 
> 时间：2012-09-05T03:49:07.003
> 
> 标签：java, spring, reflection, annotations

下面是注释。

```
@Before(value="execution(* class.method(**)") 
```

我可以使用java反射更改单值注释的值吗？

请建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-18T08:16:11.973

可以在[此处](https://stackoverflow.com/a/14276270/1713801)找到您要查找的内容的描述。但是要小心使用这种方法，它的一些警告也被描述了。

此外，注释的保留策略必须是**runtime**，为此。

评论中的链接指向您的问题，导致发布的帖子*看起来*像您要询问的内容，但不同之处在于它是关于 JPA/Hibernate 注释的，在运行时您可以获得一个*代理*类到您的类。

# php - 使用 PHP 通过 ODBC 查询数据源

> ID：12274245
> 
> 赞同：0
> 
> 时间：2012-09-05T03:50:23.053
> 
> 标签：php, sql, odbc, totalview

我正在尝试使用简单的 SQL 查询来查询数据源，但出现以下错误：*Warning: odbc_exec() [function.odbc-exec]: SQL error: [SimbaLNA][Simba][SimbaEngine ODBC Driver ]select (<< ??? >>[agent_id], [agent_name]) from agent;，SQLExecDirect 中的 SQL 状态 37000 在 C:\xampp\htdocs\Tas\showtables.php 第 22 行*

我知道我的 ODBC 连接已建立并正确连接，因为我能够执行以下代码并接收所有表名的列表。：

```
if (!$conn) {
 {exit("Connection Failed: " . $conn);}
}
$result = odbc_tables($conn);
$tables = array();
while (odbc_fetch_row($result)){
  if(odbc_result($result,"TABLE_TYPE")=="TABLE") {
    echo"<br>".odbc_result($result,"TABLE_NAME");
  }//end if
}//end while 
```

当我继续并尝试执行以下代码时：

```
/* Fetch The Fieldnames into an Array */
if($result = odbc_exec($conn,"SELECT agent_id, agent_name FROM agent")) {
  for($i = 1;$i <= odbc_num_fields($result);$i++) {
    $odbc['rows']['fields'][$i] = odbc_field_name($result,$i);
  } //end for
  unset($i);
  odbc_free_result($result);
}//end if
else {
  exit("Error in SQL Query");
}//end else 
```

我收到上述错误。有谁知道为什么会发生这种情况？

如果需要更多信息，请告诉我。

提前谢谢了

# c# - 访问属性的最佳方式

> ID：12274246
> 
> 赞同：7
> 
> 时间：2012-09-05T03:50:24.570
> 
> 标签：c#, .net, reflection, attributes, annotations

我正在开发一个使用一些属性标记的框架。这将在 MVC 项目中使用，并且大约会在我每次查看视图中的特定记录时发生（例如 /Details/5）

我想知道是否有更好/更有效的方法来做到这一点或一个好的最佳实践示例。

无论如何，我有几个属性，例如：

```
[Foo("someValueHere")]
String Name {get;set;}

[Bar("SomeOtherValue"]
String Address {get;set;} 
```

寻找这些属性/按照它们的价值行事的最有效方法/最佳实践是什么？

我目前正在做这样的事情：

```
[System.AttributeUsage(AttributeTargets.Property)]
class FooAttribute : Attribute
{

    public string Target { get; set; }

    public FooAttribute(string target)
    {
        Target = target;
    }
} 
```

在我对这些属性采取行动的方法中（简化示例！）：

```
public static void DoSomething(object source)
{
    //is it faster if I make this a generic function and get the tpe from T?
    Type sourceType = source.GetType();

    //get all of the properties marked up with a foo attribute
    var fooProperties =  sourceType
      .GetProperties()
      .Where(p => p.GetCustomAttributes(typeof(FooAttribute), true)
      .Any())
      .ToList();

    //go through each fooproperty and try to get the value set
    foreach (var prop in fooProperties)
    {          
        object value = prop.GetValue(source, null);
        // do something with the value
        prop.SetValue(source, my-modified-value, null);
     }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T03:56:15.243

`Attribute.GetCustomAttribute`和`PropertyInfo`/`MemberInfo.GetCustomAttribute`是获取属性对象的推荐方式。

~~虽然，我通常不会枚举所有具有属性的属性；您通常希望使用特定属性，因此您只需`GetCustomAttribute`直接调用即可。~~如果您正在寻找任何属性的属性，那么枚举那些属性以查找基于 GetCustomAttribute() 的属性，这是最好的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T04:38:19.337

处理属性时没有太多选择 - 你的代码是好的和合理的，它也不太可能成为你主要的性能问题。唯一直接的事情是`ToList`完全没有必要挂断电话。

* * *

旁注：与性能相关的问题应该看起来差不多

> “我已经测量了我的代码，并且部分 XXX 似乎花费了太多时间 (YYY)。这段代码的时间目标是 ZZZ。我做 XXX 的方式是否合理/我在哪里可以改进它？”。

请注意，在您的情况下，您缺少 YYY 和 ZZZ 时间部分 - 所以您不能真正说出您的情况是否慢。您可能希望使用 DB/其他 IO 绑定操作开始测量，因为它更有可能加速您的整体代码。

在您认为此属性相关代码是主要性能问题之后，您可以考虑对结果进行某种缓存甚至某种代码生成（通过缓存 lambdas 来设置必要的值，甚至是完整的 IL 生成）。

# php - 如何将数学 mysql 查询应用于数据库中的每一行？

> ID：12274248
> 
> 赞同：0
> 
> 时间：2012-09-05T03:50:37.717
> 
> 标签：php, mysql

我正在为 MMORPG 和管理员后端设计一个数据库。我需要一个函数，允许我添加指定数量的游戏主要货币：`Gold`到数据库中的每个帐户。

**这就是我所拥有的：**

```
function massAddGold($gold_amount){
    dbconnect();
    $value=mysql_query("SELECT * from `mmo_db1`.`users`;");
    while ($row=mysql_fetch_array($value)){
        $currentgold=$row['gold'];
        $newgold=$currentgold+$gold_amount;
        mysql_query("UPDATE  `mmo_db1`.`users` SET  `gold` =  \"$newgold\";");
    }
    dbclose();
} 
```

`mmo_db1`数据库的名称在哪里。

当我执行命令时，`massAddGold("50");`我会检查数据库。它采用具有最高值的行`Gold`，将 加到该`50 gold`行，然后将该值应用于所有行。我需要它单独在每一行上执行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T03:53:12.373

为什么在两个查询中做一个有什么问题

```
UPDATE users SET  gold = gold + 50; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T03:53:25.273

mysql_query("更新 `mmo_db1`. `users`SET `gold`= 金+50");

ps，mysql * =坏

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T03:53:26.130

为什么要先选择？如果你想给每个人额外的 50 金币，为什么不这样做：

```
UPDATE  `mmo_db1`.`users` SET  `gold` =  `gold`+ $newgold; 
```

# android - 如何在另一个 Fragment 中获取从 FragmentList 中选择的项目

> ID：12274250
> 
> 赞同：0
> 
> 时间：2012-09-05T03:50:47.977
> 
> 标签：android, fragment

假设我有一个带有 10 个选项的 FragmentList，单击它会将我带到另一个 Fragment。我如何才能在新片段的 10 个列表中选择项目？如果可能，请发布代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T04:00:48.047

我相信这类似于这个[问题](https://stackoverflow.com/a/5195026/1443717)。

您可以调用 FramgmentManager 并通过 id 获取任何 Fragment，然后获取任何公开存储的变量。例如：选择了什么选项。[获取 Fragment 的示例](http://developer.android.com/guide/components/fragments.html#CommunicatingWithActivity)

或者可能`getSelectedItemId()`从该片段中的 ListFragment获取

# mono - 如何使用单声道实现 Unity 之类的内部调用

> ID：12274252
> 
> 赞同：4
> 
> 时间：2012-09-05T03:50:55.733
> 
> 标签：mono, unity3d

C# 端代码

```
[WrapperlessIcall]

[MethodImpl(MethodImplOptions.InternalCall)]

private extern void INTERNAL_set_rotation(ref Quaternion value); 
```

如何将此方法从 C++ 公开到单声道

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-05T08:44:46.870

您需要致电`mono_add_internal_call`：

```
mono_add_internal_call ("YourClass::INTERNAL_set_rotation", yourclass_INTERNAL_set_rotation); 
```

这里有一些文档：[http ://www.mono-project.com/Embedding_Mono#Exposing_C_code_to_the_CIL_universe](http://www.mono-project.com/Embedding_Mono#Exposing_C_code_to_the_CIL_universe)

这是一个代码示例：[https ://github.com/mono/moon/blob/8d8ece884382d653d215b0da5bf633079566d816/src/deployment.cpp#L579](https://github.com/mono/moon/blob/8d8ece884382d653d215b0da5bf633079566d816/src/deployment.cpp#L579)

# php - 如何在图像地图上进行选择？

> ID：12274254
> 
> 赞同：0
> 
> 时间：2012-09-05T03:51:04.883
> 
> 标签：php, html, multipleselection

[http://magic.cardbinder.com/](http://magic.cardbinder.com/)

我正在修补我的网站...仍在学习。我希望能够对图像进行一些选择。具体来说，我想知道如何在 menuButtons 中选择最多 2 个选项。所以我可以在 cardChoice 中进行选择，然后输入一些搜索内容，然后缩小我的搜索范围。

我想这样做，如果您单击 menuButtons 中的 2 个按钮，它将在数据库中进行这些选择。所以在第二次点击时，就像在搜索框中按回车一样。

```
<div id="leftMenu">
<h1>CardBinder</h1>
<form name="mainMenu" action="cardChoice.php" method="post">
  <div>
    <select name="chooseSet">
    <option value="option1">Option 1</option>
    <option selected="selected" value="option2">Option 2</option>
    <option value="option3">Option 3</option>
    </select>
  </div>
  <div>
  <br/><img src="/menu.png" alt="Menu" usemap="#menuButtons" /> <br/><br/>
  <map name="menuButtons">
    <area shape="circle" coords="112,36,35" alt="White" href="/Mana/W.gif" />
    <area shape="circle" coords="189,93,35" alt="Blue" href="/Mana/U.gif" />
    <area shape="circle" coords="163,186,35" alt="Black" href="/Mana/B.gif" />
    <area shape="circle" coords="59,186,35" alt="Red" href="/Mana/R.gif" />
    <area shape="circle" coords="35,93,35" alt="Green" href="/Mana/G.gif" />
    <area shape="circle" coords="69,278,35" alt="Planeswalker" href="" />
    <area shape="circle" coords="149,278,35" alt="Creature" href="" />
    <area shape="circle" coords="34,347,35" alt="Enchantment" href="" />
    <area shape="circle" coords="111,347,35" alt="Artifact" href="" />
    <area shape="circle" coords="188,347,35" alt="Land" href="" />
    <area shape="circle" coords="74,413,35" alt="Instant" href="" />
    <area shape="circle" coords="153,413,35" alt="Sorcery" href="" />
  </map>
  </div>
  <div>
    <input name="search" type="text" placeholder="Card Name" size="20" maxlength="50" />
  </div>    
</form>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T03:59:08.050

尽管图像映射仍然在 html5 的规范中，但它们可能非常难以匹配，并且它们似乎永远不会完美对齐。

如果您喜欢 Web 开发并想在这方面做得更好，我建议您学习[jQuery](http://jquery.com)。它真的很容易学习，它应该可以让你用更少的像素数处理来解决你的图像映射问题。

# shell - 在 shell 脚本中打印文件的时间

> ID：12274255
> 
> 赞同：2
> 
> 时间：2012-09-05T03:51:12.467
> 
> 标签：shell, unix

我正在尝试使用以下 shell 脚本打印所有文件的时间。但我发现并不总是字节 42 到 46 是时间，因为它会因用户名和其他详细信息中更多/更少的字节而改变。还有其他方法可以获取时间吗？

```
#!/bin/sh
for file in `ls `
do
    #echo `ls -l $file`
    echo `ls -l $file | cut -b 42-46`
done 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T03:55:05.727

使用 awk。

尝试`ls -l | awk '{ print $6 $7 $8}'`

这将打印 ls -l 的第 6、第 7 和第 8 个字段，由空格分隔

如果字段不同，您可以更改数字以调整哪些字段。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T04:39:27.717

的输出`ls`取决于文件的年龄。对于小于约 6 个月的文件，它是月、日、时间（以小时和分钟为单位）；对于 6 个月以上的文件，它会打印月、日、年。

该`stat`命令可用于获取更准确的时间。

例如，要打印某些文本文件的最后修改时间和文件名，请尝试：

```
stat -c '%y %n' *.txt 
```

从手册：

```
 %x     Time of last access
   %X     Time of last access as seconds since Epoch
   %y     Time of last modification
   %Y     Time of last modification as seconds since Epoch
   %z     Time of last change
   %Z     Time of last change as seconds since Epoch 
```

[人统计](http://unixhelp.ed.ac.uk/CGI/man-cgi?stat)

# sas - 有什么方法可以停止 SAS 中的“日志窗口已满”消息

> ID：12274257
> 
> 赞同：0
> 
> 时间：2012-09-05T03:51:52.277
> 
> 标签：sas, logfile

是否有任何设置可以应用于 SAS 会话，这样我就永远不会收到“日志窗口已满”消息？

我仍然希望将日志写入日志窗口 - 我只是不想收到消息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T10:31:37.143

您可以使用 DMSLOGSIZE 选项增加日志的大小，但最多只能达到 999,999（默认为 99,999）：http: [//support.sas.com/documentation/cdl/en/lrdict/64316/HTML/default/ viewer.htm#base-sysop-dmslogsize.htm](http://support.sas.com/documentation/cdl/en/lrdict/64316/HTML/default/viewer.htm#base-sysop-dmslogsize.htm)

我认为你不能让它比这更大。您可以做的另一件事是将其保存到文件中。如果你这样做，它可能会让日志变得比这更大，但我认为它不会让你在日志查看器中看到更多的行。我肯定会将此 Q 移至 SAS-L，就好像有更好的解决方案一样，其中一个人会知道。

# git - 恢复 git 提交到（无分支）

> ID：12274268
> 
> 赞同：3
> 
> 时间：2012-09-05T03:53:49.313
> 
> 标签：git, version-control

我在（无分支）分支上进行了提交，然后进行了拉动，意识到我在错误的分支上并进行了“结帐大师”和另一个拉动。我现在找不到要推送到主分支的原始提交，也无法切换到（无分支）。有没有办法恢复我的提交或获得差异？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T04:20:15.767

将为您列出您所做的[`git reflog`](http://git-scm.com/docs/git-reflog)所有提交，并且（例如）`git merge HEAD@{1}`将其合并回您的分支。

```
$ git reflog
734713b... HEAD@{0}: commit: fixed refs handling, added gc auto, updated
d921970... HEAD@{1}: merge phedders/rdocs: Merge made by recursive.
1c002dd... HEAD@{2}: commit: added some blame and merge stuff 
```

来自[`git rev-parse`](http://git-scm.com/docs/git-rev-parse)：

```
<refname>@{<n>}, e.g. master@{1} 
```

> 一个 ref 后跟`@`一个包含在大括号对（例如`{1}`, `{15}`）中的序号规范的后缀，指定该 ref 的第 n 个先前值。

请注意， a`git rebase -i`也会这样做。

修订[选择](http://git-scm.com/book/en/Git-Tools-Revision-Selection)页面提到：

> 重要的是要注意这些`reflog`信息**是严格本地**的——它是您在存储库中所做的事情的日志。
> 其他人的存储库副本上的引用不会相同；在您最初克隆存储库后，您将有一个空的 reflog，因为您的存储库中还没有发生任何活动。

配置`gc.reflogExpire`指定何时删除比此时间更早的 reflog 条目；**默认为 90 天**。

# python - 如何在python中压缩相同前缀的文件？

> ID：12274270
> 
> 赞同：0
> 
> 时间：2012-09-05T03:54:02.857
> 
> 标签：python

如果我有一个包含一堆文件的目录“C:\Files”：

A_File1 A_File2 B_File1 B_File2

遍历文件以将具有相同前缀的任何文件压缩到单个 zip 文件中的最佳方法是什么？例如，输出将是“A.zip”和“B.zip”及其相关文件。

我知道如何遍历文件：

```
for item in os.listdir("C:\FILES"): 
```

但我不知道压缩文件的最佳方法是什么，或者是否有一些 python 库可以帮助解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T03:56:04.883

使用标准库中的 glob 模块，而不是 os.listdir：

```
from glob import glob

for file in glob("C:\\FILES\\A_File*"):
    ... 
```

（如果您使用反斜杠分隔目录，请使用两个，因为单个是 Python 字符串中的转义字符）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T04:08:08.623

这假定`C:\FILES\`仅包含您要压缩的文件，并且每个文件的格式为`PREFIX_*`.

```
import glob, os
import zipfile
import defaultdict

# We organize the file names in a dict to
# make writing out the zip files easier

d = defaultdict(list)

for fname in glob.glob(r'C:\FILES\*'):
   d[fname.split('_')[0]].append(fname)

# Now we go through each file by letter
for letter in d:
    with zipfile.ZipFile(letter+'.zip','w') as f:
        for filename in d[letter]:
            f.write(filename, os.path.basename(filename), zipfile.ZIP_DEFLATED) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T03:57:16.223

```
for fname in glob.glob('c:\files\A_*'):
    print fname 
```

# random - 带有过程随机 (x) 的方案编程

> ID：12274276
> 
> 赞同：1
> 
> 时间：2012-09-05T03:54:26.753
> 
> 标签：random, scheme, equals, probability

我不明白我必须如何解决这个问题的方案：

使用 random 来定义一个过程波动，它接受一个数字 x 并返回值 x-2、x-1、x、x+1 或 x+2 之一，这些值是随机选择的，概率相等。

我尝试使用多个随机数并添加 x 两次，但我找不到答案，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T04:10:52.890

尝试这个：

```
(define (fluctuate x)
  (+ x (- (random 5) 2))) 
```

这是它的工作原理：

*   `(random 5)`生成 [0, 4] 范围内的随机整数
*   从前一个范围中减去 2 会产生范围 [-2, 2] 中的随机整数
*   添加`x`到先前的结果会根据要求生成值 x-2、x-1、x+0、x+1、x+2

请注意，该`random`过程通过伪随机数生成器以相等的概率随机选择一个数字，使用的特定算法取决于您的 Scheme 解释器的实现。

# jquery - 重新绑定 jquery 对话框/模态

> ID：12274290
> 
> 赞同：0
> 
> 时间：2012-09-05T03:56:21.843
> 
> 标签：jquery, dialog, modal-dialog

感谢早期的帮助（http://stackoverflow.com/questions/12224717/cant-execute-jquery-post-or-ajax-after-initial-run），现在重新绑定点击事件可以正常工作。但是，我似乎无法重新绑定对话框定义。从这里的其他答案中阅读，似乎答案在于使用“代表”，但我似乎无法弄清楚。这是带有对话框的更新代码：

```
$('[id^="del"]').live('click', function(){
    var valname = $(this).attr('id').split('del_');
    $.post("delthis.php", {id: ""+valname[1]+""}, function(data) {
            $("#dynamic_section").html(data);
    });
    return false;
});

$('[id^="thismodal"]').dialog({
    autoOpen: false,
    show: 'blind',
    hide: 'explode',
    width: '760',
    resizable: false,
    modal: true
});

// Dialog Link
$('[id^="mlink"]').live('click', function(e) {
    e.preventDefault();
    var valname = $(this).attr('id');
    var sname = valname.split("mlink_");
    var modal = "#thismodal" + sname[1];
    $(modal).dialog('open');
    //return false;
});

// html
// loop
<div>
<p>
   <a href='#' id='del_<?php echo $row['id']; ?>'>Delete <?php echo $row['id']; ?></a><br />
  <a href='#' id='mlink_<?php echo $row['id']; ?>'>Show Modal <?php echo $row['id']; ?></a>
  <div id='thismodal<?php echo $row['id']; ?>'>
    This is the modal showing element # <?php echo $row['id']; ?>
  </div>
 </p>
</div>
// end loop 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T04:36:24.680

这个 SO 问题有很大帮助：[如何在对话框被 AJAX 重写后重新绑定对话框？](https://stackoverflow.com/questions/9975742/how-do-i-rebind-the-dialog-after-it-is-being-rewritten-by-ajax)

所以对于我上面的问题，我刚刚创建了：

```
var initModal = function () { 
    $('[id^="thismodal"]').dialog({
        autoOpen: false,
        show: 'blind',
        hide: 'explode',
        width: '760',
        resizable: false,
        modal: true
    });
}; 
```

并在每次我重新填充 html 时调用它

# c# - 为什么 Regex 不提供输入数据的机会？

> ID：12274295
> 
> 赞同：0
> 
> 时间：2012-09-05T03:57:08.630
> 
> 标签：c#, .net, regex, textbox, mask

我有一个事件没有机会在 TextBox 中输入数据。当我尝试在文本框中输入数据时，文本框不会这样做：

```
private void Login_textbox_KeyPress(object sender, KeyPressEventArgs e)
{
    if (!System.Text.RegularExpressions.Regex.IsMatch(textbox1.Text, @"^[a-zA-Z]+$"))
        e.Handled = true;
} 
```

我只想在 TextBox 中输入不是数字或任何符号的数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T04:30:24.707

尝试使用以下代码

```
private void textBox1_KeyPress(object sender, KeyPressEventArgs e)
{
     if (!System.Text.RegularExpressions.Regex.IsMatch(e.KeyChar.ToString() , @"^[a-zA-Z]+$")) 
         e.Handled = true;
} 
```

谢谢！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T04:18:36.667

看来您正在使用 c#。

然后您需要遵循的步骤：

1) 将文本框的 causeValidation 属性设置为 true

2) 为原因验证设置事件监听器

```
myTextBox1.Validating +=
  new System.ComponentModel.CancelEventHandler(myTextBox1_Validating);
myTextBox1.Validated += 
  new System.EventHandler(myTextBox1_Validated); 
```

3) 实现这些事件处理函数

```
private void myTextBox1_Validating(object sender,System.ComponentModel.CancelEventArgs e)
{        
   if(!CheckIfTextBoxNumeric(myTextBox1))
   {
       myLabel.Text =  "Has to be numeric";
       e.Cancel = true;
   }
}
private void myTextBox1_Validated(object sender,System.EventArgs e)
{
   myLabel.Text = "Validated first control";          
} 
```

如果您想使用 maskedTextBox，请参阅[http://msdn.microsoft.com/en-us/library/ms234064(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms234064(v=vs.80).aspx)

# syntax - PHP 类方法中使用的未定义变量没有错误

> ID：12274297
> 
> 赞同：0
> 
> 时间：2012-09-05T03:57:19.780
> 
> 标签：syntax, syntax-error, php

我花了 10 多个小时来找出调试我的 PHP 程序的错字。我预计 PHP 在使用未定义的变量时会产生错误。但是当它被用作方法中的对象时，它不会。有什么原因吗？

```
<?php

    $oClass = new MyClass;
    // $oCless->tihs('key', 'taht');    //<-- triggers the error: Notice: Undefined variable
    $oClass->tihs('key', 'taht');
    echo $oClass->arr['key'];

    class MyClass {
        public $arr = array('key' => 'foo');

        function tihs($key, $value) {
            $tihs->arr[$key] = $value;  //<-- this does not cause an error message.
        }
    }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T04:06:41.957

这是因为PHP的诡计......

在幕后，PHP 实际上是在创建一个名为 的对象`tihs`，将一个数组添加到该对象`arr`并设置`key`为`value`。

这是`print_r($tihs);`分配后的：

```
stdClass Object
(
    [arr] => Array
        (
            [key] => taht
        )

) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T04:28:55.827

通常，如果错误报告级别设置为`E_ALL | E_STRICT`（或`E_ALL`从 PHP 5.4.0 开始），它应该会输出 E_STRICT 错误。例如，这段代码：

```
error_reporting(E_ALL | E_STRICT);
$tihs->adrr = 453; 
```

产生：

```
Strict Standards: Creating default object from empty value in [...] 
```

有趣的是，如果您专门创建**一个数组**而不是普通变量作为不存在的对象的属性，例如：

```
error_reporting(E_ALL | E_STRICT);
$tihs->adrr[25] = 453; 
```

没有显示严格的标准错误！看起来这可能是 PHP 人员可能想要修复的问题，因为我不知道这已记录在案，也不认为这种行为有正当理由。

作为记录，在这两种情况下，无论错误如何，都会动态创建一个新的[stdClass](https://stackoverflow.com/questions/931407/what-is-stdclass-in-php)，就像 sberry 在[他的回答](https://stackoverflow.com/a/12274353/1329367)中提到的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T04:01:45.693

你似乎拼错`$oClass`了`$oCless`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T04:08:56.943

同意， $oCless 而不是 $oClass 会给你一个未定义的变量错误。

此外，“this”是大多数语言中的关键字，也可能在 php 中。您应该避免使用它，以免它在其他语言中成为一种习惯。如果你使用“this”作为函数和变量名，你会得到更多的错误。你甚至不会编译东西。

# android - 如何在 Android 上将“选择操作”更改为“使用完成操作”？

> ID：12274298
> 
> 赞同：8
> 
> 时间：2012-09-05T03:57:20.190
> 
> 标签：android, android-intent, android-4.0-ice-cream-sandwich, nfc

我有一个 NFC 应用程序，它允许用户扫描他们的 NFC 标签并执行一些操作。我遇到了一个问题，即当用户扫描标签时，它会如何`"Choose an action"`但不是`"Complete action using"`。这两者的不同之处在于，`"Complete action using"`允许用户选择`"always"`按钮。如果它显示 " `Choose an action"`，它不记得用户的决定，并且用户每次扫描 NFC 标签时都必须选择应用程序。

请检查下面的截图，图片告诉千字。如何强制`"Complete action using"`对话？

![选择一个动作](../Images/350c5a09145f6bda23a98a70e8ba7930.png) ![使用完成动作](../Images/90e201dc7253d2ff052a44e0ef5f2bac.png)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-19T14:02:36.803

事实证明，您无法更改 Android 默认`Intent`选择器。您所能做的就是创建自己`DialogFragment`的列表，`Activities`该列表可以响应给定的列表`Intent`并使用自定义逻辑添加按钮。希望这可以帮助。

# java - ViewPager 还是片段？

> ID：12274305
> 
> 赞同：1
> 
> 时间：2012-09-05T03:58:22.513
> 
> 标签：java, android, android-fragments, android-viewpager

我需要制作一个应用程序，它基本上是一个带有真假按钮的 5“页”测验。我认为每个“页面”都不需要新的布局/活动。那将是矫枉过正。片段或 ViewPager 是否合适？它是否违反任何 Android 指南？他们俩对我来说似乎都有意义。由于平板电脑/替代布局，可能会产生更多碎片。任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T04:20:22.167

我一直在我的一个项目中使用 ViewPager，用于在相似但截然不同的视图之间滑动。

它工作得很好。

这取决于你的流量。如果您的用户可以随机浏览视图，则 View Pager 将运行良好。如果您希望事情按特定顺序排列，那么 ViewPager 可能不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T04:16:52.243

您可以通过动态创建 5 个页面并将其加载到单个布局/活动中来实现

通过使用动态加载页面有助于将来您想添加 2 页的问题，这很容易做到

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-12T07:44:53.613

根据您的流程，您也可以使用 this 在同一活动中，您只需单击按钮即可更改问题。

如果您希望用户重新访问所有问题，您可以使用查看寻呼机。

# php - WordPress $_POST 变量在表单提交时完全消失

> ID：12274313
> 
> 赞同：0
> 
> 时间：2012-09-05T04:00:32.073
> 
> 标签：php, forms, wordpress, post

我在 WordPress 中创建了一个页面模板来显示带有 action="" 的表单。很简单，它不会在提交时发布任何表单数据。我试过`var_dump($_POST)`了，但它`array(0) {}`每次都给我。我尝试了一些网站提供的用于创建表单的示例，但我无法重现相同的结果。

我已经彻底寻找这个问题的答案，但似乎没有任何效果。它必须是内部的或非常先进的东西。我只想知道为什么我的表单数据不会发布以及它可能会去哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-30T03:16:06.780

使用非 WP 页面检查您的数据，这意味着将 php 文件放在 web-root 中，并让表单操作指向它，例如 ...action="/formtest.php"，然后在该页面上：

```
<?php 
 var_dump($_POST);
?> 
```

这将测试您是否*真的*没有得到 POST 变量。然后，由于您有 99% 的可能会发现它们正在被发布，因此可能的问题是您的页面正被其他地方提到的主题重定向到某个地方（例如，我的主题包括一个关于 'template_redirect' 的钩子......）。

如果您精通主题并且只是在寻找快速修复 - 以在主题升级时丢失它为代价 - 您可以仅为您的**temp.php**页面创建一个异常，但许多开发人员处理它的方式是通过插件，或处理您通过 Ajax 的表单。许多其他人也遇到过同样的问题，因此，要么将代码添加到插件中，要么执行页面内 Ajax（因为无论如何您都提交给*SELF ......）。*

[此页面](http://www.sitepoint.com/handling-post-requests-the-wordpress-way/)将为您提供有关 WP Ajax 的帮助，它是一个信誉良好且编写良好的文档。

# php - 使用基本 CRUD 功能扩展 PDO 的建议

> ID：12274314
> 
> 赞同：1
> 
> 时间：2012-09-05T04:00:39.723
> 
> 标签：php, class, pdo, crud, extend

就在最近我开始自己重写一个以前程序编写的网站，我选择 PDO 作为包装器，因为我也习惯了 OOP 的做事方式。我想要一些关于类结构的建议。

大部分都是数据库驱动的，比如添加类别和子类别、产品品牌、产品、用户等。我想它们中的每一个都可以是一个类，因为我需要对它们进行 CRUD 操作，所以我需要一种通用的插入方式，更新，删除MySql数据库中的记录。问题不在于代码，我想（并且已经）根据我的需要自己编写一些 CRUD 操作，真正的问题是结构以及我将如何正确分发和扩展这些类。

现在我已经编写了 3 种不同的方法：

1.  一个名为“Operations”的类，它将被所有其他需要 CRUD 函数的类扩展，该类包含非常通用的属性，例如 $id、$atributes、$fields 和 $table，当然还有插入、更新的通用方法， 删除。这样我就可以创建，假设我的 Product 对象带有一些参数（名称、类别、价格）并立即 Product->insert() 将其放入数据库，而无需将任何参数传递给插入函数。此类中的 CRUD 函数不接受参数，它们依赖于创建对象的属性。

2.  与上面相同，但 CRUD 函数接受参数，使它们（我想）更通用，以防我只需要插入一些东西而不用之前创建具有无用属性的对象。

3.  'Operations'类扩展了PDO，工作方式与2类似，但现在我创建数据库连接时可以直接访问它们，而不依赖于其他对象。

我倾向于第一个选项，因为我认为，在大多数情况下，它将满足我对这个网站所做的一切，同样，该网站已经编码但在程序上，这一直是一团糟，所以基本上我需要重新做的事情，但OO。

除了 CMS 或已经编码的包装器（这样做的目的是学习 PDO 并习惯 OOP），这将是最好的方法吗？不限于我提到的选项。

这是迄今为止我设法编写的“操作”类，我一直在做类似沙盒的测试，不要介意西班牙语变量名。也欢迎有关代码的建议。

```
class Operaciones {     
private $database;

protected $id;
protected $atributos;

protected $tabla;
protected $campos;

public function __construct($link) {
    $this->database = $link;
}

public function insertar() {
    if (!$this->verificarCamposNulos($this->atributos, $this->campos))
        echo 'Campos nulos<br />';
    else {
        $this->prepararCampos();
        $placeholders = $this->generarPlaceholders();           

        $stmt = $this->database->prepare("INSERT INTO {$this->tabla} ({$this->campos}) VALUES ({$placeholders})");

        $valores = array_values($this->atributos);
        $stmt->execute($valores);

        $stmt = NULL;           
        echo 'Se ha insertado exitosamente';
    }
}

public function modificar() {
    if (!$this->verificarCamposNulos() || empty($this->id))
        echo 'Campos nulos<br />';
    else {
        $this->prepararCampos('=?');                        

        $stmt = $this->database->prepare("UPDATE {$this->tabla} SET {$this->campos} WHERE id = {$this->id}");

        $valores = array_values($this->atributos);
        $stmt->execute($valores);

        $stmt = NULL;           
        echo 'Se ha modificado exitosamente';           
    }
}

private function generarPlaceholders() {
    for($i=0;$i<count($this->atributos);$i++) 
        $qmarks[$i] = '?';

    return implode(',', $qmarks);
}

// Check if the values to be inserted are NULL, depending on the field format given
private function verificarCamposNulos() {
    $n_campos = explode(',', $this->campos);

    $valores = array_values($this->atributos);

    foreach($n_campos as $i => $result) {       
        if (strstr($result, '@'))           
            if (empty($valores[$i]))
                return false;
    }

    return true;
}   

// Removes the '@' from each field, used to check which fields are NOT NULL in mysql
private function prepararCampos($sufijo = NULL) {
    $n_campos = explode(',', $this->campos);

    foreach($n_campos as $i => $result)         
        $n_campos[$i] = str_replace('@', '', $result) . $sufijo;

    $this->campos = implode(',', $n_campos);
}
} 
```

# java - 如何使用 facebook-java-api/facebook graph api 检索我的朋友签到详细信息

> ID：12274324
> 
> 赞同：1
> 
> 时间：2012-09-05T04:02:03.910
> 
> 标签：java, facebook-graph-api

我正在构建一个 java 应用程序，它与我的 facebook 帐户集成并获取我朋友的检查详细信息。

我遵循的步骤：

1) 下载 facebook-java-api 并在 eclipse 中创建一个动态 web 项目。

2）参考文章认证用户_https://developers.facebook.com/docs/authentication/client-side/

3) 请参考以下 URL 以查看签入 API 参考 [https://developers.facebook.com/docs/reference/api/](https://developers.facebook.com/docs/reference/api/)

在此页面上，在“搜索”部分下，我遇到了[https://graph.facebook.com/search?type=checkin](https://graph.facebook.com/search?type=checkin) 链接，当我们单击此 URL 时，它会导航到页面_https://graph.facebook.com/ search?type=checkin&access_token=<.........> （它会自动为您创建一个访问令牌，前提是您已登录您的 Facebook 帐户），在那里我可以看到我的朋友签入详细信息。

现在如何将相同的功能集成到我的 Java 应用程序中？

检索朋友的签到详细信息并将其显示在 jsp 页面上的任何其他建议。

问候。

# python - 如何在 django admin 中将 modelchoicefield 转换为 charfield？

> ID：12274332
> 
> 赞同：0
> 
> 时间：2012-09-05T04:03:28.750
> 
> 标签：python, django, django-forms, django-admin, django-1.3

这是我的示例模型：

```
class Booking(models.Model):
   email = models.EmailField(unique=True)
   first_name = models.CharField(max_length=256)
   last_name = models.CharField(max_length=256)

class MailList(models.Model):
   email = models.EmailField(unique=True)
   booking = models.ForeignKey(Booking, blank=True, null=True) 
```

我有一个表单，我已经将 FK 字段修改为 CharField。我的代码去：

表格.py

```
class MailListAdminForm(forms.ModelForm):
        booking= forms.CharField(required=False)
        class Meta:
           model = MailList

    def clean_myfield(self):
        data = self.cleaned_data['booking']
        try:
            self.booking= Booking.objects.get(pk=data)
            return data
        except (KeyError, Booking.DoesNotExist):
            raise forms.ValidationError('Invalid Booking ID. Please try again.') 
```

管理员.py

```
class MailListAdmin(admin.ModelAdmin):
    form = mailListAdminForm 
```

我收到一个错误，“Django 版本：1.3.1

异常类型：ValueError

无法分配“u'143590'”：“MailList.booking”必须是“Booking”实例。”

知道如何解决这个问题吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T05:47:41.457

如果我理解你的问题

然后你得到这个错误，因为

在您看来，您正试图存储一个值`MailList.booking`

属性 booking 是表 Booking 所以的 FK

您不能存储必须传递预订表对象的值

`MailList.booking` 喜欢_

```
`MailList.booking` = bookingobject 
```

`bookingobject` 应该是您的 Booking 表的实例

# css - 使用延迟或可以平滑中断的关键帧的队列 CSS 动画

> ID：12274335
> 
> 赞同：5
> 
> 时间：2012-09-05T04:03:47.797
> 
> 标签：css, css-transitions, css-animations

首先，一个小提琴：http: [//jsfiddle.net/AATLz/](http://jsfiddle.net/AATLz/)

这里的本质是有一组使用-webkit-transition-delay 排队的动画。第一个元素 0.4 秒，第二个 0.8 秒，第三个 1.4 秒等。默认情况下，它们排在最后一个到第一个，当父级具有“扩展”类（使用该按钮切换）时，它们排在最后一个。

这意味着添加 '.expanded' 时的动画将框一个一个地拉出，而当类被删除时则相反。

那是花花公子。当类在动画中间切换时，问题就开始出现了。如果你切换，比如说，在第二个盒子动画之后，在它们开始动画之前会有一个延迟，因为有几个延迟计时器正在等待。

这里的延迟显然有点笨拙。

我想到的两种选择是 1）**CSS 关键帧动画**，我不完全确定如何连续激活多个元素，以及 2）**JS 控制时间**- 使用类似[jQuery Transit](http://ricostacruz.com/jquery.transit/)的东西。我不确定哪个更有能力/更优雅，或者我是否缺少另一个选择。

任何输入都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-01T18:19:44.940

jsfiddle：http: [//jsfiddle.net/Bushwazi/fZwTT/](http://jsfiddle.net/Bushwazi/fZwTT/)

稍微改了一下。用js控制时间。带有 css 的动画。

CSS：

```
* {
    margin:0;
    padding:0;
}
#container {
        background: orange;
        height: 100px;
        position: relative;
        width: 100px;  
}
.box {
        height: 100px;
        left: 0;
        position: absolute;
        top: 0;
        width: 100px; 
        -webkit-transition:all 0.5s ease-in-out 0s;
        -moz-transition:all 0.5s ease-in-out 0s;
        -o-transition:all 0.5s ease-in-out 0s;
        transition:all 0.5s ease-in-out 0s;
        -webkit-transform: translate3d(0,0,0);
}           
.box-1 {
        background: red;
}
.box-2 {
        background: green;
}
.box-3 {
        background: yellow;
}
.box-4 {
        background: blue;
}
.box-1 .box-1 {
    left:100px;
}
.box-2 .box-2 {
    left:200px;
}
.box-3 .box-3 {
    left:300px;
}
.box-4 .box-4 {
    left:400px;
} 
```

HTML：

```
<div id="container" class="box-0" data-status="default" data-box="0">
    <div class="box box-1"></div>
    <div class="box box-2"></div>
    <div class="box box-3"></div>
    <div class="box box-4"></div>
</div>

<button id="ToggleAnim">Toggle</button> 
```

JS：

```
(function(){
    var testies = {
        to: 0,
        init: function(){
            $button = $('#ToggleAnim');
            $anim_elm = $('#container');
            $(function(){
                testies.el();
            });
        },
        el: function(){ // el ==> event listeners
            $button.on('click', testies.toggleBoxes);
        },
        toggleBoxes: function(evt){
            var status = $anim_elm.attr('data-status'),
                    pos = $anim_elm.attr('data-box');
            window.clearTimeout(testies.to);
            // if default ==> build
            // if killing ==> build
            // if building ==> kill
            // if done ==> kill
            if(status == 'build' || status == 'done'){
                    testies.kill();
            } else {
                    testies.build();
            }
            evt.preventDefault();
        },
        build: function(){
            bpos = $anim_elm.attr('data-box');
            if(bpos < 4){
                bpos++;
                $anim_elm.attr('data-status', "build").attr('data-box', bpos).addClass('box-' + bpos);
                testies.to = window.setTimeout(testies.build, 500);
            }
            if(bpos == 4)$anim_elm.attr('data-status', "done");
            console.log('BUILD: ' + bpos);
        },
        kill: function(){
            kpos = $anim_elm.attr('data-box');
            if(kpos > 0){
                db = kpos - 1;
                $anim_elm.attr('data-status', "kill").attr('data-box', db).removeClass('box-' + kpos);
                testies.to = window.setTimeout(testies.kill, 500);
            }
            console.log('KILL: ' + kpos);
            if(kpos == 0)$anim_elm.attr('data-status', "default")
        }
    }
    testies.init();
})(); 
```

# c# - Linq to Objects - 汇总 groupby 计数

> ID：12274336
> 
> 赞同：1
> 
> 时间：2012-09-05T04:04:00.130
> 
> 标签：c#, linq, object, group-by, sql-order-by

我有一个 Linq to Objects 问题

我们正在制造产品并尝试按月报告 lossCodes，按总 lossCode 排序。

所以源数据（如**List< myProduct > myProducts**）看起来像：

```
.lossDate / .lossCode
4/10/2012 / TooLarge
4/11/2012 / TooSmall
4/14/2012 / TooSmall
4/14/2012 / TooSmall
4/14/2012 / TooSmall
5/1/2012  / TooLarge
5/10/2012 / TooSmall
4/10/2012 / TooLarge
5/10/2012 / WrongColor 
```

结果转换应如下所示：

```
 |  TooSmall |  TooLarge | WrongColor
04-2102 |    4      |    2      |    0
05-2012 |    1      |    1      |    1 
```

所以这是一个按（月，lossCode）分组......加上对“聚合”损失的排序（所以 TooSmall cnt=5 然后 TooLarge cnt=3 然后 WrongColor cnt=1 是我想要得到的排序顺序） - 但是我在最终排序时遇到问题。

```
query = from prod in myProducts
  group prod by new {Month = prod.lossDate.ToString("yyyy-MM"), prod.lossCode} into g
  select new
  {
     g.Key.Month,                   
     ReasonCode = g.Key.lossCode,
     NumLosses = g.Count()
  }
  into resultSet
  orderby resultSet.NumLosses descending
  select resultSet; 
```

这段代码无疑是错误的（orderby resultSet.NumLosses 显然不正确）......但我不明白如何对子组 Counts 求和才能进行最终排序。由于结果集的一些其他用途，我宁愿不尝试将“总计”记录移植到结果集（并且对于匿名类型，我不确定如何完成）。以前有人经历过这样的事情吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T04:27:20.807

我假设你想订购`NumLosses`

```
query = (from prod in myProducts
  group prod by new {Month = prod.lossDate.ToString("yyyy-MM"), prod.lossCode} into g
  select new
  {
     g.Key.Month,                   
     ReasonCode = g.Key.lossCode,
     NumLosses = g.Count()
  }
).OrderByDescending(x => c.NumLosses) 
```

# android - android：使用按钮适配器创建的按钮顺序不正确

> ID：12274337
> 
> 赞同：1
> 
> 时间：2012-09-05T04:04:02.957
> 
> 标签：android, android-adapter

安卓新手。我在 GridView 中创建了 12 个（3 行，4 列）按钮，并按照教程创建了一个 toast 以在按下按钮后显示某些内容。按钮在屏幕上正确显示，但 toast 消息不正确。当我按下左上角的按钮时，我得到左下角的吐司。当我按下左中按钮时，我得到右中吐司。当我按下左下角的按钮时，我得到**右上角的**吐司。

```
Visually:

button location:
1 2 3 4
5 6 7 8
9 10 11 12

toast message
9 10 11 12
8 7 6 5
4 3 2 1 
```

这是适配器代码：

```
public class KeypadAdapter extends BaseAdapter {
    private Context mContext;

    // Declare button click listener variable
    private OnClickListener mOnButtonClick;

    // Method to set button click listener variable
    public void setOnButtonClickListener(OnClickListener listener) {
        mOnButtonClick = listener;
    }

    public KeypadAdapter(Context c) {
        mContext = c;
    }

    public int getCount() {
        return mButtons.length;
    }

    public Object getItem(int position) {
        return mButtons[position];
    }

    public long getItemId(int position) {
        return 0;
    }

    private KeypadButtons[] mButtons = { KeypadButtons.ADD,
            KeypadButtons.SUBTRACT, KeypadButtons.MULTIPLY,
            KeypadButtons.DIVIDE, KeypadButtons.DET, KeypadButtons.INV,
            KeypadButtons.POW2, KeypadButtons.POWN, KeypadButtons.TRANSPOSE,
            KeypadButtons.NORM1, KeypadButtons.NORM2, KeypadButtons.NORMINF };

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        Button btn;
        if (convertView == null) { // if it's not recycled, initialize some
                                    // attributes
            btn = new Button(mContext);
            KeypadButtons keypadButton = mButtons[position];
            if (keypadButton != KeypadButtons.DUMMY) {
                btn.setOnClickListener(mOnButtonClick);
            }

            // Set CalculatorButton enumeration as tag of the button so that we
            // will use this information from our main view to identify what to
            // do
            btn.setTag(keypadButton);
        } else {
            btn = (Button) convertView;
        }

        btn.setText(mButtons[position].getText());
        return btn;
    }

} 
```

这是活动代码

```
public class MainActivity extends Activity {
    GridView mKeypadGrid;
    KeypadAdapter mKeypadAdapter;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // Get reference to the keypad button GridView
        mKeypadGrid = (GridView) findViewById(R.id.gridView);

        // Create Keypad Adapter
        mKeypadAdapter = new KeypadAdapter(this);

        // Set adapter of the keypad grid
        mKeypadGrid.setAdapter(mKeypadAdapter);

        // Set button click listener of the keypad adapter
        mKeypadAdapter.setOnButtonClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                Button btn = (Button) v;
                // Get the KeypadButton value which is used to identify the
                // keypad button from the Button's tag
                KeypadButtons keypadButton = (KeypadButtons) btn.getTag();

                // Process keypad button
                ProcessKeypadInput(keypadButton);
            }
        });

        mKeypadGrid.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View v,
                    int position, long id) {

            }
        });

    }

    protected void ProcessKeypadInput(KeypadButtons keypadButton) {
        // TODO Auto-generated method stub
        Toast.makeText(
                MainActivity.this,
                keypadButton.getText().toString() + " "
                        + keypadButton.toString(), Toast.LENGTH_SHORT).show();

    }
} 
```

起初，祝酒的顺序似乎颠倒了。所以我试着做

```
KeypadButtons keypadButton = mButtons[mButtons.length - 1 - position]; 
```

这固定了底部的两行，但他的顶部行仍然颠倒了。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T04:49:52.730

Views are recycled (as you obviously know because you're checking if the convertview is null). A simple fix here is to move the `btn.setTag(keypadButton); to outside of the`if(convertView==null)` block and execute it always before you return from getView();

# c++ - 有没有在C或C++中实现reverse memmem的函数？

> ID：12274339
> 
> 赞同：0
> 
> 时间：2012-09-05T04:04:13.913
> 
> 标签：c++, c, algorithm, function

我想在 HTTP 标头中找到“\r\n\r\n”。我知道它在数据包的末尾，所以如果我反向搜索 "\r\n\r\n" 我会得到很好的性能。

是否有在 C 或 C++ 中实现反向搜索的函数？如果有，是哪一个？谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-05T04:08:46.220

反向搜索“\r\n\r\n”可能会给您错误的结果。这是不正确的逻辑，因为 HTTP 正文可能包含“\r\n\r\n”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T04:06:41.537

在 C++ 中，许多容器提供`rbegin()`和`rend()`，它们实现了反向迭代。然后，您可以将这些交给任何标准算法。

例如，[`std::string::rbegin()`](http://en.cppreference.com/w/cpp/string/basic_string/rbegin)和[`std::string::rend()`](http://en.cppreference.com/w/cpp/string/basic_string/rend)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T05:16:55.203

试图这样做来解决您的问题是不正确的；如果您已经知道标头的长度，则无需搜索`\r\n\r\n`; 它位于长度的`n-4`位置。`n`如果您不知道长度，则从头开始计算长度与搜索`\r\n\r\n`.

话虽如此，如何进行“反转”的问题`strstr`还是`memmem`有效的。对于`strstr`，最佳方法是简单地重复调用 forward `strstr`，在起点使用前一个匹配加上一个字符，并保持找到的最后一次出现。对于`memmem`，您可以通过调整最佳正向算法以反向运行（基本上只是否定所有索引）来获得更好的性能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T05:58:05.043

就在这里。

假设`header`是`std::string`：

```
header.rfind( "\r\n\r\n" ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T06:24:09.153

是的，有 - `std::find_end`。像这样使用：

```
string  str = "abcabc";
string  substr = "abc";     

string::iterator ret = 
  std::find_end(str.begin(), str.end(), substr.begin(), substr.end());

if (ret == str.end())  cout << "not found\n";
else                   cout << "at: " << result - str.begin() << "\n"; 
```

另外，如果您正在搜索，`std::string`则有`std::string::rfind()`方法。`std::find_end()`适用于任何容器，包括`char[]`

# jquery - jQuery Autocomplete .data("autocomplete") 未定义

> ID：12274343
> 
> 赞同：33
> 
> 时间：2012-09-05T04:04:55.000
> 
> 标签：jquery, autocomplete, undefined, jquery-autocomplete

当我尝试使用下面的代码实现自动完成时，我收到一条错误消息：

```
.data("autocomplete") is undefined 
```

但是，如果我从最后删除 .data() 方法，它可以正常工作（只是没有 .data() 提供的可定制图形）。谁能告诉我出了什么问题？

```
$("input#testInput").bind("autocompleteselect", function (event, ui) {

  }).autocomplete({
      appendTo: "#autoCompList",
      source: function (request, response) {
          $.ajax({

              url: JSONP CALL URL
              dataType: "jsonp",
              data: {
                  featureClass: "P",
                  style: "full",
                  maxRows: 12,
                  name_startsWith: request.term
              },
              success: function (data) {
                  response($.map(data.data, function (item) {
                      fbPageJson = item;
                          return {
                              label: item.name,
                              image: item.picture,
                              json: item,
                          }
                  }));
              },
          });
      }

  }).data("autocomplete")._renderItem = function (ul, item) {
      return $("<li></li>").data("item.autocomplete", item).append("<a><img src='" + item.image + "' alt='no photo'/></a>" + item.label).appendTo(ul);
  }; 
```

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-01-22T22:07:58.853

我也有同样的问题，基于jquery ui的1.10.0版本，我觉得你应该试试

```
data('uiAutocomplete') 
```

代替

```
data('autocomplete') 
```

根据 Johnny 的评论，我检查了 .data() 函数的工作原理。Yes, jQuery returns null from .data() call when selector does not find any items.

因此，如果您的选择器没有匹配的元素，则不会创建自动完成对象并将其添加到自定义数据对象中。

所以似乎最好这样做：

```
 $(selector).autocomplete({ your autocomplete config props here });
    if ( $(selector).data() ) {

    // some jQueryUI versions may use different keys for the object. so to make sure,
    // put a breakpoint on the following line and add a watch for $(selector).data(). 
    // then you can find out what key is used by your jQueryUI script.

        var ac = $(selector).data('uiAutocomplete');
        if ( ac ) {
           // do what you want with the autoComplete object. below is the changed version of an example from jqueryUI autocomplete tutorial

           ac._renderItem = function(ul, item) {
                return $("<li>")
                    .append("<a>" + item.label + "</a>")
                    .appendTo(ul);
            };
        }
    } 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-03T00:03:57.207

`data('ui-Autocomplete')`解决了我的烦恼。我认为它来自`jquery 1.7`with `jquery-ui 1.8`。`data('autocomplete')`没关系。具有这些文件的最新版本的相同脚本不起作用。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-09-19T12:05:57.450

## 我找到了解决方案！

有些人认为“ui-autocomplete”是错误的，所以他们使用“autocomplete”或“uiAutocomplete”，但这是错误的。实际上，“ui-autocomplete”是做到这一点的正确方法。

我有同样的问题，我和朋友一起发现了这段代码的问题。反而：

```
.data('ui-autocomplete')._renderItem = function (ul, item) {
       if (!_.include(self.idArr, item.id)) {
            return $('<li></li>').data('ui-autocomplete-item', item).append('<a>' + item.name + '</a>').appendTo(ul);
            }
    }; 
```

利用：

```
._renderItem = function (ul, item) {
      if (!_.include(self.idArr, item.id)) {
         return $('<li></li>').data('ui-autocomplete-item', item).append('<a>' + item.name + '</a>').appendTo(ul);
           }
       }; 
```

我认为组合框和自动完成返回一个数据（'ui-autocomplete'），所以如果你输入 .data('ui-autocomplete') 你正在做类似的事情：

```
.data('ui-autocomplete').data('ui-autocomplete') 
```

怎么了....好吧，实际上我不知道为什么这不起作用以及为什么没有它起作用，但是相信我，删除 .data('ui-autocomplete') 并感到高兴！

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-05T18:23:14.163

实际上，在您的成功函数中，您正在调用`response`并返回一个对象，例如

```
return {
           label: item.name,
           image: item.picture,
           json: item,
       } 
```

但在下面一行

```
return $("<li></li>").data("item.autocomplete", item).append("<a><img src='" + item.image + "' alt='no photo'/></a>" + item.label + " Number of Likes: " + item.likes).appendTo(ul); 
```

您正在使用`item.likes`的返回对象中不可用，所以这是问题所在。我想你可以像这样使用它

```
success:function(data) {
    var result = $.map(data, function (item){
    return {
            label: item.name,
            image: item.picture,
            item.likes 
        };
    });
    response(result);
} 
```

还要保留`item.label`内部`<a></a>`（这可能不是导致错误的原因），例如

```
return $("<li></li>").data("item.autocomplete", item).append("<a><img src='" + item.image + "' alt='no photo'/>"+item.label+"</a>").appendTo(ul); 
```

并确保在以下行

```
$.map(data.data, function (item) // notice data.data 
```

不管是应该`data.data`还是只有`data`。就我而言，您还可以从对象中删除它`json: item`，因为您没有在任何地方使用它。

**更新：**更改以下行

```
.data("autocomplete")._renderItem = function (ul, item) {...}; 
```

至

```
.data("autocomplete")?._renderItem = function (ul, item) {...}; // notice the ? mark 
```

或者

```
if(typeof $('#Your_Input_Id').val()!="undefined")
{
    $('#Your_Input_Id').autocomplete({....});
} 
```

或者

```
var mydata=$('#Your_Input_Id').autocomplete(...).data('autocomplete');
if(mydata)
    mydata._renderItem = function (ul, item) {...}; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-07T17:38:37.937

如果您查看站点演示中最新的组合框示例，您会看到它们使用了 data('ui-Autocomplete')。我遇到了和你一样的问题。我之前使用的是 jquery-1.6.2 和 jquery-ui-1.8.16。一旦我将文件更新为 jquery-1.9.1 和 jquery-ui-1.10.0，错误就得到了修复。我假设旧的 jquery-ui 自动完成没有设置 data('ui-Autocomplete') 属性，因此在检索时它是空的/未定义的。我希望这对其他人有所帮助，因为您可能已经解决了这个问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-15T07:58:32.440

您可以实现下面提到的行

> .autocomplete("实例")._renderItem = function(ul, item) {

在状态

> .data("自动完成")._renderItem = function (ul, item) {

根据 Jquery 站点[Jquery AutoComplete 文档和示例](http://jqueryui.com/autocomplete/#custom-data)中提供的文档， 您将找到此代码。

从 jquery 1.10 的升级版本开始，他们对代码进行了更改。希望这会帮助你。

# python - python调试：替换两个未知子字符串之间的字符串

> ID：12274344
> 
> 赞同：2
> 
> 时间：2012-09-05T04:05:48.697
> 
> 标签：python, replace

这是我下面的python脚本，我尝试使用变量连续数字`sub()`替换所有值之间`<StartNum>`的所有值然后，将结果写入一个新的文本文件。任何人都可以指出错误？`</StartNum>``n`

```
import re
f1 = open('name.xml', 'r')
f2 = open('result.txt', 'w')
data=f1.read()
n=5000
for line in f1:
      f2.write(re.sub('<StartNum>(.*)</StartNum>', r'<StartNum>%s</StartNum>' % str(n), data))
      if "<StartNum>" in line:
          n=n+1
f1.close() 
f2.close() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T04:14:53.003

您的代码有一些问题。

1.  您正在将文件 f1 读入数据，但您继续向我们 f1 循环。读取数据后，您可以关闭文件。
2.  您可能想要拆分线路。您可以通过多种方式做到这一点。该`readlines`方法可能是最直接的。
3.  当您在循环中评估正则表达式时，它可能会非常慢，因为每次迭代都必须重新编译它。相反，您可以提前编译正则表达式并使用它。
4.  在您的`re.sub`中，您`data`用作源，而您实际上想要该行。

您还可以做其他事情来改进代码，但上面列出的那些是非常必要的。

我猜这可能会做你想要的。

```
import re
f1 = open('name.xml', 'r')
f2 = open('result.txt', 'w')
data = f1.readlines()
f1.close()
n = 5000
rex = re.compile('<StartNum>(.*)</StartNum>')
for line in data:
    f2.write(rex.sub(r'<StartNum>%s</StartNum>' % str(n), line))
    if "<StartNum>" in line:
        n += 1
f2.close() 
```

给定names.xml的

```
<root>
    <StartNum>1</StartNum>
    <StartNum>5</StartNum>
    <StartNum>8</StartNum>
    <StartNum>9</StartNum>
    <StartNum>13</StartNum>
    <StartNum>33</StartNum>
    <foo>
        <bar baz="5" />
    </foo>
</root> 
```

result.txt 将是：

```
<root>
    <StartNum>5000</StartNum>
    <StartNum>5001</StartNum>
    <StartNum>5002</StartNum>
    <StartNum>5003</StartNum>
    <StartNum>5004</StartNum>
    <StartNum>5005</StartNum>
    <foo>
        <bar baz="5" />
    </foo>
</root> 
```

# sqlite - 从 sqlite 数据库返回自动生成的列值

> ID：12274345
> 
> 赞同：2
> 
> 时间：2012-09-05T04:05:55.747
> 
> 标签：sqlite, c#-3.0

如何在 c# 中从 sqlite 数据库返回自动生成的列值。我正在使用 Sqlite.data.dll。

通过执行查询尝试：“选择 last_insert_rowid() 但它没有；似乎无法正常工作，因为它返回 0。我正在使用 SqliteDataReader 对象来获取结果。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T06:54:04.853

我尝试了这些命令，它运行良好（即使`last_insert_rowid()`调用来自另一个事务）：

```
sqlite> create table mytable(pk integer primary key, other stuff);
sqlite> insert into mytable values(null, 42);
sqlite> select last_insert_rowid();
1 
```

唯一的要求`last_insert_rowid()`是在*同一个*数据库连接上调用；请检查你没有打开另一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T04:15:13.290

你的id增加了吗？然后试试这个：

选择最大值（id）

或者你可以参考这篇文章

[点击这里](https://stackoverflow.com/questions/177323/how-to-read-the-last-row-with-sql-server)

# php - 如何在 Amazon EC2 免费套餐上启用 cURL 扩展

> ID：12274346
> 
> 赞同：7
> 
> 时间：2012-09-05T04:05:58.560
> 
> 标签：php, curl, amazon-ec2

我目前正在尝试`cURL`在我的 EC2 服务器（免费层）上启用。

我已经安装`php5_curl`并且能够通过 SSH 通过 php 运行 curl。

我正在使用以下文件来查看是否正确安装了 cURL。

测试卷曲.php

```
<?php
    function _iscurlsupported() {
            if (in_array ('curl', get_loaded_extensions())) {
                return true;
            }
            else {
                return false;
            }
    }

    if (_iscurlsupported()) {
            echo "cURL is supported\n";
    }
    else {
            echo "cURL isn't supported\n";
    }
?> 
```

通过 ssh: 的命令`php testCurl.php`显示支持 curl。我通过浏览器访问它时的命令显示不支持 curl。

我检查了`php.ini`位于 php5/apache2 中的文件（浏览器加载的 php.ini 文件（通过另一个脚本测试））并且找不到扩展名。

我检查了位于我的服务器上的“extensions_dir”目录，并且 curl.so 文件位于那里。

我不确定为什么在通过浏览器访问我的脚本时无法运行 curl。

任何帮助将不胜感激。

干杯，jt234

注意：如果您需要更多信息，请询问。我的问题类似（如果不一样）[无法在亚马逊 ec2 免费层上使用 PHP curl，](https://stackoverflow.com/questions/11598810/unable-to-use-php-curl-on-amazon-ec2-free-tier)但问题尚未解决。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T23:30:45.657

在 php.ini 文件的末尾添加以下行：

```
extension=curl.so 
```

如果你想找到它的位置，你可以通过 SSH 运行：

```
$ locate curl.so 
```

它应该接近：/usr/lib/php5/20090626+lfs/curl.so

# drupal - 在drupal 7中每个术语过滤一个块中的节点

> ID：12274348
> 
> 赞同：1
> 
> 时间：2012-09-05T04:06:15.113
> 
> 标签：drupal, drupal-7, drupal-modules, drupal-views, drupal-taxonomy

我想制作类似于[www.kickstarter.com/discover/categories/art](http://www.kickstarter.com/discover/categories/art)上的块的东西，这是每个术语块更改的内容（仅显示所选术语的特色节点）

我正在使用视图 3 并设法阻止，但我在应用动态过滤器时遇到了困难..

关于如何做到这一点的任何想法？我确定我只是缺少一个小配置:) 提前谢谢

![截屏](../Images/facd55f2455695a2552da3aeff49c296.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T06:35:28.380

在视图的编辑页面中，找到“高级”部分下的“上下文过滤器”，然后单击“添加”

1- 形成列表，选择“内容：具有分类术语 ID”，然后单击“应用”

2-设置您需要的配置，然后单击“应用”

现在您可以按术语 id 过滤结果。例如 "your-page/3, your-page/4, your-page/15) 其中 (3, 4 和 15) 是术语 ID。

**编辑：** 好吧，在下面的过滤器设置表单中，`When the filter value is NOT available`选择`Provide default value`然后选择（我们必须选择数字，因为您试图将它们显示到的页面在下面）`Raw value from URL``Path component``3``3``taxonomy/term/[tid]`

希望这行得通……穆罕默德。

# android - 单击后隐藏列表视图

> ID：12274355
> 
> 赞同：2
> 
> 时间：2012-09-05T04:07:28.617
> 
> 标签：android, scroll, visibility

我有一个列表视图，当它被点击时，它必须是不可见的。它工作得很好，但是当屏幕向上和向下滚动时，那些不可见的又会重新出现。有谁知道如何解决这些问题。

这是我的 ListItemClick 的代码片段

```
 protected void onListItemClick(ListView l, View v, int position, long id) {
            super.onListItemClick(l, v, position, id);
             v.setVisibility(View.GONE);

                 Object o = this.getListAdapter().getItem(position);

                 Contact1 c = (Contact1) o;     

                 Toast.makeText(this, c.getDisplayName(),
                 Toast.LENGTH_SHORT).show();

                 Toast.makeText(this, c.getId(), Toast.LENGTH_SHORT).show();
                 ids.add(c.getDisplayName()); 

            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T04:13:34.720

发生这种情况是因为每次滚动列表时，`getView()`都会调用列表视图的适配器方法，然后再次生成列表项。因此，根据您的需要，您需要有一个自定义适配器并覆盖其`getView`方法，并在其中

```
@override

public View getView(View view) //Just a mock method, do not copy paste
{

   if(!isVisible[position]){ // isVisible is an array which holds whether a view at position is visible or not
      //make it invicsible here
    }
  return view;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T04:18:18.843

该项目，我将假设它是一个`Contact1`对象，仍在数组中（或您用来保存项目的任何容器）。

您将需要以下两件事之一：

1）从数组中删除项目然后重新生成列表视图

2）保留不可见项目的列表（如建议的桑迪），然后不为它们创建视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T04:49:53.237

您可以使用该 BaseAdpter 并根据视图位置使其可见和不可见

```
public class ContactsAdapter extends BaseAdapter {

    ArrayList<ContactInfo> mlist;
    Context mcontext;
   // this arraylist used to contains click item

   List<String> checkednamelist;

public ContactsAdapter (Context context,ArrayList<ChatInfo> mchtlist) {   

        checkednamelist = new ArrayList<String>();   
        mlist =  mchtlist;
        mcontext = context;    
    }

@Override
public int getCount() {
    return mlist.size();
}

@Override
public Object getItem(int postion) {
    return mlist.get(postion);
}

@Override
public long getItemId(int position) {
    return position;
}

@Override
    public View getView(int position, View convertview, ViewGroup viewgroup){
        View view = null;
        if(convertview == null){
            LayoutInflater inflater = context.getLayoutInflater();
            view = inflater.inflate(R.layout.contactrow, null);

            ContactHolder holder = new ContactHolder();

            holder.txtviewfirstname = (TextView)view.findViewById(R.id.firstname);
            holder.txtviewphone = (TextView)view.findViewById(R.id.phone);
            holder.chkselected = (CheckBox)view.findViewById(R.id.check);

chkselected .setOnClickListener(new OnClickListener() {
        @Override
    public void onClick(View v) {
   // here you can add selected item name for make it invisible from list
  checkednamelist.add("Stringvalures");

});

  // this code is helps to achieve that
try{
            if (checkednamelist.contains("yourstringname")) {
                            // here make visible your cotrol
                chkleft.setChecked(true);
                chkleft.setVisibility(View.VISIBLE);
            } else {

                            // here make Invisible your cotrol
                chkleft.setChecked(false);
                chkleft.setVisibility(View.INVISIBLE);
            }   
        }catch(Exception e){
            Log.i(TAG, "Exception while checkbox make unchecked when scrolling"+e);
        }

        view.setTag(holder);

    }
        else{
            view = convertview;
        }
        ContactHolder holder2 = (ContactHolder) view.getTag();
        holder2.txtviewfirstname.setText(list.get(position).firstname);
        holder2.txtviewphone.setText(list.get(position).phonenumber);
        holder2.chkselected.setChecked(list.get(position).selected);
        return view;
    } 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T04:14:15.607

如果您使用自定义适配器并且还想在滚动时隐藏，那么您需要在单击列表视图时维护一个标志，然后在内部`getView()`根据位置创建您的列表视图或列表视图项目，或者您可以将所有内容隐藏为不可见。

# javascript - 为什么 textarea 在全屏模式下不可编辑？

> ID：12274356
> 
> 赞同：0
> 
> 时间：2012-09-05T04:07:30.003
> 
> 标签：javascript, jquery, html, fullscreen

我正在使用以下 jquery 插件在我的网络应用程序中启用全屏。

[https://github.com/martinaglv/jQuery-FullScreen](https://github.com/martinaglv/jQuery-FullScreen)

它工作得很好，除了当我处于全屏模式时我的文本区域不可编辑？为什么是这样？它是浏览器的东西还是插件？

它似乎没有以任何方式被禁用...

我的测试代码如下：

```
 <!DOCTYPE html>
<html>
<head>
    <title></title>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
    <script type="text/javascript" src="https://raw.github.com/martinaglv/jQuery-FullScreen/master/fullscreen/jquery.fullscreen.js"></script>
</head>
<body>
    <div id="content">
        <textarea></textarea>
        <button>
            Go Go Fullscreen</button>
    </div>
    <script type="text/javascript">
        (function () {

            if ($.support.fullscreen) {

                $('button').click(function (e) {

                    $('#content').fullScreen();

                });
            }

        })();
    </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T04:18:30.070

有一种解决方法（至少对于 Chrome），但我不知道它是如何影响您使用的插件的。您必须传递一些指令以允许键盘输入：

```
document.body.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT); 
```

**更新：**

您可以很容易地修改插件。此函数将更改以反映上述内容：

```
function requestFullScreen(elem){
    if (elem.requestFullscreen) {
        elem.requestFullscreen();
    } else if (elem.mozRequestFullScreen) {
        elem.mozRequestFullScreen();
    } else if (elem.webkitRequestFullScreen) {
        elem.webkitRequestFullScreen();
    }
} 
```

默认情况下，插件强制浏览器进入全屏模式，不允许键盘输入。

来自 MDN的[更多信息](https://developer.mozilla.org/en-US/docs/DOM/Using_full-screen_mode)，以及我发现一些线索[的线程。](https://github.com/marijnh/CodeMirror/issues/733)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T04:17:07.183

从教程：

允许开发人员以编程方式占用用户屏幕的想法并非没有严重的安全隐患，这就是键盘使用受到限制的原因。当然，全屏键盘输入有很多合法用途，这将在 API 的未来修订版中通过某种权限提示来解决。

然而，即使以目前有限的形式，API 仍然为我们提供了增强最终用户体验的机会。

在某些浏览器中，它甚至不会全屏显示，例如 IE 9。

[http://tutorialzine.com/2012/02/enhance-your-website-fullscreen-api/](http://tutorialzine.com/2012/02/enhance-your-website-fullscreen-api/)

# opengl-es - 简单，关于 webGL 中顶点着色器的 IO

> ID：12274358
> 
> 赞同：3
> 
> 时间：2012-09-05T04:07:49.867
> 
> 标签：opengl-es, webgl

所以，在我将一些代码复制并粘贴到我的应用程序之前，我试图理解它。在 openGL 中，我看到一些变量输入和输出。我在下面的代码片段中看不到这样的东西。据我了解，顶点着色器“神奇地”通过程序获取“in”类型变量的输入，顺便说一句，它可以附加一个片段和顶点着色器（程序）。继承人的代码：

```
<script id="shader-vs" type="x-shader/x-vertex">
attribute vec2 aVertexPosition;
attribute vec2 aPlotPosition;

varying vec2 vPosition;

void main(void) {
    gl_Position = vec4(aVertexPosition, 1.0, 1.0);
    vPosition = aPlotPosition;
}
</script> 
```

所以，我的问题是，通过在此处附加适当的程序，aVertexPosition 和 aPlotPosition 都将被正确初始化，此外，vPosition 可以在我的应用程序的其他地方使用，即片段着色器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T05:13:44.080

让我尝试解释一下 GPU 管道 I/O 的工作原理：

每个顶点都有一组与之关联的属性。鉴于您的示例代码：

属性 vec2 aVertexPosition; 属性 vec2 aPlotPosition;

您是说每个顶点都有一个 2D 顶点位置和绘图位置。如果您添加：

属性 vec3 vNormal;

那么每个顶点也会有一个法线。您可以将这些视为顶点“属性”。

您必须告诉 GPU 从哪里获取每个属性的值。

编译着色器时，会为每个顶点属性分配一个属性数组索引。您必须启用着色器所需的每个属性数组索引

```
enableVertexAttribArray(int attributeIndex); 
```

启用它后，您希望将属性数组绑定到顶点缓冲区。

```
bindBuffer(ARRAY_BUFFER, buffer); 
```

您现在描述如何使用此调用获取属性：

```
vertexAttribPointer(int attributeIndex, int count, int type, bool normalized, int stride, int offset); 
```

鉴于您的示例代码：

```
vertexAttribPointer(0, 2, FLOAT, false, 16, 0); // vertex position
vertexAttribPointer(1, 2, FLOAT, false, 16, 8); // plot position 
```

16 或跨度是每个顶点之间的字节数。每个顶点由 4 个浮点数组成，每个浮点数为 4 个字节宽。偏移量是属性在顶点内开始的位置。顶点位置在顶点的第 0 个字节，绘图位置在第 8 个字节。

您可以将这些视为描述如何对数组进行索引。第 N 个顶点：

```
aVertexPosition.x = BUFFER[offset + N * stride + sizeof(FLOAT) * 0];
aVertexPosition.y = BUFFER[offset + N * stride + sizeof(FLOAT) * 1]; 
```

GPU 会自动为您获取顶点属性，并在执行顶点着色器函数之前对其进行填充。是的，您绘制的每个顶点都会调用一次顶点着色器主程序。

顶点着色器阶段的输出是“变化的”变量。它们是“变化的”，因为它们是在顶点之间的图元（三角形）的表面上插值的。您为每个顶点写出值，但是当三角形被光栅化为片段时，每个片段都会获得每个可变变量的插值。片段着色器为绘制调用“覆盖”的每个片段（像素）运行。如果您绘制一个覆盖 4x4 像素块的小三角形，则片段着色器将执行 16 次。

简而言之：

```
Vertex Shader Inputs: Vertex Attributes & Uniform values (not covered)
Vertex Shader Outputs: Varying Values at each vertex
Fragment Shader Inputs: Varying Values for a given fragment (pixel)
Fragment Shader Outputs: Color & Depth values which are stored in the color and depth buffer.

Vertex Shader is run for every vertex in the draw call.
Fragment shader is run for every "covered" or "lit" fragment (pixel) in the draw call. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T17:02:37.667

在其他较新版本的 OpenGL 中，它们具有比顶点和片段更多的着色器阶段，`in`并且`out`被用来代替`attribute`and `varying`。

*   `attribute`对应于`in`顶点着色器。
*   `varying`对应于`out`顶点着色器。
*   `varying`对应于`in`片段着色器。

（我实际上没有使用过`in`and `out`，所以这个描述可能不准确。请随时通过编辑来改进我的答案。我不知道如何`uniform`适应。）

# cron - cron 表达式

> ID：12274359
> 
> 赞同：2
> 
> 时间：2012-09-05T04:07:52.517
> 
> 标签：cron

我将如何编写一个 Cron 表达式以在每天上午 8 点和下午 3:30 触发？我了解如何创建一个每天触发一次的表达式，而不是在多个设定时间触发。提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T04:09:44.343

你应该只使用两行。

```
0 8 * * * command
30 15 * * * command 
```

当然，在典型的 /etc/cron.d 格式中，将用户包含为 arg 6。表达式表示法（在我所知道的所有版本中）会给你带来一些你想要的东西（例如，表达式本质上是相加的，所以它会跑得比你想要的多）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-30T12:03:56.937

以防万一您将来需要使用 Java 语言创建 Cron 表达式，这里有一个可用于 Verbal Coding 风格的 API

[https://github.com/mabidshafiq/VerbalCronExpression](https://github.com/mabidshafiq/VerbalCronExpression)

您的场景示例是，

```
String exp = ce.cronExp()
    .minuteOfHour("0")
    .hourOfDay("8")
    .everyDay()
    .everyMonth()
    .generate(); 
```

它将生成 0 8 * * *

为了您的理解

```
* * * * * *
| | | | | | 
| | | | | +-- Year              (range: 1900-3000)
| | | | +---- Day of the Week   (range: 1-7, 1 standing for Monday)
| | | +------ Month of the Year (range: 1-12)
| | +-------- Day of the Month  (range: 1-31)
| +---------- Hour              (range: 0-23)
+------------ Minute            (range: 0-59) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-25T13:45:50.787

让它变得简单，使用一次制作的组件 - 例如。[crontab 生成器](http://crontab-generator.org):o)

# java - 如何检测对 Java App 的 System TrayIcon 的单击？

> ID：12274370
> 
> 赞同：8
> 
> 时间：2012-09-05T04:09:44.270
> 
> 标签：java, swing, actionlistener, system-tray, trayicon

我正在开发一个简单的 Java swing 应用程序，它在创建时会在系统托盘中添加一个图标。我想要做的是检测用户单击此图标的时间（无论是通过左键单击还是右键单击），没有弹出菜单，我只想在单击图标时恢复应用程序。

这是我正在使用的代码：

```
 SystemTray tray = SystemTray.getSystemTray(); 
    Image icon = toolkit.getImage("icon.png");

    ActionListener listener = new ActionListener()
    {
        public void actionPerformed(ActionEvent e)
        {
            System.out.println("click detected");
        }
    };

    TrayIcon trayIcon = new TrayIcon(icon, "Test Program", null);
    trayIcon.addActionListener(listener);
    tray.add(trayIcon); 
```

但是，当我运行此程序时会发生什么，单击（左或右）没有任何效果，但是当我双击时，它会在控制台中显示消息“检测到单击”。

我该怎么做才能检测到单击？我需要为此使用 MouseListener 吗？（听说MouseListeners会出问题，ActionListeners更好）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-05T04:18:19.717

你可以使用`MouseListener`，即：

```
trayIcon.addMouseListener(new MouseAdapter() {
    public void mouseClicked(MouseEvent e) {
        if (e.getClickCount() == 1) {

        }
    }
}); 
```

有关详细信息，请参阅[如何编写鼠标侦听器](http://docs.oracle.com/javase/tutorial/uiswing/events/mouselistener.html)。

***编辑：ActionListener 与 MouseListener***

有一个低级和语义事件的概念。只要有可能，您应该侦听语义事件而不是低级事件，例如侦听动作事件而不是鼠标事件。阅读[低级事件和语义事件](http://docs.oracle.com/javase/tutorial/uiswing/events/generalrules.html#twokinds)中的更多详细信息。

在这种情况下，您只需要事件的更多详细信息，因此需要使用 MouseListener。

# java - 为什么Java中没有局部静态变量？

> ID：12274375
> 
> 赞同：21
> 
> 时间：2012-09-05T04:10:42.193
> 
> 标签：java, oop, static

在 C/C++ 中，我们使用静态局部变量来维护方法的状态。但是为什么Java不支持它？

是的，我可以为此目的使用静态字段。但是创建一个只维护一个方法状态的字段是不是有点奇怪？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-09-05T04:15:26.030

您找到了唯一的解决方案。

Java 放弃了 C++ 的许多复杂性，这就是其中之一。

作用于函数的静态变量在并发的情况下会对你做一些讨厌的事情（例如，strtok 是一个众所周知的讨厌的变量，与 pthreads 一起使用，正是出于这个原因）。

一般来说，你想要的是一个有状态的对象。有问题的函数应该有一个对象级变量。然后，您可以创建每个都维护状态的实例。

更容易理解/维护/等。

如果您确实需要将状态保持为单例，那么静态字段就是它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-05T05:01:13.707

Java 语言规范似乎并没有为省略对应于 C`static`变量的变量辩护。

从 Java 的角度来看，在类方法中隐藏状态有一些缺点。通常，函数级静态变量的存在并不是您希望在该函数之外公开的那种实现细节。

但是方法的状态实际上是类状态的一部分，并且方法级别的静态变量必须在对象被持久化的任何时候进行序列化/反序列化。这可能听起来不常见，来自 C 背景，所以我会注意一些常见的例子。

*   应用服务器集群可以在节点之间传递用户会话对象以提供容错。
*   JAXB 可用于将对象编组为 XML 文档
*   JPA 可用于将对象状态持久保存到数据库

如果在持久化对象时变量的值*值得*保存，那么该类之外的代码很可能需要引用该值。突然之间，这意味着定义访问级别——公共方法中的静态变量会自动公共吗？还是程序员必须这样声明？

我们还必须考虑可扩展性。派生类是否需要实现相同的静态变量？还是会从基类中的函数引用变量？

使用静态局部变量的 C 方法更有可能成为 Java 中的类的良好候选者。它有状态并且希望存在于一个单一的目的。将功能封装到对象中几乎没有缺点，它可以更清晰地分离瞬态值（例如局部变量）和更长期的状态。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-14T14:20:25.957

其他一些答案说明了为什么您可能不想拥有这个。但你也可以从历史的角度来问为什么。

要回答这个问题，您必须开始了解为什么 C 确实有静态局部变量。C 比 Java 和 C++ 限制变量范围的方法要少得多，静态数据的唯一选项是“文件内部”和“无处不在”。所以这提供了一个额外的层来限制范围。

C++ 的一个重要方面是兼容，因此它在 C++ 中也是允许的。但它不再需要本地静态范围，因为还有许多其他方法可以限制静态数据的范围。这种用法在（现代）C++ 中并不流行。

Java 只是从 C/C++ 中汲取了很多灵感，它不必担心向后兼容性，因此可以省略。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T04:25:40.130

也许是因为方法不是 Java 中的对象；所以像你说的那样保持它们的状态没有多大意义，我想你必须为此在字节码中创建一个新概念；正如 Tony K. 所说，使用一个对象。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2018-11-04T19:40:27.253

实例方法由类的实例（对象）调用。静态事物属于类而不属于对象，这就是局部变量不是静态的原因。实例变量是静态的，它们也可以在类加载时由静态块初始化。 [在此处输入图像描述](https://i.stack.imgur.com/jYHpt.jpg)

欲了解更多信息，请访问：- [https://www.youtube.com/watch?v=GGay1K5-Kcs&t=119s](https://www.youtube.com/watch?v=GGay1K5-Kcs&t=119s)

# cakephp - CakePHP 中的 URL 重定向

> ID：12274380
> 
> 赞同：0
> 
> 时间：2012-09-05T04:12:18.847
> 
> 标签：cakephp

一般来说，我对 Web 开发特别是 CakePHP 还是很陌生，所以如果我的问题的答案非常明显，请提前道歉。

我的项目是创建将连接到域内和域外网站的二维码，并跟踪每个二维码被扫描的次数。我创建了一个用户界面和系统来使用 google api 生成 QR 码。二维码是通过在主机域名上附加一个随机的四字母代码并将二维码和目标 URL 保存到数据库中来生成的。因此，如果我是 www.example.com 的开发人员，则 QR 码将被编码为“http://www.example.com/QeIR”，而实际的目标 URL 可能是 www.google.com。这个想法是 QR 码阅读器将扫描 QR 码，访问域并增加扫描计数器，然后被重定向到实际网站。（我不知道有任何其他方法可以直接跟踪扫描二维码的次数。）

我想要一些有关如何将浏览器从扫描的 URL 重定向到实际目标 URL 的指导。这会是我在 .htaccess 中编写的代码吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T06:41:04.570

增加计数器后只需调用

```
$this->redirect('http://www.example.com'); 
```

从控制器内部。欲了解更多信息，请参阅：[http ://book.cakephp.org/2.0/en/controllers.html#flow-control](http://book.cakephp.org/2.0/en/controllers.html#flow-control)

# javascript - Node JS - 从同一文件中的另一个方法调用一个方法

> ID：12274381
> 
> 赞同：15
> 
> 时间：2012-09-05T04:12:39.763
> 
> 标签：javascript, node.js

我有这个 nodeJS 代码。

```
module.exports = {

  foo: function(req, res){
    ...
    this.bar(); // failing
    bar(); // failing
    ...
  },

  bar: function(){
    ...
    ...
  }
} 
```

我需要`bar()`从方法内部调用该`foo()`方法。我也试过 `this.bar()`了`bar()`，但都失败了`TypeError: Object #<Object> has no method 'bar()'`。

如何从另一种方法中调用一种方法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-05T04:24:09.723

你可以这样做：

```
module.exports = {

  foo: function(req, res){

    bar();

  },
  bar: bar
}

function bar() {
  ...
} 
```

不需要关闭。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-03-23T22:46:03.447

接受的响应是错误的，您需要使用“this”关键字从当前范围调用 bar 方法：

```
 module.exports = {
      foo: function(req, res){

        this.bar();

      },
      bar: function() { console.log('bar'); }
    } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-05T04:20:04.563

我认为您可以做的是在传递回调之前[绑定上下文。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)

```
something.registerCallback(module.exports.foo.bind(module.exports)); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-05T04:21:47.250

尝试这个：

```
module.exports = (function () {
    function realBar() {
        console.log('works');
    }
    return {

        foo: function(){
            realBar();
        },

        bar: realBar
    };
}()); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-01-16T14:01:42.653

试试下面的代码。您可以从任何地方引用每个函数（需要导入 .js 文件）

```
function foo(req,res){
    console.log("you are now in foo");
    bar();
}
exports.foo = foo;

function bar(){
    console.log("you are now in bar");
}
exports.bar = bar; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-03T19:36:09.707

bar 是否打算成为 foo 的内部（私有）？

```
module.exports = {
    foo: function(req, res){
        ...
        function bar() {
            ...
            ...
        }
        bar();     
        ...
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-01-15T13:06:18.477

在 Node js + Express 中，您可以在同一个控制器中使用此语法

```
//myController.js
exports.funA = () =>{

    console.log("Hello from funA!")

    //cal funB
    funB()

}

let funB = () =>{

    console.log("Hello from funB!")
} 
```

确保在函数之前使用**let**关键字，并在主函数中使用**()**括号调用它

输出

```
App listening at http://localhost:3000
Hello from fun A!
Hello from fun B! 
```

# c# - 从不在表格上的点画一条线

> ID：12274383
> 
> 赞同：-4
> 
> 时间：2012-09-05T04:12:50.740
> 
> 标签：c#, winforms, gdi+

有没有办法`DrawLine`从表单上的现有点使用，比如说 500,500 到表单上的负点（屏幕外）500、-500。我以前没有尝试过，所以我可能应该先尝试一下，但有些事情告诉我它不会起作用。

如果我是正确的，有没有办法编辑`DrawLine`考虑负面因素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T04:23:54.153

显然，`DrawLine`承认形式的消极方面。

这对我来说是个好消息，尽管我应该在发布之前检查一下，对不起社区。我希望这可以帮助其他不确定的人！

# php - 当我在搜索字段中输入查询时，如何过滤/显示结果？

> ID：12274391
> 
> 赞同：0
> 
> 时间：2012-09-05T04:14:07.147
> 
> 标签：php, javascript, jquery, html, web

我需要尝试创建一个搜索字段，在您输入位置时显示结果。

例如，在联邦银行网站上寻找分行时 (http://www.commbank.com.au/locate-us/)，当您输入邮政编码或郊区名称时，您会看到选项列表当前符合您的标准的正在出现，并且随着您输入的更多，它会缩小以匹配。

我拥有与联邦银行完全相同的澳大利亚所有州、郊区和邮政编码的完整列表，但我需要将客户引导至显示相关信息的不同网页，而不是在地图上显示位置。

是否有一个我可以适应的插件，或者这是否需要由知道他们在做什么的人进行设置和编码？

# asp.net-mvc - 当前上下文中不存在名称“数据”？

> ID：12274392
> 
> 赞同：0
> 
> 时间：2012-09-05T04:14:08.260
> 
> 标签：asp.net-mvc, c#-4.0, charts

我试图显示一个带有一些示例数据的示例图表，只是按照 satckoverflow 中的一个链接，在我的应用程序中尝试了该代码，但由于“名称数据确实存在于当前上下文中”而出现错误。

```
 public ActionResult Chart()
   {

   Chart chart = new Chart();
   chart.ChartAreas.Add(new ChartArea());

   chart.Series.Add(new Series("Data"));
   chart.Series["Data"].ChartType = SeriesChartType.Pie;
   chart.Series["Data"]["PieLabelStyle"] = "Outside"; 
   chart.Series["Data"]["PieLineColor"] = "Black";
   chart.Series["Data"].Points.DataBindXY(
   data.Select(data => data.Name.ToString()).ToArray(), 
   data.Select(data => data.Count).ToArray());
//Other chart formatting and data source omitted.

   MemoryStream ms = new MemoryStream();
   chart.SaveImage(ms, ChartImageFormat.Png);
   return File(ms.ToArray(), "image/png");
  }

  The view is
  <img alt="" src="@Url.Action("Chart")" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T04:17:53.430

所有 "chart.Series["Data"]" 引用之后的 "data" 引用未初始化为任何内容，也未映射到引用的命名空间中的任何类，因此 .NET 只是说它不知道如何解决它。缺少 using 语句或对象声明/实例化通常是罪魁祸首。祝你好运。

# iphone - 在静态（非滚动）页面上处理 UITextField 的正确方法是什么？

> ID：12274396
> 
> 赞同：0
> 
> 时间：2012-09-05T04:14:40.313
> 
> 标签：iphone, ios

我有一个完全适合屏幕的向下钻取页面，所以我没有使用滚动视图。但是我在底部附近有一个 UITextField，当键盘出现时，你看不到你在输入什么。

所以想知道什么是标准的......我应该使用滚动视图然后iOS会向上滚动吗？

我尝试将其作为测试进行，但我（还）无法以正确的方式添加“滚动视图”以使其正常工作。我有点想如果我重新开始并从头开始添加所有控件，我会工作......但必须有一种方法来转换......

首先，我尝试编辑“视图”“自定义类”类属性并输入“滚动视图”，如果它那么简单的话会很棒......但 xcode 认为它仍然是一个视图。

然后我尝试在“视图”和编辑器->嵌入->滚动视图菜单中选择我的所有控件。这似乎工作，因为它认识到它是一个真正的“滚动视图”，但我得到这个错误：“这个类不符合键委托的键值编码。”

然后我创建了一个“IBOutlet UIScrollView *scrollView”的属性并试图将它连接起来，但此时，我只是在猜测......我确实将“UIScrollViewDelegate”添加到了我班级的 UIViewController......

有很多关于此错误字符串的帖子，但我找不到适用于情节提要并将滚动视图添加到现有（工作）视图的解决方案。

我意识到没有我提供任何代码很难帮助...但其中大部分似乎是我设置 UI 的方式...

如果您有任何想法，请按我的方式发送！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T04:19:46.963

如果您的视图不需要正常滚动，则不要将其设为滚动视图。只需为您需要的视图框架设置动画即可。

我有[一个类似问题的答案](https://stackoverflow.com/questions/9135248/logic-for-moving-text-field-above-keyboard-on-tap/9136698#9136698)，你应该检查一下，它有很多示例代码，希望能让你上路。

如果您有任何问题，请告诉我。

# jquery - 使用 CSS3 缓慢添加阴影

> ID：12274401
> 
> 赞同：0
> 
> 时间：2012-09-05T04:15:04.613
> 
> 标签：jquery, css

向下滚动时，我使用 jquery 在站点的标题中添加了一个阴影。但是，我想在添加类时“淡入”阴影，并在删除类时淡出。

可以使用 CSS3 完成吗？

这是滚动时添加/删除的类。

```
.header_shadow{-webkit-box-shadow: 0 10px 6px -6px #777;-moz-box-shadow: 0 10px 6px -6px #777;box-shadow: 0 10px 6px -6px #777;} 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T04:32:35.080

使用 CSS 过渡（随意添加前缀）：

```
.header_shadow { 
    box-shadow: 0 0 0 0 #777;
    transition: box-shadow 3s ease-in-out;
}

.header_shadow.addshadow {
    box-shadow: 0 10px 6px -6px #777;
} 
```

这是一个[小提琴](http://jsfiddle.net/edelman/df43C/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-05T04:42:19.423

像这样[Demo](http://jsfiddle.net/w5aAn/1037/)

```
$('#box').mouseover(function() {
      $(this).delay(200).animate({
        'boxShadowX': '10px',
        'boxShadowY':'10px',
        'boxShadowBlur': '20px'
    });
});

$('#box').mouseout(function() {
      $(this).delay(200).animate({
        'boxShadowX': '0px',
        'boxShadowY':'0px',
        'boxShadowBlur': '0px'
    });
}); 
```

​</p>

# php - Facebook 点赞按钮和 OAuth 访问

> ID：12274403
> 
> 赞同：1
> 
> 时间：2012-09-05T04:15:11.140
> 
> 标签：php, facebook, facebook-like, facebook-opengraph

我在服务器端使用[HybridAuth](https://github.com/hybridauth/hybridauth)连接到 Facebook API （后端是用 PHP 编写的）。这适用于托管在我们服务器上的 SaaS 发布应用程序。我了解 OAuth 的机制，并且一旦我从用户那里获得了适当的权限，我就可以从 Open Graph API 进行读写操作，这在理论上几乎可以让我做任何事情。

问题是我想使用一些[Facebook 的社交插件](https://developers.facebook.com/docs/plugins/)。特别是，我想实现[like 按钮](https://developers.facebook.com/docs/reference/plugins/like/)，以便它自动出现在每个博客文章、文章和页面上。

问题是点赞按钮和各种 Facebook 插件都需要`app_id`. 我宁愿不要求用户将开发者应用程序添加到他们的帐户并创建一个应用程序来获得一个`app_id`，因为这对于非开发者来说可能是一个令人困惑的过程。

无论如何我们可以`app_id`从打开的图形中创建或检索一个（我们可以存储并使用它来生成类似按钮和其他 facebook 小部件）？

通过[迁移](https://developers.facebook.com/docs/reference/plugins/like/migration/)，我了解每个喜欢的 URL 都不会有自己的页面。一旦用户点击您网站上的“赞”按钮，他就会自动为您的页面点赞。但是，假设我有一个名为的页面`http://www.mystore.com/products/some-awesome-product`，并且还有其他类似的页面，都带有一个赞按钮。是否有可能在点击喜欢时，用户自动喜欢我们的 Facebook 页面，但是当一个项目在他们的新闻提要中发布时，URL 链接到该特定产品？实际上，有没有办法让用户喜欢我网站上的多个页面？

更新：看起来我们可以使用遗留 REST API 中的创建应用程序 API 以编程方式[生成`app_id`s 。](https://developers.facebook.com/blog/post/2009/10/13/making-it-easier-to-build-with-facebook/)但是，这似乎不是图形 API 的选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T06:43:49.310

似乎我们无法以编程方式为帐户创建 app_id。这不是问题，因为我们将创建一个小指南来指导我们的用户创建应用程序并使用表单将 app_id 提交给我们。不完美，但应该很容易实现。

至于 URL，点赞不会自动点赞您的 Facebook 页面。如果`href`为空白，则当前页面将被点赞。如果您在`href`参数中设置您的 facebook 页面，那么您的 facebook 页面将被点赞。

# android - 调用 getSharedPreferences 时出现 NullPointerException

> ID：12274407
> 
> 赞同：0
> 
> 时间：2012-09-05T04:15:51.943
> 
> 标签：android, nullpointerexception, sharedpreferences

此代码停止工作，我唯一做的就是更改为 Android 4.0.3

```
public class PrinterFunctions 
{ 
 private static SharedPreferences mSetup;
 public static final String CSDT = "ComDT";

     public static void printFast(){
            final Context myContext = null;
            loadCompany(myContext);
     }     

     public static void loadCompany(Context context){

     mSetup = context.getSharedPreferences(CSDT, Context.MODE_PRIVATE); // NullPointException

         //code here

     }
} 
```

执行上述行时出现 NullPointerException，此代码可以正常工作。

谢谢你的帮助。金

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T04:22:51.260

如果您在该特定行上获得 NPE，则可能意味着`context`您传递给`loadCompany()`的是`null`.

# ruby-on-rails - 在 ruby on rails 中删除数组的备用元素

> ID：12274408
> 
> 赞同：3
> 
> 时间：2012-09-05T04:16:04.087
> 
> 标签：ruby-on-rails, ruby, arrays, ruby-on-rails-3

> **可能重复：**
> [Ruby 数组中的奇数（或偶数）条目](https://stackoverflow.com/questions/1614147/odd-or-even-entries-in-a-ruby-array)

假设我有一个以下数组

```
arr = ["Value0","Value1","Value2","Value3","Value4","Value5","Value6","Value7","Value8"] 
```

我想删除备用元素，这样我的 o/p 数组将类似于以下内容

```
["Value0", "Value2", "Value4", "Value6", "Value8"] 
```

即它应该删除奇数位置的元素。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-05T04:41:57.467

我不觉得这是最快的方式，但你可以做到

```
>> arr.reject {|v| arr.index(v).odd?}
#=> ["Value0", "Value2", "Value4", "Value6", "Value8"] 
```

或者

```
>> arr.each_slice(2).map(&:first)
#=> ["Value0", "Value2", "Value4", "Value6", "Value8"] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-05T05:34:14.640

```
arr.reject!.with_index{|_, i| i.odd?} 
```

或者

```
arr.select!.with_index{|_, i| i.even?} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-05T10:33:26.200

```
arr = ["Value0","Value1","Value2","Value3","Value4","Value5","Value6","Value7","Value8"]
flag = false
p arr.select!{flag = !flag}
#=> ["Value0", "Value2", "Value4", "Value6", "Value8"] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T04:46:11.217

```
arr1 = arr.clone
arr.each_with_index {|el,index| arr1.delete_at(index) if index % 2 > 0 } 
```

或者

```
arr1 = []
arr.each_with_index {|el,index| arr1 << el if index % 2 == 0} 
```

# javascript - javascript美元符号变量不起作用

> ID：12274410
> 
> 赞同：5
> 
> 时间：2012-09-05T04:16:30.263
> 
> 标签：javascript, jquery, html, wordpress, dom

我的 Wordpress 中有以下代码：

```
(function ($) {
  var $header = $("div.header");

  $(window).bind("scroll resize", function () {
    if ($(window).scrollTop() > 30) {
      $("div.header").stop().animate({
        'opacity': 0.24
      }, {
        duration: 1000
      });
    } else {
      $header.stop().animate({
        'opacity': 1
      }, {
        duration: 1000
      });
    }
  });
})(jQuery); 
```

如果声明在应该的时候启动，但永远不会......

但

如果我附上它：

```
jQuery(document).ready(function($) {        
  // code here
}); 
```

一切都好。为什么？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-05T04:20:45.033

可能是您在未构建 dom 时尝试使用 jQuery。尝试使用`$(document).ready`功能：

```
(function ($) {
  $(document).ready(function () {
    $header = $("div.header");
    $header.remove();
  });
})(jQuery); 
```

关于您在问题中提到的内容：

```
jQuery(document).ready(function ($) {
  // code
}); 
```

它之所以起作用，是因为它做同样的事情：它将事件处理程序绑定到事件上`ready`，并将`jQuery`对象作为参数传递给函数`$`。

现在你之前做了什么：

```
(function ($) {
  $header = $("div.header");
  $header.remove();
})(jQuery); 
```

在这里，您只需声明带有命名`$`参数的匿名函数：

```
function ($) {
} 
```

并以 object 作为参数调用它，`jQuery`该参数在函数中可用`$`：

```
(function ($) {
})(jQuery); 
```

# java - Java 多边形和区域

> ID：12274413
> 
> 赞同：0
> 
> 时间：2012-09-05T04:16:58.710
> 
> 标签：java, awt, polygon, java-2d, area

![](../Images/d8c5484079f29d2fafe809dab0824df7.png)

好的，所以我有许多多边形（在图像中以白色勾勒）。

为了尝试将所有多边形加在一起以获得一个多边形，这是所有多边形的外部边界，我将每个多边形（java 类）转换为一个区域（java 类），然后将这些区域与由 Area 类提供的 add(Area a) 方法。

从那里我将该区域转换回多边形并将其绘制为填充多边形（图像中的紫色区域）。

然而，这不是我所期待的。谁能想到我可以正确地做到这一点，或者至少只是将三角形区域添加到我的多边形中？

当我用填充绘制所有单独的多边形时，我得到了我想要的（绘制）但我需要它的多边形表示。

![我想要的是](../Images/be2c446cd8b986ccff8629ce546c8bfa.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-11T07:14:34.153

我可以推荐使用[JTS](https://github.com/locationtech/jts)。只需创建要组合的几何图形并使用[联合](https://locationtech.github.io/jts/javadoc/org/locationtech/jts/geom/Geometry.html#union(org.locationtech.jts.geom.Geometry))方法。之后，您可以使用新的几何图形并使用以前的代码对其进行绘制。联合的简单代码示例：

```
// build polygon p1
Polygon p1 = new GeometryFactory().createPolygon(new Coordinate[]{new Coordinate(0,0), new Coordinate(0,10), new Coordinate(10,10), new Coordinate(10,0), new Coordinate(0,0)});
// build polygon p2
Polygon p2 = new GeometryFactory().createPolygon(new Coordinate[]{new Coordinate(0,0), new Coordinate(0,30), new Coordinate(5,30), new Coordinate(5,0), new Coordinate(0,0)});
// calculate polygon3 as the union of p1 and p2
Polygon p3 = (Polygon) p1.union(p2);
// print simple WKT
System.out.println(p3.toText()); 
```

这种情况下的输出是（如预期的那样）：

```
POLYGON ((0 0, 0 10, 0 30, 5 30, 5 10, 10 10, 10 0, 5 0, 0 0)) 
```

# ios - 为特定的 ASBD 缓冲区获取正确的数字数据类型转换

> ID：12274427
> 
> 赞同：2
> 
> 时间：2012-09-05T04:18:33.257
> 
> 标签：ios, audio, core-audio, audio-recording, audiounit

我使用 Apple 的 CoreAudio 音频单元 API 获得了`AudioBuffer`完整`void *mData`的新渲染音频样本，但我在获取正确格式的样本时遇到了问题。所述缓冲区的ASBD如下：

```
Float64 mSampleRate        44100
UInt32  mFormatID          1819304813
UInt32  mFormatFlags       41
UInt32  mBytesPerPacket    4
UInt32  mFramesPerPacket   1
UInt32  mBytesPerFrame     4
UInt32  mChannelsPerFrame  2
UInt32  mBitsPerChannel    32
UInt32  mReserved          0 
```

我通过调试应用程序并执行`AudioUnitGetProperty(rioUnit, kAudioUnitProperty_StreamFormat, ...)`调用得到了这个。该`mFormatFlags`字段暗示以下标志（我不知道任何正式的解码方法，我只是通过尝试不同的组合来得到它，`kAudioUnitFlags`直到我得到`41`）：

```
kAudioFormatFlagIsNonInterleaved | kAudioFormatFlagIsPacked | kAudioFormatFlagIsFloat 
```

我应该使用哪种类型的数据来转换缓冲区？我已经尝试过`Float32`, `SInt32`，但不是这样。

我打算在`SInt16`之后进行转换，但如果我没有先获得样本的正确格式，我就无法做到这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T08:26:31.843

根据我的经验，iOS 不会直接向您提供浮点数据。相反，您应该要求`SInt16`（因此`mBitsPerChannel`也设置为 16），然后通过将每个数字除以 32767 手动将整数数据转换为浮点数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T23:33:46.100

基于该 ASBD，数据是立体声非交错 32 位浮点数，这是 Mac OS X 上音频单元的规范格式。

您应该能够将该`mData`字段转换为 a`float *`并获得一个音频数据通道。完整的立体声音频应包含在`AudioBufferList`具有两个缓冲区的缓冲区中，每个缓冲区包含一个通道。

为什么铸造`Float32`不起作用？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-09T10:24:26.893

检查此代码：

```
 - (void)captureOutput:(AVCaptureOutput *)captureOutput didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer
   fromConnection:(AVCaptureConnection *)connection

       //calback function

        const AudioStreamBasicDescription *audioDescription = CMAudioFormatDescriptionGetStreamBasicDescription(CMSampleBufferGetFormatDescription(sampleBuffer));

        int sampleRate        = (int)audioDescription ->mSampleRate;
        int channelsPerFrame  = (int)audioDescription ->mChannelsPerFrame;
        UInt32 formatFlag     =  audioDescription ->mFormatFlags;

        if (formatFlag & kAudioFormatFlagIsFloat) {
          NSLog(@"IS FLOAT");

        } else if ( formatFlag & kAudioFormatFlagIsSignedInteger) {
          NSLog(@"IS Signed Integer");
        } 
```

}

# php - 使用 XML 解析时，xml 资源是您访问的对象吗？

> ID：12274432
> 
> 赞同：0
> 
> 时间：2012-09-05T04:19:29.420
> 
> 标签：php, xml, xml-parsing

我似乎不太了解 xml_parse 的工作原理。我正在做的是获取 xml 文件的内容，创建一个解析器，并将其传递给 xml_parse()。我不知道在那之后该怎么办。我在想，就我而言，$xml 是我现在可以迭代的数组。我试图看看我将如何解析我的数据。

```
 $fp = file_get_contents("memberdata.xml");
echo "pre-create";
$xml = xml_parser_create();
echo "pre-parse";
$status = xml_parse($xml,$fp);

if(!$status){
    die("Error parsing data from $fp into $xml");
}
echo "pre XML posting";
echo "<br />".$xml."<br />";
print_r($xml);
xml_parser_free($xml); 
```

我似乎无法弄清楚如何访问它。

示例xml数据如下：

```
<currentTime>2012-09-05 03:43:25</currentTime>
<result>
  <rowset name="members" key="characterID" columns="characterID,name,startDateTime,baseID,base,title,logonDateTime,logoffDateTime,locationID,location,shipTypeID,shipType,roles,grantableRoles">
    <row ..>
  </rowset>
</result>
<cachedUntil></cashedUntil> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T04:46:32.470

不使用基本工具，而是使用其中一个工具包，SimpleXML 将减轻很多挫败感。这个问题的答案是使用 SimpleXML 重做的。

```
 $fp = file_get_contents("memberdata.xml");
$eve = new SimpleXMLElement($fp);

$cols = $eve->{'result'}->rowset['columns'];
//I put result in {} because result is a special character in php.
$cols = explode(",",$cols);
foreach ($cols as $c){
    echo "".$c."<br />";
}
    //output is printed to screen 
```

* * *

# android - 同时搜索街道名称和商店

> ID：12274435
> 
> 赞同：2
> 
> 时间：2012-09-05T04:19:48.463
> 
> 标签：android, search

我一直在构建一个运行 Google Maps API 但从我手动输入的单独标记数据库中提取的应用程序。这导致搜索栏出现一些问题。现在搜索栏将只使用在我的数据库中找到的关键字进行搜索，并且不再从所有街道、城市和州的谷歌数据库中提取。有没有办法来解决这个问题？谢谢

编辑更多细节：我们建立了一个单独的特定商店数据库。当您打开应用程序时，您会看到很多带有预设位置和信息的标记。在搜索栏中键入任何内容只会从这些标记中提取。它只会从屏幕范围内的信息中搜索标记。例如，我可能在达拉斯市的数据库中设置了麦当劳作为标记。键入“McDonald's”将删除所有标记以仅显示该标记。但是，如果我在纽约市并想看看达拉斯有什么，输入“达拉斯”会拉出一个空搜索，而不是把我带到德克萨斯州的达拉斯。我正在尝试找到一种方法，它可以做到这两点。我可以从数据库中的商店名称以及街道、城市等名称中进行搜索。

# emacs - 如何在 Emacs Lisp 中获取字符串的子字符串？

> ID：12274437
> 
> 赞同：19
> 
> 时间：2012-09-05T04:19:53.177
> 
> 标签：emacs, elisp

当我有一个像“Test.m”这样的字符串时，我怎样才能通过 elisp 从中获取子字符串“Test”？我正在尝试在我的`.emacs`文件中使用它。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-05T04:49:11.003

一种方法是使用`substring`（或`substring-no-properties`）：

```
(substring "Test.m" 0 -2) => "Test" 
```

> （*从**到*`substring` *的字符串* ） *`&optional`*
> 
>  **返回一个新字符串，其内容是*STRING*的子字符串。返回的字符串由*STRING的索引**FROM* （包括）和索引*TO*（不包括）之间的字符组成。 *FROM*和*TO*是零索引的：0 表示*STRING*的第一个字符。 **负值从*****STRING*****的末尾开始计算。** 如果*TO*是，则子字符串将运行到*STRING*的末尾。******`nil`********

 **** * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-03-18T04:43:04.293

当您只需要一个没有扩展名的文件名时，[Stefan 的回答是惯用的。](https://stackoverflow.com/a/12284574/596361)但是，如果您在代码中大量操作文件和文件路径，我建议安装 Johan Andersson 的[`f.el`](https://github.com/rejeep/f.el)文件和目录 API，因为它提供了 Emacs 中没有的许多功能和一致的 API。检查功能[`f-base`](https://github.com/rejeep/f.el#f-base-path)和[`f-no-ext`](https://github.com/rejeep/f.el#f-no-ext-path)：

```
(f-base "~/doc/index.org") ; => "index"
(f-no-ext "~/doc/index.org") ; => "~/doc/index" 
```

相反，如果您经常使用字符串，出于[`s.el`](https://github.com/magnars/s.el)同样的原因安装 Magnar Sveen's。您可能对以下内容感兴趣[`s-chop-suffix`](https://github.com/magnars/s.el#s-chop-suffix-suffix-s)：

```
(s-chop-suffix ".org" "~/doc/index.org") ; => "~/doc/index" 
```

对于通用子字符串检索，请使用[dkim's answer](https://stackoverflow.com/a/12274641/596361)。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-05T15:13:52.917

在您的特定情况下，您可能希望使用`file-name-sans-extension`.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-05T04:57:31.953

可能最灵活的选择（虽然不清楚是否需要灵活性）是使用`replace-regexp-in-string`：

看`C-h``f` `replace-regexp-in-string` `RET`

例如：

```
(replace-regexp-in-string "\\..*" "" "Test.m") 
```***

# android - 按钮以编程方式填充整个布局

> ID：12274448
> 
> 赞同：0
> 
> 时间：2012-09-05T04:21:46.673
> 
> 标签：android, layout, button

我有一个 Android 开发者的问题。我有一个带有按钮的布局（以编程方式开发，而不是使用 xml），我希望按钮现在填充整个布局，但目前没有，我不知道为什么，我以为我已经正确设置了所有内容按钮的重力和布局参数，但这就是我所拥有的。如果您能指出我正确的方向，我将不胜感激！谢谢。

```
LinearLayout bottom = new LinearLayout(this);
bottom.setOrientation(LinearLayout.HORIZONTAL);  
LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT);
params.gravity = Gravity.FILL;
bottom.setLayoutParams(params);  

bottom.setBackgroundColor(Color.BLUE);

Button eqbttn = new Button(this);
eqbttn.setText("=");
eqbttn.setOnClickListener(new OnClickListener(){
    public void onClick(View v) {

    }
});
bottom.addView(eqbttn); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T04:25:58.117

您只将`MATCH_PARENT`大小应用于`LinearLayout`. 您还需要将其应用于按钮。

```
Button eqbttn = new Button(this);
LinearLayout.LayoutParams eqparams = new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT);
eqbttn.setLayoutParams(eqbttn);
eqbttn.setText("=");
eqbttn.setOnClickListener(new OnClickListener(){
    public void onClick(View v) {

    }
});
bottom.addView(eqbttn); 
```

这将强制按钮垂直和水平*填充LAYOUT。*如果您需要布局本身占据整个屏幕，请将其更改`WRAP_CONTENT`为`MATCH_PARENT`。

`Gravity.FILL`此外，在这种情况下，您不需要`LinearLayout`.

# mysql - 在 Mysql 的范围分区中使用时间戳

> ID：12274451
> 
> 赞同：0
> 
> 时间：2012-09-05T04:21:49.457
> 
> 标签：mysql

我试图通过 mysql 表中的时间戳进行分区。但它返回一个错误。如果我尝试`NOW()`也返回错误。如何解决此错误并使用时间戳数据类型进行分区？

```
 CREATE TABLE tblemployeepunch (
  fld_id int(11) NOT NULL AUTO_INCREMENT,
  fld_date Varchar(15) DEFAULT NULL,
  fld_rawpunchdate varchar(25) DEFAULT NULL,
  fld_rawpunchtime varchar(25) DEFAULT NULL,
  fld_cardno varchar(50) DEFAULT NULL,
  fld_reasoncard varchar(20) DEFAULT NULL,
  fld_mode varchar(20) DEFAULT NULL,
  fld_punchdatetime varchar(50) DEFAULT NULL,
  fld_crtdate  TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  UNIQUE KEY fld_id (fld_id,fld_crtdate),
  KEY in_timesheet (fld_cardno,fld_punchdatetime,fld_mode,fld_rawpunchtime),
  KEY in_emppunch (fld_cardno,fld_rawpunchdate,fld_punchdatetime)
  )
  PARTITION BY RANGE (fld_crtdate)
  (PARTITION p_Sep12 VALUES LESS THAN (TO_TIMESTAMP('2012-10-01 00:00:00')),
  PARTITION p_Oct12 VALUES LESS THAN (TO_TIMESTAMP('2012-11-01 00:00:00')),
  PARTITION p_Nov12 VALUES LESS THAN (TO_TIMESTAMP('2012-12-01 00:00:00')),
  PARTITION p_Max VALUES LESS THAN MAXVALUE ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T04:35:37.113

这是解决此问题的正确查询。使用 UNIX_TIMESTAMP

```
 CREATE TABLE tblemployeepunch (
      fld_id int(11) NOT NULL AUTO_INCREMENT,
      fld_date Varchar(15) DEFAULT NULL,
      fld_rawpunchdate varchar(25) DEFAULT NULL,
      fld_rawpunchtime varchar(25) DEFAULT NULL,
      fld_cardno varchar(50) DEFAULT NULL,
      fld_reasoncard varchar(20) DEFAULT NULL,
      fld_mode varchar(20) DEFAULT NULL,
      fld_punchdatetime varchar(50) DEFAULT NULL,
      fld_crtdate  TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
      UNIQUE KEY fld_id (fld_id,fld_crtdate),
      KEY in_timesheet (fld_cardno,fld_punchdatetime,fld_mode,fld_rawpunchtime),
      KEY in_emppunch (fld_cardno,fld_rawpunchdate,fld_punchdatetime)
    )
     PARTITION BY RANGE (UNIX_TIMESTAMP(fld_crtdate))
     (PARTITION p_Sep12 VALUES LESS THAN (UNIX_TIMESTAMP('2012-10-01 00:00:00')),
     PARTITION p_Oct12 VALUES LESS THAN (UNIX_TIMESTAMP('2012-11-01 00:00:00')),
     PARTITION p_Nov12 VALUES LESS THAN (UNIX_TIMESTAMP('2012-12-01 00:00:00')),
     PARTITION p_Max VALUES LESS THAN MAXVALUE ); 
```

# api - 检索 Steam 活动源？

> ID：12274452
> 
> 赞同：4
> 
> 时间：2012-09-05T04:22:01.530
> 
> 标签：api, android-activity, rss, feed, steam

有没有人找到一种方法来检索 Steam 上的活动供稿，以便特定用户在类似于推文的网站上发布？我正在向我的网站添加活动提要，但实际上我唯一最活跃的是 Steam，因此如果没有 Steam，它会很快变得陈旧。我查看了 Web API，但它没有指定我是否可以获取完整的提要并发布它，或者我是否可以获取特定游戏的某些统计数据。我试图为我的活动找到一个 RSS 提要，但到目前为止没有运气，那肯定是更可取的格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T13:03:32.717

我刚刚看过这个，你不能直接从网站上的 RSS 或 JSON 获取 web 提要。Web API 适用于 Steam 应用程序的开发人员，以便他们可以获取玩家信息。为此，您需要一个由 Steam 提供的 API 密钥。它不是您在 Google 上可以找到的随意的网络界面。

讨厌的解决方案是 HTML 抓取页面。我用[雅虎！管道](http://pipes.yahoo.com "雅虎！ 管道")抓取页面（并自动更新）但最终认为这完全太脏了，因为它假设 Steam 页面不会改变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-19T13:50:12.283

有点太晚了，但我也在寻找这种 RSS 提要。我想我最终会创建一个 RSS 机器人来解析用于获取活动提要的 AJAX 响应：

```
http://steamcommunity.com/id/[your username]/ajaxgetusernews 
```

这个 URL 不能开箱即用，我认为我们必须传递一些 cookie 才能访问此页面，以使 Steam 认为机器人以普通用户身份登录。它返回用于呈现活动提要的 HTML 标记，以及用于获取下一批活动的 URL。

请注意，此 HTML 标记难以解析，因为它不一致。

# javascript - remove() 后选项在选择中仍然可见

> ID：12274461
> 
> 赞同：0
> 
> 时间：2012-09-05T04:23:28.077
> 
> 标签：javascript, jquery, jquery-ui, cordova, jquery-mobile

大家好，我有两个选择字段，如果用户选择选项值一或二，则首先在选择字段上，然后在第二个的选择字段中，所有选项都是可见的，但如果它首先选择选项二，则选项二要从第二个选择 ID 中删除。以下是我的代码：

```
<script type="text/javascript">
 var index3,str;
</script>

<select id="first"  onchange="chk();">
<option value = "one">one</option>    
<option value = "two">two</option>    
<option value = "three">three</option>    
</select>

<select id="second">
<option value = "one">one</option>    
<option value = "two">two</option>    
<option value = "three">three</option>     
</select>

<script type="text/javascript">
function chk()
{
    index3 = document.getElementById("first");
    str= index3.options[index3.selectedIndex].value;

    alert("str:"+str);

    if (str=="two")
    {
          $("#second option[value='two']").remove();
    }

    else
    {
          if ( $("#second  option[value='two']").length == 0 )
         {

             $("#second").append('<option value="two">two</option>');
         }
    }
}
</script> 
```

在小提琴中它在[这里](http://jsfiddle.net/NWbXt/55/)工作正常，但在移动问题上是：如果我从第二个选择 id 中选择选项二，然后在第一个选择 id 中选择选项值二，那么在第二个选择 id 中也可以看到选项二，如果我点击第二个选择 id 然后只有它删除。但在 jsFiddle 中，它运行良好。任何建议将不胜感激，在此先感谢。

![在此处输入图像描述](../Images/6b6ff1b9489a22120f88ea010e453ea3.png)

![在此处输入图像描述](../Images/313ba796032e903352a8d02f0eb629ea.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T07:30:00.423

在这里，我已经为上述问题完成了完整的 bin。请通过演示链接。

**演示** [http://codebins.com/bin/4ldqp7p](http://codebins.com/bin/4ldqp7p)

**HTML**

```
<select id="first">
  <option value = "one">
    one
  </option>

  <option value = "two">
    two
  </option>

  <option value = "three">
    three
  </option>

</select>

<select id="second">
  <option value = "one">
    one
  </option>

  <option value = "two">
    two
  </option>

  <option value = "three">
    three
  </option>

</select> 
```

**jQuery**

```
$(function() {

    $("#first").change(function() {
        var optVal = $(this).val().trim();

        if (optVal == "two") {

            $("#second").find("option[value=" + optVal + "]").remove();
        } else {
            if ($("#second").find("option[value=two]").length <= 0) {

                $("<option value=\"two\">two</option>").insertAfter($("#second").find("option[value='one']"));

            }
        }
    });

}); 
```

**演示** [http://codebins.com/bin/4ldqp7p](http://codebins.com/bin/4ldqp7p)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T04:51:20.830

检查这个[编辑](http://jsfiddle.net/NWbXt/57/)

```
$('#first').change(function() {
      $("#second option[value='" + $(this).val() + "']").remove();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T04:52:48.240

您的代码总体上看起来有点奇怪。如果您打算从“第二”中删除该项目，如果它在“第一”中被选中，请尝试此更新：http: [//jsfiddle.net/NWbXt/58/](http://jsfiddle.net/NWbXt/58/)

```
$(function() {
    var first = $('#first'),
        second = $('#second'),
        removed;

    first.change(function() {
        var selected = first.val();
        second.append(removed);  //.. add back old option
        removed = second.find('option[value="' + first.val() + '"]').remove();        
    }).trigger('change');
});​ 
```

# javascript - 在 ruby on rails 中使用 jquery getJSON 获取数据

> ID：12274463
> 
> 赞同：2
> 
> 时间：2012-09-05T04:23:37.350
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3.2, getjson

我正在尝试通过 getJSON 方法获取账单金额。虽然我收到了金额，但我无法发布。代码如下。

在表格中

```
<div class="bill">
<%= f.collection_select :customer_bill_id, CustomerBill.all,:id,:id, {:prompt => "Select Customer bill"} %></div><br />

<div class= "due"><%= f.input :bill_due_amount, :label => "Bill Due Amt.", :input_html => { :size => 20} %> </div><br /> 
```

js

```
jQuery(".bill select").bind("change", function() {
        var data = {
        customer_bill_id: jQuery(this).val()  
      }
      jQuery.getJSON(
         "/money_receipts/get_due_amount",
        data,
        function(data){
          var res = "";
      res =  parseFloat(data[0]);
      getAmount = jQuery('.due').val(res);
        });      
    }); 
```

在控制器中我有

```
def get_due_amount
    @due_amount = CustomerBill.find_all_by_id(params[:customer_bill_id]).map{|bill| [bill.bill_due_amount]}if params[:customer_bill_id]
    respond_to do |format|
      format.json { render json: @due_amount }
    end
  end 
```

如果我这样做了，`alert(res);`我确实得到了金额值，但是当我这样做时

```
getAmount = jQuery('.due').val(res);
        alert(getAmount); 
```

我明白了`[object Object]`

似乎是什么问题？为什么值没有出现在表单中？寻求指导。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T05:25:38.740

您使用了 jQuery('.due')，但这是一个 div 元素。您需要通过以下方式设置表单输入值，

```
jQuery('.due input').val(res); 
```

它会将金额设置为文本框值。

# git - git svn 是一个 git 模块，还是内置到 git 命令中？

> ID：12274464
> 
> 赞同：0
> 
> 时间：2012-09-05T04:23:38.997
> 
> 标签：git, version-control, git-svn

以下是 git svn clone 进程的 pmap：

```
pmap 22308
22308:   git svn clone http://code.xxx.xxx/svn/xxx/
08048000   1172K r-x--  /home/mirror/ins_git/bin/git
0816d000     20K rw---  /home/mirror/ins_git/bin/git
08172000    304K rw---    [ anon ]
0948d000    132K rw---    [ anon ]
b7bee000    236K r----  /usr/lib/locale/en_US.utf8/LC_CTYPE
b7c29000      8K rw---    [ anon ]
b7c2b000     12K r-x--  /lib/libdl-2.5.so
b7c2e000      4K r----  /lib/libdl-2.5.so
b7c2f000      4K rw---  /lib/libdl-2.5.so
b7c30000   1352K r-x--  /lib/libc-2.5.so
b7d82000      4K -----  /lib/libc-2.5.so
b7d83000      8K r----  /lib/libc-2.5.so
b7d85000      4K rw---  /lib/libc-2.5.so
b7d86000     12K rw---    [ anon ]
b7d89000     84K r-x--  /lib/libpthread-2.5.so
b7d9e000      4K -----  /lib/libpthread-2.5.so
b7d9f000      4K r----  /lib/libpthread-2.5.so
b7da0000      4K rw---  /lib/libpthread-2.5.so
b7da1000      8K rw---    [ anon ]
b7da3000   1192K r-x--  /lib/libcrypto.so.0.9.8e
b7ecd000     80K rw---  /lib/libcrypto.so.0.9.8e
b7ee1000     12K rw---    [ anon ]
b7ee4000     72K r-x--  /usr/lib/libz.so.1.2.3
b7ef6000      4K rw---  /usr/lib/libz.so.1.2.3
b7ef7000      4K rw---    [ anon ]
b7ef8000     28K r--s-  /usr/lib/gconv/gconv-modules.cache
b7eff000      4K r----  /usr/lib/locale/en_US.utf8/LC_MESSAGES/SYS_LC_MESSAGES
b7f00000    108K r-x--  /lib/ld-2.5.so
b7f1b000      4K r----  /lib/ld-2.5.so
b7f1c000      4K rw---  /lib/ld-2.5.so
bffad000     84K rw---    [ stack ]
 total     4972K 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T04:29:58.590

`git-svn`是一个 Perl 脚本，您可以在[`git-svn.perl`](https://github.com/git/git/blob/master/git-svn.perl). 如果您正在寻找源代码，那么使用 pmap 会产生很大的误导。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T04:29:01.873

它被实现为[Perl 脚本](https://github.com/git/git/blob/master/git-svn.perl)。

# css - 在 jQuery Mobile 中包装可折叠

> ID：12274467
> 
> 赞同：2
> 
> 时间：2012-09-05T04:24:06.483
> 
> 标签：css, jquery-mobile

考虑以下 jQuery Mobile 标记：

```
 <div data-role="collapsible">
      <h3 style="white-space:normal">This heading is not
wrapping even after "white-space:normal" style is applied</h3>
       <p>This content is wrapping without any problems</p>
     </div> 
```

由于样式`"white-space:normal"`，标题应该换行，但它没有发生。

为什么会这样？

我可以做些什么来包装标题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-07-24T14:52:35.950

从 1.4.3 版开始，您现在需要在 CSS 中执行以下操作：

`h3 .ui-btn{white-space:normal !important;}`

我遇到了这个问题，这让我发疯了，因为网上所有的例子都是针对旧版本的 jQuery Mobile，而且显然 jQuery Mobile 的好人随着时间的推移改变了他们的类名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T04:27:24.167

..................................................... ......

习惯了这个

```
word-break:break-all 
```

像这样

```
h3{
word-break:break-all;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-20T15:58:36.773

在 jquerymobile 有其方式之后，h3 的实际文本并不直接位于 h3 标记内。答案是在 ui-btn-text 类上使用 css。因此，如果您想为由 h3 标签制成的按钮实现它：

```
<style>
h3 .ui-btn-text{ white-space:normal; word-break:break-all; }
</style> 
```

jquerymobile 加载后的 h3 标签的 html 如下所示：

```
<h3 class="ui-collapsible-heading ui-collapsible-heading-collapsed">
    <a href="#" ...>
        <span class="ui-btn-inner">
            <span class="ui-btn-text">The actual h3 text
                <span class="ui-collapsible-heading-status"> click to expand contents</span>
            </span>
            <span class="ui-icon ui-icon-arrow-d ui-icon-shadow">&nbsp;</span>
       </span>
    </a>
</h3> 
```

# visual-studio - 为什么在 VS 2012 中使用 Code First 时，Entity Framework 4 会生成额外的列？

> ID：12274470
> 
> 赞同：1
> 
> 时间：2012-09-05T04:24:15.303
> 
> 标签：visual-studio, entity-framework, visual-studio-2012

我刚刚安装了 VS 2012 Premium，并且一直在关注 PluralSight ASP.Net MVC 4 教程。我在第 4 章，项目使用 EF 4 Code First 自动创建数据库。

奇怪的是，它创建了额外的数据库列，而不是匹配我的 Restaurant.cs 模型文件中的属性。

在 Restaurant.cs 我有：

```
namespace OdeToFood.Models
{
    public class Restaurant
    {
        public int ID { get; set; }
        public string Name { get; set; }
        public Address Address { get; set; }
    }
} 
```

但是，它在 OdeToFoodDB dbo.Restaurants 表中生成：

*   ID（PK，int，不为空）
*   名称 (nvarchar(max), null)
*   Address_Street (nvarchar(max), null)
*   Address_City (nvarchar(max), null)
*   Address_State (nvarchar(max), null)
*   Address_Country (nvarchar(max), null)

但类中没有 Street、City、State 和 Country 属性。在视频中，数据库只有 ID、Name 和 Address 列，但我不知道这是否与他在 EF 处于预发布状态时使用的事实有关。新的 EF 是否有一些重要的假设？

有谁知道这里发生了什么？

我已经删除了生成的数据库、obj 和 bin 中的文件，重新创建了一个 Restaurant.cs 类，卸载了 EF4，并添加了 EF5，但最终结果没有任何改变。我仍然得到那些与我的 Restaurant.cs 文件无关的额外列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T05:05:11.353

您所看到的都是设计使然。`Address`是一个复杂类型，这就是复杂类型在数据库表中的表示方式。

[在这里](http://weblogs.asp.net/manavi/archive/2010/12/11/entity-association-mapping-with-code-first-part-1-one-to-one-associations.aspx)寻找关于这个例子的解释。

# c# - 从 ASP.NET 1.1 访问 DLL

> ID：12274472
> 
> 赞同：-1
> 
> 时间：2012-09-05T04:24:21.193
> 
> 标签：c#, asp.net

我目前正在尝试重新设计一个用 Asp.net 和 C# 编写的网页。我创建了一些将在代码隐藏文件中使用的类（用 C# 编写）。我添加了对我创建的类的 dll 文件的引用。dll文件都位于Bin目录下。

但是，当我尝试访问该页面时，会显示以下错误。

> 编译器错误消息：CS0246：找不到类型或命名空间名称“xxxxxx”（您是否缺少 using 指令或程序集引用？）

我通过使用“使用；”来包含 dll 命名空间。

```
using MyNamespace; 
```

是否需要进行某种设置才能访问 dll 文件中的类？

*   我正在使用 .net 1.1 框架

谢谢，艺人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T09:19:05.653

确保包含您的类库 DLL 使用的任何第三方 DLL。名称 'xxxxxx' 应该是包含类型的丢失 DLL 的指示符。

# algorithm - Ford Fulkerson 算法的一种变体

> ID：12274474
> 
> 赞同：3
> 
> 时间：2012-09-05T04:24:30.633
> 
> 标签：algorithm, graph-algorithm, flow, ford-fulkerson

> 假设我们重新定义残差网络以禁止边缘进入`s`。认为程序 FORD-FULKESON 仍然正确地计算了最大流量。

我在想，当我们增加一条路径时，反向边缘的剩余容量会增加，如果需要，可以用来减少该边缘的流量（但总体上会增加网络流量）。因此，如果我们不允许边缘进入`s`，则意味着我们不允许边缘中的流量减少`s- x`（`x`与 相邻的节点`s`）。所以在我们允许边缘进入的情况下，`s`我们可以有一个循环

`s to x_1 leadsto y leadsto x_2 to s to x_3 leadsto t`

但是如果我们再次禁止边缘进入`s`，我们可以找到没有循环的相同路径。以上都是直观的想法，但我想要一个正式的证明。

问题来自Cormen 等人*的《算法导论》。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T16:17:46.827

我认为您的直观想法已经足以证明。让我们考虑两个图：在图 G1 中，我们允许边进入 s，而在图 G2 中，我们不允许。

现在，假设 Ford-Fulkerson 算法在 G1 中发现比在 G2 中更大的流量。由于 G2 中的所有增广路径在 G1 中也是有效的，我们可以在两个图上尽可能长时间地使用相同的增广路径，然后为残差网络获得一个状态，其中 G1 中存在增广路径，但在 G1 中没有增广路径。 G2。

但是，正如您所指出的，任何在 G1 中有效的增广路径在 G2 中也有效，前提是我们删除了最后一次访问 s 之前出现的每条边。因此我们的假设是错误的，这种情况不可能存在——福特-富克森将在 G1 和 G2 上产生相同的输出。

# flash - Flash 嵌入源重定向不处理重定向添加的查询参数（仅限 IE 和 Chrome）

> ID：12274484
> 
> 赞同：0
> 
> 时间：2012-09-05T04:25:51.553
> 
> 标签：flash, internet-explorer, google-chrome, redirect, parameters

我只有在 chrome 和 IE 中的 swf 文件的重定向源有问题。这对于将虚拟主题 swf（mod-rewrite）重定向到带有附加颜色参数的原始 swf 的主题管理系统来说是必需的。用户可以使用组合框选择颜色，例如：默认、黑色、金色、橙色等。

例如：

```
User select 'black' in combobox
virtual source: http://myserver/mytheme/black.swf
redirects to: http://myserver/mytheme/default.swf?color1=0000&color2=&FFFFFF& ...... 
```

虚拟源链接到名为 theme.php 的主题管理器。此主题管理器为 default.swf 文件（来自数据库）应用正确的参数，并将其重定向到带有应用参数的 default.swf 文件。

最后，swf 'default.swf' 应用颜色查询参数并将一些对象更改为指定的颜色。

这在 Firefox 和 Opera 中运行良好。但在 Chrome 和 IE 中查询参数丢失，swf 显示默认颜色。我认为这是因为 src 参数仍然指向虚拟文件（没有查询参数的那个）？

有人可以向我解释发生了什么吗？或者更好，有人知道解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T22:43:26.707

好吧，这个问题没有答案。

以不同的方式解决了这个问题。我没有将（例如）black.swf 重定向到带有应用参数的 default.swf，而是将代码更改为首先向服务器请求黑色的颜色参数。然后我将带有接收到的参数的 default.swf 直接应用于对象，并且工作正常。

不是真正的解决方案，而是一种解决方法。仍然不清楚为什么对象标签/嵌入标签中的文件重定向不起作用。

# c++ - C ++中的参数相关查找

> ID：12274490
> 
> 赞同：7
> 
> 时间：2012-09-05T04:26:26.720
> 
> 标签：c++, argument-dependent-lookup

这是如何运作的？它与ADL有关吗？

```
#include <iostream>

template <typename T>
struct A
{
    friend void f(T x)
    {
        std::cout << "A\n";
    }
};

int main()
{
    f(new A<void*>());
} 
```

有人可以告诉我为什么我不能使用类似的东西

```
f(A<int>()); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-05T04:37:30.280

```
f(new A<void*>()); 
```

由于***[Argument 依赖查找/Koenig 查找](https://stackoverflow.com/questions/8111677/detailed-explanation-on-how-koenig-lookup-works-with-namespaces-and-why-its-a-go)***( ***ADL*** )
Koenig Lookup 状态，确实有效：

> 如果在函数的命名空间中定义了一个或多个参数类型，则不必限定函数的命名空间（范围）。

考虑一个不使用模板的[简单示例](http://ideone.com/aIRN2)，它应该可以帮助您更好地理解 ADL 的工作：

```
#include <iostream>
struct A
{
    friend void f(A x)
    {
        std::cout << "A\n";
    }
};

int main()
{
    f(A());
    return 0;
} 
```

**输出：**

```
A 
```

当您使用`f(A<int>())`时，它要求`f()`需要 type 的参数`int`，但您的结构不提供任何从`A`to`int`的转换，因此不提供错误。

[***如果您提供适当的转换，那么它也将起作用。像***](http://ideone.com/tg5VX)：

```
operator int(){return 1;} 
```

# c++ - 将字符串分配给固定长度的字符数组

> ID：12274492
> 
> 赞同：2
> 
> 时间：2012-09-05T04:26:29.090
> 
> 标签：c++, string

我在搜索 SO 时遇到了将[固定长度字符数组分配给字符串的](https://stackoverflow.com/questions/11934746/assign-a-fixed-length-character-array-to-a-string)问题。但我想要的是反向操作，将一个字符串分配给一个固定长度的字符数组。例如，如果我有

```
char name[20];
name = "John"; 
```

我收到一个编译时错误，说我正在将 char array[4] 分配给 char array[20]。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T04:28:16.890

采用`strncpy`

```
strncpy(name, "John", sizeof(name)-1); 
```

**编辑**

正如许多其他人指出的那样（我错了） - strncpy 并不总是以空值终止字符串，因此如果您需要将它用作 ac 字符串，那么它需要显式地以空值终止。它不会溢出它，但这可能不是您所需要的全部

```
if(sizeof(name)>0)
{
    name[sizeof(name)-1]=0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T05:32:42.993

```
char    dst[30];
string  src("hello");
// check here that sizeof(dst) > src.size()
copy(begin(src), end(src),  begin(dst));
dst[src.size()] ='\0'; 
```

`std::string`也有`c_str()`方法。它是可扩展的 - 动态分配内存。`const char*`如果不介意可以使用returned `const`。当被破坏时，这个 c-string 将被`src`破坏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-09T17:44:23.830

传递常量字符串不会完成这项工作，因为它不会将 \0 （转义字符）附加到数组的其余部分！strcpy 会自动为您执行此操作，所有可用空间都用转义字符填充，因此您不会出错！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-05T04:28:32.527

尝试使用`strcpy`

[http://www.cplusplus.com/reference/clibrary/cstring/strcpy/](http://www.cplusplus.com/reference/clibrary/cstring/strcpy/)

基本上你会想要`strcpy(name,"John");`

# c# - 如何给按钮一个特殊的标识符

> ID：12274497
> 
> 赞同：0
> 
> 时间：2012-09-05T04:27:28.580
> 
> 标签：c#, winforms, button, identifier

我正在编写一个生成和保存配色方案的应用程序。我需要能够选择配色方案基色并删除该配色方案。每个配色方案由一系列按钮表示（基色是一个按钮，其他色调是按钮）。当我单击代表配色方案的基色的按钮时，我需要能够获得该按钮所属的配色方案。

基本上，我需要在创建按钮时将特殊标识符（字符串）附加到按钮上，以便以后识别它。有谁知道这样做的方法？我正在使用 WinForms（不幸的是）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T04:31:11.977

Button 类（从 Control 派生）上有一个[Tag 属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.tag.aspx)，它接受任意对象。你可以在里面放任何你想要的东西。

# c# - 服务层 ModelState 未在 .net Web API 中更新

> ID：12274498
> 
> 赞同：0
> 
> 时间：2012-09-05T04:27:43.420
> 
> 标签：c#, error-handling, asp.net-web-api, service-layer, asp.net-mvc-viewmodel

我正在实现一个 MVC 解决方案，该解决方案具有一些用于各种数据查询的 Web API 端点。我正在使用[本文中描述的技术将](http://www.asp.net/mvc/tutorials/older-versions/models-%28data%29/validating-with-a-service-layer-cs)我的验证问题分离到服务层。

如果您想跳到具体问题，这篇文章最后有一个**TL；DR 。**

这是我的`ApiController`代码：

```
[Authorize]
public class FriendsController : ApiController
{
    private IItemService _service;

    public FriendsController()
    {
        _service = new ItemService(new HttpModelStateWrapper(ModelState), new ViewModelRepository());
    }

    public FriendsController(IItemService service)
    {
        _service = service;
    }

    // GET api/friends
    public IEnumerable<User> Get()
    {
        return _service.GetFriends(User.Identity.Name);
    }

 .
 .
 .

    // POST api/friends
    public void Post(Guid id)
    {
        var user = _service.AddFriend(User.Identity.Name, id);  // Handles error and should update ViewModel
        NotificationAsyncController.AddNotification(user);
    }
} 
```

和代码`_service.AddFriend(User.Identity.Name, id);`看起来像这样：

```
 public User AddFriend(string userName, Guid id)
    {
        try
        {
            return _repository.AddFriend(userName, id);
        }
        catch (Exception e)
        {
            _validationDictionary.AddError("AddFriend", e.Message);
            return null;
        }
    } 
```

`_validationDictionary`看起来像这样：

```
public class HttpModelStateWrapper : IValidationDictionary
{
    private ModelStateDictionary ModelState;

    public HttpModelStateWrapper(ModelStateDictionary ModelState)
    {
        this.ModelState = ModelState;
    }

    public void AddError(string key, string errorMessage)
    {
        if (ModelState != null)
            ModelState.AddModelError(key, errorMessage);
    }

    public bool IsValid
    {
        get { return ModelState == null ? false : ModelState.IsValid; }
    }
} 
```

好吧，我发现如果`_repository.AddFriend(userName, id);`抛出错误并被`_validationDictionary.AddError("AddFriend", e.Message);`调用，则其中的 ModelState 对象`_validationDictionary`不会更新驻留在`FriendsController`.

也就是说，在`AddError`被调用之后， 中的 ModelState`HttpModelStateWrapper`是无效的，但是一旦该方法返回并且范围返回到 中`FriendsController`，它的 ModelState 并没有更新，仍然是有效的！

## TL;博士

如何获取已传递到`HttpModelStateWrapper`ctor`FriendsController`中的 ModelState 对象，其更改反映在 的 ModelState 对象中`FriendsController`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T16:35:43.460

我最终只是传递了整个控制器，这让我可以访问 ModelState 对象

# scala - 在 Scala Actor 模型中接收呼叫时使用多个案例

> ID：12274500
> 
> 赞同：-1
> 
> 时间：2012-09-05T04:28:06.657
> 
> 标签：scala, actor

我对这种叫做 Scala 的花哨语言很陌生。

我有足够的（我猜）C++ 编程经验。作为一个编程练习，我尝试使用 Scala 的 Actor 模型来添加数组的元素。我创建了一个名为 workerActor 的类。在我的主要方法中，我创建了这个类的一个对象，然后尝试向这个对象发送消息（这是一个演员，因为我从 Scala 中的 Actor 类扩展了我的类）。当我将字符串传递给演员时，act 方法中的代码会被执行，并且逻辑会转到正确的情况下，每个人都很高兴。但是，当我尝试将元组传递给 sample 之类的对象时！(2,4,arr)

2 和 4 是我希望我的演员进行计算的数组中的索引，而 arr 是我要传递的数组，它显示错误。如何将数组和索引传递给我的数组给 Actor。Scala 是否允许将元组传递给演员？

作为一个有趣的观察，我意识到如果我的 act() 方法中有第二种情况，我会得到一个编译错误。Eclipse 向我显示了无法访问的代码。知道为什么我不能在接收方法中使用第二种情况可能是什么问题。

```
case object add
case object trial

import scala.actors._
import Actor._

class workerActor(arr: Array[Int]) extends Actor{
def addarr(a: Int, b: Int): Int = {
var sum = 0
for (i <- a to b)
  sum += arr(i)
  println("Sum :",a,b,sum)
sum
}
def act(){
   receive {
   case trial => println("Received trial")
   //case trial => println("Received add") //uncommenting this line does not compile the program
   }
}
}

object hello {
  def main(args: Array[String]): Unit = {
    println("Hello World")
    val arr = Array(1,2,3,4,5,7,13,4,6,6,23);
    val sample = new workerActor(arr)
    val s = sample.addarr(2, 4,arr)
    sample ! (2,4)
    sample ! "try"
    sample ! add
    sample.start   
    sample ! trial
  }
} 
```

而不是传递元组的问题，这看起来是接收多个案例的奇怪问题（可能是语法）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T04:34:23.133

问题在于，在 case 语句中，Scala 将以小写字母开头的标识符视为变量，因此它实际上是在第一种情况下分配了一个名为“trial”的新变量：

```
case trial => println("Received trial")
case add   => println("Received add") 
```

我们可以在一个简单的例子中看到“赋值”行为：

```
scala> 5 match { case something => println("matched " + something) }
matched 5 
```

When`trial`只是一个可赋值变量，它可以匹配任何东西，所以第一种情况总是会成功......对于`trial`和`add`对象。由于第一种情况总是成功，您会收到一条错误消息，告诉您第二种情况无法访问。

要解决此问题，您需要使用“稳定标识符”。稳定标识符包含在反引号中：

```
case `trial` => println("Received trial")
case `add`   => println("Received add") 
```

或以大写字母开头：

```
case object Add
case object Trial

...

case Trial => println("Received trial")
case Add   => println("Received add") 
```

# c# - 为什么我的属性返回的不是我设置的值？

> ID：12274514
> 
> 赞同：0
> 
> 时间：2012-09-05T04:29:55.017
> 
> 标签：c#, wpf, properties

我有一个简单的 wpf 复选框

```
 <CheckBox Name="layerCheckBox" IsChecked="{Binding Path=IsSelected, Mode=TwoWay}" Grid.Column="0" /> 
```

我将其绑定到我的自定义 Layer 类的 BindingList。

```
 public BindingList<Layer> Layer
    {
        get { return _layer; }
        set { _layer = value; }
    } 
```

Layer 类有一个属性 IsSelected。这就是我在我的复选框中使用的。如您所见，我添加了一些用于读取和写入属性的输出

```
public bool IsSelected 
{

 get
 {
   System.Diagnostics.Debug.WriteLine("get"+_isSelected+this.GetHashCode()+
     "thread"+Thread.CurrentThread.ManagedThreadId); 
   return _isSelected; 
 }

 set 
 { 
   System.Diagnostics.Debug.WriteLine("set" + value + this.GetHashCode() 
     + "thread" + Thread.CurrentThread.ManagedThreadId);
   PropertyChanged.ChangeAndNotify(ref _isSelected, value, () => IsSelected); 
 }
} 
```

奇怪的是输出。首先，我选中复选框并将属性设置为 true。之后我读了这个属性，它说的是假的？这是怎么回事？它是同一个对象（哈希码）和同一个线程......我不明白......对于接下来的 2 次读取，我猜刷新，它又是真的。最好的部分是 - 如果我取消选中它返回 true 的框。

属性内的代码来自here [property notify](http://www.wpftutorial.net/INotifyPropertyChanged.html)

输出

setTrue53182860thread1

getFalse53182860thread1

getTrue53182860thread1

getTrue53182860thread1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T04:34:24.040

可能的问题是`ChangeAndNotify`扩展方法。它在引发属性更改事件后设置您的字段值。

当您引发事件时，所有订阅者都将尝试从该属性中读取。因为尚未设置支持字段，它将返回原始值。

修复`ChangeAndNotify`扩展方法中的代码，以在引发 Property Change 事件之前设置字段的值。

```
field = value;   //<-- move to here
if (vmExpression != null)
{
    LambdaExpression lambda = Expression.Lambda(vmExpression);
    Delegate vmFunc = lambda.Compile();
    object sender = vmFunc.DynamicInvoke();

    if( handler != null)
    {
        handler(sender, new PropertyChangedEventArgs(body.Member.Name));
    }
}

return true; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T04:41:43.847

在应用新值之前，您的 set 方法实际上会触发对“get”的调用。这样做是因为它需要先读取 IsSelected 属性，然后再将其作为函数参数传递给您对 ChangeAndNotify 的调用。

我会将其更改为：

```
set { PropertyChanged.ChangeAndNotify(ref _isSelected, value, () => _isSelected); } 
```

（请注意，当作为函数参数传递时，您不再调用 Get 属性。）

# mapreduce - 在 MapReduce 中将 reducer 的数量设置为 1

> ID：12274519
> 
> 赞同：0
> 
> 时间：2012-09-05T04:30:55.307
> 
> 标签：mapreduce

当我们将多个 reducer 设置为 one 时会发生什么？它是写入单个文件还是造成瓶颈（因为默认情况下reducer 的数量是一个）。减速器的数量是否由运行时决定？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T23:47:02.800

当使用 1 个 reducer 运行作业时，您会失去 reducer 任务的并行性。reducer 任务将接收所有映射器的输出，并且可能会占用大量内存，并且最终会写入单个文件。reducer 的数量默认为 1，但可以并且应该通过在作业配置中设置来增加

```
 jobConf.set("mapred.reduce.tasks", numReducers) 
```

# android - 如何根据android中的当前位置找到最近的100米经纬度

> ID：12274525
> 
> 赞同：-2
> 
> 时间：2012-09-05T04:32:00.577
> 
> 标签：android

如何根据android中的当前位置查找最近的1000米经纬度，以从sql lit数据库中获取最近的位置

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-16T18:19:16.470

我不知道您为什么要使用手机数据库来存储您的所有位置。使用服务器端更安全。假设您的数据库表中保存了纬度和经度，则仅在查询中需要修改。以下是解决我的问题的 SQL 查询：

```
"SELECT * FROM places WHERE (acos(sin(places.lat * 0.0175) * sin($userLat * 0.0175) + cos(places.lat * 0.0175) * cos($userLat * 0.0175) * cos(($userLon * 0.0175) - (places.lon * 0.0175))) * 3959 <= $locateRadius)"
//userLat and userLon refer to your current location 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T04:39:27.717

我不知道您说“sql lite 数据库”是什么意思，因为当前位置不应存储在手机上的任何数据库中，除非您将其明确存储在其他应用程序中。

这应该在您的主要活动中：

```
LocationManager locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
LocationListener locationlistener = new mylocationlistener();
locationmanager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locationlistener); 
```

...

```
private class mylocationlistener implements LocationListener{
    @Override
    public void onLocationChanged(Location location) {
        if (location != null) {
            Log.d("latitude", location.getLatitude());
            Log.d("longitude", location.getLongitude());                
        }               
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T04:44:10.867

实际上，我想您的问题更多是关于算法的，对吗？

本文档描述了几何近似的数据结构和算法，可能对您有所帮助。

[https://www.box.com/s/7lomb99vsmjsh77ud4eh](https://www.box.com/s/7lomb99vsmjsh77ud4eh)

# java - JTable和Table模型什么时候用什么时候？

> ID：12274526
> 
> 赞同：1
> 
> 时间：2012-09-05T04:32:07.553
> 
> 标签：java, swing, jtable, tablemodel, defaulttablemodel

我对这两者之间的区别有一些想法。但是，我对何时使用时有些困惑。我只知道，

*   要显示 JTable，请创建一个 JTable 并为其设置相应的表模型。
*   任何时候，如果我们想更改该表中的数据，更改模型中的数据，那么更改将反映在视图中。

我们可以从视图和模型中获取表的值。这是我感到困惑的地方。如果发生任何像（行选择）这样的事件，那么我必须从中获取值？是从视图还是模型？考虑到 JTable 的排序和过滤，最佳实践是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T04:39:53.863

您可以从表的模型或`JTable`实例本身中获取值；最终结果是一样的。JTable`getValueAt`和相关的方法都只是简单地在内部表模型对象上调用相同的方法。

[JTable#getValueAt(int, int) 源代码](http://www.docjar.com/html/api/javax/swing/JTable.java.html)：

```
public Object getValueAt(int row, int column) {
    return getModel().getValueAt(convertRowIndexToModel(row),
                                 convertColumnIndexToModel(column));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T08:02:45.480

我的经验法则是从发生更改的元素（通常是事件源）中检索数据。在您的行选择更改示例的情况下，我从表中检索数据，因为选择与视图相关。

这是为了避免我没有使用正确的行/列。在行选择的示例中，数据完全有可能在视图端（在 中`JTable`）排序，而模型端没有改变（在 中`TableModel`）。`JTable`在这种情况下，如果我收到选择第 5 行的事件，则表示第 5 行在`TableModel`.

这可以在`getValueAt`@Vulcan 的答案中发布的实现中看到。它询问模型的值，但首先将行和列索引从“视图坐标”转换为“模型坐标”。

# python - 如何平滑 matplotlib 等高线图？

> ID：12274529
> 
> 赞同：51
> 
> 时间：2012-09-05T04:32:35.287
> 
> 标签：python, matplotlib

我有这种形状的numpy数组：（33,10）。当我绘制轮廓时，我会得到这样的丑陋图像： ![在此处输入图像描述](../Images/e775807ad263e702476441ff46198489.png)

虽然`contour()`似乎没有关于平滑或某种插值功能的任何争论。

我以某种方式期望提供等高线图的工具也应该提供平滑。
在 MPL 中有直接的方法吗？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-09-07T02:58:22.823

正如其他人已经指出的那样，您需要插入数据。

有许多不同的方法可以做到这一点，但对于初学者来说，请考虑`scipy.ndimage.zoom`.

作为一个简单的例子：

```
import numpy as np
import scipy.ndimage
import matplotlib.pyplot as plt

data = np.loadtxt('data.txt')

# Resample your data grid by a factor of 3 using cubic spline interpolation.
data = scipy.ndimage.zoom(data, 3)

plt.contour(data)
plt.show() 
```

![在此处输入图像描述](../Images/30d634d78ac709898672cf551a67e366.png)

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2015-12-19T11:41:15.557

如果您的数据*稀疏*，Joe Kingtons 的回答非常棒。

如果您的数据*嘈杂*，您应该考虑对其进行过滤：

```
from numpy import loadtxt
from scipy.ndimage.filters import gaussian_filter
from matplotlib.pyplot import contour, show

sigma = 0.7 # this depends on how noisy your data is, play with it!
data = loadtxt('data.txt')
data = gaussian_filter(data, sigma)
contour(data)
show() 
```

[![在此处输入图像描述](../Images/5d17a3d5bdcac4797721d982a957a8ec.png)](https://i.stack.imgur.com/QRxPT.png)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-09-05T12:31:49.867

没有简单的方法来获得平滑的轮廓。另一种方法是尝试`imshow`。您可以[在这里](https://stackoverflow.com/q/8055489/302369)寻找其他可能性。

```
import pylab as plt
import numpy as np

Z=np.loadtxt('data.txt')
plt.subplot(131)
plt.imshow(Z,interpolation='nearest')

plt.subplot(132)
plt.imshow(Z)

plt.subplot(133)
plt.imshow(Z,interpolation='gaussian')

plt.show() 
```

![在此处输入图像描述](../Images/1f4fa21dea6e388e9b56fe653dd7c0c1.png)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-05T05:13:15.433

尝试使用[gaussian_filter](http://docs.scipy.org/doc/scipy/reference/generated/scipy.ndimage.filters.gaussian_filter.html#scipy.ndimage.filters.gaussian_filter)平滑您的数据集。有关更多信息，请参见[示例](http://www.scipy.org/Cookbook/SignalSmooth)。

# objective-c - 在 plist 中更新和保存数据

> ID：12274530
> 
> 赞同：6
> 
> 时间：2012-09-05T04:33:16.347
> 
> 标签：objective-c, ios, plist

我正在制作一款 iOS 游戏，需要保存玩家达到的最高级别。我可以成功更改 plist 中的数据元素，但由于某种原因，每次游戏重新启动时，该数据都会恢复到其原始值。这是我的代码的基本流程：

在游戏的init中，获取玩家达到的最高等级（原值为1）

```
pData = [[PlayerData alloc] init];
currentLevel = [[pData.data valueForKey:@"Highest Level"] intValue];
[self startNewLevel:currentLevel]; 
```

'data' 是一个 NSMutableDictionary，它在 PlayerData 中像这样初始化：

```
self.data = [NSMutableDictionary dictionaryWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"playerdata" ofType:@"plist"]]; 
```

稍后，如果玩家击败最高级别，我会增加“最高级别”值并通过在 PlayerData 中调用此函数来写入文件：

```
-(void) newHighestLevel:(NSString*)path :(int)level{
     [self.data setValue:[NSNumber numberWithInt:level] forKey:path];
     [self.data writeToFile:@"playerdata.plist" atomically:YES] 
```

我知道这一切都有效，因为我有一个玩家可以在玩游戏时访问的关卡菜单。每次玩家按下级别菜单按钮时，都会创建一个 UITableView 的子类，显示级别 1 到达到的最高级别。初始化如下所示：

```
levelMenu = [[LevelMenu alloc] init:[[pData.data valueForKey:@"Highest Level"] intValue]]; 
```

关卡菜单在游戏中显示正确的关卡数量（例如，如果玩家没有通过任何关卡并进入关卡菜单，它只会显示“1 级”；但如果玩家通过了 1 级并进入级别菜单，显示“级别 1”和“级别 2”）。但是，每当应用程序终止或用户退出游戏主菜单时，“最高级别”的值将恢复为 1，并且此代码：

```
currentLevel = [[pData.data valueForKey:@"Highest Level"] intValue]; 
```

当玩家按下开始时总是将 currentLevel 设置为 1，无论用户在玩游戏时通过了多少关卡。

为什么价值会变回来？我是否遗漏了一些会使我的 plist 编辑永久化的东西？

编辑：

这是我的新“newHighestLevel”方法：

```
-(void) newHighestLevel:(NSString*)path :(int)level{
    [self.data setValue:[NSNumber numberWithInt:level] forKey:path];
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *basePath = ([paths count] > 0) ? [paths objectAtIndex:0] : nil;
    NSString *docfilePath = [basePath stringByAppendingPathComponent:@"playerdata.plist"];
    [self.data writeToFile:docfilePath atomically:YES];
    self.data = [NSMutableDictionary dictionaryWithContentsOfFile:docfilePath];
    BOOL write = [self.data writeToFile:docfilePath atomically:YES];
} 
```

write 设置为 YES。如果我将 'docfilePath' 更改为 @"playerdata.plist"，它将被设置为 NO。在这两种情况下，游戏似乎都没有改变。

解决方案：

```
-(void) newHighestLevel:(NSString*)path :(int)level{
      [self.data setValue:[NSNumber numberWithInt:level] forKey:path];
      NSString *basePath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject];
      NSString *docfilePath = [basePath stringByAppendingPathComponent:@"playerdata.plist"];
      [self.data writeToFile:docfilePath atomically:YES];
} 
```

并在初始化

```
-(id) init{

     NSString *basePath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject];
     NSString *docfilePath = [basePath stringByAppendingPathComponent:@"playerdata.plist"];
     NSFileManager *fileManager = [NSFileManager defaultManager];
     if (![fileManager fileExistsAtPath:docfilePath]){
         NSString *sourcePath = [[NSBundle mainBundle] pathForResource:@"playerdata" ofType:@"plist"];
         [fileManager copyItemAtPath:sourcePath toPath:docfilePath error:nil];
     }
     self.data = [NSMutableDictionary dictionaryWithContentsOfFile:docfilePath];
     return self;
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-05T04:43:32.053

从 plist 创建字典的最简单方法是使用方法**dictionaryWithContentsOfFile:**，

例如，要从您的资源中加载 plist：

```
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"playerData" ofType:@"plist"];
NSMutableDictionary *plistdict = [NSMutableDictionary dictionaryWithContentsOfFile:filePath]; 
```

编写 plistdict 同样简单：

```
[plistdict writeToFile:filePath atomically:YES]; 
```

**请注意**，您无法写入应用程序的资源，因此您必须创建不同的路径，例如在您的文档目录中为您的 plist。

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *basePath = ([paths count] > 0) ? [paths objectAtIndex:0] : nil;
NSString *docfilePath = [basePath stringByAppendingPathComponent:@"playerData.plist"];
[plistdict writeToFile:docfilePath atomically:YES]; 
```

现在再次从 plist 中检索数据。

```
 NSMutableDictionary *plistdict = [NSMutableDictionary dictionaryWithContentsOfFile:docfilePath]; 
```

在 plistDict 中添加您的内容并再次写入。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T04:49:44.273

该方法`writeToFile:atomically`返回一个`BOOL`结果。我猜该文件根本没有被保存。

您的游戏正常运行的原因是应用程序从`Dictionary`（启动时填充一次）读取数据，而不是`plist`每次都直接从文件中读取数据（也不应该）。

检查方法的返回值，`writeToFile:atomically`以确定文件是否实际被保存。

# php - 在 PHP 中检索值

> ID：12274533
> 
> 赞同：1
> 
> 时间：2012-09-05T04:33:57.267
> 
> 标签：php, mysql, sql

您好，在检索值时遇到了一些问题，所以我可能会使用它。这是我应该得到我的价值的地方。

```
<input type="text" class="typed" readonly="readonly" name="levele"
    value="<?php
    if($get_display->level== "Grade 2") {
        echo "Grade 4"; $lbl="Grade 4";
    }?>"> 
```

对于一个简单的测试，我将使用值 4 级，因为我知道我应该有什么结果。这是我要检索“levele”值的代码，因此它可以执行 SQL 语句。例如，我有 5 个针对 4 年级的部分，所以我正在考虑使用这个 sql 语句。

```
<select name="section_id">
    <option>SECTIONS</option>
    <?php 
        $result = mysql_query("SELECT * FROM tbl_section where level='".$_GET['levele']."'");
        while($row = mysql_fetch_array($result))
        {
            echo '<option value='.$row['section_id'].'>' .$row['section_name']. '</option>';
        }
    ?>  
</select> 
```

到目前为止，我无法检索“levele”，因此它可以用于 sql，也尝试了 $_POST 和 $_request 但没有，我检查 levele 是否确实具有 4 级值，它也在我的数据库中。将不胜感激任何帮助。因为在我检索了 5 个部分后，我将尝试自动选择一个部分，例如，如果学生的成绩为 90，则该部分应该是“A”，否则我将使用它。所以我将不胜感激任何帮助来解决这些问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T04:43:08.403

我在这里看到三个主要问题，我认为您应该解决：

首先，在顶部的代码中：

```
<input type="text" class="typed" readonly="readonly" name="levele" value="<?php if( 
     $get_display->level== "Grade 2"){ echo "Grade 4"; $lbl="Grade 4";}?>"> 
```

`$get_display->level`如果等于 2，您的代码只会回显并设置一个值。您是不是要添加 else 语句，以防该值`Grade 2`可能不是？

```
<?php 
    if($get_display->level== "Grade 2")
    { 
        echo "Grade 2"; $lbl="Grade 2";
    }
    else
    {
        echo "Grade 4"; $lbl="Grade 4";
    }
?>
<input type="text" class="typed" readonly="readonly" name="levele" value="<?php echo $lbl; ?>"> 
```

其次，您的代码表单部分似乎缺少值的引号：

```
echo '<option value='.$row['section_id'].'>' .$row['section_name']. '</option>'; 
```

我认为你打算使用这个：

```
echo '<option value="'.$row['section_id'].'">' .$row['section_name']. '</option>'; 
```

最后，您的代码很容易受到注入攻击。在处理表单数据时，您*确实*应该考虑转向[PDO](http://au.php.net/manual/en/book.pdo.php)和[准备好的语句。](http://au.php.net/manual/en/pdo.prepare.php)

编辑：这只是事后的想法，但我看不到您设置`$result`为有效连接的任何地方，但我认为这是您代码中的其他地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T04:43:21.677

```
<input type="text" class="typed" readonly="readonly" name="levele" value="<?php if( 
 $get_display->level== "Grade 2"){ echo "Grade 4"; **$lbl="Grade 4";**}?>">

remove ** portion and run ....

<select name="section_id">
<option>SECTIONS</option>
<?php 
    $result = mysql_query("SELECT * FROM tbl_section where level='".$_GET['levele']."'");
    while($row = mysql_fetch_array($result))
    {
        echo '<option value='.$row['section_id'].'>' .$row['section`enter code here`_name']. '</option>';
    }
?>  
</select> 
```

# encryption - 当涉及不同平台时，关于密码学的最佳实践是什么？

> ID：12274538
> 
> 赞同：2
> 
> 时间：2012-09-05T04:34:45.487
> 
> 标签：encryption, cryptography

问题是，在处理不同平台时使用加密和解密时可以遵循的最可取的方法是什么。

据我所知，每当一个人想要处理这样的场景时，他/她都必须考虑到某些事情。比如说，

1.  加密/解密算法
2.  填充图案
3.  两边的字符编码
4.  密码密钥和块大小

当然，一个人想要使用的加密/解密算法必须在双方都相同，我想我可以对剩下的三件事说同样的话。

请建议我在处理以下或类似情况时要遵循的步骤。

1.  在c中加密和在java中解密
2.  在 php 中加密 & 在 java 中解密

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T23:52:41.110

如果您真的对互操作性感兴趣，请尝试使用容器格式，例如 CMS。它部署了 BER/DER 编码的 ASN.1，它是消息结构的二进制编码（类似于 XML，它是消息的文本编码）。不幸的是，并非所有平台都包含此类消息格式，但如果支持它们，您可以合理地确定它们可以编码/解码消息。

PHP 很棘手，它要么依赖于 openssl 包装器，要么依赖于可怕的 mcrypt 库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T04:39:08.480

我会添加字节顺序（数字的小端与大端），但是，只要您选择相同的算法（和参数）和数据格式，在一个平台上加密的内容应该可以在另一个平台上解密，反之亦然。例如，这就是当今 SSL 的工作方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T05:10:03.077

良好互操作性的一个非常重要的方面是标准合规性。

良好的加密标准带有测试向量。如果两端实现了相同的规范，并且相关的测试用例已经过验证，那么它们成功对话的机会就会大得多。

例如，假设您需要从密码中派生 AES 密钥。如果你使用 openssl，你可能会想使用 common`EVP_BytesToKey`函数。不幸的是，这不是一个标准的推导算法，如果在另一端你也没有 openssl，你会发现自己有麻烦。使用像 PBKDF2 这样的标准会更好，因为您有一个大多数库都实现的清晰、知名且广泛使用的规范 ( [RFC2898](http://www.ietf.org/rfc/rfc2898.txt) )。

不幸的是，密码标准往往只关注原语，并且经常需要将几个原语移植在一起。“嫁接”可能被证明是互操作性分崩离析的领域。出于这个原因，我建议使用尽可能广泛的标准化算法，即使代价是一些额外的复杂性。

例如，如果您想加密某些东西，最好选择标准的身份验证模式，如 CCM（在[RFC3610](https://www.rfc-editor.org/rfc/rfc3610)中定义）。您可以一次性获得以下互操作性：

*   加密
*   验证
*   填充
*   IV的交付

# iphone - 如何在 iOS 中为键盘绘制多个按钮

> ID：12274540
> 
> 赞同：3
> 
> 时间：2012-09-05T04:35:14.573
> 
> 标签：iphone, ios, uibutton, uikeyboard

我想为键盘绘制 26 个按钮。有 3 行。第一行有 10 个按钮，第二行有 9 个，第三行有 7 个。从一个按钮到另一个按钮的间距是 5。每个按钮的宽度：27 和高度：40。我怎样才能同时绘制它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T04:53:43.597

您可以像这样按：- 这不是您问题的解决方案，但是..您仍然会从该代码中获得想法。-

```
 objDelegate.redColorArray = [[NSMutableArray alloc] initWithObjects:@"255",@"215",@"242",@"198",@"204",@"119",@"217",@"149",@"112",@"79",@"247",@"55",@"0",@"0",@"255",@"16", nil];
    objDelegate.greenColorArray = [[NSMutableArray alloc] initWithObjects:@"255",@"228",@"220",@"217",@"193",@"147",@"150",@"179",@"48",@"98",@"150",@"96",@"0",@"176",@"0",@"37", nil];
    objDelegate.blueColorArray = [[NSMutableArray alloc] initWithObjects:@"255",@"189",@"219",@"241",@"218",@"60",@"148",@"215",@"160",@"40",@"70",@"146",@"0",@"80",@"0",@"63", nil];

    UIButton *btn[16];

    buttonArray = [[NSMutableArray alloc] init];

    int x=0;
    int y=0;
   for (int i=0; i<16; i++)
    {
        btn[i] = [[UIButton alloc] initWithFrame:CGRectMake(x, y, 15, 15)];

        [btn[i] setBackgroundColor:[UIColor colorWithRed:[[objDelegate.redColorArray objectAtIndex:i]floatValue]/255.0 green:[[objDelegate.greenColorArray objectAtIndex:i]floatValue]/255.0 blue:[[objDelegate.blueColorArray objectAtIndex:i]floatValue]/255.0 alpha:1]];

        btn[i].tag = i;

        [btn[i] addTarget:self action:@selector(setColor:) forControlEvents:UIControlEventTouchUpInside];

        [buttonArray addObject:btn[i]];

        [self addSubview:btn[i]];

        x+=20;

        if((i+1)%4==0)
        {
            x=0;
            y+=20;
       }
    } 
```

它会显示这样的按钮 ![按钮图片](../Images/c68fa020920d5ab31d0299fca0308515.png)

# sql - 当表通过外键链接时如何插入值？

> ID：12274547
> 
> 赞同：0
> 
> 时间：2012-09-05T04:36:57.983
> 
> 标签：sql, sql-server, asp-classic, foreign-keys

所以我有四个表具有以下字段

```
Student_Master
---------------------
Student id(Primary Key)
Student Name
Class Id
Document Upload 
```

```
Student Marks
------------
Marks_Id
Student_Id(Foreign Key)
Subject_ID(Foreign Key)
Marks 
```

```
Subject
-----------
Subject ID
Subject Name 
```

```
Class
----------
Class ID
Class Name 
```

我在页面上的表单有以下字段：

```
Student Name
Class
Subject
Marks
Doc Upload 
```

现在如何将值插入到多个表中，并且它们之间有外键引用。项目在 ASP 中，我正在使用 SQL Server

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-26T05:29:09.070

```
First Try starting inserting the values from the parent table and then move to the secobdary tables.
Student_Master and Subject would be the parents to Student_Marks 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T04:48:02.643

首先将它们插入父表中，其中定义了主键。之后，只要符合约束条件，就可以随意填写子表和无关表。据我所知，Student_Master 和 Subject 将是 Student_Marks 的父母。

如果您询问如何从表单写入数据库，则需要进行一些研究。查看 ADO.NET 以及完成此操作所需的类/对象。

无论您做什么，都不要从用户值中将 SQL 拼凑在一起（内联 SQL）。使用参数化存储过程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T05:53:31.783

您可以编写一个接受参数“Student Name, Class, Subject, Marks, Doc Upload”的存储过程。首先向表“Class”插入数据，SCOPE_IDENTITY()返回最后插入的ID值；将其插入变量并将其插入“Student_Master”表。其他表也遵循相同的方法。查询将如下所示：

```
Declare @Scope_Class INT
INSERT INTO Class ([Class Name]) VALUES ('Class 1')
SET @Scope_Class =SCOPE_IDENTITY()
INSERT INTO Student_Master ([Student Name], [Class Id], [Document Upload]) VALUES ('Stud 1' , @Scope_Class, 'Doc 1') 
```

# java - 如何动态更新列表视图（新项目）？

> ID：12274548
> 
> 赞同：0
> 
> 时间：2012-09-05T04:37:03.243
> 
> 标签：java, android, android-arrayadapter, android-adapter

我正在开发小型 android 应用程序，我想在列表视图中显示新添加的项目。我正在从存储的数据库中获取项目，`ArrayList<HashMap<String,String>>()`因为我使用了 SimpleAdapter。我正在将新添加的元素放入 `ArrayList<HashMap<String,String>>()`但不显示在列表视图中，即使我使用过`notifyDataSetChanged()`更新listview。请帮我解决这个问题。

```
do 
                {
                    cont = new String[3];
                    cont[0] = Integer.toString(c.getInt(ID));
                    cont[1] = c.getString(booktitl);
                    cont[2] = c.getString(audiotime);

                    audiobooks.add(cont);

                }
                while(c.moveToNext());

                c.close();

                db.close();//close db resources 
                for(int i=0;i<audiobooks.size();i++)
                {
                    //hashmap to add it to resultbookMarklist.
                    HashMap<String, String> item = new HashMap<String, String>();                       
                    resultbookMarklist=new ArrayList<HashMap<String,String>>();

                    String title[]= audiobooks.get(i);

                    item.put("Booktiltle",title[1]);
                    item.put("BookmarkTime",title[2]);
                    //intantiating string which stores filetitle
                    from= new String[] {"Booktiltle","BookmarkTime" };
                    //intantiating array of integer which gives detais and col id for document
                    to= new int[] { R.id.itemr1,R.id.itemr2};
                    Log.e("booktitle is", title[1]);
                    Log.e("BookmarkTime is", title[2]);
                    resultbookMarklist.add(item);

                }
                //resultbookMarklist=getBookmark();
                SimpleAdapter adapter = new SimpleAdapter(GetAudioBookmarks.this, resultbookMarklist, R.layout.row3, from, to);
                lv.setAdapter(adapter); 

            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T04:47:10.007

如果您的 Arraylist<> 更新并且在更新之后您正在调用 adapter.notifyDataSetChanged() ，它应该更新列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T04:48:15.370

代替 SimpleAdapter 使用 ArrayAdapter 因为 SimpleAdapter 被用作静态数组的适配器。如果您仍想使用 SimpleAdapter，则改为调用 notifyDatasetChanged，创建一个新的适配器实例并设置为 listview。

# c# - 匿名事件

> ID：12274549
> 
> 赞同：2
> 
> 时间：2012-09-05T04:37:14.197
> 
> 标签：c#, java, xamarin.android

我坚持为 Android 编写 C# Mono，相当于以下 Java 事件处理程序代码：

```
public class Player extends ListActivity
{
    private ImageView list;//basically this is a buttona

    private void SetupButtonListeners()
    {
        list.setOnClickListener(new OnClickListener()
        {
             public void onClick(View v)
             {
                  //do stuff
             }
        });
    }
    /*
       more stuff here
    */
} 
```

API 参考：[http ://androidapi.xamarin.com/?link=T%3aAndroid.Widget.Button](http://androidapi.xamarin.com/?link=T%3aAndroid.Widget.Button)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T12:00:42.003

虽然您可以设置一个点击侦听器，如另一个答案中所示，类似于它在 Java 中的完成方式，但这不是在 Mono for Android 中做事的首选方式。由于 C# 没有匿名类定义，Android 的 Mono 实际上将这些侦听器接口转换为事件，从而产生更好的 API。例如，在这种情况下，您可以使用任何类[`Click`](http://docs.mono-android.net/?link=E%3aAndroid.Views.View.Click)中存在的事件：`View`

```
ListView list;

list.Click += delegate(object sender, EventArgs e)
                      {
                          // do stuff
                      }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T04:58:25.607

根据[文档](http://androidapi.xamarin.com/?link=M%3aAndroid.Views.View.SetOnClickListener%28Android.Views.View%2bIOnClickListener%29)，C# 中没有匿名接口实现，这是您需要的：

```
public virtual void SetOnClickListener (View.IOnClickListener l) 
```

除非已经有一些帮助类，否则您需要编写实现此接口的类并将其传入。如果找不到现有的类，您应该能够创建创建类并将委托作为 OnClick 方法的实现的帮助函数。

# jquery - jQuery“更改”事件处理程序

> ID：12274550
> 
> 赞同：0
> 
> 时间：2012-09-05T04:37:16.563
> 
> 标签：jquery, events, event-handling, handler, jquery-events

我正在制作一个文件上传器。我正在努力做到这一点，以便当一个输入字段被填充时，它会创建一个新的输入字段。我的问题是将事件处理程序绑定到动态创建的元素。我的代码可以在以下 URL 找到：http: [//jsfiddle.net/sJ5Az/](http://jsfiddle.net/sJ5Az/)

如果您查看脚本部分中指示的行，问题是事件处理程序实际上并未在此处设置。它不会产生任何可见的错误或控制台错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T04:57:34.767

好的，试试这个。我已经更新了你的 js fiddle [http://jsfiddle.net/sJ5Az/5/](http://jsfiddle.net/sJ5Az/5/)

**您必须使用 jquery live 事件，为现在和将来匹配当前选择器的所有元素附加事件处理程序。**

参考网站：
[Jquery 现场活动](http://api.jquery.com/live/)

* * *

## 更新

* * *

**Live 已贬值，因此现在`on`功能可以正常工作，** [这里是 ref 的链接](https://stackoverflow.com/questions/8191064/jquery-on-function-for-future-elements-as-live-is-deprecated)

这个问题是根据功能更新的，这里是演示[http://jsfiddle.net/sJ5Az/6/](http://jsfiddle.net/sJ5Az/6/)

# java - java - 服务器在一段时间后停止接受连接

> ID：12274551
> 
> 赞同：0
> 
> 时间：2012-09-05T04:37:16.113
> 
> 标签：java, sockets

我在 WinServer 2008 机器上有一个简单的多客户端 java 服务器，它工作正常，但是在看似随机的时间（天）之后，服务器停止接受任何连接，我不知道为什么。

它没有捕获任何异常，它不会崩溃，它只是不接受任何连接，我认为这是被 GC 处理的 serversocket，所以我将其设为全局但无济于事。它似乎也不是 TCP 耗尽，因为几个小时没有人连接，它仍然不接受任何连接，我也将 setReuseAddress 设置为 true，但它一直在做同样的事情。

让它再次工作的唯一方法是重新启动 java 服务器应用程序（不需要重新启动机器）并且它再次正常工作......一段时间。

这是我与情况相关的代码：

```
 try
    {
        ServerSocket srvr = new ServerSocket(PORT);

        while (isAlive)
        {
            Socket skt = srvr.accept();

            this.bw = new PrintWriter(skt.getOutputStream(), true);
            this.br = new BufferedReader(new InputStreamReader(skt.getInputStream()));
            String msg = br.readLine();

                            //process msg

            skt.close();
        }
    }
    catch (Exception e)
    {
        System.out.println("Error");
    } 
```

编辑：更改代码

```
 while (isAlive)
        {
            Socket skt = srvr.accept();
            skt.setSoTimeout(10000);

            acceptConnection(skt);
        }

public void acceptConnection(final Socket skt) throws Exception
{
    Thread discConn = new Thread()
    {
        public void run()
        {
            try
            {
                PrintWriter bw = new PrintWriter(skt.getOutputStream(), true);
                BufferedReader br = new BufferedReader(new InputStreamReader(skt.getInputStream()));
                String msg = br.readLine();
//process msg
                }
            catch (SocketTimeoutException ste)
            {
                //
            }
            catch (SocketException se)
            {
                //
            }
            catch (Exception e)
            {
                System.out.println("ERROR");
            }
            finally
            {
                try
                {
                    skt.close();
                }
                catch (IOException e)
                {
                    System.out.println("ERROR");
                }
            }
            }
    };
    discConn.start(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T23:40:32.923

您在接受循环中阻塞了客户端 I/O。一个从不发送任何东西的客户端可以停止整个系统。您在接受循环中应该做的就是接受连接并启动线程。唯一的阻塞操作应该是 accept() 本身。客户端 I/O 应该在单独的线程中完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T04:43:03.823

您正在泄漏套接字。您的关闭将被异常跳过。使用 finally 块来释放资源。

```
while(...) {
   Socket sckt;
   try {
      sckt = ...
      ...
   } catch(Exception e) {
   } finally {
       sckt.close();
   }
} 
```

# nhibernate - NHibernate - 创建代理实例失败

> ID：12274557
> 
> 赞同：0
> 
> 时间：2012-09-05T04:38:48.870
> 
> 标签：nhibernate, castle-dynamicproxy, lazy-initialization

我的数据模型看起来像这样。

```
public abstract class BasePivotField
    {
        public virtual int SystemId { get; set; }
        public virtual int Version { get; set; }
        public virtual string FieldName { get; set; }
        public virtual string FieldValuePrefix { get; set; }
        public virtual Field Field { get; set; }
        public abstract PivotFieldType FieldType { get; }
    }

public class PivotColumnField : BasePivotField
{
    public virtual CriteriaWithField FieldCriteria { get; set; }
    public virtual int Width { get; set; }

    public override PivotFieldType FieldType
    {
        get { return PivotFieldType.ColumnField; }
    }
}
public class PivotTableControl : BaseControl
{
        public virtual Criteria Criteria { get; set; }
        public virtual int Height { get; set; }
        public virtual PagingProperties PagingProperties { get; set; }
        public virtual IList<BasePivotField> PivotTableFields { get; set; } 
} 
```

我使用 Fluent NHibernate 映射，映射类如下

```
public class PivotTableControlMap : SubclassMap<PivotTableControl>
    {
        public PivotTableControlMap()
        {
            References(x => x.Criteria).Cascade.All().Column("PivotTableCriteria");
            Map(x => x.Height);
            Component(x => x.PagingProperties);
            HasMany(x => x.PivotTableFields)
                .KeyColumn("PivotTableId")
                .Cascade.AllDeleteOrphan()
                .AsBag();
        }
    }

public class PivotTableFieldMap : ClassMap<BasePivotField>
    {
        public PivotTableFieldMap()
        {
            Table("PivotTableField");
            Id(x => x.SystemId);
            Version(x => x.Version);
            Map(x => x.FieldName);
            References(x => x.Field).Cascade.All().Column("FieldId");
            Map(x => x.FieldValuePrefix);
            DiscriminateSubClassesOnColumn("PivotFieldType");
        }
    }

public class PivotColumnFieldMap : SubclassMap<PivotColumnField>
{
    public PivotColumnFieldMap()
    {
        Component(x => x.FieldCriteria).ColumnPrefix("PivotTable");
        Map(x => x.Width);
    }
} 
```

还有其他类继承自 BasePivotField，但为简洁起见，我将它们省略了。

问题是当我使用 NHibernate 从数据库加载 PivotTableControls 时，不会加载 PivotTableFields 集合。抛出的异常说“创建代理实例失败”。深入研究异常，我可以看到 PivotTableFields 说“非法访问加载集合”。我可以确认会话没有关闭。如果我不使用延迟加载，问题仍然存在。

我在其他地方使用过类似的模型和映射，它们工作正常。我在这里做错了什么？任何线索将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:33:02.217

我不确定它是否能解决问题，但无论如何您需要在 PivotColumnFieldMap 中添加 DiscriminatorValue(x => x.FieldType )

# grails - 控制器返回 404 错误，即使其返回结果

> ID：12274567
> 
> 赞同：2
> 
> 时间：2012-09-05T04:40:05.860
> 
> 标签：grails

我的 URLMappings 中有以下映射

```
addPurchase:"/addPurchase" {
            controller = "cart"
            action = "addPurchase"
        } 
```

我从我的 GSP 进行 AJAX 调用

```
function addPurchase(purchaseJSON, amount) {
            $.ajax({
                url: 'addPurchase',
                data: {
                    purchase: purchaseJSON
//                    quantity: amount
                },
                type : "POST",
                complete:function(data) {
                    updateCart();
                    updateOrderSummary(data);
                }
            });
        } 
```

我的控制器代码是

```
def addPurchase = {

      def result = cartService.addPurchase(session,params)

      log.debug"Results from addPurchase" + result
      response.status = 200
      return result as JSON

    } 
```

尽管我在控制台中看到了输出，但我的浏览器中出现了错误 404。为什么会这样？我的 grails 版本是@1.3.7

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-05T06:46:32.000

您实际上是在返回结果，而所需的响应是“text/html”或“text/json”

因此，在您的控制器中，您应该`render`得到结果而不是`return`ing 它；像 ：

```
def addPurchase = {
    def result = cartService.addPurchase(session,params)
    log.debug"Results from addPurchase" + result
    response.status = 200
    render result as JSON
} 
```

# java - SimpleDateFormat 问题

> ID：12274570
> 
> 赞同：0
> 
> 时间：2012-09-05T04:41:06.873
> 
> 标签：java, date-formatting

我在下面有这段代码，我没有得到正确的日期例如一个日期是 01/01/2013 12:35 但 format.parse 只返回 dd/mm/yyyy 并且不包括 hh:mm

这是一个示例日期时间 03/09/2012 15:26，输出产生 1346649960000

```
SimpleDateFormat format = new SimpleDateFormat("dd/MM/yyyy hh:mm");
long data = format.parse(childNode.getTextContent()).getTime(); 
```

关于为什么这会奇怪地格式化时间的任何线索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T04:48:37.677

我认为它给出了有效的输出。getTime() 返回自 1970 年 1 月 1 日 00:00:00 以来的毫秒数。所以最后 3 个零是毫秒

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T04:49:04.260

我在您的代码中看到 2 个问题：

1.  如果解析 24 小时格式的时间，则必须使用 HH 而不是 hh。
2.  您可能需要指定用于解析的时区，您所在时区的 15:26 发生在另一个时区的不同时间。

请在下面查看我建议的修复：

```
SimpleDateFormat format = new SimpleDateFormat("dd/MM/yyyy HH:mm");
format.setTimeZone(TimeZone.getTimeZone("UTC")); 
```

# iphone - 无法使用线程在 NSMutableArray 中搜索

> ID：12274575
> 
> 赞同：0
> 
> 时间：2012-09-05T04:41:45.780
> 
> 标签：iphone, objective-c, ios5, ios4

我在一个`NSArray`. 我必须在里面搜索`NSArray`。目前我将其拆分`NSArray`并在单独的线程中搜索它们，否则需要很长时间。我可以搜索数据，但不能将其与另一个`NSArray`.

例如，如果我搜索“a”，我会在所有线程中得到所有带有“a”的结果。但是这些线程结果不能合并为一个`NSArray`.

我使用的代码如下

```
NSArray *subArray = [mArrayOrginalData subarrayWithRange:range]; 
                SearchOperation *anOperation = [[SearchOperation alloc]init];
                [anOperation setSearchData:[subArray mutableCopy]];
                [anOperation setPattern:txtFieldPattern.text];
                [anOperation setTarget:self];
                [anOperation setAction:@selector(searchResultHandler:)];
                [searchQueue addOperation:anOperation]; 
```

检索数据的代码是另一个类（NSOperation），代码如下所示

```
@implementation SearchOperation

- (void) main{

    NSLog(@"%s",__PRETTY_FUNCTION__);

    NSMutableArray* mArrayTmp = [Search searchByPattern:self.pattern inputArray:searchData];
    NSLog(@"Sub result count : %d",[mArrayTmp count]);
    [target performSelector:action withObject:mArrayTmp];
}

@@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T05:07:26.747

我假设搜索逻辑处理足够密集（即使针对您的 NSArray 的单个元素）以保证拥有许多线程。

您描述的解决方案将起作用，但在您的目标中，您需要有一个同步的 NSMutableArray 来接收匹配的记录。根据匹配率，同步可能会成为瓶颈。

如果您还没有这样做，请通过 NSOperationQueue 运行这些 NSOperations，以便从 GCD 中受益。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T05:15:59.700

据我所知，您的代码看起来不错。你的观察目标会有这样的东西......

```
- (void) searcherDidFindMatch: (id) match {
    [self lazyInitMatchesArray]; // init your NSMutableArray lazily here
    @synchronized(_matchesArray) {
        [_matchesArray addObject: match];
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T05:57:04.703

听起来令人怀疑，您有一个搜索功能，其中将数组拆分为子数组并在线程中搜索是性能上的胜利。听起来可能需要重新审视您的数据模型。

But, OK, it can happen. In that case, I'd split the array into N parts and enqueue the search-each-N into a concurrent queue, using a semaphore or like to limit the # of simultaneous searches occurring. I would collect the results into N arrays and then, if necessary, summate them into a single array using `NSMutableArray`'s `addObjectsFromArray:` (which is pretty darned fast).

# iphone - IOS嵌套表：射出并减速

> ID：12274578
> 
> 赞同：0
> 
> 时间：2012-09-05T04:41:54.797
> 
> 标签：iphone, objective-c, ios, nested-table

任何人都知道如何创建一个嵌套表视图，其中嵌套表在 iOS 中被点击时“射出并减速”？（目标 c）

我正在考虑类似于此的动画：[http](http://dl.dropbox.com/u/48118200/motion/transition.html) ://dl.dropbox.com/u/48118200/motion/transition.html 然而，与此不同的是，我从“下方”扩展的音符的高度尺寸比我必须覆盖它的说明。下图说明了这个概念：

![http://imgur.com/YRovn](../Images/ccb5b279bddd4c7ab5f60afa0386181b.png)

我已经尝试了一些 UITableViews，但到目前为止还没有得到我想要的效果。

谢谢您的帮助。

埃德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T06:13:59.987

如果您真的希望表格单元格在它们展开时相互滑动，就像在您与 Flash 动画的第一个链接中发生的那样（单击顶部单元格），那么想到的一个想法是让视图下方弹出out all确实生活在同一个单元格中，为单元格本身的高度变化设置动画，同时以不同的速率将底部视图设置为不同位置的位置。

此外，您还想指定 EaseOut 的动画样式，这将在您寻找的最后实现减速。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T06:41:38.423

展开/折叠 TableView 可以解决您的问题。所以请参考苹果图书馆的以下链接

[http://developer.apple.com/library/ios/#samplecode/TableViewUpdates/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/TableViewUpdates/Introduction/Intro.html)

# c# - 无需第三方工具即可在 C# 或 VB 中将 PDF 转换为 Word

> ID：12274584
> 
> 赞同：-1
> 
> 时间：2012-09-05T04:42:47.107
> 
> 标签：c#, vb.net

> **可能重复：**
> [c# - 以编程方式将 pdf 转换为 word](https://stackoverflow.com/questions/2083387/c-sharp-pdf-to-word-programmatically)
> [如何以编程方式将 Word 文件转换为 PDF？](https://stackoverflow.com/questions/607669/how-do-i-convert-word-files-to-pdf-programmatically)

我想在 C# 或 VB 中将 PDF 转换为 Word。我怎样才能转换？ItextSharp 对这个目的有帮助吗？或任何其他方式来找出解决方案。

> 我不想使用第三方工具

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T04:45:22.017

有很多第三部分库可以做到这一点，其中之一是 ItextSharp 但您可以使用其他工具，如[Aspose](http://www.aspose.com/)或使用已安装的插件，如以下示例：[如何以编程方式将 Word 文件转换为 PDF？](https://stackoverflow.com/questions/607669/how-do-i-convert-word-files-to-pdf-programmatically)

# android - “last_insert_id”不是可识别的函数名

> ID：12274585
> 
> 赞同：4
> 
> 时间：2012-09-05T04:42:48.487
> 
> 标签：android, spring, hibernate

我收到此错误：

> `last_insert_id`不是可识别的函数名称。

当我尝试将数据发送到服务器以保存在 SqlServer 2008 数据库中时。它工作正常，但突然我遇到了这个问题。

这是完整的异常跟踪：

```
12:38:48,867  WARN JDBCExceptionReporter:77 - SQL Error: 195, SQLState: 42000
12:38:48,867 ERROR JDBCExceptionReporter:78 - 'last_insert_id' is not a recognized built-in function name.
12:38:48,867  WARN JDBCExceptionReporter:54 - SQL Warning: 195, SQLState: 42000
12:38:48,883  WARN JDBCExceptionReporter:55 - Preparing the statement failed: 'last_insert_id' is not a recognized built-in function name.
12:38:48,883 ERROR SaveOrderAction:91 - Services level, can't save order - Order: (id=0, visitorId=2, status=A, customerId=528/nOrderDetail:(id=0, orderId=0, productId=124, amount=2)/n)
com.kaizen.gate.service.ServiseException: Services level, can't save order - Order: (id=0, visitorId=2, status=A, customerId=528/nOrderDetail:(id=0, orderId=0, productId=124, amount=2)/n)
    at com.kaizen.gate.service.impl.OrderServiceImpl.save(OrderServiceImpl.java:27)
    at com.kaizen.gate.http.action.SaveOrderAction.doSpecificAction(SaveOrderAction.java:82)
    at com.kaizen.gate.http.action.Action.execute(Action.java:39)
    at com.kaizen.gate.http.ActionServlet.doPost(ActionServlet.java:29)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at com.kaizen.gate.http.LoginFilter.doFilter(LoginFilter.java:40)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at com.kaizen.gate.http.UrlFilter.doFilter(UrlFilter.java:37)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:619)
Caused by: org.springframework.dao.InvalidDataAccessResourceUsageException: could not retrieve generated id after insert: [com.kaizen.gate.model.Order]; SQL [insert into MobileOrder (created, visitor_id, status, customer_id) values (?, ?, ?, ?)]; nested exception is org.hibernate.exception.SQLGrammarException: could not retrieve generated id after insert: [com.kaizen.gate.model.Order]
    at org.springframework.orm.hibernate3.SessionFactoryUtils.convertHibernateAccessException(SessionFactoryUtils.java:629)
    at org.springframework.orm.hibernate3.HibernateAccessor.convertHibernateAccessException(HibernateAccessor.java:412)
    at org.springframework.orm.hibernate3.HibernateTemplate.doExecute(HibernateTemplate.java:411)
    at org.springframework.orm.hibernate3.HibernateTemplate.execute(HibernateTemplate.java:339)
    at com.kaizen.gate.dao.impl.OrderDaoImpl.save(OrderDaoImpl.java:15)
    at com.kaizen.gate.service.impl.OrderServiceImpl.save(OrderServiceImpl.java:24)
    ... 27 more
Caused by: org.hibernate.exception.SQLGrammarException: could not retrieve generated id after insert: [com.kaizen.gate.model.Order]
    at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:67)
    at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:43)
    at org.hibernate.id.insert.AbstractSelectingDelegate.performInsert(AbstractSelectingDelegate.java:69)
    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2163)
    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2643)
    at org.hibernate.action.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:51)
    at org.hibernate.engine.ActionQueue.execute(ActionQueue.java:279)
    at org.hibernate.event.def.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:298)
    at org.hibernate.event.def.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:181)
    at org.hibernate.event.def.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:107)
    at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.saveWithGeneratedOrRequestedId(DefaultSaveOrUpdateEventListener.java:187)
    at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.entityIsTransient(DefaultSaveOrUpdateEventListener.java:172)
    at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.performSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:94)
    at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:70)
    at org.hibernate.impl.SessionImpl.fireSaveOrUpdate(SessionImpl.java:507)
    at org.hibernate.impl.SessionImpl.saveOrUpdate(SessionImpl.java:499)
    at org.hibernate.impl.SessionImpl.saveOrUpdate(SessionImpl.java:495)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.orm.hibernate3.HibernateTemplate$CloseSuppressingInvocationHandler.invoke(HibernateTemplate.java:1282)
    at $Proxy4.saveOrUpdate(Unknown Source)
    at com.kaizen.gate.dao.impl.OrderDaoImpl$1.doInHibernate(OrderDaoImpl.java:19)
    at com.kaizen.gate.dao.impl.OrderDaoImpl$1.doInHibernate(OrderDaoImpl.java:15)
    at org.springframework.orm.hibernate3.HibernateTemplate.doExecute(HibernateTemplate.java:406)
    ... 30 more
Caused by: java.sql.SQLException: 'last_insert_id' is not a recognized built-in function name.
    at net.sourceforge.jtds.jdbc.SQLDiagnostic.addDiagnostic(SQLDiagnostic.java:368)
    at net.sourceforge.jtds.jdbc.TdsCore.tdsErrorToken(TdsCore.java:2820)
    at net.sourceforge.jtds.jdbc.TdsCore.nextToken(TdsCore.java:2258)
    at net.sourceforge.jtds.jdbc.TdsCore.getMoreResults(TdsCore.java:632)
    at net.sourceforge.jtds.jdbc.JtdsStatement.executeSQLQuery(JtdsStatement.java:477)
    at net.sourceforge.jtds.jdbc.JtdsPreparedStatement.executeQuery(JtdsPreparedStatement.java:778)
    at org.apache.commons.dbcp.DelegatingPreparedStatement.executeQuery(DelegatingPreparedStatement.java:96)
    at org.apache.commons.dbcp.DelegatingPreparedStatement.executeQuery(DelegatingPreparedStatement.java:96)
    at org.hibernate.id.insert.AbstractSelectingDelegate.performInsert(AbstractSelectingDelegate.java:55)
    ... 53 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T05:00:09.850

执行`select @@identity`以获取 sql server 中的最新值。这是[文档](http://msdn.microsoft.com/en-us/library/aa933167%28v=sql.80%29.aspx)

> @@IDENTITY、SCOPE_IDENTITY 和 IDENT_CURRENT 是相似的函数，因为它们返回插入到表的 IDENTITY 列中的最后一个值。
> 
> @@IDENTITY 和 SCOPE_IDENTITY 将返回当前会话中任何表中生成的最后一个标识值。但是，SCOPE_IDENTITY 只返回当前范围内的值；@@IDENTITY 不限于特定范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T06:21:20.720

如果你想要最后插入的记录的 ID，你可以在你的 DAOImplementation 中使用：

```
sessionFactory.getCurrentSession().persist(result); // result is object to save
sessionFactory.getCurrentSession().flush();
return result.getId(); //getter method from result object to get inserted records ID 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T19:28:23.433

我也收到了这个错误；我正在使用我的应用程序运行两个环境，一个使用 SQL Server，另一个使用 MySQL，结果我在切换环境时忘记切换方言，这就是导致我的错误的原因。看起来您的数据库方言设置不正确。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-22T11:21:15.650

要从表中获取最后插入的 Id，您可以使用 SQL Server 中给定函数 @@IDENTITY、SCOPE_IDENTITY()、IDENT_CURRENT 中的一个。

要使用 bettor 功能，请检查给定的 URL

[http://www.freshcodehub.com/Article/51/difference-between-identity-scopeidentity-identcurrent-in-sql-server](http://www.freshcodehub.com/Article/51/difference-between-identity-scopeidentity-identcurrent-in-sql-server)

# visual-studio-2010 - OpenCV Visual Studio 视频 I/O 不起作用

> ID：12274589
> 
> 赞同：1
> 
> 时间：2012-09-05T04:43:12.083
> 
> 标签：visual-studio-2010, video, opencv

介绍：

嗨，每当我尝试从文件或相机中检索一些视频输入时，我都会遇到问题。

我正在学习书中给出的教程：“使用 openCV 库学习 OpenCV 计算机视觉”。我可以获得使用相机输入或视频文件输入工作的示例。这些例子是 2-2 和 2-9。

* * *

代码：

*   我用于示例 2-2（视频输入）的代码是：

    ```
    #include "stdafx.h"
    #include "highgui.h"
    #include <cv.h>

    int main( int argc, char** argv ) {
    cvNamedWindow( "Example2", CV_WINDOW_AUTOSIZE );
    CvCapture* capture = cvCreateFileCapture( "C:\\Users\\$catia video tutorial 3.avi" );
    IplImage* frame;

    while(1) {
        frame = cvQueryFrame( capture );
        if( !frame ) break;
        cvShowImage( "Example2", frame );
        char c = cvWaitKey(33);
        if( c == 27 ) break;
    }
    cvReleaseCapture( &capture );
    cvDestroyWindow( "Example2" );
    } 
    ```

*   我用于示例 2-9（相​​机输入）的代码是：

    ```
     #include "stdafx.h"
       #include <highgui.h>
       #include <cv.h>

        int _tmain(int argc, _TCHAR* argv[])
    {
        CvCapture* capture = cvCreateCameraCapture(-1);
        IplImage* frame;

    while(1) {
        frame = cvQueryFrame( capture );
        //if( !frame ) break;
        cvShowImage( "Example2", frame );
        char c = cvWaitKey(33);
    if( c == 27 ) break;
    }
    cvReleaseCapture( &capture );
    cvDestroyWindow( "Example2" );
    return 0;
    } 
    ```

* * *

条件：

我同时为这两个示例寻求帮助的原因是因为我认为两者的问题是相同的！这两个都是简短的例子。

*   我在装有 Visual Studio 2010 的 Windows 7 x64 机器上使用 OpenCV 2.2

*   我已在我的项目属性中添加了所有 Opencv 库并正确包含文件。

*   我的相机确实可以与其他程序一起正常工作。

*   图像输入工作正常。这是视频没有。

* * *

输出：

*   示例 2-2 在调用“cvCreateFileCapture”函数后立即给我一个“访问冲突异常”。
*   示例 2-9 显示了一个弹出窗口，要求我选择一个视频设备。我显然选择了唯一的选择，那就是我的笔记本电脑附带的 bisonCam。然后它打开一个空窗口，什么也不做。
*   在示例 2-9 中，摄像头 LED 亮起。

* * *

所以...：

如果有人知道我错过了什么，我会非常感谢你的建议！！:D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T05:53:18.837

尝试在不带美元符号 ($) 的情况下命名您的文件。这可能导致示例 2-2 出现问题（代码本身看起来不错）。

# python - 从python将数据本地文件加载到mysql

> ID：12274593
> 
> 赞同：0
> 
> 时间：2012-09-05T04:43:39.993
> 
> 标签：python, mysql, mysql-python

我正在尝试使用

```
load data local infile '<filename>' into table <tablename> 
```

命令，但它给出了错误 1148。我知道这是由于一些安全问题，我必须启用 local-infile 选项才能执行此命令。

但由于我试图通过 python 执行此操作，我不确定如何启用此选项。

附加信息：我正在为 python 使用 mysqldb 导入

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T00:16:35.860

经过一番谷歌搜索后想通了。

几个答案指向我可以编辑的事实

```
/etc/mysql/my.cnf 
```

并在文件中添加 local-infile=0

但有时（不知道为什么）python 不会从文件中获取设置。

您可以传递参数：

```
read_default_file="/etc/mysql/my.cnf" 
```

在创建与数据库的连接时，如下

```
conn = MySQLdb.connect(host='localhost',user='root',passwd='passwd',db='db',charset = "utf8", use_unicode = True,read_default_file="/etc/mysql/my.cnf") 
```

# string - 方案字符串操作和定义过程

> ID：12274594
> 
> 赞同：0
> 
> 时间：2012-09-05T04:43:47.950
> 
> 标签：string, casting, scheme, substring

我需要帮助解决这个问题，因为我不知道如何解决这个问题

定义一个过程 pick ，它接受一个非空字符串 s 和一个非负整数 i，并返回一个长度为 1 的子字符串，该子字符串由 s 中索引 i 处的字符组成。假设 i 是字符串 s 的合法索引。

〜（选择“猫”0）

“C”

〜（选择“猫”1）

“一个”

〜（选择“猫”2）

“t”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T04:56:14.273

试试这个，使用标准方案过程很简单：

```
(define (pick str idx)
  (string (string-ref str idx))) 
```

它是这样工作的：`string-ref`从给定索引处的字符串中返回一个字符，然后该`string`过程将字符转换为长度为 1 的字符串。

没有真正需要使用该`substring`过程（因为我们只需要一个字符），但这也是一个有效的替代方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T12:29:38.533

一种解决方案是使用[`substring`](http://docs.racket-lang.org/reference/strings.html?q=sub-string#%28def._%28%28quote._~23~25kernel%29._substring%29%29).

```
> (substring "Scheme" 1 3)
"ch" 
```

此处“方案”一词的字母被编号。

*   字母 S 的索引为 0。
*   字母 c 的索引为 1。
*   字母 h 的索引为 2。
*   字母 e 的索引为 3。
*   字母 m 的索引为 4。
*   字母 e 的索引为 5。

该表达式`(substring "Scheme" 1 3)`创建一个新字符串，其中的字母编号从 1 到 2。索引 3 是不在新字符串中的第一个索引。

由于您只想选择一个字符，请尝试以下操作：

```
> (substring "Scheme" 1 2)
"c"
> (substring "Scheme" 2 3)
"h" 
```

现在您可以定义自己的函数：

```
(define (pick a-string i)
    (substring a-string ??? ???)) 
```

应该怎么办？？？是？

# oracle - ORA-12805:parallel query server died unexpectedly

> ID：12274596
> 
> 赞同：2
> 
> 时间：2012-09-05T04:43:50.157
> 
> 标签：oracle, plsql, cursor

I have a PL/SQL script like this...

```
DECLARE
      CURSOR curs_delete
      IS      
         SELECT cus_num
          FROM dob.cust_table GROUP BY cust_num HAVING COUNT(*)>1;                
      TYPE row_cust_num IS TABLE OF dob.cust_table.cust_num%TYPE;      
      col_cust_num row_cust_num;
   BEGIN
      OPEN curs_delete;
      LOOP
         FETCH curs_delete
         BULK COLLECT INTO col_cust_num LIMIT 10000;
         EXIT WHEN col_cust_num.EXISTS (1) = FALSE;
         FORALL i IN 1 .. col_cust_num.LAST
            DELETE FROM cust_table 
             WHERE cust_num = col_cust_num (i);
             COMMIT;
      END LOOP;
      CLOSE curs_delete;
END; 
```

This query returns `ORA-12805:parallel query server died unexpectedly` error. I'm not sure why it is happening. The select query in cursor returned around 415 records when i got this error.

Anyone understand why this error comes up?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T10:01:22.293

This is a problem for your DBA to resolve, as there are a large number of possible causes. Somebody needs to look in the Alert Log and check for trace files in the `bdump` directory for diagnostic info.

In the meantime, if you have only 415 records to delete you should just use straight SQL:

```
DELETE FROM cust_table
WHERE cust_num in (SELECT cus_num           
                   FROM dob.cust_table 
                   GROUP BY cust_num HAVING COUNT(*)>1); 
```

# php - 如何让存储在服务器上的图像在浏览器中正确查看？

> ID：12274598
> 
> 赞同：1
> 
> 时间：2012-09-05T04:44:14.657
> 
> 标签：php, mysql, image, filepath

到目前为止，我可以将图像上传到文件夹并将名称保存在数据库中。我想要做的是能够在浏览器中查看每个图像，并在其旁边或下方使用相应的名称。但我所拥有的是错误的图像分配了错误的名称。我浏览器中的第一张图片在数据库中的记录中被分配了接下来的两个名称。我究竟做错了什么？请我需要帮助。

这是我的代码：

**添加页面：-**

```
 <table width="760" border="0" align="center" cellpadding="0" cellspacing="0">
      <tr>
        <td height="100" align="center" bgcolor="#CC0000" class="header_title">Facilitators Panel
          <table width="600" height="30" border="0" cellspacing="0" cellpadding="0">
            <tr>
              <td width="448" class="header_title" height="20"></td>
              <td width="92" class="text2"><a href="cpanel.php?user=<?php echo $row_rsadmin['aID']; ?>">Control Panel</a></td>
              <td width="60" class="text2">Logout</td>
            </tr>
          </table></td>
      </tr>
      <tr>
        <td height="300" valign="top" bgcolor="#666666" class="text2"><table width="640" border="0" cellspacing="0" cellpadding="0">
          <tr>
            <td>&nbsp;</td>
          </tr>
          <tr>
            <td class="text2"><a href="adfacilitators.php?user=<?php echo $row_rsadmin['aID']; ?>">Back</a></td>
          </tr>
          <tr>
            <td class="text2">&nbsp;</td>
          </tr>
        </table>
          <table width="640" border="0" align="center" cellpadding="0" cellspacing="0">
          <tr>
            <td width="640" height="40" colspan="4" align="center"><form action="fac.php" method="post" enctype="multipart/form-data" name="fac" id="fac">
      <table width="580" border="0" cellpadding="0" cellspacing="0">
        <tr>
          <td height="1" align="right">&nbsp;</td>
        </tr>
        <tr>
          <td width="132" align="right" class="text3">Name:</td>
          <td width="10" rowspan="4">&nbsp;</td>
          <td colspan="2"><label>
            <input name="name" type="text" class="textbox" id="name" />
          </label></td>
        </tr>
        <tr>
          <td height="45" align="right"><p class="text3">Photo:</p></td>
          <td width="272" height="45"><input type="hidden" name="MAX_FILE_SIZE" value="256000" />
            <input name="photo" type="file" id="photo" size="26" /></td>
          <td width="166">&nbsp;</td>
        </tr>
        <tr>
          <td height="1" align="right">&nbsp;</td>
        </tr>
        <tr>
          <td height="40" align="right">&nbsp;</td>
          <td colspan="2" valign="top"><label>
            <input name="button" type="submit" class="readmore" id="button" value="Submit" />
          </label>
            <input name="button2" type="reset" class="readmore" id="button2" value="Reset" /></td>
        </tr>
      </table>
    </form></td>
          </tr>
          <tr>
            <td height="10" colspan="4" align="center"></td>
          </tr>
          </table></p></td></tr>
    </table> 
```

**处理页面：-**

```
 <?php require("../Connections/connMain.php"); ?>
    <?php

                // validation... since this is an image upload script we should run a check   
                // to make sure the uploaded file is in fact an image. Here is a simple check: 
                // getimagesize() returns false if the file tested is not an image. 
                if ($image = @getimagesize($_FILES['photo']['tmp_name'])&& ($_FILES["photo"]["size"]<= 2560000))
                {}
                else
                {
                    header("Location:error1.php");

                exit;
                }

       //This gets all the other information from the form 
      $name = htmlspecialchars($_POST['name']);
      $pix= ($_FILES['photo']['name']);
      $tmpName = $_FILES['photo']['tmp_name']; 

     //Writes the information to the database 
     mysql_query("INSERT INTO facilitators (photo, name) VALUES ('$pix', '$name')"); 

     //This is the directory where images will be saved 
     // Make sure the file was sent without errors
     //if($_FILES['photo']['error'] == 0) {
     $target = "../facilitators/";

     $target = $target  . basename( $_FILES['photo']['name']); 

     //Writes the photo to the server 
     if(move_uploaded_file($tmpName, $target)) 
     { 

     header("Location:adfacilitators.php");

     }
     else { 

     header("Location:error2.php");

     }
    ?> 
```

**输出页面：**

```
<div id="wrapper2">
    <div id="headercont"><?php require_once('header.html'); ?></div>
    <div id="bannercont"><?php require_once('banner.html'); ?></div>
    <div id="mainbody">
      <div id="sidelink"><?php require_once('sidelink.html'); ?></div>
        <div id="mainbodyr">
          <div class="clear_4"></div>
          <div id="subheadertext">Facilitators</div>
          <div class="clear_4"></div>
          <div id="mainbodycontentcont">
            <?php do { ?>
            <table width="520" border="0" cellspacing="0" cellpadding="0">
              <tr>
                <td width="150"><div id="mainbodypiccont">
                  <? $info = mysql_fetch_array( $rsFacilitator ); echo "<img src=http://localhost/youngatart/facilitators/".$info['photo'] ." width='150'>" ?>
                </div></td>
                <td width="370"><div id="mainbodytextcont">
                  <div id="text1"><?php echo $row_rsFacilitator['name']; ?></div>
                </div></td>
              </tr>
              <tr>
                <td height="20" colspan="2"></td>
              </tr>
            </table>
              <?php } while ($row_rsFacilitator = mysql_fetch_assoc($rsFacilitator)); ?>
          </div>
        </div>
        <div class="clear_5"></div>
    </div>
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T05:07:48.277

检查一下，我已经稍微更改了您的代码，

```
<div id="mainbodycontentcont">
            <?php while ($row_rsFacilitator = mysql_fetch_assoc($rsFacilitator) { ?>
            <table width="520" border="0" cellspacing="0" cellpadding="0">
              <tr>
                <td width="150"><div id="mainbodypiccont">
                  <? echo "<img src=http://localhost/youngatart/facilitators/".$row_rsFacilitator['photo'] ." width='150'>" ?>
                </div></td>
                <td width="370"><div id="mainbodytextcont">
                  <div id="text1"><?php echo $row_rsFacilitator['name']; ?></div>
                </div></td>
              </tr>
              <tr>
                <td height="20" colspan="2"></td>
              </tr>
            </table>
              <?php }?>
          </div> 
```

***编辑*** 我并不完全理解你的问题，但如果你想从图像中编辑你的数据，请点击给`<a>`图像添加标签。

```
<div id="mainbodycontentcont">
                <?php while ($row_rsFacilitator = mysql_fetch_assoc($rsFacilitator)) { ?>
                <table width="520" border="0" cellspacing="0" cellpadding="0">
                  <tr>
                    <td width="150"><div id="mainbodypiccont">
                      <? echo "<a href='yourfilename.php?imageid=1'><img src=http://localhost/youngatart/facilitators/".$row_rsFacilitator['photo'] ." width='150'></a>" ?>
                    </div></td>
                    <td width="370"><div id="mainbodytextcont">
                      <div id="text1"><a href='yourfilename.php?imageid=1'><?php echo $row_rsFacilitator['name']; ?></a></div>
                    </div></td>
                  </tr>
                  <tr>
                    <td height="20" colspan="2"></td>
                  </tr>
                </table>
                  <?php }?>
              </div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T04:55:05.640

很好看你的代码，你先插入了记录，然后你上传了文件。试着反过来做。首先上传文件。如果成功，将图片名称分配给变量`$pix`然后在数据库中插入东西。如果文件在目录中成功上传，则检查文件夹中是否存在。尝试将此文件的名称与刚插入数据库中的文件匹配。

此外，一点注意事项：

*   避免使用不推荐使用`mysql_`的函数，使用`mysqli_`或 PDO。
*   使用参数化查询。

# python - 如何向网络公开 Django/Python 应用程序？

> ID：12274600
> 
> 赞同：3
> 
> 时间：2012-09-05T04:44:24.763
> 
> 标签：python, django, web

我开发了一个简单的 Django/Python 投票应用程序（遵循 Django 官方文档中的分步教程）。我使用内置服务器来测试应用程序。现在，我想在网络上托管我的应用程序。我听说 WSGI 是向网络公开 Python/Django 应用程序的最佳方式？将 Python/Django 代码公开到网络中的最佳方式是什么？谢谢

PS：我已经有一个域名和一个来自 justhost.com 的共享虚拟主机。当我与他们的支持聊天时，他们告诉我他们支持 WSGI。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T04:58:52.343

我会去[Heroku](http://heroku.com)。他们有一个免费的使用配额和一个非常好的部署机制。这是一篇描述如何使用它的好文章：[https ://devcenter.heroku.com/articles/django](https://devcenter.heroku.com/articles/django)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T04:47:31.140

最简单的方法是找到一个在线主机（例如 pythonanywhere.com），按照他们的说明在其中托管您的应用程序，您的应用程序将在线。他们处理在服务器上搭载 django 项目的大部分问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-05T04:51:44.887

你需要一个像 Apache 或 NGINX 这样的 HTTP 服务器程序来服务你的 http 请求。将有一个像 fastCGI 或更好的 WSGI 这样的模块来与你的 python 脚本/环境交互。这些 HTTP 服务器程序和数据库将位于您可以租用的 Web 主机上，该主机还提供静态 IP 和域名解析。对于 Django，我强烈推荐[WebFaction](http://www.webfaction.com/)，他们支持它并且有很好的[文档](http://docs.webfaction.com/software/django/getting-started.html)。如果您不想使用您的虚拟主机提供的示例子域，您可能还需要通过注册商注册一个域名。

**更新：**对于 justhost，请参阅此相关[问题](https://stackoverflow.com/a/3970821/1086804)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-05T05:01:57.223

文档中的[部署](https://docs.djangoproject.com/en/1.4/howto/deployment/)方式列出了部署 django 支持的方式。

# c - 设计 if-else 语句 关于语法的几个问题

> ID：12274601
> 
> 赞同：0
> 
> 时间：2012-09-05T04:44:43.640
> 
> 标签：c

我在 c89 模式下使用 gcc 4.7.0。

我有这个 if-else 语句并且有 2 个问题。

1.  我只是想知道我应该先测试 FALSE 还是 TRUE 条件。什么通常更好。我知道这没有太大区别，但我只是想知道其他工程师是做什么的？在下面的示例中，我首先检查 FALSE。

2.  我总是喜欢做一些防御性编程。因此，如果我可以明确检查每个条件，我总是会这样做。例如，而不是做 if() - else。我会做 if() - else if()。在下面的示例中，条件可以是 TRUE 或 FALSE。但是，我总是喜欢检查 else 条件以确保它为 TRUE。这有什么实际意义吗？

非常感谢您的任何建议。

```
if(event->status == FALSE) {
    g_release_call_test(module, channel_id);
}
else if(event->status == TRUE) {
    if(UNIT_TEST & KARAOKE) {
        if(g_record_karaoke(module, channel_id) == FALSE) {
            g_release_call_test(module, channel_id);
        }
    }
    else if(UNIT_TEST & RECORD) {
        if(g_record_file_test(module, channel_id) == FALSE) {
            g_release_call_test(module, channel_id);
        }
    }
    else if(UNIT_TEST & GET_DIGITS) {
        if(g_collect_digits_test(module, channel_id) == FALSE) {
            g_release_call_test(module, channel_id);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T05:10:39.567

1.  我只是想知道我应该先测试 FALSE 还是 TRUE 条件。什么通常更好。我知道这没有太大区别，但我只是想知道其他工程师是做什么的？在下面的示例中，我首先检查 FALSE。

    对您的条件进行分析。如果您有一些数据显示 20% 的情况为 False，80% 的情况为 true，请将 true 分支放在第一个分支。在某些情况下，这可能有助于提高性能。

2.  我总是喜欢做一些防御性编程。因此，如果我可以明确检查每个条件，我总是会这样做。例如，而不是做 if() - else。我会做 if() - else if()。在下面的示例中，条件可以是 TRUE 或 FALSE。但是，我总是喜欢检查 else 条件以确保它为 TRUE。这有什么实际意义吗？

    除非您担心 event->status 可能会被一些技巧问题损坏，否则在大多数情况下，我认为我们只使用 if (!event->status) else 样式

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T05:00:32.003

***1）我只是想知道我应该先测试 FALSE 还是 TRUE 条件。什么通常更好。我知道这没有太大区别，但我只是想知道其他工程师是做什么的？在下面的示例中，我首先检查 FALSE。***

从语法上讲，它并没有太大的区别，再次明智地编程通常并不重要。但是，对于特定用例，它可能会影响性能。让我们考虑一个例子，如果你正在播放一个媒体文件并且这个条件是检查它是媒体帧还是标题。在这里，您知道标题后面将有 100 个媒体帧，因此您需要检查媒体帧然后是标题。因为检查标头意味着 100 次冗余检查 == 100 条冗余 CPU 指令 [可能更多]。除非您正在编写一般的东西，否则根据您的用例编写代码总是更好。

***2）我总是喜欢做一些防御性编程。因此，如果我可以明确检查每个条件，我总是会这样做。例如，而不是做 if() - else。我会做 if() - else if()。在下面的示例中，条件可以是 TRUE 或 FALSE。但是，我总是喜欢检查 else 条件以确保它为 TRUE。这有什么实际意义吗？***

防御性编程有其优点和缺点。在上述场景中，编译器将为您进行必要的优化。

你可能想看看这里 [http://www.eventhelix.com/realtimemantra/basics/optimizingcandcppcode.htm#](http://www.eventhelix.com/realtimemantra/basics/optimizingcandcppcode.htm#)

干杯..快乐学习

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T05:00:35.710

1）您首先检查哪个条件并不重要，因为编译器会为您优化代码。

2) 如果`status`只能有两个值 ( `TRUE/FALSE`)，那么`else if`对于普通读者来说，有一个似乎有点令人困惑。另一方面，如果`status`可以有其他值，那么第三个 else 部分将与`assert()`. 一般来说，添加断言是一个很好的习惯，可以添加到你的防御工具箱中以捕捉错误的假设。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T05:00:55.227

首先，不要对布尔值执行此操作：

```
if (something == TRUE)
if (something == FALSE) 
```

这些应该是这样的：

```
if (something)
if (!something) 
```

布尔值也应该被智能命名，以便`if`语句自然阅读，例如`if (isFinished)`or `while (stillSomeMoreToGo)`。`status`不是布尔值*的*好名字，除非它是为了表明某物具有状态，即使那样，我也会使用`hasStatus`或类似的东西。

在任何情况下，即使它不等于您的`TRUE`值，C 中的某些东西也可能是真的。`TRUE`必然是*一个*值，而 C 将某些值定义为真，如果它不为零（2 ^(32) -1*不同*的可能值，当然这取决于您的`int`规范）。

明确地测试真假是一个坏主意，因为所做的只是生成*另一个*布尔值，你在哪里停下来？

```
if ((event->status == TRUE) == TRUE) ...
if (((event->status == TRUE) == TRUE) == TRUE) ...
if ((((event->status == TRUE) == TRUE) == TRUE) == TRUE) ...
if (((((event->status == TRUE) == TRUE) == TRUE) == TRUE) == TRUE) ... 
```

* * *

就您的具体问题而言，对于（1），从性能的角度来看，它可能不会产生任何影响。但是，有时它会影响代码的可读性。选择能够为您提供“最漂亮”代码的方法，并让编译器整理出将源代码转换为本机形式的最佳方法。

我优化的*第一*件事是可读性，因为这是防止大多数问题出现的原因。一旦您分析了可读代码并解决了性能问题，您*就*可以考虑改进的方法。

但我会免费给你这个建议：最令人印象深刻的改进通常可以在宏观层面（比如算法选择和数据结构选择）进行，而不是在微观层面（测试真假，倒计时）循环等）。

举一个可读性的例子，我倾向于先做短的（里面的块`if`相对简洁）。我也倾向于先进行早期返回，因为它们通常会减少缩进。换句话说，类似：

```
def fn (x):
    if (x < MIN_X_ALLOWED):
        return -1

    # Now carry on, knowing that x >= MIN_X_ALLOWED. 
```

* * *

对于（2），不，这没有真正意义。您已明确决定需要一个布尔值，并且只有两种可能的情况。你在捍卫不可能。

如果它是一个整数，并且只有值、 、 和`2`被`3`允许`5`，那将是不同的，因为您想要防御（例如）值。`7``11``10`

# c - 在 C 中寻找调试功能

> ID：12274603
> 
> 赞同：2
> 
> 时间：2012-09-05T04:45:06.903
> 
> 标签：c, debugging, memory

我相信我的代码有一些内存错误，因为我的代码“随机”运行，因为几乎每次运行时，大型固定数组中的字符串都被破坏了。（已修复，从某种意义上说它应该始终相同。但是在我初始化它的值时会出现问题。）

我想知道，是否有一个调试器具有使我能够并行运行相同代码并在两次运行之间存在差异时提醒我的功能？

（我在 linux 上工作，我的项目在 C 中，我目前正在使用 GDB 进行调试。我尝试运行 valgrind，但在边缘情况下我有太多内存没有被释放。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T08:58:16.633

一个好的开始是在[valgrind](http://valgrind.org/)下运行您的应用程序并查看它报告的内容。

# python - python 3 的产量生成器中没有 next() 函数

> ID：12274606
> 
> 赞同：88
> 
> 时间：2012-09-05T04:45:21.537
> 
> 标签：python, python-3.x

在[这个问题](https://stackoverflow.com/questions/12262184/how-to-make-a-iterable-object-like-this)中，我有一个使用 Python 生成器的无穷序列。但是相同的代码在 Python 3 中不起作用，因为它似乎没有`next()`功能。该功能的等价物是什么`next`？

```
def updown(n):
    while True:
        for i in range(n):
            yield i
        for i in range(n - 2, 0, -1):
            yield i

uptofive = updown(6)
for i in range(20):
    print(uptofive.next()) 
```

* * *

## 回答 #1

> 赞同：129
> 
> 时间：2012-09-05T04:48:35.250

在 Python 3 中，使用`next(uptofive)`而不是`uptofive.next()`.

内置`next()`函数也适用于 Python 2.6 或更高版本。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2012-09-05T08:39:47.170

在 Python 3 中，为了使语法更加一致，该`next()`方法被重命名为`__next__()`. 你可以用那个。这在[PEP 3114](http://www.python.org/dev/peps/pep-3114/)中进行了解释。

建议遵循 Greg 的解决方案并调用[内置`next()`函数](http://docs.python.org/py3k/library/functions.html#next)（然后尝试查找对象的`__next__()`方法）。

# java - LinkedBlockingQueue 和 ConcurrentLinkedQueue 有什么区别？

> ID：12274608
> 
> 赞同：5
> 
> 时间：2012-09-05T04:45:36.577
> 
> 标签：java, java.util.concurrent, lock-free, concurrent-programming

我已经阅读了博客，但我不确定他的结论是否正确：

[http://www.javacodegeeks.com/2010/09/java-best-practices-queue-battle-and.html#ixzz1seaiSLwp](http://www.javacodegeeks.com/2010/09/java-best-practices-queue-battle-and.html#ixzz1seaiSLwp)

他说：**从提供的性能结果可以看出，LinkedBlockingQueue 实现了最佳组合（添加和删除元素）性能结果，应该是您实施生产者 - 消费者方案的第一选择。**

我想知道，如果我不在我的代码中使用锁定不是更快吗？

那么为什么 LinkedBlockingQueue 比无锁队列（ConcurrentLinkedQueue）快呢？

谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T04:52:56.167

ConcurrentLinkedQueue 不是*阻塞*队列。它没有实现 BlockingQueue 接口，因此不提供阻塞方法 put() 和 take()。这些方法对于生产者/消费者设置是必要的，因为您需要安排消费者在没有任何消费时阻塞，并在消费者没有足够快的消费时让生产者阻塞。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T05:08:05.960

这个基准很奇怪：使用并发队列作为阻塞队列没有意义，或者我错过了什么。我猜这段代码不会拯救地球：

```
while(result == null)
   result = concurrentLinkedQueue.poll(); 
```

当然效率低于：

```
linkedBlockingQueue.take(); 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-09-05T04:52:58.030

LinkedBlockingQueue 是 Deque 而 ConcurrentBlockingQueue 不是。检查 [Javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/LinkedBlockingQueue.html)以获取更多详细信息

# ruby - 用 Ruby 提取人脸信息

> ID：12274610
> 
> 赞同：1
> 
> 时间：2012-09-05T04:45:44.907
> 
> 标签：ruby, face-detection

我正在寻找一个 ruby​​ 库，它可以提取一些信息，如眼睛空间等......

我不想使用远程 API，所以我在[这里](https://github.com/ryanfb/ruby-opencv)找到了一个 opencv 扩展，但唯一可能的事情似乎是检测人脸。

我必须编写自己的库吗？

# internet-explorer - 防止 ActiveX 对象总是出现在前台 (IE)

> ID：12274614
> 
> 赞同：3
> 
> 时间：2012-09-05T04:46:30.720
> 
> 标签：internet-explorer, activexobject

我正在写一个网站来显示 IP 摄像机视频。

我使用下面的代码来支持 IE：

```
<OBJECT ID="RtspVapgCtrl" style="postion: absolute; z-index:1;"  CLASSID="CLSID:45830FF9-D9E6-4f41-86ED-B266933D8E90"
CODEBASE="XXXXX" />
    <PARAM NAME="Url" VALUE="XXXXXXXXX"/>
    <PARAM NAME="wmode" VALUE="opaque"/>
    <PARAM NAME="Stretch" VALUE="true" />
    <PARAM NAME="VSize" VALUE="CMS" />
    <PARAM NAME="Language" VALUE="EN" />
    <PARAM NAME="ClientOptions" VALUE="68" />
    <PARAM NAME="ViewStream" VALUE="0" />
    <PARAM NAME="DisplayErrorMsg" VALUE="false" />
</OBJECT> 
```

我在IE9上调试。

问题是，视频对象总是出现在顶部。但我需要一些 div 。

我一直在寻找答案，发现它已经被问了好几次了。可以通过添加完美解决

```
<PARAM NAME="wmode" VALUE="opaque"/> 
```

到对象和“ wmode="opaque" ”到嵌入标签，然后我们可以在它上面应用z-index。

但我的情况不同，因为我没有使用嵌入标签。我的是一个 RTSP 视频流。只需添加 "PARAM NAME="wmode" VALUE="opaque" " 并设置 z-index 并不能解决问题。

希望有人能解决这个问题。并为我糟糕的英语感到抱歉。

# vb.net - VB.NET UPDATE Method

> ID：12274618
> 
> 赞同：0
> 
> 时间：2012-09-05T04:46:42.597
> 
> 标签：vb.net

Good day everyone. I would like to ask for help regarding my code to update specific record in the database. My back-end is Microsoft Access and front-end is Visual Basic. It gives me an error "No value given for one or more required parameters". Also, I receive a problem about "object reference not set to an instance of an object."

Here's my code. Thank you :)

```
 Private Sub UpdateClient()

    Dim sqlUpdateClient As String = "UPDATE tblClient SET clientCompany = @clientCompany, clientStreetAddress = @clientStreetAddress, clientCity = @clientCity, clientContactPerson = @clientContactPerson, clientContactNumber = @clientContactNumber, clientEmail = @clientEmail, clientMobileNumber = @clientMobileNumber WHERE clientID = " + selectedClient
    Dim recordsAffected As Integer = 0
    Dim accessCommand As New OleDbCommand(sqlUpdateClient, accessConnection)
    accessCommand.CommandText = sqlUpdateClient

    accessCommand.Parameters.AddWithValue("@clientCompany", txtClientCompany.Text)
    accessCommand.Parameters.AddWithValue("@clientStreetAddress", txtClientStreetAddress.Text)
    accessCommand.Parameters.AddWithValue("@clientCity", txtClientCity.Text)
    accessCommand.Parameters.AddWithValue("@clientContactPerson", txtClientContactPerson.Text)
    accessCommand.Parameters.AddWithValue("@clientContactNumber", txtClientPhoneNumber.Text)
    accessCommand.Parameters.AddWithValue("@clientEmail", txtClientEmailAddress.Text)
    accessCommand.Parameters.AddWithValue("@clientMobileNumber", txtClientMobileNumber.Text)

    Try

        accessConnection.Open()
        recordsAffected = accessCommand.ExecuteNonQuery

    Catch ex As Exception

        lblError.Text = ex.ToString

    Finally

        accessConnection.Close()

    End Try

    If recordsAffected = 0 Then
        MsgBox("Record updated failed!", MsgBoxStyle.Exclamation, "Project Analysis System")
    Else
        MsgBox("Record updated successfully!", MsgBoxStyle.Information, "Project Analysis System")
        PopulateClientList()
    End If

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T04:53:14.837

Is `accessConnection` a global (*connection object*) variable? You must have created another instance of that object on that procedure.

One more thing, `clientID` is also be parameterized. then add this line

```
accessCommand.Parameters.AddWithValue("@clientID", selectedClient) 
```

**UPDATE 1**

```
Private Sub UpdateClient()

    Dim recordsAffected As Integer = 0
    Dim sqlUpdateClient As String = "UPDATE tblClient " & _
                                    "SET clientCompany = ?, " & _
                                    "   clientStreetAddress = ?, " & _
                                    "   clientCity = ?, " & _
                                    "   clientContactPerson = ?, " & _
                                    "   clientContactNumber = ?, " & _
                                    "   clientEmail = ?, " & _
                                    "   clientMobileNumber = ? " & _
                                    "WHERE clientID = ?"

    Using accessConnection As New OleDbConnection("connectionStringHere")
        Using accessCommand As New OleDbCommand()
            With accessCommand
                .Connection = accessConnection
                .CommandType = CommandType.Text
                .CommandText = sqlUpdateClient
                .Parameters.AddWithValue("clientCompany", txtClientCompany.Text)
                .Parameters.AddWithValue("clientStreetAddress", txtClientStreetAddress.Text)
                .Parameters.AddWithValue("clientCity", txtClientCity.Text)
                .Parameters.AddWithValue("clientContactPerson", txtClientContactPerson.Text)
                .Parameters.AddWithValue("clientContactNumber", txtClientPhoneNumber.Text)
                .Parameters.AddWithValue("clientEmail", txtClientEmailAddress.Text)
                .Parameters.AddWithValue("clientMobileNumber", txtClientMobileNumber.Text)
                .Parameters.AddWithValue("clientID", selectedClient)
            End With
            Try
                accessConnection.Open()
                recordsAffected = accessCommand.ExecuteNonQuery()
            Catch ex As OleDBException
                lblError.Text = ex.Message.ToString()
            Finally
                accessConnection.Close()
            End Try

            If recordsAffected = 0 Then
                MsgBox("Record updated failed!", MsgBoxStyle.Exclamation, "Project Analysis System")
            Else
                MsgBox("Record updated successfully!", MsgBoxStyle.Information, "Project Analysis System")
                PopulateClientList()
            End If
        End Using
    End Using

End Sub 
```

![enter image description here](../Images/f079f3e9d9009adc70ab621960502c58.png)

# android - 如何在android中以编程方式更新预安装的应用程序

> ID：12274622
> 
> 赞同：1
> 
> 时间：2012-09-05T04:47:10.333
> 
> 标签：android

我正在开发一个应用程序，其中应用程序安装 .apk 文件，该文件在我的本地服务器上可用。如果已安装的本地服务器应用程序有任何更新通知，则需要更新应用程序。我正在使用 GCM 向 android 设备发送更新通知，并从通知中获取**versionCode**并将其与安装的 .apk 版本进行比较。到此为止，一切都是对的。但我坚持如何更新每个安装的本地服务器应用程序，使其设置不会改变。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T05:02:17.723

Android 应用程序是否可以作为您服务器的客户端？如果是这种情况，我不建议您使用服务器端推送来获取更新通知。如果通知未能到达设备（AFAIK，官方文档说，这是正常行为），用户将拥有过时的版本。最好定期/在每次访问服务器时检查新版本，并按照[此处](https://stackoverflow.com/questions/4967669/android-install-apk-programmatically)和[此处](https://stackoverflow.com/questions/4604239/install-application-programmatically-on-android)的说明下载/安装 apk 。您可能还想查看[FDroid 的源代码](https://gitorious.org/f-droid/)，它由服务器端和客户端组件组成，可以获取、下载和安装许多应用程序的更新。

# iphone - 应用程序进入前台时查找当前视图。IOS

> ID：12274627
> 
> 赞同：2
> 
> 时间：2012-09-05T04:47:36.273
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

当应用程序激活时，我们如何找到当前哪个视图是第一响应者。我知道应用程序委托 applicationWillEnterForeground 和 applicationDidBecomeActive 将被调用，我如何使用它来亲密查看哪个是第一响应者。

我用谷歌搜索，堆栈溢出没有找到确切的答案。有什么想法的朋友。。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T05:02:16.170

获取对 iOS 应用程序中最顶层视图/窗口的引用

```
topMostView = [[[[UIApplication sharedApplication] keyWindow] subviews] lastObject]; 
```

请参阅[getting-reference-to-the-top-most-view-window-in-ios-application](https://stackoverflow.com/questions/3843411/getting-reference-to-the-top-most-view-window-in-ios-application)链接。

**当应用程序从后台返回时，编辑**对当前视图执行的启动操作

```
Add BOOL applicationFromBackground; make its property in appDelegate.

Intially it will be applicationFromBackground = FALSE; in application didFinishLaunchingWithOptions method; 
```

现在应用程序进入前台：

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
   applicationFromBackground = TRUE;
} 
```

现在在所有视图控制器的视图中都会出现方法，该方法将为最顶层的视图控制器调用，所以这样做：

```
- (void)viewWillAppear:(BOOL)animated
{
  [super viewWillAppear:animated];
  // Create AppDelegate instance
  AppDelegate *objAppDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
  if(objAppDelegate.applicationFromBackground)
  {
     applicationFromBackground = FALSE;
     //do what u want.
  }

} 
```

# php - 使用 PHP 自动将引用的 LESS 文件编译成 CSS

> ID：12274628
> 
> 赞同：11
> 
> 时间：2012-09-05T04:47:47.820
> 
> 标签：php, css, caching, compiler-construction, less

我希望发生以下事情：

1.  拥有流程自动化的服务器端。

2.  只需能够像在我的代码中引用 CSS 文件一样引用 LESS 文件。

3.  用户返回的是缩小的 CSS 而不是 LESS 文件 - 缓存因此编译器不需要运行，除非 LESS 文件已更新。

4.  为此，它适用于在我的域中任何地方引用的*任何LESS 文件。*

我发现[了 Lessphp](http://leafo.net/lessphp/)，但文档不是很清楚，也没有解释如何动态获取任何 LESS 文件。我想我会发布我是如何让这一切工作的，因为我还没有看到如何使用 PHP 实现这一点。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-05T04:47:47.820

**这假设 LESSPHP v0.3.8+**不确定早期版本，但如果不是直接开箱即用，您将了解它的工作原理。

`<link rel="stylesheet" type="text/css" href="styles/main.less" />`

如果您使用 less.js 编译客户端，请确保更改`rel="stylesheet/less"`为`rel="stylesheet"`

1) Grab [Lessphp](http://leafo.net/lessphp/)我将这些文件放在`/www/compilers/lessphp/`这个演示的上下文中

2）制作一个PHP脚本，我们可以扔掉LESS文件。这将处理缓存、编译为 CSS 并将 CSS 作为响应返回。我已将此文件放在`/www/compilers/`并调用它`lessphp.php`

大部分代码都在 Lessphp 网站上，除了其中有错误，我在最后添加了响应。

```
<?php
require "lessphp/lessc.inc.php";
$file = $_GET["file"];
function autoCompileLess($inputFile, $outputFile) {
    // load the cache
    $cacheFile = $inputFile.".cache";
    if (file_exists($cacheFile)) {
        $cache = unserialize(file_get_contents($cacheFile));
    } else {
        $cache = $inputFile;
    }
    $less = new lessc;
    $less->setFormatter("compressed");
    $newCache = $less->cachedCompile($cache);
    if (!is_array($cache) || $newCache["updated"] > $cache["updated"]) {
        file_put_contents($cacheFile, serialize($newCache));
        file_put_contents($outputFile, $newCache['compiled']);
    }
}
autoCompileLess('../' . $file, '../' . $file . '.css');
header('Content-type: text/css');
readfile('../' . $file . '.css');
?> 
```

这会将LESS 文件（例如，`styles/main.less`）编译为缓存文件和CSS 文件（例如，`styles/main.less.css`）。

3) 添加一条`mod_rewrite`规则，以便将用户请求的任何 LESS 文件重定向到我们的编译器，并为其指定路径。这被放置在根`.htaccess`文件中。

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    RewriteRule ^([^.]*\.less)$ compilers/lessphp.php?file=$1 [R,QSA,L]
</ifModule> 
```

如果您使用的是 WordPress，则需要在其后执行此规则 - 即使 WordPress 在子目录中，它似乎也会覆盖这些规则，并且对于存在于（目录明智）WordPress`.htaccess`规则下方的引用文件，不会发生 LESS 编译。

4) 你的 LESS 代码应该相对于编译器的位置被引用。此外，如果有空属性，Lessphp 编译器将失败，例如。`background-color: ;`

* * *

如果一切正常，应该会出现以下情况：

1.  直接浏览您的 LESS 文件`http://domain.com/styles/main.less`

2.  被自动重定向到`http://domain.com/compilers/lessphp?file=styles/main.less`

3.  呈现缩小的 CSS

4.  `main.less.css`现在`main.less.cache`应该与您的 LESS 文件存在于同一目录中

5.  除非您更新 LESS 文件，否则最后修改日期不应更改

# codeigniter - Codeigniter 将单个图像转换为多个调整大小

> ID：12274630
> 
> 赞同：4
> 
> 时间：2012-09-05T04:47:52.657
> 
> 标签：codeigniter

我是 Codeigniter 的新手。这就是我想要做的：

1.  用户上传个人资料图片。
2.  我将原始图像调整为多种尺寸，例如 400×300、200×200 和 32×32。

但是我上传图片时，它只成功地调整*了一个*尺寸，400×300。

这是我的代码：

```
 $config['image_library']   = 'gd2';
 $config['source_image']    = '/path/to/image/mypic.jpg';
 $config['create_thumb']    = TRUE;
 $config['maintain_ratio']  = TRUE;
 $config['width']           = 400;
 $config['height']          = 300;
 $config['new_image']   = 400x300image;
 $this->load->library('image_lib', $config); 
 $this->image_lib->resize();
 $this->image_lib->clear()

 $config['image_library']   = 'gd2';
 $config['source_image']    = '/path/to/image/mypic.jpg';
 $config['create_thumb']    = TRUE;
 $config['maintain_ratio']  = TRUE;
 $config['width']           = 200;
 $config['height']          = 200;
 $config['new_image']   = 200x200image;
 $this->load->library('image_lib', $config); 
 $this->image_lib->resize();
 $this->image_lib->clear()

 $config['image_library']   = 'gd2';
 $config['source_image']    = '/path/to/image/mypic.jpg';
 $config['create_thumb']    = TRUE;
 $config['maintain_ratio']  = TRUE;
 $config['width']           = 32;
 $config['height']          = 32;
 $config['new_image']   = 32x32image;
 $this->load->library('image_lib', $config); 
 $this->image_lib->resize();
 $this->image_lib->clear(); 
```

我尝试使用不同的配置名称`$config2`，`$config3`但我没有得到输出。

请帮我解决问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T05:06:38.203

I have a similar function built into one of my CI apps. In my case, I needed the config files in another function, so I built separate versions.

Don't load the library multiple times. Once is fine. Just reinitialize the the library with your new config each time.

```
 $this->load->library('image_lib');

 /* First size */
 $configSize1['image_library']   = 'gd2';
 $configSize1['source_image']    = '/path/to/image/mypic.jpg';
 $configSize1['create_thumb']    = TRUE;
 $configSize1['maintain_ratio']  = TRUE;
 $configSize1['width']           = 400;
 $configSize1['height']          = 300;
 $configSize1['new_image']   = '400x300image';

 $this->image_lib->initialize($configSize1);
 $this->image_lib->resize();
 $this->image_lib->clear();

 /* Second size */    
 $configSize2['image_library']   = 'gd2';
 $configSize2['source_image']    = '/path/to/image/mypic.jpg';
 $configSize2['create_thumb']    = TRUE;
 $configSize2['maintain_ratio']  = TRUE;
 $configSize2['width']           = 200;
 $configSize2['height']          = 200;
 $configSize2['new_image']   = '200x200image';

 $this->image_lib->initialize($configSize2);
 $this->image_lib->resize();
 $this->image_lib->clear(); 
```

And so on. I suppose, for memory's sake, you could unset and reset the config file, as was suggested above, but if you plan on using the image resizing in separate controller methods as I did, I found it helpful to save those separately.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T04:56:57.213

问题是，CI 将所有库加载到静态数组后存储，一旦加载，就不会再次加载库。

所以，你可以做的是，你可以用新的配置再次初始化它：

```
$this->image_lib->clear();

// make changes to the $conig here

$this->image_lib->initialize($config); 
```

那应该行得通。

[来源。](http://codeigniter.com/forums/viewreply/781093/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-05T09:37:43.297

I suggest you to use image_moo library for this....its dead simple,lean and clean. See this: [http://www.matmoo.com/digital-dribble/codeigniter/image_moo/](http://www.matmoo.com/digital-dribble/codeigniter/image_moo/)

# java - 如何在 android 中获取我的列表视图的新更新

> ID：12274635
> 
> 赞同：0
> 
> 时间：2012-09-05T04:48:14.407
> 
> 标签：java, android, eclipse, listview

每当我从模拟器中单击后退按钮时，我都想获得我的列表视图的更新。但我的适配器不接受 notifyDataSetChanged()。我有办法做到这一点吗？

**下面是我显示列表视图的代码**

```
adapter = new SimpleAdapter(BookmarkActivity.this,
                        eventsList, R.layout.bookmark_list, new String[] {
                                TAG_EID, TAG_ENAME, TAG_CNAME,
                                TAG_CREATED_AT }, new int[] { R.id.bk_eid,
                                R.id.bk_ename, R.id.bk_cname,
                                R.id.bk_created_at });
                // updating listView
                setListAdapter(adapter); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T04:55:04.833

`onResume()`在;中调用相同的代码 我认为这会做到:)

# r - 将 R 列表保存到单独的 Excel 工作表中的功能

> ID：12274644
> 
> 赞同：8
> 
> 时间：2012-09-05T04:49:28.923
> 
> 标签：r, function, dataframe, export-to-excel

从[这篇文章](https://stackoverflow.com/questions/12257865/export-dataframes-in-list-as-worksheets-in-excel-file)中，我得到了一个脚本，该脚本将列表导出为 Excel 文件中的单独工作表（代码如下）。现在我想将它包装在一个方便的函数中，通过提供输入列表名称和输出文件名来重现此行为。

**样本数据：**

```
var1 <- list('2003' = 1:3, '2004' = c(4:3), '2005' = c(6,4,1), '2006' = 1:4 ) 
```

**当前脚本：**

```
require("XLConnect")
wb <- loadWorkbook("var1.xlsx", create = TRUE)
createSheet(wb, names(var1))
writeWorksheet(wb, var1, names(var1),header=FALSE)
saveWorkbook(wb) 
```

**免责声明：** *虽然我脸红地问这样一个简单的问题，但我相信 SO 的许多其他访问者会喜欢在这里找到这些信息；7)*

**编辑 :: 即用型功能：**

```
save.excel <-function(.list, default = 'var1', path = ''){
    require("XLConnect")
    .name <- as.list(match.call())[2]
    if(is.language(.name[[1]])) wb_name <- paste0(paste0(path, default, collapse = '/'), '.xlsx')
    if(is.symbol(.name[[1]])) wb_name <- paste0(paste0(path, as.character(.name), collapse = '/'), '.xlsx')
    wb <- loadWorkbook(wb_name, create = TRUE)
    createSheet(wb, names(.list))
    writeWorksheet(wb,.list, names(.list),header=FALSE)
    saveWorkbook(wb)
    } 
```

*与以下解决方案的唯一区别是我将 XLConnect 添加为从函数内部请求的库，以防您之前没有手动执行；7)*

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-05T05:23:35.230

这是未经测试的，因为 XLConnect 不会安装在我的机器上。但类似下面的东西可能会起作用

# 简单的方法

一个有两个参数的函数

*   `my_list`- 您希望将其元素导出为单独工作表的列表
*   `wb_name`- 工作簿的名称

函数看起来像这样

```
write_list <-function(my_list, wb_name = 'var1.xlsx') {    
  wb <- loadWorkbook(wb_name, create = TRUE)
  createSheet(wb, names(my_list))
  writeWorksheet(wb, my_list, names(my_list),header=FALSE)
  saveWorkbook(wb)
 } 
```

# 将使用列表名称的花哨选项

如果您想使用 的名称`list`来创建文件，那么您可以使用 `match.call`,`is.symbol`和`is.language`. 您为什么这样做的详细信息如下

```
write_list_name <-function(.list, default = 'var1', path = ''){
  .name <- as.list(match.call())[2]
   if(is.language(.name[[1]])){
     wb_name <- sprintf("%s/%s.xlsx", path, default)
   }
   if(is.symbol(.name[[1]])) {
    wb_name <- sprintf("%s/%s.xlsx", path, as.character(.name))
   }
  wb <- loadWorkbook(wb_name, create = TRUE)
  createSheet(wb, names(.list))
  writeWorksheet(wb,.list, names(.list),header=FALSE)
  saveWorkbook(wb)
  } 
```

`is.language`//处理`is.symbol`两种`match.call`情况

```
write_list_name(var1)

#in which case .name[[1]] is the symbol var1 
```

和

```
write_list_name(list(n=2:3))
# in which case .name[[1]] is list(n=2:3), and class language 
# a file called list(n=2:3).xlsx would be not ideal, hence the `default` argument. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T05:28:32.417

除了@mnel 的解决方案，这里还有一些关于函数的一般信息。

一般来说，一个函数看起来像这样：

```
function_name = function(input_a, input_b) {
    c = input_a * 2
    d = do_something(input_b)
    return(list(c, d))
} 
```

其中`input_a`，和`input_b`是输入参数，并且`list(c, d)`是返回值。`=`此返回值分配给调用函数时位于左侧的对象：

```
out_a = function_name(a, b) 
```

请注意，在`function_name`,`a`和`b`替换的函数体中`input_a`和`input_b`。`a`链接到的事实`input_a`是根据参数的顺序完成的。或者，可以使用命名参数：

```
out_a = function(input_a = a, input_b = b) 
```

在我看来，这使得函数调用更具可读性，特别是对于选择良好的函数和参数名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-28T19:25:14.807

如果有人需要最新的选项，请使用`openxlsx`, 直接调用`write.xlsx`如下：

```
var1 <- list('2003' = 1:3, '2004' = c(4:3), '2005' = c(6,4,1), '2006' = 1:4 )
write.xlsx(var1,"test.xlsx") 
```

# azure - 将所有数据从一个订阅传输到另一个订阅

> ID：12274645
> 
> 赞同：11
> 
> 时间：2012-09-05T04:49:31.963
> 
> 标签：azure

如何将我的所有云服务、数据库、虚拟机和 Blob 存储转移到我新订阅的另一个订阅？有没有更简单的方法？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-05T05:04:58.353

**更新：2016 年 6 月 6 日-这个答案已经很老了。必须寻求 AZURE 支持以将数据从一个订阅传输到另一个订阅。AZURE 门户现在也支持从一个订阅到另一个订阅的移动服务**

* * *

这里有一些（实际上很多:)）东西。您可以尝试联系 Windows Azure 支持并让他们移动它，但我不会为此屏住呼吸。剩下的唯一选择是手动转移所有资产。但是请记住，这意味着您的服务将在一段时间内关闭。

1.  **云服务**- 由于云服务本质上是您的应用程序的占位符，因此您需要首先从第一个订阅（源）中删除它们，然后在第二个订阅（目标）中重新创建它们。在目标订阅中创建它们后，您可以重新发布/重新部署您的应用程序。

2.  **数据库**- 看看复制数据库功能 ( [http://msdn.microsoft.com/en-us/library/windowsazure/ff951624.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/ff951624.aspx) ) 和导入/导出 SQL Azure 数据库 ( [http://msdn.microsoft.com /en-us/library/windowsazure/hh335292.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/hh335292.aspx)）在 Windows Azure 中可用。我已经尝试过创建副本

3.  **虚拟机**- 本质上，虚拟机由 blob 存储支持，即 VM 的所有 VHD 都作为页 blob 存储在 blob 存储中。请查看此博客文章，了解将虚拟机从一个订阅移动到另一个订阅：http: [//gauravmantri.com/2012/07/04/how-to-move-windows-azure-virtual-machines-from-one-subscription -对另一个/](http://gauravmantri.com/2012/07/04/how-to-move-windows-azure-virtual-machines-from-one-subscription-to-another/)

4.  **Blob 存储**- 在最新版本中，复制 blob 功能是一种服务器端异步操作。这意味着您可以将 blob 从一个存储帐户复制到另一个存储帐户，而无需先将它们下载到您的计算机上。这个想法是列出源中的 blob 容器和 blob，然后对其进行迭代并重复调用复制 blob 功能来复制 blob。上面的博客文章有一个示例控制台应用程序，它将 blob 从一个存储帐户复制到另一个您可以用作参考的存储帐户。唯一需要注意的是，必须在 2012 年 6 月 7 日或之后创建目标存储帐户。您可能会发现以下链接也很有用：[http ://blog.elastacloud.com/2012/07/04/copying-azure-blobs -from-one-subscription-to-another-with-api-1-7-1/](http://blog.elastacloud.com/2012/07/04/copying-azure-blobs-from-one-subscription-to-another-with-api-1-7-1/)和[http://blogs.msdn.com/b/windowsazurestorage/archive/2012/06/12/introducing-asynchronous-cross-account-copy-blob.aspx](http://blogs.msdn.com/b/windowsazurestorage/archive/2012/06/12/introducing-asynchronous-cross-account-copy-blob.aspx)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-09-08T14:14:46.363

我刚刚就此事联系了 Azure 支持。他们的回答：

> [Azure 支持] 将能够迁移 Windows Azure 数据（托管服务、存储帐户）、VM 实例、服务总线、网站从源订阅到目标订阅...请注意，不支持迁移预览功能服务，但是我们可以在试错的基础上做到这一点。

所以现在看来​​这可以通过支持来完成。最大的警告是，它（至少目前）是一个全有或全无的举动。因此，除了一项服务或一个存储帐户等之外，您无法移动所有内容。您必须移动所有内容。

请注意，移动 SQL Azure 服务器可以通过管理门户轻松完成。

**更新**：我已经完成了如上所述的订阅转移。实际转移是一个相当轻松的过程，只需要几个小时。将所有不同的服务分成单独的订阅是非常痛苦的。所以这个故事的寓意是要小心你订阅的服务。如果可能的话，将每个“产品”（网站、SaaS 产品等）放入单独的订阅中。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-08-15T10:09:52.570

**此解决方案不再可用** 以下是涵盖将数据和服务从一个订阅移动到另一个订阅的文档：

[http://msdn.microsoft.com/en-us/library/azure/dn736051.aspx](http://msdn.microsoft.com/en-us/library/azure/dn736051.aspx)。此处发布的上一个链接指向已停用的页面。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-08T12:36:50.723

您还可以使用 DC 迁移工具（一种开源工具）将 Azure 资源从一个订阅复制到跨数据中心的其他订阅。

Azure 数据中心迁移工具博客[http://blog.persistentsys.com/index.php/2015/01/06/persistent-systems-releases-azure-data-center-migration-solution/](http://blog.persistentsys.com/index.php/2015/01/06/persistent-systems-releases-azure-data-center-migration-solution/)

# java - 找到最大和子矩阵

> ID：12274647
> 
> 赞同：0
> 
> 时间：2012-09-05T04:49:48.753
> 
> 标签：java

**1.**我有一个二维数组，代表一个矩阵。我需要找到一个总和最大的**平方**子矩阵。子矩阵的大小是行数或列数除以 2。例如，如果我有这个

```
9 3 5 9
2 5 9 8
8 4 9 7
9 5 3 9 
```

最大的子矩阵将是

```
9 8
9 7 
```

因为它有最大的总和。

* * *

**2.**其次，我需要找到具有排列的最大子矩阵。我的意思是，我需要选择具有子矩阵形状的最大数字（同一列或同一行中至少两个数字）。例如对角线边缘的四个九

```
9 9
9 9 
```

但我不能取第一行并制作一个矩阵，因为它确实具有矩阵的形状。

我仍在为此苦苦挣扎，所以请帮助我。

这是我的代码，subm 是子矩阵的大小

```
for (i=0;i<rows-subm;i++){
          for(j=0;j<colums-subm;j++)
          {
             temp=pic[i][j]+pic[i][j+1]+pic[i+1][j]+pic[i+1][j+1];
             if(temp > summax)
                 summax=temp;
          }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T07:32:28.167

使用矩阵行列式计算方法。看看这个[例子](http://wiki.answers.com/Q/Determinant_of_matrix_in_java)。2x2 矩阵的行列式将计算为

抗体

光盘

```
ad-cb

Instead use a+b+c+d 
```

将示例中的 2x2 矩阵计算替换为

```
result = mat[0][0] + mat[1][1] + mat[0][1] + mat[1][0]; 
```

记录所有这些值并从中找到最大值

# ruby - Ruby 1.9 中的 ARGF.class 是什么？

> ID：12274652
> 
> 赞同：30
> 
> 时间：2012-09-05T04:50:12.487
> 
> 标签：ruby, class, ruby-1.9

在 Ruby 1.8.7 中，[文档](http://www.ruby-doc.org/core-1.8.7/)没有`ARGF`在类和模块下列出，`ARGF`也不是类或模块：

```
ARGF.class # => Object 
```

在 Ruby 1.9.3 中，[文档](http://www.ruby-doc.org/core-1.9.3/)在`ARGF`类和模块下，但我看到了：

```
ARGF.class # => ARGF.class
ARGF.superclass # => NoMethodError: undefined method `superclass' for ARGF:ARGF.class
ARGF.class.superclass # => Object 
```

*   `ARGF`当实际的类是别的东西时，为什么 Ruby 1.9 文档将作为一个类放置？或者他们是同一个东西？
*   是`ARGF.class`元类、虚拟类、单例类还是其他？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-05T05:35:11.553

`ARGF`是用 C 实现的，你可以在其中做一些奇怪的事情。类首先在`ARGF`那里定义。它在 Ruby 中没有设置为任何常量，但它的名称设置为“ARGF.class”。然后将`ARGF`常量设置为该类的实例。

```
rb_cARGF = rb_class_new(rb_cObject);
rb_set_class_path(rb_cARGF, rb_cObject, "ARGF.class");
/* ... */
argf = rb_class_new_instance(0, 0, rb_cARGF);
rb_define_global_const("ARGF", argf); 
```

这是一个大致相同的 Ruby 代码。

```
argf_class = Class.new
def argf_class.name
  "ARGF.class"
end
argf = argf_class.new
ARGF = argf 
```

它在 Ruby 中看起来不合理，但在 C 中却很好。虽然，我认为可以将类设置为`ARGFClass`like `NilClass`, `TrueClass`, `FalseClass`，以免造成混淆。

我不知道变化的历史。我认为 Ruby 核心人员想要`ARGF`进入文档，这是最简单的方法。（RDoc 不能显示单例对象的文档。）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-05T05:10:53.607

`ARGF`不是类或模块似乎是正确的。

```
class ARGF
end
# => TypeError: ARGF is not a class

module ARGF
end
# => TypeError: ARGF is not a module 
```

文档`ARGF`在类下列出，但除此之外，它并没有说它是一个类。可能不打算将其`ARGF`作为一个类处理，并且文档中这样列出是错误的。这是文档的错误。

看起来`ARGF`如果某个类的唯一实例缺少文字，并且引用它的唯一方法是调用`ARGF.class`.

```
ARGF.class.class
# => Class

ARGF.class.ancestors
# => [ARGF.class, Enumerable, Object, Kernel, BasicObject] 
```

类与其实例之间的通常关系适用于`ARGF.class`和`ARGF`。

```
ARGF.is_a?(ARGF.class)
# => true

ARGF.kind_of?(ARGF.class)
# => true 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-06T22:46:19.203

如果我们只使用纯 Ruby 捕获对象并查看它们，我们可以看到一些事情：

```
1.9.3 (Object#main):0 > ARGFClass = ARGF.class                                                                                                                                      
=> ARGF.class
1.9.3 (Object#main):0 > ARGFClass.name                                                                                                                                              
=> "ARGF.class"
1.9.3 (Object#main):0 > ARGFClass.class                                                                                                                                             
=> Class
1.9.3 (Object#main):0 > ARGFClass.superclass                                                                                                                                        
=> Object
1.9.3 (Object#main):0 > ARGFClass.ancestors                                                                                                                                         
=> [ARGF.class,
    Enumerable,
    Object,
    JSON::Ext::Generator::GeneratorMethods::Object,
    PP::ObjectMixin,
    Kernel,
    BasicObject] 
```

出于某种原因，开发人员已将 class.name 值显式设置为 return `ARGF.class`，这通常不常见，但在 Ruby 内部用于不应该直接访问的常量。

我们可以使用与任何其他类完全相同的 ARGFClass 来实例化对象。这意味着它是一个真正的 Ruby 类：

```
1.9.3 (Object#main):0 > argfinstance = ARGFClass.new                                                                                                                                
=> ARGF
1.9.3 (Object#main):0 > argfinstance.inspect                                                                                                                                        
=> "ARGF" 
```

当您调用 #new 时，它不仅仅是返回单例：

```
1.9.3 (Object#main):0 > argfinstance == ARGF                                                                                                                                        
=> false
1.9.3 (Object#main):0 > argfinstance.object_id                                                                                                                                      
=> 70346556507420
1.9.3 (Object#main):0 > ARGF.object_id                                                                                                                                              
=> 70346552343460 
```

Ruby 开发人员有意将其命名为`ARGF.class`不能直接通过名称引用，但它是一个真实的类，`ARGF`是一个真实的对象。

它有很多与 IO 对象相同的方法，实际上是在`io.c`源文件中定义的。它还混合了 Enumerable 模块，因此它支持所有 each/inject/map 功能。

编辑：文档`ARGF`列为一个类。然而，它实际上是一个常量，它引用了一个奇怪的`ARGF.class`类的单例实例。

## 参考

*   [https://groups.google.com/forum/?fromgroups=#!searchin/ruby-talk-google/argf.class/ruby-talk-google/ADQI5rhuJms/1M8I4_MpjuwJ](https://groups.google.com/forum/?fromgroups=#!searchin/ruby-talk-google/argf.class/ruby-talk-google/ADQI5rhuJms/1M8I4_MpjuwJ)
*   [http://rubydoc.info/stdlib/core/ARGF](http://rubydoc.info/stdlib/core/ARGF)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T03:53:36.780

ARGF 是一个数组类。[在https://github.com/DouglasAllen/Ruby_core_ri_doc/tree/master/ARGF](https://github.com/DouglasAllen/Ruby_core_ri_doc/tree/master/ARGF)上查看一些示例 也许不是按名称，但您可以像使用任何数组一样使用它来判断，除了您可以将命令行参数传递给它。尝试添加其他内容，看看会发生什么。

# java - 从 Jackson 解析器生成 JSON

> ID：12274654
> 
> 赞同：0
> 
> 时间：2012-09-05T04:50:34.877
> 
> 标签：java, json, parsing, jqgrid, jackson

我在 Java 中使用 Jackson 解析器，我想从[POJO](http://en.wikipedia.org/wiki/Plain_Old_Java_Object)的 Java 对象生成 JSON 字符串，格式如下。我怎样才能做到这一点？

**{"TOTAL":1,"CURRENTPAGE":1,"TOTALRECORDS":6,"ROWS":[{"pagename":"调用的 getter 方法：测试","pagestatus":"测试状态","id": 4},{"pagename":"调用getter方法:调用getter方法:测试","pagestatus":"测试状态","id":4},{"pagename":"调用getter方法:调用getter方法: Test","pagestatus":"Test Status","id":4},{"pagename":"Called getter Method : Called getter Method : Test","pagestatus":"Test Status","id":4 }]}**

如果我确实喜欢下面的事情，那么它不起作用并给我错误的输出

```
 Tblselectablecolumnjqgrid selCol = new Tblselectablecolumnjqgrid();
    selCol.setPageid(4);
    selCol.setPagename("Test");
    selCol.setPagestatus("Test Status");

    selList.add(selCol);
    selList.add(selCol.clone());
    selList.add(selCol.clone());
    selList.add(selCol.clone());

    ObjectMapper om = new ObjectMapper();

    String writeValueAsString = om.writeValueAsString(selList);

    System.out.println("Result:    " + writeValueAsString);

    JsonFactory jsf = new JsonFactory();

    JsonTreeWriter tree = new JsonTreeWriter(); 
```

**它给了我以下输出**

**[{"pagename":"调用的 getter 方法：测试","pagestatus":"测试状态","id":4},{"pagename":"调用的 getter 方法：调用的 getter 方法：测试","pagestatus" :"Test Status","id":4},{"pagename":"Called getter Method : Called getter Method : Test","pagestatus":"Test Status","id":4},{"pagename" :"调用getter方法：调用getter方法：测试","pagestatus":"测试状态","id":4}]**

我应该在代码中进行哪些更改以获得所需的输出？

### 我的 POJO 课

```
package com.pojo;

import org.codehaus.jackson.annotate.JsonProperty;
import org.codehaus.jackson.map.annotate.JsonCachable;

/**
 * @author bhavik.ambani
 *
 *         Useful for storing the current status of the grid in the table.
 */
public class Tblselectablecolumnjqgrid implements java.io.Serializable, Cloneable {

    private static final long serialVersionUID = 1L;

    @JsonProperty("id")
    private int pageid;

    private String pagename;

    private String pagestatus;

    public Tblselectablecolumnjqgrid() {
    }

    public Tblselectablecolumnjqgrid(int pageid, String pagename) {
        this.pageid = pageid;
        this.pagename = pagename;
    }

    public Tblselectablecolumnjqgrid(int pageid, String pagename,
            String pagestatus) {
        this.pageid = pageid;
        this.pagename = pagename;
        this.pagestatus = pagestatus;
    }

    public int getPageid() {
        return this.pageid;
    }

    public void setPageid(int pageid) {
        this.pageid = pageid;
    }

    public String getPagename() {
        System.out.println("Called Getter Method");
        return "Called getter Method : " + this.pagename;
    }

    public void setPagename(String pagename) {
        this.pagename = pagename;
    }

    public String getPagestatus() {
        return this.pagestatus;
    }

    public void setPagestatus(String pagestatus) {
        this.pagestatus = pagestatus;
    }

    @Override
    public Tblselectablecolumnjqgrid clone() throws CloneNotSupportedException {
        Tblselectablecolumnjqgrid selBean = (Tblselectablecolumnjqgrid) super
                .clone();
        selBean.setPageid(getPageid());
        selBean.setPagename(getPagename());
        selBean.setPagestatus(getPagestatus());

        return selBean;
    }

    @Override
    public int hashCode() {
        final int prime = 31;
        int result = 1;
        result = prime * result + pageid;
        result = prime * result
                + ((pagename == null) ? 0 : pagename.hashCode());
        result = prime * result
                + ((pagestatus == null) ? 0 : pagestatus.hashCode());
        return result;
    }

    @Override
    public boolean equals(Object obj) {
        if (this == obj)
            return true;
        if (obj == null)
            return false;
        if (getClass() != obj.getClass())
            return false;
        Tblselectablecolumnjqgrid other = (Tblselectablecolumnjqgrid) obj;
        if (pageid != other.pageid)
            return false;
        if (pagename == null) {
            if (other.pagename != null)
                return false;
        } else if (!pagename.equals(other.pagename))
            return false;
        if (pagestatus == null) {
            if (other.pagestatus != null)
                return false;
        } else if (!pagestatus.equals(other.pagestatus))
            return false;
        return true;
    }
} 
```

### 主要方法类

```
package com.jackson;

import java.io.IOException;
import java.util.ArrayList;

import org.codehaus.jackson.JsonGenerationException;
import org.codehaus.jackson.map.JsonMappingException;
import org.codehaus.jackson.map.ObjectMapper;

import com.pojo.Tblselectablecolumnjqgrid;

public class JacksonParser {

    public static void main(String args[]) throws JsonGenerationException,
            JsonMappingException, IOException, CloneNotSupportedException {

        ArrayList<Tblselectablecolumnjqgrid> selList = new ArrayList<Tblselectablecolumnjqgrid>();

        Tblselectablecolumnjqgrid selCol = new Tblselectablecolumnjqgrid();
        selCol.setPageid(4);
        selCol.setPagename("Test");
        selCol.setPagestatus("Test Status");

        selList.add(selCol);
        selList.add(selCol.clone());
        selList.add(selCol.clone());
        selList.add(selCol.clone());

        ObjectMapper om = new ObjectMapper();

        String writeValueAsString = om.writeValueAsString(selList);
        System.out.println("Result:    " + writeValueAsString);
    }
} 
```

### 预期产出

**{"TOTAL":1,"CURRENTPAGE":1,"TOTALRECORDS":6,"ROWS":[{"pagename":"调用的 getter 方法：测试","pagestatus":"测试状态","id": 4},{"pagename":"调用getter方法:调用getter方法:测试","pagestatus":"测试状态","id":4},{"pagename":"调用getter方法:调用getter方法: Test","pagestatus":"Test Status","id":4},{"pagename":"Called getter Method : Called getter Method : Test","pagestatus":"Test Status","id":4 }]}**

### 输出获取

**[{"pagename":"调用的 getter 方法：测试","pagestatus":"测试状态","id":4},{"pagename":"调用的 getter 方法：调用的 getter 方法：测试","pagestatus" :"Test Status","id":4},{"pagename":"Called getter Method : Called getter Method : Test","pagestatus":"Test Status","id":4},{"pagename" :"调用getter方法：调用getter方法：测试","pagestatus":"测试状态","id":4}]**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T05:33:07.600

写一个像这样的包装器

```
public class Wrapper {
  private int TOTAL;
  private int CURRENTPAGE;
  private int TOTALRECORDS;
  private List<Row> ROWS;

  //getters setters

}

public class Row {
  private String pagename;
  private String pagestatus;
  private int id;

  //getters setters
} 
```

在你的主要课程中

```
//populate Wrapper
Wrapper wrap = new Wrapper();
//set attributes and Rows
...
String writeValueAsString = om.writeValueAsString(wrap); 
```

# ruby-on-rails - 我怎样才能使帖子对每个用户和所需的登录过程都是独立的？

> ID：12274656
> 
> 赞同：0
> 
> 时间：2012-09-05T04:50:58.317
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我是 Rails 新手，正在阅读[http://guides.rubyonrails.org/getting_started.html](http://guides.rubyonrails.org/getting_started.html)。有一个例子，数据可以存储、编辑和删除，但任何用户都可以存储、编辑和删除。我希望存储特定于每个用户的数据，他们应该只看到他们的数据而不是其他数据。我想要一个登录过程，用户应该登录并存储他/她自己的数据并能够修改或删除。

另外，我希望这是一个 api，以便应用程序可以使用它。我怎样才能做到这一点？有没有例子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T04:59:05.703

这是你一次要问的很多。这里有太多要详细解释的内容，所以我只会为您指出正确的方向。我假设您可以点击链接并自己阅读文档。有关 Ruby on Rails 的更多详细信息，请阅读[Ruby on Rails 指南](http://guides.rubyonrails.org)。

您想要的一些功能可以由现有的 Ruby Gems 处理：

为了处理用户登录和注册（身份验证），建议将[Devise](https://github.com/plataformatec/devise)作为目前维护最积极的 gem。

要处理用户能力和权限（授权），您可以使用[CanCan](https://github.com/ryanb/cancan)。

为了描述使用 CanCan 时的权限，在`Ability`模型中，您只需说：

```
def initialize(user)
  can :manage, Data, :owner_id => user.id
end 
```

更多信息可以在[CanCan wiki](https://github.com/ryanb/cancan/wiki)上找到。您需要在每个模型中添加一`owner_id`列。`Data`这应该很容易，只需在`Data`模型上定义一个关联。

```
class Data < ActiveRecord::Base
  belongs_to :owner, :class_name => :User
end 
```

并且还[迁移您的数据库](http://guides.rubyonrails.org/migrations.html)。

# powershell - 使用 PowerShell 进行 Azure 部署，“New-AzureDeployment：在 https://management.core.windows.net/ 处没有监听端点...”

> ID：12274657
> 
> 赞同：1
> 
> 时间：2012-09-05T04:51:10.667
> 
> 标签：powershell, deployment, azure

遵循本文中的指南和 powershell 脚本，

```
https://www.windowsazure.com/en-us/develop/net/common-tasks/continuous-delivery/ 
```

我遇到了一个非常奇怪的错误：

2012 年 9 月 4 日晚上 9:02 - 创建新部署：进行中 New-AzureDeployment：在[https://management.core.windows.net/5921d8af-88a1-4f63-9673-5e1ae1df7e8a/services/处没有监听端点storageservices/Build_2012-09-04_02-27.1/dist/LNEC_Admin.Azure.cspkg/keys](https://management.core.windows.net/5921d8af-88a1-4f63-9673-5e1ae1df7e8a/services/storageservices/Build_2012-09-04_02-27.1/dist/LNEC_Admin.Azure.cspkg/keys)可以接受该消息。这通常是由不正确的地址或 SOAP 操作引起的。有关更多详细信息，请参阅 InnerException（如果存在）。

这很奇怪，因为我们正在构建“Build_2012-09-04_08-16.1”，而不是上面 URL 中提到的那个（它甚至不再存在于文件系统中）。这是在 NETWORK SERVICE 帐户下运行的 Jenkins CI 下。如果我使用自己的帐户手动运行它，则会出现相同的错误结果，但使用 lnecint 代替构建目录：[https ://management.core.windows.net/5921d8af-88a1-4f63-9673-5e1ae1df7e8a/services/存储服务/lnecint/密钥](https://management.core.windows.net/5921d8af-88a1-4f63-9673-5e1ae1df7e8a/services/storageservices/lnecint/keys)

在任何配置中都没有提到该关键字“lnecint”（我已经搜索了整个机器和 TFS 服务器上的每个文件）。它是存储帐户的名称，但很久以前就被删除了。

VS 2012，Azure SDK 1.7.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T05:12:14.500

您的端点肯定有问题。你能检查一下你传递给“New-AzureDeployment”Cmdlet 的参数吗？

# java - 大括号格式化 Netbeans

> ID：12274658
> 
> 赞同：5
> 
> 时间：2012-09-05T04:51:14.343
> 
> 标签：java, netbeans

我一直在寻找 Netbeans 的选项，但我找不到更改大括号默认位置的方法

```
public class foo {

} 
```

对此

```
public class foo
{

} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-05T04:54:21.787

进去看看`Tools -> Options -> Editor -> Formatting`。

参考：[http ://forums.netbeans.org/topic8932.html](http://forums.netbeans.org/topic8932.html)

# java - threadid=9：线程以未捕获的异常退出（组=0x40015560）

> ID：12274666
> 
> 赞同：0
> 
> 时间：2012-09-05T04:52:07.890
> 
> 标签：java, android, sms

当我执行我的 android 应用程序时，我面临一个强制关闭问题。当我尝试根据从服务器收到的响应代码制作“Toast”时，我面临强制关闭错误。即使发送消息没有问题，因为消息每次都能正确传递。显示吐司时发生错误。我正在粘贴所有代码和日志消息。请帮我解决错误

**原木猫**

```
09-05 10:08:02.122: W/KeyCharacterMap(719): No keyboard for id 0
09-05 10:08:02.122: W/KeyCharacterMap(719): Using default keymap: /system/usr/keychars 
/qwerty.kcm.bin
09-05 10:08:30.392: D/dalvikvm(719): GC_EXTERNAL_ALLOC freed 228K, 53% free 2625K/5511K,   
external 2061K/2137K, paused 64ms
09-05 10:08:34.382: D/SmsResponse(719): 1
09-05 10:08:34.382: W/dalvikvm(719): threadid=9: thread exiting with uncaught exception  
(group=0x40015560)
09-05 10:08:34.412: E/AndroidRuntime(719): FATAL EXCEPTION: Thread-10
09-05 10:08:34.412: E/AndroidRuntime(719): java.lang.RuntimeException: Can't create handler  
inside thread that has not called Looper.prepare()
09-05 10:08:34.412: E/AndroidRuntime(719):  at android.os.Handler.<init>(Handler.java:121)
09-05 10:08:34.412: E/AndroidRuntime(719):  at android.widget.Toast.<init>(Toast.java:68)
09-05 10:08:34.412: E/AndroidRuntime(719):  at android.widget.Toast.makeText(Toast.java:231)
09-05 10:08:34.412: E/AndroidRuntime(719):  at 
com.bluetitan.freesms.MainActivity.sendMessage(MainActivity.java:65)
09-05 10:08:34.412: E/AndroidRuntime(719):  at 
com.bluetitan.freesms.MainActivity.run(MainActivity.java:144)

09-05 10:08:34.412: E/AndroidRuntime(719):  at java.lang.Thread.run(Thread.java:1019)
09-05 10:08:34.742: W/IInputConnectionWrapper(719): showStatusIcon on inactive InputConnection
09-05 10:08:36.142: E/WindowManager(719): Activity com.bluetitan.freesms.MainActivity has leaked 
window com.android.internal.policy.impl.PhoneWindow$DecorView@40558428 that was originally added 
here
09-05 10:08:36.142: E/WindowManager(719): android.view.WindowLeaked: Activity   
com.bluetitan.freesms.MainActivity has leaked window  
com.android.internal.policy.impl.PhoneWindow$DecorView@40558428 that was originally added here
09-05 10:08:36.142: E/WindowManager(719):   at android.view.ViewRoot.<init>(ViewRoot.java:258)
09-05 10:08:36.142: E/WindowManager(719):   at 
android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
09-05 10:08:36.142: E/WindowManager(719):   at 
android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
09-05 10:08:36.142: E/WindowManager(719):   at   
android.view.Window$LocalWindowManager.addView(Window.java:424)
09-05 10:08:36.142: E/WindowManager(719):   at android.app.Dialog.show(Dialog.java:241)
09-05 10:08:36.142: E/WindowManager(719):   at 
android.app.ProgressDialog.show(ProgressDialog.java:107)
09-05 10:08:36.142: E/WindowManager(719):   at 
android.app.ProgressDialog.show(ProgressDialog.java:90)

 09-05 10:08:36.142: E/WindowManager(719):  at 
 com.bluetitan.freesms.MainActivity.onClick(MainActivity.java:123)

 09-05 10:08:36.142: E/WindowManager(719):  at android.view.View.performClick(View.java:2485)

 09-05 10:08:36.142: E/WindowManager(719):  at android.view.View$PerformClick.run(View.java:9080)
 09-05 10:08:36.142: E/WindowManager(719):  at 
 android.os.Handler.handleCallback(Handler.java:587)
 09-05 10:08:36.142: E/WindowManager(719):  at 
 android.os.Handler.dispatchMessage(Handler.java:92)
 09-05 10:08:36.142: E/WindowManager(719):  at android.os.Looper.loop(Looper.java:123)
 09-05 10:08:36.142: E/WindowManager(719):  at   
 android.app.ActivityThread.main(ActivityThread.java:3683)
 09-05 10:08:36.142: E/WindowManager(719):  at java.lang.reflect.Method.invokeNative(Native 
 Method)
 09-05 10:08:36.142: E/WindowManager(719):  at java.lang.reflect.Method.invoke(Method.java:507)
 09-05 10:08:36.142: E/WindowManager(719):  at 
 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)

 09-05 10:08:36.142: E/WindowManager(719):  at 
 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
 09-05 10:08:36.142: E/WindowManager(719):  at dalvik.system.NativeStart.main(Native Method) 
```

**MainActivity.java**

```
public class MainActivity extends Activity implements OnClickListener, Runnable {
Context context;

// public final static String EXTRA_NUMBER =
// "com.example.myfirstapp.NUMBER";
// public final static String EXTRA_MESSAGE =
// "com.example.myfirstapp.MESSAGE";
EditText editTextNum, editText, editUserName, editPassword;
Button btnsend;
ProgressDialog pd;
String gateway_name;
Thread t;
Spinner spinner1;
String toastMsg = "Message Sent To Server";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.activity_main);
    editUserName = (EditText) findViewById(R.id.edit_userName);
    editPassword = (EditText) findViewById(R.id.edit_password);
    editTextNum = (EditText) findViewById(R.id.edit_number);
    editText = (EditText) findViewById(R.id.edit_message);
    spinner1 = (Spinner) findViewById(R.id.SpinnerGateway);
    btnsend = (Button) findViewById(R.id.btnsend);
    btnsend.setOnClickListener(this);
}

/** Called when the user clicks the Send button */
public void sendMessage() {
    String usrname = editUserName.getText().toString();
    String usrPassword = editPassword.getText().toString();
    String number = editTextNum.getText().toString();
    String message = editText.getText().toString();
    gateway_name = String.valueOf(spinner1.getSelectedItem());
    String msgreciever = number;
    String testMessage = message;
    try {
        SmsSender.sendMessage(msgreciever, testMessage, usrname,
                usrPassword, gateway_name);
        toastMsg = SmsSender.toastText;
    } catch (Exception ex) {
        Toast.makeText(MainActivity.this, "SMS Sending Failed.",
                Toast.LENGTH_SHORT).show();
    }

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    // Handle item selection
    switch (item.getItemId()) {
    case R.id.menu_settings:
        settingmenuClicked();
        return true;
    case R.id.menu_help:
        showHelp();
        return true;
    default:
        return super.onOptionsItemSelected(item);
    }
}

public boolean isOnline() {
    ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo netInfo = cm.getActiveNetworkInfo();
    if (netInfo != null && netInfo.isConnectedOrConnecting()) {
        return true;
    }
    return false;
}

public boolean isValid() {
    if (editUserName.getText().length() == 10
            && editPassword.getText().length() != 0
            && editTextNum.getText().length() == 10
            && editText.getText().length() != 0) {
        return true;
    }
    return false;
}

public void onClick(View v) {
    // TODO Auto-generated method stub
    if (v == btnsend) {
        if (!isOnline()) {
            Toast.makeText(MainActivity.this,
                    "No Internet Access..Cannot Send SMS",
                    Toast.LENGTH_SHORT).show();
        } else if (!isValid()) {
            Toast.makeText(MainActivity.this,
                    "All fields are required. Try Again.",
                    Toast.LENGTH_SHORT).show();
        } else {
            pd = ProgressDialog.show(MainActivity.this, "Free Sms",
                    "Sending SMS..Please Wait..!!", true);
            t = new Thread(this);
            t.start();
        }

    }
}

public void settingmenuClicked() {
    Toast.makeText(MainActivity.this, "Setting Menu Coming Soon",
            Toast.LENGTH_SHORT).show();
}

public void showHelp() {
    Toast.makeText(MainActivity.this, "Help Coming Soon",
            Toast.LENGTH_SHORT).show();
}

public void run() {
    // TODO Auto-generated method stub
    sendMessage();
    mHandler.sendEmptyMessage(0);
}

public Handler mHandler = new Handler(Looper.getMainLooper()) {
    @Override
    public void handleMessage(Message msg) {
        // TODO Auto-generated method stub
        super.handleMessage(msg);
        pd.dismiss();
        Toast.makeText(MainActivity.this, "Message Sent to server", Toast.LENGTH_SHORT)
                .show();
        editTextNum.setText("");
        editText.setText("");
        editTextNum.requestFocus();
    }
};
} 
```

**短信发送器.java**

```
public class SmsSender {

static final String _url = "http://ubaid.tk/sms/sms.aspx";
static final String charset = "UTF-8";
public static String responsecode = "0";
public static Integer responseInt;
public static String toastText = "Message Sent To Server";

// to build the query string that will send the message
private static String buildRequestString(String targetPhoneNo,
        String message, String userName, String Password, String Gateway)
        throws UnsupportedEncodingException {
    String[] params = new String[5];
    params[0] = userName;
    params[1] = Password;
    params[2] = message;
    params[3] = targetPhoneNo;
    params[4] = Gateway;

    String query = String.format(
            "uid=%s&pwd=%s&msg=%s&phone=%s&provider=%s",
            URLEncoder.encode(params[0], charset),
            URLEncoder.encode(params[1], charset),
            URLEncoder.encode(params[2], charset),
            URLEncoder.encode(params[3], charset),
            URLEncoder.encode(params[4], charset));
    return query;

}

public static void sendMessage(String reciever, String message,
        String userName, String password, String Gateway) throws Exception {
    // To establish the connection and perform the post request
    URLConnection connection = new URL(_url
            + "?"
            + buildRequestString(reciever, message, userName, password,
                    Gateway)).openConnection();
    connection.setRequestProperty("Accept-Charset", charset);
    // This automatically fires the request and we can use it to determine
    // the response status
    InputStream response = connection.getInputStream();
    BufferedReader br = new BufferedReader(new InputStreamReader(response));
    // System.out.println(br.readLine());
    // response code = br.readLine();
    Log.d("SmsResponse", br.readLine());
    responsecode = br.readLine();
    responseInt = Integer.valueOf(responsecode).intValue();
    switch (responseInt) {
    case 1:
        toastText = "Message Sent Successfully";
        break;
    case -1:
        toastText = "Server Error";
        break;
    case -2:
        toastText = "Invalid Username";
        break;
    case -3:
        toastText = "Invalid Message Text";
        break;
    case -4:
        toastText = "Login Failed";
        break;
    case -5:
        toastText = "IP is blocked";
        break;
    default:
        toastText = "Unknown Error";
        break;
    }

    // responseInt = Integer.valueOf(br.readLine()).intValue();

}

public static void main(String[] args) throws Exception {
    // To DO
    // String testPhoneNo = "9876543210";
    // String testMessage = "Sending Messages From java is not too hard";
    // sendMessage(testPhoneNo, testMessage);
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T12:48:26.640

[您不能从该线程调用 Toast。](https://stackoverflow.com/questions/3875184/cant-create-handler-inside-thread-that-has-not-called-looper-prepare)您需要在 UI 线程上运行代码。这是解决它的最简单方法：

```
this.runOnUiThread(new Runnable() {
    public void run() {
        Toast.makeText(MainActivity.this, "SMS Sending Failed.",
            Toast.LENGTH_SHORT).show();

    }
}); 
```

这段代码是否也意味着我对[这个问题](https://stackoverflow.com/questions/12267237/retrieve-server-response-code-in-string/12269217#12269217)的解决方案是正确的？如果是，请[记住选择正确的答案](https://meta.stackexchange.com/questions/5234/how-does-accepting-an-answer-work)，如果不是，请先解决该问题，然后再提出涉及相同代码的单独问题。

**编辑：**另外，您收到调用此 toast 消息的异常的原因是因为您在存储之前发送了响应代码。只有第一次调用`readLine()`才会返回响应代码。在您发送给`System.out.println()`which 的第一个问题中什么也没做。现在您将它发送到您的日志，以便您可以看到它，但之后它就消失了。您需要在记录之前存储它：

```
responsecode = br.readLine();
Log.d("SmsResponse", responsecode); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-30T09:04:49.477

当我们必须执行无法在主 UI 线程上执行的繁重任务或耗时任务时使用线程，因为其他 UI 操作将占据并会给您带来错误。

所以做这样耗时的任务，比如制作网络连接或下载我们需要线程的任何文件。

但是 toast 是一个 UI 元素，它只会在主 UI 线程上执行。

# c# - 签署 winforms exe 时加密失败 - “参数不正确”

> ID：12274667
> 
> 赞同：3
> 
> 时间：2012-09-05T04:52:22.620
> 
> 标签：c#, winforms, compiler-errors, sign

尝试使用我的 Comodo 代码签名证书在我的 WinForms 应用程序的签名选项卡中“签署程序集”，但我不断收到错误消息：

```
Cryptographic failure while signing assembly 'C:\Projects\SomeApplication\obj\Debug\Application.exe' -- 'Error signing assembly -- The parameter is incorrect. ' 
```

1.  我从 IE 将证书导出到带有公钥和私钥的 PFX 文件中。
2.  我通过运行创建了 SNK 文件`sn -p <pfxFile> <snkFile>`

浏览了**SO**，发现了一堆东西可以尝试，例如在项目中添加一个SGen部分但无济于事。

```
<PropertyGroup>
  <SGenUseProxyTypes>false</SGenUseProxyTypes>
  <SGenPlatformTarget>$(Platform)</SGenPlatformTarget>
</PropertyGroup> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-07T17:43:41.737

**上下文：** VS2013 Excel VSTO AddIn

我在尝试使用 Comodo 的 rfc3161 时间戳服务器时遇到了同样的问题：

[http://timestamp.comodoca.com/rfc3161](http://timestamp.comodoca.com/rfc3161)

当我使用验证码服务器或将其留空时，项目构建成功：

[http://timestamp.comodoca.com/authenticode](http://timestamp.comodoca.com/authenticode)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T05:02:33.597

您从 Comodo 下载的证书必须在增强密钥使用 (EKU) 字段中具有“代码签名”对象标识符 (OID)“1.3.6.1.5.5.7.3.3”。您可能错误地购买了 SSL 证书。

# mysql - 存在关键字不起作用

> ID：12274668
> 
> 赞同：0
> 
> 时间：2012-09-05T04:52:27.960
> 
> 标签：mysql, sql

我有两个如下表。

表 val1

```
e_id  name   val  

1     A1     Abc         
2     A2     Abd        
3     A3     AbE        
4     A4     AEd   
5     A5     AEd   
6     A6     Bdc 
```

表 val2

```
e_id   e_desc   t_id   

1       desc1    1
2       desc1    1
1       desc1    2
3       desc1    1
5       desc1    1
2       desc1    2
4       desc1    2
5       desc1    2
2       desc1    3
4       desc1    1
6       desc1    1
3       desc1    2
6       desc1    2
3       desc1    2
5       desc1    3 
```

我只想通过 e_id 映射从表 Val1 中获取值，其中表 Val2 上的 e_id 为表 Val2 t_id = 1

我正在使用此查询，但它正在获取所有数据。我该如何解决这个问题。这是我使用的sql代码，如下所示

```
SELECT 
    a.*,
    b.e_desc 
FROM 
    val1 AS a, val2 AS b 
WHERE 
    b.e_id = a.e_id 
AND EXISTS (SELECT 
                c.e_id 
            FROM val2 AS c 
            WHERE 
                c.e_id = a.e_id 
            AND c.t_id='1' 
           ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T04:55:49.940

刚刚怎么样

```
SELECT  a.*,
        b.e_desc 
FROM    val1 AS a,
        val2 AS b 
WHERE   b.e_id = a.e_id 
AND     b.t_id='1' 
```

甚至

```
SELECT  a.*,
        b.e_desc 
FROM    val1 AS a INNER JOIN
        val2 AS b ON b.e_id = a.e_id 
WHERE   b.t_id='1' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T04:55:35.817

它可以通过`JOIN`两个条件的两个表来解决。试试这个，

```
SELECT  a.*, b.e_desc
FROM    tableA a
        INNER JOIN tableB b 
           ON a.e_id = b.e_id  AND 
              a.e_id = b.t_id
WHERE b.t_id = 1 
```

# php - Web 服务器上的 mvc 配置

> ID：12274669
> 
> 赞同：0
> 
> 时间：2012-09-05T04:52:40.587
> 
> 标签：php, codeigniter, codeigniter-routing

我最近将我的 codeigniter 项目上传到我的网络服务器上。

它在一个名为 project1 的文件夹中，这是我的目录视图的样子

```
[www.myurl.com]
  |-> project1
        |-> application
        |-> css
        |-> images
        |-> js 
```

我有两个问题。

首先是我希望它在我访问 (www.myurl.com) 而不是 (www.myurl.com/project1/main_controller/index.php/welcome) 时加载我的欢迎视图。我如何摆脱所有这些垃圾？

第二个问题是当我使用`<?php echo base_url();?>`它时，它在视图源中显示得很好，但是当我点击它时，它会回显 url [www.myurl.com/project1/www.myurl.com/project1/] 为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T05:28:18.757

看起来您已将 CodeIgniter 安装到子目录中。如果你希望你的 CI 站点从根 url 加载，你应该将它复制一个目录，这样 Application & System 文件夹就在你的 web 目录的根 url 下。从那里，由 shail 发布的 .htaccess 规则（并在下面引用）应该注意删除路径中的 index.php。

```
RewriteEngine on 
RewriteCond $1 !^(index\.php|images|robots\.txt) 
RewriteRule ^(.*)$ ci/index.php/$1 [L] 
```

关于 site_url() 问题，请确保您在 application/config/config.php 中设置了 $config['base_url'] 变量，并且它包含尾部斜杠。

```
$config['base_url'] = "http://www.myurl.com/"; 
```

要进一步测试这一点，请尝试将参数传递给 site_url() 函数，如下所示：

```
echo site_url(welcome); 
```

如果一切设置正确，应该返回：[http ://www.myurl.com/welcome。](http://www.myurl.com/welcome)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T05:04:32.977

**启动和运行 CI 相当简单。其中大部分需要您编辑一些配置文件。**

您需要设置 CI 以指向应用程序的正确基本 URL。为此，请打开 system/application/config/config.php 并编辑 base_url 数组项以指向您的服务器和 CI 文件夹。查看plaincopy到剪贴板打印？

```
$config['base_url'] = "http://localhost/ci/"; 
```

目前，CI 设置将有一个名为“welcome.php”的默认控制器；您可以在 system/application/controllers 文件夹中找到它。对于本教程，删除它并打开您的 system/application/config/routes.php 文件。更改默认数组项以指向“helloworld”控制器。查看plaincopy到剪贴板打印？

```
$route['default_controller'] = "Helloworld" 
```

CI 还有一个我们不需要的视图文件。打开 system/application/view/ 文件夹并删除 welcome_message.php 文件。

您可以在此处更改默认控制器。

为了编辑 Url `http://localhost/ci/index.php/helloworld/`。你可以做一些事情来改善你的 CodeIgniter 体验——比如从 URL 中删除那个烦人的 index.php 位。您可以通过在根文件夹中创建一个 .htaccess 文件并添加以下代码来完成此任务。

RewriteCond 上的 RewriteEngine $1 !^(index.php|images|robots.txt) RewriteRule ^(.*)$ ci/index.php/$1 [L]

您还需要打开 system/application/config/ 中的 config.php 文件并将 index_page 数组项编辑为空白字符串。查看plaincopy到剪贴板打印？

```
$config['index_page'] = ""; 
```

另一个绝妙的技巧是打开 CI 解析 PHP 替代语法的能力，如果它没有被服务器启用的话。为此，请打开与之前相同的文件 system/application/config/config.php，并将 rewrite_short_tags 数组项设置为 TRUE。查看plaincopy到剪贴板打印？

```
$config['rewrite_short_tags'] = TRUE; 
```

我希望一切顺利！

# java - 在java中生成一个随机文件名

> ID：12274676
> 
> 赞同：-1
> 
> 时间：2012-09-05T04:53:29.260
> 
> 标签：java, string

我必须生成一个随机文件名，格式如下：

```
(Date time duration mob_no Type).wav 
```

其中 Type 是 String 类型。其他变量和往常一样。所有变量`Date`, `time`, `duration`, `mob_no`,`Type`都是随机的。

我试过这段代码，但它不起作用：

```
public ArrayList<String> randomFileName() throws ParseException {
    for (int i = 0; i < noOfSub; i++) {
        START_DATE.add(String.valueOf(theDay.getTime() - 360000000) + 
                       random.nextInt(9999900));
        DURATION.add(random.nextInt(9));
        A_NO.add(9000000000L + random.nextInt(999999999));
        B_NO.add(1000000000L + random.nextInt(999999999));
    }

    return fileName;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T04:56:28.667

```
String randomFileName() {
    return "8xR6reSeKgImxYl86muxnimEtA5Z.wav"; // chosen using random.org
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T04:59:10.603

如果您正在寻找一个随机名称，您可以选择使用 JDK 中的 random 函数为您生成 UUID - 否则，从日历/joda 生成日期时间并连接字符串（或者如果可能的话使用字符串缓冲区和然后转换为字符串）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T04:58:36.827

`nextLong()`您可以使用类的生成新的数据时间戳`Random`。然后，您可以使用 a`SimepleDateFormat`将其格式化为所需的格式。Duration 和 mob_no 只是要生成的另外 2 个数值。

# canvas - Raphaeljs - 将一个简单的矩形编辑成复杂的多边形

> ID：12274679
> 
> 赞同：0
> 
> 时间：2012-09-05T04:53:53.210
> 
> 标签：canvas, svg, raphael, html5-canvas, jquery-svg

背景：

我目前正在开发平面图编辑器，用户可以在其中创建房屋的平面图。

场景和问题：

有时，用户可能想要建造一个不是矩形而是 L 形的房间。我想让用户选择分割房间的特定墙壁，然后拖动分割墙壁的一部分 - 从而创建 L 形。这可以在这个令人惊叹的[站点](http://floorplanner.com/demo#assets)中最好地查看，其中可以选择房间的墙壁，然后拆分，并且可以拖动拆分部分之一。

问题：

A> 如何在 Raphaeljs 中复制此功能？请记住，稍后我将不得不访问房间的尺寸以进行一些计算。

B> 是否有任何其他方法（SVG/CANVAS 等）或任何其他库（processing.js、page.js、kinect.js、jQuery SVG 等）可以让我以更简单的方式构建平面规划器。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T10:27:20.650

我想说这种可视化可以使用 Raphael 或 Canvas 或 SVG 以相当多的努力来实现。选择应基于您的目标浏览器、性能问题以及您对这些技术的熟悉程度。

不过，请不要混淆实际的逻辑和可视化。仅将坐标存储在可视化组件中并不是一个好主意。

# c# - 将参数数组对象作为 out 传递

> ID：12274680
> 
> 赞同：0
> 
> 时间：2012-09-05T04:54:00.617
> 
> 标签：c#, wpf, generics, parameters, out

我如何要求参数数组中的所有对象都作为 out 传递？在我的以下代码中，我知道它失败了，因为我的原始参数从未被分配，因此为空。即使我认为它们会作为参考传递而无需明确说明，但它们似乎并非如此。结果，我不得不尝试将所有这些作为输出参数传递。

这是我认为重要的代码部分。

ChatController（删除了一些元素）

```
class ChatController : ControllerBase
{
    #region Views

    ChatAreaView viewChatArea;
    UserListView viewUserArea;
    MessageView viewMessageArea;
    LoginPromptView viewLoginPrompt;

    #endregion

    #region ViewModels

    ChatAreaViewModel viewModelChatArea;
    UserAreaViewModel viewModelUserArea;
    MessageAreaViewModel viewModelMessageArea;
    LoginPromptViewModel viewModelLoginPrompt;

    #endregion
    public override void CreateViewsAndViewModels()
    {
        //InitializeViewAndViewModel(out viewChatArea, out viewModelChatArea);
        //InitializeViewAndViewModel(out viewMessageArea, out viewModelMessageArea);
        //InitializeViewAndViewModel(out viewUserArea, out viewModelUserArea);
        //InitializeViewAndViewModel(out viewLoginPrompt, out viewModelLoginPrompt);

        InitializeViewsAndViewModels(new FrameworkElement[] { viewChatArea, viewUserArea, viewMessageArea, viewLoginPrompt },
                                     new object[] { viewModelChatArea, viewModelUserArea, viewModelMessageArea, viewModelLoginPrompt });
    }
} 
```

ControllerBase（删除了一些元素）

```
public abstract class ControllerBase : PrismBase
{
    public void InitializeViewAndViewModel<TView, TViewModel>(out TView view, out TViewModel viewModel)
        where TView : FrameworkElement, new()
        where TViewModel : new()
    {
        view = new TView();
        viewModel = new TViewModel();

        view.DataContext = viewModel;
    }

    public void InitializeViewsAndViewModels(FrameworkElement[] views, object[] viewModels)
    {
        if (views.Length != viewModels.Length)
            throw new ArgumentOutOfRangeException("views and viewModels must have the same number of elements.");

        for (int i = 0; i < views.Length -1 ; i++)
            InitializeViewAndViewModel(out views[i], out viewModels[i]);
    }
} 
```

问题区域在这里

```
public void InitializeViewsAndViewModels(FrameworkElement[] views, object[] viewModels)
{
} 
```

当方法返回时，我传递给方法的所有这些对象都保持为空。

```
InitializeViewsAndViewModels(new FrameworkElement[] { viewChatArea, viewUserArea, viewMessageArea, viewLoginPrompt },
                             new object[] { viewModelChatArea, viewModelUserArea, viewModelMessageArea, viewModelLoginPrompt }); 
```

我想要求将所有**视图**和**viewModels**数组对象作为 out 传递，但我似乎只能要求将整个数组本身作为 out 传递。

我可以在这里做什么？

编辑：整个问题似乎源于该方法的复数形式，如上所述。如果我摆脱了它，我只是这样做了......

```
public override void CreateViewsAndViewModels()
{
    InitializeViewAndViewModel(out viewChatArea, out viewModelChatArea);
    InitializeViewAndViewModel(out viewMessageArea, out viewModelMessageArea);
    InitializeViewAndViewModel(out viewUserArea, out viewModelUserArea);
    InitializeViewAndViewModel(out viewLoginPrompt, out viewModelLoginPrompt);

    //InitializeViewsAndViewModels(new FrameworkElement[] { viewChatArea, viewUserArea, viewMessageArea, viewLoginPrompt },
    //                             new object[] { viewModelChatArea, viewModelUserArea, viewModelMessageArea, viewModelLoginPrompt });
} 
```

一切都很顺利。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T05:10:28.120

`out`在 C#中不能有值数组。

现在您要做的事情很奇怪，即使`out`支持数组，您仍然会遇到麻烦-您正在丢失数组中的变量类型，因此没有合理的方法可以正确地更新它们。

您当前的泛型方法在派生类中有多个实现 - 每对类型一个（即您`ChatController`可以将其视为 InitializeViewAndViewModel 的 4 个不同实现，每个用于特定的视图对）。您新提出的代码必须以某种方式找到丢失的类型信息......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T05:36:51.787

使用参考。见下文：

```
class ChatController : ControllerBase
    {
        #region Views

        ChatAreaView viewChatArea;
        //UserListView viewUserArea;
        //MessageView viewMessageArea;
        //LoginPromptView viewLoginPrompt;

        #endregion

        #region ViewModels

        ChatAreaViewModel viewModelChatArea;
        //UserAreaViewModel viewModelUserArea;
        //MessageAreaViewModel viewModelMessageArea;
        //LoginPromptViewModel viewModelLoginPrompt;

        #endregion
        public void CreateViewsAndViewModels()
        {
            //InitializeViewAndViewModel(out viewChatArea, out viewModelChatArea);
            //InitializeViewAndViewModel(out viewMessageArea, out viewModelMessageArea);
            //InitializeViewAndViewModel(out viewUserArea, out viewModelUserArea);
            //InitializeViewAndViewModel(out viewLoginPrompt, out viewModelLoginPrompt);
            var a  = new FrameworkElement[] { viewChatArea };
            var b = new object[] { viewModelChatArea};
            InitializeViewsAndViewModels(a,
                                         b);
        }
    }

public abstract class ControllerBase 
    {
        public void InitializeViewAndViewModel<TView, TViewModel>(ref TView view, ref TViewModel viewModel)
            where TView : FrameworkElement, new()
            where TViewModel : new()
        {
            view = new TView();
            viewModel = new TViewModel();

            view.DataContext = viewModel;
        }

        public void InitializeViewsAndViewModels(FrameworkElement[] views, object[] viewModels)
        {
            if (views.Length != viewModels.Length)
                throw new ArgumentOutOfRangeException("views and viewModels must have the same number of elements.");

            for (int i = 0; i < views.Length; i++)
                InitializeViewAndViewModel(ref views[i], ref viewModels[i]);
        }
    } 
```

# ruby-on-rails - 为什么 link_to 方法发布，目标空白不在新选项卡中打开？

> ID：12274681
> 
> 赞同：1
> 
> 时间：2012-09-05T04:54:05.780
> 
> 标签：ruby-on-rails, ruby-on-rails-3

以下不打开新标签。相反，它会在当前选项卡上打开：

```
link_to ... :method => :post, :target => '_blank' 
```

HTML 返回：

```
<a target="_blank" rel="nofollow" data-method="post" href="/foobar/videos/abc/buy">Foobar</a> 
```

我听说您不能使用 Rails 助手发布到新窗口。直到我读到这个： [https](https://github.com/rails/rails/issues/2885) ://github.com/rails/rails/issues/2885 （虽然是 4 个月前发布的）。

解决方法也将不胜感激。然而，更重要的是，我正在寻找它为何如此行事的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T05:17:33.007

它似乎已在[https://github.com/rails/jquery-ujs/commit/888be8adcb7d609f442b3883dc722](https://github.com/rails/jquery-ujs/commit/888be8adcb7d609f442b3883dc722)中修复。

“jquery-ujs”作为“jquery-rails” gem 的一部分分发。

尝试`bundle update jquery-rails`自己到最新版本（即 2.1.1）。

# asp.net - Devexpress ASPXGridView 和 EntityFramework 4.3.1 的并发异常

> ID：12274684
> 
> 赞同：0
> 
> 时间：2012-09-05T04:54:24.117
> 
> 标签：asp.net, entity-framework, devexpress, optimistic-concurrency

## 我的问题

我有一个用于测试并发性的简单 WebForms 项目。

我在用：

```
1\. Entity Framework 4.3.1 code first approach.
2\. DevExpress ASP.net controls to visualize my data. Specifically an ASPXGridView control.
3\. MySQL as database backend. 
```

现在我遇到了并发检查的问题。

即使我是唯一一个编辑数据的用户，如果我使用 DevExpress ASPXGridView 两次编辑相同的记录，我也会遇到并发异常！

我得到的例外是： System.Data.OptimisticConcurrencyException

## 我的设置

** 为简洁起见，此处进行了简化

我的代码优先实体定义如下：

```
public class Country
{
    //Some constructors here

    [Required, ConcurrencyCheck]       
    public virtual string LastUpdate { get; set; }

    [Required, Key, DatabaseGenerated(DatabaseGeneratedOption.None)]        
    public virtual int CountryID { get; set; }

    //Various other data fields here    
} 
```

您可以看到我添加了一个名为 LastUpdate 的字段，由于设置了 [ConcurrencyCheck] 属性，正在测试并发检查。

在我的带有 DevExpress ASPXGridView 的网页上，我使用 EntityDataSource 在网格视图和实体框架之间进行绑定。网格视图正在使用弹出编辑器。我有以下事件：

```
protected void Page_Load(object sender, EventArgs e)
{            
    //Hook entity datasource to grid view
    dbgCountries.DataSource = CountriesEntityDataSource;
    dbgCountries.DataBind(); 
}          

protected void CountriesEntityDataSource_ContextCreating(object sender, EntityDataSourceContextCreatingEventArgs e)
{
    //Create and hook my DBContext class to the entity
    //datasources ObjectContext property.
    var context = new MyDBContextClass();          
    e.Context = ((IObjectContextAdapter)context ).ObjectContext;       
}

protected void dbgCountries_InitNewRow(object sender, DevExpress.Web.Data.ASPxDataInitNewRowEventArgs e)
{
    //I create a new MyDBContextClass here and use it
    //to get the next free id for the new record 
}

protected void dbgCountries_CustomErrorText(object sender, DevExpress.Web.ASPxGridView.ASPxGridViewCustomErrorTextEventArgs e)
{ 
    //My code to catch the System.Data.OptimisticConcurrencyException
    //excpetion is in here. 

    //I try to rtefresh the entity here to get the latest data from
    //database but I get an exception saying the entity is not being
    //tracked
}

protected void dbgCountries_RowValidating(object sender, DevExpress.Web.Data.ASPxDataValidationEventArgs e)
{
    //Basic validation of record update in here
}

protected void dbgCountries_RowUpdating(object sender, DevExpress.Web.Data.ASPxDataUpdatingEventArgs e)
{
    //I set the LastUpdate field (my concurrency field)
    //to the current time here 
} 
```

我还连接了一些按钮事件来测试直接并发测试。

例如

```
- Get Entity
- Update Entity
- Update DB directly with sql
- Save Entity
- Get concurrency exception as expected 
```

例如

```
- Get Entity
- Update Entity      
- Save Entity
- No issue.
- Get Entity again.
- Update Entity again.      
- Save Entity again.
- No issue. 
```

这些按钮按预期工作。只有网格更新似乎有问题。

也许是因为网格需要使用 ObjectContect 而我的实体框架类使用的是 DBContext？

## 我尝试的修复

我搜索了互联网试图找到解决方案。检查了 DevExpress 论坛，检查了 StackOverflow 上的其他帖子，互联网上的各种帖子，关于并发的 Microsoft MSDN 文章，我就是无法解决这个问题。

*   没有一个帖子像我的那样“简单”。他们都涉及其他数据。例如主/细节relashionship。自定义编辑器。等等我正在使用所有内置的 DevExpress 控件，只在我的数据库表/实体上显示一个网格视图。

*   一些帖子建议刷新实体。我试过这个，但得到一个异常，说实体没有在对象状态管理器中被跟踪。

*   我尝试通过销毁和重新创建我的对象上下文/数据库上下文来刷新实体框架，但不知何故我仍然遇到并发问题。

*   我尝试使用 DBContext 和 ObjectContext 进行刷新。都没有奏效。（objContext.Refresh（RefreshMode.StoreWins，实体）。我要么得到一个异常，如前所述]实体没有被跟踪，或者如果我告诉它只刷新未修改的实体，那么什么都不会发生（没有刷新，没有例外）

*   我尝试将我的 DBContext 设为全局，但这并不好，因为 WebForms 似乎想要在每次 Web 刷新后重新创建其整个状态并重新挂钩其网格数据上下文等。（页面加载，用户点击编辑，用户点击确定更新）

现在所有这些解决方案似乎都考虑了在并发异常之后要做什么。看到我什至不应该首先得到例外，我想他们不会有帮助。

## 建议

你们中有人对如何进行这项工作有任何建议吗？

从网格发布数据后，我是否必须强制实体框架手动刷新？（我现在才想到这个）

我的设置似乎很简单。也许我错过了一些非常明显的东西。我还没有过多地使用 WebForms 或 EntityFramework，所以我可能缺少一些简单（而且可能很明显）的解决方案？

任何帮助表示赞赏。

谢谢彼得梅斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T07:27:42.017

我设法解决了我的问题。

它可能不是最正确的解决方案，但它正在工作，并且非常感谢此时的任何进展。

## 方法

*   在 ASPXGridView 中发布数据后，我尝试刷新实体框架。许多尝试。没有工作。
*   我尝试在我的 Country 实体上使用 TimeStamp 属性，但这似乎不能很好地映射到 MySQL。（但是现在我已经解决了这个问题，我可能会再试一次）
*   然后我想也许我的 DevArt MySQL 点连接器和 MySQL 有问题。所以我切换到 MSSQL 及其标准连接器。这表明 MySQL & co 存在同样的问题。

* * *

最后，我进行了各种尝试，并注意到如果我转到我网站上的其他页面，然后再返回，问题就不会发生。

例如：

*   编辑国家并保存。没有问题。
*   切换到其他网站页面。
*   切换回国家。
*   编辑国家并保存。没有问题。

不同之处在于，如果我*不*切换页面，则第二次编辑会创建并发异常。

通过与同事进行更多测试，我预感到实体数据源的视图状态在 ASPGridView 上发布/更新后可能没有被刷新。

所以我所做的是：

```
> Set EntityDataSource.StoreOriginalValuesInViewState = FALSE 
```

这停止了​​所有并发工作，因为没有存储旧/预编辑值，因此
无法用于并发检查。

然后我想我会强制旧值成为我编辑之前编辑器中的内容。我正在使用 ASPXGridView.RowUpdating 来执行此操作。

我认为没关系，我可以使用传递给 ASPXGridView.RowUpdating 的 OldValues 来确保实体框架很好。

这样做我发现了一些非常奇怪的行为......

如果我：

```
- open edit form in browser A
- open edit form in browser B
- save changes in browser B (DB updates with new values here)
- save changes in browser A (DB updated here too. but should have been a
                            concurrency exception!) 
```

A 发布成功的原因是 A 上的 OldValues 已神奇地更新为 B 发布的新值！

请记住，A 上的编辑表单一直处于打开状态，因此它不应该在下面更新其 OldValues。我不知道为什么会这样。很奇怪。

在编辑表单关闭之前，DevExpress ASPXGridView 可能不会检索 OldValues？

* * *

无论如何，然后我想。好吧，我会解决这个奇怪的问题。为此，我在网页上创建了一个静态成员来存储我的 Country 实体的副本。

当用户打开编辑器时，我得到当前值并存储它们。

然后，当 ASPXGridView.RowUpdating 触发时，我将存储的旧值推回到 OldValues 数据中。（我也在 NewValues 数据中更新了我的 timstamp/concurrency 字段）

使用这种方法，我的并发现在可以工作了。呼啦！

我可以随心所欲地在本地进行编辑，并且不会发生冲突。如果我同时在两个浏览器中编辑，第二个要发布的浏览器会引发并发异常。

我还可以在 MySQL 和 MSSQL 之间切换，现在都可以正常工作。

* * *

## 解决方案总结

1.  设置 EntityDataSource.StoreOriginalValuesInViewState = FALSE。（我在设计器中做了这个。）
2.  创建私有成员以保存预编辑的国家/地区值

    ```
     private static Country editCountry = null; 
    ```

3.  在 ASPXGridView 上挂钩 StartRowEditing。在这里，我获取当前的国家/地区值并将它们存储为“预编辑”值。请注意， CopyFrom 只是我实体上的一个辅助方法。

    ```
     protected void dbgCountries_StartRowEditing(object sender, DevExpress.Web.Data.ASPxStartRowEditingEventArgs e)
     {
     if (editCountry == null)
     {
         editCountry = new Country();                               
     }

    var context = new MyDBContext();
    var currCountry = context.Countries.Where(c => c.CountryID == (int)(e.EditingKeyValue)).Single();
    editCountry.CopyFrom(currCountry);
    } 
    ```

4.  在 ASPXGridView 上挂钩 RowUpdating。这是我在更新继续之前确保旧值正确的地方。这确保并发将按预期工作。

    ```
    protected void dbgCountries_RowUpdating(object sender, DevExpress.Web.Data.ASPxDataUpdatingEventArgs e)
    {
    //Ensure old values are populated
    e.OldValues["RowVersion"] = editCountry.RowVersion;

    //No need to set other old values as I am only testing against
    //the one field for concurrency. 

    //On row updating ensure RowVersion is set. 
    //This is the field being used for the concurrency check.
    DateTime date = DateTime.Now;         
    var s = date.ToString("yyyy-MM-dd HH:mm:ss");                        
    e.NewValues["RowVersion"] = s;
    } 
    ```

# plone - 知道如何将数据从外部站点传递到 Ploneformgen

> ID：12274689
> 
> 赞同：0
> 
> 时间：2012-09-05T04:55:34.180
> 
> 标签：plone, ploneformgen

而 PHP 可以接受来自外部站点的传递表单数据。

plone / ploneformgen 可以做同样的事情吗？

可以通过url提交数据吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T05:59:41.130

您可以使用每个字段的“覆盖”选项卡来传递任意 TALES 表达式，例如

```
request/some_value|nothing 
```

为了根据来自浏览器请求的数据提供默认值（在这种情况下为“some_value”参数）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T16:06:10.043

您可以覆盖表单提交“操作”。不过，这将导致表单绕过所有服务器端有效性检查。

或者，研究一些将数据提交给外部服务的 PloneFormGen 插件。这些将数据重新发布到外部服务。这需要在 Python 中完成，以管理数据卫生并处理外部服务的超时问题。

# apache - Dreamhost 上的别名，http 请求/服务器错误的一般管理

> ID：12274695
> 
> 赞同：1
> 
> 时间：2012-09-05T04:56:16.093
> 
> 标签：apache, .htaccess, mod-rewrite, alias, dreamhost

我很难决定如何管理这些错误（404、500、...），当我最终决定时，我遇到了问题。这是一个很长的问题，我感谢任何人的帮助！

让我先描述一下我是如何决定设置它的。我有几个站点托管在一个共享的 Dreamhost 帐户上。在我看到的文件夹结构中，我在服务器上的所有内容都在 /home/username 下，例如，site1.com 的 Web 根目录在

```
/home/用户名/site1.com
```

我正在为 404 not found、500 等错误创建一个通用错误处理程序（php 脚本），我想将这些错误存储在我的网站的 Web 根目录之上

```
/home/用户名/error_handler/index.php
```

这样我就可以在 /home/username/.htaccess 中使用 .htaccess 文件，其中包括以下内容：

```
错误文档 404 /error_handler/index.php
错误文档 500 /error_handler/index.php
```

...还有很多

当我的任何网站上发生这些错误时，我希望将其定向到

```
/home/用户名/error_handler/index.php
```

这是我很难弄清楚的问题。上面的 ErrorDocument 指令实际上会导致 Apache 寻找

```
/home/username/site1.com/error_handler/index.php
```

无论如何，错误应该被重定向到我的错误处理 php 脚本。该脚本将使用 $_SERVER['REDIRECT_STATUS'] 来获取错误代码，然后使用 $_SERVER['REDIRECT_URL'] 和 $_SERVER['HTTP_HOST'] 来决定要做什么。它将检查是否存在特定于该站点的错误处理程序（例如：site1.com/errors/404.php）。如果此自定义页面不存在，它将输出一条更人性化和样式化的通用消息，并且可能会包含一些我的联系信息，具体取决于错误。

这样做可以让我通过这个 1 php 脚本汇集所有这些错误。我可以根据自己的喜好记录错误，或者根据需要发送电子邮件通知。它还允许我为我的所有站点设置一次 ErrorDocument Apache 指令，而不必为每个站点都设置。当我移动站点时，它也将继续工作而无需修改，因为我已经有一个系统可以扫描文件夹结构，以找出我的站点根目录在技术上真正不在网络根目录的位置。这对于其他解决方案可能是不可能的，例如对所有 404 问题使用 mod_rewrite，我知道这很常见。或者，如果可能的话，它可能很难做到。另外，我已经完成了这项工作，所以我很容易适应。

当我在我还没有域名的网站上工作时（或者域名目前已经在使用的网站），我将它们临时存储在 site1.com/dev/site3.com 中。将站点移动到 site3.com 最终将导致我必须更新 htaccess 文件，如果我为每个站点都有一个。更改域名也会这样做。

例如：存储在 site1.com/dev/site3.com 的站点将在其 htaccess 文件中包含以下内容：

```
错误文档 404 /site1.com/dev/site3.com/error/404.php
```

它必须改为：

```
错误文档 404 /site3.com/error/404.php
```

显然，这不是一项巨大的工作，但我已经管理了很多网站，而且我可能每年都会赚更多，其中 95% 将托管在我共享的 DreamHost 帐户上。他们中的大多数人至少会被移动一次。因此，从长远来看，设置自动功能将为我节省一些精力。

我已经设置了一个系统来管理我所有站点上的站点相关链接。无论该站点存在于现有站点的子目录中，还是存在于它们自己的域中，这些链接都将起作用。尽管 Web 根位置不同，它们也可以在不更改本地开发服务器的情况下工作。例如，在实时服务器上，与站点相关的 http 链接 /img/1.jpg 将解析为文件 /home/username/site1.com/img/1.jpg 而在我的本地开发服务器上，它将解析为 C :\xampp\htdocs\img\1.jpg，尽管我认为逻辑站点根目录位于 C:\xampp\htdocs\site1.com。我喜欢这个系统，正是它让我想到了根据我使用的文件结构设置一些可以自动运行的东西，就像我期望的那样。

所以，如果我能让它工作，我认为这似乎是一个非常好的系统。但我对 apache 配置、mod_rewrite 等仍然很陌生。可能有一种更简单、更好的方法来做到这一点。如果你知道一个，请告诉我。

无论如何，除了所有这些，我无法让它工作。最简单的事情是如果我可以让 ErrorDocument 指令将请求发送到 Web 根目录上方的文件夹。但路径是相对于文档根目录的 URL 路径。在 /home/username/.htaccess 中使用以下内容，

```
错误文档 404 /error_handler/index.php
```

对不存在资源的请求会导致 Apache 在以下位置查找文件

```
site1.com/error_handler/index.php
```

所以我想我应该设置一个重定向（在我所有的网站上），将这些 URL 重定向到 /home/username/error_handler。我尝试了一些东西，但无法让它们中的任何一个工作。

别名似乎是最简单的解决方案，但它必须在服务器运行时设置（不确定这是否是正确的术语 - 当服务器启动时）。在我的本地服务器上，它使用以下方法运行良好：

```
别名 /error_handler C:\xampp\htdocs\error_handler2
```

我更改了本地文件夹以测试 Alias 是否正常运行。（在本地服务器上，由 ErrorDocument 指令指定的 URL 路径实际上指向正确的文件夹，因为在我的本地服务器中，Web 根在技术上是 C:\xampp\htdocs 并且我存储了我想要使用的错误处理程序本地 C:\xampp\htdocs\error_handler\index.php)

Dreamhost 有一个网络客户端，可以创建我猜想的别名。当我尝试将 site1.com 上的文件夹 error_handler 重定向到 /home/username/error_handler 时，如果我在浏览器中键入 site1.com/error_handler，它似乎可以正常工作。但是如果我输入 site1.com/test1234（不存在），它会说尝试使用错误处理程序时出现 404 错误。此外，每次我想为新站点设置它时，我都必须通过 Web 客户端登录并点击（并等待几分钟让服务器重新启动），即使我可以让它工作。

所以我尝试让它与 mod_rewrite 一起工作，这似乎是最灵活的解决方案。我的第一次尝试看起来像这样（现在存储在 /home/username/site1.com/.htaccess 中，尽管它最终会在 /home/username/.htaccess 中：

```
重写引擎开启
RewriteRule ^error_handler/index.php$ /home/username/error_handler/index.php
```

我在上面尝试做的简单英文版本是在我的任何站点上将 error_handler/index.php 请求发送到 /home/username/error_handler/index.php。我的误解是，如果存在，替换将被视为文件路径。但是我错过了文档中说的“（或者，在 .htaccess 文件中使用重写的情况下，相对于您的文档根目录）”。所以不是重写到/home/username/error_handler/index.php，它实际上是在尝试重写到/home/username/site1.com/home/username/error_handler/index.php。

我尝试包括 Options +FollowSymLinks 因为在 Apache 文档中它说：

要在此上下文中启用重写引擎 [per-directory re-writes in htaccess]，您需要设置“RewriteEngine On”并且必须启用“Options FollowSymLinks”。如果您的管理员已禁用用户目录的 FollowSymLinks 覆盖，则您无法使用重写引擎。出于安全原因，需要此限制。

我四处搜索了一段时间，但找不到有关 Dreamhost 如何处理此问题的任何信息（可能是因为我不知道在哪里寻找）。

我尝试了 RewriteBase，因为在 Apache 文档中它是这样说的：

“当您在每个目录 (htaccess) 上下文中的替换中使用相对路径时，需要此指令，除非以下任一条件为真：

原始请求和替换位于 DocumentRoot 下（而不是通过其他方式（例如别名）可访问）。”

因为这应该是一个 URL 路径，所以在我的情况下它应该是 RewriteBase /，因为我所有的重定向都来自 site1.com/error_handler。我还尝试了 Rewrite Base /home/username 和 RewriteRule ^error_handler/index.php$ error_handler/index.php。但是，Rewrite Base 是相对于文档根目录的 URL 路径。所以我仍然需要使用别名之类的东西。上述文档中引用的含义是可以使用 mod_rewrite 将内容发送到 Web 根目录之上。我不知道的许多事情之一是除了 Alias 之外的“其他含义”可能是什么。我相信 Alias 可能不是 Dreamhost 的一个选项。至少我无法理解它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T06:00:16.820

为什么不在站点根目录中使用错误页面，然后包含来自共享部分的实际文件？

# android - 就隐私而言，安装 Android 设备管理应用程序是否“安全”？

> ID：12274703
> 
> 赞同：7
> 
> 时间：2012-09-05T04:57:36.870
> 
> 标签：android, device, administration, privacy, mdm

在我的个人设备上安装 Android 设备管理应用程序是否“安全”？我的公司可以使用该应用程序读取我的私人数据吗？

我的公司最近采用了一项政策，即在每位员工的智能手机上安装企业应用程序。该应用程序应从公司运营的第三方市场安装，并且需要设备管理权限。

尽管该应用程序不需要“root”权限，并且设备管理 API 与读取手机内的数据无关，但我仍然不确定我的个人数据对我的公司是否安全。

仅供参考，API 包括更改密码、清除数据、禁用相机等。（[链接](http://developer.android.com/guide/topics/admin/device-admin.html)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T06:24:19.323

正如您自己提到的，设备管理 API 本身与电话数据无关。授予此权限的权限如下：

USES_ENCRYPTED_STORAGE 此设备管理员可以使用的一种策略：要求对存储的数据进行加密。

USES_POLICY_DISABLE_CAMERA 此设备管理员可以使用的一种策略：禁止使用所有设备摄像头。

USES_POLICY_EXPIRE_PASSWORD 此设备管理员可以使用的一种策略：强制用户在管理员定义的时间限制后更改密码。

USES_POLICY_FORCE_LOCK 此设备管理员可以使用的一种策略：能够通过lockNow() 强制设备锁定或通过setMaximumTimeToLock(ComponentName, long) 限制设备的最大锁定超时。

USES_POLICY_LIMIT_PASSWORD 此设备管理员可以使用的一种策略：通过 setPasswordQuality(ComponentName, int) 和 setPasswordMinimumLength(ComponentName, int) 限制用户可以选择的密码。

USES_POLICY_RESET_PASSWORD 此设备管理员可以使用的一种策略：能够通过 resetPassword(String, int) 重置用户密码。

USES_POLICY_WATCH_LOGIN 此设备管理员可以使用的一种策略：能够通过 ACTION_PASSWORD_FAILED、ACTION_PASSWORD_SUCCEEDED 和 getCurrentFailedPasswordAttempts() 监视用户的登录尝试。

USES_POLICY_WIPE_DATA - 此设备管理员可以使用的一种策略：能够通过wipeData(int) 将设备恢复出厂设置，擦除所有用户数据。

可能与“隐私”明确相关的一个可能是监控能力，密码尝试失败的次数，输入正确密码的时间和最低安全密码。除此之外，它并不比任何其他应用程序更令人担忧。

话虽如此，这绝不会使该应用程序“安全”地安装。您应该检查的一些权限将是所有 READ_ 权限。[http://developer.android.com/reference/android/Manifest.permission.html](http://developer.android.com/reference/android/Manifest.permission.html)。这些将使应用程序可以直接访问大量个人信息，例如何时拨打电话给谁，您接收和发送什么短信。READ_EXTERNAL_STORAGE 也是另一个大问题。它允许应用程序读取外部存储上的任何数据，这些数据通常可能包含个人数据，即下载的图像、屏幕截图等，甚至是编码不佳的应用程序的应用程序数据（市场上有很多只是以明文形式留下凭据）您的 SD 卡）。

RECEIVE_ 权限同样能够拦截传入的消息/呼叫/mms 等。

USE_CREDENTIALS 显然也存在隐私风险，因为它可以使用您拥有的令牌从外部 API 源（即您的 Gmail）请求数据

还有许多甚至不需要权限的权限。例如 getPackageManager() 允许应用程序找出您下载的应用程序的完整列表。所以他们知道你安装了愤怒的小鸟或任何其他顽皮的应用程序；）

我想说的是，这种许可本身并不是对隐私的大红灯。但事实上他们正在安装一个应用程序（除非开源和 MD5 验证），已经有许多其他方法可以访问“私人”信息。不安装应用程序将始终提供比安装应用程序更多的保护。希望有帮助。

# android-widget - 应用程序显示在应用程序列表中，但小部件未出现在小部件列表中（在 Android 2.2 手机上）

> ID：12274706
> 
> 赞同：2
> 
> 时间：2012-09-05T04:57:58.803
> 
> 标签：android-widget

我创建了一个 Android 小部件应用程序，它可以在我的 HTC Sensation 上使用 Android 4 正常安装。我还使用 AVD 模拟器对其进行了测试，它在 Android 2.2、Android 2.33 和 Android 4 模拟器上运行良好。

当一位同事在他的 Android 2.2 手机上安装它时，该应用程序会安装并出现欢迎页面，但是相关的小部件从未出现在小部件列表中，因此他无法将其添加到他的主屏幕。他说该应用程序安装在手机上而不是 SD 卡上，并且他打开了通常需要使小部件出现在列表中的应用程序。

有谁知道这是怎么发生的，或者我可以做些什么来使安装更加健壮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T06:46:53.563

该问题似乎是由首先在 SD 卡上安装应用程序引起的。然后将其移至手机以尝试使小部件工作，但小部件未显示在小部件列表中。手机重启解决了。

# python - -9999 作为 numpy.genfromtxt() 的缺失值

> ID：12274709
> 
> 赞同：4
> 
> 时间：2012-09-05T04:58:32.740
> 
> 标签：python, numpy, genfromtxt

假设我有一个包含内容的哑文本文件：

```
Year    Recon   Observed
1505    162.38        23      
1506     46.14     -9999      
1507    147.49     -9999 
```

`-9999`用于表示缺失值（不要问）。

所以，我应该能够将它读入一个 Numpy 数组：

```
import numpy as np
x = np.genfromtxt("file.txt", dtype = None, names = True, missing_values = -9999) 
```

并让我所有的小`-9999`s 变成 numpy.nan。但是，我得到：

```
>>> x
array([(1409, 112.38, 23), (1410, 56.14, -9999), (1411, 145.49, -9999)], 
  dtype=[('Year', '<i8'), ('Recon', '<f8'), ('Observed', '<i8')]) 
```

... 那是不对的...

我错过了什么吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-05T10:27:49.993

不，你没有做错任何事。使用该`missing_values`参数确实`np.genfromtxt`表明相应的值应标记为“缺失/无效”。问题是，仅当您使用参数时才支持处理缺失值（我可能应该在[文档](http://docs.scipy.org/doc/numpy-1.6.0/user/basics.io.genfromtxt.html)`usemask=True`中更清楚地说明这一点，我的错）。

，`usemask=True`输出是一个掩码数组。您可以将其转换为常规`ndarray`，并将缺失值替换`np.nan`为 method `.filled(np.nan)`。

但是要小心：如果您的列被检测为具有`int`dtype 并且您尝试用 填充其缺失值`np.nan`，您将不会得到您所期望的（`np.nan`仅支持 float 列）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T05:09:00.800

试：

```
>>> x = np.genfromtxt("file.txt",names = True, missing_values = "-9999", dtype=None)
>>> x
array([(1505, 162.38, 23), (1506, 46.14, -9999), (1507, 147.49, -9999)], 
      dtype=[('Year', '<i8'), ('Recon', '<f8'), ('Observed', '<i8')]) 
```

没有给出正确答案。所以只是把它变成一个字符串并没有帮助。但是，如果添加了一个附加标志，`usemask=True`您将获得：

```
>>> x = np.genfromtxt("file.txt",names = True, missing_values = -9999, dtype=None, usemask=True)
>>> x
masked_array(data = [(1505, 162.38, 23) (1506, 46.14, --) (1507, 147.49, --)],
             mask = [(False, False, False) (False, False, True) (False, False, True)],
       fill_value = (999999, 1e+20, 999999),
            dtype = [('Year', '<i8'), ('Recon', '<f8'), ('Observed', '<i8')]) 
```

它在 MaskedArray 中提供了您想要的东西，无论如何它可能对您有用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-05T05:06:19.040

[SciPy](http://docs.scipy.org/doc/numpy/user/basics.io.genfromtxt.html)的numpy 文档建议 missing_value 应该是一个字符串，可以按照您想要的方式工作。直接数值似乎被解释为列索引。

# sockets - 无法建立连接，因为目标机器主动拒绝它 127.0.0.1:56789

> ID：12274716
> 
> 赞同：3
> 
> 时间：2012-09-05T04:59:31.410
> 
> 标签：sockets, connection

我的套接字连接出现问题。我在 Project 中有一个 Web 服务，它连接到安装在同一台服务器中的服务。该服务正在崩溃，它已被我们项目中的另一个监控应用程序成功重新启动。但是，当 web 方法尝试访问服务中的方法时，我得到了 web 异常。但是当我们手动重新启动服务时，它工作正常。这是我得到的网络异常和使用的代码。

**代码使用**

```
string url = "http://localhost:56789/" + SERVICE_NAME;
m_target = Activator.GetObject(typeof(IWebServiceInterface), url) as IWebServiceInterface;
if (IPAddress.TryParse(ipAddress, out ip))
 {
   status = m_target.Connect(Session.SessionID, username, stationId, ip);           
 } 
```

**网络异常**

> 在 [0] 处重新引发异常：在 System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 类型) 在 TerminalInterface.IWebServiceInterface 的 System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)。连接（字符串 sessionId，字符串用户名，Int32 stationId，IPAddress ipAddress）在 myWebProject.WebServices.Terminal.Service.Connect（字符串用户名，Int32 stationId，字符串 ipAddress）18:42:28.953 ProLog：System.Net.WebException：无法连接到远程服务器 ---> System.Net.Sockets.SocketException: 无法建立连接，因为目标机器在 System.Net.Sockets.Socket.DoConnect(EndPoint endPointSnapshot, SocketAddress socketAddress) 处主动拒绝了 127.0.0.1:56789在 System.Net.Sockets.Socket。在 System.Net.ServicePoint.ConnectSocketInternal（布尔连接失败，套接字 s4，套接字 s6，套接字和套接字，IPAddress 和地址，ConnectSocketState 状态，IAsyncResult asyncResult，Int32 超时，异常和异常）的内部连接（端点 remoteEP）--- 内部异常堆栈跟踪结束---
> 
> 服务器堆栈跟踪：System.Net.HttpWebRequest.GetRequestStream() at System.Runtime.Remoting.Channels.Http.HttpClientTransportSink.ProcessAndSend(IMessage msg, ITransportHeaders headers, Stream inputStream) at System.Runtime.Remoting.Channels.Http.HttpClientTransportSink System.Runtime.Remoting.Channels.SoapClientFormatterSink.SyncProcessMessage（IMessage 消息）处的 .ProcessMessage（IMessage 消息，ITransportHeaders requestHeaders，流 requestStream，ITransportHeaders& responseHeaders，Stream& responseStream）

# java - 在 struts 1.x 中导出为 pdf

> ID：12274721
> 
> 赞同：0
> 
> 时间：2012-09-05T05:00:32.300
> 
> 标签：java, struts, export-to-pdf

我有一些值要导出到 PDF，我如何在 struts 中做到这一点？

我想执行以下操作，当用户单击按钮或链接时有选项按钮或链接，而不是用户应该获得下载选项来下载导出的 PDF 文件。

我有一个需要导出为 PDF 的结果集。

请帮助我如何去做。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T09:34:04.297

看看这个动作类的例子，它可能会对你有所帮助。

```
 import javax.servlet.http.HttpServletRequest;
       import javax.servlet.http.HttpServletResponse;
       import org.apache.struts.action.ActionForm;
       import org.apache.struts.action.ActionForward;
       import org.apache.struts.action.ActionMapping;
       import com.lowagie.text.pdf.*;
       import com.lowagie.text.*;
       import java.io.*;

        public class download extends org.apache.struts.action.Action {

        /* forward name="success" path="" */
        private static final String SUCCESS = "success";

        @Override
        public ActionForward execute(ActionMapping mapping, ActionForm form,
        HttpServletRequest request, HttpServletResponse response)
        throws Exception {
        Document document=new Document();
        System.out.println(clientIp);
        response.setContentType("application/octet-stream");
        response.setHeader("Content-Disposition","attachment;filename=temp.pdf");
        try
    {
    OutputStream out = response.getOutputStream();
    PdfWriter.getInstance(document,out);
            document.open();
            document.add(new Paragraph("Hello Pdf"));
            document.close();

    }
        finally
        {
          return mapping.findForward(SUCCESS);
        }
    } 
```

还要根据它更新你的 struts-config.xml。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T05:48:54.560

这是一个可以帮助你做你想做的事的例子：

```
import java.io.*;
import java.sql.*;
import com.lowagie.text.*;
import com.lowagie.text.pdf.*;

public class CreatePDF{
    public static void main(String arg[])throws Exception{
        Document document = new Document();
        PdfWriter.getInstance(document, new FileOutputStream("C:/data.pdf"));

        document.open();

        PdfPTable table = new PdfPTable(2);
        table.addCell("Name");
        table.addCell("Address");

        Class.forName("com.mysql.jdbc.Driver");
        Connection con = DriverManager.getConnection(
                                        "jdbc:mysql://localhost:3306/test",
                                        "root", "root");

        Statement st = con.createStatement();
        ResultSet rs = st.executeQuery("Select * from data");

        while(rs.next()) {
            table.addCell(rs.getString("name"));
            table.addCell(rs.getString("address"));
        }

        document.add(table);
        document.close();
    }
} 
```

但在实施之前，您必须将其`itext.jar`放入您的`WEB-INF/lib`文件夹中。而且您还发现了很多方法来操作您的 pdf 文件。

# java - 如何从jsp的下拉列表中选择一个选项？

> ID：12274723
> 
> 赞同：3
> 
> 时间：2012-09-05T05:00:41.020
> 
> 标签：java, jsp

在我的项目中。我想从数据库中填充 jsp 的下拉列表。

```
<select id="names" name="names"> <c:forEach items="${names}" var="names">
        <option><c:out value="${names}"/></option>
    </c:forEach>
</select> 
```

这`${names}`是来自数据库的名称列表。我想在下拉列表中动态选择一个选项。假设数据库中有三个名字 Rohan、Dean、Justin。如果 Dean 已登录，我想选择选项 Dean as selected。

我尝试这样的代码，但这不起作用。

```
<option value="${names}" ${names == names ? 'selected' : ''}>${names}</option> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T05:13:30.233

假设 loggedInUser 变量保存当前登录用户的 String 值，请尝试这样。

```
<select id="names" name="names">
<c:forEach items="${names}" var="names">

    <c:when test="${loggedInUser eq names}">    
        <option value ="<c:out value="${names}"/>" selected="selected">${names}</option>
    </c:when>
    <c:otherwise>
        <option><c:out value="${names}"/></option> 
    </c:otherwise>  
</c:forEach> 
```

# azure - Windows Azure blob 存储和 URL 重写

> ID：12274725
> 
> 赞同：3
> 
> 时间：2012-09-05T05:00:55.667
> 
> 标签：azure, url-rewriting, azure-storage

我需要的是为请求的 blob 重写 URL，即应该提供 [http://myaccount.blob.core.windows.net/clients/](http://myaccount.blob.core.windows.net/clients/) {client-name}/images/imagefile.jpg 而不是[http://myaccount .blob.core.windows.net/clients/images/imagefile.jpg](http://myaccount.blob.core.windows.net/clients/images/imagefile.jpg)

URL 中的客户端名称是对 SEO URL 的请求，因为文件名是唯一的，我希望将 blob 名称作为 images/imagefile.jpg 而不是 {client-name}/images/imagefile.jpg 并使用一些东西就像 IIS 中的 URL 重写一样。如果客户端更改它的名称会很痛苦，因为我无法重命名 blob，我必须创建副本并删除旧 blob。这可能需要一分钟以上，我们负担不起。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T05:52:00.393

您不能对存储帐户使用 URL 重写之类的东西。您只能将自定义域映射到您的存储帐户。例如，不要使用以下方式引用 blob：[http://myaccount.blob.core.windows.net/](http://myaccount.blob.core.windows.net/) ...您可以将它们映射到[http://img.yourdomain.com/](http://img.yourdomain.com/) ...您还可以使用[Azure CDN](http://msdn.microsoft.com/en-us/library/windowsazure/ff919705.aspx)以获得更好的性能和用户体验！

此外，如果您确实关心 SEO，您还必须考虑不仅要“重命名” blob，还要使用 HTTP 301 从旧 blob 重定向到新 blob。这对于 Azure 存储服务也是不可能的。我建议您使用 client-id 而不是 client-name

**更新**

您“可以”重新命名 blob，类似于重命名文件的方式。鉴于您的要求 - 如果您想“快速”重命名大量图像，无论如何您都必须编写简单的“服务”，因为我也想不出另一种方法来重命名文件系统上的 1000 个文件。有了这些斑点，虽然很遥远，但它几乎是一样的。你错了，你必须将 blob 保存在机器上。自 2011 年 11 月发布（我认为）以来，有一个名为[CopyFromBlob](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storageclient.cloudblob.copyfromblob.aspx)的新功能（CloudBlob 实例上的方法） 。[以下是如何重命名 blob 的示例。](http://dotnetfriendly.blogspot.com/2012/01/how-to-rename-blob-on-azure.html). 这样，您甚至可以在不同的帐户周围轻松移动 blob，而无需先下载内容。是的，它可能比使用本地文件系统需要更长的时间。

想想 Azure 存储是什么。大规模可扩展、可靠的存储即服务。您有 100TB（如果需要，可能会增加），本地 3 个副本 + 另一个地理区域中的一个副本。CDN 支持全球超过 24 个节点的海量存储。我不认为重命名是最需要的。

# php - 将 Web 根目录中的图像文件包含到 HTML 中

> ID：12274726
> 
> 赞同：1
> 
> 时间：2012-09-05T05:01:00.750
> 
> 标签：php, html

我喜欢包含来自网络根目录（www）的图像。在 HTML 中，我使用以下代码：

```
<img src="images/logo.png" alt="logo" /> 
```

但是上面的代码是从当前目录中寻找图像，然后是 images/logo.png 我不想在我的 html 代码中包含绝对路径。有什么简单的方法可以做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T05:08:53.917

您可以使用以斜杠开头的相对于 Web 根目录的路径。

```
<img src="/images/logo.png" alt="logo" /> 
```

正如您所发现的，没有斜线的开头是相对于当前文档的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T05:04:30.880

```
<img src="../../../images/logo.png" alt="logo" /> 
```

试试这样。每个“..”将用于去父目录

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T05:21:23.023

```
<img src="/images/logo.png" alt="logo" /> 
```

你必须以这种方式提及。原因是当你像这样提到没有斜线的路径时

```
`<img src="images/logo.png" alt="logo" />` 
```

它会将其视为从根开始的路径。但是您实际上并没有提供完整的路径。不带斜线的程序是

```
<img src="c:/wamp/www/{proj name}/images/logo.png" alt="logo" /> 
```

所以最好以“/”开头的第一个

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-05T05:08:46.683

[如何在php中将图像从相对目录包含到根目录](https://stackoverflow.com/questions/10092932/how-to-include-the-image-from-the-relative-directory-to-a-root-directory-in-php)

# ipad - 用MonoTouch(monodevelop)如何调试iPad？

> ID：12274729
> 
> 赞同：2
> 
> 时间：2012-09-05T05:01:14.737
> 
> 标签：ipad, xamarin.ios, monodevelop

我找不到任何选项（尝试了项目/解决方案选项下的所有选项）来调试我的 iPad。所有配置仅显示 iPhone。我似乎有一些评论认为它似乎与版本相关？我只是检查更新，我似乎是最新的。3.0.3.5

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T06:15:08.723

只需进入菜单`project`-> `iPhone simulator Target`-> 选择`iPad simulator`。
或转到菜单`Run`-> `Run With`-> `iPad simulator`。
希望这有帮助！

**更新**：
另一个选项可能对您的情况有所帮助
转到`project option`（双击项目名称）-> `iPhone build`->尝试选择另一个 sdk 版本（您能看到哪个版本？）。
然后去`iPhone Application`-> `Summary tab`-> 选择 Device iPad() 并且`Deployment target`是 3.2（3.2 是 iPad 的 SDK 版本，如果看不到，我想你应该更新你的 Xcode 和 sdk）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T07:48:49.737

为了完整起见，来自 Xamarin 的 ChrisNTR 说：

> 您没有看到这些选项的原因是因为您选择了 MWC.Core.MT（类库），而不是根据 Rolf 的屏幕截图选择的实际 MonoTouch 项目（MWC.iOS）。

:)

# templates - 在函数指针声明中传递的模板参数

> ID：12274731
> 
> 赞同：0
> 
> 时间：2012-09-05T05:01:41.457
> 
> 标签：templates, function-pointers

也许它在这个论坛太简单了。但无法通过这个。请让我知道以下声明有什么问题。

```
class Temp
{
public :
        template<class T>
        typedef void (*set_data)(T* data) ;
}; 
```

给我下面的“typedef”错误模板声明

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T08:30:39.503

typedef 不能被模板化。您为此使用别名模板

```
template<typename T>
using set_data = void(*)(T*); 
```

# javascript - 间隔仍在触发但无法访问

> ID：12274732
> 
> 赞同：0
> 
> 时间：2012-09-05T05:01:53.963
> 
> 标签：javascript

我有一个用`setInterval`called创建的变量`cycle1`。它是在`setInterval`一个原型函数内部创建的一个名为 的对象`eGi`，这与`$_`. 创建它后，它仍然会触发，但脚本的其余部分和控制台无法访问。当我尝试从另一个原型函数中清除此间隔时，没有任何反应。

```
eGi.prototype.startGame = function() {
    //other code...
    if (somethingOrOther) { 
        var somethingElse = confirm("start interval?");
        if (somethingElse) {
            this.cycle1 = setInterval($_.cycle,toMS(INTERVAL_SECONDS));
        }
    } else {
        this.cycle1 = setInterval($_.cycle,toMS(INTERVAL_SECONDS));
    }
}; 
```

然后当我尝试在另一个函数中停止它时

```
eGi.prototype.gameOver = function() {
    clearInterval(this.cycle1);
    //other code...
    if (restart) {
        $_.startGame();
    } else {
        $_.mainMenu();
    }
}; 
```

它永远不会被清除，并且似乎在`$_.startGame`. 我什至无法使用实例变量从 Chrome 控制台访问`$_.cycle1`它`eGi`，`egi.cycle1`. 奇怪的是，这适用于访问属于我的`eGi`对象的任何其他变量：

```
var eGi = function(console,cDom,ctxt,game,devMode) {
    $_ = this;
    this.game = game;
    this.cDom = cDom; //specifically, these objects control the canvas' DOM
    this.ctxt = ctxt; //and the CanvasRenderingContext2D
}
eGi.prototype.mainMenu = function() {
    this.ctxt.fillText("Hello",250,250); //this works just fine
    //etc
}; 
```

为什么不清零？

完整的代码/游戏[在这里](http://somekidwithhtml.webs.com/games/asteroids/)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T05:35:14.420

这是一个不错的游戏...

问题是您在游戏结束时指的是“this”，它不包含对cycle1（未定义）的引用。

相反，您必须将“cycle1”存储为可以从其他函数引用的对象的一部分（在本例中为游戏结束）

将变量设为全局变量并不是一件好事。相反，您可以将“cycle1”存储为 eGi 或任何此类命名空间或对象的一部分。

**参考这里（工作代码）：[JSFiddle implementation](http://jsfiddle.net/gbsandeep/aVaGS/)**

*Javascript 代码（开始和停止是输入按钮）*

```
var eGi = {};

$('#start').click(function start() {
var somethingElse = confirm("start interval?");
if (somethingElse) {
    eGi.cycle1 = setInterval(function(){
        console.log('Running...');
    },1000);
}
});

$('#stop').click(function stop(){
      clearInterval(eGi.cycle1);
    });
​ 
```

# php - 使用 Bisna/Doctrine2 处理封闭的 EntityManager

> ID：12274736
> 
> 赞同：9
> 
> 时间：2012-09-05T05:02:00.187
> 
> 标签：php, zend-framework, orm, doctrine-orm

因此，在使用 Doctrine2 违反完整性约束后，EntityManager 喜欢以一种无法继续使用所述 EntityManager 的方式关闭。普遍的想法似乎是您应该创建一个新的 EntityManager 而不是被允许捕获这个简单的异常并以优雅的方式处理它（伙计们/讽刺的奇妙设计）。

但是，当使用带有封闭实体管理器的 Bisna 库/ZF 1.12 时会出现问题。Bisna 库不提供公共方法来创建具有相同名称（即“默认”）的新 EntityManager，因为它已在 Container 类中关闭。

我的问题是处理这个问题的最佳方法是什么。必须有一种方法可以在违反完整性约束后优雅地恢复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T09:20:01.090

与其试图从这些情况中恢复，不如专注于*防止*违反完整性约束：

*   如果您遇到外键约束，您就没有以正确的方式将实体绑定在一起。
*   如果遇到唯一约束，则应在尝试持久化之前检查数据库是否存在重复数据。
*   如果您遇到其他类型的约束并且不知道如何防止它，请询问:)

**更新：**

Doctrine2 关闭 EntityManager 的原因是因为在大多数情况下它不再安全使用。它的 UnitOfWork 包含无法完成的操作（因此引发异常）。

您是正确的，Bisna 库不支持创建新的 EntityManager。您可以扩展它以自己实现此类功能。

另一种解决方案是[手动处理事务](http://docs.doctrine-project.org/en/2.0.x/reference/transactions-and-concurrency.html#approach-2-explicitly)：

```
$em->getConnection()->beginTransaction(); // suspend auto-commit
try {
    // do some work
    $user = new User;
    $user->setName('George');
    $em->persist($user);
    $em->flush();
    $em->getConnection()->commit();
} catch (Exception $e) {
    $em->getConnection()->rollback();
    $em->clear();  // in stead of $em->close();
    throw $e;
} 
```

通过替换`$em->close()`为`$em->clear()`您保持 EntityManager 打开并清洁以再次使用。

我**强烈建议您***关闭*或*清除*EntityManager ，因为其中的数据（几乎总是）不再可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-30T15:21:51.547

手动处理交易似乎对我没有用。即使我只使用 clear 方法，Doctrine 仍然关闭了实体管理器。我分叉了 Bisna 并对 Container 类进行了一些修改，添加了一个“resetEntityManager”方法，它似乎工作得很好。

所以现在我的代码如下所示：

```
try {
    $user = new User;
    $user->setName('George');
    $em->persist($user);
    $em->flush();
} catch (Exception $e) {
    $dc = \Zend_Registry::get('doctrine'); //returns Bisna\Doctrine\Container
    $em = $dc->resetEntityManager();  //returns the new instance
    throw $e;
} 
```

修改后的 Container 类在这里：

[https://github.com/ajlozier/zendframework1-doctrine2/blob/ea46703e909149cba43edca56c91d5de2ab7a7f9/library/Bisna/Doctrine/Container.php](https://github.com/ajlozier/zendframework1-doctrine2/blob/ea46703e909149cba43edca56c91d5de2ab7a7f9/library/Bisna/Doctrine/Container.php)

# ruby-on-rails - 获取：保存具有多个回形针附件的模型时未定义的方法“stringify_keys”。（RoR、回形针、S3）

> ID：12274737
> 
> 赞同：0
> 
> 时间：2012-09-05T05:02:02.750
> 
> 标签：ruby-on-rails, ruby, amazon-s3, paperclip

编辑：通过将 s3 凭据直接包含在回形针模型（资产）中解决了以下问题，如下所示：

```
 :s3_credentials => { :access_key_id     => 'AAAAAAAAAOKSSISVNQ', 
                       :secret_access_key => 'AAAAAAAAAAAAAAAAAAA1eWYh0au8Pg4bOnAmmX' ,
                       :bucket => 'my_bucket_name' }, 
```

将图像上传到 S3 时，现在出现了一个新问题：** AWS::Core::Client::NetworkError ** app/controllers/users/registrations_controller.rb:9:in `update'

这发生在我的本地 Windows 7 机器上，带有 rails 服务器，试图上传到我的 S3 存储桶。

* * *

原始问题：

我正在尝试使用回形针上传多个图像（资产），并将它们与我的用户模型一起保存在控制器更新操作中。[我跟着这个回形针 S3 教程： http](http://webtempest.com/how-to-allow-image-uploads-in-rails-on-heroku/) ://webtempest.com/how-to-allow-image-uploads-in-rails-on-heroku/

关于 Paperclip 的这个确切错误，我找到了 10 个左右不同的答案，但没有一个能解决我的问题。

**如果我从我的资产模型中注释掉 S3 配置行，错误就会消失。**

错误发生在我的registration_controller 中的更新操作中：

```
**undefined method `stringify_keys' for #<String:0x2a522d8>
    app/controllers/users/registrations_controller.rb:8:in `update'**

    {"utf8"=>"✓",
     "_method"=>"put",
     "authenticity_token"=>"ACFzngW4IXpuUDXutwHDCbpCuTjx2sFrZpcwBqt31LU=",
     "user"=>{"nickname"=>"newuser1",
     "first_name"=>"111",
     "last_name"=>"222",
     "birth_date"=>"2012-01-01 00:00:00.000000",
     "email"=>"my_email@gmail.com",
     "assets_attributes"=>{"0"=>{"asset"=>#<ActionDispatch::Http::UploadedFile:0x2a97a70 @original_filename="CIMG6275.JPG",
     @content_type="image/jpeg",
     @headers="Content-Disposition: form-data; name=\"user[assets_attributes][0][asset]\"; <br/>filename=\"CIMG6275.JPG\"\r\nContent-Type: image/jpeg\r\n",
     @tempfile=#<File:C:/Users/AA/AppData/Local/Temp/RackMultipart20120905-7504-7sivk1>>}},
     "instrument_ids"=>["1",
     "2",
     "3"],
     "id"=>"9"},
     "commit"=>"Update"} 
```

这是我的用户模型中重要的部分：

```
 class User < ActiveRecord::Base
      devise :database_authenticatable, :registerable,
             :recoverable, :rememberable, :trackable, :validatable 
      attr_accessible :id, :email, :password, :password_confirmation, :remember_me, 
           first_name, :last_name, :birth_date, :nickname, :instrument_ids, :assets,:assets_attributes 

      has_many :assets

      accepts_nested_attributes_for :assets, :allow_destroy => true
      ... 
```

资产模型（这是附件回形针对象）：

```
 class Asset < ActiveRecord::Base
      belongs_to :user
      has_attached_file :asset, 
    :whiny => false, 
          :styles => { :large=>"640x480g", :medium => "300x300>", :thumb => "100x100>" },
          :storage => :s3,
          :s3_credentials => "#{Rails.root}/config/s3.yml",
          :path => ":attachment/:id/:style.:extension",
          :bucket => 'name_of_my_bucket'
    end 
```

我的控制器更新代码：

```
 class Users::RegistrationsController < Devise::RegistrationsController
      public 
      def update
        params[:user][:instrument_ids] ||= []
        @user = User.find(params[:user][:id])   
         if @user.update_without_password(params[:user])   
            respond_to do |format|
              format.html { redirect_to root_path }
              format.xml  { head :ok }
            end
          else
            respond_to do |format|
              format.html { render :action => "edit", :layout => "dialog" }
              format.xml  { render :xml => @user.errors, :status => :unprocessable_entity }
            end
          end
      end
      ... 
```

重要的用户视图部分：

```
 <%= form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => { :method => :put, :multipart => true }) do |f| %> 
      <%= devise_error_messages! %>
        <% counter = 1 %>
        <%= f.fields_for :assets do |asset_fields| %>
            <% if asset_fields.object.new_record? %>
                <%= f.label "Image #{counter}" %>
                <% counter = counter + 1 %>
                <%= asset_fields.file_field :asset %>
                <%= asset_fields.label :asset_file_name %>
            <% end %>
        <% end %> 
```

schema.rb 文件中的 Asset 模型：

```
 create_table "assets", :force =&gt; true do |t|
        t.string   "asset_file_name"
        t.string   "asset_content_type"
        t.integer  "asset_file_size"
        t.datetime "asset_updated_at"
        t.integer  "user_id"
        t.datetime "created_at",         :null =&gt; false
        t.datetime "updated_at",         :null =&gt; false
      end 
```

最后，gemfile 的一部分：

```
 gem 'jquery-rails'
    gem 'aws-s3'
    gem 'aws-sdk'
    gem 'devise'
    gem 'cancan'
    gem 'omniauth-facebook'
    gem 'omniauth'
    gem 'roo'
    gem 'client_side_validations'
    gem 'sqlite3'
    gem 'nifty-generators'
    gem 'paperclip' 
```

s3.yml: access_key_id: AKUAJO4RGQ4TKSSIQVNB
secret_access_key: UGiDBv2rohLJdIHNSQK3N1eWYh0au8Pg4bOnAxxY
bucket: my_bucket_name

我在上面修改了几个字符只是为了安全起见

提前致谢， 亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T14:40:39.743

看来，您需要在 s3.yml 中定义适当的环境

从以下位置编辑 s3.yml 文件：

```
access_key_id: AKUAJO4RGQ4TKSSIQVNB 
secret_access_key: UGiDBv2rohLJdIHNSQK3N1eWYh0au8Pg4bOnAxxY
bucket: my_bucket_name 
```

至：

```
development:
  access_key_id: AKUAJO4RGQ4TKSSIQVNB 
  secret_access_key: UGiDBv2rohLJdIHNSQK3N1eWYh0au8Pg4bOnAxxY
  bucket: my_bucket_name

production:
  access_key_id: AKUAJO4RGQ4TKSSIQVNB 
  secret_access_key: UGiDBv2rohLJdIHNSQK3N1eWYh0au8Pg4bOnAxxY
  bucket: my_bucket_name 
```

# javascript - 获取托管设备的 JavaScript 地理位置

> ID：12274739
> 
> 赞同：0
> 
> 时间：2012-09-05T05:02:17.160
> 
> 标签：javascript, node.js, geolocation

我希望返回的坐标具有极高的准确性，`navigator.geolocation.getCurrentPosition`但不是*客户端机器的位置*，而是*主机机器的*. 我发现的任何基于 IP 的解决方案都*非常*缺乏准确性（意料之中）。

设想一种**“查找我的 iPhone”**服务类型，但适用于任何设备。您访问某个 URL，您可以在该 URL 中看到您放置该技术的任何位置。如果我使用**Node.js**或其他方式进行开发，是否有办法公开此类（我想是低级）信息？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T05:12:41.817

主机只是运行一些服务器软件的计算机；他们不一定知道他们在哪里。您可以将位置数据保存在特定服务器上以供客户端访问，但是如果服务器不告诉客户端，则客户端无法确定给定服务器的物理位置（除了根据您提到的 IP 进行猜测）它。

# c++ - c ++ hash_multimap如何获取值

> ID：12274741
> 
> 赞同：0
> 
> 时间：2012-09-05T05:02:32.183
> 
> 标签：c++, hash, multimap

这可能真的很简单，但我找不到一个简单的例子。我知道使用 hash_multimap 您可以将多个值映射到单个键。但是我将如何访问这些值。我偶然发现的所有示例总是只访问映射到键的第一个值。这是我的意思的一个例子

```
key : value
1 : obj1a;
2 : obj2a, obj2b, obj2c 
```

我将如何访问 obj2b 和 obj2c，而不仅仅是 obj2a

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T05:05:29.770

通常的多图迭代循环是这样的：

```
#include <unordered_multimap>

typedef std::unordered_multimap<K, V> mmap_t;

mmap_t m;

for (mmap_t::const_iterator it1 = m.begin(), it2 = it1, end = m.end(); it1 != end; it1 = it2)
{
    // outer loop over unique keys

    for ( ; it1->first == it2->first; ++it2)
    {
        // inner loop, all keys equal to it1->first
    }
} 
```

要仅迭代一个键值，请[`equal_range`](http://en.cppreference.com/w/cpp/container/unordered_multimap/equal_range)改用。

```
std::pair<mmap_t::const_iterator, mmap_t::const_iterator> p = m.equal_range(key);

for (mmap_t::const_iterator it = p.first; it != p.second; ++it)
{
    // use "it->second"
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T05:05:29.277

例如，`equal_range`返回两个迭代器，分别到匹配范围的开头和结尾：

```
void lookup(const map_type& Map, int key)
{
  cout << key << ": ";
  pair<map_type::const_iterator, map_type::const_iterator> p =
    Map.equal_range(key);

  for (map_type::const_iterator i = p.first; i != p.second; ++i)
    cout << (*i).second << " ";

  cout << endl;
} 
```

我们在哪里使用`map_type`like

```
class ObjectT; // This is the type of object you want to store
typedef hash_multimap<int, ObjectT> map_type; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T05:03:42.707

只需将一个迭代器抓取到第一个迭代器并递增它。如果键仍然相等，则您将获得另一个具有相同键值的条目。您也可以使用[equal_range](http://www.cplusplus.com/reference/algorithm/equal_range/)。

# java - 如何制作可以直接运行的.exe或可执行jar？

> ID：12274744
> 
> 赞同：1
> 
> 时间：2012-09-05T05:02:53.593
> 
> 标签：java, jar, exe, executable-jar, runnable

> **可能重复：**
> [如何创建可执行的 Java 程序？](https://stackoverflow.com/questions/804466/how-do-i-create-executable-java-program)

我在 java 中实现了一些语音识别应用程序。当我从 Eclipse 运行时，它与 Eclipse 配合得很好。但是当我尝试从命令行运行时，我的代码没有运行。

我已经包含了狮身人面像中的一些 jar ..like sphinx.jar,jsapi.jar,wsj_dictionary.jar，我的目录结构如下：

![我的目录结构](../Images/82183f752a92293594248b86c15ebed5.png)

那么任何人都可以建议我如何制作 .exe 或可以直接运行的可执行 jar 文件吗？

提前致谢..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T05:07:16.293

在 Eclipse 中，您可以通过右键单击源文件夹，选择“Export...”，选择“Java->Executable JAR File”，将项目导出为可执行 JAR 文件。然后，Eclipse 将提供选项，可以将您的外部 JAR 依赖项提取到最终的 jar 文件中，或者将它们放入一个文件夹中，最终 jar 的清单类路径引用它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T05:09:44.243

`MANIFEST.MF`jar 中的文件应指定 Main-Class 和类路径。像这样的东西：

```
Main-Class: full.package.path.to.your.main.class
Class-Path: space separated list of jar files 
```

您可能希望使用 Ant、Maven 或 Gradle 之类的自动构建工具，以便以`MANIFEST.MF`这种方式在您的 jar 中生成文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-05T05:45:32.030

使用[Launch4J](http://launch4j.sourceforge.net/)在 Windows 可执行文件中包装 jar。

# c# - 如何将 Json 数据存储到 asp.net 中的 Sql 表中

> ID：12274745
> 
> 赞同：0
> 
> 时间：2012-09-05T05:03:00.960
> 
> 标签：c#, jquery, asp.net, json, mysql

我想使用 Jquery & Ajax 将 Json 数据存储到表中。这是我的 Json 文件，如下所示：-

```
[
{
"term": "BACCHUS",
"part": "n.",
"definition": "A convenient deity invented by the ancients as an excuse for getting drunk.",
"quote": [
"Is public worship, then, a sin,",
"That for devotions paid to Bacchus",
"The lictors dare to run us in,",
"And resolutely thump and whack us?"
],
"author": "Jorace"
},
{
"term": "BACKBITE",
"part": "v.t.",
"definition": "To speak of a man as you find him when he can't find you."
},
{
"term": "BEARD",
"part": "n.",
"definition": "The hair that is commonly cut off by those who justly execrate the absurd Chinese custom of shaving the head."
}
] 
```

我有一个名为“json”的表，其中三列的名称分别为术语、部分和定义。现在我刚刚像这样将 json 数据加载到 html 表中。

```
 $.ajax({
        type: "GET",
        url: "b.json",
        dataType: "json",
        success: function (data) {
            $.each(data, function (entryIndex, entry) {
                //   var html = '<div class="declareing_variable">';
                var html1 = entry['term'];
                var html2 = '<div class="geting_part">' + entry['part'] + '</div>';
                var html3 = '<div class="geting_definition">' + entry['definition'] + '</div>';
                $('<tr></tr>').html('<th>' + html1 + '</th><th>$' + html2 + '</td><th>$' + html3 + '</th>').appendTo('#json');
                $('#abc').append(html2);

            });
        }
    }); 
```

谁能告诉我如何将它存储到 sql 表中并可以提供一些编码帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T05:12:30.077

你的服务器端编程语言是什么？

如果那是 PHP，您可以使用 JSON_DECODE() 来解码您发送到 Web 服务器的 json 数据： [PHP 网站上的 json_decode()](http://php.net/manual/en/function.json-decode.php)

但是，由于您使用的是 C#，因此您需要[在 Codeplex 上使用类似 JSON 库之](http://json.codeplex.com)类的东西来解码您的 JSON。

# mysql - Excel工作表上的Mysql表？

> ID：12274746
> 
> 赞同：1
> 
> 时间：2012-09-05T05:03:14.670
> 
> 标签：mysql, excel

我正在使用 Windows7 和 Microsoft Office 2010 和 mysql5。我想将 Microsoft excel 与我的数据库 mysql 连接起来。我已经安装了所有的驱动程序。我也创建了一个数据源。我将逐步连接，但最后当我单击测试连接时，我收到此错误消息

> 由于初始化提供程序未指定错误时出错，测试连接失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T13:57:24.877

您可能没有使用正确的 ODBC 驱动程序。

请检查您是否下载了与您的 MySQL 数据库匹配的那个。（不仅是版本号，尤其是 32 位服务器或 64 位服务器）。

# javascript - 使用 JavaScript 一次为一个元素设置多个属性

> ID：12274748
> 
> 赞同：113
> 
> 时间：2012-09-05T05:03:26.107
> 
> 标签：javascript

如何使用 JavaScript 一次设置多个属性？不幸的是，我无法在这个项目中使用像 jQuery 这样的框架。这是我现在拥有的：

```
var elem = document.createElement("img");

elem.setAttribute("src", "http://example.com/something.jpeg");
elem.setAttribute("height", "100%");
elem.setAttribute("width", "100%"); 
```

* * *

## 回答 #1

> 赞同：143
> 
> 时间：2012-09-05T05:06:36.590

您可以创建一个辅助函数：

```
function setAttributes(el, attrs) {
  for(var key in attrs) {
    el.setAttribute(key, attrs[key]);
  }
} 
```

像这样称呼它：

```
setAttributes(elem, {"src": "http://example.com/something.jpeg", "height": "100%", ...}); 
```

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2018-03-31T11:32:33.487

您可能可以使用`Object.assign(...)`将您的属性应用于创建的元素。尽管某些“属性（elem.height 等）是只读的，即只有一个 getter（未定义的 setter）的访问器”。

请记住，`height`和`width`属性[以像素定义](https://www.w3.org/TR/html5/embedded-content-0.html#dimension-attributes)，而不是百分比。您必须使用 CSS 使其流畅。

```
var elem = document.createElement('img')
Object.assign(elem, {
  className: 'my-image-class',
  src: 'https://dummyimage.com/320x240/ccc/fff.jpg',
  height: 120, // pixels
  width: 160, // pixels
  onclick: function () {
    alert('Clicked!')
  }
})
document.body.appendChild(elem)

// One-liner:
// document.body.appendChild(Object.assign(document.createElement(...), {...}))
```

```
.my-image-class {
  height: 100%;
  width: 100%;
  border: solid 5px transparent;
  box-sizing: border-box
}

.my-image-class:hover {
  cursor: pointer;
  border-color: red
}

body { margin:0 }
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-09-05T05:18:48.417

如果您想要一个 framework-esq 语法（**注意：**仅支持 IE 8+），您可以扩展`Element`原型并添加您自己的`setAttributes`函数：

```
Element.prototype.setAttributes = function (attrs) {
    for (var idx in attrs) {
        if ((idx === 'styles' || idx === 'style') && typeof attrs[idx] === 'object') {
            for (var prop in attrs[idx]){this.style[prop] = attrs[idx][prop];}
        } else if (idx === 'html') {
            this.innerHTML = attrs[idx];
        } else {
            this.setAttribute(idx, attrs[idx]);
        }
    }
}; 
```

这使您可以使用如下语法：

```
var d = document.createElement('div');
d.setAttributes({
    'id':'my_div',
    'class':'my_class',
    'styles':{
        'backgroundColor':'blue',
        'color':'red'
    },
    'html':'lol'
}); 
```

试试看：http: [//jsfiddle.net/ywrXX/1/](http://jsfiddle.net/ywrXX/1/)

如果你不喜欢扩展一个宿主对象（[有些是反对的](http://perfectionkills.com/whats-wrong-with-extending-the-dom/)）或者需要支持 IE7-，就将它作为一个函数使用

请注意，这`setAttribute`不适用于`style`IE 或事件处理程序（无论如何您都不应该这样做）。上面的代码处理`style`，但不处理事件。

**文档**

*   MDN 上的对象原型 - [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/prototype](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/prototype)
*   `setAttribute`在 MDN - [https://developer.mozilla.org/en-US/docs/DOM/element.setAttribute](https://developer.mozilla.org/en-US/docs/DOM/element.setAttribute)

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2017-09-22T19:36:24.920

你可以编写一个 ES5.1 辅助函数：

```
function setAttributes(el, attrs) {
    Object.keys(attrs).forEach(key => el.setAttribute(key, attrs[key]));
} 
```

像这样称呼它：

```
setAttributes(elem, { src: 'http://example.com/something.jpeg', height: '100%' }); 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2012-09-05T05:13:28.377

您可以创建一个接受可变数量参数的函数：

```
function setAttributes(elem /* attribute, value pairs go here */) {
    for (var i = 1; i < arguments.length; i+=2) {
        elem.setAttribute(arguments[i], arguments[i+1]);
    }
}

setAttributes(elem, 
    "src", "http://example.com/something.jpeg",
    "height", "100%",
    "width", "100%"); 
```

或者，您将属性/值对传递给对象：

```
 function setAttributes(elem, obj) {
     for (var prop in obj) {
         if (obj.hasOwnProperty(prop)) {
             elem[prop] = obj[prop];
         }
     }
 }

setAttributes(elem, {
    src: "http://example.com/something.jpeg",
    height: "100%",
    width: "100%"
}); 
```

* * *

您还可以制作自己的可链接对象包装器/方法：

```
function $$(elem) {
    return(new $$.init(elem));
}

$$.init = function(elem) {
    if (typeof elem === "string") {
        elem = document.getElementById(elem);
    }
    this.elem = elem;
}

$$.init.prototype = {
    set: function(prop, value) {
        this.elem[prop] = value;
        return(this);
    }
};

$$(elem).set("src", "http://example.com/something.jpeg").set("height", "100%").set("width", "100%"); 
```

工作示例：http: [//jsfiddle.net/jfriend00/qncEz/](http://jsfiddle.net/jfriend00/qncEz/)

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2018-04-01T03:11:27.240

```
const setAttributes = (el, attrs) =>
  Object.entries(attrs)
    .forEach(args =>
      el.setAttribute(...args)) 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-09-05T05:28:24.350

或者创建一个函数来创建一个包含参数属性的元素

```
function elemCreate(elType){
  var element = document.createElement(elType);
  if (arguments.length>1){
    var props = [].slice.call(arguments,1), key = props.shift();
    while (key){ 
      element.setAttribute(key,props.shift());
      key = props.shift();
    }
  }
  return element;
}
// usage
var img = elemCreate('img',
            'width','100',
            'height','100',
            'src','http://example.com/something.jpeg'); 
```

仅供参考：`height/width='100%'`使用属性不起作用。对于 100% 的高度/宽度，您需要元素`style.height/style.width`

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2015-02-18T12:26:33.037

试试这个

```
function setAttribs(elm, ob) {
    //var r = [];
    //var i = 0;
    for (var z in ob) {
        if (ob.hasOwnProperty(z)) {
            try {
                elm[z] = ob[z];
            }
            catch (er) {
                elm.setAttribute(z, ob[z]);
            }
        }
    }
    return elm;
} 
```

演示：[这里](http://jsfiddle.net/slawe/5movny9c/3/)

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2020-10-07T13:38:09.700

您可以简单地将一个方法（setAttributes，以“s”结尾）添加到“元素”原型，如：

```
Element.prototype.setAttributes = function(obj){
  for(var prop in obj) {
    this.setAttribute(prop, obj[prop])
  }
} 
```

您可以在一行中定义它：

```
Element.prototype.setAttributes = function(obj){ for(var prop in obj) this.setAttribute(prop, obj[prop]) } 
```

您可以像调用其他方法一样正常调用它。属性作为对象给出：

```
elem.setAttributes({"src": "http://example.com/something.jpeg", "height": "100%", "width": "100%"}) 
```

如果给定的参数不是对象，您可以添加 if 语句以引发错误。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2021-05-24T10:27:37.773

**无功能示例**：

```
let checkbox = document.createElement('input');

for (const [key, value] of Object.entries({
       type: 'checkbox',
       id: 'sys-surname',
       class: 'switcher23',
       value: 1,
       name: 'surname'
 })) {
       checkbox.setAttribute(key, value);
  } 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-01-13T02:12:25.960

使用此功能同时创建和设置属性

```
function createNode(node, attributes){
    const el = document.createElement(node);
    for(let key in attributes){
        el.setAttribute(key, attributes[key]);
    }
    return el;
} 
```

像这样使用它

```
const input = createNode('input', {
    name: 'test',
    type: 'text',
    placeholder: 'Test'
});
document.body.appendChild(input); 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-10-04T19:03:10.317

我想这是为此类中的任何元素一次设置属性的最佳方法。

```
function SetAtt(elements, attributes) {
    for (var element = 0; element < elements.length; element++) {
        for (var attribute = 0; attribute < attributes.length; attribute += 2) {
            elements[element].setAttribute(attributes[attribute], attributes[attribute + 1]);
        }
    }
}
var Class = document.getElementsByClassName("ClassName"); // class array list
var Data = ['att1', 'val1', 'att2', 'val2', 'att3', 'val3']; //attributes array list
SetAtt(Class, Data); 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2021-08-13T07:08:13.883

```
let elem = document.createElement("img");
Object.entries({"src": "http://example.com/something.jpeg"),
                "height": "100%",
                "width": "100%"}).forEach(kv => elem.setAttribute(kv[0], kv[1])); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2022-02-15T11:24:11.693

这是一个简单的方法

```
let div = document.getElementsByTagName("div")[0];

let attr = ["class", "id", "title"];
let attrVlu = ["ahmed", "mohamed", "ashraf"];

for(let i = 0; i < 3; i++) {
    div.setAttribute(attr[i], attrVlu[i]);
} 
```

# git - 什么是 git-remote-http 进程，为什么有这么多 git 进程？

> ID：12274751
> 
> 赞同：4
> 
> 时间：2012-09-05T05:03:41.253
> 
> 标签：git, process

我在 shell 中找不到 git-remote-http 命令，为什么会有这样的过程？

我只开了一个git svn进程，为什么git相关的进程这么多？

```
[mirror@home git]$ pgrep git
12035
12036
22308
22309
22394
22397
24128
24129
26136
26137
[mirror@home git]$ pgrep git -lf
12035 git fetch origin
12036 git-remote-http origin http://git.savannah.gnu.org/r/weechat.git/
22308 git svn clone http://code.taobao.org/svn/obconnector/
22309 /usr/bin/perl /home/mirror/ins_git/libexec/git-core/git-svn clone http://xxx.org/svn/xxx/
22394 git update-index -z --index-info
22397 git hash-object -w --stdin-paths --no-filters
24128 git fetch origin
24129 git-remote-http origin http://git.xxx.org/xxx.git/
26136 git fetch origin
26137 git-remote-http origin http://git.xxx.org/xxx.git/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-09-16T12:12:50.560

它被称为**[远程助手](https://git-scm.com/docs/git-remote-helpers)**

> 当 git 需要与本地不支持的远程存储库交互时，它们会被 git 调用。
> 给定的助手将实现此处记录的功能的子集。
> 
> 当 git 需要使用远程帮助程序与存储库交互时，**它会将帮助程序作为独立进程生成**，将命令发送到帮助程序的标准输入，并期望从帮助程序的标准输出中得到结果。

请注意，在 Git 2.11（2016 年第四季度）之前，“ `git fetch http::/site/path`”（这是一个无效的 url）*不会*正确终止，而是会出现段错误。

请参阅[Jeff King (](https://github.com/peff) [)的](https://github.com/peff)[提交 d63ed6e](https://github.com/git/git/commit/d63ed6ef241b2e7f124089e2672cfce8251ed390)（2016 年 9 月 8 日） 。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 c13f458](https://github.com/git/git/commit/c13f458d869fefb603c63ae7bf65fe3d595a8a83))^(中，2016 年 9 月 15 日）)[`peff`](https://github.com/peff)
^([`gitster`](https://github.com/gitster))

> ## `remote-curl`: 处理没有协议的 URL
> 
> 通常`remote-curl`永远不会看到开头没有“ `proto:`”的 URL，因为这就是告诉 git 运行“ `git-remote-proto`”帮助程序的原因（并且**`git-remote-http`，等等，是 的别名`git-remote-curl`**）。
> 
> 但是，特殊语法“ `proto::something`”将`git-remote-proto`仅以“something”作为 URL 运行。
> 因此，格式错误的 URL 如下：

```
http::/example.com/repo.git 
```

> 会将 URL “ `/example.com/repo.git`” 提供给`git-remote-http`.
> 生成的 URL 没有协议，但是 372370f (http: use credential API to handle proxy authentication, 2016-01-26) 添加的代码没有处理这种情况和段错误。

* * *

Git 2.13（2017 年第二季度）通过确保“智能 HTTP”远程助手了解如何处理`--push-options`通过外部远程助手接口传递的“”来扩展这一点。

请参阅[提交 511155d](https://github.com/git/git/commit/511155db51ff9870d2b3fd74c6dfdd558b5fa37b)，[提交 eb7b974](https://github.com/git/git/commit/eb7b9749f2b7bc0d0e0ac2c68d98cf1b8f4a2761)（2017 年 3 月 22 日），作者为[Brandon Williams ( `mbrandonw`)](https://github.com/mbrandonw)。
^(（由[Junio C Hamano 合并`gitster`——](https://github.com/gitster)在[提交 4e87565](https://github.com/git/git/commit/4e87565d2a3e315b7afc39e9e1fe98c5607a1b11)中，2017 年 3 月 27 日）)

remote-http 进程现在可以接收选项，因为[git send-pack](https://github.com/git/git/blob/511155db51ff9870d2b3fd74c6dfdd558b5fa37b/Documentation/git-send-pack.txt#L84-L88)有：

```
--push-option=<string> 
```

> 将指定的字符串作为推送选项传递给服务器端的钩子使用。如果服务器不支持推送选项，则会出错。

* * *

Git 2.14 确实强制执行推送选项验证。

请参阅[提交 cbaf82c](https://github.com/git/git/commit/cbaf82cc6b734244a9190c3341ca5f08f8d5acc4)（2017 年 5 月 9 日）和[提交 b7b744f](https://github.com/git/git/commit/b7b744f297b736c51636407f5883b3777bb36433)（2017 年 5 月 8 日）由[Jonathan Tan ( `jhowtan`)](https://github.com/jhowtan)。
^(（由[Junio C Hamano 合并 -- `gitster`--](https://github.com/gitster)在[提交 3c98008](https://github.com/git/git/commit/3c980083bc404cb62fb87c76d331c48a44c5f50d)中，2017 年 5 月 23 日）)

接收包程序现在确保推送证书记录用于推送的同一组推送选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T06:20:38.220

每个 http 请求都有一个单独的进程。有很多客户端请求服务，所以有很多 git 进程。

# c# - Sharp 操作员不会在 Visual Studio 中自动选项卡

> ID：12274753
> 
> 赞同：1
> 
> 时间：2012-09-05T05:03:42.277
> 
> 标签：c#, .net, visual-studio-2010

如果我在 Visual Studio 中编写一些代码，

```
while(true)
{
    if (foo == bar)
       MessageBox.Show("ASDF");
} 
```

我希望代码只在应用程序在调试模式下运行时显示消息框，我会写#if DEBUG，#endif。但是 Visual Studio 不会自动标记 # 运算符，因此它是这样编写的：

```
while(true)
{
    if (foo == bar)
#if DEBUG
    MessageBox.Show("ASDF");
#endif
} 
```

必须手动缩进任何有 # 的行很烦人。如何使 Visual Studio 自动制表符 # 运算符？我正在使用 VS2010

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T05:15:20.113

据我所知，没有内置的方法来调整这个标签。

[注意：请考虑方法的条件属性，而不是如此处](http://msdn.microsoft.com/en-us/library/aa288458%28v=VS.71%29.aspx)所示

```
public class Trace 
{ 
  [Conditional("DEBUG")] 
  public static void Message(string traceMessage) 
  { 
    Console.WriteLine("[TRACE] - " + traceMessage); 
  } 
} 
```

# mysql - 使用 sequelizejs 进行自定义查询

> ID：12274755
> 
> 赞同：2
> 
> 时间：2012-09-05T05:04:01.193
> 
> 标签：mysql, database, node.js, sequelize.js

我在我的 nodejs 应用程序中使用 sequelizejs orm。而且我没有提到如何进行自定义 sql 查询的文档。我通过谷歌搜索找到了一个示例，但无法理解其语法。以及这个被调用函数的作用是什么。

```
 var callee = {
                    build: function(result, config) {
                        console.log("callee", result);
                    }
                };
                sequelize.query("SELECT * from Users", callee).on("success", function(){
                    console.log("success");

                }); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-06T07:19:01.953

如果您只想执行自定义查询并获取它的结果，您可以这样做

```
sequelize.query('sql query', null, { raw: true }).success(function(data){}) 
```

如果您还需要其他东西，请说明您想要实现的目标:)

# vb.net - BooleanQuery 有效，但 SpanNearQuery 无效

> ID：12274756
> 
> 赞同：0
> 
> 时间：2012-09-05T05:04:06.137
> 
> 标签：vb.net, lucene.net

我有以下代码...

```
Dim term1 As Lucene.Net.Index.Term = New Lucene.Net.Index.Term("contents", "technical")
    Dim term2 As Lucene.Net.Index.Term = New Lucene.Net.Index.Term("contents", "c++")
    Dim span1 As SpanQuery = New SpanTermQuery(term1)
    Dim span2 As SpanQuery = New SpanTermQuery(term2)

    Dim spanQuery As SpanNearQuery = New SpanNearQuery(New SpanQuery() {
                                              span1,
                                              span2},
                                              2000000,
                                              False
                                          )

    Dim booleanQuery As BooleanQuery = New BooleanQuery()
    booleanQuery.SetMinimumNumberShouldMatch(0)

    booleanQuery.Add(span1, BooleanClause.Occur.SHOULD)
    booleanQuery.Add(span2, BooleanClause.Occur.SHOULD) 
```

现在，如果我搜索布尔查询，那么它会返回一些文档，但是如果我搜索 SpanNearQuery，那么它不会返回任何文档。

这是我的索引代码..

```
 Dim indexLocation As String = "C:/index"

    Dim directory As Lucene.Net.Store.Directory = Lucene.Net.Store.FSDirectory.Open(New DirectoryInfo(indexLocation))

    'create an analyzer to process the text
    Dim analyzer As Lucene.Net.Analysis.Analyzer = New Lucene.Net.Analysis.Standard.StandardAnalyzer(Lucene.Net.Util.Version.LUCENE_29)

    'creating an index writer to write the doc to index
    Dim deletionPolicy As Lucene.Net.Index.IndexDeletionPolicy = New Lucene.Net.Index.KeepOnlyLastCommitDeletionPolicy()
    Dim indexWriter As Lucene.Net.Index.IndexWriter = New Lucene.Net.Index.IndexWriter(directory, analyzer, True, deletionPolicy, Lucene.Net.Index.IndexWriter.MaxFieldLength.UNLIMITED)

    Dim files() As String
    files = System.IO.Directory.GetFiles("C:\ResumeDirectory\")
    For i As Integer = 0 To files.Length - 1
        Dim streamReader As StreamReader = New StreamReader(files(i))

        Dim docField1 As Field = New Field("contents", streamReader, Lucene.Net.Documents.Field.TermVector.YES)
        Dim docField2 As Field = New Field("CandidateID", files(i), Field.Store.YES, Field.Index.NOT_ANALYZED)
        Dim doc As Document = New Document()
        doc.Add(docField1)
        doc.Add(docField2)

        'writing the document to index
        indexWriter.AddDocument(doc)
        streamReader.Close()
    Next

    'optimize and close the writer
    indexWriter.Optimize()
    indexWriter.Dispose()
End Sub 
```

我的 SpanNearQuery 代码有什么问题吗？

# lambda-calculus - 暴露 coq 中归纳定义项的结构

> ID：12274765
> 
> 赞同：2
> 
> 时间：2012-09-05T05:04:54.313
> 
> 标签：lambda-calculus, coq

在简单类型的 lambda 演算中类型推导是唯一的证明在纸上是微不足道的。我熟悉的证明是通过对类型推导的完全归纳来进行的。但是，我无法证明*通过*类型派生类型表示的类型派生是唯一的。在这里，如果变量的类型为 environment ，则谓词`dec Γ x τ`为真。类型谓词像往常一样定义，只需读取简单类型 lambda 演算的类型规则：`x``τ``Γ``J`

```
Inductive J (Γ : env) : term → type → Set :=
  | tvar : ∀ x τ, dec Γ x τ → J γ (var x) τ
  | tabs : ∀ τ₁ τ₂ e, J (τ₁ :: γ) e τ₂ → J γ (abs τ₁ e) (arr τ₁ τ₂)
  | tapp : ∀ τ₁ τ₂ e₁ e₂, J γ e₁ (arr τ₁ τ₂) → J γ e₂ τ₁ → J γ (app e₁ e₂) τ₂. 
```

`J`在证明类型派生是唯一的时，我无法暴露类型术语的结构。例如，我可以对以下引理中的任何一个`d1`或`d2`在其中进行归纳，但不能对`d1`then destruct进行归纳`d2`，反之亦然。Coq 给出的错误消息（对术语进行抽象会导致输入错误的术语）有点模糊，并且 Coq wiki 没有提供任何帮助。作为参考，这是我试图证明的引理：

```
Lemma unique_derivation : ∀ Γ e τ (d₁ d₂ : J Γ e τ), d₁ = d₂. 
```

在归纳术语时我没有问题，例如，在证明类型是唯一的时。

**编辑：**我添加了最少数量的定义来说明我遇到问题的结果。作为对 huitseeker 评论的回应，之所以选择这种类型`J`是因为我想将派生类型作为结构化对象进行推理，以便执行提取等操作并证明唯一性等结果，这是我以前在 Coq 中没有做过的。

针对评论的第一部分，我可以执行`induction`or `d1`，`d2`但执行*后*`induction`我不能使用`destruct`, `case`, or`induction`剩下的术语。这意味着我不能公开两者的结构，`d1`并且无法`d2`对这两个证明树进行推理。当我尝试这样做时收到的错误表明，对剩余术语进行抽象会导致术语输入错误。

```
Require Import Unicode.Utf8.
Require Import Utf8_core.
Require Import List.

Inductive type : Set :=
  | tau : type
  | arr : type → type → type.

Inductive term : Set :=
  | var : nat → term
  | abs : type → term → term
  | app : term → term → term.

Definition dec (Γ : list type) x τ : Prop :=
  nth_error γ x = Some τ.

Inductive J (Γ : list type) : term → type → Set :=
  | tvar : ∀ x τ, dec Γ x τ → J Γ (var x) τ
  | tabs : ∀ τ₁ τ₂ e, J (τ₁ :: Γ) e τ₂ → J Γ (abs τ₁ e) (arr τ₁ τ₂)
  | tapp : ∀ τ₁ τ₂ e₁ e₂, J Γ e₁ (arr τ₁ τ₂) → J Γ e₂ τ₁ → J Γ (app e₁ e₂) τ₂.

Lemma derivations_unique : ∀ Γ e τ (d1 d2 : J Γ e τ), d1 = d2.
Proof. admit. Qed. 
```

我已经尝试过从库中获得`dependent induction`一些结果`Coq.Logic`，但没有成功。推导是独一无二的，这似乎是一个容易证明的命题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:34:17.077

你有三个问题。

一个是使感应工作的纯技术问题。[`dependent destruction`](http://coq.inria.fr/distrib/V8.4/refman/Reference-Manual011.html#DepInduction)您可以使用该策略解决主要困难（由[Coq-Club 邮件列表上的 Matthieu Sozeau 提供](https://sympa.inria.fr/sympa/arc/coq-club/2008-08/msg00000.html)）。这是一种反转策略。我不会假装理解它是如何在幕后工作的。

第二个困难是在一个基本案例中，对于环境。你需要证明等式证明`list nat`是唯一的；这适用于所有可判定的域，其工具在[Eqdep_dec](http://coq.inria.fr/library/Coq.Logic.Eqdep_dec.html)模块中。

第三个困难与问题有关。推导的唯一性不会跟随术语或推导结构的直接归纳，因为您的术语没有携带足够的类型信息来重构推导。在应用程序`app e1 e2`中，没有直接的方法可以知道参数的类型。在简单类型的 lambda 演算中，类型重构确实成立，并且很容易证明；在较大的演算（具有多态性或子类型）中，它可能不成立（例如，对于 ML 风格的多态性，有一个独特的*主*类型方案和相关的派生，但有许多使用基本类型的派生）。

这是您的引理的快速证明。我省略了环境查找唯一性的证明。您可以对术语结构或推导结构进行归纳——这个简单的证明有效，因为它们是相同的。

```
Require Import Unicode.Utf8.
Require Import Utf8_core.
Require Import List.
Require Import Program.Equality.

Inductive type : Set :=
  | tau : type
  | arr : type → type → type.

Inductive term : Set :=
  | var : nat → term
  | abs : type → term → term
  | app : term → term → term.

Definition dec (Γ : list type) x τ : Prop :=
  nth_error Γ x = Some τ.

Inductive J (Γ : list type) : term → type → Set :=
  | tvar : ∀ x τ, dec Γ x τ → J Γ (var x) τ
  | tabs : ∀ τ₁ τ₂ e, J (τ₁ :: Γ) e τ₂ → J Γ (abs τ₁ e) (arr τ₁ τ₂)
  | tapp : ∀ τ₁ τ₂ e₁ e₂, J Γ e₁ (arr τ₁ τ₂) → J Γ e₂ τ₁ → J Γ (app e₁ e₂) τ₂.

Lemma unique_variable_type :
  forall G x t1 t2, dec G x t1 -> dec G x t2 -> t1 = t2.
Proof.
  unfold dec; intros.
  assert (value t1 = value t2). congruence.
  inversion H1\. reflexivity.
Qed.

Axiom unique_variable_type_derivation :
  forall G x t (d1 d2 : dec G x t), d1 = d2.

Lemma unique_type : forall G e t1 t2 (d1 : J G e t1) (d2 : J G e t2), t1 = t2.
Proof.
  intros G e; generalize dependent G.
  induction e; intros.

  dependent destruction d1\. dependent destruction d2.
  apply (unique_variable_type G n); assumption.

  dependent destruction d1\. dependent destruction d2.
  firstorder congruence.

  dependent destruction d1\. dependent destruction d2.
  assert (arr τ₁ τ₂ = arr τ₁0 τ₂0).
  firstorder congruence.
  congruence.
Qed.

Lemma unique_derivation : forall G e t (d1 d2 : J G e t), d1 = d2.
Proof.
  intros G e; generalize dependent G.
  induction e; intros.

  dependent destruction d1\. dependent destruction d2.
  f_equal. solve [apply (unique_variable_type_derivation G n)].

  dependent destruction d1\. dependent destruction d2.
  f_equal. solve [apply IHe].

  dependent destruction d1\. dependent destruction d2.
  assert (τ₁ = τ₁0). 2: subst τ₁.
  solve [eapply unique_type; eauto].
  f_equal; solve [firstorder].
Qed. 
```

# javascript - 如何在zepto中实现类似slideDown()的jquery

> ID：12274766
> 
> 赞同：9
> 
> 时间：2012-09-05T05:04:54.400
> 
> 标签：javascript, jquery, html, slidedown, zepto

我正在为我的移动网站使用 zepto 库。我最近了解到 zepto 没有`slideDown()`像 jquery 这样的插件。我想为 zepto 实现相同的功能。

我在 jsfiddle 上试过一个（[http://jsfiddle.net/goje87/keHMp/1/](http://jsfiddle.net/goje87/keHMp/1/)）。在这里，它在显示元素时没有动画。它只是一闪而过。如何引入动画？

PS：我不能提供固定的高度，因为我会将此插件应用于高度属性未知的元素。

提前谢谢！！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-05T05:19:48.553

演示：http: [//jsfiddle.net/6zkSX/5](http://jsfiddle.net/6zkSX/5)

JavaScript：

```
(function ($) {
  $.fn.slideDown = function (duration) {    
    // get old position to restore it then
    var position = this.css('position');

    // show element if it is hidden (it is needed if display is none)
    this.show();

    // place it so it displays as usually but hidden
    this.css({
      position: 'absolute',
      visibility: 'hidden'
    });

    // get naturally height
    var height = this.height();

    // set initial css for animation
    this.css({
      position: position,
      visibility: 'visible',
      overflow: 'hidden',
      height: 0
    });

    // animate to gotten height
    this.animate({
      height: height
    }, duration);
  };
})(Zepto);

$(function () {
  $('.slide-trigger').on('click', function () {
    $('.slide').slideDown(2000);
  });
});​
​ 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-21T01:48:53.150

这对我有用：

[https://github.com/Ilycite/zepto-slide-transition](https://github.com/Ilycite/zepto-slide-transition)

> Zepto Slide Transition 插件向 Zepto.js 添加了以下功能：
> 
> 滑下（）;
> 
> 向上滑动（）;
> 
> 滑动切换（）；

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-04T13:40:01.173

Speransky 的回答很有帮助，我为常见的下拉导航列表提供了一个简化的替代方案，并在 jsfiddle 上分为 slideUp 和 slideDown：http: [//jsfiddle.net/kUG3U/1/](http://jsfiddle.net/kUG3U/1/)

```
$.fn.slideDown = function (duration) {
    // show element if it is hidden (it is needed if display is none)
    this.show();

    // get naturally height
    var height = this.height();

    // set initial css for animation
    this.css({
        height: 0
    });

    // animate to gotten height
    this.animate({
        height: height
    }, duration);
}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-10T02:08:10.973

这可以满足您的需要： [https ://github.com/NinjaBCN/zepto-slide-transition](https://github.com/NinjaBCN/zepto-slide-transition)

# objective-c - 从 AlertView 执行 Segue

> ID：12274773
> 
> 赞同：0
> 
> 时间：2012-09-05T05:05:44.827
> 
> 标签：objective-c, ios, xcode

在警报视图中单击“确定”按钮后，我正在尝试转到另一个视图控制器。这就是我到目前为止所拥有的。

```
- (IBAction)cancelScripting:(id)sender {

UIAlertView *cancelScriptingAlert = [[UIAlertView alloc]initWithTitle:@"Are You Sure" message:@"This action will cancel your observation" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"Ok", nil];

[cancelScriptingAlert show];

}

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {

if (buttonIndex == 1) {

       [self performSegueWithIdentifier: @"CRHViewController" sender: self];

    }
} 
```

我不知道我在做什么 [self performSegueWithIdentifier: @"MySegue" sender: self]; 我想继续使用的视图控制器称为 CRHViewController。我觉得我需要另一种方法，或者我需要导入 CRHViewController.h 或其他东西。

谁能告诉我我错过了什么或做错了什么？

# c - 使用 & 和不使用 & 打印字符串之间的区别

> ID：12274777
> 
> 赞同：0
> 
> 时间：2012-09-05T05:06:09.613
> 
> 标签：c

```
 #include<stdio.h>

   int main()
   {
       char str[25] = "helloworld";
       printf("%s %s", &str+2,str+2);
       return 0;
   } 
```

&str+2 和 str+2 这里的 str=&str 有什么区别。请帮我。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T05:12:06.230

当你有一个数组时：`str[xxx]` `str`给你数组开头的内存地址，所以`str+2`会指向`"lloworld"`. `&str`为您提供*存储 str 的地址*。所以通过打印 &str+2 你会有意想不到的行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T05:08:17.637

`&`获取该变量的地址，而不是变量指向的值。但是，对于一个字符数组，该值将是该数组的开始（第一个插槽）。

`&str+2`获取内存位置`str`并添加`2`.

`str+2`获取开始的内存位置并添加 2 个字节（`char`= 1 个字节，查看指针算法）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T05:21:37.743

&str+2 最终给出了地址，但在 printf 语句中，我们使用 %s 所以它给输出一个垃圾值，对于 str+2，输出将是 llworld

检查此链接的输出编译几次，看看我们得到什么输出

[http://codepad.org/vODzmZj3](http://codepad.org/vODzmZj3)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T05:53:49.523

如果没有别的，`&str`（因此`&str+2`）有错误的类型要传递给`printf`说明`%s`符。它需要`char *`（指向 的指针`char`），并且`&str`具有类型`char (*)[25]`（指向 25`char`秒数组的指针）。将错误的类型传递给`printf`调用未定义的行为。

此外，`&str`指向一个长度为 1 的数组（它的元素是`char`长度为 25 的数组，并且只有一个），`&str+2`越界指针算术也是如此，因此是未定义的行为。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T05:11:31.040

`&str`打印vailabel的地址，如'9'或十六进制'0x009'

`str+2`将打印`lloworld`，这里 +2 作为增量值

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-05T05:22:02.383

str + 2 是指向字符串第三个符号的指针，&str + 2 是指向字符串指针加 2 的指针

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-01-29T14:38:11.513

str 是指向字符的指针（数组中的第一个字符）。&str 是指向字符数组的指针。

当我们执行 str+2 操作时，增加了 2 个字节。（因为它本质上是一个 char 指针）。当我们执行 &str+2 操作时，增加了 22 个字节。（因为字符数组的长度为 11 个字节）。

这是唯一的区别。

问候， 纳加拉吉

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2012-09-05T06:36:45.867

您可以尝试以下代码以供参考！

```
#include<stdio.h>
int main()
{      
    char str1[11] = "1111111111";
    char str2[11] = "2222222222";  
    char str[11]  = "helloworld";
    char str3[11] = "3333333333";
    char str4[11] = "4444444444";

   printf("%s %s\n", &str-2,str+2);
   return 0;
} 
```

# jquery - 在 Bootstrap Datepicker 中禁用特定日期

> ID：12274781
> 
> 赞同：1
> 
> 时间：2012-09-05T05:06:23.377
> 
> 标签：jquery, twitter-bootstrap, datepicker

如何在 Bootstrap Datepicker 中禁用特定日期？（[日期选择器主页](http://www.eyecon.ro/bootstrap-datepicker/)）

我正在尝试向日期选择器提供一组日期，并让这些特定日期 (1) 不可点击并且 (2) 具有不同的悬停颜色。

我的具体用法是只允许用户选择具有关联数据文件的日期。

谢谢！

编辑：

这是日期选择器 js 代码：

```
// Picker object

var Datepicker = function(element, options){
    this.element = $(element);
    this.format = DPGlobal.parseFormat(options.format||this.element.data('date-format')||'mm/dd/yyyy');
    this.picker = $(DPGlobal.template)
                        .appendTo('body')
                        .on({
                            click: $.proxy(this.click, this),
                            mousedown: $.proxy(this.mousedown, this)
                        });
    this.isInput = this.element.is('input');
    this.component = this.element.is('.date') ? this.element.find('.add-on') : false;

    if (this.isInput) {
        this.element.on({
            focus: $.proxy(this.show, this),
            blur: $.proxy(this.hide, this),
            keyup: $.proxy(this.update, this)
        });
    } else {
        if (this.component){
            this.component.on('click', $.proxy(this.show, this));
        } else {
            this.element.on('click', $.proxy(this.show, this));
        }
    }

    this.viewMode = 0;
    this.weekStart = options.weekStart||this.element.data('date-weekstart')||0;
    this.weekEnd = this.weekStart == 0 ? 6 : this.weekStart - 1;
    this.fillDow();
    this.fillMonths();
    this.update();
    this.showMode();
};

Datepicker.prototype = {
    constructor: Datepicker,

    show: function(e) {
        this.picker.show();
        this.height = this.component ? this.component.outerHeight() : this.element.outerHeight();
        this.place();
        $(window).on('resize', $.proxy(this.place, this));
        if (e ) {
            e.stopPropagation();
            e.preventDefault();
        }
        if (!this.isInput) {
            $(document).on('mousedown', $.proxy(this.hide, this));
        }
        this.element.trigger({
            type: 'show',
            date: this.date
        });
    },

    hide: function(){
        this.picker.hide();
        $(window).off('resize', this.place);
        this.viewMode = 0;
        this.showMode();
        if (!this.isInput) {
            $(document).off('mousedown', this.hide);
        }
        this.setValue();
        this.element.trigger({
            type: 'hide',
            date: this.date
        });
    },

    setValue: function() {
        var formated = DPGlobal.formatDate(this.date, this.format);
        if (!this.isInput) {
            if (this.component){
                this.element.find('input').prop('value', formated);
            }
            this.element.data('date', formated);
        } else {
            this.element.prop('value', formated);
        }
    },

    place: function(){
        var offset = this.component ? this.component.offset() : this.element.offset();
        this.picker.css({
            top: offset.top + this.height,
            left: offset.left
        });
    },

    update: function(){
        this.date = DPGlobal.parseDate(
            this.isInput ? this.element.prop('value') : this.element.data('date'),
            this.format
        );
        this.viewDate = new Date(this.date);
        this.fill();
    },

    fillDow: function(){
        var dowCnt = this.weekStart;
        var html = '<tr style="border-bottom: 1px solid #aeaeae; border-top: 1px solid #aeaeae;">';
        while (dowCnt < this.weekStart + 7) {
            html += '<th class="dow">'+DPGlobal.dates.daysMin[(dowCnt++)%7]+'</th>';
        }
        html += '</tr>';
        this.picker.find('.datepicker-days thead').append(html);
    },

    fillMonths: function(){
        var html = '';
        var i = 0
        while (i < 12) {
            html += '<span class="month">'+DPGlobal.dates.monthsShort[i++]+'</span>';
        }
        this.picker.find('.datepicker-months td').append(html);
    },

    fill: function() {
        var d = new Date(this.viewDate),
            year = d.getFullYear(),
            month = d.getMonth(),
            currentDate = this.date.valueOf();
        this.picker.find('.datepicker-days th:eq(1)')
                    .text(DPGlobal.dates.months[month]+' '+year);
        var prevMonth = new Date(year, month-1, 28,0,0,0,0),
            day = DPGlobal.getDaysInMonth(prevMonth.getFullYear(), prevMonth.getMonth());
        prevMonth.setDate(day);
        prevMonth.setDate(day - (prevMonth.getDay() - this.weekStart + 7)%7);
        var nextMonth = new Date(prevMonth);
        nextMonth.setDate(nextMonth.getDate() + 42);
        nextMonth = nextMonth.valueOf();
        html = [];
        var clsName;
        while(prevMonth.valueOf() < nextMonth) {
            if (prevMonth.getDay() == this.weekStart) {
                html.push('<tr>');
            }
            clsName = '';
            if (prevMonth.getMonth() < month) {
                clsName += ' old';
            } else if (prevMonth.getMonth() > month) {
                clsName += ' new';
            }
            if (prevMonth.valueOf() == currentDate) {
                clsName += ' active';
            }
            html.push('<td class="day'+clsName+'" style="border: 0px;">'+prevMonth.getDate() + '</td>');
            if (prevMonth.getDay() == this.weekEnd) {
                html.push('</tr>');
            }
            prevMonth.setDate(prevMonth.getDate()+1);
        }
        this.picker.find('.datepicker-days tbody').empty().append(html.join(''));
        var currentYear = this.date.getFullYear();

        var months = this.picker.find('.datepicker-months')
                    .find('th:eq(1)')
                        .text(year)
                        .end()
                    .find('span').removeClass('active');
        if (currentYear == year) {
            months.eq(this.date.getMonth()).addClass('active');
        }

        html = '';
        year = parseInt(year/10, 10) * 10;
        var yearCont = this.picker.find('.datepicker-years')
                            .find('th:eq(1)')
                                .text(year + '-' + (year + 9))
                                .end()
                            .find('td');
        year -= 1;
        for (var i = -1; i < 11; i++) {
            html += '<span class="year'+(i == -1 || i == 10 ? ' old' : '')+(currentYear == year ? ' active' : '')+'">'+year+'</span>';
            year += 1;
        }
        yearCont.html(html);
    },

    click: function(e) {
        e.stopPropagation();
        e.preventDefault();
        var target = $(e.target).closest('span, td, th');
        if (target.length == 1) {
            switch(target[0].nodeName.toLowerCase()) {
                case 'th':
                    switch(target[0].className) {
                        case 'switch':
                            this.showMode(1);
                            break;
                        case 'prev':
                        case 'next':
                            this.viewDate['set'+DPGlobal.modes[this.viewMode].navFnc].call(
                                this.viewDate,
                                this.viewDate['get'+DPGlobal.modes[this.viewMode].navFnc].call(this.viewDate) + 
                                DPGlobal.modes[this.viewMode].navStep * (target[0].className == 'prev' ? -1 : 1)
                            );
                            this.fill();
                            break;
                    }
                    break;
                case 'span':
                    if (target.is('.month')) {
                        var month = target.parent().find('span').index(target);
                        this.viewDate.setMonth(month);
                    } else {
                        var year = parseInt(target.text(), 10)||0;
                        this.viewDate.setFullYear(year);
                    }
                    this.showMode(-1);
                    this.fill();
                    break;
                case 'td':
                    if (target.is('.day')){
                        var day = parseInt(target.text(), 10)||1;
                        var month = this.viewDate.getMonth();
                        if (target.is('.old')) {
                            month -= 1;
                        } else if (target.is('.new')) {
                            month += 1;
                        }
                        var year = this.viewDate.getFullYear();
                        this.date = new Date(year, month, day,0,0,0,0);
                        this.viewDate = new Date(year, month, day,0,0,0,0);
                        this.fill();
                        this.setValue();
                        this.element.trigger({
                            type: 'changeDate',
                            date: this.date
                        });
                    }
                    break;
            }
        }
    },

    mousedown: function(e){
        e.stopPropagation();
        e.preventDefault();
    },

    showMode: function(dir) {
        if (dir) {
            this.viewMode = Math.max(0, Math.min(2, this.viewMode + dir));
        }
        this.picker.find('>div').hide().filter('.datepicker-'+DPGlobal.modes[this.viewMode].clsName).show();
    }
};

$.fn.datepicker = function ( option ) {
    return this.each(function () {
        var $this = $(this),
            data = $this.data('datepicker'),
            options = typeof option == 'object' && option;
        if (!data) {
            $this.data('datepicker', (data = new Datepicker(this, $.extend({}, $.fn.datepicker.defaults,options))));
        }
        if (typeof option == 'string') data[option]();
    });
};

$.fn.datepicker.defaults = {
};
$.fn.datepicker.Constructor = Datepicker;

var DPGlobal = {
    modes: [
        {
            clsName: 'days',
            navFnc: 'Month',
            navStep: 1
        },
        {
            clsName: 'months',
            navFnc: 'FullYear',
            navStep: 1
        },
        {
            clsName: 'years',
            navFnc: 'FullYear',
            navStep: 10
    }],
    dates:{
        days: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"],
        daysShort: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"],
        daysMin: ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa", "Su"],
        months: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
        monthsShort: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"]
    },
    isLeapYear: function (year) {
        return (((year % 4 === 0) && (year % 100 !== 0)) || (year % 400 === 0))
    },
    getDaysInMonth: function (year, month) {
        return [31, (DPGlobal.isLeapYear(year) ? 29 : 28), 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][month]
    },
    parseFormat: function(format){
        var separator = format.match(/[.\/-].*?/),
            parts = format.split(/\W+/);
        if (!separator || !parts || parts.length == 0){
            throw new Error("Invalid date format.");
        }
        return {separator: separator, parts: parts};
    },
    parseDate: function(date, format) {
        var parts = date.split(format.separator),
            date = new Date(1970, 1, 1, 0, 0, 0),
            val;
        if (parts.length == format.parts.length) {
            for (var i=0, cnt = format.parts.length; i < cnt; i++) {
                val = parseInt(parts[i], 10)||1;
                switch(format.parts[i]) {
                    case 'dd':
                    case 'd':
                        date.setDate(val);
                        break;
                    case 'mm':
                    case 'm':
                        date.setMonth(val - 1);
                        break;
                    case 'yy':
                        date.setFullYear(2000 + val);
                        break;
                    case 'yyyy':
                        date.setFullYear(val);
                        break;
                }
            }
        }
        return date;
    },
    formatDate: function(date, format){
        var val = {
            d: date.getDate(),
            m: date.getMonth() + 1,
            yy: date.getFullYear().toString().substring(2),
            yyyy: date.getFullYear()
        };
        val.dd = (val.d < 10 ? '0' : '') + val.d;
        val.mm = (val.m < 10 ? '0' : '') + val.m;
        var date = [];
        for (var i=0, cnt = format.parts.length; i < cnt; i++) {
            date.push(val[format.parts[i]]);
        }
        return date.join(format.separator);
    },
    headTemplate: '<thead>'+
                        '<tr>'+
                            '<th class="prev"><i class="icon-arrow-left"/></th>'+
                            '<th colspan="5" class="switch"></th>'+
                            '<th class="next"><i class="icon-arrow-right"/></th>'+
                        '</tr>'+
                    '</thead>',
    contTemplate: '<tbody><tr><td colspan="7" style="border: 0px;"></td></tr></tbody>'
};
DPGlobal.template = '<div class="datepicker dropdown-menu">'+
                        '<div class="datepicker-days">'+
                            '<table class=" table-condensed" style="border: 0px;">'+
                                DPGlobal.headTemplate+
                                '<tbody></tbody>'+
                            '</table>'+
                        '</div>'+
                        '<div class="datepicker-months">'+
                            '<table class="table-condensed" style="border: 0px;">'+
                                DPGlobal.headTemplate+
                                DPGlobal.contTemplate+
                            '</table>'+
                        '</div>'+
                        '<div class="datepicker-years">'+
                            '<table class="table-condensed" style="border: 0px;">'+
                                DPGlobal.headTemplate+
                                DPGlobal.contTemplate+
                            '</table>'+
                        '</div>'+
                    '</div>'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-27T23:18:23.430

beforeShowDay 应该会有所帮助。

取自文档：

beforeShowDay 函数（日期）。默认值：$.noop

将日期作为参数并返回以下值之一的函数：

undefined to have no effect 布尔值，指示此日期是否可选 表示附加 CSS 类以应用于日期单元格的字符串 具有以下属性的对象： 启用：与上述布尔值相同 类：与字符串值相同上面的工具提示：通过标题 HTML 属性应用于此日期的工具提示

# iphone - xcode中架构armv7的未定义符号

> ID：12274784
> 
> 赞同：2
> 
> 时间：2012-09-05T05:06:40.517
> 
> 标签：iphone, ios, xcode, armv7, benchmarking

使用[codeTimestamp](http://eng.pulse.me/line-by-line-speed-analysis-for-ios-apps/)类检查代码的速度时，我遇到了错误。但是这些课程正在处理任何其他项目。我不知道这是怎么回事。错误是：架构armv7的未定义符号：“__Z25LogTimestampChunkInMethodPKciaa”，引用自：EAGLView.o ld中的-[EAGLView renderFrameQCAR]：未找到架构armv7 clang的符号：错误：链接器命令失败，退出代码为1（使用- v 查看调用）

![在此处输入图像描述](../Images/b4f6aa1d8b76c45a1235cd75e20470b9.png)

提前感谢您的帮助，祝您有美好的一天。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T21:45:48.133

*   你知道你必须在那个文件上设置 -fno-obj-arc 标志，对吧？

*   查看您的 EAGLView 源文件，并找到您使用 LogTimestampStartChunk 的位置。这是您添加 LogTimestampStartChunk 的唯一文件吗？如果是这样，那么无论出于何种原因，CodeTimeStamp.o 都不会添加到您的目标中。如果您确实在其他文件中使用了 LogTimestampStartChunk，请将其从 EAGLView 中注释掉，看看您是否可以构建它。

最终，如果您甚至无法在一个文件中使用此宏并构建项目，那么您永远不会包含 CodeTimeStamp.o 文件。如果您可以通过其他方式构建它，那么它与 EAGLView 有关。

# matlab - 特定颜色轮廓

> ID：12274785
> 
> 赞同：3
> 
> 时间：2012-09-05T05:06:40.517
> 
> 标签：matlab, colors, contour

我需要一起使用所有这些命令。问题是输出不是黑色的。

```
contour(f',[0.002]);
az = 90;
el = 90;
view(az, el);
axis off 
set(gcf,'color',[1 1 1]); 
```

我也试过

```
[C,h] = contourf(f');
Cld = get(h, 'Children');
for j=1:length(Cld)
if strcmp(get(Cld(j), 'Type'), 'patch')
    Iso = get(Cld(j), 'CData');
    if Iso<-.00002
        set(Cld(j), 'cdata', 0);
    elseif Iso>=-.00002 && Iso<0.00002
        set(Cld(j), 'cdata', 0);
    end
end
end 
```

但它给出了所有轮廓，而我只需要一个具有特定值的轮廓，即 0.002。非常感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T06:21:48.593

你只想要一个简单的黑色等高线图吗？尝试这个：

```
contour(f', [0.002], 'LineColor', [0 0 0]); 
```

# python - 如何以正确的方式部署一个简单的 python 网络服务器？

> ID：12274786
> 
> 赞同：2
> 
> 时间：2012-09-05T05:06:57.757
> 
> 标签：python, web-deployment, web.py

我对python很陌生。我已经开始学习一些课程，现在，我正在尝试部署一个基于 web.py 的简单网络服务器。有人可以帮助我并回答这两个问题：

1.  `/home/.../public_html/cgi-bin/lib/python/web`我在目录中安装了 web.py。`public_html`- 我的网站开始的目录。那么我应该在顶部的python脚本中写什么？

    我的意思是，如果我只写`import web`脚本，则只能在`/public_html/cgi-bin/lib/python/`目录中正常工作。我可以将脚本放在其他目录中，不是吗？在这种情况下，我应该在导入部分写什么？

2.  根据 webpy.org，一个简单的“Hello world”网络应用程序如下所示：

    ```
    import web

    urls = (
        '/(.*)', 'hello'
    )
    app = web.application(urls, globals())

    class hello:        
        def GET(self, name):
            if not name: 
                name = 'World'
            return 'Hello, ' + name + '!'

    if __name__ == "__main__":
        app.run() 
    ```

当我运行它时，网络服务器将默认端口作为`8080`. 如何将其更改为标准 80，这将使我的网站可以通过 url 访问`http://website.com`？

PS在我看来，格式化在stackoverflow上不能正常工作。对此感到抱歉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T07:08:14.963

对于您的第二个问题：尝试覆盖运行。

```
import web

class MyApplication(web.application):
    def run(self, port=8080, *middleware):
        func = self.wsgifunc(*middleware)
        return web.httpserver.runsimple(func, ('0.0.0.0', port))

urls = (
   '/(.*)', 'hello'
)

class hello:
    def GET(self, name):
        if not name:
            name = 'World'
        return 'Hello, ' + name + '!'

if __name__ == "__main__":
    app = MyApplication(urls, globals())
    app.run(port=8888) 
```

# windows-8 - Windows 8 Release Preview 是否支持 Bing 地图？

> ID：12274792
> 
> 赞同：0
> 
> 时间：2012-09-05T05:07:33.853
> 
> 标签：windows-8, bing-maps

我在运行 Bing 地图示例时遇到错误。我正在尝试在引用中添加 Microsoft Visual C++ 运行时包，但我找不到它。Windows 8 Release Preview 是否支持 Bing 地图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T14:44:23.120

根据[这篇](http://timheuer.com/blog/archive/2012/03/06/bing-maps-for-winrt-xaml.aspx)博客文章，您可能没有安装 Visual C++ 运行时包，或者如果您在参考管理器中标记了复选框并且遇到了一组错误（如博客中所示），您可能有更改您的目标架构--amd 或 x86。

Microsoft 提供的[文档](http://msdn.microsoft.com/en-us/library/hh855146.aspx)中有关于如何将 Bing 地图添加到应用程序的分步说明。

# windows-phone-7 - 从 Windows Phone 7 中的列表视图数据模板中的用户控件绑定到父页面中的值

> ID：12274794
> 
> 赞同：1
> 
> 时间：2012-09-05T05:07:53.330
> 
> 标签：windows-phone-7, xaml, data-binding, binding, datatemplate

我有一个 ViewCharacter 页面，它有一个视图模型 (CharacterViewModel) 作为其 DataContext，在该 CharacterViewModel 中，我有一个 ListBox 用作 ItemSource 的 WeaponViewModel 的 ObservableCollection。ListBox 的 DataTemplate 包含一个为父页面的 View Model 的 ObservableCollection 中的 WeaponViewModels 设计的 UserControl。我需要将 UserControl 中按钮的 CommandParameter 绑定到父页面的视图模型 (CharacterViewModel) 上的属性。我尝试过使用`{Binding DataContext.TargetProperty, RelativeSource={RelativeSource TemplatedParent}}`但没有成功，并且在不彻底破坏所有 MVVM 模式的情况下不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T05:12:04.483

Windows Phone 7 缺少相对源绑定。我在这里创建了一个 Silverlight 实现：

[http://www.scottlogic.co.uk/blog/colin/2009/02/relativesource-binding-in-silverlight/](http://www.scottlogic.co.uk/blog/colin/2009/02/relativesource-binding-in-silverlight/)

但是对于性能至关重要的 WP7，我会避免使用它！

相反，我建议在`CharacterViewModel`和之间建立`WeaponViewModel`双向关系。换句话说，添加一个`Parent`属性，`WeaponViewModel`该属性将作为对拥有的引用`CharacterViewModel`。`CharacterViewModel`然后，您可以通过此属性绑定到属性。

# linux - 如何为 IP 范围添加 spft 记录？

> ID：12274809
> 
> 赞同：0
> 
> 时间：2012-09-05T05:09:53.640
> 
> 标签：linux, dns

我想添加 spf 记录范围为 25 个 ip 地址。

例如：192.168.1.225 到 192.168.1.250

如何在 spf 记录中添加它？这是否正确：

```
v=spf1 ip4:192.168.1.225-250/24 a mx ?all 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T07:29:43.653

使用 CIDR 表示法“v=spf1 ip4:192.168.1.224/27 a mx ?all”

# python - python 2.4 的 functools.wraps

> ID：12274814
> 
> 赞同：3
> 
> 时间：2012-09-05T05:10:29.803
> 
> 标签：python, python-2.4

[`functools.wraps`](http://docs.python.org/library/functools.html#functools.wraps)在 python 2.4 中不可用。在 python 2.4 中是否有任何其他模块可以代替这个模块？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-05T05:21:32.797

您可以从 Python2.5 复制 functools 代码并使其在 Python2.4 中工作，只需进行微小更改（用*lambda*替换*partial*）： [http ://hg.python.org/cpython/file/b48e1b48e670/Lib/functools .py#l15](http://hg.python.org/cpython/file/b48e1b48e670/Lib/functools.py#l15)

这是部分的简单替换：

```
def partial(func, *args, **kwds):
    "Emulate Python2.6's functools.partial"
    return lambda *fargs, **fkwds: func(*(args+fargs), **dict(kwds, **fkwds)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-14T15:57:37.883

详细阐述 Raymond Hettinger 的回答：

```
WRAPPER_ASSIGNMENTS = ('__module__', '__name__', '__doc__')
WRAPPER_UPDATES = ('__dict__',)
def wraps(wrapped, assigned=WRAPPER_ASSIGNMENTS, updated=WRAPPER_UPDATES):
  def partial(func, *args, **kwds):
    return lambda *fargs, **fkwds: func(*(args+fargs), **dict(kwds,**fkwds))
  def update_wrapper(wrapper, wrapped, assigned=WRAPPER_ASSIGNMENTS,
                     updated=WRAPPER_UPDATES):
    for attr in assigned:
      setattr(wrapper, attr, getattr(wrapped, attr))
    for attr in updated:
      getattr(wrapper, attr).update(getattr(wrapped, attr, {}))
    return wrapper
  return partial(update_wrapper, wrapped=wrapped,
                 assigned=assigned, updated=updated) 
```

# tridion - 如何从 FinishActivityEvent 处理程序中获取下一个活动详细信息？

> ID：12274816
> 
> 赞同：3
> 
> 时间：2012-09-05T05:10:38.390
> 
> 标签：tridion, tridion-2011

我已经订阅了带有 TransactionCommitted 阶段的 WorkflowFinishActivityEvent。我正在获取当前已完成活动的详细信息，如下所示

1.  当前已完成活动的执行者

    `foreach(var performer in currentactivity.Performers)`

    `{` `string Performeroftheactivity= performer .title.tostring();`
    `}`

2.  当前完成活动的完成消息

    `string finishmessage = currentactivity.FinishMessage.Tostring()`

我的问题：

我想从当前完成的活动事件中获取下一个分配的活动标题和受让人。

谁能帮我如何获得这些？我在 API 中看不到任何相关的属性或方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T06:41:47.050

您在 上有下一个受让人`FinishActivityEventArgs.ActivityFinish.NextAssignee`。至于下一个活动——暂时无法知道。考虑订阅活动实例保存事件参数。通过这种方式，您将了解创建了哪些活动以及谁是受让人。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-05T13:43:49.190

您可以通过加载当前流程定义、确定当前活动的位置并弄清楚下一步是什么来获取下一个活动。

Mihai Cadaru在[这篇文章](http://yatb.mitza.net/2012/05/workflow-getnextactivityinstance.html)中或多或少地展示了这一点。

编辑 - 删除了关于这个不受支持的愚蠢评论。由于您在事件系统中，因此该代码将起作用。如果您想在工作流自动活动中使用它，则必须使用 CoreService。

# java - 在线程中使用静态变量作为不同实例之间的通信

> ID：12274821
> 
> 赞同：1
> 
> 时间：2012-09-05T05:11:01.520
> 
> 标签：java, thread-safety

我有一个多线程批处理应用程序，可以在 5-10 个并发执行线程之间运行。它们的数据段被仔细切割以尽可能均匀地分布，但当然，执行时间总是不同的。我想做的是在最后一个线程完成时调用最后一种 onFinalize 方法，这将进行一些统计计算。

我想知道是否知道线程是最后一个线程的最佳方法（而不是查询数据库，这似乎有点行人）是拥有一个静态变量，当一个新线程是时，它将在同步块中递增每个线程完成时添加和减少。因此，当一个线程完成并递减时，我可以有一个 if 来查看未完成的线程数是否为 0，然后调用最终统计信息。

这就是我的想法。我想知道是否有更好、更优雅或防弹的方法来实现这一点。

使用 Java 7

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T05:17:02.833

为什么不在最后在每个线程上调用 Thread.join() 呢？你可以有一个 for 循环在每个循环上调用它——它会在第一次运行时锁定，然后当那个完成时，返回，然后你在下一次运行时锁定。当您退出循环时，它们都已退出。

```
public class ThreadManager {
    private List<Thread> threads;

    public void addThread(Thread thread) {
        threads.add(thread);
    }

    public void waitTillAllComplete() {
        for (int ind=0; ind<threads.size(); ind++)
            threads.get(ind).join();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T05:32:22.910

我通过创建一个扩展基本`Runnable`接口以提供更健壮的线程架构的框架来完成类似的事情。后来我发现它与 GWT 中用于类似目的的异步代码惊人地相似。

这是凭记忆，但基本上可以归结为：

```
public interface AsyncRunnable<T> extends Runnable
{
    AsyncCallback<T> getCallback();

    T runAsync();
}

public interface AsyncCallback<T>
{
    void onSuccess(T data);
    void onFailure(Exception exception);
}

public interface AsyncCallbackInvoker<T> extends Runnable
{
    // implies requirement for callback...
    AsyncCallback<T> getCallback();
}

public class SuccessfulAsyncCallbackInvoker<T> implements AsyncCallback<T>
{
    private final AsyncCallback<T> callback;
    private final T data;

    public SuccessfulAsyncCallbackInvoker(AsyncCallback<T> callback, T data)
    {
        // note: data being null may be valid; callback would not be

        this.callback = callback;
        this.data = data;
    }

    @Override
    public void run()
    {
        callback.onSuccess(data);
    }

    @Override
    public AsyncCallback<T> getCallback()
    {
        return callback;
    }
}

public class FailureAsyncCallbackInvoker<T> implements AsyncCallback<T>
{
    private final AsyncCallback<T> callback;
    private final Exception  exception;

    public FailureAsyncCallbackInvoker(AsyncCallback<T> callback, Exception exception)
    {
        // note: data being null may be valid; callback would not be

        this.callback = callback;
        this.exception= exception;
    }

    @Override
    public void run()
    {
        callback.onFailure(exception);
    }

    @Override
    public AsyncCallback<T> getCallback()
    {
        return callback;
    }
}

public abstract class AbstractAsyncRunnable<T> implements AsyncRunnable<T>
{
    private final AsyncCallback<T> callback;

    public AbstractAsyncRunnable(AsyncCallback<T> callback)
    {
        // if == null -> throw

        this.callback = callback;
    }

    @Override
    public /* final */ void run()
    {
        AsyncCallbackInvoker<T> invoker;

        try
        {
            T data = runAsync();

            invoker = new SuccessfulAsyncCallbackInvoker<T>(callback, data);
        }
        catch (Exception e)
        {
            invoker = new FailureAsyncCallbackInvoker<T>(callback, e);
        }

        invokeCallback(invoker);
    }

    // allows overriding to put callback on whatever Thread you want
    protected void invokeCallback(AsyncCallbackInvoker<T> invoker)
    {
        invoker.run();
    }
} 
```

在实践中，它已被证明非常健壮，特别是通过提供覆盖能力，`invokeCallback`我们能够利用许多线程安全操作来保证响应。

在实践中，实现只需要重写`runAsync`方法`AsyncRunnable`并提供`AsyncCallback`他们认为合适的任何东西。重要的是要注意，在某些情况下，您确实将它用于简单地标记完成，并且在这种情况下可以`T`（`Void`如果您使用它）。`return null``runAsync`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T05:34:55.170

所以你还能做的就是创建一个`ThreadManager`类。这个类应该有一个`List<Thread>`. 每当您创建一个新`Thread`任务来执行您的任务时，您都应该`register`在`ThreadManager`. 然后创建一个方法，在该方法中`ThreadManager`返回.`number``live Threads``List`

通过这种方式，您可以随时查看有多少线程正在运行，并且您可以根据需要对正在运行的线程执行任何其他操作。另外一个`Thread`应该定期运行，它应该从`List`.

示例`ThreadManager`可能如下所示：

```
public class ThreadManager {
    private static ThreadManager tm;
    private List<Thread> threads;

    public static ThreadManager get() {
        if(null == tm) {
            tm = new ThreadManager();
        }

        return tm;
    }

    private ThreadManager() {
        threads = new ArrayList<Thread>();
    }

    public int getCountOfAliveThreads() {
        int count = 0;
        for(Thread t : threads) {
            if(t.isAlive()) {
                count++;
            }
        }

        return count;
    }
} 
```

希望这可以帮助。您还可以在`Thread List`.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-05T05:43:14.493

我感谢所有超级有用和启发性的答案，但是，带有静态和易失性的简单计数器似乎工作正常：

```
private static volatile int crntThrdCnt = 0; 
```

进而

```
 @Override
public void run() 
{
    crntThrdCnt++;
    this.runBatchInstance();
    crntThrdCnt--;

    if(crntThrdCnt == 0)
    {
        ProcessManager prcsMgr = new ProcessManager();
        Batch batch = prcsMgr.getBatch(this.batchID);
        batch.setEndTime(new Date());
        prcsMgr.updateBatch(batch);
    }
} 
```

# objective-c - 如何在没有情节提要的情况下使用 splitview 向下钻取并显示详细的 uitableview

> ID：12274822
> 
> 赞同：0
> 
> 时间：2012-09-05T05:11:06.323
> 
> 标签：objective-c, cocoa-touch, uitableview, xcode4

我使用 2 个 UITableViews 和一个 UIViewController 实现了一个拆分视图。用自己的数据在屏幕上显示两者都可以正常工作。现在在我的 DidSelectRowForIndexPath 中，我做了以下事情：

```
DetailViewController *nextController = [[DetailViewController alloc] initWithStyle:UITableViewStylePlain];
NSMutableArray *objects;
objects = [[NSMutableArray alloc] initWithObjects:@"A", @"B", nil];
nextController.title = @"Filter";
[nextController SetArray:objects];
UINavigationController *nc = [[UINavigationController alloc] initWithRootViewController:nextController];
[self presentModalViewController:nc animated:YES];
//used this before [self.navigationController pushViewController:nextController animated:YES];
[FilterView deselectRowAtIndexPath:indexPath animated:YES]; 
```

1.  也许你知道一个更好的方法，就像我展示 nextController 所做的那样
2.  nextController 总是从底部出现并移动到顶部。我怎样才能完成这个默认的滑动动画，其中详细视图从右侧进入视图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T05:44:57.880

如果您在创建项目时从主/详细模板启动了应用程序。然后它将在 appDelegate`didFinishLaunching`方法中自动设置导航控制器，因此在`didSelect`您必须使用的方法中

```
`[self.navigationController pushViewController:vc animated:YES];` 
```

代替

`[self presentModalViewController:nc animated:YES];`

[这](http://dl.dropbox.com/u/58723521/SplitTableView.zip)是一个示例代码，它使用拆分视图和导航到根视图和从根视图导航。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T08:18:10.097

首先你需要确认你有 UINavigationController 在基地然后你可以 pushViewController:nextController

```
[FilterView deselectRowAtIndexPath:indexPath animated:YES];
DetailViewController *nextController = [[DetailViewController alloc] initWithStyle:UITableViewStylePlain];
NSMutableArray *objects;
objects = [[NSMutableArray alloc] initWithObjects:@"A", @"B", nil];
nextController.title = @"Filter";
[nextController SetArray:objects];
[self.navigationController pushViewController:nextController animated:YES]; 
```

# android - 其他应用启动的活动，使用现有实例

> ID：12274824
> 
> 赞同：0
> 
> 时间：2012-09-05T05:11:21.767
> 
> 标签：android, android-intent, android-activity, instance

我的应用程序有两个活动 MainActivity 和 ExternEntry。ExternEntry 被其他一些应用程序调用，作为启动我的应用程序的一种方式。然后，ExternEntry 将调用 MainActivity 上的 startActivity，它可能之前已经启动过。我的问题是，如何在后台恢复 MainActivity 实例？

请注意，这与在同一应用程序中切换活动不同。每次调用 ExternEntry 时，它是否也会创建一个新堆栈？

我试过了

```
 Intent i = new Intent(this, MainActivity.class);
        i.setAction(Intent.ACTION_MAIN);
        i.addCategory(Intent.CATEGORY_LAUNCHER);
        startActivity(i); 
```

和

```
 Intent i = new Intent(this, MainActivity.class);
        i.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
        startActivity(i); 
```

在 ExternEntry 中，但都创建了 MainActivity 的新实例。

我也尝试将 MainActivity 设置为“singleTask”，但这也不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:08:21.763

我认为您应该在 android 清单文件中声明启动模式。

```
<activity
        android:name=".name"
        android:launchMode="singleTask"
        > 
```

我希望它会帮助你。

# ios - 不小心删了一个iOS框架，有没有下载下来

> ID：12274827
> 
> 赞同：3
> 
> 时间：2012-09-05T05:11:32.047
> 
> 标签：ios, xcode, frameworks

在iOS5.0中，我不小心删除了messageUI.framework，现在Xcode库中不存在了。有什么方法可以只下载框架，还是必须重新安装 Xcode 才能恢复框架？

在此先感谢您的帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-09T10:11:52.990

如果您的 xCode 的位置不同，上述方法将不起作用。对于该 Open xCode，单击顶部项目蓝色图标。单击目标-> 构建阶段-> 将二进制文件与库链接

现在右键或控制单击任何现有框架并在 Finder 中显示。

这样您将获得所有现有框架的默认位置。现在转到该位置并再次添加已删除的框架。

重新启动 xcode 然后你会看到你删除的框架和以前一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T05:31:04.253

在项目的构建阶段下，转到“将二进制文件与库链接”部分，然后按 + 按钮。

在搜索字段中键入“消息”，它应该会回来。选择它，它将被添加。

# php - 在php中获取mysql用户定义的变量

> ID：12274829
> 
> 赞同：1
> 
> 时间：2012-09-05T05:11:44.010
> 
> 标签：php, mysql, pdo

我有这样的查询

```
SET @update_id := 0;  
UPDATE table SET column = something, id = (SELECT @update_id := id)  
WHERE condition  
LIMIT 1;   
SELECT @update_id; 
```

它应该更新一列并返回更新后的行的 id。如您所见，在执行查询之前我没有行的ID。
我正在使用 pdo，**有没有办法`@updated_id`在 php 中获取值？**
当我`SQLSTATE[HY000]: General error`尝试使用`$stmt->fetchColumn();`.
我也确定查询是正确的，因为我在 phpMyadmin 中执行了它，它返回了一个正确的值，所以它工作正常。phpMyadmin 中的结果如下：

```
|   @updated_id    |  
|------------------|   
|        32        | 
```

并且更新了 id 为 32 的行中的所需列（具有条件）。
有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T06:43:52.610

我认为您可以在阅读简单表格时阅读此值。您还可以添加字段别名并按名称读取此字段 - `SELECT @update_id AS updated_id`。

另一种变体是使用[SELECT...FOR UPDATE](http://dev.mysql.com/doc/refman/5.5/en/select.html)语句。

# c# - 在没有要插入的数据时阻止查询插入

> ID：12274837
> 
> 赞同：-1
> 
> 时间：2012-09-05T05:12:42.880
> 
> 标签：c#, sql-server-ce

我正在使用 C# 和 SQL Server CE，我的问题是：

1.  在我的 WinForms 应用程序中，我有几个要填充数据的文本框。我想知道如何防止在没有填充文本框的情况下插入用户错误？

2.  如何确定何时文本框中没有数据用于查询插入？

这是我的代码：

```
koneksi.Open();
int query = perintahsql.ExecuteNonQuery();
try
{
    if (query > 0)
    {
        MessageBox.Show("Success.");
    }
    else
    {
        MessageBox.Show("Can't insert record because of empty(s) field.");
        perintahsql.Cancel();
    }
}
catch(Exception ex)
{
    MessageBox.Show(ex.ToString(), "Can't insert record!");
    perintahsql.Parameters.Clear();
}
koneksi.Close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T05:16:28.417

在将数据插入数据库中之前，您需要为您运行的文本字段提供一种验证方法，因此您可以根据需要使用更多方法。例如：

[控制验证](http://www.codeproject.com/Articles/2608/C-Validating-TextBox-Control)

[编写自己的验证例程](https://codereview.stackexchange.com/questions/4840/validation-function-code-review)

使用[验证库](http://www.codeproject.com/Articles/22242/Validation-Library-using-C-3-0-Lambda-Expressions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T05:17:59.200

如果它适合您，请尝试此解决方案。

```
private bool ReadyToInsert()
{
    bool isOk = true;
    TextBox[] arrText = new TextBox[] { textBox1, textBox2, textBox3 };

    foreach (TextBox i in arrText)
    {
        if (i.Text.Trim().Length == 0)
        {
            isOk = false;
        }
    }
    return isOk;
} 
```

这是一个检查表单中所有文本框的函数。在尝试插入记录之前调用此函数。

用法：*像这样*

```
// other codes here
if (ReadyToInsert)
{
    // call insert method here
}
else
{
    MessageBox.Show("Can't insert record because of empty(s) field.");
} 
```

# sql-server - 如何将excel数据库导入MSSQL 2000，同时保留数据库结构

> ID：12274838
> 
> 赞同：0
> 
> 时间：2012-09-05T05:12:44.757
> 
> 标签：sql-server, sql-server-2000

我在 Excel 中有一个数据库，带有 col。说 A、B、C 和 D。现在，我想将这个数据库导入 MS SQL，并使用已经存在的表，其结构为 uniqueID(Auto Incr.)、A、B、C、D。如何导入这些数据？

我在 MS SQL 2000 中工作。我使用了自定义查询生成器并选中了“启用身份插入”。但是我仍然收到“无法为 uniqueID 插入 null”的错误。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T06:03:14.167

我找到了解决方案。仅当未选中“启用身份插入”时才可能。

# android - 在android中动态更新数据值

> ID：12274839
> 
> 赞同：0
> 
> 时间：2012-09-05T05:13:04.233
> 
> 标签：android, mysql, web-services, dynamically-generated

在我的第一个活动中，必须通过肥皂调用开发登录表单（用户名、密码和按钮）。它工作成功。

在第二个活动中，必须使用 xml 解析来列出视图......它也运行良好。

在第三个活动中必须显示特定订单的详细描述。（如果我必须单击第二个活动中的任何订单意味着订单详细描述显示在第三个活动中）......它也很好用。在这个活动中也有一个按钮（更改订单状态）..如果我必须单击按钮意味着它是进入第四个活动..

在第四个活动中必须显示一个字段微调器（状态）...这里微调器值通过第四个活动中的肥皂调用更新...但在查询手段下工作`UPDATE xcart_orders set status = '"+Status+"',orderid = '"+Orderid+"' where orderid = '12'`...但不适用于此查询

`UPDATE xcart_orders set status = '"+Status+"',orderid = '"+Orderid+"' where orderid = '"+Orderid+"'`...

所以我希望需要使用上面的查询并单击第二个活动中的任何订单意味着它进入第三个活动......现在我必须点击更改状态订单按钮意味着它进入第四个活动......第四个活动我必须更改状态意味着状态在该特定 orderid 中更新..请我如何开发这个..请帮助我...如何在此处管理代码...

请参考我的代码：[SingleMenuItemActivity](http://pastie.org/4656259) (SingleMenuItemActivity) [http://pastie.org/4656261InsertionExample](http://pastie.org/4656261InsertionExample) ) [http://pastie.org/4656262(update](http://pastie.org/4656262(update) )

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T05:55:14.343

您不能这样更新，因为您正在更新与 where 条件相同的值。

假设您想将 orderid 12 更新为 13，那么您的查询应该像这样 String orderid1 = 13; 字符串 orderid2 = 12; "更新`xcart_orders`集`status`= '"+Status+"', `orderid`= '"+Orderid1+"' 其中`orderid`= '"+Orderid2+"'"

但是在您的情况下，您在两个地方都使用相同的变量，如果您的数据库中存在即将到来的值，它将起作用，但在这种情况下执行该查询没有任何意义。

如果您仍有任何疑问，请回复。

# uiviewcontroller - 编写一次自定义 navigationItem.rightBarButtonItem 并在 UITableViewControllers 和 UIViewControllers 中重用它？

> ID：12274843
> 
> 赞同：0
> 
> 时间：2012-09-05T05:13:20.443
> 
> 标签：uiviewcontroller, uitableview, subclass, viewcontroller, code-cleanup

我已经成功地将一个添加`rightBarButtonItem`到我`navigationBar`的`ViewController`. 这是我当前的设置：

```
 -->TVC
               |
NVC--->TVC--->TVC--->VC 
```

到目前为止，我已经`UITableViewController`将用于将按钮添加到子类中的代码进行了子类化和移动。我的所有 3 个`TableViewControllers`都设置为该子类，并且效果很好。

但是现在我需要我一个`ViewController`人来显示按钮，但我不知道如何在不复制我的 TVC 子类中的代码的情况下完成此操作。子类化是正确的答案还是我需要不同的方法？

编辑：

@CarlVeazey - 当然，我从 viewDidLoad 函数中调用它。

```
self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"BETA" style:UIBarButtonItemStylePlain target:self action:@selector(betaPressed)]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T05:28:32.267

`UIViewController`对类别进行上拉重构。如果您的项目已经有一个，只需在此处添加此代码，否则在 Xcode 中按 cmd-N 创建一个新文件并选择“Objective-C Category”并`UIViewController`在“Category On”字段中输入。

在接口中添加此方法声明：

```
- (void)onfConfigureRightNavigationBarButton; 
```

并在实现中添加此方法实现：

```
- (void)onfConfigureRightNavigationBarButton
{
    self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"BETA" 
                                                                              style:UIBarButtonItemStylePlain 
                                                                             target:self 
                                                                             action:@selector(betaPressed)];
} 
```

然后在任何子`UIViewController`类中，您可以导入您的类别标题并调用此方法。您可能还希望在您的类别中添加`betaPressed:`.

顺便说一句，ONF 是我用于非工作编码的前缀，因此请使用项目中已有的任何前缀，或者如果您不关心类别名称冲突，则根本不使用。

# apache-flex - 在 Flex 3.2 中，在模块中将远程对象结果转换为客户端的特定对象时遇到问题

> ID：12274850
> 
> 赞同：0
> 
> 时间：2012-09-05T05:13:44.350
> 
> 标签：apache-flex, remoteobject

在 Flex 3.2 中，将远程对象结果转换为模块中客户端的特定对象时遇到问题。

例如我有 VIPSAdmin 模块。

它有功能

```
private function doResult(event:ResultEvent):void {
var data_:Array = ArrayUtil.toArray(event.result); 
var result:ResultDTO = data_[0] as ResultDTO;
if(!result.isError()) {
    trace(result.result);
    vipsAdminDTO = result.result as VIPSAdmin;
    compId= vipsAdminDTO.compId; // second time dying here
} 
```

}

当我从远程对象获取数据时调用的函数。

第一次一切都很好，当我卸载这个模型并再次加载它时：

data_[0] 作为 ResultDTO；

表现不错，但是

vipsAdminDTO = result.result 作为 VIPSAdmin;

vipsAdminDTO 始终为空！

即使当

跟踪（结果。结果）；

产生 [object VIPSAdmin]

我在这里想念什么！？看起来它只是不能做

result.result 作为 VIPSAdmin；

即使跟踪和调试说它是 VIPSAdmin 的实例

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T21:10:39.820

我已经弄清楚了问题所在，问题是当我第一次在模块中实例化某些东西然后在主应用程序中时，即使它们是相同的，类也没有对齐！

所以解决方案是首先在应用程序类中创建一个假实例，然后如果您使用同一个类在模块中创建一个实例，它将起作用！

我在我刚刚添加的主应用程序类中做的非常简单：

```
VIPSAdmin; 
```

这似乎创建了某种幽灵实例，我相信稍后会被 GC 拾取，但会正确构建实例表！这解决了我的问题。

不确定这是否是合适的解决方案！但它确实有效。

# ios5 - ios从Web服务器滚动加载图像

> ID：12274856
> 
> 赞同：1
> 
> 时间：2012-09-05T05:14:35.490
> 
> 标签：ios5

对于 iPhone 5.0，我以 json 形式从服务器获取大量图像（图像 url）和文本数据。我的要求是从服务器加载前五张图片，当用户向下滚动时加载接下来的五张图片，依此类推。我需要在 UITableViewCell 中显示它。通过这样做，我可以减少网络调用并使应用程序在设备上运行得更快。

目前，我正在使用后台线程来加载图像，但它们会在后台持续加载。我不想这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T05:25:07.353

检查来自 Apple 的示例代码。它应该回答你的问题。

[懒表图像](http://developer.apple.com/library/ios/#samplecode/LazyTableImages/Listings/Classes_RootViewController_m.html)

它用于`UIScrollViewDelegate`实现以下功能

```
- (void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate
{
    if (!decelerate)
    {
        [self loadImagesForOnscreenRows];
    }
}

- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView
{
    [self loadImagesForOnscreenRows];
} 
```

基本上它可以满足您的需求 - 只需加载可见单元格的图像。

用`[self.tableView indexPathsForVisibleRows]`你可以调用`startIconDownload`函数到指定的tableCell

# android - andEngine 中的声音问题

> ID：12274858
> 
> 赞同：0
> 
> 时间：2012-09-05T05:14:56.690
> 
> 标签：android, andengine

我正在使用andEngine 开发游戏。我想为这个游戏添加背景声音。我尝试实现声音，但没有播放声音。请帮帮我。这是我的代码：

onLoadEngine()

```
return new Engine(new EngineOptions(true, ScreenOrientation.LANDSCAPE,
                new FillResolutionPolicy(), this.mCamera).setNeedsSound(true)) 
```

onLoadResources()

```
 Sound bgSound;
 SoundFactory.setAssetBasePath("gfx/");
 this.bgSound = SoundFactory.createSoundFromAsset(this.mEngine.getSoundManager(), this,              "bg.mid");
 bgSound.setLoopCount(-1);
 bgSound.play(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T07:08:00.037

将这两行移到`onCreateScene()`方法中：

```
 bgSound.setLoopCount(-1);
 bgSound.play(); 
```

另外，打电话`SoundFactory.createMusicFromAsset`而不是`SoundFactory.createSoundFromAsset`

# graphics - 如何“捕获”我的表面补丁以防止背景从裂缝中渗出？

> ID：12274863
> 
> 赞同：0
> 
> 时间：2012-09-05T05:16:25.440
> 
> 标签：graphics, 3d, postscript

为了应对 comp.lang.postscript 中的[挑战](https://groups.google.com/d/topic/comp.lang.postscript/DXfU2xrRCxY/discussion)，我正在处理我的 3D 印章，试图将圆柱体渲染为投影的矩形补丁。但即使在我注释掉线条图后，我仍然看到线框，因为补丁不会齐平。

通过在 z (-2 .. 2, step 4/N) 和 theta (0 .. 360, step 360/N) 上双循环，沿 z 轴对圆柱体进行建模。矩形的四个点是：

*   v1 = (R *cos T, R* sin T, z)
*   v4 = (R *cos T, R* sin T, z+dz)
*   v2 = (R *cos (T+dT), R* sin (T+dt), z)
*   v3 = (R *cos (T+dT), R* sin (T+dt), z+dz)

然后我们对所有四个点应用模型->世界旋转。然后我们取向量 v1->v4 和 v1->v2 并进行叉积以获得补丁的法线向量。用眼睛矢量进行点积，检查补丁是否在形状的“这一侧”；如果没有，请跳过绘图并继续下一个补丁（从循环底部掉下来）。然后我们对每个点应用透视投影，并使用常规后记 2D moveto 和 lineto 绘制四边形。对法线向量进行最后一次计算以设置灰度级，然后进行填充。

*所以问题是：*有没有通常的方法来处理这个问题？它是一个 3D 问题还是只是一个数值问题（浮点舍入之类的东西）？在计算点数时，我是否只是在我的 dz 和 dT 中添加了一些软糖因素？或者明确地抚摸边缘？最后两个选项都产生了预期的结果，但我不能说我对它们感到满意。虽然每个制作都用于单独的插图，但它并不能真正*解决问题*，你知道吗？

* * *

我把正在使用的积分转储了。这是 N=12 的前几个。在我看来，正如预测的那样，v2 和 v3 与*乐队*下一段的 v1 和 v4 恰好重合。`moveto`这些是传递给并`lineto`生成各个四边形的二维“用户坐标” 。由于 CTM 没有改变，这些点应该映射到相同的像素，对吧？因此，它似乎与链接问题非常相似。但我使用 Postscript 正是因为我不想写自己的光栅化例程 :)。我真的认为映射到 Postscript 的链接问题的解决方案是反转交替棋盘格的方向，至少对于 N 来说。这样，所有对应的边*都是*以相同的方向（彼此）绘制。

```
[-2.64550757 2.08465409]
[-3.00470281 1.69015563]
[-2.7090168 1.69015563]
[-2.38403082 2.08465409]

[-3.00470281 1.69015563]
[-3.28940701 0.936108589]
[-2.96660638 0.936108589]
[-2.7090168 1.69015563]

[-3.28940701 0.936108589]
[-3.4 -0.0666666701]
[-3.0666666 -0.0666666701]
[-2.96660638 0.936108589]

[-3.4 -0.0666666701]
[-3.28940701 -1.05890918]
[-2.96660638 -1.05890918]
[-3.0666666 -0.0666666701]

[-3.28940701 -1.05890918]
[-3.00470281 -1.78584146]
[-2.7090168 -1.78584146]
[-2.96660638 -1.05890918]

```

* * *

我添加了一个简单的灯光模型并对其进行了调整以产生更多的中频。Jpeg 输出没有出现问题，可能是由于有损压缩。所以这是一个PNG快照。

![PNG 快照](../Images/b1afd6fdc6a10de4fbbb471fc5abd10b.png)

如果我使用眼睛矢量作为光源，效果会更加明显。左边的 xpost 显示了问题，右边的 gs 显示了修改，其中 dz 和 dt 乘以 1.06 的软糖因子。

![眼光裂缝和软糖](../Images/ab9c11f99928074f64d118c1bc1027bc.png)

和代码：[*不要使用这个代码。matmul 例程中有错误。更正的例程可[在此处](http://web.archive.org/web/20160404161504/https://code.google.com/p/xpost/downloads/detail?name=mat.ps&can=2&q=)获得。已完成的挑战可[在此处](http://web.archive.org/web/20160404161504/https://code.google.com/p/xpost/downloads/detail?name=3d5c.ps&can=2&q=)获得。*]

```
%!
%A shaded cylinder! Woohoo!

%(mat.ps) run
%!
%mat.ps
%Matrix and Vector math routines

/.error where { pop /signalerror { .error } def } if

/dot { % u v
    2 copy length exch length ne {
        /dot cvx /undefinedresult signalerror
    } if
    % u v
    0 % u v sum
    0 1 3 index length 1 sub { % u v sum i
        3 index 1 index get exch % u v sum u_i i
        3 index exch get % u v sum u_i v_i
        mul add % u v sum
    } for % u v sum

    3 1 roll pop pop % sum
} bind def

% [ x1 x2 x3 ] [ y1 y2 y3 ]  cross  [ x2*y3-y2*x3 x3*y1-x1*y3 x1*y2-x2*y1 ]
/cross { % u v
    dup length 3 ne
    2 index length 3 ne or {
        /cross cvx /undefinedresult signalerror
    } if
    % u v
    exch aload pop 4 3 roll aload pop % x1 x2 x3 y1 y2 y3
    [
        5 index 2 index mul % ... [ x2*y3
        3 index 6 index mul sub % ... [ x2*y3-y2*x3
        5 index 5 index mul % ... [ x2*y3-y2*x3 x3*y1
        8 index 4 index mul sub % ... [ x2*y3-y2*x3 x3*y1-x1*y3
        8 index 5 index mul % ... [ x2*y3-y2*x3 x3*y1-x1*y3 x1*y2
        8 index 7 index mul sub % ... [ x2*y3-y2*x3 x3*y1-x1*y3 x1*y2-x2*y1
    ]
    7 1 roll 6 { pop } repeat
} bind def

/transpose { STATICDICT begin
    /A exch def
    /M A length def
    /N A 0 get length def
    [
    0 1 N 1 sub { /n exch def
        [
        0 1 M 1 sub { /m exch def
            A m get n get
        } for
        ]
    } for
    ]
end } dup 0 6 dict put def

/matmul { STATICDICT begin
    /B exch def
    B 0 get type /arraytype ne { /B [B] def } if
    /A exch def
    A 0 get type /arraytype ne { /A [A] def } if
    /Q B length def
    /R B 0 get length def
    /P A length def
    Q A 0 get length ne {
        /A A transpose def
        /P A length def
        Q A 0 get length ne {
            A B end /matmul cvx /undefinedresult signalerror
        } if
    } if

    [
    0 1 R 1 sub { /r exch def
        [
        0 1 P 1 sub { /p exch def
            0
            0 1 Q 1 sub { /q exch def
                A p get q get
                B q get r get mul
                add
            } for
        } for
        ]
    } for
    ]

end } dup 0 10 dict put def

%u v {operator}  vop  u(op)v
%apply a binary operator to corresponding elements
%in two vectors producing a third vector as result
/vop { 1 dict begin
    /op exch def
    2 copy length exch length ne {
        /vop cvx end /undefinedresult signalerror
    } if

    [ 3 1 roll % [ u v
    0 1 2 index length 1 sub { % [ ... u v i
        3 copy exch pop get % u v i u_i
        3 copy pop get      % u v i u_i v_i
        op exch pop         % u v u_i(op)v_i
        3 1 roll            % u_i(op)v_i u v
    } for % [ ... u v
    pop pop ]

end } def

%length of a vector
/mag { 0 exch { dup mul add } forall } def

% x y z ang -> x y' z'
/rotx { 3 dict begin
    /theta exch def
    /z exch def
    /y exch def
    y theta cos mul
    z theta sin mul sub
    y theta sin mul
    z theta cos mul add
end } def

% x y z ang -> x' y z'
/roty { 4 dict begin
    /theta exch def
    /z exch def
    /y exch def
    /x exch def
    x theta cos mul
    z theta sin mul add
    y
    x theta sin mul neg
    z theta cos mul add
end } def

% x y z ang -> x' y' z
/rotz { 4 dict begin
    /theta exch def
    /z exch def
    /y exch def
    /x exch def
    x theta cos mul
    y theta sin mul sub
    x theta sin mul
    y theta cos mul add
    z
end } def

% x y z -> x' y' z'
/model {
%ang roty
%ang .25 mul rotx
%alpha rotz
beta roty
gamma rotx
} def

% Eye coords
/ex .1 def
/ey .1 def
/ez 5 def
/eyedir [ex ey ez]
    dup mag [ exch dup dup ]{div} vop
def

% x y z -> X Y
/project {
3 dict begin
    /z exch def
    /y exch def
    /x exch def
    1 ez z sub div
    x ez mul z ex mul sub
    1 index mul
    y ez mul z ey mul sub
    3 2 roll mul
end } def

/light
    [ 3 -7 -2 1 ]
    dup mag [ exch dup dup dup ]{div} vop
def
/Ia .4 def % Incident Ambient Intensity
/Ka .4 def % Ambient Diffuse reflection constant
/Il .5 def % Incident intensity of Lightsource
/Kd .3 def % Diffuse reflection constant

%h R N
/cylinder { 20 dict begin
    /N exch def
    /R exch def
    /h exch def
    /dz 1 N div def
    /dt 360 dz mul def
    /hdz h dz mul def

    0 dz 1 dz sub {
        h mul h 2 div sub /z exch def

        0 dt 360 { /t exch def
            /v1 [ t cos R mul
                t sin R mul
                z ] def
            /v4 [ v1 aload pop pop
                z hdz add ] def
            /t t dt add def
            /v2 [ t cos R mul
                t sin R mul
                z ] def
            /v3 [ v2 aload pop pop
                z hdz add ] def
            [ v1 v2 v3 v4 ] {
                aload 4 1 roll model 4 3 roll astore pop
            } forall
            /normal v4 v1 {sub} vop
                    v2 v1 {sub} vop
                    cross def
            /nlen normal mag def
            /normal normal [nlen nlen nlen] {div} vop def
            [normal aload pop 1] [eyedir aload pop 1] dot 0 lt {
                /action { moveto /action { lineto } def } def
                [ v1 v2 v3 v4 ]
                { aload pop project action }
                forall
                closepath
%                gsave
                    [normal aload pop 1]
                    light
                    %[ex ey ez neg 1] %"radiant"
                    dot
                    Il Kd mul mul
                    Ia Ka mul add
                    setgray
                    fill
%                grestore
%                stroke
            } if

        } for
    } for
end } def

300 400 translate
280 dup dup moveto
dup neg dup neg lineto
dup neg dup lineto
dup neg lineto closepath .6 setgray fill
1 70 dup dup scale div setlinewidth

%/beta 0 def
%/gamma 0 def
%4 2 50 cylinder

/beta 90 def
/gamma 0 def
4 2 50 cylinder

%/beta 0 def
%/gamma 90 def
%4 2 50 cylinder

showpage 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T06:55:21.257

好吧，我想出了一些更容易让人接受的东西。

6% 的捏造感觉太可怕了。

但肯建议可能涉及四舍五入。这意味着控制舍入应该获得对问题的某种控制措施。看起来这是真的。

所以我尝试在 all`moveto`和`lineto`call 前面加上一个电话`prep`：

```
/prep {
    transform
    %2 {
    %    exch
        %floor
        round
        %ceiling
        %2 mul cvi 2 div %round
    %} repeat
    itransform
} def 
```

评论显示了我尝试过的各种作品。两个设备坐标上的舍入消除了所有水平出血线并留下非常薄的垂直出血。假设 Ghostscript 通过水平扫描线进行光栅化，这似乎是有道理的：只需一点帮助，它就可以更轻松地使用水平扫描线，但近乎垂直的扫描线更难。

但后来我把它和捏造结合起来了。而且我发现仅将设备-y'坐标四舍五入并将补丁尺寸缩小2％可以消除所有出血。它真的照亮了这个蝙蝠洞。

我认为 2% 是可以接受的捏造水平。（？）

* * *

不幸的是，当您调整 N 的值（切片数）时，上述所有内容都需要进行调整。覆盖整个表面的最简单修复方法是用与填充相同的颜色描边边缘。这里唯一的难点是确保线宽适合比例。最简单的方法是将它们放在一起。对于非常高的分辨率，这可能应该以某种方式调整以考虑 N。

```
1 70 dup dup scale div setlinewidth 
```

* * *

这是最终程序生成的图像之一，一个带有坐标轴和随机颜色的 Steinmetz 实体，透视图略微倾斜（它的右脚有点突出）。

![Steinmetz 立体透视](../Images/69749eaca67d328209734f7422f73a1d.png)

# database-design - 1 个活动的数据库设计有 1..* date_held

> ID：12274865
> 
> 赞同：0
> 
> 时间：2012-09-05T05:16:42.800
> 
> 标签：database-design, one-to-many, one-to-one

我想向您学习如何设计数据库架构：

IE。我的问题是 1 个活动有 1..* date_held

例如。活动名称是

“看电影”在 9 月 1 日举行了 date_held

“购物”已于 9 月 2 日、9 月 5 日、9 月 6 日举行 date_held

# 方法1

所以我目前的数据库设计是

```
---------------------------
Activity Table
---------------------------
id|name|date_held

1|see moive|20120901

2|shopping|20120902

3|shopping|20120905

4|shopping|20120906 
```

可以看到购物记录重复了3次。我觉得好像不太好。

# 方法2

所以我分成3张桌子

```
---------------------------
Activity Table
---------------------------

id|name

1|see moive

2|shopping

---------------------------
Date Table
---------------------------
id|date

1|Sep 1

2|Sep 2

3|Sep 5

4|Sep 6

---------------------------
Activity_Date Table
---------------------------
activity_id|date_id

1|1

2|2

2|3

2|4 
```

但我认为方法2非常混乱。任何人都可以给我一个建议，如何在 1 个活动匹配 1..* date_held 上进行表格设计？

谢谢！！

嗨，布兰科·迪米特里耶维奇

我想了几个小时后，我发现了另一种方法，即使用redis json格式

{

“名称”：“购物”，

“日期”：[

“9 月 1 日”

]

},

{

"name": "看电影",

“日期”：[

“9 月 2 日”、“9 月 5 日”、“9 月 6 日”

]

}

好像很简单~:D

但是让我想想你的建议..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T11:13:04.373

> 可以看到购物记录重复了3次。

`name` **field**的值，单独来看，确实在不同的行中重复。整个记录（即**rows**）不重复。

^(从逻辑上讲，如果同一活动在多个日期重复，则标识该活动1)的同一数据必须在每个日期重复。没有魔法，所有相关的组合都必须在数据库中列出。幸运的是，数据库擅长处理大量数据。

我认为这里有两个问题：

1.  您需要代理键`id`吗？**如果**在同一日期不可能有相同的活动，那么`{name, date_held}`是一个“自然”键，无论您是否会添加另一个“代理”键，例如`id`. 因此，除非您[确实需要](https://stackoverflow.com/a/11230592/533120)代理 PK，否则您可以将自然键保留为主键。如果每天可以有多个活动，请考虑替换`date_held`为`datetime_held`.

2.  你需要第三张桌子吗？如果您希望将更多信息与每个活动关联起来，而不仅仅是名称，或者您希望一项活动即使没有被持有也能够存在，那么无论如何您都需要在逻辑级别上使用它。但即使你不这样做，在纯粹的物理层面上，在第三个表中使用代理 PK 也会使你免于重复字符串，而是允许你重复（更细的）整数。您可以使用它潜在地节省空间（和缓存性能），但也可能需要更多的 JOINing。如您所见，这是一个平衡问题，**测量**可以成为选择正确测量值的宝贵工具。

* * *

*¹无论是活动名称还是 ID。*

# java - 如何在 SQL 数据库日期列中插入空白值？

> ID：12274867
> 
> 赞同：0
> 
> 时间：2012-09-05T05:16:54.300
> 
> 标签：java, sql

我有一个数据库，其中有一列名为 START_TS 类型（日期时间，非空）。我在 java 中编写了一个程序，我想在该列中插入一个空白值，但它以
'1900-01-01 00:00:00.000' 作为值。

```
statement.executeUpdate("insert into tableName(START_TS) values(CAST(START_TS as varchar(100)))"); 
```

请建议我可以在该列中插入空白值的铸造机制。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T05:29:04.153

如果您使用语法似乎指向的 MYSQL；您可以执行以下操作：

> ALLOW_INVALID_DATES
> 
> 不要对日期进行全面检查。只检查月份在 1 到 12 的范围内，日期在 1 到 31 的范围内。这对于您在三个不同字段中获取年、月和日并想要存储的 Web 应用程序非常方便正是用户插入的内容（没有日期验证）。此模式适用于 DATE 和 DATETIME 列。它不应用始终需要有效日期的 TIMESTAMP 列。
> 
> 此模式在 MySQL 5.0.2 中实现。在 5.0.2 之前，这是默认的 MySQL 日期处理模式。从 5.0.2 开始，服务器要求月份和日期值是合法的，而不仅仅是分别在 1 到 12 和 1 到 31 的范围内。禁用严格模式后，“2004-04-31”等无效日期将转换为“0000-00-00”并生成警告。启用严格模式后，无效日期会产生错误。要允许此类日期，请启用 ALLOW_INVALID_DATES。

然而，就像每个人在评论中所说的那样，不可能在数据类型为 DATETIME 的字段中粘贴“”。

# ruby-on-rails - 在生产环境中执行每当 gem 创建的 cron 时缺少所需的 gem

> ID：12274875
> 
> 赞同：2
> 
> 时间：2012-09-05T05:17:37.763
> 
> 标签：ruby-on-rails, ruby, cron, rvm, whenever

我在生产中运行了 ruby​​ on rails 应用程序，这个应用程序有**STOCK**模型，应该每 1 分钟更新一次。

为了更新这个模型，我创建了简单的 rake 任务**db:populate:stocks**，它只包含两个操作：

1.  截断 STOCK 模型
2.  使用从 web 服务获取的最新数据填充 STOCK 模型

这个 rake 任务应该每 1 分钟执行一次，为此我**在 gem 时**使用。这是我的**schedule.rb**：

```
env :PATH, ENV['PATH']
set :job_template, nil
set :output, {:standard => '/home/admin/shared/log/cron.log', :error => '/home/admin/shared/log/cron-error.log'}

job_type :rake, "cd :path && rake :task RAILS_ENV=:environment --trace :output"

every 1.minute do
  rake "db:populate:stocks"
end 
```

在生产中，我使用运行 ruby​​ 1.9.2-p180、rails 3.1.0 和 capistrano 的**rvm**，这里我的 capistrano 任务用于更新 cron 选项卡：

```
after "deploy:update_code" do
 run "cd #{release_path} && whenever --clear-crontab RAILS_ENV=production"
 run "cd #{release_path} && whenever --update-crontab RAILS_ENV=production"
end 
```

我的**schedule.rb**创建 cron 任务，如：

```
# Begin Whenever generated tasks for: RAILS_ENV=production
PATH=/home/admin/.rvm//gems/ruby-1.9.2-p180@admin/bin:/home/admin/.rvm//gems/ruby-1.9.2-p180@global/bin:/home/admin/.rvm//rubies/ruby-1.9.2-p180/bin:/home/admin/.rvm//bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games

* * * * * cd /home/admin/releases/20120904103658 && RAILS_ENV=production rake db:populate:stocks --trace >> /home/admin/shared/log/cron.log 2>> /home/admin/shared/log/cron-error.log 
```

问题是 cron 任务无法执行 rake 任务，来自**cron-error.log**：

```
/home/admin/.rvm/rubies/ruby-1.9.2-p180/lib/ruby/site_ruby/1.9.1/rubygems.rb:314:in `bin_path': can't find gem rake ([">= 0"]) with executable rake (Gem::GemNotFoundException)
from /home/admin/.rvm//gems/ruby-1.9.2-p180@admin/bin/rake:19:in `<main>' 
```

我在这里缺少什么，为什么 cron 作业无法加载我的环境？**我的schedule.rb**有什么问题 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T16:37:33.907

确保您的 RVM 默认为 gem 所在的正确 ruby​​ 版本。然后尝试使用 bundle exec rake ... 通过这样做，它将显式调用包中的任何宝石（假设您使用的是 RVM）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-08T14:22:40.600

我有类似的问题，我用

```
rvm cron setup 
```

在服务器中。这会将 rvm 环境变量（PATH、GEM_HOME、GEM_PATH ...）添加到我的 cronjob 中。

我必须删除 set 命令

```
env :PATH, ENV['PATH'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T15:43:44.573

修改 PATH 是不够的，请检查`rvm help cron`- 很少有选项可以帮助管理 crontab 中的 rvm。

# android - android：如何打开通话屏幕并填写号码但不拨打电话？

> ID：12274878
> 
> 赞同：4
> 
> 时间：2012-09-05T05:17:56.047
> 
> 标签：android, phone-call

我只能找到“如何从您的应用程序拨打电话”，解决方案是：

```
EditText et = (EditText) findViewById(R.id.editText);
String s = et.getText().toString();

try {
    Intent callIntent = new Intent(Intent.ACTION_CALL);
    callIntent.setData(Uri.parse("tel:" + s));
    startActivity(callIntent);
    } catch (ActivityNotFoundException activityException) {
    Log.d("Calling a Phone Number", "Call failed" + activityException);
    } 
```

但这直接打了电话，没有确认。就像数字必须以`0`用户开头一样，必须允许用户这样做，然后拨打电话，一旦通话结束，他必须回到他开始意图的应用程序活动中。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-05T06:32:52.483

只需在您的代码中更改`Intent.ACTION_CALL`为。`Intent.ACTION_VIEW`

**更新**：打电话只使用电话`Intent.ACTION_DIAL`，但`Intent.ACTION_VIEW`拨打消息或电话。

# sql-parametrized-query - SqlParameter 在插入查询中调用用户定义的函数

> ID：12274882
> 
> 赞同：1
> 
> 时间：2012-09-05T05:18:09.447
> 
> 标签：sql-parametrized-query

我试图在插入查询中执行标量值函数。我正在使用 sql 参数集合，但仍然坚持使用它。

## 询问

```
Insert into PackageProducts values (@id, @name, @prodId, @prodCode) 
```

// 当这个查询执行时，我想调用一个标量值函数来获取@prodCode 的值

## 功能

```
create function getProdCodeById(@id uniqueidentifier) returns varchar(15)
begin
declare @code varchar(15)
select @code=ProductCode from Products where ID=@id
return @code
end 
```

## 我正在尝试做的事情

```
//create command, connection etc.. after than

DbParameter param = createParameter() ; // returns an empty parameter
param.Name = "@prodCode";
param.Value = String.Format("getProdCodeById('{0}')", 5); 
```

当我执行时，它将参数值作为字符串..该函数永远不会被执行。你能告诉我我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T05:29:43.703

为您的函数使用 select 语句

```
SELECT [dbo].[getProdCodeById] (@id) 
```

您可以在使用它之前将其分配给变量，如

```
DECLARE @parameter varchar(15)
SET @parameter  = (SELECT [dbo].[getProdCodeById] (@id)) 
```

您现在可以在代码中的任何位置使用 @parameter

# python - 带有 Photologue 的 Django：100% CPU 用于图像大小调整请求（Python 图像库）

> ID：12274883
> 
> 赞同：1
> 
> 时间：2012-09-05T05:18:38.243
> 
> 标签：python, django, python-imaging-library, cpu-usage, photologue

我用 Django 创建了一个照片托管网站，该网站使用 Photologue 应用程序（依赖于 Python Imaging Library）。当用户上传照片时，会为每张照片生成多张调整大小的照片（例如小/中/大、缩略图等）。问题是调整大小的过程占用了 100% 的 CPU，使得 Django 几乎无法处理同时请求（一个数量级，或者更多，更慢）。除非我离开这里，否则我似乎必须以某种方式限制这种 CPU 使用率。

我尝试使用“cpulimit”命令来限制 PID 上的 CPU 百分比使用，看看这是否甚至可以解决问题，但它似乎没有效果。我可以通过 PIL 以某种方式限制 CPU 使用率吗？有什么我缺少的方法吗？我的服务器是一个 Ubuntu EC2 微层，所以缺乏 RAM/CPU 能力可能是个问题吗？似乎不太可能是问题，因为只有两个同时用户会出现此问题。

更新：根据 Andre 的建议，我已经升级到 Django 1.4.1，这使得开发服务器允许并发请求；但是，由于 PIL 占用了 CPU，它仍然慢得无法忍受。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-09T10:49:39.520

您可以使用[最新的 Pillow](http://pillow.readthedocs.io/en/3.4.x/installation.html)（调整大小的速度通常比原始 PIL 快 7 倍）甚至[Pillow-SIMD](https://github.com/uploadcare/pillow-simd#benchmarks)（最多快 30 倍）来加快速度

# entity-framework - 模型 OnDelete 事件？

> ID：12274888
> 
> 赞同：3
> 
> 时间：2012-09-05T05:18:50.990
> 
> 标签：entity-framework, asp.net-mvc-4

我有一个看起来像这样的简单模型：

```
public class ImageFile
{
    [Key]
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public int Id { get; set; }
    public ImageMeta Meta { get; set; }
    public string FileName { get; set; }
    public DateTime DateUploaded { get; set; }
    public int Width { get; set; }
    public int Height { get; set; }
} 
```

有什么方法可以添加某种“OnDelete”事件挂钩，以便每当通过`db.Images.Remove(imageFile);`或任何其他方式删除模型时，我都可以删除关联的文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T05:53:59.133

您可以覆盖`SaveChanges`上下文的方法以连接到删除实体。

```
public class GalleryContext : DbContext
{
     public override int SaveChanges()
     {
          var deletedImages = ChangeTracker.Entries()
              .Where(e => e.State == EntityState.Deleted && e.Entity is ImageFile)
              .Select(e => e.Entity).Cast<ImageFile>();

          foreach(var image in deletedImages)
          {
              // delete file here or call a method on image
          }

          return base.SaveChanges();
     }
} 
```

# android - 动态获取数组中的所有图像资源ID

> ID：12274891
> 
> 赞同：12
> 
> 时间：2012-09-05T05:19:09.430
> 
> 标签：android

drawable foder 中有很多图像，所以不是手动创建所有图像资源 id 的数组，我想动态获取数组中可绘制文件夹的所有图像。目前我正在使用此代码：

```
for(int i=1;i<=9;i++)
    {
            int imageKey = getResources().getIdentifier("img"+i, "drawable", getPackageName());
            ImageView image = new ImageView(this);  
            image.setId(imgId);
            image.setImageResource(imageKey);    
            image.setScaleType(ImageView.ScaleType.FIT_XY);
            viewFlipper.addView(image, new LayoutParams(LayoutParams.FILL_PARENT,              LayoutParams.FILL_PARENT));
            imgId++;
        } 
```

但是在该代码中，我需要手动编辑图像名称以获取资源ID，但我想获取具有任何名称的所有图像..

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-05T05:50:08.320

你可以使用`Reflection`来实现这一点。

导入`Field`类

`import java.lang.reflect.Field;`

然后在你的代码中写这个

```
Field[] ID_Fields = R.drawable.class.getFields();
int[] resArray = new int[ID_Fields.length];
for(int i = 0; i < ID_Fields.length; i++) {
    try {
        resArray[i] = ID_Fields[i].getInt(null);
    } catch (IllegalArgumentException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

`resArray[]`现在包含对应用程序中所有可绘制对象的引用。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-05T05:44:30.737

好吧，如果您的图像名称是 img1、img2 等，那么您可以创建一个变量，例如

```
String url = "drawable/"+"img"+i;

int imageKey = getResources().getIdentifier(url, "drawable", getPackageName()); 
```

你也可以用你的包名替换你的getPackageName()方法，比如“com.android.resource”
简单地说，一般的功能是

```
public int getIdentifier(String name, String defType, String defPackage) 
```

# ms-access - ms-access 中的日期格式

> ID：12274893
> 
> 赞同：2
> 
> 时间：2012-09-05T05:19:11.477
> 
> 标签：ms-access, date-format

我正在从 msaccess 中检索日期时间并愿意以自定义格式显示它，所以我是否以该格式获取数据。所需的格式，如果`dd/MM/yyyy`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T05:25:13.853

你在找这个吗？

```
Format(Date, "dd/MM/yyyy") 
```

我以当前日期 ( `Date`) 为例，但当然您可以使用任何`Date`值来执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T06:52:23.580

你可以尝试这样做

```
Format(anyDate, dd/MM/yyyy) 
```

有关日期的更多信息和格式，您可以单击[此处](http://www.techonthenet.com/access/functions/date/format.php)

# .htaccess - .htaccess 产生 404 页面在 IE 中找不到

> ID：12274894
> 
> 赞同：0
> 
> 时间：2012-09-05T05:19:14.457
> 
> 标签：.htaccess, redirect, http-status-code-404, typo3

我正在开发 Typo3 版本 4.7.4。当我可以在除 IE 之外的每个浏览器（所有版本）中访问站点的前端时。将自定义的 .htaccess 文件替换为 Typo3 版本 4.7.4 的默认 .htaccess 后，它工作正常。然后我比较了两个文件，除了一些配置之外，我找不到不同的东西。但是，我不确定这些新配置是否杀死了 IE。这是我的新 .htaccess 配置：

```
#####################################
###     Compression via TYPO3     ###
#####################################
<FilesMatch "\.js\.gzip$">
    AddType "text/javascript" .gzip
</FilesMatch>
<FilesMatch "\.css\.gzip$">
    AddType "text/css" .gzip
</FilesMatch>
AddEncoding gzip .gzip

##################################################
###     Browser caching of resource files     ###
##################################################
<FilesMatch "\.(js|css)$">
  <IfModule mod_expires.c>
    ExpiresActive on
    ExpiresDefault "access plus 7 days"
  </IfModule>
  FileETag MTime Size
</FilesMatch>

########################################
###     Settings for mod_rewrite     ###
########################################
<IfModule mod_rewrite.c>
RewriteEngine On

### Change this path, if your TYPO3 installation is located in a subdirectory of the website root.
#RewriteBase /

### IMPORTANT: This rule has to be the very first RewriteCond in order to work!
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^(.+)\.(\d+)\.(php|js|css|png|jpg|gif|gzip)$ $1.$3 [L]

RewriteRule ^fileadmin/(.*/)?_recycler_/ - [F]
RewriteRule ^fileadmin/templates/.*(\.txt|\.ts)$ - [F]
RewriteRule ^typo3conf/ext/[^/]+/Resources/Private/ - [F]

#RewriteRule ^(typo3/|t3lib/|fileadmin/|typo3conf/|typo3temp/|uploads/|favicon\.ico) - [L]
RewriteRule ^typo3$ typo3/index_re.php [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l

RewriteRule .* index.php [L]

############################################################################
###     Redirect all users directly to the https version of the page     ###
############################################################################

RewriteRule ^(.+)\.(\d+)\.(php|js|css|png|jpg|gif|gzip)$ $1.$3 [L]
RewriteRule ^(typo3/|t3lib/|fileadmin/|typo3conf/|typo3temp/|uploads/|favicon\.ico) - [L]
RewriteRule ^typo3$ typo3/index_re.php [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l

RewriteRule .* index.php [L]

</IfModule>

#############################
###     Miscellaneous     ###
#############################
Options -Indexes

########################################################
###     Disable *.ts files viewing from Frontend     ###
########################################################
<FilesMatch "\.(ts)$">
 order deny,allow
 deny from all
</FilesMatch> 
```

任何想法，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T07:40:34.047

感谢马霍兹的帮助。

```
#####################################
###     Compression via TYPO3     ###
#####################################
<FilesMatch "\.js\.gzip$">
    AddType "text/javascript" .gzip
</FilesMatch>
<FilesMatch "\.css\.gzip$">
    AddType "text/css" .gzip
</FilesMatch>
AddEncoding gzip .gzip

##################################################
###     Browser caching of resource files     ###
##################################################
<FilesMatch "\.(js|css)$">
  <IfModule mod_expires.c>
    ExpiresActive on
    ExpiresDefault "access plus 7 days"
  </IfModule>
  FileETag MTime Size
</FilesMatch>

########################################
###     Settings for mod_rewrite     ###
########################################
<IfModule mod_rewrite.c>
RewriteEngine On

### Change this path, if your TYPO3 installation is located in a subdirectory of the website root.
#RewriteBase /

### IMPORTANT: This rule has to be the very first RewriteCond in order to work!
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^(.+)\.(\d+)\.(php|js|css|png|jpg|gif|gzip)$ $1.$3 [L]

RewriteRule ^fileadmin/(.*/)?_recycler_/ - [F]
RewriteRule ^fileadmin/templates/.*(\.txt|\.ts)$ - [F]
RewriteRule ^typo3conf/ext/[^/]+/Resources/Private/ - [F]

#RewriteRule ^(typo3/|t3lib/|fileadmin/|typo3conf/|typo3temp/|uploads/|favicon\.ico) - [L]
RewriteRule ^typo3$ typo3/index_re.php [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l

# RewriteRule .* index.php [L]

############################################################################
###     Redirect all users directly to the https version of the page     ###
############################################################################

RewriteRule ^(.+)\.(\d+)\.(php|js|css|png|jpg|gif|gzip)$ $1.$3 [L]
RewriteRule ^(typo3/|t3lib/|fileadmin/|typo3conf/|typo3temp/|uploads/|favicon\.ico) - [L]
RewriteRule ^typo3$ typo3/index_re.php [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l

RewriteRule .* index.php [L]

</IfModule>

#############################
###     Miscellaneous     ###
#############################
Options -Indexes

########################################################
###     Disable *.ts files viewing from Frontend     ###
########################################################
<FilesMatch "\.(ts)$">
 order deny,allow
 deny from all
</FilesMatch> 
```

请注意，错误在这里`# RewriteRule .* index.php [L]`

# c - 将 long 转换为 (void *) 以通过

> ID：12274902
> 
> 赞同：3
> 
> 时间：2012-09-05T05:21:19.637
> 
> 标签：c, casting, void-pointers

通读 LLNL的 pthread[教程](https://computing.llnl.gov/tutorials/pthreads/#Management)，我点击了以下示例代码

```
/******************************************************************************
* FILE: hello.c
* DESCRIPTION:
*   A "hello world" Pthreads program.  Demonstrates thread creation and
*   termination.
* AUTHOR: Blaise Barney
* LAST REVISED: 08/09/11
******************************************************************************/
#include <pthread.h>
#include <stdio.h>
#include <stdlib.h>
#define NUM_THREADS 5

void *PrintHello(void *threadid)
{
   long tid;
   tid = (long)threadid;
   printf("Hello World! It's me, thread #%ld!\n", tid);
   pthread_exit(NULL);
}

int main(int argc, char *argv[])
{
   pthread_t threads[NUM_THREADS];
   int rc;
   long t;
   for(t=0;t<NUM_THREADS;t++){
     printf("In main: creating thread %ld\n", t);
     rc = pthread_create(&threads[t], NULL, PrintHello, (void *)t);
     if (rc){
       printf("ERROR; return code from pthread_create() is %d\n", rc);
       exit(-1);
       }
     }

   /* Last thing that main() should do */
   pthread_exit(NULL);
} 
```

我可以看到*为什么*是`long`通过`void *`（好像不是，并且您传递一个指向`t`由线程打印的数字的指针是乱码），我的问题是这应该被认为是犹太洁食并且总是有效吗？或者这是获得最简单的线程工作示例的快速技巧？这是标准的 C 语言吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T05:24:20.473

不，就 ISO C 标准而言，这并不是*严格*意义上的犹太教，因为不能保证指针的宽度足以容纳长指针。

一个 kosher 解决方案是传递一个*指向*long 的指针，或者每个线程使用一个唯一的 long（例如数组中的一个），或者在创建者线程和创建线程之间进行线程间通信（例如条件变量），以便后者可以在前者被允许为下一个线程创建更改它之前进行复制。

然而，它不是严格意义上的 kosher 的事实并不意味着它在特定的实现中不起作用。只要您可以保证演员之间的转换`void*`并且`long`不会丢失任何信息，它可能会正常工作。

从 C11 开始`6.3.2.3 Pointers`（尽管它与 C99 基本没有变化）：

> 整数可以转换为任何指针类型。除非前面指定，结果是实现定义的，可能没有正确对齐，可能不指向引用类型的实体，并且可能是陷阱表示。
> 
> 任何指针类型都可以转换为整数类型。除非前面指定，结果是实现定义的。如果结果不能以整数类型表示，则行为未定义。结果不必在任何整数类型的值范围内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T05:29:26.393

它仅适用于 32 位系统，在 64 位系统的情况下，long 的大小为 32 位，但 void* 的大小为 64 位。

# javascript - 使用 javascript 使用 for 循环声明变量

> ID：12274908
> 
> 赞同：0
> 
> 时间：2012-09-05T05:21:27.150
> 
> 标签：javascript, variables, object, for-loop, assignment-operator

我正在尝试使用`for`循环声明变量，然后测试**cols**和**rols**是否相同。如果是，它将运行递归函数。但是，我在使用 javascript 时遇到了麻烦。任何人都可以帮忙吗？

现在，它`==`在比较`col.1`和时表示意外变量`col.2`。`col+j`我也在循环内部尝试过`for`，但它是`invalid left-hand side assignment`

```
for (var i = 0; i < 2; i++) {
  var col = {};
  col.i = Math.floor(Math.random() * cols);
  col.i = Math.floor(Math.random() * rows);
}

if (col.1 == col.2 && row.1 == row.2) {
  return this.getRandomBlock();
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T05:25:37.773

1.  你应该声明`col`并且`row`，你只声明`col`。
2.  您应该在循环之外声明`col`和`row`，现在它在每次循环体执行时声明。
3.  你分配给`col.i`两次。
4.  当你写`col.i`它时，它是 equel 的`col['i']`，所以你应该使用括号来代替。
5.  你不需要对象（`{}`），使用数组（`[]`）。
6.  你不能写`col.1`它是不合法的，点后的数字是不合法的，使用`col[1]`.
7.  你有`0`和`1`，没有`1`和`2`。

.

```
var col = [];
var row = [];

for (var i = 0; i < 2; i++) {
  col[i] = Math.floor(Math.random() * cols);
  row[i] = Math.floor(Math.random() * rows);
}

if (col[0] == col[1] && row[0] == row[1]) {
  return this.getRandomBlock();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T05:49:40.253

**col**变量已在循环内声明，这`for`意味着该变量在每次迭代时都会实例化。因此，在`for`循环结束时，**col**变量只有一个属性*1 (col.1)*。

在循环之后，您尝试访问**col.2**这不是**col**对象的属性。此外，如果您尝试使用`for`循环迭代变量（i 或 j）访问 col 对象，则会出现相同的问题，因为迭代后*i 或 j的值为**2*

试试下面它会像专业人士一样工作。

```
var col = {};
var row = {};
for (var i = 0; i < 2; i++) {
  col.i = Math.floor(Math.random() * cols);
  row.i = Math.floor(Math.random() * rows);
}
if (col.0 == col.1 && row.0 == row.1) {
  return this.getRandomBlock();
} 
```

# java - 两个类具有相同的 XML 类型名称

> ID：12274912
> 
> 赞同：5
> 
> 时间：2012-09-05T05:21:48.477
> 
> 标签：java, annotations, jaxb

我有这个错误，它说我有两个具有相同 XML 类型名称的类

所以问题在于 InfoSource -> NameSearchFilters -> SearchRequest

**错误**

```
Caused by: com.sun.xml.internal.bind.v2.runtime.IllegalAnnotationsException: 2 counts of IllegalAnnotationExceptions
Two classes have the same XML type name "{http://test.au/schema/namesearch}InfoSource". Use @XmlType.name and @XmlType.namespace to assign different names to them.
    this problem is related to the following location:
        at au.test.identitySearch.model.InfoSource
        at protected au.test.identitySearch.model.InfoSource au.test.identitySearch.model.nameSearch.NameSearchFilters.infoSourceList
        at au.test.identitySearch.model.nameSearch.NameSearchFilters
    this problem is related to the following location:
        at au.test.identitySearch.model.InfoSource
        at protected au.test.identitySearch.model.InfoSource au.test.identitySearch.model.nameSearch.NameSearchFilters.infoSourceList
        at au.test.identitySearch.model.nameSearch.NameSearchFilters
        at protected au.test.identitySearch.model.nameSearch.NameSearchFilters au.test.identitySearch.ws.model.SearchRequest.searchFilters
        at au.test.identitySearch.ws.model.SearchRequest 
```

**信息源**

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "InfoSource", propOrder = {
    "infoSource"
})

public class InfoSource {

    @XmlElement
    protected List<String> infoSource; 
```

**名称搜索过滤器**

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "NameSearchFilters", propOrder = {

})
public class NameSearchFilters {

    @XmlElement
    protected InfoSource infoSourceList;
    @XmlElement
    protected String nameType; 
```

**搜索请求**

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "", propOrder = {
    "searchControls",
    "searchCriteria",
    "searchFilters"
})
@XmlRootElement(name = "searchRequest")
public class SearchRequest {

    @XmlElement(required = true)
    protected SearchControls searchControls;
    @XmlElement(required = true)
    protected NameSearchCriteria searchCriteria;
    @XmlElement
    protected NameSearchFilters searchFilters; 
```

为什么这里有问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-05T06:48:04.000

您是否尝试向它们中的每一个添加不同的命名空间属性值`@XmlType(namespace="test1", name = "InfoSource", propOrder = { "infoSource" }) )`？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T13:47:38.213

像这样的情况抛出异常'x counts of IllegalAnnotationExceptions'

类 A{}
类 B 扩展 A{}
类 C 扩展 A{}

解决向 A 类添加注释的问题，如下所示：

@XmlTransient
公共类 A
{}

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-23T09:53:42.793

@XmlType(name = "Info_Source", propOrder = { "infoSource"

在代码中试试这个

# ssis - 在 SSIS 的 CSV 文件中将多行合并为单行

> ID：12274913
> 
> 赞同：1
> 
> 时间：2012-09-05T05:21:48.760
> 
> 标签：ssis

我将数据从 SQL 加载到 CSV 文件。我的 csv 记录采用以下方式。

```
Eid  ename  desig  sourceD  location  
1     Ralf   PM      1        UK  
1     Ralf   PM      1        USA  
2     Marty  PL      3         GBR  
3     Levis  BA      5        UK  
4     Ricky  BI      7        RSA  
4     Ricky  BI      7        FRA 
```

现在我想将 EID 1 和 4 组合成单行。我的输出必须采用以下方式

```
Eid  ename  desig  sourceD  location  
1     Ralf   PM      1        UK, USA  
2     Marty  PL      3         GBR  
3     Levis  BA      5        UK  
4     Ricky  BI      7        RSA, FRA 
```

我只有 CSV 文件，我没有任何 sql 查询或任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T08:45:18.663

[SQL小提琴](http://sqlfiddle.com/#!3/df362/7)

SQL 查询

```
 select c1.Eid, c1.ename,c1.desig,c1.sourceD,
    (   SELECT x.location + ', '
        FROM Contacts x
        WHERE c1.Eid = x.Eid
        ORDER BY x.location
        FOR XML PATH ('')
    ) as Locations
from Contacts c1
group by c1.Eid, c1.ename,c1.desig,c1.sourceD 
```

在职的 ？

如果你想最后没有逗号：

```
 SELECT c1.Eid, c1.ename,c1.desig,c1.sourceD,
   LEFT( (   SELECT x.location + ', '
        FROM Contacts x
        WHERE c1.Eid = x.Eid
        ORDER BY x.location
        FOR XML PATH ('')
    ),LEN((   SELECT x.location + ', '
        FROM Contacts x
        WHERE c1.Eid = x.Eid
        ORDER BY x.location
        FOR XML PATH ('')
    ))-1) AS Locations
FROM Contacts c1
GROUP BY c1.Eid, c1.ename,c1.desig,c1.sourceD 
```

此查询将使您避免长度为 0：

```
 SELECT c1.Eid, c1.ename,c1.desig,c1.sourceD,
   LEFT( (   SELECT x.location + ', '
        FROM Contacts x
        WHERE c1.Eid = x.Eid
        ORDER BY x.location
        FOR XML PATH ('')
    ),CASE WHEN LEN((   SELECT x.location + ', '
        FROM Contacts x
        WHERE c1.Eid = x.Eid
        ORDER BY x.location
        FOR XML PATH ('')
    ))=0 THEN 1 ELSE LEN((   SELECT x.location + ', '
        FROM Contacts x
        WHERE c1.Eid = x.Eid
        ORDER BY x.location
        FOR XML PATH ('')
    )) END -1) AS Locations
FROM Contacts c1
GROUP BY c1.Eid, c1.ename,c1.desig,c1.sourceD 
```

# android - 从 sqlite android 获取数据的问题

> ID：12274914
> 
> 赞同：0
> 
> 时间：2012-09-05T05:21:51.597
> 
> 标签：android, sqlite, cursor

我有一个表有两列 - 名称和符号。我想要的只是获取与名称对应的符号。我使用这种方法。这有点返回什么。请检查一下。

```
public String getSymbol(String name) {
    String Symbol = "";
    String[] columns = new String[] { "name", "symbol" };
    Cursor c = getReadableDatabase().query(DATABASE_TABLE_NAME, columns, null,
            null, null, null, null);

    int iName = c.getColumnIndex("name");
    int iSymbol = c.getColumnIndex("symbol");

    for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {

        if (c.getString(iName) == name) {
            Symbol = Symbol + c.getString(iSymbol);
        }

    }
    return Symbol;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T05:31:42.793

试试这个功能。

```
public String getSymbol(String name)
    {
        try
        {
          String Symbol = "";
          Cursor c = db.query(DATABASE_TABLE_NAME, columns, "name = ?" , new String[] {name}, null, null, null);
          if(c.getCount != 0)
          {
               c.moveToFirst();
               Symbol = String.valueOf(c.getString(c.getColumnIndex("symbol"))); 
               c.close();
               return Symbol;
          }

        }
        catch (Exception e)
        {
            e.printStackTrace();
        }
        return null;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T05:31:23.123

比较时不要使用**c.getString(iName) == name**，而是使用**c.getString(iName).equalsIgnoreCase(name)**

# javascript - Javascript onclick 事件在第一次点击时未触发

> ID：12274917
> 
> 赞同：0
> 
> 时间：2012-09-05T05:22:04.723
> 
> 标签：javascript, dom-events, onclicklistener, addeventlistener, getelementbyid

下面的代码是一个链接，单击该链接将打开和关闭最初隐藏的 div。除了必须在第一个实例中单击两次链接才能打开它之外，它工作正常。这不是一个大问题，但如果可以使 div 在第一次单击时打开，那就太好了。

切换Div.js

```
function toggleDiv(elem, eventType, handler) {
    if (elem.addEventListener) {
        elem.addEventListener(eventType, handler, false);
    } else {
        elem.attachEvent('on' + eventType, handler);
    }
}

toggleDiv(window, 'load', function() {
    var link = document.getElementById('myMagicLink'),
        div = document.getElementById('foo');
    toggleDiv(link, 'click', function() {
        if (!link) return true;
        if (div.style.display == "none") {
            div.style.display = "block"
        } else {
            div.style.display = "none"
        }
        return true;
    });
}); 
```

* * *

索引.html

```
<body>
<a id="myMagicLink" href="http://www.google.com/">My Magic Link</a>
<div id="foo">Opens a div</div>
<br>
End of page
<br>
<script language="JavaScript" type="text/javascript" src="toggleDiv.js"></script>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-20T12:32:20.060

我在切换 ASIDE 标签的显示值时遇到了同样的问题。从“无”切换到“内联”并再次返回在第一次单击时不起作用。在我的 CSS 文件中，显示设置为“无”。在我的脚本中，我将“无”更改为“”（据我所知，这似乎意味着“默认”）。以下代码现在对我来说很好。

```
 var x = document.getElementsByTagName("aside")[0];
if (x.style.display == "")
{
    x.style.display = "inline"; 
}
else
{
    x.style.display = "";   
} 
```

当我在 Firefox 开发人员工具中看到 CSS/实际值时，我明白了这一点：“aside”显示为带有 CSS 属性，但“元素”首先显示为没有属性。第一次单击时，“元素”被分配了一个“显示”属性设置为“无”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T05:44:42.573

不知道你遇到了什么麻烦......这在Chrome中对我来说完美无缺。

我确实更改了链接的 url 以反映回同一个文档，但是 div`foo`隐藏并重新出现。

几个样式说明：与其设置`display = "block"`，不如说它`display = ""`可以恢复到默认值。

此外，我还包括了一个 preventDefault 函数。您的使用`return true`将适用于 DOM0 样式的事件处理，但它不适用于`attachEvent/addEventHandler`代码。这正确地防止了链接被跟踪。

```
<html>
<head>
<title>Test</title>
<script>
function toggleDiv(elem, eventType, handler) {
    if (elem.addEventListener) {
        elem.addEventListener(eventType, handler, false);
    } else {
        elem.attachEvent('on' + eventType, handler);
    }
}

toggleDiv(window, 'load', function() {
    var link = document.getElementById('myMagicLink'),
        div = document.getElementById('foo');
    toggleDiv(link, 'click', function(e) {
        if (!link) return cancelDefaultAction(e);

        if (div.style.display == "none") {
            div.style.display = "block"
        } else {
            div.style.display = "none"
        }       
        return cancelDefaultAction(e);
    });
});

function cancelDefaultAction(e) {
 var evt = e ? e:window.event;
 if (evt.preventDefault) evt.preventDefault();
 evt.returnValue = false;
 return false;
}   

</script>

<body>
<a id="myMagicLink" href="#">My Magic Link</a>
<div id="foo">Opens a div</div>
<br>
End of page
<br>

</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T05:59:39.517

抱歉，对于非常简单的事情来说似乎有点复杂，除非您有特定的设计；但这应该同样有效：

[小提琴](http://jsfiddle.net/dane/g5jWk/6/)

```
<html>
<head>
    <script language="JavaScript" type="text/javascript">

    var toggled = false;
    function toggleDiv()
        {
           if(toggled)
             {
               document.getElementById('foo').style.display = '';
               toggled = false;            
             }       
           else
           {
               document.getElementById('foo').style.display = 'none';
               toggled = true;
           }
        }
    </script>
    </head>
<body>
<a id="myMagicLink" href="http://www.google.com/" onClick='toggleDiv()'>My Magic Link</a>
<div id="foo">Opens a div</div>
<br>
End of page
<br>
</body>
</html> 
```

​</p>

# android - How to put a button in pressed state in android

> ID：12274919
> 
> 赞同：0
> 
> 时间：2012-09-05T05:22:07.183
> 
> 标签：android, button, android-widget

My problem is similar to question posted [here](https://stackoverflow.com/questions/4747311/how-can-i-keep-one-button-as-pressed-after-click-on-it). I want an Android button to stay pressed. I cannot follow the solution provided because `onClick` will be called when a button is pressed via keyboard or trackball and i need to handle that.

I tried setting `button.setPressed(true);` in `onClick` callback , but it doesn't seem to work. Is there a way to do this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T11:24:55.303

Try this it will work...

```
singIn.setOnTouchListener(new OnTouchListener() {
                @Override
                public boolean onTouch(View v, MotionEvent event) {
                    if(event.getAction()==MotionEvent.ACTION_DOWN) return true;
                    if(event.getAction()!=MotionEvent.ACTION_UP) return false;

                  //DO SOMETHING!!

                    singIn.setPressed(true);                    
                    return true;
                }

            }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T05:30:37.023

Try sending a touch event to the button like this:

```
MotionEvent down = MotionEvent.obtain(SystemClock.uptimeMillis(), SystemClock.uptimeMillis(), MotionEvent.ACTION_DOWN, 0, 0, 0);
yourButton.dispatchTouchEvent(down); 
```

# actionscript-3 - Flash AS3.0中如何从子包Class访问默认包中的Class

> ID：12274920
> 
> 赞同：0
> 
> 时间：2012-09-05T05:22:14.363
> 
> 标签：actionscript-3, class, object, flash-cs5

尝试从其子包中的类访问默认包中的类时收到错误消息。任何人都可以帮我解决这个问题。

仅供参考，我的包结构是 A -> B。我的意思是文件夹“A”作为默认包，“B”作为子包。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T05:31:29.857

只需创建一个类 A 的对象，并从其对象中调用类实例方法。

```
var classAObj:A = new A();
classObj.MethodA(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T05:33:47.460

我认为您正在寻找的是 B 类扩展 A 类。在您的代码中看起来像这样：

```
package main
{
    class B extends A
    {
        // Code here...
    }
} 
```

在包中包含代码通常不会影响功能，它更像是一种组织工具。`internal`（关键字除外。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T05:58:40.533

**私有**的、**受保护**的和**公共的**呢？我在其他答案中看不到任何解释，所以在这里。

```
class A
{
    private var _password:String;
    public var username:String;
    protected var serverURL:String;

    public function login():void
    {
         // some code
         callServerForLogin();
    }

    protected function callServerForLogin():void
    { 
        // some code
    }
 }

 class B extends A
 {
      public function B()
      {
           var parentPassword = super._password;  
           // FAILS because private and accessible only inside class A

           var parentUsername = super.username 
           // all ok in here, public property

           var parentServerURL = super.serverURL;
           // all ok, because it is protected

           // also we can call super.login(); or super.callServerForLogin();

      }

      // IMPORTANT we are also allowed to override public and protected functions
      override public function login():void
      {
          super.login(); 
          // we call the parent function to prevent loosing functionality;  

          Alert.show("Login called from class B");
      }

      override protected function callServerForLogin():void
      {
           super.callServerForLogin();
           // keep also parent logic

           Alert.show("calling protected method from B");
      }
 }

 // ----  Now considering you declare an object of type B you can do the following
 var bObj:B = new B();

 // access public properties and call public functions from both B and A
 bObj.username = "superhero";
 bObj.login();

 // will get compile error for next lines
 bObj.serverURL = "host.port";
 bObj.callServerForLogin(); 
```

# vb6 - Activex 控件在其他系统 vb6 上不起作用

> ID：12274923
> 
> 赞同：0
> 
> 时间：2012-09-05T05:22:29.007
> 
> 标签：vb6, activex

我在 vb6 上创建了一个简单的 activex 控件并嵌入到网页中。

```
<OBJECT ID="UserControl1"
CLASSID="CLSID:B592C5C2-5D36-4053-ADF6-910DC98A3895"
CODEBASE="http://192.168.2.100/test/package/support/mtest.ocx">
</OBJECT> 
```

activex 控件只是一个按钮，它在我的系统上运行良好（它在我的系统上创建），但在任何其他系统上都不能。

我怎么了？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T19:04:06.747

对象标签以这种方式呈现： 1\. 首先，在注册表中查找classid。如果找不到，请下载并安装 ocx。如果找到，请根据对象标记中的版本属性检查版本（如果有）。（你没有。）如果标签中的版本属性高于本地版本，请下载并重新安装。
2\. 运行ocx，在页面中渲染控件。

现在，完成此操作的最常见障碍是没有人愿意安装 ActiveX 文件，因为将恶意代码放入其中太容易了。大多数网站根本不允许加载它们。尝试在另一个系统上手动安装和注册您的 ocx（如果您不知道，请查找 RegSvr32.exe）。如果你安装了它，然后你的页面按照它应该的方式运行，你就会得到答案。

我首先使用目标机器执行此操作，以排除这种可能性。

# javascript - Javascript Show Hide - 将切换操作从复选框更改为链接

> ID：12274924
> 
> 赞同：0
> 
> 时间：2012-09-05T05:22:32.400
> 
> 标签：javascript

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T05:27:09.630

# ios - iPhone Facebook SDK 3 在一个请求中获取用户详细信息和个人资料图片

> ID：12274927
> 
> 赞同：1
> 
> 时间：2012-09-05T05:22:59.663
> 
> 标签：ios, facebook, facebook-ios-sdk

我正在使用适用于 iPhone 的 Facebook SDK。我需要能够在一个请求中检索经过身份验证的用户详细信息和个人资料图片。

在 SDK 的 beta 版本中，我曾经能够使用下面的代码来执行此操作，但现在它只返回用户 ID 和图片 url。

```
[FBRequestConnection startWithGraphPath:@"me" parameters:[NSDictionary dictionaryWithObject:@"picture" forKey:@"fields"] HTTPMethod:@"GET" completionHandler:^(FBRequestConnection *connection, id result, NSError *error)... 
```

有没有办法在一个请求中做到这一点？非常感谢您的任何建议。

[编辑] 我还应该提到我需要直接将 URL 字符串指向图像，因为我没有使用 Facebook 的新 FBProfilePictureView 类。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T06:48:47.600

脑袋放屁！我应该在参数字典中包含我想要返回的所有属性。Facebook 的文档给我的印象是，如果你希望它与用户信息一起返回，你只需要包含图片属性。正确的请求如下：

```
[FBRequestConnection startWithGraphPath:@"me"
                         parameters:[NSDictionary dictionaryWithObject:@"picture,id,birthday,email,first_name,last_name,gender,username" forKey:@"fields"]
                         HTTPMethod:@"GET"
                  completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {

                  }]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-10T20:38:32.820

这是一个更新的解决方案。

```
var basicUserData = ["fields": "picture,id,birthday,email,first_name,last_name,gender"]

FBRequestConnection.startWithGraphPath("/me",
    parameters: basicUserData,
    HTTPMethod: "GET") {
        (connection:FBRequestConnection!, result, error) -> Void in
            if error != nil {
                print(error!)
            } else {
                print(result!)
            }
        } 
```

Parse 团队建议通过访问[https://graph.facebook.com/(facebookId)/picture?type=large](https://graph.facebook.com/(facebookId)/picture?type=large)获取 FB 个人资料图片 确保替换为用户的 Facebook Id。[这里是讨论](https://www.parse.com/questions/how-do-i-get-a-facebook-or-twitter-users-profile-picture)

笔记：

*   **在 FacebookSDK v2 之后不推荐使用**用户名字段****
***   **“/me”**是正确的端点而不是**“me”***   [这个要点显示了与 Facebook Graph 的许多其他交互](https://gist.github.com/ekoneil/3178821)**

# asp.net-mvc - JSTree 中的 Ajax 调用在 contextmenu 的“create.jstree”上绑定不起作用

> ID：12274928
> 
> 赞同：0
> 
> 时间：2012-09-05T05:23:06.417
> 
> 标签：asp.net-mvc, contextmenu, bind, jstree

在 create.jstree 上的 .bind 中，我的 $.ajax 调用中的一切似乎都是正确的。但是，由于某种原因，对控制器的调用（我使用的是 MVC 3）没有发生。我在 ajax 调用引用的 POST 函数上放置了一个断点，但它甚至从未被调用过。这使我相信 bind 和 ajax 调用的组合存在问题，导致 post 函数无法被调用。我会很感激你的建议。

jstree代码：

```
 $("#RequirementsTree")
    .bind("select_node.jstree", function(event, data) {
            if(is_requirement_node(data))
            {
                var id = data.rslt.obj.attr("id");

                if(id != null)
                {
                    $("#RequirementsTree").jstree('close_all')
                }
                else {
                    alert("Requirement node select error");
                }
            }
     })
    .bind("create.jstree", function(e, data) {
        alert(data.rslt.obj.text());
        alert(ParentNode);
        // Ajax call to Server with parent node id and new node text
        debugger;
        $.ajax({
            type: "POST",
            url: function(node) {
                return "/RMS/insertRequirementNode";
            },
            data: {
                    ParentID : ParentNode,
                    ChildNodeText : data.rslt.obj.text()
            },
            success: function(new_data) {
                return new_data;
            }   
        });
        ParentNode = null;
        if (data.rslt.parent == -1) {
            alert("Can not create new root directory");
            // Rollback/delete the newly created node
            $.jstree.rollback(data.rlbk);
            return;
        }
                BranchReqFLag = null;
    }).jstree({
        json_data: {
            data: RBSTreeModel,
            ajax: {
                type: "POST",
                data: function (n) {
                    return {
                        NodeID: n.attr("id").substring(4),
                        Level: n.attr("name").substring(7)
                    };
                },
                url: function (node) {
                    return "/Audit/GetRequirementsTreeStructure";
                },
                success: function (new_data) {
                    return new_data;
                }
            }
        },
        contextmenu: {
            items: function($node) {
                    return {
                        createItem : {
                            "label" : "Create New Branch",
                            "action" : function(obj) { this.create(obj); BranchReqFlag = "Branch"; ParentNode = obj.attr("id").substring(4);}
                        },
                        renameItem : {
                            "label" : "Rename Branch",
                            "action" : function(obj) { this.rename(obj);}
                        }
                    };
            }
        },
        plugins: ["themes", "json_data", "ui", "crrm", "contextmenu"]
    }); 
```

控制器 POST 功能：

```
 [AllowAnonymous]
    [HttpPost]
    public int insertRequirementNode(int ParentID, string ChildNodeText)
    {
        RBSText CurrNode = new RBSText();
        int CurrentNodeID = -1;

        //CurrNode.RMSHierarchyText = ChildNodeText;
        using (Contract ActiveContract = getContract())
        {
            try
            {
                // Inserts the new node beneath the Parent Node
                CurrentNodeID = ActiveContract.CreateRMSNode(CurrNode, ActiveContract.ContractId, ActiveContract.user_id, 2, "Child");
            }
            catch (Exception ex)
            {
                throw ex;
            }
        }
        return CurrentNodeID;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T16:03:37.787

`$.ajax()`您的函数中指定的 URL可能是错误的。`@Url.Content()`与 Server Root Wildcard: 一起使用作为URL`~`的前缀，因此无论您的应用程序如何部署，您的 URL 始终引用正确的服务器根路径，这假设您在 Razor 视图中设置 jstree 以便您可以访问剃刀引擎：

```
 $.ajax({
        type: "POST",
        url: "@Url.Content("~/RMS/insertRequirementNode")",
        data: {
                ParentID : ParentNode,
                ChildNodeText : data.rslt.obj.text()
        },
        success: function(new_data) {
            return new_data;
        }   
    }); 
```

如果您在 .js 文件中设置 jstree，则需要先将服务器根目录存储在 Razor 视图中定义的 javascript 变量中，然后改为引用该变量。

# oracle - oracle 40039 - 打开表单时无法附加 g4tel 库

> ID：12274930
> 
> 赞同：0
> 
> 时间：2012-09-05T05:23:19.460
> 
> 标签：oracle, oracleforms

我正在尝试在 oracle 6i 中运行表单。所有库文件均已附加。但是当我运行它时，我不断收到“oracle 40039 - 在打开表单“formname”时无法附加 g4tel 库”。我在快捷方式中也更改了路径。

可能是什么问题呢 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T22:13:20.330

检查您的库是否在您的 FORMS90_PATH 中。如果路径中存在与库同名的其他文件（甚至子目录），即使路径设置正确，也会出现此错误。对于 ，您可能有 yourlib.olb 或 yourlib 子目录。您可以将 yourlib.pll 重命名为 yourlib2.pll（或与原始名称不同的任何名称），然后将其分离并重新附加到您的表单中。

# fullscreen - JavaFx 2.2 和全屏模式

> ID：12274933
> 
> 赞同：7
> 
> 时间：2012-09-05T05:23:47.710
> 
> 标签：fullscreen, javafx-2

再会！

我尝试了我的第一个应用程序 JavaFx。我设置全屏模式并按下按钮显示一个对话框。当对话框出现时，主窗口将失去全屏显示。

代码：

```
public class Test1 extends Application {

    @Override
    public void start(final Stage primaryStage) {
        Button btn = new Button();
        btn.setText("Say 'Hello World'");
        btn.setOnAction(new EventHandler<ActionEvent>() {
            @Override
            public void handle(ActionEvent event) {
                Stage dialogStage = new Stage(StageStyle.UTILITY);
                dialogStage.initModality(Modality.APPLICATION_MODAL);
                dialogStage.setScene(new Scene(VBoxBuilder.create().
                    children(new Text("Hi"), new Button("Ok.")).
                    alignment(Pos.CENTER).padding(new Insets(5)).build()));
                dialogStage.show();

                System.out.println(dialogStage.getOwner()==primaryStage.getOwner());
            }
        });

        StackPane root = new StackPane();
        root.getChildren().add(btn);

        Rectangle2D r = Screen.getPrimary().getBounds();
        Scene scene = new Scene(root, r.getWidth(), r.getHeight());

        primaryStage.setTitle("Hello World!");
        primaryStage.setScene(scene);
        primaryStage.setFullScreen(true);
        primaryStage.show();
    }

    public static void main(String[] args) {
        launch(args);
    }
} 
```

操作系统：Windows 7

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T08:04:37.960

你需要

```
dialogStage.initOwner(primaryStage); 
```

# android - 使用 if 语句无法计算测验应用程序 android 的正确答案

> ID：12274935
> 
> 赞同：0
> 
> 时间：2012-09-05T05:24:03.483
> 
> 标签：android, if-statement, count

每当我点击按钮时，如果答案正确，它应该会改变分数。但是，当我单击下一步时，它不会改变分数。它只显示它的默认值，即 0。除了分数，一切都很好。

```
 public class QuizActivity extends Activity {
    DBAdapter db = new DBAdapter(this);
    private TextView tvQuestion;
    private Cursor c;
    private Cursor cur;
    private RadioGroup radioGroup;
    private RadioButton rb0,rb1,rb2;
    private Button nextButton;
    private int i =1;
    private int questNo=0;
    private RadioButton radioButton;
    private int score=0;
    private String correctAnswer;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.quizactivity);

    displayQuestion();
    nextButton = (Button) findViewById(R.id.nextButton);
    nextButton.setOnClickListener(new OnClickListener() {

        public void onClick(View arg0) {
            getselectedAnswer();
            checkAnswer();

        if(i < 10){
                i=i+1;

                radioGroup.clearCheck();
                displayQuestion();

                }else{
                Intent i = new Intent(QuizActivity.this, Results.class);
                startActivity(i);
                }
        }
        });
}
        public void checkAnswer() {
        Cursor mCursor = db.getCorrectAnswersforComparison(i);
        String correctAns = mCursor.getString(mCursor.getColumnIndex(DBAdapter.KEY_CORRECTANSWERS));
        if(getselectedAnswer()==correctAns){
            score = score+1;

        }else{
            score = score+0;
        }

        }

private String getselectedAnswer() {    
    if (rb1.isChecked()){
        return rb1.getText().toString();
    }
    if (rb2.isChecked()){
        return rb2.getText().toString();
    }   
    if (rb0.isChecked()){
        return rb0.getText().toString();
    }
    else
        return null;

}
public void displayQuestion(){
    db.open();
    TextView scoretv = (TextView) findViewById(R.id.scoretv);
    scoretv.setText(""+score);
    c = db.getQuiz_Content(i);
    cur = db.getAnswers(i);
    tvQuestion = (TextView) findViewById(R.id.textViewQuestionQA);
    tvQuestion.setText(c.getString(0));
    radioGroup = (RadioGroup) findViewById(R.id.radioGroup);
    String correctAnswer = cur.getString(cur.getColumnIndex(DBAdapter.KEY_CORRECTANSWERS));
    String option1 = cur.getString(cur.getColumnIndex(DBAdapter.KEY_OPTION1));
    String option2 = cur.getString(cur.getColumnIndex(DBAdapter.KEY_OPTION2));
    rb0 = (RadioButton) findViewById(R.id.radio0);
    rb1 = (RadioButton) findViewById(R.id.radio1);
    rb2 = (RadioButton) findViewById(R.id.radio2);
    List<String> answers = new ArrayList<String>();
    answers.add(correctAnswer);
    answers.add(option1);
    answers.add(option2);
    Collections.shuffle(answers);
    rb0.setText(answers.get(0));
    rb1.setText(answers.get(1));
    rb2.setText(answers.get(2));

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T05:29:49.490

你的问题在这里：

```
if(getselectedAnswer()==correctAns) 
```

Java 上的字符串比较不适用于通常的相等运算符 ==（这会检查它们是否是相同的实例，而不是字符串是否包含相同的字符）。相反，使用字符串方法 .equals：

```
if(getSelectedAnswer().equals(correctAns)) 
```

# ios - 当我在 iOS 的 UIDatePicker 上单击完成但值未更改时，会触发什么事件？

> ID：12274936
> 
> 赞同：0
> 
> 时间：2012-09-05T05:24:05.280
> 
> 标签：ios, uidatepicker

我在我的 iPhone 项目中使用 UIDatePicker。我想在打开日期选择器并单击“完成”按钮后在日期选择器中显示日期。我正在使用这段代码：

```
[datePicker addTarget:self action:@selector(changeDate:) forControlEvents:UIControlEventValueChanged] 
```

changeDate 是我在其他地方定义的方法，我将 UIControlEventValueChanged 的​​相应代码放在该方法中。但是，即使我没有进行任何更改，我也想在点击“完成”按钮后在 UIDatePicker 中显示该值。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T05:31:32.873

您可以使用以下代码....

```
-(void)showDate{
    menu = [[UIActionSheet alloc] initWithTitle:@"Select Date"
               delegate:self
               cancelButtonTitle:nil
               destructiveButtonTitle:nil
               otherButtonTitles:nil];

    datePicker = [[UIDatePicker alloc] initWithFrame:CGRectMake(0.0, 44.0, 0.0, 0.0)];
    datePicker.datePickerMode = UIDatePickerModeDate;
    datePicker.minimumDate = [NSDate date];
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setFormatterBehavior:NSDateFormatterBehavior10_4];
    [dateFormatter setLocale:[[[NSLocale alloc] initWithLocaleIdentifier:@"en_US"]autorelease]];
    [dateFormatter setDateFormat:@"dd MMM yyyy"];
    //[dateFormatter setDateFormat:@"MM/dd/YYYY"];

    //[theDatePicker release];
    [datePicker addTarget:self action:@selector(LabelChange:) forControlEvents:UIControlEventValueChanged];

    dateTool = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];
    dateTool.barStyle=UIBarStyleBlackOpaque;
    [dateTool sizeToFit];
    NSMutableArray *barItems = [[NSMutableArray alloc] init];
    UIBarButtonItem *flexSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(DatePickerDoneClick)];
    [barItems addObject:flexSpace];

    [dateTool setItems:barItems animated:YES];
    [menu addSubview:dateTool];
    [menu addSubview:datePicker];
    [menu showInView:self.view];
    [menu setBounds:CGRectMake(0,0,320, 464)];

    //    [self.view addSubview:datePicker];

    [datePicker release];
}
-(IBAction)DatePickerDoneClick{
    [menu dismissWithClickedButtonIndex:0 animated:YES];
}
- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView
{
    return 1;
}

- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component{

        return [arrTime count];

}

- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component
{

        return [arrTime objectAtIndex:row];

}

- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component{

        txtTime.text = [arrTime objectAtIndex:row];

} 
```

# android - 应该在 AVD 中使用哪些设置来准确模拟 Recon MOD Live？

> ID：12274937
> 
> 赞同：0
> 
> 时间：2012-09-05T05:24:16.750
> 
> 标签：android

我正在尝试在收到实际设备之前开始为 Recon MOD Live 开发自定义应用程序。我应该使用哪些设置才能运行示例应用程序并使其看起来正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T21:44:05.533

为了最好地模拟 MOD Live，请为 AVD 提供 100MB SD 卡和 428x240 的屏幕分辨率。

还要确保可以通过 DPAD 按钮和后退按钮访问 UI。

就是这样。无法模拟 MOD Live 特定的 API。

# android - Android 中 Activity 之间的 3D 动画

> ID：12274943
> 
> 赞同：7
> 
> 时间：2012-09-05T05:25:19.940
> 
> 标签：android, animation

如何在两个 Activity 之间创建动画，看起来像 android 中的屏幕截图![在此处输入图像描述](../Images/422fdb190373d3643562a137058c3ffb.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T08:37:59.547

搜索`jazzyviewpager`。这是 图书馆的[链接。](https://github.com/jfeinstein10/JazzyViewPager)它有许多很酷的动画可以玩。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T06:20:19.883

我认为这不是**活动动画**，我相信它是**片段动画**，活动动画更难实现平滑， [请在此处阅读有关片段](https://stackoverflow.com/a/4819665/849939)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T05:41:16.790

您可能需要覆盖 Activity.overPendingtransition，并在 xml 中定义过渡动画。参考[这个](http://developerlife.com/tutorials/?p=343)。

# c# - 跟踪用户在特定页面点击了什么

> ID：12274946
> 
> 赞同：0
> 
> 时间：2012-09-05T05:25:23.107
> 
> 标签：c#, asp.net, log4net, trace, user-activity

只是一个非常简单的问题。我想监控我的网络应用程序中的用户活动。有什么方法可以跟踪用户在某个网页中点击了什么？例如用户点击 default1.aspx 中的 button1 。将创建一个日志文件并记录该用户已在 default.aspx 中创建 button1

有可能做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T05:34:37.517

试试[这个库（JAVASCRIPT CLICK TRACKING LIBRARY By Erik Vold）](https://github.com/erikvold/click-tracking-js-lib)并阅读[这个博客](http://www.ravelrumba.com/blog/tracking-links-with-javascript/)了解更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T05:30:23.000

您可以创建一个简单的 Web 服务，并通过对 Web 服务进行 ajax 调用来发布有关用户如何与您的应用程序交互的数据。

[jQuery](http://jquery.com/)将帮助您“聆听”页面上的所有按钮并进行 ajax 调用。

# sql - 如何优化以下删除 SQL 查询？

> ID：12274947
> 
> 赞同：0
> 
> 时间：2012-09-05T05:25:31.440
> 
> 标签：sql, oracle, optimization

`delete`我在 oracle 中有以下查询。一次将从数据库中删除大约 1000 条记录。

我在查询中使用了“in”。有没有更好的方法来编写这个查询？

```
DELETE FROM BI_EMPLOYEE_ACTIVITY      
WHERE EMPLOYEE_ID in (    
    SELECT    
      EMP_ID   
    FROM   
      BI_EMPLOYEE   
    WHERE   
      PRODUCT_ID = IN_PRODUCT_ID  
  ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T05:30:33.903

将索引放在 EMP_ID 上可能会有所帮助，我不相信是否可以进行任何其他优化，查询非常简单直接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T05:36:11.350

在 PRODUCT_ID 列上创建索引。这将加快搜索速度。如果列是 varchar 类型，如果要将值转换为大写或小写，请使用函数索引

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T05:37:20.283

也许您可以尝试[EXIST](http://weblogs.sqlteam.com/mladenp/archive/2007/05/18/60210.aspx)而不是 IN：

```
DELETE FROM BI_EMPLOYEE_ACTIVITY      
WHERE EXISTS (    
    SELECT    
      EMP_ID   
    FROM   
      BI_EMPLOYEE   
    WHERE   
      PRODUCT_ID = IN_PRODUCT_ID 
    AND
      EMP_ID =  EMPLOYEE_ID
  ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T08:02:21.117

`BI_EMPLOYEE`按此顺序在表上为`PRODUCT_ID, EMP_ID`列创建索引（首先是 product_id）。

`BI_EMPLOYEE_ACTIVITY`并在表上为列创建索引`EMPLOYEE_ID`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T08:29:18.747

由于我们缺少对数据分布的描述，因此实际上不可能回答这个问题：每个表中有多少行？表之间有什么关系？删除影响了多少行？

我将假设两个表都很大（因为这是一个优化问题）并且`BI_EMPLOYEE`具有`BI_EMPLOYEE_ACTIVITY`父子 1..N 关系。

如果受删除影响的行数很少，这意味着没有多少员工具有相同的`PRODUCT_ID`内容，并且每个员工的活动很少。`BI_EMPLOYEE (product_id)`在这种情况下，同时索引和是有意义的`BI_EMPLOYEE_ACTIVITY (employee_id)`。

但这可能不是这种情况，删除可能会影响很多行。在这种情况下，索引可能是一个障碍。如果删除影响很多行，最快的访问路径可能是`FULL TABLE SCAN + HASH JOIN`.

我们在这里需要一些指标：删除了多少行？多久时间？这是因为大型 DML 总是需要时间，特别是`DELETE`因为它们产生的撤消量最大。

正如asktom[的“从大表中删除许多行”](http://asktom.oracle.com/pls/asktom/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:2345591157689)`DELETE`中所解释的，还有一个 large 的替代方法：

1.  重新创建没有删除行的表
2.  对数据进行分区，进行并行删除
3.  对数据进行分区，以便通过删除分区来完成删除

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-10T21:26:42.507

我只是补充一点，除了为查询创建索引之外，当表变得非常大时，您需要查看锁定问题，尝试以独占模式锁定表（如果可能），因为这只需要从数据库中锁定，如果不可能尝试对每 2500 条记录提交删除操作，因此如果您遇到行锁定问题，您最终不会让数据库中的锁处于饥饿状态。

# android - Android.mki 包含执行序列

> ID：12274948
> 
> 赞同：2
> 
> 时间：2012-09-05T05:25:36.333
> 
> 标签：android, android-ndk, makefile

```
LOCAL_PATH := $(call my-dir)  
TOP_LOCAL_PATH := $(call my-dir)/../ 

#Add target arm version 
ifeq ($(TARGET_ARCH_ABI),armeabi) 
MY_PJSIP_FLAGS := $(BASE_PJSIP_FLAGS) -DPJ_HAS_FLOATING_POINT=0 
else 
MY_PJSIP_FLAGS := $(BASE_PJSIP_FLAGS) -DPJ_HAS_FLOATING_POINT=1 
endif 

# Pjsip 
include $(TOP_LOCAL_PATH)/pjlib/build/Android.mk 
include $(TOP_LOCAL_PATH)/pjlib-util/build/Android.mk 

include $(TOP_LOCAL_PATH)/pjnath/build/Android.mk 
include $(TOP_LOCAL_PATH)/pjmedia/build/Android.mk 
include $(TOP_LOCAL_PATH)/pjsip/build/Android.mk 

#pjsip JNI 
include $(TOP_LOCAL_PATH)/jni/build/Android.mk 

#JSON 
include $(TOP_LOCAL_PATH)/third_party/build/json/Android.mk 

#GSLB 
include $(TOP_LOCAL_PATH)/pgslb/build/Android.mk 
```

有一个 android Make 文件。编译 GSLB 需要这个文件。`libpjnath.a`,`libpjnath.a`由 编译`$(TOP_LOCAL_PATH)/pjnath/build/Android.mk`。但是make文件编译GSLB一次执行。`libpjnath.a`找不到。
如何指定包含执行顺序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T08:27:44.967

尝试在 gslb 中添加 LOCAL_SHARED_LIBRARIES := pjnath。希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T12:06:54.793

实际上，**ndk-build**运行*make*，依赖 make 决定构建其目标的顺序并不是一个好习惯。例如，它可能会启动并行构建以使用您的多核 CPU。正确的方法是解释**使**一个目标依赖于另一个目标。

**LOCAL_STATIC_LIBRARIES**和**LOCAL_SHARED_LIBRARIES**正是为此目的而设计的。有关详细说明，请参阅[NDK 文档](http://source-android.frandroid.com/ndk/docs/ANDROID-MK.html)。

# php - Node.JS 的基础知识？

> ID：12274951
> 
> 赞同：5
> 
> 时间：2012-09-05T05:25:39.410
> 
> 标签：php, node.js, web-applications, webserver, server-side

我正在尝试了解 node.js 并且有大量示例，但是我找不到答案或示例的一个问题是它如何与网络主机一起使用（我正在使用 inmotionhosting.com） ?

假设我有一个基本网站 www.url.com/index.php（注意：我也在使用 PHP）。为了使该网站正常运行，我所要做的就是将文件上传到我的虚拟主机站点的文件管理器中。

node.js 是如何工作的？我是否也只需将 node.js 文件上传到虚拟主机中？

在所有示例中，他们都使用 localhost 和端口 8000 或其他东西。有人可以发光吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T05:41:40.360

你至少需要 VPS 主机来安装 node.js，共享主机不允许你自己安装任何应用程序，除非你他们让你选择这样做。

那么这一切都取决于您的配置方式以及 node.js 服务的应用程序，除非您或网络托管设置了路径，否则您无法真正说出默认上传文件的位置。

***来自 nodejs.org***
*Node.js 是一个基于 Chrome 的 JavaScript 运行时构建的平台，用于轻松构建快速、可扩展的网络应用程序。Node.js 使用事件驱动的非阻塞 I/O 模型，使其轻量且高效，非常适合跨分布式设备运行的数据密集型实时应用程序。*

它并没有说它特定于 Web 使用，而是您应该使用诸如 [ExpressJS](http://www.expressjs.com)之类的 Web 框架，您可以在其中构建 Web 应用程序或任何其他东西。您的主机应该提供有关如何管理 nodejs 实例中的包的更多信息，配置等。
一些有用的链接
[Domain API](http://nodejs.org/api/domain.html)
[ExpressJS](http://expressjs.com)
[ExpressJS 示例](https://github.com/visionmedia/express/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T12:19:54.343

这是我遇到的问题。

> **托管您的节点应用程序？**

[托管节点应用程序](http://dailyjs.com/2010/03/15/hosting-nodejs-apps/)

[节点符](http://www.youtube.com/watch?v=gcLqidEJreE&feature=player_embedded)

> **支持的托管服务提供商？**

[节点托管](https://github.com/joyent/node/wiki/Node-Hosting)

只需阅读每个部分的说明。

# asp.net-mvc-3 - 如何在 mvc3 中控制 url

> ID：12274952
> 
> 赞同：0
> 
> 时间：2012-09-05T05:25:41.267
> 
> 标签：asp.net-mvc-3, url, routing, url-routing

我使用 MVC3 的默认登录模型。LogOn 部分视图位于布局视图中。

```
@Html.Partial( "~/Views/Home/LogOn.cshtml", new MyProject.Models.LogOnModel() ) 
```

登录后，Url为：

```
http://localhost:20234/?UserName=TestUsername&Password=121212&RememberMe=True 
```

我不希望在 URL 中看到密码。如何从 URL 中删除密码（也是用户名、RememberMe）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T05:45:35.460

当您使用 GET 方法将数据传输到服务器时，参数在 url 中可见。在这种情况下，您应该使用 POST 方法。例如：

```
<form action="/Account/Logon" method="POST">
    <input type="text" name="Username"/>
    <input type="text" name="Password"/>
    <input type="submit"/>
</form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T05:51:06.873

1）请更改您的默认路线：

```
 routes.MapRoute(
                    "DefaultSite",
                    "{controller}/{action}/{id}",
                    new
                        { 
                            controller ="Account",
                            action ="LogOn",
                            id = UrlParameter.Optional
                        }
                    ); 
```

2）加载部分主加载文件：

```
 @using (Html.BeginForm("LogOn","Account",HttpMethod.Post))
    {
        @Html.AntiForgeryToken() 
        @Html.Partial( "~/Views/Home/LogOn.cshtml", new MyProject.Models.LogOnModel())          
    } 
```

3）并且帐户控制器添加了您的登录逻辑：

```
 [HttpPost]
        [ValidateAntiForgeryToken]
        public ActionResult Login(LogOnModel model)
        {
            if (ModelState.IsValid)
            {
                //TODO:

                return RedirectToAction("index", "home");
            }

            // If we got this far, something failed, redisplay form
            ModelState.AddModelError("", @"The user name or password provided is incorrect.");
            return View(model);
        } 
```

# asp-classic - SQL注入这么好吗

> ID：12274955
> 
> 赞同：4
> 
> 时间：2012-09-05T05:25:55.107
> 
> 标签：asp-classic, sql-injection

我已经对此进行了很多研究，但我仍然无法理解它。但是，我想确保我得到适当的保护。我在 Classic ASP 中编写了一个函数来帮助防止 SQL 注入或对数据库的可能的暴力破解。如果我需要添加或删除内容甚至纠正问题以使其更安全，你们能给我自己的意见和建议吗？非常感谢您提前！！

在插入 MySQL 数据库之前，我在下面使用它。

插入示例：

```
conn.execute("INSERT INTO " & employees & "(eid, first_name, last_name) VALUES('" & Clng(strEID) & "','" & SQLClean(strfirstname) & "','" & SQLClean(strlastname) & "');") 
```

功能：

```
Private Function SQLClean(ByVal strString)
    If strString <> "" Then
        strString = Trim(strString)

        'Remove malisous charcters from sql\
        strString = replace(strString,"-shutdown","", 1, -1, 1)
        strString = replace(strString,"\","\\", 1, -1, 1)
        strString = replace(strString,"=","\=", 1, -1, 1)
        strString = replace(strString,",","\,", 1, -1, 1)
        strString = replace(strString,"`","\`", 1, -1, 1)
        strString = replace(strString,"&","\&", 1, -1, 1)
        strString = replace(strString,"/","\/", 1, -1, 1)      
        strString = replace(strString,"[","\[", 1, -1, 1)
        strString = replace(strString,"]","\]", 1, -1, 1)
        strString = replace(strString,"{","\{", 1, -1, 1)
        strString = replace(strString,"}","\}", 1, -1, 1)
        strString = replace(strString,"(","\(", 1, -1, 1)
        strString = replace(strString,")","\)", 1, -1, 1)
        strString = replace(strString,";","\;", 1, -1, 1)
        strString = replace(strString,"+","\+", 1, -1, 1)
        strString = replace(strString,"<","\<", 1, -1, 1)
        strString = replace(strString,">","\>", 1, -1, 1)
        strString = replace(strString,"^","\^", 1, -1, 1)
        strString = replace(strString,"@","\@", 1, -1, 1)
        strString = replace(strString,"$","\$", 1, -1, 1)
        strString = replace(strString,"%","\%", 1, -1, 1)
        strString = replace(strString,"!","\!", 1, -1, 1)
        strString = replace(strString,"*","\*", 1, -1, 1)
        strString = replace(strString,"~","\~", 1, -1, 1)
        strString = replace(strString,"#","\#", 1, -1, 1)
        strString = replace(strString,"?","\?", 1, -1, 1)
        strString = replace(strString,"'","\'", 1, -1, 1)
        strString = replace(strString,"""","\""", 1, -1, 1)
        strString = replace(strString,"select","\select", 1, -1, 1)
        strString = replace(strString,"insert","\insert", 1, -1, 1)
        strString = replace(strString,"update","\update", 1, -1, 1)
        strString = replace(strString,"delete","\delete", 1, -1, 1)
        strString = replace(strString," or "," \or ", 1, -1, 1)
        strString = replace(strString," and "," \and ", 1, -1, 1)
        strString = replace(strString,"drop","\drop", 1, -1, 1)
        strString = replace(strString,"union","\union", 1, -1, 1)
        strString = replace(strString,"into","\into", 1, -1, 1)

        'Return cleaned value.
        SQLClean = Trim(strString)

    End If
End Function 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-05T06:59:44.440

请在任何情况下都**不要**尝试编写自己的 SQL 转义代码，除非它纯粹是学术练习。你会弄错的。如果有人在您的站点上使用[SQL 注入攻击工具](http://sqlmap.org/)，您将遭受严重后果。人们对此采取随意的态度，商业和职业已经被摧毁。

我花了整整三分钟[在 StackOverflow 上找到一个](https://stackoverflow.com/questions/7734673/mysql-classic-asp-parameterized-queries)关于使用参数的经典 ASP 和 MySQL 查询的示例。

Please, please, **please** use the official facilities and do not roll your own.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-05T05:34:57.410

[这是一个很好的链接，可以阅读以防止 ASP Classic 脚本中的 SQL 注入攻击。](http://www.stardeveloper.com/articles/display.html?article=2008112501&page=1)

还值得注意的是，您应该始终验证您的变量，在将它们转储到 SQL 查询中之前检查它们的正确值。检查有效值通常比检查人们可以塞进变量的所有可能的坏事更容易。

# node.js - $elemMatch 是否不适用于新的 mongodb 2.2？

> ID：12274957
> 
> 赞同：4
> 
> 时间：2012-09-05T05:25:58.157
> 
> 标签：node.js, mongodb, express, mongoose

在 MongoDB 的新版本中，我们可以使用 $elemMatch 投影运算符将查询的响应限制为数组的单个匹配元素。[http://docs.mongodb.org/manual/reference/projection/elemMatch/](http://docs.mongodb.org/manual/reference/projection/elemMatch/)

但它似乎在 mongoose 3 中还不起作用，这是示例：

```
{
 _id: ObjectId(5), 
 items: [1,2,3,45,4,67,9,4]
}

Folder.findOne({_id: Object(5)}, {$elemMatch: {$in: [1,67,9]}})
  .exec(function (err, doc) {

}); 
```

我预计会得到以下文档：

```
{
 _id: ObjectId(5), 
 items: [1,67,9]
} 
```

但不幸的是，我得到的是包含所有项目的文档：

```
{
 _id: ObjectId(5), 
 items: [1,2,3,45,4,67,9,4]
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T17:35:29.973

这里的 mongodb 文档具有误导性，我们将对其进行更新。

它的意思是您现在可以在投影中使用 $elemMatch ，即您的字段选择：

[https://gist.github.com/3640687](https://gist.github.com/3640687)

另见：[https ://github.com/learnboost/mongoose/issues/1085](https://github.com/learnboost/mongoose/issues/1085)

[编辑] 对已发送文档的拉取请求：[https ://github.com/mongodb/docs/pull/185](https://github.com/mongodb/docs/pull/185)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T05:50:11.427

首先，您缺少`items`$elemMatch 运算符前面的字段名称。您的查询应为

```
Folder.findOne({_id: Object(5)}, {items: {$elemMatch: {$in: [1,67,9]}}})
  .exec(function (err, doc) { }); 
```

但这仍然不会返回所需的结果，因为如文档中所述：

> $elemMatch 投影将仅匹配每个源文档的一个数组元素。

所以你只会得到类似的东西：

```
{
 _id: ObjectId(5), 
 items: [1]
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T11:13:33.510

我没有设置 mongoose 来使用节点执行此操作，但您也可以使用 2.2 中的新聚合框架获得您想要的结果 - 这是一个可以为您提供所需结果的示例。首先，我的示例文档如下所示：

```
> db.foo.findOne()
{
    "_id" : ObjectId("50472eb566caf6af6108de02"),
    "items" : [
        1,
        2,
        3,
        45,
        4,
        67,
        9,
        4
    ]
} 
```

为了达到你想要的，我这样做了：

```
> db.foo.aggregate( 
             {$match : {"_id": ObjectId("50472eb566caf6af6108de02")}},  
             {$unwind : "$items"},  
             {$match : {"items": {$in : [1, 67, 9]}}},  
             {$group : {_id : "$_id", items : { $push : "$items"}}},
             {$project : {_id : 0, items : 1}}
     )
{
    "result" : [
    {
        "_id" : ObjectId("50472eb566caf6af6108de02"),
        "items" : [
            1,
            67,
            9
        ]
    }
],
"ok" : 1

} 
```

为了解释，我将逐行详细说明：

```
{$match : {"_id": ObjectId("50472eb566caf6af6108de02")}} 
```

这是相当明显的——它基本上等同于常规查询的查找条件，结果被传递到管道中的下一步进行处理。这是可以使用索引等的部分。

```
{$unwind : "$items"} 
```

这将爆炸数组，创建一个文档流，数组的每个元素都有一个。

```
{$match : {"items": {$in : [1, 67, 9]}}} 
```

第二个匹配将只返回列表中的文档，基本上将文档流减少到三个结果集。

```
{$group : {_id : "$_id", items : { $push : "$items"}}} 
```

我们希望我们的输出是一个数组，所以我们必须撤消上面的展开，因为我们已经选择了我们想要的项目，使用 _id 作为分组的键。注意：如果有多个匹配项，这将具有重复值，如果您想要一个唯一列表，您将使用`$addToSet`而不是`$push`

```
{$project : {_id : 1, items : 1}} 
```

最后，这个投影并不是真正需要的，但我将它包括在内以说明功能 - 如果您愿意，您可以选择不返回 _id 等。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-05T05:47:13.937

$elemMatch 和 MongoDB 通常都不会过滤数组中的数据。$elemMatch 可用于匹配文档，但不会影响要返回的数据。您只能使用过滤器参数（find() findOne() 调用的第二个参数）从文档中包含/排除字段，但您不能根据某些查询输入过滤结果。

# iphone - UIToolbar 在添加项目时表现得非常奇怪

> ID：12274959
> 
> 赞同：0
> 
> 时间：2012-09-05T05:26:20.843
> 
> 标签：iphone, objective-c, cocoa-touch, uibarbuttonitem, uitoolbar

这是我的问题。

我的应用程序中有 4 个不同的 UIToolbars。我分配并初始化了 5 个 BarButton 项目。（所有都是属性，并且它们都是 alloc init 的开头）。

我将所有五个条形按钮添加到 4 个单独的 NSArrays alloc init 中，并将这些数组分配给所有 4 个工具栏。顺便说一句，最后一个工具栏是可见的。其他工具栏为空白。

***换句话说....***

我应该为每个工具栏分配一组单独的栏按钮项目吗？？？在这种情况下，它可以工作。如果我共享按钮，似乎只有添加到按钮的最后一个工具栏才会生效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T05:34:07.233

这并不奇怪，预计 UIView 的每个实例一次只能呈现一个子视图。让我们这样说：你有一个 UIView 实例，它被添加到两个独立的超级视图中你如何区分哪一个被触摸，以便调整它以进行交互？您需要为每个 Button/UIView 制作和实例化

或者这个，你有一个 UIView（UIBarButton，随便），你需要知道它是 superview，如果它被添加到两个 UIToolbars，它是哪一个？

# c# - 扩展类而不修改它们（或知道实现细节）的模式（c#）

> ID：12274960
> 
> 赞同：2
> 
> 时间：2012-09-05T05:26:32.493
> 
> 标签：c#, .net, design-patterns, inheritance

我正在修改位于两个已建立层之间的一些代码，并且无法确定最佳设计是什么。

当前代码调用文件访问库，并将对象返回给调用者。我需要扩展返回的对象以添加一些自定义处置功能。我无权访问传递对象的定义（例如，有些是文件流）

如果我可以创建一个行为类似于基本实例的子实例，并且可以从基本实例创建，但它有一些隐藏的额外功能，那会为我节省很多工作。这可以在不知道基类的实现细节的情况下完成吗？

在看起来很像这样的代码形式中：

```
private class FileObjectWithDispose : FileObject, IDisposable
{//voidaction is a delegate, this is .net 2.0
    private VoidAction _disposeCallback;

public static FileObjectWithDispose wrapFile(FileObject unWrappedFile, VoidAction DisposeAction)
{//Implementation missing, this is the crux of what I don't know how to do
    FileObjectWithDispose wrappedFile = new FileObjectWithDispose(unWrappedFile);
    wrappedFile._disposeCallback = DisposeAction;
    return wrappedFile;
}

private FileObjectWithDispose()
    : base(null, null)//base class does not have a default constructor
{
    throw new NotImplementedException("FileObjectWithDispose is a wrapper class which is intended only to be cast from a filestream.");
}

private void Dispose()
{
    _disposeCallback();
    base.Dispose();
} 
```

}

示例调用如下所示：

```
Connect(file, username, password, domain);
return FileObjectWithDispose.wrapFile(OpenFile(path), () => { Disconnect(file, username); }); 
```

我遇到的主要困难是，如果可能的话，如果基类没有实现允许自己被装饰的接口，我该如何获取基类实例并创建一个装饰实例？任何想法如何完成这项任务？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T13:47:09.990

装饰器模式是要走的路。

1.  创建接口`ICustomDisposeAction`（示例名称）
2.  使用您希望在其上执行的所有可能的类来实现此接口`DisposeAction`。

    FileObjectWithDispose : FileObject, IDisposable, ICustomDisposeAction

3.  创建另一个也实现的类装饰器`ICustomDisposeAction`。通过装饰器的构造函数传递原始基类，然后在其上调用装饰器`DisposeAction`。

> ```
> public class Decorator : ICustomDisposeAction
> {
>   public FileObject wrappedFile { get; set; } 
>   public Decorator(FileObject unWrappedFile,...)
>   {
>     wrappedFile = unWrappedFile;
>     //Do your custom dispose here
>   }
> } 
> ```

1.  在那些需要自定义处理对象方式的情况下，创建装饰器对象并进行自定义处理！

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T06:38:06.537

尝试使用装饰器模式。[此](http://www.dofactory.com/Patterns/PatternDecorator.aspx)链接可以提供帮助。

# html - 将一个 div 居中放置在其他两个 div 上方

> ID：12274961
> 
> 赞同：0
> 
> 时间：2012-09-05T05:26:35.497
> 
> 标签：html, css, position

我必须制定一个小小的时间表概览。我的问题是发生在午夜的事件。

我想要做的是以下内容：

在左侧，我有一个“列”（我与 div 一起工作）。在第一列旁边的第二列中，我有我的事件。

没问题，对于在同一天开始和结束的事件。事件不是文本，这是花哨的 div，一些添加信息和图标，但在这里我将它们显示为文本。

```
2012-02-25 活动一（8:00-11:00）
              {一些空间}
              活动二（13:00-15:00）
              {20 像素空间}
------------------------------------------
2012-02-26 {20px 空间}
              活动三（8:00-11:00）
              {一些空间}
              活动四（13:00-15:00）

```

美好的！但是现在，对于发生在午夜的事件，我想将事件 div 放在分隔两天的线上方并居中，所以每个事件 div 的高度为 30px，线的高度为 2px，这意味着我想要 14px开始日期的隔夜事件和结束日期的 14 像素。

每天的“行”也是一个 div。因此，我希望将隔夜事件放置在两个“行”div 和行（也许`<hr>`，也许`<div>`）之上。

现在我的问题是，这可能吗？如果可以，怎么做？

最好的祝福

**编辑：**

这里有一个 jsFiddle：http: [//jsfiddle.net/NoiZy/6Dkta/](http://jsfiddle.net/NoiZy/6Dkta/)

现在应该每天在红线上方放置一个额外的事件，大小为一半。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:28:33.427

我可能会做这样的事情[http://jsfiddle.net/6Dkta/61/](http://jsfiddle.net/6Dkta/61/) 将每一天的行设置为“位置：相对”，然后我给了一个类的重叠事件，这样你就可以动态添加。类 twoDay 将位置设置为绝对，底部设置为 -34px。这样，无论行的大小如何，它都将始终与底部重叠。不确定这是否适用于您的设置，但它适用于小提琴。

# php - 结合两个mysql查询

> ID：12274964
> 
> 赞同：1
> 
> 时间：2012-09-05T05:27:19.013
> 
> 标签：php, mysql, sql

我有两个 sql 查询...

```
set  @count:=0;
select @count:=@count+1 as SNO, col1, col2 FROM table; 
```

我想将上述查询组合成一个查询。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T05:29:51.060

你可以简单地做到这一点，

```
select @count:=@count+1 as SNO, col1, col2 
FROM table, (SELECT @count:=0) r ; 
```

就像为每一行添加 RowNumber

```
select @rownum:=@rownum+1 ‘rank’, 
       p.* 
from player p, (SELECT @rownum:=0) r 
order by score 
desc limit 10; 
```

**[在 MySQL 中添加行号](http://jimlife.wordpress.com/2008/09/09/displaying-row-number-rownum-in-mysql/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T05:32:31.060

据我了解，在这种情况下，您正在寻找 Row_Number 函数。如果这是正确的，请看[这里](https://stackoverflow.com/questions/1895110/row-number-in-mysql)

例如

```
Select @count := @count + 1 As SNO, col1, col2
From table ,(SELECT @count:=0) foo 
```

可能有帮助

您也可以参考[MySQL 中的 ROW_NUMBER、Partition 和 Over 以](http://briansteffens.com/2011/07/19/row_number-partition-and-over-in-mysql/)获得更多理解

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T05:31:30.677

结合两个查询..

```
SELECT t1.field1, t1.field2, t2.field1
FROM (query1) as t1, (query2) as t2
WHERE t1.field1= t2.field1 
```

希望这会奏效......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T06:21:54.460

```
select @count:=@count+1 as SNO, col1, col2 FROM table, (SELECT @count:=0) t; 
```

# r - 距离对象 R 的距离的 CSV

> ID：12274967
> 
> 赞同：0
> 
> 时间：2012-09-05T05:27:22.697
> 
> 标签：r, csv, matrix

> **可能的重复：**
> [将数据框转换为“dist”类的对象，而无需实际计算 R 中的距离](https://stackoverflow.com/questions/11343637/convert-a-dataframe-to-an-object-of-class-dist-without-actually-calculating-di)

我有一个非常大的 csv 文件（因此 R 中的 for 循环需要很长时间）关键字之间的相似性，当我读入 data.frame 时看起来像：

```
> df   
kwd1 kwd2 similarity  
a  b  1  
b  a  1  
c  a  2  
a  c  2 
```

我想将其转换为 dist 对象，如下所示：

```
> dObject  
  a b  
b 1    
c 2 0 
```

我无法让它工作： [将数据框转换为“dist”类的对象，而无需实际计算 R 中的距离](https://stackoverflow.com/questions/11343637/convert-a-dataframe-to-an-object-of-class-dist-without-actually-calculating-di)

我的另一个想法是使用 Matrix() 创建一个稀疏矩阵，但我不确定如何有效地填充矩阵，因为我的 csv 相当大 - 也许是一个应用函数？

也许重塑（）？

----更新----这似乎适用于上面的玩具数据集： [https ://stats.stackexchange.com/questions/6827/efficient-way-to-populate-matrix-in-r](https://stats.stackexchange.com/questions/6827/efficient-way-to-populate-matrix-in-r)

然而，在这个例子中，他们使用了一个矩阵（），但我想使用由于内存原因而稀疏的矩阵（）。

--- 此外---- 之前有一个类似的帖子。但是，我认为它的建议不适用于这种情况，在这种情况下，它们不是数据集中每个元素之间的链接 - csv 不包含所有关键字之间的成对相似性，如上一篇文章： [转换到“dist”类对象的数据框，而无需实际计算 R 中的距离](https://stackoverflow.com/questions/11343637/convert-a-dataframe-to-an-object-of-class-dist-without-actually-calculating-di/12289896#12289896)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T07:18:42.510

尝试这个

```
# Generate some dummy data (since you didn't provide your data)
df <- data.frame(V1=sample(letters, 10, TRUE),
                 V2=sample(letters, 10, TRUE),
                 V3=sample(200, 10, TRUE)) 
```

`df$V1`和`df$V2`现在是因素，可能具有不同的水平，所以我们需要使它们具有可比性，例如确保`"a"`in与in`V1`相同。`"a"``V2`

```
# Convert letters to integers
my.objects <- sort(unique(c(as.character(df$V1), as.character(df$V2))))
df$V1 <- match(df$V1, my.objects)
df$V2 <- match(df$V2, my.objects) 
```

创建一个空距离矩阵，并用和`V3`指定的位置处的值填充它。最后，我们将其转换为适当的对象。`V1``V2``dist`

```
# Create an empty distance matrix
n <- length(my.objects)
dist.mat <- matrix(NA, n, n)
i <- as.matrix(df[-3])
dist.mat[i] <- dist.mat[i[,2:1]] <- df$V3

my.dist <- as.dist(dist.mat) 
```

# ruby-on-rails - Rails 表单获取和发布

> ID：12274968
> 
> 赞同：0
> 
> 时间：2012-09-05T05:27:26.197
> 
> 标签：ruby-on-rails

我正在尝试实现 Ajax 搜索。当用户在文本字段中输入查询时，数据应显示在其下方，如果没有结果，则应在数据库中创建一个新条目。

我在文本字段旁边有一个按钮。当用户按下按钮时，文本字段中的数据应该被发送到 create 方法，该方法在数据库中创建一条新记录。我怎样才能做到这一点？

现在我正在使用这个：

```
<%= form_tag song_requests_path, :method => 'get', :id => "requests_search", :class => 'well form-horizontal' do %>
                    <p>
                        <h2> I Love To Sing ...</h2>
                        <%= text_field_tag :search1, params[:search1], :class => 'text_field span4',:placeholder=>"Song Title", :maxlength => "250" %>
                        <%= text_field_tag :search2, params[:search2], :class => 'text_field span3', :placeholder=>"Album", :maxlength => "250" %>
                    </p>

                    <% end %>

<%=form_for(  :song_request, :remote => true)  do |f| %>

<center>
    <%= f.hidden_field :title, :value => "#{params[:search1]}" %>
    <%= f.hidden_field :album, :value => "#{params[:search2]}" %>

    <%= f.submit " Request ", :class => 'btn btn-primary'%>
</center>
<%end%> 
```

功能上它的工作完美，但我不能在文本字段之外放置请求按钮......谢谢你......

# sybase - Sybase 查询优化

> ID：12274975
> 
> 赞同：0
> 
> 时间：2012-09-05T05:28:37.547
> 
> 标签：sybase

我正在研究如何提高以下 sybase 查询的性能。目前大约需要1.5小时。

```
 CREATE TABLE #TempTable
 (
 T_ID numeric,
 M_ID numeric,
 M_USR_NAME char(10),
 M_USR_GROUP char(10),
 M_CMP_DATE datetime,
 M_CMP_TIME numeric,
 M_TYPE char(10),
 M_ACTION char(15),
 )

select
T.M_USR_NAME,
T.M_USR_GROUP,
T.M_CMP_DATE,
T.M_CMP_TIME,
T.M_TYPE,
T.M_ACTION
from #TempTable T, AUD_TN B
where T.M_ID=B.M_ID
and T.T_ID in 
(
   select M_NB from TRN H where (M_BENTITY ="KROP" or M_SENTITY = "KROP")     
)

UNION

select
A.M_USR_NAME,
A.M_USR_GROUP,
A.M_DATE_CMP,
A.M_TIME_CMP,
A.M_TYPE,
A.M_ACTION
from AUD_VAL A, TRN H
where A.M_DATE_CMP  >= '1 May 2012' and A.M_DATE_CMP <= '31 May 2012'
and A.M_ACT_NB0=H.M_NB
and (H.M_BENTITY ="KROP" or H.M_SENTITY = "KROP") 

UNION

select
TR.M_USR_NAME,
TR.M_USR_GROUP,
TR.M_DATE_CMP,
TR.M_TIME_CMP,
TR.M_TYPE,
TR.M_ACTION

from TRN_AUD TR, TRN H
where TR.M_DATE_CMP  >= '1 May 2012' and TR.M_DATE_CMP <= '31 May 2012'
and TR.M_ACT_NB0=H.M_NB
and (H.M_BENTITY ="KROP" or H.M_SENTITY = "KROP") 

DROP table #TempTable 
```

任何帮助是极大的赞赏。请注意以下事项

上面唯一没有索引的表是 AUD_TN

干杯 RC

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T08:19:16.603

大概是填充了临时表，并且有很多行？

临时不需要索引，但该部分中的所有连接都需要使用索引。

为什么不分别尝试 UNION 的每个部分，看看其中一个是否慢？

您可以使用 SET SHOWPLAN ON 吗？我认为您可能也需要能够做到这一点 - 您需要能够检查 Sybase 是否使用索引来正确连接。

TRN BENTITY 和 SENTITY - 已编入索引？如果不是，您的 IN 会有点慢，尽管它可能没问题，对 Sybase 将在内部索引的工作表进行单表扫描。也可以使用 EXISTS - 这可能/应该更好地工作。

第二部分 - 两者都有 SARGS （如果你不知道，请在 Sybooks 中查找 - 搜索参数。）我不知道他们找到了多少行的比例，但假设它是一小部分，你应该看到一个使用的索引SARG 先扫描哪个表，然后您应该看到索引连接（或者可能是合并连接）到第二个 - 但使用索引。

第 3 部分 - 与第 2 部分类似的讨论。

我想这将是第二或第三部分

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-15T17:41:05.353

如果你仍然有这个问题：1）在 sql batch set showplan on set noexec on 上试试这个

查看 SQL 优化器是否正在拾取预期的索引。如果 where 子句中的列上不存在索引，请创建一个。如果可能，创建聚集索引。

2）在第一个查询中，您可以将 where 子句中的子查询替换为

创建表#T_ID（M_NB 数据类型）

插入 #T_ID 从 TRN H 中选择 M_NB 其中（M_BENTITY =“KROP”或 M_SENTITY = “KROP”）

**并将 where 子句修改为：**

其中 T.M_ID=B.M_ID 和 T.T_ID = #T_ID.M_NB

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-28T04:52:19.607

如何为这些表使用缓存。如果查询经常被使用。最好获得一个命名缓存并将表绑定到它。还将 tempdb 绑定到缓存。这将大大提高流程执行时间。如果临时表很大，那么您可以在其上创建一个索引，这可能有助于提高性能，但我需要更多详细信息。

# javascript - 如何在外部js文件中实现google maps api3？

> ID：12274982
> 
> 赞同：-1
> 
> 时间：2012-09-05T05:29:31.050
> 
> 标签：javascript, google-maps, google-maps-api-3

我在我的 jsp 中包含了一个谷歌地图脚本：`src="http://maps.googleapis.com/maps/api/js?sensor=true"`

现在我正在尝试在另一个外部 js 文件中使用此脚本创建地图

```
var mapOptions = {
      center : new google.maps.LatLng(centerLat,centerLong),
      zoom : 11,
      mapTypeId : google.maps.MapTypeId.ROADMAP
    };
    map = new google.maps.Map(document.getElementById("map_canvas"),
        mapOptions); 
```

当我试图执行它时，得到一个 js 错误“谷歌未定义”。是否有任何其他可能性在外部 js 文件中实现谷歌地图 api3？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T11:19:53.453

很可能您的代码正试图在 Google Maps API 完全初始化之前运行。您最好尝试保持执行，直到地图 API 完全加载。

1- 确保在自定义文件之前引用 Google 地图脚本。2-尝试使用 document.load 或使用 jQuery 的 document.ready() 来保持执行。

让我知道应用上述建议后发生了什么。

# asp.net - 将数据从 ReportViewer 10 导出到 Excel 时如何将数据拆分为多个工作表？

> ID：12274983
> 
> 赞同：1
> 
> 时间：2012-09-05T05:29:41.510
> 
> 标签：asp.net, excel, reportviewer, report-viewer2010, reportviewer2008

我正在使用 Report Viewer 10，现在我正在将数据导出到 Excel 中，但它给了我错误： `Excel Rendering Extension: Number of rows exceeds the maximum possible rows per sheet in this format; Rows Requested: 73879, Max Rows: 65536` .

我们可以将数据拆分为多张纸吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T07:08:01.617

在 tablix 或 table 或其他元素上设置属性“Pagebreak”以强制使用新选项卡。

这些链接可以为您提供更多想法： [http ://technet.microsoft.com/en-us/library/dd255278.aspx](http://technet.microsoft.com/en-us/library/dd255278.aspx)

[http://blogs.msdn.com/b/robertbruckner/archive/2010/05/16/report-design-naming-excel-worksheets.aspx](http://blogs.msdn.com/b/robertbruckner/archive/2010/05/16/report-design-naming-excel-worksheets.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T05:32:55.993

如果您的报表中有多个页面上的数据，则导出到报表查看器将拆分为多个工作表。这对你来说可能是不可能的？

如果从报表查看器导出为 CSV 格式，则可以有超过 65K 行，并且可以在 Excel 中打开它。你松散了格式，但你得到了数据。这种格式也更适合在 Excel 中应用数据透视，因为您不会在数据中获得空白单元格。

# jquery - jquerymobile 在打开另一个对话框后关闭对话框

> ID：12274992
> 
> 赞同：1
> 
> 时间：2012-09-05T05:30:28.360
> 
> 标签：jquery, cordova, jquery-mobile, modal-dialog

在 ABC 页上，我弹出一个 jQueryMobile`first`对话框。

此对话框有一个调用第二个对话框的按钮：

```
<a href="/second" data-role="button" data-rel="dialog">Second dialog</a> 
```

我想点击这个按钮，结果如下：

*   `first`对话框关闭
*   `second`弹出对话框
*   当我关闭`second`对话框时，我只剩下 ABC 页

然而，发生的事情是这样的：

*   `second`弹出对话框
*   当我关闭`second`对话框时，我只剩下`first`对话框
*   现在我必须关闭`first`对话框以保留页面 ABC

jQueryMobile 文档说，**当在对话框中单击任何链接时，框架将自动关闭对话框并转换到请求的页面，就像对话框是普通页面一样。**

如何在关闭对话框时`second`从对话框中调用对话框？`first``first`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-20T16:42:28.270

打开第二个弹出窗口时设置较短的时间间隔。

```
$('#Popup1').dialog('close');

setTimeout(function () {
    $.mobile.changePage('#Popup2', {
        'role': 'dialog'
    });
}, 1000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T07:50:22.540

```
<head>
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>
<script>
        $(function () {
            $( "#link2" ).on( "click", function( event, ui ) {
                $("dialog1").dialog('close');
            }
        });
</script>

</head>
<body>
   <div data-role="page" id="example">
          <div data-role="header">
            <h1>test</h1>
          </div>
          <div data-role="content">
            <a href="#dialog1" data-rel="dialog" id="link1">Open dialog1</a> 
        </div>
    </div>
    <div data-role="page" id="dialog1">
          <div data-role="header">
            <h1>dialog1</h1>
          </div>
          <div data-role="content">
            <a href="#dialog2" data-rel="dialog" id="link2">Open dialog2</a> 
        </div>
    </div>
    <div data-role="page" id="dialog2">
        <div data-role="header">
            <h1>dialog2</h1>
        </div>
        <div data-role="content">
        </div>
    </div>
</body> 
```

试用代码。让我知道这是否有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-20T17:07:15.547

这里的主要问题是“打开”和“关闭”对话框用词不当。您并没有真正“打开”或“关闭”它们，而是使用浏览器历史记录“导航到”或“导航离开” - 您要么将对话框作为页面添加到历史记录中，要么将其删除（去“回来”）。当从第一个对话框导航到另一个对话框时，它将第二个对话框推送到浏览器历史记录中，但使用关闭动画为第一个对话框设置动画。

一旦您了解了这一点，找到解决方案就变得非常容易，并且您可以使用几个选项。

1.  在打开的对话框上禁用 changeHash 将阻止它们被添加到历史记录中，因此您可以只打开第二个对话框，并在关闭它时显式导航回主页。
2.  将您的链接更改为首先“关闭”第一个对话框（jQuery mobile 通过“返回”历史来处理），然后“打开”第二个对话框（导航到新页面）。这就是你*认为*你现在得到的效果，因为 jQM 就是这样制作动画的，但它在幕后做了一些不同的事情。

# android - Why BroadcastReceiver works even when app is in background ?

> ID：12274997
> 
> 赞同：19
> 
> 时间：2012-09-05T05:30:45.263
> 
> 标签：android, broadcastreceiver, manifest

I am checking Internet connectivity in my app using BroadcastReceiver and I show an alert dialog if the connection is lost. It works fine. But my problem is that BroadcastReceiver works even if my app is in backgroung. So dialog pops up when internet connection is lost even if user is in some other app. This is totally ruining my app.

Has anyone got any idea how to restrict Broadcast receiver in the app only?

Here is my BroadcastReceiver :

```
 public class ConnectivityChangedReceiver extends BroadcastReceiver{

    @Override
    public void onReceive( Context context, Intent intent )
     {
        ConnectivityManager connectivityManager = (ConnectivityManager) context.getSystemService( Context.CONNECTIVITY_SERVICE );
    NetworkInfo networkInfo = connectivityManager.getActiveNetworkInfo();
    if (networkInfo != null && networkInfo.isConnected()) {
    } else {
        try{
            Intent i=new Intent(context, InternetDialogActivity.class);
            i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            context.startActivity(i);
        } catch(Exception e){
            e.printStackTrace();
        }
    }
  }
} 
```

And the activity is:

```
 public class InternetDialogActivity extends Activity implements OnClickListener{
   @Override
    public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.internet_dialog_box);
      getWindow().setLayout(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT);
      Button retryButton = (Button) findViewById(R.id.retryInternetButton);
      retryButton.setOnClickListener(this);
    }

   public boolean checkConnectivity(){
       ConnectivityManager connectivityManager   = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
           NetworkInfo networkInfo = connectivityManager.getActiveNetworkInfo();

       if (networkInfo!=null && networkInfo.isConnected()) {
           finish();
           return true;
       } else {
           Intent intent = getIntent();
           finish();
           startActivity(intent);
           return false; 
      }
   }

   @Override
   public void onClick(View view) {
      switch(view.getId()){
         case R.id.retryInternetButton:
             try{
                 checkConnectivity();
             } catch(Exception e){
                 e.printStackTrace();
             }
             break;
       }
   }
   } 
```

Here is how I declared receiver and activity in manifest:

```
 <receiver android:name="com.lisnx.service.ConnectivityChangedReceiver"
        android:label="NetworkConnection">
        <intent-filter>
            <action android:name="android.net.conn.CONNECTIVITY_CHANGE"/>
        </intent-filter>
  </receiver>

  <activity android:name="com.lisnx.activity.InternetDialogActivity"
        android:configChanges="orientation|keyboardHidden"
        android:theme="@android:style/Theme.Dialog" /> 
```

I have read that we can restrict BroadcastReceiver to work within the app by not declaring it in the manifest. But I don't know how will receiver work then? Please help me. I am stuck on it badly. Thanx in advance.

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-09-05T05:34:59.540

A [`BroadcastReceiver`](http://developer.android.com/reference/android/content/BroadcastReceiver.html) works when the app is in the background because the event that the receiver picks up are sent globally, and each app is registered to listen in on these, regardless of whether or not it is running.

To deal with this, in your `BroadcastReceiver`'s `onReceive` code, check if your app is in the foreground.

There is one--and only one that I know of--consistently effective method to do this. You need to keep track of your pause/resume actions for your application. Ensure that you check this in **every** activity.

There is some sample code [in this answer](https://stackoverflow.com/a/5862048/1438733) (solution #1). In your case, you would want to check `MyApplication.isActivityVisible() == true` as a validation before doing anything from your `BroadcastReceiver`.

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-09-05T05:58:19.897

Have you tried to remove the Intent filter from the manifest and register/unregister it in activity? So you can try to register Intent filter in onStart() and unregister it on onStop() methods. The code goes somethink like this:

```
static final String ACTION = "android.net.conn.CONNECTIVITY_CHANGE";

IntentFilter filter = new IntentFilter(ACTION);
this.registerReceiver(ConnectivityChangedReceiver, filter);

unregisterReceiver(ConnectivityChangedReceiver); 
```

You should also learn about [Activity Lifecycle](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle), if it's not familiar yet.

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-09-05T08:32:32.833

You should register/unregister your `BroadcastReceiver` in `onPause()` and `onResume()` of each activity. Then you know that the receiver is only "listening" when your app is in the foreground. You can easily do that by creating your own `BaseActivity` that extends `Activity` and overrides `onPause()` and `onResume()` and registers/unregisters your receiver. Just have all your activities extend `BaseActivity` and have them call through to `super.onResume()` and `super.onPause()` as usual. Here's example code:

```
public class BaseActivity extends Activity {
    // Create an IntentFilter to listen for connectivity change events
    static IntentFilter filter = new IntentFilter("android.net.conn.CONNECTIVITY_CHANGE");
    // Create an instance of our BroadcastReceiver
    static ConnectivityChangedReceiver receiver = new ConnectivityChangedReceiver();

    @Override
    protected void onPause() {
        super.onPause();
        // Stop listening for connectivity change events
        unregisterReceiver(receiver);
    }

    @Override
    protected void onResume() {
        super.onResume();
        // Listen for connectivity change events
        registerReceiver(receiver, filter);
    }
} 
```

All your activities should extend `BaseActivity` and if they need to do anything special in `onResume()` or `onPause()` just make sure to call through to `super.onXXXXX()` like this:

```
public MyActivity extends BaseActivity {
    @Override
    protected void onResume() {
        super.onResume();
        // Here you do whatever you need to do in onResume() of your activity
        ...
    }

    @Override
    protected void onPause() {
        super.onPause();
        // Here you do whatever you need to do in onPause() of your activity
        ...
    }
} 
```

I didn't run the code through a compiler so I apologize if there's a typo or I missed something.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-05T07:20:36.140

As far as I know, if Broadcast receiver is registered inside manifest.xml then broadcast receiver exists as long as application exists. Also, Dynamically registered receivers (that means, Register your BroadcastReceiver programmatically) are called on the UI thread. This means that your receivers blocks any UI handling and thus the `onReceive()` method should be as fast as possible.

However, I will try to discuss information about Broadcast Receiver. But, first should know some information. Firstly, Broadcast receiver is a standalone application component which means it will continue running even when other application component are not running. That's why we unregister broadcast receiver in onPause on the activity. Also, Developer should register this in `Activity.onResume()` implementation.

Secondly, Developer should not unregister in `Activity.onSaveInstanceState()`, because this won't be called if the user moves back in the history stack. I have put that information from [BroadcastReceiver documentation](http://developer.android.com/reference/android/content/BroadcastReceiver.html).

Another point is that a BroadcastReceiver object is only valid for the duration of the call to onReceive(). As soon as the onReceive() method is finished, your BroadcastReceiver terminates.

Now, how to register your receiver programmatically:

```
public abstract Intent registerReceiver (BroadcastReceiver receiver, IntentFilter filter) 
```

Here, BroadcastReceiver- receiver will be call when any broadcast intent match with filter.
And IntentFilter- Intent specifies which event your receiver should listen to.

Register:

```
YourConnectionListener receiver;
this.reciever = new YourConnectionListener();
IntentFilter filter = new IntentFilter();
filter.addAction(WifiManager.NETWORK_STATE_CHANGED_ACTION);
filter.addAction(ConnectivityManager.CONNECTIVITY_ACTION);
registerReceiver(this.reciever, filter); 
```

Sent your Broadcast Info:

```
Intent intent = new Intent();
intent.putExtra("Message", "Your connectivity info has Changed!!"); 
this.sendBroadcast(intent); 
```

Receiver:

Now, need to receive the Broadcast. Android calls the onReceive() method on all registered broadcast receivers whenever the event occurs. Say you want to be notified whenever the connection is changed.

```
public class YourConnectionListener extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent){
         // your Code
    }
} 
```

`onReceive()` has two arguments:

*   context: The Context object you can use to access additional information or to start services or activities.
*   intent: Intent used to register your receiver. This object contains additional information that you can use in your implementation.
    Additionally, Developer should avoid any long-lasting tasks in your BroadcastReceiver. So, In statically and dynamically registered receivers, Developer should do minor tasks in the receiver itself.For any longer tasks you should start a service from within your receiver.

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-10-25T13:05:11.727

I think you will have to make sure that you are not using the receiver when app is in background. For that you will have to use every activities onPause() and onResume() methods.

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-05-08T11:30:56.980

To make a **Broadcast Receiver** that fires only when you app is running follow the below code.

**1.** Create your Broadcast Receiver like this:

* * *

```
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;

public class InternetStatusNotifier extends BroadcastReceiver{

    @Override
    public void onReceive(Context context, Intent intent) {
        //Recieve notification here

    }

} 
```

**2.** Make an activity or fragment where you want the Broadcast Receiver to work like this:

* * *

```
import android.app.Activity;
import android.content.IntentFilter;
import android.os.Bundle;

public class MainActivity extends Activity {
    private InternetStatusNotifier mInternetStatusNotifier;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        mInternetStatusNotifier = new InternetStatusNotifier();
        super.onCreate(savedInstanceState);
    }

    @Override
    protected void onResume() {
        registerReceiver(mInternetStatusNotifier, new IntentFilter(
                "android.net.conn.CONNECTIVITY_CHANGE"));
        super.onResume();
    }

    @Override
    protected void onPause() {
        unregisterReceiver(mInternetStatusNotifier);
        super.onPause();
    } 
```

**Note:** That is how you use broadcasts receiver in a screen specific manner. Only the screen displaying will receive broadcasts in this way. When you register broadcast using manifest file then they are even received when app is closed

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-05T05:36:56.603

That is the way broadcast receivers work in Android. If you register for a broadcast in the manifest and your app is not running, Android will start a new process to handle the broadcast. It is generally a bad idea to directly show a UI from a broadcast receiver, because this may interrupt other apps. I'm also not convinced that a universal 'connection lost' dialog is a good idea either. This should probably be handled by each activity that uses network access.

As for the original question, you need to disable your receiver when your activity goes in the background (`onPause()`, etc.) and enable it when you come to the foreground (`onResume()`, etc). Put `enabled=false` in your manifest and then use something like this in your code to toggle it as necessary:

```
 public static void toggle(Context context, boolean enable) {
        int flag = enable ? PackageManager.COMPONENT_ENABLED_STATE_ENABLED
                : PackageManager.COMPONENT_ENABLED_STATE_DISABLED;
        ComponentName receiver = new ComponentName(context,
                ConnectivityMonitor.class);

        context.getPackageManager().setComponentEnabledSetting(receiver, flag,
                PackageManager.DONT_KILL_APP);
   } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-01-02T16:13:31.747

A simple way of finding whether the app is in foreground or not

```
if((mContext.getPackageName().equalsIgnoreCase(
                ((ActivityManager) mContext.getSystemService(Context.ACTIVITY_SERVICE))
                        .getRunningTasks(1).get(0).topActivity.getPackageName())))
{
//app is in foreground;
} 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2015-03-14T14:57:23.947

I better suggest you to check the internet setting from the application when someone opens it, here is the piece of code how i do it.

```
public static boolean isNetworkConnected(Context ctx) {  
        ConnectivityManager cm = (ConnectivityManager) ctx.getSystemService(Context.CONNECTIVITY_SERVICE);  
        NetworkInfo ni = cm.getActiveNetworkInfo();  
        if (ni == null) {  
            return false; // There are no active networks.  
        } else  
            return true;  
    } 
```

# python - 如何在 Python 中创建可以在 Microsoft Access 中链接到的 Web 服务？

> ID：12274998
> 
> 赞同：2
> 
> 时间：2012-09-05T05:31:00.167
> 
> 标签：python, database, ms-access, networking

在我的工作场所，我们使用 Microsoft Access 来存储和操作管理数据。我们有两个 Microsoft Access 数据库文件：一个“前端”（仅包含表单和查询）和一个“后端”（仅包含表）。“前端”使用 Access 中的链接表管理器功能从“后端”获取数据并将数据保存到“后端”。这些文件通常通过 LAN 链接，甚至在站点之间链接。

我想构建一个托管在 Apache Web 服务器上的 Python Web 服务，它可以有效地替换后端文件。我想公开前端可以使用的表格数据。前端必须能够更新 Web 服务器上的数据。

Microsoft Access 有这个功能吗？Python（XML？）如何公开数据？是否有任何问题需要寻找？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T06:38:48.673

你可以这样做：

1.  使用 Python 提供 Web 服务 (SOAP) 作为新的“后端”
2.  重写现有的“前端”以使用它

您可以使用[spyne](http://arskom.github.com/spyne/)实现 1.并从 Access 中[使用它。](http://metrix.fcny.org/wiki/display/tips/How+to+Create+a+Microsoft+Access+Client+for+a+SOAP-based+Web+Service+API)在 Access 2012中[甚至还有一个图标](http://social.msdn.microsoft.com/Forums/en-US/accessdev/thread/5805cf08-97a6-4e17-b3a7-1649daeda829)

# scala - 在scala中将值从一个演员传递给另一个演员

> ID：12274999
> 
> 赞同：2
> 
> 时间：2012-09-05T05:31:02.810
> 
> 标签：scala, model, message, actor

你们中的任何人都可以帮助我理解使用 Actor 模型在 scala 中传递的基本消息吗？

我正在尝试用 3 个演员编写一个简单的程序。

1.  演员“BossActor”创建了 2 个演员“Actor1”和“Actor2”

2.  “Actor1”接受 2 个整数参数 -> 找到它们的总和 -> 将总和传递给 Actor2

3.  “Actor2”打印总和

```
package actorsSum

import scala.actors.Actor
import scala.actors.Actor._

case object BossActor
case object Actor1
case object Actor2

object SumOf2Numbers extends App
{

    print ("Enter Num1 : ")
    val Num1 = readInt()
    print ("Enter Num2 : ")
    val Num2 = readInt()

    var Sum = 0

    val bossActor = new BossActor(Num1,Num2,Sum)
    bossActor.start

}

/** Boss Actor which creates and controls all subsequent actors */
class BossActor(Num1: Int, Num2: Int, Sum: Int) extends Actor {
    def act() {

        val act1 = new Actor1(Num1,Num2)
        val act2 = new Actor2(Sum)
        act1.start
        act2.start

    }
}

/** Actor to find sum of the numbers */

class Actor1 (Num1: Int, Num2: Int) extends Actor {
    def act() {

        val Grandtotal = Num1 + Num2

        /** send "Grandtotal" to Actor2 */
        // act2 ! Grandtotal

    }
}

/** Actor to print the sum */

class Actor2(Sum: Int) extends Actor {
    def act() {

        react{

            /** print the sum */

            case Actor1 => println ("Sum: " + Sum)

            case Sum => println ("Sum: " + Sum)

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T09:27:12.820

我会采取不同的方法。Actor 接收消息并对其做出反应。所以你应该做的是构建一个actor，它接收对两个数字求和的请求，并将它们发送到消息中指定的接收器。这可能看起来像这样：

```
import scala.actors.Actor

case class Sum(x: Int, y: Int)

class SumActor extends Actor {
  def act = {
    loop {
      receive {
        case (Sum(x,y), receiver: Actor) => receiver ! x+y
      }
    }
  }
}

class Receiver extends Actor {
  def act = {
    loop {
      receive {
        case x: Int => println("Received: " + x)
      }
    }
  }
}

val sumActor = new SumActor
val receiver = new Receiver

sumActor.start
receiver.start

sumActor ! Sum(3,4) -> receiver 
```

您还应该看看[Akka](http://akka.io)，因为它将在未来的 scala 版本中取代 scala 演员，并且更强大。但是要了解演员的基础知识，从 Scala 演员开始就足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T06:13:15.630

首先是运行代码：

```
import scala.actors.Actor
import scala.actors.Actor._

object Main extends App {
    print("Enter first number: ")
    private[this] val num1 = readInt()
    println(num1)
    print("Enter second number: ")
    private[this] val num2 = readInt()
    println(num2)

    private[this] val boss = new BossActor(num1, num2)
    boss.start()
}

case object Stop

class BossActor(num1: Int, num2: Int) extends Actor {
    def act {
        val sumer = new SumActor()
        val printer = new PrintingActor()
        sumer.start()
        printer.start()
        sumer ! num1
        sumer ! num2
        receive {
            case i: Int => printer ! i
        }
        sumer ! Stop
        printer ! Stop
        exit()
    }
}

class SumActor extends Actor {
    private[this] var firstOption: Option[Int] = None

    def act() {
        loop {
            react {
                case i: Int => if (firstOption.isDefined) {
                    sender ! i + firstOption.get
                    firstOption = None
                } else {
                    firstOption = Some(i)
                }
                case Stop => exit()
            }
        }
    }

}

class PrintingActor extends Actor {

    def act() {
        loop {
            react {
                case Stop => exit()
                case e => println(e)
            }
        }
    }

} 
```

我像你一样读数字。比我创建一个新的`BossActor`. 接下来，老板将收到的内容发送`Int`到`SumActor`. sumer 将这两个值相加并返回给老板。老板把总和寄给`PrintingActor`. 打印机打印数字。之后，老板向他的演员发送终止消息并终止自己。这可能会通过向老板发送两个来改进`Int`，但在这个简单的示例中，它可能会展示如何创建一个`Actor`wtih 参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T06:22:13.813

首先：sender（Actor1）应该知道receiver（Actor2），所以你应该在sender之前创建并启动receiver，并将receiver作为构造函数参数传递给sender。

不要`var`用来分享演员的状态。

使用案例对象作为消息是一个好主意，但您应该使用案例类来发送一些值。

```
import scala.actors.Actor
import scala.actors.Actor._

case class Sum(i: Int)

class Sender(a1: Int, a2: Int, receiver: Actor) extends Actor {
  def act() {
    receiver ! Sum(a1 + a2)
  }
}

class Receiver extends Actor {
  def act() {
    react {
      case Sum(i) => println("Sum: " + i)
    }
  }
}

val receiver = new Receiver().start()
val sender = new Sender(1, 2, receiver).start() 
```

您可以使用对象 Actor 的一些辅助方法：

```
import scala.actors.Actor._

val receiver = actor { react { case i: Int => println("Sum: " + i) } }
val sender = actor { receiver ! 1 + 2 } 
```