# StackOverflow 问答 11044000-11044999

# javascript - 复选框js切换不正确

> ID：11044001
> 
> 赞同：0
> 
> 时间：2012-06-15T02:45:21.580
> 
> 标签：javascript

我的注册表中有一个复选框，如下所示：

```
<form name="reg" id="reg" method="post">
   <input type="checkbox" onclick="return validate('tos')" name="tos"/>
</form> 
```

我正在使用 JS 来检查它是否打勾，如果是，则在表单中显示一个绿色勾号。但是，它在单击时实际上并没有勾选复选框，而是正在加载绿色勾号。

此外，再次单击它不会删除它应该删除的绿色勾号，因为用户有效地取消了该复选框。

所以我的JS是这样的：

```
function validate (type){
    output = [];
    var x = document.getElementById("reg");

    if (type == 'tos'){
        div = 'result_tos';
        input = x.elements[4].checked;

        if (input){
            output.push('<img src="correct.png"/>');    
        } else {
            output.push('You must agree to our terms of service in order to join !');
        }

        document.getElementById(div).innerHTML = (output.join('')); //display result
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T02:59:22.550

这可能是我建议你这样做的方式，这比给出的示例更复杂，但我在预期的流程和 OP 正在使用的流程方面有点挣扎：

**模拟 HTML**

```
<form name="reg" id="reg" method="post">
    <input type="checkbox" id="agree" name="agree"/> Agreement<br/>
    <input type="checkbox" id="ok" name="ok"/> Ok<br/>
    <input type="checkbox" id="tos" name="tos"/> TOS<br/>
    <button name="submit" type="submit">Submit Validation</button>
</form>
<h1>Display Output</h1>
<div id="display"></div>​ 
```

**迭代验证**

```
function validate (){
    var display = document.getElementById('display'),
        output = [],
        checks = ['agree','ok','tos'],
        check,
        msg;

    while (check = document.reg[checks.pop()]) {
        if (!check.checked) {
            switch (check.name) {
                case 'agree':
                    msg = 'You must AGREE!';
                break;
                case 'ok':
                    msg = 'You must OK!';
                break;
                case 'tos':
                    msg = 'You must TOS!';
                break;
            }

            output.push(msg);
        }
    }

    if (output.length == 0) {
        output = [
            'You have successfully validated!',
            '<img src="http://goo.gl/UohAz"/>'
        ];
    }

    display.innerHTML = output.join('<br>'); 

    return false;
} 
```

并且不要忘记`window.onload`附加事件处理程序的时间。下面不一定是首选方法，但它比内联处理程序（如`onclick="validate()"`.

```
window.onload = function(){
    document.reg.onsubmit = validate;
}; 
```

[http://jsfiddle.net/bj5rj/2](http://jsfiddle.net/bj5rj/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T03:00:54.563

以下 jsfiddle 是您的代码的略微修改版本，似乎工作正常。我不认为你的错误在这里。（我不熟悉`elements`；那是 IE 特有的吗？我将其更改为在其他浏览器上工作。）

[http://jsfiddle.net/QnDAg/1/](http://jsfiddle.net/QnDAg/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T03:22:53.867

我将按如下方式处理。从侦听器传递对元素的引用。

```
<form name="reg" id="reg" method="post">
    <input type="checkbox" onclick="return validate(this)" name="tos">
</form>

<script type="text/javascript">

function validate(el) {
  // you don't really need a reference to the form, 
  // but here's how to get it from the element
  var form = el.form; 

  if (el.name == 'tos') {

    if (el.checked) {
      // show pass graphic (green tick?)

    } else {
      // hide checkbox and show text
    }
  }
}
</script> 
```

在显示刻度和文本之间切换应该通过设置一个类值来完成，这样你就可以在标记中将它更改为你想要的任何内容，并且脚本只是切换两者。

# android - 联系人清单说明

> ID：11044005
> 
> 赞同：2
> 
> 时间：2012-06-15T02:46:48.680
> 
> 标签：android, android-manifest, contacts

我正在开发一个自定义联系人应用程序。我从 Github 阅读了默认的联系人应用程序源，但我并不完全理解。1，据我所知，如果意图的动作相等，将调用 ContactsSearchActivity

> com.android.contacts.action.FILTER_CONTACTS（[完整清单](https://github.com/android/platform_packages_apps_contacts/blob/froyo-release/AndroidManifest.xml)）

```
 <!-- The contacts search/filter UI -->
    <activity android:name="ContactsListActivity$ContactsSearchActivity"
        android:theme="@style/ContactsSearchTheme"
        android:windowSoftInputMode="stateAlwaysVisible|adjustPan"
    >
        <intent-filter>
            <action android:name="com.android.contacts.action.FILTER_CONTACTS" />
            <category android:name="android.intent.category.DEFAULT" />
            <data android:mimeType="vnd.android.cursor.dir/contact" android:host="com.android.contacts" />
        </intent-filter>
    </activity> 
```

但是 ContactsSearchActivity 没有代码。

```
public class ContactsListActivity extends ListActivity implements View.OnCreateContextMenuListener,
        View.OnClickListener, View.OnKeyListener, TextWatcher, TextView.OnEditorActionListener,
        OnFocusChangeListener, OnTouchListener {

        public static class ContactsSearchActivity extends ContactsListActivity {

    } 
```

所以我不明白是否调用了 ContactsSearchActivity。（[完整源代码](https://github.com/android/platform_packages_apps_contacts/blob/froyo-release/src/com/android/contacts/ContactsListActivity.java)）

2、二是关于搜索界面。我知道有哪些活动

```
<meta-data android:name="android.app.searchable"
                android:resource="@xml/searchable" 
```

是活动句柄查询和显示结果。并且启用了 android:name="android.app.default_searchable" 的搜索 + 指向搜索句柄活动。

```
<meta-data
            android:name="android.app.default_searchable"
            android:value=".ContactsListActivity" /> 
```

但同样在 Contacts 的清单中，[SearchResultsActivity](https://github.com/android/platform_packages_apps_contacts/blob/froyo-release/src/com/android/contacts/SearchResultsActivity.java)是从 ContactsListActivity 扩展的空类。

```
<!-- The contacts search/filter UI -->
        <activity android:name="SearchResultsActivity"
            android:theme="@style/TallTitleBarTheme"
            android:label="@string/contactsList"
        >
            <intent-filter>
                <action android:name="android.intent.action.SEARCH" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>

            <meta-data android:name="android.app.searchable"
                android:resource="@xml/searchable"
            />
        </activity> 
```

和

```
<meta-data
                android:name="android.app.default_searchable"
                android:value=".ContactsListActivity" /> 
```

在应用程序标签而不是活动标签（[链接](https://github.com/android/platform_packages_apps_contacts/blob/froyo-release/AndroidManifest.xml#L430)）中。我想了解这些，因为我不知道如何显示它 ![自定义搜索](../Images/2fabf9b2ddff2d690a07928e9854ce00.png)而不是![这](../Images/93ea6f09aafd411c84a8683a3ea52bb8.png)

在此先感谢，很抱歉问了很长的问题。

**编辑**：第 1 部分没关系。在第 2 部分中，我想在按下搜索按钮时显示自定义对话框，但现在我只能将结果存档在第二张图像中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T02:55:11.243

这意味着一切都由`ContactListActivity`.

看一下那个`onCreate`方法，它读取传入的 Intent 以确定如何显示结果。这没什么特别的，因为许多 Android 应用程序都以这种方式工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T10:23:57.243

我更改了我的代码并实现了我的自定义搜索对话框。

# c++ - boost::asio::async_read_until - 在发送四条消息之前不读取

> ID：11044009
> 
> 赞同：0
> 
> 时间：2012-06-15T02:47:35.163
> 
> 标签：c++, boost, boost-asio

我正在尝试通过编写一个将字符串发送到回显服务器的简单客户端来学习 boost::asio。我已经用 telnet 测试了 echo 服务器，效果很好，但是我的 boost::asio 客户端表现得很奇怪。在发送了四条消息（并由回显服务器返回）之前，async_read_until 似乎不会读取/调用处理程序。客户端的输出可能更好地解释了这一点（我在每个值之后删除了换行符）：

```
gurka@x:~/private/code/test$ ./test localhost 2001
Hostname resolved.
Connected to server.
Starting write
Starting read_until
Writting[1]
Writting[2]
Writting[3]
Writting[4]
Read[1]
Writting[5]
Read[2]
Writting[6] 
```

建立连接后，我有两个电话：

```
boost::asio::async_write(mSocket, mOutgoingBuffer, boost::bind(&Connection::writeToServer, this, boost::asio::placeholders::error));

boost::asio::async_read_until(mSocket, mIncomingBuffer, "\n", boost::bind(&Connection::readFromServer, this, boost::asio::placeholders::error)); 
```

writeToServer 和 readFromServer 只打印 Writting/Read 及其正在写入/读取的值，然后再次使用完全相同的参数调用 async_write/async_read_until。writeToServer 将消息从我用“1\n”..“6\n”填充的队列中发送。

我认为错误不在回显服务器中，因为我可以看到它按顺序读取和写回所有 6 个值。正如我之前所说，使用 telnet 可以完美运行。那么，为什么 async_read_until 被 4 条消息“延迟”了？我试过发送更长的字符串，但结果是一样的。

# image - IMDB 海报 URL 返回推荐被拒绝

> ID：11044010
> 
> 赞同：2
> 
> 时间：2012-06-15T02:47:51.053
> 
> 标签：image, heroku, hotlinking, imdb

在我的 Ruby on Rails 应用程序中，我使用 imdb gem (https://rubygems.org/gems/imdb) 按标题搜索电影并获取海报 URL 并将其添加到我数据库中的电影模型中。然后在我看来，我将该 url 放在图像源标签中并将图像显示给用户。

我在本地运行应用程序时没有任何问题，但是当我将其部署到 Heroku 时，有时会成功渲染一些图像，但在大多数情况下，它们无法正确显示。我尝试了多个浏览器，结果当我尝试加载图像时，我收到一条“Referral Denied”消息说：

```
You don't have permission to access "[poster url here]" on this server. Reference #[some ref. number here] 
```

我将如何解决这个问题？我猜这是因为 IMDB 服务器拒绝我的访问，因为要么我从我的应用程序发出了太多请求，要么因为我的应用程序没有必要的凭据来获取数据，或者可能两者兼而有之。有没有办法绕过这个？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-18T00:51:50.543

IMDB 阻止将他们网站上的图像直接链接到其他网站，我认为这个[前面的问题](https://stackoverflow.com/questions/3154562/remote-images-displaying-only-sometimes)涵盖了这个主题。

解决此问题的最简单方法是下载图像并自行托管，而不是链接 IMDB 的副本。或者，您可以调查替代电影数据库，看看它们是否可以提供您想要的东西 - [IMDB API 上这个问题](https://stackoverflow.com/questions/1966503/does-imdb-provide-an-api)的答案列出了一些。[Movie DB API](http://api.themoviedb.org)看起来是个不错的选择。

# java - 是否有类似于 .NET 中的 listview 的 Java Swing 控件？

> ID：11044014
> 
> 赞同：0
> 
> 时间：2012-06-15T02:48:17.237
> 
> 标签：java, swing, listview

我在 Java Swing 中寻找一个与 .NET 中类似的控件。

![图片](../Images/8e19714b60c61f37a14176afe96c3d44.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T04:04:27.310

也考虑一下，[这里](https://codereview.stackexchange.com/a/4447/6692)`Outline`讨论一下。

![轮廓图像](../Images/7c1220f9da6f43a6289eb3845f86da6a.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T02:52:44.800

与您正在寻找的东西一起`Swing`使用。`JTree``JCheckBox`

与`JTree`一起使用`JTable`。请参阅[http://java.sun.com/products/jfc/tsc/articles/treetable1/index.html](http://java.sun.com/products/jfc/tsc/articles/treetable1/index.html)以供参考

# pypy - cppyy 将数组从 python 传递给 C++ 函数

> ID：11044015
> 
> 赞同：1
> 
> 时间：2012-06-15T02:48:18.217
> 
> 标签：pypy

我使用 C++ 编写了一个简单的排序函数，它的声明是 void sort(int *, int) 我使用 cppyy 在 python 函数中使用 C++ 扩展，文档告诉我可以在需要时使用 array.array传递内置数据指针类型。但它总是提示：

```
Traceback (most recent call last):

  File "app_main.py", line 51, in run_toplevel

  File "test.py", line 13, in <module>

    m.sort(ai, 1)

TypeError: none of the 1 overloaded methods succeeded. Full details:

  void MyClass::sort(int*, int) =>

    TypeError: no converter available 
```

这是我写的python代码：

```
#coding=utf8
import cppyy
import time
from array import array

cppyy.load_reflection_info("libMyClassDict.so")

MyClass = cppyy.gbl.MyClass
m = MyClass()
start = time.time()

m = MyClass()

for i in xrange(10000000):
    ai = array('i', [23])
    m.sort(ai, 1)
    m.SetMyInt(312, 2315, 2135, 13, 3251, 54, 2134, 3253, 134, 3251);

end = time.time()
print end - start 
```

任何人都可以解决我的问题？

# emacs - 加载所有安装包后如何评估一段 elisp 代码？

> ID：11044016
> 
> 赞同：1
> 
> 时间：2012-06-15T02:48:22.510
> 
> 标签：emacs, elisp

我已经安装了几个 Emacs 包`M-x install-package`。starter-kit 包隐藏了 emacs 的工具栏和菜单栏，但我希望它们显示出来。

我添加了

`(tool-bar-mode t)`

在我的 ~/.emacs 文件中，但它似乎在加载 starter-kit 包之前得到了评估。

如果我想在所有已安装的软件包完成加载后评估它们，我应该把这些代码放在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T04:54:39.640

假设入门套件包位于名为“starter-kit”的库中，这应该可以工作：

```
(eval-after-load "starter-kit"
   '(tool-bar-mode t)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T14:24:08.413

看一下`package.el`文件，特别是：

```
(defcustom package-enable-at-startup t
  "Whether to activate installed packages when Emacs starts.
If non-nil, packages are activated after reading the init file
and before `after-init-hook'.  Activation is not done if
`user-init-file' is nil (e.g. Emacs was started with \"-q\").

Even if the value is nil, you can type \\[package-initialize] to
activate the package system at any time."
  :type 'boolean
  :group 'package
 :version "24.1") 
```

因此，您可以`package-initialize`尽早调用`.emacs`，然后覆盖您需要的内容，例如`tool-bar-mode`.

你也可以把你的覆盖放在`after-init-hook`.

# java - 如何从服务器动态更改照片大小？

> ID：11044017
> 
> 赞同：1
> 
> 时间：2012-06-15T02:48:22.917
> 
> 标签：java

我在服务器上有大量照片。问题是我必须将照片保存成我需要的各种尺寸。
我发现许多网站使用诸如[http://www.abc.com/89-w100-h100.jpg](http://www.abc.com/89-w100-h100.jpg)之类的 url来显示任何尺寸的照片。当我改变 w 和 h 时，我可以得到这个尺寸的照片。我只想知道如何实现这个功能。
ps：我可以把照片剪成给定的尺寸。但我不知道如何在浏览器上显示照片。
提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T03:37:44.173

可以根据要求动态缩小照片。您需要设计一种在 URL 中编码大小的方案（如您在问题中所示），然后使用 URL 参数作为输入，对原始图像应用缩放功能。这是假设您在服务器端执行此操作。

您的问题提到了在浏览器中显示它的一些内容，所以如果这是您的意思，您可以简单地将`<img>`元素调整为您想要的任何大小，浏览器将自动缩放图像。但是，这确实需要下载全尺寸图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T04:09:02.607

我认为他们不会根据要求对其进行扩展。图像调整大小是一项昂贵的操作。通常是大型军团，在上传图像后，他们会调整其大小。例如：雅虎用 9 种不同的尺寸调整图像的大小，它们都有某种方案，例如 89-w100-h100.jpg，它们用来识别它们。

另一方面，调整图像大小的最佳方法是将高度和宽度标签定义为 img 标签。但是，这可能会产生一些不良后果。

# linux - 交叉编译 gdbserver 时出错

> ID：11044019
> 
> 赞同：1
> 
> 时间：2012-06-15T02:48:44.937
> 
> 标签：linux, compiler-errors, gdb, gdbserver

我想用gdb在arm-Linux开发板上调试。编译 gdbserver 时出现错误。

主机：Ubuntu 11 32bit 目标：arm-linux-gcc（gcc 版本 4.4.3）

```
root@mickeyvm:/home/mickey/gdb-7.4# ./configure --target=arm-linux --host=arm-linux

make 
```

我收到此错误消息：

```
configure: error: no termcap library found 
```

根据我在谷歌搜索的内容。编译器无法获取 ncurses 库。

```
checking for tgetent in -ltermcap... no
checking for tgetent in -ltinfo... no
checking for tgetent in -lcurses... no
checking for tgetent in -lncurses... no 
```

我按照建议的解决方案安装 libncurses5-dev，但问题仍然存在。libncurses5 确实存在于我的 Linux 中。

```
root@mickeyvm:/home/mickey# dpkg -l | grep curse
ii  libcurses-perl                                  1.28-1                                     Curses interface for Perl
ii  libghc6-hscurses-dev                            1.3.0.2-3build3                            ncurses bindings for Haskell - development files for GHC6
ii  libncurses5                                     5.7+20101128-1                             shared libraries for terminal handling
ii  libncurses5-dev                                 5.7+20101128-1                             developer's libraries for ncurses
ii  libncursesw5                                    5.7+20101128-1                             shared libraries for terminal handling (wide character support)
ii  libncursesw5-dev                                5.7+20101128-1                             developer's libraries for ncursesw
ii  mtr-tiny                                        0.80-1                                     Full screen ncurses traceroute tool
ii  ncurses-base                                    5.7+20101128-1                             basic terminal type definitions
ii  ncurses-bin                                     5.7+20101128-1                             terminal-related programs and man pages
ii  ncurses-term                                    5.7+20101128-1                             additional terminal type definitions 
```

请帮助并指出我错过了什么。非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T21:34:14.173

> 主机：Ubuntu 11 32bit

32位什么的？大概您的主机是 i686-linux-gnu，而不是 sparc-linux-gnu。

> ./configure --target=arm-linux --host=arm-linux

使用上述命令，您正在尝试构建将在二进制文件上运行`arm-linux`和调试的 GDB `arm-linux`，即您正在为 arm-linux 配置*本机*GDB（但在 i686-linux 上构建它）。这样的原生 GDB 不能使用主机库（原因很明显）。

但看起来你想要一个跨 gdb，而不是原生的。在这种情况下，请尝试

```
./configure --build=i686-linux --host=i686-linux --target=arm-linux 
```

阅读[本文](http://www.linuxquestions.org/questions/slackware-14/explaining-build-host-target-509739/)可能会有所帮助。

# php - 用 jQuery.ajax() 加载的 PHP 文件无法访问加载的函数

> ID：11044022
> 
> 赞同：-1
> 
> 时间：2012-06-15T02:49:13.527
> 
> 标签：php, jquery, require-once

**如果您不想阅读设置的详细信息，请跳到最后两段...**

我正在从一个线性 PHP+JavaScript CMS 过渡到一个带有一些花里胡哨的面向对象的 PHP 模型，比如 jQuery 和 Ajax。我正在尝试使用以下设置集中尽可能多的代码：

索引.php

*   调用（通过 require_once()） setup.php（轻松访问常用变量（如目录）、常量、首选项、打开和关闭调试等）、actions.php（jQuery.ajax() 使用的文件确定将数据发送到哪个函数或对象）、functions.php（其他函数）、objects.php（通常用于准备传入/传出数据到 MySQL 数据库的对象）
*   调用functions.js、jQuery（来自Google）、tiny_mce和fancybox（最后两个可能不是问题中的变量，但我想我还是会提到它们）
*   包含 div#content 以便 jQuery.ajax() 有一个地方来加载内容

函数.js

*   包括一个通过 $(#content).html 将内容加载到 index.php 的 div#content 的脚本...
*   包括用于准备表单内容的脚本，使用 .ajax() 将数据发送到 actions.php，接受来自服务器的成功或错误消息，并向用户显示消息
*   包括一个 doc.ready 函数，该函数将 .live('submit') 方法添加到表单

/inc/文件夹

*   包括 PHP 文件，主要是表单，用于通过 .ajax() 加载到索引的 div#content

大部分工作正常。**不起作用的部分是加载到索引的 div#content 中的表单无法访问索引已经加载的各种 PHP 文件（即 setup.php 和 functions.php）。**这些表格需要偶尔的功能才能填充自己。

例如，我有一个“表单”，它显示网站中的所有页面，以便用户可以编辑或删除它们。在我的旧 CMS 模型中，我将该函数（我们称之为 getPages()）存储在 functions.php 中，以便页面可以简单地回显 getPages()；

目前，表单无法访问 getPages() 函数，因为 .ajax() 加载的文件无法将 functions.php 识别为 index.php 加载的文件。我可以通过添加 require_once('functions.php'); 来解决这个问题。到 /inc/ 文件夹中每个文件的顶部，但我宁愿不这样做。我宁愿我的表格只是表格。

过去，我只使用 PHP 和 POST/GET 将表单加载到位，这显然将索引标题、所需文件和新内容重新加载为一个有凝聚力的系列。那么如何结合 Ajax 以及它不重新加载的情况获得相同的结果呢？甚至可能吗？我会以错误的方式解决这个问题吗？

一些注意事项：

*   如果有的话，我更喜欢 jQuery、JavaScript 或 PHP 解决方案。我正在做的大部分事情对我来说都是新的，所以添加另一个库可能会让我头疼。...但如果这是唯一的方法...我会做我必须做的。
*   虽然我很乐意根据需要复制/粘贴一些代码，但这些文件都无法在线获得；它只是在我的 XAMPP 开发服务器上
*   由于这些文件都在我的服务器上，显然没有跨域出价考虑

提前致谢！

index.php（此文件中的所有内容似乎都运行良好）...

```
<?php
require_once('setup.php');
require_once('functions.php'); //functions.php calls to objects.php
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
...
<link href="styles/styles.css" type="text/css" media="screen" rel="stylesheet" />
<link href="fancybox/jquery.fancybox-1.3.4.css" type="text/css" media="screen" rel="stylesheet" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js"></script>
...
<script src="js/functions.js"></script>
</head>
<body>
<div id="pagewrapper">
<div id="header">unimportant header content</div><!-- /header -->

<div id="nav_area">
  <ul id="nav">
    <li class="parent">Pages</li>
    <ul class="children">
      <li class="child" onclick="navto('inc/add_page.php');">Add a Page</li>
    </ul>
  </ul>
</div><!-- mana_nav_area -->

<div id="content"><!-- This is the DIV where the forms will appear -->
<?php
echo getPagesAsSelect(); //the function works here, although it doesn't make any sense to put it here. It's only here for illustrative purposes. 
?>
</div><!-- mana_content -->
</div><!-- pagewrapper -->
</body>
</html> 
```

functions.js（此文件中的所有内容似乎都运行良好）...

```
jQuery(document).ready(function(){
// called by index.php, this function adds an event handler to our example form
    ...
    $("#add_page_form").live("submit", function () { add_page(); return false; });
        ...
});

function navto(destination) {
// use JQuery's ajax method to control main navigation
    var request = $.ajax({
        url: destination
    });

    request.done(function(msg) {
        $("#content").html( msg );
    });

    request.fail(function(jqXHR, textStatus) {
        alert( "Request failed: " + textStatus );
    });
}

function add_page() {
// this function grabs the data from the add_page_form and sends it to actions.php
// actions.php determines what function or object to send it to
// JS-based security is not an issue at this time
    var serialized = $('#add_page_form').serialize();
    var dataString = 'action=add_page&' + serialized;
    var destination = 'actions.php';

    var jqXHR = $.ajax({
        type: "GET",
        url: destination,
        data: dataString,
        cache: true,
        error: function(response) {
            $('msg').append(response);
        },
        success: function(response) {
            $('#msg').append(response);
        }
    });
    return false;
} 
```

一个示例页面：add_page.php，它让用户有机会为他们的站点创建一个页面。为了确定用户的新页面是否是另一个页面的子页面（稍后在下面的表单中称为父页面），`<SELECT>`通过`<OPTION>`PHP 函数（位于 functions.php文件）调用 getPagesAsSelect()。

```
<?php
// if I leave this code in place, it works
require_once('../functions.php'); //(you may recall that this file is in an /inc folder)
// this require_once() is the one I'd like to remove if possible
?>
<fieldset id="fieldset">
<legend>Add a Page</legend>
<form id="add_page_form" name="add_page" action="" method="get">

<label for="name">Page Name:</label> 
    <input type="text" id="name" name="name" value="" /><br />
<label for="parent">Parent:</label>
    <select id="parent" name="parent">
        <option value="0">No parent</option>
    <?php
            echo getPagesAsSelect();
            // getPagesAsSelect() queries the database and returns eligible
            // pages as a series of <option value="pageID">pageName</option>
            // Unless functions.php is loaded on this page, this call fails
            // and the page stops loading here
        ?>
        </select>
    <br />
<input id="submit_add_page" type="submit" name="add_page" value="Submit" class="save" /><input type="reset" value="Cancel" class="cancel" />
</form>
<div id="msg"><!-- where success or error messages show upon completion --></div>
</fieldset> 
```

**总结一下：.ajax() 将上面的 add_page.php 拉入 index.php 的 div#content。即使 index.php 已经加载了 functions.php 文件，使用 .ajax() 也会阻止新内容调用它需要的函数。**

**虽然我不怀疑一切都在正常工作，但我不喜欢我的解决方法，即要求 functions.php 与 .ajax() 加载的每个文件一起使用。我正在寻找替代品，如果有的话。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T23:32:14.953

小总结：您想在 php 文件中使用一个函数，而不必在`require_once`该文件中包含它的定义。2个解决方案：

1.  不要直接加载该文件，而是加载函数文件的 1 个简单文件，然后包含您想要的文件（例如调用 `/pagecontent.php?page=pagename.php（将名称列入白名单，不要包含随机文件）。
2.  创建`auto_prepend`设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T00:13:37.927

您的“函数”在 ajax 调用中无法访问，因为它们是与原始请求（index.php）完全分开的请求。这些调用有它们自己的调用堆栈（可以这么说）并且对先前的请求一无所知。没有解决办法。如果您需要访问其他文件中定义的那些功能，则必须包含/要求这些文件。如果您不想在文件中使用`include`/ `require`，那么您需要重新考虑您的实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T00:20:33.420

这不是解决方法，而是 PHP 的工作方式。因为 PHP 是服务器端，所以您无法连接到在不同服务器调用中加载的函数。他们不连接。PHP 就是为此而生的。用它。

# mysql - 如何更改 MySQL5 中的列名

> ID：11044024
> 
> 赞同：0
> 
> 时间：2012-06-15T02:50:02.443
> 
> 标签：mysql

到目前为止我有这个，但列“名称”不明确，所以我想将模型表中的名称列更改为其他内容（还有一个名称列是学生表）。我怎样才能做到这一点？

```
SELECT name
FROM student
JOIN modle ON modle.id = event.modle
JOIN event ON event.id = attends.event
JOIN attends ON attends.student = student.id
WHERE name LIKE '%Database%' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T02:57:16.710

您可以为该列添加前缀以避免歧义并提供别名。

例如：

```
SELECT modle.name, student.name AS student_name FROM … 
```

但是，我主张在这种情况下更改列名，因为`name`在某些 SQL 风格中是保留字。

您可以使用[`ALTER TABLE`](http://dev.mysql.com/doc/refman/5.1/en/alter-table.html)命令或数据库管理器来执行此操作。

```
ALTER TABLE modle CHANGE COLUMN name modle_name [column_definition] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T03:00:33.830

列别名允许您为特定结果集创建自己的列名。
例子：

```
SELECT modle.`name` AS model_name, student.`name` AS student_name
FROM student
JOIN modle ON modle.id = event.modle
JOIN event ON event.id = attends.event
JOIN attends ON attends.student = student.id
WHERE name LIKE '%Database%'; 
```

* * *

如果要永久更改列名，请使用以下`ALTER TABLE`命令：
[http ://dev.mysql.com/doc/refman/5.1/en/alter-table.html](http://dev.mysql.com/doc/refman/5.1/en/alter-table.html)

例子：

```
ALTER TABLE student 
CHANGE COLUMN `name` student_name VARCHAR(50); 
```

[http://dev.mysql.com/doc/refman/5.1/en/alter-table.html](http://dev.mysql.com/doc/refman/5.1/en/alter-table.html)

# ssas - 给定在 SSAS 中计算的逻辑回归系数，创建一个公式来计算连续输出值

> ID：11044028
> 
> 赞同：0
> 
> 时间：2012-06-15T02:50:27.487
> 
> 标签：ssas, regression, data-mining, dmx-ssas

我在 SSAS 中训练了一个简单的逻辑回归模型，使用 Gender 和 NIC 作为离散输入节点（NIC 为 0 表示非吸烟者，1 表示吸烟者），Score (0-100) 作为连续输出节点。

我想根据新参与者的性别和 NIC 值来预测分数。当然，我可以在 DMX 中运行单例查询；例如，以下产生一个值 49.51....

```
 SELECT Predict(Score) 
  FROM [MyModel]
  NATURAL PREDICTION JOIN 
  (SELECT 'M' AS Gender, '1' AS NIC) as t 
```

但我不想使用 DMX，而是想从模型中创建一个**公式**，以便在与 SSAS“断开连接”时计算分数。

调查模型，我在输出节点的 NODE_DISTRIBUTION 中有以下信息：

```
 ATTRIBUTE_NAME   ATTRIBUTE_VALUE    SUPPORT PROBABILITY    VARIANCE       VALUETYPE
  Gender:F         0.459923854        0       0              0              7 (Coefficient)
  Gender:M         0.273306289        0       0              0              7 (Coefficient)
  Nic:0            -0.282281195       0       0              0              7 (Coefficient)
  Nic:1            -0.802106901       0       0              0              7 (Coefficient)
                   0.013983007        0       0              0.647513829    7 (Coefficient)
  Score            75.03691517        0       0              0              3 (Continuous 
```

将这些系数插入逻辑回归公式——我被禁止作为新用户上传:)——对于上面的吸烟男性示例，

```
 f(...) = 1 / (1 + exp(0 - (0.0139830071136734   -- Constant(?)
    + 0 * 0.459923853918008                       -- Gender:F = 0
    + 1 * 0.273306289390897                       -- Gender:M = 1
    + 1 * -0.802106900621717                      -- Nic:1 = 1
    + 0 * -0.282281195489355)))                   -- Nic:0 = 0 
```

结果为 0.374.... 但是我如何将这个值“映射”回 0-100 的分数分布？换句话说，我如何扩展上面的等式以产生与 DMX 单例查询相同的值？我假设它将需要我的分数分布的标准偏差和平均值，但我一直坚持如何使用这些值。我也不确定我是否正确使用第五行中的 ATTRIBUTE_VALUE 作为常量。

您可以提供的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T03:00:23.097

我不是专家，但听起来你根本不想使用逻辑回归。您想训练线性回归。您目前有一个逻辑回归模型，这些模型通常用于二进制分类，而不是连续值，即 0-100。

[如何在 SAS 中进行线性回归](http://www.google.com/url?sa=t&rct=j&q=linear%20regression%20sass&source=web&cd=1&ved=0CFAQFjAA&url=http://www2.sas.com/proceedings/sugi22/STATS/PAPER267.PDF&ei=7qTaT9OaEejL0AGwkYXjAg&usg=AFQjCNFAth2JfORshiMYbqxBnwe-Jww4zw&cad=rja)

[维基百科：线性回归](http://en.wikipedia.org/wiki/Linear_regression)

更多细节：这个问题真的取决于你的数据，就像大多数数据挖掘/机器学习问题一样。如果您的数据是双峰的，超过 90% 的训练集非常接近 1 或 100，那么可能会使用逻辑回归。逻辑回归中使用的方程专门用于呈现是/否的答案。从技术上讲，它是一个连续函数，因此可能出现 0.34 等结果，但在统计上它们不太可能（在典型用法中，您会向下舍入为 0）。

但是，如果您的数据是正态分布的（大部分自然是），则更好的方法是线性回归。唯一的问题是，如果给定一个特别糟糕的数据点，它可以预测超出您的 0-100 范围。在这种情况下，您最好四舍五入（将结果裁剪为 0-100）或将数据点作为异常值忽略。在性别的情况下，一个快速的技巧是将男性映射到 0，将女性映射到 1，然后将性别作为模型的输入。

[SSAS 线性回归](http://msdn.microsoft.com/en-us/library/ms174824)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T22:17:01.147

如果您尝试对限制在区间 [0,100] 的分数进行建模，则不希望使用逻辑回归。逻辑回归用于对二元数据或基于二项分布的比例进行建模。假设您实际使用逻辑回归建模的 logit 链接函数是概率（几率对数）的函数，因此整个过程旨在为您提供区间 [0,1] 中的值。尝试使用它来映射到分数似乎根本不是正确的分析类型。

此外，我看不到常规线性回归将如何帮助您，因为您的拟合模型将能够生成超出目标区间 [0,100] 的值，并且如果您必须将值临时截断到此范围，那么您可以真的确定你的数据有什么有效意义吗？？

我希望能够向您指出您需要的分析类型，但我还没有遇到过这种类型的分析。我对您的建议是放弃逻辑回归方法，并考虑加入专业统计学家和数学家使用的 ALLSTAT 邮件列表并在那里寻求建议。或类似的东西。

# c++ - FLTK 绘制像素图给出了段错误

> ID：11044029
> 
> 赞同：0
> 
> 时间：2012-06-15T02:50:42.497
> 
> 标签：c++, linux, fltk

我正在尝试使用 FLTK 在 C++ 程序中绘制 xpm 文件。

这是代码

```
#include <FL/Fl.H>
#include <FL/Fl_Window.H>
#include "image.xpm"
#include <FL/Fl_Pixmap.H>
#include <FL/fl_draw.H>
#include <FL/Fl_Image.H>
int main(int argc, char ** argv)
{
  Fl_Window *window = new Fl_Window(800,650);
  Fl_Pixmap pix(XFACE);
  pix.draw(200,200);
  window->end();
  window->show(argc,argv);
  return Fl::run();
} 
```

XFACE 是“image.xpm”中的有效 xpm 对象

但是我在 pix.draw() 行遇到了分段错误。
这是什么原因造成的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T10:25:39.457

```
/* Try this - this works for me, and I guess is what you meant! */

#include <FL/Fl.H>
#include <FL/Fl_Window.H>
#include <FL/Fl_Box.H>
#include <FL/Fl_Pixmap.H>

#include "image.xpm"

int main(int argc, char ** argv)
{
    Fl_Window *window = new Fl_Window(800,650);
    Fl_Box *image_box = new Fl_Box(5, 5, 790, 640);
    Fl_Pixmap pix(XFACE);
    window->end();
    image_box->image(pix);
    window->show(argc,argv);
    return Fl::run();
}

/* end of file */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T10:11:10.417

老实说，这看起来甚至不像是有效的 fltk 代码。您正在直接调用 draw() 方法，而 AFAIK 在 fltk 中很少有效。

您可能想在他们的邮件列表上询问 - 他们非常敏感。

此外，您是否查看了 tarball 的“测试”文件夹中的像素图演示 - 看看它做了什么，然后复制它！

# ruby-on-rails - Rails ActionMailer，link_to 转发？

> ID：11044031
> 
> 赞同：0
> 
> 时间：2012-06-15T02:51:09.920
> 
> 标签：ruby-on-rails, ruby-on-rails-3, email, ruby-on-rails-3.1, actionmailer

我将如何`link_to`在 ActionMailer 生成的邮件中“转发此电子邮件”？我不知道我会怎么做。

我问的原因是，Campaign Monitor 似乎在他们的模板中制作了这些链接（没有任何功能）——一段暗示可以完成此功能的文本——但我想让这些链接真正发挥作用。

一般来说，这可能只是一个电子邮件/html 问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T13:09:34.757

是的，正如 Zabba 提到的问题所[指出](https://stackoverflow.com/questions/2565554/how-do-i-make-a-forward-e-mail-link)的那样，不可能建立前向链接。这让我想知道为什么 Campaign Monitor 会建议这样的事情是可能的......

# symfony - 带有 Doctrine Entity 类型数组的 Symfony2 表单

> ID：11044035
> 
> 赞同：1
> 
> 时间：2012-06-15T02:51:36.070
> 
> 标签：symfony, symfony-forms

我有一个实体（组），其中存储了一个数据数组（UserDisplayNames）（user_id => DisplayName）（不同组的用户可以有不同的显示名称）。

我正在寻找最好的方法来做一个 symfony2 表单（在 Sonata AdminBundle 中），它允许键（user_id 和值被编辑）。

例如

```
Key <input type="text" name="key[]" value="{key}">
Value <input type="text" name="value[]" value="{value}">

Key <input type="text" name="key[]" value="{key}">
Value <input type="text" name="value[]" value="{value}"> 
```

# doctrine-orm - 如何在 codeigniter/doctrine 查询中使用 LIMIT？

> ID：11044036
> 
> 赞同：0
> 
> 时间：2012-06-15T02:52:01.343
> 
> 标签：doctrine-orm, limit, codeigniter-2

我正在使用 CodeIgniter2 + Doctrine2，并且有以下查询：

```
$query = $this->doctrine->em->createQuery("
         SELECT u
         FROM ORM\Dynasties2\Characters u
         WHERE u.fathersId = $key
         AND u.deathDate IS NULL
         AND u.isRuler = '0' 
         AND u.isFemale = '0'
         AND u.useAI = '1'
         AND u.bornDate <= $of_age
           ");
$sons_of_age = $query -> getResult(); 
```

而且我只想得到一个结果，假设有任何命中。

我查看了有关使用的 Doctrine 文档，`->LIMIT(1)`但我尝试将其放入我的查询中的各个地方，但只会出现错误。

Codeigniter 有一些内置功能要做`$query->row()`，但这似乎不起作用——我打赌是因为 Doctrine 集成。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T08:43:44.283

您正在寻找方法[`Query::setMaxResults($number);`](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/dql-doctrine-query-language.html#first-and-max-result-items-dql-query-only)然后您可以使用[`Query:getSingleResult();`](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/dql-doctrine-query-language.html#query-result-formats)，但是`Query:getSingleResult();`如果没有记录，方法会抛出错误。

```
$query = $this->doctrine->em->createQuery("
         SELECT u
         FROM ORM\Dynasties2\Characters u
         WHERE u.fathersId = $key
         AND u.deathDate IS NULL
         AND u.isRuler = '0' 
         AND u.isFemale = '0'
         AND u.useAI = '1'
         AND u.bornDate <= $of_age
           ");
$query->setMaxResults(1);
try {
  $sons_of_age = $query->getSingleResult();
} catch (\Doctrine\ORM\NoResultException $e) {
  $sons_of_age = null;
} 
```

# javascript - 我可以从函数中触发日期（时间）选择器吗？

> ID：11044037
> 
> 赞同：2
> 
> 时间：2012-06-15T02:52:15.927
> 
> 标签：javascript, jquery-ui, jquery-plugins

我有一个包含 20 个选项的选择，当用户**仅选择一个特定选项“选择日期时间”**时，应出现日期（时间）选择器，**然后在输入框中填充日期时间文本**。

那可能吗？我怎样才能做到这一点？

我现在有日期（选择器）工作。它由按钮触发并链接到输入框。但我想根据我的特定需求修改它目前的工作方式。

**问题1：**我知道如何在选择更改时触发函数。然后我过滤选项，如果它是我将以某种方式启动日期选择器的选项。我不知道如何做这部分。

**问题2：**我不知道如何告诉日期选择器将日期文本添加到现有文本框中。也许我可以以某种方式将日期计时器选择器与文本框链接起来。

*   jquery-1.7.2.min.js
*   jquery-ui-1.8.21.custom.min.js
*   jquery-ui-timepicker-addon.js

# 更新

在[jsfiddle 示例中](http://jsfiddle.net/radek/dPRjS/3/)，我有选择和文本框。该按钮由日期/时间选择器创建。

我想要的是：

*   当用户选择/单击“选择日期和时间”选项时，日期/时间选择器将出现，文本将出现在文本框中
*   我不希望按钮在页面上可见
*   我将文本框用于其他目的，不仅用于日期/时间，因此与此文本框相关的任何用户操作都不会出现日期/时间选择器

示例中的 html 代码

```
<input id="datetime" type="text" name="datetime" value="" >
<select size=5>
    <option value="not">Not this one</option>
    <option value="not">Not this one</option>
    <option value="not">Not this one</option>
    <option value="datetimepicker">Select date and time</option>
</select> 
```

示例中的 javascript 代码

```
$('#datetime').datetimepicker({
    showOn: "button"
});​ 
```

注意：如上所述的最终工作版本：http: [//jsfiddle.net/radek/dPRjS/8/](http://jsfiddle.net/radek/dPRjS/8/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T03:41:23.107

以相反的顺序回答你的问题......

Datepicker 通常“附加”到输入框。无需告诉 datepicker 将其选择的日期放入输入框中。日期选择器只是在关闭时执行此操作，也就是用户选择日期的时候。

这就留下了如何根据一些外部事件打开日期选择器的技巧。通常，单击附加的输入框会自动打开日期选择器。您希望它通过更改选择/下拉菜单自动打开。

这对我有用：

js：

```
$(document).ready(function() {
  var $dp = $('#date1').datepicker({});

  $('#select1').change(function() {
      // programmatically open the datepicker
      $dp.datepicker('show'); 
  });
}); 
```

html:

```
<input type="text" id="date1" size="12">
<br/>
<select id="select1">
  <option>Hello</option>
  <option>Bonjour</option>
  <option>Buon giorno</option>
  <option>Guten tag</option>
</select> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T03:40:36.137

尝试这个：

```
$('#datetime').datetimepicker();
$('option[value=datetimepicker]').click(function() {
    $('#datetime').datetimepicker('show');
});​ 
```

要回答您的核心问题，datetimepicker 插件是 datepicker jQueryUI 小部件的扩展，并且可以访问其所有方法，包括 show 方法。因此，您可以在需要时以编程方式调用节目以打开选择器。

**[jsFiddle 示例](http://jsfiddle.net/j08691/dPRjS/5/)**。

# css - 在 onorientationchange 时缺少带有 css（-webkit-overflow-scrolling: touch）的 iPad 滚动条

> ID：11044039
> 
> 赞同：0
> 
> 时间：2012-06-15T02:52:24.533
> 
> 标签：css, ipad

我想在带有滚动条的小 div 中显示一些“ul”结果，而不是用户需要滚动整个页面，现在我已经通过 css 使其工作：**-webkit-overflow-scrolling: touch;** ，通常它可以工作，但是当我改变 ipad 的视图时它就坏了。

例如：

```
<div id="leftpanel">ul ul ul ul</div>
#leftPanel{
       overflow-y: scroll;
       overflow-x: visible;
   -webkit-overflow-scrolling: touch;
       height：100%；
} 
```

在横向视图中div的高度不足以显示所有'ui'然后滚动条起作用，此时将视图更改为纵向视图，div的高度足以显示所有'ul'以便滚动条是禁用自动，最后将视图改回横向**滚动条丢失，不可滚动** 有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T09:30:02.243

**希望这可以帮助 ：）**

```
$(window).resize(function() {

    if($('#thumbwrapper').is(":visible")==true)
    {
       //thumbholder is inner div and thumbwrapper outer 
        $('#thumbholder').height(900); 
        window.setTimeout(delayFix, 10);
    }

});

function delayFix()
{
    if($('#thumbwrapper').is(":visible")==true)
    {
        $('#thumbholder').height($("#thumbwrapper").height() + 20);
    }
} 
```

# iphone - Chase 或 Lemon 等 iPhone 应用程序如何使用相机扫描并从图像中收集信息？

> ID：11044040
> 
> 赞同：1
> 
> 时间：2012-06-15T02:52:32.920
> 
> 标签：iphone, ios, mobile, camera, mobile-application

我对构建一个使用手机的原生相机拍摄照片并从照片中收集信息的应用程序非常感兴趣。类似的例子是大通银行应用程序，它允许用户为他们的支票拍照，然后处理它并存入它。还有 Lemon 应用程序，它可以为你的钱包里的东西拍照，然后将它们存储在应用程序中。这种类型的东西有图书馆吗？还是全部定制？如果是这样怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T03:47:10.860

您将需要寻找适用于 iOS 的 OCR（光学字符识别）库。

下面的答案可能会有所帮助：

[https://stackoverflow.com/questions/9062755/ocroptical-character-recoginition-libraries-for-iphone](https://stackoverflow.com/questions/9062755/ocroptical-character-recoginition-libraries-for-iphone)

# html - 在全球范围内修复网站上的字体大小

> ID：11044044
> 
> 赞同：1
> 
> 时间：2012-06-15T02:53:01.290
> 
> 标签：html, css, asp.net-mvc-3, ckeditor

我将 CKEditor 用于为客户构建的简单 CMS。

这是我遇到的问题，客户端从 word 文档中复制和粘贴文本，然后该文本使用文本中的当前字体存储到数据库中。并在前端显示与页面其余部分不同的字体。

如何为页面强制使用固定字体？

我在css中全局定义了一个字体，但是可以在不同的div p、span等中覆盖字体，对吗？

我想从 CKEditor 中删除字体。

寻找一个整洁的解决方案。

干杯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T03:09:42.347

Word 将它粘贴的任何文本弄得一团糟，其中包含各种无关的标签。

对您来说最简单的方法是让您的客户了解如何[从 Word 按钮粘贴](http://docs.cksource.com/CKEditor_3.x/Users_Guide/Document/Cut,_Copy_and_Paste#Paste_from_Word)。

如果您真的希望强制执行此操作，您始终可以将[forcePasteAsPlainText](http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.config.html#.forcePasteAsPlainText)设置为 true。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T14:02:30.927

您可以[为“粘贴”事件添加一个侦听器](http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.editor.html#event%3apaste)。它会按照你想要的方式清理你的 HTML。

# css - Twitter bootstrap 去掉表格上的悬停背景颜色

> ID：11044046
> 
> 赞同：5
> 
> 时间：2012-06-15T02:53:26.877
> 
> 标签：css, twitter-bootstrap

我花了 45 分钟研究如何消除行悬停时的背景颜色变化。

见小提琴：http: [//jsfiddle.net/BJrnC/1/](http://jsfiddle.net/BJrnC/1/)

以防万一我不清楚。当您使用引导程序在表格的 tbody 中悬停一行时，背景变为灰色。问题是我真的很喜欢他们的布局，但我就是不喜欢那样。

我怎样才能禁用它？

谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-15T03:02:37.217

您可以在样式表中添加以下内容以覆盖该功能：

```
.table tbody tr:hover td, .table tbody tr:hover th {
    background-color: transparent;
} 
```

演示：http: [//jsfiddle.net/BJrnC/2/](http://jsfiddle.net/BJrnC/2/)

* * *

**注意**：注意到我仍然对此答案表示赞同。twitter 引导程序现在默认执行此操作。如果您想为表格添加悬停效果，只需将`.table-hover`悬停类添加到表格的主体，否则只需省略它，悬停时它不应该有任何效果。这仅适用于最新版本的引导程序。

# jquery - 分页和过滤脚本几乎准备就绪

> ID：11044054
> 
> 赞同：0
> 
> 时间：2012-06-15T02:55:36.210
> 
> 标签：jquery, html-lists, paging

[@alex-r 在这方面](http://jsfiddle.net/vU9Hv/14/)帮了我很多，但我遇到了一个小问题。要了解我想说什么，请单击“类别 1”链接，现在单击“下一步”直到它隐藏，然后单击“类别 3”。就像你看到的项目没有显示。我不知道是否存在某种方式可以转到所选类别的第一项或让它显示的东西。

谢谢你的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T03:16:51.457

每当重置类别时，您都需要将页面重置为第一个。

```
if (action == "first") {
    min = 0;
    max = itemsNumber;
} 
```

然后在`click`事件处理程序中，调用`first`操作：

```
pagination('first'); 
```

小提琴：http: [//jsfiddle.net/vU9Hv/17](http://jsfiddle.net/vU9Hv/17)

# ruby-on-rails - Rails：我想为资源添加索引：symbol route

> ID：11044056
> 
> 赞同：1
> 
> 时间：2012-06-15T02:55:51.997
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, routes

用户订阅了提要，但是当我更改时（如 stackO 上其他地方的建议）

```
resource :subscriptions 
```

至

```
resources: subscriptions 
```

它破坏了我已经实现的关于销毁的一些 ajax 功能。

我希望能够链接到 /subscriptions/ 并让用户能够查看他们的所有订阅。问题是，当我真正想要#index 时，它正在将我带到订阅#show。

我该怎么做？

这是我的 AJAX：

```
<div id="subscribe" class="shadow">
<% if session[:read_random]
    unless is_subscribed?(session[:read_random].last)%>
            <%= link_to 'Subscribe', subscriptions_path(feed_id: session[:read_random].last), method: :post, remote: :true %>

    <% else %>
        <%= link_to 'Unsubscribe', subscriptions_path(feed_id: session[:read_random].last), method: :delete, remote: :true %>

<%  end
   end %>
</div> 
```

这是我的销毁方法

```
def destroy

      if params[:feed_id]
          #this is the ajax call
          @subscription = Subscription.find_by_user_id_and_feed_id(session[:user_id], params[:feed_id])
      else
          #this is the index destroy call (unsubscribe)
          @subscription = Subscription.find(params[:id])
      end
  @subscription.destroy

  respond_to do |format|
    format.html { redirect_to request.referer }
    format.js
    format.json { head :no_content }
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T05:34:07.160

使用复数资源的默认资源路由，正确的销毁路由将是`subscription_path(id), method: :delete`. 请注意，订阅是单数的。对于这些路由，destroy 路径通常与 show 和 update 路径相同，但使用的 http 方法除外。

# jquery - 无法让 jQuery 代码动态更改 css

> ID：11044057
> 
> 赞同：0
> 
> 时间：2012-06-15T02:55:55.847
> 
> 标签：jquery, css

似乎无法让 jQuery 更改我的 CSS。

在我的css文件中，这有效......

```
.closed {
    background-image: url(http://70.55.103.238/Images/menu-collapsed.gif);
} 
```

我需要能够使用 jQuery 动态更改它，所以我在 $(document).ready(function()...

```
$('.closed').css({ 'background-image' : 'url(http://'+window.location.host+'/Images/menu-collapsed.gif)' }); 
```

如果不是很明显，我需要这样做的原因是我不能使用图像文件夹的相对路径并且主机不是常数。

第一个问题，为什么 jquery 调用不起作用？如果我发出这样的警报...

```
alert('url(http://'+window.location.host+'/Images/menu-collapsed.gif)') 
```

我可以看到 URL 是正确的，如果我将警报中显示的 url 直接输入到地址栏中，我会得到 gif。所以我相信传递的 URL 是正确的。我必须假设 css 没有改变。

第二个问题，有什么方法可以动态获取 .css 文件中的主机 url，这样我就不用使用 jquery 了吗？

谢谢。

**更新：**

为了简单起见，我尝试了以下操作。

CSS...

```
.closed {
    background-image: url(../Images/menu-collapsed.gif);
} 
```

javascript...

```
$('.closed').css({ 'background-image' : 'url(../Images/menu-expanded.gif)' }); 
```

请注意，css 设置为使用 menu-collapsed.gif，而 javascript 将其更改为 men-expanded.gif。但显示的图像是 menu-collapsed.gif。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T03:07:10.843

这对我来说可以：

[http://jsfiddle.net/gopi1410/UscLn/](http://jsfiddle.net/gopi1410/UscLn/)

检查控制台是否有任何错误并检查 .closed div 以检查其背景图像是否已更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T07:34:41.427

好的，我想通了。我不确定这是否是设计使然，但我发现每次更改由 jQuery css 控制的类时都必须重置 css。在我的特殊情况下，我在拥有任何 .close 类的 DOM 元素之前设置图像。

我实际上拥有的是一个由 ul li 元素组成的树形菜单，它是在 $(document).ready(function() 中创建的，树的所有节点都分配了 .closed 类。我移动了 $('.closed ').css() 调用，以便在我将树添加到 DOM 后立即执行它。并且它起作用了。

当用户单击关闭的 ul 时，我使用的 .open 类也是如此。在我将类从 .close 更改为 .open 之后，我必须立即调用 $('.open').css。并在更改回关闭后再次出现。

所以，如果我理解我所看到的 $('.closed').css 一定不能像手动将其输入脚本那样对 css 进行持久更改。我在解释这个正确性吗？

如果有人对此感兴趣，那么我的jquery现在看起来像他们正在工作的.css（）调用......

```
$(document).ready(function() {
    $.get('treeMenu.xml', function(d) {

        function makeMenu($xml) {
            var markup = "";
            function processXml() {
                //CODE TO PARSE XML INTO MENU TREE IN MARKUP VAR
            }
            $xml.children().each(processXml);
            return markup;
        }

        tree = makeMenu($(d));
        $('div.treeMenu').append(tree);
        //HAD TO PUT THE CSS CALL HERE FOR IT TO WORK
        $('.closed').css({backgroundImage: "url(http://"+window.location.host+"/Images/menu-collapsed.gif)"});

        $('.treeMenu ul,li').each(function() {
            if ($(this).hasClass("leaf")) {
                $(this).click(function() {
                    //CODE FOR CLICK ON LEAFS
                }); 
            }else {
                $(this).click(function() {
                    if ($(this).hasClass("closed")) {
                        $(this).removeClass("closed").addClass("open");

                        //HAVE TO PUT THIS HERE FOR EVERY CLICK TO GET A CHANGE IN THE GIF
                        $('.open').css({backgroundImage: "url(http://"+window.location.host+"/Images/menu-expanded.gif)"});

                } else if ($(this).hasClass("open")) {
                        $(this).removeClass("open").addClass("closed");

                        //HAVE TO PUT THIS HERE FOR EVERY CLICK TO GET A CHANGE IN THE GIF
                        $('.closed').css({backgroundImage: "url(http://"+window.location.host+"/Images/menu-collapsed.gif)"});

                } else {
                        $(this).addClass("open");

                        //HAVE TO PUT THIS HERE FOR EVERY CLICK TO GET A CHANGE IN THE GIF
                        $('.open').css({backgroundImage: "url(http://"+window.location.host+"/Images/menu-expanded.gif)"});
                 }  
            });
        }       
      });       
  });
}); 
```

# sql - 在 SQL 中使用 SSRS 进行数据挖掘

> ID：11044059
> 
> 赞同：0
> 
> 时间：2012-06-15T02:56:19.077
> 
> 标签：sql, reporting-services

我怎样才能使使用报告进行数据挖掘成为可能。我知道基本的 SQL 并设法制作了一些静态表，但我希望能够单击一个项目并获得一个关于该项目或相关事物的更详细的表（过去版本的表）ext ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T04:10:22.243

听起来您想要的是向下钻取报告。您需要的是一份摘要报告（例如，每人的销售额）和详细的报告（例如，每个产品组的个人销售额）。详细报告将具有摘要报告提供的人员报告参数。

在摘要报告的人员表单元格上，右键单击，选择属性并选择导航选项卡。选择“跳转到报告”，下拉并选择您的详细报告，然后单击参数...按钮。在 Parameter Name 列中，下拉并选择 person 参数，在 Parameter Value 列中下拉并选择 Person 字段。

现在，当您运行摘要报告时，您可以单击人员单元格并在详细报告中显示该人员的结果。

您还可以使用表达式 =Parameters!MyParamName.Value 而不是字段表达式，将在摘要报告中输入的参数（例如，日期范围）传递给详细报告参数。

# python - 有什么方法可以自定义 fileinput.input 的输入分隔符？

> ID：11044064
> 
> 赞同：0
> 
> 时间：2012-06-15T02:57:28.183
> 
> 标签：python, input, readline, delimiter, file-io

谁能想出一种方法来更改该[**`fileinput.input`**](http://docs.python.org/library/fileinput.html)方法的输入分隔符？

（根据文档，默认输入分隔符是`'\n'`，并且没有被剥离。）

谢谢！

# json - Web 套接字服务器中的 JSON 解析

> ID：11044065
> 
> 赞同：1
> 
> 时间：2012-06-15T02:57:39.403
> 
> 标签：json, html, node.js, websocket

我在这里使用这个简单的教程创建了我的 Web 套接字服务器和客户端：http: [//cjihrig.com/blog/creating-your-own-node-js-websocket-echo-server/](http://cjihrig.com/blog/creating-your-own-node-js-websocket-echo-server/)

但它似乎只识别 UTF-8 字符。
我想在文本框中发送 JSON 消息：

```
var jsonString = JSON.stringify({"fname":"John","lname":"Smith"}) 
```

在 ws_server.js 文件中，我写了

```
connection.on('message', function(message) {  
var jObject = JSON.parse(message); 
jObject.lname = "Jobs";  
}.. 
```

但是我收到 JSON.parse 方法的错误。

请让我知道有什么问题。
还是我必须为 JSON 解析或 JSON 消息编写任何新的服务器实现？

这是我的客户端代码：[http](http://cjihrig.com/blog/creating-your-own-websocket-echo-client/)
://cjihrig.com/blog/creating-your-own-websocket-echo-client/ 但“text”的值修改如下：
jsonmsg = {fname:“John”, lname:"史密斯"}
jsonString = JSON.stringify(jsonmsg);
所以 socket.send(jsonString);

谢谢斯内哈
_

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T02:59:56.750

```
var jsonString = {"fname":"John","lname":"Smith"} 
```

不创建字符串；它创建一个对象。使它成为一个字符串：

```
var jsonString = JSON.stringify({"fname":"John","lname":"Smith"}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T07:19:04.243

你有没有尝试过：

```
socket.json.send( { fname : 'John', lname : 'Smith'} ); 
```

# python - Python：如何将输出捕获到文本文件？（现在只捕获了 530 行中的 25 行）

> ID：11044072
> 
> 赞同：4
> 
> 时间：2012-06-15T02:59:43.130
> 
> 标签：python, python-2.7, nltk

我已经在 SO 上进行了大量的潜伏，并进行了大量的搜索和阅读，但我也必须承认在一般编程方面是一个相对的菜鸟。我正在努力学习，所以我一直在玩 Python 的 NLTK。在下面的脚本中，我可以让一切正常工作，除了它只写多屏输出的第一个屏幕，至少我是这么想的。

这是脚本：

```
#! /usr/bin/env python

import nltk

# First we have to open and read the file:

thefile = open('all_no_id.txt')
raw = thefile.read()

# Second we have to process it with nltk functions to do what we want

tokens = nltk.wordpunct_tokenize(raw)
text = nltk.Text(tokens)

# Now we can actually do stuff with it:

concord = text.concordance("cultural")

# Now to save this to a file

fileconcord = open('ccord-cultural.txt', 'w')
fileconcord.writelines(concord)
fileconcord.close() 
```

这是输出文件的开头：

```
Building index...
Displaying 25 of 530 matches:
y .   The Baobab Tree : Stories of Cultural Continuity The continuity evident 
 regardless of ethnicity , and the cultural legacy of Africa as well . This Af 
```

为了将整个 530 个匹配项写入文件，我在这里缺少什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T03:49:21.707

`text.concordance(self, word, width=79, lines=25)`[根据手册](http://nltk.googlecode.com/svn/trunk/doc/api/nltk.text-pysrc.html#Text.concordance)似乎有其他参数。

我看不到提取索引大小的方法，但是，[索引打印代码](http://nltk.googlecode.com/svn/trunk/doc/api/nltk.text-pysrc.html#ConcordanceIndex.print_concordance)似乎有这部分：`lines = min(lines, len(offsets))`，因此您可以简单地`sys.maxint`作为最后一个参数传递：

```
concord = text.concordance("cultural", 75, sys.maxint) 
```

**添加：**

现在看你的原始代码，我看不到它以前可以工作的方式。`text.concordance`不返回任何内容，而是将所有内容输出到`stdout`using `print`。因此，简单的选择是将标准输出重定向到您的文件，如下所示：

```
import sys

....

# Open the file
fileconcord = open('ccord-cultural.txt', 'w')
# Save old stdout stream
tmpout = sys.stdout
# Redirect all "print" calls to that file
sys.stdout = fileconcord
# Init the method
text.concordance("cultural", 200, sys.maxint)
# Close file
fileconcord.close()
# Reset stdout in case you need something else to print
sys.stdout = tmpout 
```

另一种选择是直接使用相应的类并省略 Text 包装器。[只需从此处](http://nltk.googlecode.com/svn/trunk/doc/api/nltk.text-pysrc.html#Text.concordance)复制位并将它们与[此处](http://nltk.googlecode.com/svn/trunk/doc/api/nltk.text-pysrc.html#ConcordanceIndex.print_concordance)的位结合即可完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T03:06:39.740

更新：

我发现这个[write text.concordance output to a file Options](https://groups.google.com/group/nltk-users/browse_thread/thread/2b4dbb4ab93e282a?fwc=1&pli=1) from the ntlk usergroup。它是从 2010 年开始的，并指出：

> Text 类的文档说：“旨在支持对文本的初步探索（通过交互式控制台）。......如果你想编写一个利用这些分析的程序，那么你应该绕过 Text 类，并使用而是直接使用适当的分析函数或类。”

如果从那以后包中没有任何变化，这可能是您的问题的根源。

- - 之前 - -

我没有看到使用[writelines()](http://docs.python.org/library/stdtypes.html?highlight=writelines#file.writelines)写入文件的问题：

> file.writelines（序列）
> 
> 将一系列字符串写入文件。序列可以是任何产生字符串的可迭代对象，通常是字符串列表。没有返回值。（该名称旨在匹配 readlines()； *writelines() 不添加行分隔符*。）

注意斜体部分，您是否在不同的编辑器中检查了输出文件？也许数据在那里，但由于缺少行尾分隔符而无法正确呈现？

您确定这部分正在生成您要输出的数据吗？

```
 concord = text.concordance("cultural") 
```

我不熟悉`nltk`，所以我只是作为消除问题可能来源的一部分询问。

# javascript - 在新窗口中打开网页的工作方法？

> ID：11044073
> 
> 赞同：0
> 
> 时间：2012-06-15T02:59:43.613
> 
> 标签：javascript, extjs, sencha-touch-2, new-window

我一直在尝试在 sencha touch 中编写代码，它有一个按钮，当我点击它时，它应该在新窗口中打开一个网页作为弹出窗口。

1.  Window.open()-我不能使用这个方法，因为它在手机中不能正常工作。虽然我意识到这是打开新浏览器窗口的最简单方法。

2.  document.location.href=url - 此方法在同一
    页面中打开 URL，但我希望它在新窗口中作为弹出窗口打开。

当用户单击按钮时，有没有其他方法可以在新窗口中打开页面，下面是我的代码

```
Ext.application({
    name: 'Opening new page',

    launch: function() {
        Ext.create("Ext.tab.Panel", {
            fullscreen: false,
            items: [
                {
                    xtype: 'button',
                    text: 'click to open google',
                    ui: 'confirm',
                    handler: function() {
                        document.location.href=("http://www.google.com/");
                    }
                }
            ]
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T14:28:54.927

嘿@coding 你可以，这是一个 Overlay 是一个类型的弹出窗口，试试这个到处理程序事件中，

```
var overlay = new Ext.Panel({
    floating : true,
    modal : true,
    centered : true,
    width : 500,
    height : 500,
    styleHtmlContent : true,
    html: '<div><iframe style="width:100%;height:100%;" src="http://www.sencha.com/products/touch">Your device does not support iframes.</iframe></div>',
}).show('pop', true) 
```

**请用你的大脑，我不可以做你的功课**。我希望这有帮助。：） 再见![在此处输入图像描述](../Images/606ecf7ac379b71141464ab224ddc0f8.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T04:01:32.293

**请尝试以下代码：**

```
handler: function() {
  var link = Ext.getDom('hidden_link');
  link.href = 'http://www.google.com'/;
  var clickevent = document.createEvent('Event');
  clickevent.initEvent('click', true, false);
  link.dispatchEvent(clickevent);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T04:23:50.890

我不确切知道如何在 Ext.js 中做到这一点，但我基本上是按照与 @bunlong-van 相同的思路思考的。创建一个以新窗口为目标的锚标记，将其添加到页面，然后单击它。

这就是它可以在 jQuery 中完成的方式：

```
 $('button').bind('click',function(e){
      var $me = $(this);
      e.preventDefault();
      e.stopPropagation();
      $('<a />')
        .attr('href', $me.data('href'))
        .attr('target', '_blank')
        .css({display:'none'})
        .appendTo($('body'))
        .get(0).click();
  }); 
```

完整示例：http: [//jsbin.com/adakur/edit](http://jsbin.com/adakur/edit)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-13T12:23:43.187

在您的处理程序中使用 window.open() ，如下所述：

```
handler: function() { 
    window.open("http://www.google.com/", "_blank"); 
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-15T04:45:59.240

在您的工作页面中创建一个弹出窗口（一个简单的窗口）并将其可见性设置为 false .. 当您单击按钮时，将其可见性更改为 true 并将焦点移至它.. 您也可以在该弹出窗口中打开任何内容窗户..

或者你可以使用这个 jQuery 代码

```
$(document).ready(function() { tb_show(title, "testpage.aspx?id=" + url + "&TB_iframe=true&width=700&height=600", null); }); 
```

在这个你可以传递你想要的参数。这将作为一个新的弹出窗口打开。

# php - MySQL & PHP 插入查询失败

> ID：11044078
> 
> 赞同：0
> 
> 时间：2012-06-15T03:00:04.720
> 
> 标签：php, mysql, database, insert

我知道这里只是通过一些测试没有足够的验证。$result 总是返回空？我的查询不好吗？我是 PHP 新手，将变量连接成字符串并不是我完全掌握的东西。使用 OOP 形式，因为我非常熟悉它和概念。

另外，我知道这段代码非常草率......只是试图直接潜入=）`

```
$page = new Page();

$page->title = "Add a New Item";
$page->DisplayHeader();
$page->DisplaySidebar();

if (isset($_POST['submit']))
{
    // make short variable names
    $name = trim($_POST['name']);
    $level = intval($_POST['level']);
    $slot = strtolower($_POST['slot']);
    $hp = intval($_POST['hp']);
    $mana = intval($_POST['mana']);
    $mvs = intval($_POST['mvs']);
    $int = intval($_POST['int']);
    $wis = intval($_POST['wis']);
    $str = intval($_POST['str']);
    $dex = intval($_POST['dex']);
    $con = intval($_POST['con']);
    $p_ac = intval($_POST['p_ac']);
    $m_ac = intval($_POST['m_ac']);
    $saves = intval($_POST['saves']);
    $hit = intval($_POST['hit']);
    $dam = intval($_POST['dam']);

    $queryOk = 1;

    if (empty($name) || empty($level) || empty($slot))
    {
        echo '<h3>Please enter all the required fields</h3>';
        $queryOk = 0;
    }

    // Instantiate database object and connect
    @ $db = new mysqli('*host*', '*user*', '*pass*', '*database*');

    // Check connection to 
    if (mysqli_connect_errno()) {
        echo 'Error:  Could not connect to database, try again later';
    }

    $query = "INSERT INTO items (name, level, slot, hp, mana, mvs, int, wis, str, dex, con, p_ac, m_ac, saves, hit, dam)".
    "V ALUES ('$name', $level, '$slot', $hp, $mana, $mvs, $int, $wis, $str, $dex, $con, $p_ac, $m_ac, $saves, $hit, $dam)";

    $result = $db->query($query);

    if (!$result)
    {
        echo '<h3>Error:  Item was not entered.  (Your webmaster sucks)</h3>';
    }
    else    {
        echo "<p>The items \"$name\" was successfully entered into the database.  <a href=\"equipment.php\>Back to Equipment or add another item.</a></p>";
    }

    $db->close();
}` 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T03:03:26.340

如果空格`V ALUES`实际上在您的代码中，这会导致您的查询失败

**更新**

如果这不是错误的原因，`$mysqli->error`请查看发生了什么错误。

```
if (!$result)
{
    echo '<h3>'$mysqli->error'  (Your webmaster sucks)</h3>';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T03:27:34.587

`int`是 mysql 中的[保留字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)，您将其用作字段名。你必须用反引号来逃避它：

```
INSERT INTO ... (..., `int`, ...)
                      ^---^-- escapes 
```

* * *

您的查询：

```
INSERT INTO items (name, level, slot, hp, mana, mvs, int, wis, str, dex, con, p_ac, m_ac, saves, hit, dam)
                                                     ^^^^--- problem here
VALUES ('$name', $level, '$slot', $hp, $mana, $mvs, $int, $wis, $str, $dex, $con, $p_ac, $m_ac, $saves, $hit, $dam)";
                                                   ^^^^^---NOT here 
```

# php - PHP文件上传/下载安全

> ID：11044085
> 
> 赞同：3
> 
> 时间：2012-06-15T03:00:59.150
> 
> 标签：php, security, .htaccess, upload, download

我只是想确认我所做的实际上是安全的。

首先，我有一个 GoDaddy 共享主机帐户，但我有一个专用 IP 地址。

让我们调用我的服务器路径`/path`。
我网站的文件位于`/path/mysite`
当用户上传文件时，我将其移至`/path/uploads/file_name`.
某人不可能通过 URL 访问该文件夹。
要添加，我有一个 .htaccess 文件，`/path/uploads`其中包含以下内容：

```
order deny,allow
deny from all
allow from 1.1.1.1 #let's say 1.1.1.1 is my server's IP address. 
```

然后要实际启动文件的下载，我的用户将点击一个链接到`mysite.com/file.php?q=[file_id]`

在 中`file.php`，我像这样下载：

```
$mime = mime_content_type($location);
header('Content-disposition: attachment; filename='.$name);
header('Content-type: '.$mime);
readfile($location); 
```

据我所知，任何人上传的文件都不可能在我的服务器上运行，但我可能错了。

是否有任何我需要处理的安全漏洞？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T13:00:01.247

首先，您不需要 ，`allow from 1.1.1.1`因为这将允许您通过 Apache 服务访问此目录。不，您只能从正在执行的程序/脚本访问此目录。

其次，这是一个非常标准的模板来解决这类问题。因此，它非常值得一看并且被广泛使用的软件包，例如 MediaWiki 或 BB 引擎，例如 phpBB 接近这个并反映了他们的一些安全检查。

我的第三个建议继承了 Marc B 的观点，您需要考虑您希望允许/支持的文件名和文件类型的限制，以及其他攻击的可能性。一种方法是简单地使用文件名和升序 ID 存储文件，并将 ID/用户文件名作为映射保存在数据库表中。您还需要考虑的不仅是对您的服务器的攻击，而且恶意用户可能会使用此上传工具来实施[XSS](http://en.wikipedia.org/wiki/Cross-site_scripting)和其他攻击。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-15T06:48:52.493

您可以完全禁用该目录的 PHP 解释器

> php_flag 引擎关闭

在您的 .htaccess 中。这应该可以很好地防止在**该**目录中运行的东西。

但是，您没有显示您的上传代码，因此很难说出您在那里做什么：您真的想检查您是否容易受到路径遍历的影响，因为这会完全使您的保护失效。

下载代码也可能容易受到攻击：如果您实际上使用的是您发布的代码片段，攻击者可以通过简单地使用“../../whatever.php”作为文件名（同样，路径遍历）。或者将该脚本用作 proxy 等等 - 因此您要确保验证文件名值。

# character-encoding - WE8MSWIN1252 字符集的哪个 NLS_LENGTH_SEMANTICS

> ID：11044086
> 
> 赞同：1
> 
> 时间：2012-06-15T03:01:00.633
> 
> 标签：character-encoding, oracle11g, database-schema

我们有一个数据库，其中字符集设置为 WE8MSWIN1252，我理解它是一个单字节字符集。

我们通过运行以下脚本创建了一个模式及其表：

ALTER SYSTEM SET NLS_LENGTH_SEMANTICS=CHAR

由于我们使用具有字符语义的 VARCHAR2 列，而底层字符集是单字节，我们可能会丢失数据吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T03:11:12.110

如果您使用的是像 Windows-1252 这样的单字节字符集，那么您使用的是字符语义还是字节语义都无关紧要。每个字符只占用一个字节，因此无论是声明列`VARCHAR2(10 CHAR)`还是`VARCHAR2(10 BYTE)`. 在任何一种情况下，将分配最多 10 个字节的存储空间，最多 10 个字符。

由于更改`NLS_LENGTH_SEMANTICS`设置没有任何好处，因此您应该将设置保持为默认值 ( `BYTE`)，因为这不太可能导致您可能需要运行的其他脚本（例如来自 Oracle 的脚本）出现问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T18:15:34.930

很好的问题。多字节字符将占用所需的字节数，这可能会使用比您预期更多的存储空间。如果您在 varchar2(4) 列中存储一个 4 字节字符，则您已经使用了所有 4 个字节。如果您在 varchar2(4 char) 列中存储一个 4 字节字符，那么您只使用了 1 个字符。许多外语和特殊字符使用 2 字节字符集，因此最好“了解您的数据”并相应地定义您的数据库列。Oracle 不建议将 NLS_LENGTH_SEMANTICS 更改为 CHAR，因为它会影响定义为 CHAR 或 VARCHAR2 的每个新列，在您进行就地升级时可能包括您的目录表。您可以看到为什么这可能不是一个好主意。其他 Oracle 工具集和接口也可能存在问题。

# html - Safari 中的 HTML5 音频标签

> ID：11044087
> 
> 赞同：1
> 
> 时间：2012-06-15T03:01:02.583
> 
> 标签：html

我对 Safari 中的标签有疑问。我有一个包含许多音频播放器的页面，并设置了 preload="none" 以便页面加载更快。在所有其他浏览器中，播放器内没有文本，但 Safari（5.1.7，Mac）在播放器中显示文本“Loading...”。我个人不介意，但我知道这会让那些认为他们应该等待下载内容并且可能永远不会点击播放按钮的用户感到困惑。

有没有办法将该文本设置为其他内容，或者更好的是完全隐藏它？

任何帮助表示赞赏！

谢谢，布雷特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T19:43:37.733

据我所知，这是 Safari 默认执行的操作，无法更改。但是，您可以使用某种 jQuery HTML5 播放器并添加一个函数，以便仅在音频缓冲时显示“正在加载”文本。

# r - 根据行的值删除列

> ID：11044090
> 
> 赞同：7
> 
> 时间：2012-06-15T03:01:48.650
> 
> 标签：r, dataframe, row

给定两个数据框：

```
 C1<-c(3,4,4,4,5)
 C2<-c(3,7,3,4,5)
 C3<-c(5,6,3,7,4)
 DF<-data.frame(C1=C1,C2=C2,C3=C3)
 DF
   C1 C2 C3
1  3  3  5
2  4  7  6
3  4  3  3
4  4  4  7
5  5  5  4 
```

和

```
V1<-c(3,2,2,4,5)
V2<-c(3,7,3,5,2)
V3<-c(5,2,5,7,5)
V4<-c(1,1,2,3,4)
V5<-c(1,2,6,7,5)
DF2<-data.frame(V1=V1,V2=V2,V3=V3,V4=V4,V5=V5)
DF2
  V1 V2 V3 V4 V5
1  3  3  5  1  1
2  2  7  2  1  2
3  2  3  5  2  6
4  4  5  7  3  7
5  5  2  5  4  5 
```

查看两个数据帧中的每个等效行，C3 中的值与我想在 DF2 中的同一行中删除的列数之间存在关系。

C3 中的值与 DF2 中要删除的列数之间的关系如下所示

```
If C3≥7 drop V5
If C3=6.0:6.9 drop V4 and up (so basically V5,V4)
If C3=5.0:5.9 drop V3 and up (so basically V5,V4,V3)
If C3=4.0:4.9 drop V2 and up (so basically V5,V4,V3,V2)
If C3≤3.9 drop entire row 
```

对于此示例，基于 C3 的值，我希望 DF2 看起来像这样

```
 V1 V2 V3 V4 V5
1  3  3
2  2  7  2

4  4  5  7  3 
5  5 
```

我试过写一个简单的脚本来做到这一点（我很新，所以我喜欢保持简单，这样我就可以看到发生了什么）但我左右抛出错误，所以我很感激一些关于如何继续

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T03:46:00.037

也许最简单的方法是：

```
DF3 <- DF2
for (i in seq_len(nrow(DF3))) {
  DF3[i, seq_len(ncol(DF3)) >= DF[i, ]$C3 - 2] <- NA
}
DF3 
```

然后，

```
> DF3
  V1 V2 V3 V4 V5
1  3  3 NA NA NA
2  2  7  2 NA NA
3 NA NA NA NA NA
4  4  5  7  3 NA
5  5 NA NA NA NA 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-15T03:54:34.897

我喜欢 Koshke 的回答，但如果您的设置规则对`NA`它们没有很好的数学属性，或者您需要任意定义您的规则，那么这种方法应该会给您这种灵活性。首先，定义一个函数，根据您的规则返回要删除的列：

```
f <- function(x) {
  if(x >= 7){
    out <- 5
  }else if(x >= 6.0){
           out <- 4:5
  } else if( x >= 5.0){
    out <- 3:5
  } else if (x >= 4.0){
    out <- 2:5
  } else {
    out <- 1:5
  }
  return(out)
} 
```

接下来，为要删除的列索引创建一个列表：

```
z <- lapply(DF$C3, f) 
```

最后，循环遍历每一行，将相应的列设置为 NA：

```
for(j in seq(length(z))){
  DF2[j, z[[j]]] <- NA
}

#-----
  V1 V2 V3 V4 V5
1  3  3 NA NA NA
2  2  7  2 NA NA
3 NA NA NA NA NA
4  4  5  7  3 NA
5  5 NA NA NA NA 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T04:26:57.300

使用定义的切点对 kohske 的回答略有不同：

```
breaksx <- cut(DF$C3,c(0,3,4,5,6,7,Inf),labels=FALSE)
for (i in seq(nrow(DF2))) {
        DF2[i,breaksx[i]:ncol(DF2)] <- NA
} 
```

结果：

```
> DF2
  V1 V2 V3 V4 V5
1  3  3 NA NA NA
2  2  7  2 NA NA
3 NA NA NA NA NA
4  4  5  7  3 NA
5  5 NA NA NA NA 
```

删除所有为 NA 的行

```
DF2[apply(DF2,1,function(x) !all(is.na(x))),] 
```

结果：

```
 V1 V2 V3 V4 V5
1  3  3 NA NA NA
2  2  7  2 NA NA
4  4  5  7  3 NA
5  5 NA NA NA NA 
```

# php - 奇怪的 MongoDB 错误 PHP

> ID：11044092
> 
> 赞同：1
> 
> 时间：2012-06-15T03:02:36.590
> 
> 标签：php, forms, mongodb, text

我已经使用 MongoDB 和 PHP 几个月了。我正在对几个新功能进行一些测试，但 MongoDB 突然表现得很奇怪。当我将字符串插入数据库时​​，它会截断字符串中的第一个字符。我的代码没有改变，只有结果？我有一个名为 details 的文本表单。当我提交并将其插入到集合中时，详细信息条目变得很糟糕。如果我在表格中输入“番茄”，我将收到：

从 PHP 回显（从插入后的条目查询构建）：

```
"omato" 
```

从 Mongo Shell 我收到：

```
"Details" : "" 
```

从 api 请求（回声 JSON）我收到：

```
"Details" : "\u0000omato" 
```

关于是什么原因造成的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T21:49:05.687

似乎您出于某种原因在字符串中添加了一个`\0`字符。三种不同的工具以不同的方式处理这一切：

1.  PHP 的 echo 只是显示它，因此它不会出现。如果您通过类似的方式流式传输输出，`hexdump`您将看到`\0`角色。

2.  mongo shell 在遇到`\0`字符时会截断显示，因此您什么也看不到。

3.  PHP 的 JSON 编码器将`\0`字符编码为“\u0000”。

# java - 使用 MySQL 到 netbeans 的 jdbc 连接错误。错误信息 出现异常！com.mysql.jdbc.Driver

> ID：11044094
> 
> 赞同：0
> 
> 时间：2012-06-15T03:02:37.370
> 
> 标签：java, mysql

使用 MySQL 将我的 java 项目连接到数据库时遇到错误。我现在用的是Netbeans 6.8 好像由于驱动错误导致无法访问数据库。所以我的连接代码如下

```
Connection con = null;
            String url = "jdbc:mysql://localhost:3306/mila";
            String db = "";
            String driver = "com.mysql.jdbc.Driver";
            Class.forName(driver);
            con = (Connection) DriverManager.getConnection(url + db, "root", ""); 
```

并且错误消息如下所述

```
Got an exception! 
com.mysql.jdbc.Driver 
```

它指向司机说谎的线。
我已经在其他项目中使用了此代码，但没有问题。我还检查了数据库名称等，但没有问题。

非常感谢您的帮助。谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T03:22:06.003

我会将操作包装在 try/catch 块中并记录有关异常的所有内容（egeprintStackTrace() 等）。值得启用 JDBC 跟踪只是为了看看 DriverManager 说什么......像这样： DriverManager.setLogStream(System.out); 哦，尝试从mysql的命令行登录只是为了检查服务器操作..

# ios - iOS：让应用程序像服务一样运行

> ID：11044095
> 
> 赞同：34
> 
> 时间：2012-06-15T03:02:51.353
> 
> 标签：ios, iphone, ipad, foreground, background-service

在 iOS 中，即使应用程序不再处于前台，我将如何指示操作系统保持我的应用程序运行？

*   [Skype](https://itunes.apple.com/us/app/skype-for-iphone/id304878510?mt=8)
*   [维伯](https://itunes.apple.com/us/app/viber/id382617920?mt=8)
*   [Empatica](https://itunes.apple.com/us/app/empatica-realtime/id702791633?mt=8)
*   [Zenly](https://itunes.apple.com/us/app/zenly-locate-your-friends/id838848566?mt=8)

还有更多的应用程序这样做。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-06-15T03:05:56.463

基本上，iOS 中不存在服务类型应用程序或功能之类的东西。即使是“后台”应用程序（UIBackgroundMode）也不能完全免费运行，并且不受其他操作系统上的服务或守护程序等限制。

这是有关后台执行以及通知和计时器等的情况。

1) 应用程序无法在后台执行，除非：

a) 它要求操作系统有额外的时间来这样做。这是使用 beginBackgroundTaskWithExpirationHandler 完成的。Apple 没有（有意）指定这个额外的时间有多长，但实际上它大约是 10 分钟。

b) 应用程序具有后台模式，模式为 VoIP、音频、位置、报亭。即使它具有这些类型之一，应用程序也无法不受限制地执行。本讨论的其余部分假设应用程序没有后台模式。如果您尝试使用其中一种后台模式来使您的应用能够在后台运行，但您的应用没有合法使用特定功能，那么您的应用将在应用商店提交时被拒绝（即拥有 UIBackgroundMode它必须是：VoIP 应用程序，需要不断更新位置，在后台连续播放音频的能力是一项基本功能，或者是报亭应用程序）。

2）当一个应用程序被暂停时，它不能做任何事情来直接唤醒自己。它以前不能安排一个 NSTimer，它不能使用像 performSelector:afterDelay 这样的东西。等等

应用程序可以再次激活的唯一方法是用户执行某些操作使其激活。用户可以通过以下方式执行此操作：

a) 直接从其图标启动应用程序

b) 启动应用程序以响应应用程序先前在其处于活动状态时安排的本地通知。

c) 启动应用程序以响应服务器发送的远程通知。

d) 其他一些：例如，如果应用程序注册为处理通过 URL 启动，则 URL 启动；或者如果它被注册为能够处理某种类型的内容。

如果本地/远程通知触发时应用程序处于前台，则应用程序直接接收它。

如果在本地/远程通知触发时应用程序当前不在前台，则应用程序不会收到它。通知触发时没有执行任何代码！

只有当用户选择通知时，应用才会激活并且可以执行。

请注意，用户可以为整个设备或仅针对特定应用程序禁用通知，在这种情况下，用户将永远看不到它们。如果在通知即将触发时关闭设备，则它会丢失。

# IOS 7 更新

1）有一些新的后台模式，比如后台获取（但是你仍然不能被操作系统以一种确定的方式唤醒）

2）现在有一个后台推送通知

3) beginBackgroundTaskWithExpirationHandler 时间从 10 分钟减少到 3 分钟左右。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-05T09:00:56.340

现在**iOS7**发生了变化，*现在是测试版*。

来自[Apple 的开发者门户](https://web.archive.org/web/20140124113238/https://developer.apple.com/ios7/)：

> 通过采用 iOS 7 中新的多任务 API，使您的应用程序的内容保持最新。新服务允许您的应用程序在后台更新信息和下载内容，而不会不必要地耗尽电池电量。更新可以在机会性的时间发生，并根据使用情况智能安排，因此您的应用可以在用户需要时在后台更新内容。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-05-07T10:53:09.223

更新到**Swift 5**：

也许不是 OP 的正确答案。但这将帮助您`background task`在应用程序进入后台时启动。并在一段时间后被iOS杀死（*希望在处理完成之后*）。

创建扩展

```
extension Notification.Name {
  @discardableResult
  func observe(using: @escaping (Notification) -> Void) -> NSObjectProtocol {
    return NotificationCenter.default.addObserver(forName: self,
                                                  object: nil,
                                                  queue: OperationQueue.main,
                                                  using: using)
  }
} 
```

声明一个变量

```
fileprivate let backgroundTaskStarter = {
  // TODO: If this doesn't work, switch to willResignActiveNotification.
  UIApplication.didEnterBackgroundNotification.observe() { _ in
    UIApplication.shared.beginBackgroundTask {
      print("endBackgroundTask called by iOS")
    }
  }
}() 
```

在`Filename.swift`'s`init()`方法中，执行以下操作：

```
_ = backgroundTaskStarter 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-05T09:44:27.460

是的，我们可以做到这一点，

创建一个私有字段来跟踪我们的状态：

```
UIBackgroundTaskIdentifier _bgTask; 
```

现在调用这个方法，像服务一样运行你的应用程序

```
if ([[UIDevice currentDevice] respondsToSelector:@selector(isMultitaskingSupported)]) 
{
   _bgTask = UIBackgroundTaskInvalid;
   [[NSNotificationCenter defaultCenter] addObserver:self
selector:@selector(doBackground:)
name:UIApplicationDidEnterBackgroundNotification object:nil];
} 
```

现在创建一个选择器-

```
- (void) doBackground:(NSNotification *)aNotification
{
   UIApplication *app = [UIApplication sharedApplication];

   if ([app respondsToSelector:@selector(beginBackgroundTaskWithExpirationHandler:)])
   {
      _bgTask = [app beginBackgroundTaskWithExpirationHandler:^
      {
         dispatch_async(dispatch_get_main_queue(), ^
         {
            if (_bgTask != UIBackgroundTaskInvalid)
            {
               [app endBackgroundTask:_bgTask];
               _bgTask = UIBackgroundTaskInvalid;
            }
         });
      }];
   }
} 
```

完成任务后，请调用以下代码-

```
UIApplication *app = [UIApplication sharedApplication];
if ([app respondsToSelector:@selector(endBackgroundTask:)]) 
{
   if (_bgTask != UIBackgroundTaskInvalid)
   {
      [app endBackgroundTask:_bgTask];
      _bgTask = UIBackgroundTaskInvalid;
   }
} 
```

# java - 连接到 Xeround 数据库的代理设置

> ID：11044096
> 
> 赞同：2
> 
> 时间：2012-06-15T03:03:21.177
> 
> 标签：java, database, proxy, cloud, xeround

我正在尝试在我的办公室内连接到 Xeround 数据库，但我无法连接它说连接链接错误但是当我尝试从家里连接到它时它工作正常。我无法调试此错误任何人都可以帮助

这是我的连接字符串：

```
 Connection con = DriverManager
    .getConnection("jdbc:mysql://instanceXXXX.db.xeround.com:XXXXX/app4XXXXXX?"
                    + "user=app4XXXXXXXX&password=XXXXXXX"); 
```

如果有的话，我必须使用哪些代理设置？

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T12:40:50.553

它可能是[防火墙](http://en.wikipedia.org/wiki/Firewall_%28computing%29)或阻止您在办公室工作时访问特定端口号的东西。尝试telnet端口看看。您也可以联系 support@xeround.com 寻求进一步帮助。

# url - IIS 7 重定向和重写已停用的域

> ID：11044100
> 
> 赞同：0
> 
> 时间：2012-06-15T03:03:49.290
> 
> 标签：url, redirect, iis-7, rewrite

我有一个与另一家公司合并的公司的旧域，他们希望停用旧站点并将流量重定向到新域。OldCompany.com 现在将指向 NewCompany.com。但是，为了保持他们的 SEO 排名，我们还希望将 OldCompany.com 域中的页面映射到 NewCompany.com 上的相应页面。

我知道可以在 IIS 中设置 Rewrite Maps（我已经这样做了），但是如果 OldCompany 域现在指向 NewCompany Web 服务器，但站点本身没有迁移，我仍然可以在结合重定向将 OldCompany.com/about.html 指向 NewCompany.com/subDirectory/about.aspx?? 我是否需要设置这些页面才能完成此操作？如果没有来自原始站点的页面，重写规则是否有效？

现在我可以通过在 IIS 中创建一个新站点并使用 HTTP 重定向来为整个 OldCompany.com 域设置一个 HTTP 重定向。我真正想要的是上面概述的更精细的解决方案，这样人们就可以访问他们正在寻找的页面，而不仅仅是新站点的主页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T08:54:00.293

您不应该使用新站点（在应用程序级别）进行重定向。这只会破坏任何现有的传入链接。更好的方法是使用 301 重定向重定向旧域（使用您可能拥有的整个 url 路径和查询字符串）并将所有相关的旧 url 映射到新站点中的 url。

通常它通过多个步骤完成：

*   告诉谷歌网站管理员工具新的域名地址（如果你使用它）
*   创建 IIS 重写规则以将（使用 301）旧域重定向到新域，保留路径和查询字符串信息
*   创建 IIS 重写规则（在您的新站点中）以将任何旧 url 映射到新结构，如果从新结构中找不到确切的页面，则在用户可以前进时使用永久重定向 (301) 或重定向到相同的其他页面。

这将告诉 Google 网址已更改并指向新位置。

# ruby-on-rails - Bundler 找不到 gem "railties" 的兼容版本

> ID：11044103
> 
> 赞同：0
> 
> 时间：2012-06-15T03:04:28.757
> 
> 标签：ruby-on-rails

在我的机器上创建一个 Rails 应用程序并将项目推送到 github，但无法在 Heroku 上部署应用程序。不兼容的问题消失了，但 sqlite 问题仍然存在。我刚刚更新了错误和 gem 文件，如下所示。请帮我！

错误：

```
 An error occurred while installing sqlite3 (1.3.6), and Bundler cannot co
ntinue.
       Make sure that `gem install sqlite3 -v '1.3.6'` succeeds before bundling.

 !
 !     Failed to install gems via Bundler.
 !
 !     Heroku push rejected, failed to compile Ruby/rails app

To git@heroku.com:blazing-mountain-6037.git
 ! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:blazing-mountain-6037.git' 
```

我的宝石文件：

```
source 'https://rubygems.org'

gem 'rails', '3.2.6'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'sqlite3', '1.3.6'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.4'
  gem 'coffee-rails', '~> 3.2.2'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.2.3'
end

gem 'jquery-rails', '2.0.0'

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'debugger'

enter code here 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T03:18:55.077

尝试使用 rails 3.2.6，并在您的开发机器上将 bundler 升级到 1.2.0.pre

# c# - NAudio (.net) 的时域均衡器

> ID：11044104
> 
> 赞同：1
> 
> 时间：2012-06-15T03:04:51.813
> 
> 标签：c#, .net, signal-processing, naudio, equalizer

我正在为我正在从事的开源项目（[iStudio](http://istudio.codeplex.com)）创建一个 6（或更多）频段均衡器。我已经实现了 SkypeFx 均衡器，但它只有 3 段均衡器，但我想要一个更专业的均衡器。因此，我自己使用 Matlab 设计了几个滤波器，并为采样均衡器设计了 6 个 ARMA 滤波器。我当然需要实时过滤输出。因此，我继续为此目的实施微分方程。

```
 private double[] Filter(float[] buffer, SignalFilter filter, float filterWeight, int count)
    {
        double[] y = new double[buffer.Length];
        for (int n = 0; n < count; n++)
        {
            y[n] = 0.0f;
            for (int k = 0; k < filter.B.Count; k++)
            {
                if (n - k >= 0)
                {
                    y[n] = y[n] + filter.B[k] * (double)buffer[n - k];
                }
            }

            for (int k = 1; k < filter.A.Count; k++)
            {
                if (n - k >= 0)
                {
                    y[n] = y[n] - filter.A[k] * y[n - k];
                }
            }
        }

        return y;
    } 
```

这个功能非常简单。在缓冲区中，我存储实时样本，filter 是一个具有 2 个数组的类，其中包含 AR 和 MA 系数。该函数由进程函数调用，该函数仅将缓冲区通过所有可用的过滤器并将结果相加：

```
 public void Process(float[] buffer, int offset, int count)
    {
        List<double[]> filtered = new List<double[]>();

        for (int i = 0; i < _filters.Count - 5; i++)
        {
            filtered.Add(Filter(buffer, _filters[i], Values[i], count));
        }
        for (int i = 0; i < count; i++)
        {
            buffer[i] = 0.0f;
            for (int x = 0; x < filtered.Count; x++)
            {
                buffer[i] += (float)(filtered[x][i] * ((Values[x] + 1) / 2));
            }
        }
    } 
```

代码稍微缩短了一点，但应该足够了。均衡器有点工作，但它有两个问题，第一个是它产生的延迟（可能需要优化）和**声音失真**。每个过滤后的缓冲区之间都有小刘海。

所以我的问题是：**为什么声音会失真以及如何解决？**

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T22:02:57.347

当下一个缓冲区到达并且值超出当前缓冲区的索引时，我自己通过缓存几个值并在等式中使用它们来解决问题（将其他内容添加到过滤器函数中的 IF）。每个过滤器都需要自己的缓存，因此值来自同一个过滤器。

```
 private double[] Filter(float[] buffer, SignalFilter filter, int count, int index)
    {
        double[] y = new double[count];
        for (int n = 0; n < count; n++)
        {
            for (int k = 0; k < filter.B.Count; k++)
            {
                if (n - k >= 0)
                {
                    y[n] = y[n] + filter.B[k] * buffer[n - k];
                }
                else if (_cache.GetRawCache ().Count > 0)
                {
                    double cached =  _cache.GetRawCache ()[_cache.GetRawCache().Count + (n - k)];
                    y[n] = y[n] + filter.B[k] * cached;
                }
            }

            for (int k = 1; k < filter.A.Count; k++)
            {
                if (n - k >= 0)
                {
                    y[n] = y[n] - filter.A[k] * y[n - k];
                }
                else if (_cache.GetCache(index).Count > 0)
                {
                    double cached =  _cache.GetCache(index)[_cache.GetCache(index).Count + (n - k)];
                    y[n] = y[n] - filter.A[k] * cached;
                }
            }
        }

        return y;
    } 
```

# fancybox - FancyBox 2.0 afterClose 事件

> ID：11044105
> 
> 赞同：6
> 
> 时间：2012-06-15T03:04:53.287
> 
> 标签：fancybox, jquery

我有这样的脚本fancybox

```
$.fancybox.open({
                href : '<?= site_url('sell_split/popup_qty/') ?>'+url_param,
                type : 'ajax',
                afterShow: popup_focus_qty,
                afterClose: console.log('test')
            }); 
```

如您所见，有`afterClose`事件。但似乎当我尝试这个脚本时，`afterClose`事件首先发生然后`GET`处理。

![在此处输入图像描述](../Images/ab92336a6a6620d7c453fff1d01cf1ca.png)

这不是我想要的。我想要做的是，`afterClose`如果访客关闭 FancyBox Window，事件就会发生。

这是 FancyBox 插件的错误还是我的代码错误？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-15T06:27:18.120

我自己找到了答案，应该这样写

```
$.fancybox.open({
            href : '<?= site_url('sell_split/popup_qty/') ?>'+url_param,
            type : 'ajax',
            afterShow: popup_focus_qty,
            afterClose: function(){
                console.log('test')
            }                
        }); 
```

# apache2 - 对所有子文件夹使用 IndexIgnore

> ID：11044107
> 
> 赞同：0
> 
> 时间：2012-06-15T03:05:18.180
> 
> 标签：apache2, httpd.conf

我有一个索引“书籍”，其中列出了我域中的一些 html 书籍。
很多时候，html 书籍都有相关的子文件夹。
我想做的是设置一些东西，以便人们只能看到
我看不到的主链接（在大多数情况下是 .html），以找到解决方案（我可能只是在谷歌上搜索错误的问题）如何阻止子目录显示在索引中。

我想这类似于 IndexIgnore 书籍/*/

目前我有这个（在httpd.conf中）；

```
Directory "/var/www/domain/books"  
    Options Indexes
    IndexIgnore *.jpg
/Directory 
```

显然，我需要添加一些内容以使书籍的子目录停止显示，但我不确定该怎么做/如何去做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T08:18:39.583

This should work

```
Options All -Indexes 
```

# excel - 如何在列中找到货币文本并使用 Excel 函数将其乘以我自己的转换率？

> ID：11044109
> 
> 赞同：0
> 
> 时间：2012-06-15T03:06:06.887
> 
> 标签：excel, excel-formula

可以说我在excel中有以下内容

```
 Self determine exchange rate
          A             |         B 
```

1 其他货币 | 2美元
111 欧元
3 英镑 222

D1：1.6 欧元 D2：2.0 英镑

如何使用 excel 函数在 A 列中查找货币文本示例“EUR”，并将我在 D1 列中输入的汇率与 A2 中的整数值相乘？其他货币也一样，如果检测到“POUNDS”而不是“EUR”，它会将 A3 中的整数值乘以 D2 并显示在 B2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T03:27:04.333

您要做的是查找。通常人们使用数据库来完成这样的任务。

如果您在不同的单元格中有货币名称和金额，您可以使用[vlookup 功能](http://office.microsoft.com/en-us/excel-help/vlookup-HP005209335.aspx)在独立的单元格组中查找汇率。然后应该很容易将转换结果放在另一个单元格中。当您将公式应用于相邻单元格时，请记住使用`$`符号来防止 vlookup 调用的参数中的迭代（您有一组具有转换率的固定单元格）。

如果您在一个单元格中同时拥有货币名称和金额，那么强烈建议将它们分开。[使用 GUI](http://support.microsoft.com/kb/214261)或具有[某些功能](http://office.microsoft.com/en-us/excel-help/split-text-among-columns-by-using-functions-HA010102341.aspx)。

# jquery - 如何查找具有一个子元素的元素的所有 id 可见

> ID：11044111
> 
> 赞同：-1
> 
> 时间：2012-06-15T03:06:13.937
> 
> 标签：jquery

如何获取具有 div.collapse 的 div.A 的所有 id 可见，例如：

```
<div class="A">
   <div id="1"></div>
   <div class="collapse"></div>
</div>
<div class="A">
   <div id="2"></div>
   <div class="collapse" style="display:none"></div>
</div>
<div class="A">
   <div id="3"></div>
   <div class="collapse"></div>
</div> 
```

我应该得到 id 1 和 3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T03:11:55.677

可能不是最简洁的方式，但

```
$('div.A div.collapse:visible').siblings('div').each(function(){
    console.log($(this).attr('id'));
}); 
```

适用于您发布的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T03:18:29.853

尝试：

```
$('div.A div.collapse:visible').siblings('div').each(function() {
    console.log($(this).attr('id'))
})​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/L62UP/)**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T03:30:55.813

$("div.A > div:first-child ~ .collapse:visible");

工作[小提琴](http://jsfiddle.net/dfygrvty/xQdz5/)

这将选择（div.A 的第一个孩子）具有 .collapse:visible 的兄弟姐妹。jsfiddle 在 div 中抛出一些文本。

# .htaccess - 如何将具有匹配关键字的所有网址重定向到一个网址？

> ID：11044115
> 
> 赞同：3
> 
> 时间：2012-06-15T03:07:26.560
> 
> 标签：.htaccess, url, redirect, match, keyword

无论链接中的位置如何，我都需要将所有具有匹配关键字的 url 重定向到同一站点上的一个 url。

例子：

带“书”字的链接

www.domain.com/bookloves.php

www.domain.com/booksforall.php

www.domain.com/bestbooksonamazon.php

www.domain.com/somethingaboutbooks.php

被重定向到同一域上的一个 url，

www.domain.com/books.php

目前，我专注于

```
RewriteEngine On
RewriteRule ^.*book.*$ /books.php [L,QSA] 
```

但它不工作。我测试了相同的表达式

```
^.*book.*$ 
```

在[http://tools.netshiftmedia.com/regexlibrary/](http://tools.netshiftmedia.com/regexlibrary/)上的测试器中它可以工作，但在 .htaccess 中它不起作用。我在这里阅读了各种答案，并从其他示例中学到了很多东西，但我找不到任何适合我的案例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T04:33:36.100

确保在您的虚拟主机配置中将 AllowOverride 设置为 All 并且启用了 mod_rewrite 后，请尝试以下操作：

```
RewriteEngine on
RewriteBase /
RewriteRule book books.php [L,QSA] 
```

# java - 存储文件跳过字符

> ID：11044117
> 
> 赞同：0
> 
> 时间：2012-06-15T03:08:09.477
> 
> 标签：java, file-io

在一个文件中，我从文件开头跳过了几个字符

```
InputStreamReader isr = new FileInputStream(fis);
isr.skip(skipNumberOfCharacter); 
```

我可以像这样将剩余的字符存储在 BufferString 中：

```
while ((ch = isr.read()) != -1) {
                sb.append((char) ch);
            } 
```

但我想存储从 InputStreamReader 跳过的字符。假设这些是我的文件的内容：

**12345678910**

我跳过了前 5 个字符，所以我想在我的 StringBuilder 对象中保存**12345 。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T03:12:50.283

您可以读取两个缓冲区，例如：

```
int byteCount = 0;
int skipMark = 5;
while ((ch = isr.read()) != -1) {
   if(byteCount < skipMark)
      skipBuffer.append(ch);
   else
      sb.append((char) ch);
   byteCount++;
} 
```

# python - Pynotify 不工作 Jython

> ID：11044122
> 
> 赞同：1
> 
> 时间：2012-06-15T03:09:29.943
> 
> 标签：python, oracle, jython, pynotify

我正在尝试构建一个连接到 Oracle 数据库并显示通知的 Python 应用程序。现在循环，一切正常，但访问 Oracle 数据库似乎是不可能的。

我研究并发现有两种方法可以通过 Python 连接到 Oracle。如果我们使用本机 python，我们必须使用 Oracle 即时客户端。我想忽略这条路径并使用下一条。另一种方法是使用 jython 并使用 Oracle JDBC 驱动程序访问 Oracle。

我设法将 Oracle JDBC 导入到 jython

```
import sys
sys.path.append('ojdbc6.jar')
from oracle.jdbc.driver import OracleDriver
from java.sql import DriverManager 
```

现在当我尝试导入 Pynotify 时出现问题。

```
import sys, pynotify 
```

错误

```
[pos@IT-05 ~]$ ./r.py
Traceback (innermost last):
  File "./r.py", line 3, in ?
ImportError: no module named pynotify 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T03:14:15.387

Jython 没有 pynotify。您需要使用[java-gnome](http://java-gnome.sourceforge.net/)的[`org.gnome.notify`](http://java-gnome.sourceforge.net/doc/api/4.1/org/gnome/notify/package-summary.html).

# android - Android ndk-gdb 错误

> ID：11044125
> 
> 赞同：0
> 
> 时间：2012-06-15T03:09:55.403
> 
> 标签：android, android-ndk

我使用 android-sdk-r12m-r17m-linux.zip 和 android-ndk-r8-linux-x86.tar.bz2 来编译我的 android apk。

我的编译步骤是：

```
 android update project -p . --target 2
   ndk-build APP_ABI=mips
   ant debug 
```

输出 apk 在我的 mips 平台上运行良好。但是，在我尝试 ndk-gdb 之后，我收到以下错误。

```
 ERROR: The device does not support the application's targetted CPU ABIs!
   Device supports:  mips
   Package supports: armeabi 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T03:44:00.640

`ndk-gdb``APP_ABI`从`Application.mk`文件中读取。因为您`APP_ABI`在命令行上传递并且您可能有空`Application.mk`文件，所以它假定`APP_ABI`具有默认值 armeabi。

尝试创建`Application.mk`文件并在里面写入`APP_ABI := mips`

# java - 用泛型错误覆盖方法

> ID：11044128
> 
> 赞同：1
> 
> 时间：2012-06-15T03:10:45.167
> 
> 标签：java, generics, overriding

我试图覆盖 add() 但它不会编译

```
public class AVLTree<E extends Comparable<E>> extends BinaryTree {  
BinaryNode<E> theTree;
    @Override
    public void add (E toInsert)
    {
        if (theTree == null)
    add(toInsert, theTree);     
    }

public class BinaryTree<E extends Comparable<E>> implements Iterable<E> {   
    public void add(E toInsert) { .... } 
```

错误信息

java:36: 错误: 名称冲突: AVLTree 中的 add(E#1) 和 BinaryTree 中的 add(E#2) 具有相同的擦除，但都没有覆盖其他公共 void add (E toInsert) ^ 其中 E#1,E #2 是类型变量： E#1 扩展了在类 AVLTree 中声明的 Comparable E#2 扩展了在类 BinaryTree 中声明的 Comparable

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T03:19:54.353

根据我的评论，`BinaryTree`当`AVLTree`.

```
class BinaryTree<E extends Comparable<E>> implements Iterable<E> {   
    public void add(E toInsert) {
        // ...
    }

    public Iterator<E> iterator() {
        return null;
    }
}

class AVLTree<F extends Comparable<F>> extends BinaryTree<F> {  
    BinaryNode<F> theTree;
    @Override
    public void add (F toInsert)
    {
        // ...     
    }
} 
```

[http://ideone.com/dGqd8](http://ideone.com/dGqd8)

# ios - 如何让应用程序在测试设备上运行

> ID：11044133
> 
> 赞同：1
> 
> 时间：2012-06-15T03:12:36.733
> 
> 标签：ios, iphone, xcode

我目前正在尝试让我的应用程序在我的 iPhone 4 上运行。我在管理器中显示了绿点，并且包标识符设置正确。我的测试设备已链接并插入 Xcode，并且苹果开发者网站的配置文件中的所有内容都已正确设置。当我在我的测试设备上运行我的应用程序时，Xcode 会传递一条消息说“构建成功”，但我的测试设备上什么也没有出现。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T04:03:35.267

项目、方案和目标名称的问题。这一切都必须相同。尝试重命名为同名

“AppName”和“Appname”不正确。必须是“AppName”和“AppName”，或者“Appname”和“Appname”。

如果这对您有帮助，请单击答案处的接受按钮

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T04:13:31.437

确保您在 xcode 中的项目和目标中的代码签名标识中是否正确提供了配置文件名称

# php - 在 PHP 正则表达式中转义反斜杠 [ \ ] 的正确方法？

> ID：11044136
> 
> 赞同：36
> 
> 时间：2012-06-15T03:13:22.920
> 
> 标签：php, regex

只是出于好奇，我试图找出在 PHP 正则表达式模式中使用反斜杠的正确方法，如下所示：

**测试 01：（3 个反斜杠）**

```
$pattern = "/^[\\\]{1,}$/";
$string = '\\';

// ----- RETURNS A MATCH ----- 
```

**测试 02：（4 个反斜杠）**

```
$pattern = "/^[\\\\]{1,}$/";
$string = '\\';

// ----- ALSO RETURNS A MATCH ----- 
```

根据下面的文章，4 应该是正确的方法，但让我感到困惑的是两个测试都返回了一个匹配项。如果两者都是正确的，那么 4 是首选方式吗？

**资源：**

*   [http://www.developwebsites.net/match-backslash-preg_match-php/](http://www.developwebsites.net/match-backslash-preg_match-php/)
*   [无法用正则表达式转义反斜杠？](https://stackoverflow.com/questions/4025482/cant-escape-the-backslash-with-regex)

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-03-12T18:59:21.353

```
// PHP 5.4.1

// Either three or four \ can be used to match a '\'.
echo preg_match( '/\\\/', '\\' );        // 1
echo preg_match( '/\\\\/', '\\' );       // 1

// Match two backslashes `\\`.
echo preg_match( '/\\\\\\/', '\\\\' );   // Warning: No ending delimiter '/' found
echo preg_match( '/\\\\\\\/', '\\\\' );  // 1
echo preg_match( '/\\\\\\\\/', '\\\\' ); // 1

// Match one backslash using a character class.
echo preg_match( '/[\\]/', '\\' );       // 0
echo preg_match( '/[\\\]/', '\\' );      // 1  
echo preg_match( '/[\\\\]/', '\\' );     // 1 
```

当使用三个反斜杠匹配 a`'\'`时，下面的模式被解释为匹配 a`'\'`后跟一个`'s'`。

```
echo preg_match( '/\\\\s/', '\\ ' );    // 0  
echo preg_match( '/\\\\s/', '\\s' );    // 1 
```

当使用四个反斜杠匹配 a`'\'`时，下面的模式被解释为匹配 a`'\'`后跟一个空格字符。

```
echo preg_match( '/\\\\\s/', '\\ ' );   // 1
echo preg_match( '/\\\\\s/', '\\s' );   // 0 
```

如果在字符类中也是如此。

```
echo preg_match( '/[\\\\s]/', ' ' );   // 0 
echo preg_match( '/[\\\\\s]/', ' ' );  // 1 
```

*将字符串用双引号而不是单引号括起来不会影响上述结果。*

**结论：**
无论是在括号字符类的内部还是外部，文字反斜杠都可以仅使用三个反斜杠匹配，`'\\\'`除非模式中的下一个字符也是反斜杠，在这种情况下，文字反斜杠必须使用四个反斜杠匹配。

**建议：**在寻求匹配反斜杠时，
始终在正则表达式模式中使用四个反斜杠。`'\\\\'`

[转义序列](http://www.php.net/manual/en/regexp.reference.escape.php)。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-07-30T19:33:22.787

为避免这种不清楚的代码，您可以使用**\x5c** 像这样:)

```
echo preg_replace( '/\x5c\w+\.php$/i', '<b>${0}</b>', __FILE__ ); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-15T03:16:31.163

问题是，您使用的是字符类，`[]`因此无论嵌入多少文字反斜杠，它都将被视为单个反斜杠。

例如以下两个正则表达式：

```
/[a]/
/[aa]/ 
```

就正则表达式引擎而言，所有意图和目的都是相同的。字符类采用字符列表并“折叠”它们以匹配单个字符，按照“对于当前正在考虑的字符，它是否是列在`[]`? 中的任何字符”。如果您在课程中列出两个反斜杠，那么它将是“字符是黑斜杠还是反斜杠？”。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-01-20T16:58:59.887

我几年前研究过这个。那是因为第一个反斜杠逃脱了第二个反斜杠，它们一起形成了模式中的“真正的反斜杠”字符，而这个真正的反斜杠逃脱了第三个反斜杠。所以它神奇地使 3 个反斜杠起作用。

但是，通常的建议是使用 4 个反斜杠而不是模棱两可的 3 个反斜杠。

如果我有任何错误，请随时纠正我。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-12-05T23:38:36.840

答案[https://stackoverflow.com/a/15369828/2311074](https://stackoverflow.com/a/15369828/2311074)非常具有说明性，但是如果您不知道 PHP 字符串中反斜杠的核心问题，您将根本无法理解。

PHP 字符串中反斜杠的核心问题在[https://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.single](https://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.single)有解释，可能要注意最后两句：

> 指定字符串的最简单方法是将其括在单引号中（字符 '）。
> 
> 要指定文字单引号，请使用反斜杠 () 对其进行转义。**要指定文字反斜杠，请将其加倍 (\)。所有其他反斜杠实例将被视为文字反斜杠**

所以简而言之，字符串中的两个反斜杠代表一个文字反斜杠。后面不跟 a 的单个反斜杠`'`也表示文字反斜杠。

这有点奇怪，但它意味着一个字符串`'\\xxx'`并且`'\xxx'`都代表同一个字符串**\xxx**。
请注意，这`'\\'xxx'`是一个无效的字符串，而`'\'xxx'`代表字符串**'xxx**。

我想它源于此：如果你想要一个文字单引号，你需要用反斜杠转义它。所以`'hi\''`代表字符串**hi'**。但是现在您最终会遇到您可能想要创建字符串**hi\**但`'hi\'`不再起作用的情况（像这样没有结尾的无效字符串`'`）。因此，需要一个额外的转义来防止特殊含义。`\`因此，一个确定的`\`转义`\`和**hi\**可以写为 `'hi\\'`。

这就是为什么与(都表示**\\**`'\\\'` )相同的原因，对于这两个字符串，你使用什么都无关紧要。`'\\\\'`

 **然而，它有一个令人惊讶的效果，如果你把琴弦加倍，它们就不一样了。这是因为用单引号括起来的 3 个反斜杠代表 2 个文字反斜杠。但是用单引号括起来的 6 个反斜杠仅代表 3 个文字反斜杠。而用单引号括起来的 4 个反斜杠表示 2 个文字反斜杠，而用单引号括起来的 8 个反斜杠表示 4 个文字（参见 MikeM 的示例）。因此，建议始终使用 4 而不是 3。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-16T17:18:55.303

您还可以使用以下

```
$regexp = <<<EOR
schemaLocation\s*=\s*["'](.*?)["']
EOR;
preg_match_all("/".$regexp."/", $xml, $matches);
print_r($matches); 
```

关键词：dochere，nowdoc**

# ruby-on-rails-3 - 设置嵌套表单中关联记录的数量限制

> ID：11044137
> 
> 赞同：0
> 
> 时间：2012-06-15T03:13:56.773
> 
> 标签：ruby-on-rails-3

我有一个具有以下结构的嵌套表单：

*   列表
    *   项目

我在列表模型中运行验证，以确保每个列表最多只有十个项目。

```
validate :max_stack_items

def max_stack_items
  if items.size > 10
    errors[:base] << "Stack cannot have more than 10 items"
end 
```

这在 90% 的情况下都可以正常工作。我实现了一项功能，因此您可以删除列表表单中的列表项，如下所示：

```
<%= f.hidden_field :_destroy %>
<%= link_to "remove item", '#', class: "remove_fields" %> 
```

我有一些相关的 javascript 可以实现这一点（对于这个问题并不重要）。

假设我已经有 10 个列表项，我要去编辑表单。如果我通过单击“删除项目”链接删除其中一个列表项并添加一个新列表项。验证失败，因为它认为有超过 10 个列表项。换句话说，它没有意识到我已经删除了一个列表项并同时添加了另一个（因此仍然只有 10 个列表项）。

**如何获得验证以考虑我同时删除的列表项记录？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T03:37:18.073

```
def max_stack_items
  if restaurants.reject(&:marked_for_destruction?).size > 10
    errors[:base] << "Stack cannot have more than 10 items"
  end
end 
```

此解决方案考虑了在验证期间标记为销毁的项目。

# sql-server-2008 - 将 guid 作为 CSV 字符串传递的存储过程

> ID：11044138
> 
> 赞同：1
> 
> 时间：2012-06-15T03:14:04.780
> 
> 标签：sql-server-2008, tsql, stored-procedures

存储过程的调用

```
exec spBatchRequestsForRescreening @GuidList='''A2C4B17A-57A7-49A9-97A0-0000070D92F3'',''945FA383-17D4-4CCB-B8FD-00000A40E2DC''' 
```

失败并显示“从字符串转换为唯一标识符时转换失败。”

存储过程

```
ALTER PROC [dbo].[spBatchRequestsForRescreening] (@GuidList varchar(8000) )
AS BEGIN
    select *
    from DeniedPartyTransactions.dbo.DpsRequest
    with (nolock)
    where C1_PK in ( @GuidList )
END 
```

下面的陈述有效。有没有办法用单引号对 Guid 的 CSV 进行宏替换。

```
select * from DpsRequest
where c1_PK in ( 'A2C4B17A-57A7-49A9-97A0-0000070D92F3','945FA383-17D4-4CCB-B8FD-00000A40E2DC' ) 
```

更新：

下面确实有效。也许有更好的东西？

```
ALTER PROC [dbo].[spBatchRequestsForRescreening] (@GuidList varchar(7000) )
AS BEGIN
    DECLARE @SQL varchar(8000)
    SET @SQL = 
    'select *
    from DeniedPartyTransactions.dbo.DpsRequest
    with (nolock)
    where C1_PK in (' +  @GuidList + ')' ;
    EXEC(@SQL)    
END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T03:51:01.953

创建拆分函数：

```
CREATE FUNCTION dbo.SplitGUIDs(@List NVARCHAR(MAX))
RETURNS TABLE
AS
   RETURN ( SELECT Item = CONVERT(UNIQUEIDENTIFIER, Item) FROM
       ( SELECT Item = x.i.value('(./text())[1]', 'nvarchar(max)')
         FROM ( SELECT [XML] = CONVERT(XML, '<i>'
         + REPLACE(@List, ',', '</i><i>') + '</i>').query('.')
           ) AS a CROSS APPLY [XML].nodes('i') AS x(i) ) AS y
       WHERE Item IS NOT NULL
   );
GO 
```

然后你可以这样改变你的程序：

```
ALTER PROCEDURE [dbo].[spBatchRequestsForRescreening] 
    @GuidList varchar(8000)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT d.* -- probably meant to list specific columns
      FROM dbo.DeniedPartyTransactions AS d
      INNER JOIN dbo.SplitStrings(@GuidList) AS s
      ON d.C1_PK = s.Item;
END
GO 
```

（您不必包含所有额外的单引号。）

您还可以考虑使用表值参数，您可以在我的答案中看到一个示例：

[存储过程中 EXISTS 子句的参数](https://stackoverflow.com/questions/10744245/parameters-to-the-exists-clause-in-a-stored-procedure/)

# php - php代码导致页面无法加载

> ID：11044139
> 
> 赞同：0
> 
> 时间：2012-06-15T03:14:09.627
> 
> 标签：php, html, login

我正在尝试将我的网站的简单登录与 php 集成。我在这里找到了一个脚本[http://www.phpfreecode.com/php-Login-system.htm](http://www.phpfreecode.com/php-Login-system.htm)一切都设置好了，但是这个 php 代码导致页面根本无法加载

```
<?php
 if (isset($_COOKIE['user'])) {
 echo "You are logged in: $_COOKIE['user'] Enjoy.";
 } else{ 
 echo "You are not logged in. <a href='register.php'>Register here</a>";
 ?> 
```

我收到服务器错误“该网站在检索（我的网站）时遇到错误它可能因维护而关闭或配置不正确”我在我的服务器上配置了 php，我知道这一点，因为我有其他在网站上工作的 php 文件。我究竟做错了什么？如果有人知道更好的登录系统，我也愿意征求建议。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T03:27:21.893

您提供的这段代码的错误是 $_COOKIE 数组没有被大括号分隔或从字符串中断开。

```
<?php
if (isset($_COOKIE['user'])) {
    echo "You are logged in: {$_COOKIE['user']} Enjoy.";
} else{
    echo "You are not logged in. <a href='register.php'>Register here</a>";
}
?> 
```

或者更好：

```
<?php
if (isset($_COOKIE['user'])) {
    echo "You are logged in: ".htmlentities($_COOKIE['user'])." Enjoy.";
} else{
    echo "You are not logged in. <a href='register.php'>Register here</a>";
}
?> 
```

此外，该脚本易受 sql 注入用户名的影响：`whatever' OR 'X'='X`& 正在使用即将弃用的 mysql_* 函数。

# c++ - 有没有办法使用函数返回值使用 std::fill() ，并且该函数需要一个等于容器索引的输入？

> ID：11044142
> 
> 赞同：3
> 
> 时间：2012-06-15T03:14:31.163
> 
> 标签：c++, stl

IE

```
int ToBeFilled[10];
int GenerateSomething(int x);
for(int i = 0; i < 10; ++i) ToBeFilled[i] = GenerateSomething(i); 
```

如何使用 std::fill() 来做到这一点？

```
std::fill(ToBeFilled, ToBeFilled + sizeof(ToBeFilled), GenerateSomething(/*How to do?*/)); 
```

////
更新：

`GenerateSomething(i)`实际上是一个返回指针的函数调用，例如`pObj->GetIt(i)`. 通常我只需要一个特定的指针，所以我会像使用它一样使用它`pObj->GetIt(0)`，但在某些情况下我需要获取所有指针，这样就会出现一个循环。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T03:55:53.057

还有另一种稍有不同（仅限 C++11）的方法：

```
using std::begin;
using std::end;

std::iota(begin(toBeFilled), end(toBeFilled), 0);

std::transform(begin(toBeFilled), end(toBeFilled), 
               begin(toBeFilled), GenerateSomething); 
```

如果您正在处理大量数据，这可能会出现问题（它对缓存不友好），但是对于您正在处理的小容器，这根本不是问题。

编辑：当然，如果你想避免这种情况，你可以写一个带有仿函数的iota（就像它们可能应该包含在标准中一样）：

首先是一个小标题，我称之为“numericx”：

```
#ifndef NUMERICX_H_INC_
#define NUMERICX_H_INC_
namespace stdx { 
template <class FwdIter, class T, class Func>
void iota(FwdIter b, FwdIter e, T start_val, Func f) { 
    while (b != e)
        *b++ = f(start_val++);
}
}
#endif 
```

[请注意，对于非平凡的迭代器和/或 T，在单独的语句中用前增量替换后增量可能会更好]。

然后使用它的（现在微不足道的）代码：

```
#include "numericx"

stdx::iota(begin(toBeFilled), end(toBeFilled), 0, GenerateSomething); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T03:23:30.207

```
struct Filler {
    int real_;
    int &index_;
    Filler() : real_(0), index_(real_) {}

    int operator()() {
        return GenerateSomething(index_++);
    }
};

std::generate(ToBeFilled, ToBeFilled + 10, Filler()); 
```

由于 Mark B 的评论而编辑。`generate`使用（由我编写）的版本进行测试，该版本*确实*为每次迭代制作了函数对象的副本：

```
template <typename It, typename F>
void generate(It start, It finish, F func)
{
   for(;start != finish;++start)
   {
      F generator = func;
      *start = generator();
   }
} 
```

# .net - 使用 cygwin 部署 .net 应用程序

> ID：11044143
> 
> 赞同：0
> 
> 时间：2012-06-15T03:14:38.403
> 
> 标签：.net, cygwin, portability

我需要使用 cygwin (readelf) 的命令之一。我在我的 .net c# 控制台应用程序上使用该命令。我将如何部署我的应用程序，以便用户轻松安装它。我不希望用户必须安装 cygwin 才能使用我的程序。也许我可以执行静默安装，甚至更好地使用 cygwin 库并从我的代码中调用它们。我不知道这是否可行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T19:21:09.650

如果您正在部署一个依赖于 cygwin 的应用程序，那可能是因为您需要它的功能，而不是 cygwin 提供的类似 linux 的终端。要获得 readadele 功能，可以从此[链接](http://sourceforge.net/projects/mingw/files/MinGW/Base/binutils/binutils-2.22/binutils-2.22-1-mingw32-bin.tar.lzma/)下载。要使用它，只需传递您将在 linux 上使用的相同参数。如果您对使用其他 linux 命令感兴趣，您应该尝试[其他](http://www.cyberciti.biz/faq/unix-command-line-utilities-for-windows/).

# batch-file - 使用批处理文件将前 6 行复制到新的 txt 文件

> ID：11044146
> 
> 赞同：1
> 
> 时间：2012-06-15T03:16:03.127
> 
> 标签：batch-file, copy, lines

我尝试了十几种不同的方法，但都无法做到。

我在不同的文件夹中有很多文本文件，所以我想将输入文件作为变量引用，例如：*.txt（只需使用与 bat 文件位于同一文件夹中的任何 txt 文件）。

我需要复制前 6 行并将它们粘贴到一个新的 txt 文件中。
我想命名它（但不是必需的） SAMPLE_original_txt_file_name

例如：

```
Input = text01.txt
Output = SAMPLE_text01.txt (this would contain the first 6 complete lines from text01.txt) 
```

我会很感激任何帮助，因为我的头现在需要缝合，以免将它撞到墙上太多......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T06:02:48.257

以下对我有用：

```
@ECHO OFF
IF "%~1" == "" (ECHO Usage: %~nx0 filemask& GOTO :EOF)
FOR /F "delims=" %%I IN ('DIR /B %1') DO (
  <"%%I" (
    FOR /L %%I IN (1,1,6) DO (
      SET line=
      SET /P line=
      SETLOCAL EnableDelayedExpansion
      ECHO(!line!
      ENDLOCAL
    )
  ) >"%%~dpISAMPLE_%%~nxI"
) 
```

上面的脚本需要一个参数，它是一个文件掩码，例如`*.txt`. 它还支持使用（现有）路径完成的掩码。无论是否指定路径，输出示例文件都会在与原始文件相同的目录中创建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T04:11:08.073

```
@echo off
set count=0
for /f "tokens=*" %%i in (text01.txt) do (
call :counter %%i
)
goto :eof
:counter
rem echo count is %count%
set /a count+=1
if %count% lss 7 echo %* >> SAMPLE_text01.txt
GOTO :eof 
```

# javascript - 带有远程 index.html 的应用程序中的 Phonegap 资产下载器

> ID：11044150
> 
> 赞同：0
> 
> 时间：2012-06-15T03:16:39.493
> 
> 标签：javascript, image, cordova, download

我有一个 phonegap 应用程序，它在通话中使用远程 url，`loadUrl`我试图找出一种方法将图像下载到设备并在应用程序中显示它们。

我的下载器工作正常，将图像存储在 file:///mnt/sdcard/.myapp，但我不知道如何从那里显示它们。我怀疑权限问题。我尝试将文件协议样式 url 用于图像元素和背景图像；都没有工作。我也尝试过使用base64字符串，但是图像比较大而且数量很多，所以真的很慢......

有人对如何使这项工作有任何聪明的想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T04:37:54.350

我不确定你是如何从 HTML 中引用它的，但我有类似的情况，我下载的图像存储在 sdcard 中，我使用以下方式显示它们。

还要确保您的手机处于`Charge only`模式，而不是`Disk drive`模式。

直接`img`标签

```
<img src="file:///mnt/sdcard/.myapp/1335801699503.png" width="100px" height="100px"> 
```

作为 CSS 属性

```
<div style="background: url(file:///mnt/sdcard/.myapp/1335801699503.png) no-repeat; width: 200px; height: 200px;">
</div> 
```

# javascript - 正则表达式在字符串中查找字符串

> ID：11044159
> 
> 赞同：0
> 
> 时间：2012-06-15T03:19:20.820
> 
> 标签：javascript, regex

我有这样的字符串：

```
<input name="my_name" id="my_id" value="my_value" class="my_class" /> 
```

我想找到“id”中的内容，即“my_id”。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T03:21:58.073

你可以用这样一个简单的jquery函数来做到这一点

```
var currentId = $(".my_class").attr('id'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T03:29:19.183

如果这就是您所需要的，请不要加载完整的 DOM 操作库。

如果你有一个字符串，你可以把它变成一个 DOM 元素，并获取`id`属性。

```
var my_string = '<input name="my_name" id="my_id" value="my_value" class="my_class" />';

var div = document.createElement('div');
div.innerHTML = my_string;

var id = div.firstChild.id; 
```

* * *

或者只是使用正则表达式...

```
var my_string = '<input name="my_name" id="my_id" value="my_value" class="my_class" />';

var id = /id\s*=\s*"([^"]+)"/.exec(my_string);

if (id) id = id[1]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T03:36:25.437

如果您绝对必须使用正则表达式来解析 HTML 元素属性，那么下面的 JavaScript 片段应该可以解决问题。

```
var regex = /id="([^"]+)"/
var string = '<input name="my_name" id="my_id" value="my_value" class="my_class" />';
var matches = string.match(regex);

var id_val = matches && matches[1]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T14:41:59.060

如果您只想使用字符串而不是 DOM 模型来执行此操作，请使用。

```
function TextBetween (str,first,second) {
    if (str==null) {
        alert("Unexpected page formatting, please reload.");
        return "";
    }
    var x = str.indexOf(first) + first.length;
    var z = str.substr(x);
    var y = z.indexOf(second);
    return z.substr(z,y);

    }

var inputString = '<input name="my_name" id="my_id" value="my_value" class="my_class" />';
var id = TextBetween(inputString,'id="','"'); 
```

否则，其他人已经指出了解决问题的方法。

# android - 使用 AdMob 强制关闭；为 android 2.2 开发

> ID：11044161
> 
> 赞同：0
> 
> 时间：2012-06-15T03:19:33.877
> 
> 标签：android, admob

在过去的两天里，我一直在尝试将 Admob 广告实施到为 Android 2.2 及更高版本开发的应用程序中。我已经在网上搜索并尝试了我找到的所有答案，但仍然没有。我遵循了 admob 网站上的所有说明，并尝试了 java（发布在下面）和 xml 版本。每次我使用 xml 时，都会收到错误消息“无法实例化 com.google.ads.AdView”。我已经尝试过修复，但它仍然崩溃。到目前为止，我已将“minSdkVersion”更改为 8（用于在 2.2 上开发），并将“目标”更改为 android=14，这是 AdMob sdk 所需的。任何帮助将非常感激！

**菜单类**

```
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.LinearLayout;

import com.google.ads.AdRequest;
import com.google.ads.AdSize;
import com.google.ads.AdView;

public class Menu extends Activity{

Button start, HTP;
private AdView adView;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    start = (Button) findViewById(R.id.bStart);
    HTP = (Button) findViewById(R.id.bHTP);

    start.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent myIntent = new Intent(Menu.this,
                    MyGameActivity.class);
            Menu.this.startActivity(myIntent);
            }
        });

    HTP.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent myIntent = new Intent(Menu.this,
                    HowToPlay.class);
            Menu.this.startActivity(myIntent);
        }
    });

    // Create the adView
    adView = new AdView(this, AdSize.BANNER, "publisher id in quotes");

    // Lookup your LinearLayout assuming it’s been given
    // the attribute android:id="@+id/mainLayout"
    LinearLayout layout = (LinearLayout)findViewById(R.id.mainLayout);

    // Add the adView to it
    layout.addView(adView);

    // Initiate a generic request to load it with an ad
    adView.loadAd(new AdRequest());
  }

  @Override
  public void onDestroy() {
    if (adView != null) {
      adView.destroy();
    }
    super.onDestroy();
  }

} 
```

**显现**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.tacomaapps.game"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="8" /> 

<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>

<application
    android:icon="@drawable/ic_game"
    android:label="Cube Jump" >
    <activity
        android:name=".Splash"
        android:label="Cube Jump"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
        android:screenOrientation="landscape" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity
        android:name=".Menu"
        android:label="Cube Jump"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
        android:screenOrientation="landscape" >
        <intent-filter>
            <action android:name="com.tacomaapps.MENU" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>

    <activity
        android:name=".MyGameActivity"
        android:label="Cube Jump"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
        android:screenOrientation="landscape" >
    </activity>

    <activity
        android:name=".HowToPlay"
        android:label="Cube Jump"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
        android:screenOrientation="landscape" >
    </activity>
    <activity android:name="com.google.ads.AdActivity"
          android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"/>        
</application> 
```

**主.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:id="@+id/mainLayout"
android:layout_height="match_parent"
android:background="@drawable/menuback"
android:baselineAligned="true"
android:orientation="horizontal" >

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_marginTop="210dp"
    android:layout_weight="1.0"
    android:weightSum="100" >

    <Button
        android:id="@+id/bFillSpace"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="45"
        android:visibility="invisible"
        android:text="Button" />

    <Button
        android:id="@+id/bStart"
        android:layout_width="150dp"
        android:layout_height="63dp"
        android:layout_margin="5dp"
        android:layout_weight="5"
        android:background="@drawable/play" />

    <Button
        android:id="@+id/bHTP"
        android:layout_width="150dp"
        android:layout_height="63dp"
        android:layout_margin="5dp"
        android:layout_weight="5"
        android:background="@drawable/htp_button" />

    <Button
        android:id="@+id/bFillSpace2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="45"
        android:visibility="invisible"
        android:text="Button" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T03:23:36.043

[您是否添加了此处](https://developers.google.com/mobile-ads-sdk/docs/android/fundamentals)提到的 jar 文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T04:42:14.937

您的代码非常好，可以在我的最后运行。

我希望您验证以下内容。

1**您在项目中创建了“libs”文件夹，并在那里添加了 GoogleAdMobAdsSdk-XXXjar**并从那里引用它。默认情况下，它们不存在。**如果您直接从 \extras\google\admob_ads_sdk 引用 jar 文件，则程序会因** `java.lang.NoClassDefFoundError: com.google.ads.AdView`Strange 但真实而崩溃。

你的项目结构应该是这样的

![在此处输入图像描述](../Images/469b9248769ebb3058191fd982ad9704.png)

# string - 未声明的标识符：Memo1?

> ID：11044163
> 
> 赞同：0
> 
> 时间：2012-06-15T03:19:59.037
> 
> 标签：string, delphi

> **可能重复：**
> [未声明的标识符：字符串变量](https://stackoverflow.com/questions/11043392/undeclared-identifier-string-variable)

使用此类错误消息：[Error] Unit1.pas(51): Undeclared identifier: 'Memo1'

你能帮忙吗。

我的代码；

```
type
 ....
  private

  public

  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

procedure SaveStringToRegistry_LOCAL_MACHINE( sKey, sItem, sVal : string );
var
  reg : TRegIniFile;
begin
  reg := TRegIniFile.Create('');
  reg.RootKey := HKEY_LOCAL_MACHINE;
  reg.WriteString( sKey, sItem, sVal + #0 );
  reg.Free;
end;

procedure SetTCPIPDNSAddresses(sIPs : String);
begin
  SaveStringToRegistry_LOCAL_MACHINE(
  'SYSTEM\CurrentControlSet\Services\Tcpip\Parameters\Interfaces\' +
    memo1.text, 'NameServer', sIPs);

end;

procedure TForm1.Button3Click(Sender: TObject);
 begin
  Get_AdaptersInfo( memo1.lines );
 end;

procedure TForm1.Button1Click(Sender: TObject);
 begin
 SetTCPIPDNSAddresses(Edit1.text+','+ Edit2.Text);
 end;

end. 
```

我正在寻找一种方法..我该怎么做？我知道少许英文。对不起。如何清除错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T05:29:32.700

假设您的表单上有 memo1 。adf 表格 1\. 在 settcpipdnsaddresses 过程中的 memo1 引用前面。

# c# - 最简单的拖延方法

> ID：11044167
> 
> 赞同：1
> 
> 时间：2012-06-15T03:20:45.713
> 
> 标签：c#, .net

在函数内部延迟而不延迟主线程的最简单/最简单的方法是什么？
这就是我想要做的与此类似：

```
 private void FallingToggle(bool a)
    {
        a = true;
        Thread.Sleep(1000);
        a = false;
    } 
```

但我发现它冻结了整个程序。
有没有解决的办法？还是有更简单的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T04:12:16.730

回应您的评论，有很多方法可以实现您尝试做的事情。

一种方法是记录动作第一次发生的时间（这可以使用 来实现[`DateTime.Now`](http://msdn.microsoft.com/en-us/library/system.datetime.now.aspx)）。然后，如果在记录时间的一秒内发生任何后续动作，则立即返回。例子：

```
DateTime lastActionTime = DateTime.Now;

// ...

if ((DateTime.Now - lastActionTime).Milliseconds < 1000)
{
    // Too soon to execute the action again
    return;
}

// Do whatever the action does... 
```

如果您想禁用按钮一秒钟，另一种方法是使用 a [`Timer`](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx)（.NET Framework 中有几个计时器，我在这里使用的是 Winforms 版本）。一旦动作发生，您禁用按钮或其他 UI 元素，然后`Timer`以一秒的时间间隔启动一个。计时器关闭后，您可以重新启用 UI 元素，允许用户再次执行操作。例子：

```
// In a constructor or something
timer = new System.Windows.Forms.Timer();
timer.Interval = 1000; // 1000 milliseconds
timer.Tick += (s, e) => 
{
    button.Enabled = true;
    timer.Stop();
};

// ...

void OnButtonClick()
{
    button.Enable = false;
    timer.Start();

    // Do whatever the button does...
} 
```

后者是您将在 GUI 中使用的内容，前者可以用于类似游戏的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T04:11:19.480

这是方法..

在函数调用事件之后`a = true;`启动一个新线程。并放

```
Thread.Sleep(1000);
    a = false; 
```

在新线程中。

我认为这是最简单的方法。

# php - PHP：sqlsrv_fetch_array() 返回 false

> ID：11044170
> 
> 赞同：0
> 
> 时间：2012-06-15T03:21:41.347
> 
> 标签：php, sql-server

我遇到了一个奇怪的问题，它`sqlsrv_query()`返回一个有效的语句资源，但`sqlsrv_fetch_array()`随后返回 false。我在 MS SQL Server Management Studio 中测试了我的查询 ( `$q`)，所以我知道它返回的结果具有一定数量的行。我的代码是...

```
$r = @sqlsrv_query($dbcMssql, $q, array(), array('Scrollable'=>'static'));    // works
$rowCount = sqlsrv_num_rows($r);    // this shows there are correct number of rows
$row = sqlsrv_fetch_array($r, SQLSRV_FETCH_ASSOC);    // $row is FALSE 
```

我在另一个 MSSQL 数据库上使用了相同的代码，它工作没有任何问题。此 MSSQL DB 的唯一区别是它使用 BIGINT 作为其主键，并且某些列名不同（这并不重要）。

我究竟做错了什么？

更新：

虽然`$stmt`不是假的，但我还是查看了错误，它给了我

```
 [0] => IMSSP
        [SQLSTATE] => IMSSP
        [1] => -35
        [code] => -35
        [2] => Invalid type
        [message] => Invalid type 
```

IMSSP 让我相信，根据文档`http://php.net/manual/en/function.sqlsrv-errors.php`，是我的 SQL for PHP 2.0 驱动程序导致了问题。我看到 PHP 3.0 的 SQL 已经发布。这可能是我想的问题.. 因为我尝试查询的数据库是 MSSQL 的更新版本（2008 年？与 2005 年），而不是我以前使用的数据库，没有任何问题。但是，这个驱动程序只用 VC9 编译（2.0 可用于两者），而我的 PHP 5.3 是用 VC6 编译的。所以它不会加载。这是否意味着我需要使用源代码重新编译它或使用 VC9 版本重新安装 PHP？

我不知道如何重新编译，所以我想重新安装 VC9 版本的 PHP 5.3 是我现在要走的路。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T07:58:09.873

您的查询可能有问题。您可以使用 检索错误消息`sqlsrv_errors()`，例如：

```
$stmt = sqlsrv_query($tsql);
if ($stmt === false) {
    die(print_r(sqlsrv_errors(), true));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-01T09:22:55.643

当查询返回 PDO 无法处理的列类型时，会发生此错误“无效类型”。例如，当您尝试

```
SELECT default_value FROM sys.parameters 
```

因为该列是 sql_variant 类型。如果有意义，不如将该列转换为 varchar 或其他内容，或者从查询中删除它。

# sql-server - 错误：对象不支持此属性或方法

> ID：11044176
> 
> 赞同：1
> 
> 时间：2012-06-15T03:22:42.797
> 
> 标签：sql-server, asp-classic, webmatrix

我正在使用**WebMatrix 2.0 RC**进行开发并且喜欢它。我确定数据库设置正确，但出现此错误：

> Microsoft VBScript 运行时
> 
> 错误“800a01b6”
> 
> 对象不支持此属性或方法：'id'
> 
> /myfile.asp，第 24 行

**我的文件.ASP**

```
<%@ Language="VBScript" %>
<%
    set db = Server.Createobject("ADODB.Connection")
    db.open "Provider=Microsoft.SQLSERVER.CE.OLEDB.4.0;Data Source=" & server.mappath("/App_Data/databasefile.sdf")
%>

<%
set grs = Server.CreateObject("ADODB.recordset")
grs.Open "SELECT * FROM gells", db
do until grs.EOF
    for each x in grs.Fields
        response.write("<table style='margin-bottom:8px;'><tr><td style='vertical-align:top; padding-top:4px;'><img src='gells/uploads/gelthumbs/" & x.id & "_gelthumb.jpg' style='border:1px solid #FFFFFF;' /></td><td style='vertical-align:top; padding-left:4px; text-align:justify;'><strong>" & x.title & "</strong><br />" & x.info & "</td></tr><tr><td colspan='2' style='text-align:right; padding-top:4px;'><a href='gells.php?gelsid=" & x.id & "' ><img src='gells/viewgell.png' style='border:none;' /></a></td></tr></table>")
    next
    grs.MoveNext
loop
grs.close
%> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T07:55:27.833

您代码中的`x`变量将是一个 Field 对象。字段对象没有`id`属性，因此出现错误。我怀疑`id`,`title`并且`info`实际上是您要使用的字段的名称。因此，您的代码应如下所示：

```
grs.Open "SELECT id, title, info FROM gells", db  
do until grs.EOF  
    response.write "<table style='margin-bottom:8px;'><tr><td style='vertical-align:top; padding-top:4px;'><img src='gells/uploads/gelthumbs/" _
        & Server.URLEncode(grs("id")) _
        & "_gelthumb.jpg' style='border:1px solid #FFFFFF;' /></td><td style='vertical-align:top; padding-left:4px; text-align:justify;'><strong>" _
        & Server.HTMLEncode(grs("title")) _
        & "</strong><br />" & Server.HTMLEncode(grs("info")) _
        & "</td></tr><tr><td colspan='2' style='text-align:right; padding-top:4px;'><a href='gells.php?gelsid=" _
        & Server.URLEncode(grs("id")) _
        & "' ><img src='gells/viewgell.png' style='border:none;' /></a></td></tr></table>"
    grs.MoveNext  
loop  
grs.close 
```

请注意，SQL 仅包含您需要的字段，也绝不会直接从数据库发送未编码的数据。

# c# - 我的程序无缘无故地从一行跳到另一行（C#）

> ID：11044182
> 
> 赞同：1
> 
> 时间：2012-06-15T03:23:12.103
> 
> 标签：c#, recursion

我正在尝试验证 ID。

我`ManejadorTickets`在其中调用了这个类-除其他外-我调用了验证ID的方法（ID是Cedula，类似于美国的SSN）。

```
 public void venderTicket ()
    {
        // more code...

        Console.Write("\nCedula: ");
        string cedula = Validador.validarCedula(Console.ReadLine().Trim());

        // more code...
    } 
```

这是我`validarCedula`在`Validador`课堂上的方法。

```
public static String validarCedula (string cedula)
        {
            // Limpiar la entrada de caracteres extraños
            cedula = cedula.Replace("-", "");
            cedula = cedula.Replace(" ", "");

            // Debe tener 11 caracteres
            if (cedula.Length != 11)
            {
                Impresor.imprimirOpExitosa(cedula.Length.ToString());
                Impresor.imprimirError("La cedula debe tener 11 digitos", "Cedula: ");
                validarCedula(Console.ReadLine().Trim());
            }

            // Todos los caracteres deben ser numeros
            char[] arrayLetras = cedula.ToCharArray();
            foreach (char c in arrayLetras)
            {
                if (NUMEROS.IndexOf(c) == -1)
                {
                    Impresor.imprimirError("Todos los caracteres deben ser numericos." +
                                            " Los guiones o espacios no se toman en cuenta.", "Cedula: ");
                    validarCedula(Console.ReadLine().Trim());

                }
            }

            return cedula;
        } 
```

上述方法消除了输入中的连字符和空格。还要检查输入是否正好有 11 个字符以及所有字符是否都是数字。

注意：NUMBERS 是我在课程开始时声明的常量 `private const string NUMEROS = "0123456789";`

但是当我运行程序时，输入一个错误的值作为`Cedula`（测试我的验证方法），例如“foo”，它会发生应该发生的事情（再次询问该值）。到目前为止一切顺利，现在当我输入正确的值，例如 00114905656（所有数字和 11 位数字）时，它再次要求输入一个值，这不应该发生，因为最后输入的值是正确的。

我尝试调试我的应用程序，我看到该方法按应有的方式执行，但是当编译器执行语句`return cedula;`（方法中的最后一句）**时，它会跳转到** `validarCedula(Console.ReadLine().Trim());` **语句**中的第一个`if (cedula.Length != 11)`语句。我不明白为什么会这样。当`return`执行该方法时，该方法应该完成。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T03:31:02.400

你是`validarCedula`从自身内部呼唤。这称为递归。

尝试从头开始。查看调用堆栈窗口。

我认为您需要对程序进行一些重组。

尝试实现`validarCedula`更多这样的：

```
static bool validarCedula(string cedula) {
   // do your string replace here
   // if it's ok, return true
   // if it's bad, return false.  
   // do not call validarCedula from here!      
} 
```

然后在您的`vendorTicket`函数中执行此操作，因此您仍然可以让它重新提示，直到它通过：

```
string cedula;
bool ok = false;
while (!ok) {
    Console.Write("\nCedula: ");
    cedula = Console.ReadLine().Trim();
    ok = validarCedula(cedula);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T03:38:12.113

我认为您调用函数的想法仍然与过程编程范式不一致。

当你调用一个函数时，你可能仍然认为它是“跳转到那个函数”。然而，真正发生的是它会“跳转到该函数*并在完成后返回*”。跳回是程序回到它离开的地方的部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T03:41:43.893

您的 validarCedula 方法正在被递归调用，因此当它命中`return cedula;`程序控制​​时，它会返回到调用堆栈更下方的上一个调用。

# regex - 考试评分字段的正确正则表达式

> ID：11044185
> 
> 赞同：0
> 
> 时间：2012-06-15T03:23:37.413
> 
> 标签：regex, grails, groovy

我在为我的 grails 应用程序的考试评级字段编写正确的正则表达式时遇到问题。用户应该可以选择输入字母字符或数字。定量评分应在 0-100 之间，接受带或不带百分号 (%) 的小数，但不包括负数。正则表达式应仅允许特殊字符百分比 (%) 和句点 (.)。下面是一组可能的输入：

```
1) 100% (should pass the validation)
2) 100.0 (should pass the validation)
3) PASSED (should pass the validation)
4) FAILED (should pass the validation)
5) 100.1 (should not pass the validation)
6) -90 (should not pass the validation) 
```

您的回答将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T03:38:08.653

我假设语言是**Java**。我还假设您要验证用户输入，***它只***包含**百分比**。

```
"^\\s*((100(\\.0*)?|\\d{1,2}(\\.\\d*)?|\\.\\d+)%?|PASSED|FAILED)\\s*$" 
```

（在 Groovy 中，您不必转义反斜杠）

```
/^\s*((100(\.0*)?|\d{1,2}(\.\d*)?|\.\d+)%?|PASSED|FAILED)\s*$/ (for Groovy) 
```

上面的正则表达式**只会**验证 0.0 到 100.0 之间的数字。它允许小数点后的任意长位数，并且还允许通过`.8`或等情况`45.`，因为它们可以被处理。正则表达式还允许在输入之前和之后（但不是内部）有任意数量的空格。

**编辑**

要匹配纯文本 (ASCII)：

```
"^\\s*((100(\\.0*)?|\\d{1,2}(\\.\\d*)?|\\.\\d+)%?|[a-zA-Z.]+)\\s*$"

/^\s*((100(\.0*)?|\d{1,2}(\.\d*)?|\.\d+)%?|[a-zA-Z.]+)\s*$/ (for Groovy) 
```

这将匹配使用英文字母字符（不区分大小写）和全句点的文本。例如`sdhSDFHS.sfSDJF.sdfSDJFI`将匹配上面的正则表达式。请注意，当前的正则表达式不允许文本中包含空格，但如果要添加更多字符，请在方括号内添加（字符类）`[a-zA-Z.]`：. 查看[文档](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html)以获取更多详细信息。

**测试代码**（Java）

```
String arr[] = {"100%", "  .435%", "3%", "0%", "0", ".0", "hdfjs.", "  PASSED", "FAILED", "34.5  ", "sdhf.sdfdsf.fsdf  ", " 100.0000 ", "-234.4", "-0.1", "34.", "100.0000001", "1000"};
for (String s: arr) 
    System.out.println(s + " " + (s.matches("^\\s*((100(\\.0*)?|\\d{1,2}(\\.\\d*)?|\\.\\d+)%?|[a-zA-Z.]+)\\s*$") ? "matched" : "not matched")); 
```

**输出**

```
100% matched
  .435% matched
3% matched
0% matched
0 matched
.0 matched
hdfjs. matched
  PASSED matched
FAILED matched
34.5   matched
sdhf.sdfdsf.fsdf   matched
 100.0000  matched
-234.4 not matched
-0.1 not matched
34\. matched
100.0000001 not matched
1000 not matched 
```

**编辑2**

讨论中提到的要求更改：仅匹配从 1.0 到 100.0 的百分比：

```
/^\s*((100(\.0*)?|[1-9]\d?(\.\d*)?)%?|[a-zA-Z.]+)\s*$/ (for Groovy) 
```

这个条件比以前更严格，因为`01.1`不会匹配。如果你想匹配这种情况：

```
/^\s*(0*((100(\.0*)?|[1-9]\d?(\.\d*)?)%?)|[a-zA-Z.]+)\s*$/ (for Groovy) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T03:32:12.333

100.1 没有意义。但是，对于其余部分，您可以使用[它](http://regexr.com?318tv)：

```
^\d+\)\s*(PASSED|FAILED|0*(100(\.0+)?|[0-9]{1,2}(\.\d+)?)%?)$ 
```

# google-app-engine - 已达到 Google App Engine 前端实例小时数限制

> ID：11044186
> 
> 赞同：14
> 
> 时间：2012-06-15T03:23:47.703
> 
> 标签：google-app-engine

我有一个使用 Google App Engine 免费选项托管的静态 html 网站。我没有任何流量可言，因为它是新网站，只有流量是我自己访问该网站。

我注意到，只有 15 个主页请求，我消耗的前端实例小时数为 5%。以这个速度，我的网站每天只能为 300 位访问者提供服务。

我想知道达到前端实例小时数限制时会发生什么？我的网站会变得对公众不可用吗？我在某处读到静态内容由不同的服务器提供服务，并且应该仍然提供服务，只要您不超出带宽限制。这是真的？

如何减少前端实例小时数？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-15T17:41:50.063

只是为你澄清一点。您认为每个请求消耗了您免费配额的 0.05/15。这是你的根本错误。每个请求都将由您的应用程序实例提供服务。您可以免费获得 28 个实例小时。每次发送请求时，如果没有实例处于活动状态，则会启动一个实例，并且它将消耗此配额的 15 分钟——即使它只服务一个请求。但是，如果您的应用程序高效，那么这个实例可以在 15 分钟内处理数千个请求。如果您的应用程序效率低下，或者您的流量很大，那么您最终会一次运行多个实例。如果您始终有 4 个实例始终在运行，则每 15 分钟将消耗 1 小时的实例配额，因此您的站点将在 6 小时后变得不可用。如前所述，这是您开始使用最小/最大空闲实例的时候——您可以为更少的实例权衡响应时间。在示例中，假设您调整 Min/Max Idle 并让您的应用程序的响应时间增加，但这样做会将活动实例的数量从 4 个减少到 1 个。然后您可以让站点保持完整 24 小时.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-15T03:51:00.193

如果没有实例正在运行，则请求将导致实例启动。实例在提供最后一个请求后会保持 15 分钟。

因此，理论上，您可以每 15 分钟发出一次请求，每天总共 96 个请求，并使用 24 小时的实例时间，每天 28 个免费实例小时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T04:16:28.037

您可以更改 Max Idle Instances 和 Min Pending Latency 设置以减少创建多个实例。为您的内容设置过期时间。（[链接](http://www.learningtechnicalstuff.com/2011/01/static-resources-and-cache-busting-on.html)）

# ios - 从一个视图中删除一个视图并将其添加到另一个视图中

> ID：11044189
> 
> 赞同：6
> 
> 时间：2012-06-15T03:24:31.480
> 
> 标签：ios, objective-c, uiview, addsubview

我正在尝试查找笔尖中的所有视图并将它们添加到我的内容视图中。

这就是我所拥有的，它成功地从 self.view 中删除了视图，但它没有将它添加到 self.contentView

```
for (UIView *view in self.view.subviews) {
    if (view.tag != 666) {
        [view removeFromSuperview];
        [self.contentView addSubview:view];
    }
} 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-08T14:51:57.600

您的代码中的问题是，当您调用`removeFromSuperview`视图时，父视图将释放该视图。无需调用`removeFromSuperview`，只需将其添加为另一个视图的子视图即可将其从当前父视图中删除。

所以使用：

```
for (UIView *view in self.view.subviews)
{
    if (view.tag != 666)
    {
        [self.contentView addSubview:view];
    }
} 
```

根据[UIView 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIView_Class/UIView/UIView.html)：

> **添加子视图**：
> 
> 将视图添加到接收者的子视图列表的末尾。
> 
> `- (void)addSubview:(UIView *)view`
> 
> **参数**
> 
> *看法*
> 
> ```
> The view to be added. This view is retained by the receiver. After being added, this view appears on top of any other subviews. 
> ```
> 
> *讨论*
> 
> 此方法保留视图并将其下一个响应者设置为接收者，这是它的新超级视图。
> 
> **视图只能有一个超级视图。如果视图已经有一个超级视图并且该视图不是接收者，则此方法会在将接收者设为新的超级视图之前删除先前的超级视图**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-08T17:23:09.787

当您从中删除视图时`superView`，它将`release`从`memory`. 所以在你的情况下，你需要这样做：

```
UINib *infoNib = [UINib nibWithNibName:@"YourXIBFileName" bundle:nil];

NSArray *topLevelObjects = [infoNib instantiateWithOwner:self options:nil];

UIView *infoView = [topLevelObjects objectAtIndex:0];
for (UIView *view in infoView.subviews) {
        [self.contentView addSubview:view];
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T05:50:16.830

```
 for (UIView *v in innerMainView.subviews)
    {
        [v removeFromSuperview];
    }   
    [innerMainView addSubview:StandardView]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T09:27:55.983

您可以将指定的视图设置为属性，也可以将视图添加到内容视图中，然后再将其从超级视图中删除。我不确定当你删除视图时，如果视图的保留计数减少到 0，它会调用超级视图来释放它。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-15T03:46:47.757

检查错误。您最好打印这些视图的框架（self.view、self.contentView）。并使它们具有不同的颜色。然后你可以看到错误。祝你好运！

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-06-15T03:34:09.837

我不确定这是否可行，但请尝试切换`[view removeFromSuperview];`和`[self.contentView addSubview:view];`. 这是因为根据[`UIView`Class Reference](http://developer.apple.com/library/ios/documentation/uikit/reference/UIView_Class/UIView_Class.pdf)，`removeFromSuperview`导致 superview 释放视图。

希望这可以帮助！

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-06-15T05:23:41.057

`contentView`不属于 的财产`UIVew`。它属于[UITableViewCell](http://developer.apple.com/library/ios/documentation/uikit/reference/UITableViewCell_Class/UITableViewCell_Class.pdf)的属性。它返回单元格对象的内容视图。

# css - HTML5/CSS：根据页面大小的变化更新布局？

> ID：11044190
> 
> 赞同：2
> 
> 时间：2012-06-15T03:24:47.370
> 
> 标签：css, html, layout, responsive-design

谁能给我指出一个关于响应式网页设计的好教程/指南？

我非常熟悉基础知识，但这是我特别要寻找的：我看到响应式网页不仅会在调整浏览器窗口大小时“流畅地”调整自己（这种响应式设计我非常熟悉并且可以轻松设置）。相反，他们所做的是保持原来的（也就是最大的）布局，直到浏览器窗口达到某个较小的尺寸，然后页面捕捉到不同的布局，完美地适应浏览器窗口的较小尺寸。此更改不仅包括布局，还包括可见项目的数量以及激活其他 UI 元素以使在较小窗口中的导航更容易。

想象一下扑克牌在窗口中并排放置。让我们假设当窗口处于全屏模式时 5 张卡片彼此相邻。现在想象窗口的尺寸减小了。布局保持不变，直到第一张和最后一张卡片几乎超出可见区域。当窗口达到那个大小时，页面“捕捉”到不同的布局，现在只在中心显示 3 张卡片，左右边缘出现箭头，表示用户可以滚动到更多卡片。这种响应式设计是如何完成的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T03:30:25.597

您描述的对齐行为是通过使用媒体查询为不同的屏幕尺寸定义不同的样式来实现的。

例如：

```
@media screen and (min-width: 480px) {
    .nav {
        float: none;
    }
}

@media screen and (min-width: 620px) { 
    .nav {
        float: left;
    }
} 
```

[这是开始](http://www.alistapart.com/articles/responsive-web-design/)学习它的好地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T21:11:33.753

要添加到第一个绝对正确的答案，您还可以查看 html5 样板。它有一个非常好的 CSS 启动器，用于进行响应式设计。它对我帮助很大，嘿，如果有人已经写过，再写也没有意义！

我通常去[http://www.initializr.com/](http://www.initializr.com/)并从那里获取响应式模板。

# bash - 分解为数组

> ID：11044192
> 
> 赞同：0
> 
> 时间：2012-06-15T03:25:11.707
> 
> 标签：bash, shell, replace, explode

我把这个 shell 脚本放在一起做两件事：

1.  更改数据文件中的分隔符（在这种情况下，将“::”更改为“,”）
2.  选择我想要的列并将它们附加到一个新文件中

它有效，但我想要一个更好的方法来做到这一点。我特别想找到一种将每一行分解成数组的替代方法。使用命令行参数似乎不是要走的路。欢迎任何评论。

```
 # Takes :: separated file as 1st parameters
    SOURCE=$1

    # create csv target file
    TARGET=${SOURCE/dat/csv}
    touch $TARGET

    echo #userId,itemId > $TARGET

    IFS=","
    while read LINE
    do
        # Replaces all matches of :: with a ,
        CSV_LINE=${LINE//::/,}
        set -- $CSV_LINE
        echo "$1,$2" >> $TARGET
    done < $SOURCE 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T11:26:32.943

代替`set`，您可以使用数组：

```
arr=($CSV_LINE)
echo "${arr[0]},${arr[1]}" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T13:57:55.910

以下将打印第 1 列和第 2 列`infile.dat`。替换为您想要的编号列的逗号分隔列表。

```
awk 'BEGIN { IFS='::'; OFS=","; } { print $1, $2 }' infile.dat > infile.csv 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T03:30:32.010

Perl 可能有一个 1 班轮来做到这一点。

awk 也可以很容易地做到这一点。

我的第一反应是 awk 和 sed 的组合：

*   sed 转换分隔符
*   awk 处理特定列

```
cat inputfile | sed -e 's/::/,/g' | awk -F, '{print $1, $2}'
# Or to avoid a UUOC award (and prolong the life of your keyboard by 3 characters
sed -e 's/::/,/g' inputfile | awk -F, '{print $1, $2}' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T12:22:34.833

`awk`确实是适合这里工作的工具，它是一个简单的单线。

```
$ cat test.in
a::b::c
d::e::f
g::h::i
$ awk -F:: -v OFS=, '{$1=$1;print;print $2,$3 >> "altfile"}' test.in
a,b,c
d,e,f
g,h,i
$ cat altfile
b,c
e,f
h,i
$ 
```

# php - PHP数组索引事故

> ID：11044193
> 
> 赞同：2
> 
> 时间：2012-06-15T03:25:23.830
> 
> 标签：php, arrays, null, indexing

抱歉这个时髦的标题，我很难想出一个。首先，我设法真正解决了我的问题（在拆开我的代码之后），但我不知道为什么我的解决方案有效，我试图将其视为一种学习体验。

我有一个从数据库收集信息的类。此类跟踪索引值，以便调用函数一次获取一个结果。所以我的课程代码最初包含......

```
protected $index = NULL;
protected $array = array(stuff);

public function next_item()
{
    if($this->index == NULL)
    {//first time called
        $this->index = 0;
    }
    else
    {
        $this->index++;
    }

    if($this->index < sizeof($this->array))
    {
          return TRUE;
     }
      return FALSE;
 }

 public function get_result()
 {
      return $this->array[$this->index];
  } 
```

调用函数类似于

```
 while($myclass->next_item()){
        echo $myclass->get_result();
 } 
```

当然，这比这要复杂得多，但这是问题代码（你明白了）。这段代码在我的项目中引发了一个无限循环（或出现一个）。我通过将 $index 初始化为 -1 并删除对 null 的条件检查来解决我的问题。所以现在...

```
protected $index = -1;

public function next_item()
{
    $this->index++;

    if($this->index < sizeof($this->array))
    {
          return TRUE;
    }
    return FALSE;
} 
```

我的问题是，为什么这样做有效？我检查过，当它为 NULL 时，数组中从未引用过该索引。它总是在调用 NULL 的条件检查并分配给 0 之后发生。

我真的很感谢你的时间，提前。只是想把它变成一种学习体验，如果我能理解它为什么起作用，而不仅仅是它起作用，那就更好了。

很抱歉，如果这个问题在其他地方得到了回答，我不知道如何标记我的问题（如您所见），更不用说成功找到以前的答案了。

干杯，-大卫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T03:30:34.130

`0 == NULL`您的问题是由PHP 中的事实引起的。因此，当您将索引设置为一次时，您每次调用时都会一遍又一遍地`0`将其设置为，这将始终是正确的。`0``next_item``this->index == NULL`

将您的测试更改为`this->index === NULL`也可以解决您的问题。请参阅[这个问题](https://stackoverflow.com/questions/80646/how-do-the-equality-double-equals-and-identity-triple-equals-comparis)`==`，它涵盖了 PHP和PHP之间的区别`===`。

# java - DataOutputStream 未清空缓冲区

> ID：11044197
> 
> 赞同：0
> 
> 时间：2012-06-15T03:26:17.100
> 
> 标签：java, networking, outputstream

我正在开发服务器/客户端通信程序，但遇到了问题。当我尝试从客户端发送消息时，它将无法正常工作。初始化服务器后，我连接客户端并且成功。当我尝试从客户端发送消息时，服务器不会收到它们。在我关闭客户端连接后，服务器会收到我之前尝试发送的所有消息。以下类是我正在使用的：

```
public class ServerSender extends Thread
{
    private DataOutputStream out = new DataOutputStream(socket.getOutputStream());
    private Scanner kb = new Scanner(System.in);

    public void run()
    {
        while(true)
        {
            try
            {
                out.writeUTF(kb.nextLine());
                out.flush();
            } catch(IOException e) { System.out.println("error"); }
        }
    }
} 
```

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T04:14:52.577

`DataOutputStream`没有*要*刷新的缓冲区，因此您的诊断不正确。但是，您需要注意，`writeUTF()`写入的格式只能`DataInputStream.readUTF()`读取。如果您尝试编写行，那么您的 API 错误：请尝试`BufferedWriter.write()/.newLine()`.

# php - 如何将派生列添加到我的 Yii 模型中？

> ID：11044202
> 
> 赞同：4
> 
> 时间：2012-06-15T03:27:06.953
> 
> 标签：php, activerecord, model, yii, virtual-attribute

在 Yii 中，我需要在我的模型中的任何结果集中添加一个“派生”列。该列实际上并不存在于数据库表中。

例如，假设我有一个`Activity`模型。只有两种类型的活动：（1）收入，或（2）费用。

如果我想添加一个名为`income_total`or的列`expense_total`（取决于正在访问的活动*类型*），我该怎么做？

这是 Ruby on Rails 中模型的一个工作示例`Activity`（我基本上想知道如何做同样的事情，但在 Yii 中）：

```
class Activity < ActiveRecord::Base

  attr_accessible :name, :effective_at, :amount, :category
  scope :incomes,  :conditions => { :category => 'Income'  }
  scope :expenses, :conditions => { :category => 'Expense' }

  def self.incomes_total
    incomes.sum :amount
  end

  def self.expenses_total
    expenses.sum :amount
  end

end 
```

**2012-07-01 更新：**

[Leonardo 提供](https://stackoverflow.com/a/11044571/426935)的答案指向使用[Virtual Attributes](http://www.yiiframework.com/wiki/167/understanding-virtual-attributes-and-get-set-methods/)，这为我从数据库中检索的结果集的每个“行”添加了一个属性。

如果`Activity`模型与 有`BELONGS_TO`关系`Parent`，则父视图可能如下所示：

```
<h2><?php echo $parent->name; ?></h2>
<ul>
  <?php foreach($portfolio->activities as $activity): ?>
    <li>
      <?php echo CHtml::link($activity->name, array('activity/view', 'id' => $activity->id)); ?>
      <?php echo $activity->amount; ?>
      <?php echo $activity->incomes_total; ?>
    </li>
  <?php endforeach; ?>
</ul> 
```

但是，在 foreach() 循环中访问此虚拟属性没有意义。

我想要的这些虚拟属性为整个结果集提供一个“聚合”值，因此我希望能够使用 访问它`$parent->activities->incomes_total`，如下所示：

```
<h2><?php echo $parent->name; ?></h2>
<?php echo $parent->activities->incomes_total; ?>
<ul>
  <?php foreach($portfolio->activities as $activity): ?>
    <li>
      <?php echo CHtml::link($activity->name, array('activity/view', 'id' => $activity->id)); ?>
      <?php echo $activity->amount; ?>
    </li>
  <?php endforeach; ?>
</ul> 
```

我需要在 Activity 模型代码中做什么来实现这一点，或者我应该以不同的方式思考这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T04:24:18.843

我相信它与 Ruby 非常相似。PHP 有魔术方法，在 Yii 中由 CComponent（包括 CActiveRecord 在内的许多基类）实现。

简而言之，您可以在模型中执行此操作

```
 class Activity extends CActiveRecord {
     public function getIncome_Total() {
       // ...
     }
   } 
```

并且，从控制器访问它

```
$activity = Activity::model->findByPk(1);
$income_total = $activity->income_total; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T09:05:04.210

正如我在[另一个答案](https://stackoverflow.com/a/11290308/1362777)中发布的那样，您可以简单地使用统计关系。将父模型中的 STAT 关系指定为

```
'incomes_total'=>array(self::STAT, 'Activity', 'parent_id','select'=>'SUM(amount)','condition'=>"incomes_total.category='Income'") 
```

同样地

```
'expense_total'=>array(self::STAT, 'Activity', 'parent_id','select'=>'SUM(amount)','condition'=>"incomes_total.category='Expense'") 
```

注意：更改属性名称`parent_id`，并`amount`在您的模型中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T06:15:14.573

我不知道如何在模型中做到这一点。

尽管处理更多，但一个选项或解决方法是向`foreach()`视图添加另一个循环，如下所示：

```
$incomes_total = 0;
foreach($parent->activities as $activity)
  $incomes_total += $activity->amount;
echo $incomes_total; 
```

# jquery-mobile - jquery mobile：当我第二次访问页面时，pagecreate 事件触发了两次

> ID：11044207
> 
> 赞同：1
> 
> 时间：2012-06-15T03:27:44.800
> 
> 标签：jquery-mobile

我尝试使用“live”来绑定pagecreate事件，但是当我第二次访问页面pagecreate事件时触发了两次。当我使用“bind”时这是正常的

* * *

```
<div data-role="page" name="logAddPage" id="logAddPage">  
    <script type="text/javascript">
        $("#logAddPage").live("pagecreate",function (){
            alert("pagecreate event fired ...");
        });
    </script>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T04:28:43.353

最好在绑定之前删除任何侦听器。

```
$("#logAddPage").off("pagecreate");
$("#logAddPage").on("pagecreate", function (e) {
    alert("pagecreate event fired ...");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T04:21:43.353

我想你错过了一个括号'（'

试试这样

```
<script type="text/javascript">
    $("#logAddPage").live("pagecreate",function (){
        alert("pagecreate event fired ...");
    });
</script> 
```

# javascript - 追加有效，但删除无效

> ID：11044208
> 
> 赞同：0
> 
> 时间：2012-06-15T03:27:56.590
> 
> 标签：javascript, jquery, html

我使用 append 添加新的 div 但是当我尝试删除时不起作用：/

```
$('#'+ number).append('<div id="descc'+number+' class="backgroundImage" style="font-size:10px; height:13px; color:#fff; background-color:#000;" align="center">'+ descA+'</div>'); 
```

我尝试使用下一行删除 div

```
$('#descc' + i).remove(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T03:30:40.497

您似乎在 append 语句中缺少 id 属性的右引号。

```
$('#'+ number).append('<div id="descc'+number+'" class="backgroundImage" style="font-size:10px; height:13px; color:#fff; background-color:#000;" align="center">'+ descA+'</div>'); 
```

# jquery - 循环.load jquery设置rel

> ID：11044209
> 
> 赞同：0
> 
> 时间：2012-06-15T03:28:18.420
> 
> 标签：jquery

```
var resultValue = $("#"+temp+" .panId").val();
for(var i=0; i<totalPanel;i++) {
    $("#"+temp+" .panelDiv").append('<div class="panelDiv' + resultValue + '"></div>');
    $("#"+temp+" .panelDiv" +resultValue ).load("Panel.html #w", function(){
        $(".panelDiv"+(resultValue-1)+" .txtWidth").attr('rel',resultValue-1);
        $(".panelDiv"+(resultValue-1)+" .txtHeight").attr('rel',resultValue-1);
        $(".panelDiv"+(resultValue-1)+" .btnRemovePanel").attr('rel',resultValue-1);
    });
    resultValue++;
    $("#"+temp+" .panId").val(resultValue);
} 
```

基本上我试图触发加载功能。在触发加载函数后，我想在每个函数中设置一个 rel <- 所以如果我的 for loop loop 5 time rel 将是 1 2 3 4 5 但现在它被设置为 5 5 5 5 5 因为 .loop 回调函数只执行循环完成后，它正在加载。因此我的值 resultValue 是该值的最大值。我如何通过设置 rel 1 2 3 4 5 来解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T04:32:59.377

找到了替代方案

```
$(document).ready(function(){
 $("body").on('change','.txtTotalHeight',function(){
  for(var i=0; i<totalPanel;i++) {
     test();

  }
 }
}
function test(){
var resultValue = $("#"+temp+" .panId").val();

    $("#"+temp+" .panelDiv").append('<div class="panelDiv' + resultValue + '"></div>');
    $("#"+temp+" .panelDiv" +resultValue ).load("Panel.html #w", function(){
        $(".panelDiv"+(resultValue-1)+" .txtWidth").attr('rel',resultValue-1);
        $(".panelDiv"+(resultValue-1)+" .txtHeight").attr('rel',resultValue-1);
        $(".panelDiv"+(resultValue-1)+" .btnRemovePanel").attr('rel',resultValue-1);
    });
    resultValue++;
    $("#"+temp+" .panId").val(resultValue);
} 
```

# java - 数据流或流程图可视化库

> ID：11044210
> 
> 赞同：3
> 
> 时间：2012-06-15T03:28:38.273
> 
> 标签：java, .net, graphics, data-visualization, dataflow-diagram

我有一个应用程序，其中我有一个对象集合，其中每个对象都代表某些东西，每个对象都通过指定目标对象 ID 和该对象要连接到的端口来定义它们如何连接到集合中的其他对象。

这些对象一起代表一个数据流，我正在寻找任何库，用于从我的对象及其关系创建可视化图。如果您熟悉 matlab 和 simulink，这与 matlab simulink 对任何给定的 simulink 对象所做的非常相似，并绘制如下图，这是 simulink 对象图的数据流的可视化。

![在此处输入图像描述](../Images/a3b2c425974024881dc92eed014b0f35.png)

那里有很多图形库，但我想知道是否有人可以向我指出任何**专门针对数据流可视化**的库？

# perl - 不推荐使用哈希作为参考

> ID：11044211
> 
> 赞同：2
> 
> 时间：2012-06-15T03:28:38.887
> 
> 标签：perl, hash

在问这个问题之前我搜索了 SO，我对此完全陌生，不知道如何处理这些错误。我的意思是 Perl 语言。

当我把这个

```
%name->{@id[$#id]} = $temp; 
```

我得到错误`Using a hash as a reference is deprecated`

我试过

```
$name{@id[$#id]} = $temp 
```

但无法得到任何结果。

有什么建议么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-15T04:02:10.823

访问哈希元素的正确方法`%name`是`$name{'key'}`. 该语法`%name->{'key'}`在 Perl v5.6 中有效，但已被弃用。

同样，要访问数组的最后一个元素，`@id`您应该编写`$id[$#id]`，或者更简单地说，`$id[-1]`.

您的第二个变体应该可以正常工作，并且您无法检索该值有一个不相关的原因。

写

```
$name{$id[-1]} = 'test'; 
```

和

```
print $name{$id[-1]}; 
```

将`test`正确显示

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-15T04:26:40.403

```
%name->{...} 
```

一直是越野车。它没有做它应该做的事情。因此，它现在会在您尝试使用它时发出警告。索引哈希的正确方法是

```
$name{...} 
```

正如你已经相信的那样。

* * *

现在，你说

```
$name{@id[$#id]} 
```

不起作用，但如果是这样，那是因为代码中的其他地方有错误。该代码绝对有效

```
>perl -wE"@id = qw( a b c ); %name = ( a=>3, b=>4, c=>5 ); say $name{@id[$#id]};"
Scalar value @id[$#id] better written as $id[$#id] at -e line 1.
5 
```

但是，正如警告所说，索引数组的正确方法不是

```
@id[...] 
```

其实是

```
$id[...] 
```

* * *

最后，获取数组最后一个元素的最简单方法是使用 index `-1`。你的代码应该是

```
$name{ $id[-1] } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-16T21:17:57.520

流行的答案是不取消引用，但这是不正确的。换句话说`%$hash_ref->{$key}`，`%$hash_ref{$key}`并且不可互换。前者需要访问作为元素嵌套在另一个哈希引用中的哈希引用。

对于许多卫星来说，嵌套散列引用是很常见的地方。事实上，有几个模块可以解析数据并将其存储在这种数据结构中。在没有模块更新的情况下立即贬低行为并不是一件好事。有时我的数据被困在嵌套的哈希中，获得它的唯一方法是做类似的事情。

```
$new_hash_ref = $target_hash_ref->{$key1}
$new_hash_ref2 = $target_hash_ref->{$key2}
$new_hash_ref3 = $target_hash_ref->{$key3} 
```

因为我不能

```
foreach my $i(keys(%$target_hash_ref)) {
    foreach(%$target_hash_ref->{$i} {
        #do stuff with $_
    }
} 
```

了。

是的，上面有点奇怪，但是为了避免以某种方式访问​​数据结构而创建新变量更糟糕。我错过了什么吗？

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-06-15T04:16:59.360

如果您想要数组或哈希中的一项，请使用 $。对于项目列表，分别使用 @ 和 %。您使用 @ 作为引用返回了一个列表，而不是 perl 可能解释为哈希的项目。

此代码演示了您对数组哈希的引用。

```
#!/usr/bin perl -w
my %these = ( 'first'=>101,
             'second'=>102,
           );
my @those = qw( first second );
print $these{$those[$#those]}; 
```

打印“102”

# java - eclipse -npe 中的内部编译器错误

> ID：11044213
> 
> 赞同：0
> 
> 时间：2012-06-15T03:29:00.393
> 
> 标签：java, eclipse, compiler-errors

我在编译时突然从 eclipse 中得到这个错误。

```
Internal compiler error: java.lang.NullPointerException at 
 org.eclipse.jdt.internal.compiler.apt.dispatch.AnnotationDiscoveryVisitor.visit(AnnotationDiscoveryVisitor.java:61) 
```

该项目是一个安卓项目。有什么线索吗？不想再重新安装 Eclipse！帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-16T08:20:50.293

有点晚了，但我遇到了同样的问题，也试图找到解决方案。也许它会在未来帮助某人：

问题是 Eclipce 无法编译文件并引发异常。在我的情况下，修复是：

1.  现在移动所有编译的源（buildBin 文件夹）
2.  现在移动所有自定义构建器（.externalToolBuilders）（如果有的话）和所有 .settings 文件夹
3.  重新启动 Eclipse 并让它构建
4.  修复编译问题:)
5.  粘贴所有以前删除的文件（不丢失任何设置\构建器）

# c# - 向 sqlparameter 类添加更多参数

> ID：11044214
> 
> 赞同：2
> 
> 时间：2012-06-15T03:29:18.867
> 
> 标签：c#, sql

我必须调用一个存储过程，但我有更多的参数，有什么简单的方法可以做到这一点吗？或者只是将每个参数添加到 sqlparameter 类？像下面

```
 SqlCommand command = new SqlCommand("inserting", con);
 command.CommandType = CommandType.StoredProcedure;
 command.Parameters.Add(new SqlParameter("@Firstname", SqlDbType.NVarChar).Value = TextBox1.Text; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-15T03:34:00.587

请注意，它`Paramters.Add`具有接受字符串和 DbType 的[重载](http://msdn.microsoft.com/en-us/library/wbys3e9s.aspx)，因此您不必调用 Parameter 构造函数。您可以替换当前使用的行来添加新参数：

```
command.Parameters.Add(new SqlParameter("@Firstname", SqlDbType.NVarChar)).Value = TextBox1.Text; 
```

使用以下较短（但功能等效）的行：

```
command.Parameters.Add("@Firstname", SqlDbType.NVarChar).Value = TextBox1.Text; 
```

**如果要添加更多参数**，只需将它们添加到命令的[参数](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.parameters.aspx)属性中，如下所示：

```
SqlCommand command = new SqlCommand("inserting", con);
command.CommandType = CommandType.StoredProcedure;
command.Parameters.Add("@Firstname", SqlDbType.NVarChar).Value = TextBox1.Text;
command.Parameters.Add("@Lastname", SqlDbType.NVarChar).Value = TextBox2.Text; 
```

除此之外，您是否尝试过使用[Parameters.AddWithValue](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparametercollection.addwithvalue.aspx)？如果列的数据类型映射到 C# 中值的类型，则可以使用它。[您可以在此处](http://msdn.microsoft.com/en-us/library/ms131092.aspx)找到 C# 到 SQL Server 数据类型的映射。

你会像这样使用它：

```
// Assume your sproc has a parameter named @Age that is a SqlInt32 type
int age = 5;
// Since age is a C# int (Int32), AddWithValue will automatically set
// the DbType of our new paramter to SqlInt32.
command.Parameters.AddWithValue("@Age", 5); 
```

如果你需要指定SqlDbType，AddWithValue返回你刚刚添加的参数，所以就像在最后添加一个额外的语句来设置[DbType属性](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparameter.dbtype.aspx)一样简单，虽然此时你最好使用原始的.Add功能和设置值。

```
command.Parameters.AddWithValue("@Firstname", TextBox1.Text).DbType = SqlDbType.NVarChar; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-15T05:15:28.667

使用 SqlParameter 类型的数组并将其插入 SqlCommand

```
SqlCommand Comm = new SqlCommand("Command text", new SqlConnection("Connection String");
SqlParameter[] param = {new SqlParameter("@Name","Value"), 
                        new SqlParameter("@Name","Value"),
                        ........
                        };
Comm.Parameters.AddRange(param); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T05:21:26.843

只需`command.Parameters.Add`多次调用该方法：

```
 SqlCommand command = new SqlCommand("inserting", con);
 command.CommandType = CommandType.StoredProcedure;

 command.Parameters.Add("@Firstname", SqlDbType.NVarChar, 100).Value = TextBox1.Text;
 command.Parameters.Add("@Lastname", SqlDbType.NVarChar, 100).Value = TextBox2.Text;
 command.Parameters.Add("@City", SqlDbType.NVarChar, 100).Value = TextBox3.Text;
 command.Parameters.Add("@ID", SqlDbType.Int).Value = Convert.ToInt32(TextBox4.Text);
 ....... and so on ..... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-07-10T21:42:42.593

你可以用喜欢

```
return new SqlParameter[]
            {
                new SqlParameter("@Firstname", SqlDbType.VarChar)
                {
                    Value = Firstname.Text
                },
                new SqlParameter("@Lastname", SqlDbType.VarChar)
                {
                    Value = Lastname.Text
                },
            }; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T03:43:12.267

您可以使用[dapper-dot-net](http://code.google.com/p/dapper-dot-net/)

示例代码：

```
var dog = connection.Query<Dog>("select Age = @Age, Id = @Id", new { Age = (int?)null, Id = guid }); 
```

插入示例：

```
connection.Execute(@"insert MyTable(colA, colB) values (@a, @b)",
    new[] { new { a=1, b=1 }, new { a=2, b=2 }, new { a=3, b=3 } }
  ).IsEqualTo(3); // 3 rows inserted: "1,1", "2,2" and "3,3" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-10T07:22:35.070

已`command.Parameters.Add`弃用。而是使用`command.Parameters.AddWithValue`. 为此，您会为每个参数多次调用它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-09-09T10:17:34.557

```
 // Mention size of the nvarchar column   , here i give 500 , you can use its length for @Firstname as you mention in database according to your database 

   SqlCommand command = new SqlCommand("inserting", con);
 command.CommandType = CommandType.StoredProcedure;
 command.Parameters.Add(new SqlParameter("@Firstname", SqlDbType.NVarChar,500).Value = TextBox1.Text; 
```

# c - 如何用 VBO 绘制三角形？

> ID：11044216
> 
> 赞同：1
> 
> 时间：2012-06-15T03:29:22.853
> 
> 标签：c, windows, opengl, vbo

我试图让我的 VBO 绘图，但我什么也看不到。我正在尝试绘制一个三角形（在我看来，一个三角形是朝着正确方向的良好开端）。一切都编译并运行而不会中断。

```
void initGraphics(int width, int height) {
    glViewport(0, 0, width, height);
    glEnable(GL_TEXTURE_2D);
    glEnable(GL_BLEND);
    glDisable(GL_DEPTH_TEST);
    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
    glClearColor(1.0, 1.0, 1.0, 1.0);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    gluOrtho2D(0.0, width, height, 0.0);
    glMatrixMode(GL_MODELVIEW);
}

GLuint vboId;

void initVbo(void) {
    GLsizei dataSize;
    GLfloat* vertices;
    int vCount = 3;

    dataSize = sizeof(GLfloat) * 3 * vCount;

    vertices = (GLfloat*)malloc(dataSize);

    vertices[0] = 0;
    vertices[1] = 0;
    vertices[2] = 0;

    vertices[3] = 100;
    vertices[4] = 0;
    vertices[5] = 0;

    vertices[6] = 100;
    vertices[7] = 100;
    vertices[8] = 0;

    glewInit();

    glGenBuffersARB(1, &vboId);

    glBindBufferARB(GL_ARRAY_BUFFER_ARB, vboId);

    glBufferDataARB(GL_ARRAY_BUFFER_ARB, dataSize, vertices, GL_STATIC_DRAW_ARB);

    free(vertices);

    //glDeleteBuffersARB(1, &vboId); // edit #1
}

unsigned int indices[] = { 0, 1, 2 }; // edit #3

void drawVbo(void) {

    glClear(GL_COLOR_BUFFER_BIT);
    glClearColor(1.0, 1.0, 1.0, 1.0);

    glBindBufferARB(GL_ARRAY_BUFFER_ARB, vboId);

    glEnableClientState(GL_VERTEX_ARRAY);
    glVertexPointer(3, GL_FLOAT, 0, 0);
//edit #1, #2
    glDrawElements(GL_TRIANGLES, 3 /*1*/, /*GL_UNSIGNED_BYTE*/ GL_UNSIGNED_INT, &indices);

    glDisableClientState(GL_VERTEX_ARRAY);

    glBindBufferARB(GL_ARRAY_BUFFER_ARB, 0); 
} 
```

这些是被调用的函数。我在 Windows 上运行，我避免发布一堆与 Windows 相关的代码......

**编辑#1**

修改了代码以反映 genpfault 的建议。

**编辑#2**

修改了代码以反映 Nicol Bolas 的建议。

**评论 #1**

以下代码有效（只是为了证明投影设置正确）：

```
glBegin(GL_TRIANGLES);
glVertex3f(0.0, 0.0, 0.0);
glVertex3f(100.0, 0.0, 0.0);
glVertex3f(100.0, 100.0, 0.0);
glEnd(); 
```

**编辑#3**

修改了代码以反映 Nicol Bolas 的建议。

**更新#1**

修改后的代码现在可以工作了。虽然我很好奇如何让 glDrawArrays 正常工作......我的实现看起来像：

```
glDrawArrays(GL_TRIANGLES, 0, 0); 
```

这对我来说似乎不对，但[规范](http://www.opengl.org/sdk/docs/man/xhtml/glDrawArrays.xml)说：

mode：指定要渲染的图元类型。接受符号常量 GL_POINTS、GL_LINE_STRIP、GL_LINE_LOOP、GL_LINES、GL_TRIANGLE_STRIP、GL_TRIANGLE_FAN、GL_TRIANGLES、GL_QUAD_STRIP、GL_QUADS 和 GL_POLYGON。

first：指定启用数组中的起始索引。

count：指定要渲染的索引数。

根据 Nicol Bolas 所说的，因为我不应该需要索引，所以 0, 0 作为参数是有意义的。对？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T04:15:38.393

```
glGenBuffersARB(1, &vboId);

glBindBufferARB(GL_ARRAY_BUFFER_ARB, vboId);
glBufferDataARB(GL_ARRAY_BUFFER_ARB, dataSize, vertices, GL_STATIC_DRAW_ARB);

free(vertices);
glDeleteBuffersARB(1, &vboId);  // wat 
```

调用后`glDeleteBuffersARB()`，指向的 VBO ID 无效，不能在`glBindBufferARB()`.

还：

```
glDrawElements(GL_TRIANGLES, 1, GL_UNSIGNED_BYTE, &indices); 
```

你已经定义`indices`为 a`unsigned int`所以你应该使用`GL_UNSIGNED_INT`而不是`GL_UNSIGNED_BYTE`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T05:03:37.750

```
 glDrawElements(GL_TRIANGLES, 1, GL_UNSIGNED_INT, &indices); 
```

您可能知道，三角形由三个顶点组成。您正在发送*一个*（第二个参数）。您不能从一个位置绘制三角形。

# asp.net-mvc - IIS 显示文件夹内容列表而不是运行网站（mvc 应用程序）

> ID：11044217
> 
> 赞同：2
> 
> 时间：2012-06-15T03:29:50.980
> 
> 标签：asp.net-mvc, iis, nopcommerce

谁能帮我。（iis让我发疯！！）

我在哪里。我已经在 aws 上设置了一个基本的 Windows 服务器。我使用网络平台安装程序来安装 nopcommerce 和依赖项。我首先遇到 403 错误，然后启用了目录浏览。现在，Web 浏览器不再运行该站点，而是仅显示根文件夹的内容列表。只是一个目录列表，而不是启动网页。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T03:31:07.760

禁用目录浏览并尝试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T16:14:38.857

我通过重新安装 .net 框架来恢复并运行它。不知道出了什么问题，但重新安装似乎已经解决了它。

# php - 抓取页面关键字、描述和标题的功能？

> ID：11044220
> 
> 赞同：0
> 
> 时间：2012-06-15T03:30:19.173
> 
> 标签：php, regex, web-scraping

我编写了简单的 3 个函数来抓取简单 html 页面的标题、描述和关键字，这是第一个抓取标题的函数

```
function getPageTitle ($url)
{
    $content = $url;
    if (eregi("<title>(.*)</title>", $content, $array)) {
        $title = $array[1];
        return $title;
    }
} 
```

它工作正常，这是 2 个用于抓取描述和关键字的功能以及那些不工作的功能

```
function getPageKeywords($url)
{
    $content = $url; 
    if ( preg_match('/<meta[\s]+[^>]*?name[\s]?=[\s\"\']+keywords[\s\"\']+content[\s]?=[\s\"\']+(.*?)[\"\']+.*?>/i', $content, $array)) { 
        $keywords = $array[1];  
        return $keywords; 
    }  
}
function getPageDesc($url)
{
    $content = $url; 
    if ( preg_match('/<meta[\s]+[^>]*?name[\s]?=[\s\"\']+description[\s\"\']+content[\s]?=[\s\"\']+(.*?)[\"\']+.*?>/i', $content, $array)) { 
        $desc = $array[1];  
        return $desc; 
    }  
} 
```

我知道 preg_match 行可能有问题，但我真的不知道我尝试了很多东西，但它不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T03:54:15.073

为什么不使用 get_meta_tags？[PHP 文档在这里](http://php.net/manual/en/function.get-meta-tags.php)

```
<?php
// Assuming the above tags are at www.example.com
$tags = get_meta_tags('http://www.example.com/');

// Notice how the keys are all lowercase now, and
// how . was replaced by _ in the key.
echo $tags['author'];       // name
echo $tags['keywords'];     // php documentation
echo $tags['description'];  // a php manual
echo $tags['geo_position']; // 49.33;-86.59
?> 
```

**注意**您可以将参数更改为 URL、本地文件或字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T03:51:02.157

最好使用 php 的原生[DOMDocument](http://www.php.net/manual/en/class.domdocument.php)来解析 HTML，然后使用正则表达式，你也可以使用 , 尽管在这个时代的网站甚至不再添加关键字，描述标签，所以你不能依赖它们总是在那里。但这是使用 DOMDocument 的方法：

```
<?php 
$source = file_get_contents('http://php.net');

$dom = new DOMDocument("1.0","UTF-8");
@$dom->loadHTML($source);
$dom->preserveWhiteSpace = false;

//Get Title
$title = $dom->getElementsByTagName('title')->item(0)->nodeValue;

$description = '';
$keywords = '';
foreach($dom->getElementsByTagName('meta') as $metas) {
    if($metas->getAttribute('name') =='description'){ $description = $metas->getAttribute('content'); }
    if($metas->getAttribute('name') =='keywords'){    $keywords = $metas->getAttribute('content');    }
}

print_r($title);
print_r($description);
print_r($keywords);
?> 
```

# hibernate - 可空实体的休眠注释映射

> ID：11044222
> 
> 赞同：0
> 
> 时间：2012-06-15T03:30:26.733
> 
> 标签：hibernate, annotations, mapping

我有 2 张桌子：

```
Table A
   Id (primary key)
   Name
   request_Id 

Table B
   request_Id (primary key)
   request_param 
```

这两个表之间的关系是 request_id，虽然没有外键约束，这意味着即使表 B 中没有该 request_id 的记录，表 A 中也可以存在一条记录。我还要声明这是来自 A --> B 的单向关系

以下是 2 个表的注释映射：

```
@Entity...
class A
{
   @Id
   private int id;
   @Column
   private String Name;
   @Column(name="request_id")
   private String requestId
   @ManyToOne(optional = true)
   @JoinColumn(name="request_id", insertable=false, updatable=false)
   private B b;
}

@Entity...
class B
{
   @Id
   @Column(name="request_id")
   private String requestId;
   @Column(name="param")
   private String param;
} 
```

考虑这个表数据：

```
 table A
    id = 1
    name = "temp"
    request_id = "A" 
```

B中没有记录

当我为 A 中没有相应记录的 B 中的记录加载实体 A 时，出现异常“org.hibernate.ObjectNotFoundException：不存在具有给定标识符的行”

我打印了 sql，我看到了 2 个查询，一个用于表 A，一个用于表 B 的外部连接，然后另一个用于表 B 的查询。

我不确定它为什么会这样做。当我在 DB 中执行第一个查询时，它工作正常。谁能指出我做错了什么或提供一些解决问题的指示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T07:09:02.930

当表 B 中没有记录时，表 A 中具有非空值的唯一原因是因为表 B 是事后才想到的。如果表B中有记录，则该设计满足执行某些任务的要求，否则该过程终止。

我避免使用`@NotFound`，但我认为我没有其他选择，或者是否有保持相同的表格设计？

# jquery - JQuery 中的可切换菜单。不知道如何保存状态

> ID：11044228
> 
> 赞同：0
> 
> 时间：2012-06-15T03:30:46.147
> 
> 标签：jquery, html

我有一个这样设置的菜单：

```
<div id='top-navigation'>
    <ul>
    <li><a class='top-nav-button-unclicked' href='#'>SUBJECT</a></li>
    <li><a class='top-nav-button-unclicked' href='#'>TOPIC</a></li>
    <li><a class='top-nav-button-unclicked' href='#'>PRESENTER</a></li>
    </ul>
    </div>
    <div id='menu'>
    </div> 
```

基本上，当我单击其中一个链接时，我希望弹出菜单。我对 jQuery 很陌生，到目前为止我有这个：

```
$('#menu').hide();

$(".top-nav-button-unclicked, .top-nav-button-clicked").click(function(){
    if ($(this).hasClass('top-nav-button-clicked')) {
        $(this).removeClass().addClass("top-nav-button-unclicked");
    } else {
        $(this).removeClass().addClass("top-nav-button-clicked");
    }
    $('#menu').toggle();
}); 
```

问题在于，当我单击第一个菜单项“SUBJECT”时，会出现菜单，当我单击“TOPIC”时，我希望菜单保持打开状态（从技术上讲，当我将 ajax 添加到它）

基本上，我不确定如何保持关于哪个按钮正在调用菜单的状态。最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T03:47:27.493

听起来您正在使用`.toggle()`，但您并不真的希望它每次都切换。如果是这种情况，那么您应该只计算您是否希望它可见并设置该特定状态而不是使用`.toggle()`. 您还可以传递一个布尔值来`.toggle()`确定它是显示还是隐藏。

# ruby-on-rails - Rails 3.1：在单个查询中通过连接表优化 many_to_many？

> ID：11044230
> 
> 赞同：0
> 
> 时间：2012-06-15T03:31:00.520
> 
> 标签：ruby-on-rails, activerecord, sql-optimization

用户有很多曲目，通过收藏。`:as_public`收藏夹有一些关于相关曲目的额外的每用户元数据，并且整个内容使用自定义散列方法作为 json blob 返回。

即使我正在使用 JOIN 访问相关对象，我也在进行数百个非常基本的`SELECT track FROM tracks WHERE track.id='1'`查询。**我想优化这个查找。**

## 用户控制器：

```
def show
  @user = User.find(params[:id])

  respond_to do |format|
    format.html # index.html.erb
    format.json { render json: @user.to_json(:methods => [:favorites_as_public_tracks]) }
  end
end 
```

## 用户.rb

```
def favorites_as_public_tracks
  favorites.joins(:track).sort_by(&:created_at).map(&:as_public_track)
end 
```

## 最喜欢的.rb

```
class Favorite < ActiveRecord::Base
  belongs_to :user
  belongs_to :track

  #Grabs some stuff from Favorite, merging it with the public data from Track
  def as_public_track
    track.public_attributes.merge(public_attributes_for_merging_onto_track)
  end

  # This stuff gets added onto track.to_json and used by javascript
  def public_attributes_for_merging_onto_track
    return {
      :favorite_id  => id,
      :from_service => from_service,
      :favorited_at => created_at,
      :collection_name => "#{collection_name}, #{from_service}"
    }
  end

  def public_attributes
    private_attrs = [:user_id]

    attributes.reject {|key, val| private_attrs.include? key.to_sym }
  end
end 
```

## 轨道.rb

```
 def public_attributes
    private_attrs = [] #[:id]

    attributes.reject {|key, val| private_attrs.include? key.to_sym }
  end 
```

当我将用户的收藏夹作为公共曲目访问时运行的 SQL 是：

```
User Load (0.2ms)  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", "1"]]
  Favorite Load (7.8ms)  SELECT "favorites".* FROM "favorites" INNER JOIN "tracks" ON "tracks"."id" = "favorites"."track_id" WHERE "favorites"."user_id" = 1 ORDER BY "favorites".created_at DESC
  Track Load (1.3ms)  SELECT "tracks".* FROM "tracks" WHERE "tracks"."id" = 1 LIMIT 1
  Track Load (0.5ms)  SELECT "tracks".* FROM "tracks" WHERE "tracks"."id" = 2 LIMIT 1
  Track Load (0.3ms)  SELECT "tracks".* FROM "tracks" WHERE "tracks"."id" = 3 LIMIT 1
  Track Load (0.3ms)  SELECT "tracks".* FROM "tracks" WHERE "tracks"."id" = 4 LIMIT 1
  Track Load (0.5ms)  SELECT "tracks".* FROM "tracks" WHERE "tracks"."id" = 5 LIMIT 1
  Track Load (0.2ms)  SELECT "tracks".* FROM "tracks" WHERE "tracks"."id" = 6 LIMIT 1
  Track Load (0.2ms)  SELECT "tracks".* FROM "tracks" WHERE "tracks"."id" = 7 LIMIT 1
  Track Load (0.2ms)  SELECT "tracks".* FROM "tracks" WHERE "tracks"."id" = 8 LIMIT 1 
```

**如何在不进行数百个 SELECT track where track.id='...' 查询的情况下执行此操作？**

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T03:50:11.453

如果您的列表对于所有实例都保持不变，请考虑将其设为类方法而不是实例方法。看看是否可以将公共属性和私有属性列表作为类方法。否则，要为每个实例构建这些列表，您将获得每条记录的命中。

通常，`:include :tracks`在`find`s 中可以修复它，但我认为这不是问题所在。

祝你好运！

# linux - grep: grep -v 排除文件但不起作用

> ID：11044234
> 
> 赞同：1
> 
> 时间：2012-06-15T03:31:43.997
> 
> 标签：linux, grep

我在一个目录中有三个文件：

**一个.html**：

```
<html>
    a    
</html> 
```

**b.html**：

```
<html>
    b
</html> 
```

**html文件**：

```
这只是一个html文件

```

我想获取文件扩展名不是.html的文件，所以我使用的命令是：

```
ls|grep -v *html 
```

但结果是：

```
<html>
    b
</html> 
```

为什么？

谢谢你。但我不知道为什么`ls|grep -v *html`打印出`b.html`. 如果这个命令打印出以 结尾的文件的内容`.html`，为什么不打印出 的内容`a.html`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T04:08:49.223

由于您没有`*html`加引号，shell 将您的命令扩展为

```
ls | grep -v a.html b.html 
```

现在，由于`grep`使用两个参数调用，它将忽略标准输入。所以结果等价于

```
grep -v "a.html" b.html 
```

打印`b.html`.

* * *

*编辑*

要使其工作，请使用

```
ls | grep -v "html$"
# Note that html$ is the regexp equivalent to the shell pattern *html 
```

或者

```
shopt -s extglob # turn on extended globbing
ls -d !(*html) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T03:34:46.687

利用

`ls | grep -v .html`

这将过滤掉带有`.html`扩展名的名称。

*快速测试*：

```
$ ls
a.html  b.html  htmlfile

$ ls | grep -v .html
htmlfile 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T03:37:39.460

这应该可以解决问题：

```
ls -1 | grep -v '.html$' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T04:30:21.600

这与 shell globbing 有关。我不确定为什么`grep -v`会这样，但在 Arch Linux zsh 上有一些类似的结果：

```
ls | grep -v *html
    <html>b</html>
grep -v *html
    <html>b</html> 
```

请注意那些具有相同的结果。grep 命令在当前工作目录上运行，并使用 shell 通配符 (*) 作为参数。来自 ls 的管道与它无关。它包含在输出中，但 grep 将其丢弃。

要更清楚地了解它是如何工作的，请向上移动一个目录并发出：

```
ls <dirname> | grep -v *html
    zsh: no matches found: *html 
```

编辑：请参阅[Pumbaa80 的回答](https://stackoverflow.com/a/11044453/1452106)了解为什么会发生这种情况。

# android - 重新安装应用程序android后的缓存状态

> ID：11044237
> 
> 赞同：0
> 
> 时间：2012-06-15T03:32:34.737
> 
> 标签：android, caching, installation

我想知道每次重新安装应用程序时，android 应用程序中的缓存都会删除或覆盖？还是它仍然存在？

感谢和问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T08:02:50.993

它会一直存在，直到您卸载应用程序或系统内存不足。

如果系统存储空间不足，它首先要从[缓存目录](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)中释放资源。

# java - 如何使用 javax api 发送带有表格的邮件

> ID：11044240
> 
> 赞同：0
> 
> 时间：2012-06-15T03:33:15.953
> 
> 标签：java, jakarta-mail

我需要修改发送邮件的代码。要求是在邮件中插入一个表。如果邮件的内容类型是 text/html，这可以很容易地完成。但是内容类型集是文本/纯文本。有没有办法为这种内容类型发送带有表格的邮件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T03:43:57.943

您可以创建一个 ASCII 表，但它可能不会很吸引人。为什么不简单地使用 HTML？

ASCII 表示例：

```
:-----------------------------:
: Name                : Score :
:---------------------:-------:
: Jones, Jim          :   100 :
: Falwell, Jerry      :    98 :
: Bakker, Jim         :    75 :
:-----------------------------: 
```

# algorithm - 矩阵中的最大值

> ID：11044241
> 
> 赞同：1
> 
> 时间：2012-06-15T03:33:27.980
> 
> 标签：algorithm, optimization

所以这是 C# 中一个有趣的问题。我正在寻找更好的解决方法：

> 给定一个匹配矩阵 M（不一定是正方形），找到最佳匹配元素。元素 i 通过值 M(i,j) 匹配元素 j。M(i,j) != M(j,i)。
> 
> 由于#rows != #columns，找到最佳的 min(#rows,#columns) 匹配对 (i,j)。

基本上，问题是从每一行/列中选择最大值，这样没有行/列被选择两次。

例子：

```
 1  2  3 
  +---------
a | 10  3  1
b | 12  99 2
c | 20  5  3
d |  5  7  4 
```

该矩阵中的最大值为 99，因此最佳匹配为 (b,2)。对于下一个选择，我们不能再使用第 b 行和第 2 列。就像剪切它们一样

```
 1  2  3  or, if you prefer,       1   3
  +---------  a smaller matrix:      +------
a | 10 ||  1                       a | 10  1
b | ===++===                       c | 20  3
c | 20 ||  3                       d | 5   4
d |  5 ||  4 
```

现在最大值为 20，匹配为 (c, 1)。剩下的矩阵只有一列。在另一个选择之后，我们将得到 match = 4 的匹配 (d, 3)

最后“a”没有匹配。

我当前的实现使用 2 个数组来存储已经匹配的行/列，并且对于每个匹配项都会遍历整个矩阵，选择属于行/列不匹配的第一个最大值。

PS：如果值多个匹配具有相同的值，只需选择其中一个 PS2：数组存储为`int [,]`

您将如何以更优化/更美观的方式解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T04:15:15.167

如果您试图最大化所选单元格的总和，以便从每一行和每一列中选择一个单元格，那么这是[http://en.wikipedia.org/wiki/Assignment_problem](http://en.wikipedia.org/wiki/Assignment_problem)。如果您的矩阵不是方形的，您可以通过向它们添加行或列来使其成为方形，新单元格中的值意味着除非没有其他方法来填写解决方案，否则它们不会被选中。

（如果你没有最大化总和，你需要说明你选择的值的哪个函数最大化 - （1,3）比（2,2）好？否则你进入[http://en.wikipedia。 org/wiki/Multi-objective_optimization](http://en.wikipedia.org/wiki/Multi-objective_optimization)，这是可能的，但更复杂）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T04:14:32.017

您可以首先按降序对矩阵的所有条目进行排序，然后处理排序后的列表。每当您看到不在已选择的行/列中的条目时，这意味着应该选择该条目，因此您标记相应的行/列并继续沿着列表向下继续，直到所有行或所有列都被选择.

# maven - 在 Maven 中将传递依赖限制到运行时范围

> ID：11044243
> 
> 赞同：16
> 
> 时间：2012-06-15T03:33:52.750
> 
> 标签：maven, maven-3

我有 2 个使用 Maven 的项目。第一个是包含实用程序类和方法的库。第二个项目是将库作为依赖项的实际应用程序。我的库在内部使用第三方库。

所以这些是依赖项：

*   我的库：依赖第三方库
*   我的应用程序：取决于我的图书馆

但是，我不希望第三方库类在我的应用程序的**编译时可用。**这是因为该应用程序由一个大型团队支持，并且鉴于两者之间的某些类名和某些方法名相似，我想防止人们在应用程序中意外使用第三方库中的方法。当然，第三方库必须在**运行时**在我的应用程序中可用。

如果我所有依赖项的范围都是**compile**，那它就达不到我的目标。有没有办法在 Maven 3 中实现这一点？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-15T07:02:30.000

非常好的问题，不幸的是，由于其基本设计，您不能使用 Maven 3、2 或任何其他版本来做到这一点。您所问的实际上是一种理想的行为，因为实际上任何工件的`compile`依赖关系都应该是可传递的`runtime`。然而，这样的设计会导致一些问题。正如您可以在[Maven 的依赖机制简介中](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Dependency_Scope)阅读的关于`compile`范围的内容：

> 其目的是 [应考虑编译依赖项的传递依赖项，它们本身就是编译依赖项] 运行时范围，因此必须显式列出所有编译依赖项 - 但是，在某些情况下，您所依赖的库扩展了一个类另一个库，迫使您在编译时可用。出于这个原因，即使编译时依赖项是可传递的，它们仍保留为编译范围。

因此，如您所见，您实际上需要的是对这种行为的正确设计，不幸的是，这种行为是不可能实现的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-10-20T20:00:29.160

过去三年没有任何变化，所以 Michal 的回答仍然是正确的：没有办法限制 Maven 中的传递可见性。

但是，您应该考虑重新设计您的库以将其拆分为一个 api-artifact，它是编译时依赖项所必需的，并且它本身不依赖于第三方库和一个仅需要作为运行时依赖项并且依赖于的实现工件第三方库。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-15T00:56:55.620

在您的应用程序中，您可以使用“运行时”范围声明对第三方库的显式依赖。

这可以防止在编译时看到第三方库，因此不能直接使用。但是，它仍然会在运行时出现（因为您的库需要它）。

这可行，但很尴尬，值得在 pom.xml 中添加解释性 XML 注释。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-01T09:59:09.583

其他答案都是正确的。除了通过拆分一个人工 API 模块来解决 maven 中缺少的关键特性之外，您还可以使用以下替代方法：

*   排除传递依赖，然后直接依赖它们（你必须自己管理版本号）
*   使用 checkstyle 导入控制和 CI。这样团队成员可以使用传递，但是 Maven 验证将失败
*   使用梯度。这是对 Maven 的许多限制的解决方案

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-12-08T11:05:28.573

您可以通过以下方式分析依赖关系：`mvn dependency:analyze`或将依赖关系作为验证生命周期阶段的一部分进行分析： [https ://maven.apache.org/plugins/maven-dependency-plugin/examples/failing-the-build-on-dependency-analysis -warnings.html](https://maven.apache.org/plugins/maven-dependency-plugin/examples/failing-the-build-on-dependency-analysis-warnings.html)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-09-23T15:34:29.280

似乎有效的是`<dependencyManagement>`pom.xml 中的使用部分。您将需要检查是否有任何副作用，因为它适用于整个项目。而且您必须具体指定每个库。

以下代码示例允许我强制 guava（在项目中由 google guice 作为编译时传递依赖项 smurfed）到任何地方的运行时依赖项。

`<dependencyManagement> <dependencies> <dependency> <groupId>com.google.guava</groupId> <artifactId>guava</artifactId> <scope>runtime</scope> </dependency> </dependencies> </dependencyManagement>`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-10-18T13:45:18.477

你可以这样尝试：

```
#My application pom.xml
 <dependencies>
        <dependency>
            <groupId>My groupId</groupId>
            <artifactId>My library</artifactId>
            <version>${version}</version>
            <exclusions>
                <exclusion>
                    <groupId>third-party library</groupId>
                    <artifactId> third-party library</artifactId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>third-party library</groupId>
            <artifactId> third-party library</artifactId>
            <version>${version}</version>
            <scope>runtime</scope>
        </dependency>
</dependencies> 
```

# iphone - UILocalNotification 触发时自动将应用程序从后台带到前台？

> ID：11044244
> 
> 赞同：0
> 
> 时间：2012-06-15T03:33:57.543
> 
> 标签：iphone, ios, ipad

据我了解，当 UILocalNotification 触发时，会弹出一个警报窗口并要求用户打开该应用程序。

我想在 UILocalNotification 触发时直接向用户展示该应用程序，不需要用户干预。

当 UILocalNotification 触发时，是否可以将该应用程序从后台自动带到前台？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T04:12:09.457

目前，在现有 iOS 设备上使用允许的公共 API 是不可能的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T05:33:55.500

Apple 限制的主要逻辑是保护用户和设备（其内存、电池等）免受有害应用程序的影响。而iOS通知的逻辑是让操作系统用户干预。正如@hotpaw2 所说，在公共 API 中没有办法做到这一点，这意味着如果你这样做，你的应用程序将被拒绝。

**笔记*****：* *如果您针对越狱设备，这是可能的，如果您愿意，我也可以提供一些帮助*

# ruby-on-rails - 在 Rails 3.2.3 中使用设计 - 无法退出

> ID：11044246
> 
> 赞同：0
> 
> 时间：2012-06-15T03:34:01.680
> 
> 标签：ruby-on-rails, authentication, devise, rake

我正在为我的 Rails 应用程序 3.2.3 使用设计 2.1.0。这是我所做的：

```
Add gem 'devise' to Gemfile and run bundle
Run rails g devise:install
Run rails g devise User
Setup db by running rake db:migrate 
```

application.html.erb 是这样的：

```
<%if user_signed_in? %>
    Welcome <%= current_user.email%>
    <%= link_to "Sign out", destroy_user_session_path%>
<% else %>
    <%= link_to "Sign up", new_user_registration_path %> or
    <%= link_to "Sign in", new_user_session_path %> 
<% end %> 
```

登录和注册工作正常，但是当我单击退出时，我收到一条错误消息：

> 路由错误
> 
> 没有路由匹配 [GET] "/users/sign_out" 尝试运行 rake 路由以获取有关可用路由的更多信息。

这是 rake 路由的输出：

```
new_user_session GET    /users/sign_in(.:format)                          devise/sessions#new
            user_session POST   /users/sign_in(.:format)                          devise/sessions#create
    destroy_user_session DELETE /users/sign_out(.:format)                         devise/sessions#destroy
           user_password POST   /users/password(.:format)                         devise/passwords#create
       new_user_password GET    /users/password/new(.:format)                     devise/passwords#new
      edit_user_password GET    /users/password/edit(.:format)                    devise/passwords#edit
                         PUT    /users/password(.:format)                         devise/passwords#update
cancel_user_registration GET    /users/cancel(.:format)                           devise/registrations#cancel
       user_registration POST   /users(.:format)                                  devise/registrations#create
   new_user_registration GET    /users/sign_up(.:format)                          devise/registrations#new
  edit_user_registration GET    /users/edit(.:format)                             devise/registrations#edit
                         PUT    /users(.:format)                                  devise/registrations#update
                         DELETE /users(.:format)                                  devise/registrations#destroy 
```

我真的很困惑，因为那里有 /usrs/sign_out 路线。有谁知道为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T03:38:32.393

尝试这个：

```
<%= link_to "Sign out", destroy_user_session_path, :method => :delete %> 
```

# jquery - 页面打开后将菜单的颜色设置为与其悬停背景相同的颜色

> ID：11044249
> 
> 赞同：-1
> 
> 时间：2012-06-15T03:34:40.397
> 
> 标签：jquery, css, menu, hover

我在这样的页面上有一个水平菜单

```
<link rel="stylesheet" type="text/css" href="/classified/siteassets/css/mymenu.css" />
<div id="content-container">
<ul>
    <li><a href="http://mysite/Classified/Pages/Training.aspx">Training</a></li>
    <li><a href="http://mysite/Classified/Pages/Briefing.aspx">Briefing</a></li>     
    <li><a href="http://mysite/Classified/Pages/Resources.aspx">Resources</a></li>
</ul>
</div> 
```

菜单样式如下：

```
#content-container {
    font-family: "Trebuchet MS", Verdana, serif;
    width:100%;
    margin:0 auto;
    padding:0;
}    
#content-container ul {
    border-bottom: 18px solid #C93;
    list-style: none;
    margin:0 -10px;;
    padding-bottom: 1px;
    overflow: visible;
    width:98%;
}    
#content-container ul li {
    float: left;
    padding:0;
    margin:0;
    text-align: center;
    width: 14.25%;
}    
#content-container ul li a {
    border-left: 1px #fff solid;
    line-height:36px;
    text-decoration:none;
    color:#ddd;
    background-color:#2E4B68;
    display:block;
    font-size:1.5em;

}
#content-container ul li a:hover {
    background-color: #C93;
    color:#000;
} 
```

我需要做的是，当单击相应页面打开的链接之一时，我需要在打开的菜单选项卡上具有与其悬停颜色相同的颜色。我需要通过使用javascript检查url来查找打开的页面并使用jquery动态设置li项的背景颜色与其悬停颜色相同，以便用户知道这是当前打开的页面。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T06:53:26.680

使用 onclick 事件动态更改选项卡的背景颜色（在类中设置所需的颜色）。

完全希望，这个链接可以帮助你。

[http://api.jquery.com/css/](http://api.jquery.com/css/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T03:56:28.907

我认为你想要的是这样的：

```
jQuery(document).ready(function(){
    jQuery("#content-container a").each(function(){
        if(jQuery(this).attr("href")==location.href)
              jQuery(this).css({"background-color": "#C93",color:"#000"});
    });
}); 
```

它将遍历您的菜单，查看链接是否与当前页面地址和样式匹配。

不过，您确实应该为此使用 css 类。

*Ps：未经测试的代码。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T03:46:03.513

```
$(function(){
  $("#content-container").on({"mouseover":function(){
// when you mouseover a 'ul li a' this event fires. store it's current background color
   $(this).data("background-color",$(this).css("background-color"));
  },"click":function(event){
// someone clicked it, grab the color and set the parent li background-color
   $(this).parent().css({background-color:$(this).data("background-color")});
  }},"ul li a", null);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T04:11:40.410

尝试这个

```
$(document).ready( function() {
    $("#content-container ul li a").each(function(i, item) {
        if($(item).attr("href") == window.location) {
            $(item).css("background-color, #c93");
        }
    });
}); 
```

# mysql - 用 MySql 计算中国年

> ID：11044251
> 
> 赞同：1
> 
> 时间：2012-06-15T03:34:48.353
> 
> 标签：mysql

奇怪的一个。试图在 MySQL 中计算中国的生肖年。鼠年，虎年等年份。它们以12年为间隔，所以我想我需要修改它吗？

对于一个漂亮而干净的查询有什么好的建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T03:48:58.160

像这样的东西：

```
SELECT
    (
        CASE
            WHEN MOD(a.year, 12) = 0 THEN 'Monkey'
            WHEN MOD(a.year, 12) = 1 THEN 'Rooster'
            WHEN MOD(a.year, 12) = 2 THEN 'Dog'
            WHEN MOD(a.year, 12) = 3 THEN 'Pig'
            WHEN MOD(a.year, 12) = 4 THEN 'Rat'
            WHEN MOD(a.year, 12) = 5 THEN 'Ox'
            WHEN MOD(a.year, 12) = 6 THEN 'Tiger'
            WHEN MOD(a.year, 12) = 7 THEN 'Hare'
            WHEN MOD(a.year, 12) = 8 THEN 'Dragon'
            WHEN MOD(a.year, 12) = 9 THEN 'Snake'
            WHEN MOD(a.year, 12) = 10 THEN 'Horse'
            WHEN MOD(a.year, 12) = 11 THEN 'Sheep'
        END
    ) AS ZodiacYear
FROM
    table a 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T04:05:00.310

或者，如果使用单个汉字，您可以

```
SELECT SUBSTRING('鼠牛虎兔龙蛇马羊候鸡狗猪', (YEAR(CURRENT_DATE)-4)%12+1, 1); 
```

**笔记**

中国年使用农历，农历和公历有几个月的差异。

# c++ - 64 位整数中的 C++ 位

> ID：11044254
> 
> 赞同：1
> 
> 时间：2012-06-15T03:35:54.123
> 
> 标签：c++, bitwise-operators

您好，我这里有一个 7 字节的结构，我想将其写入 64 位整数。接下来，我想稍后从 64 位整数中提取出这个结构。

对此有什么想法吗？

```
#include "stdafx.h"

struct myStruct
{
        unsigned char a;               
        unsigned char b;
        unsigned char b;
        unsigned int someNumber;
};

int _tmain(int argc, _TCHAR* argv[])
{
    myStruct * m = new myStruct();
    m->a = 11;
    m->b = 8;
    m->c = 12;
    m->someNumber = 30;

    printf("\n%s\t\t%i\t%i\t%i\t%i\n\n", "struct", m->a, m->b, m->c, m->someNumber);

    unsigned long num = 0;

    // todo: use bitwise operations from m into num (total of 7 bytes) 

    printf("%s\t\t%i\n\n", "ulong", num);

    m = new myStruct();

    // todo: use bitwise operations from num into m;

    printf("%s\t\t%i\t%i\t%i\t%i\n\n", "struct", m->a, m->b, m->c, m->someNumber);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T08:44:56.120

你应该做这样的事情：

```
class structured_uint64
{
    uint64_t data;
public:
    structured_uint64(uint64_t x = 0):data(x) {}
    operator uint64_t&() { return data; }
    unsigned uint8_t low_byte(size_t n) const { return data >> (n * 8); }
    void low_byte(size_t n, uint8_t val) {
        uint64_t mask = static_cast<uint64_t>(0xff) << (8 * n);
        data = (data & ~mask) | (static_cast<uint64_t>(val) << (8 * n));
    }
    unsigned uint32_t hi_word() const { return (data >> 24); }
    // et cetera
}; 
```

（当然，接口的细节以及组件在 64 位中的位置有很大的变化空间）

使用不同的类型给内存的同一部分起别名通常是个坏主意。问题是，优化器能够使用以下推理非常有价值：

> “好的，我`uint64_t`在这个块的开头读到了a，中间没有地方写入任何`uint64_t`s，所以值必须不变！”

`uint64_t`这意味着如果您尝试通过`uint32_t`引用更改对象的值，它将得到错误的答案。由于这非常依赖于哪些优化是可能的和完成的，实际上很容易在测试用例中永远不会遇到问题，但是在你尝试编写的真实程序中看到它——你将永远尝试找到错误，因为您说服自己这不是这个问题。

因此，您确实应该使用位旋转（或内在函数，如果分析表明这是一个性能问题并且有可用的可用）来插入/提取字段，而不是尝试设置一个聪明的结构。

我相信，如果您*真的*知道自己在做什么，就可以使混叠起作用。但只有在你*真的*知道自己在做什么的情况下才应该这样做，这包括从内到外了解标准的相关规则（我不知道，所以我不能建议你如何让它发挥作用） . 即使那样，您也可能不应该这样做。

此外，如果您希望您的整数类型具有特定大小，您应该*真正*使用正确的类型。例如，永远不要使用`unsigned int`应该正好是 32 位的整数。而是使用`uint32_t`. 它不仅是自记录的，而且当您尝试在*非*32 位的环境`unsigned int`中构建程序时，您也不会遇到令人讨厌的意外。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T20:55:50.467

知道了。

```
static unsigned long long compress(char a, char b, char c, unsigned int someNumber)
{
    unsigned long long x = 0;
    x = x | a;
    x = x << 8;
    x = x | b;
    x = x << 8;
    x = x | c;
    x = x << 32;
    x = x | someNumber;
    return x;
}

myStruct * decompress(unsigned long long x)
{
    printBinary(x);
    myStruct * m = new myStruct();
    m->someNumber = x | 4294967296;
    x = x >> 32;
    m->c = x | 256;
    x = x >> 8;
    m->b = x | 256;
    x = x >> 8;
    m->a = x | 256;
    return m;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T06:29:23.900

使用`union`. a 的每个元素`union`占用相同的地址空间。这`struct`是一个元素，`unsigned long long`是另一个。

```
#include <stdio.h>

union data
{
    struct
    {
        unsigned char a;
        unsigned char b;
        unsigned char c;
        unsigned int d;
    } e;
    unsigned long long f;
};

int main()
{
    data dat;
    dat.f = 0xFFFFFFFFFFFFFFFF;
    dat.e.a = 1;
    dat.e.b = 2;
    dat.e.c = 3;
    dat.e.d = 4;
    printf("f=%016llX\n",dat.f);
    printf("%02X %02X %02X %08X\n",dat.e.a,dat.e.b,dat.e.c,dat.e.d);
    return 0;
} 
```

输出，但请注意原始`unsigned long long`保留了一个字节。编译器喜欢在可被 4 整除的地址上对齐数据，例如 4 字节整数，所以三个字节，然后是填充字节，因此整数在偏移量 4 处，`struct`总大小为 8。

```
f=00000004FF030201
01 02 03 00000004 
```

这可以以编译器相关的方式进行控制。以下是 Microsoft C++：

```
#include <stdio.h>

#pragma pack(push,1)
union data
{
    struct
    {
        unsigned char a;
        unsigned char b;
        unsigned char c;
        unsigned int d;
    } e;
    unsigned long long f;
};
#pragma pack(pop)

int main()
{
    data dat;
    dat.f = 0xFFFFFFFFFFFFFFFF;
    dat.e.a = 1;
    dat.e.b = 2;
    dat.e.c = 3;
    dat.e.d = 4;
    printf("f=%016llX\n",dat.f);
    printf("%02X %02X %02X %08X\n",dat.e.a,dat.e.b,dat.e.c,dat.e.d);
    return 0;
} 
```

注意`struct`现在占用七个字节，最高字节`unsigned long long`现在没有改变：

```
f=FF00000004030201
01 02 03 00000004 
```*

# java - 与 Java 的 LinkedList 类的并发性

> ID：11044256
> 
> 赞同：0
> 
> 时间：2012-06-15T03:36:05.140
> 
> 标签：java, multithreading, concurrency, thread-safety

再会，

我在 Java 中遇到了 LinkedList 的并发问题。我有一个名为“Connection”的对象类型，它有一个名为“listeners”的“MessageHandlers”的成员变量 LinkedList。然后我有两个不同的线程，一个修改和一个迭代同一个 LinkedList。

我已经看到许多其他 StackOverflow 问题建议使用同步代码块，但这似乎并没有帮助全部。我也尝试将 LinkedList 创建为并发链表，但我仍然收到

```
 Exception in thread "Thread-1" java.util.ConcurrentModificationException 
```

例外。有没有人有任何其他建议可以尝试？这是我的代码的一些片段......

```
public synchronized Object ReadObject() throws java.io.IOException
{
    Object obj = null;

    try
    {
        obj = input.readObject();

        synchronized(listeners)
        {
            Iterator<MessageHandler> i = listeners.iterator();

            while(i.hasNext())
            {
                i.next().MessageReceived(obj, this);
            }
        }
    } 
    catch (IOException e)
    {   
        e.printStackTrace();
        throw e;
    } 
    catch (ClassNotFoundException e)
    {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    return obj;
} 
```

上面的代码在我的连接对象中。它从一个函数调用，该函数有一个套接字的 ObjectInputStream 从套接字读取数据。“输入”是 ObjectInputStream 的一个实例。

```
public void addNewLoggedInUser(User user) throws Exception
{
    for(User u:loggedInUsers)
    {
        if(u == user)
        {
            throw new Exception("That user is already logged in");
        }
    }

    //Add the new users
    loggedInUsers.add(user);

    synchronized(user.getConnection().getListeners())
    {
        user.getConnection().getListeners().add(this);
    }

    this.SendGameStatusUpdateToAllLoggedinPlayers();
} 
```

然后我调用方法**user.getConnection().getListeners().add(this)**并因此得到异常。

```
public Connection()
{
    //Initialize the variables to NULL
    socket              = null;
    output              = null;
    input               = null;
    receiveThread       = null;
    runReceiveThread    = false;
    listeners           = Collections.synchronizedList(new LinkedList<MessageHandler>());

    //Handle the ID counter. Now we have a unique ID for every connection that comes in
    connectionID = counterID;
    counterID = counterID + 1;
} 
```

这是连接类的构造函数。注意他**的 Collections.synchronizedList**

有任何想法吗？非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T03:48:57.210

`java.util.ConcurrentModificationException`不是真正的线程问题。这是由于修改了被它的迭代器锁定的列表。我想你是`addNewLoggedInUser()`从`MessageReceived()`. 这将导致并发修改异常，因为调用函数已经在链表上具有迭代器锁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T05:57:36.513

通过 BlockingQueue javadoc。它还提到了一个适合您要求的简单场景，即

```
class Producer implements Runnable {
  private final BlockingQueue queue;
  Producer(BlockingQueue q) { queue = q; }
  public void run() {
    try {
      while (true) { queue.put(produce()); }
    } catch (InterruptedException ex) { ... handle ...}
  }
  Object produce() { ... }
 }

 class Consumer implements Runnable {
   private final BlockingQueue queue;
   Consumer(BlockingQueue q) { queue = q; }
   public void run() {
     try {
       while (true) { consume(queue.take()); }
     } catch (InterruptedException ex) { ... handle ...}
   }
   void consume(Object x) { ... }
 }

 class Setup {
   void main() {
     BlockingQueue q = new SomeQueueImplementation();
     Producer p = new Producer(q);
     Consumer c1 = new Consumer(q);
     Consumer c2 = new Consumer(q);
     new Thread(p).start();
     new Thread(c1).start();
     new Thread(c2).start();
   }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T03:47:30.267

这些`synchronized`块看起来应该可以工作。我希望从`ReadObject` `synchronized`修改列表的块中调用的方法中有活动。您是否有任何`MessageHandler`调用或链接到调用`addNewLoggedInUser`（或任何其他可能更新侦听器列表的方法）？

如果是这样，线程将已经被`ReadObject` `synchronized`块抓住了监视器，并且能够在`addNewLoggedInUser`.

# html - 重复的背景图像在顶部和底部边缘未对齐

> ID：11044259
> 
> 赞同：0
> 
> 时间：2012-06-15T03:36:32.133
> 
> 标签：html, css

去[unboundsonics.com](http://www.unboundsonics.com)看看。

在页眉的顶部和页脚的底部，您可以看到对角细条纹没有对齐。一切都包含在一个`<div>`（`<div id="wrap">`准确地说）标签中，其边距是自动水平和垂直 15px。

如果我将垂直边距更改为自动，则不会出现此问题。我忽略了任何提示或观察结果？

任何帮助表示赞赏！

PS：我知道我的剧本和风格一团糟，但这是一项正在进行的工作。我只需要为明天到期的项目准备一个粗略的版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T03:46:30.740

你的问题是你为 html 和 Body 都设置了 BG 图片，而且 body 有点小，这就是他们不排队的原因。

作为快速修复，您可以将 bg 设置为仅适用于 HTML，

但更好的做法是将 html 和 body 的边距设置为 0px，html 的填充为 0px，并为 body 设置填充，并将 bg 应用于 body。

**编辑**

快速解决：

```
body,html {
margin:0;
padding:0;
color:#B8C2C9;
background-image:url('bgstripes.png');
background-repeat:repeat;
} 
```

改成：

```
body,html {
margin:0;
padding:0;
color:#B8C2C9;
}
html {
    background-image:url('bgstripes.png');
} 
```

另请注意，没有必要使用背景：重复，因为这是默认行为

**编辑2**

那么我个人会做这样的事情：

```
body,html {
    margin:0;
    padding:0;
}
body{
    background:url(bgstripes.png) #B8C2C9;
    padding:15px 0 15px 0;
}
#wrap {
    width:900px;
    margin:0 auto;
    background:#0D1325;
    border:1px outset white;
} 
```

通常我们会在 body 上放置一个 bg，但我们最好对父级进行填充，而不是容器上的边距。因为边距不需要拉动容器的高度，尤其是在父级没有填充或边框的情况下。您可以在 IE7 中注意到这一点，它可能会折叠底部边距。

# ruby-on-rails - 访问 API

> ID：11044260
> 
> 赞同：0
> 
> 时间：2012-06-15T03:36:34.083
> 
> 标签：ruby-on-rails, httparty

我正在尝试构建一个必须访问[Zomato API的 Rails 应用程序](http://www.zomato.com/api/documentation.)

任何人都可以指导我如何创建控制器和视图。假设我想从这个 URL 中获取餐厅的名称：[Restaurant](https://api.zomato.com/v1/restaurant.json/773)，我该如何为其编写控制器和视图。目前，我正在使用 HTTParty gem。

这是我的控制器代码：

```
def restaurants    
  @response = HTTParty.get("https://api.zomato.com/v1/restaurant.json/773", :headers => {"X-Zomato-API-Key" => "MYAPIKEY"})     
  puts response.body, response.code, response.message, response.headers.inspect       
  @categories = Category.where(:category_name => 'Restaurants')      
end 
```

我正在尝试在视图中获取响应对象：

```
<%= @response.each do |item| %>
  <td><%= item.id %></td>
  <td><%= item.name %></td>
  <td><%= item.url %></td>
<% end %> 
```

因此，这显示以下错误：

```
undefined method 'id' for ["id", 773]:Array 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T02:47:31.180

它是一个 REST API，因此您可以编写一些 ActiveResource 类并像使用活动记录一样使用它。尝试阅读 ActiveResource 文档。

# database - Sqlite 数据库安全

> ID：11044261
> 
> 赞同：5
> 
> 时间：2012-06-15T03:36:35.130
> 
> 标签：database, security, sqlite

我正在构建一个使用 Sqlite DB 的应用程序。用户可以将他们的信息输入数据库并检索它们。但是，我希望他们能够备份 sqlite 数据库。我所做的是将 sqlite db 放在文档文件夹中，这样他们就可以使用 iTunes 检索它。例如，如果 ipad 出现故障，我希望他们能够将 sqlite db 转移到另一个 ipad。

现在的问题是，我不想让他们知道db里面的信息，应该说db结构。那么如何构建一个只能由我的应用程序读取的数据库呢？当他们使用 sqlite 浏览器打开时，他们将无法看到任何东西。我正在寻找简单的东西。可以让数据库在打开之前提示密码吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-15T04:10:24.610

这是您答案的[链接](http://sqlcipher.net/)，SQLCipher 是最好的东西，它将加密整个数据库，如果有人从 iOS 设备获取数据库，无论如何，它仍然会提示输入密码，否则将不允许用户查看相同。即使使用命令提示符，用户也无法看到数据库。

希望这将是有用的......

# android - 将 Android API 与 Android 平台中的其他应用程序一起使用

> ID：11044275
> 
> 赞同：0
> 
> 时间：2012-06-15T03:38:34.640
> 
> 标签：android, synchronization

我想知道是否可以创建可以在其他应用程序中使用或实现的 Android API，以便它们可以同步。例如，有一个日历应用程序和一个单独的应用程序，其中包含当天所有会议的详细信息。日历和其他应用程序是否可以同步以获得日历本身显示当天会议的新应用程序？

我在哪里可以了解有关这些 API 的更多信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T04:25:27.133

问题不是很清楚，但是我从您的问题中了解到您想要创建两个使用相同数据源的应用程序。

要实现这一点，您可以使用 ContentProvider，通过 ContentProviders 应用程序将其数据暴露给其他应用程序。要创建和使用内容提供商，请查看以下链接：

[http://developer.android.com/guide/topics/providers/content-provider-creating.html](http://developer.android.com/guide/topics/providers/content-provider-creating.html)

和

[http://developer.android.com/guide/topics/providers/calendar-provider.html](http://developer.android.com/guide/topics/providers/calendar-provider.html)

# visual-studio-2010 - Visual Studio 编辑器中的侧销

> ID：11044277
> 
> 赞同：1
> 
> 时间：2012-06-15T03:38:50.720
> 
> 标签：visual-studio-2010

![固定在 Visual Studio 编辑器的一侧](../Images/a5d11dd1d40212929e810e344c3daf35.png)

我不确定那个“别针”（图中突出显示）是怎么来的。我没有安装任何扩展。真的很想知道它是怎么来的以及它的用途是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T04:12:33.000

对我来说看起来像是固定的[数据提示](http://blogs.msdn.com/b/zainnab/archive/2010/04/22/the-best-of-visual-studio-2010-pin-a-datatip-to-source.aspx)

![数据提示](../Images/88d019e3358e90fb7783bd2b54a72bb0.png)

# iphone - 如何使用 UItouch 或橡皮筋式绘图在 iPhone 中通过触摸绘制直线

> ID：11044278
> 
> 赞同：2
> 
> 时间：2012-06-15T03:39:18.010
> 
> 标签：iphone, ios4, core-graphics, line, uitouch

我是`iPhone`开发新手，

我正在制作一个应用程序，在该应用程序中我试图制作一条笔直的线，这样它就没有任何不规则的曲线，它必须是平滑的

我使用了核心图形，但它似乎不起作用。

[屏幕截图](http://www.flickr.com/photos/52688615@N05/7185493945/) **我只想用 UITouch 使这些以红色绘制的线条笔直。**

*我应该去openGl吗？*

如果是，我该如何实施。

```
 drawImage = [[UIImageView alloc] initWithImage:nil];
drawImage.frame = viewField.frame;
[self.view addSubview:drawImage];
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

mouseSwiped = NO;
UITouch *touch = [touches anyObject];

if ([touch tapCount] == 2) {
    drawImage.image = nil;
    return;
}

lastPoint = [touch locationInView:viewField];
//lastPoint.y = 20;

}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
mouseSwiped = YES;
UITouch *touch = [touches anyObject];    
CGPoint currentPoint = [touch locationInView:viewField];
//currentPoint.y -= 20; // only for 'kCGLineCapRound'
UIGraphicsBeginImageContext(viewField.frame.size);
//Albert Renshaw - Apps4Life
[drawImage.image drawInRect:CGRectMake(0, 0, drawImage.frame.size.width, drawImage.frame.size.height)]; //originally self.frame.size.width, self.frame.size.height)];
CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound); //kCGLineCapSquare, kCGLineCapButt, kCGLineCapRound
CGContextSetLineWidth(UIGraphicsGetCurrentContext(), 5.0); // for size
CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), 1.0, 0.0, 0.0, 1.0); //values for R, G, B, and Alpha
CGContextBeginPath(UIGraphicsGetCurrentContext());
CGContextMoveToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPoint.y);
CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), currentPoint.x, currentPoint.y);
CGContextStrokePath(UIGraphicsGetCurrentContext());
drawImage.image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

lastPoint = currentPoint;    
   }

 - (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {

  UITouch *touch = [touches anyObject];

  if ([touch tapCount] == 2) {
    drawImage.image = nil;
    return;
  }
  if(!mouseSwiped) {
    //if color == green
    UIGraphicsBeginImageContext(viewField.frame.size);
    [drawImage.image drawInRect:CGRectMake(0, 0, drawImage.frame.size.width,   drawImage.frame.size.height)]; //originally self.frame.size.width, self.frame.size.height)];
    CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound);   //kCGLineCapSquare, kCGLineCapButt, kCGLineCapRound
    CGContextSetLineWidth(UIGraphicsGetCurrentContext(), 5.0);
    CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), 1.0, 0.0, 0.0, 1.0);
    CGContextMoveToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPoint.y);
    CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPoint.y);
    CGContextStrokePath(UIGraphicsGetCurrentContext());
    CGContextFlush(UIGraphicsGetCurrentContext());
    drawImage.image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
   }
   } 
```

**提前致谢 ！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T19:59:03.713

从你发布的图片来看，我建议你改变你的方法。双击开始绘制。然后在多边形中的每个边缘点上点击（= touchesStarted 和 touchesEnded，而不是 touchesMoved）。在这些点之间画一条直线。双击结束多边形。如果终点距离起点足够近，您可以决定自动关闭路径。

# java - 使用 HttpPost 上传文件 Android

> ID：11044291
> 
> 赞同：2
> 
> 时间：2012-06-15T03:41:48.123
> 
> 标签：java, android, http

我上传这个文件对吗？这是我的代码：

* * *

## 删除代码

它基本上只是一个将文件（csv）发送到 Web 服务器的异步任务。

我正在返回状态码 400 :( 有人知道我做错了什么吗？

* * *

编辑：现在我返回状态码 411，但是当我指定内容长度时，它会返回 ClientProtocolException。

这是我现在的代码：

```
UploadTask uploadtask;

    public class UploadTask extends AsyncTask<Void, byte[], Boolean> {

        HttpPost httppost;

        @Override
        protected Boolean doInBackground(Void... params) {
            Boolean result = false;
            String id = projectIDs.get((int) spinner.getSelectedItemId());

            Log.i("TAG", id);
            try {

                l(send(String.valueOf(id), "http://" + site
                        + "/restlet/position.csv?project=" + id,
                        "/csv.csv"));

            } catch (ClientProtocolException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            } catch (JSONException e) {
                e.printStackTrace();
            }

            return result;
        }

        private void entity(String id, String file) throws JSONException,
                UnsupportedEncodingException, FileNotFoundException {
            // Add your data
            File myFile = new File(Environment.getExternalStorageDirectory(),
                    file);

            FileEntity fileEntity = new FileEntity(myFile, "multipart/form-data;");
            fileEntity.setChunked(true);
            long len = fileEntity.getContentLength();
            httppost.getParams().setParameter("project", id);
            httppost.setEntity(fileEntity);

            //httppost.addHeader("Content-Length",String.valueOf(len));
            httppost.setHeader("Content-Length", String.valueOf(len));
        }

        private String send(String id, String URL, String file)
                throws ClientProtocolException, IOException, JSONException {

            l(URL);

            HttpResponse response = null;

            httppost = new HttpPost(URL);

            entity(id, file);

            response = httpclient.execute(httppost);

            Header[] head = response.getAllHeaders();

            String str = String.valueOf(response.getStatusLine()
                    .getStatusCode());

            response.getEntity().consumeContent();

            return str;
        }

    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T08:49:25.157

这里的代码用于将文件上传到 Web 服务器 :) 经过数小时的努力，我得到了它，但不得不从 apache 导入 MultipartEntity、StringBody 和 FileBody

```
httppost = new HttpPost(URL);
MultipartEntity entity = new MultipartEntity();
entity.addPart("title", new StringBody("position.csv", Charset.forName("UTF-8")));
File myFile = new File(Environment.getExternalStorageDirectory(), file);
FileBody fileBody = new FileBody(myFile);
entity.addPart("file", fileBody);
httppost.setEntity(entity);
httppost.getParams().setParameter("project", id); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T12:51:14.193

要将文件上传到服务器，请参见以下链接：

[http://vikaskanani.wordpress.com/2011/01/11/android-upload-image-or-file-using-http-post-multi-part/](http://vikaskanani.wordpress.com/2011/01/11/android-upload-image-or-file-using-http-post-multi-part/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-13T15:49:06.480

在任何事情之前

1-选择文件使用这个或无论如何选择它

[https://github.com/iPaulPro/aFileChooser](https://github.com/iPaulPro/aFileChooser) 只需导入即可

2-不要忘记将此添加到清单

```
 <\uses-permission android:name="android.permission.INTERNET" />
  <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
  <uses-permission android:name="android.permission.RECORD_AUDIO" /> 
```

3-不要忘记更改java代码中的uri和php代码中的文件夹名称

4-只需复制并通过此代码即可使用我尝试过并且可以 100% 工作

爪哇

```
package com.example.uploadthestupidfile;

import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.net.HttpURLConnection;
import java.net.URL;
import com.ipaulpro.afilechooser.utils.FileUtils;
import android.annotation.SuppressLint;
import android.app.Activity;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.os.StrictMode;
import android.util.Log;
import android.view.Menu;
import android.view.MenuItem;
import android.widget.Toast;

@SuppressLint("NewApi")
public class MainActivity extends Activity
  {
private static final int FILE_SELECT_CODE = 0;
@Override
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    StrictMode.ThreadPolicy policy=new StrictMode.ThreadPolicy.Builder().permitAll().build();
    StrictMode.setThreadPolicy(policy);
      Intent intent = new Intent(Intent.ACTION_GET_CONTENT); 
        intent.setType("*/*"); 
        intent.addCategory(Intent.CATEGORY_OPENABLE);

        try {
            startActivityForResult(
                    Intent.createChooser(intent, "Select a File to Upload"),
                    FILE_SELECT_CODE);
        } catch (android.content.ActivityNotFoundException ex) {
            // Potentially direct the user to the Market with a Dialog
            Toast.makeText(this, "Please install a File Manager.", 
                    Toast.LENGTH_SHORT).show();
        }

}

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data)    {
    switch (requestCode) {
        case FILE_SELECT_CODE:
        if (resultCode == RESULT_OK) {
            // Get the Uri of the selected file 
            Uri uri = data.getData();
          //  Log.d(TAG, "File Uri: " + uri.toString());
            // Get the path
            String path = FileUtils.getPath(this, uri);

            Toast.makeText(this,""+path,Toast.LENGTH_LONG).show();

            try {
                upload(path);
            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
                Toast.makeText(this,"ErrorS",Toast.LENGTH_LONG).show();
            }
        //    Log.d(TAG, "File Path: " + path);
            // Get the file instance
            // File file = new File(path);
            // Initiate the upload
        }
        break;
    }
    super.onActivityResult(requestCode, resultCode, data);
}
 public void upload(String selectedPath) throws Exception {

        HttpURLConnection connection = null;
        DataOutputStream outputStream = null;
        DataInputStream inputStream = null;

        String pathToOurFile = selectedPath;
        String urlServer = "http://yoursite/upload_files.php";
        String lineEnd = "\r\n";
        String twoHyphens = "--";
        String boundary = "*****";

        int bytesRead, bytesAvailable, bufferSize;
        byte[] buffer;
        int maxBufferSize = 1 * 1024 * 1024;

            FileInputStream fileInputStream = new FileInputStream(new File(
                    pathToOurFile));

            URL url = new URL(urlServer);
            connection = (HttpURLConnection) url.openConnection();

            connection.setDoInput(true);
            connection.setDoOutput(true);
            connection.setUseCaches(false);

            connection.setRequestMethod("POST");

            connection.setRequestProperty("Connection", "Keep-Alive");
            connection.setRequestProperty("Content-Type",
                    "multipart/form-data;boundary=" + boundary);

            outputStream = new DataOutputStream(connection.getOutputStream());
            outputStream.writeBytes(twoHyphens + boundary + lineEnd);
            outputStream
                    .writeBytes("Content-Disposition: form-data; name=\"uploadedfile\";filename=\""
                            + pathToOurFile + "\"" + lineEnd);
            outputStream.writeBytes(lineEnd);

            bytesAvailable = fileInputStream.available();
            bufferSize = Math.min(bytesAvailable, maxBufferSize);
            buffer = new byte[bufferSize];

            bytesRead = fileInputStream.read(buffer, 0, bufferSize);

            while (bytesRead > 0) {
                outputStream.write(buffer, 0, bufferSize);
                bytesAvailable = fileInputStream.available();
                bufferSize = Math.min(bytesAvailable, maxBufferSize);
                bytesRead = fileInputStream.read(buffer, 0, bufferSize);
            }

            outputStream.writeBytes(lineEnd);
            outputStream.writeBytes(twoHyphens + boundary + twoHyphens
                    + lineEnd);

            int serverResponseCode = connection.getResponseCode();
            String serverResponseMessage = connection.getResponseMessage();

            fileInputStream.close();
            outputStream.flush();
            outputStream.close();

    } 
```

}

PHP 上传文件.php

```
 <?php
$target_path = "uploadedimages/"; //here folder name 
$target_path = $target_path . basename($_FILES['uploadedfile']['name']);

error_log("Upload File >>" . $target_path . $_FILES['error'] . " \r\n", 3,
"Log.log");

error_log("Upload File >>" . basename($_FILES['uploadedfile']['name']) . "     \r\n",
3, "Log.log");

 if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path)) {
    echo "The file " . basename($_FILES['uploadedfile']['name']) .
   " has been uploaded";
   } else {
  echo "There was an error uploading the file, please try again!";
  }
 ?> 
```

# java - 通过代码设置 Android Widget 刷新率

> ID：11044292
> 
> 赞同：0
> 
> 时间：2012-06-15T03:41:49.770
> 
> 标签：java, android, widget

我有一个带有偏好活动的小部件。在该活动中，允许用户选择他的刷新率。

有谁知道我如何通过代码更改刷新率？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T03:45:52.217

使用 AlarmManager 根据选定的刷新率安排更新服务启动。将刷新率保存到首选项。从服务更新小部件。根据首选项中的刷新率安排服务的下一次更新。如果用户更改刷新率，请取消任何警报并重新安排时间。

# python - 我在哪里可以得到 Python 2.7 中的 restful_lib 模块以及如何安装这个模块

> ID：11044294
> 
> 赞同：2
> 
> 时间：2012-06-15T03:42:27.960
> 
> 标签：python, http, rest

我正在学习 Python 并尝试测试一些其他 web_service 应用程序。从下面的代码中，我想做的是发布一些东西并得到结果。当我启动它时，控制台给了我这个：

```
Traceback (most recent call last):
  File "D:\workspaces_branch1\csse120\TestPythonProject\src\UTF-Rest-Client.py", line 9, in <module>
    import restful_lib
ImportError: No module named restful_lib 
```

我认为这是因为我没有这个 restful_lib 模块。我在哪里可以获得它以及如何安装它？另外，我想知道启动是否良好，如何获取返回的数据？

```
import argparse

#additional lib, need installation (see README)
import restful_lib

testQueueId = 0

# FUNCTIONS

#generate POST content

def postContent():

        xmlData = "<testQueueRequestByNewnancy>"+ \
        "<nancy>"+ \
        "<nancyTargetId>" + args.nancyTargetID + "</nancyTargetId>"+ \
        "<nancyUrl>" + args.nancyUrl + "</nancyUrl>"+ \
        "<nancyVersion>" + args.nancyVersion + "</nancyVersion>"+ \
        "<projectId>" + args.projectID + "</projectId>"+ \
        "<MumID>" + args.MumID + "</MumID>"+ \
        "</nancy>"+ \
            "<user>"+ \
                "<id>" + args.userID + "</id>"+ \
             "</user>"+ \
         "</testQueueRequestByNewnancy>"   

        printVerbose('xmlData =' + xmlData)
        return xmlData

#this function will print text only if verbose is on

def printVerbose(text):
    if args.verbose:
        print(text)

#this function will instruct scheduler through REST API call to do new tests

def callRestApi(content):
    printVerbose('calling REST scheduler API...')

    #recreate complete URL
    base_url = 'http://localhost:8080/test'
    #ensure http:// is at the beginning
    if (base_url[0:7].lower() != 'http://'):
        base_url = 'http://' + base_url
        printVerbose('url is ' + base_url)
        conn = restful_lib.Connection(base_url, username=args.login, password=args.password)
        headers = {'content-type':'text/json', 'accept':'text/json'}
        conn.request_post("/bynewnancy", args={'q': 'Test'}, headers=headers)
        #conn.request_get("/bynewnancy", args=content, returns=conn.ret, headers={'Accept': 'text/json'})

# MAIN

#definition des variables
if __name__ == '__main__':

    #parse command line arguments
    parser = argparse.ArgumentParser()

    parser.add_argument('-v', dest='verbose', action='store_true')
    parser.add_argument('-bt', '--nancyTargetID', required=True)
    parser.add_argument('-bu', '--nancyUrl', required=True)
    parser.add_argument('-bv', '--nancyVersion', required=False)
    parser.add_argument('-p', '--projectID', required=True)
    parser.add_argument('-s', '--MumID', required=True)
    parser.add_argument('-u', '--userID', required=True)
    #parser.add_argument('-url', '--httpURL', default='127.0.0.1')
    #parser.add_argument('-port', '--httpPort', default='8080')
    #parser.add_argument('-login', '--login', default='admin')
    #parser.add_argument('-pwd', '--password', default='admin')
    #parser.add_argument('-o', '--outputDir', default='.')

    #args is considered as a global variable
    args = parser.parse_args()

    postContent = postContent()
    callRestApi(postContent)

    print('----==============================---- ') 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-15T11:32:13.080

来自[http://code.google.com/p/python-rest-client](http://code.google.com/p/python-rest-client)`restful_lib` ，但它的最后一次更改是 4 年前，所以我不建议使用这个包。

我强烈推荐[`requests`](http://docs.python-requests.org)图书馆来完成这样的任务。带有 XML 数据的 POST 请求看起来像这样：

```
requests.post(url, data=my_xml_string) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T04:31:22.497

在您的代码中，有一行“#additional lib，需要安装（请参阅自述文件）”。我认为您最好查看自述文件并弄清楚如何安装“附加库”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T04:36:49.043

我认为您可以使用 Python 标准库中的 urllib 和 urllib2 来发出请求，如果您希望接收或发送编码或解码，您应该使用适当的编码器或解码器或解析器（例如，lxml、BeautifulSoup、json、simplejson 等），具体取决于数据格式和您的偏好。首先，我认为[如何](http://docs.python.org/howto/urllib2.html)从 python 文档中获取 Internet 资源可能会有所帮助。您还可以从 Python 标准库文档中查看 urllib 和 urllib2 更详细的文档。

# windows - 在 Windows 中使用 dd 的替代方法

> ID：11044296
> 
> 赞同：0
> 
> 时间：2012-06-15T03:43:08.700
> 
> 标签：windows, windows-7, dd

在我尝试在 Windows 上执行的构建操作中（7，如果重要的话），我需要对`dd status=noxfer conv=notrunc if=data.bin of=disk.flp`来自程序集的目标代码执行命令（nasm with `-f bin`）。有没有办法在**不**安装任何程序的情况下做到这一点？重申一下，在这个工作站上安装第三方程序是*完全不可能的。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T16:40:38.227

除非我遗漏了一些东西，否则您只需将 data.bin 文件中的数据附加到 disk.flp 文件的末尾即可。如果是这样，使用 CreateFile - SetFilePointer（到文件末尾）应该很容易 - WriteFile

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-29T23:53:07.523

dd 适用于 Windows。

我发现的最新源代码与 Git for Windows 捆绑在一起。安装后，二进制文件就保存在这里**C:\Program Files\Git\usr\bin\dd.exe**

# android - 滚动视图中的滚动视图如何工作？

> ID：11044303
> 
> 赞同：0
> 
> 时间：2012-06-15T03:44:27.320
> 
> 标签：android

我的布局结构是这样的

```
 <LinearLayout>
        <scrollview>
      <RelativeLayout>
       <scrollview>
          ...
         ...   
       </scrollview>
      </RelativeLayout>
      </scrollview>
      </LinearLayout> 
```

但问题是，当我们滚动内部滚动视图时，外部滚动视图也会滚动，因此我无法滚动包含 50 行并且只能读取 10 行的内部滚动视图，请任何人指导我，我该如何管理它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T03:59:01.090

由于 ListView 具有内置滚动功能，因此这种做法与 ScrollView 内的 ListView 模式相同（不适用于 Android），然后您也可以参考**[这个](http://trivedihardik.wordpress.com/2011/09/19/scrollview-inside-scrollview-scrolling-problem/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T18:55:36.330

如果我为滚动视图中的滚动视图执行此操作，它会很好地工作（仅针对滚动视图进行测试）。我不知道它是否适用于列表视图。

@Override public boolean onInterceptTouchEvent(MotionEvent ev) {

```
if(getFocusedChild() != null) {
          getParent().requestDisallowInterceptTouchEvent(true);
} 
```

……

# c++ - 我可以将 int 数组推送到 C++ 向量吗？

> ID：11044304
> 
> 赞同：19
> 
> 时间：2012-06-15T03:44:37.210
> 
> 标签：c++, stdvector

我的代码有问题吗？

```
std::vector<int[2]> weights;
int weight[2] = {1,2};
weights.push_back(weight); 
```

无法编译，请帮忙解释一下原因：

```
no matching function for call to ‘std::vector<int [2], std::allocator<int [2]> >::push_back(int*&)’ 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-06-15T04:16:44.653

数组不能在 STL 容器中使用的原因是因为它要求类型是可复制构造和可分配的（在 c++11 中也可移动构造）。例如，您不能对数组执行以下操作：

```
int a[10];
int b[10];
a = b; // Will not work! 
```

因为数组不满足要求，所以不能使用。但是，如果您*确实*需要使用数组（可能并非如此），您可以将其添加为类的成员，如下所示：

```
struct A { int weight[2];};
std::vector<A> v; 
```

但是，如果您使用`std::vector`or可能会更好`std::array`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-15T03:54:33.417

你不能简单地做到这一点。

最好使用以下任何一种：

1.  `vector <vector<int>>`（它基本上是一个二维向量。它应该适用于你的情况）

2.  `vector< string >`（字符串是一个字符数组，因此您需要稍后进行类型转换。这很容易。）。

3.  您可以声明一个结构（例如 S），其中包含`int` 类型数组，即

    `struct S{int a[num]}`，然后声明向量 `vector< S>`

因此，间接地将数组推入向量。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-12-26T18:21:27.813

数组也可以像这样添加到容器中。

```
 int arr[] = {16,2,77,29};
    std::vector<int> myvec (arr, arr + sizeof(arr) / sizeof(int) ); 
```

希望这可以帮助某人。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-15T04:11:50.573

数组不是可复制构造的，因此您不能将它们存储在容器中（`vector`在这种情况下）。您可以存储嵌套的`vector`或在 C++11 中的 a `std::array`。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-12-15T20:55:52.877

您应该使用`std::array`而不是简单的数组：

```
#include <vector>
#include <array>

std::vector<std::array<int, 2>> weights;
std::array<int, 2> weight = {1, 2};
weights.push_back(weight); 
```

或使用构造函数：

```
std::vector<std::array<int, 2>> weights;
weights.push_back(std::array<int, 2> ({1, 2}); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-01-29T15:28:26.580

一种可能的解决方案是：

```
 std::vector<int*> weights;
    int* weight = new int[2];
    weight[0] =1; weight[1] =2;
    weights.push_back(weight); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-15T03:56:08.910

只需使用

```
vector<int*>  .That will definitely work. 
```

关于同一主题的相关讨论：[将数组推入向量](https://stackoverflow.com/questions/4541556/pushing-an-array-into-a-vector)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-08-16T10:57:15.107

情况如：

```
int arr[3] = { 1, 2, 3 };
std::vector<int[]> v;
v.push_back(arr); 
```

不适用于错误“无法使用 .. 初始化向量中的数组”

这，可以很好地工作

```
int * arr = new int[3] { 1, 2, 3 };
std::vector<int*> v;
v.push_back(arr); 
```

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2012-06-15T04:16:59.490

要实例化向量，您需要提供一个类型，但 int[2] 不是类型，它是一个声明。

# iphone - 在 scheduleTimerWithTimeInterval 中调用类级别方法

> ID：11044305
> 
> 赞同：0
> 
> 时间：2012-06-15T03:44:40.503
> 
> 标签：iphone, ios, nstimer

我为警报创建了一个类级别的方法：

```
@interface TestAlert
@end
+ (void)showErrorAlert:(NSTimer *)message
{
.......
 UIAlertView *alert = [[UIAlertView alloc]initWithTitle:nil message:messageIn delegate:self cancelButtonTitle:nil otherButtonTitles:@"OK", nil];
    [alert show];
} 
```

我想直接调用它`scheduledTimerWithTimeInterval`：

```
 [NSTimer scheduledTimerWithTimeInterval:0.001 target:TestAlert selector:@selector( showErrorAlert:) userInfo:error repeats:NO]; 
```

当然有语法错误。

我知道我可以提出`showErrorAlert`一个方法：

```
- (void)showError:(NSTimer *)timer
{
    //NSLog(@"show error %@", error);
    [TestAlert showErrorAlert:(NSString *)[timer userInfo]];
} 
```

然后

```
[NSTimer scheduledTimerWithTimeInterval:0.001 target:self selector:@selector(showError:) userInfo:error1 repeats:NO]; 
```

但是`showErrorAlert`调用时会导致崩溃，因为`showErro`r 方法的错误信息已被释放。

我可以直接打电话吗`showErrorAlert`，如果我不能，我应该如何避免错误消息的发布？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T04:04:45.267

只需`[TestAlert class]`用作目标而不是`TestAlert`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T06:26:16.740

试试这个怎么样。您可以在此处找到提供的所有类型的 performSelector: 方法：

[http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsobject_Class/Reference/Reference.html](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsobject_Class/Reference/Reference.html)

*   执行选择器：
*   performSelector:withObject:
*   performSelector:withObject:withObject: – performSelector:withObject:afterDelay:
*   performSelector:withObject:afterDelay:inModes:
*   performSelectorOnMainThread:withObject:waitUntilDone:
*   performSelectorOnMainThread:withObject:waitUntilDone:modes:
*   performSelector:onThread:withObject:waitUntilDone:
*   performSelector:onThread:withObject:waitUntilDone:modes:
*   performSelectorInBackground:withObject:

# php - 我可以在页面加载上设置 http_referer 吗？

> ID：11044306
> 
> 赞同：1
> 
> 时间：2012-06-15T03:44:57.607
> 
> 标签：php, header, set, spoofing, referer

我想知道是否可以为正在加载的页面设置引用标题？

所以设置引用者而不是加载页面。

我有这段代码，我想执行并完美运行，但我也想将引用 url 附加到这里。

```
$data = file_get_contents('http://Domain');
$regex = '/<div\b[^>]+?\bid\s*=\s*"MyID"[^>]*>(?:((?:[^<]++|<(?!\/?div\b[^>]*>))+)|(<div\b[^>]*>(?>(?1)|(?2))*<\/div>))?<\/div>/i';
preg_match($regex,$data,$match);
//var_dump($match);
echo $match[0]; 
```

我想从另一个页面加载 div 并将引用设置为“域”

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T04:17:35.540

您可以设置引荐来源网址和许多其他内容，并且仍然使用`file_get_contents()`curl 是首选，因为它更快且更可定制。

```
<?php 
$url = 'example.com';
$referer = 'Domain';

$header[] = "Accept: text/xml,application/xml,application/json,application/xhtml+xml,text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5";
$header[] = "Cache-Control: max-age=0";
$header[] = "Connection: keep-alive";
$header[] = "Keep-Alive: 300";
$header[] = "Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7";
$header[] = "Accept-Language: en-us,en;q=0.5";

$opts = array('http'=>array('method'=>"GET",
                            'header'=>implode('\r\n',$header)."\r\n".
                            "Referer: $referer\r\n",
                            'user_agent'=> "Mozilla/5.0 (X11; U; Linux i686; pl-PL; rv:1.9.0.2) Gecko/2008092313 Ubuntu/9.25 (jaunty) Firefox/3.8"));

$context = stream_context_create($opts);

$data = file_get_contents($url, false, $context);
?> 
```

或者你可以使用 curl：

```
<?php 
$curl = curl_init();
curl_setopt($curl, CURLOPT_URL, $url);
curl_setopt($curl, CURLOPT_USERAGENT, 'Mozilla/5.0 (X11; U; Linux i686; pl-PL; rv:1.9.0.2) Gecko/2008092313 Ubuntu/9.25 (jaunty) Firefox/3.8');
curl_setopt($curl, CURLOPT_HTTPHEADER, $header);
curl_setopt($curl, CURLOPT_HEADER, 0);
curl_setopt($curl, CURLOPT_REFERER, $referer);
curl_setopt($curl, CURLOPT_ENCODING, 'gzip,deflate');
curl_setopt($curl, CURLOPT_AUTOREFERER, true);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
curl_setopt($curl, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($curl, CURLOPT_TIMEOUT, 30);

$data = curl_exec($curl);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T04:14:39.260

您应该能够像任何时候使用 curl 一样使用内容 jsut...通过设置 CURLOPT_RETURNTRANSFER 以便您可以使用数据...

```
$ch = curl_init();
curl_setopt_array($ch, array(
  CURLOPT_RETURNTRANSFER => true,
  CURLOPT_REFERER => 'your referer value'
  CURLOPT_URL => 'http://Domain'
));

$data= curl_exec($ch);
curl_close($ch);

$regex = '/<div\b[^>]+?\bid\s*=\s*"MyID"[^>]*>(?:((?:[^<]++|<(?!\/?div\b[^>]*>))+)|(<div\b[^>]*>(?>(?1)|(?2))*<\/div>))?<\/div>/i';
preg_match($regex,$data,$match);
//var_dump($match);
echo $match[0]; 
```

# javascript - jQuery 延迟：“then”...“when”...“join”或“blockUntilDone”在哪里？

> ID：11044317
> 
> 赞同：1
> 
> 时间：2012-06-15T03:47:09.567
> 
> 标签：javascript, jquery, asynchronous, jaydata

我正在使用 JayData.js 库。它工作得很好。但是，在某些情况下，我在函数树的深处有一个 toArray() 调用。与其尝试从那里访问我的“忙碌”信号，不如尽快使用方法块。那可能吗？我正在描绘类似“context.Groups.toArray(myObservableVar).block()”的东西。

更新 1：从返回值上使用“then”和“when”运算符判断，JayData 库似乎返回了一个 jQuery 延迟对象。有没有相应的“加入”方法——意思是等待完成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T16:01:52.297

事实上 JayData toArray() （以及所有相关的数据返回或保存/更新方法）实现了 jQuery deferred。从 1.0.5 开始，您必须包含 JayDataModules/deferred.js 才能使此功能正常工作。

对于您的用例`$.when`可能是一个答案：

```
var customers = context.Customers.toArray();
var products = context.Products.toArray();
var suppliers = context.Suppliers.toArray();

$.when(customers, products, suppliers).then(function(customers, products, suppliers) {
   //we have everything here
   //notice the the parameter names are shadowed as the var customers variable only
   //holds a promise not the value
  customers.forEach( ... );
  products[12].ProductName = "X";
 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T15:17:47.137

一种`blockUntilDone()`方法会违反延迟执行和继续的原则。JayData`toArray()`是异步的*，因为*它旨在不阻止调用者。

如果你想要这种代码：

```
// Initialize context and groups...

var arrayOfGroups = context.Groups.toArray();  // Want synchronous behavior.

// Do something with 'arrayOfGroups'... 
```

试图阻止直到延迟解决不是解决方案。将代码的最后一部分移到传递给的回调中`toArray()`：

```
// Initialize context and groups...

context.Groups.toArray(function(arrayOfGroups) {
    // Do something with 'arrayOfGroups'...
}); 
```

[或者，使用done()](http://api.jquery.com/deferred.done/)或[then()](http://api.jquery.com/deferred.then/)绑定到返回的承诺：

```
context.Groups.toArray().done(function(arrayOfGroups) {
    // Do something with 'arrayOfGroups'...
}); 
```

# arrays - 部分工作数组/hitTestobject

> ID：11044322
> 
> 赞同：0
> 
> 时间：2012-06-15T03:47:35.883
> 
> 标签：arrays, actionscript-3, if-statement

我正在尝试使用数组的新事物并且遇到了一些困难。我正在尝试创建 1 个类的多个实例并将它们放入一个数组中。

我正在创建这样的实例：

```
public function creatingitem(e:TimerEvent)
    {
    amtcreated = Math.ceil(Math.random() * 4);
    while (amtcreated >= 1)
            {
                amtcreated--;
                var i:Number = Math.ceil(Math.random() * 3);
                switch (i)
                {
                    case 1 :
                        //Object1
                        objectnum = 1;
                        objectwei = 3;
                        r = new Board(objectnum,objectwei,stagw,stagh);
                        addChild(r);
                        fallingitem.push(r);
                        break;
                    case 2 :
                        //Object2
                        objectnum = 2;
                        objectwei = 4;
                        c = new Board(objectnum,objectwei,stagw,stagh);
                        addChild(c);
                        fallingitem.push(c);
                        break;
                    case 3 :
                        //Object3
                        objectnum = 3;
                        objectwei = 4;
                        l = new Board(objectnum,objectwei,stagw,stagh);
                        addChild(l);
                        fallingitem.push(l);
                        break;
                    default :
                        break;
                }
            }
} 
```

一旦这些被创建，他们会检查它们是否与主球发生碰撞：

```
 public function hitcheck(e:Event)
    {
        for (var v:int = fallingitem.length - 1; v >= 0; v--)
        {
            if (ball.hitTestObject(fallingitem[v]))
            {
                                 trace(fallingitem[v]);
                if (fallingitem[v] == r)
                {
                    bonusscore +=  100;
                    fallingitem[v].removeitem();
                }
                else if (fallingitem[v] == c)
                {
                    bonusscore +=  75;
                    fallingitem[v].removeitem();
                }
                else if (fallingitem[v] == l)
                {
                    bonusscore +=  75;
                    fallingitem[v].removeitem();
                }

trace(bonusscore);
            }
        }
    } 
```

问题是我看到每个项目都因跟踪功能而受到打击。并非所有实例都满足 if 条件。例如，我可以有 2 个“r”实例，当我同时击中 1 时，将通过并添加到分数中，而另一个将继续过去。紧随 hitTestObject 之后的跟踪显示两者都被击中和注册，但我不确定它为什么不添加分数。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T13:17:04.213

你不能真的有2个`r`实例。当您创建实例时，如果您碰巧创建了 2 `r`，则第二条`r = new Board...`语句会覆盖引用，并且变量`r`引用的是第二条。这两个对象仍然存在，但变量只能引用其中一个，因此当您执行检查时，您将忽略以前设置`r`但不再存在的对象。

要解决此问题，您可以将`r`,`c`和`l`转换为`Array`s ，并且每当您创建实例时，将其添加到适当的数组中。然后，您将使用 执行检查，如果对象在数组中`(r.indexOf(fallingitem[v]) != -1)`，则返回。`true`

另一种方法是根据提供的代码检查`objectnum`构造函数中设置的任何值，因为您是根据它是否在 r、c 或 l 类别中设置该值。但是，如果该属性是私有的或可能会更改，这将不起作用。

# spring-mvc - extjs 直接存储和 extdirectspring 的问题

> ID：11044323
> 
> 赞同：0
> 
> 时间：2012-06-15T03:47:45.260
> 
> 标签：spring-mvc, extjs, extjs4, ext-direct

将 extdirectspring 与 extjs 4.1 一起使用，我正在尝试对我的直接存储操作响应执行一些回调操作（在我的情况下为销毁），但找不到一种方法来发送任何信息作为我的 store_modify 方法的响应的一部分。我可以在 form_post 中执行此操作，但不能在 store_modify 中执行此操作。

更具体地说，我如何发送自定义消息作为响应的一部分？

我在 form_post 中的做法

```
@ExtDirectMethod(FORM_POST)
@RequestMapping(value = "/userUpdate", method = RequestMethod.POST)
public void userUpdate(Locale locale,
        HttpServletRequest request, HttpServletResponse response,
        @Valid User user, BindingResult result) {
    ExtDirectResponseBuilder extResponse = ExtDirectResponseBuilder.create(
            request, response);
            extResponse.addResultProperty("message", "some custom msg");

} 
```

我的模特

```
Ext.define('PCE.model.User', {
extend : 'Ext.data.Model',
requires : [ 'Ext.data.UuidGenerator' ],
idgen : 'uuid',
.
.
.
proxy : {
    type : 'direct',
    api : {
        //create :
        //update : 
        destroy : userService.destroy
    },
    reader : {
        root : 'records'
    }
 }
}); 
```

我的弹簧控制器方法

```
@ExtDirectMethod(STORE_MODIFY)
public void destroy(User user) {
    userRepository.delete(user);

/* how to add some mesage here as in form post above? /*

} 
```

提前致谢。

# ruby - 如何使用 Ruby 加密文件？

> ID：11044324
> 
> 赞同：14
> 
> 时间：2012-06-15T03:47:45.807
> 
> 标签：ruby, security, encryption, openssl

我需要编写一个简单的工具来加密/解密文件。

我想最好的方法是使用 OpenSSL：

生成密钥：

```
openssl rand -base64 2048 > secret_key 
```

加密文件：

```
openssl aes-256-cbc -a -e -in file -out file.enc -k secret_key 
```

解密文件：

```
openssl aes-256-cbc -d -in file.enc -out file -k secret_key 
```

有没有一种简单的方法可以在 Ruby 中实现这一点？有没有更好的方法来做到这一点？也许使用 PGP？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-15T10:06:40.887

Ruby 的 OpenSSL 是 OpenSSL 本身的一个薄包装器，提供了几乎所有 OpenSSL 本身的功能，所以是的，所有示例都有一个一对一的映射：

```
openssl rand -base64 2048 > secret_key 
```

这实际上被夸大了，你使用的是 AES-256，所以你只需要一个 256 位的密钥，你这里没有使用 RSA。Ruby OpenSSL 无需您做出此决定，它会根据您要使用的算法自动确定正确的密钥大小。

您还犯了在加密期间使用确定性 IV 的错误。为什么？因为您根本没有指定 IV，所以 OpenSSL 本身将默认为全零字节的 IV。这不是一件好事，所以我将向您展示正确的方法，有关更多信息，请查看[Cipher 文档](http://ruby-doc.org/stdlib-1.9.3/libdoc/openssl/rdoc/OpenSSL/Cipher.html)。

```
require 'openssl'

# encryption
cipher = OpenSSL::Cipher.new('aes-256-cbc')
cipher.encrypt
key = cipher.random_key
iv = cipher.random_iv

buf = ""
File.open("file.enc", "wb") do |outf|
  File.open("file", "rb") do |inf|
    while inf.read(4096, buf)
      outf << cipher.update(buf)
    end
    outf << cipher.final
  end
end

# decryption
cipher = OpenSSL::Cipher.new('aes-256-cbc')
cipher.decrypt
cipher.key = key
cipher.iv = iv # key and iv are the ones from above

buf = ""
File.open("file.dec", "wb") do |outf|
  File.open("file.enc", "rb") do |inf|
    while inf.read(4096, buf)
      outf << cipher.update(buf)
    end
    outf << cipher.final
  end
end 
```

如您所见，加密和解密非常相似，因此您可以将流式读/写合并到一个共享方法中，然后将正确配置`Cipher`的文件名和相应的文件名传递给它，为了清楚起见，我只是明确说明了它们。

如果您想对密钥（也可能是 IV）进行 Base64 编码，您可以使用[Base64](http://ruby-doc.org/stdlib-1.9.3/libdoc/base64/rdoc/Base64.html)模块：

```
base64_key = Base64.encode64(key) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-15T03:57:40.287

Ruby 有一个[OpenSSL 库](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/openssl/rdoc/OpenSSL.html)，可以处理繁重的工作。

# mongodb - 确保 MongoDB 中跨文档的数据一致性

> ID：11044325
> 
> 赞同：0
> 
> 时间：2012-06-15T03:47:46.087
> 
> 标签：mongodb, mongoid

我正在开发一个 Rails 应用程序，它实现了一些社交网络功能，如关系、关注等。到目前为止，一切都很好，直到我遇到了多对多关系的问题。如您所知，mongo 缺少连接，因此推荐的解决方法是将关系存储为两个相关文档上的 id 数组。好的，这有点多余，但它应该可以工作，让我们说：

```
field :followers, type: Array, default: []
field :following, type: Array, default: []

def follow!(who)
  self.followers << who.id
  who.following << self.id
  self.save
  who.save
end 
```

这工作得很好，但这是我们需要事务的情况之一，呃，但 mongo 不支持事务。如果 id 被添加到 'followed' 关注者列表而不是 'follower' 关注列表中怎么办？我的意思是，如果第一个文档被正确修改，但第二个文档由于某种原因无法更新。

可能是我太悲观了，但没有更好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T21:00:11.543

我建议只在一个方向存储关系，将某人关注的用户存储在他们的用户文档中作为“关注”。那么如果需要查询用户U1的所有follower，可以查询，`{users.following : "U1"}` 因为可以对数组进行多键索引，如果对这个字段进行索引，查询会很快。

仅朝那个方向发展的另一个原因是单个用户对他们可能关注的不同用户的数量有实际限制。但是，真正受欢迎的用户可能拥有的关注者数量可能接近您系统中的用户总数。您希望避免在可能很大的文档中创建数组。

# java - 从数组到 BufferedImage 的错误转换

> ID：11044329
> 
> 赞同：3
> 
> 时间：2012-06-15T03:48:59.270
> 
> 标签：java, arrays, bufferedimage

图像转换为 RGB 灰度。
接下来，将 Grayscale-image 转换为数组，执行该数组以定义转换。结果，数组由“0”和“255”组成。

然后，我需要把这个数组变成 BufferedImage。

我使用了代码：

```
public static BufferedImage getImageFromArray(int pixelsMain[][], int width, int height) throws IOException {

        int pixels[] = new int[320*240];

        for(int i=0, numb=0; i<pixelsMain.length; i++)
            for(int j=0; j<pixelsMain[i].length; j++){
                pixels[numb]=pixelsMain[i][j];
                numb++;
            }

        BufferedImage image = new BufferedImage(width, height, BufferedImage.TYPE_BYTE_GRAY);
        WritableRaster raster = (WritableRaster) image.getData();
        raster.setPixels(0,0,width,height,pixels);
        try {
            ImageIO.write(image, "bmp", new FileOutputStream("[path]"));
        } catch (IOException e) {
            e.printStackTrace();
        }
        return image;
    } 
```

但是，执行该方法后 - “255”的所有值都转换为“-1”。

结果，图像是完全黑色的。

你能告诉我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T04:25:41.683

使用`image.getRaster()`而不是`(WritableRaster)image.getData()`. 后者正在制作副本，因此更改它没有效果。

# sql-server-2005 - 如何在 SQL Server 2005 中找到旋转两列的总和？

> ID：11044334
> 
> 赞同：0
> 
> 时间：2012-06-15T03:49:46.697
> 
> 标签：sql-server-2005, find, sum, pivot

我正在使用以下过程来检索总数并`presents`使用数据透视查询....我`absents`想要然后`SUM``Presents[P]``Absents[A]``calculate percentage`

ALTER PROCEDURE [dbo].[GetAttendence](@Course_Id varchar(30), @Semester varchar(10))

```
AS
   SELECT DISTINCT Enroll_Number, Course_Id, Semester, Isnull([P],0) 
                                           As Presents, Isnull([A],0) As Absents

    FROM (SELECT Enroll_Number, Course_Id, Semester, Flag from Attendence ) ps
    pivot(Count(Flag) for Flag in ([P],[A])) as pvt 

    WHERE Course_Id = @Course_Id and Semester = @Semester 
```

这是`Forula`为了实现......

总和 = 出席 + 缺席

百分比 = ((礼物/总和) * 100)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T07:27:17.620

试试这个：

```
select Enroll_Number,
       Course_Id,
       Semester,
       P as Presents,
       A as Absents,
       P+A as SumPA,
       1.0*P/(P+A)*100 as Percentage
from
  (
    select Enroll_Number, Course_Id, Semester, Flag
    from Attendence
    where Course_Id = @Course_Id and 
          Semester = @Semester
  ) ps
pivot
  (
    count(Flag) for Flag in ([P],[A])
  ) as pvt 
```

# r - 连接变量存在重复项时的内连接

> ID：11044336
> 
> 赞同：2
> 
> 时间：2012-06-15T03:50:17.803
> 
> 标签：r, sqldf

> **可能重复：**
> [如何在 R 中加入数据框（内、外、左、右）？](https://stackoverflow.com/questions/1299871/how-to-join-data-frames-in-r-inner-outer-left-right)

[这个问题](https://stackoverflow.com/questions/1299871/how-to-join-data-frames-in-r-inner-outer-left-right)很好地解决了 R 中的连接问题。

并且关于内部连接的[维基百科文章](http://en.wikipedia.org/wiki/Join_(SQL)#Inner_join)很有用。

我想在基础 R 中重现此结果。我不认为以下工作：

```
merge(employee,department,all=T)
merge(employee,department) 
```

因为合并变量上的重复。

但是，`sqldf`有效：

```
library(sqldf)
sqldf("select * from employee  inner join department ON employee.DepartmentID = department.DepartmentID") 
```

我的问题是：

1.  这是否意味着 merge 不会在这里执行内部联接。

2.  我怎样才能在base R中完成这个加入。

这是来自网站和上面示例的两个数据框架。

```
employee <- structure(list(LastName = c("Rafferty ", "Jones", "Steinberg", 
"Robinson", "Smith", "John"), DepartmentID = c("31", "33", "33", 
"34", " 34", " .")), .Names = c("LastName", "DepartmentID"), class = "data.frame", row.names = c(NA, -6L))

department <- structure(list(DepartmentID = c(31L, 33L, 34L, 35L), DepartmentName =    structure(c(4L,2L, 1L, 3L), .Label = c("Clerical", "Engineering", "Marketing", "Sales"), class = "factor")), .Names = c("DepartmentID", "DepartmentName"), class = "data.frame", row.names = c(NA, -4L)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T04:35:18.767

朱丽叶，

请看看这是否适合你。我检查了数据结构的结构，看看为什么结果不是预期的。

```
str(department)
str(employee)
employee$DepartmentID <- as.numeric(employee$DepartmentID)
merge(employee,department) 
```

# php - PHP 成员搜索的问题

> ID：11044344
> 
> 赞同：0
> 
> 时间：2012-06-15T03:51:23.780
> 
> 标签：php, forms

我对 PHP 还是很陌生，所以如果我忽略了一些简单的事情，请原谅我。我正在尝试构建一个成员搜索表单，允许人们通过输入一个或多个条件来查找成员：名字或用户名、城市、州、国家或电子邮件地址。如果输入单个字段，则该表单有效，或者仅当名称/用户名字段具有值时才输入多个字段。假设这是一个逻辑问题。提前致谢。

```
if (!isset($_POST['fname']))
{
//If not isset -> set with dummy value
$_POST['fname'] = "undefine";
} 
if (!isset($_POST['city']))
{
//If not isset -> set with dummy value
$_POST['city'] = "undefine";
} 
if (!isset($_POST['state']))
{
//If not isset -> set with dummy value
$_POST['state'] = "undefine";
} 
if (!isset($_POST['country']))
{
//If not isset -> set with dummy value
$_POST['country'] = "undefine";
} 
if (!isset($_POST['email']))
{
//If not isset -> set with dummy value
$_POST['email'] = "undefine";
} 

// DEFAULT QUERY STRING
$queryString = '';

if ($_POST['fname'] != '') {
  $fname = $_POST['fname'];
  $fname = stripslashes($fname); 
  $fname = strip_tags($fname);
  $fname = preg_replace('#[^A-Za-z 0-9]#i', '', $fname);
  $fname = mysql_real_escape_string($fname);
  $queryString = "(firstname LIKE '%$fname%' OR username LIKE '%$fname%')";
} else {
  $queryString = '';
} 

if ($_POST['city'] != '') {

    if (($_POST['fname'] != '') || ($_POST['state'] != '') || ($_POST['country'] != '') || ($_POST['email'] != '')){
        $city = $_POST['city'];
        $city = stripslashes($city); 
        $city = strip_tags($city);
        $city = preg_replace('#[^A-Za-z 0-9]#i', '', $city);
        $city = mysql_real_escape_string($city);
      $queryString .= " AND city='$city'";
    }  else {
  $city = $_POST['city'];
        $city = $_POST['city'];
        $city = stripslashes($city); 
        $city = strip_tags($city);
        $city = preg_replace('#[^A-Za-z 0-9]#i', '', $city);
        $city = mysql_real_escape_string($city);
  $queryString .= "city='$city'";
  } 
  } else {
  $queryString .= '';
}   

if ($_POST['state'] != '') {

    if (($_POST['fname']) || ($_POST['city']) || ($_POST['country']) || ($_POST['email'])){
      $state = $_POST['state'];
        $state = stripslashes($state); 
        $state = strip_tags($state);
        $state = preg_replace('#[^A-Za-z 0-9]#i', '', $state);
        $state = mysql_real_escape_string($state);
      $queryString .= " AND state='$state'";
    }  else {
  $state = $_POST['state'];
        $state = stripslashes($state); 
        $state = strip_tags($state);
        $state = preg_replace('#[^A-Za-z 0-9]#i', '', $state);
        $state = mysql_real_escape_string($state);
  $queryString .= "state='$state'";
  } 
  } else {
  $queryString .= '';
}   

if ($_POST['country'] != '') {

    if (($_POST['fname']) || ($_POST['city']) || ($_POST['state']) || ($_POST['email'])) {
  $country = $_POST['country'];
  $queryString .= " AND country='$country'";
  }
  else {
  $country = $_POST['country'];
  $queryString .= "country='$country'";
  }
} else {
  $queryString .= '';
}   

if ($_POST['email'] != '') {

    if (($_POST['fname']) || ($_POST['city']) || ($_POST['state']) || ($_POST['country'])){
      $email = $_POST['email'];
                $email = stripslashes($email); 
        $email = strip_tags($email);
        $email = preg_replace('#[^A-Za-z 0-9,.@-]#i', '', $email);
        $email = mysql_real_escape_string($email);
      $queryString .= " AND email='$email'";
    }  else {
  $email = $_POST['email'];
  $queryString .= "email='$email'";
  } 
  } else {
  $queryString .= '';
}   

//////////////  QUERY THE MEMBER DATA USING THE $queryString variable's value
$sql = mysql_query("SELECT id, username, firstname, city, state, country FROM members WHERE $queryString AND emailactivated='1' ORDER BY id ASC"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T03:55:22.427

绝对是构建查询字符串的非常可怕的方法。我会说废弃它并重新开始，但由于你是新人，我们只会使用你所拥有的。

第一步是停止假设您的 SQL 正在运行。您的查询调用没有任何错误检查，因此您以有用的反馈方式获得零。因此，将查询调用更改为：

```
$sql = mysql_query(...query...) or die(mysql_error()); 
                               ^^^^^^^^^^^^^^^^^^^^^^---add this 
```

现在，您将获得实际 mysql 错误消息的一个很好的转储，以及一个查询片段，以解释查询的错误位置/方式。最有可能的是，鉴于您在其中添加的所有这些字段，您忘记了空格或其他内容，并使查询看起来像（注意and`p=qand z=y`之间缺少空格）。`q``and`

收到这些错误消息后，您将更容易找出语法错误的位置以及修复它所需的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T04:04:13.310

我看到的几个问题：

1.  在您的`isset`测试中，您将未定义的变量设置为`'undefine'`，但是当您创建查询时，您将测试`''`. 这意味着如果名称为空，您将一直在寻找名为 的人`undefine`。

2.  您不应该尝试`$_POST`使用您的代码修改变量。您需要加载`$_POST`到另一个变量并在代码中使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T04:47:31.880

// 像这样获取所有发布的数据

```
if(isset($_POST['fname']))
{
   $fname=$_POST['fname'];
} 
```

//获取所有字段值

```
if(empty($fname))
{
}
else
{
     $where . ="fname=$fname and ";
}  
//Check and build where for each field 

//  then remove the last and 

$where  = rtrim($where, ' AND ');

if (empty($where)) {
         $where_str = NULL;
      } else {
         $where_str = "WHERE $where";
      } 

$query ="select fieldNames from tableName ";

$query . =$where_str; 
```

# logging - 我应该如何在 Sencha Touch 2 中使用 Ext.Logger？

> ID：11044347
> 
> 赞同：2
> 
> 时间：2012-06-15T03:51:38.067
> 
> 标签：logging, touch, extjs

我正在使用 Sencha Touch 2 构建一个应用程序。

我想记录一些消息，但我不想到处乱扔控制台.log，所以我想了解更多关于 Ext.Logger 的信息。据我了解，此类在 sencha-touch-debug.js 中，但不在 sencha-touch.js 中（生产构建中使用的文件）

那么我应该如何使用 Ext.Logger？我假设这是您的典型日志记录类，即在开发时记录一些有用的消息，然后在生产构建中对其进行配置，使其安静。

但是，如果 Ext.Logger 类不在生产版本中，那它有什么好处呢？是否在构建时删除了对它的引用？我应该指定一些配置吗？

我似乎找不到关于这个类的任何文档，或者它应该如何使用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T09:57:19.493

我有同样的问题，文档`Ext.Logger`真的很差。

不幸的是，您似乎无法将其用于生产。根据[Sencha Touch 论坛中的一个帖子](http://www.sencha.com/forum/showthread.php?185055-Ext.Logger-problem.&p=747844&viewfull=1#post747844)，`Ext.Logger`应该仅用于开发期间的调试。这就是为什么它只包含在 sencha-touch-debug.js 而不是 sencha-touch.js 中的原因。

# animation - 将 Tkinter 集成到 PYQT 中 - 或 - PYQT 中的绘画

> ID：11044348
> 
> 赞同：0
> 
> 时间：2012-06-15T03:51:58.050
> 
> 标签：animation, pyqt, tkinter, paint

快速提问：

我在 PYQT 中编码，我对 Tkinter 不感兴趣，直到我发现它的画布。我正在制作一个 2D 动画应用程序，我需要画布，但我也想在 PYQT 中完成。

我很想从 tkinter 中获取画布并将其作为父级放入我的 pyqt 小部件中。

任何信息都会很棒，或者是指向在 pyqt 中制作画布的教程的链接，因为经过大量搜索后我自己没有找到任何信息。我在 pygame 中半制作了一个，但也无法将其作为 PYQT 的父项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T04:55:05.680

如果这是 Qt，即使在 Python 上，您也可以继承 QWidget，重新实现 paintEvent 并使用 QPainter 进行绘制。从这个意义上说，任何小部件都是画布（但 paintEvent 是受保护的。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-20T21:05:44.800

Tkinter 和 Qt 是完全不同的框架，您不能将 Tkinter 小部件集成到 Qt 窗口中。然而，Qt 有绘图的解决方案。

如果你是 PyQt 的新手，我强烈推荐[这个教程](http://zetcode.com/gui/pyqt5/)。有一章是关于基础绘画的。之后，您就可以开始阅读[本文档了](https://doc.qt.io/)。这是 C++ Qt 的文档，但您仍然可以将其应用于 PyQt，因为 python 中的 Qt 类具有相同的方法和属性 :) 您只需将 c++ 语法调整为 python。您甚至可以[在那里](https://doc.qt.io/qt-5/qtexamplesandtutorials.html)找到教程。

当您对 PyQt 足够熟悉时，您可以研究绘画：我认为您可以[在小部件上绘画](https://doc.qt.io/qt-5/qpainter.html)（如果您没有很多要绘画的项目）或使用[GraphicsView 架构](https://doc.qt.io/qt-5/graphicsview.html)（更复杂但更适合绘画） . 这两种方式都将比 TKinter 画布更难一些，因为 Qt 是一个大框架并且有很多选择。

祝你好运 ：）

# perl - 如何使用 Selenium RC 运行/执行 Perl 脚本？

> ID：11044349
> 
> 赞同：0
> 
> 时间：2012-06-15T03:52:04.300
> 
> 标签：perl, selenium-rc

我使用 Selenium IDE 来记录和回放测试用例。我已将测试用例导出为 Perl 并将其保存为`test.pl`. 当我运行时`perl test.pl`，它会抛出一个错误，因为找不到某些元素，而相同的测试用例在 Selenium IDE 中完美运行。如何使用 Selenium RC 运行/执行这个 Perl 脚本？还安装了 Active Perl。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T07:13:01.293

您无需在 Selenium 中运行 perl 脚本，而是运行测试脚本并将其连接到 selenium 服务器。您需要弄清楚第 3 步中没有发生什么。

您可以添加暂停并获取页面的 html 源代码以帮助调试此类事情。有关详细信息，请参阅 WWW::Selenium 的文档。自动生成的脚本不像您自己手写的脚本那样清晰。我实际上发现它有助于保持我的网站的标记干净，因为我不想浪费时间弄清楚如何选择嵌套在 div 深处的东西。

# cxf - 骡 cxf 日志记录

> ID：11044350
> 
> 赞同：1
> 
> 时间：2012-06-15T03:52:21.733
> 
> 标签：cxf, mule

我在 mule 中有一个 SOAP 客户端流，并且我添加了 cxf 拦截器来查看请求响应。有没有办法在 mule 配置中查看确切的 HTTP 请求响应？

这是我的流程代码：

```
<http:outbound-endpoint address="http://84.19.253.166/service.asmx" method="POST" >
        <cxf:jaxws-client
        enableMuleSoapHeaders="false" 
        clientClass="org.tempuri.Service" 
        port= "ServiceSoap" 
        wsdlLocation="classpath:service.wsdl" 
        operation="ProcessRequest" 
        >
        <cxf:inInterceptors>
        <spring:bean class="org.apache.cxf.interceptor.LoggingInInterceptor" />
        </cxf:inInterceptors>
<cxf:outInterceptors>
    <spring:bean class="org.apache.cxf.interceptor.LoggingOutInterceptor"/>
</cxf:outInterceptors>    
     </cxf:jaxws-client>
     </http:outbound-endpoint> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T15:43:50.087

Mule 3 当前的 HTTP 连接器使用 Commons HttpClient 3.x 进行出站调度。

因此[，为 Commons HttpClient 启用完整的线路日志记录](http://hc.apache.org/httpclient-3.x/logging.html#Log4j_Examples)，您将看到远程服务器发送和接收的完整 HTTP 帧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-03T12:24:15.573

我强烈建议在 log4j2.xml 中添加一个简单的行

```
 <AsyncLogger name="org.apache.cxf" level="INFO"/> 
```

您可以在级别范围内的几个选项之间进行选择（INFO、WARN、DEBUG 等）

如果要将日志保存到其他文件，只需简单输入：

```
<AppenderRef ref="cxf_logs" /> 
```

但记得添加 File-Appender

```
<Appenders>
<RollingFile name="cxf_logs" fileName="${sys:mule.home}${sys:file.separator}logs${sys:file.separator}your-interfaces-cxf.log" 
             filePattern="${sys:mule.home}${sys:file.separator}logs${sys:file.separator}your-interfaces-cxf-%i.log">
        <PatternLayout pattern="%d [%t] %-5p %c - %m%n" />
        <SizeBasedTriggeringPolicy size="10 MB" />
        <DefaultRolloverStrategy max="10"/>
    </RollingFile>
   </Appenders> 
```

# php - 如何在 Linux 操作系统中开发 php 环境

> ID：11044351
> 
> 赞同：0
> 
> 时间：2012-06-15T03:52:22.203
> 
> 标签：php, linux, lamp

作为标题描述。

首先学习php的程序，想在Linux下编写代码。

因此，开发LAMP是必要的，我想了解如何构建环境。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T03:55:45.960

既然你说你使用的是 Ubuntu 和 CentOS。

[HowtoForge 中用于 Ubuntu 12.04 的 LAMP 教程](http://www.howtoforge.com/installing-apache2-with-php5-and-mysql-support-on-ubuntu-12.04-lts-lamp)

[来自 HowtoForge 的 CentOS 的 LAMP 教程](http://www.howtoforge.com/installing-apache2-with-php5-and-mysql-support-on-centos-6.2-lamp)

对于其他想要制作 LAMP 的人来说，只要稍加修改，这应该可以在任何发行版中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T03:58:16.990

什么类型的Linux？如果您使用的是 Debian 或 Ubuntu，这是最好的初学者友好指南之一：

[http://www.howtoforge.com/ubuntu_lamp_for_newbies](http://www.howtoforge.com/ubuntu_lamp_for_newbies)

它展示了如何安装 Apache/PHP/MySQL/ 和 PHPMyAdmin

尝试安装后者时，您可能会遇到一些错误，但本文下的评论之一对此提供了正确的解决方案。

# java - 使用 jar 作为资源存档的简单方法

> ID：11044353
> 
> 赞同：0
> 
> 时间：2012-06-15T03:52:31.350
> 
> 标签：java, resources, jar, classloader, embedded-resource

所以，我正在开发一个 Java 应用程序，我想将资源打包到 jar 文件中，以使它们更具可移植性。这些 jar 文件将与应用程序分开，并且仅包含资产（图像、声音、保存文件等）。

从这样的 jar 文件中访问任意资源的最简单方法是什么？我环顾四周，但找不到任何简单的教程。我知道我可以使用 ClassLoader 从 Jar 文件中检索输入流，但是如何获得引用正确 Jar 的 ClassLoader？

另外，如何以编程方式将一堆资源捆绑到这样的 jar 文件中？如果我能以我想要的方式让它工作，我想将它用于一堆东西，并希望能够动态创建任何需要的档案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T04:15:07.863

For reading resources, construct a new [URLClassLoader](http://docs.oracle.com/javase/7/docs/api/java/net/URLClassLoader.html) with the URLs of the JARs you want to load from:

```
File jarFile1 = new File("myjar.jar");
File jarFile2 = new File("myjar2.jar");
ClassLoader myJarLoader = URLClassLoader.newInstance(new URL[] {jarFile1.toURI().toURL(), 
                                                                jarFile2.toURI().toURL()}); 
```

For creating JAR files, you can use the [JarOutputStream](http://docs.oracle.com/javase/7/docs/api/java/util/jar/JarOutputStream.html) class.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T04:09:31.687

使用资源包路径应该不是问题`getResourceAsStream`，前提是带有资源的 jar 在应用程序的类路径中

一种从二进制文件自动创建 resource.jar 的方法是使用[apache ant](http://ant.apache.org/)进行构建，使用如下目标，您将获取每个`res`包资源并将其复制到目标 jar

```
<property name="binDir" value="bin" />
...

<target name="resources-jar">
    <echo message="Generating resources.jar" />
    <jar compress="true" destfile="resources.jar" filesetmanifest="mergewithoutmain">
        <fileset defaultexcludes="true" dir="${binDir}"> 
            <include name="**/res/**" />              
        </fileset>
    </jar>
</target> 
```

例如，由于以下包

```
 com/myapp/logic 
 com/myapp/logic/res
 com/myapp/menu
 com/myapp/menu/res 
 com/myapp/actions
 com/myapp/actions/res 
```

该`resource.jar`文件将包含以下包：

```
 com/myapp/logic/res
 com/myapp/menu/res 
 com/myapp/actions/res 
```

您也可以更改`res`为`assets`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T04:13:56.807

我的 jar 文件在类路径中 Thread.currentThread().getContextClassLoader().getResourceAsStream(path/file.ext) 将按名称加载资源。

jar -cvf jarname.jar 资源

将所有资源添加到 jarname.jar，尝试使用 ZipOutputStream 以编程方式实现相同。

# visual-c++ - _BLOCK_TYPE_IS_VALID 错误，它中断到 xmemory: void dellocate

> ID：11044354
> 
> 赞同：0
> 
> 时间：2012-06-15T03:52:31.753
> 
> 标签：visual-c++

我有一段代码可以在 C++ 中的 DevC++ 中编译，但在 VSC++ 中，它引发了 _Block_type_is_valid (phead->...) 错误，当我重试并中断时，它会`xmemory`运行`void deallocate(pointer _ptr, size_t type)`。我的问题是什么？以及如何解决？

编辑：

我有一个`Base`类和一个从类`Base1`继承的`Base`类：

```
class Base{
    public:
            virtual string getString() = 0;    
};

class Base1:: public Base2{
    private:
        char * message;
    public:
        Base1(string _message);
        ~Base1(); 
        string getString();
};
//Base1.cpp

Base1::Base1(string _message){/*Do coppy from _message to message*/}
Base1::~Base1(){delete[] message;} 
```

该函数`getString()`将返回`message`, 并在`main.cpp`我调用`Base *b = new Base1("something")`然后调用`b->getString()`，仅此而已。但是，在编译时，我遇到了如上所述的问题。这是我想念`Base`类的析构函数吗？或类似的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T08:21:25.477

您没有显示 Base1 构造函数。我认为问题出在 Base1 构造函数中。您可以像这样实现 Base1 构造函数：

```
Base1::Base1(string _message){ message = strdup(_message.c_str()); } 
```

# python-2.7 - 如何在脚本中调用脚本并解析参数

> ID：11044359
> 
> 赞同：1
> 
> 时间：2012-06-15T03:53:36.520
> 
> 标签：python-2.7

我正在尝试创建一个主脚本，它将调用多个解析日期变量开始和结束的 python 脚本。

我有 4 个脚本要调用

```
DAY_Level_Extract1.py
DAY_Level_Extract2.py
MONTH_Level_Extract1.py
MONTH_Level_Extract2.py 
```

我需要传递以下示例，然后在脚本中使用它：

```
start = datetime.date( year = 2012, month = 6, day = 1 )
end = datetime.date( year = 2012, month = 6, day = 2 ) 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T06:52:22.797

您应该将 Python 文件设计为可用作模块。然后 master 可以从其他函数导入它需要的函数，并使用所需的参数（如`start`和`end`）调用这些函数。

这是一个关于 Python 模块的教程。

[http://www.tutorialspoint.com/python/python_modules.htm](http://www.tutorialspoint.com/python/python_modules.htm)

我不知道你的“提取”功能是做什么的。我将想象他们从日志文件或类似文件中的行中提取一些数据。

因此，制作一个名为“dayextract.py”的源文件并将日期提取函数放入其中：

```
def day_extract1(line, start, end):
    ... # do actual day extracting stuff here
def day_extract2(line, start, end):
    ... # do actual day extracting stuff here 
```

然后，制作一个名为“monthextract.py”的源文件并将月份提取函数放入其中：

```
def month_extract1(line, start, end):
    ... # do actual month extracting stuff here
def month_extract2(line, start, end):
    ... # do actual month extracting stuff here 
```

最后，制作将完成所有工作的主程序。让它导入所需的功能：

```
import datetime

from dayextract import day_extract1, day_extract2
from monthextract import month_extract1, month_extract2

start = datetime.date( year = 2012, month = 6, day = 1 )
end = datetime.date( year = 2012, month = 6, day = 2 )

with open("some_file.txt") as f:
    for line in f:
        day_extract1(line, start, end)
        day_extract2(line, start, end)
        month_extract1(line, start, end)
        month_extract2(line, start, end) 
```

# php - jquerymobile - 页脚没有放在 Firefox 的底部，但可以在 chrome 中使用

> ID：11044360
> 
> 赞同：0
> 
> 时间：2012-06-15T03:53:38.133
> 
> 标签：php, jquery-mobile

[您可以在http://jsfiddle.net/9ZBAS/48/](http://jsfiddle.net/9ZBAS/48/)中查看代码

通过将 useragent 切换到 iphone，页脚未固定到 Firefox 的底部。但在没有用户代理开关的默认浏览器（即）firefox 中运行良好，并且在带有 iphone useragent 的 chrome 中运行良好。

有什么想法可以解决此问题，使其在 FF 和 chrome 以及 iphone 代理中都可以使用..？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T06:27:50.883

虽然我无法找到为什么`ui-footer-fixed`类没有被应用的确切原因，但下面的代码可以解决问题。

```
 $(document).bind('pageinit',function(){
        if (navigator.platform == 'iPad' || navigator.platform == 'iPhone' || navigator.platform == 'iPod') {
            $("div[data-role=footer][data-position=fixed]").addClass("ui-footer-fixed");
        }
    });​ 
```

我已经更新了你的小提琴[http://jsfiddle.net/9ZBAS/55/](http://jsfiddle.net/9ZBAS/55/)

# asp.net-mvc - SignalR 获取呼叫者 IP 地址

> ID：11044361
> 
> 赞同：12
> 
> 时间：2012-06-15T03:54:04.453
> 
> 标签：asp.net-mvc, signalr

是否可以通过 HubCallerContext 获取调用者的 IP 地址？还是我必须通过 HttpContext.Current...ServerVariables 才能得到它？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-11-27T05:56:38.630

使用 SignalR 2.0，`Context.Request`不再有`Items`（至少不是我所看到的）。我现在知道它是如何工作的。（如果您愿意，可以将 if / else 部分简化为三元运算符。）

```
protected string GetIpAddress()
{
    string ipAddress;
    object tempObject;

    Context.Request.Environment.TryGetValue("server.RemoteIpAddress", out tempObject);

    if (tempObject != null)
    {
        ipAddress = (string)tempObject;
    }
    else
    {
        ipAddress = "";
    }

    return ipAddress;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-05T22:31:15.900

问题`HttpContext.Request.Current.UserHostAddress`在于，`HttpContext.Request.Current`如果您是自托管的，那么它是空的。

在当前版本的 SignalR（截至 2012 年 12 月 14 日的“开发”分支）中获取它的方式如下：

```
protected string GetIpAddress()
{
    var env = Get<IDictionary<string, object>>(Context.Request.Items, "owin.environment");
    if (env == null)
    {
        return null;
    }
    var ipAddress = Get<string>(env, "server.RemoteIpAddress");
    return ipAddress;
}

private static T Get<T>(IDictionary<string, object> env, string key)
{
    object value;
    return env.TryGetValue(key, out value) ? (T)value : default(T);
} 
```

你曾经能够通过它`Context.ServerVariables`：

```
protected string GetIpAddress()
{
    var ipAddress = Context.ServerVariables["REMOTE_ADDR"];
    return ipAddress;
} 
```

那要简单得多，但他们出于我不完全理解的原因将其删除。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T06:21:05.887

根据[源码](https://searchcode.com/codesearch/view/26540631/)没有，HubCallerContext中没有这个属性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-06T22:45:30.970

另一种方式是

```
var serverVars = Context.Request.GetHttpContext().Request.ServerVariables;
var Ip = serverVars["REMOTE_ADDR"]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-18T14:30:26.393

你试过 HttpContext.Request.UserHostAddress 吗？在此处查看此示例：http: [//jameschambers.com/blog/continuous-communication-bridging-the-client-and-server-with-signalr](http://jameschambers.com/blog/continuous-communication-bridging-the-client-and-server-with-signalr)

不要认为这*完全*是您所希望的，但仍然应该解决问题。

# c# - 使用 C# 的图像抓取工具

> ID：11044362
> 
> 赞同：1
> 
> 时间：2012-06-15T03:54:06.343
> 
> 标签：c#, .net

我正在尝试浏览网页源代码，将其添加`<img src="http://www.dot.com/image.jpg"`到`HtmlElementCollection`. 然后，我尝试使用 foreach 循环遍历元素集合中的每个元素，并通过 url 下载图像。

这是我到目前为止所拥有的。我现在的问题是什么都没有下载，我认为我的元素没有被标签名正确添加。如果是，我似乎无法参考它们进行下载。

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    public void button1_Click(object sender, EventArgs e)
    {
        string url = urlTextBox.Text;
        string sourceCode = WorkerClass.ScreenScrape(url);
        StreamWriter sw = new StreamWriter("sourceScraped.html");
        sw.Write(sourceCode);
    }

    private void button2_Click(object sender, EventArgs e)
    {
        string url = urlTextBox.Text;
        WebBrowser browser = new WebBrowser();
        browser.Navigate(url);
        HtmlElementCollection collection;
        List<HtmlElement> imgListString = new List<HtmlElement>();
        if (browser != null)
        {
            if (browser.Document != null)
            {
                collection = browser.Document.GetElementsByTagName("img");
                if (collection != null)
                {
                    foreach (HtmlElement element in collection)
                    {
                        WebClient wClient = new WebClient();
                        string urlDownload = element.FirstChild.GetAttribute("src");
                        wClient.DownloadFile(urlDownload, urlDownload.Substring(urlDownload.LastIndexOf('/')));
                    }
                }
            }
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T04:31:33.927

那些你称之为导航的，你假设文档已准备好遍历并检查图像。但实际上加载需要一些时间。您需要等到文档加载完成。

将事件添加`DocumentCompleted`到您的浏览器对象

```
 browser.DocumentCompleted += browser_DocumentCompleted; 
```

将其实现为

```
static void browser_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
{
    WebBrowser browser = (WebBrowser)sender;
    HtmlElementCollection collection;
    List<HtmlElement> imgListString = new List<HtmlElement>();
    if (browser != null)
    {
        if (browser.Document != null)
        {
            collection = browser.Document.GetElementsByTagName("img");
            if (collection != null)
            {
                foreach (HtmlElement element in collection)
                {
                    WebClient wClient = new WebClient();
                    string urlDownload = element.GetAttribute("src");
                    wClient.DownloadFile(urlDownload, urlDownload.Substring(urlDownload.LastIndexOf('/')));
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T19:13:34.357

对于任何感兴趣的人，这是解决方案。这正是达米特所说的。我发现 Html Agility Pack 相当糟糕。那是我尝试使用的第一件事。这最终对我来说是一个更可行的解决方案，这是我的最终代码。

```
private void button2_Click(object sender, EventArgs e)
    {
        string url = urlTextBox.Text;
        WebBrowser browser = new WebBrowser();
        browser.Navigate(url);
        browser.DocumentCompleted += new WebBrowserDocumentCompletedEventHandler(DownloadFiles);
    }

    private void DownloadFiles(object sender, WebBrowserDocumentCompletedEventArgs e)
    {

        HtmlElementCollection collection;
        List<HtmlElement> imgListString = new List<HtmlElement>();

        if (browser != null)
        {
            if (browser.Document != null)
            {
                collection = browser.Document.GetElementsByTagName("img");
                if (collection != null)
                {
                    foreach (HtmlElement element in collection)
                    {
                        string urlDownload = element.GetAttribute("src");
                        if (urlDownload != null && urlDownload.Length != 0)
                        {
                            WebClient wClient = new WebClient();
                            wClient.DownloadFile(urlDownload, "C:\\users\\folder\\location\\" + urlDownload.Substring(urlDownload.LastIndexOf('/')));
                        }
                    }
                }
            }
        }
    }
} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T04:13:44.170

看看**[Html Agility Pack](http://htmlagilitypack.codeplex.com/)**。

您需要做的是下载并解析 HTML，然后处理您感兴趣的元素。它是完成此类任务的好工具。

# php - 在用户输入消息时显示字数并将字长限制为 300 个字

> ID：11044365
> 
> 赞同：5
> 
> 时间：2012-06-15T03:54:33.747
> 
> 标签：php, javascript, jquery, mysql

如何将短消息限制在 300 字以内，并在消息框顶部显示字数？当我尝试输入内容时，消息框顶部的数字似乎并没有减少。

Javascript：

```
<script type="text/javascript" language="javascript"> 
var content;
$('textarea').on('keyup', function(){
    var words = $(this).val().split(" ").length;
    $('#myWordCount').text("("+(300-words)+" words left)");
    if(words>=300){
        $(this).val(content);
        alert('no more than 300 words, please!');
    } else {    
        content = $(this).val();
    }
});
</script> 
```

留言表格：

```
 <form action="read_message.php" method="post"> 
 <table class="form_table"> 
  <tr> 
    <td style="font-weight:bold;">Subject:</td> 
    <td><input style=" width:300px" name="form_subject"/></td> 
    <td></td> 
  </tr> 
  <tr> 
    <td style="font-weight:bold;">Message:</td> 
    <td id="myWordCount">300 words left</td> 
    <td></td> 
  </tr> 
  <tr> 
    <td><input type="hidden" name="sender_id" value="<?php echo $sender_id?>"></td> 
    <td><textarea cols="50" rows="4" name="form_message"></textarea></td> 
    <td valign="bottom"><input type="submit" name="submit_message" value="send"></td> 
  </tr> 
 </table> 
</form> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T04:04:15.250

要限制使用的字母数量，请尝试以下操作：

```
var content;
$('textarea').on('keyup', function(){
    var letters = $(this).val().length;
    $('#myLetterCount').text(301-letters+" letters left");
    // limit message
    if(letters>=301){
        $(this).val(content);
        alert('no more than 300 letters, please!');
    } else {    
        content = $(this).val();
    }
}); 
```

计算单词使用以下内容：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){
    var content;
    $('textarea').on('keyup', function(){
        // count words by whitespace
        var words = $(this).val().split(/\s+/).length;
        $('#myWordCount').text(301-words+" words left");
        // limit message
        if(words>=301){
            $(this).val(content);
            alert('no more than 300 words, please!');
        } else {    
            content = $(this).val();
        }
    });
});
</script> 
```

演示：http: [//jsfiddle.net/NVSN7/6/](http://jsfiddle.net/NVSN7/6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T04:15:30.223

因此，这使用正则表达式来获取单词边界。更改正则表达式以更改它认为的“单词”。在按键时，字数会根据需要更新并设置文本。

```
$(function(){
  var wordcount = /\b/g;

  $('form').on({'keypress':function(event){
    var wordArray = $(this).val().match(wordcount);
   $("#wordcount").text(wordArray?event.data.max - wordArray.length /2:event.data.max);
  }},'textarea',{max:300});
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T04:16:55.900

我同意一些评论者的观点，即限制字符可能更有用。但是，您绝对可以计算单词，具体取决于您如何定义“单词”：

```
function countWords(str) {
    return str.split(/\s+/).length;
}

$('textarea[name="form_message"]').on('keyup', function () {
    var words = countWords($(this).val());
    $('#myWordCount').text(300 - words + ' words left');
} 
```

如果你想计算字母，你可以从`.split(/\s+/)`上面拿出来，它应该可以工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T04:05:02.980

试试这个... [http://www.jamesfairhurst.co.uk/posts/view/jquery_word_character_counter](http://www.jamesfairhurst.co.uk/posts/view/jquery_word_character_counter)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-15T05:02:56.737

试试这个：我在这里使用 js。

```
function countWord()
{
    var str = document.getElementById("myTextarea").value;
    var subStr = str.split(" ");

    if(subStr.length == 301)
    {
        document.getElementById("myTextarea").value = str.slice(0, -1);
        alert("Limit Reached!");
        return false;
    }
}

<textarea id="myTextarea" onkeypress="return countWord();" style="width:300px; height:200px;"></textarea> 
```

# javascript - jQuery表单提交事件根本不起作用

> ID：11044374
> 
> 赞同：0
> 
> 时间：2012-06-15T03:56:07.830
> 
> 标签：javascript, jquery, forms, form-submit

以下是我的代码。我想要的是每当提交表单以运行围绕一些定位和可见性移动的 3 条 jQuery 行。现在，每当我提交表单时，什么都没有发生。我哪里错了？

```
 <!DOCTYPE html>
   <html>
<head>
    <title>Webther - What's it like out?</title>
    <link rel="stylesheet" type="text/css" href="css/desktop.css" />
    <script src="http://code.jquery.com/jquery-latest.js"></script>

    <script type="text/javascript">
    function showResult(str)
    {
    if (str.length==0)
      { 
      document.getElementById("livesearch").innerHTML="";
      document.getElementById("livesearch").style.border="0px";
      return;
      }
    if (window.XMLHttpRequest)
      {// code for IE7+, Firefox, Chrome, Opera, Safari
      xmlhttp=new XMLHttpRequest();
      }
    else
      {// code for IE6, IE5
      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
      }
    xmlhttp.onreadystatechange=function()
      {
      if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
        var response=xmlhttp.responseText;
    if (response.length!=0)
      { 
        document.getElementById("livesearch").innerHTML=xmlhttp.responseText;
        document.getElementById("livesearch").style.border="1px solid #A5ACB2";
      }
        }
      }
    xmlhttp.open("GET","livesearch.php?q="+str,true);
    xmlhttp.send();
    }

    function ChangeVal()
    {
    document.getElementById("searchbox").value="";
    }
    </script>
        </head>
        <body>
            <div id="pagecontainer">
        <div id="indexlogocontainer">
            <img id="indexlogo" src="images/fulllogo.png" />
        </div>
        <div id="indexsearchcontainer">

                <div id="searchsurround"><form id="searchform"><input type="text" autocomplete="off" id="searchbox" name="q" size="50" value="Enter a city or zipcode here!" onkeyup="showResult(this.value)" onclick="ChangeVal()"/>
                &nbsp;&nbsp;<input type="image"  alt="Go!"   src="images/goicon.jpg" id="searchsubmit" /></form></div>
    <script type="text/javascript">
$("form").submit(function() {
    $("#indexlogocontainer").animate({ marginTop: '-40px' }, 1000);
    $("#mylocations").fadeOut("slow");
    $("#forecast").fadeIn("slow");
    return false;
  });​
    </script>
                <div id="livesearch"></div>

        </div>
        <div id="mylocations">
            <h1>My Locations</h1>
            <ul>
                <li>BLAH</li>
                <li>Blah!</li>
            </ul>
        </div>
        <div id="forecast" style="display: none;">
            PAGE INFO
        </div>
    </div>

</body>
    </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T04:01:08.397

```
$(document).ready(function(){

  $("form").submit(function() {
     $("#indexlogocontainer").animate({ marginTop: '-40px' }, 1000);
     $("#mylocations").fadeOut("slow");
     $("#forecast").fadeIn("slow");
     return false;
  });​

}); 
```

基本上，您必须在文档的准备功能（最好在头部）中编写函数，而不是在表单标签下方。

**关于您的代码的更多建议**

您正在使用来自谷歌代码的 jQuery 最新版本。将来版本可能会更改，并且很少有东西可能会被弃用，因此可能会停止您网页的一些功能。所以总是使用特定的版本，比如

`<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js">`

**和**

学习和使用jQuery的ajax功能。这将是简短而灵活的。参考[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T04:02:15.503

您需要添加提交类型的输入或编写调用以提交表单

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T04:19:17.430

这是错误的，一旦您使用以下代码中的警报框检查表单，就没有提交按钮和操作提交。由于表单未提交，因此以下代码未执行。我在评论中添加了警报框

```
$("form").submit(function() {
//alert("form is submitted");
$("#indexlogocontainer").animate({ marginTop: '-40px' }, 1000);
$("#mylocations").fadeOut("slow");
$("#forecast").fadeIn("slow");
return false;
});​ 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-15T04:12:47.817

```
<script type="text/javascript">
$("form").submit(function() {
$("#indexlogocontainer").animate({ marginTop: '-40px' }, 1000);
$("#mylocations").fadeOut("slow");
$("#forecast").fadeIn("slow");
return false;
});?
</script> 
```

当我尝试运行代码时，由于不必要的问号，我遇到了 js 问题。请删除？在脚本之后......它运行良好

# bash - BASH 脚本的 VIM 7.3 语法高亮错误

> ID：11044378
> 
> 赞同：4
> 
> 时间：2012-06-15T03:57:04.213
> 
> 标签：bash, vim, syntax-highlighting

我刚刚将操作系统从 Ubuntu 8.04 升级到了 Ubuntu 12.04，以及相应的 VIM 包。但是，我发现较新的 VIM 对 BASH 脚本的语法高亮很奇怪：（1）左括号和右括号的颜色不同；(2) 评论的颜色看起来不对；(3) 注释中的 BASH 关键字不应突出显示。我已经将`let g:is_bash=1`和添加`syntax on`到我的“.vimrc”文件中。我不确定这是 VIM 的错误还是我的设置有问题。这个问题有什么解决办法吗？谢谢。

错误语法突出显示的屏幕截图。 ![在此处输入图像描述](../Images/949152837fa18b053cbc0d98e3551367.png)

对应正确语法高亮的截图： ![在此处输入图像描述](../Images/0429709f449682f5479c6f1a8def0116.png)

新的（错误的）VIM 版本是：VIM - Vi IMproved 7.3（2010 年 8 月 15 日，编译 2012 年 5 月 4 日 04:21:49）包含的补丁：1-429

旧的（正确的）VIM 版本是：VIM - Vi IMproved 7.2（2008 年 8 月 9 日，2009 年 9 月 21 日 11:21:42 编译）包含的补丁：1-245

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T05:21:14.910

有时我对脚本使用`zsh`vim 语法高亮。`bash`不完美，但有点帮助。

```
:set ft=zsh 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-15T05:13:05.410

首先，所有的 Bash 语法高亮都被一千种方式破坏了。这并不罕见。您根本不能依靠编辑器来正确解析 Bash，语法只是允许太多复杂的可能性。Vim 比大多数做得更好。

[确保您拥有来自Dr Chip 页面](http://www.drchip.org/astronaut/vim/syntax/sh.vim.gz)的最新语法文件。它在 Vim 中并不总是最新的。

我相信您大多会注意到一些在某些时候添加的基本错误突出显示，这会经常出错并用难看的红色文本弄乱您的代码。我注意到一个新变量添加了几个版本，用于禁用尚未记录的此功能。`let g:sh_no_error=1`为我解决了大部分这些问题。

作为旁注，任何使用终端 vim 特别是 256 色方案的人都应该真正使用[csapprox](https://github.com/godlygeek/csapprox)。每当我看到那种奇怪的浅蓝色与黄色混合的屏幕截图时，通常意味着没有使用 csapprox。我不知道为什么它不包含在 vim 中并且默认启用。

# ruby - Ruby 中的 Person 类有问题

> ID：11044383
> 
> 赞同：1
> 
> 时间：2012-06-15T03:58:18.287
> 
> 标签：ruby, class

我认为我在正确的轨道上，但是当我尝试调用 p.first_name 时。我收到一个可以在屏幕截图中看到的错误，有人知道我做错了什么吗？

[截图 http://snag.gy/pj6ny.jpg](http://snag.gy/pj6ny.jpg) 如果看不到这里是链接： http: [//snag.gy/pj6ny.jpg](http://snag.gy/pj6ny.jpg)

这是代码：

```
class Person 

    def initialize (first_name, last_name, age)  
        @first_name = first_name  
        @last_name = last_name
        @age = age  

    end  
end 
```

当我进入时一切都很好

```
> p = Person.new("Earl", "Rubens-Watts", 2) 
```

但在那之后它变得很奇怪。期望的输出是：

```
 > p = Person.new("Earl", "Rubens-Watts", 2)
  > p.first_name
  => "Earl"
  > p.last_name
  => "Rubens-Watts"
  > p.age
  => 2 
```

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T04:00:55.353

您尚未定义`first_name`方法或声明任何属性。试试这个：

```
class Person 
    attr_reader :first_name, :last_name, :age
    def initialize (first_name, last_name, age)  
        @first_name = first_name  
        @last_name = last_name
        @age = age
    end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T04:09:22.957

当您调用构造函数时，其值会作为实例变量`new`正确存储在对象中。`p`但是，如果您不编写读取它们的相关`getter`方法（OOP 中的常用方法），则无法从对象范围之外访问它们。

为此：

```
class Person

    attr_reader: :first_name, :last_name, :age

    def initialize (first_name, last_name, age)
        @first_name = first_name
        @last_name = last_name
        @age = age
    end

end 
```

如果您还需要从外部修改它们的值，请`attr_accessor`改用它，它提供了自动`getter`和`setter`方法。

# android - 从 android 源构建 win_sdk - 抱怨缺少 tools\aapt.exe

> ID：11044398
> 
> 赞同：2
> 
> 时间：2012-06-15T04:01:12.290
> 
> 标签：android

我正在从android源代码构建windows sdk，使用：

```
make PRODUCT-<product>-win_sdk 
```

在 dir out/host/windows/ 中生成一个 zip 包。我使用“android list target”来验证 ti 是否有效。不幸的是它显示为空。添加一个'-v'它显示：

```
Ignoring platform 'android-2.3.7': tools\aapt.exe is missing. 
```

事实上，这个文件在 platform-tools 中。我将它和许多其他文件移动到platforms\android-2.3.7\tools。之后，“list target”命令显示“android-2.3.7”。可能没问题。

另一个问题仍然存在：模拟器停止。-show-kernel 选项启用内核日志，它显示发生了内核恐慌：

```
Kernel panic - not syncing: Attempted to kill init! 
```

谁能帮我？谢谢。

# c++ - 使用或不使用指针作为类引用。有什么不同？

> ID：11044399
> 
> 赞同：1
> 
> 时间：2012-06-15T04:01:26.273
> 
> 标签：c++, pointers

我有返回对象的函数，但我很困惑我应该返回对象本身还是指向对象的指针？

这是我的功能的一个例子：

```
CImage CDocument::AddImage(string Name, string fileName)
{
    CImage img = CImage();
    img.Name = Name;
    img.Path = fileName;
    img.IwImage = Iw2DCreateImage(&fileName[0]);

    Images.push_back(&img);

    return img;
} 
```

这是正确的还是我应该返回指向对象的指针：

```
CImage * CDocument::AddImage(string Name, string fileName)
{
    CImage * img = new CImage();
    img->Name = Name;
    img->Path = fileName;
    img->IwImage = Iw2DCreateImage(&fileName[0]);

    Images.push_back(img);

    return img;
} 
```

虽然最后一个代码没有正确编译，因为我收到了这个错误：

```
error C2440: 'initializing' : cannot convert from 'CImage' to 'CImage *' 
```

我认为这可能是一个非常简单的问题。我对 c++ 很陌生，所以请耐心等待。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T04:12:33.033

这段代码有多个问题，用 C++ 编码时要理解的基本区别是堆栈分配和堆分配之间的区别。当你这样做时`CImage img = CImage();`，对象是*在 stack*上创建的。该对象在函数结束时*自动销毁。*现在，如果您返回一个指向该对象的指针，调用者将获得一个指向无效内存位置的指针，因为该对象已经被销毁。您还将此对象的地址推送到向量中，一旦函数结束，该地址将再次无效。同样的问题也存在`fileName`。

为了解决这个问题，您需要从堆中分配内存，以便在函数结束时不会破坏对象。`new`您可以使用C++在堆上分配对象。所以你的代码会变成`CImage* pImage = new CImage();`. 请注意，在这种情况下，您有责任使用`delete`. `CImage*`因此，您可以使用此技术更改您的函数以返回。您也可以将此指针推入向量`Images`中。请注意，要释放分配给对象的内存`CImage`，您需要遍历`Images`向量并显式调用`delete`每个指针。

更好的方法是使用智能指针，例如`std::shared_ptr`在这种情况下，它将`delete`自动为您管理调用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T04:11:01.460

首先修复指针部分：

```
CImage * img = new CImage(); 
```

修复编译器错误。

考虑实例的生命周期。一个类的实例一旦到达其作用域的末尾就会被销毁——这里是函数的右括号。

第一个示例将在函数结束时为 img 销毁（并释放内存） - 这可能会产生意外行为，具体取决于`Images.push_back`.

对于返回的实例，如果调用代码如下所示，很可能会创建变量的副本：

```
CImage outterImage = myDocument.addImage(...); 
```

outterImage 很可能是 img 的副本，而不是 img 本身。

有关更多详细信息，请查看 C++ 中的实例生命周期。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T04:10:59.663

要初始化一个新指针，您需要使用`new`关键字。

```
CImage * img = new CImage(); 
```

这在堆上分配了一部分内存（内存的非本地部分），并在`CImage`那里创建对象。然后，`CImage`它获取指向该对象的指针并返回它，即使在函数离开其当前范围后，您也可以访问该对象。这是你应该做的。

但是，如果这样做，您可能会发现在代码返回后您`CImage img = CImage();`将无法引用该对象。`CImage`这是因为当您声明一个本地对象（不使用`new`）时，它存在于堆栈（内存的另一部分）中，并在函数返回时立即被销毁。这意味着即使您有一个指向它的指针，该对象也会消失，因此尝试访问它会给您一个段错误。

# php - 是否可以在 php 文件中包含 html 文件

> ID：11044403
> 
> 赞同：2
> 
> 时间：2012-06-15T04:01:54.073
> 
> 标签：php, jquery, include

我需要在 php 文件中包含一个 html 文件，我尝试在 php 文件中使用`include`and `require`，但没有应用 css 样式，只包含内容。有没有办法包含带有样式和 jquery 的完整 html 文件？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-15T04:05:26.410

没有 PHP 脚本之类的东西。只是碰巧包含 PHP 代码块的文件。你可以`include()`做任何你想做的事情，但除非包含的文件`<?php ... ?>`在某处有一个块，否则文件的内容将被简单地视为输出。

如果没有应用 css，那么请确保您的样式表正在实际加载，并且 HTML 包含在页面 DOM 中的适当位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T04:07:21.240

查看页面的源代码并查看它所显示的 CSS 文件的路径。该路径需要是绝对的或相对于 PHP 文件的路径。例子：

```
File structure:
./index.php
./html/myfile.html
./html/css/style.css

myfile.html includes "css/style.css"
index.php includes html/myfile.html 
```

现在，当您直接打开 myfile.html 时，它可能看起来没问题，但是当您将其包含在 PHP 文件中时，该样式将不会被应用。原因如下：

如果您查看 index.php 的源代码（在浏览器中打开并查看 DOM），您会看到它正在尝试加载`css/style.css`，但该文件不存在。相反，它应该是`html/css/style.css`这样，您必须编辑您的 HTML 文件以反映这一点。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2017-12-15T12:20:45.657

```
<script>
        $(function(){
        $("#include_html").load("includeheader.html");
        });        
</script>
............................................................
<body>
      <div id="include_html"></div>
................................
</body> 
```

# php - 带有 $inc 和 $addToSet 的 MongoDB upsert

> ID：11044405
> 
> 赞同：0
> 
> 时间：2012-06-15T04:02:15.523
> 
> 标签：php, mongodb

我的示例代码：

```
<?php
$m = new Mongo();

$db = $m->selectDB('metrics');
$collection = new MongoCollection($db, 'counter');

$url = $_SERVER['REQUEST_URI'];
$ip = '192.168.1.1';
$user = 'testuser';
$today = date('Y-m-d');

//upsert 1st
$filter = array('url' => $url, 'date' => $today);
$data2 = array(
                '$inc' => array("pageview" => 1),
                '$addToSet' => array('visitors' => array('ip' => $ip))
);
$options = array("upsert" => true);
$collection->update( $filter, $data2, $options );

//update the pageview for unique ip after that
$filter1 = array( 'url' => $url, 'date' => $today, 'visitors' => array( '$elemMatch' => array( 'ip' => $ip ) ) );
$update1 = array( '$inc' => array( 'visitors.$.pageview' => 1 ) );
$collection->update( $filter1, $update1 );

?> 
```

MongoDB中的数据：

第一次查看页面时这是正确的。

```
> db.counter.find();
{ "_id" : ObjectId("4fdaaf1176c5c9fca444ffd3"), "date" : "2012-06-14", "pageview" : 1, "url" : "/mongo/test.php", "visitors" : [ { "ip" : "192.168.1.1", "pageview" : 1 } ] } 
```

刷新页面后，添加奇怪的数据：

```
> db.counter.find();
{ "_id" : ObjectId("4fdaaf1176c5c9fca444ffd3"), "date" : "2012-06-14", "pageview" : 2, "url" : "/mongo/test.php", "visitors" : [ { "ip" : "192.168.1.1", "pageview" : 2 }, { "ip" : "192.168.1.1" } ] } 
```

我将如何更正查询并防止插入额外的 IP？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T06:51:51.990

如果我做对了，您粘贴的代码每次都以这种方式执行？
你得到另一个 ip 条目的问题是`'$addToSet' => array('visitors' => array('ip' => $ip))'$addToSet' => array('visitors' => array('ip' => $ip))`你的数组不包含一个只有一个 ip 的字段，它将插入另一个（你的字段还有一个 pageview 属性）。您将需要完全匹配。
不确定是否有针对此问题的一些指导方针，但我认为您应该使用类似的方法，作为文档结构：

{_id:ObjectId(.....),...，访问者：{ 192.168.1.1: {pageview:1}}。所以你可以简单地运行这个更新命令（在 mongoshell 语法中），它进一步将两个更新合并为一个:)：

`db.c.update({"url":"/test.php","date":"today"},{$inc : {"192.168.1.1" : {pageview:1}, pageview: 1}},true)`更新您的文档。无论如何，您需要用其他字符替换这些点，否则它不起作用。

# http - IIS URL 重写问题

> ID：11044419
> 
> 赞同：0
> 
> 时间：2012-06-15T04:04:16.490
> 
> 标签：http, iis, iis-7, url-rewriting, iis-7.5

我有一个指向托管帐户根的域名。在根目录中，我有一个 Web.Config（仅用于 url 重写）和 2 个应用程序起点，即：/josh 和 /sudoktion。

我的 url 重写规则就是为此而构建的：如果用户访问 www.sudoktion.com，它会转到 /sudoktion，同样，如果用户访问 josh.sudoktion.com，它会转到 /josh。这完美地工作。

```
<rule name="Rewrite1" stopProcessing="true">
<match url="(.*)" />
<conditions>
<add input="{HTTP_HOST}" pattern="^www.sudoktion.com$" />
</conditions>
<action type="Rewrite" url="sudoktion/{R:1}" />
</rule>

<rule name="Rewrite9" stopProcessing="true">
<match url="(.*)" />
<conditions>
<add input="{HTTP_HOST}" pattern="^josh.sudoktion.com$" />
</conditions>
<action type="Rewrite" url="josh/{R:1}" />
</rule> 
```

但是，我遇到的问题是，如果用户访问：sudoktion.com 而不附加 www。一开始它会将用户带到根目录并公开根目录的内容。我尝试使用 pattern="sudoktion.com$" 添加新规则并将其重写为 sudoktion/ ，但它会破坏 josh.sudoktion.com 的样式路径问题。

如何将 sudoktion.com/ 的重写规则添加到 sudoktion/ 而不破坏规则 josh.sukoktion.com 到 josh/ ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T21:51:56.467

在第一条规则的条件中添加以下额外行：

```
<add input="{HTTP_HOST}" pattern="^sudoktion.com$" /> 
```

并使其与这两个规则中的任何一个匹配。所以规则的整个 XML 将是：

```
<rule name="Rewrite1" stopProcessing="true">
  <match url="(.*)" />
  <conditions logicalGrouping="MatchAny">
    <add input="{HTTP_HOST}" pattern="^sudoktion.com$" />
    <add input="{HTTP_HOST}" pattern="^www.sudoktion.com$" />
  </conditions>
  <action type="Rewrite" url="sudoktion/{R:1}" />
</rule> 
```

# javascript - 将用户输入的 javascript 变量写入文档

> ID：11044423
> 
> 赞同：4
> 
> 时间：2012-06-15T04:04:54.180
> 
> 标签：javascript, variables, input

这似乎应该相对简单，我无法弄清楚我做错了什么。我需要通过文本框从用户那里获取输入（用户名），将其设置为变量，并将其显示在页面上。我不断得到“未定义”而不是用户名。

这是一个精简版。这将显示一个覆盖整个页面的 Div，其中包含供用户输入姓名的输入。当用户点击提交时，div 消失并且名称被设置为一个变量。我留下了表单处理功能，以防它们与问题相关。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">  
<HTML>
<HEAD>
<TITLE>HOME</TITLE>

</HEAD>
<BODY>
<CENTER>
<BR />
<FONT COLOR="RED" FACE="ARIAL BOLD" SIZE="5">test</FONT>
<BR />

<script language="javascript"> 
var currentTime = new Date();
var month = currentTime.getMonth() + 1;
var day = currentTime.getDate();
var year = currentTime.getFullYear();
var name = uservariable;

function setName(){

    uservariable = document.forms["username"]["user"].value;

    var ele = document.getElementById("nameInput");
    if(ele.style.display == "none") {
            ele.style.display = "block";
    }
    else {
        ele.style.display = "none";
    }
    document.getElementById('element_7').value = uservariable;

} 

function validateForm()
{
var x=document.forms["username"]["user"].value;
if (x==null || x=="")
  {
  alert("Rembrandt's first name was Beauregard, what is yours?");
  }
else
  {
  setName()
  } 
}

</script>

<DIV id="nameInput" STYLE="background-color:#ccc;position:fixed;width:100%;height:100%;top:0px;left:0px;z-index:1000;display:block;">

<br /><br /><FONT FACE="ARIAL BOLD" SIZE="3">First Name:</font><br />

<form name="username" action="javascript:validateForm()">
<input type="text" name="user" value="" size="20"><br>
<input type="submit" value="Start Shift">
</form> 
</div>

<script language="javascript"> 
document.write(name + "s LEADS SUBMITTED FOR " + month + "/" + day + "/" + year + ":</B>");
</script>
</center></td></tr></table>
</div>

</CENTER>
</BODY>
</HTML> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T04:26:42.923

```
<head>
  <script>

      function doStuff()
      {
        var nameElement = document.getElementById("someInput");
        var theName = nameElement.value;
        document.getElementById("someDiv").innerHTML += theName;
      }

  </script>
</head>

<html>

  <div id="someDiv">
    Hello
  </div>

  <br><br>

  <input id="someInput" type="text">
  <input type="button" value="Say Hello" onClick="doStuff()">

  <br>    
</html> 
```

# unix - 使用 sed 更新文件

> ID：11044424
> 
> 赞同：2
> 
> 时间：2012-06-15T04:04:57.357
> 
> 标签：unix, sed

我正在尝试在文件中查找和替换几个单词并尝试将该文件作为 .sql 文件执行

```
sed -e "s/wordToFind1/UnixFile/g" Check.sql;
sed -e "s/wordToFind2/WordToReplace2/g" Check.sql; 
```

在上面，我试图找到 wordToFind1 并将其替换为 UnixFile：/usr/bin/try.txt，然后尝试找到 wordToFind2 并将其替换为另一个词：tablename

**在**sed - Check.sql 之前：

```
servermonitor on
spool wordToFind1
select * from wordToFind2 
```

**在**sed - Check.sql 之后：

```
servermonitor on
spool /usr/bin/try.txt
select * from tablename 
```

完成上述更改后，我正在尝试执行 sql 文件。请帮忙！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T15:17:06.637

你有一些问题需要在这里解决。

# 在内部使用斜线 ( `/`)`s///`

首先，您要替换`wordToFind1`为`/usr/bin/try.txt`. 它最初不适用于该`s///`命令，因为替换字符串包含`/`. 这将是一个非常奇怪的命令！

```
sed -e 's/wordToFind1//usr/bin/try.txt/' Check.sql 
```

sed 会认为该命令`s/wordToFind1//`带有一些标志（例如`u`）和其他命令，但它没有任何意义并且会产生错误。一个解决方案是使用以下方法逃避每个`/`：`/usr/bin/try.txt``\`

```
$ sed -e 's/wordToFind1/\/usr\/bin\/try.txt/' Check.sql
servermonitor on
spool /usr/bin/try.txt
select * from wordToFind2 
```

然而，这很笨拙。`/`当您的替换字符串（甚至替换字符串）中有很多内容时，恕我直言，更好的解决方案是使用另一个字符作为`s///`. `/`不是每个人都知道这是可能的，但是可以使用任何其他字符来代替`s///`. 在这种情况下，您可以在表达式中尽可能多地使用，`/`而无需转义它们。在下面的示例中，我使用`#`而不是`/`，因此斜线不会`/usr/bin/try.txt`引起任何问题：

```
$ sed -e 's#wordToFind1#/usr/bin/try.txt#' Check.sql
servermonitor on
spool /usr/bin/try.txt
select * from wordToFind2 
```

# 使用多个`s///`命令

解决了，你也应该更换`wordToFind2`。`-e`这很简单：只需在同一个 sed 调用中传递另一个命令：

```
$ sed -e 's#wordToFind1#/usr/bin/try.txt#' -e 's/wordToFind2/tablename/' Check.sql
servermonitor on
spool /usr/bin/try.txt
select * from tablename 
```

（另一种选择是仅在一个字符串中添加多个选项，用分号分隔：

```
$ sed -e 's#wordToFind1#/usr/bin/try.txt#;s/wordToFind2/tablename/' Check.sql
servermonitor on
spool /usr/bin/try.txt
select * from tablename 
```

我发现它有时非常有用，使用更大的 sed 脚本，但它的可读性也较差）。

# 更新输入文件`-i`

现在，您需要更新`Check.sql`文件。这也很简单：只需将`-i`标志传递给 sed。此标志使 sed 更新原始文件。此外，此标志可以接收一个参数，即要添加到具有原始内容的备份文件的扩展名。在这种情况下，我将使用`.bkp`扩展。查看结果：

```
$ sed -i.bkp -e 's#wordToFind1#/usr/bin/try.txt#' -e 's/wordToFind2/tablename/' Check.sql
$ cat Check.sql
servermonitor on
spool /usr/bin/try.txt
select * from tablename 
```

现在，`Check.sql`变了。此外，还有一个`Check.sql.bkp`旧内容：

```
$ cat Check.sql.bkp 
servermonitor on
spool wordToFind1
select * from wordToFind2 
```

如果出现问题，这可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T04:45:50.947

我无法在 sed 中得到一些东西。所以我使用了awk。将 Replace1 和 Replace2 作为参数传递给 shell 脚本，该脚本将创建具有适当值的 ip.sql。

```
#!/bin/bash
awk -v R1=$1 -v R2=$2 '{gsub("wordToFind1",R1);gsub("wordToFind2",R2);print}' ip.sql > t.sql;
mv t.sql ip.sql; 
```

# ruby-on-rails - link_to 使用 rails 中的资源路由销毁

> ID：11044435
> 
> 赞同：2
> 
> 时间：2012-06-15T04:06:09.220
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rest, ruby-on-rails-3.1

（没有路线匹配 [DELETE] "/subscriptions"）

使用

```
<%= link_to 'Unsubscribe', subscriptions_path(feed_id: session[:read_random].last), method: :delete, remote: :true %> 
```

路线.rb：

```
resources :subscriptions 
```

我需要链接才能使用 DELETE 方法实际具有 /subscriptions/1 的 URI，但我似乎只能得到 /subscriptions?feed_id=1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T04:15:00.330

尝试指定要删除的 id 或对象：

```
<%= link_to 'Unsubscribe', subscription_path(session[:read_random].last), method: :delete, remote: :true %> 
```

# sql - MS Access Top 5 查询按月份和地区分组的多个条件

> ID：11044437
> 
> 赞同：2
> 
> 时间：2012-06-15T04:06:33.223
> 
> 标签：sql, ms-access-2007

我想使用前 5 名来捕获前 5 名的一些标准。

数据样式是月份日期、区域 1、子区域 1、子区域 2 等，类型，每行的唯一标识符。

我正在尝试做的是每个月和区域找到前 5 种类型。

样本数据：

```
 Date              Division        Sub Division       ID 
31/05/2012        Sales                              001
31/05/2012        Sales           Call Centre        002
31/05/2012        Sales           Call Centre        003
31/05/2012        Sales           Store              004
31/05/2012        Marketing                          005
31/05/2012        Marketing        TV                006
30/04/2012        Sales                              001
30/04/2012        Sales           Call Centre        002
30/04/2012        Sales           Call Centre        003
30/04/2012        Sales           Store              004
30/04/2012        Marketing                          005
30/04/2012        Marketing        TV                006 
```

等等。

我追求的输出是： 每个月在部门级别的前 5 名（不考虑子部门） 每个月在每个子部门级别的前 5

样本输出：

```
`Date          Top5Areas     Volume
31/05/2012    Sales         100
31/05/2012    Marketing     90
31/05/2012    HR            50
30/04/2012    Sales         100
30/04/2012    Marketing     90
30/04/2012    HR            50` 
```

`并根据各个区域的细分级别： ````
Date          Top5Areas     Volume
31/05/2012    Call Centre   100
31/05/2012    Store         90
31/05/2012    HR            50 
```

但每组 5 个。

我不应该如何做到这一点，并想知道我是否需要通过一些查询来建立结果，或者是否有更好的方法。

在此先感谢并感谢您的建议。

```
 `SELECT [TableA].[DisplayVar] AS DisplayVar, [TableB].[Date] AS MonthDate, TableC.        [Divison] AS Divison, Volume
    FROM (SELECT [TableA].[DisplayVar],
    [TableB].[Date],
    TableC.[Divison],
    Volume
      (  SELECT  COUNT(*) + 1
      FROM    (   SELECT [TableA].[DisplayVar], [TableB].[Date], TableC.[Divison], COUNT(*)     AS Volume
         FROM    ([TableA] INNER JOIN [TableB] ON [TableA].[ID] = [TableB].[ID]) LEFT JOIN     TableC ON [TableB].ID = TableC.Descriptor
         GROUP BY [TableA].[DisplayVar], [TableB].[Date], TableC.[Divison]
      ) AS T
      WHERE   T.[TableB].[Date] = Data.[TableB].[Date]
      AND     T.Volume > Data.Volume
    ) AS Rank
    FROM    (   SELECT  [TableA].[DisplayVar], [TableB].[Date], TableC.[Divison], COUNT(*)     AS Volume
      FROM    ([TableA] INNER JOIN [TableB] ON [TableA].[ID] = [TableB].[ID]) LEFT JOIN     TableC ON [TableB].ID = TableC.Descriptor
      WHERE   [TableB].[Date] BETWEEN Date() AND DateADD("m", -12, Date())

    GROUP BY[TableA].[DisplayVar], [TableB].[Date], TableC.[Divison]
    ) AS DATA
    )  AS Data
    WHERE (((Data.Rank)<=5))
    ORDER BY [TableB].[Date] DESC , Volume DESC;` 
```

* * *

 `## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T08:21:57.640

我能想到的唯一方法是在访问中每个日期（我认为你想要的）执行一次前 n 次访问是使用相关子查询。我认为最简单的方法类似于`ROW_NUMBER()`在其他 DBMS 中使用该函数，它向您的原始聚合查询添加一个附加字段，为每个部门/日期提供一个排名，最外面的 where 子句将其限制为排名小于或的行等于 5。

```
SELECT  Date,
        Division,
        Volume
FROM    (   SELECT  Date,
                    Division,
                    Volume,
                    (   SELECT  COUNT(*) + 1
                        FROM    (   SELECT  Date, Division, COUNT(*) AS Volume
                                    FROM    YourTable
                                    GROUP BY Date, Division
                                ) AS T
                        WHERE   T.Date = Data.Date
                        AND     T.Volume > Data.Volume
                    ) AS Rank
            FROM    (   SELECT  Date, Division, COUNT(*) AS Volume
                        FROM    YourTable
                        WHERE   Date BETWEEN DATE() AND DATEADD("m", -12, DATE())
                        GROUP BY Date, Division
                    ) AS DATA
        ) AS Data
WHERE   Rank <= 5 
```

这样做的缺点（或好处取决于您的要求）是它不处理平局，即如果您有 10 个具有相同数量的部门，则所有 10 个部门都将被退回，而不仅仅是其中的 5 个。

我不确定这是否正是您所需要的，但希望至少能让您朝着正确的方向前进。```

# jquery - jQuery 文件上传插件：如何上传到子文件夹？

> ID：11044438
> 
> 赞同：5
> 
> 时间：2012-06-15T04:06:41.417
> 
> 标签：jquery, jquery-plugins

我有一个在 PHP 站点上工作的 jQuery File Upload 插件。

我想知道是否可以将文件上传到动态命名的子文件夹中，而不是全部进入同一个上传文件夹？

原因是我需要一个单独的文件夹来存放用户在网站上创建的每个“项目”中上传的文件。例如，当用户创建项目时，他们为该项目上传的所有内容都会进入 /uploads/{$project_uid}/{$file_name}

我希望我已经正确地解释了自己，如果有人能在这里帮助我，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T10:43:09.053

首先，显而易见的是：出于明显的安全原因，您*实际上***不能** 使用 JavaScript/jQuery/jWhateverPlugin（即从客户端）设置上传目的地。

 ***但是您可以**将信息传递给服务器端引擎（在您的情况下是 PHP），它可以使用它来管理上传的实际存储。

存在各种工具包可以帮助您，例如您最初开始使用的 blueimp 的[jQuery File Upload或](http://blueimp.github.com/jQuery-File-Upload/)[Uploadify](http://www.uploadify.com/)，[Benno](https://stackoverflow.com/users/575047/benno)首次推广并似乎满足了您的要求。

因此，您需要做的是**自定义客户端大小和服务器端脚本**，以实现传递目录变量并使用它们来定义存储位置。

很大程度上基于[Uploadify 文档](http://www.uploadify.com/documentation/uploadify/customizing-the-server-side-upload-script/)，并使用您的`project_uid`变量，这看起来像这样：

在客户端（JavaScript + jQuery + Uploadify）：

```
var project_uid;
// populate project_uid according to your needs and implementation
// befor using uploadify

$('#file_upload').uploadify({
    'method'   : 'post',

    // pass your variable to the server
    'formData' : { 'project_uid' : project_uid },

    // optional "on success" callback
    'onUploadSuccess' : function(file, data, response) { 
        alert('The file was saved to: ' + data);
    }
}); 
```

在服务器端（PHP + Uploadify）：

```
// Set $someVar to 'someValue'
$untrustedProjectUid = $_POST['project_uid'];

// Remember to check heavily the untrusted received variable.
// Let's pretend you checked it, it passe your tests, so you
// initialized a trusted var with it
$trustedProjectUid = ensureSecure( $untrustedProjectUid );

$targetFolder = '/uploads/' . $trustedProjectUid . '/' ; // Relative to the root

if (!empty($_FILES)) {
    $tempFile = $_FILES['Filedata']['tmp_name'];
    $targetPath = $_SERVER['DOCUMENT_ROOT'] . $targetFolder;
    $targetFile = rtrim($targetPath,'/') . '/' . $_FILES['Filedata']['name'];

    // Validate the file type
    $fileTypes = array('jpg','jpeg','gif','png'); // Put you allowed file extensions here
    $fileParts = pathinfo($_FILES['Filedata']['name']);

    if (in_array($fileParts['extension'],$fileTypes)) {
        move_uploaded_file($tempFile,$targetFile);
        echo $targetFolder . '/' . $_FILES['Filedata']['name'];
    } else {
        echo 'Invalid file type.';
    }
} 
```*

# android - Android fmod 在 android 2.1 上无法正常工作

> ID：11044439
> 
> 赞同：2
> 
> 时间：2012-06-15T04:06:41.303
> 
> 标签：android, fmod

我的游戏引擎正在使用 fmod 库来实现声音功能。在不同的 android 手机上测试项目后，我发现 fmod 在 android 2.2 及更高版本上正常工作，但在 android 2.1 上不正常。我观察到示例项目的清单文件提到最低 sdk 版本 8 (android 2.2)。我的客户希望游戏能够从 android 2.1 及更高版本运行。还有一个奇怪的观察，当我在 android 2.1 手机上安装和运行游戏时，我的应用程序会自动终止，但是当我在 android 2.1 模拟器上运行我的游戏时，我的游戏可以正常工作，除了声音被静音，即听不见。这是我在 android 2.1 硬件上运行时收到的错误消息：

> FMOD错误！(48) 试图使用需要硬件支持的功能。（即尝试在 Wii 上的软件中播放 GCADPCM 压缩声音）。

请通过回答以下问题帮助我：

1> 真的 fmod 不能在 android 2.1 上运行吗？如果没有，你能建议如何运行它。

2> 声音在 android 2.1 及更高版本上工作的任何替代解决方案？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T06:11:42.340

它似乎 fmod 支持所有 android 版本。消息：

> FMOD错误！(48) 试图使用需要硬件支持的功能。（即尝试在 Wii 上的软件中播放 GCADPCM 压缩声音）。

是由于不支持浮点计算的硬件引起的。 [这](http://www.fmod.org/forum/viewtopic.php?f=7&t=15057&p=51258#p51258)是详细信息。

# iphone - 如果表格视图大于屏幕，如何水平选择单元格中的整行

> ID：11044442
> 
> 赞同：0
> 
> 时间：2012-06-15T04:06:58.457
> 
> 标签：iphone

我的问题有点棘手。

我正在开发一个应用程序，其中我在表格视图中显示一些字段。

不幸的是，我的字段超出了屏幕限制，超过了

屏幕。发生的事情是当我在表格中选择一个单元格时，该单元格正在

之后只选择屏幕大小，我可以看到所选的单元格。

我希望我的单元格被完全选中。

这是问题的[屏幕截图](http://imgur.com/8F5Zp)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T04:47:39.060

您`Cell`被完全选中，这是 的默认功能`Cell`，`tableview`但您将无法看到整个选择，因为您的`tableview`尺寸比屏幕大。

减小与屏幕宽度完全相同的表格视图大小，然后您将能够看到整个单元格选择。

*我希望它有所帮助。*

# r - 从 R 中的列表列表创建数据框

> ID：11044443
> 
> 赞同：0
> 
> 时间：2012-06-15T04:07:07.080
> 
> 标签：r, list, dataframe

我有一个函数，`readnorm`它从由整数标识的文件中返回相关数据的列表：

```
readnorm <- function(n) {
 a <- read.csv(paste("/tmp/diff-a-", n, ".txt", sep=""), 
               col.names=c("raw"), header=FALSE)
 a <- list(n=n, raw=a$raw, median=median(a$raw), iqr=IQR(a$raw))
 a$shifted <- a$raw - a$median
 a$scaled <- a$raw / a$iqr
 a$normed <- a$shifted / a$iqr
 a$necdf <- ecdf(a$normed)
 return(a)
} 
```

我可以使用以下方法构建一个包含一组文件中的数据的列表`lapply`：

```
> ns = c(5,6,7,8,9,10,15,20,25,30)
> data <- lapply(ns, readnorm)
> ls(data[[1]])
[1] "iqr"     "median"  "n"       "necdf"   "normed"  "raw"     "scaled" 
[8] "shifted" 
```

现在，我想做的是从一组数据帧中构造，称为`normed`,`scaled`等，它将数据中组件的条目分组（名称可以是`n`R 中是否允许整数名称的值，因此`normed$5`包含`data[[5]]$normed`， ETC）。

那有意义吗？例如，通过这种方式，我可以使用`raw`数据框绘制所有原始数据。这是一种将我的数据结构“从内到外”的转变。

我是 R 新手，所以可能做错了什么。用更高级的术语来说，我相信不同文件中的数据来自相似的分布、移位和缩放，我想探索这个假设。上面的代码是我尝试安排的事情，以便我可以系统地这样做。

所以我的主要问题是如何生成数据框，但我也对如何解决这个问题的更一般的指导感兴趣（如何管理数据——我知道这样的工具`qqplot`将有助于分析本身）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T04:38:54.507

我同意你会更乐意使用`lapply`而不是`sapply`. `sapply`正在做一些简化，实际上使您的事情复杂化。

更一般地说，如果是我，我会在读取数据的函数中做更少的计算，并保存处理以供以后使用，一旦原始数据被放置在单个结构中。例如：

```
fun <- function(x){
    read.table(paste("~/Desktop/stackoverflowExamples/raw/raw",x,".txt",sep = ""),
                header = TRUE,sep = ",")
}

#Just read the raw data and place it all in a data frame
dat <- do.call(cbind,lapply(1:2,fun))
#One way to label the columns, if you want to keep track of what came from where
colnames(dat) <- paste("X",1:2,sep = "")

#Now you can shift and scale to your heart's content, much more compactly...
dat_shifted <- scale(dat,center = apply(dat,2,median),scale = FALSE)
dat_normed <- scale(dat,center = apply(dat,2,median),
                        scale = apply(dat,2,IQR)) 
```

我不确定你打算用 的输出做什么`ecdf`，所以我只注意`ecdf()`返回一个函数（以防你没有意识到这一点）。

最后，请参阅`?make.names`有关名称允许内容的说明。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T04:39:01.887

使用概念证明`lapply`

读取规范的虚拟版本

```
readnorm <- function(n){
 a <- data.frame(raw = 1:10)
 a <- list(n=n, raw = a$raw, normed = runif(10))
} 
```

采用`lapply`

```
.list <- lapply(1:5, readnorm) 
```

设置名称（手动）

```
names(.list) <- 1:5 
```

从此列表中获取数据的函数

```
get_data <- function(.list, .which){
 .x <- data.frame(do.call(cbind,lapply(.list, '[[', .which)))
 names(.x) <- names(.list)
 return(.x)
} 
```

获取`a`命名为原始的所有数据

```
raw <- get_data(.list, 'raw')
raw$'1' 
```

或同样的`normed`

```
normed <- get_data(.list, 'normed')

normed$'1' 
```

# bash - -u 在排序命令中不起作用

> ID：11044446
> 
> 赞同：2
> 
> 时间：2012-06-15T04:07:25.287
> 
> 标签：bash

我使用此命令根据第一列对文件进行排序，并删除第一列中的重复行：

```
sort  -t" " -k1 -u 
```

但它不起作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T09:09:42.257

GNU sort 不会`-u`像其他人回答的那样考虑整行。它将考虑用于排序的字段。

在您的情况下，您正在对*所有*字段进行排序，因为`-k`一个字段编号表示要开始排序的字段。使用两个数字，您还可以指定结束字段。

尝试：

```
sort -t" " -k1,1 -u 
```

这将排序限制为仅对第一个字段进行排序，而不对其他字段进行排序。将仅在该字段上检查唯一性。

要使用@Shawn Chin 的测试文件：

```
$ cat in.txt
1 2 3 4
3 4 4 4
1 3 4 5
2 3 4 5
$ sort -k1,1 -u in.txt
1 2 3 4
2 3 4 5
3 4 4 4
$ sort -k2,2 -u in.txt
1 2 3 4
1 3 4 5
3 4 4 4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T08:52:36.153

编辑：我最初的建议使用了关联数组，但后来我看到@Shawn Chin 的回答并意识到我过于复杂了。这是 Shawn 使用 bash 的解决方案：

```
while read field1 theRest
do
    if [[ $prev != $field1 ]]
    then
        echo "$field1 $theRest"
        prev=$field1
    fi
done < <(sort -t" " -k1 gash.txt) 
```

# android - onClickListener 和 onItemClickListener 的区别

> ID：11044447
> 
> 赞同：7
> 
> 时间：2012-06-15T04:07:32.123
> 
> 标签：android, android-listview

Android ListViews 中的 onClickListener 和 onItemClickListener 有什么区别？这些有什么不同的实现？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-15T04:09:30.403

ListView 对列表视图的每一行都有一个 Item Click 侦听器，但 onClickListener 用于整个列表视图，无论您单击哪一行*onClick*和*onItemClickListener*被调用，但每种方法附带的值不同。

[您可以使用OnItemClickListener](http://developer.android.com/reference/android/widget/AdapterView.OnItemClickListener.html)让我们说当触摸特定行时转到特定活动。

[OnClickListener](http://developer.android.com/reference/android/view/View.OnClickListener.html)您可以检查列表视图是否已收到用户的触摸，所以您要刷新列表吗？或更改滚动条的视图或将列表视图作为一个整体进行操作。

# collision-detection - 2D 物理引擎：带有非弹性碰撞的弹跳球不会停止

> ID：11044448
> 
> 赞同：4
> 
> 时间：2012-06-15T04:08:00.570
> 
> 标签：collision-detection, physics-engine

我用 Java 创建了一个简单的 2d 物理引擎，它使用圆形射弹和直墙。目前，每一帧，每个射弹的位置都会提前`velocity * (1/fps)`. 速度随后更新，每帧一次。碰撞检测使用先前和当前位置以点斜率形式定义一条线，检查该线是否与墙壁相交，如果该交叉点位于先前位置和当前位置之间，则记录碰撞并且射弹的当前位置和速度会相应更新。目前，没有预期的旋转。

现在，除了非弹性碰撞之外，这一切都有效。目前，非弹性碰撞将弹丸速度的垂直于其碰撞表面的分量乘以某个小于 1 的系数。

假设有一个弹丸在水平面上上下弹跳。应该发生的是*，*弹丸速度的 y 分量随着每次弹跳而减小，导致弹丸的最大高度随着每次弹跳而减小，最终达到可以忽略不计的点。取而代之的是，球的最大高度降低到某个点，然后开始增加几次反弹，再次开始降低，进入一个恒定的循环。**结果是球从未真正停止，而是似乎“抖动”。**

发生这种情况是因为弹丸每帧都沿直线段移动，而且速度不是连续变化的。如果球落下的帧数多于球上升的帧数，则球会为这些额外的帧加速，最终会飞得比应有的更高。正在发生的事情是，球到达一个点，由于上述原因，一次反弹将其发送到比它应该具有的更高的位置。当最大高度由于非弹性碰撞再次下降时，它再次做同样的事情。

我尝试通过让球移动 来消除这种情况`(v*t + 0.5*a*t^2)`，其中`v`是速度，`a`是重力加速度，并且`t`是`1/fps`。这是可行的，除了当反弹变得足够小时，它会导致使用直线的碰撞检测失败。我也尝试过使用参数定义的抛物线进行碰撞检测，但在检测射弹之间的碰撞时，它变得令人难以置信的烦人和低效。如果您好奇，我可以更深入地解释我尝试的解决方案。

您还想提出其他简单的解决方案吗？

在此先感谢您，尤其是如果您真正阅读了这五个段落。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-12T11:59:11.630

我的建议是有一个代码块，***只有***当反弹高度等于或高于您定义为高度的某个常数时才会反弹。您需要某种循环结构（或我在下面所做的“辅助”方法）来计算每次球反弹后的预计反弹高度。然后你也许可以做这样的事情：（假设你已经输入了“现在是时候反弹方法”）

```
private static final int MINIMUM_BOUNCE = 100 //arbitrary value

. . .

if(calculateNewBounceHeight() >= MINIMUM_BOUNCE) {
    bounce();
} else {
    // terminate program?
    // notify user?
    // etc.
} 
```

这种方式的唯一问题是，如果您没有在某个点终止，程序将检查它是否可以无限反弹（如果球在基线上“滚动”）。这可能会导致一些内存问题，因为它在一定程度上是一个无限循环。

只是为了澄清：`calculateNewBounceHeight()`并且`bounce()`是我认为您将能够创建的方法。这有帮助吗？让我知道我是否遗漏了某些内容或对问题的解释有误（我可能没有阅读全文）。

# c++ - MoveWindow()，跳过、躲避或绕过消息传递？

> ID：11044449
> 
> 赞同：0
> 
> 时间：2012-06-15T04:08:16.243
> 
> 标签：c++, winapi, user32

我正在调整一个窗口的大小，`MoveWindow()`但我不拥有那个窗口。我只是从另一个进程中偷了它，现在我在搞乱它的 hWindow。

然而，我从中窃取它的过程正在运行一个消息循环，处理其中一些消息（`WM_MOVE`、`WM_SIZE`、`WM_GETMINMAXINFO`等），这基本上阻止了我对它做任何我想做的事情。有时，它甚至不允许我将它的大小调整到超过给定的最大值，这是让它全屏运行的关键。

除了使用 asm，有什么方法可以绕过消息传递？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T05:10:12.850

[`SetWindowPos`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633545%28v=vs.85%29.aspx)有一个标志不告诉窗口你正在用它做某事：

```
SetWindowPos (hwnd, 0, x, y, width, height, SWP_NOZORDER | SWP_NOSENDCHANGING); 
```

正如评论中所提到的，依靠代码中的这种行为来获得更多乐趣是不好的，对其他窗口也不公平，而且您很容易遇到问题。[Raymond Chen](http://blogs.msdn.com/b/oldnewthing/)对此有一些特别有趣的博客文章，例如“如果两个程序这样做会怎样？”

# android - android在活动到服务之间交换数据

> ID：11044457
> 
> 赞同：0
> 
> 时间：2012-06-15T04:09:23.253
> 
> 标签：android, service, xmpp

我正在为 android 创建一个 xmpp 聊天客户端。与 asmack 相关的一切都已完成，我可以在主要活动中检索并显示朋友列表。我也可以收到朋友的聊天消息。我无法将数据从聊天窗口发送到服务。这样我就可以回复并向我的朋友发送聊天消息。我研究了一些例子，但没有人有我想要的。请注意，我不能使用 onbind 方法，因为该服务没有特别绑定到任何活动，但是许多活动可以将数据发送到服务。一个合乎逻辑的解释会很好。如果有人知道某些代码示例正是这样做的，那就太好了。当 xmpp 连接收到聊天消息时，我还需要从服务更新聊天窗口。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T04:16:03.737

可以在Service中定义一个BroadcastReceiver，可以通过任意数量的Activity发送Broadcast消息，也可以在Activity中定义一个Broadcast Receiver，可以监听服务发送的消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T04:50:49.457

您必须在 service.OnStart 方法中覆盖 onStart 方法，您可以获得 Activity 的意图。如果您想将 ArrayList 从活动传递到服务，您可以将您的 ArrayList 转换为数组。

在你的活动中

```
Intent intent=new Intent(ActivityName.this,Service.class);         
Bundle b=new Bundle()
b.putStringArray("Array", your_array)
intent.putExtras(b);
startService(intent); 
```

为您服务

```
public void onStart(Intent intent, int startid){
    super.onStart(intent, startid);
    Bundle b=intent.getExtras();
    String[] Array = b.getStringArray("Array");
} 
```

# regex - 匹配两个字符串，其中某些文本是可选的匹配？

> ID：11044461
> 
> 赞同：1
> 
> 时间：2012-06-15T04:09:52.867
> 
> 标签：regex, string

我正在尝试编写一个简单的 Java 函数，该函数将获取语言输入列表并查看我从数据库查询中获得的内容是否匹配。我数据库中的所有字符串都已标准化，以便于搜索。这是一个例子。

研究实验室 A 希望参与者具有以下任何语言输入（它们由竖线字符分隔`|`）：

```
{English | English, Spanish | Spanish} 
```

换句话说，这个实验室可以接受单语英语、单语西班牙语或双语英语和西班牙语的参与者。这非常简单 - 如果他们的数据库结果返回`"English"`or `"English, Spanish"`，`"Spanish"`我的函数将找到匹配项。

但是，我的数据库还会标记参与者是否仅对某种语言（使用`~`字符）进行了最少的语言输入。

```
"English, ~Spanish" = participant hears English and a little Spanish
"English, ~Spanish, Russian" = participant hears English, Russian, and a little Spanish 
```

这是我遇到麻烦的地方。我想将类似的东西`"English, ~Spanish"`与`"English"`和匹配`"English, Spanish"`。

我正在考虑删除/隐藏带有标记的语言`~`，但如果有一个研究实验室只想要`{English, Spanish}`，那么`"English, ~Spanish"`即使它应该匹配，也不会匹配。

我也想不出如何使用正则表达式来完成这项任务。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T04:13:21.793

**试试这个**

```
\b(English[, ~]+Spanish|Spanish|English)\b 
```

**代码**

```
try {
    if (subjectString.matches("(?im)\\b(English[, ~]+Spanish|Spanish|English)\\b")) {
        // String matched entirely
    } else {
        // Match attempt failed
    } 
} catch (PatternSyntaxException ex) {
    // Syntax error in the regular expression
} 
```

**解释**

```
"\\b" +               // Assert position at a word boundary
"(" +                // Match the regular expression below and capture its match into backreference number 1
                        // Match either the regular expression below (attempting the next alternative only if this one fails)
      "English" +          // Match the characters “English” literally
      "[, ~]" +            // Match a single character present in the list “, ~”
         "+" +                // Between one and unlimited times, as many times as possible, giving back as needed (greedy)
      "Spanish" +          // Match the characters “Spanish” literally
   "|" +                // Or match regular expression number 2 below (attempting the next alternative only if this one fails)
      "Spanish" +          // Match the characters “Spanish” literally
   "|" +                // Or match regular expression number 3 below (the entire group fails if this one fails to match)
      "English" +          // Match the characters “English” literally
")" +
"\\b"                 // Assert position at a word boundary 
```

**更新**

*更通用的形式是这样的：*

```
(?-i)\b([A-Z][a-z]+[, ~]+[a-z]+|[A-Z][a-z]+)\b 
```

顺便说一句，这样做你可能会搞砸，因为这种模式会匹配一个全大写的单词。在生成 RegEx 模式时使用此语法可能会有更好的选择。

```
(A[, ~]+B|A|B) 
```

其中`A`,`B`将是语言的名称。我认为这将是一个更好的方法。

# jquery - jQuery datepicker 不适用于 cfdiv

> ID：11044465
> 
> 赞同：3
> 
> 时间：2012-06-15T04:10:12.757
> 
> 标签：jquery, jquery-ui, coldfusion, coldfusion-9

我有一个非常简单的页面，它有 cfgrid 记录集。当您单击该行时，我将向 cfdiv 发送唯一 id 并显示一个带有 jqueryui datepicker 的页面。但是，当我单击一行时，日期选择器不起作用。我用谷歌搜索和搜索，无法弄清楚为什么。这是我的 cfgrid 和 cfdiv 所在的代码：

```
<html>
<head>
<title>Submit Roomate Available</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">

<!---<script src="../assets/js/jQuery126-min.js""></script>--->
<script src="../assets/js/jquery-1.7.2.min.js""></script>
<script src="../assets/js/jquery-ui-1.8.21.custom.min.js""></script>

<link href="../assets/css/flick/jquery-ui-1.8.21.custom.css" rel="stylesheet" type="text/css">

</head>

<cfquery name="findrec" datasource="#datasourcename#">
    SELECT *
        FROM students
        WHERE class = 'rmavail'
    order by last
</cfquery>
<cflayout type="accordion" width="677">
    <cflayoutarea title="Listings">
        <cfform>
        <cfgrid name="listings"
                width="677"
                height="200"
                format="html"
                query="findrec">

                <cfgridcolumn name="listingID" header="Listing ID"/>
                <cfgridcolumn name="first" header="First Name"/>
                <cfgridcolumn name="last" header="Last Name"/>
                <cfgridcolumn name="dateListed" header="Date Listed"/>
                <cfgridcolumn name="email" header="Email"/>
                <cfgridcolumn name="active" header="Active"/>

        </cfgrid>
        </cfform>
    </cflayoutarea>

</cflayout>

<cfdiv bind="url:admin_rma.cfm?listingid={listings.listingID}&func=Edit"/>

</body> 
```

这是 cfdiv 加载的页面 (admin_rma.cfm) - 这是日期选择器所在的位置，希望我可以开始工作。我已经绑定了放置 jquery 库的每个组合，这只是其中一种组合......

```
<script>
$(function() {
    $( "#datepicker" ).datepicker({ maxDate: "+1m +1w" });
});
</script>

<table cellpadding="0" cellspacing="0" width="698" align="center">
    <tr align="left" class="formheaders">
        <td>
            <font color="red">*</font>Date Available</span> (mm/dd/yyyy) <br>
            <input id="datepicker" type="text">
        </td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T07:25:10.117

这是因为在 cfdiv 标记上呈现 html 内容之前执行了 javascript。在调用 datepicker 之前尝试使用 setTimeout 函数进行一些延迟，它应该可以工作。试试下面

```
<script>
setTimeout(function() {
    $( "#datepicker" ).datepicker({ maxDate: "+1m +1w" });
},500);
</script>
<table cellpadding="0" cellspacing="0" width="698" align="center">
    <tr align="left" class="formheaders">
        <td>
            <font color="red">*</font>Date Available</span> (mm/dd/yyyy) <br>
            <input id="datepicker" type="text">
        </td>
    </tr>
</table> 
```

在这种情况下，我在创建 datepicker 对象之前延迟了 500 毫秒，以确保输入字段已经在 html 上下文中呈现。PS：这不是正确的解决方案，因为根据浏览器功能和 html 内容的大小，将 html 内容加载到 cfdiv 可能需要 500 多毫秒。这只是为了证明 datepicker() 函数在加载之前被调用。

希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T15:16:46.207

使用 firebug，确保正在加载 jQuery。如果您使用 jQuery UI，您可能不想使用 cflayout type="accordion"。

# select - 在 SQL Server CE 中使用 select 和 values 插入表

> ID：11044473
> 
> 赞同：0
> 
> 时间：2012-06-15T04:11:11.987
> 
> 标签：select, sql-server-ce

我有一个语法正确的查询（使用 SQL Server 验证），但是当我为 SQL Server CE 执行它时，它给出了以下错误：

```
insert into HistoryPC (Date, Col1) 
values ('12/02/2012', (SELECT COUNT(CASE WHEN i.ProductCode = 'XXX' and i.ProductCode = p.ProductCode THEN Quantity END) 
                       FROM Product p, Invoice_Details i 
                       left outer join Invoice_Header h on h.Invoice_NO = i.Invoice_No  
                       WHERE h.Date = '2012-06-02')) 
```

错误：

> 解析查询时出错。[令牌行号= 1，令牌行偏移量= 63，错误令牌= SELECT]

我想要的是使用选择将表的日期列插入今天和其他值。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T04:19:18.127

这个查询对我来说没有意义。这是我能得到的最接近你写的内容，但我怀疑这不是你的意思。

```
insert into HistoryPC (Date,Col1) 
SELECT '12/02/2012',
  SUM(CASE WHEN i.ProductCode = 'XXX' THEN Quantity ELSE 0 END)
FROM Product AS p 
INNER JOIN Invoice_Details AS i
ON i.ProductCode = p.ProductCode
LEFT OUTER JOIN Invoice_Header AS h 
ON h.Invoice_NO = i.Invoice_No 
AND h.Date = '2012-06-02'; 
```

# c# - 不显示具有 CollectionDataContract 属性的名称

> ID：11044475
> 
> 赞同：2
> 
> 时间：2012-06-15T04:11:31.960
> 
> 标签：c#, xml, serialization, servicestack

我目前正在使用 ServiceStack 实现 API，但遇到了问题。我得到的 API 规范定义了将发送到 API 的 XML 数据包。此规格无法更改，也不受我自己的控制。

问题是在根元素中，有一个项目列表，如下所示：

```
<data>
    <id>0</id>
    <locationID>10</locationID>
    <cust>
       <id>0</id>
    </cust>
    <cust>
       <id>0</id>
    </cust>
    <cust>
       <id>0</id>
    </cust>
    <cust>
       <id>0</id>
    </cust>
</data> 
```

我已经实现了规范并且几乎是正确的，但是我无法弄清楚如何在没有周围父节点的情况下让元素在 XML 中重复。

由于这是使用 ServiceStack，我正在使用 Data Contracts 并尝试将元素设置为 CollectionDataContract，但是它将元素包装在父节点中。

我想知道是否可以指定不使用父元素，或者是否可以在包含没有父节点的节点的节点中实现一个普通列表。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:29:09.490

这对于 ServiceStack 中使用的 .NET 的 DataContract Xml 序列化程序是不可能的。如果您找到支持此功能的 XmlSerializer，您可以注册以使用它：

```
appHost.ContentTypeFilters.Register(ContentType.Xml, SerializeToStream, DeserializeFromStream); 
```

或者注册一个自定义 contentType，如下所示： [http ://www.servicestack.net/ServiceStack.Northwind/vcard-format.htm](http://www.servicestack.net/ServiceStack.Northwind/vcard-format.htm)

就个人而言，在这种情况下，我只会返回一个序列化的 xml 字符串。您可以这样做：

*   在 Service 的主体中，只需返回一个字符串（您可以将其包装在 HttpResult 中以强制指定特定的 ContentType）。在您的服务中返回 XML 字符串将始终为所有端点返回 XML。

*   通过覆盖 ServiceBase 中的 OnAfterExecute 并将强类型响应 DTO 转换为用于 XML ContentType 请求的 XML 字符串。

*   注册[自定义响应过滤器](https://github.com/ServiceStack/ServiceStack/wiki/Request-and-response-filters)（或[过滤器属性](https://github.com/ServiceStack/ServiceStack/wiki/Filter-attributes)）

例如：

```
appHost.ResponseFilters.Add((req, res, dto) =>
{
    if (req.ResponseContentType == ContentType.Xml)
    {
        var sb = new StringBuilder();
        DataDto dataDto = (DataDto)dto;
        sb.AppendLine("<data>");
        sb.AppendFormat("<id>{0}</id>",dataDto.Id);
        //... etc
        res.ContentType = ContentType.Xml;
        using (var sw = new StreamWriter(res.OutputStream)) {
          sw.WriteLine(sb.ToString());
        }
        res.Close();
    }
}); 
```

# asp.net - 在 ASP.net 网站上不断出现编译错误

> ID：11044479
> 
> 赞同：1
> 
> 时间：2012-06-15T04:12:03.190
> 
> 标签：asp.net

我有一个客户端网站，最近开始出现编译错误：

> CS0029：无法隐式转换类型 'AspNet.StarterKits.Classifieds.Web.CategorySelectionChangedEventHandler [c:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\Temporary ASP.NET Files\party\db314a04\fbc40acd\App_Code.nhjh6o2h.dll] ' 到 'AspNet.StarterKits.Classifieds.Web.CategorySelectionChangedEventHandler []'

在这条线上：

```
<uc1:CategoryPath ID="CategoryPath" Runat="server" OnCategorySelectionChanged="CategoryPath_CategorySelectionChanged" /> 
```

一年多来，我没有对这个特定的网站进行任何更改。

我发现如果我重命名该站点根目录中的 web.config 文件，然后将其重命名，该站点似乎重新编译并且这些编译错误消失了一段时间。他们最终会在几个小时内回来。

我怀疑网站以某种方式崩溃，重命名 web.config 文件会导致重新编译或类似的东西。此解决方案始终可以解决它，但我或客户每天多次这样做是不可行的。

任何想法从哪里开始甚至调查这个错误？该网站位于远程 Web 主机上，不幸的是，我无法直接登录到 Web 服务器以检查 ISS 或事件查看器是否存在任何类型的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T11:08:24.783

执行以下步骤：

1.  在您网站的根目录上创建一个名为的文件`app_offline.htm`，该网站将离线。
2.  打开并更改您`web.config`只需在最后添加一个输入，然后保存它。
3.  重命名或删除`app_offline.html`文件

触发更好的重新编译并再次检查需要更新的内容。如果这失败了，那么你可以做的第二个想法是：

1.  停止 IIS，并转到临时目录`c:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\Temporary ASP.NET Files\`并清除它以强制重新编译所有内容，以防万一找不到更改的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T13:25:01.153

通过与网络主机通电话几个小时并说服他们问题已经解决，这个问题得到了解决。他们没有分享他们为解决这个问题所做的工作的细节，但在让他们对此采取措施后，它就消失了。如果 Aristos 停止 IIS 和删除临时文件的建议有效，但这个远程网站的控制面板不允许我自己这样做，我不会感到惊讶。

# google-chrome - AnySlider - 通过 CSS 更改宽度会导致滑块在 Safari 和 Chrome 中折叠或无法正确显示

> ID：11044482
> 
> 赞同：1
> 
> 时间：2012-06-15T04:12:15.107
> 
> 标签：google-chrome, jquery-plugins, cross-browser, anythingslider, safari

我正在根据新数据重写我的问题：

我正在使用 AnythingSlider 将单页网站组织到内容面板中。

滑块在 Safari/Chrome 和 FF 中使用所有默认设置。我重新设计了导航和一些美学细节，滑块在所有三个浏览器中仍然可以完美运行（我还没有检查过 IE）。但是，一旦我更改宽度，整个滑块就会在 Safari 和 Chrome 中消失。在FF中看起来很棒！

我觉得我已经颠倒和横向测试过它，无论我做什么，当我将宽度增加到 1000 像素时，它就会消失。

以下是我尝试过的事情：

*   添加一个容器 div（包裹滑块 ul），将其宽度设置为 1000px，并将我的滑块 ul 设置为 100%。
*   设置滑块 ul 宽度并将所有面板保持在宽度：100%；
*   设置滑块 ul 宽度和所有相关的内部项目（面板、内容 div）
*   设置我所有图像的宽度和高度

由于它似乎都归结为宽度属性，因此我不会费心发布代码，但如果您想查看其中任何一个，请告诉我！我觉得这一定很简单，我只是想念我鼻子前面的东西......任何帮助或想法都非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:20:45.490

解决！我假设是因为我似乎是唯一一个遇到此问题的人，它与网站上其他 div 的设置有关，但这是我为解决此问题所做的工作：

改变这个：

```
/* Overall Wrapper */
.anythingSlider {
display: block;
overflow: visible !important;
position: relative;
} 
```

使用 position: absolute 代替。

当我在 Safari 中检查 div 并发现滑块位置正常时，我意识到了这个问题，但面板窗口从屏幕上闪避了大约 400 像素。无论如何 - 行为很奇怪（并且特定于 webkit 浏览器），我找不到 Safari 这样做的真正合乎逻辑的理由，但这种解决方法似乎完全有效，现在在 FF、Safari 和 Chrome 中一切看起来都很棒。上IE！

# c# - 如何使用 C# 向文件添加自定义属性或标签？

> ID：11044489
> 
> 赞同：1
> 
> 时间：2012-06-15T04:12:35.087
> 
> 标签：c#, wpf

我有一个包含大量文件和应用程序的文件夹，它在 WPF 列表视图中显示这些文件。我想允许用户对这些文件进行逻辑分组并在树视图中显示以使导航更容易。这可以通过将文件放入子文件夹来完成，但由于某些原因这是不可能的。另一种选择是创建 xml 文件来管理 gropuing ，但需要额外的文件。我想以编程方式将客户属性或标签添加到文件中，并根据需要读/写它。该解决方案应该适用于大多数 Windows 操作系统，如 xp、windows server 2003、vista 和 W7。这可能吗？也欢迎任何其他用于文件逻辑分组的解决方案。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T10:39:35.663

最好的解决方案（在我看来）是在每个文件夹中都有一个 XML 文件（根据您的原始想法）来描述分组 . 您可以隐藏文件，以便用户不知道它，或者如果分组是基于每个用户的，则 XML 文件可以存储在 IsolatedStorage 中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T04:18:17.087

您可以使用数据库创建自己的逻辑分组。这将是不修改现有文件的最佳方法。我建议使用 RavenDB，它非常易于使用且占用空间小。您可以将 linq 与它一起使用，而无需 sql。所有操作也可以保存到内存中。

[http://ravendb.net/](http://ravendb.net/)

# javascript - Javascript 对象 - 强制触发事件

> ID：11044500
> 
> 赞同：0
> 
> 时间：2012-06-15T04:14:30.507
> 
> 标签：javascript, html, events, audio

我正在开发一个集成在我的网络应用程序中的音频播放系统。这正是我需要做的：创建一个声音文件，建立 oncanplaythrough 事件，然后加载源 URL。如果浏览器不支持 mp3 文件，无论如何都会触发 oncanplaythrough 事件（是的，即使文件根本没有加载）。

```
var sound = new Audio();
sound.addEventListener('canplaythrough', function(){
        alert('ready to play');
    }, false);
if(sound.canPlayType('audio/mp3')){
    sound.src = "myfile.mp3";
}
else{
    // force event to fire anyway
    sound.canplaythrough(); // doesn't work (this function is undefined)
    // sound.oncanplaythrough() is "null" if I try to use that
} 
```

所以最终，我唯一的问题是如何强制事件“canplaythrough”在音频对象中触发？

PS如果你想知道，我正在为一个游戏制作一个音频系统，它会一个一个地加载所有声音文件，然后启动关卡。这个想法是加载文件，或者如果浏览器不支持任何文件，则将它们留空。在任何情况下，必须为添加到列表中的每个文件触发事件，否则它将永远等待。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T04:46:43.033

要手动触发事件，您必须使用`Event`DOM API，它们不仅仅是元素的方法。这可能有效（未经测试）：

```
sound.dispatchEvent(new Event('canplaythrough')) 
```

该方法`fireEvent`在 IE 中被调用。

以下是相关文档：

*   [https://developer.mozilla.org/en/DOM/element.dispatchEvent](https://developer.mozilla.org/en/DOM/element.dispatchEvent)
*   [https://developer.mozilla.org/en/DOM/DOM_event_reference](https://developer.mozilla.org/en/DOM/DOM_event_reference)（媒体元素事件没有类型...）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-17T17:05:15.510

您可以`dispachEvent`在大多数浏览器中使用该功能，如下所示：

```
sound.dispachEvent(new Event("canplaythrough")) 
```

这不是完全跨平台的，但要考虑到 IE，您必须使用`fireEvent`：

```
sound.fireEvent(new Event("canplaythrough")) 
```

要将它们放在一起，您可以使用以下内容：

```
(sound.dispatchEvent||sound.fireEvent)(new Event("canplaythrough")) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T04:20:03.067

您是否要触发自定义事件？[如果是这样，您可以使用event.initEvent](https://developer.mozilla.org/en/DOM/event.initEvent)初始化一个事件，然后使用[dispatchEvent](https://developer.mozilla.org/en/DOM/element.dispatchEvent)来触发它。

# asp.net-mvc-3 - MVC3：为什么 Html.Action 不生成预期的 URL

> ID：11044503
> 
> 赞同：0
> 
> 时间：2012-06-15T04:14:45.330
> 
> 标签：asp.net-mvc-3, url-routing

我有一个“项目”控制器和一个“仪表板”操作，它采用一个名为“accountID”的参数。

```
 public ActionResult Dashboard(String accountID)
 {
     return View();
 } 
```

我的路线定义如下：

```
routes.MapRoute(
    "ProjectsHome",
    "{accountID}/projects",
    new { controller = "Projects", action = "Dashboard" }
); 
```

这个想法是有一个像 /1111/projects 这样的 URL，其中 1111 代表 accountID。然后 URL 将执行 Projects 控制器的 Dashboard 操作。

我面临的问题是 `@Html.ActionLink("Projects", "Dashboard", "Projects", new { accountID = "1111" }, null)`生成像 /Projects/Dashboard?accountID=1111 这样的 URL，我期待像 /1111/projects 这样的东西

我的解决方法是使用`@Url.RouteUrl("ProjectsHome", new { accountID = "1111"})`，但我想知道为什么 Html.ActionLink 没有选择我定义的路由并相应地格式化 URL？

另一个有趣的事实是，在控制器的一个代码中，我有一些类似的东西 `return RedirectToAction("Dashboard", "Projects", new { accountID = newAccount.ID });`，它可以按照我的预期构建 URL。

注意：除了通用的“包罗万象”的路线外，我没有定义其他路线。我使用 ASP.NET MVC3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T05:18:06.503

我能够复制您获得的结果的唯一方法是将“ProjectsHome”路由**放在**通用“catch-all”路由下方。当我将它放在通用路由之上时，ActionLink 会以您想要的形式生成 URL。

MVC 路由引擎会扫描路由表，直到找到可以匹配的路由表，这意味着它永远无法到达在 catch-all 之后定义的路由。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T09:10:17.073

地图路线需要像这样定义 -

routes.MapRoute("ProjectsHome", "{accountID}/projects", new { controller = "Projects", action = "Dashboard", **accountID = UrlParameter.Optional** });

您错过了在地图路线中定义 accountID。

# c++ - 在 C++ 中将向量解包为函数参数的任何解决方案？

> ID：11044504
> 
> 赞同：15
> 
> 时间：2012-06-15T04:14:51.810
> 
> 标签：c++

我实际上正在考虑类似于 python 中的 '*' 运算符，如下所示：

```
args = [1,2,4]
f(*args) 
```

C++ 中是否有类似的解决方案？

我能想到的如下：

```
template <size_t num_args, typename FuncType>
struct unpack_caller;

template <typename FuncType>
struct unpack_caller<3>
{
    void operator () (FuncType &f, std::vector<int> &args){
        f(args[0], args[1], args[3])
    }
}; 
```

上面我假设只有`int`参数类型。

问题是我觉得为不同的`num_args`.

有什么好的解决办法吗？谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-15T04:27:29.907

您可以使用一[组索引](https://stackoverflow.com/a/10930078/46642)：

```
template <size_t num_args>
struct unpack_caller
{
private:
    template <typename FuncType, size_t... I>
    void call(FuncType &f, std::vector<int> &args, indices<I...>){
        f(args[I]...);
    }

public:
    template <typename FuncType>
    void operator () (FuncType &f, std::vector<int> &args){
        assert(args.size() == num_args); // just to be sure
        call(f, args, BuildIndices<num_args>{});
    }
}; 
```

但是，没有办法消除在模板中指定大小的需要，因为向量的大小是运行时构造，我们需要在编译时指定大小。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-07-04T05:40:12.580

更新@Fernandes 的答案。

是的，确实有一种方法可以消除`num_args`在模板参数中指定的需要。这是因为`num_args`由函数签名决定，而不是向量。在运行时应该检查的是向量的大小和函数的数量。

请参阅以下示例。

```
#include <iostream>
#include <utility>
#include <vector>
#include <cassert>

namespace util {
template <typename ReturnType, typename... Args>
struct function_traits_defs {
  static constexpr size_t arity = sizeof...(Args);

  using result_type = ReturnType;

  template <size_t i>
  struct arg {
    using type = typename std::tuple_element<i, std::tuple<Args...>>::type;
  };
};

template <typename T>
struct function_traits_impl;

template <typename ReturnType, typename... Args>
struct function_traits_impl<ReturnType(Args...)>
    : function_traits_defs<ReturnType, Args...> {};

template <typename ReturnType, typename... Args>
struct function_traits_impl<ReturnType(*)(Args...)>
    : function_traits_defs<ReturnType, Args...> {};

template <typename ClassType, typename ReturnType, typename... Args>
struct function_traits_impl<ReturnType(ClassType::*)(Args...)>
    : function_traits_defs<ReturnType, Args...> {};

template <typename ClassType, typename ReturnType, typename... Args>
struct function_traits_impl<ReturnType(ClassType::*)(Args...) const>
    : function_traits_defs<ReturnType, Args...> {};

template <typename ClassType, typename ReturnType, typename... Args>
struct function_traits_impl<ReturnType(ClassType::*)(Args...) const&>
    : function_traits_defs<ReturnType, Args...> {};

template <typename ClassType, typename ReturnType, typename... Args>
struct function_traits_impl<ReturnType(ClassType::*)(Args...) const&&>
    : function_traits_defs<ReturnType, Args...> {};

template <typename ClassType, typename ReturnType, typename... Args>
struct function_traits_impl<ReturnType(ClassType::*)(Args...) volatile>
    : function_traits_defs<ReturnType, Args...> {};

template <typename ClassType, typename ReturnType, typename... Args>
struct function_traits_impl<ReturnType(ClassType::*)(Args...) volatile&>
    : function_traits_defs<ReturnType, Args...> {};

template <typename ClassType, typename ReturnType, typename... Args>
struct function_traits_impl<ReturnType(ClassType::*)(Args...) volatile&&>
    : function_traits_defs<ReturnType, Args...> {};

template <typename ClassType, typename ReturnType, typename... Args>
struct function_traits_impl<ReturnType(ClassType::*)(Args...) const volatile>
    : function_traits_defs<ReturnType, Args...> {};

template <typename ClassType, typename ReturnType, typename... Args>
struct function_traits_impl<ReturnType(ClassType::*)(Args...) const volatile&>
    : function_traits_defs<ReturnType, Args...> {};

template <typename ClassType, typename ReturnType, typename... Args>
struct function_traits_impl<ReturnType(ClassType::*)(Args...) const volatile&&>
    : function_traits_defs<ReturnType, Args...> {};

template <typename T, typename V = void>
struct function_traits
    : function_traits_impl<T> {};

template <typename T>
struct function_traits<T, decltype((void)&T::operator())>
    : function_traits_impl<decltype(&T::operator())> {};

template <size_t... Indices>
struct indices {
  using next = indices<Indices..., sizeof...(Indices)>;
};
template <size_t N>
struct build_indices {
  using type = typename build_indices<N - 1>::type::next;
};
template <>
struct build_indices<0> {
  using type = indices<>;
};
template <size_t N>
using BuildIndices = typename build_indices<N>::type;

namespace details {
template <typename FuncType,
          typename VecType,
          size_t... I,
          typename Traits = function_traits<FuncType>,
          typename ReturnT = typename Traits::result_type>
ReturnT do_call(FuncType& func,
                VecType& args,
           indices<I...> ) {
  assert(args.size() >= Traits::arity);
  return func(args[I]...);
}
}  // namespace details

template <typename FuncType,
          typename VecType,
          typename Traits = function_traits<FuncType>,
          typename ReturnT = typename Traits::result_type>
ReturnT unpack_caller(FuncType& func,
                VecType& args) {
  return details::do_call(func, args, BuildIndices<Traits::arity>());
}
}  // namespace util

int func(int a, int b, int c) {
  return a + b + c;
}

int main() {
  std::vector<int> args = {1, 2, 3};

  int j = util::unpack_caller(func, args);
  std::cout << j << std::endl;

  return 0;
} 
```

# android - 如何在android的系统应用程序中升级本机库

> ID：11044507
> 
> 赞同：2
> 
> 时间：2012-06-15T04:15:04.307
> 
> 标签：android, android-ndk

我为我的 rom 开发了一个系统应用程序，其中包括一些本机库。我在下面尝试过：

1.  不要将此本机库复制到 /system/lib 中，而是将其放在 apk 中。在这种情况下，库不会在系统启动时复制到 /data/data/xxxx/lib 并且我的应用程序将无法运行，因为找不到库。（ PackageManagerService.java 3301 注意：我们不想为系统应用程序解压缩本机二进制文件，除非它们已经更新（二进制文件已经在 /system/lib 下）。换句话说，我们将解压缩二进制文件仅适用于非系统应用和系统应用升级。）

2.  将此库复制到 /system/lib。我的应用程序首先运行正确，但是当我升级它时，新版本的库将在启动时复制到 /data/data/xxxx/lib。但是由于 android 会在 /data/data/xxx/lib（在 DexClassLoader::findLibrary 中）之前在 /system/lib 中查找库，因此总是会加载旧版本的库。这意味着我将无法升级本机库。

所以我该怎么做？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T11:14:15.913

与. `System.load()`_ `System.loadLibrary()`下面是一个简单的例子：

```
public void loadLibrary(Context context, String libName) {
    String packageName = context.getPackageName();
    String libPath = "/data/data/" + packageName + "/lib/" + libName;
    if (new File(libPath).exists()) {
        System.load(libPath);
    } else {
        System.loadLibrary(libName);
    }
} 
```

# mercurial - 在传出挂钩中确定目标存储库

> ID：11044512
> 
> 赞同：4
> 
> 时间：2012-06-15T04:15:36.480
> 
> 标签：mercurial, mercurial-hook

我正在尝试编写一个在特定条件下阻止推送的 Mercurial 挂钩，但要确定是否阻止推送，它需要知道推送将要发送到的存储库。我知道理想情况下，这将在`prechangegroup`远程存储库端的挂钩中完成，但在我的情况下这是不可能的 - 请参阅我[之前的问题](https://stackoverflow.com/questions/10925099/reading-command-line-arguments-from-mercurial-prechangegroup-hook)了解原因。（我喜欢 Ry4an 的建议，但我必须为一大堆存储库执行此操作，因此为每个存储库创建一个副本似乎不是可行的方法。）

无论如何，我最初是在`pre-push`挂钩中执行此操作的，但这仅在非常特定的情况下才调用；特别是，如果用户为 定义了别名`push`，那么我的钩子将不会被调用，这意味着它可能会被无意中绕过。我的下一个想法是钩子，它绝对更简单——它可以在推送以外的情况下被调用，但使用传递的参数`preoutgoing`很容易过滤掉。`source`

但是，该`preoutgoing`钩子没有可用的目标存储库；甚至为此[提交了一个错误](http://bz.selenic.com/show_bug.cgi?id=2859)，但它现在对我没有多大好处。目前，我正在通过两个钩子来解决这个问题；一个`pre-push`决定目的地，然后是`preoutgoing`实际行动的那个。当然，`pre-push`钩子可能没有运行，但在这种情况下，我只是警告用户他们的推送可能不安全，并让他们选择放弃它。

我有两个问题。首先，有没有更好的方法来实现这一点？其次，如果没有，是否可以安全地假设`repo`传递给我的两个钩子（它们都是在进程中）的对象是相同的？换句话说，如果我做类似的事情

```
repo.some_custom_property = outgoing_url 
```

在我的`pre-push`钩子中，是否保证`preoutgoing`随后调用的钩子将接收相同的`repo`对象，因此可以通过它访问我的自定义属性？我知道我可以通过环境变量或临时文件来做到这一点，但这似乎更好，我不必担心之后清理。我也看到了[这个问题](https://stackoverflow.com/questions/9611045/mercurial-hooks-pass-information-between-hooks)，但它并没有太大帮助。

# javascript - JavaScript 没有正确添加大数（但非常接近）

> ID：11044514
> 
> 赞同：2
> 
> 时间：2012-06-15T04:15:43.670
> 
> 标签：javascript, math, loops, exponent

我正在尝试将大量数字相加，但结果不正确。

```
var searchSpace = 36;
var length = 11;
var combinations = 0;

for(var i = 1; i <= length; i++) {
    combinations += Math.pow(searchSpace, i);
} 
```

变量`combinations`最终为 135,382,323,952,046,190，这并不完全正确。应该是[135,382,323,952,046,196](http://www.wolframalpha.com/input/?i=36%5E1%2b36%5E2%2b36%5E3%2b36%5E4%2b36%5E5%2b36%5E6%2b36%5E7%2b36%5E8%2b36%5E9%2b36%5E10%2b36%5E11)（怎么减 6？！）有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T04:17:00.457

JavaScript 使用 IEEE-754 64 位双精度数作为其数字格式。这些不能代表任意精确的值；当您超过某个阈值并开始存储接近（但不完全准确）实际值的值时，它们会变得不正确。根据[这个较早的答案](https://stackoverflow.com/a/1848762/501557)，可以准确存储的最大值是 2 ^(53)，大约是 9 × 10 ^(15)。你的数字（大约 1.3 × 10 ^(17)）比这个大，所以（很有可能）它不能被准确地表示。

如果你想在 JavaScript 中得到准确的答案，你需要使用一个支持任意精度整数的库。一个快速的谷歌搜索出现了[这个库](http://www.leemon.com/crypto/BigInt.js)，但我不能保证它有多准确。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-15T04:17:30.190

Javascript 中的所有数字实际上都是浮点数。您正在处理非常大的数字，并对这些数字进行多次操作。在这种情况下，处理浮点数的固有错误很快就会堆积起来，从而导致“错误”。

在这么大的数字上落后 6 分实际上是相当不错的。你只差了 0.000000000000004431%，大约

# python - python os.walk 将所有内容保存在目录中

> ID：11044530
> 
> 赞同：-4
> 
> 时间：2012-06-15T04:17:03.357
> 
> 标签：python

此脚本将文件保存为`"/home/name/main/all my files and stuff"`. 我想将其另存为`"main/all my files and stuff"`.

```
def zipit ():
  file_paths = ['/home/name/main/']
  buffer= StringIO.StringIO()
  z= zipfile.ZipFile( buffer, "w" )
  for p in file_paths:
    for dir, subdirs, files in os.walk(p):
      for f in files:
        z.write(os.path.join(dir, f))
  z.close()
  buffer.seek(0)
  final = HttpResponse(buffer.read())
  final['Content-Disposition'] = 'attachment; filename=dbs_custom_library.zip'
  final['Content-Type'] = 'application/x-zip'
  return final 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T08:06:30.557

问题是`zipfile`存储了您提供的完整路径`ZipFile.write`。`arcname`但是您可以使用参数 ( [ref](http://docs.python.org/library/zipfile.html#zipfile.ZipFile.write) )修改 zip 中的路径。

所以你只需`'/home/name/'`要从文件名中去掉：

```
filename = os.path.join(dir, f)
z.write(filename, arcname=filename[11:]) 
```

# php - 这是长轮询（彗星编程）的正确方法吗

> ID：11044535
> 
> 赞同：5
> 
> 时间：2012-06-15T04:17:46.460
> 
> 标签：php, javascript, ajax, comet, long-polling

首先，我要感谢你们所有对新程序员如此有帮助的伟大人物。

我有一个关于长轮询的问题。我研究了一些关于**Comet Programming 的长轮询技术的**文章。该方法对我来说似乎很难，因为它有时还需要在服务器端安装一些脚本。

现在我找到了一个关于长轮询的例子。它工作得很好，但我不确定它是否是正确的方法。示例脚本是关于一个类似聊天的应用程序。这个 php 脚本的工作原理如下：

1.  php 脚本不断检查 data.txt 文件，直到它被更改。
2.  只要更改了data.txt，就会在网页上输出新的文本。

这是php脚本：

```
<?php
$filename  = dirname(__FILE__).'/data.txt';

// store new message in the file
$msg = isset($_GET['msg']) ? $_GET['msg'] : '';
if ($msg != '')
{
    file_put_contents($filename,$msg);
    die();
}

// infinite loop until the data file is not modified
$lastmodif    = isset($_GET['timestamp']) ? $_GET['timestamp'] : 0;
$currentmodif = filemtime($filename);
while ($currentmodif <= $lastmodif) // check if the data file has been modified
{
    usleep(500000); // sleep 500ms to unload the CPU
    clearstatcache();
    $currentmodif = filemtime($filename);
}

// return a json array
$response = array();
$response['msg']       = file_get_contents($filename);
$response['timestamp'] = $currentmodif;
echo json_encode($response);
flush();
?> 
```

我不包括网页代码以保持问题简单。该网页只有一个 div，它在更改时显示 data.txt 的文本。

**我的问题的要点是：**

*   这种循环方法是*长轮询服务器的正确方法*吗？
*   此外，当服务器正在执行`sleep();`其他同时请求时会发生什么？
*   *由于长轮询的*连续脚本，是否有任何技术可以减少服务器负载？
*   如果启动此长轮询请求的客户端断开连接，*我们如何知道并相应地停止该断开连接客户端的脚本*？

请指导我解决这个问题...谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T06:21:46.027

是的，这是一个想法。您应该记住，这个脚本不会结束，并且会为每个用户生成一个 PHP 实例。我在 v8cgi 服务器端使用 longpoll 逻辑。客户端启动 XMLHttp 请求 (XHR) 后，服务器开始检查新输入的间隔。我添加了一个计时器服务器端，每 5 分钟发送一次响应，之后客户端（如果未断开连接）重新发送 XHR 并重复该过程。

因此，服务器端机制的每个实例的运行时间最多不超过 5 分钟，因为如果客户端断开连接，服务器在 5 分钟后发送的响应不会跟随新的 XHR。

该过程如下所示：

*   客户端发送 XHR
*   服务器生成定期检查更新
*   如果必须发送一些更新：服务器发送响应
    *   客户端处理响应并重新启动 XHR
    *   服务器产生进程并定期检查更新
*   如果 5 分钟后没有更新：
    *   服务器发送响应并退出生成的进程
    *   客户端进程（空）响应并重新启动 XHR
    *   服务器产生新进程并开始检查
*   如果必须发送一些更新：服务器发送响应
*   [...]
*   如果 5 分钟后没有更新：
*   [...]
*   直到客户端断开连接（= 服务器响应后没有新的 XHR）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T06:44:37.067

是的，这是一种简单方便的方法，它不是正确的方法，但不是最好的主意。因为随着用户的增加，它会遭受并会导致许多问题。

而对于共享主机来说，这样做并不是一个好主意，这种方法只有在用户数量不多并且你有自己的服务器的情况下才能正常工作。如果您将在共享主机服务器中使用此方法，那么您可能会面临已**使用的最大服务器资源**，或者**会话锁定**问题，并且 http 服务可能会在一段时间内不可用。

或者您可以使用现有的 api，用于聊天应用程序，或者拥有可以运行脚本之类`node.js`和类似服务器模块的专用服务器

# javascript - 这些代码是如何运作的？

> ID：11044538
> 
> 赞同：7
> 
> 时间：2012-06-15T04:18:43.187
> 
> 标签：javascript, prototyping

我之前正在阅读如何“创建 JavaScript 库”，我遇到了这些让我想扯掉头发的代码。

这是让我的大脑陷入困境的代码：

```
if (window === this) {
    return new _(id);
} 
```

_(id) 只是包含此代码的函数名称。如果您需要自己查看，这里是其余的代码。

```
function _(id) {

// About object is returned if there is no 'id' parameter
var about = {
    Version: 0.5,
    Author: "Michael Jasper",
    Created: "Fall 2010",
    Updated: "23 November 2011"
};

if (id) {

    // Avoid clobbering the window scope:
    // return a new _ object if we're in the wrong scope
    if (window === this) {
        return new _(id);
    }

    // We're in the correct object scope:
    // Init our element object and return the object
    this.e = document.getElementById(id);
    return this;
  } else {
    // No 'id' parameter was given, return the 'about' object
    return about;
  }
}; 
```

我以前从未见过“返回新功能”，但我很想了解它的功能。

另一段代码：

```
_.prototype = {
  hide: function () {
          this.e.style.display = 'none';
          return this;
  }

  show: function () {
           this.e.style.display = 'inherit';
           return this;
  }
}; 
```

我知道这段代码向 _ 对象添加了新方法，但为什么他们“返回这个”？我试过没有，它工作得很好。

最后一件事，文章的链接是[http://www.mikedoesweb.com/2012/creating-your-own-javascript-library/](http://www.mikedoesweb.com/2012/creating-your-own-javascript-library/)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-15T04:38:10.767

第一段代码本质上是试图检测“构造函数”函数是如何被调用的......

在 javascript 中，您可以通过两种方式使用函数创建对象：

```
function _(id) {
    this.someProperty = "stuff";
    //Do more stuff to "this"
    return this;
}

//in this scenario, the "this" object will be the window object
var myObject = _(id);
console.log(window.someProperty); //outputs "stuff";
console.log(myObject.someProperty); //outputs "stuff";

//in this scenario, the "this" object is what get's actually returned...
var myObject = new _(id);
console.log(window.someProperty); //outputs "undefined"
console.log(myObject.someProperty); //outputs "stuff" 
```

因此，检查

```
if (window === this) {
    return new _(id);
} 
```

只是为了确保您不会在没有`new`关键字的情况下意外调用构造函数。这会很糟糕，因为您将分配给对象的任何属性都会立即分配给`window`命名空间......这会很糟糕。

* * *

至于您的第二个问题，作者`return this;`在每个方法的末尾使用 a 作为[流畅的界面设计模式](http://en.wikipedia.org/wiki/Fluent_interface)

这允许方便且美观的对象操作。一个常见的例子是 jQuery，您可以在其中将方法链接到一个对象...

```
$(".some-css-selector").click(function() { 
    ... do something to the selected objects during the "click" event
}).keyup(function() {
    ... do something to the same objects during the "keyup" event
}); 
```

* * *

编辑：针对以下 W3Geek 的评论提供更多附加信息：

来自 Douglas Crockford 的书“Javascript: The Good Parts”（如果您正在学习 JS，这完全是一本好书……只有 70 页，但每一页都值得一读）。

* * *

Javascript 的`new`操作符创建一个继承自操作数原型成员的新对象，然后调用操作数，将新对象绑定到`this`. 这使操作数（最好是构造函数）有机会在将新对象返回给请求者之前对其进行自定义。

如果您忘记使用 `new 运算符，您将获得一个普通的函数调用，并且 this 绑定到全局对象而不是新对象。这意味着您的函数在尝试初始化新成员时将破坏全局变量。这是一件非常糟糕的事情。

...

构造函数是设计为与`new`前缀一起使用的函数。`new`前缀基于函数的原型创建一个新对象，并将该对象绑定到函数隐含参数`this`。如果您忽略使用`new`前缀，则不会创建新对象，`this`并将绑定到全局对象。这是一个严重的错误。

* * *

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-15T04:24:56.543

`return this`使您能够链接方法调用。您可以做一些非常酷且有用的事情，例如，`_.show().hide()`. :)

# java - 如何在事件的小程序中调用paint()

> ID：11044540
> 
> 赞同：0
> 
> 时间：2012-06-15T04:19:10.423
> 
> 标签：java, applet

我正在将小程序用于应用程序。当一个条件满足时，它必须再次调用paint方法。这可以用重绘方法吗？或任何其他方法可以遵循..?? 我尝试过这样的事情，

```
if(j==0){
     ready_status=true;
     repaint();  // i want paint has to call again here      
  } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-15T04:29:27.643

试试这个

```
paint(getGraphics()); 
```

# workflow - 使用动态更改 (System.Workflow.ComponentModel.WorkflowChanges) 的 Workflow 4.0 版本控制 WF4

> ID：11044546
> 
> 赞同：0
> 
> 时间：2012-06-15T04:19:33.167
> 
> 标签：workflow, versioning, workflow-foundation-4, workflow-activity

我有一个非常大的工作流，它使用框架 4。一些工作流可以在系统中保留长达 2 年，每当我更新工作流时，所有现有实例都将不再工作。

我已经看到一些使用“路由”方法的解决方法，系统中有 2 个不同版本的 WF，它会在执行时路由到正确的 WF。但是我不能真正使用这种方法，因为我需要所有现有实例才能使用更新后的新版本的工作流。

因此，我找到了解决它的动态更新方法，但我无法让它工作。有人在某个地方有任何教程吗？我看过一些例子，但它们似乎是 .NET 框架 2 或 3。

目前，我创建了一个名为：TestClass.cs 的新活动类，这是代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Activities;
using SPABLL;
using System.Workflow.ComponentModel;

namespace SPAWorkflow.Activities.DynamicUpdate
{
    public sealed class TestClass : NativeActivity
    {
        protected override void Execute(NativeActivityContext context)
        {
            WorkflowChanges wc = new WorkflowChanges(this);
        }
    }
} 
```

但是这条线： new WorkflowChanges(this); 给我一个错误，因为 'this' 不是 System.Workflow.ComponentModel.Activity 对象，我不确定要传入什么..

不知道是否有人能给我一些启示，或者你有一些我可以遵循的工作样本。

非常感谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T07:49:22.353

这行不通。WorkflowChanges 类型和它所需的 System.Workflow.ComponentModel.Activity 是 WF3 的一部分，而不是 WF4。

使用 WF4，您将不得不等待 .NET 4.5 获得类似的功能。

# java - 如何清除重置按钮上的日期和时间

> ID：11044548
> 
> 赞同：0
> 
> 时间：2012-06-15T04:20:03.050
> 
> 标签：java, android, datetime

我正在使用两个按钮的日期和时间。它们运行良好。但我需要添加更多按钮 Clear 。单击清除按钮时，我的日期 N 时间按钮应为空（不应显示日期 N 时间）。

```
<Button
    android:id="@+id/btn_qs_date"
    style="@style/Text.Medium"
    android:layout_width="wrap_content"
    android:layout_height="40dp"
    android:text="Thu, 15/03/2012" />

<Button
    android:id="@+id/btn_qs_time"
    style="@style/Text.Medium"
    android:layout_width="wrap_content"
    android:layout_height="40dp"
    android:layout_marginLeft="10dp"
    android:text="11:00 AM" />

<ImageButton 
    android:id="@+id/reset_date_time"
    android:layout_width="30dp"
    android:layout_height="30dp"
    android:layout_centerHorizontal="true"
    android:layout_gravity="center"
    android:layout_marginLeft="20dp"
    android:background="@drawable/selector_reset_button" /> 
```

我的Java代码是：-

```
case R.id.btn_reset_radio_test_grp:

    rgYes.setChecked(false);
    rgNo.setChecked(false);
    break;

case R.id.reset_date_time:

    //i will have to write here
break; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T04:23:18.850

```
clearButton.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    btn_qs_date.setText("");
                    btn_qs_time.setText("");
                }
            }); 
```

你`clearButton`在 UI中的 clearButton 位置

# php - SOAP 输出处理

> ID：11044550
> 
> 赞同：0
> 
> 时间：2012-06-15T04:20:14.807
> 
> 标签：php, xml, soap

我在 php 中调用基于肥皂的 Web 服务。

当我回显输出时，页面上什么都看不到，但我可以在 viewsouce 中看到一个 xml。任何人都可以指导我处理输出，以便我可以从中获取数据。我以前从未处理过 xml，所以觉得它有点混乱。

这是我的代码

```
$a = new SoapClient('http://abc.com?wsdl');
$login = $a ->TestConnectStr(array('UserName' => 'Test', 'Password' => '1234'));
echo $login->TestConnectStrResult; 
```

输出链接查看源：http://www.toolbrands.co.uk/rialto.php

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T08:42:53.567

原因是您给定的 Web 服务方法**$a ->TestConnectStr();** 返回一个 XML 字符串。如果您使用**echo**打印结果字符串 ，浏览器将呈现 xml 标签。如果想要输出查看 xml**用于测试目的**，您可以将这些值打印到这样的文本区域

> > $xml= $login->TestConnectStrResult;
> > 
> > echo "<textarea cols=50 rows=10> $xml</textarea> ";

如果您需要对生成的 xml 字符串执行任何操作，则需要解析该 xml

# python - 需要帮助才能让 jinja2 工作

> ID：11044551
> 
> 赞同：1
> 
> 时间：2012-06-15T04:20:43.013
> 
> 标签：python, google-app-engine, jinja2

我正在努力让 Jinja2 与 Google AppEngine 一起工作。我的 main.py 代码有以下内容：

```
import os
import webapp2
import jinja2

jinja_environment = jinja2.Environment(autoescape=True, 
    loader=jinja2.FileSystemLoader(os.path.join(os.path.dirname(__file__), 'templates')))

class MainPage(webapp2.RequestHandler):
    def get(self):
        template_values = {
            'name': 'SomeGuy',
            'verb': 'extremely enjoy'
        }

    template = jinja_environment.get_template('index.html')
    self.response.out.write(template.render(template_values))

webapp2.WSGIApplication([('/', MainPage)], debug=True) 
```

这已经杀死了我几个小时，我将不胜感激。

更新：

我已经稍微更改了代码以更新情况。日志告诉我：

```
ImportError: <module 'main' from '/base/data/home/apps/s~devpcg/1.359633215335673018/main.pyc'> has no attribute app 
```

上面的代码都来自我的 main.py 文件夹。我在名为 templates 的文件夹中有一个文件 index.html，它与 main.py 文件位于同一目录中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T04:51:56.277

在将代码粘贴到 stackoverflow 时，我不确定这是否是复制粘贴错误，但您似乎确实收到了评论中指示的缩进错误...
这是正确的缩进：

```
class MainPage(webapp2.RequestHandler):
    def get(self):
        template_values = {
            'name': 'SomeGuy',
            'verb': 'extremely enjoy'
        }

        template = jinja_environment.get_template('index.html')
        self.response.out.write(template.render(template_values)) 
```

* * *

编辑：
根据新错误，我建议您提供更多有关您的应用程序结构的信息。
我猜你是在向我们展示你的`main.py`文件。
如果确实是这种情况，您需要在该文件中包含类似于以下代码的内容（假设 Python 2.7）。
有关更详细的详细信息，请参阅文档：
[https ://developers.google.com/appengine/docs/python/python27/using27#Configure_WSGI_Script_Handlers](https://developers.google.com/appengine/docs/python/python27/using27#Configure_WSGI_Script_Handlers)

```
app = webapp2.WSGIApplication(routes=[ 
    ( r'/', MainPage ),
    # ... other paths ...
], debug=True) # True for now until ready for prod... 
```

# android - 带有 SQLite 查询语句的扩展片段和列表片段类

> ID：11044553
> 
> 赞同：1
> 
> 时间：2012-06-15T04:21:03.840
> 
> 标签：android, sqlite, android-fragments

在扩展 a `Fragment`，`SQLite`查询语句的类中编写，这可能吗？

*问题@*

我面临的是`SQLiteOpenHelper`需要一个上下文作为它的参数，但它不可能在`Fragment`.

我也无法访问`Fragment elements from the Activity`，因为它在另一个布局中，可以使用 View Pager 吗？

```
public class ListFrag extends Fragment implements OnClickListener{
    private SQLiteDatabase database;
    private MySQLiteHelper dbHelper=new MySQLiteHelper(this.getActivity().getApplicationContext()); 
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Log.w("aaaaaaa","List on Create");
        database = dbHelper.getWritableDatabase();

    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        Log.w("b","List on Activity Created");

    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View view=inflater.inflate(R.layout.home, container,false);

        TableRow leave =(TableRow)view.findViewById(R.id.leave);
        leave.setOnClickListener(this);
        Log.w("ccccccccc","List on Create View");
        TableRow time =(TableRow)view.findViewById(R.id.time);
        time.setOnClickListener(this);

        TableRow cart =(TableRow)view.findViewById(R.id.cart);
        cart.setOnClickListener(this);

        TableRow invoice =(TableRow)view.findViewById(R.id.invoice);
        invoice.setOnClickListener(this);

        TableRow purchase =(TableRow)view.findViewById(R.id.purchase);
        purchase.setOnClickListener(this);

        TableRow travel =(TableRow)view.findViewById(R.id.travel);
        travel.setOnClickListener(this);

        TextView leave_n =(TextView)view.findViewById(R.id.leave_n);
        Cursor LCount= database.rawQuery("select count(*) from LeaveRequest",null); 
        LCount.moveToFirst(); 
        int lcount= LCount.getInt(0);
        LCount.close();
        leave_n.setText(""+lcount);

        return view;
    }

    public void onClick(View v) {
        // TODO Auto-generated method stub

          FragmentManager fragmentManager = getFragmentManager();
          FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();

        switch (v.getId()) {
            case R.id.leave:
                ArrayListFragment list=new ArrayListFragment();
                fragmentTransaction.replace(R.id.frag_capt, list);
                fragmentTransaction.commit();
            break;

        case R.id.time:
            Toast.makeText(this.getActivity().getApplicationContext(), "Toast message",
                    Toast.LENGTH_LONG).show();
            break;

        case R.id.cart:
            Toast.makeText(this.getActivity().getApplicationContext(), "Toast message",
                    Toast.LENGTH_LONG).show();
        break;

        case R.id.invoice:
            Toast.makeText(this.getActivity().getApplicationContext(), "Toast message",
                    Toast.LENGTH_LONG).show();
        break;

        case R.id.purchase:
            Toast.makeText(this.getActivity().getApplicationContext(), "Toast message",
                    Toast.LENGTH_LONG).show();
            break;

        case R.id.travel:
            Toast.makeText(this.getActivity().getApplicationContext(), "Toast message",
                    Toast.LENGTH_LONG).show();
            break;

        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T06:02:50.833

我一直这样做......使用`getActivity()`。

我的 ListFragments 之一的代码片段：

```
itemCursor = mDbHelper.fetchAllItems();
getActivity().startManagingCursor(itemCursor);
String[] from = new String[] { GroceryDB.ITEM_NAME,
        GroceryDB.ITEM_UNIT, GroceryDB.ITEM_COST };
int[] to = new int[] { R.id.ListItem1, R.id.ListItem2, R.id.ListItem4 };
lists = new CursorAdapter_Check(getActivity(),
        R.layout.rowlayout_itemlist, itemCursor, from, to);
setListAdapter(lists); 
```

**编辑**

您收到错误是因为您从未打开数据库然后尝试从已关闭的数据库中获取游标。通常在你对数据库做任何事情之前应该有这样的事情：

```
mDbHelper = new yourDatabase(getActivity());
mDbHelper.open(); 
```

# c - 在 C 中更改 void 指针值的问题

> ID：11044555
> 
> 赞同：0
> 
> 时间：2012-06-15T04:21:23.993
> 
> 标签：c, pointers, void-pointers

基本上我的问题是我试图改变`valor`变量内的值，所以在调用`cambiar_valor`函数后它变成了 25。但我的问题是它根本没有改变。我在这里做错了什么？我正在尝试制作一个真正通用的函数，以便根据我传递给函数的数据类型，它会发生动态变化。在这种情况下是整数类型，但我在这里要做的是检查我是否可以更改`valor`函数内变量的值

```
#include<stdio.h>
#include<stdlib.h>

void cambiar_valor(void* valor,int* valor_dos) {//assign valor_dos to valor
    valor = valor_dos;
}

int main() {
    void *valor;
    int *valor_dos = 25;
    cambiar_valor(valor,valor_dos);
    printf("%d \n",(int*)valor);//this should show 25
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T04:26:40.057

在你的功能

```
void cambiar_valor(void* valor,int* valor_dos) {//assign valor_dos to valor
    valor = valor_dos;
} 
```

您按值传递指针，这意味着`valor`和`valor_dos`是您传递的参数的副本。`valor`在函数内部重新分配对调用函数没有影响。

要解决此问题，请通过指针获取参数：

```
void cambiar_valor(void** valor, int* valor_dos) {//assign valor_dos to valor
    *valor = valor_dos;
} 
```

然后打电话

```
cambiar_valor(&valor, valor_dos); 
```

此外，正如@Levon 所提到的，您的`valor_dos`in初始化`main`不正确，可能会在运行时导致段错误。你可能也想改变它。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T04:25:35.023

这里

```
 int *valor_dos = 25; 
```

您正在初始化一个指向值为 25 的 int 的指针。也就是说，它指向内存位置 25，这只会导致麻烦。我很惊讶你没有遇到段错误。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-15T04:27:55.877

```
int *valor_dos = 25 
```

这种说法是不正确的。您在这里声明了一个指针，因此您不能为其分配值 (25)。

# r - 读取 r 中的 html 节点

> ID：11044559
> 
> 赞同：2
> 
> 时间：2012-06-15T04:21:57.910
> 
> 标签：r

我需要从互联网上获取一组 html 格式的向量。

我正在以这种方式阅读网页：

```
add=url
doc=htmlTreeParse(add) 
```

这是文档的外观：

> 文档 $file [1] "http://ifis.iowafloodcenter.org/ifis/ifis5/ws/objects.php?id=741&type=4"

```
 $version
  [1] ""

  $children
  $children$html
  <html>
  <body>
  <p>743,762,754,759,761,744,741,755,758,742,757,716,760</p>
  </body>
 </html>

  attr(,"class")
 [1] "HTMLDocument" 
```

我希望获得以下数字

作为向量。

我尝试使用：

```
xmlValue(xmlRoot(doc) ) 
```

但这并没有给我向量。

如何做呢？

感谢您阅读

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T05:16:39.117

就这个：

```
getURL(add,encoding = "iso8859-8") 
v2=strsplit(v, "\\,")
as.numeric(v2[[1]][[2]]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T05:07:18.403

尝试使用

```
 `getURL(add)` 
```

来自 RCurl 包

# authentication - 如何针对 Windows 本地用户和组进行身份验证

> ID：11044561
> 
> 赞同：0
> 
> 时间：2012-06-15T04:22:24.307
> 
> 标签：authentication

我在 Windows 用户和组中设置了一个用户作为 group1 中的用户名/密码。它如何验证它？[如何列出 windows 用户和组](https://stackoverflow.com/questions/3515588/how-to-list-windows-users-and-groups-in-asp-net)一文讲述了如何列出它们。

如何验证组内带有密码的本地用户？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T05:02:51.057

我假设您不是在考虑使用 Windows 模拟，而是为您的用户使用登录框，并针对本地源和回退到 AD 进行身份验证。如果是这样，那么这些答案应该为您指明正确的方向：[MVC3 authorization using AD](https://stackoverflow.com/questions/6101330/mvc3-authorization-using-ad)

如果您更喜欢 VB.NET，那么 CodeProject 似乎有[一篇关于 AD 身份验证的好文章](http://www.codeproject.com/Articles/42428/ASP-NET-3-5-Custom-Windows-Authentication-using-VB)。

# javascript - javascript中的HTML颜色代码拾取

> ID：11044568
> 
> 赞同：-2
> 
> 时间：2012-06-15T04:23:53.720
> 
> 标签：javascript

实际上我想要那个，假设我有一个颜色代码#FF3366。我如何检查它是更亮或更暗？实际上我想创建一个文本字段，当文本字段的字体颜色通过 javascript 更改为较浅的颜色时，文本字段的背景颜色会自动变暗，以便清楚地显示文本字段的值，反之亦然。

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T04:55:44.947

我怀疑您可以使用[COLOURlovers](http://www.colourlovers.com/api)公开的 API来做您需要的事情。就我个人而言，我以前没有使用过该服务，也没有以任何方式附属于它，而是谷歌的第一个结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T05:31:59.443

这个公式是几年前的，在 W3 的网站上，但我找不到地址。它将 rgb 颜色从最暗到最亮排序。只需2个就可以正常工作...

```
function lumenSort(ac, bc){
    return ((ac[0]*299 + ac[1]*587 + ac[2]*114)/1000-
    (bc[0]*299 + bc[1]*587 + bc[2]*114)/1000);
}
var A= [[0, 0, 0], [255, 255, 255]].sort(lumenSort);
alert(A[0]+' is darker than '+A[1]); 
```

# ruby-on-rails - Rails 2.3 中的详细语句跟踪

> ID：11044570
> 
> 赞同：2
> 
> 时间：2012-06-15T04:24:02.607
> 
> 标签：ruby-on-rails, trace

不久前，我记得使用了一段代码（4-5 行），添加到`script/server`文件中，这将显示`puts`webrick 运行时每个方法调用的跟踪。输出类似于：

```
Entering: x method
Exiting: x method 
```

我这辈子都不记得它是如何完成的，或者如何复制它。有人有想法么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T04:33:16.347

很难说，有很多方法可以做到这一点， from [`Kernel.set_trace_func`](http://apidock.com/ruby/Kernel/set_trace_func)，或[tracepoint](https://github.com/rubyworks/tracepoint)，或[rbtrace](https://github.com/tmm1/rbtrace)，或[Unroller](http://unroller.rubyforge.org/)（不清楚这些天它有多好用）。

不过，您可能正在专门考虑[这个 SO answer](https://stackoverflow.com/questions/7050896/logging-all-method-calls-in-a-rails-app)。

# sql - 如何针对 Oracle 编写此 SQL？

> ID：11044576
> 
> 赞同：-2
> 
> 时间：2012-06-15T04:25:06.833
> 
> 标签：sql, oracle

我有 5 张桌子：

```
TABLE_A:
    A_ID

TABLE_B:
    A_ID
    B_ID
TABLE_C:
    B_ID
    C_ID
    C_SOME_NUMBER

TABLE_D:
    A_ID
    D_ID
TABLE_E:
    D_ID
    E_ID
    E_SOME_NUMBER 
```

可以看到，映射关系是：

```
1 A --> n B
1 B --> n C
1 A --> n D
1 D --> n E 
```

我想写一个 SQL 来计算： A_ID 的计数：

```
sum(C_SOME_NUMBER) != sum(E_SOME_NUMBER) 
```

但是我不知道怎么写这个sql。我的数据库是甲骨文

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T04:36:22.387

```
select
    count(Q1.ID) as 'whoopsie'
from
    (
        select
            a.ID,
            sum(c.some_number) as someNum
        from
            TA a,
            TB b,
            TC c
        where
            a.ID=b.IB
            and b.ID=c.ID
        group by
            a.ID
    ) Q1,
    (
        select
            a.ID,
            sum(e.some_number) as someNum
        from
            TA a,
            TD d,
            TE e
        where
            a.ID=d.IB
            and d.ID=e.ID
        group by
            a.ID
    ) Q2
where
    Q1.ID=Q2.ID
    and Q1.someNum != Q2.someNum 
```

# iphone - 通过滑动切换到不同的 plist？

> ID：11044578
> 
> 赞同：-1
> 
> 时间：2012-06-15T04:25:23.000
> 
> 标签：iphone, ios

这将有点难以解释。我通常对微观层面的代码很好，但在宏观层面需要一些指导。任何事情都会有所帮助。

我正在尝试创建一个记事卡应用程序，在该应用程序中向用户呈现一个带有一堆抽认卡的屏幕。有多个主题，每个主题由不同的 .plist 管理。要在主题区域之间切换，请左右滑动。我不知道如何使用故事板最有效地实现这一目标，这是我的主要问题。你可以使用一个视图来做到这一点，还是我必须为每一叠抽认卡创建一个不同的视图并在它们之间创建一个过渡？

非常感谢，提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T04:32:57.643

如果您希望通过左右滑动在不同视图之间切换，最合乎逻辑的选择是使用启用分页的 UIScrollView。然后，您可以初始化一个 NSArray 并让它存储不同 PList 文件的名称，并使用它来管理视图之间的数据。显然，这只是解决此问题的众多解决方案之一，但是当您谈论想要切换滑动操作时，UIScrollViews 将是 iOS 默认的执行方式。

这是一个关于如何在分页中使用 UIScrollViews 的教程：

[http://www.iosdevnotes.com/2011/03/uiscrollview-paging/](http://www.iosdevnotes.com/2011/03/uiscrollview-paging/)

希望有帮助！

# django - 由于创建 UserProfile 引发 IntegrityError，无法创建 Django 用户

> ID：11044579
> 
> 赞同：0
> 
> 时间：2012-06-15T04:25:26.410
> 
> 标签：django, creation, user-profile

创建用户时，Django 给我一个完整性错误。从我的models.py：

```
class UserProfile(models.Model):
    user = models.OneToOneField(User)

    age = models.DateField()
    city = models.CharField(max_length=30)
    state = models.CharField(max_length=20)
    country = models.CharField(max_length=30)
    primary_language = models.CharField(max_length=30)
    secondary_language = models.CharField(max_length=30, blank=True, null=True)
    tertiary_language = models.CharField(max_length=30, blank=True, null=True)

def create_user_profile(sender, instance, created, **kwargs):
    if created:
        UserProfile.objects.create(user=instance)

post_save.connect(create_user_profile, sender=User) 
```

上面的代码直接来自 Django[站点](https://docs.djangoproject.com/en/dev/topics/auth/#storing-additional-information-about-users)。到views.py，我在这里创建用户：

```
def create_user_and_profile(request):
    form = RegistrationForm(request.POST)
    if form.is_valid():
        # User is saved to DB here
        user = User.objects.create_user( 
            username = form.cleaned_data['username'],
            password = form.cleaned_data['password1'],
            email = form.cleaned_data['email']
        )
        user.first_name = form.cleaned_data['first_name']
        user.last_name = form.cleaned_data['last_name']
        user.save()
        # TODO remaining user creation code goes here
        profile = user.get_profile()

        profile.age = form.cleaned_data['age'],
        profile.city = form.cleaned_data['city'],
        profile.state = form.cleaned_data['state'],
        profile.country = form.cleaned_data['country'],
        profile.primary_language = form.cleaned_data['primary_language'],
        profile.secondary_language = form.cleaned_data['secondary_language'],
        profile.tertiary_language = form.cleaned_data['tertiary_language']
        profile.save()
        return user
    else:
        variables = RequestContext(request, {'form': form})
        return render_to_response('registration/register.html', variables) 
```

Django 将创建用户对象（作为 User.objects.create_user 的结果）然后炸毁。我什至在导入我的模型文件后在 shell 中尝试了这个 - 仍然爆炸。这是抛出的错误：

/my_url/ 处的 IntegrityError

myApp_userprofile.age 不能为 NULL

我认为发生的是，当 Django 保存用户对象时，由于回调，它也创建了 UserProfile obj。由于它没有用于创建 UserProfile 的数据，因此由于尝试使用 NULL 作为输入创建数据库记录而引发完整性错误。

披露：我正在使用 sqlite3 并在优化我的模式时多次删除和添加表。然而，据我所知，数据库是正确的——我手动浏览了每张桌子。

我在其他任何地方都找不到这种情况的一个例子。为什么 Django 会给我一个选项来创建一个违反 DB 约束的 UserProfile 呢？在过去的两天里，我一直在为此烦恼，并非常感谢任何见解。谢谢！

编辑：刚刚删除数据库以便从头开始。创建我的超级用户帐户时，syncdb 会引发相同的错误。这到底是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T22:39:30.933

回答了我自己的问题。创建和保存用户时，也会创建/保存 UserProfile - 我们知道这一点。我不知道的是日期、布尔值和整数不能为空，如此[处](https://docs.djangoproject.com/en/dev/ref/models/fields/#field-options)所述。因此，解决方案是更改 UserProfile 类的这一行：

```
age = models.DateField() 
```

至

```
age = models.DateField(null=True) 
```

这允许将 UserProfile 保存到数据库而不被填充，并且我可以使用 get_profile() 检索它并稍后填充它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T05:18:44.577

我认为您必须添加`AUTH_PROFILE_MODULE`settings.py 以便在保存新用户后自动创建用户配置文件。你检查过[这个](https://docs.djangoproject.com/en/1.0/topics/auth/#storing-additional-information-about-users)文件吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T04:49:44.530

您是否检查了年龄是否为空？为什么不通过 userprofile 创建用户？我的意思是：

```
profile.first_name = 'abc'
profile.last_name = 'abc'
profile.age = Date(2000, 1, 1)
profile.save() 
```

# android - ListView 在 Android 中覆盖整个屏幕

> ID：11044595
> 
> 赞同：0
> 
> 时间：2012-06-15T04:28:35.167
> 
> 标签：android, android-listview

我在我的 Android 应用程序（API 8）中实现了一个列表视图。但是，该列表仅包含三个元素，因此屏幕的一半以上是空的。我想扩展列表视图以覆盖手机的整个屏幕。有哪些方法可以做到这一点？

这是我的布局 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" 
android:background="@color/white"
android:shape="rectangle"
android:paddingTop="5dp"
android:paddingBottom="0dp"
>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" 
    android:weightSum="100"
    >

    <ImageView
        android:layout_weight="40"
        android:id="@+id/test_image"
        android:layout_width="158dp"
        android:layout_height="52dp"
        android:contentDescription="@string/footer"
        android:src="@drawable/logo1" />

    <Spinner
        android:id="@+id/spinner1"
        android:layout_width="127dp"
        android:layout_height="wrap_content"
        android:layout_gravity="right"
        android:layout_weight="60" 
        android:prompt="@string/city_prompt"
        />
</LinearLayout>

  <LinearLayout android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"   
    >
    <ListView 
    android:id="@android:id/list"
    android:layout_weight="1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="#000000"
    android:drawSelectorOnTop="true"
    android:layout_gravity="center"
    android:dividerHeight="2dp"
    />

</LinearLayout>

</LinearLayout> 
```

请注意，我希望列表项覆盖整个屏幕，只有三个项目到位。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T04:37:53.760

ListView 不会自动填充所有空间。如果你想实现这一点，因为在这里，ListView 占用了全部空间，而不是它的项目。如果您仍想制作更大的行，以防项目较少，则在 getView 方法中使用 getCount() 方法提供列表项的高度。

例如，您希望在列表中的屏幕上一次最多显示六个项目。然后像这样实现 ListView：

获取屏幕的宽度和高度，在 onCreate 方法中使用以下代码：

```
Display display = getWindowManager().getDefaultDisplay();
Point size = new Point();
display.getSize(size);
int width = size.x;
int height = size.y; 
```

现在在 getView 中，执行以下操作：

```
int itemHeight = 0;
if (getCount() >= 6)
    itemHeight = height/6;
else
    itemHeight = height/getCount();

LinearLayout llView=new LinearLayout(YourActivityName.this);
//Or inflate through XML

llView.setLayoutParams(new LayoutParams(LayoutParams.Fill_Parent, itemHeight));
//Do other functionality 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T04:41:19.377

我刚刚复制了您的 XML，粘贴并尝试了，它工作正常。还有一件事要告诉你，你不应该使用`layout_height="wrap_content"`. 相反，您可以`android:layout_height="0dip"`按照您已经使用过的方式提供它，`android:layout_weight="1"`这将使 ListView 填充您的 LinearLayout 的剩余区域。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T04:35:20.150

第一个变化：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" 
    android:background="@color/white"
    android:shape="rectangle"
    android:paddingTop="5dp"
    android:paddingBottom="0dp"
> 
```

然后第二个，改变：

```
<ListView 
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#000000"
    android:drawSelectorOnTop="true"
    android:layout_gravity="center"
    android:dividerHeight="2dp"
/> 
```

# php - 当我的卖家从我的网站销售某些产品时，将我的徽标放在 Paypal 页面上

> ID：11044599
> 
> 赞同：0
> 
> 时间：2012-06-15T04:29:14.023
> 
> 标签：php, paypal

我正在我的网站中的一个名为商店的部分中进行贝宝集成，用户可以在其中从我的商店出售他的产品。当客户在我的网站上从他的商店购买东西时，我正在存储我的卖家的贝宝账户直接向他付款。是否可以将我的徽标放在我传递的卖家电子邮件 ID 不是我的贝宝结帐页面上（因为每个卖家都有自己的 Paypal 企业电子邮件 ID）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T06:26:49.457

有一种叫做“PayPal Payments Pro”的东西，它允许您在典型的 PayPal 帐户上拥有许多选项。从 X.com（了解 Paypal API 堆栈的一个很好的资源），我能够为您提取以下链接（它解释了您想要做什么）

[https://www.x.com/developers/paypal/products/paypal-payments-pro](https://www.x.com/developers/paypal/products/paypal-payments-pro)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T03:29:10.840

是的，您可以使用 PayPal Express Checkout 进行支付。无需升级到 Pro，并支付固定的月费。

在设置快速结账交易时，您有一个参数告诉 PayPal 要显示哪些图像以进行品牌推广。

[https://www.paypalobjects.com/en_US/ebook/PP_APIReference/expresscheckout.html#1144280](https://www.paypalobjects.com/en_US/ebook/PP_APIReference/expresscheckout.html#1144280)

参数名称称为**cpp-header-image**确保它通过 HTTPS 传递，否则浏览器可能会询问用户他/她是否只想查看安全传递的内容。

# c - C 结构/函数交叉引用

> ID：11044600
> 
> 赞同：1
> 
> 时间：2012-06-15T04:29:17.810
> 
> 标签：c, function, reference, struct, param

所以我更有可能在 C 中遇到交叉引用问题

你好，（由于某种原因我不能先写出来）

基本上这段代码：

结构A.h：

```
#pragma once

#include "structB.h"

typedef struct
{
    B b;
}A; 
```

结构B.h：

```
#pragma once

#include "structA.h"

typedef struct
{
    int field;
}B;

void func(A* a); 
```

结构B.c：

```
#include "structB.h"

void func(A* a)
{
} 
```

在 VC2010 上产生以下错误：

> structa.h(7)：错误 C2016：C 要求结构或联合具有
> 
> 至少一个成员 structa.h(7)：错误 C2061：语法错误：标识符
> 
> 'B' 等

因此，由于我在 func(A* a) 中只有一个指向 A 的指针，因此我尝试像这样进行前向声明：

```
#pragma once

typedef struct A;

typedef struct
{
    int field;
}B;

void func(A* a); 
```

我在 structB.c 中添加 #include "structA.h"

但是这不起作用，要修复它，**我必须在原型和实现中将 func(A* a) 的参数更改为 func(struct A* a) ...**

但在这种情况下，我失去了对我的结构进行类型定义的目的......

我知道我可以简单地将函数移动到另一个文件，但该函数与我的结构相关，所以我想将原型保存在与我的结构相同的文件中。现在也许这不是用 C 做事的好方法，我主要习惯于 C++，所以我倾向于在做 C 时用 C++ 思考，这通常是有问题的......

有人知道解决方法吗？非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T04:32:40.553

```
typedef struct structA; 
```

这甚至是如何编译的？-- 正确：

```
typedef struct A A; 
```

# java - Gson json 得到结果

> ID：11044605
> 
> 赞同：0
> 
> 时间：2012-06-15T04:30:23.307
> 
> 标签：java, android, json, gson

我有一个这样的json字符串：

```
{
    "d": {
        "results": [
            {
                "__metadata": {
                    "uri": "http://localhost:2000",
                    "key_fields": "Accountnum",
                    "rows_affected": 0,
                    "last_autoinc": 0
                },
                "Accountnum": "9999999",
                "workphone": null,
                "name": "Smith",
                "address": "33 Main St",
                "city": "Anytown",
                "state": "FL",
                "zip": "33333",

            }
        ]
    }
} 
```

我试图根据stackoverflow上的不同问题对它进行反序列化，但我做错了。这是我所做的，我创建了一个类，我只需要 accountnum 和 name。

```
public class Result {
    @SerializedName("Accountnum")
    public String accountnumStr;

    @SerializedName("name")
    public String nameStr;    
} 
```

我有一个带有 json myresult 的字符串。

```
Gson gson = new Gson();
Result result = gson.fromJson(myresult,Result.class);
myName.setText(result.nameStr); 
```

我收到一个空字符串。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T04:39:58.657

由于有一个对象持有您尝试创建的结果对象，因此您已将结果类设为内部类。你的`Result`班级必须看起来像这样：

```
public class ResultParent {

    public class Result {
        @SerializedName("Accountnum")
        public String accountnumStr;

        @SerializedName("name")
        public String nameStr;    
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T05:23:47.420

如果您根据类对象来可视化您的 JSON，那么它根本没有问题。假设您的根对象包含一个名为“d”的类型为“D”的属性。并且类型“D”包含另一种类型“结果”的“结果”列表。结果包含上面的属性。这是它的图片：

```
class RootObj {
    D d;
}

class D {
    List<Result> results;
}

class Result {
    @SerializedName("Accountnum")
    public String accountnumStr;

    @SerializedName("name")
    public String nameStr; 
} 
```

要从 JSON 中获取对象，您将执行以下操作：

```
Gson g = new Gson();    
RootObj ro = g.fromJson(jsonString, RootObj.class); 
```

# python - 在 django 查询集中访问外键

> ID：11044607
> 
> 赞同：0
> 
> 时间：2012-06-15T04:30:42.253
> 
> 标签：python, django, django-models, django-views

在下面的示例中，我有一个模型`Proof`，其中包含模型的外键`Option`。我想列出我的模板中的所有选项以及它们各自的证明。我将如何在 django 中进行相关连接？我尝试使用一种`_set.all()`方法，但这似乎不适用于查询集，仅适用于单个列表。

谢谢你的帮助 ：）

模型.py

```
class Option(TimeStampActivate):
    title = models.CharField(max_length=500,null=True)
    user = models.ForeignKey(User)
    option = models.CharField(max_length=300)

class Proof(TimeStampActivate):
    user = models.ForeignKey(User)
    option = models.ForeignKey(Option)
    comment = models.CharField(max_length=500,null=True)
    link = models.URLField() 
```

视图.py

```
options = Option.objects.all() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T04:51:08.943

我认为这应该`options = Option.objects.all()`在 view() 的模板中工作。

```
{% for option in options %}
    {{option}}
    {% for proof in option.proof_set.all %}
        {{proof}}
    {% endfor %}
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T04:43:43.623

可能有一种奇特的方式来查询和获得你想要的东西，但是如何创建一个由选项键入的证明的字典呢？

```
from collections import defaultdict
proofs = Proof.objects.all()
options = defaultdict(list)
for p in proofs:
    options[p.option].append(p) 
```

# java - 如何为未来的动态活动留出区域？

> ID：11044609
> 
> 赞同：0
> 
> 时间：2012-06-15T04:31:10.337
> 
> 标签：java, android, xml, button

我试图弄清楚如何使我的布局使以下编码按钮保持在它们的位置，尽管未来有动态活动，也许是通过保留一个可用空间。在菜单按钮和其他三个按钮之间将是一个按钮网格，其大小和数量都是随机的，基于动态创建的预选。但无论有多少按钮或大小，我都希望 main.xml 中设计的这四个按钮保持在适当的位置。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <Button
        android:id="@+id/menu"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="MENU" /> 
```

这是值得关注的领域。我想让菜单按钮（上方）始终连接到屏幕顶部，而步进、暂停和模拟按钮（下方）始终位于屏幕的最底部。

```
 <Button
        android:id="@+id/step"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/grid"
        android:layout_centerHorizontal="true"
        android:text="STEP" />

    <Button
        android:id="@+id/pause"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/grid"
        android:layout_toLeftOf="@id/step"
        android:text="PAUSE" />

    <Button
        android:id="@+id/sim"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/grid"
        android:layout_toRightOf="@id/step"
        android:text="SIMULATE" />

    <SeekBar
        android:id="@+id/speed"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/sim"
        android:layout_alignParentLeft="true"/>

</RelativeLayout> 
```

我只是想出了一个解决方案我自己的问题。我不得不在其他三个按钮上的菜单按钮之后使用“android:layout_alignParentBottom="true"，现在任何动态添加的按钮都可以根据需要放置在两者之间。

该网站不会让我回答我自己的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T05:04:51.493

使您的 RelativeLayout 成为 LinearLayout。给所有按钮“android:layout_weight="0"”。然后在所需的空白处，添加一个具有 android:layout_height="0" 和 "android:layout_weight="1"" 的视图。只要我正确理解您的问题，就应该这样做。

# jquery - jQuery：在跨度上使用鼠标事件是否比在锚上更糟糕？

> ID：11044621
> 
> 赞同：1
> 
> 时间：2012-06-15T04:32:03.117
> 
> 标签：jquery, html, css

在使用诸如 click、mouseover 等 jQuery 事件时，使用锚点和跨度之间有很大区别吗？锚点具有可以在 jQuery 中调用的悬停状态，但除此之外，使用 span 是否是一种好习惯？（或 div 或任何其他用于此目的的元素）。假设我想动态更改一些类并打开一个工具提示......这只是一个例子，我想知道它是否出于某种原因“不推荐”。

编辑：锚只允许在内部使用内联元素，这是让我怀疑这是否是一种不好的做法的限制之一，因为在锚内部我只能有跨度。我使用的锚点不指向任何地方，我使用它们只是为了利用 css 中的悬停样式，而没有冗长且重复的脚本。

例子：

```
<span class="class">
    <p>Some text I don't want to use</p>
    <a class="anchorClass" href="#">Anchor with a specific behaviour</a>
</span>

<a class="class" href="#">
   <p>Some other text I don't want to use but I want it to be inside the anchor</p>
   <span class="spanClass">Span with a specific behaviour</span>
</a> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T04:35:21.163

如果元素指向可以添加书签或作为直接链接发送的特定位置，请使用`<a>`标签。如果没有，只需使用`<span>`. 这样，您的应用程序将为禁用 JavaScript 的人优雅地降级。

我不确定还有什么建议。这通常是我在交换两者时遵循的规则。

# android - 跨不同活动重用视图而没有单独的通货膨胀（跨活动实施admob）

> ID：11044622
> 
> 赞同：0
> 
> 时间：2012-06-15T04:32:10.323
> 
> 标签：android

有什么方法可以让我在不同的活动中使用 AdMob（或者如果我变得更通用，则使用视图），而无需将其与每个活动分开膨胀（我不希望广告在每次活动更改时重新启动）......并且我希望它从 2.1 及更高版本开始工作（因此我不能使用片段）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T04:44:34.070

实际上，您最好每次都重新制作广告。您可以这样做，但您很可能需要制作 AdMob（或视图）的可序列化版本，并将视图传递给您意图中的下一个活动。序列化 AdMob 视图可不是一件小事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T12:11:40.943

这可以通过使用片段来实现，反向移植片段可能是可能的，我还没有尝试过。

# android - Android XML 设计在 10.1 选项卡但不支持其他屏幕分辨率

> ID：11044623
> 
> 赞同：0
> 
> 时间：2012-06-15T04:32:26.200
> 
> 标签：android

我使用 dp 作为单位来缩放设计中对象的大小。我在WXGA中设计了10.1中的xml接口，可以在这个设备上正常运行。但是，当我尝试以其他屏幕尺寸安装时，例如 WVGA 中的 4.7 时，对象（包括图像、按钮、文本）比正常尺寸大得多。这是我的 xml 代码：

```
<?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/relativeLayout1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@drawable/loginback" >

        <EditText
            android:id="@+id/editText2"
            android:layout_width="400dp"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_alignParentLeft="true"
            android:layout_marginTop="500dp"
            android:layout_marginLeft="550dp"
            android:inputType="textPassword" >

        </EditText>

        <Button
            android:id="@+id/button1"
            android:layout_width="130dp"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentRight="true"
            android:layout_marginBottom="120dp"
            android:layout_marginRight="600dp"
           android:text="Log Masuk" />

        <Button
            android:id="@+id/button2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentRight="true"
            android:layout_marginBottom="120dp"
            android:layout_marginRight="330dp"
            android:text="Pengguna Baru?Daftar di sini" />

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_alignParentLeft="true"
            android:layout_marginTop="430dp"
            android:layout_marginLeft="250dp"
           android:text="Nama Pengguna: "
            android:textColor="#FFFFFF"
            android:textSize="30sp" />

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
             android:layout_alignParentTop="true"
            android:layout_alignParentLeft="true"
            android:layout_marginTop="500dp"
            android:layout_marginLeft="250dp"
           android:text="Kata Laluan: "
            android:textColor="#FFFFFF"
            android:textSize="30sp" />

        <EditText
            android:id="@+id/editText1"
            android:layout_width="400dp"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_alignParentLeft="true"
            android:layout_marginTop="430dp"
            android:layout_marginLeft="550dp"/>

    </RelativeLayout> 
```

我应该怎么做才能让我的应用程序可以在其他小屏幕设备上查看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T04:39:03.520

为此，您必须制作不同的布局和可绘制文件夹，并根据您的屏幕分辨率放置您的 xml 和图像：

要支持多种屏幕尺寸，请查看此[链接](http://developer.android.com/guide/practices/screens_support.html)

并为设计多个屏幕检查此[链接](http://developer.android.com/training/multiscreen/index.html)

# jquery - 这里有什么问题

> ID：11044624
> 
> 赞同：-2
> 
> 时间：2012-06-15T04:32:28.917
> 
> 标签：jquery, html

我无法启动此功能...我想我需要一双新的眼睛来查看它。谁能告诉我缺陷在哪里？先感谢您...

jQuery/javascript

```
function removeAsFriend(a, b, rn) {
    $("#remove_friend_loader").show();
    $("#remove_friend_loader"+a).show();
    $.post("churchScripts/request_join_church.php", { request: "removeFriendship", mem1: a, mem2: b, thisWipit: rn }, function(data) {
        if(<?php echo $admin_id ?> != a){
            window.location.replace("profile.php?id="a);
    }else{
            $("#remove_friend_loader"+a).hide();
            $("#deleteMember"+a).remove();
            $(".mem"+a).remove();
        }
    }); 
} 
```

php变量中的HTML

```
<div class="interactContainers" id="remove_friend">
            <div style="float:right;"><a href="#" onclick="toggleInteractContainers(\'remove_friend\');">cancel</a> </div>
            Remove '.$church_name.' from your church list? &nbsp;
            <a href="#" onclick="removeAsFriend('.$logOptions_id.', '.$id.', '.$thisRandNum.');">Yes</a>
            <span id="remove_friend_loader"><img src="images/loading.gif" width="28" height="10" alt="Loading" /></span>
        </div> 
```

有任何想法吗

**编辑**

关于这个问题的澄清......这个 Jquery 函数不会在单击 yes 链接时运行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T04:36:47.287

你的锚标签应该是这样的吗？

```
<a href="#" onclick="removeAsFriend('".$logOptions_id."', '".$id."', '".$thisRandNum."');">Yes</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T04:39:07.623

应用一些断点并检查函数是否被调用，或者它运行到什么程度

[http://amodal.net/2007/08/22/2643/debugging-javascript-in-firefox-with-firebug-and-breakpoints](http://asymptomatic.net/2007/08/22/2643/debugging-javascript-in-firefox-with-firebug-and-breakpoints)

一些建议是：

1.  我认为您在 php 中将 html 作为字符串回显，因此请获取浏览器源代码并检查函数调用在那里是否正常。

2.  编辑函数内容并将其替换为一些简单的语句，例如 alert(1)；并检查函数是否被调用。

3.  现在替换旧功能内容并添加警报（1）；对不同点进行编码，例如：

    ```
    function removeAsFriend(a, b, rn) {
    alert(1);
    -------
    somecode
    -------
    alert(1);
    -------
    somecode
    -------
    alert(1);

    } 
    ```

并检查您收到了多少警报。这样你就可以修复错误点。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T04:46:24.267

谢谢，但我刚刚发现了问题......我错过了 window.location 上的 + 号，导致语法错误。谢谢

# java - Java MVP - 没有对 Presenter 对象的引用？

> ID：11044625
> 
> 赞同：0
> 
> 时间：2012-06-15T04:32:39.593
> 
> 标签：java, reference, mvp

所以我正在使用 MVP 模式编写我的第一个 Java 应用程序。MVP 三元组之一是单向通信，基本上视图是只读的。

如果只有 1 个模型 - 1 个演示者 - 1 个视图，是否会有任何回溯创建新的演示者对象并且在模型的观察者列表之外的任何地方都没有对其进行引用？

为了让自己清楚，这就是我“通常”这样做的方式：

```
private Result result;
private ResultPresenter resultPresenter;
public SomePresenter(SomeInterface view) {
    result = new Result();
    resultPresenter = new ResultPresenter(result, view.getResultView());
} 
```

这就是我想这样做的方式：

```
private Result result;
public SomePresenter(SomeInterface view) {
    result = new Result();
    new ResultPresenter(result, view.getResultView());
} 
```

其中 ResultPresenter 是 Result 的观察者。

主要问题是，ResultPresenter 会被垃圾收集器清除吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T04:45:48.790

除其他外（如初始化视图），`ResultPresenter`将实例化或实现一个或多个观察者并将它们注册在“结果”和“结果视图”上。然后这些类将保存对观察者的引用并根据需要通知它们。

有几种方法可以做到这一点，常见的模式是[匿名内部类](http://docstore.mik.ua/orelly/java-ent/jnut/ch03_12.htm)。由于那些匿名内部类仍然持有对其实例化器的引用，因此`ResultPresenter`不会被垃圾回收。
另一种选择是将顶级类实例化为观察者。在这种情况下，是否仍然引用演示者取决于观察者的实现。
最后，presenter 本身可以实现 Observer 的接口（一想到就会不寒而栗）。显然，模型和视图将持有对演示者本身的引用，尽管他们认为它是一个观察者，并且不会被垃圾收集。

即使它会，那也只意味着您只需要它来设置演示文稿并将对象相互链接，之后不再需要它，所以不会造成任何伤害。

# jquery - 锚标记未触发点击事件

> ID：11044635
> 
> 赞同：3
> 
> 时间：2012-06-15T04:33:49.257
> 
> 标签：jquery, eventtrigger

这是[演示](http://jsfiddle.net/Simplybj/Eyq5x/6/)
HTML 代码

```
<div id="me"></div>

<a id="ok" href="">OK</a> 
```

jQuery代码：

```
var tr = '';
for (var i = 0; i < 100; i++) {
    tr += '<tr><td>a' + i + '</td></tr>';
}
var table = '<table>';
table += tr;
table += '</table>';
$('#me').append(table);

$('td').each(function(index, value) {
    if ($(this).text() == 'a50') {
        $(this).addClass('yellow').attr('id', 'search');
    }
});    
$('#ok').attr('href','#search');
$('#ok').trigger('click'); 
```

**TO DO：**在每个 td 的表中都有数据。我正在尝试搜索数据。如果找到搜索数据，则添加td，属性class为黄色，id为搜索。我有一个锚标签。锚标签是为了模拟：当它被点击时，窗口将滚动到那个位置。我还添加了锚标签的内部链接。

现在，要单击 Anchor 标记，以便页面导航到 href 位置

**问题** 页面没有导航到内部链接。锚标签不触发点击有什么问题吗？但是当我用鼠标单击锚标记时导航

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T04:40:09.373

将最后一行替换为

```
window.location.href='#search​​'; 
```

为我工作:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T04:42:05.723

点击和导航之间有区别..所以当它是锚标签中的href时，它更像是导航试试这个[小提琴](http://jsfiddle.net/parush/Eyq5x/12/)

```
var tr = '';
for (var i = 0; i < 100; i++) {
    tr += '<tr><td>a' + i + '</td></tr>';
}
var table = '<table>';
table += tr;
table += '</table>';
$('#me').append(table);

$('td').each(function(index, value) {
    if ($(this).text() == 'a35') {
        $(this).addClass('yellow').attr('id', 'search');
    }
});

location.href='#search'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T05:06:18.810

我认为你应该使用`window.location.href`. 尝试以下操作：

```
// define this click event for #ok

$('#ok').on('click', function() {
    window.location.href = this.href
});

$('td').each(function(index, value) {
    if ($(this).text() == 'a50') {
        $(this).addClass('yellow').attr('id', 'search');
    }
});
$('#ok').attr('href', '#search');
$('#ok').click(); // trigger the click 
```

**[演示](http://jsfiddle.net/Eyq5x/27/)**

# json - Newtonsoft json 序列化程序返回空对象

> ID：11044639
> 
> 赞同：9
> 
> 时间：2012-06-15T04:35:13.480
> 
> 标签：json, json.net

好的 - 我已经为此努力了几个小时。是时候寻求帮助了。

我刚刚将我的 Web 应用程序项目升级到 ASP.NET MVC 4 RC 和新的 WebApi。我的 web api 方法现在返回 EMPTY json "{}" - 即使我的对象已完全填充。

我已经用我自己的 MediaTypeFormatter 替换了序列化程序，它也调用了 Newtonsoft Json 序列化程序，这样我就可以连接并查看工作正常。我看到的是一个进入序列化器的对象，并以“{}”的形式出现。

这在我升级之前可以工作。

这是我的对象

```
[Serializable]
public class Parameters
{
    public string ApplicantName { get; set; }
} 
```

我只是在打电话：

```
var result = JsonConvert.SerializeObject(new Parameters(){ Name = "test" }); 
```

我回来

```
"{}" 
```

这是怎么回事？？

[编辑]

其他人也有同样的问题...在运行 Newtonsoft 源代码后，我可以看到我们在最近的更改中遇到了完全相同的问题。

[http://json.codeplex.com/discussions/357850](http://json.codeplex.com/discussions/357850)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T04:41:26.903

好的 - 有很多变化，结果是对 Json 输出进行了一些非常激进的变化。这些更改还包括如何应用自定义 TypeConverters。

我已经编写了一个基本解析器，它（至少对我们来说）使 Newtonsoft 序列化器的行为更像一个基本的可序列化对象序列化器 - 即序列化所有属性，并且不使用自定义 TypeConverters...

```
/// <summary>
/// A resolver that will serialize all properties, and ignore custom TypeConverter attributes.
/// </summary>
public class SerializableContractResolver : Newtonsoft.Json.Serialization.DefaultContractResolver
{
    protected override IList<Newtonsoft.Json.Serialization.JsonProperty> CreateProperties(Type type, MemberSerialization memberSerialization)
    {
        var properties = base.CreateProperties(type, memberSerialization);

        foreach (var p in properties)
            p.Ignored = false;

        return properties;
    }

    protected override Newtonsoft.Json.Serialization.JsonContract CreateContract(Type objectType)
    {
        var contract = base.CreateContract(objectType);

        if (contract is Newtonsoft.Json.Serialization.JsonStringContract)
            return CreateObjectContract(objectType);
        return contract;
    }
} 
```

*** 注册 *** 在你的 MvcApplication “Application_Start”...

```
GlobalConfiguration.Configuration.Formatters
    .JsonFormatter.SerializerSettings.ContractResolver = 
        new SerializableContractResolver()
        {
            IgnoreSerializableAttribute = true
        }; 
```

# sql - PLSQL 的这个 to_date() 函数是做什么的？

> ID：11044643
> 
> 赞同：-2
> 
> 时间：2012-06-15T04:35:21.987
> 
> 标签：sql, plsql, to-date

```
TO_CHAR((  TO_DATE(calendar_key,'YYYYMMDD' )+ 1),'IW') week 
```

有人可以告诉我这个查询中发生了什么吗？我知道 to_date 操作是做什么的，我对那里的“+1”感到困惑，它会增加 1 年的日期吗？

那么'IW'呢？是别名吗？然后为什么是“周”？

请帮助我。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T04:46:57.317

1) 在日期上使用基本算术时 - 它使用天数。所以`+1`意味着`add one day`

你怎么能自己弄清楚：

```
SELECT systimestamp, systimestamp + 1 FROM DUAL 
```

2) [http://docs.oracle.com/cd/B19306_01/server.102/b14200/sql_elements004.htm#i34948](http://docs.oracle.com/cd/B19306_01/server.102/b14200/sql_elements004.htm#i34948)

> IW - 基于 ISO 标准的一年中的第几周（1-52 或 1-53）。

你怎么能自己弄清楚：

```
Google for: "oracle to_char" 
```

PS：

> 是别名吗？

根据定义，别名不能用单引号括起来：它们可以放在双引号内或根本没有引号。因此，如果您看到用单引号括起来的东西 - 它绝对是一个字符串文字。

# c - 我可以将变量值记录到 gdb 中没有断点的文件吗？

> ID：11044644
> 
> 赞同：1
> 
> 时间：2012-06-15T04:35:46.223
> 
> 标签：c, gdb, breakpoints

是否可以在不使用 gdb 断点的情况下将 ex: 数组值记录到日志文件中？

我用这个：

```
set logging on some_file
b func
command 1
p print_clock_cycles    
c
end 
```

目标：通过 gdb 将时钟周期值记录到文件中。日志记录可以是无限的，所以我不能使用现有的内存。

我的问题：如果我通过读取寄存器来打印时钟周期，与没有断点相比，使用上述脚本打印的值是不同的（由于内存限制，我不想使用其他方式读取）。我假设当我们有一个影响时钟周期的断点时，gdb 需要更多时间来打印。我没有附加任何其他用于 ex jtag 的调试器。

还有其他方法可以记录该值吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T06:40:05.963

你有可用的串口吗？当我在嵌入式平台上开发时，这是保存调试信息的好方法。

我编写了管理串口的函数。我的“打印”函数在缓冲区中排队字符串数据，串行 ISR 将数据从缓冲区中排出。只要串行端口可以足够快地耗尽缓冲区，它就永远不会填满。

# android - 在android中流式传输通话语音？

> ID：11044646
> 
> 赞同：3
> 
> 时间：2012-06-15T04:36:14.423
> 
> 标签：android, call

我刚刚知道可以在 android 中录制通话语音（传入和传出），我想知道任何可以在通话期间绑定此通话语音的 API 或方法。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T04:39:04.710

我确定不支持录制通话，但只需阅读以下答案。

在[链接上](https://stackoverflow.com/a/4862913/402637)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-22T08:52:55.753

我一直在寻找同样的东西，我发现[这里](https://stackoverflow.com/questions/10544992/call-audio-stream-modification-in-android-4-0-ics)的论点非常有趣和令人信服！希望这对你有帮助

# ruby-on-rails-3 - 主干破坏不发送参数

> ID：11044655
> 
> 赞同：11
> 
> 时间：2012-06-15T04:37:06.030
> 
> 标签：ruby-on-rails-3, backbone.js, destroy

我有一个要销毁的主干模型，但没有随请求发送参数，因此服务器返回“未找到删除 404”错误。

我承认我的结构有点奇怪，因为我根据它们是否已经在列表中来创建/销毁这些项目。

```
var list_item = new MyApp.Models.ListItem({item_id: this.model.id, group_id: this.model.group_id});

    if($(e.currentTarget).hasClass('add')){

            列表项。保存（列表项，{
                成功：函数（响应）{
                     this.model.attributes. addedtolist_id = response.id
                     控制台.log(this.model);
                },
                错误：函数（）{
                     alert('无法保存项目');
                }
           });
    } else if($(e.currentTarget).hasClass('remove')) {
         list_item.id=this.model.addedtolist_id;
         list_item.attributes.id = this.model.addedtolist_id;
         控制台.log(list_item);
         list_item.destroy({
             成功：函数（）{
                警报（“删除”）；
             },
             错误：函数（）{
               alert('不能取消选中');
            }
   });
}

```

`list_item`销毁前的控制台输出是

```
_escapedAttributes：对象
_previousAttributes: 对象
_设置：假
属性：对象
 编号：2
 item_id: 66
 group_id：64
__proto__: 对象
cid：“c23”
编号：2
__proto__: q

```

但是当我查看与删除请求一起发送的标头时，我没有发送任何参数。

------------更新参数正在发送，404仍在返回--------------

根据 Yaroslav 的建议，我在 destroy 方法中添加了一个“标题”，但我的 rails 控制器仍然返回`DELETE 404 not found`错误。我只是想退回列表项，以确保在销毁它之前得到正确的列表项。

我的控制器是

```
定义破坏
   listitem = Listitem.find(params[:id])
   返回渲染：json => listitem
 结尾

```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-16T03:21:02.447

我猜你正在将[`url`](http://backbonejs.org/#Model-url)模型中的设置为字符串：

```
Backbone.Model.extend({
    url: '/list_items',
    //...
}); 
```

这将告诉 Backbone 完全`/list_items`用作所有操作的 URL。你应该使用一个函数：

```
url: function() { return '/list_items/' + encodeURIComponent(this.id) } 
```

或使用字符串[`urlRoot`](http://backbonejs.org/#Model-urlRoot)并让默认`url`函数添加`id`：

```
urlRoot: '/list_items' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T06:47:54.413

您希望发送哪些参数？默认情况下，Destroy 仅通过 url 发出 http 删除请求，没有正文或任何其他标头。params 参数被传递给 jquery ajax 函数，因此您可以在那里指定标题：

```
model.destroy({
...
    headers : {
        your_header : 123
    }
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T05:05:17.850

```
list_item.destroy( **l** {
  success: function(){
  alert('delete');
}, ... ); 
```

额外的第一是问题吗？

# jquery - JSON字符串循环问题

> ID：11044657
> 
> 赞同：4
> 
> 时间：2012-06-15T04:37:14.510
> 
> 标签：jquery, ajax, arrays, json

我有一个 json 字符串

```
[{"part_id":"66","part_name":"Palet crate","part_image":"crate-box.gif","0":{"language_data_content":"Length [mm]","pgd_value":"1000"},"1":{"language_data_content":"Width [mm]","pgd_value":"800"},"2":{"language_data_content":"Height [mm]","pgd_value":"800"},"3":{"language_data_content":"Thickness [mm]","pgd_value":"20"}}] 
```

这是我在控制器中的操作的 Ajax 响应的一部分

```
 for($i=0;$i<count($partlist);$i++){              
            $jsondata[$i]['part_id'] = $partlist[$i]['part_id'];
            $jsondata[$i]['part_name'] = $partlist[$i]['part_name'];
            $jsondata[$i]['part_image'] = $partlist[$i]['part_image'];
            $gdata = $pgdata->getPropertyDimensions($partlist[$i]['part_id'],1);
            if(count($gdata) > 0){
                $j = 0;
                foreach($gdata as $g){
                    $jsondata[$i][$j]['language_data_content'] = $g->language_data_content;
                    $jsondata[$i][$j]['pgd_value'] = $g->pgd_value;
                    $j++;
                }
            }           
        } 
       echo json_encode($jsondata);exit; 
```

对于一个部分 id 可以有多个**pgd_value**在这个 json 数组中只有一个部分 id 和四个**pgd_value** ..在我的 ajax 成功函数中循环这个 json 为

```
success:function(msg){
str = '';
  if(msg.length > 0){
                for(j=0;j<msg.length;j++){
   str +='<span>'+msg[j]['part_id']+'</span>';
   // here i want to loop those four **pgd_value** values from json is it possible ?

}
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T04:47:52.200

```
var msg = [{
    "part_id": "66",
    "part_name": "Palet crate",
    "part_image": "crate-box.gif",
    "0": {
        "language_data_content": "Length [mm]",
        "pgd_value": "1000"
    },
    "1": {
        "language_data_content": "Width [mm]",
        "pgd_value": "800"
    },
    "2": {
        "language_data_content": "Height [mm]",
        "pgd_value": "800"
    },
    "3": {
        "language_data_content": "Thickness [mm]",
        "pgd_value": "20"
    }}];
    var data = msg[0]; // extract the whole object from array
    // loop over object
    for (var key in data) {
        // checking for key which contain pgd_value
        // as you mentioned about only 4 pgd_values 
        // so here is the checking for just 4 index
        if (key == '0' || key == '1' || key == '2' || key == '3') {
            // here I used square bracket notation to 
            // retrieve data from object
            alert(data[key].pgd_value);
        }
    } 
```

**[演示](http://jsfiddle.net/QStkd/215/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T04:42:57.673

您真的应该考虑将 JSON 反序列化为实际对象。它更容易使用，它使您的代码更具可读性。

请参见此处：[使用强制转换从 JSON 反序列化到 PHP？](https://stackoverflow.com/questions/658469/deserializing-from-json-into-php-with-casting)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T04:49:31.303

您可以使用`jQuery.map`来选择`pgd_values`. 看到这个小提琴：http: [//jsfiddle.net/HackedByChinese/6LLVe/1/](http://jsfiddle.net/HackedByChinese/6LLVe/1/)

```
var str = '';
if (msg.length > 0) {
    for (j = 0; j < msg.length; j++) {
        var pgdValues = $.map(msg[j], function(item) {
            if (item['pgd_value']) return item['pgd_value'];
        });
        str += '<span> Part ID ' + msg[j]['part_id'] + ' pgd_values ' + pgdValues.join(', ') + '</span>';
        // OP: here i want to loop those four **pgd_value** values from json is it possible ?
        // ME: yep. all the IDs are now accessible from `pgdValues`

    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T04:58:00.557

这应该有效。

```
$.each(msg,function(index,item){

    alert("Part_ID : "+item.part_id);
    alert(item[0].pgd_value)
    alert(item[1].pgd_value)
    alert(item[2].pgd_value)
    alert(item[3].pgd_value)

}) 
```

示例[http://jsfiddle.net/Mc2du/29/](http://jsfiddle.net/Mc2du/29/)

但如果可能，请尝试更改您的 JSON 以发送一些字符串表达式而不是 0/1。所以阅读它既容易又健壮）。读取索引是不安全的，因为向 JSON 结构添加新内容会破坏读取代码。

假设您用这样的字符串表达式替换 0/1 方法（用 Item0 替换 0）。你可以这样读

```
 $.each(msg,function(index,item){
    alert("Part_ID : "+item.part_id);
    alert(item.Item1.pgd_value)
    alert(item.Item2.pgd_value)
    alert(item.Item3.pgd_value)
 }) 
```

示例：http: [//jsfiddle.net/Mc2du/28/](http://jsfiddle.net/Mc2du/28/)

# c# - LINQ to SQL 可以生成包含 ISNULL 函数的 TSQL 吗？

> ID：11044661
> 
> 赞同：5
> 
> 时间：2012-06-15T04:38:05.000
> 
> 标签：c#, linq-to-sql

我想知道是否有人明确知道 LINQ to SQL 是否有能力生成包含该`ISNULL`函数的 TSQL 代码？

我知道`??`在查询中使用合并运算符 ()：

```
from o in Table
where (o.Field ?? 0) > 0
select o 
```

将导致 LINQ to SQL 发出`COALESCE`函数：

```
SELECT [t0].[Field]
FROM [Table] AS [t0]
WHERE (COALESCE([t0].[Field],0)) > 0 
```

并且，在查询中使用条件运算符 ( `?:`)：

```
from o in Table
where (o.Field == null ? 0 : o.Field) > 0
select o 
```

将导致 TSQL 包含以下`CASE`语句：

```
SELECT [t0].[Field]
FROM [Table] AS [t0]
WHERE (
    (CASE
        WHEN [t0].[Field] IS NULL THEN 0
        ELSE [t0].[Amount]
     END)) > 0 
```

但是，可以强制 LINQ to SQL 生成包含`ISNULL`以下内容的 TSQL 代码吗？

```
SELECT [t0].[Field]
FROM [Table] AS [t0]
WHERE (ISNULL([t0].[Field],0)) > 0 
```

我打赌答案是“不，它不能”，但我希望看到一些权威的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T19:44:32.180

我知道完成此任务的唯一方法是通过您自己的课程，如下所示：

```
public partial class LocalTestDataContext
{
    [Function(Name = "IsNull", IsComposable = true)]
    [return: Parameter(DbType = "NVarChar(MAX)")]
    public string IsNull(
        [Parameter(Name = "field", DbType = "NVarChar(MAX)")] string field,
        [Parameter(Name = "output", DbType = "NVarChar(MAX)")] string output)
    {
        return ((string)(this.ExecuteMethodCall(this,
                ((MethodInfo)(MethodInfo.GetCurrentMethod())),
                field, output).ReturnValue));
    }
} 
```

[这是从这里](http://blogs.microsoft.co.il/blogs/zuker/archive/2010/01/30/linq-to-sql-isnull-and-ordering.aspx)的“Take #3”下。

```
var ctx = new LocalTest.LocalTestDataContext(); 

var query = from c in ctx.Categories 
orderby ctx.IsNull(c.Description1, "") + ctx.IsNull(c.Description2, "") 
select c; 
query.Dump(); 
```

并将使用 ISNULL() 生成 T-SQL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T21:06:15.460

我一直认为 ISNULL 和 COALESCE 是等价的，除了可能参数的数量。

但是，刚刚发现[存在*差异*](http://blogs.msdn.com/b/sqltips/archive/2008/06/26/differences-between-isnull-and-coalesce.aspx)，所以问题是：这些差异对您来说重要吗[？](http://blogs.msdn.com/b/sqltips/archive/2008/06/26/differences-between-isnull-and-coalesce.aspx)

# iphone - 以编程方式将 UIBarButtonItem 添加到 UIToolbar？

> ID：11044665
> 
> 赞同：2
> 
> 时间：2012-06-15T04:38:55.773
> 
> 标签：iphone, xcode, uibarbuttonitem, uitoolbar

这就是我需要的。

我的应用程序有免费版本和付费版本。当付费版本加载时，我的 UIToolBar 上需要 3 个 UIBarButtons。当免费版本加载时，我需要 4 个 UIBarButtons。在最右边的 barButton 上，我需要色调蓝色，而其余的是默认黑色。我假设它们之间有灵活的空间来平衡它们。我已经尝试通过 IB 做到这一点，但我似乎无法让它在间距正确的情况下工作。如您所见，带有 3 个按钮的底部工具栏与工具栏的间距不均匀。（我想以编程方式执行此操作）

![在此处输入图像描述](../Images/0606fd6e406ed26c89e1a882d823baac.png)

![在此处输入图像描述](../Images/7c0e7089f7b9e7d4e2024b41bf2d22e5.png)

```
#ifdef LITE_VERSION

#else

[buyButton removeFromSuperview];

#endif 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-15T07:09:09.137

```
UIToolbar* toolbar = [[UIToolbar alloc]
                  initWithFrame:CGRectMake(0, 0, 320, 45)];
[toolbar setBarStyle: UIBarStyleBlackOpaque];

// create an array for the buttons
NSMutableArray* BarbuttonsArray = [[NSMutableArray alloc] initWithCapacity:5];

// create a clearAll button
UIBarButtonItem * clearAllButton = [[UIBarButtonItem alloc] initWithTitle:@"Clear All" 
                             style:UIBarButtonItemStylePlain
                             target:self
                             action:@selector(clearAllAction:)];

clearAllButton.style = UIBarButtonItemStyleBordered;
[BarbuttonsArray  addObject:clearAllButton];
[clearAllButton release];

 // create a calculate button
 UIBarButtonItem *calculateButton = [[UIBarButtonItem alloc]initWithTitle:@"Calculate" 
                             style:UIBarButtonItemStylePlain
                           target:self
                           action:@selector(calculateButton:)];
calculateButton.style = UIBarButtonItemStyleBordered;
[BarbuttonsArray  addObject:calculateButton];
[calculateButton release];

// create a settingButton
UIBarButtonItem *settingButton = [[UIBarButtonItem alloc]initWithTitle:@"Setting" 
                             style:UIBarButtonItemStylePlain
                             target:self
                             action:@selector(settingButton:)];
settingButton.style = UIBarButtonItemStyleBordered;
[BarbuttonsArray  addObject:settingButton];
[settingButton release];

 // create a buyNowButton

UIBarButtonItem *buyNowButton = [[UIBarButtonItem alloc]initWithTitle:@"Buy Now" 
                             style:UIBarButtonItemStylePlain
                          target:self
                          action:@selector(buyNowButton:)];
buyNowButton.style = UIBarButtonItemStyleBordered;
[BarbuttonsArray  addObject:buyNowButton];
[buyNowButton release];

 // put the BarbuttonsArray in the toolbar and release them
[toolbar setItems:BarbuttonsArray  animated:NO];
[BarbuttonsArray  release];

// place the toolbar into the navigation bar
self.navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:toolbar];
[toolbar release];

//before using these lines of code you have to alloc and make the property of   UINavigationController in your appDelegate 
```

尝试使用它可能会对您有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T05:09:05.003

首先在工具栏上添加购买按钮。绑定和合成。

```
if(AppPaid) { 
    NSMutableArray *items = [YourToolBar.items mutableCopy];
    [items removeObject:yourBuyButton];
    YourToolBar.items = items;
    [items release];
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T05:54:52.800

```
IBOutlet UITabBarItem * item1; 
```

像这样创建 4 个项目...提供指向您的 xib 的链接，以便我们可以`tabbarItem`在您需要时隐藏所需...我希望这会有所帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T13:34:36.047

默认情况下将购买按钮添加到您的工具栏，并用一些唯一值（例如 -1）标记它，然后在运行时您可以将其从工具栏中删除，如下所示：

```
#ifdef LITE_VERSION
    //Dont need to do anything, view is set up as lite version by default
#else

    NSArray *elements = toolBar.items;
    NSMutableArray *newElements = [[NSMutableArray alloc] initWithCapacity:[elements count]];

   for ( UIBarItem *item in elements )
   {
        if ( item.tag != -1 )
        {
            //Item is not the buy button, add it back to the array
            [newElements addObject:item];
        }
    }

    [toolBar setItems:newElements];

#endif 
```

这是我在我的一个应用程序中使用的一些代码，用于`-1`在运行时用特定按钮替换在 IB 中标记的项目，具体取决于显示的视图

# php - 如何从多个（指定）帖子中获取图像附件

> ID：11044669
> 
> 赞同：2
> 
> 时间：2012-06-15T04:39:03.673
> 
> 标签：php, mysql, wordpress

**我正在寻找一种提取缩略图的方法以及从多个指定**的帖子 ID 中提取图像附件的大图像（用作迷你画廊）的来源。

基本上是对将所有图像组合到一个迷你画廊中的帖子附件的查询。

我已经看到如何从单个帖子中提取图像附件，但不知道如何从多个帖子中提取图像附件？

换句话说，我们可以从指定的帖子数组中提取图片附件吗？

下面是我用来拉取整个站点的所有附件的代码：

```
<?php
$args = array( 'post_type' => 'attachment', 'numberposts' => -1, 'post_status' => null, 'post_parent' => null ); 
$attachments = get_posts( $args );
if ($attachments) {
    foreach ( $attachments as $post ) {
        setup_postdata($post);
        the_title();
        the_attachment_link($post->ID, false);
        the_excerpt();
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:41:16.127

经过大量搜索后，我不得不得出结论，仅使用一个 WP_query 就没有优雅的方法可以做到这一点。相反，您可以为每个 post_id 调用一个新查询，并将生成的附件 ID 组合到一个数组中。将此数组用于您的进一步目的。

# c - 有没有办法在linux中创建虚拟文件描述符？

> ID：11044673
> 
> 赞同：6
> 
> 时间：2012-06-15T04:39:11.260
> 
> 标签：c, linux, file

我用以下方式打开了一个文件：

```
fp = fopen("some.txt","r"); 
```

现在在这个文件中，第一个字节可以说 40 个字节是不必要的垃圾数据，所以我想删除它们。但是如果没有不必要的数据，我无法从该文件中删除该数据、修改或创建该文件的副本。

所以我想创建另一个指向文件的虚拟 FILE 指针，当我将此虚拟指针传递给执行以下操作的任何另一个函数时：

```
 fseek ( dummy file pointer , 0 , SEEK_SET ); 
```

那么它应该将文件指针设置在我的 some.txt 中的第 40 位。

* * *

但是该函数接受一个文件描述符，所以我需要传递一个文件描述符，它将文件视为前 40 个字节从未在文件中。

* * *

简而言之，虚拟描述符应该将文件视为那些 40 个字节不在该文件中，并且所有定位操作都应该相对于第 40 个字节计为第 1 个字节。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T04:56:20.147

简单的。

```
#define CHAR_8_BIT    (0)
#define CHAR_16_BIT   (1)
#define BIT_WIDTH     (CHAR_8_BIT)

#define OFFSET        (40)

FILE* fp = fopen("some.txt","r");
FILE* dummy = NULL;

#if (BIT_WIDTH == CHAR_8_BIT)
dummy = fseek (fp, OFFSET*sizeof(char), SEEK_SET);
#else
dummy = fseek (fp, OFFSET*sizeof(wchar_t), SEEK_SET);
#endif 
```

宏指示文件的`SEEK_SET`开头，根据您使用的是 8 位字符 (ASCI) 还是 16 位字符（例如：UNICODE），您将从文件指针的开头向前步进 40 个字符，并分配该指针/地址到`dummy`.

祝你好运！

这些链接也可能会有所帮助：

[char 与 wchar_t](https://stackoverflow.com/questions/7496203/char-vs-wchar-t)

[http://www.cplusplus.com/reference/clibrary/cstdio/fseek/](http://www.cplusplus.com/reference/clibrary/cstdio/fseek/)

如果需要，您可以通过 fdopen() 调用将文件描述符转换为文件指针。

[http://linux.die.net/man/3/fdopen](http://linux.die.net/man/3/fdopen)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T04:56:37.577

如果您想删除磁盘上文件的前 40 个字节而不创建另一个文件，则可以将第 41 个字节及以后的内容复制到缓冲区中，然后在偏移量 -40 处将其写回。然后使用`ftruncate`(a POSIX library in `unistd.h`) 在 (filesize - 40) 偏移处截断。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T05:17:53.303

> fseek ( 虚拟文件指针 , 0 , SEEK_SET );
> 
> 简而言之，虚拟指针应该将文件视为该文件中没有 40 个字节，并且所有位置都应该相对于第 40 个字节作为第 1 个字节计数。

你有冲突的要求，你不能用 C API 做到这一点。

SEEK_SET 总是指文件中的绝对位置，这意味着如果您希望该命令起作用，您必须修改文件并删除垃圾。

在 linux 上，您可以编写一个[FUSE](http://en.wikipedia.org/wiki/Filesystem_in_Userspace)驱动程序来呈现文件，就像它从第 40 个字节开始一样，但这是*很多*工作。我之所以提到这一点，是因为它*可以*解决您*创建*的问题，但实际上这样做会很愚蠢。

当然，最简单的事情就是放弃您正在寻找的这个模拟层想法，并编写可以处理额外标题垃圾的代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T04:53:01.237

我用我从你的问题中理解的内容写了一个小代码。

```
#include<stdio.h>

void readIt(FILE *afp)
{
    char mystr[100];
    while ( fgets (mystr , 100 , afp) != NULL )
       puts (mystr);
}
int main()
{
    FILE * dfp = NULL;
    FILE * fp = fopen("h4.sql","r");
    if(fp != NULL)
    {
        fseek(fp,10,SEEK_SET);
        dfp = fp;
        readIt(dfp);
        fclose(fp);
    }
} 
```

readIt() 正在从 11 字节读取文件。这是你所期待的还是别的什么？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-15T09:05:15.537

我实际上并没有尝试过，但我认为您应该能够使用`mmap`（使用 MAP_SHARED 选项）将文件映射到您的地址空间，然后`fmemopen`获得一个`FILE*`引用除前 40 个字节之外的所有字节的缓冲区.

这给了你一个`FILE*`（正如你在问题正文中描述的那样），但我相信*不是*文件描述符（如标题和问题的其他地方）。两者不一样，并且`FILE*`创建的AFAIK`fmemopen`没有关联的文件描述符。

# scala - 如何将 ant 构建脚本转换为 sbt？

> ID：11044674
> 
> 赞同：2
> 
> 时间：2012-06-15T04:39:45.530
> 
> 标签：scala, ant, sbt, scalaxb

我想将[html5boilerplate 构建脚本](https://github.com/h5bp/ant-build-script/)从 ant 转换为 sbt。我用scalaxb花了几分钟，但到目前为止还没有运气。似乎不是 ant 构建脚本的 xsd。

有没有更好的方法将 XML 构建脚本转换为 Scala 代码，特别是 sbt？做不到这一点，除了手工还有*什么办法吗？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T16:13:38.667

该构建使用[ant-contrib](http://ant-contrib.sourceforge.net/)库，以便在构建中添加许多可爱的基于 XML 的编程结构......

如果最初的构建作者坚持使用核心 ANT，那么可能会有一些希望编写翻译器……在混合[ant-contrib](http://ant-contrib.sourceforge.net/)的情况下，我认为手动翻译会更简单。

# c - 如何在不使用 ls -ln 的情况下在 C 中打印文件详细信息

> ID：11044678
> 
> 赞同：2
> 
> 时间：2012-06-15T04:40:16.397
> 
> 标签：c, linux, file, time, ls

在磁盘上找到一个文件后，我现在需要打印出它的所有详细信息，例如：

```
-rwxr-xr-x 1 1000 1000 8296 2010-01-06 22:29 ./Documents/exer4
-rwxr-xr-x 1 1000 1000 8517 2009-12-30 11:30 ./Documents/os/exer4
lrwxrwxrwx 1 1000 1000 8 2010-01-10 13:10 ./Documents/cs/2012/exer4 -> ../a.out 
```

我需要在不使用的情况下打印文件详细信息`ls -ln`。知道该怎么做吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T04:42:55.367

你想要这个`stat()`功能。

这是一个记录 *NIX 文件功能的网页，包括`stat()`：

[http://rabbit.eng.miami.edu/info/functions/unixio.html](http://rabbit.eng.miami.edu/info/functions/unixio.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T04:47:21.190

您可以使用此功能：

```
int lstat(const char *path, struct stat *buf); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T04:47:39.583

这适用于我的外壳。

```
 ls -l | grep -v "\->" 
```

它只是过滤掉任何包含 a`->`的行。

但是请注意，如果您有任何文件/目录由于某种原因`->`在其名称中，它们也将被过滤掉。话虽如此，我从未见过，也不是一个好主意。

# asp.net - 我在我的网站的购物车应用程序中遇到会话冲突错误

> ID：11044681
> 
> 赞同：0
> 
> 时间：2012-06-15T04:41:16.207
> 
> 标签：asp.net, web-services

我正在使用下面的代码来维护购物车。会话中有一个错误，当我打开我的网站而不是浏览器时，当我从一个浏览器中选择项目然后到另一个浏览器时，会出现会话冲突，所以以前创建的会话已更新，尽管每个浏览器都必须有新的会话请有人帮助我了解会话中错误的区域。

```
#region Singleton Implementation

    // Readonly properties can only be set in initialization or in a constructor
    public static readonly ShoppingCart Instance;
    // The static constructor is called as soon as the class is loaded into memory
    static ShoppingCart()
    {
        // If the cart is not in the session, create one and put it there
        // Otherwise, get it from the session     
        if (HttpContext.Current.Session["ShoppingCart"] == null)
        {
            Instance = new ShoppingCart();
            Instance.Items = new List<CartItem>();
            HttpContext.Current.Session.Add("ShoppingCart", Instance);
        }
        else
        {
            Instance = (ShoppingCart)HttpContext.Current.Session["ShoppingCart"];
        }
    }

    // A protected constructor ensures that an object can't be created from outside
    protected ShoppingCart() { }

    #endregion 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T04:49:33.653

将调用静态构造函数`only once`。所以 else 永远不会执行。

除了这个实现，您可以使用一个属性来检查会话是否为空，它会创建一个实例，否则它会返回存储的实例。

```
public Instance
{
set{ ... }
get{ ... }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T05:22:32.677

我发现 ShopingCart 类构造函数中存在问题当我直接使用静态构造函数时，我变成了全局的，这就是我的购物车数据与其他用户购物车共享的方式，但现在我正在使用对象的属性。就像这个，

**主要是get属性的if语句中的返回类型**

```
 public static ShoppingCart Instance
    {
        get
        {
            if (HttpContext.Current.Session["ShoppingCart"] == null)
            {
                // we are creating a local variable and thus
                // not interfering with other users sessions
                ShoppingCart instance = new ShoppingCart();
                instance.Items = new List<CartItem>();
                HttpContext.Current.Session["ShoppingCart"] = instance;
                return instance;
            }
            else
            {
                // we are returning the shopping cart for the given user
                return (ShoppingCart)HttpContext.Current.Session["ShoppingCart"];
            }
        }
    } 
```

# stored-procedures - 如果存储过程在单独的模式中，如何运行它

> ID：11044686
> 
> 赞同：19
> 
> 时间：2012-06-15T04:42:10.387
> 
> 标签：stored-procedures, sql-server-2008-r2

我正在使用 SQL Server 2008 R2，并且我创建了一个架构`Test`，并且在该架构中，我创建了一个存储过程。

我想通过发出以下查询以文本模式运行它：

```
EXEC SP_HELPTEXT SCHEMA.SPROC 
```

但是在运行上述查询时，我收到此错误：

> '.' 附近的语法不正确。

有人可以在这里帮我解决这个问题。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-15T04:44:05.600

试试这个

```
EXEC SP_HELPTEXT 'SCHEMA.SPROC' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-02T11:34:12.753

`sp_helptext`当 sp 或任何其他`tsql`绑定脚本在没有模式的情况下运行时显示结果，例如：

`sp_helptext <nameof sp>`

但是当你想以模式名称作为初始运行它时，然后将它运行到单引号中

`sp_helptext 'schma.<nameofsp>`

# matlab - matlab中的随机颜色矩阵

> ID：11044688
> 
> 赞同：2
> 
> 时间：2012-06-15T04:42:19.623
> 
> 标签：matlab, random, colors, octave, psychtoolbox

我想生成一个随机颜色块的矩阵——10 x 10 像素的随机颜色块——例如：

[http://i.stack.imgur.com/Jlc8L.png](http://i.stack.imgur.com/Jlc8L.png)

到目前为止，我已经生成了随机数并使用以下方法放大了矩阵`kron`：

[http://i.stack.imgur.com/eBU0T.png](http://i.stack.imgur.com/eBU0T.png)

使用：

```
I = kron(randn([10 10]), ones(10));
imshow(I); 
```

我想为此添加随机颜色，但是：

```
I = kron(randn([10 10 3]), ones(10)); 
```

报告：

```
error: invalid conversion of NDArray to Matrix 
```

如何生成随机色块矩阵？

这适用于 Psychtoolbox-3（`DrawTexture`似乎无法在*没有*插值的情况下将 10x10 随机颜色矩阵放大到 100x100）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T07:52:40.920

您不妨直接生成矩阵：

```
 R = rand(10,10,3);
    figure;imshow(R); 
```

为了创建块矩阵，请使用[`imresize`](http://www.mathworks.com.au/help/images/ref/imresize.html)：

```
 Rb = imresize(R,10,'nearest'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T05:02:44.130

这是我通常做类似事情的方式，以防它有帮助：

```
R = rand(10,10);
subplot(1,1,1)
imshow(mat2gray(R(:,:,1)));
colormap jet 
```

颜色图可以更改为 Matlab 的任何预设或您自己的预设，以反映矩阵中的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T11:33:07.743

正确的解决方案是切换特定纹理的插值算法。

在幕后 Psychtoolbox 使用 OpenGL，它允许您在`MakeTexture`和之间摆弄原始的 OpenGL 命令`DrawTexture`。

大致，凭记忆。填写“空白”

```
Screen('MakeTexture')
Screen('GetOpenGLTexture')
glTexParameterfv(target,GL_TEXTURE_MAG_FILTER,GL_NEAREST);
Screen('DrawTexture') 
```

# c# - 我的 LINQ 排序似乎没有按照我要求的方式排序

> ID：11044693
> 
> 赞同：1
> 
> 时间：2012-06-15T04:43:03.360
> 
> 标签：c#

我有这个代码：

```
var query = _cityRepository.GetAll(
                              u => u.PartitionKey == pk &
                              u.RowKey.CompareTo(lowerBound) >= 0 &
                              u.RowKey.CompareTo(upperBound) < 0)
               .OrderBy(item => item.RowKey.Substring(0, 3))
               .ThenBy(item => item.ShortTitle)
               .Select((t, index) => new City.Grid()
               {
                   PartitionKey = t.PartitionKey,
                   RowKey = t.RowKey,
                   Row = index + 1,
                   ShortTitle = t.ShortTitle,
                   Created = t.Created,
                   CreatedBy = t.CreatedBy,
                   Modified = t.Modified,
                   ModifiedBy = t.ModifiedBy
               })
               .ToList(); 
```

当我查看输出的数据时，我发现前两行是这样的：

```
RowKey = 0101004O , ShortTitle = "Access 1"
RowKey = 0103004M , ShortTitle = "Access 2"
RowKey = 0101004K , ShortTitle = "xxx" 
```

在测试时，我将其简化为：

```
 var query1 = _cityRepository.GetAll()
            .OrderBy(item => item.RowKey.Substring(0, 3))
            .ThenBy(item => item.ShortTitle); 
```

并且顺序是一样的。RowKey 的顺序似乎仍然不正确。

它应该对 rowkey 的前四个字符进行排序，然后对 ShortTitle 进行排序。

谁能明白为什么这不起作用。我仔细看了看，但我不明白为什么 OrderBy 和 ThenBy 似乎无法正常工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T04:48:06.480

您按 的前 3 个字符排序`rowkey`，而不是 4 个。要使用 4 个字符，请执行以下操作：

```
 .OrderBy(item => item.RowKey.Substring(0, 4)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T04:48:30.957

`Substring`的第二个参数是`length`，而不是索引，我相信这是您的代码试图做的事情。当前状态下的代码将根据前三个字符进行排序。改变：

```
.OrderBy(item => item.RowKey.Substring(0, 3)) 
```

到

```
.OrderBy(item => item.RowKey.Substring(0, 4)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T04:50:01.627

如果您想获得 4 个字符，请将您的子字符串更改为 Substring(0, 4)。第二个参数指定长度而不是索引

# javascript - 如何检测由于网络断开导致的 Ajax 调用失败

> ID：11044694
> 
> 赞同：20
> 
> 时间：2012-06-15T04:43:13.400
> 
> 标签：javascript, ajax, jquery

我正在使用 jquery ajax 方法向 Web 服务器发送大量数据，客户端仅在收到服务器的确认后才响应，现在假设网络连接在 ajax 调用的中间丢失，那么如何检测这种情况。

```
$.ajax({
         url:'server.php',
         data:'lots of data from 200KB to 5MB',
         type:'post',
         success: function(data)
                    {
                        alert('Success');
                      //some stuff on success

                    },
          error: function(XMLHttpRequest, textStatus, errorThrown)
                    {
                        alert('Failure');
                      //some stuff on failure
                    }
        }); 
```

这是我的代码，如果断开互联网连接，它不会在 ajax 调用中间出错。

注意：我不能使用超时，因为数据大小从 200kb 到 5MB 不等，服务器响应时间计算不可行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-08-05T15:52:12.713

尝试这个：

首先每 5 秒使用 setInterval 创建一个“ping”ajax 调用

```
function server_ping()
    {
        $.ajax({
            url:"url to ping",
            type: "POST"
        });
    }
    var validateSession = setInterval(server_ping, 5000); 
```

然后武装你的 .ajaxError 陷阱：

```
$(document).ajaxError(function( event, request, settings ) {
        //When XHR Status code is 0 there is no connection with the server
        if (request.status == 0){ 
            alert("Communication with the server is lost!");
        } 

    }); 
```

请记住，Ajax 调用默认是异步的，因此当 ping 发送到服务器并且请求无法到达服务器时，XHR 状态的值为 0，并且 .ajaxError 将触发，您必须捕获错误并以您的方式处理想要它。

然后您可以将数据发送到服务器，如果发送数据时连接丢失，您会收到 ping 报告的错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-12T02:39:19.107

如果您的服务器不是很拥挤，那么您可能可以在开始传输数据时使用计时器开始定期检测连接（通过使用另一个 ajax 调用，例如每 5 秒一次）。现在您可以使用超时。

顺便说一句，1）超时并不总是意味着网络错误。有时服务器停机也会导致“超时”

2）如果驱动程序在客户端设备上关闭，xhr.status = 0，并且没有超时

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-16T10:14:46.323

我遇到了类似的问题，并通过简单的 try/catch 和（比如说）2 秒的重试延迟解决了它：

```
function myAjaxMethod()
{
  try 
  {
    $.ajax({ ... });
  } catch (err) 
  { 
    console.log(err.message); 
    setTimeout(function(){myAjaxMethod(),2000});
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-01T09:26:40.463

我遇到了与您类似的情况，并通过每 5 秒进行一次网络检查来修复它，如果网络断开连接，我将手动中止 ajax 请求，这将结束 ajax 请求。

在这里，我在 Jquery ajax 调用的 beforeSend 事件中获取 ajax XmlHttpRequest，并使用该对象在网络故障的情况下中止 ajax 请求。

```
var interval = null;
var xhr = null;

$.ajax({
     beforeSend: function(jqXHR, settings) {  
          xhr = jqXHR;  // To get the ajax XmlHttpRequest 
     },
     url:'server.php',
     data:'lots of data from 200KB to 5MB',
     type:'post',
     success: function(data)
                {
                    alert('Success');
                  //some stuff on success

                },
      error: function(XMLHttpRequest, textStatus, errorThrown)
                {
                    alert('Failure');
                  //some stuff on failure
                },
      complete: function(data)
                {
                    alert('Complete');
                    //To clear the interval on Complete
                    clearInterval(interval);
                },
    });

interval = setInterval(function() {
    var isOnLine = navigator.onLine;
        if (isOnLine) {
            // online
        } else {
             xhr.abort();
        }
     }, 5000); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T04:59:36.707

尝试添加超时：在构建 $.ajax({}) 时。

还要确保设置缓存：假，有时很有帮助。

参考 Jquery 的 ajax() ：[http ://api.jquery.com/jQuery.ajax/#toptions](http://api.jquery.com/jQuery.ajax/#toptions)

您将在那里获得更多信息！

我对你的问题的看法[更新]

@RiteshChandora，我理解你的担忧。我怎么能建议你做两件事。

1.  由于您发布的数据范围从 200kb 到 5mb，因此您可能需要选择最大超时时间。并触发相同的。是的，这可能有问题，但是对于您选择的设计，监控 POST 进度的唯一方法就是这样做。如果没有，请参阅第 2 点。

2.  我完成了流程，您要求用户将响应 Json 从 FB 复制到您的 url。这里有一些问题，

3.  json 数据包含有关用户的敏感信息，他将其发布在没有 SSL 加密的 url 上。

4.  为什么要提示用户将获取的数据发布到您的服务器上？如果您使用服务器端脚本，它应该会更容易。此外，在这种情况下，您永远不应该将大量数据从客户端发布到服务器，在这种情况下，您可以从服务器端的 FBserver->your sevrer 检索相同的表单。

我建议的解决方案：用户通过身份验证后，在服务器端检索他的朋友列表。在服务器端做任何你想做的事，并在用户屏幕上显示结果。

这样，您的服务器将承担所有负担，用户也无需在您的 url 上发布任何讨厌的 json。

顺便说一句，你的应用创意很酷。

* * *

## 回答 #6

> 赞同：-5
> 
> 时间：2012-06-15T05:12:43.820

```
 error: function(xhr, textStatus, thrownError)
                    {
                       alert(xhr.status);
                       alert(thrownError);
                       alert(textStatus);

                    } 
```

**试试看** 。TextStatus（除了 null）是“timeout”、“error”、“abort”和“parsererror”。当 HTTP 错误发生时，throwError 接收 HTTP 状态的文本部分，例如“未找到”或“内部服务器错误”。

如果 Internet 断开连接，则不会收到响应，并且最多将是超时消息。

# menu - 如何实现基于手势的菜单

> ID：11044696
> 
> 赞同：2
> 
> 时间：2012-06-15T04:43:32.613
> 
> 标签：menu

我应该实现一个基于手势的菜单，您可以在其中通过平移或翻动来滚动项目的水平列表。这种菜单在智能手机游戏中很常见。示例案例是割绳子，您选择盒子（纸板箱，织物盒）或愤怒的小鸟，您选择关卡集（荷包蛋，Mighty Hoax）。

我在想的是，我必须进行一些复杂的物理计算，并根据手势为菜单项提供速度和加速度。有更好的解决方案吗？我正在使用 libgdx 顺便说一句。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T16:47:36.810

我认为你不需要经历所有这些来实现一个简单的菜单！这一切都是关于为各种项目定义偏移量（我只是假设你想要 Cut the Rope 风格的菜单，在给定的时刻只有一个条目（不包括转换）），然后在检测到轻弹时在这些偏移量之间进行**补间！**

您似乎已经将手势系统全部连接起来，所以现在，我们只需要弄清楚如何显示菜单。*为简单起见，我们假设我们不希望菜单环绕。*

我们将首先在我们的脑海中设想这个菜单会是什么样子。它就像一张幻灯片，穿过手机，可以通过屏幕看到。

```
 phone ("stuff" is currently selected)
                  ========  
 |---------------|        |-------|
 | Start | About | Stuff  | Quit  |
 |---------------|        |-------|
                 |        |
                 |        |
                 |        |
                  ======== 
```

我们只是假设屏幕宽度是**`w`**，因此，所有菜单条目都是这个宽度（再想想割绳子！）。

现在，当要显示“开始”时，我们应该只在屏幕上从第一个元素“开始”开始渲染幻灯片，而理论上，其余的将位于屏幕的右侧。这将被视为基本情况，使用**offset = 0**渲染菜单。

是的，是的，这个偏移量将是我们滑动小菜单的关键！Now, it's pretty obvious that when about is selected, we'll just have to offset the "filmstrip" to the left by one "frame", and here **offset = - 1 * frameWidth** . 我出色的 ASCII 艺术说明的示例案例选择了第三个菜单项，并且由于帧的索引从 0 开始，我们只需减去两倍的 frameWidth 并获得所需的偏移量。我们将从偏移量 = -2 * frameWidth 开始渲染菜单。

（显然，您可以提前计算 frameWidth，通过使用 API 获取屏幕宽度，然后仅绘制居中的菜单元素文本/图形）。

所以这很简单：

*   用户向左扫，我们需要靠近偏移量 0 的菜单，我们将所选实体的索引减一，然后菜单跳转到正确的位置

*   用户向右扫，我们增加索引（显然只要它不超过菜单元素的数量 - 1）

**但是平滑补间呢？** 幸运的是，Libgdx 已经为漂亮的小补间设置了插值。我们只需要处理一些事情，这样我们就不会射中自己的腿。我会在这里列出它们。

*一个快速说明：* Cut the Rope 级别选择器的工作方式与我在这里所说的略有不同。它不仅对轻弹（预定义的手势）做出反应，而且更敏感。您可能可以通过使用偏移量和跟踪手指在屏幕上的位置来实现类似的效果。（如果用户将菜单项向左/向右拖动过多，则会自动切换到上一个/下一个） 友好建议：只需设置一个简单的、有效的菜单，并将这样的细节留在最后，因为它们可能会结束花费*很多*时间！:P

**好吧，回到正轨！**

我们现在拥有的是一种在偏移量之间快速切换的方法。我们只需要**补间**。还有一些额外的成员在起作用，但我认为它们是不言自明的。当我们在两个元素之间转换时，我们会记住“旧”偏移量，以及我们要前往的那个偏移量，以及我们从转换中离开的时间，我们使用这四个变量来计算偏移量（在当前时刻使用 libgdx 插值，在这种情况下为 exp10），从而产生平滑的动画。

让我们看看，我已经创建了一个 quick'n'dirty **mock-up**。我已经尽我所能对代码进行了注释，所以我希望下面的代码片段能说明一切！:D

```
import java.util.ArrayList;

import com.badlogic.gdx.graphics.g2d.BitmapFont;
import com.badlogic.gdx.graphics.g2d.SpriteBatch;
import com.badlogic.gdx.math.Interpolation;

public class MenuManager {

// The list of the entries being iterated over
private ArrayList<MenuEntry> entries = new ArrayList<>();

// The current selected thingy
private int index;

// The menu offset
private float offset = 0.0f;

// Offset of the old menu position, before it started tweening to the new one
private float oldOffset = 0.0f;

// What we're tweening towards
private float targetOffset = 0.0f;

// Hardcoded, I know, you can set this in a smarter fashion to suit your
// needs - it's basically as wide as the screen in my case
private float entryWidth = 400.0f;

// Whether we've finished tweening
private boolean finished = true;

// How much time a single transition should take
private float transitionTimeTotal = 0.33f;

// How much time we have left from the current transition
private float transitionTimeLeft = 0.0f;

// libgdx helper to nicely interpolate between the current and the next 
// positions
private Interpolation interpolation = Interpolation.exp10;

public void addEntry(MenuEntry entry) {
    entries.add(entry);
}

// Called to initiate transition to the next element in the menu
public void selectNext() {
    // Don't do anything if we're still animationg
    if(!finished) return;

    if(index < entries.size() - 1) {
        index++;
        // We need to head towards the next "frame" of the "filmstrip"
        targetOffset = oldOffset + entryWidth;
        finished = false;
        transitionTimeLeft = transitionTimeTotal;
    } else {
        // (does nothing now, menu doesn't wrap around)
        System.out.println("Cannot go to menu entry > entries.size()!");
    }
}

// see selectNext()
public void selectPrevious() {
    if(!finished) return;

    if(index > 0) {
        index --;
        targetOffset = oldOffset - entryWidth;
        finished = false;
        transitionTimeLeft = transitionTimeTotal;
    } else {
        System.out.println("Cannot go to menu entry <0!");
    }
}

// Called when the user selects someting (taps the menu, presses a button, whatever)
public void selectCurrent() {
    if(!finished) {
        System.out.println("Still moving, hold yer pants!");
    } else {
        entries.get(index).select();
    }
}

public void update(float delta) {

    if(transitionTimeLeft > 0.0f) {
        // if we're still transitioning

        transitionTimeLeft -= delta;
        offset = interpolation.apply(oldOffset, targetOffset, 1 - transitionTimeLeft / transitionTimeTotal);
    } else {
        // Transition is over but we haven't handled it yet
        if(!finished) {
            transitionTimeLeft = 0.0f;
            finished = true;
            oldOffset = targetOffset;
        }
    }
}

// Todo make font belong to menu
public void draw(SpriteBatch spriteBatch, BitmapFont font) {
    if(!finished) {
        // We're animating, just iterate through everything and draw it,
        // it's not like we're wasting *too* much CPU power
        for(int i = 0; i < entries.size(); i++) {
            entries.get(i).draw((int)(i * entryWidth - offset), 100, spriteBatch, font);
        }
    } else {
        // We're not animating, just draw the active thingy
        entries.get(index).draw(0, 100, spriteBatch, font);
    }
} 
```

}

而且我相信一个可以自己绘制的简单的基于文本的菜单条目就足够了！（**请注意肮脏的硬编码文本换行宽度！**）

```
public class MenuEntry {

private String label;
// private RenderNode2D graphic;
private Action action;

public MenuEntry(String label, Action action) {
    this.label = label;
    this.action = action;
}

public void select() {
    this.action.execute();
}

public void draw(int x, int y, SpriteBatch spriteBatch, BitmapFont font) {
    font.drawMultiLine(spriteBatch, label, x, y, 400, HAlignment.CENTER);
} 
```

}

哦，**Action**只是一个具有执行方法的东西，并且，代表一个动作。

```
public interface Action {
abstract void execute(); 
```

}

随时在评论中提出任何相关问题，我将尝试澄清需要什么。希望这可以帮助！

# c# - 用于十进制的 asp.net 正则表达式验证器

> ID：11044698
> 
> 赞同：-1
> 
> 时间：2012-06-15T04:43:49.290
> 
> 标签：c#, asp.net

我正在使用下面的表达式来验证带有十进制数字的文本框。但它接受 12、-1.0、12.0、12.5、1.0 等。但我想要一个像“12.4”这样的正则表达式。前两位数和小数点，后跟一位数。

```
ValidationExpression="^-?[0-9]{0,2}(\.[0-5]{1,1})?$|^-?(100)(\.[0]{1,2})?$" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T05:01:16.283

首先，该正则表达式过于复杂。整个事情可以重写为

```
^-?([0-9]{0,2}(\.[0-5])?|100(\.00?)?)$ 
```

...并具有完全相同的效果。但根据您的评论，您正在寻找更严格的东西：

```
^[0-9]{2}\.5$ 
```

我不清楚你为什么要这样做，但这正是你所描述的。如果您不想强制最后一位数字为 5（您的评论不清楚），请使用`^[0-9]{2}\.[0-9]$`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-18T14:23:18.460

**您可以在ASPX**页面上使用此代码。`^[1-9]\d*(\.\d+)?$`在 ValidationExpression 属性中使用。

```
<asp:TextBox runat="server" ID="txtprice" width="50" />
        <asp:RegularExpressionValidator runat="server" ErrorMessage="Decimal Only" ControlToValidate="txtprice"
      ValidationExpression="^[1-9]\d*(\.\d+)?$"></asp:RegularExpressionValidator> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T04:49:53.543

```
expr = `@"^\d{1,2}\.\d$"`; 
```

字符串开头 - 两位数 - 小数点 - 一位数。没有减号，没有整数。那是你要的吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T04:54:55.697

如果你想要小数点前两位数和小数点后一位数，试试这个

```
-?[1-9][0-9][\.][0-9] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T06:08:00.897

我在 WPF 中测试了以下表达式，一旦检查它就可以正常工作

```
string sExpression = @"^[0-9][0-9]\.[0-9]$"; 
```

# asp.net - UI 上的 ASP.NET MVC 主题编辑器

> ID：11044702
> 
> 赞同：0
> 
> 时间：2012-06-15T04:44:10.927
> 
> 标签：asp.net, asp.net-mvc, multi-tenant

我正在构建一个多租户应用程序，允许租户在管理控制面板的 UI 上编辑布局 (HTML)。我认为我可以为用户构建一个编辑器来编辑剃刀视图，但需要对其进行编译以影响新的剃刀视图。

我研究了一些开源应用程序。我发现这个[http://liquidmarkup.org/](http://liquidmarkup.org/)它是为在 Ruby on Rails Web 应用程序中使用而开发的

有人在 ASP.NET MVC 中对此有任何经验和参考吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T04:47:39.693

不是 100% 确定这是否是您正在寻找的内容，但您可以使用 jQuery 主题（CSS 和标记）开发您的网站，然后为您的客户使用[主题滚轮？](http://jqueryui.com/themeroller/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T05:27:06.203

听起来您可以使用 Jquery 模板 ( [http://api.jquery.com/category/plugins/templates/](http://api.jquery.com/category/plugins/templates/) ) 来满足您的需求。

这是我的一个项目中的一个随机（非常精简）示例模板：

```
<table>
<tr>
    <th>Response Status</th>
    <th>Response Reason</th>
</tr>
<tr>
    <td>${RepsonseStatus}</td>                
    <td>${ResponseReason}</td>
</tr> 
```

注意 ${} 标签 - 这些将在运行时替换为 json 数据。

这是如何将模板与其数据合并

```
//myTemplate can be sent from a server side function
var myTemplate = SomeFunctionToGetMyTemplate();
//myData is a javascript object/json from the server
var myData = SomeFunctionToGetMyData();
//the html function just replaces the html of the context node (#myTargetDiv) with the //output of the $.tmpl function
$("#myTargetDiv").html($.tmpl(myTemplate, myData)); 
```

Jquery 模板已被正式弃用，但 jquery 还没有正式的替代品（afaik）。对于 jquery 模板，有一些关于复数视觉的有用视频教程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T05:32:02.433

Highwire.com 建立在 ASP.NET 之上，但他们为使用 Apache Velocity 平台的客户端使用自定义模板和自定义 UI 功能。

[http://docs.highwire.com/apiv2/html/](http://docs.highwire.com/apiv2/html/)

也许你也可以使用它

# iphone - Xcode 4.3.2 UINavigationBar 图片背景

> ID：11044703
> 
> 赞同：0
> 
> 时间：2012-06-15T04:44:29.367
> 
> 标签：iphone, uinavigationcontroller, uinavigationbar, xcode4.3

我正在使用 UINavigation 控制器在 xCode 4.3.2 中创建一个 tabBar 应用程序。我在 AppDelegate 中使用以下代码

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
   self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
   // Override point for customization after application launch.
   UIViewController *viewController1 = [[[FirstViewController alloc] initWithNibName:@"FirstViewController" bundle:nil] autorelease];
   UIViewController *viewController2 = [[[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil] autorelease];
   self.tabBarController = [[[UITabBarController alloc] init] autorelease];
   self.tabBarController.viewControllers = [NSArray arrayWithObjects:
                                         [[[UINavigationController alloc] initWithRootViewController:viewController1] autorelease], viewController2, nil];
   self.window.rootViewController = self.tabBarController;
   [self.window makeKeyAndVisible];
   return YES;
} 
```

现在的问题是我想在导航栏中自定义背景图像。我找到的解决方案是编写 UINavigationBar 的子类并在界面生成器中设置新的子类。但就我而言，我正在以编程方式设置导航控制器，那么如何实现呢？我也尝试过将类别创建为

```
@implementation UINavigationBar (CustomImage)
- (void)drawRect:(CGRect)rect {
    UIImage *image = [UIImage imageNamed:@"NavigationBar.png"];
    [image drawInRect:CGRectMake(0, 0, self.frame.size.width, self.frame.size.height)];
}
@end 
```

但它根本不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T04:57:07.410

对于导航栏使用这个：

```
UIImage *image = [UIImage imageNamed: @"NavBarImage.png"];
[self.navigationController.navigationBar setBackgroundImage:image forBarMetrics:UIBarMetricsDefault];`

and for Tabbar:

    // not supported on iOS4    
    UITabBar *tabBar = [tabController tabBar];
    if ([tabBar respondsToSelector:@selector(setBackgroundImage:)])
    {
        // set it just for this instance
        [tabBar setBackgroundImage:[UIImage imageNamed:@"tabbar_brn.jpg"]];

        // set for all
        // [[UITabBar appearance] setBackgroundImage: ...
    }
    else
    {
        // ios 4 code here
    } 
```

谢谢

# php - http_post_fields 的类似功能？

> ID：11044705
> 
> 赞同：2
> 
> 时间：2012-06-15T04:44:41.707
> 
> 标签：php, pecl

pecl_http 中的 http_post_fields 是否有类似的功能？我当前的主机只安装来自[http://pear.php.net/](http://pear.php.net/)的扩展（不知道为什么，但我没有 ssh 访问权限，而是一个 web gui，并且只能安装可用的扩展。从那里）

这是我的代码

```
<?php
    $files = array(
        array(
            'name' => 'torrent',            // Don't change
            'type' => 'application/x-bittorrent',
            'file' => '0-273-70244-0.pdf.torrent'           // Full path for file to upload
        )
    );

    $http_resp = http_post_fields( 'http://torcache.net/autoupload.php', array(), $files );
    $tmp = explode( "\r\n", $http_resp );
    $infoHash = substr( $tmp[count( $tmp ) - 1], 0, 40 );
    var_dump($infoHash);
    unset( $tmp, $http_resp, $files ); 
```

目前这不起作用，因为我正在为 http_post_fields 获取未定义的函数

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T05:50:25.830

有很多方法可以从 PHP 发布数据，这里有一些方法可以帮助您入门：

**流**

使用[流上下文](http://www.php.net/manual/en/function.stream-context-create.php)打开（使用[fopen](http://php.net/manual/en/function.fopen.php)）带有您要发送的发布数据的 URL

```
function do_post($url, $data)
{
  $params = array('http' => array(
              'method' => 'POST',
              'content' => $data
            ));

  $ctx = stream_context_create($params);
  $fp = @fopen($url, 'rb', false, $ctx);
  if (!$fp) {
    throw new Exception("Problem with $url, $php_errormsg");
  }
  $response = @stream_get_contents($fp);
  if ($response === false) {
    throw new Exception("Problem reading data from $url, $php_errormsg");
  }
  return $response;
} 
```

改编自[Wez Furlong](http://wezfurlong.org/blog/2006/nov/http-post-from-php-without-curl/)的代码示例。

**卷曲**

要使用[CURL](http://www.php.net/curl)，PHP 扩展需要可用，这比现在更常见，但取决于您的主机。

```
function do_post($url, $data)
{
  $ch = curl_init($url);

  curl_setopt($ch, CURLOPT_POST, 1);
  curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
  curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

  $response = curl_exec($ch);
  curl_close($ch);
  return $response;
} 
```

改编自[Lorna Jane](http://www.lornajane.net/posts/2010/three-ways-to-make-a-post-request-from-php)的代码示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T06:31:19.707

要将种子上传到 torcache，我只需使用：

```
<?php
$upload_result = curl_upload('http://torcache.net/autoupload.php','torrent','/absoulte_full_path_to_torrent/torrent.torrent');

function curl_upload($url,$fileFormAttribute,$file){
        $ch = curl_init();
        curl_setopt($ch, CURLOPT_HEADER, 0);
        curl_setopt($ch, CURLOPT_VERBOSE, 1);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
        curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/4.0 (compatible;)");
        curl_setopt($ch, CURLOPT_URL, $url);
        curl_setopt($ch, CURLOPT_POST, true);
        $post = array($fileFormAttribute=>"@".$file);
        curl_setopt($ch, CURLOPT_POSTFIELDS, $post);
        $response = curl_exec($ch);
        return $response;
}
?> 
```

`$upload_result`如果成功将包含 torrent 哈希，如果它不是 torrent 的绝对路径，它将失败。

# android - 如何使用粘性服务检测 Apk？我没有源代码

> ID：11044711
> 
> 赞同：0
> 
> 时间：2012-06-15T04:45:16.840
> 
> 标签：android, service, sticky

在 Android 中，该服务可以是一个粘性服务，如果它被杀死，系统会自动启动该服务。但是我没有源代码，我怎么知道，我不想在目标设备上运行它，我只想通过扫描 AndroidMenifest.xml 或其他知道。有什么办法吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T05:41:21.007

为什么？如果你反编译APK，你应该能够找到。您可以使用 apktool、dex2jar 或类似工具。

# visual-studio-2010 - 扩展工具栏位置未保存在 Visual Studio 2010 中

> ID：11044718
> 
> 赞同：0
> 
> 时间：2012-06-15T04:45:55.227
> 
> 标签：visual-studio-2010, ide, toolbar, db4o, visual-studio-extensions

我在 Visual Studio 2010 中使用 db4o，但是当我重新启动 IDE 时，对象管理器企业工具栏不会保存它的位置。它每次都在标准工具栏下方返回，而我希望两个工具栏位于同一行以不使用垂直空间。

您对这个扩展或其他扩展有同样的问题吗？我们如何强制工具栏在会话中保持在相同的位置？

作为替代方案，我想使用相同的按钮创建自己的工具栏（因为我创建的工具栏不会受到问题的影响），但我在可用命令的长列表中找不到与扩展相关的按钮。

谢谢！

# android - 单选按钮未显示正确的值

> ID：11044719
> 
> 赞同：0
> 
> 时间：2012-06-15T04:45:57.057
> 
> 标签：android, button, radio-button

在我的编码中，m 有三个按钮。我得到选定的按钮是 id 并将其用于比较。但在单击按钮之前，它首先会自动显示默认选定按钮的 id。

```
rdgp.setOnCheckedChangeListener(new OnCheckedChangeListener() {
            public void onCheckedChanged(RadioGroup group, int checkedId) {
                counter++;
                if (counter > 5 || counter >= anarray.size()) {
                    Toast.makeText(testActivity.this, "" + score, 2000).show();
                    Intent intent = new Intent(testActivity.this, Badge.class);
                    intent.putExtra("Score", score);
                    startActivity(intent);
                    return;
                }

                rb1.setText(anarray.get(counter));
                rb2.setText(an1array.get(counter));
                rb3.setText(an2array.get(counter));
                rb4.setText(an3array.get(counter));
                rb5.setText(an4array.get(counter));
                int ans = 0;
                if (checkedId == R.id.radio0) {
                    ans = 1;
                } else if (checkedId == R.id.radio1) {
                    ans = 2;
                } else if (checkedId == R.id.radio2) {
                    ans = 3;
                } else if (checkedId == R.id.radio3) {
                    ans = 4;
                }

                Toast.makeText(testActivity.this, "" + ans, 2000).show();
                if (ans == anarray.get(counter))
                    ;
                {
                    score = score + 1;
                }
            }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T06:01:22.793

在您的 XML 中为所有单选按钮添加以下行。

```
 android:checked="false" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T17:15:48.703

如果您从单选按钮获取默认值，请检查您使用的布局文件天气 android:checked = "true"。如果这是状态，则将其更改为 false。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T04:59:36.043

获取选中`radiobutton`使用的 id。`group.getCheckedRadioButtonId()`返回该组中选定单选按钮的标识符。空选时，返回值为-1。

# jsf-2 - 使用 ui:repeat JSF2.0 跟踪“集合”

> ID：11044721
> 
> 赞同：0
> 
> 时间：2012-06-15T04:46:07.957
> 
> 标签：jsf-2

我想用

```
<ui:repeat > 
```

跟踪“Set”类型的集合，但无法这样做。如果有人有解决方案，请告诉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T07:45:47.173

`ui:repeat`不能迭代`java.util.Set`

你可以通过做这样的事情来克服它（将你的集合转换为列表并在你的中使用它`ui:repeat`）

```
public List retrieveListAsSet(Set set) {
   return new ArrayList(set);
} 
```

或者实现您自己的`repeater`，如本博客[Bozho 的技术博客中所述：如何在 JSF 中迭代 java.util.Set](http://techblog.bozho.net/?p=28)

# wpf - 想要从字符串“1,62099”的两边删除双引号？

> ID：11044723
> 
> 赞同：-1
> 
> 时间：2012-06-15T04:46:14.363
> 
> 标签：wpf, vb.net, string

如果我的字符串是“1,60299”获取用户代码的集合......那么如果我想从两端删除“我该怎么办？

前任：`strUserCode = "1,62099,100156321"`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T04:48:56.060

我建议你使用**replace()**函数

或者您可以使用**LTrim()、RTrim()**函数

*如果我正确理解您正在使用 vb.net*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T06:35:47.193

尝试使用该`String.Replace(String, String)`方法，它返回一个新字符串，其中当前实例中出现的所有指定字符串都替换为另一个指定字符串。

[String.Replace 方法（字符串，字符串）](http://msdn.microsoft.com/en-us/library/fk49wtc1.aspx)

像这样的东西-

```
Dim errString As String = "Example String " & """" & "This is the String with double quotes." & """"

Console.WriteLine("The original string is:{0}'{1}'{0}", Environment.NewLine, errString)

' Correct the spelling of "document".  
Dim correctString As String = errString.Replace("""", "")

Console.WriteLine("After correcting the string, the result is:{0}'{1}'", Environment.NewLine, correctString) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T10:28:19.800

怎么样`strUserCode.Trim('"');`

# php - PHP：端口 ping 上的“离线”占位符 - 例如：加载页面，回显“未知”，查询端口，将第一个回显替换为“在线”或“离线”？

> ID：11044724
> 
> 赞同：0
> 
> 时间：2012-06-15T04:46:21.813
> 
> 标签：php, function, echo, status

这是我目前拥有的（不包括所有在服务器端设置的 CSS）：

```
<?php 
    $getter = $_GET['site'];

    ##EXAMPLE VARIABLE:
    if ($getter == 'URLinput')
   { $site = test_port('URLinput.com',80,4); }

    function test_port($host,$port=80,$timeout=1)
    {
            $fsock = fsockopen($host, $port, $errno, $errstr, $timeout);
            if ( ! $fsock )
            {
                    return FALSE;
            }
            else
            {
                    return TRUE;
            }
    }

    ?>
    ##HEADER STUFF
    <?php
    if ($site == 1)
        { $status = $online;
        } else if ($site == 0) {
        $status = $offline;
        } else {
        $status = $unknown;
    }
    echo $status;
    ?> 
```

这可以完美地显示在线或离线，超时为 4。我想要做的是在等待服务器返回“端口在线”或“端口离线”时显示“未知”。

这方面的一个例子： [http ://status.spout.org/](http://status.spout.org/)

您可以在右侧看到（刷新时），如果服务器正在等待响应，它将显示未知。

如何让它加载页面，回显 $unknown，运行函数，删除第一个回显，然后回显 $status ？

我是 PHP 的中级初学者，所以请务必简短；D 非常感谢！-大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T05:35:55.640

这是使用 curl 和 jQuery 的方法，使用 jQuery，您可以在检查结果保存在会话中后轮询服务器以获取结果，以免重复该过程。希望能帮助到你：

```
<?php 
/*Start a session to hold the results this will stop
  multiple online checks from the same user.
 */
session_start();

//The urls you want to check
$urls = array('example'=>'http://example.com',
              'stackoverflow'=>'http://stackoverflow.com',
              'test'=>'http://test.com',
              'google'=>'http://google.com');

//Is it an ajax request from jQuery
if(isset($_SERVER['HTTP_X_REQUESTED_WITH']) && 
   strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) === 'xmlhttprequest'){

    //Set the return content type
    header('Content-Type: application/json');

    //Cache the online checks in user session and for 1 hour on filesystem
    if(!isset($_SESSION['status'])){
        if(file_exists('cache.txt') && (time() - 3600 < filemtime('cache.txt'))){
            $_SESSION['status'] = json_decode(file_get_contents('cache.txt'),true);
        }else{
            $_SESSION['status'] = array();
            //Loop through the $urls array and ping the site using the curl function below
            foreach($urls as $key=>$url){
                $_SESSION['status'][$key]=get_site($url);
            }
            //Update cache
            file_put_contents('cache.txt',json_encode($_SESSION['status']));
        }
    }
    //Echo the json string back to jQuery
    echo json_encode($_SESSION['status']);
    die;
}

//The curl function to check if the site is online
function get_site($url){
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_HEADER, true);
    curl_setopt($ch, CURLOPT_NOBODY, true);
    curl_setopt($ch, CURLOPT_TIMEOUT,2);
    curl_exec($ch);
    if(curl_getinfo($ch, CURLINFO_HTTP_CODE) === 200){
        return 'Online';
    }else{
        return 'Offline';
    }
}
?>

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Online Check</title>

<script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>

<script>
function pollresults(){
    setTimeout(function(){
        $.ajax({ url: "./test_server.online.php", cache: false,
        success: function(data){
            <?php
            //Loop through the $urls array and build a simple replaceWith
            foreach($urls as $key=>$value){
                echo '$("#'.$key.'").replaceWith("<p id=\"'.$key.'\">"+data.'.$key.'+"</p>");'.PHP_EOL;
            }
            ?>
            pollresults();
        }, dataType: "json"});
    }, 1000);
}
$(document).ready(function(){
    pollresults();
});
</script>
</head>

<body>
<table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" width="50%">
  <tr>
    <td width="50%">Site:</td>
    <td width="50%">Status:</td>
  </tr>

<?php foreach($urls as $key=>$value):?>
<tr>
    <td width="50%"><a href="<?php echo $value;?>"><?php echo $value;?></a></td>
    <td width="50%"><p id="<?php echo $key;?>">Checking</p></td>
</tr>
<?php endforeach;?>

</table>
</body>
</html> 
```

只需将脚本复制并粘贴到名为**test_server.online.php**的文件中并进行测试。

# jquery - 删除最后一个动态添加的行

> ID：11044725
> 
> 赞同：0
> 
> 时间：2012-06-15T04:46:23.097
> 
> 标签：jquery

我做了一些整天的学习，我想出了如何使用 jquery 为我的表单动态添加行。但是现在我无法终生弄清楚如何删除最后添加的行。

```
$('#btnAdd').click(function() {
                var num     = $('.clonedInput').length;
                var newNum  = new Number(num + 1);

                var newElem = $('#input' + num).clone().attr('id', 'input' + newNum);

                newElem.children('.client').attr('id', 'client' + newNum).attr('name', 'client' + newNum);
                newElem.children('.color').attr('id', 'color' + newNum).attr('name', 'color' + newNum);

                $('#input' + num).after(newElem);
                $('#btnDel').attr('disabled','');

                if (newNum == 5)
                    $('#btnAdd').attr('disabled','disabled');

            });

<form id="myForm">
    <div id="input1" style="margin-bottom:4px;" class="clonedInput">

<select name="client" id="client" class="client">
<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
</select>

<input type="text" name="color" id="color" class="color"/>

    </div>

    <div>
        <input type="button" id="btnAdd" value="Add Row" />
    </div>
</form> 
```

并在 jsFiddle 上为您带来观赏乐趣：[**Demo**](http://jsfiddle.net/P8bTz/1/)

**回答** *由**Blender提供***

```
$('#btnRemove').on('click', function() {
    $('.clonedInput').last().remove();
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T04:50:21.220

像这样？

```
$('#btnRemove').on('click', function() {
    $('.clonedInput').last().remove();
});
​ 
```

**演示：http: [//jsfiddle.net/P8bTz/2/](http://jsfiddle.net/P8bTz/2/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T04:49:39.380

添加一个按钮并将这一行绑定到它：

```
$(".clonedInput").last().remove(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T04:49:46.797

```
$('div.clonedInput:last').remove(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T04:56:02.123

试试[http://jsfiddle.net/P8bTz/1/](http://jsfiddle.net/P8bTz/1/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T04:57:24.047

[http://jsfiddle.net/P8bTz/3/](http://jsfiddle.net/P8bTz/3/)这个应该也展示你希望的删除按钮禁用行为

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-15T05:20:50.073

****jquery的****最后一个**将起到以下作用：**

 **```
$('#your_doms_id').last().remove(); 
```**

# datetime - 1339698600000 = 2012 年 6 月 15 日的日期格式是什么？

> ID：11044726
> 
> 赞同：2
> 
> 时间：2012-06-15T04:46:23.860
> 
> 标签：datetime, datepicker, twitter-bootstrap

我正在使用[bootstrap-](https://github.com/eternicode/bootstrap-datepicker) datepicker 并在 2012 年 6 月 15 日的选定日期获得值 1339698600000。

这是什么日期格式？如何将其转换为人类可读的格式？

有没有可以找到更多格式的资源？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T04:50:15.150

这是自*1970 年 1 月 1 日（POSIX 纪元）*以来的毫秒数。您可以将其除以*1000以获得自**纪元*以来的秒数，这是表示时间的标准方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T04:50:53.717

这是自 1970 年 1 月 1 日以来的毫秒数。要转换为人类可读的，请将毫秒数添加到 1970 年 1 月 1 日的日期对象。

# mod-rewrite - 重写规则的服务器错误

> ID：11044739
> 
> 赞同：0
> 
> 时间：2012-06-15T04:47:58.507
> 
> 标签：mod-rewrite, url-rewriting

我更改了我的 CMS，需要重定向一些旧 URL。

我想做的是：

1.  删除“博客/档案”
2.  用破折号替换下划线
3.  用斜杠替换“.html”

旧链接：

```
http://example.com/blog/archives/the_post_title.html 
```

新链接

```
http://example.com/the-post-title/ 
```

我已经写过，它在某一时刻工作，但我现在收到 500 个错误。

```
RewriteRule ^([^_]*)_([^_]*_.*) $1-$2 [N]   #Replace "_" with "-" loop until one left
RewriteRule ^([^_]*)_([^_]*)$ /$1-$2        #Replace the last underscore
RewriteRule ^(.*?).html$ /$1/ [L,R=301]     #Strip the ".html" and use the filename as the url, note this as "permanently moved" (301) 
```

知道为什么我会收到服务器错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T06:45:54.527

您可以尝试将其替换为：

```
RewriteRule ^(.*)_(.*)$ /$1-$2
RewriteCond %{REQUEST_URI} !_
RewriteRule ^blog/archive/(.*).html$ /$1/ [L,R=301] 
```

# php - SQL查询搜索具有相同id字段但不同参数字段的多行

> ID：11044752
> 
> 赞同：0
> 
> 时间：2012-06-15T04:50:07.803
> 
> 标签：php, sql, database, filter

我觉得这应该很简单，但我被卡住了。这就是我在我的数据库中拥有的

```
id   field_value
----------------
41   Blue
42   Blue
43   Blue
43   Sweet
46   Blue   
47   Sweet 
```

我需要选择只有`$colour = blue AND $taste = sweet`. 基本上我需要得到 43 的 id，因为它既有 Blue 又有 Sweet。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T07:57:19.900

你通常会像这样测试它：

```
select id
  from table1
 where field_value in ('Blue', 'Sweet')
 group by id
having count (distinct field_value) = 2 
```

`= 2`是`in ()`列表中的项目数。

[查看测试@Sql Fiddle](http://sqlfiddle.com/#!5/d3ed2/2)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T05:01:44.990

如果我理解正确；像这样的东西：

```
$colour = (!isset($_GET['colour']) || empty($_GET['colour'])) ? '' : $_GET['colour'];
$taste = (!isset($_GET['taste']) || empty($_GET['taste'])) ? '' : $_GET['taste'];

$query = "SELECT * FROM table WHERE (parameter = '$colour') AND (parameter = '$taste')"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T05:05:59.043

在查询中使用查询。就像是;

```
SELECT id
FROM table
WHERE field_value = 'Blue'
AND
id IN (SELECT id
    FROM table
    WHERE field_value = 'Sweet')
GROUP BY id 
```

# powerbuilder - 在 PowerBuilder 中为电子邮件生成附件

> ID：11044757
> 
> 赞同：1
> 
> 时间：2012-06-15T04:50:35.807
> 
> 标签：powerbuilder, ghostscript, datawindow

我想在 PowerBuilder 中使用 Lotus Notes 发送邮件。我还想附上要发送的邮件的附件。但是，要放置在附件中的内容取自存储过程。附件为pdf附件。因此，我们为此目的使用 Ghostscript。我们可以直接创建从存储过程接收到的数据的附件吗？或者我们必须先将数据拉入 DataWindow，然后再创建该 DataWindow 的附件。或者有没有替代的解决方案？谁能指导我完成这个？我对 PowerBuilder 完全陌生。

问候， 普拉塔梅什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T01:23:49.953

我用来在powerbuilder中生成pdf附件的方法是通过数据窗口。首先，我将所有数据拉入数据窗口，然后生成该数据窗口的 pdf 附件代码如下

```
n_ds ds_data 
ds_data = CREATE n_ds ds_data.DataObject = "d_co_escalation"
ds_data.of_SetTransObject(SQLCA)
ds_data.Object.DataWindow.Export.PDF.Method = Distill! 
ds_data.Object.DataWindow.Printer = "Sybase DataWindow PS" 
ds_data.Object.DataWindow.Export.PDF.Distill.CustomPostScript ="Yes" 
```

# asp.net-mvc-3 - Mvc3 中的级联下拉菜单

> ID：11044759
> 
> 赞同：2
> 
> 时间：2012-06-15T04:50:50.770
> 
> 标签：asp.net-mvc-3

我正在使用 Mvc3 我有 2 个下拉菜单，BankBranch 和城市。在第一次加载视图时，我在没有级联的情况下绑定了两个 dropdon。然后，如果用户选择城市，我想据此更改银行分行。我很困惑如何同时实现这两件事。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T04:57:44.273

这篇博文应该能让你上路。它提供了普通表单帖子、microsoft ajax 表单帖子、jquery ajax 等的示例。

[http://weblogs.asp.net/raduenuca/archive/2011/03/06/asp-net-mvc-cascading-dropdown-lists-tutorial-part-1-defining-the-problem-and-the-context。 aspx](http://weblogs.asp.net/raduenuca/archive/2011/03/06/asp-net-mvc-cascading-dropdown-lists-tutorial-part-1-defining-the-problem-and-the-context.aspx)

**编辑：广义代码解释**

模型

```
public class CascadeModel {
    public SelectList<City> Cities { get; set; }
    public SelectList<BankBranch> BankBranches { get; set;}
    public int CityId { get; set; }
    public int BranchId { get; set; }
}

public class Branch {
    public int Id { get; set;}
    public string Name { get; set; }
} 
```

控制器：

```
public ActionResult BranchSelector() {
     var viewData = new CascadeModel();
     viewData.Cities = new SelectList(Repository.GetAllCities(), "Id", "Name", selectedCity);
     viewData.BankBranches = new SelectList(Repository.GetBranchesByCity(selectedCity), "Id", "Name", "");
     return View(viewData);
}

public JsonResult GetBranches(int id) {
    return Json(Repository.GetBranchesByCity(id), JsonRequestBehavior.AllowGet);
} 
```

看法：

```
@model CascadeModel

@Html.DropDownListFor(m => m.CityId, Model.Cities, new { style = "width:250px" })
<br />
@Html.DropDownListFor(m => m.BranchId, Model.BankBranches, new { style = "width:250px" })

<script type="text/javascript">
    $(document).ready(function() {
         $("#CityId").bind('change', function() {
             $.ajax({
                 url: '/Controller/GetBranches/' + $(this).val(),
                 success: function(data) {
                     //Clear the current branch ddl
                     //Load the new Branch data returned from the jquery call in the branches ddl
                 }
             });
         };
    });
</script> 
```

# mysql - 带有数据库存储的 utf-8 rails 3.1

> ID：11044765
> 
> 赞同：0
> 
> 时间：2012-06-15T04:51:24.780
> 
> 标签：mysql, ruby-on-rails, utf-8

在我的 rails 应用程序中，我过去从 rails 3.0 升级到 rails 3.1，现在我的数据库中存储了多种语言并遇到了：

```
ActionView::Template::Error (incompatible character encodings: UTF-8 and ASCII-8BIT): 
```

所以西班牙语看起来像这样：“TU SERER QUERIDOS ESTRA\xC3\x83\xC2\xB1AN TU PRECENSIA”

那么将数据保存为 UTF-8 的好方法是什么？而不是扼杀我的观点？（我想我现在只有大约 40 个这样的错误，所以删除和重新输入数据也不错。

我也在运行 mysql gem 而不是 mysql2 gem，我在某处读过，但是在尝试安装该 gem 时，应用程序崩溃了。因此，一个简单的解决方法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T08:26:01.600

我强烈建议您迁移到`mysql2`. 这不是解决方法，而是正确的解决方案。mysql gem 的开发于 2009 年停止，目前它不能很好地处理编码。顺便说一句，你也从 Ruby 1.8 切换到 1.9 了吗？Ruby 1.9 对字符串编码进行了重大更改，迁移回 1.8 可能会解决您的问题。但是再次 - 将您的 gem 更改为 mysql2。出于多种原因。

# asp.net-mvc-3 - c# Mvc 3 临时数据字典？

> ID：11044769
> 
> 赞同：0
> 
> 时间：2012-06-15T04:52:08.183
> 
> 标签：asp.net-mvc-3

在我的 mvc3 项目中，我将 Dictionary 保存在 Tempdata Dictionary 中。

```
TempData[ViewDataKeys.ItemsAdd] = new Dictionary<int, int>(); 
```

当 Ajax 请求时，我将项目添加到`TempData[ViewDataKeys.ItemsAdd]`. 它已更新，但是当我从中删除项目时`TempData[ViewDataKeys.ItemsAdd]`未更新。

从 中删除一项后`TempData[ViewDataKeys.ItemsAdd]`，它为空。

```
 private void RemoveFrom(int Uid)
    {
        if (TempData[ViewDataKeys.ItemsAdd] == null)
        {
            TempData[ViewDataKeys.ItemsAdd] = new Dictionary<int, int>();
        }
        var a= (Dictionary<int,int>)TempData[ViewDataKeys.ItemsAdd];
        a.Remove(Uid);
        TempData[ViewDataKeys.ItemsAdd] = a;
    }

        private void AddTo(int Uid)
    {
        if (TempData[ViewDataKeys.ItemsAdd] == null)
        {
            TempData[ViewDataKeys.ItemsAdd] = new Dictionary<int,int>();
        }

        var a= (Dictionary<int,int>)TempData[ViewDataKeys.ItemsAdd];
        a.Add(Uid, Uid);
        TempData[ViewDataKeys.ItemsAdd] = a;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T04:54:22.067

每当`TempData`读取它包含的值时都会返回，然后将其从 TempData 中删除。TempData 实际上使用标准`Session`对象，但不同之处在于当您读取一个值时，TempData 对象会从会话中删除。

通常它仅用于重定向或您需要持续到下一页加载的东西。

# c# - C#按钮不重新定位自己

> ID：11044771
> 
> 赞同：2
> 
> 时间：2012-06-15T04:52:30.657
> 
> 标签：c#, .net, button, panel

我在一个面板中包含了 4 个按钮。面板停靠在主窗口上。

当我调整主窗口的大小时，它不会根据新修改的窗口大小重新定位 4 个按钮。我正在使用 VS 2010 Designer 视图来完成此操作。

这是从 Designer.cs 生成的完整代码

```
private void InitializeComponent()
{
    this.statusStrip1 = new System.Windows.Forms.StatusStrip();
    this.toolStripStatusLabel1 = new System.Windows.Forms.ToolStripStatusLabel();
    this.TreeDDC = new System.Windows.Forms.TreeView();
    this.BtnPointCtrl = new System.Windows.Forms.Button();
    this.BtnLogic = new System.Windows.Forms.Button();
    this.BtnComm = new System.Windows.Forms.Button();
    this.BtnSystem = new System.Windows.Forms.Button();
    this.panel1 = new System.Windows.Forms.Panel();
    this.statusStrip1.SuspendLayout();
    this.panel1.SuspendLayout();
    this.SuspendLayout();
    // 
    // statusStrip1
    // 
    this.statusStrip1.Items.AddRange(new System.Windows.Forms.ToolStripItem[] {
    this.toolStripStatusLabel1});
    this.statusStrip1.Location = new System.Drawing.Point(0, 445);
    this.statusStrip1.Name = "statusStrip1";
    this.statusStrip1.Size = new System.Drawing.Size(639, 22);
    this.statusStrip1.TabIndex = 0;
    this.statusStrip1.Text = "statusBar";
    // 
    // toolStripStatusLabel1
    // 
    this.toolStripStatusLabel1.Name = "toolStripStatusLabel1";
    this.toolStripStatusLabel1.Size = new System.Drawing.Size(61, 17);
    this.toolStripStatusLabel1.Text = "Status Bar";
    // 
    // TreeDDC
    // 
    this.TreeDDC.Dock = System.Windows.Forms.DockStyle.Left;
    this.TreeDDC.Location = new System.Drawing.Point(0, 0);
    this.TreeDDC.Name = "TreeDDC";
    this.TreeDDC.Size = new System.Drawing.Size(97, 445);
    this.TreeDDC.TabIndex = 1;
    // 
    // BtnPointCtrl
    // 
    this.BtnPointCtrl.Location = new System.Drawing.Point(28, 93);
    this.BtnPointCtrl.Name = "BtnPointCtrl";
    this.BtnPointCtrl.Size = new System.Drawing.Size(202, 86);
    this.BtnPointCtrl.TabIndex = 2;
    this.BtnPointCtrl.Text = "???";
    this.BtnPointCtrl.UseVisualStyleBackColor = true;
    // 
    // BtnLogic
    // 
    this.BtnLogic.Location = new System.Drawing.Point(28, 282);
    this.BtnLogic.Name = "BtnLogic";
    this.BtnLogic.Size = new System.Drawing.Size(202, 86);
    this.BtnLogic.TabIndex = 4;
    this.BtnLogic.Text = "??";
    this.BtnLogic.UseVisualStyleBackColor = true;
    // 
    // BtnComm
    // 
    this.BtnComm.Location = new System.Drawing.Point(307, 93);
    this.BtnComm.Name = "BtnComm";
    this.BtnComm.Size = new System.Drawing.Size(202, 86);
    this.BtnComm.TabIndex = 3;
    this.BtnComm.Text = "??";
    this.BtnComm.UseVisualStyleBackColor = true;
    // 
    // BtnSystem
    // 
    this.BtnSystem.Location = new System.Drawing.Point(307, 282);
    this.BtnSystem.Name = "BtnSystem";
    this.BtnSystem.Size = new System.Drawing.Size(202, 86);
    this.BtnSystem.TabIndex = 5;
    this.BtnSystem.Text = "???";
    this.BtnSystem.UseVisualStyleBackColor = true;
    // 
    // panel1
    // 
    this.panel1.BorderStyle = System.Windows.Forms.BorderStyle.FixedSingle;
    this.panel1.Controls.Add(this.BtnSystem);
    this.panel1.Controls.Add(this.BtnComm);
    this.panel1.Controls.Add(this.BtnPointCtrl);
    this.panel1.Controls.Add(this.BtnLogic);
    this.panel1.Dock = System.Windows.Forms.DockStyle.Fill;
    this.panel1.Location = new System.Drawing.Point(97, 0);
    this.panel1.Name = "panel1";
    this.panel1.Size = new System.Drawing.Size(542, 445);
    this.panel1.TabIndex = 6;
    // 
    // MainForm
    // 
    this.AutoScaleDimensions = new System.Drawing.SizeF(7F, 12F);
    this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
    this.ClientSize = new System.Drawing.Size(639, 467);
    this.Controls.Add(this.panel1);
    this.Controls.Add(this.TreeDDC);
    this.Controls.Add(this.statusStrip1);
    this.Name = "MainForm";
    this.Text = "MainForm";
    this.statusStrip1.ResumeLayout(false);
    this.statusStrip1.PerformLayout();
    this.panel1.ResumeLayout(false);
    this.ResumeLayout(false);
    this.PerformLayout();

} 
```

但我相信唯一感兴趣的代码如下：

```
this.panel1.Dock = System.Windows.Forms.DockStyle.Fill;

this.panel1.Controls.Add(this.BtnSystem);
this.panel1.Controls.Add(this.BtnComm);
this.panel1.Controls.Add(this.BtnPointCtrl);
this.panel1.Controls.Add(this.BtnLogic); 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T04:59:08.313

使用按钮的[Anchor属性...](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.anchor%28v=vs.71%29.aspx)

阅读它[使用锚定和对接](http://www.codeproject.com/Articles/2231/Working-with-Anchoring-and-Docking-Properties)

面板在调整大小时本身不会重新定位控件，使用`Anchor (Top, Bottom, Left, Right)`当父面板调整大小时控件重新定位的属性......

或使用[TableLayOutPanel](http://www.c-sharpcorner.com/uploadfile/mahesh/tablelayoutpanel-in-C-Sharp/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T04:57:17.253

停靠面板只会调整面板的大小，不会重新定位面板内的控件。要让容器中的元素在调整容器大小后更改其位置，请查看[`Anchor`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.anchor.aspx)属性。[`TableLayoutPanel`](http://msdn.microsoft.com/en-us/library/system.windows.forms.tablelayoutpanel.aspx)顾名思义，还有一个表格格式的布局控件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T05:20:47.150

请将 FlowLayoutPanel 停靠在您的面板中，并将按钮放置在该 FlowLayoutPanel 中。设置布局方向属性。现在，当您调整主窗口的大小时，您的按钮也将调整大小。

# iphone - 如何将我的 UITableViewCells 存储在 NSMutableArray 中？

> ID：11044772
> 
> 赞同：0
> 
> 时间：2012-06-15T04:52:35.773
> 
> 标签：iphone, ios, uitableview

基本上我正在制作一个列表视图，您可以将内容添加到顶部。我能想到的最好的方法是将 UITableViewCells 本身存储在一个 NSMutableArray 中——因为我可以简单地将它们从数组中拉出来，它们的所有数据都在对象中，而且这个列表视图永远不会超过 10 个单元格。

另请注意，我使用的是 Storyboard，因此使用了 initWithCoder。

以下代码是我正在尝试的，但它不起作用：

```
// This is where my NSMutableArray is initialized:

- (id)initWithCoder:(NSCoder *)aDecoder
{
    if (self = [super initWithCoder:aDecoder]) {
        if (!_CellsArray) {
            UITableViewCell *cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"TestCell"];
            _CellsArray = [NSMutableArray arrayWithObject:cell];
        }
    }
    return self;
}

//UITableView Delegate & DataSource Methods

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"TestCell"];
    [_CellsArray insertObject:cell atIndex:0];
    return [_CellsArray objectAtIndex:indexPath.row];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return 10;
} 
```

我意识到我可能以错误的方式处理这个问题，这就是我在这里的原因:)

谢谢你。

编辑：修复了代码中的一个类型（TimerCell -> UITableViewCell）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T05:27:16.983

让我们看看事物被调用的顺序以及发生了什么。

1.  您的视图控制器未归档，因此`initWithCoder:`调用了您的方法。此方法创建一个可变数组并将一个实例`TimerCell`放入其中。所述实例未进一步配置（除非您已重写`initWithStyle:reuseIdentifier:`以进行某些配置）。

2.  您的数据源方法`tableView:numberOfRowsInSection:`被调用，它告诉表视图有十行。

3.  因此，你`tableView:cellForRowAtIndexPath:`被调用了十次。每次，它都会创建一个新实例`UITableViewCell`并将其插入到您的可变数组中。（十次调用后，您的可变数组`TimerCell`在索引 10 处包含一个，`UITableViewCell`在索引 0-9 处包含十个。）它不配置单元格的内容或外观，然后返回指定行索引处的单元格。在第一次调用时，系统会要求您输入第 0 行，因此将返回您刚刚创建并插入到索引 0 的单元格。在第二次调用中，系统要求您输入第 1 行，因此返回数组中索引 1 处的单元格 - 因为您刚刚在索引 0 处插入了一个新单元格，所以您在最后一次调用中创建的单元格已转移到索引 1 ，然后您再次返回它。每次调用都会继续：您返回相同的未配置`UITableViewCell`十次。

* * *

看起来您正试图超越 UIKit。这几乎从来都不是一件好事。（据说过早的优化是万恶之源。）

`UITableView`已经有小区重用机制；最好只跟踪您自己的单元格*内容*并让该机制发挥作用。我花了很长时间才输入这个，以至于其他答案已经写了描述如何做到这一点。查看他们，或查看 Apple 的文档或任何第三方`UITableView`教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T05:22:01.167

为什么不将单元格信息存储在数组中。然后在`-cellForRowAtIndexPath:`方法中，只需提取更改每个单元格所需的数据。

这是一个简单的例子：

```
 //Lets say you have an init like this that inits some cell information
- (id)initWithCoder:(NSCoder *)aDecoder
{
    if (self = [super initWithCoder:aDecoder]) {
        cellArray = [NSArray alloc] initWithObjects:@"firstCell",@"secondCell",@"thirdCell",nil];
    }
    return self;
}

//then for each cell, just extract the information using the indexPath and change the cell that way
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    // Configure the cell...
    cell.textLabel.text = [cellArray objectAtIndex:indexPath.row];

    return cell;
} 
```

 `* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T05:24:36.717

表视图不存储东西。相反，他们只是询问他们想要显示的数据，而您通常从其他地方（如 NSArray 或 NSFetchedResultsController）获取这些数据。只需将您想要的东西存储到某个数据容器中，然后让表格为您显示它们。

```
// Probably your data model is actually a member of your class, but for purposes of demonstration...
static NSArray* _myArray = [[NSArray alloc] initWithObjects:@"Bob", @"Sally", @"Joe", nil];

- (NSInteger) tableView:(UITableView*)tableView numberOfRowsInSection:(NSInteger)section
{
    return [_myArray count];
}

- (UITableViewCell*) tableView:(UITableView*)tableView cellForRowAtIndexPath:(NSIndexPath*)indexPath
{
    static NSString* CellIdentifier = @"TestCell";

    // Make a cell.
    UITableViewCell* cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if( cell == nil ) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }

    // Setup the cell with the right content.       
    NSString* aString = [_myArray objectAtIndex:[indexPath row]];
    cell.textLabel = aString;

    return cell;
} 
```

现在，如果您想要列表中的更多内容，请将其添加到您的数组中，然后您就完成了。

编辑：另一方面， initWithCoder: 通常不是为视图控制器进行初始化的最佳位置。原因是，在它被调用的时候，很有可能还没有加载东西（例如 IBOutlets）。我倾向于更喜欢 viewDidLoad（在这种情况下不要忘记在 viewDidUnload 中清理），或者 awakeFromNib。`

# c++ - GCC 无法编译：'* 没有命名类型'

> ID：11044774
> 
> 赞同：1
> 
> 时间：2012-06-15T04:53:06.263
> 
> 标签：c++, gcc

今天，在安装 Slackware 13.37 后，我遇到了问题：默认的 GCC 4.5.2 无法编译我的代码。现在我通过 Stephen Davis 的书“C++ for dummies”学习 C++，并想编译这个：

```
#include <stdio.h>
#include <iostream.h>

int main(int nNumberofArgs, char* pszArgs[])
{

int nNCelsius;
cout << "Celsisus: ";
cin >> nNCelsius;

int nNFactor;
nNFactor = 212 - 32;

int nFahrenheit;
nFahrenheit = nNFactor * nNCelsius / 100 + 32;

cout << "Fahrenheit: ";
cout << nFahrenheit;

return 0;
} 
```

但是我的 GCC 4.5.2 给出了这些错误：

```
FahTCel.cpp:7:14: error: expected ')' before ';' token
FahTCel.cpp:7:14: error: 'main' declared as function returning a function
FahTCel.cpp:8:1: error: 'cout' does not name a type
FahTCel.cpp:9:1: error: 'cin' does not name a type
FahTCel.cpp:12:1: error: 'nNFactor' does not name a type
FahTCel.cpp:15:1: error: 'nFahrenheit' does not name a type
FahTCel.cpp:17:1: error: 'cout' does not name a type
FahTCel.cpp:18:1: error: 'cout' does not name a type
FahTCel.cpp:20:1: error: expected unqualified-id before 'return'
FahTCel.cpp:21:1: error: expected declaration before '}' token 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T05:00:12.110

三个错误：

1.  正确的标题是`<iostream>`. 该程序不需要其他标题。

2.  您必须要么放入文件，要么明确`using namespace std;`引用。任你选择，很多 C++ 程序员不同意这两个选项中的哪一个更好。（如果您愿意，您也可以将 just和带入您的命名空间。）`std::cout``std::cin``cin``cout`

3.  该程序不会在末尾写入行终止符。这将导致大多数终端上的输出“看起来很糟糕”，命令提示符与输出显示在同一行。例如：

以下是更正：

```
#include <iostream>
using namespace std;
int main(int argc, char *argv[])
{
    ...
    cout << nFahrenheit << '\n';
    ...
} 
```

**注意：**看到带有和`main`以外的名称的参数是非常不寻常的。更改名称只会让其他人更难阅读您的代码。`argc``argv`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T04:55:14.260

它的 std::cout 或者你应该添加`using namespace std;`

`< iostream>`并且包含不应该是`< ionstream.h>`。

# javascript - 淘汰赛：数据绑定到 foreach 绑定中的单个文本框

> ID：11044785
> 
> 赞同：0
> 
> 时间：2012-06-15T04:54:58.943
> 
> 标签：javascript, knockout.js

以下是相关代码：

```
<div data-bind="foreach: chats, visible: chats().length > 0">
    <input data-bind='value: $parent.newCommentText' />
    <a href="#" data-bind='click: $root.addComment'>Add comment</a>
</div> 
```

视图模型：

```
self.newCommentText = ko.observable()
self.addComment = function(chat) {
            var newComment = { CourseItemDescription: self.newCommentText(), };
            chat.CommentList.push(newComment);
            self.newCommentText("");
            $.ajax({
                url: "@Url.Action("AddComment")",
                data: ko.toJSON(newComment),
                type: "post", 
                contentType: "application/json"
            });
        }; 
```

问题是这会将我在一个文本框中输入的任何内容放在所有其他文本框中。我怎样才能使它只绑定到用户正在输入的文本框，并使该数据可用于 addComment 函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:49:14.883

如果您希望每个聊天都能够添加自己的评论字段，那么您可能希望将`newCommentText`字段添加到`chat`对象而不是父对象。然后您可以读取它并将其从`chat`传递给的对象中清除`addComment`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T12:51:41.823

我需要将 newCommentText 放入 chats 数组中。

所以代码会变成

```
self.addComment = function(chat) {
            var newComment = { CourseItemDescription: chat.newCommentText(), };
            chat.CommentList.push(newComment);
            chat.newCommentText("");
           ...
        }; 
```

# modelica - 如何学习模型？

> ID：11044789
> 
> 赞同：1
> 
> 时间：2012-06-15T04:55:29.797
> 
> 标签：modelica

我对 Modelica 完全陌生，想知道自学的最佳方式是什么？此外，我将在 MapleSim 5 （或 6 可用时）中使用它，因此有关此的任何信息也会有所帮助。

我需要 Modelica 为热模型创建一些组件，然后使用 MapleSim 进行仿真，希望当 MapleSim 和 BCVTB 可用时，我还可以使用 FMI 与另一个软件 (EnergPlus) 进行联合仿真。

抱歉，我的问题没有具体说明，真的任何参考一个好的 Modelica 指南都会很棒，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T12:20:47.523

显然，我有偏见，但我喜欢认为我的书[“Modelica 物理建模简介”](http://bit.ly/ModelicaBook)是在工程问题的背景下探索 Modelica 特性的好方法。我注意到 Wolfram[似乎也推荐](http://www.wolfram.com/system-modeler/resources/)这本书。

但为了平衡起见，Peter Fritzson 也有两本关于 Modelica 主题的书。

# matlab - 更改变量名matlab

> ID：11044793
> 
> 赞同：15
> 
> 时间：2012-06-15T04:55:52.013
> 
> 标签：matlab, rename

我想在导出到全局环境之前更改一个变量名，数据非常大，这意味着我不能将它复制到另一个变量并删除第一个。

数据被加载到某些变量并且我也无法更改，它在不同的后台作业中多次使用，所以我想要做的是重命名它并将其发送重命名，这样作业就不会混合，然后是下一个工作负载并再次重命名等。

基本上是在命令窗口中做我可以在工作区中用鼠标做的事情......

有谁知道怎么做？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-15T08:57:38.190

分配变量名称时，[matlab 使用“惰性复制”](http://blogs.mathworks.com/pick/2008/04/18/renaming-variables/)，因此没有理由：

```
new_name = old_name;
clear old_name; 
```

不应该工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T08:19:21.057

在没有内存副本的情况下，我能想到的唯一方法是将原始数据包装在一个对象中，该对象是句柄类的子类。

[http://www.mathworks.co.uk/help/techdoc/matlab_oop/brfylzt-1.html](http://www.mathworks.co.uk/help/techdoc/matlab_oop/brfylzt-1.html)

然后，您可以使用普通语法“复制”句柄类

```
 classB=classA 
```

..但您只是为相同的数据创建别名（对 classB 的更改反映在 classA 中）。这是 matlab 中最接近类指针语义的东西。

例如，创建一个名为`myHandle`并粘贴以下文本来定义类的文件。.

```
classdef myHandle < handle

    properties
        data
        moreData
    end

    methods
    end

end 
```

然后，您可以像使用常规结构一样使用它。从命令行做..

```
>> x = myHandle

x = 

  myHandle handle

  Properties:
        data: []
    moreData: []

  Methods, Events, Superclasses 
```

...然后我们可以填充数据。. .

```
>> x.data = [1 2 3 4];
>> x.moreData = 'efg'; 
```

...一旦原始对象填充了数据，就可以通过键入来生成原始数据的别名。.

```
>> y = x 
```

有趣的事情发生在`x`何时`y`被修改，即

```
>> y.data = [33 44 55 66];
>> disp(x)
x = 

  myHandle handle

  Properties:
        data: [33 44 55 66]
    moreData: 'f'

  Methods, Events, Superclasses 
```

您甚至可以清除其中一个别名。.

```
 clear x 
```

..并且数据仍将在数据的另一个句柄中可用，`y`. 仅当没有更多句柄引用它时（当[引用计数](http://en.wikipedia.org/wiki/Reference_counting)达到零时）才会释放内存。

# java - f:ajax 在 ui:repeat 中的 h:selectOneRadio 没有按预期工作

> ID：11044794
> 
> 赞同：0
> 
> 时间：2012-06-15T04:55:54.340
> 
> 标签：java, jsf-2, uirepeat

我正在渲染一个带有单选按钮的表格。即，在选择radioButton 时，需要重新渲染整个表单。但这是行不通的。

这是我的代码：

```
<h:form id="summaryForm" prependId="false">
<table>
<tbody>
  <ui:repeat var="switchRow" value="#{designBean.switchReport.rowList}" varStatus="rowStatus">
     <tr class="#{rowStatus.even?'even':'odd'}">
      <td>
     <h:selectOneRadio id="switchTypeSelectionId" 
                  name="switchTypeSelection" 
              styleClass="choices"
              onclick="selectRadioButton(this);"
              value="#{designBean.designTool.switchProduct}">
      <f:selectItem itemValue="#{switchRow.rowId}"/>
      <f:ajax event="click" execute="@this" render="@form" listener="#{designBean.showIGBTDetails}"/>
    </h:selectOneRadio>
    </td>
    <ui:repeat var="switchColValue" value="#{switchRow.rowValues}">
        <td>
                    <h:outputText value="#{switchColValue}" /> 
                </td>
    </ui:repeat>
      </tr>
     </ui:repeat>
</tbody>
</table>
</h:form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T05:26:50.913

我不知道在这种情况下是否需要单击事件。尝试使用 onchange。我记得以前提到过这件事。但是，如果您在已选择的单选项目上单击多次，它不会触发。

另外，您是否尝试使用表单的 id 而不是@form？像渲染 =“summaryForm”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T01:57:24.367

经过一番研究，我找到了一种简单的方法来实现这一点，这是我的答案，而不是使用 h:selectOneRadio，将其更改为 HTML 并将其包装在 a 中，现在单击 panelGrid 组件调用 ajax 函数/侦听器。

```
<h:form id="summaryForm" prependId="false">
<table>
<tbody>
  <ui:repeat var="switchRow" value="#{designBean.switchReport.rowList}" varStatus="rowStatus">
     <tr class="#{rowStatus.even?'even':'odd'}">
      <td>
          <h:panelGrid id="switchSelectionId" styleClass="choices">
                <input type="radio" name="switchTypeSelection" value="#{switchRow.rowId}" />
                <f:ajax event="click" execute="@this" render="@form" listener="#{designBean.showIGBTDetails}"/>
          </h:panelGrid>
      </td>
      <ui:repeat var="switchColValue" value="#{switchRow.rowValues}">
        <td>
             <h:outputText value="#{switchColValue}" /> 
        </td>
      </ui:repeat>
      </tr>
     </ui:repeat>
</tbody>
</table>
</h:form> 
```

# c# - c# 迭代前 2 次没有答案。第三次输出一遍又一遍

> ID：11044799
> 
> 赞同：2
> 
> 时间：2012-06-15T04:56:15.180
> 
> 标签：c#, object, while-loop

我把它写成一个简单的骰子游戏。它可以按我的意愿工作，只是它迭代了 3 次，而前两次迭代没有答案。第三次询问并回答问题时会显示输出。

不知道我的代码中哪里有问题，我一遍又一遍地检查它......大声笑任何帮助=）

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

/* I am very confused but for soem reason it only returns a value every 3 tries....I dont understand
 * I looked through the program and the only thing that occurs 3 times is the if else if else if statement 
 * but I dont see how that would do it....
 */
namespace Lab11
{
    class Program
    {
        static void Main(string[] args)
        {//declared constants
            const int NUM_1 = 1;
            const int NUM_6 = 6;

            Console.WriteLine("\t\t\tWelcome To a Game of Dice!");
            //Do while statement repeating the "roll again" question and performing the random numbers
            do
            {
                Again();

                Random ran = new Random();

                //if else if else if statement doing the random numbers and telling you rolled snake or box
                if (Again() == true)
                {
                    int num1 = ran.Next(1, 7);
                    int num2 = ran.Next(1, 7);
                    //if else statement determining the output for each roll in the console.
                    if (num1 == NUM_6 && num2 == NUM_6)
                    {
                        Console.WriteLine("\nYou Rolled BoxCars");
                    }
                    else if (num1 == NUM_1 && num2 == NUM_1)
                    {
                        Console.WriteLine("\nYou rolled Snake-Eyes");
                    }
                    else 
                    {
                        Console.WriteLine("\nYou Rolled...{0} and {1}", num1, num2);
                    }
                }
            } while (Again() == true);
            //Goodbye if you press 'n'
            Console.WriteLine("\n\nGoodBye");
            Console.ReadLine();

        }
        //the yes or no method asking if you want to play again
        //this is where I think the issue is but I dont see where or how....
        static bool Again()
        {
            char response;

            Console.Write("\n\nWould you like to roll the dice (y or n)? ");
            response = char.Parse(Console.ReadLine());
            response = char.ToLower(response);

            if (response == 'y')
                return true;
            else
                return false;
        }          

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T05:01:17.923

```
Again();

Random ran = new Random();

if (Again() == true)
{
    // ... 
```

在这里，您调用`Again()`了两次，这会导致它提示用户两次。你可以这样改变它：

```
bool rollAgain = Again();

Random ran = new Random();

if (rollAgain == true)
{
    // ... 
```

您在这里有类似的问题：

```
} while (Again() == true); 
```

要解决所有问题，您可能可以在语句`rollAgain`外部引入变量并将其分配在内部。`do-while`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T05:01:03.897

你打电话`Again`的次数太多了。改为执行以下操作：

```
Console.WriteLine("\t\t\tWelcome To a Game of Dice!");            
while (Again()) {
   Random ran = new Random();
   int num1 = ran.Next(1, 7);
   int num2 = ran.Next(1, 7);
   if (num1 == NUM_6 && num2 == NUM_6) { ... 
   else .. // the rest of your checking code here
} 
```

`Again`所以现在你每个循环只调用一次。如果您单步执行代码（包括单步执行`Again`），您应该能够看到发生了什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T05:13:26.763

您可以在这里使用while循环，并调用`Again`一次

```
while (Again())
{
    Random ran = new Random();
    int num1 = ran.Next(1, 7);
    int num2 = ran.Next(1, 7);
    //if else statement determining the output for each roll in the console.
    if (num1 == NUM_6 && num2 == NUM_6)
    {
        Console.WriteLine("\nYou Rolled BoxCars");
    }
    else if (num1 == NUM_1 && num2 == NUM_1)
    {
        Console.WriteLine("\nYou rolled Snake-Eyes");
    }
    else 
    {
        Console.WriteLine("\nYou Rolled...{0} and {1}", num1, num2);
    }
} 
```

# php - PHP 十六进制和二进制

> ID：11044802
> 
> 赞同：3
> 
> 时间：2012-06-15T04:56:35.827
> 
> 标签：php, binary, hex, crc16

我有以下格式的字符串：“0A1344010400010005”（十六进制表示）

我需要将此字符串转换为字节数组（0x0a、0x13、0x44 等），以便可以在以下函数中使用这些数据：

```
$data = $this->data;

    for ($i = 0; $i < sizeof($data); $i++) {

        // 1.value right shift 8 digits (equal to divide 256)
        // 2.XOR value and incoming data, then AND 0xFF
        // 3\. get an index£¨then search related index data in CRC16_TABLE
        // XOR again
        $this->value = ($this->value >> 8) ^ $this->arr[($this->value ^ $data[$i]) & 0xff];         

    } 
```

`$this->value`值为`0xFFFF`。`$this->arr`是一个包含元素的数组：`array(0x0000, 0x1189, 0x2312, 0x329b, 0x4624, 0x57ad, 0x6536, 0x74bf)`.

我做了以下事情。基本上，这会遍历字符串并将每 2 个字符分隔为每字节的十六进制表示并将它们转换为二进制字符串。

```
$data = array();
    $len = strlen($str);
    if($len % 2 == 1) $str = "0".$str;
    $len = strlen($str);
    for($i =0; $i < $len; $i=$i+2)
    {
        $data[] = hex2bin(substr($str,$i,2));
    }
    $this->data = $data; 
```

似乎它一直在生成值 0 的结果。有什么我应该做的吗？

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T07:03:34.807

`pack`可以将十六进制字符串转换为二进制字符串（字节 0x0a、0x13、0x44 等）：

```
$data = pack('H*', '0A1344010400010005'); 
```

之后，您所做的应该可以工作，只需稍作改动：`$data[$i]`实际上是一个字符串，并获取您需要的相应字节的值`ord`：

```
for ($i = 0; $i < strlen($data); $i++) {
    $this->value = ($this->value >> 8) ^ $this->arr[($this->value ^ ord($data[$i])) & 0xFF];         
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T05:08:53.193

hex2bin 返回一个二进制字符串，我认为你想要一个整数。使用 ord 将字符转换为 int

```
$data = array();
$len = strlen($str);
if($len % 2 == 1) $str = "0".$str;
$len = strlen($str);
for($i =0; $i < $len; $i=$i+2)
{
    $data[] = ord(hex2bin(substr($str,$i,2)));
}
$this->data = $data; 
```

# javascript - 什么在技术上更有效地匹配预期的字符串？

> ID：11044813
> 
> 赞同：-1
> 
> 时间：2012-06-15T04:59:05.847
> 
> 标签：javascript

什么更好？如果：

```
function a(){}; 
```

那么处理这个是否更快

```
if(typeof a == "function"){func(arg);} 
```

或这个？

```
if(!(typeof a).search("f")){func(arg);} 
```

我只是问这个，因为在我看来，匹配字符串的第一个符号比匹配整个字符串更容易，不是吗？有兴趣确定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T05:04:44.457

这是一个 jsPerf 测试[http://jsperf.com/typeof-test12](http://jsperf.com/typeof-test12)。

*   您的第一个代码块：`527,021,419`每秒操作数。
*   您的第二个代码块：`9,803,840`每秒操作数。

这是一个*巨大的差距（第一个比**我电脑上*的第二个快 54 倍）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T06:58:56.677

快一点（可能你已经想到了：

```
var a = function(){};
if( ( typeof a )[ 0 ] == 'f' ){a()}; 
```

但是下面的代码比上面的代码**快 20 倍**（chrome）：

```
var a = function(){};
if(  a.constructor == Function ){ a() }; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-15T05:03:41.330

你看起来不太对劲。`typeof a == "function"`是比较快的。

[http://jsperf.com/is-function-test](http://jsperf.com/is-function-test)

# java - 需要在java中迭代列表的逻辑

> ID：11044814
> 
> 赞同：0
> 
> 时间：2012-06-15T04:59:07.970
> 
> 标签：java, arraylist

我有一个清单

```
List < TempVO> lstTemp = new ArrayList < TempVO> (); 
```

`TempVO`是一个包含

```
zoneId,tempId and tempValue 
```

现在列表将包含如下所述的条目

```
zoneId tempId tempValue
-----------------------
 2 /     1    /  check    
 2   /    3     /check  
 2    /   4   /  check  
 2     /  4   /  entered1  
 3    /   5   /  check  
 3     /  8    / primary  
 3    /   6  /   check  
 3   /    8   /  check 
```

我的要求是`tempValue= check`从列表中删除该条目，如果它有 2 个相同的条目，`zoneId`并且`tempId` （即）我的新列表应该包含

```
zoneId tempId tempValue
-----------------------
 2 /     1    /  check    
 2   /    3     /check    
 2     /  4   /  entered1  
 3    /   5   /  check  
 3     /  8    / primary  
 3    /   6  /   check 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T05:03:02.197

实现一个`equals()`方法`TempVO`。

然后使用 a[`Set`](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)而不是`List`.

```
public class TempVO {
    private int zoneId;
    private int tempId;
    private String tempValue;

    // getters & setters

    public boolean equals(Object obj) {
        TempVO t = (TempVO) obj;
        if (zoneId != t.zoneId) {
            return false;
        }
        if (tempId != t.tempId) {
            return false;
        }
        if (tempValue == null) {
            return t.tempValue == null
        }
        return tempValue.equals(t.tempValue);
    }
}

Set<TempVO> tempSet = new HashSet<TempVO>();
// now add to the set; the set will automatically remove duplicates
tempSet.add(myTemp); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T05:06:50.620

实现 equals 和 set 是一种解决方案。

如果您只想要另一个数组列表，请使用以下命令：

```
List < TempVO> lstTemp = new ArrayList < TempVO> ();
List < TempVO> toBeRemoved = new ArrayList < TempVO> ();
for(TempVO temp : lstTemp) {
    if(condition) {
         toBeRemoved.add(temp);
    }
}
lstTemp.removeAll(toBeRemoved); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T05:10:16.530

创建一个辅助类如下

```
class ZoneTempHelper{
  private long zoneId;
  private long tempId;
  //implement equals() & hashCode() + accessor

} 
```

现在遍历列表，将条目按,`tempId`分组`zoneId``tempValues`

```
Map<ZoneTempHelper, List<String>> map = new HashMap<ZoneTempHelper, List<String>>();
for(TempVO tempVO: list){
   ZomeTempHelper helper = new ZoneTempHelper(tempVo.getTempID(), tempVO.getZoneId());
   List<String> tempValues = map.get(helper);
   if(tempValues == null){
        tempValues = new ArrayList<String>();
        map.put(helper, tempValues);
   }
   tempValues.add(tempVo.getTempVAlue());

} 
```

现在遍历`Map`以检查是否有多个相同`tempId`&`zoneId`具有值的条目`check`，如果是，则从`list`

```
for(ZoneTempHelper helper: map.keySet()){
   List<String> values = map.get(helper);
   if(values.size() == 2 && values .contains("check")){ 
      list.remove(new TempVo(helper.getTempId(), helper.getZoneId(), "check"))
   }
} 
```

确保您实施正确的`hashcode()`& `equals()`in`TempVo`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T05:42:03.223

我为你写了一些东西。我实现了 TempVO 类，并使用嵌套循环遍历了主函数（我的程序入口点）中的列表。如果 tempValue 是“检查”，我会检查每个 TempVO。如果是这样，我检查列表中是否有另一个具有相同 zoneId 和 tempId 的 TempVO。如果是这样，我不打印 TempVO。您可以在我的代码中关注它：

```
import java.util.ArrayList;
import java.util.List;
class TempVO {
    private int zoneId;
    private int tempId;
    private String tempValue;
    public TempVO(int zoneId, int tempId, String tempValue) {
        super();
        this.zoneId = zoneId;
        this.tempId = tempId;
        this.tempValue = tempValue;
    }
    public int getZoneId() {
        return zoneId;
    }
    public void setZoneId(int zoneId) {
        this.zoneId = zoneId;
    }
    public int getTempId() {
        return tempId;
    }
    public void setTempId(int tempId) {
        this.tempId = tempId;
    }
    public String getTempValue() {
        return tempValue;
    }
    public void setTempValue(String tempValue) {
        this.tempValue = tempValue;
    }
    @Override
    public String toString() {
    return "zonedId: " + this.zoneId + " | tempId: " + this.tempId + " | tempValue: " + this.tempValue;
    }
}
public class Main { 
    public static void main(String[] args) {
        // initialize list
        List<TempVO> tempVOs = new ArrayList<>();
        tempVOs.add(new TempVO(2, 1, "check"));
        tempVOs.add(new TempVO(2, 3, "check"));
        tempVOs.add(new TempVO(2, 4, "check"));
        tempVOs.add(new TempVO(2, 4, "enterd1"));
        tempVOs.add(new TempVO(3, 5, "check"));
        tempVOs.add(new TempVO(3, 8, "primary"));
        tempVOs.add(new TempVO(3, 6, "check"));
        tempVOs.add(new TempVO(3, 8, "check"));
        // only print values wherein interested
        for(int i = 0; i < tempVOs.size(); i++) {
            TempVO outerTempVO = tempVOs.get(i);
            boolean keep = true;
            if("check".equals(outerTempVO.getTempValue())) {
                for(int j = 0; j < tempVOs.size(); j++) {
                    if(i != j) {
                        TempVO innerTempVO = tempVOs.get(j);
                        if(outerTempVO.getTempId() == innerTempVO.getTempId() && outerTempVO.getZoneId() == innerTempVO.getZoneId()) {
                            keep = false;
                            break;
                        }
                    }
                }
            }
            if(keep)
                System.out.println(outerTempVO);
        }
    }
} 
```

# javascript - jQuery在单击时遍历数组

> ID：11044821
> 
> 赞同：2
> 
> 时间：2012-06-15T04:59:44.053
> 
> 标签：javascript, jquery, xml, ajax

我试图到处寻找解决方案，但我似乎无法理解如何正确完成。本质上，我有一个要从中提取数据的 XML。我希望页面加载第一个条目，一旦用户单击前进按钮，我希望它遍历 XML 直到它到达末尾。后退按钮也是如此。

```
 $(document).ready(function(){
        var name = [];
        var description = [];
        var html_screenshot_01 = [];
        var html_screenshot_02 = [];
        var site_link = [];
        var source_link = [];
        var demo_link = [];

        $.ajax({
            type: "GET",
            url: "projects_html.xml",
            dataType: "xml",
            success: function(xml) {
                $(xml).find('name').each(function(){ name.push($(this).text()); });
                $(xml).find('description').each(function(){ description.push($(this).text()); });
                $(xml).find('html_screenshot_01').each(function(){ html_screenshot_01.push($(this).text()); });
                $(xml).find('html_screenshot_02').each(function(){ html_screenshot_02.push($(this).text()); });
                $(xml).find('site_link').each(function(){ site_link.push($(this).text()); });
                $(xml).find('source_link').each(function(){ source_link.push($(this).text()); });
                $(xml).find('demo_link').each(function(){ demo_link.push($(this).text()); });                   

                $(xml).find('projects').each(function(){

                    $('#name').empty().append(name[0]);
                    $('#description').empty().append(description);
                    $("img#html_screenshot_01").attr("src", html_screenshot_01);
                    $("img#html_screenshot_02").attr("src", html_screenshot_02);
                    $("a#site_link").attr("src", site_link);
                    $("a#source_link").attr("src", source_link);
                    $("a#demo_link").attr("src", demo_link);    

                    $('a#site_link').filter(function() {return $.trim($(this).text()) === ''}).css("visibility", "hidden")
                    $('a#source_link').filter(function() {return $.trim($(this).text()) === ''}).css("visibility", "hidden")                    
                    $('a#demo_link').filter(function() {return $.trim($(this).text()) === ''}).css("visibility", "hidden")
                });
            }
        });
        $("#next").click(function() {
            var i = 0;
            i++;
            $('#name').empty().append(name[i]);
            return false;
        });
        $("#back").click(function() {
            alert('back');
        });
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T05:17:23.250

将您 `var i = 0;`移出下一次点击事件

```
.
.

var i = 0;
$("#next").click(function() {
.
.
. 
```

# javascript - javascript 在 IE 7 上运行

> ID：11044825
> 
> 赞同：0
> 
> 时间：2012-06-15T05:00:20.760
> 
> 标签：javascript, html

我像这样复制 Kevin S（本网站成员）的脚本

```
<table class="personid">
<tr>
    <td class='personid'>i</td>
    <td>Harry</td>
</tr>
<tr>
    <td class='personid'>i</td>
    <td>Simon</td>
</tr>
    <td class='personid'>i</td>
    <td>Maria</td>
</tr>
</tr>
    <td class='personid'>i</td>
    <td>Victory</td>
</tr>
</table>    
<script>
        var list = document.getElementsByClassName("personid");
    for (var i = 1; i <= list.length; i++) {
        list[i].innerHTML = i;
    }
    </script> 
```

我不知道为什么这个脚本可以在 Chrome 和 Firefox 中顺利运行，但它不能在 IE 7 中运行。我怎样才能使它可以在 IE 7 中解码。（在 IE7 中它只存在 i 而不是 1 2 3 4 5)

还有一个问题：当我删除标签表上的 class="personid"

```
 The result is i - 1 - 2 - 3 - 
```

当我在标签表上添加 class = "personid"

```
The result is 1 - 2 - 3 - 4 - 
```

为什么会这样？因为我认为脚本只是更改 td 具有 personid 类名的变量“i”。

感谢您的帮助，我还附上了我以前的帖子，我提出了一个新问题，因为它已经被忽略了。带来不便敬请谅解！

```
http://stackoverflow.com/questions/11026258/html-and-javascript-auto-increment-number 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T05:09:44.123

为了使循环按预期工作而`table`元素上也没有类“personid”，for 循环需要**从零开始**，而不是从一开始。

```
for (var i = 0; i <= list.length; i++) 
```

它`i=1`仅在`table`has时使用的原因`class="personid"`是因为 table 然后成为 getElementsByClassName 返回的集合中的第 0 个（第一个）元素，使您的循环从第二个（元素 1）开始，在这种情况下是第一个`td`。

有关您的其余答案，请参阅 wnwall 的帖子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T05:10:09.340

IE7 不支持`getElementsByClassName`，所以需要提供该功能。

见：[http ://robertnyman.com/2008/05/27/the-ultimate-getelementsbyclassname-anno-2008/](http://robertnyman.com/2008/05/27/the-ultimate-getelementsbyclassname-anno-2008/)

# java - 如何使清除按钮上的清除（空/无值）微调器

> ID：11044826
> 
> 赞同：6
> 
> 时间：2012-06-15T05:00:23.840
> 
> 标签：java, android, android-spinner

我在我的应用程序中使用微调器，所以我需要一个按钮重置。点击 clearButton 按钮微调器应该清除（不应该显示任何值）

```
spinner=  (Spinner) view.findViewById(R.id.mylistspinner);

list= new ArrayList<String>();

list.add("");

list.add("1");        
list.add("2");

adapter= new ArrayAdapter<String>(getActivity(),R.layout.custom_spinner_text,list);
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spinner.setAdapter(urineGlucoseAdapter);
        spinner.setOnItemSelectedListener(new OnUGItemSelected()); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-15T05:36:01.230

您可以通过两种方式单击按钮使用

```
 arr.clear();
 spinner.setAdapter(null); 
```

或者

```
 arr.clear();
 spinner.setAdapter(new ArrayAdapter<String>(YourActivity.this,android.R.layout.simple_dropdown_item_1line,arr)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-26T06:21:37.507

```
units = new String[0];
Arrays.fill(units, null);
Log.i("units array length", ""+units.length);
unit_adapter = new ArrayAdapter<String>(MyActivity.this, android.R.layout.simple_spinner_item, units);
spinner.setAdapter(unit_adapter);
// unit_adapter.notifyDataSetChanged(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T05:42:24.413

在按钮上单击执行此操作

```
list.clear();
adapter.notifyDataSetChanged(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T05:31:15.097

如果要删除所有微调器项目：

```
mySpinner.setAdapter(null); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-07-26T16:46:03.707

您可以调用`adapter.clear();`以从微调器中删除所有项目。然后再次传递一个数组列表以使用新值填充微调器。

# java - 使用 Lucene 计算平均文档长度

> ID：11044828
> 
> 赞同：0
> 
> 时间：2012-06-15T05:00:43.243
> 
> 标签：java, lucene, average

我想计算文档集合的平均文档长度，每个文档都有 3 个不同的字段（filed1，field2，field3）

这是当只有一个字段时计算平均长度的程序。

```
private byte[] normsDocLengthArr = null;
private double avgDocLength;
normsDocLengthArr = indexReader.norms("filed1");
            //norms-Returns the byte-encoded normalization factor for the named field of every document.
double sumLength = 0;

for (int i = 0; i < normsDocLengthArr.length; i++) {
    double encodeLength = DefaultSimilarity.decodeNorm(normsDocLengthArr[i]);
    //decodeNorm -Decodes a normalization factor stored in an index.
    double length = 1 / (encodeLength * encodeLength);

    sumLength += length;

}

this.avgDocLength = sumLength / normsDocLengthArr.length; 
```

这就是我将它扩展到所有 3 个字段的方式。

```
private byte[] normsDocLengthArrField1 = null;
private byte[] normsDocLengthArrField2 = null;
private byte[] normsDocLengthArrField3 = null;
private double avgDocLength;

normsDocLengthArrField1 = indexReader.norms("filed1");
normsDocLengthArrField2 = indexReader.norms("filed2");
normsDocLengthArrField3 = indexReader.norms("filed3");
            //norms-Returns the byte-encoded normalization factor for the named field of every document.
double sumLength = 0;

for (int i = 0; i < normsDocLengthArrField1.length; i++) {
    double encodeLengthF1 = DefaultSimilarity.decodeNorm(normsDocLengthArrField1[i]);
    double encodeLengthF2 = DefaultSimilarity.decodeNorm(normsDocLengthArrField2[i]);
    double encodeLengthF3 = DefaultSimilarity.decodeNorm(normsDocLengthArrField3[i]);

    //decodeNorm -Decodes a normalization factor stored in an index.
    double length = 1 / {(encodeLengthF1 * encodeLengthF1)+(encodeLengthF2 * encodeLengthF2)+(encodeLengthF3 * encodeLengthF3)};

    sumLength += length;

}

this.avgDocLength = sumLength / (normsDocLengthArrField1.length+ normsDocLengthArrField2.length+normsDocLengthArrField3.length; 
```

我只想知道我为 3 个字段计算 Doc 平均长度的实现是否正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T09:41:12.837

我发现这种方法是计算平均文档长度的正确方法，该文档具有 3 个带有 lucene 的字段。

```
byte[] normsDocLengthArrField1 = indexReader.norms("filed1");
byte[] normsDocLengthArrField2 = indexReader.norms("filed2");
byte[] normsDocLengthArrField3 = indexReader.norms("filed3");

 double sumLength = 0;
        for (int i = 0; i < normsDocLengthArrField1.length; i++) {
            double encodeLengthFOne = DefaultSimilarity.decodeNorm(normsDocLengthArrField1[i]);
            double encodeLengthFTwo = DefaultSimilarity.decodeNorm(normsDocLengthArrField2[i]);
            double encodeLengthFThree = DefaultSimilarity.decodeNorm(normsDocLengthArrField3[i]);

        //decodeNorm -Decodes a normalization factor stored in an index.
        double lengthFieldOne = 1 / (encodeLengthFOne * encodeLengthFOne);
        double lengthFieldTwo = 1 / (encodeLengthFTwo * encodeLengthFTwo);
        double lengthFieldThree = 1 / (encodeLengthFThree * encodeLengthFThree);
        sumLength += lengthFieldOne + lengthFieldTwo + lengthFieldThree;

    }
    this.avgDocLength = sumLength / (normsDocLengthArrField1.length); 
```

# asp.net - asp.net 中的 XML 文档错误

> ID：11044829
> 
> 赞同：0
> 
> 时间：2012-06-15T05:00:52.953
> 
> 标签：asp.net, xml

这是上传要验证的 XML 文档的代码。此代码在包含代码的行中给出了一些异常问题 `xmlDoc.Load(reader);`。

特定的异常消息是“用户代码未处理异常”。

```
 private void btnLoad_Click(object sender, System.EventArgs e)
   {
       XmlTextReader reader = new XmlTextReader(Server.MapPath("mycompany.xml"));

       reader.WhitespaceHandling = WhitespaceHandling.None;
       XmlDocument xmlDoc = new XmlDocument();
       //Load the file into the XmlDocument
       xmlDoc.Load(reader);
       //Close off the connection to the file.
       reader.Close();
       //Add and item representing the document to the listbox
       lbNodes.Items.Add("XML Document");
       //Find the root nede, and add it togather with its childeren
       XmlNode xnod = xmlDoc.DocumentElement;
       AddWithChildren(xnod,1);
   } 
```

# linux - 安装 MongoDB Hadoop 驱动程序时出错

> ID：11044834
> 
> 赞同：0
> 
> 时间：2012-06-15T05:01:21.097
> 
> 标签：linux, apache, mongodb, hadoop

我使用 Apache Hadoop 1.0.3，还安装了 mongoDB。我也安装了 SBT，但是当我安装 mongoDB Hadoop 驱动程序时，它给了我以下错误：

```
[root@linux ~]# cd /var/www/htdocs/hadoop/mongo-hadoop/
[root@linux mongo-hadoop]# sbt package
[info] Loading project definition from /var/www/htdocs/hadoop/mongo-hadoop/project
[info] Updating {file:/var/www/htdocs/hadoop/mongo-hadoop/project/}default-a7139c...
[info] Resolving com.eed3si9n#sbt-assembly;0.7.3 ...
[warn]  module not found: com.eed3si9n#sbt-assembly;0.7.3
[warn] ==== typesafe-ivy-releases: tried
[warn]   http://repo.typesafe.com/typesafe/ivy-releases/com.eed3si9n/sbt-assembly/scala_2.9.1/sbt_0.11.3/0.7.3/ivys/ivy.xml
[warn] ==== local: tried
[warn]   /root/.ivy2/local/com.eed3si9n/sbt-assembly/scala_2.9.1/sbt_0.11.3/0.7.3/ivys/ivy.xml
[warn] ==== sbt-plugin-releases: tried
[warn]   http://scalasbt.artifactoryonline.com/scalasbt/sbt-plugin-releases/com.eed3si9n/sbt-assembly/scala_2.9.1/sbt_0.11.3/0.7.3/ivys/ivy.xml
[warn] ==== public: tried
[warn]   http://repo1.maven.org/maven2/com/eed3si9n/sbt-assembly_2.9.1_0.11.3/0.7.3/sbt-assembly-0.7.3.pom
[info] Resolving net.virtual-void#sbt-dependency-graph;0.5.2 ...
[info] Resolving org.scala-sbt#sbt_2.9.1;0.11.3 ...
[info] Resolving org.scala-sbt#main_2.9.1;0.11.3 ...
[info] Resolving org.scala-sbt#actions_2.9.1;0.11.3 ...
[info] Resolving org.scala-sbt#classfile_2.9.1;0.11.3 ...
[info] Resolving org.scala-sbt#io_2.9.1;0.11.3 ...
[info] Resolving org.scala-sbt#control_2.9.1;0.11.3 ...
[info] Resolving org.scala-lang#scala-library;2.9.1 ...
[info] Resolving org.scala-sbt#interface;0.11.3 ...
[info] Resolving org.scala-sbt#logging_2.9.1;0.11.3 ...
[info] Resolving org.scala-sbt#process_2.9.1;0.11.3 ...
[info] Resolving org.scala-sbt#classpath_2.9.1;0.11.3 ...
[info] Resolving org.scala-sbt#launcher-interface_2.9.1;0.11.3 ...
[info] Resolving org.scala-lang#scala-compiler;2.9.1 ...
[info] Resolving org.scala-sbt#incremental-compiler_2.9.1;0.11.3 ...
[info] Resolving org.scala-sbt#collections_2.9.1;0.11.3 ...
[info] Resolving org.scala-sbt#api_2.9.1;0.11.3 ...
[info] Resolving org.scala-sbt#persist_2.9.1;0.11.3 ...
[info] Resolving org.scala-tools.sbinary#sbinary_2.9.0;0.4.0 ...
[info] Resolving org.scala-sbt#compile_2.9.1;0.11.3 ...
[info] Resolving org.scala-sbt#ivy_2.9.1;0.11.3 ...
[info] Resolving org.apache.ivy#ivy;2.2.0 ...
[info] Resolving com.jcraft#jsch;0.1.46 ...
[info] Resolving commons-httpclient#commons-httpclient;3.1 ...
[info] Resolving commons-logging#commons-logging;1.0.4 ...
[info] Resolving commons-codec#commons-codec;1.2 ...
[info] Resolving org.scala-sbt#completion_2.9.1;0.11.3 ...
[info] Resolving jline#jline;0.9.94 ...
[info] Resolving org.scala-sbt#run_2.9.1;0.11.3 ...
[info] Resolving org.scala-sbt#task-system_2.9.1;0.11.3 ...
[info] Resolving org.scala-sbt#tasks_2.9.1;0.11.3 ...
[info] Resolving org.scala-sbt#tracking_2.9.1;0.11.3 ...
[info] Resolving org.scala-sbt#cache_2.9.1;0.11.3 ...
[info] Resolving org.scala-sbt#testing_2.9.1;0.11.3 ...
[info] Resolving org.scala-tools.testing#test-interface;0.5 ...
[info] Resolving org.scala-sbt#compiler-interface;0.11.3 ...
[info] Resolving org.scala-sbt#precompiled-2_8_2;0.11.3 ...
[info] Resolving org.scala-sbt#precompiled-2_8_1;0.11.3 ...
[info] Resolving org.scala-sbt#precompiled-2_9_2;0.11.3 ...
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  ::          UNRESOLVED DEPENDENCIES         ::
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  :: com.eed3si9n#sbt-assembly;0.7.3: not found
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]
[warn]  Note: Some unresolved dependencies have extra attributes.  Check that these dependencies exist with the requested attributes.
[warn]          com.eed3si9n:sbt-assembly:0.7.3 (sbtVersion=0.11.3, scalaVersion=2.9.1)
[warn]
[error] {file:/var/www/htdocs/hadoop/mongo-hadoop/project/}default-a7139c/*:update: sbt.ResolveException: unresolved dependency: com.eed3si9n#sbt-assembly;0.7.3: not found
Project loading failed: (r)etry, (q)uit, (l)ast, or (i)gnore? 
```

我也尝试安装 sbt-assembly 但它给了我一个依赖错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T16:15:13.613

我也在 MongoDB Google Group 上回答了这个问题，但又来了。

我能够在运行 Ubuntu 12:04、x64 时重现您的问题。

从输出看，错误是由于无法找到 sbt-assembly07.3。AFAIK，sbt-assembly 插件的当前版本是 0.8.1，而在（您的情况）它配置为查找的 /var/www/htdocs/hadoop/mongo-hadoop/projects/plugins.sbt 文件是 0.7 .3.

我修改了我的等效 plugins.sbt 文件看起来像

```
addSbtPlugin("com.eed3si9n" % "sbt-assembly" % "0.8.1") 
```

然后 mongo-hadoop 驱动程序将成功安装（尽管确实需要一段时间 -> "[success] Total time: 849 s, completed 15-Jun-2012 17:10:15" ）。

更新：用户在 Google 网上论坛上确认这解决了他的问题。遵循[此处](http://www.mongodb.org/display/DOCS/Hadoop+Quick+Start#HadoopQuickStart-BuildingMongoDBAdapter)的快速入门指南解决了后来的问题（关于 JAR 文件） 。

# c# - 解析excel文件并读取单元格

> ID：11044835
> 
> 赞同：1
> 
> 时间：2012-06-15T05:01:21.260
> 
> 标签：c#, .net, console, console-application

我有一个excel文件。我已经上传了截图。我需要编写一个 .NET 应用程序（控制台应用程序）来解析 excel 文件。您可以看到一个标题为“函数名称”的单元格。我的 .NET 应用程序应该找到该特定单元格并读取该列中的内容，例如 Template、InstanceFromTemplate、Task 等。如果它读取Task，它应该调用像Task()这样的CreateTask函数；如果它读取 InstanceFromTemplate，它应该调用 InstanceFromTemplate 函数，如 TaskInstanceFromTemplate();

我已经为这些功能编写了代码。我只需要有关如何解析 excel 表、转到该特定列、读取该列下包含函数名称的单元格并调用该适当函数的帮助。任何帮助，将不胜感激。

算法就像

1.  打开excel文件
2.  搜索标题为 Function Name 的标题单元格
3.  读取标题单元格下的第一个单元格
4.  如果第一个单元格读取，调用函数（GetAllTemplate 函数的代码已经存在）只需要在找到它之后调用它
5.  如果是第二个单元格，则调用函数。
6.  到达标题单元格函数名称下的最后一个单元格。所以，退出

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T05:04:24.350

根据关于您尝试做什么的描述，您应该真正使用 LINQ to Ecxel 插件，我认为这是解决问题的简单方法

[http://code.google.com/p/linqtoexcel/](http://code.google.com/p/linqtoexcel/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-15T05:05:18.593

我强烈建议使用[Excel Data Reader](http://exceldatareader.codeplex.com/)之类的库并使用托管代码中的数据。CodePlex 网站有一个很好的例子来说明你需要做什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T05:05:15.520

这里有一些教程可以帮助您入门：

[http://csharp.net-informations.com/excel/csharp-excel-tutorial.htm](http://csharp.net-informations.com/excel/csharp-excel-tutorial.htm)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-08T10:25:05.563

额外注释以供将来参考。只是想指出，使用互操作是混乱的。你最好的选择是使用图书馆。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T06:22:31.517

使用 Excel 互操作，您可以这样做。我认为函数名称指向您的 excel 工作簿中定义的函数，否则您必须更改该部分以使用反射（但在这种情况下，您需要方法的接收器，而我没有看到在问题中）。

```
 object hmissing = System.Reflection.Missing.Value; 

        Xls.Application App = new Xls.ApplicationClass();
        App.Visible = true;
        Xls.Workbook wb = App.Workbooks.Open(@"c:\tmp\cartel1.xls", hmissing, hmissing, hmissing, hmissing, hmissing, hmissing,
            hmissing, hmissing, hmissing, hmissing, hmissing, hmissing, hmissing, hmissing);
        Xls.Worksheet ws = (Xls.Worksheet)wb.ActiveSheet;
        Xls.Range rng = ws.UsedRange;
        Xls.Range hdr = rng.Find("Function Name", hmissing, hmissing, hmissing, hmissing, Microsoft.Office.Interop.Excel.XlSearchDirection.xlNext, hmissing, hmissing, hmissing);
        string hdrAdd = hdr.get_Address(hmissing, hmissing, Microsoft.Office.Interop.Excel.XlReferenceStyle.xlA1, hmissing, hmissing);
        string[] pcs = hdrAdd.Split('$');
        string col = pcs[1];
        int row;
        int.TryParse(pcs[2], out row);
        string methName;
        row++;
        while ((methName = App.get_Range(col + row.ToString(), hmissing).get_Value(hmissing) as String) != null)
        {
            App.Run(methName.Split('.')[1], hmissing, hmissing, hmissing, hmissing, hmissing, hmissing, hmissing,
                hmissing, hmissing, hmissing, hmissing, hmissing, hmissing, hmissing, hmissing, hmissing, hmissing,
                hmissing, hmissing, hmissing, hmissing, hmissing, hmissing, hmissing, hmissing, hmissing, hmissing,
                hmissing, hmissing, hmissing);
            row++;
        } 
```

# php - 网站无法在 linode 中运行

> ID：11044836
> 
> 赞同：0
> 
> 时间：2012-06-15T05:01:26.120
> 
> 标签：php, codeigniter, mod-rewrite, url-rewriting, linode

我在 Linode 上获得了新的托管计划，并在其上安装了 ubuntu 10.04 LTS，并在其上托管了我的网站。我已经在codeigniter中创建了我的网站，但是linode中的链接不起作用我已经将我的网站上传到其他一些主机上并且它工作正常但是在linode上它没有从一个页面导航到另一个页面。我不知道是什么问题是。

这是我的 htascess 文件的代码-->

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /

    #Removes access to the system folder by users.
    #Additionally this will allow you to create a System.php controller,
    #previously this would not have been possible.
    #'system' can be replaced if you have renamed your system folder.
    RewriteCond %{REQUEST_URI} ^system.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #When your application folder isn't in the system folder
    #This snippet prevents user access to the application folder
    #Submitted by: Fabdrol
    #Rename 'application' to your applications folder name.
    RewriteCond %{REQUEST_URI} ^application.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #Checks to see if the user is attempting to access a valid file,
    #such as an image or css document, if this isn't true it sends the
    #request to index.php
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php?/$1 [L]
</IfModule>

<IfModule !mod_rewrite.c>
    # If we don't have mod_rewrite installed, all 404's
    # can be sent to index.php, and everything works as normal.
    # Submitted by: ElliotHaughin

    ErrorDocument 404 /index.php
</IfModule> 
```

请任何人帮助我。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T10:31:06.490

我可以看到您的 htaccess 的唯一问题是这样说的行：

```
RewriteRule ^(.*)$ index.php?/$1 [L] 
```

应该读：

```
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

希望能解决它。

您可以在此处查看建议的内容：http: [//codeigniter.com/user_guide/general/urls.html](http://codeigniter.com/user_guide/general/urls.html)

# android - Android：在按钮单击时放大 ImageView 的特定部分

> ID：11044843
> 
> 赞同：0
> 
> 时间：2012-06-15T05:02:08.437
> 
> 标签：android, zooming

我有一个 ImageView，图像下方有一堆按钮。我希望能够根据我按下的按钮来放大 ImageView 的特定部分！我是 Android 开发的新手，因此非常感谢您提供任何帮助。

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T05:05:56.677

`ImageView`是一个完整的视图，你要么完全操作它，要么什么都不做。在我看来，您可以做的是将图像切成“n^2”部分并将它们显示为 nXn 的网格，当用户按下按钮以增加网格大小时，然后将其切成 (n+1)^2 和然后是 (n+1)*(n+1) 的网格，依此类推。

**编辑：**

让我们有一个根 RelativeLayout 然后我们将有多个图像视图，如下所示

```
<RelativeLayout
   .....
   .....>
   <ImageView android:id="@+id/kitchen"
     .....
     .....
   />
   <ImageView android:id="@+id/bedroom"
     android:layout_toRightOf="@id/kitchen"
     .....
     .....
   />
   .....
   .....
   </RelativeLayout> 
```

# php - 关于下拉菜单单击按钮时将所选项目设为选中状态

> ID：11044848
> 
> 赞同：0
> 
> 时间：2012-06-15T05:02:57.080
> 
> 标签：php, html, css, database

我有一个名为 reg.php 的表单，它的操作是 reg.php，我希望单击提交时选择的下拉值保持选中状态，到目前为止我所做的如下所示

我检查了发布的问题，但无法将其与我的代码匹配

```
<?php
if( $_POST['registerbtn']){
$selected_value = $_POST['selectID'];
$query = mysql_query("SELECT  linecard_name FROM selection WHERE select_id = '$selected_value'");
$rows=mysql_fetch_assoc($query); 
$linecard_name= $rows['linecard_name'];
$sql = "SELECT select_id, linecard_name FROM selection " . "ORDER BY linecard_name";
$rs = mysql_query($sql);

while($rownw = mysql_fetch_array($rs)){
if(  $rownw['linecard_name'] == $linecard_name)  {
$options = "<option  selected =selected  value=".$rownw['select_id']."> " .$rownw['linecard_name']. " </option> ";
}
}
}

require("./connect.php");
$sql = "SELECT select_id, linecard_name FROM selection ". "ORDER BY linecard_name";
$rs = mysql_query($sql);
while($rownw = mysql_fetch_array($rs)){
$options .= "<option value = ".$rownw['select_id']." > ".$rownw['linecard_name']. " </option> ";
} 
mysql_close() ;

$form = "<form action='./reg.php'  method='post'> 
<table>
<tr>
<td>  </td>
<td>  <font color='red'> $errormsg </font> </td> 
</tr>

<tr>
<td> Select  Linecard </td> 
<td> <Select name='selectID' >  <option value = '0'>  Select  from here </option> $options  </select></td> 
</tr>

<tr> 
<td  > <input type='submit' name='registerbtn' value='Register' />   </td> 
</tr> 
</table> 
echo $form; 
```

单击注册按钮之前的选择语句用于填充数据库中的下拉列表，我只想在用户完成特定选择并单击注册按钮时保持选中的项目，在这种情况下，我的代码填充下拉列表再次但现在用户选择的项目被选中但没有清除下拉列表中先前填写的项目，即在单击注册按钮之前，请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T05:09:30.043

我发现用变量来做是最干净的，像这样：

```
while($rownw = mysql_fetch_array($rs)){
  $selected = '';
  if ($rownw['select_id'] == $selected_value){
    $selected = 'selected="selected"';
  }
  $options .= "<option value = ".$rownw['select_id']." $selected > ".$rownw['linecard_name']. " </option> ";
} 
```

# gnuplot - Gnuplot - 使用带有 png 终端的 replot

> ID：11044851
> 
> 赞同：13
> 
> 时间：2012-06-15T05:03:19.577
> 
> 标签：gnuplot

我正在尝试在 Gnuplot 中使用带有 png 终端的 replot。

如果我执行以下操作，我会在一张图上得到两个图，没有任何问题：

```
plot sin(x)/x
replot sin(x) 
```

现在，如果对 png 终端类型执行相同操作，则生成的 png 文件仅包含第一个图。

```
set terminal png
set output 'file.png'
plot sin(x)/x
replot sin(x) 
```

我最后是否遗漏了一些东西来获得我的 png 文件中的第二个图？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-15T12:00:17.153

这实际上是一个很好的问题，这里的行为是终端相关的。一些终端（例如 postscript）会给你一个新的页面`replot`。你有几个解决方案......

**第一个选项：**您可以在设置终端/输出之前进行绘图，然后在设置终端/输出后重新绘制：

```
plot sin(x)/x
replot sin(x)
set terminal png
set output 'file.png
replot 
```

如果你想在多个终端中绘制相同的东西，这个选项有时很方便，但我很少将它用于其他任何事情。

**第二个（更好的）选项：**您可以将多个图打包到一个命令中，每个命令用逗号分隔。

```
set terminal png
set output 'file.png'
plot sin(x)/x, sin(x) 
```

我非常喜欢第二种方式——在多图环境中，这是将多个图放在同一个图上的唯一方法。如果你有很长的函数要绘制，你可以用 gnuplot 的续行来换行（`\`在行的末尾——在 之后不允许任何内容`\`，甚至是空格）

```
plot sin(x)/x with lines linecolor rgb "blue" linetype 7 lineweight 4, \
     sin(x),                                                           \
     cos(x) 
```

# iphone - jQuery Mobile+ PhoneGap 拆分视图关于 Apple iPad 和 Galaxy 选项卡屏幕分辨率的问题

> ID：11044853
> 
> 赞同：0
> 
> 时间：2012-06-15T05:03:36.470
> 
> 标签：iphone, jquery-mobile, cordova, android

我已经**使用 jQuery mobile 开发了一个 Phone Gap 应用程序**。

我已经**`split view in jQuery mobile`**使用***asyraf9***的拆分视图插件实现了。

按照链接[https://github.com/asyraf9/jquery-mobile/](https://github.com/asyraf9/jquery-mobile/)

*`Split view works perfectly with two panes (left and right)`*在**苹果 iPad**中，

但在**Galaxy Tab**中。 *`split view not works it displays only the right panel`*.

有什么问题屏幕分辨率有什么不同吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T14:21:13.837

这是 splitview 库中的代码，用于检查浏览器是否应该启用 splitview：

```
var $query = $.mobile.media('screen and (min-width: 480px)') && ($.mobile.media('(-webkit-max-device-pixel-ratio: 1.2)') || $.mobile.media('(max--moz-device-pixel-ratio: 1.2)'));
$.support.splitview = ($query || ($.mobile.browser.ie && $(this).width() >= 480)) && $.mobile.ajaxEnabled; 
```

这是要求的文本描述（取自提交日志）：

> 应该启用 Ajax
> 
> Pixel to CSS 像素密度应低于 1.2，我们希望避免在高密度设备中出现拆分视图

您遇到的问题不在于分辨率（两个设备都显示至少 480 像素），而在于像素密度（与像素比相关）。

根据[维基百科](http://en.wikipedia.org/wiki/List_of_displays_by_pixel_density#Samsung)和你的描述，你的三星标签可能是一个旧的，像素比为 1.5，这意味着它不会启用拆分视图。

如果您不想要这种行为，请更改 jquery.mobile.splitview.js 中的代码以[将最大像素比从 1.2 提高到 2.2](http://zsprawl.com/iOS/2012/03/jquery-mobile-splitview-fix-for-the-new-ipad/)。

# c# - 剃须刀助手的自定义基本页面

> ID：11044865
> 
> 赞同：5
> 
> 时间：2012-06-15T05:04:37.077
> 
> 标签：c#, asp.net, razor, view-helpers

我有一个项目，其中有几个自定义属性和静态方法可用于 Razor 视图的基本 WebPage 类......即，我有......

```
 <system.web.webPages.razor>
    <pages pageBaseType="myNamespace.WebView">
    </pages>
  </system.web.webPages.razor> 
```

在我的 web.config 中。这很棒。但是，在我的帮助文件中，它使用现有的基类...

在这种情况下，如果我想访问其中一些方法/属性/等...我必须调用该`CurrentPage`对象，将其转换为我的自定义基类对象，然后获取我想要的方法。为了使助手中的标记更简单、更清晰，我只想定义一些静态属性来获取相关数据......

我已经用块内的一些静态方法和属性很好地完成了这一点`@functions{}`，但我想重写暴露该`CurrentPage`属性的基类，以便我在所有帮助文件中默认使用它，我不会不必重复代码...

看起来 HelperPage 实现了`WebPageRenderingBase`...

查看[RazorPagesSection 配置](http://msdn.microsoft.com/en-us/library/system.web.webpages.razor.configuration.razorpagessection.pagebasetype%28v=vs.99%29.aspx)的 MSDN 文档，看起来没有其他地方可以修改它...

我可以定义一个类似的 configSection 来覆盖 HelperPage 基本类型吗？？？这将非常有帮助。谢谢。

# wxpython - 在def中执行wx.Frame？

> ID：11044870
> 
> 赞同：0
> 
> 时间：2012-06-15T05:04:55.160
> 
> 标签：wxpython

我正在为 Linux 中的 Xboxdrv 包编写 GUI。我希望人们能够使用这个 GUI 将他们的 Xbox360、PS3 或任何其他类型的控制器配置为 Linux 中的鼠标、游戏手柄等。

我很好奇如何从 GUI 操作中调用函数。

例如，我单击一个我创建的菜单按钮，它调用存储在我的 wx.Frame 中的一个函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T05:42:08.487

如果我理解您的问题，您将创建一个菜单项，并且您想知道当用户单击它时如何执行该功能。

这很简单。你需要这个`self.Bind()`功能。看这个：

```
ID_MY_MENU_FUNCTION = wx.NewId() #declares a new, unique ID for my menu

class Frame(wx.Frame):
    def __init__(self, parent, idNum, title):
        wx.Frame.__init__(self, parent, idNum, title)

        menu = wx.Menu()
        menu.Append(ID_MY_MENU_FUNCTION, 'My Function') #add my function to the menu

        menu_bar = wx.MenuBar()
        menu_bar.Append(menu, 'My Menu') #add my menu to the menu bar

        self.SetMenuBar(menu_bar) #set the menu bar

        self.Bind(wx.EVT_MENU, self.myFunction, id=ID_My_MEN_FUNCTION) #run self.myFunction() when someone clicks the menu item

    def myFunction(event):
        #perform your function here 
```

调用`self.Bind()`设置`id`参数时很重要。这意味着`self.myFunction()`只有当`wx.EVT_MENU`具有与参数相同的 ID时才会被调用`id`。此外，每个菜单项都需要它自己的唯一 ID，否则您的应用程序将无法判断用户单击了哪个菜单项。

同样非常重要的是`self.Bind()`，在说要将事件绑定到您的哪个函数时包括`self`但不包括`()`。这就是我写的原因`self.myFunction`。

最后，注意我是如何定义我的`myFunctio(event)`. 这也很重要。当函数绑定到事件时，事件总是作为第一个参数传递给该函数。你需要能够处理这个问题。

[你可以在这里](http://wiki.wxpython.org/AnotherTutorial#wx.MenuBar)找到一个很好的教程。

祝你好运！

# javascript - 如何在 JQuery 中为子 div 自动生成 id

> ID：11044876
> 
> 赞同：2
> 
> 时间：2012-06-15T05:05:23.693
> 
> 标签：javascript, jquery, html, jquery-selectors

如何在 JQuery 中为子 div 自动生成 id。请帮助我，我可以解决问题。

有 html 代码我想为这些设置 id，所以我可以对这些应用操作。

```
<div id="main">

<div class="child"></div>
<div class="child"></div>
<div class="child"></div>
<div class="child"></div>
<div class="child"></div>
</div> 
```

![在此处输入图像描述](../Images/e03fb89d64283081cf14f0f7d6c5d2a8.png)

我想适合这个。当点击 + 时，它应该是完整 div 上的最大值，而当点击更少时，它应该再次位于相同的位置。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T05:08:59.467

如果您尝试创建新 div 并将其分配给它，一种可能的解决方案可能是：

```
<div id="parent">

</div>

for(var i = 0; i< 10; i++) { // suppose I append 10 divs to parent
  $('#parent')
        .append('<div id="myid_'+ i +'">child'+ i +'</div>');
} 
```

**[演示](http://jsfiddle.net/QStkd/219/)**

但是，如果您已经`div`在 parent 中有 child ，那么

```
<div id="parent">
  <div>child 1</div>
  <div>child 2</div>
  <div>child 3</div>
</div> 
```

那么一种可能的方法是

```
$('#parent div').each(function(i) {
   $(this).attr('id', 'myid_' + i);
}); 
```

### 根据编辑

```
<div id="main">
  <div class="child"></div>
  <div class="child"></div>
  <div class="child"></div>
  <div class="child"></div>
  <div class="child"></div>
</div>

 $('#main .child').each(function(i) {
    $(this).attr('id', 'myid_' + i);
 }); 
```

**[演示](http://jsfiddle.net/QStkd/217/)**

另一种方法是

```
$('#main .child').attr('id', function(i) {
   return 'myid_' + i;
}); 
```

**[演示](http://jsfiddle.net/QStkd/218/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T05:10:23.547

由于**live()**调用不支持**就绪**事件，因此无法自动执行此操作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T05:20:09.603

这将给出子 div 的 ID，例如`child-1`，`child-2`等等... child-n

```
$(function(){

   var childDivs=$("#main div");
   for(var i=0;i<childDivs.length;i++)
   {  
      $(childDivs[i]).attr("id","child-"+i);
   }        

}); 
```

示例： http: [//jsfiddle.net/nsQcR/12/](http://jsfiddle.net/nsQcR/12/) （您可以查看视图源以查看 ID）；

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-03T10:46:28.053

如果您希望`id`从数组中的散列中获取和其他信息，请遵循 codeparadox 对创建新 div 和分配值的响应：

`arry = [{name: name1, addr: addr1, id: id1}, {name: name2, addr: addr2, id: id2}, etc...]`

```
<div id="parent">
</div>

for(var i = 0, l = arry.length; i < l; i++) {
  var obj = arry[i]
  name = obj.name
  pid = obj.pid
  addr = obj.addr
  $('#parent').append('<div id=' + pid + '>' + name + ': ' + addr + '</div>');
}; 
```

# java - 在 liferay 门户中，如何将多会话限制为基本会话模式？

> ID：11044880
> 
> 赞同：1
> 
> 时间：2012-06-15T05:05:52.710
> 
> 标签：java, security, session, liferay, portlet

在liferay 门户中，默认启用多会话模式，如何更改为使用基本会话模式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T06:00:18.970

在 portal-ext.properties 中设置以下值

```
live.users.enabled=true
#
# Set the following to true if users are allowed to have simultaneous logins
# from different sessions. This property is not used unless the property
# "live.users.enabled" is set to true.
#
auth.simultaneous.logins=false 
```

# linux - 在 glnx86 64bit 中运行 MATLAB 时出现分段错误

> ID：11044884
> 
> 赞同：0
> 
> 时间：2012-06-15T05:06:04.220
> 
> 标签：linux, matlab, 64-bit

在运行带有 Intel Xeon 处理器的服务器的 ubuntu 平台上启动 Matlab 2011b 时遇到问题。

我用network lincese安装了这个版本的matlab，安装过程做得很好。（我希望如此，但没有额外的警告）。

当我在 /usr/local/MATLAB/R2011b/bin/glnx86 名称 MATLAB 中使用二进制文件启动 matlab

程序转储核心转储并收到 SIGSEGV。

我得到了使用 gdb 的回溯，如下所示。

> ```
> #0  0xb7feb2b6 in ?? () from /lib/ld-linux.so.2
> #1  0xb7ff0dba in ?? () from /lib/ld-linux.so.2
> #2  0xb7feccbf in ?? () from /lib/ld-linux.so.2
> #3  0xb7ff07e4 in ?? () from /lib/ld-linux.so.2
> #4  0xb70e6be9 in ?? () from /lib/i386-linux-gnu/libdl.so.2
> #5  0xb7feccbf in ?? () from /lib/ld-linux.so.2
> #6  0xb70e733a in ?? () from /lib/i386-linux-gnu/libdl.so.2        
> #7  0xb70e6c97 in dlopen () from /lib/i386-linux-gnu/libdl.so.2
> #8  0xb7f330e6 in utLoadLibrary () from /usr/local/MATLAB/R2011b/bin/glnx86/libut.so
> #9  0xb2b2a1bc in ?? () from /usr/local/MATLAB/R2011b/bin/glnx86/libmwbinder.so
> #10 0xb2b2a412 in Binder::_load_libs(std::vector<std::string,        
> std::allocator<std::string> > const&)
> () from /usr/local/MATLAB/R2011b/bin/glnx86/libmwbinder.so
> #11 0xb2b2bd48 in Binder::_load_and_resolve() ()
> from /usr/local/MATLAB/R2011b/bin/glnx86/libmwbinder.so
> #12 0xb2abf356 in ?? () from /usr/local/MATLAB/R2011b/bin/glnx86/libmwblas.so
> #13 0xb2abf484 in ?? () from /usr/local/MATLAB/R2011b/bin/glnx86/libmwblas.so
> #14 0xb2abfd5d in zdotu_ () from /usr/local/MATLAB/R2011b/bin/glnx86/libmwblas.so
> #15 0xb2ac23d0 in ?? () from /usr/local/MATLAB/R2011b/bin/glnx86/libmwblas.so
> #16 0xb2ab82d8 in _init () from /usr/local/MATLAB/R2011b/bin/glnx86/libmwblas.so
> #17 0xb7fece39 in ?? () from /lib/ld-linux.so.2
> #18 0xb7fecf84 in ?? () from /lib/ld-linux.so.2
> #19 0xb7fdf20f in ?? () from /lib/ld-linux.so.2
> ========================================================= 
> ```

任何意见？或帮助？

任何引起您注意的词将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T05:54:41.017

您不应直接从特定于体系结构的目录启动 MATLAB。尝试运行`/usr/local/MATLAB/R2011b/bin/matlab`。脚本执行一些初始化并且是平台感知的。需要初始化过程，因为 MATLAB 使用某些库的特定（旧）版本。

但是，如果您的问题仍然存在，我会联系 The Mathworks 的客户服务。

# javascript - 可以从文件上传输入中获取文件数据/val，并使用 Ajax 请求将其发送到服务器

> ID：11044885
> 
> 赞同：1
> 
> 时间：2012-06-15T05:06:06.017
> 
> 标签：javascript, jquery, asp.net-mvc, upload

基本上，在您单击浏览并选择文件后，会立即触发以下内容。

我只需要完成用户通过常规文件输入类型选择的文件的单个文件上传，我希望它在文件被选择并在后台异步完成后立即触发。

```
<input type="file" name="imagefile" size="20" />

$('input[type="file"]').change(function () {

    var $file = $(this).val();

    $.ajax({
        url: "/Admin/BannerImageUpload",
        type: 'POST',
        processData: false,
        contentType: false,
        data: { file: $file },
        success: function (data) {
            alert('Load was performed.');
        }

    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T06:26:23.513

假设客户端浏览器支持，您可以使用[HTML5 File API](https://developer.mozilla.org/en/Using_files_from_web_applications)异步上传文件。如果您想查看实现它的必要步骤，请查看我链接到的文档末尾的*示例：上传用户选择的文件部分。*

另一种可能性是使用现有的即用型 AJAX 文件上传组件，例如实现此功能的[Blueimp 。](https://github.com/blueimp/jQuery-File-Upload/)使用这种控件的优点是，如果浏览器不支持 HTML5，它将回退到标准上传机制。

# android - 在 android 中使用 asmack 从 google talk 获取个人资料图片

> ID：11044886
> 
> 赞同：3
> 
> 时间：2012-06-15T05:06:06.407
> 
> 标签：android, smack, avatar, asmack

我使用 asmack 连接 google talk (Android)。
我可以得到姓名，电子邮件。
我看了[这个链接](https://gist.github.com/1081548)。它`"http://profiles.google.com/s2/photos/profile/" + userid + "?sz=" + size;`用于谷歌谈话图像配置文件。

我如何获得用户ID `asmack`？
或者我可以做任何其他方式来获取谷歌谈话的个人资料图片？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T05:17:39.547

您可以使用`VCard`asmack 加载任何用户的详细信息，

> 从谷歌谈话获取个人资料图片？

```
VCard vCard = new VCard();
SmackConfiguration.setPacketReplyTimeout(300000);
ProviderManager.getInstance().addIQProvider("vCard", "vcard-temp",
                    new VCardProvider());
vCard.load(connection, user_mail_id);
Log.d("Vcard XML", vCard.toXML()); // complete VCard information
byte[] bs = vCard.getAvatar();   // Avtar in byte array convert it to Bitmap 
```

> 我如何在 asmack 中获取用户 ID？

您必须遍历名册条目以获取 user_mail_id，

```
Roster roster = connection.getRoster();
Collection<RosterEntry> rosterEntries = roster.getEntries();

for (RosterEntry entry : rosterEntries) {
   String user_mail_id = entry.getUser();
} 
```

# java - 使用 PKCS 7 加密

> ID：11044888
> 
> 赞同：0
> 
> 时间：2012-06-15T05:06:22.197
> 
> 标签：java, cryptography, openssl, keytool, pkcs#7

我需要使用`PKCS7(CMS)`. 我正在使用 bouncy castle 提供的 api 来使用 java 实现这一点。直到现在我明白的是我需要遵循这些步骤

1.  需要使用某种算法生成密钥对私钥和公钥`RSA`
2.  用`X509`证书证明它
3.  将其转换为`PKCS7`p7b 等密钥格式
4.  使用 keytool 一些`*.jks`文件生成 java 密钥库
5.  `Certificate Signing Request (CSR)`使用 keytool 命令生成`*.crt`
6.  成为自我`CA(Certificate Autority)`并证明
7.  从之前创建的密钥库中导入密钥并加密签名和解密数据

我仍然需要弄清楚我需要遵循哪些步骤来签署、加密、解密数据。
*我的问题是*

1.  我的步骤正确吗？
2.  如何验证 RSA 算法生成的密钥对并转换为 PKCS7 密钥格式
3.  我如何成为自我 CA 并进行认证
4.  我得到了[它](https://stackoverflow.com/questions/11026588/pkcs7-encryption)来加密和签名，但我仍然对要遵循的步骤感到困惑，而且其中大多数已被弃用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T05:39:43.207

你需要的不是`BouncyCastle`.

你需要`OpenSSL`一个向导。

1.  [OpenSSL](http://www.openssl.org/)

2.  [如何设置自己的证书颁发机构](http://www.dylanbeattie.net/docs/openssl_iis_ssl_howto.html)

3.  [如何创建自签名证书](http://www.akadia.com/services/ssh_test_certificate.html)

4.  [如何在 Java 中使用证书](https://stackoverflow.com/questions/3243018/how-to-load-rsa-private-key-from-file)

或者，要使用 Java 生成和存储 RSA 密钥：

[生成 RSA 密钥对并将私有编码为字符串](https://stackoverflow.com/questions/1709441/generate-rsa-key-pair-and-encode-private-as-string)

# sql - 如何让 ST_Overlap 返回单个真值或假值？

> ID：11044891
> 
> 赞同：0
> 
> 时间：2012-06-15T05:06:53.643
> 
> 标签：sql, postgresql, geospatial, postgis

我想知道`polygon1.the_geom`和之间是否有任何重叠`polygon2.the_geom`。但是，我不想知道每个实例是否有重叠。相反，如果 中的任何地方只有一个重叠`ST_Overlap`，我希望返回一个值，即“真”。如果没有发生重叠，那么我只希望返回一个“false”值。我知道，使用`ST_Union`组合结果对布尔值不起作用。但是，我需要将查询结果缩小到一行。

```
SELECT ST_Overlaps(polygon1.the_geom, polygon2.the_geom) from polygon1, polygon2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T05:25:40.227

我对 PostGIS 不太熟悉，但您应该可以加入`ST_Overlaps(...)`并查看是否有任何收获：

```
select exists(
    select 1
    from polygon1
    join polygon2 on ST_Overlaps(polygon1.the_geom, polygon2.the_geom)
) 
```

JOIN 条件比大多数人想象的更通用。

# c++ - 关于处理超过 1024 个套接字描述符

> ID：11044894
> 
> 赞同：3
> 
> 时间：2012-06-15T05:07:48.980
> 
> 标签：c++, c, linux, linux-kernel, socketserver

我在 Linux 上使用 C 编写了一个聊天服务器。我已经测试过同样的东西，它在性能方面工作得很好。唯一滞后的是我正在使用 select 系统调用来处理套接字描述符。由于 select 的限制为 1024，因此我的聊天服务器最多只能同时处理 1024 个用户。

我知道我可以使用的另一个选项是 poll，但与 select 相比，我不太确定它及其性能。

请建议我解决这种情况的最有效方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T05:52:37.000

`poll()`几乎可以用作 的替代品`select()`，并且允许您超过 1024 个文件描述符（您可以使数组传递到`poll()`您想要的任意大小）。

它将具有与 类似的性能特征`select()`，因为两者都需要内核和用户空间应用程序来扫描整个阵列 - 但如果`select()`对您来说工作正常，那么`poll()`也应该这样做。（实际上，性能略有提高`poll()`-`.events`为每个文件描述符指定您感兴趣的事件的字段不会被更改`poll()`，因此您不必像使用文件描述符那样在每次调用之前重建数组集传递给`select()`)。

如果您稍后发现自己因扫描 poll 文件描述符数组而导致性能问题，您可以考虑切换到该`epoll`接口，该接口更复杂，但在文件描述符数量非常多的情况下也可以更好地扩展。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T05:46:46.777

您的问题被称为[C10K 问题](http://en.wikipedia.org/wiki/C10k_problem)（如何处理超过 1 万个同时连接）。你会在网上找到很多资源，例如[这个](http://www.kegel.com/c10k.html)。

您应该将`select`其视为过时的系统调用。即使只有几十个文件描述符，您至少应该更喜欢[poll](http://linux.die.net/man/2/poll)

请注意，Qt 和 Gtk 为您提供了一个事件循环机制，经常使用`poll`（并且 QtCore 或 Glib 可以在*图形*界面之外使用）。还有[libev](http://software.schmorp.de/pkg/libev.html)和[libevent](http://libevent.org/)。我建议使用其中之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T05:52:18.867

Linux 对 select() 没有 1024 个限制。但：

1.  select() 性能很差
2.  FreeBSD 可以 :)

您可以使用 poll()。但是当活动连接的数量增加时，它的性能会受到影响。

在 Linux 上使用 epoll() 更可取，但我建议使用[libevent](http://libevent.org)

libevent 是实现重负载服务器的快速、干净和可移植的方式，对于 linux，它在引擎盖下具有 epoll。

# php - 为什么我的 .ajax 请求不起作用？

> ID：11044897
> 
> 赞同：2
> 
> 时间：2012-06-15T05:08:03.130
> 
> 标签：php, jquery, ajax

我想要工作的代码：

```
 $.ajax({
        type: "POST",
        url: "_Source/ajap/ajap.nlSrch.php",
        data: { sndJson : jsonData },
        dataType: "json", 
        processData: false,
        success: function(html) {
      $("#srchFrm").append(html);}
    }); 
```

有效的代码：

```
 $.ajax({
        type: "POST",
        url: "_Source/ajap/ajap.nlSrch.php",
        data: { sndJson : jsonData },
        success: function(html) {
      $("#srchFrm").append(html);}
    }); 
```

不幸的是，当我发送第一个数据时，我的帖子数据看起来像这样“Array ()”，而当我使用后者时，我得到了这个“Array ([sndJson] => [\"8\",\"3\",\" 6\",\"7\"])"。

我知道必须有一个简单的解释，但我无法弄清楚。

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T05:19:40.900

尝试在查询字符串中发送您的数据...

```
$.ajax({
        type:"POST",
        url:"_Source/ajap/ajap.nlSrch.php?json="+jsonData,
        dataType:"json", 
        success: function(data) {
              $("#srchFrm").append(data);}
        error: function(xhr, ajaxOptions, thrownError)
        {alert("Error!");}
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T06:21:59.787

您可以使用简写 $.post 而不是使用低级 ajax 类 --- 因为您不需要高级处理。所以，这个就足够了。

```
$(document.ready(function(){    
  $("#submit_button").click(function(){     
    $.post('php_script.php', {
     // here's what you want to send  
     // important -- double quotes, 'cause It's evals as valid JSON
     "var1" : "val1"  
     "var2" : "val2"    
    }, function (respond){
       try {
           var respond = JSON.parse(respond);
        } catch(e){
           //error - respond wasn't JSON
        }
    });  
  });
}); 
```

PHP代码：

```
<?php
/**
 * Here you can handle variable or array you got from JavaScript
 * and send back if need.
 */ 
 print_r($_POST); // var1 = val1, var2 = val2 
```

?>

回到您的问题， **为什么我的 .ajax 请求不起作用？** 这是因为 JavaScript 抛出致命错误并停止进一步的代码执行。

您可以捕获并确定错误时机，只需添加

`try {} catch(){}`阻止您认为可能出现任何错误的语句

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T05:13:34.890

当您指定 dataType: json 时，jQuery 将自动评估响应并返回一个 Javascript 对象，在本例中是一个数组。您正在获取结果并将其作为 html 添加到#srchForm，因此将其转换为 javascript 对象是没有意义的。使用 dataType: html，或者根本不使用。

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-16T15:25:27.977

上面的以下示例不可重复使用。我是可重用代码的忠实粉丝。这是我的解决方案。

软件设计 101：
DRY 不要重复你自己。您应该将代码包装到一个对象中。这样你就可以从任何地方调用它。

```
var Request = {
    version: 1.0, //not needed but i like versioning things
    xproxy: function(type, url, data, callback, timeout, headers, contentType) 
    {
        if (!timeout || timeout <= 0) { timeout = 15000; }
        $.ajax(
        {
            url: url,
            type: type,
            data: data,
            timeout: timeout,
            contentType: contentType,
            success:function(data) 
            {
                if (callback != undefined) { callback(data); }
            },
            error:function(data) 
            {
                if (callback != undefined) { callback(data); }
            }, 
            beforeSend: function(xhr)
            {
                //headers is a list with two items
                if(headers)
                {
                    xhr.setRequestHeader('secret-key', headers[0]);
                    xhr.setRequestHeader('api-key', headers[1]);
                }
            }
        });
    }
}; 
```

用法：

```
<script type="text/javascript">
var contentType = "applicaiton/json";
var url = "http://api.lastfm.com/get/data/";
var timeout = 1000*5; //five seconds
var requestType = "POST"; //GET, POST, DELETE, PUT

var header = [];
header.push("unique-guid");
header.push("23903820983");

var data = "{\"username\":\"james\"}"; //you should really deserialize this w/ a function
function callback(data)
{
   //do logic here
}
Request.xproxy(requestType, url, data, callback, timeout, header, contentType);
</script> 
```

# amazon-web-services - Amazon S3 和 Amazon EBS 之间的主要区别是什么

> ID：11044898
> 
> 赞同：8
> 
> 时间：2012-06-15T05:08:08.793
> 
> 标签：amazon-web-services, amazon-s3

对于网站/应用程序和电子商务，哪种存储解决方案更理想，为什么？

我对亚马逊云服务很陌生，我需要一些指导。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T08:38:00.860

S3喜欢网络存储，可以用web api访问，ebs喜欢硬盘，可以在你的ec2中访问，也可以看， [http://www.differencebetween.net/technology/internet/difference-between-amazon-s3 -和-亚马逊-ebs/](http://www.differencebetween.net/technology/internet/difference-between-amazon-s3-and-amazon-ebs/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-20T03:55:52.960

EBS 用于事务数据，S3 用于其他所有数据。在 EBS 中，您可以拥有我们使用数据库访问等时需要的静态 IP。

# java - Java：如何在按钮事件上调用参数化构造函数的对象

> ID：11044901
> 
> 赞同：0
> 
> 时间：2012-06-15T05:08:25.700
> 
> 标签：java, swing, jframe

我有一个程序 PrintUI.java，它创建一个包含用户详细信息和一个打印按钮的框架。单击打印按钮，它会从该框架中打印出来。现在我想在另一个表单的打印按钮上调用这个程序，即test.java。

PrintUI.java 的代码是：

```
 public PrintUI(JFrame f) 
 {
    frameToPrint = f;
    //f.setVisible(true);
 } 
```

我在 test.java 中的按钮事件上调用这个对象

test.java 的代码是：

```
 Print.addActionListener(new ActionListener()
    {
        public void actionPerformed(ActionEvent e)
        {
            PrintUI p1=new PrintUI(f); 
            f.setVisible(true);
        } 

    }); 
```

它没有给出错误，但它没有显示任何内容。请帮我重新编码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T05:11:45.567

你的框架不可见，所以调用框架方法`setVisible`（）`

```
frame.setVisible(true); 
```

# wordpress - 无法修改wordpress中的标题信息

> ID：11044902
> 
> 赞同：0
> 
> 时间：2012-06-15T05:08:37.423
> 
> 标签：wordpress, header, location

我在警告无法修改 wordpress 中的标题信息时遇到问题：无法修改标题信息 - 标题已发送（输出开始于 /home/sixtydev/public_html/voxxydev/wp-content/themes/voxxy/header.php:15）在第 865 行的 /home/sixtydev/public_html/voxxydev/wp-includes/pluggable.php

我的重定向代码是：

```
if(isset($_GET['qry'])  && !empty($_GET['qry'])){
    $swl = mysql_query("update wp_share_idea set image".$_GET['qry']."='' where userId='".$delId."'");

    wp_redirect("http://60degreedeveloper.info/voxxydev/user-profile/?msg='".$delId."'");
    exit;

} 
```

我的 header.php 代码：

```
<?php
/**
 * The Header for our theme.
 *
 * Displays all of the <head> section and everything up till <div id="main">
 *
 * @package WordPress
 * @subpackage Voxxy
 * @since Voxxy 1.0
 */
?><html>
<head>
<title>Voxxy</title>
<link rel="profile" href="http://gmpg.org/xfn/11"/>
line no: 15:: <link rel="stylesheet" type="text/css" media="all" href="<?php bloginfo('stylesheet_url');?>"/>
<link rel="pingback" href="<?php bloginfo( 'pingback_url' ); ?>"/> 
```

和plugable.php 代码：

```
function wp_redirect($location, $status = 302) {
    global $is_IIS;

    $location = apply_filters('wp_redirect', $location, $status);
    $status = apply_filters('wp_redirect_status', $status, $location);

    if ( !$location ) // allows the wp_redirect filter to cancel a redirect
        return false;

    $location = wp_sanitize_redirect($location);

    if ( !$is_IIS && php_sapi_name() != 'cgi-fcgi' )
        status_header($status); // This causes problems on IIS and some FastCGI setups
line no:865:-   header("Location: $location", true, $status);
} 
```

我很困惑，问题出在哪里。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T05:17:07.517

`wp_redirect`只有当它是在 Wordpress 中生成输出的第一件事时才会起作用。它通过在输出中设置 http 标头来工作。一旦其他东西产生了一些输出，该方法就不再有效。

在您的情况下，无论您在哪里调用 pluggable.php 中的重定向代码，都会在调用之后发生`get_header()`。

您要么必须在调用标头之前移动此代码，要么使用 javascript 函数来重定向用户。

`update`您还应该永远不要对未经处理的 $_GET 变量在数据库上运行查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T01:25:36.390

如果您更改`bloginfo( 'stylesheet_uri' )`为`print get_stylesheet_directory_uri()`and 会发生什么`bloginfo( 'pingback_url' )` `to print get_bloginfo( 'pingback_url' )`；?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-22T22:07:37.543

```
$status = apply_filters( 'wp_redirect_status', $status, $location );

    if ( ! $location )
        return false;

    $location = wp_sanitize_redirect($location);

    if ( !$is_IIS && php_sapi_name() != 'cgi-fcgi' )
        status_header($status); // This causes problems on IIS and some FastCGI setups

    header("Location: $location", true, $status);

    return true;
}
endif; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T05:27:04.110

如果@cpilko 解决方案不起作用（他可能完全正确）但是 -

关于 PHP 文件本身，wordpress 存在一个已知问题。您需要确保在开始`<?php`标记之前没有空字符/空格/回车符，在结束标记之后没有`?>`

您需要检查所有主题文件和所有插件。

关于结束标签`?>` - 您需要确保它存在（是的，一些插件开发人员忽略了这一点）

在这里阅读更多：http: [//codex.wordpress.org/Answers-Troubleshooting#Headers_already_sent](http://codex.wordpress.org/Answers-Troubleshooting#Headers_already_sent)

在 99% 的情况下 - 这是罪魁祸首。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-12-09T11:21:56.017

试试 ob_start(); 在根文件 wp_config.php 的顶部

# sql-server-2008 - 我们如何将主键创建为十进制数据类型，并且可以自动递增

> ID：11044906
> 
> 赞同：0
> 
> 时间：2012-06-15T05:08:56.267
> 
> 标签：sql-server-2008, primary-key

在我的数据库中，我们有一个超出 int 最大值的字段，我可以选择 bigint 作为主键，但我想知道我们可以使用小数（2,18）作为主键吗？如果可以，我们如何自动递增该字段？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T05:14:46.990

您可能有一个小数作为主键，但它的小数位数必须为 0。SQL
Server 将处理自动递增。
例子：

```
CREATE TABLE my_table (
     id decimal(18,0) identity primary key, 
     some_column varchar(200)
); 
```

参考： [http ://beyondrelational.com/modules/2/blogs/28/posts/10331/sql-server-what-are-the-data-types-supported-in-identity-columns.aspx](http://beyondrelational.com/modules/2/blogs/28/posts/10331/sql-server-what-are-the-data-types-supported-in-identity-columns.aspx)

在此处查看您的总体规划： [http ://sqlfiddle.com/#!3/e491d/1/0](http://sqlfiddle.com/#!3/e491d/1/0)

# php - $_FILES["文件"]["tmp_name"]

> ID：11044907
> 
> 赞同：1
> 
> 时间：2012-06-15T05:08:57.750
> 
> 标签：php, file-upload

我使用文件上传表单将文件上传到我的服务器。然后我`echo $_FILES["file"]["tmp_name"]`，但它返回给我一个似乎不存在的位置。例如 /tmp/phpBparj4 是输出，但我的 /tmp 文件夹中没有这样的文件/文件夹。我还检查了文件夹的适当权限

我真正关心的`move_uploaded_file($_FILES["file"]["tmp_name"],$target);`是没有将上传的文件移动到目标位置。我也试过`move_uploaded_file($_FILES["file"]["tmp_name"].$file_name,$target);`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T06:20:51.910

我不确定我是否理解正确，但为什么不能指定文件夹位置？IE”

```
//set the right path from the server perspective
$article_file_path = $_SERVER['DOCUMENT_ROOT'];

// you should check for the file if it is/ or not already there (something like this)
if (!file_exists($article_file_path ."/your_folder/file_subfolder/". $_FILES["my_file"]["name"]))
      { do something.....

// then make your script upload the file exactly where you want it
move_uploaded_file($_FILES["my_file"]["tmp_name"],          
      $article_file_path ."/your_folder/file_subfolder/".$_FILES["my_file"]["name"]);

// and the download link to the uploaded file would be something like this:
echo "http://". $_SERVER["HTTP_HOST"] . "/files-article/".$_FILES["my_file"]["name"]"; 
```

# javascript - javascript浏览器兼容性问题

> ID：11044910
> 
> 赞同：0
> 
> 时间：2012-06-15T05:09:07.963
> 
> 标签：javascript, javascript-events

这是我关于堆栈溢出的第一个问题。我的 javascript 函数有问题。

下面是我的 js 代码：

```
function abc(formobject){
    var ext =".txt";
         var abc=".doc,docx";
    if(abc.search(ext) < 0){
        alert("hi"); 
        formobject.file.value="";
        return false;
    }
    return true;
}

<input type="submit" id="button"  value="submit" onclick="return abc(this.form);"> 
```

在这里单击提交按钮正在调用 abc() js 函数并上传文件。它执行逻辑，如果文件的扩展名无效，它应该发出警报并清除浏览按钮的值。它发生在 mozilla 中。但是IE8 中的值没有被清除。任何人都可以帮助我吗？

文件是这里上传的谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T05:59:21.937

我假设您的表单中只有“浏览”字段。

由于安全限制，无法访问文件输入标签的值字段。更多信息请访问[http://blogs.msdn.com/b/ie/archive/2008/07/02/ie8-security-part-v-comprehensive-protection.aspx](http://blogs.msdn.com/b/ie/archive/2008/07/02/ie8-security-part-v-comprehensive-protection.aspx)

如果您只想清除文件字段，那么您必须在文件字段之前添加一个 div 标签并清除它。

例子：-

```
<html>
<head>
<script type="text/javascript">
function abc(formobject){     
var ext =".txt";          
var abc=".doc,docx";     
if(abc.search(ext) < 0){         
alert("hi");          
document.getElementById('uploadFile_div').innerHTML = 
                    document.getElementById('uploadFile_div').innerHTML;

return false;     
}     
return true; 
} 

</script>
</head>
<body>
<form name="theForm">
<div id="uploadFile_div">
<INPUT NAME="file" TYPE="file">
</div>
<input type="submit" id="button"  value="submit" onclick="return abc(this.form);">

</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T05:25:08.597

代替

```
formobject.file.value=""; 
```

尝试使用

```
formobject.reset(); 
```

希望这可以帮助。

# c# - 使用 C# 创建动态复选框列表

> ID：11044912
> 
> 赞同：0
> 
> 时间：2012-06-15T05:09:26.440
> 
> 标签：c#, wpf, dynamic, checkbox, highlight

我正在尝试为我的大学的学位计划创建一个课程列表，当检查已上过的课程时，另一个课程会突出显示，以让用户知道该课程已满足所有先决条件。所以如果我检查微积分 1，物理 1 将被突出显示。

我是 C# 的新手，我对语言和 .NET 框架可以做什么没有深入的了解，所以我要求一个很好的简单直接的答案，如果你能准确地解释代码中发生的事情，那就太棒了。谢谢

继承人我到目前为止。只是概念 WPF 的基本证明

```
<Window x:Class="degree_plan.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Degree Planner" Height="350" Width="525" Name="Degree">
    <Grid>
        <CheckBox Content="Math 1412" Height="16" HorizontalAlignment="Left" Margin="34,40,0,0" Name="checkBox1" VerticalAlignment="Top" />
        <CheckBox Content="Physics 1911" Height="16" HorizontalAlignment="Left" Margin="34,62,0,0" Name="checkBox2" VerticalAlignment="Top" />
    </Grid>
</Window> 
```

这是c#代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation; 
using System.Windows.Shapes;

namespace degree_plan
   {
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
   public partial class MainWindow : Window
   {
      public MainWindow()
      {
        InitializeComponent();

       // if (checkBox1.Checked)
         //   Console.WriteLine("physics 1");

    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T08:36:34.137

我知道你要求简单，但在某些时候你可以回到这个，因为它是一种非常结构化和可扩展的方式来保存和使用 WPF 中的数据

我会考虑以自己的结构量化这些类，每个类都有一个必须事先完成的先决条件类的列表，我建议使用以下内容来实现你所追求的（对不起，有点长！）

您将得到一个由复选框表示的类列表，您只能在其所有必备类都完成后检查一个类，它们具有名称和描述，并且可以在 UI 上以任何您想要的方式进行自定义。

创建一个新的 WPF 应用程序并添加以下类。类.cs

```
public class Class : Control, INotifyPropertyChanged
{
    // Property that's raised to let other clases know when a property has changed.
    public event PropertyChangedEventHandler PropertyChanged;

    // Flags to show what's going on with this class.
    bool isClassComplete;
    bool isPreComplete;

    // Some other info about the class.
    public string ClassName { get; set; }
    public string Description { get; set; }

    // A list of prerequisite classes to this one.
    List<Class> prerequisites;

    // public property access to the complete class, you can only set it to true
    // if the prerequisite classes are all complete.
    public bool IsClassComplete
    {
        get { return isClassComplete; }
        set
        {
            if (isPreComplete)
                isClassComplete = value;
            else
                if (value)
                    throw new Exception("Class can't be complete, pre isn't complete");
                else
                    isClassComplete = value;

            PropertyChangedEventHandler temp = PropertyChanged;
            if (temp != null)
                temp(this, new PropertyChangedEventArgs("IsClassComplete"));
        }
    }

    // public readonly property access to the complete flag.
    public bool IsPreComplete { get { return isPreComplete; } }

    public Class()
    {
        prerequisites = new List<Class>();
        isPreComplete = true;
    }

    // adds a class to the prerequisites list.
    public void AddPre(Class preClass)
    {
        prerequisites.Add(preClass);
        preClass.PropertyChanged += new PropertyChangedEventHandler(preClass_PropertyChanged);
        ValidatePre();
    }

    // removes a class from the prerequisites lists.
    public void RemovePre(Class preClass)
    {
        prerequisites.Remove(preClass);
        preClass.PropertyChanged -= new PropertyChangedEventHandler(preClass_PropertyChanged);
        ValidatePre();
    }

    // each time a property changes on one of the prerequisite classes this is run.
    void preClass_PropertyChanged(object sender, PropertyChangedEventArgs e)
    {
        switch (e.PropertyName)
        {
            case "IsClassComplete":

                // check to see if all prerequisite classes are complete/
                ValidatePre();
                break;
        }
    }

    void ValidatePre()
    {
        if (prerequisites.Count > 0)
        {
            bool prerequisitesComplete = true;
            for (int i = 0; i < prerequisites.Count; i++)
                prerequisitesComplete &= prerequisites[i].isClassComplete;
            isPreComplete = prerequisitesComplete;
            if (!isPreComplete)
                IsClassComplete = false;
        }
        else
            isPreComplete = true;

        PropertyChangedEventHandler temp = PropertyChanged;
        if (temp != null)
            temp(this, new PropertyChangedEventArgs("IsPreComplete"));
    }
} 
```

现在在 MainWindow.cs 后面的代码中，您可以创建一个类的集合，我在构造函数中完成了这项工作并提供了一个可观察的类集合，因此当添加新类时，您无需执行任何操作来获取它们在 UI 上显示

```
/// <summary>
/// Interaction logic for MainWindow.xaml
/// </summary>
public partial class MainWindow : Window
{
    public ObservableCollection<Class> Classes
    {
        get { return (ObservableCollection<Class>)GetValue(ClassesProperty); }
        set { SetValue(ClassesProperty, value); }
    }
    public static readonly DependencyProperty ClassesProperty = DependencyProperty.Register("Classes", typeof(ObservableCollection<Class>), typeof(MainWindow), new UIPropertyMetadata(null));

    public MainWindow()
    {
        InitializeComponent();

        Class math = new Class()
        {
            ClassName = "Math 1412",
            Description = ""
        };

        Class physics = new Class()
        {
            ClassName = "Physics 1911",
            Description = "Everything everywhere anywhen",
        };
        physics.AddPre(math);
        Classes = new ObservableCollection<Class>();
        Classes.Add(math);
        Classes.Add(physics);
    }
} 
```

最后一步是告诉 WPF 一个类在用户界面上应该是什么样子，这是在资源中完成的，为了简化示例，我将它放在 MainWindow.xaml 文件中。

```
<Window x:Class="WpfApplication8.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfApplication8"
        DataContext="{Binding RelativeSource={RelativeSource Self}}"
        Title="MainWindow" Height="350" Width="525">

    <Window.Resources>
        <!-- This tells WPF what a class looks like -->
        <Style TargetType="{x:Type local:Class}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type local:Class}">
                        <StackPanel Orientation="Horizontal" DataContext="{Binding RelativeSource={RelativeSource TemplatedParent}}">
                            <!-- Checkbox and a text label. -->
                            <CheckBox  IsEnabled="{Binding IsPreComplete}" IsChecked="{Binding IsClassComplete}" />
                            <TextBlock Margin="5,0,0,0" Text="{Binding ClassName}" ToolTip="{Binding Description}"/>
                        </StackPanel>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Grid>
        <!-- This draws the list of classes from the property in MainWindow.cs-->
        <ItemsControl ItemsSource="{Binding Classes}"/>
    </Grid>
</Window> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T05:22:07.563

您可以为复选框注册事件处理程序：

```
AddHandler(CheckBox.CheckedEvent, new RoutedEventHandler(CheckBox_Click)); 
```

然后，创建事件处理程序：

```
private void CheckBox_Click(object sender, RoutedEventArgs e)
{
    CheckBox checkbox = e.Source as CheckBox
    //...
} 
```

事件处理程序中的`checkbox`变量是单击以引发事件的复选框。您可以检查它是哪个复选框，然后启用所有依赖它的选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T05:37:41.803

为了您的方便，请尝试使用“CheckedChanged”事件。只需双击设计器上的 CheckBox。处理程序将自动添加（例如，

```
 private void checkBox1_CheckedChanged(object sender, EventArgs e)
    {

    } 
```

.然后在那里添加你的代码。但是，这很耗时（因为您必须为每个 CheckBox 添加处理程序）。但是，在这个阶段你会很容易理解。

# mysql - OSTicket 中的 autocron.php

> ID：11044918
> 
> 赞同：0
> 
> 时间：2012-06-15T05:09:45.627
> 
> 标签：mysql, events, cron, schedule

Linux Cron Job 或 MySQL Events 不适用于我的服务器，所以我打算在 OSTicket 中使用 Autocron.php。

我的要求很简单，我需要在每个月的第一天调用一个存储过程。其他一切程序都会处理。

有什么方法可以在不使用 Linux Cron Job 和 Mysql Events 的情况下做到这一点？

# ssrs-2008 - SSRS 自定义条形图颜色

> ID：11044926
> 
> 赞同：0
> 
> 时间：2012-06-15T05:10:57.683
> 
> 标签：ssrs-2008, reporting-services

我必须根据图表报告中每个条形的百分比来显示颜色。我在“系列属性”中使用表达式

```
=IIf (Fields!TotalComplete.Value / Fields!TotalJobs.Value <= 85, "Red",
IIf (Fields!TotalComplete.Value / Fields!TotalJobs.Value >= 97, "Green", "Orange")) 
```

但所有的酒吧都显示为红色

我设置的不好？

谢谢，
埃利亚娜

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T14:44:38.633

我认为您的问题是您正在与 85 和 97 进行比较，而您可能应该与 0.85 和 0.97 进行比较。此外，您需要使用聚合值，如下所示：

```
=iif(sum(Fields!TotalComplete.Value)/sum(Fields!TotalJobs.Value) <= .85, "Red", iif(sum(Fields!TotalComplete.Value)/sum(Fields!TotalJobs.Value) >= .97, "Green", "Orange")) 
```

如果这不能解决问题，请尝试使用与图表相同的分组创建一个表，并将此表达式放入文本框中，以便您可以查看正在计算的值：

```
sum(Fields!TotalComplete.Value)/sum(Fields!TotalJobs.Value) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T06:17:28.670

我想你可以为此尝试 Switch Clause，语法将是

```
=Switch(
         (Fields!TotalComplete.Value / Fields!TotalJobs.Value) <= 85, "Red", 
         (Fields!TotalComplete.Value / Fields!TotalJobs.Value) >= 97, "Green",
          "Orange"
       ) 
```

# android - 获取数据库表中的数据，如果不存在则插入，否则返回行 ID

> ID：11044931
> 
> 赞同：0
> 
> 时间：2012-06-15T05:11:39.043
> 
> 标签：android, sql, sqlite

我有一个包含列 date_file_creation 的表文件，我想创建一个包含日期文件创建的表日期，当我插入一个新文件时，我检查表日期是否存在我返回行 ID 并将其作为外来插入键入表格文件，否则我插入一个新日期并获取其新行 ID 以将其插入表格文件中。我怎样才能做到这一点？

这是我的尝试：首先我创建一个函数 findfile 来检查日期是否存在

```
public int finddate(String date){
    AndroidOpenDbHelper androidOpenDbHelperObj = new AndroidOpenDbHelper(this);
    SQLiteDatabase sqliteDatabase = androidOpenDbHelperObj.getWritableDatabase();
    Cursor cursor = sqliteDatabase.rawQuery("SELECT _id FROM " + AndroidOpenDbHelper.TABLE_DATE + " where COLUMN_NAME_DATE = date", null);
    startManagingCursor(cursor);
    if (cursor != null ) {
        if  (cursor.moveToFirst()) {
      do {
          int id = cursor.getInt(cursor.getColumnIndex("_id"));
          return id;
      } while (cursor.moveToNext());
        } 
    }
        return 0;

    } 
```

然后`onCreate`我就这样做

```
if( resultat==0)
        {
        Filedate date1=new Filedate();
        date1.setfileDate(providedFileDate);
        filedateArrayList.add(date1);
        insertDate(date1);//insert in table date
        newid=finddate(providedFileDate);//get the row id of the new date inserting
        }
        else
            {newid=resultat; //the row id =the result reterned by the finfdate method} 
```

然后我将它插入文件表中

这是我的 Dbhelper

```
public class AndroidOpenDbHelper extends SQLiteOpenHelper {
// Database attributes
public static final String DB_NAME = "file_db";
public static final int DB_VERSION = 1;

//  file Table attributes
public static final String TABLE_FILE = "file_table";
public static final String COLUMN_NAME_FILE_NAME = "file_name_column";
public static final String COLUMN_NAME_FILE_CATEGORY = "file_category_column";
public static final String COLLUMN_NAME_FILE_THEME= "file_theme_column";
public static final String COLLUMN_NAME_FILE_DATE_CREATING = "file_date_creating_column";
public static final String COLLUMN_NAME_FILE_CLOUD = "file_cloud_column";
public static final String COLLUMN_NAME_FILE_DATE_UPLOADING = "file_date_upload_column";
//category table
public static final String TABLE_CATEGORY = "category_table";
public static final String COLUMN_NAME_CATEGORY = "category_column";
public static final String COLLUMN_NAME_CATEGORY_ABREVIATION = "abreviation_column";
//theme table
public static final String TABLE_THEME = "theme_table";
public static final String COLUMN_NAME_THEME = "theme_column";  
public static final String COLLUMN_NAME_THEME_ABREVIATION = "abreviation_column";
//date table
public static final String TABLE_DATE = "date_table";
public static final String COLUMN_NAME_DATE = "date_column";    

public AndroidOpenDbHelper(Context context) {
    super(context, DB_NAME, null, DB_VERSION);
}

@Override
public void onCreate(SQLiteDatabase db) {

    // create category table
    String sqlQueryToCreateCategoryTable = "create table if not exists " + TABLE_CATEGORY + " ( " + BaseColumns._ID + " integer primary key autoincrement, " 
            + COLUMN_NAME_CATEGORY + " text not null, "
            + COLLUMN_NAME_CATEGORY_ABREVIATION + " text not null);";
    db.execSQL(sqlQueryToCreateCategoryTable);
    //create theme table
    String sqlQueryToCreateThemeTable = "create table if not exists " + TABLE_THEME + " ( " + BaseColumns._ID + " integer primary key autoincrement, " 
            + COLUMN_NAME_THEME + " text not null, "
            + COLLUMN_NAME_THEME_ABREVIATION + " text not null);";

    db.execSQL(sqlQueryToCreateThemeTable);
    //table date creation
    String sqlQueryToCreateDateTable = "create table if not exists " + TABLE_DATE + " ( " + BaseColumns._ID + " integer primary key autoincrement, " 
            + COLUMN_NAME_DATE + " text not null);";
    db.execSQL(sqlQueryToCreateDateTable);
            //Because this method get executed every time we created an object of this class. 
            //"create table if not exists TABLE_NAME ( BaseColumns._ID integer primary key autoincrement, FIRST_COLUMN_NAME text not null, SECOND_COLUMN_NAME integer not null);"
    String sqlQueryToCreateFileTable = "create table if not exists " + TABLE_FILE + " ( " + BaseColumns._ID + " integer primary key autoincrement, " 
                                                                    + COLUMN_NAME_FILE_NAME + " text not null, "
                                                                    + " FOREIGN KEY ("+COLUMN_NAME_FILE_CATEGORY+") REFERENCES "+TABLE_CATEGORY+" ("+BaseColumns._ID+"), " 
                                                                    + " FOREIGN KEY ("+COLLUMN_NAME_FILE_THEME+") REFERENCES "+TABLE_THEME+" ("+BaseColumns._ID+"), " 
                                                                    + " FOREIGN KEY ("+COLLUMN_NAME_FILE_DATE_CREATING +") REFERENCES "+TABLE_DATE+" ("+BaseColumns._ID+"), " 
                                                                    + COLLUMN_NAME_FILE_CLOUD + " text default null,"
                                                                    + COLLUMN_NAME_FILE_DATE_UPLOADING + " text default null);";
            db.execSQL(sqlQueryToCreateFileTable);

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    if(oldVersion == 1 && newVersion == 2){
        // Upgrade the database
    }       
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T13:12:47.937

如果您对数据库进行了更改，则该表可能尚不存在。我的数据库也有同样的问题。当它具有相同的名称和相同的版本时，即使您通过添加表进行更改，它也不会创建数据库的新工作版本。

您必须更改版本号并使用更新数据库功能或删除当前数据库，以便获得新的工作版本。

检查您的数据库当前是否创建了 data_table。您可以通过在命令行中运行“adb shell”来做到这一点。找到您的数据库并运行 sqlite3 [数据库名称]。进入那里后，您可以通过键入“.table”找出那里有哪些表。如果 data_table 没有出现，那么它还没有在数据库中创建。

* * *

我做了更多查看您的代码。我认为您的 file_data 表没有正确构建。我对用于执行它的 SQL 语句进行了一些更改，最终能够构建数据库。看看这是否有帮助。

```
String sqlQueryToCreateFileTable = "create table if not exists " + TABLE_FILE + " ( " + BaseColumns._ID + " integer primary key autoincrement, " 
    + COLUMN_NAME_FILE_NAME + " text not null, " + COLLUMN_NAME_FILE_THEME + " text not null,  " + COLLUMN_NAME_FILE_DATE_CREATING + " text not null, "+ COLUMN_NAME_FILE_CATEGORY + " text not null, "
    + COLLUMN_NAME_FILE_CLOUD + " text not null, "+ COLLUMN_NAME_FILE_DATE_UPLOADING + " text default null, FOREIGN KEY (" + COLUMN_NAME_FILE_CATEGORY+") REFERENCES "+TABLE_CATEGORY+" ("+BaseColumns._ID+"), " 
    + " FOREIGN KEY ("+COLLUMN_NAME_FILE_THEME+") REFERENCES "+TABLE_THEME+" ("+BaseColumns._ID+"), " 
    + " FOREIGN KEY ("+COLLUMN_NAME_FILE_DATE_CREATING +") REFERENCES "+TABLE_DATE+" ("+BaseColumns._ID+"));"; 
```

把它放在你的 AndroidOpenDbHelper 中。您可能还必须清理数据库以确保创建新数据库。数据库 onCreate() 将仅在没有具有相同名称和版本的数据库时运行。如果存在具有相同版本和名称的数据库，则不会创建该数据库的另一个副本。

* * *

另外我刚刚注意到您正在尝试以错误的方式搜索日期。你需要写这样的东西。

```
Cursor cursor = sqliteDatabase.rawQuery("SELECT _id FROM " + AndroidOpenDbHelper.TABLE_DATE + " where " + AndroidOpenDbHelper.COLUMN_NAME_DATE + "= '" + date + "';", null); 
```

否则，您的查询只是在 COLUMN_NAME_DATE 中搜索字符串日期的实例，并尝试将其与 date_file 表中的列进行比较。您当前的 SQL 语句说查找假设“数据”列中的值等于“COLUMN_NAME_DATE”中的值的行。

添加到 SQL 语句中的变量需要添加到引号内。 `"SELECT * FROM " + TABLE_NAME + " WHERE " + COLUMN_NAME + " = '" + VALUE_NAME + "';"`

希望这可以帮助。

# java - 架构建议：Grails 和视频内容

> ID：11044933
> 
> 赞同：0
> 
> 时间：2012-06-15T05:11:43.970
> 
> 标签：java, video, upload

我正在寻找一个新的（大）项目。该项目涉及大量用户上传的视频内容。

我倾向于在 Grails 中构建它，我过去做过大量的 Java。

目前，我处理视频存储的想法是将文件写入挂载，然后将位置保存在数据库中。

我应该考虑其他一些选择吗？我想知道像 JackRabbit （或 Hadoop，但这个[SO Question](https://stackoverflow.com/questions/3044050/image-processing-with-hadoop)似乎不建议）可能是我应该进一步研究的东西。

我担心未来的可扩展性，并在部署到集群时尽量保持简单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T07:37:53.263

2 年前我做过类似的事情，我们使用 FTP 将视频放在单独的媒体服务器中。正如您所说，我们将服务器名称和文件位置存储在数据库中。这样，我们可以毫无问题地上传数千个视频并使用集群。

媒体服务器已调整为使用 apache 提供静态文件。这种方式视频不通过 tomcat 或您的 servlet 容器提供。

# c - 请帮助纠正此错误：在 c 中使用 fscanf 从文件中逐行读取整数

> ID：11044938
> 
> 赞同：3
> 
> 时间：2012-06-15T05:12:34.830
> 
> 标签：c, arrays, scanf

我尝试使用此代码：

```
int index = 0; 
int value;
int IntegerArray[MAXARRAYSIZE];
while(fscanf(fp, "%d", &value) == 1){ 
    IntegerArray[index++] = value; 
} 
```

但我收到了这个错误：

> 程序收到信号 EXC_BAD_ACCESS，无法访问内存。原因：KERN_PROTECTION_FAILURE at address: 0x00000038 0x98a7c1ea in __svfscanf_l ()

`fp`是类型`FILE`，我相信我已经使用了所有必要的库包含。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T05:15:07.733

您需要检查是否`index`小于`MAXARRAYSIZE`。否则，您将越界并调用未定义的行为（通常是无效的内存访问）。

改变

```
while(fscanf(fp, "%d", &value) == 1) 
```

至

```
while((1 == fscanf(fp, "%d", &value)) && (index < MAXARRAYSIZE)) 
```

您不能存储超出您定义的数组大小的整数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T05:17:25.237

您可能超出了您的 maxrraysize，因此您正在尝试访问不属于您的程序的内存，因此检查它可能是明智的，也请初始化您的数组以确保安全，因为它通常包含任何内容该位置上的先前值。

```
int index = 0; 
int value;
int IntegerArray[MAXARRAYSIZE] = {0};

while(fscanf(fp, "%d", &value) == 1){ 
    if (index >= MAXARRAYSIZE)
    {
         printf("reached max array size!\n");
         break ;
    }
IntegerArray[index++] = value; 
} 
```

# windows-phone-7 - 如何在 Coding4Fun MessagePrompt 中删除边框

> ID：11044946
> 
> 赞同：1
> 
> 时间：2012-06-15T05:13:40.230
> 
> 标签：windows-phone-7, windows-phone-7.1

我按照这个示例在 Coding4Fun MessagePrompt 中显示我的用户控件。 [http://windowsphonegeek.com/articles/Creating-a-Windows-Phone-7-Trial-Application-Adding-Buy-Now-Functionality](http://windowsphonegeek.com/articles/Creating-a-Windows-Phone-7-Trial-Application-Adding-Buy-Now-Functionality)

当单击页面底部的主页图标时，我打开 MessagePromt，其中包含带有两个按钮的 UserControl，如下图所示。

但是由于某种原因，出现了这个浅白色的边框，我无法确定它是从哪里来的。

**注意：**我为我的 usercontorl 和其中的所有控件设置了透明边框和 0 粗细。我只想显示蓝色面板，没有白色边框，它的宽度是 300，就像它所看到的那样。

有人知道吗？

![在此处输入图像描述](../Images/20a89f6f3fd4dd9071551781eadc7699.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T02:46:44.087

我从apphub 论坛上的**“Eric Fleck - Microsoft”那里得到了帮助。**这是他的解决方案：

```
<phone:PhoneApplicationPage    
    ...    
    xmlns:c4f="clr-namespace:Coding4Fun.Phone.Controls;assembly=Coding4Fun.Phone.Controls">   

    <phone:PhoneApplicationPage.Resources>  
        <ControlTemplate x:Key="MsgPropmtNoBorder" TargetType="c4f:MessagePrompt">   
            <Grid VerticalAlignment="Stretch">   
                <Rectangle Fill="{StaticResource TransparentBrush}" />  

                <Border VerticalAlignment="Top"    
                        Margin="10"    
                        Background="{TemplateBinding Background}"    
                        BorderThickness="0"    
                        BorderBrush="{StaticResource PhoneForegroundBrush}">   

                    <StackPanel Margin="10">   
                        <TextBlock    
                                    Text="{TemplateBinding Title}"    
                                    Margin="0,-10,-25,10"    
                                    FontSize="30"    
                                    TextWrapping="Wrap" FontFamily="Segoe WP Light" />  
                        <ContentPresenter Content="{TemplateBinding Body}" />  
                        <StackPanel    
                                    Margin="0,10,0,0"  
                                    Name="actionButtonArea"  
                                    Orientation="Horizontal"  
                                    HorizontalAlignment="Center" />  
                    </StackPanel>  

                </Border>  
            </Grid>  

        </ControlTemplate>  
    </phone:PhoneApplicationPage.Resources>

        MessagePrompt prompt = new MessagePrompt();    
        prompt.Body = new WPUC();    
        prompt.ActionPopUpButtons.Clear();    
        prompt.Overlay = new SolidColorBrush(Color.FromArgb(155, 41, 41, 41));   
        prompt.Template = (ControlTemplate)this.Resources["MsgPropmtNoBorder"];   

        prompt.Show(); 
```

这是生成的弹出窗口： ![在此处输入图像描述](../Images/ac3d3dd29b9075f527f002e7f0e88a9d.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T11:28:06.153

我玩了一下 MessagePrompt 控件，它找不到任何方法来禁用或隐藏边框。这是 MessagePrompt 控件中的一种阴影效果，可提供类似弹出的外观。

但是，即使您无法删除它，您也可以通过将 MessagePrompt 的 Width 属性设置为等于您的实际蓝色 UserControl （在本例中为 300）来减少它的影响。

# java - 如何在没有 JoinTables 的 JPA 中创建一对多关系？

> ID：11044948
> 
> 赞同：3
> 
> 时间：2012-06-15T05:14:26.497
> 
> 标签：java, jpa, one-to-many

我正在尝试使用下表结构在 JPA 中创建 @OneToMany 关系。

```
+----------------+
| CATALOG        |
+----------------+
| catalogId : PK |
| name           |
+----------------+
      |
+----------------+
| PRODUCT        |
+----------------+
| productId : PK |
| name           |
| catalogId : FK |
+----------------+ 
```

我已将类定义为

```
@Entity
public class Catalog {
    @Id
    @GeneratedValue
    long catalogId;

    @OneToMany(cascade = CascadeType.ALL, 
               orphanRemoval = true, fetch = FetchType.LAZY)
    @JoinColumn(name = "catalogId", 
               nullable = false, insertable = true, updatable = true)
    Set<Product> products = new HashSet<>();

    String name;
}

@Entity
public class Product {
    @Id
    @GeneratedValue
    long productId;

    String name;
} 
```

但是，当我尝试持久化目录对象时，EclipseLink 没有按预期输入 catalogId 值，并且我得到一个 SQL 约束冲突，即存在空值。

另外，我不需要也不需要产品端的@ManyToOne。

持久化代码：

```
final Catalog catalog = new Catalog();
catalog.name = text;
final Product p = new Product();
p.name = text;
catalog.products.add(p);
em.persist(catalog); 
```

堆栈跟踪：

```
javax.persistence.PersistenceException: org.hibernate.exception.ConstraintViolationException: Column 'CATALOGID'  cannot accept a NULL value.
    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1367)
    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1295)
    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1301)
    at org.hibernate.ejb.AbstractEntityManagerImpl.persist(AbstractEntityManagerImpl.java:866)
    at net.trajano.maven_jee6.ws_mdb_ejb_web.TextMessages.putText(TextMessages.java:61) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T05:22:57.623

当您将一个表 Product 上的列的所有权授予不同的实体 Catalog 时，该列将作为持久化 Catalog 的一部分进行更新和维护，而不是作为持久化 Product 的一部分。该框架将创建一个产品，但由于 FK 列由不同的实体“拥有”，因此它将使用目录持久化时生成的单独更新语句来填充该列。您需要使该列可以为空或将该列的所有权放在映射该表的同一实体上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T05:27:57.540

我认为这是由于缺少`@GeneratedValue`注释（带`Postgres`）。根据我的经验，`Postgres`您的注释不起作用。您需要指定`@SequenceGenerator`and `@GeneratedValue`。这是一个例子：

```
 @SequenceGenerator(name = "lan_generator", sequenceName = "lan_pkey_seq")
    @Id
    @GeneratedValue(generator = "lan_generator")
    @Column(name="id", unique=true, nullable=false)
    private Integer id; 
```

如果您正在使用其他数据库，请尝试处理您的数据库。无论如何，在 giveb 链接上，您在使用`MySQL`. 可能它也适用于您的“内存中德比实例”。

[如何使用 JPA 注释注释 MYSQL 自动增量字段](https://stackoverflow.com/questions/4102449/how-to-annotate-mysql-autoincrement-field-with-jpa-annotations#4103347)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T05:19:39.650

像这样制作产品类，然后再试一次-

```
@Entity
public class Product {
    @Id
    @GeneratedValue
    long productId;

    @ManyToOne(fetch=FetchType.LAZY)
    @JoinColumn(name = "catalogId", updatable = false, insertable = false, nullable=false)  
    private Catalog  catalog ;

    String name;
} 
```

# c# - 用户选择行号和列号时计算 Excel 范围

> ID：11044950
> 
> 赞同：0
> 
> 时间：2012-06-15T05:14:50.667
> 
> 标签：c#, excel, visual-studio-2010, interop

我在 c# Form Application 中有一个方法可以在给定 Range 时从 excel 中返​​回数据。

```
...
Microsoft.Office.Interop.Excel.Worksheet aWs = aWb.Worksheets[sheetName] as Microsoft.Office.Interop.Excel.Worksheet;

            Range headers = aWs.get_Range(range1, range2);

            object[,] values = headers.get_Value(hmissing) as object[,];
... 
```

这里`range1`和`range2`是单元格值。例如：A1、B7

我想计算这个`range1`以及`range2`当用户选择行号和列号时。

```
If user select  Rows ={All} and columns = {A,B,C} => result={A1,C265}
If user select  Rows ={1,2,3,4} and columns = {A,B,C} => result={A1,C4}
If user select  Rows ={1,2,4,5} and columns = {A,B,C} => result={A1,C2} {A4,C5}
If user select not matching rows and columns => result={null} 
```

我怎样才能做到这一点 ？我们可以实现一个方法还是 Excel 提供了任何 API 来做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T07:32:48.333

如果您要做的是重新计算公式 Excel 有几种计算方法。
要计算特定范围，请使用 Range.Calculate 或 Range.CalculateRowMajorOrder。
请注意，如果 Excel 处于自动计算模式，则不需要这样做，因为所有公式都会根据需要自动重新计算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T05:35:54.517

尝试使用 LinqToexcel 它将帮助您解决这个问题[linqtoexcel](http://code.google.com/p/linqtoexcel/)

希望这可以帮助

# iphone - 通过选择按钮删除视图控制器

> ID：11044952
> 
> 赞同：0
> 
> 时间：2012-06-15T05:15:13.377
> 
> 标签：iphone, xcode, ios5, uiview, uiviewcontroller

我创建了一个应用程序，其中包含 4 个视图控制器及其 .h、.m 文件...在我的第一个视图控制器中按下一个按钮，它转到第二个视图控制器，在第二个视图控制器中有两个按钮，它用于切换回第一个视图控制器和另一个按钮将转到thirdviewcontroller。这是我的firstviewcontroller.m 代码

```
[[NSBundle mainBundle] loadNibNamed:@"SecondViewController" owner:self options:nil]; 
```

在我的第二个视图控制器中为第一个按钮

```
[[NSBundle mainBundle] loadNibNamed:@"FirstViewController" owner:self options:nil]; 
```

和另一个按钮

```
[[NSBundle mainBundle] loadNibNamed:@"ThirdViewController" owner:self options:nil]; 
```

当我在 firstviewcontroller 中选择按钮时，它会加载 secondviewcontroller 但在第二个视图控制器中，如果我选择任何按钮，我会收到 Sigabart 警告...

任何人都可以对此有所了解...我尝试了很多方法..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T05:30:28.907

您可以使用以下方法来执行这些任务：

方法一：

在 FirstViewController.m 中，在按钮单击处编写此代码：

```
SecondViewController *secondVC = [[SecondViewController alloc]initwithNibName:@"SecondViewController" bundle:nil];
[self.view addSubView:secondVC.view]; 
```

这会将第二个视图控制器添加到当前视图

在 SecondViewController.m 添加第三个 View 你可以写

```
ThirdViewController *thirdVC = [[ThirdViewController alloc]initwithNibName:@"ThirdViewController" bundle:nil];
[self.view addSubView:thirdVC.view]; 
```

并删除第二个视图，您可以这样写：

```
[self.view removeFromSuperview]; 
```

方法二：

使用导航控制器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T05:33:41.807

使用这样的代码

```
FirstViewController *FVC = [[FirstViewController alloc] initWithNibName:@"FirstViewController" bundle:nil];

//For Push    
[self.navigationController pushViewController:FVC animated:YES];

//For Pop
[self.navigationController popViewControllerAnimated:YES]; 
```

:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T06:48:43.400

```
//For going in forword direction you can use this block
{
FirstViewController *firstVC = [[FirstViewController alloc] initWithNibName:@"FirstViewController" bundle:nil];
[self.navigationController pushViewController:firstVC animated:YES];
[firstVC relese];
}

//For returning back you can use this block
{ 
   [self.navigationController popViewControllerAnimated:YES];
}

//But before using this line of code you have to alloc and make the property of    navigationController in your appDelegate 
```

希望对你有帮助

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T05:34:29.167

在 iPhone 应用程序编程中，当我们将视图控制器推送到新的另一个视图控制器时，视图控制器通常一个一个地存储在堆栈中。并查看以相同的反向格式删除这些控制器。所以如果你想推一个新的视图控制器使用这个：

> SecondViewController *second = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];

`[self.navigationController pushViewController:second animated:YES];`

如果您想删除当前的视图控制器，请使用：

`[self.navigationController popViewControllerAnimated:YES];

如果你想从任何视图控制器跳转到你的第一个视图控制器

> [self.navigationController popToRootViewControllerAnimated:YES];

您可以通过这行代码获取此堆栈中显示的视图控制器

> NSArray *viewArr = [self.navigationController viewControllers];
> 
> NSLog(@"%@",viewArr);
> 
> [self.navigationController popToViewController:[viewArr objectAtIndex:1] 动画：YES];

`

# tomcat - IntelliJ IDEA：在运行/调试配置之前和之后运行批处理脚本

> ID：11044955
> 
> 赞同：9
> 
> 时间：2012-06-15T05:16:01.093
> 
> 标签：tomcat, intellij-idea

**背景：**

我有一个运行 Maven 构建的运行配置。我已经设置了一个上下文路径来查看构建目录的目标目录，因此我不必在每次运行构建时手动复制 war 文件。

我想要的是让我的构建配置自动终止正在运行的 tomcat 进程，运行构建，并（如果成功）重新启动 tomcat。

**问题：**

我想在构建之前和之后简单地调用启动/停止 tomcat 批处理文件，但我遇到了两个障碍：

*   在 Build Config->Before Launch 部分中，没有执行批处理脚本的选项
*   似乎没有“构建后”部分来完成第 2 阶段

有没有办法为我当前的构建配置启用这些选项（通过插件或类似的）？

-或者-

是否可以按顺序运行构建配置（一个接一个），是否有插件或其他东西来创建批处理脚本构建配置？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-15T07:29:04.967

无法直接在 IDEA 中运行批处理脚本，也无法在 IDEA 11 中运行之前进行一系列操作。

在 IDEA 12 中，可以在运行之前指定多个要执行的操作，这样您可以创建一个 Maven 目标来重新启动 Tomcat（通过运行批处理脚本或其他方式）并在`Before Launch`列表中指定 2 个操作：杀死正在运行的 Tomcat 进程（可以是另一个 Maven 目标、另一个运行配置或 Ant 任务）并运行构建（Maven 目标）。下面是这个 UI 在 IDEA 12 中的样子：

![发射前](../Images/f07c2d90a2062699a86b5fe197dcdde2.png)

当您运行此配置时，它将杀死 Tomcat，执行构建并重新启动 Tomcat。

`Run Another Configuration`如果您使用“启动前”步骤链接多个运行配置，它也应该可以工作。

IDEA 12 计划于 2012 年底发布，但第一个 EAP 版本将在几周内推出。

* * *

另一种解决方案是使用单个 Maven 目标和[Mojo Executor](https://github.com/TimMoore/mojo-executor)或 Ant 任务来执行所有 3 个操作。

# c# - 如何将日期时间变量与 lambda 表达式进行比较？

> ID：11044957
> 
> 赞同：2
> 
> 时间：2012-06-15T05:16:02.957
> 
> 标签：c#, .net

有一个日期参考 UserJoinDate 和日期列表 List friendsJoined 我想计算有多少朋友在 UserJoinDate 之前加入了一项服务，以及有多少朋友在同一时间或之后加入。

我写了以下几行，但它不起作用：

```
List<DateTime> joinersDates = getJoinersDates();
FriendsJoinedBeforeCount = joinersDates .Where(x => x < UserJoinDate).Count();
FriendsJoinedAfterCount = joinersDates .Where(x => x >= UserJoinDate).Count(); 
```

有谁知道如何计算列表 joinersDates 中有多少日期在 UserJoinDate 之前以及有多少相同或之后？

# 编辑

这是来自 ImmediateWindow 的副本：

```
churnersDates.Count( x => x > UserChurnDate)
Expression cannot contain lambda expressions 
```

UserJoinDate 是日期时间

**例子：**

```
UserJoinDate = 9.11.2010 0:30:00 
```

（该值从 Date: {9.11.2010 0:00:00} Day: 9 DayOfWeek: Tuesday DayOfYear: 313 复制而来...）

和

```
joinersDates.First() = 17.5.2011 0:30:00 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T05:36:43.257

尝试像这样分别使用 DateTime 的年、月和日属性进行比较；

```
FriendsJoinedBeforeCount = joinersDates .Where(x => (x.Year < UserJoinDate.Year) && (x.Month< UserJoinDate.Month) && (x.Day < UserJoinDate.Day)).Count(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T05:57:47.137

您的问题似乎是 Visual Studio 的限制，而不是代码中的错误。Visual Studio 2010 不支持在其即时或监视窗口中定义 lambda 表达式。

如果您真的想在调试时测试 LINQ 表达式，您应该将它封装到一个方法中并从立即窗口调用它。

例如：

```
private int GetFriendsJoinedBeforeCount(DateTime joinDate)
{
    List<DateTime> joinersDates = getJoinersDates();
    return joinersDates.Count(x => x < UserJoinDate);
} 
```

然后，在您的即时窗口中，您将调用：

```
GetFriendsJoinedBeforeCount(UserChurnDate) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T05:32:33.420

试试下面的代码：

```
List<DateTime> joinersDates = getJoinersDates();
FriendsJoinedBeforeCount = joinersDates.Count(x => x.ToUniversalTime() < UserJoinDate.ToUniversalTime());
FriendsJoinedAfterCount = joinersDates.Count - FriendsJoinedBeforeCount ; 
```

或者尝试使用 Ticks 属性：

```
List<DateTime> joinersDates = getJoinersDates();
FriendsJoinedBeforeCount = joinersDates.Count(x => x.ToUniversalTime().Ticks < UserJoinDate.ToUniversalTime().Ticks);
FriendsJoinedAfterCount = joinersDates.Count - FriendsJoinedBeforeCount ; 
```

# jquery - 从绝对定位元素获取滚动顶部值，溢出设置为滚动

> ID：11044958
> 
> 赞同：1
> 
> 时间：2012-06-15T05:16:17.463
> 
> 标签：jquery, scroll, css-position, scrolltop

我正在使用绝对定位的 body 元素来防止 mac os 中的“有弹性”滚动行为。这样，它不是滚动的窗口，而是不“反弹”的主体元素。

但现在 scrollTop() 值始终为 0。

我需要知道我滚动了多少 body 元素。有任何想法吗？

[http://jsfiddle.net/hbJWn/](http://jsfiddle.net/hbJWn/)

编辑：它似乎适用于 Mac OS X Firefox 13.0。但在 Mac OS X Chrome 19 中没有。似乎是 webkit 问题，Safari 也没有工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T06:17:13.080

我想您可以将*包装器* `<div>`直接放在正文中，然后将所有其他内容放入*该*包装器中。

例如，

```
<body>
  <div id="wrapper">
     <!-- Content -->
  </div>
</body> 
```

然后，在 $('body').scroll() 上，您可以考虑该包装器的偏移位置，而不是查看 $('body').scrollTop()：$('#wrapper').position() 。最佳

我在这里修改了你的小提琴：http: [//jsfiddle.net/bT9fV/1/](http://jsfiddle.net/bT9fV/1/)

在 Chrome 19 中似乎可以正常工作

该包装器的偏移位置将为您提供与 scrollTop() 基本相同的信息，所以我想不出这还不够的原因。

# java - 以下 Java 代码中的错误是什么？

> ID：11044961
> 
> 赞同：0
> 
> 时间：2012-06-15T05:17:00.277
> 
> 标签：java

```
 import java.util.*;
    class Huffman  {
        int a;
        public Huffman(int i)
        {
            a = i;
        }               
    }

    class PriorityQueueDemo implements Comparator<Huffman>
    {
        public int compare(Huffman ab, Huffman cd)
        {
            if(ab.a>cd.a)
            {
                return 1;

            }
            return 0;
        }

        public static void main(String[] args)  
        {
            PriorityQueue<Huffman> HuffQueue = new PriorityQueue<Huffman>();

            Huffman ab = new Huffman(10);
            HuffQueue.offer(ab);
            ab = new Huffman(50);
            HuffQueue.offer(ab);
            ab = new Huffman(20);
            HuffQueue.offer(ab);
            ab = new Huffman(60);
            HuffQueue.offer(ab);

            while(HuffQueue.size() > 0)
                   System.out.println(HuffQueue.remove());

            }
    } 
```

以下代码有什么问题！它生成以下**异常**：

```
Exception in thread "main" java.lang.ClassCastException: Huffman cannot be cast to java.lang.Comparable
    at java.util.PriorityQueue.siftUpComparable(Unknown Source)
    at java.util.PriorityQueue.siftUp(Unknown Source)
    at java.util.PriorityQueue.offer(Unknown Source)
    at PriorityQueueDemo.main(Huffman.java:34) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T05:18:58.820

你需要实现`Comparable`接口

> 依赖于自然排序的优先级队列也不允许插入不可比较的对象（这样做可能会导致 ClassCastException）。

或者你需要在构造函数中传递比较器

[`public PriorityQueue(int initialCapacity, Comparator<? super E> comparator)`](http://docs.oracle.com/javase/6/docs/api/java/util/PriorityQueue.html#PriorityQueue%28int,%20java.util.Comparator%29)

如下

```
PriorityQueue<Huffman> HuffQueue = new PriorityQueue<Huffman>(10, new Comparator<Huffman>(){

@Override
public int compare(Huffman ab, Huffman cd){
            if(ab.a>cd.a)
            {
                return 1;

            }
            return 0;
}
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T05:22:30.103

异常状态`Hufmann`类是没有`Comparable`，没有实现`java.util.Comparable`，所要求的`PriorityQueue`。实施`Comparable`into`Huffman`以便可比较并在队列中获得适当的优先级。[在http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html)`Comparable`中有解释，需要方法实现。`compareTo(T o) : int`

# jquery - 我的网站会停止直到整个内容加载？

> ID：11044962
> 
> 赞同：0
> 
> 时间：2012-06-15T05:17:06.173
> 
> 标签：jquery, ajax

我已经使用以下脚本发出 ajax 请求...

```
 $.ajax({
 type: 'POST',
 url: 'load.php',
 data: 'page='+url,
 dataType: "html",
 beforeSend:function(){

 $('.left').html('<div class="ajax-load"><center><img    src="http://www.cadysalley.com/img/loader.gif" style="margin-top: 33px;" alt="Loading..." /></center></div>');
$('#ajax-load').show();
 },

 success:function(msg){
$('.left').empty();
// successful request; do something with the data
if(parseInt(msg)!=0)
        {

            $('html, body').animate({ scrollTop: 0 }, 0);
            $('.left').html(msg);
            $('#ajax-load').hide();
        }
  },
  error:function(){  

 $('.left').empty();
 $('#ajax-load').hide();
 }
}); 
```

我的问题是，每当我单击链接时，微调器就会启动，并且在弹出警报之后，在弹出警报之后，整个网站会暂停几秒钟，除非新页面已加载，...我想要我的网站不要暂停并继续微调器加载，直到整个网站通过 ajax 调用完美加载

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T05:30:25.237

您正在放置 ajax-load div 的 div 中设置新内容。

```
$('.left').html('<div class="ajax-load"><center><img    src="http://www.cadysalley.com/img/loader.gif" style="margin-top: 33px;" alt="Loading..." /></center></div>');

 $('.left').html(msg);
 $('#ajax-load').hide(); 
```

您需要将 ajax-loader 放在 $('.left') 容器之外。

已编辑

```
ok do this. 
setTimeout(function() {
   $('.left').empty();
// successful request; do something with the data
if(parseInt(msg)!=0)
    {

        $('html, body').animate({ scrollTop: 0 }, 0);
        $('.left').html(msg);
        $('#ajax-load').hide();
    }
}, 100); 
```

这会成功的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T05:44:19.797

尝试这样做.. 完美加载您的网站.. 在您的 ('.left') div 之前添加一个 div.. 隐藏 ('.left') 直到数据被加载.. 直到然后显示您的 ajax 加载器..when完整的数据是通过 ajax 完成的，你隐藏你的 ajax 并显示你的 ('.left')..

像这样..添加一个css类

```
.hideIT{
visibility:hidden;      
}

beforeSend:function(){

 $('#newDiv').html('<div class="ajax-load"><center><img    src="http://www.cadysalley.com/img/loader.gif" style="margin-top: 33px;" alt="Loading..." /></center></div>');
$('.left').addClass('hideIT');
$('#ajax-load').show();
 },

 success:function(msg){
$('.left').empty();
// successful request; do something with the data
if(parseInt(msg)!=0)
        {

            $('html, body').animate({ scrollTop: 0 }, 0);
            $('.left').html(msg);
            $('#ajax-load').hide();
            $('.left').removeClass('hideIT');

        }
  }, 
```

# jquery - 在某些页面上运行特定的 JavaScript/jQuery 函数

> ID：11044964
> 
> 赞同：0
> 
> 时间：2012-06-15T05:17:21.243
> 
> 标签：jquery

检查页面上是否存在特定元素会更明智吗？

```
if ($('#cool-page').length > 0) {
    // my jQuery function
} 
```

或者检查窗口位置是否是正确的页面？

```
if (window.location.href.indexOf('words-here') != -1) {
    // my jQuery function
} 
```

在这种情况下，我只想在页面上运行我的 jQuery 函数：`site.com/123/words-here`

如果最好的方法是后者，我应该如何编写一个正则表达式来匹配上面的位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T05:19:30.510

给 body 元素一个类或一个 id：

```
<body class="cool-page"> 
```

然后使用 jQuery：

```
if ($('body').hasClass('cool-page')) {
  ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T05:20:05.953

因为您只希望它在特定页面上运行，这`window.location.href`似乎是一个更安全的选择，并且更能表明您运行该方法的目的。只是我的观点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T05:43:31.710

我会给每个页面正文一个特定的ID，例如

`<body id="cool-page">`

并使用 jquery/javascript 我会使用一个开关来包装特定的功能

```
var pageid = $('body').attr('id');
switch(pageid)​ {
    case 'cool-page':
        //dosomething
        break;
        default:
        //dosomething
        break;
    }​ 
```

# ios - 没有自动引用计数的 iOS 5.1.1 内存管理

> ID：11044967
> 
> 赞同：0
> 
> 时间：2012-06-15T05:17:27.610
> 
> 标签：ios, automatic-ref-counting

我在 iOS 5.1.1 上遇到了一些奇怪的内存管理问题，我没有在项目中使用自动引用计数。在 iPad 3 5.1 或其他 5.1 或更低版本的设备上一切正常，这个问题发生在两个不同的项目（一个游戏和一个应用程序）上。所以我想我已经编码了正确的`retain`/`release`东西。

通常一些 Objective-C**对象在它应该被释放之前就被释放了**。稍后访问它时，应用程序崩溃。这发生在运行 iOS 5.1.1 的 iPad 3 LTE、iPad 3 Wifi 和 iPod Touch 4 上。它从未在任何运行 iOS 5.1 或更低版本的设备上发生。我还没有找到任何模式。有时即使是仍然是屏幕的 UIView 也会被释放，如果用户触摸一个按钮，应用程序就会崩溃。

我知道这类问题可以用`NSZombies`. 但是当我启用时`NSZombies`，这种问题从未发生过。

对我来说，它看起来像是 iOS 5.1.1 的一个错误，我想知道它是否可以在应用程序端修复。

# android - 在android相对布局中将onclick事件添加到动态生成的图像

> ID：11044972
> 
> 赞同：0
> 
> 时间：2012-06-15T05:17:53.873
> 
> 标签：android, onclick, mouseevent, onclicklistener

我正在做一个将图像动态添加到屏幕的项目。编译时绝对不会创建 XML 引用，因为整个事物都是动态生成的。

![我的应用在运行时的外观](../Images/103657cc3a143f23fe8d9053545daddc.png)

整个事情是动态生成的。现在，我想知道如何为每个图像添加 onclick 事件。基本上，当点击一个图像时，应该会出现另一个阴影较深的图像（它基本上是一个答题纸，所以它就像一个带有阴影的气泡）。在这种情况下，我想要一些示例代码。我是 Android 新手，现在几乎迷路了。

请帮忙！

PS如果需要源代码，我很乐意把它放上来。请告诉我。

编辑：放代码：

```
package ekalavya.pratnala.quiz;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import java.util.StringTokenizer;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.ViewGroup.LayoutParams;
import android.widget.ImageView;
import android.widget.RelativeLayout;
import android.widget.ScrollView;
import android.widget.TextView;

public class QuizActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // Beginning of variable declarations
    File quizSpecs = new File("mnt/sdcard/teacher_1.csv"); // Read the file
    BufferedReader csvReader = null;
    String line = ""; // Storing each line in a string
    StringTokenizer currentLine = null;
    int noOfQuestions = 0; // Number of questions in the quiz
    int time = 0; // Duration of the quiz
    int[][] quizData; // Storing the quiz specifications in an integer array
    int i = 0, j = 0, k = 0; // Loop variables
    int[][] questionImages = {
            { R.drawable.a, R.drawable.b, R.drawable.c, R.drawable.d,
                    R.drawable.e, R.drawable.f, R.drawable.g, R.drawable.h,
                    R.drawable.i, R.drawable.j },
            { R.drawable.a_checked, R.drawable.b_checked,
                    R.drawable.c_checked, R.drawable.d_checked,
                    R.drawable.e_checked, R.drawable.f_checked,
                    R.drawable.g_checked, R.drawable.h_checked,
                    R.drawable.i_checked, R.drawable.j_checked },
            { R.drawable.zero, R.drawable.one, R.drawable.two,
                    R.drawable.three, R.drawable.four, R.drawable.five,
                    R.drawable.six, R.drawable.seven, R.drawable.eight,
                    R.drawable.nine, R.drawable.decimal },
            { R.drawable.zero_checked, R.drawable.one_checked,
                    R.drawable.two_checked, R.drawable.three_checked,
                    R.drawable.four_checked, R.drawable.five_checked,
                    R.drawable.six_checked, R.drawable.seven_checked,
                    R.drawable.eight_checked, R.drawable.nine_checked,
                    R.drawable.decimal_checked } };
    int previd = 0;
    // End of variable declarations

    try {
        csvReader = new BufferedReader(new FileReader(quizSpecs));
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    try {
        line = csvReader.readLine();
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    currentLine = new StringTokenizer(line, ",");
    noOfQuestions = Integer.parseInt(currentLine.nextToken());
    time = Integer.parseInt(currentLine.nextToken());
    // System.out.println(noOfQuestions + " " + time);
    while (currentLine.hasMoreTokens()) {
        currentLine.nextToken();
    }
    quizData = new int[noOfQuestions][6];
    for (i = 0; i < noOfQuestions; i++) {
        try {
            line = csvReader.readLine();
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        currentLine = new StringTokenizer(line, ",");
        for (j = 0; j < 6; j++) {
            quizData[i][j] = Integer.parseInt(currentLine.nextToken());
            // System.out.println(quizData[i][j]);
        }
    }
    try {
        csvReader.close();
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    ScrollView s1 = new ScrollView(this);
    RelativeLayout r1 = new RelativeLayout(this);
    for (i = 0; i < noOfQuestions; i++) {
        System.out.println(quizData[i][2]);
        TextView questionNo = new TextView(this);
        questionNo.setText(String.valueOf(i + 1));
        questionNo.setId(1000 * (i + 1));
        questionNo.setTextSize(18);
        RelativeLayout.LayoutParams p1 = new RelativeLayout.LayoutParams(
                RelativeLayout.LayoutParams.WRAP_CONTENT,
                RelativeLayout.LayoutParams.WRAP_CONTENT);
        p1.addRule(RelativeLayout.BELOW, previd);
        previd = (1000 * (i + 1));
        questionNo.setLayoutParams(p1);
        r1.addView(questionNo, p1);
        switch (quizData[i][1]) {
        case 1:
        case 2:
            for (j = 0; j < 10; j++) {
                ImageView option = new ImageView(this);
                option.setImageResource(questionImages[0][j]);
                option.setId((1000 * (i + 1)) + j + 1);
                if (j >= quizData[i][2]) {
                    option.setVisibility(View.INVISIBLE);
                    option.setEnabled(false);
                }
                RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(
                        RelativeLayout.LayoutParams.WRAP_CONTENT,
                        RelativeLayout.LayoutParams.WRAP_CONTENT);
                params.addRule(RelativeLayout.BELOW, ((1000 * i) + 1));
                params.addRule(RelativeLayout.RIGHT_OF,
                        ((1000 * (i + 1)) + j));
                previd = ((1000 * (i + 1)) + j);
                option.setLayoutParams(params);
                r1.addView(option, params);
            }
            break;
        case 3:
            for (j = 0; j < (quizData[i][3] == 0 ? quizData[i][2]
                    + quizData[i][3] : quizData[i][2] + quizData[i][3] + 1); j++) {
                for (k = 10; k > -1; k--) {
                    ImageView num = new ImageView(this);
                    num.setImageResource(questionImages[2][10 - k]);
                    num.setId((1000 * (i + 1)) + (100 * j) + k + 1);
                    RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(
                            RelativeLayout.LayoutParams.WRAP_CONTENT,
                            RelativeLayout.LayoutParams.WRAP_CONTENT);
                    if (j == 0) {
                        params.addRule(RelativeLayout.RIGHT_OF,
                                (1000 * (i + 1)));
                    } else {
                        params.addRule(RelativeLayout.RIGHT_OF,
                                (1000 * (i + 1)) + (100 * (j - 1)) + k + 1);
                    }
                    if (k == 10) {
                        params.addRule(RelativeLayout.BELOW, (1000 * i) + 1);
                    } else {
                        params.addRule(RelativeLayout.BELOW,
                                ((1000 * (i + 1)) + (100 * j) + k + 2));
                    }
                    num.setLayoutParams(params);
                    r1.addView(num, params);
                }
            }
            previd = (1000 * (i + 1)) + 1;
            break;
        case 4:
        case 5:
            for (j = quizData[i][2] - 1; j > -1; j--) {
                for (k = 0; k < quizData[i][3]; k++) {
                    ImageView match = new ImageView(this);
                    match.setImageResource(questionImages[0][k]);
                    match.setId((1000 * (i + 1)) + (100 * j) + k + 1);
                    RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(
                            RelativeLayout.LayoutParams.WRAP_CONTENT,
                            RelativeLayout.LayoutParams.WRAP_CONTENT);
                    if (k == 0) {
                        params.addRule(RelativeLayout.RIGHT_OF,
                                (1000 * (i + 1)));
                    } else {
                        params.addRule(RelativeLayout.RIGHT_OF,
                                (1000 * (i + 1)) + (100 * j) + k);
                    }
                    if (j == quizData[i][2] - 1) {
                        params.addRule(RelativeLayout.BELOW, (1000 * i) + 1);
                    } else {
                        params.addRule(RelativeLayout.BELOW,
                                (1000 * (i + 1)) + (100 * (j + 1)) + k + 1);
                    }
                    match.setLayoutParams(params);
                    r1.addView(match, params);
                }
            }
            previd = (1000 * (i + 1)) + 1;
            break;
        }
    }
    s1.addView(r1, new LayoutParams(LayoutParams.FILL_PARENT,
            LayoutParams.FILL_PARENT));
    this.setContentView(s1);
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T05:50:29.940

在您的活动中实现 OnClickListener

```
public class QuizActivity extends Activity implements OnClickListener
 {
   .
   .
   .

     for (j = 0; j < 10; j++) {
                ImageView option = new ImageView(this);
                option.setImageResource(questionImages[0][j]);
                option.setId((1000 * (i + 1)) + j + 1);
                option.setOnClickListener(this);  // setOnClickListener to your dynamically Image view.. 
                if (j >= quizData[i][2]) {
                    option.setVisibility(View.INVISIBLE);
                    option.setEnabled(false);
                }
                RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(
                        RelativeLayout.LayoutParams.WRAP_CONTENT,
                        RelativeLayout.LayoutParams.WRAP_CONTENT);
                params.addRule(RelativeLayout.BELOW, ((1000 * i) + 1));
                params.addRule(RelativeLayout.RIGHT_OF,
                        ((1000 * (i + 1)) + j));
                previd = ((1000 * (i + 1)) + j);
                option.setLayoutParams(params);
                r1.addView(option, params);
            } 
```

// 覆盖 onClick 并放置 switch case 以区分 imageview 的点击..

```
@Override
    public void onClick(View v)
    {
        switch (v.getId())
        {
            case //id of your dynamically imageview :

            break;
                }
         }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T05:36:55.720

在 Java 中，只需在 ImageViews 上运行 setOnClickListener 方法，如下所示：

```
mImageView.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
        ImageView iv = (ImageView) v;
        iv.setImageResource(R.id.darkbubble);
        //Do anything else you would like
    }
}); 
```

# tcl - TCL 时钟指令

> ID：11044977
> 
> 赞同：1
> 
> 时间：2012-06-15T05:18:12.663
> 
> 标签：tcl

下面显示的时钟操作在具有 TCL 8.5 的 Linux 机器上运行良好。但是当我在具有 TCL8.4 的 SunOS 上使用它时，我收到错误“错误开关“-format”：必须是 -base 或 -gmt”。

出于某种原因，我无法在 SunOS 中将我的 TCL 8.4 升级到 8.5。

我怎样才能让它在 TCL 8.4 中也能工作？

下面给出了命令，我试图通过这些命令实现的是将系统日期提前一天。

$today 包含值“2012 06 15 14 39 20”

```
set today [clock scan $today -format "%Y %m %d %H %M %S"]      
set tomorrow [clock add $today 86600 seconds]
set victim [clock format $tomorrow -format "%a"]
set tomorrow [clock format $tomorrow -format "%m%d%H%M"]
send "sudo date $tomorrow\r" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T08:21:22.027

[杰克逊的回答](https://stackoverflow.com/a/11046360/301832)是问题的核心：8.5 添加了很多功能`clock`，您的代码依赖于它们。但是，他并没有完全确定获得目标时间的最佳方法。

```
# Multiple assignment from list
foreach {YY MM DD HH mm ss} $today break
# Get the date tomorrow in one funky step
set tomorrow [clock scan "$YY$MM$DD $HH$mm$ss + 86600 seconds"]

# Rest is the same as before
set victim [clock format $tomorrow -format "%a"]
set tomorrow [clock format $tomorrow -format "%m%d%H%M"]
send "sudo date $tomorrow\r" 
```

（你知道一天永远不会长 86600 秒吗？这比平均长度长 200 秒……）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T07:28:08.650

正如您所发现的，时钟命令在 Tcl 8.4 和 8.5 之间发生了变化。在 8.4 中，时钟扫描命令只能识别一些标准格式。因此，您需要将您的 $today 值转换为其中一种格式，请参阅[此处](http://www.tcl.tk/man/tcl8.4/TclCmd/clock.htm#M45)了解详细信息。

一种可能的方法是

```
regexp {(\d\d\d\d) (\d\d) (\d\d) (\d\d) (\d\d) (\d\d)} $today all YY MM DD HH mm ss
set reformatToday "$YY$MM$DD $HH$mm$ss"
set today [clock scan $reformatToday] 
```

Tcl 8.5 也可以使用这种自由格式的扫描码；但是，此功能在 8.4 之后的 Tcl 版本中已被弃用。

# c++ - c++ 到 VB.Net IntPtr 字符串

> ID：11044980
> 
> 赞同：0
> 
> 时间：2012-06-15T05:18:25.580
> 
> 标签：c++, vb.net, com, marshalling, intptr

好的，所以我有这个代码，我将它传递给一个非托管 dll，我只知道导出，并且有一些示例代码。我得到了正确的字符串，但后面是垃圾字节。

我基本上是从没有这个问题的 c++ 示例程序中逐字翻译代码。我假设我在这里缺少一些基本的东西，所以如果有人能告诉我那是什么，我将不胜感激。

示例 C++ 代码

```
void CDUKPT_TESTDlg::OnButton4() 
{
    // TODO: Add your control notification handler code here
    unsigned char dataout[1024],tmp[1024],ksn[20],keyval[20];
    int nRet,len;
    memset(dataout,0,sizeof(dataout));
    memset(ksn,0,sizeof(ksn));
    memset(keyval,0,sizeof(keyval));
    memset(tmp,0,sizeof(tmp));
    UpdateData(TRUE);

    two_one((unsigned char *)m_strCURKSN.GetBuffer(m_strCURKSN.GetLength()),m_strCURKSN.GetLength(),ksn);
    two_one((unsigned char *)m_strMACK.GetBuffer(m_strMACK.GetLength()),m_strMACK.GetLength(),keyval);
    two_one((unsigned char *)m_EncryptDat.GetBuffer(m_EncryptDat.GetLength()),m_EncryptDat.GetLength(),dataout);

    len=m_EncryptDat.GetLength()/2;
    //extern int __stdcall ExtractDat(unsigned char *input,
    //unsigned short len,unsigned char *output,unsigned char *key,
    //unsigned char *ksn);
    nRet=ExtractDat(dataout,len,tmp,keyval,ksn); //External Call
    //Good string+bad trailing data comes back in tmp
    m_Result=tmp;
    UpdateData(FALSE);
} 
```

这段代码吐出这个`Ü‰Òdÿo `

这是我的 VB.Net 代码

```
Public Function Encrypt(ByVal inp As String) As String
    Dim tmpSB As New StringBuilder
    Dim i As Integer
    Dim tKsn As Char() = TwoOne(StrCurKsn)
    For i = tKsn.Length To 19
        tKsn = tKsn + Chr(0)
    Next
    Dim tMack As Char() = TwoOne(StrMack)
    For i = tMack.Length To 19
        tMack = tMack + Chr(0)
    Next
    Dim tEnc As Char() = TwoOne(inp)
    For i = tEnc.Length To 1023
        tEnc = tEnc + Chr(0)
    Next
    Dim len As Integer = tEnc.Length / 2

    Dim tmpStr(1023) As Char
    Array.Clear(tmpStr, 0, 1024)
    Dim tmpPtr = Marshal.StringToHGlobalAnsi(tmpStr)

    Dim nRet = ExtractDat(tEnc, len, tmpPtr, tMack, tKsn)

    tmpStr = Marshal.PtrToStringAnsi(tmpPtr)
    Dim tsl = tmpStr.Length
    Encrypt = tmpStr
End Function 
```

这段代码吐了出来

`Ü‰Òdÿo ålUäÙålUäÙålUäÙålUäÙålUäÙålUäÙålUäÙ`

所以我得到了正确的字符串，但后面跟着一串重复的垃圾字符。我希望我在这里做了一些公然错误的事情，但是我尝试将数据作为字节和字符提取，并以许多不同的方法进行转换，但我似乎无法摆脱这些字符......还有，`ExtractDat`不返回字符串的长度（不是问题，因为它不应该，这真的很烦人）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T02:24:07.513

原来 dll 很糟糕，所以在我从供应商那里得到一个新的编译之后，它似乎工作了。

# file - 调用输入文件不起作用

> ID：11044982
> 
> 赞同：1
> 
> 时间：2012-06-15T05:18:41.023
> 
> 标签：file, r, input, bioconductor

我正在使用来自 bioconductor 的 Gviz 库。我输入了一个制表符分隔的文件，其中包含我需要在我的染色体表意文字上绘制的 CNV 位置。

我的输入文件由 dat 定义，有 4 列

*   [1] 染色体
*   [2] 开始
*   [3] 结束
*   [4] 宽度（可以是“+”或“-”，取决于拷贝数的方向）

所以我这样做了：

```
library(IRanges)
libraray(Gviz)
gen <- "mm9"
chr <- "chr1"

itrack <- IdeogramTrack(genome = gen, chromosome = chr)
gtrack <- GenomeAxisTrack()

dat <- read.delim("C:/R/1ips_chr1.txt", header = FALSE, sep ="\t")
s <- dat[2]
e <- dat[3]
l <- dat[4] 
```

当我调用文件 dat 时，它显示一条错误消息：

```
atrack1 <- AnnotationTrack( start = s, width = l , chromosome = chr, genome = gen, name =  "Sample1")
Error : function (classes, fdef, mtable)  : unable to find an inherited method for function ".buildRange", for signature "NULL", "data.frame", "NULL", "data.frame" 
```

显然我调用输入文件（在 dat 中）的方式不满足 R .. 请有人帮助我:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T06:06:36.790

从包的参考[手册](http://www.bioconductor.org/packages/release/bioc/manuals/Gviz/man/Gviz.pdf)`Gviz`（我不熟悉）中，参数`start`和函数`width`中的参数`AnnotationTrack`必须是整数向量。当您`dat`使用单个方括号进行子集化时`[`，生成的对象是 a `data.frame`（`?`[.data.frame``有关此内容的更多信息，请参阅）。试试吧

```
s <- dat[[2]]
e <- dat[[3]]
l <- dat[[4]] 
```

获得整数向量。

# java - Android 是否有相当于 JPanel 的功能？

> ID：11044984
> 
> 赞同：3
> 
> 时间：2012-06-15T05:18:52.087
> 
> 标签：java, android, view, panel

是否有与 Java 面板等效的 Android？我需要具有固定大小的东西，我可以动态添加不同的视图。有这样的技术吗？

我基本上想要一个在 xml 代码中设置大小的空白区域，稍后我可以通过活动添加按钮。稍后添加的原因是按钮的数量和按钮的大小会变化很大，但仍需要填充该区域。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T23:16:37.963

There isn't a JPanel class in Android but you can use layouts just as effectively. Check out this [link.](http://developer.android.com/guide/topics/ui/declaring-layout.html)

# checkbox - 在 WiX 中存储 CheckBox 的值

> ID：11044992
> 
> 赞同：2
> 
> 时间：2012-06-15T05:19:56.767
> 
> 标签：checkbox, wix, registry, wix3.6

我使用 Wix 3.6 RC 编写了一个安装程序。我在对话框 UI 中有一个复选框，该复选框最初被禁用且未选中。旁边有一个“验证”按钮。当我按下此按钮时，将执行（立即）自定义操作并设置一个参数值，该值决定是否启用复选框。这是代码：

```
<Control Id="VirtualCheckBox"
                 Type="CheckBox"
                 CheckBoxValue="1"
                 X="35" Y="100"
                 Width="160" Height="20"
                 Disabled="yes"
                 Text="!(loc.VirtualizationDlg_ChkBox)" Property="ENABLEVIRTUALIZATION">
  <Condition Action="enable"><![CDATA[INTEGRATED = "1"]]></Condition>
  <Condition Action="disable"><![CDATA[INTEGRATED = "0"]]></Condition>
</Control> 
```

我将这个复选框的值存储在注册表中：

```
<Component Id="Virtualization_RegistryEntries" Guid="GUID-IS-HERE">
    <Condition>Not Installed</Condition>
    <RegistryKey Root="HKCU"
                 Key="Software\!(loc.CompanyName)\!(loc.ProductName)">
      <RegistryValue Type="string" Name="Virtualization" Value="[ENABLEVIRTUALIZATION]" KeyPath="yes"/>
    </RegistryKey>
  </Component> 
```

现在我必须这样做：
1）如果用户没有单击验证按钮：注册表获取值 0
2）如果他单击按钮（CA 获取错误并且复选框保持禁用状态）：注册表获取值 0
3）如果他单击按钮和复选框启用但他没有选中复选框：注册表获取值 0
4）如果他单击按钮并且复选框启用并且他确实选中了复选框：注册表获取值 1

我的不是只在一个条件下工作，当他检查这个时，注册表确实得到 1，但它要么被禁用，要么保持未选中状态，注册表什么也得不到。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-15T07:01:06.467

你试过给你的变量一个默认值吗？

```
<Property Id="ENABLEVIRTUALIZATION" Value="0" /> 
```

像这样简单的事情应该可以解决问题！

# themes - Spree Commerce：有什么主题吗？

> ID：11044994
> 
> 赞同：10
> 
> 时间：2012-06-15T05:20:07.743
> 
> 标签：themes, spree

我搜索了一上午，发现 Spree 没有任何主题可供购买或下载。看来我必须自己建立自定义店面。

与 OpenCart 和 PrestaShops 相比，Spree 在这方面似乎非常有限。

我对吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-15T18:20:44.407

有几个公开可用的主题：

*   [https://github.com/spree/spree_fancy](https://github.com/spree/spree_fancy)
*   [http://spreecommerce.com/extensions/254-spree_multi_theme](http://spreecommerce.com/extensions/254-spree_multi_theme)
*   [https://github.com/spree/spree_rdr_theme](https://github.com/spree/spree_rdr_theme)
*   [https://github.com/sammyd/spree_tuatun_theme](https://github.com/sammyd/spree_tuatun_theme)
*   [https://github.com/spree/spree_blue_theme](https://github.com/spree/spree_blue_theme)

以及其他可用的：[https ://github.com/search?langOverride=&q=spree+theme&repo=&start_value=1&type=Repositories](https://github.com/search?langOverride=&q=spree+theme&repo=&start_value=1&type=Repositories)

# java - 在 Java Applet 中使用计时器计为秒表

> ID：11044999
> 
> 赞同：2
> 
> 时间：2012-06-15T05:21:02.273
> 
> 标签：java, swing, timer, applet, japplet

我想创建一个秒表来为我的比赛打分。假设我有一个变量：int sec = 0。当游戏开始时，我想要一个 g.drawString 来绘制小程序的时间。因此，例如每秒，sec 将增加 1。

我该如何让它 g.drawString(Integer.toString(sec), 40, 400) 递增 1 并每秒绘制一次？

谢谢。

编辑：

我已经想出了如何增加它并将其打印到屏幕上，方法是使用 ActionListener 并将 g.drawString 放在那里，但它会相互打印。如果我将 g.drawString 放入 paint 方法中并且仅在 ActionListener 中将 sec 增加 1，则会出现闪烁。我应该使用双缓冲吗？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T05:39:50.183

```
import java.awt.event.*;
import javax.swing.*;

public class StopWatch extends JLabel
            implements MouseListener, ActionListener {

   private long startTime;   // Start time of stopwatch.
                             //   (Time is measured in milliseconds.)

   private boolean running;  // True when the stopwatch is running.

   private Timer timer;  // A timer that will generate events
                         // while the stopwatch is running

   public StopWatch() {
         // Constructor.
      super("  Click to start timer.  ", JLabel.CENTER);
      addMouseListener(this);
   }

   public void actionPerformed(ActionEvent evt) {
          // This will be called when an event from the
          // timer is received.  It just sets the stopwatch
          // to show the amount of time that it has been running.
          // Time is rounded down to the nearest second.
       long time = (System.currentTimeMillis() - startTime) / 1000;
       setText("Running:  " + time + " seconds");
   }

   public void mousePressed(MouseEvent evt) {
          // React when user presses the mouse by
          // starting or stopping the stopwatch.  Also start
          // or stop the timer.
      if (running == false) {
            // Record the time and start the stopwatch.
         running = true;
         startTime = evt.getWhen();  // Time when mouse was clicked.
         setText("Running:  0 seconds");
         if (timer == null) {
            timer = new Timer(100,this);
            timer.start();
         }
         else
            timer.restart();
      }
      else {
            // Stop the stopwatch.  Compute the elapsed time since the
            // stopwatch was started and display it.
         timer.stop();
         running = false;
         long endTime = evt.getWhen();
         double seconds = (endTime - startTime) / 1000.0;
         setText("Time: " + seconds + " sec.");
      }
   }

   public void mouseReleased(MouseEvent evt) { }
   public void mouseClicked(MouseEvent evt) { }
   public void mouseEntered(MouseEvent evt) { }
   public void mouseExited(MouseEvent evt) { }

}  // end StopWatchRunner 
```

一个测试组件的小程序：

```
/*
   A trivial applet that tests the StopWatchRunner component.
   The applet just creates and shows a StopWatchRunner.
*/

import java.awt.*;
import javax.swing.*;

public class Test1 extends JApplet {

   public void init() {

      StopWatch watch = new StopWatch();
      watch.setFont( new Font("SansSerif", Font.BOLD, 24) );
      watch.setBackground(Color.white);
      watch.setForeground( new Color(180,0,0) );
      watch.setOpaque(true);
      getContentPane().add(watch, BorderLayout.CENTER);

   }

} 
```