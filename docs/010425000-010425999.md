# StackOverflow 问答 10425000-10425999

# ruby-on-rails-3 - Ruby-on-Rails 使用 jquery mobile，重定向不更改 url

> ID：10425000
> 
> 赞同：2
> 
> 时间：2012-05-03T04:11:37.837
> 
> 标签：ruby-on-rails-3, jquery-mobile, ruby-on-rails-3.1

我在使用 jquery mobile 时登录和一些操作表单有问题。当我尝试登录帐户时，它会转到控制器会话 - 操作创建。

```
def create 
   ...
   redirect_to root_path
end 
```

登录后更改页面主页正常，但 url 仍然保留 localhost:3000/users/sign_in

如何解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-17T16:16:28.967

我已经使用 Rails 3.2.3 和 mobylette gem 测试了 jQuery mobile 以进行浏览器检测。在您的应用程序布局文件中添加带有来自 rails 的请求数据的 data-url 属性。

`<div data-role="page" data-url="<%= request.path %>">`

更多信息在这里（外部链接，对话框）：

[页面链接 Jquery mobile](http://jquerymobile.com/demos/1.1.0/docs/pages/page-links.html)

# c++ - 用 C++ 创建一个定时游戏

> ID：10425001
> 
> 赞同：1
> 
> 时间：2012-05-03T04:11:42.477
> 
> 标签：c++, visual-studio, visual-c++

我目前在 C++ 控制台应用程序中编写一个简单的游戏。我想实时显示一个计时器，该计时器在它执行的第一个动作时开始，并在计时器达到预定时间（例如 5 分钟）时停止游戏。我不知道如何在 C++ 中做到这一点，所以我想知道是否有人对如何做到这一点有任何想法？

在此先感谢，约翰。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T04:15:12.743

您可以在游戏开始时使用 gettime() 来获取开始时间。在游戏期间，使用相同的方法并从开始时间中减去以检查所需的持续时间。您可以为此创建一个单独的流程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-25T01:23:35.673

对于任何寻找答案的人，您可以使用 Easylogging++ 性能跟踪功能

看到[这个链接](https://github.com/easylogging/easyloggingpp#performance-tracking)；[这个](https://github.com/easylogging/easyloggingpp/blob/master/samples/STL/timed-block.cpp)和[这个](https://github.com/easylogging/easyloggingpp/blob/master/samples/STL/timed-scope.cpp)样本_

（披露，我是这个图书馆的主要作者，不是试图做广告，但因为这个功能适用于这个问题所以提到这个）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T06:08:41.117

```
#include <ctime>                // ctime is still quite useful
clock_t start = clock();        // gets number of clock ticks since program start

clock_t end = 5 * CLOCKS_PER_SEC; // this is 5 seconds * number of ticks per second

// later, in game loop
if (clock() - start) > end { // clock() - start returns the current ticks minus the start ticks. we check if that is more than how many we wanted. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T14:17:06.707

```
 #include <stdio.h>
#include <time.h>

int main ()
{

    unsigned int x_hours=0;
    unsigned int x_minutes=0;
    unsigned int x_seconds=0;
    unsigned int x_milliseconds=0;
    unsigned int totaltime=0,count_down_time_in_secs=0,time_left=0;

    clock_t x_startTime,x_countTime;
    count_down_time_in_secs=10;  // 1 minute is 60, 1 hour is 3600

    x_startTime=clock();  // start clock
    time_left=count_down_time_in_secs-x_seconds;   // update timer

    while (time_left>0) 
    {
        x_countTime=clock(); // update timer difference
        x_milliseconds=x_countTime-x_startTime;
        x_seconds=(x_milliseconds/(CLOCKS_PER_SEC))-(x_minutes*60);
        x_minutes=(x_milliseconds/(CLOCKS_PER_SEC))/60;
        x_hours=x_minutes/60;

        time_left=count_down_time_in_secs-x_seconds; // subtract to get difference 

        printf( "\nYou have %d seconds left  ",time_left,count_down_time_in_secs);
    }

    printf( "\n\n\nTime's out\n\n\n");

return 0;
} 
```

# javascript - 将 Knockout.js 模型应用于多个元素

> ID：10425005
> 
> 赞同：1
> 
> 时间：2012-05-03T04:12:29.077
> 
> 标签：javascript, knockout.js, model-binding

有没有办法将单个视图模型应用于多个元素？

基本上我有一段 html`VM1`应该绑定到视图模型`VM2`（不过 KO 似乎不喜欢这个（我什至尝试`ko.cleanNode(element)`在小节上使用）。所以我想做的是通过将绑定应用到需要它的每个部分来更具体地绑定我的绑定。没有代码这很难解释，所以我们开始吧：

```
<section>
    <ul>
        <li id="one">...</li>
        <li id="two">...</li>
        <li id="three">...</li>
        <li id="diffmodel">...</li>
    </ul>
</section> 
```

我目前拥有的是`VM1`被绑定`<section>`，`VM2`被绑定`#diffmodel`，但KO似乎不喜欢这样。

我目前的目标（以及提出的问题）是适用`VM1`于`#one`, `#two`, and `#three`, and `VM2`to `#diffmodel`，但这似乎也不起作用（`VM1`根本不受约束）。

这种情况有很好的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T04:25:09.100

一个非常简单的解决方案是使用自定义绑定来防止元素的子元素被绑定。

它会是这样的：

```
ko.bindingHandlers.ignoreBindings = {
    init: function() {
        return { controlsDescendantBindings: true };
    }        
};

var VM1 = {
    valueOne: ko.observable("one"),
    valueTwo: ko.observable("two"),
    valueThree: ko.observable("three")   
};

var VM2 = {
    different: ko.observable("different")  
};

ko.applyBindings(VM1);
ko.applyBindings(VM2, document.getElementById("diffmodel")); 
```

HTML：

```
<section>
    <ul>
        <li id="one" data-bind="text: valueOne"></li>
        <li id="two" data-bind="text: valueTwo"></li>
        <li id="three" data-bind="text: valueThree"></li>
        <li data-bind="ignoreBindings: true">
            <div id="diffmodel" data-bind="text: different"></div>
        </li>
    </ul>
</section>​​ 
```

示例：http: [//jsfiddle.net/rniemeyer/FesgK/](http://jsfiddle.net/rniemeyer/FesgK/)

在 KO 2.1（目前在 RC）中，`ignoreBindings`自定义绑定甚至可以用作无容器绑定，例如：http: [//jsfiddle.net/rniemeyer/FesgK/1/](http://jsfiddle.net/rniemeyer/FesgK/1/)

# juice-ui - Juice UI droppable 示例 - 无知的新手无法进行工作

> ID：10425011
> 
> 赞同：1
> 
> 时间：2012-05-03T04:13:22.120
> 
> 标签：juice-ui

抱歉，Juice UI 新手，以及真正的网络应用新手。从 Juice UI 网站获取简单示例时遇到问题。它应该说明制作拖放示例是多么容易，但我遇到了很多错误，这让我觉得我错过了一些非常基本的东西。我正在尝试使用 Droppable 控件，记录在这里：http: [//juiceui.com/controls/droppable](http://juiceui.com/controls/droppable)

可拖动示例运行良好，所以我已经做到了这一点，但是当我将可拖放示例文本粘贴到我的 C# Web 应用程序中时，我收到样式需要位于表单之外、正文之外等的错误 - 我继续前进它向上链。最终它说“元素样式需要在父元素中”——如果我不能把它放在页面上，我不确定把它放在哪里。我想在 .css 文件中？此外，它说标签缺少必需的属性“类型”。

任何帮助将非常感激！

```
<style>
    .draggable { width: 100px; height: 100px; padding: 0.5em; float: left; margin: 10px 10px 10px 0; }
    .droppable { width: 150px; height: 150px; padding: 0.5em; float: left; margin: 10px; }
</style>

<script>
    $(function(){
        $( "#_Default" ).droppable( "option", "drop", function( event, ui ) {
            $( this )
                .addClass( "ui-state-highlight" )
                .find( "p" )
                    .html( "Dropped!" );
            }
        );
    });
</script>

<asp:panel ID="_Draggable" CssClass="draggable ui-widget-content" runat="server">
    <p>Drag me to my target</p>
</asp:panel>
<juice:draggable TargetControlID="_Draggable" runat="server"/>

<asp:panel ID="_Default" CssClass="droppable ui-widget-header" runat="server" ClientIDMode="Static">
    <p>Drop here</p>
</asp:panel>
<juice:droppable TargetControlID="_Default" runat="server"/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T04:16:50.720

您正在审阅的文档是部分文档。我相信它假设您已经编写了文档的其余部分：

```
<!DOCTYPE html>
<html>
  <head>
    <title>Droppable Example</title>
  </head>
  <body>
    <!-- Your Code Here -->
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T04:39:07.583

好的，一项研究表明：

1.  元素总是在该部分内 - 呃
2.  始终需要 type="text/css" 的类型属性，所以我补充说
3.  为 (type="text/javascript") 添加了 type 属性
4.  弹出另一个错误，与示例中的 _Default id 冲突，与创建新 Web 应用程序时的 Default 类名相同。错误的元素 ID 选择示例，其中用户可能会做我正在做的事情，创建一个默认的 Web 应用程序并粘贴代码并期望它运行。

不知道为什么在编写这个示例时没有捕获到这些错误，但是对于 Juice UI 的第一次体验有点令人沮丧。感谢大家的时间和回复。

# android - 如何从地址中获取经度和纬度？

> ID：10425017
> 
> 赞同：0
> 
> 时间：2012-05-03T04:14:09.830
> 
> 标签：android, google-maps, geocoding

我必须在我输入任何地址的地方实现我的谷歌地图，它会自动获取经度和纬度。这是我尝试过的代码

```
 coder = new Geocoder(this);
 try {
     String locationName ="Gulshan 1";

        List<Address> addressList = coder.getFromLocationName(
                locationName, 5);
        if (addressList != null && addressList.size() > 0) {
            destLat = (int) (addressList.get(0).getLatitude() * 1e6);
            destLon = (int) (addressList.get(0).getLongitude() * 1e6);

            TextView pozycja = (TextView) findViewById(R.id.position);
            pozycja.setText("lat: "
                    + addressList.get(0).getLatitude() + " lng: "
                    + addressList.get(0).getLongitude());
    }
 }
 catch (Exception e) {
     Log.e("error", e.getMessage().toString());
} 
```

可以从此代码获取位置吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T04:42:08.097

使用下面的代码它将起作用。

```
 Geocoder coder = new Geocoder(this);
     List<Address>  address = coder.getFromLocationName(
                                                "your address", 5);
                                        if (address == null)
                                            Log.d(TAG,
                                                    "Latitude and longitude not found");
                                        else {
                                            Address location = address.get(0);
                                            latitude = location.getLatitude();
                                            longitude = location.getLongitude();
                                        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T04:45:43.570

使用以下代码：

```
List<Address> addressList = coder.getFromLocationName(locationName, 1);
Address addr=addressList.get(0);
 destLat=addr.getLatitude();
destLon =addr..getLongitude();
TextView pozycja = (TextView) findViewById(R.id.position);
            pozycja.setText("lat: "+destLat+ " lng: "+destLon); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T07:56:18.320

您可以使用以下代码轻松地从任何地址（城市、省、国家）获取纬度和经度。

```
 public void getlatd()

   {        
       String add=txt_add.getText().toString();//address of location u have entered
      Toast.makeText(this, "Your add is : "+add, Toast.LENGTH_LONG).show();
    final Geocoder geocoder = new Geocoder(this);       
    try {

      List<Address> addresses = geocoder.getFromLocationName(add, 1);

      if (addresses != null && !addresses.isEmpty()) {

       Address address = addresses.get(0);

       txt.setText("latitude and longtd is :"+address.getLatitude()+"\n"+address.getLongitude());
      }
    else  {
           Toast.makeText(this, "NO latd and longtd for this add", Toast.LENGTH_LONG).show(); 
      }
    } 
   catch (IOException e)    {
         Toast.makeText(this, "Error :"+e.getMessage(), Toast.LENGTH_LONG).show();
    }
}

                     "Robo-Techi" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T04:23:48.087

你可以看到这个。这就是我获得转换信息的方式。

//getLatLon("Gulshan-1","达卡");

```
private void getLatLon(String loc,String div) {
        Address addr = null;
        try {
            List<Address> addresses = new Geocoder(DataScrapper.this, Locale
                    .getDefault()).getFromLocationName(loc + " " + div
                    + " Bangladesh", 1);

            if (!addresses.isEmpty()) {
                addr = addresses.get(0);

            } else
                addr = null;
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        // addr.getLatitude();
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T04:42:30.843

```
public double[] getGeoCodesFromAddress(String pLocationAddress) {
        try {

            cLocationGeneratorProp = new LocationGeneratorProp();
            objGeoCoder = new Geocoder(vContext, Locale.getDefault());
            vListAddress = objGeoCoder.getFromLocationName(pLocationAddress, 1);
            if (vListAddress != null) {
                latlong = new double[2];
                latlong[0] = vListAddress.get(0).getLatitude();
                latlong[1] = vListAddress.get(0).getLongitude();
            }

        } catch (Exception e) {
            Log.e("getGeoCodesFromAddress()", e.getMessage().toString());

        }
        return latlong;
    } 
```

LocationGeneratorProp

```
public class LocationGeneratorProp {
    private String postalcode;
    private String countryname;
    private String countrycode;
    private String fulladdress;
    private String locationtype;
    private double locationLat;
    private double locationLong;
    private double fromlocationlatitude;
    private double fromlocationlongitude;
    private double destinationlocationlatitude;
    private double destinationlocationlongitude;

    public String getPostalcode() {
        return postalcode;
    }

    /**
     * @param postalcode
     *            Postal Code Of the Adrress
     */
    public void setPostalcode(String postalcode) {
        this.postalcode = postalcode;
    }

    /**
     * @return String CountryName
     * 
     */
    public String getCountryname() {
        return countryname;
    }

    public void setCountryname(String countryname) {
        this.countryname = countryname;
    }

    public String getCountrycode() {
        return countrycode;
    }

    public void setCountrycode(String countrycode) {
        this.countrycode = countrycode;
    }

    public String getFulladdress() {
        return fulladdress;
    }

    public void setFulladdress(String fulladdress) {
        this.fulladdress = fulladdress;
    }

    public String getLocationtype() {
        return locationtype;
    }

    public void setLocationtype(String locationtype) {
        this.locationtype = locationtype;
    }

    public double getLocationLat() {
        return locationLat;
    }

    public void setLocationLat(double locationLat) {
        this.locationLat = locationLat;
    }

    public double getLocationLong() {
        return locationLong;
    }

    public void setLocationLong(double locationLong) {
        this.locationLong = locationLong;
    }

    public double getFromlocationlatitude() {
        return fromlocationlatitude;
    }

    public void setFromlocationlatitude(double fromlocationlatitude) {
        this.fromlocationlatitude = fromlocationlatitude;
    }

    public double getFromlocationlongitude() {
        return fromlocationlongitude;
    }

    public void setFromlocationlongitude(double fromlocationlongitude) {
        this.fromlocationlongitude = fromlocationlongitude;
    }

    public double getDestinationlocationlatitude() {
        return destinationlocationlatitude;
    }

    public void setDestinationlocationlatitude(
            double destinationlocationlatitude) {
        this.destinationlocationlatitude = destinationlocationlatitude;
    }

    public double getDestinationlocationlongitude() {
        return destinationlocationlongitude;
    }

    public void setDestinationlocationlongitude(
            double destinationlocationlongitude) {
        this.destinationlocationlongitude = destinationlocationlongitude;
    }

} 
```

jst用给定的地址测试了代码工作fne让我知道是否有任何问题..with ths

# jquery - 如何根据选择的选择列表值显示/隐藏 2 个不同的 div？

> ID：10425026
> 
> 赞同：1
> 
> 时间：2012-05-03T04:14:40.673
> 
> 标签：jquery, forms, drop-down-menu

我对 jquery 很陌生，并且已经搜索了很多。如果选择了 6、7、8 或 9 的值，我想显示 div(free1a)。如果从选择列表中选择了任何其他值，则显示 div(free2a)。如果选择了任何 class="show1"，则使用下面的我的 html 显示 div id="free1a"。如果选择了任何 class="show2"，则显示 div id="free2a"。

提前感谢任何人的意见

**HTML：**

```
<select name="quantity" id="community" class="store-qty" data-inline="true">
      <option value="">Select</option>
      <option class="show1" value="6">6</option>
      <option class="show1" value="7">7</option>
      <option class="show1" value="8">8</option>
      <option class="show1" value="9">9</option>
      <option class="show2" value="10">10</option>
      <option class="show2" value="11">11</option>
      <option class="show2" value="12">12</option>
      <option class="show2" value="13">13</option>
      <option class="show2" value="14">14</option>
      <option class="show2" value="15">15</option>
      <option class="show2" value="16">16</option>
      <option class="show2" value="17">17</option>
      <option class="show2" value="18">18</option>
      <option class="show2" value="19">19</option>
      <option class="show2" value="20">20</option>
    </select>

<div id="free1a">Stuff in here...</div>

<div id="free2a">Other stuff in here...</div> 
```

**Javascript：**

```
$("#free1a").hide();
$("#free2a").hide();
$("#community").change(function(){
   $("#free1a").show($(this).class()==".show1");
}).change();
$("#community").change(function(){
   $("#free2a").show($(this).class()==".show2");
}).change(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T04:35:51.810

您很好地标记了您的html。

[http://jsfiddle.net/8C8cP/1/](http://jsfiddle.net/8C8cP/1/)

```
$(function() {
    $('#community').change(function() {
        var option = $(this).find('option:selected');
        $('#free1a').toggle(option.hasClass('show1'));
        $('#free2a').toggle(option.hasClass('show2'));
    }).change();
});​ 
```

唯一令人困惑的部分是`.change()`最后。那是在页面第一次进入时触发事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T04:25:30.527

我在上面举了你的例子，并创造了我相信你所要求的东西。我删除了 javascript include src，因此请确保在测试时将其包含回来。我使用[http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js](http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js)

希望能帮助到你！

```
<!DOCTYPEhtml PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<title></title>
<script src="" type="text/javascript"></script>
<script type="text/javascript">

$(document).ready(function(){
    $("#free1a").hide();
    $("#free2a").hide();

    $("#community").change(function(){

        if(this.value == 6 || this.value == 7 || this.value == 8 || this.value == 9){
            $("#free2a").hide();
            $("#free1a").show();
        }
        else if(this.value == 10 || this.value == 11 || this.value == 12 || this.value == 13){
            $("#free1a").hide();
            $("#free2a").show();
        }
        else{
            $("#free1a").hide();
            $("#free2a").hide();
        }

    }).change();
    $("#community").change(function(){

    }).change();
});

</script>
</head>
<body>
<select name="quantity" id="community" class="store-qty" data-inline="true">
      <option value="">Select</option>
      <option class="show1" value="6">6</option>
      <option class="show1" value="7">7</option>
      <option class="show1" value="8">8</option>
      <option class="show1" value="9">9</option>
      <option class="show2" value="10">10</option>
      <option class="show2" value="11">11</option>
      <option class="show2" value="12">12</option>
      <option class="show2" value="13">13</option>
      <option class="show2" value="14">14</option>
      <option class="show2" value="15">15</option>
      <option class="show2" value="16">16</option>
      <option class="show2" value="17">17</option>
      <option class="show2" value="18">18</option>
      <option class="show2" value="19">19</option>
      <option class="show2" value="20">20</option>
    </select>

<div id="free1a">Stuff in here...</div>

<div id="free2a">Other stuff in here...</div>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T04:30:29.417

```
$("#community").change(function(){
    var tmp = $(this).find("option:selected");
    if (!tmp.is('.show1,.show2')){
        $("#free1a,#free2a").hide();
        return;
    }
    var isFree1a = tmp.hasClass("show1");
    $("#free1a").toggle(isFree1a);         
    $("#free2a").toggle(!isFree1a);         
}).change(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T04:38:04.707

你可以设置小对象

```
 $(document).ready(function(){
        var free1a = {'value6':true, 'value7':true, 'value8':true, 'value9':true};
        $("#free1a").hide();
        $("#free2a").hide();

        $('#community').change(function(){

            $("#free1a").hide();
            $("#free2a").hide();

            if(free1a['value'+$(this).attr('value')])
                $("#free1a").fadeIn();
            else
                $("#free2a").fadeIn();
        });
    }); 
```

# php - 将excel导入mssql时出错。“致命错误：带有消息的未捕获异常 'com_exception'”

> ID：10425028
> 
> 赞同：1
> 
> 时间：2012-05-03T04:14:56.563
> 
> 标签：php, sql-server, com

我正在开发一个允许用户上传 excel 文件的项目，当用户单击提交时，excel 文件中的数据将进入 MSSQL 数据库。目前，上传工作正常，但无法进入 MSSQL 数据库。

我以前使用过相同的脚本，它运行良好（Windows XP）。现在我已经将我的机器更改为 Windows 7，我收到了 COM 错误。我已经尝试了几乎所有可以上网的方法（dcomcnfg 配置），但没有任何帮助。

请帮忙。

以下是错误消息：

* * *

```
<pre>
Application name: Microsoft Excel

Loaded version: 14.0

function import-->open below filename: 
C:/xampp/htdocs/www/mysystem/tmp/import_excel_0.32887000 1336015991.xls

Fatal error:  Uncaught exception 'com_exception' with message '<b>Source:</b> Microsoft Excel<br/><b>Description:</b> Microsoft Excel cannot access the file 'C://xampp/htdocs/www/mysystem/tmp/import_excel_0.32887000 1336015991.xls'. There are several possible reasons:

• The file name or path does not exist.
• The file is being used by another program.
• The workbook you are trying to save has the same name as a currently open workbook.' in C:\xampp\htdocs\www\mysystem\import\ImportData.php:52
Stack trace:
#0 C:\xampp\htdocs\www\mysystem\import\ImportData.php(52): variant->Open('C:/xampp/htdocs...')
#1 C:\xampp\htdocs\www\mysystem\import\ImportData.php(19): Import('C:/xampp/htdocs...')
#2 C:\xampp\htdocs\www\mysystem\index.php(698): require('C:\xampp\htdocs...')
#3 {main}
  thrown in C:\xampp\htdocs\www\mysystem\import\ImportData.php on line 52 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T00:44:55.443

好的，这为我解决了

如果您已配置 IIS，请尝试以下操作：

*   运行“dcomcnfg”进入组件服务
*   打开组件服务 > 计算机 > 我的电脑 > DCOM 配置
*   搜索 Microsoft Excel 应用程序或您在 COM 上使用的适当应用程序
*   右键单击它并打开属性
*   选择“身份”选项卡
*   通常，默认情况下将其设置为“启动用户”。您必须将其更改为“交互式用户”。
*   应用这些新设置并测试您的 COM 应用程序。它现在应该可以正常工作了。

[http://www.php.net/manual/en/class.com.php](http://www.php.net/manual/en/class.com.php)

# jquery - 查找单词并换行 div

> ID：10425036
> 
> 赞同：2
> 
> 时间：2012-05-03T04:15:53.427
> 
> 标签：jquery, text

我无权访问 HTML，只能访问原始文本。是否可以在原始文本中找到一个单词，例如 INFO 和 ENDINFO，并使用它们将 div 包裹在内容周围。

```
<div>
content content content content content

INFO
Information content information content

ENDINFO
</div>

<div>
content content content content content

    <div class="INFO">
    Information content information content

    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T04:27:05.067

这个怎么样？

```
<div id="content">
content content content content content

INFO
Information content information content

ENDINFO
</div>

<div>
content content content content content

    <div class="INFO">
    Information content information content

    </div>
</div>

<script>
$(document)ready(function(){
    var content = $('#content').html();
    var regex = /INFO.*ENDINFO/gi;
    var info = content.match(regex);

    $('.INFO').html(info);
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T06:37:37.283

问题已经得到解答，但我过去创建了一个“搜索荧光笔”。它可能会派上用场：http: [//jsfiddle.net/KeesCBakker/nSb6b/](http://jsfiddle.net/KeesCBakker/nSb6b/)

# hibernate - 在构建期间为 hibernate 4.1.2 生成模式文件

> ID：10425041
> 
> 赞同：2
> 
> 时间：2012-05-03T04:16:17.093
> 
> 标签：hibernate, maven

我目前正在使用带有 hibernate3-maven-plugin 的 Hibernate 3.6.9。我使用目标 hbm2ddl 生成一个 sql 模式文件。

该插件不支持 Hibernate 4.1.2。如何生成架构文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T04:35:11.083

`hibernate3-maven-plugin`只需调用[SchemaExport](http://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/tool/hbm2ddl/SchemaExport.html)来生成模式文件。为什么不自己手动调用呢？

例子 ：

```
Configuration config = new Configuration();

Properties properties = new Properties();

properties.put("hibernate.dialect", "org.hibernate.dialect.PostgreSQLDialect");
properties.put("hibernate.connection.url", "jdbc:postgresql://localhost:5432/Test"); 
properties.put("hibernate.connection.username", "username");
properties.put("hibernate.connection.password", "password");
properties.put("hibernate.connection.driver_class", "org.postgresql.Driver");
properties.put("hibernate.show_sql", "true");
config.setProperties(properties);

config.addAnnotatedClass(MyMappedPojo1.class);
config.addAnnotatedClass(MyMappedPojo2.class);
..................

SchemaExport schemaExport = new SchemaExport(config);

/**Just dump the schema SQLs to the console , but not execute them ***/
schemaExport.create(true, false); 
```

# html - VB 2010：在大文本块中搜索字符串（例如 HTML 源代码）

> ID：10425043
> 
> 赞同：0
> 
> 时间：2012-05-03T04:16:24.090
> 
> 标签：html, string, parsing, search, full-text-search

我正在为 WP7 和 Win7 开发一个应用程序，它将直接从特定网站中提取信息。该应用程序将下载 HTML 源代码并对其进行解析以找到所需的字符串。字符串可能没有标签。我尝试过传统的 TextBox.SelectionText 方法，但它需要很长时间才能可行。

有没有更快的方法在 HTML 源代码中寻找字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T04:22:16.353

“String.IndexOf”方法应该是确定字符串是否位于页面 HTML 中的最有效方法。

因此，如果您有来自各个网站的 HTML 文件，您可以将页面一个一个地加载到一个字符串中，并使用“IndexOf”来识别页面中是否存在某个字符串。

# iphone - 如何实现通过alertview保存多个数组项的代码？

> ID：10425052
> 
> 赞同：-1
> 
> 时间：2012-05-03T04:17:16.743
> 
> 标签：iphone, ios5

我已经实现了带有文本字段的警报视图代码，当我单击“确定”按钮时，文本字段输入的值存储在字符串格式中作为（str）并且我将该值添加到数组中以便我将数组加载到表视图但是这里的问题是每个时间表视图都包含一个项目，但我想存储多个项目，从警报输入项目并将其保存为数组项目如何实现通过警报视图保存多个数组项目的代码任何人都可以帮助我在 iphone 中解决这个问题.

```
myAlert = [[UIAlertView alloc] initWithTitle:@"Enter year" 
                                     message:@"alert message" 
                                    delegate:self 
                           cancelButtonTitle:@"Cancel" 
                           otherButtonTitles:@"Ok", nil];
[myAlert addTextFieldWithValue:@"" label:@"entervalue"];     
alertTextField=[myAlert textFieldAtIndex:0];
alertTextField.keyboardType=UIKeyboardTypeAlphabet;
alertTextField.clearsOnBeginEditing=YES;
alertTextField.clearButtonMode=UITextFieldViewModeWhileEditing;
alertTextField.keyboardAppearance=UIKeyboardAppearanceAlert;
[myAlert show];
[myAlert release];

-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    NSString *buttonTitle=[alertView buttonTitleAtIndex:buttonIndex];
    if ([buttonTitle isEqualToString:@"Ok"]) {

        str = alertTextField.text;

        [savedarray addObject:str];
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T05:01:14.733

```
-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
  NSString *buttonTitle=[alertView buttonTitleAtIndex:buttonIndex];
  if ([buttonTitle isEqualToString:@"Ok"]) {

    str = alertTextField.text;

    [savedarray addObject:str];
    [self.yourtableview reloadData]; // reload your tableview when add new data in array.
  }
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section        {
return savedarray.count;
 }

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}
cell.textLabel.text = [savedarray objectAtIndex:indexPath.row];    
return cell;
} 
```

希望对你有帮助..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T04:45:28.560

如果我要求这样的东西：

```
-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
 NSString *buttonTitle=[alertView buttonTitleAtIndex:buttonIndex];
 if ([buttonTitle isEqualToString:@"Ok"]) 
 {
     str = alertTextField.text;
     if([savedarray Count] < yourRequiredItemsCount)
     {
      [savedarray addObject:str];
      alertTextField = @"";
      [alertView show];
     }
     else
     {
      [alertView release];                //Release the Alert here.
     }
 }
} 
```

告诉我是否有帮助！会给你一个替代的溶胶。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T04:50:42.920

如果您正确分配了 savedarray，那么发布的代码看起来很合理。接下来要检查的是您是否正确使用 savedarray 作为表的数据源。

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return savedarray.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }
    cell.textLabel.text = [savedarray objectAtIndex:indexPath.row];    
    return cell;
} 
```

确保设置与 tableview 的委托和数据源相同的视图控制器。

# bugzilla - 如何设置和提高 bugzilla 响应速度

> ID：10425056
> 
> 赞同：2
> 
> 时间：2012-05-03T04:17:43.543
> 
> 标签：bugzilla

成功安装 bugzilla。但是bugzilla页面（每一页）响应很慢，怎么设置？

服务器平台：LAMP+Debian 6

多谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T18:42:21.947

我不知道您是否正在使用 mod_perl，但如果没有，您应该尝试一下。它确实增加了使用 Apache 时的响应时间。这里有更多关于它[http://perl.apache.org/](http://perl.apache.org/)

# asp.net-mvc-3 - 如何处理 MVC3 中的授权失败

> ID：10425060
> 
> 赞同：1
> 
> 时间：2012-05-03T04:18:12.413
> 
> 标签：asp.net-mvc-3, windows-authentication, roleprovider

我正在使用 Windows 身份验证和自定义角色提供程序构建内部（内部网）MVC3 应用程序。只要用户具有请求的角色，身份验证和角色提供程序就可以正常工作。

例如，我有一个`UserContoller`允许应用程序的用户管理应用程序内的用户帐户。显然我想限制对这个控制器的访问。

如果我这样做：

```
[Authorize]
public class UserController : Controller
{
    ...
} 
```

然后 Windows 身份验证工作正常，并且用户透明登录。但是，我想将控制器限制为特定的用户组。所以我这样做：

```
[Authorize(Roles="UserAdmin")]
public class UserController : Controller
{
    ...
} 
```

如果我的角色提供者返回的角色列表包括“UserAdmin”，那么一切都很好，用户可以访问控制器。

但是，如果用户不在角色中，则浏览器（在 IE8 和 FF10 上测试）会提示输入凭据。如果取消，则服务器返回 401 错误页面。

所以我的问题是，我如何处理用户不在请求角色中的情况，并将他返回到应用程序的主页操作或其他操作以提供用户友好的消息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T08:59:46.063

您还可以创建一个继承自的自定义属性`AuthorizeAttribute`

覆盖`HandleUnauthorizedRequest`方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T05:25:36.153

您可以在 web.config 中指定要在 401 案例中显示的 url。

```
<customErrors mode="RemoteOnly" defaultRedirect="/Error/">
   <error statusCode="401" redirect="/AuthorizationFailed"/>
</customErrors> 
```

# ruby-on-rails - HAML 阻止模板引擎呈现 HTML 以外的任何内容

> ID：10425064
> 
> 赞同：6
> 
> 时间：2012-05-03T04:18:29.097
> 
> 标签：ruby-on-rails, json, haml, rabl, jbuilder

我正在使用 Jbuilder（我也尝试使用 Rabl）来渲染 json。当我尝试在我的应用程序中呈现 jbuilder 模板时，它会在**布局/应用程序**文件中呈现模板并将**HTML**作为 JSON 返回（参见“在布局/应用程序内”行）：

[Github 上的骑行控制器](https://github.com/flov/Hitchlog/blob/jbuilder/app/controllers/rides_controller.rb)

```
Started GET "/random_photo.json"
Processing by RidesController#random_photo as JSON
>>  Rendered rides/random_photo.json.jbuilder within layouts/application (0.3ms)
    Rendered shared/_banners_in_corners.haml (3.0ms)
    Rendered shared/_sign_in_and_out.haml (2.0ms)
    Rendered layouts/_navigation.haml (7.3ms)
Completed 200 OK in 156ms (Views: 120.7ms | ActiveRecord: 3.1ms) 
```

但是，当我在没有模板的情况下渲染 json 并进行`render json: @ride.as_json`调用时，事情会按预期工作。当我创建一个新应用程序并尝试做同样的事情时，一切都按预期工作：

```
Started GET "/posts/1.json"
Processing by PostsController#show as JSON
  Post Load (0.1ms)  SELECT "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT 1  [["id", "1"]]
  Rendered posts/show.json.jbuilder (0.6ms)
Completed 200 OK in 20ms (Views: 19.2ms | ActiveRecord: 0.1ms) 
```

我不知道我对我的应用程序做了什么，它没有正确呈现模板。有任何想法吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-04T05:47:07.090

天哪，我花了大约两天时间才发现导致此问题的问题是我的布局/应用程序文件，该文件名为`aplication.haml`.

现在，当我想使用 Builder for xml 或 Rabl for json 之类的模板引擎时，它会尝试在`layouts/application.haml`文件的 yield 字段中呈现模板，从而将 html 作为 JSON 返回

我发现问题出在`application.haml`文件中

将其命名为 application.html.haml 解决了问题...

# c++ - 尝试编译代码时出现从 char* 到 char 的转换错误

> ID：10425070
> 
> 赞同：1
> 
> 时间：2012-05-03T04:19:37.390
> 
> 标签：c++, function

为了便于阅读，我删掉了很多代码。具体来说，我正在尝试重写 strcat

```
#include <iostream>
using namespace std;

char MYstrcat(char string1[],char string2[]);

int main()
{
    char letter, letter_ans, again;
    const int SIZE = 80;
    char string1 [SIZE];
    char string2 [SIZE]; 
```

获取字符数组的输入

```
 cout << "Enter the first string: ";
    cin >> string1;
    cout << "Enter the second string: ";
    cin >> string2;
    letter_ans=MYstrcat(string1, string2);
    cout << letter_ans;

    cin.get(); cin.get();
    return 0;
} 
```

这是我的 strcat 函数版本

```
char MYstrcat(char string1[],char string2[])
{ 
    int i = 0; //Counters
    int j = 0;

    //Read until null character is encountered then append.
    while (string1[i] != '\0')
    {
        i++;
    }
    while (string2[j]!= '\0'){
        string1[i] = string2[j];
        i++;
        j++;
    }
    string1[i]='\0'; // Place a null character in string2. 
```

我在下一行得到错误：从'char *'到'char'的无效转换

```
 return string1;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T04:28:28.793

```
char MYstrcat(char string1[],char string2[]); // returns a single character
char *MYstrcat(char string1[],char string2[]); // returns a pointer to a string that can be used like string1[] and string2[] 
```

同样地，

```
char letter_ans;    // this gives space for a single char, like int int_ans;
char *letter_ans;   // this makes a pointer to an array of char's, the proper return type 
```

但是，由于您要返回 string1，因此您甚至可能不想使用返回类型。如果你这样声明你的函数：

```
void MYstrcat(char *string1,char *string2); 
```

它将直接对 string1 进行操作，无需返回指向它的指针。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T04:22:17.107

数组分解为 C++ 中的指针，所以当你`return String1`返回 a`char*`时，你的函数的返回类型应该是`char*`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T04:20:58.873

您在标题中返回一个字符，而不是一个字符串。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T04:25:35.077

函数头`char MYstrcat(char string1[],char string2[]);` 将返回类型声明为 char，但函数体返回的是字符串。`return string1;`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T09:12:09.290

因为 string1 是一个 char 数组。ie:char[]... 但你的函数的返回类型是 char 。所以你得到了一个错误。你可以将函数的返回类型更改为 char*，然后测试你的代码。祝你好运。

# android - Android - 如何在内容解析器上进行批量更新

> ID：10425074
> 
> 赞同：3
> 
> 时间：2012-05-03T04:20:07.820
> 
> 标签：android

我在 ArrayList 上使用 for 循环，如果满足条件，我会一一更新我的内容解析器。

是否可以对内容解析器进行批量更新？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T04:43:18.763

您可以使用 ContentProvider.applyBatch(...)

[ContentProvider 批处理操作。](http://developer.android.com/reference/android/content/ContentResolver.html#applyBatch%28java.lang.String,%20java.util.ArrayList%3Candroid.content.ContentProviderOperation%3E%29)

# jquery - 在幻灯片打开之前添加类并在幻灯片关闭后使用 slideToggle 删除类？

> ID：10425075
> 
> 赞同：0
> 
> 时间：2012-05-03T04:20:16.750
> 
> 标签：jquery, slidetoggle

我正在使用 jQuery 在单击链接时滑动打开和关闭菜单，效果很好。但是，我试图在菜单滑动打开之前单击链接时添加一个类，然后在菜单滑动关闭后删除相同的类。

所以：单击 > addClass > 滑动菜单打开 > 再次单击 > 滑动菜单关闭 > removeClass

```
 $("#categoryNav").hide();
    $('#showHideLink').click(function(){
        $("#categoryNav").slideToggle(function() { 
            $('#showHideLink').toggleClass("catMenuOpen");
            $('#mainNav').toggleClass("catMenuOpen");
        });
    }); 
```

我尝试`$('#mainNav'.addClass('catMenuOpen');`在`slideToggle`函数之前添加，而不是使用`toggleClass`它在第一次点击时给我正确的效果，但我不知道如何在导航再次关闭后删除类。

干杯

**编辑：** 这是我的 HTML：

```
 <div id="mainNav">
        <ul>
            <li><a href="#">Link 1</a></li>
            <li><a href="#">Link 2</a></li>
            <li><a id="showHideLink">Show Hide</a></li>
        </ul>
    </div>
    <div id="categoryNav">
        <ul>
            <li><a href="#">CatMenu</a></li>
        </ul>
    </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T04:43:19.957

这将按照您要求的顺序进行：

```
$('#showHideLink').click(function(){

    if (!$("#categoryNav").is(":visible"))
        $('#showHideLink, #mainNav').addClass("catMenuOpen");

    $("#categoryNav").slideToggle(function() { 
        if (!$("#categoryNav").is(":visible"))
            $('#showHideLink, #mainNav').removeClass("catMenuOpen");
    });
}); 
```

**编辑**

在这个[jsfiddle中检查它](http://jsfiddle.net/ult_combo/b5sFP/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T04:36:17.053

尝试以下操作：

```
$('#showHideLink').click(function(){
    if($(this).hasClass("catMenuOpen"){
       $(this).removeClass("catMenuOpen");
    }else
       $(this).addClass("catMenuOpen");
    $("#categoryNav").slideToggle(function() { 
        $('#showHideLink').toggleClass("catMenuOpen");
        $('#mainNav').toggleClass("catMenuOpen");
    }); 
```

我不完全确定上面的代码会 100% 工作，因为我没有机会实际测试它，但我的想法是，如果元素具有“开放”类，那么你想删除它（因为你' 再次单击并正在关闭 div）。如果您单击并且元素没有“open”类，那么您希望将其添加到 div。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T04:46:37.020

尝试创建一个具有类名的字符串数组，然后在每次单击时，切换数组值。

```
<script>
var i=0;
var classes = new Array("catMenuClose","catMenuOpen");
$("#categoryNav").hide();
$('#showHideLink').click(function(){
    i=i*(-1)+1;
    $("#categoryNav").slideToggle(function() { 
        $('#showHideLink').toggleClass(classes[i]);
        $('#mainNav').toggleClass(classes[i]);
    });
});
</script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T04:49:00.293

试试这个，希望这会有所帮助

```
$('#showHideLink').click(function(){

    $("#categoryNav").slideToggle(function() { 
        var property = $('#categoryNav').css('display');
        if(property == 'block')
        $('#showHideLink, #mainNav').addClass("catMenuOpen");
        else
        $('#showHideLink, #mainNav').removeClass("catMenuOpen");
    });
}); 
```

这是小提琴[http://jsfiddle.net/eh6jv/1/](http://jsfiddle.net/eh6jv/1/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-10-15T00:27:12.597

我只是在寻找其他东西时遇到了这个。这是一个工作代码。

/ *===================脚本从这里开始 ====================* /

```
(function($){    
    $(document).ready(function() {
        $('#open_sidebar').click(function() {       
           if(!$(this).hasClass("open")) {
             $("#open_sidebar").toggleClass("open").removeClass('closed');
             $(this).text($(this).text() == 'Close Window' ? 'Open Window' : 'Close Window'); 
           } else {                
             $("#open_sidebar").toggleClass("closed").removeClass('open');
             $(this).text($(this).text() == 'Open Window' ? 'Close Window' : 'Open Window');    
           }
        });
    });
})(jQuery); 
```

/ *===================脚本在这里结束 ====================* /

这是HTML：

```
<div id="open_sidebar">打开窗口</div>
```

这是点击时会发生的情况：

```
<div id="open_sidebar" class="open">关闭窗口</div>
```

在第二次点击：

```
<div id="open_sidebar" class="close">打开窗口</div>
```

# python - 编写将整数分钟转换为“X 小时 Y 分钟”格式的字符串的函数的最佳方法是什么？

> ID：10425081
> 
> 赞同：1
> 
> 时间：2012-05-03T04:20:58.783
> 
> 标签：python, django, django-templates, django-custom-tags

我目前有我的 Django 自定义模板过滤器，如下所示：

```
from django import template

register = template.Library()

@register.filter
def duration(value):
    hours   = value / 60
    minutes = value % 60

    hours_string   = str(hours)   + (" hours"   if hours   > 1 else " hour"  ) if hours   else ""
    minutes_string = str(minutes) + (" minutes" if minutes > 1 else " minute") if minutes else ""

    return ' '.join("{hours} {minutes}".format(hours=hours_string, minutes=minutes_string).split()) 
```

一些可能的输出：

```
1 hour 25 minutes
2 hours
45 minutes
3 hours 1 minute 
```

`' '.join(....split())`诀窍是我从[这个解决方案](https://stackoverflow.com/questions/1898656/remove-whitespace-in-python-using-string-whitespace)中得到的东西。我意识到我只需要在字符串的开头或结尾检查额外的字符串（当它是 0 小时或 0 分钟时），但它似乎可以解决问题，而且对于某些人来说，它可能比正则表达式更容易阅读人们。

我也觉得我违反了 DRY，因为我重复了几乎完全相同的`if-then`块两次。我在想类似的东西...

```
for i, unit in enumerate([hours, minutes]):
    # Do some code.

return ' '.join("{hours} {minutes}".format(hours=value[0], minutes=value[1]).split()) 
```

但我不知道如何在没有另一个`if-then`块的情况下在“小时”或“分钟”之间进行选择。另外每行的两个速记`if-then`也看起来有点难看......

我将不胜感激任何建议或提示。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T07:25:55.107

```
import datetime
def pprint(val):
   if val == 1:
      return '1 minute'
   x = str(datetime.timedelta(minutes=val))[:-3].split(':')
   r = ''
   if int(x[0]):
       r += x[0]+' hours' if int(x[0]) > 1 else x[0]+' hour'
   if int(x[1]):
       r += ' %s minutes' % int(x[1]) if int(x[1]) > 1 else ' %s minute' % int(x[0])
   return r.strip() 
```

样品运行：

```
>>> pprint(65)
'1 hour 5 minutes'
>>> pprint(1)
'1 minute'
>>> pprint(60)
'1 hour'
>>> pprint(61)
'1 hour 1 minute' 
```

您也可以轻松地将其扩展为包括天数，但由于您仅特别提到了小时和分钟，因此我调整了该方法。

主要的繁重工作由 完成`datetime.timedelta`，其余的只是字符串解析。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T05:20:32.230

我将其用于模块化单位转换，包括您描述的那种。我在为 UCI 工作时编写了它，UCI 允许在特定的开源许可证下分发它：

[http://stromberg.dnsalias.org/~strombrg/modunits/](http://stromberg.dnsalias.org/~strombrg/modunits/)

您可以将其用作 POSIX shell 脚本的可调用 shell，也可以通过导入将其用作 python 模块。

我认为它具有生产质量，并且确实定期在生产角色（备份）中使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T06:31:03.570

这是我第一次尝试 Python，所以如果这完全没有达到您的实际目标或出现错误，请让我知道，我会删除。

为了保持干燥，并消除“0小时”或“1分钟”的输出，这应该有效，只要我们接受基本单位（在本例中为分钟和小时）可以通过简单地添加复数的前提一个's'。任何更复杂的东西，你会想要一个 python ninja：

```
def format_output(value, unit):
    if value == 0:
        return ""

    singular_output = str(value) + " " + unit

    if value == 1:
        return singular_output
    elif value > 1:
        return singular_output + "s"

def duration(value):
    hours   = value // 60
    minutes = value % 60

    formatted_string = format_output(hours, "hour") + " " + format_output(minutes, "minute")
    return formatted_string.strip() 
```

上面没有考虑的一个条件是持续时间是否为 0 或空白，我认为应该返回“0 分钟”，但这是一个简单的解决方法，最好留给您的需要。

另外，我在`strip()`方法中添加了，否则如果两个单位之一归零，您将留下前导或尾随空格。

# javascript - javascript 转换器

> ID：10425087
> 
> 赞同：0
> 
> 时间：2012-05-03T04:21:50.430
> 
> 标签：javascript

我无法完成这个 javascript 来转换咖啡价格..我下载了一个调试器，它一直告诉我价格未定义，我不明白..这是脚本..

```
<html>
  <head>
    <title>Coffee House</title>
  </head>
  <body>
    <script type="text/javascript">
      var drink, ounces, price;

      prompt ( "Enter the drink type: espresso, latte, cappuccino, americano" );
      prompt ( "Enter the oz: 8, 12, 16" )

      var shots = prompt ( "Enter the number of shots" )

      if ( drink == "espresso")
        price = 1.40;

      if (( drink == "latte") || (drink == "cappuccino" )) {
        if ( ounce == 8 )
          price = 1.95;
        else if ( ounce == 12 )
          price = 2.35;
        else if ( ounce == 16 )
          price = 2.75;
      }

      if ( drink == "americano" )
        price = 1.20 + ( ( (ounce -8)/8 ) * .30 );

      price = price + ( (shots) * .50 );
      price = "price" * 1.055;
      price = Math.round( price * 100 )/100;
      alert( "Your " + ounce + "oz. " + drink + "with " + shots + "shots of espresso costs: $ " +price );
    </script>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T04:25:24.967

你的 JavaScript 有几个问题。

1.  首先，更新 JavaScript 以声明“价格”变量。var 饮料、盎司、价格；
2.  接下来，您需要根据“提示”语句的响应设置变量。

    var ounces = prompt ("输入盎司：8、12、16")

    var shot = prompt ( "输入拍摄数量" )

3.  您正在对变量“ounce”而不是“ounces”进行字符串比较。这是修复上面的 1 和 2 后的未定义变量。

4.  尽管您在某个地方将其用作字符串而不是变量值，但您正在对变量价格进行数学运算。在进行算术运算时从“价格”中删除引号。

应用这些更改后，您会看到一些效果：您的 8 盎司。lattewith 1shots of espresso 成本：2.58 美元

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T04:29:02.473

在尝试为其分配值之前，您需要将“价格”定义为 var。

# ios - 如何生成开发 MDM/APNS 证书？

> ID：10425093
> 
> 赞同：3
> 
> 时间：2012-05-03T04:22:31.617
> 
> 标签：ios, ssl-certificate, sandbox, apple-push-notifications, mdm

我们已经使用了 iOS 开发者企业帐户，并且我们收到了 .pem 格式的 MDM 证书。我们已经从门户网站[https://identity.apple.com/pushcert/](https://identity.apple.com/pushcert/)下载了这个 mdm 证书， 但我们不知道这是生产 MDM 证书或开发 MDM 证书。

首先，我们要使用开发证书测试 MDM 命令，获得 MDM 有效负载后，我们可以继续生产。

所以我的问题是如果可能的话，如何创建可用于从 gateway.sandbox.push.apple.com 获取 MDM 推送通知的 MDM/APNS 证书。

我已经浏览了[这个](https://media.blackhat.com/bh-us-11/Schuetz/BH_US_11_Schuetz_InsideAppleMDM_WP.pdf)pdf，但对开发 MDM 推送通知没有得到公平的想法。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T08:47:28.617

关注此页面： http: [//www.softhinker.com/in-the-news/iosmdmvendorcsrsigning](http://www.softhinker.com/in-the-news/iosmdmvendorcsrsigning)

为了使用沙盒 APNS 服务，请在您将创建的配置文件的 iPhone Config Util 的移动设备管理部分中勾选“使用开发 APNS 服务器”，以便将您的设备注册到您的服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T03:11:49.170

我的建议是尝试生产 APNS，您也可以将此生产 APNS 用于实时 MDM 产品。

如果您正在关注[此](http://www.softhinker.com/in-the-news/iosmdmvendorcsrsigning)页面，请注意一些事项并同时查看[问题](https://stackoverflow.com/questions/10571190/apns-notifications-not-reaching-devices-enrolled-in-apple-mdm/10629174#10629174)。

# wordpress - 如何在 wordpress 自定义帖子中添加图像？

> ID：10425095
> 
> 赞同：-1
> 
> 时间：2012-05-03T04:23:12.537
> 
> 标签：wordpress, custom-post-type

如何在 wordpress 自定义帖子中添加图像？请任何人帮助我....

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T04:45:05.157

你的意思是帖子特色图片？在主题的函数文件中，您需要打开对您拥有的帖子类型的支持

您可能已经有一条看起来像这样的行，就像您在数组中的 postype 一样。add_theme_support('post-thumbnails', array('post', 'page', 'CUSTOM_POST_TYPE_HERE'));

# jquery - JQueryMobile Datepicker 和新框架

> ID：10425096
> 
> 赞同：1
> 
> 时间：2012-05-03T04:23:19.980
> 
> 标签：jquery, jquery-ui, jquery-mobile, datepicker

我使用了[JQueryMobile 的实验 Datepicker](http://jquerymobile.com/demos/1.0a4.1/experiments/ui-datepicker/)一段时间，它在旧框架中工作。昨天我将框架更改为最新的框架，发现当我点击外部时它破坏了 Datepicker 的布局。

![破碎的布局](../Images/71312a1d82d78fa5eb455d8c0180169e.png)

有没有人遇到过同样的问题？？你是怎么过来的？？这意味着最新的框架将不支持日期选择器？

我的代码如下

```
<!DOCTYPE html> 
<html> 
    <head> 
    <title>Page Title</title> 

    <meta name="viewport" content="width=device-width, initial-scale=1"> 

    <link rel="stylesheet" href="jquery.mobile-1.1.0.min.css" />
    <link rel="stylesheet"  href="jquery.ui.datepicker.mobile.css" /> 
    <script src="jquery-1.7.2.min.js"></script>

    <script>
  //reset type=date inputs to text
  $( document ).bind( "mobileinit", function(){
    $.mobile.page.prototype.options.degradeInputs.date = true;

  });

  $(function() {
        $( "#datepicker" ).datepicker();
    });

  </script>
  <script src="jquery.mobile-1.1.0.min.js"></script>
    <script src="jQuery.ui.datepicker.js"></script>
    <script src="jquery.ui.datepicker.mobile.js"></script>
</script>
</head> 
<body> 

<div data-role="page">

    <div data-role="header">
        <h1>Page Title</h1>
    </div><!-- /header -->

    <div data-role="content">   
        <label for="date">Date Input:</label>
        <input type="date" name="date" id="date" value=""  /> 

        <div id='datepicker'></div>
    </div><!-- /content -->

    <div data-role="footer">
        <h4>Page Footer</h4>
    </div><!-- /footer -->
</div><!-- /page -->

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T04:56:39.260

我遇到了同样的问题，我只是更改了日期选择器 API。使用这个它会给你想要的一切，比如 iOS、Android、jQuery Mobile、模式、模态等 UI 与 jQuery 代码一起设置。

[jQuery 移动日期选择器](http://demo.mobiscroll.com/)

使用后问题永远不会出现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T17:19:10.120

***在jquery.ui.datepicker.mobile.js***中找到此代码， 就在 updateDatepicker() 下方；

```
$( ".ui-datepicker-calendar .ui-btn", dp ).each(function(){
var el = $(this);
// remove extra button markup - necessary for date value to be interpreted correctly
el.html( el.find(".ui-btn-text").text() );   
}); 
```

代替

```
el.html( el.find(".ui-btn-text").text() ); 
```

和

```
el.text( el.text() ); 
```

它对我有用:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T20:07:23.937

你也可以使用这个：

[Jquery Mobile 日期选择器](http://dev.jtsage.com/jQM-DateBox/)

我没有检查这是否适用于 1.1，但它保持最新并提供了大量功能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T09:24:36.093

在互联网上进行了大量搜索后，特别是比较了 datebox 和 jqueryui datepicker（mobiscroll 和 mobipick 对我没有好处，因为我正在寻找日历视图，我到了决定使用 ui datepicker 的地步，原因有几个：

*   我用了很长时间，我很了解它
*   我需要 beforeShowDay （如果肯定有可能使用日期框和事件/回调具有类似功能的事件）来自定义带有类的日期
*   我需要一个可以更改月份和年份的标题（也可以在日期框中）
*   通过这个实验，我已经有了一个带有 jquerymobile 感觉和外观的日期选择器

我用它：

*   jQuery 1.8.3
*   jQuery 移动版 1.2.0
*   jqueryui datepicker 1.8.21（[从这里获取](http://blog.jqueryui.com/2012/06/jquery-ui-1-8-21/)）

使用具有更新版本的 datepicker 会破坏月/年更改的布局。

从[这里](https://github.com/filamentgroup/jQuery-Mobile-Themed-DatePicker)，我得到了我需要的文件。我使用了在不同的 stackoverflow 问题上找到的几个答案，以进行以下更改：

*   jquery.ui.datepicker.mobile.css 没有变化
*   jquery.ui.datepicker.mobile.js 新代码：

    ```
    (function ($, undefined) {

    //cache previous datepicker ui method
    var prevDp = $.fn.datepicker;

    //rewrite datepicker
    $.fn.datepicker = function (options) {

    var dp = this;

    //call cached datepicker plugin
    var retValue = prevDp.apply(this, arguments);

    //extend with some dom manipulation to update the markup for jQM
    //call immediately
    function updateDatepicker() {
        $(".ui-datepicker-header", dp).addClass("ui-body-c ui-corner-top").removeClass("ui-corner-all");
        $(".ui-datepicker-prev, .ui-datepicker-next", dp).attr("href", "#");
        $(".ui-datepicker-prev", dp).buttonMarkup({ iconpos: "notext", icon: "arrow-l", shadow: true, corners: true });
        $(".ui-datepicker-next", dp).buttonMarkup({ iconpos: "notext", icon: "arrow-r", shadow: true, corners: true });
        $(".ui-datepicker-calendar th", dp).addClass("ui-bar-c");
        $(".ui-datepicker-calendar td", dp).addClass("ui-body-c");
        $(".ui-datepicker-calendar a", dp).buttonMarkup({ corners: false, shadow: false });
        $(".ui-datepicker-calendar a.ui-state-active", dp).addClass("ui-btn-active"); // selected date
        $(".ui-datepicker-calendar a.ui-state-highlight", dp).addClass("ui-btn-up-e"); // today"s date
        $(".ui-datepicker-calendar .ui-btn", dp).each(function () {
            var el = $(this);
            // remove extra button markup - necessary for date value to be interpreted correctly
            // only do this if needed, sometimes clicks are received that don't require update
            // e.g. clicking in the datepicker region but not on a button.
            // e.g. clicking on a disabled date (from next month)
            var uiBtnText = el.find(".ui-btn-text");
            if (uiBtnText.length)
                el.html(uiBtnText.text());
        });
    };

    //update after each operation
    updateDatepicker();

       $( dp ).on( "click change", function( event, ui)
    {
    $target=$(event.target);
    if(event.type=="click" && ($target.hasClass("ui-datepicker-month") || $target.hasClass("ui-datepicker-year")))          
        event.preventDefault();
    else
        updateDatepicker( event);
    });

    //return jqm obj 
    if (retValue) {
        if (!retValue.jquery) return retValue;
    }
    return this;
    };

    })(jQuery); 
    ```

我使用 on() 而不是单击事件，并且我在单击月/年选择菜单时防止默认。

我这样使用它：

```
$form
    .trigger( "create" )
    .find( "input[type='date'], input:jqmData(type='date')")
    .each(function()
        {
        $(this)
            .after( $( "<div />" ).datepicker(
                {
                altField            : "#" + $(this).attr( "id" ),
                altFormat           : "dd/mm/yy",
                showOtherMonths     : true,
                selectOtherMonths           : true,
                showWeek            : true,
                changeYear          : true,
                changeMonth         : true,
                beforeShowDay       : beforeShowDay
                }));
        }); 
```

beforeShowDay 是一个返回数组的函数（请参阅 jqueryui datepicker 手册）。

它以这种方式对我有用，我现在只需要添加事件以仅在日期输入获得焦点时显示日历。

[jsbin 示例的链接](http://jsbin.com/idukad/1/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T10:29:14.720

*其他地方的答案副本：*

我致力于将 jquery ui datepicker 更新为 jquery 、 jqueryui 和 jquery mobile 的最新版本，因此适用于 jq1.9.1 jqui 1.10.2 和 jqm 1.3.0。我更愿意按照我之前的回答离开，这样你就可以看到它是如何演变的。

changeMonth 和 changeYear 下拉菜单需要特别小心才能工作（经常出现不合时宜的情况）

这是我为 jqmobile 更新实验性 jqueryui datepicker 的方式：

[js bin 代码片段](http://jsbin.com/ukelis/1)

您可以链接到 datepicker 脚本而不是整个 jqueryui 包。

readonly 属性防止键盘出现在 ios

这只是 datepicker 的一个调整，使其在 jqm 上工作，目标是能够覆盖 datepicker 小部件的 _generatehtml 功能，并能够作为输入提供 te jquery mobile 主题使用。所以你不需要那一大堆 addClass 并避免不必要的 DOM 操作

我只测试了 ios 6（iphone、ipad）和桌面（chrome、firefox、safari），请告诉我们其他测试。

希望它可以根据需要提供帮助:)

这是在 html、js 和 css 中分隔的所有代码：

**HTML**

```
<!DOCTYPE html> 
<html> 
    <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <title>Jqueryui 1.10.2 datepicker Integration in jquery mobile 1.3.0 and jquery 1.9.1 by aureltime</title> 
    <link rel="stylesheet" href="//ajax.aspnetcdn.com/ajax/jquery.mobile/1.3.0/jquery.mobile-1.3.0.min.css">
    <script src="//ajax.aspnetcdn.com/ajax/jQuery/jquery-1.9.1.min.js"></script>
    <script src="//ajax.aspnetcdn.com/ajax/jquery.mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.2/jquery-ui.min.js"></script>
</head> 
<body>  
<div data-role="page">
    <div data-role="header">
        <h1>jQuery UI's Datepicker Styled for mobile adapted by Aureltime</h1>      
    </div>
    <div data-role="content">
        <form action="#" method="get" id="form">
            <div data-role="fieldcontain">
                <label for="date">Date:</label>
                <input type="date" name="date" id="date" value=""  />
            </div>      
        </form>
    </div>
</div>
</body>
</html> 
```

**JS**

```
//reset type=date inputs to text
$.mobile.page.prototype.options.degradeInputs.date = true;

$("#form").trigger("create");
$( document )
  .on( "pageinit", function(){

$("#date")
    .prop("readonly", "true")
    .on("click", function(){
$input=$(this);
$next=$input.next();

if($next.hasClass("hasDatepicker"))
  $next.hide();

$input
      .hide()
      .after( $( "<div />", {   id  :   "datepicker_"+$input.attr("id")}).datepicker(
        {
          altField          : "#" + $input.attr( "id" ),
          altFormat         : "dd/mm/yy",
          defaultDate       : $input.val(),
          showOtherMonths   : true,
          selectOtherMonths : true,
          //showWeek        : true,
          changeYear        : true,
          changeMonth       : true,
          //showButtonPanel : true,
          //beforeShowDay   : beforeShowDay,
          onSelect          : function( dateText, inst)
          {             $("#datepicker_"+$input.attr("id")).hide();
$input.show();
          }
        }));
    });
        });

(function($, undefined ) {

    //cache previous datepicker ui method
    var prevDp = $.fn.datepicker;

    //rewrite datepicker
    $.fn.datepicker = function( options ){

        var dp = this;

        //call cached datepicker plugin
        prevDp.call( this, options );

        //extend with some dom manipulation to update the markup for jQM
        //call immediately
        function updateDatepicker(event){

          $( ".ui-datepicker-header", dp ).addClass("ui-body-c ui-corner-top").removeClass("ui-corner-all");
            $( ".ui-datepicker-prev, .ui-datepicker-next", dp ).attr("href", "#");
            $( ".ui-datepicker-prev", dp ).buttonMarkup({iconpos: "notext", icon: "arrow-l", shadow: true, corners: true});
            $( ".ui-datepicker-next", dp ).buttonMarkup({iconpos: "notext", icon: "arrow-r", shadow: true, corners: true});
            $( ".ui-datepicker-calendar th", dp ).addClass("ui-bar-c");
            $( ".ui-datepicker-calendar td", dp ).addClass("ui-body-c");
            $( ".ui-datepicker-calendar a", dp ).buttonMarkup({corners: false, shadow: false}); 
            $( ".ui-datepicker-calendar a.ui-state-active", dp ).addClass("ui-btn-active"); // selected date
            $( ".ui-datepicker-calendar a.ui-state-highlight", dp ).addClass("ui-btn-up-e"); // today"s date

            if(typeof event != "undefined")
                {
                var classe= $(event.target).attr("class");
                //alert(classe);
                }
          $( ".ui-datepicker-calendar .ui-btn", dp ).each(function(){
                    var el = $(this);
                    var buttonText = el.find( ".ui-btn-text" );
                    // remove extra button markup - necessary for date value to be interpreted correctly
                    if(buttonText.length)
                        el.html( el.find( ".ui-btn-text" ).text() ); 
                    });
        //      }

        $( dp )
            .off()
            .on( "click", updateDatepicker)
            .find("select")
            .on( "change", function(event){updateDatepicker(event);});
        }

        //update now
        updateDatepicker();

        //return jqm obj 
        return this;
    };
})( jQuery ); 
```

**CSS**

```
div.hasDatepicker{ display: block; padding: 0; overflow: visible;  margin: 8px 0; }
.ui-datepicker {  overflow: visible; margin: 0; max-width: 500px;  }
.ui-datepicker .ui-datepicker-header { position:relative; padding:.4em 0; border-bottom: 0; font-weight: bold; }
.ui-datepicker .ui-datepicker-prev, .ui-datepicker .ui-datepicker-next { padding: 1px 0 1px 2px; position:absolute; top: .5em; margin-top: 0; text-indent: -9999px; }

.ui-datepicker .ui-datepicker-prev { left:6px; }
.ui-datepicker .ui-datepicker-next { right:6px; }
.ui-datepicker .ui-datepicker-title { margin: 0 2.3em; line-height: 1.8em; text-align: center; }
.ui-datepicker .ui-datepicker-title select { font-size:1em; margin:1px 0; }
.ui-datepicker select.ui-datepicker-month-year {width: 100%;}
.ui-datepicker select.ui-datepicker-month, 
.ui-datepicker select.ui-datepicker-year { width: 49%;}
.ui-datepicker table {width: 100%; border-collapse: collapse; margin:0; }
.ui-datepicker td { border-width: 1px; padding: 0; text-align: center; }
.ui-datepicker td span, .ui-datepicker td a { display: block; padding: .2em 0; font-weight: bold; margin: 0; border-width: 0; text-align: center; text-decoration: none; }

.ui-datepicker-calendar th { padding-top: .3em; padding-bottom: .3em; }
.ui-datepicker-calendar th span, .ui-datepicker-calendar span.ui-state-default { opacity: .3; }
.ui-datepicker-calendar td a { padding-top: .5em; padding-bottom: .5em; } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-19T23:21:41.883

我已经制作了一个对 android 和 iphone 翻转有效的自定义日期时间选择器（两个翻转中的日期和时间）希望它会有所帮助

[https://github.com/ngethe/jQM-DateBoxNgethe](https://github.com/ngethe/jQM-DateBoxNgethe)

# c# - 搜索最后创建的文本文件并使用 C# 将其导入 Sql

> ID：10425099
> 
> 赞同：0
> 
> 时间：2012-05-03T04:23:38.243
> 
> 标签：c#

我有文本文件列表，我需要 C# 工具来查找最后创建的文件并将其加载到 SQL 我在第一天上午 05:15 和 12:15 有两次工作，并生成两个文本文件（genset_20090103_1212.TXT），我需要获取最后创建的一个并将其数据附加到 sql

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T04:53:52.833

你可以使用 linq

```
var directory = new DirectoryInfo("C:\\MyDirectory")

var lastcreatedfile = (from c in directory.GetFiles()
             orderby c.CreationTime descending
             select c).First();

 string text = System.IO.File.ReadAllText("C:\\MyDirectory"+lastcreatedfile.FullName+".txt"); 
```

将内容文本插入到您的 sql

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T05:01:40.633

请尝试此代码。

```
FileInfo file1Info = new FileInfo("File1.txt");
        FileInfo file2Info = new FileInfo("File2.txt");
        if (file1Info.LastWriteTime < file2Info.LastWriteTime)
        {
            //Insert File2.txt in your Database
        } 
```

# android - 在运行时将布局动态插入到活动中

> ID：10425101
> 
> 赞同：2
> 
> 时间：2012-05-03T04:23:46.237
> 
> 标签：android, xml, layout

我需要在运行时根据单击按钮向我的活动动态添加“模板”布局。

下面的代码块中显示的是我的布局的简化版本。HEADER C的内容（即BODY C1, BODY C2 ... BODY Cn）是运行时需要添加的组件。它们都具有相同的格式，并在具有相对布局的单独 xml 文件中定义。我如何完成这项任务？我尝试了 LayoutInflater，但没有成功。LayoutInflater 是否需要 LinearLayout 才能充气？

```
<SCROLLVIEW>
   <RELATIVE_LAYOUT>
      ____________
      HEADER A
         ____________
         BODY A
   </RELATIVE_LAYOUT>
   <RELATIVE_LAYOUT>
      ____________
      HEADER B
       ____________
    BODY B
</RELATIVE_LAYOUT>
<RELATIVE_LAYOUT>
____________
HEADER C
    ____________
    BODY C1
    ____________
    BODY C2
    .
    .
    .
    ____________
    BODY Cn
<RELATIVE_LAYOUT>
</SCROLLVIEW> 
```

谢谢，任何指导表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T04:30:28.073

采用

```
View headerView = View.inflate(this, R.layout.class_name, null); 
```

膨胀你的布局。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T04:32:51.360

```
/**rootView represent the RelativeLayout*/
View headerView = LayoutInflater.from(context).inflater(R.layout.header_view, rootView, false);
rootView.add(headerView); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T04:34:03.410

你可以这样做：

```
general = (LinearLayout) findViewById(R.id.general_tab);  // get the id of the layout you wish to add your view to
TextView programs = new TextView(this); // create a new view/widget to add
programs.setText("Program(s): " + prgdisp);  // set the text 
general.addView(programs);  // add the new view/widget to the existing layout 
```

**编辑**

我错过了你已经有一个 xml 布局。将以上内容更改为：

```
general = (LinearLayout) findViewById(R.id.general_tab);  // get the id of the layout you wish to add your view to
View header = View.inflate(this, R.layout.class_name, null); // inflate your layout
general.addView(header);  // add the new view/widget to the existing layout 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T04:37:39.953

```
 LinearLayout Parent = (LinearLayout) findViewById(R.id.linearLayout);

    View child = getLayoutInflater().inflate(R.layout.main_new,null);
    Parent.addView(child); 
```

# c++ - 执行构建步骤“Make”时构建项目时出错

> ID：10425103
> 
> 赞同：3
> 
> 时间：2012-05-03T04:23:55.997
> 
> 标签：c++, qt, makefile, qt-creator

我刚刚在我的 PC 上安装了 Qt SDK 1.2.1。我创建了一个新项目作为测试：

`File > New File or Project... > Other Project > Plain C++ Project`

我选择了这些构建设置：

![qt 创建者构建设置](../Images/fbefdbd93a4151d3414ecc527470a142.png)

Qt Creator 生成了这个 .pro 文件：

```
TEMPLATE = app
CONFIG += console
CONFIG -= qt

SOURCES += main.cpp 
```

这个 main.cpp 文件：

```
#include <iostream>

using namespace std;

int main()
{
    cout << "Hello World!" << endl;
    return 0;
} 
```

构建失败：

```
13:39:35: Running build steps for project test...
13:39:35: Starting: "C:\Dev\Qt\QtSDK\QtCreator\bin\jom.exe" clean
Could Not Find C:\Dev\Projects\Qt\test\debug\main.obj
    del debug\main.obj
    del debug\test.intermediate.manifest debug\test.exp debug\test.ilk vc*.pdb vc*.idb
Could Not Find C:\Dev\Projects\Qt\test\debug\test.intermediate.manifest
Could Not Find C:\Dev\Projects\Qt\test\vc*.pdb
Could Not Find C:\Dev\Projects\Qt\test\test.intermediate.manifest
Could Not Find C:\Dev\Projects\Qt\test\test.exp
Could Not Find C:\Dev\Projects\Qt\test\test.ilk
Could Not Find C:\Dev\Projects\Qt\test\vc*.pdb
    c:\dev\qt\qtsdk\desktop\qt\4.8.1\msvc2008\bin\qmake.exe -spec ..\..\..\Qt\QtSDK\Desktop\Qt\4.8.1\msvc2008\mkspecs\win32-msvc2008 CONFIG+=declarative_debug -o Makefile test.pro
    C:\Dev\Qt\QtSDK\QtCreator\bin\jom.exe -f Makefile.Debug clean
    C:\Dev\Qt\QtSDK\QtCreator\bin\jom.exe -f Makefile.Release clean
Could Not Find C:\Dev\Projects\Qt\test\release\main.obj
Could Not Find C:\Dev\Projects\Qt\test\release\test.intermediate.manifest
    del release\main.obj
    del release\test.intermediate.manifest release\test.exp
    del ".\test.intermediate.manifest"
    del test.exp
    del test.ilk
    del vc*.pdb
    del vc*.idb
Could Not Find C:\Dev\Projects\Qt\test\vc*.idb

jom 1.0.8 - empower your cores

13:39:36: The process "C:\Dev\Qt\QtSDK\QtCreator\bin\jom.exe" exited normally.
13:39:36: Configuration unchanged, skipping qmake step.
13:39:36: Starting: "C:\Dev\Qt\QtSDK\QtCreator\bin\jom.exe" 
    cl -c -nologo -Zm200 -Zc:wchar_t- -Zi -MDd -GR -EHsc -W3 -w34100 -w34189 -DUNICODE -DWIN32 -DQT_LARGEFILE_SUPPORT -I"..\..\..\Qt\QtSDK\Desktop\Qt\4.8.1\msvc2008\mkspecs\win32-msvc2008" -Fodebug\ @C:\DOCUME~1\Mitch!\LOCALS~1\Temp\main.obj.5936.16.jom
    C:\Dev\Qt\QtSDK\QtCreator\bin\jom.exe -f Makefile.Debug
'cl' is not recognized as an internal or external command,
operable program or batch file.
jom: C:\Dev\Projects\Qt\test\Makefile.Debug [debug\main.obj] Error 1

jom 1.0.8 - empower your cores

jom: C:\Dev\Projects\Qt\test\Makefile [debug] Error 2
13:39:36: The process "C:\Dev\Qt\QtSDK\QtCreator\bin\jom.exe" exited with code 2.
Error while building project test (target: Desktop)
When executing build step 'Make' 
```

我尝试`Qt 4.8.1 for Desktop (MSVC 2008)`在启动 Qt Creator 之前运行批处理脚本并检查`Projects > Build Settings > Build Environment > Using System Environment > Clear System Environment`没有成功。

`PATH`安装 Qt SDK 1.2.1 后我的变量：

```
%SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem;c:\Program Files\Microsoft SQL Server\90\Tools\binn\;C:\Program Files\QuickTime\QTSystem\;C:\Program Files\jEdit;C:\Program Files\TortoiseSVN\bin;C:\Program Files\doxygen\bin;C:\Program Files\NVIDIA Corporation\Cg\bin;C:\Program Files\Microsoft SQL Server\100\Tools\Binn\;C:\Program Files\Microsoft SQL Server\100\DTS\Binn\;C:\Program Files\Microsoft SQL Server\100\Tools\Binn\VSShell\Common7\IDE\;C:\Program Files\Microsoft Visual Studio 9.0\Common7\IDE\PrivateAssemblies\;C:\WINDOWS\system32\WindowsPowerShell\v1.0 
```

我的电脑运行的是 Windows XP Professional (Service Pack 2)。Qt SDK 1.2.1 附带的 Qt Creator 版本是 2.4.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T05:23:15.763

看起来`cl`您的系统上要么没有安装，要么需要添加到`PATH`环境变量中。尝试在`cl.exe`某处找到二进制文件`C:\Program Files\Microsoft Visual Studio [version]\`并将包含该二进制文件的目录添加到您的`PATH`.

# javascript - 为什么 clearInterval 在此代码中不起作用？

> ID：10425107
> 
> 赞同：2
> 
> 时间：2012-05-03T04:24:13.850
> 
> 标签：javascript, setinterval

有一个使用 设置间隔的函数`setInterval()`，但即使在调用之后`clearInterval()`，我也可以在控制台中看到`else`条件仍在运行。如何正确清除该间隔？

```
function increase(old, step, neu) {
    var i = 0;
    var delay2;

    function countUp() {
        if (i < 5) {
            old += step;
            // console.log("increase")
            $("#total-price-value").text(old + " dollors");
            $("#total-price-value").digits();
            i++;
            delay2 = setInterval(countUp, 80);
        } else {
            clearInterval(delay2);
            console.log(delay2);
        }

    }
    countUp();

}​ 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-03T04:27:20.463

看起来您对超时和间隔之间的区别有点困惑。超时只触发一次；间隔触发多次。如果您使用间隔，您可能只想设置一次（您每次都设置它）。如果您使用超时，您可能希望每次都设置它（就像您正在做的那样）。

为了解决问题，您要么想要切换到超时（可能是最简单的；只是一个搜索/替换），要么只设置一次间隔。

例如，以下是一个人如何`setTimeout`数到五的方法：

```
var count = 0;
function timeoutFired() {
    count++;
    if(count < 5) {
        setTimeout(timeoutFired, 1000);
    }
}
setTimeout(timeoutFired, 1000); 
```

使用超时，我们不需要清除来阻止它计数；根本不设置超时将阻止它再次运行。

以下是一个可能的使用方式`setInterval`：

```
var count = 0;
function intervalFired() {
    count++;
    if(count >= 5) {
        clearInterval(interval);
    }
}
var interval = setInterval(intervalFired, 1000); 
```

如果您希望某些代码使用间隔来定期运行以停止，则必须调用`clearInterval`. 请注意，我们只调用`setInterval`一次，而不是`setTimeout`每次我们不希望它继续。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T04:32:16.797

显然，您误`setInterval`认为`setTimeout`. *每*毫秒`setInterval`运行一次封闭的函数，而在毫秒后只执行一次。 *`n``setTimeout``n`*

 *我想你想“打勾直到 5”所以[这里有一个示例](http://jsfiddle.net/9CnfW/1/)：

```
function increase(old, step, neu) {
    var i = 0;

    interval = setInterval(function() {
        if (i < 5) {

            //do something at this "tick"
            console.log(i);

            i++;
        } else {
            //else, stop
            clearInterval(interval);
        }
    },80);

}

increase(); 
```*

# visual-c++ - 16 位 obj 文件 VC++

> ID：10425111
> 
> 赞同：0
> 
> 时间：2012-05-03T04:24:33.863
> 
> 标签：visual-c++, compilation, bootloader, 16-bit, object-files

如何将我的 VC++ 项目编译为 16 位平面目标文件，以便在我正在处理的引导加载程序中使用？

据我了解，目标文件在技术上已经是“平面”的，链接器将其转换为目标可执行格式。我希望它能够获取该目标文件并通过链接器传递该目标文件和我的汇编代码（以 obj 格式）以创建平面引导加载程序。

[指南][1] 对文件的位置不是很具体，只是说您使用`cl.exe`、`link.exe`和`ml.exe`(MASM)。

该指南使用 MASM，但我知道如何使用 NASM 输出目标文件。我的主要问题是 VC++ 的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T04:31:25.450

Microsoft 的最后一个 16 位编译器是 VC++ 1.52c。它很古老，可能不再可用。即使是这样，它也很有可能不会编译任何最近的代码。仅举几个最明显的缺点，它根本不支持模板、异常处理或命名空间。

我相信大多数从事类似工作的人都在使用[Open Watcom](http://www.openwatcom.org/index.php/Main_Page)（它也不是最新的，但仍然比 VC++ 1.52c 更好）。

# comments - 显示特定帖子的评论小部件而不是 url

> ID：10425119
> 
> 赞同：3
> 
> 时间：2012-05-03T04:25:28.607
> 
> 标签：comments, facebook-social-plugins, facebook-page

我正在将 Facebook 集成到一个应用程序中，该应用程序将页面的提要用于其某些内容。

我希望能够允许用户对帖子发表评论并查看该帖子上留下的先前评论。

如果可能的话，我希望避免构建自己的评论系统实现（更不用说必须实现 oauth 登录以供用户评论），而只需使用 Facebook 提供的评论小部件（参见此处：[http： //developers.facebook.com/docs/reference/plugins/comments/](http://developers.facebook.com/docs/reference/plugins/comments/) )

是否可以使用上述评论插件不引用任意链接，而是引用 Facebook 页面上的实际（公共）帖子？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T19:36:57.933

不，评论插件不能指向 on-facebook.com URL；仅当它指向网站时才受支持。

为了实现您想要的（您网站上可以在 facebook.com 上的帖子中添加评论的东西，是吗？），您需要让用户授权您编写的应用程序，该应用程序接受他们的输入并代表他们发布通过 API 返回 Facebook

实际实现会根据您的确切要求而有所不同，但基本上您会想要：

*   让您的用户在您的页面上授权该应用程序；[Javacript 中的客户端](https://developers.facebook.com/docs/authentication/client-side/)或[服务器端通过重定向](https://developers.facebook.com/docs/authentication/server-side/)
*   请注意，您需要包含`publish_actions`或`publish_stream` [发布权限](https://developers.facebook.com/docs/publishing/)
*   向[Post 对象](https://developers.facebook.com/docs/reference/api/post/)的“评论”连接发表评论

Javascript SDK 中的示例一旦用户登录并授予了这些权限，就会在帖子中添加评论（在此处可见：http: [//www.facebook.com/155965101083460/posts/155965104416793](http://www.facebook.com/155965101083460/posts/155965104416793)）

> ```
> FB.api(
>     "/155965101083460_155965104416793/comments",
>      {message: 'This is great, thanks!'},
>      'POST'
>  ); 
> ```

# python - Python中的线性插值

> ID：10425122
> 
> 赞同：1
> 
> 时间：2012-05-03T04:25:36.560
> 
> 标签：python, linear-interpolation

我对 Python 很陌生，我正在尝试编写一个程序，该程序将执行 4 点线性插值，从 .txt 文件读取数据并询问用户信息。

.txt 文件在具有以下格式的表格中包含温度和压力：

```
T    P1  P2  P3  P4
     80,100,150,200
75,  400,405,415,430
100, 450,456,467,483
150, 500,507,519,536
200, 550,558,571,589 
```

这是代码：

```
# User input
temp = input("Enter temperature value in degrees Celcius [Range: 75-200]:")
pressure = input("Enter pressure value in bars [Range: 80-589")

temp = float(temp)
pressure = float(pressure)

# Opens file and read data
filename = open('xxxxxxxxxxxxx.txt', 'r').readlines()

# Removes \n from each line
for i in list(range((len(filename)-1))):
    filename[i] = filename[i][:-1]

# Splits string
for i in list(range(len(filename))):
    filename[i] = filename[i].split(',')

# Converts string numbers into decimal numbers
for i in [2,3,4,5,6]:
    filename[i][0] = float(filename[i][0])
    filename[i][1] = float(filename[i][1]) 
```

我不知道从这里去哪里。如果用户输入说，T=100 和 P=200，我将如何从文件中找到直接在这些数字之前和之后的数据点？

显然，我不太了解我在做什么，但我会很感激任何帮助。

ETA：实际表值。另外，我不清楚实际的问题陈述。给定温度和压力，程序应执行线性插值以找到 U（内能）。T 值是第一列，P 值是第一行，其余的是 U 值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T16:33:09.023

这里有两个单独的问题：如何将数据读入 python/NumPy，以及如何进行 2d 插值。
对于读取数据，我建议 [使用 numpy loadtxt](http://docs.scipy.org/doc/numpy/reference/generated/numpy.loadtxt.html)，
对于插值， [建议使用 scipy BivariateSpline](http://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.RectBivariateSpline.html)。（他们都有比你需要的更多的选择。）

```
from __future__ import division
from cStringIO import StringIO
import numpy as np
from scipy.interpolate import RectBivariateSpline

np.set_printoptions( 1, threshold=100, edgeitems=10, suppress=True )

    # a file inline, for testing --
myfile = StringIO( """
# T  P1  P2  P3  P4
0,   80,100,150,200

75,  400,405,415,430
100, 450,456,467,483
150, 500,507,519,536
200, 550,558,571,589
""" )

    # file -> numpy array --
    # (all rows must have the same number of columns)
TPU = np.loadtxt( myfile, delimiter="," )
P = TPU[0,1:]  # top row
T = TPU[ 1:,0]  # left col
U = TPU[1:,1:]  # 4 x 4, 400 .. 589
print "T:", T
print "P:", P
print "U:", U

interpolator = RectBivariateSpline( T, P, U, kx=1, ky=1 )  # 1 bilinear, 3 spline

    # try some t, p --
for t, p in (
    (75, 80),
    (75, 200),
    (87.5, 90),
    (200, 80),
    (200, 90),
    ):
    u = interpolator( t, p )
    print "t %5.1f  p %5.1f -> u %5.1f" % (t, p, u) 
```

顺便说一句，对于交互式 python， [IPython](http://ipython.org/ipython-doc/stable/interactive/tutorial.html) 可以很容易地尝试单行，查看变量......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T05:54:47.833

假设您有一个*排序*的数字列表`x1, x2, x3... xn`，您可以使用该`bisect`模块快速定位您想要的间隔（`O(log n)`）。

```
from bisect import bisect, bisect_right, bisect_left
#    0    1    2    3    4    5    6    7
x = [1,   2,   4,   8,  16, 100, 200, 300]

def find_interval(x,y):
    # x must be a sorted list.

    index = bisect_left(x,y)
    # Larger than largest element in x
    if index >= len(x):
        l,r = -1, None
    # Exactly equal to something in x
    elif y == x[index]:
        l,r = index, index
    # Smaller than smallest element in x
    elif index == 0:
        l,r = None, 0
    # Inbetween two elements in x
    else:
        l,r = index-1, index

    print (x[l] if l != None else "To left of all elements")
    print (x[r] if r != None else "To right of all elements")
    return (l,r)

>>> x
[1, 2, 4, 8, 16, 100, 200, 300]
>>> find_interval(x,0)
To left of all elements
1
>>> find_interval(x,1000)
300
To right of all elements
>>> find_interval(x,100)
100
100
>>> find_interval(x,12)
8
16
>>> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T04:52:12.180

1.  `.readlines()`一旦文件变大，使用就会让你大吃一惊。你能根据以下方面制定你需要做的事情吗？

    ```
    for line in open(...):
        # parse line 
    ```

    并只解析一次文件而不将其完全加载到内存中。

    *   更好的是，`with`在处理文件时使用成语：

        ```
        with open(...) as file:
            for line in file:
                # parse line 
        ```

        当使用文件时出现问题时，这可以为您省去一些麻烦。

2.  `float()`如果您最终要使用从字符串中制作浮点数，则不需要删除换行符。`float('1.2 \t\n')`是完全有效的代码。

3.  `for i in list(range(len(filename))):`

    这是不好的风格。遍历列表的 Python 习惯用法是

    ```
    for element in list: 
    ```

    如果您需要列表中的索引，那么您应该使用

    ```
    for i, element in enumerate(list): 
    ```

    您的方法是一种“手动”并且它有效，但是完全没有必要从`list`a 中创建一个`list`（来自python 2.x）。`range(...)`您的代码的更好的“手动”替代方案是

    ```
    for i in xrange(len(filename)): 
    ```

    但它仍然比上面的习语可读性差得多。

现在我已经完成了对您的代码的抨击，主要问题是：您实际上需要做什么？你能给我们准确的、逐字的、你试图解决的问题的说明吗？

*   你看过[http://en.wikipedia.org/wiki/Linear_interpolation](http://en.wikipedia.org/wiki/Linear_interpolation)吗？
*   在您的情况下，来自终端的输入数据有什么意义？
*   为什么以及为什么需要来自终端输入数据之前和之后的文件中的数据？
*   温度/压力数据是否以某种方式排序？
*   文件中的行代表什么（例如，它们是基于时间的还是基于位置的或其他）？
*   四种不同的压力分别代表什么？

# xaml - Windows 8 Metro 控件可能的 VisualStates 记录在哪里？

> ID：10425124
> 
> 赞同：7
> 
> 时间：2012-05-03T04:25:39.730
> 
> 标签：xaml, windows-8, windows-runtime, winrt-xaml

在为 Win 8 Metro 控件编写自定义 ControlTemplate (XAML) 时，我们需要使用 VisualStateManager 根据 VisualState 转换来更新控件。我在 MSDN 上看到了下面的示例，但我找不到 VisualStateGroup“CommonStates”的记录位置以及除了“PointerOver”和“Normal”之外还定义了哪些其他 VisualStates？您是否必须深入 SDK 才能找到按钮的默认 ControlTemplate？如果有，在哪里？

```
<ControlTemplate TargetType="Button">
  <Grid >
    <VisualStateManager.VisualStateGroups>
      <VisualStateGroup x:Name="CommonStates">

        <VisualStateGroup.Transitions>

          <!--Take one half second to transition to the PointerOver state.-->
          <VisualTransition To="PointerOver" 
                              GeneratedDuration="0:0:0.5"/>
        </VisualStateGroup.Transitions>

        <VisualState x:Name="Normal" />

        <!--Change the SolidColorBrush, ButtonBrush, to red when the
            Pointer is over the button.-->
        <VisualState x:Name="PointerOver">
          <Storyboard>
            <ColorAnimation Storyboard.TargetName="ButtonBrush" 
                            Storyboard.TargetProperty="Color" To="Red" />
          </Storyboard>
        </VisualState>
      </VisualStateGroup>
    </VisualStateManager.VisualStateGroups>
    <Grid.Background>
      <SolidColorBrush x:Name="ButtonBrush" Color="Green"/>
    </Grid.Background>
  </Grid>
</ControlTemplate> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T21:25:16.153

您可以转到 xaml 文件的设计视图并选择 Button 控件 - 右键单击​​/编辑模板/编辑当前 - 将为您提取默认模板。通常，控件应使用属性进行注释，这些属性指示应在模板中使用哪些视觉状态，如下所示，但当我只是导航到按钮等控件的定义时，我看不到它们。

```
[TemplateVisualState(GroupName="CommonStates", Name="Normal")]
[TemplateVisualState(GroupName="CommonStates", Name="PointerOver")] 
```

# c# - 使用 Double 数据类型传输 Money 值

> ID：10425127
> 
> 赞同：2
> 
> 时间：2012-05-03T04:26:20.397
> 
> 标签：c#, refactoring, currency

我知道使用 Double 数据类型进行 Money 计算会[带来](https://stackoverflow.com/questions/1165761/decimal-vs-double-which-one-should-i-use-and-when)[麻烦](https://stackoverflow.com/questions/274296/money-type) [，](https://stackoverflow.com/questions/316727/is-a-double-really-unsuitable-for-money)因此应该使用 Decimal。

问这个问题我觉得很愚蠢，但是使用 Double 数据类型来存储或传输 Money 值是否存在潜在问题，只要在计算时将其转换为 Decimal ？

我问这个是因为我手头有一个旧的应用程序要维护，而且它到处都在使用 Double。为了节省工作，我只想重构实际进行计算的部分，使用 Decimal 而不是 Double。我想把剩下的部分放在一边，它只是用于数据传输、序列化等的管道代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T04:30:30.477

`double`当您存储数据时，不仅在检索数据时会损失精度。所以不，这不能解决你的问题。您无法神奇地找回丢失的精度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T04:54:28.670

答案取决于您需要“传输”多少有效数字。Decimal 为您提供 28 位数字，而 Double 为您提供大约 15 位左右。因此，如果您的值在 +/- 10 万亿范围内（假设有 2 个小数位），您应该没问题。如果您使用其他货币，您可能需要更多的小数位，因此范围将减少到例如 +/- 1000 亿，小数点后 4 位。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T04:43:58.630

你不应该使用浮点值来存储货币价值..

可能使用 BigDecimal .. [https://blogs.oracle.com/CoreJavaTechTips/entry/the_need_for_bigdecimal](https://blogs.oracle.com/CoreJavaTechTips/entry/the_need_for_bigdecimal)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-03T04:43:59.857

例如，您正在插入一个事务，假设所有计算都是使用十进制数据类型执行的

```
Amount : $45.35
 TAX   : $ 1.72
-----------------
Total  : $47.07 
```

现在我们假设您制作了一张销售凭证并存储了所有三个值。在存储时，您将所有三个值都转换为双倍。所以它变成了二进制浮点值。

如果用户再次尝试打开旧的销售凭证，则尝试检索三个值；这可能是由于四舍五入和转换（从双精度到十进制）您收到不同的值，可能如下所示

```
Amount : $45.36 (//changed)
 TAX   : $ 1.72
-----------------
Total  : $47.07 (//Total sum is as stored, but when you sum 
                 //actual values retrieved, they are different.) 
```

这是根据我的经验，目前我无法从技术上解释这种情况。

您也可能只存储`Amount`，`Tax Rate`但是当您添加它们时，总数将比客户拥有的实际销售凭证多 1 美分：

```
Amount : $45.36  /*View after sales*/         Amount : $45.35  /*What customer's*/
 TAX   : $ 1.72                                TAX   : $ 1.72  /*voucher says:*/
-----------------                            -----------------
Total  : $47.07                               Total  : $47.07 
```

# algorithm - 为给定图构建一个transmuter及其生成树

> ID：10425128
> 
> 赞同：0
> 
> 时间：2012-05-03T04:26:27.750
> 
> 标签：algorithm, data-structures

给出一个图和它的生成树，transmuter是从它们派生的辅助图，可以加速对原始图的某些操作。它是由 Tarjan 发明的：

```
Robert E. Tarjan. Applications of Path Compression on Balanced Trees. Journal of the ACM, 26(4):690–715, 1979.

Robert E. Tarjan. Sensitivity Analysis of Minimum Spanning Trees and Shortest Path Trees. Information Processing Letters, 14(1):30–33, 1982. 
```

我发现自己需要一个转换器。不幸的是，我无法访问这两个文件。有人可以知道 transmuter 和/或可以访问文档，详细介绍一下 transmuter 和构造它的算法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T08:42:12.140

[http://www.cs.princeton.edu/courses/archive/fall03/cs528/handouts/applications%20of%20path%20compression.pdf](http://www.cs.princeton.edu/courses/archive/fall03/cs528/handouts/applications%20of%20path%20compression.pdf)来自[http://scholar.google.com/scholar?q=%22Applications+of +Path+Compression+on+Balanced+Trees.%22](http://scholar.google.com/scholar?q=%22Applications+of+Path+Compression+on+Balanced+Trees.%22)来自[http://www.informatik.uni-trier.de/~ley/db/journals/jacm/jacm26.html#Tarjan79](http://www.informatik.uni-trier.de/~ley/db/journals/jacm/jacm26.html#Tarjan79)

不幸的是[http://scholar.google.com/scholar?q=%22Sensitivity+Analysis+of+Minimum+Spanning+Trees+and+Shortest+Path+Trees.%22](http://scholar.google.com/scholar?q=%22Sensitivity+Analysis+of+Minimum+Spanning+Trees+and+Shortest+Path+Trees.%22)没有 pdf 链接。如果有其他文件可能有帮助，请参阅[http://www.informatik.uni-trier.de/~ley/db/indices/a-tree/t/Tarjan:Robert_Endre.html 。](http://www.informatik.uni-trier.de/~ley/db/indices/a-tree/t/Tarjan:Robert_Endre.html)

# javascript - 如何使用 jquery 或 javascript 切换 gridview 模板化的 asp 按钮文本

> ID：10425130
> 
> 赞同：0
> 
> 时间：2012-05-03T04:26:34.267
> 
> 标签：javascript, jquery, gridview, itemtemplate, aspbutton

我有一个gridview，其中一列是“添加”/“删除”asp：按钮，我想在使用jquery或javascript单击时切换文本。我无法找到一个很好的例子。

这是我对模板字段的标记：

```
<asp:TemplateField HeaderText="ADD <br /> REMOVE" HeaderStyle-ForeColor="White" > 
    <ItemTemplate >
       <asp:Button id="btnBuy" runat="server" Width="50px" Height="15px" BorderStyle="Solid" Text="ADD" Font-Size="7pt"                                  BackColor="#FFFF80" />
    </ItemTemplate>
    <HeaderStyle Width="7%" />
    <ItemStyle CssClass="sessionItems" VerticalAlign="Middle"  HorizontalAlign="Center" />
</asp:TemplateField> 
```

这是一些 jquery，但它不起作用，因为我希望这更多的是单个按钮：

```
 $('#btnBuy').click(function()
          {  
            if ($(this).text() == "ADD")
            {
                $(this).text("REMOVE");
            } else {
                $(this).text("ADD");
            }
        }) 
```

请告知如何正确切换gridview按钮文本？

谢谢你，吉姆

这是我的复选框，它不会回发：

```
<asp:TemplateField HeaderText="Select <br /> Files" HeaderStyle-ForeColor="White" > 
                        <ItemTemplate >
                            <asp:CheckBox ID="chkSelectVideo" runat="server" OnClick="checkboxClicked(this)" ToolTip="Select file for download" 
                                Enabled='<%# Eval("SORD_EnableSelectionCheckBox") %>' Checked='<%# Eval("SORD_SelectedForDownloadFlag") %>' />
                        </ItemTemplate>
                        <HeaderStyle Width="6%" />
                        <ItemStyle VerticalAlign="Middle" HorizontalAlign="Center" />
                    </asp:TemplateField> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T06:46:59.550

您可以尝试的一件事是在按钮的 OnClientClick 事件中，调用如下所示的函数

OnClientClick="SomeJSFunction(this)"

In this way you get access to your button control in the JS Function, so now you can modify the text of the button in the function as shown below:

```
function SomeJSFunction(source) {
    if (source.value === 'Add') {
        source.value = 'Remove';
    } else if (source.value === 'Remove') {
        source.value = 'Add';
    }
} 
```

# c - Copying n chars with strncpy more efficiently in C

> ID：10425137
> 
> 赞同：4
> 
> 时间：2012-05-03T04:27:45.513
> 
> 标签：c, string, malloc, strncpy

I'm wondering if there's a cleaner and more efficient way of doing the following `strncpy` considering a `max` amount of chars. I feel like am overdoing it.

```
int main(void)
{

        char *string = "hello world foo!";
        int max = 5;

        char *str = malloc (max + 1);
        if (str == NULL)
                return 1;
        if (string) {
                int len = strlen (string);
                if (len > max) {
                        strncpy (str, string, max);
                        str[max] = '\0';
                } else {
                        strncpy (str, string, len);
                        str[len] = '\0';
                }
                printf("%s\n", str);
        }
        return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T04:35:57.147

I wouldn't use `strncpy` for this at all. At least if I understand what you're trying to do, I'd probably do something like this:

```
char *duplicate(char *input, size_t max_len) {
    // compute the size of the result -- the lesser of the specified maximum
    // and the length of the input string. 
    size_t len = min(max_len, strlen(input));

    // allocate space for the result (including NUL terminator).
    char *buffer = malloc(len+1);

    if (buffer) {
        // if the allocation succeeded, copy the specified number of 
        // characters to the destination.
        memcpy(buffer, input, len);
        // and NUL terminate the result.
        buffer[len] = '\0';
    }
    // if we copied the string, return it; otherwise, return the null pointer 
    // to indicate failure.
    return buffer;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T04:34:17.280

Firstly, for strncpy, "No null-character is implicitly appended to the end of destination, so destination will only be null-terminated if the length of the C string in source is less than num."

We use memcpy() because strncpy() checks each byte for 0 on every copy. We already know the length of the string, memcpy() does it faster.

First calculate the length of the string, then decide on what to allocate and copy

```
int max = 5;               // No more than 5 characters

int len = strlen(string);  // Get length of string
int to_allocate = (len > max ? max : len); // If len > max, it'll return max. If len <= max, it'll return len. So the variable will be bounded within 0...max, whichever is smaller

char *str = malloc(to_allocate + 1); // Only allocate as much as we need to
if (!str) { // handle bad allocation here }

memcpy(str,string,to_allocate); // We don't need any if's, just do the copy. memcpy is faster, since we already have done strlen() we don't need strncpy's overhead

str[to_allocate] = 0; // Make sure there's a null terminator 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-26T06:10:49.397

Basically you're reinventing the `strlcpy` that was introduced in 1996 - see the [strlcpy and strlcat - consistent, safe, string copy and concatenation](https://www.sudo.ws/todd/papers/strlcpy.html) paper by Todd C. Miller and Theo de Raadt. You might have not heard about it because it was [refused to be added to glibc](https://lwn.net/Articles/612244/), called “horribly inefficient BSD crap” by the glibc maintainer and fought to this day even when adopted by all other operating systems - see the [Secure Portability](https://www.openbsd.org/papers/portability.pdf) paper by Damien Miller (Part 4: Choosing the right API).

You can use strlcpy on Linux using the [libbsd](https://libbsd.freedesktop.org/wiki/) project (packaged on Debian, Ubuntu and other distros) or by simply copying the source code easily found on the web (e.g. on the two links in this answer).

But going back to your question on what would be most efficient in your case, where you're not using the source string length here is my idea based on the `strlcpy` source from OpenBSD at [http://cvsweb.openbsd.org/cgi-bin/cvsweb/src/lib/libc/string/strlcpy.c?rev=1.11](http://cvsweb.openbsd.org/cgi-bin/cvsweb/src/lib/libc/string/strlcpy.c?rev=1.11) but without checking the length of the original string, which may potentially be very long but still with proper '\0' ending:

```
char *d = str;            // the destination in your example
const char *s = string;   // the source in your example
size_t n = max;           // the max length in your example

/* Copy as many bytes as will fit */
if (n != 0) {
    while (--n != 0) {
        if ((*d++ = *s++) == '\0')
            break;
    }
}

/* Not enough room in dst, add NUL */
if (n == 0) {
    if (max != 0)
        *d = '\0';      /* NUL-terminate dst */
} 
```

Here is a version of strlcpy on [http://cantrip.org/strlcpy.c](http://cantrip.org/strlcpy.c) that uses memcpy:

```
/*
 * ANSI C version of strlcpy
 * Based on the NetBSD strlcpy man page.
 *
 * Nathan Myers <ncm-nospam@cantrip.org>, 2003/06/03
 * Placed in the public domain.
 */

#include <stdlib.h>  /* for size_t */

size_t
strlcpy(char *dst, const char *src, size_t size)
{
    const size_t len = strlen(src);
    if (size != 0) {
        memcpy(dst, src, (len > size - 1) ? size - 1 : len);
        dst[size - 1] = 0;
    }
    return len;
} 
```

Which one would be more efficient I think depends on the source string. For very long source strings the strlen may take long and if you don't need to know the original length then maybe the first example would be faster for you.

It all depends on your data so profiling on real data would the only way to find out.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T04:31:43.503

You can reduce the volume of code by:

```
int main(void)
{
    char *string = "hello world foo!";
    int max = 5;

    char *str = malloc(max + 1);
    if (str == NULL)
        return 1;
    if (string) {
        int len = strlen(string);
        if (len > max)
            len = max;
        strncpy(str, string, len);
        str[len] = '\0';
        printf("%s\n", str);
    }
    return 0;
} 
```

There isn't much you can do to speed the `strncpy()` up further. You could reduce the time by using:

```
char string[] = "hello world foo!"; 
```

and then avoid the `strlen()` by using `sizeof(string)` instead.

Note that if the maximum size is large and the string to be copied is small, then the fact that `strncpy()` writes a null over each unused position in the target string can really slow things down.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T04:31:45.157

`strncpy()` will automatically stop once it hits a NUL; passing `max` without checking is enough.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-03T04:33:49.783

I believe this is sufficient:

```
char *str = malloc(max+1);
if(! str)
return 1;

int len = strlen(string);  
memset(str, 0, max+1);
int copy = len > max ? max : len;
strncpy(str, string, copy); 
```

# jquery - 如何调用ajax加载器

> ID：10425143
> 
> 赞同：1
> 
> 时间：2012-05-03T04:28:29.323
> 
> 标签：jquery, html, ajax

我构建了一个小功能，其工作是在用户单击“a”标签时更改横幅图像路径。它工作正常，但是当我点击“a”标签时，它会改变图像。但这需要一些时间，因为图像的大小很重。所以我想把 ajax 加载器放到图像加载本身的时间。

```
<head>

<script type="text/javascript" src="jquery.js"></script>

<script type="text/javascript">
$(function(){
    $('.control').find('a').click(function(){

        var path= $(this).text();

        $('#banner').find('img').attr('src','images/' + path +'.jpg' )

        })

    })

</script>

</head>

<body>
<div id="banner">
<img width="500" height="300" src="images/first.jpg" />

</div>
<div class="control">
<a href="#" id="first">first</a>
<a href="#" id="second">second</a>
<a href="#" id="third">third</a>
<a href="#" id="forrth" >fourth</a>

</div>

</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T04:30:39.333

你可以试试这个

[jQuery 加载掩码](http://code.google.com/p/jquery-loadmask/)

# c# - 在 C# 中将单个“字符”字符大写？

> ID：10425150
> 
> 赞同：1
> 
> 时间：2012-05-03T04:29:34.863
> 
> 标签：c#, char, capitalize

是否有一种“简单”的方式来大写单一`char`类型的值？

这会起作用，但感觉很麻烦并且通常是错误的：

```
var ch = 'a';
var cap = ("" + ch).ToUpper()[0];
cap.Dump(); // (in LINQPad) => 'A' 
```

笔记：

1.  选择`"" + ch`over`ToString()`是因为 ReSharper 对我大喊大叫，因为我没有用后者指定文化……无论如何，`ch.ToString().ToUpper()[0]`感觉一样麻烦。
2.  为了全球化，*仅仅“加32”不是一种选择*；我不相信有任何单曲`char`在大写时会变成代理对。

谢谢，

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-03T04:31:39.083

```
Char.ToUpper(ch) 
```

应该做的工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T04:34:07.147

尝试`Char.ToUpper()`

```
var a = 'a';
a = Char.ToUpper(a); 
```

# python - 扫描重复的文件名

> ID：10425151
> 
> 赞同：1
> 
> 时间：2012-05-03T04:29:45.153
> 
> 标签：python

想象几个文件夹，例如

```
d:\myfolder\abc
d:\myfolder\ard 
d:\myfolder\kjes
... 
```

并且在每个文件夹中，都有诸如

```
0023.txt, 0025.txt, 9932.txt in d:\myfolder\abc
2763.txt, 1872.txt, 0023.txt, 7623.txt in d:\myfolder\ard
2763.txt, 2873.txt, 0023.txt in d:\myfolder\kjes 
```

所以，有三个`0023.txt`文件，两个`2763.txt`文件。

我想创建一个`d:\myfolder\dup.txt`包含以下信息的文件（例如 ）：

```
0023 3
0025 1
9932 1
2763 2
1872 1
7623 1
2873 1 
```

如何在 Python 中实现它？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T05:11:53.720

没有经过广泛测试，但这有效：

```
import os, os.path

dupnames={}
for root, dirs, files in os.walk('myfolder'):
    for file in files:
        fulpath=os.path.join(root,file)
        if file in dupnames:
            dupnames[file].append(fulpath)
        else:
            dupnames[file]=[fulpath]

for name in sorted(dupnames):
    print name, len(dupnames[name]) 
```

这通过以下方式工作：

1.  创建一个空字典；
2.  遍历文件层次结构；
3.  在列表的字典中创建一个条目（或附加现有列表），带有`base name: [path to file]`.

之后`os.walk`你会有一个这样的字典：

```
{0023.txt: ['d:\myfolder\abc', 'd:\myfolder\kjes'], 0025.txt: ['d:\myfolder\abc']} 
```

因此，要获得输出，只需遍历排序的 dict 并计算列表中的条目。您可以将其输出重定向到文件或直接在 Python 中打开输出文件。

您显示带有扩展名的输出 - `0023`vs `0023.txt`。如果你有`0023.txt`and会发生什么`0023.py`？相同的文件还是不同的文件？对于操作系统来说，它们是不同的文件，所以我保留了扩展名。如果这是您想要的输出，它很容易被剥离。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T04:32:06.697

第 1 步：使用 glob.glob 查找所有文件 第 2 步：使用每个文件名的最后部分（在最后一个分隔符之后）创建一个字典 第 3 步：浏览文件路径列表并查找所有重复项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T04:39:14.230

```
import os
import collections
path = "d:\myfolder"
filelist = []
for (path, dirs, files) in os.walk(path):

    filelist.extend(files)
filecount = collections.Counter(filelist) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T05:15:50.437

这并不完全是您所要求的，但它可能对您有用，而无需编写一行代码，尽管会降低性能。作为奖励，它将具有相同内容但文件名不同的文件组合在一起：

[http://stromberg.dnsalias.org/~strombrg/equivalence-classes.html](http://stromberg.dnsalias.org/~strombrg/equivalence-classes.html)

最新版本几乎总是 O(n)，丝毫不牺牲准确性。

# css - 如何使用伪元素添加响应式图像

> ID：10425162
> 
> 赞同：4
> 
> 时间：2012-05-03T04:30:58.697
> 
> 标签：css, image, responsive-design, pseudo-element

我尝试使用图像和 css 伪元素添加框阴影和渐变边框。

我试过那个代码：

```
.box:before {
    content: url('box-shadow.png');
    position: absolute;
    width: auto;
    height: auto;
    max-width: 100%;
    z-index: -1;
    bottom: -9px;
    line-height: 0;
}
.box:after {
    content: url('box-border.png');
    position: absolute;
    width: auto;
    height: auto;
    max-width: 100%;
    bottom: -5px;
    right: 0px;
} 
```

但是当父 div 调整大小时，添加的图像不会调整大小，而它是通过手动添加图像来工作的。

看到那个小提琴[http://jsfiddle.net/5TG3E/2/](http://jsfiddle.net/5TG3E/2/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-03T04:59:06.013

我从我身边尝试可能对你有帮助。像这样写：

```
.box:after {
    content:'';
    position: absolute;
    z-index: -1;
    bottom: -9px;
    margin: 0 auto;
    top:0;
    left:0;
    right:0;
    background:url('http://dl.dropbox.com/u/4812171/box-shadow.png') no-repeat bottom center;
    -moz-background-size:100% 9px;
    background-size:100% 9px;
}
.box:before {
    content:'';
    position: absolute;
    bottom: 0px;
    right: 0px;
    left:0;
    top:0;
    background:url('http://dl.dropbox.com/u/4812171/box-border.png') no-repeat bottom right;
} 
```

检查这个[http://jsfiddle.net/5TG3E/6/](http://jsfiddle.net/5TG3E/6/)

# php - 分解文件名以分隔名称和扩展名在 PHP 中不起作用？

> ID：10425167
> 
> 赞同：2
> 
> 时间：2012-05-03T04:31:42.443
> 
> 标签：php, filenames, explode, period, scandir

我正在构建一个返回字符串的类，该字符串将自动包含文件夹中的文件，有点像 HTML 文件的加载器。

这是将被调用的方法：

```
function build_external_file_include($_dir){
    $_files = scandir($_dir);
    $_stack_of_file_includes = "";//will store the includes for the specified file.
foreach ($_files as $ext){
    //split the file name into two;
    $fileName = explode('.',$ext, 1);//this is where the issue is.

    switch ($fileName[1]){
        case "js":
            //if file is javascript
             $_stack_of_file_includes =  $_stack_of_file_includes."<script type='text/javascript' src='".$dir.'/'.   $ext ."'></script>";

            break;
        case "css";//if file is css
             $_stack_of_file_includes =  $_stack_of_file_includes."<link rel=\"stylesheet\" type=\"text/css\" href=\"".$dir.'/'. $ext."\" />";
            break;
        default://if file type is unkown
             $_stack_of_file_includes =  $_stack_of_file_includes."<!-- File: ".  $ext." was not included-->";
    }

}
return $_stack_of_file_includes;
} 
```

所以，这运行没有任何错误。但是，它没有做它应该做的事情……或者至少我打算做的事情。这里从技术上讲，

`$fileName[1]`应该是扩展`js`

`$fileName[0]`应该是文件名`main`

但

`$fileName[0]`是`main.js`。

爆不认`.`？

先感谢您。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T04:35:27.980

您正在强制生成的数组具有 1 个元素，这会导致它具有整个文件名。

```
explode( '.', $ext, 1 ) 
```

应该改为

```
explode( '.', $ext ); 
```

证明：[http ://codepad.org/01DLpo6H](http://codepad.org/01DLpo6H)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T04:35:32.123

您已将爆炸限制为产生**1 个**数组条目，因此它永远无法执行任何操作：

```
print_r(explode('.', 'a.b', 1));
Array
(
    [0] => a.b
) 
```

限制应该至少为 2。或者，更好的是，您应该使用[pathinfo()](http://php.net/pathinfo)函数，它可以为您正确处理文件名组件。

# r - 列出 lm 对象，保留它们的类

> ID：10425173
> 
> 赞同：3
> 
> 时间：2012-05-03T04:32:08.697
> 
> 标签：r, plyr

为这样一个基本的问题道歉——我一定遗漏了一些明显的东西。

我想构建一个`lm`对象列表，然后我将在`llply`调用中使用它来对此列表执行中介分析。但这无关紧要——我只是首先想制作一个长度为 m 的列表（其中 m 是模型集），并且 m 中的每个元素本身将包含 n 个`lm`对象。

所以在这个简单的例子中

```
d1 <- data.frame(x1 = runif(100, 0, 1),
             x2 = runif(100, 0, 1),
             x3 = runif(100, 0, 1),
             y1 = runif(100, 0, 1),
             y2 = runif(100, 0, 1),
             y3 = runif(100, 0, 1))

m1 <- lm(y1 ~ x1 + x2 + x3, data = d1)
m2 <- lm(x1 ~ x2 + x3, data = d1)
m3 <- lm(y2 ~ x1 + x2 + x3, data = d1)
m4 <- lm(x2 ~ x1 + x3, data = d1)
m5 <- lm(y3 ~ y1 + y2 + x3, data = d1)
m6 <- lm(x3 ~ x1 + x2, data = d1) 
```

我想要一个包含 3 个元素的列表，第一个元素将包含`m1`and `m2`，第二个元素将包含`m3`and `m4`，等等。我最初的尝试是正确的，但是 lmm 对象不保留它们的类。

```
mlist <- list(c(m1,m2),
              c(m3,m4),
              c(m5,m6)) 
```

它具有正确的长度（即`length(mlist)`等于 3），但我认为我可以访问`lm`对象本身

```
class(mlist[1][[1]]) 
```

但这个元素显然是一个列表。

我是在第一步搞砸了如何构建列表，还是这对 lm 对象来说更基本？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T04:43:02.267

不，您只是对`c`列表索引感到困惑。试试这个：

```
mlist <- list(list(m1,m2),
              list(m3,m4),
              list(m5,m6))
> class(mlist[[1]][[1]])
[1] "lm" 
```

因此`c`将通过展平列表来连接列表。在`lm`对象的情况下，这基本上意味着它将每个`lm`对象组件的列表中的每个对象展平，然后将所有这些列表连接在一起。`c`更直观地用于原子向量。

列表的索引经常使人们绊倒。要记住的是，在选择一个元素时，它`[`总是会返回一个子列表。`[[`

在我上面的示例中，这意味着`mlist[1]`将返回长度为 1 的列表。第一个元素*仍然是 list*。所以你必须做一些像`mlist[1][[1]][[1]]`这样一直到`lm`对象的事情。

# android - 编辑文本值变空

> ID：10425174
> 
> 赞同：-5
> 
> 时间：2012-05-03T04:32:09.273
> 
> 标签：android

> **可能重复：**
> [获取 Edittext 值](https://stackoverflow.com/questions/10412784/getting-edittext-values)

我有两个屏幕。在第一个屏幕中，我有两个编辑框。当触摸第一个编辑框时，它将显示一个值列表。从中，我可以选择一个值并将其设置为第一个编辑文本的输入。第二个编辑框将发生相同的过程。

问题是当我为第二个编辑框设置输入时，第一个编辑框为空。

我的代码：

**编辑文本的 Ontouch：**

```
meditfrom.setOnTouchListener(new View.OnTouchListener() 
        {           
            @Override
            public boolean onTouch(View v, MotionEvent arg1) 
            {
                // TODO Auto-generated method stub
                 Intent  FromIntent= new Intent(v.getContext(),Fromlist.class);
                 startActivityForResult(FromIntent,REQUEST_CODE);   
                 return false;
            }
        });

        meditto.setOnTouchListener(new View.OnTouchListener() 
        {       
            @Override
            public boolean onTouch(View v, MotionEvent arg1) 
            {
                // TODO Auto-generated method stub
                 Intent  ToIntent= new Intent(v.getContext(),Tolist.class);
                 startActivityForResult(ToIntent,REQUEST_CODE); 
                 return false;
            }
        }); 
```

**从列表视图中选择：**

```
lv.setOnItemClickListener(new OnItemClickListener() 
            {
              public void onItemClick(AdapterView<?> parent, View view,
                  int position, long id) {
                // When clicked, show a toast with the TextView text
//              Toast.makeText(getApplicationContext(), ((TextView) view).getText(),
//                  Toast.LENGTH_SHORT).show();
                  Intent prev=new Intent(view.getContext(),ServiceExampleActivity.class);
                  prev.putExtra("Fromunit",((TextView) view).getText());
                  setResult(RESULT_OK,prev);
                  finish();
//                startActivity(prev);
              }
            });        
        } 
```

**活动结果代码：**

```
protected void onActivityResult(int requestCode, int resultCode, Intent data)
        {           
            EditText meditfrom=(EditText)findViewById(R.id.editText2);   
            EditText meditto=(EditText)findViewById(R.id.editText3);
            if (requestCode == REQUEST_CODE) 
            {               

             if(resultCode == RESULT_OK)
             {                 
                  final String fromunit=data.getStringExtra("Fromunit");
                  System.out.println("string="+fromunit);
                  meditfrom.setText(fromunit);    
            }

            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T04:35:47.350

为什么你不使用 Spinner/Context/AutocompleteTextView 菜单给用户一个选项列表来选择你为什么让它变得如此复杂。还要贴上onActivityResult的代码

# java - linux 中的 Java 编译错误：找不到符号“javax\mail\session”

> ID：10425182
> 
> 赞同：-1
> 
> 时间：2012-05-03T04:32:52.110
> 
> 标签：java, linux

在linux中编译java文件时。我收到错误：**找不到符号：“javax\mail\session”**。我正在使用 mail.jar 文件。这已经包含在类路径中。但我仍然收到此错误。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T09:25:18.973

它是 javax/mail/session 还是 javax/mail/Session。S 大写。你在使用任何 Ide 吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T04:44:53.950

对于初学者来说，在 linux 上，文件分隔符是*正**斜杠*（只有 windows 使用反斜杠）。

 *无论你在哪里使用，`"javax\mail\session"`试试吧`"javax/mail/session"`*

# yii - Yii CListView ajax 发布数据

> ID：10425184
> 
> 赞同：0
> 
> 时间：2012-05-03T04:33:23.107
> 
> 标签：yii

当使用带有 Ajax 的 Yii CListView 时，当我使用 Yii 默认分页器单击下一个或上一个按钮时，我想向控制器发布附加参数 - 例如，我想发布搜索关键字、用户 ID...等以更新控制器中的条件 -但我不知道该怎么做。

任何人都可以帮忙吗？

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T06:56:27.947

我认为你应该扩展 CListView 组件。

```
public function registerClientScript()
{
    /*deleted*/
    $options=array(
        'ajaxUpdate'=>$ajaxUpdate,
        'ajaxVar'=>$this->ajaxVar,
        'pagerClass'=>$this->pagerCssClass,
        'loadingClass'=>$this->loadingCssClass,
        'sorterClass'=>$this->sorterCssClass,
    );

    /*deleted*/
    $cs->registerScript(__CLASS__.'#'.$id,"jQuery('#$id').yiiListView($options);");
} 
```

可能您应该将自己的参数附加到选项数组中。

# php - 在 Where 子句中使用数组

> ID：10425192
> 
> 赞同：0
> 
> 时间：2012-05-03T04:34:14.487
> 
> 标签：php, mysql, where-clause

所以我需要做的是在我的表中找到 id = id**和**name = name。我试过这个没有成功。

```
$sql="SELECT * FROM $mysqltable WHERE id='$id' && name='$name'" 
```

编辑我发现我在下面缺少一个 } 括号，上面的代码确实有效：/ 谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T04:44:03.633

这就是我的做法：也尝试输入表名而不是变量。

```
$sql = "SELECT * From $mysqltable WHERE id='$id' AND name='$name'";

$result = mysql_query($sql) or die(mysql_error()); 
```

# javascript - 无法获得第二个单选按钮选定值

> ID：10425195
> 
> 赞同：0
> 
> 时间：2012-05-03T04:34:28.917
> 
> 标签：javascript

我有两对单选按钮。一对用于性别，另一对用于用户类型。我的问题是我无法获得用户类型的第二对单选按钮的选定值。仅获取第一对单选按钮的选定值，即性别。你能帮我吗？

```
$('input:radio[name=user[user_type_id]]:checked').val();
$('input:radio[name=user[gender]]:checked').val(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T05:08:37.663

检查[jQuery(':radio')](http://api.jquery.com/radio-selector/)选择器

如果您使用`val()`then 它不会给出输入值：选中，它只会返回打开或关闭。要获取单选按钮的值，请使用[attr](http://api.jquery.com/attr/)方法：

//HTML

```
<div>
<input type="radio" name="gender"  value="Male"/>
<input type="radio" name="gender" value="Female" /></div>
<div>
    <input type="radio" name="user" value="admin"/>
    <input type="radio" name="user" value="user" />
</div>
<input type="button" id="clickMe" value ="Click Me" /> 
```

//js

```
$('#clickMe').click(function(){

alert($('input[name=gender]:radio:checked').attr('value'));
    alert($('input[name=user]:radio:checked').attr('value'));

}); 
```

参考：
[获取 <input> 的属性名称值](https://stackoverflow.com/questions/3513809/jquery-get-attribute-name-value-of-input)
[jquery 在未设置属性时获取属性值](https://stackoverflow.com/questions/7689757/jquery-get-attribute-value-when-property-is-not-set)

检查这个[jsFiddle](http://jsfiddle.net/niranjankala/UNXa2/)示例

# php - Memcache + PHP - 为什么数据不会过期？

> ID：10425196
> 
> 赞同：11
> 
> 时间：2012-05-03T04:34:31.657
> 
> 标签：php, memcached

我有一个简单的例子，我将一个值设置为 5 秒。问题是5秒后；当我期望“假”时，我仍然会得到一个值。

```
$memcache = new Memcache;
$memcache->connect('localhost', 11211) or die ("Could not connect");

$memcache->set('foo', 'bar', 0, 5); // 5 seconds expiry
var_dump($memcache->get('foo')); // bar
sleep(10);
var_dump($memcache->get('foo')); // still shows bar 
```

这是内存缓存服务器版本

服务器版本：1.4.13

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T07:54:04.777

游戏迟到了，但在您的代码中，您似乎将“0”传递给到期（而不是“5”），这意味着“永不过期”特别是：

```
 $memcache->set('foo', 'bar', 0, 5); // 5 seconds expiry 
```

应该：

```
 $memcache->set('foo', 'bar', 5); // 5 seconds expiry 
```

除非我误解[了位于此处的 PHP 文档](http://php.net/manual/en/memcached.set.php)，这表明 set 命令采用三个参数：

```
 public bool Memcached::set ( string $key , mixed $value [, int $expiration ] ) 
```

编辑：哎呀，我看到您使用的是 Memcache 扩展而不是 Memcached，[它确实有四个 parmaters](http://php.net/manual/en/memcache.set.php)。也许尝试使用 MEMCACHE_COMPRESSED 常量而不是 0 来查看它是否有效：

```
 $memcache->set('foo', 'bar', MEMCACHE_COMPRESSED, 5); // 5 seconds expiry 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-24T04:52:51.233

memcached 服务器中存在一个错误，包括版本 1.4.13 到至少 1.4.14，一旦 memcached 服务器运行了一段时间，它有时会进入无法正确过期值的模式。

重新启动服务为我修复了它，我希望新版本能更永久地修复它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T04:04:55.717

由于代码看起来不错 - 下一条链是查看您的 memcache PHP 扩展版本不工作，或 memcached 服务器本身。

这有点棘手。最简单的方法是首先排除 memcached 服务器。（您可以安装一个 php 界面 - 但这不会帮助您解决问题。）所以...

在终端（或 Windows 中的命令窗口）中输入

```
 telnet localhost 11211 
```

（注意 - 默认情况下，telnet 客户端未安装在 Windows 中 - 转到“控制面板”，“打开或关闭 Windows 功能”并从那里添加。）

这使您可以访问 memcached。

然后输入

```
stats items 
```

它列出了 memcached 中的内存项。

希望你只有一块平板，所以记下它的数量和类型

```
stats cachedump [Number] 0 
```

这将列出缓存中记录的内容。

如果这仍然显示“bar”（以编码格式），那么它是 memcached 服务器不工作 - 升级到较新版本。

如果这没有显示“bar”（或者，最好是该项目不存在 - 您会得到 ERROR 代替），那么它将是 PHP 的 memcache 扩展不起作用。再次，检查你的版本。

完成后，输入

```
quit 
```

* * *

另一种方法是检查“memcached”（php 扩展）并用这些类重写您的 PHP 代码。它较新。如果仍然失败，那肯定是 memcached 服务器；如果这行得通，那就是 php memcache 扩展。

# ruby-on-rails - 为什么我的 Ruby on Rails 模型的属性没有使用 before_save 设置？

> ID：10425208
> 
> 赞同：0
> 
> 时间：2012-05-03T04:35:50.803
> 
> 标签：ruby-on-rails, activerecord, attributes

我正在制作一个 Ruby on Rails 应用程序，但无法设置我的模型的某些属性。问题是我有一个 :before_save 方法，但由于某种原因， encrypted_pa​​ssword 和 salt 没有保存到数据库中。这是模型：

```
class User < ActiveRecord::Base
  attr_accessor :password
  attr_accessible :username, :email, :password

  before_save :encrypt_password

  ...

  private
      def encrypt_password
        logger.debug "Got to encrypt_password 1"
        logger.debug "encrypted_password is #{ @encrypted_password }"

        if @encrypted_password != nil and @encrypted_password != ""
          return # @encrypted_password was already set
        end

        logger.debug "Got to encrypt_password 2"
        @salt = make_salt if new_record?
        logger.debug "New salt = #{ @salt }"
        @encrypted_password = encrypt(@password)
        logger.debug "New encrypted_password = #{ @encrypted_password }"
        @password = "(encrypted)"
        logger.debug "Got to encrypt_password 3"
      end 
```

在日志文件中，我看到以下内容：

```
 Started POST "/users" for 127.0.0.1 at Wed May 02 22:55:20 -0500 2012
    Processing by UsersController#create as HTML
      Parameters: {"commit"=>"Submit", "authenticity_token"=>"RY9fSMqb2+tdQ0fIjiEz8cfMTWTi012vCWdCvbxACLk=", "utf8"=>"\342\234\223", "user"=>{"username"=>"test6", "password"=>"[FILTERED]", "email"=>"test6@gmail.com"}}
      [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
      [1m[35mUser Exists (0.2ms)[0m  SELECT 1 FROM "users" WHERE LOWER("users"."email") = LOWER('test6@gmail.com') LIMIT 1
    Got to encrypt_password 1
    encrypted_password is 
    Got to encrypt_password 2
    New salt = 4f3464029393829aa562e533773f668c8471c51231611f6f214e654275f37184
    New encrypted_password = 0dafcff2fe75bb6f2b53afda79789cfe13bd3f733b817a0e2e30df98af5829bc
    Got to encrypt_password 3
      [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("created_at", "email", "encrypted_password", "is_done", "last_seen", "salt", "updated_at", "username") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Thu, 03 May 2012 03:55:20 UTC +00:00], ["email", "test6@gmail.com"], ["encrypted_password", nil], ["is_done", false], ["last_seen", nil], ["salt", nil], ["updated_at", Thu, 03 May 2012 03:55:20 UTC +00:00], ["username", "test6"]]
      [1m[35m (0.7ms)[0m  commit transaction
    Redirected to http://localhost:3000/
    Completed 302 Found in 7ms (ActiveRecord: 1.4ms) 
```

所以它肯定是在制作盐和加密密码。然而数据库没有更新？！

```
>> User.find(6)
=> #<User id: 6, username: "test6", email: "test6@gmail.com", encrypted_password: nil, is_done: false, salt: nil, last_seen: nil, created_at: "2012-05-03 03:55:20", updated_at: "2012-05-03 03:55:20"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T05:27:39.270

尝试使用`self.encrypted_password`.

ActiveRecord 为您的属性创建 getter/setter 方法，即

```
def encrypted_password
    ...
    # return something from the db
end

def encrypted_password=(x)
    ...
    # set something in the db to x
end 
```

而且当您编写时`@encrypted_password`，您实际上并没有使用这些方法，因此数据库不会得到更新。

您可以在日志中看到这一点：

`[1m[36mSQL (0.5ms)[0m [1mINSERT INTO "users" ("created_at", "email", "encrypted_password", "is_done", "last_seen", "salt", "updated_at", "username") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m [["created_at", Thu, 03 May 2012 03:55:20 UTC +00:00], ["email", "test6@gmail.com"], ["encrypted_password", nil], ["is_done", false], ["last_seen", nil], ["salt", nil], ["updated_at", Thu, 03 May 2012 03:55:20 UTC +00:00], ["username", "test6"]]`

`salt`并且`encrpyed_password`被设置为 nil，因为您没有更新属性，而是更新了类成员变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T05:25:36.657

我想你忘记`self.encrypted_password = @encrypted_password`了`def encrypt_password`。

# asp.net - 表格标签的大小不统一

> ID：10425210
> 
> 赞同：0
> 
> 时间：2012-05-03T04:35:54.340
> 
> 标签：asp.net, html, visual-studio, razor

我有一个 html 表，我正在尝试将其构建为网站横幅和菜单链接的格式。然而，无论我做了多少大小和边距摆弄，菜单链接标签都不会保持均匀大小。

```
<table id="format_table">
    <tr>
        <th colspan=100>
            LOGO
        </th>
    </tr>
    <tr align="center">
        <td>Home</td>
        <td>Etc</td>
        <td>Etc</td>
        <td>Etc</td>
    </tr>
    <tr>
        <td>
            @RenderBody()
        </td>
    </tr>
</table> 
```

```
table
{
    background-color: White;
    border: 1;
    border-width: 1;
    margin-left: auto;
    margin-right: auto;
    width: 85%;
}

th
{
    text-align:center;
    margin-left: auto;
    margin-right: auto;
    width: 80%;
}

td
{
    text-align: center;
    margin-left: auto;
    margin-right: auto;
    padding: 0 5 0 5px
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T05:02:15.730

试试这个：

```
td { width:100px; height:50px; } 
```

# jquery - Ajax 获取带有无用参数的请求

> ID：10425215
> 
> 赞同：0
> 
> 时间：2012-05-03T04:36:27.370
> 
> 标签：jquery, ajax, parameters

我正在尝试下一步执行：

```
$.ajax({
type: 'GET',
url: 'http://127.0.0.1:6789/dir', 
data: "",   
success: function(data) { /*do something*/ },
dataType: 'html'
}); 
```

但是当它执行时，我的服务器会收到如下内容：

```
http://127.0.0.1:6789/dir?_32567871112 
```

我不想传递任何参数。我错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T04:44:57.990

检查[jQuery.ajax](http://api.jquery.com/jQuery.ajax/)文档

如果您查看缓存参数，您可以看到它在调用结束时以该格式添加时间戳。如果您想摆脱它，请尝试将缓存设置为 true，或键入 POST（以防您不想允许兑现）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T04:45:29.917

简而言之，在您的通话选项中设置`cache`为。`true``$.ajax`

jQuery 添加了缓存中断。

jQuery 中有一个选项可以关闭它：（来自[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)）

> `cache`
> 
> 默认值：`true`，`false`对于数据类型“脚本”和“jsonp”
> 
> 如果设置为`false`，它将强制浏览器不缓存请求的页面。将缓存设置为`false`还会将查询字符串参数“_=[TIMESTAMP]”附加到 URL。

`cache`设置为的示例`true`：

```
$.ajax({
  type: 'GET',
  cache: true,
  url: 'http://127.0.0.1:6789/dir',
  data: "",
  success: function (data) { /*do something*/
  },
  dataType: 'html'
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T04:46:34.807

我的代码中有 ajaxSetup 属性：

```
$.ajaxSetup({ cache: false }); 
```

我评论了它，它现在可以工作了！谢谢。

# ubuntu - 安装 BigQuery

> ID：10425216
> 
> 赞同：0
> 
> 时间：2012-05-03T04:36:47.920
> 
> 标签：ubuntu, google-bigquery

我尝试在 ubuntu 上安装大查询，但出现以下错误：

```
Installed /usr/local/lib/python2.6/dist-packages/oauth2-1.5.211-py2.6.egg
error: Installed distribution httplib2 0.6.0 conflicts with requirement httplib2>=0.7.4 
```

我该如何纠正这个问题？

更新：

我正在尝试安装此处找到的 google BigQuery 工具包...

[http://code.google.com/p/google-bigquery-tools/downloads/list](http://code.google.com/p/google-bigquery-tools/downloads/list)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T04:00:11.590

如果您正在使用`easy_install`，您也可以尝试`easy_install -U httplib2`升级`httplib2`您正在使用的版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T10:17:17.807

您将需要获得最新版本的 httplib2。您可能需要从源代码构建更新的版本。

尝试运行`sudo apt-get update && sudo apt-get upgrade`

# jquery - 为什么 jQuery 动画在我的程序中响应很晚？我该如何解决？

> ID：10425224
> 
> 赞同：0
> 
> 时间：2012-05-03T04:38:29.137
> 
> 标签：jquery

我编写了一个程序来为 div 内容设置动画。这是根据鼠标位置工作的。在`mousemove`事件中，如果鼠标位置超过窗口高度的 1/3，内容将向上动画（内容将出现）。否则它将动画到下行（消失）。该程序正在给出正确的结果，但它需要时间。我认为动画函数多次调用。

如何改进代码？

请检查代码：

```
<html>
    <head>
        <script type="text/javascript" src="jquery.js"></script>
        <script type="text/javascript">            
            var ww;
            var wh;
            var moverHeight="150";
            var moveRespondPosition;

            $(document).ready(function()
            {
                ww=$(window).width();
                wh=$(window).height();

                $("#mover")
                .css("height",moverHeight)
                .css("bottom",-moverHeight);

                moveRespondPosition=wh-(wh/3);

                $(document).mousemove(function(e)
                {
                    var mousePosition=e.pageY;
                    if(mousePosition>moveRespondPosition)
                    {
                        setTimeout('animateElem(0)',100);

                    }
                    else
                    {                        
                        setTimeout('animateElem(-moverHeight)',100);
                    }
                }); 
            });

            function animateElem(value)
            {
                $("#mover").animate
                ({
                    "bottom":value
                });
            }

        </script>

        <style type="text/css">
            *
            {
                padding: 0px;
                margin: 0px;
            }
            body
            {
                overflow-y: hidden;
            }
            #wraper
            {
                width: 100%;
                height: 100%;
                position: relative;
            }

            #mover
            {
                width: 100%;                
                background-color: #192B44;
                position: absolute;                
            }
        </style>
    </head>
    <body>
        <div id="wraper">
            <div id="mover">
                Content
            </div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T06:21:53.140

问题是这部分：

```
$(document).mousemove(function(e)
{
    var mousePosition=e.pageY;
    if(mousePosition>moveRespondPosition)
    {
        setTimeout('animateElem(0)',100);
    }
    else
    {                        
        setTimeout('animateElem(-moverHeight)',100);
    }
}); 
```

基本上，您会在鼠标的每个像素移动中获得一个事件并创建一个新计时器。因此，如果鼠标在屏幕上移动 100 个像素，您将创建 100 个新计时器，1000 个像素，您将获得 1000 个计时器。

我不确定你甚至需要在这里使用 setTimeout，如果你想要一点延迟，你可以通过 animate 调用来做到这一点。但是在每个像素移动时启动 jQuery 动画仍然会有问题。您应该添加一个检查，以便仅在需要时执行动画。

这样的事情可能会更好：

```
$(document).mousemove(animateElem);

function animateElem(e)
{
    var mousePosition=e.pageY;
    var value = mousePosition>moveRespondPosition ? 0 : -moverHeight;

    if ($('#mover').css('bottom') !== value) {
        $('#mover').stop().animate({'bottom',value}, 100);
    }
} 
```

我还建议查看[http://benalman.com/projects/jquery-throttle-debounce-plugin/](http://benalman.com/projects/jquery-throttle-debounce-plugin/)来消除您的事件。没有必要对每一个像素移动进行计算，如果你只是每 25 毫秒检查一次，它对用户来说看起来是一样的，但性能要高得多。

如果您包含链接中的 debounce 脚本，您可以像这样使用它：

```
$(document).mousemove($debounce(25, animateElem)); 
```

# wcf - WCF 4.0 在路由器上路由和操作响应

> ID：10425226
> 
> 赞同：0
> 
> 时间：2012-05-03T04:38:37.893
> 
> 标签：wcf, wcf-routing

谁能指出我在这个问题上的正确方向？我们有一个 WCF 中央路由器，我们希望根据一些 xpath 标准来操纵通过路由器的响应。基本上，我们希望从一些错误请求中删除很多细节，并在其中包含一些额外的细节。理想情况下，我们还希望记录错误。

我知道通常更好的做法是更新 Web 服务来执行此操作，但在我们的情况下，这是不可能的，如果可能的话，需要在路由器上执行。

此外，如果我们可以记录每个请求和响应，那就太好了，但这可能是处理响应的不同解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T06:16:07.020

不知道你是否已经解决了这个问题，但是......

您应该能够使用 WCF 行为来做您需要的事情。

具有记录请求和响应的记录行为，以及记录错误/处理响应的另一种记录行为

我们使用行为记录到应用程序结构，并且我们有一个（讨厌的）行为可以捕获所有异常并返回带有错误消息的有效响应。我个人不喜欢这个“功能”，但你基本上可以对你的请求/响应做任何事情

# c# - C# POS 快速收据打印

> ID：10425227
> 
> 赞同：-1
> 
> 时间：2012-05-03T04:38:39.603
> 
> 标签：c#, receipt

我想打印我的 POS 应用程序的收据（Winform C#） 我的第一次尝试是使用水晶报表，但是当有很多客户排队时，速度不够快，甚至有些人会离开。所以我想在 DOS 模式下打印。我创建了一个虚拟文件并将其发送到 PRN。它运行良好，速度足够快，但是我有一个想法..还有其他更好的方法吗？我的意思是不是先创建一个虚拟文件，而是从 C# 本身逐行打印？当然必须快。

提前致谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T04:52:13.807

在此处查看我的答案：[在 .net 中的点阵打印机上打印](https://stackoverflow.com/questions/449777/print-on-dot-matrix-printer-in-net)

无需创建中间文件并将其发送到 PRN；只需添加一个**通用/纯文本**打印机，然后打印到该驱动程序。为此，请在 C# 中打开“PRN”或“LPT1”的文件句柄，然后您可以根据打开“PRN”或“LPT1”获得的文件句柄直接打印到它

* * *

**更新**

此处的代码可能会对您有所帮助：[Printing to LPT1 in C#](https://stackoverflow.com/questions/543155)

# linux - 案例标签不在linux中的switch语句错误中

> ID：10425229
> 
> 赞同：1
> 
> 时间：2012-05-03T04:38:50.920
> 
> 标签：linux, switch-statement, rpc

当我在 Linux 5 中编译应用程序时，出现以下错误。

api_svc1.c:335：错误：case 标签不在 switch 语句中 api_svc1.c:340：错误：“default”标签不在 switch 语句中

c 程序 'api_svc1.c' 由 rpcgen 生成。在geberated 代码中找不到switch 语句。

代码片段如下：

```
result = (*local)((char *)&argument, rqstp);
if (result != NULL && !svc_sendreply(transp, (xdrproc_t) _xdr_result, result)) {
        svcerr_systemerr (transp);
       _exit (-1);
     }
     _exit (0);
   case -1:
    /*
     * Error - fork couldn't create the child process, return
     */
     svcerr_systemerr(transp);
   default:
     /*
      * Parent process, clean up any zombie children and
      * return to svc_run()
      */
      svc_destroy(transp);
      while (waitpid(-1,NULL,WNOHANG) > 0);
      _rpcsvccount--;
      _rpcsvcstate = _SERVED;
      return; 
```

相同的代码在 Solaris 中成功生成和编译，没有错误。知道如何解决这个问题吗？

# facebook - 如何通过 Graph api 在单个批量查询中获取 Facebook 页面帖子及其评论？

> ID：10425231
> 
> 赞同：0
> 
> 时间：2012-05-03T04:39:09.250
> 
> 标签：facebook, facebook-graph-api, facebook-fql, jsonpath

根据这个：[http://developers.facebook.com/docs/reference/api/batch](http://developers.facebook.com/docs/reference/api/batch)，有一种方法可以使用第一个查询的结果来填充第二个查询。

```
curl \
   -F 'access_token=...' \
   -F 'batch=[{ "method": "GET", \
                "name" : "get-friends", \
                "relative_url": "me/friends?limit=5", \
              }, \
              { "method": "GET", \
                "relative_url": "?ids={result=get-friends:$.data.*.id}" \
              }]' \
      https://graph.facebook.com 
```

但是，我想在第一个查询中获取页面帖子，然后获取各个帖子的评论。不知道这是否可能，任何帮助表示赞赏。

```
curl \
   -F 'access_token=...' \
   -F 'batch=[{ "method": "GET", \
                "name" : "get-posts", \
                "relative_url": "cocacola/posts?limit=5", \
              }, \
              { "method": "GET", \
                "relative_url": "?????" \
              }]' \
      https://graph.facebook.com 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T09:18:44.913

幸运的是，如果您使用 Facebook 允许在单个查询中包含多个对象`/comments?ids`

```
curl \
   -F 'access_token=...' \
   -F 'batch=[{ "method": "GET", \
                "name" : "get-posts", \
                "relative_url": "cocacola/posts?limit=5", \
              }, \
              { "method": "GET", \
                "relative_url": "/comments?ids={result=get-posts:$.data.*.id}" \
              }]' \
      https://graph.facebook.com 
```

不幸的是，这比并行执行 5 个单独的查询要慢。

# localhost - 如何设置哪个将使用 localhost 端口

> ID：10425233
> 
> 赞同：0
> 
> 时间：2012-05-03T04:39:17.197
> 
> 标签：localhost

我曾尝试安装 WAMP、APPServ，但是当我转到[http://localhost](http://localhost)时，它会进入以前安装在计算机上的 XAMPP。如何选择我要在 localhost 上使用的那个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T04:41:11.323

在记事本中编辑 http.conf 文件，通常位于 C:\wamp\Apache2\conf 。

然后执行 CTL+F 或从记事本菜单栏中转到 EDIT/FIND。这将打开查找窗口。

在“查找内容”框中键入 80，然后单击下一步查找。将 80 替换为希望 apache 侦听的任何端口。根据您的配置，您可能需要更改为两个或更多位置。然后重新启动您的 apache 服务器。Apache 应该监听您在 http.conf 文件中设置的端口。希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T04:43:15.597

您可以更改他们工作的端口，默认为端口 80，例如，您可以将 WAMP 设置为端口 8080，然后用于访问 WAMP： [http://localhost:8080](http://localhost:8080) 并访问 APPServ： [http://localhost](http://localhost)

它们不会同时在相同的默认端口 80 上工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-08T15:39:22.960

打开C:\xampp\apache\conf，找到httpd.conf文件，用notepad++打开。查找这些行并将最后一行中的 80 更改为任何其他端口，例如 8080。

```
Listen 8080 
```

这样，我们将能够运行 Apache，但[http://localhost/url](http://localhost/url)将不起作用，您需要将端口号附加到 URL 中。例如，如果您在 Apache 配置中指定端口 8080，则必须像这样指定 URL，[http://localhost:8080/url](http://localhost:8080/url)。

重启阿帕奇。

# javascript - 将对象方法作为 Javascript 中的引用传递

> ID：10425237
> 
> 赞同：0
> 
> 时间：2012-05-03T04:39:33.027
> 
> 标签：javascript, function, reference

当我按下空格键时，chrome 显示错误：**“未捕获的类型错误：对象 # 没有方法‘空格键’”**

（firefox 确实说**“this.Spacebar 不是函数”**）；

这是对象，它将由**“Init();”初始化** （在页面加载...）：

```
function KeyManager() { 
this.mode="none";

this.Spacebar = ChatManagement.submitMessage;
this.KeyPress = function(e) {
        if(e.keyCode==13) {
            this.Spacebar();
        }
    }
this.switchKeySet= function(value) {
    if(this.mode!=value) {
        this.mode=value;
        switch(value) {
            case "login":
            this.Spacebar = LoginManagement.SendLogin;
            break;
            case "chat":
            this.Spacebar = ChatManagement.submitMessage;
            break;              
            default:
            case "none":
            break;
        }
    document.onkeypress=this.KeyPress;
    }
} 
```

初始化函数：

```
function Init() {
ChatManagement = new ChatManager();
LoginManagement= new Login();
KeyManagement= new KeyManager();
KeyManagement.switchKeySet("chat");
} 
```

聊天管理对象：

```
function ChatManager() {
this.submitMessage = function() {
    $("Message").focus();
    var text = $("Message").value; 
    if(text==""){  
        this.write('<p class="warning">Please enter a message');  
        return;  
    }  
    try{ 
        SendMessage(text);  
        this.write('<p class="event">Sent: '+text)  
    } catch(exception){  
    this.write('<p class="warning"> Error:' + exception);  
    } 
    $("Message").value="";
} 
```

}

**ChatManager 的“this.submitMessage()”**有效

当我使用**“console.log(this.Spacebar);”** 在**“switchKeySet();”的末尾** 我得到**“this.submitMessage()”**的代码。

当我在**“this.KeyPress()”**开始时使用它时，会得到“未定义”；

我试图避免多个 switch 语句和 javascript-libaries 对这种情况有一个功能.....

有人知道错误在哪里吗？我有感觉，“this.spacebar”得到了未定义的“this.submitMessage”，但初始化首先初始化ChatManager，然后在初始化完成后按空格键......

（或者不能像我尝试的那样传递函数吗？） %_%.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T04:56:35.803

这里的问题是，当您进入 this.KeyPress 的函数时，“this”关键字具有不同的含义：

```
this.Spacebar = ChatManagement.submitMessage; // 'this' refers to the KeyManager function 
this.KeyPress = function(e) { 
        if(e.keyCode==13) { 
            this.Spacebar(); // 'this' refers to the caller of the function (keypress event)
        } 
    } 
 ....
    document.onkeypress=this.KeyPress;  
  } 
```

查看[“this”关键字如何工作的答案？](https://stackoverflow.com/questions/3127429/javascript-this-keyword)为了获得更清晰的图片，但看起来您需要将代码更改为：

```
function KeyManager() {
var self = this;      
self.mode="none";     

self.Spacebar = ChatManagement.submitMessage;     
self.KeyPress = function(e) {     
        if(e.keyCode==13) {     
            self.Spacebar();     
        }     
    }     
self.switchKeySet= function(value) {     
    if(self.mode!=value) {     
        self.mode=value;     
        switch(value) {     
            case "login":     
            self.Spacebar = LoginManagement.SendLogin;     
            break;     
            case "chat":     
            self.Spacebar = ChatManagement.submitMessage;     
            break;                   
            default:     
            case "none":     
            break;     
        }     
    document.onkeypress=self.KeyPress;     
    }     
} 
```

# distance - 修改位置偏差的 Levenshtein 距离

> ID：10425238
> 
> 赞同：3
> 
> 时间：2012-05-03T04:40:41.190
> 
> 标签：distance, levenshtein-distance

我正在使用 Levenshtein 距离算法将作为用户输入提供的公司名称与已知公司名称的数据库进行比较，以找到最接近的匹配项。就其本身而言，该算法可以正常工作，但我想构建一个偏差，以便在字符串的初始部分匹配时认为编辑距离较低。

例如，如果搜索条件是“ABCD”，那么两者都是“ABCD Co.”。和“XYX ABCD”具有相同的编辑距离。但是，我想增加第一个字符串的初始部分比第二个字符串更接近搜索条件这一事实的权重。

这样做的一种方法可能是将插入/删除/替换成本修改为在字符串的开头更高而在结尾处降低。有没有人有一个成功实施的例子？使用 Levenshtein 距离仍然是完成我想要实现的目标的最佳方式吗？我对方法的假设是否准确？

**更新：**为了我的直接目的，我决定放弃上述内容，而是使用似乎可以解决问题的 Jaro Winkler 编辑距离。但是，我将保持开放状态以供进一步输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T04:43:36.130

您正在寻找的东西看起来像**Smith-Waterman**本地对齐：[http ://en.wikipedia.org/wiki/Smith%E2%80%93Waterman_algorithm](http://en.wikipedia.org/wiki/Smith%E2%80%93Waterman_algorithm)

# c++ - 使用 Xcode 进行 CMake：找不到配置的头文件 (.h.in)

> ID：10425240
> 
> 赞同：3
> 
> 时间：2012-05-03T04:41:01.197
> 
> 标签：c++, xcode, xcode4, cmake, header-files

我正在完成[CMake 教程](http://www.cmake.org/cmake/help/cmake_tutorial.html)，我正在*添加版本号和配置的头文件*部分。不幸的是，Xcode 无法识别生成的头文件：

错误：

![找不到“src/TutorialConfig”文件](../Images/4afbbe7bf152c61d406ecf3698f4cf25.png)

头文件由 CMake 生成 ok：

![finder 中的头文件](../Images/130c8d30bdbd2d836d971a902c02122f.png)

TutorialConfig.h.in

```
// the configured options and settings for Tutorial

#define Tutorial_VERSION_MAJOR @Tutorial_VERSION_MAJOR@
#define Tutorial_VERSION_MINOR @Tutorial_VERSION_MINOR@ 
```

CMakeLists.txt

```
cmake_minimum_required (VERSION 2.6)
project (Tutorial)
# The version number.
set (Tutorial_VERSION_MAJOR 1)
set (Tutorial_VERSION_MINOR 0)

# configure a header file to pass some of the CMake settings
# to the source code
configure_file (
  "${PROJECT_SOURCE_DIR}/TutorialConfig.h.in"
  "${PROJECT_BINARY_DIR}/TutorialConfig.h"
  )

# add the binary tree to the search path for include files
# so that we will find TutorialConfig.h
include_directories("${PROJECT_BINARY_DIR}/src")

# add the executable
add_executable(Tutorial src/tutorial.cpp) 
```

[这是我正在使用的教程。](http://www.cmake.org/cmake/help/cmake_tutorial.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T05:01:20.353

我不使用 Xcode，而是另一个基于 Linux 的 IDE。但也许我可以帮助你一点。我只是想知道——你的程序编译了吗？这也许更重要。

我的 IDE 经常抱怨诸如您的头文件——即由​​ CMake 生成的配置文件。可以忽略此类警告（至少对我而言）。我通常这样做是因为我的 build/ 目录有时是空的。因此，当我打开源文件时，还没有 TutorialConfig.h。

事实上，IDE 永远不会知道这样的头文件。那是因为它不知道你将在哪个 build/ 目录中编译你的程序。

如果您对警告感到担心，那么您可能可以在某个地方为 Xcode 指定哪个 build/ 目录来搜索头文件。在您运行 CMake 一次后，这将删除警告。但是，删除这样的警告是不可靠的，因为您总是可以在缺少 TutorialConfig.h 的另一个目录中构建。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T13:25:52.363

哦，哈哈。我换`#include "src/TutorialConfig.h"`了`#include "TutorialConfig.h"`，一切都很好。我通过检查项目设置弄清楚了：

![万岁！](../Images/4629db479ae3b29ba88821716b424822.png)

# ruby-on-rails - Rails - 在本地主机上创建内部服务器错误（500）

> ID：10425242
> 
> 赞同：2
> 
> 时间：2012-05-03T04:41:23.053
> 
> 标签：ruby-on-rails, error-handling, localhost

当我访问没有数据的 URL 时，我看不到 500 错误，而是显示“模板丢失”错误。同时，当我在服务器上运行它时，它显示了 500 错误。我需要在本地机器上进行测试。那么请告诉我如何在本地主机上创建这样的情况？

谢谢和问候， 拉杰什

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T05:31:40.863

如果您在生产模式下运行服务器，您可以在 localhost 中创建这种情况：（`rails s -e production`当然，如果错误仍然存​​在）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T06:43:41.240

这是一个简单的问题，您的相应视图不存在。打开与您的 url 对应的控制文件。然后查看正在调用的操作，然后查看 app/views/ 文件夹中是否有相应的视图。

500 错误的原因与 500 表示服务器端存在内部错误相同。

另外，不要去改变网址的字符和东西。它不会工作！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T04:50:05.160

如果您收到模板丢失错误，很可能是因为您缺少给定控制器操作的视图文件

例如：如果您有一个名为 users 的控制器

```
class UsersController < ApplicatationController

   def index
   end

end 
```

默认情况下，rails 期望在

`app/views/users/index.html.erb`（或火腿）

但是，如果您可以发布您收到的错误日志，我们可能会为您提供更多帮助

问候

同龄人

# javascript - IE 是唯一不允许 Flash 对象操作的浏览器（或版本）吗？

> ID：10425243
> 
> 赞同：12
> 
> 时间：2012-05-03T04:41:57.000
> 
> 标签：javascript, jquery, html, internet-explorer, browser

我已经尝试了多种通过 Javascript 编辑 Flash 对象/嵌入的方法，它似乎可以在除 IE 之外的所有东西中使用，所以我正在考虑将 IE 扔出这个应用程序的窗口，除非有其他浏览器的旧版本+使用过的版本也不允许您编辑对象。这方面的一个例子是：

```
document.getElementById(divID).innerHTML = '<object ...><embed ...><\/embed><\/object>'; 
```

或在jQuery中

```
var params = '<param name="allowFullScreen" value="true" />' +
             '<param name="allowScriptAccess" value="always" />' +
             '<param name="allowNetworking" value="all" />' +
             '<param name="movie" value="player.swf" />' +
$("#objectPlayer").html(params); 
```

如果所有其他的现代浏览器和它们最常用的版本都支持这种编辑，那么我将废弃 IE。在我收到大量 SWFObject JS 框架之前，我不会包含一个用于浏览器的巨大框架，我认为它不会包含我的人口统计数据。

**JSFiddle**

这是我创建的[JSFiddle](http://jsfiddle.net/wTVNn/)的链接。它适用于除 IE8 以外的所有浏览器

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T12:42:00.300

我相信`<param>`您的代码部分是用于`<object>`.

您也必须传递名称/值对`embed`。

```
$("#objectPlayer embed").attr({
    "src": "fileName.swf",
    "name": "fileName",
    "allowFullScreen": "true",
    "width": 200,
    "height": 100,
    "type": "application/x-shockwave-flash"

    //and so on...
    }); 
```

但无论如何我都会使用 SWFObject，它是行业标准，非常强大，并且是在网站上嵌入 flash 的最佳方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T00:20:09.380

`innerHTML`在我的一个项目中，我的 IE8 遇到了这个非常奇怪的错误，这很难发现 - 如果使用而不是`document.createElement`/添加画布元素，它会使 Google 的 excanvas 失败`document.appendChild`。

我通过获取`canvas`使用创建的所有元素来修复它`innerHTML`，并使用 DOM 的`createElement`方法重新创建它们。

我注意到 IE8 中的其他“交互式”元素存在类似问题，所以我建议你试试这个。

我没有IE8来测试它，但是在这里，[在jsfiddle上试试](http://jsfiddle.net/ArtBIT/4bwQk/15/ "jsfiddle")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T05:46:44.663

你可以试试这样的...

[http://jsfiddle.net/eH8cK/](http://jsfiddle.net/eH8cK/)

当您已经重写了几乎大部分内容时，您实际上可以重写播放器的全部内容。

请尝试让我知道它是否有效。谢谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T22:52:15.643

嗯...奇怪，DOM 不会在 IE8 中正确更新。这是工作代码。它很丑，还有很大的优化空间：

```
<div id="player">
<a href="javascript: void(0)" onclick="build()">Click Me!</a><br />
    <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" type="application/x-shockwave-flash" id="twitchTV" width="600" height="368" style="margin:0px;padding:0px">

    <param name="movie" value="http://www.twitch.tv/widgets/live_embed_player.swf?channel=day9tv" />
    <param name="quality" value="high" />
    <param name="bgcolor" value="#ffffff" />
    <param name="allowFullScreen" value="true" />
    <param name="allowScriptAccess" value="always" />
    <param name="allowNetworking" value="all" />
        <embed src="http://www.twitch.tv/widgets/live_embed_player.swf?channel=day9tv" quality="high" bgcolor="#ffffff" width="600" height="368"
    name="videoplayer" align="" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer"></embed>
    </object>     

</div> 
```

JS：

```
function build(){
    // Usually the channels are vars, but this is simplified.
    var data = 'http://www.twitch.tv/widgets/live_embed_player.swf?channel=lzgamertv';   // Object Data
    var html = '<a href="javascript: void(0)" onclick="build()">Click Me!</a><br /><object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" type="application/x-shockwave-flash" id="twitchTV" width="600" height="368" style="margin:0px;padding:0px"><param name="movie" value="'+data+'" /><param name="quality" value="high" /><param name="bgcolor" value="#ffffff" /><param name="allowFullScreen" value="true" /><param name="allowScriptAccess" value="always" /><param name="allowNetworking" value="all" /><embed src="'+data+'" quality="high" bgcolor="#ffffff" width="600" height="368" name="videoplayer" align="" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer"></embed></object>';

     $("#player").html("");
     $("#player").append(html);

} 
```

[JSFiddle 在这里](http://jsfiddle.net/S7rFC/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-06T17:04:52.493

如果我了解您的问题和使用目的，这就是我的建议。

我会使用[SWFObject](http://code.google.com/p/swfobject/)将您的 SWF 嵌入到您的 HTML 页面中。从那里您可以将 flashVars（您可以在其中设置自定义值的对象）传递给您的 SWF。实现这一点并不费力，而且使用起来更干净（在我看来）。flashVars 的值可以很容易地用 PHP 值设置或用普通值填充它们。

查看[这篇](http://premiumcoding.com/embeding-flash-swfobject-flashvars-as3/)文章，了解有关 SWFObject 和 FlashVars 以及如何在 ActionScript 3 中使用它们的更多信息。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-10T13:27:36.223

我所知道的 SWFObject 的唯一不错的替代品是 jQuery Tools Flashembed 插件，它缩小了 3.6k（压缩时更小）：

[http://jquerytools.org/demos/toolbox/flashembed/index.html](http://jquerytools.org/demos/toolbox/flashembed/index.html)

下载链接： http: [//jquerytools.org/download/](http://jquerytools.org/download/) 唯一的依赖是 jQuery 本身。

# javascript - 选中的复选框未在 UI 中更新

> ID：10425246
> 
> 赞同：9
> 
> 时间：2012-05-03T04:42:34.070
> 
> 标签：javascript, jquery, html, checkbox

我在通过 JS 检查复选框时遇到问题。当我通过 JS 检查复选框时，似乎在程序中它已被选中，但在 UI 中它没有更新。

如果有人对此有解决方案

```
<!DOCTYPE html> 
<html> 
    <head> 
    <title>Check</title> 
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>
    <script>    
    function getCheckedValue()
    {
    return ((document.getElementById("rock").checked));

     }

    function setCheckedValue(toBeChecked){
        document.getElementById(toBeChecked).checked="checked";
        alert((document.getElementById(toBeChecked).checked))
        alert($('#'+toBeChecked).attr('checked'))
    }
    </script>
</head> 
<body> 
<div data-role="page">
    <div data-role="header">
            <h1>What kind/s of music do you listen to?</h1>
    </div><!-- /header -->
    <div data-role="content">   
        <input type="checkbox" class="music" name="music" id="rock" value="rock" >
        <label for="rock">Rock</label>
        <input type="button" value="Get" onclick="alert(getCheckedValue())">
        <input type="button" value="Set" onclick="setCheckedValue('rock') ">
    </div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-03T04:43:27.457

我强烈建议您不要使用 attr ，而是使用[prop](http://api.jquery.com/prop/)。

> 确定是否选中复选框的首选跨浏览器兼容方法是使用以下方法之一检查元素属性上的“真实”值：

```
if ( elem.checked )
if ( $(elem).prop("checked") )
if ( $(elem).is(":checked") ) 
```

> 应该使用 .prop() 方法来设置禁用和检查，而不是 .attr() 方法。.val() 方法应该用于获取和设置值。

```
$("input").prop("disabled", false);
$("input").prop("checked", true);
$("input").val("someValue"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T09:31:19.517

在得到您所有努力的回应后，我已经开始工作，工作代码如下。

```
<!DOCTYPE html> 
<html> 
    <head> 
    <title>Check</title> 
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>
    <script>    
    function getCheckedValue()
    {
    return (document.getElementById("rock").checked);
    //return $('input[name=music]').checked;
     }

    function setCheckedValue(checkboxName,toBeChecked){
        $('input[name='+checkboxName+']').prop("checked", true).checkboxradio("refresh");
    }
    </script>
</head> 
<body> 
<div data-role="page">
    <div data-role="header">
            <h1>What kind/s of music do you listen to?</h1>
    </div><!-- /header -->
    <div data-role="content">   
        <input type="checkbox" class="music" name="music" id="rock" value="rock" >
        <label for="rock">Rock</label>
        <input type="button" value="Get" onclick="alert(getCheckedValue())">
        <input type="button" value="Set" onclick="setCheckedValue('music','rock') ">
    </div>
</div>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T04:46:56.140

尝试

```
function setCheckedValue(toBeChecked){
    document.getElementById(toBeChecked).checked=true;
    alert((document.getElementById(toBeChecked).checked))
    alert($('#'+toBeChecked).prop('checked'))
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T05:10:26.540

Jquery-mobile 为这些事情附加了类。基本上在那个输入/标签对中，您具有以下内容：

```
<div class="ui-checkbox">
  <input type="checkbox" class="music" name="music" id="rock" value="rock">
  <label for="rock" data-corners="true" data-shadow="false" data-iconshadow="true" data-  wrapperels="span" data-icon="checkbox-off" data-theme="c" class="ui-btn ui-btn-corner-all ui-btn-icon-left ui-checkbox-off ui-checkbox-on ui-btn-up-c">

    <span class="ui-btn-inner ui-btn-corner-all">
      <span class="ui-btn-text">Rock</span>
      <span class="ui-icon ui-icon-checkbox-off ui-icon-shadow">&nbsp;</span>
    </span>
  </label>
</div> 
```

您需要做的是找到一种方法来删除类并将其添加到标签和跨度标签。我已经为标签做了这个，但不是为了跨度，因为我终于要睡了。

```
function setCheckedValue(toBeChecked){
    document.getElementById(toBeChecked).checked="checked";
    $("label[for='rock']").addClass("ui-checkbox-off");
    $("label[for='rock']").addClass("ui-checkbox-on");
} 
```

我确实偶然发现：

```
$("#checkbox-label").checkboxradio("refresh"); 
```

来自：http: [//forum.jquery.com/topic/what-is-the-most-effective-way-of-unchecking-a-checkbox](http://forum.jquery.com/topic/what-is-the-most-effective-way-of-unchecking-a-checkbox)

不完全是同一个问题，我知道但有点相关。我没有机会解决它并让它工作......我也没有更多地研究它，看看它是否真的有效。

简而言之，该属性被设置为“已检查”，但是，元素需要刷新其 CSS 以适应新的“状态”。

我希望这有帮助！

# jquery - 用于桌面浏览器和 iOS & Android 的 JQuery 滚动条组件

> ID：10425258
> 
> 赞同：1
> 
> 时间：2012-05-03T04:43:45.503
> 
> 标签：jquery, android, ios, scrollbar

我一直被这个问题困扰，无法找到有效的解决方案。

我正在使用 DIV 来显示表格中的内容（图像...表单元素等）。

我想将滚动条添加到 DIV，因此如果内容超出 DIV，它应该是可滚动的。我尝试了几个库/组件但没有成功。它们都不适用于所有环境。

1.  [http://archive.plugins.jquery.com/project/uscrollbar](http://archive.plugins.jquery.com/project/uscrollbar) 无法显示滚动条并使内容消失。

2.  jScrollTouch_v2.0.js 适用于 Android

3.  [http://www.baijs.nl/tinyscrollbar/](http://www.baijs.nl/tinyscrollbar/) 它只是无法工作。开始抛出错误。

请建议任何图书馆来解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T04:48:59.133

[iScroll](http://cubiq.org/iscroll)应该有帮助

# hibernate - java.lang.ClassNotFoundException：找不到类加载器：flex.messaging.io.amf.ASObject

> ID：10425263
> 
> 赞同：1
> 
> 时间：2012-05-03T04:44:05.953
> 
> 标签：hibernate, apache-flex, flex3, ejb-3.0, rmi

目前我们正在将 flex 与 ejb 一起使用，但我收到了错误消息。我哪里出错了。谁能帮帮我。如果需要任何代码发布，请告诉我。提前致谢。

# jquery-mobile - jQuery Mobile NavBar 带有上一页的后退按钮

> ID：10425264
> 
> 赞同：5
> 
> 时间：2012-05-03T04:44:21.713
> 
> 标签：jquery-mobile, cordova

在 iPhone 上，当您在顶部有一个 NavBar 时，会有一个后退按钮。

而不是说“后退”，它包含上一页的标题。

所以你可能会说“结帐”页面。NavBar 的标题是“Checkout”，按钮可能是“Books”。

单击显示“书籍”的按钮将带您返回上一页。

如何在 jQuery mobile 中实现这一点，而无需在后退按钮的名称中进行编码，因为您可能已经从不同的路线到达该页面？

**编辑**

我知道我可以在页面上做到这一点；

```
<div data-role="page" id="pageViewChallenges" data-add-back-btn="true" data-back-btn-text="previous"> 
```

但这会使按钮文本“上一个”而不是页面名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T05:07:10.267

你可以使用 `<a href="previuos_page.html" id="bkbtnid" data-icon="back">Books</a>`

（**如果您使用外部页面**）

和

```
<a href="#Id_of_previous_page" id="bkbtnid" data-icon="back">Books</a> 
```

（**使用内部页面时**）

这是自定义后退按钮的简单设置，如果您希望上一页标题作为后退按钮，则只需通过 jquery 方法获取后退按钮的标题并在后退按钮标题中设置。如果您可以获得上一页标题然后在 pageshow 上设置它通过使用 jquery 获取后退按钮的 id 事件，如下所示：

```
$('#MaterialAndQuantityDetails')
        .live(
                'pagebeforeshow',
                function() {
                    // page header Management
                    $('#bkbtnid').html("");
                    $('#bkbtnid').html(BackButtontext);
 }); 
```

如果你想如何获得上一页的标题，那么在之前的“ **pagehide** ”上写代码

```
var BackButtontext = document.getElementById('previous_page_header_id').value; 
```

这里 BackButtontext 是用于设置后退按钮文本的全局变量。

# mysql - mysql中的分层数据模型

> ID：10425268
> 
> 赞同：1
> 
> 时间：2012-05-03T04:45:14.617
> 
> 标签：mysql

如何为下表编写树结构查询。该表是动态添加、删除、编辑的，因此查询应该是动态的。在 Oracle 中很容易检索查询。

如何使用mysql数据库检索结果。

* * *

node_id：parent_id：名称：类型

* * *

1：0：根：目录

2：1：P1：目录

3：2：C1：文件

4：2：C2：文件

5：1：P2：目录

6：5：C1：文件

7：5：C2：文件

8：5：P2_1：目录

9：8：P2_1_C1：文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T05:01:48.887

有一种类似于左右策略的东西，可以让它看起来像桌子上的一棵树。添加/删除数据时，这将需要一些额外的更新。这里解释得很好 - [http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/)

# jquery - 为jQuery中的元素设置新ID

> ID：10425269
> 
> 赞同：3
> 
> 时间：2012-05-03T04:45:26.720
> 
> 标签：jquery

我有代码可以用 jquery 更改元素的新 id。

```
$('.trclick').click(function(){
  var id = $(this).attr('id');
  var idright = split_right(id,'__');
  var val = $('#ims_master_test_day1__'+idright).val();

  $('#ims_master_test_day').attr( 'id', 'ims_master_test_day__' + idright );
}); 
```

它工作，但它只激活一个。请帮我。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T04:52:46.270

当您说“它有效但它只激活一个”时，我将假设您的意思是“它仅在第一次被调用时起作用”。原因是这行代码：

```
$('#ims_master_test_day').attr( 'id', 'ims_master_test_day__' + idright ); 
```

您通过其 id 获取元素，然后更改它。它第二次不起作用，因为元素不再具有该 ID。您可以通过执行以下操作来修复它：

```
var test_day = $('#ims_master_test_day')

$('.trclick').click(function(){
  var id = $(this).attr('id');
  var idright = split_right(id,'__');
  var val = $('#ims_master_test_day1__'+idright).val();

  test_day.attr( 'id', 'ims_master_test_day__' + idright );
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T04:51:52.000

第一次改id后，以后再也找不到要改id的元素了

```
// this won't work the second time because the id is different now
$('#ims_master_test_day').attr( 'id', 'ims_master_test_day__' + idright ); 
```

所以你需要修改你的代码才能每次都改变id。例如，这样的事情可能会起作用：

```
// cache the current id in some variable somewhere :)
var currentId;
$('.trclick').click(function(){
  var id = $(this).attr('id');
  var idright = split_right(id,'__');
  var val = $('#ims_master_test_day1__'+idright).val();

  $('#'+currentId).attr( 'id',  'ims_master_test_day__' + idright);

  // set the current id
  currentId = 'ims_master_test_day__' + idright;
}); 
```

# php - 如何使用输入到 JQuery 自动完成表单中的数据？

> ID：10425276
> 
> 赞同：1
> 
> 时间：2012-05-03T04:46:00.263
> 
> 标签：php, jquery, html, forms, autocomplete

所以我正在尝试提取输入此表单的信息并将其用于其他事情。

```
<form onsubmit="return false;">
Enter a School:
<input id="schoolsearch" type="text" /> 
<INPUT TYPE=SUBMIT VALUE="GO">
</form> 
```

我知道这似乎是一个简单的问题——但我就是想不通。此表单与一个 .php 文件一起使用，该文件有助于为自动完成功能提供动力。

我会使用 METHOD=post 还是什么？

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T04:59:07.197

这是 ajax 在 javascript 中如何工作的概述。有关更多信息，请参见此处[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)。

`run this on.keypress()`

```
$.ajax({
type: 'POST',
url: url, //url of the php file that searches for schools with the given value
data: data, // the data you are sending so something like $('#school').val()
success: success, // prepare to catch what the php returns 
dataType: dataType
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T04:59:26.160

您好，请在此处查看**演示**：http : [//jsfiddle.net/vZtGs/](http://jsfiddle.net/vZtGs/) **或者**请在此处使用更多选项查看我的旧回复之一：[jquery autocomplete using '@'](https://stackoverflow.com/questions/10060931/jquery-autocomplete-using)

在这里阅读：http: [//jqueryui.com/demos/autocomplete/](http://jqueryui.com/demos/autocomplete/)（支持其他选项和事件）

**代码**

```
$( "#autocomplete, #schoolsearch" ).autocomplete({
    source: function( req, resp ) {
        $.post( "/echo/json/", {
            json: '["School1", "School2", "School3", "School4", "School5"]',
            delay: 1
        }, function(data) {
            resp( data );
        }, "JSON" );
    },
        select: function(event, ui) {
            //var terms = split(this.value);
            alert('Do whatever with this value man: ' + ui.item.value);
            return false;
        }
});
​ 
```

# uitextview - 关于 UITextView 如何在自动换行后获取行数组？

> ID：10425282
> 
> 赞同：1
> 
> 时间：2012-05-03T04:46:42.480
> 
> 标签：uitextview

我想在 UITextView 中提取字符串后，它们完成输入到 UITextView 中相同的行数组。

# javascript - 将破折号分隔的字符串转换为驼峰式？

> ID：10425287
> 
> 赞同：48
> 
> 时间：2012-05-03T04:47:46.033
> 
> 标签：javascript, regex

例如，假设我总是有一个由“-”分隔的字符串。有没有办法改造

今天是美好的一天

到

今天是伟大的一天

使用正则表达式？

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-05-03T04:56:00.950

是*（已**编辑**以支持非小写输入和 Unicode）*：

```
function camelCase(input) { 
    return input.toLowerCase().replace(/-(.)/g, function(match, group1) {
        return group1.toUpperCase();
    });
} 
```

[在 MDN 的“将函数指定为参数”](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace#Specifying_a_function_as_a_parameter)文档中查看有关“替换回调”的更多信息。

回调函数的第一个参数是完全匹配，随后的参数是正则表达式中带括号的组（在这种情况下，连字符后面的字符）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-09-08T12:49:34.430

另一种使用[reduce](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce?v=b)的方法：

```
function camelCase(str) {
  return str
    .split('-')
    .reduce((a, b) => a + b.charAt(0).toUpperCase() + b.slice(1));
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-03T05:06:59.580

您可以匹配每个破折号 ( `-`) 或字符串开头之后的单词字符，或者您可以通过匹配每个单词边界 ( `\b`) 之后的单词字符来简化：

```
function camelCase(s) {
  return (s||'').toLowerCase().replace(/(\b|-)\w/g, function(m) {
    return m.toUpperCase().replace(/-/,'');
  });
}
camelCase('foo-bar'); // => 'FooBar'
camelCase('FOo-BaR-gAH'); // => 'FooBarGah' 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-03T04:56:51.480

[这是一个演示](http://jsfiddle.net/vR3Wa/2/)

```
var test = 'It-is-a-great-day-today';

function camelize(str) {
    return str[0].toLowerCase() + str.replace(/-([a-z])/g, function(a, b) {
        return b.toUpperCase();
    }).slice(1);
}

console.log(camelize(test)); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-03T07:06:52.380

这也应该有效：

```
function camelCase(str) {
  return str.replace(/^.|-./g, function(letter, index) {
    return index == 0 ? letter.toLowerCase() : letter.substr(1).toUpperCase();
  });
} 
```

恕我直言，它的效率更高一些，因为我们不会先将整个输入字符串转换为小写，然后在需要时再转换为大写。此函数仅将第一个字母转换为小写，然后将连字符后的每个字符转换`-`为大写。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-03T05:15:12.983

见[http://jsfiddle.net/54ZcM/](http://jsfiddle.net/54ZcM/)

```
function camelCase(string) {
    return string.toLowerCase().replace(/(\-[a-zA-Z])/g, function($1) {
        return $1.toUpperCase().replace('-','');
    })
}

alert(camelCase('fOo-BarBA-fo')); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-09-01T09:27:37.700

我知道这个问题有点老了，但是，

这是我的 camelCase 函数版本：

```
var camelCase = (function () {
    var DEFAULT_REGEX = /[-_]+(.)?/g;

    function toUpper(match, group1) {
        return group1 ? group1.toUpperCase() : '';
    }
    return function (str, delimiters) {
        return str.replace(delimiters ? new RegExp('[' + delimiters + ']+(.)?', 'g') : DEFAULT_REGEX, toUpper);
    };
})(); 
```

它处理以下所有边缘情况：

*   默认情况下同时处理下划线和连字符（可使用第二个参数配置）
*   带有 unicode 字符的字符串
*   以连字符或下划线结尾的字符串
*   具有连续连字符或下划线的字符串

这是现场测试的链接：http: [//jsfiddle.net/avKzf/2/](http://jsfiddle.net/avKzf/2/)

以下是测试结果：

*   输入：“ab-cd-ef”，结果：“abCdEf”
*   输入：“ab-cd-ef-”，结果：“abCdEf”
*   输入：“ab-cd-ef--”，结果：“abCdEf”
*   输入：“ab-cd--ef--”，结果：“abCdEf”
*   输入：“--ab-cd--ef--”，结果：“AbCdEf”
*   输入：“--ab-cd-__-ef--”，结果：“AbCdEf”

请注意，以分隔符开头的字符串将导致开头为大写字母。如果这不是您所期望的，您始终可以使用 lcfirst。如果您需要，这是我的 lcfirst：

```
function lcfirst(str) {
    return str && str.charAt(0).toLowerCase() + str.substring(1);
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-12-16T16:54:51.610

这很好用，但有人可能会清理它。

```
var toCamelCase = function(str) {
        // Replace special characters with a space
        str = str.replace(/[^a-zA-Z0-9 ]/g, " ");
        // put a space before an uppercase letter
        str = str.replace(/([a-z](?=[A-Z]))/g, '$1 ');
        // Lower case first character and some other stuff that I don't understand
        str = str.replace(/([^a-zA-Z0-9 ])|^[0-9]+/g, '').trim().toLowerCase();
        // uppercase characters preceded by a space or number
        str = str.replace(/([ 0-9]+)([a-zA-Z])/g, function(a,b,c) {
            return b.trim() + c.toUpperCase();
        });
        return str;
};

console.log(toCamelCase('hyphen~name~ format'));
console.log(toCamelCase('hyphen.name.format'));
console.log(toCamelCase('hyphen-name-format'));
console.log(toCamelCase('Hyphen-Dame-Gormat'));
console.log(toCamelCase('EquipmentClass name'));
console.log(toCamelCase('Equipment className'));
console.log(toCamelCase('equipment class name'));
console.log(toCamelCase(' e    Equipment Class Name'));
console.log(toCamelCase('under9score_name_format'));
console.log(toCamelCase('Enderscore_name_format'));
console.log(toCamelCase('EnderscoreBameFormat'));
console.log(toCamelCase('_EnderscoreBameFormat')); 
```

[http://jsbin.com/yageqi/1/edit?js,console](http://jsbin.com/yageqi/1/edit?js,console)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-10-28T21:14:07.370

```
'it-is-a-great-day-today'.split('-').map(function(x,i){
    return (i?x[0].toUpperCase():x[0]) + x.slice(1).toLowerCase()
}).join('') 
```

结果：

```
'itIsAGreatDayToday' 
```

或者，`.match(/\w+/g)`而不是`.split('-')`- 取决于您在“this--is-a-test”等边缘情况下想要做什么。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-06-18T22:16:37.790

```
var string = "it-is-a-great-day-today";
or
var string = "it_is_a_great_day_today";

var regex = /(_|-)([a-z])/g;

string.toLowerCase().replace(regex, toCamelCase );

function toCamelCase( string ){
  return string[1].toUpperCase();
}

Output: "itIsAGreatDayToday"; 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-03-07T21:08:15.613

这是您可以用来测试此 [http://jsfiddle.net/5n84w/2/的 jsfiddle](http://jsfiddle.net/5n84w/2/)

```

```
/**
 * Function to convert any string to camelCase
 * var regex = 'chetan-Ankola###.com---m13ok#-#alo(*finding!R%S#%-GFF'; 
 * Where [-_ .] is the seperator, you can add eg: '@' too
 * + is to handle repetition of seperator           
 * ? is to take care of preceeding token 
 * match nov(ember)? matches nov and november
 */
var camelCaser = function (str) {
    var camelCased = str.replace(/[-_ .]+(.)?/g, function (match, p) {
        if (p) {
            return p.toUpperCase();
        }
        return '';
    }).replace(/[^\w]/gi, '');
    return camelCased;
}; 
```

```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2018-04-04T07:07:33.187

最好做这个，伙计们，

```
function camelCase(data) {
    var tmp;
    if (data && typeof data === 'object') {
        forEach(data, function (value, key) {
            var tmpvalue = camelCase(key);
            tmp[tmpvalue] = value;
        });
        return tmp;
    } else {
        return data.toLowerCase().replace(/(\_\w)/g, function (m) { return m[1].toUpperCase() }).replace(/(\-\w)/g, function (m) { return m[1].toUpperCase(); });
    }
}

console.log(camelCase("SucCCCess_dfds_dsqsdqs-dsdqs-dqsdqs"));
```

在任何情况下都能完美运行。

* * *

## 回答 #13

> 赞同：-2
> 
> 时间：2014-12-10T20:38:30.057

```
$scope.toCamelCase = function(arg){
    var arg = arg.toLowerCase();
    var arr = arg.split("");
    arr[0] = arr[0].toUpperCase();
    return arr.join("");
}; 
```

# java - GAE 上的 PersistenceException

> ID：10425290
> 
> 赞同：1
> 
> 时间：2012-05-03T04:48:13.273
> 
> 标签：java, google-app-engine

突然，我们的应用程序抛出了这个错误：

错误异常：org.springframework.orm.jpa.JpaSystemException：事务刷新失败；嵌套异常是 javax.persistence.PersistenceException: Transaction failed to flush

我注意到“数据存储读取操作”已达到 100%。这可能是与此相关的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T06:08:07.903

```
I notice that the "Datastore Read Operations" has reached 100%. Could this be issue related to this? 
```

当 Spring 尝试将控制权传递给持久化操作控制器时，它必须刷新以将事务中的所有内容持久化到数据库，但是当 DB cn' 不再接受它们时，因为我达到了 limit: `Datastore Read Operations" has reached 100%`，它会抛出这个异常。

我假设您在 DB 中有一些有限的空间？也许你只是用完了空间？

# android - 如何在android中播放mp4视频

> ID：10425292
> 
> 赞同：2
> 
> 时间：2012-05-03T04:48:23.683
> 
> 标签：android, video, video-streaming, mp4

我想在 android 中从服务器播放 mp4 视频。 [视频网址](http://victoryfireworks.com.c1.previewmysite.com/images/stories/movies12/Night_Rage.mp4)

我尝试使用视频视图，但出现空白屏幕。我也尝试使用 Intent.Action 视图，但它显示消息“无法播放视频”。

有没有其他方法可以做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-27T04:20:23.310

像这样使用：

```
Uri uri = Uri.parse(URL); //Declare your url here.

VideoView mVideoView  = (VideoView)findViewById(R.id.videoview)
mVideoView.setMediaController(new MediaController(this));       
mVideoView.setVideoURI(uri);
mVideoView.requestFocus();
mVideoView.start(); 
```

另一种方法：

```
String LINK = "type_here_the_link";
  VideoView mVideoView  = (VideoView) findViewById(R.id.videoview);
  MediaController mc = new MediaController(this);
  mc.setAnchorView(videoView);
  mc.setMediaPlayer(videoView);
  Uri video = Uri.parse(LINK);
  mVideoView.setMediaController(mc);
  mVideoView.setVideoURI(video);
  mVideoView.start(); 
```

# caching - 如何存储几百万个缓存，然后跟踪 20 个最旧的缓存

> ID：10425293
> 
> 赞同：3
> 
> 时间：2012-05-03T04:48:44.753
> 
> 标签：caching, data-structures, language-agnostic

我收到一个面试问题，说我需要存储几百万个缓存，然后我需要跟踪 20 个最旧的缓存，一旦缓存收集的阈值增加，就用下一组最旧的缓存替换 20 个最旧的缓存。

> 我回答要为它保留一个 hashmap，这个问题再次增加了如果我们想快速访问 hashmap 上的任何元素怎么办，怎么办，所以我告诉它的 map 所以访问不会花时间，但面试官并不满意。那么对于这种情况应该是什么空闲方式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T04:50:56.360

[队列](http://en.wikipedia.org/wiki/Queue_%28data_structure%29)非常适合查找和删除最旧的成员。

> 实现为双向链表的队列在两端都有 O(1) 的插入和删除。

[优先级队列](http://en.wikipedia.org/wiki/Priority_queue)有助于为队列中的不同项目赋予不同的权重（例如，重新创建某些队列元素可能比其他元素更昂贵）。

您可以使用哈希映射来保存实际元素并根据哈希键快速找到它们，并使用*哈希键*队列来跟踪缓存元素的年龄。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T09:04:33.993

通过对队列使用双链表并维护元素的哈希映射，您应该能够创建支持最大大小的缓存（甚至是 LRU 缓存）。这应该导致对对象的引用被存储 3 次，而不是对象被存储两次，如果你实现了这个，一定要检查这个（避免这种情况的简单方法是只对哈希键进行排队）

检查溢出时，您只需将最后一项从队列中弹出，然后将其从哈希图中删除

访问项目时，您可以使用哈希映射来查找缓存的项目。然后，如果您正在实现 LRU 缓存，您只需将其从队列中删除并将其添加回开头，this.

通过使用这种结构，插入、更新、读取、删除都将是`O(1)`.

接下来的问题是，面试官会询问项目是否具有每个缓存项目不同的生存时间 (TTL)。为此，您需要有另一个队列来维护按生存时间排序的项目，这里唯一的问题是插入现在变成`O(n)`了，因为您必须扫描 TTL 队列并找到过期点，因此您必须决定是否将 TTL 队列存储为 n 树的内存使用是值得的（从而产生`O(log n)`插入时间）。或者您可以将您的 TTL 队列实现为每 ~ 1 分钟间隔或类似的存储桶，您`O(1)`仍然会得到 ~ 插入，并且只会稍微降低到期后台进程的性能，但不会大大降低（这是一个后台进程）。

# c# - 向 ActiveSync 注册 RAPI 程序？

> ID：10425297
> 
> 赞同：5
> 
> 时间：2012-05-03T04:49:03.600
> 
> 标签：c#, windows-mobile, activesync, rapi

我正在尝试编写一个程序，该程序将在连接 Windows Mobile 设备时运行，根据[Microsoft 的文档](http://msdn.microsoft.com/en-us/library/aa922038.aspx)，我们必须这样做：

> 如果您希望 RAPI 应用程序在 Windows Mobile 设备连接到台式计算机时自动执行，请不要将您的应用程序置于 StartUp 或让它自动运行。相反，将其注册为在设备连接时由 ActiveSync 自动运行。有关详细信息，请参阅 MSDN。

我该如何做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T05:28:06.710

将注册表值设置为

> HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows CE Services\AutoStartOnConnect

来源： http: [//pocketnow.com/tweaks-hacks/how-to-automatically-start-a-pc-application-on-device-connect-disconnect](http://pocketnow.com/tweaks-hacks/how-to-automatically-start-a-pc-application-on-device-connect-disconnect)

# python - 洗牌随机整数，打印所有可能性

> ID：10425299
> 
> 赞同：2
> 
> 时间：2012-05-03T04:49:34.900
> 
> 标签：python, algorithm

> **可能重复：**
> [如何在 Python 中生成列表的所有排列](https://stackoverflow.com/questions/104420/how-to-generate-all-permutations-of-a-list-in-python)

假设我有一个范围，0-2。我想打乱这些数字并打印出所有的可能性：

```
[0, 1, 2]
[0, 2, 1]
[1, 2, 0]
[1, 0, 2]
[2, 0, 1]
[2, 1, 0] 
```

对于任何范围 0-N，我将如何在 Python 中执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T04:51:07.313

[`itertools.permutations()`](http://docs.python.org/library/itertools.html#itertools.permutations)

# salesforce - 查找特定日期的星期几

> ID：10425302
> 
> 赞同：1
> 
> 时间：2012-05-03T04:49:44.463
> 
> 标签：salesforce, apex-code, visualforce

我有一个对象，它有 2 个日期 startdate_ *c 和 enddate* _c 。我需要找到一种方法来找到这些日期所在的星期几

例如 startdate = 1 jun 2012 和 enddate = 3 jun2012 我需要知道这些日期之间的星期几。在这个例子中 Mon = false，tue = false，wed = false，thu=false，fri=真，星期六=真，太阳=真

我想在 Vf 页面中使用它来根据布尔值呈现一些字段。

任何指针都会有很大帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T05:10:03.160

Date 有一个`toStartOfWeek`您可以利用的方法，假设您的两个日期确实在同一周内，您可以简单地执行以下操作：

```
date weekStart = startdate.toStartOfWeek();
list<boolean> days = new list<boolean>();

for(integer i = 0; i < 7; i++)
{
  days.add(weekStart.addDays(i) >= startdate && weekStart.addDays(i) <= enddate);
} 
```

有点粗糙，但它会给你一个包含 7 个布尔值的数组。对于更长/未知的范围，您可以使用日期光标并在此处增加它而不是整数，但这应该可以帮助您入门。注意，我没有测试过这段代码；）

# c# - 使用反射来新建一个 webdriver 类

> ID：10425305
> 
> 赞同：0
> 
> 时间：2012-05-03T04:50:11.970
> 
> 标签：c#, reflection, selenium, webdriver

我想使用反射来新建一个 webdriver 类。

我的代码是这样的：

```
<i>public static IWebDriver driver;</i>

<i>driver = (IWebDriver)Assembly.Load("OpenQA.Selenium.Firefox").CreateInstance("OpenQA.Selenium.Firefox.FirefoxDriver");</i> 
```

但它失败了。驱动程序什么也不显示，值为空。

是不是位置`OpenQA.Selenium.Firefox`不对？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T05:36:10.597

为什么不只使用一个开关，例如：

```
 IWebDriver driver;

        switch (BrowserType)
        {
            case "Firefox":
                driver = new FirefoxDriver();
                break;
            case "IE":
                driver = new InternetExplorerDriver();
                break;
            default:
                break;
        }
        driver.Navigate().GoToUrl(HomeUrl); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T06:12:02.583

您可以使用反射来执行此操作。我认为在上面的示例代码中，您使用的是类所在的命名空间，而不是程序集的名称。这是一个松散地基于 Selenium 项目本身的单元测试所做的例程。

```
// Note that assemblyName should normally be "WebDriver". It's provided
// as an argument here just in case there's a third-party driver
// implementation for a browser not supported by the core project.
// driverClassName should be something like "OpenQA.Selenium.Firefox.FirefoxDriver"
public IWebDriver CreateDriver(string assemblyName, driverClassName)
{
    // TODO: Handle argument validation and exception handling
    // for error conditions.
    Assembly assembly = Assembly.Load(assemblyName);
    Type driverType = assembly.GetType(driverClassName);
    return (IWebDriver)Activator.CreateInstance(driverType);
} 
```

# java - 如果 Jetty 的密钥库中有多个证书，它如何选择？

> ID：10425306
> 
> 赞同：19
> 
> 时间：2012-05-03T04:50:24.320
> 
> 标签：java, ssl, certificate, jetty

我们的系统中有一些代码可以自动将自签名证书生成到密钥库中，然后由 Jetty 使用。如果给定主机的密钥已经存在，则什么也不会发生，但如果它不存在，我们会生成一个新密钥，如下所示：

```
public void generateKey(String commonName) {
    X500Name x500Name = new X500Name("CN=" + commonName);
    CertAndKeyGen keyPair = new CertAndKeyGen("DSA", "SHA1withDSA");
    keyPair.generate(1024);
    PrivateKey privateKey = keyPair.getPrivateKey();
    X509Certificate certificate = keyPair.getSelfCertificate(x500Name, 20*365*24*60*60);
    Certificate[] chain = { certificate };
    keyStore.setEntry(commonName, privateKey, "secret".toCharArray(), chain);
} 
```

只要密钥库中只有一个密钥和证书，这一切都可以正常工作。一旦你有多个密钥，当你尝试连接时就会发生奇怪的事情：

```
java.io.IOException: HTTPS hostname wrong:  should be <127.0.0.1> 
```

这是一个相当神秘的错误，但我最终设法通过编写一个连接到服务器并断言证书上的 CN 与主机名匹配的单元测试来追踪它。我发现很有趣——Jetty 似乎可以任意选择向客户展示的证书，但方式一致。

例如：

*   如果“CN=localhost”和“CN=cheese.mydomain”在密钥库中，它总是选择“CN=cheese.mydomain”。
*   如果“CN=127.0.0.1”和“CN=cheese.mydomain”在密钥库中，它总是选择“CN=cheese.mydomain”。
*   如果“CN=192.168.222.100”（cheese.mydomain）和“CN=cheese.mydomain”在密钥库中，它总是选择“CN=192.168.222.100”。

我编写了一些代码，循环遍历商店中的证书以将它们打印出来，并发现它并没有始终如一地选择第一个证书或类似的任何微不足道的东西。

那么它究竟使用了什么标准呢？最初我认为 localhost 很特别，但是第三个例子完全让我感到困惑。

我认为这是由 KeyManagerFactory 决定的，在我的例子中是 SunX509。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-03T08:53:41.277

这确实最终由`KeyManager`（通常从 a 获得`KeyManagerFactory`）决定。

一个密钥库可以有多个以不同别名存储的证书。[`certAlias`如果在 Jetty 配置中](http://wiki.eclipse.org/Jetty/Howto/Configure_SSL)没有明确配置别名，则`SunX509`实现将选择它找到的第一个别名，其中有一个私钥和一个正确类型的密钥，用于所选密码套件（通常是 RSA，但在你的情况下可能是 DSA这里）。[如果您查看Sun 提供程序](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/sun/security/ssl/X509KeyManagerImpl.java#X509KeyManagerImpl.chooseAlias%28java.util.List,java.security.Principal%5B%5D,sun.security.ssl.X509KeyManagerImpl.CheckType%29)的实现，选择逻辑还有更多内容，但您不应该真正依赖一般的顺序，而只依赖别名。

你当然可以给Jetty你自己的`SSLContext`，用你自己的[`X509KeyManager`](http://docs.oracle.com/javase/7/docs/api/javax/net/ssl/X509KeyManager.html)来选择别名。您必须实施：

```
 chooseServerAlias(String keyType, Principal[] issuers, Socket socket) 
```

不幸的是，除了`keyType`and之外`issuers`，您做出决定的只是它`socket`本身。充其量，您在那里获得的有用信息是本地 IP 地址和远程 IP 地址。

除非您的服务器在同一端口上侦听多个 IP 地址，否则您将始终获得相同的本地 IP 地址。（在这里，显然，您至少有两个：`127.0.0.1`和`192.168.222.100`，但我怀疑您对 localhost 并不真正感兴趣，除了您自己的测试。）您需要服务器端的服务器名称指示（SNI）支持才能使基于请求的主机名的决定（由支持它的客户端）。不幸的是，[SNI 仅在 Java 7 中引入，但仅在客户端](http://docs.oracle.com/javase/7/docs/technotes/guides/security/enhancements7.html)。

您将在这里面临的另一个问题是[Java 客户端会抱怨主题 DN 的 CN 中的 IP 地址](https://stackoverflow.com/a/8444863/372643)。一些浏览器会容忍这种情况，但这不符合 HTTPS 规范 (RFC 2818)。IP 地址必须是 IP 地址类型的主题备用名称条目。

# java - 在 Jboss 7.0.2 中部署一个战争文件

> ID：10425308
> 
> 赞同：3
> 
> 时间：2012-05-03T04:50:46.847
> 
> 标签：java, jboss, jboss7.x

我在 Jboss7.0.2 中部署 war 文件时遇到问题。当我第一次部署时。它工作得很好。我做了一些改动（又增加了一个端点），之后我就无法部署战争了。没有错误。但新服务没有得到部署。但是我可以使用旧服务。

我按照部署它的步骤，1.停止服务器 2.从
jboss-as-web-7.0.2/domain/servers/server-one/deployments/ 中删除war文件 3.将新的war文件复制到相同地点。4\. 启动服务器。

除此以外我还需要做什么吗？请帮我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T05:14:07.413

不要通过来回复制和粘贴 war 文件来进行部署，而是使用本机界面 (CLI) 或 http 界面 (admin-console)。部署在域模式下的工作方式不同。

我喜欢 CLI 界面来快速部署文件。在域模式下使用 CLI 进行部署的示例。

1.  确保 jboss 正在运行（执行了 domain.sh）
2.  转到 $JBOSS_HOME/bin。
3.  运行 ./jboss-admin.sh -c （或 ./jboss-cli.sh -c 如果 7.1 或更高版本）
4.  然后在 CLI 提示符下运行以下命令：

    4.1 部署：`deploy <war_file> --server-groups=server-one`

    --> 你应该看到成功/失败消息

    4.2 取消部署：`undeploy <war_file> --server-groups=server-one`

    --> 你应该看到成功/失败消息

如需进一步阅读，请参阅[此处](https://community.jboss.org/wiki/DeployAndUndeployWithTheCLI)。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T09:21:50.263

我有时会遇到这些问题，我怀疑这仅在开发中发生，因为您有时会放置不稳定的代码。我遵循的清除“坏”部署的步骤
1) 清除独立/tmp

2）清除独立/数据

3) 打开standalone.xml - 到最后清除然后重新启动Jboss。您所有的旧部署都将被清除。

此外，正如 CoolBeans 建议的那样，您可以尝试使用管理控制台或 CLI。

如果您使用 Maven 为什么不使用 Jboss 的 Cargo 插件，它将进行无缝部署，而无需您手动复制到部署 - 当然，除非您想以分解格式部署。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T10:24:40.297

如果您绑定到特定的 IP 地址（或所有 IP）而不是 localhost，那么

```
 $ JBOSS_HOME/bin/jboss-cli.sh 
```

你会看到

```
 [disconnected /] 
```

输入**连接**

您还没有准备好部署或取消部署

# javascript - Three.js 全屏问题

> ID：10425310
> 
> 赞同：27
> 
> 时间：2012-05-03T04:50:53.537
> 
> 标签：javascript, html, fullscreen, html5-canvas, three.js

我已经阅读了 Three.js API，阅读了 StackOverflow 上的问题，我已经使用 firebug 和 chrome 的调试器调试了代码，我已经尽可能地删除了所有内容，但我仍然遇到这个恼人的全屏错误，其中渲染器视口大于我的屏幕，从而导致出现滚动条。这是一个不影响渲染或其他操作的可见错误，我只是想控制视口的大小，使其与可用的屏幕空间匹配，而不会出现滚动条。

我在 Windows 7 上使用 Google Chrome 18，我刚刚开始使用 Three.js API，但我过去使用过 OpenGL 之类的东西，所以图形 API 并不陌生。

当我尝试运行此代码时（这是 github 主页上显示的默认示例）：

```
var camera, scene, renderer,
geometry, material, mesh;

init();
animate();

function init() {

    scene = new THREE.Scene();

    camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 1, 10000 );
    camera.position.z = 1000;
    scene.add( camera );

    geometry = new THREE.CubeGeometry( 200, 200, 200 );
    material = new THREE.MeshBasicMaterial( { color: 0xff0000, wireframe: true } );

    mesh = new THREE.Mesh( geometry, material );
    scene.add( mesh );

    renderer = new THREE.CanvasRenderer();
    renderer.setSize( window.innerWidth, window.innerHeight );

    document.body.appendChild( renderer.domElement );

}

function animate() {

    // note: three.js includes requestAnimationFrame shim
    requestAnimationFrame( animate );
    render();

}

function render() {

    mesh.rotation.x += 0.01;
    mesh.rotation.y += 0.02;

    renderer.render( scene, camera );

} 
```

它渲染得很好，我看到红色的线框框在旋转，但我注意到渲染器视口太大，大于我的可用屏幕尺寸，导致出现滚动条。代码使用`window.innerWidth`and`window.innerHeight`来设置渲染器的纵横比和宽度/高度，但似乎它在某处拾取了 20 到 30 个额外像素并将它们添加到页面的底部和右侧？

我尝试调整 body 元素的 CSS 以删除边距和填充，对于创建的画布元素也是如此，但没有。我已经将屏幕大小回显到页面，并制作了 JavaScript`alert()`函数来检查窗口宽度和高度，然后观察它们在运行时操作期间传递给 Three.js API，但错误仍然存​​在：画布渲染对象是将自身调整为略大于屏幕尺寸。我最接近纠正问题的是做这样的事情：

```
var val = 7;
//Trims the window size by val
function get_width(){return window.innerWidth - val;}
function get_height(){return window.innerHeight - val;}

//... Code omitted for brevity

camera = new THREE.PerspectiveCamera( 75, get_width() / get_height(), 1, 10000 );

//... Code omitted for brevity 

render.setSize(get_width(), get_height()); 
```

它可以使渲染器大小在窗口边界内，但仅限于一个点。如果我低于`val`7，例如 6 或更小，渲染器大小会弹出并再次比屏幕大 20 px（大约），导致滚动条出现？

有什么想法或想法吗？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-03-26T09:30:50.730

### 只需设置*display: block;* 在 CSS 中的 canvas 元素上

该`<canvas>`元素是根据 Mozilla 开发者网络官方**[的一个块级元素](https://developer.mozilla.org/en-US/docs/Web/HTML/Block-level_elements)**。内联元素和块元素之间的东西。他们写：

> 浏览器通常会在元素之前和之后使用换行符显示块级元素。

但是元素的渲染可能因浏览器而异，因此为了确保您获得正确的行为，最好明确设置`display: inline;`或`display: block;`在您的 CSS 中。

所以只需在你的 CSS 文件中设置它的显示值来阻止，来解决这个问题。

```
canvas {
    display: block; /* fix necessary to remove space at bottom of canvas */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T03:14:28.680

## 一、视口尺寸精度

我推荐使用Tyson Matanich 的**viewportSize.js**，因为 'window.innerWidth' 和 'window.innerHeight' 并不总是准确的。

下载：[https ://github.com/tysonmatanich/viewportSize](https://github.com/tysonmatanich/viewportSize)

演示：[http ://tysonmatanich.github.com/viewportSize/](http://tysonmatanich.github.com/viewportSize/)

以下是作者的详细解释：

“大多数人依赖 window.innerWidth、document.documentElement.clientWidth 或 $(window).width()，它们并不总是准确地报告 CSS 媒体查询中使用的视口宽度。例如，WebKit 浏览器会更改其 CSS 的大小滚动条可见时的视口，而大多数其他浏览器不可见。由于无论滚动条状态如何，window.innerWidth 都保持不变，因此它不是与 Chrome 或 Safari 一起使用的好选择。此外，Internet Explorer 6、7 和 8不支持 window.innerWidth。另一方面，document.documentElement.clientWidth 会根据滚动条状态而变化，因此对于 Internet Explorer、Firefox 或 Opera 来说不是一个好的选择。

例子 ：

```
var viewportWidth  = viewportSize.getWidth(),
    viewportHeight = viewportSize.getHeight(),
    viewportAspect = viewportWidth / viewportHeight;

camera = new THREE.PerspectiveCamera( 75, viewportAspect, 1, 10000 ); 
```

## 二、难以捉摸的元素

寻找以编程方式创建的任何元素（通过“createElement”）。他们很容易错过。

使用 Chrome 的检查器或 Firebug 来查看是否还有其他您可能遗漏的元素。我经常看到一些我完全忘记的东西，深深地埋在上周的代码中，想知道我以前是怎么错过的。

## 三、硬重置

最后，为了彻底，您可以尝试硬重置。Eric Meyer 的经典重置通常被认为是最彻底的（[http://meyerweb.com/eric/tools/css/reset/index.html](http://meyerweb.com/eric/tools/css/reset/index.html)），但我个人更喜欢“Condensed Meyer Reset”（出现在网络上）去年某个时候，作者未知）：

```
body, div, dl, dt, dd, ul, ol, li, h1, h2, h3, h4, h5, h6, 
pre, form, fieldset, input, textarea, p, blockquote, th, td { 
    padding: 0;
    margin: 0;
    }
fieldset, img { 
    border: 0;
    }
table {
    border-collapse: collapse;
    border-spacing: 0;
    }
ol, ul {
    list-style: none;
    }
address, caption, cite, code, dfn, em, strong, th, var {
    font-weight: normal;
    font-style: normal;
    }
caption, th {
    text-align: left;
    }
h1, h2, h3, h4, h5, h6 {
    font-weight: normal;
    font-size: 100%;
    }
q:before, q:after {
    content: '';
    }
abbr, acronym { 
    border: 0;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-15T14:24:46.587

在 css 中，这也应该可以解决问题：

```
canvas {
    vertical-align: top;
} 
```

自然也需要从上面的填充，边距修复

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-14T14:03:58.180

这对我来说是固定的问题。它总是会让画布全屏显示。

```
canvas {
    width: 100vw;
    height: 100vh;
    display: block;
  } 
```

# ios - 存在 tabBar 时出现奇怪的定位问题

> ID：10425311
> 
> 赞同：2
> 
> 时间：2012-05-03T04:50:54.803
> 
> 标签：ios, iphone, uiview, uitabbar, cgpoint

我们有一个带有 UIPickerView 和工具栏 (216 + 44) 的自定义视图。在初始化时 (viewDidLoad)，这个自定义视图使用以下代码被推送到屏幕下方。

```
 CGPoint newOrigin;
   newOrigin.x = pickerViewOutlet.frame.size.width/2;
   newOrigin.y = self.view.frame.size.height + ((pickerViewOutlet.frame.size.height)/2);
   NSLog(@"%f,%f",self.view.frame.size.height,(pickerViewOutlet.frame.size.height)/2);
   pickerViewOutlet.center = CGPointMake(newOrigin.x, newOrigin.y); 
```

当一个按钮被点击时，这个视图使用下面的一段代码被拉出。

```
 [self.view bringSubviewToFront:pickerViewOutlet];
   NSLog(@"tabbar %f",self.tabBarController.tabBar.frame.size.height);
   CGPoint showOrigin;
   showOrigin.x = pickerViewOutlet.frame.size.width/2;
   showOrigin.y = pickerViewOutlet.center.y - pickerViewOutlet.frame.size.height;
      //self.tabBarController.tabBar.frame.size.height ;
   NSLog(@"showpicker %f,%f",pickerViewOutlet.center.y,pickerViewOutlet.frame.size.height);
   [UIView beginAnimations:nil context:NULL];

   [UIView setAnimationBeginsFromCurrentState:YES];

   [UIView setAnimationDuration:0.5];
   pickerViewOutlet.center=CGPointMake(showOrigin.x, showOrigin.y);

   [UIView commitAnimations];
   [pickerCtrlOutlet reloadAllComponents]; 
```

这工作正常。但是，在页面上存在底部标签栏控制器的情况下，即使代码被修改为

```
showOrigin.y = pickerViewOutlet.center.y - pickerViewOutlet.frame.size.height -  self.tabBarController.tabBar.frame.size.height ; 
```

但是，如果将上面的代码修改为

```
showOrigin.y = pickerViewOutlet.center.y - pickerViewOutlet.frame.size.height -  self.tabBarController.tabBar.frame.size.height - 90; 
```

它在视图位于标签栏正上方的情况下完美运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T15:07:54.450

据我所知，在 viewDidLoad 中`self.view`还没有添加到超级视图中，因此框架没有设置为正确的大小。

例如，您可以在 InterfaceBuilder 中设计一个 UIView，它将具有 320x460。当您将它添加到超级视图时，由于底部标签栏，它实际上会变小。自动调整大小机制有助于解决这个问题。

因此，我认为您使用 viewDidLoad 中的错误值定位选择器视图，然后当您使用相对于旧位置的新位置时，它仍然是错误的。

这是我将如何写这个：

```
 [self.view bringSubviewToFront:pickerViewOutlet];
   NSLog(@"tabbar %f",self.tabBarController.tabBar.frame.size.height);
   CGPoint showOrigin;

   showOrigin.x = pickerViewOutlet.frame.size.width/2;
   //Notice this line -----------
   showOrigin.y = self.view.frame.size.height - pickerViewOutlet.frame.size.height / 2;

      //self.tabBarController.tabBar.frame.size.height ;
   NSLog(@"showpicker %f,%f",pickerViewOutlet.center.y,pickerViewOutlet.frame.size.height);
   [UIView beginAnimations:nil context:NULL];

   [UIView setAnimationBeginsFromCurrentState:YES];

   [UIView setAnimationDuration:0.5];
   pickerViewOutlet.center=CGPointMake(showOrigin.x, showOrigin.y);

   [UIView commitAnimations];
   [pickerCtrlOutlet reloadAllComponents]; 
```

注意`showOrigin.y = self.view.frame.size.height - ...`

并且（对于额外的点：）您可以将选择器视图的自动调整大小掩码设置为灵活顶部（或锁定底部坐标）。如果这样做，即使您将选取器视图放置在 viewDidLoad 中，然后 self.view 调整大小，选取器视图也会改变它的位置。

# jquery - 基于数据属性查找元素的jQuery选择器不起作用

> ID：10425317
> 
> 赞同：2
> 
> 时间：2012-05-03T04:51:13.930
> 
> 标签：jquery, html, jquery-selectors

我正在尝试创建一个 jQuery 搜索，它将找到刚刚更改数据属性的元素。搜索不起作用。这是 Javascript（从 CoffeeScript 编译）：

```
new_temp_value = "" + (Math.round((new Date()).getTime() / 1000));
console.log("new_temp_value is " + new_temp_value);
$activity_div.data('temp', new_temp_value);
console.log('value of data-temp in $activity_div is now');
console.log($activity_div.data('temp'));
console.log($activity_div.hasClass('activity_div'));
console.log($(".activity_div[data-temp='" + new_temp_value + "']")); 
```

输出

```
new_temp_value is 1336020404
value of data-temp in $activity_div is now
1336020404
true
[] 
```

出了什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T05:01:14.920

您的意思是使用`.data('temp', '')`or`.attr('data-temp', '')`吗？这是两个不同的东西。试试后者，它会起作用的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T05:04:48.603

使用`.attr()` 而不是更新`.data()` 。 `.data()`目前还没有更新 DOM。

```
new_temp_value = "" + (Math.round((new Date()).getTime() / 1000));
console.log("new_temp_value is " + new_temp_value);
$activity_div.attr('data-temp', new_temp_value);
console.log('value of data-temp in $activity_div is now');
console.log($activity_div.data('temp'));
console.log($(".activity_div[data-temp='" + new_temp_value + "']")); 
```

# database - 曲奇饼。如何计算每个页面访问不重复？

> ID：10425323
> 
> 赞同：1
> 
> 时间：2012-05-03T04:52:33.730
> 
> 标签：database, cookies, count

我的页面 URL 包含 3 个变量：id=N、num=N 和 item=N；N = 1, 100。它们是整数，并给出了 URL 的示例：

```
page.php?id=1&num=24&item=12 
```

我想计算没有重复的访问。我认为它应该如何工作：

如果 cookie 存在，则不要向数据库添加新值，否则在数据库中设置 cookie 和增量值。

我使用了一个 $_COOKIE[''] 数组来识别是否访问了页面：

```
$_COOKIE['product[id]'] = $_GET['id'];
$_COOKIE['product[num]'] = $_GET['num'];
$_COOKIE['product[item]'] = $_GET['item']; 
```

当路径不同时出现问题：

```
page.php?id=1&num=24&item=12&page=0#topView 
```

每次一个人访问该页面时，我都无法查询数据库，这是因为有 1000 次以上的唯一访问。

我的问题是：我如何计算每个页面访问的 mod 唯一性？

笔记：

```
page.php?id=1&num=24&item=12 
```

或者

```
page.php?id=1&num=24&item=15 
```

或者

```
page.php?id=2&num=24&item=12 
```

这些链接为我提供了独特的产品信息，具体取决于变量。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T16:11:44.557

由于我的评论是您问题的解决方案，因此我将其转换为 aswer。

“我无法每次有人访问该页面时都查询数据库，这是因为有 1000 多个唯一访问。” - 我怀疑你可以。在我看来 - 你应该。统计所有页面访问次数，当您想要获取最终结果时，按 ip、id、num、item 进行分组。将所有数据放入数据库还可以让您简要了解最受欢迎的页面。更进一步，您将能够查看一个唯一用户更多次访问哪些页面并找出原因。数据越多越好。它不会占用您的数据库太多。

你最终决定的算法有一个错误。想象一下 id 是 11，num 是 5，item 是 7。另一个 id = 1，num = 15，item = 7。希望你明白我的意思。:P 这样说

```
md5($_GET['id'].'-'.$_GET['num'].'-'.$_GET['item']); 
```

所以它真的很独特。

# javascript - javascript 转换器价格未定义

> ID：10425325
> 
> 赞同：1
> 
> 时间：2012-05-03T04:53:11.070
> 
> 标签：javascript, converter

我无法完成这个 javascript 来转换咖啡价格..

```
<html>
<head>
<title>Coffee House</title>
</head>
<body>
<script type="text/javascript">
var drink, ounces, price;
prompt ( "Enter the drink type: espresso, latte, cappuccino, americano" );
prompt ( "Enter the oz: 8, 12, 16" )
var shots = prompt ( "Enter the number of shots" )
if ( drink == "espresso")
price = 1.40;
if (( drink == "latte") || (drink == "cappuccino" ))
{
if ( ounce == 8 )
price = 1.95;
else if ( ounce == 12 )
price = 2.35;
else if ( ounce == 16 )
price = 2.75;
}
if ( drink == "americano" )
price = 1.20 + ( ( (ounce -8)/8 ) * .30 );
price = price + ( (shots) * .50 );
price = "price" * 1.055;
price = Math.round( price * 100 )/100;
alert( "Your " + ounce + "oz. " + drink + "with " + shots + "shots of espresso costs: $ " +price );
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T05:06:00.863

这是删除所有错误后的 JavaScript：

```
var drink, ounces, price;
drink = prompt("Enter the drink type: espresso, latte, cappuccino, americano");
ounces = parseInt(prompt("Enter the oz: 8, 12, 16"));
var shots = parseFloat(prompt("Enter the number of shots"));
if (drink === "espresso") price = 1.40;
if ((drink === "latte") || (drink === "cappuccino")) {
  if (ounces === 8) price = 1.95;
  else if (ounces === 12) price = 2.35;
  else if (ounces === 16) price = 2.75;
}
if (drink === "americano") price = 1.20 + ((ounces - 8) / 8) * 0.30;
price = price + shots * 0.50;
price = price * 1.055;
price = Math.round(price * 100) / 100;
alert("Your " + ounces + "oz. " + drink + "with " + shots + "shots of espresso costs: $ " + price); 
```

# c++ - MySQL Segfault，间歇性

> ID：10425326
> 
> 赞同：1
> 
> 时间：2012-05-03T04:53:20.730
> 
> 标签：c++, mysql, segmentation-fault

我正在尝试对 MySQL 5.5 db 执行一系列检查/插入操作，但我经常遇到 SIGSEGV 错误的间歇性问题。在执行许多查询的过程中，`SELECT`语句运行得很好。但是，在执行了一些可变的时间或数量的查询（有时是数千次检查，有时是 1 或 2 次，有时根本没有并且程序正常退出）之后，我莫名其妙地得到了一个段错误......

```
Program received signal SIGSEGV, Segmentation fault.
0x100188a8 in mysql_send_query () from K:\Programming\C\Test\libmysql.dll
(gdb) bt full
#0  0x100188a8 in mysql_send_query () from K:\Programming\C\Test\libmysql.dll
No symbol table info available.
#1  0x100188e5 in mysql_real_query () from K:\Programming\C\Test\libmysql.dll
No symbol table info available.
#2  0x00000000 in ?? ()
No symbol table info available.
(gdb) 
```

这是来自我大大减少的代码：

```
int main() {

    for (int i = 0; i < 5000; i++) {
        int iNewX = GenerateRandomInt(1, 50);
        int iNewY = GenerateRandomInt(1, 50);
        std::string str = "SELECT * FROM Resources WHERE XPOS = ";
        str = str + 
            StatToString(iNewX) + " AND YPOS = " + 
            StatToString(iNewY) + ";";

        const char * Query = str.c_str();

        MYSQL *connect;
        connect=mysql_init(NULL);
        connect=mysql_real_connect(connect,SERVER,USER,PASSWORD,DATABASE,0,NULL,0);
            // Print SQL statment for debugging only...
            // This appears to always be good, even in the case of the segfault.
        std::cout << Query << std::endl; 
        if (mysql_query(connect, Query)) {
                // Supposed to log an error; I don't get this far...
                // This does work when I intentionally break the statement.
                            std::cout << printf("Failed to SELECT, Error: %s", mysql_error(connect));
                std::cout << printf("Query: %s", Query) << std::endl;
                mysql_close(connect);
            return 0;
        }
        mysql_close(connect);

    }

    return 1;

} 
```

我在网上搜索一个与我在这里所做的事情真正匹配的案例没有成功（尽管有很多 MySQL/segfault 相关的论坛/Q+A 主题/线程）。由于这似乎发生在 .dll 本身中，我该如何解决这个问题？

谁能解释为什么这个问题似乎来来去去？

我还没有尝试重新安装 MySQL，因为这可能是我宁愿避免的一个非常头痛的问题。如果我必须，那么我必须。

如果我在我的问题或任何相关代码中遗漏了任何细节，请告诉我，我会添加。

* * *

在遵循[Christian.K 的](https://stackoverflow.com/users/21567/christian-k)`mysql_error(connect)`建议后，我可以看到这是错误 23（由`connect=mysql_init(NULL)`.

这让我找到了一些资源，最明显的是[这个](http://dev.mysql.com/doc/refman/5.0/en/limits-windows.html)。这表示在 Windows 中工作时这是一个已知问题，对此我无能为力。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T05:56:15.087

您可以通过不为每个循环迭代打开一个连接（这无论如何都是有问题的）来绕过打开文件限制（错误 23），而是为所有循环迭代使用一个连接。

再加上我对错误处理的评论，以及奇怪的`cout << printf`用途，你最终会得到这样的结果：

```
int main() {

    MYSQL *connect;
    connect=mysql_init(NULL);

    if (connect == NULL)
    {
       printf("Insufficient memory to initialize.\n");
       return 1;
    }

    connect=mysql_real_connect(connect,SERVER,USER,PASSWORD,DATABASE,0,NULL,0);

    if (connect == NULL)
    {
       printf("Could not connect: %s\n", mysql_error(connect);
       return 1;
    }

    for (int i = 0; i < 5000; i++) {
        int iNewX = GenerateRandomInt(1, 50);
        int iNewY = GenerateRandomInt(1, 50);
        std::string str = "SELECT * FROM Resources WHERE XPOS = ";
        str = str + 
            StatToString(iNewX) + " AND YPOS = " + 
            StatToString(iNewY) + ";";

        const char * Query = str.c_str();

        if (mysql_query(connect, Query)) {
            // Supposed to log an error; I don't get this far...
            // This does work when I intentionally break the statement.
            printf("Failed to SELECT, Error: %s", mysql_error(connect));
            printf("Query: %s", Query);
            mysql_close(connect);

            return 1;
        }
    }

    mysql_close(connect);
    return 0;
} 
```

请注意，我还更改了返回值。按照惯例`main()`应该返回`0`成功和其他东西（主要是`1`），否则。

# ruby-on-rails - 在该值更改但未保存后，如何返回模型对象的实际值？

> ID：10425327
> 
> 赞同：1
> 
> 时间：2012-05-03T04:53:35.223
> 
> 标签：ruby-on-rails, ruby-on-rails-3

例如，我更改了 Post 对象的值，但它没有通过验证：

```
my_post = Post.last
my_post.name
# => "foobar"

my_post.name = "something wrong"
my_post.save
# => (0.1ms)  begin transaction
# => (0.0ms)  rollback transaction
# => false
my_post.name
# => "something wrong" 
```

实际值仍然是“foobar”，但我现在如何在不创建新对象的情况下返回它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T05:07:02.780

[`changes`](http://api.rubyonrails.org/classes/ActiveModel/Dirty.html#method-i-changes)返回对模型对象所做更改的哈希：

```
my_post.changes["name"][0]  #=> "foobar" 
```

这也可以通过动态生成的方法访问：

```
my_post.name_change[0] 
```

在你的情况下你应该做

```
my_post.name = my_post.name_was unless my_post.save 
```

有关这方面的更多信息，请参阅[`ActiveModel::Dirty`](http://api.rubyonrails.org/classes/ActiveModel/Dirty.html).

# php - 我可以通过 HTTP 请求参数授予对我的 AS3 存储桶上的文件的权限吗？

> ID：10425328
> 
> 赞同：2
> 
> 时间：2012-05-03T04:53:43.167
> 
> 标签：php, amazon-web-services, amazon-s3

我在**AS3**中有一个包含文件的存储桶。我可以访问**PHP API**和可以根据命令向 Amazon 发送请求的服务器。

我想要做的是使用`HTTP GET/POST`请求授予对我存储桶中文件的访问权限。据我了解使用此功能：

```
get_object_url ( $bucket, $filename, $preauth, $opt ) 
```

`$preauth`我可以在给定的 URL 上让文件在一段时间内公开访问。我不想这样做，我希望文件可以在具有所需**POST**或**GET**凭据的 URL 上私下使用（决定谁可以访问该文件将基于包含应用程序“用户”及其权限的数据库）。**我了解在非 HTTPS**连接上通过**GET**或**POST**传递任何类型的凭据的安全隐患。

 **这可能吗？我可以在交易范围内将文件从**AS3**下载到我的服务器，然后在我自己的机器上执行所有控件，但这是一个昂贵的解决方案（两个文件下载而不是一个，而我的服务器不应该这样做）下载）到一个看似简单的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T13:33:32.467

**最简洁的答案是不。**

您可以查看[Amazon IAM](http://aws.amazon.com/iam/)以了解更多保护内容的方法，尤其是与[Cloudfront](http://aws.amazon.com/cloudfront/)结合使用，但本质上无法通过传递用户名和密码来提供对内容的访问。

当然，如果您已经在您的网站上对用户进行身份验证，那么您只能将签名的 url 提供给这些用户。该 url 只需在用户启动下载时有效，而不是在整个下载期间有效。

此外，如果您打算将您的服务器用作 S3 和用户之间的代理，您将首先消除使用 S3 的许多好处。但是您可以使用 EC2 作为服务器来消除您提到的额外费用 - S3 和 EC2 之间的传输是免费的。**

# java - 编辑文件而不遍历整个字节缓冲区？

> ID：10425329
> 
> 赞同：2
> 
> 时间：2012-05-03T04:53:44.270
> 
> 标签：java, android, file, file-io

我想在一个大小为 100MB 的文件中用另一个字节数组“覆盖”或“切换”一些字节（比如文件中的前 2048 个字节）。
我不想阅读整个文件，因为我需要花费大量时间来阅读整个文件。

到目前为止我已经尝试过：

```
FileOutputStream out = new FileOutputStream(file);

out.getChannel().write(buffer, position); 
```

新的缓冲区数组大小相同。

我正在使用需要这样做的 java + eclipse Android 应用程序进行开发。
如果有人可以为我写一段代码来完成这项工作，我会很高兴。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T05:13:00.257

这会用数组的内容*覆盖*文件的前 2048 个字节。`data`

```
final RandomAccessFile file = new RandomAccessFile(filename, "rw");
final FileChannel channel = file.getChannel();
final byte[] data = new byte[2048];          // lets say it's got the data you want
final ByteBuffer buff = ByteBuffer.wrap(data);

channel.position(0);                         // (we were already here, but as an example)
channel.write(buff);                         // writes the entire 2028 bytes from buff
channel.force(false);                        // (superfluous if you close() afterwards)
channel.close();                             // close the file descriptor 
```

# c# - 如何从 C++ tesseract 库创建 C# 包装类？

> ID：10425332
> 
> 赞同：0
> 
> 时间：2012-05-03T04:53:56.017
> 
> 标签：c#, c++, wrapper, dllimport, tesseract

请指导我如何创建 C# 包装器以访问 C++ 中的 tesseract 库的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T05:19:51.700

[这](http://www.codeproject.com/Articles/14180/Using-Unmanaged-C-Libraries-DLLs-in-NET-Applicatio)是一篇关于 CodeProject 的好文章，您可以关注。

> 在选择重用非托管库的方法时，通常有三个选项：
> 
> 1.  **IJW**或它只是工作。这是 .NET Framework 为开发人员提供的最大功能之一。您只需在新的 .NET 平台上重新编译旧代码。不需要或只需要很少的改变。不过不要忘记；它仅适用于 C++ 语言。
> 2.  **通讯**。COM 模型适用于非托管和托管环境。在 .NET 上执行 COM 调用很简单。但是，如果您的非托管类不是 COM 就绪的，您可能不会重写所有旧代码来支持 COM。
> 3.  **P/Invoke**或平台调用。此机制允许您在属性级别将类作为函数导入。基本上，您将类方法作为单独的函数一一导入，就像使用 Win32 API 一样。

对于您的情况，我会建议[PlaPlatform Invocation Services (PInvoke)](http://msdn.microsoft.com/en-us/library/aa288468%28v=vs.71%29.aspx)。它`allows managed code to call unmanaged functions that are implemented in a DLL`。例如看看这个 MSDN 代码

```
// PInvokeTest.cs
using System;
using System.Runtime.InteropServices;

class PlatformInvokeTest
{
    [DllImport("msvcrt.dll")]
    public static extern int puts(string c);
    [DllImport("msvcrt.dll")]
    internal static extern int _flushall();

    public static void Main() 
    {
        puts("Test");
        _flushall();
    }
} 
```

还有一篇较早的帖子与此相关，您可以[在此处查看](https://stackoverflow.com/questions/749520/how-to-write-my-own-wrapper-in-c)。

# asp.net - 使用 ModalPopupextender 作为弹出窗口打开时调整 iframe 高度的问题

> ID：10425338
> 
> 赞同：2
> 
> 时间：2012-05-03T04:55:11.747
> 
> 标签：asp.net, iframe, height, modalpopupextender

我正在使用 ModalPopupextender Ajax 控件在模态弹出窗口中打开 aspx 页面。aspx 页面在 iframe 中打开，如下面的代码所示。在 iframe 中加载的内容是动态的，因此我无法为 iframe 提供固定高度。我希望每次打开弹出窗口时我都应该能够根据内容调整高度。我有一个调整 iframe 高度大小的功能，我在我的其他页面上成功使用了该功能，其中 iframe 在窗口本身中填充，但在弹出窗口中打开 iframe 时无法调整高度。我已经尝试过window onload、iframe onload 事件，但都没有成功。

```
 <asp:ModalPopupExtender ID="ModalPopupExtender2" BackgroundCssClass="transparentBG"
        runat="server" CancelControlID="ButtonCancel" OkControlID="ButtonDone" 
        TargetControlID="btnAddNew" PopupControlID="DivAddWindow" Drag="true"  >
     </asp:ModalPopupExtender>
     <div class="popup_Buttons" style="display: none">
      <input id="ButtonDone" value="Done" type="button" />
      <input id="ButtonCancel" value="Cancel" type="button" />
     </div>
     <div id="DivAddWindow" style="display: none;">

     <iframe id="IframeEdit" scrolling="no" src="MasterPage.aspx"  width="700px">
    </iframe>
   </div> 
```

如果有人能引导我解决这个问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T06:05:15.950

试试这个：

```
 <iframe id="IframeEdit" onload="iframeLoaded()" scrolling="yes" src="MasterPage.aspx"  width="700px">
</iframe> 
```

以下 javascript 函数将从 iframe 内容中获取高度。

```
<script type="text/javascript">
function iframeLoaded() {
    var iFrameID = document.getElementById('IframeEdit');

    if (iFrameID) {
        iFrameID.height = "";
        iFrameID.height = iFrameID.contentWindow.document.body.scrollHeight + "px";
    }
}
</script> 
```

我什至在 ModalPopupextender 中检查过它，它可以工作。

# android - 文件上传Android定义路径

> ID：10425339
> 
> 赞同：0
> 
> 时间：2012-05-03T04:55:13.287
> 
> 标签：android, upload, path

我正在尝试将文件上传到网络服务器。但我有文件未找到异常。我认为错误来自我定义的路径。我的路径是 Sd card/Android/data/ic_launcher.png

任何人都可以帮助我正确地给出路径。请各位....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T04:59:12.713

尝试这个。

```
 File file = new File(Environment.getExternalStorageDirectory(), "Android/data/ic_launcher.png"); 
```

在清单文件中添加此权限。

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T05:14:02.230

```
String SD_Card_Path = Environment.getExternalStorageDirectory().toString();

String Complete_Path =  SD_Card_Path  + "/Android/data/ic_launcher.png"; 
```

这是在您的 AndroidMenifest 中添加外部存储读/写权限的测试代码，您的代码将运行。

# java - 如何存储文件结构类型的数据以便于检索和插入

> ID：10425340
> 
> 赞同：2
> 
> 时间：2012-05-03T04:55:14.160
> 
> 标签：java, data-structures, tree

我想以分层格式存储数据，例如 /a/b/c。

插入操作是

insert /a/b/c/d1 20（其中 20 是 d1 的大小） insert /a/b/c/d2 30（其中 30 是 d2 的大小） insert /a/b/c 50（其中 50 是c 本身）插入 /a/b/x 40（其中 40 是 x 的大小）

检索操作是

获取 /a/b/c 的大小应返回 100 (20+30+50)。获取 /a/b 的大小应返回 140（所有子项的大小为 20+30+50+40）

如果能用java实现就更好了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T07:16:38.870

您可以使用 HashMap，如下所示：

```
public class Test {
    public static void main(String... args) {
        HashMap<String, Integer> map = new HashMap<String, Integer>();
        put(map, "/a/b/c/d1", 20);
        put(map, "/a/b/c/d2", 30);
        put(map, "/a/b/c", 50);
        put(map, "/a/b/x", 40);
        System.out.println("/a/b/c: " + map.get("/a/b/c"));
        System.out.println("/a/b: " + map.get("/a/b"));
    }
    static void put(HashMap<String, Integer> map, String path, int value) {
        String p = "";
        for(String e : path.split("/")) {
            if (e.length() > 0) {
                p += "/" + e;
                Integer old = map.get(p);
                map.put(p, (old == null ? 0 : old) + value);
            }
        }
    }
} 
```

# list - 在 Mturk workersandbox 中获取请求者的所有 hitid

> ID：10425341
> 
> 赞同：2
> 
> 时间：2012-05-03T04:55:13.850
> 
> 标签：list, mechanicalturk

我想列出**Mturk Worker sandbox**中创建的 HIT 的所有 HITId 。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T11:40:54.133

在 API 上，您可以使用`SearchHITs`操作来检索所有 HIT 的 HITId。

# database - oracle数据库发生了奇怪的事情

> ID：10425343
> 
> 赞同：-3
> 
> 时间：2012-05-03T04:55:41.680
> 
> 标签：database, oracle

我使用 Oracle 数据库超过半年。今天有一行数据无法更新。我什至没有从 SQL 开发人员那里得到任何错误或任何东西。当我尝试更新时，总是更新一行，我确实提交了。

但是当我尝试查询时，我又得到了旧值。只有这一项有这个问题。

谁能给我一些建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T05:07:32.060

我的猜测是桌子上有一个重置值的触发器。如果不查看您的 DML 语句和表结构，就无法全面回答这个问题。

要确定您是否在桌子上有触发器：

```
SELECT trigger_name 
FROM all_triggers 
WHERE table_name = '<whatever>'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T09:19:14.667

您的代码库有问题。我们没有办法诊断它，因为我们是坏人。不传送

所以你需要调试它。SQL Developer 拥有可以帮助您解决此问题的工具。 [了解更多](http://st-curriculum.oracle.com/obe/db/11g/r2/prod/appdev/sqldev/plsql_debug/plsql_debug_otn.htm)。

如果您不了解自己的应用程序是如何工作的，我建议您从[分析代码](http://www.oracle.com/technetwork/developer-tools/sql-developer/viewlets-082331.html "支持 Database 11g Hierarchical Profiler")开始。这将告诉您运行更新时触发的所有程序。我同意关于触发器的建议，但这只是一个猜测。

# iphone - CNMarkPortalOnline 返回 NG

> ID：10425345
> 
> 赞同：0
> 
> 时间：2012-05-03T04:56:03.150
> 
> 标签：iphone, captivenetwork

我尝试使用 CaptiveNetwork 来替换用于网络用户身份验证的网页表。并在我的应用程序的 AppDelegate 中成功注册了 CNSetSupportedSSIDs 的公共热点。但是，在我的应用程序中进行用户身份验证后，CNMarkPortalOnline 返回 NG。

有谁知道如何做到这一点？提前非常感谢。

下面是我的源代码：

```
NSArray *ifs = (__bridge_transfer id)CNCopySupportedInterfaces(); 
NSLog(@"ifs: %@", [ifs objectAtIndex:0]);
CNMarkPortalOnline((__bridge_retained CFStringRef)[ifs objectAtIndex:0]); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T06:21:38.287

CNSetSupportedSSID 的代码是什么？我附近有一家咖啡吧。我也遇到了不方便，正在寻找解决方案。

# c++ - 从数组中删除对象

> ID：10425354
> 
> 赞同：1
> 
> 时间：2012-05-03T04:57:30.573
> 
> 标签：c++, arrays, destructor

我正在创建一个使用声明的对象数组的程序

```
Element * elements = new Element[number]; 
```

其中一个元素是一个`class`具有/需要自己的析构函数的元素。

当我去删除它时，我会只使用数组删除，并且让程序担心调用析构函数：

```
delete [] elements; 
```

或者我是否使用关键字 delete 显式调用每个项目的析构函数：

```
for(int ii = 0; ii< ArraySize; ii++)
    delete elements[ii];
delete [] elements; 
```

注意：我知道我可能会使用类似的东西`boost::ptr_vector`，但我想要类似于`hashTable`功能（所以 for 循环需要额外的信息，但这超出了这个问题的直接范围），这就是我使用传统数组的原因。我仍然想知道需要哪种行为来避免内存泄漏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T05:01:53.973

第一个。你应该

```
delete [] elements; 
```

第二个是不正确的，如果你尝试编译它应该会给你错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T05:06:43.903

是的，`delete [] elements;`应该足够了。

您将使用第二段代码，例如：

```
Element **elements;

elements = new Element *[rows];
for (int i=0; i<rows; i++)
    elements[i] = new Element; 
```

不过，这种组合很少有多大意义。至少从某种意义上说，每一行本身也是一个动态分配的数组：

```
elements = new Element *[rows];
for (int i=0; i<rows; i++)
    elements[i] = new Element[row_len]; 
```

在这种情况下，您的删除将类似于：

```
for (int i=0; i<rows; i++)
    delete [] elements[i];
delete [] elements; 
```

但是，正如您现在所做的那样，您所说的任何内容都不能真正证明家庭滚动的动态分配是合理的。`std::vector<Element> elements(number);`会很好地工作。

# vim - 如何在vim中删除文件中多次出现的特定行

> ID：10425357
> 
> 赞同：3
> 
> 时间：2012-05-03T04:57:49.773
> 
> 标签：vim, filtering

我想删除一行: `This is an example`，它在一个文件中出现多次。我该怎么做。

谢谢，艾丽莎

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-03T05:03:24.337

你可以这样做：

```
:g/This is an example/d 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T13:57:18.063

如果要删除**仅**包含完全匹配的行，您可以：

```
:g/^This is an example$/d 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-03T05:03:51.553

```
:%s/This is an example\n//gc

% indicates all lines of a file
s indicates pattern to be searched.
g for global replacement
c for confirmation on each replace 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-03T05:02:08.117

您可以使用外部命令执行此操作：

```
:%!grep -v "This is an example" 
```

这将通过给定的命令过滤整个文件。该`grep -v`命令选择文件中与给定正则表达式*不匹配的所有行。*

# android - onClick 未在 Scrollview 中的按钮上执行？

> ID：10425361
> 
> 赞同：0
> 
> 时间：2012-05-03T04:58:10.387
> 
> 标签：android, button, scrollview

我制作了一个由 6 个水平线性布局组成的垂直线性布局。每个水平布局在滚动视图上包含 10 多个按钮。下面是主要的线性布局，其中包括一种水平布局。

```
 <LinearLayout android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:padding="10dp" 
android:gravity="center"
xmlns:android="http://schemas.android.com/apk/res/android">
<HorizontalScrollView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">
<LinearLayout
    android:orientation="horizontal"
    android:layout_width="wrap_content"
    android:layout_height="75dp">

        <Button 
            android:id="@+id/button1"
            android:layout_width="75dp"
            android:layout_height="75dp"
            android:background="@drawable/button1"/>

        <Button
            android:id="@+id/button2"
            android:layout_width="75dp"
            android:layout_height="75dp"
            android:background="@drawable/button2"/>

        <Button
            android:id="@+id/button3"
            android:layout_width="75dp"
            android:layout_height="75dp"
            android:background="@drawable/button3"
            android:text="" />

        <Button
            android:id="@+id/button4"
            android:layout_width="75dp"
            android:layout_height="75dp"
            android:background="@drawable/button4"
            android:text="" />

        <Button
            android:id="@+id/button5"
            android:layout_width="75dp"
            android:layout_height="75dp"
            android:background="@drawable/button5"
            android:text="" />

        <Button
            android:id="@+id/button6"
            android:layout_width="75dp"
            android:layout_height="75dp"
            android:background="@drawable/button6"
            android:text="" />

        <Button
            android:id="@+id/button7"
            android:layout_width="75dp"
            android:layout_height="75dp"
            android:background="@drawable/button7"
            android:text="" />

        <Button
            android:id="@+id/button8"
            android:layout_width="75dp"
            android:layout_height="75dp"
            android:background="@drawable/button8"
            android:text=""
            android:textSize="" />

        <Button
            android:id="@+id/button9"
            android:layout_width="75dp"
            android:layout_height="75dp"
            android:background="@drawable/button9"
            android:text="" />

        <Button
            android:id="@+id/bCaitlyn"
            android:layout_width="75dp"
            android:layout_height="75dp"
            android:background="@drawable/caitlynsplash"
            android:text="" />

        <Button
            android:id="@+id/button10"
            android:layout_width="75dp"
            android:layout_height="75dp"
            android:background="@drawable/button10"
            android:text=""
            android:textSize="10.5dp" />

        <Button
            android:id="@+id/button11"
            android:layout_width="75dp"
            android:layout_height="75dp"
            android:background="@drawable/button11"
            android:text=""
            android:textSize="11dp" />

        <Button
            android:id="@+id/button12"
            android:layout_width="75dp"
            android:layout_height="75dp"
            android:background="@drawable/button12"
            android:text="" />

        <Button
            android:id="@+id/button13"
            android:layout_width="75dp"
            android:layout_height="75dp"
            android:background="@drawable/button13"
            android:text=""
            android:textSize="11dp" />
        </LinearLayout>
        </HorizontalScrollView> 
```

按下时未执行 onClick 命令似乎存在问题。该按钮正在识别触摸（因为它会改变颜色）但似乎没有任何反应。

```
 package com.LeagueProject;

    import android.app.Activity;
    import android.content.Intent;
    import android.os.Bundle;
    import android.view.View;
    import android.widget.Button;

    public class Project extends Activity implements View.OnClickListener{

Button Button1, Button2, Button3, Button4, Button5, Button6, Button7, Button8,
    Button9, Button10, Button11, Button12, Button13;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    projectbuttons();   
    Button1.setOnClickListener(this);
    Button2.setOnClickListener(this);
    Button3.setOnClickListener(this);

}

// Assigned Buttons
private void projectbuttons() {

    Button1 = (Button) findViewById(R.id.button1);
    Button2 = (Button) findViewById(R.id.button2);
    Button3 = (Button) findViewById(R.id.button3);
    Button4 = (Button) findViewById(R.id.button4);
    Button5 = (Button) findViewById(R.id.button5);
    Button6 = (Button) findViewById(R.id.button6);
    Button7 = (Button) findViewById(R.id.button7);
    Button8 = (Button) findViewById(R.id.button8);
    Button9 = (Button) findViewById(R.id.button9);
    Button10 = (Button) findViewById(R.id.button10);
    Button11 = (Button) findViewById(R.id.button11);
    Button12 = (Button) findViewById(R.id.button12);
    Button13 = (Button) findViewById(R.id.button13);

}

public void onClick(View v) {
    int id = v.getId();
    switch (id) {
        case R.id.button1:
        setContentView(R.layout.screen1);
            break;

        case R.id.button2:
        setContentView(R.layout.screen2);
            break;

        case R.id.button3:
        setContentView(R.layout.screen3);
            break;

    }

}
    } 
```

任何见解以及提示/技术都非常受欢迎。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T05:10:08.770

当您`implements View.OnClickListener`在活动中时，您必须覆盖该`onClick()`方法，否则它永远不会执行..

```
@Override
public void onClick(View v) {
  .
  .
  .
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T05:13:33.280

我使用默认按钮尝试了您的代码，但没有为按钮提供任何图像，它工作正常......它进入相应的布局......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T05:03:57.287

我不确定这是否是您需要的，但您可以在布局文件本身中定义 onClick() 方法。

```
<Button 
        android:id="@+id/button1"
        android:layout_width="75dp"
        android:layout_height="75dp"
        android:background="@drawable/button1" 
        android:onClick="onClick"
/> 
```

你能试试这个吗？

# solr - 查看单个文档中单个字段的原始 Solr 标记

> ID：10425371
> 
> 赞同：6
> 
> 时间：2012-05-03T04:59:28.133
> 
> 标签：solr, sunspot, sunspot-rails, sunspot-solr

我正在调试我的 Solr 架构，我想查看标记特定字段的结果。

举个简单的例子，如果我有：

```
<fieldType name="text" class="solr.TextField" omitNorms="false">
    <analyzer>
        <tokenizer class="solr.StandardTokenizerFactory"/>
        <filter class="solr.StandardFilterFactory"/>
        <filter class="solr.LowerCaseFilterFactory"/>
        <filter class="solr.PorterStemFilterFactory"/>
        <filter class="solr.EdgeNGramFilterFactory" minGramSize="2" maxGramSize="15" side="front"/>
    </analyzer>
</fieldType> 
```

我用 value 索引了一个字段`"Hello, worlds!"`，我想看到以下内容：

`hello world he el ll lo hel ell llo hell ello hello wo or rl ld wor orl rld worl orld`

以确保一切都按照我的设想进行标记。

这有可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T08:41:10.863

是的，Admin > Analysis 正是您想要的。

但是还有另一个很棒的工具可以让您读取索引并查看字段或文档是如何被索引的。

它被称为[Luke](http://code.google.com/p/luke/)，它在故障排除和调整架构时非常有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T07:57:56.263

是的，使用 Solr 管理部分中的分析页面：[here](http://localhost:8983/solr/admin/analysis.jsp?highlight=on) 它正是这个目的

# java - “不支持的 javax.xml.parser.transform.Result 参数”导致 JAXB 编组失败

> ID：10425376
> 
> 赞同：0
> 
> 时间：2012-05-03T05:00:38.420
> 
> 标签：java, jaxb, spring-oxm

我正在使用 Spring 3.1.1 和他们的 OXM 东西，使用 RestTemplate 将请求发布到另一台服务器。我正在使用一个名为 ClassTermCollection 的类作为它的请求和响应端，并且它使用 @XmlRootElement 等进行了注释，并且一直到今天都可以正常工作。但是，当 JAXB 尝试创建请求时，突然出现以下错误（即，在对服务器进行 http 调用之前，在客户端引发了此错误）。

谷歌几乎没有透露任何关于这个特定错误的有用信息，而且 - 更糟糕的是 - Sun 显然没有将源代码发送到抛出异常的类，使用 JDK ......所以我什至无法一直调试对此的根源，以准确确定正在发生的事情。

编辑：（参见stacktrace下面的附加评论）

> [错误] org.springframework.http.converter.HttpMessageNotWritableException：无法写入 [pmt.model.collections.ClassTermCollection@6576fac]；嵌套异常是 org.springframework.oxm.MarshallingFailureException: JAXB 编组异常；嵌套异常是 javax.xml.bind.MarshalException: org.springframework.http.converter.xml.MarshallingHttpMessageConverter.writeToResult(MarshallingHttpMessageConverter.java:134) [ERROR] at unsupported javax.xml.parser.transform.Result parameter [ERROR] at org.springframework.http.converter.xml.AbstractXmlHttpMessageConverter.writeInternal(AbstractXmlHttpMessageConverter.java:66) [错误] 在 org.springframework.http.converter.AbstractHttpMessageConverter.write(AbstractHttpMessageConverter.java:179) [错误] 在 org.springframework。网络客户端。HttpConnection.handleRequest(HttpConnection.java:505) [错误] 在 org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:843) [错误] 在 org.mortbay.jetty.HttpParser.parseNext(HttpParser.java: 647）[错误]在org.mortbay.jetty.HttpParser.parseAvailable（HttpParser.java:205）[错误]在org.mortbay.jetty.HttpConnection.handle（HttpConnection.java:380）[错误]在org.mortbay。 io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:395) [ERROR] at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:488) [ERROR] 原因：org.springframework.oxm.MarshallingFailureException： JAXB 编组异常；嵌套异常是 javax.xml.bind.MarshalException: org.springframework.oxm.jaxb 中不支持的 javax.xml.parser.transform.Result 参数 [ERROR]。

好的，在网上找到了 com.sun.xml.internal.bind.v2.runtime.MarshallerImpl 的源代码[1](http://www.docjar.com/docs/api/com/sun/xml/internal/bind/v2/runtime/MarshallerImpl.html)，现在我看到（有点）发生了什么。该代码查看 Result 实例，如果它是 StreamResult（在我的情况下），它会尝试取消引用 StreamResult 的 outputstream、writer 和 systemId 字段，并使用这些值来构造 Writer。如果它们都为空，它会落入方法的底部并抛出“不支持的格式”异常，这就是发生在这里。

在此之上，在 Spring org.springframework.http.converter.xml.AbstractXmlHttpMessageConverter 类中，我们到达构造 StreamResult 的这一行，将 outputMessage.getBody() 的结果传递给 StreamResult 构造函数。我在这里得到空值，因此问题从下面冒出来。

> @Override protected final void writeInternal(T t, HttpOutputMessage outputMessage) throws IOException { writeToResult(t, outputMessage.getHeaders(), new StreamResult(outputMessage.getBody())); }

* * *

### 解决了

得到这个工作......我忘记了它原来是什么的所有细节；但这基本上是一个疯狂的情况，一个同事添加了一些子类化 HttpClient 类的代码，而他的类没有完全履行接口的约定，当被*我的*代码调用时，它导致了这个错误。这是看起来像 JAXB 错误的奇怪情况之一，但事实证明它与 JAXB 完全无关。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T20:32:51.660

您的问题是，当您实例化 StreamResult 时，您必须为其提供一种存储将写入其中的数据的方法。您应该按照以下方式做一些事情：

```
StreamResult res=new StreamResult(new ByteArrayOutputStream()); 
```

ByteArrayOutputStream 将根据需要增长。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T08:32:51.103

查看 Spring 的源代码，Marshaller 抱怨它不支持 StreamResult 对象。它绝对支持这个对象，但是您可能遇到的是一个类加载问题，其中使用了从错误的 JAR 或由错误的类加载器加载的 StreamResult。

# image - img 标签内的 div 标签

> ID：10425377
> 
> 赞同：12
> 
> 时间：2012-05-03T05:00:47.590
> 
> 标签：image, dom, html

我需要在每个图像上添加一个文本，并且我有使用 img 标签构建的图像库。我不能在 img 标签下附加 div 标签。与此处显示的类似：

```
<img id="img1" class="img1_1" src="hello1_1">
  <div class="textDesc">HELLO1_1</div>
</img> 
```

虽然 div 附加到 img 标签，但我在图像上看不到文本“HELLO1_1”。

请问有人可以帮我吗？如果您需要源代码，我可以与您分享。

这是测试场景的链接：http: [//jsfiddle.net/XUR5K/9/](http://jsfiddle.net/XUR5K/9/)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-03T05:02:45.980

图像标签不能有子元素。相反，您需要使用 CSS 将 DIV 放置在图像顶部。

例子：

```
<div style="position: relative;">
    <img />
    <div style="position: absolute; top: 10px;">Text</div>
</div> 
```

这只是一个例子。有很多方法可以做到这一点。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-03T05:02:57.387

该`img`元素有一个自闭合标签，所以你不能给它子元素并期望它工作。它的内容模型被定义为*空*。[来源](http://www.w3.org/TR/html5/the-img-element.html#the-img-element)。

我怀疑您指定的任何子代都不会被渲染，因为`img`元素是被*替换*的元素，如 W3C 规范中所述。

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2012-12-13T11:51:27.600

好语气的规则。

1.  在 IMG 标签中使用*空源。*
2.  对 WebKit 浏览器使用 CSS *content:""*。
3.  *通过JavaScript*插入元素。**在 HTML 中清除不影响。**

您也可以使用伪元素。

示例：[https ://github.com/Alexei03a/canvas-img](https://github.com/Alexei03a/canvas-img)

# shell - 如何在 unix 中将 2012-05-03T25:00:00 转换为 2012-05-04T01:00:00

> ID：10425378
> 
> 赞同：1
> 
> 时间：2012-05-03T05:00:53.333
> 
> 标签：shell, unix

我不确定这将如何在 unix 中完成，任何人都可以帮助/建议 `2012-05-03T25:00:00 to 2012-05-04T01:00:00`在 Unix 命令/脚本中进行转换

在我的文件中，我有不止一次出现，需要转换到第二天的不同时间

```
2012-05-03T25:00:00 to 2012-05-04T01:00:00
2012-05-03T26:50:00 to 2012-05-04T02:50:00
2012-05-03T31:59:59 to 2012-05-04T07:59:59 
```

ETC

我试过了，但不知何故 sed 不起作用

日期.txt

```
2009-09-12T05:18:@00@+10:00,D,
2009-09-12T05:24:00+10:00,2009-09-12T05:24:@00@+10:00,D,
2009-09-12T05:25:00+10:00,2009-09-12T05:25:@00@+10:00,D,
2009-09-12T05:27:00+10:00,2009-09-12T05:27:@00@+10:00,D,
2009-09-12T30:29:00+10:00,2009-09-12T05:29:@00@+10:00,D,
2009-09-12T29:31:00+10:00,2009-09-12T05:31:@00@+10:00,D,
2009-09-12T28:33:00+10:00,,D,
2009-09-12T27:00:@00@+10:00,U,
2009-09-12T26:01:00+10:00,2009-09-12T05:01:@00@+10:00,U,
2009-09-12T24:04:00+10:00,2009-09-12T05:04:@00@+10:00,U,
2009-09-12T24:59:59+10:00,2009-09-12T05:06:@00@+10:00,U,
2009-09-12T30:08:00+10:00,2009-09-12T05:08:@00@+10:00,U,
2009-09-12T31:59:59+10:00,2009-09-12T05:10:@00@+10:00,U,
2009-09-12T05:17:00+10:00,,U,
2009-09-12T25:25:@00@+10:00,D, 
```

脚本.sh

```
awk -F"T" -v OFS=',' '{print $1}' date.txt > tmpdate
uniq -d tmpdate > tmpuniq
rm tmpdate
date1=`cat tmpuniq`
date2=`date --set="$date1" +%F`
date3=$(date --date="$date2" -d "+1 day" +"%F")
T1=$date2+"T24"
T2=$date3+"T00"
echo $T1
echo $T2
dos2unix date.txt
#sed -i 's/$T1/$T2/g' date.txt > test.txt
#sed -i 's/"$T1"/"$T2"/g' date.txt > test.txt
sed -i 's/'$T1'/'$T2'/g' date.txt 
```

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T10:26:07.857

如果您的系统上有 Tcl，则该`clock`命令会非常简单：

```
set t 2012-05-03T31:59:59
lassign [split $t T] date time
lassign [split $time :] hour min sec
set base [clock scan $date -format %Y-%m-%d]
set new [clock add $base $hour hours $min minutes $sec seconds]
puts [clock format $new -format %Y-%m-%dT%T]   ;# -> 2012-05-04T07:59:59 
```

cygwin的更新：

首先，使用 cygwin 安装程序，安装 8.5.x 版的“tcl”包（位于解释器类别中）。然后，你可以这样做

```
normalize_time() {
    printf '
        lassign [split "%s" T] date time
        lassign [split $time :] hour min sec
        set base [clock scan $date -format %%Y-%%m-%%d]
        set new [clock add $base $hour hours $min minutes $sec seconds]
        puts [clock format $new -format %%Y-%%m-%%dT%%T]
    ' "$1" | tclsh
}
normalize_time 2012-05-03T31:59:59 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T04:12:16.927

您基本上需要解析错误的时间规范，将所有内容转换为秒，将其重新加在一起，然后将其转换回正确的日期。

`date -d "date" +%s`产生自 1970 年 1 月 1 日以来的秒数。 `date -d @1234567890`将此格式的日期转换回常规的人类可读日期。

```
#!/bin/sh

IFS=T:

while read date hh mm ss; do
    basedate=$(date -d "$date" +%s)
    date -d @$(echo "$basedate+($hh*60*60)+($mm*60)+$ss" | bc) +%FT%T
done <<EOF
    2012-05-03T25:00:00
    2012-05-03T26:50:00
    2012-05-03T31:59:59
EOF 
```

我在这台电脑上没有`bc`，所以我用一个小脚本替换了我最初的尝试`awk`，但它不是很可读。

```
awk 'END { print '"$basedate"'+('"$hh"'*60*60)+('"$mm"'*60)+'"$ss"'}' </dev/null 
```

如果您没有足够新的 GNU 版本，您可以在[http://www.antonolsen.com/2006/04/06/bash-convert-unix-timestamp-to-a-date/](http://www.antonolsen.com/2006/04/06/bash-convert-unix-timestamp-to-a-date/)`date`找到一些替代方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T02:13:01.607

最后我得到了一个带有错误的解决方案（如果日期是本月的最后一天，那么这将不起作用，但我可以忍受）

做了一件笨拙的工作

```
date1=`cat date.txt | awk -F. '{print substr($1,1,10)}'|uniq |head -1`
echo $date1
date2=$date1"T24"
date21=$date1"T25"
date22=$date1"T26"
date23=$date1"T27"
date24=$date1"T28"
date25=$date1"T29"
date26=$date1"T30"
date27=$date1"T31"
date3=$(date --date="$date1" -d "+1 day" +"%F")
echo $date2
cat date.txt | grep "$date2"
tmpdate=`echo $date1 | sed -e 's/-//g'`
echo $tmpdate
date4=`echo $(date -d $(echo \`expr $tmpdate + 1\`F) +"%F")`
echo $date4
date41=$date4"T00"
date42=$date4"T01"
date43=$date4"T02"
date44=$date4"T03"
date45=$date4"T04"
date46=$date4"T05"
date47=$date4"T06"
date48=$date4"T07"

sed -i 's/'$date2'/'$date41'/g' date.txt
sed -i 's/'$date21'/'$date42'/g' date.txt
sed -i 's/'$date22'/'$date43'/g' date.txt
sed -i 's/'$date23'/'$date44'/g' date.txt
sed -i 's/'$date24'/'$date45'/g' date.txt
sed -i 's/'$date25'/'$date46'/g' date.txt
sed -i 's/'$date26'/'$date47'/g' date.txt
sed -i 's/'$date27'/'$date48'/g' date.txt 
```

如果有人想改进这个脚本，请继续。

再次感谢大家。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-05-03T08:08:29.943

首先，使用 cat 'yourfile' 打开它。然后在每一行上循环。然后使用 grep 和剪切。这真的很简单，最有效的学习方法是浏览 cat、grep 和 cut 的手册页。
希望它会有所帮助。

# mysql - 在 WAMP 中恢复数据库

> ID：10425379
> 
> 赞同：2
> 
> 时间：2012-05-03T05:01:13.000
> 
> 标签：mysql, database, wamp, wampserver, database-restore

我在 WAMP 中几乎没有与不同项目相关的数据库。我不知道发生了什么事，今天，当我去 PhpMyAdmin 时，我只能看到默认数据库，而我的其余数据库没有显示，甚至与这些数据库相关的 php 代码都抛出了 database not found 错误。但是当我转到“D:\wamp\bin\mysql\mysql5.1.30\data”时，带有我的数据库名称的文件夹就在那里。但不知道如何恢复这些数据库，我没有任何数据库备份，谁能帮我恢复它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T05:03:56.747

您可以将这些文件复制到另一个位置并在安装后将它们复制回原始位置重新安装相同的 WAMP 版本。请注意，您的 WAMP 版本应该相同，因为如果版本会改变，那么 mysql 版本也会改变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T19:17:28.673

另一种方法是利用 Window 的“恢复以前的版本”功能。右键单击`wamp`文件夹（通常在 中`C:\`，单击*恢复以前的版本*并选择您知道它正在工作的最近日期。

**注意：**这也将恢复 mysql 数据 - 因此在您选择的日期之后您将丢失任何更改，但我过去曾使用过这个，当我需要让我的整个 wamp 系统恢复到工作状态时，它已经损坏了它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T05:14:58.367

你检查过`my.ini`文件吗？只是发现`datadir`它应该引用 db 文件夹（例如`datadir=D:/Wamp/bin/mysql/mysql5.1.30/data`）-goodluck :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-15T05:40:57.680

将完整的数据文件夹从旧的 wamp mysql 文件夹复制到新的 mysql 文件夹，然后在数据文件夹中将文件 mysql-bin.index 的名称更改为 mysql-bin.index-corrupt。然后重新启动 WAMP。就这样。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-01T08:36:09.600

重新安装必须是相同**版本**的 Wamp Server 。重新安装后如果 wamp 显示红色图标 1\. 转到 wamp -> apache -> 服务 -> 测试端口 80。如果它可用。然后apache->服务->安装服务。2.mysql->服务->安装服务。在那之后重新启动 wamp.. 100% 工作

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-04-11T11:27:45.650

复制数据文件夹并重新安装相同版本的 WAMP。
安装完成后，转到数据文件夹：里面只替换`ibdata1`现有文件夹中的文件。
启动 WAMP 后，检查 phpmyadmin：您将获得所有包含数据的数据库和表。

# android - 为下一个选项卡保留 Spinner 值

> ID：10425385
> 
> 赞同：0
> 
> 时间：2012-05-03T05:01:28.493
> 
> 标签：android, memory, tabs, spinner

我希望从微调器中选择的值保存在内存或临时表或任何地方，以便它可以在下一个选项卡上使用。
我看了很多教程，但没有找到任何解决方案。
我有以下代码（它只给我 toast 消息；我从数据库中填充微调器）：

```
super.onCreate(savedInstanceState);
    setContentView(R.layout.customers);
    addFromDB();
    select_cust_name=(EditText)findViewById(R.id.select_cust_name);
}

private void addFromDB() {
    // TODO Auto-generated method stub
    final Spinner spinner = (Spinner) findViewById(R.id.spinner_db);
    resultsView = (TextView) findViewById(R.id.textView);
    SQLiteDatabase myDB = null;
    myDB = this.openOrCreateDatabase(SAMPLE_DB_NAME, 1, null);
    // ////////////These are using to add the values to database
    myDB.execSQL("CREATE TABLE " + SAMPLE_TABLE_NAME + " (" + _id
            + " INTEGER PRIMARY KEY AUTOINCREMENT , " + cust_name
            + " TEXT , " + cust_add + " TEXT)");
    myDB.execSQL("insert into tbl_customer(cust_name, cust_add) values ('Fool', 'FF' );");

    final Cursor c = myDB.query(SAMPLE_TABLE_NAME, null, null, null, null, null, null);
    char _idColumnIndex = (char) c.getColumnIndexOrThrow("_id");
    char cust_nameColumnIndex = (char) c.getColumnIndexOrThrow("cust_name");
    char cust_addColumnIndex = (char) c.getColumnIndexOrThrow("cust_add");
    adapterForSpinner = new ArrayAdapter<String>(this,
            android.R.layout.simple_spinner_item);
    adapterForSpinner
            .setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

    spinner.setAdapter(adapterForSpinner);
    spinner.setOnItemSelectedListener(new OnItemSelectedListener() {

public void onItemSelected(AdapterView<?> parent, View view,
                    int pos, long id) {
                // TODO Auto-generated method stub

                SQLiteDatabase myDB = null;
                Toast.makeText(
                        parent.getContext(),
                        "Customer is "
                                + parent.getItemAtPosition(pos).toString(),
                        Toast.LENGTH_LONG).show();
             String selected = parent.getItemAtPosition(pos).toString();
        insert(selected); 
```

提前致谢。

这是我的日志：

```
05-03 11:29:31.743: E/Cursor(10155): Finalizing a Cursor that has not been deactivated or closed. database = /data/data/tab.layout/databases/db_sales, table = tbl_customer, query = SELECT * FROM tbl_customer
05-03 11:29:31.743: E/Cursor(10155): android.database.sqlite.DatabaseObjectNotClosedException: Application did not close the cursor or database object that was opened here
05-03 11:29:31.743: E/Cursor(10155):    at android.database.sqlite.SQLiteCursor.<init>(SQLiteCursor.java:210)
05-03 11:29:31.743: E/Cursor(10155):    at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:53)
05-03 11:29:31.743: E/Cursor(10155):    at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1345)
05-03 11:29:31.743: E/Cursor(10155):    at android.database.sqlite.SQLiteDatabase.queryWithFactory(SQLiteDatabase.java:1229)
05-03 11:29:31.743: E/Cursor(10155):    at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1184)
05-03 11:29:31.743: E/Cursor(10155):    at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1264)
05-03 11:29:31.743: E/Cursor(10155):    at tab.layout.Customers.addFromDB(Customers.java:63)
05-03 11:29:31.743: E/Cursor(10155):    at tab.layout.Customers.onCreate(Customers.java:40)
05-03 11:29:31.743: E/Cursor(10155):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-03 11:29:31.743: E/Cursor(10155):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
05-03 11:29:31.743: E/Cursor(10155):    at android.app.ActivityThread.startActivityNow(ActivityThread.java:2503)
05-03 11:29:31.743: E/Cursor(10155):    at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:127)
05-03 11:29:31.743: E/Cursor(10155):    at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:339)
05-03 11:29:31.743: E/Cursor(10155):    at android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:651)
05-03 11:29:31.743: E/Cursor(10155):    at android.widget.TabHost.setCurrentTab(TabHost.java:323)
05-03 11:29:31.743: E/Cursor(10155):    at android.widget.TabHost.addTab(TabHost.java:213)
05-03 11:29:31.743: E/Cursor(10155):    at tab.layout.MyTablayoutActivity.SetupTabs(MyTablayoutActivity.java:48)
05-03 11:29:31.743: E/Cursor(10155):    at tab.layout.MyTablayoutActivity.onCreate(MyTablayoutActivity.java:20)
05-03 11:29:31.743: E/Cursor(10155):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-03 11:29:31.743: E/Cursor(10155):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
05-03 11:29:31.743: E/Cursor(10155):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
05-03 11:29:31.743: E/Cursor(10155):    at android.app.ActivityThread.access$2300(ActivityThread.java:125)
05-03 11:29:31.743: E/Cursor(10155):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
05-03 11:29:31.743: E/Cursor(10155):    at android.os.Handler.dispatchMessage(Handler.java:99)
05-03 11:29:31.743: E/Cursor(10155):    at android.os.Looper.loop(Looper.java:123)
05-03 11:29:31.743: E/Cursor(10155):    at android.app.ActivityThread.main(ActivityThread.java:4627)
05-03 11:29:31.743: E/Cursor(10155):    at java.lang.reflect.Method.invokeNative(Native Method)
05-03 11:29:31.743: E/Cursor(10155):    at java.lang.reflect.Method.invoke(Method.java:521)
05-03 11:29:31.743: E/Cursor(10155):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-03 11:29:31.743: E/Cursor(10155):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-03 11:29:31.743: E/Cursor(10155):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T06:05:25.650

几个选项...

**全局变量**

在你的主要活动中声明它

```
public class Main extends Activity {
    public static String myString;  // declare global variable
} 
```

从任何地方安顿下来...

```
public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
         Main.myString = parent.getItemAtPosition(pos).toString();
} 
```

然后，您可以在下一个活动/选项卡/片段中使用 Main.myString。

你没有说你是如何做标签的（如果它们是一个新的活动），所以另一种可能的方法是通过额外的意图传递它。

**传递意图**

```
public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
    Intent myIntent = new Intent(CurrentActivity.this, NextActivity.class);
    myIntent.putExtra("Selected", parent.getItemAtPosition(pos).toString());
    CurrentActivity.this.startActivity(myIntent);
} 
```

然后在新活动中检索它，如下所示：

```
Bundle extras = getIntent().getExtras();
String selected = extras.getString("Selected"); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T06:04:48.723

我认为该错误与数据库助手类有关。你能粘贴你写的从表格中选择内容的方法吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T06:11:24.763

或在您的方法中关闭游标以及最后的 db
db.close();
if (cursor != null && !cursor.isClosed()) {
cursor.close();
}

# android - 重新连接到标签时出现异常

> ID：10425399
> 
> 赞同：1
> 
> 时间：2012-05-03T05:03:21.643
> 
> 标签：android, bluetooth

我正在开发一个应用程序，我想将蓝牙标签与我的 andorid 应用程序连接起来。我能够建立连接并进行操作。如果手机或标签超出蓝牙范围 20-30 秒后又回来，它将重新连接。但是，如果我将其超出范围超过 1 分钟，则会出现异常

“ **wrp wsock 创建：缺货块**”。可能是什么原因？我正在使用相同的 uudi 进行连接和重新连接..我已按照蓝牙聊天应用程序建立连接..

# javascript - 用jQuery创建“全选”/“全选”复选框？

> ID：10425406
> 
> 赞同：2
> 
> 时间：2012-05-03T05:03:58.493
> 
> 标签：javascript, jquery, checkbox

我有几个复选框，其中一个是“全选”，其他的是一些独立的。

要求是

1.  如果用户单击“全选”复选框，则将选中所有其他复选框。
2.  如果他取消选中“全选”复选框，那么所有内容都将被取消选中。
3.  如果单个复选框中的任何一个未选中，则“全选”将被取消选中。
4.  如果四个复选框都被选中，则“全选”将被选中。

我正在使用 JQuery。我能够实现前两个，但不能实现后两个。我的代码如下

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
 <HEAD>
  <TITLE> Check / UnCheck All Checkbox </TITLE> 

  <script  type="text/javascript" src="jquery.js"></script>

  <script type="text/javascript">

  function SelectDeselect()
  {
        if(document.getElementById('chkSelectDeselectAll').checked)  $("INPUT[type='checkbox']").attr('checked',true); 

        else  $("INPUT[type='checkbox']").attr('checked',false); 
  }

  </script>

 </HEAD>

 <BODY>

    <input type="checkbox" id="chkSelectDeselectAll" onClick="SelectDeselect()">Select All
    <br><br>

    Select your hobbies:
    <br><br>

    <input type="checkbox" id="chkTV">Watching T.V.<br><br>

    <input type="checkbox" id="chkGardening">Gardening<br><br>

    <input type="checkbox" id="chkSwimming">Swimming<br><br>

    <input type="checkbox" id="chkChess">Playing Chess<br><br>

 </BODY>
</HTML> 
```

需要帮助来实现其余部分。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T05:24:39.557

```
$(document).ready(function() {

    $('#main').change(function() {

        if ($(this).is(':checked')) {
        $('input[name="hi[]"]:checkbox').attr('checked', true);        

        } else {

            $('input[name="hi[]"]:checkbox').attr('checked', false);
        }
    });

$('input[name="hi[]"]:checkbox').change(function() {
        var chkLength = $('input[name="hi[]"]:checkbox').length;
        var checkedLen = $('input[name="hi[]"]:checkbox:checked').length;    
        if (chkLength == checkedLen) {
            $('#main').attr('checked', true);
        } else {
            $('#main').attr('checked', false);
        }
    });
});
​ 
```

检查小提琴：http: [//jsfiddle.net/4vKwm/10/](http://jsfiddle.net/4vKwm/10/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T05:21:17.033

也许它给出了一些解释

如果用户单击“全选”复选框，则将选中所有其他复选框。

```
 $("#chkSelectDeselectAll").click(function(){  
     if($("#chkSelectDeselectAll").is(':checked'))
{
        ("checkbox").each(function(){
            $(this).attr('checked', 'checked');
          });
}
    }); 
```

如果他取消选中“全选”复选框，那么所有内容都将被取消选中。

```
$("#chkSelectDeselectAll").click(function(){  
     if(!$("#chkSelectDeselectAll").is(':checked'))
{
    ("checkbox").each(function(){
            $(this).removeAttr('checked');
          });
    }
}); 
```

如果单个复选框中的任何一个未选中，则“全选”将被取消选中。

```
$("checkbox").click(function(){
    ("checkbox").each(function(){
    if($(this).is(':checked'))
    {
            $("#chkSelectDeselectAll").removeAttr('checked');
    }
          });
     }); 
```

如果四个复选框都被选中，则“全选”将被选中。

```
$("checkbox").click(function(){
    ("checkbox").each(function(){
    var yesno=true;
    if(!$(this).is(':checked'))
    {
            yesno=false;
    }
          });
    if( yesno)
    {
     $("#chkSelectDeselectAll").attr('checked', 'checked')
    }
  }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T05:22:04.027

只需检查所有复选框的状态。

~~工作演示：http: [//jsfiddle.net/XSdjQ/1/](http://jsfiddle.net/XSdjQ/1/)~~

~~更新演示：http: [//jsfiddle.net/XSdjQ/2/](http://jsfiddle.net/XSdjQ/2/)~~

另一个与您的标记完美配合的演示：http: [//jsfiddle.net/XSdjQ/3/](http://jsfiddle.net/XSdjQ/3/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T05:32:56.517

我真的建议您更新您的 jQuery 库并尝试为您想要收听的所有复选框添加一个类，但是：

```
var collection = $("input:checkbox:not(#chkSelectDeselectAll)").change(function() {
    selectAll[0].checked = collection.filter(":not(:checked)").length === 0;
});
var selectAll = $("#chkSelectDeselectAll").change(function(){
    collection.attr('checked', this.checked);
}); 
```

会起作用的，如果您手动检查所有（或在您按下全选时取消选择一个），我添加了该功能，然后它将关闭`#chkSelectDeselectAll`. 一个演示：

[http://jsfiddle.net/voigtan/yTWKY/1/](http://jsfiddle.net/voigtan/yTWKY/1/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T05:24:04.180

你可以试试这段代码。

```
$(document).ready(function(){
    $('#chkSelectDeselectAll').toggle(function(){
                $('input[type=checkbox]').each(function(){
                    $(this).attr('checked',true);
                });

    },function(){
                $('input[type=checkbox]').each(function(){
                    $(this).removeAttr('checked');
                });
    })
}); 
```

谢谢。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-13T07:50:31.937

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>    

<script type="text/javascript">
        $(function () {
            $("[id*=chkAll]").bind("click", function () {
                if ($(this).is(":checked")) {
                    $("[id*=chkvalue] input").attr("checked", "checked");
                } else {
                    $("[id*=chkvalue] input").removeAttr("checked");
                }
            });
            $("[id*=chkvalue] input").bind("click", function () {
                if ($("[id*=chkvalue] input:checked").length == $("[id*=chkvalue] input").length) {
                    $("[id*=chkAll]").attr("checked", "checked");
                } else {
                    $("[id*=chkAll]").removeAttr("checked");
                }
            });
        });
</script>

<asp:CheckBox ID="chkAll" Text="Select All Test Patterns" runat="server" />

 <asp:CheckBoxList ID="chkvalue" runat="server">
  <asp:ListItem Text="On/Off" />
  <asp:ListItem Text="Alternate Rows" />
  <asp:ListItem Text="Alternate Columns" />
  <asp:ListItem Text="Alternate Diagonals" />
  <asp:ListItem Text="Running Row" />
  <asp:ListItem Text="Running Columns" />
</asp:CheckBoxList> 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-05-03T05:12:38.423

```
function checkOne(){
    if(    document.getElementById('chkTV').checked &&
          document.getElementById('chkGardening').checked &&
    document.getElementById('chkSwimming').checked &&
    document.getElementById('chkChess').checked ){
         document.getElementById('chkSelectDeselectAll').checked = true;
    }
    else{
         document.getElementById('chkSelectDeselectAll').checked = false;
    }

  }

    <input type="checkbox" id="chkTV" onclick="checkOne">Watching T.V.<br><br>

    <input type="checkbox" id="chkGardening" onclick="checkOne">Gardening<br><br>

    <input type="checkbox" id="chkSwimming" onclick="checkOne">Swimming<br><br>

    <input type="checkbox" id="chkChess" onclick="checkOne">Playing Chess<br><br> 
```

# php - 想要在浮点数后精确显示 2 位数字

> ID：10425407
> 
> 赞同：6
> 
> 时间：2012-05-03T05:04:08.947
> 
> 标签：php, floating-point

我想将浮点后8位的浮点值转换为浮点后的2位..

例如。$a = 2.200000 ==> 2.20

我正在使用 php 的圆形函数。round 的问题是，如果我的号码是 2.200000 ，它会在 2.2 中转换数字。我想要输出为 2.20

任何人都可以提出可能的方法吗？

实际代码

```
$price = sprintf ("%.2f", round(($opt->price_value + ($opt->price_value * $this->row->prices[0]->taxes[0]->tax_rate)), 2)); 
```

如果我的浮点数是 2.2000000，我想输出。那么它应该返回我 2.20。但现在它正在返回我 2.2

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-03T05:06:41.237

这可以满足我的要求：

```
<?php

$a = 2.20032324;
$f = sprintf ("%.2f", $a);
echo "$a rounded to 2 decimal places is '$f'\n";

$a = 2.2000000;
$f = sprintf ("%.2f", $a);
echo "$a rounded to 2 decimal places is '$f'\n"; 
```

结果：

```
[wally@lenovoR61 ~]$ php t.php
2.20032324 rounded to 2 decimal places is '2.20'
2.2 rounded to 2 decimal places is '2.20' 
```

我添加了两个测试用例

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-03-25T00:11:47.780

尝试`$val = round($a * 100)/100;`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-02-19T06:38:49.663

试试下面的代码，你可以得到你的结果。

```
 $a = 2.200000;
       echo number_format((float)$a,2,'.',''); 
```

# html - html表结构

> ID：10425409
> 
> 赞同：1
> 
> 时间：2012-05-03T05:04:41.493
> 
> 标签：html, html-table

我对 html 很陌生，我正在尝试这样做：

是否可以按如下方式构建表格：说大小为 500X500px。中心正方形大小为 200X200。和这个正方形周围的 4 个矩形（2 个是 200X300，其他是 300X200）？我试图这样做，但我不确定它是否可能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T05:10:13.090

这是你想要的？

```
 <table border="1">
    <tr>
      <td colspan="2" height="150px;"></td>
      <td rowspan="2" width="150px;"></td>
    </tr>
    <tr>
      <td rowspan="2" width="150px;"></td>
      <td width="200px;" height="200px"></td>
    </tr>   
    <tr>
      <td colspan="2"   height="150px;"></td>
    </tr>   
  </table> 
```

[http://jsbin.com/inahaz](http://jsbin.com/inahaz)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T05:35:20.070

我建议你使用 DIV：

### *[jsBin 演示](http://jsbin.com/ofaqor/3/edit)*

HTML：

```
<div id="wrapper">

  <div class="box box_vert">1</div>
  <div class="box box_horiz">2</div>

  <div class="box center">c</div> 

  <div class="box box_vert" style="float:right;">3</div>
  <div class="box box_horiz">4</div> 

</div> 
```

CSS：

```
 #wrapper{
    width:600px;
    height:600px;
    position:relative;
    margin:50px auto;
    background:black;
  }
  .box{
    position:relative;
    float:left;
    width: 200px;
    height:200px;
  }
  .box_horiz{
    width:400px;
  }
  .box_vert{
    height:400px;
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T05:07:50.423

试试这个在样式标签之间写下代码 table{width:400px;height:400px;} td{width:200px;height:200px;}

# sql - PyQt 问题中非常基本的 SQL 查询

> ID：10425412
> 
> 赞同：0
> 
> 时间：2012-05-03T05:05:18.057
> 
> 标签：sql, pyqt4

我发现的所有示例都是使用 PyQt 将数据放入各种视图和表中。

但我正在尝试做一些非常基本的查询来获取数据并将它们发送到其他一些非 qt 函数。有什么建议我该怎么做？

例如，如果我从具有 3 条记录的表“用户”中查询。如何访问每条记录并将它们作为普通的 python 字符串而不是 QtString 返回？

```
db = QtSql.QSqlDatabase.addDatabase("QSQLITE")
db.setDatabaseName(blah)

query = QtSql.QSqlQuery(db)
query.exec_("SELECT id, password FROM user") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T05:20:04.460

您要求访问每条记录并将它们作为字符串返回，但我认为您的意思是将每条记录的字段作为字符串返回？每条记录都是一个包含查询字段的对象。在这种情况下，您要求用户提供 ID 和密码...

```
while query.next():
    record = query.record()
    id_ = str(record.value("id").toString())
    password = str(record.value("password").toString())
    print id_, password 
```

在 next() 返回 True 时，您可以通过循环来迭代查询。每个循环，您都可以请求 QSqlRecord。使用该记录，您可以询问每个字段的值。每个字段的值都是一个 QVariant。QVariant 是一个通用容器，它可以容纳不同的类型，所以你必须告诉它给你一个 QString 的值。通过 str(qstring) 可以轻松地将 QString 转换为 python 字符串。因此，您将字段值作为 python 字符串。

# python - 需要帮助使用 python 设置 DWORD 值

> ID：10425414
> 
> 赞同：0
> 
> 时间：2012-05-03T05:05:24.610
> 
> 标签：python, winreg

我正在尝试在 Windows 注册表中设置一个`DWORD`值。`0xFFFFFFFF`但是当我尝试这个时：

```
_winreg.SetValueEx(aKey,"dword_test_2",0, _winreg.REG_DWORD, 4294967295L ) 
```

它抛出一个错误：

> ValueError：无法将数据转换为指定的类型。

请帮忙..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T06:49:59.843

在 Python 中，使用`L`数字的后缀会创建一个 类型的值`long`。`long`是[任意大小](http://en.wikipedia.org/wiki/Arbitrary-precision_arithmetic)的整数。`DWORD`可能对应`int`于 Python中的an 。

你试过了吗

```
_winreg.SetValueEx(aKey,"dword_test_2",0, _winreg.REG_DWORD, 0xFFFFFFFF ) 
```

或者

```
_winreg.SetValueEx(aKey,"dword_test_2",0, _winreg.REG_DWORD, -1 ) 
```

?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T05:14:41.143

哦对，这个。我认为您需要`-1`改用。

# mfc - MFC：执行“IHTMLTable::insertRow”时抛出“访问冲突”

> ID：10425415
> 
> 赞同：0
> 
> 时间：2012-05-03T05:05:35.463
> 
> 标签：mfc

我想在 CDHtmlDialog 中创建行和单元格。这是我写的代码：

```
void CHtmlTableTestDlg::OnDocumentComplete(LPDISPATCH pDisp, LPCTSTR szUrl)
{
    IHTMLTable* table;
    this->GetElement(_T("Table"),(IHTMLElement**)&table); 
    IDispatch* dispatch;
    table->insertRow(1,&dispatch);
} 
```

这是表格的html：

```
<table id="Table">
    <tr>
        <th>Column</th>
    </tr>
</table> 
```

我调试了项目，执行“table->insertRow(1,&dispatch)”时出现以下错误

HtmlTableTest.exe 中 0x3fa53780 处未处理的异常：0xC0000005：访问冲突写入位置 0x00000001。

我已经上传了我的测试项目： [http ://top720.com/Temp/HtmlTableTest.zip](http://top720.com/Temp/HtmlTableTest.zip)

如何基于 CDHtmlDialog 创建行和单元格？

感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T08:26:49.573

你不能只在`IHTMLElement`and之间转换`IHTMLTable`。尝试这个：

```
IHTMLElement* element;
if(S_OK == this->GetElement(_T("Table"),(IHTMLElement**)&element)) {
   IHTMLTable* table;
   if(S_OK == element->QueryInterface(&table)) {
      IDispatch* dispatch;
      table->insertRow(1,&dispatch);
      table->Release();
      table = NULL;
   }
} 
```

[对 COM 的介绍](http://msdn.microsoft.com/en-us/library/bwa2bx93%28v=vs.80%29.aspx)也值得一读。

# android - 在android中通过传入的短信启动服务

> ID：10425418
> 
> 赞同：0
> 
> 时间：2012-05-03T05:06:05.200
> 
> 标签：android

根据我的要求，我想通过传入的 SMS 启动/停止服务。

根据 Dinesh 的想法，我这样做了。

```
public class ReceiveSMS extends BroadcastReceiver {

    Boolean SendSMS;
    String Mobileno;
    String VarMessageBody;

    @Override
    public void onReceive(Context context, Intent intent) {
        Bundle bundle = intent.getExtras();
        SmsMessage[] msgs = null;
        String str = "";
        if (bundle != null) {
            Object[] pdus = (Object[]) bundle.get("pdus");
            msgs = new SmsMessage[pdus.length];
            for (int i = 0; i < msgs.length; i++) {
                msgs[i] = SmsMessage.createFromPdu((byte[]) pdus[i]);
                str += "SMS from " + msgs[i].getOriginatingAddress();
                Mobileno = msgs[i].getOriginatingAddress();
                str += " :";
                str += msgs[i].getMessageBody().toString();
                VarMessageBody = msgs[i].getMessageBody().toString();
                str += "\n";
                Mobileno = msgs[i].getOriginatingAddress();

            }
            if (VarMessageBody.startsWith("START")) {
                Intent intentHome = new Intent(context,SwitchBluetoothActivity.class);
                intentHome.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                context.startActivity(intentHome);

            }

        }

    } 
```

在我的 SwitchBluetoothActivity 中我写了

```
public class SwitchBluetoothActivity extends Activity {
    private TextView tv;
    private ToggleButton tb;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        tv = (TextView) findViewById(R.id.bluetoothText);
        tb = (ToggleButton) findViewById(R.id.toggleButton);

        final BluetoothAdapter bta = BluetoothAdapter.getDefaultAdapter();

        if (bta == null) {
            tv.setText("Device does not support Bluetooth");
        }
        else if(bta.isEnabled()){
            tv.setText("Bluetooth is enabled");
            tb.setChecked(true);
        }
        else{
            tv.setText("Bluetooth is disabled");
            tb.setChecked(false);
        }

        tb.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
              if(bta.isEnabled()){
                    bta.disable();
                tv.setText("Bluetooth is disabled");
                }
                else{
                    bta.enable();
                tv.setText("Bluetooth is enabled");
                }
            }
        });
    }
} 
```

但我无法开始这项活动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T05:09:42.080

注册一个广播接收器，当短信进来时。你可以启动服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T05:11:48.830

您可以将广播接收器用于传入的短信，并且在该接收器中，您可以根据短信内容设置启动和停止服务的逻辑，并且您还必须设置服务逻辑在设备关闭和重新启动后保持启动，您可以使用设备重启的广播接收器

对于启动和停止服务，请参阅此

http://developer.android.com/reference/android/app/Service.html

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-03T05:14:29.660

在您的项目中注册 BroadcastReceiver 类收听传入的短信教程和代码下面的链接

[http://www.androidcompetencycenter.com/2008/12/android-api-sms-handling/](http://www.androidcompetencycenter.com/2008/12/android-api-sms-handling/)

广播接收器类监听接收短信后启动活动示例代码如下：

```
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.telephony.SmsMessage;
import android.widget.Toast;

public class ReceiveSMS extends BroadcastReceiver
{
    MapMarker obj_gps = new MapMarker();
    Boolean SendSMS;
    String Mobileno;
    String VarMessageBody;
    @Override
    public void onReceive(Context context, Intent intent) 
    {
          Bundle bundle = intent.getExtras();        
            SmsMessage[] msgs = null;
            String str = "";            
            if (bundle != null)
            {
                //---retrieve the SMS message received---
                Object[] pdus = (Object[]) bundle.get("pdus");
                msgs = new SmsMessage[pdus.length];            
                for (int i=0; i<msgs.length; i++){
                    msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);                
                    str += "SMS from " + msgs[i].getOriginatingAddress();
                    Mobileno=msgs[i].getOriginatingAddress();
                    str += " :";
                    str += msgs[i].getMessageBody().toString();
                    VarMessageBody=msgs[i].getMessageBody().toString();
                    str += "\n";
                    Mobileno=msgs[i].getOriginatingAddress();

                }
               //---display the new SMS message---
               if (VarMessageBody.startsWith("START"))//Check Message Body String Start with START
                    Intent intentHome = new Intent(context, HomeScreen.class);
                    intentHome.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                    //intentHome.putExtra("No",Mobileno);
                    //intentHome.putExtra("Msg",VarMessageBody);
                    //intentHome.putExtra("Mob", Mobileno);
                    context.startActivity(intentHome);
              }

              Toast.makeText(context, str, Toast.LENGTH_SHORT).show();
            }
    }

} 
```

此代码接收发送短信格式“开始”开始活动..！

**注意：我是 Start Activity 只有你在 if 条件下启动服务......！**

# java - 在 HTML5 文档中部署 Java 小程序的符合标准的代码是什么？

> ID：10425419
> 
> 赞同：3
> 
> 时间：2012-05-03T05:06:07.677
> 
> 标签：java, html

我想在 HTML5 网页中部署一个旧的 Java (1.5) 小程序。

Web 上提供的大多数关于 Java 小程序和 HTML5 的材料要么已经过时，要么无法正常工作，要么包含无数用于跨浏览器兼容性的 hack 和变通方法。不过，我有幸不必关心兼容性。

我意识到 HTML5 标准仍在开发中，但其中大部分已经足够稳定，可供人们使用。抛开浏览器技巧不谈，将 Java 小程序嵌入`jar`文件的（可能）符合标准的方法是什么，它的大致浏览器支持是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T05:36:40.477

HTML5 仍在开发中。关于小程序在草案中说：

> 一般来说，最好避免使用这些小程序，而是使用原生 JavaScript 和 HTML 来提供功能，因为这样应用程序可以在所有 Web 浏览器上运行，而无需第三方插件。许多设备，尤其是嵌入式设备，不支持 Java 等第三方技术。

但是，评论表明嵌入小程序可以使用以下*成语*：

```
<figure>
  <object type="application/x-java-applet">
    <param name="code" value="MyJavaClass">
    <p>You do not have Java available, or it is disabled.</p>
  </object>
  <figcaption>My Java Clock</figcaption>
</figure> 
```

HTML5 鼓励使用`<object>`标签，该标签可用于在您的网站中嵌入媒体。

# php - 主机服务器中的文件上传问题

> ID：10425422
> 
> 赞同：0
> 
> 时间：2012-05-03T05:06:51.643
> 
> 标签：php, file-upload

尝试上传图像文件时，托管服务器有时会发出警告。如果我尝试在成功尝试中上传相同的文件，图像将被上传。

警告：

```
Warning (2): move_uploaded_file(files/photos/3.jpg) [http://php.net/function.move-uploaded-file]: failed to open stream: Permission denied [APP/controllers/components/file_upload.php, line 55]
Warning (2): move_uploaded_file() [http://php.net/function.move-uploaded-file]: Unable to move '/tmp/phpUutr9Z' to 'files/photos/3.jpg' [APP/controllers/components/file_upload.php, line 55] 
```

上传文件

```
if ( is_uploaded_file($file_temp) ) {
    if (move_uploaded_file($file_temp, $destination . $filename . '.' . $extension)) {
    $error = "SUCCESS";
    return $error;
    } else {
    $error = "ERROR";
    return $error;
    }
} 
```

此处，当警告出现时，其他部分中的“错误”也会返回警告...

我怎样才能纠正它？

它在本地服务器上运行良好......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T05:10:33.107

可能您的脚本没有写入目标目录的权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T05:12:47.507

那么`APP/controllers/components/files/photos/3.jpg`您要保存上传的位置吗？如果是这样，那么它的权限问题。

还是您的意思是：`WEB_ROOT/files/photos/3.jpg`如果是这样，您也需要更改代码：

```
if ( is_uploaded_file($file_temp) ) {
    if (move_uploaded_file($file_temp, '/'.$destination.$filename.'.'.$extension)) {
    $error = "SUCCESS";
    return $error;
    } else {
    $error = "ERROR";
    return $error;
    }
} 
```

注意正斜杠`'/'.$destination`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T05:14:06.107

检查目录和文件上的**CHMOD 。**通常 PHP 像*root*一样运行，但你仍然可以使用 CHMOD 禁止它的访问。

# java - Wicket 数据表属性列

> ID：10425429
> 
> 赞同：2
> 
> 时间：2012-05-03T05:07:10.477
> 
> 标签：java, datatable, wicket

尝试添加具有指定排序属性的列时，我得到了 NPE。关于我做错了什么的任何想法？

这是课程：

```
@Entity
@Table(name="checklist_template")
public class CheckListTemplate extends DomainObject implements Comparable<CheckListTemplate>, Serializable {

    private static final long serialVersionUID = 2959377496669050427L;

    @Id
    @GeneratedValue
    private Long id;

    @Column(nullable=false)
    private String name;

    public CheckListTemplate() {}

    public CheckListTemplate(String name) {
        this.name = name;
    }

    //some other attributes, getters, setters etc

} 
```

这是代码：

```
public class CheckListTemplateDataPanel extends Panel {

    @SpringBean
    public ChecklistTemplateService checklistTemplateService;

    DataTable<CheckListTemplate> table;
    NavigationToolbar navigationToolbar;
    ChecklistTemplateProvider checklistTemplateProvider;

    public CheckListTemplateDataPanel(String id) {
        super(id);

        IColumn[] columns = new IColumn[1];

        columns[0] = new PropertyColumn<CheckListTemplate>(Model.of("Name"), "name", "name"); //this is what generates the exception. if i ignore the third argument, the code works but i get no link to click for sorting

        table = new DataTable<CheckListTemplate>("datatable", columns, checklistTemplateProvider =  new ChecklistTemplateProvider(), 10);
        table.setOutputMarkupId(true);
        table.addBottomToolbar(navigationToolbar = new NavigationToolbar(table));
        table.addTopToolbar(new HeadersToolbar(table, null));
        add(table);

    }

    private class ChecklistTemplateProvider extends SortableDataProvider<CheckListTemplate> {

        public ChecklistTemplateProvider() {
            setSort("name", true);
        }

        @Override
        public Iterator<? extends CheckListTemplate> iterator(int first, int count) {
            return checklistTemplateService.findAll(new PageRequest(table.getCurrentPage(), count)).iterator();

        }

        @Override
        public int size() {
            return safeLongToInt(checklistTemplateService.count());
        }

        @Override
        public IModel<CheckListTemplate> model(CheckListTemplate object) {
            return Model.of(object);
        }

        public void setFilterString(String filterString){
            this.filterString = filterString;
        }
    }

    public static int safeLongToInt(long l) {
        if (l < Integer.MIN_VALUE || l > Integer.MAX_VALUE) {
            throw new IllegalArgumentException
                    (l + " cannot be cast to int without changing its value.");
        }
        return (int) l;
    }
} 
```

这是一个例外：

```
2012 May 03 13:58:58,480[ERROR] - RequestCycle - Exception in rendering component: [MarkupContainer [Component id = header]]
org.apache.wicket.WicketRuntimeException: Exception in rendering component: [MarkupContainer [Component id = header]]
    at org.apache.wicket.Component.renderComponent(Component.java:2729)
    at org.apache.wicket.MarkupContainer.onRender(MarkupContainer.java:1539)
    at org.apache.wicket.Component.render(Component.java:2521)
    at org.apache.wicket.MarkupContainer.renderNext(MarkupContainer.java:1441)
    at org.apache.wicket.MarkupContainer.renderComponentTagBody(MarkupContainer.java:1604)
    at org.apache.wicket.MarkupContainer.onComponentTagBody(MarkupContainer.java:1528)
    at org.apache.wicket.Component.renderComponent(Component.java:2690)
    at org.apache.wicket.MarkupContainer.onRender(MarkupContainer.java:1539)
    at org.apache.wicket.Component.render(Component.java:2521)
    at org.apache.wicket.markup.repeater.AbstractRepeater.renderChild(AbstractRepeater.java:122)
    at org.apache.wicket.markup.repeater.AbstractRepeater.onRender(AbstractRepeater.java:103)
    at org.apache.wicket.Component.render(Component.java:2521)
    at org.apache.wicket.MarkupContainer.renderNext(MarkupContainer.java:1441)
    at org.apache.wicket.MarkupContainer.renderComponentTagBody(MarkupContainer.java:1604)
    at org.apache.wicket.MarkupContainer.renderAssociatedMarkup(MarkupContainer.java:697)
    at org.apache.wicket.markup.html.panel.Panel.onComponentTagBody(Panel.java:114)
    at org.apache.wicket.Component.renderComponent(Component.java:2690)
    at org.apache.wicket.MarkupContainer.onRender(MarkupContainer.java:1539)
    at org.apache.wicket.Component.render(Component.java:2521)
    at org.apache.wicket.extensions.markup.html.repeater.data.table.DataTable$ToolbarContainer.onRender(DataTable.java:429)
    at org.apache.wicket.Component.render(Component.java:2521)
    at org.apache.wicket.markup.repeater.AbstractRepeater.renderChild(AbstractRepeater.java:122)
    at org.apache.wicket.markup.repeater.AbstractRepeater.onRender(AbstractRepeater.java:103)
    at org.apache.wicket.Component.render(Component.java:2521)
    at org.apache.wicket.MarkupContainer.renderNext(MarkupContainer.java:1441)
    at org.apache.wicket.MarkupContainer.renderComponentTagBody(MarkupContainer.java:1604)
    at org.apache.wicket.MarkupContainer.renderAssociatedMarkup(MarkupContainer.java:697)
    at org.apache.wicket.markup.html.panel.Panel.onComponentTagBody(Panel.java:114)
    at org.apache.wicket.Component.renderComponent(Component.java:2690)
    at org.apache.wicket.MarkupContainer.onRender(MarkupContainer.java:1539)
    at org.apache.wicket.Component.render(Component.java:2521)
    at org.apache.wicket.MarkupContainer.renderNext(MarkupContainer.java:1441)
    at org.apache.wicket.MarkupContainer.renderComponentTagBody(MarkupContainer.java:1604)
    at org.apache.wicket.MarkupContainer.renderAssociatedMarkup(MarkupContainer.java:697)
    at org.apache.wicket.markup.html.panel.Panel.onComponentTagBody(Panel.java:114)
    at org.apache.wicket.Component.renderComponent(Component.java:2690)
    at org.apache.wicket.MarkupContainer.onRender(MarkupContainer.java:1539)
    at org.apache.wicket.Component.render(Component.java:2521)
    at org.apache.wicket.MarkupContainer.renderNext(MarkupContainer.java:1441)
    at org.apache.wicket.MarkupContainer.renderComponentTagBody(MarkupContainer.java:1604)
    at org.apache.wicket.MarkupContainer.onComponentTagBody(MarkupContainer.java:1528)
    at org.apache.wicket.Component.renderComponent(Component.java:2690)
    at org.apache.wicket.MarkupContainer.onRender(MarkupContainer.java:1539)
    at org.apache.wicket.Component.render(Component.java:2521)
    at org.apache.wicket.MarkupContainer.autoAdd(MarkupContainer.java:229)
    at org.apache.wicket.markup.resolver.MarkupInheritanceResolver.resolve(MarkupInheritanceResolver.java:66)
    at org.apache.wicket.markup.resolver.ComponentResolvers.resolve(ComponentResolvers.java:81)
    at org.apache.wicket.MarkupContainer.renderNext(MarkupContainer.java:1445)
    at org.apache.wicket.MarkupContainer.renderComponentTagBody(MarkupContainer.java:1604)
    at org.apache.wicket.MarkupContainer.onComponentTagBody(MarkupContainer.java:1528)
    at org.apache.wicket.Component.renderComponent(Component.java:2690)
    at org.apache.wicket.MarkupContainer.onRender(MarkupContainer.java:1539)
    at org.apache.wicket.Component.render(Component.java:2521)
    at org.apache.wicket.MarkupContainer.autoAdd(MarkupContainer.java:229)
    at org.apache.wicket.markup.resolver.MarkupInheritanceResolver.resolve(MarkupInheritanceResolver.java:73)
    at org.apache.wicket.markup.resolver.ComponentResolvers.resolve(ComponentResolvers.java:81)
    at org.apache.wicket.MarkupContainer.renderNext(MarkupContainer.java:1445)
    at org.apache.wicket.MarkupContainer.renderComponentTagBody(MarkupContainer.java:1604)
    at org.apache.wicket.MarkupContainer.onComponentTagBody(MarkupContainer.java:1528)
    at org.apache.wicket.Component.renderComponent(Component.java:2690)
    at org.apache.wicket.MarkupContainer.onRender(MarkupContainer.java:1539)
    at org.apache.wicket.Component.render(Component.java:2521)
    at org.apache.wicket.MarkupContainer.autoAdd(MarkupContainer.java:229)
    at org.apache.wicket.markup.resolver.MarkupInheritanceResolver.resolve(MarkupInheritanceResolver.java:66)
    at org.apache.wicket.markup.resolver.ComponentResolvers.resolve(ComponentResolvers.java:81)
    at org.apache.wicket.MarkupContainer.renderNext(MarkupContainer.java:1445)
    at org.apache.wicket.MarkupContainer.renderComponentTagBody(MarkupContainer.java:1604)
    at org.apache.wicket.MarkupContainer.onComponentTagBody(MarkupContainer.java:1528)
    at org.apache.wicket.Component.renderComponent(Component.java:2690)
    at org.apache.wicket.MarkupContainer.onRender(MarkupContainer.java:1539)
    at org.apache.wicket.Component.render(Component.java:2521)
    at org.apache.wicket.MarkupContainer.autoAdd(MarkupContainer.java:229)
    at org.apache.wicket.markup.resolver.MarkupInheritanceResolver.resolve(MarkupInheritanceResolver.java:73)
    at org.apache.wicket.markup.resolver.ComponentResolvers.resolve(ComponentResolvers.java:81)
    at org.apache.wicket.MarkupContainer.renderNext(MarkupContainer.java:1445)
    at org.apache.wicket.MarkupContainer.renderComponentTagBody(MarkupContainer.java:1604)
    at org.apache.wicket.MarkupContainer.onComponentTagBody(MarkupContainer.java:1528)
    at org.apache.wicket.Component.renderComponent(Component.java:2690)
    at org.apache.wicket.MarkupContainer.onRender(MarkupContainer.java:1539)
    at org.apache.wicket.Component.render(Component.java:2521)
    at org.apache.wicket.MarkupContainer.autoAdd(MarkupContainer.java:229)
    at org.apache.wicket.markup.resolver.MarkupInheritanceResolver.resolve(MarkupInheritanceResolver.java:66)
    at org.apache.wicket.markup.resolver.ComponentResolvers.resolve(ComponentResolvers.java:81)
    at org.apache.wicket.MarkupContainer.renderNext(MarkupContainer.java:1445)
    at org.apache.wicket.MarkupContainer.renderComponentTagBody(MarkupContainer.java:1604)
    at org.apache.wicket.MarkupContainer.onComponentTagBody(MarkupContainer.java:1528)
    at org.apache.wicket.Component.renderComponent(Component.java:2690)
    at org.apache.wicket.MarkupContainer.onRender(MarkupContainer.java:1539)
    at org.apache.wicket.Component.render(Component.java:2521)
    at org.apache.wicket.MarkupContainer.autoAdd(MarkupContainer.java:229)
    at org.apache.wicket.markup.resolver.MarkupInheritanceResolver.resolve(MarkupInheritanceResolver.java:73)
    at org.apache.wicket.markup.resolver.ComponentResolvers.resolve(ComponentResolvers.java:81)
    at org.apache.wicket.MarkupContainer.renderNext(MarkupContainer.java:1445)
    at org.apache.wicket.MarkupContainer.renderAll(MarkupContainer.java:1555)
    at org.apache.wicket.Page.onRender(Page.java:1594)
    at org.apache.wicket.Component.render(Component.java:2521)
    at org.apache.wicket.Page.renderPage(Page.java:932)
    at org.apache.wicket.request.target.component.BookmarkablePageRequestTarget.respond(BookmarkablePageRequestTarget.java:261)
    at org.apache.wicket.request.AbstractRequestCycleProcessor.respond(AbstractRequestCycleProcessor.java:105)
    at org.apache.wicket.RequestCycle.processEventsAndRespond(RequestCycle.java:1258)
    at org.apache.wicket.RequestCycle.step(RequestCycle.java:1329)
    at org.apache.wicket.RequestCycle.steps(RequestCycle.java:1436)
    at org.apache.wicket.RequestCycle.request(RequestCycle.java:545)
    at org.apache.wicket.protocol.http.WicketFilter.doGet(WicketFilter.java:486)
    at org.apache.wicket.protocol.http.WicketFilter.doFilter(WicketFilter.java:319)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter.doFilterInternal(OpenEntityManagerInViewFilter.java:113)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.__invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.NullPointerException
    at org.apache.wicket.extensions.markup.html.repeater.data.sort.OrderByLink$CssModifier.onComponentTag(OrderByLink.java:208)
    at org.apache.wicket.Component.renderComponentTag(Component.java:4270)
    at org.apache.wicket.Component.renderComponent(Component.java:2681)
    ... 125 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T08:33:41.447

错误在这里：

```
table.addTopToolbar(new HeadersToolbar(table, null)); 
```

您必须提供 DataProvider 的实例，而不是`null`在构造函数中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T08:34:04.157

好的，我明白了，感谢随附的 myproject.zip 代码。

```
table.addTopToolbar(new HeadersToolbar(table, null)); 
```

是导致问题的行，您必须将 ISortStateLocator 传递给`HeadersToolbar`该类。

# asp.net - 仅在实时服务器上出现“gdi+ 中发生一般错误”，一切都在 localhost 上运行

> ID：10425430
> 
> 赞同：0
> 
> 时间：2012-05-03T05:07:27.167
> 
> 标签：asp.net, image-processing, gdi+

我正在使用以下代码来调整和保存图像。请让我摆脱这个错误。我只在我的实时服务器上收到此错误，而它在本地主机上工作。

```
public void ResizeImage(Int32 height, Int32 width, Stream fromStream, String filename)
{
    var image = System.Drawing.Image.FromStream(fromStream);
    var newWidth = width;
    var newHeight = height;

    var thumbnailBitmap = new Bitmap(newWidth, newHeight);
    var thumbnailGraph = Graphics.FromImage(thumbnailBitmap);
    thumbnailGraph.CompositingQuality = CompositingQuality.HighQuality;

    thumbnailGraph.InterpolationMode = InterpolationMode.HighQualityBicubic;

    var imageRectangle = new Rectangle(0, 0, newWidth, newHeight);

    thumbnailGraph.DrawImage(image, imageRectangle);
    //thumbnailBitmap.Save(toStream, image.RawFormat);
    String path = Server.MapPath("~/signatures/" + filename);
    thumbnailBitmap.Save(path, System.Drawing.Imaging.ImageFormat.Jpeg);
    thumbnailGraph.Dispose();

    thumbnailBitmap.Dispose();
    image.Dispose();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T05:33:19.200

你试过谷歌吗？似乎它可能是由一些事情引起的。由于它只在服务器上崩溃，我的第一个猜测是 ASP.NET 在您保存到的文件夹中没有写权限。看这里：

[http://weblogs.asp.net/anasghanem/archive/2009/02/28/solving-quot-a-generic-error-occurred-in-gdi-quot-exception.aspx](http://weblogs.asp.net/anasghanem/archive/2009/02/28/solving-quot-a-generic-error-occurred-in-gdi-quot-exception.aspx)

# html - mailto X-Frame-Options 错误

> ID：10425435
> 
> 赞同：0
> 
> 时间：2012-05-03T05:08:16.480
> 
> 标签：html, mailto

单击 mailto 时出现以下错误：colorbox 中的链接。它的工作没有彩盒，但不幸的是我需要使用彩盒。

我试过 header('X-Frame-Options: GOFORIT'); 但它不起作用。并在控制台中显示以下错误消息。

```
 Refused to display document because display forbidden by X-Frame-Options. 
```

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T05:00:49.860

我从来没有搞乱过 X-Frame-Options（尽管我确实直接为编写关于点击劫持的书的人工作）。根据[Mozilla](https://developer.mozilla.org/en/The_X-FRAME-OPTIONS_response_header)，只有两个可接受的值：

*   否定
*   同源

这些是由 iframed 源服务器返回的，听起来你可以控制它。两者都是防御性的，而不是宽容的。

如果您完全关闭标题会发生什么？

此外，为了避免使用网络邮件客户端的用户（如我）可能不想离开颜色框或将网络邮件客户端绑定在 iframe 中，请尝试`target="_blank"`在链接上进行设置。也许转义 iframe 会缓解其他问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T04:49:25.577

一些网站禁止他们的页面显示在 iframe 中。如果这就是你遇到的情况，那么就没有什么可以做的了。但是，我不建议尝试对 mailto 链接进行颜色框，因为您无法控制访问者如何处理这些类型的链接。

# lwuit - （代号）Blackberry TextField 对焦时缺少边框

> ID：10425438
> 
> 赞同：0
> 
> 时间：2012-05-03T05:08:37.710
> 
> 标签：lwuit, lwuit-textfield, codenameone

我想问为什么`TextField`在黑莓（CodenameOne）中对焦的时候边框总是不见了？我正在使用本机主题，我尝试使用主题生成器来更改属性（`TextField`背景、边框等）但仍然丢失，有谁知道如何`TextField`在您输入内容时使边框仍然出现`TextField`？感谢您的帮助 PS：这不会发生在 LWUIT Thorsten Blackberry 1.4 上

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T08:41:35.323

如果我没记错的话，Thorsten 的端口并没有使用就地编辑进行输入。

在输入过程中使用原生文本字段边框，对原生输入的控制非常有限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T15:35:14.287

我在 BlackBerry 中使用 LWUIT 已有几年了，昨天我也遇到了同样的问题。我所做的：使用与 TextField 相关的内容制作我自己的 1.5 版，并关注 1.4 版（BlackBerryTouchImplementation.java 和 BlackBerryTouchSupport.java 以及一些小改动）。

我这样做是因为我还发现了 2 个问题： 1\. textField 忽略了 addDataChangeListener。2.有约束 PASSWORD | TextField中的NUMERIC，光标不会从第一个位置移动，我的意思是，您可以输入8位数字（qwer1234，因为它忽略了约束，输入模式，输入模式顺序）并且光标在“q”的左侧。

我知道 Shai Almog 可能不喜欢它，但让我告诉你，我已经在以下 BlackBerry 设备上进行了测试：9330、9550、9700，一切正常。

我已经为西班牙语开发了大约 4 个月的大型应用程序，质量团队没有发现大问题。

# asp.net - 如何将 Asp.net Web 项目转换为网站...？

> ID：10425439
> 
> 赞同：0
> 
> 时间：2012-05-03T05:08:47.397
> 
> 标签：asp.net

我在**asp.net web 项目**中有代码...我想将该代码转换为**asp.net 网站**..谁能帮我转换我的代码....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T07:08:20.370

*   在 VisualStudio 中将项目作为网站打开。

*   为它保存一个新的解决方案文件。

*   删除所有“*.designer”文件。

*   在每个用户界面文件（*.ASCX 和 *.ASPX）的 code-infront 中，将 Page 指令属性从“codebehind”更改为“codefile”。

# android - Android 代码可在 2.3 上运行，但不能在 4.0 上运行

> ID：10425440
> 
> 赞同：1
> 
> 时间：2012-05-03T05:09:07.633
> 
> 标签：android, version, gesture, gesture-recognition, onfling

我已经编写了以下为 API 版本 2.3.3 最低设计的代码，并且在为此设计的模拟器上运行良好。我刚刚尝试在 API 4.0 上测试相同的代码，而我为控制应用程序而实施的 onFling 手势不起作用。他们甚至似乎没有被调用。

这是代码。

```
package com.mystraldesign.memorable;

import java.io.IOException;
import android.app.Activity;
import android.content.Context;
import android.graphics.Typeface;
import android.os.Bundle;
import android.text.ClipboardManager;
import android.view.GestureDetector;
import android.view.GestureDetector.OnDoubleTapListener;
import android.view.MotionEvent;
import android.view.Window;
import android.widget.TextView;
import android.widget.Toast;
import com.mystraldesign.memorable.PassGen;

public class MemorableActivity extends Activity implements android.view.GestureDetector.OnGestureListener,OnDoubleTapListener  
{
    //Define text views
    private TextView textView1;
    private TextView textView2;
    private TextView textView3;
    private TextView textView4;

    //Previous password holder
    private String prevPass;

    //Gesture Detectors
    private GestureDetector gTap; 

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);

        gTap  = new GestureDetector(this,(android.view.GestureDetector.OnGestureListener) this);

        //Remove title bar
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.main);

        //Define textView
        textView1 = (TextView) findViewById(R.id.textView1);
        textView2 = (TextView) findViewById(R.id.textView2);
        textView3 = (TextView) findViewById(R.id.textView3);
        textView4 = (TextView) findViewById(R.id.textView4);

        //Load font file
        Typeface type = Typeface.createFromAsset(getAssets(),"fonts/optima.ttf"); 

        //Set various textViews to font
        textView1.setTypeface(type);
        textView2.setTypeface(type);
        textView3.setTypeface(type);
        textView4.setTypeface(type);

        prevPass = "Memorable";

    }

    //Password call
    public void newPass()
    {
        //Store Return
        String retn = "";
        PassGen passWord = new PassGen();

        //Generate password
        try 
        {
            retn = passWord.passwordGen(this);
        } 
        catch (IOException e) 
        {

            //Message about Error
            Context context = getApplicationContext();
            CharSequence text = "Ooops Something Went Wrong!";
            int duration = Toast.LENGTH_SHORT;

            //Display message
            Toast toast = Toast.makeText(context, text, duration);
            toast.show();

            textView1.setText("Memorable");

            e.printStackTrace();
        }

        //Update prevPass
        prevPass = textView1.getText().toString();

        textView1.setText(retn);
    }

    /*--------------------------------------*/
    /*Additional gesture code below. */
    /* */
    /*J. Krawczyk 3/5/12*/
    /*--------------------------------------*/

    public boolean onTouchEvent(MotionEvent me){ 
        this.gTap.onTouchEvent(me);
       return super.onTouchEvent(me); 
      }

    public boolean onDown(MotionEvent e) {

      return false;
    }

    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
          float velocityY) 
  {

    String test = textView4.getText().toString();
    if ((velocityX == 0) && (velocityY > 0))
    {

        //Call new password generation or generate random if set
        if(test.equals("Memorable"))
        {
            newPass();
        }
        else if(test.equals("Random"))
        {
            //create new password method
            PassGen pass = new PassGen();

            //Set password
            textView1.setText(pass.randomPassword());
        }
    }
    else if((velocityX == 0) && (velocityY < 0))
    {
        textView1.setText(prevPass);
    }
    else if((velocityY == 0) && (velocityX > 0))
    {

        if(test.equals("Memorable"))
        {
            textView4.setText("Random");
        }
        else if(test.equals("Random"))
        {
            textView4.setText("Memorable");
        }   
    }

    return false;
  }

    public void onLongPress(MotionEvent e) 
    {

    }

    public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX,
      float distanceY) {

     return false;
    }

    public void onShowPress(MotionEvent e) {

    }

    public boolean onSingleTapUp(MotionEvent e) {

     return false;
    }

    //Method to copy password - Depreciated
    public boolean onDoubleTap(MotionEvent e) {

     return false;
    }

    //Method to copy password
    public boolean onDoubleTapEvent(MotionEvent e) {

        //clipboard shite
        ClipboardManager clipboard = (ClipboardManager) getSystemService(CLIPBOARD_SERVICE); 
        clipboard.setText(textView1.getText());

        //Message about coping
        Context context = getApplicationContext();
        CharSequence text = "Password has been copied to clipboard.";
        int duration = Toast.LENGTH_SHORT;

        //Display message
        Toast toast = Toast.makeText(context, text, duration);
        toast.show();

      return false;
    }

    public boolean onSingleTapConfirmed(MotionEvent e) {

     return false;
    }

} 
```

控制台一直说安装失败，但它出现在模拟器上并运行。在实际的 4.0 设备上进行测试时也会发生同样的情况。

```
2012-05-03 05:57:06 - Emulator] 2012-05-03 05:57:06.471 emulator-arm[5445:1107] Warning once: This application, or a library it uses, is using NSQuickDrawView, which has been deprecated. Apps should cease use of QuickDraw and move to Quartz.
[2012-05-03 05:57:06 - Emulator] emulator: emulator window was out of view and was recentered
[2012-05-03 05:57:06 - Emulator] 
[2012-05-03 05:57:06 - Memorable] New emulator found: emulator-5554
[2012-05-03 05:57:06 - Memorable] Waiting for HOME ('android.process.acore') to be launched...
[2012-05-03 05:59:24 - Memorable] HOME is up on device 'emulator-5554'
[2012-05-03 05:59:24 - Memorable] Uploading Memorable.apk onto device 'emulator-5554'
[2012-05-03 05:59:26 - Memorable] Installing Memorable.apk...
[2012-05-03 06:01:34 - Memorable] Failed to install Memorable.apk on device 'emulator-5554!
[2012-05-03 06:01:34 - Memorable] (null)
[2012-05-03 06:01:34 - Memorable] Failed to install Memorable.apk on device 'emulator-5554': EOF
[2012-05-03 06:01:34 - Memorable] com.android.ddmlib.InstallException: EOF
[2012-05-03 06:01:34 - Memorable] Launch canceled! 
```

编辑：

它现在可以在所有 AVD (2.3.3 - 4.0) 上运行和安装，但手势仍然只适用于 2.3.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T05:51:39.187

我有几个建议给你，

1）你首先打开你的avd并等到它完全加载然后运行你的apk。

2）改变你`setContentView(tv);`的`this.setContentView(tv);`

3）关闭/删除您的其他旧 AVD

4）如果你有设备，测试它..

* * *

引用[此](http://code.google.com/p/android/issues/detail?id=724)和[此的链接](https://stackoverflow.com/questions/2763395/issue-with-hello-android-tutorial)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T07:01:43.140

手势无法识别的错误似乎是由于我使用速度来确定运动，但它在 Android 4.0 上得到了更好的控制，因此从未达到 velocityX = 0 条件。

# c++ - 使用一组规则对数组进行混洗并从函数返回值

> ID：10425443
> 
> 赞同：0
> 
> 时间：2012-05-03T05:09:20.780
> 
> 标签：c++, arrays

我对 C++ 比较陌生，今年才开始学习。我无法编写一个小程序来接收文本文档并将其存储在数组中。然后取该数组并以某种方式随机化这些值。这是一个排班计划，将骑手和马匹安排到合适的位置。

我在这个函数（gen()）中尝试的是将 entry[num] 复制到 entry2[num2] 。其中 num 是条目的数量，num2 是随机生成的 rand() 数。然后我希望它检查新条目是否比旧条目至少多 15 个位置（在这种情况下.. 所以骑马的人可以在他的下一个事件之前休息一下）

所以你可以猜到..这个应用程序不起作用，我猜有一个更简单的方法？我怎样才能将变量发送到这个数组中，我怎样才能让这个函数将数组返回到我的 main .. 我通过指针猜测？

我在下面附上了整个代码。

```
/*   ________________________________________________________________________________
*    |   TITLE:     main.cpp                                                        |
*    |   AUTHOR:    Samuel Abbott (samuel.d.abbott@gmx.com)                         |
*    |   PURPOSE:   to take camp draft data in, randomise it with certain values,   |
*    |              and output the new roster as a text document                    |
*    |   DATE:      may 1, 2012                                                     |
*    |   LAST EDIT: may 3,2012                                                      |
*    |______________________________________________________________________________|
*/

#include <iostream>
#include <string>
#include <stdlib.h> //random number
#include <time.h> //random number
#include <fstream> //used for input / output of external files

using namespace std;
/*
*   TITLE: gen
*   PURPOSE: to randomise the entries , check to see if they are more then 15 units  apart, and return a pointer to the randomised array
*   string entry[] holds original values
*   int num [] holds number of entries
*/
sting gen(string entry[], int num)
{
   int count = 0;
   string entry2[num]; //randomised array

   /* initialize random seed: */
   srand(time(NULL));

   for (count =0; count < num)
   {
      num2 = rand() % num; //generate random number
      entry[num] = entry2[num2]; //copy number from array to a random position in the next array

      /* a series of if checks to make sure the entry is no less then 15 positions from the previous entry */
      if (entry2[num2]=entry[num-15])
      {
         num2 = rand() % num; //generate random number
         entry[num] = entry2[num2]; //copy number from array to a random position in the next array
      }

      else if (entry2[num2]=entry[num-14])
      {
         num2 = rand() % num; //generate random number
         entry[num] = entry2[num2]; //copy number from array to a random position in the next array
      }

      else if (entry2[num2]=entry[num-13])
      {
         num2 = rand() % num; //generate random number
         entry[num] = entry2[num2]; //copy number from array to a random position in the next array
      }

      else if (entry2[num2]=entry[num-12])
      {
         num2 = rand() % num; //generate random number
         entry[num] = entry2[num2]; //copy number from array to a random position in the next array
      }

      else if (entry2[num2]=entry[num-11])
      {
         num2 = rand() % num; //generate random number
         entry[num] = entry2[num2]; //copy number from array to a random position in the next array
      }

      else if (entry2[num2]=entry[num-10])
      {
         num2 = rand() % num; //generate random number
         entry[num] = entry2[num2]; //copy number from array to a random position in the next array
      }

      else if (entry2[num2]=entry[num-9])
      {
         num2 = rand() % num; //generate random number
         entry[num] = entry2[num2]; //copy number from array to a random position in the next array
      }

      else if (entry2[num2]=entry[num-8])
      {
         num2 = rand() % num; //generate random number
         entry[num] = entry2[num2]; //copy number from array to a random position in the next array
      }

      else if (entry2[num2]=entry[num-7])
      {
         num2 = rand() % num; //generate random number
         entry[num] = entry2[num2]; //copy number from array to a random position in the next array
      }

      else if (entry2[num2]=entry[num-6])
      {
         num2 = rand() % num; //generate random number
         entry[num] = entry2[num2]; //copy number from array to a random position in the next array
      }

      else if (entry2[num2]=entry[num-5])
      {
         num2 = rand() % num; //generate random number
         entry[num] = entry2[num2]; //copy number from array to a random position in the next array
      }

      else if (entry2[num2]=entry[num-4])
      {
         num2 = rand() % num; //generate random number
         entry[num] = entry2[num2]; //copy number from array to a random position in the next array
      }

      else if (entry2[num2]=entry[num-3])
      {
         num2 = rand() % num; //generate random number
         entry[num] = entry2[num2]; //copy number from array to a random position in the next array
      }

      else if (entry2[num2]=entry[num-2])
      {
         num2 = rand() % num; //generate random number
         entry[num] = entry2[num2]; //copy number from array to a random position in the next array
      }

      else if (entry2[num2]=entry[num-1])
      {
         num2 = rand() % num; //generate random number
         entry[num] = entry2[num2]; //copy number from array to a random position in the next array
      }

      else
      {
         entry[num] = entry2[num2];
      }
   }

   string pointer* = entry2[]
   return pointer
}

/*
*   Title : Loading
*   Purpose: This function generates a loading animation. in other words. just a fancy     graphic.
*   HAS NO LOADING PURPOSE
*/

void loading()
{
   /* Declare loading variable, this variable is just the screen printout */
   string loading = "...";
   int time = 0;
   int loadtime = 10;

   /* print out loading animation */
   while (time != loadtime)
   {
      cout << loading;
      time++;
   }

}
void loading();

/*
*   Title: Main
*   Purpose: this is the main function for the randomisation program
*/
int main()
{
//declare all variables
   string fname = "";
   int count;

   string line;
   ifstream inputfile;
   char c;
   int num=0;

   /* introduction */
   cout << "Roster Randomisation Generator" << endl;
   /* Get input for roster name */
   cout << "Enter a name for the roster, such as 13022012coolah:"<<endl;
   cin>> fname;
   /* Begin generating roster */
   cout << "Roster Generation in progress." << endl;
   loading();
   /* get amount of lines in text file .. used to determine how many entries there are to     avoid printing blank spaces*/

   inputfile.open("output.txt");

   while (inputfile.good())
   {
      c = inputfile.get();

      if (c=='\n')
      {
         num++;
      }
   }

   inputfile.close();
   cout<<"Number of Entries counted is: "<<num<<endl;

   string entry[num];

   cout << "Grabbing entries from entry file..."<<endl;
   /* open text file*/
   inputfile.open("output.txt");

   /* read all data into the array entry[] */
   for (count = 0; count < num; count++)
   {
      getline(inputfile,line);  //Gets a single line from example.txt
      entry[count]=line;

      // inputfile >> entry[count];
   }

   inputfile.close();
   cout <<"Found the following entries: " <<endl;

   /* output captured entries*/
   for (count =0; count < num; count++)
   {
      cout <<entry[count] <<endl;
   }

   return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T05:18:21.487

两个主要问题立即出现。

首先，在您的 gen 函数的第二行中，您创建一个具有参数大小的数组。

`string entry2[num];`

您不能在 C++ 中这样做，必须以恒定大小创建正常的“自动”/堆栈数组。

相反，您可能应该查看 std::vector 以存储可以具有可变大小的数组。

* * *

其次，你的 if、else if 语句的巨大链似乎没有必要，更不用说有问题了。

当新`num2`的也出错时会发生什么？

您应该考虑使用 for 循环来用更少的代码解决这个问题。

* * *

第三个问题是您在 if、else if 语句的巨大链中使用了错误的运算符。

您需要`==` 用于比较。当你使用 assignment( `=`) 时，它可能看起来有效，但它实际上总是返回 true。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T05:14:01.137

最简单的方法可能是按原样复制数组，然后使用`std::random_shuffle`随机复制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T05:35:12.743

首先，您是/想要返回一个字符串*，但您的函数定义是字符串 gen(...)。如果你把它改成 string* gen(...) 就好了。

其次，你正在做一个作业 if(entry2[num2] = entry[num-12])。但我想你想做一个比较。你用 if(entry2[num2] == entry[num-12]) 来做这个。使用双 = 进行比较，使用单 = 进行分配。

第三，你做了很多复制和粘贴，这可以封装为循环。

```
for(int x = 15; x > 0; x--) 
{
    if(entry2[num2] == entry[num - x] 
    {
        num2 = rand() % num;
        entry[num] = entry[num - x];
        break; //maybe ?!
    }
} 
```

第四，为什么在检查值是否相等之后还要创建一个新数字？也许你应该保留你的 num2 而不是在比较之后出错。

第五，如果我没看错，你永远不会增加计数。这将导致无限循环。

第六，您应该使用 new 语句而不是 string[num] 这在 C++ 中不起作用。

# c++ - 首次加载后 QWebPage 无法正常工作

> ID：10425444
> 
> 赞同：1
> 
> 时间：2012-05-03T05:09:26.947
> 
> 标签：c++, qt, qwebkit, qwebpage, qtnetwork

我正在编写一个使用 QWebPage 抓取一些网页的应用程序。当响应是 Http 重定向（例如 302、303 等）时，我遇到了一些麻烦。QWebPage 根本不遵循重定向。

为了解决这个问题，我已经连接到页面的网络管理器的完成信号以捕获响应的状态并加载任何重定向，但是，当我在 QWebPage 上第二次调用*load*方法时，它只是将 url 设置为空白并且不发出任何请求。

以下是一些相关的代码：

```
connect(page->networkAccessManager(), SIGNAL(finished(QNetworkReply*)), SLOT(gotReply(QNetworkReply*)));
connect(page, SIGNAL(loadFinished(bool)), SLOT(doneLoading(bool)));
page->mainFrame()->load(url); 
```

我的插槽：

```
void Snapshot::gotReply(QNetworkReply *reply)
{
    if(reply->header(QNetworkRequest::ContentTypeHeader).toString().contains(QString("text/html")))
    {
        qDebug() << "Got reply " + reply->url().toString() + " - " + reply->attribute(QNetworkRequest::HttpStatusCodeAttribute).toString() + " - " + reply->header(QNetworkRequest::ContentTypeHeader).toString();
    }

    if(!statusCode && reply->header(QNetworkRequest::ContentTypeHeader).toString().contains(QString("text/html"))) {
        statusCode = reply->attribute(QNetworkRequest::HttpStatusCodeAttribute).toInt();
        redirectUrl = QUrl(reply->header(QNetworkRequest::LocationHeader).toUrl());
    }
}

void Snapshot::doneLoading(bool)
{
    // A reasonable waiting time for any script to execute
    timer->start(3000);
}

void Snapshot::doneWaiting()
{
    if( statusCode != 0 &&
        statusCode != 301 &&
        statusCode != 302 &&
        statusCode != 303
       ) {
        qDebug() << page->mainFrame()->url().toString();
        qDebug() << page->mainFrame()->toHtml();

        QImage image(page->viewportSize(), QImage::Format_ARGB32);
        QPainter painter(&image);

        page->mainFrame()->render(&painter);

        painter.end();

        image.save(*outputFilename);

        delete outputFilename;
        QApplication::quit();
    }
    else if(statusCode != 0) {
        statusCode = 0;
        qDebug() << "Redirecting to: " + redirectUrl.toString();
        if(page->mainFrame()->url().toString().isEmpty()) {
            qDebug() << "about:blank";
            page->mainFrame()->load(this->redirectUrl); // No network activity after this
            qDebug() << "Loading";
        }
    }

    // This should ensure that the program never hangs
    if(statusCode == 0) {
        if(tries > 5) {
            qDebug() << "Giving up.";
            QApplication::quit();
        }
        tries++;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T06:01:18.157

问题是我正在测试的页面重定向到 https 并且有一个自签名证书。

解决方案是让 QNetworkReply 忽略 ssl 错误：

```
void Snapshot::sslErrors(QNetworkReply *reply, const QList<QSslError> &errors)
{
    reply->ignoreSslErrors();
} 
```

# java - 如何从输入中读取一系列数字并将它们存储到数组中？

> ID：10425445
> 
> 赞同：0
> 
> 时间：2012-05-03T05:09:36.787
> 
> 标签：java, arrays

所以我整天都在尝试做这个作业，但我仍然不知道如何编写一个方法来读取一行数字并将它们保存到一个数组中。这是我尝试过但不起作用的方法

```
public static int [] readData()

    throws java.io.IOException
    {

    int [] rArray = new int[15];

    InputStreamReader isr = new InputStreamReader(System.in);
    BufferedReader br = new BufferedReader(isr);

    String data = br.readLine();
    StringTokenizer str = new StringTokenizer(data);

    String d = str.nextToken();
    int num = Integer.parseInt(d);

    for(int i = 0; i < num; i++){
    rArray[i] = num;
    }

    return rArray;

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T05:14:07.273

由于这是家庭作业……这里有一个（大）提示。

`parseInt`查看您的代码，并计算出单行输入调用了多少次。你得到“一次”的答案吗？如果没有，请再次阅读代码！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T05:15:15.460

您使用 nextToken() 只能获得一个令牌。但是还有更多的令牌。所以你需要迭代并接受它。但请确保它不会出现 ArrayIndexOutOfBounds，因为您只声明了 15 个整数的数组。请更改代码如下。

```
int index = 0;
while(str.hasMoreTokens()){
String d = str.nextToken();
    int num = Integer.parseInt(d);
    rArray[index] = num;
    inde++;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T12:26:50.683

`String array`你可以使用和`Split()`方法来实现它`readLine()`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T05:17:23.683

您可以知道在`nextToken`生成异常并构建数组之前可以调用标记器的方法的次数。

```
StringTokenizer str = new StringTokenizer(data);
int[] rArray = new int[str.countTokens()]; 
```

祝你好运！

# javascript - 需要有关自定义 textarea 最大长度功能的建议

> ID：10425456
> 
> 赞同：0
> 
> 时间：2012-05-03T05:10:37.087
> 
> 标签：javascript, jquery, jsf-2

我正在使用一个限制 textArea 长度的函数。虽然函数表现良好，但我想问一下我是否以正确的方式调用函数？

这里是

```
<h:inputTextarea id="questionInputTextArea"
                 value="#{faqAddUpdate.question}"
                 cols="50"
                 rows="3"
                 disabled="#{faqAddUpdate.buttonState}"
                 onkeypress="limitTextArea(this, 400)"
                 style="overflow: auto;">

   <f:validateLength maximum="200" />

</h:inputTextarea> 
```

这是功能

```
function limitTextArea(element, limit) {

    var $textArea = $(element);     //casting to jQuery so we can use jQuery functions on it
    ($textArea).keypress(function(event){

        if (event.which < 0x20) {

            // e.which < 0x20, then it's not a printable character
            // e.which === 0 - Not a character
            return;     // Do nothing

        }

        if ($textArea.val().length == limit) {
            event.preventDefault();
        } else if ($textArea.val().length > limit) {

            // Maximum exceeded
            $textArea.val() = $textArea.val().substr(0, limit);
        }

    }); //end of keypress

} //end of function() 
```

让我感到困惑的是，我在我的 jsf 代码中使用**onkeypress**，在函数中我也说**($textArea).keypress(function(event)**。我该如何优化这个函数？或者我做得对?

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T05:54:05.197

每次按下键时，您都会附加一个新的按键事件侦听器。这是没有意义的。您需要*直接*`onkeypress`在属性中指定它，*或者*在文档准备好后通过 jQuery 方式附加它。此外，对函数的赋值`val()`毫无意义，您需要将新值作为其参数传递。这不可能是“表现良好”。最后，我还建议使用`keyup`而不是，`keypress`以便仅在更新 textarea 的值*之后*调用该函数，这会导致限制函数的行为更加理智。这样您也不需要检查不可打印的字符范围。

总而言之，它看起来像这样：

```
function limitTextArea(element, limit) {
    var $textArea = $(element);

    if ($textArea.val().length > limit) {
        $textArea.val($textArea.val().substr(0, limit));
    }
} 
```

注册为

```
<h:inputTextarea ... onkeyup="limitTextArea(this, 400)" /> 
```

* * *

如果你真的需要通过 jQuery`keyup()`函数附加它，那么你必须自己在函数中指定限制。

例如

```
<h:inputTextarea ... styleClass="limit" /> 
```

和

```
$("textarea.limit").keyup(function() {
    var $textarea = $(this);
    var limit = 400;

    if ($textarea.val().length > limit) {
        $textarea.val($textarea.val().substr(0, limit));
    }
}); 
```

*（您在`$(document).ready(function() {...})`or期间执行`$(function() {...});`）*

* * *

或者您可以将限制指定为类名的一部分并相应地提取它：

```
<h:inputTextarea ... styleClass="limit_400" /> 
```

像这样的东西

```
$("textarea[class*=limit_]").each(function(i, textarea) {
    var classNames = textarea.className.split(' ');
    var limit = 0;

    for (var i = 0; i < classNames.length; i++) {
        if (classNames[i].indexOf("limit_") == 0) {
            limit = parseInt(classNames[i].split("_")[1]);
            break;
        }
    }

    if (limit) {
        $(textarea).keyup(function() {
            var $textarea = $(this);

            if ($textarea.val().length > limit) {
                $textarea.val($textarea.val().substr(0, limit));
            }
        });
    }
}); 
```

* * *

顺便说一句，限制与您在服务器端验证器`400`中的限制不匹配。`<f:validateLength>`

# matlab - 二维平面拟合，ransac，matlab，链接

> ID：10425457
> 
> 赞同：4
> 
> 时间：2012-05-03T05:10:43.923
> 
> 标签：matlab

我有一组 3D 点。

```
Points_[x,y,z]% n*3 where n is number of points 
```

我想安装一架飞机（它是地板）并检查飞机的高度。我认为这是二维问题。

```
z=bo+b1x+b2y; 
```

*我找不到 2D ransac 平面拟合的链接*。有人可以给这个链接或文件。

其次，一些软件（商业）给出了平面的高度值。它是平均值或一些复杂的值。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T11:05:38.317

如果您形成以下“A”矩阵

```
A = [ones(numel(Points_X),1), Points_X(:), Points_Y(:)]; 
```

这`(:)`是给你列向量的地方（以防它们不是开始的）

然后你可以把你的方程写成经典的线性方程组：

```
A*b = Points_Z(:); 
```

其中 b = [b0; b1; b2] - 您尝试确定的参数的列向量。这有规范的解决方案

```
b=A\Points_Z(:) 
```

或者 `b=pinv(A)*Points_Z(:)`

请参阅有关 mldivide 和 pinv 的帮助。

你必须有 3 个或更多的点，它们并不都在一条线上。对于像这样的超定系统， pinv 和 \ 基本上会产生相同的结果。如果它们几乎共线，则使用 .

b中的3个参数基本上是平面在原点以上的高度，x斜率，平面的y斜率。如果您考虑一下，飞机的“高度”就是您的 z 项。您可以谈论高于某个点的高度（例如原点）。现在，如果你想在采样点的质心高度，你会做

```
z_mean = [1 mean(Points_X(:) ) mean( Points_Y(:) )] * b 
```

这可能只相当于`mean( Points_Z(:) )`. 要使此定义有意义，您必须确保在感兴趣区域上具有均匀间隔的网格。

可能还有其他定义，具体取决于您的应用程序。例如，如果您试图找到房间中心的高度，沿墙壁和内部采样点，那么用中值替换平均值可能更合适。

# c - C中的清屏

> ID：10425465
> 
> 赞同：2
> 
> 时间：2012-05-03T05:12:00.890
> 
> 标签：c, visual-studio

我是编程新手，所以我确实遇到了一些基本问题。在我正在构建的程序中，我需要在某个点清除屏幕，但它不接受`clrscr();`或`system("cls");`有哪些其他选项可用？我已经包括`stdio.h`& `conio.h`。如果有帮助，我使用的编译器是 Visual Studio 2010。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T05:18:29.287

很久以前，Visual Studio 删除了“常见”conio.h 函数，例如清屏。

如果你想使用 system() 在 stdlib.h 中。

但是，如果您想在 Windows 上进行严格的终端输出，请查看以下内容：http: [//www.projectpluto.com/win32a.htm](http://www.projectpluto.com/win32a.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T05:23:16.857

您应该使用 stdlib.h 库文件来获取清除屏幕命令。在 Visual Studio 中清除 c/c++ 屏幕的命令是

```
#include <stdlib.h>

system ("cls"); 
```

# android - 所有布局android的通用菜单

> ID：10425471
> 
> 赞同：0
> 
> 时间：2012-05-03T05:12:58.337
> 
> 标签：android, menu

我有一个照片共享应用程序，在所有布局中显示底部菜单显示底部菜单栏的键 android 谢谢

```
menu.xml
<?xml version="1.0" encoding="utf-8"?>

<menu xmlns:android="http://schemas.android.com/apk/res/android">

<item android:id="@+id/menu_bookmark"
      android:icon="@drawable/icon_bookmark"
      android:title="Bookmark" />

<item android:id="@+id/menu_share"
      android:icon="@drawable/icon_share"
      android:title="Share" />

<item android:id="@+id/menu_delete"
      android:icon="@drawable/icon_delete"
      android:title="Delete" /> 

</menu>

activity.java

@Override
public boolean onCreateOptionsMenu(Menu menu)
{
    MenuInflater menuInflater = getMenuInflater();
    menuInflater.inflate(R.layout.menu, menu);
    return true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T05:16:26.910

而不是创建菜单，您必须为您的菜单创建一个**通用的自定义 xml 布局**，并将其包含在您所有活动的布局 xml 文件中。为此，您可以使用Android XML Layout`<merge>`的`<include>`标记。

查看[布局技巧：合并布局](http://developer.android.com/resources/articles/layout-tricks-merge.html)

[布局技巧：创建可重用的 UI 组件](http://developer.android.com/resources/articles/layout-tricks-reuse.html)

**更新：**

现在关于您的问题，要在不按菜单按钮的情况下打开菜单，您可以将此行放在您`onCreate()`的活动中。

```
openOptionsMenu(); 
```

并关闭：

```
closeOptionsMenu(); 
```

这两种方法都用于 Activity 类，因此，如果您在 Activity 之外使用它，则使用 Activity 的上下文并使用此方法。

# excel - 使用 apache POI 读取单元格样式以及数据 Excel 表读取

> ID：10425473
> 
> 赞同：0
> 
> 时间：2012-05-03T05:13:04.853
> 
> 标签：excel, grails, import, apache-poi

伙计们，我可以使用 grails 中的 apache POI 读取 excel 表，我将单元格值插入到不同的 mysql 表中，我的问题是，我无法获得单元格样式，如粗体或斜体等数据。通常文本区域在插入数据库时​​会自动给出文本的样式。我需要从每个单元格中插入数据及其样式，请帮助我解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T05:20:07.973

[http://poi.apache.org/apidocs/org/apache/poi/hssf/usermodel/HSSFCell.html#getCellStyle()](http://poi.apache.org/apidocs/org/apache/poi/hssf/usermodel/HSSFCell.html#getCellStyle%28%29)

这应该从单元格中获取 CellStyle，然后您可以使用它来获取所需的信息。

# android - Listview 自定义 ListDivider

> ID：10425475
> 
> 赞同：0
> 
> 时间：2012-05-03T05:13:12.827
> 
> 标签：android, android-layout

我实际上是通过填充数据库中的项目来创建 ListView。
当到达列表视图的末尾时，我会填充更多项目。现在，我想要基于从数据库返回的值的 ListView 的分隔符。如果数据库的两个连续值相同，我希望它们用细线分隔，如果不是粗线。

我尝试像这样通过适配器设置它们

```
if (convertView == null) {

            holder = new ViewHolder();

            if (eventSource.get(position).equalsIgnoreCase("asdsadas")
                    && eventSource.get(position + 1).equalsIgnoreCase(
                            "fdgdfgfd")
                    || eventSource.get(position).equalsIgnoreCase(
                            "dfgdfgdfg")
                    && eventSource.get(position + 1).equalsIgnoreCase(
                            "jgghjhhgg")) {
                convertView = mInflater.inflate(R.layout.list_adapter, null);
            } else {
                convertView = mInflater.inflate(R.layout.list_adapterthinline,
                        null);
            } 
```

我正在根据情况膨胀一个新的布局。它第一次工作，但在我向下滚动并出现视图更改后。一切都搞混了。

我也尝试在 Activity 中设置分隔线高度，就像这样，我也在 onCreate 和 onScroll 侦听器中调用了“setdivider”方法。

```
public void setdivider() {
        // TODO Auto-generated method stub
        for (int i = 0; i < listSource.size() - 1; i++) {

            if (!listSource.get(i).equalsIgnoreCase(
                    listSource.get(i + 1))) {
                Log.v("inside not equals", "become smalllllllllllllllll");
                list.setDivider(red);
                list.setDividerHeight(5);
            } else if (listSource.get(i).equalsIgnoreCase(
                    listSource.get(i + 1))) {
                Log.v("inside equals", "become bigggggggggggg");
                list.setDivider(blue);
                list.setDividerHeight(10);
            }
        }
    } 
```

但是这里即使两个日志注释都显示在 LogCat 上，但列表中只设置了一个分隔符。
请告诉我哪里出错了，或者建议一些其他方法，如果有的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T06:52:26.570

`ListView`缓存视图，因此当您滚动时，视图会被重用。这就是为什么`convertView`不总是为空的。但是，由于您有两种不同的视图，因此您需要将其告知给您，`ListView`以便`convertView`您返回的是您想要的那种。您可以通过实施`Adapter.getItemViewType()`and来做到这一点`Adapter.getViewTypeCount()`。

在您的示例中，您将`getViewTypeCount`返回 2，`getItemViewType`如果是分隔符则返回 1，否则返回 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T05:19:01.197

将布局 R.layout.list_adapter 和 R.layout.list_adapterthinline 合并为一个布局。

并默认设置细线消失。并在需要时将其设置为可见

.....你的布局在这里。

当你需要线路时。

```
convertView.findViewById(R.id.thin_line).setVisible(View.Visible) 
```

当你不需要它时。

convertView.findViewById(R.id.thin_line).setVisible(View.Gone)

# java - JAXB 解组异常找不到媒体类型的 JAXBContextFinder：text/html;charset="UTF-8"

> ID：10425477
> 
> 赞同：2
> 
> 时间：2012-05-03T05:13:26.197
> 
> 标签：java, xml, jax-ws

我正在开发一个遗留应用程序，但在尝试解析 xml 提要时遇到异常。基于异常，我认为它是一个缺少的 jar（我们使用的是 maven，但有一些依赖问题）。谷歌没有发现任何有用的东西。这是堆栈跟踪：

```
org.jboss.resteasy.plugins.providers.jaxb.JAXBUnmarshalException: Could not find JAXBContextFinder for media type: text/html;charset="UTF-8"
    at org.jboss.resteasy.plugins.providers.jaxb.AbstractJAXBProvider.findJAXBContext(AbstractJAXBProvider.java:49)
    at org.jboss.resteasy.plugins.providers.jaxb.AbstractJAXBProvider.readFrom(AbstractJAXBProvider.java:95)
    at org.jboss.resteasy.core.interception.MessageBodyReaderContextImpl.proceed(MessageBodyReaderContextImpl.java:105)
    at org.jboss.resteasy.plugins.interceptors.encoding.GZIPDecodingInterceptor.read(GZIPDecodingInterceptor.java:61)
    at org.jboss.resteasy.core.interception.MessageBodyReaderContextImpl.proceed(MessageBodyReaderContextImpl.java:108)
    at org.jboss.resteasy.client.core.BaseClientResponse.readFrom(BaseClientResponse.java:398)
    at org.jboss.resteasy.client.core.BaseClientResponse.getEntity(BaseClientResponse.java:346)
    at org.jboss.resteasy.client.core.BaseClientResponse.getEntity(BaseClientResponse.java:319)
    at org.jboss.resteasy.client.core.extractors.BodyEntityExtractor.extractEntity(BodyEntityExtractor.java:54)
    at org.jboss.resteasy.client.core.ClientInvoker.invoke(ClientInvoker.java:114)
    at org.jboss.resteasy.client.core.ClientProxy.invoke(ClientProxy.java:72) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T05:52:47.740

确保您的 http 用户代理请求的不是 text/html。例如应用程序/json。例如通过 ext.ajax.request 使用

```
Ext.Ajax.request({headers: {"Accept": "application/json"},...) 
```

原因：该方法返回一个对象。如果 JAX-RS 服务器需要返回 text/html，那么就需要某种方法来做到这一点。大多数 JAX-RS 服务器可能没有默认的 object-to-html MessageBodyWriter。

# forms - 提交表单时将数据保存到localStorage

> ID：10425482
> 
> 赞同：2
> 
> 时间：2012-05-03T05:14:06.527
> 
> 标签：forms, submit, local-storage

是否可以将数据从表单保存到 localStorage 并提交表单？我需要提交表单，但将值保存到 localStorage 也很重要。我怎样才能做到这一点？

这是我为表单和 localStorage 提供的代码，但这不会提交表单。它只是保存值。

```
<label for="server"> Server: </label> 
<input type='text' name="server" id="saveServer"/> 
<button onclick="save_data()" type="button" value="Save" id="Save" data-theme="a">Save</button> 
<script> function save_data()
{ var input = document.getElementById("saveServer");
localStorage.setItem("server", input.value); 
var storedValue = localStorage.getItem("server"); } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T05:30:39.797

当然可以，但是您可能希望在提交表单时稍微改变一下调用方法`save_data` *：*

```
<form onsubmit="save_data()">
  <!-- The rest of your form goes here -->
  <button type="button" value="Save" id="Save" data-theme="a">Save</button> 
</form>

<script> 
function save_data() {
  var input = document.getElementById("saveServer");
  localStorage.setItem("server", input.value); 
  var storedValue = localStorage.getItem("server"); 
  // etc..
}
</script> 
```

# c# - WCF 异常：无法加载配置中指定的 X.509 证书标识，如何解决？

> ID：10425487
> 
> 赞同：2
> 
> 时间：2012-05-03T05:14:48.157
> 
> 标签：c#, wcf, wcf-security, endpoint

我有一个带有两个接口的 WCF 服务库：FileManager 和 TaskManager。

我想将这些接口的两个端点组合成一个服务。

当我在一个接口上使用一个端点时它工作得很好`IFileManager`，然后在我制作另一个接口`ITaskManager`并添加一个新端点后，服务停止工作。它让我在 TaskManager 端点上停止，并在 FileManager 端点上出现错误：

`System.InvalidOperationException: Cannot load the X.509 certificate identity specified in the configuration.`

如何解决？

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
<system.web>
  <compilation debug="true" />
</system.web>
<!-- When deploying the service library project, the content of the config file must be added to the host's app.config file. System.Configuration does not support config files for libraries. -->
 <system.serviceModel>
   <diagnostics wmiProviderEnabled="false" />

   <bindings>
  <netTcpBinding>
    <binding name="TcpBindingRule" maxBufferPoolSize="2097152" maxBufferSize="2097152"
      maxReceivedMessageSize="2097152" />
  </netTcpBinding>
</bindings>

<services>
  <service behaviorConfiguration="Service1Behavior" name="WcfServiceLibrary1.FileManagerService">
    <clear />
    <endpoint address="FileManagerEndpoint" binding="netTcpBinding"
      bindingConfiguration="TcpBindingRule" name="FileManagerEndpoint"
      contract="WcfServiceLibrary1.IFileManager" listenUriMode="Explicit">
      <identity>
        <dns value="" />
        <certificateReference x509FindType="FindBySubjectDistinguishedName" />
      </identity>
    </endpoint>
    <endpoint address="mex" binding="mexTcpBinding" contract="IMetadataExchange"
      listenUriMode="Explicit">
      <identity>
        <certificateReference storeName="My" storeLocation="LocalMachine"
          x509FindType="FindBySubjectDistinguishedName" />
      </identity>
    </endpoint>
    <endpoint address="TaskManagerEndpoint" binding="netTcpBinding"
      bindingConfiguration="" name="TaskManagerEndpoint" contract="WcfServiceLibrary1.ITaskManager">
      <identity>
        <dns value="" />
      </identity>
    </endpoint>
    <host>
      <baseAddresses>
        <add baseAddress="net.tcp://Markor:1991/filemanager" />
      </baseAddresses>
    </host>
  </service>
</services>

<behaviors>
  <serviceBehaviors>
    <behavior name="Service1Behavior">
      <serviceMetadata httpGetEnabled="false" />
      <serviceDebug includeExceptionDetailInFaults="false" />
    </behavior>
  </serviceBehaviors>
</behaviors>

</system.serviceModel>
</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T05:35:08.387

看起来您将身份置于错误的端点下。将其移动到端点地址 =“TaskManagerEndpoint”元素下，而不是在 mex 下。

```
 <endpoint address="TaskManagerEndpoint" binding="netTcpBinding"
      bindingConfiguration="" name="TaskManagerEndpoint" contract="WcfServiceLibrary1.ITaskManager">
      <identity>
        <dns value="" />
        <certificateReference storeName="My" storeLocation="LocalMachine" x509FindType="FindBySubjectDistinguishedName" />
      </identity>
    </endpoint> 
```

# java - 为 Dictionary 应用程序创建数据库

> ID：10425494
> 
> 赞同：-1
> 
> 时间：2012-05-03T05:15:27.727
> 
> 标签：java, android

我开始学习开发一个android应用程序。我想在android中开发一个母语词典。我的问题是如何创建一个可以存储词汇（文本）、音频（发音）以及图片的数据库？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T05:18:55.410

为避免内存问题，您可以将音频和图像文件存储在 SD 卡中，并将文件的名称保存在数据库中。当您需要这些文件时，只需从数据库中获取详细信息并从 SD 卡中播放/显示。据我所知，这是最好的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T05:29:36.140

普通的 SQLite 数据库足以让您的应用程序存储音频、图片等内容。请注意，如果您要创建原生应用程序，最好使用 SD 卡存储图像和音频文件，这样您就可以根据需要检索文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T05:37:50.510

SQLite 将是一个合理的解决方案。

如果您需要连接到网络数据库，我建议在托管 MySQL 数据库的服务器上使用 PHP 脚本。

以下是 SQLite 数据库外观的一些示例代码：

```
public class DatabaseHandler extends SQLiteOpenHelper {

    // All Static variables
    // Database Version
    private static final int DATABASE_VERSION = 1;

    // Database Name
    private static final String DATABASE_NAME = "android_api";

    // Login table name
    private static final String TABLE_LOGIN = "login";

    // Login Table Columns names
    private static final String KEY_ID = "id";
    private static final String KEY_NAME = "name";
    public static final String KEY_EMAIL = "email";
    private static final String KEY_UID = "uid";
    private static final String KEY_CREATED_AT = "created_at";

    public DatabaseHandler(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    // Creating Tables
    @Override
    public void onCreate(SQLiteDatabase db) {
        String CREATE_LOGIN_TABLE = "CREATE TABLE " + TABLE_LOGIN + "("
                + KEY_ID + " INTEGER PRIMARY KEY,"
                + KEY_NAME + " TEXT,"
                + KEY_EMAIL + " TEXT UNIQUE,"
                + KEY_UID + " TEXT,"
                + KEY_CREATED_AT + " TEXT" + ")";
        db.execSQL(CREATE_LOGIN_TABLE);
    }

    // Upgrading database
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // Drop older table if existed
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_LOGIN);

        // Create tables again
        onCreate(db);
    }

    /**
     * Storing user details in database
     * */
    public void addUser(String name, String email, String uid, String created_at) {
        SQLiteDatabase db = this.getWritableDatabase();

        ContentValues values = new ContentValues();
        values.put(KEY_NAME, name); // Name
        values.put(KEY_EMAIL, email); // Email
        values.put(KEY_UID, uid); // Email
        values.put(KEY_CREATED_AT, created_at); // Created At

        // Inserting Row
        db.insert(TABLE_LOGIN, null, values);
        db.close(); // Closing database connection
    }

    public void addUser(String email) {
        SQLiteDatabase db = this.getWritableDatabase();

        ContentValues values = new ContentValues();
        values.put(KEY_EMAIL, email); // Email

        // Inserting Row
        db.insert(TABLE_LOGIN, null, values);
        db.close(); // Closing database connection
    }

    public String getUser() {
        SQLiteDatabase db = this.getWritableDatabase();
        ContentValues values = new ContentValues();

        String user = values.getAsString(KEY_EMAIL);
        Log.v("DBH", user);
        db.close();
        return user;        
    }

    /**
     * Getting user data from database
     * */
    public HashMap<String, String> getUserDetails(){
        HashMap<String,String> user = new HashMap<String,String>();
        String selectQuery = "SELECT  * FROM " + TABLE_LOGIN;

        SQLiteDatabase db = this.getReadableDatabase();
        Cursor cursor = db.rawQuery(selectQuery, null);
        // Move to first row
        cursor.moveToFirst();
        if(cursor.getCount() > 0){
            user.put("name", cursor.getString(1));
            user.put("email", cursor.getString(2));
            user.put("uid", cursor.getString(3));
            user.put("created_at", cursor.getString(4));
        }
        cursor.close();
        db.close();
        // return user
        return user;
    }

    /**
     * Getting user login status
     * return true if rows are there in table
     * */
    public int getRowCount() {
        String countQuery = "SELECT  * FROM " + TABLE_LOGIN;
        SQLiteDatabase db = this.getReadableDatabase();
        Cursor cursor = db.rawQuery(countQuery, null);
        int rowCount = cursor.getCount();
        db.close();
        cursor.close();

        // return row count
        return rowCount;
    }

    public String returnRows() {
        String response = "";
        String countQuery = "SELECT * FROM " + TABLE_LOGIN;
        SQLiteDatabase db = this.getReadableDatabase();
        for (int j = 0; j < getRowCount(); j++) {
            Cursor cursor = db.rawQuery(countQuery, null);
            response += cursor.getColumnName(j);
        }
        Log.v("LT", response);
        return response;
    }

    /**
     * Re crate database
     * Delete all tables and create them again
     * */
    public void resetTables(){
        SQLiteDatabase db = this.getWritableDatabase();
        // Delete All Rows
        db.delete(TABLE_LOGIN, null, null);
        db.close();
    } 
```

# android - as3 AIR for android - 应用程序沙盒内容错误

> ID：10425505
> 
> 赞同：5
> 
> 时间：2012-05-03T05:16:36.097
> 
> 标签：android, actionscript-3, flash, security, air

**目标：**

我试图允许从设备本地加载的外部加载的 swf 文件相互通信。我需要能够访问变量、函数和对象。我在这里从网络加载 swf 内容时已经实现了这一点：[as3 externally loaded swf from network to control externally loaded swf from network](https://stackoverflow.com/questions/9715798/as3-externally-loaded-swf-from-network-to-control-externally-loaded-swf-from-net)

**但是当我让用户选择从设备或在线加载**时......设备 swf 文件无法相互通信。具体来说，加载的 swf 无法从其父级获取信息。

以下是从在线加载时有效的代码：

```
var InsideConent:Object = this.parent.parent as Object; //// GIVES ACCESS TO "Content.swf"
var ItWorksNow:Sprite = MovieClip(InsideConent.TWO.content).ChildInTWO;  /// 
```

该设备不喜欢此代码：

```
Security.allowDomain("*"); 
```

但是当在线运行时，它工作正常。以下是我从 APP 包本地加载运行时遇到的错误。

**错误：**

SecurityError：错误 #3207：应用程序沙盒内容无法访问此功能。在 Products_fla::MainTimeline/frame1() 的 flash.system::Security$/allowDomain() 无法在此位置显示源代码。

**问题：** 我可以做些什么来让安全域在 AIR FOR ANDROID 设备上本地工作，这样我就不必更改我的代码？- 谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T21:29:40.343

如果您在该行周围放置一个try catch，它不会在失败时抛出错误。这样，当您的代码可以在网络上和作为应用程序运行时。（应用程序不需要 allowDomain b/c 他们可以默认下载所有内容，这就是它失败的原因。）

`try {Security.allowDomain("*");}catch (e) { };`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-07T18:44:15.333

根据我的经验，您可以从使用跨域 xml 正确配置的另一个域加载远程 swf。类似于：[https ://developers.arcgis.com/flex/guide/using-crossdomain-xml.htm](https://developers.arcgis.com/flex/guide/using-crossdomain-xml.htm)

您可以使用代码加载 swf，但如果您尝试访问舞台，例如它将失败。

此外，如果在您的原始项目中（全部托管在 Web 服务器上，您使用了常见的静态变量或单例，它不会成功。我的解决方案是在那些接收我需要使用的对象的文件上添加函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T17:55:32.930

据我所知，您无法从 AIR 中加载的 swfs 执行代码，您仍然可以使用多个 swfs 来显示资产，但任何代码都会给出该错误。

# algorithm - 为什么 QuickSort 是 n log n 的直观解释？

> ID：10425506
> 
> 赞同：61
> 
> 时间：2012-05-03T05:16:43.553
> 
> 标签：algorithm, complexity-theory, quicksort

有没有人能够给出一个“简单的英语”直观但正式的解释是什么让 QuickSort n log n？据我了解，它必须通过 n 项，并且它会记录 n 次......我不知道如何用语言表达为什么它会记录 n 次。

* * *

## 回答 #1

> 赞同：162
> 
> 时间：2012-05-03T05:24:55.593

# 复杂

快速排序首先将输入分成两个块：它选择一个“枢轴”值，并将输入划分为小于枢轴值和大于枢轴值的输入（当然，任何等于枢轴值的都有当然，进入其中一个或另一个，但对于基本描述，那些最终出现的并不重要）。

由于输入（根据定义）没有排序，因此要像这样对其进行分区，它必须查看输入中的每个项目，所以这是一个 O(N) 操作。在第一次对输入进行分区后，它递归地对每个“块”进行排序。这些递归调用中的每一个都会查看它的每一个输入，因此在这两个调用之间它最终会访问每个输入值（再次）。因此，在分区的第一个“级别”，我们有一个调用来查看每个输入项。在第二级，我们有两个分区步骤，但在这两个步骤之间，他们（再次）查看每个输入项。每个连续级别都有更多单独的分区步骤，但每个级别的调用总共会查看所有输入项。

它继续将输入划分为越来越小的部分，直到达到分区大小的某个下限。最小的可能是每个分区中的单个项目。

# 理想案例

在理想情况下，我们希望每个分区步骤将输入分成两半。“一半”可能不会完全相等，但如果我们选择好枢轴，它们应该非常接近。为了保持数学简单，让我们假设完美的分区，所以我们每次都得到精确的一半。

在这种情况下，我们可以将其分成两半的次数将是输入数量的以 2 为底的对数。例如，给定 128 个输入，我们得到的分区大小为 64、32、16、8、4、2 和 1。这是 7 个分区级别（是的，log [2] (128) = 7）。

因此，我们有 log(N) 分区“级别”，每个级别都必须访问所有 N 个输入。因此，log(N) 个级别乘以每个级别的 N 次操作给了我们 O(N log N) 的整体复杂度。

# 最差的情况

现在让我们重新审视每个分区级别都会将输入精确地“打破”一半的假设。根据我们对分区元素的选择有多好，我们可能不会得到精确相等的一半。那么可能发生的最坏情况是什么？最坏的情况是枢轴实际上是输入中的最小或最大元素。在这种情况下，我们执行 O(N) 分区级别，但不是得到大小相等的两半，而是得到一个元素的一个分区和 N-1 个元素的一个分区。如果每个分区级别都发生这种情况，那么我们显然最终会在分区下降到一个元素之前进行 O(N) 分区级别。

这为快速排序提供了技术上正确的大 O 复杂度（大 O 正式指的是复杂度的上限）。由于我们有 O(N) 级别的分区，并且每个级别都需要 O(N) 步，我们最终会得到 O(N * N)（即 O(N ² )）的复杂度。

# 实际实现

实际上，实际实现通常会在实际到达单个元素的分区之前停止分区。在典型情况下，当一个分区包含 10 个或更少的元素时，您将停止分区并使用诸如插入排序之类的东西（因为对于少量元素它通常更快）。

# 修改后的算法

最近已经发明了对快速排序的其他修改（例如，Introsort、PDQ 排序），它们可以防止 O(N ² ) 最坏的情况。Introsort 通过跟踪当前分区“级别”来做到这一点，并且当/如果它太深时，它将切换到堆排序，这对于典型输入来说比快速排序慢，但保证 O(N log N) 复杂度对于任何输入。

PDQ 排序为此增加了另一个变化：由于堆排序较慢，因此它会尽可能避免切换到堆排序为此，如果看起来它的枢轴值很差，它会在选择之前随机打乱一些输入枢。然后，如果（且仅当）未能产生足够好的枢轴值，它将切换到使用堆排序。

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2012-05-03T05:24:00.027

每个分区操作都需要 O(n) 次操作（对数组进行一次传递）。平均而言，每个分区将数组分为两部分（总计为 log n 个操作）。我们总共有 O(n * log n) 操作。

即平均 log n 分区操作，每个分区需要 O(n) 操作。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-06-26T18:09:53.917

对数背后有一个关键的直觉：

> 在达到 1 之前，您可以将数字 n 除以常数的次数是 O(log n)。

换句话说，如果您看到一个运行时具有 O(log n) 项，那么您很有可能会发现某些东西会以一个常数因子反复缩小。

在快速排序中，按一个常数因子缩小的是每个级别的最大递归调用的大小。快速排序的工作原理是选择一个枢轴，将数组拆分为两个小于枢轴的元素和大于枢轴的元素的子数组，然后递归地对每个子数组进行排序。

如果你随机选择枢轴，那么选择的枢轴有 50% 的机会位于中间 50% 的元素中，这意味着有 80% 的机会两个子数组中较大的一个最多为 75%原件的大小。（你明白为什么吗？）

因此，为什么快速排序在 O(n log n) 时间内运行的一个很好的直觉如下：递归树中的每一层都做 O(n) 的工作，并且由于每个递归调用都有很好的机会减少数组的大小至少 25%，我们希望在你用完要丢弃的元素之前有 O(log n) 层。

当然，这假设您随机选择枢轴。许多快速排序的实现都使用启发式方法来尝试在不做太多工作的情况下获得一个不错的枢轴，不幸的是，在最坏的情况下，这些实现可能会导致整体运行时差。@Jerry Coffin 对这个问题的出色回答谈到了快速排序的一些变化，它们通过切换使用哪种排序算法来保证 O(n log n) 最坏情况的行为，这是寻找更多信息的好地方。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-03T05:28:34.257

好吧，它并不总是 n(log n)。这是选择的枢轴大约在中间时的表演时间。在最坏的情况下，如果您选择最小或最大元素作为枢轴，那么时间将为 O(n^2)。

为了可视化“n log n”，您可以假设枢轴是最接近要排序的数组中所有元素的平均值的元素。这会将数组分成两个长度大致相同的部分。在这两个上，您都应用快速排序过程。

就像在将数组长度减半的每一步一样，您将执行 log n(base 2) 次，直到达到 length = 1，即 1 个元素的排序数组。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-08-11T14:33:08.820

将排序算法分为两部分。首先是分区和第二个递归调用。分区的复杂度是 O(N)，递归调用理想情况的复杂度是 O(logN)。例如，如果您有 4 个输入，那么将有 2(log4) 个递归调用。将两者相乘得到 O(NlogN)。这是一个非常基本的解释。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-21T05:27:43.950

事实上，您需要找到所有 N 个元素的位置（枢轴），但是每个元素的最大比较次数是 logN（第一个是 N，第二个枢轴 N/2，第三个 N/4 ..假设枢轴是中值元素）

# google-chrome - 是否可以使用 Chrome 扩展程序调用键盘功能键

> ID：10425507
> 
> 赞同：0
> 
> 时间：2012-05-03T05:16:45.927
> 
> 标签：google-chrome, google-chrome-extension

我正在开发 Chrome 扩展程序。我想知道是否可以使用 Chrome 扩展程序调用键盘功能键。

谢谢，NVN。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T06:09:51.257

**编辑：**您想*模拟*页面上的功能键按下还是*听取*用户的物理按键？如果您想以程序方式触发功能键操作，则不能。正如 Rob 所指出的，脚本事件仅激活脚本事件侦听器，不会触发默认行为。

为了检测功能键按下，您需要将您的事件绑定到`keyup`-- **not** to `keypress`，这不会触发几个不可打印的击键，如功能键和箭头键。

```
document.documentElement.addEventListener("keyup", function(e) {
    if(e.keyCode == 113) {
        // if F2 is pressed...
        // F1 is keycode 112, and it increments from there
    }
}); 
```

一些功能键已经做了一些事情（F1 打开帮助，F5 刷新等）。如果您有充分的理由阻止这种行为（例如，您正在制作一个不应该表现出正常浏览器行为的 VNC 查看器之类的沉浸式全屏应用程序），您可以使用`preventDefault`on`keydown`来停止这种潜在的破坏性操作：

```
document.documentElement.addEventListener("keydown", function(e) {
    if(e.keyCode == 112) {
        // if F1 is pressed, don't open help
        e.preventDefault();
    }
}); 
```

要查看如何处理 Chrome 扩展程序的按键，请参阅我关于[通过快捷键激活扩展程序](https://stackoverflow.com/a/10389452/710446)的答案；这应该正是您其余部分所需要的。简要地：

*   我上面给出的代码放在一个[内容脚本](http://code.google.com/chrome/extensions/content_scripts.html)中，该脚本被添加到每个页面

*   事件处理函数执行一些操作，或者在页面上的内容脚本中，或者通过向后台页面[传递消息](https://code.google.com/chrome/extensions/messaging.html)

# php - 在组合框选择上动态创建框架（&按钮单击）

> ID：10425508
> 
> 赞同：0
> 
> 时间：2012-05-03T05:16:46.073
> 
> 标签：php, javascript, html, combobox

我正在用 PHP 开发一个网站，例如左侧有一个菜单，其中包含“食品”列表 - 蔬菜、水果、豆类等。单击“蔬菜”时，左侧会出现另一个菜单，其中包含蔬菜列表。- 土豆、胡萝卜等。所有这些内容只能由管理员添加或修改。

我正在考虑添加一个设施，其中管理员登录将有 **Combobox1**（填充蔬菜、水果、..）、 **Combobox2**（填充从 cmb1 中选择蔬菜的蔬菜列表）和一个**浏览**按钮，它将选择一个 doc 文件当我点击“**上传**”按钮时，将动态创建一个框架/网页，并且 word doc 的内容将显示在该网页上。

谁能建议我如何进行此操作？

提前致谢 ！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T07:53:25.800

1.  `Combo1`屏幕上只有 1 个组合框（ - 是带有“食物类型”的组合框），没有选择任何内容。第二个组合框（`Combo2`- 属于同一类型的产品列表）被禁用。
2.  用户从 中选择选项`Combo1`。AJAX 请求被发送到服务器（发送食物类型）。带有产品列表的服务器响应属于食品类型。
3.  您将获得`Combo2`使用 jQuery 的响应制作响应项选项。然后您使`Combo2`可用，以便用户可以选择任何选项并提交表单。

# collision-detection - Sweep and Prune：时间连贯性从何而来？

> ID：10425512
> 
> 赞同：4
> 
> 时间：2012-05-03T05:17:35.763
> 
> 标签：collision-detection

我正在研究各种碰撞检测算法，其中之一是扫描和修剪。我想我对它的工作原理有很好的理解；您为每个轴存储一个排序的端点列表，并且在每次更新期间我必须保持列表排序。下面是我发现的一个网页的链接，它帮助我理解了这个算法：

[http://jitter-physics.com/wordpress/?tag=sweep-and-prune](http://jitter-physics.com/wordpress/?tag=sweep-and-prune)

但是，我不太清楚代码中的时间一致性是如何实现的。我知道它利用了对象在连续时间范围内几乎没有移动的事实，但我不太明白它是如何实现的。

有人可以对这种情况有所了解吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-05T11:18:54.497

+1 的问题，但你的答案可能是错误的；在排序（扫描）阶段，在一个模拟步骤到下一个模拟步骤之间利用时间相干性。[这是维基百科的Sweep and Prune](http://en.wikipedia.org/wiki/Sweep_and_prune)的摘录：

> 扫描和修剪利用了时间相干性，因为固体很可能在两个模拟步骤之间没有显着移动。正因为如此，在每一步，包围体开始和结束的排序列表可以用相对较少的计算操作进行更新。对几乎已排序的列表进行快速排序的排序算法，例如插入排序，特别适合此目的。

假设我们有*n 个*对象，在时间步 1，*t = 1*，对于扫描阶段，我们已经对所有对象进行了排序`start.x`，`end.x`并且根据结果，我们也执行了窄阶段以找到实际的碰撞对象。现在，对于*t = 2 ，除非您的模拟具有可以传送（在其他地方消失并重新出现）的对象，否则对象将在**t = 2*处从其*t = 1*位置略微移动。在*t = 1*和*2*之间，如果变化不大（时间连贯性），那么我们为*t = 1*创建的排序列表通常会为到达*t = 2的排序列表提供一个良好的开端****`X`**因为对于*t = 2*，旧列表非常接近完美排序状态。现在，通过使用诸如[插入排序](http://en.wikipedia.org/wiki/Insertion_sort)之类的排序，这对于一般情况来说可能代价高昂，但在这种几乎排序的情况下会很好地工作，人们可以快速获得*t = 2*的完美排序列表。*****

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T04:51:49.350

我想我可能已经找到了自己问题的答案。时间相干性仅仅减少了窄相位碰撞检测的工作量。我正在检查以下链接中的代码。

[http://www.koders.com/java/fidB3D3D9D154CE69A671A799D52E7C44C104DF9537.aspx?s=wa](http://www.koders.com/java/fidB3D3D9D154CE69A671A799D52E7C44C104DF9537.aspx?s=w.a)

我认为这就是时间相干性发挥作用的地方：当考虑到对象对发生碰撞并进入窄相碰撞时，将对端点数组进行排序。在端点需要再次排序之前，不需要寻找对象对来考虑窄相冲突，因为第 76 行的 if 语句永远不会为真。如果是这样，那么代码遵循时间一致性原则：在小时间步长内，对象配置的变化很小，以至于无法保证数组排序；数组中不会重新排列任何内容。因此窄相碰撞的数量将减少。**

# iphone - iPhone：访问未接电话数和未读消息数？

> ID：10425516
> 
> 赞同：2
> 
> 时间：2012-05-03T05:18:03.543
> 
> 标签：iphone, core-telephony

我想知道是否有办法在 iPhone（未越狱）上获取未接来电的数量和未读消息的数量。

我基本上想知道电话应用程序和消息应用程序的当前批处理图标正在显示什么。无需获取单个呼叫或消息的详细信息。

这是可能吗？

谢谢，托马斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T05:51:27.803

`NO there is no way`.

不幸的是，目前使用当前的 SDK 是不可能的。如果您想获取有关当前调用的详细信息，您当然可以使用当前的 SDK 做到这一点。

[以下是来自 APPLE for Documentation](https://developer.apple.com/library/ios/documentation/NetworkingInternet/Reference/CoreTelephonyFrameworkReference/_index.html)和[SampleApplication](https://developer.apple.com/library/ios/#samplecode/CoreTelephonyDemo/Introduction/Intro.html)的资源链接，您可以使用这些链接进一步了解跟踪当前呼叫信息。

# sql - SQL 获取参与调查的用户数

> ID：10425531
> 
> 赞同：1
> 
> 时间：2012-05-03T05:19:26.090
> 
> 标签：sql, stored-procedures

我想知道如何编写 SQL 查询来获取参与每月调查的用户数

表结构如下

**调查表**

```
SurveyId, SurveyName, Datetime 
```

**调查信息**

```
Id, SurveyId, First name, Last name DateTime 
```

样本数据

**调查表**

```
1  Survey-ABC 1 Jan 2011
2  Survey-AXC 1 Feb 2011
3  Survey-AEW 1 Mar 2011
4  Survey-AVD 1 Apr 2011
.... 
```

**调查信息**

```
1  1  Peter James 1 Jan 2011
2  1  John Tom    1 Jan 2011
3  1  Harry Kin   1 Jan 2011
4  2  Amber Wills 1 Feb 2011
5  2  Tom Kin     1 Feb 2011 
```

我想要这样的结果

*   3 位用户参与了 Survey-ABC，
*   2 位用户参与了 Survey-AXC

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T05:45:37.230

```
SELECT 
    Count(*) AS "Number of participants", 
    SurveyTable.surveyName 
FROM 
    surveyinfo 
INNER JOIN surveytable 
    ON surveytable.surveyid = surveyinfo.surveyid 
GROUP BY 
    Year(DateTime),
    Month(Date_Time) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T05:23:24.023

以下选择语句

```
SELECT st.Name, COUNT(si.ID)
FROM SurveyTable.st INNER JOIN SurveyInfo si ON si.SurveyId = st.SurveyId
GROUP BY st.Name 
```

应该为您提供参与调查的用户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T05:23:56.163

因为您想查看每个月的人数或参与者，所以您需要提取月份并按此分组。

```
SELECT SurveyTable.SurveyId, SurveyTable.SurveyName, Month(SurveyInfo.DateTime) As M, COUNT(SurveyInfo.*) As Cnt
FROM SurveyTable
LEFT JOIN SurveyInfo ON SurveyInfo.SurveyId = SurveyTable.SurveyId
GROUP By SurveyTable.SurveyId, SurveyTable.SurveyName, Month(SurveyInfo.DateTime) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T05:25:10.073

```
SELECT stab.Name, COUNT(si.ID)
FROM SurveyTable as stab INNER JOIN SurveyInfo si ON si.SurveyId = stab.SurveyId
GROUP BY stab.Name 
```

# email - 在 SSRS 中禁用移动到 Outlook？

> ID：10425548
> 
> 赞同：0
> 
> 时间：2012-05-03T05:21:11.310
> 
> 标签：email, reporting-services, hyperlink

我有一个 SQL Server Reporting Services 报告，其中一列具有电子邮件地址格式的用户 ID。当我将此报告导出为 PDF 格式并单击用户 ID 时，它会移动到 Outlook。

我已阅读有关禁用超链接的信息并使用了两者：

```
(=IIFGlobals!RenderFormat.Name, "www.google.com",Nothing) 
=IIf(Globals!RenderFormat.IsInteractive, "http://10.210.251.132/Reports/Pages/Folder.aspx", Nothing) 
```

但两者都不起作用。还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T11:36:16.220

如果我正确理解您的情况，您的报告会显示一些电子邮件地址，当报告呈现为 PDF 文档时，电子邮件地址会显示为可点击的链接。当用户单击 PDF 文档中的一个电子邮件地址时，该链接将启动 Microsoft Outlook（以创建新电子邮件）。

不幸的是，我认为这是 PDF 文档的一个功能，或者至少是 Reporting Services 生成的 PDF。电子邮件地址似乎是自动识别的，并且在文档中创建了一个链接 - 我看不到任何方法可以从报告代码中控制它。

我唯一能建议的就是在地址中插入一个空格来阻止 PDF 渲染器识别它并创建一个链接，例如

my.email@address.com > my.email@address.com

# leaflet - Leaflet层的定义

> ID：10425553
> 
> 赞同：20
> 
> 时间：2012-05-03T05:21:50.633
> 
> 标签：leaflet

[传单映射库](http://leaflet.cloudmade.com/)中的a 到底`layer`代表什么？

从概念上讲，对我来说，一层代表某种类型的特征或对象的单层；例如，表示基本地图的所有图像瓦片将在单个图层上表示，一组表示美国各州的多边形可能在它们自己的单独图层上。

具体[`L.GeoJSON.addGeoJSON(geojson)`](https://github.com/CloudMade/Leaflet/blob/master/src/layer/GeoJSON.js)来看，它读取创建的每个新多边形都放置在它自己的图层中（然后可能与您调用该方法的图层合并？）。我的用例是我需要一次添加许多 geoJSON 对象，并希望确保我不会创建许多不必要的层（或者如果我是，如果这实际上是一件坏事）。

谢谢你。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-03T11:54:14.653

在 Leaflet 中，可以添加到地图的任何内容都是图层。所以多边形、圆形、标记、弹出窗口、瓷砖都是图层。[`L.LayerGroup`](https://github.com/CloudMade/Leaflet/blob/master/src/layer/LayerGroup.js)例如，如果您想将一组多边形视为单个图层，则可以将图层组合在一个（或 FeatureGroup）中。因此，也许您对层的解释与`L.LayerGroup`Leaflet 中的模型更匹配。

[`L.GeoJSON`](https://github.com/CloudMade/Leaflet/blob/master/src/layer/GeoJSON.js)是从 GeoJSON 初始化的 LayerGroup（特别是 FeatureGroup）。使用 addLayer将每个新多边形添加到`L.GeoJSON`LayerGroup，这是将任何东西（即图层）添加到`LayerGroup`. 它不会为每个多边形创建一个新层（除了`L.Polygon`已经被认为是一个层的那个）。它只为 GeometryCollection 和 MultiPoints 创建新的 FeatureGroups（LayerGroups），（我假设）是为了保留 GeoJSON 的结构。

如果您想一次将 geoJSON 对象添加到同一个 LayerGroup，您可以调用`L.GeoJSON.geometryToLayer`转换您的 GeoJSON 对象，然后使用`L.LayerGroup.addLayer`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-31T13:50:12.233

正如您所提到的，“层”是一个来自更广泛范围的概念，而不仅仅是*Leaflet*实现。

**它是地理空间数据上下文中“收集”的抽象概念。***层*也是一个替代名称，但我看到在几种标准和技术中更多地使用“层”
。

 *这里的第一行描述它足够简单：
[https ://doc.arcgis.com/en/arcgis-online/reference/layers.htm](https://doc.arcgis.com/en/arcgis-online/reference/layers.htm)

* * *

在*Leaflet*的上下文中，您可以拥有任意数量的层，并且没有必要“备用”它们。
除了考虑技术实现的优化之外，我还努力尝试将“层”（根据您的业务领域）识别为属于一起的地理空间数据的逻辑组。

> 具体来说`L.GeoJSON.addGeoJSON(geojson)`，它读取创建的每个新多边形都放置在自己的图层中（然后可能与您调用该方法的图层合并？）。

*   一个 Leaflet 层 => 一个 GeoJSON 特征（或一组特征，假设为`FeatureCollection`extends `Feature`）。
*   不会有合并：当您添加 GeoJSON 数据时，*Leaflet将用新生成的地理空间数据替换整个图层。*自定义实现可能可以合并，但我不知道是否可取。

> 我的用例是我需要一次添加许多 geoJSON 对象，并希望确保我不会创建许多不必要的层（或者如果我是，如果这实际上是一件坏事）。

有很多层次本身并不是一件坏事；只要不出现*具体的性能问题。*
如果您想减少层数，请努力对 GeoJSON 的结构进行建模，以便大多数相关对象包含在单个 GeoJSON/Layer（按域分组）中，而不是为每个单独的对象设置一个层（按技术实现分组）。

**例如与***“风险区域”*相关的层

 *```
{
  "type": "FeatureCollection",
  "features": [
    {
      "type": "Feature",
      "properties": {
        "title": "virus spread area",
        "risk": "high"
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              114.521484375,
              30.89279747750818
            ],
            [
              113.89251708984374,
              30.64972717137329
            ],
            [
              114.28253173828124,
              30.21635515266855
            ],
            [
              114.521484375,
              30.89279747750818
            ]
          ]
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "name": "Wuhan Institute of Virology",
        "risk": "high"
      },
      "geometry": {
        "type": "Point",
        "coordinates": [
          114.35462951660156,
          30.543338954230222
        ]
      }
    }
  ]
} 
```

**而不是**为多边形设置一层：

```
{
      "type": "Feature",
      "properties": {
        "title": "virus spread area",
        "risk": "high"
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              114.521484375,
              30.89279747750818
            ],
            [
              113.89251708984374,
              30.64972717137329
            ],
            [
              114.28253173828124,
              30.21635515266855
            ],
            [
              114.521484375,
              30.89279747750818
            ]
          ]
        ]
      }
    } 
```

和一个单独的（但实际上相关的）Point：

```
{
    "type": "Feature",
    "properties": {
        "name": "Wuhan Institute of Virology",
        "risk": "high"
    },
    "geometry": {
        "type": "Point",
        "coordinates": [
            114.35462951660156,
            30.543338954230222
        ]
    }
} 
```

（恕我直言）两个特征在概念上属于同一层。**

# jquery - 如何将对象列表传递给服务器？

> ID：10425556
> 
> 赞同：1
> 
> 时间：2012-05-03T05:22:01.557
> 
> 标签：jquery, struts2

在我的 jsp 页面中，我有一个 javascript 函数，其中有一个 Iterator。在每次迭代中，我需要将数据存储到一个对象中，并且在迭代完成后，需要将对象列表传递给要成为的服务器保存到数据库

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T06:30:48.063

您必须序列化您的对象，将它们发送到操作并反序列化它们。例如，使用 json。

1 从每个对象创建一个 JSON 字符串。您可以使用[JSON-js](https://github.com/douglascrockford/JSON-js)或 Jquery [jquery-json](http://code.google.com/p/jquery-json/downloads/detail?name=jquery.json-2.3.js&can=2&q=)插件或其他选项。

2 将它们发送到您的操作中

```
 var data = {"myObjects", Json_string_1, 
              "myObjects", Json_string_2,
              .........e.t.c.............}
  $.post("/path/myAction.do", data, function(){
    ....... do thomesing........................
  }) 
```

3 在您的操作中创建字符串数组参数。参数拦截器会将您的所有 Json_string 放入该数组中

```
private String[] myObjects = new String[];

public void setMyObjects(String[] myObjects) {
  this.myObjects = myObjects;
} 
```

4 从 Json 字符串创建对象。使用[google-gson](http://code.google.com/p/google-gson/)或任何你想要的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T05:40:05.557

您将需要以您喜欢的任何格式序列化您的对象，然后将文本发送（POST）到服务器，您可以在其中再次反序列化并处理数据。

# facebook - 当我已经登录我的 facebook 帐户时，如何使用 facebook 凭据无缝登录我的网站？

> ID：10425559
> 
> 赞同：1
> 
> 时间：2012-05-03T05:22:17.640
> 
> 标签：facebook, facebook-graph-api

当我已经在同一个会话或另一个会话中登录我的 facebook 帐户时，如何使用 facebook 凭据登录我的网站。例如，我登录了我的 fb，当我在同一会话或另一个会话中打开名为 rottentomatoes.com 的网站时，我可以自动登录，无需执行任何操作，因为该站点使用我的 fb 帐户并自动获得注册该网站的会员。

我想在我的网站上做这些事情，比如烂番茄发生的事情。

到目前为止，我可以使用 fb 帐户使用 facebook connect 登录我的网站。

请帮助我....任何建议都将受到欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T06:55:51.180

You need to have a facebook app, then in your site use the [facebook js sdk](http://developers.facebook.com/docs/reference/javascript/).

You always have different sessions per site, you'll need to make a session for yours, you don't use the facebook session, just the sdk.

When the user loads your page you can use the [FB.getLoginStatus](http://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/) to check if the user is logged into facebook and is authenticated with your app, if so then you get the needed user data and can then log the user into your site.

If the user is not logged into facebook, or hasn't authorized your app then you can use the [FB.login method](http://developers.facebook.com/docs/reference/javascript/FB.login/) to log the user in, when the user comes back from that process you should have the data you need in order to register/log him into your site.

# api - Photobucket api中的时间戳

> ID：10425565
> 
> 赞同：0
> 
> 时间：2012-05-03T05:23:04.973
> 
> 标签：api, photobucket

我想使用 Photobucket API，我正在浏览它的文档，我遇到了这条线，上面写着：-

= 1208290131

然后我越过这条线

= oauth_consumer_key=1020304&oauth_nonce=5c4b38eb7e7f0a0603452dfb3bf149d7&oauth_signature_method=HMAC-SHA1&oauth_timestamp=1208290131&oauth_version=1.0

现在我的问题是这个时间戳是什么以及它是如何使用的......

提前致谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T17:11:00.173

时间戳是您必须在 api 请求上发送的参数，以便他们知道何时发出请求。通常编程语言有方法可以让你立即获得价值。

例如 PHP 时间（）

[http://php.net/manual/pt_BR/function.time.php](http://php.net/manual/pt_BR/function.time.php)

# android - RadioGroup 有两列有十个 RadioButtons

> ID：10425569
> 
> 赞同：30
> 
> 时间：2012-05-03T05:23:27.313
> 
> 标签：android, radio-button, radio-group

我有一个`RadioGroup`，我想在两列和五行中将按钮彼此相邻对齐，但我无法实现。我尝试过的事情：

1.  `RelativeLayout`-> 外部`RadioGroup`-> 内部`RadioGroup`。全部`RadioButtons`被选中，但我只想选择一个。
2.  `RadioGroup`： 方向
3.  跨度，拉伸柱
4.  `TableRow`
5.  `TableLayout`

请让我知道如何创建一`RadioGroup`列和两列以及其中`RadioButtons`的许多列。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-05-03T05:49:09.343

你可以模拟它`RadioGroup`，让它看起来像你只有一个。例如，您有`rg1`and `rg2`(`RadioGroups`方向设置为`vertical`（两列））。要设置这些`RadioGroups`：

```
rg1 = (RadioGroup) findViewById(R.id.radioGroup1);
rg2 = (RadioGroup) findViewById(R.id.radioGroup2);
rg1.clearCheck(); // this is so we can start fresh, with no selection on both RadioGroups
rg2.clearCheck();
rg1.setOnCheckedChangeListener(listener1);
rg2.setOnCheckedChangeListener(listener2); 
```

要`RadioButton`在`RadioGroups`上面的听众中只选择一个，将是：

```
private OnCheckedChangeListener listener1 = new OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(RadioGroup group, int checkedId) {
            if (checkedId != -1) {
                rg2.setOnCheckedChangeListener(null); // remove the listener before clearing so we don't throw that stackoverflow exception(like Vladimir Volodin pointed out)
                rg2.clearCheck(); // clear the second RadioGroup!
                rg2.setOnCheckedChangeListener(listener2); //reset the listener
                Log.e("XXX2", "do the work");
            }
        }
    };

    private OnCheckedChangeListener listener2 = new OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(RadioGroup group, int checkedId) {
            if (checkedId != -1) {
                rg1.setOnCheckedChangeListener(null);
                rg1.clearCheck();
                rg1.setOnCheckedChangeListener(listener1);
                Log.e("XXX2", "do the work");
            }
        }
    }; 
```

要从你那里得到检查`RadioButton`，`RadioGroups`你可以这样做：

```
int chkId1 = rg1.getCheckedRadioButtonId();
int chkId2 = rg2.getCheckedRadioButtonId();
int realCheck = chkId1 == -1 ? chkId2 : chkId1; 
```

如果你使用的`check()`方法`RadioGroup`你必须记得调用`clearCheck()`其他的`Radiogroup`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-03T05:29:46.383

RadioGroup 是从 LinearLayout 扩展而来的。

linearlayout 做不到，所以 RadioGroup 做不到。

为什么不自己实现呢。

使用 RelativeLayout 来布局子视图。并记录子视图的状态。使用 setLevel 来控制状态。

祝你好运！。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-08-09T14:10:44.600

如果布局不复杂，最好的方法是使用 Single RelativeLayout 而不是多个 Linear Layouts。

下面是 2 行的代码。第一行有 3 列。第二行一列。

```
 <RadioGroup
                android:id="@+id/radio_group"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:layout_marginBottom="4dp"
                android:layout_marginTop="4dp"
                android:orientation="vertical">

                <RelativeLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content">

                    <android.support.v7.widget.AppCompatRadioButton
                        android:id="@+id/r1c1"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignParentLeft="true"
                        android:layout_alignParentStart="true"
                        android:layout_alignParentTop="true"
                        android:layout_marginRight="8dp"
                        android:gravity="center"
                        android:text="Row 1 Column1" />

                    <android.support.v7.widget.AppCompatRadioButton
                        android:id="@+id/r2c1"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_below="@id/r1c1"
                        android:layout_gravity="left|center_vertical"
                        android:layout_marginRight="8dp"
                        android:layout_weight="1"
                        android:gravity="left|center_vertical"
                        android:text="Row 2 Column 1" />

                    <android.support.v7.widget.AppCompatRadioButton
                        android:id="@+id/r1c2"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginRight="8dp"
                        android:layout_toRightOf="@id/r1c1"
                        android:gravity="center"
                        android:text="Row 1 Column 2"/>

                    <android.support.v7.widget.AppCompatRadioButton
                        android:id="@+id/r1c3"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginRight="8dp"
                        android:layout_toRightOf="@id/r1c2"
                        android:gravity="center"
                        android:text="Row 1 Column 3" />
                </RelativeLayout>
            </RadioGroup> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-08-14T10:02:00.533

使用 LinearLayout 在 xml 文件中创建 2 个 RadioGroup，每个具有 5 个 RadioButton 并使用 layout_weight 属性将它们并排放置在屏幕上。然后为这些广播组创建监听器，如下所示：

```
rg1 = (RadioGroup) findViewById(R.id.radiogroup1);
rg2 = (RadioGroup) findViewById(R.id.radiogroup2);
rg1.clearCheck();//this is so we can start fresh, with no selection on both RadioGroups
rg2.clearCheck();
rg1.setOnCheckedChangeListener(new OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(RadioGroup group, int checkedId) {
            // TODO Auto-generated method stub
            if (checkedId != -1) {
                fun2();
            }
        }
    });

    rg2.setOnCheckedChangeListener(new OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(RadioGroup group, int checkedId) {
            // TODO Auto-generated method stub
            if (checkedId != -1) {
                fun1();
            }
        }
    }); 
```

fun1() & fun2() 的定义如下：

```
public void fun1() {
     rg1.setOnCheckedChangeListener(null);
     rg1.clearCheck();
     rg1.setOnCheckedChangeListener(new OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(RadioGroup group, int checkedId) {
            fun2();
            Log.v("Inside fun1","fun2");
        }
    });
}

public void fun2() {
     rg2.setOnCheckedChangeListener(null);
     rg2.clearCheck();
     rg2.setOnCheckedChangeListener(new OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(RadioGroup group, int checkedId) {
            // TODO Auto-generated method stub
            fun1();
            Log.v("Inside fun2","fun1");

        }
    });
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-17T21:22:44.337

我不得不做同样的事情并最终将 TableLayout 和 RadioButtonGroup 组合在一起。我将单选按钮动态添加到 TableRows。这是课程：

```
public class RadioGroupColumns extends TableLayout implements OnClickListener {

private static final String TAG = "RadioGroupColumns";
private RadioButton activeRadioButton;
private int mCheckedId = -1;
// tracks children radio buttons checked state
private CompoundButton.OnCheckedChangeListener mChildOnCheckedChangeListener;
// when true, mOnCheckedChangeListener discards events
private boolean mProtectFromCheckedChange = false;
private OnCheckedChangeListener mOnCheckedChangeListener;
private PassThroughHierarchyChangeListener mPassThroughListener;

public RadioGroupColumns(Context context) {
    super(context);
    setOrientation(VERTICAL);
    init();
}

public RadioGroupColumns(Context context, AttributeSet attrs) {
            super(context, attrs);
            Resources res = Resources.getSystem();
            int value = 0;
            // retrieve selected radio button as requested by the user in the
            // XML layout file

            TypedArray attributes = null;
            try {
                attributes = context.obtainStyledAttributes(attrs, getAttributes(context), R.attr.radioButtonStyle, 0);
                value = attributes.getResourceId(getAttribute(context), View.NO_ID);
            } catch (IllegalAccessException e) {
                // TODO Auto-generated catch block
                Log.d("Exception RadioGroupColumns Construct",e.toString());
                e.printStackTrace();
            }
            catch (ClassNotFoundException e) { 
                Log.d("Exception RadioGroupColumns Construct",e.toString());
                e.printStackTrace();
            }  

            if (value != View.NO_ID) {
                mCheckedId = value;
            }

            //hardcode it to vertical
            //final int index = attributes.getInt(com.android.internal.R.styleable.RadioGroup_orientation, VERTICAL);
            //setOrientation(index);

            attributes.recycle();

            setOrientation(VERTICAL);
            init();
}

@Override
public void onClick(View v) {
    if (v instanceof TableRow) {
        TableRow row = (TableRow)v;
        for (int j=0;j<row.getChildCount();j++) { 
            if (RadioButton.class.isAssignableFrom(row.getChildAt(j).getClass())) {

                ((RadioButton) row.getChildAt(j)).setChecked(true);
                activeRadioButton = (RadioButton) row.getChildAt(j);
            }
        }
    }
    else { 
        final RadioButton rb = (RadioButton) v;

        if (activeRadioButton != null) {
            activeRadioButton.setChecked(false);
        }
        rb.setChecked(true);
        activeRadioButton = rb;
    }

}

private void init() {
    mChildOnCheckedChangeListener = new CheckedStateTracker();
    mPassThroughListener = new PassThroughHierarchyChangeListener();
    super.setOnHierarchyChangeListener(mPassThroughListener);
}

private int getAttribute(Context con) throws ClassNotFoundException, IllegalArgumentException, IllegalAccessException { 
//use reflect to get styleable class.
Field[] alFields = null; 
ArrayList<Integer> alInts = new ArrayList<Integer>();
int R_ID = 0;

for (Class c : android.R.class.getClasses()) { 
     if (c.getName().indexOf("styleable") >= 0) { 
         alFields = Class.forName( con.getPackageName() + ".R$styleable" ).getFields();

     } 
 }
for (Field f : alFields) { 
    Log.d("field name",f.getName());
    if (f.getName().equals("RadioGroup_checkedButton")) { 
        int[] ret = (int[])f.get(null);
        R_ID = ret[0];
    }

}
return R_ID;

}

//gets all RadioGroup R,android.internal.styleable.RadioGroup values
private int[] getAttributes(Context con) throws IllegalAccessException, ClassNotFoundException { 
    //use reflect to get styleable class.
    Field[] alFields = null; 
    ArrayList<Integer> alInts = new ArrayList<Integer>();
    int[] ints = null;
    int count = 0;
    try {
        for (Class c : android.R.class.getClasses()) { 
             if (c.getName().indexOf("styleable") >= 0) { 
                 Log.d("get Class Name Outer", c.getName());
                //use reflection to access the resource class
                 alFields = Class.forName( con.getPackageName() + ".R$styleable" ).getFields();          
             } 

         }
         if (alFields != null) 
             {
                Log.d("field numbers size", String.valueOf(alFields.length));

                for (Field field : alFields) { 

                 Class<?> targetType = field.getType();
                 Log.d("field type", field.getType().toString());
                 if (targetType.equals(Integer.TYPE) && targetType.isPrimitive()) { 
                     //alInts.add((Integer)field);
                     Object objectValue = (Integer)field.getInt(null);
                     //Object objectValue = (Integer)targetType.newInstance(); 
                     alInts.add((Integer)objectValue);
                     count++;
                 }
                 ints = new int[count];
                 for (int i=0;i<alInts.size();i++) { 
                     ints[i] = alInts.get(i);
                 }
             }

         }
    } catch (IllegalAccessException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    catch (ClassNotFoundException e) { 
        e.printStackTrace();
    }
    return ints;

    }

public void check(int id) {
    // don't even bother
    if (id != -1 && (id == mCheckedId)) {
        return;
    }
    if (mCheckedId != -1) {
        setCheckedStateForView(mCheckedId, false);
    }
    if (id != -1) {
        setCheckedStateForView(id, true);
    }
    activeRadioButton = (RadioButton) findViewById(id);
    activeRadioButton.setChecked(true);
    setCheckedId(id);
}

public void setOnCheckedChangeListener(RadioGroupColumns.OnCheckedChangeListener onCheckedChangeListener) {
    mOnCheckedChangeListener = (OnCheckedChangeListener) onCheckedChangeListener;
}

private void setCheckedId(int id) {
    mCheckedId = id;
    if (mOnCheckedChangeListener != null) {
        mOnCheckedChangeListener.onCheckedChanged(this, mCheckedId);
    }
}

private void setCheckedStateForView(int viewId, boolean checked) {
    View checkedView = findViewById(viewId);
    if (!RadioButton.class.isAssignableFrom(checkedView.getClass()) && checkedView != null) { 
        TableRow row = (TableRow) checkedView;
        for (int j=0;j<row.getChildCount();j++) { 
            RadioButton button = (RadioButton) row.getChildAt(j);
            if (button.isChecked() && button != null) { 
                button.setChecked(checked);
            }
        }
    }
    if (checkedView != null && checkedView instanceof RadioButton) {
        ((RadioButton) checkedView).setChecked(checked);
    }
}

/*
 * (non-Javadoc)
 * 
 * @see android.widget.TableLayout#addView(android.view.View, int,
 * android.view.ViewGroup.LayoutParams)
 */
@Override
public void addView(View child, int index,
        android.view.ViewGroup.LayoutParams params) {
    super.addView(child, index, params);
    setChildrenOnClickListener((TableRow) child);
}

/*
 * (non-Javadoc)
 * 
 * @see android.widget.TableLayout#addView(android.view.View,
 * android.view.ViewGroup.LayoutParams)
 */
@Override
public void addView(View child, android.view.ViewGroup.LayoutParams params) {
    super.addView(child, params);
    setChildrenOnClickListener((TableRow) child);
}

private void setChildrenOnClickListener(TableRow tr) {
    final int c = tr.getChildCount();
    for (int i = 0; i < c; i++) {
        final View v = tr.getChildAt(i);
        if (v instanceof RadioButton) {
            v.setOnClickListener(this);
        }
    }
}

public int getCheckedRadioButtonId() {
    if (activeRadioButton != null) {
        return activeRadioButton.getId();
    }

    return -1;
}

public interface OnCheckedChangeListener {

    public void onCheckedChanged(RadioGroupColumns group, int checkedId);
}

private class CheckedStateTracker implements CompoundButton.OnCheckedChangeListener {
    public void onCheckedChanged(CompoundButton buttonView,
            boolean isChecked) {
        // prevents from infinite recursion
        if (mProtectFromCheckedChange) {
            return;
        }

        mProtectFromCheckedChange = true;
        if (mCheckedId != -1) {
            setCheckedStateForView(mCheckedId, false);
        }
        mProtectFromCheckedChange = false;
        int id = buttonView.getId();
        setCheckedId(id);
    }
}

private class PassThroughHierarchyChangeListener implements android.view.ViewGroup.OnHierarchyChangeListener {
    private android.view.ViewGroup.OnHierarchyChangeListener mOnHierarchyChangeListener;

    /**
     * {@inheritDoc}
     */
    @TargetApi(Build.VERSION_CODES.JELLY_BEAN_MR1)
    public void onChildViewAdded(View parent, View child) {
        if (parent == RadioGroupColumns.this
                && child instanceof RadioButton) {
            int id = child.getId();
            // generates an id if it's missing
            if (id == View.NO_ID) {
                id = View.generateViewId();
                child.setId(id);
            }
            ((RadioButton) child).setOnCheckedChangeListener((com.assistek.ediary.RadioButton.OnCheckedChangeListener) mChildOnCheckedChangeListener);
        }

        if (mOnHierarchyChangeListener != null) {
            mOnHierarchyChangeListener.onChildViewAdded(parent, child);
        }
    }

    /**
     * {@inheritDoc}
     */
    public void onChildViewRemoved(View parent, View child) {
        if (parent == RadioGroupColumns.this
                && child instanceof RadioButton) {
            ((RadioButton) child).setOnCheckedChangeListener(null);
        }

        if (mOnHierarchyChangeListener != null) {
            mOnHierarchyChangeListener.onChildViewRemoved(parent, child);
        }
    }
}

 } 
```

这是将单选按钮添加到扩展单选组的代码：

```
 private void setupRadioButtonAnswers() {
    ArrayList<HolderAnswer> listAnswers = GlobalVars.questionHolders[GlobalVars.arrayRowNumber]
            .getListAnswers();
    ArrayList<ArrayList<HolderAnswer>> listAnswersSorted = new ArrayList<ArrayList<HolderAnswer>>();
    ArrayList<TableRow> alTableRows = new ArrayList<TableRow>();

    int NumberInColumns = (int) Math.floor(listAnswers.size() / NUMBER_OF_COLUMNS);
    // make higher number of answers on the right
    if (listAnswers.size() % NUMBER_OF_COLUMNS > 0)
        NumberInColumns++;

    for (int i = 0; i < NumberInColumns; i++) {
        TableRow row = new TableRow(this);
        TableRow.LayoutParams lp = new TableRow.LayoutParams(
                TableRow.LayoutParams.WRAP_CONTENT);
        row.setLayoutParams(lp);
        alTableRows.add(row);
    }

    int count = 0;

    // sort by row
    /*
     * a[0] = "Question 1"
       a[1] = "Question 2"
       a[2] = "Question 3"
       a[3] = "Question 4"
       a[4] = "Question 5"
       a[5] = "Question 6"
       a[6] = "Question 7"

       sorted to:

       a[0] = "Question 1"   a[1] = "Question 5"
       a[2] = "Question 2"   a[3] = "Question 6"
       a[4] = "Question 3"   a[5] = "Question 7"
       a[6] = "Question 4"
     */

    // initialize the ArrayLists in listAnswersSorted
    int numRows = listAnswers.size() / NUMBER_OF_COLUMNS + 1;
    for (int i = 0; i < numRows; i += 1) {
        listAnswersSorted.add(new ArrayList<HolderAnswer>());
    }

    // calculate column index where the "step" happens
    int step = listAnswers.size() % NUMBER_OF_COLUMNS;

    // loop through and add elements to listAnswersSorted
    int index = 0;
    int row = 0;
    int col = 0;
    while (index < listAnswers.size()) {
        listAnswersSorted.get(row).add(listAnswers.get(index));

        int rows = col < step ? numRows : numRows - 1;
        row += 1;
        if (row == rows) {
        row = 0;
        col += 1;
        }
        index += 1;
    }

    row = 0;
    int columncount = 1;
    for (ArrayList<HolderAnswer> sortedArrayList : listAnswersSorted) {
        for (HolderAnswer answer : sortedArrayList) {

            final RadioButton button = new RadioButton(this);
            button.setTag(answer.getRecID());
            button.setId(GlobalVars.getLatestId());
            button.setTextColor(Color.BLACK);
            GlobalVars.setupText(con, button, answer.getTextID());

            button.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {
                    button.setEnabled(false);
                    handlerReenableView.sendEmptyMessageDelayed(button.getId(), 1000);

                    button.setChecked(true);
                    radioGroup.check(button.getId());
                }
            });

            button.setLayoutParams(new TableRow.LayoutParams(columncount));
            alTableRows.get(row).addView(button);

            if (columncount==NUMBER_OF_COLUMNS) { 
                columncount = 1;
                radioGroup.addView(alTableRows.get(row));
                alTableRows.get(row).setOnClickListener(new View.OnClickListener() {

                    @Override
                    public void onClick(View v) {

                        for(int k=0;k<((TableRow) v).getChildCount();k++) { 
                            TableRow row = (TableRow) v;
                            for (int l=0;l<row.getChildCount();l++) { 
                                RadioButton tableButton =  (RadioButton) row.getChildAt(l);
                                if (tableButton.isChecked) { 
                                    radioGroup.check(tableButton.getId());
                                }
                            }
                        }
                    }

                });

            }

            else { 
                columncount++;
            }
            //if (row=NumberInColumns)
            count++;

        }

        if (count == listAnswers.size()) { 
            radioGroup.addView(alTableRows.get(row));
        }
        row++;

    }

    radioGroup.setOnCheckedChangeListener(new RadioGroupColumns.OnCheckedChangeListener() {
                @Override
                public void onCheckedChanged(RadioGroupColumns group, int checkedId) {
                    Log.d("We're here",String.valueOf(checkedId));
                    if (checkedId == -1) {
                        for (int i = 0; i < radioGroup.getChildCount(); i++) {
                            TableRow row = (TableRow)radioGroup.getChildAt(i); 
                            for (int j=0;j<row.getChildCount();j++) { 
                                if (RadioButton.class.isAssignableFrom(row.getChildAt(j).getClass())) {
                                    ((RadioButton) row.getChildAt(j)).setChecked(false);
                                }
                            }
                        }
                    } else {
                        for (int i = 0; i < radioGroup.getChildCount(); i++) {
                            TableRow row = (TableRow)radioGroup.getChildAt(i); 
                            for (int j=0;j<row.getChildCount();j++) { 
                                if (RadioButton.class.isAssignableFrom(row.getChildAt(j).getClass()) 
                                        && row.getChildAt(j).getId() != -1) {
                                    ((RadioButton) row.getChildAt(j)).setChecked(false);
                                }
                            }

                        }

                        RadioButton checkedRadioButton = (RadioButton) radioGroup.findViewById(checkedId);
                        checkedRadioButton.setChecked(true);
                        Log.d("checkedID onchecked Change()", String.valueOf(radioGroup.getCheckedRadioButtonId()));
                    }
                }

            });

} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-12-12T13:57:55.680

更新：自从我在这里发布代码以来，我更新了代码。更新的链接在此链接中： [https ://github.com/Gavras/MultiLineRadioGroup/blob/master/app/src/main/java/com/whygraphics/multilineradiogroup/MultiLineRadioGroup.java](https://github.com/Gavras/MultiLineRadioGroup/blob/master/app/src/main/java/com/whygraphics/multilineradiogroup/MultiLineRadioGroup.java)

当我需要多线无线电组时，我做了一些非常小的事情

这是一个扩展 RadioGroup 的自定义视图。

您可以连续选择所需的最大按钮数。它基于 TableLayout，因此它也对齐按钮。一切都记录在案。

```
/**
 * Layout that arranges radio buttons in multiple lines.
 * Only one radio button can be checked at the same time.
 * <p>
 * XML Attributes:
 * <p>
 * max_in_row:
 * A non-negative number that represents the maximum radio buttons in a row,
 * 0 for all in one line.
 * <p>
 * radio_buttons:
 * String-array resource reference that represents the texts of the desired radio buttons.
 * <p>
 * default_button:
 * String that represents the text or the index of the radio button to be checked by default.
 * The string should be in the following format:
 * for text: "text:[text-of-button]" where text-of-button is the text of the button to check.
 * for index: "index:[index-of-button]" where index-of-button is the index of the button to check.
 * when the prefix omitted, "text:" inserted implicitly.
 */
public class MultiLineRadioGroup extends RadioGroup {

    private static final String XML_DEFAULT_BUTTON_PREFIX_INDEX = "index:";
    private static final String XML_DEFAULT_BUTTON_PREFIX_TEXT = "text:";

    private static final int DEF_VAL_MAX_IN_ROW = 0;

    private OnCheckedChangeListener mOnCheckedChangeListener;

    private int mMaxInRow;

    // all buttons are stored in table layout
    private TableLayout mTableLayout;

    // list to store all the buttons
    private List<RadioButton> mRadioButtons;

    // the checked button
    private RadioButton checkedButton;

    /**
     * Creates a new MultiLineRadioGroup for the given context.
     *
     * @param context the application environment
     */
    public MultiLineRadioGroup(Context context) {
        super(context);
        init(null);
    }

    /**
     * Creates a new MultiLineRadioGroup for the given context
     * and with the specified set attributes.
     *
     * @param context the application environment
     * @param attrs   a collection of attributes
     */
    public MultiLineRadioGroup(Context context, AttributeSet attrs) {
        super(context, attrs);
        init(attrs);
    }

    // initializes the layout
    private void init(AttributeSet attrs) {
        mRadioButtons = new ArrayList<>();

        mTableLayout = getTableLayout();
        addView(mTableLayout);

        if (attrs != null)
            initAttrs(attrs);
    }

    // initializes the layout with the specified attributes
    private void initAttrs(AttributeSet attrs) {
        TypedArray typedArray = getContext().getTheme().obtainStyledAttributes(
                attrs, R.styleable.multi_line_radio_group,
                0, 0);
        try {
            // gets and sets the max in row.
            setMaxInRow(typedArray.getInt(R.styleable.multi_line_radio_group_max_in_row,
                    DEF_VAL_MAX_IN_ROW));

            // gets and adds the starting buttons
            CharSequence[] radioButtonStrings = typedArray.getTextArray(
                    R.styleable.multi_line_radio_group_radio_buttons);
            addButtons(radioButtonStrings);

            // gets the default button and checks it if presents.
            String string = typedArray.getString(R.styleable.multi_line_radio_group_default_button);
            if (string != null)
                setDefaultButton(string);

        } finally {
            typedArray.recycle();
        }
    }

    // checks the default button based on the passed string
    private void setDefaultButton(String string) {
        final int START_OF_INDEX = 6;
        final int START_OF_TEXT = 5;

        // the text of the button to check
        String buttonToCheck;

        if (string.startsWith(XML_DEFAULT_BUTTON_PREFIX_INDEX)) {
            String indexString = string.substring(START_OF_INDEX, string.length());
            int index = Integer.parseInt(indexString);
            if (index < 0 || index >= mRadioButtons.size())
                throw new IllegalArgumentException("index must be between 0 to getRadioButtonCount() - 1 [" +
                        (getRadioButtonCount() - 1) + "]");
            buttonToCheck = mRadioButtons.get(index).getText().toString();

        } else if (string.startsWith(XML_DEFAULT_BUTTON_PREFIX_TEXT)) {
            buttonToCheck = string.substring(START_OF_TEXT, string.length());

        } else { // when there is no prefix assumes the string is the text of the button
            buttonToCheck = string;
        }

        check(buttonToCheck);
    }

    /**
     * Returns the table layout to set to this layout.
     *
     * @return the table layout
     */
    protected TableLayout getTableLayout() {
        return (TableLayout) LayoutInflater.from(getContext())
                .inflate(R.layout.table_layout, this, false);
    }

    /**
     * Returns the table row to set in this layout.
     *
     * @return the table row
     */
    protected TableRow getTableRow() {
        return (TableRow) LayoutInflater.from(getContext())
                .inflate(R.layout.table_row, mTableLayout, false);
    }

    /**
     * Returns the radio button to set in this layout.
     *
     * @return the radio button
     */
    protected RadioButton getRadioButton() {
        return (RadioButton) LayoutInflater.from(getContext())
                .inflate(R.layout.radio_button, null);
    }

    /**
     * Register a callback to be invoked when a radio button is checked.
     *
     * @param onCheckedChangeListener the listener to attach
     */
    public void setOnCheckedChangeListener(OnCheckedChangeListener onCheckedChangeListener) {
        this.mOnCheckedChangeListener = onCheckedChangeListener;
    }

    /**
     * Sets the maximum radio buttons in a row, 0 for all in one line
     * and arranges the layout accordingly.
     *
     * @param maxInRow the maximum radio buttons in a row
     * @throws IllegalArgumentException if maxInRow is negative
     */
    public void setMaxInRow(int maxInRow) {
        if (maxInRow < 0)
            throw new IllegalArgumentException("maxInRow must not be negative");
        this.mMaxInRow = maxInRow;
        arrangeButtons();
    }

    /**
     * Adds a view to the layout
     * <p>
     * Consider using addButtons() instead
     *
     * @param child the view to add
     */
    @Override
    public void addView(View child) {
        addView(child, -1, child.getLayoutParams());
    }

    /**
     * Adds a view to the layout in the specified index
     * <p>
     * Consider using addButtons() instead
     *
     * @param child the view to add
     * @param index the index in which to insert the view
     */
    @Override
    public void addView(View child, int index) {
        addView(child, index, child.getLayoutParams());
    }

    /**
     * Adds a view to the layout with the specified width and height.
     * Note that for radio buttons the width and the height are ignored.
     * <p>
     * Consider using addButtons() instead
     *
     * @param child  the view to add
     * @param width  the width of the view
     * @param height the height of the view
     */
    @Override
    public void addView(View child, int width, int height) {
        addView(child, -1, new LinearLayout.LayoutParams(width, height));
    }

    /**
     * Adds a view to the layout with the specified layout params.
     * Note that for radio buttons the params are ignored.
     * <p>
     * Consider using addButtons() instead
     *
     * @param child  the view to add
     * @param params the layout params of the view
     */
    @Override
    public void addView(View child, ViewGroup.LayoutParams params) {
        addView(child, -1, params);
    }

    /**
     * Adds a view to the layout in the specified index
     * with the specified layout params.
     * Note that for radio buttons the params are ignored.
     * <p>
     * * Consider using addButtons() instead
     *
     * @param child  the view to add
     * @param index  the index in which to insert the view
     * @param params the layout params of the view
     */
    @Override
    public void addView(View child, int index, ViewGroup.LayoutParams params) {
        if (params == null) {
            params = new ViewGroup.LayoutParams(
                    ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.MATCH_PARENT);
        }

        if (child instanceof RadioButton)
            addButtons(index, ((RadioButton) child).getText());
        else
            super.addView(child, index, params);
    }

    /**
     * Adds radio buttons to the layout based on the texts in the radioButtons array.
     * Adds them in the last index.
     * If radioButtons is null does nothing.
     *
     * @param radioButtons the texts of the buttons to add
     */
    public void addButtons(CharSequence... radioButtons) {
        addButtons(-1, radioButtons);
    }

    /**
     * Adds radio buttons to the layout based on the texts in the radioButtons array.
     * Adds them in the specified index, -1 for the last index.
     * If radioButtons is null does nothing.
     *
     * @param index        the index in which to insert the radio buttons
     * @param radioButtons the texts of the buttons to add
     * @throws IllegalArgumentException if index is less than -1 or greater than the number of radio buttons
     */
    public void addButtons(int index, CharSequence... radioButtons) {
        if (index < -1 || index > mRadioButtons.size())
            throw new IllegalArgumentException("index must be between -1 to getRadioButtonCount() [" +
                    getRadioButtonCount() + "]");

        if (radioButtons == null)
            return;

        int realIndex = (index != -1) ? index : mRadioButtons.size();

        // adds the buttons to the list
        for (CharSequence text : radioButtons)
            mRadioButtons.add(realIndex++, createRadioButton(text));

        arrangeButtons();
    }

    // creates a radio button with the specified text
    private RadioButton createRadioButton(CharSequence text) {
        RadioButton radioButton = getRadioButton();
        radioButton.setText(text);
        radioButton.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                checkButton((RadioButton) v);

                if (mOnCheckedChangeListener != null)
                    mOnCheckedChangeListener.onCheckedChanged(MultiLineRadioGroup.this, checkedButton);
            }
        });
        return radioButton;
    }

    /**
     * Removes a view from the layout.
     * <p>
     * Consider using removeButton().
     *
     * @param view the view to remove
     */
    @Override
    public void removeView(View view) {
        super.removeView(view);
    }

    /**
     * Removes a view from the layout in the specified index.
     * <p>
     * Consider using removeButton().
     *
     * @param index the index from which to remove the view
     */
    @Override
    public void removeViewAt(int index) {
        super.removeViewAt(index);
    }

    /**
     * Removes the specified range of views from the layout.
     * <p>
     * Consider using removeButtons().
     *
     * @param start the start index to remove
     * @param count the number of views to remove
     */
    @Override
    public void removeViews(int start, int count) {
        super.removeViews(start, count);
    }

    /**
     * Removes all the views from the layout.
     * <p>
     * Consider using removeAllButtons().
     */
    @Override
    public void removeAllViews() {
        super.removeAllViews();
    }

    /**
     * Removes a radio button from the layout.
     * If the radio button is null does nothing.
     *
     * @param radioButton the radio button to remove
     */
    public void removeButton(RadioButton radioButton) {
        if (radioButton == null)
            return;

        removeButton(radioButton.getText());
    }

    /**
     * Removes a radio button from the layout based on its text.
     * Removes the first occurrence.
     * If the text is null does nothing.
     *
     * @param text the text of the radio button to remove
     */
    public void removeButton(CharSequence text) {
        if (text == null)
            return;

        int index = -1;

        for (int i = 0, len = mRadioButtons.size(); i < len; i++) {
            // checks if the texts are equal
            if (mRadioButtons.get(i).getText().equals(text)) {
                index = i;
                break;
            }
        }

        // removes just if the index was found
        if (index != -1)
            removeButton(index);
    }

    /**
     * Removes the radio button in the specified index from the layout.
     *
     * @param index the index from which to remove the radio button
     * @throws IllegalArgumentException if index is less than 0
     *                                  or greater than the number of radio buttons - 1
     */
    public void removeButton(int index) {
        removeButtons(index, 1);
    }

    /**
     * Removes all the radio buttons in the specified range from the layout.
     * Count can be any non-negative number.
     *
     * @param start the start index to remove
     * @param count the number of radio buttons to remove
     * @throws IllegalArgumentException if index is less than 0
     *                                  or greater than the number of radio buttons - 1
     *                                  or count is negative
     */
    public void removeButtons(int start, int count) {
        if (start < 0 || start >= mRadioButtons.size())
            throw new IllegalArgumentException("remove index must be between 0 to getRadioButtonCount() - 1 [" +
                    (getRadioButtonCount() - 1) + "]");

        if (count < 0)
            throw new IllegalArgumentException("count must not be negative");

        if (count == 0)
            return;

        int endIndex = start + count - 1;
        // if endIndex is not in the range of the radio buttons sets it to the last index
        if (endIndex >= mRadioButtons.size())
            endIndex = mRadioButtons.size() - 1;

        // iterates over the buttons to remove
        for (int i = endIndex; i >= start; i--) {
            RadioButton radiobutton = mRadioButtons.get(i);
            // if the button to remove is the checked button set checkedButton to null
            if (radiobutton == checkedButton)
                checkedButton = null;
            // removes the button from the list
            mRadioButtons.remove(i);
        }

        arrangeButtons();
    }

    /**
     * Removes all the radio buttons from the layout.
     */
    public void removeAllButtons() {
        removeButtons(0, mRadioButtons.size());
    }

    // arrange the button in the layout
    private void arrangeButtons() {
        // iterates over each button and puts it in the right place
        for (int i = 0, len = mRadioButtons.size(); i < len; i++) {
            RadioButton radioButtonToPlace = mRadioButtons.get(i);
            int rowToInsert = (mMaxInRow != 0) ? i / mMaxInRow : 0;
            int columnToInsert = (mMaxInRow != 0) ? i % mMaxInRow : i;
            // gets the row to insert. if there is no row create one
            TableRow tableRowToInsert = (mTableLayout.getChildCount() <= rowToInsert)
                    ? addTableRow() : (TableRow) mTableLayout.getChildAt(rowToInsert);
            int tableRowChildCount = tableRowToInsert.getChildCount();

            // if there is already a button in the position
            if (tableRowChildCount > columnToInsert) {
                RadioButton currentButton = (RadioButton) tableRowToInsert.getChildAt(columnToInsert);

                // insert the button just if the current button is different
                if (currentButton != radioButtonToPlace) {
                    // removes the current button
                    removeButtonFromParent(currentButton, tableRowToInsert);
                    // removes the button to place from its current position
                    removeButtonFromParent(radioButtonToPlace, (ViewGroup) radioButtonToPlace.getParent());
                    // adds the button to the right place
                    tableRowToInsert.addView(radioButtonToPlace, columnToInsert);
                }

                // if there isn't already a button in the position
            } else {
                // removes the button to place from its current position
                removeButtonFromParent(radioButtonToPlace, (ViewGroup) radioButtonToPlace.getParent());
                // adds the button to the right place
                tableRowToInsert.addView(radioButtonToPlace, columnToInsert);
            }
        }

        removeRedundancies();
    }

    // removes the redundant rows and radio buttons
    private void removeRedundancies() {
        // the number of rows to fit the buttons
        int rows;
        if (mRadioButtons.size() == 0)
            rows = 0;
        else if (mMaxInRow == 0)
            rows = 1;
        else
            rows = (mRadioButtons.size() - 1) / mMaxInRow + 1;

        int tableChildCount = mTableLayout.getChildCount();
        // if there are redundant rows remove them
        if (tableChildCount > rows)
            mTableLayout.removeViews(rows, tableChildCount - rows);

        tableChildCount = mTableLayout.getChildCount();
        int maxInRow = (mMaxInRow != 0) ? mMaxInRow : mRadioButtons.size();

        // iterates over the rows
        for (int i = 0; i < tableChildCount; i++) {
            TableRow tableRow = (TableRow) mTableLayout.getChildAt(i);
            int tableRowChildCount = tableRow.getChildCount();

            int startIndexToRemove;
            int count;

            // if it is the last row removes all redundancies after the last button in the list
            if (i == tableChildCount - 1) {
                startIndexToRemove = (mRadioButtons.size() - 1) % maxInRow + 1;
                count = tableRowChildCount - startIndexToRemove;

                // if it is not the last row removes all the buttons after maxInRow position
            } else {
                startIndexToRemove = maxInRow;
                count = tableRowChildCount - maxInRow;
            }

            if (count > 0)
                tableRow.removeViews(startIndexToRemove, count);
        }
    }

    // adds and returns a table row
    private TableRow addTableRow() {
        TableRow tableRow = getTableRow();
        mTableLayout.addView(tableRow);
        return tableRow;
    }

    // removes a radio button from a parent
    private void removeButtonFromParent(RadioButton radioButton, ViewGroup parent) {
        if (radioButton == null || parent == null)
            return;

        parent.removeView(radioButton);
    }

    /**
     * Returns the number of radio buttons.
     *
     * @return the number of radio buttons
     */
    public int getRadioButtonCount() {
        return mRadioButtons.size();
    }

    /**
     * Returns the radio button in the specified index.
     * If the index is out of range returns null.
     *
     * @param index the index of the radio button
     * @return the radio button
     */
    public RadioButton getRadioButtonAt(int index) {
        if (index < 0 || index >= mRadioButtons.size())
            return null;

        return mRadioButtons.get(index);
    }

    /**
     * Checks the radio button with the specified id.
     * If the specified id is not found does nothing.
     *
     * @param id the radio button's id
     */
    @Override
    public void check(int id) {
        if (id <= 0)
            return;

        for (RadioButton radioButton : mRadioButtons) {
            if (radioButton.getId() == id) {
                checkButton(radioButton);
                return;
            }
        }
    }

    /**
     * Checks the radio button with the specified text.
     * If there is more than one radio button associated with this text
     * checks the first radio button.
     * If the specified text is not found does nothing.
     *
     * @param text the radio button's text
     */
    public void check(CharSequence text) {
        if (text == null)
            return;

        for (RadioButton radioButton : mRadioButtons) {
            if (radioButton.getText().equals(text)) {
                checkButton(radioButton);
                return;
            }
        }
    }

    /**
     * Checks the radio button at the specified index.
     * If the specified index is invalid does nothing.
     *
     * @param index the radio button's index
     */
    public void checkAt(int index) {
        if (index < 0 || index >= mRadioButtons.size())
            return;

        checkButton(mRadioButtons.get(index));
    }

    // checks and switches the button with the checkedButton
    private void checkButton(RadioButton button) {
        if (button == null)
            return;

        // if the button to check is different from the current checked button
        if (button != checkedButton) {

            // if exists sets checkedButton to null
            if (checkedButton != null)
                checkedButton.setChecked(false);

            button.setChecked(true);
            checkedButton = button;
        }
    }

    /**
     * Clears the checked radio button
     */
    @Override
    public void clearCheck() {
        checkedButton.setChecked(false);
        checkedButton = null;
    }

    /**
     * Returns the checked radio button's id.
     * If no radio buttons are checked returns -1.
     *
     * @return the checked radio button's id
     */
    @Override
    public int getCheckedRadioButtonId() {
        if (checkedButton == null)
            return -1;

        return checkedButton.getId();
    }

    /**
     * Returns the checked radio button's index.
     * If no radio buttons are checked returns -1.
     *
     * @return the checked radio button's index
     */
    public int getCheckedRadioButtonIndex() {
        if (checkedButton == null)
            return -1;

        return mRadioButtons.indexOf(checkedButton);
    }

    /**
     * Returns the checked radio button's text.
     * If no radio buttons are checked returns null.
     *
     * @return the checked radio buttons's text
     */
    public CharSequence getCheckedRadioButtonText() {
        if (checkedButton == null)
            return null;

        return checkedButton.getText();
    }

    /**
     * Interface definition for a callback to be invoked when a radio button is checked.
     */
    public interface OnCheckedChangeListener {
        /**
         * Called when a radio button is checked.
         *
         * @param group  the MultiLineRadioGroup that stores the radio button
         * @param button the radio button that was checked
         */
        void onCheckedChanged(MultiLineRadioGroup group, RadioButton button);
    }
} 
```

值/attrs.xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <declare-styleable name="multi_line_radio_group">
        <attr name="max_in_row" format="integer" />
        <attr name="radio_buttons" format="reference" />
        <attr name="default_button" format="string" />
    </declare-styleable>
</resources> 
```

R.layout.table_layout：

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/table_layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:stretchColumns="*" /> 
```

R.layout.table_row：

```
<?xml version="1.0" encoding="utf-8"?>
<TableRow xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/table_row"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" /> 
```

R.layout.radio_button：（您可以在此处更改文本大小）

```
<?xml version="1.0" encoding="utf-8"?>
<RadioButton xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/radio_button"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:textSize="@dimen/radio_button_text_size" /> 
```

使用 xml 中的此布局的示例：

```
<?xml version="1.0" encoding="utf-8"?>
<[package].MultiLineRadioGroup xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:multi_line_radio_group="http://schemas.android.com/apk/res-auto"
    android:id="@+id/multi_line_radio_group"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    multi_line_radio_group:default_button="@string/defaultText"
    multi_line_radio_group:max_in_row="@integer/radio_button_max_in_row"
    multi_line_radio_group:radio_buttons="@array/radio_buttons" /> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-07-09T09:10:31.973

我创建了自己的 RadioGridLayout，其中包括 RadioGroup 代码并扩展了 GridLayout。您可以复制此代码。对我来说工作得很好。在您可以在 xml 中使用此布局之后。并自定义网格布局。

对于 R.styleable.RadioGridLayout_checked 我使用了这样的代码：

```
<resources>
    <declare-styleable name="RadioGridLayout">
        <attr name="checked" format="integer" />
    </declare-styleable>
</resources> 
```

```
public class RadioGridLayout extends GridLayout {

    private int mCheckedId = -1;
    private CompoundButton.OnCheckedChangeListener mChildOnCheckedChangeListener;
    private boolean mProtectFromCheckedChange = false;
    private OnCheckedChangeListener mOnCheckedChangeListener;
    private PassThroughHierarchyChangeListener mPassThroughListener;

    private void setCheckedId(@IdRes int id) {
        mCheckedId = id;
        if (mOnCheckedChangeListener != null) {
            mOnCheckedChangeListener.onCheckedChanged(this, mCheckedId);
        }
        AutofillManager afm = null;
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
            afm = getContext().getSystemService(AutofillManager.class);
        }
        if (afm != null) {
            if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
                afm.notifyValueChanged(this);
            }
        }
    }

    public void setOnCheckedChangeListener(OnCheckedChangeListener listener) {
        mOnCheckedChangeListener = listener;
    }

    public interface OnCheckedChangeListener {
        void onCheckedChanged(RadioGridLayout group, @IdRes int checkedId);
    }

    private int mInitialCheckedId = View.NO_ID;

    public RadioGridLayout(Context context) {
        super(context);
        setOrientation(VERTICAL);
        init();
    }

    public RadioGridLayout(Context context, AttributeSet attrs) {
        super(context, attrs);

        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
            if (getImportantForAutofill() == IMPORTANT_FOR_AUTOFILL_AUTO) {
                setImportantForAutofill(IMPORTANT_FOR_AUTOFILL_YES);
            }
        }

        TypedArray attributes = context.obtainStyledAttributes(
                attrs,
                R.styleable.RadioGridLayout,
                R.attr.radioButtonStyle, 0);

        int value = attributes.getResourceId(R.styleable.RadioGridLayout_checked, View.NO_ID);
        if (value != View.NO_ID) {
            mCheckedId = value;
            mInitialCheckedId = value;
        }

        attributes.recycle();
        init();
    }

    private void init() {
        mChildOnCheckedChangeListener = new CheckedStateTracker();
        mPassThroughListener = new PassThroughHierarchyChangeListener();
        super.setOnHierarchyChangeListener(mPassThroughListener);
    }

    @Override
    public void setOnHierarchyChangeListener(OnHierarchyChangeListener listener) {
        mPassThroughListener.mOnHierarchyChangeListener = listener;
    }

    @Override
    protected void onFinishInflate() {
        super.onFinishInflate();
        if (mCheckedId != -1) {
            mProtectFromCheckedChange = true;
            setCheckedStateForView(mCheckedId, true);
            mProtectFromCheckedChange = false;
            setCheckedId(mCheckedId);
        }
    }

    @Override
    public void addView(View child, int index, ViewGroup.LayoutParams params) {
        if (child instanceof RadioButton) {
            final RadioButton button = (RadioButton) child;
            if (button.isChecked()) {
                mProtectFromCheckedChange = true;
                if (mCheckedId != -1) {
                    setCheckedStateForView(mCheckedId, false);
                }
                mProtectFromCheckedChange = false;
                setCheckedId(button.getId());
            }
        }

        super.addView(child, index, params);
    }

    public void check(@IdRes int id) {
        if (id != -1 && (id == mCheckedId)) {
            return;
        }

        if (mCheckedId != -1) {
            setCheckedStateForView(mCheckedId, false);
        }

        if (id != -1) {
            setCheckedStateForView(id, true);
        }

        setCheckedId(id);
    }

    private void setCheckedStateForView(int viewId, boolean checked) {
        View checkedView = findViewById(viewId);
        if (checkedView != null && checkedView instanceof RadioButton) {
            ((RadioButton) checkedView).setChecked(checked);
        }
    }

    @IdRes
    public int getCheckedRadioButtonId() {
        return mCheckedId;
    }

    public void clearCheck() {
        check(-1);
    }

    @Override
    public GridLayout.LayoutParams generateLayoutParams(AttributeSet attrs) {
        return new GridLayout.LayoutParams(getContext(), attrs);
    }

    @Override
    protected boolean checkLayoutParams(ViewGroup.LayoutParams p) {
        return p instanceof RadioGroup.LayoutParams;
    }

    @Override
    protected GridLayout.LayoutParams generateDefaultLayoutParams() {
        return new LayoutParams();
    }

    @Override
    public CharSequence getAccessibilityClassName() {
        return RadioGroup.class.getName();
    }

    public static class LayoutParams extends GridLayout.LayoutParams {

        public LayoutParams(Spec rowSpec, Spec columnSpec) {
            super(rowSpec, columnSpec);
        }

        public LayoutParams() {
            super();
        }

        public LayoutParams(ViewGroup.LayoutParams params) {
            super(params);
        }

        public LayoutParams(MarginLayoutParams params) {
            super(params);
        }

        public LayoutParams(GridLayout.LayoutParams source) {
            super(source);
        }

        public LayoutParams(Context context, AttributeSet attrs) {
            super(context, attrs);
        }

        @Override
        protected void setBaseAttributes(TypedArray a,
                                         int widthAttr, int heightAttr) {

            if (a.hasValue(widthAttr)) {
                width = a.getLayoutDimension(widthAttr, "layout_width");
            } else {
                width = WRAP_CONTENT;
            }

            if (a.hasValue(heightAttr)) {
                height = a.getLayoutDimension(heightAttr, "layout_height");
            } else {
                height = WRAP_CONTENT;
            }
        }
    }

    private class CheckedStateTracker implements CompoundButton.OnCheckedChangeListener {
        @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
            if (mProtectFromCheckedChange) {
                return;
            }

            mProtectFromCheckedChange = true;
            if (mCheckedId != -1) {
                setCheckedStateForView(mCheckedId, false);
            }
            mProtectFromCheckedChange = false;

            int id = buttonView.getId();
            setCheckedId(id);
        }
    }

    private class PassThroughHierarchyChangeListener implements
            ViewGroup.OnHierarchyChangeListener {
        private ViewGroup.OnHierarchyChangeListener mOnHierarchyChangeListener;

        @Override
        public void onChildViewAdded(View parent, View child) {
            if (parent == RadioGridLayout.this && child instanceof RadioButton) {
                int id = child.getId();
                if (id == View.NO_ID) {
                    id = View.generateViewId();
                    child.setId(id);
                }
                ((RadioButton) child).setOnCheckedChangeListener(
                        mChildOnCheckedChangeListener);
            }

            if (mOnHierarchyChangeListener != null) {
                mOnHierarchyChangeListener.onChildViewAdded(parent, child);
            }
        }

        @Override
        public void onChildViewRemoved(View parent, View child) {
            if (parent == RadioGridLayout.this && child instanceof RadioButton) {
                ((RadioButton) child).setOnCheckedChangeListener(null);
            }

            if (mOnHierarchyChangeListener != null) {
                mOnHierarchyChangeListener.onChildViewRemoved(parent, child);
            }
        }
    }

    @Override
    public void onProvideAutofillStructure(ViewStructure structure, int flags) {
        super.onProvideAutofillStructure(structure, flags);
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
            structure.setDataIsSensitive(mCheckedId != mInitialCheckedId);
        }
    }

    @Override
    public void autofill(AutofillValue value) {
        if (!isEnabled()) return;

        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
            if (!value.isList()) {
                Timber.w(value + " could not be autofilled into " + this);
                return;
            }
        }

        int index = 0;
        if (android.os.Build.VERSION.SDK_INT >= android.os.Build.VERSION_CODES.O) {
            index = value.getListValue();
        }
        final View child = getChildAt(index);
        if (child == null) {
            Timber.w("RadioGroup.autoFill(): no child with index %s", index);
            return;
        }

        check(child.getId());
    }

    @Override
    public int getAutofillType() {
        return isEnabled() ? AUTOFILL_TYPE_LIST : AUTOFILL_TYPE_NONE;
    }

    @Override
    public AutofillValue getAutofillValue() {
        if (!isEnabled()) return null;

        final int count = getChildCount();
        for (int i = 0; i < count; i++) {
            final View child = getChildAt(i);
            if (child.getId() == mCheckedId) {
                if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
                    return AutofillValue.forList(i);
                }
            }
        }
        return null;
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-03-25T21:41:26.900

其他几个答案可以正常工作，但比简单情况所需的要复杂得多。如果您只是希望多个 RadioGroup 充当一个并且可以在单击时处理所有决策，那么您可以这样做：

在您的布局 XML 中，将相同的单击处理程序添加到您想要组合的**所有**RadioButtons：

```
android:onClick="handleCombinedClick" 
```

然后，让您的点击处理程序看起来像这样：

```
public void handleCombinedClick(View view) {
    // Clear any checks from both groups:
    rg1.clearCheck();
    rg2.clearCheck();

    // Manually set the check in the newly clicked radio button:
    ((RadioButton) view).setChecked(true);

    // Perform any action desired for the new selection:
    switch (view.getId()) {
        case R.id.radio_button_1:
            // do something
            break;

        case R.id.radio_button_2:
            // do something
            break;

        ...
    }
} 
```

这还有一个额外的好处，就是可以在同一个地方处理您的所有选择。如果您想将此扩展到 3 个或更多 RadioGroups，那么您只需`rgX.clearCheck();`为每个添加的组添加额外的一行。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-08-03T07:25:06.923

我确定您的问题现在已经得到解答，但这里有另一种看法。使用此代码，您可以将单选按钮包装到您想要的任何布局中（实际上您根本不需要单选组）。另外我建议使用线性布局来制作您需要的列/行。

我的代码基于@infografnet 和@lostdev（也感谢@Neromancer 的复合按钮建议！）

```
public class AdvRadioGroup {
    public interface OnButtonCheckedListener {
        void onButtonChecked(CompoundButton button);
    }

    private final List<CompoundButton> buttons;
    private final View.OnClickListener onClick = new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            setChecked((CompoundButton) v);
        }
    };

    private OnButtonCheckedListener listener;
    private CompoundButton lastChecked;

    public AdvRadioGroup(View view) {
        buttons = new ArrayList<>();
        parseView(view);
    }

    private void parseView(final View view) {
        if(view instanceof CompoundButton) {
            buttons.add((CompoundButton) view);
            view.setOnClickListener(onClick);
        } else if(view instanceof ViewGroup) {
            final ViewGroup group = (ViewGroup) view;
            for (int i = 0; i < group.getChildCount();i++) {
                parseView(group.getChildAt(i));
            }
        }
    }

    public List<CompoundButton> getButtons() { return buttons; }

    public CompoundButton getLastChecked() { return lastChecked; }

    public void setChecked(int index) { setChecked(buttons.get(index)); }

    public void setChecked(CompoundButton button) {
        if(button == lastChecked) return;

        for (CompoundButton btn : buttons) {
            btn.setChecked(false);
        }

        button.setChecked(true);

        lastChecked = button;

        if(listener != null) {
            listener.onButtonChecked(button);
        }
    }

    public void setOnButtonCheckedListener(OnButtonCheckedListener listener) { this.listener = listener; }
} 
```

用法（包含监听器）：

```
AdvRadioGroup group = new AdvRadioGroup(findViewById(R.id.YOUR_VIEW));
group.setOnButtonCheckedListener(new AdvRadioGroup.OnButtonCheckedListener() {
    @Override
    public void onButtonChecked(CompoundButton button) {
        // do fun stuff here!
    }
}); 
```

奖励：您可以获得最后检查的按钮，整个按钮的列表，并且您可以通过索引检查任何按钮！

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-11-19T07:27:23.623

这就是我在我的 XML 布局上所做的，它工作正常。

```
 <RadioGroup
                android:id="@+id/radioGroup"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginTop="2dp">

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="horizontal">

                <RadioButton
                    android:id="@+id/radioOwner"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:buttonTint="@color/login_button_color"
                    android:fontFamily="@font/rnhousesans_regular"
                    android:text="Owner"
                    android:textColor="@color/colorPrimary" />

                <RadioButton
                    android:id="@+id/radioLivingParents"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:buttonTint="@color/login_button_color"
                    android:fontFamily="@font/rnhousesans_regular"
                    android:text="Living with parents"
                    android:textColor="@color/colorPrimary" />

                </LinearLayout>

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="horizontal">

                <RadioButton
                    android:id="@+id/radioTenant"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:buttonTint="@color/login_button_color"
                    android:fontFamily="@font/rnhousesans_regular"
                    android:text="Tenant"
                    android:textColor="@color/colorPrimary" />

                <RadioButton
                    android:id="@+id/radioOther"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:buttonTint="@color/login_button_color"
                    android:fontFamily="@font/rnhousesans_regular"
                    android:text="Other"
                    android:textColor="@color/colorPrimary" />

                </LinearLayout>
            </RadioGroup> 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-04-23T20:34:05.113

您可以在 RadioGroup 中使用嵌套的 GridLayout，尽管您将失去 RadioGroup 的主要属性来管理 RadioButtons：例如单项选择。RadioButtons 应该是直接的孩子。

```
<RadioGroup
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    >

    <GridLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:columnCount="2"
        >

    <androidx.appcompat.widget.AppCompatRadioButton
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Text 1"
        />

    <androidx.appcompat.widget.AppCompatRadioButton
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Text 2"
        />

    <androidx.appcompat.widget.AppCompatRadioButton
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Text 3"
        />

    <androidx.appcompat.widget.AppCompatRadioButton
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Text 4"
        />

    <androidx.appcompat.widget.AppCompatRadioButton
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Text 5"
        />

    </GridLayout>
</RadioGroup> 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-09-14T11:35:15.307

此解决方案用于在单击主体内处理单击

**xml：**

```
 <LinearLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:orientation="horizontal"
                        android:weightSum="2">

                        <RadioGroup
                            android:id="@+id/radioGroup_action_1"
                            android:layout_width="0dp"
                            android:layout_height="wrap_content"
                            android:layout_marginStart="16dp"
                            android:layout_marginTop="16dp"
                            android:layout_marginEnd="16dp"
                            android:layout_marginBottom="16dp"
                            android:layout_weight="1"
                            android:orientation="vertical">

                            <RadioButton
                                android:id="@+id/radio_a"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:text="@string/a"
                                android:textColor="@color/textColor"
                                 />

                            <RadioButton
                                android:id="@+id/radio_b"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:text="@string/b"
                                android:textColor="@color/textColor" />

                            <RadioButton
                                android:id="@+id/radio_c"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:text="@string/c"
                                android:textColor="@color/textColor" />
                        </RadioGroup>

                        <RadioGroup
                            android:id="@+id/radioGroup_action_2"
                            android:layout_width="0dp"
                            android:layout_height="wrap_content"
                            android:layout_marginStart="16dp"
                            android:layout_marginTop="16dp"
                            android:layout_marginEnd="16dp"
                            android:layout_marginBottom="16dp"
                            android:layout_weight="1"
                            android:orientation="vertical">

                            <RadioButton
                                android:id="@+id/radio_d"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:checked="true"
                                android:text="@string/d"
                                android:textColor="@color/textColor" />

                            <RadioButton
                                android:id="@+id/radio_e"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:text="@string/e"
                                android:textColor="@color/textColor" />

                            <RadioButton
                                android:id="@+id/f"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:text="@string/f"
                                android:textColor="@color/textColor" />

                        </RadioGroup>
                    </LinearLayout> 
```

**代码 ：**

```
 private var isChecking = true

 mBinding.radioGroupAction1.setOnCheckedChangeListener { radioGroup, i ->
        if (i != -1 && isChecking) {
            isChecking = false
            mBinding.radioGroupAction2.clearCheck()
        }
        isChecking = true
        when (i) {
            R.id.a -> {
               Log.e("radioGroupAction:", "a")
            }
            R.id.b -> {
               Log.e("radioGroupAction:", "b")
            }
            R.id.c -> {
               Log.e("radioGroupAction:", "c")
            }
        }
    }
    mBinding.radioGroupAction2.setOnCheckedChangeListener { radioGroup, i ->
        if (i != -1 && isChecking) {
            isChecking = false
            mBinding.radioGroupAction1.clearCheck()
        }
        isChecking = true
        when (i) {
            R.id.d -> {
               Log.e("radioGroupAction:", "d")
            }
            R.id.e -> {
               Log.e("radioGroupAction:", "e")
            }
            R.id.f -> {
               Log.e("radioGroupAction:", "f")
            }
        }
    } 
```

祝你好运

# java - 我可以在 for 循环中使用字符串文字吗？

> ID：10425575
> 
> 赞同：4
> 
> 时间：2012-05-03T05:24:45.243
> 
> 标签：java, string

我编码如下，

```
for(int i=0 ; i<n; i++){

String a = someObject.getFirstName(); //may not come same value..
doManipulationon(a);
} 
```

在代码审查期间，人们要求我删除字符串文字`a`并`someObject.getFirstName()`直接用于操作。他们担心每次迭代都会在堆中创建字符串对象。

这是正确的方法吗？

我认为将 getter 分配给字符串变量会使代码更具可读性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T05:29:40.477

首先，这里没有字符串文字。

字符串文字是用双引号括起来的字符串表达式，例如“dog”。

您的审阅者表示他们不喜欢`a`用于保存您正在下一行操作的表达式的临时变量。

显然他们想让你说

```
doManipulationon(someObject.getFirstName()); 
```

删除临时变量会导致代码更紧凑。这通常是一个好主意，但并非总是如此。当您的“中间表达式”具有有趣的含义时，您可以使用临时变量，但在您的情况下，使用该名称`a`没有帮助。你可以说

```
String firstname = someObejct.getFirstName(); 
```

特别是在长表达式中，将部分结果分配给具有有意义名称的变量确实增加了可读性。

哦，关于他们在您的示例中关于将新字符串对象添加到堆中的评论 --- 不，不会。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T05:30:24.660

您是否在问是否可以将该循环编写为：

```
for(int i=0; i < n; i++) {
    doManipulation( someObject.getFirstName() );
} 
```

? 如果是这样，肯定是的。但是，`a`没有字符串文字——它*只是*一个变量名。使用它只会将底层字符串（在堆上）的引用推送到堆栈上——不管你有没有变量`a`都会发生这种情况（也就是说，它会发生在我的代码版本中）也写了）。即使没有，将引用推送到堆栈上也很便宜，这并不重要。但无论哪种方式，字符串都将位于堆上，因为字符串是对象，而对象位于堆上。

所以它只是风格，如果你发现将 String 分配给一个变量更具可读性，那么一定要这样做。它还可以使调试更容易，因为您可以在该`doManipulation`行放置一个断点并在进入该函数之前查看输入。（即使没有分配，你也可以这样做，但它稍微不那么方便。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T10:47:22.003

> 他们担心每次迭代都会在堆中创建字符串对象。

如果那是他们真正关心的，他们不知道他们在说什么。*当且仅当* 创建一个新字符串时，才会在堆上`someObject.getFirstName()`创建一个新字符串。创建一个临时变量来保存一个*引用*不会创建一个新的字符串。

临时变量花费一个堆栈槽。所有堆栈槽都在方法开始时分配，而不是在使用时分配。所以临时变量的空间成本是4-8个字节；时间成本是一次存储和一次加载；并且堆成本为零。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T06:58:23.803

您可以使用以下命令来检查字节码：

```
>javap -c -classpath /path/to/your/class/file classname 
```

不同之处在于您的代码有两个字节码指令：

```
astore_2 // store a reference into local variable 2

aload_2  // load a reference onto the stack from local variable 2 
```

所以，你的代码没问题，它的作用并不像其他人说的那样

> “他们担心每次迭代都会在堆中创建字符串对象。”

# c++ - 运算符重载（C++）有些奇怪

> ID：10425576
> 
> 赞同：0
> 
> 时间：2012-05-03T05:24:45.920
> 
> 标签：c++, operator-overloading

```
###MyClass.h###

    #ifndef _MyClass
    #define _MyClass
    #include <string>
    using namespace std;

    class MyClass
    {
    public:
        MyClass(const string name, const string text);
        void display(ostream & out) const;

        MyClass & operator = (const MyClass & m);
        int compare(const MyClass & right) const;

    private:
        string _name;
        string _text;
    };

    bool operator < (const MyClass & left, const MyClass & right);
    ostream & operator << (ostream & out, const MyClass & mc);
    #endif

###Node.h###

    #include <string>
    #include "MyClass.h"
    using namespace std;
    typedef MyClass * DataType; 

    class Node
    {
    private:
        DataType item; // data
        Node * lchild; // left child pointer
        Node * rchild; // right child pointer

    public:
        Node(DataType Item);
        DataType getItem() const;
        void setItem(const DataType  & data);
        Node* getLChild() const;
        void setLChild(Node * p);
        Node* getRChild() const;
        void setRChild(Node * p);
        virtual ~Node();
    };

###BST.h###

    #include "Node.h"
    using namespace std;

    class BST
    {
    private:
            Node * root; 
            bool Search(const DataType item, Node * r) const; 
            void Insert (DataType item, Node * ptr);
            void Destructor(const Node * r);

    public:
        BST();
        bool IsEmpty() const;
        void Insert(const DataType item);
        bool Search(const DataType item) const;
        virtual ~BST();
    };

###MyClass.cpp###

    #include <iostream>
    #include "MyClass.h"
    using namespace std;

    MyClass::MyClass(const string name, const string text)
    {
        _name = name;
        _text = text;
    }

    void MyClass::display(ostream & out) const
    {
        out << "Name: " << _name << endl;
        out << "Text: " << _text << endl;
    }

    MyClass & MyClass::operator = (const MyClass & m)  
    {  
        if (this == & m)
            return *this;

        _name = m._name;
        _text = m._text;

        return *this; 
    }

    int MyClass::compare(const MyClass & right) const
    {
        return _name.compare(right._name);
    }

    bool operator < (const MyClass & left, const MyClass & right)  
    {  
        return left.compare(right) > 0;
    }

    ostream & operator << (ostream & out, const MyClass & mc)
    {
        mc.display(out);
        return out;
    }

###Node.cpp###

    #include "Node.h"

    Node::Node(DataType Item):item(Item)
    {
        lchild = 0;
        rchild = 0;
    }

    DataType Node::getItem() const
    {
        DataType anItem = item; 
        return anItem;
    }

    void Node::setItem( const DataType & data)
    {
        item = data;
    }

    Node* Node::getLChild() const
    {
        Node * p = lchild;
        return p;
    }

    void Node::setLChild(Node * p)
    {
        lchild = p;
    }

    Node* Node::getRChild() const
    {
        Node * p = rchild;
        return p;
    }

    void Node::setRChild(Node * p)
    {
        rchild = p;
    }

    Node::~Node()
    {
    }

###BST.cpp###

    #include <iostream>
    #include "BST.h"
    using namespace std;

    bool BST::Search(const DataType item) const
    {
        return Search(item, root);
    }

    bool BST::Search(const DataType item, Node * r) const
    {
        if(r != 0)
        {
            if (item == r->getItem())
                return true;
            else
            {
                if (item < r->getItem())
                    return Search(item, r->getLChild());
                else
                    return Search(item, r->getRChild());
            }
        }
        else
            return false;
    }

    BST::BST()
    {
        root = 0;
    }

    bool BST::IsEmpty() const
    {
        return (root == 0);
    }

    void BST::Insert(const DataType item)
    {
        if(root == 0)
            root = new Node(item);
        else
            Insert(item, root);
    }

    void BST::Insert(DataType item, Node * ptr)
    {
        if (item < ptr->getItem())
        {
            if (ptr->getLChild() == 0)
                ptr->setLChild(new Node(item));
            else 
                Insert(item, ptr->getLChild());
        }
        else 
        {
            if (ptr->getRChild() == 0)
                ptr->setRChild(new Node(item));
            else 
                Insert(item, ptr->getRChild());
        }
    } 

    void BST::Destructor(const Node * r)
    {
        if(r!=0)
        {
            Destructor( r->getLChild());
            Destructor( r->getRChild());
            delete r;
        }
    }

    BST::~BST()
    {
        Destructor(root);
    }

###main.cpp###

    #include <iostream>
    #include "MyClass.h"
    #include "BST.h"
    using namespace std;

    void main()
    {
        MyClass * mc1 = new MyClass("Tree","This is a tree");
        MyClass * mc2 = new MyClass("Book","This is a book");
            MyClass * mc3 = new MyClass("Zoo","This is a zoo");

        BST * tree = new BST();
        tree->Insert(mc1);
        tree->Insert(mc2);
        tree->Insert(mc3);

        cout << boolalpha << ("Book" < "Tree") << endl;
        cout << (mc2 < mc1) << endl;

        cout << (tree->Search(new MyClass("Book",""))) << endl;
    } 
```

> 结果为真假假
> 
> 1.  我不知道我的运算符重载有什么问题？（mc2 应该小于 mc1）
> 2.  我不确定这对于在 BST 中搜索“MyClass”节点是否正确？结果是“找不到”....我追踪到“BST.cpp”，发现问题也出现在“if (item < r->getItem())”
> 
> 任何人都可以帮助我或给我一个提示....非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T05:26:31.370

这里你只是比较指针，即内存地址：

```
cout << (mc2 < mc1) << endl; 
```

要比较对象，您需要取消引用指针：

```
cout << ((*mc2) < (*mc1)) << endl; 
```

在您的代码片段中，没有理由将`mc1`,`mc2`等作为指针，因此您可以通过直接在堆栈上创建对象来避免该问题：

```
MyClass mc1("Tree","This is a tree"); 
```

等等。我什至会更进一步说，`new`如果您确实确定需要并且有充分的理由不在堆栈上自动分配，您应该只动态分配对象。如果您真的必须使用动态分配的指针，请查看[C++ smart pointers](http://en.wikipedia.org/wiki/Smart_pointer)。

# android - App Engine API Android 客户端

> ID：10425577
> 
> 赞同：0
> 
> 时间：2012-05-03T05:24:50.370
> 
> 标签：android, python, google-app-engine, channel-api

我正在寻找 android 的客户端版本，以便在我的应用程序上使用 appengine 通道 API。我见过其他一些人发展起来，但他们似乎都不是稳定的。有些人必须对 JavaScript 等使用 web 视图。我不想要这样的东西。

关于它的任何资源，或者我可以使用的任何明智的方法？

顺便说一句，我正在使用带有 python 的 appengine。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T20:19:25.393

There's and official [C2DM service](https://developers.google.com/android/c2dm/) to receive updates from the cloud on mobile devices, which works in a way similar to channels, by opening a socket and listening for updates. Is there any reason why you don't want to use C2DM?

# ms-access - 防止 MS Access 自动更新查询

> ID：10425581
> 
> 赞同：1
> 
> 时间：2012-05-03T05:25:05.250
> 
> 标签：ms-access

当表不再存在时，有没有办法阻止 Access 更新查询，特别是删除连接？

例如，以下查询与临时表一起使用；

```
Select Table1.Col1, Table1.Col2
From   Table1 
  left join Table2 on Table1.Col1 = Table2.Col1
Where  Table2.Col1 is null 
```

如果临时表随后被删除并且查询打开 Access 会删除导致的连接；

```
Select Table1.Col1, Table1.Col2
From   Table1, Table2
Where  Table2.Col1 is null 
```

这类似于[阻止访问更改查询中提出的问题](https://stackoverflow.com/questions/1830856/prevent-access-from-changing-queries)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T08:21:59.887

尝试[禁用 AutoCorrect](http://allenbrowne.com/bug-03.html)，关闭并重新打开您的数据库，看看是否仍然发生这种情况。

在某些情况下，Access 可能会“做正确的事”并自动更新您的查询。
在这种情况下，您可以使用以下技术之一：

*   将 SQL 保留在 VBA 代码中。
    您可以根据需要绑定生成的 SQL 或重新创建查询，例如：

    ```
    ' Bind form to manually using the Form Open event '
    Private Sub Form_Open(Cancel As Integer)
        Dim sql As String
        sql = sql & "Select Table1.Col1, Table1.Col2 "
        sql = sql & "From   Table1 "
        sql = sql & "  left join Table2 on Table1.Col1 = Table2.Col1 "
        sql = sql & "Where  Table2.Col1 is null"
        ' Bind the form directly to the SQL '
        Me.RecordSource = sql
    End Sub 
    ```

*   将查询的 SQL 保存到文件中，并根据需要重新加载：

    ```
    ' Save the query to a text file, in the application folder '
    Application.SaveAsText acQuery, "MyQuery", CurrentProject.Path & "\myQuery.txt"

    ' Load the the query from its previously saved file '
    Application.LoadFromText acQuery, "MyQuery", CurrentProject.Path & "\myQuery.txt" 
    ```

# dependency-injection - Symfony2：如何在侦听器中获取配置参数？

> ID：10425583
> 
> 赞同：8
> 
> 时间：2012-05-03T05:25:15.780
> 
> 标签：dependency-injection, symfony

我有一个监听服务。我想读取其中的一些配置参数。

如何访问侦听器类中的服务容器？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-03T08:29:52.840

您可以使用以下`%your_param_name%`符号将容器参数传递到您的服务中：

```
services:
    kernel.listener.locale_listener:
        class: My\BundleName\Listener\LocaleListener
        tags:
            - { name: kernel.event_listener, event: kernel.request, method: onKernelRequest }
        arguments: [ @router, @service_container, %your_param_name% ] 
```

这将在您的服务的构造方法中显示为（在此示例中）第三个参数：

```
public function __construct($router, $container, $paramValue)
{
    // ...
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-03T05:59:43.730

已解决：我们需要将`@service_container`自身作为参数传递给监听服务

**MyBundleName/Resources/services.yml**：

```
services:
    kernel.listener.locale_listener:
        class: My\BundleName\Listener\LocaleListener
        tags:
            - { name: kernel.event_listener, event: kernel.request, method: onKernelRequest }
        arguments: [ @service_container ] 
```

**监听类：**

```
class LocaleListener
{
    protected $container;

    public function __construct(\Symfony\Component\DependencyInjection\Container $container)
    {
        $this->container = $container;
    }
..

    public function Myfunction()
    {
        $languages = $this->container->getParameter('languages');
    }

} 
```

# android - Android：在 Main Activity 中动态填充一个 SlidingDrawer（或一个小列表）

> ID：10425588
> 
> 赞同：1
> 
> 时间：2012-05-03T05:25:47.027
> 
> 标签：android, android-layout, android-activity, slidingdrawer

我正在开发一个 Android 地图应用程序，该应用程序允许用户在 EditText 框中键入搜索参数，然后使用 MapView 上的图钉绘制与查询匹配的最近目的地。

单击图钉将提供有关位置的信息，但我想预先向用户提供更多信息。我认为 SlidingDrawer 可以填充并打开以向用户显示目的地的名称/距离。

在这方面花了很多时间，读了很多书，但进展甚微，我现在向社区寻求帮助。

我遇到的问题是我无法弄清楚如何在主要活动中填充 SlidingDrawer 的内容。我能够启动一项新活动，但这会使我的 MapView 离开屏幕。我需要能够看到地图以及 SlidingDrawer。如果没有将其设置为 Activity，我无法弄清楚如何填充 SlidingDrawer。

（而且我还应该说，它不一定需要是包含目的地列表的 SlidingDrawer。我可以修改我的布局以制作一个小的（最多 3 个项目）列表，如果那样的话，可以拿走一些地图的房地产更容易，但我也不知道该怎么做。）

这是调用我的 SlidingDrawer 的代码：

```
 //call SlidingDrawer
        Intent drawerIntent = new Intent(this, SlidingDrawerFinal.class);
        drawerIntent.putExtra("lat", lat);
        drawerIntent.putExtra("lon", lon);
        int numberOfTargetsForList = numberOfLoops;
        drawerIntent.putExtra("numberOfTargetsForList", numberOfTargetsForList);
        for(int i = 0; i < target.length; i++){
            drawerIntent.putExtra("target" + Integer.toString(i), target[i]);
        }
        this.startActivity(drawerIntent); 
```

这是填充抽屉内列表的 SlidingDrawer 类（扩展 Activity）中的代码：

```
 View inflatedDrawerLayout = getLayoutInflater().inflate(R.layout.drawer_main, null);
    int width = getWindow().getAttributes().width;
    int height = 300;
    LayoutParams params = new LayoutParams(width, height);
    getWindow().addContentView(inflatedDrawerLayout, params);

    // add some data
            ArrayList<MyData> myDataList = new ArrayList<MyData>();
            myData = new MyData[numberOfTargets];

            for(int i = 0; i < numberOfTargets; i++){
                String lineTwo = "";
                if(target[i].getRating().equals("Not Yet Rated")){
                    lineTwo = "      " + target[i].getRating() + "                           " + 
                            Double.toString((Math.round(target[i].getDistance()*100.0))/100.0) + " miles";
                }
                else{
                    lineTwo = "     rating: " + target[i].getRating() + "/5 stars                    " + 
                            Double.toString((Math.round(target[i].getDistance()*100.0))/100.0) + " miles";  
                }
                String lineOne = (Integer.toString(i + 1) + ": " + target[i].getName() + ", " + target[i].getVicinity()) + "\n" + lineTwo;
                myData[i] = new MyData(lineOne, i);
                myDataList.add(myData[i]);

            }                

            mListView = (ListView) findViewById(R.id.listview_);

            mListView.setAdapter(new MyListAdapter(this, R.layout.drawer_row, myDataList)); 
            drawer = (SlidingDrawer) findViewById(R.id.drawer);
            handleButton = (Button) findViewById(R.id.handle);
            drawer.animateOpen();

            drawer.setOnDrawerOpenListener(new OnDrawerOpenListener() {

            public void onDrawerOpened() {
                    handleButton.setBackgroundResource(R.drawable.handle_down_white);
                }
            }); 
```

我的布局文件：

主.xml：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="horizontal"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:padding="10dip">
        <EditText
            android:id="@+id/geocode_input"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:hint="@string/placeName"
            android:inputType="text"
            android:lines="1" />    
        <Button 
            android:id="@+id/geocode_button"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight="1" 
            android:text="@string/goLabel" />
    </LinearLayout>
    <FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="fill_parent" 
            android:layout_height="fill_parent" >           
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >
        <view android:id="@+id/mv"
            class="com.google.android.maps.MapView"
            android:layout_width="fill_parent"
            android:layout_height="0dip"
            android:layout_weight="1" 
            android:clickable="true"
            android:apiKey="my_API_Key"/>
     </LinearLayout>  
    <include layout="@layout/drawer_main"/>
    </FrameLayout>
</LinearLayout> 
```

最后，drawer_main.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent" 
        android:layout_height="fill_parent" >
    <SlidingDrawer xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/drawer" 
        android:handle="@+id/handle"
        android:content="@+id/content" 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:background="@null"

        android:layout_gravity="bottom">

            <LinearLayout 
                android:id="@id/content"
                android:layout_width="fill_parent" 
                android:layout_height="fill_parent"
                android:orientation="vertical">

                    <TextView 
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content" 
                        android:textSize="14dip"
                        android:textStyle="bold|italic"
                        android:background="@android:color/white"
                        android:textColor="@android:color/black"
                        android:text="@string/top_search_results" >
                    </TextView>

                    <View 
                        android:background="@android:drawable/divider_horizontal_bright"
                        android:layout_width="fill_parent"
                        android:layout_height="2dp" >
                    </View>

                    <ListView 
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content" 
                        android:id="@+id/listview_"
                        android:background="@android:color/black"
                        android:textColor="@android:color/white"
                        android:divider="@android:color/transparent" 
                        android:dividerHeight="2dp" >
                    </ListView>

            </LinearLayout>

            <Button 
                android:id="@id/handle" 
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" 
                android:background="@drawable/handle_down_white">
            </Button>

    </SlidingDrawer>
</FrameLayout> 
```

对不起，这太长了。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T05:28:18.323

您可以使用弹出窗口。

```
View popupView = layoutInflater.inflate(R.layout.popup_window, null);

    final PopupWindow popupWindow = new PopupWindow(popupView,
            LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);

    ImageButton btnCancel = (ImageButton) popupView
            .findViewById(R.id.btnCancel);

popupWindow.showAtLocation(LayoutView, Gravity.BOTTOM
            | Gravity.CENTER_HORIZONTAL, (LayoutView.getWidth() - popupView
            .getWidth()) / 2, LayoutView.getHeight()
            - popupWindow.getHeight() - 10);
    popupWindow.setAnimationStyle(Animation.RELATIVE_TO_SELF);
    popupWindow.setFocusable(true);
    popupWindow.update(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T16:14:56.753

我选择的解决方案在编程上不太理想，但布局效果很好。因为我知道我不会有超过 3 个结果，所以我只是将布局更改为在我的搜索栏下包含（最多）3 个小型 TextView，并且（遗憾地）完全摆脱了 SlidingDrawer。当结果返回时，我会根据需要填充尽可能多的 TextView，每个都有一个 onClickListener。它不能很好地扩展，而且一切都是硬编码的；但它有效。随着我对 Android 的了解更多，我可能会尝试改进此解决方案。

新版面：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="horizontal"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:padding="10dip">

        <EditText
            android:id="@+id/geocode_input"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:hint="@string/placeName"
            android:inputType="text"
            android:lines="1" />

        <Button 
            android:id="@+id/geocode_button"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight="1" 
            android:text="@string/goLabel" />

    </LinearLayout>

    <TextView 
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" 
            android:textSize="13dip"
            android:textStyle="bold|italic"
            android:background="@android:color/black"
            android:textColor="@android:color/white"
            android:id="@+id/search_results_header" >
    </TextView>

    <View   android:id="@+id/bar_over_one"       
            android:layout_width="fill_parent" 
            android:layout_height="1dp" 
            android:background="#DADADA" />

    <TextView 
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" 
            android:textSize="11dip"
            android:background="@android:color/black"
            android:textColor="@android:color/white"
            android:id="@+id/line_one" >
    </TextView>

    <View   android:id="@+id/bar_over_two"       
            android:layout_width="fill_parent" 
            android:layout_height="1dp" 
            android:background="#DADADA" />

    <TextView 
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" 
            android:textSize="11dip"
            android:background="@android:color/black"
            android:textColor="@android:color/white"
            android:id="@+id/line_two" >
    </TextView>

    <View   android:id="@+id/bar_over_three"       
            android:layout_width="fill_parent" 
            android:layout_height="1dp" 
            android:background="#DADADA" />

    <TextView 
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" 
            android:textSize="11dip"
            android:background="@android:color/black"
            android:textColor="@android:color/white"
            android:id="@+id/line_three" >
    </TextView>

    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >
        <view android:id="@+id/mv"
            class="com.google.android.maps.MapView"
            android:layout_width="fill_parent"
            android:layout_height="0dip"
            android:layout_weight="1" 
            android:clickable="true"
            android:apiKey="0fmGmyFrFDUrPGrwXR_scZZxVx6CkSdK-sys-Qw"/>
     </LinearLayout>  
</LinearLayout> 
```

新代码：

```
 private void populateList(int numberOfTargetsForList){
    TextView header = (TextView) findViewById(R.id.search_results_header);
    header.setText("Top Search Results");

    int i = 0;
    //first line in list
    barOverOne.setVisibility(View.VISIBLE);
    String ratingAndDistance = "";
    if(target[i].getRating().equals("Not Yet Rated")){
        ratingAndDistance = "      " + target[i].getRating() + "                           " + 
                Double.toString((Math.round(target[i].getDistance()*100.0))/100.0) + " miles";
    }
    else{
        ratingAndDistance = "     rating: " + target[i].getRating() + "/5 stars                    " + 
                Double.toString((Math.round(target[i].getDistance()*100.0))/100.0) + " miles";  
    }
    String detailsForLineOne = (Integer.toString(i + 1) + ": " + target[i].getName() + ", " + target[i].getVicinity()) + "\n" + ratingAndDistance;
    TextView lineOne = (TextView) findViewById(R.id.line_one);
    lineOne.setText(detailsForLineOne);
    lineOne.setOnClickListener(this);

    i++; 
```

...（类似的块处理 i = 1 和 i =2 的情况）

最后，在我的 onClick() 方法中：

```
 case R.id.line_one:{
    String locForURL = "origin=" + Double.toString(lat/1000000.0) + 
            "," + Double.toString(lon/1000000.0) + "&destination=" + 
            Double.toString(target[0].getLat()/1000000.0) + "," + 
            Double.toString(target[0].getLon()/1000000.0);
    Intent intent = new Intent(this, ParsingXMLDirectionsWithListView.class);
        intent.putExtra("dirTitle", target[0].getName()+ " (" +
            Double.toString((Math.round(target[0].getDistance()*100.0))/100.0) + " miles)");
        intent.putExtra("locForURL", locForURL);
    this.startActivity(intent); 
    break;
}//line_one 
```

...（第二行和第三行的类似块）

不完美，但很好。至少从用户端看起来相当不错，而且我永远不会通过继续使用 SlidingDrawer 路线来满足我的最后期限。也许当我有更多的空闲时间时，我会看看我是否能解决这个问题......

# php - 通过js创建文本框

> ID：10425589
> 
> 赞同：1
> 
> 时间：2012-05-03T05:25:52.100
> 
> 标签：php, javascript

我的代码正在工作并将我的文本从文本框带到下一页+我的输入控件通过 js 到下一页但突然出现以下代码中的错误

```
<html>
<head>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.js"></script>
<script type="text/javascript">
var i=2;
function AddTextbox(){
container.innerHTML=container.innerHTML+'<input type="text" name="'+ i + '">';
i++;
}
</script>

</head>
<body>
<form action="next.php" method="post">
<input type="text" name="1" />
<input type="button" onClick="AddTextbox" name="btn" value="add" />
<input type="submit" name="submit" value="sub" />
<div id="container"></div>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T05:33:02.333

```
<html>
<head>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.js"></script>
<script type="text/javascript">
var i=2;
$(document).ready(function() {
  $('#button').click(function(){
      $('#container').append('<input type="text" name="'+ i + '"><br/>')
      i++;
  });
});
</script>

</head>
<body>
<form action="next.php" method="post">
<input type="text" name="1" />
<input type="button" id="button" name="btn" value="add" />
<input type="submit" name="submit" value="sub" />
<div id="container"></div>
</form>
</body>
</html> 
```

使用点击功能。这是你需要的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T08:26:25.507

```
<html>
  <head>
    <script>
      function addElement(tag_type, target, parameters) {
        //Create element
        var newElement = document.createElement(tag_type);

        //Add parameters
        if (typeof parameters != 'undefined') {
          for (parameter_name in parameters) {
            newElement.setAttribute(parameter_name, parameters[parameter_name]);
          }
        }

        //Append element to target
        document.getElementById(target).appendChild(newElement);
      }
    </script>
  </head>
  <body>
    <div id="targetTag"></div>
    <input type="button" onClick="addElement('INPUT','targetTag',{id:'my_input_tag', name:'my_input_tag', type:'text', size:'5'}); return false;" value="Add Input Tag" />
    <input type="button" onClick="addElement('INPUT','targetTag'); return false;" value="Add Input Tag W/O Parameters" />
  </body>
</html> 
```

**注意**如果您在 IE 中执行此操作后检查 DOM，您会发现 name 字段对您不可用。IE 将此字段声明为只读，这就是您看不到它的原因。但是，该字段将被正确提交，如以下测试代码所示：

```
<?php
if (isset($_POST)) {
  print '<pre>'.print_r($_POST,true).'</pre>';
}
?>
<html>
  <head>
    <script>
      function addElement(tag_type, target, parameters) {
        //Create element
        var newElement = document.createElement(tag_type);

        //Add parameters
        if (typeof parameters != 'undefined') {
          for (parameter_name in parameters) {
            newElement.setAttribute(parameter_name, parameters[parameter_name]);
          }
        }

        //Append element to target
        document.getElementById(target).appendChild(newElement);
      }
    </script>
  </head>
  <body>
    <form method="post">
    <div id="targetTag"></div>
    <input type="submit" value="Check"/>
    </form>
    <input type="button" onClick="addElement('INPUT','targetTag',{'id':'my_input_tag', 'name':'my_input_tag', 'type':'text', 'size':'5'}); return false;" value="Add Input Tag" />
    <input type="button" onClick="addElement('INPUT','targetTag'); return false;" value="Add Input Tag W/O Parameters" />
  </body>
</html> 
```

# android - 加载 JNI 库的应用程序对象上的 Robolectric 坦克。我可以得到解决方法吗？

> ID：10425591
> 
> 赞同：10
> 
> 时间：2012-05-03T05:26:22.707
> 
> 标签：android, unit-testing, robolectric

我的 Android 应用程序的`Application`对象加载了一个 JNI 库，而 Robolectric 似乎不喜欢这样。当我去运行我的测试时，Robolectric 胡扯了，我得到了这个堆栈跟踪：

> java.lang.UnsatisfiedLinkError: java.lang.ClassLoader.loadLibrary(ClassLoader.java:1758) 处 java.lang.Runtime.loadLibrary0(Runtime.java:823) 处 java.library.path 中没有 cperryinc-jni .System.loadLibrary(System.java:1045) 在 com.cperryinc.application.MoolaApplication.(MoolaApplication.java:24) 在 java.lang.Class.forName0(Native Method) 在 java.lang.Class.forName(Class. java:169) at com.xtremelabs.robolectric.internal.ClassNameResolver.safeClassForName(ClassNameResolver.java:36) at com.xtremelabs.robolectric.internal.ClassNameResolver.resolve(ClassNameResolver.java:15) at com.xtremelabs.robolectric.ApplicationResolver .newApplicationInstance(ApplicationResolver.java:71) 在 com.xtremelabs.robolectric.ApplicationResolver.resolveApplication(ApplicationResolver.java:28) 在 com.xtremelabs。robolectric.RobolectricTestRunner.createApplication(RobolectricTestRunner.java:483) at com.xtremelabs.robolectric.RobolectricTestRunner.setupApplicationState(RobolectricTestRunner.java:360) at com.xtremelabs.robolectric.RobolectricTestRunner.internalBeforeTest(RobolectricTestRunner.java:299) at com.xtremelabs .robolectric.RobolectricTestRunner.methodBlock(RobolectricTestRunner.java:277) 在 org.junit.runners.BlockJUnit4ClassRunner.runNotIgnored(BlockJUnit4ClassRunner.java:79) 在 org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:71) 在 org. junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49) at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193) at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)在 org.junit.runners.ParentRunner。runChildren(ParentRunner.java:191) at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42) at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184) at org.junit.runners .ParentRunner.run(ParentRunner.java:236) at org.junit.runner.JUnitCore.run(JUnitCore.java:157) at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:76) at com.intellij。 rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:182) 在 com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:62) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)junit.runners.ParentRunner.access$000(ParentRunner.java:42) at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184) at org.junit.runners.ParentRunner.run(ParentRunner.java:236)在 org.junit.runner.JUnitCore.run(JUnitCore.java:157) 在 com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:76) 在 com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter .java:182) 在 com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:62) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java :39) 在 com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)junit.runners.ParentRunner.access$000(ParentRunner.java:42) at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184) at org.junit.runners.ParentRunner.run(ParentRunner.java:236)在 org.junit.runner.JUnitCore.run(JUnitCore.java:157) 在 com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:76) 在 com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter .java:182) 在 com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:62) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java :39) 在 com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)ParentRunner$2.evaluate(ParentRunner.java:184) at org.junit.runners.ParentRunner.run(ParentRunner.java:236) at org.junit.runner.JUnitCore.run(JUnitCore.java:157) at com.intellij。 junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:76) 在 com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:182) 在 com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter. java:62) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 com.intellij.rt.execution.application.AppMain.main(AppMain.java: 120)ParentRunner$2.evaluate(ParentRunner.java:184) at org.junit.runners.ParentRunner.run(ParentRunner.java:236) at org.junit.runner.JUnitCore.run(JUnitCore.java:157) at com.intellij。 junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:76) 在 com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:182) 在 com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter. java:62) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 com.intellij.rt.execution.application.AppMain.main(AppMain.java: 120)junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:76) 在 com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:182) 在 com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter. java:62) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 com.intellij.rt.execution.application.AppMain.main(AppMain.java: 120)junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:76) 在 com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:182) 在 com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter. java:62) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 com.intellij.rt.execution.application.AppMain.main(AppMain.java: 120)在 com.intellij.rt.execution.application.AppMain.main(AppMain.java:120) 调用(NativeMethodAccessorImpl.java:39)在 com.intellij.rt.execution.application.AppMain.main(AppMain.java:120) 调用(NativeMethodAccessorImpl.java:39)

我不确定我能做些什么。关于解决方法的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T21:53:21.463

## 解决方案适用于 Robolectric 1.2，而不是 2.+

感谢 Jan Berkel 在这里回答这个问题： [https ://groups.google.com/d/msg/robolectric/beW9XjT8E1A/pJQrRaybN30J](https://groups.google.com/d/msg/robolectric/beW9XjT8E1A/pJQrRaybN30J)

```
class MyJniClass {
 static {
        try {
            System.loadLibrary("libname");
        } catch (UnsatisfiedLinkError e) {
            // only ignore exception in non-android env
            if ("Dalvik".equals(System.getProperty("java.vm.name"))) throw e;
        }
    }
} 
```

> 然后在测试运行器中：

```
public class MyTestRunner  extends RobolectricTestRunner {
   public MyTestRunner(Class testClass) throws InitializationError {
         // remove native calls + replace with shadows
        addClassOrPackageToInstrument("com.example.jni.MyJniClass");
   }

   protected void bindShadowClasses() {
         // bind shadow JNI classes
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-21T21:23:48.883

正如@Jared 指出的那样，@Christopher 给出的解决方案不适用于 Robolectric 2 或 3。

我最终使用的解决方案是添加环境变量：

```
ROBOLECTRIC=TRUE 
```

到我的测试的构建配置。（运行 -> 编辑配置、环境变量）。

然后在加载有问题的库之前检查该环境变量。例如：

```
class MyClass {
    if(System.getenv("ROBOLECTRIC") == null) {
        System.loadLibrary("libname");
    }
} 
```

显然，您将无法测试任何依赖于该库的代码，但至少可以进行一些测试！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-05T09:03:14.373

对于与 Robolectric 无法正常工作的重量级应用程序类的应用程序的一种选择是创建一个空`Application`对象并将其用于您的 Robolectric 测试：

像这样的东西：

```
public void EmptyApp extends Application { 
} 
```

然后您的测试设置可能如下所示：

```
@RunWith(RobolectricTestRunner.class)
@Config(application = EmptyApplication.class, manifest = "src/main/AndroidManifest.xml", sdk = 23) 
```

由于您已经引用了清单，因此所有资源仍然可用`Context#getString(int id)`，依此类推。

# wordpress - WordPress 中的存档页面？

> ID：10425592
> 
> 赞同：0
> 
> 时间：2012-05-03T05:26:26.210
> 
> 标签：wordpress, archive

我想知道如何制作像 Instantshift 制作的存档页面.. 下面的链接..

> [http://www.instantshift.com/archive/](http://www.instantshift.com/archive/)

我已经做了一切，但不知道指定有序档案列表的查询

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T05:40:42.147

我使用 Viper Bond 的 Clean Archives 来获得类似的效果： http: [//www.viper007bond.com/wordpress-plugins/clean-archives-reloaded](http://www.viper007bond.com/wordpress-plugins/clean-archives-reloaded)。我喜欢 jQuery 效果仅在您激活页面中的插件时显示。

你也可以`<?php wp_get_archives( $args ); ?>`在这里找到： http: [//codex.wordpress.org/Function_Reference/wp_get_archives](http://codex.wordpress.org/Function_Reference/wp_get_archives)

不要忘记不要让 wordpress.stackexchange.com 感到孤独！

# java - java未报告的异常java.lang.Exception在编译包含weka的代码时出错

> ID：10425593
> 
> 赞同：-1
> 
> 时间：2012-05-03T05:26:28.980
> 
> 标签：java, weka

我正在编写一个需要从 weka 库中导入一些函数的包装器；但是，它向我抛出了以下错误：

未报告的异常 java.lang.Exception; 必须被抓住或宣布被扔掉

我的代码如下：

```
import java.io.*;
import weka.core.Instances;
import java.io.BufferedReader;
import java.io.FileReader;
import weka.core.converters.ConverterUtils.DataSource;
import java.lang.Integer;

public class wrapper
{
public static void main(String[] args)
{

    try
    {
        Runtime r = Runtime.getRuntime();
        Process p = r.exec("python frequency_counter_two.py nono 400 0");
        BufferedReader br = new BufferedReader(new         
        InputStreamReader(p.getInputStream()));
        p.waitFor();
        String line = "";
        while (br.ready())
            System.out.println(br.readLine());

    }
    catch (Exception e)
    {
    String cause = e.getMessage();
    if (cause.equals("python: not found"))
        System.out.println("No python interpreter found.");
    }

run_weka();

}

public static int run_weka()
{

DataSource source = new DataSource("features_ten_topics_10_unigrams_0_bigrams.csv");
Instances data = source.getDataSet();
// setting class attribute if the data format does not provide this information
// For example, the XRFF format saves the class attribute information as well
if (data.classIndex() == -1)
     data.setClassIndex(data.numAttributes() - 1);

/*

double percent = 66.0; 
Instances inst = data; // your full training set 
instances.randomize(java.util.Random);
int trainSize = (int) Math.round(inst.numInstances() * percent / 100); 
int testSize = inst.numInstances() - trainSize; 
Instances train = new Instances(inst, 0, trainSize); 
Instances test = new Instances(inst, trainSize, testSize);

// train classifier
Classifier cls = new J48();
cls.buildClassifier(train);
// evaluate classifier and print some statistics
Evaluation eval = new Evaluation(train);
eval.evaluateModel(cls, test);
System.out.println(eval.toSummaryString("\nResults\n======\n", false)); 

*/
}

} 
```

知道会发生什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T05:42:36.570

您必须在 run_weka() 中处理从 DataSource 构造函数和 getDataSet() 抛出的异常。

如果您检查文档，您可以看到它们都抛出 java.lang.Exception：[http ://crdd.osdd.net/man/wiki/weka/core/converters/ConverterUtils.DataSource.html](http://crdd.osdd.net/man/wiki/weka/core/converters/ConverterUtils.DataSource.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T13:29:56.980

基本上它是说一些weka方法可能会抛出异常，所以你需要编写一些代码来处理这种情况。

在这种情况下，你可能会改变你的方法来做这样的事情......

```
public static int run_weka() {
    Instances data;

    try {
        DataSource source = new DataSource("features_ten_topics_10_unigrams_0_bigrams.csv");
        data = source.getDataSet();
    }
    catch (Exception e){
        System.out.println("An error occurred: " + e);
        return -1;
    }

    // setting class attribute if the data format does not provide this information
    // For example, the XRFF format saves the class attribute information as well
    if (data.classIndex() == -1)
         data.setClassIndex(data.numAttributes() - 1);
    /*
    Your commented code...
    */
    }
} 
```

# cakephp - 有没有办法添加 created_by 和 modified_by 类似于在 cakePHP 中创建和修改的工作方式？

> ID：10425598
> 
> 赞同：5
> 
> 时间：2012-05-03T05:27:08.277
> 
> 标签：cakephp, cakephp-2.0

我想知道是否有一种方法可以添加`created_by`并`modified_by`类似于在 CakePHP 中的工作方式`created`和工作方式？`modified`

我喜欢 cake 识别这些字段并自动处理它们的事实，无论模型如何，我根本不需要实现它们。我想使用当前用户 ID 添加一个类似的功能（在我的应用程序中，总是有一个用户 ID，即使它有时可能是 0）。

我假设起点`before_save()`在 app_model？

--

另外，我有什么方法可以让 cake 自动将其识别为用户表的外键（类似于它的识别方式`user_id`），还是我必须手动添加 has/belongs to 关系？我问是因为这将适用于我的大多数模型，所以我更愿意减少冗余代码。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T07:14:23.057

对于您问题的第一部分，我使用此行为代码来完成您正在寻找的内容：

```
class UserLinkBehavior extends ModelBehavior
{
    /**
     * The string to use to retrieve the user id from CakeSession
     *
     * @var string
     */
    var $user_id_key = 'Auth.User.id';

    function setup(&$model, $settings)
    {
        if(isset($settings['user_id_key']))
        {
            $this->user_id_key = $settings['user_id_key'];
        }
    }

    function beforeSave(&$model)
    {
        App::uses('CakeSession', 'Model/Datasource');

        $logged_user_id = CakeSession::read($this->user_id_key);

        if(isset($logged_user_id))
        {
            $this->set_user_on_current_model($model, $logged_user_id);
        }

        return true;
    }

    /**
     * Set the created_by and modified_by user id on the current model
     *
     * @param Model $model
     * @param int $logged_user_id
     * @return void
     */
    private function set_user_on_current_model(&$model, $logged_user_id)
    {
        if(isset($logged_user_id))
        {
            /*
             * Id is not set -> it is a creation
             */
            if($model->hasField('created_by') && (!isset($model->data[$model->alias]['id']) || empty($model->data[$model->alias]['id'])))
            {
                if(!isset($model->data[$model->alias]['created_by']))
                {
                    $model->data[$model->alias]['created_by'] = $logged_user_id;

                    /*
                     * If the save is called with a whitelist, add 'created_by' to the whitelist
                     * in order to have this field saved as well
                     */
                    if(!empty($model->whitelist) && !in_array('created_by', $model->whitelist))
                    {
                        $model->whitelist[] = 'created_by';
                    }
                }
            }

            /*
             * Id is set -> it is an update
             */
            if($model->hasField('modified_by') && isset($model->data[$model->alias]['id']) && !empty($model->data[$model->alias]['id']))
            {
                $model->data[$model->alias]['modified_by'] = $logged_user_id;

                /*
                 * If the save is called with a whitelist, add 'modified_by' to the whitelist
                 * in order to have this field saved as well
                 */
                if(!empty($model->whitelist) && !in_array('modified_by', $model->whitelist))
                {
                    $model->whitelist[] = 'modified_by';
                }
            }
        }
    }
} 
```

然后只需在您的模型或 AppModel 中声明它

```
var $actsAs = array('UserLink'); 
```

对于问题的第二部分，您可能会在行为中添加一个 beforeFind() 回调，并使用[model->bindModel()](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#creating-and-destroying-associations-on-the-fly)函数将具有`created_by`and`modified_by`字段的模型与 User 模型链接起来。我个人更喜欢在需要时手动在每个模型中声明这些链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T05:56:44.667

它不能像创建和修改的字段一样，但您可以在控制器方法中任意添加此字段。

例如。在 add 方法中，您可以添加如下。

```
 $this->request->data['ModelName']['created_by'] = $this->Auth->user['userid']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-25T10:23:28.723

我发现[了这个](http://codingsips.alampk.com/cakephp-automatic-created-by-modified-by/)并且对我有用，它易于实施和理解

```
<?php

App::uses('Model', 'Model');

class AppModel extends Model {
//get current logged-in user
    public function getCurrentUser() {
    App::uses('CakeSession', 'Model/Datasource');
    $Session = new CakeSession();
    $user = $Session->read('Auth.User');
    return $user['id'];
  }

//populate created_by and modified_by
    public function beforeSave($options = array()) {
    parent::beforeSave($options);
    //find all fields from table created_by/modified_by exists
    $fields = array_keys($this->getColumnTypes());

    //get modal name to feed in data in appropriate array key        
    $modal = array_keys($this->data);
    $modal = $modal[0];

    //add created_by value
    if(in_array('created_by', $fields) && !isset($this->data[$modal]['id'])){
        //correct this line
        $this->data[$modal]['created_by'] = $this->getCurrentUser()==null?-1:$this->getCurrentUser();
        return true;
    }elseif(in_array('modified_by', $fields)){
        $this->data[$modal]['modified_by'] = $this->getCurrentUser()==null?-1:$this->getCurrentUser();
        return true;
    }
    return true;
}
} 
```

# php - 每次提交时自动从 github 下载？

> ID：10425599
> 
> 赞同：0
> 
> 时间：2012-05-03T05:27:18.370
> 
> 标签：php, github, git-post-receive

我有一些使用 jQuery 创建的插件，我的演示位于我的服务器上，我想在每次更改提交到 github 上的 master 分支时自动更新演示。

我知道我可以使用[Post-Receive Hooks](http://help.github.com/post-receive-hooks/)在我的服务器上获得嗡嗡声，这很容易，我还不知道如何获取 PHP 脚本以从 github 下载整个存储库的最新版本？

是否有执行此操作的 API，或者是否有直接链接到压缩存储库的最新版本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T18:50:12.707

如果您添加`/zipball/master`到项目 Web URL 的末尾，您将获得主分支的 zip 文件。

# facebook - 如何查看您的 Facebook 页面的所有粉丝的列表

> ID：10425603
> 
> 赞同：0
> 
> 时间：2012-05-03T05:28:10.443
> 
> 标签：facebook

我在我的网站上组织了一个赠品，要求读者喜欢我们的粉丝页面，喜欢帖子并评论帖子。赠品期已经结束，我现在正在尝试验证所有参与者都真正喜欢过粉丝页面的人。这就是我面临的问题。

当我进入粉丝页面管理员并单击查看所有喜欢时，它会显示一个很长的列表，但由于某种原因它没有显示所有粉丝。粉丝页面已收到 2025 个赞（即 2025 个总粉丝），但并未显示所有赞。我知道这是因为我在列表中找不到某些我知道的人是我们页面的粉丝。我什至可以在他们的个人资料上看到他们喜欢我们的页面。但是他们的名字并没有出现在列表中。

我尝试了几种方法来查看粉丝列表。我通过访问[http://graph.facebook.com/pagename](http://graph.facebook.com/pagename)提取了页面 ID ，然后在此处使用该 ID - [https://www.facebook.com/browse/page_fans/?page_id=XXXXXXXXX](https://www.facebook.com/browse/page_fans/?page_id=XXXXXXXXX)检查是否有更详细的所有粉丝名单。但是每次出现相同的列表时，我都会一直向下滚动直到它结束，然后我执行 cmd+f 来查找我知道是粉丝的某些名字，但它们不在列表中。所以基本上，这份名单并不包括所有 2025 年的粉丝。

所以，我想要的是一种在一个页面上获取我的 Facebook 页面的所有 2025 年粉丝列表的方法，这样我就可以准确地验证谁都完成了赠品步骤。各位有什么办法吗？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T15:41:33.000

您*应该*能够在 page_likes 上运行 FQL 查询以显示谁是您的页面的粉丝，但 Facebook 取消了这样做的能力。

您可以轻松获取被阻止用户的 UID 列表：

```
SELECT uid FROM page_blocked_users WHERE page_id=XXXXXXXXXX 
```

但是一个类似的查询来查找粉丝的 UID：

```
SELECT uid FROM page_fan WHERE page_id=XXXXXXXXXX 
```

退货

> (#604) 您的语句不可索引。WHERE 子句必须包含一个可索引的列。[这些列在从http://developers.facebook.com/docs/reference/fql](http://developers.facebook.com/docs/reference/fql)链接的表格中标有 *

查找所有页面粉丝列表的唯一方法是单独查询所有 FB 用户的个人资料，看看他们是否是您页面的粉丝。您需要与他们成为个人朋友才能实现这一目标。

但是，您可以使用此*FQL*获得喜欢您页面上特定帖子、照片或其他对象的 UID 列表。您需要查询您的页面`stream`以获取`post_id`.

```
SELECT user_id FROM like WHERE post_id = "XXXXXXXXXXXXXX_XXXXXXXXXXXXX" 
```

# jquery - 在左侧获取错误无效分配

> ID：10425604
> 
> 赞同：2
> 
> 时间：2012-05-03T05:28:11.507
> 
> 标签：jquery

我正在起诉一个函数，在该函数中我尝试限制 textarea 长度，但在一种情况下，我遇到了上述错误。请告诉我我做错了什么？

```
 function limitTextArea(element, limit) {

    var $textArea = $(element);    
    ($textArea).keypress(function(event){

        if ($textArea.val().length == limit) {
            event.preventDefault();
        } else if ($textArea.val().length > limit) {

            // Maximum exceeded
            $textArea.val() = $textArea.val().substr(0, limit);
        }

    }); //end of keypress

} //end of function() 
```

线

```
$textArea.val() = $textArea.val().substr(0, limit); 
```

给我错误`invalid assignment left-hand side`。为什么我会这样？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T05:32:35.813

`$textArea.val()`是一个函数，所以你不想给它分配一个字符串。

以下代码会将值分配给 $textArea：

```
$textArea.val($textArea.val().substr(0, limit)); 
```

# c# - C# Metro 风格应用程序中的 DLL 导入

> ID：10425609
> 
> 赞同：0
> 
> 时间：2012-05-03T05:29:05.627
> 
> 标签：c#, windows-8, dllimport, windows-runtime

我想在我的 C++ 库中的 C# Metro 应用程序函数中使用我正在尝试像往常一样`[DllImport("MyLibrary.dll")]`将 dll 放在应用程序的 bin\debug 文件夹中。当它运行时，我得到一个异常“无法加载 DLL `'MyLibrary.dll'`：找不到指定的模块。（来自 HRESULT 的异常：0x8007007E）”请问我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T10:48:08.243

DLL 在你的包中吗？将其添加到项目中并设置类型为 Content。如果它没有与您的应用程序一起部署，您将无法使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T06:17:20.040

> 您可能依赖于仅存在于 32 位或尚未正确安装在 GAC 中的程序集。并按照[DllImportAttribute Constructor](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.dllimportattribute.dllimportattribute%28v=vs.110%29.aspx) msdn 文档中的说明进行操作。

参考：
[找不到指定的模块。（来自 HRESULT 的异常：0x8007007E）](https://stackoverflow.com/questions/5430312/the-specified-module-could-not-be-found-exception-from-hresult-0x8007007e)
[找不到](https://stackoverflow.com/questions/2066180/the-specified-module-could-not-be-found-0x8007007e)
[指定的模块 0x8007007E 找不到指定的模块。（来自 HRESULT 的异常：0x8007007E）](http://social.msdn.microsoft.com/Forums/uk/netfx64bit/thread/f609f52e-00f6-4ada-9d6e-7129b85d3d4d)
[无法加载 DLL 'foo.dll'：找不到指定的模块。（来自 HRESULT 的异常：0x8007007E）](http://forums.asp.net/t/939729.aspx/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-25T08:07:48.230

我也有一些问题。我的解决方案相当简单，没有在任何其他地方给出：

将下两个 dll 复制到同一文件夹中：

libgcc_s_dw2-1.dll

libstdc++-6.dll

我尝试在 cpp 编码的应用程序中使用“mylib.dll”，系统要求我包含这些文件。突然间，我正在开发的应用程序不再抱怨找不到“mylib.dll”。不要问我为什么。

干杯，哈里茨·萨巴莱塔

# wpf - 如何在 wpf 中更改 DatePicker 的 DateFormat

> ID：10425610
> 
> 赞同：1
> 
> 时间：2012-05-03T05:29:13.923
> 
> 标签：wpf, datepicker

然后我想当用户从文本框中的日期选择器中选择日期时，它将显示日期，如 01-April-2012

请告诉我它是如何完成的？？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T05:39:05.433

你必须格式化你的文本框。假设文本框已经绑定到 DatePicker，它应该类似于

```
<TextBlock Text="{Binding ElementName=DatePicker1, Path=Value, StringFormat={}{0:dd-MMMM-yyyy}}" /> 
```

# c - 将部分字符串匹配到字符串数组中的完整字符串

> ID：10425615
> 
> 赞同：0
> 
> 时间：2012-05-03T05:29:37.303
> 
> 标签：c, arrays, string, matching

这是我曾经被问到的问题的一小部分。我有一个可变的字符串数组，例如

> str 列表 []={abcd,xyzw,qwer,abcde}

我的意见是：

> 输入列表[]={ab,abc,q,z,x}
> 
> 输出应该是[]={abcd,abcd,qwer,-,xyzw}

每个输入字符串都应与**列表中的相同字符（从头开始）**匹配。它应该给出第一个可用的字符串作为答案。

我能想到的工作方法是：-

1.  **蛮力**：时间复杂度O（（列表中的字符串数）*（输入字符串的平均长度）*（输入字符串的数量））

2.  **散列**：它也需要同样的时间。

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T07:01:01.550

如果您的 list[] 已修复（或没有太大变化），则可以使用 trie 来解决问题。在插入时，你必须做一些逻辑来识别“第一个匹配”，所以如果“abcd”是第一个，你不应该插入“abcde”（或者使其无效，如果“abcd”可以被丢弃，所以你必须做一些会计和簿记）。

详情：[http ://en.wikipedia.org/wiki/Trie](http://en.wikipedia.org/wiki/Trie)

# javascript - 如何在选择时显示整个 div

> ID：10425628
> 
> 赞同：4
> 
> 时间：2012-05-03T05:30:41.387
> 
> 标签：javascript, jquery, html

每当有人从标签中选择某个选项时，我需要一些帮助来显示其中包含表单的 div。我的代码是这样的：

```
 <script type="text/javascript">
        $(function() {
            $('#contactOptionSelect').change(function() {
                    $('.emailForm').hide();
                    $('#' + $(this).val()).show();
                });
            });

    </script>
        <div class="contactSelect" id="contactOptionSelect">
            <label for="selectContact">Contact us: </label>
            <select name="selectContact" class="selectContactType" style="width: 150px;"/>
                <option class="opt" value="">Please select</option>
                <option class="opt" id="helpOpt" value="">Help and Support</option>
                <option class="opt" id="emailOpt" value="">Email</option>
                <option class="opt" id="visitOpt" value="">Visit us!</option>
                <option class="opt" id="phoneOpt" value="">Phone</option>
            </select>
        </div>      
        <div class="emailForm" id="emailFormId">
            <form id="contactUsForm" method="post" action="">
                <div class="formSubject">
                    <label for="inputSubject">Subject</label>
                    <input type="text" width="50px" id="inputSubject" />
                </div>
                <div class="formBody">
                    <label for="inputBody">Email</label>
                    <textarea rows="15" cols="50" id="inputBody"></textarea>
                </div>
                <div class="formSubmit">
                    <input type="submit" id="inputSubmit" value="Send!"/>
                </div>
            </form>
        </div> 
```

我想在选择电子邮件选项时显示最后一个表单。我有点希望它像这样工作： http: [//www.apple.com/privacy/contact/](http://www.apple.com/privacy/contact/)我知道高标准，但无论如何哈哈提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T05:41:13.283

你在寻找这样的东西吗？[http://jsbin.com/okakuy/edit#javascript,html](http://jsbin.com/okakuy/edit#javascript,html)

每当更改选择选项时，我们隐藏`div`可见的，并显示`div`具有当前选择值作为其`id`属性的任何一个。

```
$("#parts").on("change", function(o){
  $(".panels")
    .find("> div:visible")
      .slideUp()
    .end()
    .find("#" + o.target.value)
      .slideDown();
}); 
```

再加上这个标记：

```
<select id="parts">
  <option>foo1</option>
  <option>foo2</option>
  <option>foo3</option>
</select>
<div class="panels">
  <div id="foo1">This is foo1</div>
  <div id="foo2">This is foo2</div>
  <div id="foo3">This is foo3</div>
</div> 
```

# salesforce - 电子邮件不发送到密件抄送地址

> ID：10425629
> 
> 赞同：0
> 
> 时间：2012-05-03T05:30:46.860
> 
> 标签：salesforce, apex-code

我已经设置了一个这样的密件抄送地址，但它不会出去

```
 Contact con1 =  new Contact();
 con1.FirstName = 'Anil';
 con1.LastName = 'Dutt';
 con1.Email = 'anil@setup.com';
 insert con1;

 Messaging.SingleEmailMessage mail1 = new Messaging.SingleEmailMessage();
 mail1.setTargetObjectId(con1.Id);
 mail1.setWhatId(opp.Id);
 mail1.setTemplateId('00Xd0000000PJGH');
 String[] bccEmail = new String[]{'xxxx@gmail.com'};
 mail1.setBccAddresses(bccEmail);
 Messaging.sendEmail(new Messaging.SingleEmailMessage[] { mail1 });
 delete con1; 
```

邮件发送到 anil@setup.com 但不发送到 xxxx@gmail.com

我试过 mail1.setBccSender(true) 但也没有工作

没有错误，也没有启用密件抄送合规性

任何想法？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T16:03:51.467

从[SingleEmailMessage 方法](http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_classes_email_outbound_single.htm?SearchType=Stem&Highlight=SingleEmailMessage "SingleEmailMessage 方法")表：

**设置密件抄送地址**

> 密件抄送 (BCC) 地址列表。允许的最大值为 25。*仅当不使用模板时才允许使用此参数。*

强调我的。希望这可以帮助。

# events - 当只有一行时，如何在数据网格中触发 SelectionChanged 事件

> ID：10425632
> 
> 赞同：0
> 
> 时间：2012-05-03T05:31:07.157
> 
> 标签：events, xaml, mvvm-light

当只有一行时，如何在数据网格中触发 SelectionChanged 事件。

例如，我认为以下内容：

但是，一旦您选择了一个项目，我就无法重新启动该活动，因为它已被选中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T05:33:32.160

您可能必须依赖单击事件在其中添加行号条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T06:14:46.530

在我的 xaml 代码中，我有：

```
<i:EventTrigger EventName="SelectionChanged">
  <cmd:EventToCommand
     Command="{Binding myCommand, Mode=OneWay}"
     CommandParameter="{Binding SelectedItem, ElementName=datagrid}"/>
</i:EventTrigger> 
```

```
<i:EventTrigger EventName="PreviewMouseLeftButtonDown">
  <cmd:EventToCommand
     Command="{Binding myCommand, Mode=OneWay}"
     CommandParameter="{Binding SelectedItem, ElementName=datagrid}"/>
</i:EventTrigger> 
```

# java - java apns获取在应用程序下注册的设备令牌列表

> ID：10425636
> 
> 赞同：0
> 
> 时间：2012-05-03T05:31:43.443
> 
> 标签：java, ios, push-notification, apple-push-notifications

我正在使用 Java APN 服务向在应用程序下注册的所有设备发送推送通知消息。通过在静态数组中提供设备令牌是可能的。我可以将其发送到设备。

但我的问题是：有没有办法在沙盒测试环境或实际生产环境中获取在应用程序下注册的所有设备令牌的列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T10:36:28.740

APNS 不提供查询活动推送令牌的方法。大多数框架或服务（EasyAPNS、Urban Airship 等）在本地存储活动推送令牌（如在数据库中）并利用反馈服务删除不活动令牌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-07T06:59:51.627

它不提供已注册的设备列表，但它提供未注册的设备列表，这意味着您的应用程序已通过使用反馈服务从设备上卸载。

# windows-phone-7 - WP7 创建加载动画

> ID：10425638
> 
> 赞同：0
> 
> 时间：2012-05-03T05:31:46.683
> 
> 标签：windows-phone-7

我创建了一个带有进度覆盖的自定义用户控件，以获取类似动画的加载屏幕。通过 Progress.Show() 和 Progress.Hide() 访问。当我从外部 api 获取数据时如何使用这些？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T05:47:45.557

当你在做的时候`SomeWebClient.DownloadDataAsync()`，它有一个[进度改变事件](http://msdn.microsoft.com/en-us/library/system.net.webclient.downloadprogresschanged.aspx)，你可以像这样使用：

```
private static void DownloadProgressCallback(object sender, DownloadProgressChangedEventArgs e)
{
    // Displays the operation identifier, and the transfer progress.
    Console.WriteLine("{0}    downloaded {1} of {2} bytes. {3} % complete...", 
        (string)e.UserState, 
        e.BytesReceived, 
        e.TotalBytesToReceive,
        e.ProgressPercentage);
} 
```

# jquery - 在struts应用程序中使用带有名称而不是id的jQuery日期选择器

> ID：10425639
> 
> 赞同：1
> 
> 时间：2012-05-03T05:31:48.920
> 
> 标签：jquery, datepicker, struts

我想在struts中使用jquery datepicker插件。任何人都可以在这方面帮助我我有日期选择器的id，但我想使用名称或struts等效填充我想使用id的名称intsead填充。请在这方面帮助我

```
<input  name="ADate"  id="datepicker" type="text" class="txtBox">
<script> 
    $(function() {

        $( "#datepicker" ).datepicker({                 
            changeMonth: true,
            changeYear: true,
            dateFormat: 'yy-mm-dd',                     
        });                 
    }); 
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T05:36:29.427

尝试：

```
$(document).ready(function() {    
    $( "input[name='ADate']" ).datepicker({                 
         changeMonth: true,
         changeYear: true,
         dateFormat: 'yy-mm-dd'                     
    });                 
}); 
```

你的意思是这样的吗

# wordpress - 从哪里开始编辑 wordpress 插件？

> ID：10425640
> 
> 赞同：2
> 
> 时间：2012-05-03T05:31:53.643
> 
> 标签：wordpress

我是 wordpress 的新手，我有机会编辑某个插件，即 MarketPress，但后来我很难处理它，因为我是这个东西的新手，我不知道到底该去哪里，我想编辑一个包含的 dynamic_sidebar 但我不能在哪里编辑这个文件。请帮我。:(

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T22:48:18.060

不确定您的理解程度，如果这过于简单，请原谅我。

侧边栏内容由小部件驱动，小部件由小部件管理面板控制。关于侧边栏，您应该能够通过弄乱其定义来编辑的唯一内容是整个小部件和标题的包装标记，以及侧边栏名称和描述。显示在管理小部件面板中的最后两个唯一效果文本。

但是，我上面描述的内容不是使用[`dynamic_sidebar()`](http://codex.wordpress.org/Function_Reference/dynamic_sidebar)方法找到的，而是使用[`register_sidebar()`](http://codex.wordpress.org/Function_Reference/register_sidebar)or[`register_sidebars()`](http://codex.wordpress.org/Function_Reference/register_sidebars)方法。这些“定义”侧边栏的名称和设置。该[`dynamic_sidebar()`](http://codex.wordpress.org/Function_Reference/dynamic_sidebar)方法用于通过将侧边栏名称传递给它来实现侧边栏。

然后通过管理小部件面板在侧边栏填充小部件。

通常，侧边栏是从`functions.php`主题文件中注册的，但如果插件包含模板，则没有理由不能拥有自己的侧边栏。至于`register_sidebar()`具体在您的插件中使用该功能的位置，我不能说。只需使用您喜欢的任何 IDE 搜索它，或者如果您喜欢它，请使用 grep 搜索。

希望这可以帮助。

# c# - 在 Outlook 上下文菜单操作中阅读“活动”邮件消息？

> ID：10425642
> 
> 赞同：2
> 
> 时间：2012-05-03T05:32:05.263
> 
> 标签：c#, visual-studio-2010, outlook, outlook-addin, mapi

嗨，我正在尝试**通过单击**Outlook 中的自定义按钮来阅读电子邮件内容。即：右键单击邮件并在选定的邮件上单击自定义按钮**GoToApp** ，它应该读取邮件的所有内容，包括文本、附件信息和纯文本和图像，我附上了 Outlook 页面的快照。

我试过了

```
Microsoft.Office.Interop.Outlook.Application myApp = new Microsoft.Office.Interop.Outlook.ApplicationClass();
Microsoft.Office.Interop.Outlook.NameSpace mapiNameSpace = myApp.GetNamespace("MAPI");
Microsoft.Office.Interop.Outlook.MAPIFolder myInbox = mapiNameSpace.GetDefaultFolder(Microsoft.Office.Interop.Outlook.OlDefaultFolders‌​.olFolderInbox);
if (myInbox.Items.Count > 0) {
    // Grab the Subject
    lblSubject.Text = ((Microsoft.Office.Interop.Outlook.MailItem)myInbox.Items[1]).Subject;
} 
```

有点不起作用，因为默认文件夹位置中没有邮件。

我怎么能做到这一点，请帮忙。 ![在此处输入图像描述](../Images/12ee2ac2ce8a555dd8eb55b7eb90f9af.png)

谢谢尼基尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T05:48:26.040

在[ItemContextMenuDisplay](http://msdn.microsoft.com/en-us/library/bb175110%28v=office.12%29.aspx)事件（在右键单击时触发）中有一个[Outlook.Selection](http://msdn.microsoft.com/en-us/library/bb219970%28v=office.12%29.aspx)对象作为第二个参数传入。

使用此选择来确定当前选定/活动的项目（如果有）。对象将需要`MailItem`适当地转换为。（请记住，Outlook 对象模型中的索引*从 1 开始*，而不是 0。）

无法确定执行右键单击的确切项目（可能选择了多个项目或可能*没有*选择任何项目），但执行右键单击的项目*将*是选定项目之一. 此外，当前阅读窗格中的项目可能与所选项目*不*对应。

快乐编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-29T16:13:36.003

这是 MailItem 上下文菜单中自定义功能区按钮的功能区回调。

```
public void BtnClickHandler(Office.IRibbonControl btn)
    {
        var ex = btn?.Context?.Parent as Outlook.Explorer;

        if (ex == null) return;

        foreach (var sel in ex.Selection)
        {
            var mailItem = sel as Outlook.MailItem;
            if (mailItem != null) DoSomethingWith(mailItem);
        }
    } 
```

# objective-c - 如何将数组发送到子视图然后打印到标签中？

> ID：10425643
> 
> 赞同：0
> 
> 时间：2012-05-03T05:32:08.483
> 
> 标签：objective-c, xcode, storyboard, subview

在故事板上工作。

我创建了视图控制器（故事板），然后在内容中间从 xib 文件添加了子视图。

我想将 xib (UIView) 作为子视图添加到 ViewController 中，并发送带有数据的对象并将该数据打印到标签中，但我不知道如何。

这是我的代码。

**视图控制器.h**

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController {
    UIView *subView;
}

@property (strong, nonatomic) IBOutlet UIView *subView; //connected over IB
@end 
```

**视图控制器.m**

```
#import "OfferViewController.h"
#import "OfferLocation.h"

@interface OfferViewController ()

@end

@implementation OfferViewController

@synthesize subView;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    OfferLocation *location = [[OfferLocation alloc] initWithFrame:CGRectZero];
    [self.subView addSubview:location];
}
...
@end 
```

这是子视图： **OfferLocation.h**

```
#import <UIKit/UIKit.h>

@interface OfferLocation : UIView{
    UIView *view;
    UILabel *locationLabel;// here is that label taht I want to print into
}

@property (nonatomic, retain) IBOutlet UIView *view;// connected over IB
@property (nonatomic, retain) IBOutlet UILabel *locationLabel;

@end 
```

**OfferLocation.m**

```
#import "OfferLocation.h"

@implementation OfferLocation

@synthesize view, locationLabel;

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self)
    {
        locationLabel.text = @"some text"; //this is not working
        NSArray *subviewArray = [[NSBundle mainBundle] loadNibNamed:@"OfferLocation" owner:self options:nil];
        UIView *tempView = [subviewArray objectAtIndex:0];
        [self addSubview:tempView];
    }
    return self;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T06:26:02.507

subView 似乎永远不会被初始化并加载到视图或呈现。因此你看不到它。

尝试调用：

```
 self.view = self.subView // or subView; // or [self.view addSubview:self.subView // or subview]; 
```

或类似的东西

然后声明一个 UILabel 并使用您想要的任何文本对其进行初始化并将其添加到子视图：

```
 UILabel *label = [[UILabel alloc] initWithString:@"StackOverflow rocks!"];
         [self.subView addSubview:label];
// or [self.view addSubview:label]; 
```

设置 subView 的方式不同。

你想在标签的文本上设置什么数据？如果是数据类型，则使用字符串中的说明符。

```
 %i // for int
%@ // for string or object adress
%c // for char
%f // for float 
```

ETC...

# entity-framework - 在 linq to sql 中搜索单词？

> ID：10425650
> 
> 赞同：2
> 
> 时间：2012-05-03T05:33:02.360
> 
> 标签：entity-framework, linq-to-sql

表**用户**：

```
userid     username 
------------------------------------
1          venkatesh duggirala
2          deviprasad  
3          dhanu 
```

如果用户发送用户名 =“d”，则需要获取所有记录。通过使用“包含”，我得到 2,3 作为结果。但第一条记录在 duggirala 中也有“d”。

询问：

```
var result = from p in cxt.users
             where p.Users.username.Contains(name) 
             select new
             {
                 p.Userid
             }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T04:51:47.460

像这样重写您的查询：

```
var result = from p in cxt.users 
         where p.Users.username.ToLower().Contains(name.ToLower())  
         select new 
         { 
             p.Userid 
         }; 
```

# c# - 如何在运行时更改 EasingDoubleKeyFrame 值？

> ID：10425654
> 
> 赞同：2
> 
> 时间：2012-05-03T05:33:41.680
> 
> 标签：c#, wpf, xaml, animation, expression-blend

我正在尝试制作*TranslateTransform*动画。在动画中，我需要我的对象保持在窗口的中心。我知道 WPF 动画是可冻结的。我正在使用转换器，但它会在启动时初始化值。有没有办法在运行时设置*EasingDoubleKeyFrame*的值？

这是我的 XAML 代码：

```
<Storyboard x:Key="Storyboard1">
    <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[3].(TranslateTransform.X)" Storyboard.TargetName="grid">
        <EasingDoubleKeyFrame KeyTime="0" Value="{Binding Width, Converter={StaticResource Minus}, ElementName=grid}"/>
        <EasingDoubleKeyFrame KeyTime="0:0:1" Value="{Binding Width, Converter={StaticResource EnteringValueConverter}, ElementName=grid}"/>
    </DoubleAnimationUsingKeyFrames>
</Storyboard> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-11T10:20:53.593

`EasingDoubleKeyFrame`无法通过属性`x:Name`访问。相反，您应该使用不同的方法来定义`EasingDoubleKeyFrame`as`StaticResource`并通过如下方式链接它`ResourceKey`：

```
<UserControl.Resources>
    <EasingDoubleKeyFrame x:Key="myEasingKey" KeyTime="0:0:2" Value="136" />
    <Storyboard x:Key="Storyboard1">
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[3].(TranslateTransform.X)"
                                       Storyboard.TargetName="rectangle">
             <StaticResource ResourceKey="myEasingKey" />
        </DoubleAnimationUsingKeyFrames>
    </Storyboard>
</UserControl.Resources> 
```

通过下面的代码访问它：

```
(EasingDoubleKeyFrame)Resources["myEasingKey"].Value = X; 
```

希望这可以帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T15:12:48.773

“这是因为动画是可冻结的对象。MSDN[文档](http://msdn.microsoft.com/en-us/library/ms750509.aspx)中有更多信息，但基本上这意味着您不能使用绑定，因为冻结对象（即动画）中的属性无法更改。

为了克服这个限制，您需要在代码隐藏中完成部分或全部工作。”

引用[Stackoverflow](https://stackoverflow.com/questions/3415094/why-storyboard-value-wouldnt-get-from-a-resource-or-binding)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T05:48:42.237

将 x:Name 属性添加到 EasingDoubleKeyFrame 元素。之后您应该可以通过代码访问它：

x:Name="关键帧"

然后：

keyframe.SetValue(EasingDoubleKeyFrame.ValueProperty, yourValue);

# php - 将 JavaScript 转换为 PHP 代码：年份是闰年吗？

> ID：10425655
> 
> 赞同：0
> 
> 时间：2012-05-03T05:33:44.953
> 
> 标签：php

该函数应将日期作为其参数并返回`true`or `false`。这是我需要的 JavaScript 模型：

```
function isLeapYear(date) {
    var year = date.getFullYear();
    if (year % 4 == 0)
        if ((year % 100 != 0) || (year % 400 == 0))
            return true;
        else
            return false;
    else
        return false;
} 
```

到目前为止，这是我所拥有的，但效果不佳：

```
function isLeapYear($date){
    $time = strtotime($date);
    return date('L') ? true : false;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T05:41:56.197

日期函数需要时间戳作为第二个参数，例如：

```
return date('L', $time) ? true : false; 
```

否则，您将检查今年 2012 年是否是闰年。根据您的方法签名，这不是必需的行为。

# php - PHP 中是否存在与 .NET 数据集等效的内容？

> ID：10425656
> 
> 赞同：0
> 
> 时间：2012-05-03T05:33:45.003
> 
> 标签：php

ASP.NET 具有数据集的概念，用于捕获数据并与数据建立关系，并在没有持久 SQL 连接的情况下保持良好的性能。

PHP中是否有类似的东西可以使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T05:36:08.383

php活动记录呢？这是一个可用于 php 的开源 ORM 库。[http://www.phpactiverecord.org/](http://www.phpactiverecord.org/)

# matlab - 如何在opencv中将Matlab fft函数转换为cvDft

> ID：10425658
> 
> 赞同：1
> 
> 时间：2012-05-03T05:34:16.260
> 
> 标签：matlab, opencv, fft

我对opencv很陌生。我需要将代码从matlab转换为opencv。我在matlab中使用fft有问题。我有一个一维矩阵a。我将在下面应用fft。

```
a = [0;0;0;0;0;0;0;0;0.09707;0.0998;0.1202;-0.1606;-0.0913;0.1523;0.1288];
c = abs(fft(a,15));
c >>     0.3463
    0.1056
    0.3608
    0.5705
    0.4232
    0.2407
    0.1486
    0.1488
    0.1488
    0.1486
    0.2407
    0.4232
    0.5705
    0.3608
    0.1056 
```

C 是我的结果，我从 matlab 获得的。虽然我将为此使用 cvDFT，但结果不同。请帮我举一些例子。我的 c 代码如下...

```
CvMat* fftin = cvCreateMat(nn,1,CV_64FC2);
CvMat* fftout = cvCreateMat(nn,1,CV_64FC2);
cvZero(b);    ////consider a hav the value of mat b is  empty for imgin
cvMerge(a,b,NULL,NULL,fftin);
cvDFT(fftin,fftout,CV_DXT_FORWARD,0);
cvSplit(fftout,out_real,out_img,0,0);
    for (int i = 0;i<out_real->rows;i++)
    {
        double val11= cvGetReal2D(out_real,i,0);
        double val12= cvGetReal2D(out_img,i,0);
        val11 = abs(val11);
        val12 = abs(val12);
        printf("DFT value is:%f  %f\n",val11,val12);
        cvSetReal2D(C_out,i,0,val11);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T13:14:04.543

在您的第一个示例中，您似乎正在打印结果中每个复数值的大小。但是在您的第二个示例中，您似乎正在打印复数值的每个分量的绝对值（例如 X 和 Y，而不是长度或斜边）。

# bash - 如何输出shell查找结果和匹配号？

> ID：10425667
> 
> 赞同：2
> 
> 时间：2012-05-03T05:35:14.097
> 
> 标签：bash, shell

我想使用 find 命令在文件中查找一些字符串，并希望同时查看查找结果和匹配行数。

例如，使用以下命令，我可以得到查找结果，但我不知道我得到了多少匹配结果。

```
find . -name .history  | xargs grep ls 
```

输出是

```
ls -r
ls -R
ls 
```

我期望的输出是这样的

```
ls -r
ls -R
ls
total match number: 3 
```

我怎样才能得到我的期望输出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T05:39:55.410

```
.... | awk '{ a+=1; print} END { print "total match number: " a}' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T06:02:09.460

没有 awk 的替代方法是：

```
| tee >(cat) >(wc -l) 
```

给你输出和数量。如果你真的也想要文字：

```
| tee >(cat) >(echo "total match number: "`wc -l`); 
```

# android - 在android中设置图像全屏

> ID：10425671
> 
> 赞同：0
> 
> 时间：2012-05-03T05:35:42.640
> 
> 标签：android, imageview

当手机处于垂直模式时，我的 imageView 会水平填充最大尺寸。但是，当我将其转换为水平模式时，我的 imageView 与 pthe 不匹配。我需要将图片扩展到屏幕的边界。我做错了什么？

我的xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_height="fill_parent"
android:layout_width="fill_parent" 
android:orientation="vertical">
<ScrollView
android:layout_width="fill_parent"
android:layout_height="fill_parent">
<RelativeLayout 
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:padding="5dp">
<ImageView
android:id="@+id/picture"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:src="@drawable/keks1"
    /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T05:41:52.810

设置 ImageView 的背景不是 src。

```
android:background="@drawable/keks1" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T05:54:32.747

设置 ImageView 背景。有关更多信息，请查看[http://androiddesk.wordpress.com/](http://androiddesk.wordpress.com/)

# php - 使用 HTML FORM 和 PhP 更新 mySQL 数据库

> ID：10425672
> 
> 赞同：0
> 
> 时间：2012-05-03T05:35:42.860
> 
> 标签：php, mysql

我又来了。我有很多麻烦，但这是我现在的主要问题。

我可以成功地将动态行添加到我的 html 表单中，然后将其添加到我的数据库中。我现在正在做的是，我检索了数据，自动填充我的 EDIT 表单。我的问题是，我现在什至不能在我的表中添加已经有 2 或 3 行的行。我应该怎么办？我只是将我的代码从我的 newform.php 复制粘贴到 editform.php。请帮我。:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T06:05:22.513

我认为您正在尝试使用 HTML/PHP 执行 CRUD（创建、读取、更新或编辑、删除）示例。

如果是这种情况，您可以找到许多关于谷歌搜索的教程。

这是一个非常好的开始。 [http://speckyboy.com/2011/02/17/getting-started-with-crud-in-php/](http://speckyboy.com/2011/02/17/getting-started-with-crud-in-php/)

希望它有帮助。快乐编码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T06:19:23.047

我不知道您的代码是什么，但实现它的一种方法。

1.创建名称与表中行的唯一ID的字段。和一个隐藏字段与所有与一个字符或字符串相关联的唯一 ID 相结合，例如 =||=。

```
<input type ="text" name = "naame_1" id = "name_1" value = "test" />
<input type ="text" name = "naame_5" id = "name_5" value = "test1" />
<input type="hidden" name = "allids" id = "allids" value = "1=||=5" /> 
```

现在在 PHP 文件中

```
 <?php
      if(isset($_POST)){
         $ids = explode("=||=" , $_POST['allids']);
          foreach($ids As $id){
             $query = "update tblename set fieldname = '".$_POST['name_'.$id]."' where id = ".$id;    
             mysql_query($query);
          }
       }
 ?> 
```

请试试这个，如果这对你有帮助。

谢谢

# c - NASM，指数的宏或子程序？

> ID：10425676
> 
> 赞同：0
> 
> 时间：2012-05-03T05:36:20.807
> 
> 标签：c, assembly, nasm

因此，让我通过说我对 NASM 非常陌生来限定这一点。

我正在将十六进制字符串转换为十进制数。我的大部分程序都在运行，我遇到了一段 C 代码，我不知道如何用汇编语言编写。我在 CL 中有我的字符串的大小，我有保存在 AL 中的十六进制字符的整数值。

我想要做的是 16^CL *（整数值），然后将该值添加到 EAX（因为我们只需要执行大小为 4 的字符串，我总是可以让我的值适合 EAX）。

我已经在程序的这一部分工作了几个小时，我似乎被难住了（除了第一个硬编码 4096，第二个硬编码 256 ......等等，我讨厌不得不诉诸）。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T06:28:13.527

您不需要任何指数函数即可将十六进制/二进制字符串转换为数字。只需重复乘以 16：

```
#include <stdio.h>

unsigned long long hex2num(const char* hex)
{
  unsigned long long result = 0;

  while (*hex != '\0')
  {
    char b = *hex;

    if (b >= 'a' && b <= 'f') b = b - 'a' + 10;
    else if (b >= 'A' && b <= 'F') b = b - 'A' + 10;
    else b = b - '0';

    result = result * 16 + b;
    hex++;
  }

  return result;
}

const char* const testData[] =
{
  "0",
  "f",
  "1F",
  "Ffff",
  "FFFFFFFF",
  "7fffffffffffffff"
};

int main(void)
{
  unsigned i;
  for (i = 0; i < sizeof(testData)/sizeof(testData[0]); i++)
    printf("\"%s\" = %llu\n", testData[i], hex2num(testData[i]));
  return 0;
} 
```

输出：

```
"0" = 0
"f" = 15
"1F" = 31
"Ffff" = 65535
"FFFFFFFF" = 4294967295
"7fffffffffffffff" = 9223372036854775807 
```

另请注意，乘以 16 相当于向左移动 4 个二进制位置，并且加法`b`可以用按位 OR 代替。

# android - 如何限制图像在屏幕内拖动？期待建议

> ID：10425677
> 
> 赞同：1
> 
> 时间：2012-05-03T05:36:22.383
> 
> 标签：android

有什么方法可以限制屏幕内拖动的移动吗？如果您对此有建议或有用的链接，请发送。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T06:11:30.023

我认为您可以做的是您可以在您拖动的视图所在的屏幕上找到布局的位置。就像您拖动的视图有名称一样`my_view`。

`my_view.getTop();`它将根据其父级给出您视图的最高位置。像这样你可以找到你所有的顶部，底部，右侧，左侧的位置。

现在你可以覆盖

```
my_view.setOnTouchListener(new View.OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            int event_type = event.getAction();
            // Here you can get the current position of your view.
            // check your current positions with parent position and if it is crossing then just set it according to your parent.
            return false;
        }
    }); 
```

所以你要做的是得到你的父位置（左、上、下、右）和子视图位置。检查 ontouchlistner 中的子视图位置或设置新拖动位置的函数中的位置。

希望它会帮助你。

# drupal - 为什么我在 http://www.website.com 上收到 Oauth 错误，但在 http://website.com 上却没有

> ID：10425678
> 
> 赞同：2
> 
> 时间：2012-05-03T05:36:24.830
> 
> 标签：drupal, oauth

我有一个安装了 Twitter 模块的基于 Drupal 的站点，当用户使用他们的 Twitter 帐户从[http://www.website.com](http://www.website.com)登录时，他们会收到“无效的 Twitter Oauth 请求”，但是当他们从[http://website.com](http://website.com)，它工作正常。关于原因可能是什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T19:11:04.803

只是一个有根据的猜测，但您可能已将回调指定`http://website.com/callback/`为与原始子域无关。

很有可能，一旦调用回调，存储在 cookie 中的必要请求令牌数据就无法在其他子域中访问。

如果是这种情况，有两种解决方案：

1.  尝试确保在请求令牌请求中动态设置回调以匹配当前子域。您可以通过提交`oauth_callback`参数来做到这一点，或者
2.  确保您的 cookie 在`*.website.com`.

# php - 粘性选择框

> ID：10425683
> 
> 赞同：0
> 
> 时间：2012-05-03T05:36:41.650
> 
> 标签：php

我正在尝试使用 HTML 和 PHP 编写一个粘性选择框。我希望在按下提交后突出显示用户在提交之前输入的选择。我尝试了几种不同的方法，但似乎不起作用。这是我现在拥有的那条线。

```
<select name="selectBox[]" multiple="multiple" size="5">
<?php 
$i=0;

while($temp=mysql_fetch_array($result,MYSQL_NUM))
{
    //echo $temp[1];
?>  
    <option value="<?php echo $temp[1] ?>"
        <?php if(isset($_POST[$temp[1]])) {echo "selected";} ?> >
        <?php echo $temp[1] ?> </option>

<?php   
    $i++;
}

?>
</select> 
```

我知道这是可行的，`echo "selected"`因为我已经在选项标签中尝试过。

这是整个代码，选择标签中的选项标签略有不同，但它仍然不用担心。

```
<html>
<head><title>Business Registration</title></head>

<body>
<h1>
Business Registration
</h1>

<?php

$user="*********";
$DBserver="localhost";
$password="*********";

$myDatabase='nedwards';
$myTable1='categories';
$myTable2='businesses';
$myTable3='biz_categories';

//connect to the database server.
$con=mysql_connect($DBserver,$user,$password);

$con or die('Could not connect to MySQL: ' . mysql_error());//check connection

mysql_select_db($myDatabase) or die("Unable to select database");//select the databse we will be using
                                                                //check selection

$result = mysql_query("SELECT * FROM $myTable1");//gets the category table.... we will use the fetch_array and take the 2nd element of the array for select box

$submitted=$_POST['submitted'];

if($submitted)
{

    $sql="INSERT INTO $myTable2 (name, address, city, telephone, url) VALUES ('$_POST[bis_name]', '$_POST[addr]', '$_POST[city]', '$_POST[tele]' , '$_POST[url]')";
    mysql_query($sql, $con) or die('Error dude: ' .mysql_error());

//  echo "$_POST[bis_name]";
//  echo "$_POST[addr]";
//  echo "$_POST[city]";

    $chosenTitles=$_POST[selectBox];

    //echo "$_POST[bis_name]";

    foreach ($chosenTitles as $temp)//will run through each title chosen
    {
        //echo "$temp";//for testing

        //get cat id
        $catTitle2IDtemp=mysql_query("SELECT * FROM $myTable1 WHERE title='$temp'", $con);
        $catTitle2ID=mysql_fetch_array($catTitle2IDtemp, MYSQL_NUM);
        $catID=$catTitle2ID[0];//this is the category ID

        //get biz id
        $temp=$_POST[bis_name];
        $bis_name2IDtemp=mysql_query("SELECT * FROM $myTable2 WHERE name='$temp'", $con);
        $bis_name2ID=mysql_fetch_array($bis_name2IDtemp, MYSQL_NUM);
        $bizId=$bis_name2ID[0];//this is the biz ID

        mysql_query("INSERT INTO $myTable3 (business_id, category_id) VALUES ('$bizId', '$catID')");

    }

}

?>

<table border="1">

<tr>
<td rowspan="5">
<form name="input" action="<?php $_SERVER['PHP_SELF'] ?>" method="post"> 

<select name="selectBox[]" multiple="multiple" size="5">
<?php 
$i=0;

while($temp=mysql_fetch_array($result,MYSQL_NUM))//gets each row of categroy table "$result" and takes second element of array $tempto select box
{
    //echo $temp[1];
?>  

    <option value="<?php echo $temp[1] ?> "    <?php if(in_array($temp[1], $chosenTitles)){echo "selected";}   ?>        > <?php echo $temp[1] ?>   </option>

<?php   
    $i++;
}

?>
</select>

</td>

<td>Buisness Name</td> 
<td>    <input type="text" name="bis_name" value="<?php if($submitted==1){echo $_POST['bis_name'];}?>"/></td>
</tr>

<tr>
<td>Address</td>    
<td><input type="text" name="addr" value="<?php if($submitted==1){echo $_POST['addr'];}?>" /></td>
</tr>

<tr>
<td>City</td>   
<td><input type="text" name="city" value="<?php if($submitted==1){echo $_POST['city'];}?>"/></td>
</tr>

<tr>
<td>Telephone</td> 
<td><input type="text" name="tele" value="<?php if($submitted==1){echo $_POST['tele'];}?>"/></td>
</tr>

<tr>
<td>URL</td>    <td><input type="text" name="url"  value="<?php if($submitted==1){echo $_POST['url'];}?>"  /></td>  
</tr>

<input type="hidden" name="submitted" value="1">

</table>

<input type="Submit" value="Add Business"      />
</form>

<?php 
$submitted="0";
$_POST['submitted']="0";
?>

</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T05:50:55.113

您可以使用 in_array php 函数。

下面是一些指导您的示例代码。

```
<? 
    if(isset($_POST['submit']))
    {
        $selectBox = $_POST['selectBox'];
    }
?>
<form name="input" action="<?php $_SERVER['PHP_SELF'] ?>" method="post"> 
<select name="selectBox[]" multiple="multiple" size="5">
<option <? if(in_array('one',$selectBox)){ echo 'selected';}?> value="one">one</option>
<option <? if(in_array('two',$selectBox)){ echo 'selected';}?> value="two">two</option>
<option <? if(in_array('three',$selectBox)){ echo 'selected';}?> value="three">three</option>
<option <? if(in_array('four',$selectBox)){ echo 'selected';}?> value="four">four</option>
</select>

<input type="Submit" name="submit" value="Add Business"/>
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T06:00:57.377

如果我没看错

```
<option value="<?php echo $temp[1] ?>"
    <?php if(isset($_POST[$temp[1]])) {echo "selected";} ?> >
    <?php echo $temp[1] ?> </option> 
```

生产

```
<option value="some value"selected> some value </option> 
```

要指定`option`应选择 an 您需要使用`selected`属性：

```
<option value="some value" selected="selected"> some value </option> 
```

尝试这个：

```
<option value="<?php echo $temp[1] ?>"
    <?php if(isset($_POST[$temp[1]])) {echo ' selected="selected"';} ?> >
    <?php echo $temp[1] ?> </option> 
```

# sql - 日期范围的数据不同

> ID：10425685
> 
> 赞同：1
> 
> 时间：2012-05-03T05:36:51.197
> 
> 标签：sql, sql-server-2005

我的 sql 有问题。问题是表中的结果数据与我输入的参数不同。你能检查一下我的代码有什么问题吗？

这是我的代码：-

```
select distinct  convert(varchar(10),a.entered,103) as
daterange  from customer
where
((a.entered BETWEEN convert(varchar(10),&daterangefrom,103) AND convert(varchar(10),&daterangeto,103)) or (convert(varchar(10),&daterangefrom,103) =' ' AND convert(varchar(10),&daterangeto,103) =' ')) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T05:43:16.590

检查一下，它对我来说很好用：

```
select distinct convert(varchar(10),a.entered,103) as daterange 
  from customer a 
 where ( ( a.entered BETWEEN convert(datetime,&daterangefrom,103) 
                         AND convert(datetime,&daterangeto,103) ) 
      or ( convert(datetime,&daterangefrom,103) = ' ' 
           AND convert(datetime,&daterangeto,103) = ' ' )
           ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T05:55:36.873

您将日期作为字符串进行比较，但您使用的 dd/mm/yyyy 格式不适用于此类比较。例如，`'2/4/1976' > '1/9/2012'`。

比较日期为日期：

```
select distinct convert(varchar(10),a.entered,103) as daterange
from customer
where (
  (&daterangefrom = ' ' AND &daterangeto = ' ') or
  (a.entered BETWEEN &daterangefrom AND &daterangeto)
) 
```

或者，使用基于 ISO 8601 的 yyyy-mm-dd 格式，它可以作为字符串比较：

```
select distinct convert(varchar(10),a.entered,103) as daterange
from customer
where (
  (a.entered BETWEEN convert(varchar(10),&daterangefrom,120) AND convert(varchar(10),&daterangeto,120)) or
  (&daterangefrom =' ' AND &daterangeto =' ')
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T06:03:03.150

据我所知，您正在对日期进行大量转换，以便从时间部分中提取日期部分。有更快更简单的方法。我在这里使用的一种方法是：

```
DateAdd( d, DateDiff( d, 0, SomeDateValue ), 0 ) 
```

这会找到 0 日期 (1900-01-01) 之间的天数，`SomeDateValue`然后将这些天数添加到 0 日期，从而生成具有零时间部分的日期值。因此，鉴于您提出的内容，一种解决方案是：

```
Select Distinct DateAdd( d, DateDiff( d, 0, C.Entered ), 0 ) As [Date]
From customer As C
Where   (
        C.Entered >= DateAdd( d, DateDiff( d, 0, @DateRangeFrom ), 0 )
        And 
        C.Entered < DateAdd( d, DateDiff( d, 0, @DateRangeTo ), 1 )
        )
    Or ( @DateRangeFrom Is Null And @DateRangeTo Is Null ) 
```

在这个解决方案中，我使用`>=`and`<`而不是，`Between`这样我就可以为值添加额外的一天，`@DateRangeTo`并找到所有严格小于该端点的值。这确保了如果`@DateRangeTo`经过一个时间部分，我们使用当天的所有值，包括`11:59:59`. 如果您知道您将始终以零时间值传递两个参数，那么您可以像这样简化查询：

```
Select Distinct DateAdd( d, DateDiff( d, 0, C.Entered ), 0 ) As [Date]
From customer As C
Where   (
        C.Entered >= @DateRangeFrom
        And 
        C.Entered < DateAdd( d, 1, @DateRangeTo )
        )
    Or ( @DateRangeFrom Is Null And @DateRangeTo Is Null ) 
```

此外，由于某种原因，您将`@DateRangeFrom`and`@DateRangeTo`与一个空字符串进行比较。假设这些是`DateTime`按应有的方式键入的，则没有必要这样做。只需检查传递的值是否为空。

最后，在任何生成的 Select 语句中，您始终可以`Convert`仅在输出上使用该函数。

```
Select Distinct Convert(varchar(10), DateAdd( d, DateDiff(d, 0, C.Entered), 0), 103) 
```

# jboss - 获取 mbean 属性值？

> ID：10425690
> 
> 赞同：2
> 
> 时间：2012-05-03T05:38:23.293
> 
> 标签：jboss, attributes, jmx, mbeans

我被困在这里：

我需要得到的值

**org.jboss.system.server.ServerInfo**

使用此处的代码，我正在阅读 mbean 属性，但我只能找到 .hashvalues 的值！

```
final MBeanAttributeInfo[] attributes = server.getMBeanInfo(mbean).getAttributes();
for (final MBeanAttributeInfo attribute : attributes) {
                    String name = attribute.getName();                            
} 
```

经过两天的搜索，我请求帮助！

非常感谢，罗曼。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-06-13T05:30:16.810

```
public static Map<String, Object> getAllAttributes(String host, int port, String mbeanName) throws MalformedObjectNameException, IOException, InstanceNotFoundException, IntrospectionException, ReflectionException, AttributeNotFoundException, MBeanException {
    // Get JMX connector and get MBean server connection
    JMXServiceURL url = new JMXServiceURL("service:jmx:rmi:///jndi/rmi://" + host + ":" + port + "/jmxrmi");
    JMXConnector jmxc = JMXConnectorFactory.connect(url, null);
    MBeanServerConnection mbsc = jmxc.getMBeanServerConnection();       

    // Query all attributes and values
    ObjectName name = new ObjectName(mbeanName);
    MBeanInfo info = mbsc.getMBeanInfo(name);
    MBeanAttributeInfo[] attrInfo = info.getAttributes();
    Map<String, Object> map = new HashMap<>();
    for (MBeanAttributeInfo attr : attrInfo) {
        if (attr.isReadable()) {
            //System.out.println("\t" + attr.getName() + " = " + mbsc.getAttribute(name, attr.getName()));
            map.put(attr.getName(), mbsc.getAttribute(name, attr.getName()));
            }
        }
    jmxc.close();
    return map;

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T11:00:37.043

这解决了我的问题，获取服务器信息：

```
MBeanServer server = getMBeanServer("jboss");
    ObjectName mbeanname = getMBeanName(server, "server.location", "service",
            "ServerName");
    MBeanInfo mbeanInfo = server.getMBeanInfo(mbeanname);
    List<Map<String, String>> list = new ArrayList<Map<String, String>>();
    for (int i = 0; i < mbeanInfo.getAttributes().length; i++) {
        Map<String, String> attributeMap = new HashMap<String, String>();
        String attributeName = mbeanInfo.getAttributes()[i].getName();
        attributeMap.put("name", attributeName);
        String attributeValue = server.getAttribute(mbeanname, attributeName).toString();
        attributeMap.put(attributeName, attributeValue);
        attributeMap.put("value", attributeValue);
        list.add(attributeMap);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T18:36:18.463

不确定**.hashcodes**是什么意思。您能否提供一些输出作为示例并向我们展示所有相关代码？

# javascript - JIT 图表上的替代缩放选项

> ID：10425692
> 
> 赞同：0
> 
> 时间：2012-05-03T05:38:35.433
> 
> 标签：javascript, jquery, infovis

我正在使用 Java Infovis Toolkit。我想要任何用于缩放的按钮选项而不是鼠标滚轮。任何人都可以帮助我如何应用两个按钮来放大和缩小而不是鼠标滚轮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-10T13:11:44.283

如果您有两个按钮，用于放大/缩小，那么您可以对它们使用以下处理函数。

```
handler: function(btn){
                        //zoom in
                        var val = fd.controller.Navigation.zooming/1000; 
                        var ans = 1 + (10 * val);
                        fd.canvas.scale(ans, ans);
         } 
```

对于缩小，

```
handler: function(btn){
                        //zoom out
                        var val = fd.controller.Navigation.zooming/1000;  
                        var ans = 1 - (10 * val);
                        fd.canvas.scale(ans, ans);
         } 
```

这里 fd 是 ForceDirected 可视化的实例，您可以将其替换为您的可视化实例。

# algorithm - 该算法找到最多 n 个素数的时间复杂度是多少

> ID：10425693
> 
> 赞同：1
> 
> 时间：2012-05-03T05:38:35.343
> 
> 标签：algorithm, complexity-theory, primes

这是有问题的算法，伪代码：

```
list.add(2)
for (i = 3 to n)
    isPrime=true
    for each (j in list)
        if ((i mod j) = 0)
            isPrime=false
            break
    if (isPrime)
        list.add(i)
return list 
```

今天我的助教告诉我这个算法的复杂度为 O(n^2)，但我很确定这是不正确的，特别是考虑到大约有 n/ln(n) 个素数直到任何 n，所以内部如果 n 本身是素数，则循环在其最后一次迭代中的迭代次数不会超过 n/ln(n) 次。但是我认为它实际上低于 O(n^2/ln(n)) ，但我不确定如何确定它实际上是什么。例如，每个偶数只迭代第二个循环两次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T07:02:51.920

在`n`您检查的`n / ln(n)`素数中，实际上大约有素数要求将所有`i / ln(i)`已找到的素数作为除数进行尝试。因此，您的算法的复杂度是`W(n^2 / ln(n)^2)`( `W`is big-omega) 和`O(n^2 / ln(n)`。`n^2 / ln(n)^2`增长更快`n * sqrt(n)`。

为了达到`O(n * sqrt(n))`时间复杂度，您应该使用以下伪代码：

```
list.add(2)
for (i = 3 to n)
    isPrime=true
    for each (j in list)
        if j > sqrt(i)
            break
        if ((i mod j) = 0)
            isPrime=false
            break
    if (isPrime)
        list.add(i)
return list 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T07:19:55.580

复杂度是`O((n/log(n))**2)`。

你分析如下。您会遇到两组数字，素数和复合数。

您有质`O(n/log(n))`数，您必须针对所有较小的质数对每个质数进行测试，以获得`O(n/log(n))`每个质数的工作量，以及总`O((n/log(n))**2)`工作量。

您有`O(n - n/log(n)) = O(n)`复合材料，每个复合材料都必须在下面的素数的某个子集上进行测试，以进行以`sqrt(n)`为界的工作，`O(sqrt(n))`因此总工作以 为界`O(n sqrt(n))`。

因此，该`O((n/log(n))**2)`术语占主导地位。

当然，这不是你的直觉引导你走向的答案。如果您很聪明并在素数平方超过您的目标数时切断内部循环，您试图直觉会发生什么，那么需要多长时间？答案是`O(n sqrt(n) / (log(n))**2)`。原因是`O(sqrt(n)/log(sqrt(n)) = O(sqrt(n)/log(n))`下面有素数，每个素数`sqrt(n)`都需要进行`O(n/log(n))`数字测试（请参阅[http://mathworld.wolfram.com/MertensTheorem.html](http://mathworld.wolfram.com/MertensTheorem.html)了解为什么会这样）。

然而，在这一点上，我们已经从算法的世界进入了数论的世界。:D

# javascript - 在jsp页面中调用css和js文件？

> ID：10425694
> 
> 赞同：-1
> 
> 时间：2012-05-03T05:38:37.493
> 
> 标签：javascript, html, css, jsp

在网页设计中，我使用 css 文件和 js 文件，这些 css 文件和 javascript 文件在 jsp 页面中调用如下：

```
 <script type="text/javascript" src="datepick.js"></script>  
  <link rel="stylesheet" type="text/css" href="datepick.css" /> 
```

如果有人查看页面源代码，那么他也可以知道`css files`，`js files`但我该如何防止呢？

在 index.jsp 中

```
 <html>
  <head>
    <script type="text/javascript" src="datepick.js"/>
   <link rel="stylesheet" type="text/css" href="datepick.css"/>
  </head>
  <body>
  ..............
  .............. 
  </body>
 </html> 
```

如果有人查看页面源代码，那么他可以立即查看`datepick.css`and `datepick.js`，这是我不想要的。我怎样才能阻止他查看这些 css 和 javascript 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T05:43:41.110

您不能**隐藏**CSS 或 JS，因为它们是客户端脚本。您能做的最好的事情就是[混淆您的 JavaScript](https://stackoverflow.com/questions/194397/how-can-i-obfuscate-javascript)并[压缩您的 CSS](https://www.google.com/search?q=compress%20css)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T05:42:19.227

你不能。您必须为浏览器提供 CSS 和 JS 以便它可以解析它们。你给浏览器的任何东西你也给了用户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T05:44:12.447

简短的回答：**不**。
无论您使用什么技巧来隐藏您的 css 和 js，用户都可以轻松跟踪它。因为市场上有很多开发者工具。最好留下这个想法来隐藏你的文件......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T05:44:34.090

在 HTML 中，如果你能看到它，你就能得到它。

JS 在网络浏览器中运行。JSP 在 JSP 容器中运行。

# php - PHP使用Zend for Google Calendar不生成网页

> ID：10425696
> 
> 赞同：0
> 
> 时间：2012-05-03T05:38:59.567
> 
> 标签：php, zend-framework, google-calendar-api

我正在 IBM.com 上编写使用 Zend 框架与 Google Calendar API 配合使用的教程。我确实从教程中复制了一段代码并尝试使用它，但它似乎不起作用。我的 php 文件包括以下内容：

```
<!--Some HTML is above here-->
  <body>
    <?php
    // load library
    require_once 'Zend/Loader.php';
    Zend_Loader::loadClass('Zend_Gdata');
    Zend_Loader::loadClass('Zend_Gdata_ClientLogin');
    Zend_Loader::loadClass('Zend_Gdata_Calendar');
    Zend_Loader::loadClass('Zend_Http_Client');

    // create authenticated HTTP client for Calendar service
    $gcal = Zend_Gdata_Calendar::AUTH_SERVICE_NAME;
    $user = "username@gmail.com"; //replace with my username
    $pass = "pass"; //replace with my password
    $client = Zend_Gdata_ClientLogin::getHttpClient($user, $pass, $gcal);
    $gcal = new Zend_Gdata_Calendar($client);

    // generate query to get event list
    $query = $gcal->newEventQuery();
    $query->setUser('default');
    $query->setVisibility('private');
    $query->setProjection('basic');

    // get and parse calendar feed
    // print output
    try {
      echo "<!--this comment is seen-->\n";
      $feed = $gcal->getCalendarEventFeed($query);
      echo "<!--this comment is not seen-->\n";
    } catch (Zend_Gdata_App_Exception $e) {
      //this doesn't happen.
      echo "Error: " . $e->getResponse();
    }
    ?>
    <h1><?php echo $feed->title; ?></h1>
    <?php echo $feed->totalResults; ?> event(s) found.
    <p/>
    <ol>
  </body> 
```

从字面上看，我对此代码所做的唯一更改是用我自己的电子邮件地址和密码替换用户名和密码。当代码执行到达 try 块中的语句时，它似乎失败了，但没有被 catch 块捕获，即使我将它更改为捕获任何异常，而不仅仅是`Zend_Gdata_App_Exception`. 生成的页面源代码清楚地表明 PHP 正在崩溃，但是：

```
 <!--Some HTML is above here-->
  <body>
  <!--this comment is seen--> 
```

之后什么都没有。我在这里动态学习 PHP，所以任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T11:49:50.607

```
<?php

**$path = 'ZendGdata/library';
$oldPath = set_include_path(get_include_path() . PATH_SEPARATOR . $path);**

require_once 'Zend/Loader.php';
Zend_Loader::loadClass('Zend_Gdata');
Zend_Loader::loadClass('Zend_Gdata_ClientLogin');
Zend_Loader::loadClass('Zend_Gdata_Calendar');

... 
```

你应该下载 ZendGdata/library，就像他们在这里解释的那样[https://developers.google.com/google-apps/calendar/v1/developers_guide_php](https://developers.google.com/google-apps/calendar/v1/developers_guide_php) 这是官方的谷歌日历 api 开发人员指南。您使用的代码已被弃用。我仍在使用它，但他们建议您切换到谷歌日历 API v3，您可以在同一页面上找到相关文档。

# ios - 如何检查用户是否已经下载了非消耗品Inapp购买

> ID：10425701
> 
> 赞同：9
> 
> 时间：2012-05-03T05:39:40.097
> 
> 标签：ios, in-app-purchase, storekit

我在我的应用程序中提供了非消耗品。

**假设用户购买了该项目并尝试将该应用程序安装在具有相同 id 的另一台设备上**。如果用户已登录并且已经购买了该商品，我想显示一些弹出窗口并告诉用户您已经购买了它，所以现在免费下载它。现在发生的事情是，当我再次点击购买商品时是说你已经购买了该项目点击下载。

有什么方法可以获取用户登录详细信息并检查用户是否已经进行了应用内购买。

**当我登录并尝试购买已购买的商品时出现问题。两种警报视图不时出现**。我正在使用沙盒环境。

1.  **您已经购买**了它，但尚未下载。点击“确定”立即下载。此警报视图只有确定按钮。当我们按下确定时，控制转到 - (void)failedTransaction:(SKPaymentTransaction *)transaction

2.  您已经购买了这个。点击确定再次免费下载。这个警报视图有两个按钮，一个是取消，另一个是确定。按下 OK 按钮后，控制转到 - (void)completeTransaction:(SKPaymentTransaction *)transaction，这很好。

一个想法为什么交易会表现出这种特殊的行为。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T06:07:50.093

我不明白你为什么认为你需要做一些不同的事情。

正如你所说，系统检测到用户已经拥有该产品，并给用户一个“点击下载”的提示。如果用户选择下载，那么您将获得`SKPaymentTransaction`其状态是“已购买”或“已恢复”（我忘了是哪个）。然后，您只需照常提供产品。所以用户知道他没有被第二次收费，他得到了产品。

如果您说您想自动检测用户拥有的产品，而无需用户做任何事情：您只能通过发送`restoreCompletedTransactions`到`SKPaymentQueue`. 当您这样做时，用户可能必须输入他的 iTunes 密码。我更喜欢在我的 UI 中有一个“恢复购买”按钮，这样用户就知道为什么要他输入密码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T12:36:09.087

沙盒似乎存在很多稳定性问题，请参阅Apple 开发者论坛中的此线程[https://devforums.apple.com/thread/164500?tstart=0 （需要登录）。](https://devforums.apple.com/thread/164500?tstart=0)我一直在使用消耗品测试应用内购买，但从未见过案例 2，我只得到案例 1（正如论坛中提到的）。所以你可能会认为自己很幸运能不时得到 2) :(

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-12T08:26:02.753

面对这两个问题，我对它们有以下想法

1]包括我在内的许多开发人员通过重启设备解决了第一个问题。

2] 对于第二个问题，因为“购买”或“恢复”回调在点击“确定”时被调用，因此产品将单独可用。

希望能帮助到你 ！

# sql - 如何在 Crystal Reports 中为 Ingres 数据库编写 SQL 表达式

> ID：10425702
> 
> 赞同：0
> 
> 时间：2012-05-03T05:39:47.087
> 
> 标签：sql, crystal-reports, report

我正在从 Ingres 数据库构建一个 Crystal Report，我只需要最后 7 个。我希望不必为 800 多辆汽车生成所有 1000 多条记录，我可以编写一条 SQL 语句，其效果如下：

```
SELECT "trigger_readings"."facility_code", "trigger_readings"."trigger_reading", "trigger_readings"."reading_date"
FROM "trigger_readings"
LIMIT 7 
```

然而，当我尝试这个时，我从水晶那里收到一条错误消息：

> 编译 SQL 表达式时出错：数据库连接器错误：'5000A:[CA][Ingres ODBC Driver][Ingres] 第 1 行，当在目标列表中指定了列（'select'）时，FROM 子句是强制性的。[数据库供应商代码：2103]'

有没有一种方法可以在没有水晶报表中的 SQL 表达式的情况下实现这一点？如果没有，我该如何修复 sql 语句？

**编辑：**我正在按日期查找最新记录（只是为了澄清）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T18:13:42.170

您使用的是哪个版本的 Ingres？该错误消息表明您可能正在使用来自 Computer Associates (CA) 的非常旧的版本。请注意，这可能很困难。它可以完成，如果你需要它，我会给出它的代码。所有当前版本都使用 SELECT FIRST n 语法。

你说你想要最后 7 行。那是最后 7 行吗？按日期排序？即最近的 7 行？

尝试这个：

```
SELECT FIRST 7 tr.facility_code, tr.trigger_reading, tr.reading_date 
FROM trigger_readings tr 
ORDER BY tr.reading_date DESC; 
```

# bash - 将 curl 结果与文件进行比较的 Bash 脚本

> ID：10425709
> 
> 赞同：0
> 
> 时间：2012-05-03T05:40:51.173
> 
> 标签：bash, shell, curl, cat

因此，我正在编写一个脚本，该脚本将卷曲我编写的返回字符串的站点。我正在使用它来比较保存在文件中的值。我无法让我的条件语句为匹配值返回 true。

这是我的 bash 代码片段

```
var1=$(curl -s -w %{http_code}\\n www.somesite.com)
var2=$(cat somefile)

if [[ "$var1" = "$var2" ]]; then
    echo "TRUE"
else
    echo "FALSE"
fi 
```

我已经手动查看了两个字符串，它们似乎是相同的。我已经用它完成了所有适用选项的 wc。我已将这两个值复制并粘贴到 Notepad++ 中，并对预期的字符串进行了查找，它表示这两个值都与查找命令匹配。

显然，如果我手动将值放在它返回 true 的条件中，所以我知道它不是我的条件语句。

我的猜测是 curl 末尾有某种类型的隐藏字符......（'\r'或'\n'或我不知道的东西）......或者可能在我不知道的文件末尾的。尝试比较 curl 输出和文件内容时，这是一个已知问题吗？

这可能是一个愚蠢的问题，但对于我的生活，我似乎无法让这些字符串动态匹配，而不是硬编码条件中的值。

任何建议都会很棒。谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-03T05:46:27.283

```
$ diff -q -b <(echo $'abc\ndef') <(echo $'abc\r\ndef') > /dev/null ; echo $?
0
$ diff -q -b <(echo $'abc\ndef') <(echo $'abc\r\nde') > /dev/null ; echo $?
1 
```

# php - 如何将变量插入 PHP 数组？

> ID：10425712
> 
> 赞同：12
> 
> 时间：2012-05-03T05:41:22.920
> 
> 标签：php, arrays, variables, quotes

我在网上找了一些答案，但都不是很准确。

我希望能够做到这一点：

```
$id = "" . $result ["id"] . "";
$info = array('$id','Example');

echo $info[0]; 
```

这有可能吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-03T05:43:16.903

您需要的是（不推荐）：

```
$info = array("$id",'Example'); // variable interpolation happens in "" 
```

要不就

```
$info = array($id,'Example'); // directly use the variable, no quotes needed 
```

您已将变量括在单引号内，并且在单引号内变量插值不会发生，`'$id'`并被视为长度为 3 的字符串，其中第一个字符是美元。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-03T05:42:52.703

只是不要把它放在引号中：

```
$id = $result["id"];
$info = array($id, 'Example');
echo $info[0]; 
```

或者，如果您使用双引号而不是单引号，那么它将被插值（这也导致它被转换为字符串）：

```
$id = $result["id"];
$info = array("$id", 'Example');
echo $info[0]; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-03T05:43:08.930

是的，您可以将变量存储在数组中，但您需要删除`$result`左括号之间的空格。

```
$foo = $result["bar"]; // assuming value of 'bar'

$collection = array( $foo, "fizz" );

foreach ( $collection as $item ) {
  // bar, fizz
  echo $item;
} 
```

# matlab - 使用 Newton_system 后如何将一系列结果绘制为迭代次数？

> ID：10425716
> 
> 赞同：0
> 
> 时间：2012-05-03T05:42:27.447
> 
> 标签：matlab, plot

我有以下结果：

```
v =
    7.8053  959.5985
    6.1820  481.3263
    4.9794  242.2347
    4.0829  122.7578
    3.4079   63.1224
    2.8962   33.4578
    2.5118   18.8560
    2.2380   11.9084
    2.0725    8.9597
    2.0086    8.0952
    2.0001    8.0012
    2.0000    8.0000
    2.0000    8.0000 
```

`newton_system`在我运行了一个调用计算的函数后我得到了它们，然后我在下面运行了输入`[10,3]`向量`f(x,y)`：

```
y(1) = x(1)^3 - 5*x(1)^4 + x(2)^2 + 8;
y(2) = 2*x(1)^3 - x(2)^2 + 5*x(1)^2 + 5*x(2) - 12; 
```

我运行了 13 次迭代，现在我想绘制一个作为迭代函数的近似图（从 1 到 13），有人可以解释一下如何做到这一点吗？

仅供参考，请注意，随着迭代的进行，我们会收敛到 `2.0000 8.0000`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T06:18:03.557

这是使用`plot`命令的解决方案：

```
plot(v(:,1),v(:,2),'-o') %# plot the line with circles for the x,y values
hold on,plot(2,8,'+r') %# add a red cross for the solution
xlim([0 8]) %# modify x-axes limits so that the plot looks a bit better 
```

使用图形菜单上的缩放按钮放大解决方案周围的区域。

![在此处输入图像描述](../Images/c81488ad99719afb2ab4dc965ab3118d.png)

# node.js - 响应 Socket.IO 事件重定向到新页面

> ID：10425717
> 
> 赞同：4
> 
> 时间：2012-05-03T05:42:28.157
> 
> 标签：node.js, express, socket.io

我正在使用 Express 开发一个具有聊天功能（由 Socket.IO 提供支持）的多页 Web 应用程序。用户可以邀请其他人加入私人共享聊天室（也有其他组件，如共享绘图板）。我想在完成邀请交易后将两个用户（邀请者和被邀请者）重定向到不同的 URL。

由于 socket.io 无法访问我的路由的请求和响应对象，我试图将我的 socket.io 实例传递给我的路由处理。除了页面刷新时重复事件处理程序堆积的问题之外，Express 在响应已经发送后尝试进行重定向时会引发错误（这是有道理的）。

似乎实现这一点的唯一方法是在客户端上进行重定向，并将新的聊天室 URL 从 Socket.IO 传递给每个。但是，依赖客户端进行状态转移似乎太脆弱了。

还有其他选择吗？实现我所追求的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T17:26:32.793

我不太确定在客户端做这件事会太脆弱。只需通过套接字发送 URL，然后执行`window.location.href = redirectUrl`或`$('div').load(newContentUrl)`使用 jQuery。

# php - 使用 PHP Form Builder Class 框架时是否可以更改错误处理消息？

> ID：10425729
> 
> 赞同：0
> 
> 时间：2012-05-03T05:43:13.577
> 
> 标签：php, ajax, form-post

我想获取有错误的字段并显示与下面显示不同的消息：

```
The following 3 errors were found:
Error: field1 is a required field.
Error: field2 is a required field.
Error: field3 is a required field. 
```

此代码处理错误：

```
if(isset($_POST["form"])) {
    if(Form::isValid($_POST["form"])) {
      //ok
    }
    else
                //prints the errors
        Form::renderAjaxErrorResponse($_POST["form"]);
    exit();
} 
```

# android - 禁用 WebView 双标签缩放

> ID：10425734
> 
> 赞同：1
> 
> 时间：2012-05-03T05:43:24.523
> 
> 标签：android, html, webview

我在 Android WebView 中显示网页。页面需要缩放以适应 WebView 的可用宽度。

HTML（宽度 550 只是一个例子，可能会改变）：

```
<html> 
<head> 
<meta name="viewport" content="width=550">
... 
```

爪哇：

```
mWebView = (WebView)findViewById(R.id.webView);
mWebView.getSettings().setJavaScriptEnabled(true);
mWebView.setHorizontalScrollBarEnabled(false);
mWebView.setVerticalScrollBarEnabled(false);
mWebView.requestFocus(View.FOCUS_DOWN);
mWebView.getSettings().setLoadWithOverviewMode(true); // required for scaling
mWebView.getSettings().setUseWideViewPort(true); // required for scaling
mWebView.loadUrl(someUrl); 
```

这工作正常，除了一个问题：双标签触发概览模式和默认比例之间的切换。
有没有办法禁用这个功能？

顺便说一句：我无法计算代码中的比例，因为加载的页面可能有不同的大小，我事先不知道。我还检查了 WebView 的源代码，但没有看到任何可以覆盖或更改的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T11:57:12.533

您可以编写自己的 WebView 实现来实现 OnGestureListener：

```
public class MyWebView extends WebView implements OnGestureListener 
```

在里面声明一个 GestureDetector：

```
 private GestureDetector             gestureDetector; 
```

实现一个 initWebView() 方法并在构造函数中调用它，如下所示：

```
// Best you do this for every WebViewConstructor:
  public AppWebView(Context context) {
  super(context);
  initWebView(); }

private void initWebView(){
   gestureDetector = new GestureDetector(getContext(), this);
   // Do any other customizations for your webview if you like. 
} 
```

现在实现 OnGestureListener 中的方法并在双击事件时返回 true：

```
 public boolean onSingleTapConfirmed(MotionEvent e) {
    return false; //Nothing
  }

  public boolean onDoubleTap(MotionEvent e) {
    return true; //Nothing
  }

  public boolean onDoubleTapEvent(MotionEvent e) {
    return true; //Nothing
  }

  public boolean onDown(MotionEvent e) {
    return false; //Nothing
  }

  public void onShowPress(MotionEvent e) {
    //Nothing
  }

  public boolean onSingleTapUp(MotionEvent e) {
    return false; //Nothing
  }

  public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX, float distanceY) {
    return false; //Nothing
  }

  public void onLongPress(MotionEvent e) {
    //Nothing
  }

  public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
    return false; //Nothing
  } 
```

最后覆盖您的 webview 的 OnTouchEvent 并让它通过事件传递给手势检测器，如下所示：

```
 @Override
  public boolean onTouchEvent(MotionEvent event) {
    if (gestureDetector.onTouchEvent(event)) return true;
    return super.onTouchEvent(event);
  } 
```

这通常工作得很好，但这个解决方案有 1 个基本缺陷：一些未被识别为 DoubleTap 事件的事件可能会导致您的 web 视图缩放。

我仍在为此研究解决方案，并将在此处发布我的进展： [WebView 摆脱双击缩放。](https://stackoverflow.com/questions/12301775/webview-getting-rid-of-double-tap-zoom)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T05:48:57.680

一般来说，更改已知的 API 并不是好的做法。您可能应该找到一种不同的方法来做到这一点，也许`longClick`。

不管怎样，看看[这个类似的问题](https://stackoverflow.com/a/2218377/1056359)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-11T12:50:11.470

如果可能，请替换 html 中的静态元标记：

```
<script>
 var meta = document.createElement("meta");
 meta.setAttribute('name','viewport');
 meta.setAttribute('content','width=device-width, user-scalable=no');
 document.getElementsByTagName('head')[0].appendChild(meta); 
</script> 
```

此外，您可以使用一个不错的脚本：[FastClick](https://github.com/ftlabs/fastclick)
它不会等待点击事件，因此它更快。

```
<script type="application/javascript" src="fastclick.js"></script>

    <script language="javascript">

        window.addEventListener('load', function() {
            FastClick.attach(document.body);
        }, false);

</script> 
```

然后为您的手势检测器设置一个双击监听器。（在自定义 WebView 中）

```
gestureDetector.setOnDoubleTapListener(new OnDoubleTapListener() {

    @Override
    public boolean onSingleTapConfirmed( MotionEvent e ) {
        return false;
    }

    @Override
    public boolean onDoubleTapEvent( MotionEvent e ) {

        return true;
    }

    @Override
    public boolean onDoubleTap( MotionEvent e ) {

        return true;
    }
}); 
```

覆盖 onTouchEvent 方法（在自定义 WebView 中）：

```
@Override
public boolean onTouchEvent( MotionEvent event ) {

    boolean gestureHandled = gestureDetector.onTouchEvent(event);
    int actionMask = event.getActionMasked() & MotionEvent.ACTION_MASK;
    int index = ( event.getAction() & MotionEvent.ACTION_POINTER_INDEX_MASK) >> MotionEvent.ACTION_POINTER_INDEX_SHIFT;
    int pointId = event.getPointerId(index);

    // ignore move events
    if (actionMask == MotionEvent.ACTION_MOVE) {

        return super.onTouchEvent(event);
    }

    // cancel detected double taps
    if (gestureDetector.onTouchEvent(event)) {
        event.setAction(MotionEvent.ACTION_CANCEL);
        super.onTouchEvent(event);
        return true;
    }

    // if you want to ignore multi touch events/taps
    if (pointId != 0) {

        System.out.println("KEY multiple points detected");
        return true;
    }

    // use single taps
    if (event.getAction() == MotionEvent.ACTION_UP) {

        event.setAction(MotionEvent.ACTION_CANCEL);
        super.onTouchEvent(event);
        event.setAction(MotionEvent.ACTION_DOWN);
        super.onTouchEvent(event);
        event.setAction(MotionEvent.ACTION_UP);
        return true;
    }

return super.onTouchEvent(event);
} 
```

# ruby-on-rails - 在 Rails 模型中添加公共变量？

> ID：10425738
> 
> 赞同：2
> 
> 时间：2012-05-03T05:43:49.787
> 
> 标签：ruby-on-rails, ruby, database, ruby-on-rails-3, activerecord

我正在尝试将手动创建的变量传递给我在 Rails 中的模型。

例如我有这样的表格：

```
<%= form_for(@ncpar) do |f| %>
    <%= f.check_box(:corrective_change) %> Change Corrective Action?
    <%= f.text_area :corrective_desc %>
    <%= f.submit %>
<% end %> 
```

在我的数据库中，没有`corrective_change`列。它用于我的模型中的手动功能，这意味着它不会保存在数据库中。

在我的模型中，我放了这个：

```
attr_accessor :corrective_change 
#Cause: Can't mass-assign protected attributes: corrective_change 
```

我也尝试：

```
attr_accessible :corrective_change
#Cause: unknown attribute: corrective_change 
```

那么将这个变量传递给我的模型并访问它的方法应该是什么？

PS：我可以将使用代码移动`corrective_change`到我的控制器中，但这会破坏我将其放入模型中的目的，因此我可以让它在保存时自动执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T06:28:01.730

简短的回答是你可能需要两者：

```
attr_accessor :corrective_change 
attr_accessible :corrective_change 
```

这两行做不同的事情，第一行`attr_accessor`用 getter 和 setter 在你的模型上创建一个公共属性。

第二行`attr_accessible`允许您通过[mass assignment](http://guides.rubyonrails.org/security.html#mass-assignment)设置此变量。基本上，如果您在控制器中执行以下操作，则没有此行：

```
@ncpar = NCpar.new(params[:ncpar]) 
```

如果有 a `:corrective_change`，`params[:ncpar]`出于安全原因，它将被忽略，除非您明确声明要允许通过批量分配设置该变量：

```
attr_accessible :corrective_change 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T05:54:07.280

`attr_accessor`是你想要的。您只是不希望它受到保护。尝试将`attr_accessor`指令移到`protected`模型中的行上方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T06:10:02.183

显然，添加

```
attr_accessor :corrective_change 
attr_accessible :corrective_change 
```

似乎可以解决问题。

潜在的问题我认为`attr_accessor`创建 getter 和 setter，但是是私有的。然而，这`attr_accessible`使得该值变得可公开访问。

# android - 按钮点击视觉状态改变

> ID：10425741
> 
> 赞同：7
> 
> 时间：2012-05-03T05:44:21.657
> 
> 标签：android, forms, animation, button

有没有办法在Android中为按钮设置动画，以便在单击它时将按钮的背景更改为按下的图像？

我只使用背景属性在表单按钮上显示图像。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-03T05:47:05.163

使用此 XML：将其保存在可绘制文件夹中并设置为背景可绘制对象。

```
<?xml version="1.0" encoding="utf-8" ?> 
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:state_pressed="false" android:drawable="@drawable/category_listing_bg_img" /> 
<item android:state_pressed="true" android:drawable="@drawable/category_listing_bg_img_pressed" /> 
</selector> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-03T05:58:09.853

在您的 res/drawable 文件夹上添加一个 xml 文件，将其命名为 button_selector.xml 还放置两个可绘制的，一个用于按下状态，另一个用于未按下或正常状态。最后添加这两个你的 xml 文件按钮选择器，一切都应该工作！不要忘记将 @drawable/bytton_selector.xml 设置为 main.xml 文件中按钮的背景。

```
 <?xml version="1.0" encoding="utf-8"?>
  <selector xmlns:android="http://schemas.android.com/apk/res/android">

     <item android:drawable="@drawable/btn_pressed" android:state_pressed="true"/>
       <item android:drawable="@drawable/btn_unpressed"/>

  </selector> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T05:49:00.423

就在这里。实现 onTouchListener。在 onTouch 方法中使用 MotionEvent 变量（让我们说事件）这样写：

```
if (event.getAction() == MotionEvent.ACTION_DOWN){
    /*Code*/
}
if (event.getAction() == MotionEvent.ACTION_UP){
    /*Code*/
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T05:51:09.317

你应该做的是创建一个`selector`（Krishnakant Dalal 所说的）。它处理 UI 元素在每个状态下的外观（按下、禁用、正常等）

有关选择器的更多信息，请阅读此处：[http ://android-journey.blogspot.com/2009/12/android-selectors.html](http://android-journey.blogspot.com/2009/12/android-selectors.html)

# html - 具有绝对位置父级的子 div

> ID：10425742
> 
> 赞同：0
> 
> 时间：2012-05-03T05:44:25.013
> 
> 标签：html, css

一个 div的`<p>`子`position:absolute`元素正在排列，因此它似乎附加到`absolute`父 div 的左上角（下图显示了 chrome 检查器的输出）。

![孩子和绝对 div](../Images/6d6bacb171bfc083dfff589871830df5.png)

据我了解，孩子应该在父 div 的“流程”内，因此应该在父 div 的范围内。

CSS是：

```
.modal{
    position:fixed;
    width:auto;
    height:100px;
    left:50%;
    top:75%;
    z-index:52;
    background-color: #2a333c;
}

.modal p{
    position:relative;
} 
```

HTML是：

```
<div class="modal">
<p>new user template</p>
</div> 
```

NB 变灰效果是由模态 div`fixed`旁边的另一个`absolute`具有较低`z-index`值的 div 引起的，但它既不是“模态”div 的父级也不是子级。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T05:47:23.170

> 据我了解，孩子应该在父 div 的“流程”内，因此应该在父 div 的范围内。

是的，[在其他条件相同的情况下，它将是](http://jsfiddle.net/RkVSg/).

不过，其他样式规则可能会影响其位置。

# c++ - 将 exe 转换为 DLL - 手动调用主函数

> ID：10425743
> 
> 赞同：1
> 
> 时间：2012-05-03T05:44:25.917
> 
> 标签：c++, command-line-arguments

我正在尝试将 exe 转换为 dll 并`main`从我的 C++ 程序中的 DLL 手动调用该函数。

此 exe 代码中的 main 函数（从另一个 C++ 程序生成）如下所示：

```
int main(int argc, char* argv[]) 
```

现在，在我的 C++ 程序中，之前我将命令行参数传递给这个 exe，如下所示：
`system(somexe test.txt test1.txt test2.txt);`

`int argc`然后自动将and`argv array`传递给 exe 程序。但是，如果我必须手动调用此函数，我不确定如何传递上述参数。我是否必须每次使用这些参数手动生成一个数组，并手动传递该数组中的元素数量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T06:22:21.793

只需创建一个字符串数组并传递给 main.int argc 表示数组中的字符串编号。argv 存储字符串数组。例如：int argc = 3；字符 *argv[3] = {"argc1","argc2","argc3"}; 主要（argc，argv）；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T05:51:37.283

你知道函数 printf 吗？你可以这样做。

```
int doit(int n1, ...)
{
    va_list arg_ptr;
    int n = n1;
    va_start(arg_ptr, n1);

    while (n > 0)
    {
         va_arg(arg_ptr, int);
    }

    va_end(arg_ptr);
} 
```

# jquery - jQuery + Rails 3.1 中的动态幻灯片

> ID：10425745
> 
> 赞同：0
> 
> 时间：2012-05-03T05:44:30.537
> 
> 标签：jquery, ruby-on-rails, slideshow

我正在尝试使用任何简单的 jQuery 幻灯片，其中图像和文本将动态出现。

Rails 代码是这样的：

```
.section
    -@testimonials.each do |testimonial|
        .section
            .row.testimonial.round
                .three.columns
                    =image_tag(testimonial.testifier.thumb_small.url)           
                .eight.columns.testimonial-description
                    .row.testimonial-description
                        %blockquote
                            %span(class = "bqstart") &#8220
                            =testimonial.description 
                            %span(class = "bqend") &#8221
                    .row.testifier-details
                        %strong="#{testimonial.name}  #{testimonial.designation} #{testimonial.company}"
                .one.columns 
```

这将为我提供数据库中的图像和描述。

如果我想把这些结果放在幻灯片中，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T13:30:35.687

这个东西从来没有与 Zurb Orbit 一起工作过（幻灯片）。我切换到 slide.js，这是一个更好的幻灯片 IMO 并且它有效。

在安装 slides.js 之后，`ass/assets/javascript`这是幻灯片的 html：-

```
.section
    #testimonial-slideshow.round
        -@testimonials.each do |testimonial|
            .row
                .three.columns
                    =image_tag(testimonial.testifier.thumb_small.url)           
                .nine.columns
                    .row.testimonial-description

                        %span(class = "bqstart") &#8220
                        =truncate(testimonial.description, :length => 150)  
                        %span(class = "bqend") &#8221
                    .row.testimonial-name
                        %strong="#{testimonial.name}  #{testimonial.designation} #{testimonial.company}" 
```

js看起来像这样：-

```
$('#testimonial-slideshow').slides({
            width: 600,
            height: 120,
            generateNextPrev: false,
            pagination: false,
            play: 1000
    }); 
```

# wordpress - 我们如何使网站经过身份验证的用户自动登录到 wordpress？

> ID：10425747
> 
> 赞同：2
> 
> 时间：2012-05-03T05:44:34.180
> 
> 标签：wordpress, authentication, integration, autologin

我有一个 Web 应用程序，用户在使用之前将在其中进行身份验证。此应用程序的帮助文档是使用安装在不同服务器上的 Wordpress 维护的（如果需要，Wordpress 实例也可以安装在同一服务器上）。为了也访问文档，用户必须经过身份验证，现在这是使用 Wordpress 插件完成的。

现在我想让所有人的身份验证过程通用。即用户来到网络应用程序，然后登录以使用该应用程序，他们可以单击应用程序中的“文档”链接，用户也自动登录到 Wordpress。我该如何实施？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T09:52:57.160

在用户必须单击电子邮件中的链接并自动登录之前，我不得不做类似的事情。

我将以下内容添加到我的主题 header.php

```
if (!is_user_logged_in())
{
  if (isset($_GET['u']) && !empty($_GET['u']))
  {
    $u = $_GET['u'];
    $result = $wpdb->get_row($wpdb->prepare("SELECT * FROM wp_users WHERE md5(concat(user_login,'SOMESECRETPHRASE',user_email)) = '%s' AND user_login != 'admin'",$u));
    if (isset($result->ID) && isset($result->user_login))
    {
        wp_set_current_user($result->ID, $result->user_login);
        wp_set_auth_cookie($result->ID);
    }
  }
} 
```

用户登录链接是通过添加`/?u=".md5($user_login."SOMESECRETPHRASE".$user_email)` 到链接末尾创建的

然后他们将自动以正确的 wordpress 用户身份登录到 wordpress。

# c - SDL_MapRGB 崩溃且没有错误消息

> ID：10425752
> 
> 赞同：1
> 
> 时间：2012-05-03T05:45:09.313
> 
> 标签：c, sdl

我在我的文件**jeu.c**上使用 SDL_MapRGB 时遇到了一个特定问题，我正在尝试制作一个视频游戏，因为我正在学习 C，所以我想通过使用一个结构来改进我的代码：

**主程序**

```
#include <stdlib.h>
#include <stdio.h>
#include <SDL/SDL.h>
#include <SDL_image.h>
#include "constantes.h"
#include "jeu.h"
#include "editeur.h"

int main(int argc, char *argv[])
{
                    Partie *jeu = NULL;
                    jeu = (Partie *)malloc(sizeof(Partie));
                    if (jeu ==NULL){
                    fprintf(stderr,"Problème d'allocation de mémoire");
                    return 1;
                    }

SDL_Surface *ecran = NULL, *menu = NULL;
SDL_Rect positionMenu;
SDL_Event event;

int continuer = 1;

SDL_Init(SDL_INIT_VIDEO);
if(SDL_Init(SDL_INIT_VIDEO)!=0)
    {
        fprintf(stderr,"probleme d'init video: %s\n", SDL_GetError ());
    };
SDL_WM_SetIcon(IMG_Load("img/icone.png"), NULL); // L'icône doit être chargée avant SDL_SetVideoMode
ecran = SDL_SetVideoMode(LARGEUR_FENETRE, HAUTEUR_FENETRE, 32, SDL_HWSURFACE | SDL_DOUBLEBUF);
printf("Mode vidéo: dx%d\n", ecran->w, ecran->h, ecran->format->BitsPerPixel);
SDL_WM_SetCaption("pacman", NULL);

menu = IMG_Load("img/menu.png");
positionMenu.x = 0;
positionMenu.y = 0;

while (continuer)
{
    SDL_WaitEvent(&event);
    switch(event.type)
    {
        case SDL_QUIT:
            continuer = 0;
            break;
        case SDL_KEYDOWN:
            switch(event.key.keysym.sym)
            {
                case SDLK_ESCAPE:
                    continuer = 0;
                    break;
                case SDLK_RETURN: //
                    jouer (ecran);
                    break;
                case SDLK_SPACE: // Demande à jouer
                    jouer (ecran);
                    break;
                    case SDLK_KP_ENTER: // Demande à jouer
                    jouer (ecran);
                    break;
                case SDLK_KP1: // Demande à jouer
                    jouer (ecran);
                    break;
                case SDLK_KP2: // Demande l'éditeur de niveaux
                    editeur(ecran);
                    break;
            }
            break;
    }
    SDL_FillRect(ecran, NULL, SDL_MapRGB(ecran->format, 255, 255, 255));
    SDL_BlitSurface(menu, NULL, ecran, &positionMenu);
    SDL_Flip(ecran);
}
SDL_FreeSurface(menu);
SDL_Quit();
return EXIT_SUCCESS;
} 
```

**常量.h**

```
#ifndef DEF_CONSTANTES
#define DEF_CONSTANTES
#include <SDL/SDL.h>
#include <SDL_image.h>
#include <SDL_ttf.h>
#define TAILLE_BLOC         25 
#define NB_BLOCS_LARGEUR    28
#define NB_BLOCS_HAUTEUR    28
#define LARGEUR_FENETRE     TAILLE_BLOC * NB_BLOCS_LARGEUR
#define HAUTEUR_FENETRE     TAILLE_BLOC * NB_BLOCS_HAUTEUR

enum {HAUT, BAS, GAUCHE, DROITE};
enum {VIDE, MUR, GRAINE, ENNEMI, BONUS, PACMAN};

struct partie
{
 SDL_Surface * ecran;
 int score;
};
typedef struct partie Partie;
#endif 
```

**jeu.c**来了

 **```
#include <stdlib.h>
#include <stdio.h>
#include <SDL/SDL.h>
#include <SDL_image.h>
#include <SDL_ttf.h>
#include "constantes.h"
#include "jeu.h"

int jouer(Partie * jeu)
{

SDL_Surface * ecran;
SDL_FillRect(ecran, NULL, SDL_MapRGB(jeu->ecran->format, 0, 0, 0)); 
```

在以 SDL_FillRect 开头的这一行之后，我不知道为什么，但是无论我在编写什么程序都崩溃了。我通过使用大量 printf 来定位这个问题。我也尝试这样做：

```
SDL_Surface * ecran;
Uint32 couleur=SDL_MapRGB(jeu->ecran->format, 0, 0, 0);
SDL_FillRect(jeu->ecran, NULL, couleur); 
```

并且程序在 SDL_FILLRect 之前崩溃了

我知道这很难阅读 noob 代码，但是我整天都在解决这个问题，但没有解决方案。感谢您阅读

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T10:21:47.587

您似乎正在调用`SDL_FillRect()`一个未初始化的指针`SDL_Surface`——它要么是无效的，要么是`NULL`无效的，您的代码会立即崩溃（幸运的情况）或恰好指向一个有效的内存位置（最终会破坏程序的内存）。

根据您以后打算如何使用它，可以为堆上的表面分配一些内存

```
SDL_Surface *ecran = malloc(sizeof(SDL_Surface)); 
```

或者只是把整个东西放在堆栈上并将它的地址传递给 SDL_FillRect （如果你不打算在`jouer`函数之外使用它，这可能是更好的选择

```
SDL_Surface ecran;
SDL_FillRect(&ecran, ...) 
```**

# asp.net-mvc - (MVC 3 Razor) - 循环通过 3 列 div 的更简单方法

> ID：10425755
> 
> 赞同：2
> 
> 时间：2012-05-03T05:45:46.393
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

目前我在我的 CSHTML 中使用以下代码：

```
@{int i = 0;}
@foreach (var item in Model.Traders)
{
    if ((i++ % 3) == 0) {
        if (i != 1) {
            @:</div>
        }
        @:<div class="row">
    }

    @:<div class="four column"><div class="panel new"><h3 class="dotted"><strong>@item.Title</strong></h3><p>@item.Description</p><code>&lt;div class=&quot;panel pick&quot;&gt;</code></div></div>
}

@if (i != 0) {
    @:</div>
} 
```

这将输出以下 HTML：

```
<div class="row">
    <div class="four column"><div class="panel new"><h3 class="dotted"><strong>Title</strong></h3><p>Description</p><code>code</code></div></div>
    <div class="four column"><div class="panel new"><h3 class="dotted"><strong>Title</strong></h3><p>Description</p><code>code</code></div></div>
    <div class="four column"><div class="panel new"><h3 class="dotted"><strong>Title</strong></h3><p>Description</p><code>code</code></div></div>
</div>
<div class="row">
    <div class="four column"><div class="panel new"><h3 class="dotted"><strong>Bobby</strong></h3><p>Bobby bobby bobby</p><code>&lt;div class=&quot;panel pick&quot;&gt;</code></div></div>
    <!-- Add missing divs if there's less than 3 (there always needs to be 3 divs inside a div row). In this case it's 2 that are missing -->
    <div class="four column"></div> <!-- my code does not render these -->
    <div class="four column"></div> <!-- my code does not render these -->
</div> 
```

我的问题是是否有一种更简单的方法可以在我的视图中实现我正在做的事情，并确保在连续少于 3 个的情况下添加缺少的 div。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-03T06:15:25.420

批量交易 3 件商品，试试这个：

```
@{

    var g = Model.Traders.GroupBy(r => Model.Traders.IndexOf(r) / 3).ToList();
}

@foreach (var parentItem in g)
{ 
    <div class="row">
        @foreach (var item in parentItem)
        { 
           <div class="four column"><div class="panel new"><h3 class="dotted"><strong>@item.Title</strong></h3><p>@item.Description</p><code>&lt;div class=&quot;panel pick&quot;&gt;</code></div></div>

        }

    @for (int i = parentItem.Count(); i < 3; i++)
    { 
        <div class="four column"></div>
    }
    </div>
} 
```

问候。

# c++ - 搜索功能不起作用

> ID：10425757
> 
> 赞同：1
> 
> 时间：2012-05-03T05:46:15.240
> 
> 标签：c++, addressbook

这是我的代码。这是家庭作业，但我已经完成了所有工作。但是搜索功能不起作用。我知道我做错了什么。用户必须输入一个名称进行搜索，它应该显示整个条目。无效搜索功能出现错误，显示“错误 C2120：所有类型的‘无效’非法”

```
 // Awholenew world.cpp : Defines the entry point for the console application.
            //

            #include "stdafx.h"
            #include<process.h>
            #include<iomanip>
            #include<stdio.h>
            #include<string.h>
            #include<fstream>
            #include<sstream>
            #include<iostream>
            #include<conio.h>
            #include<stdlib.h>

            using namespace std;

            struct main
            {
                char FName[20];
                char Last[20];
                char Address[30];
                long Phone;
                int ID;
                long CNIC;
            }obj;

            class Main
            {

            public:
                virtual void init()
                {
                    cin.getline(obj.FName,20);
                    cout << "Enter Name: ";
                    cin.getline(obj.Last,20);

                    cout << "Enter Address: ";
                    cin.getline(obj.Address, 30);
                    cout << "Enter Phone: ";
                    cin>>obj.Phone; 

                }
                void view()
                {
                    cout << "Name: " << obj.Last<< endl;
                    cout << "Address: " << obj.Address << endl;
                    cout << "Phone: " << obj.Phone << endl;
                    cout << "CNIC: " << obj.CNIC << endl;
                    cout << "ID: " << obj.ID << endl;

                }

                virtual void search()
                {
                    char choice4;   
                    char Target[20];
                    int Found=0;

                    fstream fin;
                    if (fin.open("Main.txt", ios::in| ios::out) == NULL)
                        cout<<"File is empty" << endl;
                    else
                        cout<<"Enter Name: " << endl;
                    cin.getline(Target, 20);

                    while(!fin.eof() && Found ==0)
                    {
                        fin<< endl << obj.Last << endl <<obj.Address <<endl <<obj.Phone << endl << obj.CNIC << endl << obj.ID;
                        if (strcmp(Target, obj.Last) == 0)
                            Found =1;
                    }
                    if(Found)
                    {
                        Main::view();

                    }
                    else if (!Found)
                        printf("**There is no such Entry**\n");
                    fin.close();

                }

                void display()
                {

                    char BUFFER[100];
                    ifstream fin("Main.txt");

                        while (!fin.eof())
                        {
                        fin.getline(BUFFER, 100);
                        cout << BUFFER << endl;

                        }
                }

            };

            class Teacher : public Main
            {
            public:

            void tinit()
            {
                ofstream fin("Main.txt", ios::app);
                Main::init();
                cout << "Enter CNIC of Teacher" << endl;
                cin>>obj.CNIC;
                fin<< endl << obj.Last << endl << obj.Address << endl << obj.Phone << endl << "Teacher CNIC: " << obj.CNIC << endl;

            }

            };

            class Student : public Main
            {
            public:
                void sinit()
                {
                ofstream fin("Main.txt", ios::app);
                Main::init();
                cout << "Enter ID of Student" << endl;
                cin>>obj.Phone; 
                fin<< endl << obj.Last <<endl << obj.Address << endl  << obj.Phone << endl  << "Student ID" << obj.ID << endl;
                }

            };

            class Employee : public Main
            {
            public:
                void einit()
                {

                ofstream fin("Main.txt", ios::app);
                Main::init();
                cout << "Enter Employee CNIC" << endl;
                cin>>obj.CNIC;  
                fin << endl << obj.Last <<endl  << obj.Address << endl  << obj.Phone << endl << "Employee CNIC: " << obj.CNIC << endl;
                }

            };
            int _tmain(int argc, _TCHAR* argv[])
            {
                Main* myarr[100];
                Teacher* tearr[100];
                Student* starr[100];
                Employee* emarr[100];
                int var=0;
                int choice;
                char input;

                start:
                printf("===============MAIN MENU===============");
                printf("\n[1]Insert\n[2]Display All\n[3]Search\n[4]Exit\n");
                printf("=======================================");
                printf("\n\nEnter Your Choice: ");

                cin >> choice;

                switch(choice)
                {

                case 1:
            label:
                    cout<< "Enter Choice s/t/e" << endl;
                    cin >> input;

                if (input == 't')
                    tearr[var]->tinit();
                if (input == 's')
                    starr[var]->sinit();
                if (input == 'e')
                    emarr[var]->einit();

                cout << " Enter another (y/n)? ";
                cin >> input;

                if (input == 'y')
                    goto label;
                else 
                    goto start;
                    break;
                case 2:
                        myarr[var]->display();
                        break;
                case 3:
                    myarr[var]->search();
                    break;
                case 4:
                    cout << "Are you sure? y/n" << endl;
                    char in;
                    cin>>in;
                    if (in=='y')
                        getch();
                    else goto start;
                    break;
                default:
                    return 0;
                    break;

                return 0;
                }
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T06:05:19.317

我注意到的最明显的事情是，它看起来像存储在`obj`变量中的“main”类型的结构在任何特定的类实例之外。这意味着 Main、Employee、Student 或 Teacher 类型的每个对象仅写入其自身范围之外的单个 obj。所有员工、教师、学生、'Mains' 将共享您上次写入的任何 FName、Last、Address 值。

您可能想要的是 Main 的每个实例都有自己的 FName、Last、Address 等...

```
 class Main
        {
           struct main
           {
             char FName[20];
             char Last[20];
             char Address[30];
             long Phone;
             int ID;
             long CNIC;
           }obj;

        public:
            virtual void init()
            {
             ... rest of code here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T06:10:29.197

我能看到的一个问题是：

```
fstream fin;
if (fin.open("Main.txt", ios::in| ios::out) == NULL) 
```

函数 fstream::open 声明为：

```
void open ( const char * filename, 
            ios_base:openmode mode = ios_base::in | ios_base::out ); 
```

如您所见，它的返回类型为 void，因此您不能在 if 表达式中使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T06:24:55.617

请减少您的帖子的主要问题。如果您只是在一个“代码”块中列出所有内容。没有人能理解你的所作所为。

1：不要使用“goto”！（！！！！！！）

2：你真的应该使用 bool 而不是 int 作为标志

3：不要将 main / Main 用于结构或类名。它实际上是为 mainmathod 保留的（在某些系统上），并且具有相同名称的一个类和一个结构令人困惑（忽略大小写）

4：您正在访问函数 Main::view(); 在您的搜索方法中。但在哪个物体上？通常，您应该将数据加载到对象并通过 this->view() 访问它；

5：整个概念出现连线。为什么要使用文本文件和多态类层次结构？文本文件转储层次结构。也许你应该重新考虑你的班级概念。

# gcc - 内核编译错误：gcc：错误：elf_i386：没有这样的文件或目录

> ID：10425761
> 
> 赞同：6
> 
> 时间：2012-05-03T05:46:31.877
> 
> 标签：gcc, linux-kernel

我陷入了将内核版本降级到 2.6.22 的困境。错误信息是：

SYSCALL arch/i386/kernel/vsyscall-int80.so gcc: 错误: elf_i386: 没有这样的文件或目录 make[1]: *** [arch/i386/kernel/vsyscall-int80.so] 错误 1 ​​make: *** [arch/ i386/内核] 错误 2

我试图用谷歌搜索答案，比如降级我的 gcc 版本等。但没有任何反应。我的操作系统是内核版本 3.1.4 的 ubuntu 11.04 。

那么有什么问题呢？感谢您的回答。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-29T12:48:45.090

你能检查一下应该在arch/x86/vdso/Makefile中的vdso makefile吗？

找到线

```
VDSO_LDFLAGS
```

有两条线，一条用于 x64，另一条用于 x32 位系统。

它应该有

```
-m elf_x86_64
```

还有一个

```
-m elf_x86
```

像这样替换它们

```
-m64
```

和

```
-m32
```

分别。

参考错误修复[Link1 Lockergnome](http://help.lockergnome.com/linux/Bug-546929-binutils-unrecognised-emulation-mode-elf_x86_64--ftopict506019.html)和[Link2 ubuntu](https://answers.launchpad.net/ubuntu/+source/linux/+question/185698)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-04T21:28:18.573

我用[这个](https://stackoverflow.com/a/11762977/559885)答案解决了这个问题，并将`-m elf_i386`部分更改`-m32`为`Makefile`存储在`arch/i386/kernel`目录中，它解决了问题，以供将来参考。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-29T15:00:57.277

我已经更改了指定的 Makefile 文件 (arch/x86/vdso/Makefile) 并解决了问题。我的平台是 Ubuntu-12.04，Linux 3.13.0-30。

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2012-09-17T08:20:38.267

[从http://www.howopensource.com/2012/07/how-to-install-linux-kernel-3-5-quantal-in-ubuntu-12-04-11-10-11-](http://www.howopensource.com/2012/07/how-to-install-linux-kernel-3-5-quantal-in-ubuntu-12-04-11-10-11-04-10-10-and-10-04/)下载并安装标头[04-10-10-and-10-04/](http://www.howopensource.com/2012/07/how-to-install-linux-kernel-3-5-quantal-in-ubuntu-12-04-11-10-11-04-10-10-and-10-04/)你不会再收到错误了

# google-maps - 如何使用 Google place API 或任何其他更好的 API 获取地点的电话号码

> ID：10425764
> 
> 赞同：-1
> 
> 时间：2012-05-03T05:46:51.610
> 
> 标签：google-maps, latitude-longitude, google-places-api, geocode

我尝试了 Google place API，它正在返回“formatted_phone_number”或“international_phone_number”位置的电话。

但它并没有返回所有地方（仅 100 个地方中的 1 个）。但是，目前我想获取每个地方的电话号码（例如：- 酒店）。

我会将纬度和经度信息发送到 API，它还需要返回最近的酒店地址和电话号码。

请为此建议我更好的API。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T09:10:50.370

您可以从任何 Places API 接收的数据（例如电话号码）的质量完全取决于支持该 API 的数据的质量。这将因供应商而异，覆盖范围因国家/地区、城市与城市等而异。

您最好的选择是举办某种“选美比赛”，以了解哪个供应商拥有与您相关的最佳数据集。

例如，使用诺基亚 RESTful Places API 获取地点的电话号码是一个两阶段的过程：

*   进行一般类别查询，例如“**孟买**”附近的“**酒店**”

 **[http://places.nlp.nokia.com/places/v1/discover/search?at=18.975%2C72.825833&q=hotel&tf=plain&pretty=y&size=10&app_id=_peU-uCkp-j8ovkzFGNU&app_code=gBoUkAMoxoqIWfxWA5DuMQ](http://places.nlp.nokia.com/places/v1/discover/search?at=18.975%2C72.825833&q=hotel&tf=plain&pretty=y&size=10&app_id=_peU-uCkp-j8ovkzFGNU&app_code=gBoUkAMoxoqIWfxWA5DuMQ)

*   取**placeId**，查询**contacts.phone等更多信息**

[http://places.nlp.nokia.com/places/v1/places/356te7gc-e5c2e62e24254695b4e41c7762ded586;context=Zmxvdy1pZD03NTAwNzM3ZS1mZmEwLTU0ZDgtYjBkZC1lYjgwMDZmMGE2NDBfMTM1OTcwODg5MDQzNl8wXzU2ODAmcmFuaz0x?app_id=_peU-uCkp-j8ovkzFGNU&app_code=gBoUkAMoxoqIWfxWA5DuMQ](http://places.nlp.nokia.com/places/v1/places/356te7gc-e5c2e62e24254695b4e41c7762ded586;context=Zmxvdy1pZD03NTAwNzM3ZS1mZmEwLTU0ZDgtYjBkZC1lYjgwMDZmMGE2NDBfMTM1OTcwODg5MDQzNl8wXzU2ODAmcmFuaz0x?app_id=_peU-uCkp-j8ovkzFGNU&app_code=gBoUkAMoxoqIWfxWA5DuMQ)

同样，并非所有地方都会包含电话信息。现在，您可以将第一个请求的响应链接起来，循环接收到的**placeId**并将电话号码放在屏幕上。

另一种方法是使用现有的 JavaScript API 包装器来显示信息，如下面的代码所示，您需要自己的[应用程序 ID 和令牌](http://www.developer.nokia.com/Community/Wiki/How_to_Obtain_Your_Own_Nokia_appID_and_Token)才能使其工作

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- 
    Example from Nokia Maps API Playground, for more information visit http://api.maps.nokia.com
 -->
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="X-UA-Compatible" content="IE=7; IE=EmulateIE9"/>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
        <title>Nokia Maps API Example: Search by category</title>
        <meta name="description" content="Search by category"/>
        <meta name="keywords" content="search, services, places, category"/>
        <!-- For scaling content for mobile devices, setting the viewport to the width of the device-->
        <meta name=viewport content="width=device-width, height=device-height, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
        <!-- By default we add ?with=all to load every package available, it's better to change this parameter to your use case. Options ?with=maps|positioning|places|placesdata|directions|datarendering|all -->
        <script type="text/javascript" charset="UTF-8" src="http://api.maps.nokia.com/2.2.3/jsl.js?with=all"></script>
        <!-- JavaScript for example container (NoteContainer & Logger)  -->
        <style type="text/css">
            html {
                overflow:hidden;
            }

            body {
                margin: 0;
                padding: 0;
                overflow: hidden;
                width: 100%;
                height: 100%;
                position: absolute;
            }

            #mapContainer {
                width: 40%;
                height: 80%;
                left: 0;
                top: 0;
                position: absolute;
            }
            #progress {
                width: 80%;
                height: 10%;
                left: 0;
                top: 80%;
                position: absolute;
            }
            #buttons {
                width: 80%;
                height: 10%;
                left: 0;
                top: 90%;
                position: absolute;
            }
        </style>
    </head>
    <body>
        <div id="mapContainer"></div>
        <div id="progress"></div>
        <div id="buttons">
         <a onClick="searchByCategory( map.center, 'bookshop' );return false;" href="#">Find Hotels</a> 
          <div style="display:block">
         <div id="csPlaceWidget" style="display:none"></div>
         </div>

        </div>

        <script type="text/javascript" id="exampleJsSource">
/*  Set authentication token and appid 
*   WARNING: this is a demo-only key
*   please register on http://api.developer.nokia.com/ 
*   and obtain your own developer's API key 
*/
nokia.Settings.set("appId", "My App Id"); 
nokia.Settings.set("authenticationToken", "My Token");

// Get the DOM node to which we will append the map
var mapContainer = document.getElementById("mapContainer");
var infoBubbles = new nokia.maps.map.component.InfoBubbles();   

// Create a map inside the map container DOM node
var map = new nokia.maps.map.Display(mapContainer, {
    // Initial center and zoom level of the map
    center: [18.975, 72.825833],
    zoomLevel: 10,
    components: [ infoBubbles,      
        new nokia.maps.map.component.Behavior()
    ]
});

var searchManager = nokia.places.search.manager,
    resultSet;

var defaultHandler = function (evt) {
    console.log(evt.target);
    infoBubbles.openBubble('<h3>' +evt.target.title + '</h3>' + evt.target.vicinity + '<br/>'
    + '<a onclick="getPhoneNumber(\'' + evt.target.placeId +'\')" >Get Phone</a>' ,evt.target.position)
};      

var myData;
var searchCat;  
var maxDistance = 0;

var getPhoneNumber = function (placeId){

    nokia.places.manager.getPlaceData({
            placeId: placeId,
            basicInfo: true,
            onComplete: function (data, status) {
                if ( data.contacts.phone === undefined ){
                    alert ("Unknown");
                } else {
                    alert(data.contacts.phone[0].value);
                }
            }
        });
};

// Function for receiving search results from places search and process them
var processResults = function (data, requestStatus, requestId) {
    var i, len, locations, marker;

    myData = data;

    if (requestStatus == "OK") {
        // The function findPlaces() and reverseGeoCode() of  return results in slightly different formats
        locations = data.results ? data.results.items : [data.location];
        // We check that at least one location has been found
        if (locations.length > 0) {
            // Remove results from previous search from the map
            if (resultSet) map.objects.remove(resultSet);
            // Convert all found locations into a set of markers
            resultSet = new nokia.maps.map.Container();
            for (i = 0, len = locations.length; i < len; i++) {
                marker = new nokia.maps.map.StandardMarker(locations[i].position, { text: i+1 });
                marker.title = locations[i].title;
                marker.position = locations[i].position;
                marker.vicinity = locations[i].vicinity;
                marker.placeId = locations[i].placeId;
                marker.addListener("click", defaultHandler);
                resultSet.objects.add(marker);
                if (locations[i].distance > maxDistance){
                    maxDistance = locations[i].distance;
                }
            }
            // Next we add the marker(s) to the map's object collection so they will be rendered onto the map
            map.objects.add(resultSet);
            // We zoom the map to a view that encapsulates all the markers into map's viewport
            map.zoomTo(resultSet.getBoundingBox(), false);

            progressUiElt.innerHTML = locations.length  + " places found in the '" + searchCat + "' category within " + maxDistance + "m of "+ data.search.location.address.city ;
        } else { 
            alert("Your search produced no results!");
        }
    } else {
        alert("The search request failed");
    }
};

// Binding of DOM elements to several variables so we can install event handlers.
var progressUiElt = document.getElementById("progress");

searchByCategory = function(searchCenter   , category){
// Make a place search request
searchCat = category;
progressUiElt.innerHTML = "Looking for places in the '" + category + "' category...'";
searchManager.findPlacesByCategory({
    category: category,
    onComplete: processResults,
    searchCenter: searchCenter,
    limit: 100,
});
}
// Search for Hotels in Mumbai
searchByCategory( new nokia.maps.geo.Coordinate(18.975, 72.825833), "hotel" );

        </script>
    </body>
</html> 
```

来自 JavaScript API 的数据如下所示：

![孟买的酒店](../Images/33d5f39ab2058f34d08809145a11dc27.png)

关于电话号码，请记住[条款和条件的限制](http://developer.here.net/terms_conditions)

> (ii) 除非本协议明确允许，否则您不得复制、翻译、修改或创建任何内容或其任何部分的衍生作品（包括创建或贡献于数据库）或公开展示任何内容或其任何部分。例如，禁止以下行为： ... (iii)根据内容**创建邮寄列表或电话营销列表；**(iv) 将内容导出、写入或保存到第三方基于位置的平台或服务；**

# php - PHP 中的花括号或冒号-endif 语句——哪一种提供更好的性能和代码兼容性？

> ID：10425765
> 
> 赞同：20
> 
> 时间：2012-05-03T05:46:53.853
> 
> 标签：php, if-statement

我查看了许多代码片段，发现人们可以在`if`语句中使用以下两种方法：

方法一：

```
<?php
  if ($condition) {
    // Do this
  }
?> 
```

方法二：

```
<?php
  if ($condition):
    // Do this
  endif;
?> 
```

那么哪种方法与PHP编译器和PHP版本更兼容，或者两者之间没有明显区别？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-03T06:02:47.517

大多数情况下，视图脚本中使用替代 (endif) 语法。通常很难看到/注意到 if 语句的结尾，因为花括号只占用一个字符，当您位于文件的底部时，很难判断它是 if 还是 foreach 的结尾。例如：

```
<?php if ($condition): ?>

    <div>a huge block of html</div>

<?php endif; ?> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-03T05:48:40.170

它们都是完全等价的。请查阅您所在组织的样式指南以确定您应该使用哪一个。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-03T05:48:26.370

这种[替代语法](http://php.net/manual/en/control-structures.alternative-syntax.php)与可能更熟悉的语法没有任何不同。只是不要将两者混为一谈。`while`, `for`,`foreach`和存在类似的语法`switch`。

通常，您应该根据可读性和您的团队偏好选择您喜欢的语法。

当您开始看到滥用逻辑合取运算符的“if 语句”时，真正可能让您感到震惊的是，如下所示：

```
isset( $value ) AND print( $value ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-20T18:25:02.200

正如我到目前为止所看到的，在我的应用程序中，它们之间没有区别，但是如果你在没有规则的情况下混合它们，你可能会遇到很多问题，因为可能会出现一些错误并且你会搜索一个卷曲的但你没有用过卷曲。选择一种语法并独占使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-28T13:37:47.873

唯一的区别出现在非常大的文档和项目中。我的公司使用大括号而不是 endif、endelse ......因为我们从事非常大的项目。当您比较文件大小时，使用大括号是有好处的。较小的文件加载速度更快，因此我们努力减少每个字节。我们注释掉最后的大括号，以便在测试时更容易识别，然后删除所有用于生产的注释。

# java - StringTokenizer 只取行的最后一个单词

> ID：10425766
> 
> 赞同：0
> 
> 时间：2012-05-03T05:46:54.867
> 
> 标签：java, stringtokenizer

嗨，我正在尝试在 java 中使用 StringTokeniser 标记文本文件。但问题是它只需要最后一个字。需要一点帮助。此示例代码是 map-reduce 函数的一部分。

```
String profile;

StringTokenizer inputKey=new StringTokenizer(value.toString());
while(inputKey.hasMoreTokens()){

    String input=inputKey.nextToken();
    if(!input.endsWith("</id>")){
        textInput.set(input);
    } else {
        profile=input.substring(4,15);
        profileId.set(profile);

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T06:51:53.853

您应该像大多数人所说的那样使用调试器，并停止使用 StringTokenizer 并启动 String.split..

您已经实例化了一个没有分隔符的 StringTokenizer 对象，您可以显式设置分隔符（在您的情况下可以是“，”或“。”）或使用同时接受分隔符和您尝试解析的字符串的构造函数.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T06:36:28.373

这类问题非常适合学习如何调试程序。

# java - 如何从 HTM 页面调用带有参数的方法并在 Apache Click 框架中获取返回字符串

> ID：10425773
> 
> 赞同：0
> 
> 时间：2012-05-03T05:47:43.493
> 
> 标签：java, click-framework

我有一个页面正在扩展到 UI 中的其他页面。我编写了一个接受并返回字符串的方法。我需要从 HTM 页面传递这个字符串。我尝试`#getTextFromKey("xyz")`在 HTM 中使用，在我的公共页面中使用相同的方法进行扩展，但它不起作用。

谁能帮助如何从 HTM 页面调用 Java 类中的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T06:17:28.523

您不能将参数传递给`Page`类的方法，但您可以执行 AJAX 请求以`load`在页面中的事件上获得类似的行为。

# jquery - jQuery TableSorter 仅适用于 ID（数字字段），不适用于文本、日期等其他字段

> ID：10425775
> 
> 赞同：0
> 
> 时间：2012-05-03T05:47:46.443
> 
> 标签：jquery, jquery-plugins, tablesorter

在我的 Web 应用程序中，我维护了用户记录表。在客户端发送时添加和删除记录，然后用户单击保存按钮以保存在服务器上完成的所有操作。

我已将表格排序器应用于表格上的排序功能。但令人惊讶的是，排序功能仅适用于 ID 字段，即表的第一个字段，但对于所有其他字段，它会给出错误（来自 chrome 的错误跟踪）

```
Uncaught TypeError: Cannot read property 'type' of undefined
multisortjquery.tablesorter.js:600
$.extend.tablesorter.construct.each.$headers.click.mousedown.onselectstart 
```

这是表结构。

```
<table id="contentTable" class="tablesorter">
                        <thead>
                            <tr>
                                <th> ID </th>
                                <th> Name </th>
                                <th> Birth Date </th>
                                <th> City </th>
                                <th id="actionheader"> Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td></td>
                            </tr>
                        </tbody>
                    </table> 
```

在此我动态添加数据。**在这种情况下，排序仅适用于第一个字段，即 ID 字段**

这就是我初始化 tableSorting 的方式。

```
 function initializeTableSorting() {
        $("#contentTable").tablesorter({
            sortList : [[0, 0]],
            headers : {
                0 : {
                    sorter : "integer"
                },
                1 : {
                    sorter : "text"
                },
                2 : {
                    sorter : false
                },
                3 : {
                    sorter : "text"
                },
                4 : {
                    sorter : false
                }
            }
        });
    } 
```

*如果我从初始化中删除了 false 选项，*如何才能使所有字段都有效，甚至还适用于日期字段？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T10:43:30.830

有“完全相同”的问题并且不知道如何解决它，花了一些时间，但最终发现我为 tableSorter 提供了数据中的空行（后面是有效行）。因此，虽然我可以在 HTML 中看到有效数据，但在源代码中我错过了一个空的前行......这可能搞砸了 TableSorter JS。

**删除了开始的空行** （在 thead 之后，但在任何其他数据之前），这个问题得到了解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T07:13:08.313

这确实是一个奇怪的问题，该[示例](http://tablesorter.com/docs/example-ajax.html)似乎根本不起作用（在 Mac 上的 Chrome 中）。另外，我[重新创建了您的情况](http://jsfiddle.net/AqXEA/)，并且再次排序不正确。虽然，我没有得到你描述的错误。

我之前在使用 TableSorter 时遇到过这个问题，当时无法确定问题所在。如果我没记错的话，它与插件执行的缓存有关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T03:14:04.993

我无法复制报告的错误，但如果我遵循编程逻辑......

您描述的错误发生在这行代码上：

```
var s = (table.config.parsers[c].type == "text") ... 
```

这意味着`parsers[c]`不存在。该变量`c`只是列索引。

所以，如果我不得不猜测，我会说涉及到一个自定义解析器，但它没有定义类型属性。

```
// default text parser
ts.addParser({
    id: "text",
    is: function (s) {
        return true;
    },
    format: function (s) {
        return $.trim(s.toLocaleLowerCase());
    },
    type: "text"
}); 
```

或者，可能是`sortList`. 确保变量周围有正确数量的方括号：

```
var sorting = [[0, 0]];
$("#contentTable").trigger("sorton", [sorting]); 
```

或压缩形式：

```
// more than one column -> [[ [0,0], [1,0] ]]
$("#contentTable").trigger("sorton", [[[0, 0]]]); 
```

试试[这个演示](http://jsfiddle.net/Mottie/AqXEA/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-11T19:41:52.847

这件事刚刚发生在我身上。它会对纯数字字段进行排序，但不会通过文本做任何事情。当我按下这些文本列进行排序时，我在开发工具控制台中返回了“未定义”错误。

修复？最终使我的一个不相关的功能未定义。

# php - 使用 Ajax Post 通过 javascript 将 Json 传递给 php 不起作用

> ID：10425776
> 
> 赞同：2
> 
> 时间：2012-05-03T05:48:01.577
> 
> 标签：php, javascript, ajax, json, post

您好我正在尝试使用 Javascript 通过 Ajax 将 Json 发送到 PHP。当我在萤火虫上查看数据时，index.html 正确发送了数据。它显示具有正确数据的 Json 类型。但是，似乎我无法读取 php 上的 JSON。我无法使用 $_POST 访问它。我尝试使用 $_POST['name'] 并且没有响应。当我尝试使用 $_POST 时，响应是数组。你能帮我么？

这是我的 JavaScript 代码。

```
<html>
<head>
<script type="text/javascript">
    //Create Http request depending on browser
    var xmlhttp;
        if (window.XMLHttpRequest)
          {// code for IE7+, Firefox, Chrome, Opera, Safari
          xmlhttp=new XMLHttpRequest();}
        else
          {// code for IE6, IE5
          xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");}

    xmlhttp.onreadystatechange=function(){
      if (xmlhttp.readyState==4 && xmlhttp.status==200){
        document.getElementById("myDiv").innerHTML=xmlhttp.responseText;}
      }

    // Function to create 
    var url = "control.php";
    xmlhttp.open("POST",url,true);
    xmlhttp.setRequestHeader("Content-Type", "application/json; charset=utf-8");
    var data=JSON.stringify({"name":"John", "time":"2pm"});
    xmlhttp.send(data);
}
</script>
</head>
<body>
<h2>AJAX</h2>
<button type="button" onclick="loadXMLDoc()">Request data</button>
<div id="myDiv"></div>
</body>
</html> 
```

这是我的php代码

```
<?php
include_once('JSON.php');   
$json = new Services_JSON();
$value = $json->decode($_POST['name']);
echo $value;
?> 
```

已经为此工作了几天，我非常感谢您提供的任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T06:03:32.177

这是：

```
print_r($GLOBALS['HTTP_RAW_POST_DATA']); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T06:04:25.847

我认为它需要先解析整个帖子。

```
<?php
include_once('JSON.php');   
$json = new Services_JSON();
$value = $json->decode($_POST);
echo $value;
?> 
```

但是你还需要这些包括吗？ [http://www.php.net/manual/en/function.json-decode.php](http://www.php.net/manual/en/function.json-decode.php)

```
include_once('JSON.php');   
$json = new Services_JSON(); 
```

你不能这样做吗？

```
echo json_decode($_POST) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-22T16:12:41.253

一个更好的解决方案（见[这里](http://php.net/manual/en/wrappers.php.php "php.net")）是使用：

```
$json = json_decode(file_get_contents("php://input"), true) ?: [];
print_r($json); 
```

# c++ - 如果字符串是不可变的，为什么下面的代码在 turbo c++ 上运行

> ID：10425777
> 
> 赞同：0
> 
> 时间：2012-05-03T05:48:07.720
> 
> 标签：c++, arrays, string

```
char c[]="opop";
c[2]='k'; 
```

但它应该给出一个总线错误，为什么它会起作用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T05:49:08.647

你所拥有的是一个数组，而不是一个字符串文字。这是完全有效的代码。

```
char *c="opop";
c[2]='k'; 
```

会导致未定义的行为，很可能会导致崩溃。

好读：
[char a[] = "string"; 有什么区别？和 char *p = "字符串";](https://stackoverflow.com/questions/9460260/what-is-the-difference-between-char-a-string-and-char-p-string/9631091#9631091)

# asp.net - 托管 asp.net 应用程序的硬盘空间对网站的性能有影响吗？

> ID：10425780
> 
> 赞同：2
> 
> 时间：2012-05-03T05:48:38.627
> 
> 标签：asp.net, performance, sql-server-2008, iis, database-performance

我一直在为电子商务应用程序使用 MSSQL 2008 R2 开发 ASP.net MVC3 Web 应用程序 - 基于 NopCommerce。我们还创建了一些临时表，用于在 MSSQL 中执行一些 SP。它托管在 Windows Server 2008 R2 上。

有时站点开始在不同页面的不同行位置上给出大量 SQL 超时错误。

我们每天在托管站点的同一驱动器上进行备份。我们注意到，当SQL超时错误拾取时，只剩下18-20 GB的可用空间。我们已经清理了一些空间，可用空间是 appx。60GB 在同一个驱动器上。

令我惊讶的是，超时错误突然从网站上消失了。

我测试了 2 次，似乎 SQL 超时错误是由驱动器上剩余的可用空间较少引起的，当我们清除少量空间时，错误不会像之前那样发生。

我的问题是：

1.  托管 asp.net 应用程序的硬盘空间对网站的性能有影响吗？
2.  如果是这样，是使用 c: 驱动器还是 d:（在我们的例子中，应用程序托管在 d: 上的某个文件夹中）
3.  如何达到最佳的可用空间要求？

任何文档/链接都可以很好地理解这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T06:11:55.903

1.  正如您在问题中指出的那样，当您的磁盘填满时，数据库比 ASP.NET 会变慢。
2.  这取决于您的 SQL 数据库的配置方式。如果您使用默认 SQL Server 安装，它将位于 C 驱动器上，但您可以将数据库配置为跨多个磁盘驱动器。
3.  根据下面的文章，85% 满是您开始注意到 SQL Server 性能显着下降的点。

[http://www.simple-talk.com/sql/database-administration/estimating-disk-space-requirements-for-databases/](http://www.simple-talk.com/sql/database-administration/estimating-disk-space-requirements-for-databases/)

# hadoop - 大小为零的输出文件

> ID：10425784
> 
> 赞同：0
> 
> 时间：2012-05-03T05:48:50.863
> 
> 标签：hadoop, mapreduce

我正在运行 Hadoop mapreduce 流作业（仅限映射器作业）。在某些情况下，我的工作会写入标准输出，然后创建一个非零大小的输出文件。在某些情况下，我的工作不会向 stdout 写入任何内容，但仍会创建大小为零的输出文件。当没有任何内容写入标准输出时，有没有办法避免创建大小为零的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T03:08:28.210

如果您不介意扩展您当前的输出格式，您只需要在没有写入数据时覆盖 OutputCommitter 以“中止”commitTask 阶段。

请注意，并非所有输出格式都显示空文件的零文件字节（例如，序列文件具有标题），因此您不能只检查输出文件的大小。

查看以下文件的来源：

*   OutputCommitter - 基础抽象类
*   FileOutputCommitter - 大多数 FileOutputFormats 都使用这个提交器，所以它是一个很好的起点。查看私有方法`moveTaskOutputs`，这是您的逻辑最有可能出现的地方（如果没有写入，则不复制文件）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-19T00:18:03.597

你在使用[MultipleOutputs](https://hadoop.apache.org/docs/r2.6.1/api/org/apache/hadoop/mapreduce/lib/output/MultipleOutputs.html)吗？如果是，MultipleOutputs 会创建默认文件，即使 reducer 没有任何内容可写入输出。为了避免这种默认的零大小输出，您可以使用[LazyOutputFormat.setOutputFormatClass()](https://hadoop.apache.org/docs/r2.6.1/api/org/apache/hadoop/mapreduce/lib/output/LazyOutputFormat.html#setOutputFormatClass(org.apache.hadoop.mapreduce.Job,%20java.lang.Class))

根据我的经验，即使您使用 LazyOutputFormat，在以下情况下也会创建零大小的文件：Reducer 有一些数据要写入（因此创建了输出文件），但 reducer 在写入输出之前被杀死。我相信这是一个时间问题，因此您可能会观察到 HDFS 中仅存在部分 reducer 输出文件，或者您可能根本没有观察到这一点。

例如。如果你有 10 个 reducer，你可能只有 'n' (n<=10) 个文件，其中一些文件的大小等于 0 字节。

# css - #idValue.classValue 选择器的 CSS 选择器浏览器兼容性？

> ID：10425786
> 
> 赞同：1
> 
> 时间：2012-05-03T05:48:57.743
> 
> 标签：css, css-selectors, cross-browser

我将如何查找或全面测试特定 CSS 选择器的浏览器兼容性？

有问题的选择器具有以下形式：

```
#idValue.classValue 
```

它将找到一个具有 id`idValue`类的元素`classValue`- 所以，就像这个东西：

```
<div id="idValue" class="classValue"> 
```

这与主要浏览器的兼容性如何？在不运行所有浏览器的情况下如何研究此选择器的兼容性？这种复合选择器有名称吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T05:50:36.243

每个浏览器都完全支持这个选择器。它没有特殊的名称，但有趣的是它*被*称为“复合选择器”，因为它是两个简单选择器的组合。

如果您翻转选择器，它应该也可以工作：

```
.classValue#idValue 
```

也可以看看：

*   [浏览器是否支持组合类型、ID 和类选择器？](https://stackoverflow.com/questions/6141598/browser-support-for-the-combined-type-id-and-class-selectors)
*   [将类选择器与 ID 组合](https://stackoverflow.com/questions/2333373/combining-a-class-selector-with-an-id)

至于研究浏览器支持，[QuirksMode.org 的 CSS 兼容性表](http://www.quirksmode.org/css/contents.html)是一个很好的资源，虽然它没有提到每个可用的选择器。[l–c–n.com 有一个更全面的表格。](http://dev.l-c-n.com/CSS3-selectors/browser-support.php)

# android - 如何从完整的歌曲中获取小片段的音乐

> ID：10425789
> 
> 赞同：-1
> 
> 时间：2012-05-03T05:49:03.320
> 
> 标签：android

我想做一个像mp3切割器这样的应用程序。用户输入开始时间和结束时间，在此期间音乐将被剪切并保存在 SD 卡中。s0 请帮帮我，帮手肯定会得到大分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T05:57:11.750

安卓市场上已经有这种应用程序了。你为什么要换一个新的。如果您想制作一个具有附加功能的新应用程序，那就去购买一个免费的 mp3 切割器 Android 应用程序，在其中包含您的附加功能......谷歌它......很多免费应用程序可用，只需破解它......

# web-services - Mule ESB 流中的异常处理：多种异常策略

> ID：10425790
> 
> 赞同：0
> 
> 时间：2012-05-03T05:49:04.713
> 
> 标签：web-services, exception-handling, esb, mule, flow

我想使用自定义异常策略在 Mule ESB 中添加异常处理。但是，我在一个流程中有多个服务调用，我想分别处理来自每个服务调用的异常。

是否可以在单个流程中拥有多个自定义异常策略？现在，我只能使用一个自定义异常策略，并且只有当我将它放在流的末尾，在最后一个出站端点之后。这是预期的行为。好的。但我想在一个流程中使用多种异常策略。

Mulesoft 文档说如果我们想使用多个异常策略，我们必须使用处理器链。我不确定它将如何转换为配置 XML。有什么指导吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T15:49:55.747

为此，您需要将不同的服务调用放在**私有流**中。

就像是：

```
<flow name="main">
    <inbound-endpoint ref="in" />
    <flow-ref name="sub1" />
    <flow-ref name="sub2" />
</flow>

<flow name="sub1" processingStrategy="synchronous">
    <!-- do something -->
    <custom-exception-strategy>
        <!-- sub1 specific -->
    </custom-exception-strategy>
</flow>

<flow name="sub2" processingStrategy="synchronous">
    <!-- do something -->
    <custom-exception-strategy>
        <!-- sub2 specific -->
    </custom-exception-strategy>
</flow> 
```

# java - 谁能解释一下类级控制器和方法级控制器之间的区别..？

> ID：10425794
> 
> 赞同：18
> 
> 时间：2012-05-03T05:49:25.383
> 
> 标签：java, spring, spring-mvc, annotations, spring-annotations

我是 Spring 框架的新手..在 google 上搜索时..我发现很少有在类级别注释了 @RequestMapping 的示例，并且很少有示例在 menthod 级别显示它

何时使用类级别 RequestMapping 和 menthod 级别 RequestMapping 注释...谁能解释一下类级别 RequestMapping 和方法级别 RequestMapping 之间的区别..？？

所以我对他们的申请有点困惑：

**a) 班级级别**

**b) 方法级别**

我还发现了一些`@Requestmapping`类型：GET/Post，而一些示例没有类型参数。

**哪种方法更好..？？**

较新的版本（> Spring 2.5）是否不需要请求映射的参数类型？？？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-03T06:40:23.530

控制器必须标记为`@Controller`类级别。`@RequestMapping`注释可以在类和方法级别应用。如果是，方法注释将被解释为相对 URL（相对于类级 URL）。但是，方法级别的注释必须存在，否则方法将不会被映射。

在注释中，参数可以用默认值标记为可选。方法参数就是这样一种情况：它默认为`GET`，但可以显式设置为`POST`或其他。

看：

*   [`@RequestMapping`](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/web/bind/annotation/RequestMapping.html)
*   [16.3 实现控制器](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-controller)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-03-19T19:47:46.373

**特别是在Spring MVC**中最重要的区别之一是**ABSOLUTE**和**RELATIVE**路径。

***如您所知：***在 Spring MVC 中，您可以将视图作为`String`对象`ModelAndView`。

***重要提示：***
在这两种情况下，您都必须注意**相对/绝对路径**：

1.  如果您`/`在视图名称的开头声明，则使用的是**绝对路径**。
    即不管**类级别** `@RequestMapping`，直接将自己作为**最终视图名称**进行介绍。
2.  如果您**没有**`/`在视图名称的开头声明，则您使用的是**相对路径**（相对于类路径），因此它**附加**到**类级别** `@RequestMapping`以构造**最终视图名称**。

因此，在使用 Spring MVC 时，您必须考虑上述注意事项。

**示例：** 1.在spring(boot)结构的文件夹中
创建两个HTML文件： 请注意，在`test1.html`相对**路径**的情况下，**类级别**表现为**文件夹**路径。`test2.html``static`
**`@RequestMapping`**

 ******```
--- resources
    --- static
        --- classLevelPath     //behaves as a folder when we use relative path scenario in view names   
            --- test2.html      //this will be used for relative path [case (2)]
        --- test1.html          //this will be used for absolute path [case (1)] 
```

2.  创建一个控制器类，如下所示。此示例显示了 return`String`以及**相对**路径和**绝对**路径`ModelAndView`的不同情况。

 ****```
 @Controller
@RequestMapping("/classLevelPath")
public class TestController {

    //case(1)
    @RequestMapping("/methodLevelAbsolutePath1")
    public String absolutePath1(Model model){
        //model.addAttribute();
        //...
        return "/test1.html";  
    }

    //case(1)
    @RequestMapping("/methodLevelAbsolutePath2")
    public ModelAndView absolutePath2(Model model){
        ModelAndView modelAndView = new ModelAndView("/test1.html");
        //modelAndView.addObject()
        //....
        return modelAndView; 
    }

    //case(2)
    @RequestMapping("/methodLevelRelativePath1")
    public String relativePath1(Model model){
        //model.addAttribute();
        //...
        return "test2.html";
    }

    //case(2)
    @RequestMapping("/methodLevelRelativePath2")
    public ModelAndView relativePath2(Model model){
        ModelAndView modelAndView = new ModelAndView("test2.html");
        //modelAndView.addObject()
        //....
        return modelAndView;  
    }

} 
```

**注意：**
你可以通过a来指定你的视图文件的后缀`ViewResolver`（例如`InternalResourceViewResolver`或者`spring.mvc.view.suffix=.html`在`appliction.properties`Spring Boot的文件中）并且不要`.html`在上面的代码中声明后缀。

最良好的问候

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-10-18T09:48:10.330

为了回答您的最后一个问题，即哪个更好，我想说在生产中我们使用这两者的组合。例如，如果有一个用户控制器，我们将类映射到“/user”，而 for 的方法`getSettings()`将映射到“/settings”，而 for 的方法`getPermissions()`将映射到“/permissions”等。

您可以将这些方法直接映射到“/user/settings”和“/user/permissions”，也可以跳过类映射。但大多数情况下，我们更喜欢第一种方法。**********

# zend-framework - SocialDNA 插件在 socialEngine 中不起作用

> ID：10425798
> 
> 赞同：0
> 
> 时间：2012-05-03T05:49:48.583
> 
> 标签：zend-framework, facebook-social-plugins, socialengine

我正在使用 SocialEngine4。SocialDNA 插件在我的应用程序中不起作用。它显示以下错误。

当我单击 facebook 图标时，它显示以下 javascript 错误

```
openidconnect_fbe is not defined openidconnect_facebook_login_button_clickable()social...s?c=122 (line 224) anonymous()mootoo...s?c=122 (line 1) [Break On This Error] 
```

对于剩余的社交网络链接，它显示以下 javascript 错误

```
openidconnect_relay_url is not defined openidconnect_connect_service(service="live", callback=openidconnect_onNotifyConnectedSocial(service))social...s?c=124 (line 1004) onclick(event=click clientX=483, clientY=79)onclick (line 2) [Break On This Error] ...r_window = openidconnect_newwindow( openidconnect_relay_url + '/login/' + servic... if(parseInt(openidconnect_fbe) == 1) { 
```

任何人都可以帮助我解决这个问题吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T09:38:40.803

请添加 Facebook 应用程序 ID`control panel>plugin>socialdna`

# selenium - Selenium Chromedriver 导致 Chrome 在没有配置插件、书签和其他设置的情况下启动

> ID：10425799
> 
> 赞同：3
> 
> 时间：2012-05-03T05:49:49.053
> 
> 标签：selenium, selenium-chromedriver

我是 Selenium 的新用户。我想用它来启动 Chrome 浏览器，但我遇到了问题。

```
public static void processor(String url, String name) {     
    System.setProperty("webdriver.chrome.driver", "C:/Documents and Settings/jingxiong/Local Settings/Application Data/Google/Chrome/Application/chromedriver.exe");
    WebDriver driver = new ChromeDriver();
    driver.get(url);
    WebElement element = driver.findElement(By.name(name));
    element.sendKeys("google");
    element.submit();
    System.out.println("Page title is: " + driver.getTitle());
    driver.quit();
} 
```

当我运行此示例时，Chrome 浏览器可以正常启动，但没有配置插件、我的设置或书签。我应该怎么做才能让它加载这些？谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T15:28:08.843

您应该首先阅读 selenium wiki 中的 chromedriver 文档。它在这里可用 - [http://code.google.com/p/selenium/wiki/ChromeDriver](http://code.google.com/p/selenium/wiki/ChromeDriver)

如 wiki 中所述：- 同样，要在 Chrome 启动时加载扩展程序：

```
DesiredCapabilities capabilities = DesiredCapabilities.chrome();
  capabilities.setCapability("chrome.switches", Arrays.asList("--load-extension=/path/to/extension/directory"));
  WebDriver driver = new ChromeDriver(capabilities); 
```

# django - 如何使用 django 模板从列表中获取 dict 值

> ID：10425801
> 
> 赞同：0
> 
> 时间：2012-05-03T05:50:23.900
> 
> 标签：django, django-templates

我的看法：

```
post_details = Post.objects.all()
    for each in post_details:
        post_like_list=PostLikes.objects.filter(post = each)
        pl=len(post_like_list)
        dict1={"post":each}
        dict2={"how many likes":pl}
        list.append([dict1,dict2])
    print list 
```

我的列表 =[[{'post': 住宿}, {'多少赞': 0}], [{'post': 选举}, {'多少赞': 0}], [{'post': }, {'多少赞': 3}], [{'post': }, {'多少赞': 1}]]

通过使用 django 模板，我如何从列表中的字典中获取“帖子”和“多少喜欢”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T05:52:33.463

如果您使结构合理...

```
 list.append({"post": each, "how many likes": pl}) 
```

然后你会发现你可以用它`{% for %}`来遍历列表，然后使用普通的访问方法访问字典。

# html - 在 CSS div 表中格式化图像

> ID：10425803
> 
> 赞同：1
> 
> 时间：2012-05-03T05:50:31.140
> 
> 标签：html, css, css-tables

我仍在学习 CSS 和页面格式设置并卡住了。非常感谢一些帮助。

为了简短起见，这是我想要实现的目标：

![在此处输入图像描述](../Images/e923229c2d58f18e053106696b404dd7.png)

这就是我得到的：

![在此处输入图像描述](../Images/08552eb89b89d907be1670eb8a791ebc.png)

我似乎已经尝试了一切。这是代码：

```
<div class="header-parent">

<div class="header-first-column">
  <div class="header-cell" id="header-img1">
  <img src="../../Content/images/header/header_img1.jpg" />
  </div>
  <div class="header-cell" id="header-img2">
  <img src="../../Content/images/header/header_img2.jpg" />
  </div>
</div>

<div class="header-second-column">

 <div class="header-cell" id="header-img3">
 <img src="../../Content/images/header/header_img3.jpg" />
 </div>
 <div class="header-cell" id="header-img4">
 <img src="../../Content/images/header/header_img4.jpg" />
 </div>

</div>

<div class="header-third-column">
    <div class="header-cell" id="header-img5">
    <img src="../../Content/images/header/header_img5.jpg" />
    </div>
</div>

<div class="header-fourth-column">
    <div class="header-cell" id="header-img6">
    <img src="../../Content/images/header/header_img6.jpg" />
    </div>
    <div class="header-cell" id="header-img7">
    <img src="../../Content/images/header/header_img7.jpg" />
    </div>
</div> 
```

和 CSS：

```
.header-parent
{
    width:900px;
    top:10px;
    position:absolute;
    margin-left:auto;
    margin-right:auto;
    }

.header-first-column
{
    width:219px;
    background-color:White;
    float:left;
    display:block;
}

.header-second-column
{
    width:285px;
    background-color:White;
    float:left;
    display:block;
}

.header-third-column
{
    width:158px;
    background-color:White;
    float:left;
    display:block;
}

.header-fourth-column
{
    width:220px;
    background-color:White;
    float:left;
    display:block;
} 
```

我尝试直接使用其 ID 格式化图像本身，例如：

```
#header-img1
{
    padding:0 0 0 0;
    text-align:center;
} 
```

我尝试添加边距、填充、浮动图像。似乎没有任何效果。帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T06:20:20.113

只需在 CSS 中添加：

```
.header-cell {
    margin: 5px;
} 
```

根据您的要求更改以像素为单位的边距值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T06:09:28.147

添加一些边距`<div>`

```
.header-second-column, .header-third-column, .header-fourth-column
{
    margin-left: 10px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T06:20:55.270

似乎您在使用以下结构之间忘记了一些 s

```
<div>
  <div>
    <div></div>
    <div></div>
  </div>
  <div>
    <div></div>
    <div></div>
  </div>
  <div></div>
  <div>
    <div></div>
    <div></div>
  </div>
</div> 
```

# plot - Gnuplot---聚集的rowstacked条

> ID：10425805
> 
> 赞同：2
> 
> 时间：2012-05-03T05:50:36.113
> 
> 标签：plot, gnuplot

如何在 gnuplot 中制作聚集的行堆叠条？它知道如何获得一个集群条，但不知道如何获得一个行堆叠条的集群。谢谢！

编辑：在集群中，堆叠条也应该使用不同的颜色/图案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T17:33:53.397

If I understand the original post right, it should be easy to accomplish with gnuplot if you can preprocess your data to offset x coordinates of specific data series.

To illustrate the approach I will use the following data in 3 data series:

```
# impulse.dat
0.9 1
1.9 4
2.9 3
3.9 5

1.0 1
2.0 2
3.0 4
4.0 2

1.1 3
2.1 3
3.1 5
4.1 4 
```

Here each series has x-coordinates shifted by `.1`. To plot it I choose impulses of width 10\.

```
plot [0:5] [0:6] 'impulse.dat' ind 0 w imp lw 10, \
    'impulse.dat' ind 1 w imp lw 10, \
     'impulse.dat' ind 2 w imp lw 10 
```

**Edit:** to combine this with Matt's suggestion to use boxes would definitely be better:

```
set boxwidth 0.1
set fill solid
plot [0:5] [0:6] 'impulse.dat' ind 0 w boxes,\
     'impulse.dat' ind 1 w boxes, \
     'impulse.dat' ind 2 w boxes 
```

Following is the picture with impulses.

![stacked bar plot w impulses](../Images/8d2b21819a49cb8086eeb084cea946f9.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T12:26:03.080

我不完全确定如何去做，但是，一个想法是让盒子相互接触

```
`set boxwidth 1` 
```

这还不能让你看到一个“聚集”的外观——为了得到一个聚集的外观，我认为你需要插入一行（可能是列）零......（我还没有对那个进行排序）我的头）进入你想要集群中断的数据文件。

当然，我想你也不需要设置 boxwidth...clustered 只是取决于偶尔打破...

# jmeter - 在 jmeter 中对用户定义的变量进行分组

> ID：10425807
> 
> 赞同：0
> 
> 时间：2012-05-03T05:50:38.253
> 
> 标签：jmeter

是否可以对用户定义的变量进行分组，并在 Beanshell 采样器中动态获取组中定义的所有变量名称和值。我真正想要的是读取用户定义的变量配置元素中定义的所有变量（名称和值）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T21:34:18.840

您可以使用 var.getIterator 以及 .getIteration 和 .incIterator 来遍历 beanshell 前/后处理器中的可用变量。

请参阅 [http://jmeter.apache.org/api/org/apache/jmeter/testelement/VariablesCollection.html](http://jmeter.apache.org/api/org/apache/jmeter/testelement/VariablesCollection.html) 和 [http://jmeter.apache.org/api/org/apache/jmeter/threads/JMeterVariables.html](http://jmeter.apache.org/api/org/apache/jmeter/threads/JMeterVariables.html)

有关可用方法的更多详细信息。

# ios - 将来发送电子邮件，无需通知

> ID：10425810
> 
> 赞同：1
> 
> 时间：2012-05-03T05:50:42.560
> 
> 标签：ios, email

是否可以在 iOS 上通过设置时间和日期在不通知的情况下发送电子邮件？有人可以指导我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T05:54:50.890

对的，这是可能的。但为此，您需要创建一个 Web 服务，该服务将代表用户发送邮件并附上他/她的通知。

如果您不想通知用户或不想使用[MFMailComposeViewController](https://developer.apple.com/library/ios/#documentation/MessageUI/Reference/MFMailComposeViewController_class/Reference/Reference.html)发送邮件，则创建 Web 服务、传递邮件详细信息并仅从那里发送邮件是唯一的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T06:23:14.427

您可以从另一台服务器执行此操作，您需要一个带有 php 和 mysql 的 Web 服务器，您创建一个 Web 服务，并将“电子邮件”发送到服务器，将其与您想要的主题、正文和日期一起保存在数据库中发送电子邮件。

比您设置的服务器 cronjob 将在特定时间间隔运行并检查数据库中的每封电子邮件以查看是否该发送它，如果是则发送电子邮件，

基本上这是您在这种情况下可以拥有的唯一解决方案，用户会认为他发送了邮件，但电子邮件稍后将由 Web 服务器发送，而不是通过电话发送。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T06:05:23.423

使用本地调度本地通知并使用它可以根据您的要求发送邮件。

[安排本地通知](http://blog.mugunthkumar.com/coding/iphone-tutorial-scheduling-local-notifications-using-a-singleton-class/)

希望对你有帮助..

# ajax - 使用 ID 检索多个 API

> ID：10425811
> 
> 赞同：3
> 
> 时间：2012-05-03T05:50:53.747
> 
> 标签：ajax, json, sencha-touch, sencha-touch-2

我有 2 个我想同时使用的 API，API1 和 API2。

API2 向 API1 提供新闻提要，而 API1 以列表形式处理所有内容。这意味着如果单击 API1 中的任何列表，它将使用已定义的 ID 从 API2 检索新闻提要。

谁能帮帮我？我被困住了。我的代码截图在这里：http: [//i1159.photobucket.com/albums/p637/Apulo_Cosmas/2API.jpg](http://i1159.photobucket.com/albums/p637/Apulo_Cosmas/2API.jpg)

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T07:28:52.297

根据此处的 Sencha 文档（在*Digging In*下）： [http ://docs.sencha.com/touch/2-0/#!/guide/first_app](http://docs.sencha.com/touch/2-0/#!/guide/first_app)

您需要使用此代码将侦听器和详细信息面板添加到您的配置中（不需要对 contentId 的引用，您只需从原始提要中提取包含内容的**描述属性）：**

```
detailCard: {
    xtype: 'panel',
    scrollable: true,
    styleHtmlContent: true
},

listeners: {
    itemtap: function(nestedList, list, index, element, post) {
        this.getDetailCard().setHtml(post.get('description'));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T06:31:23.240

如果您手动收听列表（从 API 1 获取）`itemtap`事件，可能会更容易。

在您的控制器中，应该有如下内容：

```
refs: {
  bloglist: 'blog list'
},

control: {
  bloglist: {
    itemtap: 'fetchAPI2'
  }
},
fetchAPI2: function (list,index,target,record){
  id = record.get('contentId'); //this is your id for using API2.
  Ext.data.JsonP.request({
            scope: this,
            url: API2_URL,
            callbackKey: 'callback',
            params: {your params for API2 here},

            callback: function(success,result) {
                           // whatever you want to do here
            }           
        });
} 
```

# sql - 仅当字段为 True 时才更新 SQL 字段

> ID：10425813
> 
> 赞同：1
> 
> 时间：2012-05-03T05:51:02.093
> 
> 标签：sql, sql-server, database

我有一个通知表，其中包含 id、type、user_id 和 unseen 列。

要获得新的通知计数，我使用：

```
SELECT count(1) 
FROM notifications 
WHERE user_id=123 AND unseen=1 
```

为了只标记新通知，我使用：

```
UPDATE notifications 
SET unseen=0 
WHERE user_id=123 AND unseen=1 
```

但是这个更新查询有时会出错。我想知道，这样做的正确方法是什么？

编辑：

> ERROR DESC
> Transaction (Process ID 68) was deadlocked on lock; 与另一个进程通信缓冲区资源，并已被选为死锁牺牲品。重新运行事务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T13:55:29.353

这可能是死锁问题，当您尝试更新记录时，有些人也在读取这些记录。

您的更新语句是一个完整的语句，我认为它没有在事务中运行。看来，您希望获得更多优先级来完成更新的语句而不是读取语句（使用 select）。

对于上述场景，您可以通过在读取时使用 NoLock 来允许幻读（每次用户使用执行选择查询时得到不同的输出）。在您的场景中，这不是脏读，因为您将只读取已提交的记录。

```
SELECT count(1) FROM notifications (NOLOCK) WHERE user_id=123 AND unseen=1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T11:56:19.863

以下语句将忽略锁定的记录和未提交的记录。

```
SELECT count(1) 
FROM notifications WITH(READPAST)  
WHERE user_id=123 AND unseen=1 
```

以下语句将锁定需要更新的记录，它不会锁定整个表。

```
UPDATE notifications  with (ROWLOCK) 
SET unseen=0 
WHERE user_id=123 AND unseen=1 
```

所以使用 READPAST 和 ROWLOCK 提示，可以避免死锁。

[从她那里阅读以了解 READPAST 和 NOLOCK](http://www.techrepublic.com/article/using-nolock-and-readpast-table-hints-in-sql-server/6185492)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-03T06:41:53.480

在“更新”中，您应该使用记录的主键之类的东西来标记您看到的记录。

```
UPDATE notifications SET unseen=0 WHERE user_id=123 AND unseen=1 and PKID='some thing' 
```

# asp.net - 在 IIS 6 上运行的 .Net Web 服务出错

> ID：10425814
> 
> 赞同：1
> 
> 时间：2012-05-03T05:51:03.713
> 
> 标签：asp.net, web-services, iis-6

我正在尝试在 IIS 6 服务器上运行在 .Net 中构建的 Web 服务。但它在启动 Web 服务时出现错误

> **错误**
> 
> **“/9448”应用程序中的服务器错误**
> 
> ***配置错误***
> 
> **描述**：“处理此请求所需的配置文件时发生错误。请查看下面的具体详细信息并适当地修改您的配置文件。
> 
> **解析错误消息**：加载配置文件时出错：访问路径“C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\Config\machine.config”被拒绝。
> 
> **源错误**：
> 
> [没有相关的源代码行]
> 
> **源文件**：C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\Config\machine.config **行：0**
> 
> **版本信息**：Microsoft.NET Framework Version v2.0.50727.3625；ASP.Net 版本：v2.0.50727.3625

运行它的用户拥有完整的管理员权限

虽然以前工作正常

可能是什么问题呢？

# php - 如何在 HTML 页面中使用网络摄像头拍摄快照？

> ID：10425820
> 
> 赞同：1
> 
> 时间：2012-05-03T05:51:36.893
> 
> 标签：php, javascript, html, opera

如果我保存`<canvas>`包含绘图的内容。一切正常。但是，如果我想保存一个`canvas`包含图像（来自网络摄像头流的帧）的图像，它就不起作用，也不会向服务器发送任何内容。有人对此有一些想法吗？

**HTML：**

```
<video id="VideoCamera" autoplay></video>
<canvas id="testCanvas" width="300" height="300"></canvas>
<textarea id="debugConsole" rows="10" cols="60">Data</textarea>
<button onclick="saveViaAJAX();">Save Via AJAX</button>
<input id="button" type="button" value="photo" onclick="snapshot()" />
<input id="button1" type="button" value="bubble" onclick="bubble()" />

<script type="text/javascript">
    // This portion webcam setup
    var video = document.getElementsByTagName('video')[0];
    var localMediaStream = null;
    if (navigator.getUserMedia) {
        navigator.getUserMedia('video', successCallback, errorCallback);
        function successCallback(stream) {
            video.src = stream;
            localMediaStream = stream;
        }
        function errorCallback(error) { heading.textContent = "An error occurred: [CODE " + error.code + "]"; }
    }
    else {
        heading.textContent = "Native web camera streaming is not supported in this browser!";
    }

    //draw something in canvass
    var canvas = document.getElementById("testCanvas");
    if (canvas.getContext) {
        var canvasContext = canvas.getContext("2d");    
        canvasContext.fillStyle = "rgb(" + (parseInt(Math.random() * 255)) + "," + (parseInt(Math.random() * 255)) + "," + (parseInt(Math.random() * 255)) + ")";
        canvasContext.beginPath();
        canvasContext.arc(Math.random() * 350, Math.random() * 350, Math.random() * 20, 0, Math.PI * 2, true);
        canvasContext.fill();
    }

    // This portion of the code simply draws random circles into the canvas (it has nothing todo with saving the canvas).
    function bubble() {
        var canvas = document.getElementById("testCanvas");
        var canvasContext = canvas.getContext("2d");
        for (i = 0; i < 150; i++) {
            canvasContext.fillStyle = "rgb(" + (parseInt(Math.random() * 255)) + "," + (parseInt(Math.random() * 255)) + "," + (parseInt(Math.random() * 255)) + ")";
            canvasContext.beginPath();
            canvasContext.arc(Math.random() * 350, Math.random() * 350, Math.random() * 20, 0, Math.PI * 2, true);
            canvasContext.fill();
        }
    }

    // This portion of the code take snaphot from wecam
    function snapshot() {
        var canvas = document.getElementById("testCanvas");
        var canvasContext = canvas.getContext("2d");
        canvasContext.drawImage(video, 0, 0, 240, 320);
    }

    // This portion of the code save canvass to server
    function saveViaAJAX() {
        var canvas = document.getElementById("testCanvas");
        var canvasContext = canvas.toDataURL("image/png");
        var postData = "canvasData=" + canvasContext;
        var debugConsole = document.getElementById("debugConsole");
        debugConsole.value = canvasContext;

        var ajax = new XMLHttpRequest();
        ajax.open("POST", 'Save.php', true);
        ajax.setRequestHeader('Content-Type', 'canvas/upload');
        ajax.setRequestHeader('Content-TypeLength', postData.length);

        ajax.onreadystatechange = function () {
            if (ajax.readyState == 4) {
                debugConsole.value = canvasContext + " " + debugConsole.value;
            }
        }
        ajax.send(postData);
    } 
```

**PHP`save.php`代码：**

```
$png =$_POST['data'];
$filteredData=substr($png, strpos($png, ",")+1);
$unencodedData=base64_decode($filteredData);
$fp = fopen( 'image.png', 'wb' );
fwrite( $fp, $unencodedData);
fclose( $fp ); 
```

谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-06-22T09:29:41.217

请检查[picEdit 项目](https://github.com/andyvr/picEdit)，它实现了从相机拍摄快照。在PC和Android上测试（使用Chrome，原生浏览器似乎不支持访问相机）：

*   **演示**：[http ://andyvr.github.io/picEdit/](http://andyvr.github.io/picEdit/)
*   **下载**：[https ://github.com/andyvr/picEdit](https://github.com/andyvr/picEdit)

# php - 更新视图计数中的 ajax 问题

> ID：10425824
> 
> 赞同：0
> 
> 时间：2012-05-03T05:51:50.000
> 
> 标签：php, mysql, ajax

我有一个带有几列的简单表格。我正在更新数据库中的视图计数，但问题是我每 20 秒进行一次 ajax 调用。我只想计算页面浏览量，但 AJAX 调用也被计为浏览量。

我的代码非常简单。

```
$res = sql_query("select * from tableA where user='XYZ'");
sql_query("update tableA set views=views+1  "); 
```

这可以完成工作，但由于 AJAX，它会不断增加数据库中的视图数。谁能帮助我，以便我只能计算实际视图，而不是 AJAX 调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T06:00:46.070

更改更新页面点击的逻辑。检查 AJAX HTTP 标头（参见此处：[http](http://davidwalsh.name/detect-ajax) ://davidwalsh.name/detect-ajax ），并仅相应地更新表。

```
if(empty($_SERVER['HTTP_X_REQUESTED_WITH']) || strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) != 'xmlhttprequest') {
    sql_query("update tableA set views=views+1  ");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T06:02:12.023

你可以试试这个：

```
<body onload="your function goes here"> 
```

# java - 在 android 2.3 上使用 jcifs 库时出现 NoClassDefFound 异常

> ID：10425825
> 
> 赞同：3
> 
> 时间：2012-05-03T05:51:56.007
> 
> 标签：java, android, jcifs

我在我的 android 应用程序中使用 jcifs-1.3.17.jar 库。

以下代码在 android 1.6 模拟器上运行良好，但在 2.3 和 3.0 上失败。

应用程序启动时在 2.3 模拟器的 logcat 中收到以下警告。

```
05-03 10:41:43.105: E/dalvikvm(338): Could not find class 'jcifs.smb.NtlmPasswordAuthentication', referenced from method myPackage.getFile 
```

并在创建 NtlmPasswordAuthentication 对象时出现以下异常。

```
05-03 10:49:59.765: E/AndroidRuntime(338): java.lang.NoClassDefFoundError: jcifs.smb.NtlmPasswordAuthentication 
```

谁能告诉我，我错过了什么？

我的功能是

```
public boolean getFile(String url) 
    {
        try 
        {

            String  name="server1";//my windows username
            String  password="password1";//my windows password

            SmbFile dir=null;
            url = url.toLowerCase();

            if (!url.startsWith("smb://") )
                url = "smb://" + url;

            SmbFile file = null;
            try 
            {
                NtlmPasswordAuthentication auth = new NtlmPasswordAuthentication(null, name, password);
                file = new SmbFile(url, auth);
                SmbFileInputStream in = new SmbFileInputStream( file );

                File gpxfile = null;
                File root = Environment.getExternalStorageDirectory();
                gpxfile = new File(root, file.getName());
                gpxfile.delete();
                gpxfile.createNewFile();
                FileOutputStream out = new FileOutputStream(gpxfile);

                long t0 = System.currentTimeMillis();

                byte[] b = new byte[8192];
                int n, tot = 0;
                long t1 = t0;
                while(( n = in.read( b )) > 0 ) {
                    out.write( b, 0, n );
                    tot += n;
                }

            } 
            catch (Exception e1) 
            {

            }

            return true;
        } 
        catch (Exception e) 
        {
            return false;
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T05:53:45.867

在您的项目中添加一个文件夹 libs 并在其中复制所有 jar 文件。

按照这些说明

所以右键单击您的项目->创建一个名为**libs的文件夹**

并按照此步骤

```
 right click (on libs folder) -->import-->File System-->browse to select your jar file and hit finish and run you project. 
```

在那之后

```
 right click on the project --> Built Path-->java built path-->add jars select your jar file from your libs folder 
```

# objective-c - 请解释Objective C中的Getter和Setter

> ID：10425827
> 
> 赞同：31
> 
> 时间：2012-05-03T05:52:12.903
> 
> 标签：objective-c, setter, getter

> **可能重复：**
> [Setters 和 Getters (Noobie) - iPhone SDK](https://stackoverflow.com/questions/3992539/setters-and-getters-noobie-iphone-sdk)

我是这里的初学者。我最近两个月才开始学习 iOS，没有任何编程背景。（虽然一点点Java）。谁能解释一下Objective C中的getter和setter是什么？它们有什么用？为什么我们使用`@property`and `@synthesize`？

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-05-03T07:05:06.723

Getter 是一种方法，每次访问（读取）属性（用 声明`@property`）时都会调用它。无论该方法返回什么都被认为是该属性的值：

```
@property int someNumber; 
```

...

```
- (int)someNumber {
    return 42;
} 
```

...

```
NSLog("value = %d", anObject.someNumber); // prints "value = 42" 
```

Setter 是一种在每次更改属性值时都会调用的方法。

```
- (void)setSomeNumber: (int)newValue { // By naming convention, setter for `someValue` should 
                                    // be called `setSomeValue`. This is important!
    NSLog("someValue has been assigned a new value: %d", newValue);
} 
```

...

```
anObject.someNumber = 19; // prints "someValue has been assigned a new value: 19" 
```

通常从 getter 返回相同的值并在 setter 中打印新值没有多大意义。要实际存储一些东西，你必须在你的类中声明一个实例变量（ivar）：

```
@interface SomeClass : NSObject {
    int _someNumber;
} 
```

并使访问器（getter 和 setter 的统称）存储/检索它的值：

```
- (int)someNumber {
    return _someNumber;
}

- (void)setSomeNumber:(int)newValue {
    _someNumber = newValue;
} 
```

...

```
SomeClass *anObject = [[SomeClass alloc]init];
anObject.someNumber = 15;
NSLog(@"It's %d", anObject.someNumber); // prints "It's 15" 
```

好的，现在该属性的行为就像通常的变量一样。编写所有这些代码有什么意义？

首先，从现在开始，您可以向访问器添加一些额外的代码，每次访问或更改属性时都会执行这些代码。这样做有多种原因，例如我可能想要进行某种隐藏计算，或者更新对象的状态、缓存内容等。

其次，Cocoa 中有很酷的机制，称为键值编码 (KVC) 和键值观察 (KVO)。它们取决于属性。[您可以在 Developer Library： KVC Programming Guide](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueCoding/Articles/KeyValueCoding.html)和[KVO Programming Guide](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueObserving/KeyValueObserving.html#//apple_ref/doc/uid/10000177i)中了解它们。不过，这些都是高级主题。

最后，在 Objective C 中，对象没有静态分配。所有对象都是动态分配的（[原因](https://stackoverflow.com/questions/5844284/why-do-objective-c-objects-have-to-be-dynamically-allocated)）。如果您想将对象指针保留在实例变量中（而不是属性），则每次为 ivar 分配新值时都必须手动执行所有内存管理（启用[自动引用计数](http://clang.llvm.org/docs/AutomaticReferenceCounting.html)时并非如此）。使用属性，您可以在访问器中放置一些内存管理代码，让您的生活更轻松。

我不相信这个解释对于不熟悉 Objective C 内存管理的人来说没有多大意义，所以，要么阅读一些关于它的真实文档/教程，要么只使用属性（而不是实例变量），直到你了解所有以一种或另一种方式详细说明。就个人而言，我不喜欢第二种选择，但这取决于你。

您可以使用`@synthesize`使编译器自动为您生成基本访问器和底层实例变量。而不是上面的代码 ( `-(int)someNumber`and `-(void)setSomeNumber:`) 你可以写

```
@synthesize someNumber = _someNumber; // = _someNumbers tells compiler 
                                      // to name the instance variable `_someNumber`. 
                                      // You could replace it with = `_somethingElse`, of
                                      // course, but that's an ill idea. 
```

这一行为您生成`int _someNumber`变量、`someNumber`getter 和`setSomeNumber`setter。如果您希望访问器执行比从某个实例变量存储/检索值更复杂的操作，您将不得不自己编写它们。

希望这一切都有意义。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-03T06:00:08.800

“Getters”和“setters”用于控制对变量（字段）的更改。

根据封装原则，“setter”最常用于面向对象的编程中。根据这一原则，将类的成员变量设为私有以隐藏和保护它们不受其他代码的影响，并且只能由公共成员函数修改，该函数将所需的新值作为参数，可选地对其进行验证，并修改私有成员变量。

通常，“setter”伴随着“getter”（也称为访问器），它返回私有成员变量的值。

Getter/Setter 方法也可以在非面向对象的环境中使用。在这种情况下，对要修改的变量的引用连同新值一起传递给方法。在这种情况下，编译器无法限制代码绕过 getter/setter 方法并直接更改变量。开发人员有责任确保仅通过这些方法修改变量，而不是直接修改。

在支持它们的编程语言中，属性提供了一种方便的替代方案，而不会放弃封装的效用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-03T05:58:05.383

大多数面向对象语言中的属性“getters”和“setters”都围绕类实例的私有成员提供“外部”或用户界面。一些 OO 批评者将它们称为“语法糖”，但归根结底是您的类的使用者将使用*您*以编程方式控制的这些接口，而不是访问*实际*的私有成员本身。这样，您可以（例如）保护私有变量不接收无效或超出范围的值，或者通过仅提供 getter 但不提供 setter 将属性设为只读。更有趣的是，getter 和 setter 可以包装你的类中没有原生保留的属性，

Getter 和 setter 肯定不是 Objective-C 独有的。如果您继续使用其他 OO 语言进行编程，您会在 C#、Java 和其他语言中找到它们的风格。

祝你好运。

# javascript - 在javascript中验证整数值

> ID：10425828
> 
> 赞同：0
> 
> 时间：2012-05-03T05:52:32.997
> 
> 标签：javascript

在我的应用程序中，我为用户名取值。如果该值为 0，那么我必须运行一些代码。但是我应该如何编写 if 块？

```
 var userName=document.getElementById("member").value; 
```

上述语句将返回 0（零）。任何人都可以为我写 if 语句吗？提前谢谢你。这是整个代码

```
var userName=document.getElementById("member").value;
    var password=document.getElementById("password").value;

    if(userName==="0"){
        var div4 = document.getElementById("errorMessage");
        var text1 = "insert userName.";
        div4.style.display = "block";
        div4.style.color = "red";
        div4.style.fontSize = "65%";
        div4.innerHTML = text1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T09:18:35.980

除了其他答案：您可以通过这种方式检查值 0

```
if (Number(userName) === 0) 
```

其优点是，如果用户仅使用空格（空格、制表符等）填充用户名字段，它仍然会评估为`true`（这是因为数字转换会修剪参数值）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T05:55:43.147

由于值`userName`是字符串类型，您可以使用：

```
if (userName === "0") {
  ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T05:55:55.197

该`.value`属性将返回一个字符串。

在这种情况下，您可以比较字符串`userName`to的值`0`：

```
if (userName == '0') {
  ...
} 
```

# php - SQL 更新停止工作？

> ID：10425830
> 
> 赞同：0
> 
> 时间：2012-05-03T05:52:37.863
> 
> 标签：php, mysql, sql-update

我想更新一个mysql数据库。这对我来说已经成为一种常见的做法，但由于某种原因没有错误，它就是行不通。我唯一从未做过的事情是与 2 个变量进行比较（在这种情况下，ID && 名称）

```
$name = $_POST['name'];
$duty = $_POST['duty'];
$number = $_POST['number'];
$url = $_POST['url'];

 $insert = "UPDATE vendors SET name = '$_POST[name]', duty = '$_POST[duty]', number = '$_POST[number]', url = '$_POST[url]' WHERE id = '$id' && name = '$name'";

$result=mysql_query($insert) or die(mysql_error());

 if ($result) {
 header("location:**HIDDEN**"); 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T05:56:56.007

而不是`&&`，您应该使用`AND`添加另一个 where 条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T05:55:27.187

改为这样写：

```
$name = $_POST['name'];
$duty = $_POST['duty'];
$number = $_POST['number'];
$url = $_POST['url'];

 $insert = "UPDATE `vendors` SET `name` = '{$_POST['name']}', `duty` = '{$_POST['duty']}', `number` = '{$_POST['number']}', `url` = '{$_POST['url']}' WHERE (`id` = '$id' AND `name` = '$name')";

$result = @mysql_query($insert) or die(mysql_error());

 header("location:**HIDDEN**"); 
```

它现在应该可以工作了。如果仍有问题，请通知我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T05:57:45.223

用 AND 替换 && 你应该很好

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T05:59:10.977

您的查询是错误的。以下是正确的。

您使用变量的方式是错误的。

您还没有为 $id 编写任何代码。那是什么？

```
$insert = "UPDATE vendors SET name = '".$_POST['name']."', duty = '".$_POST['duty']."', number = '".$_POST['number']."', url = '".$_POST['url']."' WHERE id = '$id' AND name = '$name'"; 
```

# c# - 使用 c# 将 xls 文件导入 sql server 2008 的问题

> ID：10425833
> 
> 赞同：0
> 
> 时间：2012-05-03T05:52:50.203
> 
> 标签：c#, xls

我正在使用 c# 将 xls 文件导入 sql server 2008 的任务，xls 文件在 xls 文件中包含 3 列（ProductCode = 具有字母数字值，Productname = 具有字符串值，Categoryids = 具有字母数字值）。

当我通过我的代码导入 xls 时，它读取 Productname、Categoryids 但 ProductCode 只有数值，它无法读取包含字符的代码。

例如：示例列值 **productcode** -30-sunscreen-250ml, 04 5056, 045714PC, 10-cam-bag-pouch-navy-dot, 100102

我读了 100102，但读不出来 [045714PC,04 5056,-30-sunscreen-250ml,10-cam-bag-pouch-navy-dot]

请提出任何解决方案。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T06:04:50.643

Excel 的 OLEDB 驱动程序根据前 8 行数据对列的数据进行假设。如果给定列的前 8 行中的*大部分*，它假定整个列是数字，然后不能正确处理字母数字值。

对此有四种解决方案：

1.  对传入的数据进行排序，以便前 8 行中的大多数在该列中具有字母数字值（以及在具有混合数字/字母数字数据的任何其他列中）。

2.  在实际执行导入时忽略的行 2-9 中添加假数据行，并确保该行包含任何不应该是严格数字的列中的字母。

3.  编辑位于注册表中 [HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Jet\4.0\Engines\Excel] 的名为“TypeGuessRows”的 REG_DWORD 键，并将 8 更改为 0。这将强制 Excel 在猜测列之前查看整个工作表数据类型。但是，这可能会影响性能。（您也可以将值从 8 更改为 1 到 16 之间的任何值，但这只会更改 Excel 查看的行数，而 16 对您来说可能仍然不够。）

4.  在连接字符串中添加“;IMEX=1”。这将更改逻辑以查找**至少一个**非数字值，而不是查看**大多数**值。然后可以将其与解决方案 (1) 或 (2) 结合使用，以确保它“看到”前 8 行内适当列中的字母数字值。

# php - php比较日期变化的日期

> ID：10425835
> 
> 赞同：9
> 
> 时间：2012-05-03T05:53:20.963
> 
> 标签：php, date, comparison, datetime-comparison

我在 SO 上找到了数百个与此类似的主题的问题和答案，但是，没有一个符合我的具体需求，我很困惑。

我有一个 ymd 格式的变量，我需要查看它是否是在前一个日历日（不是 24 小时前，而是在前一个日历日）创建的。

IE。$tDate = '12-05-2';

如果对象创建于 2012 年 5 月 2 日晚上 11:59（存储时间），我需要与 2012 年 5 月 3 日上午 12:01（当前时间）进行比较以等于 true。

如果对象创建于 2012 年 5 月 2 日晚上 11:51（存储时间），我需要与 2012 年 5 月 2 日晚上 11:58（当前时间）进行比较以等于 false。

我知道如果这些存储在 MySQL 数据库中并从字段中提取，MySQL 可以很容易地解决这个问题。但是，在这种情况下，该解决方案不是一种选择。

这种比较必须完全在 php.ini 中完成。

我知道这是一个古怪的问题，但是，嘿，这就是 StackOverflow 的大师擅长的！期待看到回复！

*更新*

将其计算为：

```
 $dTest = '12-05-02';
    $dTest = explode('-',$dTest);
    $dTest2 = date('y-m-d');
    $dTest2 = explode('-',$dTest2);

    if ($dTest[2]<$dTest2[2]){
        echo '<br />Posted Yesterday<br />';
    } else {
        echo '<br />Posted Today<br />';
    } 
```

有没有更有效的解决方案？似乎有效，但我认为必须有一个更优化/优雅的解决方案？

***解决了***

```
$tHolder = '12-05-12';
$voteDate = date("y-m-d", strtotime($tHolder));
$today = date("y-m-d", strtotime("today"));

if ($voteDate === $today)
{
   echo "this was today's post";
}
elseif ($voteDate < $today)
{
   echo "this was previous to today";
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-03T06:14:26.297

首先 - 我不认为你的“解决方案”有效。当今天的日期是 12-06-01 并且帖子是在 12-05-31 时会发生什么 - 它会给出错误的答案，因为“31”>“1”

无论如何-我认为正确的答案是：

```
$yesterday =date("y-m-d", strtotime("yesterday"));
$today = date("y-m-d", strtotime("today"));

if ($yesterday === $tDate)
{
   echo "this was yesterdays post";
}
elseif ($today === $tDate)
{
   echo "this was todays post";
}
else
{
    echo "this was NOT yesterday or today":
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T06:20:05.323

如果您实际上是在寻找“X 天前发布”：

```
$datetime1 = new DateTime('2012-05-01');
$datetime2 = new DateTime('2012-05-02');
$interval = (int)$datetime1->diff($datetime2)->format('%a');
switch ($interval) {
    case 0:
        echo "Posted Today<br />";
        break;
    case 1:
        echo "Posted $interval day ago<br />";
        break;
    default:
        echo "Posted $interval days ago<br />";
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-03T06:15:48.867

您可以将两个日期都转换为 UNIX 时间，然后将其作为整数进行比较：

```
$day_start = strtotime('-1 day', mktime(0, 0, 0);
$day_finish = strtotime('-1 day', mktime(23, 59, 59);

$dT = strtotime('-1 day', $dTime)

if($dT > $day_start && $dT < $day_finish) {
 var_dump($dT);
} else {
 exit;
} 
```

# xml - POST XML 数据返回 HTTP/1.0 501 Not Implemented 错误

> ID：10425837
> 
> 赞同：0
> 
> 时间：2012-05-03T05:53:27.787
> 
> 标签：xml, linux, embedded, embedded-linux, flexigrid

我已经在我的 x86 机器上成功尝试了以下代码。没有遇到错误，并且显示了一个表格，其中包含从 data.xml 中提取的数据。（Flexigrid 是一个用于显示表格的库。）`[10:37:42.196] POST http://localhost/data.xml [HTTP/1.1 200 OK 1ms]`在 firefox 的日志中接收到消息。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Flexigrid</title>
<link rel="stylesheet" type="text/css" href="./css/flexigrid.css">
<script type="text/javascript" src="../jquery.js"></script>
<script type="text/javascript" src="./js/flexigrid.js"></script>
</head>
<body>
<table id="flex1" style="display:none"></table>
<script type="text/javascript">
$("#flex1").flexigrid({
    url: '../data.xml',
    dataType: 'xml',
    colModel : [
        {display: 'Ports', name : 'port', width : 50, sortable : true},
        {display: 'Rx bytes', name : 'rx_bytes', width : 50, sortable : true},
        {display: 'Rx drop', name : 'rx_drop', width : 50, sortable : true},
        {display: 'Rx errs', name : 'rx_errs', width : 50, sortable : true},
        {display: 'Rx frame', name : 'rx_frame', width : 50, sortable : true},
        {display: 'Rx over', name : 'rx_over', width : 50, sortable : true},
        {display: 'Rx CRC', name : 'rx_crc', width : 50, sortable : true},
        {display: 'Tx pkts', name : 'tx_pkts', width : 50, sortable : true},
        {display: 'Tx bytes', name : 'tx_bytes', width : 50, sortable : true},
        {display: 'Tx drop', name : 'tx_drop', width : 50, sortable : true},
        {display: 'Tx errs', name : 'tx_errs', width : 50, sortable : true},
        {display: 'Tx coll', name : 'tx_coll', width : 50, sortable : true}
        ],
    sortname: "port",
    sortorder: "asc",
    usepager: false,
    useRp: true,
    rp: 15,
    showTableToggleBtn: true,
    width: 746,
    onSubmit: addFormData,
    height: 200
});

function addFormData(){
    //passing a form object to serializeArray will get the valid data from all the objects, but, if the you pass a non-form object, you have to specify the input elements that the data will come from
    var dt = $('#sform').serializeArray();
    $("#flex1").flexOptions({params: dt});
    return true;
}
$('#sform').submit(function (){
    $('#flex1').flexOptions({newp: 1}).flexReload();
    return false;
});
</script>
</body>
</html> 
```

但是当我在基于 ARM 的开关上尝试相同的代码时，会出现一个空的 flexigrid 表。发现本例中的 data.xml 与 x86 机器的完全相同。

但是，在 Firefox 的日志中，我收到以下消息：`[10:24:57.611] POST http://192.168.3.1/data.xml [HTTP/1.0 501 Not Implemented 3ms]`

其中 192.168.3.1 是交换机的 IP。HTTP/1.0 501 Not Implemented 到底指的是什么？有人知道解决这个问题的方法吗？

**更新：**
刚刚注意到，在我的 x86 机器上，如果我浏览[http://localhost/data.xml](http://localhost/data.xml)，xml 的内容会出现在 firefox 中，但如果我在服务器上浏览 data.xml 作为[http://192.168.3.1/data .xml](http://192.168.3.1/data.xml)，文件 data.xml 被下载而不是显示在 Firefox 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T19:21:56.333

您能否捕获两个不同客户端的 HTTP 请求和响应标头？最有可能的是，它们是不同的，并且导致来自嵌入式系统的请求被不同地处理。

# batch-file - 静默运行一个批处理文件，另一个正常运行，用于 USB 自动备份

> ID：10425838
> 
> 赞同：0
> 
> 时间：2012-05-03T05:53:34.350
> 
> 标签：batch-file, usb, robocopy

这是我第一次在这里发帖，所以我会尽力而为。基本上我想在插入时自动备份我的USB，我现在设置的是三个文件，backup.bat，silent backup.vbs，和backup watch.bat

备份.bat

```
@echo off
Set _TS=        
Set _Source=C:\NMIT
Set _Dest=I:\Users\The Beast\SkyDrive\School\NMIT
Set _Log=I:\Users\The Beast\Documents\NMIT USB Backup Log.txt
robocopy "%_Source%" "%_Dest%" /E /ZB /B /V /PURGE /LOG:"I:\Users\The Beast\Documents\NMIT USB Backup Log.txt"
echo Backup complete, please remove USB
pause 
```

静默备份.vbs

```
Set WshShell = CreateObject("WScript.Shell") 
WshShell.Run chr(34) & "I:\Users\The Beast\Desktop\testing bat\backup watch.bat" & Chr(34), 0
Set WshShell = Nothing 
```

备份watch.bat

```
@echo off

    IF EXIST "C:/NMIT" call "I:\Users\The Beast\Desktop\testing bat\backup.bat" 
```

一切正常，运行，复制新文件，写入日志文件，由于我在网上找到的 vbs scipt，它也可以静默运行，唯一的问题是我不知道它是否完成备份，脚本运行每个5 分钟的任务调度程序。我想要做的是让监视脚本静默运行，但在备份完成时显示通知。我想最简单的方法是编辑 backup.bat 以包含回声和暂停，但如果我现在这样做它是不可见的，那么我怎样才能让监视脚本静默运行，但备份脚本运行正常？谢谢大家，我希望我的帖子描述性足够。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T05:40:17.870

要创建通知，`notify.bat`请在同一目录中创建一个名为的新文件：

```
@echo off
cls
set seconds=5
echo Backup complete, please remove USB
ping -n %seconds% 127.0.0.1 > NUL 2>&1
exit 0 
```

现在将您的`Backup.bat`脚本更改为：

```
@echo off
Set "_TS="        
Set _Source=C:\NMIT
Set _Dest=I:\Users\The Beast\SkyDrive\School\NMIT
Set _Log=I:\Users\The Beast\Documents\NMIT USB Backup Log.txt
robocopy "%_Source%" "%_Dest%" /E /ZB /B /V /PURGE /LOG:"I:\Users\The Beast\Documents\NMIT USB Backup Log.txt"
start notify.bat 
```

当通过 vbs 文件调用该脚本时，该`Backup.bat`脚本将被隐藏，但 notify.bat 将是可见的，因为它是从 bat 文件中调用的。

另外，一个小技巧，要在引号内转义引号，请使用双引号。看起来`Silent backup.vbs`像：

```
Set WshShell = CreateObject("WScript.Shell") 
WshShell.Run """I:\Users\The Beast\Desktop\testing bat\backup watch.bat""", 0
Set WshShell = Nothing 
```

# jquery - 无法在 jqgrid 中选择行

> ID：10425841
> 
> 赞同：4
> 
> 时间：2012-05-03T05:53:48.503
> 
> 标签：jquery, jqgrid

我正在使用 jqgrid。一切都很好，但是一个小问题。我无法选择除第一行之外的任何行。当我点击任何行时，第一行总是被选中。如果有人有任何想法，请分享。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-03T06:02:14.747

我想您在 jqGrid 的输入数据中有 id 重复项。您应该了解 id 将用作表示行`id`的元素的属性值。`<tr>`id 在整个 HTML 页面上必须是唯一的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T13:53:46.087

您必须在 colModel 中输入**一**列：**key:true**

```
 colModel: [{ name: 'Código', index: 'Codigo', key: true, width: 50 },
                { name: 'Titulo', index: 'Titulo', width: 245 }] 
```

出于显而易见的原因，填充的 id 必须不同

# ruby-on-rails - 每次推送到heroku，图像不显示，回形针

> ID：10425843
> 
> 赞同：7
> 
> 时间：2012-05-03T05:53:59.080
> 
> 标签：ruby-on-rails, postgresql, heroku, amazon-s3, paperclip

这是我的情况。

我正在使用回形针让用户上传图像。它做得很好，一切都很好。然后，我把它推到了heroku。目前，我可以看到用户刚刚上传的所有图片。但是，每次进行新的提交并再次推送到 heroku，我以前的所有图像都消失了。好像没有文件了，加载不出来。

所以，我的想法是：每次我推送到heroku服务器时，本地的图像文件都会上传到heroku服务器吗？

我为我的问题做了研究，我真的不明白他们对heroku的实际说法，我不知道这对我来说是不是同样的问题。

> Heroku 有一个只读文件系统。这意味着 Paperclip 无法将上传的文件保存到 Heroku 中的任何位置。
> 
> 如果您希望能够将文件上传到托管在 Heroku 上的应用程序，那么您必须将文件作为二进制 blob 存储在数据库中，或者您必须使用单独的服务来存储文件。如果您正在寻找单独的服务，Paperclip 具有与 Amazon S3 集成的内置支持。

我发现Amazon S3需要信用卡注册，如果我没有信用卡，我就不能使用他们的服务？？

感谢您提供任何详细的建议和解释。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T07:27:20.863

亚马逊不是免费设备，您必须提供您的信用卡号才能使用它。但是，您只需支付您使用的费用，但并不昂贵。例如对于我的网站，上个月我为 15Gb 的存储支付了 2.46 美元，我为 16Gb 的数据传输支付了 1.90 美元。

要将 S3 与回形针一起使用，您需要`gem 'aws-s3'`将`Gemfile`

接下来，您需要添加`config/s3.yml`您的资产凭证，例如：

```
production:
  access_key_id: AAAAAAAAAAAAAAAAAA
  secret_access_key: BBBBBBBBBBBBBBBBBBBBBBBBBBB
  bucket: assets.my-bucket 
```

然后我有一个模型来存储我的资产，例如：

```
class Asset
  has_attached_file :asset, 
    :styles => {  :thumb => "60x60#", :large => "700x330#"},
    :storage => :s3,
    :s3_credentials => "#{Rails.root}/config/s3.yml",
    :path => "/images/:id/:style.:extension"
  validates_attachment_content_type :asset, :content_type => ['image/gif', 'image/jpeg', 'image/png', 'image/x-ms-bmp']
end 
```

我希望它有帮助

# c# - 与远程服务器通信的架构和协议

> ID：10425856
> 
> 赞同：0
> 
> 时间：2012-05-03T05:55:02.527
> 
> 标签：c#, android, networking

如何通过互联网在基于 Android 的手机和远程服务器之间建立通信？

哪种架构最好？我应该使用哪些协议？

目的是从手机上的服务器发送和接收数据（文件）和通知。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T06:03:17.450

由于 android 基本上是 linux（有点），所以您可以打开所有选项。然而，（相对）低级别的协议，如 TCP 或 UDP，并不总是最好的选择，因为网络连接在手机上是不可靠的，并且可能随时发生变化。

我在 REST-Services（JSON over http[s]）方面有很好的经验——消耗的数据比基于 XML 的服务少。

如果您想从服务器接收通知，您要么必须执行定期轮询（记住功耗！！！！）或使用某种云到设备消息传递（它也是轮询但以透明方式完成）

# asp.net-mvc - 使用 Linq to SQL 选择记录

> ID：10425859
> 
> 赞同：0
> 
> 时间：2012-05-03T05:55:22.357
> 
> 标签：asp.net-mvc, linq, entity-framework, linq-to-sql, asp.net-mvc-2

我需要从表中检索 1000 条记录。如果我在 dropdowm 中选择 1 - 1000 意味着它将显示第一组 1000 条记录。

然后，如果我在 dropdowm 中选择 1001 - 2000 意味着它将显示第二组 1000 条记录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T07:10:00.297

您可以使用[`Skip`](http://msdn.microsoft.com/en-us/library/bb358985.aspx)和[`Take`](http://msdn.microsoft.com/en-us/library/bb503062.aspx)LINQ 扩展方法来[对数据源进行分页](http://www.codeproject.com/Articles/24480/Using-Linq-to-paginate-your-ObjectDataSource)。

# java - LWUIT Touch 设备滚动问题

> ID：10425860
> 
> 赞同：2
> 
> 时间：2012-05-03T05:55:26.407
> 
> 标签：java, java-me, touch, lwuit

我想使用**LWUIT**在**触摸设备中实现****延迟加载**。**在关键设备上，我使用设备的keyDown()**事件成功实现了延迟加载，但在触摸设备上这不起作用。

 ******当用户在触摸设备中滚动列表时，我如何知道**有多少用户滚动**以及**我必须为可见区域添加多少项目**并从列表顶部删除项目并在列表底部添加项目？LWUIT 中是否有任何方法可以检查用户滚动的数量以及我必须看到的项目数量？

以及如何检测有多少组件可见，因为设备到设备的滚动速度以及可见的组件数量也在变化？如果 LWUIT 中有任何方法可以在用户拖动时找到下一个应该可见的组件，那么它可以提供帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T16:57:04.697

您应该使用列表模型来延迟加载数据而不是关键事件，这对所有事情都有效。看看我们在模型层实现延迟加载的 Makeover 演示。

不可见的模型条目不会在列表中调用。

[Eric Coolman 写了一篇很棒的教程](http://gadgets.coolman.ca/lazy-loading-implementing-an-infinite-list-in-codename-one/)，介绍如何在 Codename One 中执行此操作，用于从 Twitter 流式传输条目。******

# jquery - 使用按钮选择文本区域

> ID：10425867
> 
> 赞同：3
> 
> 时间：2012-05-03T05:55:53.840
> 
> 标签：jquery, html, jquery-selectors

当用户单击按钮时，我想选择 textarea 字段。我的代码：

```
<textarea readonly="readonly"> </textarea> <input type="button" value="Code"/> 
```

jQuery代码：

```
 $(function() {

      $(input:button').click(function(){
    ('textarea').select();
  });
}); 
```

它不工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T06:00:29.837

你的意思是：

```
$("input[type='button']").click(function(){
    $('textarea').focus();
    $('textarea').select(); //select text inside
}); 
```

# c# - VS2010设置项目中动态改变本地化

> ID：10425868
> 
> 赞同：1
> 
> 时间：2012-05-03T05:55:54.197
> 
> 标签：c#, visual-studio-2010, localization

我想知道如何动态更改 VS2008 安装项目中的本地化。场景就像操作系统的语言是法语并且用户单击 setup.exe，所有屏幕都应该是法语和英语语言。我通过将本地化属性保持为英语来创建安装项目。它向我显示所有英文屏幕。现在，如果我将本地化属性更改为法语，它会以法语显示所有屏幕。但我希望它是动态的，它应该考虑机器语言并相应地显示。

# c# - OnClientClick JavaScript 确认不起作用

> ID：10425872
> 
> 赞同：0
> 
> 时间：2012-05-03T05:56:08.863
> 
> 标签：c#, javascript, asp.net

我有 asp 按钮，该功能用于删除项目。按钮位于更新面板内。我有数据列表，我添加了项目，并且每次我有一个复选框。我有 2 个按钮全选和全部清除，我正在使用我的全选按钮选择所有项目，即 JQuery 代码，之后我试图删除时间。当我一个接一个地选择项目时，然后在其工作正常时，选择所有物品，那么它不起作用。

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Always">
    <ContentTemplate>
       <asp:Button ID="Button1" runat="server" Enabled="false" Text="Delete" 
           OnClientClick="return confirm('Are you sure?');$.loading({ mask: true, effect: 'ellipsis update' });" 
           OnClick="Button1_Click" />
       </ContentTemplate>
</asp:UpdatePanel> 
```

它正在生成的 HTML..

```
<div id="Tab1_UpdatePanel1">
      <input type="submit" id="Tab1_Button1" value="Delete Image" name="Tab1$Button1">
</div> 
```

用于启用禁用 Button1 的 JQuery

```
 $("#[id$='btnCheckAll']").click(function () {
     $("#<%= dlst1.ClientID %> input:checkbox").attr("checked", "checked");
     $("#<%=Button1.ClientID %>").removeAttr('disabled');
  });

  $("#[id$='btnUnCheck']").click(function () {
       $("#<%= dlst1.ClientID %> input:checkbox").removeAttr("checked");
       $("#<%=Button1.ClientID %>").attr('disabled', 'disabled');
  }); 
```

在 page_load 上，我也在制作 Button1.Enable=false; 当我直接选择任何项目而不使用复选框时，我正在那里制作 Button.Enabled=true 。

按钮功能工作正常，但没有显示确认框，我也检查了这个[问题](https://stackoverflow.com/questions/335516/simple-javascript-problem-onclick-confirm-not-preventing-default-action)，但对我不起作用。

当我启用按钮时，它工作正常，但是我有需要禁用按钮的条件，并且根据某些条件我正在启用按钮。然后它不工作。

请有人帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T06:10:46.777

尝试enbaling按钮，然后单击它..它肯定会工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T06:45:18.613

看来您在使用 jquery 时遇到了问题，请尝试以下替代解决方案：

1.  简单的javascript：

    ```
     <asp:Button ID="Button1" runat="server" Text="Delete User" OnClientClick="return  confirm('Are you sure you want to delete this user?');" /> 
    ```

2.  Ajax 确认按钮扩展器：

    ```
    <ajaxToolkit:ConfirmButtonExtender ID="cbe" runat="server"
    TargetControlID="Button1"
    ConfirmText="Are you sure you want to click this?"
    OnClientCancel="CancelClick" /> 
    ```

# google-maps - 谷歌地图 API 导致页面速度命中

> ID：10425874
> 
> 赞同：12
> 
> 时间：2012-05-03T05:56:15.987
> 
> 标签：google-maps, google-maps-api-3

我一直在努力优化我的[页面速度](https://developers.google.com/speed/pagespeed/insights)分数，我发现加载谷歌地图似乎会受到 5 分左右的惩罚。它抱怨了很多事情，但导致黄点的原因是大多数加载的资源中缺少缓存验证器。

为了排除我可能做的任何事情，我针对最简单的地图运行 Page Speed - Google Maps 文档中的 Hello World。果然，它得到了我在我的网站上得到的相同警告。对此运行 Page Speed 以查看警告。

[https://google-developers.appspot.com/maps/documentation/javascript/examples/map-simple](https://google-developers.appspot.com/maps/documentation/javascript/examples/map-simple)

这些警告可以修复吗？或者，一般来说，任何带有 Google 地图的页面都有可能获得高于 95 Page Speed 的分数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-25T09:58:46.973

我在这张简单地图上的最好成绩是 81/95（移动/桌面）。

以下示例给出 81/94。

```
<!DOCTYPE html>
<html>
  <head>
    <title>Simple Map</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <style>
      html, body, #map-canvas {
        height: 100%;
        margin: 0px;
        padding: 0px;
      }
    </style>
  </head>
  <body>
    <div id="map-canvas"></div>
    <script>
      var map;
      function initialize() {
        var mapOptions = { zoom: 8, center: new google.maps.LatLng(-34.397, 150.644) };
        map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);
      }

      function loadScript() {
        var script = document.createElement('script');
        script.type = 'text/javascript';
        script.src = 'https://maps.googleapis.com/maps/api/js?v=3.exp&callback=initialize';
        document.body.appendChild(script);
      }

      window.onload = loadScript;
    </script>
  </body>
</html> 
```

通过代理加载谷歌地图库，我能够在桌面得分上获得 +1 分。

# java - 使用 Xpath 在文档中查找节点

> ID：10425875
> 
> 赞同：1
> 
> 时间：2012-05-03T05:56:19.847
> 
> 标签：java, dom, xpath

我有一个由解析器解析的`Node theFinalNode`来自一个，我有另一个来自完全相同页面的文档，它以不同的方式解析，我想使用 找到另一个文档中的节点，所以我尝试制作这个代码：`Document``sax2dom``Xpath`

```
 private Node node;
 Node theFinalNode;
............

Document document = builder.parse(someURL);
 XPath xpath = XPathFactory.newInstance().newXPath();
 node =  xpath.evaluate(document,theFinalNode, XPathConstants.NODE); 
```

但似乎没有适合我上面提到的方式的构造函数。有什么解决办法吗？

# 错误

```
Exception in thread "main" java.lang.RuntimeException: Uncompilable source code - Erroneous sym type: javax.xml.xpath.XPath.evaluate 
```

# 编辑：

```
i changed last line into:`     node =  (Node) xpath.evaluate("//" + theFinalNode.getNodeName(),document, XPathConstants.NODE); 
```

现在错误是：

```
Caused by: javax.xml.transform.TransformerException: A location step was expected following the '/' or '//' token. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T07:44:07.397

您在[XPath.evaluate()中使用的参数存在问题](http://docs.oracle.com/javase/6/docs/api/javax/xml/xpath/XPath.html#evaluate%28java.lang.String,%20java.lang.Object,%20javax.xml.namespace.QName%29)

第一个参数必须是 xpath 表达式（字符串），第二个是上下文，最后一个是返回类型。因此，您可以将 xpath 表达式作为第一个参数来检测您的节点（即。`"//" + theFinalNode.getNodeName()`），并将您要在其中搜索节点的 Document 作为第二个参数。

# c# - EntityFramework 和 aspnetdb

> ID：10425876
> 
> 赞同：2
> 
> 时间：2012-05-03T05:56:29.140
> 
> 标签：c#, entity-framework, asp.net-membership, relational-database

我正在尝试将实体框架与默认成员资格“aspnetdb”数据库一起使用。

我在使用会员和用户表时遇到了问题，因为我想拥有从会员到用户的导航属性。

我觉得我已经尝试了流利的 api 映射的每一种组合，但我必须遗漏一些东西 - 或者当外键是 UserId 时它可能无法完成 - 这也是两个表的主键？

这是我所拥有的：

```
public class Membership {
        [Key]
        public Guid UserID { get; set; }
        public String Password { get; set; }

        public virtual User User { get; set; }
    }

public class User {
        [Key]
        public Guid UserId { get; set; }
        public String UserName { get; set; }

        //public virtual Membership Membership { get; set; }
        public virtual ICollection<Role> Roles { get; set; }
    }

protected override void OnModelCreating(DbModelBuilder modelBuilder) {
            modelBuilder.Entity<Membership>().ToTable("dbo.aspnet_Membership");
            modelBuilder.Entity<Role>().ToTable("dbo.aspnet_Roles");
            modelBuilder.Entity<User>().ToTable("dbo.aspnet_Users");
            modelBuilder.Entity<User>()
                            .HasMany(m => m.Roles)
                            .WithMany(m => m.Users)
                            .Map(m => {
                                m.ToTable("aspnet_UsersInRoles");
                                m.MapLeftKey("UserId");
                                m.MapRightKey("RoleId");
                            });
            //modelBuilder.Entity<Membership>()
            //    .HasRequired(m => m.User);
                //.WithOptionalPrincipal(m => m.Membership).Map(m=>m.MapKey("UserId"));
            Database.SetInitializer<EkomiteDBC>(null);
            base.OnModelCreating(modelBuilder);
        } 
```

这些角色设置得很好，并且可以正常工作，但是无论我如何尝试定义成员资格和用户之间的连接，我都会遇到不同的映射错误。

我知道我可能缺少一些基本的东西，有人可以帮忙吗？

编辑：问题似乎是“会员”和“用户”表都有主键“用户ID”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T07:59:55.910

试试这个：

```
modelBuilder.Entity<Membership>()
            .HasRequired(m => m.User)
            .WithOptional(u => u.Membership); 
```

无论如何，您根本不应该这样做。使用标准成员 API 访问这些表。这些表不是您的，它们属于成员资格/角色 API，通过 EF 处理它们只会删除或破坏 API 提供的开箱即用的功能 - 通常它会降低安全性，因为这些表将可用于在 EF 和业务规则中更新来自 Membership / Role API 将不会被强制执行。

# json - 在 HTML 版本的 PlayN 中，为什么下面的 JSON 处理代码会抛出异常？

> ID：10425877
> 
> 赞同：0
> 
> 时间：2012-05-03T05:56:39.500
> 
> 标签：json, playn

我试图弄清楚这是否是[HtmlJson.java](http://code.google.com/p/playn/source/browse/html/src/playn/html/HtmlJson.java?name=playn-1.2#356)或我的实现中的错误。我刚刚升级到 PlayN 1.2 版。我的代码尝试将 a 加载`Json.Object`到`Json.Writer`. 这适用于 Java 版本。

这是下面的代码。异常由行引发`jsonWriter.object(jsonData);`（注意代码中的注释）：

```
private void loadStoredData() {
    // storage parameters
    String storageKey = "jsonData";
    Json.Object jsonData = PlayN.json().createObject();        

    // attempt to load stored data
    String jsonString = PlayN.storage().getItem(storageKey);

    // if not loaded, create stored data
    if ( jsonString == null ) {
        DemoApi.log("stored data not found");
        jsonData.put("firstWrite", new Date().toString());

    // else display data
    } else {
        jsonData = PlayN.json().parse(jsonString);
        DemoApi.log("stored data loaded");
        DemoApi.log("data first written at " + jsonData.getString("firstWrite"));
        DemoApi.log("data last read at " + jsonData.getString("lastRead"));
        DemoApi.log("data last written at " + jsonData.getString("lastWrite"));
    }

    // update last read
    jsonData.put("lastRead", new Date().toString());

    // write data
    Json.Writer jsonWriter = PlayN.json().newWriter();
    jsonWriter.object(jsonData);        // <--- EXCEPTION RAISED HERE
    jsonString = jsonWriter.write();

    // store data as json
    PlayN.storage().setItem(storageKey, jsonString);

    // confirm
    if ( PlayN.storage().isPersisted() ) {
        DemoApi.log("data successfully persisted");
    } else {
        DemoApi.log("failed to persist data");
    }
} 
```

例外：

```
ERROR: Uncaught Exception: 
java.lang.ClassCastException: com.google.gwt.core.client.JavaScriptObject$ cannot be cast to java.lang.String
    at playn.html.HtmlJson$HtmlObject$.write$(HtmlJson.java:356)
    at com.google.gwt.core.client.JavaScriptObject$.playn_core_Json$Object_write(JavaScriptObject.java)
    at playn.core.json.JsonWriterBase.object(JsonWriterBase.java:119)
    at playn.core.json.JsonWriterBase.object(JsonWriterBase.java:90)
    at klenwell.sandbox.core.controllers.SandboxController.loadStoredData(SandboxController.java:121) 
```

如果这是我的代码中的错误，我该如何纠正它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T05:26:52.750

我找到了一个替代方案。不像原始代码那么优雅，但它在 HTML5 中测试成功：

```
private void loadStoredData() {
    // storage parameters
    String storageKey = "jsonData";
    Json.Object jsonData = PlayN.json().createObject();  

    // to reset storage, uncomment this line
    //PlayN.storage().removeItem(storageKey);

    // attempt to load stored data
    String jsonString = PlayN.storage().getItem(storageKey);

    // if not loaded, create stored data
    if ( jsonString == null ) {
        DemoApi.log("stored data not found");
        jsonData.put("firstWrite", new Date().toString());

    // else display data
    } else {
        jsonData = PlayN.json().parse(jsonString);
        DemoApi.log("stored data loaded");
        DemoApi.log("data first written at " + jsonData.getString("firstWrite"));
        DemoApi.log("data last read at " + jsonData.getString("lastRead"));
        DemoApi.log("data last written at " + jsonData.getString("lastWrite"));
    }

    // update last read
    jsonData.put("lastRead", new Date().toString());

    // write data (this works in Java -- not in HTML)
    // see http://stackoverflow.com/q/10425877/1093087
    /*
    Json.Writer jsonWriter = PlayN.json().newWriter();
    jsonWriter.object(jsonData).end();
    jsonString = jsonWriter.write();
    */

    // alternative write routine
    Json.Writer jsonWriter = PlayN.json().newWriter();
    jsonWriter.object();
    for ( String key : jsonData.keys() ) {
        jsonWriter.value(key, jsonData.getString(key));
    }
    jsonWriter.end();
    jsonString = jsonWriter.write();

    // store data as json
    PlayN.storage().setItem(storageKey, jsonString);

    // confirm
    if ( PlayN.storage().isPersisted() ) {
        DemoApi.log("data successfully persisted");
    } else {
        DemoApi.log("failed to persist data");
    }
} 
```

`DemoApi.log`，作为记录，是我在浏览器中进行测试时将输出记录到屏幕上的一种方法。后来我发现该`PlayN.log()`服务可以正常记录到 Chrome 控制台。

# c++ - Windows 7 64 位操作系统上 GetOpenFileName() 的无法解释的行为

> ID：10425881
> 
> 赞同：1
> 
> 时间：2012-05-03T05:56:57.247
> 
> 标签：c++, winapi

我真的很难理解为什么以下函数会在下一个要处理的命令时阻塞我的整个 IEXPLORER 进程。我几乎可以肯定这与 hwndOwner 变量有关。在我对 ntdll.dll 的调用堆栈进行挖掘时。我注意到这两行：

```
ntdll.dll!_ZwWaitForMultipleObjects@20()  + 0x15 bytes  
ntdll.dll!_ZwWaitForMultipleObjects@20()  + 0x15 bytes 
```

我的一个“受过教育”的猜测是可能已经出现了死锁，但我没有工具和知识来理解究竟是什么/谁导致了它。
正如主题所说，在基于 32 位 win7 的 OS 上，这不会发生。我在我的代码中找不到任何实际锁定特定 hwnd 并且可能导致死锁或预锁的行。

```
EXPORTFILENAME ofn;
        ZeroMemory(&ofn, sizeof(ofn));
        ofn.hwndOwner       = m_hWnd;
        ofn.lStructSize     = sizeof(OPENFILENAME);
        ofn.Flags           = OFN_OVERWRITEPROMPT | OFN_ENABLESIZING | OFN_EXPLORER | OFN_NOREADONLYRETURN | ((DVDBURN == (eType & DVDBURN)) ? (/*OFN_OVERWRITEPROMPT |*/ /*OFN_ENABLEINCLUDENOTIFY |*/ OFN_PATHMUSTEXIST | OFN_ENABLETEMPLATE | OFN_ENABLEHOOK) : 0);
        ofn.nFilterIndex    = 1;
        ofn.lpstrTitle      = Title;
        ofn.lpstrFilter     = szFilter;
        ofn.lpstrFile       = szResult; 
        ofn.nMaxFile        = MAX_PATH;
        ofn.lpstrDefExt     = szFilter + wcslen(szFilter) + 1; // UGH..
        if(DVDBURN == (eType & DVDBURN)) {
            ofn.lpfnHook        = DVDSelectorProc;
            ofn.lpTemplateName  = MAKEINTRESOURCE(IDD_DLG_EXPORTER_BURNNER);
            ofn.hInstance       = (HINSTANCE)&__ImageBase;
        }
        ofn.pExporter       = this;

        if(0 == (eType & OPENFILE)) {
            if( ::GetSaveFileName(&ofn))
                VerifyTargetFileName(szResult, szResultOut);
            else {
                SetLastError(CommDlgExtendedError());
                goto GracefulExit;
            }
        } else {
            ATLTRACE("GFX ThreadId = %u\r\n", GetCurrentThreadId());
            if( ::GetOpenFileName(&ofn))
                VerifyTargetFileName(szResult, szResultOut);
            else {
                SetLastError(CommDlgExtendedError());
                goto GracefulExit;
            }
        } 
```

当导出文件名 =

```
 struct EXPORTFILENAME : OPENFILENAME {
        CVMNExporter*   pExporter;
        WCHAR           szResultBurningDrive[128];
    }; 
```

* * *

### 编辑：

我还尝试通过插入 0/NULL 来丢弃所有者 HWND。那也没用..

# kiosk - 一台 PC 上的多台显示器用于 KIOSK 系统

> ID：10425882
> 
> 赞同：3
> 
> 时间：2012-05-03T05:57:10.797
> 
> 标签：kiosk, multiple-monitors

我正在使用 PHP、HTML5 和 Javascript 开发一个 KIOSK 系统。我想在一台 PC 上连接多个（触摸屏）显示器。我希望这些监视器以全屏模式显示浏览器，用户只能访问“我的网站”而无需任何其他控件。他们不会有鼠标或键盘。他们不应该能够最小化浏览器。有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T06:48:32.490

就在这里。但是，您的帖子中有很多问题，我不能全部回答，也不能详细回答。但我可以帮你解决你的问题：

Linux，或者更确切地说 Xorg 支持“Multiseat”，它允许您同时拥有多个活动终端。您需要编写 xorg.conf 文件，以便为您要连接的每个触摸屏配置一个配置。那里应该有很多多座位的示例配置。痛苦将是确定每个设备的唯一标识符。我会从这里开始阅读：[http ://www.x.org/wiki/Development/Documentation/Multiseat](http://www.x.org/wiki/Development/Documentation/Multiseat)

对于没有任何控件的全屏不可最小化浏览器的多个实例，您必须做一些事情。

1.  最小化、最大化、调整大小和所有好的爵士乐都与程序（浏览器）本身无关，而是与窗口管理器有关。您的问题是，大多数窗口管理器都是为*支持*移动和调整大小而开发的，因此您需要一个可定制的。如果您了解 Python，我想向您介绍 pyWM [http://pywm.sourceforge.net/](http://pywm.sourceforge.net/)，您可以使用它来实现全屏和不可最小化的窗口。

2.  您需要一个可自定义的浏览器，允许您一次拥有多个实例并删除控件。Firefox 可以使用其配置文件机制来实现这两者。您基本上要做的是启动 Firefox 并按照您想要的方式对其进行自定义。然后，您创建该配置文件的多个副本，并明确告诉每个终端使用自己的配置文件。（这很像 xorg 问题。）

3.  要将浏览器/Firefox 限制在您的站点上，您有多种选择。一个不错的选择是检查浏览器是否具有该功能。如果没有，您可以强制浏览器使用代理服务器，这可以对用户施加限制。可以做什么以及最有意义的事情在很大程度上取决于您的确切设置。

如果你有你的互联网限制，你的浏览器配置文件设置，你的自定义窗口管理器准备好并且你的 Xorg 配置已经弄清楚，你可以使用 init 把所有东西放在一起。

# javascript - jQuery Tablesorter - 不对日期字段进行排序

> ID：10425888
> 
> 赞同：1
> 
> 时间：2012-05-03T05:57:34.580
> 
> 标签：javascript, jquery, tablesorter

我正在使用 jQuery 表格排序器对表格进行排序。它对除具有日期字段的列之外的所有列进行排序。日期具有`Sep 3, 2012` 这种格式。如何解决这个问题呢？

样品日期：

*   2012 年 9 月 3 日
*   2012 年 8 月 9 日
*   2012 年 6 月 25 日

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T16:52:12.423

我有一个 tablesorter 的分支，它允许您编写一个解析器，可以从表格单元格属性中提取数据，例如`data-attribute`.

在[这个例子](http://mottie.github.com/tablesorter/docs/example-parsers-advanced.html)中，我有一个不同格式的生日列，但`data-date`单元格的属性是一致的。

```
<table> 
<thead> 
  <tr> 
    <th>Name (Last)</th> 
    <th>Originally from...</th> 
    <th>Birthday</th> 
  </tr> 
</thead> 
  <tbody> 
    <tr> 
      <td data-lastname="Allen">Joe Allen</td> 
      <td>South Carolina</td> 
      <td data-date="01-15">Jan 15</td> 
    </tr> 
    <tr> 
      <td data-lastname="Torres">Lisa Torres</td> 
      <td>Maryland</td> 
      <td data-date="03-02">March 2nd</td> <!-- leading zeros needed to sort properly! --> 
    </tr> 
    <tr> 
      <td data-lastname="Franklin">Peter Louis Franklin</td> 
      <td>Coventry</td> 
      <td data-date="12-26">Boxing Day (Dec 26th)</td> 
    </tr> 
    <tr> 
      <td data-lastname="Jones">Maria Consuela de Los Angeles Ortiz Del Toro-Jones</td> 
      <td>Texas</td> 
      <td data-date="05-10">10 Mayo</td> 
    </tr> 
    <tr> 
      <td data-lastname="Bigglesworth">Mike "the Smasher" Bigglesworth</td> 
      <td>Rhode Island</td> 
      <td data-date="06-22">22nd of June</td> 
    </tr> 
    <tr> 
      <td data-lastname="Smith">Fredrick Smith</td> 
      <td>Ohio</td> 
      <td data-date="03-10">10th Mar</td> 
    </tr> 
  </tbody> 
</table> 
```

**解析器**- 请注意，此解析器代码仅适用[于此修改版本的 tablesorter](http://mottie.github.com/tablesorter/docs/)

```
// add parser through the tablesorter addParser method 
$(function(){ 

  $.tablesorter.addParser({ 
    // set a unique id 
    id: 'data', 
    is: function(s) { 
      // return false so this parser is not auto detected 
      return false; 
    }, 
    format: function(s, table, cell, cellIndex) { 
      var $cell = $(cell); 
      // I could have used $(cell).data(), then we get back an object which contains both 
      // data-lastname & data-date; but I wanted to make this demo a bit more straight-forward 
      // and easier to understand. 

      // first column (zero-based index) has lastname data attribute 
      if (cellIndex === 0) { 
        // returns lastname data-attribute, or cell text (s) if it doesn't exist 
        return $cell.attr('data-lastname') || s; 

      // third column has date data attribute 
      } else if (cellIndex === 2) { 
        // return "mm-dd" that way we don't need to use "new Date()" to process it 
        return $cell.attr('data-date') || s; 
      } 

      // return cell text, just in case 
      return s; 
    }, 
    // set type, either numeric or text 
    type: 'text' 
  }); 

  $('table').tablesorter({ 
    headers : { 
      0 : { sorter: 'data' }, 
      2 : { sorter: 'data' } 
    }, 
    widgets: ['zebra'] 
  }); 

}); 
```

# iphone - 如何使用 FBConnect 从 facebook 获取信息

> ID：10425889
> 
> 赞同：0
> 
> 时间：2012-05-03T05:57:38.480
> 
> 标签：iphone, fbconnect

我想从 facebook 获取用户信息。我为此使用 FBConnect APi。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T06:05:41.393

您应该将其用于 FBConnect，这对您有用。

```
 - (void)request:(FBRequest*)request didLoad:(id)result {
    if ([request.method isEqualToString:@"facebook.fql.query"]) {
    NSArray* users = result;
    NSDictionary* user = [users objectAtIndex:0];
    NSString* name = [user objectForKey:@"name"];
    self.username = name;       

    if (self.post) {
        [self postToWall];
        self.post = NO;
      }
     }
     }

 - (void)postToWall 
 {
    FBStreamDialog *dialog = [[[FBStreamDialog alloc] init] autorelease];
    dialog.userMessagePrompt = @"Enter your message:";
    dialog.attachment = [NSString stringWithFormat:@"{\"name\":\"Facebook Connect for iPhone\",\"href\":\"http://developers.facebook.com/connect.php?tab=iphone\",\"caption\":\"Caption\",\"description\":\"Description\",\"media\":[{\"type\":\"image\",\"src\":\"http://img40.yfrog.com/img40/5914/iphoneconnectbtn.jpg\",\"href\":\"http://developers.facebook.com/connect.php?tab=iphone/\"}],\"properties\":{\"another link\":{\"text\":\"Facebook home page\",\"href\":\"http://www.facebook.com\"}}}"];
    [dialog show];
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T06:04:46.027

要从 facebook 获取信息，您必须使用 FBGraph API。希望这个[链接](http://www.capturetheconversation.com/technology/iphone-facebook-oauth-2-0-and-the-graph-api-a-tutorial-part-2)可以帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T06:04:54.957

试试这个希望它会帮助你： -

```
- (void)request:(FBRequest*)request didLoadRawResponse:(NSData*)data
{

    NSString *profileString = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
    NSMutableDictionary *userinfo = [[profileString JSONValue] mutableCopy];//1451571176

    [[NSUserDefaults standardUserDefaults] setObject:userinfo forKey:@"USER_INFO"];
    [[NSUserDefaults standardUserDefaults] synchronize];

    NSLog(@"user info:%@",userinfo);

    userDictionary = [[NSUserDefaults standardUserDefaults] valueForKey:@"USER_INFO"];
    NSString *userIDString = [NSString stringWithFormat:[userDictionary valueForKey:@"id"]];
    NSLog(@"User: %@",userIDString);
} 
```

希望它有所帮助。如果没有，请澄清。谢谢:)

# ruby - 在 Linode 服务器上安装 Ruby

> ID：10425890
> 
> 赞同：0
> 
> 时间：2012-05-03T05:57:43.477
> 
> 标签：ruby, linode

本 linode[指南](http://library.linode.com/frameworks/sinatra/debian-6-squeeze)提供了有关如何在服务器上安装 ruby​​ 的说明。该指南使用与其他依赖项一起安装的 ruby​​ 1.8。如何更改这些命令来设置 ruby​​ 1.9.2？这些依赖项似乎相互关联。

Linode 指南的命令：

安装 Ruby 依赖项

`apt-get install wget build-essential ruby1.8 ruby1.8-dev irb1.8 rdoc1.8 zlib1g-dev libopenssl-ruby1.8 rubygems1.8 libopenssl-ruby libzlib-ruby libssl-dev libpcre3-dev libcurl4-openssl-dev`

创建符号链接

`ln -s /usr/bin/ruby1.8 /usr/bin/ruby`

`ln -s /usr/bin/irb1.8 /usr/bin/irb`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T10:03:40.250

[RVM](https://rvm.io/rvm/install/)是一个非常流行的安装 Ruby 的工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T09:51:35.367

如果你想安装 ruby​​ 1.9.2 或 1.9.3 我建议使用 rbenv (http://github.com/sstephenson/rbenv)

对于在 ubuntu 机器上安装，以下应该可以工作：

```
curl -L https://raw.github.com/fesplugas/rbenv-installer/master/bin/rbenv-installer | bash
vim ~/.bashrc # add rbenv to the top
. ~/.bashrc
rbenv bootstrap-ubuntu-10-04
rbenv install 1.9.(your preffered version here)
rbenv global 1.9.(your preffered version here) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-03T10:25:19.650

大约一周前我做了这个，这是我的播放日志

```
# download rvm script
curl -L get.rvm.io > install-rvm
chmod +x install-rvm
sudo ./install-rvm

# add our user into rvm group
usermod -a -G rvm `whoami`
# log out & in
logout

# IMPORTANT: install dependencies given from command below
rvm requirements 
apt-get $deps-from-rvm
rvm install 1.9.3 #possibly do this with rvmsudo to install it globally 
```

我知道它不会直接帮助您当前的情况，但是在 ruby​​ 世界中确实建议使用 RVM。我会退出您的 apt-get 方法并使用 RVM。无论如何，apt-get 软件包肯定已经过时了。

# html - grails中的多种文件输入类型上传

> ID：10425891
> 
> 赞同：3
> 
> 时间：2012-05-03T05:57:44.487
> 
> 标签：html, grails, file-upload, upload

当我使用“多个”属性时，我无法让它工作：

```
<input type="file" id="files" name="files[]" multiple /> 
```

控制器动作方法体：

```
request.getFileNames().each {
    println it
} 
```

问题是这个迭代只返回一个文件。谁能帮我获取所有上传的文件？（我正在使用 grails 2.0.3）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T20:41:09.007

Grails 2 使用 Spring 3，它使用[MultipartRequest](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/multipart/MultipartRequest.html)类来处理这个问题。

这个类有一个 getFiles(String name) 函数，你可以在你的情况下使用它。所以这将导致以下代码：

```
request.getFiles("files[]").each { file ->
    log.debug(file.originalFilename)
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T15:22:16.990

您必须获取请求的多个文件部分。

我认为你可以做到

```
request.getMultiFileMap() 
```

或者

```
request.multiFileMap.documentFile 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-30T13:22:35.607

我正在使用这个

```
request.multiFileMap.get("files[]") 
```

# c# - 对数组进行排序并替换索引值

> ID：10425895
> 
> 赞同：0
> 
> 时间：2012-05-03T05:57:51.497
> 
> 标签：c#, arrays, windows-phone-7, sorting

我遇到了一个奇怪的情况。有一个数组有从 1 到 20 的数字，另一个数组有所有的随机数。使用 Array.Sort(rand) 我可以对 randnos 数组进行排序。但是如何使用 numbers 数组对这些数字进行排名。

我应该使用排序算法吗？或者有什么可用的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T07:00:56.960

给定一个随机数数组：

```
var rand = new Random();
    // generate an array of 10 random numbers between 1 and 100
var randNumbers = Enumerable.Range(1,10)                  // enumerable 1 to 10
                            .Select(_ => rand.Next(100))  // replace with random num
                            .ToArray();                   // convert to array 
```

这是一种对它们进行排序并提供它们的排名的方法，作为一个字符串`number-rank`：

```
var sorted = randNumbers.OrderBy(x => x)                   // sort by the number
                        .Select((val,idx) =>               // given the value and the index
                                 String.Format("{0}-{1}",  // return value-index as string
                                        val,idx+1))
                        .ToArray();                        // convert to array 
```

打印（例如）：

```
21-1 
30-2 
31-3 
32-4 
40-5 
51-6 
67-7 
70-8 
84-9 
99-10 
```

请注意，您也可以这样做：

```
randNumbers.Sort() // sort in place first
var sorted = ... // same as above without the OrderBy 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T06:24:31.313

这实际上完成了什么？根据您的描述，您正在寻找的“排名”只是排序后的数组索引。根本没有理由涉及第二个阵列。

如果您的“等级”数组包含自然数序列以外的内容，我可以看到这有点有用。如果您有两个需要按相同顺序排序的数组，则有一个重载`Array.Sort()`将提供此功能。请参阅[此](http://msdn.microsoft.com/en-us/library/0h22cx4f.aspx)MSDN 文章以供参考。你需要做的就是打电话`Array.Sort(rand, ranks)`

# post - SOLR 查询长度问题

> ID：10425898
> 
> 赞同：0
> 
> 时间：2012-05-03T05:58:08.517
> 
> 标签：post, curl, solr

我必须运行一个长的 solr 查询。但是当我尝试它不会提供任何输出，只有空白页。他们在 solr 中是否有任何查询长度限制/配置？我使用的是 apache 服务器，没有配置限制。

如果我减少查询长度它将起作用。

我也在使用 Curl 进行连接。请帮我解决问题。

我正在使用的卷曲

```
public static function getDataThroughCurl($url,$ch)
{ 
    if (!function_exists('curl_init')){
        throw new CHttpException(404,'Sorry cURL is not installed'); 
    } 
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_USERPWD, 'f48be786f212f1e35dd965b4675358123d838e53:X');
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-type: application/json'));
    curl_setopt($ch, CURLOPT_POSTFIELDS, '');
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    //curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
    $output = curl_exec($ch);
    echo curl_error($ch);
    return $output;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T15:43:52.033

您是否尝试过使用 GET？POST 是搜索查询的错误语义。我不确定 Solr 是否通常配置为回答 POST。

另外，cURL 返回什么错误代码？

我对您为什么要发送用户名和密码也有些困惑。我从未见过 Solr 配置为需要登录。

调试这类事情的最佳方法是编写查询 URL，然后从浏览器访问 Solr。毕竟它是一个 HTTP 服务器。这使得更容易看到发生了什么。

# python - 用多个分隔符分割字符串？

> ID：10425900
> 
> 赞同：4
> 
> 时间：2012-05-03T05:58:23.103
> 
> 标签：python

> **可能重复：**
> [Python：使用多个分隔符拆分字符串](https://stackoverflow.com/questions/4998629/python-split-string-with-multiple-delimiters)

我可以在 Python 中做类似的事情吗？

VB.net 中的拆分方法：

```
Dim line As String = "Tech ID: xxxxxxxxxx Name: DOE, JOHN Account #: xxxxxxxx"
Dim separators() As String = {"Tech ID:", "Name:", "Account #:"}
Dim result() As String
result = line.Split(separators, StringSplitOptions.RemoveEmptyEntries) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T06:03:50.747

鉴于这样的错误数据格式，您可以尝试`re.split()`：

```
>>> import re
>>> mystring = "Field 1: Data 1 Field 2: Data 2 Field 3: Data 3"
>>> a = re.split(r"(Field 1:|Field 2:|Field 3:)",mystring)
['', 'Field 1:', ' Data 1 ', 'Field 2:', ' Data 2 ', 'Field 3:', ' Data 3'] 
```

如果数据格式合理，带有引号字符串和逗号分隔的记录，您的工作会容易得多。这将允许使用该`csv`模块来解析逗号分隔的值文件。

编辑：

您可以使用列表理解过滤掉空白条目。

```
>>> a_non_empty = [s for s in a if s]
>>> a_non_empty
['Field 1:', ' Data 1 ', 'Field 2:', ' Data 2 ', 'Field 3:', ' Data 3'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T06:05:10.417

```
>>> import re
>>> str = "Tech ID: xxxxxxxxxx Name: DOE, JOHN Account #: xxxxxxxx"
>>> re.split("Tech ID:|Name:|Account #:",str)
['', ' xxxxxxxxxx ', ' DOE, JOHN ', ' xxxxxxxx'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T06:32:59.480

我会建议一种不同的方法：

```
>>> import re
>>> subject = "Tech ID: xxxxxxxxxx Name: DOE, JOHN Account #: xxxxxxxx"
>>> regex = re.compile(r"(Tech ID|Name|Account #):\s*(.*?)\s*(?=Tech ID:|Name:|Account #:|$)")
>>> dict(regex.findall(subject))
{'Tech ID': 'xxxxxxxxxx', 'Name': 'DOE, JOHN', 'Account #': 'xxxxxxxx'} 
```

这样，您就可以获得此类数据的有用数据结构：字典。

作为评论的正则表达式：

```
regex = re.compile(
    r"""(?x)                         # Verbose regex:
    (Tech\ ID|Name|Account\ \#)      # Match identifier
    :                                # Match a colon
    \s*                              # Match optional whitespace
    (.*?)                            # Match any number of characters, as few as possible
    \s*                              # Match optional whitespace
    (?=                              # Assert that the following can be matched:
     Tech\ ID:|Name:|Account\ \#:    # The next identifier
     |$                              # or the end of the string
    )                                # End of lookahead assertion""") 
```

# c# - .Net 中检查给定字符串是否为有效 SQL 语句的任何类？

> ID：10425904
> 
> 赞同：1
> 
> 时间：2012-05-03T05:58:55.947
> 
> 标签：c#, .net, sql

我有一个 SelectSQLQueryBuilder，其中有一个只读文本框。用户输入数据并生成字符串！我必须检查这个字符串是否是 SQL 语句。

在 SQL SERVER MGMT STUDIO 中，执行旁边有一个按钮，无需触发语句即可执行此操作。.NET 中的任何类都可以这样做吗？我怎样才能验证这个字符串！请帮忙！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T06:07:33.973

如果您像这样将语句发送到 SQLServer

```
set PARSEONLY ON
your statement 
```

服务器将解析您的语句但不执行它并返回任何错误。如果它通过了，你就会知道这是一个有效的声明。

您将不知道它是否会真正运行，因为 PARSEONLY 未检测到某些类型的错误。例如，您的 SQL 有效但会导致非法操作（如数据转换或违反约束）的错误。

因此，虽然 .Net 中可能没有类，但您可以通过将 set 命令添加到您的 sql 来使 parseonly 发生。我相信这是 SQL Management Studio 使用的功能。您可能会注意到 SQL Mgt. Studio 无法解析语句，除非它具有服务器连接。

PARSEONLY 是连接级别设置。所以如果你打开它，如果你真的想在那个连接上执行 SQL，你需要再次关闭它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T06:08:51.617

对于 Transact-SQL，您可以考虑使用[TSql100Parser Class](http://msdn.microsoft.com/en-us/library/microsoft.data.schema.scriptdom.sql.tsql100parser.aspx)。

还有一个名为[General SQL Parser](http://www.sqlparser.com/)的产品，它不是免费的，但已经存在了一段时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T06:07:58.143

通常，问题在于解析 SQL 语句。事实证明，由于语言的复杂性以及众多的变化，这相当困难。

存在一个很好的库来处理这些复杂性并解析 SQL- [http:](http://sqlparser.com/) //sqlparser.com/ 。

# delphi - 如何在 Delphi Server 应用程序中获取完整的调用堆栈

> ID：10425906
> 
> 赞同：7
> 
> 时间：2012-05-03T05:59:10.747
> 
> 标签：delphi, debugging, exception-handling, callstack, datasnap

我有一个多层软件，它是两个应用程序（GUI，DataSnap Server）。我的 DataSnap 服务器应用程序有一个错误导致有时会发生 EAccessViolation。这样的：

```
Exception EAccessViolation  in module unidac160.bpl at 00010CB1.
Access Violation at 002B77832 in module unidac160.bpl. Read of  address 0000000C 
```

我想获得完整的调用堆栈并将其记录在文件中。我也使用 eurekalog 但它仅对 gui 应用程序有效。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-03T06:19:32.253

EurekaLog 对所有应用程序都非常有效。只需对其进行配置，以便它将异常记录到文件中并且根本不显示异常对话框。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-03T16:17:33.937

我们[的开源日志记录类](http://blog.synopse.info/post/2011/04/14/Enhanced-logging-in-SynCommons)有一个带有完整调用堆栈的异常拦截器，包括源代码行。

调试信息被高度压缩（比 zip 或任何其他格式更好），可以选择进入 exe。

开源，适用于 Delphi 5 到 XE2。

在其最新版本中（使用[源代码存储库中的版本](http://synopse.info/fossil)- 即当前 1.16），它还能够在库中记录异常（即在 .dll 或 .bpl 中），正如您的请求明确指出的那样。

还有其他功能，例如客户端分析，可以帮助您的客户支持和应用程序增强，来自真实数据（不仅在测试台中）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-03T08:01:07.900

您还可以使用[MadExcept](http://madshi.net/madExceptDescription.htm)为您的应用程序获取堆栈。Here you have a similar question [madExcept, getting top of current stack](https://stackoverflow.com/questions/4625364/madexcept-getting-top-of-current-stack)

此外，与您的问题相关，这也可以帮助您

[在 Delphi Win32 应用程序中显示调用堆栈](https://stackoverflow.com/questions/258727/display-the-call-stack-in-a-delphi-win32-application)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T12:14:47.263

我之前一直在使用[MemCheck](http://v.mahon.free.fr/pro/freeware/memcheck/)来呈现调用堆栈，但我不确定它是否仍然适用于最新的 Delphi 版本。

# ios - StoryBoard 中的自定义表格 ViewController

> ID：10425909
> 
> 赞同：0
> 
> 时间：2012-05-03T05:59:28.130
> 
> 标签：ios, uiviewcontroller, uitableview

我需要创建一个视图，其中屏幕的上半部分有一个图像和与之相关的简短信息，下半部分有一个项目列表（该项目的不同商店的价格）（如表格视图控制器），其中每个表格单元格（商店价格）可以将用户导航到该商品的全屏详细信息页面（商店网页）。

是否可以混合使用普通 ViewController（上半页）和 Table View Controller（下页）。我们如何实现这样的 UI 设计？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T14:38:12.657

我实现了@jrturton 建议的某种原型。

[链接到原型](https://docs.google.com/open?id=0B3FbUXsjem4pcFJkeWpTVzVRdVU)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T06:10:00.163

您有一个 UIViewController 子类，并通过在情节提要中拖放来将表格视图添加到其中。

然后，您需要做一些额外的工作来填补表格视图控制器和普通视图控制器之间的空白 - 声明您符合数据源和委托协议，为表格视图创建一个出口，将出口连接到表格查看表视图的委托和数据源出口并将其连接到您的 VC。

实现三个数据源方法（节数、行数和 cellForRow...），您就完成了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T06:08:57.727

是的。您可以通过界面生成器将 UIImageview 放置在屏幕的上半部分来设计您的视图控制器，剩下的半屏屏幕您可以放置​​ UITableView。只要确保你的基类是 UIViewController，它有 tableView 作为 subviewcontroller 并且它会工作。

# qt4 - 通过移动其他对象来更新特定的 QGraphicsObject

> ID：10425910
> 
> 赞同：0
> 
> 时间：2012-05-03T05:59:29.960
> 
> 标签：qt4, qgraphicsview, qgraphicsitem

我想在 a 中显示一个有限自动机`QGraphicsView`。子类化 `QGraphicsItem`我有一个表示状态的类：`Node`它保存指向`Link`指定状态之间移动的实例的指针。每个链接还保存其起点和终点（指向`Node`实例的指针）。

我希望我的代码通过移动其中一个状态来更新（重绘）链接。我无法找到一种方法来调用`paint()`或以某种方式强制更新链接。

节点实现：

```
Node::Node( QGraphicsItem * parent) :
    QGraphicsObject(parent)
{
    setFlag(ItemIsMovable);
    setFlag(ItemSendsGeometryChanges);
    setCacheMode(DeviceCoordinateCache);
    setZValue(-1);
}

void Node::paint(QPainter *painter, const QStyleOptionGraphicsItem *option, QWidget *widget)
{
    QPen pen(Qt::black);
    if(option->state & QStyle::State_Selected)
    {
        pen.setStyle(Qt::DotLine);
        pen.setWidth(2);
    }
    painter->setPen(pen);
    painter->drawEllipse(-m_size.width()/2,-m_size.height()/2,m_size.width(),m_size.height());
    painter->drawText(boundingRect(),Qt::AlignCenter,m_label);
}

QRectF Node::boundingRect() const
{
    return QRectF(topLeft(),m_size);
}
//...

void Node::addLink(Link* newLink)
{
    links.append(newLink);
}

// protected members
QVariant Node::itemChange(GraphicsItemChange change, const QVariant &value)
{
    switch (change)
    {
    case ItemPositionHasChanged:
        foreach (Link *link, links)
        {
            link->update(); // This has no effect
        }
        break;
    default:
        break;
    };
    return QGraphicsItem::itemChange(change, value);
} 
```

链接实现：

```
Link::Link(QGraphicsItem *parent) :
    QGraphicsObject(parent)
{
    setFlag(ItemIsMovable);
    setFlag(ItemSendsGeometryChanges);
    setCacheMode(DeviceCoordinateCache);
    setZValue(-1);
}

Link::Link(Node *From, Node *To, QGraphicsItem *parent ):
    QGraphicsObject(parent),
    from(From),
    to(To)
{
    setFlag(ItemIsMovable);
    setFlag(ItemSendsGeometryChanges);
    setCacheMode(DeviceCoordinateCache);
    setZValue(-1);
}

void Link::paint(QPainter *painter, const QStyleOptionGraphicsItem *option, QWidget *widget)
{
    m_painter = painter;
    QPen pen(Qt::black);
    if(option->state & QStyle::State_Selected)
    {
        pen.setStyle(Qt::DotLine);
        pen.setWidth(2);
    }
    painter->setPen(pen);
    painter->drawLine(from->pos(),to->pos());
}

QRectF Link::boundingRect() const
{
    return QRectF(from->pos(),to->pos());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:24:24.730

由于您的链接似乎正在连接节点，因此您需要使用 ItemPositionChange 而不是 ItemPositionHasChanged，因为 ItemPositionChange 将在用户移动项目时被调用。

然后您应该更新链接的位置，以便它仍然连接到您的节点并调用它的 update()。

因此，您的问题是 ItemPositionHasChanged 应该是 ItemPositionChange，并且您还想在链接更改时更新节点，而不是在节点更改时更新。

# asp.net-mvc-4 - MVC 4 Web API 文件 POST 错误

> ID：10425914
> 
> 赞同：0
> 
> 时间：2012-05-03T05:59:45.553
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我在 MVC 4 Web-API 接受图像时遇到了一些问题。我正在关注此[https://stackoverflow.com/a/10327789/385595](https://stackoverflow.com/a/10327789/385595)和[http://www.asp.net/web-api/overview/formats-and-model-binding/html-forms-and-multipart-哑剧#multipartmime](http://www.asp.net/web-api/overview/formats-and-model-binding/html-forms-and-multipart-mime#multipartmime)

我收到错误无法将类型'System.Web.HttpRequestBase'隐式转换为'System.Net.Http.HttpRequestMessage'在线：HttpRequestMessage request = this.Request;

有人知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T17:26:19.410

您的控制器是从 System.Web.Mvc.Controller 还是 System.Web.Http.ApiController 派生的？没有看到你的代码，听起来你是从 MVC 控制器派生的。

两个基类都公开了一个 Request 属性，但是对于 MVC 控制器，Request 的类型是 System.Web.HttpRequestBase，而对于 Api 控制器，Request 的类型是 System.Net.Http.HttpRequestMessage。

您描述的异常表明您的控制器是从 System.Web.Mvc.Controller 派生的，而它应该是从 System.Web.Http.ApiController 派生的。

# php - SQL Server 2008 不支持特殊字符

> ID：10425923
> 
> 赞同：0
> 
> 时间：2012-05-03T06:00:26.077
> 
> 标签：php, mysql, sql-server-2008

在 SQL Server 2008 上插入特殊字符时，我面临一个愚蠢但巨大的问题。我曾经在 MySQL 上使用“addslashes”没有错误，但它在 SQL Server 2008 上不起作用。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T08:43:46.400

只需查看[sqlsrv_query()](http://es.php.net/manual/en/function.sqlsrv-query.php)手册页中的示例：

```
<?php
$sql = "INSERT INTO Table_1 (id, data) VALUES (?, ?)";
$params = array(1, "some data");

$stmt = sqlsrv_query( $conn, $sql, $params);
if( $stmt === false ) {
     die( print_r( sqlsrv_errors(), true));
} 
```

SQLSRV 扩展是一个现代库并提供准备好的语句。您根本不需要做任何事情来处理特殊字符。

*注意：`addslashes()`在 MySQL 上也不能正常工作。*

# salesforce - 如何在 Salesforce 中解析 CSV

> ID：10425925
> 
> 赞同：1
> 
> 时间：2012-05-03T06:00:30.177
> 
> 标签：salesforce, apex-code

我有一个 CSV，其中包含需要转到多个 Salesforce 自定义对象的字段。我创建了 APEX 类来处理解析。但是，当我从 VisualForce 页面调用该类时，我会收到以下消息：

```
Collection size 3,511 exceeds maximum size of 1,000. 
```

我的 APEX 课程如下（由关于该主题的 2 篇博客文章拼凑而成）：

```
public class parseCSV{  
public Blob contentFile { get; set; }    
public String nameFile { get; set; }    
public Integer rowCount { get; set; }    
public Integer colCount { get; set; }    
public List<List<String>> getResults() {        
 List<List<String>> parsedCSV = new List<List<String>>();        
 rowCount = 0;        
 colCount = 0;        
 if (contentFile != null){            
 String fileString = contentFile.toString();            
 parsedCSV = parseCSV(fileString, false);            
 rowCount = parsedCSV.size();            
 for (List<String> row : parsedCSV){                
 if (row.size() > colCount){                    
 colCount = row.size();                
}            
}        
}        
return parsedCSV;    
}  
public static List<List<String>> parseCSV(String contents,Boolean skipHeaders) {        
List<List<String>> allFields = new List<List<String>>();    
// replace instances where a double quote begins a field containing a comma    
// in this case you get a double quote followed by a doubled double quote    
// do this for beginning and end of a field    
contents = contents.replaceAll(',"""',',"DBLQT').replaceall('""",','DBLQT",');    
// now replace all remaining double quotes - we do this so that we can reconstruct    
// fields with commas inside assuming they begin and end with a double quote    
contents = contents.replaceAll('""','DBLQT');    
// we are not attempting to handle fields with a newline inside of them    
// so, split on newline to get the spreadsheet rows    
List<String> lines = new List<String>();    
try {        
lines = contents.split('\n');    
} 
catch (System.ListException e) {        
System.debug('Limits exceeded?' + e.getMessage());    
}    
Integer num = 0;    
for(String line : lines) {        
// check for blank CSV lines (only commas)        
if (line.replaceAll(',','').trim().length() == 0) break;
List<String> fields = line.split(',');          
List<String> cleanFields = new List<String>();        
String compositeField;        
Boolean makeCompositeField = false;        
for(String field : fields) {            
if (field.startsWith('"') && field.endsWith('"')) 
{
            cleanFields.add(field.replaceAll('DBLQT','"'));            
} 
else if (field.startsWith('"')) {                
makeCompositeField = true;                
compositeField = field;            
}
else if (field.endsWith('"')) {
compositeField += ',' + field;                
cleanFields.add(compositeField.replaceAll('DBLQT','"'));                
makeCompositeField = false;            
}
else if (makeCompositeField) {                
compositeField +=  ',' + field;            
}
else {
cleanFields.add(field.replaceAll('DBLQT','"'));            
}        
}                
allFields.add(cleanFields);    
}    
if (skipHeaders) allFields.remove(0);    
return allFields;       
}  
} 
```

如何确保上述类将 CSV 中的正确列插入到正确的自定义对象中？

由于某些对象包含对其他对象的查找，我如何确保数据首先加载到查找字段中，然后再加载到子表中？

最后，如何解决上面的错误消息？是否建议使用 VisualForce 页面？

非常感谢您的帮助和指导。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T06:30:01.997

出于兴趣，是否需要来自visualforce页面？您可以只使用 Data Loader 加载 CSV，甚至可以自己使用批量 API 构建解决方案。

如果您确实需要从页面中执行此操作，我建议您不要立即在新行上拆分，而是使用`substring`and`indexOf`一次从输入字符串中拉出一行，并随时处理它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T14:49:32.967

我尝试处理一个 4MB 的 CSV 文件，但 SalesForce 向我返回了“Regext too complex”错误。我相信这个问题与您的问题相似。

我使用批处理顶点和迭代器修复了它。更多信息在[这个链接](http://developer.financialforce.com/customizations/importing-large-csv-files-via-batch-apex/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T22:11:32.967

这个来自 salesforce 的示例不处理您自己有单引号的情况。

例如，

```
",",XXX,YYY 
```

当只有 3 个字段时，这将返回 4 个字段

问题在：

```
if (field.startsWith('"') && field.endsWith('"')) 
```

当您有以下字段时：

```
" 
```

它都以双引号开头和结尾，但这不是测试的目的

将其更改为：

```
if (field.length() > 1 && field.startsWith('"') && field.endsWith('"')) { 
```

它会起作用。

完整的更正示例是：

```
 public class parseCSV{  
public Blob contentFile { get; set; }    
public String nameFile { get; set; }    
public Integer rowCount { get; set; }    
public Integer colCount { get; set; }    
public List<List<String>> getResults() {        
 List<List<String>> parsedCSV = new List<List<String>>();        
 rowCount = 0;        
 colCount = 0;        
 if (contentFile != null){            
 String fileString = contentFile.toString();            
 parsedCSV = parseCSV(fileString, false);            
 rowCount = parsedCSV.size();            
 for (List<String> row : parsedCSV){                
 if (row.size() > colCount){                    
 colCount = row.size();                
}            
}        
}        
return parsedCSV;    
}  
public static List<List<String>> parseCSV(String contents,Boolean skipHeaders) {        
List<List<String>> allFields = new List<List<String>>();    
// replace instances where a double quote begins a field containing a comma    
// in this case you get a double quote followed by a doubled double quote    
// do this for beginning and end of a field    
contents = contents.replaceAll(',"""',',"DBLQT').replaceall('""",','DBLQT",');    
// now replace all remaining double quotes - we do this so that we can reconstruct    
// fields with commas inside assuming they begin and end with a double quote    
contents = contents.replaceAll('""','DBLQT');    
// we are not attempting to handle fields with a newline inside of them    
// so, split on newline to get the spreadsheet rows    
List<String> lines = new List<String>();    
try {        
lines = contents.split('\n');    
} 
catch (System.ListException e) {        
System.debug('Limits exceeded?' + e.getMessage());    
}    
Integer num = 0;    
for(String line : lines) {        
// check for blank CSV lines (only commas)        
if (line.replaceAll(',','').trim().length() == 0) break;
List<String> fields = line.split(',');          
List<String> cleanFields = new List<String>();        
String compositeField;        
Boolean makeCompositeField = false;        
for(String field : fields) {            
if (field.length() > 1 && field.startsWith('"') && field.endsWith('"')) {
{
            cleanFields.add(field.replaceAll('DBLQT','"'));            
} 
else if (field.startsWith('"')) {                
makeCompositeField = true;                
compositeField = field;            
}
else if (field.endsWith('"')) {
compositeField += ',' + field;                
cleanFields.add(compositeField.replaceAll('DBLQT','"'));                
makeCompositeField = false;            
}
else if (makeCompositeField) {                
compositeField +=  ',' + field;            
}
else {
cleanFields.add(field.replaceAll('DBLQT','"'));            
}        
}                
allFields.add(cleanFields);    
}    
if (skipHeaders) allFields.remove(0);    
return allFields;       
}  
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-06T02:01:47.653

当我尝试将转换后的 CSV 数据（超过 1000 条记录）存储到列表中以*显示*在 Visualforce 页面上时，我也收到了该消息。如果您要显示导入的记录（这是一个不错的功能），您需要确保您显示的列表中的元素少于 1000 个。

要将记录插入 Salesforce 对象，请执行以下操作：

我用一个名为“parseCSV”的静态方法定义了一个名为“Util”的类（见下文）：

```
public blob importedCSV {get;set;}

list<list<string>> parsedCSV = Util.parseCSV(importedCSV.toString(),true);
list<Custom_Object__c> cObjsToInsert = new list<Custom_Object__c>();
for(list<string> line:parsedCSV){
    Custom_Object__c c = new Custom_Object__c();
    c.Name=line[0];
    c.String_Field__c=line[2];
    c.Currency_Field__c=decimal.valueof(line[3]);
    if(line.size()>4)
        c.Description__c=line[4];
    cObjsToInsert.add(c);
}
insert cObjsToInsert; 
```

通常，当我处理 CSV 并将数据插入 Salesforce 对象时，我不会遇到大小错误。我制作了导入 CSV 的 Visualforce 页面，以某种奇特的方式处理 CSV，然后将处理后的数据导出回 CSV、Excel 或文本（固定宽度）格式。我将在 Visualforce 页面上加载 CSV 并将数据保存为虚拟记录上的附件。然后，我会将用户引导到另一个 Visualforce 页面，该页面会抓取附件、处理数据并输出为所需的格式。

我不记得我从哪里得到这个代码，但它就像一个魅力。我也为**parseCSV**方法编写了**测试代码。**

 **```
public static list<list<String>> parseCSV(String contents,Boolean skipHeaders) {
    list<list<String>> allFields = new List<List<String>>();

    // replace instances where a double quote begins a field containing a comma
    // in this case you get a double quote followed by a doubled double quote
    // do this for beginning and end of a field
    contents = contents.replaceAll(',"""',',"DBLQT').replaceall('""",','DBLQT",');
    // now replace all remaining double quotes - we do this so that we can reconstruct
    // fields with commas inside assuming they begin and end with a double quote
    contents = contents.replaceAll('""','DBLQT');
    // we are not attempting to handle fields with a newline inside of them
    // so, split on newline to get the spreadsheet rows
    list<String> lines=new list<string>();
    try {
        lines = contents.split('\n');
    } catch (System.ListException e) {
        System.debug('Limits exceeded?  '+e.getMessage());
    }
    integer num=0;
    for(string line :lines) {
        // check for blank CSV lines (only commas)
        if(line.replaceAll(',','').trim().length()==0) 
            break;
        list<String> fields=line.split(',');    
        list<String> cleanFields=new list<String>();
        string compositeField;
        boolean makeCompositeField=false;
        for(string field : fields) {
            if(field.startsWith('"') && field.endsWith('"')) {
                cleanFields.add(field.replaceAll('DBLQT','"').removeStart('"').removeEnd('"'));
            } else if(field.startsWith('"')) {
                makeCompositeField = true;
                compositeField = field;
            } else if(field.endsWith('"')) {
                compositeField += ',' + field;
                cleanFields.add(compositeField.replaceAll('DBLQT','"').removeStart('"').removeEnd('"'));
                makeCompositeField = false;
            } else if(makeCompositeField) {
                compositeField +=  ',' + field;
            } else{
                cleanFields.add(field.replaceAll('DBLQT','"').removeStart('"').removeEnd('"'));
            }
        }  
        allFields.add(cleanFields);
    }
    if(skipHeaders) 
        allFields.remove(0);
    return allFields;       
}//END ParseCSV

@isTest
private static void testParseCSV(){
    string contents='Field1,Field2,Field3\n1,,Smith\n2,Fred,O\'Connor\n3,Destiny,"Awaits, DDS"\n\n';
    list<list<string>> parsedCSV=Util.parseCSV(contents,true);
    //line 1
    system.assertEquals('1',parsedCSV[0][0]);
    system.assertEquals('',parsedCSV[0][1]);
    system.assertEquals('Smith',parsedCSV[0][2]);
    //line 2
    system.assertEquals('2',parsedCSV[1][0]);
    system.assertEquals('Fred',parsedCSV[1][1]);
    system.assertEquals('O\'Connor',parsedCSV[1][2]);
    //line 3
    system.assertEquals('3',parsedCSV[2][0]);
    system.assertEquals('Destiny',parsedCSV[2][1]);
    system.assertEquals('Awaits, DDS',parsedCSV[2][2]);
}//END 
```

我将此代码放在一个名为“Util”的类中。如果您有 blob，请先将其转换为字符串，然后调用该方法。例如

```
blob b=inputBlob;
list<list<string>> parsedCSV = Util.parseCSV(b.toString(),true); 
```**

# iphone - 两个 managedObjectContext 和一个 managedObject

> ID：10425927
> 
> 赞同：1
> 
> 时间：2012-05-03T06:00:50.047
> 
> 标签：iphone, ios, nsmanagedobject, nsmanagedobjectcontext, nsundomanager

我有两个实体 A 和 B。A 与 B 有一对多关系。A 和 B 具有不同的 managedObjectContext contextA 和 contextB。我需要在 contextB 中修改 B 的一些属性后，将托管对象 B 添加到托管对象 A，但这是不可能的，因为它们不在同一个上下文中。那么我如何将 contextB 中的更改传递给 contextA 而不将其保存到persistentStore？附言。如果你想知道为什么我需要两个不同的上下文，你可以在这个链接上运行，[撤消在视图控制器中所做的所有更改](https://stackoverflow.com/questions/10400310/undo-all-changes-made-in-a-view-controller/10405311#comment13445803_10405311)。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-03T07:14:14.297

将托管对象从一个上下文复制到另一个上下文，您可以使用对象的对象 ID，如下例所示。

```
NSManagedObjectID *objectID = [managedObject objectID];

NSManagedObject *copy = [contextB objectWithID:objectID]; 
```

复制后，您可以将对象 B 添加到对象 A。

希望这对您有所帮助。

# xml - 如何使用 xslt 计算页面中的链接数？

> ID：10425929
> 
> 赞同：1
> 
> 时间：2012-05-03T06:01:01.807
> 
> 标签：xml

```
<a>
<b>
<html:p><html:a>link1</html:a><html:a>link2</html:a></html:p></b></a> 
```

如何获得链接的数量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T06:46:55.153

如果你想要所有 html:a 节点，无论它们在哪里（不仅仅是你的例子中的那些）

```
<xsl:template match="/">
    <xsl:value-of select="count(//html:a)"/>
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T06:13:35.717

您可以使用对象节点计算链接。尝试这个 -`<xsl:value-of select="count(/root/*)"/>`

# iphone - 在 iPhone 中滚动 UITableView 的问题.. 向上/向下滚动时数据更改/重新加载

> ID：10425930
> 
> 赞同：1
> 
> 时间：2012-05-03T06:01:12.890
> 
> 标签：iphone, objective-c, uitableview, interface-builder

我已经实现了一个带有自定义单元格的表格视图。

**1.自定义单元格** ![在此处输入图像描述](../Images/8e608f3cdf0d0fa268b304cb5f6eb2e2.png)

自定义单元格具有显示日期的标签和用于设置警报的 UI 开关。

当我们打开 uiswitches 时，我的表格视图看起来像这样， ![在此处输入图像描述](../Images/605735227e5c7b6699e997d6005507b2.png)

**2.表格视图**

***`When user scrolls down the table view the bottom switches are turned off`***

![在此处输入图像描述](../Images/b4e210107bed813c7eace03cd4b12fca.png)

向上滚动时同样的问题。

![在此处输入图像描述](../Images/7f073734ea9371d9ad20120c8a30e0dd.png)

为什么会出现这个问题？以及如何预防？

**索引路径方法中的行单元格**

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Note: I set the cell's Identifier property in Interface Builder to DemoTableViewCell.
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) 
    {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue2 reuseIdentifier:CellIdentifier] autorelease];
    }

    AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];

    //To display custom cell with label and switch
    if(indexPath.row< [appDelegate.alarmsArray count])
    {
        ReminderCell *cell = (ReminderCell *)[tableView dequeueReusableCellWithIdentifier:CellClassName];
        if (!cell)
        {
            NSArray *topLevelItems = [cellLoader instantiateWithOwner:self options:nil];
            cell = [topLevelItems objectAtIndex:0];
        }

        cell.reminderSwitch.tag = indexPath.row;

        NSMutableDictionary *dict = [appDelegate.alarmsArray objectAtIndex:indexPath.row];
        cell.label.text = [dict objectForKey:@"string"];
//=========================================
        cell.reminderSwitch.on = NO;
//=========================================
        return cell;
    }

    //Add + button on the last row of uitableview cell..
    if(indexPath.row == [appDelegate.alarmsArray count])
    {
        UIButton *button = [UIButton buttonWithType:UIButtonTypeContactAdd];
        button.frame = CGRectMake(114, 9.5, 33, 33); 
        [button addTarget:self action:@selector(AddNewRow:) forControlEvents:UIControlEventTouchUpInside]; 
        [cell.contentView addSubview:button ];
        return cell;
    }

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T06:07:48.740

大多数情况下，您不会重复使用单元格，然后每次显示单元格时都会创建开关（以及所有单元格内容）。但要小心，因为尽管您重用了单元格视图，但您需要根据您想要的值设置开关属性。所以你的方法：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *cellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    if (cell == nil)
    {
        /** THIS SHOULD BE REPLACED BY YOUR CONSTRUCTOR FROM NIB FILE **/
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier] autorelease];
    }

    UISwitch *switch = (UISwitch *)[cell viewWithTag:SWITCH_TAG];
    switch.on = *is_on*;

    return cell;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T06:10:34.070

问题出在 cellForRowAtIndexPath: 数据源方法中。请记住，单元格是在表格滚动时创建和重用的，因此每个单元格的逻辑不能对其状态做出任何假设。

您可能（您应该）保留一个包含警报的数组，其中包含时间和一个布尔值以指示它们是否已设置...

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"AlarmCell";  // your cell identifier goes here

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }
    CustomAlarmCell *alarmCell = (CustomAlarmCell *)cell;
    Alarm *alarm = [self.alarmArray objectAtIndex:indexPath.row];

    BOOL alarmIsSet = [alarm.isSet intValue];        // you should have an NSNumber 0 or 1 to indicate the alarm is set
    NSString *alarmTimeString = [alarm timeString];  // assume it has a date formatter and can render alarm time as string

    alarmCell.timeLabel.text = alarmTimeString;  
    alarmCell.isSetSwitch.on = alarmIsSet;

    return (UITableViewCell *)alarmCell;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T06:27:22.820

```
In CustomCell Class Write function like this 

-(void)SetSwitchStatus:(NSInteger )stat
{
    if(stat == 0)
      //Set Switch off
    else
    //Set Switch on
} 

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    StoresCustomCell *cell =(StoresCustomCell *) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) 
    {
        [[NSBundle mainBundle] loadNibNamed:@"StoresCustomCell" owner:self options:nil];
        cell = StoreCell;
    }
    [cell SetSwitchStatus:[StatusArr objectAtIndex:indexPath.row];
}

In ViewdidLoad Function Set 0 elements to all statusArr,,  StatusArr count = TableView rows Count

- (void)tableView:(UITableView *)sender didSelectRowAtIndexPath:(NSIndexPath *)path {

if([[StatusArr objectAtIndex:path.row] isEqualToString:@"0"])
   [StatusArr replaceObjectAtIndex:path.row withObject:@"1"]
else
   [StatusArr replaceObjectAtIndex:path.row withObject:@"0"]
} 
```

# git - 使用 nfs 共享的 Git 实现

> ID：10425933
> 
> 赞同：2
> 
> 时间：2012-05-03T06:01:29.577
> 
> 标签：git, nfs

我正在尝试在我的办公室实施 Git。由于不可能在每台开发人员机器上运行 apache 服务器，因此他们无法在他们的机器上使用克隆。我们有一个 NFS 共享的开发服务器。我计划在这个 NFS 共享上创建 git 存储库和工作树。Git 由单个用户管理，因此不会有任何同时推送。

我的问题是

1.  这是一个好习惯吗？
2.  如何管理用户访问？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T06:08:52.627

在这里重申以确保我理解：一个共享的开发“工作区”，每个人都安装在 NFS 上并使用指向远程 apache 实例的浏览器进行开发，他们处理相同的文件集并针对相同的文件执行 git 命令git 工作副本。如果到目前为止我的理解是正确的，那听起来不是一个好主意。

我建议您在 apache 服务器上为每个开发人员提供自己的工作区域，以及他们自己的 VirtualHost，以便他们可以看到自己的独立文件。现在他们能够独立于其他开发人员工作。每组文件都将是同一存储库的 git 克隆（可能是某个地方的裸存储库）。这为每个开发人员提供了一个更加健全的开发工作流程，并且没有开发人员相互践踏和提交其他代码等的风险。

用户访问，您可以通过允许谁挂载 NFS 共享来控制它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T06:11:20.847

git 在 NFS 上工作，是的，但与本地磁盘相比它非常慢。

让几个开发人员在同一个签出的 repo 上工作是一个麻烦的秘诀。

我会在开发人员推送和拉取的服务器上设置一个“上游”主存储库，然后每个开发人员在他/她自己的工作站上本地克隆主存储库并与之对抗。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T06:58:12.560

您正在违背 git 的目的，即分布式开发。我建议您在拥有“官方”存储库的中央服务器上设置类似[Gitolite的东西。](https://github.com/sitaramc/gitolite "石榴石")开发人员可以从这个存储库中克隆出来并在他们的本地区域工作。然后，他们可以将（经过良好测试的）更改推送到官方存储库。使用 gitolite，您可以拥有细粒度的访问控制和其他几个管理工具。应该设置您的构建和部署过程，以便只有来自官方存储库的更改才能推送到生产中。

# php - 简单的评分系统；获取当前条目的 ID 并发布到表格

> ID：10425934
> 
> 赞同：0
> 
> 时间：2012-05-03T06:01:30.310
> 
> 标签：php, mysql, forms

我有一个显示 mysql 条目数据的页面，具体取决于用户单击的链接（$pagename）。我想知道如何创建一个非常基本的评级系统，它将由一个下拉选项为 1 的表单组成到5，当用户提交这个值时，它会将数据发布到当前页面上条目的相应ID。

```
 <?php
$pagename = $_GET['name'];
$sql = "SELECT * FROM tblCocktail WHERE name = '$pagename' LIMIT 1";
/*$sql = sprintf(%sql, mysql_real_escape_string($pagename));*/
$result = mysql_query($sql);
if(!$result) {
    // error occured
}
$data = mysql_fetch_assoc($result);
echo "<p class=\"paratitle\">".$data["name"]."&nbsp;&nbsp;&nbsp;&nbsp;</p>";
echo "<p class=\"paratitle3\">".$data["howto"]."&nbsp;&nbsp;&nbsp;&nbsp;</p>";
echo "<p class=\"paratitle2\">".$data["ingredient1"]."&nbsp;&nbsp;&nbsp;&nbsp;</p>";
echo "<p class=\"paratitle3\">".$data["quantity1"]."&nbsp;&nbsp;&nbsp;&nbsp;</p>";
echo "<p class=\"paratitle2\">".$data["ingredient2"]."&nbsp;&nbsp;&nbsp;&nbsp;</p>";
echo "<p class=\"paratitle3\">".$data["quantity2"]."&nbsp;&nbsp;&nbsp;&nbsp;</p>";
echo "<p class=\"paratitle2\">".$data["ingredient3"]."&nbsp;&nbsp;&nbsp;&nbsp;</p>";
echo "<p class=\"paratitle3\">".$data["quantity3"]."&nbsp;&nbsp;&nbsp;&nbsp;</p>";
echo "<p class=\"dateadded\">".$data["dateadded"]."&nbsp;&nbsp;&nbsp;&nbsp;</p>";
?>
                        </div>
                    </div>
                    <div id="cont2">
                        <div id="contentwrap">
                    <form method="POST" action="addrating.php" >
           <input type="hidden" name="cocktailID" value="<?=$data["id"]?>">
           <select id="ratinglevel" name="ratinglevel">
              <option></option>
              <option>1</option>
              <option>2</option>
              <option>3</option>
              <option>4</option>
              <option>5</option>
            </select>
            <input type="submit" value="submit" />
            </form> 
```

addrating.php：

```
<?php
mysql_select_db("mwheywood", $con);

//insert cocktail details
$sql="INSERT INTO tblRating (cocktailID, value, counter)
VALUES
('$_POST[id]','$_POST[ratinglevel]','1'";

if (!mysql_query($sql,$con))
  {
  die('Error: you fail at life' . mysql_error());
  }
echo "<p>Thanks for voting</p>"

?> 
```

我想将评分保存到的表通过“cocktailID”链接到上面代码中正在回显的数据。

而“tblRating”的表结构是：ratingID、cocktailID、value、counter..

**因此，我希望将选项值保存到“value”字段中相应的“cocktailID”，并将“1”张贴到 counter 字段。**

- 任何帮助表示赞赏 -matt

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T06:19:21.203

当您发送这样的表格时，只需包含当前 ID

```
 <form method="POST" action="addrating.php" >
           <input type="hidden" name="cocktailID" value="<?=$data["id"]?>">
           <select id="ratinglevel" name="ratinglevel">
              <option></option>
              <option>1</option>
              <option>2</option>
              <option>3</option>
              <option>4</option>
              <option>5</option>
            </select>
            </form> 
```

然后，这将返回 ID 以及表单结果，此时您将拥有可用的鸡尾酒 ID

```
 if (isset($_POST['cocktailID']) && isset($_POST['ratinglevel']))
        $sql = "INSERT INTO tblRating SET cocktailID = ".mysql_real_escape_string($_POST['cocktailID']).", value = ".mysql_real_escape_string($_POST['ratinglevel']).",counter = 1";
        $result = mysql_query($sql);
        if(!$result) {
            // error occured
        }
    } 
```

# python - 俳句中的主题

> ID：10425942
> 
> 赞同：1
> 
> 时间：2012-05-03T06:02:37.017
> 
> 标签：python, multithreading, operating-system, python-multithreading, haiku

我在虚拟机中运行 Haiku 桌面，并编写了一个线程 python 程序。该程序将在每次执行时创建线程。前几次它运行良好，但如果我继续运行它，即使线程完成，它们似乎也不会退出。再次按开始会显示类似 Thread-93 的内容，即使它应该是 Thread-1。Python 没有 stop() 函数或任何东西。在其他操作系统上，这似乎不是问题。如何让线程消失并释放 Haiku 中的这些资源？

# jquery - jQuery on click 更改 DIV 的 css

> ID：10425945
> 
> 赞同：0
> 
> 时间：2012-05-03T06:02:47.233
> 
> 标签：jquery, css, jquery-animate

我创建了 2 个按钮显示和隐藏。和一个`DIV`有内容的。我点击第一个按钮内容时`DIV`应该扩大宽度，它将隐藏第一个按钮，同时第二个按钮将变得可见。

当点击第二个按钮内容`DIV`应该折叠它的宽度并且第二个按钮将隐藏，并且第一个按钮将变得可见。但它不起作用..帮助我。我对jquery了解不多，但我使用了一点。

```
$(document).ready(function(){
    $("#seeall2").hide();

    $("#seeall").bind("click",
    function(){
        $("#speakers").animate({width: 880}, 1500);
        $("#seeall").hide(500);
        $("#seeall2").show(500);
    });

    $("#seeall2").bind("click",
    function(){
        $("#speakers").animate({width: 410}, 1500);
        $("#seeall").show(500);
        $("#seeall2").hide(500);
    });
}); 
```

这是我的 HTML：

```
<div id="speakers">

          <a href="" id="seeall">EXPAND</a>
          <a href="" id="seeall2">COLLAPSE</a>

            <div id="pics-wrap">
 content...
            </div>
</div> 
```

请看这个[http://jsfiddle.net/ajinkyax/mSjbV/](http://jsfiddle.net/ajinkyax/mSjbV/) 它现在工作。解决方案：我从 SCRIPT 标记中删除了多余的空间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T06:09:43.617

工作正常：

```
$(document).ready(function () {

    $("#seeall2").hide();

    $("#seeall").bind("click", function () {
        $("#speakers").animate({
            width: 880
        }, 1500);
        $("#seeall").hide(500);
        $("#seeall2").show(500);
    });

    $("#seeall2").bind("click", function () {
        $("#speakers").animate({
            width: 410
        }, 1500);
        $("#seeall").show(500);
        $("#seeall2").hide(500);
    });
}); 
```

[jsfiddle](http://jsfiddle.net/guSvZ/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T06:18:01.827

完整的工作页面......

```
<html>
<head>
    <title>Index</title>
</head>
<body>

<button id="seeall" value="Show" type="button">
    Show</button>
<button id="seeall2" value="Hide" type="button">
    Hide</button>
<div id="speakers" style="display: none">
    [Your Content]
</div>

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

<script type="text/javascript">
    $(document).ready(function (e) {
        $("#seeall2").hide();
        $("#seeall").bind("click",
                function (e) {
                    $("#speakers").show().animate({ width: 880 }, 1500);
                    $("#seeall").hide(500);
                    $("#seeall2").show(500);
                });
        $("#seeall2").bind("click",
                function (e) {
                    $("#speakers").hide().animate({ width: 410 }, 1500);
                    $("#seeall").show(500);
                    $("#seeall2").hide(500);
                });
    });

</script>

</body>
</html> 
```

享受！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T07:05:46.343

问题是

你正在使用两个`anchor tags`

当你点击一个`anchor tag`。两个都

```
 $("#seeall").bind("click", and   $("#seeal2").bind("click", 
```

事件被触发。

尝试使用两个`buttons`而不是`anchor`

```
<input type="button" id="seeall" value="EXPAND" />
<input type="button" id="seeall2" value="COLLAPSE" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T07:13:23.667

只是尝试添加

```
 e.preventDefault(); 
```

在两个点击事件中

见这里：http: [//jsfiddle.net/mSjbV/2/](http://jsfiddle.net/mSjbV/2/)

# tsql - 与该类别中最新记录的同一类别的其他 Associates 记录续

> ID：10425948
> 
> 赞同：0
> 
> 时间：2012-05-03T06:03:04.170
> 
> 标签：tsql

我想计算属于一个类别的所有记录并获取与最新记录关联的数据

```
CREATE TABLE #TestTable

(

SomeColumn VARCHAR(1)
,data varchar(50)
,CDate datetime
)

GO

INSERT INTO #TestTable VALUES ('A','abdss',getdate())
INSERT INTO #TestTable VALUES ('A','abserts',getdate())
INSERT INTO #TestTable VALUES ('A','awabs',getdate())
INSERT INTO #TestTable VALUES ('A','abrfgts',getdate())
INSERT INTO #TestTable VALUES ('A','abasds',getdate())
INSERT INTO #TestTable VALUES ('A','abasds',getdate())
INSERT INTO #TestTable VALUES ('A','aberzsdsfs',getdate())
INSERT INTO #TestTable VALUES ('A','abarfzdfs',getdate())
INSERT INTO #TestTable VALUES ('B','abzdsfs',getdate())

--SELECT * , COUNT(SomeColumn) From #TestTable
--GROUP BY SomeColumn 

drop table  #TestTable 
```

所需的输出将是

```
SomeColumn | Data          | Date              |Other Associates Records <br/>
A          | abarfzdfs     |last A record date   |7<br/>
B          | abzdsfs       |last B record date   |0<br/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T06:18:52.300

您尚未指定您使用的 sql server 版本。但是，如果您使用的是 sql-server 2005+。可能是这样的：

```
;WITH CTE
AS
(
    SELECT
        ROW_NUMBER() OVER(PARTITION BY SomeColumn ORDER BY CDate) AS RowNbr,
        COUNT(SomeColumn) OVER(PARTITION BY SomeColumn) AS Counts,
        test.*
    FROM
        #TestTable AS test
)
SELECT
    *
FROM
    CTE
WHERE
    CTE.RowNbr=1 
```

# c - 如何使用scanf读取以空格分隔的数字

> ID：10425953
> 
> 赞同：31
> 
> 时间：2012-05-03T06:03:40.800
> 
> 标签：c, input, file-io, scanf

我想使用`scanf()`函数读取由空格分隔的数字（整数类型）。我已阅读以下内容：

*   [C，从单个输入行读取多个数字（scanf？）](https://stackoverflow.com/questions/2539796/c-reading-multiple-numbers-from-single-input-line-scanf)
*   [如何读取带有空格的scanf](https://stackoverflow.com/questions/2718819/how-to-read-scanf-with-spaces)

它对我没有多大帮助。

如何读取以空格为分隔符的数字。例如，我现在有以下数字作为输入`2 5 7 4 3 8 18`，我想将它们存储在不同的变量中。请帮忙。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-05-03T06:13:34.780

我认为默认情况下 scanf 使用空格/输入读取的值。如果你打印整数，你可以在 '%d' 之间提供空格。其他情况也一样。

```
scanf("%d %d %d", &var1, &var2, &var3); 
```

同样，如果您想读取逗号分隔值，请使用：

```
scanf("%d,%d,%d", &var1, &var2, &var3); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-07T21:20:28.550

`scanf`使用任何空格作为分隔符，所以如果你只是说它`scanf("%d", &var)`会跳过任何空格然后读取一个整数（直到下一个非数字的数字），仅此而已。

请注意，空格是任何空格——空格、制表符、换行符或回车符。其中任何一个都是空格，其中任何一个或多个将用于分隔连续的整数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-31T02:14:33.767

```
int main()
{
char string[200];
int g,a,i,G[20],A[20],met;

gets(string);
g=convert_input(G,string);

for(i=0;i<=g;i++)
    printf("\n%d>>%d",i,G[i]);
return 0;
}

int convert_input(int K[],char string[200])
{
int j=0,i=0,temp=0;
while(string[i]!='\0')
{
    temp=0;
    while(string[i]!=' ' && string[i]!='\0')
        temp=temp*10 + (string[i++]-'0') ;
    if(string[i]==' ')
        i++;
    K[j++]=temp;
}
return j-1;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-03T06:07:47.260

它应该像使用接收变量列表一样简单：

`scanf("%i %i %i", &var1, &var2, &var3);`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-16T11:05:16.313

使用此解决方案，可以读取正整数和负整数：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define BUFFER_SIZE 50

int convert_input (int * v, char * buffer) {
    int len = 0, i = 0, temp = 0, positive_or_negative_one = 1;
    while(buffer[i]!='\0') {
        temp = 0;

        if (buffer[i] == '-'){
            positive_or_negative_one = -1;
            i++;
        } else {
            while(buffer[i] != ' ' && buffer[i] != '\0')
                temp = temp*10 + (buffer[i++]-'0');

            if(buffer[i]==' ')
                i++;
            v[len++] = temp * positive_or_negative_one;
            positive_or_negative_one = 1;
        }
    }
    return len;
}

int main(int argc, char const *argv[]) {
    int *a = NULL;
    int count_a, len=0;
    char buffer[BUFFER_SIZE];

    printf("Input numbers here: ");
    gets(buffer);
    for (int i = 0; i < strlen(buffer); i++) {
        if (buffer[i] == ' '){
            len+=1;
        }
    }

    a = (int*) malloc(sizeof(int) * len + 1);
    count_a = convert_input(a, buffer);

    for (int i = 0; i < count_a; i++) {
        printf("%d\n", a[i]);
    }

    free(a);

    return 0;
} 
```

输入输出示例：

```
Input numbers here: 1 2 3 -4 10
1
2
3
-4
10 
```

# java - Apache Camel 和 CXF：我如何从 bean 发送 HTTP 状态码

> ID：10425955
> 
> 赞同：2
> 
> 时间：2012-05-03T06:03:56.133
> 
> 标签：java, rest, cxf, apache-camel, cxfrs

我有一个基于 cxf 和骆驼的宁静的网络服务。我正在为我的工作流程使用骆驼路由，它是这样的..

Client --> My Rest Service Class --> Camel Custom Processors --> Bean Bar 的一些方法 Foo

bean FooBar 看起来像这样..

```
public class Bar {

    public MyObject foo(String request, Exchange exchange){
    //do some procesing 

    return instance of MyObject;
} 
```

现在的问题是，每当我对此进行测试时，我都会在客户端收到 200 的响应代码。现在，如果我希望此代码不是 200，我需要将其设置为`HttpServletResponse`其他`javax.ws.rs.core.Response`对象，但我如何访问此响应对象。

我尝试了以下方法，但没有解决我的问题。

1.  `exchange.getOut().setHeader(Exchange.HTTP_RESPONSE_CODE, 202);`

2.  `exchange.getIn().setHeader(Exchange.HTTP_RESPONSE_CODE, 202);`

3.  `exchange.setProperty(Exchange.HTTP_RESPONSE_CODE, 202);`

4.  `Response.status(202).build();`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T07:21:15.743

这是一种解决方法，我不知道这是否是唯一的方法，但这对我有用。将您的方法 Foo 的返回类型更改为 Response(javax.ws.rs.core)，然后将您的对象（“myobject 的实例”）包装在此响应中，如果您愿意，您也可以指定 mime 类型.. 跟随是一个样本..

```
public class Bar {
    public Response foo(String request, Exchange exchange){
        //make instance of MyObject
        MyObject myObj = new myObj();
        //do your processing and set the object in response code
        Response response = Response.status(Status.ACCEPTED).entity(myObj).type(MediaType.APPLICATION_JSON).build();
        return response;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-08-24T08:00:57.833

设置后，`HTTP_RESPONSE_CODE`您需要告诉交易所发生了错误。

```
exchange.getOut().setHeader(Exchange.HTTP_RESPONSE_CODE, 202);
exchange.getOut().setFault(true); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T06:56:00.643

你有没有在你的路线上累过这样的事情

```
Response r = Response.status(202).entity("Created").build();
exchange.getOut().setBody(r); 
```

由于您想更改默认响应，因此您需要覆盖交换出去的消息

# php - 在php中流式读取文件

> ID：10425957
> 
> 赞同：3
> 
> 时间：2012-05-03T06:04:17.587
> 
> 标签：php, memory

我有一个大的 csv 文件（大约 30M），我想使用我的 php 程序读取它并将其转换为另一种格式并将其保存为不同的小文件。当我使用传统的 fopen 、 fwrite 方法时，我收到一条错误消息`Fatal error: Allowed memory size of 134217728 bytes exhausted`。我知道我可以在 php.ini 中设置内存限制，但是有什么方法可以将文件作为流读取，这样就不会产生太多的内存开销？可能类似于`StreamReader`java 中的类？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T06:14:53.113

[`fgets()`](http://php.net/fgets)只要您每次都重新分配变量（而不是将行存储在数组或其他东西中，它们将保留在内存中），您就可以一次读取一行文件。

一种方法，使用 ~65 MB 文件：

```
// load the whole thing
$file = file_get_contents('hugefile.txt');
echo memory_get_peak_usage() / 1024 / 1024, ' MB';
// prints '66.153938293457 MB' 
```

第二种方式：

```
// load only one line at a time
$fh = fopen('hugefile.txt', 'r');
while ($line = fgets($fh)) {}
echo memory_get_peak_usage() / 1024 / 1024, ' MB';
// prints '0.62477111816406 MB' 
```

此外，如果您想以不同的格式重新排列数据，您可以在使用时将每一行解析为 CSV [`fgetcsv()`](http://php.net/fgetcsv)。

# node.js - 节点 js：有两个 setInterval()

> ID：10425960
> 
> 赞同：1
> 
> 时间：2012-05-03T06:04:32.347
> 
> 标签：node.js

我是韩国人。我的英语水平太低了。

在 NODE.JS 中，有两个 setInterval()。当然，nodejs 是单线程的。

但是，我担心每个 setInterval 处理相同的值（或数组）。

说实话，我的情况有network和setInterval()。

我怎样才能控制价值。还是我的担心算不了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T06:25:11.570

你想考虑改写这个，我很难理解你在问什么（特别是与网络/线程有关），但我猜你想看看 nodejs 事件循环是什么：

[http://blog.mixu.net/2011/02/01/understanding-the-node-js-event-loop/](http://blog.mixu.net/2011/02/01/understanding-the-node-js-event-loop/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T06:27:10.310

JavaScript 以我喜欢称之为**turn**的方式运行代码。

在一个回合中，正在运行的代码对所有变量和绑定到它们的值具有完全且独占的访问权限。由于没有其他代码正在运行或无法运行，因此您不必担心锁定。

您可以忽略该行下方的文本。

* * *

请注意，尽管在这种情况下这无关紧要，但如果您有一个在多个轮次中完成的过程，您应该知道其他代码可能在这些轮次之间轮流执行。每个回合都是原子的，并且有一些方法可以使多回合进程成为原子的，但是它们太复杂了，无法在这里解释。

请注意，转弯的概念来自[E 语言](http://erights.org/)，但非常适合 JavaScript。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T06:16:48.147

只有一个线程分配给用户级用户级别 에서는 오직 1 个线程 만 할당 되어있다 。

因此，您不必担心线程冲突。或 IPC
즉 线程冲突 은 고민할 필요가 없다는 얘기

如果您的问题与此无关，那么您可以通过应用程序级编程轻松处理所有其他情况 기타 상황은 응용프로그램 레벨에서 조치 하면 될것 같음。

我是这里的新手，所以我不知道是否允许使用英语以外的语言....

# java - Java 访问主类变量

> ID：10425962
> 
> 赞同：2
> 
> 时间：2012-05-03T06:04:47.780
> 
> 标签：java, scope

我正在制作一个小游戏，其中 Main 类包含所有对象和变量，并在类本身中调用完成大部分工作的方法。很标准。不幸的是，这意味着我需要的许多变量都在 Main 类中，我无法访问它们。

例如，作为一个测试，我想让一个球在屏幕上弹跳，这很简单，但我需要屏幕的尺寸，我可以使用`getSize()`主类中的方法轻松获得。但是当我创建`Ball`会反弹的类时，我无法访问该`getSize()`方法，因为它在`Main`类中。反正有调用吗？

我知道我可以将变量传递给`Ball`构造函数中的类或我需要的每个方法，但我想看看是否有某种方法可以在需要时获取所需的任何变量，而不是在任何时候传递所有信息我制作了一个新对象。

**主类**

```
public void Main extends JApplet {
    public int width = getSize().width;
    public int height = getSize().height;

    public void init(){
        Ball ball = new Ball();
    }
} 
```

**球类**

```
public void Ball {
    int screenWidth;
    int screenHeight;

    public Ball(){
        //Something to get variables from main class
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T06:06:49.193

将您需要的变量传递给您的对象。您甚至可以创建一个包含类所需的所有常量/配置的单例类。

给出的例子：

常量类

```
public class Constants {
    private static Constants instance;

    private int width;
    private int height;

    private Constants() {
        //initialize data,set some parameters...
    }

    public static Constants getInstance() {
        if (instance == null) {
            instance = new Constants();
        }
        return instance;
    }

    //getters and setters for widht and height...
} 
```

主班

```
public class Main extends JApplet {
    public int width = getSize().width;
    public int height = getSize().height;

    public void init(){
        Constants.getInstance().setWidth(width);
        Constants.getInstance().setHeight(height);
        Ball ball = new Ball();
    }
} 
```

球类

```
public class Ball {
    int screenWidth;
    int screenHeight;

    public Ball(){
        this.screenWidth = Constants.getInstance().getWidth();
        this.screenHeight= Constants.getInstance().getHeight();
    }
} 
```

另一种方法是使用您需要的参数启动对象实例。给出的例子：

主班

```
public class Main extends JApplet {
    public int width = getSize().width;
    public int height = getSize().height;

    public void init(){
        Ball ball = new Ball(width, height);
    }
} 
```

球类

```
public class Ball {
    int screenWidth;
    int screenHeight;

    public Ball(int width, int height){
        this.screenWidth = width;
        this.screenHeight= height;
    }
} 
```

有更多的方法可以实现这一点，只要看看你自己，选择你认为对你的项目更好的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T06:07:34.853

您只需使用两个 arg 构造函数即可访问它们。

```
public void init(){
        Ball ball = new Ball(width,height);
    }

public Ball(width,height){
        //access variables here from main class
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T06:10:18.963

为什么不这样：

```
public void Main extends JApplet {
public int width = getSize().width;
public int height = getSize().height;

public void init(){
    Ball ball = new Ball(width, height);
}

public void Ball {

public Ball(int screenWidth, int screenHeight){
    //use the variables
} 
```

# android - 平板电脑 3.0 中的滑动手势

> ID：10425972
> 
> 赞同：1
> 
> 时间：2012-05-03T06:05:22.680
> 
> 标签：android

我已经制作`Gesture`了从左到右和从右到左使用滑动检测的应用程序。
我在 2.2 AVD 模拟器上取得了成功，但是当我尝试在平板电脑 3.0 中使用相同的代码时它不起作用

请告诉我有什么问题。

```
private static final int SWIPE_MIN_DISTANCE = 120;
    private static final int SWIPE_THRESHOLD_VELOCITY = 200;
   private class GestureListener extends SimpleOnGestureListener {
        @Override
        public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
                float velocityY) {
            if (e1.getX() - e2.getX() > SWIPE_MIN_DISTANCE
                    && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {

                Toast.makeText(RssActivity.this, "Right to left",
                        Toast.LENGTH_LONG).show();
                SetNewRightclickActivity();
                Log.i(TAG, "Right to left");
                return true; // Right to left

            } else if (e2.getX() - e1.getX() > SWIPE_MIN_DISTANCE
                    && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {

                Toast.makeText(RssActivity.this, "Left to right",
                        Toast.LENGTH_LONG).show();
                Log.i(TAG, "Left to right");
                SetNewLeftclickActivity();
                return true; // Left to right

            }
            if (e1.getY() - e2.getY() > SWIPE_MIN_DISTANCE
                    && Math.abs(velocityY) > SWIPE_THRESHOLD_VELOCITY) {

                return true; // Bottom to top
            } else if (e2.getY() - e1.getY() > SWIPE_MIN_DISTANCE
                    && Math.abs(velocityY) > SWIPE_THRESHOLD_VELOCITY) {

                return true; // Top to bottom
            }
            return false;
        }
    } 
```

**主要的：：**

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.rssheader);

        gestureDetector = new GestureDetector(new GestureListener());
        gestureListener = new View.OnTouchListener() {
            public boolean onTouch(View v, MotionEvent event) {
                return gestureDetector.onTouchEvent(event);
            }
        }; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T06:42:21.097

您的代码似乎是正确的，您可以粘贴 log cat trace 吗？弄清楚错误是什么

这段代码对我有用：

```
 public class MainActivity extends Activity {
    private static final int SWIPE_MIN_DISTANCE = 120;
    private static final int SWIPE_MAX_OFF_PATH = 250;
    private static final int SWIPE_THRESHOLD_VELOCITY = 200;
    private GestureDetector gestureDetector;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        gestureDetector = new GestureDetector(this.getApplicationContext(),new MyGestureDetector());
        View mainview = (View) findViewById(R.id.mainView);

        // Set the touch listener for the main view to be our custom gesture listener
        mainview.setOnTouchListener(new View.OnTouchListener() {
            public boolean onTouch(View v, MotionEvent event) {
                if (gestureDetector.onTouchEvent(event)) {
                    return true;
                }
                return false;
            }
        });
    }

    class MyGestureDetector extends SimpleOnGestureListener {
        @Override
        public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {

            if (Math.abs(e1.getY() - e2.getY()) > SWIPE_MAX_OFF_PATH) {
                return false;
            }

            // right to left swipe
            if(e1.getX() - e2.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
                Toast.makeText(getApplicationContext(), "right_left", Toast.LENGTH_LONG).show();

                // Do Something
                //  left to right  swipe
            }  else if (e2.getX() - e1.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
                Toast.makeText(getApplicationContext(), "left_right", Toast.LENGTH_LONG).show();
                // Do somethin

            }

            return false;
        }

        // It is necessary to return true from onDown for the onFling event to register
        @Override
        public boolean onDown(MotionEvent e) {
                return true;
        }

    }
} 
```

为主要。xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:id="@+id/mainView"
    android:background="#AA1BAF"
    > 
        <TextView  
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content" 
            android:text="Swipe left and right"
        />
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T06:29:10.497

您需要`gestureListener`（在**onCreate**方法中）设置要检测滑动的视图。

* * *

**在rssheader.xml**中将 id 设置为布局中的视图/视图组，例如：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"

    android:id="@+id/myLayout"
    android:clickable="true">

</LinearLayout> 
```

现在在 Activity 类中获取该 id 并将侦听器设置为它

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.rssheader);

    LinearLayout ll = (LinearLayout) findViewById(R.id.myLayout);

    GestureDetector gestureDetector = new GestureDetector(new GestureListener());
    OnTouchListener gestureListener = new View.OnTouchListener() {
        public boolean onTouch(View v, MotionEvent event) {
            return gestureDetector.onTouchEvent(event);
        }
    };

    ll.setOnTouchListener(gestureListener);

} 
```

# xml - 在服务器上存储 JSON 数据

> ID：10425975
> 
> 赞同：0
> 
> 时间：2012-05-03T06:05:32.010
> 
> 标签：xml, database, json, serialization, datastore

我正在构建一个具有多个字段的表单的移动应用程序。

我想知道是否可以创建一个 JSON 对象，将其序列化并通过网络发送并将其保存在服务器上。

这样做的机制是什么？

有没有其他/更好的选择。我不想使用数据库。

谢谢拉杰什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T06:16:08.930

看看 MongoDB，它是为你量身定做的。它以二进制格式将 JSON 存储/检索到磁盘。此外，它不是关系数据库，而是**NOSQL**，其中数据保存为 JSON*文档集合*而不是表格。没有安装过程，您只需下载一些二进制文件，将它们复制到您的服务器，然后就可以了。此外，MongoDB 驱动程序有多种语言版本。

[http://www.mongodb.org/](http://www.mongodb.org/)

# php - 如何验证 MySQL 变更，创建查询..？

> ID：10425977
> 
> 赞同：0
> 
> 时间：2012-05-03T06:05:41.503
> 
> 标签：php, mysql, validation, alter

我有一些情况，代码根据当前表结构和新版本的表结构生成 SQL 查询。我如何检查该类生成的那些查询是否有效，因为有时该类会导致错误构建更改，特别是当它与主键相关时删除列查询，自动编号。

所以我想把一些东西放在适当的位置，这样我就可以在执行它们之前查看生成的查询是否有任何错误。我不能在交易中做到这一点，因为它在桌子上的变化。我正在为 PHP 使用 ADOdB

# java - 列表与地图有何不同？

> ID：10425978
> 
> 赞同：5
> 
> 时间：2012-05-03T06:06:04.217
> 
> 标签：java

在 java 中，List 和 Map 在集合中使用。但是我不明白在什么情况下我们应该使用 List，什么时候使用 Map。两者的主要区别是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-03T06:08:10.810

现在是阅读[Java 集合教程](http://docs.oracle.com/javase/tutorial/collections/index.html)的好时机——但从根本上说，列表是可以通过索引访问的有序元素序列，而映射通常是从键到值的*无序映射。*（一些地图保留插入顺序，但这是特定于实现的。）

当你想要一个键/值映射并且你只想要一个元素的集合时，这*通常是相当明显的。**键是否是值的一部分*变得不太清楚，但是您希望能够通过该键有效地获取项目。即使从某种意义上说，您没有单独的键集合，这仍然是地图的一个很好的用*例*。

还有`Set`，它是*不同*元素的（通常是无序的）集合。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-03T06:09:09.417

[地图](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Map.html)适用于`Key:Value`一对数据。例如，如果您想将学生卷号映射到他们的姓名。

[List](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/List.html)用于允许重复的元素的简单有序集合。例如表示学生姓名列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T06:12:48.600

地图接口 地图关心唯一标识符。您将唯一键（ID）映射到特定值，其中键和值当然都是对象。Map 实现允许您执行诸如基于键搜索值、仅请求值的集合或仅请求键的集合之类的操作。与 Set 一样，Map 依赖 equals() 方法来确定两个键是相同还是不同。

List 接口 List 关心索引。List 具有非列表所没有的一件事是一组与索引相关的方法。这些关键方法包括 get(int index)、indexOf(Object o)、add(int index, Object obj) 等。所有三个 List 实现都按索引位置排序——您可以通过在特定索引处设置对象或在不指定位置的情况下添加对象来确定位置，在这种情况下，对象被添加到末尾。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T06:12:56.170

list 是一个链表，其中每个对象都通过指针连接到下一个对象。将新对象插入列表所需的时间是 O(1)，但对其进行的其余操作需要更长的时间。

它的好处是它完全占用了您需要的内存量，甚至不超过字节。

地图是一种具有数组的数据结构，数组中的每个条目都使用`hashFunction(key)`根据键计算位置的 a 进行计算。几乎 Map 中的每个操作都需要 O(1)（当有 2 个相同的键时插入除外），但空间复杂度相当大。

更多阅读请尝试维基百科的[HashMap](http://en.wikipedia.org/wiki/Hash_table)和[链表](http://en.wikipedia.org/wiki/Linked_list)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-03T06:27:44.790

HashList是将对象存储在哈希表和列表中的数据结构。它是哈希图和双向链表的组合。访问会更快。HashMap 是 map 接口的哈希表实现，它与 HashTable 相同，只是它是不同步的并且允许空值。List 是一个有序集合，它允许其中包含空值和重复项。位置访问是可能的。Set 是一个不允许重复的集合，它最多允许一个空元素。和我们的数学集一样。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-03T06:09:53.313

`List`只是一个有序的集合（一个序列）。查看此[列表文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Map.html)。您可以通过整数索引（列表中的位置）访问元素，并在列表中搜索元素。列表还允许重复元素和多个 NULL 元素。

`Map`是将值映射到键的对象。检查此[地图文档](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)。地图不能包含重复的键；每个键最多可以映射到一个值。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-03T18:41:53.230

```
List - This datastructure is used to contain list of elements. 
       In case you need list of elements and the list may contain duplicate values, 
       then you have to use List.

Map - It contains data as key value pair. When you have to store data 
      in key value pair,so that latter you can retrieve data using the key,
      you have to use Map data structure. 
```

列表实现**——ArrayList、LinkedList**
映射实现**——HashMap、TreeMap**

相比之下- 如果您想获取页面的所有节点，哈希映射是最快的数据结构`HashMap`。`ArrayList`节点列表可以在恒定时间 (O(1)) 中获取，而使用列表的时间是 O(n)（n=页数，在排序列表上更快，但永远不会接近 O(1)）

# math - 有符号整数中的前导 1 表示负数是从哪里来的？

> ID：10425979
> 
> 赞同：7
> 
> 时间：2012-05-03T06:06:21.430
> 
> 标签：math, binary, unsigned, signed

尽管我读过很多文章说大多数 2 的补码用于表示有符号整数中的负数，这是最好的方法，

但是由于某种原因，我将这个（下）卡在了我的脑海中，并且在不知道它的历史的情况下无法摆脱它

**“使用有符号整数时，使用前导位 1 表示负数。”**

我在网上和 StakOverflow 中阅读了许多帖子，认为 2 的补码是表示负数的最佳方式。但我的问题不是关于最佳方式，而是关于历史或“领先位”概念从哪里出现然后消失？

PS：也不是我，很多其他人也对此感到困惑。

编辑 - 1 我提到的所谓的前导 1 方法在这篇文章中用一个例子来描述： [为什么用二进制补码来表示负数？](https://stackoverflow.com/questions/1125304/why-is-twos-complement-used-to-represent-negative-numbers)

现在我明白了，1 的 MSB 表示负数。这本质上是 2 的补码，而不是任何特殊方案。

例如。如果不是第一位，我们不能说 1011 代表 -5 还是 +11。

感谢：jamesdlin、Oli Charlesworth、Lister 先生提出恳求的问题，让我意识到正确的答案。

咆哮：我认为有很多团体/人们被教导或被认为（错误地）认为 1011 评估为 -3。1 表示 - 和 011 表示 3。

那些问“我的问题是什么……”的人可能从他们第一次学习到正确的 2 补码方式就被教导了，并且没有接触到这些错误的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T06:19:23.690

有符号整数的二进制补码表示有几个优点。

现在让我们假设 16 位。

0 到 32,767 范围内的非负数在有符号和无符号类型中具有相同的表示。（Two's-complement 与 one's-complement 和 sign-and-magnitude 共享此功能。）

二进制补码很容易在硬件中实现。对于许多操作，您可以对有符号和无符号算术使用相同的指令（如果您不介意忽略溢出）。例如，-1 表示为`1111 1111 1111 1111`，+1 表示为`0000 0000 0000 0001`。如果将它们相加，忽略高位是符号位这一事实，数学结果是`1 0000 0000 0000 0000`; 删除除低 16 位之外的所有位，得到`0000 0000 0000 0000`，这是正确的有符号结果。*解释与unsigned*相同的操作，您正在添加`65535 + 1`和 getting `0`，这是正确的*无符号*结果（环绕模 65536）。

您可以将前导位视为“符号位”，而只是另一个值位。在*无符号*二进制表示中，每个位表示 0 或 1 乘以位值，总和是这些乘积的总和。最低位的位置值为 1，下一个低位为 2，然后是 4，依此类推。在 16 位*无符号*表示中，高位的位置值为`32768`。在 16 位有符号二进制补码表示中，高位位的值为`-32768`。尝试几个例子，你会发现一切都很好。

有关更多信息，请参阅[维基百科](http://en.wikipedia.org/wiki/Two%27s_complement)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T08:15:32.370

这不仅仅是领先地位。这是关于*所有*的位。

# 从加法开始

首先让我们看看如何在 4 位二进制中对 2 + 7 进行加法：

```
 10 + 
 111
____
1001 
```

和十进制长加法一样：一点一点，从右到左。

*   在最右边的地方，我们将 0 和 1 相加，得到 1，没有进位。
*   在右数第二位，我们将 1 和 1 相加，即十进制的 2 或二进制的 10 - 我们写 0，携带 1。
*   在右数第三位，我们将携带的 1 与已经存在的 1 相加，得到二进制 10。我们写入 0，携带 1。
*   刚拿到的 1 写在右数第四位。

# 长减法

现在我们知道二进制 10 + 111 = 1001，我们应该能够倒推并证明 1001 - 10 = 111。同样，这与十进制长减法完全相同。

```
1001 -
  10
____
 111 
```

这是我们所做的，再次从右到左工作：

*   在最右边的地方，1 - 0 = 1，我们把它写下来。
*   其次，我们有 0 - 1，所以我们需要多借一点。我们现在做二进制 10 - 1，剩下 1。我们把它写下来。
*   第三，记住我们借了一个额外的位 - 所以我们又得到了 0 - 1。我们使用相同的技巧来借一个额外的位，得到 10 - 1 = 1，我们把它放在结果的第三位。
*   第四，我们又要处理一个借来的问题。从已经存在的 1 中减去借来的位：1 - 1 = 0。我们可以将其写在结果前面，但由于这是减法的结束，因此没有必要。

# 有一个小于零的数字？！

你还记得你是如何学习负数的吗？部分想法是，您可以从任何其他数字中减去任何数字，仍然可以得到一个数字。所以 7 - 5 是 2；6 - 5 为 1；5 - 5 为 0；什么是4-5？好吧，推理这些数字的一种方法是简单地应用与上述相同的方法进行减法。

例如，让我们尝试二进制的 2 - 7：

```
 10 -
    111
_______
...1011 
```

我以与以前相同的方式开始：

*   在最右边的地方，从 0 中减去 1，这需要借位。10 - 1 = 1，所以结果的最后一位是 1。
*   在最右边的第二个位置，我们有 1 - 1 和一个额外的借位，所以我们必须减去另一个 1。这意味着我们需要借自己的位，得到 11 - 1 - 1 = 1。我们在第二个最右边的位置。
*   排在第三位，上面的数字没有更多的位了！但是我们知道我们可以假装前面有一个 0，就像我们会在底部的数字用完比特时做的那样。所以我们有 0 - 1 - 1 因为从第二位借位。我们得再借一点！无论如何，我们有 10 - 1 - 1 = 0，我们将其写在右数第三位。
*   现在发生了一件非常有趣的事情——减法的两个操作数都没有数字了，但我们还有一个借位需要处理！哦，好吧，让我们继续我们一直在做的事情。我们有 0 - 0，因为这里顶部或底部操作数都没有任何位，但由于借位，它实际上是 0 - 1。

    （我们又要借了！再这样借下去，很快就要宣布破产了。）

    无论如何，我们借位，我们得到 10 - 1 = 1，我们写在右数第四位。

现在任何一个有半点想法的人都会看到，我们将继续借用钻头，直到奶牛回家，因为没有更多的钻头可以四处走动了！如果你忘了的话，我们在两个地方之前用完了它们。但如果你试图继续前进，它看起来像这样：

```
...00000010
...00000111
___________
...11111011 
```

*   在第五位我们得到 0 - 0 - 1，我们借位得到 10 - 0 - 1 = 1。
*   在第六位，我们得到 0 - 0 - 1，我们借位得到 10 - 0 - 1 = 1。
*   在第七位我们得到 0 - 0 - 1，我们借位得到 10 - 0 - 1 = 1。

......所以它继续在你喜欢的许多地方。 *顺便说一句，我们刚刚导出了 -5 的二进制补码形式*。

您可以对您喜欢的任何一对数字尝试此操作，并生成任何负数的二进制补码形式。如果您尝试执行 0 - 1，您会明白为什么 -1 表示为`...11111111`. 您还将意识到为什么所有二进制补码负数的最高有效位都为 1（原始问题中的“前导位”）。

实际上，您的计算机并没有无限多的位来存储负数，因此它通常会在某个更合理的数字之后停止，例如 32。我们如何处理位置 33 中的额外借位？呃，我们只是默默地忽略它，希望没有人注意到。当有人注意到我们的新数字系统不起作用时，我们称之为**整数溢出**。

# 最后的笔记

当然，这不是使我们的数字系统工作的唯一方法。毕竟，如果我欠你 5 美元，我不会说你目前与我的余额是 ...999999995 美元。

但是我们刚刚推导出的系统有一些很酷的东西，比如减法可以在这个系统中给出正确的结果，即使你忽略了其中一个数字是负数的事实。通常情况下，我们必须考虑条件步骤的减法：要计算 2 - 7，我们首先必须弄清楚 2 小于 7，因此我们计算 7 - 2 = 5，然后在前面加上一个减号得到 2 - 7 = -5。但是对于二进制补码，我们只是继续做减法，而不关心哪个数字更大，正确的结果会自己出来。其他人提到加法很好用，乘法也很好用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T06:13:49.837

每个人说，你不使用前导位。例如，在一个 8 位有符号字符中，

11111111

代表-1。您可以*测试*前导位以确定它是否为负数。

使用 2 的补码有很多原因，但最重要的是方便。取上面的数字并加 2。我们最终得到什么？

00000001

您基本上可以免费加减 2 的补码。这在历史上是一件大事，因为逻辑很简单；您不需要专用硬件来处理签名号码。你使用更少的晶体管，你需要更简单的设计等等。它可以追溯到 8 位微处理器之前，它甚至没有内置乘法指令（甚至许多 16 位微处理器都没有，例如65c816 用于苹果 IIe 和 Super NES）。

话虽如此，乘法与 2 的补码也相对微不足道，所以这没什么大不了的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T07:50:57.297

补码（包括十进制的 9 补码、机械计算器/加法机/收银机）一直存在。例如，在具有四个十进制数字的九进制补码中，0000..4999 范围内的值是正数，而 5000..9999 范围内的值是负数。有关详细信息，请参阅[http://en.wikipedia.org/wiki/Method_of_complements](http://en.wikipedia.org/wiki/Method_of_complements)。

这直接产生二进制的 1s 补码，并且在 1s 和 2s 补码中，最高位充当“符号位”。这并不能准确解释计算机是如何从一个补码变为二进制补码的（顺便说一下，在将这些单词拼写为带撇号的单词时，我使用了 Knuth 的撇号约定）。我认为这是运气，对“负零”的刺激，以及二进制补码需要结束进位的方式（相对于二进制补码，不需要它）的组合。

从逻辑上讲，使用哪个位来表示符号并不重要，但出于实际目的，使用最高位和二进制补码可以简化硬件。在晶体管价格昂贵的时候，这非常重要。（甚至管子，尽管我认为大多数（如果不是全部）真空管计算机都使用补码。无论如何，它们比 C 语言早了很多。）

总而言之，*历史*可以追溯到电子计算机和 C 语言之前，当从机械计算器转换到真空管 ENIAC 再到晶体管计算机，然后再到“芯片”、MSI、LSI、VLSI 等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T06:20:41.573

好吧，它必须这样工作才能`2 plus -2`给出零。早期的 CPU 有硬件加法和减法，有人注意到通过补全所有位（一个补码，原始系统）来改变值的“符号”，它允许现有的加法硬件正常工作——除了有时结果为负零。（-0 和 0 有什么区别？在这样的机器上，它是不确定的。）

很快有人意识到，通过使用二进制补码（通过反转位并加一来将数字在负数和正数之间转换），可以避免负零问题。

所以实际上，受负数影响的不仅仅是符号位，而是除 LSB 之外的所有位。但是，通过检查 MSB，可以立即确定有符号值是否为负。

# asp.net-mvc - MVC3 模型 - 如何使它成为一个下拉列表？

> ID：10425982
> 
> 赞同：2
> 
> 时间：2012-05-03T06:06:41.863
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我正在制作一个 MVC4 网络应用程序供 2 所大学的同龄人使用，稍后我将扩展到其他学校。在我目前的模型中

```
 public string school { get; set; } 
```

我会喜欢的，所以当我这样做的时候

```
 @Html.EditorFor(model => model.school) 
```

这将是“学校 1”和“学校 2”的下拉列表。

我怎样才能干净地做到这一点？如果可以的话，我希望能够在模型中进行更改，并且除了调用@Html.EditorFor 之外不必在视图中做任何事情。如果完成此操作的唯一方法是在视图中执行某些操作，那也可以。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T06:15:36.960

而不是`Html.EditorFor`你可以使用`Html.DropDownListFor`

```
@{
   var items = new SelectList(new[]
                   {
                       new SelectListItem {Text = "School1", Value = "School1"},
                       new SelectListItem {Text = "School2", Value = "School2"},
                   }, "Text", "Value");
}

@Html.DropDownListFor(x => x.school, @items) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-07-18T10:08:53.040

您可以使用上面的代码，也可以在页面中使用此代码。

```
@Html.DropDownListFor(model => model.Status, new List<SelectListItem>
                    {
                       new SelectListItem{ Text="New", Value = "New" },
                       new SelectListItem{ Text="InProcess", Value = "InProcess" },
                       new SelectListItem{ Text="Completed", Value = "Completed" },
                       new SelectListItem{ Text="Rejected",Value="Rejected"},

                    }, "Select Status", new { @class = "form-control select2_demo_4" }) 
```

这肯定会对您有所帮助，并且当您选择其中任何一个时，您都可以获得模型的价值。

# c# - 在 C#.NET 中将 Excel 导入数据库

> ID：10425984
> 
> 赞同：2
> 
> 时间：2012-05-03T06:06:52.537
> 
> 标签：c#, .net, database, excel

我有大量的 Excel 文件。有很多私人信息，我的客户希望将其存储在数据库中。之后他们可以使用数据库中的数据来重建所有的 Excel 报表。那么你有什么想法来实现这一目标吗？如果我将 Excel 转换为字节流进行存储怎么办？

我知道如果我把 Excel 放到字节流中，会使用更多的时间和空间来处理类似的格式和其他事情，这样做很愚蠢。所以我想要其他方式来存储数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T06:35:55.100

您是否受限于使用 C#？某些版本的 SQL Server 提供 DTS 或 SSIS 服务，用于将数据从各种源/目标（如 Excel 文件）移入和移出数据库。Oracle 在 OWB 中有类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T06:27:25.443

正如 Uriel_SVK 所说，Interop.Excel 应该很容易实现这一点。但是如果你只是想存储数据，也可以试试 Oledb。

```
string myConnection ="Provider=Microsoft.ACE.OLEDB.12.0;Data Source=D:\test.xlsx;Extended Properties="Excel 12.0 ;HDR=YES";

    OleDbConnection conn = new OleDbConnection(connstr);

    string strSQL = "SELECT * FROM [Sheet$]"; 
    OleDbCommand cmd = new OleDbCommand(strSQL, conn);

    DataSet dataset = new DataSet();
    OleDbDataAdapter adapter = new OleDbDataAdapter(cmd);
    adapter.Fill(dataset); 

    GridViewXYZ.DataSource = dataset; 
    GridViewXYZ.DataBind(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T08:06:06.943

您可以使用 Jet OleDB。

工作表将是表，工作簿将是数据库。您可以使用 SQl 查询来生成所需的数据并将其保存在数据表/数据集上