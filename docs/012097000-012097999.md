# StackOverflow 问答 12097000-12097999

# php - Kohana/php 标头和客户端库次要版本不匹配

> ID：12097001
> 
> 赞同：1
> 
> 时间：2012-08-23T17:23:28.413
> 
> 标签：php, mysql, kohana, kohana-3

我遇到了一个非常奇怪的错误，正如标题所说，我得到：

`mysql_connect(): Headers and client library minor version mismatch. Headers:50095 Library:50149`

经过一番谷歌搜索后，我发现它可能是由错误的`mysql/php`版本引起的，这可能是正确的，但问题是我使用的是 php 框架`kohana`，如果尝试在没有该框架的情况下运行这个非常简单的连接代码：

```
$sql = mysql_connect("server", "root", "passowrd") or die(mysql_error());
mysql_select_db("db", $sql); 
```

它工作得很好，所以我的猜测是这个错误是由某个地方的 php 脚本引起的，这可能吗？如果是这样，我可以在不更新服务器的情况下修复它吗，因为我使用的是公共租用主机，这实际上是不可能的。

也以防万一这里是`class`连接到`DB`： http: [//pastebin.com/VFtj0re6](http://pastebin.com/VFtj0re6)

PS我试图从`public function connect()`函数中删除所有代码，并添加我自己的似乎正在工作的连接代码，但它没有帮助。

# javascript - 使用jquery访问gridview中的隐藏字段并更新它？

> ID：12097003
> 
> 赞同：2
> 
> 时间：2012-08-23T17:23:31.910
> 
> 标签：javascript, jquery, asp.net

我在 asp.net 中有一个 gridview 其中一个字段是 gridview 内部的一个隐藏字段：

```
 <asp:TemplateField>
                                 <ItemTemplate>
                                      <input type="hidden" value="0" id="hdnIsChanged" runat="server" />
                                 </ItemTemplate>
                            </asp:TemplateField> 
```

我在网格视图中也有一个单选按钮列表，带有一个正在工作的 jquery 点击事件......这是那个事件：

```
$("#MainContent_gvLineItems input[id*='rbAnswer']").click(function () {
                    var parentRow = $(this).parents('tr').eq(1) //used to get the row at index 1, parents('tr').length prints 3\.  
                    //tr around the checkbox is index 2
                    //tr around row is index 1
                    //tr around header is index 0
                    //so we want to get a reference to index=1
                    var firstCell = parentRow.find('td:eq(0)'); //find the first cell
                    var p = $(this).parents("div[id='dMainAnswer']").find(".Answer:first"); //used to find the panel
                    var val = $(this).val();

                    switch (val) //check the value 
                    {
                        case 'No':
                            firstCell.css('background-color', 'red');
                            p.show();
                            break;
                        case 'Yes':
                            firstCell.css('background-color', 'green');
                            p.hide();
                            break;
                        case 'N/A':
                            firstCell.css('background-color', 'gray');
                            p.hide();
                            break;
                        default:
                            firstCell.css('background-color', 'transparent');
                            p.show();
                            break;
                    }
                }); 
```

这一切都很好，但是在这个点击事件中我想访问隐藏字段`hdnIsChanged`我如何引用它？我试过了：

`alert($('input[id$=hdnAnswered').val());`

但它继续说未定义......我希望能够在这个点击事件中访问它并使用jquery为其设置一个值。请记住它在 gridview 内，因此它出现在每一行...

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T17:27:31.677

就个人而言，我会为您的隐藏字段分配一个类并尝试像这样访问它：

```
$(this).closest(".myClass"); 
```

请记住，由于这是一个服务器控件，因此该隐藏字段的 ID 很可能会在前面加上一堆 asp.net 垃圾。因此，不要像这样渲染：

```
<input type="hidden" value="0" id="hdnIsChanged" /> 
```

它很可能会像这样呈现：

```
<input type="hidden" value="0" id="clt100_clt100_290420349823049823423_hdnIsChanged" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T17:26:42.703

尝试`alert($("#hdnIsChanged").val())`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T17:54:53.493

你试过这个

```
alert($('input[id$=hdnAnswered').val()); 
```

但现在试试这个......你忘了关闭方括号

```
alert($('input[id$=hdnAnswered]').val()); 
```

这是可以帮助您获取特定行的隐藏字段值的代码

```
 $("#MainContent_gvLineItems input[id*='rbAnswer']").click(function () {
                    var parentRow = $(this).parent('tr');
                    var hiddenField=parentRow.find('input[id$=hdnIsChanged]');
                    alert(hiddenField.val());
    }); 
```

# meteor - 将标准输出流式传输到 Meteor 网站

> ID：12097007
> 
> 赞同：1
> 
> 时间：2012-08-23T17:24:17.160
> 
> 标签：meteor

这是我的第一个 Meteor 应用程序，我很高兴尝试学习该框架，所以我刚刚建立了一个内部网站，将管理一堆命令行进程。其中许多命令行进程需要 10 到 20 分钟才能执行，所以我希望我可以在执行过程中向用户提供反馈，例如在进程执行时将标准输出通过管道传回给用户。现在我正在这样做：

```
var require __meteor_bootstrap__.require
var sys = require('sys')
var exec = require('child_process').exec;

Meteor.methods({
  foo: function(job_id) {
    var select = { _id: job_id };
    var execCommand = "dir /s"; // or whatever it is I'm doing
    exec(execCommand, function(error, stdout, stderr) {
      Fiber (function() {
        Jobs.update(select, {$set: { logs: stdout }});
      }).run();
    })
  }
}); 
```

这工作正常，当工作完成时，我会看到日志，但我想知道是否有更好的方法可以做到这一点，以便在结果可用时我可以开始发送它们。欢迎任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T17:51:04.897

我会使用 MongoDB 运算符逐行附加输出，`$push`而不是每次都重置“日志”的内容。我猜这将为您节省一些带宽。

但除此之外，`exec`不会定期调用您的函数。查看[“node.js 同步执行系统命令”](https://stackoverflow.com/questions/4443597/node-js-execute-system-command-synchronously)问题以获取解决方法。

# python - 如何警告我潜在的 NameError？

> ID：12097010
> 
> 赞同：1
> 
> 时间：2012-08-23T17:24:21.270
> 
> 标签：python, nameerror

下面是一个 Python 脚本示例：

```
n, dollar, euro = map(input().split())
if n == 1:
   print(dolar / euro)  # Note the typo, 'dolar' vs. 'dollar'
else:
   print(euro / dollar) 
```

我犯了一个错误（“dolar”带有一个“l”）。除非您输入 ，否则解释器不会通知`error(NameError)`甚至警告`n = 1`。

如何在运行时获知这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T17:32:17.310

[pylint](http://www.logilab.org/857/)会将此报告为`E: 3: Undefined variable 'dolar'`，并为您提供许多有用的样式提示。

Python 本身不能产生像这样的编译时错误，因为它不能真正告诉你不是在不运行导致它的代码的情况下动态创建该名称。（即使您碰巧这样做，Pylint 也会认为这是一个错误，这很好，因为如果您编写这样的代码，您应该得到它的低分......）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T17:32:51.693

使用皮林特：

```
sucmac:~ ajung$ /tmp/bin/pylint ou.py 
No config file found, using default configuration
************* Module ou
W:  3,0: Bad indentation. Found 3 spaces, expected 4
W:  5,0: Bad indentation. Found 3 spaces, expected 4
C:  1,0: Missing docstring
C:  1,0: Invalid name "n" (should match (([A-Z_][A-Z0-9_]*)|(__.*__))$)
C:  1,3: Invalid name "dollar" (should match (([A-Z_][A-Z0-9_]*)|(__.*__))$)
C:  1,11: Invalid name "euro" (should match (([A-Z_][A-Z0-9_]*)|(__.*__))$)
W:  1,18: Used builtin function 'map'
W:  1,22: Used builtin function 'input'
E:  3,9: Undefined variable 'dolar' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T17:30:50.693

Python 无法在运行时提前通知您，因为有一些方法可以在该行出现之前将“dolar”插入符号表中，并且 Python 无法检测您是否已经这样做，直到它实际尝试运行该行。正如 Josh Lee 所说，最好的办法是制作一个（至少）测试每一行代码的测试套件。

# c# - 试图简化我们的存储库模式

> ID：12097015
> 
> 赞同：12
> 
> 时间：2012-08-23T17:24:36.823
> 
> 标签：c#, .net, entity-framework, repository-pattern, unit-of-work

目前我们已经在工作中实现了一个存储库模式。我们所有的存储库都位于它们自己的接口后面，并通过 Ninject 映射。我们的项目非常大，我正在尝试解决这种模式的一些怪癖。

首先，在一些控制器中，我们需要在同一个控制器中拥有超过 10 到 15 个存储库。当请求这么多存储库时，构造函数变得相当丑陋。在您调用多个存储库的方法后，第二个怪癖就会显现出来。在处理完多个存储库之后，我们需要调用 SaveChanges 方法，但是我们应该在哪个存储库上调用它呢？每个存储库都有一个。所有存储库都注入了相同的实体框架数据上下文实例，因此选择任何随机存储库来调用 save 都将起作用。只是看起来很乱。

我查看了“工作单元”模式并提出了一个我认为可以解决这两个问题的解决方案，但我对这个解决方案并不是 100% 有信心。我创建了一个名为`DataBucket`.

```
// Slimmed down for readability
public class DataBucket
{
    private DataContext _dataContext;

    public IReportsRepository ReportRepository { get; set; }
    public IEmployeeRepository EmployeeRepository { get; set; }
    public IDashboardRepository DashboardRepository { get; set; }

    public DataBucket(DataContext dataContext,
        IReportsRepository reportsRepository,
        IEmployeeRepository employeeRepository,
        IDashboardRepository dashboardRepository)
    {
        _dataContext = dataContext;
        this.ReportRepository = reportsRepository;
        this.EmployeeRepository = employeeRepository;
        this.DashboardRepository = dashboardRepository;
    }

    public void SaveChanges()
    {
        _dataContext.SaveChanges();
    }
} 
```

这似乎解决了这两个问题。现在`SaveChanges`数据桶本身只有一种方法，您只注入一个对象，即数据桶。然后，您可以将所有存储库作为属性访问。数据桶看起来会有点凌乱，因为它会在其构造函数中接受我们的所有（很容易 50 或更多）存储库。

添加新存储库的过程现在包括：创建接口、创建存储库、在 Ninject 中映射接口和存储库，以及向数据存储桶添加属性并填充它。

我确实想到了一种替代方法，可以消除上面的步骤。

```
public class DataBucket
{
    private DataContext _dataContext;

    public IReportsRepository ReportRepository { get; set; }
    public IEmployeeRepository EmployeeRepository { get; set; }
    public IDashboardRepository DashboardRepository { get; set; }

    public DataBucket(DataContext dataContext)
    {
        _dataContext = dataContext;
        this.ReportRepository = new ReportsRepository(dataContext);
        this.EmployeeRepository = new EmployeeRepository(dataContext);
        this.DashboardRepository = new DashboardRepository(dataContext);
    }

    public void SaveChanges()
    {
        _dataContext.SaveChanges();
    }
} 
```

这几乎消除了 Ninject 中的所有存储库映射，因为它们都在数据桶中实例化。所以现在添加新存储库的步骤包括：创建接口、创建存储库、向数据桶添加属性和实例化。

你能看出这个模型有什么缺陷吗？从表面上看，以这种方式使用我们的存储库似乎更方便。这是以前解决过的问题吗？如果是这样，解决这个问题的最常见和/或最有效的方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T19:43:46.653

> 首先，在一些控制器中，我们需要在同一个控制器中拥有超过 10 到 15 个存储库。

向抽象工厂模式问好。无需在 Ninject 中注册所有存储库并将它们注入控制器，而是仅注册工厂的单个实现，它将能够提供您需要的任何存储库 - 您甚至可以仅在控制器确实需要它们时才懒惰地创建它们。比将工厂注入控制器。

是的，它也有一些缺点 - 您正在授予控制器获取任何存储库的权限。对你来说有问题吗？如果需要，您始终可以为某些子系统创建多个工厂，或者在单个实现上简单地公开多个工厂接口。它仍然没有涵盖所有情况，但它比将 15 个参数传递给构造函数要好。顺便提一句。你确定那些控制器不应该分开吗？

注意：这不是服务提供者反模式。

> 在处理完多个存储库之后，我们需要调用 SaveChanges 方法，但是我们应该在哪个存储库上调用它呢？

向工作单元模式问好。工作单元是应用程序中的逻辑事务。它将逻辑事务中的所有更改保存在一起。存储库不应该负责持久化更改 - 工作单元应该是。有人提到这`DbContext`是存储库模式的实现。[它不是](https://stackoverflow.com/questions/5625746/generic-repository-with-ef-4-1-what-is-the-point/5626884#5626884)。它是工作单元模式`DbSet`的实现，是存储库模式的实现。

您需要的是持有上下文实例的中心类。上下文也将传递给存储库，因为它们需要它来检索数据，但只有中心类（工作单元）将提供保存更改。例如，如果您需要更改隔离级别，它还可以处理数据库事务。

应该在哪里处理工作单元？[这取决于](https://stackoverflow.com/questions/5026265/where-does-unit-of-work-belong-w-ef4-ioc-unity-and-repository/5026857#5026857)您的逻辑操作在哪里编排。如果操作直接在控制器的操作中编排，则您还需要在操作中包含工作单元，并在`SaveChanges`所有修改完成后调用。

如果您不太关心关注点分离，您甚至可以[将工作单元和工厂组合](https://stackoverflow.com/questions/4295975/repository-pattern-in-entity-framework-4-when-should-we-dispose/4298173#4298173)成一个类。这将我们带到您的`DataBucket`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T18:49:02.230

我认为在这种情况下使用工作单元模式是绝对正确的。这不仅可以防止您`SaveChanges`在每个存储库上都需要一个方法，它还为您提供了一种从代码内部而不是在数据库本身中处理事务的好方法。我在我的 UOW 中包含了一个`Rollback`方法，这样如果出现异常，我可以撤消该操作已经对我的`DataContext`.

为了防止奇怪的依赖问题，您可以做的一件事是将相关存储库分组到它们自己的工作单元中，而不是拥有一个包含您拥有的每个存储库的大 DataBucket（如果这是您的意图）。每个 UOW 只需要在与其包含的存储库相同的级别上可访问，并且其他存储库可能不应该依赖于其他 UOW 本身（您的存储库不应该需要使用其他存储库）。

如果想成为该模式的更纯粹主义者，您还可以构建您的 UOW 来代表它，即单个工作单元。您将它们定义为代表域中的特定操作，并为其提供完成该操作所需的存储库。如果在您的域中被多个操作使用是有意义的，则单个存储库可以存在于多个 UOW 上。

例如， a`PlaceCustomerOrderUnitOfWork`可能需要 a `CustomerRepository`、`OrderRepository`、`BillingRepository`和 a`ShippingRepository`

An`CreateCustomerUnitOfWork`可能只需要一个`CustomerRepository`. 无论哪种方式，您都可以轻松地将这种依赖传递给它的使用者，为您的 UOW 提供更细粒度的接口可以帮助您针对测试并减少创建模拟的工作量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T17:37:29.697

每个存储库都有一个的概念`SaveChanges`是有缺陷的，因为调用它可以保存一切。无法修改 a 的一部分`DataContext`，您始终保存所有内容。所以一个中央`DataContext`持有者类是一个好主意。

或者，您可以拥有一个具有通用方法的存储库，可以对任何实体类型（`GetTable<T>`、、`Query<T>`...）进行操作。这将摆脱*所有*这些类并将它们合并为一个（基本上，只剩下`DataBucket`）。

甚至可能根本不需要存储库：您可以注入它`DataContext`自己！它`DataContext`本身*就是*一个存储库和一个成熟的数据访问层。但它并不适合嘲笑。

如果你能做到这一点，取决于你需要“存储库”提供什么。

* * *

拥有该类的唯一问题`DataBucket`是该类需要了解所有实体和所有存储库。所以它在软件堆栈中的位置非常高（**在顶部**）。同时它基本上被所有东西使用，所以它也位于**底部**。等待！这是**对整个代码库的依赖循环**。

这意味着使用它的所有东西和它使用的所有东西都必须位于同一个程序集中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T17:41:41.620

我过去所做的是创建子注入容器（我使用 Unity）并使用`ContainerControlledLifetime`. 因此，当存储库被实例化时，它们**总是**有*相同*的数据上下文注入其中。然后，我继续使用该数据上下文，当我的“工作单元”完成时，我调用将`DataContext.SaveChanges()`所有更改刷新到数据库中。

这具有其他一些优点，例如（使用 EF）一些本地缓存，例如，如果多个存储库需要获取相同的实体，则实际上只有第一个存储库会导致数据库往返。

这也是“批量”更改并确保它们作为单个原子事务执行的好方法。

# html - 使用基于百分比的布局时的奇怪数学

> ID：12097026
> 
> 赞同：0
> 
> 时间：2012-08-23T17:25:14.703
> 
> 标签：html, css

我有一个包含两个主要 div 的布局。每个 div 的宽度为 45%。然而，当我检查不同页面宽度的 div 时，这些 div 通常彼此不同一个像素。639 vs 640。我并不关心这个，唯一的问题是较小的 div 内的项目没有与其他项目正确对齐。它只发生在某些页面宽度上，但它被破坏的程度超过了正确的程度。似乎较大 div 中的元素在任何窗口大小下都排成一行，而较小 div 几乎总是错误的，但在某些尺寸下是正确的。

这里发生了什么，有没有办法强制较小的 div 像较大的 div 一样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T17:31:53.177

宽度必须是整数。

955 的 45% 是多少？`429.75px`. 不能这样。所以其中一个必须比另一个宽。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-23T17:36:31.717

这是一个错误/亚像素问题。

[不久前我问过一个类似的问题](https://stackoverflow.com/questions/9797874/chrome-and-its-handling-of-s)，发现基于 webkit 的浏览器在百分比方面存在舍入问题。

**[这](http://css-tricks.com/percentage-bugs-in-webkit/)是 bookcasey 与我共享以回答我的问题的链接。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T17:28:17.483

不要使用百分比，如果使用，请确保总宽度增加至略低于 100%。使用 100% 时，我总是遇到溢出和错位问题。

我假设你有另一个 div 占据了剩余的 10%。所以，也许两者都尝试 44%。

# php - Cookie 未正确设置过期日期

> ID：12097030
> 
> 赞同：0
> 
> 时间：2012-08-23T17:25:27.750
> 
> 标签：php, magento, cookies

我试图设置一个 cookie 30 天，但由于某种原因，它设置后显示“会话”过期。在 Firefox 和 Chrome 上验证。我无法弄清楚我做错了什么。任何帮助表示赞赏！

这是我的代码：

```
 $name = 'db_mc';
  $value = $mc_cid . '-' . $mc_eid;
  $time = time()+3600*24*30;
  $path = '/';
  $domain = 'www.testmage.local';

  $cookie = Mage::getSingleton('core/cookie');
  $cookie->set($name,$value,$time,$path,$domain); 
```

更新：

我测试了 setcookie() 并且工作正常。所以我认为我必须使用它。有谁知道为什么 Magento 版本只为会话设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-14T05:20:09.777

Magento 的 cookie 到期日期时间始终以秒为单位，您需要以秒为单位转换您的日期或时间，然后您将相应地在 magento 中设置您的 cookie。

在 magento 中设置一个月的 Cookie：

```
$expire = strtotime(date("m/d/Y, H:i:s A", time() + 60 * 60 * 24 * 30)); 
```

输出：09/13/2015，上午 10:43:39（以当前日期计算）。

# python - Python 索引错误值不在列表中...在 .index(value) 上

> ID：12097033
> 
> 赞同：14
> 
> 时间：2012-08-23T17:25:35.637
> 
> 标签：python, list, indexing

我是 Python 的初学者，对于那些对我的帖子持负面看法的人，请离开。我只是在这里寻求帮助并尝试学习。我试图在一个简单的数据集中检查 0 和 1。这将用于定义平面图上的空隙和实体，以定义建筑物中的区域……最终，0 和 1 将与坐标交换。

我收到此错误：ValueError: [0, 3] is not in list

我只是检查一个列表是否包含在另一个列表中。

```
currentPosition's value is  [0, 3]
subset, [[0, 3], [0, 4], [0, 5], [1, 3], [1, 4], [1, 5], [2, 1], [3, 1], [3, 4], [3, 5], [3, 6], [3, 7]] 
```

这是代码片段：

```
def addRelationship(locale, subset):
    subset = []; subSetCount = 0
    for rowCount in range(0, len(locale)):
        for columnCount in range (0, int(len(locale[rowCount])-1)):
            height = len(locale)
            width = int(len(locale[rowCount]))
            currentPosition = [rowCount, columnCount]
            currentVal = locale[rowCount][columnCount]
            print "Current position is:" , currentPosition, "=", currentVal

            if (currentVal==0 and subset.index(currentPosition)):
                subset.append([rowCount,columnCount])
                posToCheck = [rowCount, columnCount]
                print "*********************************************Val 0 detected, sending coordinate to check : ", posToCheck

                newPosForward = checkForward(posToCheck)
                newPosBackward = checkBackward(posToCheck)
                newPosUp = checkUpRow(posToCheck)
                newPosDown = checkDwnRow(posToCheck) 
```

我正在使用 subset.index(currentPosition) 来检查 [0,3] 是否在子集中，但得到 [0,3] 不在列表中。怎么会？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-23T17:34:03.877

让我们展示一些抛出相同错误的等效代码。

```
a = [[1,2],[3,4]]
b = [[2,3],[4,5]]

# Works correctly, returns 0
a.index([1,2])

# Throws error because list does not contain it
b.index([1,2]) 
```

如果您只需要知道列表中是否包含某些内容，请使用这样的关键字`in`。

```
if [1,2] in a:
    pass 
```

或者，如果您需要确切的位置但不知道列表是否包含它，您可以捕获错误，这样您的程序就不会崩溃。

```
index = None

try:
    index = b.index([0,3])
except ValueError:
    print("List does not contain value") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T17:32:34.440

`subset.index(currentPosition)`评估`False`何时`currentPosition`在 的索引 0 处`subset`，因此`if`在这种情况下您的条件失败。你想要的可能是：

```
...
if currentVal == 0 and currentPosition in subset:
... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-27T06:06:48.637

为什么要把事情复杂化

```
a = [[1,2],[3,4]]
val1 = [3,4]
val2 = [2,5] 
```

检查这个

```
a.index(val1) if val1 in a else -1
a.index(val2) if val2 in a else -1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-11T16:28:56.073

我发现

```
list = [1,2,3]

for item in range(len(list)):
    print(item) 
```

不起作用，因为它从 0 开始，所以你需要写

```
for item in range(1, len(list)):
    print(item) 
```

# java - 使用 JAVA DOM 解析 XML 文件时出现 AccessControlException

> ID：12097034
> 
> 赞同：1
> 
> 时间：2012-08-23T17:25:39.107
> 
> 标签：java, xml, exception, dom, accesscontrolexception

好的，所以我正在使用 JAVA DOM 解析 XML 文件。每当程序到达它应该解析 XML 文件的地步时，我都会收到一个“AccessControlException”，说“访问被拒绝”。我已经使用 JAVA DOM 解析了许多 XML 文件，这是我第一次遇到这个异常。我究竟做错了什么？

这是 XML 文件：

```
<?xml version="1.0" encoding="UTF-8" ?>
<root>

</root> 
```

这是应该解析它的代码：

```
DocumentBuilderFactory bdf = DocumentBuilderFactory.newInstance();
        DocumentBuilder bd = bdf.newDocumentBuilder();
        Document doc = bd.parse("excersize.xml"); 
```

最后这是我得到的错误：

```
java.security.AccessControlException: access denied ("java.io.FilePermiss
ion" "\excersize.xml" "read") 
```

**编辑**

幸运的是，经过一段时间后，我使用策略文件让它工作，但是无论出于何种原因，它只有在我输入 xml 文件的完整目录时才有效

这*有效*：

```
Document doc = builder.parse("file:/B:/Programming/Java/Programs/new/excersize.xml"); 
```

但这*不是*：

```
Document doc = builder.parse("excersize.xml"); //The xml file is in the same directory as the java source file, the class file, and the html file 
```

虽然这是可以容忍的，但我确实喜欢让我的文件“移动就绪”，这样它们就没有任何具体的地址，而是相对于 .java 和 .class 文件的地址。任何帮助我解决这个问题的帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T17:41:49.107

异常说明了一切，您正在尝试访问 JVM 无法访问的文件。也许你可以看看[文档](http://java.sun.com/developer/onlineTraining/Programming/JDCBook/appA.html)

**编辑**

默认情况下，applet 不能访问客户端的文件 I/O。您需要签署您的小程序或[编辑策略文件以允许它](http://www.coderanch.com/how-to/java/HowCanAnAppletReadFilesOnTheLocalFileSystem)

# objective-c - iAd 和 AdMob 广告未在已发布的 iPhone 应用程序中显示

> ID：12097035
> 
> 赞同：1
> 
> 时间：2012-08-23T17:25:43.717
> 
> 标签：objective-c, ios, admob, iad

我用两种横幅开发了我的应用程序：iAd 和 AdMob。
当 iAd 横幅无法加载时，就会加载 AdMob 横幅。
当我测试我的应用程序时，它正确显示了黑色 iAd 测试横幅，但在应用程序的发布版本中根本没有横幅。
我已经使用网络调试代理对其进行了测试：请求仅发送到 iAd 服务器，但从不发送到 AdMob。似乎 iAd 横幅已成功加载但从未显示。在 itunesconnect 中，iAd 状态为 Live Adds。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T15:33:13.187

问题解决了。如果将来有人会遇到这个问题：在我的情况下，解决方案是耐心等待。自从两周后 AppStore 上传横幅突然出现。我认为苹果需要一些时间来根据应用程序受众生成横幅内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-23T08:23:09.447

如果您在 iAd 示例代码中使用 BannerViewController 并发现 iAd 在为 iOS5 构建时可以完美运行，但在为 iOS6 构建时不显示，则在 BannerViewController 中找到行：bannerFrame.size = [_bannerView sizeThatFits:contentFrame.size] ; 并删除下划线。我在我的 ShareMonitor 应用程序中实现了 iAD，虽然我的代码与示例代码相同，但广告只会在为 iOS5 构建时出现。经过一些调试和反复试验，我发现这解决了问题，并且我的应用程序中的广告效果很好。

# macos - 如何在 OSX 上实现 scrollWheel 弹性滚动

> ID：12097040
> 
> 赞同：1
> 
> 时间：2012-08-23T17:25:58.930
> 
> 标签：macos, nsscrollview, nsevent

我正在尝试创建一个自定义视图，它类似于 NSScrollView，但基于 CoreAnimation CAScrollLayer/CATiledLayer。基本上，我的应用程序需要大量近乎实时的 CGPath 绘图，并使用形状图层为这些路径设置动画（类似于 GarageBand 在录制时设置动画的方式）。我创建的第一个原型使用 NSScrollView，但我无法获得超过 20 帧/秒（原因是 NSRulerView 每次滚动事件发生时都会通过绘制更新，整个调用流程从 -[NSClipView scrollToPoint] 到 -[ NSScrollView reflectScrolledClipView:] 非常昂贵且效率低下）。

我创建了一个自定义视图，它使用 CAScrollLayer 作为滚动机制，使用 CATiledLayer 作为传统的 documentView（用于无限滚动选项），现在我可以接近 60fps。但是，我很难实现 scrollWheel 弹性滚动，而且我不知道该怎么做。这是我到目前为止的代码，如果有人能告诉我如何实现弹性滚动，我将不胜感激。

```
-(void) scrollWheel:(NSEvent *)theEvent{
    NSCAssert(mDocumentScrollLayer, @"The Scroll Layer Cannot be nil");
    NSCAssert(mDocumentLayer, @"The tiled layer cannot be nil");
    NSCAssert(self.layer, @"The base layer of view cannot be nil");
    NSCAssert(mRulerLayer, @"The ScrollLayer for ruler cannot be nil");

    NSPoint locationInWindow = [theEvent locationInWindow];
    NSPoint locationInBaseLayer = [self convertPoint:locationInWindow
                                        fromView:nil];

    NSPoint locationInRuler = [mRulerLayer convertPoint:locationInBaseLayer
                                          fromLayer:self.layer];
    if ([mRulerLayer containsPoint:locationInRuler]) {
       return;
    }
    CGRect docRect = [mDocumentScrollLayer convertRect:[mDocumentLayer bounds]
                                             fromLayer:mDocumentLayer];

    CGRect scrollRect = [mDocumentScrollLayer visibleRect];
    CGPoint newOrigin = scrollRect.origin;

    CGFloat deltaX = [theEvent scrollingDeltaX];
    CGFloat deltaY = [theEvent scrollingDeltaY];

    if ([self isFlipped]) {
     deltaY *= -1;
    }

    scrollRect.origin.x -= deltaX;
    scrollRect.origin.y += deltaY;

    if ((NSMinX(scrollRect) < NSMinX(docRect)) ||
        (NSMaxX(scrollRect) > NSMaxX(docRect)) ||
        (NSMinY(scrollRect) < NSMinY(docRect)) ||
        (NSMaxY(scrollRect) > NSMaxX(docRect))) {
        mIsScrollingPastEdge = YES;
        CGFloat heightPhase = 0.0;
        CGFloat widthPhase  = 0.0;
        CGSize size = [self frame].size;

    if (NSMinX(scrollRect) < NSMinX(docRect)) {
        widthPhase = ABS(NSMinX(scrollRect) - NSMinX(docRect));
    }

    if (NSMaxX(scrollRect) > NSMaxX(docRect)) {
        widthPhase = ABS(NSMaxX(scrollRect) - NSMaxX(docRect));
    }

    if (NSMinY(scrollRect) < NSMinY(docRect)) {
        heightPhase = ABS(NSMinY(scrollRect) - NSMinY(docRect));
    }

    if (NSMaxY(scrollRect) > NSMaxY(docRect)) {
        heightPhase = ABS(NSMaxY(scrollRect) - NSMaxY(docRect));
    }

    if (widthPhase > size.width/2.0) {
        widthPhase = size.width/2.0;
    }

    if (heightPhase > size.width/2.0) {
        heightPhase = size.width/2.0;
    }

    deltaX = deltaX*(1-(2*widthPhase/size.width));
    deltaY = deltaY*(1-(2*heightPhase/size.height));
}

newOrigin.x -= deltaX;
newOrigin.y += deltaY;

if ( mIsScrollingPastEdge &&
    (([theEvent phase] == NSEventPhaseEnded) ||
     ([theEvent momentumPhase] == NSEventPhaseEnded)
     )
    ){
    CGPoint confinedScrollPoint = [mDocumentScrollLayer bounds].origin;
    mIsScrollingPastEdge = NO;
    CGRect visibleRect = [mDocumentScrollLayer visibleRect];

    if (NSMinX(scrollRect) < NSMinX(docRect)){
        confinedScrollPoint.x = docRect.origin.x;
    }

    if(NSMinY(scrollRect) < NSMinY(docRect)) {
        confinedScrollPoint.y = docRect.origin.y;
    }

    if (NSMaxX(scrollRect) > NSMaxX(docRect)) {
        confinedScrollPoint.x = NSMaxX(docRect) - visibleRect.size.width;
    }

    if (NSMaxY(scrollRect) > NSMaxY(docRect)){
        confinedScrollPoint.y = NSMaxY(docRect) - visibleRect.size.height;
    }

    [mDocumentScrollLayer scrollToPoint:confinedScrollPoint];
    CGPoint rulerPoint = [mRulerLayer bounds].origin;
    rulerPoint.x = [mDocumentLayer bounds].origin.x;
    [mRulerLayer scrollToPoint:rulerPoint];
    return;
}

CGPoint rulerPoint = [mDocumentScrollLayer convertPoint:newOrigin
                                                toLayer:mRulerLayer];
rulerPoint.y = [mRulerLayer bounds].origin.y;

if (!mIsScrollingPastEdge) {
    [CATransaction setDisableActions:YES];
    [mDocumentScrollLayer scrollToPoint:newOrigin];
    [CATransaction commit];
}else{
    [mDocumentScrollLayer scrollToPoint:newOrigin];
    [mRulerLayer scrollToPoint:rulerPoint];
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T17:56:58.073

[在https://github.com/twitter/twui](https://github.com/twitter/twui)查看 TUIScrollView 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-07T20:15:31.333

添加 ElasticScrolling 的核心概念是使用 SpringSolver。

这有一个可以重复使用的 ElasticScrollView：
[https ://github.com/eonist/Element](https://github.com/eonist/Element)

# asp.net - TextBox 的文本未从 upload_complete 事件处理程序中更改

> ID：12097045
> 
> 赞同：0
> 
> 时间：2012-08-23T17:26:08.460
> 
> 标签：asp.net, vb.net, ajaxcontroltoolkit, asyncfileupload

我在 AsyncFileUpload 的上传完成事件处理程序中有以下代码：

```
Protected Sub AsyncFileUpload1_UploadedComplete(ByVal sender As Object, ByVal e As AjaxControlToolkit.AsyncFileUploadEventArgs) Handles AsyncFileUpload1.UploadedComplete

    Dim oapp As Excel.Application
    Dim oWBa As Excel.Workbook
    Dim oWS As Excel.Worksheet
    Dim oRng As Excel.Range
    oapp = New Excel.Application
    AsyncFileUpload1.PostedFile.SaveAs(Server.MapPath("tempfile2.xlsx"))
    oWBa = oapp.Workbooks.Open(Server.MapPath("tempfile2.xlsx"))
    oWS = DirectCast(oWBa.Worksheets(2), 
    Excel.Worksheet)
    'Here tns is a textbox contained in a panel
    tns.Text = Integer.Parse(oWS.Range("W44").Value) + Integer.Parse(oWS.Range("W55").Value)
    oWBa.Close()

    File.Delete(Server.MapPath("tempfile2.xlsx"))
End Sub 
```

tns 的 autopostback 属性打开了，为什么上传文件时它不改变它的文本？此外，读取 excel 文件的逻辑也没有错误问题，因为我已经使用 VS 2010 和 Uptil 行 tns.text ... 对其进行了调试，我在手表中得到了正确的值。那么我该如何解决呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T11:50:30.287

用下面的代码替换`tns.Text`属性的设置：`AsyncFileUpload1_UploadedComplete`

```
var resultString = Integer.Parse(oWS.Range("W44").Value) + Integer.Parse(oWS.Range("W55").Value);
ScriptManager.RegisterClientScriptBlock(this, this.GetType(), "result", "top.$get(\"" + tns.ClientID + "\").value = '" + resultString + "';", true); 
```

PS 这个解决方法以及您可以在可从 codeplex 下载的 AjaxControlToolkit 示例站点中找到的许多其他解决方法

# html - 接收大量数据时防止浏览器超时

> ID：12097047
> 
> 赞同：2
> 
> 时间：2012-08-23T17:26:22.143
> 
> 标签：html, browser, timeout

我有一个由我的一个客户使用的管理界面，当通过 Web 界面启动进程时，服务器会在后端服务器上处理大量记录。然后，网页仅使用简单的 HTML（不是任何 AJAX 或其他 JS）更新来提供更新，如下所示：

```
Processing All Records: 
000000 to 000099: ....................................................................................................
000100 to 000199: ....................................................................................................
//... More Records Processed Here ...
009700 to 009799: ....................................................................................................
009800 to 009899: ..............................
Data processing complete: 9830 total records processed 
```

此处理可能需要一个多小时。在我使用的浏览器（IE 和 Crome）中，页面继续接收更新并在处理它们时显示它们。 **问题是**，对于我的客户（使用多个浏览器和计算机），他的屏幕在几分钟后停止显示更新，即使他等到处理应该完成（让他的浏览器在一夜之间打开），他永远不会收到“数据处理完成”通知。基本上，他的浏览器只是超时，即使处理在服务器上继续并且该过程确实完成。

HTML 输出（使用经典的 ASP...我知道，ugg）`Response.Write(".")`在处理每条记录后通过简单的方式完成。除了标准的 HTML`<head>` `</head>` `<body>` `</body>`标记之外，没有应用其他格式并且所有 Response.Writes 都在正文中完成（因此浏览器不会等待正文标记以外的任何结束标记）。

我意识到我可以重写代码并使用一些花哨的 JS 和 AJAX 调用进行更新，或者转移到具有电子邮件更新的异步服务，但我想找到不需要我太多更改代码的最简单的解决方案。

所以，我的问题是，**当我测试的所有浏览器继续接收数据时，他的浏览器/网络中的什么设置会导致他的浏览器超时**？

如果有帮助，这里是输出的原始 HTML：

```
<html>
<head>
<title></title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<LINK rel="stylesheet" type="text/css" href="\css\normal.css">
</head>
<body>
Initiating data retreival at: 8/23/2012 11:02:59 AM<br>
<hr>
Processing All Records: 
<br>000000 to 000099:....................................................................................................
<br>000100 to 000199:....................................................................................................
<br>000200 to 000299:....................................................................................................
<!-- More Lines Here -->
<br>009800 to 009899:..............................<hr>
Data import complete: 9830 total records processed<br>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T17:40:48.963

没有可靠的、明确定义的方法来做到这一点，因为这完全取决于浏览器、网络连接、路由器、操作系统……与其希望你幸运，不如控制情况。

最简单的方法是重构一个处理一小批项目的脚本，然后继续使用 AJAX 获取该脚本（保持偏移），直到它报告它已完成。这比希望找到一些魔法技术更强大和定义明确，据你所知，未来可能会改变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T17:40:34.407

浏览器在缓存方面依赖于 RAM 和共享内存。尝试你的代码限制宽度和高度，基于表格

```
<table style='table-layout:fixed'> 
```

这将允许浏览器在不尝试重新计算每个新行添加的宽度的情况下呈现表格

此外，基于 GTK 的浏览器可以帮助您达到您的目的 # 例如，juniper-browser、NetFront 等。

# makumba - Makumba - 选择子集中的第一个值

> ID：12097048
> 
> 赞同：2
> 
> 时间：2012-08-23T17:26:25.490
> 
> 标签：makumba

我正在尝试为所有 LBG 选择由 LBG 组织的最新活动。

目前我的代码如下所示：

```
 <mak:list from="r2.lbgs l" orderBy="l.lbg.name" where="l.toDate = nil and l.lbg.status = 2">
    <tr>
      <td><mak:value expr="l.lbg.name" /></td>
      <td>
      <mak:list from="best.johnny.Activity a" where="a.lbg = l.lbg" orderBy="a.end desc">
        <c:if test="${mak:count()==1}">
          <mak:value expr="a.season.name" />
        </c:if>
      </mak:list>
      </td>
      <td>
      <mak:list from="best.johnny.Activity a" where="a.lbg = l.lbg and a.isLearningEventStamped = 0" orderBy="a.end desc">
        <c:if test="${mak:count()==1}">
          <mak:value expr="a.season.name" />
        </c:if>
      </mak:list>
      </td>
    </tr>
  </mak:list> 
```

我想问一下 makumba 是否足够“聪明”并且只检索第一个条目，或者整个集合是否被枚举。第一种情况会很棒，否则还有更充分的方法吗？- 我什么也找不到。

谢谢

彼得

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T17:46:12.290

不幸的是，目前这是唯一的方法，因为您有一个嵌套列表。正如它在[文档](http://www.makumba.org/page/ListTag)中所说，有一个限制属性，但它只适用于第一个列表。

# math - 如何将一个长方形薄片切成两半？

> ID：12097049
> 
> 赞同：1
> 
> 时间：2012-08-23T17:26:26.033
> 
> 标签：math, geometry, logic

我们有矩形片材，并在 RANDOM 位置在其中切出一个小矩形片。如何使该表成为完全相同的两半？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T11:17:23.550

如果你从一个矩形的中心进行切割，无论以什么角度，这个矩形都会被分成两半。

因此，如果我们通过剪切矩形的中心进行剪切，则剪切的每一侧将具有剪切区域的 50%。如果我们 - 同时 - 切过大矩形的中心，这应该可以做到。切口的两边都有大矩形面积的一半，减去切口大小的一半。

![在此处输入图像描述](../Images/c39c49820c77f13b25524426db49bc5f.png)

当然，如果“完全相同的两半”是指*相同的面积*，但不一定是*相同的形状*。后者通常是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T09:33:39.603

经过一番思考，我认为这是正确的答案。

我们必须多次折叠纸张，使其形成小矩形区域的矩形。

如果我们把折叠的切掉，它肯定应该给 2 个相等的部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T11:08:55.947

回复：折叠 - 将不起作用，因为您很容易以两个以上的部分切割折叠的矩形。

我会尝试蛮力方法。如果孔与大矩形同向，您可以沿其中一个边缘切割，并且只有三种情况需要检查： 1 尝试在孔上方切割 - 如果无法以相同区域的一半结束，请尝试 2​​ 切割穿过孔 - 如果仍然不可能，在孔下方切割 3 次肯定可以做到。顺便说一句，1 和 3 的代码将非常相似。所有 3 种情况都是切割高度的简单线性方程。例如，1：

```
+----W---+
d        |
+--------+
|        |
|  +-w-+ |
H  h   | |
|  +---+ |
|        |
|        | 
+--------+ 
```

我们有 d * W = (H - d) * W - h * w

如果该方程中的 d 不在孔上方，则转到案例 2，依此类推。

# java - Wicket - 使用 AJAX 和 Wicket 模型更新 ListView

> ID：12097060
> 
> 赞同：0
> 
> 时间：2012-08-23T17:27:06.470
> 
> 标签：java, html, ajax, wicket

我有一个 ：

*   客户端类
*   列表显示
*   文本域

我需要填充我的 ListView 以形成表格：

工作代码：

```
clientModel = new LoadableDetachableModel() {

            @Override
            protected Object load() {

                return Client.getClientListByCompanyName(searchClientInput.getValue());
            }
        };

        searchClientInput.setModel(new Model<String>());

        searchClientInput.add(new AjaxFormComponentUpdatingBehavior("onkeyup") {

            @Override
            protected void onUpdate(AjaxRequestTarget target) {

                target.add(clientListViewContainer);
            }
        });

        clientListView = new ListView<Client>(CLIENT_ROW_LIST_ID, clientModel) {

            @Override
            protected void populateItem(ListItem<Client> item) {

                Client client = item.getModelObject();

                item.add(new Label(CLIENT_ROW_COMPANY_CNPJ_ID, client.getCompanyName()));
                item.add(new Label(CLIENT_ROW_COMPANY_NAME_ID, client.getCompanyCnpj()));
            }
        };

        clientListViewContainer.setOutputMarkupId(true);

        clientListViewContainer.add(clientListView);

        add(clientListViewContainer); 
```

现在，在我的 HTML 中，我有一个 TextField。每当用户在此 TextField 中键入内容时，都会在数据库中使用他键入的任何内容进行选择。因此，对于每个单词，都会进行一次选择，并且需要更新表格。我猜我将需要使用 AJAX 和可能的模型。我对如何做到这一点有点迷茫，如果有人能给我提供例子，我将非常感激。

编辑：抛出异常的新代码：`Last cause: Attempt to set model object on null model of component: searchClientForm:searchClientInput`

编辑 2：好的，例外是我的 TextField 没有将数据绑定到的模型。所以我所做的是：`searchClientInput.setModel(new Model<String>());`

我也有这个事件的问题。使用`onkeydown`工作正常，但未达到预期。我有公司名称 1-4。如果我输入公司名称 1，我需要再次按一个键，以便更新表格。`onkeyup`不会发生这种情况。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T05:34:27.943

您可以为 ListView 提供一个 LoadableDetachableModel，它提供与您的 TextField 值匹配的选定客户端。

在 TextField 上使用 AjaxFormComponentUpdatingBehavior 将 ListView 的父级添加到请求目标（不要忘记#setOutputMarkupId()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T16:07:21.930

我相信执行所需操作的最佳方法（即在每次输入更改时重新绘制表/列表-> DB 访问）是使用 DataView 和 DataProvider。

DataView 与 ListView 组件类似，只是它使用 IDataProvider 来获取您想要呈现的数据。您可以实现 DataProvider 以便它访问您的数据库，并且您可以`where`向 DataProvider 添加限制（子句）。

*[这更像是伪代码]*

```
public final class MyDataProvider<T> extends SortableDataProvider<T> {
// ...
Set filters; 
// filters is the set where the restrictions you want to apply are stored

...
@Override
public Iterator<T> iterator(int first, int count) {
    // DAO (Data Access Object) access to DB
    // ...
    return dao.findByRestrictions(filters).iterator();
}
...
} 
```

*现在，在输入*组件上的 ajax 事件上，您可以更新 DataProvider 中使用的过滤器，并且在 DataView 的下一次重绘中，提供程序将“*拉*”匹配过滤器中定义的限制的数据。

希望能帮助到你。最好的祝福。

# apache - 像这样重写 URL 的条件

> ID：12097061
> 
> 赞同：0
> 
> 时间：2012-08-23T17:27:07.250
> 
> 标签：apache, .htaccess, mod-rewrite

我如何着手编写 mod_rewrite 的条件以使这个例子发生？

有这样的网址...

```
http://domain.com/recent/5 
```

渲染此页面...

```
http://domain.com/index.php?view=recent&page=5 
```

如果没有指定页码（注意我希望它可以使用或不使用尾部斜杠）......

```
http://domain.com/recent/ 
```

它将默认为第 1 页...

```
http://domain.com/index.php?view=recent&page=1 
```

但是当有人刚刚进入根域时......

```
http://domain.com 
```

我希望这个页面呈现...

```
http://domain.com/index.php?view=popular&page=1 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T18:03:39.750

将其放入文档根目录的 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]+)/([0-9]+) /index.php?view=$1&page=$2 [L,QSA]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]+)/?$ /index.php?view=$1 [L,QSA]
RewriteRule ^$ /index.php?view=popular&page=1 [L,QSA] 
```

# java - 如何使用终止linux中的java代码

> ID：12097069
> 
> 赞同：-5
> 
> 时间：2012-08-23T17:27:30.913
> 
> 标签：java, linux

我正在使用命令 java -jar Code.jar 运行 java 代码...我现在想终止程序，如何使用命令行 Linux 结束程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T17:28:25.407

通常按下`Ctrl+C`将终止应用程序。

您还可以找到进程的进程 ID（用于[`ps`](http://linux.die.net/man/1/ps)查看正在运行的进程列表），然后使用[`kill`](http://linux.die.net/man/1/kill)命令终止进程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T22:58:42.490

您有几个不同的选项，其中一些已被涵盖。由于您不在有问题的机器上，因此显然不能使用 ctrl+c 。

您可以使用 ps (ps -ef|grep ) 手动识别 pid，然后使用上述 kill 杀死它

但我更喜欢 pkill 如果它在系统上可用。pkill 命令将在进程树中搜索您指定的内容并将其杀死。它与 killall 命令类似，但是 pkill 正在 grepping 进程扩展属性，其中 killall 仅适用于进程名称。在这种情况下，您的进程是 java，但您可能不想只杀死特定的 java 的所有实例，因此使用 pkill 您可以使用 jar 文件的名称。

pkill 代码.jar

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T17:29:22.813

您可以尝试使用`Ctrl-C`或关闭**终端**..

# c - 以下代码中运行时错误（其他）的原因是什么

> ID：12097070
> 
> 赞同：2
> 
> 时间：2012-08-23T17:27:44.453
> 
> 标签：c, runtime-error

我试图解决在线法官的问题（ [http://www.codechef.com/BTCD2012/problems/DOORS ）。](http://www.codechef.com/BTCD2012/problems/DOORS)以下是问题的代码。当我提交时，法官给出了运行时错误（其他）。我是否使用了太多内存，如果是这样，请帮助我找到其他方法，因为内存已根据给定的约束使用.

约束如下：

0< t1 <1000000;

0<数量<100000000;

```
#include<stdio.h>
int a[100000001];
int main()
{

    int  t=3,j,k1,g,k=1,m,n=0,i,t1,num;
    for(i=1;i<10000;i++)
    {
        m=i*i;
        n=n+t;
        for(j=m;j<=n;j++)
        {
            a[j]=k;
        }
        k++;
        t=t+2;
        // printf("a[%d]--> %d\n",n,a[n]);
   }

   scanf("%d",&t1);

   for(k1=0;k1<t1;k1++)
   {
       scanf("%d",&num);
       printf("%d\n",a[num]);
   }
   getch();
   // return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T19:48:41.847

```
int a[100000001]; 
```

这行是问题所在，它在静态分配区分配了太多内存！如建议的那样，您可以使用 malloc() 在堆上分配此内存。

更精简的方法是使用一组**位**[每个位代表一扇门，您只需打开和关闭它们以表示门的打开或关闭状态]。实现起来会有点棘手，但你的程序会更精简（至少 16 次，C int 至少是 2 个字节，16 位）并且更快！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T19:07:22.740

该行：

```
int a[100000001]; 
```

尝试在堆栈上分配 381.5 MB 的内存。这很可能对于运行时来说太大而无法处理，因此程序将被终止。

你真的需要那么多整数吗？

如果您确实需要那么多内存，请尝试在堆中分配它：

将全局更改为指针：

```
int *a; 
```

在开始时`main()`

```
a = malloc(sizeof(int)*100000001);
if(!a)
{
   printf("Could not allocate contiguous block\n");
   return -1;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T07:13:43.887

嘿，首先是好问题:-)为此“+1”。现在回答您的问题，如果您确定需要这么多内存，那么动态分配内存始终是一个好习惯。尝试. `malloc`_ `variable a`你`int`使用了多少字节？如果`unsigned long long`您确定不需要任何`signed bits`.

```
unsigned int* a ;
a = malloc( sizeof(int) * 100000001 ) ; 
```

上面的答案和评论太有用了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-05T10:53:22.153

试试这个算法..：尝试找出 1 和 n 之间有多少个完美正方形。完美正方形有奇数个倍数，我认为这将是答案。假设 n = 1000，1 之间只有 31 个完美正方形到1000。所以，她离开后打开的门数= 31。

# javascript - 我想将带有空白值的 asp.net 标签设置为“ " 使用 javascript/jQuery

> ID：12097071
> 
> 赞同：0
> 
> 时间：2012-08-23T17:27:51.383
> 
> 标签：javascript, jquery, asp.net

我们的网站中有代码，可以将数据库中存储的内容与用户在文本框中键入的内容进行比较。此功能按原样工作。但是，我想添加一些代码来设置一个显示在“lbl_hiredate_change”中的空字符串值，并将其设置为等于字符串“blank”。我在下面的代码中添加了带有注释“//我的添加”的 if 语句。有人可以建议一些可行的方法（这不行）。我只想在运行时将“”转换为“空白”，并且不希望将其保存在数据库中。

谢谢，布拉德。

ASP.NET 代码：

```
<div>    
    <asp:TextBox  ID="tb_hiredate" CssClass="showOriginal required date" 
     title="Please enter the date this person was hired" runat="server"></asp:TextBox>
    <asp:Panel ID="show_hiredate_changed" CssClass="showOriginalLine" runat="server">
      (was: <asp:Label ID="lbl_hiredate_changed" CssClass="showOriginalValue was-label" runat="server"></asp:Label>)
    </asp:Panel>
</div> 
```

Javascript：

```
$(document).ready(function () {
    $('input.showOriginal').change(function (e) {
        showOriginal($(this));
    });
});

function showOriginal(theControl) {
var thePanel = theControl.siblings('.showOriginalLine');
var theWasLabel = thePanel.find('.showOriginalValue');
if (theControl.val() == theWasLabel.html()) {
    thePanel.css('display', 'none');
}
else {
    //my addition.
    if ($('.was-label').val() == '') {
        $(this).val('blank');
    }
    thePanel.css('display', 'block');
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T17:31:22.003

使用`text()`而不是`val()`阅读更多关于[**val()**](http://api.jquery.com/val/)，[**text()**](http://api.jquery.com/text/)，[**html()**](http://api.jquery.com/html/)

```
 if (theWasLabel.text() == '') 
 { 
   theWasLabel.text('blank');
 } 
```

# javascript - Javascript使用按钮更改变量

> ID：12097080
> 
> 赞同：1
> 
> 时间：2012-08-23T17:28:28.077
> 
> 标签：javascript, jquery

我正在尝试使用 jquery 使按钮打开另一个窗口。

该按钮应该能够打开窗口。然后应该使用相同的按钮来关闭窗口。我似乎遇到的问题是按钮打开窗口后没有设置我的变量。我对javascript和jquery真的很陌生，所以我不确定我是否做错了什么。

```
<html>
  <head>
   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript"> 
      var FileEdit = 0;
      $(document).ready(function(){
        if (FileEdit == 0)
        {
           $("button").click(function(){
             $("div").animate({opacity:0.4},"fast");
             $("div").animate({height:300,width:300},"slow");
             $("div").animate({opacity:1},"slow");
             FileEdit = 1;
           });
        }  
        if (FileEdit == 1)
        {
             $("button").click(function(){
                $("div").animate({height:000,width:000},"slow");
                FileEdit = 0;
             });
        }
      });
    </script> 
  </head>

     <body>
       <button>Start Animation</button>
       <br /><br />
       <div style="background:#98bf21;height:000px;width:000px;">
       </div>
    </body>
</html> 
```

[http://jsfiddle.net/tqpTE/](http://jsfiddle.net/tqpTE/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T17:31:44.517

[**jsFiddle 演示**](http://jsfiddle.net/tqpTE/4/)

```
var FileEdit = 0;

$("button").on('click', function(){

    // You only need one on('click') function
    // Test for FileEdit here & do whatever you need

    if (FileEdit === 0) { 

        // Also having those 3 animations right in a row won't make them
        // go one - after - another. You need to use callback functions
        // to start the next animation after the previous one finished.

        $("div").animate({opacity:0.4},"fast", //callback1
            function () { $(this).animate({height:300,width:300},"slow", //callback2
                function () { $("div").animate({opacity:1},"slow"); }
            )}
        );
        FileEdit = 1;
    }

    else { 
         $("div").animate({height:000,width:000},"slow");
         FileEdit = 0;
    }
}); 
```

[有关 .animate() 回调函数的更多信息](http://api.jquery.com/animate/#complete)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T17:36:17.730

您的条件需要在每次点击时运行 - 而不是一次，在 DOM 准备好时，就像目前一样。另请注意，您的代码可以大大减少为以下内容：

```
var fileEdit = 0;
$(function(){
    $("button").on('click', function() {
        var anim_data = !fileEdit ? {width: 300, height: 300} : {width: 0, height: 0};
        $("div").animate(anim_data, 'slow');
        fileEdit = !fileEdit ? 1 : 0;
    });
}); 
```

几点注意事项：

1) 您似乎对不透明度进行了两次动画处理（一次为 0.4，同时为 1），因此，出于本演示的目的，我完全删除了对它的引用。

`fadeIn()`2) 除非您需要将动画设置为部分不透明度（而不是 0 或 1），否则使用 jQuery和`fadeOut()`方法会更容易。

3) 设置`width: 000`同`width: 0`。

4) 避免在 var 名称中使用大写字母 - 大写字母通常用于表示构造函数。

5)使用双等号测试`0`和值时要小心，因为[真值/假值的概念会让](http://www.mitya.co.uk/blog/2011/Apr/Twisted-logic-understanding-truthy-and-falsy-174)你感到惊讶。在不确定的情况下，使用not进行测试总是最安全的。`1``===``==`

6) 虽然没`click`问题，但 jQuery 1.7 引入了对其混乱事件 API 的整理，因此您现在可以使用`on()`and `off()`. `click()`和其他只是在幕后委托给`on()`.

# android - Android Bundle - 启动 Activity 并将包设置为 Null

> ID：12097087
> 
> 赞同：0
> 
> 时间：2012-08-23T17:28:59.773
> 
> 标签：android, bundle

我正在尝试启动一个 Activity，其中包括 Bundles。我现在正在尝试将此捆绑包设置为空，因为尚未将任何内容传递给此活动。

```
public class DailyActivities  extends Activity implements OnClickListener{
     TextView scoreA
    int gotA;
    int counter_score;

@Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
          counter_score=0;
          int questions_1 = 26;

        initialize();

          ///////PSEUDO CODE...this is where Im trying to say, if no bundled is passed,
          ////////then setText for scoreA to the int counter score, 
           ////////so that the activity doesn't crash due to null pointer exception////
        Bundle gotA = getIntent().getExtras();
        if(gotA == null){ 
        scoreA.setText(counter_score);
          }else if (gotA != null){
        gotLetterA = gotA.getInt("key");
         counter_score = gotLetterA;
         int percentage = (int)( gotLetterA * 100.0 / questions_1 + 0.5);
         scoreA.setText(percentage);

   }   
} 
```

当前活动因 android.resources not found 错误而崩溃

**编辑添加的错误日志**

> 08-24 10:39:33.180: E/AndroidRuntime(21177): 致命异常: main 08-24 10:39:33.180: E/AndroidRuntime(21177): java.lang.RuntimeException: 无法启动活动 ComponentInfo{com. test.app/com.test.app.DailyActivities}：android.content.res.Resources$NotFoundException：字符串资源 ID #0x0 08-24 10:39:33.180：E/AndroidRuntime(21177)：在 android.app.ActivityThread .performLaunchActivity(ActivityThread.java:2059) 08-24 10:39:33.180: E/AndroidRuntime(21177): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084) 08-24 10:39:33.180: E /AndroidRuntime(21177): 在 android.app.ActivityThread.access$600(ActivityThread.java:130) 08-24 10:39:33.180: E/AndroidRuntime(21177): 在 android.app.ActivityThread$H.handleMessage(ActivityThread .java:1195) 08-24 10:39:33.180: E/AndroidRuntime(21177): 在 android.os。Handler.dispatchMessage(Handler.java:99) 08-24 10:39:33.180: E/AndroidRuntime(21177): 在 android.os.Looper.loop(Looper.java:137) 08-24 10:39:33.180: E/AndroidRuntime(21177): 在 android.app.ActivityThread.main(ActivityThread.java:4745) 08-24 10:39:33.180: E/AndroidRuntime(21177): 在 java.lang.reflect.Method.invokeNative(Native方法) 08-24 10:39:33.180: E/AndroidRuntime(21177): at java.lang.reflect.Method.invoke(Method.java:511) 08-24 10:39:33.180: E/AndroidRuntime(21177) : 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786) 08-24 10:39:33.180: E/AndroidRuntime(21177): 在 com.android.internal.os.ZygoteInit.main (ZygoteInit.java:553) 08-24 10:39:33.180: E/AndroidRuntime(21177): at dalvik.system.NativeStart.main(Native Method) 08-24 10:39:33.180: E/AndroidRuntime(21177) : 原因：android.content.res.Resources$NotFoundException: 字符串资源 ID #0x0 08-24 10:39:33.180: E/AndroidRuntime(21177): at android.content.res.Resources.getText(Resources.java:229) 08- 24 10:39:33.180: E/AndroidRuntime(21177): 在 android.widget.TextView.setText(TextView.java:3620) 08-24 10:39:33.180: E/AndroidRuntime(21177): 在 com.MovilTeacher_titan。 app.DailyActivities.onCreate(DailyActivities.java:164) 08-24 10:39:33.180: E/AndroidRuntime(21177): 在 android.app.Activity.performCreate(Activity.java:5008) 08-24 10:39: 33.180: E/AndroidRuntime(21177): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079) 08-24 10:39:33.180: E/AndroidRuntime(21177): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread .java:2023)字符串资源 ID #0x0 08-24 10:39:33.180: E/AndroidRuntime(21177): at android.content.res.Resources.getText(Resources.java:229) 08-24 10:39:33.180: E/AndroidRuntime (21177): 在 android.widget.TextView.setText(TextView.java:3620) 08-24 10:39:33.180: E/AndroidRuntime(21177): 在 com.MovilTeacher_titan.app.DailyActivities.onCreate(DailyActivities.java: 164) 08-24 10:39:33.180: E/AndroidRuntime(21177): 在 android.app.Activity.performCreate(Activity.java:5008) 08-24 10:39:33.180: E/AndroidRuntime(21177): 在android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079) 08-24 10:39:33.180: E/AndroidRuntime(21177): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)字符串资源 ID #0x0 08-24 10:39:33.180: E/AndroidRuntime(21177): at android.content.res.Resources.getText(Resources.java:229) 08-24 10:39:33.180: E/AndroidRuntime (21177): 在 android.widget.TextView.setText(TextView.java:3620) 08-24 10:39:33.180: E/AndroidRuntime(21177): 在 com.MovilTeacher_titan.app.DailyActivities.onCreate(DailyActivities.java: 164) 08-24 10:39:33.180: E/AndroidRuntime(21177): 在 android.app.Activity.performCreate(Activity.java:5008) 08-24 10:39:33.180: E/AndroidRuntime(21177): 在android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079) 08-24 10:39:33.180: E/AndroidRuntime(21177): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)180: E/AndroidRuntime(21177): 在 android.widget.TextView.setText(TextView.java:3620) 08-24 10:39:33.180: E/AndroidRuntime(21177): 在 com.MovilTeacher_titan.app.DailyActivities.onCreate (DailyActivities.java:164) 08-24 10:39:33.180: E/AndroidRuntime(21177): 在 android.app.Activity.performCreate(Activity.java:5008) 08-24 10:39:33.180: E/AndroidRuntime (21177): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079) 08-24 10:39:33.180: E/AndroidRuntime(21177): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)180: E/AndroidRuntime(21177): 在 android.widget.TextView.setText(TextView.java:3620) 08-24 10:39:33.180: E/AndroidRuntime(21177): 在 com.MovilTeacher_titan.app.DailyActivities.onCreate (DailyActivities.java:164) 08-24 10:39:33.180: E/AndroidRuntime(21177): 在 android.app.Activity.performCreate(Activity.java:5008) 08-24 10:39:33.180: E/AndroidRuntime (21177): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079) 08-24 10:39:33.180: E/AndroidRuntime(21177): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)在 android.app.Activity.performCreate(Activity.java:5008) 08-24 10:39:33.180: E/AndroidRuntime(21177): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079) 08-24 10 :39:33.180: E/AndroidRuntime(21177): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)在 android.app.Activity.performCreate(Activity.java:5008) 08-24 10:39:33.180: E/AndroidRuntime(21177): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079) 08-24 10 :39:33.180: E/AndroidRuntime(21177): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)

Sooooo这里是解决方案，我很密集哈哈

```
Bundle gotA = getIntent().getExtras();{ 
if(gotA == null){ scoreA.setText("0%"); 
}else { 
myPkg = gotA.getInt("key"); 
counter_score = myPkg; 
int percentage = (int)( myPkg * 100.0 / questions_1 + 0.5);

scoreA.setText(""+percentage); 
} 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T18:15:22.220

百分比是一个整数。您对 setText(percentage) 的调用需要资源 ID，而不是百分比值。

试试这个：setText(""+percentage)。

这会将百分比转换为字符串并将其传递给 setText()。

ps WOUNDEDSteveJones 也是对的，你需要调用 findViewById()，但我猜你在某个地方有这个，否则这个应用程序会以不同的方式崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T17:42:13.663

看起来您从未将 scoreA 分配给该文本字段。

您需要`scoreA = (TextView) findViewById(R.id.score);`在引用之前添加类似的内容。

# c++ - c++中整数的变化

> ID：12097092
> 
> 赞同：2
> 
> 时间：2012-08-23T17:29:23.767
> 
> 标签：c++

这对你来说很容易。我正忙于使用 c++ 进行测试。我有 2 个值：

```
0 and 1 
```

我可以找到之间的随机数。现在我想在他们之间交替。如果我在第一步中得到“1”，那么在第二步中我想得到“0”，在第三步中再次得到“1”，它会交替出现

```
step1 = 1
step2 = 0
step3 = 1
step4 = 0 
```

我尝试了递增和递减

```
 int value;
  if(value == 0)
  {   
      value = value + 1;
  }
  else if(value == 1)
  {
      value = value -1;
  } 
```

此代码不起作用。如果它看到 0，它将变为 1，但下一步该值将再次变为 1。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T17:39:21.913

如果你真的只需要 0 和 1：

```
unsigned int value = 0;

while (1) {
   value = (value + 1) & 1;
   // do whatever is needed with value;
} 
```

这是有效的，因为在二进制 0 + 1 = 1 和 1 + 1 = 10 中。'& 1' 部分告诉我们总是取最后一位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T17:33:17.200

疯狂猜测：您正在使用浮点类型（`double`或`float`）来表示这些数字。您无法使用`==`运算符比较这些类型，您需要考虑它们的精度。

看看这个关于[如何比较浮点类型](https://stackoverflow.com/questions/17333/most-effective-way-for-float-and-double-comparison)的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T17:36:16.623

用你的 if 语句放入一个 bool 开关，例如

```
bool firstHit = false;
if(value == 0 && firstHit == false)
{   
  value = value + 1;
  firstHit = true;
}
else if(value == 1 &&firstHit == true)
{
  value = value -1;
  firstHit = false;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T17:40:46.637

你的代码很好，伙计。我测试了它，它的工作原理。

```
#include <iostream>

using namespace std;

int main ()
{

    int value=1; //Say first step

  for (int i=0 ; i <= 10; i++ )
{
    if(value==0)
    {
        value=value+1;
    }
    else if (value==1)
    {
        value=value-1;
    }
         cout << "Step "<<i<<": "<<value<<"\n";
}

  return 0;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-23T17:45:54.793

您显示的代码不会初始化`value`为任何内容。

除此之外，

```
if(value == 0)
  {   
      value = value + 1;
  }
  else if(value == 1)
  {
      value = value -1;
  } 
```

如果您只想在 1 和 0 之间交替，这看起来应该可以正常工作，因为每次迭代它时它都会切换它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-23T19:29:48.200

最简单的：

```
value = 1 - value; 
```

冒号前有一个`<g>`，但系统软件似乎不想显示它。

# linux - Java exec linux命令

> ID：12097095
> 
> 赞同：2
> 
> 时间：2012-08-23T17:29:37.763
> 
> 标签：linux, process, exec

> **可能重复：**
> [如何使管道与 Runtime.exec() 一起工作？](https://stackoverflow.com/questions/5928225/how-to-make-pipes-work-with-runtime-exec)

您好，我使用 exec 命令编写了简单的 java 函数。此功能检查系统（linux）中是否存在字体。首先我写了简单的 bash 命令：`identify -list font | grep -i 'Font: Times-Bold' -w`它的工作很完美，所以我创建了简单的程序：

```
public abstract class SystemReader{

    public static final void checkFontExist(String name){
            String command = "identify -list font | grep -i -w \'Font: "  + name + "\'";
            Process p  =Runtime.getRuntime().exec(command);

            String lines = "";
            String resoults ="";
            BufferedReader bufferedReader = new BufferedReader(new      InputStreamReader(p.getInputStream()));
            while((line  buferedReader.readLine())!=null){
                    resoult += line + "\n";
            }

            System.out.println("RESPONSE: " + resoult);
            bufferreader.close();
    } 
```

}

它的工作，但我不认为。此函数返回我系统中存在的所有字体。似乎命令 grep 不是 exec ？

我尝试使用我创建的另一个版本的命令 exec()：

```
String command = {"identify -list font", "grep -i -w \'Font: " + fontName + "\'"} 
```

但我有错误：

```
Exception in thread "main" java.io.IOException: Cannot run program "identify -list font ": java.io.IOException: error=2, No such file or directory
    at java.lang.ProcessBuilder.start(ProcessBuilder.java:460)
    at java.lang.Runtime.exec(Runtime.java:593)
    at java.lang.Runtime.exec(Runtime.java:466) 
```

你能给我建议什么是错的吗？多谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T17:36:15.050

```
String[] cmd = {
    "/bin/sh",
    "-c",
    "identify -list font | grep -i -w \'Font: "  + name + "\'"
};

Process p = Runtime.getRuntime().exec(cmd); 
```

将通过 shell 传递命令。这是你需要的，因为 | (pipe) 命令由 shell 而不是操作系统提供。

# vb.net - 处理键值对列表

> ID：12097096
> 
> 赞同：2
> 
> 时间：2012-08-23T17:29:39.850
> 
> 标签：vb.net, tuples, key-value

我有一个`inputList`键值对列表，例如

```
X,10
X,30
Y,10 
```

我想将它们处理成一个新的键值对列表，其格式类似于“初始列表中的键组件，包含该键的键的初始列表值的总和”例如

```
X,40
Y,10 
```

这种方法行得通吗？我不知道实际使用的方法。此外，我认为我无法更改现有键值对的值，因此我可能必须从输出列表中删除现有键并添加一个带有总和值的新键。

```
For each inputPair in inputList
    If outputList.Contains(pair with Key = inputPair.Key)
        outputList.Item(Key = inputPair.Key).value = (inputPair.value + outputList.Item(Key = inputPair.Key).value)
    Else
        outputList.Add(New pair = inputPair.Key, inputPair.Value) 
```

我愿意使用 LINQ。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T17:42:33.630

如果您可以返回一个新的 KeyValuePairs 列表而不是更新现有的列表，那么使用 LINQ 可能是最简单的方法：

```
Dim result = _
    (From kvp In inputList
    Group kvp By kvp.Key Into Group
    Select New KeyValuePair(Of String, Integer)( _
        Key, Group.Sum(Function(kvp) kvp.Value))).ToList() 
```

假设`inputList`是 type `List(Of KeyValuePair(Of String, Integer))`，这将返回一个`result`相同类型的新对象，并按键汇总结果。

# jquery - 为什么 jQuery.after 在 IE9 上不起作用？

> ID：12097101
> 
> 赞同：0
> 
> 时间：2012-08-23T17:29:57.340
> 
> 标签：jquery, internet-explorer

[http://jsfiddle.net/mark69_fnd/DyRCZ/](http://jsfiddle.net/mark69_fnd/DyRCZ/)：

在 Chrome 上：

![在此处输入图像描述](../Images/c895416424428a2836e1e760c7fdf6f1.png)

在 IE9 上：

![在此处输入图像描述](../Images/8f14c329936c7898f6328f88267c2f21.png)

我正在使用 jQuery 1.8.0

现在，我知道 IE9 很烂，但 IE 是 5 大浏览器之一，而 jQuery 应该将开发人员与 IE 的“特性”隔离开来，不是吗？

那么，有什么问题呢？

谢谢。

**附言**

我知道 IE 主题会邀请进行某种谈话，但请保持建设性。

**编辑**

对于所有声称字符串数组不起作用的人。jQuery 1.8.0 支持它，否则它既不能在 Chrome 也不能在 Firefox 上工作。但它对他们两个都有效！唯一的问题是 IE9，这意味着 jQuery 1.8.0 `after()`API 在那里被破坏了。

**编辑2**

`after()`我认为 jQuery 1.8.0甚至在 Chrome 上也有更多问题。例如，下面应该工作吗？

```
$('#itemsHeader').after("         
                        <tr><td>a</td></tr>");​ 
```

[http://jsfiddle.net/mark69_fnd/Nw8Hz/](http://jsfiddle.net/mark69_fnd/Nw8Hz/)

那么：

```
$('#itemsHeader').after("         <tr><td>a</td></tr>");​ 
```

答案是前者不起作用，但后者起作用！从 html 的角度来看，两者都是相同的并且应该可以工作。但它甚至不在 Chrome 上。

**编辑3**

我很蠢。我是。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T17:36:04.970

jQuery 文档没有说明支持将 HTML 字符串数组作为输入。

> > **.after( 内容 [, 内容] )**
> > 
> > **在匹配元素**集中的每个元素之后插入的 HTML 字符串、DOM 元素或 jQuery 对象。
> > 
> > **内容**一个或多个附加 DOM 元素、元素数组、HTML 字符串或 jQuery 对象，以插入到匹配元素集中的每个元素之后。

**编辑：**好的，再看一遍后，它可以以一种表示 HTML 字符串数组的方式读取，但我认为这不是读取它的方式。在这种情况下，文档是模棱两可的，应该修复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T17:44:37.767

[`.after()`API](http://api.jquery.com/after/)支持 DOM 元素数组，而不是明确的 html 字符串数组[。](http://api.jquery.com/after/)只需使用简单的字符串连接：

[http://jsfiddle.net/DyRCZ/11/](http://jsfiddle.net/DyRCZ/11/)

```
var i, rows = "";

for (i = 0;i < 4; i += 1){
    rows += '<tr><td colspan="2">This is item ' + i + '</td></tr>';
}
$('#itemsHeader').after(rows);​ 
```

[jQuery 文档解释参数](http://api.jquery.com/after/#additional-arguments)

*附加参数 - 与其他添加内容的方法类似...... .after() 还支持传入多个参数作为输入。支持的输入包括 DOM 元素、jQuery 对象、HTML 字符串和 DOM 元素数组。*

正如此处明确指出的，字符串数组不是该方法支持的参数。仅仅因为它在 chrome 中工作，并不意味着它是一个有意和可靠的功能。jQuery 标准化了它在浏览器中的预期行为。未记录的功能可能会以一种或另一种方式出现，具体取决于浏览器的特定 js 实现如何处理案例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T17:33:19.353

![在 IE9 上](../Images/35989591091b67bd01cb72503b6e41f7.png) [http://jsfiddle.net/DyRCZ/3/](http://jsfiddle.net/DyRCZ/3/)

我让它在 IE9 上运行得很好。您正在传递一个数组，而不是文本字符串。尝试将数组加入一个字符串并传递它，你会没事的。

此外，如果您想继续使用 ELEMENTS 数组，则必须这样创建它们：

[http://jsfiddle.net/DyRCZ/10/](http://jsfiddle.net/DyRCZ/10/)

```
rows.push($("<tr/>").html('<td colspan="2">This is item ' + i + '</td>')); 
```

# apache - Apache jsvc 无法停止守护进程

> ID：12097104
> 
> 赞同：10
> 
> 时间：2012-08-23T17:30:08.523
> 
> 标签：apache, daemon, exit-code, jsvc

我正在使用本机编译的 jsvc 来启动 java 守护程序。我在 openSUSE 32 位虚拟机上运行它。该代码实现了 Apache 的守护进程接口，我正在使用以下命令执行守护进程。

```
./jsvc -home jre -errfile logs/jsvc.err -pidfile daemon.pid -cp <my_classpath> com.loader.loaderservice.LoaderDaemon 
```

它启动并运行没有问题。我可以以普通用户和 root 身份启动守护进程。但是，当我去终止守护进程时，jsvc 会终止进程而不是发出停止命令。

```
./jsvc -stop -home jre -outfile logs/jsvc.err -errfile logs/jsvc.err -pidfile daemon.pid -cp <my_classpath> com.loader.loaderservice.LoaderDaemon 
```

守护进程终止，但不执行任何关闭步骤（例如，它应该记录、标记数据库中的记录等）。我在 logs/jsvc.err 文件中得到以下内容，并且它没有写入任何其他日志：

```
Service exit with return value 143 
```

谷歌搜索错误后，我看到少数人都看到了同样的事情，但我找不到好的解决方案（http://mail-archives.apache.org/mod_mbox/commons-dev/200401\. mbox/%3CPine.GSO.3.96.1040105133739.23375A-100000@merlot.tel.uva.es%3E，http://www.tek-tips.com/viewthread.cfm?qid= 1014679 ，[http](http://www.tek-tips.com/viewthread.cfm?qid=1014679) [://threebit。 net/mail-archive/tomcat-users/msg03832.html](http://threebit.net/mail-archive/tomcat-users/msg03832.html)）。

**更新：** 使用 Apache 的窗口服务启动器 (procrun)，我可以毫无问题地启动和停止服务。该问题似乎仅与 jsvc 相关，并且仅在停止守护程序时。

**更新 2：** 在更仔细地阅读了[http://commons.apache.org/daemon/jsvc.html#Starting_jsvc](http://commons.apache.org/daemon/jsvc.html#Starting_jsvc)之后，我注意到我正在使用的停止标记通过我指定的 pid 文件在进程中发出一个 kill 命令。似乎 jsvc 实际上并没有通过设计优雅地停止守护进程。这与我看到的行为一致，因为非常冗长的 stop 方法没有写出任何消息。

```
-stop        stop the service using the file given in the -pidfile option 
```

新问题：

*   如果我的 java main 已经实现了 Apache Daemon 接口，我如何在正在运行的守护进程上发出“停止”？
*   我是否需要 jsvc 以外的东西（这似乎只对启动或终止守护进程有用）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T20:40:15.160

喔好吧。事实证明 jsvc stop 命令的行为正确。我不得不深入研究进程在 Linux/Unix 中通过 kill 命令接收终止消息的方式。Jsvc 在守护进程上发出 kill -15（这是一个软终止）。有关 unix 进程如何接收消息的描述，请参见：[http](http://commons.apache.org/daemon/) ://commons.apache.org/daemon/和[http://en.wikipedia.org/wiki/Kill_(command](http://en.wikipedia.org/wiki/Kill_(command) )。

真正的问题在于守护进程的构建。在我的启动方法中，守护程序循环直到发出关闭命令，这阻止了守护程序放弃作为守护程序子进程的控制权。

我有这个：

```
@Override
public void start() 
{
    doStartWork();
    while (isAlive()) 
    {
        Thread.sleep(1000); 
    }
} 
```

我应该有下面的，所以我可以返回并允许守护线程从操作系统接收信号。请参阅[http://commons.apache.org/daemon/jsvc.html#How_jsvc_works](http://commons.apache.org/daemon/jsvc.html#How_jsvc_works)，特别是以下部分：“受控进程：”

```
@Override
public void start() 
{
    doStartWork();
} 
```

# javascript - 只允许选择一个特定值的选择选项

> ID：12097107
> 
> 赞同：1
> 
> 时间：2012-08-23T17:30:29.170
> 
> 标签：javascript, jquery

[我在http://jsfiddle.net/MZtML/](http://jsfiddle.net/MZtML/)为此创建了一个 jsfiddle

我有一排带有选择框的图像来确定它是什么类型的图像。这些是选项：

```
<select name="image-type">
    <option value="none">Select Image Type</option>
    <option value="small-thumbnail">Small Thumbnail (70x50)</option>
    <option value="thumbnail" selected="selected">Thumbnail (140x100)</option>
    <option value="feature">Feature</option>
    <option value="gallery">Gallery</option>
</select> 
```

现在当有几行图像时，我只想让一行被指定为特征。如果当前将另一行设置为功能，则应将其重置为选择图像类型。小缩略图和缩略图也是如此。

可以有多个图像设置为选择图像类型和图库。

我一直在尝试使用以下 jQuery：

```
$('#image_container').on('change', '[name="image-type"]', function() {
    $this = $(this);

    $('[name="image-type"]').not($this).each(function() {
        if ($(this).val() === 'feature') {
            $(this).val('none');
        }
    });
}); 
```

我已经尝试了一些变体并且我已经接近了，但是我尝试过的任何东西似乎都不能准确地做到这一点。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T17:54:16.550

[**更新了 jsFiddle DEMO**](http://jsfiddle.net/MZtML/10/)

有几件事：

您在小提琴中弄错了容器区域，您需要：`#image_library`. 此外，如果您想要所选选项的值，您需要执行以下操作：`$(this).find('option:selected').val()`。

```
$('#image_library').on('change', '[name="image-type"]', function() {
    var $this = $(this),
        _current = $(this).find('option:selected').val(); // save current val

    // we're only allowing 'gallery' to have multiple

    if (_current !== 'gallery') {

        // loop through all selects to remove any matching values
        $('[name="image-type"]').not($this).each(function() {

            if ($(this).find('option:selected').val() === _current) {
                $(this).val('');
            }
        });
    }
}); 
```

​</p>

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T18:34:32.063

[jsFiddle](http://jsfiddle.net/MZtML/7/)

在@mcpDESIGNS 的出色工作的基础上，我删除了硬编码`"feature"`值，取而代之的是当前选定选项的值。然后您可以遍历其他下拉菜单并进行相应的比较。

请注意，如果没有`var`关键字，您的`$this`变量的作用域是全局的。

```
$('#image_library').on('change', '[name="image-type"]', function() {
    // without the var, you're creating a global variable $this...
    var $this = $(this),
        thisValue = $this.find('option:selected').val();

    // using find() with an id context is faster
    $('#image_library').find('[name="image-type"]').not($this).each(function() {
        //console.log($(this).find('option:selected').val());
        if ($(this).find('option:selected').val() === thisValue) {
            $(this).val('');
        }
    });
}); 
```

​</p>

# asp.net - 如何通过列表（的 ) 作为 DropDownList HTML Helper 的 SelectListItems？

> ID：12097110
> 
> 赞同：0
> 
> 时间：2012-08-23T17:30:30.367
> 
> 标签：asp.net, vb.net, asp.net-mvc-2, html-helper

我有模型来代表用户。我创建了一个帮助类来返回一组这些用户，如`List(Of Users)`.

这是我的做法

```
Function getDoctorsList() As List(Of Users)
    Dim userCollection As New List(Of Users)
    Dim sql = "SELECT * FROM " + _tblName + " WHERE usertype = 'doctor'"
    Dim dr As SqlDataReader = dbHelper.ExecuteAndGetReader(sql)
    While dr.Read
        Dim user As New Users
        user.Id = IIf(IsDBNull(dr("id")), 0, dr("id"))
        user.UserName = IIf(IsDBNull(dr("username")), "", dr("username"))
        user.UserNin = IIf(IsDBNull(dr("user_nin")), 0, dr("user_nin"))
        user.UserType = IIf(IsDBNull(dr("usertype")), "", dr("usertype"))
        user.Password = IIf(IsDBNull(dr("password")), "", dr("password"))
        userCollection.Add(user)
    End While
    Return userCollection
End Function 
```

我抓住它们，然后将它们发送到从控制器中查看，如下所示：

```
ViewData("LoginUserModel") = New LoginUser
ViewData("doctorList") = usersHelper.getDoctorsList 
```

现在，模型有两个属性`Id`，`UserName`我想分别用作值和文本。

我尝试过这样的事情，但这会产生类型转换问题。所以我显然做错了。

```
<%= Html.DropDownList("doctors", ViewData("doctorList")) %> 
```

如何将列表作为 SelectListItems 传递给 DropDownList？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T17:41:23.367

您可以使用 LINQ 将您的投影`List(Of User)`到`IEnumerable(Of SelectListItem)`：

```
ViewData("doctorList") = usersHelper
    .getDoctorsList()
    .Select(Function(x) New SelectListItem With { .Value = x.Id.ToString(), .Text = x.UserName }) 
```

或者您也可以使用`SelectList`构造函数：

```
ViewData("doctorList") = New SelectList(usersHelper.getDoctorsList(), "Id", "UserName") 
```

在你的视野内：

```
<%= Html.DropDownList(
    "doctors", 
    CType(ViewData("doctorList"), IEnumerable(Of SelectListItem))
) %> 
```

但我宁愿建议您使用视图模型而不是`ViewData`.

# objective-c - 某种消息类型的符号中断？

> ID：12097113
> 
> 赞同：0
> 
> 时间：2012-08-23T17:30:43.207
> 
> 标签：objective-c, xcode, cocoa

我想打破任何 isEqualToString: 发送的消息。问题是这条消息被发送到一个 NSNull，但是它没有显示它中断的行。

建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T20:17:38.823

您可以创建一个符号断点并将其指向 Super Most Class...

![在此处输入图像描述](../Images/1fd3fd96cff7b8fec60b84b0b9057301.png)

![在此处输入图像描述](../Images/164f19b121485ca45c1b56fff40c2eac.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T20:04:20.240

AFAIK 你只能打破方法，而不是消息。但是你可以很容易地绕过这个：

```
@interface NSNull (StringEqualityForDebugging)
    - (BOOL)isEqualToString:(NSString *)string;
@end

@implementation NSNull (StringEqualityForDebugging)
    - (BOOL)isEqualToString:(NSString *)string { // <-- Breakpoint!
        NSLog(@"Execution won't get here anyway, so whatever");
        return NO;
    }
@end 
```

# php - 使用其他网站登录 Joomla 网站

> ID：12097124
> 
> 赞同：0
> 
> 时间：2012-08-23T17:31:22.950
> 
> 标签：php, post, login, joomla

我开发了一个 joomla 网站。我也有一个基于 PHP 的网站。

让我们称我的 joomla 网站为`www.xyzjoomla.com`，我的基于 PHP 的静态网站为`www.myPHPwebsite.com`

我已经创建了一个登录表单`www.myPHPwebsite.com`并希望登录到`www.xyzjoomla.com`.

背后的想法是，当我们在 joomla 中提交表单时，一些数据被发送到页面（一些`$_POST`值）并且 joomla 获取这些凭据并登录。所以我的问题是，是否可以将这些数据发送`www.myPHPwebsite.com`到`www.xyzjoomla.com`so当 joomla 站点从该 PHP 站点接收到数据时，它会登录用户。

或者，如果这是不可能的，那么是否有任何替代方法可以实现这一目标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T18:17:54.747

如果您在 php 站点上登录，则问题与单点登录非常相似，您可以使用可用的 SSO 系统之一。Jfusion 在这里浮现在脑海中。

[http://www.jfusion.org/](http://www.jfusion.org/)

或者在父节点上构建一个简单的登录，并在站点之间使用 jfusion 或类似的 SSO。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T18:05:47.333

这是可能的。您必须使用 cURL。由于 Joomla 对其表单使用唯一的 id，因此您将面临一些艰难的战斗，但这是可能的。

诀窍是先抓取页面，然后再登录。

您可以在此处查看更多信息[CURL 通过脚本登录到 Joomla 网站](https://stackoverflow.com/questions/2212557/curl-login-by-script-to-a-joomla-website)

# php - DateInterval::format 函数的非预期结果

> ID：12097125
> 
> 赞同：0
> 
> 时间：2012-08-23T17:31:26.157
> 
> 标签：php, date

> **可能重复：**
> [如何从 PHP 的 DateTime::diff 获取聚合天数？](https://stackoverflow.com/questions/2519261/how-to-get-aggregate-days-from-phps-datetimediff)

我有这样的事情：

```
$daysDiff = intval($currentDate->diff($dueDate)->format('%R%a')); 
```

在 DateInterval::format 的 php 文档中说：

```
%R -- "+" for positive interval, "-" for negative

%a -- the total count of days i the interval 
```

我对结果有疑问，总是以天数返回 6015，并带有正确的符号 + 或 -。`$currentdate`我尝试为和使用不同的日期`$dueDate`。任何人都可以告诉我为什么会出现这种行为。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T17:38:26.870

我想你可能用错了。

[来自 DateTime::diff 的手册页](http://www.bbc.co.uk)

```
$datetime1 = new DateTime('2009-10-11');
$datetime2 = new DateTime('2009-10-13');

$interval = $datetime1->diff($datetime2);
echo $interval->format('%R%a days'); 
```

尝试：

```
$interval = $currentDate->diff($dueDate);
echo $interval->format('%R%a'); 
```

编辑添加....

嗯。我刚刚运行了你的代码，它可以工作。问题必须与您如何生成日期时间有关：

```
$datetime1 = new DateTime('2009-10-11');
$datetime2 = new DateTime('2009-10-13');

$daysDiff = intval($datetime1->diff($datetime2)->format('%R%a'));
echo $daysDiff 
```

输出'2'

# android - 自定义查询上的 Android SQLite 无法识别令牌

> ID：12097126
> 
> 赞同：0
> 
> 时间：2012-08-23T17:31:35.900
> 
> 标签：android, sqlite

我正在尝试查询我的 SQLite 数据库并隔离发送到光标的数据集。每条记录都有一个颜色字段，我想查询我的数据并返回特定颜色。

当我运行它时，我得到一个 SQLiteException: Unrecognized token "red"

这是我到目前为止所拥有的：

```
 public Cursor getGroupRecords( String color ) {
    Cursor mCursor = db.query(DATABASE_TABLE, DATABASE_STRUCTURE, 
            KEY_COLOR + "=" + color, null, null, null, null, null);
    if (mCursor != null) {
        mCursor.moveToFirst();
    }
    return mCursor;
} 
```

这是我的日志：

```
08-23 13:52:00.560: D/szipinf(14301): Initializing inflate state
08-23 13:52:00.560: D/szipinf(14301): Initializing zlib to inflate
08-23 13:52:00.970: I/Database(14301): sqlite returned: error code = 1, msg = no such column: red
08-23 13:52:00.980: D/AndroidRuntime(14301): Shutting down VM
08-23 13:52:00.980: W/dalvikvm(14301): threadid=1: thread exiting with uncaught exception (group=0x2aac0560)
08-23 13:52:00.990: E/AndroidRuntime(14301): FATAL EXCEPTION: main
08-23 13:52:00.990: E/AndroidRuntime(14301): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.cca.pqr/com.cca.pqr.PQRActivity}: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.cca.pqr/com.cca.pqr.PQRListActivity}: android.database.sqlite.SQLiteException: no such column: red: , while compiling: SELECT _id, Color, Class, Subclass, Item, Value, Other, Remarks FROM PQR WHERE Color=red
08-23 13:52:00.990: E/AndroidRuntime(14301):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
08-23 13:52:00.990: E/AndroidRuntime(14301):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
08-23 13:52:00.990: E/AndroidRuntime(14301):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
08-23 13:52:00.990: E/AndroidRuntime(14301):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
08-23 13:52:00.990: E/AndroidRuntime(14301):    at android.os.Handler.dispatchMessage(Handler.java:99)
08-23 13:52:00.990: E/AndroidRuntime(14301):    at android.os.Looper.loop(Looper.java:123)
08-23 13:52:00.990: E/AndroidRuntime(14301):    at android.app.ActivityThread.main(ActivityThread.java:3683)
08-23 13:52:00.990: E/AndroidRuntime(14301):    at java.lang.reflect.Method.invokeNative(Native Method)
08-23 13:52:00.990: E/AndroidRuntime(14301):    at java.lang.reflect.Method.invoke(Method.java:507)
08-23 13:52:00.990: E/AndroidRuntime(14301):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
08-23 13:52:00.990: E/AndroidRuntime(14301):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
08-23 13:52:00.990: E/AndroidRuntime(14301):    at dalvik.system.NativeStart.main(Native Method)
08-23 13:52:00.990: E/AndroidRuntime(14301): Caused by: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.cca.pqr/com.cca.pqr.PQRListActivity}: android.database.sqlite.SQLiteException: no such column: red: , while compiling: SELECT _id, Color, Class, Subclass, Item, Value, Other, Remarks FROM PQR WHERE Color=red 
```

任何建议或帮助将不胜感激。提前致谢！

**更新** 这是工作代码：

```
 public Cursor getGroupRecords( String color ) {

    final String SELECTION = KEY_COLOR + "=?";
    final String[] SELECTION_ARGS = { color };

    Cursor mCursor = db.query(DATABASE_TABLE, DATABASE_STRUCTURE, 
            SELECTION, SELECTION_ARGS, null, null, null, null);
    if (mCursor != null) {
        mCursor.moveToFirst();
    }
    return mCursor;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T17:55:22.370

是的。您构建查询的方式有问题。看看这个例子。

```
public static Cursor getItemWithColor(ContentResolver contentResolver, String color) {
    Uri uri = My.Table.CONTENT_URI;

    final String[] PROJECTION = {
            My.Table._ID, My.Table.COLOR
    };

    final String SELECTION = My.Table.COLOR + "=?";

    final String[] SELECTION_ARGS = {
            color
    };

    Cursor cursor = contentResolver.query(uri, PROJECTION, SELECTION, SELECTION_ARGS, null);

    return cursor;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-02T22:12:32.793

我刚遇到这个问题，发现可以通过在引号中包含选择参数来解决。仅使用标准选择参数字段似乎不适用于同时包含数字和字母的值。

所以结果查询将是：

```
db.query(DATABASE_TABLE, DATABASE_STRUCTURE, 
        KEY_COLOR + "=\"" + color+"\"", null, null, null, null, null); 
```

# java - java类中的设计模式

> ID：12097129
> 
> 赞同：-2
> 
> 时间：2012-08-23T17:31:54.047
> 
> 标签：java, design-patterns

> **可能重复：**
> [Java：一个文件中的多个类声明](https://stackoverflow.com/questions/2336692/java-multiple-class-declarations-in-one-file)

最近我正在查看一个 java 类，在其中我发现它是一个名为 A 的 java 类，但之后在同一个 java 文件中的 Class A 之后编写了另一个名为 B 的类 ..like this

```
class A
{

} 

Class B
{

} 
```

但是该类最终以名称 A.java 保存，请告诉我这是任何一种设计模式..！！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T17:33:53.427

不是设计模式。

**您可以在一个文件中编写多个 java 类，但文件名应与文件中的公共**类同名。

[为什么Java中的文件名与类名相同？](https://stackoverflow.com/questions/2134784/why-filename-in-java-should-be-same-as-class-name)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T17:42:13.960

java文件中最多允许一个公共类，文件名必须与公共类的名称匹配（如果有的话）。

我不知道任何使用这种技术的设计模式（或者更确切地说是灵活性）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T17:34:31.090

这里没有设计模式。由于没有公共类声明这一事实，一个文件可以称为`A.java`或`B.java`。

# jquery - 使用带有 Jquery Ajax .Load 的后退按钮

> ID：12097132
> 
> 赞同：1
> 
> 时间：2012-08-23T17:32:05.470
> 
> 标签：jquery, ajax, load, back

我在新内容中使用 jQuerys .load 到 Ajax，但这意味着我的浏览器中的后退按钮被禁用。有没有办法让后退按钮工作并显示之前加载的内容？

这是我用来加载具有新 ajax 内容的 div 的代码：

```
$(".itm1 a").click(function(evt) {
     var page = $(this).attr('href');
     $("#page1").load(page, function() {
        $(this).hide().fadeIn("slow"); 
     });
     evt.preventDefault();
  }); 
```

如果您需要更多关于我如何做到这一点的解释，请告诉我！请帮忙！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T18:36:05.663

您可以尝试以下方法：

```
function load(page) {
    window.location.hash = page;
} 
```

这可用于将哈希添加到您正在加载的页面。

并在加载时检查哈希是否存在并加载页面：

```
window.onload = function() {
    if (window.location.hash.length > 1) {
        page = window.location.hash.split("#")[1];
        load(page);
    }

} 
```

**编辑：**

阅读您的问题时，我有点快。为了获得最佳性能和兼容性，我建议您尝试以下插件：[https ://github.com/cowboy/jquery-hashchange](https://github.com/cowboy/jquery-hashchange)

# svn - 为什么 svn commit 在外部更改列表上静默失败？

> ID：12097135
> 
> 赞同：1
> 
> 时间：2012-08-23T17:32:17.817
> 
> 标签：svn

在 svn checkout 中提交位于外部文件的更改列表时，为什么 svn commit 命令会静默失败？

注意：我现在知道您必须 cd 进入外部的根目录才能执行提交，但为什么 svn 无法确定您正在提交外部文件？至少，为什么没有错误消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T17:41:06.463

难不成是默默的成功，什么都不做？

# javascript - 如何检测用户何时主动滚动？

> ID：12097140
> 
> 赞同：6
> 
> 时间：2012-08-23T17:32:36.343
> 
> 标签：javascript, jquery, scroll, jquery-events

我的页面有一个可滚动区域，其中包含许多元素。每个元素在悬停时都会触发一个功能。

我的问题是，如果用户使用鼠标滚轮向上或向下滚动，当区域在下方滚动时，该函数会针对光标经过的每个元素触发。

只有当用户没有主动滚动时，我才能在悬停时触发功能？

jQuery 的内置`.scroll()`似乎不是我所需要的，因为只有在滚动开始时才会触发滚动事件。可以这么说，我需要知道卷轴是否“正在进行”。

* * *

更新：这是我当前的代码：

```
$container.find('div.item').each(function(i, e){
     $(e).hover(
          function(){
               $(this).toggleClass('expanded');
               // other functions here
          },
          function(){
               $(this).toggleClass('expanded');
          }
     );
}); 
```

`.hover()`因此，如果用户当前正在滚动页面，我想要做的是禁用所有内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T17:42:38.257

我会使用`setTimeout`公平的时间 on`mouseenter`然后`clearTimeout`on `mouseleave`，这会*在悬停时产生一个小的延迟*，因此只有当用户将鼠标悬停在元素上达到设定的时间时才会触发悬停。

这**有望**最大限度地减少您的滚动问题。可能有比这更好的解决方案，但这是我想到的第一件事。

**编辑**

快速编写此示例，应该可以正常工作：

```
$(function() {
    "use strict";
    var $container = $("#container"),
        timeout, self;

    $container.find("div").each(function() {
        $(this).hover(
            function() {
                self = this;
                timeout = setTimeout(function() {
                    $(self).css({
                        width : 500,
                        height: 500
                    });
                }, 500);
            },
            function() {
                clearTimeout(timeout);
                $(this).css({
                    width : 300,
                    height: 300
                });
            }
        );
    });
}); 
```

对于演示去这个小提琴：http: [//jsfiddle.net/sQVe/tVRwm/1/](http://jsfiddle.net/sQVe/tVRwm/1/)

这取决于你想要多少延迟，我使用了 500 毫秒。

**笔记**

`.each()`不需要，您可以立即调用`.hover()`集合`div`。我包括在内`.each()`是因为我不知道您是否想做的不仅仅是绑定悬停事件。

# php - 使用 jQuery、HTML 和 CSS 创建自定义文件上传

> ID：12097143
> 
> 赞同：2
> 
> 时间：2012-08-23T17:32:44.550
> 
> 标签：php, jquery, html, css

我正在设计的网站有这个小问题。它已经结束了，但我认为 jQuery 是这里的问题。

代码如下：

```
<img src="files/register_page/upload_photo/body.png" id="upload">
<input type="file" name="file_upload" id="file_upload" style="visibility:hidden;"> 
```

在文档的一部分中，jQuery 如下：

```
$(document).ready( function(){
      $("#upload").click( function(){
          $('#file_upload').click();
      });
    }); 
```

但是，单击 img 后，什么也没有发生，应该会弹出一个文件上传对话框。请，如果您需要更多信息或其他信息，请告诉我。如果没有，问题可能出在哪里？我正在使用 jQuery 1.8.0。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T17:37:57.170

使用 HTML5[标签](https://developer.mozilla.org/en-US/docs/HTML/Element/label)元素：

```
<label for="file_upload"><img src="files/register_page/upload_photo/body.png" id="upload"></label>
<input type="file" name="file_upload" id="file_upload" style="visibility:hidden;"> 
```

[**小提琴**](http://jsfiddle.net/ult_combo/YZgDB/1/)

适用于 Chrome、IE 和 Opera，但不适用于 FF。

浏览器往往会限制您可以使用`input type="file"`. label 元素将焦点重定向到 id 属性等于其`for`属性的输入，因此这是触发不可见元素的解决方法。

* * *

但是，现代浏览器已经减轻了这些限制的很大一部分，因此您可以`.click()`毫无问题地触发。

但是，您可以更改 CSS hack 以在不使用旧浏览器的情况下隐藏它`display:none`或`visibility:hidden`与旧浏览器向后兼容。任何一个

```
position:absolute; top:-100px; 
```

或者

```
opacity:0;
-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
filter: alpha(opacity=0);
width:0; height:0; 
```

可以在不使用`display`或`visibility`CSS 属性的情况下隐藏元素。

[**小提琴**](http://jsfiddle.net/ult_combo/YZgDB/9/)

* * *

此外，这是 FF 上标签元素的解决方法，您可以更改`visibility:hidden`by`opacity:0`和：

```
$('#file_upload').focus(function() {
    $(this).click();
}); 
```

[**小提琴**](http://jsfiddle.net/ult_combo/YZgDB/8/)。但如果主脚本工作正常，这应该是不必要的。

# eclipse - MyEclipse 连接到 Tomcat 服务器（非本地）

> ID：12097147
> 
> 赞同：0
> 
> 时间：2012-08-23T17:32:52.473
> 
> 标签：eclipse, jsp, tomcat, tomcat7, myeclipse

我在 C: Drive 中安装了 MyEclipse 10。和 F: 中的 Tomcat，它不是本地的，映射到（我们只是说）\OtherComp\

为了通过 MyEclipse 10 连接到 \OtherComp\ 服务器，我需要做些什么不同的事情？

我设置了

```
Tomcat home directory: F:\Tomcat
Tomcat base directory: F:\Tomcat 
```

\OtherComp 服务器中的 Tomcat 运行良好。我一直在使用文本编辑器来创建/修改代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T05:55:44.090

在 MyEclipse 网站上查看本教程：

[http://www.myeclipseide.com/documentation/quickstarts/remotedebugging](http://www.myeclipseide.com/documentation/quickstarts/remotedebugging)

它涵盖了远程部署和远程调试。

如果您需要更多帮助，我建议您在 MyEclipse 论坛上发帖以获得更好的支持：

[http://www.myeclipseide.com/forums](http://www.myeclipseide.com/forums)

# machine-learning - 弱分类器

> ID：12097155
> 
> 赞同：15
> 
> 时间：2012-08-23T17:33:22.293
> 
> 标签：machine-learning, artificial-intelligence, classification, adaboost

我正在尝试实现一个使用 AdaBoost 算法的应用程序。我知道 AdaBoost 使用一组弱分类器，但我不知道这些弱分类器是什么。你能用一个例子向我解释一下，并告诉我是否必须创建自己的弱分类器或者我应该使用某种算法？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-23T17:50:33.427

[弱分类器](https://en.wikipedia.org/wiki/Boosting_%28meta-algorithm%29)（或弱学习器）是性能仅比随机分类器稍好一些的分类器。因此，这些分类器对如何预测正确的标签有一些线索，但不像强分类器那样多，例如朴素贝叶斯、神经网络或 SVM。

最简单的弱分类器之一是[决策树桩](https://en.wikipedia.org/wiki/Decision_stump)，它是一个单级决策树。它为一个特征选择一个阈值并在该阈值上分割数据。然后，AdaBoost 将训练这些决策树桩*的军队*，每个决策树桩都专注于数据特征的一部分。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-23T17:48:42.230

当我使用 AdaBoost 时，我的弱分类器基本上是每个数据属性的阈值。这些阈值需要具有超过 50% 的性能，否则它将是完全随机的。

这是关于 Adaboost 以及如何计算那些弱分类器的一个很好的介绍： [https ://user.ceng.metu.edu.tr/~tcan/ceng734_f1112/Schedule/adaboost.pdf](https://user.ceng.metu.edu.tr/%7Etcan/ceng734_f1112/Schedule/adaboost.pdf)

# java - 我的 Android 应用程序无法加载（我只看到主屏幕）

> ID：12097158
> 
> 赞同：-1
> 
> 时间：2012-08-23T17:33:34.417
> 
> 标签：java, android, eclipse, android-emulator

调试我的应用程序后，我的模拟器启动（使用 API 8），我看到“Android”启动屏幕（加载时）。然后，解锁，我看到主屏幕，但我的应用程序永远不会加载。

有什么问题？我究竟做错了什么？（我正在使用 Eclipse Juno IDE）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T17:40:00.427

只需重新启动 Eclipse 或检查控制台是否有任何错误或检查您的运行配置。我过去也遇到过类似的问题，做上述三件事通常可以为我解决这个问题。

# buddypress - 带有 Buddypress 的简码

> ID：12097159
> 
> 赞同：1
> 
> 时间：2012-08-23T17:33:43.357
> 
> 标签：buddypress, shortcode

我正在尝试获取自定义简码以显示在论坛主题和回复中。我有测试短代码在 WordPress 页面/帖子上运行良好。但是，似乎无法让 buddypress 论坛主题/回复来呈现它们。

我查看了 buddypress 上的文档，但对于为 buddypress 创建短代码的可能原因或正确方法，没有任何突出之处。

非常感谢任何帮助。

作为代码示例...下面的代码片段适用于 WordPress 的页面/帖子。但不适用于 buddypress 论坛主题/回复。

```
function foobar_func( $atts ){
 return "foo and bar";
}
add_shortcode( 'foobar', 'foobar_func' ); 
```

用户应该能够输入 [foobar] 作为简码，并且呈现时的预期结果应该是“foo and bar”。

# vb.net - 将 TextBox 绑定到 DataTable 列的总和

> ID：12097168
> 
> 赞同：2
> 
> 时间：2012-08-23T17:34:04.643
> 
> 标签：vb.net, textbox, datatable, sum, bindingsource

## 语境

我想在我的网格下有一个页脚来显示一些关于数据的统计信息。

例如某些列的总和和其他一些列的平均值。

## 我找到了一半的解决方案

我发现有两件事很有趣，可以帮助我做到这一点，将数据框绑定到 bindingSource，但它只是显示在 textBox 中的选定行......

```
myTextBox.DataBindings.add("Text", myGrid.DataSource,"Weight") 
```

并获得网格中列的总和，但如果我更改网格，它不会更新：S

```
myTextBox.Text = myGrid.DataSource.DataSource.DataSet.Tables(0).Compute("Sum(Weight)","") 
```

## 问题

有没有办法两者兼得？

自动更新与 BindingSource 一样，Sum 与 Compute 一样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:13:04.103

由于您使用 DataTable 作为绑定源，因此您只需连接 RowChanged 事件并在那里计算更改：

```
Private Sub myTable_RowChanged(ByVal sender As Object, _
                              ByVal e As DataRowChangeEventArgs) _
                              Handles myTable.RowChanged
  myTextBox.Text = myTable.Compute("SUM(Weight)", String.Empty)
End Sub 
```

# javascript - Javascript/AJAX 在 Opera 中不起作用，在 FF/IE/Chrome 中完美运行

> ID：12097176
> 
> 赞同：4
> 
> 时间：2012-08-23T17:34:30.797
> 
> 标签：javascript, ajax, opera, getelementbyid, xmlhttprequest

我目前在一个名为 getresults.js 的文件中有这个 Javascript：

```
function getItems(str)
{
if (str=="")
  {
  document.getElementById("getItems").innerHTML="";
  return;
  }
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("getItems").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","/include/retrieveitems.php?q="+str,true);
xmlhttp.send();
} 
```

此事件调用它：

```
onclick="getItems('all')" 
```

它在 Firefox、IE、Chrome 中完美运行。但 Opera 拒绝运行。我的访问者中有一小部分是 Opera 用户，但仍然......我宁愿让它工作。可以在此处找到实时网址：http: [//tf2g.com/gallery](http://tf2g.com/gallery)

如果有人可以提供帮助，非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T12:25:05.307

失败的原因是事件处理程序根本没有调用您的 getItems() 方法。它**从 Opera 的 Microdata 支持**( [http://www.whatwg.org/specs/web-apps/current-work/multipage/microdata.html](http://www.whatwg.org/specs/web-apps/current-work/multipage/microdata.html) ) 中看到 document.getItems() 方法并调用它。这是 JavaScript 范围的问题：元素本身及其文档都在范围内，因此此处定义的方法/属性将能够隐藏您在全局范围内定义的方法/属性。

很高兴 Opera 很早就实现了 Microdata，所以你注意到了这一点 :)

最简单的解决方法是重命名函数以避免与微数据发生名称冲突。您也可以使用 addEventListener() 而不是在标记中编写 onclick="" - 如果您这样做，函数的范围就是它创建的范围，所以您不会遇到这样的陷阱。

```
window.addEventListener('load', function(){
  for( var i=0,l;l=document.links[i]; i++ )if( l.hash){
    l.addEventListener( 'click', function(){
      getItems(this.hash.substr(1));
    }, false);
  }
}, false); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T11:01:53.697

我调试了你的链接，发现 AJAX 请求没有问题。事实上，jquery.min.js 文件中有一个未处理的异常，它会阻止其他 javascript 代码运行。

我所做的步骤：我打开了类似于萤火虫的 Opera DragonFly (Ctrl+Shft+I) 并刷新页面。我在“getItems()”中插入了断点，发现代码没有到达那里。通过 Dragonfly 控制台，我写了“getItems('all');” 并且ajax按预期进行。

○

# node.js - 使用 Node.js 轮询 REST 服务

> ID：12097182
> 
> 赞同：7
> 
> 时间：2012-08-23T17:35:41.710
> 
> 标签：node.js

我正在开发一项服务，该服务将每分钟左右轮询 Foursquare 以进行某些签入，并将结果保存/更新到 NoSQL 数据库中。用 setInterval 包装 http.request 然后使用数据事件发射器聚合分块响应的最佳方法是什么？我计划在请求完成时使用终端发射器来解析 JSON 并推送到 NoSQL DB。想法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-24T18:24:02.103

可能有更好的方法，但我最终只是使用事件发射器来处理 REST 响应，如下所示：

```
var fourSquareGet = {
    host: 'api.foursquare.com',
    port: 443,
    path: '/v2/venues/search?ll=33.88,-119.19&query=burger*',
    method: 'GET'
};
setInterval(function () {
    var reqGet = https.request(fourSquareGet, function (res) {
        var content;

        res.on('data', function (chunk) {
            content += chunk;
        });
        res.on('end', function () {
            // remove 'undefined that appears before JSON for some reason
            content = JSON.parse(content.substring(9, content.length));
            db.checkins.save(content.response.venues, function (err, saved) {
                if (err || !saved) throw err;
            });
            console.info("\nSaved from Foursquare\n");
        });
    });

    reqGet.end();
    reqGet.on('error', function (e) {
        console.error(e);
    });
}, 25000); 
```

但是，我不确定为什么要从从foursquare 收到的JSON 中解析出“未定义”。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-21T15:59:51.953

我已经通过@occasl 修复了答案，并为清楚起见进行了更新：

```
var https = require('https');

setInterval(function () {

    var rest_options = {
        host: 'api.example.com',
        port: 443,
        path: '/endpoint',
        method: 'GET'
    };

    var request = https.request(rest_options, function(response) {
        var content = "";

        // Handle data chunks
        response.on('data', function(chunk) {
            content += chunk;
        });

        // Once we're done streaming the response, parse it as json.
        response.on('end', function() {
            var data = JSON.parse(content);

            //TODO: Do something with `data`.
        });
    });

    // Report errors
    request.on('error', function(error) {
        console.log("Error while calling endpoint.", error);
    });

    request.end();
}, 5000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T17:38:36.177

当我遇到类似的问题时，我采用了类似的技术并且效果很好。[这就是我从那里得到这个想法的地方](http://blog.nemikor.com/2010/05/21/long-polling-in-nodejs/)。希望这会有所帮助。

# windows - 为特定文件添加 Windows 资源管理器扩展

> ID：12097184
> 
> 赞同：1
> 
> 时间：2012-08-23T17:35:46.000
> 
> 标签：windows, visual-studio

如果指定的文件类型是 .exe，是否可以在 Windows 资源管理器中添加上下文菜单项？即，如果有人右键单击，将上下文菜单项发送到 av，或添加到 PATH，或其他任何内容。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T17:43:20.310

是的。

您需要在注册表中添加一个 shell 命令。
请参阅[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/cc144171%28v=vs.85%29.aspx)。

# linq-to-xml - XDocument 使用 LINQ 选择不同的元素

> ID：12097185
> 
> 赞同：1
> 
> 时间：2012-08-23T17:35:51.973
> 
> 标签：linq-to-xml

我试图获得一个不同的元素列表，但它总是返回所有内容。

xml:

```
<root>
    <row>
        <unit>CAN</unit>
    </row>
    <row>
        <unit>KG</unit>
    </row>
    <row>
        <unit>KG</unit>
    </row>
    <row>
        <unit>PKT</unit>
    </row>
    <row>
        <unit>CAN</unit>
    </row>
    <row>
        <unit>PKT</unit>
    </row>
    <row>
        <unit>KG</unit>
    </row>
</root> 
```

林克：

```
List<XElement> elements = (from e in xdoc.Descendants("row").Elements()
     where e.Name.Equals("unit")
     select e).Distinct().ToList(); 
```

预期输出：元素列表应包含 3 个项目

```
 <unit>CAN</unit>
    <unit>KG</unit>
    <unit>PKT</unit> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T18:01:13.827

`Distinct()`不知道`XElement`要比较哪个部分，所以它只会比较对象引用。由于所有 XElement 都是单独的对象，因此无论内容如何，​​它都会将它们全部返回。

您要么必须定义一个[`IEqualityComparer`](http://msdn.microsoft.com/en-us/library/ms132151.aspx)允许它比较它们的方法（可能是这样做的首选方式），要么只使用 GroupBy 可以采用一个 lambda 来允许它比较实际值；

```
var elements = (from e in xdoc.Root.Elements("row").Elements("unit")
                select e).GroupBy(x => x.Value).Select(x => x.First()); 
```

输出：

```
<unit>CAN</unit>
<unit>KG</unit>
<unit>PKT</unit> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T17:45:08.210

这对我有用：

```
var query = (from e in xml.Root.Elements("row").Elements("unit")
         select e).GroupBy(e => e.Value).Select(x => x.First()); 
```

编辑：哎呀——我忽略了“不同”的要求。**使用Joachim Isaksson**的 lambda 表达式修改上述答案。这是新的输出：

```
<unit>CAN</unit> 
<unit>KG</unit> 
<unit>PKT</unit> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T17:48:34.883

选择 e.Value，

```
 from e in xdoc.Descendants("row").Elements()
 where e.Name.Equals("unit")
 select e.Value).Distinct().ToList(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T18:01:20.610

我会分组并取每个组中的第一项：

```
 XDocument doc = XDocument.Load("../../XMLFile1.xml");

    List<XElement> distinctUnits =
        (from unit in doc.Root.Elements("row").Elements("unit")
         group unit by (string)unit into g
         select g.First()).ToList();

    foreach (XElement unit in distinctUnits)
    {
        Console.WriteLine(unit);
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-23T18:07:40.383

这将得到结果

```
 List<XElement> elements = new List<XElement>();

     foreach (var item in xdoc.Descendants().Where(c => c.Name == "unit").Select(c=>c))
        {
            if (elements.Where(c => c.Value == item.Value).FirstOrDefault() == null)
            {
                elements.Add(item);
            }
        }

  <unit>CAN</unit>
  <unit>KG</unit>
   <unit>PKT</unit> 
```

# modx - Modx Revo：移动服务器，PHP 错误无处不在

> ID：12097187
> 
> 赞同：0
> 
> 时间：2012-08-23T17:36:02.537
> 
> 标签：modx, modx-revolution

我正在尝试将我的 Revo 站点移动到另一台服务器上的子目录。我遇到的问题是，我在移动到域的根目录时从未遇到过这个问题，就是我的许多附加功能都严重损坏了！每当我单击具有 MIGX Tv 条目的资源时，我都会在管理器窗口上方收到以下错误：

```
Deprecated: Call-time pass-by-reference has been deprecated in /home/content/html/tiesrev/core/components/migx/elements/tv/input/migx.class.php on line 98
(not the full URL for security purposes) 
```

在前端：

mxCalendar 缺少参数（正确呈现，但上面有两个警告）：

```
Warning: Missing argument 1 for mxCalendars::addShadowBox(), called in /home/content//html/tiesrev/core/cache/includes/elements/modsnippet/50.include.cache.php on line 199 and defined in /home/content/html/tiesrev/core/components/mxcalendars/model/mxcalendars/mxcalendars.class.php on line 157 
```

和数十个用于 spiefeed 的：

```
Deprecated: Assigning the return value of new by reference is deprecated in /home/content/html/tiesrev/core/components/spiefeed/includes/simplepie/simplepie.inc on line 738 
```

我对服务器进行了适当的移动（确保 .htaccess 指向子目录），就像将站点移动到根目录时一样。我从来没有遇到过移动服务器的问题，但这是我第一次移动到在根目录中安装了单独的 modx revo 的子目录。我什至又做了一次，但是通过进行全新安装，在全新安装中安装附加组件，然后覆盖数据库。结果完全相同。

我在godaddy共享服务器上。

任何想法如何解决这一问题？我完全被难住了！感谢你给与我的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T09:15:25.570

I've recently updated [spieFeed (1.6.0-pl)](http://modx.com/extras/package/spiefeed) to include the newer version of the SimplePie (ver. 1.3) which has fixed this particular problem Try to update with it.

Cheers.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T17:40:07.260

这里有两种机制起作用：新服务器上**安装的 PHP 版本比旧服务器上的版本更新，并且应用程序中使用的某些功能已被****弃用。**

**弃用**意味着这些函数将在 PHP 的未来版本中更改或删除，因此 PHP 现在会生成警告，以便您知道采取正确的措施（在这种情况下，这可能意味着升级您的 CMS。

另一个因素是**错误报告，**它可能在您的旧主机上被禁用。关闭错误报告后，这些问题都不会产生错误或通知 - 目前。[您可以在此处阅读有关禁用它们的信息](http://php.net/manual/en/function.error-reporting.php)，但我建议您将其用作临时措施，直到您可以将 MODX 更新到最新版本。

# java - 使用图形 api“500 内部服务器错误”在照片中标记朋友

> ID：12097194
> 
> 赞同：3
> 
> 时间：2012-08-23T17:36:25.077
> 
> 标签：java, facebook-graph-api, upload, tags, photo

我正在开发一个应用程序，它应该能够将照片上传到 Facebook 页面业务并在该照片中标记用户。

我的问题是照片上传得很好，但是当我尝试标记照片时，它在 Facebook 页面中不可见，在照片的信息中显示该标签存在但带有“请求的标签”消息。

这是我总结的代码：

```
FacebookType publishPhotoResponse = facebookClient.publish("me/photos", FacebookType.class,
        BinaryAttachment.with("photo.jpg", readImagen(this.namePhoto)),
        Parameter.with("message",this.message));

    String photoId= publishPhotoResponse.getId();

    try {
        String relativePath = photoId + "/tags/" + userId;

        StringBuilder sb = new StringBuilder("access_token=");
        sb.append(URLEncoder.encode(token_user, "UTF-8"));
        sb.append("&x=");
        sb.append(URLEncoder.encode("50", "UTF-8"));
        sb.append("&y=");
        sb.append(URLEncoder.encode("50", "UTF-8"));

        URL url = new URL("https://graph.facebook.com/"+relativePath);
        HttpURLConnection httpCon = (HttpURLConnection) url.openConnection();
        httpCon.setDoOutput(true);
        httpCon.setRequestMethod("POST");
        httpCon.setRequestProperty("Content-Type", "multipart/form-data");
        httpCon.setRequestProperty("Content-Length", "" + sb.toString().length());

        OutputStreamWriter out = new OutputStreamWriter( httpCon.getOutputStream());
            out.write(sb.toString());
            out.flush();

                System.out.println(httpCon.getResponseCode());
                System.out.println(httpCon.getResponseMessage());
            System.out.println(sb.toString());
            System.out.println(out.getEncoding());
            System.out.println(out.toString());
            System.out.println("url : "+url);

    } catch (IOException ex) {
            System.out.println(ex);

    } 
```

并在控制台中向我显示以下信息：

```
500
Internal Server Error
access_token=XXXXXXXXXX....XXXX..X&x=50&y=50
UTF8
java.io.OutputStreamWriter@1eb13dc
url : https://graph.facebook.com/XXXXXXXXXXXXX/tags/XXXXXXXXXXXXX 
```

我不知道是什么问题，根据500错误似乎不是我的错误，但也许我没有正确执行。有人可以帮助我吗？

# android - 如何创建一个应用程序来检查周围是否有 wifi 连接？在android-eclipse中？

> ID：12097198
> 
> 赞同：0
> 
> 时间：2012-08-23T17:36:40.633
> 
> 标签：android, eclipse, video, wifi, android-wifi

如何创建一个应用程序来检查周围是否有 wifi 连接？使用安卓日食？如果有视频会更好，因为我是初学者，所以当我阅读代码并且不知道将它们放在哪里时，这对我来说变得困难和困惑。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T17:44:56.790

WifiManager类提供与[设备](https://developer.android.com/reference/android/net/wifi/WifiManager.html)的 Wi-Fi 接口的 API。[getConnectionInfo()](https://developer.android.com/reference/android/net/wifi/WifiManager.html#getConnectionInfo%28%29)方法将返回一个[WifiInfo](https://developer.android.com/reference/android/net/wifi/WifiInfo.html)对象，该对象将为您提供有关当前 Wi-Fi 连接的信息。另外，这是我发现可能有用的一个[教程。](http://marakana.com/forums/android/examples/40.html)

# android - 使 Android OptionsMenu 不可点击

> ID：12097199
> 
> 赞同：3
> 
> 时间：2012-08-23T17:36:47.283
> 
> 标签：android, menu, android-menu, android-optionsmenu

我们如何使选项菜单不可点击？

将 enabled 属性设置为 false 只会阻止用户调用任何单击操作，但它仍然是可单击的。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-14T08:54:41.810

您只能禁用 MenuItem，但没有 setClickable(false) 之类的功能。例如，该功能为按钮提供。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-07T12:06:22.687

您可以覆盖公共布尔 onPrepareOptionsMenu(Menu menu)，并设置要禁用的菜单 ID

```
@Override
public boolean onPrepareOptionsMenu(Menu menu) {
    if(......){
        menu.findItem(R.id.action_email).setEnabled(false);
    }
    if(......){
        menu.findItem(R.id.action_call).setEnabled(false);
    }
    return super.onPrepareOptionsMenu(menu);
} 
```

# html - 我可以做些什么来单击 html 复选框并更改 html 输入的内容？

> ID：12097200
> 
> 赞同：2
> 
> 时间：2012-08-23T17:04:02.783
> 
> 标签：html, javascript, jquery

就像我在问题中所说的那样......有没有办法点击复选框并且该链接将更改为`http://youtu.be/kffacxfA7G4`？

![在此处输入图像描述](../Images/48c9d66743174e258697b9881f711f9e.png)

代码示例：

```
<div class="embed-code">
        <textarea rows="" cols="">http://www.youtube.com/watch?v=kffacxfA7G4</textarea>
        <label>
          <input type="checkbox" />
          Short URL</label>
      </div> 
```

我想这可以用javascript/jquery来完成......

有人用这个吗？提前致谢...

**编辑 ：**

我已经设法做到了：http: [//jsfiddle.net/tpLfS/](http://jsfiddle.net/tpLfS/)

```
$('#myCheckBox').click(function(){ var myLink = $('#myTextarea');

if ($('#myCheckBox:checked').val() !== undefined){ //checked
myLink.val(myLink.val().replace('http://www.youtube.com/watch?v=kffacxfA7G4','http://youtu.be/kffacxfA7G4'));}

else { //not checked    
myLink.val(myLink.val().replace('http://youtu.be/kffacxfA7G4','http://www.youtube.com/watch?v=kffacxfA7G4'));}

}) 
```

可以轻松完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T17:24:43.543

在查询中它非常简单：首先你需要给你的复选框和 textarea 一个 id：

```
<textarea rows="" cols="" id="myTextarea">...</textarea>
<input id="myCheckBox" type="checkbox" /> 
```

然后添加 javascript 部分（在我的 jQuery 示例中）：我不确定您想如何更改它。我想你只是想删除 "watch?v="

```
$('#myCheckBox').click(function(){
  var myLink = $('#myTextarea');

  myLink.val(myLink.val().replace('watch?v=',''));
})​ 
```

示例：http: [//jsfiddle.net/E3f9M/](http://jsfiddle.net/E3f9M/)

# compact-framework - OpenNETCF 和 Compact Framework 3.5 兼容性

> ID：12097204
> 
> 赞同：2
> 
> 时间：2012-08-23T17:37:16.777
> 
> 标签：compact-framework, opennetcf

我目前正在将我的 Compact Framework 2.0 应用程序迁移到新的 Windows Embedded 7 Compact 机器上，并且必须为 CF 3.5 重新编译它。它编译但根本不运行。

我使用的是 OpenNETCF 2.3 版，在开始调试过程之前，我想确认它确实与 Compact Framework 3.5 兼容。

谢谢你。

已编辑，这些是我正在使用的组件。

*   使用 OpenNETCF.IO；
*   使用 OpenNETCF.Windows.Forms；
*   使用 OpenNETCF.WindowsCE；
*   使用 OpenNETCF.WindowsCE.Notification；
*   使用 OpenNETCF.Threading

* * *

当我创建属于实现 IMessageFilter 的类的对象时发生窒息，请参见下面的代码

```
 public class Program
        {
           public static FormFilter myFilter = new FormFilter();  //chocking happens here!

            public static void Main(string[] args)       
            {
              //main code here
            }

    public class FormFilter : IMessageFilter
    {
        private frmMain _frmOwner;

        //messages
        static int WM_LBUTTONDOWN = 0x0201;
        const int WM_CLOSE = 0x0010;
        const int WM_KEYDOWN = 0x100;

        //button related:
        private List<Button> buttonList;
        private List<TextBox> txtBoxList;

        public FormFilter()
        {
            buttonList = new List<Button>();
            txtBoxList = new List<TextBox>();
        }

        public bool PreFilterMessage(ref Microsoft.WindowsCE.Forms.Message m)
        { }

        //watch buttons etc functions go here
} //end of FormFilter class
} //end of Program 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T18:41:40.943

是的，SDF 2.3 与 Compact Framework 2.0 或 3.5 兼容。在不确切知道您正在使用哪些部件的情况下，我无法进一步说明可能导致应用程序无法运行的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T17:54:59.723

事实证明，我是一个正在运行的 Windows Embedded Standard，它不是 Windows CE，因此 OpenNETCF dll 不会在其上运行。

请参阅[无法加载 DLL 'coredll.dll'：找不到指定的模块以](https://stackoverflow.com/questions/12186167/unable-to-load-dll-coredll-dll-the-specified-module-could-not-be-found?lq=1)获取 Chris 的更详细答案。

# module - 具有支付限制的magento模块

> ID：12097210
> 
> 赞同：0
> 
> 时间：2012-08-23T17:37:55.990
> 
> 标签：module, paypal, payment, magento-1.4

我的 magento 上有两种付款方式，paypal 和信用卡，但我想接受 paypal，只要订单超过 50 美元。

我怎样才能创造这个限制？我认为也许新的 mdoule 扩展了 paypal 和信用卡模块。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T09:29:08.533

您应该扩展 Paypal 付款方式模型并覆盖`isAvailable`方法。此方法接受`$quote`对象。您可以从中获取订单总额。然后检查所需的总数是否小于 50，然后返回 false。就这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T15:21:05.993

又快又脏：

> \app\code\core\Mage\Paypal\Model\Standard.php 第 187 行

在 if 条件中添加以下内容：

> && Mage::getSingleton('checkout/cart')->getQuote()->getGrandTotal() > 50

# javascript - 多余的 JS 和 CSS 文件

> ID：12097212
> 
> 赞同：2
> 
> 时间：2012-08-23T17:37:57.157
> 
> 标签：javascript, css, web

我拿了我朋友的一个非常重的网站，并进行了一些更改，为自己制作了一个网站。我能够做我想做的花哨的 js/css 东西。但我想删除我不需要的 js/css 文件。我怎样才能找出这些文件中的哪些是多余的？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T17:48:03.383

要查找未使用的 css，您可以使用[此站点](http://unused-css.com/)来清理 css，或者您可以使用 firebug ( [http://getfirebug.com/](http://getfirebug.com/) ) 进行调试。它将显示什么用于什么，并让您找出答案。

对于 javascript：查看[JSCoverage](http://unused-css.com/)。生成代码覆盖率统计信息，显示程序的哪些行已被执行（以及哪些已被遗漏）。

# java - 在 Java 程序中的两个 HTTPClient 之间共享会话的好方法是什么？

> ID：12097216
> 
> 赞同：0
> 
> 时间：2012-08-23T17:38:19.200
> 
> 标签：java, android, session, session-cookies, apache-httpclient-4.x

我一直在开发一个 Android/Java 应用程序，它可以同时打开两个 Apache HTTP 连接。我一直在开发一个聊天应用程序，一个连接几乎总是在运行（服务器长时间轮询；它只会在进行更改后响应），第二个请求使用相同的会话将数据发送到同一站点（由于需要“登录”）。

在 StackOverflow 上进行了大量搜索后，我还没有找到一个好的方法来做到这一点。如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T17:51:03.960

以下示例从头开始创建 HTTPClient。然后它从另一个客户端中提取 cookie，并将其添加到自己的客户端中。我发现这在 Android 中运行良好。

```
 DefaultHttpClient sendClient = new DefaultHttpClient();

        CookieStore originalCookies = Globals.getClient().getCookieStore();
        sendClient.setCookieStore(originalCookies); 
```

# maven - 我可以在多模块项目的基础 pom 中构建战争吗？

> ID：12097218
> 
> 赞同：0
> 
> 时间：2012-08-23T17:38:28.090
> 
> 标签：maven, maven-2

所以我有部署人员不了解 maven 并且不应该知道它。他们所需要的只是重新构建战争。对于我们的系统，我严重怀疑我们是否可以使用插件自动部署之类的任何东西，所以 Tomcat 插件已经过时了。此外，我不能简单地拥有一个依赖于其他项目的项目，因为我们的 SCM 不受支持......除非当项目位于本地子目录中时可以这样做。最重要的是，我也没有对组织存储库的写入权限。可能这意味着我不能以 maven 方式发布，或者如果可以的话，它会变得毫无意义。

我想知道的是，是否有一个组件（模块？）构建结构在项目的基础中具有生成的存档，这样他们就不必在大量令人困惑的组件、组件、配置文件中寻找它， ETC。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T21:39:07.800

您可能可以使用`maven-dependency-plugin`. 构建完成后，生成的 war 文件将被复制到您选择的文件夹中。

例如，假设您具有以下文件结构（可以轻松调整）：

```
- parent folder
   |- child one (jar)
   |- child two (war) 
```

要将*子两个*war文件复制到父文件夹/目标目录中，您可以在子两个模块的pom中具有以下声明。

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-dependency-plugin</artifactId>
    <version>2.5</version>
    <executions>
      <execution>
        <id>copy</id>
        <phase>install</phase>
        <goals>
          <goal>copy</goal>
        </goals>
        <configuration>
          <artifactItems>
            <artifactItem>
              <groupId>${groupId}</groupId>
              <artifactId>${artifactId}</artifactId>
              <version>${version}</version>
              <overWrite>true</overWrite>
              <outputDirectory>${basedir}/../target</outputDirectory>
              <destFileName>${artifactId}.jar</destFileName>
            </artifactItem>
          </artifactItems>
        </configuration>
      </execution>
   </executions>
</plugin> 
```

该插件非常方便，因为您甚至可以指定完全不同的目标文件夹（不是层次结构的一部分）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-27T11:48:48.653

我不会在您的 POM 中反映这一点，而是在您的构建工具（例如 Jenkins）中将副本作为构建后操作进行。

# android - 使用来电启动应用程序

> ID：12097221
> 
> 赞同：1
> 
> 时间：2012-08-23T17:38:36.110
> 
> 标签：android, broadcastreceiver

我想在有来电时启动应用程序。1）每当有来电时，用户都会弹出一个窗口，询问用户您要调用哪个应用程序 i）默认电话应用程序或 ii）MyApplication 我正在使用以下代码

```
public class Record extends BroadcastReceiver {
    @Override
    public void onReceive(Context arg0, Intent arg1) {
        Bundle bundle=arg1.getExtras();
        String state=bundle.getString(TelephonyManager.EXTRA_STATE);

        if(state.equalsIgnoreCase(TelephonyManager.EXTRA_STATE_RINGING))
        {
            Intent i=new Intent(arg0,TempDemoActivity.class);
            arg0.startActivity(i);
        }       
    }
} 
```

显现

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="temp.demo"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="7" />

    <uses-permission android:name="android.permission.READ_PHONE_STATE" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >

        <activity
            android:name=".TempDemoActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <receiver android:name=".Record" >
            <intent-filter>
                <action android:name="android.intent.action.PHONE_STATE" />
            </intent-filter>
        </receiver>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T19:37:02.943

```
Intent intent = new Intent(context, DisplayScreen.class);
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
context.startActivity(intent); 
```

试试这个

# objective-c - 将多个文件拖到沙盒应用程序

> ID：12097222
> 
> 赞同：2
> 
> 时间：2012-08-23T17:38:38.487
> 
> 标签：objective-c, xcode, macos, sandbox, finder

我正在构建一个简单的应用程序，允许用户将视频文件列表从 Finder 拖到我的应用程序中。我正在阅读[有关拖动文件的 Apple 文档](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/DragandDrop/Tasks/DraggingFiles.html#//apple_ref/doc/uid/20001288-CEGJFDFG)，它说：

> **重要**。尽管您可以支持拖动文件路径，但一般来说，您应该避免这样做，除非您确定目标应用程序永远不会在应用程序沙箱中运行。如果您使用 NSString，OS X 无法知道该字符串是否应该被解释为路径；因此，OS X 不会扩展目标应用程序的沙箱以允许访问该位置的文件或目录。相反，使用 NSURL、书签或文件名粘贴板类型。

不幸的是，文档还说，使用 NSURL 时，一次只能拖动一个文件。我的应用程序是沙盒的。

我错过了什么吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T20:25:51.227

NSFilenamesPboardType 是您的解决方案。它支持在应用沙箱内操作时拖动多个文件。

您给出的报价支持：

> 相反，使用 NSURL、书签或*文件名粘贴板类型*。

有关如何从 NSFilenamesPboardType 接收文件链接的信息，请参阅此处的 Apple 文档。

[接收拖动操作](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DragandDrop/Tasks/acceptingdrags.html#//apple_ref/doc/uid/20000993-BABHHIHC)

# matlab - 如何在matlab中的每个颤动3D图的头部创建一个点击监听器？

> ID：12097227
> 
> 赞同：0
> 
> 时间：2012-08-23T17:39:09.383
> 
> 标签：matlab, 3d, visualization, onclicklistener

我想创建一个绘图，其中包含对绘制的每个项目的侦听器。我真正想做的是创建一个 3D 箭袋图，每当我点击箭头的头部时，我想根据点击的箭头的 ID 创建另一个图。

这在 Matlab 中可能吗？

我愿意在其他编程语言中探索其他选项（易于实现）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T15:40:02.857

图形句柄对象具有可用于此类事情的[回调。](http://www.mathworks.com/help/techdoc/creating_plots/f7-55518.html)

> ButtonDownFcn — 在光标位于对象上方或对象周围 5 像素边框内单击鼠标左键时执行。

您还可以设置`'UserData'` [每个图形句柄对象的属性](http://www.mathworks.com/help/techdoc/creating_guis/f13-998352.html)，在您的情况下给它一个 ID。

结合这两个概念来创建您想要的功能：

```
h = quiver(...); %# generate the graphics handle item;
set(h,'UserData',1,'ButtonDownFcn',@myCallback);

function myCallback(src,eventdata)
    clicked_item_id = get(src,'UserData'); %# get the ID of the clicked item
    figure; plot(data(ID)); %# obviously won't work as is, just for illustration
end 
```

# javascript - 使用 Jquery 计算 contentEditable 文本中的数字总和

> ID：12097230
> 
> 赞同：1
> 
> 时间：2012-08-23T17:39:21.723
> 
> 标签：javascript, jquery, html

好的，设置如下：我有一个“表单”表格，我正在使用 ContentEditable HTML 属性（在表格的父元素上设置）编辑其内容。总共有四列——两组“项目描述”列和两组匹配的“价格”列，以及底部的一个区域，我希望显示总价。

问题 #1 是当我不使用输入和字段时，我不确定如何计算跨单元格的数字总和。使事情复杂化（至少对我来说）是我正在使用 Jquery 动态地将行添加到表中。

问题 #2 是第二组描述/价格列是可选的——我希望能够使用“添加”按钮来触发将这些列中的单个项目添加到总数中。

编辑：我尝试了一些随机的事情，并通过将单元格的值存储在一个数组中，然后告诉 Jquery 添加该数组的内容并输出总和而取得了一些成功。现在的问题是它没有给我一个总和，它给了我没有空格的数组内容。例如，如果数组包含 1,2,3，它会给我 123 而不是 6。

编辑#2：在拼凑了半打教程的零碎之后，我得到了一些适用于问题#1的东西。现在开始问题#2！

```
var sumArray = []
            $('#calc').click(function(){ 
                $('table tbody tr').each(function() {
                    sumArray.push($(this).find('.cost').text().match(/\d+/));                       
                });
                var total = 0;
                for (var i = 0; i < sumArray.length; i++) {
                    total += parseInt(sumArray[i]);
                }
                $('.totalcost').text(total);

            }); 
```

这是表格代码：

```
<table>
            <thead>
                <tr>
                        <th>Service</th>
                        <th>Cost</th>
                        <th>Complementary (Optional) Service</th>
                        <th>Cost</th>

                </tr>
            </thead>
            <tbody>
                <tr>
                    <td></td>
                <td class="cost"></td>
                    <td></td>
                    <td class="compcost"></td>
                </tr>
            </tbody>
            <tfoot>
                <tr>

                        <th>Total</th>
                        <th class="totalcost"></th>

                </tr>
            </tfoot>
        </table>
        <span id="add">Add</span>
        <span id="remove">Remove</span>
        <span id="reset">Reset</span>
        <span id="nocomp">No Comps</span>
        <span id="calc">Calculate Total</span>
    </div> 
```

这是我现在正在使用的 JS。

```
//Add fields to table
            var i = $('tbody>tr').size() + 1;

            $('#add').click(function() {
                if ($("tbody tr:first-child td").length > 2) {
                $('<tr><td></td><td class="cost"></td><td></td><td class="compcost"></td></tr>').fadeIn('slow').appendTo('tbody');
                i++;
                }
                else
                {$('<tr><td></td><td class="cost"></td></tr>').fadeIn('slow').appendTo('tbody');
                i++;
                };

            });

            $('#remove').click(function() {
            if(i > 1) {
                $('tbody>tr:last').remove();
                i--;
            }
            });

            $('#reset').click(function() {
            while(i > 2) {
                $('tbody>tr:last').remove();
                i--;
            }
            });

            $('#nocomp').click(function(){
                if ($("tbody tr td").length > 2) {
                $('thead tr th:nth-child(2),thead tr th:nth-child(3),tbody>tr td:nth-child(2),tbody>tr td:nth-child(3)').remove();
                }
            });

        /*$('#calc').click(function(){
            $('table tbody tr').each(function() {
            $(this).find('.totalcost').text(
            parseFloat($(this).find('.cost').text())
        );
            });
        });*/

        $('#calc').click(function(){ 
            $(this).find('table tbody tr td.cost').each(function(idx)
            {
                var total = $(this).text();
                count += total;                          
            });
            alert(parseInt(count));
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T12:26:16.647

看看这个 jsFiddle，它可能是你想要的：http: [//jsfiddle.net/mPvyA/3/](http://jsfiddle.net/mPvyA/3/)

我稍微修改了您的按钮以添加/删除包含的类，然后在计算时检查它：

```
 $('#exccomp').click(function(){
            $('table').find('.compcost').removeClass('included');
        });

        $('#inccomp').click(function(){
            $('table').find('.compcost').addClass('included');
        });

        $('#calc').click(function(){ 
            var sumArray = [];
            $('table tbody tr').each(function() {
                var $this = $(this), 
                    includedCompCost = $this.find('.compcost').filter('.included').text().match(/\d+/);
                sumArray.push($this.find('.cost').text().match(/\d+/)); 
                if (includedCompCost !== "") { sumArray.push(includedCompCost); }
            });
            var total = 0;
            for (var i = 0; i < sumArray.length; i++) {
                var parsedInt = parseInt(sumArray[i]); 
                if (!isNaN(parsedInt) && parsedInt > 0) { 
                   total += parsedInt; 
                } 
            }
            $('.totalcost').text(total);
        });​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T19:35:18.803

使用`parseInt`（在您添加的各个部分，而不仅仅是结果）将字符串转换为数字，否则`+`将连接它们而不是添加它们。

# node.js - 如何使用 Node.js / Request 登录 Gmail

> ID：12097232
> 
> 赞同：0
> 
> 时间：2012-08-23T17:39:30.613
> 
> 标签：node.js, request

我正在尝试登录 Gmail 以获取一些数据。

我可以使用 Node.js 轻松访问 Google 登录页面，并使用以下 Coffrescript 代码请求。我想获得一堆隐藏的输入字段，例如“服务”或“dsh”

```
# REQUIRE
request = require("request")
querystring = require("querystring")

# Parameters
url = "https://accounts.google.com/ServiceLogin?service=mail"

# Main Stuff
request url, (error, response, body) ->
  if not error and response.statusCode is 200
    console.log "Home page loaded for " + url 
```

但是在此之后如何发布电子邮件和密码表单数据？

注意：使用 Zombie.js 不是一个选项，因为我无法让它在我的机器上运行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T19:06:45.953

Gmail 以其广泛使用 javascript 来加载数据而闻名。

因此，您可以发出一个正常的 http 请求并期望加载实际数据。

如果您真的想登录并检索您的电子邮件。你需要模拟一个浏览器，像[zombiejs](http://zombie.labnotes.org/) / [phantomjs这样的无头浏览器](http://phantomjs.org/)

# c# - 转换继承的对象

> ID：12097233
> 
> 赞同：2
> 
> 时间：2012-08-23T17:39:34.500
> 
> 标签：c#

我想这对你们大多数人来说是一个简单的问题，但我在网上看到的答案都不是我需要的。所以，我有一个基类和另一个继承它的基类：

```
public class MyBase
{
    public DateAdded { get; set; }
}

public class MySecond : MyBase
{
    public MySecond(MyBase prototype) 
    {
        this = (MySecond)prototype; // this is read-only and does not work
    }

    public DateDeleted { get; set; }
} 
```

如何实例化 MyBase，将其作为原型提供给 MySecond 的另一个实例，并确保后者获取原型的所有值，而无需显式地逐一传输值？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-23T17:41:44.330

你不能，基本上。您可以使用反射以自动方式复制值，但它仍然会一个接一个地复制它们，并且不会让您尽可能多地控制*它们*的复制方式（例如，您是否需要进行深层复制）。

正如 dasblinkenlight 所说，让每个类负责复制自己的属性可能更合适，除非这不是总是合适的。

请注意，您可能想检查它*本身*`prototype`是否是的实例，如果是，则从中复制属性。*`MySecond`*

 *另请注意，如果您使用组合而不是继承，并尝试使类不可变，那么很多时候这种事情变得不必要或微不足道。这并不总是合适的，但我看到很多过度使用继承。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-23T17:43:28.350

您不能自动进行复制，但您可以在共享位置进行复制 - 即在`MyBase`类的构造函数中。`prototype`这样，如果您将作为基本构造函数的参数传递，所有派生类都可以使用相同的共享代码，如下所示：

```
public class MyBase {
    public DateAdded { get; set; }
    public MyBase() {
    }
    public MyBase(MyBase other) {
        // Do the copying here
    }
}

public class MySecond : MyBase {
    public MySecond(MyBase prototype) : base(prototype) {
    }

    public DateDeleted { get; set; }
} 
```

**编辑**（回应评论）

如果您无权访问 的源`MyBase`，您可以创建一个静态辅助方法来为您进行复制，如下所示：

```
internal static class MyBaseHelper {
    public static void CopyFromBase(this MyBase target, MyBase source) {
        target.DateAdded = source.DateAdded;
    }
} 
```

现在您可以在派生类中使用它，如下所示：

```
public class MySecond : MyBase {
    public MySecond(MyBase prototype) {
        this.CopyFromBase(prototype);
    }

    public DateDeleted { get; set; }
} 
```*

# php - 从 glob() 结果中删除目录

> ID：12097234
> 
> 赞同：2
> 
> 时间：2012-08-23T17:39:34.830
> 
> 标签：php

我正在使用以下 PHP 代码片段来显示目录中的所有 pdf。如何更改此代码以仍指定目录但仅显示文件名？

```
foreach (glob("directory/sub-directory/sub-subdirectory/*.pdf") as $filename) {
    echo "$filename <BR>\n";
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T17:45:05.690

这个怎么样：

```
$shortname = basename($filename);
echo "$shortname <BR />\n"; 
```

您将使用[basename](http://us3.php.net/manual/en/function.basename.php)函数。

# sharepoint - 在 azure 上运行 sharepoint 的要求

> ID：12097238
> 
> 赞同：0
> 
> 时间：2012-08-23T17:39:59.140
> 
> 标签：sharepoint, azure

我希望让 Microsoft Azure 在其上运行 Sharepoint，并且我打算使用虚拟机。现在，我正试图弄清楚要获得多大的虚拟机，以及有多少。根据这个网站：[http](http://technet.microsoft.com/en-us/library/cc262485.aspx) ://technet.microsoft.com/en-us/library/cc262485.aspx ，我需要一个具有 8GB RAM 的 Web 服务器和一个可能具有 16GB RAM 的数据库服务器。但是，在查看 Azure 的网站时，我没有看到任何关于服务器的信息，我只看到了虚拟机和 SQL 数据库。所以这就是为什么我想知道运行 Sharepoint 需要多少虚拟机以及大小。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T18:15:53.503

Windows Azure 虚拟机是您想要了解的。Windows Azure 实际上并没有为您提供物理服务器。整个云是虚拟化的。所以：对于推荐 8GB 的​​软件产品，这大致相当于大型 VM 大小（7GB 可用，4 核）。

您以后可以随时更改 VM 的大小，因此您可能希望从大型而不是超大型 (XL) 开始，后者提供 8 个内核和 14GB 可用空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T17:04:27.007

如果要`SharePoint`在当前`Azure`预览版上获得生产风格的农场，则至少需要 3 个大型 VM：一个`AD domain controller`、一个`SQL Server`和一个`SP2010 server`。

[在这里](http://kjellsj.blogspot.no/2012/08/sp2010-azure-on-premises-gateway.html)查看我的经验和建议。

# c++ - 从特定范围内准确生成一定数量的唯一随机数

> ID：12097243
> 
> 赞同：3
> 
> 时间：2012-08-23T17:40:09.340
> 
> 标签：c++, random, vector

考虑给定一个特定范围（0 到 5,000,000），我应该从该范围生成 2,500,000 个唯一随机数。什么是有效的方法来做到这一点？我知道很难获得真正的随机数。

我尝试检查一个数字是否存在，以便生成一个新的随机数。但是计算需要几个小时。有一个更好的方法吗。

这背后的原因是，我有一个大小为 5,000,000 的向量。我想将矢量缩小一半。即从向量中随机删除 50% 的元素。

```
 #include <iostream>
    #include <vector>
    #include <stdlib.h>
    #include <algorithm>
    using namespace std;

    #define NUMBER 2500000
    #define RAND_START 0
    #define RAND_END 5000000

    unsigned int generate_random_number(int min, int max)
    {
        return min + (rand() % (unsigned int)(max - min + 1));
    }

    int main(int argc, char* argv[])
    {
        unsigned int count = 0, random_number;
        vector<unsigned int> rand_vector;
        do 
        {   
            count++;
            random_number = generate_random_number(RAND_START,RAND_END);
// Tried to manually add a different number each time. But still not a considerable improvement in performance. 
            if (std::find(rand_vector.begin(), rand_vector.end(), random_number) != rand_vector.end())
            {
                if(random_number > count)
                    random_number = random_number - count;
                else
                    random_number = random_number + count;          
            }
            rand_vector.push_back(random_number);
            sort(rand_vector.begin(), rand_vector.end());
            rand_vector.erase(unique (rand_vector.begin(), rand_vector.end()), rand_vector.end());
        }while (rand_vector.size() != NUMBER);

        for (unsigned int i =0; i < rand_vector.size(); i++)
        {
            cout<<rand_vector.at(i)<<", ";
        }
        cout<<endl;
        return 0;
    } 
```

我可以通过什么更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T18:15:56.920

您似乎被锁定在一个想法上，即您必须以某种方式*预先生成*随机数。为什么？你说最终的任务是从向量中删除一些随机元素。对于该特定问题，无需预先生成所有随机索引。您可以简单地“即时”生成这些索引。

对于这个特定的任务（即删除向量中 50% 的元素），Knuth 算法会很好地工作（参见[https://stackoverflow.com/a/1608585/187690](https://stackoverflow.com/a/1608585/187690)）。

只需遍历原始向量的所有元素 from `0`to`N-1`并随机决定删除`i`-th 的概率为的元素`N_to_delete / N_to_iterate`，其中`N_to_delete`是仍然必须删除的元素的数量，并且`N_to_iterate`是向量剩余部分的长度. 这种方法一次性完成（如果实施得当），不需要额外的内存，也不需要反复试验。它只是做你想做的事：以相同的概率破坏 50% 的向量元素。

`M`Knuth 算法在随机值 ( ) 的数量与范围 ( ) 的长度相比相当大的情况下效果最佳`N`，因为它的复杂性与`N`. 在您的情况下，`M`50% 的位置在哪里`N`，使用 Knuth 算法是一个不错的主意。

当随机值的数量远小于范围`M << N`（它需要额外的内存（一组），但在生成随机数时仍然不会进行反复试验。`M``N`

但是，在您的情况下，您正在尝试从*vector*中删除元素。向量元素删除以 为主`N`，这无论如何都破坏了 Bob Floyd 算法的优势。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T18:15:21.313

最简单的编码方法：

```
std::random_shuffle(vectoshrink.begin(), vectoshrink.end());
vectoshrink.resize(vectoshrink.size() / 2); 
```

如果您想保持元素的顺序，请`vectoshrink`使用 AndreyT 的答案。

如果您确实想提前选择索引：

```
std::vector<size_t> vec(vectoshrink.size());
// iota is C++11, but easy to do yourself
std::iota(vec.begin(), vec.end(), size_t(0));
std::random_shuffle(vec.begin(), vec.end());
vec.resize(vec.size() / 2);
// optionally
std::sort(vec.begin(), vec.end()); 
```

现在，您可以使用这些索引通过将索引处的元素复制`vec`到新向量中来缩小原始向量，并将结果与​​原始向量交换。

在这两种情况下，`random_shuffle`都比严格要求的要多，因为它会打乱整个向量，而实际上我们只需要“打乱”它的一半。但是，如果您阅读了 Fisher-Yates shuffle 的工作原理，很容易看出如果您自己编写代码，那么唯一需要的修改就是执行完全 shuffle 的一半的步骤。但是， C++ 没有标准`partial_random_shuffle`。

最后，请注意默认的随机源可能不是很好，因此您可能需要使用三参数版本的`random_shuffle`. 您的函数对于和`generate_random_number`的某些值有很大的偏差，因此您可能需要对随机数生成的一般理论进行更多研究。`min``max`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-23T17:48:34.740

如果您有唯一的数字，而不是手动检查，您可以使用 eg[`std::unordered_set`](http://en.cppreference.com/w/cpp/container/unordered_set)并继续生成数字，直到集合的大小是您想要的数字数量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T17:44:30.127

生成第一个数字<5M，第二个数字<(5M-1)，等等。每次删除元素后，你都会少一个元素，你不在乎它是否是相同的数字。;-) 这并不能回答您关于唯一数字的问题，而是关于将向量减半的问题。

而且您不必生成比您需要的更多的数字。

# php - PHP: mysql v mysqli v pdo

> ID：12097245
> 
> 赞同：18
> 
> 时间：2012-08-23T17:40:14.193
> 
> 标签：php, mysql, pdo, mysqli

我一直在阅读一些关于使用 mysqli 与 pdo 在 php 中使用 mysql 的问题。

我见过诸如[mysqli 或 PDO 之类的问题——优缺点是什么？](https://stackoverflow.com/questions/13569/mysqli-or-pdo-what-are-the-pros-and-cons)或[从 mysql 迁移到 mysqli 或 pdo？](https://stackoverflow.com/questions/770782/moving-from-mysql-to-mysqli-or-pdo?lq=1)，它们都专门处理 mysqli v pdo 。我对这两种方法中的哪一种更好并不感兴趣。

我想知道为什么应该避免使用 mysql_ 函数。[当然，根据 PHP 的文档http://php.net/manual/en/faq.databases.php#faq.databases.mysql.deprecated](http://php.net/manual/en/faq.databases.php#faq.databases.mysql.deprecated)，它们正在被弃用，线程[PHP PDO 和 MySQLi](https://stackoverflow.com/questions/10703426/php-pdo-and-mysqli) 建议使用 PDO 和MySQLi 比较强大，和线程[MySQL、MySQLi 和 PDO 有什么区别？](https://stackoverflow.com/questions/2190737/what-is-difference-between-mysql-mysqli-and-pdo)意味着这些较新的方法更安全。

总的来说，我想知道 mysql_ 方法的最大弱点是什么，以及避免它的原因是什么（我想更具体地说，不仅仅是因为它已被弃用）。我计划更新我受影响的脚本，并对为什么不推荐使用这种旧方法感到好奇。

谢谢！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-23T17:47:27.193

该`mysql_query`函数的设计是这样的，您必须小心地转义您注入的每一个数据，如果您错过了一个，您的整个应用程序都可能被[自动 SQL 漏洞利用工具](http://sqlmap.org/)破坏。

PDO 和 PDO都`mysqli`支持占位符，这些占位符是确保您的查询不受 SQL 注入错误影响所*必需的。*调用`mysql_real_escape_string`所有内容不仅乏味，而且容易出错，这就是问题出现的地方。

这些`mysql`函数是 PHP 早期的产物，并且比`mysqli`作为选项提供的新的面向对象特性或设计上的 PDO 受到的限制要大得多。

使用这两个新接口之一有很多很好的理由，但最重要的是，该`mysql_query`函数太危险了，无法在生产代码中使用。有了它，您将永远远离一些非常严重的问题。

充满密码和信用卡号码的数据库不断出现是有原因的。拥有一个明显的 SQL 注入点使得完全接管一个站点几乎太容易了。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-23T17:52:20.687

从选择[MySQL API @ PHP.net](http://www.php.net/manual/en/mysqlinfo.api.choosing.php)：

```
// mysqli
$mysqli = new mysqli("example.com", "user", "password", "database");
$result = $mysqli->query("SELECT 'Hello, dear MySQL user!' AS _message FROM DUAL");
$row = $result->fetch_assoc();
echo htmlentities($row['_message']);

// PDO
$pdo = new PDO('mysql:host=example.com;dbname=database', 'user', 'password');
$statement = $pdo->query("SELECT 'Hello, dear MySQL user!' AS _message FROM DUAL");
$row = $statement->fetch(PDO::FETCH_ASSOC);
echo htmlentities($row['_message']);

// mysql
$c = mysql_connect("example.com", "user", "password");
mysql_select_db("database");
$result = mysql_query("SELECT 'Hello, dear MySQL user!' AS _message FROM DUAL");
$row = mysql_fetch_assoc($result);
echo htmlentities($row['_message']); 
```

创建一个对象，就像 mysqli 和 PDO 一样，是编写任何现代软件的推荐方式。mysql 库是为 PHP 2.0 版发布的，从那时起就没有进行过重大的重写。PHP 2.0 于 1997 年发布，这足以解释为什么不使用它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-23T17:42:21.930

一方面，如果您没有正确手动清理输入，mysql 函数极容易受到 SQL 注入的影响。mysqli 和 pdo 具有参数化的 sql 语句选项，避免了这种风险。在我看来，他们通常也有更好的编码风格。

# java - 如何从 Twitter 流中获取样本并打印到屏幕上

> ID：12097247
> 
> 赞同：1
> 
> 时间：2012-08-23T17:40:29.697
> 
> 标签：java, twitter, twitter4j

我正在尝试使用该`twitter4j`库从推特流中获取随机样本并打印推文的用户名和文本。

我不确定我是否理解正确的术语`OAuth`。这是我需要为我的帐户获得的东西，还是只有在访问其他私人帐户时才需要？

这是我的代码：

```
package tweet1;

import java.io.IOException;

import twitter4j.Status;
import twitter4j.StatusDeletionNotice;
import twitter4j.StatusListener;
import twitter4j.TwitterException;
import twitter4j.TwitterStream;
import twitter4j.TwitterStreamFactory;
import twitter4j.auth.BasicAuthorization;

public class Twit4jEx1 {

    /**
     * @param args
     */
        // TODO Auto-generated method stub
        public static void main(String[] args) throws TwitterException, IOException{
//          BasicAuthorization ba1 = new BasicAuthorization("userName", "pword");
            ConfigurationBuilder cb = new ConfigurationBuilder();

            StatusListener listener = new StatusListener(){
                public void onStatus(Status status) {
                    System.out.println(status.getUser().getName() + " : " + status.getText());
                }
                public void onDeletionNotice(StatusDeletionNotice statusDeletionNotice) {}
                public void onTrackLimitationNotice(int numberOfLimitedStatuses) {}
                public void onException(Exception ex) {
                    ex.printStackTrace();
                }
                @Override
                public void onScrubGeo(long arg0, long arg1) {
                    // TODO Auto-generated method stub

                }
            };
            TwitterStream twitterStream = new TwitterStreamFactory().getInstance();
            // sample() method internally creates a thread which manipulates TwitterStream and calls these adequate listener methods continuously.
            twitterStream.sample();
        }   
} 
```

配置生成器类

```
package tweet1;

import twitter4j.Twitter;
import twitter4j.TwitterFactory;
//import twitter4j.conf.ConfigurationBuilder;

public class ConfigurationBuilder {
    ConfigurationBuilder cb = new ConfigurationBuilder();
    cb.setDebugEnabled(true)
      .setOAuthConsumerKey("***")
      .setOAuthConsumerSecret("***")
      .setOAuthAccessToken("***")
      .setOAuthAccessTokenSecret("***");
    TwitterFactory tf = new TwitterFactory(cb.build());
    Twitter twitter = tf.getInstance();
} 
```

当我运行时，`Twit4jEx1`我得到以下信息：

```
Exception in thread "main" java.lang.Error: Unresolved compilation problems: 
    Syntax error on token(s), misplaced construct(s)
    Syntax error on token "setDebugEnabled", = expected after this token

    at tweet1.ConfigurationBuilder.<init>(ConfigurationBuilder.java:9)
    at tweet1.Twit4jEx1.main(Twit4jEx1.java:21) 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T19:16:03.500

您的 ConfigurationBuilder 类试图在初始化块中而不是在构造函数或方法中运行代码。

我认为您的意思是：

```
public class MyConfigurationBuilder {
    private ConfigurationBuilder cb; 
    private Twitter twitter;

    public MyConfigurationBuilder() {
      cb = new ConfigurationBuilder();
      cb.setDebugEnabled(true)
        .setOAuthConsumerKey("***")
        .setOAuthConsumerSecret("***")
        .setOAuthAccessToken("***")
        .setOAuthAccessTokenSecret("***");
      TwitterFactory tf = new TwitterFactory(cb.build());
      twitter = tf.getInstance();
    }
} 
```

然后你可以添加适当的吸气剂或其他东西。确保在主要功能中使用 MyConfigurationBuilder。

# image - 将多个图像保存为视频格式的可能性？

> ID：12097252
> 
> 赞同：2
> 
> 时间：2012-08-23T17:40:53.660
> 
> 标签：image, html, video, canvas

假设您有一个视频，您将其绘制到 CANVAS 元素中，以便您可以操纵像素，例如将视频从彩色更改为黑白，然后您可以以某种方式将结果保存到视频中吗？在您定义的某个时间间隔内，您正在抓取每一帧并对其进行操作，并且您可以保存每一帧，但是您如何将大量图像转换为实际的视频格式？

我真的不认为有基于客户端的解决方案（有吗？）所以是的，我接受基于服务器的解决方案，最好是 PHP、python、perl 或 java（按此顺序）。换视频方面，就是以视频对象为源，在CANVAS中绘制，网上已经有很多例子了，这里有一个：

[http://techslides.com/html5-video-into-canvas-with-filters/](http://techslides.com/html5-video-into-canvas-with-filters/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T18:15:18.507

没有简单的方法可以做到这一点，您需要逐帧手动编码（[http://www.ultramegatech.com/2010/09/record-html-canvas-animations-to-video/](http://www.ultramegatech.com/2010/09/record-html-canvas-animations-to-video/)）

# javascript - javascript中的双重上下文切换

> ID：12097254
> 
> 赞同：0
> 
> 时间：2012-08-23T17:41:15.387
> 
> 标签：javascript, prototype

我正在寻找处理这种双重上下文切换的最佳方法。

```
function myObject() {
    this.data = {};
}

myObject.prototype.each = function(func) {
    if (func) {
        for (var key in this.data) {
            func(key);
        }
    }
}

function myObject2() {
    this.data = {};
}

myObject2.prototype.someFunc = function(o) {
    // o = myObject
    o.each.call(this, function(key) {
        this.data[key] *= o.data[key];
    });
} 
```

在 myObject2.someFunc 中，我使用调用来更改上下文，以便可以访问 myObject2 的数据。然而，正因为如此，在 myObject 的 each 方法中，this 现在指的是 myObject2。如果我不使用调用，那么我无法访问 myObject2 中的数据。

我考虑过使用 apply，然后将原始对象作为参数传递并将其传回，但我正在寻找一种更优雅的解决方案，它不需要我更改 myObject.each 的原始定义。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T17:44:52.623

看起来它应该是一个通用函数：

```
function each( obj, func, ctx ) {

    if( func ) {
        for ( var key in obj ) {
            func.call( ctx || null, key, obj[key] );
        }
    }

}

myObject2.prototype.someFunc = function(o) {
    each( o.data, function( key, value ) {
        this.data[key] = value;
    }, this );
}; 
```

# javascript - Jquery 事件绑定在作为方法调用时不起作用，但在控制台中直接调用时会起作用

> ID：12097263
> 
> 赞同：0
> 
> 时间：2012-08-23T17:41:54.013
> 
> 标签：javascript, jquery

我有一个令人抓狂的问题。我有一个表，其中包含由文本输入和选择组成的行。我有自定义方法，我已定义在代码或控制台中调用时，它不会绑定任何选择的单击事件。只有文本输入。但是，如果我直接在控制台中复制并粘贴该方法的代码，它就可以正常工作。下面是我的代码。

```
addEditHandler : function(){
                    $('#table2 .ui-icon-pencil').click(function(){
                            $(this).parent().parent().parent().addClass("editing").find('input, select').removeAttr("readonly").css("background-color","white");
                            $('#table2 .ui-icon-disk').eq($(this).parent().parent().parent().index()).show();
                            $('#table2 .ui-icon-trash').eq($(this).parent().parent().parent().index()).show();
                            $('#table2 .ui-icon-triangle-2-n-s').eq($(this).parent().parent().parent().index()).show();
                            $('#table2 .ui-icon-pencil').hide();
                            if(addComponents.getCurrentComponents(getBOM.rawXML).size()>0){
                                addComponents.add();
                                addComponents.populateComponents();
                            }

                    });
                }, 
```

我主要关注这条主线：

```
 $(this).parent().parent().parent().addClass("editing").find('input, select').removeAttr("readonly").css("background-color","white"); 
```

调用此方法不会将格式应用于选择，仅应用于文本框。将 EXACT 代码复制并粘贴到控制台中即可。不知所措。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T18:10:23.627

仔细查看调试器表明它正在更改外观，但由于复制粘贴错误，正在代码中进一步更改回其原始状态。无法想象谁会这样做。:)

教训学习，调试器是你的朋友。

# javascript - 为什么 cookie 没有内置的 JS 函数？

> ID：12097269
> 
> 赞同：3
> 
> 时间：2012-08-23T17:42:18.743
> 
> 标签：javascript, cookies

好吧，这个问题可能听起来很荒谬，但是为什么没有实现通过 JS 修改 cookie。我问这个是因为在网络上，我看到了一些非常可怕的操作 cookie 的实现。

另外，为什么 cookie 不表示为对象？在我看来，如果 cookie 被表示为一个对象，那么操作它会容易得多。那么 document.cookie 可以只是对象的字符串表示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T17:44:23.827

`document.cookie`，即使它听起来像一个简单的属性，实际上隐藏了函数访问（getter 和 setter）。

为什么 cookie 不是一个完整的结构化对象？我猜原因是：

*   与 localStorage 相同：强制您只设置非常轻的数据，以免 cookie 在磁盘上变得很重
*   服务器、客户端和中间（即传输）上的标准用法
*   简单的标准化过程...

回答评论：

*   我没有说这是对的：我看到了一些原因
*   我想 localStorage API 是逻辑上的继承者，稍微好一点（仍然不完美）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T17:50:34.610

`document.cookie`就是这样，因为这就是它最初实施的方式。这是一个废话，我知道，但你必须记住早期网络的历史。第一个实现新功能的浏览器为所有其他浏览器设置了复制标准。

`null == undefined`这与JavaScript 中的原因完全相同。旧的错误成为必需的实现细节，我们将永远坚持下去，或者直到下周，这取决于谁在积极致力于 w3 规范。

> 为什么没有通过JS修改cookie的实现？

因为它不会向后兼容。显然我们不能改变现有的实现，所以我们必须创建一个新的。在创建一个新的时，我们希望创建一个可以被现有的 JS 代码合理复制以回填旧的浏览器，但如果我们必须添加一个 polyfill 以使其正常工作，为什么还要添加新的浏览器的功能？

所以，我们永远不会看到更好的饼干，对吧？

**错了**。浏览器*正在*添加一个新的对象实现来在本地存储数据，它被称为`localStorage`，它可以被 cookie 合理地复制到需要的地方。这也允许我们将本地信息与服务器信息分开（服务器可以在 cookie 上设置 HTTP 仅用于服务器专用 cookie）。

# android - 按钮下的 ListView

> ID：12097281
> 
> 赞同：0
> 
> 时间：2012-08-23T17:43:02.157
> 
> 标签：android, listview

所以我试图让 ListView 填充在同一布局上的按钮下方。基本上选择了ListView选项时，按钮将与每个所选选项不同。问题是它正在强制关闭，并且似乎是填充 ListView 的问题。

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/background"
    >
<Button
    android:background="@drawable/button"  
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content"
    android:layout_marginTop="15dp" 
    android:layout_gravity="center"
    android:id="@+id/button"/>

    <ListView
    android:listSelector="#990000"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_marginTop="10dp"
    android:id="@+id/listview"
    />
</LinearLayout> 
```

代码：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);

    lv = (ListView) findViewById(R.id.listview);

    ArrayList<String> list = new ArrayList<String>();
    soundsList.add("one");
soundsList.add("two");
soundsList.add("three");

    ArrayAdapter<String> arrayAdapter =      
             new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, list);
             lv.setAdapter(arrayAdapter); 
```

Logcat 读数是这样的：

```
08-23 10:21:23.735: ERROR/AndroidRuntime(588): Caused by: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list' 
```

我已经完全尝试了它在 ArrayAdapter 中所说的内容......（android.R.id.list。我尝试了许多其他东西，包括扩展 ListActivity，但无论我尝试什么，我似乎都得到了类似的 Logcat 响应。

有没有更好的方法来完成我想要完成的事情？我希望 ListView 上方的按钮都在同一个 main.xml 上。

提前致谢。

编辑：

我也试过这段代码。目前已注释掉，但这是我最初尝试的。

```
setListAdapter(new ArrayAdapter<String>(this, android.R.id.list,LIST));

    ListView listView = getListView();
    listView.setTextFilterEnabled(true); 
```

LIST 是一个字符串数组。上述代码在 Logcat 上的输出与之前的相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T17:48:43.147

听起来您正在尝试实现 ListActivity 或 ListFragment，它希望找到具有特定名称的 listview 实例，因此会出现错误。尝试从以下位置更改列表视图的 ID：

```
android:id="@+id/listview" 
```

到：

```
android:id="@android:id/list" 
```

我知道您说您已经尝试过，但是鉴于您的代码，它看起来仍然是错误的。更改后可以发布新的错误消息吗？根据您的描述，我意识到这将是一个类似的消息，但即使差异很小，它可能仍然很重要。

编辑：

我刚刚注意到的另一件事 - 如果您确实在使用 ListActivity 或 FragmentActivity，请通过调用`getListView() instead of`findViewById()` 获取 ListView 的引用。

# iis-7 - 如何在没有 Web Platform Installer 的情况下安装自动化 Web 部署（Web Deploy + Management Service）？

> ID：12097288
> 
> 赞同：1
> 
> 时间：2012-08-23T17:43:33.427
> 
> 标签：iis-7, webdeploy

我已尝试按照[为管理员和非管理员部署安装和配置 Web 部署中](http://learn.iis.net/page.aspx/1075/installing-and-configuring-web-deploy/)的说明进行操作，但 Web 平台安装程序 4.0 花费的时间太长。

我从安装 Web Deploy 开始没有太多麻烦（尽管我最终手动取消并安装了 .NET 4.0，因为这花费了太长时间）。但是，安装“Web Hosting Providers 的推荐服务器配置”已经安装了 24 多个小时，并且仍然只在 21 的第 6 步（它说它正在安装 Visual Studio 2010 SP1）。我已经确认仍然有磁盘活动，但没有网络活动 - 如果我再给它几天，它可能会完成，但真的，应该需要几天吗？

我真的需要安装完整的 Visual Studio、Visual Web Developer、SQL Server，还有谁知道还有什么（根据文档，我选择退出 MySql 和 PHP）只是为了设置自动化 Web 部署？

我的问题是是否有分步指南告诉如何在不使用 Web 平台安装程序的情况下设置自动部署？我找到了以下 2 个指南，但它们都要求您使用它，并且似乎表明如果您不这样做，则必须手动完成几个步骤。但是，它们对所有步骤、所有必需的依赖项以及从 .msi 文件安装时应按什么顺序完成都不是很清楚。

[http://learn.iis.net/page.aspx/1075/installing-and-configuring-web-deploy/](http://learn.iis.net/page.aspx/1075/installing-and-configuring-web-deploy/) [http://weblogs.asp.net/scottgu/archive/2010/09/13/automating-deployment-与-microsoft-web-deploy.aspx](http://weblogs.asp.net/scottgu/archive/2010/09/13/automating-deployment-with-microsoft-web-deploy.aspx)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T15:52:41.080

48 小时后（以及 14.5 GB 的安装空间）我终于放弃并决定重新开始。

显然，“Web 托管提供商的推荐服务器配置”是可选的。我按照以下步骤设置远程部署：

1.  已安装的 Web 服务器角色 (IIS 7.5)
2.  已安装 .NET Framework 4.0
3.  使用 Web Platform Installer 安装了 Web Deployment Tool 3.0
4.  从“为委派的非管理员部署配置站点”步骤继续执行[http://learn.iis.net/page.aspx/1075/installing-and-configuring-web-deploy/指南中的步骤](http://learn.iis.net/page.aspx/1075/installing-and-configuring-web-deploy/)

# php - 使用 ajax/javascript 调用 php 函数

> ID：12097290
> 
> 赞同：2
> 
> 时间：2012-08-23T17:43:52.687
> 
> 标签：php, javascript, ajax

好的，伙计们，我知道这个问题之前已经被问过，但我对 PHP 和 JavaScript 还是很陌生，在我开始寻找这个问题的答案之前，我什至没有听说过 ajax，所以不理解以前的答案。

我正在创建一个网站，它本质上是 SQL 数据库中的一堆视频，它一次显示一个视频，我想要一个下一个和上一个视频按钮。

但是我无法克服这个 ajax 问题，所以我的问题更加简单。我已经看过这个问题/答案，并认为它几乎总结了我的要求：

[当用户点击链接时如何运行 PHP 代码？](https://stackoverflow.com/questions/1280767/how-do-i-run-php-code-when-a-user-clicks-on-a-link)

我已经复制了那个确切的代码，

```
 <script type="text/javascript">
       function doSomething() {
       $.get("backend.php");
          return false;
      }
     </script>

<a href="#" onclick="doSomething();">Click Me!</a> 
```

在我的`backend.php`文件中，我实际上只是 `<?php echo "Hello" ?>`为了测试它，因此我的理解是，当我单击链接时，会触发 javascript onClick 事件，该事件又会调用`backend.php`文件，该文件说要在页面上打印“Hello”。但是，当我单击链接时，它什么也不做。

最终，显然我需要对我的 php 函数和调用变量以及所有这些东西变得更加复杂，但我喜欢自己解决大部分问题，所以我学习了。但是我坚持这一点。另外，虽然我在这里我会问另一件事，我想“回馈”该网站的用户以回答我的问题，但我只能在 HTML 和 CSS 中很好地回答其他人的问题，任何关于能够的建议在这里找到更简单的问题，所以我可以回答一些。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T17:46:03.323

它什么也不做，因为你不对结果做任何事情。我的猜测是，在你举的例子中，它做了一些工作并且没有向用户显示任何东西。因此，如果您只是想在服务器上运行一些东西而不向用户返回任何输出，您可以简单地这样做，它会工作。

来自 jQuery[`.get()`文档的示例](http://api.jquery.com/jQuery.get/)

**你做什么：**

> 示例：请求 test.php 页面，但忽略返回结果。

```
$.get("test.php"); 
```

**你想做什么：**

> 示例：提示请求 test.php 的结果（HTML 或 XML，取决于返回的内容）。

```
$.get("test.php", function(data){
    alert("Data Loaded: " + data);
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T17:46:10.917

看看[`.get()`文档](http://api.jquery.com/jQuery.get/)。你使用不正确。

您至少应该传递数据（可选）并处理返回的数据：

```
$.get("backend.php",
    {
        // data passed to backend.php goes here in 
        //
        // name: value
        //
        // format. OR you can leave it blank.
    }, function(data) {
        // data is the return value of backend.php
        // process data here
    }
); 
```

如果您传递数据，您可以`backend.php`使用`$_GET`. 在这种情况下：

```
$_GET['name']; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T17:46:19.637

```
$.get("test.php", { name: "John", time: "2pm" }, function(data) {
   alert("Data Loaded: " + data);
 }); 
```

[http://api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T17:46:36.227

这会提醒数据。现在该函数只返回false。

```
$.get('backend.php', function(data) {
  alert(data);
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-23T17:50:49.627

您的代码不会按照您设置的方式打印到页面上；你是其中的一部分，因为你已经调用了页面，但是需要以某种方式处理响应。如果您在 Chrome 中打开开发人员工具，您可以单击“网络”选项卡并查看请求和响应，以验证您编写的代码是否确实有效，但现在您需要将响应放在某个地方。

通过将函数作为第二个变量传递给 $.get，您可以使您的请求显示在页面上。尝试这样的事情：

```
$.get("backend.php", function (data) { $('body').append(data); } ); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-23T17:50:50.000

您的代码未处理该数据。因此，您应该使用以下代码：

```
$.get("backend.php", function(response) {
    alert(response);
  }) 
```

或者，要在 UI 上显示该数据，请将其分配给任何 html 元素。

如需更多了解，请访问：[jQuery.get()](http://api.jquery.com/jQuery.get/)链接

# java - JAX-RS 具有相同路径的多个类

> ID：12097292
> 
> 赞同：12
> 
> 时间：2012-08-23T17:43:57.070
> 
> 标签：java, jersey, jax-rs

使用 JAX-RS，是否可以将多个类分配给单个路径？我正在尝试做这样的事情：

```
@Path("/foo")
public class GetHandler {
    @GET
    public Response handleGet() { ...
}

@Path("/foo")
public class PostHandler {
    @POST
    @Consumes(MediaType.APPLICATION_JSON)
    public Response handlePost() { ...
} 
```

这显然是不允许的，因为我得到：

```
com.sun.jersey.api.container.ContainerException: A root resource, class PostHandler, has a non-unique URI template /foo 
```

我总是可以创建一个类来处理请求，然后委托给辅助类。我希望有一种标准的方式来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T18:13:20.457

JAX-RS 规范不禁止这样的映射。例如，Resteasy JAX-RS 实现允许它。该功能应该是特定于球衣的。

关于：

> 我总是可以创建一个类来处理请求，然后委托给辅助类。我希望有一种标准的方式来做到这一点。

通常你有与路径同名的资源类：

```
@Path("/foo")
public class FooResource {
    @GET
    @Path("/{someFooId}")
    public Response handleGet() {
      ...
    }

    @POST
    @Consumes(MediaType.APPLICATION_JSON)
    public Response handlePost() {
       ...
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T18:41:18.820

您不能将多个资源映射到同一路径。几天前我尝试过，但遇到了类似的错误。

我最终为一个资源创建了子路径，例如 /api/contacts 为另一个资源创建了 /api/tags。

唯一的另一条长路是在多个包中创建资源，然后为每个包创建不同的应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-29T03:06:07.350

我遇到了类似的问题，将类级别 @PATH 注释设为空字符串并将资源名称移动到方法级别 @PATH 注释修复了这个问题。

```
@Path("")
public class GetHandler {
  @GET
  @Path("/foo")
  public Response handleGet() {
    // impl
  }
}

@Path("")
public class PostHandler {
  @POST
  @Path("/foo")
  @Consumes(MediaType.APPLICATION_JSON)
  public Response handlePost() {
    // impl
  }
} 
```

# python - 家中的“.directory”可以接受吗？

> ID：12097293
> 
> 赞同：3
> 
> 时间：2012-08-23T17:44:02.243
> 
> 标签：python, configuration

我想将脚本的数据保存到磁盘以在脚本下次运行时加载。为简单起见，在那里使用`os.path.expanduser('~')`并保存一个名为“.myscript_data”的目录是个好主意吗？它只需要由脚本读取，并且为了避免给用户造成混乱，我希望它被隐藏起来。在用户计算机上放置隐藏的“.files”是否可以接受？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T17:54:08.500

在 Windows 上，使用`os.environ['APPDATA']`;的子文件夹 在 Linux 上，一个点文件夹`$HOME`是典型的。

您还可以考虑将文件放在`~/.config`* 的子目录中，这是一种新兴的配置文件放置标准。另请参阅[XDG 基本文件规范](http://standards.freedesktop.org/basedir-spec/basedir-spec-latest.html)。

不完全相关，但很有趣：[点文件的起源](https://plus.google.com/101960720994009339267/posts/R58WgWwN9jp)

*（编辑）更准确地说，`os.environ.get('XDG_CONFIG_HOME', os.path.expanduser('~/.config'))`根据 XDG 规范。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T18:05:19.690

在 Linux 上，我建议在 中使用文件或目录（无点文件）`os.environ['XDG_CONFIG_HOME']`，在大多数情况下是目录 $HOME/.config。然而，$HOME 中的点文件也经常被使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T17:53:50.693

是的，这是大多数 Unix 系统的标准做法。`Creating directory .dir to store script state`为了透明起见，最好在第一次创建存储位置时打印信息性消息。

如果您希望存储大量数据，最好与用户确认位置。

这也是您的应用程序的任何其他配置文件的标准位置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T17:50:41.667

是的。（我假设您使用的是 linux，对吗？）
另请参阅[this](http://ask.fedoraproject.org/question/726/whats-the-equivalent-to-appdata-folder-in-linux)。

# selenium - 从隐藏的下拉菜单中选择选项

> ID：12097301
> 
> 赞同：2
> 
> 时间：2012-08-23T17:44:36.470
> 
> 标签：selenium, webdriver, selenium-webdriver, xpath

```
<table id="rusTable" class="groupTable" cellspacing="0" cellpadding="0">
  <tbody class="ui-sortable" style="">
    <tr class="groupTop ruBorder" style="display: table-row;">
    <tr id="ru0" class="siru">
    <tr class="ruOp off">
      <td class="first"></td>
      <td colspan="3">
        <select class="ruOpSelect">
          <option></option>
          <option value="AND">AND</option>
          <option>AND NOT</option>
          <option>OR</option>
        </select>  
      </td>
      <td class="last"></td>
    </tr>
    <tr id="ru1" class="siru">
    <tr class="ruOp off">
      <td class="first"></td>
      <td colspan="3">
      <td class="last"></td>
    </tr>
    <tr id="ru2" class="siru">
    <tr class="groupBtm ruBorder" style="display: table-row;">
  </tbody>
  <tfoot>
</table> 
```

我想选择 AND 选项

Selenium 网络驱动程序代码

```
actions.moveToElement(driver.findElement(By.xpath("//*@id='ruTable']/tbody/tr[3]/td[2]"))).build().perform();
waitForElement(By.xpath("(//*[@id='ruTable']//*[contains(@class,'ruOpSelect')])[1]"),30);
new Select(driver.findElement(By.xpath("(//*[@id='ruTable']//*[contains(@class,'ruOpSelect')])[1]"))).selectByVisibleText("AND"); 
```

它会执行悬停动作，但不会从下拉菜单中选择任何内容

> *错误 - 等待 By.xpath 定位的元素可见性 30 秒后超时*
> *：（`//*[@id='ruTable']//*[contains(@class,'ruOpSelect')])[1]`*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T19:39:06.967

尝试使用这个 xpath，只需点击这个：

```
"//select[@class='ruOpSelect']/option[text()='AND']" 
```

`select`我通常在我的和下一个级别中以“”开头的任何下拉菜单`xpath`都应该是选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T06:01:31.130

我用

```
Thread.sleep(3000); 
```

在 moveToElement 操作之后。为我工作。然后我想你需要点击元素来选择它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T12:36:54.537

在这种情况下，我使用 jsExecutor 从隐藏的下拉菜单中选择选项。总是为我工作：

```
String cssLocator =  "tbody.ui-sortable tr.ruOp off td select.ruOpSelect option[value="AND"]"; 
//find css locator of the needed AND element in dropdown. I use firepath (addon to firebug).
JavascriptExecutor js = (JavascriptExecutor) driver;
        StringBuilder stringBuilder = new StringBuilder();
        stringBuilder.append("var x = $(\'"+cssLocator+"\');");
        stringBuilder.append("x.click();");
        js.executeScript(stringBuilder.toString()); 
```

希望这对你有用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-25T05:43:28.407

您可以使用此代码选择特定选项

```
 IdentifyBy By;
 waitForDropDownEnable(By.xpath, "xpath");
 WebElement element = findElement(BY.xpath("xpath for the element"));
 Select select = new Select(element);
 List<WebElement> options = select.getOptions();
 String values = "";
  for(int index=0; index<options.size(); index++) {
        if(!values.equals("")) {
            values += ", ";
        }
        values += options.get(index).getText();
 }
 select.selectByVisibleText(value);

  public void waitForDropDownEnable(final IdentifyBy idBy, final String controlDesc) {
             int timeout =30 * 1000;

        final long MAX_TIME_OUT = 300000; 
        final long DELAY = 250;
        final long DEAD_LINE = System.currentTimeMillis() + MAX_TIME_OUT;
        boolean isEnabled = false;

        try {
            while(System.currentTimeMillis() <= DEAD_LINE) {
                 getWebDriver().manage().timeouts().implicitlyWait(0,TimeUnit.SECONDS);

             if(findElement(By.xpath("")).isEnabled()) {

                    isEnabled = true;
                    break;
                }

                Thread.sleep(DELAY);
            }
        } catch (WebDriverException wdex) {
            ;;
        } catch(Exception ex) {
            ;;
        }

     }
} 
```

# visual-studio-2010 - Visual Studio 相对路径宏到项目位置

> ID：12097304
> 
> 赞同：4
> 
> 时间：2012-08-23T17:44:54.910
> 
> 标签：visual-studio-2010, relative-path

Visual Studio 2010 中是否有一个宏引用选项 > 项目和解决方案 > 常规下指定的“项目位置”？我想设置一些相对于该位置的包含，而不是指定绝对路径。

例如，如果我的默认项目位置是：

```
c:\projects 
```

我有一个项目：

```
c:\projects\solution1\project1 
```

我想做这样的事情：

```
$(ProjectsDir)\<mypath> 
```

我发现最接近的是：

```
$(SolutionDir)\..\<mypath> 
```

但这意味着，如果我重新定位我的解决方案，路径就会中断。

# c# - 如何强制 ADO.NET 将 Excel 列的类型推断为 String 而不是 Double？

> ID：12097306
> 
> 赞同：1
> 
> 时间：2012-08-23T17:44:56.003
> 
> 标签：c#, .net, sql, excel, ado.net

我在一个包含字符串和数字的 excel 文件中有一个列。我通过反复试验发现 ADO.NET 根据前 8 行的单元格类型推断列的类型。发生这种情况时，列下的所有字符串都不会添加到 DataTable 中。

我的目标是让 ADO.NET 将该列下的值作为字符串读取。

怎么可能呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T17:59:49.300

将 imex = 1 添加到您的连接字符串，类似于：

```
 string sConnectionString = "Provider=Microsoft.Jet.OLEDB.4.0;" +
     "Data Source=" + savePath +
      "; Extended Properties=" + (char)34 + "Excel 8.0;IMEX=1;"
      + (char)34; 
```

IMEX 参数（1 是输入模式）将列的数据类型强制为文本，以便正确处理字母数字值。

# c# - 使用 jquery 将下拉框值发送到控制器并用结果填充另一个下拉框

> ID：12097310
> 
> 赞同：0
> 
> 时间：2012-08-23T17:45:06.080
> 
> 标签：c#, jquery, asp.net-mvc

我知道已经有一些关于这个主题的帖子，但我似乎无法找出我的具体问题的答案。我很困惑为什么我不能将变量传递给控制器​​，但我可以传递一个硬编码的值......

这有效...

```
<script type="text/javascript">
$().ready(function () {
$("#MessageTypes").change(function () {
        //I know this is a horrible way to do it but for some reason I couldnt pass the sMessageType directly in
        var sMessageType = $("#MessageTypes").val();
        if (sMessageType == "Professional Voicefile") {
            $.get('@Url.Action("GenerateMessageDesc", new { MessageType = "Professional Voicefile" } )', function (data) {
                $('#MessageDesc').replaceWith(data);
            });
        }
        else if (sMessageType == "Dynamic Field") {
            $.get('@Url.Action("GenerateMessageDesc", new { MessageType = "Dynamic Field" } )', function (data) {
                $('#MessageDesc').replaceWith(data);
            });
        }
        else {
            //default to prof
            $.get('@Url.Action("GenerateMessageDesc", new { MessageType = "Professional Voicefile" } )', function (data) {
                $('#MessageDesc').replaceWith(data);
            });
        }
    });
}); 
```

......但事实并非如此。为什么？

```
<script type="text/javascript">
$().ready(function () {
    $("#MessageTypes").change(function () {
        var sMessageType = $("#MessageTypes").val();
            $.get('@Url.Action("GenerateMessageDesc", new { MessageType = sMessageType } )', function (data) {
                $('#MessageDesc').replaceWith(data);
            });
        }
    });
}); 
```

它说“当前上下文中不存在名称'sMessageType'”。

我想也许我应该使用某种 ajax 调用来调用控制器并更新视图，而不是我的操作方式——但是，为什么场景 1 有效但场景 2 无效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T17:51:09.930

> 它说“当前上下文中不存在名称'sMessageType'”。

`sMessageType`是一个 javascript 变量，它存在于您尝试在服务器端助手中使用的客户端上。这显然是不可能的，因为 javascript 在服务器上的客户端和服务器端脚本上运行。

这是实现这一目标的正确方法：

```
$.get('@Url.Action("GenerateMessageDesc")', { messageType: sMessageType }, function (data) {
    $('#MessageDesc').replaceWith(data);
}); 
```

这会将 MessageType 作为查询字符串参数传递，因此您的目标控制器操作可能如下所示：

```
public ActionResult GenerateMessageDesc(string messageType)
{
    ...
} 
```

# magento - 将分层导航移动到小部件/横幅显示下方

> ID：12097312
> 
> 赞同：1
> 
> 时间：2012-08-23T17:45:33.723
> 
> 标签：magento, magento-1.7

我在 EE 上，但我相信 CE 的问题是一样的。我想做的事情似乎很简单。我希望类别页面左侧导航中的所有横幅都显示在过滤器导航上方。我尝试的是通过添加 after="-" 调用来更改 XML 文件（在 EE 的情况下为 search.xml，在 CE 的情况下为 catalog.xml）。

```
<catalog_category_layered>
    <reference name="left">
        <remove name="catalog.leftnav"/>   
        <block type="enterprise_search/catalog_layer_view" name="enterprisecatalog.leftnav" template="catalog/layer/view.phtml" after="-" />  
    </reference>
</catalog_category_layered> 
```

然而，这并没有改变任何东西，横幅仍然在分层导航下方加载。

如果我将小部件设置为加载到“所有页面”的左列中，它将正确加载到列的顶部。此解决方案是不可取的，因为它还会在主页上加载小部件。我们只希望这会影响类别页面。

我还可以一起删除 XML 块并将其作为横幅加载到小部件中，这样我就可以将其放置在左栏中的任何位置。This is also undesirable as it breaks our AJAX loading of the page when a layered navigation option is selected.

小部件/横幅块是否有名称，以便我可以在 XML 中说 after="widget.banner.block.name"？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T20:10:40.623

我发现这样做的唯一方法是在加载后使用 JQuery 将包含横幅的小部件推送到分层导航上方。

```
//Move Category Widget zone above the layered navigation
jQuery(".catalog-category-view .col2-left-layout .col-left .widget").insertBefore(jQuery(".catalog-category-view .col2-left-layout .col-left .block-layered-nav")); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-21T08:31:34.513

你应该给你的块命名，然后按照你的意愿对它们进行排序：

```
<block type="whatever" name="something" as="something" 
    template="bla.phtml" before="-" />

<block type="whatever" name="something_else" as="something_else" 
    template="bla.phtml" after="something" />

<block type="whatever" name="something_new" as="something_new" 
    template="bla.phtml" after="something_else" /> 
```

如果您想在主页的所有页面上显示小部件，您可以将其设置为显示在所有页面上，然后从主页中删除，如下所示：

1) 转到 CMS -> 页面，然后编辑主页

2）向页面添加布局更新，并专门删除小部件块：

```
<reference name="left">
    <action method="unsetChild"><alias>child_block_name</alias></action>
</reference> 
```

# android - 如何仅使用可用号码制作号码选择器？

> ID：12097316
> 
> 赞同：1
> 
> 时间：2012-08-23T17:45:49.953
> 
> 标签：android, sqlite

我的应用程序正在使用 api 7。我不知道从哪里开始这个挑战。

我有一些存储在 1-99 之间的数字的 SQLite DB。现在我想为这个范围制作数字选择器，它也会删除数据库中已经存在的数字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T18:21:11.827

您可能必须制作自己的小部件。这会有些涉及，并且由于您是 Android 初学者，您最好花时间想出不同的输入法。

如果您决定编写自己的小部件，我建议您扩展 LinearLayout，然后在构造函数内部，执行类似以下伪代码的操作：

```
setOrientation(VERTICAL);
addView ImageButton arrowUpButton;
addView EditText numberEditText;
addView ImageButton arrowDownButton;

arrowUpButton.setOnClickListener {
     int num = myListOfInts.get(currentIndex++);

     numberEditText.setText(num);

}

//vice versa for arrowDownButton 
```

您还必须为 myListOfInts 创建一个设置器。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T18:34:00.167

创建一个数字 0-99 的列表，然后在您的数据库上进行查询。对于数据库结果中的每一行，检查列表是否包含（类似于 list.contains(number)。如果存在，请将其删除（list.remove(item)），然后继续下一行

# mysql - mysql_real_escape_string 防止将带有坏字符的未经处理的字段添加到数据库中

> ID：12097328
> 
> 赞同：0
> 
> 时间：2012-08-23T17:46:32.203
> 
> 标签：mysql, string, escaping

mysql_real_escape_string 正在防止将带有坏字符的未清理字段添加到数据库中。我不想在每个表单上指定所有字段（因为这对每个字段来说都很麻烦，并且不适应人们可能包含的特殊字符或拼写错误），但目前这段代码阻止了任何事情如果在未清理的字段中存在任何威胁字符但仍前进到下一页，则插入。

我也在此页面上使用 jQuery 验证，但无法使用它来防止 SQL 注入。

```
 function clean($str) {
     $str = @trim($str);
     if(get_magic_quotes_gpc()) {
     $str = stripslashes($str);
     }
     return mysql_real_escape_string($str);
   }

//Sanitize the POST values
   $user_name = clean($_POST['user_name']);
   $password = clean($_POST['password']);

//Create INSERT query
   $qry = "INSERT INTO customer_info(fname, lname, gender, zip, email, phone, terms, security_question, security_answer, participating_retailers, notify_new_items, notify_promotions, priority1, priority2, priority3, priority4, priority5, privacy, user_name, password) 
 VALUES('$_POST[fname]','$_POST[lname]','$_POST[gender]','$_POST[zip]','$_POST[email]','$_POST[phone]','$_POST[terms]','$_POST[security_question]','$_POST[security_answer]','$_POST[participating_retailers]','$_POST[notify_new_items]','$_POST[notify_promotions]','$_POST[priority1]','$_POST[priority2]','$_POST[priority3]','$_POST[priority4]','$_POST[priority5]','$_POST[privacy]','$user_name','$password')";
   $result = @mysql_query($qry);  

  $qry="SELECT * FROM customer_info WHERE user_name='$user_name' AND password='$password'";  
  $result=mysql_query($qry);            
  session_regenerate_id();
        $member = mysql_fetch_assoc($result);
        $_SESSION['SESS_USER_ID'] = $member['user_id'];
        $_SESSION['SESS_FIRST_NAME'] = $member['fname'];
        $_SESSION['SESS_LAST_NAME'] = $member['lname'];
        session_write_close();
        header("location: flatter-form.html");
        exit(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T17:53:19.860

`mysql_query`已被弃用。`PDO`或`mysqli`两者都提供针对 SQL 注入的安全性。除了具有转义功能外，`PDO`还具有引用字符串的能力。使用准备好的和参数化的查询使得攻击者几乎不可能注入 SQL。

```
$stmt = $pdo->prepare('SELECT * FROM employees WHERE name = :name');

$stmt->execute(array(':name' => $name));

foreach ($stmt as $row) {
    // do something with $row
} 
```

样本来自：[准备好的陈述](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

看看[PDO 与 MySQLi](http://net.tutsplus.com/tutorials/php/pdo-vs-mysqli-which-should-you-use/)的对比。

# wcf - SecurityMode.None 导致 TimeoutException 而不是 CommunicationObjectFaultedException

> ID：12097331
> 
> 赞同：2
> 
> 时间：2012-08-23T17:47:01.047
> 
> 标签：wcf, wcf-security, nettcpbinding, net.tcp

我有一个带有 net.tcp 绑定的 WCF 自托管服务。我需要它通过可靠的会话不安全。

当我将其配置为非安全时，对已关闭服务的所有调用（关闭、崩溃、进程终止 - 任何原因）都会导致超时异常（挂起一分钟并超时）。默认情况下（模式=传输）-我同时得到 CommunicationObjectFaultedException，似乎基础设施自动确定连接中断。

**如何使用非安全设置立即获得 CommunicationObjectFaultedException？**

服务器和客户端配置没问题。一切正常，直到我更改为非安全（当然我更改了服务器和客户端配置）。我花了很多时间来解决这个问题，发现了一些类似的问题但没有答案。

服务器配置：

```
<netTcpBinding>
<binding name="TCPBinding" receiveTimeout="Infinite">
  <reliableSession enabled="true" inactivityTimeout="00:10:00"/>
  <security mode="None">
  </security>
</binding>
</netTcpBinding> 
```

# javascript - .aspx 页面 - 在 pageLoad() 中使用 document.getElementById

> ID：12097333
> 
> 赞同：1
> 
> 时间：2012-08-23T17:47:22.117
> 
> 标签：javascript, asp.net

在使用 AJax 编写 .net Web 应用程序时，我是否应该*始终*使用全局变量在 pageLoad() 函数中存储控件？

**例子 -**

```
 var x;
  var y;

  function pageLoad() {

            x = document.getElementById("<%= cboX.ClientID %>");
            y = document.getElementById("<%= tbxY.ClientID %>");  
  }

  function doStuff1() {

            x.enabled = false;
            y.style.visibility = "visible";
  } 
```

**或者在某些情况下我应该这样做 -**

```
 function doStuff2() {

            document.getElementById("<%= cboX.ClientID %>").enabled = false;
            document.getElementById("<%= tbxY.ClientID %>").style.visibility = "visible";
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T17:48:36.363

我会避免使用全局变量并这样做：

```
function doStuff2() {
    document.getElementById("<%= cboX.ClientID %>").enabled = false;
    document.getElementById("<%= tbxY.ClientID %>").style.visibility = "visible";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T17:52:57.800

我将创建一个具有每个控件属性的全局对象。

这种方法在每个函数中的问题：

```
function doStuff2() {
    document.getElementById("<%= cboX.ClientID %>").enabled = false;
    document.getElementById("<%= tbxY.ClientID %>").style.visibility = "visible";
} 
```

当您在后面的代码中重命名控件时，您不能自动重构 JavaScript。

如果你这样做：

```
var Controls = {};

function pageLoad() {

        Controls.x = document.getElementById("<%= cboX.ClientID %>");
        Controls.y = document.getElementById("<%= tbxY.ClientID %>");  
}

function doStuff1() {

        Controls.x.enabled = false;
        Controls.y.style.visibility = "visible";
} 
```

然后，当您在字符串中引用客户端 ID 时，您只有一个位置。

# php - 从 URL 获取 MySQL ID 以在页面上显示信息

> ID：12097334
> 
> 赞同：1
> 
> 时间：2012-08-23T17:47:23.730
> 
> 标签：php, mysql, e-commerce

我有一个产品页面，其中 8 个产品图像在一个列表中，该列表由存储在 MySQL 数据库中的图像填充。这些图像都有关联的 ID，其中价格、产品名称和描述也与相同的 ID 关联。

我想做的事情背后的想法是；当用户单击 8 个产品图像中的一个时，他们将被重定向到“结帐”页面，该页面将显示相同的图像，以及数据库中该 ID 下存储的所有信息。

截至目前，我有结帐页面 URL，包括图像的 ID (url.com/checkout.php?id=1)，我希望找到一种方法来获取存储在 URL 中该 ID 下的所有信息显示在页面上调用的位置。

这是我的 php 代码，它在产品页面的列表中显示图像：

```
 // Grab the data from our template table 
            $sql = "select * from templates"; 
            $result = mysql_query($sql) or die ("Could not access DB: " . mysql_error()); 
            while ($row = mysql_fetch_assoc($result)) 
            { 
                echo "<li>"; 
                echo "<a class=\"caption\" href=\"purchase.php?id=\"" . $row['id'] . ">"; 
                // Note that we are building our src string using the ID from the database 
                echo "<img src=\"http://URL-REMOVED.com/file_display.php?id=" . $row['id'] . "\" />"; 
                echo "<span>"; 
                echo "<big>" . $row['name'] . "</big>"; 
                echo $row['description']; 
                echo "</span>"; 
                echo "</a>"; 
                echo "</li>"; 

            } 
```

这是应该收集点击产品信息的 php 代码（但没有）：

```
 if (isset($_GET['id'])) 
        $id=$_GET['id']; 
    else 
         $id=1; 

    if (isset($_GET['action'])) 
        $action=$_GET['action']; 
     else 
        $action="empty"; 

    switch($action){ 

        case "add": 

        if($_SESSION['cart'][$id]) 
           $_SESSION['cart'][$id]++; 
        else 
            $_SESSION['cart'][$id]=1; 

         break;     

        case "remove": 

        if($_SESSION['cart'][$id]) 
       { 
           $_SESSION['cart'][$id]--; 

           if($_SESSION['cart'][$id]==0) 
    unset($_SESSION['cart'][$id]); 
           } 

          break;     

          case "empty": 
         unset($_SESSION['cart']); 

         break;     
         } 

 //Display Cart 

      if(isset($_SESSION['cart'])) { 

            $total=0; 
            foreach($_SESSION['cart'] as $id => $x) { 
            $result=mysql_query("select image,name,price,description from templates WHERE id=$id"); 
            $myrow=mysql_fetch_array($result); 
            $image=$myrow['image']; 
            $name=$myrow['name']; 
            $price=$myrow['price']; 
            $description=$myrow['description']; 

      }  
    } 
```

这是应该显示信息的实际 HTML/PHP：

```
 <a class="caption" href="checkout.php"> 
            <img src="http://URL-REMOVED.com/file_display.php?id=<?php $myrow['id'] ?>"/> 
            <span> 
                <big> 
                    <strong><?php $myrow['name'] ?></strong> 
                </big> 

                <div class="price"><?php $myrow['price'] ?></div> 
            </span> 
        </a> 
    </div> 
    <div id="info_form_container"> 
    <div class="product_info"> 
        <div class="control-group"> 
            <strong>Template Name:</strong>  
            <?php $myrow['name'] ?> 
        </div> 

        <div class="control-group"> 
            <strong>Template Description:</strong> 
            <?php $myrow['description'] ?> 
        </div> 

        <div class="control-group"> 
            <strong>Template Price: </strong> 
            <?php $myrow['price'] ?> 
        </div> 
    </div> 
```

我想我不确定这是否是最好的方法？但我绝对希望将图像存储在数据库中，并且我绝对想使用 ID 调用它们......

我怎样才能做到这一点？我的代码哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T18:14:23.313

编辑：我认为我第一次没有理解你的问题。尝试使用它来生成您的产品列表，更新连接信息。如果可行，请使用以下方法清理变量并将连接信息存储在其他位置

```
<?php
    $mysqli_connection = new mysqli("localhost", "username", "password", "database");
    $sql = "SELECT * FROM templates"; 
    $result = $mysqli_connection->query($sql);
    while ($row = $result->fetch_array(MYSQLI_ASSOC)) { 

        $id = $row['id'];
        $name = $row['name'];
        $description = $row['description'];

        echo '<li>'; 
        echo '<a href="purchase.php?id='.$id.'" class="caption">'; 
        echo '<img src="http://URL-REMOVED.com/file_display.php?id='.$id.'" />'; 
        echo '<span>'; 
        echo '<big>'.$name.'</big>'; 
        echo $description; 
        echo '</span>'; 
        echo '</a>'; 
        echo '</li>';
    }
?> 
```

OG 答案：

我认为您所做的一切都很好。这是我使用的方法（尽管我的方法看起来更整洁一些）。运行您的 PHP 函数以使用您获得的 ID 查询您的 MySQL 数据库，然后开始将您获得的信息转储到您的站点中。为了提高可读性并减少拼写混淆，将`$myrow['whatever']`结果分配给变量以呼应出来可能会有所帮助，但这对我来说比什么都更美观。

要修复 MySQL 并使用 mysqli，请尝试以下操作：

```
$sql = "SELECT * FROM templates"; 
$result = $mysqli_connection->query($sql);
while ($row = $result->fetch_array(MYSQLI_ASSOC)) { 
    echo "<li>"; 
    echo "<a class=\"caption\" href=\"purchase.php?id=\"" . $row['id'] . ">"; 
    // Note that we are building our src string using the ID from the database 
    echo "<img src=\"http://URL-REMOVED.com/file_display.php?id=" . $row['id'] . "\" />"; 
    echo "<span>"; 
    echo "<big>" . $row['name'] . "</big>"; 
    echo $row['description']; 
    echo "</span>"; 
    echo "</a>"; 
    echo "</li>";
} 
```

并尝试使用以下方法清理您的信息：

```
$my_stuff = mysqli_connection->real_escape_string($row['that_stuff']); 
```

此外，您知道如果您愿意，可以在 echo 语句周围使用单引号 ('')，对吗？可能会使转义所有双引号更容易..

所以总的来说，这可能是我要做的一个粗略的例子，但我会将它分成函数，并可能创建一些全局变量（例如连接本身）：

```
<?php

    $mysqli_connection = new mysqli("localhost", "username", "password", "database");
    $sql = "SELECT * FROM templates WHERE id=$id"; 
    $result = $mysqli_connection->query($sql);
    // I'm assuming there is only one entry, so no while loop for me
    $row = $result->fetch_array(MYSQLI_ASSOC);

    $your_title = $mysqli_connection->real_escape_string($row['title']);
    $path_to_image = $mysqli_connection->real_escape_string($row['image']);
    $description = $mysqli_connection->real_escape_string($row['description']);
    $price = $mysqli_connection->real_escape_string($row['price']);

?>

<html>
    <head></head>
    <body>
        <h3><?php echo $your_title; ?></h3>
        <img src="<?php echo $path_to_image; ?>" />
        <ul>
            <li>Description: <?php echo $description; ?></li>
            <li>Price: <?php echo $price; ?></li>
            <!-- etc..--> 
```

# java - 如何解析网页中的动态内容？

> ID：12097352
> 
> 赞同：5
> 
> 时间：2012-08-23T17:48:51.553
> 
> 标签：java, javascript, html-parsing, jsoup, dynamic-data

我尝试从此网址获取代理列表：

[免费代理列表](http://spys.ru/en/free-proxy-list/)

这会很酷，但端口号是动态的 JavaScript 内容。如何从此页面获取 JavaScript 生成的内容？我有 jsoup 和 djNativeSwing 但我想在后台线程中执行此操作。

```
JWebBrowser webBrowser = new JWebBrowser();
webBrowser.navigate("http://spys.ru/en/free-proxy-list/");
System.out.println(webBrowser.getHTMLContent()); 
```

此代码返回 Null 结果。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T18:02:14.260

调用 getHtmlContent() 方法时，浏览器尚未完成加载。改用这样的东西：

```
JWebBrowser webBrowser = new JWebBrowser();
webBrowser.navigate("http://spys.ru/en/free-proxy-list/");
webBrowser.addWebBrowserListener(new WebBrowserListener(){
   public void loadingProgressChanged(WebBrowserEvent e){
       if(e.getWebBrowser().getLoadingProgress()==100)
            System.out.println(webBrowser.getHTMLContent());
   }
}
/* Note: I wrote this in the comment field without any testing,
   you probably have to make the webBrowser final. */ 
```

[JavaDocs](http://djproject.sourceforge.net/ns/documentation/javadoc/chrriis/dj/nativeswing/swtimpl/components/JWebBrowser.html)是你的朋友！

# php - Zend 框架、PHPUnit 和事务

> ID：12097354
> 
> 赞同：0
> 
> 时间：2012-08-23T17:49:00.843
> 
> 标签：php, mysql, zend-framework, transactions, phpunit

我想在 Zend Framework 应用程序中使用 PHP 单元。我需要在测试中进行几个数据库写入操作。我想在 setUpBeforeClass() 方法中启动一个 MySQL 事务。这是可能的，但如果我尝试在 tearDownAfterClass() 方法中回滚事务，他会抛出异常并显示消息“没有活动事务”。测试方法在数据库中进行写入操作。但是，如果我在测试方法本身中启动事务。它像我想要的那样工作。我不明白它为什么会有这样的反应。知道的人解释一下吗？

```
<?php

class ConferenceControllerTest
extends PHPUnit_Framework_TestCase
{

    /**
     * A database connection.
     * @var Zend_Db_Adapter_Pdo_Mysql
     */
    protected static $hostDb = null;

    public static function setUpBeforeClass()
    {
        static::$hostDb = Zend_Registry::get('db_host');
        static::$hostDb->beginTransaction();
        // The transaction for the Adapter is activated. But not inside the tests anymore.
    }

    public function testTest1()
    {
        // At this position teh transaction is not setted anymor? Why?
        static::$hostDb->beginTransaction();

        $sql = 'INSERT INTO test(test) VALUES(5);';
        static::$hostDb->exec($sql);
    }

    public static function tearDownAfterClass()
    {
        try
        {
            static::$hostDb->rollBack();
        }
        catch(Exception $exception)
        {
            $message = $exception->getMessage();
            Zend_Debug::dump($message);
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T12:26:56.777

我认为您可能会遇到 phpUnit 的功能，即在每个单元测试之间备份静态和其他全局变量，请参阅[手册的 Fixtures 章节的“全局变量”部分](http://www.phpunit.de/manual/current/en/fixtures.html#fixtures.global-state)

快速破解方法是在您班级上方的评论中添加这一行：* @backupStaticAttributes disabled

这仍然给您留下了 xUnit Patterns 书，这本书称之为难闻的气味。我假设您有一些 testXXX 函数，您希望以特定顺序运行，每个函数都取决于前一个函数的结果？这需要在每个函数上使用@depends，而且很容易出错。

另一种方法是单个长单元测试函数，并将 DB 代码放在 setUp() 和 tearDown() 中：

```
public function setUp()
{
    $this->db = Zend_Registry::get('db_host');
    $this->db->beginTransaction();
}

public function tearDown()
{
    try
    {
        $this->db->rollBack();
    }
    catch(Exception $exception)
    {
        $message = $exception->getMessage();
        Zend_Debug::dump($message);
    }

public function testTestVariousDBActions()
{
    $sql = 'INSERT INTO test(test) VALUES(5);';
    $this->db->exec($sql);

    //another DB action
    $this->assertEquals(...)

    //another DB action
    $this->assertEquals(...)

    //...
} 
```

这样做的好处是，如果任何断言失败，则不会尝试任何后续断言。但是会始终调用 tearDown() 以便恢复数据库。

缺点可能是你得到了一个非常长的函数。使用重构来处理这个问题（例如，如果你真的希望每个动作和它的测试在它自己的函数中，重构它看起来像那样并`testTestVariousDBActions()`依次调用它们）。

# c# - 传递 Lambda 表达式而不是对象的优势

> ID：12097355
> 
> 赞同：1
> 
> 时间：2012-08-23T17:49:01.290
> 
> 标签：c#, lambda, fluentvalidation

顺便说一句，我一直在查看`FluentValidation`哪个是一个不错的验证库，但我注意到它们传入`LambdaExpression`而不是对象属性，我想了解这种用法​​的优势：

```
using FluentValidation;

public class CustomerValidator: AbstractValidator<Customer> {
  public CustomerValidator() {
    RuleFor(customer => customer.Surname).NotEmpty();
    RuleFor(customer => customer.Forename).NotEmpty().WithMessage("Please specify a first name");
    RuleFor(customer => customer.Company).NotNull();
    RuleFor(customer => customer.Discount).NotEqual(0).When(customer => customer.HasDiscount);
    RuleFor(customer => customer.Address).Length(20, 250);
    RuleFor(customer => customer.Postcode).Must(BeAValidPostcode).WithMessage("Please specify a valid postcode");
  }

  private bool BeAValidPostcode(string postcode) {
    // custom postcode validating logic goes here
  }
}

Customer customer = new Customer();
CustomerValidator validator = new CustomerValidator();
ValidationResult results = validator.Validate(customer);

bool validationSucceeded = results.IsValid;
IList<ValidationFailure> failures = results.Errors; 
```

正如您所看到`RuleFor(customer => customer.Surname).NotEmpty();`的那样， `RuleFor(customer.Surname).NotEmpty();`还不够干净吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T17:51:51.387

> 相反，`RuleFor(customer.Surname).NotEmpty();`还不够干净吗？

不，因为在您打电话时`RuleFor`，您没有客户 - 因此您无法访问他们的姓氏。

与委托的情况一样，您正在传递*要在以后执行的代码*。该表达式`customer.Surname`是一个将在现有变量的上下文中*立即计算的表达式。*`customer`

现在，如果我们有神话般的[infoof](http://blogs.msdn.com/b/ericlippert/archive/2009/05/21/in-foof-we-trust-a-dialogue.aspx)运算符，我们*可以*在不创建委托的情况下做到这一点。我们可能会写出类似的东西：

```
RuleFor(infoof(Customer.Surname)).NotEmpty() 
```

这将是可爱的。该`RuleFor`方法将获取该属性引用并稍后针对给定客户对其进行评估。精彩的。

不幸的是，我们没有那个运营商——所以表达“当你有客户时，抓住`Surname`财产”这个想法的最简单方法是使用委托。它也非常灵活，因为它（几乎）可以处理您想要执行的任何代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T17:53:52.060

如果您要传递`customer.SurName`，您将指向`SurName`特定`customer`实例的属性值。使用 lambda 函数允许验证逻辑在调用验证逻辑时获取客户对象，然后检索该*客户*`SurName`的属性。

# java - 如何从电子名片中获取电话号码

> ID：12097357
> 
> 赞同：2
> 
> 时间：2012-08-23T17:49:07.850
> 
> 标签：java, mobile, netbeans, io, libraries

我正在使用 cardme 库来处理 vcards。以下是我的代码

```
package vcardtest;

import java.io.*;
import java.util.Iterator;
import java.util.logging.Level;
import java.util.logging.Logger;
import net.sourceforge.cardme.engine.VCardEngine;
import net.sourceforge.cardme.vcard.VCard;
import net.sourceforge.cardme.vcard.features.EmailFeature;
import net.sourceforge.cardme.vcard.features.NameFeature;
import net.sourceforge.cardme.vcard.features.NicknameFeature;
import net.sourceforge.cardme.vcard.features.TelephoneFeature;
import net.sourceforge.cardme.vcard.types.parameters.TelephoneParameterType;

public class VCardTest 
{

    public static void main(String[] args) 
    {
        File vcardFile = new File("C:/Users/yohan/Contacts/Yohan Weerasinghe.vcf");
        VCardEngine vcardEngine = new VCardEngine();
        try 
        {
            VCard vcard = vcardEngine.parse(vcardFile);
            String name = vcard.getName().getGivenName();

            EmailFeature email = vcard.getEmails().next();
            String sEmail = email.getEmail();

            NicknameFeature nickName = vcard.getNicknames();
            Iterator<String> nicknames = nickName.getNicknames();
            String sNickName = nicknames.next();

            Iterator<TelephoneFeature> telephoneNumbers = vcard.getTelephoneNumbers();
            TelephoneFeature next = telephoneNumbers.next();

            String telephone = "";

                while(vcard.getTelephoneNumbers().hasNext())
                {
                    TelephoneFeature next1 = vcard.getTelephoneNumbers().next();
                    telephone = next1.getTelephone();

                    System.out.println(telephone);
                }

            Iterator<TelephoneParameterType> telephoneParameterTypes = next.getTelephoneParameterTypes();
            TelephoneParameterType next1 = telephoneParameterTypes.next();
            String type = next1.getType();

            TelephoneParameterType next2 = telephoneParameterTypes.next();
            String type2 = next2.getType();

            System.out.println( name );
            System.out.println(sEmail);
            System.out.println(sNickName);

            System.out.println(type);
            System.out.println(type2);

        } catch (IOException ex) 
        {
           ex.printStackTrace();
        }
    }
} 
```

但是，没有称为 getNumber() 之类的方法。如何获取手机号码和地号？请帮忙！

注意：我更新了代码。在那里，你可以看到我设法得到了电话号码。但是，这只会返回 HOME 电话，不会返回任何其他内容。甚至循环也没有停止。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T20:14:09.457

我可以看到

```
TelephoneFeature.getTelephone() 
```

我也建议看看

```
TelephoneFeature.getTelephoneParameterTypes() 
```

查看类型

**更新**

小心迭代器

每次调用 vcard.getTelephoneNumbers() 都会创建一个 new `Iterator`，这意味着您可能会陷入无限循环。

```
Iterator<TelephoneFeature> itNumbers = vcard.getTelephoneNumbers();
while (itNumbers.hasNext()) {

    TelephoneFeature next1 = itNumbers.next();
    String telephone = next1.getTelephone();

    System.out.println(telephone);
    System.out.println("types = " + next1.getExtendedTelephoneParameterSize());

    Iterator<XTelephoneParameterType> itTypes = next1.getExtendedTelephoneParameterTypes();
    while (itTypes.hasNext()) {

        XTelephoneParameterType next = itTypes.next();
        System.out.println(" - " + next.getType() + " / " + next.getDescription());

    }

} 
```

我已经更正了，问题（不是错误）出在测试仪上，而不是 API 上：P

如果你添加

```
Iterator<TelephoneParameterType> itNTypes = next1.getTelephoneParameterTypes();
while (itNTypes .hasNext()) {

    TelephoneParameterType next = itNTypes .next();
    System.out.println(" - " + next.getType() + " / " + next.getDescription());

} 
```

到上一个循环，你应该得到你正在寻找的东西

# iphone - CFURLCreateStringByAddingPercentEscapes，奇怪的行为？

> ID：12097358
> 
> 赞同：4
> 
> 时间：2012-08-23T17:49:11.030
> 
> 标签：iphone, objective-c, urlencode

我正在尝试对 URL 进行编码，我以前从未这样做过，所以当没有得到预期的结果时我很困惑。我正在`CFURLCreateStringByAddingPercentEscapes`这样做，但返回的内容看起来不像任何在线 URL 编码器/解码器，例如

```
-(void)urlEncodedString{

 NSString *str = @"\"Hi!! my name is John. \n What's your's?\"";

NSLog([(NSString *)CFURLCreateStringByAddingPercentEscapes(kCFAllocatorDefault,(CFStringRef)str, NULL, CFSTR("!$&'()*+,-./:;=?@_~"), kCFStringEncodingUTF8) autorelease]);

} 
```

我期待类似的东西：

> %5C%22Hi%21%21%20my%20name%20is%20John.%20%5Cn%20What%27s%20your%27s%3F%5C%22

但相反，我得到：

> 2i2212yame 0s2ohn3.786691E-27020A2hat º»åå2our 0.0000002

这不可能是正常的。我一直在寻找并尝试了一切，我这样做的方式显然应该有效。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T18:01:06.033

您将结果作为第一个字符串传递给`NSLog`该字符串，该字符串需要具有使用百分号的[格式的字符串。](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Strings/Articles/formatSpecifiers.html#//apple_ref/doc/uid/TP40004265-SW1)您实际上是在内存中用随机数据填充字符串，而不是每个 % 转义。要使用 Objective-C 对象说明符修复此日志：

```
NSLog(@"%@", [(NSString *)CFURLCreateStringByAddingPercentEscapes(kCFAllocatorDefault,(CFStringRef)str, NULL, CFSTR("!$&'()*+,-./:;=?@_~"), kCFStringEncodingUTF8) autorelease]); 
```

# vb.net - 如何在 VB.NET 中自动获取 SMTP 详细信息，如在 Thunderbird 中

> ID：12097359
> 
> 赞同：1
> 
> 时间：2012-08-23T17:49:17.793
> 
> 标签：vb.net, email, smtp

我制作了一个 VB.NET 应用程序。我已经阅读了有关如何使用 SMTP 从 VB.NET 发送电子邮件的教程，最后我得到了一个工作。

但我有一个问题，我不想打扰用户输入他的所有详细信息，例如 SMTP 服务器名称和所有这些东西。

我只希望用户输入他们的`Usename`以及`Password`所有其他必要的详细信息可用于应用程序。与雷鸟一样，当我输入我的`Usename`和`Password`在 Mozilla 雷鸟中时，它会自动获取所有其他必需的数据并配置我的电子邮件帐户。

现在我想要完成的是，用户应该填写他们的详细信息，即`Usename`和`Password`使用他们的电子邮件`Usename`，并且`Password`应该发送到程序中指定的电子邮件。

为了更多地解释我的项目类型，当发生错误时，我希望用户对其进行截图并使用此方法通过电子邮件发送给我。这样我就可以调查这个错误了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T20:27:06.400

没有自动的方法可以做到这一点。每个电子邮件设置都不同，并且没有自动配置规范。

Thunderbird 有一个内置数据库，它的开发人员构建和维护该数据库以提供此功能。请参阅： https: [//support.mozillamessaging.com/en-US/kb/isp-database](https://support.mozillamessaging.com/en-US/kb/isp-database)

您可以使用@domain.tld 执行相同的操作，以使您能够将用户电子邮件提供商与您的数据库相匹配。

Microsoft Exchange 确实提供了一个自动配置端点，但我认为它对您没有用处，因为它不能保证包含 SMTP 信息。

# php - 使用 PHPUnit 测试辅助函数

> ID：12097361
> 
> 赞同：5
> 
> 时间：2012-08-23T17:49:23.363
> 
> 标签：php, phpunit

假设我想测试一个简单的助手，它以类名作为参数并进行重定向。

如果从几个控制器内部的许多地方调用该函数，我应该如何测试它？我是否应该测试在整个代码中作为参数传递的每个类名（我自己将它们写在提供程序函数中）？或者是否有一个神奇的功能可以为我做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-23T18:32:23.180

*您的问题是依赖注入——如果正确*完成（而不是大多数流行的框架如何“实现”它）——被吹捧为代码可测试性的终极目标的确切原因。

要了解原因，让我们看看“辅助函数”和面向类的编程如何使您的控制器难以测试。

```
class Helpers {
    public static function myHelper() {
        return 42;
    }
}

class MyController {
    public function doSomething() {
        return Helpers::myHelper() + 100;
    }
} 
```

单元测试的重点是验证代码的“单元”是否独立工作。如果您不能隔离功能，那么您的测试将毫无意义，因为它们的结果可能会受到所涉及的其他代码行为的污染。这可能导致统计学家所说的 I 型和 II 型错误：基本上，这意味着您可以获得可能对您撒谎的测试结果。

在上面的代码中，不能轻易地模拟 helper 以确定它`MyController::doSomething`在*完全隔离外部影响的*情况下工作。为什么不？因为我们不能“模拟”辅助方法的行为来保证我们的`doSomething`方法实际上将 100 添加到辅助结果中。我们坚持使用助手的确切行为（返回 42）。这是正确的面向对象和控制反转完全消除的问题。让我们考虑一个例子：

如果`MyController` *要求*它的依赖项而不是使用静态辅助函数，则模拟外部影响变得微不足道。考虑：

```
interface AnswerMachine {
    public function getAnswer();
}

class UltimateAnswerer implements AnswerMachine {
    public function getAnswer() {
        return 42;
    }
}

class MyController {
    private $answerer;
    public function __construct(AnswerMachine $answerer) {
        $this->answerer = $answerer;
    }
    public function doSomething() {
        return $this->answerer->getAnswer() + 100;
    }

} 
```

现在，测试起来非常简单，实际上它`MyController::doSomething`确实将 100 添加到从应答机返回的任何内容中：

```
// test file

class StubAnswerer implements AnswerMachine {
    public function getAnswer() {
        return 50;
    }
}

$stubAnswer = new StubAnswerer();
$testController = new MyController($stubAnswerer);
assert($testController->doSomething() === 150); 
```

此示例还演示了如何在代码中正确使用接口可以大大简化测试过程。像 PHPUnit 这样的测试框架可以很容易地模拟接口定义以准确地执行您希望它们执行的操作，以便测试代码单元的隔离功能。

因此，我希望这些非常简单的示例能够展示依赖注入在测试代码时的强大功能。但更重要的是，我希望他们能证明，如果您选择的框架使用静态（只是全局的另一个名称）、单例和辅助函数，为什么您应该小心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T12:32:49.463

您无法针对需要测试的所有功能测试每种可能的参数组合；它会花费你比宇宙生命更长的时间。所以你使用人类智能（有些人可能称之为作弊;-)。只测试一次，在本例中使用模拟控制器作为参数。

然后看看你的代码，问问自己是否有任何其他传入的对象真的会让它的行为有所不同。对于您描述为“简单帮手”的东西，答案可能是否定的。但是，如果是，如何？创建另一个模拟不同行为的模拟控制器类。例如，这第二个控制器可能没有您的助手类期望调用的功能。您希望抛出异常。为此创建单元测试。

重复直到满意。

# curl - 使用 Curl 连接到 dotnetnuke

> ID：12097362
> 
> 赞同：0
> 
> 时间：2012-08-23T17:49:52.947
> 
> 标签：curl, dotnetnuke

我有一个 dotnetnuke 站点，我想在其中下载一些页面。该网站需要登录，我有。但我不知道如何让 curl 通过正确的身份验证。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T16:17:17.967

要访问受保护的页面，您需要传递一个身份验证 cookie。没有办法直接传递凭据（尽管如果您正在与使用新的[Services Framework](http://www.dotnetnuke.com/Resources/Wiki/Page/Services-Framework-Security.aspx)开发的服务进行通信）。

因此，我认为您将需要通过浏览器登录，然后复制您获得的 cookie 并将其传递到您的 curl 请求中。

# django - 用于编写查询的 Django HTSQL Web 界面没有响应

> ID：12097364
> 
> 赞同：2
> 
> 时间：2012-08-23T17:50:04.620
> 
> 标签：django, htsql

我正在尝试将 HTSQL 用于我的 Django 项目之一。为此，我按照[此处](http://htsql.org/blog/2012/introducing-django-gateway.html)给出的程序来提供 HTSQL/Django 要求。然后我克隆了 HTSQL 存储库，以便从[HERE](https://bitbucket.org/prometheus/htsql/src/e236a434ad3b/demo/django)尝试其中的示例/演示。我正在 Django v1.4 上对此进行测试。演示示例中使用的默认数据库是 sqlite3。[在 Django python shell 中，根据这个](https://stackoverflow.com/questions/12069384/django-htsql-transactionmanagementerror-with-sqlite-as-well-as-postgresql-backen)问题，查询现在工作正常。但正如[HTSQL 网站](http://edgar.htsql.org/officer)上所展示的，它有一个非常强大的前端来与数据库通信并生成高效的查询（[参考](http://blip.tv/pyohio/htsql-is-a-wsgi-reporting-toolkit-for-relational-databases-5438683)）。我正在尝试为我的 Django 应用程序使用此特定功能，该功能也在 HTSQL 的演示/示例 django 应用程序中进行了演示。在演示应用程序中，当我启动本地 django 服务器并尝试访问以下 url 时：

> 本地主机：8000/htsql/

页面加载，当我写下以下几行时：

```
/polls_poll 
```

要查看*polls_poll*表中的数据， *RUN*按钮什么也不做，*more*下拉菜单也是如此。没有错误，没有响应，没有从*polls_poll*表中获取数据。然后我注意到页面没有正确加载，即[这个跟踪](http://pastebin.ca/2197577)是在 Django 服务器终端上生成的。所以基本上， *codemirror* .js 和 .css 文件会抛出 HTTP 500 错误。为此，我搜索了 codemirror .css 和 .js 文件的链接，并在静态文件夹中的 HTSQL的*index.html中提供了这些链接。*以下是它的路径：

```
>>> /usr/local/lib/python2.7/dist-packages/htsql/tweak/shell/static 
```

现在终端跟踪已更改为[THIS](http://pastebin.ca/2197584) 但*RUN*按钮仍然没有执行任何操作，并且没有从表*polls_poll中获取数据*

我做错了什么或错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T18:31:58.340

CodeMirror 刚刚更改了他们软件包的下载 URL，这破坏了 HTSQL shell。您需要手动应用以下补丁：

[https://bitbucket.org/prometheus/htsql/changeset/f551f8996610bb68f2f8530fc​​6c0dbf6b5c34d90](https://bitbucket.org/prometheus/htsql/changeset/f551f8996610bb68f2f8530fc6c0dbf6b5c34d90)

或者您可以等待 HTSQL 的下一个错误修复版本，它将在一两天内发布。

# jquery - 将 HTML 页面拆分为定义的宽度和高度部分

> ID：12097365
> 
> 赞同：0
> 
> 时间：2012-08-23T17:50:09.433
> 
> 标签：jquery, html, pagination

我有一个大`<div>`s 的列表，每个都可变高度，但宽度固定。该列表看起来有点像这样：

```
1\.  Heading
    This is a short paragraph. It doesn't contain very many sentences.

2\.  Heading
    Now this paragraph, THIS one, is quite long. It could be over 10 lines in
    length. It might be even longer. Now this paragraph is aimless and going
    nowhere and I'm annoying the good folks on Stack Overflow because they might
    actually be helping me, and reading this is boring.

----------------------------------- Page Break ----------------------------------

3\. Heading
   Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse sapien
   orci, fermentum ac pellentesque quis, pretium at odio. Fusce quis dignissim
   nisi. Ut rhoncus tortor ut diam aliquam auctor ullamcorper vitae urna.
   Pellentesque elementum urna sed quam vehicula et elementum orci accumsan.
   Nullam feugiat tempor ipsum et rhoncus. Maecenas ultrices, sem a posuere
   pharetra, mi lorem rhoncus dolor, ac consectetur mauris tortor quis nulla.
   Mauris consequat tincidunt nibh, consectetur adipiscing erat vulputate ac.

----------------------------------- Page Break ----------------------------------

4\. Heading
   Sed magna mi, egestas non imperdiet id, interdum nec quam. Nullam et libero
   a urna convallis congue ac ut tellus. Aliquam in erat metus. Sed tempus,
   ipsum ut vehicula convallis, massa neque faucibus est, quis cursus dolor
   feliset dolor. Vivamus ultrices odio purus, vitae condimentum mi. Aenean
   lacus dui, pellentesque vestibulum pretium sed, cursus non metus. Praesent
   quis velit a lacus commodo adipiscing. Donec sollicitudin arcu quis est
   faucibus malesuada. Curabitur sem quam, accumsan sed tempor sed, tincidunt
   imperdiet nisl. Fusce non malesuada elit. Donec dolor eros, lacinia ut tempus
   dictum, mi elementum elementum feugiat, metus augue dapibus felis, eget
   pharetra lectus elit quis sapien. Nulla ullamcorper, elit in sodales
   tincidunt, purus nisi venenatis sem, sit amet blandit nisl lorem non velit.
   Nullam vulputate, dui auctor consectetur pellentesque, est nibh vulputate
   eros, non egestas ante nunc a dui. Donec porta mollis pharetra. Quisque ut
   nisl turpis. Maecenas et sem a magna lacinia porta nec non nulla.
   Vestibulum sed justo sit amet lorem consectetur auctor eu nec neque.
   Curabitur dignissim pellentesque sollicitudin. Sed mattis arcu justo.
   Nunc in felis elit. 
```

我想将此列表分成几个带有“分页符”、分页的“页面”（不过，每个页面都在同一个 HTML 页面上），每个页面都有固定的高度。我不希望长段落跨页拆分，除非每页只有一个项目。我该怎么做呢？我认为 jQuery 可能是必不可少的，这很好，因为我怀疑仅在 CSS 中它是可能的。

我这样做是因为我想把它变成 PDF，这似乎是最好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T18:09:04.273

类似的帖子：[page-break-inside 的替代方案：由于兼容性问题而避免](https://stackoverflow.com/questions/1246636/alternative-to-page-break-insideavoid-because-of-compatibility-issues)

我之前尝试为此找到一个优雅的 CSS 解决方案，但无济于事。如果上面的链接不起作用，请编写一个脚本来计算每个段落的高度（包括间距）并相应地适合代表一页长的固定高度 div。

# javascript - 如何模拟 jquery 移动页面加载

> ID：12097367
> 
> 赞同：0
> 
> 时间：2012-08-23T17:50:10.617
> 
> 标签：javascript, jquery-mobile

我有一个应用程序，其中有一些图像在页面加载时是半彩色的，然后它会根据逻辑进行更改...我有一个重新启动按钮，它应该将应用程序恢复到第一次加载时的状态（即图像应该是半彩色的）

这可以在 jQuery mobile 中完成吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T19:15:37.510

如果页面是外部文档，那么您可以使用该方法的`reloadPage`选项`$.mobile.changePage()`将外部文档重新加载到其初始状态。

这是一个例子：

```
$(document).on("pageinit", "#some-page-id", function () {
    $(this).find("a").on("click", function () {
        $.mobile.changePage(this.href, { reloadPage : true });
        return false;
    });
}); 
```

> **reloadPage** ( *boolean* , default: false) 强制重新加载页面，即使它已经在页面容器的 DOM 中。仅当 changePage() 的 'to' 参数是 URL 时使用。
> 
> 来源：http: [//jquerymobile.com/demos/1.1.1/docs/api/methods.html](http://jquerymobile.com/demos/1.1.1/docs/api/methods.html)

# mysql - MySQL按带数字的字符串排序

> ID：12097368
> 
> 赞同：14
> 
> 时间：2012-08-23T17:50:12.397
> 
> 标签：mysql, sql-order-by, collation

我有诸如`M1 M3 M4 M14 M30 M40`etc 之类的字符串（实际上是字母后的任何 int 2-3 位数字）当我执行“ ORDER BY name ”时，它将返回：

`M1, M14, M3, M30, M4, M40`

当我想要：

`M1, M3, M4, M14, M30, M40` 它将整个事物视为字符串，但我想将其视为字符串 + int

有任何想法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-23T18:04:01.093

您可以在 ORDER BY 中使用 SUBSTR 和 CAST AS UNSIGNED/SIGNED：

```
SELECT * FROM table_name ORDER BY
    SUBSTR(col_name FROM 1 FOR 1),
    CAST(SUBSTR(col_name FROM 2) AS UNSIGNED) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T18:29:34.960

如果字符串的开头可以有多个字符，例如 like `'M10', 'MTR10', 'ABCD50', 'JL8', etc...`，则基本上必须从数字的第一个位置获取名称的子字符串。

不幸的是 MySQL 不支持那种 REGEXP 操作（只返回一个布尔值，而不是实际的匹配）。

您可以使用此解决方案来模拟它：

```
SELECT   name
FROM     tbl
ORDER BY CASE WHEN ASCII(SUBSTRING(name,1)) BETWEEN 48 AND 57 THEN
                   CAST(name AS UNSIGNED)
              WHEN ASCII(SUBSTRING(name,2)) BETWEEN 48 AND 57 THEN
                   SUBSTRING(name,1,1)
              WHEN ASCII(SUBSTRING(name,3)) BETWEEN 48 AND 57 THEN
                   SUBSTRING(name,1,2)
              WHEN ASCII(SUBSTRING(name,4)) BETWEEN 48 AND 57 THEN
                   SUBSTRING(name,1,3)
              WHEN ASCII(SUBSTRING(name,5)) BETWEEN 48 AND 57 THEN
                   SUBSTRING(name,1,4)
              WHEN ASCII(SUBSTRING(name,6)) BETWEEN 48 AND 57 THEN
                   SUBSTRING(name,1,5)
              WHEN ASCII(SUBSTRING(name,7)) BETWEEN 48 AND 57 THEN
                   SUBSTRING(name,1,6)
              WHEN ASCII(SUBSTRING(name,8)) BETWEEN 48 AND 57 THEN
                   SUBSTRING(name,1,7)
         END,
         CASE WHEN ASCII(SUBSTRING(name,1)) BETWEEN 48 AND 57 THEN
                   CAST(SUBSTRING(name,1) AS UNSIGNED)
              WHEN ASCII(SUBSTRING(name,2)) BETWEEN 48 AND 57 THEN
                   CAST(SUBSTRING(name,2) AS UNSIGNED)
              WHEN ASCII(SUBSTRING(name,3)) BETWEEN 48 AND 57 THEN
                   CAST(SUBSTRING(name,3) AS UNSIGNED)
              WHEN ASCII(SUBSTRING(name,4)) BETWEEN 48 AND 57 THEN
                   CAST(SUBSTRING(name,4) AS UNSIGNED)
              WHEN ASCII(SUBSTRING(name,5)) BETWEEN 48 AND 57 THEN
                   CAST(SUBSTRING(name,5) AS UNSIGNED)
              WHEN ASCII(SUBSTRING(name,6)) BETWEEN 48 AND 57 THEN
                   CAST(SUBSTRING(name,6) AS UNSIGNED)
              WHEN ASCII(SUBSTRING(name,7)) BETWEEN 48 AND 57 THEN
                   CAST(SUBSTRING(name,7) AS UNSIGNED)
              WHEN ASCII(SUBSTRING(name,8)) BETWEEN 48 AND 57 THEN
                   CAST(SUBSTRING(name,8) AS UNSIGNED)
         END 
```

这将首先按字符串的字符部分排序，然后是字符串中提取的数字部分，只要字符串开头有 <=7 个字符。如果您需要更多，您可以将附加`WHEN`的 s 链接到`CASE`语句中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-16T18:21:19.640

我无法解决我正在对 MLS 编号进行排序的问题，如下所示：

V12345 V1000000 V92832

问题是 V1000000 的价值并未高于其他产品，即使它更大。

使用它解决了我的问题：

```
ORDER BY CAST(SUBSTR(col_name FROM 2) AS UNSIGNED) DESC 
```

刚刚删除了`SUBSTR(col_name FROM 1 FOR 1)`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T18:07:24.027

您可以使用：

```
order by name,SUBSTRING(name,1,LENGTH(name)-1) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T12:35:14.297

它将数字和字母分开。

```
SELECT SUBSTRING_INDEX(SUBSTRING_INDEX(SUBSTRING_INDEX(SUBSTRING_INDEX(SUBSTRING_INDEX(SUBSTRING_INDEX(SUBSTRING_INDEX(
SUBSTRING_INDEX(SUBSTRING_INDEX(SUBSTRING_INDEX(col,'1', 1), '2', 1), '3', 1), '4', 1), '5', 1), '6', 1)
, '7', 1), '8', 1), '9', 1), '0', 1) as new_col  
FROM table group by new_col; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-08T13:19:06.227

尝试使用 SUBSTR 删除字符。然后使用 ABS 从字段中获取绝对值：

```
SELECT * FROM table ORDER BY ABS(SUBSTR(field,1)); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-07-02T10:23:54.820

我在项目中使用的另一种方法是：

```
SELECT * FROM table_name ORDER BY LENGTH(col_name) DESC, col_name DESC LIMIT 1 
```

# javascript - 让 jQuery 使用 DOM 元素作为对象？

> ID：12097369
> 
> 赞同：0
> 
> 时间：2012-08-23T17:50:14.120
> 
> 标签：javascript, jquery

首先，我道歉。我知道我想做什么，但不知道我应该怎么称呼它，也不知道该怎么问，所以我的谷歌搜索没有结果。

我有一些动画用来显示/隐藏文本。我试图将它全部包装在一个对象中，但是我这样做的方式是，我每次都必须运行一些计算代码，因为我不知道它存储在哪个部分。

现在，我讨厌的是我`calculatePositions(entry);`在每次传递时都重新运行一个函数，而不是使用保存的值。麻烦的是，这将发生在多个元素上，因此位置数组需要更改。有没有办法将位置数组保存到特定的 DOM 元素并只计算一次？我可以将这些函数和属性附加到 DOM 元素而不是`entry`每次都传入对象吗？

我的代码：

```
var theShort = {};

theShort.toggle = function(){
    var positions = new Array;

    function calculatePositions(entry){
        /*
        positions = Nasty calculation code
        */
    }

    function showLong(entry){
        calculatePositions(entry);
        //My toggle code is obviously more complex and uses the positions array.
        //But for simplicity sake, I've omitted it
        $(entry).find('.tsl-theshort').show();
        $(entry).find('.tsl-thelong').hide();
    }

    function showShort(entry){
        calculatePositions(entry);
        $(entry).find('.tsl-theshort').show();
        $(entry).find('.tsl-thelong').hide();
    }

    return {
        init: function (){
            $('.tsl-showLong').click(function(){
                showLong($(this).closest('.entry-content'));
                return false;
            });

            $('.tsl-showShort').click(function(){
                showShort($(this).closest('.entry-content'));
                return false;
            });
        }
    };
}();

jQuery(document).ready(function($){
    theShort.toggle.init();
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T17:55:16.903

如果您担心每次都运行计算函数，请根据元素的 id 设置缓存。如果每个元素在 dom 中都有一个唯一的 ID，您可以执行类似的操作

```
var cache = {};

function showLong(entry){
    var id = $(entry).attr('id');
    if(!cache[id])
        cache[id] = calculatePositions(entry);

    //My toggle code is obviously more complex and uses the positions array.
    //But for simplicity sake, I've omitted it
    $(entry).find('.tsl-theshort').show();
    $(entry).find('.tsl-thelong').hide();
}

function showShort(entry){
    var id = $(entry).attr('id');
    if(!cache[id])
        cache[id] = calculatePositions(entry);

    $(entry).find('.tsl-theshort').show();
    $(entry).find('.tsl-thelong').hide();
} 
```

然后，当您希望查找元素的计算时，

```
var id = $(element).attr('id');
var calculation = cache[id]; 
```

# c# - 限制图像尺寸 asp.net

> ID：12097370
> 
> 赞同：-1
> 
> 时间：2012-08-23T17:50:28.453
> 
> 标签：c#, asp.net, image, restriction, image-size

我想限制 asp.net C# 图像的尺寸。

我有image1：

```
ImageButton ib = (ImageButton)sender;
Image1.ImageUrl = ib.ImageUrl; 
```

我还有：

```
Image tempImage = new Image();
tempImage.ImageUrl = ib.ImageUrl; 
```

接下来我正在设置 image1 的尺寸

```
Image1.Width = Math.Max(tempImage.Width, 1000); 
```

在这里我得到编译器错误：math.max 有错误的参数。所以目标是不允许图像的宽度大于1000。这怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T18:06:13.520

Math.Max 期望 Double

尝试像这样将你的参数转换为（双）

```
 int maxValue = 1000;
  var convDouble = Convert.ToDouble((double)tempImage.Width,(double)maxValue); 
```

对于初学者来说，请看上面的代码 Math.Max 期望以下

```
 Math.Max(double , double); 
```

也在你代码的这一行

```
Image tempImage = new Image();
tempImage.ImageUrl = ib.ImageUrl 
```

为什么不创建 tempImage 然后设置最大宽度然后调用 `temp.ImageUrl = ib.Image()`；

# javascript - 脚本之间的通信 | 三种方法

> ID：12097381
> 
> 赞同：7
> 
> 时间：2012-08-23T17:51:03.083
> 
> 标签：javascript

如何正确地在两个脚本之间传递数据。

在这种特殊情况下，我在一个脚本中有一个元素，但我想将它附加到另一个脚本中。

我可以做到这一点的最简单方法是使用全局窗口对象作为中间人。

但是全局变量不是最佳实践。

将此元素传递给另一个脚本的正确方法是什么？

两个脚本都封装在模块模式中。

**脚本 0 创建元素点**

```
var element = document.createElement( "div" );
element.innerHTML = response_text; 
```

**脚本 1 追加元素点**

```
Vi.sta = {

    // implemented in the boot loader - shared global space - appended child already - you don't have to append until now.
    // Static data has already been composed. 
    // Pull off window and append or best practice

}; 
```

两者都封装在模块模式中

```
(function(){ 
    // the code here 
})() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T17:54:43.087

所有 JS 脚本都在全局范围内运行。当文件下载到客户端时，它们会在全局范围内进行解析。

所以如果你有

```
// File_1.js
var myObj = { colour : "blue" }; 
```

没有什么能阻止你这样做：

```
// File_2.js
var otherObj = { colour : myObj.colour }; 
```

只要在 File_2.js 之前加载 File_1.js

如果您是命名空间，即：`MYNAMESPACE = {};`并且每个文件都通过模块扩展您的命名空间（而不是“模块模式”指的是从立即调用函数返回接口），那么请检查模块的存在。

如果您正在为命名空间应用程序编写模块，并且您确实需要访问从一个模块到另一个模块的变量，那么您应该`interface`为此提供一个。

如果你是`SANDBOXING`模块，那么你需要为它们都提供一个`proxy`类似于 a`service-locator`或 a 的`"registry"`，或者`messaging-system`基于 a开发一个`mediator-pattern`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-23T17:53:31.770

```
window.sharedSpace = {};
sharedSpace.sharedValue = 'foo bar'; 
```

这样你就只有一个全局对象而不是几个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T17:59:40.017

为什么不直接将元素传递给模块中的函数呢？

```
var module1 = (function () {
    return {
        func1: function () {
            // get your element
            var someElement = ...;

            // pass it to the other module
            module2.func2(someElement);
        }
    };
}) ();

var module2 = (function () {
    return {
        func2: function (someElement) {
            // do whatever you want with someElement
        }
    };
}) (); 
```

# c++ - C++11 种子序列初始化

> ID：12097383
> 
> 赞同：4
> 
> 时间：2012-08-23T17:51:08.643
> 
> 标签：c++, random, c++11

头文件`<random>`允许初始化种子序列的内部序列。一个类的对象`seed_seq`可以用多种方式构造。我对其中一种方式很好奇，特别是正在使用什么 C++ 技术。

我在这里查看网站：[http ://www.cplusplus.com/reference/std/random/seed_seq/seed_seq/](http://www.cplusplus.com/reference/std/random/seed_seq/seed_seq/)

在示例部分中，我看到了这一行：

```
std::seed_seq seed2 = {102,406,7892}; 
```

这里到底发生了什么？似乎一个类对象被分配给一个数组。我查看了初始化列表构造、复制赋值构造函数，但我仍然对到底发生了什么感到困惑。

我理解`std::seed_seq seed3 (foo.begin(),foo.end());`和`std::seed_seq seed1;`。第一个代码片段 ( ) 使用参数和`seed3`调用`seed_seq`构造函数，第二个代码片段 ( ) 使用默认构造函数构造。`foo.begin()``foo.end()``seed1`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T18:02:18.147

我不确定我是否完全理解您的问题，因为您自己几乎已经给出了答案。使用类似的东西`{102,406,7892}`是一个初始化列表。具有类似签名的构造函数方法（或实际上任何方法）`MyClass::MyClass(std::initializer_list<int> args)`都可以采用此方法。

您可以使用普通的迭代器方法`begin()`和`end()`. **它基本上只是一种在代码**中传递任意长度列表的便捷方法，而无需实例化“正常”`std::list`或`std::vector`（并继续调用`push_back()`它）或数组。

作为奖励，您还可以使用初始化列表构造标准容器：`std::vector<std::string> vec {"hello", "world"}`. 这允许您使用标准容器作为仍然可以使用 initializer_list 调用的函数的参数类型。

# wpf - 为使用转换器的 gridview 单元格使用样式的成本是多少？

> ID：12097384
> 
> 赞同：0
> 
> 时间：2012-08-23T17:51:08.450
> 
> 标签：wpf, xaml, data-binding, radgridview, staticresource

我使用一种样式在 Telerik gridview 的单元格中显示工具提示（将数字转换为单词并在工具提示中显示），如下面的代码：

```
<Window.Resources>
    <Style x:Key="PaidAmountConverter" TargetType="telerik:GridViewCell">
        <Setter Property="ToolTip" Value="{Binding Path=PaidAmount, Converter={Infrastructure:PriceConverter}}" />
        <Setter Property="ToolTipService.Placement" Value="Top" />
    </Style>
</Window.Resources> 
```

并像下面的代码一样在gridview中使用它：

```
<telerik:GridViewDataColumn Header="Paid Amount" DataMemberBinding="{Binding Path=PaidAmount, StringFormat={}{0:N0}}" CellStyle="{StaticResource PaidAmountConverter}" /> 
```

我的问题是这个静态资源是如何工作的？这种风格及其在其中使用的转换器是否按时创建并用于所有gridview行？这种方式有性能问题吗？

如果是，那么有什么更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T17:56:42.970

有一个转换器对象和一个样式对象。这些是资源。

网格使用这些资源。即使绑定是动态资源而不是静态资源，仍然只有这两个对象；静态和动态是指绑定的工作方式，而不是对象的生命周期。

确保转换器代码很快。

其余的：如果您怀疑速度：测试。

# oracle - 将一个用户的所有表数据和表结构复制到另一个用户

> ID：12097388
> 
> 赞同：2
> 
> 时间：2012-08-23T17:51:37.777
> 
> 标签：oracle, oracle11g

我对数据库管理了解不多。我的问题是我有一个 oracle 数据库，其中我们有一个用户“ **user1** ”和一些表，在这些表中，有些表有数据，有些没有。现在我想创建一个新用户“ **user2** ”，这应该是“ **user1** ”的精确复制。所以我像下面这样导出了 user1：

```
exp user1/***** file=exp.dmp log=exp.log 
```

现在我像这样**将此**文件导入我的新用户2

```
imp user2/**** file=exp.dmp .. 
```

但它正在创建仅在**user2**中包含数据的表。我想将所有对象从**user1**复制到**user2**。请帮助我。仅供参考，我在窗口 7 上使用 oracle 11g 应用了 patch2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T18:36:16.117

是否使用[延迟段创建](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_7002.htm#CEGJHDEB)？

导出[不适](http://asktom.oracle.com/pls/apex/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:3014631100346711923)用于没有段的表。您可能希望改用 Export DataPump。

或者您可以通过手动创建细分来使其工作：

```
alter table your_table_name allocate extent; 
```

# java - Android - 在 TableLayout 中显示 SQLite 数据库记录

> ID：12097389
> 
> 赞同：3
> 
> 时间：2012-08-23T17:51:38.933
> 
> 标签：java, android, database, sqlite, tablelayout

我有一个数据库类，它存储一个数据库并通过以下方式访问所有记录：

```
public Cursor getAllRecords() {
        return db.query(DATABASE_TABLE, new String[] {KEY_ROWID, KEY_TEXT}, null, null, null, null, null);
    } 
```

如何更新 TableLayout 以在其中显示字段 KEY_TEXT 条目？

此外，是否有可能（请记住，我*确实*有删除和插入两种方法）实现一种方法来点击表中的条目并删除它（并添加条目）实时查看它，即：当我点击某些东西来删除它时，它也应该从表格视图中消失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T18:04:56.337

没有办法以您想要的方式完成表格布局的填写，而无需手动执行此操作，循环使用来自每个游标迭代的数据填充表格布局中的每一行。

我猜你想要的是某种使用适配器的方法，在这种情况下，我建议看看这个：[https ://stackoverflow.com/a/7971202/1359772](https://stackoverflow.com/a/7971202/1359772)

您将希望使用多列列表视图，其中每一行对应于查询结果中的一行。通过这种方式，您可以使用列表适配器来避免手动执行每个条目。然后，您可以轻松地设置一个列表 onitemselected 侦听器，以从数据库中删除您的列表条目和相应的值。

**编辑**

澄清一下，我的意思是你最好将它作为一个列表视图来执行，其中列表视图中的每个项目只有部分可以模拟你的列。如果您想在明确定义的列方面进一步分离，请在项目布局中使用笔划画一条垂直线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T18:27:24.173

你应该使用列表视图和光标适配器。然后将游标适配器绑定到从该查询中获得的数组或列表

# sql-server - 最后访问了哪些表

> ID：12097391
> 
> 赞同：1
> 
> 时间：2012-08-23T17:51:42.613
> 
> 标签：sql-server, tsql

我想知道被访问的前 N ​​个表。我只得到了数据库和谷歌地址中的大多数链接最后日期访问特定表。

```
SELECT DatabaseName, MAX(LastAccessDate) LastAccessDate
FROM
    (SELECT
        DB_NAME(database_id) DatabaseName
        , last_user_seek
        , last_user_scan
        , last_user_lookup
        , last_user_update
    FROM sys.dm_db_index_usage_stats) AS PivotTable
UNPIVOT 
    (LastAccessDate FOR last_user_access IN
        (last_user_seek
        , last_user_scan
        , last_user_lookup
        , last_user_update)
    ) AS UnpivotTable
GROUP BY DatabaseName
HAVING DatabaseName NOT IN ('master', 'tempdb', 'model', 'msdb')
ORDER BY 2 
```

现在我需要这个用于桌子。有什么想法或链接吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T17:56:21.363

您可以一次轻松地完成一个数据库，只需稍微调整您的代码：

```
USE Your_Database;
GO

SELECT [schema]  = OBJECT_SCHEMA_NAME([object_id]), 
  [object]       = OBJECT_NAME([object_id]), 
  LastAccessDate = MAX(LastAccessDate)
FROM
    (SELECT
        [object_id]
        , last_user_seek
        , last_user_scan
        , last_user_lookup
        , last_user_update
    FROM sys.dm_db_index_usage_stats
    WHERE database_id = DB_ID()) AS PivotTable
UNPIVOT 
    (LastAccessDate FOR last_user_access IN
        (last_user_seek
        , last_user_scan
        , last_user_lookup
        , last_user_update)
    ) AS UnpivotTable
GROUP BY [object_id]
ORDER BY LastAccessDate; 
```

当然，这仅在上次服务重新启动或重新配置后才有用。

*   [我的数据库/表上次访问是什么时候？](https://sqlblog.org/2008/05/06/when-was-my-database-table-last-accessed)

如果要按数据库执行此操作，可以使用我的自定义`sp_MSforeachdb`替换：

*   [制作更可靠、更灵活的 sp_MSforeachdb](https://www.mssqltips.com/sqlservertip/2201/making-a-more-reliable-and-flexible-spmsforeachdb/?utm_source=AaronBertrand)
*   [使用 sp_ineachdb 在 SQL Server 中每个数据库的上下文中执行命令](https://www.mssqltips.com/sqlservertip/5686/execute-a-command-in-the-context-of-each-database-in-sql-server-using-spineachdb/?utm_source=AaronBertrand)
*   [在 SQL Server 中的每个数据库的上下文中执行命令 - 第 2 部分](https://www.mssqltips.com/sqlservertip/5694/execute-a-command-in-the-context-of-each-database-in-sql-server--part-2/?utm_source=AaronBertrand)

# html - 图像不显示。姜戈

> ID：12097396
> 
> 赞同：2
> 
> 时间：2012-08-23T17:51:59.217
> 
> 标签：html, django, django-templates

找不到我做错了什么（我想应该是一些语法错误）。我的图片不显示。我收到“没有文件”。

# html

```
 <!-- RECENTLY ADDED FILES -->
        <div class="buttom-box floatleft">
            <h3>Recently Added Files</h3>
                <p>New class papers. Now you can enjoy and study them</p>
                <br>
                {% if recent_files %}
                    {% for file in recent_files %}
                        <img src="{{ MEDIA_URL }}{{ file.image }}" alt="Sample 1" width="125" height="125" />
                    {% endfor %}
                {% else %}
                    <p>NO FILES</p>
                {% endif %}
        </div> 
```

# 视图.py

```
def index(request):  
    recent_files = FileDescription.objects.all()

    context_instance=RequestContext(request)
    return render_to_response('index.html', 
        {'recent_files':recent_files,},
        context_instance,
        ) 
```

# 用于文件描述的 MySQL：

```
mysql> SELECT * FROM school_filedescription;
+----+------------+--------------+-----------+------------------+-----------+------------------+---------------------+---------------------+-----------------------------+
| id | subject_id | subject_name | file_type | file_uploaded_by | file_name | file_description | file_creation_time  | file_modified_time  | image                       |
+----+------------+--------------+-----------+------------------+-----------+------------------+---------------------+---------------------+-----------------------------+
|  1 |          1 | Math 140     | class     | rrr              | lalala    | lalala           | 2012-08-23 12:12:12 | 2012-08-23 12:12:12 | files/rrr/class/smart.jpg   |
|  2 |          1 | Math 140     | class     | rrr              | ,s,s,s    | s msms           | 2012-08-23 12:32:39 | 2012-08-23 12:32:39 | files/rrr/class/smart_1.jpg |
+----+------------+--------------+-----------+------------------+-----------+------------------+---------------------+---------------------+-----------------------------+
2 rows in set (0.00 sec) 
```

但是，其他页面中的此代码工作正常

# 其他页面：

```
{% extends "base.html" %}
{% block main-menu %}
    <div class="contentarea">       
        <img src="{{ MEDIA_URL }}{{ picture.image }}"/>
    </div>
{% endblock %} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T17:57:55.910

尝试将最近的文件参数添加到您的请求上下文实例中，如下所示：

```
context_instance = RequestContext(request, {
  'recent_files': recent_files
}) 
```

然后像这样调用请求......

```
return render_to_response('index.html', context_instance = context_instance) 
```

# python - Python - 并行命令

> ID：12097406
> 
> 赞同：6
> 
> 时间：2012-08-23T17:52:30.203
> 
> 标签：python

如何在 python 脚本中并行运行多个 python 命令？作为一个简单的例子，我有几个睡眠命令：

```
time.sleep(4)
time.sleep(6)
time.sleep(8) 
```

我希望以上所有内容都并行执行。我希望控制权在 8 秒过去后恢复（这是上面所有睡眠的最大值）。真正的命令会有所不同，但想从上面得到一个想法。

在 bash 中，我可以简单地完成：

```
sleep 4 &
pid1=$!
sleep 6 &
pid2=$!
sleep 8 &
pid3=$!
wait $pid1 $pid2 $pid3 
```

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-23T18:02:35.180

一个简单的例子，使用多处理：

```
import multiprocessing as mp
import time

pool = mp.Pool(3)
results = pool.map(time.sleep, [4, 6, 8] ) 
```

这会产生单独的进程，而不是在 Steven Rumbalski 的回答中演示的同一进程中创建单独的线程。多处理回避了 GIL（在 cpython 中），这意味着您可以同时执行 python 代码（在 cpython 中不能通过线程执行）。但是，它的缺点是您发送给其他进程的信息必须是可腌制的，并且在进程之间共享状态也有点复杂（尽管最后一点我可能是错误的——我从来没有真正使用过`threading`） .

*警告：不要在交互式解释器中尝试这个*

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-23T17:54:20.607

看一下[线程](http://docs.python.org/library/threading.html)模块。你可以有类似的东西：

```
import time,threading

def mySleep( sec ):
    time.sleep( sec )
t1 = threading.Thread( target=mySleep, args=(4,) )
t2 = threading.Thread( target=mySleep, args=(6,) )
t3 = threading.Thread( target=mySleep, args=(8,) )
t1.start()
t2.start()
t3.start()

# All threads running in parallel, now we wait
t1.join()
t2.join()
t3.join() 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-23T18:03:26.563

```
from threading import Thread

threads = [Thread(target=time.sleep, args=(secs,)) for secs in (4,6,8)]
for t in threads: t.start()
for t in threads: t.join()
print 'all threads done!' 
```

# c++ - 是标准 C++

> ID：12097407
> 
> 赞同：1
> 
> 时间：2012-08-23T17:52:35.537
> 
> 标签：c++

这段代码写在`C`：

```
int main(){
char Demoshellcode[] ="\xEB\x5D\x5F\x8B\xF7\x80\x3F";
void* addr=0;
addr=&Demoshellcode[0];
__asm call addr
return 0;
} 
```

我们是否也可以将其视为标准`C++`代码？如果不是，需要进行哪些修改才能使其成为标准`C++`代码？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T17:55:01.263

我将采用“标准”来排除扩展，但不排除实现定义的行为（无论如何这几乎是不可能避免的）或有条件支持的功能。

不，这个例子不是标准的，因为`__asm`它是一个扩展。您必须使用标准`asm(...)`（具有实现定义的行为），但 VC++ 不支持`asm()`.

您还可以将指针转换为函数指针（在 C++11 中通过实现定义的行为有条件地支持该指针）并调用它。

```
int main() {
    char Demoshellcode[] ="\xEB\x5D\x5F\x8B\xF7\x80\x3F";
    void (*func_ptr)(void) = reinterpret_cast<void (*)(void)>(&Demoshellcode);
    func_ptr();
} 
```

我实际上不知道上述行为是否在任何实现中都符合要求。在现代系统上，您必须处理 NX 位（它允许标记内存，以便无法执行存储在该内存中的指令）。

（将对象指针转换为函数指针是对 C++03 的扩展，但 C++11 将其添加为有条件支持的功能。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-23T17:53:55.513

不是，`__asm`不是标准。

`asm`，然而，是。

另请注意，它是实现定义的：

> asm 声明的形式为
> 
> `asm-definition:`
> 
> `asm ( string-literal ) ;`
> 
> asm 声明是有条件支持的；它的含义是实现定义的。[注意：通常它用于通过实现将信息传递给汇编器。——尾注]

# javascript - Javascript window.open 高度不会像我设置的那么高，为什么？

> ID：12097411
> 
> 赞同：3
> 
> 时间：2012-08-23T17:52:52.980
> 
> 标签：javascript, window

JavaScript window.open 高度不会像我设置的那么高，为什么？

我正在使用 FF、IE、Chrome 并使用此功能。

```
function open_win3(zoom) {
New_Win3 =window.open(zoom,"_blank","width=550,height=1970,scrollbars=0,menubar=0");
}
var zoom = "/zoom.asp" 
```

JavaScript 打开的新窗口的高度会不会和显示器本身一样高？

Chrome 还添加了滚动条，当滚动条明显为负时，但我通过使用解决了这个问题

```
<style type="text/css">
    body { overflow: hidden; }
</style> 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T17:59:58.580

来自[Mozilla 文档](https://developer.mozilla.org/en-US/docs/DOM/window.open#Note_on_position_and_dimension_error_correction)：

> 如果任何此类请求值不允许在用户操作系统的应用程序的工作区域内呈现整个浏览器窗口，则功能列表中请求的位置和请求的尺寸值将不被接受并将被更正。新窗口的任何部分最初都不能位于屏幕外。这是所有基于 Mozilla 的浏览器版本的默认设置。

与 window.open 的许多其他功能一样，这可以很容易地解释为一种安全性：浏览器必须防止用户不理解他正在查看一个新的浏览器窗口，或者在关闭它时遇到困难。

# ruby - Ruby on Rails 3.2 中的单选按钮列表

> ID：12097412
> 
> 赞同：0
> 
> 时间：2012-08-23T17:52:53.860
> 
> 标签：ruby, ruby-on-rails-3.2

只是试图在页面上显示分组的单选按钮并在发布请求时获取选定的值。

```
 %h2 Choose your delivery type

    -DeliveryType.all.each do |dt|
      %p
        =radio_button_tag "delivery_type", dt.name, false
        =label_tag "delivery_type_#{dt.id}", dt.name

    %p= button_to "Forward", delivery_type_create_path

 def delivery_type_create
    #params[:delivery_type] is nil
  end 
```

我调试了

```
pp params
{"authenticity_token"=>"DwDYHY/mm1WEMBXZuHAN+4fqksojTHZVwuTob8LxDvA=",
 "action"=>"delivery_type_create",
 "controller"=>"orders"} 
```

我试过这个

```
%h2 Choose your delivery type
-form_tag do
  -DeliveryType.all.each do |dt|
    %p
      =radio_button_tag "delivery_type", dt.name, false
      =label_tag "delivery_type_#{dt.id}", dt.name
  %p= button_to "Forward", delivery_type_create_path 
```

但它根本不显示自己，只显示 h2 和页面的另一部分。

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T17:55:40.030

你需要`= form_tag`，不是`- form_tag`。

# php - 指定连接清除选定的数据库？

> ID：12097413
> 
> 赞同：4
> 
> 时间：2012-08-23T17:52:57.237
> 
> 标签：php, mysql, resources

哦，

这确实是问题出现的底线。但是您之后可能需要其他信息，例如我的连接方式等等，以避免误解。:)

```
$con = mysql_connect('localhost', 'root', '******');

if(!$con) {
    die('Could not establish connection: ' . mysql_error);
}

mysql_select_db('hunkusersystem');

function user_login($username, $password) {

    //Avoid SQL-injections.
    $username = mysql_real_escape_string($username);
    $password = md5($password);

    //Match user and password
    $sql = mysql_query("SELECT * FROM usersystem WHERE username = '$username' AND password = '$password' LIMIT 1", **$con**); 
```

我的问题是 - 在最后一段代码中，我不能使用资源 id.. 为什么会这样？是因为 mysql_select_db 会被“清除”吗？所以你坚持正确的连接但没有数据库？如果我要使用多个连接，我应该在 mysql_select_db(); 中定义连接吗？?

非常感谢您的帮助 :) 来自 Swe 的问候。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T17:55:19.047

这是一个范围问题；该函数`user_login`看不到`$con`，因为它没有作为参数传入或声明为全局变量。

（请不要将其声明为全局变量；这是非常糟糕的做法）

尝试：

```
function user_login($username, $password, $con) { 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T17:55:33.593

该变量`$con`是在全局范围内定义的，而不是在函数的本地范围内。

如果你想在那里使用它，你可以使用：

```
function user_login($username, $password) {
    global $con; 
```

但是，您最好将变量作为参数传递给函数。

最好的解决方案是使用准备好的语句转移到 PDO / mysqli 并使用依赖注入，但这超出了您的问题范围。

# ios - 使用 AFNetworking 进行简单的“PUT”文件上传

> ID：12097415
> 
> 赞同：0
> 
> 时间：2012-08-23T17:53:04.057
> 
> 标签：ios, upload, afnetworking, put

我想这很简单，但我不知道该怎么做。我想使用 AFNetworking 库将文件上传到使用 PUT 请求的网络服务。这是我用来测试服务的 curl 命令

```
mac:~ user$ curl --verbose -T image.jpeg http://server.org:8001/social/test.jpg
* About to connect() to server.org port 8001 (#0)
*   Trying 123.45.123.123...
* connected
* Connected to server.org (123.45.123.123) port 8001 (#0)
> PUT /social/test.jpg HTTP/1.1
> User-Agent: curl/7.24.0 (x86_64-apple-darwin12.0) libcurl/7.24.0 OpenSSL/0.9.8r zlib/1.2.5
> Host: server.org:8001
> Accept: */*
> Content-Length: 78341
> Expect: 100-continue
> 
< HTTP/1.1 100 CONTINUE
< Server: cx1193719-b
< Content-Type: Text/Html
< Accept-Ranges: bytes
< Content-Length: 0
* We are completely uploaded and fine
< HTTP/1.1 200 OK
< Server: cx1193719-b
< Content-Type: Text/Html
< Accept-Ranges: bytes
< Content-Length: 0
< 
* Connection #0 to host server.org left intact
* Closing connection #0 
```

我已经能够使用 POST 和表单数据将文件上传到其他 Web 服务，我使用了 PUT 请求（使用 AFHTTPClient 和 putPath），但我仍然不明白如何进行简单的文件上传。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-02-04T23:14:34.163

我正在使用 AFNetworking 2.0 并且想知道同样的事情。这就是我最终得到的结果：

```
// manager needs to be init'd with a valid baseURL
NSURL *baseURL = [AfarHTTPSessionManager sharedManager].baseURL;
AFHTTPRequestOperationManager *manager = [[AFHTTPRequestOperationManager alloc] initWithBaseURL:baseURL];

NSData *imageData = UIImageJPEGRepresentation(draftHighlight.largeImage, 1);

// need to pass the full URLString instead of just a path like when using 'PUT' or 'POST' convenience methods
NSString *URLString = [NSString stringWithFormat:@"%@%@", baseURL, _the_rest_of_your_path];
NSMutableURLRequest *request = [manager.requestSerializer multipartFormRequestWithMethod:@"PUT" URLString:URLString parameters:parameters constructingBodyWithBlock:^(id<AFMultipartFormData> formData) {
    [formData appendPartWithFileData:imageData name:kCreateHighlightAPIKeyImage fileName:@"highlight_image.jpg" mimeType:@"image/jpeg"];
}];

// 'PUT' and 'POST' convenience methods auto-run, but HTTPRequestOperationWithRequest just
// sets up the request. you're responsible for firing it.
AFHTTPRequestOperation *requestOperation = [manager HTTPRequestOperationWithRequest:request success:^(AFHTTPRequestOperation *operation, id responseObject) {
    // success
} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    // failure
}];

// fire the request
[requestOperation start]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-26T11:15:14.873

这是 AFNetworking 常见问题解答的一部分。检查[https://github.com/AFNetworking/AFNetworking/wiki/AFNetworking-FAQ](https://github.com/AFNetworking/AFNetworking/wiki/AFNetworking-FAQ)。

此外，如果您使用的是您的子类，`AFHTTPClient`您可能希望使用类似于以下内容的方式对其进行扩展：

```
- (void)putPath:(NSString *)path
     parameters:(NSDictionary *)parameters
           data:(NSData*)data
        success:(void (^)(AFHTTPRequestOperation *operation, id responseObject))success
        failure:(void (^)(AFHTTPRequestOperation *operation, NSError *error))failure; 
```

正如这个答案中所建议的那样：[https](https://stackoverflow.com/a/9014768/634940) ://stackoverflow.com/a/9014768/634940 。

实现该功能并将您的`AFHTTPClient`子类的基本 URL 设置为`http://server.org`您可以继续调用：

```
NSData *imageData = [NSData dataWithContentsOfFile:pathToYourJPEGFile];
[client putPath:@"social/test.jpg"
     parameters:nil
           data:imageData
        success:yourSuccessBlock
        failure:yourFailureBlock]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-22T20:13:43.193

在我看来，djibouti33 的回答非常好。但是，需要注意的一件事是，答案中的 multipartFormRequest 方法已被弃用。AFNetworking 现在建议您使用：

```
- (NSMutableURLRequest *)multipartFormRequestWithMethod:(NSString *)method
                                              URLString:(NSString *)URLString
                                             parameters:(NSDictionary *)parameters
                              constructingBodyWithBlock:(void (^)(id <AFMultipartFormData> formData))block
                                                  error:(NSError *__autoreleasing *)error 
```

这里需要注意的是，您需要通过执行以下操作通过引用传递错误：

```
NSError *requestError = nil;
NSMutableURLRequest *request = [manager.requestSerializer multipartFormRequestWithMethod:@"PUT" URLString:path parameters:nil constructingBodyWithBlock:^(id<AFMultipartFormData> formData) {
    [formData appendPartWithFileData:photoData name:@"file" fileName:@"image" mimeType:@"image/png"];
} error:&requestError]; 
```

# windows-7 - 在 Win 7 64 位操作系统中从命令提示符启动 32 位可执行文件

> ID：12097416
> 
> 赞同：1
> 
> 时间：2012-08-23T17:53:04.070
> 
> 标签：windows-7, command-prompt, syswow64

我正在使用 64 位 Windows 7 并且遇到了一个奇怪的问题。我在 c:\Programs(x86) 中安装了 installAnywhere（一个 32 位应用程序），因为我不想将它安装在常规的“c:\Program Files(x86)”中以避免目录中空间的麻烦。

当我尝试使用以下语法从命令提示符调用 installanywhere 时： cmd /c "c:\Programs(x86)\InstallAnywhereEnterprise\build\build.exe" ... 我收到错误 "c:\Programs" is not a命令。原因是它试图在 c:\Programs 中寻找 installAnywhere 忽略 (x86) 部分。

我对从命令提示符启动 32 位程序与 64 位程序进行了一些调查，并尝试使用*%windir%\SysWow64\cmd.exe*。当我使用“%windir%\SysWow64\cmd.exe”时，%programfiles% 正确指向“c:\Programs Files(x86)”，但启动我提到的命令只会给出相同的错误。Windows的*FileSystemRedirector*仍然一直指向 c:\Programs。我在默认位置“C:\Programs Files(x86)”中重新安装了 InstallAnywhere，但我不知道为什么它不适用于“C:\Programs(x86)”。

有谁知道解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T18:13:50.917

转义括号。

```
"C:\Programs^(x86)\..." 
```

为什么你不能把它放在常规的 Program Files 目录中？空间应该不是问题。

# mysql - 在 codeigniter 中订购 group_by

> ID：12097419
> 
> 赞同：1
> 
> 时间：2012-08-23T17:53:27.113
> 
> 标签：mysql, codeigniter, sql-order-by

我有一张桌子

```
id  typesignal close open cont

1    4    150    300    2

2    3    20    40    1

3    2    50    75    15

4    1    15.2    30.8    5

5    1    200    225    8

6    6    200    500    8

7    7    10    20    4

8    8    9    12    2

9    9    5    8    3

10    5    40    50    4

11    4    5    8    9

12    5    4    2    3

13    8    5    4    0 
```

我想显示列中每种类型的最后一行`typesignal`。

```
$this->db->group_by('typesignal');
$query = $this->db->get('signals'); 
```

但我需要我使用的最后一行

```
$this->db->group_by('typesignal');
$this->db->order_by("idSignal");
$query = $this->db->get('signals'); 
```

但它不工作。

预期的输出是：`13,12,11,9,8,7,6,5,3,2`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T15:33:27.713

我使用这个查询

```
$this->db->group_by('typeSignal');

$this->db->select_max('idSignal');

$this->db->order_by("idSignal", "DESC");            

$query = $this->db->get('signals');

return $query->result_array(); 
```

正在工作的秘密是 $this->db->select_max('idSignal');

感谢您的帮助

# javascript - javascript regex：匹配所有单词与一些字母

> ID：12097423
> 
> 赞同：0
> 
> 时间：2012-08-23T17:53:32.770
> 
> 标签：javascript, regex

所以我对正则表达式相当陌生。任何帮助表示赞赏。

我有以下格式的字符串：

```
var str: ".item-61347 .item-79134 .item-79465 .item-96464" 
```

我希望能够提取所有匹配的单词，只需要一些输入。例如：

```
input: 13 --> .item-61347 .item-79134
input: 79 --> .item-79134 .item-79465
input: 96464 --> .item-96464 
```

输入将是一个字符串变量，所以理想情况下我希望能够做这样的事情：

```
str.match(<regexp with string containing input>) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T18:03:49.183

看起来根本不需要正则表达式：

```
var items = ".item-61347 .item-79134 .item-79465 .item-96464".split(" ");

var itemsThatMatch13 = items.filter( function(v) {
    return v.indexOf("13") > 0;
});

//[".item-61347", ".item-79134"] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T17:59:32.470

这个怎么样：

```
var testRegex, 
    testInputs = [13, 79, 96464];
var testStr   = '.item-61347 .item-79134 .item-79465 .item-96464';
for (var i = 0, l = testInputs.length; i < l; ++i) {
    testRegex = new RegExp('[.]item-(?=[0-9]*' + testInputs[i] + ')[0-9]+', 'ig');
    console.log(testStr.match(testRegex));
} 
```

关键是在您的正则表达式中使用前瞻来同时检查数字子模式*和*您在其中的输入。

# mercurial - mercurial-reviewboard 插件不再适用于 TortoiseHg 2.4.3

> ID：12097424
> 
> 赞同：1
> 
> 时间：2012-08-23T17:53:38.797
> 
> 标签：mercurial, tortoisehg, review-board

当我升级到 TortoiseHG 2.4.3 并且它停止工作时，我刚刚让 Mercurial-Reviewboard 插件与 TortoiseHG 2.4.2 一起工作。现在，当我单击“发布评论”按钮时，它会引发以下错误。"postreview 插件版本 4.1.0" "'module' 对象没有属性 'findoutgoing'"

我已经尝试了插件的许多不同分支并且运气为零。我现在拥有的是 Fredrik Haard 的，可以在这里找到：https://bitbucket.org/haard/mercurial-reviewboard 不幸的是，他有一段时间没有更新它了。

我已经尝试过查看插件的源代码，但对 Python 和特定的 Mercurial 插件几乎一无所知。

如果有人能以任何方式提供帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T23:14:56.810

我有同样的错误`"'module' object has no attribute 'findoutgoing'"`，使用以下内容：

**TortoiseHG** : 2.4.3 (with Mercurial-2.3.2, Python-2.7.3, PyQt-4.9.3, Qt-4.8.2)
**Reviewboard** : 1.6.13
**Mercurial-reviewboard plugin**：windix-mercurial-reviewboard (4.1.0) 从 2012-08-30 开始，并在第 400 行的 reviewboard.py 中进行了以下更改：

```
self._api_post('/account/login/', { 
```

代替

```
self._api_post('/api/json/accounts/login/', { 
```

我只有一个本地存储库，Reviewboard 使用磁盘上的路径指向该存储库。我在该存储库的文件中添加以下内容后，

**问题就得到了解决：**`.hg/hgrc`

```
[paths]
default = http://localhost:8003 
```

其中 8003 是我为同一个 repo 配置的端口，位于该 repo 内的同一个文件中。
我还有两个本地存储库，在相同的情况下 - 没有远程基地 - 分别为 8000 和 8005 配置，我现在可以从 TortoiseHG 用户界面为所有这些存储库发布审查请求（在为每个这些存储库添加之后， [paths] 部分和上面的默认 url）。

我希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T07:30:01.717

虽然仍有一些问题，但“我的”叉子现在对我有用，尽管非 ascii 的源文件存在编码错误。如果它对您不起作用（从 2012-24-10 提交），并且您遇到的问题与编码无关（正在处理这些问题），您能否描述正在发生的事情/提供日志消息？

# performance - Chrome 开发者工具：如何阅读网络面板？

> ID：12097425
> 
> 赞同：22
> 
> 时间：2012-08-23T17:53:41.623
> 
> 标签：performance, google-chrome, network-protocols

当我在我的网站上运行性能测试时，我试图理解 Chrome 开发人员工具。如果您在工具菜单上选择网络，它将如下所示：

![在此处输入图像描述](../Images/70bd4003ab9894ea633a1dc797ee3f17.png)

然后，如果我选择性能文件，我将获得以下信息：

![在此处输入图像描述](../Images/0584c7ad03dbd9451060ddd2ea6036f6.png)

我的问题是这样的：

1.  *DNS查找、连接、发送、等待和接收是什么意思？每个阶段的服务器、网络和浏览器之间发生了什么？*
2.  *在第一张图片上，红线显示“加载事件已触发”，蓝线显示“DOMContent 事件已触发”。这是什么意思，为什么在加载所有内容后会触发 DOMContent 事件？*

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2015-05-11T06:10:56.517

回答第二部分：

**蓝线（DOM 内容加载事件）：**
当浏览器完成主文档解析时发生。

**红线（加载事件）：**
当浏览器完成检索主文档所需的所有资源时发生。

**红线之后：**这里你会看到加载了主文档和其他资源所需的异步和缓存资源。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-23T18:01:57.243

我不确定这是否适合 SO，因为这是一个网络问题而不是编程问题，但我会回答我能回答的部分......

**DNS 查询**

当您连接到网站时，它必须从 DNS 中查找 IP。例如，您的计算机将联系 DNS，询问它是否知道“google.com”在哪里。如果是这样，它会给你一个IP。如果没有，它会给你另一个 DNS 的 IP，或者它会联系那个 DNS 本身（我不确定哪个实现适用于哪里），直到最终你得到你正在寻找的主机的 IP为了。

**连接**

连接该 IP 所需的时间。我不确定这里的细节。

**发送**

连接后，您将请求发送到服务器。它可以是查看页面或提交数据或任何内容的请求。

**等待**

发送请求后，您等待服务器响应它。它可能很忙，或者可能需要一段时间来处理您请求的任何内容。

**接收**

服务器处理完您的请求后，会将数据发回给您。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-06T14:42:05.040

这是谷歌的描述： [https ://developers.google.com/web/tools/chrome-devtools/network/reference](https://developers.google.com/web/tools/chrome-devtools/network/reference)

# apache-flex - 即使使用 -Xmx1024m -XX:MaxPermSize=512m，Maven flexmojos-maven-plugin 也会因 OutOfMemoryError 而失败

> ID：12097438
> 
> 赞同：1
> 
> 时间：2012-08-23T17:54:34.493
> 
> 标签：apache-flex, maven, flexmojos

我将回答我自己的问题，为下一个遇到此问题的人提供面包屑：

**问题**

x86Linux Maven 构建在 flexmojos-maven-plugin 期间失败

```
load-config+=...flex-config.xml -static-link-runtime-shared-libraries...
-metadata.language+=en_US 
[INFO] Loading configuration file .../flex-config.xml

# There is insufficient memory for the Java Runtime Environment to continue.
# Native memory allocation (malloc) failed to allocate 37064 bytes for Chunk::new
[ERROR] OutOfMemoryError -> [Help 1] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T17:54:34.493

**解决方案**

增加系统交换。flexmojos 调用 flex 编译器（一个本机可执行文件，需要为 JVM 分配的内存之外的内存）。如果内存不足并且无法换出 maven 的 jvm，则 flex 编译器会失败。

我添加了额外的交换并能够成功完成构建。

从[此处输入链接描述](http://www.cyberciti.biz/faq/linux-add-a-swap-file-howto/ "Linux 添加交换文件")

```
# create swap file
dd if=/dev/zero of=/opt/swapfile.1 bs=1M count=2048
# Set Permissions
chmod 600 /opt/swapfile.1
# Define as swap
mkswap /opt/swapfile.1
# Add to active swap
swapon /opt/swapfile.1
# Verify
free -m 
```

# python - Python 数字在 csv 文件中四舍五入

> ID：12097444
> 
> 赞同：2
> 
> 时间：2012-08-23T17:55:04.010
> 
> 标签：python

我正在收集推文数据并将其写入 csv 文件。当我在 IDLE 中打印状态 ID 时，一切正常：

```
with open('C:/location/filename.csv', 'wb') as acsv:
    w = csv.writer(acsv)
    w.writerow(('ID'))
    for statusObj in results:
        statid = statusObj.id
    w.writerow((statid)) 
```

这会按预期打印状态 ID（例如 238669617898323968）。但是当我打开csv文件检查时，最后3位四舍五入为238669617898323000。这是怎么回事？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T18:08:49.317

答案是……不要相信 Excel 会完全按照输入的方式显示您的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T18:15:56.137

看到[这个](http://appscout.pcmag.com/your-questions/274348-handle-huge-integers-in-excel)原因，但归结为 Excel 只处理 15-16 位数字。我在这里做一个假设，但如果你正在拉推文，我假设你正在使用 Twitter API？如果是这样，则有一个`id_str`字段会将 ID 作为字符串返回，然后您可以将其存储在 CSV 中并在程序的其他位置处理它的转换（有关更多信息，请参见[此处](https://dev.twitter.com/docs/twitter-ids-json-and-snowflake)）。

# iis - IIS 7.5 - 没有默认站点/没有 http 绑定

> ID：12097446
> 
> 赞同：4
> 
> 时间：2012-08-23T17:55:16.590
> 
> 标签：iis

我在我的 win 7 home premium 上启用/安装了 IIS，希望能够在我的 comp 上运行 asp 页面。

有两个问题不知道怎么解决：

1- 我在 IIS 管理器中看不到默认网站 2- 我在绑定下没有 http 选项

这就是我所做的...

我启用/安装了 IIS 7.5

控制面板 - 程序 - 打开或关闭 Windows 功能 检查“Intenet Information Services”下的所有内容 检查“Intenet Information Services Hostable Web Core”下的所有内容

我打开 IIS 管理器并看到三个窗格（窗口）：

左侧的连接 中间部分的功能或内容视图 右侧的操作

这是我的问题 #1：知道为什么我在连接窗格中看不到任何默认站点吗？

服务器名称 应用程序池站点（文件夹） ***** ** *****此处没有！***** ** *****

我的问题 #2 与绑定有关……当我想建立一个新站点时，我执行以下操作：

（在操作窗格中）- 添加网站站点名称：应用程序池：ASP .NET v4.0 物理路径：C:\inetpub\wwwroot\testsite

在绑定类型下，这些是我看到的选项......但没有可用的 http 选项。

绑定类型：-net.tcp-net.pipe-net.msmq-msmq.formatname

知道为什么和/或做什么才能使 http 选项可用吗？

我可能应该提到我在我的 comp 以及端口 80 上运行 xampp 1.8.0。127.0.0.1:80。

任何提示或建议表示赞赏！

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-17T11:06:18.383

我有同样的问题，唯一的解决方案是：

1.  删除 WAS（Windows 激活服务）

2.  删除 IIS

3.  重启

4.  安装 WAS

5.  安装 IIS

6.  重启

7.  打开 IIS 并查看带有 HTTP 和 HTTPS 绑定的默认网站

# ruby-on-rails - Rails 3：使用附加属性连接表

> ID：12097449
> 
> 赞同：1
> 
> 时间：2012-08-23T17:55:28.927
> 
> 标签：ruby-on-rails, ruby-on-rails-3, jointable

我有一个简单的购物车系统，我已经为一个应用程序工作了一段时间，并且在尝试弄清楚如何更新连接表（订单和产品之间）中的特定属性时需要一些帮助。

这是代码：

```
def add_product_to_cart
        @product = Product.by_client(current_client).first 
        @order = current_order
        unless @order.products.exists? :id => @product.id
            @order.products << @product
        end
    end 
```

当我更新`@order.products`...时，我正在尝试更新特定属性

这就是我想要做的： `@order.products << @product`-> 发生这种情况时，我需要更新一个`:price`属性..

无论如何要这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T18:01:07.563

```
class Order
  has_many :products
  def price
    products.sum(:price)
  end
end 
```

就在我的头上。这是总和参考：

[http://ar.rubyonrails.org/classes/ActiveRecord/Calculations/ClassMethods.html#M000296](http://ar.rubyonrails.org/classes/ActiveRecord/Calculations/ClassMethods.html#M000296)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T18:58:37.443

希望将属性放入连接表可能是缺少模型的标志。`OrderItem`您可以通过向其添加主键来将连接表提升为模型。HABTM 中的关联`Order`，`Product`然后成为`has_many through`关联。新模型将是设置填充`price`属性的回调的好地方。它还可以解锁额外的好处，比如时间戳物品和制作它们`act_as_list`等。

# javascript - 对象数据上的 JavaScript 垃圾收集

> ID：12097451
> 
> 赞同：2
> 
> 时间：2012-08-23T17:55:29.070
> 
> 标签：javascript

我希望找到有关优化垃圾收集或防止对象随着时间的推移在内存中积累的实践的任何信息。

例如，假设我有一个连续迭代，并且每次将一个项目添加到一个对象。

随着时间的推移，添加到对象中的旧项目不再与应用程序相关，应该从对象中删除，它们将永远不会再被访问。是否有必要专门删除这些值，还是会继续构建成一个巨大的对象？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T18:03:05.970

如果是您的业务逻辑决定了它们的无用性，这意味着仍然有对它们的引用，那么是的！您应该明确删除这些对象。在许多情况下，您需要在破坏引用之前*擦除*对象，以确保您正在释放您打算释放的所有内容。

今年早些时候，Scirra 的 Ashley 写了一篇很好的入门文章：[如何编写低垃圾实时 Javascript](http://www.scirra.com/blog/76/how-to-write-low-garbage-real-time-javascript)

# .net - Visual Studio 2012 缺少框架

> ID：12097456
> 
> 赞同：10
> 
> 时间：2012-08-23T17:55:46.653
> 
> 标签：.net, visual-studio-2010, .net-4.0, visual-studio-2012, .net-4.5

我今天安装了 Visual Studio 2012，我很兴奋，因为我想尝试最新的框架版本（.net 4.5）。但似乎 Visual Studio 2012 在“新项目”对话框中没有显示 .net 4.0 和 4.5。我在使用 Visual Studio 2010 时遇到过类似的问题，但较低的框架版本（3.0、2.0）并没有出现。有谁知道如何让他们出现？谢谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-15T16:58:01.157

您可能没有安装 Windows 8.1 SDK。Visual Studio 2012 及其更新链接 .NET Framwork 4.5 库以进行开发。

*   [视窗 8.1 SDK](http://msdn.microsoft.com/en-US/windows/apps/br229516)

如果您只是在寻找构建 Web 应用程序的选项，则不必安装完整的 SDK，只需安装程序中的 .NET Framework 4.5.1 选项。完整安装大约 1.1GB，但仅 .NET 安装程序只有 72MB。

对于那些阅读本文但尚未更新其 Visual Studio 2012 副本的人，请确保您还安装了这些：

*   [视觉工作室 2012 更新 4](http://www.visualstudio.com/news/2013-nov-13-vs)
*   [适用于 Visual Studio 2012 的 ASP.NET 和 Web 工具 2013.1](http://www.microsoft.com/en-us/download/details.aspx?id=41532)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-24T18:46:58.230

我在 VS2012 上遇到了这个问题，并通过在另一台 PC 上使用有效安装来修复它。

将**C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework** 文件夹从正常安装复制到安装失败的文件夹中。

当我启动 VS2012 时，目标框架重新出现，从那以后没有遇到任何问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T20:52:24.200

您的 VS 2012 安装很可能已损坏。卸载并重新安装它应该可以解决此问题。

其他人已经记录了这个问题（使用 VS 2012 RP 和 RTM）：

[VS2012 RTM 缺少 .net 4.5 和 mvc 项目模板](https://stackoverflow.com/questions/12720659/vs2012-rtm-missing-net-4-5-and-mvc-project-templates)

[http://social.msdn.microsoft.com/Forums/en-US/vssetup/thread/17ff0bb3-e37e-4978-a5a1-c30a8cef1dfe](http://social.msdn.microsoft.com/Forums/en-US/vssetup/thread/17ff0bb3-e37e-4978-a5a1-c30a8cef1dfe)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-08T10:36:53.760

我有类似的问题。试过这些，但没有一个起作用： - 修复 VisualStudio 2012 - 卸载并重新安装 VisualStudio 2012 - 安装 VisualStudio 2013

这对我有用：-添加或删除程序-> Microsoft .NET Framework 4 Multi-Targeting Pack 右键单击​​->修复

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-14T15:57:06.940

我正在使用 Visual Studio 2012 Ultimate WIN 7 32 位。我不需要卸载VS。我刚刚修复了它，现在它对我有用..修复后我收到了这个错误消息。 [http://blogs.msdn.com/b/mandi/archive/2013/08/21/visual-studio-2012-quot-the-event-log-file-is-full-quot-error-message.aspx](http://blogs.msdn.com/b/mandi/archive/2013/08/21/visual-studio-2012-quot-the-event-log-file-is-full-quot-error-message.aspx)

我只是忽略它并使用它..

# c# - BigInteger.ModPow() 的替代方案；在 C# 中

> ID：12097459
> 
> 赞同：0
> 
> 时间：2012-08-23T17:55:56.097
> 
> 标签：c#, math, 64-bit, long-integer, biginteger

我正在寻找 NET 4.x 引入的 C# 的 BigInteger 包的替代方案。

这个对象的数学运算非常慢，我猜这是因为算术是在比原始类型更高的级别上完成的 - 或者优化不好，无论如何。

Int64/long/ulong 或其他 64 位数字太小，无法正确计算 - 我说的是 64 位整数的 64 位整数次方。

希望有人可以建议我的东西。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T18:47:27.890

老实说，如果您有非常大的数字并且需要对它们进行大量计算并且`BigInteger`库仍然没有为您切割它，为什么不使用您所知道的最好的任何语言或工具包将其卸载到外部进程上呢？你真的受限于完全用 C# 编写你想要完成的任何事情吗？

例如，您可以[在 C# 中卸载到 MATLAB](http://www.mathworks.com/products/netbuilder/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T11:24:16.890

BIGInteger 确实很慢。原因之一是它的不变性。

如果您执行 a = a - b，您将获得 a 的新副本。通常这是很快的。使用 BigInteger 并说一个 2048 位的整数，它将需要分配额外的 2KB。

它还应该有不同的乘法算法，具体取决于整数大小（我认为它不是那么复杂）。我的意思是，对于非常大的整数，使用傅立叶变换的不同算法效果最好，而对于较小的整数，您可以将工作分解为较小的乘法（分而治之的方法）。[在http://en.wikipedia.org/wiki/Multiplication_algorithm](http://en.wikipedia.org/wiki/Multiplication_algorithm)上查看更多信息

无论哪种方式都有替代品，我没有使用或测试过。据我所知，它们可能比 .NET 内部要慢。（制作一个测试用例并做一些有效的测试是你的朋友）

*   许多自制 BigInteger 实现的 Google 'C# 大整数乘法'（通常在引入 BIGInteger 时来自 C#4.0 之前的版本）

*   [https://github.com/devoyster/IntXLib](https://github.com/devoyster/IntXLib)

*   [http://gmplib.org/](http://gmplib.org/)（有 C# 包装器）

*   [http://www.extremeoptimization.com/](http://www.extremeoptimization.com/)（商业）

*   [http://mathnetnumerics.codeplex.com/](http://mathnetnumerics.codeplex.com/)（不错的开源，但对于非常大的整数来说没有太多的板载）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-16T00:00:41.130

```
public static int PowerBySquaring(int baseNumber, int exponent)
{
int result = 1;
while (exponent != 0)
{
if ((exponent & 1)==1)
{
result *= baseNumber;
}
exponent >>= 1;
baseNumber *= baseNumber;
}

return result;
} 
```

# git - 需要帮助以使用 Git 签出源代码

> ID：12097460
> 
> 赞同：1
> 
> 时间：2012-08-23T17:56:06.460
> 
> 标签：git, version-control, repository

我是 Git 新手，我不知道应该怎么做才能查看存储库。

来源在：`http://zmpp.git.sourceforge.net/git/zmpp`

如何获取存储库中的所有文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T17:58:55.607

[git 克隆 http://zmpp.git.sourceforge.net/git/zmpp](http://cworth.org/hgbook-git/tour/)

[这](http://gitref.org/creating/)也将提供更多细节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T18:09:43.433

从这里下载 git：http: [//git-scm.com/downloads](http://git-scm.com/downloads) - 适用于您的操作系统。

打开*git-shell* - 在大多数系统上，简单的方法是双击标有以下“git-cmd”、“git-bash”、“git-terminal”或类似名称的图标。

*例如在 Windows 上：*
![在此处输入图像描述](../Images/cf6ccc4f080e5ade0698dc9ac2507e2a.png)

外壳启动后，移动到要签出源的文件夹。

比如说，您想在 D:\SourceCode\ 处检出代码 - 给定[Windows 系统](http://git-scm.com/download/win)- 使用`git-bash`- 键入以下内容：

```
cd /d/SourceCode 
```

然后`clone`是存储库 - 如下。

```
git clone http://zmpp.git.sourceforge.net/git/zmpp 
```

![在此处输入图像描述](../Images/4459956b5955099147123aaa5844fe2a.png)

以上将创建一个文件夹`zmpp`，其中将包含相关项目的整个存储库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T08:01:41.810

我遇到了这个问题，Ubuntuforums 上的一位乐于助人的用户指出，在使用 git:// 处理程序时，您必须在防火墙上打开端口 9418。

所以...

```
git clone git://projectname.git.sourceforge.net/gitroot/project/subproject 
```

将需要在 Linux 中添加此规则（例如，Fedora/RedHat 变体上的 /etc/sysconfig/iptables）：

```
-A INPUT -m tcp -p tcp --dport 9418 -j ACCEPT -m comment --comment "GIT" 
```

# html - 在离线模式下验证用户

> ID：12097463
> 
> 赞同：0
> 
> 时间：2012-08-23T17:56:26.197
> 
> 标签：html, local-storage, offline-caching

我们有一个应用程序可以离线工作，因为数据使用本地存储和 HTML5 离线功能在本地存储。

当用户尝试离线启动应用程序时，我们想要一种方法来验证用户身份（如果 ipad 被盗，出于安全目的）。

当用户尝试在线访问应用程序时，我们已经有了身份验证机制

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T05:08:14.463

粗略地说，您可以使用此人的密码作为本地存储数据库名称。没有密码，没有数据库访问权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T13:21:11.707

一种解决方案是将上次成功的**在线**登录保存到某个本地存储中。现在当用户处于**离线**模式时，然后与存储在本地存储中的值进行比较。

以下是 HTML 5 中本地存储的示例片段：

```
if (window.localStorage.getItem('value')) {
    dummy =  window.localStorage.getItem('value');
} 
```

希望这可以解决问题。

# delphi - DataSnap XE2 和 TStream 方法参数

> ID：12097470
> 
> 赞同：2
> 
> 时间：2012-08-23T17:57:06.580
> 
> 标签：delphi, stream, datasnap

我正在使用 TCP/IP 协议在 Delphi XE2 中处理 DataSnap 项目，该协议需要将二进制数据流作为方法参数传递给服务器。我遇到的问题是流内容的大小限制似乎约为 32 KB。超出此限制，服务器接收到的流为空。如果我传递其他方法参数，它们会完好无损地到达，所以这似乎是参数级别的问题。

以下是 DataSnap 服务类的声明方式：

```
 TDataSnapTestClient = class(TDSAdminClient)
  private
    FSendDataCommand: TDBXCommand;
  public
    constructor Create(ADBXConnection: TDBXConnection); overload;
    constructor Create(ADBXConnection: TDBXConnection; AInstanceOwner: Boolean); overload;
    destructor Destroy; override;
    procedure SendData(Data: TStream);
  end; 
```

我使用的方法应该有效，至少根据 Jim Tierney 的文章。也就是说，自 Delphi 2009 以来显然发生了一些更改，这些更改破坏了 Jim Tierney 的示例代码。

[DataSnap 服务器方法流参数](http://blogs.embarcadero.com/jimtierney/2009/04/06/31461/)

任何有关如何解决此问题的想法将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-23T19:55:39.683

DataSnap 以 32k 块传输数据。在所有块重新组装之前，接收端无法知道将接收多少字节。接收到所有数据后，DataSnap 不会设置`TStream`接收数据的大小，因此在将其移动到另一个知道流中有多少字节的流之前，您无法使用它。

我知道从 DataSnap 服务器中提取 32k+ 与将 32k+ 推送到 DataSnap 服务器不同，但这也可能对您有用。`TStream`在 DataSnap 服务器完成接收数据后，尝试运行此代码：

```
procedure CopyStreamToMemoryStream(const ASource: TStream; var ADest: TMemoryStream; const Rewind: Boolean = True);
const
  LBufSize = $F000;
var
  LBuffer: PByte;
  LReadCount: Integer;
begin
  GetMem(LBuffer, LBufSize);
  ADest.Clear;
  try
    repeat
      LReadCount := ASource.Read(LBuffer^, LBufSize);
      if LReadCount > 0 then
        ADest.WriteBuffer(LBuffer^, LReadCount);
    until LReadCount < LBufSize;
  finally
    FreeMem(LBuffer, LBufSize);
  end;
  if Rewind then
    ADest.Seek(0, TSeekOrigin.soBeginning);
end; 
```

我不记得我在哪里找到了这个代码（几年前），所以我不能在应得的地方给予信任，但它多年来一直可靠地为我工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T01:38:18.597

我开始考虑它，我突然想到将数据传输到另一个内存流只会浪费内存，尤其是在文件非常大的情况下。我们需要做的就是计算字节数并设置流大小，对吧？！

```
procedure FixStream(const AStream: TStream);
const
  LBufSize = $F000;
var
  LBuffer: PByte;
  LReadCount, StreamSize: Integer;
begin
  GetMem(LBuffer, LBufSize);
  try
    StreamSize := 0;
    repeat
      LReadCount := AStream.Read(LBuffer^, LBufSize);
      Inc(StreamSize, LReadCount);
    until LReadCount < LBufSize;
    AStream.Size := StreamSize;
  finally
    FreeMem(LBuffer, LBufSize);
  end;
end; 
```

你想试试吗？我现在无法测试代码，否则我会......

# java - 显示收集不同 bean 的报告

> ID：12097471
> 
> 赞同：3
> 
> 时间：2012-08-23T17:57:08.110
> 
> 标签：java, jasper-reports, dynamic-jasper

假设我有 2 个 bean：

*   ***奖***
*   ***员工***

我将它们都添加到一个集合中。基于此集合，我想使用***JRBeanCollectionDataSource****使用DynamicJasper*生成报告。

 *我能够为单个 bean 生成报告，但是对于不同 bean 的集合，我无法创建报告 - 我收到错误消息。

是否可以一次为两个不同的 bean 创建报告？

是否有任何替代解决方案来解决此任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T19:59:40.747

`Award`根据给出的信息，这意味着和之间没有关系`Employee`。如果是这种情况，您可以创建一个自定义数据源来为您处理。为了完整起见，我将包含一个已删除的 Award 和 Employee 类以及一个名为 MixedDataSource 的自定义数据源。（这里会列出很多代码，但请稍等片刻）。

**奖励.java**

```
package test;

public class Award {

    private String shortName;

    private String description;

    public Award(String shortName, String description) {
        super();
        this.shortName = shortName;
        this.description = description;
    }

    public String getShortName() {
        return shortName;
    }

    public void setShortName(String shortName) {
        this.shortName = shortName;
    }

    public String getDescription() {
        return description;
    }

    public void setDescription(String description) {
        this.description = description;
    }
} 
```

**雇员.java**

```
package test;

public class Employee {

    private String name;

    private String position;

    public Employee(String name, String position) {
        super();
        this.name = name;
        this.position = position;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getPosition() {
        return position;
    }

    public void setPosition(String position) {
        this.position = position;
    }

} 
```

**混合数据源.java**

```
package test;

import java.util.List;

import net.sf.jasperreports.engine.JRDataSource;
import net.sf.jasperreports.engine.JRException;
import net.sf.jasperreports.engine.JRField;

@SuppressWarnings("rawtypes")//have to add this because we are not using generics
public class MixedDataSource implements JRDataSource {

    private List rows;
    private int index=0;

    public MixedDataSource(List rows) {
        super();
        this.rows = rows;
    }

    @Override
    public Object getFieldValue(JRField arg0) throws JRException {
        Object obj = rows.get(index);
        if (obj instanceof Award){
            Award row = (Award)obj;
            //now get the field name
            if (arg0.getName().equals("shortName")){
                return row.getShortName();
            } else if(arg0.getName().equals("description")){
                return row.getDescription();
            }
        } else if (obj instanceof Employee){
            Employee row = (Employee)obj;
            if (arg0.getName().equals("name")){
                return row.getName();
            } else if(arg0.getName().equals("position")){
                return row.getPosition();
            }
        }
        //means we don't know what to do with it, so just return null
        return null;
    }

    @Override
    public boolean next() throws JRException {
        //This method is used by jasper to tell us they are moving to the next row.
        //So increment the index and return true if there are still more rows, if not
        //return false
        index = index+1;
        if(index < rows.size()){
            return true;
        }
        return false;
    }

} 
```

这会起作用，但可能不是您想要的方式。我的假设是 Award 和 Employee 之间存在关系，并且您想要进行某种类型的分组和排序。本质上你想要一个`Award`和`Employee`在同一行。您可能希望按奖项分组并列出员工。您可能想做相反的事情，按员工分组并列出奖项。**如果是这样，请忽略以上所有内容，这是没有用的。**

`EmployeeAward`您真正需要做的是使用您拥有的信息创建一个新的 bean（我们可以称之为 bean ）。如果您使用 sql 查询来执行此操作，这可能非常容易，或者如果您使用的是 hibernate 之类的东西，则可能需要更多的工作。你基本上只是说给所有的奖项，它给你一个列表。如果您正在执行后者，则可能会更容易降级到 SQL 或 HSQL（我认为他们称之为）并手动编写查询。

所以创建一个名为`EmployeeAward`. 这是我的：包测试；

```
public class EmployeeAward {

    private String employeeName;

    private String employeePosition;

    private String shortName;

    private String description;

    public EmployeeAward(String employeeName, String employeePosition,
            String shortName, String description) {
        super();
        this.employeeName = employeeName;
        this.employeePosition = employeePosition;
        this.shortName = shortName;
        this.description = description;
    }

    public EmployeeAward(Employee employee, Award award) {
        super();
        this.employeeName = employee.getName();
        this.employeePosition = employee.getPosition();
        this.shortName = award.getShortName();
        this.description = award.getDescription();
    }

    public String getEmployeeName() {
        return employeeName;
    }

    public void setEmployeeName(String employeeName) {
        this.employeeName = employeeName;
    }

    public String getEmployeePosition() {
        return employeePosition;
    }

    public void setEmployeePosition(String employeePosition) {
        this.employeePosition = employeePosition;
    }

    public String getShortName() {
        return shortName;
    }

    public void setShortName(String shortName) {
        this.shortName = shortName;
    }

    public String getDescription() {
        return description;
    }

    public void setDescription(String description) {
        this.description = description;
    }

} 
```

现在通过任何方式创建这些对象的列表，以便在其中`List<EmployeeAward> emplyeeAwards`实例化。此列表中的每个项目都将成为报告中的一行。现在这是很好的部分，创建您的数据源：

```
JRDataSource datasource = new JRBeanCollectionDataSource(employeeAwards); 
```

然后像往常一样传递它，你的工作就完成了。

最后，我想说你可以用 JasperReports 做很多很酷的事情，但我看到很多人正在做的事情是让它变得比它需要的更复杂。你会发现 JasperReports 就像我所说的平面数据源（即列表中的相同对象，列表中的每个项目都是一行等）。如果你这样做，生活会变得更轻松，更愉快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T20:25:41.680

另一种方法是使用*SubReport*并将 传递`List<Award>`给*MainReport*和传递`List<Employee>`给*SubReport*，这样做，您可以将*SubReport*设置为*MainReport*的扩展，例如：

主报告： `|FieldAward1|FieldAward2|FieldAward3|...|YOUR SUBREPORT HERE|`

子报告： `|FieldEmployee1|FieldEmployee3|FieldEmployee3|...`

编辑：即使它看起来很基本，我也必须告诉你，你应该对列表进行排序，以使一个列表中的每个对象与另一个列表中的相应对象匹配。*

# symfony - default_target_path 不适用于 FOSUserBundle

> ID：12097472
> 
> 赞同：5
> 
> 时间：2012-08-23T17:57:11.503
> 
> 标签：symfony, fosuserbundle

我已经安装`FOSUserBundle`并在我的项目中使用它。它的登录页面重定向到未知路径`/_wdt/50366043f414d`。我更改了in文件`default_target_path`下的，但没有生效。`form_login``security.yml`

如何更改 FOSUserBundle 中登录页面的目标路径？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-23T18:08:30.127

我必须将 设置`always_use_default_target_path`为`true`，如 [symfony 文档中所示](http://symfony.com/doc/current/reference/configuration/security.html)

```
#app/config/security.yml  

firewalls:
    main:
        pattern: ^/
        form_login:
            login_path: /login
            default_target_path: /my/desired/path
            always_use_default_target_path: true 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-10-13T08:51:35.337

我有同样的问题，我遇到这个问题的原因是因为 Symfony 试图加载 Web 调试工具栏（因此错误中的“_wdt”位），它有自己的路由，在末尾调用页面加载。就我而言，我已经像这样配置了我的 security.yml：

# 应用程序/配置/security.yml

```
security:
    encoders:
        FOS\UserBundle\Model\UserInterface: sha512

    role_hierarchy:
        ROLE_ADMIN:       ROLE_USER
        ROLE_SUPER_ADMIN: ROLE_ADMIN

    providers:
        fos_userbundle:
            id: fos_user.user_provider.username

    firewalls:
        main:
            pattern: ^/
            form_login:
                provider: fos_userbundle
                csrf_provider: form.csrf_provider
            logout:       true
            anonymous:    true

    access_control:
        - { path: ^/login$, role: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/register, role: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/resetting, role: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/css, role: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/js, role: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/, role: ROLE_USER } 
```

这意味着，如果用户试图打开根“/”后面的任何内容的页面，他需要登录。

我解决问题的方法是添加“_wdt”部分并允许匿名用户使用：

```
 access_control:
        - { path: ^/login$, role: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/register, role: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/resetting, role: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/css, role: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/js, role: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/_wdt, role: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/, role: ROLE_USER } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-02T11:03:24.867

这可能是一个老问题，但当前 Symfony2 配置没有更改 access_control，而是为调试工具栏提供了额外的防火墙：

```
 # Disabling the security for the web debug toolbar, the profiler and Assetic.
    dev:
        pattern:  ^/(_(profiler|wdt)|css|images|js)/
        security: false 
```

# haskell - Agda：我的代码没有类型检查（如何正确获取隐式参数？）

> ID：12097474
> 
> 赞同：5
> 
> 时间：2012-08-23T17:57:22.433
> 
> 标签：haskell, agda, dependent-type

"checkSimple" 获取 u，Universe U 的一个元素，并检查 (nat 1) 是否可以转换为给定 u 的 agda 类型。返回转换的结果。

现在我尝试编写一个控制台程序并从命令行获取“someU”。

因此，我将“checkSimple”的类型更改为包含一个 (u: Maybe U) 作为参数（可能是因为来自控制台的输入可能是“无”）。但是我无法获取代码进行类型检查。

```
module CheckMain where

open import Prelude

-- Install Prelude
---- clone this git repo:
---- https://github.com/fkettelhoit/agda-prelude

-- Configure Prelude
--- press Meta/Alt and the letter X together
--- type "customize-group" (i.e. in the mini buffer)
--- type "agda2"
--- expand the Entry "Agda2 Include Dirs:"
--- add the directory 

data S : Set where
  nat  : (n : ℕ) → S
  nil  : S

sToℕ : S → Maybe ℕ
sToℕ (nat n) = just n
sToℕ _       = nothing

data U : Set where
  nat     : U

El : U → Set
El nat = ℕ

sToStat : (u : U) → S → Maybe (El u)
sToStat nat           s = sToℕ s

-- Basic Test
test1 : Maybe ℕ
test1 = sToStat nat (nat 1)

{- THIS WORKS -}

checkSimple : (u : U) → Maybe (El u)
checkSimple someU = sToStat someU (nat 1)

{- HERE IS THE ERROR -}

-- in contrast to checkSimple we only get a (Maybe U) as a parameter
-- (e.g. from console input)

check : {u : U} (u1 : Maybe U) → Maybe (El u)
check (just someU) = sToStat someU (nat 1)
check _ = nothing

{- HER IS THE ERROR MESSAGE -}

{- 
someU != .u of type U
when checking that the expression sToStat someU (nat 1) has type
Maybe (El .u)
-} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-23T19:21:12.900

# python - 在Django中将变量从模板传递到视图的更有效方法是什么？

> ID：12097475
> 
> 赞同：11
> 
> 时间：2012-08-23T17:57:24.983
> 
> 标签：python, django, templates, view

我的问题涉及从模板传递变量以在 Django 中查看。

我知道在 URL 中和通过表单传递变量。我遇到的第一个问题是 url 可以被操纵，这不是我想要的。有没有办法阻止这种情况？

现在这就是我作为创可贴的东西：

```
<form action="/match/" method="post">
{% csrf_token %}

<input type="hidden" name="name1" value="{{ male_results }}">
<input type="hidden" name="userid1" value="{{ male_pic_userid }}">

<input type="hidden" name="name2" value="{{ female_results }}">
<input type="hidden" name="userid2" value="{{ female_pic_userid }}">

<input type="submit" value="Submit" />
</form> 
```

有没有办法避免不得不使用它？谢谢！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-23T18:06:37.457

大致有 3 种方法可以保留此类信息：

## 会话（我对您的情况的建议）

只需将您想要的数据塞入`request.session`字典即可；它将按用户保留，您可以轻松访问它：

```
# view1
request.session['name1'] = male_results
request.session['userid1'] = male_pic_userid

# view2 (or elsewhere in view1)
male_results = request.session.get('name1')
male_pic_userid = request.session.get('userid1') 
```

### 好处

*   无需更改您的模板（除了删除您现在不需要的表格）。
*   清理网址
*   即使通过关闭和重新打开浏览器窗口仍然存在
*   您无需担心用户修改甚至查看会话数据（这样更安全）

### 缺点

*   与 一样`POST`，页面内容由 URL*和*会话数据决定 — URL 不再是唯一的，用户无法共享依赖于会话信息的特定页面

## 查询参数

类似的东西`/match/?name1=foo1&userid1&name2=bar&userid2=2`。您可以手动添加这些 ( `<a href='/match/?name1={{ male_results }}...`) 或将`POST`表单更改为`GET`.

### 好处

*   这些 URL 可以共享和添加书签；如果它是一个带有过滤选项的列表，这可能是可取的（“这是我喜欢的汽车列表”发布到 Facebook*等*）

### 缺点

*   正如您已经注意到的，这些可以由用户自由修改
*   将这些添加到每个 URL 是一个巨大的痛苦

## POST 表单（您当前的方法）

### 好处

*   更隐蔽（没有某种浏览器扩展，用户不可见）
*   稍微难以操作（尽管不要依赖这种隐蔽的安全性）
*   更清洁的网址

### 缺点

*   如果您使用浏览器的“返回”按钮，则会在 Internet Explorer 上显示“此页面已过期”消息...
*   ...如果用户尝试重新加载您的任何页面，大多数浏览器上的“您确定要重新发送此数据”消息
*   如果用户重新打开页面（例如，在 URL 栏中按“返回”），所有这些状态信息都将丢失
*   用户无法分享他们正在查看的确切页面；内容部分由用户不可见的信息决定
*   `POST`向每个导航操作添加数据是一个**巨大**的痛苦。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T18:06:17.133

将数据从 html 页面获取到服务器后端有三种方法：URL (GET)、表单 (POST) 和 Cookie。

这三个中的任何一个都可能被操纵，因此无论如何您都需要每次都验证服务器上的所有内容。

在效率方面，根据您的帖子标题，URL (GET) 变量的效率稍高一些，因为表单数据在发送到服务器之前会经过少量编码。

在正常使用情况下，标准是当您从服务器检索数据时使用 URL (GET) 变量，当您想要在服务器上操作（编辑/删除）数据时使用表单 (POST) 变量。

# c# - 条件 Lambda Foreach

> ID：12097476
> 
> 赞同：1
> 
> 时间：2012-08-23T17:57:27.237
> 
> 标签：c#, linq

我有一个列表，我正在迭代如下。

```
foreach (Statistics value in data.Where(x => x.DateOrTime >= start[0])) 
```

但是，我想添加一个检查 myVariable == 0 然后按照上面的方式进行。否则按如下方式进行。

```
foreach (Statistics value in data) 
```

所以基本上，我想在表达式中做一个 if/else。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-23T17:58:53.243

怎么样：

```
foreach (Statistics value in data.Where(x => myVariable != 0 || 
                                             x.DateOrTime >= start[0])) 
```

或者：

```
var query = myVariable == 0 ? data.Where(x => x.DateOrTime >= start[0]) : data;
foreach (Statistics value in query)
{
} 
```

# c# - php str_word_count 到 c# 的端口

> ID：12097482
> 
> 赞同：1
> 
> 时间：2012-08-23T17:57:58.587
> 
> 标签：c#, php

我正在将一个遗留的 PHP 应用程序迁移到 .net，其中一个要求是 URL 与以前完全一样。

为了生成遗留应用程序使用的友好 URL [`str_word_count`](http://php.net/manual/en/function.str-word-count.php)，我想知道这个函数是否有 C# 的端口？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T18:41:17.690

好的，这是我的“糟糕的 C#”示例（在混合返回类型中模仿 PHP）。这是一个利用 .NET 正则表达式的相当简单的实现。

```
private enum WORD_FORMAT
{
    NUMBER = 0,
    ARRAY = 1,
    ASSOC = 2
};

private static object str_word_count(string str, WORD_FORMAT format, string charlist)
{
    string wordchars = string.Format("{0}{1}", "a-z", Regex.Escape(charlist));

    var words = Regex.Matches(str, string.Format("[{0}]+(?:[{0}'\\-]+[{0}])?", wordchars), RegexOptions.Compiled | RegexOptions.IgnoreCase);

    if (format == WORD_FORMAT.ASSOC)
    {
        var assoc = new Dictionary<int, string>(words.Count);
        foreach (Match m in words)
            assoc.Add(m.Index, m.Value);
        return assoc;
    }
    else if (format == WORD_FORMAT.ARRAY)
    {
        return words.Cast<Match>().Select(m => m.Value).ToArray();
    }
    else // default to number.
    {
        return words.Count;
    }
} 
```

因此，如果您选择，该函数将返回 a ，`Dictionary<int,string>`如果您选择`ASSOC`，则返回 a，`string[]`如果您选择，则返回`ARRAY`simple 。`int``NUMBER`

一个例子（我[在这里复制了 PHP 的例子](http://php.net/manual/en/function.str-word-count.php)

```
static void Main(string[] args)
{
    string sentence = @"Hello fri3nd, you're
   looking          good today!";

    var assoc = (Dictionary<int,string>)str_word_count(sentence, WORD_FORMAT.ASSOC, string.Empty);
    var array = (string[])str_word_count(sentence, WORD_FORMAT.ARRAY, string.Empty);
    var number = (int)str_word_count(sentence, WORD_FORMAT.NUMBER, string.Empty);

    //test the plain array
    Console.WriteLine("Array\n(");
    for (int i = 0; i < array.Length; i++)
        Console.WriteLine("\t[{0}] => {1}", i, array[i]);
    Console.WriteLine(")");
    // test the associative
    Console.WriteLine("Array\n(");
    foreach (var kvp in assoc)
        Console.WriteLine("\t[{0}] => {1}", kvp.Key, kvp.Value);
    Console.WriteLine(")");
    //test the charlist:
    array = (string[])str_word_count(sentence, WORD_FORMAT.ARRAY, "àáãç3");
    Console.WriteLine("Array\n(");
    for (int i = 0; i < array.Length; i++)
        Console.WriteLine("\t[{0}] => {1}", i, array[i]);
    Console.WriteLine(")");
    //test the number
    Console.WriteLine("\n{0}", number);
    Console.Read();
} 
```

但是，我想在这里添加一个注释：不要返回对象。它适用于 PHP，因为它不是强类型语言。确实，您应该编写函数的单独版本以适应每种不同的格式。无论如何，这应该让你开始:)

输出：

```
Array
(
    [0] => Hello
    [1] => fri
    [2] => nd
    [3] => you're
    [4] => looking
    [5] => good
    [6] => today
)
Array
(
    [0] => Hello
    [6] => fri
    [10] => nd
    [14] => you're
    [25] => looking
    [42] => good
    [47] => today
)
Array
(
    [0] => Hello
    [1] => fri3nd
    [2] => you're
    [3] => looking
    [4] => good
    [5] => today
)

7 
```

# xtify - 在 xtify GCM 示例应用程序中未收到推送

> ID：12097483
> 
> 赞同：1
> 
> 时间：2012-08-23T17:57:59.203
> 
> 标签：xtify

我已经构建了 xtify 示例应用程序并将其安装在设备上。通过 xtify 控制台，我可以看到我的设备已注册。当我使用 xtify 控制台的“测试实施”功能时，我收到了消息。

但是，通过 PushPoint Manager 和 TARGET Manager 发送的广播（简单和丰富）没有被接收到。

**更新** 当我点击示例应用程序中的“更新位置”按钮时，我收到了丰富的推送......即使应用程序没有运行，我是否也无法获得推送？

# android - Robolectric - 复制 SQLite 数据库时出错

> ID：12097484
> 
> 赞同：3
> 
> 时间：2012-08-23T17:57:59.367
> 
> 标签：android, sqlite, android-context, robolectric

我目前正在测试 Android API，为此，我开发了一个应用程序，该应用程序复制了我事先制作的数据库并测试了该应用程序（它调用了几个 Android 类）。有人指导我使用 Robolectric 来获取 Android 源代码，但是，这引起了一些问题。我的应用程序在没有它的情况下运行得很好，以及我的测试，但现在我在复制我的数据库时遇到了错误。每当我运行测试时，我的 catch 都会给我一个复制数据库的错误，并且取出该 catch 会导致 AssertionFailureError

```
assertTrue(activity.accessAdapter() != null);
assertTrue(activity.accessAdapter().accessHelper().checkDatabase()); // Here 
```

我假设这与不复制数据库有关，就好像我放回代码中的 try-catch 一样，它会导致在复制数据库时重新设置它们。

这是我的 SQLiteOpenHelper 的代码，或者至少是在复制数据库时调用的代码。

```
public void createDatabase() throws IOException
{
    this.getReadableDatabase();
    this.close();
    try {
        copyDatabase();
        Log.e(TAG, "Database created.");
    } catch (IOException e) {
        throw new Error("Error copying database.");
    }
}

private void copyDatabase() throws IOException {
    InputStream input = ((ShadowContextWrapper) shadowContext).getAssets().open(DATABASE_NAME);
    String outFileName = DATABASE_PATH + DATABASE_NAME;
    OutputStream output = new FileOutputStream(outFileName);
    byte[] buffer = new byte[1024];
    int length;
    while ((length = input.read(buffer)) > 0) output.write(buffer, 0, length);
    output.flush();
    output.close();
    input.close();
} 
```

我认为问题可能与上下文有关，所以我创建了一个 ShadowContext，但这也无济于事。还有其他错误，但这些只是相互调用的方法，一直到我的 SQLiteOpenHelper 中的 createDatabase()。

有谁知道我如何使用 Robolectric 复制这个数据库？我将它保存在我的应用程序的资产中，但显然，如果没有模拟器，这是没有意义的。谢谢你。

PS 如果需要，我可以添加更多代码，这正是我一开始认为是必要的。

# jpa - 为什么在查询期间会调用 JPA @PreUpdate-annotated 方法？

> ID：12097485
> 
> 赞同：18
> 
> 时间：2012-08-23T17:58:03.773
> 
> 标签：jpa

我有一个返回`Collection`实体的命名查询。

这些实体有一个`@PreUpdate`-annotated 方法。此方法在 期间调用`query.getResultList()`。因此，实体在持久性上下文中发生了变化，这意味着在事务提交时，实体被写回数据库。

为什么是这样？JPA 2.0 规范没有明确提到`@PreUpdate`应该由查询执行调用。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-05-01T20:03:27.937

规范说：

> PreUpdate 和 PostUpdate 回调分别发生在对实体数据进行数据库更新操作之前和之后。这些数据库操作可能发生在更新实体状态时，也可能发生在状态刷新到数据库时（可能在事务结束时）。

在这种情况下，调用`query.getResultList()`会触发 a`em.flush()`以便查询可以包括从当前 EntityManager 会话中更改的内容。`em.flush()`将所有更改推送到数据库（进行所有 UPDATE、INSERT 调用）。在`UPDATE`通过 JDBC 发送之前`@PreUpdate`调用相应的钩子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-06T11:59:39.417

这只是我对 rzymek 的回答以及一些后续代码的评论：

我试图重现 OP 的问题，因为听起来每次调用查询时 EntityManager 都会被刷新。但事实并非如此。据我所知，只有在对数据库进行实际更改时才会调用 @PostUpdate 方法。如果您对尚未刷新到数据库的 EntityManager 进行了更改，则 query.getResultList 将触发对数据库的刷新，这是人们应该期望的行为。

```
 Place valinorDb = em.find(Place.class, valinorId);
        // this should not trigger an PostUpdate and doesn't
        // TODO: unit-testify this
        em.merge(valinorDb);

        valinorDb.setName("Valinor123");
        valinorDb.setName("Valinor");
        // this shouldn't trigger an PostUpdate because the Data is the same as in the beginning and doesn't
        em.merge(valinorDb);

        {
            // this is done to test the behaviour of PostUpdate because of
            // this:
            // http://stackoverflow.com/questions/12097485/why-does-a-jpa-preupdate-annotated-method-get-called-during-a-query
            //
            // this was tested by hand, but should maybe changed into a unit
            // test? PostUpdate will only get called when there is an actual
            // change present (at least for Hibernate & EclipseLink) so we
            // should be fine
            // to use PostUpdate for automatically updating our index

            // this doesn't trigger a flush as well as the merge didn't even trigger one
            Place place = (Place) em.createQuery("SELECT a FROM Place a")
                    .getResultList().get(0);

            Sorcerer newSorcerer = new Sorcerer();
            newSorcerer.setName("Odalbort the Unknown");

            place.getSorcerers().add(newSorcerer);

            //this WILL trigger an PostUpdate as the underlying data actually has changed.
            place = (Place) em.createQuery("SELECT a FROM Place a")
                    .getResultList().get(0);
        } 
```

# wcf-security - 将凭据从一个 wcf 服务传递到另一个 wcf 服务

> ID：12097488
> 
> 赞同：5
> 
> 时间：2012-08-23T17:58:14.010
> 
> 标签：wcf-security, impersonation

我有 2 个 wcf 服务都托管在同一台机器上的 IIS 上。服务 A 由客户端调用并`BasicHttpBinding`与传输安全性和`NTLM credentialtype`. 服务 A 需要调用同样托管在 IIS 上的服务 B，但使用`WsHttpBinding`传输安全性和`NTLM credentialtype`.

IIS 配置为使用集成的 Windows 身份验证。

第一次尝试我收到了**403 禁止消息**：

```
System.ServiceModel.Security.MessageSecurityException : The HTTP request was forbidden with client authentication scheme 'Ntlm'.
System.Net.WebException: The remote server returned an error: (403) Forbidden. 
```

这是正常的，因为当我从服务 A 调用服务 B 时，会使用应用程序池的标识。

在我的第二次尝试中，我试图模拟对服务 B 的调用，但问题是操作中的所有代码都是在调用者帐户下执行的。此帐户在服务器上没有 ACL 权限，并且不能提供这些权限。记录以下错误：

```
System.IO.FileLoadException : Could not load file or assembly 'System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' or one of its dependencies. The handle is invalid. (Exception from HRESULT: 0x80070006 (E_HANDLE)) 
```

如何在不更改 ACL 或应用程序池标识的安全性的情况下解决此问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T15:45:23.007

看看这个：http: [//blogs.msdn.com/b/securitytools/archive/2009/11/04/double-hop-windows-authentication-with-iis-hosted-wcf-service.aspx](http://blogs.msdn.com/b/securitytools/archive/2009/11/04/double-hop-windows-authentication-with-iis-hosted-wcf-service.aspx)。在此处找到上述链接：http: [//go4answers.webhost4life.com/Example/calling-wcf-service-another-wcf-service-204170.aspx](http://go4answers.webhost4life.com/Example/calling-wcf-service-another-wcf-service-204170.aspx)

# ruby - 使用 ruby Net:HTTP API 将文件上传到远程 apache 服务器失败并出现 409 冲突

> ID：12097491
> 
> 赞同：3
> 
> 时间：2012-08-23T17:58:18.067
> 
> 标签：ruby, net-http, http-put

下面是一个将文件从本地文件系统上传到远程 Apache 服务器的程序。

程序以 409 冲突错误结束。有什么建议我做错了什么吗？我在 httpd.conf 中打开了 DAV 并授予了所有必要的权限，但我仍然没有运气。如果需要，我可以发布 httpd.conf。

这是代码：

```
BOUNDARY = "AaB03xZZZZZZ11322321111XSDW"
uri = URI.parse("http://localhost/dropbox/")
file = "/tmp/KEYS.txt"
http = Net::HTTP.new(uri.host, uri.port)
request = Net::HTTP::Put.new(uri.request_uri)
request.body_stream=File.open(file)
request["Content-Type"] = "multipart/form-data"
request.add_field('Content-Length', File.size(file))
request.add_field('session', BOUNDARY)
response=http.request(request)
puts "Request Headers: #{request.to_hash.inspect}"
puts "Sending PUT #{uri.request_uri} to #{uri.host}:#{uri.port}"
puts "Response #{response.code} #{response.message}"
puts "#{response.body}"
puts "Headers: #{response.to_hash.inspect}" 
```

及其输出：

```
Request Headers: {"accept"=>["*/*"], "host"=>["localhost"], "content-length"=>[88873],     "content-type"=>["multipart/form-data"], "session"=>["AaB03xZZZZZZ11322321111XSDW"],   "connection"=>["close"]}
Sending PUT /dropbox/ to localhost:80
Response 409 Conflict
<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html><head>
<title>409 Conflict</title>
</head><body>
<h1>Conflict</h1>
<p>Cannot PUT to a collection.</p>
<hr />
<address>Apache/2.2.21 (Unix) mod_ssl/2.2.21 OpenSSL/0.9.8r DAV/2 PHP/5.3.10 with Suhosin-Patch Server at localhost Port 80</address>
</body></html>
Headers: {"server"=>["Apache/2.2.21 (Unix) mod_ssl/2.2.21 OpenSSL/0.9.8r DAV/2  PHP/5.3.10 with Suhosin-Patch"], "content-length"=>["315"], "content-type"=>["text/html;  charset=ISO-8859-1"], "date"=>["Thu, 23 Aug 2012 17:36:40 GMT"], "connection"=>["close"]} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T21:09:09.120

当我将第 5 行更改为：

```
request = Net::HTTP::Put.new("#{uri.request_uri}/test.file") 
```

错误“无法放入集合”意味着无法对文件夹进行上传。必须指定文件名。

# c# - DataDirectory 设置项目

> ID：12097494
> 
> 赞同：1
> 
> 时间：2012-08-23T17:58:30.297
> 
> 标签：c#, sqlite, setup-project

我正在为 C# winforms、sqlite 应用程序做一个 SETUP 项目。连接字符串似乎有点问题。用户将他想要使用的数据库放在一个位置（v 会告诉他）。在此示例中`"C:\\Program Files(x86)\\DefaultCompany\\RSetup";`，用户可以使用自己的数据库副本。

所以我在 Program.cs Main 中将数据目录设置为这个路径，这是我能想到的唯一方法。如果有更好的方法那就是 grt !!

```
 App.config 

        <add name="ConnString" connectionString="|DataDirectory|\MySQlite.db;Compress=True;Version=3"
              providerName="System.Data.Sqlite" />

  Program.cs 
    Setting the datadirectory to the path of the executable. Currently hard coded the path of the executable 
      static void Main()
            {

                   AppDomain.CurrentDomain.SetData("DataDirectory","C:\\Program Files(x86)\\DefaultCompany\\RSetup"); 
```

这似乎不起作用。除了数据不是空白之外，它不会给出任何错误。似乎在设置和常规项目中都不起作用

谢谢JC

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T18:12:18.157

您可以询问用户数据库的位置，将该路径存储在某处（例如用户设置），然后您可以随时检索它。这将为用户提供更大的放置位置的灵活性，并且如果需要，同一台机器上的多个用户可以拥有自己的数据库。

这是一些伪代码...

```
string dbLocation = Properties.Settings.Default.DatabaseLocation;
if (string.IsNullOrWhiteSpace(dbLocation)
{
    dbLocation = AskUserForLocation();
    Properties.Settings.Default.DatabaseLocation = dbLocation;
    Properties.Settings.Default.Save();
}

AppDomain.CurrentDomain.SetData("DataDirectory",dbLocation); 
```

使用这种方法，您还可以添加一个菜单选项以允许用户根据需要更改位置。

它还使您能够在任何地方检索值，包括创建连接的位置，您可以将路径附加到读取连接字符串和创建新连接之间的位置。

```
SQLiteConnection myConnection = new SQLiteConnection;();
myConnection.ConnectionString = Path.Combine(Properties.Settings.Default.DatabaseLocation, myConnectionString);
myConnection.Open(); 
```

# vb.net - 无法访问 Outlook 2010 VB.Net 中的共享联系人文件夹

> ID：12097495
> 
> 赞同：3
> 
> 时间：2012-08-23T17:58:47.960
> 
> 标签：vb.net, outlook, vsto, outlook-addin, outlook-2010

我正在创建 Outlook 加载项，但在使用 vb.net 进入共享文件夹时遇到问题。

我努力了

```
contactsFolder = ns.Folders.Item("Shared Contacts") 
```

和

```
contactsFolder = ns.Folders.Item("Public Folders") 
```

仍然无法访问它。有人能帮助我吗。我不断收到错误：

```
The attempted operation failed.  An object could not be found. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T20:00:50.817

由于您使用的是共享文件夹，因此该文件夹不得存在于[默认](http://msdn.microsoft.com/en-us/library/office/bb175604%28v=office.12%29.aspx) [`Store`](http://msdn.microsoft.com/en-us/library/office/bb176405%28v=office.12%29.aspx). 您可能需要枚举[`Session.Stores`](http://msdn.microsoft.com/en-us/library/office/bb175607%28v=office.12%29.aspx)( *`ns.Stores`*)。有关代码示例，请参阅[相关的 SO 帖子](https://stackoverflow.com/a/12055323/175679)。

# css - 较少文件中的颜色语法

> ID：12097496
> 
> 赞同：2
> 
> 时间：2012-08-23T17:58:50.343
> 
> 标签：css, visual-studio, less

我使用 Visual Studio 2012 创建 ASP.NET 网页。为了改进我的工作表样式，我开始使用 LESS 库。
我的问题是：可以像 css 文件一样为扩展名较少的文件中的语法着色吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T19:03:40.183

可以使用插件[Mindscape Web Workbench](http://visualstudiogallery.msdn.microsoft.com/2b96d16a-c986-4501-8f97-8008f9db141a)。

更多信息在：[http ://www.hanselman.com/blog/CoffeeScriptSassAndLESSSupportForVisualStudioAndASPNETWithTheMindscapeWebWorkbench.aspx](http://www.hanselman.com/blog/CoffeeScriptSassAndLESSSupportForVisualStudioAndASPNETWithTheMindscapeWebWorkbench.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T08:29:01.700

现在还有[Web Essentials 2012](http://visualstudiogallery.msdn.microsoft.com/07d54d12-7133-4e15-becb-6f451ea3bea6)，看起来和 Mindscape Web Workbench 很像。只尝试过很棒的 Web Essentials，所以不能推荐其中一个。

# excel - Excel COUNTIFS 使用不同的标准产生相同的结果

> ID：12097501
> 
> 赞同：0
> 
> 时间：2012-08-23T17:58:56.953
> 
> 标签：excel, countif, sumifs

尽管使用了不同的标准，但我使用了 COUNTIFS 公式并收到了相同的结果。下面是一个简化的场景，这是一个[屏幕截图](http://www.ppmroadmap.com/wp-content/uploads/2012/08/excel.png)（对不起，新手不能发布图像）。

> **上校 | 上校 B | 上校 C | 科尔D | 上校 | 上校 F |**
> 
> 2012 年 8 月 31 日 | 是 | 第 1 步 | 0 | 2012 年 8 月 31 日 | 空白 | 2012 年 8 月 31 日
> 
> 2012 年 8 月 31 日 | 空白 | 空白 | 10,000 |
> 
> 2012 年 8 月 31 日 | 没有 | 第 5 步 | 0 |

预期的逻辑如下：

*   标准 1：如果 A 列与“2012 年 8 月 31 日”或单元格 F2 匹配，则包括
*   标准 2：包括 B 列是否为“是”或空白
*   标准 3：包括 C 列是否与“步骤 1”匹配
*   标准 4：如果 D 列等于“0”，则包括

这是两个得出相同答案的公式（计数 = 1）：

*   =COUNTIFS(A2:A4,F2,B2:B4,"是",C2:C4,"步骤 1",D2:D4,0
*   =COUNTIFS(A2:A4,F2,B2:B4,"<>",C2:C4,"Step 1",D2:D4,0

此外，如果满足标准 1-3，关于将公式调整为 SUM 列 D 的任何建议？我应该使用 SUMIFS 吗？我认为是这样，但论点结构不同。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T18:15:33.593

`=COUNTIFS(A2:A4,F2,B2:B4,"<>",C2:C4,"Step 1",D2:D4,0`

应该

`=COUNTIFS(A2:A4,F2,B2:B4,"",C2:C4,"Step 1",D2:D4,0`

将`""`计算空白，不适`"<>"`用于 CountIfs / SumIfs

SUMIFS 将是

`=SUMIFS(D2:D4,A2:A4,F2,B2:B4,"",C2:C4,"Step 1")`

# vim - 如何搜索然后复制 vi/vim 中的行？

> ID：12097503
> 
> 赞同：4
> 
> 时间：2012-08-23T17:59:02.097
> 
> 标签：vim, clipboard, vi

我想最好用一个例子来解释，所以这里是：

```
My useful line.
Some useless line.
Some other useless line.
Another useful line - oh I want this!
This is useful, I want this too! 
```

在此示例中，我正在搜索字符串“有用”。所以，我想将第 1、4 和 5 行复制到剪贴板。我怎样才能用 vim 做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-23T18:11:25.603

首先清除寄存器`a`（您可以使用任何字母 az）以供使用。

```
:let @a='' 
```

然后运行魔法。

```
:g/useful/yank A 
```

它将搜索匹配模式“有用”的行，然后`:yank A`对它们运行命令。大写 A 将附加到登记册`a`上。

如果你的 vim 配置了全局 Windows/X 剪贴板，你可以运行

```
:let @+=@a 
```

将 register`a`的内容复制到剪贴板。

# asp.net-mvc - 在 IIS 7.5 ASP.NET MVC3 中托管时使用 @Url.Action 助手的主详细信息的 url 参数是什么

> ID：12097505
> 
> 赞同：0
> 
> 时间：2012-08-23T17:59:07.380
> 
> 标签：asp.net-mvc, asp.net-mvc-3, jqgrid, jqgrid-asp.net

我正在使用 jqgrid 和高级主细节方法。在我在 IIS 7.5 中托管 ASP.NET MVC3 应用程序之前，它工作正常。目前，我的 url 参数如下所示

```
jQuery("#list").jqGrid('setGridParam', { url: "/Home/GetNames/" + rowid, page: 1 }); 
```

它使用传递的 rowid 完美地调用了控制器。

在 IIS 中托管应用程序后，我了解到我需要使用 @Url.Action 并更改了我的 url 参数，如下所示：

```
jQuery("#list").jqGrid('setGridParam', { url: '@Url.Action("GetNames", "Home")' + rowid, page: 1 }); 
```

现在，我的控制器没有被调用。我想我在使用@Url.Action 时使用了错误的语法。

请提供任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T18:02:54.853

您在 rowid 和您的路线之间缺少反斜杠

```
jQuery("#list").jqGrid('setGridParam', { url: '@Url.Action("GetNames", "Home")' + "/" + rowid, page: 1 }); 
```

# html - 将内容框居中并留有一个导航框

> ID：12097507
> 
> 赞同：1
> 
> 时间：2012-08-23T17:59:10.800
> 
> 标签：html, css

我在顶部有一个水平导航栏。此导航栏位于页面中间，没有固定宽度。

下面，我有一个内容框，它的最大宽度接近顶部导航的宽度，它也是居中的。

现在，我想要在内容左侧的另一个导航框（可以是固定宽度，但最好不要），但内容仍然要居中（不是一个包含导航和内容的框）。

[中心问题 http://img688.imageshack.us/img688/4306/problemcenter.png](http://img688.imageshack.us/img688/4306/problemcenter.png)

所以代码看起来像这样：

```
<nav id="main-navigation"></nav>
<nav id="sidenav"></nav>
<section id="content"></section> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T18:28:04.157

如果可以的话，我想推荐以下内容：

1.  用容器包装上面的元素。
2.  应用`position:relative`到这个新容器。
3.  接下来，`position:absolute`申请**#sidenav**。
4.  最后，继续并通过申请定位**#sidenav**`right:100%` 。

你有它！您现在需要做的就是相应地对其进行样式设置。

**[这是一个工作示例的小提琴](http://jsfiddle.net/n4Rbc/)**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T18:30:50.230

看看这个[**演示**](http://jsfiddle.net/VNxsK/6/)。

`#sidenav`与其父对象绝对定位`#content`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T18:29:39.133

这可能就是你要找的东西：[小提琴！](http://jsfiddle.net/jlowgren/pwd4G/)

# c# - 如何使用不同于 WMI 范围的凭据通过 WMI 在远程计算机上运行程序

> ID：12097508
> 
> 赞同：0
> 
> 时间：2012-08-23T17:59:15.527
> 
> 标签：c#, wmi

我想使用 Win32_Process Create 方法运行程序，我提供给 Wmi 连接的凭据是管理员凭据，但程序应该在另一个凭据下运行（非管理员，无权访问 WMI）

我想出的唯一解决方案是在计算机上运行一个小程序，它会模拟较弱的用户并完成这项工作，我认为应该有更好的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T00:00:19.750

提供您以管理员身份登录，这无关紧要。

例子：

```
C:\>wmic process call create "cmd /c tasklist | sort & pause"
Executing (Win32_Process)->Create()
Method execution successful.
Out Parameters:
instance of __PARAMETERS
{
        ProcessId = 5240;
        ReturnValue = 0;
}; 
```

只要确保您执行的命令有效：

```
C:\>wmic process call create /?
Call                    [ In/Out ]Params&type                   Status
====                    =====================                   ======
Create                  [IN ]CommandLine(string)                Implemented

                        [IN ]CurrentDirectory(string)

                        [IN ]ProcessStartupInformation(object:Win32_ProcessStartup)

                        [OUT]ProcessId(uint32)

                        [OUT]ReturnValue(uint32) 
```

# jquery - DataTables 使用来自 JSON 的 mDataProp 和 fnRender 排序

> ID：12097511
> 
> 赞同：0
> 
> 时间：2012-08-23T17:59:34.663
> 
> 标签：jquery, json, sorting, datatables

我正在尝试使用`mDataProp`、`fnRender`和`bUseRendered`根据 ID 对列进行排序，但显示名称。我看到它`bUseRendered`已被弃用，并且 API 建议使用`mData`and `mRender`，但是对于那些我无法在我的列中填充任何数据。这是我的代码，这种工作，但也没有呈现我想要的东西：

```
$(document).ready(function() {
oTable = $('#example').dataTable( {
    "sAjaxSource": "source.php",
    "aaSorting": [],
    "aoColumns": [
        { "mDataProp" : "NameID",
           "fnRender" : "Name",
           "bUseRendered": false},
        { "mDataProp" : "Priority"},
        { "mDataProp" : "Action"}
        ]
    } );
} ); 
```

这是我使用 mData 的尝试，但这不会填充我的第一列并给我一个错误弹出窗口。

```
$(document).ready(function() {
oTable = $('#example').dataTable( {
    "sAjaxSource": "source.php",
    "aaSorting": [],
    "aoColumns": [
        { "mData" : "NameID",
           "mRender" : "Name"},
        { "mDataProp" : "Priority"},
        { "mDataProp" : "Action"}
        ]
    } );
} ); 
```

任何想法如何让它显示我的`Name`，但排序`NameID`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T14:47:45.787

```
$(document).ready(function() {
oTable = $('#example').dataTable( {
    "sAjaxSource": "source.php",
    "aaSorting": [],
    "aoColumns": [
        { "mDataProp" : "NameID",
          "bUseRendered" : false,
          "fnRender" : function(oObj) {
                       return oObj.aData["Name"];
                       }
        },
        { "mDataProp" : "Priority"},
        { "mDataProp" : "Action"}
        ]
    } );
} ); 
```

# php - “Uncaught SyntaxError: Unexpected token ILLEGAL”当我通过 AJAX 发送 html 时

> ID：12097515
> 
> 赞同：0
> 
> 时间：2012-08-23T17:59:54.357
> 
> 标签：php, javascript, jquery, ajax

我有一个可编辑的 iframe，可用作博客的帖子输入。我正在使用 jQuery 从 iframe 的正文中检索 html：

```
function sharePost (feedNumber)
{
  var postBox = $("#ifrNewPost" + feedNumber).contents(); // Gets iframe content
  var postContent = $('body', postBox).html(); // Gets iframe body

  var params = { post: encodeURI(postContent) };

  // Send to server
  $.ajax({

    type:'POST', 
    url: 'script/post.php', 
    data: params, 

    success: function(response) {
      $(document).append(response);
    }

  });
} 
```

几乎可以完美运行，我的问题是，当我将某些内容粘贴到 iframe 中时，似乎在我粘贴的开头添加了一个换行符，然后在提交时，脚本失败并显示：“Uncaught SyntaxError: Unexpected token ILLEGAL”

我试过 encodeURI 和 encodeURIComponent 无济于事。当我在粘贴后查看页面的代码时，我粘贴的内容没有明显的变化，它似乎只是在它之前添加了一个新行。关于如何将 HTML 安全地发送到我的 php 脚本的任何解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T12:02:42.797

问题在于 php 代码到底返回了什么！只需运行正则表达式将任何换行符更改为 br 就可以了！

```
$post = preg_replace("/(\r\n|\n|\r)/", "<br />", $post); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-30T05:43:53.807

使用[nl2br](http://php.net/manual/en/function.nl2br.php "nl2br")

```
$post = nl2br($post); 
```

# performance - oracle.jdbc.xa.client.OracleXADataSource 和 oracle.jdbc.pool.OracleDataSource 有什么区别

> ID：12097516
> 
> 赞同：8
> 
> 时间：2012-08-23T17:59:54.723
> 
> 标签：performance, jdbc, weblogic-10.x, oracle-adf

我试图了解 XA 与非 XA JDBC 数据源之间的区别。另外我怎么知道使用的是哪种类型和版本的 JDBC dtriver。我目前在 10.3 weblogic 上并尝试使用 setQueryTimeout 来终止长时间运行的查询，这对于 OracleXADataSource 似乎并不可靠，因为它只在第一次而不是总是工作。抱歉这个基本问题，但我是 Weblogic 数据源配置的新手

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-23T19:53:53.460

XA jdbc 驱动程序用于实现两阶段提交，这意味着两个远程资源是同一事务的一部分。Java 通过 JTA 指定了一个实现。一个好的阅读是例如[http://www.javaworld.com/javaworld/jw-07-2000/jw-0714-transaction.html](http://www.javaworld.com/javaworld/jw-07-2000/jw-0714-transaction.html)；如果您在 Google 上搜索“xa jdbc 驱动程序”，您会发现更多信息。

如果没有必要，您不应使用 XA 驱动程序。我记得读过他们有一些问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-03T00:26:07.333

要**识别 WLS 正在使用的 JDBC 驱动程序**，请转到`<domain_dir>/config/jdbc`并打开数据源文件，检查文件中的`driver-name`值。

**要识别驱动程序版本**，请检查从哪个 .jar 加载驱动程序（使用 运行 WLS `-verbose:class`）- jar 的名称将包含版本号。此外，您可以使用`java -jar my-jdbc-file.jar`which 将打印驱动程序版本。OJDBC 驱动程序通常存储在名为`ojdbc6.jar`or`ojdbc7.jar`等​​的文件中。

# sql-server-2008 - 在 ETL 期间或插入数据仓库期间计算计算列

> ID：12097517
> 
> 赞同：2
> 
> 时间：2012-08-23T17:59:54.900
> 
> 标签：sql-server-2008, data-warehouse, etl

我希望有人能指出一些关于何时计算存储在数据仓库中的计算值的最佳实践。

考虑以下示例，

```
CREATE TABLE
(
    MyFactID INT NOT NULL IDENTITY(1, 1),
    OrderDimID INT NOT NULL, -- FK To OrderDimension
    StartDate DATETIME NOT NULL,
    CompletedDate DATETIME NULL,
    ElapsedCalendarTimeInMinutes INT NULL,
    ElapsedBusinessTimeInMinutes INT NULL
) 
```

在此示例中，已用日历时间（以分钟为单位）是从开始日期到结束日期的时间（以分钟为单位）。然后，我们的工作时间反映了这些日历日内可用的工作时间。

目前，我们正在 ETL 期间计算此值并插入两个日期。我想知道这是否是执行此操作的正确位置。

其他一些想法是：

A) 通过仅在事实表中存储开始和结束日期来使用索引视图，然后创建一个以分钟为单位计算经过时间的视图，并具有一个使用函数来计算工作日的计算列。

B) 使用 After 触发器在插入发生后更新经过的日历时间和业务时间，该插入将完成日期插入或更新为非空值。

我觉得这应该在数据库中完成，这样如果对结束日期或业务时间的计算进行任何更改，它就会反映出来。在 ETL 期间这样做似乎很容易出现问题。

对此的任何想法表示赞赏！

**更新：**至少有 6 列以这种方式确定。*我们*有营业时间、营业时间和日期（营业时间为 12 小时）；然后我们有客户分钟、小时和天数（通过查找表确定客户的工作时间）；那么我们只有日历分钟、小时和天（尽管这些没有被存储；只有分钟）。由于这是一个 DW，我希望所有数据都存在并且不需要计算。对我来说，确保 ETL 正确并应用到任何地方似乎比在基础数据之上创建视图以获取计算信息要多做一些工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T19:25:15.027

最简单的方法应该是最好的解决方案：

在您的 ETL 过程中（让我们假设这是[SSIS](http://msdn.microsoft.com/en-us/library/ms141026.aspx)，但您可以外推到其他技术）：

1.  创建[数据流](http://msdn.microsoft.com/en-us/library/ms141122.aspx)以将表从操作数据库复制到后台数据仓库。
2.  [使用T-Sql 任务](http://msdn.microsoft.com/en-us/library/ms139753.aspx)更新事实表。一个[合并](http://msdn.microsoft.com/en-us/library/bb522522%28v=sql.105%29.aspx)语句就足够了：

合并样本：

```
MERGE Target AS T
USING Source AS S
ON ( __  matching criteria ___) 
WHEN NOT MATCHED BY TARGET
    THEN INSERT( OrderDimID, startDate, ... ) VALUES( ... )
WHEN MATCHED 
    THEN UPDATE SET T.ElapsedCalendarTimeInMinutes = ___some calculations___
WHEN NOT MATCHED BY SOURCE
    THEN DELETE (?) 
```

这避免了触发器和索引视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T19:36:03.370

您可以使用计算列， http: [//msdn.microsoft.com/en-us/library/ms191250](http://msdn.microsoft.com/en-us/library/ms191250(v=sql.100).aspx) (v=sql.100).aspx 。有两种口味，非持久化和持久化。当您查询数据时，非持久化运行计算。Persisted 存储插入时的值，然后根据对基础公式数据的更改进行更新。对于数据仓库应用程序，我会推荐持久化。

# vb.net - 在 VB.NET 中执行函数而不首先声明类的实例

> ID：12097518
> 
> 赞同：2
> 
> 时间：2012-08-23T17:59:55.040
> 
> 标签：vb.net

有没有办法让我在不先声明变量的新实例的情况下对它进行函数调用？

因此，例如在 Java 中，您可以这样做：

```
new foo().bar(parameters); 
```

我在 Visual Basic 中尝试过类似的方法，但这是语法错误。目前我正在创建一个变量，然后运行该函数。

```
dim instance as new foo()
instance.bar(parameters) 
```

有什么我可以做的类似于上面的 Java 代码吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T18:15:43.623

不完全是。您可以通过将实例括在括号中来在更大的表达式中执行此操作，例如：

```
MessageBox.Show((New String("y"c, 1)).ToUpper()) 
```

或者，事实上，虽然我觉得它更令人困惑，但您实际上甚至不需要实例化周围的括号：

```
MessageBox.Show(New String("y"c, 1).ToUpper()) 
```

但是，如果您只想调用这样的方法，我知道的唯一方法是包含在`CType`运算符中。例如，如果您有这样的课程：

```
Private Class Test
    Public Sub Show()
        MessageBox.Show("Hello")
    End Sub
End Class 
```

您可以像这样调用该`Show`方法：

```
CType(New Test(), Test).Show() 
```

但是，它有点笨拙。

实际上，自从我昨天发布此消息以来，SSS 提供了一个更好的答案。`CType`您可以使用`Call`关键字，而不是将其包装在运算符中。例如：

```
Call New Test().Show() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T02:11:00.100

是的，你可以，我经常使用以下模式。另一种方法是向 Sub New() 添加参数。我在初始化可能失败时使用此模式，并且您希望返回空引用（Nothing）而不是抛出异常。

```
Public Class Foo
  Property Prop1 As String
  Property Prop2 As String

  Public Shared Function Bar(p1 As String, p2 As String) As Foo
    Dim f As Foo
    If p1 = "" Or p2 = "" Then
      'validation check - if either parameter is an empty string, initialisation fails and we return a null reference
      f = Nothing
    Else
      'parameters are valid
      f = New Foo
      f.Prop1 = p1
      f.Prop2 = p2
    End If
    Return f
  End Function

  ''' <summary>
  ''' Optional - marking the Sub New as "Private" forces the caller to use the Bar() function to instantiate
  ''' </summary>
  ''' <remarks></remarks>
  Private Sub New()

  End Sub
End Class 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-06T14:32:37.877

就像 SSS 提供了最适合 Classes 的方式一样，如果不强迫您只使用 Classes，另一种方法可能是使用 Modules。

模块提供了对功能的轻松访问，甚至无需为它们创建对象。

# c# - C#创建一个将被解析的字符串，当他们输入一个标记字符时，用户输入失败

> ID：12097524
> 
> 赞同：0
> 
> 时间：2012-08-23T18:00:14.020
> 
> 标签：c#, json, parsing

我知道发生了什么，但我试图让我的 .Split() 忽略某些字符。

样本：

```
1|2|3|This is a string|type:1 
```

“This is a string”部分是用户输入用户可以输入拆分字符，| 在这种情况下，所以我想用 \| 来逃避它。它似乎仍然基于此分裂。这是在网络上完成的，所以我在想一个聪明的举动实际上可能只是 JSON.encode(user_in) 来绕过它？

```
1|2|3| This is \|a string|type:1 
```

仍然在转义字符上分裂，因为我没有将其定义为特殊情况。我将如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T18:10:33.440

您可以改用 Regex.Split 然后在 | 上拆分 前面没有 .

```
 // -- regex for | not preceded by a \
        string input = @"1|2|3|This is a string\|type:1";
        string pattern = @"(?<!\\)[|]";
        string[] substrings = Regex.Split(input, pattern);

        foreach (string match in substrings)
        {
            Console.WriteLine("'{0}'", match);
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T18:08:44.273

您可以先用特殊的东西替换分隔符，然后拆分它，最后将其替换回来。

```
 var initial = @"1|2|3|This is \| a string|type:1";
    var modified = initial.Replace(@"\|", "@@@");
    IEnumerable<string> result = modified.Split('|');
    result = result.Select(i => i.Replace("@@@", @"\|")); 
```

# html - 浮动 48% div 需要一整行文本来保持其大小？

> ID：12097526
> 
> 赞同：-1
> 
> 时间：2012-08-23T18:00:25.087
> 
> 标签：html, css

重建我的网站的模板效果很好，除了中心的 2 个 div 左右浮动。它们似乎至少需要在每个文本中包含一整行文本才能保持打开状态。

如果不是，左侧的导航似乎离开了左侧的屏幕。左右 div 是固定宽度。

两个中心的浮动我相信正确并清除。每个 48% 宽度。

对于没有覆盖整个宽度的线条的页面，有没有办法让它们完全展开。我知道我的屏幕是 1920 像素宽，而且它们越来越宽。

我已经研究了好几天了，似乎总是在这个网站上结束。

我唯一能想到的就是在每个中心 48% div 中并排放置 16 - 100px 宽的间隔 gif。那是不对的。

有没有办法保持 div 的全宽？

整页样本。如果 2 个中心 div 中的 2 条实线中的任何一条被缩短，则左侧导航会进一步向左移动。 [http://www.trurons.com/travel/](http://www.trurons.com/travel/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T18:18:26.650

我查看了您链接的页面的来源，无法弄清楚您在说什么，我无法从您的问题中直观地掌握它。

如果其他发帖者的回答没有帮助，我建议您在此处查看此站点，以重新了解 HTML 元素如何相互交互。你可能已经知道了，但是复习可能会帮助你弄清楚为什么你的元素会根据周围和里面的东西收缩和扩展。

[http://www.barelyfitz.com/screencast/html-training/css/positioning/](http://www.barelyfitz.com/screencast/html-training/css/positioning/)

# android - 用于从浏览器下载和安装 apk 的 Html 页面

> ID：12097527
> 
> 赞同：3
> 
> 时间：2012-08-23T18:00:58.907
> 
> 标签：android, browser, android-intent, installation, apk

我有一个应用程序将由用户从公共网络服务器（Android 市场之外）安装。

因此，我将 apk 托管在网络服务器中，并指示用户输入 url 以下载文件，然后“打开”下载的文件进行安装。

但是，几乎 100% 的用户在完成这些简单的任务时遇到了困难（他们不熟悉技术……）。

所以，我决定制作一个可以简化任务的网页。该页面包含一个大按钮，它将：

*   下载apk；
*   下载完成后，启动“Android的安装对话框”安装下载的apk；

下载文件很容易，但现在我的问题是从浏览器打开“安装对话框”！

我完全是关于 html/javascript 的新手，我不知道该怎么做（或者即使这是可能的）。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-23T18:33:27.080

通常，您只需链接到该`.apk`文件。当用户点击这样的链接时，`.apk`文件被下载并自动开始安装（有一个对话框，如“你想安装这个应用程序吗”）。

所以，只是`<a href="yourdomain.com/yourapp.apk">Download and install...</a>`。

重要的！这仅在您的用户允许从设置/安全中的“未知来源”安装时才有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T18:12:54.170

如果浏览器不是您编写的，那么它不知道如何处理下载的 apk 文件。要求用户下载 EasyInstall 之类的东西来安装侧面加载的 apk 或将您的 apk 放在 Google Play 上。设备上的 Google Play 应用知道如何安装 apk。

-- 在撰写本文时为真：2012 年 8 月

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-08-24T19:52:13.343

您需要确保要传送 APK 的网络服务器正确设置 MIME 类型。它应该`application/vnd.android.package-archive`用于 .apk 文件。

# html - CSS3 文本渐变不起作用？

> ID：12097529
> 
> 赞同：0
> 
> 时间：2012-08-23T18:01:07.063
> 
> 标签：html, css, text, gradient

我正在尝试在某些文本上应用纯 CSS3 渐变（无图像等），但文本保持不变。

我目前的代码是：

```
<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Text Gradients</title>
    <style>
    /* The gradient class */
    .gradient {
        -webkit-mask-image: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(252,255,244,1)), color-stop(100%,rgba(233,233,206,1)));
    }
    </style>
</head>
<body>
     <!--The text with the gradient-->
     <h1 class="gradient"> Hello World </h1>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T18:05:20.267

我会推荐这个[网站](http://gradients.glrzad.com/)，它适用于所有现代浏览器

```
background-image: linear-gradient(bottom, rgb(93,245,172) 22%, rgb(121,255,207) 61%, rgb(158,255,249) 81%);
background-image: -o-linear-gradient(bottom, rgb(93,245,172) 22%, rgb(121,255,207) 61%, rgb(158,255,249) 81%);
background-image: -moz-linear-gradient(bottom, rgb(93,245,172) 22%, rgb(121,255,207) 61%, rgb(158,255,249) 81%);
background-image: -webkit-linear-gradient(bottom, rgb(93,245,172) 22%, rgb(121,255,207) 61%, rgb(158,255,249) 81%);
background-image: -ms-linear-gradient(bottom, rgb(93,245,172) 22%, rgb(121,255,207) 61%, rgb(158,255,249) 81%);

background-image: -webkit-gradient(
    linear,
    left bottom,
    left top,
    color-stop(0.22, rgb(93,245,172)),
    color-stop(0.61, rgb(121,255,207)),
    color-stop(0.81, rgb(158,255,249))
); 
```

还可以尝试使用[css3pie](http://css3pie.com/)，它允许您添加一些代码，使其在 IE 浏览器中工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T18:09:15.430

我能够使用以下方法在 Chrome 中生成渐变文本：

```
h1 {
  font-size: 72px;
  background: -webkit-gradient(linear, left top, left bottom, from(#eee), to(#333));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T18:08:48.647

如果您使用大量 CSS3，我建议您使用[-prefix-free 。](http://leaverou.github.com/prefixfree/)这允许您跳过所有浏览器前缀，并且该库将在运行时添加所有必要的前缀。

如果您使用它，您的样式将如下所示：

```
.gradient {
        mask-image: gradient(linear, left top, left bottom, color-stop(0%,rgba(252,255,244,1)), color-stop(100%,rgba(233,233,206,1)));
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T18:03:45.843

这仅适用于 webkit 用户。要支持所有浏览器，您至少需要：

```
filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#cccccc', endColorstr='#000000'); /* for IE */
background: -webkit-gradient(linear, left top, left bottom, from(#ccc), to(#000)); /* for webkit browsers */
background: -moz-linear-gradient(top,  #ccc,  #000); /* for firefox 3.6+ */ 
```

将颜色值更改为您需要的值。

编辑：正如@Lokase 所说：您还可以使用他在他/她的评论中链接的生成器。

# c# - 如何插入包含单引号或双引号的字符串

> ID：12097532
> 
> 赞同：0
> 
> 时间：2012-08-23T18:01:08.783
> 
> 标签：c#, sql, sql-server-2008

如果我想插入一个包含引号的语句，怎么可能？

例如，我有一个文本框，然后输入：

```
Future Swami Vivekananda’s grand father's name was "____" . 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T18:03:12.327

如果您[使用正确的参数化语句](https://stackoverflow.com/questions/5468425/how-do-parameterized-queries-help-against-sql-injection)，则无需担心。像这样的东西（尽管请不要向我学习 C# 技术）：

```
string sql = @"UPDATE dbo.table SET col = @p1 WHERE ...;";
string myString = @"hello'foo""bar";

SqlCommand cmd = new SqlCommand(sql, conn);
cmd.CommandType = CommandType.Text;
SqlParameter p1 = cmd.Parameters.AddWithValue("@p1", myString);
cmd.ExecuteNonQuery(); 
```

（虽然你真的应该使用存储过程。）

如果您正在手动构建字符串（您真的，真的，真的不应该这样做），您需要通过将字符串分隔符加倍来转义它们：

```
INSERT dbo.tbl(col) VALUES('hello''foo"bar'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-23T18:04:18.450

***使用参数化查询 - 然后引号根本***不重要。此外 - 您的数据库不会被 SQL 注入接管 - 所以真的是双赢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T18:04:59.360

你可以加倍报价：

```
INSERT INTO table
VALUES ('Future Swami Vivekananda''s grand father''s name was "____"') 
```

# php - 如何在php和ajax中获取上传的图片路径？

> ID：12097538
> 
> 赞同：0
> 
> 时间：2012-08-23T18:01:27.710
> 
> 标签：php, jquery, ajax, zend-framework, file-upload

我有一个简单的表格：

```
<input type="hidden" name="MAX_FILE_SIZE" value="2097152" id="MAX_FILE_SIZE">
<input type="file" name="file_upload" id="file_upload" class="picture_main">
<input type="submit" name="upload_picture" id="upload_picture" value="Submit"> 
```

我正在尝试 ajax 上传：

```
submit.on("click", function(){
        var file = $('#file_upload').val();
        uploadImageAjax(file);
        return false;
});

var uploadmageAjax = function(file)
{
    $.ajax({
        type: "POST",
        url: "/test/index/imageupload",
        data: {
            'file': file
        },
        dataType: "json",
        success: function (data) {
            console.log(data);
        }
    });
} 
```

我得到的是，例如， `file: "C:\fakepath\weirdan003-10.jpeg"`

但我不确定那`fakepath`是什么！？

如果我只在 php 中这样做，我会得到这样的图像：

```
if (isset($_POST['upload_picture']) ) {
            $data = $formImageUpload->getValues();
            $pictureName = $data['picture'];
.... 
```

然后上传。

所以我想弄清楚的是，如果 ajax 调用 POST 到该操作的正确文件，那么我可以将它上传到磁盘。

将`$('#file_upload').val();`持有 $_FILE??

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T18:30:34.553

```
var file = $('#file_upload').val(); 
```

这将仅返回客户端计算机上文件的路径。出于安全原因，它像 c:\fakepath\file_name.ext 一样返回。如果我没记错的话，在一些较旧的浏览器中可以获得真实路径。但是，它仍然不能帮助您在服务器上获取文件。

对于 ajax 样式上传，您可以使用一些推荐的插件。或者只是使用[jQuery Forms](http://jquery.malsup.com/form/)插件。它的工作方式与`$.ajax`.

现在，当文件正确上传后，您将在`$_FILES`

在您的情况下，它将类似于`$_FILES['file_upload']`“file_upload”是您的文件输入的名称。

[现在您可以使用move_uploaded_file](http://www.php.net/manual/en/function.move-uploaded-file.php)将其从临时存储中移动。对那个文件做任何你想做的事

**编辑：** 我看到你正在使用 Zend。看[一下](http://ahsangill.wordpress.com/2009/02/17/zend-framework-file-upload-using-zend_form_element_file/)如何在服务器端使用 FileUpload 元素。使用 Zend，您可以使用 FileUpload 方法而不是 move_uploaded_file

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T18:09:36.930

jQuery ajax 不支持异步文件上传。请参阅[使用 jQuery 的 ajax 方法（无插件）的 jQuery 上传文件](https://stackoverflow.com/questions/2591291/jquery-upload-file-using-jquerys-ajax-method-without-plugins)。

如果要使用ajax文件上传，建议实现插件：

*   [http://valums.com/ajax-upload/](http://valums.com/ajax-upload/)（是我最喜欢的）
*   [http://www.webdeveloperjuice.com/2010/02/13/7-trusted-ajax-file-upload-plugins-using-jquery/](http://www.webdeveloperjuice.com/2010/02/13/7-trusted-ajax-file-upload-plugins-using-jquery/)列出了更多

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T18:18:50.240

对于客户端，我建议您使用插件。

*   [http://blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/)
*   [http://valums.com/ajax-upload/](http://valums.com/ajax-upload/)

对于服务器端，您需要处理它以从流中读取。[我认为valuems git](https://github.com/valums/file-uploader)上有一个完整的示例（客户端和服务器端）。

# combobox - Wijdropdown 隐藏后无法正常工作

> ID：12097542
> 
> 赞同：1
> 
> 时间：2012-08-23T18:01:44.433
> 
> 标签：combobox, modal-dialog, hidden, wijmo

使用 Wijmo Open ComponentOne 的下拉菜单，我尝试将其放置在单击按钮时显示的注册表单中。此表单位于 jquery 模式窗口内。

问题是它不像表单内的 wijdropdown 那样显示。

我想既然 is 被隐藏了，那么它就不是 DOM 的一部分，所以我在显示模式窗口的函数的回调中添加了一个方法；当模态窗口完成显示时，在元素上调用 .wijdropdown() 。但是，它没有用。

总之：选择标签没有被 wijdropdowned...

¿ 有什么建议吗？

脚本

```
$(function() {
        // show overlay
        $('#product-slideshow-overlay-trigger').live('click', function() {
          var $registerOverlay = $('#product-slideshow-overlay');
          //left position
          var positionLeft = ($(window).width() - $registerOverlay.width())/2;
          $registerOverlay.css({'left':positionLeft});
          //show mask
          $('#mask').fadeIn();
          $registerOverlay.slideDown(function()
          {
                console.log("Started");
                /**Add WijmoDropdown***/
                $('#estado').wijdropdown(function()
                {
                    console.log("Did the wijdropdown");
                });         
                console.log("Ended");
          });
          return false

        });

    }); // end document ready function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T15:53:54.327

当下拉列表未隐藏时刷新 wijdropdown：

```
$('.wijmo_drp').wijdropdown("refresh"); 
```

或者

找到 wijmo 组件并检查它是否可见（样式化与否）。并在显示模态窗口时触发可见性更改事件。

```
if($('.wijmo-wijobserver-visibility').is(':visible'))
{
$('.wijmo-wijobserver-visibility').trigger("wijmovisibilitychanged");
} 
```

# variables - 如何在 wxpython 中根据变量重建面板？

> ID：12097543
> 
> 赞同：1
> 
> 时间：2012-08-23T18:01:52.263
> 
> 标签：variables, wxpython, rewrite, panels, rebuild

我搜索了很多来做到这一点，但我尝试过的却一无所获。现在，作为最后一次尝试，我正在尝试使用 pubsub，但我一无所获，这就是我现在寻求帮助的原因:)。这是我想要的一个最小的例子（尽我所能:)）。PanelB gets information in a list (box), and when someone of the items is selected, PanelA should change according to him. 先感谢您。

```
from wx.lib.pubsub import Publisher
import wx

global name
name  = 'none, please select an item'

class PanelA(wx.Panel):
   def __init__(self, parent, name):
       wx.Panel.__init__(self, parent)
       self.hbox = wx.BoxSizer(wx.HORIZONTAL)
       self.vbox = wx.BoxSizer(wx.VERTICAL)
       str = name
       txt = wx.StaticText(self, -1, "You have selected " + str, (20, 100))
       self.hbox.Add(txt, 1, wx.EXPAND | wx.ALL, 20)

class PanelB(wx.Panel):
   def __init__(self, parent):
       wx.Panel.__init__(self, parent)

       self.hbox = wx.BoxSizer(wx.HORIZONTAL)
       self.vbox = wx.BoxSizer(wx.VERTICAL)

       self.listbox = wx.ListBox(self, -1)
       self.hbox.Add(self.listbox, 1, wx.EXPAND | wx.ALL, 20)

       self.btnPanel = wx.Panel(self, -1)      
       self.new = wx.Button(self.btnPanel,label='Add', size=(90, 30))
       self.new.Bind(wx.EVT_BUTTON, self.NewItem)

       self.vbox.Add((-1, 20))
       self.vbox.Add(self.new)

       self.btnPanel.SetSizer(self.vbox)
       self.hbox.Add(self.btnPanel, 0.6, wx.EXPAND | wx.RIGHT, 20)
       self.SetSizer(self.hbox)

       self.Bind(wx.EVT_LISTBOX, self.onSelect)

    def onSelect(self, event):
       name_selected = self.listbox.GetStringSelection()
       Publisher().sendMessage(("ListBox"), name_selected)

def NewItem(self, event):
       text = wx.GetTextFromUser('Nombre', 'Programa a salvar')
       if text != '':
           self.listbox.Append(text)

class MainFrame(wx.Frame):
   def __init__(self, parent, id, title, *args, **kw):

       wx.Frame.__init__(self, parent, id, title, size = (800,300))

       self.splitter = wx.SplitterWindow(self, -1, style=wx.SP_3D)

       self.lc1 = PanelB(self.splitter)
       Publisher().subscribe(self.OnSelect, ("ListBox"))
       self.lc2 = PanelA(self.splitter, name)
       self.splitter.SplitVertically(self.lc1, self.lc2)

       sizer = wx.BoxSizer(wx.HORIZONTAL)
       sizer.Add(self.splitter, 1, wx.EXPAND)
       self.SetSizer(sizer)

       self.Centre()
       self.Show(True)

   def OnSelect(self, name_selected):
       name = name_selected
       #I stucked here

if __name__ == "__main__":
   app = wx.App()
   frame = MainFrame(None,-1,'Mi aplicacion')
   app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T01:17:48.843

~~这不是很好的解决方案，基本上你可以破坏**PanelA**然后再次调用该面板，可能是这样的：~~

 ~~```
def OnSelect(self, name_selected):
    self.lc2.Destroy()
    self.lc2 = PanelA(self.splitter, name_selected.data) 
```~~ 

~~希望这能有所帮助。~~

**更新（08/24/2012）**：添加了一些代码

好吧，我们不应该破坏面板。我正在使用您的代码并对其进行了一些修改。我删除了全局变量并向**PanelA**`name`添加了`changeName(name)`函数，以便在调用时它会调用. 它并不漂亮，但希望这能有所帮助。**`MainFrame.onSelect()``changeName()`**

 **```
import wx
from wx.lib.pubsub import Publisher

class PanelA(wx.Panel):

    def __init__(self, parent):
        wx.Panel.__init__(self, parent)
        self.hbox = wx.BoxSizer(wx.HORIZONTAL)
        self.vbox = wx.BoxSizer(wx.VERTICAL)
        name = "none, please select an item"
        self.txt = wx.StaticText(self, -1, "You have selected " + name,
                                 (50, 100))
        self.hbox.Add(self.txt, 1, wx.EXPAND|wx.ALL, 30)

    def changeName(self, name):
        self.hbox.Hide(self.txt)
        self.hbox.Remove(self.txt)
        self.txt = wx.StaticText(self, -1, "You have selected " + name, (50, 100))
        self.hbox.Add(self.txt, 1, wx.EXPAND|wx.ALL, 30)

class PanelB(wx.Panel):

    def __init__(self, parent):
        wx.Panel.__init__(self, parent)

        self.hbox = wx.BoxSizer(wx.HORIZONTAL)
        self.vbox = wx.BoxSizer(wx.VERTICAL)

        self.listbox = wx.ListBox(self, -1)
        self.hbox.Add(self.listbox, 1, wx.EXPAND|wx.ALL, 20)

        self.btnPanel = wx.Panel(self, -1)      
        self.new = wx.Button(self.btnPanel,label='Add', size=(90, 30))
        self.new.Bind(wx.EVT_BUTTON, self.NewItem)

        self.vbox.Add((-1, 20))
        self.vbox.Add(self.new)

        self.btnPanel.SetSizer(self.vbox)
        self.hbox.Add(self.btnPanel, 0.6, wx.EXPAND|wx.RIGHT, 20)
        self.SetSizer(self.hbox)

        self.Bind(wx.EVT_LISTBOX, self.onSelect)

    def onSelect(self, event):
        name_selected = self.listbox.GetStringSelection()
        Publisher().sendMessage("ListBox", name_selected)

    def NewItem(self, event):
        text = wx.GetTextFromUser('Nombre', 'Programa a salvar')
        if text != '':
            self.listbox.Append(text)

class MainFrame(wx.Frame):

   def __init__(self, parent, id, title, *args, **kw):

       wx.Frame.__init__(self, parent, id, title, size = (800,300))
       self.splitter = wx.SplitterWindow(self, -1, style=wx.SP_3D)
       Publisher().subscribe(self.OnSelect, "ListBox")

       self.lc1 = PanelB(self.splitter)
       self.lc2 = PanelA(self.splitter)
       self.splitter.SplitVertically(self.lc1, self.lc2)

       self.sizer = wx.BoxSizer(wx.HORIZONTAL)
       self.sizer.Add(self.splitter, 1, wx.EXPAND)
       self.SetSizer(self.sizer)
       self.Layout()

       self.Centre()

   def OnSelect(self, name_selected):
       name = name_selected
       self.lc2.changeName(name.data)

if __name__ == "__main__":
    app = wx.PySimpleApp()
    frame = MainFrame(None,-1,'Mi aplicacion')
    frame.Show()
    app.MainLoop() 
```**

# sql - 在多个字段中返回具有不同或唯一数据的记录

> ID：12097545
> 
> 赞同：0
> 
> 时间：2012-08-23T18:01:57.350
> 
> 标签：sql, advantage-database-server

我想要完成的事情

从表访问中选择最多两条记录，这些记录在过去 2 年内包含字段 Test1-Test8 中的多个代码之一。

但是这两条记录不能有任何重复的代码。

即假设 Record1 在 Test4 中包含“85.43”，Record2 在 Test2 中包含“85.43”

我不希望它返回 Record2，因为“85.43”的记录已经存在。

有谁知道我怎么能做到这一点？

这是我的初始查询，其中没有内置重复的逻辑。

```
select TOP 2 * from Visit where customer = CustomerCode AND
(Test1 IN ('85.41', '85.43', '85.45', '85.47')
or Test2 IN ('85.41', '85.43', '85.45', '105.47')
or Test3 IN ('85.41', '85.43', '85.45', '105.47')
or Test4 IN ('85.41', '85.43', '85.45', '105.47')
or Test5 IN ('85.41', '85.43', '85.45', '105.47')
or Test6 IN ('85.41', '85.43', '85.45', '105.47')
or Test7 IN ('85.41', '85.43', '85.45', '105.47')
or Test8 IN ('85.41', '85.43', '85.45', '105.47'))
AND TIMESTAMPDIFF(SQL_TSI_MONTH, DATE_IN, CurrentDate) <= 24; 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T18:47:03.203

这是我能想到的最简洁的方法，无需使用直接使用该表所需的所有 64 次比较：

```
CREATE TABLE #t (ID int, TestField varchar(255))

INSERT INTO #t SELECT Id, Test1 FROM Visit WHERE customer = CustomerCode AND TIMESTAMPDIFF(SQL_TSI_MONTH, DATE_IN, CurrentDate) <= 24
INSERT INTO #t SELECT Id, Test2 FROM Visit WHERE customer = CustomerCode AND TIMESTAMPDIFF(SQL_TSI_MONTH, DATE_IN, CurrentDate) <= 24
INSERT INTO #t SELECT Id, Test3 FROM Visit WHERE customer = CustomerCode AND TIMESTAMPDIFF(SQL_TSI_MONTH, DATE_IN, CurrentDate) <= 24
... -- repeat for each Test field

SELECT TOP 2 * FROM Visit WHERE Id IN (
  SELECT a.Id FROM #t a
  LEFT JOIN #t b
    ON a.Id > b.Id
    AND a.TestField = b.TestField
  GROUP BY a.Id
  HAVING count(b.TestField) = 0
)
ORDER BY Id

DROP TABLE #t 
```

根据表的大小，您可能需要向临时表添加索引，否则速度会慢得难以忍受：

```
CREATE INDEX some_unique_name_index ON #t (ID, TestField) 
```

加快此速度的另一种替代方法是使用 T-SQL 循环一次查找与条件匹配的一行并将它们添加到结果表中。一旦你有足够的结果（在本例中为 2 个），你就可以退出循环。对于非常大的表，这可能是推荐的方法。

# c# - 简单的代理 asp.net 错误

> ID：12097550
> 
> 赞同：0
> 
> 时间：2012-08-23T18:02:19.017
> 
> 标签：c#, asp.net, error-handling, compiler-errors, runtime-error

我不知道为什么这个 .aspx 给了我：...

一个下载提示，一个烦人的下载。

我不知道出了什么问题。

我的代码：

```
 <%@ Page Language="C#" %>

<script runat="server">
        protected void Page_Load(object sender, EventArgs e)
      {
        var strURL = "http://www.google.com";

        System.Net.WebResponse objResponse = default(System.Net.WebResponse);
        System.Net.WebRequest objRequest = default(System.Net.WebRequest);
        string result = null;
        objRequest = System.Net.HttpWebRequest.Create(strURL);
        objResponse = objRequest.GetResponse();
        System.IO.StreamReader sr = new System.IO.StreamReader(objResponse.GetResponseStream());
        result = sr.ReadToEnd();
        //clean up StreamReader 
        sr.Close();

        //WRITE OUTPUT
        Response.ContentType = "application/html";
        Response.Write(result);//""
        Response.Flush();//""

    }
</script> 
```

我还是不知道怎么回事！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T18:05:52.437

你不能有“全局”代码，你必须将它封装在一个方法中。

就像是：

```
<%@ Page Language="C#" %>

<script runat="server">
    protected void Page_Load( object sender, EventArgs e )
    {
        // Your code...
    }
</script> 
```

这会在页面加载期间执行您的代码。

*（我没有检查你的代码是否有意义。这个谷歌的东西对我来说有点奇怪......）*

**更新：**

您还必须[导入](http://msdn.microsoft.com/en-us/library/eb44kack%28v=VS.80%29.aspx)所需的命名空间，例如[`WebResponse`](http://msdn.microsoft.com/en-us/library/system.net.webresponse.aspx)：

```
<%@ Page Language="C#" %>
<%@ Import namespace="System.Net" %>

<script runat="server">
    protected void Page_Load( object sender, EventArgs e )
    {
        // Your code...
    }
</script> 
```

对您使用的所有命名空间重复此`<%@ Import...%>`指令。或者使用类的完整限定名，包括命名空间，例如`System.Net.WebResponse`.

**第二次更新：**

好的，这只是删除（其中一个？）逻辑错误的疯狂猜测：

代替：

```
var strURL = context.Server.UrlDecode(context.Request["http://www.google.com"]); 
```

写：

```
var strURL = "http://www.google.com"; 
```

并查看它是否效果更好（根据您使用[此答案](https://stackoverflow.com/a/1415317/107625)的评论）。

**第三次（最终？）更新：**

如果这也无济于事，请尝试在 Visual Studio (Express) 中调试它并设置断点、单步调试代码、检查变量等。[这里是调试的简短介绍](http://www.dotnetperls.com/debugging)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T19:13:28.307

使用单文件页面模型有两个问题阻止您的代码工作。page_load 方法签名错误，上下文已经存在，没有传入。将代码更新为：

```
<script runat="server">
    protected void Page_Load(object sender, EventArgs e)
  {
        var strURL = "http://www.google.com";

        System.Net.WebResponse objResponse = default(System.Net.WebResponse);
        System.Net.WebRequest objRequest = default(System.Net.WebRequest);
        string result = null;
        objRequest = System.Net.HttpWebRequest.Create(strURL);
        objResponse = objRequest.GetResponse();
        System.IO.StreamReader sr = new System.IO.StreamReader(objResponse.GetResponseStream());
        result = sr.ReadToEnd();
        //clean up StreamReader 
        sr.Close();

        //WRITE OUTPUT
        Response.ContentType = "text/html";//remove context
        Response.Write(result);//""

    }
</script> 
```

# c# - 客户端数据加密/SQL Server Express LocalDB

> ID：12097557
> 
> 赞同：1
> 
> 时间：2012-08-23T18:02:52.973
> 
> 标签：c#, sql-server, security, encryption, localdb

.NET 中保护半敏感客户端数据的策略是什么（以便只有应用程序本身可以使用/查看它）？

信息是否可以包含在随附的 mdf 文件中（由 SQL LocalDB 使用）并且仍然保持相同级别的安全性？如果是这样，怎么做？

我知道，由于我们谈论的是客户端应用程序，因此没有绝对的方法来保护数据。我主要是在寻找方法，使其难以阻止人们尝试它。理想情况下，该解决方案（大部分）对应用程序开发人员是透明的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T20:48:41.713

并不真地。您最好的办法是将您的代码放入加密的存储过程中，但是一旦您将 MDF 文件交给某人，他们就可以将其附加到他们拥有全部管理员权限的 SQL Server（如他们的 LocalDB 实例）并轻松[解密它们](https://serverfault.com/questions/94277/how-safe-is-sql-servers-encryption-of-stored-procedures)。

# sql - 查找一组中是否至少有一个共同属性

> ID：12097559
> 
> 赞同：0
> 
> 时间：2012-08-23T18:02:57.360
> 
> 标签：sql, oracle

我正在尝试使用 Oracle SQL 查询进行验证，其想法是：

有项目，每个项目可能有多个供应商。

我有一组物品（在购物袋中），想验证它们之间是否至少有一个共同的供应商。这意味着袋子中的**所有物品****至少共享一个**供应商。

简而言之，这些表是：

带有 bag_id 和 item 列的 BAG 表。
带有项目和供应商列的供应表。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T18:06:30.413

这应该为您提供与多个项目匹配的供应商列表，最常见的供应商位于顶部

```
SELECT SUPPLY.supplier, COUNT(SUPPLY.item) item_count
FROM BAG
JOIN SUPPLY
  ON BAG.item = SUPPLY.item
GROUP BY SUPPLY.supplier
HAVING COUNT(SUPPLY.item) > 1
WHERE BAG.bag_id = ? --substitute bag_id
ORDER BY COUNT(SUPPLY.item) DESC 
```

如果您需要查找与包中所有商品匹配的供应商，请使用以下查询：

```
SELECT SUPPLY.supplier
FROM BAG
JOIN (SELECT bag_id, COUNT(*) as item_count FROM BAG GROUP BY bag_id WHERE bag_id = ?) bag_count
  ON BAG.id = bag_count.bag_id
JOIN SUPPLY
  ON BAG.item = SUPPLY.item
GROUP BY SUPPLY.supplier
HAVING COUNT(SUPPLY.item) = bag_count.item_count
WHERE BAG.bag_id = ? 
```

您可以检查列表是否为空，以确定是否不存在通用供应商，方法是用`EXISTS`语句包装它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T18:16:12.047

```
select case when exists
                       (
                        select 1
                        from bag b
                             inner join item i on i.id = b.item_id
                             inner join supplier s on s.id = i.supplier_id
                                                   and s.is_main = 'Y'
                       )
             then 'Y'
             else 'N'   
       end contains_main_supplier                   
from dual 
```

# xml - 带有前向声明的 C++ CLI XML 文档 获取对未知符号警告的引用

> ID：12097560
> 
> 赞同：4
> 
> 时间：2012-08-23T18:02:57.710
> 
> 标签：xml, documentation, c++-cli, forward-declaration

我一直在尝试为 C++ CLI、Visual Studio 2010 生成 XML 文档，但我根本无法获得前向参考。我制作了一个测试程序来尝试让它工作。

我得到（奇怪的 2 个）：警告 1 警告 C4638：XML 文档注释应用于“a.DoB(b)”：引用未知符号“b::DoA()”。ah 12 1 CPPCLIGMSECExamples

b to a one，适用于包含。我怎样才能以某种方式完成这项工作。

这是我的示例代码（cpp 只是这些的空实现，这些是 .h 文件）：啊：

```
#pragma once

ref class b;

public ref class a
{
public:
a(void);

b^ bimpl;

/// <seealso cref="b::DoA()" />
void DoB(b^ bb);
}; 
```

:

```
#pragma once
#include "a.h"

public ref class b
{
public:
b(void);

a^ aimpl;

/// <seealso cref="a::DoB()" />
void DoA(a^ aa);
}; 
```

# magento - Magento 发票 - 开始新页面

> ID：12097561
> 
> 赞同：1
> 
> 时间：2012-08-23T18:03:03.600
> 
> 标签：magento

我正在 Magento 中编辑发票，想知道如何开始一个新页面，即。以便我可以开始向第 2 页添加内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T19:01:08.157

```
$pdf = new Zend_Pdf();

//use this line each time you want to create new page
$page = $pdf->newPage(Zend_Pdf_Page::SIZE_A4); 

$pdf->pages[] = $page; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T18:16:11.277

您可以使用`Mage_Sales_Model_Order_Pdf_Invoice::newPage()`将页面添加到发票 PDF。

# parsing - Go 中的上下文无关语法 (CFG) 解析器

> ID：12097565
> 
> 赞同：8
> 
> 时间：2012-08-23T18:03:11.720
> 
> 标签：parsing, nlp, go

我正在寻找一个提供 CFG 解析的 Go 库（最好不是乔姆斯基范式）。有没有人听说过什么，或者我应该写吗？:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T19:47:58.940

你知道[goyacc](http://golang.org/cmd/yacc/)吗？虽然它不是一个库，而是一个代码生成器。无论如何，它支持 CFG，它是 IMO 处理此类任务的一种非常标准的方式。（？）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T09:56:24.957

我无法专门针对 CFG 为您提供帮助，但[Go Dashboard](http://godashboard.appspot.com/)是一个很好的 Go 库中央列表。

查看解析器，有两个乍一看很有帮助：

*   [go-parse](https://github.com/vito/go-parse)，以 Haskell 的 Parsec 为模型，以及
*   [用于解析](https://github.com/badgerodon/peg)表达式语法。

# python - 使用 Python 避免循环更新 MySQL 表中数据的最有效方法是什么？

> ID：12097568
> 
> 赞同：0
> 
> 时间：2012-08-23T18:03:20.453
> 
> 标签：python, mysql, dictionary

格式化数据的最佳方法是什么？

这是背景：

我正在使用[nameparser](http://code.google.com/p/python-nameparser/)以尽可能好的方式解析名称。我构建了一个调用名称解析器的包装器，然后将解析后的名称存储在数据库（MySQL）中。

在这种情况下，最有效的方法是什么？以下是我的方法。

1.  第一步：调用nameparser（提供tablename、id、name、first、middle、last、suffix）。
2.  第 2 步：将解析（返回）的名称存储在内存中这种形式的字典中（我正在解析相对较小的名称集 - 例如 20,000 个名称）。`{id:{'first':'John', 'middle':'V', 'last':'Doe', 'suffix':''}`
3.  第 3 步：用一个查询将字典存储在 MySQL 表中？（不确定是否可以使用步骤 2 中描述的数据结构。

这是我的代码：

```
#!/usr/bin/python
# -*- coding: utf-8 -*-

from nameparser import HumanName

import time

cursor = db.cursor()

def name(table, id, name, first, middle, last, suffix):

    cursor.execute('SELECT `' + id + '`,`' + name + '` FROM `' + table
                   + '` WHERE `' + name + '` IS NOT NULL AND ' + id
                   + ' IS NOT NULL')

    numrows = int(cursor.rowcount)
    namelist = []
    namelist = cursor.fetchall()

    for record in namelist:
        parsed = HumanName(record[1])
        parsed.capitalize()
        mydict[int(record[0])] = {
            'first': str(parsed.first),
            'middle': str(parsed.middle),
            'last': str(parsed.last),
            'suffix': str(parsed.suffix),
            }   

mydict = {}

starttime = time.time()

split = name('NamesToParse','id','name','first','middle','last','suffix')
print mydict
print time.time() - starttime 
```

请建议将数据存储在 MySQL 表中的最佳方式。这是我到目前为止所拥有的，我仍然需要遍历每条记录。我想知道是否有一种方法可以`update`使用现有表，而不必先创建一个临时表，然后一次性更新原始表？希望我说得通。

```
for id, val in mydict.items():

    sorted_keys = sorted(map(str, val.keys()))
    sorted_vals = map(encoding, [val[mydict] for mydict in sorted_keys])  # sorted by keys
    formatted = ', '.join(["'%s'"] * len(sorted_vals))
    db.execute("""insert into NamesToParseOut(%s) values (%s)""" % (', '.join(sorted_keys), formatted), sorted_vals) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T18:45:40.090

看起来我将采用元组列表方法并首先插入临时表，然后用原始表更新它们。节省的时间是惊人的。我觉得字典对于这项任务来说太过分了。

```
mylistoftuples.append((int(record[0]), str(parsed.first),str(parsed.middle),str(parsed.last),str(parsed.suffix)))

cursor.executemany("""insert into NamesToParseOut(id, first, middle, last, suffix) values (%s, %s, %s, %s, %s)""", mylistoftuples) 
```

# sql-server-2008 - SQL Server Express 2008 通过 url 配置远程访问

> ID：12097570
> 
> 赞同：1
> 
> 时间：2012-08-23T18:03:27.520
> 
> 标签：sql-server-2008, sql-server-express, remote-access

我已经在我的服务器上安装了 SQL Server 2008 Express Edition。我将我的应用程序托管在同一台服务器上。

我可以使用 ip xx.xxx.xxx.xx 用户名和密码远程访问我的服务器

我可以在我的服务器上运行 SSMS 并连接到数据库

*   服务器：（本地）\SQLExpress
*   身份验证：SQLServer
*   用户：用户名
*   密码：密码

我希望能够远程访问这个 SQL Server 实例，我所做的是：

*   启用 SQL 浏览器
*   启用 TCP/IP
*   从 SQLservr.exe 启用入站防火墙
*   为端口 1433 启用防火墙

从我的本地电脑 SSMS，当我尝试连接到：

*   服务器：xx.xxx.xxx.xx\SQLExpress
*   身份验证：SQL Server
*   用户名：用户
*   密码：pwd

我收到网络错误，检查服务器名称是否正确。

1.  谁能告诉我如何解决这个问题？
2.  另外我想用**sql.mydomain.com**访问我的服务器，而不是 IP 或机器名。我怎样才能完成这项工作？

### 更新：

完成上述所有操作后，我错过了重新启动**SQL Server 服务** 现在我可以使用这个 url xx.xxx.xxx.xx\SQLExpress 远程访问我的 SQL Server

如何创建像 **sql.mydomain.com**这样的别名 ，我应该在哪里做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T19:33:21.400

得到这个工作。

1.  在域控制点 www.mydomain.com 上记录到 ip xx.xxx.xxx.xx。
2.  在我的服务器上安装带有默认实例的 SQL Server (MSSQLServer)
3.  在客户端协议上启用 TCP/IP
4.  添加端口 1433 传入防火墙
5.  为 SQLservr.exe 添加入站防火墙

就是这样现在我可以使用 mydomain.com、用户名和密码远程连接到我的 sql 服务器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T08:10:45.377

请在“SQL Server 配置管理器”中检查 TCP/IP 协议是否已启用。 ![网络协议](../Images/0a958b875ab654a11d3f3c8b91737a86.png)

# wordpress - 如何在 WordPress 中使用插件制作自定义主题？

> ID：12097571
> 
> 赞同：1
> 
> 时间：2012-08-23T18:03:27.263
> 
> 标签：wordpress, wordpress-theming

我在 WordPress 中创建了自己的主题。在那个主题中，我使用了其他插件（jQuery Photo 滑块）。现在我想将此主题用于不同的网站。我可以保存带有主题的插件吗？首先，这可能吗？

这是我在 WordPress 中的第一次尝试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T18:09:42.863

您不能随主题添加插件，但您可以随时随主题发送自述文件，告诉用户您希望他们使用哪些插件，或者您可以压缩位于插件文件夹中的插件并制作作为使用主题时应用的自定义额外选择。

# cakephp - CakePHP：AuthComponent 上的小写密码

> ID：12097576
> 
> 赞同：0
> 
> 时间：2012-08-23T18:03:54.727
> 
> 标签：cakephp

我必须导入一堆成员，并且必须先应用`strtolower()`他们的密码，然后才能在数据库中加密它们。现在，为了让会员能够登录，我需要`strtolower()`申请`$this->request->data['Member']['password']`. 我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T14:05:29.577

在您的登录方法中：

```
if (!empty($this->request->data) {

    $this->request->data['User']['password'] = strtolower($this->request->data['User']['password']);

    // procceed with login...

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T23:51:59.333

将降低功能放在模型的“beforeSave”功能中。

```
public function beforeSave(array $options = array()){
     //code for lowering here
} 
```

关于回调函数的文档在[这里](http://book.cakephp.org/2.0/en/models/callback-methods.html)。

编辑：

您可以在登录功能的控制器中执行此操作：

```
$this->request->data['User']['password'] = function_for_lowering($this->request->data['User']['password']); 
```

然后密码将是小写的，然后应该应用登录。

# algorithm - 线段数线上的相邻点列表？

> ID：12097578
> 
> 赞同：4
> 
> 时间：2012-08-23T18:04:04.010
> 
> 标签：algorithm

我有一个数字线，从 1 到 100。

在该数字线的范围内，我可以添加和删除许多线段。这些线段可以相互交叉和重叠。

对于给定的 x1 和 x2，我需要一种有效的算法来遍历所有相邻的点对（包括 x1 和 x2），以访问在相邻点之间运行的所有线段的列表。

![在此处输入图像描述](../Images/abbed4f821538429e5f2dce6db125ddd.png)

这个黑色数字线和彩色线段的​​结果将类似于：

```
[0-20] -> []
[20-30] -> [red]
[30-40] -> [red, green]
[40-50] -> [green]
[50-60] -> []
[60-80] -> [purple]
[80-100] -> [] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T18:19:58.727

您想使用[区间树](http://en.wikipedia.org/wiki/Interval_tree)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T21:31:55.943

创建边界记录列表，其中每个边界的形式为

```
bound.type = start,finish
bound.position = 0..n
bound.color = red,green,blue... 
```

并为每个线段添加两个这样的记录到列表中（每端 ine）。然后按位置对所有记录进行排序。现在，如果您按如下方式遍历列表：

```
colors=[]
write '[0'
for each bound in list
  write '-',bound.pos,'] -> [',colours,']'
  if bound.type = start then 
    add bound.color to colors
  else
    remove bound.type from colors
  write '[',bound.pos
write '-',n'] -> []' 
```

如果第一条线段从 0 开始或最后一条线段以 n 结束，您将不得不做一些整理。

# r - R中的配置文件置信区间：mle2

> ID：12097584
> 
> 赞同：7
> 
> 时间：2012-05-15T12:46:51.130
> 
> 标签：r, confidence-interval

我正在尝试使用`mle2`包中的命令`bbmle`。我正在查看`bbmle`Bolker 的“最大似然估计和包分析”的 p2。不知何故，我无法输入正确的起始值。这是可重现的代码：

```
l.lik.probit <-function(par, ivs, dv){
Y <- as.matrix(dv)
X <- as.matrix(ivs)
K <-ncol(X)
b <- as.matrix(par[1:K])
phi <- pnorm(X %*% b) 
sum(Y * log(phi) + (1 - Y) * log(1 - phi)) 
}

n=200

set.seed(1000)

x1 <- rnorm(n)
x2 <- rnorm(n)
x3 <- rnorm(n) 
x4 <- rnorm(n) 

latentz<- 1 + 2.0 * x1 + 3.0 * x2 + 5.0 * x3 + 8.0 * x4 + rnorm(n,0,5)

y <- latentz 
y[latentz < 1] <- 0 
y[latentz >=1] <- 1 
x <- cbind(1,x1,x2,x3,x4)
values.start <-c(1,1,1,1,1)   

foo2<-mle2(l.lik.probit, start=list(dv=0,ivs=values.start),method="BFGS",optimizer="optim", data=list(Y=y,X=x)) 
```

这是我得到的错误：

```
Error in mle2(l.lik.probit, start = list(Y = 0, X = values.start), method = "BFGS",  : 
  some named arguments in 'start' are not arguments to the specified log-likelihood function 
```

知道为什么吗？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T16:43:17.467

你错过了一些东西，但最重要的是默认情况下`mle2`采用参数*列表*；你可以让它取一个参数*向量*，但你必须更加努力。

我在一些地方稍微调整了代码。（我将对数似然函数更改为负对数似然函数，没有它，这将永远无法工作！）

```
l.lik.probit <-function(par, ivs, dv){
    K <- ncol(ivs)
    b <- as.matrix(par[1:K]) 
    phi <- pnorm(ivs %*% b)
    -sum(dv * log(phi) + (1 - dv) * log(1 - phi)) 
}

n <- 200

set.seed(1000)

dat <- data.frame(x1=rnorm(n),
                  x2=rnorm(n),
                  x3=rnorm(n),
                  x4=rnorm(n))

beta <- c(1,2,3,5,8)
mm <- model.matrix(~x1+x2+x3+x4,data=dat)
latentz<- rnorm(n,mean=mm%*%beta,sd=5)

y <- latentz 
y[latentz < 1] <- 0 
y[latentz >=1] <- 1
x <- mm
values.start <- rep(1,5) 
```

现在我们做合适的。主要是指定`vecpar=TRUE`和使用`parnames`来让`mle2`知道参数向量中元素的名称......

```
library("bbmle")
names(values.start) <- parnames(l.lik.probit) <- paste0("b",0:4)
m1 <- mle2(l.lik.probit, start=values.start,
           vecpar=TRUE,
           method="BFGS",optimizer="optim",
           data=list(dv=y,ivs=x)) 
```

正如上面针对这个特定示例所指出的，您刚刚重新实现了概率回归（尽管我知道您现在想要扩展它以允许以某种方式实现异方差......）

```
dat2 <- data.frame(dat,y)
m2 <- glm(y~x1+x2+x3+x4,family=binomial(link="probit"),
    data=dat2) 
```

最后一点，我想说您应该检查`parameters`参数，它允许您为任何一个参数和`formula`接口指定一个亚线性模型：

```
m3 <- mle2(y~dbinom(prob=pnorm(eta),size=1),
           parameters=list(eta~x1+x2+x3+x4),
           start=list(eta=0),
           data=dat2) 
```

`confint(foo2)`使用此设置，PS似乎可以正常工作（根据要求提供配置文件 CI）。

```
ae <- function(x,y) all.equal(unname(coef(x)),unname(coef(y)),tol=5e-5)
ae(m1,m2) && ae(m2,m3) 
```

# google-chrome - 一旦 iframe 在其中加载，修改 chrome 扩展中的弹出窗口

> ID：12097587
> 
> 赞同：2
> 
> 时间：2012-08-23T18:04:56.763
> 
> 标签：google-chrome, google-chrome-extension

我想修改chrome扩展的popup.html。我加载了一个 iFrame，其中包含一个外部 URL。加载 iFrame 后，我想修改 popup.html 中的 div 标签

**popup.html**

```
<head>
    <script type = "text/javascript" src = "popup.js"></script>
</head>

<body>
    <form name = "getPage" action = "http://website.com/" method = "post" target = "post_stuff">
        <input type = "hidden" name = "hdnrequesttype" value = "1" />
        <input type = "hidden" name = "txtmemberid" id = "txtmemberid" value = "11012333" />
        <input type = "hidden" name = "txtmemberpwd" id = "txtmemberpwd" value = "" />
        <input type = "hidden" name = "sites" value = "0" />
        <input type = "hidden" name = "firsttime" value = "Y" />
    </form>
    <iframe name = "post_stuff" height = "600" width = "600" onload = "frame_loaded()">
    </iframe>
    <div id = "putText">
    </div>
</body> 
```

**popup.js**

```
window.onload = function() {
    document.forms["getPage"].submit();
}

function frame_loaded() {
    document.getElementById("putText").innerHTML = "LOADED";
    console.log("LOADED");
} 
```

这没有用。我尝试使用内容脚本，但这也不起作用。我的内容脚本 modify.js 的内容：-

**修改.js**

```
document.getElementById("putText").innerHTML = "LOADED"; 
```

这是我清单的相关部分：-

```
"content_scripts" : [ {
                            "matches": ["<all_urls>"],
                            "js": ["modify.js"]
                       }
                    ] 
```

我希望有人可以帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T18:12:49.507

我猜你正在使用`manifest_version: 2`. 如果是这样，您将需要使用`addEventListener`而不是您的内联`onload`处理程序：

```
window.onload = function() {
    //attach a load listener to the iframe
    document.querySelector("iframe").addEventListener("load", frame_loaded);
    document.forms["getPage"].submit();
} 
```

# cassandra - 对 cassandra 的 Apache-thrift 调用在“键”中插入垃圾/空值

> ID：12097594
> 
> 赞同：0
> 
> 时间：2012-08-23T18:05:30.167
> 
> 标签：cassandra, thrift

> cassandra-thrift-1.1.2.jar

**问题代码：**

```
            ColumnOrSuperColumn cosc = null;
        org.apache.cassandra.thrift.Column c = new org.apache.cassandra.thrift.Column ();
        c.setName("full_name".getBytes("UTF-8"));
        c.setValue("测试名称".getBytes("UTF-8"));
        c.setTimestamp (System.currentTimeMillis());

        // 插入数据
// 长时间戳 = System.currentTimeMillis();

        尝试 {
            client.set_keyspace("CClient");

            bb=ByteBuffer.allocate (10);
            client.insert (bb.putInt(1),
                            新的 ColumnParent（“用户”），
                            C，
                            一致性级别.QUORUM);
            bb.putInt(2);
            cosc = client.get (bb, cp, ConsistencyLevel.QUORUM);
        }
        捕捉（TimedOutException 脚趾）{
            System.out.println(toe.getMessage());
        }
        捕捉（org.apache.cassandra.thrift.UnavailableException e）{
            // TODO 自动生成的 catch 块
            e.printStackTrace();
        }
        捕获（异常 e）{
            e.printStackTrace();
        }
        最后 {
            System.out.println(new String (cosc.getColumn().getName()) + "-" + new String (cosc.getColumn().getValue()));
        }

```

* * *

上面显示的代码在数据库中插入了一些垃圾或空值，我不明白为什么？

在 CLI 上查看它的外观：

```

行键：
=>（列=全名，值=测试名称，时间戳=1345743985973）

```

非常感谢您对此的任何帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T19:53:21.397

您正在创建以行键为字节的行。在 Cassandra cli 中，如果您将行列为字节，您可能会看到行键。例如在 cassandra cli 类型中：
*假设用户键为字节；
列出用户；*

# java - 不幸的是已经停止了android

> ID：12097596
> 
> 赞同：0
> 
> 时间：2012-08-23T18:05:44.150
> 
> 标签：java, android, sockets, android-layout, android-emulator

我有个问题。当我运行我的 android 程序时，出现错误：“不幸的是，android 已停止”。为什么我在运行应用程序时看到此错误？听到是我的文件：

```
enter code here
import java.io.IOException;
import java.io.PrintWriter;
import java.net.Socket;
import java.net.UnknownHostException;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;

public class SimpleClientActivityActivity extends Activity {

private Socket client;
private PrintWriter printwriter;
private EditText textField;
private Button button;
private String messsage;

@Override
public void onCreate(Bundle savedInstanceState) {
 super.onCreate(savedInstanceState);
 setContentView(R.layout.main);

 //textField = (EditText) findViewById(R.id.editText1); //reference to the text field
  button = (Button) findViewById(R.id.button1);   //reference to the send button

  //Button press event listener
  button.setOnClickListener(new View.OnClickListener() {

   public void onClick(View v) {

   //messsage = textField.getText().toString(); //get the text message on the text      field
    //textField.setText("");      //Reset the text field to blank

  try {

 client = new Socket("10.0.2.2", 4444);  //connect to server
 printwriter = new PrintWriter(client.getOutputStream(),true);
 printwriter.write(messsage);  //write the message to output stream

 printwriter.flush();
 printwriter.close();
 client.close();   //closing the connection

  } catch (UnknownHostException e) {
   e.printStackTrace();
  } catch (IOException e) {
   e.printStackTrace();
  }
  }
 });

 }
} 
```

我想用我的 adnroid 客户端向 PC 服务器发送短信

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T18:08:32.183

可能是因为你在主线程上做网络操作。查看您的 logcat，将会有红色的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T18:40:31.553

尝试这个

```
 new Thread(){
        @Override
        public void run(){
            // your onClick code here
        }
    }.start(); 
```

您也可以使用 AsyncTask 进行网络操作

```
public class YourTask extends AsyncTask{

    private Context context;
    private ProgressDialog dialog;

    public SplitCueTask(Context context) {
        this.context = context;
        this.dialog = new ProgressDialog(context);           
    }

    @Override
    protected void onPreExecute() {
        dialog.setMessage(getResources().getString(R.string.loading));
        dialog.show();

    }

    @Override
    protected Boolean doInBackground(Object... objects) {
        // you logic here, return result
        return someObject.
    }

    @Override
    protected void onPostExecute(Object someObject) {
        if (dialog.isShowing())
             dialog.dismiss()
        // handle result here, post it on UI or something else
    }

} 
```

运行任务

```
new YourTask(context).execute(); 
```

并且不要忘记将 INTERNET PERMISSION 添加到 AndroidManifest

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

# php - 密码根据wordpress中的页面密码保护单个媒体文件

> ID：12097597
> 
> 赞同：1
> 
> 时间：2012-08-23T18:05:44.400
> 
> 标签：php, wordpress, passwords, password-protection

我希望能够根据为该页面创建的相同密码对每个特定页面上传和显示的文件进行密码保护。

有什么想法或插件吗？

谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T21:46:45.543

所以你看2个步骤？一个解锁页面，然后同一个通行证解锁下载？为什么不在页面上设置一个需要显示密码的隐藏内容块？

# javascript - 从元素id而不是javascript中的名称获取值

> ID：12097598
> 
> 赞同：-1
> 
> 时间：2012-08-23T18:05:45.337
> 
> 标签：javascript, sum, getelementbyid

我有一些 javascript 行，如果它从同一系列名称中获取价值，则效果很好。但是后来当每个值传递到另一个页面时我遇到了一个问题，我想分解哪个值属于哪个页面。所以问题是如何将脚本计算值的方式从“name”更改为“id”。如下代码：

```
<script type="text/javascript">
    //auto commas
    function doThousands(n) {
        n = '' + n;
        if (n.length < 4) return n;
        var c = n.length % 3;
        var pre = n.substring(0, c);
        return pre + (pre.length? ',' : '') + n.substring(c).match(/\d{3}/g).join(',');
    }
//sub total
    function checkTotal() {
        document.cc_form.total.value = '';
        var sum = <?=$days*$_rate*$_rooms?>;
        for (i=0;i<document.cc_form.cost.length;i++) {
            if (document.cc_form.cost[i].checked) {
                sum = sum + parseInt(document.cc_form.cost[i].value);
                }
            }document.cc_form.total.value = doThousands(sum);
        }
    </script> 
```

这是 HTML：

```
<form name="cc_form" id="cc_form" method="post" action="/">
<label for="transfer1"><input type="checkbox" id="transfer1" name="cost" value="800" autocomplete="off" onchange="checkTotal()" />&nbsp;Taxi (800 THB | 2 pax)</label><br />
<label for="transfer2"><input type="checkbox" id="transfer2" name="cost" value="1200" autocomplete="off" onchange="checkTotal()" />&nbsp;Mini Van (1,200 THB | 6 pax)</label><br />
<label for="xbed"><input type="checkbox" id="xbed" name="cost" value="1200" autocomplete="off" onchange="checkTotal()" />&nbsp;Extra Bed (1,200 THB)</label><br />
<input type="text" id="total" name="total" />

</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T18:28:51.773

`document.getElementById` [http://www.w3schools.com/jsref/met_doc_getelementbyid.asp](http://www.w3schools.com/jsref/met_doc_getelementbyid.asp)

# java - JSoup 不能很好地清理非 ascii 字符串

> ID：12097611
> 
> 赞同：0
> 
> 时间：2012-08-23T18:06:47.417
> 
> 标签：java, utf-8, ascii, jsoup

我正在使用 JSoup 清理来自用户的传入文本。唉，它似乎不支持用于清洁的非 ascii 字符：

assertEquals("привет", Jsoup.clean("привет", Whitelist.none()));

这不起作用。

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T22:59:01.373

如果您运行代码，默认编码是什么？也许这个不是 UTF-8 而是 linux/windows 默认的。您可以使用 VM 参数`-Dfile.encoding=UTF8`来确保 UTF-8。

也使用 jsoup 1.6.3 检查了您的代码 --> 测试成功

# ruby - 更改链接的文本，然后在 Ruby 中使用 Mechanize 单击它们

> ID：12097612
> 
> 赞同：0
> 
> 时间：2012-08-23T18:06:53.830
> 
> 标签：ruby, mechanize

我设法用 Mechanize 填写了一份表格并获得了链接列表。部分结果如下所示：

```
[
  #<Mechanize::Page::Link "View" "/cgi-bin/dcdev/forms/C00508200/800329/">,
  #<Mechanize::Page::Link "View" "/cgi-bin/dcdev/forms/C00487363/800634/">,
  #<Mechanize::Page::Link "View" "/cgi-bin/dcdev/forms/C00498097/800463/">
] 
```

我一直无法弄清楚接下来会发生什么。

1.  我需要抓取的页面不是那些链接，而是`/sa/ALL`在链接的末尾，例如：`/cgi-bin/dcdev/forms/C00508200/800329/sa/ALL`. 如何添加`sa/ALL`到每个链接的末尾？
2.  那么，我怎样才能点击每个更正的链接，并保存结果页面？一个循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T19:37:23.227

这就是你钓鱼的方式...

```
require 'nokogiri'

doc = Nokogiri::HTML(<<EOT)
<html>
  <body>
    <a href="/cgi-bin/dcdev/forms/C00508200/800329/">
    <a href="/cgi-bin/dcdev/forms/C00487363/800634/">
    <a href="/cgi-bin/dcdev/forms/C00498097/800463/">
  </body>
</html>
EOT

hrefs = doc.search('a').map{ |a| a['href'] + '/sa/ALL' } 
```

Mechanize 在其 HTML 解析器内部使用 Nokogiri。您可以通过以下方式访问`doc`机械化用途：

```
require 'mechanize'

agent = Mechanize.new
page = agent.get('http://www.example.net') 
```

证明我们正在处理 Nokogiri 文件：

```
page.parser.class # => Nokogiri::HTML::Document < Nokogiri::XML::Document 
```

获取页面中的链接以进行操作：

```
page.parser.search('a').map(&:to_html) 
```

返回：

```
[
    [ 0] "<a href=\"/\"><img src=\"/_img/iana-logo-pageheader.png\" alt=\"Homepage\"></a>",
    [ 1] "<a href=\"/domains/\">Domains</a>",
    [ 2] "<a href=\"/numbers/\">Numbers</a>",
    [ 3] "<a href=\"/protocols/\">Protocols</a>",
    [ 4] "<a href=\"/about/\">About IANA</a>",
    [ 5] "<a href=\"/go/rfc2606\">RFC 2606</a>",
    [ 6] "<a href=\"/about/\">About</a>",
    [ 7] "<a href=\"/about/presentations/\">Presentations</a>",
    [ 8] "<a href=\"/about/performance/\">Performance</a>",
    [ 9] "<a href=\"/reports/\">Reports</a>",
    [10] "<a href=\"/domains/\">Domains</a>",
    [11] "<a href=\"/domains/root/\">Root Zone</a>",
    [12] "<a href=\"/domains/int/\">.INT</a>",
    [13] "<a href=\"/domains/arpa/\">.ARPA</a>",
    [14] "<a href=\"/domains/idn-tables/\">IDN Repository</a>",
    [15] "<a href=\"/protocols/\">Protocols</a>",
    [16] "<a href=\"/numbers/\">Number Resources</a>",
    [17] "<a href=\"/abuse/\">Abuse Information</a>",
    [18] "<a href=\"http://www.icann.org/\">Internet Corporation for Assigned Names and Numbers</a>",
    [19] "<a href=\"mailto:iana@iana.org?subject=General%20website%20feedback\">iana@iana.org</a>"
] 
```

抓住并咀嚼它们：

```
links = page.parser.search('a').map{ |a| a['href'] + 'sa/ALL' }
[
    [ 0] "/sa/ALL",
    [ 1] "/domains/sa/ALL",
    [ 2] "/numbers/sa/ALL",
    [ 3] "/protocols/sa/ALL",
    [ 4] "/about/sa/ALL",
    [ 5] "/go/rfc2606sa/ALL",
    [ 6] "/about/sa/ALL",
    [ 7] "/about/presentations/sa/ALL",
    [ 8] "/about/performance/sa/ALL",
    [ 9] "/reports/sa/ALL",
    [10] "/domains/sa/ALL",
    [11] "/domains/root/sa/ALL",
    [12] "/domains/int/sa/ALL",
    [13] "/domains/arpa/sa/ALL",
    [14] "/domains/idn-tables/sa/ALL",
    [15] "/protocols/sa/ALL",
    [16] "/numbers/sa/ALL",
    [17] "/abuse/sa/ALL",
    [18] "http://www.icann.org/sa/ALL",
    [19] "mailto:iana@iana.org?subject=General%20website%20feedbacksa/ALL"
] 
```

将您的 munging 应用到哪些链接由您确定，以及如何重新获得它们是您的练习。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T23:32:02.677

```
page.links.each do |link|
  agent.get(link.href + 'sa/ALL').save
end 
```

# php - 为潜在的身份验证端点使用多种服务

> ID：12097615
> 
> 赞同：0
> 
> 时间：2012-08-23T18:07:10.127
> 
> 标签：php, android, cakephp, oauth, openid

我正在编写一个 Android 应用程序，该应用程序需要人们识别自己的身份。我们认为最好的做法是不要让人们在我们的服务器上注册，因为几乎每个人在其他地方都有一个主要服务的帐户（例如 Google、Twitter、Facebook、Yahoo！）。

REST API 是围绕 CakePHP 构建的。这本身并不是我需要的症结所在，但问题更多在于 Android 应用程序以及它与我们的 API 的通信。本质上，我希望看到的是拥有 X 台设备的用户能够登录他们已经有权访问的服务。

然后，我们的服务器将知道该身份作为该用户的身份。然后，我的应用程序需要一种方法来告诉我们的 API“我是来自 service example.com 的 John Doe，这是证据”。服务器还将接受具有相同身份的新设备并将其绑定到该用户。

我在这里遇到了一些问题：

*   OpenID 似乎是要走的路（尽管我不确定 Twitter 是否支持 OpenID）。但是我怎样才能从我的设备上做 OpenID 呢？**我不需要有人指出我的 OpenID for Java。这不是我正在寻找的答案的 100%。**网站将重定向到哪里？
*   我的网络服务器和 Android 应用程序之间的身份验证部分是什么样的？我没有登录。我使用的是 OpenID。我是否应该只获取部分/全部 OpenID 信息并将其传递给网络服务器进行存储，然后再次传递以检查每个 API 调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T19:31:19.107

Twitter 不仅有 OpenID，而且他们还有一个[专门的页面](https://dev.twitter.com/docs/auth/implementing-sign-twitter)来讨论流程是什么以及您需要存储什么。谷歌有一个[类似](https://developers.google.com/accounts/docs/OAuth2Login)的登录页面。OpenID 登录流程（大部分）是 OAuth2。

# java - 获取 JXTreeTable 中单元格的位置

> ID：12097619
> 
> 赞同：3
> 
> 时间：2012-08-23T18:07:30.143
> 
> 标签：java, swing, swingx

如何确定屏幕上 JXTreeTable 中特定单元格的位置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T18:32:00.523

不确定，但合并了一些关于主题的信息。

*   此链接显示了计算摆动组件坐标的方法：[Getting coordinates of a component in java](https://stackoverflow.com/questions/4269540/getting-coordinates-of-a-component-in-java)
*   此[链接](https://pirlwww.lpl.arizona.edu/resources/guide/software/SwingX/org/jdesktop/swingx/JXTreeTable.html)显示，`JXTreeTable`扩展`JTable`：- 此链接显示检索单元格坐标的方法`JTable`：[http ://www.java-forums.org/awt-swing/23061-jtable-cell-coordinates.html](http://www.java-forums.org/awt-swing/23061-jtable-cell-coordinates.html)

所以最终的解决方案理论上可以只调用方法（来自`JTable API`）：

```
public Rectangle getCellRect(int row, int column, boolean includeSpacing) 
```

如果需要，然后使用`SwingUtilities.convertRectangle`获取确切的屏幕位置。

老实说，如果你试一试，我会很好奇它是否有效:)

# ruby-on-rails - Rails：日期/时间、to_time 和时区的说明（经验法则？）

> ID：12097620
> 
> 赞同：0
> 
> 时间：2012-08-23T18:07:35.843
> 
> 标签：ruby-on-rails, date, datetime, time, timezone

**tl;dr**：使用日期、时间和日期时间的规则是什么，这样我才能确保我的应用程序的一致性？

我试图在 Rails 中使用 Dates & Times & Zones，所以当我真的希望所有“面向用户”的日期/时间都针对时区进行调整时，我不会意外使用 UTC。我注意到至少对我来说似乎有些不一致，我希望了解它们背​​后的规则或逻辑，这样我就不会再“感到惊讶”了。

```
1.9.3p194 :028 > e = Event.find(1)
  Event Load (0.3ms)  SELECT "events".* FROM "events" WHERE "events"."id" = $1 LIMIT 1  [["id", 1]]
 => #<Event id: 1, start_at: "2012-08-27 19:15:00", end_at: "2012-08-27 21:00:00", created_at: "2012-08-22 07:43:31", updated_at: "2012-08-23 03:01:59"> 

1.9.3p194 :037 > e.start_at              # <== start_at is DateTime in model
 => Mon, 27 Aug 2012 12:15:00 PDT -07:00  
1.9.3p194 :036 > e.start_at.to_time
 => 2012-08-27 19:15:00 UTC              ### <=== This is in UTC..  ok...

1.9.3p194 :034 > DateTime.now
 => Thu, 23 Aug 2012 10:44:16 -0700      # <=== Also a DateTime
1.9.3p194 :035 > DateTime.now.to_time
 => Thu, 23 Aug 2012 10:44:19 -0700      ### <=== But this is in Pacific Time ?!? 
```

2 不同的反应`to_time`？还是我错过了什么？

DateTime 的[to_time](http://api.rubyonrails.org/classes/DateTime.html#method-i-to_time)相当神秘的文档没有提到时区：

**to_time()** 尝试将 self 转换为 Ruby Time 对象；如果超出 Ruby Time 类的范围，则返回 self。如果 self 的偏移量不是 0，则 self 将原样返回，因为没有干净的方法将其映射到 Time。

那么从 Rails 中获得一致的日期和时间的“规则”是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T20:12:48.047

我假设您`start_at`的数据库中有一个列。结果`e.start_at`不是 的实例，`DateTime`而是 的实例`Time`。（试着打电话`e.start_at.class`看看）

`DateTime.now`我建议不要使用 Rails' `Time.zone.now`，它会返回`Time.zone`.

```
1.9.3p125 :005 > Time.zone
 => (GMT+00:00) UTC 
1.9.3p125 :006 > Time.zone.now
 => Thu, 23 Aug 2012 20:10:34 UTC +00:00 
1.9.3p125 :007 > Time.zone = "Berlin"
 => "Berlin" 
1.9.3p125 :008 > Time.zone
 => (GMT+01:00) Berlin 
1.9.3p125 :009 > Time.zone.now
 => Thu, 23 Aug 2012 22:10:47 CEST +02:00 
```

# html - 如何只在 HTML 选择元素中显示“箭头”？

> ID：12097626
> 
> 赞同：4
> 
> 时间：2012-08-23T18:08:08.830
> 
> 标签：html

基本上，我希望能够只显示下拉箭头，而不是与该下拉箭头关联的文本框。我不想显示该值，但如果有人更改选择，javascript onchange 事件仍会触发。

想法？

保罗

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T18:14:36.883

# 仅适用于 Chrome 的解决方案

（一般来说可能是 webkit，但我无法测试）

我在旧的 IE7/8 中尝试过，它不起作用，因为它也将下拉菜单切断到设置的宽度。Firefox 不显示箭头，而是将文本剪掉，因为它是左对齐的。

## 解决方法如下：

应该很容易通过 CSS 设置控件的宽度并将其限制为箭头。我为 Chrome 构建的简单示例（在其他浏览器中实际上并不适用）：

```
​&lt;select style="width:18px">
    <option value="10000">Something</option>
    <option value="100">Other thing</option>
    <option value="1">The last option</option>
</select>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

小提琴示例：http: [//jsfiddle.net/Fs7G5/](http://jsfiddle.net/Fs7G5/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-23T19:27:00.890

```
 <select><option></select> 
```

这没有多大意义，但它回答了所提出的问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-11-23T18:01:41.493

您将找不到跨浏览器的解决方案。您可能希望将所有浏览器中的所有外观设置为无，然后构建一个自定义样式的选择/选项来满足您的要求。JS onchange 事件即使有自定义样式，仍然会正常触发。

您可以[`appearance`](https://developer.mozilla.org/en-US/docs/Web/CSS/appearance)在 MDN 上继续阅读，但请注意它并不完全受支持。您暂时可以使用的示例：

`appearance: none; -webkit-appearance: none; -moz-appearance: none;`

如果您尝试设置自己的解决方案的样式，您将需要调整 、 和 等`border`属性`border-radius`。`background-color`

# arrays - C++ 动态对象数组

> ID：12097628
> 
> 赞同：1
> 
> 时间：2012-08-23T18:08:21.083
> 
> 标签：arrays, object, dynamic

这里是 C++ 新手，这是我的第一篇文章。我正在学校做一个项目，但我有点卡住了。我的任务是创建一个课程名册。每个名册将包含课程名称、课程代码、课程学分和教授姓名。没问题，我有一个名册班。问题是我不确定如何使**对象**数组动态化，因为它必须能够在用户请求时增长和缩小。我一般对动态数组有些熟悉，但不确定对象动态数组的语法。而且，根据教授的指示，**向量不是一种选择**. 我搜索了这个论坛以及互联网上的其他区域，但没有找到答案，或者我不理解我找到的答案，并认为我会在这里发布。以下是我的非动态对象数组的代码。帮助转换为动态数组将不胜感激。谢谢！

StudentEnrollment.h：

```
#ifndef STUDENTENROLLMENT_H
#define STUDENTENROLLMENT_H

# include <iostream>
# include <string>

using namespace std;

class Roster {

private:

    string courseName;
    string courseCode;
    string courseCredits;
    string professorName;

public:

    void setCourseName ( string );
    void setCourseCode ( string );
    void setCourseCredits ( string );
    void setProfessorName ( string );

    string getCourseName();
    string getCourseCode();
    string getCourseCredits();
    string getProfessorName();

    Roster ();

};

#endif; 
```

StudentEnrollment.cpp：

```
#include <iostream>
#include <string>
#include "StudentEnrollment.h"

using namespace std;

// Roster class implementation

Roster::Roster () {

    courseName = "";
    courseCode = "";
    courseCredits = "";
    professorName = "";

}   

void Roster::setCourseName ( string cn ) {
    courseName = cn;
}

void Roster::setCourseCode ( string c ) {
    courseCode = c;
}

void Roster::setCourseCredits ( string cc ) {
    courseCredits = cc;
}

void Roster::setProfessorName ( string pn ) {
    professorName = pn;
}

string Roster::getCourseName() {
    return courseName;
}

string Roster::getCourseCode() {
    return courseCode;
}

string Roster::getCourseCredits() {
    return courseCredits;
}

string Roster::getProfessorName() {
    return professorName;
} 
```

主.cpp：

```
#include <iostream>
#include <string>
#include "StudentEnrollment.h"

using namespace std;

int main (int argc, char * const argv[]) {

    int number_of_rosters = 0;

    string course, code, credits, name;

    cout << "Enter the number of rosters you would like to create: ";
    cin >> number_of_rosters;
    cin.ignore(100, '\n');

    Roster roster[number_of_rosters];

    for ( int i = 0; i < number_of_rosters; i++){
        cout << "Enter course name: ";
        getline(cin,course);
        roster[i].setCourseName(course);

        cout << "Enter course code; ";
        getline(cin, code);
        roster[i].setCourseCode(code);

        cout << "Enter course credits: ";
        getline(cin, credits);
        roster[i].setCourseCredits(credits);

        cout << "Enter professor name: ";
        getline(cin, name);
        roster[i].setProfessorName(name);

        cout << "Next course..." << endl;
    }

    cout << endl;

    for ( int i = 0; i < number_of_rosters; i++){
        cout << roster[i].getCourseName() << endl;
        cout << roster[i].getCourseCode() << endl;
        cout << roster[i].getCourseCredits() << endl;
        cout << roster[i].getProfessorName() << endl;
        cout << endl;
    }

    return 0;
} 
```

如果格式不正确，请原谅我。这是我的第一篇文章。

亚瑟

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T18:30:39.280

我认为您将不得不实现自己的数据结构，据我所知，c++ 本身并不支持这一点，这就是我们使用向量的原因。

对于这种类型的问题，我们必须实现自己的数据结构，我认为[链接列表](http://en.wikipedia.org/wiki/Linked_list)将是一个合适的解决方案。

这可能是`vectors`内部实现的方式，它们是不同的解决方案。

从根本上说，LinkList 是一种由连接节点组成的特殊数据结构，可以将其视为一个链，其中每个元素都有一个值，在这种情况下是一个名册，以及到下一个元素的链接和/或到前一个元素的链接依此类推......所以如果你想添加一个元素，你可以简单地将它添加到末尾或开头，这取决于你，如果你想删除一个元素，只需剪切它并将两个元素连接在一起，对比一组更像是一根棍子的对象，你不能真正在两端添加东西，即使可以，你也不能真正切割，你可以真正将它们无缝地连接在一起。

链接列表有很多变体，但这就是它的要点。

另一方面，如果您想使用[动态数组](http://en.wikipedia.org/wiki/Dynamic_array)，您将手动将所有值复制到新的较大数组中，并销毁前一个数组，这**真的很**昂贵，而且从根本上来说可能非常危险，您将需要实现一个我们可以使用的复制构造函数，`memcpy`但是如果我们的对象持有指向其他对象的引用或指针，这可能会非常危险，在这种情况下，如果它们被删除，我们将指向错误的值。

另请注意，如果您不提供默认构造函数、复制构造函数、赋值运算符，则 c++ 编译器将插入以下内容，所有这些都可能会或可能不会按预期工作，具体取决于底层成员，因此实现总是明智的我们自己的，在这种情况下你没问题，即你没有任何原始指针，但是当运行时错误开始出现并且你不知道为什么时要记住一些事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T18:13:08.147

要根据用户的要求扩大或缩小数组，请创建一个具有所需大小的新数组，并将元素一个接一个地复制。这是一个 O(n) 操作，但您无权访问内存，除非您在堆栈上显式声明它，或者使用带有指针的 new 或 malloc。

在任何情况下，您都可以制作第二个所需的增长后/收缩后大小的数组。我建议使用 new/malloc 以便您可以将变量指针移动到新创建的数组。另外，我建议在将内存复制到新内存后清理数组中的内存。

也可以考虑不同的数据结构，例如链表。

# php - 如何获取临时文件路径？

> ID：12097631
> 
> 赞同：28
> 
> 时间：2012-08-23T18:08:29.863
> 
> 标签：php, temporary-files

我知道您可以使用 tmpfile 创建一个临时文件，然后写入它，并在不再需要时关闭它。但我遇到的问题是我需要文件的绝对路径，如下所示：

```
"/var/www/html/lolo/myfile.xml" 
```

即使使用其他功能或技巧，我能否以某种方式获得路径？

### 编辑：

我希望能够从数据库中下载文件，但没有

```
$fh = fopen("/var/www/html/myfile.xml", 'w') or die("no no");
fwrite($fh, $fileData);
fclose($fh); 
```

因为如果我这样做，如果更多人尝试在完全相同的时间下载相同的文件，就有可能重叠。还是我错了？

### 编辑2：

也许我可以像这样生成唯一（uniqID）文件名，然后删除它们。或者如果很多人都在下载，这对服务器来说是否过于消耗？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-08-23T18:15:13.593

有很多方法可以实现这一点，这里有一个

```
<?php 
// Create a temp file in the temporary 
// files directory using sys_get_temp_dir()
$temp_file = tempnam(sys_get_temp_dir(), 'MyFileName');
echo $temp_file;
?> 
```

上面的示例将输出类似于：/var/tmp/MyFileNameX322.tmp

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-12-02T17:56:24.107

> 我知道你可以用 tmpfile 创建一个临时文件

这是一个好的开始，这样的事情会做：

```
$fileHandleResource = tmpfile(); 
```

> 即使使用其他功能或技巧，我能否以某种方式获得路径？

是的：

```
$metaData = stream_get_meta_data($fileHandleResource);
$filepath = $metaData['uri']; 
```

这种方法的好处是让 PHP 为这个临时文件选择一个好位置和名称，这最终可能是一件好事或坏事，具体取决于您的需要。但如果您还没有特定的理由来选择自己的目录和文件名，这是最简单的方法。

参考：

[http://us.php.net/manual/en/function.stream-get-meta-data.php](http://us.php.net/manual/en/function.stream-get-meta-data.php)

[使用文件句柄获取文件名（或删除文件）](https://stackoverflow.com/questions/5144583/getting-filename-or-deleting-file-using-file-handle)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-23T18:15:46.993

这将为您提供[目录](http://www.php.net/manual/en/function.sys-get-temp-dir.php)。我想在那之后你就靠自己了。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-24T18:13:53.643

对于较新（不是很新的大声笑）版本的 PHP（需要 php 5.2.1 或更高版本）@whik 的答案更适合：

```
<?php 
// Create a temp file in the temporary 
// files directory using sys_get_temp_dir()
$temp_file = tempnam(sys_get_temp_dir(), 'MyFileName');
echo $temp_file;
?> 
```

上面的示例将输出类似于：/var/tmp/MyFileNameX322.tmp

### 旧答案

以防万一有人遇到完全相同的问题。我最终做了

```
$fh = fopen($filepath, 'w') or die("Can't open file $name for writing temporary stuff.");
fwrite($fh, $fileData);
fclose($fh); 
```

和

```
unlink($filepath); 
```

最后，当文件不再需要时。

在此之前，我生成了这样的文件名：

```
$r = rand();        
$filepath = "/var/www/html/someDirectory/$name.$r.xml"; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-06-08T15:22:06.163

我刚刚生成了一个临时文件，将其删除，并创建了一个同名文件夹

```
$tempFolder = tempnam(sys_get_temp_dir(), 'MyFileName');
unlink($tempFolder);
mkdir($tempFolder); 
```

# unit-testing - apache mina 客户端的单元测试

> ID：12097634
> 
> 赞同：4
> 
> 时间：2012-08-23T18:08:35.197
> 
> 标签：unit-testing, apache-mina

我有一个 mina 客户端，其连接器是 NioSocketConnector。我已经编写了这个客户端与真实服务器的集成测试。但是，我找不到进行**单元测试**的方法。例如，我想在不打开真实套接字的情况下测试我的自定义解码器和编码器是否正常工作。而且，我想测试我的消息在缓冲区等中是否正确排队。

我找到了一个用于测试的 DummySession 类，但我不确定这个类是否足以对客户端进行完整的单元测试。

Mina 建议使用它进行单元测试很容易，所以我真的想知道我该怎么做。请提供您的想法或示例代码链接。

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-14T14:37:51.697

编码器的单元测试：

```
YourEncoder encoder = new YourEncoder();
ProtocolCodecSession session = new ProtocolCodecSession();
encoder.encode(session, message, session.getEncoderOutput());
// encoded message will be in session.getEncoderOutputQueue() 
```

解码器的单元测试：

```
//Prepare an IoBuffer which will be decoded, say buf
YourDecoder decoder = new YourDecoder();
ProtocolCodecSession session = new ProtocolCodecSession();
decoder.decode(session, buf, session.getDecoderOutput());
//decoded message will be in session.getDecoderOutputQueue() 
```

# c# - 如何从 aspx 下拉列表中获取选定的值？

> ID：12097639
> 
> 赞同：1
> 
> 时间：2012-08-23T18:08:57.840
> 
> 标签：c#, asp.net, drop-down-menu

我正在使用以下代码在我的 aspx 页面中显示下拉列表，并且下拉列表中加载的数据是由`SqlDatasource4`

```
 <asp:DropDownList ID="DropDownListnew" runat="server" 
     CssClass="ddlb" Width="210px" Height="30px" DataSourceID="SqlDataSource4" 
     DataTextField="OrderPeriod" DataValueField="OrderPeriodID">
 </asp:DropDownList> 
```

当我尝试`C#`通过以下代码访问文件中的下拉数据时：

```
string data = DropDownListnew.Text; 
```

它打印所选值的编号，我想将所选值存储在数据字符串中。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T18:12:30.320

您可以通过以下方式访问它；

```
string data = DropDownListnew.SelectedValue; // property not .Text property 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T18:10:07.037

```
string data = DropDownListnew.SelectedValue; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T17:41:26.860

从 DropDownList 中获取选定值的另一个属性。

```
string data = DropDownListnew.SelectedItem.Value; 
```

# c# - Silverlight 5 在使用 C# 与 XamGrid 绑定时清除数据对象

> ID：12097643
> 
> 赞同：0
> 
> 时间：2012-08-23T18:09:28.223
> 
> 标签：c#, visual-studio-2010, data-binding, infragistics, silverlight-5.0

我正在尝试将数据对象绑定到 XamGrid。但是，网格出现空白。这在 Silverlight 4 中有效，但在 Silverlight 5 中不再有效。检查代码显示，在初始化后，绑定到网格的数据对象是空白的，尽管它与数据一起输入。

这是相关的 .xaml

```
<custCtrls:TcGroupBox Header="Users" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Grid.Row="0">
        <ContentControl>
            <ig:XamGrid x:Name="igUsersGrid" AutoGenerateColumns="False" ColumnWidth="Auto" Height="159" ItemsSource="{Binding Users.Rows, Mode=TwoWay}"  SelectedRowsCollectionChanged="igUsersGrid_SelectedRowsCollectionChanged" Loaded="igUsersGrid_Loaded">
                <ig:XamGrid.RowSelectorSettings>
                    <ig:RowSelectorSettings EnableRowNumbering="False" Visibility="Visible" />
                </ig:XamGrid.RowSelectorSettings>
                <ig:XamGrid.SelectionSettings>
                    <ig:SelectionSettings RowSelection="Single" ColumnSelection="None" CellSelection="None" CellClickAction="SelectRow"/>
                </ig:XamGrid.SelectionSettings>
                <ig:XamGrid.Columns>
                    <ig:TextColumn Key="UserName" HeaderText="UserName" Width="165" MinimumWidth="{StaticResource DefaultMinimumColWidth}" />
                    <ig:TextColumn Key="FirstName" HeaderText="FirstName" Width="165" MinimumWidth="{StaticResource DefaultMinimumColWidth}" />
                    <ig:TextColumn Key="LastName" HeaderText="LastName" Width="165" MinimumWidth="{StaticResource DefaultMinimumColWidth}" />
                    <ig:TemplateColumn Key="Phone" HeaderText="Phone" Width="115" IsReadOnly="True" MinimumWidth="{StaticResource DefaultMinimumColWidth}" >
                        <ig:TemplateColumn.ItemTemplate>
                            <DataTemplate>
                                <ig:XamMaskedEditor Value="{Binding Phone, Mode=TwoWay}" Mask = "(###)###-####" ValidationMode="LostFocus" IsReadOnly="True" Template="{StaticResource XamMaskedEditorControlTemplate1}"/>
                            </DataTemplate>
                        </ig:TemplateColumn.ItemTemplate>
                    </ig:TemplateColumn>
                    <ig:TextColumn Key="Email" HeaderText="Email" Width="160" MinimumWidth="{StaticResource DefaultMinimumColWidth}" />
                    <ig:TextColumn Key="RoleName"  HeaderText="RoleName" Width="160" MinimumWidth="{StaticResource DefaultMinimumColWidth}" />
                    <ig:TextColumn Key="UserId" Visibility="Collapsed" />
                    <ig:TextColumn Key="RoleId" Visibility="Collapsed" />
                </ig:XamGrid.Columns>
            </ig:XamGrid>                       
        </ContentControl>
    </custCtrls:TcGroupBox> 
```

在哪里

```
xmlns:ig="http://schemas.infragistics.com/xaml" 
```

这是相关的 .cs 代码

```
public bool InitializeView(Object viewData)
    {
        _bInitializingControls = true;
        UserControlData data = viewData as UserControlData;

        _dsoUserMgmt = data.ControlData as dsoUserMgmt;
        LayoutRoot.DataContext = _dsoUserMgmt;

        ShowDefaultForm();
        InitializeMenuBar();

        //Initialize menu and toolbar and show default form
        GetUserRoleNames();

        _dsoUserMgmt.Modified = false;

        if (_SelectedUserId > 0)
            SelectUserGridRow(_SelectedUserId);
        _bInitializingControls = false;
        return true;
    } 
```

这是 doUserMgmt.cs 对象的片段

```
public class dsoUserMgmt : dsoBaseDataSet
{
    protected dtoUsers _Users = new dtoUsers();

    [DataMember]
    public dtoUsers Users
    {
        get { return _Users; }

        set
        {
            Delete(_Users);
            _Users = value;
            Add(_Users);
        }
    }
} 
```

当我在 InitializeView() 中点击以下行时跟踪代码时

```
LayoutRoot.DataContext = _dsoUserMgmt; 
```

然后它会调用get返回_Users，但它调用了3次。前两个包含数据，第三个调用返回 null。在那之后，DataContect 和网格都是空的。

关于发生了什么的任何想法？这适用于以相同方式设置的另一个网格，并且这用于在 Silverlight 4 中工作。我找到了以下链接，但它们没有帮助（尽管它们阐明了未来可能出现的问题）

[Silverlight 5 中的绑定错误？](http://forums.silverlight.net/t/244652.aspx/1)

[Silverlight 数据绑定](http://www.silverlight.net/learn/data-networking/binding/silverlight-data-binding)

# api - 使用 Powershell 从 Amazon 获取图书元数据

> ID：12097650
> 
> 赞同：2
> 
> 时间：2012-08-23T18:09:52.200
> 
> 标签：api, powershell, amazon, webrequest, isbn

我想使用亚马逊产品广告 API 使用 Powershell 创建一个 Web 请求，该请求提交 ISBN / ANSI 编号并返回图书元数据。（标题，作者，...）

到目前为止，我已经创建了一个帐户来获取 AssociateTag、AWSAccessKeyId 和 AWS 密钥。有了这些信息，我就可以在测试页面上创建一个签名的 WebRequest，效果很好。[http://associates-amazon.s3.amazonaws.com/scratchpad/index.html](http://associates-amazon.s3.amazonaws.com/scratchpad/index.html)

**现在我的问题是，如何使用 Powershell 创建这个 WebRequest 并使用我的 Sec Key 签署“String-to-Sign”？**

文档[http://docs.amazonwebservices.com/AWSECommerceService/latest/DG/rest-signature.html](http://docs.amazonwebservices.com/AWSECommerceService/latest/DG/rest-signature.html)显示，我们需要生成一个 HMAC-SHA256 哈希密钥，并将其添加到 WebRequest。但我无法创建这样的哈希......

```
**
$AwsSecKey = "1234567890"

$string = "GET
webservices.amazon.com
/onca/xml
AWSAccessKeyId=AKIAIOSFODNN7EXAMPLE&ItemId=0679722769&Operation=I
temLookup&ResponseGroup=ItemAttributes%2COffers%2CImages%2CReview
s&Service=AWSECommerceService&Timestamp=2009-01-01T12%3A00%3A00Z&
Version=2009-01-06"

$hmacsha = New-Object System.Security.Cryptography.HMACSHA256
$hmacsha.key = [Text.Encoding]::ASCII.GetBytes($key)
$signature = $hmacsha.ComputeHash([Text.Encoding]::ASCII.GetBytes($string))
$sig = [string]::join("", ($signature | % {([int]$_).toString('x2')}))
** 
```

希望有人可以帮助我解决这个问题...

谢谢， 安德烈亚斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T18:12:31.413

除了 latkin 的评论，您应该使用换行符构建您的字符串，否则您的签名将与亚马逊的签名不匹配。这是我在[Amazon Product Scatchpad](http://associates-amazon.s3.amazonaws.com/scratchpad/index.html)上匹配签名的示例。

```
$amazonserver="webservices.amazon.com"
$linebreak="`n"
$AWSAccessKey = "2345678"
$AssociateTag = "1234567" 
$secretkey = "1234567890"
$url = "/onca/xml"
$ItemID = "0679722769"
$timestamp = "2012-10-19T15%3A34%3A33.000Z"

$urlparams = "AWSAccessKeyId=" + $AWSAccessKey + "&AssociateTag=" + $AssociateTag + "&Condition=All&IdType=ASIN&ItemId=" + $ItemID + "&Operation=ItemLookup&ResponseGroup=Images%2CItemAttributes%2COffers&Service=AWSECommerceService&Timestamp=" + $timestamp + "&Version=2011-08-01"
#write-host "Urlparams=$urlparams"
$stringtosign="GET" + $linebreak + $amazonserver + $linebreak + $url + $linebreak + $urlparams
#write-host "stringtosign=$stringtosign"
#Results from Amazon Products Scratchpad, http://associates-amazon.s3.amazonaws.com/scratchpad/index.html
$test="GET
webservices.amazon.com
/onca/xml
AWSAccessKeyId=2345678&AssociateTag=1234567&Condition=All&IdType=ASIN&ItemId=0679722769&Operation=ItemLookup&ResponseGroup=Images%2CItemAttributes%2COffers&Service=AWSECommerceService&Timestamp=2012-10-19T15%3A34%3A33.000Z&Version=2011-08-01"
#Write-Host $test
$testsig ="9oGX%2Fs8K5ww6CLkAGYLPCiLPAp5kdEBYyBwzOF7fXZI%3D"

$hmacsha = New-Object System.Security.Cryptography.HMACSHA256
$hmacsha.key = [Text.Encoding]::ASCII.GetBytes($secretkey)
$signature = $hmacsha.ComputeHash([Text.Encoding]::ASCII.GetBytes($stringtosign))
#$sig = [string]::join("", ($signature | % {([int]$_).toString('x2')}))
#$sig
$sig = [Convert]::ToBase64String($signature)
$sig
Add-Type -AssemblyName System.Web
$encoded = [System.Web.HttpUtility]::UrlEncode($sig)
$encoded
$testsig -match $encoded 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T18:34:42.163

您是否在 AWS 站点上看到过[产品广告 API 签名请求示例代码 - C# REST/Query代码？](http://aws.amazon.com/code/2480?_encoding=UTF8&jiveRedirect=1)

它包含一个 C#`SignedRequestHelper`类，可以直接在您的 PowerShell 中使用，或者可能有助于弥合 AWS 请求签名方面的差距。

祝你好运！

扎克

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T18:39:49.447

Zach 指向的库可能是您最好的选择。但是你在正确的轨道上，我认为你唯一错误的是构造最终的哈希字符串，你需要做

```
$sig = [Convert]::ToBase64String($signature) 
```

# javascript - 正则表达式：允许除某些选定字符之外的所有内容

> ID：12097651
> 
> 赞同：5
> 
> 时间：2012-08-23T18:09:55.827
> 
> 标签：javascript, jquery, regex, textarea

我想验证一个文本区域，但我没有得到正则表达式（我花了一天的时间和一堆教程才弄明白）。

基本上我希望能够允许一切（包括换行符和战车），但可能是恶意的字符（那些会导致安全漏洞的字符）。由于不允许使用的字符很少，我认为创建黑名单比创建白名单更有意义。

我的问题是：Regex 中的标准“除此之外的一切”是什么？

我正在使用 javascript 和 jquery。

我试过这个，但它不起作用（这很糟糕，我知道..）：

```
var messageReg = /^[a-zA-Z0-9éèêëùüàâöïç\"\/\%\(\).'?!,@$#§-_ \n\r]+$/; 
```

谢谢你。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-23T18:14:03.593

如果您想排除一组字符（例如一些标点符号），您可以`^`在字符集的开头使用运算符，在正则表达式中

```
/[^.?!]/ 
```

这匹配任何不是`.`、`?`或的字符`!`。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-23T18:14:47.493

您可以使用`^`括号内的第一个字符`[]`来否定其中的内容：

```
/^[^abc]*$/ 
```

这意味着：“从头到尾，没有`a`，，`b`或`c`。”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T18:17:03.023

正如 Esailija 所提到的，这对真正的安全性没有任何帮助。

您提到的代码几乎是一个否定集，正如 murgatroid99 提到的，`^`括号内的。因此，正则表达式将匹配不在该列表中的任何内容。但看起来你真的想去掉这些字符，所以你的正则表达式不需要被否定。

您的代码应如下所示：

```
str.replace(/[a-zA-Z0-9éèêëùüàâöïç\"\/\%\(\).'?!,@$#-_ \n\r]/g, ""); 
```

也就是说，删除我的正则表达式中的所有字符。

但是，这就是说您不想保留`a-zA-Z0-9`，您确定要删除它们吗？

此外，chrome 不喜欢正则表达式中的 §，您必须使用`\x`字符的十六进制代码

# xcode - 当我使用命令（ctrl）在 eclipse 中单击一个方法时，它会打开 xcode

> ID：12097652
> 
> 赞同：2
> 
> 时间：2012-08-23T18:09:59.000
> 
> 标签：xcode, eclipse, macos, keyboard-shortcuts

在 eclipse for mac 中，当您按下命令然后单击方法或变量时，它将带您到它所在的位置。但是它突然没有这样做，而是开始打开 ​​XCODE，因为它将每次点击都视为打开 .java 文件。我认为可能是键绑定所以我进入 Eclipse 并重置所有键绑定，所以现在它跳转到 Eclipse 文档的正确部分......然后它打开 XCODE。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T19:57:53.233

确保 eclipse 中的 *.java 文件“打开方式”不是 XCODE。

# javascript - window.XMLHttpRequest 结合脚本 .change

> ID：12097658
> 
> 赞同：0
> 
> 时间：2012-08-23T18:10:14.730
> 
> 标签：javascript, jquery, xmlhttprequest

我在组合两个脚本时遇到问题。Fisrt 脚本运行良好，并从 mysql 获取 stuf：

```
<script type="text/javascript">
 function showUser(str)
        {
        if (str=="")
          {
          document.getElementById("txtHint").innerHTML="";
          return;
          } 
        if (window.XMLHttpRequest)
          {// code for IE7+, Firefox, Chrome, Opera, Safari
          xmlhttp=new XMLHttpRequest();
          }
        else
          {// code for IE6, IE5
          xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
          }
        xmlhttp.onreadystatechange=function()
          {
          if (xmlhttp.readyState==4 && xmlhttp.status==200)
            {
            document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
            }
          }
        xmlhttp.open('GET','includes/test-search.php?q='+str,true);
        xmlhttp.send();
        }
    </script> 
```

第二个运行良好，它是用于在更改后插入数据的简单脚本：

```
<script type="text/javascript">
    $("document").ready(function(){
        $("#selection").change(function () {
        $("#someDivName").html( $("#selection option:selected").val() );
    });
    });
    </script> 
```

现在的重点是把它们结合起来。

看起来，当我加载站点时，它没有 id 选择并且第二个脚本停止但是在从 php 和 mysql 文件 test-search.php 获取数据后，缺少的 id 选择在站点上，但第一个脚本没有检查 id选择出现并且不起作用。

php代码：

```
<?php
$q=$_GET["q"];
$con = mysql_connect('localhost', 'root', '');
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }
mysql_select_db("table", $con);
$sql="SELECT * FROM prod_models WHERE prod_main_group_id = '".$q."'";
$result = mysql_query($sql);
echo '
<select id="selection" name="prod_main_group_id" onchange="change_val()">
<option value="">Wybierz produkt</option>
';
while($row = mysql_fetch_array($result))
  {
  echo '<option value="'.$row['id'].'">';
  echo $row['product_name'] . "</option>";
  }
echo "</select>
";
mysql_close($con);
?> 
```

显示更改脚本的代码：

```
<input type="text" id="someDivName" value="" /> 
```

如果有人可以帮助解决问题，那就太好了。谢谢，我现在正在等待它并试图为我自己解决这个问题，但现在我没有其他想法。

# eclipse - 从不同的机器调试 Google AppEngine localhost

> ID：12097664
> 
> 赞同：2
> 
> 时间：2012-08-23T18:10:44.650
> 
> 标签：eclipse, google-app-engine, servlets

我正在使用 eclipse 来调试一个谷歌应用引擎应用程序。我想从我的 iPhone 连接到笔记本电脑上运行在 Eclipse 上的 GAE 应用程序。

在 Eclipse 中，我尝试了 Run->Debug Configurations，然后添加了一个 --address 选项来使用我的 IP 地址

![在此处输入图像描述](../Images/d924d9ebd1dc9ea65953f13ab6ba3749.png)

但我一定做得不对，因为当我尝试调试时出现此错误

[Java CocoaComponent 兼容模式]：将 SWT 的超时设置为 0.100000 用法：[选项]

知道怎么做吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T01:20:37.863

我有同样的问题，找到了这篇文章，并能够用你的提示解决。谢谢

首先，不要在参数列表的末尾添加--address，否则战争路径会自动添加到参数中两次（请参阅屏幕截图，您有一个额外的 /Users/arc/Documents/workspace/jsoup/在 --address 之后添加了战争

第二。--address 在 Linux Mint 和 Eclipse Junu 上似乎对我不起作用。我不得不使用 -a

所以我的参数列表看起来像：

-a 0.0.0.0 --port=8080 /home/d/workspace/blah/war

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-10T13:31:45.160

对于那些正在使用 IntelliJ 的人来说，你需要去编辑配置。在您的 AppEngine 开发服务器下，您会找到一个页面，您可以在其中设置“服务器参数”。将此设置为：

```
--address=[ip address] 
```

例如

```
--address=192.168.1.115 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T10:08:51.367

在参数`-bindAddress *localIPaddress*`之前添加。`-port`它对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T22:44:09.083

将 IP 地址设置为 0.0.0.0 应该可以正常工作..（我不知道如何在 Eclipse 中成功地做到这一点）

# c# - 为什么标识 === 运算符在 c# 中不可用？

> ID：12097665
> 
> 赞同：0
> 
> 时间：2012-08-23T18:10:57.497
> 
> 标签：c#, .net

我只是想知道，**为什么 identity === 运算符在 c# 中不可用？。**有什么不可用的原因。**c# 中 === 运算符的等价物是什么？** 因为我在一个地方看到身份运算符 === 比等于 == 运算符更快。因为 == 运算符临时更改数据类型。

**更新：**`===`和运算符之间的区别`==`。=== 基本上不会将这两个变量转换为临时数据类型，而 == equal 将转换后的变量的数据类型临时转换

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T18:12:34.823

因为[`ReferenceEquals`](http://msdn.microsoft.com/en-us/library/system.object.referenceequals.aspx)存在。

因为值类型会覆盖相等性。

因为 C# 与 JavaScript 不同，它没有“真”和“假”值，并且隐式转换定义明确。

简而言之，它不存在，因为在 C# 中不需要它，这与 JavaScript 不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T18:27:10.913

这是因为 PHP / javascript 是动态类型语言，而 C-Sharp 是静态类型。

例如（在 PHP 中）

```
if (5 == '5') ... // is true
if (5 === '5') ... // is false 
```

在 C# 中

```
if (5 == '5') ... // compile error, incompatible types 
```

**编辑**

详细地说，很多类型没有隐式转换（即字符串与整数），这会导致编译错误，但对于那些存在隐式转换（整数与浮点数）的情况，要做类似类型的比较你可以做。

```
float x = 1.0f;
int y = 1;

if (x == y) ... // is true
if (x == y && x.GetType() == y.GetType()) ... // is false 
```

# ruby-on-rails-3 - 由于某种原因，未创建 Rails CarrierWave 版本

> ID：12097667
> 
> 赞同：2
> 
> 时间：2012-08-23T18:11:03.093
> 
> 标签：ruby-on-rails-3, imagemagick, carrierwave, homebrew

我有以下文件上传器

```
class ItemImageUploader < CarrierWave::Uploader::Base
  include ::CarrierWave::Backgrounder::Delay
  include CarrierWave::MiniMagick
  include Sprockets::Helpers::RailsHelper
  include Sprockets::Helpers::IsolatedHelper

  def store_dir
    "uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}"
  end

  # Provide a default URL as a default if there hasn't been a file uploaded:
  def default_url
    asset_path("fallback/" + [version_name, "image.png"].compact.join('_'))
  end

  def cache_dir
      "uploads/tmp"
  end

  # Create different versions of your uploaded files:
  version :thumb do
    process :resize_to_fill => [80,80]
  end

  def extension_white_list
    %w(jpg jpeg gif png)
  end 
```

图片类

```
class Picture < ActiveRecord::Base
  belongs_to :imageable, :polymorphic => true
  mount_uploader :image, ItemImageUploader
  process_in_background :image
  validates_presence_of :image

  def copy
    Picture.new(:image => self.image)
  end 
```

以及carrier_wave.rb 初始化文件中的以下配置：

```
CarrierWave.configure do |config|
config.enable_processing = true
    #config.permissions = 0666
    #config.directory_permissions = 0777
    config.storage = :file
end 
```

图片已正确上传，但未创建缩略图，未发生错误。请指教。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T22:06:02.150

我自己就用头撞到这个。正如评论所暗示的，使用`carrierwave_backgrounder`会导致这个问题。您可以在他们的[文档](https://github.com/lardawge/carrierwave_backgrounder#background-options)中看到它：

process_in_background -`This stores the original file with no processing/versioning.`

对解决方案没有帮助，但我想我会验证问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-01T20:08:32.040

我今天为此挣扎了几个小时，因为我遇到了同样的问题。可以上传原始版本，但没有调整大小。它在本地工作，但不在我的生产机器上。希望有同样问题的人偶然发现这个答案并节省一些时间。

结果发现我的 ImageMagick 版本没有使用正确的代表构建，这是以下输出`$ convert -version`：

```
Version: ImageMagick 6.9.1-10 Q16 x86_64 2015-08-01 http://www.imagemagick.org
Copyright: Copyright (C) 1999-2015 ImageMagick Studio LLC
License: http://www.imagemagick.org/script/license.php
Features: Cipher DPC OpenMP 
Delegates (built-in): zlib 
```

我使用这个答案来安装代表并构建 ImageMagick 的新版本：[ImageMagick missing decode delegates](https://stackoverflow.com/questions/10709488/imagemagick-missing-decode-delegates/15803403#15803403)

之后，使用以下命令提取 ImageMagick 信息`$ convert -version`：

```
Version: ImageMagick 6.9.1-10 Q16 x86_64 2015-08-01 http://www.imagemagick.org
Copyright: Copyright (C) 1999-2015 ImageMagick Studio LLC
License: http://www.imagemagick.org/script/license.php
Features: Cipher DPC OpenMP 
Delegates (built-in): bzlib djvu fontconfig freetype gvc jbig jng jpeg lcms lqr lzma openexr png tiff wmf x xml zlib 
```

现在我在滚！

# css - 让 Facebook 的 iframe 调整其高度

> ID：12097668
> 
> 赞同：0
> 
> 时间：2012-08-23T18:11:03.467
> 
> 标签：css, facebook, iframe, height

我正在处理这个[facebook 应用页面](https://www.facebook.com/DonateToAcsExample/app_127502060729545)。

iframe 的高度停留在 800px，但 iframe 的内容要高得多。我在谷歌上搜索了调整 iframe 高度的方法，最终进入了[这个 facebook 开发页面](https://developers.facebook.com/docs/reference/javascript/FB.Canvas.setSize/)。

从那我想出了这个......

```
<div id="fb-root"></div>
<script type="text/javascript" src="http://connect.facebook.net/en_US/all.js"></script>

<script type="text/javascript" charset="utf-8">
    FB.Canvas.setSize();
</script> 
```

但它不起作用。知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T18:36:02.850

采用

```
Fb.canvas.setAutoGrow() 
```

请参阅此参考 [https://developers.facebook.com/docs/reference/javascript/FB.Canvas.setAutoGrow/](https://developers.facebook.com/docs/reference/javascript/FB.Canvas.setAutoGrow/)

这可能会有所帮助。

# r - fitdist 截断法线

> ID：12097669
> 
> 赞同：2
> 
> 时间：2012-08-23T18:11:03.840
> 
> 标签：r

截断法线由下式给出：

```
dtnorm<- function(x, mean, sd, a, b) {
dnorm(x, mean, sd)/(pnorm(b, mean, sd)-pnorm(a, mean, sd))
}
ptnorm <- function(x, mean, sd, a, b) {
(pnorm(x,mean,sd) - pnorm(a,mean,sd)) / 
  (pnorm(b,mean,sd) - pnorm(a,mean,sd))
} 
```

拟合由下式给出：

```
fitdist( data, tnorm, method="mle",
                    start=list(mean=mapply("[[", results[1], 1),
                               sd=mapply("[[", results[1], 2)),
                    fix.arg=list(a=minLoose,b=maxLoose)) 
```

其中 results[i] 是一个矩阵，其中 fitdist 的 mle 结果使用 normal 而不是 tnormal。

我得到以下 tnorm 的结果：

```
mean=-0.00844725266454969, sd=0.012540928272073 
```

而规范：

```
mean=0.00748402597402597, sd=0.00614293813955003 
```

数据均大于 0 且小于 0.04，因此为 tnorm 获得的 mle 似乎不正确....有什么建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T18:22:54.173

您的数据都高于正态（呃，而不是高于 0）这一事实与截断分布的最佳拟合的“平均值”是否超过 0 几乎没有关系。您正在拟合正态分布的右尾到您的数据。截断的估计位置参数并不是真正的平均值，而是平均值在未经审查的数据集中的位置，其右尾的密度“形状”与您的数据相同。（这实际上是一个统计问题，而不是 R 问题。）

您可以在 Wikipedia 文章的时刻部分找到计算双重截断 Normal 的期望值的公式： [http](http://en.wikipedia.org/wiki/Truncated_normal_distribution) ://en.wikipedia.org/wiki/Truncated_normal_distribution它很容易转化为对`pnorm`和的调用`qnorm`。

进一步思考：查看在包中处理截断分布的工具：“gamlss”和“gamlss.tr”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-24T21:36:56.837

您可以使用此脚本的部分来估计参数

```
rm(list=ls(all=TRUE))

dtnorm<- function(x, mean, sd, a, b) {
dnorm(x, mean, sd)/(pnorm(b, mean, sd)-pnorm(a, mean, sd))
}

simuls=5
simul_mat=matrix(nrow=simuls,ncol=6)
for(simul in 1:simuls) {
acm=rnorm(1)
acsd=runif(1)*2+0.5
limits=sort(acm+rnorm(2))

all=limits[1]
aul=limits[2]

x=rnorm(10000)*acsd+acm
x=subset(x,x>all & x<aul)

    norm_parms<-function(parms){
    mp=parms[1]
    sdp=parms[2]^2
    ll=median(x)-parms[3]^2
    ul=median(x)+parms[4]^2

    xs=subset(x,x>ll & x<ul)
    ds=dtnorm(xs,mp,sdp,ll,ul)

    if(length(x)>5){
    do=rep(dnorm(-6),length(x)-length(xs))
    ds=c(ds,do)
    }
    if(length(x)<=5){
    ds=rep(dnorm(-9),length(x))
    }

    mll=-sum(log(ds))
    return(mll)
    }

bestv=Inf
methodss=c("Nelder-Mead", "BFGS", "CG", "L-BFGS-B", "SANN")
for(method in methodss){
try(bestc<-optim(par=c(0,1,1,1),norm_parms,method=method))
if(bestc$value<bestv) {best=bestc;bestv=bestc$value}
}

parms=best$par
mp=parms[1]
sdp=parms[2]^2
ll=median(x)-parms[3]^2
ul=median(x)+parms[4]^2
print(c(acm,acsd,all,aul))
print(c(mp,sdp,ll,ul))
print(best$value)
acparms=c(acm,acsd,sqrt(median(x)-all),sqrt(aul-median(x)))
acv=norm_parms(acparms) 
cnames=c("Actual a","Estimated a","Actual b","Estimated b","Actual optim","Best optim`")
simul_mat[simul,]=c(all,ll,aul,ul,best$value,acv)

cnames=c("Actual a","Estimated a","Actual b","Estimated b","Actual optim","Best optim`")
colnames(simul_mat)=cnames
print(simul_mat)

} 
```

# sql - 如何存储大于 varchar(max) 的字符串 var？

> ID：12097670
> 
> 赞同：22
> 
> 时间：2012-08-23T18:11:02.827
> 
> 标签：sql, sql-server-2005, max, varchar, string-concatenation

我正在尝试这样做：

```
DECLARE @myVar VARCHAR(MAX)
Loop with cursor
select @myVar = @myVar + bla bla bla
end loop 
```

当循环结束时，@myVar 不完整，仅包含 8000 个字符。

我尝试使用文本，但不允许使用本地变量。

这个案子有什么好的解决办法？

xml变量？

我刚刚看过这个帖子：

[如何在 SQL Server 2000 中传递大于 varchar(8000) 的字符串参数？](https://stackoverflow.com/questions/284610/how-do-i-pass-a-string-parameter-greater-than-varchar8000-in-sql-server-2000)

[检查连接到 varchar(max) 是否会超出最大允许字符数](https://stackoverflow.com/questions/2975165/check-if-concatenating-to-a-varcharmax-will-go-beyond-max-allowable-characters)

和其他人通过网络。

问候。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-08-23T18:18:53.090

说真的 -`VARCHAR(MAX)`最多可以存储 2 GB 的数据 - 而不仅仅是 8000 个字符......

试试这个：

```
DECLARE @myVar VARCHAR(MAX) = ''

DECLARE @ix INT = 1

WHILE @ix < 1000
BEGIN
    set @myVar = @myVar + CAST('bla bla bla' AS VARCHAR(MAX))
    SET @ix = @ix + 1
END

SELECT DATALENGTH(@myvar) 
```

这将在 1000 次迭代后返回大于 8000 个字符**的值。**

The point is: if you're using `varchar(max)`, you need to make sure to always **cast** all your strings to `varchar(max)` explicitly - as I did in this example. Otherwise, SQL Server will fall back to "regular" `varchar` processing, and that's indeed limited to 8000 characters....

# java - 使用并发哈希图

> ID：12097671
> 
> 赞同：0
> 
> 时间：2012-08-23T18:11:06.617
> 
> 标签：java, hashmap, concurrenthashmap

我想知道是否可以访问在以下代码中迭代 hashmap 后获得的值（我知道它们存储在 map 中但想在循环外使用它们）。键和对应的值在循环内迭代。并发哈希图可以帮助我获取值并在循环外使用它们。

谢谢你。

```
 public static void main(String[] args) {
    Map<String, List<String>> maleMap = new LinkedHashMap<String,  List<String>>();
Map<String, List<String>> femaleMap = new LinkedHashMap<String, List<String>>();
    try {

Scanner scanner = new Scanner(new FileReader(.txt));

        while (scanner.hasNextLine()) {
            String nextLine = scanner.nextLine();
            String[] column = nextLine.split(":");
            if (column[0].equals("male") && (column.length == 4)) {
                maleMap.put(column[1],
                Arrays.asList(column[2], column[3]));
        } else if (column[0].equals("female") && (column.length == 4)) {
        femaleMap.put(column[1],
                    Arrays.asList(column[2], column[3]));
            }
        }
        Set<Entry<String, List<String>>> entries = maleMap.entrySet();
        Iterator<Entry<String, List<String>>> entryIter = entries
                .iterator();
        while (entryIter.hasNext()) {
            Map.Entry entry = (Map.Entry) entryIter.next();
            Object key = entry.getKey(); // Get the key from the entry.

            List<String> value = (List<String>) entry.getValue();
            Object value1 = " ";
            Object value2 = " ";
            int counter = 0;
            for (Object listItem : (List) value) {
                Writer writer = null;
                Object Name = key;
                Object Age = null;
                Object ID = null;
                if (counter == 0) {// first pass assign value to value1
                    value1 = listItem;
                    counter++;// increment for next pass
                } else if (counter == 1) {// second pass assign value to
                                            // value2
                    value2 = listItem;
                    counter++;// so we dont keep re-assigning listItem for
                                // further iterations
                }
            }
            System.out.println(key + ":" + value1 + "," + value2);
            scanner.close();
            Writer writer = null;
            Object Name = key;
            Object Age = value1;
            Object ID = value2;

            try {
                String filename = ".txt";
            FileWriter fw = new FileWriter(filename, true); 

 fw.write("# Table" +  Name + "\n" + "map:"+ Name + " a d2rq:ClassMap;" + "\n"
 + "    dataStorage map:database;" + "\n"+ "Pattern " +"\""+ Name + "/@@"+ Age +    
 "." + ID + "@@\";" + "\n"+ "   class :" + Name +";"+"\n"+ "     ."+"\n");// 
                fw.close();
            } catch (Exception e) {
                e.printStackTrace();
            }

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T18:14:00.247

`ConcurrentHashMap`被设计为线程安全的。
如果您不使用多个线程，那比没用还糟糕。

你应该只使用一个`MultiMap`.

您*始终*可以访问循环外的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-30T07:20:14.837

ConcorrentHashMap 是故障安全的。它不会给出任何并发修改异常。它适用于多线程操作。ConcurrentHashMap 的整个实现与 HashMap 相同，但在检索元素时，HashMap 会锁定整个映射，限制进行进一步修改，从而导致并发修改异常。但是在 ConcurrentHashMap 中，锁定发生在存储桶级别，因此不存在并发修改异常的机会。

# c# - 正则表达式：仅替换非嵌套匹配

> ID：12097672
> 
> 赞同：0
> 
> 时间：2012-08-23T18:11:09.177
> 
> 标签：c#, .net, regex

给定文本，例如：

```
This is my [position].
Here are some items:
[items]
    [item]
         Position within the item: [position]
    [/item]
[/items]

Once again, my [position]. 
```

我需要匹配 first 和 last `[position]`，但*不是*[position] inside `[items]...[/items]`。这对正则表达式可行吗？到目前为止，我所拥有的是：

```
Regex.Replace(input, @"\[position\]", "replacement value") 
```

但这取代了我想要的更多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T20:27:20.707

正如 Wug 所提到的，正则表达式不擅长计数。一个更简单的选择是只找到您正在寻找的所有令牌的位置，然后遍历它们并相应地构造您的输出。也许是这样的：

```
public string Replace(input, replacement)
{
    // find all the tags
    var regex = new Regex("(\[(?:position|/?item)\])");
    var matches = regex.Matches(input);

    // loop through the tags and build up the output string
    var builder = new StringBuilder();
    int lastIndex = 0;
    int nestingLevel = 0;
    foreach(var match in matches)
    {
        // append everything since the last tag;
        builder.Append(input.Substring(lastIndex, (match.Index - lastIndex) + 1));

        switch(match.Value)
        {
            case "[item]":
                nestingLevel++;
                builder.Append(match.Value);
                break;
            case "[/item]":
                nestingLevel--;
                builder.Append(match.Value);
                break;
            case "[position]":
                // Append the replacement text if we're outside of any [item]/[/item] pairs
                // Otherwise append the tag
                builder.Append(nestingLevel == 0 ? replacement : match.Value);
                break;
        }
        lastIndex = match.Index + match.Length;
    }

    builder.Append(input.Substring(lastIndex));
    return builder.ToString();
} 
```

（免责声明：尚未测试。甚至尝试编译。为不可避免的错误提前道歉。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T18:18:37.733

你可能会逃脱：

```
Regex.Replace(input,@"(?=\[position\])(!(\[item\].+\[position\].+\[/item\]))","replacement value"); 
```

我不知道，我讨厌这样的人。但这是 xml 解析的工作，而不是正则表达式。如果你的括号真的是括号，只需搜索并用胡萝卜替换它们，然后 xml 解析。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T20:02:37.263

如果你检查它两次怎么办。像，

```
s1 = Regex.Replace(input, @"(\[items\])(\w|\W)*(\[\/items\])", "") 
```

这将为您提供：

```
This is my [position].
Here are some items:
Once again, my [position]. 
```

如您所见，项目部分已被提取。然后在 s1 你可以提取你想要的位置。像，

```
s2 = Regex.Replace(s1, @"\[position\]", "raplacement_value") 
```

这可能不是最好的解决方案。我非常努力地在正则表达式上解决它，但没有成功。

# ruby-on-rails - rails devise - 如何为两个不同的用户模型进行 2 个设计身份验证？

> ID：12097673
> 
> 赞同：1
> 
> 时间：2012-08-23T18:11:10.377
> 
> 标签：ruby-on-rails, authentication, devise, token, cancan

我们有 admin_users 和普通用户，他们都有单独的表、模型和设计登录。

仅对一个用户表使用设计并使用 cancan 作为角色可能更有意义，但该应用程序已使用两个单独的用户表创建，此时无法更改它们。

管理员用户功能（包括登录）工作正常。最初标准用户访问仅通过基于链接和令牌的身份验证，但需要更改。

在我们有的路线中

```
devise_for :admin_users, ActiveAdmin::Devise.config  
devise_for :users
resources :users, :only => [:update, :edit] 
```

所以我添加了用户资源的根路径，如设计文档所示，作为成功登录的位置：

```
devise_for :admin_users, ActiveAdmin::Devise.config  
devise_for :users
resources :users, :only => [:update, :edit] do
  root to: "practitioner_activities#welcome"
end 
```

然后我也尝试删除`only =>`例如

```
devise_for :admin_users, ActiveAdmin::Devise.config  
devise_for :users
resources :users do
  root to: "practitioner_activities#welcome"
end 
```

对于（常规）用户模型，我更改了：

```
devise :token_authenticatable, 
```

还有：

```
devise :token_authenticatable, # token login still permitted.  
       :database_authenticatable, :recoverable, :rememberable, 
       :trackable, :validatable
       # Not sure if these will make a difference but they are like this in other apps. 
```

但不是重定向到从业者活动#welcome，而是将用户发送回登录屏幕。

我注意到控制台中为登录 POST 记录的第一行使用的是 AdminUser 模型，而不是 User 模型。知道如何解决吗？

```
Started POST "/" for 127.0.0.1 at 2012-08-23 13:54:50 -0400
Processing by HelpController#show as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"28iGxAB+URoIKoBQtPizGAosJoZ/V7Vko1w/bYMvesE=", "new_user_session_path"=>{"email"=>"Borger.Cathy@meridianschools.o
rg", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Sign In"}
  AdminUser Load (0.4ms)  SELECT "admin_users".* FROM "admin_users" WHERE "admin_users"."id" = 1 LIMIT 1 
```

登录表单本身是：

```
= semantic_form_for(:new_user_session_path, 
  :html => {:id => "session_new"}) do|f| 

      = f.inputs do
        = f.input :email, :label => "Username"
        = f.input :password
        = f.input :remember_me, :as => :boolean, :if =>  false  
        = f.commit_button "Sign In" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T00:37:11.250

最后，主要的事情是再次设计生成器，然后编辑设计视图。

# ruby-on-rails - 使用 lambdas 创建灵活的 ruby DSL

> ID：12097674
> 
> 赞同：0
> 
> 时间：2012-08-23T18:11:12.730
> 
> 标签：ruby-on-rails, ruby, metaprogramming

我正在尝试创建一个灵活的 dsl。我已经有了 DSL 模块，比如说`module DSL`。DSL 用户可以将其作为一个类创建衍生产品。DSL 的要点是允许用户`Feature`使用自定义渲染方法创建对象。有很多丑陋且非 DRY 的代码支持 . `Feature`，因此是抽象的，但是用户需要对该功能的呈现方式进行大量控制，而我的元编程无法胜任这项任务。让我告诉你它是如何设置的。

DSL 看起来像这样：

```
module DSL
  module ClassMethods
      attr_accessor :features
      def column(name, *args)
        arguments = args.pop || {}
        self.features = [] if self.features.nil?
        self.features << Feature.new(name, arguments)
      end
    end
    def self.included(base)
      base.extend ClassMethods
    end
  end
end 
```

它的实现看起来像这样：

```
class DSLSpinOff
  include DSL

  feature :one
  feature :two, render_with: :predefined_render
  feature :three, render_with: :user_defined_render
  feature :four, render_with: lambda {
    puts "Go nuts, user!"
    puts "Do as you please!"
  }

  def user_defined_render
    #...
  end
end 
```

最后，要素类本身位于 DSL 中，如下所示：

```
module DSL
  #...
private
  class Feature
    attr_accessor :name, :render_with
    def initialize(name, *args)
      self.name = name
      attributes = args.pop || {}
      # somehow delegate attributes[:render_with] to the render function, handling defaults, lamdbas, function string names, etc
      self.render_with = attributes.fetch(:render_with, :default_render)
    end

  private
    def default_render
      #...
    end

    def predefined_render
      #...
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T18:11:12.730

我一直在寻找的魔法：`define_singleton_method`。

```
module DSL
  #...
private
  class Feature
    attr_accessor :name
    def initialize(name, args)
      #...
      define_singleton_method :render do
        if self.render_with.kind_of? Symbol
          content = self.send(self.render_with)
        else
          content = self.render_with.call
        end
        content.present? ? content.to_s.html_safe : '&ndash;'
      end
    end
  end
end 
```

现在在 DSL 中，我可以遍历所有功能并渲染它们。它会发送自己`:default_render`或其他人`:predefined_render`，或使用提供的块代替。但是，这不允许用户在内部定义方法`DSLSpinOff`并将它们传递进来，因为这些方法将被委托给`DSLSpinOff`类而不是`DSLSpinOff::Column`类。

我怀疑他们将不得不做类似的事情：

```
feature :three, render_with: self.method(:user_defined_render)
def user_defined_render
  #...
end 
```

## 编辑：

我找到了一种允许使用默认方法、用户定义的 lambda、预定义的方法和用户定义的方法的干净方法：

```
module DSL
  #...
  class Feature
    attr_accessor :name, render_with
    def initialize(name, *args)
      self.name = name
      self.render_with = args.has_key?(:render_with) ? args[:render_with] : :default_render
      define_singleton_method :render do |object|
        render_method = self.render_with.is_a?(Proc) ? renderer : method(renderer) 
        render_method.call
      end
    end

  private
    def default_render
      #...
    end

    def predefined_render
      #...
    end
  end
end 
```

如果用户传入 lambdas 或 procs，这将获取它们，否则，它将使用该`method`方法返回对在`Feature`. 该`call`方法适用于所有三个。

要支持用户定义的渲染方法，只需在初始化程序中打开类以使其可被`method`方法找到：

```
#initializers/custom_dsl_renders.rb
class DSL::Feature
  def user_defined_render
    #...
  end
end 
```

# c# - 如何根据页面名称而不是asp.net中的查询字符串更改内容

> ID：12097679
> 
> 赞同：2
> 
> 时间：2012-08-23T18:11:37.743
> 
> 标签：c#, asp.net, iis

我有一个网站，我们使用的是 ASP.NET 4.0，现在我们的产品内容是这样管理的

```
www.franko1.com/products.aspx?serie=2000 
```

其中查询字符串**系列**是产品 ID，因此取其值，然后从数据库中提取内容。

现在出于 SEO 的原因，我们被要求更改网址，所以现在它们必须看起来像这样：

```
What the boss want                    | Current Urls
--------------------------------------------------------------------------------
www.franko1.com/Relief_Valves         | www.franko1.com/products.aspx?serie=2000
www.franko1.com/Inline_Flame_Arrester | www.franko1.com/products.aspx?serie=1000
www.franko1.com/Vent_Hatch            | www.franko1.com/products.aspx?serie=3000 
```

等等 ...

现在，我们正在使用母版页和 products.aspx，正如我所说，我们采用查询字符串系列并根据其值显示内容，我不知道如何使用 asp.net 来做到这一点，我已经阅读过**ISAPI_Rewrite**但我想知道是否有一种技术可以在不处理 IIS 服务器的情况下解决这个问题......

嗯，我不知道我是否清楚，这很难解释，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T18:21:54.577

没必要。[您可以通过路由](http://www.4guysfromrolla.com/articles/012710-1.aspx)来实现这一点（它不仅适用于 MVC）。

路由作为独立模块已经有一段时间了，但是有了 ASP.Net 4.0，您现在可以像使用 MVC 一样轻松地为 WebForms 使用路由。

您需要向 Global.asax 添加一些路由

```
public class Global : System.Web.HttpApplication
{

    protected void Application_Start(object sender, EventArgs e)
    {
        RegisterRoutes(RouteTable.Routes);
    }

    public static void RegisterRoutes(RouteCollection routeCollection)
    {
        routeCollection.MapPageRoute("Products", "Products/{Name}", "~/Products.aspx");
    }

} 
```

有了它，您现在可以像这样引用页面中的路由值：

```
protected void Page_Load(object sender, EventArgs e)
{
    string prodName = Page.RouteData.Values["Name"].ToString();

    //Do lookup, etc...
} 
```

您的网址最终将如下所示：

> www.domain.com/products/Relief_Valve
> www.domain.com/products/Widgets
> www.domain.com/products/TrashCans

ETC..

又好又容易……而且干净！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T18:22:52.393

URL 重写正是为了这个目的。问题是它确实不适用于直接附加到根 URL 的变量内容。对于 URL 路由，确实没有足够的信息将这些 URL 与您的其余 URL 分开。

你的老板会接受 www.franko1.com/p/Relief_Valve 吗？

# hadoop - Hadoop文件上传过程内部工作原理

> ID：12097681
> 
> 赞同：0
> 
> 时间：2012-08-23T18:11:42.860
> 
> 标签：hadoop, hdfs

我目前遇到了一个问题，当从集群中的任何节点运行客户端时，我可以将文件上传到 HDFS，但在从本地计算机运行客户端时却不能这样做（即使我可以这样做从我的本地客户端运行 ls 之类的东西）。我很确定这是一个端口问题，但较小的问题让我想我想确切地了解当我尝试上传文件时我的客户端计算机、namenode 和 datanodes 之间发生了什么通信。那么，有人可以启发我吗？在什么时候、通过什么端口以及在哪台计算机之间究竟会发生什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T19:22:34.063

这是一个 EC2 问题，无论它们是在 EC2 中还是在我们的专用网络上，我都会让 namenode 将 Datanode EC2 私有 IP 返回给所有客户端。这些 ips 显然不适用于 EC2 之外的客户端，因此任何涉及数据节点并受到 EC2 外部攻击的操作都会搞砸。我从来没有找到一个好的解决方案，只是决定暂时让人们从 EC2 内部查询。

# ajax - shareThis 共享计数 API 未在 Ajax 中更新

> ID：12097684
> 
> 赞同：1
> 
> 时间：2012-08-23T18:11:56.863
> 
> 标签：ajax, sharethis

我在页面上重复使用 ShareThis 的 Share Count API Javascript 调用来获取页面上列出的每个故事的共享计数。在我的 <head> 我有：

<script type="text/javascript" src="http://w.sharethis.com/button/buttons.js"></script> <script type="text/javascript">stLight.options({publisher: 'MY PUB KEY',onhover:false, newOrZero:"zero"});</script>

在正文中，在故事链接的每个实例中（[storyID] 是一个唯一的多位数字）：

<span id="shareCount[storyID]"></span> <script type="text/javascript">stButtons.getCount("story URL","sharethis",document.getElementById('shareCount[same storyID]') );</script>

当页面加载时，API 调用运行并且共享计数正常。但是，带有故事列表的页面部分会定期使用 Ajax 进行更新。API 调用再次运行并返回计数，但它们与页面首次加载时返回的计数相同，它们尚未更新以匹配每个故事的实际计数。

Ajax 替换了整个 HTML 块。如果 stButtons.getCount() 函数没有运行，它根本不会返回任何计数。

任何人有任何想法为什么或如何克服？

# javascript - Cognos Report Studio：HTML 标记问题

> ID：12097686
> 
> 赞同：1
> 
> 时间：2012-08-23T18:11:58.977
> 
> 标签：javascript, html, cognos, cognos-8

我正在使用 cognos report studio，但在提示页面上出现错误。我让我的编码工作正常（我在一个空白页上对其进行了测试），但我注意到左下角有一个黄色的解释点，这不允许我继续我正在尝试做的事情。![在此处输入图像描述](../Images/17e37cb8e5c5de657f8b303b1a0a24bf.png)

这是一个屏幕截图：

该错误似乎来自提示页面中的我的 html 标记。

这是我的编码：

```
<script type="text/javascript"> 
var theSpan = document.getElementById("FiscalYear"); 
var theSelect = theSpan.getElementsByTagName("select"); 
theSelect[0].options[2].selected=true; //This will make default value in prompt to be the first item after line, change the value '2' for other item 
theSelect[0].options[0].text = 'Fiscal Year'; 
listBoxBusinessDate.checkData(); 

</script> 
```

我的错误应该来自那里，我只是不知道为什么。关于它可能是什么的任何想法？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T19:12:40.490

这是一个 JavaScript 错误。您尝试使用“listBoxBusinessDate”的变量为空/未定义，因此当您尝试对其调用方法（.checkData()）时，您会收到此错误。

这个变量在哪里定义（它不在您提供的片段中，但可以在文件的前面定义）......？

# php - 为 .html 页面（没有服务器端脚本）提供 .php 扩展名是否有缺点？

> ID：12097690
> 
> 赞同：2
> 
> 时间：2012-08-23T18:12:17.550
> 
> 标签：php, html, web-applications, file-extension

使用 .php 作为文件扩展名允许所有 HTML、CSS、JS 和 PHP 内容等，而 .html 不允许服务器端引擎读取 PHP 代码。

根据经验，即使我的文件中没有 PHP 代码，我也只使用 .php。

所以...有没有时候，出于某种原因，一个人应该专门使用 .html ？也许搜索引擎对文件的索引不同/更好，或者加载速度更快或其他什么？但到目前为止，我认为没有理由这样做，即使文件没有 PHP 内容。

显然没有人理解这个问题：

如果我在没有 PHP 内容的情况下将文件另存为 .html 而不是 .php，这有什么不同*吗*？不应该有什么区别吗？当使用不同的扩展名保存时，该文件显然是不同的实体。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T18:32:42.907

当您为纯 HTML 文件提供 .php 扩展名时，它会导致 PHP 引擎解析它。虽然性能损失可以忽略不计，但它仍然是不必要的资源浪费，最佳做法是通过为非 php 页面提供 html 扩展名来避免这种情况。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-23T18:18:36.507

希望这能解决这个棘手的问题。

PHP = 服务器端语言，意味着服务器使用了额外的资源。

HTML = 客户端语言，仅由浏览器显示。

# android - 尝试读取 vCard 联系人数据时，Android 读取失败异常

> ID：12097692
> 
> 赞同：0
> 
> 时间：2012-08-23T18:12:19.670
> 
> 标签：android, ioexception, vcf-vcard, fileoutputstream, ioerror

我正在尝试使用以下代码将我的联系人导出为 vCard 格式：

（在这里找到：[http](http://androidcodeexamples.blogspot.in/2012/06/export-contacts-as-vcf-file-in-android.html) ://androidcodeexamples.blogspot.in/2012/06/export-contacts-as-vcf-file-in-android.html ）

```
Cursor phones = mContext.getContentResolver().query(
        ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null,
                              null, null, null);
        phones.moveToFirst();
        for (int i = 0; i < phones.getCount(); i++) {
               String lookupKey = phones.getString(phones
                       .getColumnIndex(ContactsContract.Contacts.LOOKUP_KEY));
               Uri uri = Uri.withAppendedPath(
               ContactsContract.Contacts.CONTENT_VCARD_URI,
                                             lookupKey);
               AssetFileDescriptor fd;
               try {
                       fd = mContext.getContentResolver().openAssetFileDescriptor(uri, "r");
                       FileInputStream fis = fd.createInputStream();
                       byte[] buf = new byte[(int) fd.getDeclaredLength()];
                       fis.read(buf);
                       String VCard = new String(buf);
                       String path = Environment.getExternalStorageDirectory()
                                .toString() + File.separator + vfile;
                       FileOutputStream mFileOutputStream = new FileOutputStream(path,
                                 true);
                       mFileOutputStream.write(VCard.toString().getBytes());
                       phones.moveToNext();
                       Log.d("Vcard", VCard);
               } catch (Exception e1) {
                       // TODO Auto-generated catch block
                       e1.printStackTrace();
               }
        } 
```

但是我认为是由 fis.read(buf) 引起的异常。

例外是：“读取失败：EINVAL（无效参数）。”

有人能帮助我吗？

谢谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:51:22.890

```
package com.example.temp;

  import java.io.File;
  import java.io.FileDescriptor;
  import java.io.FileInputStream;
  import java.io.FileOutputStream;
  import java.io.InputStream;
  import java.util.ArrayList;

  import android.app.Activity;
  import android.content.Context;
  import android.content.res.AssetFileDescriptor;
  import android.database.Cursor;
  import android.net.Uri;
  import android.os.Bundle;
  import android.os.Environment;
  import android.provider.ContactsContract;
  import android.util.Log;

  public class MainActivity extends Activity {
Cursor cursor;
ArrayList<String> vCard;
String vfile;
static Context mContext;

@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        mContext = MainActivity.this;
        getVCF();
    }

    public static void getVCF() {
        final String vfile = "POContactsRestore.vcf";
        Cursor phones = mContext.getContentResolver().query(
        ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, null, null, null);
        phones.moveToFirst();
        for (int i = 0; i < phones.getCount(); i++) {
            String lookupKey = phones.getString(phones.getColumnIndex(ContactsContract.Contacts.LOOKUP_KEY));
            Uri uri = Uri.withAppendedPath(ContactsContract.Contacts.CONTENT_VCARD_URI, lookupKey);
            AssetFileDescriptor fd;
            try {
                fd = mContext.getContentResolver().openAssetFileDescriptor(uri, "r");
                FileDescriptor fdd = fd.getFileDescriptor();
                InputStream in = new FileInputStream(fdd);
                //FileInputStream fis = fd.createInputStream();
                Log.d("BLA BLA", "Len is :: " + (int) fd.getDeclaredLength());
                byte[] buf = new byte[(int) fd.getDeclaredLength()];
                in.read(buf);
                fd.close();
                String VCard = new String(buf);
                String path = Environment.getExternalStorageDirectory().toString() + File.separator + vfile;
                FileOutputStream mFileOutputStream = new FileOutputStream(path, true);
                mFileOutputStream.write(VCard.toString().getBytes());
                mFileOutputStream.close();
                in.close();
                phones.moveToNext();
                Log.d("Vcard", VCard);

            } catch (Exception e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T21:46:18.907

我刚刚看到了相同的行为（尝试使用 Android 4.0.3 和 4.1.2 的模拟器）。它在真实设备上运行良好，在模拟器上不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-14T15:22:20.027

我有同样的例外，但在真实的设备上。问题是一位联系人的电子邮件类型未定义

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T22:49:29.123

如果 AssetFileDescriptor 未使用长度初始化，则[getDeclaredLength返回 -1。](http://developer.android.com/reference/android/content/res/AssetFileDescriptor.html#getDeclaredLength%28%29)在这种情况下，
您最好使用[getStatSize() 。](http://developer.android.com/reference/android/os/ParcelFileDescriptor.html#getStatSize%28%29)

# c++ - 透视投影中的 3D 场景平移 (OpenGL)

> ID：12097693
> 
> 赞同：12
> 
> 时间：2012-08-23T18:12:23.670
> 
> 标签：c++, opengl, renderer

我设计了一个 C++ 类，将用户从轨迹球旋转、缩放和平移中抽象出来。我已经按预期进行了旋转（使用轨迹球）和缩放。但是，平移的行为与预期不同。当我选择一个点并拖动时，我希望在完成拖动时，选择的点继续在鼠标下方。我对透视投影中平移的理解如下。目标和摄像机位置都会受到平移操作的影响。摄像机目标和摄像机位置（眼睛）应与拖动成比例平移。比例（可能不是恒定的）应基于 z 深度。

平移在正交投影中是直截了当的，但在透视方面存在问题。如果有人能解释**OpenGL 的数学和实现细节，**那将会很有用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-23T19:38:33.917

我不知道 OpenGL 的细节，但如果我正确理解了你的问题，我可以帮助解决数学问题：

我假设您已经选择了该对象，方法是单击该对象，从而通过您的场景“发送”一条射线，该射线在锚点*p*中击中您的对象。

要了解以下内容：

![使用透视投影平移](../Images/18386b50958506b902530102eed1486c.png)

*现在你沿着向量t*拖动鼠标。使用截距定理，您可以轻松计算向量*s*，通过该向量*p*必须转换为“将其保持在光标下”：

|p| / |q| = |s| / |t|

|s| = ( |p| / |q| ) * |t|

s 与 t 平行，所以它是 t 归一化乘以 |s|：

s = t / |t| * |s|

s = t / |t| * ( |p| / |q| ) * |t|

s = t * ( |p| / |q| )

如果您正在平移，您正在做完全相同的事情，只是您没有将*p*移动*s*，但您必须将整个场景平移*-s*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-19T06:51:03.863

在你的鼠标下不可能有终点。透视模式下的平移可以通过两种方式完成。一个是平移相机，另一个是旋转相机。平移相机将导致对象旋转以供用户查看。用于平移的旋转相机有两个约束。一种是不改变相机位置，另一种是停止相对于相机方向的旋转。即，旋转轴应平行于相机右和上矢量形成的平面。

# mysql - MySQL 复制失败并出现错误“无法解析中继日志事件条目”。

> ID：12097696
> 
> 赞同：13
> 
> 时间：2012-08-23T18:12:39.613
> 
> 标签：mysql, database-replication, master-slave, mysqlbinlog

我已经在谷歌彻底搜索了一个明确的解决方案或一组步骤来解决这个问题，但似乎没有很多高质量的结果，我也没有找到堆栈溢出的问题。我们正在尝试使用一个从属设备来设置 MySQL 复制。从站似乎复制正常，然后出现以下错误：

> 无法解析中继日志事件条目。可能的原因是：主服务器的二进制日志已损坏（您可以通过在二进制日志上运行“mysqlbinlog”来检查），从服务器的中继日志已损坏（您可以通过在中继日志上运行“mysqlbinlog”来检查），a网络问题，或者主从的 MySQL 代码中的错误。如果你想检查主服务器的二进制日志或从服务器的中继日志，你可以通过在这个从服务器上发出“SHOW SLAVE STATUS”来知道它们的名字。

为了使大量在搜索中不可避免地偶然发现这个问题的人受益，如果回复的人概述了可能出现的问题以及解决此问题应采取的步骤，这将是有帮助的，但我会还在下面提供与我的特殊情况相关的更多详细信息，希望有人可以帮助我解决它。

* * *

我们导入到从属服务器以启动它的转储是在主服务器上使用以下命令创建的：

```
mysqldump --opt --allow-keywords -q -uroot -ppassword dbname > E:\Backups\dbname.sql 
```

执行此备份的脚本还会记录 master 的当前二进制日志位置。然后我们采取以下步骤在从属设备上开始复制：

```
1\. STOP SLAVE;
2\. DROP DATABASE dbname;
3\. SOURCE dbname.sql;
    (... waited a few hours for the 10gb dump to import)
4\. RESET SLAVE;
5\. CHANGE MASTER TO MASTER_HOST='[masterhostname]', MASTER_USER='[slaveusername]', MASTER_PASSWORD='[slaveuserpassword]', MASTER_PORT=[port], MASTER_LOG_FILE='[masterlogfile]', MASTER_LOG_POS=[masterlogposition];
6\. START SLAVE; 
```

经过大约一天的复制工作正常后，它在凌晨 3:43 再次失败。MySQL错误日志中出现的第一件事就是上面的错误。然后另一个通用错误出现在相同的时间戳之后：

```
Error running query, slave SQL thread aborted. Fix the problem, and restart the slave SQL thread with "SLAVE START". We stopped at log '[masterlogfile]' position [masterlogpos] 
```

有关更多日志记录信息，我设置了一个批处理脚本来每小时运行“SHOW SLAVE STATUS”和“SHOW FULL PROCESSLIST”。以下是失败前后的结果：

```
--Monitoring: 3:00:00.15 

Slave Status: 
*************************** 1\. row ***************************
             Slave_IO_State: Waiting for master to send event
                Master_Host: 192.168.xxx.xxx
                Master_User: slave_user
                Master_Port: xxxx
              Connect_Retry: 60
            Master_Log_File: mysql-bin.000xxx
        Read_Master_Log_Pos: 316611912
             Relay_Log_File: dbname-relay-bin.00000x
              Relay_Log_Pos: 404287513
      Relay_Master_Log_File: mysql-bin.000xxx
           Slave_IO_Running: Yes
          Slave_SQL_Running: Yes
            Replicate_Do_DB: dbname
        Replicate_Ignore_DB: 
         Replicate_Do_Table: 
     Replicate_Ignore_Table: 
    Replicate_Wild_Do_Table: 
Replicate_Wild_Ignore_Table: 
                 Last_Errno: 0
                 Last_Error: 
               Skip_Counter: 0
        Exec_Master_Log_Pos: 316611912
            Relay_Log_Space: 404287513
            Until_Condition: None
             Until_Log_File: 
              Until_Log_Pos: 0
         Master_SSL_Allowed: No
         Master_SSL_CA_File: 
         Master_SSL_CA_Path: 
            Master_SSL_Cert: 
          Master_SSL_Cipher: 
             Master_SSL_Key: 
      Seconds_Behind_Master: 0

*************************** 1\. row ***************************
     Id: 98
   User: system user
   Host: 
     db: NULL
Command: Connect
   Time: 60547
  State: Waiting for master to send event
   Info: NULL
*************************** 2\. row ***************************
     Id: 99
   User: system user
   Host: 
     db: NULL
Command: Connect
   Time: 5
  State: Has read all relay log; waiting for the slave I/O thread to update it
   Info: NULL
*************************** 3\. row ***************************
     Id: 119
   User: root
   Host: localhost:xxxx
     db: NULL
Command: Query
   Time: 0
  State: NULL
   Info: SHOW FULL PROCESSLIST

--Monitoring: 4:00:02.71 

Slave Status: 
*************************** 1\. row ***************************
             Slave_IO_State: Waiting for master to send event
                Master_Host: 192.168.xxx.xxx
                Master_User: slave_user
                Master_Port: xxxx
              Connect_Retry: 60
            Master_Log_File: mysql-bin.000xxx
        Read_Master_Log_Pos: 324365637
             Relay_Log_File: dbname-relay-bin.00000x
              Relay_Log_Pos: 410327741
      Relay_Master_Log_File: mysql-bin.000xxx
           Slave_IO_Running: Yes
          Slave_SQL_Running: No
            Replicate_Do_DB: dbname
        Replicate_Ignore_DB: 
         Replicate_Do_Table: 
     Replicate_Ignore_Table: 
    Replicate_Wild_Do_Table: 
Replicate_Wild_Ignore_Table: 
                 Last_Errno: 0
                 Last_Error: Could not parse relay log event entry. The possible reasons are: the master's binary log is corrupted (you can check this by running 'mysqlbinlog' on the binary log), the slave's relay log is corrupted (you can check this by running 'mysqlbinlog' on the relay log), a network problem, or a bug in the master's or slave's MySQL code. If you want to check the master's binary log or slave's relay log, you will be able to know their names by issuing 'SHOW SLAVE STATUS' on this slave.
               Skip_Counter: 0
        Exec_Master_Log_Pos: 322652140
            Relay_Log_Space: 412041238
            Until_Condition: None
             Until_Log_File: 
              Until_Log_Pos: 0
         Master_SSL_Allowed: No
         Master_SSL_CA_File: 
         Master_SSL_CA_Path: 
            Master_SSL_Cert: 
          Master_SSL_Cipher: 
             Master_SSL_Key: 
      Seconds_Behind_Master: NULL

*************************** 1\. row ***************************
     Id: 98
   User: system user
   Host: 
     db: NULL
Command: Connect
   Time: 64149
  State: Waiting for master to send event
   Info: NULL
*************************** 2\. row ***************************
     Id: 122
   User: root
   Host: localhost:3029
     db: NULL
Command: Query
   Time: 0
  State: NULL
   Info: SHOW FULL PROCESSLIST 
```

我尝试按照错误中的说明在从属的中继日志上运行 mysqlbinlog，之前使用 start_position 数千条语句，在故障点之后使用 stop_position 数千条语句，并将输出重定向到文本文件。我在命令行或日志文件中没有看到任何损坏错误。这是日志文件在故障点周围所说的内容：

```
...
# at 410327570
#120816 3:43:26 server id 1 log_pos 322651969    Intvar
SET INSERT_ID=3842697;
# at 410327598
#120816 3:43:26 server id 1 log_pos 322651997    Query    thread_id=762340    exec_time=0   error_code=0
SET TIMESTAMP=1345113806
insert into LOGTABLENAME (UpdateDate, Description) values (now(), "Invalid floating point operation");
# at 410327741
#120816 3:44:26 server id 1 log_pos 322754486    Intvar
SET INSERT_ID=3842701;
# at 410327769
#120816 3:43:26 server id 1 log_pos 322754514    Query    thread_id=762340    exec_time=0   error_code=0
SET TIMESTAMP=1345113866;
insert into LOGTABLENAME (UpdateDate, Description) values (now(), "Invalid floating point operation");
# at 410327912
... 
```

有趣的是，它当时正在记录一个无效的浮点操作，但我不确定这会如何导致复制在该位置中断。我在上面的 SHOW SLAVE STATUS 中找到的 master 的二进制日志上运行了 mysqlbinlog，并且在命令行上没有看到任何错误（但没有机会打开生成的 100mb 日志文件，因为我不想陷入困境关闭生产服务器）。

所以现在我不知道还有什么可以尝试的。我基本上只是在寻找关于可能出了什么问题的任何见解或关于下一步采取什么步骤的任何建议。谢谢！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-21T12:15:30.907

我不确定根本原因可能是什么。但是要从这种情况中恢复过来，您需要指示 MySQL 清除以下点之外的所有中继箱日志

*   Relay_Master_Log_File: mysql-bin.000xxx
*   Exec_Master_Log_Pos：322652140

通过执行以下操作：

`STOP SLAVE; CHANGE MASTER TO MASTER_LOG_FILE = 'mysql-bin.000xxx', MASTER_LOG_POS = 322652140; START SLAVE;`

**注意：**对于那里的读者，不要被 Relay_Master_Log_File 混淆，它与 Read_Master_Log_Pos 不同。并且不要将 Exec_Master_Log_Pos 与 Read_Master_Log_Pos 混淆。Read_* 是 MySQL 执行的一种预读策略，用于在本地执行复制的实际实现之前从 master 下载复制 bin 日志。

# ruby-on-rails - 访问嵌套属性字段的错误消息

> ID：12097700
> 
> 赞同：7
> 
> 时间：2012-08-23T18:12:52.387
> 
> 标签：ruby-on-rails, ruby-on-rails-3, error-handling, haml, simple-form

我有一个使用 simple_form gem 创建的表单，它使用嵌套属性填充 2 个模型。我想检查是否有任何错误并显示一个新块。但是，我不确定如何正确访问模型`location`属性的错误消息。`Booking`

```
class Booking < ActiveRecord::Base
  belongs_to :customer

  attr_accessible :date_wanted, :location
end 
```

和

```
class Customer < ActiveRecord::Base
  has_many :bookings
  accepts_nested_attributes_for :bookings

  attr_accessible :name, :phone, :bookings_attributes

  validates_presence_of :name, :phone
end 
```

表单视图：

```
simple_form_for @customer, {:html => { :class => "form-horizontal" }} do |f|
  = f.input :name
  = f.input :phone
  = f.simple_fields_for :bookings do |b|
    = b.input :date
    = b.input :location
    - if @customer.errors[:appointments_attributes][:location]
      # insert code if any validation errors for the date field were found
  = f.button :submit 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T18:28:41.163

`b`是表单构建器的一个实例，持有`booking`，因此您可以尝试：

```
# ...
if b.object.errors[:location]
# ... 
```

# php - 串行读取十六进制数据时PHP中的奇怪输出

> ID：12097702
> 
> 赞同：2
> 
> 时间：2012-08-23T18:12:56.807
> 
> 标签：php, linux, arduino, kernel

当我在[PHP](http://en.wikipedia.org/wiki/PHP)中读取十六进制字符时，我得到了这个奇怪的输出，其中 PHP 从 Arduino 序列中获取其数据。

这是输出..

```
ÿ ÿ^A ÿ^A 
```

我编写了一个用户空间应用程序，用于向 Arduino 发送数据。

这是我的用户空间应用程序的示例代码：

```
unsigned char data[2][7] = {{0x01,0x01,0xFF,0x3F,0x00,0x3F,0x08},
                            {0xFF,0x01,0x02,0xFF,0x00,0x2F,0x10}};

fd=open("/dev/ttyS0",O_RDWR | O_NOCTTY);
if(fd<0)
    exit(1);

if (strcmp(argv[1], "go up")==0) {
    write(fd,data[0],8); // What I used to send data to my Arduino..
} 
```

这是我用来从 Arduino 获取数据的示例 PHP 代码：

```
$sCon = $sConnect->SerialConnect("/dev/ttyS0", 9600);
shell_execute("test 'go up'"); //Test is the name of my user space application
usleep(100000)
$data .= fread($sCon, 25);     // Get the data from the Arduino..
$sConnect->SerialClose($sCon); 
```

现在当我运行它时，页面上显示的数据是混乱的：`ÿ ÿ^A ÿ^A`. 我需要检索这些数据：0x01,0x01,0xFF,0x3F,0x00,0x3F,0x08，它将显示在我的网站上..

当我改变这个

```
write(fd,data[0],8);  // Prints `ÿ ÿ^A ÿ^A` 
```

对此

```
write(fd,"010101FF3F003F08",15);  // Prints 010101FF3F003F08 in PHP 
```

然后我可以毫无问题地检索数据...

为什么会这样显示`ÿ ÿ^A ÿ^A`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T18:22:50.313

当您这样做时`write(fd, data[0], 8)`，您正在发送二进制数据流，即编码的字符`0x01`，`0x01`等等，而不是数据的[ASCII](http://en.wikipedia.org/wiki/ASCII)表示。

根据您的目标，您应该将它们作为 ASCII 字符串发送。要在 PHP 中处理它们，这是最简单的方法（但它会损失一半的带宽，每 8 位传输 4 个有用位）。

```
for(int p=0; p<8; p++) { 
    fprintf(fd, "%02x", data[0][p]); 
} 
```

反而

```
write(fd, data[0], 8); 
```

# php - 名称特定 get_meta_tag PHP

> ID：12097715
> 
> 赞同：0
> 
> 时间：2012-08-23T18:14:43.210
> 
> 标签：php, html, get, meta-tags

如何从 php 中的另一个文件中获取特定的元标记？这是我用来创建元标记的代码：`<meta name="thumbnail" content="1.png" />`

这是我在javascript中尝试过的：

```
var x = document.getElementByID('myIdExample').content; 
alert(x); 
```

但是因为元标记在外部页面中，所以我不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T19:01:43.640

`explode()` 如果通过使用替换为`**thumbnail**`您想要使用的标签的名称来修复...

```
$thumbnail = get_meta_tags('http://s0ulp1xel.x10.mx/background-garage/?p=photo&photo=1');
$thumbnail = array_map('trim', explode(',', $thumbnail['**thumbnail**'])); 
```

# php - 加速 php/mysql

> ID：12097716
> 
> 赞同：-2
> 
> 时间：2012-08-23T18:14:44.170
> 
> 标签：php, mysql, memcached, database-performance, query-cache

> **可能重复：**
> [在高负载站点中使用 PHP 的策略](https://stackoverflow.com/questions/24675/tactics-for-using-php-in-a-high-load-site)

我刚来这地方。这是第一次。

我的一个网站（在 php/mysql 中）获得了良好的流量，我也将主机升级到了 VPS。在高峰时段，它每小时有 7-8 个用户和近 5 万个数据库请求。但我仍然在高峰时段遇到性能问题。本站不做数据库交易。它只是为来自 mysql 服务器的移动应用程序提供 xml 提要（单向流量，没有数据来自用户）。现在我和我的主机谈了速度，他们谈了一些事情，我非常需要你的意见-

1.  他们谈到了安装 memcached。只是安装它会解决问题吗？我该如何使用它？因为他们说，好像只要安装它就可以解决问题。
2.  Mysql 查询缓存。我知道如何使用它。会不会提高性能。我的大多数用户都要求 3-4 个结果（70% 的流量）。
3.  由于所有查询都只是选择查询，我该如何优化才能使 mysql 表在获取结果时不被锁定。或者我能从你那里得到的任何其他建议。

非常感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T21:36:04.690

1) Memcached 可以提供帮助，但它会掩盖真正的问题。这就像任何缓存一样工作：临时存储需要资源的过程的结果，如大查询、长算法等。您必须更改应用程序才能使用此缓存系统。

2）查询缓存。在您的情况下，MySQL 查询缓存可能是一个更好的解决方案，如果您的流量读取量很大，这将是有效的。但是关于你的第三个问题，你也有锁定问题，如果你打开查询缓存，你也会有互斥体争用。查询缓存失效是一个昂贵的过程。

3/a) 首先，如果您还没有将存储引擎更改为具有行级锁定的 InnoDB，并且在较新版本的 MySQL 中比 MyISAM 具有更多优化。（尽量使用最新版本）

3/b) 检查表上的索引并使用 EXPLAIN 分析查询。

+) “每小时 7-8 个用户和几乎 50k 的数据库请求”这似乎是 7-8 个用户的大量查询。尝试检查您的数据库架构和应用程序代码。我在 foreach 中看到了类似的查询，这些查询通常可以组合成一个更复杂的查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T18:28:39.573

> 他们谈到了安装 memcached。只是安装它会解决问题吗？我该如何使用它？因为他们说，好像只要安装它就可以解决问题。

它会有所帮助，但不能解决所有问题。但是如果你不知道如何使用它，它对你没有任何帮助。

> Mysql 查询缓存。我知道如何使用它。会不会提高性能。我的大多数用户都要求 3-4 个结果（70% 的流量）。

它将减少查询。但是，如果您想提供实时结果，那将无济于事。

> 由于所有查询都只是选择查询，我该如何优化才能使 mysql 表在获取结果时不被锁定。或者我能从你那里得到的任何其他建议。

*   MyISAM = 表级锁；
*   InnoDB = 行级锁。

使用**[EXPLAIN](http://dev.mysql.com/doc/refman/5.0/en/explain.html)**查看可以优化查询的内容。

有了您提供的详细信息，这就是我能提供的所有帮助。

# ruby-on-rails-3 - 使用 activescaffod 时在 Rails 3.2.6 上使用 I18n 翻译活动记录错误

> ID：12097717
> 
> 赞同：0
> 
> 时间：2012-08-23T18:14:44.157
> 
> 标签：ruby-on-rails-3, activerecord, internationalization, activescaffold

我正在尝试将 I18n 与 activescaffold 一起使用，它在模型转换错误方面工作良好。

但我想翻译这些：

*   “1 个错误禁止保存此 {model}”
*   “以下字段存在问题：”

我的 yml 文件看起来像

```
sk:
 errors:
  template:
    header:
      one:   "1 error prohibited this %{model} from being saved"
      other: "%{count} errors prohibited this %{model} from being saved"
    body:    "There were problems with the following fields:" 
```

activescaffold 形式的结果是：

```
errors.template.header
errors.template.body 
```

运气不好。我知道 'error_messages_for' 已被贬值，而且我还发现我应该更新我的视图......但是使用 activescaffold，我没有使用任何视图，所以我不知道要更新什么来翻译以上行。我安装了dynamic_form gem，但上面也不起作用。

我发现了这篇文章：[rails3 I18n: can't override...](https://stackoverflow.com/questions/3822199/rails3-i18n-cant-override-1-error-prohibited-this-packet-from-being-saved)，但正如我所说，我没有使用任何视图，所以不确定如何在上面覆盖。

非常感谢任何提示。

问候简

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T18:18:44.777

解决方案是查看 activescaffold gem 目录以查看默认 en.yml 的外观。

从那里很明显错误消息应该表示如下：

```
en:
  active_scaffold:
    add: 'Add'
    add_existing: 'Add Existing'
    add_existing_model: 'Add Existing %{model}'
    errors:
      template:
        header:
          one:    "1 error prohibited this %{model} from being saved."
          other:  "%{count} errors prohibited this %{model} from being saved"
        body: "There were problems with the following fields:" 
```

# networking - USB RNDIS 上的嵌入式 Linux 以太网适用于 WinXP 但不适用于 Win7

> ID：12097718
> 
> 赞同：0
> 
> 时间：2012-08-23T18:14:45.933
> 
> 标签：networking, windows-7, usb, embedded-linux, ethernet

我正在使用 Linux 驱动程序 g_ether 通过 USB 与嵌入式 Linux 设备进行以太网通信。包 dnsmasq 在嵌入式设备上运行，并配置为向通过 USB 连接到电路板的任何 PC 提供 DHCP 服务。

这工作得很好，我可以从 Windows（7 和 XP）cmd.exe ping Linux 板。以管理员身份配置防火墙后，我还可以 ping Windows 7：

```
netsh advfirewall firewall add rule name="ICMP Allow incoming V4 echo request" protocol=icmpv4:8,any dir=in action=allow 
```

Windows 7 和 Windows XP 之间的区别在于，当我在 XP 下连接 USB 电缆时，我的常规本地连接和 Internet 仍然可用且处于活动状态。在 Windows 7 下，当我连接 USB 设备时，我失去了本地连接和 Internet，但通过 USB 获得了与 Linux Board 的以太网连接。从 Win 7 拔下 USB 电缆后，我立即恢复了本地连接和 Internet。

是什么赋予了？我想保持我的本地连接和 Internet 处于活动状态，同时还能够通过 USB 连接与我的以太网进行交互。我不确定这是防火墙问题还是其他问题。这绝对是我想了解并希望解决的 Windows 7 细微差别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T16:30:44.200

解决此问题的方法是关闭作为路由器的 dnsmasq 服务。dnsmasq 配置文件中应该没有 dhcp-option=3。关闭该服务后，可以同时保持通过 USB 连接的以太网和局域网（带互联网）。USB -> 以太网也可以在没有 LAN 连接的情况下正常工作。

此外，您可以将路由器行为保留在 dnsmasq 配置文件中，然后设置连接优先级以使 LAN 1 和 USB RNDIS 连接 9999。右键单击适配器并为该适配器的 IPV4 行为选择高级选项。

# delphi - 如何将 VLC 中的视频存储到文件中？

> ID：12097720
> 
> 赞同：2
> 
> 时间：2012-08-23T18:15:00.817
> 
> 标签：delphi, video-streaming, vlc

我使用 Delphi，我需要从 IP 摄像机捕获视频并将其存储到文件中。我使用 TVLCPlugin（来自 VLC 的 ActiveX 组件）。

```
p: TVLCPlugin;
***
procedure TForm1.Button1Click(Sender: TObject);
var
  Options: OleVariant;
begin
  Options := ':sout=#duplicate{dst=display,dst=std{access=file,mux=asf,dst=D:\job\Camera\zzz.mpg}}';
  p.addTarget(
    'http://...', //MRI
    Options,
    VLCPlayListInsert, 0);
  p.play;
end; 
```

所以我可以在表单上看到视频，但它不会将其存储到文件中。谁能帮我正确设置选项？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T19:05:55.720

你看过 TVideoGrabber

[http://www.datastead.com/products/tvideograbber/overview.html](http://www.datastead.com/products/tvideograbber/overview.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T18:33:28.157

您需要显示视频源吗？如果您不这样做，您可以使用在 Delphi 中执行 HTTP 请求的一种方式下载 HTTP 提要，例如使用 Indy 的 TIdHTTP。

# ruby - Ruby 类：初始化 self 与 @variable

> ID：12097726
> 
> 赞同：14
> 
> 时间：2012-08-23T18:15:19.117
> 
> 标签：ruby

有人可以解释在定义类时初始化“self”和使用@variables 之间的区别吗？

这是一个例子

```
class Child < Parent
  def initialize(self, stuff):
    self.stuff = stuff
    super()
  end
end 
```

所以在这种情况下，我不能用 替换`self.stuff`吗`@stuff`？有什么不同？另外，这`super()`只是意味着在 Parent 初始化方法中的任何内容，Child 都应该继承它，对吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-08-23T18:26:12.977

一般来说，没有，`self.stuff = stuff`而且`@stuff = stuff`是不同的。前者对对象进行方法调用`stuff=`，而后者直接设置实例变量。前者调用一个可能是公共的方法（除非在类中明确声明为私有），而后者总是设置一个私有实例变量。

通常，它们看起来是一样的，因为`attr_accessor :stuff`在类上定义是很常见的。`attr_accessor`大致相当于以下内容：

```
def stuff
  @stuff
end

def stuff=(s)
  @stuff = s
end 
```

所以在这种情况下，它们在功能上是相同的。但是，可以定义公共接口以允许不同的结果和副作用，这将使这两个“分配”明显不同：

```
def stuff
  @stuff_called += 1    # Keeps track of how often this is called, a side effect
  return @stuff
end

def stuff=(s)
  if s.nil?             # Validation, or other side effect. This is not triggered when setting the instance variable directly
    raise "Argument should not be nil"
  end
  @stuff = s
end 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-23T18:23:18.290

`self.stuff=`除非您专门创建`attr_writer`用于修改该值的值，否则您实际上无法使用。

事实上，这些是等价的：

```
class Child
  attr_writer :stuff
end

class Child
  def stuff=(val)
    @stuff = val
  end
end 
```

更常见的是使用`attr_writer`if 那是您想要的功能，而不是显式方法。但是，如果您想执行额外的错误检查或更改分配的工作方式，您通常会使用显式方法。

对于您何时使用`@stuff =`和何时使用的问题`self.stuff =`，如果您只有简单的作业并且您的课程很简单，我会使用前者，如果您的要求可能变得更复杂，我会转向后者。还有很多其他原因，但这更多的是风格问题。

# css - 在 LI 中居中文本，文本长度未知

> ID：12097729
> 
> 赞同：0
> 
> 时间：2012-08-23T18:15:26.730
> 
> 标签：css

我正在无序列表中构建一堆列表项。列表有固定大小`250px X 75px;`这些列表项是动态生成的，所以我不知道会显示什么文本，所以我的 li 看起来像这样。

```
#pages-content li{
  float: left;
  width: 250px;
  height: 75px;
  margin: 15px;
  vertical-align: middle;
  text-align: center;
} 
```

我发现了一项建议，该建议说要使行高`75px`，并且一直有效，直到多行为止。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T18:33:51.843

CSS：

```
#pages-content ul li{
  width: 250px;
  height: 75px;
  text-align: center;
} 
```

HTML：

```
<div id="pages-content">
    <ul>
        <li>Matter here</li>
    </ul>
</div> 
```

[工作小提琴](http://jsfiddle.net/3zLcT/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T18:26:58.370

对于纯 HTML/CSS 解决方案，请尝试`vertical-align: middle`在表格单元格中使用表格。

[http://jsfiddle.net/3zLcT/](http://jsfiddle.net/3zLcT/)

如果你只能用css，恐怕你倒霉了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T18:30:01.853

添加`display: table-cell`可能会起作用，因为垂直对齐或多或少意味着表数据

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T18:38:14.880

你必须使用列表吗？你可以用 div 代替吗？

```
<style>
.div { 
  width: 250px; 
  height: 75px; 
  position: relative;
}

.container { 
  position: absolute; 
  width: 250px; 
  height: 75px; 
  display: table; 
}

.container p {
  display: table-cell; 
  vertical-align: middle; 
  text-align: center; 
}
</style>
<div class="div">
      <div class="container">
          <p>This text should look centered even if it's long.</p>
      </div>
</div>
<div class="div">
      <div class="container">
          <p>This text should look centered even if it's long.</p>
      </div>
</div>
<div class="div">
      <div class="container">
          <p>This text should look centered even if it's long.</p>
      </div>
</div> 
```

# java - 使用 case when exists 检查数据库中是否存在记录

> ID：12097736
> 
> 赞同：1
> 
> 时间：2012-08-23T18:15:50.103
> 
> 标签：java, sql, oracle, prepared-statement

哪个查询会更快

> SELECT CASE WHEN EXISTS (SELECT 1 FROM table WHERE 条件) THEN 'Y' ELSE 'N' END FROM DUAL

或者

> SELECT 1 FROM table WHERE 条件

对于他们两个，我将*fetchSize*设置为 1。

但是，我想知道如果我使用第二个查询，我只需要检查*if ( rs.next() )*，而对于第一个查询，我需要检查一个附加条件*rs.getString(1).equals("是”）*。同时我想知道*是否在sql中使用when存在，以某种方式使查询更快*？

我已经检查了其他问题[检查数据库表中是否有某些记录的最快方法是什么？](https://stackoverflow.com/questions/2131168/the-fastest-way-to-check-if-some-records-in-a-database-table)和[检查集合是否存在于数据库集中的最快方法](https://stackoverflow.com/questions/8652284/fastest-way-to-check-if-set-exists-in-database-set)，他们谈论使用存在。所以，只是想知道我是否应该使用exists，*如果我需要使用它来使查询更快，它是如何使查询更快的呢？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T18:20:05.807

关于你可以获得'no_data_found'或'to_many_rows'，这会导致阅读字典以获取错误代码等等，使用语句'SELECT 1 FROM table WHERE condition'第一种方法会更快

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T18:37:20.883

```
SELECT 1 FROM table WHERE condition 
```

**如果结果集没有返回任何行，则表示不满足条件，否则满足条件。**

它更好、更清洁、更短、更快。

# php - Drupal 7.x：如何将样式应用于节点中的 RSS 提要？

> ID：12097737
> 
> 赞同：0
> 
> 时间：2012-08-23T18:15:51.103
> 
> 标签：php, css, drupal, rss

如何将 CSS 样式应用于节点中的 RSS 提要项？Drupal 7.x，我正在使用 Feeds 模块来导入 RSS 提要并创建新闻项目节点。我想应用一些 CSS 样式来显示提要项，减小新闻容器的宽度并在新​​闻项周围添加边框。是否可以将样式应用于节点中的 RSS 提要项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T18:24:51.013

**Dirty：**可以编辑页面并`<style>`在节点中添加 html 元素，这很容易，但显然不是管理样式的好方法

**清理：**找到 Drupal 引用的样式表（使用 Google chrome 右键单击​​要编辑的元素，点击“检查元素”，右侧将是元素的样式属性以及它们来自的文件。导航到此文件，您可以根据需要添加样式属性

# android - 可以在 Android 上锁定 TabGroup Windows 吗？

> ID：12097741
> 
> 赞同：0
> 
> 时间：2012-08-23T18:16:04.810
> 
> 标签：android, titanium, titanium-mobile, android-orientation

我的应用程序有几个窗口。创建每个窗口后，我的代码旨在将这些窗口锁定为纵向模式：

```
var win = Ti.UI.createWindow({ ... });
win.orientationModes = [ Ti.UI.PORTRAIT ]; 
```

我仍然无法相信没有更通用的方式来为 Android 执行此操作，但这是另一天的抱怨。:-) 目前，这主要是有效的。我希望这里有人可以帮助我删除大部分限定符。

该应用程序将打开一个包含 4 个选项卡的选项卡组。如果我在加载默认活动选项卡后立即旋转我的设备，则布局也会旋转。哎呀。事实上，如果我立即转到这些选项卡中的任何一个并旋转我的设备，布局就会旋转。更多哎呀。然而——这是有趣的部分——如果我重新启动应用程序并首先跳转到第二个窗口，一个从一个选项卡窗口加载的窗口，然后旋转我的手机，不旋转显示。耶！现在我跳回到任何一个选项卡窗口，那些之前旋转的窗口，它们不再旋转。

哇？！

这就是我想我现在看到的模式。有人见过这个吗？我猜这是一个标签组的东西，但我在 API 中看不到任何方向访问器。任何指导将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T22:01:48.073

您需要将此添加到您的`tiapp.xml`

```
<android >
    <manifest>
        <application>
            <activity android:name="org.appcelerator.titanium.TiActivity" android:screenOrientation="portrait" android:configChanges="keyboardHidden|orientation">
            </activity>
        </application>
    </manifest>
</android> 
```

这会将您的整个应用程序锁定为纵向模式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T05:19:07.163

`AndroidManifest.xml`通过这个帮助[创建](https://wiki.appcelerator.org/display/guides/Orientation)一个自定义

并在应用程序博客中添加这一行

```
<application 
    android:debuggable="false" 
    android:icon="@drawable/appicon" 
    android:label="iVite" 
    android:name="IviteApplication" >

    <activity 
        android:configChanges="keyboardHidden"
        android:name="org.appcelerator.titanium.TiActivity"
        android:screenOrientation="portrait"/>

    <activity 
        android:configChanges="keyboardHidden"
        android:name="ti.modules.titanium.ui.TiTabActivity"
        android:screenOrientation="portrait"/>

    <activity 
        android:name="ti.modules.titanium.ui.android.TiPreferencesActivity"/>

</application> 
```

这是正确的使用方法。因为，在标签栏应用程序中。我们还需要设置 Tabbar Activity 及其方向设置。就像上面的代码在上面的代码中一样。

这里，Activity Orientation 都是通过 AndroidManifest.xml 设置的。TabbarActivity 和窗口活动。

干杯....

# android - Android - 通过单击列表视图项目显示文本视图

> ID：12097745
> 
> 赞同：0
> 
> 时间：2012-08-23T18:16:21.633
> 
> 标签：android, listview, textview

我正在创建我的第一个 Android 应用程序，但不幸的是我卡住了。该应用程序将非常简单：在起始页面上有一个 ListView，其中包含以下项目：第 1 组 第 2 组 第 3 组 ...

通过单击这些项目中的任何一个，将显示一个带有单个 textview 元素的新页面，该元素将具有一些描述。就像您单击“第一组”项目一样，列表视图被隐藏，并且出现一个带有“第一组描述”文本的新页面。

到目前为止，我可以显示带有项目的列表视图，但是当我单击它们时，什么也没有发生（我想我错过了一些基本的东西，但作为一个非常新手，我不能轻易找到它）。

```
import java.util.ArrayList;
import java.util.Arrays;

import android.app.Activity;
import android.os.Bundle;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.LinearLayout;
import android.widget.LinearLayout.LayoutParams;
import android.widget.ListView;
import android.widget.TextView;
import android.view.*;

public class SimpleListViewActivity extends Activity {
    LinearLayout.LayoutParams layoutParams;
    LinearLayout ll;

  private ListView mainListView ;
  private ArrayAdapter<String> listAdapter ;

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // Find the ListView resource. 
    mainListView = (ListView) findViewById( R.id.mainListView );

    // populate the List of groups
    String[] GROUP = getResources().getStringArray(R.array.group);  
    ArrayList<String> GrList = new ArrayList<String>();
    GrList.addAll( Arrays.asList(GROUP) );

    // Create ArrayAdapter using the list.
    listAdapter = new ArrayAdapter<String>(this, R.layout.simplerow, GrList);

    // Set the ArrayAdapter as the ListView's adapter.
    mainListView.setAdapter( listAdapter );  
    ll = (LinearLayout)findViewById(R.id.LinearLayout);
    layoutParams = new LinearLayout.LayoutParams
    (LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);

    mainListView.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
            TextView t = (TextView) findViewById(R.id.textView1);
            String[] DESC = getResources().getStringArray(R.array.desc); 
            t.setText(DESC[position]);
            ll.addView(t);
        //This is the point that is wrong for sure (and others maybe also). I cannot get the textview shown
        }

    });

  }

} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T18:43:20.933

我假设您的 R.layout.main 持有一个列表视图和一个线性布局，其 ID 分别为 R.id.mainListView 和 R.id.LinearLayout。

示例：我遗漏了一些您需要的明显属性，例如高度宽度等。

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
      >
      <ListView android:id="@+id/mainListView" />
      <LinearLayout android:id="@+id/LinearLayout" />
 </RelativeLayout> 
```

在您单击项目时，您要做的就是添加一个文本视图，然后设置 mainListView.setVisibility(View.INVISIBLE) 和 ll.setVisibility(View.VISIBLE)。

如果您的 R.layout.main 没有使用 RelativeLayout 作为根节点，而是使用 LinearLayout 如果您希望隐藏它，您应该仍然可以通过将 Visibilities 设置为 View.GONE 来实现相同的效果，并查看.VISIBLE 如果你想让它显示。

为了恢复能够看到列表视图，我将在活动中覆盖 onBackPressed()，以反转这两个项目的可见性。还要记住从线性布局中删除所有视图，以便下次选择组中的项目时，它将是添加时线性布局中的唯一项目。

有很多更简单的方法可以实现这一点，例如启动一个新活动以查看下一个项目，但似乎您将所有内容都保留在一个活动中。我还会考虑使用 ListActivity 而不是基本活动类。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T18:21:13.753

您是否尝试过在 onItemClick() 方法中显示 toast 消息或设置断点以验证它没有被到达？我的猜测是，您遇到了此处描述的问题之一：

[添加视图后刷新 LinearLayout](https://stackoverflow.com/questions/2469466/refreshing-a-linearlayout-after-adding-a-view)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T18:52:20.987

首先停止使用单词页面。称其为活动（必须让您进入 Android 区域）

一旦点击发生，就会开始一个新的活动，如下所示：

```
mainListView.setOnItemClickListener(new OnItemClickListener() {

String textToPass = GrList.get(position)
Intent i = new Intent(getBaseContext(), SecondActivity.class);                      
i.putExtra("textToPass", textToPass);
startActivity(i);

} 
```

您显然需要定义第二个活动并定义其相应的布局文件。同样在第二个活动中查找如何从第一个活动中获取捆绑包和附加内容以获取 textToPass 字符串

# android - Android SharedPreferences 强制关闭 Froyo 中的提交

> ID：12097748
> 
> 赞同：0
> 
> 时间：2012-08-23T18:16:37.720
> 
> 标签：android, sharedpreferences, android-2.2-froyo

除了我在 Froyo 上模拟它时，这段代码似乎在所有东西上都可以正常工作。我没有运行 Froyo 的实际设备，所以我无法在实际设备上对其进行测试，但它在提交时是 FC 的。我什至在 try 块中有代码，所以我认为它应该捕获异常而不是强制关闭。

```
private void getPrefs() {

    boolean dockRespond;
    boolean carDockRespond;
    boolean silenceRinger;

    settings = getSharedPreferences(PREFS_NAME, 0);
    editor = settings.edit();

    SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(getBaseContext());

    dockRespond = prefs.getBoolean("dockRespond", true);
    carDockRespond = prefs.getBoolean("carDockRespond", true);
    silenceRinger = prefs.getBoolean("silenceRinger", false);

    Intent startDock = new Intent(this, DockService.class);

    if(dockRespond)
    {
        //start dock listener service
        startService(startDock);
    }
    else
    {
        //stop dock listener service
        stopService(startDock);
    }

    try
    {
        editor.putBoolean(DOCKRESPONSEGLOBAL, dockRespond);
        editor.putBoolean(CARDOCKRESPONSEGLOBAL, carDockRespond);
        editor.putBoolean(SILENCERINGER, silenceRinger);
        editor.commit();
    }
    catch (Exception e)
    {
        Log.d("Exception caught: ", e.getMessage());
    }
} 
```

所有常量（全部大写）都在上面的常量区域中定义，正如我之前所说，代码似乎适用于除 Froyo 之外的任何操作系统版本。在 froyo 中，FC 位于“editor.commit();”上 线。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T18:19:34.747

我在您的代码中没有看到您定义编辑器的任何地方？包含编辑器的第一行代码是

```
editor = settings.edit(); 
```

但你永远不会定义“编辑器”是什么

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T20:42:07.110

我想到了。正在发生的事情是，我让自己陷入了一个无休止的循环。我不得不：

```
settings.unregisterOnSharedPreferenceChangeListener(prefsListener); 
```

做我的改变，然后

```
settings.registerOnSharedPreferenceChangeListener(prefsListener); 
```

不知道为什么这只会在 Froyo 中造成问题。谷歌必须对操作系统进行更改以防止在未来版本中出现这种情况。

# javascript - 阻止 Recaptcha 在表单中执行“动作”

> ID：12097749
> 
> 赞同：0
> 
> 时间：2012-08-23T18:16:40.143
> 
> 标签：javascript, jquery, json, recaptcha

我正在尝试使用 jQuery 发布和处理表单。

```
<form action="/postcomment/" method="post" id="commentform">
  <input type="text" name="author" id="author" />
  <input type="text" name="email" id="email" />
<textarea name="comment" id="comment" ></textarea>
<input name="submit" type="submit" id="submit" value="Submit" />
</form> 
```

和 jQuery 代码：

```
$("#submit").click(function() {
$.ajax({
 dataType: 'json',
 beforeSend: function() {
 },
 timeout: 60000,
 error: function(request,error) {
 },
  success: function(data) {
   var obj = jQuery.parseJSON(data);
   //blah blah...
   } // End success
}); // End ajax method
return false;
}); 
```

它按预期工作。但是，如果我将其添加`<script type="text/javascript" src="https://www.google.com/recaptcha/api/challenge?k=xxxx" > </script>`到表单中，它将不再起作用。

浏览器会问：有一个json文件，要打开吗？

显然，recaptcha 脚本调用“发布”操作。如何阻止 Recaptcha 在表单中执行“操作”？

相关问题：[在 Google App Engine 上使用 jQuery 处理 json 表单](https://stackoverflow.com/questions/12096150/handling-json-form-with-jquery-on-google-app-engine)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T18:41:15.420

这就是我改变动作的意思，希望我能理解你的问题：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
 <script src="Scripts/jquery-1.4.1.js" type="text/javascript"></script>
    <script>
        function changeAction() {
            $("#myForm").attr("action", "anotherAction");
            return false;
        }
    </script>
    <title></title>

</head>
<body>
 <form action="myFirstAction.html" id="myForm"> 
        <input type="text" />
        <button type="submit" onclick="return changeAction()">
        </button>
    </form>
</body>
</html> 
```

单击按钮后，表单的操作是“anotherAction”。

# javascript - 什么会导致复选框忽略其选中值？

> ID：12097754
> 
> 赞同：0
> 
> 时间：2012-08-23T18:17:12.943
> 
> 标签：javascript, html, checkbox

我正在尝试将 html 复选框的`checked`值初始化为 false。但是，当我尝试设置它然后立即记录它的值时，它仍然显示为 true，并且复选框保持选中状态。

什么可能导致`checked`属性忽略通过 JavaScript 显式设置其值？

```
console.log( "setting", self.checkbox.testid, "to", self.checked );
self.checkbox.checked = self.checked;
console.log( self.checkbox.testid + " checked: ", self.checkbox.checked ); // still true 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T18:28:03.697

尝试其他方法：

如果你碰巧在使用 jQuery：

```
$('#myCheckbox').removeAttr('checked'); 
```

或者如果没有，请尝试在复选框上设置一个 ID 并确保您正在处理正确的元素：

```
document.getElementById('myCheckbox').checked = false; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T18:31:04.563

啊哈！问题实际上不在于`checked`复选框的属性，而在于我试图将其设置为的*值。*

如果我明确更改`self.checked`为，它现在可以工作。`false`所以问题是为什么它被记录为“假”但“假”值实际上不是`false`！

...

确实是的，当我记录`typeof self.checked`它实际上是一个值为“false”的*字符串！*当然，字符串“false”实际上是真的。多么骗人！

现在的问题是为什么 heck 是 self.checked 一个字符串，但这是我自己要解决的问题。感谢您帮助我通过人们思考。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T18:36:44.537

为了以编程方式跨浏览器更改复选框的值，您需要执行以下操作：

```
checkbox.checked = checkbox.defaultChecked = false;

```

# python - 如何构建 Python C 扩展，以便我可以从模块中导入它

> ID：12097755
> 
> 赞同：22
> 
> 时间：2012-08-23T18:17:13.457
> 
> 标签：python, distutils, python-extensions

我有一个包含许多子模块的 Python 项目，这些子模块是用 distutils 打包的。我想在 C 中构建一些 Python 扩展以存在于其中一些子模块中，但我不明白如何让 Python 扩展存在于子模块中。以下是我正在寻找的最简单的示例：

这是我的 Python 扩展`c_extension.c`：

```
#include <Python.h>

static PyObject *
get_answer(PyObject *self, PyObject *args)
{
    return Py_BuildValue("i", 42);
}

static PyMethodDef Methods[] = {
    {"get_answer",  get_answer, METH_VARARGS, "The meaning of life."},
    {NULL, NULL, 0, NULL}
};

PyMODINIT_FUNC
initc_extension(void) {
  (void) Py_InitModule("c_extension", Methods);
} 
```

这是一个`setup.py`有效的方法：

```
from distutils.core import setup
from distutils.extension import Extension

setup(name='c_extension_demo',
      ext_modules = [Extension('c_extension', sources = ['c_extension.c'])]) 
```

在 virtualenv 中安装后，我可以这样做：

```
>>> import c_extension
>>> c_extension.get_answer()
42 
```

但我想`c_extension`住在一个子模块中，比如说`foo.bar`。我需要在此管道中进行哪些更改才能使 Python shell 中的行为如下所示：

```
>>> import foo.bar.c_extension
>>> foo.bar.c_extension.get_answer()
42 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-23T18:29:33.533

只是改变

```
Extension('c_extension', ...) 
```

至

```
Extension('foo.bar.c_extension', ...) 
```

像往常一样，您将需要`__init__.py`每个`foo`和目录中的文件。`bar`要将这些与 setup.py 中的模块打包在一起，您需要添加

```
packages = ['foo', 'foo.bar'], 
```

到您的 setup() 调用，您将需要目录结构

```
setup.py
foo/
    __init__.py
    bar/
        __init__.py 
```

在您的源目录中。

# css - 为 Kindle 开发网站

> ID：12097757
> 
> 赞同：8
> 
> 时间：2012-08-23T18:17:17.607
> 
> 标签：css, html, mobile, media-queries, kindle

我最近萌生了为 Amazon Kindle 中的实验性网络浏览器设计和开发我的网站的特殊移动版本的想法。**不是**Kindle Fire，而是电子墨水。

但是，我未能在网上找到有关此主题的任何真实资源。我承认，Kindle 浏览器的市场份额一定非常糟糕，以至于大多数网站管理员甚至都不应该担心它。即便如此，我的网站以电子书为中心，所以我认为对 Kindle 友好的设计对于这种情况是有意义的。

所以我问你，在你看来，做一个对 Kindle 友好的网站有哪些考虑？

我应该设计的屏幕分辨率和 DPI 是什么？如何通过 JS/CSS 媒体查询检测 Kindle（但不检测 Kindle Fire）？

他们使用什么浏览器引擎？它的 HTML5 和 CSS3 功能是什么？阿贾克斯？JavaScript 超时？jQuery动画？是否有可以用于测试的 PC 的模拟器/等效设备？

只拥有 Kindle 键盘，不同版本的 Kindle（又不是 Kindle Fire）在屏幕属性和技术能力方面有什么区别？我应该考虑支持其他电子纸阅读器（如 Nook、Sony Reader 和你有什么）吗？他们甚至有网络浏览器吗？

在创建用于在电子墨水屏幕上显示的网站时，我是否应该考虑其他任何技术、设计或哲学问题？

# python - Ruby 类 Net:HTTP 的 Python 等价物是什么？

> ID：12097761
> 
> 赞同：1
> 
> 时间：2012-08-23T18:17:27.903
> 
> 标签：python, ruby

一位同事使用模块中的`Net:HTTP`类编写了一些代码`net/https`。他还使用模块中的`URI`类`uri`。哪些模块在 Python 中具有等效的类和功能？我做了一些谷歌搜索，发现[httplib](http://docs.python.org/library/httplib.html)和[urllib](http://docs.python.org/library/urllib.html)。这两个 Python 模块是等价的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T18:24:45.663

红宝石

```
require 'net/http'

url = 'http://www.acme.com/products/3322' # ACME boomerang
resp = Net::HTTP.get_response(URI.parse(url))

resp_text = resp.body 
```

Python

```
import urllib2

url = 'http://www.acme.com/products/3322'
response = urllib2.urlopen(url).read() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T18:27:16.787

第一：这个问题毫无意义。每个模块都有很多功能。你需要决定你真正需要什么。

第二：使用 Python 的“请求”模块：

[http://python-requests.org/](http://python-requests.org/)

它是处理请求的最 Pythonic 的模块。

# excel - 在 Outlook 中调用的 VBA 宏未在 Excel 中排序

> ID：12097763
> 
> 赞同：0
> 
> 时间：2012-08-23T18:17:33.233
> 
> 标签：excel, vba, outlook, tablesorter

所以基本上我有一个名为 xlobj 的 excel 对象，如果我指的是 xlobj，我会在这段代码之前的代码中说

```
xlobj.Range(blahh blahh blahh).Value = "something" 
```

现在我的目标是在 Excel 中将我使用脚本的其余部分从最新到最旧的所有值排序。我使用excel中的记录宏功能来获取宏代码，然后将其粘贴到我的Outlook VBA中并附加xlobj。*_* 在所有必要的代码行之前。

它不起作用，除了物理排序之外，它什么都做（选择发生并且代码正在编译）

```
xlobj.Range("A2:E900").Select
xlobj.Sort.SortFields.Clear
xlobj.Sort.SortFields.Add Key:=xlobj.Range("A1"), SortOn:=xlSortOnValues, Order:=xlDescending, DataOption:=xlSortNormal
With xlobj.Sort
  .SetRange xlobj.Range("A2:E900")
  .Header = xlNo
  .MatchCase = False
  .Orientation = xlTopToBottom
  .SortMethod = xlPinYin
  .Apply
End With 
```

有人看到代码的问题吗？

*编辑*

```
Private Sub Extract(ByVal oFolder As Outlook.Folder)

On Error Resume Next
Set myOlApp = Outlook.Application
Set mynamespace = myOlApp.GetNamespace("mapi")
Set MyFolder = oFolder

Set xlobj = CreateObject("excel.application.14")
Set xlobjWbk = xlobj.Workbooks.Open("c:\Users\(username)\Desktop\(filename).xlsx")
xlobj.Visible = True
xlobj.Application.DisplayAlerts = False

'Set Heading
xlobj.Range("a" & 1).Value = "Recieved Time"
xlobj.Range("b" & 1).Value = "Sender Email"
xlobj.Range("c" & 1).Value = "Subject"
xlobj.Range("d" & 1).Value = "Sender Name"
xlobj.Range("e" & 1).Value = "Body"
 xlobj.Columns("A").ColumnWidth = 17
 xlobj.Columns("B").ColumnWidth = 32
 xlobj.Columns("C").ColumnWidth = 36
 xlobj.Columns("D").ColumnWidth = 19
 xlobj.Columns("E").ColumnWidth = 56

For i = MyFolder.Items.Count To MyFolder.Items.Count + 100
 xlobj.Range("a" & i + 1).Value = ""
 xlobj.Range("b" & i + 1).Value = ""
 xlobj.Range("C" & i + 1).Value = ""
 xlobj.Range("d" & i + 1).Value = ""
 xlobj.Range("e" & i + 1).Value = ""
Next

For i = 1 To MyFolder.Items.Count
 Set myItem = MyFolder.Items(i)
 msgtext = myItem.body

 xlobj.Range("a" & i + 1).Value = myItem.ReceivedTime
 xlobj.Range("b" & i + 1).Value = myItem.SenderEmailAddress
 xlobj.Range("C" & i + 1).Value = myItem.Subject
 xlobj.Range("d" & i + 1).Value = myItem.SenderName
 xlobj.Range("e" & i + 1).Value = msgtext
 xlobj.Columns("A:E").VerticalAlignment = xlVAlignTop
Next

xlobj.Range("A2:E900").Select
xlobj.Sort.SortFields.Clear
xlobj.Sort.SortFields.Add Key:=xlobj.Range("A1"), SortOn:=xlSortOnValues,     Order:=xlDescending, DataOption:=xlSortNormal
With xlobj.Sort
    .SetRange xlobj.Range("A1:E900")
    .Header = xlNo
    .MatchCase = False
    .Orientation = xlTopToBottom
    .SortMethod = xlPinYin
    .Apply
End With 
```

这个脚本到通过参数传入的文件夹，然后将收件箱转储到excel表格中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T15:57:14.657

更改为 xlobj.Sort.SortFields.Add Key:=xlobj.Range("A2"), SortOn:=xlSortOnValues, Order:=xlDescending, DataOption:=xlSortNormal

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T18:48:41.470

```
With xlobj.Sort
    .SetRange xlobj.Range("A1:E900") '<---
    .Header = xlYes                  '<---
    .MatchCase = False
    .Orientation = xlTopToBottom
    .SortMethod = xlPinYin
    .Apply
End With 
```

# java - 带有 Spring 的 JavaMail - 缺少导入

> ID：12097765
> 
> 赞同：8
> 
> 时间：2012-08-23T18:17:39.197
> 
> 标签：java, spring

我得到一个

> 导入无法解决

以下导入错误，

```
import org.springframework.mail.MailSender;
import org.springframework.mail.SimpleMailMessage; 
```

我在类路径中有以下库，但我不确定哪个 jar 文件具有上述导入。有人知道吗？

```
 org.springframework.aop-3.1.1.RELEASE.jar
     org.springframework.asm-3.1.1.RELEASE.jar
     org.springframework.beans-3.1.1.RELEASE.jar
     org.springframework.context-3.1.1.RELEASE.jar
     org.springframework.core-3.1.1.RELEASE.jar
     org.springframework.expression-3.1.1.RELEASE.jar
     org.springframework.jdbc-3.1.1.RELEASE.jar
     org.springframework.orm-3.1.1.RELEASE.jar
     org.springframework.web-3.1.1.RELEASE.jar 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-23T18:22:30.300

你不见了`org.springframework.context.support-3.1.1.RELEASE.jar`

或者

```
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-context-support</artifactId>
    <version>3.1.1.RELEASE</version>
</dependency> 
```

如果您使用的是 Maven。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-26T21:17:38.117

您应该添加到 pom.xml：

```
<dependency>
    <groupId>javax.mail</groupId>
    <artifactId>mail</artifactId>
    <version>1.4</version>
</dependency> 
```

和

```
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-context-support</artifactId>
    <version>4.0.5.RELEASE</version>
</dependency> 
```

$mvn clean install 对我有用。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-02T12:50:56.700

您可以对邮件使用 Spring 电子邮件启动启动器依赖项，见下文：

```
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-mail</artifactId>
    <version>2.0.1.RELEASE</version>
</dependency> 
```

这将包含`spring-context-support`&`javax.mail`依赖项

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T07:10:20.837

org.springframework.context.support-3.xyRELEASE.jar 丢失。您可以从以下 URL 下载“spring-context-support-3.2.0.RELEASE.jar”：

[http://search.maven.org/#search%7Cga%7C1%7Cspring-context-support](http://search.maven.org/#search%7Cga%7C1%7Cspring-context-support)

转到 Java Build Path 并添加为外部 jar。

# powershell - 不同域中的某些服务器上的 WMI 错误 0x800706BA

> ID：12097778
> 
> 赞同：0
> 
> 时间：2012-08-23T18:18:39.413
> 
> 标签：powershell, wmi

尝试 wmi 查询时，我从 powershell 收到错误 * *0x800706BA **，而我能够将 wmi 查询运行到另一台服务器。问题是目标服务器与客户端服务器位于不同的域中，但是一个域的用户可能会登录到另一个域中的服务器。我是域管理员，端口 135 上的 telnet 工作正常，目标机器上的防火墙被禁用。

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T01:10:05.997

错误 800706BA 很可能是用户 PC 上的防火墙 RPC 阻塞端口问题。确保将用户计算机设置为受信任的委派。

错误代码： http:
[//www.computerperformance.co.uk/Logon/code/code_800706BA.htm](http://www.computerperformance.co.uk/Logon/code/code_800706BA.htm)

VBS 可信委托：
1.（文章）[http://www.experts-exchange.com/Web_Development/Miscellaneous/Q_21372685.html](http://www.experts-exchange.com/Web_Development/Miscellaneous/Q_21372685.html)
2.（参考）[http://support.microsoft.com/?id=305144](http://support.microsoft.com/?id=305144)
3.（示例）[http://social.technet.microsoft.com/Forums/en-US/ITCG/thread/bbfadc43-f843-4c3f-87db-fe038c6416db/](http://social.technet.microsoft.com/Forums/en-US/ITCG/thread/bbfadc43-f843-4c3f-87db-fe038c6416db/)

希望这可以帮助 ;）

# flash - 在影片剪辑中附加 Flash 文件时没有声音

> ID：12097785
> 
> 赞同：0
> 
> 时间：2012-08-23T18:19:25.340
> 
> 标签：flash, actionscript, actionscript-2

我有一个带有声音的 Flash 文件。将其附加到另一个 Flash 文件时我听不到声音

```
loadMovie("rlvl3.swf",_root.drop); 
```

但这有效

```
loadMovie("rlvl3.swf",_root); 
```

我还能使用上面的代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T19:05:51.877

解决方案是使用此代码播放声音

```
var snd:Sound = new Sound(this);
snd.attachSound("r3smile");
snd.start(); 
```

这行不通。。

```
var snd:Sound = new Sound();
snd.attachSound("r3smile");
snd.start(); 
```

# ios - 当我调整弹出框的大小时，防止 iPad 弹出框箭头移动

> ID：12097790
> 
> 赞同：1
> 
> 时间：2012-08-23T18:19:53.823
> 
> 标签：ios, ipad, uipopovercontroller

我在弹出框控制器中使用导航控制器。导航控制器中的各个页面具有不同的大小。当我在导航控制器中浏览页面时，弹出框会相应地调整大小。箭头也会改变位置。如何防止箭头移动？

# ajax - myfaces+ajax+IE - 页面加载问题

> ID：12097793
> 
> 赞同：0
> 
> 时间：2012-08-23T18:20:06.653
> 
> 标签：ajax, internet-explorer, jsf-2, myfaces

在我将 f:ajax 标记添加到我的一个页面后，tomcat 自动将 jsf.js 脚本插入到标题中：

```
<script type="text/javascript" src="<app-name>/javax.faces.resource/jsf.js.jsf?ln=javax.faces&amp;stage=Development"> 
```

它开始在页面加载时在 IE 中引起一些奇怪的错误。最令人惊奇的是，每次重新加载页面时，错误的数量和发生的位置可能会有所不同，有时甚至很明显。我应该提到在 Chrome 中一切加载都没有任何问题吗？

```
 SCRIPT5007: Unable to get value of the property '_mfClazz': object is null or undefined 
jsf.js.jsf?ln=javax.faces&stage=Development, line 734 character 13
SCRIPT5009: '_MF_OBJECT' is undefined 
_HtmlStripper.js.jsf?ln=org.apache.myfaces.core.impl.util, line 28 character 1
SCRIPT5009: '_MF_OBJECT' is undefined 
_AjaxUtils.js.jsf?ln=org.apache.myfaces.core.impl.xhrCore, line 27 character 1
SCRIPT5007: Unable to get value of the property 'engine': object is null or undefined 
Xhr1.js.jsf?ln=org.apache.myfaces.core.impl.xhrCore, line 29 character 1
SCRIPT5009: '_MF_OBJECT' is undefined 
_Queue.js.jsf?ln=org.apache.myfaces.core.impl.util, line 25 character 1
SCRIPT5007: Unable to get value of the property '_mfClazz': object is null or undefined 
jsf.js.jsf?ln=javax.faces&stage=Development, line 720 character 15
SCRIPT5007: Unable to get value of the property '_mfClazz': object is null or undefined 
jsf.js.jsf?ln=javax.faces&stage=Development, line 720 character 15
SCRIPT5007: Unable to get value of the property 'engine': object is null or undefined 
IFrame.js.jsf?ln=org.apache.myfaces.core.impl.xhrCore, line 27 character 1
SCRIPT5009: '_MF_OBJECT' is undefined 
_AjaxRequest.js.jsf?ln=org.apache.myfaces.core.impl.xhrCore, line 32 character 1
SCRIPT5009: '_MF_OBJECT' is undefined 
_AjaxResponse.js.jsf?ln=org.apache.myfaces.core.impl.xhrCore, line 32 character 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T18:46:04.960

添加的不是tomcat `jsf.js`，它的jsf实现库（在你的情况下是myfaces）读了这个（）[什么可能导致浏览器控制台中的“jsf is not defined”错误](https://stackoverflow.com/questions/9971925/what-can-cause-jsf-is-not-defined-error-in-browser-console)

所以这是正常的

关于你的错误，也许你有一些非法的 html 结构？像嵌套形式？你用的是什么版本的myfaces？rls 官方版本吗？尝试更新的

另一种选择是尝试像这样手动添加 js 文件（只是看看它是否好用）

```
<h:outputScript name="jsf.js" library="javax.faces" target="head"/> 
```

# c++ - 什么是 LPSTREAM 对象，我该如何使用它？

> ID：12097795
> 
> 赞同：4
> 
> 时间：2012-08-23T18:20:26.387
> 
> 标签：c++, stream

我正在尝试编写一个函数，它将下载网站的 HTML 源代码并以字符串、列表、数组或任何可用格式返回它。为此，我使用了一个名为[URLOpenBlockingStream](https://msdn.microsoft.com/en-us/library/ms775127(v=vs.85).aspx)的看起来很方便的函数，它将下载网站的 HTML 源代码并将其放置在 LPSTREAM 类型的对象中。

```
//Saves the HTML souce of stackoverflow.com in the object "lps", of type LPSTREAM.
HRESULT hr = URLOpenBlockingStream(0, "http://www.stackoverflow.com/", &lps, 0, 0); 
```

现在，这是什么？我在互联网上的任何地方都找不到对 LPSTREAM 的引用，也没有人解释我是如何从那里获取数据的。它可能就像一个 IStream 对象，但即使这样也无济于事，因为在 char 数组中使用插入运算符会产生错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T18:25:29.407

它是一个指向[`IStream`](http://msdn.microsoft.com/en-us/library/aa380034%28v=vs.85%29.aspx). “LP”代表“Long Pointer”，现在的意思是“指针”。这是 Windows SDK 中的常见命名约定，例如参见`LPVOID`( `void*`) 和`LPWSTR`( `wchar_t*`)。

您总是可以通过查找它在 SDK 中的声明位置（即，在您包含的标头中）来找出类型是什么。或者，在这种情况下，[`URLOpenBlockingStream`](http://msdn.microsoft.com/en-us/library/ms775127.aspx)您正在调用的函数的文档对`ppStream`参数进行了以下说明：

> 指向[`IStream`](http://msdn.microsoft.com/en-us/library/aa380034.aspx)此函数创建的流对象上的接口的指针。调用者一旦有了这个指针就可以从流中读取。

# comparison - 比较xquery中的两个十进制值

> ID：12097796
> 
> 赞同：1
> 
> 时间：2012-08-23T18:20:27.323
> 
> 标签：comparison, decimal, xquery

我试图找出 xquery 中哪个价格值最小。我在 XML 中传递了两个价格值，并且在尝试比较这些值时似乎无法解决过去的语法错误。

示例 XML：

```
<purchase>
  ....
  <articlePrice>$20.00</articlePrice>
  <issuePrice>$154.00</issuePrice>
  ....
</purchase> 
```

我有以下内容可以去掉'$'

```
let $price := fn:substring-after($price, '$')
let $priceIssue := fn:substring-after($priceIssue, '$') 
```

我尝试使用内置的 fn:min() 但给出“XDMP-UNEXPECTED: (err:XPST0003) Unexpected token syntax error, unexpected QName_”。

```
fn:min(((xs:decimal($price)), (xs:decimal($priceIssue)))) 
```

我尝试在 if 语句中同时使用 'gt' 和 '>' 但仍然出现上述语法错误。

我可以绕过错误的唯一方法是将它们转换为字符串，但比较是错误的。鉴于上述数据，作为字符串，逻辑返回 '154.00' 小于 '20.00'，因为 '1' 小于 '2'。

我的确切代码：

```
let $price := if (xs:string($ecommerce/articlePrice)) then fn:substring-after(xs:string($ecommerce/articlePrice), '$') else ""

let $priceIssue := if (xs:string($ecommerce/issuePrice)) then fn:substring-after(xs:string($ecommerce/issuePrice), '$') else ""

let $priceDisplay := fn:min(xs:decimal($price), xs:decimal($priceIssue)) 
```

结果为 XDMP-ARGTYPE: (err:XPTY0004) fn:min(20.0, 154.0) -- arg2 不是 xs:string 类型

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T18:46:29.893

我不确定您的完整代码是什么样子（看起来有点粗略），但以下查询应该可以工作：

```
let $doc :=
  <purchase>
    <articlePrice>$20.00</articlePrice>
    <issuePrice>$154.00</issuePrice>
  </purchase>
let $price := fn:substring-after($doc/articlePrice, '$')
let $priceIssue := fn:substring-after($doc/issuePrice, '$')
return fn:min((xs:decimal($price), xs:decimal($priceIssue))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T14:31:53.953

如果您可以选择这样做，我会调整 XML。现在，您正在混合数据的不同部分：数值和货币。

```
let $doc := 
  <purchase>
    <articlePrice curr="$">20.00</articlePrice>
    <issuePrice curr="$">154.00</issuePrice>
  </purchase>
return fn:min(($doc/articlePrice, $doc/issuePrice)) 
```

这样你的计算会容易得多。然后，当您准备好向最终用户展示某些内容时，您可以重新添加美元符号。另一个优点：使用简单的数字，您将能够将这样的元素索引为数字而不是字符串（对于这种特殊情况可能并不重要，但在很多情况下很有帮助）。

# zend-framework - 在哪里使用域对象和数据映射器实现 Zend_ACL？

> ID：12097798
> 
> 赞同：1
> 
> 时间：2012-08-23T18:20:28.247
> 
> 标签：zend-framework, design-patterns, datamapper, domain-model, zend-acl

在阅读了 Matthew Weier O'Phinney 的许多关于在模型中实施 ACL 的文章后，我一直专注于实现这一目标的最佳方法。然而，在进一步研究领域对象的最佳实践后，我了解到这些模型不应包含对数据映射器或任何 CRUD 操作的任何引用。

以 ERM 软件为例，它根据销售和采购订单维护库存并处理进出公司的货物。我想象有几个域......

*   公司
*   运输
*   命令
*   产品
*   集会
*   还有其他几个

由于公司可以有不同的类型（例如制造商、供应商、零售商），因此此信息存储在我的数据库中的许多表中（例如公司、类型、公司类型）。因此，我的公司域有一个数据映射器，它使用每个数据库表的 Zend_Db_Table 实例的对象。

在我的控制器操作中，我知道应该很少有逻辑。例如，创建一个新公司可能会像这样......

```
public function createAction()
{
  // Receive JSON request from front end
  $data = Zend_Json::decode($request);
  $companyObj = new App_Model_Company();
  $companyObj->populate($data);
  $companyMapper = new App_Model_DataMapper_Company();
  $companyMapper->save($companyObj);
} 
```

考虑到这一点，我觉得最好将我的 ACL 检查合并到 DataMapper 中，并将验证合并到域对象中。My Domain 对象都扩展了一个基础抽象类，它重载了 PHP 的魔力`__set`和`__get`方法。在每个域对象的构造函数中，我通过`$_properties`使用键填充数组来定义对象的属性。这样，我的`__set`方法看起来像......

```
public function __set($property, $value)
{

    $className = __CLASS__;
    if(!array_key_exists($property, $this->_properties))
    {
        throw new Zend_Exception("Class [ $className ] has no property [ $property ]");
    }

    // @return Zend_Form
    $validator = $this->getValidator();

    /*
     * Validate provided $value against Zend_Form element $property
     */

    $this->properties[$property] = $value;
    }
} 
```

我所有的数据映射器的`save()`方法 typehint `App_Model_DomainObjectAbstract $obj`。

**问题 #1 - 由于我的数据映射器将处理所有 CRUD 操作，并且域对象实际上应该只包含特定于该域的属性，我觉得 ACL 检查属于数据映射器 - 这可以接受吗？**

我试图避免在我的控制器中实例化数据映射器，但这似乎不合理，因为我**认为**我对这种设计模式有了更好的理解。

**问题 #2 - 我是否过于复杂了这个过程，我是否应该编写一个 ACL 插件来`Zend_Controller_Plugin_Abstract`根据方法中的传入请求扩展和处理 ACL `preDispatch()`？**

非常感谢您的宝贵时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T00:48:46.620

这里有一个共识[（仔细阅读@teresko 的答案）](https://stackoverflow.com/questions/3430181/acl-implementation/9685039#9685039)`ACLs`最适合装饰器**模式**（一个安全容器）。

如果您的权限定义`ACL`存储在数据库中，那么您必须有一个 DataMapper 来映射`acl`数据库上的定义和您的`Zend_Acl`对象的实际实现及其`resources`,`roles`和`privileges`.

> 由于**ZF 1 的特性**（许多反模式、全局状态等），您可能不会使用控制器装饰器来实现。相反，您将使用一个插件（preDispatch）来为您检查横切关注点。因此，您的 ACL 必须是最先初始化的对象之一。

考虑到您的 ACL 定义基于`controller`和`action`名称，您的插件将调用您`AclMapper`来获取填充的`ACL`对象，然后检查当前用户是否被允许访问给定资源。

检查此示例代码：

```
class Admin_Plugin_AccessCheck extends Zend_Controller_Plugin_Abstract 
{
    public function preDispatch(Zend_Controller_Request_Abstract $request)
    {
        if($request->getModuleName() != 'admin')
        {
            return;
        }

        $auth = Zend_Auth::getInstance();
        $action = null;

        if(!$auth->hasIdentity())
        {
           $action = 'login'; 
        }
        else
        {
            /**
             * Note that this is not a good practice (singletons). 
             * But in this case it's avoiding re-loading the Acl from database
             *  every time you need it. Also, considering that ZF 1 is full of 
             * singletons, it'll not hurt, I think ;)
             * YOU CAN CHANGE THIS LINE TO $aclMapper->getAcl();
             */

            $acl = Acl::getInstance();

            $resource = $request->getModuleName() . ':' . $request->getControllerName();
            $privilege = $request->getActionName();

            $identity = $auth->getStorage()->read();
            $role = $identity->role_id;

            if($acl->has($resource))
            {
                if(!$acl->isAllowed($role,$resource,$privilege))
                {
                    $action = 'access-denied';
                }
            }
        }

        if($action)
        {
            $request->setControllerName('authentication')
                    ->setActionName($action)
                    ->setModuleName('admin');
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T05:36:58.180

**@问题#1：** 不，ACL 不属于您的映射器。牢记关注点分离。如果您决定将 ACL 建立在基于每个对象的基础上，那么上面链接的装饰器方法就是您要走的路。但是，装饰器可以很好地围绕映射器实现。考虑 ZF1 提供的这个 acl 结构：资源：您的域实体，例如类名角色：用户角色特权：CRUD

```
<?php
class SecurityContainer {
    /**@var Zend_Acl*/
    protected $acl;

    /**@var DataMapper */
    protected $mapper;

    /**@var User|rolename*/
    protected $user;

    public function __construct($acl, $mapper, $user) {
        $this->acl = $acl;
        $this->mapper = $mapper;
        $this->user = $user;
    }

    public function __call($method, $entity) {
        if (method_exists($this->mapper, $method) {
            if ($this->acl->isAllowed($user, get_class($entity), $method) {
                $this->mapper->$method($entity);
        }
    }
} 
```

这就引出了**问题 2：** 这实际上取决于您如何设计应用程序接口。如果每个实体类型的每个 CRUD 操作都有一个操作，那么您可以简单地通过一个 FrontController-Plugin 来实现您的 acl，正如 ZF1 的许多和更多教程向您展示的那样。如果您需要更细粒度的 ACL，例如角色 GUEST 可能会更新公司名称，但经理可能会更新整个实体，或者如果您有更改多个实体的操作，则基于实体的方法是更好的一个海事组织。

关于您概述的设计的其他一些想法：我认为让实体验证自己不是一个好主意。尝试实现一个由具体验证器验证类型的解决方案。你甚至可以再次使用装饰器；）这仍然是一个更清洁的解决方案。

您不应该在控制器操作中使用映射器是有原因的。一是做与数据库分离的验收测试变得更加困难（不过取决于您的实现）。你指出了另一个：让你的动作尽可能短。使用 ACL 和验证器，您的操作将变得更大。考虑按照另一个问题中所述的@teresko 实施服务层。如果您需要，这对于基于属性的 ACL 也很有帮助。

希望对您有所帮助。

# windows - 为文件图标添加一个小图标

> ID：12097799
> 
> 赞同：1
> 
> 时间：2012-08-23T18:20:28.683
> 
> 标签：windows, file, icons

一些文件同步应用程序，如 Dropbox 更新文件系统上的同步文件图标，带有绿色复选标记图标（文件同步完成时）或同步正在进行时的不同图标......知道它是如何完成的吗？

# android - Android：对联系人合并做出反应

> ID：12097802
> 
> 赞同：1
> 
> 时间：2012-08-23T18:20:43.187
> 
> 标签：android, sqlite

我正在开发适用于 Android 的应用程序，并且需要存储联系人 ID，以便跟踪要在应用程序中使用的联系人子集。我目前将 ID 存储在本地使用的表中，但是如果联系人与其他联系人合并（用于表示合并联系人的 ID 经常更改），则此表会变得不一致。保持一致性的最佳方法是什么？

我的想法：

*   如果有某种意图或系统事件被广播，那么我可以监听它。

*   如果旧 ID 和新 ID 之间的映射保存在某处（ContactsContract.RawContacts？），那么只要检测到 ID 不再有效，我就可以刷新该字段。

*   使用内容观察者运行后台进程并观察变化。如果可能的话，我想避免这种情况。

这个问题似乎解决了类似的问题，但用于添加而不是合并联系人：[Reacting to new contacts in Android Contacts application](https://stackoverflow.com/questions/1011111/reacting-to-new-contacts-in-android-contacts-application)。

欢迎任何和所有想法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T18:29:17.853

存储联系人查找 URI（作为字符串）。此 URI 是`_id`与联系人一起创建的`lookup_key`。这两个可以通过调用 ContactsContract.getLookupUri() 来构建查找 URI。您可以通过调用 ContactsContract.lookupContact() 并查询`CONTENT_URI`或`CONTENT_LOOKUP_URI`直接使用查找 URI 查询来查找联系人。Android 文档对 CONTENT_LOOKUP_URI 这么说：

> 此表的 content:// 样式 URI，应用于创建快捷方式或以其他方式创建联系人**的长期链接。**此 URI 后应始终跟一个“/”和联系人的 LOOKUP_KEY。它还可以选择附加一个“/”和最后一个已知的联系人 ID。这种“完整”格式是一项重要的优化，强烈推荐。
> 
> 只要联系人的行 ID 保持不变，此 URI 就等同于 CONTENT_URI。**如果联系人的行 ID 由于同步或聚合而发生更改，则此 URI 将使用间接信息（同步 ID 或组成原始联系人）查找联系人**。
> 
> 查找键应附加未编码 - 它以编码形式存储，准备在 URI 中使用。

# php - FB_Ignite 不返回 $fb->me

> ID：12097804
> 
> 赞同：1
> 
> 时间：2012-08-23T18:20:50.197
> 
> 标签：php, facebook, api, codeigniter

我可以让 FB_Ignited 使用提供的演示，但是每当我从我的网站的登录页面尝试它时，它：

1.  命中 Auth 控制器
2.  去FB
3.  返回 Auth 控制器并加载“开始”视图，同时传递 $content_data

出于某种原因，在开始视图中，$this->fb_me 不可用。

这是我的 Auth 控制器 - 当从登录页面点击 FB 按钮时会点击它

```
class Auth extends CI_Controller {

function __construct()
{
    parent::__construct();      

    $this->load->library('fb_ignited');
    // The fb_ignited library is already auto-loaded so call the user and app.
    $this->fb_me = $this->fb_ignited->fb_get_me();      
    $this->fb_app = $this->fb_ignited->fb_get_app();

    // This is a Request System I made to be used to work with Facebook Ignited.
    // NOTE: This is not mandatory for the system to work.
    if ($this->input->get('request_ids'))
    {
        $requests = $this->input->get('request_ids');
        $this->request_result = $this->fb_ignited->fb_accept_requests($requests);
    }
}

function index($type="")
{   
    if (isset($this->request_result)) {
        $content_data['error'] = $this->request_result;
    } 

    if ($this->fb_me) {
        $content_data['me'] = $this->fb_me;
    } 

    $this->load->model('users');
    $checkandadd = $this->users->checkandadd($this->fb_me);

    $this->load->view('start', $content_data);
} 
```

}

不确定它是否会有所帮助，但这是 $this->facebook 输出的内容（故意调整了 ID 和哈希值）：

```
Facebook Object
(
    [appId:protected] => 123456123456123456
    [apiSecret:protected] => 123456123456123456
    [user:protected] => 0
    [signedRequest:protected] => 
    [state:protected] => 123456123456123456
    [accessToken:protected] => 123456123456123456|123456123456123456
    [fileUploadSupport:protected] => 
) 
```

其他一些注意事项：

*   `*RECURSION*`每当我 print_r($this->fb_ignited) 出现几次
*   错误日志中没有显示任何内容

有人遇到过这样的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T04:26:20.637

在最新版本的[Facebook Ignited](https://github.com/Necromnius/Facebook-Ignited/)中，您会发现我已经为那些没有启用查询字符串以及未加载用户信息的人处理了这个问题，因为我使用的是最新的 Facebook PHP SDK。我建议您升级到[v1.1.2](https://github.com/Necromnius/Facebook-Ignited/downloads)，只需对您的 CodeIgniter 应用程序进行少量更改即可下载该版本。

# c# - 如何检查数字在c#中是否可整除？

> ID：12097805
> 
> 赞同：3
> 
> 时间：2012-08-23T18:20:59.833
> 
> 标签：c#, math, floating-point, double, division

我需要知道如何执行此程序。

```
calculation1: 1/4 = 0,25
calculation2: 1/8 = 0,125
calculation3: 47/183 = 0,25683060109289617486338797814207......
calculation4: 58/889 = 0,06524184476940382452193475815523......
calculation5: 1/5 = 0,2 
```

计算 1、2 和 5 的结果将给出一个简短的结果，没有句点或无休止的数字串。计算 3 和 4 的结果非常长且复杂。

如何检查哪个计算是“简单的”并给出“短”的结果。

我试过了，它肯定给出了错误的结果......如您所见，计算结果`double`在我的应用程序中具有数据类型。

```
static bool IsInt(double x)
    {
        try
        {
            int y = Int32.Parse(x.ToString());
            return true;
        }
        catch
        {
             return false;
        }
    } 
```

我希望很清楚我在问什么。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-23T18:23:56.560

如果在尽可能减少分数后，分母可以表示为 2 的幂乘以 5 的幂，则十进制表示终止。否则它会无限重复。

您可以测试您的部门是否“好”，如下所示：

```
public bool IsGoodDivision(int a, int b)
{
    while (b % 2 == 0) { b /= 2; }
    while (b % 5 == 0) { b /= 5; }
    return a % b == 0;
} 
```

在线查看它：[ideone](http://ideone.com/sPGAa)

请注意，我将分子和分母分别传递给该方法。如果您先进行除法，然后将结果传递给您的方法，则会因浮点[表示错误](http://en.wikipedia.org/wiki/Round-off_error)而失去精度。

同样对于生产代码，您应该检查它，`b != 0`因为它不允许除以 0。如果没有检查，上面的代码将进入无限循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T18:23:51.710

我想这取决于您对“好结果”或“容易”的定义。但我认为你想要的是[Modulus Operator](http://msdn.microsoft.com/en-us/library/0w4e0fzs.aspx)。

# c++ - 关于 C++ 中的构造函数链接的一些问题

> ID：12097807
> 
> 赞同：0
> 
> 时间：2012-08-23T18:21:04.713
> 
> 标签：c++, constructor

我可以在成员函数中调用构造函数吗？它是构造函数链接的示例吗？构造函数链接在最新的 C++ 版本中是否有效？（就像我们在 C# 中的那样）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T18:23:36.443

1) 是的

2）不，从函数调用构造函数不是构造函数链接。

3）是的，它被称为[委托构造函数](http://www.learncpp.com/cpp-tutorial/b-5-delegating-constructors/)

# ruby-on-rails - 在 Rails 3 中为每个模型添加 default_scope

> ID：12097814
> 
> 赞同：0
> 
> 时间：2012-08-23T18:21:46.390
> 
> 标签：ruby-on-rails, ruby-on-rails-3, models, default-scope

我正在尝试为我的项目中的所有模型添加一个“default_scope”：

```
default_scope where(:deleted => false) 
```

有没有办法自动为所有模型添加这个 default_scope ？

也许使用模块？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T20:43:21.873

嗯，我能想到的最接近的是从同一类派生模型，这个范围适用。

# c# - 套接字或使用 wso2 实时接收和处理数据

> ID：12097819
> 
> 赞同：1
> 
> 时间：2012-08-23T18:22:04.513
> 
> 标签：c#, .net, sockets, websocket, wso2

我想知道这是否可能，并且我使用的方法是正确的:)

我在.net 上，c# 和 DB 是 SQL。

我正在尝试创建一个应用程序，其中我将获取多个数据（每秒 1000 条记录的基准），我们谈论的每条记录大约为半 kb。

我需要接收相同的、处理数据以触发通知，然后插入数据库。

我的解决方案：（a）在负载均衡器上接收数据。(b) 使用某种技术与 Sockets 在每个服务器上的各种端口上接收数据。（c）中间存储（我还没有弄清楚）因为我需要处理每个数据包，以获得正确的通知（通知在客户端网站的网页上更新）（d）然后我会将数据插入数据库。

我需要一些建议，正确的路径，我会在适当的时候弄清楚代码，但需要一个方法和技术的方向。

我还被告知如果我使用 wso2 中间件，我可以在不投资重型服务器的情况下实现上述目标

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T20:17:42.180

取决于您用于设置的内容，数据库 IO 将成为您的瓶颈。

就 C# 套接字应用程序而言，如果您使用异步套接字，每秒 1000 个数据包并不是很多，您不需要负载均衡器。在获取数据包时，处理它们并将数据存储在 C# 中间类对象中，您可以在其中执行逻辑以确定网站是否需要更新。这些类还将处理将记录插入数据库并通知网站您有新数据。我使用 SignalR 从 C# 应用程序到 asp.net Web 应用程序执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T18:52:45.460

使用 WSO2 BAM。它旨在完全按照您的要求做，并且是开源的。下载并运行几个示例。下载[二进制文件和文档](http://wso2.com/products/business-activity-monitor)。它有一个非常快速的 Java SDK 来发布自定义数据。还有一个用于相同目的的 REST API。这会让您感兴趣，因为您使用的是 C#。

# c++ - C ++ SDL初始化一切并获得运行时错误

> ID：12097823
> 
> 赞同：0
> 
> 时间：2012-08-23T18:22:30.250
> 
> 标签：c++, runtime, sdl

我只是试图省略 SDL_Init() 函数，但一切仍在工作。我的意思是音频和图形。这是否意味着此功能无用？

此外，当我关闭程序时出现运行时错误：“此应用程序已请求运行时以不寻常的方式终止它。请联系应用程序的支持团队以获取更多信息”

这可能是什么原因造成的？我正在正确关闭所有内容：

```
SDL_FreeSurface(Screen);
SDL_FreeSurface(Message);
Mix_FreeMusic(mus2);
TTF_CloseFont(Font);
TTF_Quit();
SDL_Quit(); 
```

这些是我使用的唯一表面/字体/音乐：

```
//The surfaces
TTF_Font *Font = NULL;
SDL_Surface *Screen = NULL;
SDL_Surface *Message = NULL;
Mix_Music *mus2 = Mix_LoadMUS("./music.mp3"); 
```

如果需要整个源代码，请询问！

编辑：错误是由于我试图释放屏幕表面！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T17:32:38.500

该错误是由于我试图释放屏幕表面，这实际上是 SDL_Quit() 所做的任务。我不知道我为什么这样做：P

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T12:28:19.027

的主要功能`SDL_Init()`似乎是错误处理（除了初始化各种子系统）。从源代码中`SDL_Init()`调用以下函数：

```
void SDL_InstallParachute(void)
{
/* Set a handler for any fatal signal not already handled */
int i;
#ifdef HAVE_SIGACTION
struct sigaction action;

for ( i=0; SDL_fatal_signals[i]; ++i ) {
    sigaction(SDL_fatal_signals[i], NULL, &action);
    if ( action.sa_handler == SIG_DFL ) {
        action.sa_handler = SDL_Parachute;
        sigaction(SDL_fatal_signals[i], &action, NULL);
    }
}
#ifdef SIGALRM
/* Set SIGALRM to be ignored -- necessary on Solaris */
sigaction(SIGALRM, NULL, &action);
if ( action.sa_handler == SIG_DFL ) {
    action.sa_handler = SIG_IGN;
    sigaction(SIGALRM, &action, NULL);
}
#endif
#else
void (*ohandler)(int);

for ( i=0; SDL_fatal_signals[i]; ++i ) {
    ohandler = signal(SDL_fatal_signals[i], SDL_Parachute);
    if ( ohandler != SIG_DFL ) {
        signal(SDL_fatal_signals[i], ohandler);
    }
}
#endif /* HAVE_SIGACTION */
return;
} 
```

该函数建立了一个安全网，可以处理初始化子系统似乎无法处理的运行时错误。这可能解释了您在退出应用程序时遇到的运行时错误，因为这可能不会由子系统处理。

简而言之，如果开发人员希望调用库的初始化方法只是为了安全，您应该始终调用它。

# python - 为模型表单额外字段指定小部件（Django）

> ID：12097825
> 
> 赞同：27
> 
> 时间：2012-08-23T18:22:47.897
> 
> 标签：python, django, django-forms, extra

我必须在我的模型表单中添加额外的字段。我的做法是：

```
class MyForm(forms.ModelForm):
    extra_field = forms.CharField()
    class Meta:
        model = MyModel
        widgets = {
            #Does not work
            'extra_field': forms.Textarea(attrs={'placeholder': u'Bla bla'}),
        } 
```

但似乎`extra_field`at的小部件定义`class Meta`被忽略了，因为我在模板上有一个裸*输入*标签而不是*textarea 。*所以我应用下一个方法：

```
class MyForm(forms.ModelForm):
    #It works fine
    extra_field = forms.CharField(widget=forms.Textarea())
    class Meta:
        model = MyModel 
```

它对我来说非常有效，但我曾经在`class Meta`声明时为表单字段指定小部件。所以我想知道：

为什么我的第一种方法不起作用？我做错了什么？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-23T18:28:32.167

如果它是一个额外的字段并不重要。这有效：

```
class FooForm(forms.ModelForm):
    class Meta:
        model = People
        widgets = { 
            'name': forms.Textarea(attrs={'placeholder': u'Bla bla'}),
        } 
```

这不会：

```
class FooForm(forms.ModelForm):
    name = forms.CharField()

    class Meta:
        model = People
        widgets = { 
            'name': forms.Textarea(attrs={'placeholder': u'Bla bla'}),
        } 
```

这[确实没有记录](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#overriding-the-default-field-types-or-widgets)，这是我在可能与该行为相关的文档中找到的最好的（也许它没有，这只是我能找到的最好的）：

> **如果你像这样显式地实例化一个表单域，Django 假设你想要完全定义它的行为**[...]**你必须在声明表单域时显式地设置相关的参数**。

此行为的实现在 django/forms/models.py 第 219 行：

```
 204         if opts.model:
   205             # If a model is defined, extract form fields from it.
   206             fields = fields_for_model(opts.model, opts.fields,
   207                                       opts.exclude, opts.widgets, formfield_callback)
   208             # make sure opts.fields doesn't specify an invalid field
   209             none_model_fields = [k for k, v in fields.iteritems() if not v]
   210             missing_fields = set(none_model_fields) - \
EE 211                              set(declared_fields.keys())
   212             if missing_fields:
   213                 message = 'Unknown field(s) (%s) specified for %s'
   214                 message = message % (', '.join(missing_fields),
   215                                      opts.model.__name__)
   216                 raise FieldError(message)
   217             # Override default model fields with any custom declared ones
   218             # (plus, include all the other declared fields).
   219             fields.update(declared_fields) 
```

在第 206 行之后，fields['name'].widget**确实**是 Meta.widgets 中指定的 Textarea。

在第 219 行，fields 更新为 declared_fields，fields['name'].widget 变为 django.forms.widgets.TextInput，这是 CharField 的默认值。

显然，明确的字段定义具有优先权。

感谢您的提问，很高兴知道，很好的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-19T13:07:00.157

我用以下方法解决了上述情况：

```
class FooForm(forms.ModelForm):
    name = forms.CharField(widget=TextArea(attrs={'placeholder': u'Bla bla'}))
    class Meta:
        model = People 
```

# c# - 如何在一个ID处打印给定ID中的asp按钮OnClick按钮的返回值？

> ID：12097829
> 
> 赞同：0
> 
> 时间：2012-08-23T18:23:02.047
> 
> 标签：c#, asp.net, html

我正在提交以下表格：

```
 <td colspan="2">
  <asp:TextBox Width="100%" Height="200px" ID="NoteTextBox" CssClass="tb_sm"  Style="text  align:left"
     runat="server" TextMode="MultiLine"></asp:TextBox></td></tr>
 <tr><td align="right"> <asp:Button ID="Done" runat="server" Text="Done" OnClick="Done_click"/></td>

 public string Done_click(object sender, EventArgs e) {
        String a = NoteTextBox.Text;
        // on the basis of that value i have to return a string
          if(a == "xyz") {retrun "Ok"}
          else {return "nop"}
      } 
```

根据某些条件从`Done_click`方法返回一个字符串，我没有得到的是在给定的打印返回值`ID=NoteTextBox`。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T18:37:35.927

试试看。

```
public string Done_click(object sender, EventArgs e)
{
    String a = NoteTextBox.Text;
    // on the basis of that value i have to return a string
      if    (a == "xyz") 
      {
            form1.Controls.Add( new Literal( { ID = "Literal1", Text = a } ) );
                or 
           Response.Write(a); // It will write at the top of the page so use above code
      }
      else 
       {
            form1.Controls.Add( new Literal( { ID = "Literal1", Text = "nop" } ) );
       }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T18:38:14.923

因为为了在 asp.net 中打印值，就像 php 一样，您使用`echo`. 在 asp.net 中，您必须使用`Response.Write()`Method；

```
String a = NoteTextBox.Text;
if(String.Compare(a, "xys") == 0)
{
       Response.Write("ok");
}
else
{
    Response.Write("Not ok");
} 
```

您将在页面顶部看到输出。我还提到了 String.Compare() 如果成功则返回 0。它基本上是.net String 类方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T18:32:23.377

您可以使用 Response.Write() 来测试您的回报；

```
public string Done_click(object sender, EventArgs e) {
        String a = NoteTextBox.Text;
        // on the basis of that value i have to return a string
          if(a == "xyz") {Response.Write(a);}
          else {Response.Write("nop");}
      } 
```

您在屏幕顶部的响应流上打印

您还可以在屏幕上添加标签，并设置值

```
LabelTest.Text = a; 
```

# bash - 如何在没有需要库的情况下将系统错误重定向到文件？

> ID：12097839
> 
> 赞同：2
> 
> 时间：2012-08-23T18:23:52.053
> 
> 标签：bash, io

我正在尝试将系统给我的错误放入文件中。我有以下脚本：

```
#!/bin/bash

logfile="output.log"

echo "Starting" > $logfile

./cpi 2>&1 >> $logfile

echo "Ending" >> $logfile

exit 
```

我在文件`output.log`中得到的输出如下：

```
Starting
Ending 
```

但在屏幕上我看到了这个：

```
./cpi: error while loading shared libraries: libmpich.so.3: cannot open shared object file: No such file or directory 
```

错误是故意的。我从我的#LD_LIBRARY_PATH 中取出了该库的路径。关键是，如果脚本在另一台机器上运行并且库不存在，我想得到屏幕上的错误。

我还需要我自己的程序的输出，因此我需要`2>&1 >> $logfile`它的执行之后。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T18:33:38.917

我可能是误会了。

如果您希望标准输出和标准错误 from`cpi`都转到 to `$logfile`，请交换重定向的顺序：

```
./cpi >> $logfile 2>&1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T18:29:23.050

此错误由加载程序报告，而不是 cpi 二进制文件，因此重定向在此处不起作用。您可以通过生成 cpi 内部错误来对此进行测试。如果您使用包装脚本启动 cpi，您可能会记录此错误。

# mysql - 慢性 InnoDB 表损坏

> ID：12097843
> 
> 赞同：0
> 
> 时间：2012-08-23T18:24:18.300
> 
> 标签：mysql, innodb, corruption, percona

我有一个使用率很高的表（许多更新/秒），每周左右似乎都会损坏。日志尚无定论，但表的标准 InnoDB 恢复（选择到新表，截断旧表并插入回旧表）解决了我们的问题。

我的第一个建议是将表从 InnoDB 移动到 MEMORY，因为它的更新吞吐量很高，但被拒绝了。有人对如何制止明显的腐败有任何建议吗？

MySQL 版本：Percona XtraDB Cluster 5.5.24

操作系统：CentOS 6.2 64bit

**编辑：**日志中显示的错误是“读取表格时出现错误 -1”

# ruby-on-rails - 在 ruby 中按年龄范围对用户进行分组

> ID：12097844
> 
> 赞同：6
> 
> 时间：2012-08-23T18:24:22.323
> 
> 标签：ruby-on-rails, ruby, activerecord, group-by, range

我正在尝试按年龄范围列出用户数量：

```
Range  : #Users
10-14  : 16
15-21  : 120
22-29  : 312
30-40  : 12131
41-70  : 612
71-120 : 20 
```

我正在考虑创建一个静态哈希数组：

```
AGE_RANGES = [
  {label:"10 - 14", min:10, max:14},
  {label:"15 - 21", min:15, max:21},
  {label:"22 - 29", min:22, max:29},
  {label:"30 - 40", min:30, max:40},
  {label:"41 - 70", min:41, max:70},
  {label:"71 - 120", min:71, max:120}
] 
```

然后将其用于我的搜索过滤器以及我的查询。但是，我想不出一种能从中获得最大性能的方法。

我在模型中的方法仅按年龄分组：

```
def self.group_by_ageRange(minAge, maxAge)

  query = User.group("users.age")
              .where("users.age BETWEEN minAge and maxAge ")
              .select("users.age,
                        count(*) as number_of_users")

end 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T20:21:36.907

您想构建一些如下所示的 SQL：

```
select count(*),
       case
           when age between 10 and 14 then '10 - 14'
           when age between 15 and 21 then '15 - 21'
           -- ...
       end as age_range
from users
where age between 10 and 120
group by age_range 
```

在 ActiveRecord 术语中，这将是：

```
# First build the big ugly CASE, we can also figure out the
# overall max and min ages along the way.
min   = nil
max   = nil
cases = AGE_RANGES.map do |r|
    min = [r[:min], min || r[:min]].min
    max = [r[:max], max || r[:max]].max
    "when age between #{r[:min]} and #{r[:max]} then '#{r[:min]} - #{r[:max]}'"
end

# Then away we go...
age_ranges = Users.select("count(*) as n, case #{cases.join(' ')} end as age_range")
                  .where(:age => min .. max)
                  .group('age_range')
                  .all 
```

这将为您留下一组对象`age_ranges`，这些对象将具有`n`和`age_range`方法。如果你想要一个哈希，那么：

```
age_ranges = Hash[age_ranges.map { |r| [r.age_range, r.n] }] 
```

当然，这不包括没有任何人的范围；我将把它作为练习留给读者。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-10-11T14:43:52.123

我发现接受的答案有点密集。快速但难以理解和编写。今天，我想出了一个更慢但更简单的解决方案。由于我们将年龄分组为范围，我们可以假设我们的[值不会超过 125](https://en.wikipedia.org/wiki/List_of_the_verified_oldest_people)

这意味着如果您在分组和计数的结果集上使用 ruby​​ 过滤器，您将不会迭代超过 125 个项目。这将比基于 sql 范围的组/计数慢，但它对于我的目的来说已经足够快了，同时仍然依赖数据库来完成大部分繁重的工作。迭代少于 125 个项目的哈希似乎没什么大不了的。特别是当键值对只是这样的整数时：

```
{
  0 => 0,
  1 => 1,
  3 => 5,
  25 => 3,
  99 => 3
} 
```

这是伪代码：

```
users = User
  .where(age: (min..max))
  .group(:age)
  .count(:age)
group = Hash.new(0)
users.each{|age, count|
      case
      when age <= 10
        group['under 10'] += count
      when age <= 25
        group['11-25'] += count
      when age <= 40
        group['26-40'] += count
      else
        group['41+'] += count
      end
} 
```

注意：此解决方案提供给定范围内的用户数。

# python - 为什么从 python 中的对象显式子类化会导致全局 NameError 异常？

> ID：12097845
> 
> 赞同：2
> 
> 时间：2012-08-23T18:24:27.957
> 
> 标签：python

我正在使用的一些遗留代码有效[代码替换为问题重现代码]：

```
class foo:
    pass

class bar(foo):
    def __new__(cls):
        global BIZ
        if BIZ is not None:
            pass

bar() 
```

但是当我把它改成

```
class foo(object): 
```

然后python打印：

```
Traceback (most recent call last):
  File "test.py", line 11, in <module>
    bar()
  File "test.py", line 8, in __new__
    if BIZ is not None:
NameError: global name 'BIZ' is not defined 
```

为什么是这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T18:36:13.130

[`__new__`特殊方法](http://docs.python.org/reference/datamodel.html#object.__new__)仅适用于[新式类](http://docs.python.org/reference/datamodel.html#new-style-and-classic-classes)（直接或间接继承自的类`object`）。没有子类化`object`你的代码不会被调用。

# web-crawler - 查找一个国家的“所有”域

> ID：12097848
> 
> 赞同：5
> 
> 时间：2012-08-23T18:24:49.803
> 
> 标签：web-crawler, tld

我正在寻找一种方法来查找以给定 tld 结尾的“所有”站点。我对如何实现这一点有几个想法，但我不确定实现这一点的最佳/最有效的方法是什么。我知道蜘蛛等无法找到无处链接的页面，所以在这个例子中我不会关心孤立的页面。我想要做的是，我想要一个 TLD 作为我的程序的输入，并且我想要一个站点列表作为输出。例如：

```
# <program> .de
- spiegel.de
- deutsche-bank.de
...
- bild.de 
```

那么实现这一目标的最佳方法是什么？是否有工具可以帮助我，或者您将如何编程？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-10-18T12:15:31.017

*这个答案可能有点晚了，但我刚刚发现了这个。*

您可以尝试使用**Common Crawler**很棒的数据。

那么，**什么是普通爬虫？**

> Common Crawl 是一家 501(c)(3) 非营利组织，致力于免费向互联网研究人员、公司和个人提供互联网副本，以进行研究和分析。

使用他们的[url 搜索工具](http://urlsearch.commoncrawl.org/)查询，`.de`然后将结果下载为`json`文件。

您将获得一个很好的结果文件，然后您需要对其进行一些工作，因为它包含域的所有站点地图（因此是爬网）。

一些网站使用不受欢迎的文件的另一个缺点是`robot.txt`爬虫不会被包括在内，但这是迄今为止我能找到的最好的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-09T11:00:56.670

下面的代码是 python3 中的多线程域检查器脚本，它使用类似强力字符串生成器的东西附加到列表中，并且该列表具有字符的所有可能组合（取决于指定的长度）也许你需要添加一些字符。我成功地将它用于中文、俄文、荷兰文网站。

```
from multiprocessing.pool import ThreadPool
from urllib.request import urlopen
import pandas as pd

from itertools import product

chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890' # add all chars in your language
urls = []# list
for length in range(0, 9999): # Change this length 
    to_attempt = product(chars, repeat=length)
    for attempt in to_attempt:
        a=("https://"+''.join(attempt)+".de")
        urls.append(a)

import sys
sys.stdout = open('de.csv','wt')
def fetch_url(url):
    try:
        response = urlopen(url)
        return url, response.read(), None
    except Exception as e:
        return url, None, e

start = timer()
results = ThreadPool(4000).imap_unordered(fetch_url, urls)
for url, html, error in results:
    if error is None:
        print(url) 
```

# multithreading - 从 Silverlight 调用 NtQueryTimerResolution

> ID：12097850
> 
> 赞同：0
> 
> 时间：2012-08-23T18:24:53.930
> 
> 标签：multithreading, .net-4.0, silverlight-5.0

我有 Silverlight 库项目，其中包含大量控件。

我想将某个时间点的 PC 计时器分辨率降低到 5 毫秒。

我尝试使用 NtQueryTimerResolution 但出现异常：

```
Attempt by security transparent method SetupTimer() to call native code through method
NtQueryTimerResolution(UInt32 ByRef, UInt32 ByRef, UInt32 ByRef) failed.  Methods must be
security critical or security safe-critical to call native code. 
```

设置计时器方法具有安全属性..所以我不明白有什么问题...

```
 [SecuritySafeCritical]
    private void SetupTimer()
    {
        uint resolution = 0;

        NtSetTimerResolution(50000, true, ref resolution);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T09:01:52.100

找到解决方案 - 在 Silverlight 应用程序项目属性中选中“在浏览器中运行时需要提升信任”。

# javascript - var = {} 和 var = [] 之间的区别？

> ID：12097851
> 
> 赞同：11
> 
> 时间：2012-08-23T18:24:55.770
> 
> 标签：javascript

> **可能重复：**
> [Javascript 中的对象与数组的键/值对](https://stackoverflow.com/questions/688097/objects-vs-arrays-in-javascript-for-key-value-pairs)

我在 JavaScript 中有一个变量，我像*hash*一样使用它。我可以像这样初始化它：

```
var selected = []; 
```

或者

```
var selected = {}; 
```

它做同样的事情。例如，我正在使用它：

```
selected["one"] = 1;

if (selected["one"] == 1) console.log("one is selected"); 
// result: one is selected

if (selected["two"] != 1) console.log("two is not selected");
// result: two is not selected

selected["one"] = 0;

if (selected["one"] != 1) console.log("one is no longer selected");
// result: one is no longer selected 
```

真的有区别吗？一个是*对象*，另一个是*数组*吗？如果是这样，我应该什么时候遇到问题。即，两者在用法上有什么区别，你为什么要选择一个而不是另一个？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-23T18:27:41.817

`[]`是一个数组，`{}`是一个对象。数组是一种旨在仅分配数字键的对象。

虽然理论上你可以互换使用它们，但看看当你对它们进行 JSON 化时会发生什么：

```
var tmp = []; // or: var tmp = {}
tmp.one = 1;
JSON.stringify(tmp);

// array:
'[]'

// object:
'{"one":1}' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-23T18:31:59.013

Array ( `[]`) 是Object ( ) 的*一种*`{}`。主要区别在于：

*   数组有一个神奇的`length`属性，它等于最高设置的数字键（加一）：

    ```
    var a = [];
    a[100] = 0;
    a.length; // is 101

    var o = {};
    o[100] = 0;
    o.length; // is undefined 
    ```

*   Array 的`toString`方法打印出数字键的值：

    ```
    var a = [];
    a[0] = 5;
    a[1] = 6;
    a[2] = 7;
    a.toString(); // "[5,6,7]"

    var o = {};
    o[0] = 5;
    o[1] = 6;
    o[2] = 7;
    o.toString(); // "[object Object]" 
    ```

*   数组有很多处理记录的特定函数：

    ```
    > Object.getOwnPropertyNames(Array.prototype)
    ["join", "toLocaleString", "sort", "some", "lastIndexOf", "splice", "map",
     "constructor", "every", "unshift", "shift", "indexOf", "pop", "forEach", "reverse",
     "reduce", "slice", "concat", "filter", "toString", "reduceRight", "push", "length"] 
    ```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-23T18:31:00.430

是的，`{}`是一个空对象并且`[]`是一个空数组。请注意，数组*是*一种对象，经过优化以处理值列表，但是，与任何 Javascript 对象一样，它可以接受其他属性，例如`"one"`or `"two"`— 这就是它可以支持方法的方式，例如`myArray.push(1)`:`push`是所有数组的属性。事实上，你甚至可以毫不费力`myArray["push"] = someOtherFunction`地说重写。`push`与所有 Javascript 对象一样，数组支持任意键值分配。

不过，归根结底，它与幕后表演有关。如果您正在寻找存储值的顺序列表，该数组将更好地处理它并提供一些有用的属性，如`push`、`shift`、`length`等。另外，未来的开发人员实际上会知道您在做什么。如果您只想存储键值对，那么对象就是要走的路，因为它不会被所有额外的重量所困扰。

简而言之，虽然它们都支持键值对，但它们在幕后却大不相同。不要太担心它，并使用更适合手头工作的那个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T18:31:00.747

using`{}`是一个对象，它是 Javascript 中每个复杂类型的基础。您可以将数组视为对象的原因是因为在 Javascript 中数组*是*一个对象（但不是相反）。

Javascript 中的方括号是您访问对象属性的方式，很像`.`C、Java、Python 等中的符号。恰好数组在属性 0、1、2 等处具有值。数组也有一个整体一堆其他内置属性，如`length`, `shift`,`push`等。

这肯定是过于简单化了，但它是理解正在发生的事情的简单方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-23T18:36:19.013

数组是对象，但对象不是（总是）数组。数组具有并非每个对象都存在的方法和属性示例

```
[].length //0
{}.length //undefined
typeof []['slice'] //function
typeof {}['slice'] //undefined 
```

如果您将数组用作哈希图并尝试将已经存在的东西用作键，您将遇到麻烦

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-23T18:36:48.433

`[]`适用于数组，`{}`适用于普通对象。请注意，[数组](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array)是具有许多[方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array#Methods)和属性的对象，这些方法和属性允许对列表进行建模（例如，push、slice、...）。

正如 MDN 文档中所指出的，[您不应该将数组用作关联数组](http://andrewdupont.net/2006/05/18/javascript-associative-arrays-considered-harmful/)，即数组不能用作哈希表。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-08-23T18:28:38.590

第一个是 a `array`，第二个是 a `literal object`：

```
var a = {};
a.SomeProperty = 1;

console.log(a.SomeProperty);

var b = [];
b['SomeProperty'] = 2;

console.log(b['SomeProperty']); 
```

这将在控制台日志中`1`输出。`2`

`For hashing, use an array`（**错误**），感谢您的评论。

# git - 据称使用 GIT 时，NetBeans diff 中的 UTF8 字符发生了变化

> ID：12097853
> 
> 赞同：0
> 
> 时间：2012-08-23T18:24:57.120
> 
> 标签：git, netbeans, utf-8, diff

图片说明一切：

![文件上的图形差异](../Images/62ed36a95e7a9b259de03aae68ad7880.png)

![文件上的文本差异](../Images/966c56f93b8f0e32e2fead3c116896bd.png)

问题是该方法的注释并没有真正改变，但 diff 表明它们在 UTF8 字符上发生了变化。

我正在使用 NetBeans IDE 7.2（内部版本 201207171143）、OS X 10.8（12A269）、git 1.7.9.6（Apple Git-31.1）。

# multi-tenant - ofBiz 多租户设置但无法登录租户？

> ID：12097854
> 
> 赞同：0
> 
> 时间：2012-08-23T18:24:58.253
> 
> 标签：multi-tenant, ofbiz

我已经按照[这个页面](https://cwiki.apache.org/OFBIZ/multitenancy-support.html)设置了Biz多租户，可以默认登录，但不能登录租户DEMO1或DEMO2。我做了以下事情：

```
svn co https://svn.apache.org/repos/asf/ofbiz/trunk ofbiz.12.04-tenants
cd ofbiz.12.04-tenants
./ant
java \-Xmx512m \-XX:MaxPermSize=128m \-jar ofbiz.jar \-install \-readers=seed \-    delegator=default
java \-Xmx512m \-XX:MaxPermSize=128m \-jar ofbiz.jar \-install \-readers=seed \-delegator=default#DEMO1
java \-Xmx512m \-XX:MaxPermSize=128m \-jar ofbiz.jar \-install \-readers=seed \-delegator=default#DEMO2
./ant load-demo-multitenant 
```

使用 vi 将多租户选项更改为 Y，如下所示。

```
vi framework/common/config/general.properties
./ant start 
```

当我使用 admin、ofbiz 和空白租户 ID 登录时，我被允许进入 ofBiz。当我使用 admin、ofbiz 和 DEMO1（或 DEMO2）TenantID 登录时，我得到：

```
The Following Errors Occurred: 
following error occurred during login: User not found. 
```

我想知道我是否错过了一些配置步骤来打开租户 DEMO1 和 DEMO2 的阅读器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T12:41:47.967

请原谅我以前的帖子，它现在正在工作。我去了另一台机器并遵循以下程序：

```
svn co https://svn.apache.org/repos/asf/ofbiz/trunk ofbiz.12.04-tenants 
cd ofbiz.12.04-tenants 
./ant load-demo-multitenant 
```

在下面将多租户更改为 Y。

```
vi framework/common/config/general.properties 
./ant start 
http://localhost:8080/catalog 
```

我现在可以登录到 admin、ofbiz、default；演示 1 和演示 2。

# sencha-touch - JSON解析问题sencha touch 2

> ID：12097857
> 
> 赞同：0
> 
> 时间：2012-08-23T18:25:07.870
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我有以下需要显示在列表（位置数组）中的 json。我可以使用**rootProperty 获取位置数组：response.data.locations**但我如何获得成功、徽标和背景图片。任何建议都会有所帮助。

```
Ext.data.JsonP.callback1(
{
    "response": {
        "success": true,
        "data": {
            "logo": "http:\\/\\/www.websiteurl.nl\\/Images\\/logo.jpg",
            "backgroundpicture": "http:\\/\\/www.websiteurl.nl\\/Images\\/logo.jpg",
            "locations": [
                {
                    "id": "47",
                    "name": " 's-Gravenzande (De Carlton)",
                    "street": "Naaldwijkseweg",
                    "number": "257",
                    "zipcode": "2691 PV",
                    "city": "'s Gravenzande",
                    "province": "9",
                    "phone": "0174-412997",
                    "email": "info@websiteurl.nl",
                    "kvk": "27210224",
                    "lat": "51.988593",
                    "longitude": "4.188087",
                    "slug": "-sGravenzande-De-Carlton",
                    "website": "http:\\/\\/www.websiteurl.nl",
                    "logo": null,
                    "backgroundpicture": null
                },
                {
                    "id": "1",
                    "name": "Achterberg",
                    "street": "Weteringsteeg",
                    "number": "12",
                    "zipcode": "3911 VN",
                    "city": "Achterberg",
                    "province": "7",
                    "phone": "0317-613643",
                    "email": "info@websiteurl.nl",
                    "kvk": "30093218",
                    "lat": "51.976316",
                    "longitude": "5.601611",
                    "slug": "-Achterberg",
                    "website": "http:\\/\\/www.websiteurl.nl",
                    "logo": null,
                    "backgroundpicture": null
                }

            ]
        }
    }
}
); 
```

如果我在我的商店中添加一个监听器然后记录这些东西然后我会得到这些值但我的意思是我如何解析这个并将它存储在我的商店中

```
Ext.define("app.store.LocationStore",{
extend:'Ext.data.Store',
id: 'locationStore',

requires: 'Ext.data.proxy.JsonP',

config:{
    autoLoad: 'true',
    model:'app.model.LocationModel',

    proxy:
    {
        type:'jsonp',
        url:'http://www.websiteurl.nl/API/',
        limitParam: false,
        pageParam: false,
        startParam: false,
        extraParams:
        {
            method:'general',
            token: '123456'

        },
        reader:{
            type:'json',
            successProperty: 'success',
            rootProperty: 'response.data.locations'
        }
    },
    listeners:{
        load : function()
        {console.log(this.getProxy().getReader().rawData.response.data.backgroundpicture);
            console.log(this.getProxy().getReader().rawData.response.data.logo);
            console.log(this.getProxy().getReader().rawData.response.success);
            console.log("location store loaded");
        }
    }
}
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T04:25:54.453

您需要根据数据结构使用[hasOne](http://docs.sencha.com/touch/2-0/#!/api/Ext.data.association.HasOne)和[hasMany](http://docs.sencha.com/touch/2-0/#!/api/Ext.data.association.Association)关联来构建模型。

```
Ext.define('myApp.model.MyModel', {
    extend: 'Ext.data.Model',
    config: {
        fields  : [
            {
                name : 'success'
            }
        ],
        hasOne : [
            {
                model          : 'myApp.model.Data,
                name           : 'data',
                associationKey : 'data'
            }
        ]
    }
});

Ext.define('myApp.model.Data, {
    extend: 'Ext.data.Model',
    config: {
        fields  : [
            {
                name : 'logo'
            },
            {
                name : 'backgroundpicture'
            }
        ],
        hasMany : [
            {
                model          : 'myApp.model.Location',
                name           : 'locations',
                associationKey : 'locations'
            }
        ]
    }
});

Ext.define('myApp.model.Location', {
    extend: 'Ext.data.Model',
    config: {
        fields  : [
            {
                name : 'id'
            },
            {
                name : 'name'
            },
            {
                name : 'street'
            }
    ...to be continued... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T10:33:04.937

您还可以使用简单的 JSONP 请求来填充数据并将它们添加到存储中。它会是这样的：

```
Ext.data.JsonP.request({
     url:'http://www.websiteurl.nl/API/',
     callbackKey: 'callback',
     params: {
         method:'general',
         token: '123456'
     },
     success: function(result, request) {
          //result.response.success
          //result.response.data.logo
          //result.response.data.backgroundpicture
          store.add(result.response.data.locations);
     }
}); 
```

# sql - SQL 8115 将数字转换为数据类型数字的算术溢出错误

> ID：12097859
> 
> 赞同：5
> 
> 时间：2012-08-23T18:25:32.503
> 
> 标签：sql, sql-server-2005

我在我的 SQL Server 2005 上收到一个错误

```
Server: Msg 8115, 
Arithmetic overflow error converting numeric to data type numeric. 
```

当我尝试在键入 的列中插入值 = **`X`**(DECIMAL(3,2)) * **`Y`**(INT)
`MYCOLUMN``DECIMAL (10,3)`

如何解决这个问题？

更新

下面的一些代码可以了解情况

```
-- ============================================================
--   Table : GP_WGENTH
-- ============================================================
CREATE TABLE #GP_WGENTH
(
     KEYINTERNAL                     CHAR(32)              NOT NULL,
     KEYHOUR                         INT                   NOT NULL,
     FIRM                            CHAR(5)               NOT NULL,
     CENTRE                          CHAR(2)               NOT NULL,
     SERVICE                         CHAR(6)               NOT NULL,
     AGENT                           CHAR(5)               NOT NULL,
     VERSION                         VARCHAR(3)            NOT NULL,
     DATE_ROULEMENT                  DATETIME              NOT NULL,
     SERVICEINSTANCE                 SMALLINT              NOT NULL,
     TYPEHOUR                        CHAR(9)               NOT NULL,
     QUANTITEFIXE                    DECIMAL(12,2)         NULL    ,
     TYPECMP                         INT                   NULL    ,
     PERCENTCALC                     DECIMAL(3,2)          NULL    
)
-- ============================================================
--   Table : GP_WGENSVCTH
-- ============================================================
CREATE TABLE #GP_WGENSVCTH
(
    KEYINTERNAL                     CHAR(32)              NOT NULL,
    KEYHOUR                         INT                   NOT NULL,
    FIRM                            CHAR(5)               NOT NULL,
    CENTRE                          CHAR(2)               NOT NULL,
    SERVICE                         CHAR(6)               NOT NULL,
    AGENT                           CHAR(5)               NOT NULL,
    VERSION                         VARCHAR(3)            NOT NULL,
    DATE_ROULEMENT                  DATETIME              NOT NULL,
    SERVICEINSTANCE                 SMALLINT              NOT NULL,
    TYPEHOUR                        CHAR(9)               NOT NULL,
    VALUE                           DECIMAL(10,3)         NOT NULL
)
GO

INSERT INTO #GP_WGENSVCTH 
            (KEYINTERNAL, 
             KEYHOUR, 
             FIRM, 
             CENTRE, 
             SERVICE, 
             AGENT, 
             VERSION, 
             DATE_ROULEMENT, 
             SERVICEINSTANCE, 
             TYPEHOUR, 
             VALUE) 
SELECT WTH.KEYINTERNAL, 
       WTH.KEYHOUR, 
       WTH.FIRM, 
       WTH.CENTRE, 
       WTH.SERVICE, 
       WTH.AGENT, 
       WTH.VERSION, 
       WTH.DATE_ROULEMENT, 
       WTH.SERVICEINSTANCE, 
       WTH.TYPEHOUR, 
       WTH.PERCENTCALC * SUM(SC.LENGTH) -- !!! BOOOM !!!!!!!!! HERE
FROM   #GP_WGENTH WTH 
       INNER JOIN GP_SERVICE_HABILLAGE_COMPONENT SC 
               ON WTH.FIRM = SC.FIRM 
                  AND WTH.CENTRE = SC.CENTRE 
                  AND WTH.SERVICE = SC.SERVICE 
                  AND WTH.VERSION = SC.VERSION 
                  AND WTH.TYPECMP = SC.TYPECMP 
WHERE  WTH.KEYINTERNAL = 'august 23 2012  10:45:21:027PM     ' 
       AND SC.LENGTH IS NOT NULL 
GROUP  BY WTH.KEYINTERNAL, 
          WTH.KEYHOUR, 
          WTH.FIRM, 
          WTH.CENTRE, 
          WTH.SERVICE, 
          WTH.AGENT, 
          WTH.VERSION, 
          WTH.DATE_ROULEMENT, 
          WTH.SERVICEINSTANCE, 
          WTH.TYPEHOUR, 
          WTH.PERCENTCALC 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-23T18:51:58.287

[MSDN 文档](http://msdn.microsoft.com/en-us/library/ms190476.aspx)中很好地介绍了必要的比例、精度和长度的规则。

小数只是一个缩放的整数，所以让我们看一个没有小数点的例子。

例如`X DECIMAL(3, 0)`和`Y DECIMAL(3, 0)`where`X = 100`和`Y = 100`，`X * Y = 10000`不适合`DECIMAL(3, 0)`，需要`DECIMAL(5, 0)`。事实上，`999 * 999 = 998001`这将需要`DECIMAL(6, 0)`.

因此，仅当目标列的容量至少与 MSDN 表中针对不同操作的公式所指示的容量一样大时，尝试插入两个十进制列相乘的结果才合适。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-23T18:56:47.333

You have two options here:

One is to expand the size of the `VALUE` field in the table `#GP_WGENSVCTH`. Obviously the `decimal(10,3)` is not large enough to hold the value you are trying to insert.

Two would be to change the datatype of the column in the table `#GP_WGENSVCTH` to a `float`

```
VALUE float 
```

Changing to a float, you will not have to worry about the value being too large for the precision and scale you set for the decimal

```
declare @dec decimal(10, 3) = 1111111.111 
declare @int int = 3

declare @float float

set @float = @dec * @int

select @float 
```

See [SQL Fiddle with demo](http://sqlfiddle.com/#!3/c7b0d/8) of the above code

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-23T18:44:38.133

假设 X 和 Y 的最大乘积可以`1 111 111 111,111`如您在评论中指出的那样，只需更改`MyColumn`为`decimal(13, 3)`.

试试看：

```
DECLARE @x decimal(13, 3)
SET @x = 1111111111.111 
```

没有错误。

您根本无法存储`1 111 111 111,111`在`decimal(10, 3)`.

# javascript - 将日期字符串转换为数字以进行比较

> ID：12097860
> 
> 赞同：1
> 
> 时间：2012-08-23T18:25:38.727
> 
> 标签：javascript, selenium-ide

我有这种格式的日期：

2011 年 1 月 4 日

我需要将这些日期转换为数字，然后进行比较以确保排序正确（升序或降序）。

我尝试过使用 Date.parse(s)，但我不断将 NaN 作为值返回。我相信这是把它搞砸的 3 个字母缩写之后的时期。

如何将这些日期字符串转换为数字？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T18:34:29.043

```
var myDate = "Jan. 4, 2011";
myDate = myDate.replace('.','');
var dateType = Date.parse(myDate); 
```

dateType 应该给你一个数字

# jquery - ruby on rails jqgrid

> ID：12097862
> 
> 赞同：0
> 
> 时间：2012-08-23T18:25:55.717
> 
> 标签：jquery, ruby-on-rails, jqgrid

我正在使用 Rails 应用程序。我正在使用 jqgrid 作为我的 html 响应。我需要导出选定的行（使用网格中显示的复选框）。我使用 rails fastercsv lib 来提取 .csv 中的数据，但它正在导出页面上显示的所有行。如何利用网格上可用的复选框仅导出选定的行？

我是 rails 和 jqgrid 的新手，所以任何回复都将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T09:07:16.540

这就是如何从 jqgrid 中获取所选行的方法。

```
var selRowIds = grid.jqGrid('getGridParam', 'selarrrow');
           if(selRowIds.length>0)
           {
           for( var i=0;i<selRowIds.length;i++){

           var Name=getCellValue(selRowIds[i],'Name');
           var Company=getCellValue(selRowIds[i],'Company');
$.ajax({
           type: 'POST',
           url: '@Url.Action("ExportToCSV")',
           contentType: 'application/json; charset=utf-8',
           data:JSON.stringify({Name:Name,Company:Company}),
           dataType: "json",
          success:function(){
                   grid.trigger("reloadGrid");
            }

               });
}
} 
```

现在我将解释这段代码是如何工作的。我在我的 jqgrid 参数中使用 multiselect:true ，所以我可以在每一行中获取我的复选框。现在，如果我检查 5 行，它们将被选中，我可以使用 selarrow 获取它们的行 ID，就像我在代码中所做的那样，然后假设你的 jqgrid 列中有名称和公司，那么我可以获得它们的值就像我在我的代码中所做的那样，然后您可以使用 jquery 向服务器方法（exportToCSV）发出 ajax 请求，在您的情况下将在 ruby​​-rails 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-29T10:15:10.957

[https://github.com/kumarsaurabh20/nextGenBiosensors/blob/master/app/views/oligo_sequences/index.html.erb#L26](https://github.com/kumarsaurabh20/nextGenBiosensors/blob/master/app/views/oligo_sequences/index.html.erb#L26)

从第 24-44 行开始。需要使 async:false 意味着同步 ajax 调用是解决方案。

# web-services - Magento 请求 - 前端、后端还是 API？

> ID：12097869
> 
> 赞同：0
> 
> 时间：2012-08-23T18:26:24.843
> 
> 标签：web-services, api, events, magento

好的 - 我已阅读并喜欢关于 Magento 前端/后端的讨论，并同意 Ben 在[Magento Request - Frontend or Backend 中的回答？](https://stackoverflow.com/questions/9693020/magento-request-frontend-or-backend)

现在让我们提高一个档次。我们有一个客户拥有高度定制的解决方案，我们使用 Magento 观察者调用 Web 服务，更新企业 CRM 系统中的客户和客户地址数据。这些事件与 customer_save_before、customeraddress_save_before 事件无关，并且在前端和 adminhtml 端的调用略有不同（感谢 Ben！）。

现在我们看到一个循环情况，CRM 系统使用 Magento API 将更新插入到 Magento 中，这会触发 customer_save_before 事件，然后我们将数据发送回 CRM - 然后再次调用 Magento API，等等，等等，直到整个房子-o-cards倒塌。

我希望能够屏蔽入站 API 调用，但是，我找不到任何有关如何执行此操作的信息。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T18:52:28.673

您可以检查谁调用了该事件的块。试试看：

```
$block = $observer->getEvent()->getBlock();
    if ($block instanceof Your_block_name) {
//do something 
```

或者，您可以更改法师核心代码，以便在调度事件时为您的控件发送一些额外的数据。像那样：

```
Mage::dispatchEvent('customer_save_before',array('flag'=>'1')); 
```

或类似的东西。但是，如果这个事件被同一个块从同一个地方调用，并且没有任何其他行为知道它何时被 magento 或 web 服务调用，那么它是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T20:56:18.833

更新我之前的答案 - formdata 检测工作正常，但是，我认为这会更好 -

查看 request_uri 并查看 api 已被调用。

```
if (stripos($_SERVER['REQUEST_URI'], "index.php/api")) {
   $ApiCall=true;
} 
```

如果是这样，那么设置一个标志或做任何事情。

# java - JPA 插入和更新

> ID：12097871
> 
> 赞同：0
> 
> 时间：2012-08-23T18:26:38.760
> 
> 标签：java, jpa-2.0, ejb-3.1

我正在学习 EJB3.1 和 JPA2

我正在为插入和更新做以下事情

插入

```
Common com = new Common();
com.setKeyData(keyData);
com.setKeyValue("0001");
em.persist(com); 
```

更新

```
Common com = em.find(Common.class, pk);
com.setKeyValue("0002"); 
```

上面的代码有效，但我想知道插入和更新是否只需要这样做。我看到很少有他们做 begin()、commit() 等的帖子（可能在 Swing 应用程序中使用）。由于我是 JPA/ORM 的新手，我真的很想知道上述代码是否足以用于具有大量数据负载的应用程序，是否有任何我遗漏的内容，或者我应该阅读/了解有关插入/更新数据的更多信息。

我应该何时使用 EntityManager 的 close、clear 和 flush 方法，在哪种情况下使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T18:44:31.970

在大多数情况下，您的代码应该没问题。在许多 EJB 开发中，事务的生命周期将由容器处理——因此无需显式标记事务的开始。

对于更细粒度的控制，您还可以使用 Bean 托管事务，您需要在其中调用 begin 和 commit/rollback 来自己管理生命周期。

有关更多详细信息，请查看：

容器管理： http: [//java.sun.com/j2ee/tutorial/1_3-fcs/doc/Transaction3.html](http://java.sun.com/j2ee/tutorial/1_3-fcs/doc/Transaction3.html) bean管理：http: [//java.sun.com/j2ee/tutorial/1_3-fcs/doc/Transaction4 .html](http://java.sun.com/j2ee/tutorial/1_3-fcs/doc/Transaction4.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T18:50:43.390

将 EJB 与 JPA 一起使用时，您不必担心在开始事务、提交它们之后。所有这些都由底层的 Container 完成。使用 EJB 时，您只需要使用 @PersistentContext(name="CustDB") 对其进行注释

```
@PersistenceContext(name="PersistentUnitName")
private EntityManager entityManager; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T18:51:01.687

begin/commit 用于控制事务（以确保[ACID](http://en.wikipedia.org/wiki/ACID)），如果这不是由其他人为您完成的（参见其他帖子）。

事务的可能用法如下所示：

```
EntityManager em = ...
EntityTransaction tx = null;
try {
  tx = em.getTransaction();
  tx.begin();
  // your code that should be executed within the transaction
  tx.commit();
} catch(Exception ex) {
  // roll back if something failed
  if (tx != null && tx.isActive()) {
    tx.rollback();
  }
} finally {
  // make sure em is closed on commit and on rollback
  em.close();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T18:49:10.747

`EntityManager`如果它是应用程序管理的，您应该关闭它。这意味着您自己创建了它（没有注入）。如果您想自己管理事务（或 Bean Managed Transaction） ，您应该使用`begin`, ...。但通常您将使用(Container Managed Transaction) 并且此方法将无用。如果交易当前已打开，您可以在任何地方使用。如果要从持久性上下文中分离所有托管实体，可以使用方法。`commit``BMT``CMT``flush``clear`

但是我的回答很短，我认为[这个链接](http://en.wikibooks.org/wiki/Java_Persistence)对你有用。相关书籍中也有很多细节。

# java - Gson 自动添加类名

> ID：12097880
> 
> 赞同：13
> 
> 时间：2012-08-23T18:27:13.240
> 
> 标签：java, gson

可以说我有以下课程：

```
public class Dog {
    public String name = "Edvard";
}

public class Animal {
    public Dog madDog = new Dog();
} 
```

如果我通过 Gson 运行它，它会将其序列化如下：

```
GSon gson = new GSon();
String json = gson.toJson(new Animal())

result:
{
   "madDog" : {
       "name":"Edvard"
   }
} 
```

到目前为止一切都很好，但我想用 Gson 自动为所有类添加 className，所以我得到以下结果：

```
{
   "madDog" : {
       "name":"Edvard",
       "className":"Dog"
   },
   "className" : "Animal"
} 
```

有谁知道这是否可以通过某种拦截器或 Gson 实现？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-24T23:15:22.113

看看这个：[http ://code.google.com/p/google-gson/source/browse/trunk/extras/src/main/java/com/google/gson/typeadapters/RuntimeTypeAdapterFactory.java](http://code.google.com/p/google-gson/source/browse/trunk/extras/src/main/java/com/google/gson/typeadapters/RuntimeTypeAdapterFactory.java)

```
RuntimeTypeAdapterFactory<BillingInstrument> rta = RuntimeTypeAdapterFactory.of(
    BillingInstrument.class)
    .registerSubtype(CreditCard.class);
Gson gson = new GsonBuilder()
    .registerTypeAdapterFactory(rta)
    .create();

CreditCard original = new CreditCard("Jesse", 234);
assertEquals("{\"type\":\"CreditCard\",\"cvv\":234,\"ownerName\":\"Jesse\"}",
    gson.toJson(original, BillingInstrument.class)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T22:15:33.630

为此，您将需要自定义序列化程序。这是上面 Animal 类的示例：

```
public class AnimalSerializer implements JsonSerializer<Animal> {
    public JsonElement serialize(Animal animal, Type typeOfSrc, JsonSerializationContext context) {
        JsonObject jo = new JsonObject();

        jo.addProperty("className", animal.getClass().getName());
        // or simply just
        jo.addProperty("className", "Animal");

        // Loop through the animal object's member variables and add them to the JO accordingly

        return jo;
    }
} 
```

然后，您需要通过 GsonBuilder 实例化一个新的 Gson() 对象，以便根据需要附加序列化程序：

```
Gson gson = new GsonBuilder()
    .registerTypeAdapter(Dog.class, new DogSerializer())
    .registerTypeAdapter(Animal.class, new AnimalSerializer())
    .create(); 
```

# python - 通过 URL 打开 Google Docs 电子表格（也可以直接登录）

> ID：12097888
> 
> 赞同：1
> 
> 时间：2012-08-23T18:28:02.760
> 
> 标签：python, url, gdata

我有一个 python 脚本，它在给定密钥的浏览器中打开电子表格（通过 gdata api..link 获得就像[https://docs.google.com/spreadsheet/ccc?key=0ace6G_SArx1ldEU4UHZBUDNNQzVnRGxMblFfcEp1LXc](https://docs.google.com/spreadsheet/ccc?key=0ace6G_SArx1ldEU4UHZBUDNNQzVnRGxMblFfcEp1LXc)）。但是，我也想使用此 URL 自动登录（给定用户名和密码）。最后，我会自动登录并打开某个电子表格。

有什么帮助吗？

# objective-c - 每次从 ios 应用程序的钥匙串访问中获取钥匙串保存的密码时都返回“0”

> ID：12097890
> 
> 赞同：6
> 
> 时间：2012-08-23T18:28:03.070
> 
> 标签：objective-c, password-protection, keychain

我正在使用 KeychainItemWrapper 类（项目中集成的 .h 和 .m 文件）在 iOS App 的 Keychain 中保存密码。还在项目中需要的地方导入了“Security”框架和“keychianItemWrapper.h”类。（#import，#import“KeychainItemWrapper.h”）

我在应用程序委托方法中使用以下代码在钥匙串访问中保存密码：

```
if([textfieldPassword1.text isEqual:textfieldPassword2.text]){

                NSLog(@"CONGRATS !! PASSCODE MATCHED !!!");           

                //converting "textfieldPassword1" to NSNumber
                NSNumber *textfieldPasscode1Num = [NSNumber numberWithInt:[textfieldPassword1.text intValue]];

                //saving passcode to the keychain access  
               [keychain setObject:textfieldPasscode1Num forKey:(__bridge id)kSecValueData];

           //    [keychain setObject:[NSNumber numberWithInt:[textfieldPassword1.text intValue]] forKey:(__bridge id)kSecAttrAccount];

                // if passcode matches then load Show Lock Screen Page
                self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
                self.viewController = [[ViewController alloc] init];
                [self.window addSubview:self.viewController.view];
                [self.window makeKeyAndVisible];
            } 
```

这里是使用以下代码重置密码：

```
if(_isResetPasscode){
                NSLog(@"Code here for Update Passcode in Keychain Access !!!");
                _isResetPasscode = FALSE;

              // "keychain" is object of "KeychainItemWrapper" class         
                [keychain resetKeychainItem];

/* Again setting the new passcode entered by user in keychain access.. IT IS NOT SAVING IN keychain access, where above the same line of code was working for saving passcode in keychain access
/*
                [keychain setObject:resetPasscodeNum forKey:(__bridge id)kSecValueData];

                NSLog(@"----Passcode Re-Setted ----!! %@\n",resetPasscodeNum);
            } 
```

当我每次打印“0”时在控制台中打印钥匙串密码时。请指导我哪里做错了...您的帮助将不胜感激！

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T18:38:30.870

您尚未指定输入密码的格式。我假设它可以是任何类型的文本。如果是这种情况，如果输入的文本实际上不是数字，则此行将失败：

```
[textfieldPassword1.text intValue] 
```

并将返回 0；

# objective-c - 在 Xcode 4 中向框架添加框架

> ID：12097893
> 
> 赞同：1
> 
> 时间：2012-08-23T18:28:09.320
> 
> 标签：objective-c, xcode, frameworks

我有一个 Xcode 4 项目，它只有一个目标：框架。如何向该项目添加框架（特别是 OSAKit）？我知道如何将框架添加到应用程序，但我不能对自己的框架做同样的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T22:13:45.360

我找到了方法：单击目标，然后单击“构建阶段”，然后转到“将二进制文件与库链接”

# javascript - jQuery - setInterval 与 $.each

> ID：12097894
> 
> 赞同：1
> 
> 时间：2012-08-23T18:28:17.847
> 
> 标签：javascript, jquery

我正要扯掉我的头发。我正在尝试与我的 PHP 函数进行交互，该函数正在测量一些时间： timeSince() 发布了一个帖子。

我不需要在 jQuery 中执行此操作的插件，谢谢 :o)

但我不想在所有 .post-box-time div 上运行 $.get()，因此我使用的是 $.each。但它只是更新最后一个元素，但给了我其他 div 的结果。-> 就像它没有做 $.each()..

这是我的代码：

```
setInterval(function() {
        $('.post-box-time').each(function() {
            var time = $(this).attr('data-time');
            $this = $(this);

            $.get("sys/calls.handler.php", { do: 'timeSince', data: time },
                function(data){
                    $this.html(data);
                });
        }); // each function
    }, 1000); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T18:36:59.590

那么你应该`var`在声明之前抛出一个`$this`。

您将其声明为全局变量，而不是在 var 运行的每个函数的范围内声明它。因此`each()`，当您的响应回调实际上被触发时，您的循环已经完成并设置了全局变量`$this`（或`window.$this`）到它在通过 each() 循环时找到的最后一个 .post-box-time 的值

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T18:35:56.517

使用[异步](http://api.jquery.com/jQuery.ajax/)选项。该[主题](https://stackoverflow.com/questions/3237553/jquery-ajax-call-within-an-each-loop) 与您的问题有关。

希望这会帮助你。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-23T18:38:15.483

我认为每个函数中的 this 是对原始 DOM 元素的引用。.each 给出从 0 开始的索引，所以你应该这样做`$('.post-box-time:eq(' + i + ')')`。

# google-app-engine - 每次修改源后都会出错

> ID：12097897
> 
> 赞同：0
> 
> 时间：2012-08-23T18:28:22.753
> 
> 标签：google-app-engine, internationalization, webapp2, babeljs

我正在尝试在带有 jinja2 的谷歌应用引擎中使用 i18n。

我在这里找到了一个教程[http://webapp-improved.appspot.com/tutorials/i18n.html](http://webapp-improved.appspot.com/tutorials/i18n.html)

一切都很好，除了一件事。

每次修改导入 webapp2_extras.i18n 的 .py 文件后，我都会遇到错误。

.

这是错误信息。

```
 ERROR    2012-08-23 18:31:51,505 wsgi.py:191] 
Traceback (most recent call last):
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\runtime\wsgi.py", line 189, in Handle
    handler = _config_handle.add_wsgi_middleware(self._LoadHandler())
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\runtime\wsgi.py", line 227, in _LoadHandler
    handler = __import__(path[0])
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 1859, in load_module
    return self.FindAndLoadModule(submodule, fullname, search_path)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 1723, in FindAndLoadModule
    description)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 1666, in LoadModuleRestricted
    description)
  File "C:\Users\Jinmo\dev\src\simpletest\simpletest.py", line 5, in <module>
    from webapp2_extras import i18n
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 1859, in load_module
    return self.FindAndLoadModule(submodule, fullname, search_path)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 1723, in FindAndLoadModule
    description)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 1666, in LoadModuleRestricted
    description)
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2_extras\i18n.py", line 16, in <module>
    import babel
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 1859, in load_module
    return self.FindAndLoadModule(submodule, fullname, search_path)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 1723, in FindAndLoadModule
    description)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 1666, in LoadModuleRestricted
    description)
  File "C:\Users\Jinmo\dev\src\simpletest\babel\__init__.py", line 33, in <module>
    from pkg_resources import get_distribution, ResolutionError
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 1859, in load_module
    return self.FindAndLoadModule(submodule, fullname, search_path)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 1723, in FindAndLoadModule
    description)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 676, in Decorate
    return func(self, *args, **kwargs)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 1648, in LoadModuleRestricted
    return source_file.load_module(submodule_fullname)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\dist\py_zipimport.py", line 246, in load_module
    submodname, is_package, fullpath, source = self._get_source(fullmodname)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\dist\py_zipimport.py", line 207, in _get_source
    source = self.zipfile.read(relpath.replace(os.sep, '/'))
  File "C:\Program Files\Python27\lib\zipfile.py", line 869, in read
    return self.open(name, "r", pwd).read()
  File "C:\Program Files\Python27\lib\zipfile.py", line 884, in open
    zef_file = open(self.filename, 'rb')
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 592, in __init__
    raise IOError(errno.EACCES, 'file not accessible', filename)
IOError: [Errno 13] file not accessible: 'C:\\Program Files\\Python27\\lib\\site-packages\\setuptools-0.6c11-py2.7.egg' 
```

这是'simpletest.py'。

```
import os
import logging
import webapp2
import jinja2
from webapp2_extras import i18n

jinja_environment = jinja2.Environment(
    loader=jinja2.FileSystemLoader(os.path.dirname(__file__)))

class MainPage(webapp2.RequestHandler):
    def get(self):
        self.response.out.write('Hello, world!')

app = webapp2.WSGIApplication([('/', MainPage)],
                              debug=True)

def main():
    logging.getLogger().setLevel(logging.DEBUG)
    run_wsgi_app(app)

if __name__ == '__main__':
    main() 
```

这就是“app.yaml”。

```
application: simpletest
version: 1
runtime: python27
api_version: 1
threadsafe: true

handlers:
- url: /.*
  script: simpletest.app

libraries:
- name: jinja2
  version: latest 
```

.

我的 app 目录中有 babel 和 pytz 库目录。

.

第一次启动开发服务器后，很好。我可以很好地看到我的网页。

但是，如果我只是在 simpletest.py 中添加额外的 [enter]，则会发生错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T22:42:40.723

这不是真正的答案，只是另一种解决方法..尝试禁用：

```
C:\\Program Files\\Python27\\lib\\site-packages\\setuptools-0.6c11-py2.7.egg 
```

将其重命名为：

```
setuptools-0.6c11-py2.7.egg_DISABLED 
```

You'll need to re-enable it to install local Python packages, but, if I'm right, it will solve your issue..

# mysql - 在一对多关系中维护一致的数据

> ID：12097899
> 
> 赞同：1
> 
> 时间：2012-08-23T18:28:28.110
> 
> 标签：mysql

我的数据库中有很多这样的例子。下面是一个简单的例子，您可以提供帮助。

我有一个图像表

image_src
street_number
steet_name
postcode country country
camera_used title description date_time_taken user_id

我的问题是防止添加重复数据，例如相机，这可能是多个图像的同一个相机，我认为最好将表格分开。

但是，如果用户随后更新 camera_used 表中的相机，则每条记录中的 id 将对应于所有图像中更新的相机。与地址相同的情况。

如果此实例最好在更新之前执行检查，以查看是否有任何其他表引用该 id，如果是，则在不更新记录时创建插入。

情况是一个用户更新了相机，另一个用户认为那不是我的相机更新记录并返回并继续。只是不确定这是否是一对多的最佳方式。

目前的形象表![在此处输入图像描述](../Images/690b45f6ef6ab5ef376910265076a352.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T19:40:48.017

不允许用户更新`camera`表，至少不能直接更新。

他们可以做的是更新用于其特定图像的相机，该相机要么找到正确的条目，`camera`要么创建一个新条目。正如您所指出的，您根本不想让他们`camera`直接更改表格，否则它将更改*所有*图像`camera`的表格。

# java - SQL 查询/存储过程不返回值

> ID：12097901
> 
> 赞同：0
> 
> 时间：2012-08-23T18:28:34.473
> 
> 标签：java, sql-server, sql-server-2008, jakarta-ee

我有一个执行查询和存储过程的类。我面临的问题是执行结果没有返回值，并且 SP 输出参数没有返回值。当我在 SQL 编辑器中执行这些 SP 和查询时，它工作正常。

```
package com.airtel.mail;

import java.io.File;
import java.io.IOException;
import java.sql.CallableStatement;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.sql.Types;
import java.util.ArrayList;

import javax.mail.internet.NewsAddress;

import org.apache.poi.hssf.record.formula.functions.Ipmt;

import com.auxilii.msgparser.Message;
import com.auxilii.msgparser.MsgParser;

public class Utility {

    public static Connection getConnection() throws SQLException{
        Connection conn= null;
        try{
            Class.forName("net.sourceforge.jtds.jdbc.Driver");
            conn = DriverManager.getConnection("jdbc:jtds:sqlserver://(address:port)","(user)", "(password)");
            if(conn == null){
                System.out.println("Connection Failed");
            }else{
                System.out.println("Connection Success");
            }
        }catch(Exception e){
            e.printStackTrace();
        }
        return conn;
    }

    public static String getLeaEmailId(String emailID)
    {
        String btStatus = "";
        Connection conn = null;
        Statement stmt = null;        
        ResultSet rs = null; 
        String SQLQUERY = "select Lea_EmailId from dbo.Lea_add where LEA_Number=(select varLeaNumber  from dbo.TR_AddTarget where  varEmailId='"+emailID+"' and dtAuthorizationDate=(select MAX(dtAuthorizationDate) from TR_AddTarget where varEmailId='"+emailID+"'))";
        try {
            conn = getConnection();
            stmt = conn.createStatement();
            rs = stmt.executeQuery(SQLQUERY);
            System.out.println("SQLQUERY <><> " + SQLQUERY);
            if(rs.next()) {
                btStatus = rs.getString("Lea_EmailId");
            }

        } catch (Exception e) {
            e.printStackTrace();
        }finally{
            try {
                conn.close();
            } catch (SQLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
        return btStatus;

    }

    public static String[] getFwdMailId(String emailId) throws SQLException {
        System.out.println("EMAIL ID INSIDE getFwdEmailID <><> " + emailId);
        CallableStatement cstsmt = null;
        PreparedStatement pstmt = null;
        ResultSet rs = null;
        Connection conn = null;
        String fwdId = "";
        String nodalId = "";
        String fwdNodal[] = new String[2]; 
        try {
            conn = getConnection();
            cstsmt = conn.prepareCall("{call dbo.Usp_GetLeaIDMain(?,?,?)}");
            cstsmt.setString(1, emailId);
            cstsmt.registerOutParameter(2, Types.VARCHAR);
            cstsmt.registerOutParameter(3, Types.VARCHAR);
            cstsmt.execute();
            fwdId = cstsmt.getString(2); 
            nodalId = cstsmt.getString(3);
            System.out.println("LEA ID INSIDE PROCEDURE<><><> "+ fwdId);
            System.out.println("NODAL ID INSIDE PROCEDURE<><><> "+ nodalId);
            fwdNodal[0] = fwdId;
            fwdNodal[1] = nodalId;
        }catch (Exception e) {
            e.printStackTrace();
        }finally{
            try{
                cstsmt.close();
                conn.close();
            }catch (SQLException e) {
                e.printStackTrace();
            }

            }
        return fwdNodal;
    }

    public static String[] getEmailPasswd(){
        String emailPasswd[] = new String[2];
        Connection conn = null;
        Statement stmt = null;        
        ResultSet rs = null; 
        String email = "";
        String passwd = "";
        String SQLQUERY = "SELECT Email_Id, Email_Passwd FROM Java_Config";
        try {
            conn = getConnection();
            stmt = conn.createStatement();
            rs = stmt.executeQuery(SQLQUERY);
            if(rs.next()) {
                email = rs.getString("Email_Id");
                passwd = rs.getString("Email_Passwd");
            }

            emailPasswd[0] = email;
            emailPasswd[1] = passwd;

        } catch (Exception e) {
            e.printStackTrace();
        }finally{
            try {
                conn.close();
            } catch (SQLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
        return emailPasswd;
    }

    public static void main(String[] args) {
        String str = "deepak.deemca@gmail.com";
        try{
            String s = getLeaEmailId(str);
            System.out.println("ID via QUERY <><> " +s );
            String str1[] =  getFwdMailId(str);
            System.out.println("fl <><> " +str1[0]);
            String str2[] = getEmailPasswd();
            System.out.println("str2 [0] and str2[1] <><> " + str2[0] +"<><><><" +str2[1]);
        }catch (Exception e) { 
            e.printStackTrace();
            // TODO: handle exception
        }
    }

} 
```

# windows-server-2008 - 批量/命令行将 Omniform 转换为 PDF

> ID：12097906
> 
> 赞同：0
> 
> 时间：2012-08-23T18:28:41.243
> 
> 标签：windows-server-2008, pdf-conversion

我们有大量的 Omniform 文件（大约 100,000 个）。我们正在将我们的主服务器操作系统从 Windows Server 2003 更新到 Windows Server 2008。Windows Server 2008 不支持 Omniform，因此我们需要将这些文件转换为 pdf（或其他可查看格式）。

到目前为止我已经尝试过：在使用 Process.StartInfo 并使用 PDF Writer 打印机的程序内部使用 Print 或 PrintTo 动词。

使用 Print 动词直接从命令行使用 Print，并将 PDF Writer 设置为默认打印机：

```
C:\PROGRA~1\ScanSoft\OMNIFO~1.1\OmniForm.exe /p "Test.ofm" 
```

这两个都打印成功并出现PDF。但是，它只打印表格，而不打印输入数据的表格。也就是说，您将得到姓氏，然后是空白，而不是显示输入的姓氏。

如果我打印到普通打印机而不是 PDF Writer，我会得到相同的行为。只显示没有输入数据的表格。

我试过打电话给 Nuance 技术支持，他们建议一次手动进行 1 次。鉴于这需要某人大约半年的全职工作才能完成，这对我们来说不是一个可行的选择。

所以我正在寻找的是以下之一：

1.  上面命令行打印的解决方案
2.  一个可以将 OFM 转换为 PDF 的程序。如果需要，这可以是多个步骤（ofm 到 doc，doc 到 pdf 等）。免费软件或购买。
3.  一些第三方查看器至少可以打开 Omniforms 以在 Server 2008 下查看。（请注意，我们已经尝试安装omniform，但没有成功，如果有人知道如何让它工作，这也是一种选择）。

任何这些方面的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-02T04:58:33.903

如果填写表格的“图像”可能适合您，Omniformat 可能会帮助您。它基本上使用打印到文件的方法将文件转换为 pdf，但它可能会对您有所帮助，因为它会进行批量转换。

# android - Android动态改变圆圈大小只有一半的圆圈正确更新

> ID：12097907
> 
> 赞同：5
> 
> 时间：2012-08-23T18:28:45.630
> 
> 标签：android, android-canvas, android-maps

所以我给用户控件使用搜索栏来改变 MapView 中圆形覆盖对象的半径。

但是，当您拖动搜索栏以更改圆的半径时，只有它的底部会平滑更新：

![错误的](../Images/9ca91e2e5f273ea24e9d766fd07b9cf2.png)

上半部分是圆的半径，*下半部*分是当前圆的半径。底部平滑更新（以及搜索栏上的进度），但顶部保持静止半秒左右。

以前见过这样的事情吗？这是我正在使用的 RadiusOverlay 对象的 onDraw 方法：

```
public void draw(Canvas canvas, MapView mapView, boolean shadow) {
    super.draw(canvas, mapView, shadow); 

    Point point = new Point();

    Projection projection = mapView.getProjection();
    projection.toPixels(mGeoPoint, point);
    float projectedRadius = projection.metersToEquatorPixels((float)(mRadius * 1609.3d));

    Paint paint = new Paint();
    paint.setStyle(Paint.Style.FILL);
    paint.setARGB(50, 41, 166, 247);
    paint.setAntiAlias(true);

    canvas.drawCircle((float)point.x, (float)point.y, projectedRadius, paint);
} 
```

谢谢你看。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T19:20:13.233

所以我将此添加到绘制圆形叠加层的方法中：

```
mController.animateTo(mLocationOverlay.getMyLocation()); 
```

哪里`mController`是 LocationController 并且`mLocationOverlay`是 LocationOverlay （我想这有点明显）。

无论如何，添加那条线使圆圈动画流畅。这可能与叠加层在地图上的工作方式有关，如果它们没有居中，它们会被裁剪或其他东西。谁知道。但是我通过删除那条线再次对其进行了测试，果然它再次被剪掉了。所以我想这就是解决方案。*耸耸肩*

如果有人有真正的解释，请随时提供。

# c# - 如何让实体框架查询正确的表？

> ID：12097909
> 
> 赞同：0
> 
> 时间：2012-08-23T18:28:51.887
> 
> 标签：c#, asp.net-mvc-3, entity-framework

我已经定义了一个类

```
public class ReportClass
{
    public int ID { get; set; }
    public int ClassIndex { get; set; }
    public string ClassName { get; set; }
    public int CompanyID { get; set; }

} 
```

我设置了一个 dbcontext。

```
public class ReportClassContext : DbContext
{
    public DbSet<ReportClass> ReportClasses { get; set; }
} 
```

当我第一次去获取记录时，运行时告诉我数据库表不存在：我检查，发现我的 DbSet 的名称与表不匹配。我切换了名称以匹配：

```
public class ReportClassContext : DbContext
{
    public DbSet<ReportClass> ReportClassesRealTable { get; set; }
} 
```

但它仍在查询不存在的表。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T18:30:19.210

像这样使用 table 属性：

```
[Table("ReportClassesRealTable")]
public class ReportClass
{
    public int ID { get; set; }
    public int ClassIndex { get; set; }
    public string ClassName { get; set; }
    public int CompanyID { get; set; }

} 
```

这告诉 EF 你的类的实际表名是什么，否则它会尝试使用你的类名的复数形式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T18:32:56.697

让它保持原样

```
public DbSet<ReportClass> ReportClasses { get; set; } 
```

现在覆盖该方法以告诉 EF 使用**fluent API**`OnMoedlCreateing`将此类映射到不同的表。将该方法添加到您的 DBContext 类

 **```
public class ReportClassContext : DbContext
{
    public DbSet<ReportClass> ReportClasses { get; set; }
    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
      modelBuilder.Entity<ReportClass>().ToTable("ReportClassesRealTable");
    }
} 
```

这告诉 EF，当您查询`ReportClasses`DbContxt 对象的属性时，它将从`ReportClassRealTable`数据库中的表中获取数据。**

# jmx - 注册camel的ftp jpa Idempotent存储库时出错

> ID：12097912
> 
> 赞同：1
> 
> 时间：2012-08-23T18:28:58.377
> 
> 标签：jmx, apache-camel, idempotent

我正在尝试按照此处[http://camel.apache.org/file2.html](http://camel.apache.org/file2.html)的描述实现 jpa 幂等存储库，但我遇到了 Mbean 导出错误。

在我的 application-context.xml 我有以下部分。

```
<bean id="mvStore" class="org.apache.camel.processor.idempotent.jpa.JpaMessageIdRepository" lazy-init="false">
        <!-- Here we refer to the spring jpaTemplate -->
        <constructor-arg index="0" ref="jpaTemplate" />
        <!-- This 2nd parameter is the name (= a cateogry name). You can have different repositories with different names -->
        <constructor-arg index="1" value="FileConsumer" />
    </bean>
<context:mbean-server id="mbeanServer" />
<context:mbean-export server="mbeanServer" registration="replaceExisting" default-domain="br.com.touchtec"/> 
```

如果我删除上述部分，则服务器（tomcat）启动就好了。有人可以帮我吗？

这是堆栈：

```
Caused by: org.springframework.jmx.export.UnableToRegisterMBeanException: Unable to register MBean [org.apache.camel.processor.idempotent.jpa.JpaMessageIdRepository@6df960c4] with key 'mvStore'; nested exception is javax.management.MalformedObjectNameException: Key properties cannot be empty
    at org.springframework.jmx.export.MBeanExporter.registerBeanNameOrInstance(MBeanExporter.java:602)
    at org.springframework.jmx.export.MBeanExporter.registerBeans(MBeanExporter.java:527)
    at org.springframework.jmx.export.MBeanExporter.afterPropertiesSet(MBeanExporter.java:413)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1477)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1417)
    ... 50 more

Caused by: javax.management.MalformedObjectNameException: Key properties cannot be empty
    at javax.management.ObjectName.construct(ObjectName.java:467)
    at javax.management.ObjectName.<init>(ObjectName.java:1403)
    at javax.management.ObjectName.getInstance(ObjectName.java:1285)
    at org.springframework.jmx.support.ObjectNameManager.getInstance(ObjectNameManager.java:62)
    at org.springframework.jmx.export.naming.MetadataNamingStrategy.getObjectName(MetadataNamingStrategy.java:114)
    at org.springframework.jmx.export.MBeanExporter.getObjectName(MBeanExporter.java:728)
    at org.springframework.jmx.export.MBeanExporter.registerBeanInstance(MBeanExporter.java:631)
    at org.springframework.jmx.export.MBeanExporter.registerBeanNameOrInstance(MBeanExporter.java:592)
    ... 54 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T07:57:03.667

首先，我希望您清楚 jmx 部分不是使 Idempotent Repository 工作所必需的事实。您的错误是纯 JMX/Spring 错误，与 Camel 无关。

如果您想使用 MBeanExporter，您应该阅读[Spring JMX](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/jmx.html)的官方文档以更好地了解这件事。

您的 MBeanExporter 定义可能看起来像

```
<bean id="exporter" class="org.springframework.jmx.export.MBeanExporter">
    <property name="beans">
      <map>
        <entry key="bean:name=mvStore" value-ref="mvStore"/>
      </map>
    </property>
    <property name="server" ref="mbeanServer"/>
  </bean> 
```

# perl - Perl，为特殊变量 $/ 指定正则表达式

> ID：12097915
> 
> 赞同：1
> 
> 时间：2012-08-23T18:29:26.910
> 
> 标签：perl

我有一个包含文本的 CSV 文件，其中包含新的换行符。例如

```
1,b,hello
world,x
2,a,hello

mars,y 
```

要一次连续阅读所有内容，我想为 $/ 特殊变量指定一个正则表达式。关于我如何做到这一点的任何建议？

我的想法是，如果我为我的特殊变量输入类似 "(x|y)\n" 的内容，它应该捕获行以 x 或 y 以及新行结尾的情况。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T18:37:14.940

您不能对 $/ 使用正则表达式。但是，如果文件不是太大，您可以将整个内容读入一个标量并在正则表达式上拆分。

`@records = split /(x|y)\n/, $data;`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T19:15:54.220

没有将这样的文件分成记录的通用方法，因为无法判断文件中的一行是更多当前记录还是新记录的开始。

但是，如果您可以假设

*   一条记录中总是有相同数量的字段

*   字段中的数据从不包含逗号

*   记录的最后一个字段永远不会跨行拆分

然后你可以简单地从文件中累积行，直到你有足够数量的字段

这个程序演示了这个原理。

```
use strict;
use warnings;

while (my $record= <>) {
  $record .= <> until $record =~ tr/,// == 3;
  print ">> $record\n";
} 
```

**输出**

```
>> 1,b,hello
world,x

>> 2,a,hello

mars,y 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-23T19:11:53.247

您可以创建自己的子程序以一次读取一个数据集：

```
 sub readDataSet {
   my $buffer = '';
   local $/ = "\n";
   $buffer .= <STDIN> until $buffer =~ /(x|y)\n$/;
   return $buffer;
 }

 my $nextRow = readDataSet(); 
```

这将返回一整行。我可以这样做，因为您的 Regexp 以恒定部分结尾。这个子有几个变体：

1.  从任何文件句柄读取：

    ```
    sub readDataSet {
      my ($filehandle) = @_;
      my $buffer = "";
      $buffer .= <$filehandle> until $buffer =~ /(x|y)\n$/;
      return $buffer;
    }

    open my $fh, "<", $filename or die;
    my $nextRow = readDataSet($fh); 
    ```

2.  构造一个匿名子来读取。Filehandle 在构造函数 sub 中只提供一次。这有点面向对象。

    ```
    sub newDataSetReader {
      my ($filehandle) = @_;
      return sub {
        my $buffer = '';
        local $/ = "\n";
        $buffer .= <$filehandle> until $buffer =~ /(x|y)\n$/;
        return $buffer;
      };
    }

    open my $fh, "<", $filename or die;
    my $reader = newDataSetReader($fh);
    my $nextRow = $reader->(); 
    ```

    我更喜欢最后一种解决方案，但只有从多个文件中读取才有意义。

当您通过 sub 阅读时，您可以轻松插入调试钩子或预过滤数据，例如将行拆分为字段并返回一个数组而不是单个字符串。

# objective-c - MFSideMenu 全尺寸平移手势

> ID：12097921
> 
> 赞同：0
> 
> 时间：2012-08-23T18:29:41.433
> 
> 标签：objective-c, ios, cocoa

我在我的应用程序中使用 MFSideMenu，我只能在导航栏上使用平移手势来显示菜单。我希望它可以在整个屏幕上工作，就像在 facebook 应用程序上一样。！

![](../Images/1e8f6ba8b8b598014877a07cd51861bc.png)

我试过改变这一行（MFSideMenuManager.m 中的 l.39）

```
[controller.navigationBar addGestureRecognizer:recognizer]; 
```

对此：

```
[controller.view addGestureRecognizer:recognizer]; 
```

但它只是行不通。

你知道我应该编辑什么让它工作吗？

感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T10:01:48.673

我终于成功地让它工作了。该手势实际上已经实现，但仅在菜单隐藏时才有效。我们必须删除 2 个条件以确保它可以双向工作

MFSideMenuManager.m 中有两行需要编辑

在gestureRecognizerShouldBegin: 方法中

```
 if([gestureRecognizer isKindOfClass:[UIPanGestureRecognizer class]]) {
        if([gestureRecognizer.view isEqual:self.navigationController.view] && 
           self.navigationController.menuState != MFSideMenuStateHidden) return YES; 
```

变成

```
 if([gestureRecognizer isKindOfClass:[UIPanGestureRecognizer class]]) {
        if([gestureRecognizer.view isEqual:self.navigationController.view]) return YES; 
```

在 navigationControllerPanned: 方法中，只需删除 if 行

```
- (void) navigationControllerPanned:(id)sender {
    if(self.navigationController.menuState == MFSideMenuStateHidden) return;

    [self handleNavigationBarPan:sender];
} 
```

变成

```
- (void) navigationControllerPanned:(id)sender {
    [self handleNavigationBarPan:sender];
} 
```

它有效！

编辑库并不是一个非常好的做法，但如果您想进一步向 MFSideMenu 添加一个布尔选项以使其可配置，这很容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T22:07:35.610

我不知道 MFSideMenuManager 但如果栏是可拖动的，我希望它有一个带有线条的 UIPanGestureRecognizer

```
[self.navigationController.navigationBar addGestureRecognizer:gestureRecognizer]; 
```

所以你要做的是用整个导航控制器的视图替换导航栏

```
[self.navigationController.view addGestureRecognizer:gestureRecognizer]; 
```

# jquery - 无限滚动的砖石在ie8中不起作用

> ID：12097922
> 
> 赞同：1
> 
> 时间：2012-08-23T18:29:46.187
> 
> 标签：jquery, wordpress, internet-explorer-8, wordpress-theming

在ie8上查看页面时出现以下错误：任何解决方案？

网页错误详情

用户代理：Mozilla/4.0（兼容；MSIE 7.0；Windows NT 5.1；InfoPath.2；BRI/2；BOIE8；ENUS）时间戳：2012 年 8 月 23 日星期四 18:18:49 UTC

消息：预期的标识符、字符串或数字行：357 字符：4 代码：0

```
$(function(){

var $container = $('.two-thirds-cloumn');
$('.widgets-cout').masonry({ singleMode: true });

$container.imagesLoaded(function(){
  $container.masonry({
    itemSelector: '.brick',
    columnWidth: 485
  });
});

$container.infinitescroll({
  navSelector  : '.nav-previous',    // selector for the paged navigation 
  nextSelector : '.nav-previous a',  // selector for the NEXT link (to page 2)
  itemSelector : '.brick',     // selector for all items you'll retrieve
  loading: {
      finishedMsg: 'No more pages to load.',
      img: 'http://i.imgur.com/6RMhx.gif'
    },
  behavior: 'twitter',
  },

  // trigger Masonry as a callback
  function( newElements ) {
    // hide new items while they are loading
    var $newElems = $( newElements ).css({ opacity: 0 });
    // ensure that images load before adding to masonry layout
    $newElems.imagesLoaded(function(){
      // show elems now they're ready
      $newElems.animate({ opacity: 1 });
      $container.masonry( 'appended', $newElems, true ); 
    });
  }
);

}); 
```

# android - 登录验证不起作用

> ID：12097923
> 
> 赞同：0
> 
> 时间：2012-08-23T18:29:50.973
> 
> 标签：android, login, cursor, logcat, onclicklistener

我正在创建一个登录页面，该页面将使用 e sqlite db 进行身份验证。当我将数据输入到我编辑文本字段并单击“登录”时，应将文本字段中的数据与 sqlite db 中的数据进行比较。出于某种原因，我得到了我的捕获异常错误“null”。我相信我的查询没有提取需要比较的数据。当我的程序运行时，除了捕获异常之外，我没有收到任何错误......令人沮丧！

我的 OnClick 方法比较和登录：

```
 lsLogin.setOnClickListener (new OnClickListener() {

                @Override
                public void onClick(View v) {
                    //check login
                    String username = lsUsername.getText().toString();
                    String password = lsPassword.getText().toString();
                    try{
                        if(LoginDB.Login(username,password)) {
                            Intent goToNextActivity = new Intent(getApplicationContext(), menu.class);
                            startActivity(goToNextActivity);

                                Toast.makeText(LoginScrExample.this,"Login Sucessful",Toast.LENGTH_LONG).show();
                            }else{
                                Toast.makeText(LoginScrExample.this,"Invalid Username/Password",Toast.LENGTH_LONG).show();
                            }
                            }
                    catch(Exception err)
                       {
                           Toast.makeText(LoginScrExample.this," Something is wrong " + err.getMessage(),Toast.LENGTH_LONG).show();
                       } 
```

我的数据库类：

```
 public LoginDB(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
        // TODO Auto-generated constructor stub
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub      

        String sqlDataStore = "create table if not exists " +
        TABLE_NAME_CREDENTIALS + " ("+ BaseColumns._ID + " integer primary key autoincrement,"

                    + COLUMN_NAME_USERNAME + " text not null,"
                    + COLUMN_NAME_PASSWORD + " text not null);";

        db.execSQL(sqlDataStore);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub
        if(oldVersion == 1 && newVersion == 2){
            //Upgrade the database
    }   

}

    public static boolean Login(String username, String password) {
        Cursor c =   DBHelper.getReadableDatabase().rawQuery(
                "SELECT * FROM " + TABLE_NAME_CREDENTIALS + " WHERE "
                        + COLUMN_NAME_USERNAME + "='" + username +"'AND "+COLUMN_NAME_PASSWORD+"='"+ password +"'" ,  null);
       if (c.getCount()>0)
          return true;
          return false;
    }

    public void open() {
        // TODO Auto-generated method stub
        db = DBHelper.getWritableDatabase();
    }
    public void close() {
        DBHelper.close();
    } 
```

我也尝试了这个查询，但得到了相同的结果：

```
 public static boolean Login(String username, String password) throws SQLException
    {
        Cursor mCursor = db.rawQuery("SELECT * FROM " + TABLE_NAME_CREDENTIALS + " WHERE username=? AND password=?",
                new String[]{username,password});
        if(mCursor !=null) {
            if(mCursor.getCount()>0)
            {
            return true;
            }
        }
            return false;
        } 
```

错误日志：

```
 08-23 13:38:24.034: W/System.err(1027): java.lang.NullPointerException
       08-23 13:38:24.034: W/System.err(1027):  at com.LoginScr.Example.LoginDB.Login(LoginDB.java:58)
       08-23 13:38:24.043: W/System.err(1027):  at com.LoginScr.Example.LoginScrExample$1.onClick(LoginScrExample.java:50)
       08-23 13:38:24.043: W/System.err(1027):  at android.view.View.performClick(View.java:3511)
       08-23 13:38:24.043: W/System.err(1027):  at android.view.View$PerformClick.run(View.java:14105)
       08-23 13:38:24.054: W/System.err(1027):  at android.os.Handler.handleCallback(Handler.java:605)
       08-23 13:38:24.054: W/System.err(1027):  at android.os.Handler.dispatchMessage(Handler.java:92)
       08-23 13:38:24.054: W/System.err(1027):  at android.os.Looper.loop(Looper.java:137)
       08-23 13:38:24.054: W/System.err(1027):  at android.app.ActivityThread.main(ActivityThread.java:4424)
       08-23 13:38:24.083: W/System.err(1027):  at java.lang.reflect.Method.invokeNative(Native Method)
       08-23 13:38:24.083: W/System.err(1027):  at java.lang.reflect.Method.invoke(Method.java:511)
       08-23 13:38:24.094: W/System.err(1027):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
       08-23 13:38:24.094: W/System.err(1027):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
       08-23 13:38:24.094: W/System.err(1027):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T18:39:58.917

```
"SELECT * FROM " + TABLE_NAME_CREDENTIALS + " WHERE "
                        + COLUMN_NAME_USERNAME + "='" + username +"'AND "+ 
```

在 AND 之前需要这个空间，所以它应该看起来像

```
DBHelper.getReadableDatabase().rawQuery(
                "SELECT * FROM " + TABLE_NAME_CREDENTIALS + " WHERE "
                        + COLUMN_NAME_USERNAME + " = '" + username +"' AND "+COLUMN_NAME_PASSWORD+" = '"+ password +"'" ,  null); 
```

# objective-c - presentModalViewController: 是否将视图控制器添加到堆栈中？

> ID：12097924
> 
> 赞同：0
> 
> 时间：2012-08-23T18:29:55.453
> 
> 标签：objective-c, cocoa, uiviewcontroller, uinavigationcontroller, uistoryboard

我有一个带有根视图控制器的主导航控制器。在根视图控制器中，按一下按钮，我将呈现第二个视图控制器，如下所示：

```
SecondVC *secondVC = [[SecondVC alloc] initWithNibName:@"SecondVC" bundle:nil];
[self.navigationController presentModalViewController:secondVC animated:YES]; 
```

在第二个视图控制器中，按下另一个按钮，我想展示第三个视图控制器（这次来自故事板）：

```
ThirdVC *thirdVC = [[UIStoryboard storyboardWithName:@"Settings" bundle:nil] instantiateInitialViewController];
[self.navigationController presentModalViewController:thirdVC animated:YES]; 
```

然而，这并没有做任何事情。我调试了一下，原来`self.navigationController`是`nil`.

它不应该是主导航控制器吗？或者不presentModalViewController: 将视图控制器添加到堆栈中？在模态显示 id 之前，我是否总是必须将视图控制器放在导航控制器中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T18:32:04.170

新的视图控制器 SecondVC 以模态方式呈现，它没有添加到 navigationController 的视图控制器堆栈中。您需要创建一个新的 UINavigationController，并将 SecondVC 放入 navController 中，然后再以模态方式呈现它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T20:27:53.920

您需要添加以下内容：

```
UINavigationController *navControl = [[UINavigationController alloc] initWithRootViewController:secondVC];
[self addChildViewController:navController];
[self.navigationController presentModalViewController:secondVC animated:<#(BOOL)#>] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T18:42:54.053

呈现时您的视图控制器不在导航控制器内。并且将无法访问呈现控制器的导航控制器。

此外，如果您在模态视图控制器下方的导航控制器上推送或弹出堆栈项，您可能不会注意到任何内容。

如果您想将控制器放入堆栈中，您也可以自己显示视图控制器。

```
[self.view addSubView:myViewController.view]
myViewController.view.frame = self.view.bounds; 
```

要关闭视图控制器，您只需将其从其父视图中删除即可。

这里的缺点是视图控制器上没有调用一些做和将出现的方法。因此，您可能想自己调用它们。

但校长大同小异。并且您可以使用动画系统轻松模拟呈现动画。

在您的表单下方给它一个起点，然后启动您的动画块并将 view.frame 放入 superview.bounds 也给它一个动画时间。我发现2秒是可以的。有时更少。

此时呈现的视图位于堆栈上的控制器内部。现在，虽然您不能直接在呈现的视图控制器中修改导航控制器，但您可以设置一个委托来告诉原始您的意图，因此呈现的视图控制器（导航堆栈上的那个）可以按要求推送或弹出视图控制器。并且呈现的视图控制器将与它一起被推送。

另一个积极的方面是您可以像其他应用程序一样做很多事情，并呈现半模态视图。具有部分透明的背景。这样，即使他们不直接操纵它，您也可以显示视图背后发生的事情。

# php - 单选按钮的动态命名

> ID：12097928
> 
> 赞同：0
> 
> 时间：2012-08-23T18:30:21.037
> 
> 标签：php, button, radio

我有“n”行由 sql 语句返回。效果很好。对于返回的每一行，我希望用户选择一个选项（选项“a”或选项“b”）

作为标准做法，while 循环用于遍历每一行，并且我尝试通过行号命名我的选项。但是，当我尝试获取用户选择的单选按钮的值时遇到了问题。

我似乎无法在 where 子句的第一个循环（或具有适当名称的任何循环）中动态获取名为 1 的单选按钮的值。

这里的代码片段：

```
$counter = 1;

while($row = mysql_fetch_array($result))
{

  echo "<form action='updatepics.php' method='post'>";
  echo "<input type='radio' name='m" . $counter . "' value=  ". $row['f_id'] ."> " . $row['Favorite'];
  echo "<input type='hidden' name='game' value=" . $counter . ">";
  echo " vs " . $row['Underdog'] ." ";
  echo "<input type='radio' name='m" . $counter . "' value=  ". $row['d_id'] ."> ";

  echo "<br>";
  echo "<input type='hidden' name='choice' value=" . $_GET["m" . $counter] . " >";
  echo "<input type='submit' value='Make Choice'>";
  echo "</form>";
  $counter ++;
} 
```

更新图片.php：

```
Game 
<?php
 echo $_POST['game'];
 echo " " . $_POST['player'] . " picks: ";
 echo " " . $_POST['choice'] ;
 ?> 
```

updatepics.php 的输出...
游戏 1 奶奶选择：

注意“选择”为空

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T04:57:34.603

我从动态创建单选按钮名称中解脱出来。现在所有单选按钮在循环的每次迭代中都具有相同的名称。

即使您在为每次迭代点击提交按钮之前选择了所有按钮，它似乎也可以在正确的时间传递正确的值。

```
echo "<form action='updatepics.php' method='post'>";

echo "<input type='radio' name='mw' value=  ". $row['f_id'] ."> " . $row['Favorite'];
echo "<input type='hidden' name='game' value=" . $row['f_id'] . ">";
echo "<input type='hidden' name='player' value='" . $user . "' >";
echo " vs " . $row['Underdog'] ." ";
echo "<input type='radio' name='mw' value=  ". $row['d_id'] ."> ";
echo "  " . $row['line'];

echo "<input type='submit' value='Make Choice'>";
echo "</form>"; 
```

updatepics.php 也很简单，而且可以正常工作： $_POST['mw']

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T19:33:09.073

根据 HTML4 规范，[名称属性定义为 CDATA](http://www.w3.org/TR/html4/interact/forms.html#adef-name-INPUT)，[CDATA 定义如下](http://www.w3.org/TR/html4/types.html#type-cdata)：

> ID 和 NAME 标记必须以字母 ([A-Za-z]) 开头，后跟任意数量的字母、数字 ([0-9])、连字符 ("-")、下划线 ("_") , 冒号 (":") 和句点 (".")。

修改您的代码以使所有名称值至少以一个字母开头。

# python - 检查函数是否在 Python 中返回 false

> ID：12097929
> 
> 赞同：27
> 
> 时间：2012-08-23T18:30:25.347
> 
> 标签：python, function, if-statement

在python中，我目前正在这样做：

```
if user_can_read(request.user, b) == False: 
```

有没有其他方法可以检查函数是否返回`False`？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-08-23T18:33:13.240

你可以使用

```
if user_can_read(request.user, b):
    ## do stuff 
```

如果`user_can_read`返回*任何*值（除了 0、False 等），它将被视为 True，并执行操作。

和否定：`if not user_can_read(request.user, b)`

# vb.net - VB.Net：动态创建的 MonthCalendar 不会触发 LostFocus 或 GotFocus

> ID：12097934
> 
> 赞同：0
> 
> 时间：2012-08-23T18:30:45.360
> 
> 标签：vb.net, monthcalendar, lostfocus

我创建了一个表单，它有一个选项卡式控件，可以动态地将用户控件添加到每个选项卡中，并在表单底部有一个 StatusStrip。当应用程序启动时，用户控件会根据安全性加载到选项卡中，并至少加载 1 个选项卡。在 StatusStrip 上，有两个 ToolStripComboBoxes、2 个 ToolStripButtons、1 个 ToolStripLabel 和 1 个 ToolStripStatusLabel。一切都很好并且可以正常工作。

当用户按下两个按钮之一时，我被要求弹出 MonthCalendar 。这是我用来执行此操作的代码：

```
If IsNothing(theCal) Then
    theCal = New MonthCalendar
    AddHandler theCal.DateSelected, AddressOf theCalDateSelected
    AddHandler theCal.LostFocus, AddressOf theCalLostFocus
    AddHandler theCal.GotFocus, AddressOf theCalLostFocus
    theCal.Parent = Me
    theCal.Top = StatusStripMain.Top - theCal.Height
    theCal.Left = ComboBoxAvailableLegDay.Bounds.X
    theCal.Anchor = AnchorStyles.Bottom + AnchorStyles.Left
    theCal.Show()
    theCal.BringToFront()
    theCal.Focus()
Else
    Me.Controls.Remove(theCal)
    theCal = Nothing
End If 
```

theCal 在表单类的顶部被定义为 Protected。因此，按下按钮将创建 MonthCalendar 并正确定位它，如果它不存在，如果它存在，则将其删除。这没有问题。

我的问题是 theCal 永远不会触发 GotFocus 或 LostFocus。我有如下定义的过程 theCalLostFocus 并且它从不抛出异常。我可以在 throw 处设置一个断点，而代码永远不会到达那个点。

```
Private Sub theCalLostFocus(ByVal sender As Object, ByVal e As EventArgs)
    Throw New NotImplementedException
End Sub 
```

单击 Cal 上的日期将调用 CalDateSelected 过程，但单击窗体的任何其他区域不会触发 CalLostFocus。由于用户可能不想选择日期并且我不想强迫他们必须按下按钮来移除 theCal，我希望能够在失去焦点时移除 theCal。任何人都知道为什么会发生这种情况并且有人有解决方案吗？

谢谢。-NCGrimbo

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T18:53:23.590

我对焦点事件不会触发并不感到惊讶，因为您在将处理程序插入可视树*之前添加了处理程序。*尝试在调用 show() 之后添加处理程序。或者可能在加载的事件处理程序中。请注意，由于您请求焦点，因此每次都会调用焦点事件处理程序。

Rq ：正如它所写的那样，您的代码存在内存泄漏，因为您在清除 theCal 时没有删除事件处理程序，因此由于保留了对 theCal 的引用，因此 theCal 和事件处理程序都不会被清除，这会导致内存泄漏（周期性参考）。

# objective-c - iOS 5、Storyboards、ARC：UITableview 未填充来自自定义委托和数据源的数据

> ID：12097936
> 
> 赞同：0
> 
> 时间：2012-08-23T18:30:52.410
> 
> 标签：objective-c, ios, cocoa-touch, uitableview

这是我第一次处理连接到自定义委托和数据源的 UITableView。直到今天，我还是连接到“自我”。这个问题的前传在[这里](https://stackoverflow.com/questions/12059235/ios-5-storyboards-arc-creating-and-setting-custom-delegate-and-datasource-to-p)。

所以，我有两个额外的 UIView。使用分段控制，我将上面提到的 UIView 之一放在 self.view 上...

创建了两个 UITableView 子类并将它们设置为委托和数据源。工作正常，没有泄漏或崩溃。检查在 segmentedControl 索引上初始化的类是否更改：

```
- (id)initWithStyle:(UITableViewStyle)style
{
self = [super initWithStyle:style];
if (self) {
    // Custom initialization
    NSLog(@"Nominals got init");
}
return self;
} 
```

NSLog 在更改段时起作用。

问题：

在我的自定义委托类中，我覆盖了 UITableViewDelegate 和 UITableViewDataSource 协议所需的方法。

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
return 20;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
UILabel *lbl=[[UILabel alloc]initWithFrame:CGRectMake(12, 12, 200, 12)];
lbl.text=@"some nominal";
cell.textLabel.text=@"Nominal";
[cell addSubview:lbl];

return cell;
} 
```

目前我遇到了异常：

> 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“UITableView 数据源必须从 tableView 返回一个单元格：cellForRowAtIndexPath：”

好吧，我的自定义委托类中的单元格不是我创建的 UITableView 的同一个单元格：

```
-(void)populateNominals:(int)subCountryID
{
NominalsTableViewDelegate *del=[[NominalsTableViewDelegate alloc]init];
[self setNominalsDelegate:del];

UITableView *nominalsTableView=[[UITableView alloc]initWithFrame:CGRectMake(0, 0, 320, 372) style:UITableViewStylePlain];

[nominalsTableView setDelegate:nominalsDelegate];
[nominalsTableView setDataSource:nominalsDelegate];
[nominalsTableView reloadData];
[self.nominalsView addSubview:nominalsTableView];

} 
```

我的错误是什么？先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T18:37:44.567

您正在尝试`dequeue`使用`cell`. `dequeueReusableCellWithIdentifier`如果队列中没有`cell`，会发生什么？肯定崩溃。

所以你需要分配一个单元格，也添加这一行：

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if(cell == nil)
{
 cell = [[UITableViewCell alloc] init];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T18:42:05.397

在您的 tableView:cellForRowAtIndexPath: 方法中，您错过了没有单元格要出列的情况。看看你的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    UILabel *lbl=[[UILabel alloc]initWithFrame:CGRectMake(12, 12, 200, 12)];
    lbl.text=@"some nominal";
    cell.textLabel.text=@"Nominal";
    [cell addSubview:lbl];

    return cell;
} 
```

您应该执行以下操作：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (!cell) {
        cell = [[UITableViewCell alloc] init];
    }

    UILabel *lbl=[[UILabel alloc]initWithFrame:CGRectMake(12, 12, 200, 12)];
    lbl.text=@"some nominal";
    cell.textLabel.text=@"Nominal";
    [cell addSubview:lbl];

    return cell;
} 
```

因为这样做，如果你不能出队一个单元格，你正在创建一个新单元格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T18:54:39.033

dequeueReusableCellWithIdentifier 将返回 UITableViewCell 实例，当单元格在通过 tableView 滚动时被重用。

所以添加

```
if (nil == cell)
{
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
} 
```

您必须使用 initWithStyle:reuseIdentifier: 这是 tableview 单元格的指定初始化程序。

# embedded-linux - 如何顺时针旋转图像？

> ID：12097944
> 
> 赞同：0
> 
> 时间：2012-08-23T18:31:10.973
> 
> 标签：embedded-linux, gstreamer

根据[this](http://gstreamer.freedesktop.org/data/doc/gstreamer/head/gst-plugins-good-plugins/html/gst-plugins-good-plugins-videoflip.html) gstreamer管道

> gst-启动 videotestsrc ！videoflip方法=顺时针！ffmpeg色彩空间！ximagesink

顺时针旋转视频流。我过去曾在嵌入式 Linux Leopardboard 上成功测试过这个视频管道，但我需要旋转单个图像，所以我修改了这样的管道：

> gst-launch filesrc 位置=test.jpeg ！videoflip方法=顺时针！ffmpeg色彩空间！文件接收器位置=testClockwise.jpeg

我修改的管道导致以下错误：

```
Setting pipeline to PAUSED ...
Pipeline is PREROLLING ...
ERROR: from element /GstPipeline:pipeline0/GstVideoFlip:videoflip0: 
   not negotiated
Additional debug info:
../../../../src/libs/gst/base/gstbasetransform.c(2253): 
   gst_base_transform_handle_buffer (): 
   /GstPipeline:pipeline0/GstVideoFlip:videoflip0:
not negotiated
ERROR: pipeline doesn't want to preroll. 
```

为什么没有协商 GstVideoFlip:videoflip0？为什么管道不想预卷？如何修复这些错误？

编辑：所以。我将 jpegdec 和 jpegenc 添加到我的管道中，如下所示：

> gst-launch filesrc 位置=test.jpeg ！JPEG格式！videoflip方法=顺时针！ffmpeg色彩空间！杰佩根！文件接收器位置=testClockwise.jpeg

但现在得到这个错误：

> 警告：错误的管道：没有元素“jpegdec”

但是为什么，因为 jpegdec 和 jpegenc 都在[gst-plugins-good Elements](http://gstreamer.freedesktop.org/data/doc/gstreamer/head/gst-plugins-good-plugins/html/ch01.html)中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T06:29:04.967

您的管道读取 jpeg。不是 YUV/RGB。所以你需要解码你的jpeg文件，按照你的方式翻转它，将它重新编码为jpeg，然后将它写入一个文件。

# swing - Scala Swing 脚本不工作

> ID：12097945
> 
> 赞同：3
> 
> 时间：2012-08-23T18:31:19.780
> 
> 标签：swing, scala

我刚开始学习 Scala，作为学习过程的一部分，我一直在尝试编写一些使用 Swing 的简单脚本。

这是一个非常精简的示例，它展示了我所看到的问题。

SimpleSwingApp：

```
import scala.swing._
object SimpleSwingApp extends SimpleSwingApplication {
  def top = new MainFrame {
    println ("Starting")
    title = "First Swing App"
    contents = new Button { text = "Click me" }
  }
} 
```

当我通过 Eclipse Scala IDE 作为 Scala 应用程序运行脚本时，一切都按预期工作。我将预期的“开始”文本打印到 Eclipse 控制台，然后弹出小 GUI 并等待单击。

当我尝试从命令行将其作为脚本运行时，我什么也得不到。

```
> scala SimpleSwingApp.scala 
```

没有错误消息，没有“开始”，没有 GUI。

那么发生了什么，我怎样才能达到我想要的结果（即，从命令行启动一个 Scala GUI 脚本）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T20:53:49.143

问题是 Scala 脚本运行器正在您的脚本文件中寻找主要方法，但没有找到。

找不到的原因是因为您从 SimpleSwingApplication 继承 main，因此脚本文件中没有 main 方法。

您可以通过向您的脚本添加一个立即调用 super.main 的 main 方法来解决此问题，如下所示：

```
import scala.swing._
object SimpleSwingApp extends SimpleSwingApplication {

  override def main(args: Array[String]) = super.main(args)

  def top = new MainFrame {
    println("Starting")
    title = "First Swing App"
    contents = new Button { text = "Click me" }
  }
} 
```

现在，该脚本不会在 Scala IDE 中引发错误，它可以通过调用来执行

```
scala SimpleSwingApp.scala 
```

而不是不太美观

```
scala -i SimpleSwingApp.scala -e "SimpleSwingApp.main(args)" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T18:56:13.817

如果要从命令行运行它，请在文件底部添加对 main 的显式调用：

```
SimpleSwingApp.main(Array()) 
```

如果你先用 scalac 编译它，然后运行，它会在不显式调用 main 的情况下工作。

# flash - ArcGIS - 中心化位置

> ID：12097946
> 
> 赞同：0
> 
> 时间：2012-08-23T18:31:22.813
> 
> 标签：flash, apache-flex, arcgis, flash-builder

全部，

我正在使用 ArcGIS 组件来显示地图。我想让给定的位置显示在我的浏览器页面的中心。我有左侧/顶部导航栏，其余空间由 ArcGIS 地图组件占用。

谁可以帮我这个事

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T18:46:15.730

假设您已将地图命名为“地图”：

```
map.extent = map.extent.centerAt(new MapPoint(myX, myY)); 
```

请注意，centerAt() 不会更改地图范围，它会创建一个新范围，您可以将地图的范围设置为该范围。

编辑：

这更复杂，但它会找到您为您传递的控件的真正中心：

```
 public function centerAtXY(relativeTo:DisplayObject, x:Number, y:Number):void
        {
            //Get the center of the displayobject's position on the map
            var offsetPoint:MapPoint = map.toMapFromStage(relativeTo.width /2, relativeTo.height /2);

            //Find the distance between the map's center and the display's center in map units
            var offsetX:Number = map.extent.center.x - offsetPoint.x;
            var offsetY:Number = map.extent.center.y - offsetPoint.y;

            //Recenter the map so x,y is at the center of the displayobject
            var centerPoint:MapPoint = new MapPoint(x + offsetX, y + offsetY);
            map.extent = map.extent.centerAt(centerPoint);
        } 
```

# batch-file - FFMpeg：在 X 和 X 之间截取一定数量的屏幕截图？

> ID：12097948
> 
> 赞同：0
> 
> 时间：2012-08-23T18:31:57.627
> 
> 标签：batch-file, ffmpeg, screenshot

有没有办法让ffmpeg在X时间和X时间之间拍摄X张截图？我现在执行命令行代码的方式是这样的：

> ffmpeg -ss 79 -i 1.avi -r 1/2.15 -f image2 1_%%05d.jpg

此方法仅从 79 秒开始截屏，但我无法找到设置结束时间的方法（在视频结束之前）。

此外，我将在网站上显示这些视频截图，并希望每个视频文件有相同数量的截图以保持一致性。有没有办法设置我想要从视频中截取多少张截图？例如，ffmpeg 计算出我指定的两点之间的时间间隔，然后根据我想要从视频中获取的总数计算出多久截屏一次？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T06:16:28.567

有一个`-vframes`选项可以控制应该使用多少帧输入`ffmpeg`。

还有一个`-t`选项可以控制要处理多少秒的内容。

使用其中任何一种。

# php - 从主页发送邮件。我的代码中缺少什么？

> ID：12097959
> 
> 赞同：1
> 
> 时间：2012-08-23T18:32:23.977
> 
> 标签：php, html, html-email

我希望能够从我的主页发送邮件，但它不能按我的意愿工作。我收到一封邮件，但它没有说是从家里来的。只是说未知。我在两个不同的地方有这个。我使用其他文本区域的另一个地方，在那里我得到了邮件中的所有内容，它工作正常，但是我正在尝试工作的另一个地方我只希望他们在那里添加电子邮件，然后它应该与所有信息一起发送。

我页面上的代码：

```
<form id="subscribe" class="clearfix" method="post" action="get_mail.php">
    <div class="field alignleft">
       <input type="text" value="Enter your email" onclick="if(this.value=='Enter your email')this.value='';" onblur="if(this.value=='')this.value='Enter your email';" />
     </div>
     <div class="search-btn">
        <input type="submit" value="" />
     </div>
</form> 
```

然后我有这个 php 脚本

```
<?php

    //-----------------------------------------------------
    //-----------------------------------------------------
    $address= "xxxxx.xxxxx@outlook.com";
    //-----------------------------------------------------
    //-----------------------------------------------------

    $name = $_REQUEST["name"];
    $email = $_REQUEST["email"];
    $website = $_REQUEST["website"];
    $subject .= "You have an email from your web site (from $name)! \n\n";
    $message_content = strip_tags($_REQUEST["message"]);

    $headers = "From: $name <$email>\n";
    $headers .= "Reply-To: $subject <$email>\n";

    $message = "--$mime_boundary\n\n";

    $message .= "You have an email from your web site: \n\n\n";
    $message .= "Name: $name \n\n";
    $message .= "Email: $email \n\n";
    $message .= "Website: $website \n\n";
    $message .= "Message: $message_content \n\n";

    $message .= "--$mime_boundary--\n\n";

    $mail_sent = mail($address, $subject, $message, $headers);
    echo $mail_sent ? "Success, mail sent!" : "Mail failed";

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T18:38:07.597

两件事情：

1.  尝试将 $headers 中的“\n”替换为“\r\n”。

2.  据我所知，一些主机（例如，我认为 GoDaddy 或 Hostgator 会这样做）会覆盖已发送电子邮件中的“发件人”值并将其更改为您拥有的那个。这意味着，如果您的主机帐户中没有明确包含“from@domain.com”，您将无法从该地址发送电子邮件，并且它将始终被覆盖。你必须联系你的主人来检查这个。如果可能，我建议还检查另一台服务器上的脚本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T00:41:49.513

您的表单字段似乎都没有名称 - 您的代码在这里：

```
$name = $_REQUEST["name"];
$email = $_REQUEST["email"];
$website = $_REQUEST["website"]; 
```

需要名称为“名称”、“电子邮件”和“网站”的表单字段。例如，您的“电子邮件”字段需要如下所示：

```
<input type="text" name="email" ... /> 
```

# javascript - Jquery下拉菜单奇怪的行为

> ID：12097965
> 
> 赞同：1
> 
> 时间：2012-08-23T18:32:58.367
> 
> 标签：javascript, jquery, jquery-animate

[我的问题（小提琴）](http://jsfiddle.net/4cdTV/1/)

我的问题是，在我的 jquery 动画下拉菜单上，当您将鼠标悬停在“其他”链接上时，子菜单不会出现。当使用 Firefox 来“检查元素”时，我发现高度是动画的，宽度看起来还不错，但我看到的只是左边框。

我注意到，如果我将该特定部分显示为一个块，当您为第一个菜单设置动画时，它会显示，但在输入无序列表时，它会消失（[ex](http://jsfiddle.net/4cdTV/2/)）。我想它与此有关，但我无法弄清楚是什么原因造成的。

任何煽动我可能只是忽略的东西都会很棒，当然非常感谢。

**笔记：**

*   我在 Firefox、Chrome、Opera 和 IE 中遇到过这个问题。
*   它的设计使其只能与 css 一起使用。第一个`.each`是覆盖默认的 CSS 悬停行为。
*   空跨度包含箭头图像。
*   仅发布相关代码。但是，您可以[在此处查看我的网站](http://toreyscheer.com/)
*   如果您对提高效率有任何建议，欢迎随时欢迎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T19:19:36.157

[http://jsfiddle.net/sailorob/4cdTV/5/](http://jsfiddle.net/sailorob/4cdTV/5/)

为了简单起见，我删除了你的 CSS，并通过使用 jQuery slideUp 和 slideDown 简化了你的函数，它们基本上处理了你用函数管理的许多 css 属性。从这里开始，我认为在你的一些 CSS 中工作会相当简单。

在菜单上使用 javascript/jQuery/animation 时，我强烈建议使用计时器 (setTimeout) 来触发 mouseenters 和 'leaves. 这样，当用户不小心将鼠标移出菜单几个像素并关闭时，您的菜单会更加宽容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T18:58:57.193

好吧，在调试 JS 和 CSS 时，我发现如果你**删除所有的 JS**，带有子菜单的下拉菜单可以正常工作。另一个**li**打开它下面的**ul**就好了。请注意，尽管没有 JS，但它不会动画。

[这是一个分叉的小提琴。](http://jsfiddle.net/digthedoug/yrHsZ/)

我在最新的 Chrome 和 Firefox 中对其进行了测试。

# jquery - jQuery Nested Sortable - 在 2 个列表之间复制而不是移动项目

> ID：12097966
> 
> 赞同：0
> 
> 时间：2012-08-23T18:33:00.900
> 
> 标签：jquery, nested, draggable, jquery-ui-sortable, nested-sortable

我正在使用一个应用程序，您可以在其中拖放 2 个嵌套排序项之间的列表项：http: [//jsfiddle.net/jhogervorst/Ge7eK/9/](http://jsfiddle.net/jhogervorst/Ge7eK/9/)

我的问题是您将如何更改代码以便将元素从一个列表复制到另一个列表，而不是移动它们？似乎是一个简单的更改，但我无法弄清楚。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T19:20:58.430

我已经得到了它的大部分方式：

[http://jsfiddle.net/Ge7eK/41/](http://jsfiddle.net/Ge7eK/41/)

```
receive: function(event, ui){
    var ele = document.elementFromPoint(ui.position.left, ui.position.top);
    var newEle = ui.item.clone();        
    newEle.attr("id", ""); // trying to prevent duplicate ids
    $(ele).after(newEle);            
},

remove: function(event, ui){
    event.preventDefault(); // this stops the item from being removed
} 
```

当您将一个项目从列表 A 拖动到列表 B，然后将另一个项目从列表 A 拖动到该复制项目上时，会发生错误。我不确定为什么会这样，但它可能与您使用的 id 有关。

此外，放置位置可能有点挑剔。如果您的占位符项目位于列表中的两个项目之间（而不是稍微重叠一个），它将将该项目添加到列表的末尾。

# asp.net - 标记在 VS 2008 中被删除

> ID：12097979
> 
> 赞同：0
> 
> 时间：2012-08-23T18:34:03.520
> 
> 标签：asp.net, visual-studio-2008

我正在使用母版页、更新面板、AJAX 选项卡容器以及 modalpopup 扩展器和其他 AJAX 验证控件。Termination Reaon 的粗体线有问题。我需要`<asp:ListItem Text="Select Contract Termination Reason.." Value=""></asp:ListItem>`控制错误：

> 'ddlContractTerminationReason' 有一个无效的 SelectedValue，因为它不存在于项目列表中”

它可以工作，但是在尝试对应用程序进行一些其他更改时突然开始被删除。如果我一点击保存就尝试再次输入，它会被删除并保存文件。我的网络管理员为我重新安装了所有东西，假设是某些病毒问题，但看起来是其他原因造成的。非常感谢您对此的任何帮助。

```
<tr> 
  <td> 
    <asp:DropDownList ID="ddlContractTerminationReason" runat="server" AppendDataBoundItems="True" CausesValidation="True" CssClass="dropdown extralong" DataSourceID="dsTerminationReason" DataTextField="ReasonDescription" DataValueField="TerminationReasonID">
      <asp:ListItem Text="Select Contract Termination Reason.."></asp:ListItem>            
    </asp:DropDownList> 
    <asp:CustomValidator ID="cusValTerminationReason" runat="server" ClientValidationFunction="RequireTerminationReason" ControlToValidate="ddlContractTerminationReason" ErrorMessage="Please enter Termination Reason OR Other Resson, if the Contractor is Terminated!" OnServerValidate="ServerValidateTerminationDate" SetFocusOnError="True" Text="*" ValidateEmptyText="True" ValidationGroup="ContrMasterGroup"></asp:CustomValidator> 
    <asp:SqlDataSource ID="dsTerminationReason" runat="server" ConnectionString="<%$ ConnectionStrings:Conn %>" SelectCommand="SELECT [TerminationReasonID], [ReasonDescription] FROM [TerminationReasons] ORDER BY [ReasonDescription]"> </asp:SqlDataSource>
  </td>
  <td class="rightalign">
    <asp:Label ID="lblOtherContractTerminationReason" runat="server" CssClass="lbl" Text="if Others, Explain:"></asp:Label>
  </td>
  <td>
   <asp:TextBox ID="txtOtherContractTerminationReason" runat="server" CssClass="long" TextMode="MultiLine"></asp:TextBox> 
  </td>
  <td> </td>
</tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T17:14:10.923

在您的 DataBind 执行此代码之后

```
ddlContractTerminationReason.DataBind();
ddlContractTerminationReason.Items.Add("Select Contract Termination Reason.."); 
```

# bash - 采用 ”！” 在脚本中执行具有相同参数的命令

> ID：12097980
> 
> 赞同：4
> 
> 时间：2012-08-23T18:34:03.343
> 
> 标签：bash, scripting

在外壳中，我运行以下命令没有问题，

> ls -al
> 
> !ls

第二次调用`ls`也列出带有`-al`标志的文件。但是，当我将上述脚本放入 bash 脚本时，会引发投诉，

`!ls, command not found.`

如何在脚本中实现相同的效果？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T18:42:18.653

您需要在脚本中同时打开命令历史记录和 !-style 历史扩展（在非交互式 shell 中默认情况下两者都关闭）：

```
set -o history
set -o histexpand 
```

扩展的命令也会响应标准错误，就像在交互式 shell 中一样。您可以通过打开`histverify`shell 选项 ( `shopt -s histverify`) 来防止这种情况，但在非交互式 shell 中，这似乎会使历史扩展成为空操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-09T17:33:02.717

好吧，我也想让这个工作，我必须告诉大家，**这个**`set -o history ; set -o histexpand`方法在. 无论如何，它并不意味着在那里使用，因为有更好的方法来实现这一点。**`bash 4.x`**

 **首先，一个相当简单的例子，只是想在脚本中*执行* `history`：（**`bash`4.x 或更高版本**）

```
#!/bin/bash -i
history 
```

简短的回答：它有效！
Spaking new`-i`选项代表**interactive**，并且`history` *可以*使用。但为了什么目的？

引用 OP 中 Michael H. 的评论：
*“虽然您可以启用此功能，但这是不好的编程习惯。它会使您的脚本（...）难以理解。默认情况下禁用它是有原因的。为什么你想这样做吗？”*

是的，**为什么**？这有什么**更深层次的意义**？嗯，有，我将在后续部分演示。

我的`history`缓冲区变大了，而其中一些行是单行脚本，我真的不想每次都重新输入。但有时，我也想稍微*改变*一下这些行，因为我可能想给出第三个参数，而我之前总共只需要两个。因此，这是使用4.0+ 功能*调用的***理想**方式：`bash` *`history`*

 *```
$ history
 (...)
 <lots of lines>
 (...)
  1234 while IFS='whatever' read [[ $whatever -lt max ]]; do ... ; done < <(workfile.fil)
 <25 more lines> 
```

所以历史上的**1234***正是*我们想要的线。当然，我们可以**把鼠标移到**那里，把整行放在主缓冲区中吗？但是我们在 *NIX 上，那么为什么我们不能让我们的生活更轻松一些呢？这就是我写下面这个小脚本的原因。同样，这`bash`仅适用于 4.0+（但可能适用于`bash`3.x 和更早版本的上述`set -o ...`内容......）

```
#!/bin/bash -i
[[ $1 == "" ]] || history | grep "^\s*$1" | 
awk '{for (i=2; i<=NF; i++) printf $i" "}' | tr '\n' '\0' 
```

如果您将其保存`xselauto.sh`为例如，您可以调用

```
$ ./xselauto.sh 1234 
```

并且第`history`#1234 行的内容将在您的**主缓冲区**中，可以重复使用！现在，如果有人仍然说“这没有 AFAICS 的目的”或“谁会需要这个功能？” - 好吧，我不在乎。但我不想再没有这个功能，因为我懒得每次都重新输入复杂的行。而且我也不想为历史中的每条标记线触摸鼠标，TBH。这就是`xsel`写的。

顺便说一句，`tr`管道的一部分是一个肮脏的黑客，它将阻止命令被*执行*。对于“危险”的命令，在他/她点击执行它之前总是给用户留下一个**查看的方式是****非常重要的。**你*可以*省略它，但是……你已经被警告过了。**`Enter`**

 **** * *

*PS 这个 scriptlet 实际上是一种**解决方法**，模拟`!1234`在 bash shell 上键入。由于我永远无法**直接**在脚本中完成工作（`!`永远不会让我透露历史第 1234 行的**内容**），因此我通过简单地ing 来解决我想要复制的行的问题。**`echo`**`grep`*****

 ***** * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-23T19:05:34.863

历史扩展是 shell 的交互式命令行编辑功能的一部分，而不是脚本语言的一部分。它通常在脚本的上下文中不可用，只有在与（伪）人工操作员交互时才可用。（伪意味着它可以与类似`expect`或其他按键重复自动化工具一起工作，这些工具通常试图扮演人类，而不是暗示任何特定的操作员可能是非人类或任何东西）。**********

# java - Jenkins 发现找不到 ssh 密钥

> ID：12097982
> 
> 赞同：2
> 
> 时间：2012-08-23T18:34:11.767
> 
> 标签：java, git, ubuntu, bitbucket

当我以 jenkins 用户身份登录时，我在 ~/.ssh/id_rsa.pub 中有一个 ssh 密钥。

我已将其正确导入 bitbucket 并且它已接受密钥。

当我尝试做一个 git clone （到正确的 URL）时，我仍然得到....

```
Building in workspace /var/lib/jenkins/jobs/Google adwords/workspace
Checkout:workspace / /var/lib/jenkins/jobs/Google adwords/workspace - hudson.remoting.LocalChannel@2c473996
Using strategy: Default
Cloning the remote Git repository
Cloning repository origin
ERROR: Error cloning remote repo 'origin' : Could not clone git@bitbucket.org:DAVID99WORLD/assessme.git
hudson.plugins.git.GitException: Could not clone git@bitbucket.org:DAVID99WORLD/assessme.git
    at hudson.plugins.git.GitAPI.clone(GitAPI.java:268)
    at hudson.plugins.git.GitSCM$2.invoke(GitSCM.java:1122)
    at hudson.plugins.git.GitSCM$2.invoke(GitSCM.java:1064)
    at hudson.FilePath.act(FilePath.java:842)
    at hudson.FilePath.act(FilePath.java:824)
    at hudson.plugins.git.GitSCM.checkout(GitSCM.java:1064)
    at hudson.model.AbstractProject.checkout(AbstractProject.java:1256)
    at hudson.model.AbstractBuild$AbstractBuildExecution.defaultCheckout(AbstractBuild.java:589)
    at jenkins.scm.SCMCheckoutStrategy.checkout(SCMCheckoutStrategy.java:88)
    at hudson.model.AbstractBuild$AbstractBuildExecution.run(AbstractBuild.java:494)
    at hudson.model.Run.execute(Run.java:1502)
    at hudson.maven.MavenModuleSetBuild.run(MavenModuleSetBuild.java:477)
    at hudson.model.ResourceController.execute(ResourceController.java:88)
    at hudson.model.Executor.run(Executor.java:236)
Caused by: hudson.plugins.git.GitException: Command "git clone --progress -o origin git@bitbucket.org:DAVID99WORLD/assessme.git /var/lib/jenkins/jobs/Google adwords/workspace" returned status code 128:
stdout: Cloning into '/var/lib/jenkins/jobs/Google adwords/workspace'...

stderr: Host key verification failed.
fatal: The remote end hung up unexpectedly 
```

有谁知道为什么会发生这种情况？根据我读过的文档， ~/.ssh 是作为 jenkins 用户存在的正确目录。

编辑：我的 jenkins 用户在 ~/.ssh 中没有 known_hosts 文件，但我的根级用户有 - 应该吗？我可以用我的 jenkins 用户进行克隆，它根本没有提到主机作为 jenkins 用户。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T19:06:29.263

它可能与 known_hosts 文件无关。我认为，您必须检查 Jenkins 是否能够读取您的公共 SSH 密钥。因此，您可能需要检查：

*   在 /etc/passwd 中为 Jenkins 用户定义的 home 匹配 ~/.ssh
*   Jenkins 用户可以访问他的主目录（所以至少 --x--x--x 在上面的所有目录中）
*   Jenkins 用户有权访问 id_rsa.pub 文件
*   Jenkins 实际上是使用 Jenkins 用户而不是例如 tomcat 用户运行的

另外，如果您删除当前的 id_rsa.pub 文件会怎样？它是否抱怨找不到要使用的公钥？

# php - cURL请求后PHP找不到cookie文件

> ID：12097983
> 
> 赞同：0
> 
> 时间：2012-08-23T18:34:17.763
> 
> 标签：php, cookies, curl, file-get-contents

我正在尝试使用 cURL 登录论坛并将 cookie 保存到文件中，然后解析 cookie 以获取`phpbb2mysql_sid`cookie。到目前为止，这是我的代码：

```
<?php

$curl = curl_init();

$cookieFile = 'C:\xampp\htdocs\cookies\\' . uniqid(true);

// Login
curl_setopt($curl, CURLOPT_URL, 'http://localhost/phpbb2/login.php');
curl_setopt($curl, CURLOPT_COOKIEJAR, $cookieFile);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
curl_setopt($curl, CURLOPT_HEADER, true);
curl_setopt($curl, CURLOPT_POST, true);
$postVars = array('username' => 'username', 'password' => 'testing', 'autologin' => 'on', 'login' => 'Log in');
curl_setopt($curl, CURLOPT_POSTFIELDS, $postVars);
$resp = curl_exec($curl);

// Parse sid from cookie file
preg_match('/phpbb2mysql_sid\t(.*)/', file_get_contents($cookieFile), $match);
$sId = $match[1];

echo $sId; 
```

但是，当我运行脚本时出现此错误：

```
Warning: file_get_contents(C:\xampp\htdocs\cookies\150367764c4ef3) [function.file-get-contents]: failed to open stream: No such file or directory in C:\xampp\htdocs\leech\post.php on line 18

Notice: Undefined offset: 1 in C:\xampp\htdocs\post.php on line 19 
```

如果我检查我的文件系统，文件就在那里。获取文件内容的代码是**在**cURL 请求之后，所以文件应该存在，对吧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T18:38:20.883

发现了问题。cookie 文件只保存一次`curl_close()`被调用。只需在调用之前关闭 cURL 句柄`file_get_contents()`，它就会像一个魅力一样工作。

# php - 将 MYSQL 查询转换为 PHP 查询

> ID：12097984
> 
> 赞同：0
> 
> 时间：2012-08-23T18:34:19.573
> 
> 标签：php, mysql

我一直试图让它工作一段时间。我只是难过。这是原始的 MYSQL，然后是我一直在研究的 PHP。

MYSQL：

```
SET @COD_PAIS = 3;
SET @F_HASTACORTE = '2012-03-31 01:00:00';

SELECT mcarteras.DES_CARTERA_CC                 AS 'Short Name of Fund'
     , mcarterasflias.DES_CARTERAFLIA           AS 'I/C'
     , msociedades.DES_SOCIEDAD_CORTO           AS 'Fund Manager Company'
     , mcarteras_clases.DES_CARTERACLASE        AS 'Class'
     , mcarteras_clasesesp.DES_CARTERACLASE_ESP AS 'Special Class'
     , dr_rentmovil_carteras.POR_RENTCARTERA    AS 'TTR year-to-date %'
     , dficha_mes.POR_REMUNERA_COBRADA          AS 'Mgmt Fee Effectively Charged'
     , dficha_mes.POR_GASTOS_TOTALESC           AS 'Total Expenses %'
     , dficha_mes.VR_CARTERA_FCORTE             AS 'Fund Size'
     , dr_rentmovil_carteras.F_HASTACORTE             AS 'Date'
  FROM mcarteras
INNER
  JOIN mcarterasflias
    ON mcarterasflias.ID_CARTERAFLIA           = mcarteras.ID_CARTERAFLIA
INNER
  JOIN msociedades
    ON msociedades.ID_SOCIEDAD                 = mcarteras.ID_SOCIEDADADM
INNER
  JOIN mcarteras_clases
    ON mcarteras_clases.ID_CARTERACLASE        = mcarteras.ID_CARTERACLASE
INNER
  JOIN mcarteras_clasesesp
    ON mcarteras_clasesesp.ID_CARTERACLASE_ESP = mcarteras.ID_CARTERACLASE_ESP  
INNER
  JOIN dr_rentmovil_carteras
    ON dr_rentmovil_carteras.ID_CARTERA        = mcarteras.ID_CARTERA   
   AND dr_rentmovil_carteras.COD_PAIS                                       = @COD_PAIS
   AND dr_rentmovil_carteras.F_HASTACORTE                                =@F_HASTACORTE
   AND dr_rentmovil_carteras.ID_FORMATO = 1
   AND dr_rentmovil_carteras. ID_COLUMNA = 5
INNER
  JOIN dficha_mes
    ON dficha_mes.ID_CARTERA                   = mcarteras.ID_CARTERA   
   AND dficha_mes.COD_PAIS                                                  = @COD_PAIS
   AND dficha_mes.F_CORTE                                              = @F_HASTACORTE 

 WHERE mcarteras.COD_PAIS                                                   = @COD_PAIS
   AND mcarteras.ID_CARTERATIPO = 4
   AND mcarteras.ID_CARTERAFLIA IN ( 3,4 )
   AND mcarteras.IND_PUBLICACION = 1
   AND mcarteras.COD_ESTADO= 1

PHP:
<?php
$con = mysql_connect("localhost","root","");
 if (!$con)
   {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("bdcarterascv2", $con);
$COD_PAIS = '3';
$F_HASTACORTE = '2012-03-31 01:00:00';

$result = mysql_query("SELECT DES_CARTERA_CC               AS 'Short Name of Fund' 
     , mcarterasflias.DES_CARTERAFLIA           AS 'I/C'
     , msociedades.DES_SOCIEDAD_CORTO           AS 'Fund Manager Company'
     , mcarteras_clases.DES_CARTERACLASE        AS 'Class'
     , mcarteras_clasesesp.DES_CARTERACLASE_ESP AS 'Special Class'
     , dr_rentmovil_carteras.POR_RENTCARTERA    AS 'TTR year-to-date %'
     , dficha_mes.POR_REMUNERA_COBRADA          AS 'Mgmt Fee Effectively Charged'
     , dficha_mes.POR_GASTOS_TOTALESC           AS 'Total Expenses %'
     , dficha_mes.VR_CARTERA_FCORTE             AS 'Fund Size'
     ,dr_rentmovil_carteras.F_HASTACORTE        AS'Date'
  FROM mcarteras 
INNER
  JOIN mcarterasflias
    ON mcarterasflias.ID_CARTERAFLIA           = mcarteras.ID_CARTERAFLIA
INNER
  JOIN msociedades
    ON msociedades.ID_SOCIEDAD                 = mcarteras.ID_SOCIEDADADM
INNER
  JOIN mcarteras_clases
    ON mcarteras_clases.ID_CARTERACLASE        = mcarteras.ID_CARTERACLASE
INNER
  JOIN mcarteras_clasesesp
    ON mcarteras_clasesesp.ID_CARTERACLASE_ESP = mcarteras.ID_CARTERACLASE_ESP  
INNER
  JOIN dr_rentmovil_carteras
    ON dr_rentmovil_carteras.ID_CARTERA        = mcarteras.ID_CARTERA   
  AND dr_rentmovil_carteras.COD_PAIS                                       =  $COD_PAIS
   AND dr_rentmovil_carteras.F_HASTACORTE                          =      $F_HASTACORTE
   AND dr_rentmovil_carteras.ID_FORMATO = 1
   AND dr_rentmovil_carteras. ID_COLUMNA = 5
INNER
  JOIN dficha_mes
    ON dficha_mes.ID_CARTERA                   = mcarteras.ID_CARTERA   
   AND dficha_mes.COD_PAIS                                            =      $COD_PAIS
   AND dficha_mes.F_CORTE                                             =  $F_HASTACORTE 

 WHERE mcarteras.COD_PAIS                                                =  $COD_PAIS
   AND mcarteras.ID_CARTERATIPO = 4
   AND mcarteras.ID_CARTERAFLIA IN ( 3,4 )
   AND mcarteras.IND_PUBLICACION = 1
   AND mcarteras.COD_ESTADO= 1
")
or die(mysql_error());

// HTML ... Aliases from Mysql
echo "<table border='1'>
<tr>
<th>Short Name of Fund</th>
<th>I/C</th>
<th>Fund Manager Company</th>
<th>Class</th>
<th>Special Class</th>
<th>TTR year-to-date %</th>
<th>Mgmt Fee Effectively Charged</th>
<th>Total Expenses %</th>
<th>Fund Size</th>
<th>Date</th>
</tr>";

//<tr> specifies table row. for each <td> (table data) will specify a new column.  The     $row specifies the mysql column name (in this case using an alias)
while($row = mysql_fetch_array($result))
  {
  echo "<tr>";
  echo "<td>" . $row['Short Name of Fund'] . "</td>";
 echo "<td>" . $row['I/C'] . "</td>";
  echo "<td>" . $row['Fund Manager Company'] . "</td>";
  echo "<td>" . $row['Class'] . "</td>";
  echo "<td>" . $row['Special Class'] . "</td>";
  echo "<td>" . $row['TTR year-to-date %'] . "</td>";
  echo "<td>" . $row['Mgmt Fee Effectively Charged'] . "</td>";
  echo "<td>" . $row['Total Expenses %'] . "</td>";
  echo "<td>" . $row['Fund Size'] . "</td>";
   echo "<td>" . $row['Date'] . "</td>";
  echo "</tr>";
  }
echo "</table>";

mysql_close($con);
?> 
```

这是当前的错误：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 28 行的“01:00:00 AND dr_rentmovil_carteras.ID_FORMATO = 1 AND dr_rentmovil_carte”附近使用正确的语法

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T18:37:30.337

您需要将日期时间字符串用引号括起来：

```
='$F_HASTACORTE' 
```

否则，它将评估`2012-03-31 01:00:00`为数字，而不是日期时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T18:37:16.953

你可能想在你的`'$VARIABLES'`. 如果你不这样做，就逃脱他们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T18:37:20.493

尝试：

```
AND dr_rentmovil_carteras.F_HASTACORTE                          =      '$F_HASTACORTE' 
```

如果你的变量不是整数，你应该引用它们——在其他一些地方你也应该这样做。

您还应该考虑使用 PDO 而不是 mysql_* 函数 - 如果您使用绑定参数，您可以非常巧妙地回避很多此类问题。

# c# - 使用方法作为默认参数

> ID：12097989
> 
> 赞同：3
> 
> 时间：2012-08-23T18:34:58.903
> 
> 标签：c#

我希望在我的自定义 XNA GUI 中创建一个 Button 类，该类接受方法作为参数，类似于在 Python 中`tkinter`您可以设置要调用的函数 `Button.config(command = a_method)`。

我已经阅读过[在这里](https://stackoverflow.com/questions/380198/how-to-pass-a-function-as-a-parameter-in-c)、[这里](https://stackoverflow.com/questions/2082615/pass-method-as-parameter-using-c-sharp)和[这里](https://stackoverflow.com/questions/2315468/is-there-an-easier-way-to-give-a-function-an-alias-name-in-c-sharp/2315555#2315555)使用委托作为参数，但我似乎离让它工作更近了一步。我不完全理解代表是如何工作的，但是我尝试了几种不同的方法都没有成功，比如使用`Func<int>? command = null`以便稍后测试以查看是否`command`是，`null`然后我会调用预设默认值，但后来我得到了一个`Func cannot be nullable type`或类似的东西。

理想情况下，代码类似于：

```
class Button
{
//Don't know what to put instead of Func
Func command;

// accepts an argument that will be stored for an OnClick event
public Button(Action command = DefaultMethod)
  {
    if (command != DefaultMethod)
    {
       this.command = command;
    }
  }
} 
```

但似乎我尝试过的一切都没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T18:58:27.583

默认参数必须是编译时间常数。在 C# 中，委托不能是常量。您可以通过在实现中提供自己的默认值来获得类似的结果。（这里只使用 Winforms）

```
 private void button1_Click(object sender, EventArgs e)
    {
        Button(new Action(Print));
        Button();
    }

    public void Button(Action command = null)
    {
        if (command == null)
        {
            command = DefaultMethod;
        }
        command.Invoke();
    }

    private void DefaultMethod()
    {
        MessageBox.Show("default");
    }

    private void Print()
    {
        MessageBox.Show("printed");
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T18:40:41.790

如果您对默认值感兴趣，这样的事情会起作用吗？

```
class Button
{
  //Don't know what to put instead of Func
  private readonly Func defaultMethod = ""?
  Func command;

  // accepts an argument that will be stored for an OnClick event
  public Button(Action command)
  {
    if (command != defaultMethod)
    {
       this.command = command;
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T18:54:33.400

你得到的关于`Func<T>`不能为空的错误是正确的——它是一个引用类型，只有值类型可以为空。

要将`Func<T>`参数默认为`null`，您可以简单地编写：

```
Func<int> command = null 
```

# java - Java JFrame clear 只是添加了一个 GLabel

> ID：12097990
> 
> 赞同：0
> 
> 时间：2012-08-23T18:35:06.250
> 
> 标签：java, jframe

我是 Java 新手，如果我的问题似乎太愚蠢，请原谅。

我在 JFrame -> Container -> GCanvas 中定义了一个带有 GLabels 的文本菜单，如下所示：

1.  出口
2.  数的幂：
3.  n 阶乘：

我可以选择这样的选项编号：

```
 public int bagaOcifra(){
    IODialog consola = new IODialog();
    int aleg = consola.readInt("Choose a menu option: (0 - exit):");
    return aleg;
} 
```

在我选择之后，假设选项 1，我添加了一个带有结果字符串的新 GLabel“结果”，菜单变为：

1.  出口
2.  数的幂：**结果是：8**
3.  n 阶乘：

因此，当我“回来”并再次选择选项 1 时，我只想删除在那里添加的 Glabel“reusult”：canvas.add(result, 250, 100);。

```
do { 
    int ceAmAles = bagaOcifra();
    switch (ceAmAles) {

    case 0:
    System.exit(0);

    case 1:
    double rezCalculPutere = alegere1.CalculPutere();
    GLabel result= new GLabel("The result is: " + rezCalculPutere);
    canvas.add(result, 250, 100);
    break;

case 2:
        ...

    case 3:
            ...
        }
} while (true);
    } 
```

我可以这样做，还是必须重新添加所有 Canvas 对象？

我提到：

```
 do { 
    int ceAmAles = bagaOcifra();
    switch (ceAmAles) {

    case 0:
    System.exit(0);

    case 1:
    canvas.remove(result); // <b> it's not working </b>
    double rezCalculPutere = alegere1.CalculPutere();
    GLabel result= new GLabel("The result is: " + rezCalculPutere);
    canvas.add(result, 250, 100);
    break;

case 2:
        ...

    case 3:
            ...
        }
} while (true);
    } 
```

我什至尝试构建一个空的 GLabel 并添加我的“结果” GLabel 但没有运气。

先感谢您。

# php - 检查数据库中是否存在表的问题

> ID：12097991
> 
> 赞同：3
> 
> 时间：2012-08-23T18:35:13.723
> 
> 标签：php, mysql

基本上我有我的 MySQL dbname = test 和我的表名 = page。

我想使用 php PDO 创建一个查询来检查我的数据库“test”中是否存在表“page”

我已经尝试了这两件事，但它确实有效..第一个例子总是告诉我它不存在..即使它确实存在于我的数据库中，而第二个例子告诉我它总是存在......即使当它不存在....

```
$db = new PDO('mysql:host=' . $DB_SERVER . ';dbname=' . $DB_NAME, $DB_USER, $DB_PASS);

if (array_search('pages', $db->query('show tables')->fetch()) !== false) {
    echo "the db exists";
} else {
    echo "the db doesnt exists";
} 
```

我也试过这个

```
$results = $db->query('SHOW TABLE LIKE \'page\'');
if (count($results) > 0) {
    echo 'table exists';
} else {
    echo "it doesnt";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T18:48:40.453

怎么样：

```
$results = $db->query('SHOW TABLES LIKE \'page\'');
if (count($results->fetchAll()) > 0) {
    echo 'table exists';
} else {
    echo "it doesnt";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T18:40:12.730

确保您的用户有权访问`information schema`数据库，然后执行以下操作：

```
SELECT TABLE_NAME FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA = 'database_to_search'
AND TABLE_NAME LIKE "table_here%" 
```

然后抓取并检查您的结果。如果需要，使用上述内容还可以限制您的响应（偏移量、限制）。

# asp.net - 用户控件属性在渲染前失去价值

> ID：12097992
> 
> 赞同：0
> 
> 时间：2012-08-23T18:35:18.863
> 
> 标签：asp.net, user-controls

我有一个名为 Navigation 的用户控件，它有一个包含导航组的属性：

```
protected List<NavigationGroup> NavigationGroups { get; set; } 
```

我在 Page_Load 期间设置了这个属性：

```
protected void Page_Load(object sender, EventArgs e)
{
    // Get all navigation items.
    NavigationGroups = From.Somewhere.Else.Groups;
} 
```

可以在控件中的其他方法调用期间访问该值。但是，当执行到达 Render 方法时，NavigationGroups 属性为空。是什么导致价值消失，我该如何让它坚持下去？

* * *

即使这一切都发生在一次加载期间 - 不是试图在回发之间保持它 - 我尝试[将属性存储在 ViewState 中](https://stackoverflow.com/a/1795955/128217)，但这也无济于事。仍然在 OnPreRender 和 Render 之间消失。

* * *

**编辑**：从评论中添加信息。

看起来唯一失去价值的字段就是这个字段，因为它被设置为在其他地方创建的列表。但是，对我的本地列表进行更改不会影响另一个列表，并且当我的本地列表被擦除时，另一个列表仍然受到重视。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T19:32:25.577

无法解释为什么会出现这个问题，因为这两个`List`s 可以证明是分开的，但是使用[深拷贝](http://utilicode.wordpress.com/2012/04/08/deep-copy-serialization/)可以：

```
NavigationGroups = GetDeepCopy<List<NavigationGroup>>(From.Somewhere.Else.Groups); 
```

# javascript - 取消拖动和选择事件

> ID：12097994
> 
> 赞同：0
> 
> 时间：2012-08-23T18:35:41.430
> 
> 标签：javascript, internet-explorer-8, dom-events, selection, drag

我正在使用在 Chrome 资源文件 (chrome://resources/js/util.js) 中找到的此功能，并且在 Google Chrome 上运行良好。

```
 /**
     * Disables text selection and dragging.
     */
    function disableTextSelectAndDrag() {
      // Disable text selection.
      document.onselectstart = function(e) {
        e.preventDefault();
      }

      // Disable dragging.
      document.ondragstart = function(e) {
        e.preventDefault();
      }
    } 
```

我想在 Internet Explorer 8 中取消此事件，但这不起作用。

如何在 IE8 中取消此事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:12:47.613

尝试这个：

```
/**
 * Disables text selection and dragging on IE8 and below.
 */
function disableTextSelectAndDragIE8() {
  // Disable text selection.
  document.body.onselectstart = function() {
      return false;
  }

  // Disable dragging.
  document.body.ondragstart = function() {
      return false;
  }
} 
```

# vertica - 垂直时间序列平均值

> ID：12097996
> 
> 赞同：0
> 
> 时间：2012-08-23T18:35:47.950
> 
> 标签：vertica

我有一张随时间变化的股票价格表，其中包含以下字段：时间戳、价格。

我可以像这样获得每天股票的最后价值：

```
SELECT slice_time, TS_LAST_VALUE(price, 'CONST') FROM StockPrices
TIMESERIES slice_time AS '1 day' over (ORDER BY timestamp) 
```

如果我想要当天股票的平均价格怎么办？类似 TS_AVG_VALUE...

请注意，这需要在任意时间范围内工作，而不是在一天中进行硬编码。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-23T20:52:44.403

退房： http: [//my.vertica.com/docs/6.0.0-1/HTML/index.htm#14430.htm](http://my.vertica.com/docs/6.0.0-1/HTML/index.htm#14430.htm)

我认为你可以这样做：

```
SELECT avg(TS_FIRST_VALUE(bid, 'LINEAR')) avg_bid FROM Tickstore
TIMESERIES slice_time AS '2 seconds' OVER(PARTITION BY symbol ORDER BY ts); 
```

我认为，线性度会给你想要的平均效果。