# StackOverflow 问答 10580000-10580999

# .net - 一个程序集中的 EF 和多个 SQL 版本 - 是否可能

> ID：10580000
> 
> 赞同：1
> 
> 时间：2012-05-14T08:42:06.480
> 
> 标签：.net, entity-framework, entity-framework-4

至少可以说这让我有点恼火......

我正在将服务层项目升级到 v.next，并在此过程中将我的所有 Linq to Sql 模型“升级”到实体框架。到目前为止，我已经完成了四个数据库，现在正在运行测试 - 我的测试失败并出现错误

> System.Data.MetadataException：指定的架构无效。错误：DB.WebDB.ssdl(2,84)：错误 0169：所有 SSDL 工件必须针对同一个提供程序。ProviderManifestToken '2008' 与之前遇到的 '2005' 不同。

做一些谷歌搜索，我发现这通常是由不同的 dev/live sql server 版本引起的。

但是，我的情况有所不同——我有多个运行不同版本的实时数据库服务器——2005、2008 和 2008 R2——我需要能够使用不同的 EDMX 与所有这些服务器通信。

在这个 SO: [Multiple Versions of SQL Server using Entity Framework in a single ASP.NET application](https://stackoverflow.com/questions/1061409/multiple-versions-of-sql-server-using-entity-framework-in-a-single-asp-net-appli)似乎一种解决方案是将不同版本的 EDMX 拆分为不同的程序集（即 2005 和 2008 版本）。据推测，另一种解决方案将强制我`ProviderManifestToken`对 2008 年来源的数据库为`2005`.

然而，对我来说，我必须创建不同的程序集纯粹是为了满足 EF 中的一种行为怪癖，这种行为会使一个 EDMX 破坏所有其他的行为是荒谬的——对我来说，单独的程序集是一种架构决策。同样，破解 EDMX 文件以降级 2008 数据库也是不可取的，尤其是当下一个“从数据库更新...”命令将再次更改它时。

有人有替代解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T08:54:15.937

使用 EDMX 和设计器时没有替代解决方案。EDMX 固定为单一数据库实现。在 SQL Server 的情况下，情况更糟，因为 SQL Server 2005 和 2008 的方言之间存在差异（我们可以预期 2012 年即将到来）。一旦您使用 EDMX，这种与数据库实现的紧密耦合就是 SSDL（EDMX 中的数据库描述）的一部分。如果您还使用 VS 中的默认 EF 设计器，则您无法完全控制 SSDL - 当您从数据库更新模型或从模型生成数据库时，它总是会重新创建。

目前的解决方案是：

*   在开发中使用 SQL Server 2005，VS 设计器不会覆盖您的提供程序清单。此配置也应该适用于 SQL Server 2008 和 2008 R2。
*   首先使用代码 (EF 4.1 - 4.3.1) 而不是 EDMX，在运行时自动处理
*   不要使用 VS 设计器并手动维护您的 EDMX 或购买一些更强大的设计器
*   为 SQL Serve 2005 和 2008 创建单独的 SSDL 部分，并根据使用的数据库实现在连接字符串中正确引用它们。这有许多缺点，例如维护两个几乎相同的 SSDL 文档，并且您不能再次使用 VS 设计器。

# java - 注入的实体管理器未使用正确的持久性单元

> ID：10580001
> 
> 赞同：2
> 
> 时间：2012-05-14T08:42:11.500
> 
> 标签：java, persistence, java-ee-6, entitymanager

我有一个需要访问 MySQL 数据库的 JAX-RS restful 服务。我正在尝试使用 CDI 和实体管理器来做到这一点。但是，当我发布应用程序时，似乎使用了不正确的持久性单元（它试图连接端口 1527 而不是 3306）。

try/catch 捕获的异常是：

```
javax.servlet.ServletException: 
javax.persistence.PersistenceException: Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.0.v20110604-r9504): 
org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: 
java.sql.SQLException: 
Error in allocating a connection. Cause: Connection could not be allocated because: 
java.net.ConnectException : Error connecting to server localhost on port 1527 with message Connection refused: connect.
Error Code: 0 
```

这是宁静的服务：

```
@Path("/databases")
@Stateless
public class DatabaseResource {

    @PersistenceUnit(unitName = "beta.example.services")
    EntityManagerFactory entityManagerFactory;

    @GET
    @Produces(MediaType.APPLICATION_JSON)
    public Response list() {
        try {

            EntityManager entityManager = entityManagerFactory.createEntityManager();
            Connection connection = entityManager.unwrap(java.sql.Connection.class);

            ...

            return Response.ok().build();

        } catch (SchemaCrawlerException e) {
            return Response.status(500).entity(e.getMessage()).build();
        }
    }
} 
```

持久化单元（位于 src/META-INF）：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0"
    xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
    <persistence-unit name="beta.example.services">
        <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
        <properties>
            <property name="javax.persistence.jdbc.driver" value="com.mysql.jdbc.Driver" />
            <property name="javax.persistence.jdbc.url" value="jdbc:mysql://localhost:3306/" />
            <property name="javax.persistence.jdbc.user" value="test" />
            <property name="javax.persistence.jdbc.password" value="test" />
        </properties>
    </persistence-unit>
</persistence> 
```

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T15:13:01.950

好的，可以在两种模式下配置持久性单元：RESOURCE_LOCAL 和 JTA。
前任：

```
<persistence-unit name="beta.example.services" transaction-type="JTA"> 
```

VS

```
<persistence-unit name="beta.example.services" transaction-type="RESOURCE_LOCAL"> 
```

JTA 是默认值。像“javax.persistence.jdbc.*”这样的属性只有在使用“RESOURCE_LOCAL”时才会被读取。使用 JTA 时，会用到 glassfish 的事务管理器。这意味着在这种情况下，您必须像这样指定 JNDI 名称：

```
<jta-data-source>youJNDIName</jta-data-source> 
```

我认为可能发生的是您使用默认的“JTA”事务类型，但由于您没有指定任何 jta 数据源，它可能会尝试使用 glassfish 默认的一个（指向 derby）。

[持久性单元为 RESOURCE_LOCAL 还是 JTA？](https://stackoverflow.com/questions/1962525/persistence-unit-as-resource-local-or-jta)

[http://openejb.apache.org/jpa-concepts.html](http://openejb.apache.org/jpa-concepts.html)

查看您如何使用实体管理器，将事务类型设置为 RESOURCE_LOCAL 似乎是您的解决方案。

# php - 在 PHP 中发布动态数据或多个数据

> ID：10580008
> 
> 赞同：0
> 
> 时间：2012-05-14T08:42:27.837
> 
> 标签：php

![编辑表单的快照](../Images/98da6130aef8baa9aca0cd680cf21950.png)我是 PHP 新手。我有一个 js 文件

```
 var sites = [
 //Texte anime
  {url:" http://carouselinfo.com/canal/", duration:9},
 //Texte anime
  {url:" http://carouselinfo.com/canal-2/", duration:9}, 
  //Intro detallee
 {url:"http://carouselinfo.com/index-t1.html", duration:35},
 //CTA
 {url:"http://carouselinfo.com/index-t2.html", duration:35},
     //Football
  {url:"http://carouselinfo.com/twitter-ligue/", duration:100},  
 //Texte anime
  {url:" http://carouselinfo.com/canal-2/", duration:9},     
  //TrailersClub.com
  {url:"http://trailersclub.com/?lang=fr", duration:480},    
 //Heure
 {url:"http://carouselinfo.com/heure", duration:8},
 //Meteo
 {url:"http://carouselinfo.com/meteo", duration:12},
 //Texte anime
  {url:" http://carouselinfo.com/canal-cine/", duration:9},
 //Cine
 {url:"http://carouselinfo.com/cine/index-t1.html", duration:150},
  //Texte anime
  {url:" http://carouselinfo.com/canal-2/", duration:9}, 
 //Heure
 {url:"http://carouselinfo.com/heure", duration:8},
 //Meteo
 {url:"http://carouselinfo.com/meteo", duration:12},
 //Texte anime
  {url:" http://carouselinfo.com/canal-cine/", duration:9},
   //Cine

 ]; 
```

sanp的PHP代码

```
 for($i=0;$i<count($html);$i++)
 {
 echo '<ul class="link" id="link">';
 echo "<li>".$html[$i]."</li>";
 echo '<span class="main">'.$duration[$i].'</span>';
 echo "</ul>";
   } 
```

如果有人使用编辑功能更改任何数据，我必须做什么。上面有我的页面的快照，所以如果有人只在 url 中更改第一行，那么它将数据和数据保存在第 3 行的 js 文件中，因为如果我更改了js的其他数据或url然后它会导致问题所以我想在AJAX中使用POST在那个特定的行更新它。问题是有变量行所以如何在js文件中的那个特定行更新

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T10:44:48.280

尝试使用 db/xml/json 来存储和添加/编辑/删除 urls 持续时间条目，管理所有内容的 php 文件可以生成 js 数组并以 js 标题输出。doc [http://php.net/manual/en/ref.json.php](http://php.net/manual/en/ref.json.php) 虽然你必须重写文件来保存更改。

# ios - UIpickerview 隐藏在 actionsheet 后面

> ID：10580010
> 
> 赞同：1
> 
> 时间：2012-05-14T08:42:39.547
> 
> 标签：ios, uipickerview

我是 xcode 的新手，也是第一次使用 stackoverflow。我有一个 pickerview 作为`UIActionSheet`. `Pickerview`用于为字段选择 $ 金额。在**iOS >=4.2**上，pickerview 按预期显示在操作表顶部。但是，对于**ios 4.0/1**，操作表涵盖了pickerview，尽管我可以选择值。

编码

```
-(BOOL)textFieldShouldBeginEditing:(UITextField *)textField {
    UIActionSheet *sheet = [[UIActionSheet alloc]initWithTitle:@"Select Bill Amount Before Tips" delegate:self cancelButtonTitle:nil destructiveButtonTitle:@"Done" otherButtonTitles:nil];

    [sheet addSubview:pickerview];
     pickerview.showsSelectionIndicator = YES;

    [sheet showInView:self.tabBarController.view];
    /******** action sheet size   **********/

    CGRect menuRect = sheet.frame;
    CGFloat orgHeight = menuRect.size.height;
    menuRect.origin.y -= 216;
    menuRect.size.height = orgHeight+216;
    sheet.frame = menuRect;

    /**************************************/

    CGRect pickerRect = pickerview.frame;
    pickerRect.origin.y = orgHeight;
    pickerview.frame = pickerRect;
    // [self.tabBarController.view bringSubviewToFront:pickerview];
    [sheet release];

    return NO;
} 
```

感谢您的帮助。

# multithreading - 不同线程上的响应回调

> ID：10580013
> 
> 赞同：2
> 
> 时间：2012-05-14T08:42:52.477
> 
> 标签：multithreading, callback, restsharp

回调应该在不同的线程上调用吗？使用此代码：

```
client.ExecuteAsync<List<IngredientDto>>(request, Response =>
    {
        textBox1.Text += Response.Data.Count;
    }); 
```

我得到一个“InvalidOperationException”：

> “调用线程无法访问此对象，因为不同的线程拥有它。”

回调不应该在 UI 线程上，还是我错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T08:46:38.060

实际上，如果您查看源代码，您会看到

```
 public virtual RestRequestAsyncHandle ExecuteAsync<T>(IRestRequest request, Action<IRestResponse<T>, RestRequestAsyncHandle> callback)
    {
        return ExecuteAsync(request, (response, asyncHandle) =>
        {
            IRestResponse<T> restResponse = response as RestResponse<T>;
            if (response.ResponseStatus != ResponseStatus.Aborted)
            {
                restResponse = Deserialize<T>(request, response);
            }

            callback(restResponse, asyncHandle);//<--- this means that response & callback are executed at **same** thread.
        });
    } 
```

这导致：您无法从非 ui 线程更新 ui 对象。在 WPF 的情况下，您可以使用`Dispatcher`

```
client.ExecuteAsync<List<IngredientDto>>(request, Response =>
    {
        Dispatcher.Invoke((Action)() => {textBox1.Text += Response.Data.Count;});
    }); 
```

在一般情况下，请参阅[同步上下文](http://msdn.microsoft.com/en-us/library/system.threading.synchronizationcontext.aspx)

# sharepoint - Sharepoint 调查 - 立即在模式弹出窗口中开始调查

> ID：10580016
> 
> 赞同：1
> 
> 时间：2012-05-14T08:43:13.683
> 
> 标签：sharepoint, modal-dialog, survey

我有一个问题：我想立即开始在 sharepoint 2010 中创建调查，在正常的弹出窗口中，在加载概述页面的那一刻立即开始，无需单击“回复此调查”。

即：单击站点快速工具栏并立即从模态弹出表单开始。

请问，你对这个任务有什么建议吗？

谢谢！

R。

# perl - Perl 中的 64 位“网络”（大端）顺序整数

> ID：10580022
> 
> 赞同：5
> 
> 时间：2012-05-14T08:43:46.720
> 
> 标签：perl

类似于如何使用包：

```
N  An unsigned long (32-bit) in "network" (big-endian) order. 
```

是否有任何方法可以在 Perl 中以“网络”（大端）顺序打包 64 位整数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T08:47:53.800

如果您的系统支持`Q`打包格式，您可以使用`Q>`获取大端（Perl 5.9.2 起）：

```
% perl -e 'print pack("Q>", 1)' | hexdump -C
00000000  00 00 00 00 00 00 00 01                           |........| 
```

# java - 对于字符串操作，字符串或siring缓冲区更快？

> ID：10580025
> 
> 赞同：-1
> 
> 时间：2012-05-14T08:44:02.653
> 
> 标签：java, string

我需要在程序中做很多以下代码

```
int index=temp.lastIndexOf("\\n== External links ==\\");
        System.out.println( temp.substring(index)) 
```

Indexof,substring,contains 所以这些操作在字符串缓冲区或字符串中会更好吗？

如果是这样，你为什么能详细说明我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T08:48:32.473

`String.substring`不创建新字符串，只索引原始字符串，从而避免复制字符串内容的成本。因此，如果这就是您需要做的所有事情，`String`可能就足够了（而且使用起来更简单 - 特别是因为`StringBuffer`/`StringBuilder`没有`contains`方法）。

OTOH 您绝对不应该使用`StringBuffer`它，因为它是同步的，这会带来性能损失 -`StringBuilder`如果您使用的是 Java5 或更新版本，请考虑。

最后，您知道的唯一可靠方法是使用真实数据在您自己的环境中衡量每个选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T08:47:20.883

当要执行大量字符串操作时，建议使用 StringBuffer 或 StringBuilder 而不是 String，因为使用 String 会在“字符串常量池”中留下大量未引用的 String 对象。

此外，StringBuilder 优于 StringBuffer（尽管它们具有完全相同的 API），因为它的方法不是线程安全的（即同步的），因此它们执行得更快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T08:49:22.103

StringBuilder 上没有`contains`或 StringBuffer。indexOf 和 substring 被委托给 String 本身。StringBuffer 和 StringBuilder 的连接速度更快，但对于查看 String：获取 String 类本身

# c# - 属性 KeyValuePair .Value 没有设置器

> ID：10580029
> 
> 赞同：7
> 
> 时间：2012-05-14T08:44:41.027
> 
> 标签：c#, .net, keyvaluepair

我正在使用 a`Dictionary<int, KeyValuePair<bool, int>>`来保存数据。

有时我需要增加`int`in `KeyValuePair`，但它不会让我，因为它没有设置器。有没有办法增加它？

代码示例：

```
Dictionary<int, KeyValuePair<bool, int>> mDictionary = 
    new Dictionary<int, KeyValuePair<bool, int>>();

mDictionary[trapType].Value++;
//Error: The property KeyValuePair<TKey, Tvalue>>.Value has no setter 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-14T08:47:42.677

> 有没有办法增加它？

No.`KeyValuePair`是不可变的 - 它也是一种值类型，因此*在创建副本后*`Value`更改属性的值无论如何都无济于事。

 *你必须写这样的东西：

```
var existingValue = mDictionary[trapType];
var newValue = new KeyValuePair<bool, int>(existingValue.Key,
                                           existingValue.Value + 1);
mDictionary[trapType] = newValue; 
```

虽然它很丑 - 你*真的*需要价值是 a`KeyValuePair`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T19:52:50.073

从概念上讲，`KeyValuePair<TKey,TValue>`只是一对变量，`Key`并且`Value`。如果 Microsoft 使用公开的公共字段`Key`和来实现它`Value`，它的语义将是完美的；当用作`ForEach`控制变量时，它是不可变的，但可以更新普通变量或数组元素的 Key 或 Value 字段，而无需更新另一个。

不幸的是，微软似乎一直不愿意让框架类型公开任何公共字段，即使对于像这样的类型，`KeyValuePair<TKey,TValue>`或者`Drawing.Rectangle`其语义要求（1）类型必须是结构；(2) 它的整个状态在一组固定的属性中是可见的（除了定义对象状态的属性之外，可能还有其他计算属性），以及 (3) 可以为这些属性分配适合其类型的值的任意组合。因此，Microsoft 只考虑了将构成类型状态的成员公开为只读属性或读写属性的可能性。使用读写属性意味着代码如下：

```
for each (var item in myDictionary)
    item.Value += 1; 
```

或者

```
...assuming MyList is a List<Drawing.Rectangle>
MyList[3].Width += 9; 
```

将由现有的 C# 编译器解释为

```
for each (var item in myDictionary)
{ var temp = item; temp .Value += 1; } 
```

或者

```
...assuming MyList is a List<Drawing.Rectangle>
{ temp = MyList[3]; temp.Width += 9; } 
```

两者都会产生可怕的行为，这几乎肯定不是程序员的意图。.net 的实施者认为，让成员`KeyValuePair<TKey,TValue>`单独可变的价值并不能证明前者所带来的危险是合理的，但修改个别成员的有用性`Rectangle`足以证明 second 所带来的危险是正当的。请注意，如果类型使用暴露字段而不是属性，则这两个示例都不会造成任何危险，因为写入临时结构的字段是不允许的，即使调用属性设置器也是如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T16:23:01.710

另一种解决方案是创建一个新字典并将新值和键传递给它：

```
foreach (var d in existingDic)
                    newDic.Add(d.Key, d.Value + 1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T08:54:13.007

您将需要构建一个新的键值对。

```
mDictionary[trapType] = new KeyValuePair<bool,int>(mDictionary[trapType].Key,mDictionary[trapType].Value +1); 
```

但是，如果您使用的是 .NET 4，我建议您使用 a`Tuple`而不是键值对，如果您想要做的只是拥有一个包含其他两个值的对象。即如果两者之间没有键值关系。那么代码将是：

```
mDictionary[trapType] = Tuple.Create(mDictionary[trapType].Item1,mDictionary[trapType].Item2 +1); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-14T08:47:25.633

```
mDictionary[trapType] = new KeyValuePair<bool, int>(mDictionary[trapType].Key, mDictionary[trapType].Value+1) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-14T08:50:46.560

`KeyValuePair`往往只是用作字典的迭代器值。如果你希望它是可变的，你最好定义你自己的类型。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-09-15T10:54:27.933

如前所述，KeyValuePair 是不可变的。我认为值得在这里添加一个可变实现：

```
public class MutableKeyValuePair<KeyType, ValueType>
    {
        public KeyType Key { get; set; }
        public ValueType Value { get; set; }

        public MutableKeyValuePair() { }

        public MutableKeyValuePair(KeyType key, ValueType val)
        {
            Key = key;
            Value = val;
        }
    } 
```*

# java - JBoss Drools 真的并行执行所有规则吗？

> ID：10580036
> 
> 赞同：5
> 
> 时间：2012-05-14T08:45:20.017
> 
> 标签：java, concurrency, drools, rule-engine, rete

我已经阅读了很多关于 JBoss Drools 的文档，但找不到关于所有规则是否同时*执行*的明确答案（当然它们是同时触发的）。更具体地说，对于单个输入和例如 1000 条规则的规则集，在每个规则中执行“when”条件和“then”条件，一个接一个地顺序执行，或者同时并行执行。

一方面，rete 算法意味着并行性，尤其是在选择节点折叠时。然而，在节点优化之后，评估是连续的吗？并且 beta 内存和连接节点看起来应该同时执行，但它们是吗？

此外，Drools 文档谈到“顺序模式”，说默认情况下这是关闭的。那么什么是开启的，并行模式呢？并且有一个暗示线程的 maxThreads 选项。

另一方面，有人告诉我，代码不使用线程，因此是并发计算的，但大部分是按顺序执行的。

有没有人看到任何证明这种情况的文件？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-14T11:29:17.693

标准 rete 算法中没有并行性的迹象。冲突集由匹配的规则产生，然后议程应用策略依次触发这些规则。

多年来，无论是在匹配阶段还是在发射阶段，已经进行了许多努力来并行化 rete 的一部分。

并行触发所有规则时的一个大问题是确定性执行。

我们目前正在 Drools 中探索各种并发和并行匹配的策略。我们也会探索并发规则触发，但我们需要找到更强大的方式让用户指示什么可以并行触发，什么不能并行；以便用户在需要的地方获得确定性执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-23T06:47:03.870

看起来您已经解决了问题，但如果您需要，我仍然可以提供更多信息。Drools的源代码中使用了一个并发库，github网页链接如图， [https://github.com/kiegroup/drools/blob/master/drools-core/src/main/java/org/drools/核心/并发/ExecutorProviderImpl.java](https://github.com/kiegroup/drools/blob/master/drools-core/src/main/java/org/drools/core/concurrent/ExecutorProviderImpl.java)。

一些点，

1.  当然，线程工厂用于操作执行器。如果您阅读此链接中显示的源代码，您可以找到线程库。

2.  Also you ask about the maxThread, the threadpool used in Drools does have a pool size as shown in the source code. `newExecutor = new ThreadPoolExecutor( Pool.SIZE, Pool.SIZE, 60L, TimeUnit.SECONDS,new LinkedBlockingQueue<Runnable>(), threadFactory );`

# javascript - 如何将对象附加到 DOM？

> ID：10580037
> 
> 赞同：0
> 
> 时间：2012-05-14T08:45:21.723
> 
> 标签：javascript, jquery, oop, dom

我喜欢自己创建一个对象，如下所示：

```
function Table()
{

};
Table.prototype.toString = function ( ) 
{
    return '<table><tr><td></td></tr></table>';
};
var table = new Table();

$('body').append(table); 
```

然而确实失败了。那么为您自己的对象实现这一点的诀窍是什么？可以通过图像看到类似的东西。

```
var image = new Image();
image.src = '//some_image.jpg';
$('body').append(image); 
```

现在我对 table 的等价物不感兴趣。表只是我自己的对象的一个​​例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T12:20:54.823

```
<script>
  var htmlCon = "<div id='iconDiv'><table style='align:center;color:#fff;'></table></div>";
  $('body').append(htmlCon);
  $('#iconDiv').addClass("iconDiv").css({"left":xPos+20, "top":yPos-80});
  $('#iconDiv table').append('<tr><td colspan="4" style="color:#000"><b>Event</b></td><td align="right" valign=""><ahref="javascript:close()">X</a></td></tr>');
  $('#iconDiv table').append('<tr><td>When</td><td>:</td><td>'+""+day+""+'-'+""+monthName+""+' - '+""+year+""+'</td></tr>');
  $('#iconDiv table').append('<tr><td>What</td><td>:</td><td><input type="text" name="wht" id="wht"><input type="hidden" name="start" id="start" value='+"'"+year+""+'-'+""+month+""+'-'+""+day+"'"+'><input type="hidden" name="end" id="end" value='+"'"+year+""+'-'+""+month+""+'-'+""+day+"'"+'></td></tr>');
  $('#iconDiv table').append('<tr><td colspan="5">e.g. Tea at the Ritz</td></tr>');
  $('#iconDiv table').append('<tr><td colspan="5"><input type="button" value="createEvent" class="button" onclick="CreateEvent()">&nbsp;<input class="button" type="button" value="editEvent" onclick="editEvent('+"'"+year+"'"+','+"'"+month+"'"+','+"'"+day+"'"+')"></td></tr>');</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T08:47:40.623

尝试这个

```
function Table()
{
    return document.createTextNode("That´s a table");
}; 
```

绝对有效的东西：

```
Table.prototyp.toDOM = function()
{
    return document.createTextNode("That´s a table");
};

$("body").append(table.toDOM()); 
```

# xml - 在windows上通过node.js加载xml文件

> ID：10580039
> 
> 赞同：1
> 
> 时间：2012-05-14T08:45:25.413
> 
> 标签：xml, windows, node.js

我正在尝试通过 IIS 中托管的 Node.js 加载和解析本地 XML 文件。我使用 fs readFile 读取字符串并使用[xmldom](https://github.com/jindw/xmldom) 模块对其进行解析。它一直工作到文件大小很小（几 kb），但如果我尝试加载 3Mb xml，它会失败。

哪个其他用于 windows 的 xml 模块可以执行得更好？

这是我的代码

```
var fs = require('fs');
fs.readFile('C:\\Temp\\TEST.xml', 'ascii', function(err,data){
    if(err) {
        console.log("Could not open file"+ err);
        process.exit(1);
    }
    var Dom = require('xmldom').DOMParser;
    var doc = new Dom().parseFromString(data.substring(2,data.lenght));
    console.log(doc.childNodes[0].localName);
}); 
```

5 分钟后，解析器仍在运行 xml，而在一个更简单的示例中它可以工作。我以 xml 格式保存了 msinfo32 的输出

10 分钟后输出是 RangeError: Maximum call stack size exceeded

输出是从“msinfo32 /nfo C:\TEMP\TEST.NFO”生成的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T07:31:39.060

msinfo32 在“ucs2”中输出，错误的编码导致了问题。Xmldom 解析器工作正常，即使解析整个文件需要几分钟。

我使用[xml-splitter](https://github.com/lindory-project/node-xml-splitter)提取要解析的 xml 分支

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T09:04:30.740

只需确保 xml 文档在此处有效：

[http://www.w3schools.com/xml/xml_validator.asp](http://www.w3schools.com/xml/xml_validator.asp)

如果是并且失败了，我建议在他们的 github 页面上打开一个问题

[你可以在npm](http://search.npmjs.org/)上搜索其他模块

我个人使用[xml2js](https://github.com/Leonidas-from-XIV/node-xml2js)没有问题

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-09-26T20:03:19.953

我看到你写的是长度而不是长度......也许这就是问题所在！

# visual-studio-2010 - VS 2010，自定义构建规则中的属性仅使用默认值

> ID：10580041
> 
> 赞同：0
> 
> 时间：2012-05-14T08:45:30.150
> 
> 标签：visual-studio-2010, msbuild, custom-build

我正在将我的 VS2008 项目升级到 VS2010。目前问题出在自定义构建规则文件上。

我使用向导将其移植到新版本的 Visual Studio 并设法解决了大部分问题。

我的自定义构建规则是为 .xxx 扩展名定义的。您可以为此文件配置很多选项。我已经在 .props 值中指定了默认值，并为特定文件覆盖了其中一些。但是，查看为文件执行的命令行，似乎传递的是默认值，而不是为该文件指定的自定义值。

这是我的 .props 文件的片段：

```
 <ItemDefinitionGroup>
 <MyTool>
  <MTPath>C:\DefaultPath</MTPath>
  ...
  <CommandLineTemplate>
  set MT_Path=%(MTPath)
  call MyTool.exe
  </CommandLineTemplate> 
```

我一直在与 masm 样本密切合作，但我不知道我做错了什么。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T11:42:41.393

我找到了解决方案，变量应该用 [] 大括号括起来，以便正确评估它们。

```
<ItemDefinitionGroup>
  <MyTool>
    <MTPath>C:\DefaultPath</MTPath>
    ...
   <CommandLineTemplate>
     set MT_Path=[MTPath]
     call MyTool.exe
   </CommandLineTemplate> 
```

# php - 服务器的 tmp 目录已满？

> ID：10580043
> 
> 赞同：1
> 
> 时间：2012-05-14T08:45:34.110
> 
> 标签：php, apache, web, tmp

今天我的网站出现了一些问题：php 文件上传没有正确处理，并且没有执行passenger-wsgi python 脚本。我联系了我的虚拟主机，他们说服务器的 tmp 目录已经达到“磁盘空间不足”并且他们解决了这个问题。

几分钟后，同样的事情开始发生，他们同样回答说问题现在已经解决。

从那以后我没有遇到任何问题，但我很担心这将是一个持续的事情。他们发给我：

> 遗憾的是，我们无法保证该问题会再次发生，因为新用户可能会滥用 /tmp，但我们通常会在我们的监控系统检测到这些问题后的 10 或 15 分钟内解决这些问题。

我在共享主机上，所以这并不完全出乎意料，但它仍然相当令人不安。在这种情况下我能做些什么吗？有什么方法我至少可以知道它什么时候会发生 - 也许检查 tmp 中的已用空间以及 PHP 允许的总空间？

这不是我遇到的第一个问题，而且我现在只使用了大约 2 周，所以我正在考虑 45 退款保证并寻找另一个主机。但是，我还没有找到一个好的 php/python 主机，它要么支持我使用的 M2Crypto 和其他 Python 模块，要么允许我自己安装它们。我应该坚持使用它们还是跳船并寻找另一个网络主机？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T08:53:32.753

简单的一个：如果您的主机允许这样做，请让您的 PHP 脚本使用[upload_tmp_dir](http://www.php.net/manual/en/ini.core.php#ini.upload-tmp-dir) 自定义 tmp 目录进行上传。

这样，它将仅取决于您的托管空间！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T08:51:46.327

PHP 有[disk_free_space](http://php.net/disk_free_space)函数，您可以使用它来监控/tmp。但是，这应该不是必需的。房东有责任一劳永逸地解决这个问题。

我自己曾在一家共享网络托管公司担任系统管理员，我知道解决这些类型的问题至关重要。完整的临时目录将有效地关闭服务器上的几乎所有网站，因此找到解决方案应该符合他们的最大利益，否则客户将离开。你应该问他们有什么计划来解决这个问题。如果您得到一个愚蠢的、一无所知的答案，请要求将问题上报给技术人员，以便您可以与负责人交谈（或发送电子邮件）。不要让他们把这个问题放在一边，而是要求一个长期的解决方案，否则它*会*再次发生。

如果您无法找到满足您需求的共享主机，请尝试使用专用虚拟主机 (VPS)。这样做的缺点是你必须是你自己的系统管理员，但至少你在软件方面得到了你需要的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T08:52:31.960

您可以尝试将upload_tmp_dir 等设置在您的个人区域内，而不是全局/tmp。但是，这需要访问 php.ini 文件。您可能没有的访问权限。此外，如果您无权访问 webroot 之上的任何内容，则不应这样做（并且您应该立即离开主机——将东西放在 webroot 之上是必不可少的）。

总之，如果这个问题仍然存在，我会离开主机。除了将您的业务带到其他地方之外，您无能为力。

我避免在这种情况下共享主机。如今，您可以以相当便宜的价格获得稳定、资源充足的 VPS（尽管这当然会带来一系列问题，尤其是在您托管少量网站的情况下）。

# jquery - 如何一次使用 jquery 添加子属性？

> ID：10580044
> 
> 赞同：0
> 
> 时间：2012-05-14T08:45:35.213
> 
> 标签：jquery, css

如何一次使用 jquery 添加子属性？我正在尝试如下代码，但不起作用。

CSS：

```
.item > ul
{
  margin:0px;
  padding:0px;
}
.item > span
{
  color:gray;
}
.item > span:hover
{
  color:blue;
} 
```

HTML：

```
<div class="container">
   <span>Text</span>
   <ul>
      <li>Item 1</li>
      <li>Item 2</li>
   </ul>
</div> 
```

查询：

```
$(".container").addClass("item"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T08:56:20.540

*如果您希望将项目类添加到所有*子项，这个问题并不清楚。

如果是这种情况，这是一种方法。

```
$('.container').children().each(function(){
    if($(this).has('li'))
       $(this).children().addClass('item');
    $(this).addClass('item');
}); 
```

这会将 item-class 添加到所有子项，甚至 UL 中的 LI。:)

看到[这个修补匠](https://tinker.io/29a99/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T08:48:30.653

我相信你只是在寻找：

```
$(".container").children().addClass("item"); 
```

[http://api.jquery.com/children/](http://api.jquery.com/children/)

如果您想将其应用于所有孩子而不仅仅是直系孩子，则必须递归地进行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T08:51:19.370

这段代码何时运行。如果您在使用 chrome 控制台或 firebug 加载页面 (DOM) 后执行它，您应该会看到更改。否则，您应该将其放置在页面上脚本正文中的 Ready 处理程序中

```
$(document).ready(function() {
  // Handler for .ready() called.
}); 
```

[http://api.jquery.com/ready/](http://api.jquery.com/ready/)

问题是 JS 经常在 DOM 加载之前触发，因此您用作选择器的这个元素及其类尚不存在可查询。

# jquery - 在 JQuery 中使用鼠标位置设置单击事件

> ID：10580046
> 
> 赞同：2
> 
> 时间：2012-05-14T08:45:42.270
> 
> 标签：jquery, javascript-events

谁能告诉我如何将点击功能分配给元素内的特定坐标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T09:00:48.403

Hiya**演示** [http://jsfiddle.net/gYkXS/3/](http://jsfiddle.net/gYkXS/3/)

希望这会有所帮助，祝你好运！干杯！

**代码**

```
$(document).ready(function(){
   $("#foo").mousemove(function(e){
      window.xPos = e.pageX;
      window.yPos = e.pageY;
       alert("Position X = " + e.pageX + "Position y = " + e.pageY);
   }); 
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T09:00:59.687

```
$(document).click(function(event) {
    var top = 0,
        right = 200,
        bottom = 200,
        left = 0;

    var x = event.pageX;
    var y = event.pageY;
    if ((x >= left && x <= right) && (y >= top && y <= bottom))
    {
        // do stuff if within the rectangle
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T08:57:21.223

如果您只希望元素的一部分响应点击（这就是我阅读您的问题的方式），您可以通过查看点击发生的位置来做到这一点。

示例：[Live Copy](http://jsbin.com/ozomag) | [资源](http://jsbin.com/ozomag/edit)

```
jQuery(function($) {

  $("#target").click(function(event) {
      var $this = $(this),
          width = $this.width(),
          pos = $this.offset(),
          x = event.pageX - pos.left,
          y = event.pageY - pos.top;

      display("Click was at (" + x + "," + y + ") in the element");
      if (x > (width / 2)) {
          display("Clicked in the right half");
      }
  });

  function display(msg) {
    $("<p>").html(msg).appendTo(document.body);
  }
}); 
```

`event.pageX`和`event.pageY`是文档坐标，这是[`offset`](http://api.jquery.com/offset)函数为元素提供的坐标。（尽管有这个名字，`offset`并没有给你相对于元素的偏移父元素的偏移量；那是`position`. 奇怪但真实。）所以你可以通过简单地减去from和from来转换`event.pageX`和到元素坐标。`event.pageY``pos.left``event.pageX``pos.top``event.pageY`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T08:58:19.627

jquery 中的每个事件都有`pageX`和`pageY`属性。所以如果你触发一个事件，你可以检查坐标：

```
$('#elem').click(function(e)) {
    var x = e.pageX;
    var y = e.pageY;
    if (x > x1 && x < x2 && y > y1 && y < y2) {
         do_something
    }
} 
```

在这种情况下`x1`, `x2`, `y1`,`y2`是矩形的坐标。

`pageX`,`pageY`是页面坐标，如果您需要元素内的相对坐标，则需要获取该元素在页面上的位置，然后根据元素位置计算实际坐标。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-14T08:59:10.710

现场示例[http://jsfiddle.net/LBKTe/1](http://jsfiddle.net/LBKTe/1)

与上述 AlecTMH 基本相同。

```
// top left and botom right corners of the clickable area
var x1 = 10, x2 = 30, y1 = 10, y2 = 30;
$(document).on('click', '#block', function(e) {
    // get x/y coordinates inside    
    var cx = e.clientX;
    var cy = e.clientY;
    offset = $(this).offset();
    x = cx-offset.left;
    y = cy-offset.top;

    // if our click coordinates are within constrains, show an alert
    if (x >= x1 && x <= x2 && y >= y1 && y <= y2) {
      alert('click!');            
    }
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-14T09:04:43.293

如果只有少量“感兴趣的区域”，您可以通过将一个或多个具有所需大小的空元素与`position: absolute`style 和 high叠加来避免捕获整个元素上的鼠标点击`z-index`，即：

```
.hotspot {
    position: absolute;
    z-index: 1000;
    cursor: pointer;
    cursor: hand;
}

div {
    position: relative;
}

canvas {
    background-color: #f0f0f0;
}
​
<div class="frame">
    <canvas width="400" height="400"> </canvas>
    <div class="hotspot" style="left: 100px; top: 100px; width: 40px; height: 40px">
    </div>
</div> 
```

见[http://jsfiddle.net/VUx2G/2/](http://jsfiddle.net/VUx2G/2/)

# google-app-engine - Struts 2 中的 JSP Scriptlet 标签

> ID：10580047
> 
> 赞同：0
> 
> 时间：2012-05-14T08:45:43.323
> 
> 标签：google-app-engine, jsp, struts2

我有以下 JSP 脚本：

```
<input type="text" name="user.emailAddress" 
    value="<%=UserServiceFactory.getUserService().getCurrentUser().getEmail()%>" 
    readonly="readonly"/> 
```

如何将其转换为 struts 2 标签

```
<s:textfield /> 
```

避免小脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T14:37:58.490

当您打开此页面时，如果您使用的是准备方法。在该方法中设置此电子邮件地址。

```
user.setEmailAddress(UserServiceFactory.getUserService().getCurrentUser().getEmail()) 
```

你的 HTML 将是

```
<s:textfield name="user.emailAddress" readonly="true" /> 
```

# android - 如何在我的图像中制作发光效果？

> ID：10580052
> 
> 赞同：2
> 
> 时间：2012-05-14T08:46:09.840
> 
> 标签：android, image, gridview, glow

我创建了简单的 gridview 应用程序。现在我想为我的图像创建发光效果，请帮助我如何为我的网格视图图像创建发光效果？如果有人知道，请给我一些想法和示例代码....

这是我现在的截图：

![在此处输入图像描述](../Images/01f23fa5aacb4bfd3e3eb0ef2e7c49a8.png)

这是我预期的发光效果截图： ![在此处输入图像描述](../Images/4c1c1c2ee9c2e1c7f921e5e1572356d5.png)

源代码：

主.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
<TextView 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/hello" />
<GridView 
    android:id="@+id/gridview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:numColumns="auto_fit"
    android:verticalSpacing="10dp"
    android:horizontalSpacing="10dp"
    android:columnWidth="90dp"
    android:stretchMode="columnWidth"
    android:gravity="center" />
</LinearLayout> 
```

GridviewExampleActivity.java

```
public class GridviewExampleActivity extends Activity
{

public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);

        setContentView(R.layout.main);

        GridView gridview = (GridView) findViewById(R.id.gridview);
        gridview.setAdapter(new ImageAdapter(this));
}

public class ImageAdapter extends BaseAdapter{
private Context mContext;

public ImageAdapter(Context c){
mContext = c;
}

public int getCount()
{

    return mThumbIds.length;
 }

public Object getItem(int position)
{ 
    return null;

}

public long getItemId(int position)
{
return 0;
                                }
// create a new ImageView for each item referenced by the Adapter

public View getView(int position, View convertView, ViewGroup parent)
{
ImageView imageView;

if (convertView == null)
{
 imageView = new ImageView(mContext);
imageView.setLayoutParams(new GridView.LayoutParams(85, 85));
imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
imageView.setPadding(8, 8, 8, 8);
}
else
{
imageView = (ImageView) convertView;
                                                }
imageView.setImageResource(R.drawable.icon);

return imageView;
                                }
private Integer[] mThumbIds = {
        R.drawable.icon, R.drawable.icon,
        R.drawable.icon, R.drawable.icon,
        R.drawable.icon, R.drawable.icon,
        R.drawable.icon, R.drawable.icon,
        R.drawable.icon, R.drawable.icon};
}   

} 
```

发光效果屏幕截图：！[在此处输入图像描述][3]

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-14T10:28:10.453

您可以使用以下代码使自定义视图中的每个图像发光

图像适配器的 getView() 函数应该是这样的：

```
public View getView(int position, View convertView, ViewGroup parent)
{
ImageView imageView;

if (convertView == null)
{
imageView = new ImageView(mContext);
imageView.setLayoutParams(new GridView.LayoutParams(85, 85));
imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
imageView.setPadding(8, 8, 8, 8); 
}
else
{
   imageView = (ImageView) convertView;
   Bitmap Image=BitmapFactory.decodeResource(mContext.getResources(),mThumbIds[position]);
        Image=Image.copy(Bitmap.Config.ARGB_8888,true);
        Paint paint=new Paint();
        paint.setDither(true);
        paint.setFilterBitmap(true);
        Bitmap glow=BitmapFactory.decodeResource(mContext.getResources(), R.drawable.glow_image);
        Bitmap bitmap=Bitmap.createBitmap(Image.getWidth(),Image.getHeight(), Config.ARGB_8888);
        Canvas canvas=new Canvas(bitmap);

        canvas.drawBitmap(glow, new Rect(0,0,glow.getWidth(),glow.getHeight()), new Rect(0,0,Image.getWidth(),Image.getHeight()),paint);
        canvas.drawBitmap(Image, new Rect(0,0,Image.getWidth(),Image.getHeight()), new Rect(0+5,0+5,Image.getWidth()-5,Image.getHeight()-5),paint);

        imageView.setImageBitmap(bitmap);

   return imageView;
   } 
```

R.drawable.glow_image 是可以用作生长效果图像的 png 图像

[发光.png](http://dl.dropbox.com/u/23755950/green.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T09:18:43.710

检查此[链接](https://stackoverflow.com/questions/2562051/listview-item-background-via-custom-selector)...它是一个自定义选择器

或者只是你可以使用这个

```
 <selector xmlns:android="http://schemas.android.com/apk/res/android">
   <item android:state_pressed="true" android:drawable="@drawable/pressedback" />
   <item android:state_focused="true" android:drawable="@drawable/focusedback" />
   <item android:state_selected="true" android:drawable="@drawable/focusedback" />
</selector> 
```

# java - 用于从视频创建小 gif 的 Lib/API？

> ID：10580056
> 
> 赞同：2
> 
> 时间：2012-05-14T08:46:23.400
> 
> 标签：java, android, video-editing

我想从现有视频创建 GIF。我搜索了相关问题，但没有找到任何可以帮助我的链接。我一直在寻找任何可以帮助我从视频创建位图的库或 API，然后我将再次从该位图创建 GIF 或直接从视频创建 GIF。

是否有任何库或 API 可以从视频中捕获位图序列？

请给我任何可以帮助我执行此操作的库或 API 链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T09:13:14.243

看看 JMF（Java 媒体框架）。您将需要一些时间来学习基础知识。然后你将能够做到这一点。我现在没有代码示例，但据我所知，您必须创建播放器，然后从中检索适当的“控件”，以便您可以访问帧。

这是一个开始的例子：http: [//khemsoi.blogspot.com/2006/03/jmf-frame-grabber.html](http://khemsoi.blogspot.com/2006/03/jmf-frame-grabber.html)

# objective-c - 如何以编程方式在 iphone 应用程序中“加载”东西？

> ID：10580060
> 
> 赞同：0
> 
> 时间：2012-05-14T08:46:52.440
> 
> 标签：objective-c, ios, initialization, progress-bar

在我的应用程序中，我注意到它在运行的前几秒钟运行缓慢，因为对象仍在初始化、绘制到屏幕等。我如何加载这些对象并创建一个栏来显示加载进度?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T08:49:51.177

“我如何加载这些对象”-根据您的需要可以有多种方式-

1.  您可以使用并发线程来加载事物。

2.  您可以进行延迟加载 - 首先加载需要在第一个屏幕上显示的内容（考虑到您正在加载一些在第一个屏幕上不需要的数据）。

3.  您可以显示加载屏幕并让用户知道加载正在进行。

您可以使用`UIActivityIndicator`or`UIProgressBar`来显示当前正在加载。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T08:56:01.713

您可以显示加载屏幕。您可以使用不同的线程和分离线程。或者，您可以使用`UIActivityIndicatorView`or`UIProgressBar`来显示当前正在加载。

`UIActivityIndicatorView`基本上就像你启动你的mac。一个旋转的圆圈。 `UIProgressBar`是一个空条，随着负载的增加，它会被蓝色填充。

A`UIProgressBar`有一个变量调用`progress`，而你只是发送`startAnimating`和`stopAnimating`消息到`UIActivityIndicator`

要了解有关这两者的更多信息，请查看以下链接：

[进度条 Apple 文档](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UISearchBar_Class/Reference/Reference.html)

[进度条图像](http://www.idevindex.com/wp-content/uploads/2011/11/UIDownloadBar.jpg)

[活动指示器 Apple 文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIActivityIndicatorView_Class/Reference/UIActivityIndicatorView.html)

[活动指标 GIF 图像](http://getsetgames.com/wp-content/uploads/2009/12/ActivityIndicator.gif)

更新您对其他答案的问题：

你加载什么？您正在加载的类/对象是否有委托方法？如果你说

> 仍在初始化并绘制到屏幕上

考虑`object`以下是您的对象之一您可以说

```
if (object) {
// saying just 'object' asks if it is non-zero/valid
} 
```

还要检查是否绘制到屏幕尝试：

```
 if([self.view.subviews containsObject:object]) 
```

或者

```
if([object superview] == self.view) 
```

或者方法

```
-(BOOL)isDescendantOfView:(UIView *)view; 
```

`YES`如果接收器是视图的直接或远距离子视图，或者视图是接收器本身，则返回值；否则`NO`。

另外：当我说时`self.view`，它不必是`self`，因为加载视图可能是不同的视图。您可以为该其他类创建一个对象并调用该类而不是`self`. 比如：`if([otherClass.object superview] == otherClass.view)` 你也可以`update`在另一个类中创建一个方法，这样你就可以说：

```
if([otherClass finishedLoading]) 
```

然后将其作为`update`方法：

```
- (BOOL)finishedLoading {
return ([object superview] == self.view)
} 
```

这是很多东西！还有其他问题吗？

# shell - 当 KSH 中的参数过多时迭代参数列表

> ID：10580061
> 
> 赞同：0
> 
> 时间：2012-05-14T08:46:58.330
> 
> 标签：shell, parameters, ksh

有时我必须遍历目录中的所有文件才能找到一些东西，而通常情况下通常`for i in $(ls *.txt)`会起作用。但是在某些情况下，文件夹中有太多文件并`for`产生`0403-027 The parameter list is too long.`（即`for`，、、、或其他）。`diff``ls`

我找到了一种解决方案，即用 a 逐行读取输入，`while read`但随之而来的是棘手的部分。起初，我认为理想是这样的：

```
while read file ; do
    # do something with file
done < $(find . -type f -name *.txt) 
```

但这会返回一行，填充`^J`为分隔符（奇怪？），当然不会有这样的文件。更改`IFS`为`\n`也不起作用。

我当前的解决方法是使用我感兴趣的所有文件构建一个临时文件，然后使用 while：

```
tmpfile=$$.$(date +'%Y%m%d%k%M%S').tmp
find . -type f -name *.txt > $tmpfile
while read file ; do
    # do something with file
done < $tmpfile ; rm $tmpfile 
```

但这感觉不对，而且代码比第一个选项多得多。有人能告诉我执行第一个循环的正确方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T10:21:31.110

在这种情况下，您需要**进程替换**，而不是*命令替换：*

```
while IFS= read -r file ; do
    # do something with file
done < <(find . -type f -name *.txt) 
```

`<()`进程替换基本上就像一个文件，您可以将其重定向到 while 循环中。

# c# - 循环遍历aspx页面

> ID：10580071
> 
> 赞同：0
> 
> 时间：2012-05-14T08:47:34.820
> 
> 标签：c#, asp.net, internet-explorer-9

对于锦标赛应用程序，我必须输出小组排名和淘汰赛时间表。他们必须在一台大的 LED 电视上交替。我设法使用跨越 100% 页面的 IFrame 并使用 javascript 每隔 10 秒将 iframe 源设置为另一个 aspx 页面。

这可行，但我会造成巨大的内存泄漏。每次在 iframe 中加载页面时，Internet Explorer 进程都会增长约 6mb。这导致 1,5Gb 的 IE 进程和大约 1 小时后窗口崩溃。

有没有更好的方法来创建类似的东西？骑自行车都在代码隐藏中吗？

谢谢，

柏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T09:52:02.123

为什么需要 iframe？您可以使用 onload 脚本每 10 秒重新加载一次页面。

一种更聪明的方法，可能是使用 AJAX 仅下载您需要显示和更新页面的数据。然后，您可以更进一步并使用[SignalR](https://github.com/SignalR/SignalR)之类的东西仅在数据更改时更新屏幕。

# asp.net-mvc - 为什么 MVC4 捆绑包不捆绑 Knockout.js？

> ID：10580076
> 
> 赞同：6
> 
> 时间：2012-05-14T08:47:54.900
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-optimization

我已经下载了 MVC4 并试图弄清楚捆绑功能在标准项目中是如何工作的。似乎有捆绑：

```
<script src="@System.Web.Optimization.BundleTable.Bundles.ResolveBundleUrl("~/Scripts/js")"></script> 
```

带回所有 jquery.js 文件，但不带回包含脚本中的 knockout.js 文件。为什么是这样？还有 _references.js 文件是关于什么的，为什么 knockout.js 文件被注释掉了？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-14T11:29:11.740

如果您查看您的项目`Global.asax`文件，您应该会发现如下内容：

```
protected void Application_Start()
{
    ...
    BundleTable.Bundles.RegisterTemplateBundles();
} 
```

现在`RegisterTemplateBundles`只注册一个预定义的脚本子集：

*   jQuery-*
*   jquery.mobile*
*   jQuery-UI*
*   jquery.unobtrusive*
*   jquery.validate*
*   微软Ajax.js
*   微软Mvc.js
*   现代化*
*   AjaxLogin.js

如果您想要一些其他文件，您可以更改`RegisterTemplateBundles`为`EnableDefaultBundles`：

```
protected void Application_Start()
{
    ...
    BundleTable.Bundles.EnableDefaultBundles();
} 
```

[或者创建您自己的自定义捆绑包（您可以在此处](http://weblogs.asp.net/scottgu/archive/2011/11/27/new-bundling-and-minification-support-asp-net-4-5-series.aspx)阅读有关捆绑和缩小的更多信息）。您还应该知道这`EnableDefaultBundles`会对性能产生一些影响。

该`_references.js`文件由 Visual Studio 用于 JavaScript 智能感知。您可以从以下文章中了解更多信息：

*   [VS11 中的 JavaScript Intellisense，_references.js 文件](http://gurustop.net/blog/javascript-js-intellisense-auto_complete-in-visual-studio-11-beta-the-web-_references-js-file/2012/03/03/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T05:00:22.170

tpeczek 是正确的。大多数人不使用 Knockout.js，这就是默认情况下不包含它的原因。RC 的捆绑/缩小 (BM) 发生了很大变化，将文件添加到捆绑包将更加简单。请参阅我的[捆绑和缩小教程](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T19:29:00.420

我能够使用在 RegisterTemplateBundles() 之后添加的以下代码行将文件添加到包中

```
BundleTable.Bundles.RegisterTemplateBundles();
BundleTable.Bundles.Where(x => x.Path == "~/Scripts/js").First().AddFile("~/scripts/knockout-2.0.0.js"); 
```

# c - 为什么在哪里使用 fopen 很重要？

> ID：10580087
> 
> 赞同：0
> 
> 时间：2012-05-14T08:48:22.037
> 
> 标签：c, file, fopen

我可以使用一些帮助来理解令我困惑的事情。它涉及到 fopen() 读取文件的位置。

以下代码（使用 gcc 4.5.2 编译的 C）：

```
#include <stdlib.h>
#include <stdio.h>

void try_fopen(FILE* f_handle, const char* f_name, const char* mode) {
    f_handle = fopen(f_name, mode);
    if( f_handle == NULL ) {
        fprintf(stderr, "Error: Unable to open '%s'.", f_name);
        exit(EXIT_FAILURE);
    }
}

int cnt_ones(FILE* pFile) {
    int c;
    int n = 0;

    do {
      c = fgetc (pFile);
      if (c == '1') n++;
    } while (c != EOF);

    return n;
} 
```

为什么将 fopen 放在函数中会产生 Segfault：

```
int main (int argc, char** argv) {
    FILE * pFile;
    try_fopen(pFile, argv[1], "r"); // Gives a Segfault

    printf ("The file contains %d ones.\n", cnt_ones(pFile) );
    fclose (pFile);

    return 0;
} 
```

将其放入 main 时（连同 if 没有）：

```
int main (int argc, char** argv) {
    FILE * pFile;
    pFile = fopen(argv[1], "r"); // While this doesn't give a Segfault
    if( pFile == NULL ) {
        fprintf(stderr, "Error: Unable to open '%s'.", argv[1]);
        exit(EXIT_FAILURE);
    }

    printf ("The file contains %d sign characters.\n", cnt_ones(pFile) );
    fclose (pFile);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T08:50:42.087

C 是按值传递，而不是按引用传递，因此您需要将指针传递给`pFile`，否则不要在函数范围之外更改它：

```
void try_fopen(FILE** f_handle, const char* f_name, const char* mode) {
    *f_handle = fopen(f_name, mode);
    if( *f_handle == NULL ) {
        fprintf(stderr, "Error: Unable to open '%s'.", f_name);
        exit(EXIT_FAILURE);
    }
}

// ...
try_fopen(&pFile, argv[1], "r"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T08:50:57.607

因为指针`pFile`是按值传递给函数的`try_open`。函数内部修改的值在`main`. 为了解决这个问题，您需要将指针的地址传递给函数，这样`try_open`才能接受`FILE**`并分配`fopen`to的结果`*pFile`。调用此函数时，您应该传递`pFile`using的地址`&pFile`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T09:02:09.670

你可以这样做：

```
File * fp;
try_fopen( &fp,.....); /* void try_fopen (FILE ** fp,....) */ 
```

或以下内容：

```
File * fp = try_fopen("file name"); /* FILE * try_fopen (const char * file_name,...) */ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T08:51:42.277

原因很简单，当你将 FILE* 传递给函数时，它的更新将丢失，因为它是由 Value 传递的。尝试将 FILE ** 传递给函数，它将起作用。有关代码片段，请参阅上面 Binyamin Sharet 的答案

原因可以通过阅读这个[链接来理解](http://geeki.wordpress.com/2010/10/13/is-c-pass-by-value-or-pass-by-reference/)

或者

您可以更改函数 try_open 以返回 FILE * 作为返回值。

```
FILE *try_fopen(const char* f_name, const char* mode) 
{ 
   FILE *f_handle = NULL;    
  *f_handle = fopen(f_name, mode);     
   if( *f_handle == NULL ) 
   {         
     fprintf(stderr, "Error: Unable to open '%s'.", f_name);         
     exit(0);     
   } 
} 

  //In the main function.
  FILE *pFile = try_fopen(argv[1], "r"); 
```

# javascript - 无法使用调用getResponseHeader获取的值

> ID：10580089
> 
> 赞同：1
> 
> 时间：2012-05-14T08:48:23.963
> 
> 标签：javascript, xmlhttprequest, greasemonkey, getresponse

我在使用调用`getResponseHeader`Greasemonkey 脚本时获得的值时遇到问题。

首先，我声明了以下全局变量：

```
size = 0;
maxS = 153600; // Max. size (bytes). 
```

一旦网站完全加载，我的 main 函数就会被调用，并在其中获取某个 div 中的所有图像（此处未显示，因为它不相关）：

```
function main() {
    ...
    var imgs = posts[i].getElementsByTagName('img');
    for (var j = 0; j < imgs.length; ++j) {
        getFileSize(imgs[j].src, responseHandler);
        if (size > maxS)
            // Do something
    }
    ...
} 
```

这就是`getFileSize`工作原理：

```
var getFileSize = function(address, responseHandler) {
    var req = new XMLHttpRequest();
    req.open('head', address, true);
    req.onreadystatechange = responseHandler;
    req.send(null);
};

var responseHandler = function(resp) {
    if (this.readyState == 1)
    this.abort();
    size = this.getResponseHeader("Content-length");
}; 
```

问题是即使我在句子之后检查*size的值*

```
size = this.getResponseHeader("Content-length"); 
```

该值是我期望的值，在 main 函数中，当它到达这部分代码时，它的值仍然为 0：

```
if (size > maxS)
    // Do something 
```

我试图通过检查我在这个网站上找到的其他一些问题来找出答案，我**猜**这与同步有关，但我真的不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T10:07:25.107

图像都在完全相同的服务器上，对吧？ `XMLHttpRequest()`不会进行跨域请求（无论如何，没有一些不适用于 Greasemonkey 上下文的新箍）。

该代码存在一些问题：

1.  它期望大小同步设置，但`XMLHttpRequest()`异步调用。
2.  它中止请求！而且太快了。没有充分的理由中止`HEAD`请求。
3.  它以一种模糊的方式使用“幻数”。如果可用，请使用适当的枚举常量。EG`this.readyState == 1`不好。 `this.readyState == this.OPENED`更好。

* * *

对于同步操作，更改`getFileSize()`. 像这样称呼它：

```
getFileSize (imgs[j].src); 
```

像这样定义它：

```
function getFileSize (address) {
    var request = new XMLHttpRequest();  
    request.open ('HEAD', address, false);  //-- false = Synchronous
    request.send (null);  

    size        = -666; // Error, or AJAX fail.
    if (request.status === 200) {  
        size    = request.getResponseHeader ("Content-length");
    }  
} 
```

* * *

笔记：

1.  出于性能和用户友好的原因，最好重构使用异步 AJAX 的方法。但这是另一个问题，不太直观。
2.  如果图像是跨域的，您将需要使用`GM_xmlhttpRequest()`-- 它的操作略有不同，并且对于同步 AJAX 无法正常工作（我上次检查过 -- 几个月前）。

# php - 适合使用 Code igniter 编写 PDF 的库

> ID：10580092
> 
> 赞同：2
> 
> 时间：2012-05-14T08:48:32.417
> 
> 标签：php, codeigniter, pdf-generation

哪个库最适合使用 Code Igniter 从 HTML 编写 PDF？

现在我正在使用 TCPDF，加载库需要很长时间。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T17:28:35.073

以下是 Codeignitor 的一些有用的 PDF 库和教程

**[使用 dompdf 生成 PDF](http://codeigniter.com/wiki/PDF_generation_using_dompdf/)**

**[TCPDF-CodeIgniter 集成](http://codeigniter.com/wiki/TCPDF-CodeIgniter_Integration)**

**[使用 CodeIgniter 生成 PDF 文件](http://www.christophermonnat.com/2008/08/generating-pdf-files-using-codeigniter/)**

**[带有 CodeIgniter 的 mPDF](http://tudip.blogspot.com/2012/05/mpdf-with-codeigniter.html)**

**[生成 PDF 文件](http://myphpcodes.blogspot.in/2011/11/creating-pdf-files-with-codeigniter.html)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T10:02:16.907

看看[这篇文章](http://codeigniter.com/news/codeigniter_community_voice_generating_pdf_files_using_codeigniter)。那里使用的 PDF 库非常​​快速且易于使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T17:45:35.917

由于您希望将 HTML 转换为 PDF，因此我强烈推荐 wkhtmltopdf。它使用 Qt 和 WebKit 生成渲染标记的 PDF 文件，甚至可以处理中等复杂的 JavaScript 和 AJAX。这使得它对于生成您已经为其创建视图和模板的页面的 PDF 非常有用，并且能够使用浏览器调整和调试这些页面的额外好处。通过规范化操作系统、Web 浏览器和打印机驱动程序的各种组合的许多细微差别，它非常适合在您的 Web 应用程序中生成与平台无关的打印视图。

它是一个独立的二进制文件，因此您可能无法在共享主机上实现它，但我最近在一个项目中使用它并且对它非常满意。

**wkhtmltopdf：** [http ://code.google.com/p/wkhtmltopdf/](http://code.google.com/p/wkhtmltopdf/)

**我个人最喜欢的 PHP 库和 API：** [https ://github.com/mikehaertl/phpwkhtmltopdf](https://github.com/mikehaertl/phpwkhtmltopdf)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T14:48:45.193

查看**R&OS**库 [R&OS pdf](http://jaison-john.blogspot.fr/2011/02/generating-pdf-using-codeigniter.html) 我发现它很容易实现

# .net - 通过 Razor 创建一个新节点（在 Umbraco 中）

> ID：10580096
> 
> 赞同：2
> 
> 时间：2012-05-14T08:48:36.590
> 
> 标签：.net, razor, umbraco

我正在尝试在 Umbraco 中创建一个预订系统，以便在我的网站上提交预订表格后，它还会在 Umbraco 后端创建一个新节点以供参考。是否可以仅使用剃须刀做到这一点？如果没有，我该如何创建此功能？

我目前正在使用 Umbraco 文档中向我建议的以下代码（通过将其添加到发送成功时运行的代码块中），但我的剃刀脚本错误：

```
using umbraco.BusinessLogic;
using umbraco.cms.businesslogic.web;

DocumentType dt = DocumentType.GetByAlias("Textpage"); 
User author = User.GetUser(0); 
Document doc = Document.MakeNew("My new document", dt, author, 1018); 
```

我正在使用 Umbraco v4.7.1.1 并收到以下错误：“找不到类型或命名空间名称'DocumentType'（您是否缺少 using 指令或程序集引用？）”。

如果我将@添加到命名空间，我会收到错误消息：“System.Security.Principal.IPrincipal”不包含“GetUser”的定义，并且没有扩展方法“GetUser”接受“System.Security”类型的第一个参数。可以找到 Principal.IPrincipal'（您是否缺少 using 指令或程序集引用？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T17:03:45.077

using 语句需要在您的 razor 代码块之外：

```
@using umbraco.BusinessLogic;
@using umbraco.cms.businesslogic.web;
@{
    DocumentType dt = DocumentType.GetByAlias("Textpage"); 
    User author = User.GetUser(0); 
    Document doc = Document.MakeNew("My new document", dt, author, 1018); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T15:36:33.513

不要使用**using**语句，而是尝试将完整的命名空间与类一起使用。

例如 umbraco.cms.businesslogic.web.DocumentType

接下来也尝试在 Visual Studio 中打开解决方案。这样，您将获得命名空间的 IntelliSense。

# c# - 应用程序“我的网站”中的服务器错误

> ID：10580097
> 
> 赞同：0
> 
> 时间：2012-05-14T08:48:45.110
> 
> 标签：c#, asp.net-mvc-3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T08:52:15.380

这里有几件事要检查：

1.  托管服务提供商是否运行正确版本的 ASP.Net
2.  是否支持剃须刀
3.  实际文件存在于你设置的路径上，试着放一个普通的HTML文件进去看看能不能打到

# php - How to keep selected value in a dropdown box using JQUERY?

> ID：10580109
> 
> 赞同：0
> 
> 时间：2012-05-14T08:50:02.627
> 
> 标签：php, ajax, jquery-ui, jquery

Hi am using a jquery code like this

```
$(".selfont").change(function(event){

$('#dav').val();

window.location ='?davQ=' + $('#dav').val() + '&pathogenQ=' + $('#pathogen').val() + '&topicQ=' + $('#topicF').val() ;

}); 
```

I want to keep the dropdown value selected by the user in each dropdown boxes. But at present the value is not the one selected by the user, its always showing the first value. How can I set the dropdown field with value selected by the user using jquery? Please help me.

My first select box code is like below

```
<select name="dav" id="dav" style="width: 275px" class='selfont' >
<option value='' class=''>Select one</option>
                        <?php

                                $test = mysql_query("SELECT DISTINCT DataVersion FROM olivesdeptable ORDER BY DataVersion DESC");
                                 $i=1;
                                 while($numval=mysql_fetch_array($test))
                                 {
                                          print "<option value=\"".$numval['DataVersion']."\">".$numval['DataVersion']."</option>";
                                          $i=$i+1;
                                  }
                          ?>

                    </select> 
```

Even if we select value it will show as "Select one" in the field.

javascript code for dropdown fields

```
<script type="text/javascript">

if (document.getElementById("dav").selectedIndex < 1)
{
document.getElementById('pathogen').selectedIndex = "";
document.getElementById('pathogen').disabled = true;
}

if (document.getElementById("pathogen").selectedIndex < 1)
{
document.getElementById('topicF').selectedIndex = "";
document.getElementById('topicF').disabled = true;
}

if (document.getElementById("topicF").selectedIndex < 1)
{
document.getElementById('ind').selectedIndex = "";
document.getElementById('ind').disabled = true;
}

if (document.getElementById("ind").selectedIndex < 1)
{
document.getElementById('subind').selectedIndex = "";
document.getElementById('subind').disabled = true;
}

if (document.getElementById("subind").selectedIndex < 1)
{
document.getElementById('countryR').selectedIndex = "";
document.getElementById('countryRF').options.length = 0;
document.getElementById('countryRF').selectedIndex = "";
document.getElementById('countryR').disabled = true;
document.getElementById('countryRF').disabled = true;
}

</script> 
```

even the value is updated, the second drop down box is showing as disabled ?

Next dropdown field markup is as below

```
 <select name="pathogen" id="pathogen" style="width: 275px" class='selfont' >
    <option value=''>Select one</option>
                            <?php

                                    $test = mysql_query("SELECT DISTINCT Pathogen FROM olivesdeptable where DataVersion='$davQ' ORDER BY Pathogen ASC");
                                    $i=1;
                                     while($numval=mysql_fetch_array($test))
                                     {
                                              print "<option value=\"".$numval['Pathogen']."\">".$numval['Pathogen']."</option>";
                                              $i=$i+1;
                                      }
                              ?>

                    </select> 
```

only first dropbox value is working for next dropbox value is storing in url but in page the value shows as 'Select one' ? Please help to sort

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T09:06:47.383

```
 $(document).ready(function () {
            $('#dav').val(getURLParameter('davQ'));

            $('#pathogenQ').val(getURLParameter('pathogenQ'));

            $('#topicQ').val(getURLParameter('topicQ'));

            $(".selfont").change(function (event) {
                 window.location = '?davQ=' + $('#dav').val() + '&pathogenQ=' + $('#pathogen').val() + '&topicQ=' + $('#topicF').val();
            });

            function getURLParameter(name) {
            return decodeURI((RegExp(name + '=' + '(.+?)(&|$)').exec(location.search) || [, null])[1]);
            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T09:01:57.700

```
<?php

  $test = mysql_query("SELECT DISTINCT DataVersion FROM olivesdeptable ORDER BY DataVersion DESC");
  $i=1;
  $selected = '';
  // make compare with the value you want to select with the parameter form url
  // here I assume $_GET['davQ'] holds the value to $numval['DataVersion']
  if($_GET['davQ'] == $numval['DataVersion']) $selected = 'selected';
  while($numval=mysql_fetch_array($test))
  {
     echo "<option value=\"".$numval['DataVersion']."\" $selected>".$numval['DataVersion']."</option>";
     $i=$i+1;
  }
?> 
```

# android - 使用 AsyncTask 我想要调用 restful api 时列表视图中的数据

> ID：10580116
> 
> 赞同：0
> 
> 时间：2012-05-14T08:50:21.310
> 
> 标签：android, android-asynctask

我只是通过异步任务构建了一个演示应用程序，现在我想要列表视图中的 json 数据，所以我不知道在哪里可以添加 json 函数和数组列表等，所以请指导我或通过编辑我提前感谢的代码来帮助我，请帮助我刚接触 android 和 java

```
package your.packag.namespace;
import java.io.IOException;
import java.io.InputStream;
import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.protocol.BasicHttpContext;
import org.apache.http.protocol.HttpContext;
import android.app.Activity;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;

 public class runActivity extends Activity implements OnClickListener {

 @Override

  public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.main);
      findViewById(R.id.my_button).setOnClickListener(this);
}

@Override
public void onClick(View arg0) {
    Button b = (Button)findViewById(R.id.my_button);
    b.setClickable(false);
    new LongRunningGetIO().execute();
}

private class LongRunningGetIO extends AsyncTask <Void, Void, String> {

    protected String getASCIIContentFromEntity(HttpEntity entity) throws IllegalStateException, IOException {
       InputStream in = entity.getContent();
         StringBuffer out = new StringBuffer();
         int n = 1;
         while (n>0) {
             byte[] b = new byte[4096];
             n =  in.read(b);
             if (n>0) out.append(new String(b, 0, n));
         }
         return out.toString();
    }

    @Override
    protected String doInBackground(Void... params) {
         HttpClient httpClient = new DefaultHttpClient();
         HttpContext localContext = new BasicHttpContext();
         HttpGet httpGet = new HttpGet("http://192.168.1.156/recess/document/document");
         HttpClient client = new DefaultHttpClient();
         HttpResponse response=null;
         try{
          response = client.execute(httpGet);}
         catch(Exception e){}
         System.out.println(response.getStatusLine());
         String text = null;
         try {
                response = httpClient.execute(httpGet, localContext);
               HttpEntity entity = response.getEntity();
               text = getASCIIContentFromEntity(entity);
         } catch (Exception e) {
             return e.getLocalizedMessage();
         }
         return text;
    }   

    protected void onPostExecute(String results) {
        if (results!=null) {
            EditText et = (EditText)findViewById(R.id.my_edit);
            et.setText(results);
        }
        Button b = (Button)findViewById(R.id.my_button);
        b.setClickable(true);
    }
}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T08:52:59.263

您可以使用内置`org.json`类将检索到的字符串（您的`text`变量内容）转换为 JSON 对象。

查看[Lars Vogel 的教程，](http://www.vogella.com/articles/AndroidJSON/article.html)了解如何做到这一点。

# php - PHP中有什么方法可以检测请求是否来自浏览器后退按钮？

> ID：10580118
> 
> 赞同：0
> 
> 时间：2012-05-14T08:50:23.813
> 
> 标签：php, javascript, wordpress

我正在研究处理购物车的 wordpress 插件。我有两个页面，结帐页面和感谢页面。[通过https://mysite.com/checkout/?action=add&subscription=23 之](https://mysite.com/checkout/?action=add&subscription=23)类的链接将商品添加到购物车。我正在使用 Session 在结帐页面上将商品添加到购物车。

假设如果我添加三个添加项： [https://mysite.com/checkout/?action=add&subscription=1](https://mysite.com/checkout/?action=add&subscription=1) https://mysite.com/checkout/?action=add&subscription=2 [https://mysite.com/checkout/ ?action=add&subscription=3](https://mysite.com/checkout/?action=add&subscription=3) （浏览器地址栏中的最后一个链接）

当用户在结帐页面上结帐时，用户将被重定向到感谢页面。我的浏览器后退按钮有问题，如果用户按下后退按钮，谢谢，他会再次重定向到结帐页面，并再次添加最后一项（https://mysite/checkout/?action=add&subscription=3），因为这是最后一次浏览器地址栏中的链接。

如何防止浏览器在感谢页面上的用户返回按钮上再次添加最后一项？PHP中有什么方法可以检测请求是否来自浏览器后退按钮？我认为，有办法使用会话来处理它吗？

请指导我是否有其他合适的方法来完成此操作？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T08:55:35.907

处理这个问题的最好方法是使用[POST/REDIRECT/GET](http://en.wikipedia.org/wiki/Post/Redirect/Get)模式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T08:56:51.910

使用[Post Redirect 获取](http://fr.wikipedia.org/wiki/Post-Redirect-Get)设计模式。

换句话说，处理的脚本不是显示结果的脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T08:55:21.213

您可以让用户 `$_SERVER['HTTP_REFERER']`查看您的父页面，并检测用户是否来自感谢页面

# php - 在 Drupal 7 中使用 SOAP Web 服务

> ID：10580120
> 
> 赞同：3
> 
> 时间：2012-05-14T08:50:31.710
> 
> 标签：php, soap, drupal-7, soap-client

我正在开发一个需要使用外部 Web 服务的 Web 应用程序。我查看了 WSClient 模块，但有些我无法使用它。在 Drupal 7 中是否有其他方法可以使用外部 Web 服务？

谢谢， 维沙尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T10:00:05.887

在 Drupal 模块中使用“SoapClient”解决了这个问题。以下是我遵循的步骤：
1\. 下载 WSDL 文件并将其保存在您的模块文件夹中。
2\. 使用任何 WSDL 到 PHP 转换器，为下载的 WSDL 文件创建一个 PHP 文件
3\. 将生成的 PHP 文件复制到 Drupal 模块中
4\. 使用以下代码将生成的 PHP 文件包含在您的函数中（在 Drupal 模块中）：

```
$WSDLPHPPath = drupal_get_path('module', <Module Name>) .'/< generated PHP file>.php';
require_once($WSDLPHPPath); 
```

5.使用以下代码包含 WSDL 文件：

```
 $WSDLPath = "http://localhost/drupal/" . drupal_get_path('module', <Module Name>) .'/<Name of WSDL file>.wsdl';
    $client = new SoapClient($WSDLPath, array('location'=><Location of the WSDL file>)); 
```

此处 WSDL 文件的位置是您要连接的服务器 IP/名称（例如`http://<server name or IP>/abc?wsdl`）

6.调用您的网络方法：（例如`$client-><Web method name>`）

7.如果要给web方法添加参数，请参考SoapClient文档

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T10:03:38.887

是的。您可以编写自己的模块或等待该模块具有 Drupal 7 版本[http://drupal.org/project/feeds_soap](http://drupal.org/project/feeds_soap)。他们说 Drupal 7 版本即将推出。

# java - 我如何将我的程序与 JGoodies Extension 捆绑在一起

> ID：10580122
> 
> 赞同：0
> 
> 时间：2012-05-14T08:50:42.603
> 
> 标签：java, jar, bundle, jgoodies

我用 java 编写了一个应用程序，并在我的代码中使用了 JGoodies。当我导出 jar 文件时，该文件不会在其他系统中运行。如何将我的程序与 JGoodies jar 文件捆绑在一起？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T10:35:33.473

基本上有两种方法可以做到这一点，但归根结底，当用户运行应用程序时，确保您的类和 JGoodies 类都在类路径中。

第一种方法是简单地将您的 jar 文件与 JGoodies jar 文件以及它们中的任何一个所依赖的任何 jar 文件一起分发。然后，用户必须在其类路径中包含所有（两个）这些 jar，并使用 java 命令行的“-cp”选项。

第二种选择是将所有类重新捆绑到一个大 jar 文件中（通常称为“uber-jar”）。如果您的构建使用 Maven，或者您可以转换为 Maven，则可以使用 Maven 程序集插件 - [http://maven.apache.org/plugins/maven-assembly-plugin/](http://maven.apache.org/plugins/maven-assembly-plugin/)

# javascript - 如何使图标网页运行

> ID：10580129
> 
> 赞同：1
> 
> 时间：2012-05-14T08:51:18.453
> 
> 标签：javascript, html, ajax, favicon

我想知道当我这样做时，如何从标题“运行”左侧制作小网页图标，例如，`getJSON()`向我的外部服务器发出警告，以警告用户他/她的请求正在被处理。

有没有办法控制它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T09:09:37.007

在页面的标题上放置一个 favicon 链接，例如

```
<link id="favicon" rel="icon" type="image/gif" href="/base-favicon.gif" /> 
```

当 ajax 调用开始时，只需更改`href`favicon 的属性。准备一个动画`gif`，然后用

```
document.getElementById('favicon').href = "/animated-favicon.gif"; 
```

当您的 ajax 调用已执行（成功或错误）时，只需恢复以前的 favicon

# gwt - 失败后重新启动 GWT-RPC 请求

> ID：10580131
> 
> 赞同：0
> 
> 时间：2012-05-14T08:51:23.977
> 
> 标签：gwt, gwt-rpc

我正在使用 RpcRequestBuilder 拦截并对我在应用程序上进行的每个 RPC 进行一些一般性修改。有没有办法，如果我在我的 RpcRequestBuilder 上捕获了一个 throwable，并且我知道我应该再次尝试执行 RPC，重新启动相同的 RPC？这在理论上是可能的，我只是不知道如何再次启动 RPC 请求。（是的，我会小心不要进入循环:)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T09:59:59.807

您是否尝试过简单地`send()`调用`RequestBuilder`?

AFAICT，唯一的问题是，如果您有一个具有`Request`（或`RequestBuilder`）返回类型的异步方法：返回的`Request`将是第一个请求中的那个，第二个请求将被忽略，因此不能被调用核心中止.
为了允许这种情况，您必须`RequestBuilder`从您`RpcRequestBuilder`的`create()`方法返回一个子类，重写`send()`以返回一个`Request`委托给*真实* `Request`的特殊子类（并允许它被*交换*，因此您可以设置与重试相对应的子类）。

# php - 如何防止用户看到“包含文件”？

> ID：10580133
> 
> 赞同：1
> 
> 时间：2012-05-14T08:51:26.973
> 
> 标签：php

我网站的主文件（index.php）代码在这里：

```
<?php 
include 'header.php';
include 'sidebar.php';
include 'content.php';
include 'footer.php';
?> 
```

但我不希望任何用户通过编写“www.domain.com/header.php”来查看这些包含文件。我应该在这些文件中插入一个php代码还是可能？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-14T08:53:48.730

你有几个选择。

1.  将文件保存在 webroot 之外（这样它们就不会自动获取自己的 URI）
2.  配置您的网络服务器，使其拒绝为他们提供服务
3.  测试是否设置了变量/常量，然后将其设置在允许包含它们的每个文件中。`exit`如果未设置。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-14T08:55:01.773

这是给你的PHP。

```
if(basename(__FILE__) == basename($_SERVER['PHP_SELF'])){exit();} 
```

简而言之，如果调用文件是它自己，这将退出执行。

来源：[http ://thephpcode.blogspot.se/2009/07/creating-include-only-php-files.html](http://thephpcode.blogspot.se/2009/07/creating-include-only-php-files.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T08:53:40.753

您可以在主文件中定义一个常量，并在包含的文件中使用它来检测它们是否真的被包含：

索引.php

```
<?php
define('REALLY_INCLUDED', true);
include'header.php'; 
```

头文件.php

```
<?php
if(!defined('REALLY_INCLUDED') || !REALLY_INCLUDED) {
    exit();
}
... 
```

# ruby-on-rails - 如何使用回形针上传图片以外的文件...如 pdf、docs

> ID：10580137
> 
> 赞同：2
> 
> 时间：2012-05-14T08:51:42.540
> 
> 标签：ruby-on-rails, ruby-on-rails-3, paperclip

我正在使用回形针在我的申请工作中上传简历。它工作正常，我的意思是我可以获取浏览按钮来上传文件。但是当我显示查看页面时，它没有显示我上传的 pdf 文件，而是只显示名称文件。我还检查了默认生成的文件夹，该文件夹包含我在创建操作期间上传的 pdf，这意味着上传工作正常。但我无法显示该 pdf。

* * *

以下是我的 applyforjob.rb 模型中用于回形针附件的代码：

```
has_attached_file :resume,:styles => { :small => "150x150>" } 
```

以下是用于上传文件的 applyforjobs/form.html.haml 代码：

```
= f.label :resume, "Upload resume".html_safe
= f.file_field :resume 
```

以下是用于显示文件的 applyforjobs/show.html.haml 代码：

```
= image_tag @appliedusers.resume.url(:small) 
```

但它没有显示该pdf文件。我应该写什么来上传和显示pdf或docs之类的文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T08:59:09.120

由于`paperclip`它是一个通用的附件上传 gem，正如它的自述文件中所述，它本身支持上传任何类型的文件。

我建议你：

1.  删除`:styles => { :small => "150x150>" }`参数`has_attached_file`
2.  **编写一个回形针回调，它将从 pdf 文件生成缩略图**
3.  在模型中定义一个方法，例如`resume_thumbnail`，它将返回生成文件的路径
4.  在您的视图中调用以下内容

    ```
    = image_tag @appliedusers.resume_thumbnail 
    ```

难怪`image_tag @appliedusers.resume.url(:small)`对您不起作用：`paperclip`对 PDF 一无所知。`paperclip`盲目地将PDF文件视为普通*文件*，因此无法进行任何仅适用于图像的处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-29T12:41:42.817

@ ，保存 pdf 后，您需要创建一个图像，将 pdf 转换为图像以显示在浏览器上，我这样做了 -

**self.save ##在回形针中保存 pdf

create_preview_image ##调用这个方法

def create_preview_image

```
file_name = File.join(Rails.root, 'public',   self.document.url.split('?')[0]) if self.document

return unless file_name.present?

pdf = Magick::ImageList.new(file_name) 

return unless pdf.present?

png_file = Tempfile.new(["#{rand(9999).to_s}",'.png'])

pdf[0].write(png_file.path) do

    self.quality = 100

end

self.preview = png_file

self.save 
```

结尾**

# xslt - XSL:FO for-each 创建固定大小的循环

> ID：10580138
> 
> 赞同：2
> 
> 时间：2012-05-14T08:51:44.287
> 
> 标签：xslt, xslt-2.0, xsl-fo

假设我们有一个包含 99 个值的值列表，我们讨厌使用 for-each 遍历它们四次，每次取 30 个值，然后使用这些值进行操作。

```
<xsl:template name="30valuestemplate">   
<xsl:for-each select="values">  

   ...

</xsl:for-each>
</template> 
```

那么如何调用这个模板4次，每次只需要30个值，也许使用计数器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T12:53:37.757

**这是执行此操作的 XSLT 方式**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/*">
     <nums>
       <xsl:apply-templates/>
     </nums>
 </xsl:template>

 <xsl:template match="num[position() mod 30 = 1]">
  <group>
    <xsl:copy-of select=".|following-sibling::*[not(position() > 29)]"/>
  </group>
 </xsl:template>
 <xsl:template match="num"/>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时**：

```
<nums>
  <num>01</num>
  <num>02</num>
  <num>03</num>
  <num>04</num>
  <num>05</num>
  <num>06</num>
  <num>07</num>
  <num>08</num>
  <num>09</num>
  <num>10</num>
  <num>01</num>
  <num>02</num>
  <num>03</num>
  <num>04</num>
  <num>05</num>
  <num>06</num>
  <num>07</num>
  <num>08</num>
  <num>09</num>
  <num>10</num>
  <num>01</num>
  <num>02</num>
  <num>03</num>
  <num>04</num>
  <num>05</num>
  <num>06</num>
  <num>07</num>
  <num>08</num>
  <num>09</num>
  <num>10</num>
  <num>01</num>
  <num>02</num>
  <num>03</num>
  <num>04</num>
  <num>05</num>
  <num>06</num>
  <num>07</num>
  <num>08</num>
  <num>09</num>
  <num>10</num>
  <num>01</num>
  <num>02</num>
  <num>03</num>
  <num>04</num>
  <num>05</num>
  <num>06</num>
  <num>07</num>
  <num>08</num>
  <num>09</num>
  <num>10</num>
  <num>01</num>
  <num>02</num>
  <num>03</num>
  <num>04</num>
  <num>05</num>
  <num>06</num>
  <num>07</num>
  <num>08</num>
  <num>09</num>
  <num>10</num>
  <num>01</num>
  <num>02</num>
  <num>03</num>
  <num>04</num>
  <num>05</num>
  <num>06</num>
  <num>07</num>
  <num>08</num>
  <num>09</num>
  <num>10</num>
  <num>01</num>
  <num>02</num>
  <num>03</num>
  <num>04</num>
  <num>05</num>
  <num>06</num>
  <num>07</num>
  <num>08</num>
  <num>09</num>
  <num>10</num>
  <num>01</num>
  <num>02</num>
  <num>03</num>
  <num>04</num>
  <num>05</num>
  <num>06</num>
  <num>07</num>
  <num>08</num>
  <num>09</num>
  <num>10</num>
  <num>01</num>
  <num>02</num>
  <num>03</num>
  <num>04</num>
  <num>05</num>
  <num>06</num>
  <num>07</num>
  <num>08</num>
  <num>09</num>
</nums> 
```

**产生了想要的结果（每组连续的 30 个`num`元素包含在一个单独的`group`元素中）**：

```
<nums>
   <group>
      <num>01</num>
      <num>02</num>
      <num>03</num>
      <num>04</num>
      <num>05</num>
      <num>06</num>
      <num>07</num>
      <num>08</num>
      <num>09</num>
      <num>10</num>
      <num>01</num>
      <num>02</num>
      <num>03</num>
      <num>04</num>
      <num>05</num>
      <num>06</num>
      <num>07</num>
      <num>08</num>
      <num>09</num>
      <num>10</num>
      <num>01</num>
      <num>02</num>
      <num>03</num>
      <num>04</num>
      <num>05</num>
      <num>06</num>
      <num>07</num>
      <num>08</num>
      <num>09</num>
      <num>10</num>
   </group>
   <group>
      <num>01</num>
      <num>02</num>
      <num>03</num>
      <num>04</num>
      <num>05</num>
      <num>06</num>
      <num>07</num>
      <num>08</num>
      <num>09</num>
      <num>10</num>
      <num>01</num>
      <num>02</num>
      <num>03</num>
      <num>04</num>
      <num>05</num>
      <num>06</num>
      <num>07</num>
      <num>08</num>
      <num>09</num>
      <num>10</num>
      <num>01</num>
      <num>02</num>
      <num>03</num>
      <num>04</num>
      <num>05</num>
      <num>06</num>
      <num>07</num>
      <num>08</num>
      <num>09</num>
      <num>10</num>
   </group>
   <group>
      <num>01</num>
      <num>02</num>
      <num>03</num>
      <num>04</num>
      <num>05</num>
      <num>06</num>
      <num>07</num>
      <num>08</num>
      <num>09</num>
      <num>10</num>
      <num>01</num>
      <num>02</num>
      <num>03</num>
      <num>04</num>
      <num>05</num>
      <num>06</num>
      <num>07</num>
      <num>08</num>
      <num>09</num>
      <num>10</num>
      <num>01</num>
      <num>02</num>
      <num>03</num>
      <num>04</num>
      <num>05</num>
      <num>06</num>
      <num>07</num>
      <num>08</num>
      <num>09</num>
      <num>10</num>
   </group>
   <group>
      <num>01</num>
      <num>02</num>
      <num>03</num>
      <num>04</num>
      <num>05</num>
      <num>06</num>
      <num>07</num>
      <num>08</num>
      <num>09</num>
   </group>
</nums> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T09:14:36.567

这是将大循环划分为固定大小部分的类似示例（每次迭代限制为 3 个）。它会生成一个包含 3 列的 HTML 表格，但您可以根据需要轻松修改它。

```
<xsl:template match="/"> 
............
<xsl:call-template name="list-3-groups-after">
<xsl:with-param name="n" select="1"/>
<xsl:with-param name="values" select="30valuestemplate"/>
</xsl:call-template>
.............
</xsl:template>

<xsl:template name="list-3-groups-after">
    <xsl:param name="n"/>
    <xsl:param name="values"/>
    <xsl:if test="values[$n]">
    <tr>
        <xsl:call-template name="render-value">
            <xsl:with-param name="value" select="$values[$n]"/>
        </xsl:call-template>
        <xsl:call-template name="render-value">
            <xsl:with-param name="value" select="$values[$n + 1]"/>
        </xsl:call-template>
        <xsl:call-template name="render-value">
            <xsl:with-param name="value" select="$values[$n + 2]"/>
        </xsl:call-template>
    </tr>
    <xsl:call-template name="list-3-groups-after">
        <xsl:with-param name="n" select="$n + 3"/>
        <xsl:with-param name="values" select="$values"/>
    </xsl:call-template>
    </xsl:if>
</xsl:template> 

<xsl:template name="render-value">
    <xsl:param name="value"/>
    <td valign="top">
         <xsl:value-of select="$value" />
    </td>
</xsl:template> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-07T15:20:11.327

由于问题已被标记`xslt-2.0`，因此这里是在[Dimitre 的示例文档](https://stackoverflow.com/a/10583739/4092205 "Dimitre's sample document")`xsl:for-each-group`中使用( [https://www.w3.org/TR/xslt20/#grouping](https://www.w3.org/TR/xslt20/#grouping) )的样式表：

```
<xsl:stylesheet version="2.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/*">
     <nums>
       <xsl:for-each-group
           select="*"
           group-starting-with="num[position() mod 30 = 1]">
         <group>
           <xsl:copy-of select="current-group()" />
         </group>
       </xsl:for-each-group>
     </nums>
 </xsl:template>
</xsl:stylesheet> 
```

# java - 直接访问数组的一部分

> ID：10580139
> 
> 赞同：3
> 
> 时间：2012-05-14T08:51:44.460
> 
> 标签：java, arrays

为了加快我的图像处理应用程序，我试图从中间开始处理数组中的值，并使用从 0 开始的索引。

例如，当我使用两个数组时，我经常会遇到这样的情况：

```
public void work(int[] array1, int[] array2, int offset)
{
    int len = array1.length;
    for (int i = 0; i < len; i++)
        array1[i] += array2[i + offset];
} 
```

所以我想创建一个新变量array3，它直接映射到array2的中间（不是副本），所以我可以这样做：

```
public void work(int[] array1, int[] array2, int offset)
{
    int[] array3 = array2[offset]...;
    int len = array1.length;
    for (int i = 0; i < len; i++)
        array1[i] += array3[i];
} 
```

实际上，我想要一个与此 c 语句等效的 Java：

```
int *array3ptr = array2ptr + offset; 
```

注意：我对 JNI 或任何东西没有任何经验，所以如果归结为使用它，请提供工作示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T08:56:08.870

这不可能通过使用纯 Java 数组和`array[index]`符号来实现。在 Java 中，数组**永远不能重叠**。

但是，您可以将数组包装在[`IntBuffer`](http://docs.oracle.com/javase/6/docs/api/java/nio/IntBuffer.html). 如果您使用[*直接缓冲区*](http://docs.oracle.com/javase/6/docs/api/java/nio/ByteBuffer.html#direct)（请参阅 参考资料[`allocateDirect`](http://docs.oracle.com/javase/6/docs/api/java/nio/ByteBuffer.html#allocateDirect%28int%29)），您应该获得真正好的性能。

声明如

```
int *array3ptr = array2ptr + offset; 
```

将被写为

```
IntBuffer array3 = array2.slice().position(offset); 
```

这些

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T08:59:19.140

在java中，甚至整数数组也是堆上的对象。因此 int[] array2 实际上是直接引用内存中的整数数组。没有创建对象（即数组）的副本，副本只是对数组的引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T09:01:29.247

我对它们没有太多经验，但我认为您可以通过将数组（和子数组）包装到[IntBuffer](http://docs.oracle.com/javase/6/docs/api/java/nio/IntBuffer.html)实例中来做到这一点。

# android - 在 onPause() 中使用 IntentFiler

> ID：10580143
> 
> 赞同：0
> 
> 时间：2012-05-14T08:51:50.187
> 
> 标签：android

我想在按下返回按钮后启动我的应用程序（例如更新我的 TextView）。但它没有用。请帮我。

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);        
   intentFilter = new IntentFilter();
    intentFilter.addAction("SMS_RECEIVED_ACTION");  
    registerReceiver(intentReceiver, intentFilter);
}

protected void onPause() {
     registerReceiver(intentReceiver, intentFilter);
     super.onPause();

}

private  BroadcastReceiver intentReceiver = new BroadcastReceiver() {           
    @Override
    public void onReceive(Context context, Intent intent) {
        sendSMS("123","message"); 

    }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T09:03:38.973

我已经更新了你的代码试试这个，如果有任何问题，然后问我。我会尽力帮助你..

```
 @Override
    public void onBackPressed() {
        // FOR UPDATING YOUR TEXT VIEW.
        Intent broadcast_intent = new Intent("SMS_RECEIVED_ACTION");
        broadcast_intent.putExtra("number", textview_value_to_set);
        sendBroadcast(broadcast_intent);

        // // FOR STARTING YOUR NEW ACTIVITY.
        Intent intent = new Intent(getApplicationContext(), class_name.class);
        startActivity(intent);

        super.onBackPressed();
    } 
```

使用它作为您的广播接收器。不要忘记注册接收者。

```
 private  BroadcastReceiver intentReceiver = new BroadcastReceiver() {           
        @Override
        public void onReceive(Context context, Intent intent) {
            if (intent.getAction().equals("SMS_RECEIVED_ACTION")) {
                TextView text = (TextView)findViewById(R.id.text);
                text.setText(intent.getExtras().getString("number"));
            }

        }
    }; 
```

# regex - 正则表达式匹配字符串的顺序

> ID：10580145
> 
> 赞同：0
> 
> 时间：2012-05-14T08:51:57.813
> 
> 标签：regex

我想用相反的顺序匹配字符串中的单词。

如果名称以相反的顺序存在，我们希望将验证提示用户。

**例如：**

如果`name`列的值为“病毒，网球”

现在，如果用户输入一个新名称，其值为 'Tennis,Viral'

那么我们如何使用正则表达式或其他方式匹配单词的逆序呢？

我正在使用 C#.net 进行开发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T09:10:40.377

您可以查看[Regex.Split(String input, String regex)](http://msdn.microsoft.com/en-us/library/8yttk7sy.aspx)并执行以下操作：

```
String[] userEntry = Regex.Split(userString, "\\s+");
StringBuilder sb = new StringBuilder()
for (int i = userEntry.Length -1; i >= 0; i--)
{
     sb.append(userEntry[i]).append(" ");
}

String result = sb.ToString();
//Do Validation 
```

这样做可以解决问题，但是，您需要记住，如果您不想更改特殊符号（例如逗号）的顺序，事情会变得有点混乱。您可以轻松删除它们并在没有特殊符号的情况下进行任何验证。

编辑：这取决于特殊符号的含义。正则表达式`[^a-zA-z0-9]+`将匹配任何不是字母（大写或小写）且也不是数字的字符。所以你可以很容易地做这样的事情：

```
 string input = ...
  string pattern = "[^a-zA-z0-9]+";
  string replacement = "";
  Regex rgx = new Regex(pattern);
  string result = rgx.Replace(input, replacement); 
```

以上应该产生一个仅由字母和数字组成的字符串。空格也将被删除。

# ios - 与第 3 方开发者共享证书

> ID：10580146
> 
> 赞同：0
> 
> 时间：2012-05-14T08:52:05.640
> 
> 标签：ios, mobile, itunes-store

我们有许多由第 3 方开发人员构建的应用程序。我不记得过去是如何做到的，但他们刚刚更新了我们的 2 个应用程序以在 iOS 5.x 上正常工作

协议是他们将构建并签署文件，以便我们上传到 iTunes。我们无法构建代码，因为协议不包含源代码。

我已经向他们发送了分发配置文件（.mobileprovision），但他们要求提供“钥匙串访问证书”

也许我过于谨慎，但我认为我需要将我的开发人员证书导出为 .cer 文件并将其通过电子邮件发送给他们是否正确？我们确实信任这家公司，但这是正确的做事方式吗？苹果允许吗？

第 3 方无法访问我们的帐户（开发者中心/iTunes 连接），我们也无法访问源代码。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T10:19:01.657

如果他们要像您一样构建东西，他们将需要您的证书和私钥以及配置文件。如果他们要进行构建和代码签名，我认为没有任何办法。

我认为这是一种相当典型的做事方式，在客户端拥有开发帐户但开发人员拥有源代码的情况下。

即使开发公司确实有权访问您的 iTunes 帐户，您仍然需要向他们发送创建证书时使用的私钥。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-06T20:11:21.240

自己没有尝试过，但似乎有一种方法可以重新签署二进制文件（IPA 文件）。检查[此链接](http://dev.mlsdigital.net/posts/how-to-resign-an-ios-app-from-external-developers/)它使用一个名为[iReSign的实用程序](https://github.com/maciekish/iReSign)

# mysql - 从 MySQL 表轮询记录

> ID：10580148
> 
> 赞同：0
> 
> 时间：2012-05-14T08:52:08.000
> 
> 标签：mysql, polling, records

什么可能是从 MySQL 表中为连接的多个客户端获取记录的最佳方法，这些客户端同时并定期检索记录。

因此，当新记录进入表时，每个人都会收到新消息，但不应再次检索旧消息。

当前表结构：MessageId、Message、DatePosted、MessageFromID

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T09:12:56.510

您的问题可以翻译为：每个客户如何知道，哪些记录要读取，哪些记录不读取。

有两种完全不同的方法，具有非常不同的属性。

1.  让客户关心
2.  让服务器照顾它

模型 #1 很简单地要求，你

*   `AUTO_INCREMENT`如果不能保证您的 MessageID 会递增，请在某些字段上使用类似的东西
*   在服务器上，不仅给每个客户端消息，还给每个客户端 ID
*   让客户端保留此 ID 并将其用作下一次轮询的过滤器

模型 #2 需要你

*   有另一个带有“ClientID 和 MessageID”的表
*   每当客户收到消息时，在那里创建一条记录
*   使用不存在这样的记录作为轮询过滤器

# wordpress - 侧边栏中的菜单，其中的页面不会显示在默认菜单中

> ID：10580152
> 
> 赞同：1
> 
> 时间：2012-05-14T08:52:40.957
> 
> 标签：wordpress, plugins, menu, sidebar

我正在使用默认的 Wordpress 主题二十一。

我想知道是否可以在侧边栏中添加一个菜单，这会导致“隐藏页面”，即顶部经典菜单栏中未列出的页面。

我希望这些菜单声音出现在每个页面上，在默认侧边栏中。

任何有用的插件，或任何其他方法？直到现在我才找到一个。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T09:00:15.863

这个问题属于[https://wordpress.stackexchange.com/](https://wordpress.stackexchange.com/)

有一个默认小部件`custom menu`- 称为 - 您可以在其中选择要显示的菜单。
记得做一个单独的菜单

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T09:03:19.913

为隐藏页面创建一个自定义菜单

使用这个插件[从菜单中排除页面](http://wordpress.org/extend/plugins/exclude-pages/)

并检查了所有隐藏的页面，所以，这将只显示被检查的页面..

# javascript - 使用 .prototype 和 __proto__ 创建子类

> ID：10580158
> 
> 赞同：7
> 
> 时间：2012-05-14T08:53:21.877
> 
> 标签：javascript

我最近一直在通过编写一些 gnome shell 扩展来学习 javascript，因此我对 Javascript 的理解受到了我在 gnome-shell javascript 源代码中观察到的示例的影响。我有一种感觉，我一直在理解错误的类，只是想澄清一下。

我已经编写了一些自己的子类，并且在每种情况下，我都通过遵循 gnome-shell javascript 源代码中的类似代码来简单地定义它们：

```
Subclass = function() {
    this._init.apply(this,arguments);
}
Subclass.prototype = {
    __proto__: Superclass.prototype,
    _init: function() {
        Superclass.prototype._init.call(this);
    },
    // add other methods of Subclass here.
} 
```

到目前为止，我认为这是制作`Subclass`基本上是`Superclass`附加功能的课程的标准方式。我假设每个对象都有一个`_init`方法。

我最近尝试应用相同的方法来创建 a 的子类`Clutter.Actor`（重要的是它不是 GNOME-shell 定义的类），并意识到上述子类化对象的方式不是标准。一方面，并​​非每个类都具有`_init`我假设的功能。这只是 GNOME-shell 在他们的 javascript 类中所做的事情。

所以，**我的问题是**：

1.  是否有关于上述创建子类的方法的文档？我见过的所有教程都说要设置`Subclass.prototype = new Superclass()`而不是执行该`Subclass.prototype = { __proto__:Superclass.prototype, define_prototype_methods_here }`方法，但我的想法是，如果 gnome-shell 始终使用它，则必须有一些方法？
2.  如果我想尽可能地接近上述定义类的方式（这样我可以保留一些与我正在为其编写扩展的 GNOME-shell 的代码相似性），我应该**用什么替换`Superclass.prototype._init.call(this)`**以**确保**`Subclass._init`得到`Subclass.prototype`所有的方法/属性`Superclass`（然后我在我的定义中添加`Subclass.prototype`），如果`Superclass`没有`_init`函数（即它是否有一些我调用的等效构造函数）？

我真的对这一切感到困惑，所以如果我的问题没有多大意义，请原谅我；这将是因为我的误解和困惑的程度！

**编辑**：澄清： - 我知道`__proto__`不推荐，因为它是非标准的，但我的代码永远不会在浏览器中运行 - 它只会使用 GNOME javascript（基本上是 Mozilla javascript 引擎）运行，所以我不需要担心交叉兼容性。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-14T09:29:12.960

如前所述，不要使用`__proto__`. ~~这是一个非标准属性。~~ *（它现在在浏览器中已针对 JavaScript 进行了标准化。仍然不要使用它。）*但是

```
Subclass.prototype = new Superclass(); // Don't do this 
```

也不是一个很好的方法。如果`Superclass`期望参数怎么办？

你有更好的选择。

### ES2015 及以上

`class`为您处理所有这些管道；完整的例子：

```
class Superclass {
    constructor(superProperty) {
        this.superProperty = superProperty;
    }
    method() {
        console.log("Superclass's method says: " + this.superProperty);
    }
}
class Subclass extends Superclass {
    constructor(superProperty, subProperty) {
        super(superProperty);
        this.subProperty = subProperty;
    }
    method() {
        super.method(); // Optional, do it if you want super's logic done
        console.log("Subclass's method says: " + this.subProperty);
    }
}

let o = new Subclass("foo", "bar");
console.log("superProperty", o.superProperty);
console.log("subProperty", o.subProperty);
console.log("method():");
o.method();
```

### ES5 及更早版本

让我们只`Subclass.prototype`继承`Superclass.prototype`。例如，这可以通过 ES5 来完成`Object.create`：

```
Subclass.prototype = Object.create(Superclass.prototype);
Subclass.prototype.constructor = Subclass; 
```

然后在 中`Subclass`，您调用引用该对象`Superclass`，`this`以便它有机会初始化：

```
function Subclass() {
    Superclass.call(this); // Pass along any args needed
} 
```

完整示例：

```
function Superclass(superProperty) {
    this.superProperty = superProperty;
}
Superclass.prototype.method = function() {
    console.log("Superclass's method says: " + this.superProperty);
};
function Subclass(superProperty, subProperty) {
    Superclass.call(this, superProperty);
    this.subProperty = subProperty;
}
Subclass.prototype = Object.create(Superclass.prototype);
Subclass.prototype.constructor = Subclass;

Subclass.prototype.method = function() {
    Superclass.prototype.method.call(this); // Optional, do it if you want super's logic done
    console.log("Subclass's method says: " + this.subProperty);
};

var o = new Subclass("foo", "bar");
console.log("superProperty", o.superProperty);
console.log("subProperty", o.subProperty);
console.log("method():");
o.method();
```

### ES3 及更早版本

ES3 和更早的版本没有`Object.create`，但您可以轻松编写一个函数，以几乎相同的方式为您设置原型：

```
function objectCreate(proto) {
    var ctor = function() { };
    ctor.prototype = proto;
    return new ctor;
} 
```

（注意：你可以通过创建一个只接受一个参数的半垫片`Object.create`，但多参数版本的`Object.create`不能垫片，所以如果页面上的其他代码也使用`Object.create`.）

然后你做和我们的 ES5 例子一样的事情：

完整示例：

```
function objectCreate(proto) {
    var ctor = function() { };
    ctor.prototype = proto;
    return new ctor;
}

function Superclass(superProperty) {
    this.superProperty = superProperty;
}
Superclass.prototype.method = function() {
    console.log("Superclass's method says: " + this.superProperty);
};
function Subclass(superProperty, subProperty) {
    Superclass.call(this, superProperty);
    this.subProperty = subProperty;
}
Subclass.prototype = objectCreate(Superclass.prototype);
Subclass.prototype.constructor = Subclass;

Subclass.prototype.method = function() {
    Superclass.prototype.method.call(this); // Optional, do it if you want super's logic done
    console.log("Subclass's method says: " + this.subProperty);
};

var o = new Subclass("foo", "bar");
console.log("superProperty", o.superProperty);
console.log("subProperty", o.subProperty);
console.log("method():");
o.method();
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-08T14:33:30.657

虽然`__proto__`现在已经被标准化为在 Web 浏览器上使用时 JavaScript 的必需扩展，但在设置继承层次结构时没有理由使用它。

取而代之的是`Object.create`（一个 ES5 函数，如果你真的需要支持过时的浏览器，可以将其关键部分用于我们的目的）。

这是一个例子

```
var BaseClass = function() {
};

var SubClass = function() {
    // Important that SubClass give BaseClass a chance to init here
    BaseClass.call(this/*, args, if, necessary, here*/);

    // ...
};

// Make `SubClass`'s `prototype` an object that inherits from
// `BaseClass`'s `prototype`:
SubClass.prototype = Object.create(BaseClass.prototype);

// Fix up the `constructor` property
SubClass.prototype.constructor = SubClass; 
```

而已。

如果`BaseClass`的构造函数需要一个参数，则将参数传递给它`SubClass`：

这是一个例子

```
var BaseClass = function(arg) {
    this.prop = arg;
};

var SubClass = function(baseArg) {   // Can accept it, or provide a
    BaseClass.call(this, baseArg);   // hardcoded one here

    // ...
};

SubClass.prototype = Object.create(BaseClass.prototype);
SubClass.prototype.constructor = SubClass; 
```

* * *

当然，从 ES2015（又名“ES6”）开始，您可以只使用`class`（并在必要时进行转译）。

```
class BaseClass {
    constructor(arg) {
        this.prop = arg;
    }
}

class SubClass extends BaseClass {
    constructor(baseArg) {
        super(baseArg);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T09:16:16.053

`__proto__`永远不要在您的代码中使用它，因为 JavaScript 引擎实现使用它来引用对象类定义原型。参考：[MDN：`__proto__`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/proto)

1>

```
 Subclass.prototype = new Superclass(); 
```

是继承超类的正确方法。

2> 如果你想在子类上调用 _init，它实际上会执行超类的 _init 方法，那么不要在子类上定义它。当您尝试访问子类（子类的实例对象）上的 _init 方法时，JS 引擎会尝试在当前 obj 上查找它，如果未找到该方法，则在子类原型链（即超类）中进行搜索

如果要在子类方法中调用超类方法，请使用

```
Superclass.prototype._init.call(this) 
```

在当前对象范围内执行超级函数。这完成了在 SubClass 方法中调用 super 方法的技巧

# java - 阿特金筛 - 解释和 Java 示例

> ID：10580159
> 
> 赞同：32
> 
> 时间：2012-05-14T08:53:23.117
> 
> 标签：java, sieve-of-atkin

我在 Wikipedia 上阅读了有关 Atkin 筛子的信息，但目前该 wiki 是有限的。我一直在寻找对阿特金筛子的高级解释和 Java 中的示例。

谢谢。

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2012-08-22T04:22:07.043

您可能（并且可能确实）知道这里给出的关于素数、合数和筛子的一些基本概念，但它们可能有助于其他读者理解算法的本质。其中一些答案危险地接近于 StackOverflow 的数学等价物，但我觉得有必要在算法的作用和它的作用方式之间建立联系。

Wikipedia 文章中关于此筛的三个模算术和二次对源自 Atkin 和 Bernstein 论文中的三个对，该论文发表了带有定理（及其证明）的筛的核心，并表明它们共同构成了一个素数筛。任何一个都只会产生素数，但不会产生所有素数。需要全部三个才能产生所有素数。

这是一个实现维基百科算法的java程序。我对实现效率不做任何声明，只是说它是 Wikipedia 文章算法在 java 中的工作直接实现。

```
// SieveOfAtkin.java

import java.util.Arrays;

public class SieveOfAtkin {
private static int limit = 1000;
private static boolean[] sieve = new boolean[limit + 1];
private static int limitSqrt = (int)Math.sqrt((double)limit);

public static void main(String[] args) {
    // there may be more efficient data structure
    // arrangements than this (there are!) but
    // this is the algorithm in Wikipedia
    // initialize results array
    Arrays.fill(sieve, false);
    // the sieve works only for integers > 3, so 
    // set these trivially to their proper values
    sieve[0] = false;
    sieve[1] = false;
    sieve[2] = true;
    sieve[3] = true;

    // loop through all possible integer values for x and y
    // up to the square root of the max prime for the sieve
    // we don't need any larger values for x or y since the
    // max value for x or y will be the square root of n
    // in the quadratics
    // the theorem showed that the quadratics will produce all
    // primes that also satisfy their wheel factorizations, so
    // we can produce the value of n from the quadratic first
    // and then filter n through the wheel quadratic 
    // there may be more efficient ways to do this, but this
    // is the design in the Wikipedia article
    // loop through all integers for x and y for calculating
    // the quadratics
    for (int x = 1; x <= limitSqrt; x++) {
        for (int y = 1; y <= limitSqrt; y++) {
            // first quadratic using m = 12 and r in R1 = {r : 1, 5}
            int n = (4 * x * x) + (y * y);
            if (n <= limit && (n % 12 == 1 || n % 12 == 5)) {
                sieve[n] = !sieve[n];
            }
            // second quadratic using m = 12 and r in R2 = {r : 7}
            n = (3 * x * x) + (y * y);
            if (n <= limit && (n % 12 == 7)) {
                sieve[n] = !sieve[n];
            }
            // third quadratic using m = 12 and r in R3 = {r : 11}
            n = (3 * x * x) - (y * y);
            if (x > y && n <= limit && (n % 12 == 11)) {
                sieve[n] = !sieve[n];
            } // end if
            // note that R1 union R2 union R3 is the set R
            // R = {r : 1, 5, 7, 11}
            // which is all values 0 < r < 12 where r is 
            // a relative prime of 12
            // Thus all primes become candidates
        } // end for
    } // end for
    // remove all perfect squares since the quadratic
    // wheel factorization filter removes only some of them
    for (int n = 5; n <= limitSqrt; n++) {
        if (sieve[n]) {
            int x = n * n;
            for (int i = x; i <= limit; i += x) {
                sieve[i] = false;
            } // end for
        } // end if
    } // end for
    // put the results to the System.out device
    // in 10x10 blocks
    for (int i = 0, j = 0; i <= limit; i++) {
        if (sieve[i]) {
            System.out.printf("%,8d", i);
            if (++j % 10 == 0) {
                System.out.println();
            } // end if
            if (j % 100 == 0) {
                System.out.println();
            } // end if
        } // end if
    } // end for
} // end main
} // end class SieveOfAtkin 
```

我有一份阿特金（与伯恩斯坦合着）的原始论文，他在其中描述了构造筛子的定理。该论文可在此处获得：[http](http://www.ams.org/mcom/2004-73-246/S0025-5718-03-01501-1/S0025-5718-03-01501-1.pdf) ://www.ams.org/mcom/2004-73-246/S0025-5718-03-01501-1/S0025-5718-03-01501-1.pdf 。这是非数学家的密集阅读，并且具有美国数学学会论文的所有典型简洁性。

下面是对算法是如何从阿特金和伯恩斯坦的描述和论文中推导出来的更深入的解释。

Atkin 和 Bernstein（有理由地）假设他们的读者完全理解素数筛、模运算和使用模运算的轮因式分解。不幸的是，维基百科的文章描述和算法假设了类似的事情，尽管程度略低。Atkin 和 Bernstein 没有声称他们的三对轮因式分解和不可约二次方程是唯一可以使用的，并给出了其他可以使用的对的示例，而没有进一步评论如何使用。因此，阿特金和伯恩斯坦给出定理和证明的三个是基于他们工作的算法中使用的三个。阿特金和伯恩斯坦也没有声称他们的三对是最优的。显然，它们是方便的。

以简洁的方式对此类讨论真正有用的时髦数学符号在此处不可用。出于此答案的目的，我将使用

> { 一些定义一个的枚举集或属性 }

表示一个集合

> Nat0

表示包含零的自然数集合，即 Nat0 = {0, 1, 2, ...}，

> 纳特

表示不包括零的自然数集合，即 Nat = {1, 2, 3, ...} 和以下用于定义集合的构造和它的元素的符号：

> {集合元素的符号：根据符号定义集合的标准}
> 
> #

表示集合基数，即集合中元素的数量

> ^

表示取幂，即 x 平方写为 x^2

描述、定理和算法中的轮因式分解中使用的模运算以两种等效形式出现：

> n = (k * m) + r for k in Nat0 and r in R = {r : r in Nat0 and r < m}
> 
> n mod m = r 其中 r in R = {r : r in Nat0 and r < m}

以下是他们论文中定理中给出的定义以及关于模算术形式的一些注释：

1.  n 始终是素数，其中 #{(x, y) : n = (4 * x^2 )+ (y^2), n in {n : (Nat0 * 4) + 1}，其中 x 和 y >= 1并且 n 没有完美的平方因子} 是奇数。也就是说，当且仅当有奇数对 (x, y) 对求解二次 n = (4 * x^2) + (y^2) 其中 x 和 y 整数 >= 1, n mod 4 = 1 且 n 没有完全平方因数，则 n 是素数。请注意，形式 n mod m = r 其中 r 在 R 中具有 m = 4 和 R = {r : 1}。

2.  n 总是素数，其中 #{(x, y) : n = (3 * x^2) + (y^2), n in {n : (Nat0 * 6) + 1}，其中 x 和 y >= 1并且 n 没有完美的平方因子} 是奇数。也就是说，当且仅当有奇数对 (x, y) 对求解二次 n = (3 * x^2) + (y^2) 其中 x 和 y 整数 >= 1, n mod 6 = 1 且 n 没有完全平方因数，则 n 是素数。注意这里的形式 n mod m = r 其中 r 在集合 R 中有 m = 6 和 R = {r : 1}。

3.  n 总是素数，其中 #{(x, y) : n = (3 * x^2) - (y^2), {n : (Nat0 * 12) + 11}, x > y >= 1 并且 n 有没有完美的平方因子}是奇数。也就是说，当且仅当有奇数对 (x, y) 对求解二次 n = (3 * x^2) - (y^2) 其中 x , y 整数 where x > y >= 1 , n mod 12 = 11 且 n 没有完全平方因数，则 n 是素数。注意这里的形式 n mod m = r 其中 r 在集合 R 中有 m = 12 和 R = {r : 11}。

论文和维基百科文章假设读者很清楚的轮式分解的一个属性是，可以使用模算术来选择性地仅选择不具有某些素因数的整数。在表格中

> n mod m = r, r in R = {r : Nat0, r < m},

如果只选择 R 中与 m 互质的元素，那么满足表达式的所有整数 n 要么是质数，要么与 m 互质。

m 与 n 互质表示它们没有共同的整数除数 > 1。互质数的示例有：2 与 3 互质，4 与 9 互质，9 与 14 互质。理解这一点对于理解模算术中使用的余数（残差）以及它们在各种版本的解释和算法中的等效性。

下面将解释这些定理、算法和解释是如何相互关联的。

对于第一个二次方，n = (4 * x^2) + (y^2)：

该定理使用以下形式：

> n = (k * 4) + r 其中 R1 中的 r = {r : 1} 和 Nat0 中的 k

这和写作一样

> n mod 4 = r 其中 R1 中的 r = {r : 1}

请注意，它将 n 定义为必须是 Nat0 中从 1 开始的每隔一个奇数，即 {1, 5, 9, 13, ...}。

对于算法，可以对 m 做出各种选择，并且在正确的集合 R 下，定理所示的属性得以保留。这篇论文和维基百科文章的作者假设读者已经知道所有这些并且会立即认出它。对于论文和维基百科文章中使用的其他 m 值，等价物是：

> n mod 12 = r 其中 R1a 中的 r = {r : 1, 5, 9}
> 
> n mod 60 = r 其中 R1b 中的 r = {r : 1, 5, 9, 13, 17, 21, 25, 29, 33, 37, 41, 45, 49, 53, 57}

集合 R1a 和 R1b 中的某些元素可以被删除，原因有两个，后面会解释，这个定理仍然适用。

对于第二个二次方，n = (3 * x^2) + (y^2)：

该定理使用以下形式：

> n = (k * 6) + r 其中 R2 中的 r = {r : 1} 和 Nat0 中的 k

这又是一样的

> n mod 6 = r 其中 R2 中的 r = {r : 1}

这里注意，这是从 1 开始的 Nat0 中每隔三个奇数，即 {1, 7, 13, 19, ...}

论文和文章中的等价物是：

> n mod 12 = r 其中 R2a 中的 r = {r : 1, 7}
> 
> n mod 60 = r 其中 R2b 中的 r = {r : 1, 7, 13, 19, 25, 31, 37, 43, 49, 55}

同样，集合 R2a 和 R2b 中的值可能会因为后面解释的两个原因而被删除，并且该定理仍然适用。

对于第三个二次方，(3 * x^2) - (y^2)：

该定理使用以下形式：

> n = k * 12 + r 其中 Nat0 中的 k 和 R3a 中的 r = {r : 11}

同样，这与以下内容相同：

> n mod 12 = r 其中 R3a 中的 r = {r : 11}

这里注意，这是从 11 开始的 Nat0 中每六个奇数，即 {11, 23, 35, 47, ...}

论文和文章的等价物是：

> n mod 60 = r 其中 R3b 中的 r = {r : 11, 23, 35, 47, 59}

同样，出于稍后解释的原因，可以删除集合 R3b 中的值，并且该定理仍然适用。

在各种算法和解释中，对于 m = 12 和 m = 60 的值，集合 R 的元素被删除，而不影响定理或算法的有效性。集合 R 中的某些值可能被丢弃有两个原因。

第一个原因是，集合 R 中的任何 r 值如果与其配对的 m 不互质，则仅用于包含 n 的值，这些值是具有一个或多个 m 的质因数的复合整数，其中没有一个将是素数。模算术的这一特性就是为什么使用轮因式分解从进一步的测试中过滤掉大量的非质数，通常是更复杂和效率更低的测试，以确定它们是否是质数。在这个筛子中，更复杂的测试是特定不可约二次方程的解数是否为奇数。这意味着我们可以立即丢弃该算法的集合 R 中的所有值，这些值与与该集合 R 一起使用的 m 的值不是相对质数。

第二个原因是在论文中，轮因式分解创建了重叠的整数集，包括重叠的素数。虽然它们很方便，并且重叠对于定理并不重要，但在算法中，如果可以轻松避免，那就是浪费了。在这种情况下，可以轻松避免。此外，如果车轮因式分解的整数集重叠，则一个二次方程中的奇数解加上另一个二次方程中的奇数解将变成累积偶数解（奇数加奇数总是偶数）。在许多实现中，包括 Wikipedia 实现，这将识别素数作为非素数，因为像 Wikipedia 这样的实现从所有二次方程的累积解决方案中确定素数并且不' t 从每个二次方中分离解。在这些情况下，来自轮因式分解的整数必须是整数的独占子集。

如果没有必要，实现不希望在多个二次方中测试相同的数字，而事实并非如此。在三个二次方中使用的集合 R 中的 r 值，假设使用相同的 m，只需要在其中一个中。如果它不止一个，那么 n 的相同值将出现不止一次，并使用多个二次方进行测试。对于使用的相同 m 值，确保 R 的相同元素不会出现在 R 中超过一个二次方将消除重叠。在 Wikipedia 文章的情况下，轮因式分解防止的重叠防止了累积二次解可能出现的错误结果，这些解在单个二次解中是奇数，但在两个二次解中累积为偶数。

在计算二次方之前，不同的算法可能会避免重叠。在二次方程和车轮分解的经验测试中，m = 12 的车轮分解产生的 n 值明显少于求解二次方程的值。使用 m = 60 的车轮分解会显着增加差异。如果针对特定 n 值的二次求解算法是高效的，那么通过仅使用来自车轮因式分解的值来测试二次方可能会有显着的改进。

这是去除非质数元素后的轮分解。对于第一个二次方：

> n mod 12 = r 其中 R1a 中的 r = {1 : 1, 5} （9 的除数 3 与 12 相同）
> 
> n mod 60 = r 其中 R1b 中的 r = { r : 1, 13, 17, 29, 37, 41, 49, 53} （5、25 和 45 具有与 60 相同的除数 5；9、21、33、45 和57 的除数 3 与 60 相同），这是 Atkin 和 Bernstein 论文中算法的形式。

对于第二个二次方：

> n mod 12 = r 其中 R2a 中的 r = {1, 7}（R 的任何元素都没有与 12 相同的除数}
> 
> n mod 60 = r 其中 R2b 中的 r = {r : 1, 7, 13, 19, 31, 37, 43, 49}（25 和 55 的除数 5 与 60 相同），这是算法中的形式阿特金和伯恩斯坦论文。

对于第三个二次方：

> n mod 12 = r 其中 R3a 中的 r = {r : 11} （R 的任何元素都没有与 12 相同的除数}
> 
> n mod 60 = 4 其中 R3b 中的 r = {r : 11, 23, 47, 59}（35 的除数为 5，与 60 相同），这是 Atkin 和 Bernstein 论文中算法的形式。

请注意，对于第一个和第二个二次方程，一些相同的元素出现在集合 R1a 和 R2a 中。对于集合 R1b 和 R2b 也是如此。m为12时，公共元素的集合为{1}；当 m 为 60 时，公共元素的集合是 {1, 13, 37, 49}。确保仅包含一个二次方的 R 元素会创建以下形式，您现在应该从 Wikipedia 文章中认出这些形式。

对于第一个二次方：

> n mod 12 = r where r in R1a = {r : 1, 5}（不删除重复项）（这是维基百科算法中显示的形式）
> 
> n mod 60 = r where r in R1b = {r : 1, 13, 17, 29, 37, 41, 49, 53}（不删除重复项）（这是维基百科解释中显示的形式）

对于第二个二次方：

> n mod 12 = r where r in R2a = {r : 7} （删除元素 1，因为它已经在 R1a 中）（这是维基百科算法中显示的形式）
> 
> n mod 60 = r where r in R2b = {r : 7, 19, 31, 43}（删除元素 1、13、37 和 49，因为它们已经在 R1b 中）（这是维基百科解释中显示的形式）

对于第三个二次方：

> n mod 12 = r 其中 R3a 中的 r = {r: 11}（无重复）
> 
> n mod 60 = r 其中 R3b 中的 r = {r: 11, 23, 47, 59}（无重复）

剩下的一个问题可能是为什么 m 的值在 4、6、12 和 60 的范围内。这与一个人想要从更复杂的测试中排除多少复合（即非素数）数有关，使用二次方程与使用的车轮分解的复杂性。

使用的 m 值可以确定哪些组合可以立即消除而无需消除素数。如果 m = 4 且 R1 = {r : 1}，如在第一个二次的定理中，所有素因数为 2 的数都被消除，因为 1 与所有数互质，而 4 的素因数为 2。这很重要需要注意的是，因为 3 不在这个集合 R 中，所以使用 m = 4 和集合 R1 的轮因式分解也将排除大量素数，可能是其中的一半。

如果 m = 6 和 R2 = {r : 1}，如第二个二次的定理，则所有素因数为 2 或 3 的合数都将被消除，因为 1 与所有数互质，而 6 的素因数为 2 和 3 . 同样，当 m = 6 并设置不包含 5 的 R2 时，将排除大量素数，也许其中的一半。

如果 m = 12 且 R3 = {r : 11} 与第三次二次的定理一样，则所有素因数为 2 或 3 的合数都将被消除，因为 11 与 12 互质，而 12 的素因数为 2 和 3。同样，当 m = 12 并设置不包含 1、5 或 7 的 R3 时，将排除大量素数，可能超过一半。

Atkin 和 Bernstein 在他们的论文中非正式地表明的一件事是，尽管定理中的轮因式单独排除了它们各自二次方程中的素数，但总的来说，三轮因式分解允许所有素数，并且在轮因式分解的情况下第一个和第二个二次方程允许显着重叠。尽管他们没有删除算法中 m = 60 的重叠，但维基百科文章确实在他们在文章算法中设置 m = 12 和在文章解释中设置 m = 60 的地方。

对于阿特金和伯恩斯坦在他们的定理中使用的二次方程，削弱与他们一起使用的轮因式分解将使它们​​根据定理运行无效。但是，我们可以通过仅删除更多复合材料但仍保持完全相同的素数的方式来加强它们。对于 m = 4 的形式，(4 = 2 * 2) 每个偶数整数都会被过滤。对于 m = 12 (12 = 2 * 2 * 3) 的形式，每个素因数为 2 或 3 的整数都会被过滤。对于 m = 60 (60 = 2 * 2 * 3 * 5) 的形式，质因数为 2、3 或 5 的每个整数都会被过滤。我们可以使用 m = 6 的过滤器来获得与 m = 12 相同的效果，m = 30 来获得与 m = 60 相同的效果，但我们必须小心我们创建的内容与在定理。

这里有一些关于车轮分解的有用统计数据。Nat0 中 50% 的整数是偶数，除 2 外，不是素数。Nat0 中 33% 的整数以 3 作为质因数且不是质数。Nat0 中 20% 的整数以 5 作为质因数且不是质数。总的来说，Nat0 中 67% 的整数具有 2 或 3 的质因数并且不是质数。总的来说，Nat0 中大约 75% 的整数具有 2、3 或 5 的质因数并且不是质数。从更复杂的素数测试中消除 Nat0 中整数的 1/2、2/3 或 3/4 的简单方法非常诱人，并且是使用轮因式分解作为素数筛中的初步过滤器的动机。这也是使用 m 值和伴随集合 R 的动机，该集合 R 可以过滤所有具有代表大量复合材料的素因子的复合材料。

作为绝对最小值，人们会想要删除素因数为 2（即所有偶数）的复合数，然后在最后加回 2。一个人至少会喜欢去除素因数为 2 或 3 的复合物。最好是去除素因数为 2、3 或 5 的复合物。除此之外，统计数据显示收益递减。m = 4 和 R1 达到了最低限度。m = 12 与 R1a、R2a 和 R3a 一起完成最少的一项。m = 60，R1b、R2b 和 R3b 实现了非常理想的结果。

在处理 m 和集合 R 的值时，还有一些事情需要考虑。请注意，这两种形式对于第一个二次方不等价：

> n mod 12 = r 其中 R1a 中的 r = {r : 1, 5}

和

> n mod 6 = r 其中 R 中的 r = {r : 1, 5}

因为 m = 6 的形式不等于

> n mod 4 = r 其中 R1 中的 r = {r : 1}

注意：

> n mod 6 = r 其中 R 中的 r = {r : 1}

相当于

> n mod 12 = r 其中 R 中的 r = {r : 1, 7}

m = 6 的形式可以与第二个二次方一起使用。事实上，它是与定理中的第二个二次方一起使用的形式。如果我们使用它来代替已经考虑过的示例，我们可以在第一个二次方的 m = 12 时从集合 R 中删除元素 1 以消除重叠。

在调整算法时，必须尽职尽责地保持定理所需的条件。在选择 m 的值和 R 的集合时，必须确保该形式是等价的，不会将 n 的任何新值引入二次方，这些新值不是由定理中的轮因式分解产生的。

对于实现，根据涉及数据结构、算术、处理器能力（尤其是乘法和除法）、可用处理器高速缓存、内存和数据结构大小的复杂性和效率做出选择。在 m 的值和必须检查的集合 R 中的余数（残数）之间存在权衡。其中一些可能是在解释中看到 m = 60 而在算法中看到 m = 12 的原因。这无疑是 Atkin 和 Bernstein 在他们的论文中的算法中使用 m = 60 的形式的原因。

在 Atkin 和 Bernstein 的论文中，他们还提供了算法，用于使用格子找到特定 n 值的二次方程的解。这些额外的算法使 Atkin 和 Bernstein 能够创建同时过滤二次和轮分解​​的筛算法。Wikipedia 文章的算法中没有考虑使用车轮分解的二次方程的格派生解的算法。在 Wikipedia 文章中，详尽的 x、y 值技术与二次方一起使用，并且在二次方返回 n 值之后应用车轮分解。同样，这是一个必须由实施者决定的效率问题。

# opengl - 将半透明精灵渲染到纹理

> ID：10580163
> 
> 赞同：0
> 
> 时间：2012-05-14T08:53:33.333
> 
> 标签：opengl, opengl-es, opengl-es-2.0

我有一个 1024x1024 背景纹理，我正在尝试将 100x100 精灵（也存储在纹理中）渲染到背景纹理的左下角。

我想以 50% 的不透明度渲染精灵。这需要在 CPU 中完成，而不是在使用着色器的 GPU 中完成。我发现的大多数示例都是使用着色器来实现这一点。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T10:26:04.037

我想您的意思是来自 CPU 端的 opengl 命令，因此使用固定功能（或固定管道）。我从“无着色器”请求中推断出这一点。因为“在 CPU 上执行此操作”实际上意味着对纹理进行检索/映射以在 CPU 上访问它，循环像素，然后使用 glTexImage 将结果复制回图形卡或取消映射纹理。最后一种方法效率极低。所以你只需要激活混合。

```
 glEnable(GL_BLEND);
    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA); 
```

并按顺序渲染：背景，然后是带有 100x100 图像的小四边形。它将从您的 100x100 图像中获取 Alpha 通道来进行混合。您可以通过图像编辑工具将其设置为恒定的 50%。

# mysql - 通过mysql查询计算搜索关键字在搜索功能中的相关性

> ID：10580165
> 
> 赞同：0
> 
> 时间：2012-05-14T08:53:41.117
> 
> 标签：mysql, search, count, relevance

我需要计算搜索字段中搜索关键字的重复次数。

例如，如果我有这样的表 wp_posts

```
 ID       post _content     post_title 
-----------------------------------------------
     1      page page page     page
     2      page test          page
     3      page foo           test 
```

如果有人搜索页面，我想要结果

```
ID  total count
1    4
1    2
2    1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T09:29:01.520

尝试这个

```
SELECT  id ,
                FLOOR(( (length(REPLACE(post_content, '', ''))
                        - length(REPLACE(REPLACE(post_content, ' ', ''),
                                         'page', ''))) ) / length('page'))
                + FLOOR(( (length(REPLACE(post_title, ' ', ''))
                          - length(REPLACE(REPLACE(post_title, '
 ', ''), 'page', ''))) ) / length('page')) "count of 'page'"
        FROM    page_search ; 
```

# c# - 单击菜单项时如何调用mousedown事件？

> ID：10580175
> 
> 赞同：-1
> 
> 时间：2012-05-14T08:54:00.230
> 
> 标签：c#, menuitem

我正在用 c# 制作一个关于图像处理的项目，我的表单和菜单条中有一个图片框，其中包含可以应用于图像的各种选项（操作）（例如模糊、棕褐色、对比度等）。我正在考虑实施裁剪控件，并将其作为菜单项包含在内。

我想要的是每当我从菜单条单击裁剪选项时，它会触发图片框的鼠标按下、鼠标移动和鼠标向上事件，以便可以执行裁剪。

这是此链接中的裁剪代码：http: [//www.codeproject.com/Articles/30725/Cropping-Images](http://www.codeproject.com/Articles/30725/Cropping-Images)

问题是如何仅在单击菜单项时实现裁剪控件。每当用户单击图片框而不是当有人单击菜单项或说出按钮本身时，上述链接上的代码就会触发。

提前感谢您的帮助....

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-14T08:58:42.757

您应该将裁剪代码从事件处理程序中抽象出来，并抽象到一些也包含图像的图像处理类中。然后，您可以将 mousemove 事件连接到特定的裁剪调用中，例如：

```
public void MouseMoved(object sender, EventArgs e)
{
     SomeImage.Crop(e.X, e.Y);
} 
```

但是，当您希望单击处理程序进行裁剪时，您将裁剪到什么坐标？您必须做出决定，然后在您的菜单点击处理程序中实现它：

```
public void CropMenuClicked(object sender, EventArgs e)
{
    // TODO: determine someX and someY
    SomeImage.Crop(someX, someY);
} 
```

# c# - 如何进行逆墨卡托投影

> ID：10580179
> 
> 赞同：1
> 
> 时间：2012-05-14T08:54:15.097
> 
> 标签：c#, math, geospatial, latitude-longitude, mercator

这是我开始编写的一些代码，墨卡托投影基于[此答案](https://stackoverflow.com/a/1020681/1197407)。

```
using System;
using System.Drawing;

namespace CoordinatesTool
{
    public class GeoPoint
    {
        public double Longitude { get; set; }
        public double Latitude { get; set; }

        public string ToString()
        {
            return Latitude + "," + Longitude;
        }

        public PointF ToMercator(int width, int height)
        {
            var x = (float)((Longitude + 180) * width / 360);

            var latRadians = Latitude * Math.PI / 180;
            var yTransformed = Math.Log(Math.Tan((latRadians / 2) + (Math.PI / 4)));
            var yScaled = (float)((height / 2.0) - (width * yTransformed / (2 * Math.PI)));

            return new PointF(x, yScaled);
        }

        public static GeoPoint FromMercator(PointF point, int width, int height)
        {
            return FromMercator(point.X, point.Y, width, height);
        }

        public static GeoPoint FromMercator(double x, double y, int width, int height)
        {
            // No clue what to do here
        }
    }
} 
```

我的目标是在 WinForms 应用程序中使用这个实用程序类。我在这张地图上使用它： [http](http://en.wikipedia.org/wiki/File:Mercator-projection.jpg) ://en.wikipedia.org/wiki/File:Mercator-projection.jpg （宽度：2048，高度：1588）。

墨卡托反演工作得很好（但是，我怀疑它在北极/南极地区不是很准确）。

但是墨卡托逆投影真的让我很困惑。[我玩弄了另一个问题](https://stackoverflow.com/q/1166059/1197407)中提出的解决方案，但无处可去。特别是我不了解 Gudermannian（和逆）函数、DEGREES_PER_RADIAN 和 RADIANS_PER_DEGREE 常量，以及我应该如何将 y 值转换为纬度以调用 GudermannianInv() 函数。

编辑：这是我尝试如何进行逆投影的方法：

从 yScaled（FromMercator 函数中的参数 y）开始：

```
var yTransformed = 2 * Math.PI * (height / 2.0 - yScaled) / width;
var latRadians = Math.Arctan(Math.Pow(Math.E, yTransformed) - Math.PI / 4) / 2;
// ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T09:17:15.243

以下是您寻求的一些内容：

1.  `radians * degrees/radians == degrees`：degrees_per_radian 只是用`degrees/radians`“英语”而不是“数学”表达的一种方式。radians_per_degree 留给读者作为练习。所以这两个常数表示在角度和弧度之间转换时使用的数字。

2.  查看您发布的代码，您可以将这些行转换`latRadians`为 y。实现代码来反转这些操作看起来很简单。你需要'un'-scale 和'un'-transform 'yScaled'。例如，处理线（部分）：

    `yScaled = ((height / 2.0) - (width * yTransformed / (2 * Math.PI)))`

    作为一个数学方程，您需要`yTransformed`根据`yScaled`.

3.  至于Gudermannian，您提到的问题在一行代码中实现，而逆Gudermannian 在3 行中实现。Gudermannian 只是一种将圆形测量（例如以度或弧度为单位的测量）转换为线性测量（例如要在纸上发表的图表上以厘米为单位的测量）的一种方法。特别是，与此相关的是，古德曼算子会将纬度转换为从 0 开始的线性距离。

**编辑**

好的，所以看起来更近一点，在您的原始代码中，您将纬度从角度测量转换为线性测量：

```
yTransformed = Math.Log(Math.Tan((latRadians / 2) + (Math.PI / 4))) 
```

我认为您可能应该将其替换为对反向 Gudermannian 的调用，如您链接到的问题的答案所示。我怀疑您自制的转换在 tan/arctan 函数中遇到了极值点。然后，您当然会在非转换中使用直接的古德曼式。

# asp-classic - ASP 格式化日期

> ID：10580185
> 
> 赞同：5
> 
> 时间：2012-05-14T08:54:34.833
> 
> 标签：asp-classic

您好，我正在尝试让 ASP 中的日期以特定格式 (yyyymmdd) 显示。这是我迄今为止尝试过的，但没有运气。任何帮助表示赞赏。谢谢

```
<tr>
    <td><b>Call Date</b></td>
    <% for i = -6 to 0 %>
        <td align=center>
            <a href="20a.asp?cldate=<% response.write(DateTime.Date()+i.ToString("yyyyMMdd")) %>" target="_blank">X</a>
        </td>
    <% Next %>
</tr> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-14T09:39:37.853

您可以使用以下功能：

```
Year(Now) '' Year in 4 digits
Month(Now) '' Month without leading zero
Day(Now) '' Day of the month without leading zero

DateAdd("d", <numofdays>, Now) '' add a number of days to your date 
```

[在此处](http://www.w3schools.com/vbscript/vbscript_ref_functions.asp)阅读有关这些（和其他日期函数）功能的更多信息。

如果您需要添加前导零：

```
function addLeadingZero(value)
    addLeadingZero = value
    if value < 10 then
        addLeadingZero = "0" & value
    end if
end function 
```

您的情况的一个例子是：

```
Dim today, myDate

today = Now

for i = -6 to 0
    myDate = DateAdd("d", i, today)

    response.write "<a href=""20a.asp?cldate=" & Year(myDate) & addLeadingZero(Month(myDate)) & addLeadingZero(Day(myDate)) & """ target=""_blank"">X</a>"
next 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-20T10:55:36.797

很抱歉挖掘这个，但它可能对某些人有帮助。而不是“如果<10然后添加前导零”逻辑，我经常使用正确的命令并总是添加前导零......

```
response.write "<a href=""20a.asp?cldate=" & Year(myDate) & Right("0" & Month(myDate), 2) & right("0" & Day(myDate), 2) & """ target=""_blank"">X</a>" 
```

..这样就不需要单独的函数了，一行就可以搞定。我不能说它的效率，但它似乎合乎逻辑。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-01T05:04:45.533

ASP 从操作系统而不是从数据库中获取日期，这是一个常见错误，但可以通过以下方式解决：

```
<%
' Date dd/mm/yyyy
Session.lcid=2057 '= UK English
%> 
```

我希望它可以帮助人们。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-01-21T08:24:13.763

你可以试试。100% 测试！

```
 <% 
     mm = Month(now())
     dd = Day(now())
     yy = Year(now())
     IF len(mm) = 1 THEN
       mm = "0" & mm
     END IF
     IF len(dd) = 1 THEN
       dd = "0" & dd
     END IF
     response.write(yy & "/" & mm & "/" & dd) 
  %> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-14T09:04:51.093

```
 <%= DatePart("yyyy", Now) & "/" & DatePart("m", Now) & "/" & DatePart("d", Now) %> 
```

另请参阅

[http://www.w3schools.com/vbscript/vbscript_ref_functions.asp](http://www.w3schools.com/vbscript/vbscript_ref_functions.asp)

[http://www.mikesdotnetting.com/Article/22/Date-formatting-in-VBScript](http://www.mikesdotnetting.com/Article/22/Date-formatting-in-VBScript)

谢谢

迪普

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-06-01T01:42:51.183

```
Mid(date(), 7,4) & "-" & Mid(date(), 4,2) & "-" & Left(date(), 2) 
```

# iphone - 如何在 HTML 中显示表情符号字符

> ID：10580186
> 
> 赞同：23
> 
> 时间：2012-05-14T08:54:42.733
> 
> 标签：iphone, ios, unicode, emoji, emoticons

我把脸“品尝美味的食物表情符号”保存到数据库中，并在显示“uD83D\uDE0B”的php json_encode中读取。但通常我们使用一个`<img />`标签来替换它。但是，通常我只是发现这种格式 '\uE056' 而不是 "uD83D\uDE0B"，用 pic E056.png 替换。

我不知道如何让图片符合“uD83D\uDE0B”。有人知道吗？

'uD83D\uDE0B' 和 '\uE056' 是什么关系，都代表“品尝美食”的表情符号？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-14T09:23:50.577

Unicode字符U+1F60B FACE SAVORING DELICIOUS FOOD是所谓的Plane 1字符，也就是说它的UTF-16编码形式由两个16位的编码单元组成，即0xD83D 0xDE0B。通常，Plane 1 字符会引起相当大的问题，因为许多程序没有准备好处理它们，而且很少有字体包含它们。

根据[http://www.fileformat.info/info/unicode/char/1f60b/fontsupport.htm](http://www.fileformat.info/info/unicode/char/1f60b/fontsupport.htm)这个特殊字符只存在于 DejaVu 字体和 Symbola 中，但我使用的 DejaVu 版本不包含它。

`&#x1f608;`您可以使用HTML 中的字符引用，而不是处理编码问题（这并不难，但需要额外的信息） 。但这并不能解决字体问题。我不知道 iPhone 字体，但一般来说，在网页浏览中，计算机拥有能够呈现字符的任何字体的几率可能低于 1%。因此，您可能需要使用可下载的字体。使用图像显然要简单得多，而且更可靠。

U+E056 是一个私人使用代码点，这意味着任何人都可以与他的兄弟或自己就其含义达成协议，而无需询问其他人的想法。字体设计者可以为其分配任何字形。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-23T22:41:04.293

重要提示：截至本文发布时，唯一不自动支持表情符号的浏览器是 chrome。

FOR CHROME：根据您使用的服务器端语言，您应该能够找到一个为您转换表情符号的库。我最近需要用 php 解决这个问题并使用了这个库：

[https://github.com/iamcal/php-emoji](https://github.com/iamcal/php-emoji)

创建者本质上创建了一个精灵并根据表情符号的 unicode 调整 css。这并不漂亮，但幸运的是他/她为你做了所有的繁重工作。如果您使用不同的语言，您应该能够找到类似的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T09:01:19.183

如何将这些小盒子放入 php 文件中？

与任何其他 Unicode 字符相同。只需粘贴它们并确保您保存 PHP 文件并将 PHP 页面提供为 UTF-8。

当我把它放到一个php文件中时，它变成了问号，什么不是

然后你有一个编码问题。在担心表情符号之前，首先使用您实际上可以正确看到的 Unicode 字符进行计算，例如 ąαд™日本。

您的 PHP 文件应保存为 UTF-8；它产生的页面应该被用作`Content-Type: text/html;charset:UTF-8`（或具有类似的元标记）；MySQL 数据库应该使用 UTF-8 排序规则来存储数据，PHP 应该使用 UTF-8 与 MySQL 对话。

然而。即使像这样正确处理所有内容，PC 仍然不会显示表情符号。那是因为：

他们没有包含这些字符形状的字体，并且

表情符号仍然完全不标准化。您发布的那些字符在 Unicode Private Use Area 中，这意味着它们根本没有任何官方含义。

日本的每个网络都为其表情符号使用不同的字符代码，映射到 PUA 中的不同区域。因此，即使在另一部手机上，它也可能不会显示正确的字符，除非您花费很长时间手动转换不同网络的表情符号代码。我猜你上面发布的那些来自软银（iPhone？）。

由谷歌和苹果牵头的一项正在进行的提议是整理不同网络的表情符号，并在 Unicode 中给它们一个适当的标准化位置。在那之前，让表情符号在网络上持续显示是一种不快乐的练习。请参阅标准化工作中的[角色概述](http://unicode.org/~scherer/emoji4unicode/snapshot/utc.html)，了解您需要进行多少转换。

上帝，我讨厌表情符号。对于这么多无用的twee垃圾，所有的痛苦。

# objective-c - CoreData - 找不到 NSManagedObjectModel

> ID：10580188
> 
> 赞同：0
> 
> 时间：2012-05-14T08:54:55.057
> 
> 标签：objective-c, core-data

我收到下面的错误，我不知道我做错了什么。

我猜有无法定位的托管对象，但是... arf ！

```
 *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: '+entityForName: could not locate an NSManagedObjectModel for entity name 'Boxes'' 
```

这是我的.m（只有两个主要功能）

```
 - (void)loadCoreData
{
    [[NSNotificationCenter defaultCenter] postNotificationName:@"Test" object:self];
    context = [app managedObjectContext];
    NSError *err;

    // GET THE JSON
    NSString *urlString = [NSString stringWithFormat:@"http://localhost:8888/json.txt"];
    NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:urlString]]; 
    NSMutableArray *json = (NSMutableArray* )[NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&err];
    // FILL THE ENTITY
    for (int i = 0; i != 7; i++)
    {
        Boxes *boxes = [NSEntityDescription insertNewObjectForEntityForName:@"Boxes" inManagedObjectContext:context];

        boxes.name =   [[[json valueForKey:@"boxesDetail"] objectAtIndex:i] valueForKey:@"name"] ;
        boxes.sexe =   [[[json valueForKey:@"boxesDetail"] objectAtIndex:i] valueForKey:@"sexe"] ;
        boxes.topic =   [[[json valueForKey:@"boxesDetail"] objectAtIndex:i] valueForKey:@"topic"] ;
        boxes.number = [NSNumber numberWithInt:[[[[json valueForKey:@"boxesDetail"] objectAtIndex:i] valueForKey:@"number"] intValue]];
    }
    request = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Boxes" inManagedObjectContext:context];
    [request setEntity:entity];    
    arrayForPredicate = [context executeFetchRequest:request error:&err];
}

- (void) fillSexArray:(NSString *)sexe
{

    // PREDICATE TO GET AN ARRAY OF PRODUCT WITH SEXE EQUAL TO 
    NSPredicate *sex;

    if ([sexe isEqualToString:@"both"])
    {
        sex = [NSPredicate predicateWithFormat:@"sexe = %@ OR sexe = %@", @"female", @"male"];
    }
    else
    {
        sex = [NSPredicate predicateWithFormat:@"sexe = %@", sexe];
    }
    NSArray  *BoxWithSex = [arrayForPredicate filteredArrayUsingPredicate:sex];
    NSMutableArray *mutableArray = [self createMutableArray:BoxWithSex];    
    //  NSLog(@"%@", [[mutableArray objectAtIndex:1] valueForKey:@"name"]);
  //  NSUInteger numObjects = [mutableArray count];

} 
```

我的 .h ：

```
@interface AddViewController : UIViewController 
```

{

```
IBOutlet UIButton *male;
IBOutlet UIButton *female;
IBOutlet UIButton *couple;
UIButton *maleBtn;
BOOL flag;
NSArray *arrayForPredicate;
NSFetchedResultsController *fetchedResultsController;
NSManagedObjectContext *context;
NSFetchRequest *request; 
```

}

```
@property (nonatomic, retain) WonderAppDelegate *app;
- (void) fillSexArray:(NSString *)sexe;
- (NSMutableArray *)createMutableArray:(NSArray *)array;
- (void)loadCoreData;
- (void)sexeButtonPressed;
- (void)sexeArray;
@end 
```

编辑创建 managedObject ：

```
+ (id)boxWithDictionary:(NSDictionary *)dict withManagedObjectContext:(NSManagedObjectContext *)managedObjectContext;
{
    Boxes *boxes = [NSEntityDescription insertNewObjectForEntityForName:@"Boxes" 
                                             inManagedObjectContext:managedObjectContext];

    boxes.name    = [dict objectForKey:@"name"];
    boxes.sexe    = [dict objectForKey:@"sexe"];
    boxes.topic    = [dict objectForKey:@"topic"];
    boxes.number   = [dict objectForKey:@"number"];

    return boxes;
} 
```

这是我的 .m，它的工作原理就是这样，但我不想要 Add there 函数的代码，我想要它在 loadCoreData 上。

```
//
//  AddViewController.m
//  CoreDataTuto
//
//  Created by Clement Yerochewski on 30/04/12.
//  Copyright (c) 2012 Weblib. All rights reserved.
//

#import "AddViewController.h"
#import "Boxes.h"

@implementation AddViewController
@synthesize app, context;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        UINavigationBar *navBar = [[UINavigationBar alloc] initWithFrame:CGRectMake(0, 0, 768, 44)];
        UINavigationItem *navItem = [[UINavigationItem alloc]  initWithTitle:@"Add Detail"];
        [navBar pushNavigationItem:navItem animated:NO];
        UIBarButtonItem *cancelButton = [[UIBarButtonItem alloc] initWithTitle:@"Cancel" style:UIBarButtonItemStylePlain target:self action:@selector(cancel)];
        UIBarButtonItem *addButton = [[UIBarButtonItem alloc] initWithTitle:@"Add" style:UIBarButtonItemStyleBordered target:self action:@selector(add)];

        navItem.leftBarButtonItem = cancelButton;
        navItem.rightBarButtonItem = addButton;

        [self.view addSubview:navBar];
        app = [[UIApplication sharedApplication] delegate];
    }
    return self;
}

- (void) add{

    [self dismissModalViewControllerAnimated:YES];

    //    PREDICATE TO GET AN ARRAY OF PRODUCT WITH A LENGTH NAME <= 5
    //    NSPredicate *length;
    //    length = [NSPredicate predicateWithFormat:@"name.length <= 5"];
    //    NSArray  *BoxWithCheapPrice = [array filteredArrayUsingPredicate:length]; 
    //    NSLog(@"Box %@", BoxWithCheapPrice);

    // PREDICATE TO GET AN ARRAY OF PRODUCT WITH PRICE BETWEEN $MIN AND $MAX
    //    NSNumber *min = [NSNumber numberWithInteger:30];
    //    NSNumber *max = [NSNumber numberWithInteger:100];
    //    NSPredicate *between; 
    //    between = [NSPredicate predicateWithFormat:@"number BETWEEN %@", [NSArray arrayWithObjects:min, max, nil]];
    //    NSArray  *BoxWithPriceBetween = [array filteredArrayUsingPredicate:between]; 
    //    NSLog(@"Box %@", BoxWithPriceBetween);
    //    NSLog(@"%@", [BoxWithPriceBetween valueForKey:@"name"]);

  }

- (NSMutableArray *)createMutableArray:(NSArray *)array
{
    return [NSMutableArray arrayWithArray:array];
}

- (IBAction) sexeChoosen: (id) sender
{
    switch ( ((UIButton*)sender).tag ){
        case 0:
            [self fillSexArray:@"male"];
            break;
        case 1:
            [self fillSexArray:@"female"];
            break;
        default:
            [self fillSexArray:@"both"];
    }
    [self sexeButtonPressed];

}

- (void)sexeButtonPressed
{
    if (flag)
    {
        UIImage * maleImg2 = [UIImage imageNamed:@"pressed.png"];
        [maleBtn setImage:maleImg2 forState:UIControlStateNormal];
        flag = NO;
        [self sexeArray];
    }
    else 
    {
        UIImage * maleImg1 = [UIImage imageNamed:@"unpressed.png"];
        [maleBtn setImage:maleImg1 forState:UIControlStateNormal];
        flag = YES;
        [self sexeArray];
    } 
}

- (void)sexeArray
{

}

- (void)loadCoreData
{

}

- (void) fillSexArray:(NSString *)sexe
{

    context = [app managedObjectContext];

    // GET THE JSON
    NSString *urlString = [NSString stringWithFormat:@"http://localhost:8888/json.txt"];
    NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:urlString]]; 
    NSError *err;
    NSMutableArray *json = (NSMutableArray* )[NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&err];

    // FILL THE ENTITY
    for (int i = 0; i != 7; i++)
    {
        Boxes *boxes = [NSEntityDescription insertNewObjectForEntityForName:@"Boxes" inManagedObjectContext:context];

        boxes.name =   [[[json valueForKey:@"boxesDetail"] objectAtIndex:i] valueForKey:@"name"] ;
        boxes.sexe =   [[[json valueForKey:@"boxesDetail"] objectAtIndex:i] valueForKey:@"sexe"] ;
        boxes.topic =   [[[json valueForKey:@"boxesDetail"] objectAtIndex:i] valueForKey:@"topic"] ;
        boxes.number = [NSNumber numberWithInt:[[[[json valueForKey:@"boxesDetail"] objectAtIndex:i] valueForKey:@"number"] intValue]];
    }

    NSFetchRequest *request = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Boxes" inManagedObjectContext:context];
    [request setEntity:entity];
    arrayForPredicate = [context executeFetchRequest:request error:&err];

    NSPredicate *sex;
    // PREDICATE TO GET AN ARRAY OF PRODUCT WITH SEXE EQUAL TO 

    if ([sexe isEqualToString:@"both"])
    {
        sex = [NSPredicate predicateWithFormat:@"sexe = %@ OR sexe = %@", @"female", @"male"];
    }
    else
    {
        sex = [NSPredicate predicateWithFormat:@"sexe = %@", sexe];
    }
    NSArray  *BoxWithSex = [arrayForPredicate filteredArrayUsingPredicate:sex];
    NSMutableArray *mutableArray = [self createMutableArray:BoxWithSex];
    NSLog(@"SEXE CHOOSEN %@", mutableArray);

    //  NSLog(@"%@", [[mutableArray objectAtIndex:1] valueForKey:@"name"]);
    NSUInteger numObjects = [mutableArray count];

    NSLog(@"%d", numObjects);
}

- (void) cancel{
    [self dismissModalViewControllerAnimated:YES];  
}
- (void)didReceiveMemoryWarning
{
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{
    flag = YES;

    maleBtn = [UIButton buttonWithType:UIButtonTypeCustom];
    maleBtn.frame = CGRectMake(40, 47, 107, 75); 
    [maleBtn setTitle:@"male" forState:UIControlStateNormal];
    UIImage * maleImg1 = [UIImage imageNamed:@"unpressed.png"];
    [maleBtn setImage:maleImg1 forState:UIControlStateNormal];
    [maleBtn addTarget:self action:@selector(sexeChoosen:) forControlEvents:UIControlEventTouchUpInside];
    [self.view addSubview:maleBtn];
    [self loadCoreData];
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T08:58:03.977

创建持久存储后，您是否更新了模型？尝试从模拟器（或数据库文件）中删除您的应用程序并再次运行它。

# database - 查找空间索引中的所有重叠圆

> ID：10580190
> 
> 赞同：1
> 
> 时间：2012-05-14T08:55:08.510
> 
> 标签：database, location, geospatial

手机报告的位置是近似的——它们包含一个点（经纬度）和一个半径——也就是说，手机不知道它在哪里，但知道它在某个点的一定距离内。

如何将其存储在数据库中？如何在某个其他点的某个半径范围内检索所有这些手机？

（我看过 MySQL 的 point-type，但是 MySQL 似乎不喜欢圆圈，似乎连一个`DISTANCE`函数都没有；还有其他数据库做得好又快吗？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T09:37:52.613

我建议您将手机存放在[Quadtree](http://en.wikipedia.org/wiki/Quadtree)中。然后，当您要查询一个点时，您可以只对附近的电话进行详尽的搜索，并通过不考虑太远的电话来节省时间。我不知道有任何普通的数据库应用程序可以为您执行此操作，但您自己实现应该不会太难。

# android - Android 谷歌分析跟踪器 NoClassdefFoundError

> ID：10580191
> 
> 赞同：5
> 
> 时间：2012-05-14T08:55:09.480
> 
> 标签：android, google-analytics

嗨，这是我从谷歌分析的示例代码中挑选的一个小代码。

```
tracker = GoogleAnalyticsTracker.getInstance();

tracker.startNewSession("UA-YOUR-ACCOUNT-HERE", this);
    setContentView(R.layout.main);
    Button createEventButton = (Button)findViewById(R.id.NewEventButton);
    createEventButton.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            tracker.trackEvent(
                    "Clicks",  // Category
                    "Button",  // Action
                    "clicked", // Label
                    77);       // Value
        }
    }); 
```

错误：

```
'05-14 13:52:36.599: E/AndroidRuntime(7367): FATAL EXCEPTION: main
05-14 13:52:36.599: E/AndroidRuntime(7367): java.lang.NoClassDefFoundError: com.google.android.apps.analytics.GoogleAnalyticsTracker
05-14 13:52:36.599: E/AndroidRuntime(7367):     at com.google.android.apps.analytics.sample.TestActivity.onCreate(TestActivity.java:19)
05-14 13:52:36.599: E/AndroidRuntime(7367):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-14 13:52:36.599: E/AndroidRuntime(7367):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
05-14 13:52:36.599: E/AndroidRuntime(7367):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
05-14 13:52:36.599: E/AndroidRuntime(7367):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
05-14 13:52:36.599: E/AndroidRuntime(7367):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
05-14 13:52:36.599: E/AndroidRuntime(7367):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-14 13:52:36.599: E/AndroidRuntime(7367):     at android.os.Looper.loop(Looper.java:130)
05-14 13:52:36.599: E/AndroidRuntime(7367):     at android.app.ActivityThread.main(ActivityThread.java:3687)
05-14 13:52:36.599: E/AndroidRuntime(7367):     at java.lang.reflect.Method.invokeNative(Native Method)
05-14 13:52:36.599: E/AndroidRuntime(7367):     at java.lang.reflect.Method.invoke(Method.java:507)
05-14 13:52:36.599: E/AndroidRuntime(7367):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
05-14 13:52:36.599: E/AndroidRuntime(7367):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
05-14 13:52:36.599: E/AndroidRuntime(7367):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-22T14:36:50.803

要解决在使用 Google Analytics v2beta 库时出现错误**NoClassdefFoundError**的问题，您需要**将此库标记为 "exported"**。

如何？

*   添加您的库：项目 -> 属性 -> Java 构建路径 -> 库 -> 添加外部 JAR...
*   然后在同一窗口中转到“订购和导出”，并使用复选框将此库标记为“已导出”。

当您运行它时，您的项目现在将找到 Analytics 类！

更多细节以及为什么会[在这里发生](http://tools.android.com/recent/dealingwithdependenciesinandroidprojects)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-14T09:06:29.800

更新 ADT 后我遇到了这个问题。

我将所有 JAR 文件存储在一个名为“lib”的文件夹中，并以正常的 Eclipse 方式将 jars 添加到构建路径中。在我更新之前，这一直很好。

更新后，我得到了一个类的 NoClassDefFoundError，我可以清楚地看到它包含在 jar 中（查看 ReferencedLibraries 类）。

解决方案是从构建路径中删除我的 jar 并将我的“lib”文件夹重命名为“libs”。这是一个 ant 约定，似乎是新 ADT 在 .apk 文件中查找和包含库的方式。一旦我这样做了，一切都很好。

# javascript - Mobile Safari (iPad) 中糟糕的 PayPal Digital Goods Express Checkout 体验：弹出窗口作为选项卡打开

> ID：10580195
> 
> 赞同：4
> 
> 时间：2012-05-14T08:55:29.107
> 
> 标签：javascript, ipad, paypal, mobile-safari, in-app-purchase

我一直在我的 (HTML5) 网络应用程序中实施[PayPal Digital Goods Express Checkout](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_IntroducingExpressCheckoutDG)，以启用额外应用程序内容的“应用程序内”购买。在我的桌面浏览器（Chrome、Safari、Firefox）中，数字商品流运行没有问题。在该流程中，弹出窗口在某些时候打开，例如，当用户单击登录按钮或使用信用卡付款的按钮时（即没有贝宝帐户）。对于桌面浏览器，弹出窗口没有问题。但是，在我的 iPad 2 上的 Mobile Safari 中，**弹出窗口始终作为（新）选项卡打开**, 即使包含宽度、高度等的属性字符串被传递给 JavaScript window.open() 命令。这使得无法实现 PayPal Digital Goods Express Checkout 并在桌面浏览器和移动 Safari 中获得良好的用户体验。当 Web 应用程序在 iPad 上全屏运行（使用主屏幕上的图标）时，打开弹出窗口变得更加成问题（或不可能）。

在尝试解决我的问题时，我提出了以下选项，但都没有带来令人满意的结果：

*   自定义支付流程。当然这在某种程度上是可能的，但是在将用户重定向到强制用户登录到 PayPal 的“incontext”快速结帐页面之后，定制是我无法控制的（据我所知）。例如，我无法自定义登录过程本身并使其在 iframe（而不是弹出窗口）中工作。如果有一些高级 API 命令我可以在服务器端使用我自己的（iframed）登录表单让用户自己登录到 PayPal，那就太酷了，但这似乎太牵强了。

*   使弹出窗口在 Mobile Safari 中按预期工作，最好在全屏运行 Web 应用程序时也是如此。我认为 Mobile Safari 将新窗口作为选项卡打开并不奇怪（还有其他浏览器可以这样做）。我*确实*认为使用 window.open 和定义窗口位置和尺寸的属性字符串从 JavaScript 打开的弹出窗口作为选项卡打开是很奇怪的。有谁知道如何让 Mobile Safari 正常打开此类弹出窗口，而无需用户更改某些浏览器设置？

为了证明我的问题（并表明我不是唯一面临它的人，尽管该网站的所有者可能不知道它;-)，请使用 iPad 访问[digitalmagazine.autosport.com](http://digitalmagazine.autosport.com/)并单击“使用 PayPal 付款”按钮在页面的左上角。单击 PayPal iframe 中的登录按钮。该站点消失，登录页面（应该在弹出窗口中打开以获得“应用内”体验）打开整个页面。

我还研究了[类似应用内支付系统](https://developers.google.com/in-app-payments/)使用的客户端 (JavaScript) 技术，但那些（可以理解）也使用弹出窗口。因此，我更喜欢上面描述的第二种解决方案。这也将涉及更少的工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T10:40:31.643

虽然 PayPal 支持移动平台，但您需要进行一些更改才能在 iOS 和其他移动操作系统上完全实现它。您将在此处找到 PayPal 移动概述： [https ://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_ECOnMobileDevices](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_ECOnMobileDevices)

该过程首先将 Express Checkout 流程中的重定向命令更改为 _expresscheckout-mobile，然后逐步完成完整实施的附加要求列表。仔细阅读文档，因为它对支持的 NVP 字段可能有点挑剔。

# mongodb - 如何设置不隐藏的mongodb延迟slave？

> ID：10580196
> 
> 赞同：5
> 
> 时间：2012-05-14T08:55:33.193
> 
> 标签：mongodb, database-replication

出于测试目的，我试图通过设置 slaveDelay=n 来模拟 mongodb 集群中的复制滞后。事实证明，这会神奇地导致从属设备被隐藏，因此我的测试无法访问它。

[mongodb 文档](http://www.mongodb.org/display/DOCS/Replica+Sets+slaveDelay)指出“通常我们不希望延迟成员用于 slaveOkay 读取。因此，设置 slaveDelay 也会从您的应用程序中隐藏该成员，就像您还设置了 hidden:true 一样。”

有没有办法为我的“非典型”用例配置？或者有没有更好的方法来模拟不同时滞的不同从站的读取？

我尝试使用 TaggedReadPreference 强制测试代码连接到延迟的从站，但这会导致

```
com.mongodb.MongoException: Could not find any valid secondaries with the supplied tags ('{ "delayed" : "true"}' 
```

显然，Java 驱动程序确实看不到次要的。当我删除“slaveDelay”设置时，它连接正常。

这是我的集群配置：

```
rs.reconfig({
"_id" : "rs0",
"version" : 4,
"members" : [
    {   "_id" : 0,
        "host" : "localhost:27017",
        "priority" : 0,
        slaveDelay: 10,
        tags: { delayed: "true" }
    },
    {   "_id" : 1,
        "host" : "localhost:27018"
    },
    {   "_id" : 2,
        "host" : "localhost:27019",
        "arbiterOnly" : true
    }
]
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T09:31:52.773

据我所知，这是不可能的。例如，您唯一的途径是通过代理模拟/强制您的主要和延迟的次要之间的实际网络延迟。有许多此类工具可用，它们将为您提供更准确的测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T18:07:10.057

您可以 fsync 并锁定辅助节点一段时间以强制它落后：

[http://www.mongodb.org/display/DOCS/fsync+Command#fsyncCommand-v2.0Notes](http://www.mongodb.org/display/DOCS/fsync+Command#fsyncCommand-v2.0Notes)

尽管解锁后它会很快赶上，但通过不错的 oplog 和较大的插入率，您可以反复模拟滞后效果。这意味着在开始测试等之前等待它滞后。

如果您有一个主要、一个辅助和一个仲裁器，如您所描述并在您选择的语言中使用 W=2 等效项（REPLICAS_SAFE 等），而辅助被锁定，除非您设置 wtimeout（您应该这样做，并且如果使用 W=2)，则捕获异常。

# android - Spinner 设置按 id 选择

> ID：10580200
> 
> 赞同：0
> 
> 时间：2012-05-14T08:55:53.200
> 
> 标签：android

我的申请有记录。记录有类别。在编辑记录活动中，我需要通过 categoryId 将记录类别设置为 Spinner。我找到了如下解决方案：

```
for (int i = 0; i < spinner.getCount(); i++) {
    Cursor value = (Cursor) spinner.getItemAtPosition(i);
    long id = value.getLong(value.getColumnIndex("_id");
    if (id == rowid) {
        spinner.setSelection(i);
    }
} 
```

但这是一个糟糕的解决方案。这会很慢，因为我的申请中没有任何类别的数量限制。

你有什么解决办法？

非常感谢！

# iphone - webView stopLoading 问题

> ID：10580206
> 
> 赞同：1
> 
> 时间：2012-05-14T08:56:20.047
> 
> 标签：iphone, objective-c

我正在尝试为 webView 实现停止重新加载按钮。这是我的代码：

```
- (IBAction)stopOrReloadButtonClick:(id)sender {
    if (self.webView.loading) {
        [self.webView stopLoading];
    }
    else {
        [self.webView reload];
    }
} 
```

和委托方法：

```
- (void)webViewDidStartLoad:(UIWebView *)webView {
    if (indicator != nil && indicator.isAnimating == NO) {
        [indicator startAnimating];
    }
    [self.stopReloadButton setImage:[UIImage imageNamed:@"Stop.png"] forState:UIControlStateNormal];
}

- (void)webViewDidFinishLoad:(UIWebView *)webView {
    [self.stopReloadButton setImage:[UIImage imageNamed:@"Refresh.png"] forState:UIControlStateNormal];
    [self setNavigationButtonsState];
    [indicator stopAnimating];
} 
```

如您所见，功能如下：如果 webView 已加载内容，则按钮为“圆角箭头”。如果按下 webView 会重新加载当前页面并将按钮图像更改为“交叉”，这意味着停止重新加载。如果按下它应该停止重新加载页面。当 webView 完成加载图像时，图像再次变为“圆角箭头”。所以问题是，如果我在 webView 加载内容时按“停止”，则不会调用相应的委托方法 - (void)webViewDidFinishLoad:(UIWebView *)webView。为什么 ？以及如何实现这样的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T09:04:16.767

此方法在 Web 视图完成加载但您取消时调用，它不会被调用。
所以改变你的方法

```
- (IBAction)stopOrReloadButtonClick:(id)sender {
    if (self.webView.loading) {
        [self.webView stopLoading];
        [self.stopReloadButton setImage:[UIImage imageNamed:@"Refresh.png"] forState:UIControlStateNormal];
        [self setNavigationButtonsState];
        [indicator stopAnimating];

    }
    else {
        [self.webView reload];
    }
} 
```

# jquery - jquery测量滚动速度 - 从页面顶部到底部滚动太快

> ID：10580208
> 
> 赞同：0
> 
> 时间：2012-05-14T08:56:32.143
> 
> 标签：jquery, scroll

当用户从页面的顶部位置滚动到页面的底部位置（即 1 秒）快速（即 1 秒）时，使用 jquery 检测和执行操作很热门？（仅当页面可滚动时）

希望找到基于相对值的通用解决方案，而不是 html 标记（页面上的元素）。

注意：认为需要检查以确保 DOM 就绪后的用户视点位于页面顶部。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T09:03:41.160

您可以使用基于两个元素的定时事件，这将非常准确

[检查滚动后元素是否可见](https://stackoverflow.com/questions/487073/jquery-check-if-element-is-visible-after-scrolling)

如果你想扩展它，你可以使用几个元素并计算出元素之间的平均速度:)

```
<script>
var finalFired = false;
var now = new Date().getTime();
function isScrolledIntoView(elem){
    var docViewTop = $(window).scrollTop();
    var docViewBottom = docViewTop + $(window).height();

    var elemTop = $(elem).offset().top;
    var elemBottom = elemTop + $(elem).height();

    return ((elemBottom <= docViewBottom) && (elemTop >= docViewTop));
}
$(document).scroll(function(){
    if(!finalFired){
        if(isScrolledIntoView("div:last")){
            finalFired = true;
            var then = new Date().getTime();
            alert(then-now);
        }
    }
});
</script>
<div style="height:100%;">Test</div>
<div style="height:100%;">Test</div>
<div style="height:100%;">Test</div>
<div style="height:100%;">Test</div>
<div style="height:100%;">Test</div>
<div style="height:100%;">Test</div>
<div style="height:100%;">Test</div>
<div style="height:100%;">Test</div>
<div style="height:100%;">Test</div>
<div style="height:100%;">Test</div>
<div style="height:100%;">Test</div>
<div style="height:100%;">Test</div>
<div style="height:100%;">Test</div>
<div style="height:100%;">Test</div>
<div style="height:100%;">Test</div>
<div style="height:100%;">Test</div>
<div style="height:100%;">Test</div>
<div style="height:100%;">Test</div>
<div style="height:100%;">Test</div>
<div style="height:100%;">Test</div>
<div style="height:100%;">Test</div>
<div style="height:100%;">Test</div>
<div style="height:100%;">Test</div>
<div style="height:100%;">Test</div>
<div style="height:100%;">Test</div>
<div style="height:100%;">Test</div>
<div style="height:100%;">Test</div>
<div style="height:100%;">Test</div>
<div style="height:100%;">Test</div>
<div style="height:100%;">Test</div> 
```

# android - 初始化虚拟机时出错

> ID：10580212
> 
> 赞同：4
> 
> 时间：2012-05-14T08:56:57.047
> 
> 标签：android, jvm

我想从 apk 文件中提取源代码。出于这个目的，我参考了网上给出的链接。但是当我在命令提示符下运行 dex2jar classes.dex 时，我收到“在 VM 初始化期间发生错误无法为对象堆保留足够的空间无法创建 JVM”请指导我如何克服这个错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-12-12T13:20:49.630

编辑文件夹中的文件**dex2jar.bat**。改变这个：

```
java -Xms512m -Xmx1024m -cp %CLASSPATH% "com.googlecode.dex2jar.v3.Main" %* 
```

内存设置应该更小。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-14T10:06:57.130

对于源代码，您需要 2 个工具

```
 i) dex2jar 
ii) jd-gui 
```

要使用此工具，您需要一个 .apk 文件

```
 step 1 : Right click on that .apk file and convert it into .zip 
 step 2: unZip that file then take classes.dex from this unzip folder 
 step 3: Go to cmd then go to the path of dex2jar folder like D:\dex2jar tools\dex2jar-0.0.9.8\dex2jar-0.0.9.8 
 step 4: write dex2jar classes.dex
 step 5: press Enter 
 step 6: then see in path   D:\dex2jar tools\dex2jar-0.0.9.8\dex2jar-0.0.9.8  you can see a .zip file of classes then unzip and
 step 7 : import that files in jd-gui software 
```

# c# - 即使在处理未处理的异常后，应用程序也会崩溃并显示错误消息

> ID：10580216
> 
> 赞同：0
> 
> 时间：2012-05-14T08:57:18.793
> 
> 标签：c#, .net, .net-3.5

我们订阅了未处理的线程异常和未处理的异常，如下所示

```
public partial class ICEView : Form
{

    public ICEView()
    {
        InitializeComponent();

        AppDomain.CurrentDomain.UnhandledException += new UnhandledExceptionEventHandler(OnUnhandledException);
        Application.ThreadException += new ThreadExceptionEventHandler(OnThreadException);
    }
} 
```

有时应用程序在没有进入异常处理程序的情况下崩溃，显示错误消息，如下面的链接所示。但是我们得到的错误信息没有“调试”按钮。显示消息框的原因可能是什么。

[http://www.computerhope.com/issues/pictures/winerror.jpg](http://www.computerhope.com/issues/pictures/winerror.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T09:10:10.723

尝试在`Main`表单之前的 Program.cs 中的方法中添加异常处理程序，或尝试在`InitializeComponent`方法之前添加异常处理程序。

```
[STAThread]
static void Main()
{
    Application.ThreadException += new ThreadExceptionEventHandler(OnThreadException);
    Application.SetUnhandledExceptionMode(UnhandledExceptionMode.CatchException);
    AppDomain.CurrentDomain.UnhandledException += new UnhandledExceptionEventHandler(OnUnhandledException);

    Application.Run(new ICEView());
} 
```

# maven - 如何将 Javadoc index.html 链接更改为另一个链接？

> ID：10580217
> 
> 赞同：0
> 
> 时间：2012-05-14T08:57:20.993
> 
> 标签：maven, javadoc

我只是想知道是否可以更改 Maven 站点生成的 Javadoc 的链接？我的意思是，如果您生成 javadoc，那么您有一个 ../index.html 地址，并且是否可以将 index.html 更改为其他？我生成了一个经典的 javadoc 和 doclet rtf，并且都生成了 index.html，对于经典的 javadoc 我保持原样，但是对于 doclet，我希望有一个指向 rtf 而不是 index.html 的链接......我希望你明白我的意思。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T10:26:38.563

[您需要使用 outputDirectory 和 reportOutputDirectory 的不同配置](http://maven.apache.org/plugins/maven-javadoc-plugin/javadoc-mojo.html)运行 maven-javadoc-plugin 两次。之后，您需要创建一个新的起始位置页面以将信息输入您生成的站点。您可以简单地尝试在 site.xml 中创建链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T09:48:29.313

没有通用的解决方案；您将不得不编写自己的 shell 脚本。

将生成站点的代码放入 shell 脚本中，然后重命名`index.html`文件。

如果您不喜欢 shell 脚本，请使用调用 Maven 的小型 Ant 构建文件。您可以尝试反过来（以及您的 Maven POM 中的 Ant 任务），但是您必须在生命周期中的正确位置添加它，这并不总是那么容易。我发现简单的解决方案（Ant 调用 Maven）更“明显”。

# python - 读取文件中的文本以检查环境变量

> ID：10580220
> 
> 赞同：-1
> 
> 时间：2012-05-14T08:57:24.520
> 
> 标签：python

我正在尝试读取文本文件的内容，然后使用它来执行 os.getenv 检查某些设置。我无法将文本转换为变量，您能帮忙吗？

代码是

```
import os
for env_check in open('env_check.conf'):
  print env_check
  newenv = os.getenv('"'+env_check+'"')
  if newenv is None:
    print newenv, 'is not set'
  else:
    print 'Current Setting for ' + newenv 
```

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T09:29:23.220

如果您在方括号中打印环境变量，您很快就会看到它们附加了换行符（我假设换行符将您在评论中提到的列表分开，如果您有逗号分隔的列表或类似的其他工作是必须的）。

您可以删除这些，[**`str.strip()`**](http://docs.python.org/dev/library/stdtypes.html?highlight=str.strip#str.strip)然后将此变量直接传递给[**`os.getenv()`**](http://docs.python.org/dev/library/os.html#os.getenv). 然后你可以打印它们：

```
import os
for env_check in open('env_check.conf'):
    env_check = env_check.strip()
    print '[{}]'.format(env_check)
    newenv = os.getenv(env_check)
    if newenv is None:
        print env_check, 'is not set'
    else:
        print 'Current Setting for {}={}'.format(env_check, newenv) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T09:00:12.227

`os.getenv()`工作正常。我的猜测是您在环境变量名称周围添加的引号不应该在那里。代替

```
os.getenv('"'+env_check+'"') 
```

和

```
os.getenv(env_check) 
```

* * *

正如@BluePeppers 正确指出的那样，您还应该替换

```
print newenv, 'is not set' 
```

和

```
print env_check, 'is not set' 
```

# git - 执行 ls-remote 命令期间捕获的 EGit SSH 异常

> ID：10580221
> 
> 赞同：9
> 
> 时间：2012-05-14T08:57:25.740
> 
> 标签：git, egit

我在我们的内部网络中设置了一个 GIT 服务器。我可以使用 git://...../ 和服务器上的选项推送到它`--enable=receive-pack`。

但是当我尝试使用 EGIT Eclipse 插件（ssh://username@ip_adress:22/project.git）通过 ssh 推送时，我收到以下错误：

> 传输错误无法获取远程存储库引用。
> 
> 原因：执行 ls-remote 命令时发现异常。

什么可能导致这种情况，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T01:20:49.137

`git://`并`ssh://`使用不同的协议（参见[EGit User_Guide#Git_URLs](http://wiki.eclipse.org/EGit/User_Guide#Git_URLs)）。所以要么在 EGit 中使用前者，要么确保 ssh 访问有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T14:01:50.523

这个问题通常是由身份验证问题引起的在认证中。您可以通过生成新的密钥对、发布新的公钥以及使用新的私钥和 git 用户进行身份验证来解决此问题。

[我在git, gitolite error push](https://stackoverflow.com/questions/10283947/git-gitolite-error-push/11701630#11701630)上发布了更详细的说明（去那里避免重复发布/重复编辑。）

# c# - 线程合并排序比串行实现慢

> ID：10580224
> 
> 赞同：3
> 
> 时间：2012-05-14T08:57:35.490
> 
> 标签：c#, multithreading, mergesort

对于学校，我们有一项任务是创建一个多线程应用程序。我们选择进行归并排序的多线程实现。

然而，我们无法让它比串行实现更快地工作。

我已经尝试过以下方法：

*   无限线程的实现（代码示例 1）（非常慢）
*   线程有限的实现（代码示例 2）（最多 4 个线程 - 仍然很慢）
*   使用 Parallel.Invoke 实现（代码示例 3）（仍然较慢）
*   复杂的实现也具有并行合并功能（只是慢得可耻）

当我在 Visual Studio（仪器部分）中使用分析工具时，我发现调用函数的时间和线程解决方案总是比串行实现慢得多。

我看不出有任何可能的原因。

（例如：要排序 5000000 个数字；串行实现：16.717,17；并行：20.259,97；结果只需 1 个额外线程）

我在我拥有的两台机器上测试了它：

*   Intel Core 2 Quad Q9450 @ 2.66Ghz
*   英特尔酷睿 i7 Q720 @1.60Ghz

我一生都无法弄清楚这是怎么可能的，这不应该只是加快进程吗？

如果有人能够帮助我，我会非常高兴。

代码示例1：

```
ParallelMerge pMerge = new ParallelMerge(T, p1, q1 -1, p2, q2-1, A, p3);
Thread thread = new Thread(new ThreadStart(pMerge.parallel_merge));
thread.Start();

ParallelMerge pMerge2 = new ParallelMerge(T, q1 + 1, r1, q2, r2, A, q3 + 1);
pMerge2.parallel_merge();
thread.Join(); 
```

代码示例 2：

```
if(depthRemaining > 0)
{
   ParallelMerge pMerge = new ParallelMerge(T, p1, q1 -1, p2, q2-1, A, p3);
   thread thread = new Thread(new ThreadStart(pMerge.parallel_merge));
   thread.Start();
   ParallelMerge pMerge2 = new ParallelMerge(T, q1 + 1, r1, q2, r2, A, q3 + 1);
   pMerge2.parallel_merge(); 
   thread.Join();
}
else
{
   ParallelMerge pMerge = new ParallelMerge(T, p1, q1 -1, p2, q2-1, A, p3);
   pMerge.parallel_merge(); 
   ParallelMerge pMerge2 = new ParallelMerge(T, q1 + 1, r1, q2, r2, A, q3 + 1);
   pMerge.parallel_merge(); 
} 
```

代码示例 3：

```
if (depthRemaining > 0)
{
   Parallel.Invoke(
      () => threaded_merge_sort(getallen, p, q, depthRemaining-1));

   threaded_merge_sort(getallen, q + 1, r, 0);
}
else
{
   threaded_merge_sort(getallen, p, q, 0);
   threaded_merge_sort(getallen, q+1, r, 0);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T09:06:41.923

您报告的时间单位是什么？

启动一个新线程是一个“慢”操作。使用多线程对非常短的列表进行排序/合并可能会慢一些。

如果你只是将数字列表的长度分成两半，程序运行得更快吗？如果不是，您的代码根本无法扩展。

在没有实际代码实现的情况下回答这个问题有点困难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T19:03:45.200

> 似乎问题不在于代码，而在于 VS 的分析工具。
> 
> ——阿恩·克莱尔布特

# asp.net - ImageButton 控件上的 OnCommand 事件

> ID：10580225
> 
> 赞同：0
> 
> 时间：2012-05-14T08:57:36.780
> 
> 标签：asp.net

我对 OnCommand 事件有疑问。当我将此参数作为参数或显示时，一切都很好，但如果我将它用作 CommandArgument，我会得到 InvalidCastException。在方法 CommandArgument 后面的代码中等于 "" (string.Empty)

在我的 aspx 文件中，我有以下代码：

```
<%# (bool)Eval("IsCandidateFavourite") %> //just display value
<asp:ImageButton id="ImageButton1" runat="server" 
    CommandArgument="<%# (bool)Eval("IsCandidateFavourite") %>"
    OnCommand="imBtnFavorite_Command"
    ImageUrl='<%# GetIsFavoriteImageUrl((bool)(Eval("IsCandidateFavourite")) ) %>'/> 
```

在我的文件后面的代码中，我有这个

```
public string GetIsCandidateFavoriteImageUrl(bool isNowFavorite)
{
    if (isNowFavorite)
    {
        return @"~/_images/icon_grid_fav.gif";
    }
    return @"~/_images/icon_grid_unfav.gif";
}

protected void imBtnFavorite_Command(object sender, CommandEventArgs e)
{
    bool isFavorite =(bool) e.CommandArgument;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T09:23:24.573

尝试使用单引号代替`(')`双引号`(")``CommandArgument`

```
CommandArgument='<%# (bool)Eval("IsCandidateFavourite") %>' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T09:14:35.037

CommandArgument 是此处提到的字符串类型-> [http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.imagebutton.commandargument.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.imagebutton.commandargument.aspx)

# css - 使用线性渐变制作 CSS3 三角形

> ID：10580226
> 
> 赞同：7
> 
> 时间：2012-05-14T08:57:39.407
> 
> 标签：css, css-transforms, css-shapes

我需要在一侧创建带有三角形的按钮（例如**http://css-tricks.com/triangle-breadcrumbs/**），带有线性垂直渐变和边框，并且我想使用纯 CSS3。如果我需要45度的“三角形”也没关系，我只是这样写

```
.button:after {
    -webkit-transform: rotate(45deg);
    background: -webkit-linear-gradient(-45deg, #fff, #000);
    content: '';
    width: 2em;
    height: 2em;
    display: block;
} 
```

并将该伪元素的一半隐藏在 .button 下（因此只有另一半可见，如三角形）。

但是如果我需要另一个角度（例如更陡峭） - 我无法使用标准的 XY 旋转和缩放。我可以使用例如 2 个 div，一个用于三角形的上半部分，一个用于底部，但边框和渐变可能存在问题。

也许可以使用带有色标的多个渐变来做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-14T09:45:09.927

所以我知道你想用 CSS 做到这一点，但我总是在 SVG 中做到这一点：

```
<svg width="100%" height="100%" version="1.1" xmlns="http://www.w3.org/2000/svg">

<defs>
<linearGradient id="fill" x1="0%" y1="0%" x2="0%" y2="100%">
<stop offset="0%" style="stop-color:rgb(224,224,224);stop-opacity:1"/>
<stop offset="100%" style="stop-color:rgb(153,153,153);stop-opacity:1"/>
</linearGradient>
</defs>

<path d="M 0 0 L 64 0 L 32 64 z" stroke="colourname" fill="url(#fill)"/>

</svg> 
```

您可以这样嵌入它：

```
<img src="triangle.svg" alt="Triangle" class="triangle" /> 
```

你也可以用同样的方式制作切换图像，并使用 JavaScript 或 jQuery 切换它：

```
$(".triangle").click(function()
{
    if($(this).attr("src") == "triangle.svg")
        $(this).attr("src", "triangledown.svg");

    else $(this).attr("src", "triangle.svg");
}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-15T23:08:24.080

是的，它可以只使用 CSS 渐变来完成。您只需将三个渐变放在另一个上面（请记住，*您列出的第一个*渐变是顶部的渐变）。底部的一个（列出的最后一个）是您的垂直渐变。最重要的是，您有两个渐变，它们也使用色标。

像这样的东西：

```
background: linear-gradient(30deg, transparent 37%, #fff 37%), 
            linear-gradient(-30deg, transparent 37%, #fff 37%), 
            linear-gradient(to bottom, #ccc, #000); 
```

我做了一个小演示，可以在以下位置看到：[http ://dabblet.com/gist/2705739](http://dabblet.com/gist/2705739)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-14T10:39:53.723

我希望这会对你有所帮助，我只用一个纯 CSS 的 div 制作了渐变三角形。

[http://jsfiddle.net/NDJ3S/15/](http://jsfiddle.net/NDJ3S/15/)

**更新**

现在检查它的工作：- [http://jsfiddle.net/NDJ3S/17/](http://jsfiddle.net/NDJ3S/17/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-09-09T20:17:42.667

只需`clip-path`与`background-image`

```
 .triangle {
    background-image: linear-gradient(rgba(#999, 0.4), rgba(#ccc, 0.5));
    clip-path: polygon(50% 0, 100% 100%, 0 100%);
    width: 100px;
    height: 100px;
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T09:08:31.027

你检查过 css 变换 scaleY 吗？使用箭头周围的另一个元素（或者可能带有伪元素），它使您能够重新调整结果。

```
transform: scaleY(0.5) 
```

例子：

[http://jsfiddle.net/xaddict/hJyrU/](http://jsfiddle.net/xaddict/hJyrU/)（仅 webkit 示例）

编辑：添加`translateZ(0)`以强制在 webkit 中进行 GPU 渲染（抗锯齿边框，嗯！）

# c++ - 关于不同类型的 sizeof() 类

> ID：10580234
> 
> 赞同：1
> 
> 时间：2012-05-14T08:58:29.110
> 
> 标签：c++, size, sizeof

> **可能重复：**
> [为什么结构的 sizeof 不等于每个成员的 sizeof 之和？](https://stackoverflow.com/questions/119123/why-isnt-sizeof-for-a-struct-equal-to-the-sum-of-sizeof-of-each-member)

为什么输出是`8`？
不是`sizeof(int)+sizeof(char) = 5`吗？

```
class CBase 
{ 
    int a; 
    char p; 
}; 

int main() {

    cout<<"sizeof(CBase)="<<sizeof(CBase)<<endl;
    getchar();
} ///:~ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T09:00:37.483

内存通常由编译器对齐以获得更好的性能。因此，一个类或结构在内存中占用的空间比其各部分的总和还要多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T09:21:23.410

看起来编译器/运行时已与 8 字节边界对齐。您可能会发现可以通过编译器或运行时开关来更改它。例如，在 AIX 上，C++ 内存分配与 16 字节对齐，这可能导致它们使用更多内存。

要不进行这种对齐，有一种方法可以在运行时解决此问题（其缺点是应用程序无法使用 VMX）只需在运行应用程序之前为应用程序设置此环境变量：

```
export LIBCPP_NOVMX=1 
```

# c# - 有人可以帮我处理进度条吗

> ID：10580237
> 
> 赞同：0
> 
> 时间：2012-05-14T08:58:33.380
> 
> 标签：c#, asp.net, asp.net-ajax

我从这里使用了这个例子

[http://www.asp.net/ajaxlibrary/jqueryui_progressbar.ashx](http://www.asp.net/ajaxlibrary/jqueryui_progressbar.ashx)

除了进度，一切都很好

![在此处输入图像描述](../Images/242c39b4928a39888891c6481098bf48.png)

这是我的设计

```
 <%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default15.aspx.cs" Inherits="Default15" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <link href="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.10/themes/redmond/jquery-ui.css"
        rel="Stylesheet" />
    <script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.6.1.js"></script>
    <script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.13/jquery-ui.min.js"></script>
    <script type="text/javascript">
        $("#progress").progressbar({
            value: document.getElementById('<%=litprogress.ClientID%>').value
        });  
    </script>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <h1>
            Wizard progress</h1>
        <div id="progress">
            <asp:Literal ID="litprogress" runat="server"></asp:Literal>
        </div>
        <asp:Panel ID="step1" runat="server">
            <h1>
                Step 1</h1>
            <asp:Button ID="GoToStep2" Text="Next" runat="server" OnClick="GoToStep2_Click" />
        </asp:Panel>
        <asp:Panel ID="step2" runat="server">
            <h1>
                Step 2</h1>
            <asp:Button ID="GoToStep3" Text="Next" runat="server" OnClick="GoToStep3_Click" />
        </asp:Panel>
        <asp:Panel ID="step3" runat="server">
            <h1>
                Step 3</h1>
            <asp:Button ID="GoToStep4" Text="Next" runat="server" OnClick="GoToStep4_Click" />
        </asp:Panel>
        <asp:Panel ID="step4" runat="server">
            <h1>
                Completed</h1>
        </asp:Panel>
    </div>
    </form>
</body>
</html> 
```

而不是要求我得到这个

![在此处输入图像描述](../Images/ea6267433f28ebdd43644fa936a7c7e0.png)

所以任何人都可以告诉我哪里出错了

收到一些警告，`CSS`错误如下

`Error: document.getElementById("litprogress") is null`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T09:40:29.210

我认为进度条初始化是在DOM完全加载之前发生的，把代码放在里面`$(document).ready.`

# c# - 如何为每个 lambda 表达式编写一个迭代 C# 中的数字范围？

> ID：10580238
> 
> 赞同：3
> 
> 时间：2012-05-14T08:58:37.917
> 
> 标签：c#

我想写一些类似的东西：

(0 .. 7).ForEach(i => SomeMethod(i))

但要么我找不到正确的语法，要么这在 C# 中是不可能的。如果可以，请问正确的语法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T09:00:24.123

您可以使用[Enumerable.Range 方法](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.range.aspx)

```
foreach (var i in Enumerable.Range(0, 7)) SomeMethod(i); 
```

如果您按照@Richard 的建议添加 ForEach 扩展方法，只需执行以下操作：

```
Enumerable.Range(0, 7).ForEach(SomeMethod); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-14T09:02:11.490

为了实现您所追求的，您需要添加虚幻且众所周知的 LINQ`ForEach`语句。

```
public static void ForEach<T>(this IEnumerable<T> source, Action<T> action)
{
    foreach(T item in source)
    {
        action(item);
    }
} 
```

**用法：**

```
Enumerable.Range(0, 7).ForEach(i => SomeMethod(i));

Enumerable.Range(0, 7).ForEach(i => Console.WriteLine(i.ToString());

Enumerable.Range(0, 7).ForEach(i => 
{
    string oddEven = i % 2 == 0 ? "even" : "odd";
    Console.WriteLine(string.Format("{0} is {1}", i, oddEven));
} 
```

**额外阅读**

[“foreach”与“ForEach”](http://blogs.msdn.com/b/ericlippert/archive/2009/05/18/foreach-vs-foreach.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T09:00:49.777

`Enumerable.Range(0, 7).ToList().ForEach(i => whatever)`

你需要`ToList`，因为纯`IEnumerable`没有`ForEach`。（好吧，如果需要，您可以轻松定义自己的。）

或者`Enumerable.Range(0, 7 + 1)`，如果你也想包括 7。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T09:00:59.290

看一下`Enumerable.Range();`

# string - 如何计算两个字符串之间的差异？

> ID：10580241
> 
> 赞同：11
> 
> 时间：2012-05-14T08:58:43.990
> 
> 标签：string, pascal, delphi

我想在 Delphi 中创建一个函数来计算两个字符串的不同级别。如果两个字符串相等（忽略大小写），那么它应该返回 0，但如果它们不相等，它应该返回不同字符的数量。此功能对于检查拼写非常有用。

```
function GetDiffStringLevel(S1,S2:string):Integer;
begin
  if SameText(S1,S2) then Exit(0);
  // i want get different chars count
end 
```

示例代码：

```
Diff:=GetDiffStringLevel('Hello','Hello');// Diff:=0;
Diff:=GetDiffStringLevel('Hello','2Hello');// Diff:=1;
Diff:=GetDiffStringLevel('Hello','H2ello');// Diff:=1;
Diff:=GetDiffStringLevel('Hello','Hello W');// Diff:=2;
Diff:=GetDiffStringLevel('Hello','World');// Diff:=6; or 5 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-15T03:30:27.653

快速紧凑的实施。

使用普通字符串实现的速度大约是 3 倍。如果其中一个字符串为空，则速度提高 100 倍以上。

Smasher 的功能是不区分大小写的，但它也很有用。

```
function LevenshteinDistance(const s, t: string): integer;inline;
var
  d   : array of array of integer;
  n, m, i, j : integer;
begin
  n := length(s);
  m := length(t);
  if n = 0 then Exit(m);
  if m = 0 then Exit(n);

  SetLength(d, n + 1, m + 1);
  for i := 0 to n do d[i, 0] := i;
  for j := 0 to m do d[0, j] := j;

  for i := 1 to n do
    for j := 1 to m do
      d[i, j] := Min(Min(d[i-1, j]+1, d[i,j-1]+1), d[i-1,j-1]+Integer(s[i] <> t[j]));

  Result := d[n, m];
end; 
```

注意：该`inline`指令在我的机器上将执行时间减少到不到 70%，但仅适用于 win32 目标平台。如果您编译为 64 位（Delphi XE2），内联实际上会使它变慢一点。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-14T09:01:42.127

您想要的称为[Levenshtein 距离](http://en.wikipedia.org/wiki/Levenshtein_distance)（将一个字符串转换为另一个字符串的最小编辑次数，其中编辑是字符插入、字符删除或字符替换）。维基百科站点有一个伪代码实现。

德尔福实现：

```
function LevenshteinDistance(String1 : String; String2 : String) : Integer;

var
  Length1, Length2      : Integer;
  WorkMatrix            : array of array of Integer;
  I, J                  : Integer;
  Cost                  : Integer;
  Val1, Val2, Val3      : Integer;

begin
String1 := TCharacter.ToUpper (String1);
String2 := TCharacter.ToUpper (String2);
Length1 := Length (String1);
Length2 := Length (String2);
SetLength (WorkMatrix, Length1+1, Length2+1);
for I := 0 to Length1 do
  WorkMatrix [I, 0] := I;
for J := 0 to Length2 do
  WorkMatrix [0, J] := J;
for I := 1 to Length1 do
  for J := 1 to Length2 do
    begin
    if (String1 [I] = String2 [J]) then
      Cost := 0
    else
      Cost := 1;
    Val1 := WorkMatrix [I-1, J] + 1;
    Val2 := WorkMatrix [I, J-1] + 1;
    Val3 := WorkMatrix[I-1, J-1] + Cost;
    if (Val1 < Val2) then
      if (Val1 < Val3) then
        WorkMatrix [I, J] := Val1
      else
        WorkMatrix [I, J] := Val3
    else
      if (Val2 < Val3) then
        WorkMatrix [I, J] := Val2
      else
        WorkMatrix [I, J] := Val3;
    end;
Result := WorkMatrix [Length1, Length2];
end; 
```

# android - 为什么我的 Android Eclipse Emulator 永远不会启动？

> ID：10580246
> 
> 赞同：1
> 
> 时间：2012-05-14T08:59:16.920
> 
> 标签：android, eclipse, emulation, launch

我安装了带有 Android 的 Eclipse。问题是当我从 eclipse 运行一个项目来测试它时，应用程序永远不会启动，模拟器也永远不会出现。即使启动进度条显示 100%。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T09:07:45.107

确保 AVD 的内存设置为 512，如果它更高，模拟器将出现内存堆错误并失败。还可以在构建时尝试启用详细输出，这可以从属性中设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T12:06:51.007

转到 Window->Preferences->Android->Build 并选择详细的构建输出

现在运行您的项目并检查 Android 控制台。就我而言，有数千个“Dx processing %classname% ...”需要几分钟才能完成。明确一点：dx.bat 是一个 ADT 实用程序，它将多个 Java 类文件转换为单个“classes.dex”文件（Dalvik 可执行文件）。我有一个项目，它使用了几个包含很多类的库，编译速度非常快（几秒钟），但启动速度很慢（2-4 分钟）。然后我发现最耗时的部分是将我的项目和所有第三方库中的类文件转换为 *.dex 文件（生成的 dex 文件大小约为 4 Mb）。据我所知，如果不对它们的类​​文件进行索引，就不可能将库附加到 android 项目，因此在启动项目时必须耐心等待。

UPD：可以从您的应用程序中删除所有未使用的代码。请检查此链接：[Always running proguard before Android dex'ing in Eclipse](https://stackoverflow.com/questions/11320998/always-running-proguard-before-android-dexing-in-eclipse)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T09:04:39.410

你有连接设备吗？Eclipse 自动切换到移动设备

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T09:10:15.153

我曾经有过一两次这样的问题。重启 Eclipse 对我有用。是的，还要检查运行配置，确保您的项目与模拟器链接。

# jquery - 客户端验证返回“未捕获的类型错误：无法读取未定义的属性‘存在’”

> ID：10580254
> 
> 赞同：4
> 
> 时间：2012-05-14T08:59:44.407
> 
> 标签：jquery, ruby, ruby-on-rails-3, client-side-validation

我在模型的一页 2 表格上`User`- 这就是问题所在，为什么我会收到错误消息`Uncaught TypeError: Cannot read property 'presence' of undefined`。当我删除一个**form_for @user**时，**客户端验证**运行良好。但如果在一页上有两个模型和两个表单**@user 则不是**。

但问题是，我需要在一个页面上有这个模型并形成两次。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T12:08:23.923

For me, the second error you describe in the comments, i.e. `Uncaught TypeError: Cannot read property 'first_user[name]' of undefined` was apparently caused by a transposed form ID.

There is an issue on ClientSideValidation about it here:

[https://github.com/bcardarella/client_side_validations/issues/325](https://github.com/bcardarella/client_side_validations/issues/325)

Adding `html => { id: 'user_new' }` to the `form_for` call solved the issue. I now call the method like this (modified from Devise's original template):

```
<%= form_for(resource,
  :as => resource_name,
  :validate => true,
  :html => { id: 'user_new' },
  :url => registration_path(resource_name)) do |f| %> 
```

HTH.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T10:10:47.120

确保为两个用户使用不同的参数标识符：

```
<!-- First form for user -->
<%= form_for(@user, :as => :first_user) do |f| %>
  ...
<% end %>

<!-- Second form for user on the same page -->
<%= form_for(@user, :as => :second_user) do |f| %>
  ...
<% end %> 
```

# drupal-6 - 如何在 Drupal 6 中创建图像视图？

> ID：10580255
> 
> 赞同：1
> 
> 时间：2012-05-14T08:59:52.780
> 
> 标签：drupal-6

我是 drupal 的新人，我使用 drupal 6，我想创建一个图像视图，如标题、图像和内容，我想像显示的图像那样开发 hare pl。通过图像视图为我提供一些指导谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T09:15:18.327

我想做这样的事情：

![在此处输入图像描述](../Images/5e0e4d1fafe9535d75f75a4f2cd49514.png)

请参考此链接。它有您想要实现的目标：

> [http://www.ostraining.com/blog/drupal/creating-a-photo-gallery-in-drupal-6/](http://www.ostraining.com/blog/drupal/creating-a-photo-gallery-in-drupal-6/)

# objective-c - NSString floatValue 失去准确性？

> ID：10580257
> 
> 赞同：0
> 
> 时间：2012-05-14T09:00:01.553
> 
> 标签：objective-c, ios, nsstring, type-conversion

我是 Objective-c 的初学者，我有一个小问题，我相信你会在两秒钟内解决：P

我在 StackOverflow 上搜索将 NSString 转换为浮点值，发现 [NSString floatValue] 可以帮助我尝试但我不知道为什么我在点之后丢失了所有值......

这是我的问题的代码：

```
- (void)setTimerDetails:(NSString *)time {
    CCLOG(@"TEST1 = %@", time);
    CCLOG(@"TEST2 = %f", [time floatValue]);
    CCLOG(@"TEST3 = %f", ([time floatValue] / 60));
    self.test.progress = ([time floatValue] / 60);
    self.crono.text = time;
} 
```

如您所见，它用于进度条：P

但这里是日志：

```
2012-05-14 10:53:39.279 Colors[533:1be03] TEST1 = 58,733
2012-05-14 10:53:39.280 Colors[533:1be03] TEST2 = 58.00000
2012-05-14 10:53:39.280 Colors[533:1be03] TEST3 = 0.966667 
```

为什么 TEST2 行的点后只有 0 ？：秒

谢谢你们帮助我：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T09:06:51.223

因为

```
Colors[533:1be03] TEST1 = 58,733 
```

是 58,773 而不是 58.773

所以当它转向floatValue时，它只抓取“58”部分

# c# - StreamReader 和 StreamWriter 在同一个 Stream 上？

> ID：10580260
> 
> 赞同：11
> 
> 时间：2012-05-14T09:00:14.830
> 
> 标签：c#, stream

如何管理关闭`StreamReader`以及`StreamWriter`哪些使用相同的底层流？

```
var stream = /*...*/;
var reader = new StreamReader(stream);
var writer = new StreamWRiter(stream); 
```

我知道我可以简单地忽略关闭读取器/写入器并关闭底层流。然而，这似乎有点小题大做，因为它是基于读者/作者没有任何东西要处理的**假设（未来可能不会如此）。**

我知道这已经在 .NET 4.5 中通过一个额外的构造函数参数解决了，但是在 .NET 4.5 发布之前，我该如何以正确的方式解决它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T09:24:44.973

首先确保你`Flush()`是作家。

然后只需 Dispose 或 Close 2 个装饰器和流（嵌套使用即可）。

# jquery - 来自 jQuery 的成功消息

> ID：10580263
> 
> 赞同：-4
> 
> 时间：2012-05-14T09:00:25.983
> 
> 标签：jquery, asp.net

我有成功和错误图像，我需要显示来自我的 jQuery 的成功消息，例如，

![在此处输入图像描述](../Images/b855d8d6766cda88fd80930344910990.png)

我需要在标签控件中显示这样的内容，我创建了一个名为“success”的 css 类，如果我可以从我的 jQuery 调用这个类，我可以显示这个图像，是否有可能，任何人都可以帮助我。

如果我使用 alert like `"alert("Changes saved successfully.");"`，我可以获得警告框，但我需要在标签控件中显示此成功图像和`"Changes saved successfully."`文本。

我试过`lblMessageBox.html("addClass","success" + "Changes saved successfully.")`了，它不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T11:22:55.383

@Shanish，你显然在苦苦挣扎，所以这里有一些东西可以帮助你入门。

假设您有一个`message`类似这样的容器：

```
<div id="message">
    <img src="" /><span></span>
</div> 
```

容器不需要是 div。它同样可以是 ap、span、td 或 th。

样式表中的一些 css 指令将提供背景颜色、字体大小、填充、边距等。

现在，要设置任何图像/消息，您将执行以下操作：

```
function setMessage(imgSrc, text, duration) {
    imgSrc = String(imgSrc) || '';
    text = String(text) || '';
    duration = Number(duration) || 0;
    var $message = $("#message");
    var fn = (imgSrc === '') ? 'hide' : 'show';
    $message.fadeIn('fast').find("span").text(text).end().find('img').attr('src', imgSrc)[fn]();
    if(duration && !isNaN(duration)) {
        setTimeout( function(){$("#message").fadeOut('fast')}, duration );
    }
} 
```

你会这样调用函数：

```
setMessage('green_tick.png', 'Changes saved successfully', 3000); 
```

请参阅[演示](http://jsfiddle.net/v4mca/)- 根据需要进行调整以获得您想要的。

# c# - 如何确定 .NET (BCL) 类型是否不可变

> ID：10580269
> 
> 赞同：0
> 
> 时间：2012-05-14T09:00:48.870
> 
> 标签：c#, .net, immutability

从这个[答案](https://stackoverflow.com/a/10580074/649524)，我知道 KeyValuePair 是不可变的。

我浏览了[文档](http://msdn.microsoft.com/en-us/library/5tbh8a42)，但找不到任何关于不可变行为的信息。

我想知道如何确定类型是否不可变？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T09:21:49.173

我认为没有标准的方法可以做到这一点，因为 C# 中没有官方的不变性概念。我能想到的唯一方法是查看某些事物，表明概率更高：

1) 该类型的所有属性都有一个私有的`set`

2）所有字段都是`const`/`readonly`或私有的

3）没有明显/已知副作用的方法

4）此外，作为一个结构通常是一个很好的指示（如果它是 BCL 类型或有人对此有指导）

类似的东西`ImmutabeAttribute`会很好。[这里](http://blogs.msdn.com/b/ericlippert/archive/2007/11/13/immutability-in-c-part-one-kinds-of-immutability.aspx)有一些想法（评论中的某处），但我还没有在“现实生活”中看到一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T17:20:42.153

A`KeyValuePair<T1,T2>`是一个没有反射的结构，它只能通过复制另一个`KeyValuePair<T1,T2>`包含所需值的内容在其构造函数之外进行变异。注意声明：

```
  MyKeyValuePair = new KeyValuePair(1,2);

```

像对结构的所有类似构造函数调用一样，实际上通过创建一个新的临时实例`KeyValuePair<int,int>`（在构造函数本身执行之前发生）、设置该实例的字段值（由构造函数完成）、复制该新临时的所有公共和私有字段来工作实例到`MyKeyValuePair`，然后丢弃临时实例。

考虑以下代码：

```
静态 KeyValuePair MyKeyValuePair; // 某个类中的字段

// 线程 1
  MyKeyValuePair = new KeyValuePair(1,1);
  // ***
  MyKeyValuePair = new KeyValuePair(2,2);

//线程2
  st = MyKeyValuePair.ToString();

```

因为`MyKeyValuePair`长度正好是四个字节，所以 Thread1 中的第二条语句将同时更新两个字段。尽管如此，如果 Thread1 中的第二条语句在 Thread2 对 and 的评估之间执行，则第二条语句`MyKeyValuePair.Key.ToString()`将`MyKeyValuePair.Value.ToString()`作用`ToString()`于结构的新变异值，即使第一个已经完成的语句对变异`ToString()`之前的值进行了操作。

所有重要的结构，无论它们是如何声明的，都对其字段具有相同的不变性规则：可以更改结构的代码可以更改其字段；不能改变结构的代码不能改变它的字段。一些结构可能会迫使人们通过箍来更改其中一个字段，但是将结构类型设计为“不可变”既没有必要也不足以确保实例的不变性。“不可变”结构类型有一些合理的用途，但如果有任何事情需要比具有暴露公共字段的结构所必需的更多注意，那么这些用例需要更多注意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T09:04:18.447

第一个迹象是概述中的属性文档说“获取键/值对中的键”。第二个更明确的指示将在属性本身的描述中：

[“此属性是只读的。”](http://msdn.microsoft.com/en-us/library/ms224760)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T09:05:42.530

我认为您无法仅通过查看文档来找到不变性的“证据”，但有几个强有力的指标：

*   这是一个`struct`（[为什么这很重要？](https://stackoverflow.com/questions/3751911/why-are-c-sharp-structs-immutable)）
*   它没有可设置的公共属性（都是只读的）
*   它没有明显的突变方法

为了获得明确的证据，我建议从 Microsoft 下载 BCL 的[参考源](http://referencesource.microsoft.com/netframework.aspx)或使用 IL 反编译器向您展示类型在代码中的样子。

# hibernate - 使用 Ant for JPA-Pojos 生成 Schema-DDL 失败

> ID：10580271
> 
> 赞同：1
> 
> 时间：2012-05-14T09:00:49.940
> 
> 标签：hibernate, ant, jboss

我尝试`schema.ddl`从`entity-pojos`using生成一个`Hibernate 4.1`。
Hibernate-Libraries 包括`javaee-api-6.0.jar`在`WEB-INF/lib`. （项目在 上运行`JBoss 7.1.1`）。
我不想`hibernate.hbm2ddl.auto`用于自动模式生成。
所以我有以下蚂蚁目标：

```
<!-- language: xml -->

<target name="ddl-generation"
    description="Export schema to DDL file">

    <taskdef name="schemaexport" 
            classname="org.hibernate.tool.hbm2ddl.SchemaExportTask">
        <classpath>
            <fileset dir="WebContent/WEB-INF/lib">
                <include name="*.jar" />
            </fileset>
        </classpath>
    </taskdef>

    <schemaexport
        properties="${basedir}/src/META-INF/hibernate.properties" 
        quiet="no"
        text="no"
        drop="no"
        delimiter=";"
        output="${basedir}/schema-export.sql" />

</target> 
```

但是当我执行它时，它失败并出现以下错误：

```
java.lang.ClassNotFoundException: org.jboss.logging.BasicLogger
    at org.apache.tools.ant.AntClassLoader.findClassInComponents(AntClassLoader.java:1361)
    at org.apache.tools.ant.AntClassLoader.findClass(AntClassLoader.java:1311)
    at org.apache.tools.ant.AntClassLoader.loadClass(AntClassLoader.java:1064) 
```

我可以复制`jboss-logging-3.1.0.GA.jar`到 ant-target 的类路径，但是它失败了，因为`javaee-api-6.0.jar`仅用于编译：

```
java.lang.ClassFormatError: Absent Code attribute in method that is not native or abstract in class file javax/transaction/SystemException
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:615) 
```

我能做些什么来解决这个问题？
全部复制`Jboss-Jars`？！
任何人如何生成`DDL`from `JPA-Pojos`with `Hibernate 4`？
它似乎与`Hibernate3`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T19:29:13.300

您可能会发现这篇博文很有用[http://doingenterprise.blogspot.com/2012/05/schema-generation-with-hibernate-4-jpa.html](http://doingenterprise.blogspot.com/2012/05/schema-generation-with-hibernate-4-jpa.html)它描述了从 JPA 2.0 实体生成 ddl 脚本的过程。尽管它使用 Maven 作为示例，但它可以很容易地被 Ant 采用，因为它只是运行一个带有 main 方法的类。您只需要获得正确的依赖项。这个列表应该有望涵盖所有这些：

*   hibernate-entitymanager-4.1.3.Final.jar
*   jboss-logging-3.1.0.GA.jar
*   jboss-transaction-api_1.1_spec-1.0.0.Final.jar
*   dom4j-1.6.1.jar
*   hibernate-jpa-2.0-api-1.0.1.Final.jar
*   javassist-3.15.0-GA.jar
*   hibernate-core-4.1.3.Final.jar
*   antlr-2.7.7.jar
*   hibernate-commons-annotations-4.0.1.Final.jar
*   持久性-api-1.0.jar

# c# - 如何在 asp.net 中 20 分钟后停止会话超时？

> ID：10580274
> 
> 赞同：3
> 
> 时间：2012-05-14T09:01:06.960
> 
> 标签：c#, asp.net, visual-studio-2010

我正在使用 iis6 来部署我的应用程序。无论我如何更改 iis 配置中的超时，或者我添加一个 global.asax 文件来设置 Session.Timeout，甚至使用会话状态，我仍然在 20 分钟后获得会话超时，这太疯狂了！有人请帮帮我吗？我好困。。

网络配置：

```
 <authentication mode="Forms">
          <forms name="__authcookie" loginUrl="LoginPage.aspx" timeout="60" protection="All" requireSSL="false" slidingExpiration="true" cookieless="UseDeviceProfile" enableCrossAppRedirects="false"/>
      </authentication>
      <sessionState mode="InProc" timeout="60" customProvider="AppFabricCacheSessionStoreProvider"></sessionState>
    <membership>
      <providers>
        <clear />
        <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="ApplicationServices" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/" />
      </providers>
    </membership>
    <profile>
      <providers>
        <clear />
        <add name="AppFabricCacheSessionStoreProvider" type="Microsoft.ApplicationServer.Caching.DataCacheSessionStoreProvider" cacheName="NamedCache1" sharedId="SharedApp"/>
        <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="ApplicationServices" applicationName="/" />
      </providers>
    </profile> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T09:04:39.617

将其包含在您的 web.config 文件中：

使用 web.config

```
 <sessionState timeout="minutes"/> 
```

使用 IIS

在 Internet 服务管理器中更改以下超时值。选择一个大于默认值 20 的值。

1.  选择默认网站 > 属性 > 主目录 > 应用程序设置 > 配置 > 选项。

2.  启用会话状态超时并将会话超时设置为 60 分钟。

![在此处输入图像描述](../Images/0ecb8f24c7f075d3fea9034b1df76778.png)

3.  选择应用程序池 > DefaultAppPool > 属性。

4.  在 Idle timeout 下的 Performance 选项卡中，将 Shutdown worker processes after idle 设置为大于 20 的值。

![在此处输入图像描述](../Images/c02a12f1ebb3a12a0bcd25e9d30e577e.png)

IIS 上的默认会话超时设置为 20 分钟，但最长可以增加到 24 小时或 1440 分钟。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-25T17:41:20.023

我最近一直在为这个问题而苦苦挣扎。似乎有很多地方可以设置超时，但你的超时只会与设置***最短***的属性一样长。以下是我发现的一些事情......

*   正如大家建议的那样，检查web.config 文件中“ **sessionState** ”节点的“**超时**”属性。该值可以直接在 web.config 文件中编辑，也可以通过 IIS 配置进行编辑，如上面 @Romil 所述（尽管 UI 在更高版本的 IIS 中已更改，但设置类似）。

***   如果您正在实施 Forms 身份验证，那么在 web.config 文件中还为此定义了一个额外的超时设置。在 web.config 中查找 ... **system.web > authentication > forms**节点，并将“**超时**”属性也修改为所需的分钟数。

    *   这是我忽略的一个......在 IIS 中（肯定是 7.5 版，可能更早但我无法确认）右键单击关联的应用程序池并选择“**高级设置**”。在标题“**过程模型**”（必要时展开）下查找设置“**空闲超时（分钟）** ”。将此设置为所需的超时时间（以分钟为单位）。--*解释：*虽然**sessionState > timeout**设置会影响在浏览器中存储您的会话 ID 的 cookie 的过期，但*这个*超时实际上指示何时应该关闭工作进程（尚未使用）。一旦进程关闭，它就不再调用现有的会话 ID，因此浏览器 cookie 中的 ID 不再有用。** 

 **我希望这对那里的人有帮助。这个问题让我发疯了好几个小时，除了设置 sessionState 设置之外，我真的很惊讶关于这个问题的信息很少。

祝你好运，G

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T01:39:15.293

**Romil**的答案确实有效，我所做的只是更改应用程序的会话超时，而不更改空闲超时。现在，在他展示的方式从 20 分钟延长到 60 分钟后，它起作用了！**

# twitter - Twitter追随者个人资料扫描

> ID：10580280
> 
> 赞同：0
> 
> 时间：2012-05-14T09:01:32.070
> 
> 标签：twitter

我想扫描关注者的个人资料数据。我的目标是让关注者数量少于 20 个推特或 10 个关注者。我知道如何获取关注者个人资料数据。

现在，问题是假设一个个人资料有 1,00,000 个关注者，而不是收集所有个人资料数据并识别拥有少于 20 个推特或 10 个关注者的个人资料是一项非常艰巨的任务。而且我需要进行 1,00,000 次 twitter api 调用，这不是一个好主意。

示例：[http ://twitblock.org/](http://twitblock.org/)

有没有办法解决这个问题？

提前致谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T11:25:22.297

a）在单个请求中让他的追随者`followers/ids` 多达 5000 个，即至少有 20 个请求（为了安全起见，21 或 22 个）

b)`users/lookup`在单个请求中获取最多 100 个关注者的信息，即 1000 个请求

鉴于您每小时可以发出不超过 350 个请求，每个 oAuth 帐户您将需要使用多个经过身份验证的用户（确切地说是 3 个用户）的 oAuth 凭据。

# javascript - 浮动重定位的 CSS 过渡

> ID：10580281
> 
> 赞同：4
> 
> 时间：2012-05-14T09:01:36.337
> 
> 标签：javascript, html, css, css-float, css-transitions

我正在使用这样的东西：http: [//jsfiddle.net/Hh2Ht/](http://jsfiddle.net/Hh2Ht/)

如您所见，我有一组宽度相同但高度不同的浮动 div。但是，容器具有百分比宽度，并且作为连续性，当更改其大小时，浮动 div 会更改其位置。

我希望这种位置变化是动画的，使用 css 过渡。我可以通过绝对定位来做到这一点，一点点 javascript 来计算定位并将过渡效果绑定到顶部和左侧属性，但是因为我想准确地模拟浮动 div 的行为，所以没有绝对定位会很好。

你认为有可能吗？先感谢您。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T09:33:48.900

我真的不确定是否可以按照您使用纯 CSS 的描述重新定位块。主要是因为某些块必须移动到 DOM 中的不同位置，而这在 CSS 中是不可能的。

您是否尝试过使用[同位素](http://isotope.metafizzy.co/)插件？检查他们的网站，也许这就是你要找的。

# javascript - 识别 Javascript 字符串中的连续十六进制字符块

> ID：10580284
> 
> 赞同：1
> 
> 时间：2012-05-14T09:01:50.193
> 
> 标签：javascript

在javascript中，我想确定一个字符串是否仅由十六进制字符组成。即，我想检查字符串是否是范围内的连续字符块`a-f, A-F, 0-9`。我怎么能在javascript中做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T09:17:57.410

就像是：

`/^[a-f0-9]+$/i.test("ABCDEF")`

或者

```
var r = new RegExp("^[a-f0-9]+$", 'i')
r.test("ABCDEF"); 
```

# java - 来自 Java 的 egrep 失败，而在 shell 中成功

> ID：10580287
> 
> 赞同：0
> 
> 时间：2012-05-14T09:01:55.010
> 
> 标签：java, shell

我使用 Java Runtime.exec() 运行 egrep

```
String command = "egrep \'(Success|Loading\\.\\.\\.|Loaded : READY|Found a running instance)\' "+ instance.getPath() + "/log";
Runtime.getRuntime().exec(command); 
```

标准输出始终为空，标准错误显示“egrep：不匹配（或（”。但是当我将命令复制到 shell 并运行时，它返回正确的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T09:14:06.023

解决方案非常简单：`(Success|Loading\\.\\.\\.|Loaded`不是有效的正则表达式。

使用时不能用引号保护空格`Process.exec(String)`。始终使用`exec()`带有数组的版本，或者更好的是使用`ProcessBuilder`.

这样，您可以将每个参数作为单个 Java 字符串传递，空格和其他特殊字符不会产生任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T09:08:10.303

不应转义单引号。您也不会在命令行上转义它们，对吗？

# php - 将表单值存储在 Cookie 中

> ID：10580289
> 
> 赞同：3
> 
> 时间：2012-05-14T09:02:02.847
> 
> 标签：php, javascript, forms, cookies, setcookie

在过去的几个小时里，我一直在尝试自学 cookie 以及如何将一些表单字段中的值存储到 cookie 中。

我运气不好，我发现的所有例子都没有太大帮助。我应该使用 PHP 还是 JS 生成它们？任何反馈或正确方向的踢球将不胜感激！

[http://jsfiddle.net/yucM7/](http://jsfiddle.net/yucM7/)

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T09:17:37.330

这是一个[例子](http://jsfiddle.net/Xxqb6/2/)。

所有你需要的是 jQuery 和[cookie 插件](https://github.com/carhartl/jquery-cookie)

请记住，html 代码有一些变化。

```
$(document).on('submit', '#myForm', function() {
   // serialize our form (get string containing field names and values)
   dataString = $(this).serialize();
   // set new cookie
   $.cookie('formCookie', dataString);
   return false;
});

$(document).on('click', '#getCookie', function() {
   // get serialized string from cookie    
   cookieData = $.cookie('formCookie');
   // if cookie exists continue
   if (cookieData != null) {
        // split cookieData string into an array of fields and their values
        cookieArray = cookieData.split('&');
        // go through each field and split it too to get field name and it's value
        $.each(cookieArray, function(k, v) {
          field = v.split('=');
          // populate field with data
          $('#myForm [name="'+field[0]+'"]').val(field[1]);
        });
    }
   return false;
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T09:16:55.287

您可以通过以下方式使用 Javascript 设置 cookie（请参阅[http://www.w3schools.com/js/js_cookies.asp](http://www.w3schools.com/js/js_cookies.asp)）：

```
function setCookie(c_name,value,exdays)
{
    var exdate=new Date();
    exdate.setDate(exdate.getDate() + exdays);
    var c_value=escape(value) + ((exdays==null) ? "" : "; expires="+exdate.toUTCString());
    document.cookie=c_name + "=" + c_value;
} 
```

**使用 Jquery 设置 cookie：** `$.cookie("example", "foo");`

或者，您可以通过以下方式从服务器设置 cookie：

```
<?php
    $value = 'something from somewhere';
    setcookie("TestCookie", $value); 
```

# java - 如何检查是否在 Android 中使用了正确的 API 级别

> ID：10580294
> 
> 赞同：1
> 
> 时间：2012-05-14T09:02:17.687
> 
> 标签：java, android, api

我有一个 Android 应用程序：

```
<uses-sdk
    android:minSdkVersion="7"
    android:targetSdkVersion="14" /> 
```

所以它主要使用 api lvl 7 并且在某些时候它检查设备的版本并使用更高 API 的一些方法。

问题是 Eclipse 自动完成建议使用 api lvl 14 的方法，因此在大型程序中可能会错误地使用 8+ 级的方法。

有没有避免这种情况的技术？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T09:16:48.440

我同意 ngen 每隔一段时间将你的 targetSdkVersion 更改为 7，看看会弹出什么。同样在开发过程中，您通常可以将鼠标悬停在一个方法上并查看它的“Since”以了解它是有效的 API 级别（参见图片打击）

![自 API 级别](../Images/3bc2ef64478ab9a10ad67ec16efc8b98.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T09:17:34.260

可能您可以通过更改项目属性来获得所需的内容，这些属性在您创建项目时已设置为默认值。所以不要改变你的 Manifest 文件，而是选择 Project->Properties->Android->"Porject Build Target" 并选择一个级别为 7 的目标。这样你应该获得级别 7 的自动完成，但保留你的 manifest targetSdkVersion 属性到 14\. 此外，拥有两个虚拟设备来测试不同的行为可能是个好主意。

亚历克西斯

# javascript - Jquery keyup 无法在 Android 上运行

> ID：10580295
> 
> 赞同：9
> 
> 时间：2012-05-14T09:02:27.077
> 
> 标签：javascript, jquery, android, keyup

我没有在 iPhone 上测试过这段代码，但我确定（经过测试）它不适用于安卓手机：

```
 $('#search').live('keyup',function(key){
          if(key.which == 13){
            /*ANIMATE SEARCH*/
            _key = $(this).val();
            $("#wrapper").html("");
                $('#wrapper').hide(0).load('results.html').fadeIn(800);
                $('#search-fade').val(_key).fadeIn();
          }
      }); 
```

更好地解释：

我有一个简单的

```
<input type="text" name="search" id="search"/> 
```

不知道为什么，但是这段代码在安卓手机上不能正常工作

有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-14T09:20:47.847

```
$(document).on('keyup','#search', function() {
   // code
}); 
```

或者

```
$(document).delegate('#search', 'keyup', function() {
    // code
}); 
```

你也可以[在这里看到](https://stackoverflow.com/questions/6235794/jquery-mobile-for-every-live-tap-event-should-there-be-an-equivalent-click-even)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-16T19:34:36.533

## 我的解决方案（使用 jQuery 1.7.1）：

```
$('#search').live('input paste', yourFunction) 
```

## 提示：

使用`.on()`代替`.live()`，因为：

*   `.on()`是比较快的
*   `.live()`已弃用

[jQuery 1.7+ .on() 与 .live() 回顾](http://www.jquery4u.com/jquery-functions/on-vs-live-review/)

试试这个：

```
$(document).on('input paste', '#search', yourFunction) 
```

# php - 如何使用 JSON 发送数组数组

> ID：10580300
> 
> 赞同：1
> 
> 时间：2012-05-14T09:02:46.690
> 
> 标签：php, json

我有一个功能，可以从数据库中获取一些数据并将其发布给我的客户。目前它以普通数组的形式发送数据（输出类似于 MyArray (a,b,c,d..)），但我希望它是 MyArray (a(b,c,d)).. 就像Castegory（姓名，ID，订单..）..任何人都可以帮忙..这是我已经使用的版本的代码

```
public function get_button_template()
    {
        $this->q = "SELECT * FROM button_template ORDER BY order_number ASC";
        $this->r = mysql_query($this->q);
        if(mysql_num_rows($this->r) > 0)
        {        
            while($this->f = mysql_fetch_assoc($this->r))
            {
                $this->buttons[$this->i]["ID"] = $this->f["ID"];          
                $this->buttons[$this->i]["name"] = $this->f["button_name"];               
                $this->buttons[$this->i]["category"] = $this->f["button_category"];
                $this->buttons[$this->i]["order_number"] = $this->f["order_number"]; 
                $this->i++;
            }
        }
        return $this->buttons;
    } 
```

**请编辑**一些详细的细节..当我解析这个时，我得到这样的东西：

`"Vaule"( "Key1": "Value1" "Key2": "Value2" .`

但我想要的是类似的东西

```
 `"Category0":( "Key1": "Value1", "Key2": "Value2" . ) 

"Category1":( "Key1": "Value1", "Key2": "Value2" . )..` 
```

如何发送带有键值对的多维数组？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T09:05:47.617

使用 json_encode 函数。[http://php.net/manual/en/function.json-encode.php](http://php.net/manual/en/function.json-encode.php)

```
string json_encode ( mixed $value [, int $options = 0 ] ) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T09:11:24.810

只需更改构建阵列的方式即可。如果要按类别分组：

**编辑**

代码更改为使用名称 => 键映射创建编号类别。

```
$category_map = array(); $cat_nr = 0;
while ($this->f = mysql_fetch_assoc($this->r)) {
    if (!isset($category_map[$this->f["button_category"]])) {
        $category_key = "Category{$cat_nr}";
        $category_map[$this->f["button_category"]] = $category_key;
        ++$cat_nr;
    } else {
        $category_key = $category_map[$this->f["button_category"]];
    }
    $this->buttons[$category_key]][] = array(
        'category' => $this->f["button_category"],
        "ID" => $this->f["ID"],
        "name" => $this->f["button_name"],
        "order_number" => $this->f["order_number"],
    );
    $this->i++;
} 
```

这会产生一个数组，如：

```
<category 1>: [
    (CatName1, Id1, name1, ordernr1)
    (CatName1, Id2, name2, ordernr2)
],
<category 2>: [
    (CatName2, Id3, name3, ordernr3)
    (CatName2, Id4, name4, ordernr4)
] 
```

然后[`json_encode`](http://php.net/manual/en/function.json-encode.php)在最终结果上使用。

顺便说一句，不知道为什么将这些按钮存储在对象本身内;-)

# android - 如何将每个联系人的短信数量统计到文本视图中？

> ID：10580303
> 
> 赞同：2
> 
> 时间：2012-05-14T09:03:03.317
> 
> 标签：android, count, sms, contacts, message

我有一个在我的设备上显示联系人的**列表视图。**我想要做的是将我的设备从每个联系人收到的短信数量显示到我的列表视图中的文本视图中。我只能通过以下代码显示收件箱中的短信**总数：**

```
 // gets total count of messages in inbox
        String folder = "content://sms/inbox";
        Uri mSmsQueryUri = Uri.parse(folder);
        String columns[] = new String[] {"person", "address", "body", "date","status"}; 
        String sortOrder = "date ASC"; 
        Cursor c = context.getContentResolver().query(mSmsQueryUri, columns, null, null, sortOrder);

        textview.setText(c.getCount()); 
```

上面代码的问题是，对于我的列表视图中的每一行，这只显示总数。如何将总数拆分为其对应的联系人？

**如果我的收件箱中有 100 条消息，****最终**结果是这样的：

 **富满洲：25

酒吧蜜蜂：15

新风：10

约翰·多伊：50

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T02:49:29.030

```
Uri SMS_INBOX = Uri.parse("content://sms/conversations/");

Cursor c = getContentResolver().query(SMS_INBOX, null, null, null, null);

    startManagingCursor(c);
    String[] count = new String[c.getCount()];
    String[] snippet = new String[c.getCount()];
    String[] thread_id = new String[c.getCount()];

    c.moveToFirst();
    for (int i = 0; i < c.getCount(); i++) {
        count[i] = c.getString(c.getColumnIndexOrThrow("msg_count"))
                .toString();
        thread_id[i] = c.getString(c.getColumnIndexOrThrow("thread_id"))
                .toString();
        snippet[i] = c.getString(c.getColumnIndexOrThrow("snippet"))
                .toString();
        Log.v("count", count[i]);
        Log.v("thread", thread_id[i]);
        Log.v("snippet", snippet[i]);
        c.moveToNext();
    } 
```

查看日志并解决问题。不要转发相同的问题：[如何显示从联系人收到的短信数量？](https://stackoverflow.com/questions/10573178/how-do-i-display-the-count-of-text-messages-received-from-a-contact)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T09:17:41.687

我可能会添加`count(person) AS cnt`到`columns`String 数组，然后我会添加`person`作为方法的`groupBy`参数`query`。

**编辑：**

*正如Jens*所指出的`GROUP BY`，消息传递 ContentProvider 不支持该范例。

您可以做的是在应用程序启动时创建自己的内存数据库（http://www.sqlite.org/inmemorydb.html）并从系统消息传递数据库中复制粘贴（查询插入）感兴趣的消息到您的内存数据库中。（**注意！**如果您的内存不足并且有大量您感兴趣的消息，这可能会出错）。由于您将成为内存数据库中的上帝，因此您可以根据自己的喜好查询它，并使用您想要的任何奇异 SQL 查询...**

# javascript - 使用鼠标从 iframe 中选择文本并在 div 中显示选择

> ID：10580305
> 
> 赞同：3
> 
> 时间：2012-05-14T09:03:14.920
> 
> 标签：javascript, jquery

所以我知道如何用鼠标选择文本并在 div 中显示该选择。但是，当我有一个在同一域上显示页面的 iframe 时，我怎么能做同样的事情。

想不通。我已经实施了[这里](https://stackoverflow.com/questions/5448701/javascript-highlight-select-word-under-mouse-pointer)找到的解决方案。

任何可以帮助我的想法或链接到解决此问题的其他 SO 问题？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T09:09:04.523

您可以[在此处查看](http://www.dyn-web.com/tutorials/iframes/refs.php)如何获取对`window`和`document`的引用`iframe`（反之亦然，从 中获取对主文档的引用`iframe`）；从那里开始，应该很容易在主文档中执行您当前正在执行的任何操作。

# jquery - delegate, replace and fade / jQuery

> ID：10580308
> 
> 赞同：1
> 
> 时间：2012-05-14T09:03:30.113
> 
> 标签：jquery

A jQuery related question - I have a little gallery style script working - a list of thumbnails and associated larger images switching on thumbnail click, like so:

```
$('#thumbs').delegate('img','click', function(){
    $('#largeImage').attr('src',$(this).attr('src').replace('thumb','large'));
}); 
```

My question is: what's the easiest way of making the image transitions fade between one another rather than a straight switch?

Many thanks in advance for your help.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T09:06:23.480

You can [`fadeOut`](http://api.jquery.come/fadeOut) the image, then [`fadeIn`](http://api.jquery.come/fadeIn) in the callback after swapping the `src`:

```
$('#thumbs').delegate('img','click', function(){
    var src = this.src.replace('thumb', 'large');
    $("#largeImage").fadeOut(function() {
        this.src = src;
        $(this).fadeIn();
    });
}); 
```

[Live example](http://jsbin.com/edihum) using our gravatars | [source](http://jsbin.com/edihum/edit)

(Note that there's no need to go through `attr` for `src`; it's [reflected](http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-87762984) on the DOM element.)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T09:06:17.240

The *easiest* way would be to use one of the jQuery cycle plugins that exist. The one @ [malsup.com](http://jquery.malsup.com/cycle/) is a popular choice.

If you want to code it yourself, you'll have to use 2 image elements and position one behind the other, and fade out the one on top.

You can do this by using a `position: relative` on the parent of the `<img />` and a `position: absolute; top: 0; left: 0;` on the `<img />`. After you've faded the top image out [`fadeOut()`](http://api.jquery.com/fadeOut), you can remove it in the callback:

```
$('img_on_top').fadeOut('slow', function () {
    $(this).remove();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T09:06:37.027

```
$('#thumbs').delegate('img','click', function(){
    var src = $(this).attr('src').replace('thumb','large');
    $('#largeImage').fadeOut(100,function() {
      $(this).attr('src',src).fadeIn();
    });
}); 
```

# matlab - KnnImpute Matlab

> ID：10580312
> 
> 赞同：0
> 
> 时间：2012-05-14T09:04:09.940
> 
> 标签：matlab, missing-data, knn

在 matlab 中有一个名为 KnnImpute 的函数，它允许使用 Knn 算法替换矩阵中的缺失值。查看[http://www.mathworks.it/help/toolbox/bioinfo/ref/knnimpute.html](http://www.mathworks.it/help/toolbox/bioinfo/ref/knnimpute.html)我发现它搜索矩阵的列，但我想搜索沿行检查的邻居。是否有允许这样做的功能？我在哪里可以找到 matlab 代码来实现我的需要？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T09:08:13.517

您可以使用`'`并运行转置矩阵`knnimpute`吗？

# windows-7 - 本地计算机“受信任的根”证书的 PrivateKey 信任权限

> ID：10580326
> 
> 赞同：7
> 
> 时间：2012-05-14T09:04:51.257
> 
> 标签：windows-7, iis-7, certificate, windows-server-2008-r2, private-key

我有一个必须导入**证书/受信任的根证书颁发机构**的证书，并且有一个相应的私钥。

要从代码中实际访问密钥，您需要设置私钥权限以授予对特定 IIS 应用程序池的完全访问权限。我完全理解这一点，但问题是只能在个人证书上设置，而不能在受信任的根证书上设置。

我尝试将相同的证书添加到个人商店，并且以下代码没有中断：

```
X509Store store = new X509Store(StoreName.Root, StoreLocation.LocalMachine);
store.Open(OpenFlags.ReadOnly);

foreach (X509Certificate2 cert in store.Certificates)
{
    if (cert.HasPrivateKey)
    {
        // access private key here
    }
}

store.Close(); 
```

`StoreName.Root`如果我更改为.在个人商店中设置证书权限可以工作`StoreName.My`。我可以在那里访问它。但是我无法以root访问它。它只是说：

> **键集不存在**

有什么建议么？

## 附加信息

如果我将我的应用程序池身份设置为**本地系统**（对我的机器拥有全部权限），我可以**成功**访问私钥。所以主要问题是如何设置我的应用程序池身份的权限以访问受信任的根存储中证书的私钥。

> **为什么信任根存储而不是个人存储？**
> 我有一个预先构建的程序集，可以在这个特定的商店中访问这个证书，所以简单地将证书放在个人商店中不会对我有用。这就是为什么必须在受信任的根证书的私钥上设置信任权限的原因。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T04:24:43.563

我没有尝试过使用受信任的根证书颁发机构，但我发现使用其他证书存储最简单的方法是将证书拖放到个人存储中，然后设置权限，然后拖放回原始证书存储。在您的情况下，受信任的根证书颁发机构。

使用证书 MMC 的步骤：

1.  [将证书导入您想要的商店并将密钥标记为可导出。](https://stackoverflow.com/questions/2609859/how-to-give-asp-net-access-to-a-private-key-in-a-certificate-in-the-certificate)（你也许可以绕过这个并直接导入到个人商店，但我没有尝试过。）
2.  将导入的证书拖放到个人商店。
3.  右键单击个人存储中的证书，然后在上下文菜单中单击“所有任务”，然后在子菜单中单击“管理私钥”。[根据步骤 1](https://stackoverflow.com/questions/2609859/how-to-give-asp-net-access-to-a-private-key-in-a-certificate-in-the-certificate)中引用的应用程序池设置适当的权限。
4.  设置权限后，将证书拖放回原始存储（在您的情况下为受信任的根证书颁发机构）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-14T15:19:56.583

## 解决方案

可以对个人证书存储区以外的证书设置信任权限，但不能通过 MMC 设置权限。至少不是直接在商店里。接受的答案显示了一种简化的方法，通过移动证书来实现相同的结果。

你必须这样做...

## 获取工具

1.  从 Microsoft获取[WF_WCF_Samples文件。](http://www.microsoft.com/en-us/download/details.aspx?id=21459)这是一个自解压档案，但您不需要解压所有内容。所以...
2.  使用任何存档工具打开文件，仅提取**FindPrivateKey**解决方案/项目
3.  在 Visual Studio 中打开并编译它。

## 找到你的私钥

1.  打开 MMC 并添加*证书*管理单元。添加时请确保选择计算机和本地计算机。

2.  选择拥有您的证书和私钥的商店。

3.  打开私钥并复制其*指纹*

4.  打开命令提示符并导航到您编译*FindPrivateKey*工具的文件夹

5.  输入这个命令

    > FindPrivateKey YourStoreName LocalMachine -t "ThumbprintWithSpaces" -a
    > 即。
    > FindPrivateKey Root LocalMachine -t "83 45 22 ..." -a

6.  复制文件和路径（它可能会跨越两行，所以复制到记事本并连接）

## 授予证书信任

1.  打开命令提示符并输入：

    > icacls "FullPathOfYourPrivateKey" /grant:r "UserFQDN":f
    > 即。
    > icacls "c:\ProgramData..." /grant:r "IIS AppPool\ASP.NET v4.0":f

2.  完毕。

这将为您的用户授予证书私钥完全信任（在我上面的例子中，它是应用程序池身份），因此您可以使用密钥对数据进行签名或做任何您需要做的事情。

如果您不想要完全权限，您可以轻松更改冒号后的最后一部分。它可以有许多不同的设置，所以我强烈建议您查看*icacls* [command help](http://technet.microsoft.com/en-us/library/cc753525(v=ws.10).aspx)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-26T14:12:28.690

如果您使用的是**Windows Server 2003** ，您会注意到您的证书下没有“**管理私钥”任务。**

如果您将**Microsoft WSE 2.0**安装到您的机器上，您可以使用一个名为**X509 Certificate Tool**的工具。只需搜索您的证书，它很可能在（或应该）在本地机器/个人商店中。

注意：如果您在当前用户/个人商店中有您的证书（这通常是默认设置），它只能由当前登录的用户访问，这意味着如果您希望您的网络服务器访问它，它不能无需更改对您的 AppPool 的权限。

您应该能够非常轻松地更改私钥的权限，默认情况下，您的 Web 服务器上的 AppPool 将使用**NETWORK SERVICE**来运行您的 Web 应用程序。因此，只需将 NETWORK SERVICE 添加到安全性，默认情况下它将设置**读取和读取/执行权限**，这足以让您的 BouncyCastle 等读取私钥，以便您签署文档。

希望这可以帮助。

![在此处输入图像描述](../Images/11d30144e3cfea2d62b511294083cfec.png)

# c# - 在现有接口上应用 ServiceContract 和 OperationContract

> ID：10580327
> 
> 赞同：3
> 
> 时间：2012-05-14T09:04:57.433
> 
> 标签：c#, .net, wcf

我有一些在整个系统中使用的现有接口。

现在我想使用其中一个接口作为服务合同。

但问题是我需要在现有接口上添加`[ServiceContract]`和`[OperationContract]`属性，它们会污染其余代码。

在不复制接口的情况下可以解决这个问题吗？

将属性应用于具体实现？这是一个好习惯吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-14T09:31:53.480

您可以简单地使用 service-warpper 类型接口扩展接口，即：

```
public interface IMyCode
{
    string GetResult();
}

[ServiceContract]
public interface IMyCodeService : IMyCode
{
    [OperationContract]
    string GetResult();
} 
```

C#允许接口继承，编译器会吐出`IMyCodeService.GetResult`需要new的警告，因为它隐藏了`IMyCode.GetResult`方法，但不追加`new`不会破坏实现，例如：

```
class Program
{
    static void Main(string[] args)
    {
        MyCodeService service = new MyCodeService();
        IMyCodeService serviceContract = (IMyCodeService)service;
        IMyCode codeContract = (IMyCode)service;

        service.GetResult();
        serviceContract.GetResult();
        codeContract.GetResult();

        Console.ReadKey();
    }
}

public interface IMyCode
{
    void GetResult();
}

public interface IMyCodeService : IMyCode
{
    void GetResult();
}

public class MyCodeService : IMyCodeService
{
    public void GetResult()
    {
        Console.Write("I am here");
    }
} 
```

这样，您可以在不更改现有代码的情况下提供基于现有接口的服务合同。

如果您共享您的合同程序集而不是使用 WCF 为您生成代理，您甚至可以在您接受现有接口的地方传递您的服务合同，因为服务接口继承自它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T09:17:49.673

我们正在慢慢尝试迁移到 WCF 并遇到同样的问题。除了用属性装饰服务接口之外，我们想不出另一种方法。它们是属性，因此希望不会过多地污染代码。

我们必须做的一件事（从遗留 Web 服务移动时，确保所有依赖项都移动到公共位置，以便可以从 Global.aspx 和 WCF 主机服务调用它们）

您必须在具体实现上实现属性（主要是与 ServiceBehavior 相关的属性），以便 WCF Host 可以托管它。至于OperationContract，我们主要应用在接口上。

# php - 使用 PDO 将记录插入宽表

> ID：10580328
> 
> 赞同：0
> 
> 时间：2012-05-14T09:05:21.397
> 
> 标签：php, pdo

使用 PDO 将记录插入宽表时是否有任何快捷方式？

到目前为止，我一直在使用 Zend_Db_Table，它接受一个列/值对数组并返回插入记录的 PK。

使用 PDO 时，似乎我需要在准备 PDOStatement 时在插入语句中列出我的所有字段，然后在我执行它时输入一个包含我所有值的数组。似乎路途遥远？还是我错过了什么？（请不要说“一个 ORM”）......

谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T09:12:08.740

如果您在数据库列上指定默认值，那么您不必在插入时显式指定值。如果您离开该列，那么它将获得默认值。

不过要小心这一点，内隐行为往往会在你最意想不到的时候回来咬你。像现在这样明确指定每一列的好处是，当您在六个月后返回并查看源代码时，可以清楚地看到插入的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T09:11:35.153

如果我明白你的意思。如果您使用的是 MySQL，您可以像这样创建自定义插入语句。好吧好吧，这不是最好的方法，但无论如何..

```
$data = array(
 'col1' => 'value1',
 'col2' => 'value2',
 'col3' => 'value3',
 'coln' => 'valuen',
 'col1000' => 'value10000'
);

insert into mytable ('.join(',', array_keys($data)).') values ("'.join('", "', $data).'"); 
```

# f# - 来自 F# 编译器的虚假“值的重复定义”错误

> ID：10580329
> 
> 赞同：5
> 
> 时间：2012-05-14T09:05:25.767
> 
> 标签：f#

`Duplicate definition of value foo`F# 编译器有时会拒绝我的代码，并出现指向如下定义的编译时错误：

```
let foo = ref 0 
```

即使这不是重复的定义，因为`foo`整个文件中没有其他定义。为什么会这样？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-14T09:07:17.260

当您还定义一个`get_foo`函数时会发生这种情况：

```
let get_foo() = !foo 
```

因为 的定义`foo`创建了一个实现自己的`get_foo`方法的属性，所以存在冲突。F# 编译器对此感到困惑并生成虚假的“重复定义错误”。

此错误已报告给 Microsoft，他们正在努力修复，但不会将其纳入 F# 的下一个 (VS11) 版本。

# c# - 如何在 C# 中搜索 pdf 中的文本（执行匹配）

> ID：10580337
> 
> 赞同：0
> 
> 时间：2012-05-14T09:06:05.700
> 
> 标签：c#, visual-studio-2008, .net-3.5, adobe-reader, axacropdf

我卡在我的应用程序中。我想通过 c# 中的 axacropdf 控件搜索文本（完全匹配）和位置并突出显示 pdf 中的文本。我怎样才能做到这一点。我用谷歌搜索了很多主题，但没有帮助。我怎样才能实现这个目标。你有任何代码或dll。请给我一些代码。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T08:06:04.050

使用 Bytescout.PDFExtractor；

```
 try
        {
            if (openFileDialog1.ShowDialog() == DialogResult.OK)
            {
                FileName = openFileDialog1.FileName;

                string FName = FileName;
                int a = FileName.LastIndexOf('\\');
                txtFileName.Text = FileName.Substring(a + 1);

                axAcroPDF1.LoadFile(FileName);

                FileInfo fi = new FileInfo(FileName);
                string PDFFileName = fi.Name.ToString();
                double filesize = (fi.Length / 1024F / 1024F);
                string size = filesize.ToString("0.00 MB");
                string CreationDate = fi.CreationTime.ToString();
                string LastAccessDate = fi.LastAccessTime.ToString();
                string ModifiedDate = fi.LastWriteTime.ToString();

                lblVersion.Text = "File Name         : " + PDFFileName + "\nSize                  : " + size + "\nCreation Date   : " + CreationDate + "\nModified Date   : " + ModifiedDate;

                TextExtractor extractor = new TextExtractor();
                extractor.RegistrationName = "Demo";
                extractor.RegistrationKey = "Demo";
                extractor.LoadDocumentFromFile(FileName);

                int pageCount = extractor.GetPageCount();

                RectangleF location;

                for (int s = 0; s <= Keywords.Length - 1; s++)
                {

                    if (Keywords[s] != "")
                    {
                        TreeNode tNode = new TreeNode();

                        tNode = treeView1.Nodes.Add(Keywords[s]);

                        for (int i = 0; i < pageCount; i++)
                        {
                            if (extractor.Find(i, Keywords[s], false, out location))
                            {
                                do
                                {
                                    int j = i;
                                    tNode.Nodes.Add((j+1).ToString() + "     " + location.ToString());

                                    float X = location.X;
                                    float Y = location.Y;
                                    float Width = location.Width;  
                                    float Height = location.Height;

                                    float Left = location.Left;
                                    float Right = location.Right;
                                    float Top = location.Top;
                                    float Bottom = location.Bottom;

                                    //axAcroPDF1.setCurrentHighlight(Convert.ToInt32(X), Convert.ToInt32(Y), Convert.ToInt32(Width), Convert.ToInt32(Height));

                                }
                                while (extractor.FindNext(out location));
                            }
                        }
                    }
                    else
                    {

                    }
                }      
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message.ToString(), "Exception", MessageBoxButtons.OK, MessageBoxIcon.Error);
        } 
```

# php - Moodle如何找出登录用户的角色

> ID：10580338
> 
> 赞同：10
> 
> 时间：2012-05-14T09:06:07.023
> 
> 标签：php, moodle

如何在moodle中获取登录用户的上下文/角色？我正在尝试实现一个上下文感知块。该块会根据用户的情绪向其建议正确的测验。

角色可以是教师、学生、教师助理或管理员。我已经找到了`get_context_instance()`&`has_compatibility()`函数，但我不知道如何将它们用于此目的。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-08-07T10:33:44.620

检查用户是否是管理员

```
$admins = get_admins();
$isadmin = false;
foreach($admins as $admin) {
    if ($USER->id == $admin->id) {
        $isadmin = true;
        break;
    }
} 
```

将结果用于函数

```
if ($isadmin) {
    echo "you are an admin";    
} else { 
    echo "you are not an amidn";
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-14T05:37:11.477

```
$context = get_context_instance (CONTEXT_SYSTEM);
$roles = get_user_roles($context, $USER->id, false);
$role = key($roles);
$roleid = $roles[$role]->roleid; 
```

它对我有用

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-12-30T07:50:20.397

在 Moodle 2.x 中，您可以使用该功能`get_user_roles`，这将返回在课程、站点或模块的上下文中分配给特定用户的角色列表。

```
$context = get_context_instance(CONTEXT_COURSE, $courseid, true);
$roles = get_user_roles($context, $USER->id, true); 
```

您还可以在模块的上下文中获取角色。

```
$context = get_context_instance(CONTEXT_MODULE, $cm->id, true);
$roles = get_user_roles($context, $USER->id, true); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-15T13:35:29.980

在moodle中，角色是基于上下文的。我认为此代码段将对您有所帮助。

全球$COURSE，$USER；

```
$context = get_context_instance(CONTEXT_COURSE,$COURSE->id);

if (has_capability('moodle/legacy:student', $context, $USER->id, false) ) {
echo "Student";
}

if (has_capability('moodle/legacy:editingteacher', $context, $USER->id, false)) {
echo "is Teacher<br/>";
}
if (has_capability('moodle/legacy:admin', $context, $USER->id, false)) {
echo "is ADMIN<br/>";
} 
```

请记住，完全有可能（但不太可能）拥有一个没有默认学生和教师角色的 Moodle 站点

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-05-19T07:32:34.947

您可以通过以下方式测试用户具有哪些角色：

```
if (user_has_role_assignment($user1->id, $roleid))
    echo "User is a teacher in some course"; 
```

教师的角色 id 通常为 3，学生的角色 id 通常为 5，但您可以查看站点管理-> 用户-> 权限-> 定义角色中的表格来测试这一点

请注意，一个用户可以具有不同的角色。功能 user_has_role_assignment 似乎测试他在系统范围内拥有哪些角色。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-04-06T07:47:59.260

包含库“accesslib.php”，然后使用“is_siteadmin()”函数

# django - django 基于过滤器从多对多表关系中清除所有用户

> ID：10580344
> 
> 赞同：0
> 
> 时间：2012-05-14T09:06:25.217
> 
> 标签：django, django-views

我试图从`Team`基于两个因素调用的表中清除所有用户：

1.  `team_id`
2.  用户配置文件中的自定义变量称为`level`

贝娄是我目前的努力，我很清楚这是行不通的，但至少这是一个起点。

```
team = Team.objects.get(pk = team_id)
team_user_list = team.users.all().filter(userprofile__level = 1)
team_user_list.users.clear() 
```

注意：我不想删除用户，只需将它们从团队表中删除即可。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T09:15:52.850

`team_user_list`是查询集，所以它没有`users`属性。尝试

```
team = Team.objects.get(pk = team_id)
filtered = team.users.filter(userprofile__level = 1)
team.users.remove(*filtered) 
```

# regex - 正则表达式中不匹配的括号 - Linux

> ID：10580347
> 
> 赞同：1
> 
> 时间：2012-05-14T09:06:35.000
> 
> 标签：regex, linux, perl

我想替换（整个字符串）

```
 $(TOPDIR)/$(OSSCHEMASDIRNAME) 
```

和

```
 /udir/makesh/$(OSSCHEMASDIRNAME) 
```

在[生成文件中](http://en.wikipedia.org/wiki/Make_%28software%29)

我试过了

```
 perl -pi.bak -e "s/\$\(TOPDIR\)\/\$\(OSSCHEMASDIRNAME\)/\/udir\/makesh\/\$\(OSSCHEMASDIRNAME\)/g " makefile 
```

但我得到了无与伦比的括号错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T09:16:28.857

您必须“加倍”转义美元符号。像这样：

```
echo "\$(TOPDIR)/\$(OSSCHEMASDIRNAME)" | perl -p -e "s/\\$\(TOPDIR\)\/\\$\(OSSCHEMASDIRNAME\)/\/udir\/makesh\/\\$\(OSSCHEMASDIRNAME\)/g" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T09:18:23.660

首先，您不需要使用`/`正则表达式。他们只是规范的。你几乎可以使用任何东西。因此，您的代码可以变成（简化一些`\`）：

```
perl -pi.bak -e "s|\$\(TOPDIR\)/\$\(OSSCHEMASDIRNAME\)|/udir/makesh/\$\(OSSCHEMASDIRNAME\)|g " makefile 
```

现在要实际解决您的问题，因为您使用的是`"`代替`'`，所以外壳会尝试找出什么`$\`意思，然后将其替换为（大概）什么都没有。所以你真正想要的是：

```
perl -p -i.bak -e 's|\$\(TOPDIR\)/\$\(OSSCHEMASDIRNAME\)|/udir/makesh/\$\(OSSCHEMASDIRNAME\)|g' makefile 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T11:31:01.530

当对转义有疑问时，您可以简单地使用[`quotemeta`](http://perldoc.perl.org/functions/quotemeta.html)or [`\Q ... \E`](http://perldoc.perl.org/perlre.html#Quoting-metacharacters)。

```
perl -pe 's#\Q$(TOPDIR)\E(?=/\Q$(OSSCHEMASDIRNAME)\E)#/udir/makesh#;' 
```

请注意使用前瞻断言来避免我们在替换中重复尾随部分的麻烦。

`quotemeta`解决方案类似于：

```
perl -pe 'BEGIN { $dir = quotemeta(q#$(TOPDIR)/$(OSSCHEMASDIRNAME)#); }
          s#$dir#/udir/makesh/$(OSSCHEMASDIRNAME)#;' 
```

当然，您*不需要*使用实际的单线。当 shell 引用引起麻烦时，最简单的选择是为您的脚本编写一个小源文件：

```
s#\Q$(TOPDIR)\E(?=/\Q$(OSSCHEMASDIRNAME)\E)#/udir/makesh#; 
```

并运行：

```
perl -p source.pl inputfile 
```

# android - 图形布局和设备中的 UI 不一样 [Android]

> ID：10580355
> 
> 赞同：0
> 
> 时间：2012-05-14T09:07:00.553
> 
> 标签：android, xml, listview, layout

图形布局中的 ListView 适合适当的高度，但是当我导入 android 设备时，ListView 在一个小范围内缩小。我希望 ListView 在 xml 文件和真实设备屏幕中的图形布局中相同

```
 <LinearLayout 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"

        android:layout_margin="10sp"
        android:id="@+id/header"
         >
    <TextView 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/id"
        android:layout_weight="1.25"
        android:gravity="center"/>
    <TextView 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/amount"
        android:layout_weight="1"
        android:gravity="center"/>
    <TextView 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/alert"
        android:layout_weight="1"
        android:gravity="center"/>
    <TextView 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/detail"
        android:layout_weight="1"
        android:gravity="center"/>
    </LinearLayout>

<ListView 
    android:id="@+id/android:list"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="1"
    android:layout_margin="10sp"></ListView>

<RelativeLayout

    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_weight="2.5">
<Button 
     android:id="@+id/addQueue"
     android:layout_width="80dp"
     android:layout_height="wrap_content"
     android:layout_alignParentBottom="true"
     android:layout_alignParentRight="true"
     android:layout_margin="10dp"
     android:text="@string/addQueue"/>
 <Button 
     android:id="@+id/submit"
     android:layout_width="80dp"
     android:layout_height="wrap_content"
     android:layout_alignParentBottom="true"
     android:layout_alignParentLeft="true"
     android:layout_margin="10dp"
     android:text="@string/submit"/>
  <Button
     android:id="@+id/reset"
     android:layout_width="80dp"
     android:layout_height="wrap_content"
     android:layout_alignBaseline="@+id/addQueue"
     android:layout_centerHorizontal="true"
     android:layout_margin="10dp"
     android:text="@string/resetQueue" />
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T09:40:18.613

我试图修改你的布局。试试这个可能对你有帮助..只需创建一个新的 xml 布局文件并检查它是否适合你。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/RelativeLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/addQueue"
        android:layout_width="100dp"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:layout_alignTop="@+id/submit"
        android:text="addQueue" />

    <Button
        android:id="@+id/submit"
        android:layout_width="100dp"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:text="submit" />

    <Button
        android:id="@+id/reset"
        android:layout_width="100dp"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:text="resetQueue" />

    <LinearLayout
        android:id="@+id/header"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:orientation="horizontal" >

        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1.25"
            android:gravity="center"
            android:text="text1" />

        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:gravity="center"
            android:text="text2" />

        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:gravity="center"
            android:text="text3" />

        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:gravity="center"
            android:text="text4" />

    </LinearLayout>

    <ListView
        android:id="@+id/listView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_above="@+id/addQueue"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/header" >

    </ListView>

</RelativeLayout> 
```

我的自定义适配器类在这里。：

```
public class my_custom_adapter extends ArrayAdapter<String> {
    private Context context                     = null;
    String[]  elements                 = null;
    private ArrayList<Boolean> itemChecked      = null;

    public my_custom_adapter(Context context, int type, String[]  elements2)
    {
        super(context, type, elements2);
        this.elements =  elements2;
        this.context = context;
        itemChecked = new ArrayList<Boolean>();
        BroadcastReceiver receiver = new BroadcastReceiver() {
            @Override
            public void onReceive(Context context, Intent intent) {
                if (intent.getAction().equals("master_check_change")) {
                    boolean check_value = intent.getBooleanExtra("check_value", false);
                    set_checked(check_value);
                    notifyDataSetChanged();
                }
            }
        };
        context.registerReceiver(receiver, new IntentFilter("master_check_change"));
        set_checked(false);
    }

    // AS EVERY TIME LISTVIEW INFLATE YOUR VIEWS WHEN YOU MOVE THEM SO YOU NEED TO SAVE ALL OF YOUR CHECKBOX STATES IN SOME ARRAYLIST OTHERWISE IT WILL SET ANY DEFAULT VALUE.
    private void set_checked(boolean is_checked)
    {
        for (int i=0; i < elements.length; i++) {
            itemChecked.add(i, is_checked);
        }
    }

    //THIS IS SIMPLY A CLASS VIEW WILL HOLD DIFFERENT VIEWS OF YOUR ROW.
    static class ViewHolder
    {
        public TextView tv;
        public CheckBox cb;
        public ImageView iv;
    }

    @Override
    public View getView (final int position, View convertView, ViewGroup parent)
    {
        View rowView = convertView;
        ViewHolder holder = null;

        if (rowView == null) {
            LayoutInflater inflater = (LayoutInflater)context.getSystemService(
                                               Context.LAYOUT_INFLATER_SERVICE);
            // HERE I AM INFLATING LISTVIEW LAYOUT.
            rowView = inflater.inflate(R.layout.inflated_layout, null, false);
            holder = new ViewHolder();
            holder.cb = (CheckBox) rowView.findViewById(R.id.checkBox1);
            holder.tv = (TextView) rowView.findViewById(R.id.textView1);
            holder.iv = (ImageView) rowView.findViewById(R.id.imageView1);
            rowView.setTag(holder);

        } else {
            holder = (ViewHolder) rowView.getTag();
        }

        if (holder != null) {
            holder.tv.setText(elements[position]);

            holder.cb.setOnCheckedChangeListener(new OnCheckedChangeListener() {

                @Override
                public void onCheckedChanged(CompoundButton buttonView,
                                             boolean isChecked) {
                    itemChecked.set(position, isChecked);
                }
            });

            if(position < itemChecked.size()) {
                holder.cb.setChecked(itemChecked.get(position));
            }
        }
        return rowView;
    }
} 
```

我的活动类在这里我创建自定义适配器对象，

```
public class Test_stflowActivity extends Activity {
    public CheckBox master_cb = null;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.temp_layout);
        String[] elements = new String[10];
        for (int i = 0; i < 10; i++) {
            elements[i] = "elements " + i;
        }

        CheckBox master_cb = new CheckBox(getApplicationContext());
        master_cb.setText("Check All");
        //HERE IS THE LIST VIEW WHICH I HAVE CREATED IN MY XML FILE.
        ListView lv = (ListView) findViewById(R.id.listView1);
        //HERE I AM CREATING CUSTOM ADAPTER OBJECT.
        my_custom_adapter adapter = new my_custom_adapter(this, android.R.layout.simple_list_item_1, elements);
        lv.addHeaderView(master_cb);
        lv.setAdapter(adapter);
        master_cb.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
            @Override
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                Intent my_intent = new Intent("master_check_change");
                my_intent.putExtra("check_value", isChecked);
                sendBroadcast(my_intent);
            }
        });
    }
} 
```

# android - Android 应用中的 Google 帐户

> ID：10580356
> 
> 赞同：2
> 
> 时间：2012-05-14T09:07:02.457
> 
> 标签：android

我正在 Android 中创建一个应用程序，该应用程序将提供多种登录选择，例如 Facebook 和 Twitter。现在，我想问一下是否有办法为 Google 帐户提供自定义登录页面？如果可能，怎么做？你有任何示例代码可以帮助我开始吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T09:27:46.260

你不能为 Facebook、Twitter 或 google 制作自定义登录页面 Facebook、Twitter 和 Google plus 有很多 Api，你可以使用这个库或 jar 文件，如

```
 1) for Twitter you can use 
```

[http://twitter4j.org/en/index.html](http://twitter4j.org/en/index.html)这个jar文件

```
 2) for Facebook use this 
```

[http://www.java2s.com/Code/Jar/f/Downloadfacebookandroidsdkjar.htm](http://www.java2s.com/Code/Jar/f/Downloadfacebookandroidsdkjar.htm) 或[http://developers.facebook.com/blog/post/385/](http://developers.facebook.com/blog/post/385/)

```
3) for google plus use this site 
```

[https://developers.google.com/+/api/](https://developers.google.com/+/api/)

[https://developers.google.com/+/downloads/](https://developers.google.com/+/downloads/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T09:16:06.553

您可以从[Google Android Docs开始阅读](https://developers.google.com/google-apps/tasks/oauth-and-tasks-on-android#account "谷歌身份验证")

示例代码已经存在。

# c# - 通过控件绘制垂直线

> ID：10580358
> 
> 赞同：0
> 
> 时间：2012-05-14T09:07:19.317
> 
> 标签：c#, wpf

我有一个如下的用户界面：

![在此处输入图像描述](../Images/0193883b1ef807c67d34703c109e45d2.png)

问题是目前将名称与消息分开的线不可见，除非屏幕已填满（它基本上是自定义控件上的边框）。

我想要的是让父控件 ( `stackpanel`) 永久有一条线穿过它，而不必在每个控件上使用边框`MessageControl`。

这可能吗？

这是代码`stackpanel`：

```
<UserControl x:Class="ChatBoxWPF.ChatWindow"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" d:DesignHeight="402" d:DesignWidth="700" xmlns:my="clr-namespace:ChatBoxWPF" VerticalContentAlignment="Stretch" VerticalAlignment="Stretch">
    <ScrollViewer>
        <StackPanel Name="Messages" VerticalAlignment="Bottom"></StackPanel>
    </ScrollViewer>
</UserControl> 
```

更新 1：

我试过这个：

```
<ScrollViewer Name="scroll">
    <StackPanel Name="Messages" VerticalAlignment="Bottom">
            <Line StrokeThickness="1" X1="100" Y1="0" X2="100" Y2="{Binding ElementName=scroll, Path=ActualHeight}" />
        </StackPanel>
</ScrollViewer> 
```

没有网格。它现在有时会显示在设计器中，有时则不会。当运行时根本不显示。我需要网格吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T09:27:14.327

我建议你使用第二层作为背景——第二层可以是一个简单的网格或任何你喜欢的东西：

```
<Grid>
  <Grid ZIndex="0">
     <anything I want!>
  </Grid>
  <ScrollViewer ZIndex="1">
         <StackPanel Name="Messages" VerticalAlignment="Bottom">
         </StackPanel>
  </ScrollViewer>
</Grid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T09:19:44.960

一个非常直率和简单的方法：

```
<Grid>
    <ScrollViewer>
        <StackPanel Name="Messages" VerticalAlignment="Bottom"></StackPanel>
    </ScrollViewer>
    <Line StrokeThickness="0.5" X1="116" X2="116" Y1="0" Stroke="Gainsboro" Y2="{Binding ElementName=ToLevelControl, Path=ActualHeight}" />
</Grid> 
```

# c# - 如何使用自定义控件扩展 Windows 8 资源管理器功能区？

> ID：10580362
> 
> 赞同：8
> 
> 时间：2012-05-14T09:07:46.653
> 
> 标签：c#, windows-8, explorer, extend

例如，我想做简单的调整器，您可以在资源管理器中选择图像并设置新尺寸。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T18:13:04.707

无法修改 Windows Explorer 8 功能区。

> 但是，加载项将无法插入功能区 UI。这对我们来说是一个艰难的工程选择，我们希望你们中的许多人会阅读此内容并建议我们添加该功能——当然，如果我们这次能做到这一点，我们就会这样做。这个博客的很大一部分是分享这些选择——权衡——在新功能和添加我们可以梦想和完成的一切之间。我们还认为这次我们提供的定制和改进是值得的。

从[这里](http://blogs.msdn.com/b/b8/archive/2011/08/29/improvements-in-windows-explorer.aspx)。

# html - HTML5 离线单页应用程序 (SPA) - 安全问题

> ID：10580364
> 
> 赞同：3
> 
> 时间：2012-05-14T09:07:52.197
> 
> 标签：html, knockout.js, single-page-application

我们想用敏感的业务数据构建一个支持离线的 HTML5 SPA。最有可能使用 knockout.js！

但我们有非常棘手的安全问题。

加密呢？加密可能是可能的。但是适当的密钥也必须在（离线）客户端。如果您在客户端同时拥有算法和密钥，您还可以将其未加密地存储在本地存储中。

数据操作呢？使用 Firebug 等工具可以轻松操作 DOM 或 JavaScript 对象。

我真的很喜欢淘汰赛，但它不适合现实世界的商业应用程序。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T15:33:02.153

我不是安全专家，但是如果您使用 js 来加密/解密 client-sde，您是否不必在客户端同时存储公钥和私钥？有效地中和您的整个安全模型。

我认为，一旦您拥有数据客户端，就真的无法保证其完全安全，您必须信任浏览器以保持状态的私密性，但要真正做到 100% 安全，您要么必须放弃网络，要么承担后果通过在特定时间段后重定向到页面或破坏您的状态，将部分数据发送到客户端并依靠服务器端来填补空白。从某种意义上说，如果您不关闭选项卡，所有网页都可以离线使用。想想你的银行网站，页面上有你所有的账户活动，从安全的角度来看，我认为它和离线 js 没有区别。

回复：数据操作，这确实不是一个 KO “功能”，但 JS 允许您进行非常高级的数据操作，而像 linq.js 这样的库使事情变得更加容易。不完全是 sql，但仍然值得尊敬。

我认为 KO 绝对适合现实世界的业务应用程序。更广泛地说，浏览器/js/html 可能不适合您所追求的安全级别。

有点啰嗦，希望对你有帮助。

# c# - 反序列化时如何使用 C# 中的 Json.Net 将名称重新映射到对象属性

> ID：10580365
> 
> 赞同：1
> 
> 时间：2012-05-14T09:07:57.923
> 
> 标签：c#, json.net

案例：我从第三方服务器收到一个 JSON 字符串，其中包含一个对象列表。例如 [{"foo": "bar", "someotherfield": "somevalue"}, {etc}, {etc}]

我有一个 C# 类，例如，

```
public class MyObject
{
    public string A { get; set; }
    public string B { get; set; }
} 
```

现在，我想使用`JsonConvert.DeserializeObject`, 以便将“foo”映射到 A 等等。我该怎么做呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T09:10:45.917

您可以使用该`JsonProperty`属性。

```
[JsonProperty("foo")]
public string A { get; set; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T09:15:44.367

您可以`JsonPropertyAttribute`在属性上使用修饰符，为其指定应在 JSON 消息中找到的参数名称。如果您不想使用属性，也可以使用自定义[JsonConverter 。](http://james.newtonking.com/projects/json/help/html/T_Newtonsoft_Json_JsonConverter.htm)

# iphone - 同时缩放多个视图

> ID：10580367
> 
> 赞同：1
> 
> 时间：2012-05-14T09:08:09.063
> 
> 标签：iphone, objective-c, ios, cocoa, uiview

我有一个`UIView`被称为角色。在该视图中，用户可以添加几个`UIImageView`作为子视图。我为捏合、移动和旋转创建了手势方法。手势方法被添加到角色视图中。

对于移动，我使用了手势 translationInView 属性，它工作正常！我的问题是缩放。

缩放个人`UIImageViews`是可以的，没有问题，但是如何缩放所有这些？

我尝试缩放角色视图，它可以很好地按比例缩放所有子视图，但我不想更改角色视图，因为我将它用作画布来放置`UIImageView`我的角色。如果我用 a 更改字符`CGAffineTransformScale`，我添加的所有新 ImageView 都会得到相同的比例。

我试过这个但它不起作用：

```
 if ([gesture state] == UIGestureRecognizerStateBegan || [gesture state] == UIGestureRecognizerStateChanged) {
        CGFloat customScale = gesture.scale;
        for (UIImageView *singleView in [self.devoCharacter subviews]) {
            singleView.frame = CGRectMake(singleView.frame.origin.x / customScale, singleView.frame.origin.y /customScale, singleView.frame.size.width /customScale , singleView.frame.size.height /customScale);
            [gesture setScale:1];
        }
} 
```

我想以这种方式减小每个视图的大小及其相对距离，但整个事情都是从坐标原点扩展的。

然后我尝试了这个：

```
if ([gesture state] == UIGestureRecognizerStateBegan || [gesture state] == UIGestureRecognizerStateChanged) {
        CGFloat customScale = gesture.scale;
        for (UIImageView *singleView in [self.devoCharacter subviews]) {
            singleView.transform = CGAffineTransformScale(singleView.transform, customScale, customScale);
            [gesture setScale:1];
        }
} 
```

但这会独立缩放每个视图，并且不会保持它们的相对距离。无论如何，是否可以按比例缩放每个视图？并保持它们的相对距离？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T14:53:56.357

好的，我知道该怎么做。缩放每个视图，然后按比例缩放它们的中心。这解决了我的问题：

```
 for (Part *singleView in [self.canvas subviews]) {
            singleView.transform = CGAffineTransformScale(singleView.transform, customScale, customScale);
            singleView.center = CGPointMake(singleView.center.x * customScale, singleView.center.y * customScale);
            [gesture setScale:1];
        } 
```

# ruby-on-rails - 从 form_for 转换为 form_tag 时遇到问题

> ID：10580370
> 
> 赞同：1
> 
> 时间：2012-05-14T09:08:17.777
> 
> 标签：ruby-on-rails, form-for

如何将其转换为 form_tag？这段代码基本上来自 Michael Hartl 的 RoR 教程第 8 章练习 1

```
<% provide(:title, "Sign in") %>
<h1>Sign in</h1>

<div class="row">
  <div class="span6 offset3">
    <%= form_for(:session, url: sessions_path) do |f| %>

      <%= f.label :email %>
      <%= f.text_field :email %>

      <%= f.label :password %>
      <%= f.password_field :password %>

      <%= f.submit "Sign in", class: "btn btn-large btn-primary" %>
    <% end %>

    <p>New user? <%= link_to "Sign up now!", signup_path %></p>
  </div>
</div> 
```

我尝试过这样的事情

```
<% provide(:title, "Sign in") %>
<h1>Sign in</h1>

<div class="row">
  <div class="span6 offset3">
    <% form_tag sessions_path, methods=> :post do %>
        <%= label_tag 'email' %><br />
        <%= text_field_tag :email, params[:email], :placeholder => "Email" %>

        <%= label_tag 'password' %><br />
        <%= password_field_tag :password %>

        <%= submit_tag 'Sign in' %>
    <% end -%>
    <p>New user? <%= link_to "Sign up now!", signup_path %></p>
  </div>
</div> 
```

但它根本不显示表格。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T11:02:44.273

您需要添加一个等号：

```
<%= form_tag sessions_path, methods=> :post do %> 
```

但是，我想知道您为什么要切换到`form_tag`. `form_for`在我看来有很多优点，例如表单生成器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-26T19:13:01.560

我也在尝试转换为 form_tag。

正确的语法

```
<%= form_tag sessions_path, :method => 'post' do %> 
```

语法错误

```
<% form_tag sessions_path, methods=> :post do %> 
```

您需要在开始嵌入标签中添加一个“=”，将方法更改为 :method，并将 :post 更改为 'post'

[使用form_for 与 form_tag](https://stackoverflow.com/questions/1349348/difference-between-form-for-form-tag)的原因在另一个堆栈溢出线程中讨论。

需要进行的另一个更改是在 sessions_controller.rb 中。控制器无法识别传回的哈希，因为它被设置为接受来自 form_for 方法的哈希。您必须删除两行中的第一个 [:session] 哈希。你的 session_controller.rb 应该是这样的，

```
def create
    user = User.find_by(email: params[:email].downcase)
    if user && user.authenticate(params[:password])
        sign_in user
        redirect_to user
    else
        flash.now[:error] = 'Invalid email/password combination' 
        render 'new'
    end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-17T19:26:40.190

接下来是教程 (Michael Hartl 3.2) 第 8 章的代码。练习 1

```
<% provide(:title, "Sign in") %>
<h1>Sign in</h1>

<div class="row">
    <div class="span6 offset3">

        <%= form_tag sessions_path, :method => 'post' do %>
          <%= label_tag 'email', 'Email' %>
          <%= text_field_tag :email, params[:email], :placeholder => "Email" %>
          <%= label_tag 'password', 'Password' %>
         <%= password_field_tag :password %>
      <br>
      <%= submit_tag "Sign In" , :class=> "btn btn-large btn-primary" %>
    <% end %>
    <p>New user? <%= link_to "Sign up now!", signup_path %></p>
</div> 
```

# html - 第一个列表项的 css 选择器

> ID：10580371
> 
> 赞同：4
> 
> 时间：2012-05-14T09:08:41.950
> 
> 标签：html, css, jquery-selectors, css-selectors

我有以下html结构。

```
<ul>
  <script id="agendaTmpl" type="text/x-jquery-tmpl">
               <li class="arrow boundElement" style="height:40px;" onclick="GoToPage('session.html?session_id=${agenda_id}');">

                </li>
    </script>
 <li class="arrow boundElement" style="height:40px;" onclick="GoToPage('session.html?     session_id=2');"> test</li>
 <li class="arrow boundElement" style="height:40px;" onclick="GoToPage('session.html?     session_id=2');"> test</li>
</ul> 
```

我需要将类应用于列表的第一个 li。脚本标签不能被删除，因为它是结构的模板。我试过了，`ul > li:first-child`但它不起作用。它仅在 li 是 ul 的第一个孩子时才有效，即如果脚本标签不存在。

请建议我一种将样式应用于 ul 的第一个 li 的方法。

注意：我不允许在第一个 li 中添加新类。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-14T09:11:34.977

尝试`first-of-type`改用：

```
ul > li:first-of-type 
```

这是一个 CSS3 选择器 - 因此不完全支持旧版浏览器。请参阅@Boltclock 的答案以获得更好的跨浏览器支持

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T09:11:33.043

> 它仅在 li 是 ul 的第一个孩子时才有效，即如果脚本标签不存在。

确切地。

由于您使用的是 jQuery 模板，并且您试图在`li`不修改 HTML 源代码的情况下操作第一个给它一个类，所以您也可以使用 jQuery 来完成这一切：

```
$('ul > li:first').addClass('first'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-20T02:09:40.613

还有一个技巧可以选择相邻项目列表的所有第一项：

```
li:not(li + li) {
  background: #f00;
}

/* Or the more intuitive one: */
ul > :not(li) + li, ul > li:first-child {
  background: #f00;
}
```

```
<ul>
 <div></div>

 <li>I'm selected</li>
 <li>test</li>
 <li>test</li>

 <div></div>

 <li>I'm selected</li>
 <li>test</li>
</ul>
```

# ruby-on-rails-3 - 如何在rails 3中创建弹出窗口以使用linkedin登录？

> ID：10580374
> 
> 赞同：0
> 
> 时间：2012-05-14T09:08:56.807
> 
> 标签：ruby-on-rails-3, linkedin

我一直面临这个问题，我尝试使用linkedin登录我的网站，我无法执行以下操作并且不知道从哪里开始前夕，

1.  当用户点击“通过linkedin登录”时，

    ```
    the user should get a linkedin login page(popup) 
    ```

2.一旦用户输入他的登录凭据并单击登录，linkedin 登录页面必须关闭，如果登录凭据正确，我的网页必须向用户显示值。

请告诉我如何去做。

通过linkedinlogin单击时如何创建弹出窗口？

谢谢，安东尼

# iphone - 为什么头文件中只导入 UIKit.Framework？为什么不使用其他默认框架，例如 Foundation 框架？

> ID：10580379
> 
> 赞同：0
> 
> 时间：2012-05-14T09:09:15.560
> 
> 标签：iphone, ios

实际上，我有时对为什么在我们创建的所有头文件中只找到“#import”感到困惑？同样，为什么我们在创建任何 iPhone 应用程序时只提供 3 个框架（Foundation、UIKit、CoreGraphics）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T09:20:49.593

UIKit 需要 Foundation，所以它自己导入它。如果您导入 UIKit，您将免费获得 Foundation。此外，正如 Christoph 所说，您的 .pch 无论如何都会导致您的所有文件导入 Foundation。

在提供三个框架方面，您可以链接到您喜欢的任何一个：查看应用程序的目标设置（左侧边栏的顶部项目（以您的项目命名），然后单击下一列中的目标，然后单击构建阶段选项卡）：

![与图书馆部分的链接](../Images/c3ebed078c0d5634074e3069f50c8f9a.png)

只需单击列表下方的添加按钮，您就可以选择所需的任何框架。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T09:17:43.087

至少在从 xcode 模板开始一个新项目时，预编译头文件 (.pch) 包含

```
#import <UIKit/UIKit.h>
#import <Foundation/Foundation.h> 
```

所以实际上，在其他任何地方都不需要进口这两者。

我倾向于放弃

```
#import <UIKit/UIKit.h> 
```

从我所有的源文件中，并通过 .pch 文件保留隐含的文件。

# android - 按钮和可绘制的左侧

> ID：10580380
> 
> 赞同：7
> 
> 时间：2012-05-14T09:09:15.777
> 
> 标签：android, android-layout

我在 xml 文件中创建按钮，如下所示：

```
 <Button
        android:id="@+id/call_button"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_marginTop="30dp"
        android:background="@drawable/button"
        android:layout_weight="40" 
        android:drawableLeft="@drawable/symbol_phone"
        android:paddingLeft="20dp"
        android:drawablePadding="-25dp"
        android:text="Call"
        android:textColor="@color/white"
        /> 
```

我想知道如何在活动中进行 drawableLeft。我知道这很愚蠢，但我需要在活动中执行此操作，因为我在那里创建了按钮。我如何在活动中的 xml 文件中做同样的事情？我需要添加drawableLeft和drawable padding和padding left。这就是我在活动中创建按钮的方式

```
 Button button1 = new Button(this);
 button1.setLayoutParams(new RelativeLayout.LayoutParams(buttonWidth, buttonHeight));
 button1.setText(systemTexts.getShowCallButton());
 button1.setBackgroundDrawable(new                                      
 button1.setTextColor(Color.parseColor(buttonTextColor)); 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-14T09:14:25.663

```
Drawable image = getContext().getResources().getDrawable( R.drawable.icon );
image.setBounds( 0, 0, 60, 60 );
button.setCompoundDrawables( image, null, null, null ); 
```

做这个

**更新：**

由于*`getContext().getResources().getDrawable`*现在**已弃用**，请改用它：

```
 Drawable image = ContextCompat.getDrawable(getApplicationContext(),R.drawable.icon);
  image.setBounds( 0, 0, 60, 60 );
  button.setCompoundDrawables( image, null, null, null ); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-14T09:15:15.460

试试这个，

```
Drawable icon= getContext().getResources().getDrawable(R.drawable.icon);
button.setCompoundDrawablesWithIntrinsicBounds(icon, null, null, null); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T09:13:37.110

以编程方式设置 drawableLeft 的方法是使用[setCompoundDrawablesWithIntrinsicBounds](http://developer.android.com/reference/android/widget/TextView.html#setCompoundDrawablesWithIntrinsicBounds%28int,%20int,%20int,%20int%29)。

[您可以使用setPadding](http://developer.android.com/reference/android/view/View.html#setPadding%28int,%20int,%20int,%20int%29)设置填充

文档显示了所有 xml 标记的相应 java 方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-27T12:24:13.997

你可以试试这个：

```
txtVw.setCompoundDrawables(R.drawable.img_nature, 0, 0, 0); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-11-13T04:23:21.010

您可以使用以下代码

```
<Button android:text="@string/button_label" 
android:id="@+id/buttonId"
android:layout_width="160dip"
android:layout_height="60dip"
android:layout_gravity="center"
android:textSize="13dip"
android:drawableLeft="@drawable/button_icon"
android:drawablePadding="2dip"
android:paddingLeft="30dip"
android:paddingRight="26dip"
android:singleLine="true"
android:gravity="center" /> 
```

它将通过填充 ti 文本和图像来管理

# c# - 在 C# 中使用 Web 浏览器控件创建一个 powerpoint

> ID：10580381
> 
> 赞同：0
> 
> 时间：2012-05-14T09:09:23.000
> 
> 标签：c#, powerpoint

最近，我正致力于在 C# 中以编程方式创建一个 powerpoint 文件。

我正在通过修改 MSDN 中的示例代码来尝试此操作。（[为 PowerPoint 2002 创建自动化客户端](http://support.microsoft.com/kb/303718/)）

我从 Microsoft.Office.Interop.PowerPoint 命名空间中找到了一些有用的方法（[Shapes 方法）](http://msdn.microsoft.com/en-us/library/ff763481)

我可以在上面添加文字和一些图片，

但是，我不知道应该将哪个对象用于 Web 浏览器。

# jsf - 我不能使用 JSF 2.1.3 能力

> ID：10580384
> 
> 赞同：0
> 
> 时间：2012-05-14T09:09:33.510
> 
> 标签：jsf, tomcat, richfaces, facelets

使用 JSF 2、Spring 2.5、Maven 3、RichFaces、facelets 构建 WEB 应用程序

我一直在寻找答案，但无济于事，我也一直在研究我的图书馆版本，我想我错过了一些东西。我只是想为 JSF 2 试用这个新的 <f:event> 标签

这是我的规格

*   Tomcat 7.0.27
*   jstl-api-1.2.jar
*   jstl-impl-1.2.jar
*   jsf-api-2.1.3.jar
*   jsf-impl-2.1.3.jar
*   jsf-facelets-1.1.10.jar
*   richfaces-api-3.3.3.jar
*   richfaces-impl-3.3.3.jar
*   richfaces-ui-3.3.3.jar

.xhtml 文件

```
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:c="http://java.sun.com/jsp/jstl/core"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:a4j="http://richfaces.org/a4j"
xmlns:rich="http://richfaces.org/rich"> 
```

web.xml

```
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
id="WebApp_ID" version="3.0"> 
```

面孔-config.xml

```
<faces-config xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"
version="2.0"> 
```

这是我的堆栈跟踪块：

```
com.sun.facelets.tag.TagException: /twofalogin.xhtml @18,71 <f:event> Tag Library supports namespace: http://java.sun.com/jsf/core, but no tag was defined for name: event 
```

仅供参考：我尝试在没有 maven 的 eclipse 上使用与 simpe JSF 2 项目完全相同的库，并使用 JSP 而不是 xhtml，我可以在 eclipse 自动完成上找到 <f:event> 。不过，我还没有尝试在我的 tomcat 上运行它。

谢谢

# r - R：如何删除 data.table 中的列？

> ID：10580385
> 
> 赞同：5
> 
> 时间：2012-05-14T09:09:34.827
> 
> 标签：r, data.table

关于 R 包 data.table 的问题：如何以节省内存的方式删除多个 data.table 列？

假设要删除的列名存储在向量 deleteCol 中。

```
In a data.frame, it is:
DF <- DF[deleteCol] <- list() 
```

对于 data.table，我尝试了：

```
DT[, deleteCol, with=FALSE] <- list() 
```

但这给了`unused argument(s) (with = FALSE)`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T10:08:01.717

好的，这里有几个选项。最后一个似乎正是你想要的......

```
 x<-1:5
 y<-1:5
 z<-1:5
 xy<-data.table(x,y,z)
 NEWxy<-subset(xy, select = -c(x,y) ) #removes column x and y 
```

和

```
id<-c("x","y")
newxy<-xy[, id, with=FALSE]
newxy #gives just x and y e.g.

   #  x y
#[1,] 1 1
#[2,] 2 2
#[3,] 3 3
#[4,] 4 4
#[5,] 5 5 
```

最后是你真正想要的：

```
anotherxy<-xy[,id:=NULL,with=FALSE] # removes comuns x and y that are in id

#     z
#[1,] 1
#[2,] 2
#[3,] 3
#[4,] 4
#[5,] 5 
```

# javascript - Youtube 嵌入式视频开始/停止事件

> ID：10580388
> 
> 赞同：4
> 
> 时间：2012-05-14T09:09:43.633
> 
> 标签：javascript, youtube, youtube-api

我想知道，通过 iframe 嵌入 youtube 视频是否会暴露某些事件，例如 onStart 或 onStop，您可以在其中指定一些回调？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-14T09:29:00.597

这是处理启动和停止事件的示例：

HTML 文件 (index.html)：

```
<!DOCTYPE html>
<html>
    <head>
        <title>Stackoverflow</title>
        <script type="text/javascript" src="http://www.youtube.com/player_api"> </script>
        <script type="text/javascript" src="sof.js"> </script>
    </head>
    <body>
        <div id="player"></div>
    </body>
</html> 
```

和 JavaScript (sof.js)：

```
var player;
// This function creates an <iframe> (and YouTube player)
// after the API code downloads.
function onYouTubePlayerAPIReady() {
    player = new YT.Player('player', {
        height: '390',
        width: '640',
        videoId: 'u1zgFlCw8Aw',
        events: {
            'onStateChange': function (event) {
                switch (event.data) {
                    case -1:
                        console.log ('unstarted');
                        break;
                    case 0:
                        console.log ('ended');
                        break;
                    case 1:
                        console.log ('playing');
                        break;
                    case 2:
                        console.log ('paused');
                        break;
                    case 3:
                        console.log ('buffering');
                        break;
                    case 5:
                        console.log ('video cued');
                        break;
                }
            }
        }
    });
} 
```

对于每种情况，您都可以设置一个处理程序。

欲了解更多信息：

1.  [YT 播放器入门](https://developers.google.com/youtube/iframe_api_reference#Getting_Started)
2.  [YT Javascript API 事件](https://developers.google.com/youtube/js_api_reference#Events)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T09:29:20.133

唯一使用的事件是：

```
1 - onStateChange 
2 - onPlaybackQualityChange 
3 - onError 
4 - onApiChange 
```

-事件处理程序：

1- onYouTubePlayerReady(playerid)

# java - LinkedBlockingQueue 使用比较器

> ID：10580390
> 
> 赞同：0
> 
> 时间：2012-05-14T09:09:50.643
> 
> 标签：java, queue, comparator

我正在使用 a`LinkedBlockingQueue`在线程之间共享一些对象。问题是我可以在这个队列中有一些重复。我试过这个解决方案：

```
SortedSet<ResultInsert> set = new TreeSet<ResultInsert>(new MyComparator());
set.addAll(bulkInserts); 
```

并实施：

```
@Override
    public int compare(ResultInsert arg0, ResultInsert arg1) {

} 
```

出于某种原因，它似乎没有将我收藏中的每个元素与所有元素进行比较。例如，我有 61 个元素，它消除了一些重复元素，我有 51 个元素，除了这 51 个元素之间还有一些重复元素。

我刚刚做了一个测试：对于它调用的 61 个对象，比较 342 次、351 次、.. 不是每次都相同的次数。我记录了所有，我不明白。它不比较所有。

请问有人有什么想法吗？从今天早上开始，我正在尝试解决这个问题，但我不能再进一步了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T09:15:47.113

您当然可以创建自己的子类来防止重复插入，`put`如果给定元素存在于队列中，则通过覆盖并忽略调用。

```
class NoDupBlockingQueue<T> extends LinkedBlockingQueue<T> {
    @Override
    public void put(T e) throws InterruptedException {
        if (!contains(e))
            super.put(e);
    }
} 
```

如果你真的需要使用 a `Comparator`，可以这样写：

```
class NoDupBlockingQueue<T> extends LinkedBlockingQueue<T> {

    Comparator<T> comp;

    public NoDupBlockingQueue(Comparator<T> comp) {
        this.comp = comp;
    }

    @Override
    public void put(T e) throws InterruptedException {
        for (T e2 : this)
            if (comp.compare(e, e2) == 0)
                return;
        super.put(e);
    }
} 
```

请注意，将元素添加到队列中成为线性操作。如果您想要更好的性能，您将不得不维护一个单独的数据结构（例如 HashSet）。

# wpf - 从 IvalueConverter 转换函数中获取 DxGrid 列 FieldName

> ID：10580394
> 
> 赞同：1
> 
> 时间：2012-05-14T09:10:11.357
> 
> 标签：wpf, vb.net, xaml, ivalueconverter

我有一个带有 ComboboxEdit CellTemplate 的两列的 Devexpress DxGrid

```
<dxg:GridControl Name="grid">
    <dxg:GridControl.Columns>
       <dxg:GridColumn FieldName="Size_ID" CellTemplate="{DynamicResource DimensionComboBox}"/>
       <dxg:GridColumn FieldName="Color_ID" CellTemplate="{DynamicResource DimensionComboBox}"/>
    </dxg:GridControl.Columns>
</dxg:GridControl> 
```

在我的 app.xaml 我定义了一个模板

```
<DataTemplate x:Key="DimensionComboBox" >
                <dxe:ComboBoxEdit x:Name="PART_Editor"  DisplayMember="Grp_Property_Desc" ValueMember="Grp_Property_ID" >
                    <dxe:ComboBoxEdit.ItemsSource>
                        <Binding Path="Data">
                            <Binding.Converter>
                                <local:GridComboBoxItemSourceConverter/>
                            </Binding.Converter>
                        </Binding>
                    </dxe:ComboBoxEdit.ItemsSource>
                </dxe:ComboBoxEdit>
            </DataTemplate> 
```

我想知道转换器中的列字段名称，以便我根据调用转换器的列返回数据

```
Public Class GridComboBoxItemSourceConverter
    Implements IValueConverter

#Region "IValueConverter Members"

    Public Function Convert(ByVal value As Object, ByVal targetType As Type, ByVal parameter As Object, ByVal culture As System.Globalization.CultureInfo) As Object Implements IValueConverter.Convert

'if field name is color_id then return data for color_id

'if field name is size_id then return data for size_id

    End Function

    Public Function ConvertBack(ByVal value As Object, ByVal targetType As Type, ByVal parameter As Object, ByVal culture As System.Globalization.CultureInfo) As Object Implements IValueConverter.ConvertBack
        Throw New NotImplementedException()
    End Function
#End Region
End Class 
```

有没有一种方法可以在不必为每一列创建转换器类的情况下完成此操作，我确实有许多其他列要转换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T09:31:25.863

您可以为每列创建一个数据模板并在转换器参数中指定列名

# javascript - 从 iFrame 内部更新 URL

> ID：10580396
> 
> 赞同：3
> 
> 时间：2012-05-14T09:10:18.680
> 
> 标签：javascript, url, iframe, dns, hosting

iFrame 中的 javascript 是否可以更新父页面的 URL（哈希）（并检索它）它是否有任何权限？

进一步说明，我没有这个域的托管，我只能设置一个 iframe。由于我的主机的限制，我也无法使用 DNS 配置来显示该页面。我也无法将域转移给他们以使其正常工作，因为我的客户希望保持对域的控制。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T09:15:35.413

如果`<iframe>`页面在同一个域中，可能是的。否则，由于跨域限制，您无法访问父页面。

您可以更改父页面的 URL：

```
top.location.href = 'http://www.example.com'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T09:16:10.830

由于安全限制，如果域、端口或协议与 iframe 中的不同，您将无法访问父窗口的属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T09:21:44.057

简而言之，答案是否定的。

您的脚本仅在该 iframe 的上下文中有效。例如，如果您尝试，

```
var loc = document.location; 
```

你会明白我的意思。

一种解决方案是，当您将 iframe 提供给对方时，您应该在女巫中添加一个脚本，您可以做任何您想做的事情，因为它在他们的域上运行。也许动态创建你的 iframe 和东西的来源。

# java - 在执行和完成时检索线程ID？爪哇

> ID：10580403
> 
> 赞同：0
> 
> 时间：2012-05-14T09:10:49.960
> 
> 标签：java, multithreading, threadpool

您将如何在线程执行时检索线程的 id，然后在其完成时再次检索它。

因此从主线程中按照执行/完成的顺序打印它们。

我正在使用 forkjoinpool 并执行一个可调用的类。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T09:16:16.737

您应该在任务类中添加如下内容：

```
executorService.submit(new Runnable() {
            @Override
            public void run() {
                System.out.println("Running task in" + Thread.currentThread().getId());
                <your code>
                System.out.println("Finished task in" + Thread.currentThread().getId());
            }
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T09:18:46.037

创建实现`Callable`并调用内部另一个可调用对象的包装器。但也检索线程 ID 并使用它做你想要的，例如：

```
class ThreadTrackingCallable<V> implements Callable<V> {
    private Callable<V> payload;
    ThreadTrackingCallable(Callable<V> payload) {
        this.payload = payload;
    }
    V call() throws Exception {
       jobStarted(getCurrentThreadId());
       V result = payload.call();
       jobEnded(getCurrentThreadId());
       return result;
    }

    private int getCurrentThreadId() {
        return Thread.currentThread().getId();
    }
} 
```

# visual-studio-2008 - 致命错误 C1083：无法打开包含文件：'opencv2/opencv.h'：没有这样的文件或目录

> ID：10580406
> 
> 赞同：0
> 
> 时间：2012-05-14T09:11:17.820
> 
> 标签：visual-studio-2008, opencv, gpu

尽管我已经在 Visual Studio 2008 上很好地配置了带有 gpu 支持的 opencv 2.3，但我仍然收到上述错误。

任何人都可以建议我在哪里做错了。

我只是想创建简单的应用程序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T09:15:09.780

您是否通过

```
#include <...> 
```

或者

```
#include "..." 
```

尝试使用后者并插入 opencv.h 文件的完整路径以检查您的安装。如果你想使用上面的方式，你需要将你安装opencv的路径引入到你的编译器中……详见Vistual Studio Project properties。

最好的问候，狐步舞

# jquery - 如何使用jquery从某个div中获取文本

> ID：10580413
> 
> 赞同：0
> 
> 时间：2012-05-14T09:11:45.837
> 
> 标签：jquery

大家好，提前感谢您阅读本文。我有以下html代码

```
<div id="ImagePagination" class="Pagination"> 
    Photo 
    <span id="currentPhotoCount"><#currentPhotoCount#>
    </span> of
    <span id="maxPhotoCount"><#maxPhotoCount#>
    </span>
</div>​ 
```

currentPhotoCount 和 maxPhotoCount 变量是从完美运行的 jquery 图像滑块脚本设置的，但我想获取 currentPhotoCount 的文本以便在另一个脚本中使用它。任何关于我如何实现这一目标的建议将不胜感激！！！我已经尝试过这段代码..我做错了什么吗？

```
 var pic=parseInt($('#currentPhotoCount').text(), 10);
  x = '../object_images/medium/<#OBJECT_ID#>_"'+pic+'".jpg';
  $(".gallery a[rel^='prettyPhoto']").attr({src:x}); 
```

在我的头撞到墙上几个小时后，我意识到这是一个引号问题..我从 x 变量中删除了双引号，所以......

```
 x = '../object_images/medium/<#OBJECT_ID#>_"'+pic+'".jpg'; 
```

变成

```
 x = '../object_images/medium/<#OBJECT_ID#>_'+pic+'.jpg'; 
```

现在一切正常......非常感谢你们帮助我！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T09:13:25.277

```
$('#currentPhotoCount').text() 
```

如果你想要innerHTML：

```
$('#currentPhotoCount').html() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T09:14:34.727

如果您需要将文本作为字符串，只需

```
$('#currentPhotoCount').text() 
```

如果您必须将该文本用作进一步算术运算的数字（因为它代表当前照片）

```
parseInt($('#currentPhotoCount').text(), 10); 
```

# list - OCaml代码解释：分解一个字符串，拆分一个列表

> ID：10580420
> 
> 赞同：1
> 
> 时间：2012-05-14T09:12:18.600
> 
> 标签：list, recursion, pattern-matching, ocaml

我是绝对的 OCaml 初学者，并且有一个关于更多代码的任务。我有以下代码，但我不知道它是如何工作的。如果有人可以帮助我，我将不胜感激。

```
# let explode str =  (*defines function that explodes argument str witch is type
                       string into list of chars*)
  let rec exp = function    (*defines recursive function exp*)
    | a, b when a < 0 -> b  (*this part i dont know.is this pattern 
                              matching ?is it function with arguments a and b
                              and they go into expression? when is a guard and 
                              then we have if a is smaller than 0 then b *)
 (*if a is not smaller than 0 then this function ? *)
    | a, b -> exp (a-1, str.[a]::b) (*this i dont know, a and b are arguments
                                      that go into recursive function in the way
                                      that a is decreesed by one and b goes into
                                      string a?? *)
  in         
  exp ((String.length str)-1, []);; (*defined function exp on string lenght of
                                      str decresed by one (why?)  [ ]these
                                      brackets mean or tell some kind of type ? *)

# let split lst ch =
  let rec split = function  (* defines recursive fun split *)
    | [], ch, cacc', aacc' -> cacc'::aacc'(* if empty ...this is about what i got
                                             so far :) *)
    | c::lst, ch, cacc', aacc' when c = ch -> split (lst, ch, [], cacc'::aacc')
    | c::lst, ch, cacc', aacc' -> split (lst, ch, c::cacc', aacc')
  in
  split (lst, ch, [], []);;

val split : 'a list -> 'a -> 'a list list = <fun> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T13:06:18.440

这段代码很难看。谁一直给你这些都是在伤害你。如果我的一个学生这样写，我会要求他们在不使用`when`条件的情况下重写它们，因为它们往往会令人困惑，鼓励在不需要的地方编写大量模式匹配的代码。
根据经验，初学者永远不应该使用`when`. 一个简单`if..then..else`的测试可以提高可读性。

以下是这两个函数的等效版本，为了可读性而重写：

```
let explode str =
  let rec exp a b =
    if a < 0 then b
    else exp (a - 1) (str.[a] :: b)
  in
  exp (String.length str - 1) []

let split input delim_char =
  let rec split input curr_word past_words =
    match input with
      | [] -> curr_word :: past_words
      | c :: rest ->
        if c = delim_char
        then split rest [] (curr_word :: past_words)
        else split rest (c :: curr_word) past_words
  in
  split input [] [] 
```

我对理解它们的建议是在给定的例子上，在纸上自己运行它们。只需写下函数调用（例如`explode "foo"`and `split 'b' ['a';'b';'c';'d']`），扩展定义，评估代码以获得另一个表达式等，直到得到结果。这是一个例子：

```
explode "fo"
=>
exp (String.length "fo" - 1) []
=>
exp 1 []
=>
if 1 < 0 then [] else exp 0 ("fo".[1] :: [])
=>
exp 0 ("fo".[1] :: [])
=>
exp 0 ('o' :: [])
=>
exp 0 ['o']
=>
if 0 < 0 then ['o'] else exp (-1) ("fo".[0] :: ['o'])
=>
exp (-1) ("fo".[0] :: ['o'])
=>
exp (-1) ('f' :: ['o'])
=>
exp (-1) ['f'; 'o']
=>
if -1 < 0 then ['f'; 'o'] else exp (-2) ("fo".[-1] :: ['o'])
=>
['f'; 'o'] 
```

对于每个功能以及您将有问题理解的任何功能，请注意这样做。举个小例子。这是获得全球视野的最佳方式。

（后来当你越来越习惯递归时，你会发现你实际上并不需要这样做，你可以对函数进行归纳推理：假设它们做了什么，并假设递归调用实际上是这样做的，检查它确实做到了。在更高级的情况下，试图将所有执行都放在脑海中太难了，这种归纳技术效果更好，但它更高级，需要更多练习。首先从简单开始运行代码。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-05T23:24:45.353

如果您使用的是核心库，则可以使用

```
String.to_list "BKMGTPEZY" 
```

`chars`如果您只想要字符串，它将返回一个列表`map`：

```
String.to_list "BKMGTPEZY" |> List.map ~f:Char.to_string 
```

输出：

```
- : bytes list = ["B"; "K"; "M"; "G"; "T"; "P"; "E"; "Z"; "Y"] 
```

作为一个函数

```
let explode s = String.to_list s |> List.map ~f:Char.to_string 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-10T14:50:08.830

您也可以通过这种方式实现。

```
let rec strexp s  =  
  if length(s)==0 then 
   []
  else
  (strexp (sub s 0 (length(s)-1)))@(s.[length(s)-1]::[])    
;; 
```

# authentication - 跨子域的基于 Cookie 的身份验证

> ID：10580421
> 
> 赞同：1
> 
> 时间：2012-05-14T09:12:25.367
> 
> 标签：authentication, cookies, session-cookies, subdomain

我正在构建一个中央身份验证服务 (auth.xyz.com)，类似于 Google 在 accounts.google.com 上的服务。我有多个应用程序，每个应用程序都在不同的子域（app1.xyz.com，app2.xyz.com）上运行，这些子域将与我的身份验证服务集成。

我目前正在关注一个基于 cookie 的系统，写在“.xyz.com”域上，以便所有子域都可以读取它。

我的问题是我不知道如何处理 cookie 到期。如果用户在时间 t 登录，并在 app1.xyz.com 上花费 45 分钟，然后转到 app2.xyz.com，我不希望他必须再次登录。此外，如果用户在 app1.xyz.com 上登录，然后空闲 45 分钟，然后点击 app2.xyz.com，我希望他必须重新登录。我怎样才能做到这一点？

我不想在我在 app1 或 app2 上收到的每个请求上都触摸身份验证服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T09:27:46.060

我认为这不太可能。如果是这样，整个应用程序流程中都会存在安全漏洞。cookie 过期的用户仍然可以访问服务器 app1 和 app2 上的资源，无需身份验证或其他一些受信任的机制!.

# objective-c - CPU 使用 attributesOfItemAtPath:error 引发：

> ID：10580422
> 
> 赞同：2
> 
> 时间：2012-05-14T09:12:25.447
> 
> 标签：objective-c, macos, cocoa, nsfilemanager, sysenter

我正在使用`[NSFileManager attributesOfItemAtPath:error:]`函数来获取文件的属性。但有时我的应用程序 cpu 会达到 100%。我将此功能用于 100k（大约）个文件。
我的应用程序示例：

```
 2128 -[NSFileManager attributesOfItemAtPath:error:]
                                  2128 +[NSFileAttributes _attributesAtPath:partialReturn:filterResourceFork:error:]
                                    2123 _attributesAtPath
                                      2072 listxattr
                                      29 realloc
                                        18 realloc
                                        11 szone_size
                                      22 _attributesAtPath
                                    5 _sysenter_trap 
```

谁能帮帮我？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T07:02:48.523

我正在使用`stat`.

```
#import <sys/stat.h>

struct stat stat1;
if( stat([inFilePath fileSystemRepresentation], &stat1) )
      // something is wrong 
long long size = stat1.st_size;
printf("Size: %lld\n", stat1.st_size); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T09:39:43.800

*   `SYSENTER`是 的伴随指令`SYSEXIT`。陷阱是线程完整上下文的子集。因此，陷阱帧保留有关当前线程上下文的信息，因此它可以使用 SYSEXIT 指令恢复它。

关于[Sysenter_traps](http://shift32.wordpress.com/tag/sysenter/)的链接。

**看来您正在超载主线程。这就是为什么cpu是100%**

# mysql - 更新我在临时表上的加入

> ID：10580426
> 
> 赞同：0
> 
> 时间：2012-05-14T09:12:39.910
> 
> 标签：mysql, join

我有一张叫做排行榜的表

我创建的

```
 create temporary table leaderboard 
 (
     rank integer primary key auto_increment, 
     score_id integer, 
     game varchar(65), 
     user_id integer
)

select 
     id, 
     highscore, 
     playername 
from 
     players 
order by 
     highscore desc 
```

这很好，但我现在尝试使用 id 中的连接来更新表。

```
UPDATE players 
SET players.rank = leaderboard.rank 
FROM players 
JOIN leaderboard ON players.id = leaderboard.id 
```

但是在mysql中出现错误？指针会很好

错误是

> ...在第 1 行的“从玩家加入排行榜 ON player.id = leaderboard.id”附近使用的正确语法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T09:25:33.550

也许是这样的：

```
UPDATE players 
JOIN leaderboard ON players.id = leaderboard.id
SET players.rank = leaderboard.rank 
```

Mysql 语法与 tsql 不同。这种风格适用于 mssql

# javascript - 选择字段中的 Sencha Touch 2 更改事件

> ID：10580427
> 
> 赞同：1
> 
> 时间：2012-05-14T09:12:43.243
> 
> 标签：javascript, extjs, sencha-touch

代码：

```
xtype: 'selectfield',
id: 'selectType',                           
cls: 'combobox',                            
store: 'ProvidersType',
displayField: 'name',
valueField: 'id',
listeners: {                                
change: function(field, value) {
    alert(111);
}
} 
```

应用程序加载后我有“111”警报，不仅在选择字段中选择新选项时。在使用 setStore 或 setValue 或 updateOptions 方法后我也有此警报...这非常糟糕，因为我正在从 json 加载 selectfield 的选项，并且总是有错误，因为我从当前选择的 selectfield 值中获取 json 请求的参数...任何想法如何避免这种行为并使其像在 jQuery 中一样正常工作？

**编辑：**

嗯，它适用于静态选项，但如果我从商店加载选项则效果不佳......

此代码运行良好，我仅在选择更改时发出警报：

```
xtype: 'selectfield',
                id: 'selectType',                           
                cls: 'combobox',                            
                options: [
                    {text: 'First Option',  value: 'first'},
                    {text: 'Second Option', value: 'second'},
                    {text: 'Third Option',  value: 'third'}
                ],
                listeners: {                                
                    change: function(field, value) {
                        alert(111);                         
                    } 
```

但是，如果我从商店连接选项，我会立即收到应用程序加载警报：

```
 xtype: 'selectfield',
                        id: 'selectType',                           
                        cls: 'combobox',                            
                        store: 'ProvidersType',
                        displayField: 'name',
                        valueField: 'id',
                        listeners: {                                
                            change: function(field, value) {
                                alert(111);

                            }
                        } 
```

商店是：

```
Ext.define('Providers.store.ProvidersType', {    
extend: 'Ext.data.Store',
config: {
    model: 'Providers.model.Provider',
    proxy: {
        type: 'scripttag',
        url : 'http://example.dk/providers/service.php',
        extraParams: {
            action: 'provider_types',
            username: 'test2',
            callback: '?',                      
            format: 'json'          
        },          
        reader: {
            type: 'json',
            rootProperty: 'providers'
        }
    },      
    autoLoad: true

}
}); 
```

# php - Google checkout 商家计算回调工作超过 1 次

> ID：10580443
> 
> 赞同：0
> 
> 时间：2012-05-14T09:14:05.273
> 
> 标签：php, google-checkout

现在我正在使用 Google checkout 付款方式。当我使用 Google checkout 沙箱检查付款时。XML 包含“merchant-calculation-callback”返回两次，如何防止此问题。由于这个问题，我的数据库中发生了多次更新。如何预防这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T11:51:30.827

将您已通知的确认发送回谷歌。如果您使用的是谷歌示例代码，您可以使用此代码

$Gresponse->SendAck($data[$root]['serial-number'], true);

# .net - 无法命中由 Visual Studio 发布的 WCF Web 服务

> ID：10580449
> 
> 赞同：1
> 
> 时间：2012-05-14T09:14:35.647
> 
> 标签：.net, wcf, exception, iis

**更新：**我不知道这是否有助于任何人诊断此问题，但 wsdl 的终点为：

```
http://localhost:8523/Temp/WebService.svc/WebService.svc 
```

这是错误的，我尝试手动更改端点以删除最后的额外位，但它仍然返回 404

**/更新**

我正在使用 WCF 开发 Web 服务，当我运行 VS2010 调试器时，我收到以下错误消息：

> 目标程序集不包含服务类型。您可能需要调整此程序集的代码访问安全策略。

我在网上找到的解决方案说我应该将 [ServiceContract] 添加到界面中，但它已经存在。

我还看到有人说我必须从 csproj 文件中删除标记，但这样做会使项目成为类库而不是 Web 服务。

但是我的浏览器会打开一个目录列表，我可以通过单击 .svc 文件然后单击指向 .svc?wsdl 的链接导航到容器生成的 wsdl

如果我尝试从应用程序或 WCF 服务测试器访问服务，我得到一个 404 异常，我将一个测试应用程序拼凑在一起，这是它给我的异常：

```
Sending Message: Make Call: InteractionId [rt], Destination [ert], ExternalReferenceId [ert], userIdentifier [ert] attachedData [rt]
System.ServiceModel.EndpointNotFoundException: There was no endpoint listening at http://localhost:8523/WebService.svc?wsdl that could accept the message. This is often caused by an incorrect address or SOAP action. See InnerException, if present, for more details. ---> System.Net.WebException: The remote server returned an error: (404) Not Found.
   at System.Net.HttpWebRequest.GetResponse()
   at System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan timeout)
   --- End of inner exception stack trace ---

Server stack trace: 
   at System.ServiceModel.Security.IssuanceTokenProviderBase`1.DoNegotiation(TimeSpan timeout)
   at System.ServiceModel.Security.SspiNegotiationTokenProvider.OnOpen(TimeSpan timeout)
   at System.ServiceModel.Security.WrapperSecurityCommunicationObject.OnOpen(TimeSpan timeout)
   at System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)
   at System.ServiceModel.Security.CommunicationObjectSecurityTokenProvider.Open(TimeSpan timeout)
   at System.ServiceModel.Security.SymmetricSecurityProtocol.OnOpen(TimeSpan timeout)
   at System.ServiceModel.Security.WrapperSecurityCommunicationObject.OnOpen(TimeSpan timeout)
   at System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)
   at System.ServiceModel.Channels.SecurityChannelFactory`1.ClientSecurityChannel`1.OnOpen(TimeSpan timeout)
   at System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)
   at System.ServiceModel.Security.SecuritySessionSecurityTokenProvider.DoOperation(SecuritySessionOperation operation, EndpointAddress target, Uri via, SecurityToken currentToken, TimeSpan timeout)
   at System.ServiceModel.Security.SecuritySessionSecurityTokenProvider.GetTokenCore(TimeSpan timeout)
   at System.IdentityModel.Selectors.SecurityTokenProvider.GetToken(TimeSpan timeout)
   at System.ServiceModel.Security.SecuritySessionClientSettings`1.ClientSecuritySessionChannel.OnOpen(TimeSpan timeout)
   at System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannel.OnOpen(TimeSpan timeout)
   at System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannel.CallOpenOnce.System.ServiceModel.Channels.ServiceChannel.ICallOnce.Call(ServiceChannel channel, TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannel.CallOnceManager.CallOnce(TimeSpan timeout, CallOnceManager cascade)
   at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
   at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)

Exception rethrown at [0]: 
   at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
   at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
   at Sabio.Avaya.AACC.ProxyServiceLibary.IProxyService.MakeCall(MakeCallRequestData MakeCallRequestData)
   at Sabio.Avaya.AACC.ProxyServiceLibary.WSPipeProxyClient.MakeCall(MakeCallRequestData MakeCallRequestData) in C:\Users\me\Documents\Visual Studio 2010\Projects\WebService\RemoteClientLib\WSPipeProxyClient.cs:line 42
   at ClientLibTestUI.WcfTestApp.MPCWSButton_Click(Object sender, EventArgs e) in C:\Users\me\Documents\Visual Studio 2010\Projects\WebService\ClientLibTestUI\Form1.cs:line 97 
```

这是我的 Web.config：

```
 <?xml version="1.0"?>
<configuration>

  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <services>
      <service name="WebService" behaviorConfiguration="WebServiceBehaviour">
        <endpoint address="WebService.svc"
                  binding="wsHttpBinding"
                  bindingConfiguration="DefaultWSBinding"
                  name="WSEndPoint"
                  contract="IWebService">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>
        <endpoint address="mex"
                  binding="mexHttpBinding"
                  contract="IMetadataExchange"
                  bindingConfiguration="mexHttpBinding"/>
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost/Temp/"/>
          </baseAddresses>
        </host>
      </service>
    </services>
    <bindings>
      <netTcpBinding>
        <binding name="DefaultNetTcpBindingConfig"
                 maxConnections="5"
                 portSharingEnabled="true" >
          <security mode="None"/>
        </binding>

      </netTcpBinding>
      <wsHttpBinding>
        <binding name="DefaultWSBinding">
          <security mode="None"/>
        </binding>
      </wsHttpBinding>

      <mexHttpBinding>
        <binding name="mexHttpBinding"/>
      </mexHttpBinding>
    </bindings>
    <behaviors>
      <serviceBehaviors>
        <behavior name="ServerServiceBehaviour">
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true" />
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
        <behavior name="MexBehaviour">
          <serviceMetadata httpGetEnabled="true" policyVersion="Policy15"/>

        </behavior>
        <behavior name="WebServiceBehaviour">
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true" />
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>

</configuration> 
```

有人可以告诉我我可能做错了什么吗？如果我在 IIS 或 VS2010 中的内置网络服务器中托管，我会遇到类似的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T12:06:34.223

您的配置中的服务标签是错误的。应该是这样的：

```
<service name="namespace.WebService" behaviorConfiguration="WebServiceBehaviour">
        <endpoint address="WebService.svc"
                  binding="wsHttpBinding"
                  bindingConfiguration="DefaultWSBinding"
                  name="WSEndPoint"
                  contract="namespace.IWebService">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>
        <endpoint address="mex"
                  binding="mexHttpBinding"
                  contract="IMetadataExchange"
                  bindingConfiguration="mexHttpBinding"/>
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost/Temp/"/>
          </baseAddresses>
        </host>
      </service> 
```

service 元素中的 name 值和 endpoint 元素中的 contract 值应该是完全限定的。

# android - 更新 JSONObject 中的元素

> ID：10580452
> 
> 赞同：0
> 
> 时间：2012-05-14T09:14:40.987
> 
> 标签：android, nullpointerexception, arrays

为了避免每次对近百个字段进行 NullPointerExceptions 的代码检查变得臃肿，我想将对象中的所有“null”引用替换为“0”。但是，以下代码根本不这样做。

```
private JSONObject vinfo;
Iterator iter = vinfo.keys();
while(iter.hasNext()){
    String key = (String)iter.next();
    String value = vinfo.getString(key);
    if (value==null){
       vinfo.put(key, "0");
    }
} 
```

知道如何正确编码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T09:32:35.967

它不起作用，因为您`JSONObject`不能包含“正常”`null`值，因为您不能将它们放入其中，正如 Javadoc for `JSONObject.put(String name, Object value)`method 所说：

> 如果该值为 null，则删除 name 的任何现有映射。

所以行的“值”字符串`String value = vinfo.getString(key)`永远不会是`null`. 您应该检查`JSONObject.NULL`：

```
String key = (String)iter.next();
if (vinfo.isNull(key)) {
    vinfo.put(key, "0");
} 
```

此外，我不确定这条线是否：`vinfo.put(key, "0");`不会给你[`ConcurrentModificationException`](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/ConcurrentModificationException.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T09:19:25.070

使用`String.replaceAll()`您的 JSON 字符串将所有空值替换为 0。

# xpages - 已知问题即 9 注释 853

> ID：10580454
> 
> 赞同：1
> 
> 时间：2012-05-14T09:14:47.257
> 
> 标签：xpages

使用ie9在853中开发xpage时是否存在已知问题。

目前我有一个带有单选按钮的 xpage，它确实有一个 onchange 部分刷新。它不适用于ie9。在 Firefox 上它确实有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T15:07:34.293

昨天有同样的问题，`onclick()`对`onchange()`我有用 - 虽然不理想

```
<xp:eventHandler
event="onchange" submit="true" refreshMode="partial"
refreshId="PanTransfer" id="eventHandler2"></xp:eventHandler>
<xp:eventHandler
event="onclick" submit="true" refreshMode="partial" refreshId="PanTransfer"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T13:33:14.133

在复选框或单选按钮上使用 onclick() 事件，这在两种浏览器中都有效。

# mysql - Saving pictures in the a MySQL DB vs saving it as file

> ID：10580456
> 
> 赞同：2
> 
> 时间：2012-05-14T09:14:53.810
> 
> 标签：mysql, database

I know this question was asked in various ways here, but none of the answer is conclusive.

I have a system which among other things updates a website gallery. I can both "upload" the file to the website (and save a copy at the system - needed) or just save it in the DB and save the space (and another upload). If I go with the files I would need to "notify" the webpage of every change (picture delete, add or change) instead of just making the change in the DB.

So:

1.  If we are talking about a standard website with a picture gallery, is it best to save the pictures as pictures or in the DB?
2.  If the webpage is very visited or very large, does it makes any difference?

Is the difference that significant? Or just go with the convenient way?

Although I presented my case I would like also to have a "more in general" answer, what is the "good" approach when talking about saving files.

Thanks in advance for clarifying it,

Michel.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T09:18:08.347

Only put structured data in a DB. Images are files and should be kept on a files system. The performance of the DB will degrade more and more as the number of pictures / users grows. Instead create an image object which you can use to track the image location and meta data.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T10:20:04.780

I have had the same problem with you in a previous project of mine.

I decided to go with only storing the path of the image in my database (which is just a string) and save the image in the file system, not in the DB.

This is the best practice in many ways. It keeps your DB small, getting a large amount of rows is faster and DB back ups are significantly smaller.

Just put the images in a file and save the path in the DB so you can retrieve it later.

# c# - 性能：While 循环

> ID：10580461
> 
> 赞同：-7
> 
> 时间：2012-05-14T09:15:19.613
> 
> 标签：c#, performance, loops, while-loop, il

简单的问题：什么是最好的，方法 1 还是方法 2？

方法 2 更快/更好：

```
List<int> data = Enumerable.Range(0, 10000000).ToList();
int j = 0;

// Method 1
while (j < data.Count)
{
    // do something
    j++;
}

j = 0;

// Method 2   
while (j++ < data.Count)
{
    // do something
} 
```

还是一个简单的for循环会更好？

**更新：** 根据评论，一个子问题：应该避免使用while循环还是应该避免使用for循环并用这些while循环替换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T09:47:59.743

我都不建议，而是建议这样做

```
List<int> data = Enumerable.Range(0, 10000000).ToList();
int j = -1;

// Method 1   

while (++j < data.Count)
{
    // do something
}

int j = 0;
do
    {
        //anything
    } while (++j<data.count); 
```

pre-increment 操作比 post 快，虽然性能优势很小

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T09:17:46.737

没有区别（至少在性能方面很重要，你应该测量**真正**繁重的计算）

我会选择第一个，因为它对**我**来说似乎更清楚。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-14T09:19:55.647

两者都需要相同的执行时间，没有区别。你可以在你的项目中使用任何一个。

# c# - 如何填充 Viewmodel 列表集合

> ID：10580465
> 
> 赞同：0
> 
> 时间：2012-05-14T09:15:31.373
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

如何在 ViewModel 中填充列表集合

控制器：

```
 SchoolEntities db = new SchoolEntities();

    public ActionResult Index()
    {
        var student= from s in db.Students
        select s.Name.ToList();

        return View();
    } 
```

模型视图：

```
 public List<Student>students { get; set;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T09:17:51.530

您需要以学生身份返回视图，以便在您的视图中使用

```
 public ActionResult Index()
{
    var student= from s in db.Students
    select s.Name.ToList();

    return View(student);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T09:29:52.283

您可以创建一个`ModelView`，填充它并将其传递给视图，如下所示：

```
public ActionResult Index()
{
    var studentList = db.Students.ToList();

    return View(new ModelView { students = studentList });
} 
```

# matlab - Matlab，从 csv 文件中读取多个二维数组

> ID：10580469
> 
> 赞同：3
> 
> 时间：2012-05-14T09:15:41.060
> 
> 标签：matlab, file-io, csv, import

我有一个 csv 文件，其中包含 4 列的二维数组，但行数不同。例如：

```
2, 354, 23, 101
3, 1023, 43, 454
1, 5463, 45, 7657

4, 543, 543, 654
3, 56, 7654, 344

... 
```

我需要能够导入数据，以便我可以对每个数据块运行操作，但是*csvread*、*dlmread*和*textscan*都忽略空行。

我似乎无法在任何地方找到解决方案，这怎么办？

**PS：**

可能值得注意的是，上述格式的文件实际上是许多文件的串联，只包含一个数据块（我不想每次都从数千个文件中读取）因此块之间的空行可以是更改为任何其他分隔符/标记。这只是使用 python 脚本完成的。

**编辑：我的解决方案 - 基于/受以下 petrichor 启发**

我用速度更快的*textscan*替换了*csvread*。然后我意识到，如果我用 nan 行替换空白行（修改我的 python 脚本），我可以消除对第二个*文本扫描*慢点的需要。我的代码是：

 **```
filename = 'data.csv';
fid = fopen(filename);
allData = cell2mat(textscan(fid,'%f %f %f %f','delimiter',','));
fclose(fid);

nanLines = find(isnan(allData(:,1)))';

iEnd = (nanLines - (1:length(nanLines)));
iStart = [1 (nanLines(1:end-1) - (0:length(nanLines)-2))];
nRows = iEnd - iStart + 1;

allData(nanLines,:)=[];

data = mat2cell(allData, nRows); 
```

计算时间为 0.28 秒（一个只有 103000 行的文件）。我已经接受了 petrichor 的解决方案，因为它确实最好地解决了我最初的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T09:51:18.893

```
filename = 'data.txt';

%# Read all the data
allData = csvread(filename);

%# Compute the empty line indices
fid = fopen(filename);
lines = textscan(fid, '%s', 'Delimiter', '\n');
fclose(fid);
blankLines = find(cellfun('isempty', lines{1}))';

%# Find the indices to separate data into cells from the whole matrix
iEnd = [blankLines - (1:length(blankLines)) size(allData,1)];
iStart = [1 (blankLines - (0:length(blankLines)-1))];
nRows = iEnd - iStart + 1;

%# Put the data into cells
data = mat2cell(allData, nRows) 
```

这为您的数据提供了以下信息：

```
data = 

    [3x4 double]
    [2x4 double] 
```**

# java - 选择带有时间戳的记录

> ID：10580475
> 
> 赞同：1
> 
> 时间：2012-05-14T09:16:02.433
> 
> 标签：java, oracle

我从数据库中选择 ts：ts =`Select ts from ...` 所以现在我的变量中有 oracle.sql.TIMESTAMP。现在我需要选择具有此时间戳的所有记录：

```
select * from ... where time = ts 
```

我怎么能这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T09:19:08.987

尝试`PreparedStatement`（[Javadoc](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html)）：

```
PreparedStatement pstmt = connection.prepareStatement("select * from ... where time = ?");
pstmt.setTimestamp(1, timestamp);
ResultSet rs = pstmt.executeQuery; 
```

# php - Javascript Geoserver 调用 PHP 脚本？

> ID：10580488
> 
> 赞同：1
> 
> 时间：2012-05-14T09:16:34.840
> 
> 标签：php, javascript, geoserver

我有一个 javascript，它使用在 apache Tomcat 上运行的地理服务器显示地图。我需要从数据库中获取信息以在地图上显示标签。但这就是我卡住的地方。我有一个 mysql 数据库，其中包含我需要显示的信息。我以为我会使用 php 来访问它。但 Geoserver 或 Tomcat 不执行 php。我尝试使用 JavaBridge 让 tomcat 运行 php，但这也不起作用。有没有其他方法可以让地理服务器访问数据库中的某些信息？我什至安装了 django，但我找不到任何关于如何拨打电话的教程？我必须在这里混淆很多概念。请帮助。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T09:30:47.297

您可能希望从 Tomcat Servlet 模拟 WMS 或 WFS 服务器来访问您的数据库。

为什么要使用 PHP ？

如果您真的需要，您可以安装 Apache 并使用 PHP 模拟 WMS/WFS 服务器。然后只需使用您的 URL 来检索数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-03T17:44:37.553

一个常见的设置是让 GeoServer (Tomcat) 与 PHP 服务器（可能是 Apache httpd）一起运行。在 GeoServer 中，您将通过 WMS 和/或 WFS（这些是标准化的 RESTful API Web 服务）将 MySQL 中的地理空间数据库作为层公开。您现在将有一个 PHP 前端写入客户端浏览器。您的 PHP 可能会收到数据请求，这些数据可以通过对 GeoServer 实例的 curl 请求轻松检索并处理/返回给您的客户端。这是一个非常具体的用例。

话虽如此，它听起来像 GeoServer，而 WMS 和 WFS 等地理空间 Web 服务对于您的需求来说太过分了。听起来你只是想在谷歌地图或其他东西上用纬度/经度绘制一些点。对具有 lat/lon 列的表进行简单的 db 查询并以 json 格式返回到浏览器就足够了。然后这些将作为矢量绘制在地图上。请注意，如果您需要绘制和显示 1000 个向量，则用例会变得更加复杂，因为这些向量很快就会成为浏览器的沉重负载，并且会使您的网站陷入爬行状态。

# excel - 重新格式化 CSV 文件中的数据

> ID：10580490
> 
> 赞同：0
> 
> 时间：2012-05-14T09:16:43.697
> 
> 标签：excel, csv

我有来自 csv 文件的数据。一列包含像“0.2.11”这样的文本，我需要将其重新格式化为“00.02.0011”，前导零和点分隔部分的长度至关重要。这些不是日期，只是随机数字。我怎样才能重新格式化那些？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T13:33:18.613

我知道这是一个非常长的公式，但我相信它会满足您的需求：

```
=IF(LEN(IF(ISERR(FIND(".",A1)),A1,LEFT(A1,FIND(".",A1)-1)))=2,IF(ISERR(FIND(".",A1)),A1,LEFT(A1,FIND(".",A1)-1)),"0"&IF(ISERR(FIND(".",A1)),A1,LEFT(A1,FIND(".",A1)-1)))&"."&IF(RIGHT(MID(A1,FIND(".",A1)+1,2))<>".",MID(A1,FIND(".",A1)+1,2),"0"&LEFT(MID(A1,FIND(".",A1)+1,2),1))&"."&IF(LEN(RIGHT(A1,LEN(A1)-FIND("*",SUBSTITUTE(A1,".","*",LEN(A1)-LEN(SUBSTITUTE(A1,".",""))))))=4,RIGHT(A1,LEN(A1)-FIND("*",SUBSTITUTE(A1,".","*",LEN(A1)-LEN(SUBSTITUTE(A1,".",""))))),IF(LEN(RIGHT(A1,LEN(A1)-FIND("*",SUBSTITUTE(A1,".","*",LEN(A1)-LEN(SUBSTITUTE(A1,".",""))))))=3,"0"&RIGHT(A1,LEN(A1)-FIND("*",SUBSTITUTE(A1,".","*",LEN(A1)-LEN(SUBSTITUTE(A1,".",""))))),IF(LEN(RIGHT(A1,LEN(A1)-FIND("*",SUBSTITUTE(A1,".","*",LEN(A1)-LEN(SUBSTITUTE(A1,".",""))))))=2,"00"&RIGHT(A1,LEN(A1)-FIND("*",SUBSTITUTE(A1,".","*",LEN(A1)-LEN(SUBSTITUTE(A1,".",""))))),"000"&RIGHT(A1,LEN(A1)-FIND("*",SUBSTITUTE(A1,".","*",LEN(A1)-LEN(SUBSTITUTE(A1,".","")))))))) 
```

它可能足够长，您必须将其保存为新的 Excel 格式之一，如 .xlsx 或 .xlsm 才能保存。如果您遇到问题，请告诉我，如果您需要，我还将公式分解为多个单元格（或步骤）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-08T07:43:58.923

有一个更短（但仍然丑陋）的 Excel 公式使用 TEXT 函数进行格式化：

```
=TEXT(MID(A1,1,FIND(".",A1)-1),"00") &"."& TEXT(MID(A1,FIND(".",A1)+1,FIND(".",A1,FIND(".",A1)+1)-FIND(".",A1)-1),"00") &"."& TEXT(RIGHT(A1,LEN(A1)-FIND(".",A1,FIND(".",A1)+1)),"0000") 
```

我想指出还有其他方法可以解决同样的问题。如果您有很多大的 csv 文件，您可能会考虑在导入 Excel 之前进行预处理。例如，在 awk 中做同样的工作是微不足道的：

```
BEGIN {
    while(getline < "e.csv") {
        split($1,a,".");
        printf("%02d.%02d.%04d\n",a[1],a[2],a[3]);
    }
} 
```

Gawk 适用于 Windows。安装后，您可以在 Windows 或 PowerShell 命令行上运行它，`.\awk -f x.awk`其中 x.awk 是文本文件中的上述代码。

# android - Android-无法在eclipse中编辑我的xml文件

> ID：10580500
> 
> 赞同：1
> 
> 时间：2012-05-14T09:17:22.307
> 
> 标签：android, eclipse

自从我使用 eclipse 作为 IDE 已经好几年了，我之前没有遇到过类似的问题。

当我导入 Android 项目时，我可以编辑 java 文件所在的 src 文件。但是，我无法编辑任何带有 xml 扩展名的文件。（AndroidManifest.xml 和布局文件夹中带有 xml 扩展名的所有文件）。

我可以使用其他编辑器来编辑它，例如 vim。

我不知道为什么会在这里发生。

日食：靛蓝

Eclipse SDK：3.7.2

如果您对如何配置它有任何想法，请告诉我。

非常感谢。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:37:43.880

好吧，我终于放弃找出为什么它在我的日食上不起作用。但是，然后我转而下载其他版本的 eclipse，它可以完美运行！所以我认为这可能是我猜的 Android 和 Eclipse 之间的兼容性。

这是我尝试过的版本：

不起作用：ADT：18

```
 Eclipse: Indigo
         Eclipse SDK
         Version: 3.7.2
         Build id: M20120208-0800 
```

是否有效：ADT:18

```
 Eclipse IDE for Java Developers
         Version: Indigo Service Release 2
         Build id: 20120216-1857 
```

因此，如果你们中的任何人遇到同样的问题，我建议您节省时间并下载

取而代之的是最新的 Eclipse。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T09:39:04.623

ADT 有问题。您使用的是哪个 ADT 版本？

每当您尝试打开 .xml 文件时，您的 Eclipse 一定会崩溃，是吗？

# ruby-on-rails - 如何在 AutoScaling 组中创建新的 EC2 实例？

> ID：10580505
> 
> 赞同：1
> 
> 时间：2012-05-14T09:17:42.590
> 
> 标签：ruby-on-rails, amazon-ec2, autoscaling

我想在自动缩放组中创建 EC2 实例。我想使用 Ruby SDK 手动完成。我没有在[amazon-ec2 Docs](http://rubydoc.info/gems/amazon-ec2/0.9.17/frames)中找到任何参数来传递 AutoScaling Group 名称的名称。谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T09:10:04.427

除了更新自动缩放组并将所需的实例数量增加 1 之外，您无法手动创建实例。特定实例可以使用`TerminateInstanceInAutoScalingGroup`.

您还可以`ExecutePolicy`调用预先存在的自动缩放策略。我不认为您可以从 API 触发云监视警报（除了通过注入足够量的指标数据来触发警报（对于非自定义指标您可能无法做到这一点））

# c# - 如何创建一个简单的标签云？使用 C# 和 CSS 样式

> ID：10580508
> 
> 赞同：0
> 
> 时间：2012-05-14T09:17:49.080
> 
> 标签：c#, asp.net, tags, tag-cloud, word-cloud

我发现创建标签云是不可能的，我找不到任何演练或教程。（至少工作的那些）。

我只是在寻找一个简单、基本的工作标签云示例，然后我可以为它增添趣味。

我找到的最佳链接是：

[http://www.geekzilla.co.uk/View960C74AE-D01B-428E-BCF3-E57B85D5A308.htm](http://www.geekzilla.co.uk/View960C74AE-D01B-428E-BCF3-E57B85D5A308.htm)

但是它已经过时了，我无法下载源文件，并且代码中有很多空白。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T10:19:53.670

这不是一个真正困难的问题。本质上，标签云只是将字体大小与标签的常见程度联系起来的一种方式。

首先是标签出现的频率：

```
select Value, Count(*)
from Tag
group by Value
order by Count(*) 
```

然后，当您将此结果集呈现到页面时，使用某种算法来计算每个标签的计数并将其表示为字体大小。一种天真的方法是将字体大小直接设置为计数，但这可能会导致不可读的结果。相反，也许只是将前 10% 作为大字体，接下来的 10% 作为下一个字体大小，等等。不过，您必须制定一个适合您和您的数据的精确算法。

此外，从几个角度（可读性、搜索、可访问性）来看，标签云确实有点垃圾。确保标签云不是访问标签的唯一方式。可能按 alpha 顺序或按专用页面上的 Count(*)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T07:36:37.393

使用来自[Google Charts API的](https://developers.google.com/chart/interactive/docs/more_charts)[TermCloud](http://visapi-gadgets.googlecode.com/svn/trunk/termcloud/doc.html)。它非常易于使用，并且呈现精美。

# string - 如何使用vb6检查一个单词是否仅包含大写字符

> ID：10580512
> 
> 赞同：1
> 
> 时间：2012-05-14T09:18:01.823
> 
> 标签：string, vb6

我想通过使用 vb6 找出字符串中的任何单词是否仅包含大写字符。

让我们说一个这样的字符串：`"If you only knew the power of the DARKSIDE!"`

在这里，我想抓住`"DARKSIDE"`标点符号。

那么我怎样才能实现呢？这应该很容易..虽然我一眨眼都想不出来..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T09:25:51.263

```
Dim astrSplitItems() As String
astrSplitItems = Split(strInputString, " ")
For intX = 0 To UBound(astrSplitItems)
  If astrSplitItems(intX) = UCase(astrSplitItems(intX))
    //Found
  End If
Next 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T09:24:53.263

试试这个：

`If Chr("YOUR LETTER") = UCase(Chr("YOUR LETTER"))`

如果是真的，字母是大写的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T09:24:56.670

也许用正则表达式？ [VB6 正则表达式](http://www.regular-expressions.info/vb.html)

# javascript - jcrop 页面突然跳转

> ID：10580514
> 
> 赞同：3
> 
> 时间：2012-05-14T09:18:08.440
> 
> 标签：javascript, jquery, jcrop

这是我的页面： [http ://anashimyafim.co.il/join](http://anashimyafim.co.il/join)

您可以单击下面的绿色按钮，您将被滑动到另一个 div，您应该在其中上传图像。

比上传图片后，我把它放在页面中，然后调用 jcrop 函数。

如果我单击图像进行裁剪，则 div 会突然移动。

你有什么建议吗？？

# eclipse-rcp - 如何使用不同的输入文本打开多个控制台视图

> ID：10580516
> 
> 赞同：0
> 
> 时间：2012-05-14T09:18:17.347
> 
> 标签：eclipse-rcp

我想在 Eclipse rcp 应用程序中单击单个 swt 按钮上打开具有不同输入文本的多个控制台视图有人可以告诉我吗？谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T12:06:16.533

添加 org.eclipse.ui.console 作为依赖项，之后您可以创建不同的扩展。[您可以在此页面http://www.eclipsezone.com/eclipse/forums/t66777.html](http://www.eclipsezone.com/eclipse/forums/t66777.html)
上找到有关实施的更多详细信息。

这是一个简单的实现（[source](http://de.comp.lang.java.narkive.com/gKY9USRE/eclipse-osgi-implementierung-konsolen-zugriff)）：

**插件.xml**

```
<plugin>
    <extension point="org.eclipse.ui.console.consoleFactories">
        <consoleFactory label="ConsoleX" class="console.Factory">
        </consoleFactory>
    </extension>
</plugin> 
```

**类工厂**

```
package console;

import org.eclipse.ui.console.ConsolePlugin;
import org.eclipse.ui.console.IConsole;
import org.eclipse.ui.console.IConsoleFactory;
import org.eclipse.ui.console.IConsoleManager;
import org.eclipse.ui.console.MessageConsole;

public class Factory implements IConsoleFactory {

    private static MessageConsole _console;

    public void openConsole() {
        MessageConsole console = getConsole();
        if (console != null) {
            IConsoleManager manager =
            ConsolePlugin.getDefault().getConsoleManager();
            IConsole[] existing = manager.getConsoles();
            boolean exists = false;
            for (int i = 0; i < existing.length; i++) {
                if(console == existing[i])
                    exists = true;
            }
            if(! exists)
                manager.addConsoles(new IConsole[] {console});
            manager.showConsoleView(console);
        }

    }

    public static MessageConsole getConsole() {
        if (_console == null) {
            _console = new MessageConsole("ConsoleX",null);
        }
        return _console;
    }

} 
```

**用法**

```
Factory.getConsole().activate();
Factory.getConsole().newOutputStream().write("Hello world.".getBytes()); 
```

# jquery - 如何在加载 Galleria 时激活所选图像

> ID：10580517
> 
> 赞同：0
> 
> 时间：2012-05-14T09:18:18.020
> 
> 标签：jquery, image, galleria

对于考试，我有 10 张图片。我在完整内容中使用 Galleria 全屏。并在首页上获取此图像缩略图。

```
ul id="galleria">
        <li><img src="photo1.jpg"></li>
        <li><img src="photo2.jpg"></li>
        <li><img src="photo3.jpg"></li>
     // more...
    </ul> 
```

当我单击首页缩略图（考试，3\. 缩略图）时，打开该全屏图像。所以，我点击 3\. 图片，全屏打开 3\. 图片。

我知道，Galleria 有[显示选项](http://galleria.io/docs/options/show/)，但我不知道如何做动态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T07:17:04.777

动态的？您想使用“下一步”、“返回”按钮吗？它是使用开发人员主题的简单方法。Galleria 的动态图像数组：http: [//galleria.io/docs/options/dataSource/](http://galleria.io/docs/options/dataSource/) 您只需使用 ajax 或 php-script 从文件夹/base 加载此数组

# android - 无法在android中获取页面的全部来源

> ID：10580520
> 
> 赞同：1
> 
> 时间：2012-05-14T09:18:33.403
> 
> 标签：android, html, androidhttpclient

我只是想获取解析数据的页面来源。
我使用了以下代码

```
public static String getPageSourceFromUrl(String Url) {
        String text = "";
        try {
            HttpClient client = new DefaultHttpClient();
            HttpGet request = new HttpGet(Url);
            HttpResponse response = client.execute(request);
        InputStream in = response.getEntity().getContent();
        BufferedReader reader = new BufferedReader(
                new InputStreamReader(in));

        StringBuilder str = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            str.append(line);
        }
        in.close();
        text = str.toString();
    } catch (Exception ex) {

    }
    return text;
} 
```

页面是：“ [http://vn.answers.yahoo.com/question/index?qid=20111022210730AAWvfKI](http://vn.answers.yahoo.com/question/index?qid=20111022210730AAWvfKI) ”

不幸的是，在某些页面（如上面的页面）中，文本返回只是整个源代码的一部分。也许字符串超出了限制，所以有人有任何解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T20:24:42.433

我设法解决了（我们的）问题。优雅的方法是创建一个类：

```
public class GetRating {

    public GetRating(){

    }

    public String GetRatingFromURL(String url){

        HttpClient httpclient = new DefaultHttpClient(); // Create HTTP Client
        HttpGet httpget = new HttpGet(url); // Set the action you want to do
        HttpResponse response = null;
        try {
            response = httpclient.execute(httpget);
        } catch (ClientProtocolException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } // Executeit

        HttpEntity entity = response.getEntity(); 
        InputStream is = null;

        try {
            is = entity.getContent();
        } catch (IllegalStateException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } // Create an InputStream with the response

        BufferedReader reader = null;
        try {
            reader = new BufferedReader(new InputStreamReader(is, "iso-8859-1"), 8);
        } catch (UnsupportedEncodingException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }

        StringBuilder sb = new StringBuilder();
        String line = null;

        try {
            while ((line = reader.readLine()) != null) // Read line by line
                sb.append(line + "\n");
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }

        String resString = sb.toString(); // Result is here

        return resString;

    }

} 
```

然后从另一个类调用它：

```
GetRating GN = new GetRating();
String pagesource = GN.GetRatingFromURL(url)("http://somewebpage.com"); 
```

# razor - 当前操作不在 Mvc.sitemap 文件中时，MVC Sitemap 呈现为空

> ID：10580522
> 
> 赞同：0
> 
> 时间：2012-05-14T09:18:37.473
> 
> 标签：razor, asp.net-mvc-4, sitemapprovider

当当前操作未在 MVC.sitemap 文件中列出时，是否可以强制站点地图控件呈现菜单？

我有一个简单的顶部导航。当当前操作在站点地图中时，调用`.Menu()`将呈现正确的`<ul><li>..`数据。但是，如果我访问了一个*不在*站点地图中的页面，例如 /Home/Login，那么它根本不会呈现任何 html（甚至没有评论，只是空白）。这不是`[authorize]`问题；当我在“/Home/Index”时，菜单很好。

似乎它应该呈现所请求的内容，但只是不设置`IsCurrentNode`and`IsNodeInPath`属性。这是我正在打的电话

```
<div id="main-nav">
    @Html.MvcSiteMap().Menu(0, true, true, 1)
</div> 
```

Mvc.sitemap 文件：

```
<mvcSiteMapNode title="Home" controller="Home" action="Index">
    <mvcSiteMapNode title="Form New Human" controller="Person" action="Create"/>
    <!-- there is no mvcSiteMapNode for "Home" "Login" -->
</mvcSiteMapNode> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T07:11:57.517

找到了绕过它的方法。它显然不是一种内置的扩展方法，或者至少我找不到。你可以打电话`Html.MvcSitemap().Menu(Html.MvcSiteMap.Provider.RootNode,...)`，但我不想两次实例化助手。

```
<div id="main-nav">
@{
    var sm = Html.MvcSiteMap();
    @sm.Menu(sm.Provider.RootNode, true, true, 2);  // 2 levels (home, plus main nav)
}
</div> 
```

在反汇编中环顾四周似乎表明它有点像这样：

*   你*真的*需要一个起始节点
*   如果你不给它一个，它会尝试根据当前节点找到一个
    *   加上限制（前向搜索、深度限制等）
    *   如果你想要 1 级的节点，你必须知道你在哪个级别
*   由于返回null，因此起始节点为null，这意味着助手写入了一个空字符串

可能有一些技巧的组合，或者一个或两个重载，可以做到这一点，但我现在找不到。这适合我的需要（简单的顶部菜单）。必须有一种更简单的方法来做到这一点，使用通配符，或基于路线，进行最接近的匹配。我认为菜单是 web 应用程序的一个相当标准的部分，这将被覆盖 :)

# sql - 按顺序更新系列

> ID：10580529
> 
> 赞同：-1
> 
> 时间：2012-05-14T09:19:16.037
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005

我需要对系列`UPDATE`中的多条记录运行语句`ORDER BY`。这是因为我的更新包含一个标量函数，它使用早期更新的值。除了按所需顺序**循环之外**，任何人都可以提出更好的方法吗？

* * *

对不起，我应该早点做的，场景是..

我的问题是我有一个表变量，它有分层记录，

## ID SlNo 结果

1 1.0 真

2 1.1 真

3 1.1.1 真

4 1.1.2 错误

5 1.2 真

6 1.2.1 错误

7 1.2.2 错误

8 1.2.3 错误

9 1.2.4 错误

树结构是，

1.0

```
1.0 > 1.1

1.0 > 1.1 > 1.1.1 
```

1.0 > 1.1 > 1.1.2

1.0 > 1.2

1.0 > 1.2 > 2.2.1

1.0 > 1.2 > 2.2.2

1.0 > 1.2 > 2.2.3

1.0 > 1.2 > 2.2.4

我想将结果更新到一个表中，如果所有子分支都是“False”，那么它的父分支应该是“False”。为此，我需要更新“降序”中的行，并且还必须看到它的所有子分支都是“False”。我可以在单个更新语句中执行此操作吗？如何在“我的更新查询”中说“订购依据”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T13:26:17.617

编写一个查询，使用选择生成您想要的值。此查询可能会使用 row_number() 函数来确保排序。

然后，使用此查询进行更新。

举个简单的例子，如果你想将一个列更新为一个表的序列号，其中顺序由 col1 指定，那么你可以这样做：

```
select t.*, row_number() over (partition by NULL order by col1) as seqnum
from table t 
```

现在将其放入更新中：

```
with newvals (select t.*,
                     row_number() over (partition by NULL order by col1) as seqnum
              from table t
             )
update table
    set column = seqnum
from t
where t.id = table.id 
```

# android - 从 Sqlite 数据库中检索数据并将其绘制在图形中以供 Android 应用程序使用

> ID：10580531
> 
> 赞同：0
> 
> 时间：2012-05-14T09:19:23.823
> 
> 标签：android, sqlite, graph

是否有任何现有示例需要从 Sqlite 数据库中检索数据并将其绘制在 XY 图中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T09:27:31.197

您可能会找到以下两个帮助链接，第一个将通过示例向您展示如何使用 SQLlite 数据库，第二个将包含如何在 android 中绘制图形的示例

[使用 SQLlite 数据库](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)

[如何绘制图表](https://stackoverflow.com/questions/424752/any-good-graphing-packages-for-android/7362757#7362757)

# objective-c - UItextFields 数据转 JSON

> ID：10580537
> 
> 赞同：0
> 
> 时间：2012-05-14T09:19:48.950
> 
> 标签：objective-c, ios, xcode, uitextfield

我有两个 UItextFields，userNameTextField 和 passwordTextField 以及一个 UIbutton 连接。我想知道用户在 userNametextField 和 passwordTextField 中输入的内容，请问我该怎么做？感谢您的回答。

```
#pragma mark - User auhtentification
-(IBAction)userAuthentificate{
    BOOL loginValid = YES;
    BOOL passwordValid = YES;   // Not specified yet

    // contrioll d'interfac__ on test login et password
    if (loginValid && passwordValid) {

    NSString *jsonRequest = @"{\"login\":\"Samir\",\"password\":\"test\",\"mail\":\"test@gmail.com\"}";

        //  NSString *jsonRequest = @"{\"login\":\"Samir\",\"password\":\"test\",\"mail\":\"samir@gmail.com\",\"editor\":\"1\"}";

        NSString *request_url =@"http:.../register"; // Url WS
        NSURL *url = [NSURL URLWithString:request_url];
        self.currentRequest = [ASIFormDataRequest requestWithURL:url];
        currentRequest.delegate =self;
        NSData *requestData = [NSData dataWithBytes:[jsonRequest UTF8String] length:[jsonRequest length]];
        [self.currentRequest appendPostData:requestData];
        [self.currentRequest setRequestMethod:@"POST"];

        [self.currentRequest startSynchronous];
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T09:30:14.347

你可以把这样的东西放在你的`jsonRequest`字符串的地方（代码使用[SBJson](http://stig.github.com/json-framework/)框架）：

```
NSDictionary *container = [[NSDictionary alloc] initWithObjectsAndKeys:
                            [loginTextField text], @"login",
                            [passwordTextField text], @"password",
                            [mailTextField text], @"mail"];

NSString *jsonString = [container JSONRepresentation];
// don't forget to release container if not using ARC AFTER creating the NSData object 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T09:27:54.970

简单的字符串替换怎么样？

```
NSString *jsonRequest = [NSString stringWithFormat:@"{\"login\":\"%@\",\"password\":\"%@\",\"mail\":\"%@\"}", userNameTextField.text, passwordTextField.text, emailtextField.text]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T09:29:31.330

采用

```
NSString *jsonRequest = [NSString stringWithFormat:@"{\"login\":\""%@"\",\"password\":\""%@"\",\"mail\":\"test@gmail.com\"}",userNameTextField.text,passwordTextField.text]; 
```

# ruby - 每个 render/redirect_to 调用的基本协议 (https://)

> ID：10580543
> 
> 赞同：0
> 
> 时间：2012-05-14T09:20:27.660
> 
> 标签：ruby, https, protocols, render, redirecttoaction

有没有办法可以设置一个基本协议来使用

```
render :action => "myaction"
redirect_to :action => "myaction" 
```

而不是打电话

```
render :action => "myaction", :protocol => "https://"
redirect_to :action => "myaction", :protocol => "https://" 
```

每次？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-14T14:43:19.987

Simply use config.force_ssl = true in your environment configuration.

```
# config/application.rb
module MyApp
  class Application < Rails::Application
    config.force_ssl = true
  end
end 
```

You can also selectively enable https depending on the current Rails environment. For example, you might want to keep HTTPS turned off on development, and enable it on staging/production.

```
# config/application.rb
module MyApp
  class Application < Rails::Application
    config.force_ssl = false
  end
end

# config/environments/production.rb
MyApp::Application.configure do
  config.force_ssl = true
end 
```

Behind the scenes, Rails adds the awesome Rack::SSL Rack middleware to your application middleware stack. Rack::SSL automatically filters the request, redirects not-HTTPS requests to the corresponding HTTPS path and applies some additional improvements to make sure your HTTPS request is secure.

# regex - CSS3类匹配字母范围[az]+？

> ID：10580546
> 
> 赞同：1
> 
> 时间：2012-05-14T09:20:54.190
> 
> 标签：regex, css, css-selectors

是否有可能为任何具有“icon-”类的元素创建 CSS 定义，然后是一组字母而不是数字。根据[这篇](http://www.sitepoint.com/regex-matching-attribute-selectors/)文章，类似：

```
[class^='/icon\-([a-zA-Z]+)/'] {} 
```

应该有效。但由于某种原因，它没有。

特别是我需要为“icon-user”、“icon-ok”等所有元素创建样式定义，但不是“icon-16”或“icon-32”

有可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T09:25:18.247

CSS 属性选择器不支持正则表达式。

如果你真的仔细阅读那篇文章：

> # 正则表达式匹配属性选择器
> 
> 它们不存在，但这不是很酷吗？我不知道实现起来有多难，或者解析起来有多昂贵，但它不就是炸弹吗？

注意前三个词。**它们不存在。**那篇文章只不过是一篇博文，感叹*CSS 属性选择器中缺少正则表达式支持*。

但如果您使用 jQuery，[James Padolsey 的`:regex`jQuery 选择器](http://james.padolsey.com/javascript/regex-selector-for-jquery)可能会让您感兴趣。例如，您给定的 CSS 选择器可能如下所示：

```
$(":regex(class, ^icon\-[a-zA-Z]+)") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T15:41:44.123

我在 facebook 上回答了这个问题，但我认为我最好也在这里分享:)

我还没有测试过，所以如果它不起作用，请不要开枪:) 但我的猜测是明确定位类名中包含单词 icon 的元素，但指示浏览器不要包含那些包含数字的类.

示例代码：

```
div[class|=icon]:not(.icon-16, .icon-32, icon-64, icon-96) {.....} 
```

参考：

属性选择器...（[http://www.w3.org/TR/CSS2/selector.html#attribute-selectors](http://www.w3.org/TR/CSS2/selector.html#attribute-selectors)）：[att|=val]

表示具有 att 属性的元素，它的值要么正好是“val”，要么以“val”开头，紧跟“-”（U+002D）。

：不是选择器...（[http://kilianvalkhof.com/2008/css-xhtml/the-css3-not-selector/](http://kilianvalkhof.com/2008/css-xhtml/the-css3-not-selector)）

希望这可以帮助，

瓦西姆

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T16:21:37.450

我测试了我以前的解决方案，可以确认它不起作用（请参阅 BoltClock 的评论）。然而，这确实：

OP：“**特别是我需要为“icon-user”、“icon-ok”等所有元素创建样式定义，但不是“icon-16”或“icon-32”** ”

所需的 CSS 代码如下所示：

```
/* target every element were the class name begins with ( ^= ) "icon" but NOT those that begin with ( ^= ) "icon-16", or "icon-32" */
*[class^="icon"]:not([class^="icon-16"]):not([class^="icon-32"]) {.....} 
```

或者

```
/* target every element were the class name begins with ( ^= ) "icon" but NOT those that contain ( *= ) the number "16" or the number "18" */
*[class^="icon"]:not([class*="16"]):not([class*="32"]) { ...... } 
```

测试代码：

```
<!DOCTYPE html>
<html>
    <head>
        <style>
            div{border:1px solid #999;margin-bottom:1em;height:100px;}
            *[class|=icon]:not([class|=icon-16]):not([class|=icon-32]) {background:red;color:white;}
        </style>
    </head>     
    <body>
        <div class="icon-something">
            <h4>icon-something</h4>
            <p><strong>IS</strong> targeted therfore background colour will be red</p>
        </div>
        <div class="icon-anotherthing">
            <h4>icon-anotherthing</h4>
            <p><strong>IS</strong> targeted therfore background colour will be red</p>
        </div>
        <div class="icon-16-install">
            <h4>icon-16-install</h4>
            <p>Is <strong>NOT</strong> targeted therfore no background colour</p>
        </div>
        <div class="icon-16-redirect">
            <h4>icon-16-redirect</h4>
            <p>Is <strong>NOT</strong> targeted therfore no background colour</p>
        </div>
        <div class="icon-16-login">
            <h4>icon-16-login</h4>
            <p>Is <strong>NOT</strong> targeted therfore no background colour</p>
        </div>
        <div class="icon-32-install">
            <h4>icon-32-install</h4> 
            <p>Is <strong>NOT</strong> targeted therfore no background colour</p>
        </div>
        <div class="icon-32-redirect">
            <h4>icon-32-redirect</h4> 
            <p>Is <strong>NOT</strong> targeted therfore no background colour</p>
        </div>
        <div class="icon-32-login">
            <h4>icon-32-login</h4>
            <p>Is <strong>NOT</strong> targeted therfore no background colour</p>
        </div>
    </body>
</html> 
```

# php - PHP：将数组与字符串（或数组）进行比较并添加到该字符串？

> ID：10580547
> 
> 赞同：0
> 
> 时间：2012-05-14T09:20:56.660
> 
> 标签：php, arrays, multidimensional-array

> 我对 php 相当陌生，所以我不确定我想在这里找到的名称和术语。我确实在 SE 上进行了搜索，但尽管问题的标题相似，但它们提出的问题完全不同，不幸的是，它们甚至没有部分相关。如果它存在并且我找不到，请提前原谅。

我有一个字符串`$str= 'somevalue';`或一个`$array = ['s', 'o', 'm' ..];`

现在，我有另一个二维数组，我想检查这个主数组的第一个项目，并根据它们是否存在，添加第二个项目。

```
$to_match[] = ('match' => 'rnd_letter', 'if_not_add' => 'someval');
$to_match[] = ('match' => 'rnd_letter', 'if_not_add' => 'someval_x');
.. 
```

rnd_letter 是一个字母或字母的组合， someval 是一样的。

如何检查 $str 中是否存在“match”中的字母，如果不存在，则添加到数组的“if_not_add”的末尾字母？

非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T09:43:53.187

```
$to_match = array();
$to_match[] = array('match' => 'hello', 'if_not_add' => 'value 1');
$to_match[] = array('match' => 'abc', 'if_not_add' => 'value 2');
$to_match[] = array('match' => 'w', 'if_not_add' => 'value 3');

$str = 'Hello World!';
$new_array = array();

foreach($to_match as $value) {
  if(!stristr($str, $value['match'])) {
    $new_array[] = $value['if_not_add'];
  }
}

var_dump($new_array); // outputs array(1) { [0]=> string(7) "value 2" } 
```

这将遍历每个数组元素，然后检查 的值是否`match`存在于 中`$str`，如果不存在，它将添加到`$new_array`（我认为这就是你要找的东西？）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T09:36:14.547

细绳：

```
for (int i = 0; i < strlen($to_match['match']); i++) {
    $char = substr($to_match['match'], i, 1);
    if (strpos($str, $char) !== false) {
        //contains the character
    } else {
        //does not contain the character
    }
} 
```

大批：

```
for(int i = 0; i < strlen($to_match['match']); i++) {
    $char = substr($to_match['match'], i, 1);
    $charFound = false;
    for (int j = 0; j < count($array); j++) {
        if ($char == $array[j]) {
            $charFound = true;
        }
    }

    if ($charFound) {
        //it contains the char
    } else {
        //it doesnt contain the char
    }
} 
```

我想应该是这样的。让我知道你对此有何看法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T09:43:05.103

您可以使用以下方式检查数组中是否存在字符串

```
<?php 
$array = array('mike','sam','david','somevalue');
$str = 'somevalue';
if(in_array($str,$array)){
    //do whatever you want to do
    echo $str;
}

?> 
```

# c - 以秒或毫秒为间隔检查条件

> ID：10580548
> 
> 赞同：1
> 
> 时间：2012-05-14T09:21:03.060
> 
> 标签：c, time

我需要每秒或几毫秒的间隔执行一个循环和一个条件。我能做些什么来实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T09:24:30.767

```
#include <unistd.h> 
```

[usleep](http://www.unix.com/man-page/FreeBSD/3/usleep/) for POSIX 平台（高精度睡眠）

# php - PHP中姓氏的正确大写

> ID：10580554
> 
> 赞同：3
> 
> 时间：2012-05-14T09:21:31.557
> 
> 标签：php, regex, capitalization

> **可能重复：**
> [编程中人名的大写](https://stackoverflow.com/questions/2466706/capitalization-of-person-names-in-programming)

我注意到在我的网站上注册的人非常懒惰，他们甚至不费心将自己的名字大写。

我的网站是一个面向商业的网站，所以这里没有“自我表达自由”的说法。

名字大写非常容易，因为我想不出一个西方名字不会以大写字母开头的例子。我可能是错的。

但是将姓氏大写变得更加困难，例如

```
O'Brien
O´Flaherty
de Wit
McKenzie
Auditore da Firenze
de los Remedios de Escalada
Virta-Jokela 
```

什么是在 PHP 中正确自动大写姓氏的好解决方案，它可以在大约 95% 的时间内正确处理？我知道[这一点](http://www.kalzumeus.com/2010/06/17/falsehoods-programmers-believe-about-names/)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T09:28:47.680

这是一个快速而肮脏的解决方案：

1.  将字符串拆分为由空格和破折号分隔的单词
2.  对于每个单词：
    *   如果它在固定的停用词列表中（“de”、“los”等），请不要修改。
    *   如果没有，请检查它是否在固定列表中具有前缀（此列表将包含诸如“O”、“Mc”等内容）。如果存在这样的前缀，则对其进行规范化（例如翻译`O"`为`O'`）并考虑没有前缀的单词进入下一步。
    *   大写单词的第一个字母。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T09:33:07.373

起初，这似乎很容易：只需将您在姓氏中遇到的每个单词大写即可。所以`foo bar`会变成`Foo Bar`。

但是，正如您已经指出的那样，也有例外：

*   德维特
*   奥迪托雷·达·佛罗伦萨
*   德洛斯雷梅迪奥斯

这可以通过您不想大写的片段黑名单来解决（在此示例中为“de”、“da”、“de los”）。*但是你错误地假设'De'，'Da'和'De Los'不作为应该*大写的（部分）姓氏存在。

所以干脆说：不行，这也做不好，只能半信半疑。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-14T09:35:48.260

它使每个字母的第一个字符大写`$name = ucwords(strtolower($name));`

对于 95% 以上的情况，这将是准确的。

不清楚，你想怎么样`de los Remedios de Escalada`？有了上面的表达式，它就会变成`De Los Remedios De Escalada`。我不确定是否需要。

另一种方法是用“”来爆炸名称，并使 Last word 的第一个字符大写使用`ucword()`

# .net - 在循环中对 Texture 执行 SetData 时具有 TaskFactory 执行时间的 XNA

> ID：10580555
> 
> 赞同：1
> 
> 时间：2012-05-14T09:21:31.777
> 
> 标签：.net, c#-4.0, task-parallel-library, xna-4.0, taskfactory

虽然这个问题是关于 XNA 中的实现，但我认为它更适合更通用的 C# 论坛。我正在使用带有 XNA 的 TaskFactory 来初始化其他资源，同时向用户呈现加载屏幕。代码与此类似：

```
 Task.Factory.StartNew(() => DoSomeInitialStuff()) 
          .ContinueWith((x) => BuildALevel(x.Result)) 
          .ContinueWith((x) => DoSomeFinalizingStuff(x.Result)) 
          .ContinueWith((x) => NotifyThatIAmFinished()); 
```

我已经记录了所需的时间，`DoSomeFinalizingStuff`当我的主窗口处于焦点时，我的方法将花费更长的时间。`DoSomeFinalizingStuff`实际使用SetData方法写入一个400x400的Texture2D（过程中不显示，只是创建和修改）。

对焦且可见时的 AVG 时间：~5000 毫秒（有时高达 10k+） 不对焦（且不可见）时的平均时间：~100 毫秒

测量的时间是 的实际执行时间`DoSomeFinalizingStuff`。那是 AVG 的 50 倍差异，我非常好奇，为什么会这样。

运行调试器时，所有链接的任务都需要大约一秒钟才能完成。在没有调试且没有交互的情况下运行时速度会慢很多，通常加载屏幕会在那里停留大约 10-15 秒，直到完成。

当我将焦点从主窗口移开时，我可以“触发”任务以更快地执行。一旦我切换出去，该功能就会被执行。

如果我删除 SetData() 调用，性能与调试或 Windows 不活动时相同。

为什么会发生这种情况，有没有办法修改这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T10:54:42.370

看起来你有一个同步问题。

一个*可能的*原因是`ContinueWith`继承`TaskScheduler`（如果你从一个用它初始化的调度程序的任务中运行`TaskScheduler.FromCurrentSynchronizationContext()`它也会有它）。试着这样称呼你`ContinueWith`：`ContinueWith(...,TaskScheduler.Default)`.

如果不是这种情况，请尝试在调试期间查看“并行任务”和其他与线程相关的窗口。它可能会帮助您识别问题。

# ios - 试飞发送反馈

> ID：10580556
> 
> 赞同：1
> 
> 时间：2012-05-14T09:21:37.170
> 
> 标签：ios, xamarin.ios, testflight

我遇到了 TestFlight 及其“反馈”功能的问题。我正在开始一个会话（`takeoff`），然后我执行命令“ `TestFlight.OpenFeedbackView`”然后我有了视图和发送的可能性，但是如果我想发送什么也没有发生。该视图会自行隐藏，并且在 Testflight.com 上没有任何反馈。

有谁能够帮我？

非常感谢您;）

# gwt - SmartGWT 中的通知消息

> ID：10580557
> 
> 赞同：1
> 
> 时间：2012-05-14T09:21:39.750
> 
> 标签：gwt, smartgwt

有一种方法可以在 smartgwt 中显示通知消息，类似于[Vaadin提供的消息](http://demo.vaadin.com/sampler#NotificationHumanized)

PD：在另一个关于 GWT 的[stackoverflow 问题](https://stackoverflow.com/questions/6035820/gwt-notification-widget)中给出的解决方案似乎在 smartgwt 中无法正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-23T16:07:42.073

[PD 建议](https://stackoverflow.com/questions/6035820/gwt-notification-widget)的解决方案链接的问题是 zindex。SmartGWT 使用高 zindex 值来显示它的组件。

解决方案是在 show 中手动增加弹出窗口的 zindex：

```
public void show(int delayMilliseconds) {
    show();
    DOM.setIntStyleAttribute(getElement(), "zIndex", 1000000);
    startDelayedHide(delayMilliseconds);
} 
```

# webkit - 每个页面上的 WebKit 报告表头

> ID：10580559
> 
> 赞同：3
> 
> 时间：2012-05-14T09:21:44.273
> 
> 标签：webkit, openerp

我已经为 HR Timesheet 员工出勤创建了 web kit 报告。我已经生成了 10 页的报告。但是我在这里遇到的小问题，报告包含一个在下一页继续的表格。它是动态的。所以问题在于下一页表格标题没有显示。

如果表格在下一页继续，我想在每一页上显示表格标题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T16:59:30.983

看起来表格标题是 webkit 的一个[已知问题](http://code.google.com/p/wkhtmltopdf/issues/detail?id=566)。该错误报告确实提出了一些解决方法，但它们听起来并不是很有希望。

如果您决定返回 RML 报告，[ReportLab 文档](http://www.reportlab.com/docs/reportlab-userguide.pdf)`repeatRows`将描述`blockTable`.

> 该参数指定在要求拆分自身`repeatRows`时应重复的前导行数。`Table`该`repeatCols`参数当前被忽略，因为 a`Table`不能按列拆分。

我自己没有尝试过，但它也出现在一些[OpenERP 文档](http://doc.openerp.com/v6.1/developer/05_reports.html)中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T04:25:26.387

好的，所以你有重复的表格，目前它在你的页面模板的标题上被覆盖......问题在于框架高度只需将框架高度调整为比 rml 文件中的当前值小一点。例如：

```
<frame id="first" x1="18.0" y1="42.0" width="535" height="600"/> 
```

它会得到解决我也有同样的问题并通过调整框架ID来解决它。这是我问的问题的链接：[Openerp rml 中的报告](https://stackoverflow.com/questions/10332293/reports-in-rml-of-openerp)

# struts2 - Action Context 和 ServletActionContext 的区别

> ID：10580562
> 
> 赞同：1
> 
> 时间：2012-05-14T09:22:05.133
> 
> 标签：struts2

嗨，我有一个问题，我们可以同时使用 Action Context 和 Servlet Action Context 来访问资源但是为什么 Struts2 人实现了两个，如果他们工作相同

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T09:28:17.243

它们的工作方式不同；一个具有特定于网络应用程序的功能。

XWork 不是一个 Web 应用程序框架——因此是 ActionContext。WebWork/Struts 2 添加了特定于 Web 的功能，因此 ServletActionContext 是 ActionContext 的子类，并添加了与 Web 相关的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T09:39:09.910

引用于： [Servlet 动作描述](http://struts.apache.org/2.1.2/struts2-core/apidocs/org/apache/struts2/ServletActionContext.html)

Servlet Action Context 是 Action Context 的子类。

“ **ServletActionContext 是用于操作的特定于 Web 的上下文信息**”。此类添加对 Web 对象（如 servlet 参数、请求属性和 HTTP 会话等内容）的访问。简单来说，可以说动作上下文是通用的，而 servlet 动作上下文在其使用方面更具体

例如：GenericServlet 和 HttpServlet；GenericServlet 用于可能不使用 HTTP 的 servlet，例如 FTP servlet 等，而 HttpServlet 更具体。

# c# - TPL 中的等待任务和 QueuedTaskScheduler 令人不安的问题（来自 ParallelExtensionsExtra）

> ID：10580563
> 
> 赞同：0
> 
> 时间：2012-05-14T09:22:08.910
> 
> 标签：c#, .net, task-parallel-library

我在 ParallelExetensionExtras 附带的 QueuedTaskScheduler 上遇到了一个令人不安的问题，但我的问题是关于等待任务、任务调度程序和线程资源的一般性问题。

似乎等待任务消耗资源，首先检查这个使用默认任务调度程序的示例，在这个示例中，有一个任务运行很长时间，有几个任务等待其完成，而还有其他任务正在等待执行以下。

这里一切正常，我可以看到那些等待的任务开始工作，然后在等待期间释放它们的资源，以便其他任务也开始执行。

```
var taskScheduler = TaskScheduler.Default;//ts.ActivateNewQueue(0);

var longRunningTask = Task.Factory.StartNew(() => Thread.Sleep(Int32.MaxValue), CancellationToken.None, TaskCreationOptions.None, taskScheduler);

Task.Factory.StartNew(() =>
{
    Console.WriteLine("Hi from waiting task");
    longRunningTask.Wait();
}, CancellationToken.None, TaskCreationOptions.None, taskScheduler);
Task.Factory.StartNew(() =>
{
    Console.WriteLine("Hi from waiting task");
    longRunningTask.Wait();
}, CancellationToken.None, TaskCreationOptions.None, taskScheduler);
Task.Factory.StartNew(() =>
{
    Console.WriteLine("Hi from waiting task");
    longRunningTask.Wait();
}, CancellationToken.None, TaskCreationOptions.None, taskScheduler);

Task.Factory.StartNew(() => Console.WriteLine("Hi"), CancellationToken.None, TaskCreationOptions.None, taskScheduler);
Task.Factory.StartNew(() => Console.WriteLine("Hi"), CancellationToken.None, TaskCreationOptions.None, taskScheduler);
Task.Factory.StartNew(() => Console.WriteLine("Hi"), CancellationToken.None, TaskCreationOptions.None, taskScheduler);
Task.Factory.StartNew(() => Console.WriteLine("Hi"), CancellationToken.None, TaskCreationOptions.None, taskScheduler);
Task.Factory.StartNew(() => Console.WriteLine("Hi"), CancellationToken.None, TaskCreationOptions.None, taskScheduler);
Task.Factory.StartNew(() => Console.WriteLine("Hi"), CancellationToken.None, TaskCreationOptions.None, taskScheduler);
Task.Factory.StartNew(() => Console.WriteLine("Hi"), CancellationToken.None, TaskCreationOptions.None, taskScheduler); 
```

如果我改变前两行来做到这一点：

```
var ts = new QueuedTaskScheduler();
var taskScheduler = ts.ActivateNewQueue(0); 
```

意思是，用一个队列定义一个 QueuedTaskScheduler 并运行相同的代码，其他任务永远不会获得资源来运行。

我的问题是之前是否有人碰到过它，是否有人知道我如何更改任务调度程序以释放等待任务的资源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T10:13:42.377

`QueuedTaskScheduler`正在按设计运行。问题是它有一个固定的最大并发级别，默认设置为`Environment.ProcessorCount`.

因此，假设您没有更改默认值，那么在 4 核计算机上最多会有 4 个正在运行的任务。

要解决此问题，您可以在不同的调度程序上运行长时间运行的任务（理想情况下是支持 的调度程序`TaskCreationOptions.LongRunning`，比如那个`Default`），或者只是设置最大并发级别，在极端情况下设置为最大值：

```
var ts = new QueuedTaskScheduler(TaskScheduler.Default, int.MaxValue); 
```

# jquery - jQuery Ajax：如何每 X 秒检查一次文件（可以访问）？

> ID：10580566
> 
> 赞同：2
> 
> 时间：2012-05-14T09:22:30.357
> 
> 标签：jquery, ajax

我想用 jQuery/Ajax 检查文件。

我正在生成一个文件，这可能需要 30 - 90 秒。

如果文件已经存在（已生成），我希望 jQuery/Ajax 每隔 X（例如 5）秒检查一次。

我怎样才能做到这一点？

此外，我想知道文件是否真的完全生成了，所以我想检查唯一的访问权限（或者是否发生错误，因为正在写入文档）。

这可能吗？

我找到了以下代码片段来检查文件，但它似乎总是发送“OK”。

```
$.ajax({
url:'http://www.example.com/somefile.ext',
type:'HEAD',
error:
    function(){
        //do something depressing
    },
success:
    function(){
        //do something cheerful :)
    }
}); 
```

*来源：* [http ://www.ambitionlab.com/how-to-check-if-a-file-exists-using-jquery-2010-01-06](http://www.ambitionlab.com/how-to-check-if-a-file-exists-using-jquery-2010-01-06)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T09:34:19.660

你是如何生成文件的？

IMO，发生的事情是在文件生成开始时，您`http://www.example.com/somefile.ext`已经存在于服务器上，同时正在生成其内容。这就是为什么您始终获得成功状态的原因。

更好的方法是创建一个服务器钩子（例如`http://www.example.com/checkFileStatus`），它会返回`{generated: true, fileUrl: 'yourFile'}`并使用 setTimeout 来检查它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T09:27:26.923

```
success:
    function(res){
        // res -> will catch the response from server if file has been generated
        // suppose server will send 'ok' after file generation so, res == 'ok'
        // now check for response in every 5 seconds
        var tm = setInterval(function() {
                     if(res == 'ok') {
                        alert('File made');
                        clearInterval(tm);

                        // now here do what you want

                     }
                 }, 5000);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T09:31:57.903

您可以使用它来代替 $.ajax

```
$('#divid').load('url').fadeIn("slow");}, 10000); // refresh every 10000 milliseconds 
```

并在文件“url”中添加您的 php/SQL 代码

# java - Java循环引用

> ID：10580568
> 
> 赞同：3
> 
> 时间：2012-05-14T09:22:31.100
> 
> 标签：java, constructor, stack-overflow, circular-reference

在我正在进行的项目中，人们编写了服务类来访问 DAO。几乎每个业务对象都有自己的服务，这些服务使用自己的 DAO。在某些服务上，我们使用对其他服务的引用。目前，人们正在构造函数中实例化所需的服务。

但是现在，我遇到了麻烦，因为服务 A 需要服务 B，而服务 B 需要服务 A，所以调用任一构造函数都会导致堆栈溢出......

示例（伪代码）：

```
//Constructor of OrderService
public OrderService() {
     orderDAO = DAOFactory.getDAOFactory().getOrderDAO();
     itemService = new ItemService();
}

//Constructor of ItemService
public ItemService() {
     itemDAO = DAOFactory.getDAOFactory().getItemDAO();
     orderService = new OrderService();
} 
```

你会如何解决这个问题？使用单例模式？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T09:27:36.847

Spring 框架通过使用依赖注入解决了这个问题。简而言之，它所做的就是实例化所有 DAO，然后在实例化之后，但在主要业务逻辑之前设置 dao-dependencies。

如果您必须手动执行此操作，这里有一个示例：

```
/*
  OrderService
 */
public OrderService ()
{
     orderDAO = DAOFactory.getDAOFactory().getOrderDAO();
}

public setItemService (ItemService service)
{
     itemService = service;
}

/*
  ItemService
 */
public ItemService ()
{
     itemDAO = DAOFactory.getDAOFactory().getItemDAO();
}

public setOrderService (OrderService service)
{
     orderService = service;
}

/*
   Bring it together in some other class
 */
...
// instantiate singletons
orderService = new OrderService ();
itemService = new ItemService ();

// inject dependencies
orderService.setItemService (itemService);
itemService.setOrderService (orderService); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T09:28:56.123

让 OrderService 只处理订单。让 ItemService 只处理项目。然后创建一个将两者结合的 OrderItemService。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T09:45:27.117

Can you separate out the "service" from the Constructor?

Or in other words, lets say you have an OrderService and it needs to consult its own personal copy of an ItemService. Will this ItemService instance need *it's* own copy of the OrderService to fulfill the request from the OrderService calling it?

Thus, it would be a sort of lazy initialization--don't create the new item unless and until you actually need it. And don't link up the additional service unless and until you need it.

Second idea: can you pass a copy as part of the Constructor?

e.g.:

```
//Constructor of OrderService public OrderService() 
{     orderDAO = DAOFactory.getDAOFactory().getOrderDAO();
      itemService = new ItemService(this); 
}
//Constructor of ItemService public ItemService(OrderService orderService) 
{     itemDAO = DAOFactory.getDAOFactory().getItemDAO();
      this.orderService = orderService; 
} 
```

Or possibly in the reverse direction?

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T09:37:52.377

是的，“单例模式”以及延迟初始化就可以了。不要在构造函数中初始化服务，而是在静态 getter 中：

```
class OrderService {
  private static OrderService instance;
  private OrderDAO orderDAO;

  public OrderService() {
    orderDAO = DAOFactory.getDAOFactory().getOrderDAO();
  }

  public static synchronized OrderService getInstance() {
    if (instance == null) {
      instance = new OrderService();
    }

    return instance;
  }
} 
```

正如[乔纳森所说](https://stackoverflow.com/a/10580627/521799)，您还可以将服务注入其他服务，但这可能不是必需的。如果同步容易导致内存问题，您可以使用`volatile`. 另请参阅[此处的答案](https://stackoverflow.com/a/1625180/521799)，详细说明“双重检查锁定模式”（但要小心，要做到这一点！）

# java - 字符串和字节 [] 问题 java

> ID：10580571
> 
> 赞同：1
> 
> 时间：2012-05-14T09:22:48.373
> 
> 标签：java, string, stringbuilder

我正在使用`getbytes()`and String 构造函数将 String 转换为 byte[]，然后再将 byte[] 转换为 Java 中的 String，

```
String message = "Hello World";
byte[] message1 = message.getbytes(); 
```

使用 PipedInput/OutputStream 我将其发送到另一个线程，其中，

```
byte[] getit = new byte[1000];
pipedinputstream.read(getit);
print(new String(getit)); 
```

最后一次打印结果为 1000 被打印...我想要实际的字符串长度。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T09:29:19.383

您忽略了读取的字节数。如下所示：

```
 byte[] getit = new byte[1000]; 
  int bytesRead = pipedinputstream.read(getit); 
  print(new String(getit, 0, bytesRead).length()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T09:25:18.297

读取字符串时，您需要获取读取的字节数，并将长度指定给您的字符串：

```
byte[] getit = new byte[1000];
int readed = pipedinputstream.read(getit);
print(new String(getit, 0, readed)); 
```

请注意，如果您的字符串长度超过 1000 个字节，它将被截断。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T09:30:32.827

```
public String getText (byte[] arr)
{
StringBuilder sb = new StringBuilder (arr.length);

for (byte b: arr)
    if (b != 32)
        sb.append ((char) b);

return sb.toString ();
} 
```

不是很干净，但应该可以。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-14T09:54:04.760

> 我正在将字符串转换为 byte[]，然后再将 byte[] 转换为 String

为什么？往返保证不工作。字符串不是二进制数据的容器。不要这样做。停止用头撞墙：疼痛会在一段时间后停止。

# ms-word - Word DDE 调用被忽略

> ID：10580573
> 
> 赞同：0
> 
> 时间：2012-05-14T09:22:52.103
> 
> 标签：ms-word, dde, c++builder-xe

我从我的 C++ 代码中调用两个 DDE 命令：

```
FormDde->DdeClientConv1->ExecuteMacro("[AddAddIn \"C:\\Projects\\wscs-trunk\\bin\\ws.dot\", 1][FileOpen .Name = \"C:\\Projects\\wscs-32x\\doc\\MyDoc.doc\]",false)
FormDde->DdeClientConv1->ExecuteMacro("[ToolsMacro .Name = \"FillTemplateAttests\", .Run]", false) 
```

第一个命令打开模板 ws.dot 和文档 MyDoc.doc。模板 ws.dot 包含我尝试在第二个 DDE 命令调用中执行的宏*FillTemplateAttests 。*这两个命令正常运行了 3 个多月。几天前，第二个命令中断了功能。我没有更改这部分代码或宏*FillTemplateAttests*中的任何内容。功能中断意味着当我调用第二个命令时，即使*ExecuteMacro调用返回 true 也不会发生任何事情（这意味着根据*[文档](http://docwiki.embarcadero.com/Libraries/en/Vcl.DdeMan.TDdeClientConv.ExecuteMacro)应该一切正常）。当我在另一台计算机上使用相同的文档 ws.dot 和 MyDoc.doc 运行相同的程序时，一切正常。当我两次调用第二个命令时，它实际上被执行（但只有一次 - 第一次调用被忽略）：

```
FormDde->DdeClientConv1->ExecuteMacro("[AddAddIn \"C:\\Projects\\wscs-trunk\\bin\\ws.dot\", 1][FileOpen .Name = \"C:\\Projects\\wscs-32x\\doc\\MyDoc.doc\]",false)
FormDde->DdeClientConv1->ExecuteMacro("[ToolsMacro .Name = \"FillTemplateAttests\", .Run]", false)
FormDde->DdeClientConv1->ExecuteMacro("[ToolsMacro .Name = \"FillTemplateAttests\", .Run]", false) 
```

在我看来，Word 安装已损坏。你能帮我找到问题的核心吗？

**附录：**

当我连续调用这 3 个命令时，它们都被执行：

```
FormDde->DdeClientConv1->ExecuteMacro("[AddAddIn \"C:\\Projects\\wscs-trunk\\bin\\ws.dot\", 1][FileOpen .Name = \"C:\\Projects\\wscs-32x\\doc\\MyDoc.doc\]",false)
FormDde->DdeClientConv1->ExecuteMacro("[Beep]", false);
FormDde->DdeClientConv1->ExecuteMacro("[ToolsMacro .Name = \"FillTemplateAttests\", .Run]", false) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T12:11:11.243

即使我不知道为什么，这也解决了我的问题：

```
FormDde->DdeClientConv1->ExecuteMacro("[AddAddIn \"C:\\Projects\\wscs-trunk\\bin\\ws.dot\", 1][FileOpen .Name = \"C:\\Projects\\wscs-32x\\doc\\MyDoc.doc\]",false)
FormDde->DdeClientConv1->ExecuteMacro("[]", false);
FormDde->DdeClientConv1->ExecuteMacro("[ToolsMacro .Name = \"FillTemplateAttests\", .Run]", false) 
```

# security - XULRunner 应用程序安全实施

> ID：10580576
> 
> 赞同：0
> 
> 时间：2012-05-14T09:23:13.740
> 
> 标签：security, certificate, xulrunner

我想在我的独立 XULRunner 应用程序中加入安全功能。具体来说，我想使用安全证书来验证用户下载的应用程序可执行文件。据我所知，它称为代码签名。但我在这方面很绿。有关如何进行的任何指示？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T10:21:08.973

XULRunner 内置的证书功能并不意味着验证 Windows 可执行文件的签名——您需要为此使用 Windows 函数（例如通过[js-ctypes](https://developer.mozilla.org/en/js-ctypes)）。然而，这并不简单，[在这里](http://hg.mozilla.org/mozilla-central/file/ac968ff4fe41/toolkit/components/maintenanceservice/certificatecheck.cpp#l52)您可以看到该检查在 C++ 代码中是如何工作的。

但是，如果您只是下载应用程序的更新，那么使用 HTTPS 连接可能就足够了 - 然后验证可执行文件的来源（但是，如果该服务器被黑客入侵，将无济于事）。

# excel - 如何在excel中创建具有多列的下拉列表

> ID：10580581
> 
> 赞同：3
> 
> 时间：2012-05-14T09:23:54.317
> 
> 标签：excel, excel-formula

![在此处输入图像描述](../Images/5990bb032efd6d130709503fdb5d94eb.png)！您好我正在使用 Excel 2003。我需要将数据验证添加到一列，它应该在单元格中显示两列，当用户选择时，第一列值应该显示在单元格中。

前任：

> Col1 Col2
> IND 印度
> CHI 中国

列 - 显示以选择

> 专栏
> IND-印度
> CHI-中国

选择或后将显示在单元格中`CHI`。`China``CHI`

是否有可能在 Excel 中执行此过程。

在此先感谢您的帮助... ![在此处输入图像描述](../Images/5990bb032efd6d130709503fdb5d94eb.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-08T16:45:38.737

# (1)

如果您需要一个下拉项在被选中后显示不同的标题，您可以让另一个单元格作为显示。例如：

![下拉示例](../Images/8ef4de8c33b43ce18f02e8f22e6c4ccb.png)

B3 （辅助单元**格**）可以有一个公式，`=LEFT($C$3,3)`或者使用 INDEX/MATCH 来查找键（比如在你的“验证”表中）。

并且**C3**（数据验证列表）具有自定义格式`;;;"(Change)"`或“（选择）”甚至像“↓”这样的符号，并且永远不会显示实际选择的列表项。

您也可以通过创建一个 activex 组合框控件来**使用 VBA 执行此操作。**

# (2)

如果您需要一个下拉列表来依赖于另一个下拉列表中的选择，您可以使用动态相关数据验证： [http ://www.myonlinetraininghub.com/excel-factor-19-dynamic-dependent-data-validation](http://www.myonlinetraininghub.com/excel-factor-19-dynamic-dependent-data-validation)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-12T09:29:47.647

转到Devloper选项卡-插入-活动控件-插入组合框在您的Excel工作表中绘制组合框右键单击组合框，在列表填充范围中打开属性，输入列的范围集列数= 2更改列的宽度

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-12T18:38:45.973

您可以对第一列使用下拉菜单，对第二列使用 VLOOKUP 功能。

VLOOKUP 会查看第一列，并根据那里的内容用其他地方的数据填充第二列。

我还找到了有关如何使用该功能的 YouTube 教程。给你： [https ://www.youtube.com/watch?v=-WAEzokHSJM](https://www.youtube.com/watch?v=-WAEzokHSJM)

# sql - 使用 SSIS 或链接服务器访问 BO 存储库

> ID：10580586
> 
> 赞同：0
> 
> 时间：2012-05-14T09:24:32.853
> 
> 标签：sql, ssis, business-intelligence, linked-server, business-objects

有人知道是否可以（以及如何）从“Microsoft 工具”连接到 BO 存储库？

我需要查询`CI_INFOOBJECTS`目录。理想情况下，我想使用链接服务器或 SSIS 包进行连接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T14:13:00.623

知道您拥有哪个版本的 BO 可能会有所帮助，但是[最近的一篇文章](http://alteksolutions.com/wp/index.php/2010/03/using-query-builder-to-explore-your-businessobjects-repository/)基本上说 a) 它是一种二进制格式，因此没有“直接”的方式来查询它；b) 但您可以从 BO 本身查询；c) BO Enterprise SDK 提供有关如何从 .NET 获取信息的文档。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-17T13:07:13.477

我采取了不同的方法，通过构建一个程序集来获取我需要的信息并从我的 SSIS 包中访问它

# ruby-on-rails - Rails教程期间的rspec错误：未定义的局部变量或方法`static_pages_index_path'

> ID：10580587
> 
> 赞同：6
> 
> 时间：2012-05-14T09:24:41.650
> 
> 标签：ruby-on-rails, rspec, railstutorial.org

我关注 Rails 教程，但在[图 3.6](http://ruby.railstutorial.org/chapters/static-pages#fig%3ared_failing_spec)之前的[第 3.2.1 节](http://ruby.railstutorial.org/chapters/static-pages#sec%3aTDD)有问题。跑步时

```
$ bundle exec rspec spec/requests/static_pages_spec.rb 
```

我失败了

```
Failures:
  1) StaticPages GET /static_pages works! (now write some real specs)
     Failure/Error: get static_pages_index_path
     NameError:
       undefined local variable or method `static_pages_index_path' for # <RSpec::Core::ExampleGroup::Nested_1::Nested_1:0x007fe7592b33b8>
     # ./spec/requests/static_pages_spec.rb:7:in `block (3 levels) in <top (required)>'    
Finished in 0.00454 seconds
1 example, 1 failure
Failed examples:
rspec ./spec/requests/static_pages_spec.rb:5 # StaticPages GET /static_pages works! (now write some real specs) 
```

这是文件：

## 规范/请求/static_pages_spec.rb

```
require 'spec_helper'
describe "Static pages" do
  describe "Home page" do
    it "should have the content 'Sample App'" do
      visit '/static_pages/home'
      page.should have_content('Sample App')
    end
  end
end 
```

## 应用程序/控制器/static_pages_controller.rb

```
class StaticPagesController < ApplicationController
  def home
  end
  def help
  end
end 
```

## app/views/static_pages/home.html.erb

```
<h1>Sample App</h1>
<p>
  This is the home page for the
  <a href="http://railstutorial.org/">Ruby on Rails Tutorial</a>
  sample application.
</p> 
```

## 配置/路由.rb

```
SecondApp::Application.routes.draw do
  get "static_pages/home"
  get "static_pages/help"
end 
```

## 宝石文件

```
source 'https://rubygems.org'
gem 'rails', '3.2.3'
group :development do
  gem 'sqlite3', '1.3.5'
  gem 'rspec-rails', '2.9.0'
  gem 'guard-rspec', '0.5.5'
end
group :assets do
  gem 'sass-rails',   '3.2.4'
  gem 'coffee-rails', '3.2.2'
  gem 'uglifier', '1.2.3'
end
gem 'jquery-rails', '2.0.0'
group :test do
  gem 'rspec-rails', '2.9.0'
  gem 'capybara', '1.1.2'
  gem 'growl', '1.0.3'
end
group :production do
  gem 'pg', '0.12.2'
end 
```

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-24T11:38:17.807

我也遇到了这个问题；本教程似乎错过了一步。

中`static_pages_spec.rb`，行：

```
get static_pages_index_path 
```

...应改为：

```
get static_pages_home_path 
```

这是因为 中没有`index`方法`static_pages_controller.rb`。`index`而是`home`称为.

但是，我查看了您的代码，您的`static_pages_spec.rb`文件似乎与教程不匹配，但我猜您是从其他地方复制代码？除了在您的控制台错误文本中，我看不到`static_pages_index_path`任何地方，这似乎很奇怪。

这是我`static_pages_spec.rb`的全部内容（在这个阶段），它通过了测试：

```
require 'spec_helper'

describe "StaticPages" do
  describe "GET /static_pages" do
    it "works! (now write some real specs)" do
      # Run the generator again with the --webrat flag if you want to use webrat methods/matchers
      get static_pages_home_path
      response.status.should be(200)
    end
  end
end 
```

在此之后，教程（在[清单 3.12](http://ruby.railstutorial.org/chapters/static-pages#code-help_content_spec)中）取代了这一步，`static_pages_spec.rb`完全改变了，尽管忘记明确推荐改变。这使我上面的代码无关紧要，但希望它可以解释您的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T17:46:22.317

我遇到了同样的问题，我通过以下方式解决了这个问题。我也是一个新手（第一个 Stack Overflow 帖子......紧张），所以我没有行话：

我收到这个错误的原因是我没有创建教程清单 3.4 中描述的 staticpages 控制器（我想我删除它时弄乱了清单 3.4 中教你如何操作、删除东西的练习命令）。检查您是否没有 staticpages 控制器的方法是：

`sample_app/controllers/` 所以我那里只有 application_controller.rb 文件，没有`static_pages_controller.rb`.

所以你必须运行`rails generate controller StaticPages home help --no-test-framework` 命令并将控制器放在那里。

你可以去仔细检查你的工作，`localhost:3000/static_pages/home`看看那里是否真的有东西。

然后根据教程编辑`home.html.erb`文件并检查`static_pages/home`它是否真的显示“示例应用程序”。

如果`static_pages/home`真的说“Sample App”，而你运行它时测试仍然失败，那么只有上帝才能帮助你。或者也许是 Stack Overflow 上的其他人。祝你好运。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T12:03:39.973

仔细看看你的`spec/requests/static_pages_spec.rb`. 请确保您已删除`get static_pages_index_path`行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T22:01:54.653

您必须以与 home.html.erb 相同的方式更新您的 app/views/static_pages/help.html.erb 页面以包含“示例应用程序”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-05T00:29:06.757

我面临着类似的问题。当你编辑 时`static_pages_spec.rb`，看起来你输入了这个命令（在清单 3.9 中）

```
<editor name> static_pages_spec.rb 
```

而你必须输入

```
<editor name> spec/requests/static_pages_spec.rb 
```

这肯定会解决你的问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-27T23:28:14.457

当您将“config.include Capybara::DSL”添加到 RSpec 帮助文件的底部时，在此之前的部分中，您可能忘记了保存页面。这是通过同时按下 Command + S 键来完成的。有时，如果某些东西第一次没有按照您期望的方式工作，那么重新启动您的 Rails 服务器也是一个好主意。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-20T18:06:55.753

您是否删除了 public/index.html？这可能会导致问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-10-24T22:50:00.643

问题是您正在尝试运行尚未实际工作的生成规范。本教程告诉您用以下内容替换该规范的主体：

```
it "should have the content 'Sample App'" do
  visit '/static_pages/home'
  page.should have_content('Sample App')
end 
```

请注意，它说的是“访问”，而不是“获取”，等等......

发生这种情况是因为规范生成器 ( `rails generate integration_test static_pages`) 假定存在一个有效的 RESTful 资源，其中包含许多命名路由，包括`_index_path`，但本教程中的此控制器并非如此。

# php - PHP 使用正则表达式去除除 YouTube 之外的 iframe

> ID：10580588
> 
> 赞同：0
> 
> 时间：2012-05-14T09:24:44.007
> 
> 标签：php, iframe, youtube, strip

我想从 HTML 中删除除 YouTube 之外的所有 iframe。

我已经尝试使用带有插入符号的代码来排除 YouTube 关键字，但它没有用。

```
$search[] = '@<iframe[^(youtube)]*?>.*?</iframe>@si';
$text = preg_replace($search, '', $document); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-02T18:01:22.123

由于谷歌搜索`php strip tags except youtube`将我链接到这里，我想我应该尝试提出一个替代答案。

也许您想使用像[HTML Purifier](http://htmlpurifier.org/)这样的库？[Malte 已经在https://stackoverflow.com/a/12784081/2716927](https://stackoverflow.com/a/12784081/2716927)中提出了这样做的方法。

未经测试的代码，但应该像这样工作：

```
require_once 'htmlpurifier/library/HTMLPurifier.auto.php';

$config = HTMLPurifier_Config::createDefault();
$config->set('HTML.Trusted', true);
$config->set('HTML.SafeIframe', true);
$config->set('URI.SafeIframeRegexp', '%^(https?:)?//(www\.youtube(?:-nocookie)?\.com/embed/|player\.vimeo\.com/video/)%'); //allow YouTube and Vimeo
$purifier = new HTMLPurifier($config);

$text = $purifier->purify($document); 
```

# javascript - Knockout JS 构建项目列表

> ID：10580593
> 
> 赞同：0
> 
> 时间：2012-05-14T09:25:13.777
> 
> 标签：javascript, design-patterns, mvvm, knockout.js

我要做的是从其他更大的可用项目列表中建立一个项目列表（对于上下文，请考虑指定某种类型产品的成分）。当谈到 Knockout 时，我仍然很年轻，我想知道我是否遗漏了什么，因为我目前使用的解决方案感觉不对。我有几个非常标准的模板，并且正在对我的视图模型上的两个可观察数组使用 foreach 绑定（一个用于可用成分列表，一个用于产品的选定成分列表）。

```
<div data-bind="template: {name:'ingredientTypeTemplate', foreach: ingredientTypes}"></div>

<div data-bind="template: {name:'selectedIngredientTypeTemplate', foreach: selectedIngredientTypes}"></div>

<script>

var productTypeViewModel = {

    ingredientTypes: ko.observableArray([]),
    selectedIngredientTypes: ko.observableArray([]),

    addIngredient: function () {
        productTypeViewModel.ingredientTypes.remove(this);
        productTypeViewModel.selectedIngredientTypes.push(this);
    },

    removeIngredient: function () {
        productTypeViewModel.selectedIngredientTypes.remove(this);
        productTypeViewModel.ingredientTypes.push(this);
    },
};

$(document).ready(function () {

    $.getJSON("/IngredientType/Index")
            .success(function (data) {
                productTypeViewModel.ingredientTypes($.parseJSON(data));
            })
            .error(function () { alert("error"); });

    ko.applyBindings(productTypeViewModel);
});

</script>

<script type="text/x-jquery-tmpl" id="ingredientTypeTemplate">
    <div>
        <span>${Name}</span>
        <a href='#' data-bind="click: productTypeViewModel.addIngredient">Add</a>
    </div>
</script> 
```

这是做我想用 Knockout 做的最好的方法吗？感觉有些不对劲，虽然我不太确定是什么。我确实有一个单独的 VM 定义，它有一个 add 函数。可观察的成分类型将使用该类型的一组 VM 进行初始化，然后模板仅在其上使用 data-bind“click: add”，但我不喜欢从这个虚拟机与主 VM 通信处理点击。

基本上，我只想说明我所做的是标准方法还是有更好（更适合淘汰赛）的方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T13:49:16.737

我认为您的方法是完全有效的，并且是我在其他淘汰赛示例中看到的。例如，从 Ryan Niemeyer 的[拖放插件](http://www.knockmeout.net/2011/05/dragging-dropping-and-sorting-with.html)v1 中，您可以找到与您正在执行的操作非常相似的以下代码片段：

```
if (position >= 0) {
    originalParent.remove(item);
    newParent.splice(position, 0, item);
} 
```

# svn - 与 Magento 合作 - 将其分解

> ID：10580596
> 
> 赞同：1
> 
> 时间：2012-05-14T09:25:22.553
> 
> 标签：svn, magento

我有两个相关的问题：

1.  是否有可能将 Magento 分解成易于管理的小块，所以
    *   我的 IDE 不必处理整个该死的项目来更改一行 CSS
    *   当我想部署它时，我不必将它全部导出到服务器？
2.  Magento 的哪些部分，确切地说，你不应该接触（除非升级到新版本）？例如应用程序/代码/核心？

作为使用过 Magento 的任何人，它都是应用程序的野兽。在我的开发电脑上，它消耗了大量资源，使用它就像涉水穿过 2 英尺的泥浆。

我目前使用它的方法基本上是将整个代码库粘贴在 SVN 存储库中。

当我完成某些事情时，我会在服务器上更新一个开发 SVN 工作副本并对其进行测试。

当我对更改感到满意时，我导出到服务器上的一个新文件夹，在 local.xml 和媒体文件夹中进行符号链接，然后将 webserver (Apache) 目录符号链接到它。

我的小系统一直很有效，但对于我的一生，我无法弄清楚如何让它更快！

我正在考虑使用不同的 SVN（或 Git）分支甚至 repos 来处理应用程序的不同部分，例如 app/code/local 或 skin/frontend/default 但无法弄清楚具体细节，即使这是最好的方法.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T17:54:00.937

从它的声音来看，如果您想保持苗条，您可能需要考虑将 app/code/local、app/code/community 和设计包保留在您的存储库中，并且只需将磁力发电机的核心代码作为单独的代码进行维护包裹。

我发现 Git 似乎更适合 Magento 的大量文件/文件夹。

如果您将 NetBeans 用于 IDE，则可以禁用扫描项目文件以在不需要时构建自动完成功能。但是，我不确定其他 IDE。

就像你说得这么优雅一样，Magento 真的会因为过于抽象而陷入困境。我建议查看 PHP 文件的操作代码缓存（如 APC），并检查本地环境中的 Mysql 设置，以帮助尽可能多地查找和提升瓶颈。

您可能还想考虑[Modman](http://code.google.com/p/module-manager/wiki/Tutorial)。

这是一篇关于如何构建 magento 项目的建议和意见的好文章：

*   [http://www.aschroder.com/2010/07/structuring-your-magento-project-for-engineering-not-hacking/](http://www.aschroder.com/2010/07/structuring-your-magento-project-for-engineering-not-hacking/)

# c# - C# WinForm 没有任何反应

> ID：10580603
> 
> 赞同：0
> 
> 时间：2012-05-14T09:25:42.920
> 
> 标签：c#, winforms

我已经在我的 Windows server 2008 上创建了 C# WinForm，它工作正常。

但是当我将此 MyProg.exe 传输到计算机窗口 7 并运行它时，什么也没有发生。

我的代码：

```
[STAThread]
        static void Main()
        {

            try
            {
                Application.SetCompatibleTextRenderingDefault(false);
                DevExpress.UserSkins.BonusSkins.Register();
                Application.EnableVisualStyles();

                //Pour TEST
                //Le_ClientID = "850001";
                //Le_Login = "850001FA";

                using (var loginForm = new Login())
                {
                    if (loginForm.ShowDialog() != System.Windows.Forms.DialogResult.OK)
                        return;
                }

                Application.Run(new Le_MainForm());
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
            }
        } 
```

有人有想法吗？

事件日志显示： - 系统

*   提供者

    [名称] 应用程序错误

*   事件 ID 1000

    [预选赛] 0

    2级

    任务 100

    关键字 0x80000000000000

*   创建时间

    [系统时间] 2012-05-14T09:40:39.000000000Z

    事件记录 ID 3557

    渠道申请

    计算机anjouachemineme

    安全

    *   事件数据

    FrontEnd_Offline.exe 1.0.0.0 4fb0c28b KERNELBASE.dll 6.1.7601.17651 4e2111c0 e0434352 0000d36f f84 01cd31b59ee78b7d C:\Soft8_Local\FrontEnd_Offline.exe C:\Windows\system32\KERNELBASE.dll dcb7cb01-9da8-11e1-bf8c-1c6f65c1ad74

提前谢谢你，史蒂夫

PS：当我午餐 MyProg.exe 时，它​​在任务管理器中列出，但它在大约 3 秒后消失（被杀死）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T09:27:59.373

执行exe（以管理员身份启动）

或者

如果您没有在默认情况下创建应用程序的框架安装，则可能会发生这种情况 Windows 7 带有 2.0 和 3.5 框架。如果您在 Visual Studio 2010 中创建应用程序，则需要从 Microsoft 网站下载 FrameWork 4.0 以在 Windows 7 中运行该 exe

[你可以从这里下载 Framework 4.0](http://www.microsoft.com/downloads/details.aspx?FamilyID=9cfb2d51-5ff4-4491-b0e5-b386f32c0992)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T14:38:47.700

我刚刚在我创建的 Windows 窗体应用程序中遇到了这个问题。显然有很多问题可能导致这种情况。在我的情况下，您可以打开任务管理器，单击应用程序，在任务管理器中看到它打开，然后立即关闭。查看问题所在的唯一方法是查看事件查看器并找到错误。

第一个是**依赖**项。如上所述，确保包含所有必需的 .dll 并且您已安装所需的框架。

第二个**KERNELBASE.dll 可能会损坏**。为确保不是这种情况，您可以运行系统文件检查器。可以在此处找到说明：http: [//support.microsoft.com/kb/929833](http://support.microsoft.com/kb/929833)

第三，是我的情况。我在 Program.cs 的构造函数中运行了一个方法，这是您启动 Windows 窗体应用程序时首先实例化的。**在创建任何异常处理之前**，我的代码中有一个错误导致异常。为了解决这个问题，我在创建未处理的异常方法后将代码移到了一个点：

`AppDomain.CurrentDomain.UnhandledException += new UnhandledExceptionEventHandler(CurrentDomain_UnhandledException);`

在我的表单构造函数中。现在程序将启动并实际抛出错误。然后我只需要修复代码中的错误。

我希望这可以帮助您或其他任何人。

# gwt - 如何根据服务器的响应创建 CellTable

> ID：10580605
> 
> 赞同：2
> 
> 时间：2012-05-14T09:25:54.900
> 
> 标签：gwt, gwt2, gwt-2.2-celltable, celltable, gwt-celltable

1.  我想创建一个 CellTable。但是 celltable 的列应该基于服务器的响应。我将服务器响应作为列表。

    ```
    No of Columns = Size of the list. 
    ```

2.  CellTable 列标题应该是来自服务器的值。例如。服务器响应：`List<Contacts> contacts`

    标题应该是`contacts.getName()`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:13:20.573

我通过以下代码实现了它。

```
 for (Contacts contact : contacts) {
               final String city = contact.getCity();
               final TextColumn<String> addressColumn = new TextColumn<String>() {

                @Override
                public String getValue(Contacts object) {
                    return city;
                }
            };

            cellTable.addColumn(addressColumn, contact.getAddress());
            } 
```

问候， Gnik

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T12:49:51.143

`CellList`与[AsyncDataProvider](http://google-web-toolkit.googlecode.com/svn/javadoc/2.4/com/google/gwt/view/client/AsyncDataProvider.html)一起使用：

```
//Create a cellList
@UiField
CellList<Contact> cellList;

//Creating dataProvider and completion of the cellList
@UiFactory
CellList<Contact> makeCellList() {
private AsyncDataProvider<Contact> provider = new AsyncDataProvider<Contact>() {
    @Override
    public void onRangeChanged(final HasData<Contact> display) {
        rpcService.getContact(new AsyncCallback<List<Contact>>() {
               @Override
               public void onSuccess(List<Contact> result) {   
                   display.setRowData(0, result); 
               }
               @Override
               public void onFailure(Exception ex) {
                    //TODO
               }
        });
    }
};

//Adding the cellList to the provider in a constructor
provider.addDataDisplay(cellList); 
```

这是完整的[示例](http://code.google.com/p/google-web-toolkit/source/browse/trunk/user/javadoc/com/google/gwt/examples/view/AsyncDataProviderExample.java?r=8944)和[文档](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiCellWidgets#data-provider)。

# asp.net-mvc - MVC4 路由 2 个包含同名控制器的区域

> ID：10580606
> 
> 赞同：1
> 
> 时间：2012-05-14T09:26:00.690
> 
> 标签：asp.net-mvc

我在 mvc4 应用程序中有 2 个区域，并且我已经为每个区域注册了命名空间。

```
 public override void RegisterArea(AreaRegistrationContext context)
    {
        context.MapRoute(
            "Intergration_default",
            "Intergration/{controller}/{action}/{id}",
            new { action = "Index", id = UrlParameter.Optional },
              constraints: null,
            namespaces: new[] { "WebApplication.Areas.Intergration.Controllers" }

        );

    } 
    public override void RegisterArea(AreaRegistrationContext context)
    {
        context.MapRoute(
            "Vend_default",
            "Vend/{controller}/{action}/{id}",
            new { action = "Index", id = UrlParameter.Optional},
              constraints: null,
            namespaces: new[] { "WebApplication.Areas.MyController.Controllers" }

        ); 
```

我可以访问 Intergration/MyController 但是当我尝试访问 MyController 时出现错误

> 找到了与名为“mycontroller”的控制器匹配的多种类型。如果服务此请求的路由 ('{controller}/{action}/{id}') 未指定命名空间来搜索与请求匹配的控制器，则可能会发生这种情况。如果是这种情况，请通过调用采用“namespaces”参数的“MapRoute”方法的重载来注册此路由。

我究竟做错了什么？我需要在 global.asax 中做一些额外的事情吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T02:57:47.497

根据您提供的代码/描述，听起来可能是几件事：

1.  您在根控制器命名空间（即，在项目根目录中的 Controllers 文件夹中，而不是在一个区域中）与另一个没有约束的区域发生了控制器名称冲突。
2.  更有可能的是，您的第二个区域注册`Vend`的名称空间看起来不正确。而不是`WebApplication.Areas.MyController.Controllers`应该是`WebApplication.Areas.Vend.Controllers`. `Vend`我敢打赌，您的根控制器命名空间中有一个控制器，它与该区域中的某些东西共享一个控制器名称。

# c# - 如何在 c# 中获取节点文本值的父级？

> ID：10580607
> 
> 赞同：1
> 
> 时间：2012-05-14T09:26:20.847
> 
> 标签：c#, xml, xpath, selectnodes

我有以下xml：

```
<?xml version="1.0"?>
<catalog>
   <book id="bk101">
      <author>Gambardella, Matthew</author>
      <title>XML Developer's Guide</title>
      <genre>Computer</genre>
      <price>44.95</price>
      <publish_date>2000-10-01</publish_date>
      <description>An in-depth look at creating applications 
      with XML.</description>
   </book>
   <book id="bk102">
      <author>Ralls, Kim</author>
      <title>Midnight Rain</title>
      <genre>Fantasy</genre>
      <price>5.95</price>
      <publish_date>2000-12-16</publish_date>
      <description>A former architect battles corporate zombies, 
      an evil sorceress, and her own childhood to become queen 
      of the world.</description>
   </book>
</catalog> 
```

我找到了名为“午夜雨”的标题。现在我想知道他的父母是谁，这样我就可以使用`<author>`文本节点。我试过类似的东西：

```
 var xpath = "../*[local-name() != 'title']";
       xml.Load(xmlalltext);
       var xl1 = xml.SelectNodes(xpath);
       MessageBox.Show(xl1.Item(0).InnerText.ToString()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T09:41:26.043

如果您已经找到标题节点并且正在寻找父节点，则只需选择当前节点的父节点即可。

```
var parentNode = titleNode.SelectSingleNode(".."); 
```

如果您正在寻找作者节点：

```
var authorNode = titleNode.SelectSingleNode("../author"); 
```

或者，您可以查找前面或后面的兄弟姐妹：

```
var authorNode = titleNode.SelectSingleNode("following-sibling::author") ?? titleNode.SelectSingleNode("preceding-sibling::author"); 
```

编辑：要回答您的评论，如果您只有标题的字符串，那么您可以使用以下内容来获取作者：

```
string xml = @"xml...";
var doc = XDocument.Parse(xml);
string author = doc
    .Descendants("book")
    .Where(x => x.Element("title").Value == "Midnight Rain")
    .Select(x => x.Element("author").Value)
    .FirstOrDefault(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T09:43:24.483

using XLinq

sample.xml(in below snipped) contains xml data

```
 XElement root = XElement.Parse(File.ReadAllText("sample.xml"));

        var matchingBooks = root.Descendants().Where(i=>String.Equals(i.Value,"Midnight Rain")).Select(i=>i.Parent) ;
        var authors = matchingBooks.Elements("author"); 
```

Output in [LinqPad](http://www.linqpad.net/)

```
 matchingBooks.Dump();

authors.Dump();

<book id="bk102">
        <author>Ralls, Kim</author>
        <title>Midnight Rain</title>
        <genre>Fantasy</genre>
        <price>5.95</price>
        <publish_date>2000-12-16</publish_date>
        <description>A former architect battles corporate zombies, 
            an evil sorceress, and her own childhood to become queen 
            of the world.</description>
        </book> 
```

* * *

```
<author>Ralls, Kim</author> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T09:44:17.337

You can use this xpath expession to get author node

```
"/catalog/book[title='Midnight Rain']/author" 
```

or this to get parent node

```
"/catalog/book[title='Midnight Rain']" 
```

eg.

```
 var result = xml.SelectNodes(string.Format("/catalog/book[title='{0}']/author", "Midnight Rain")) 
```

# asp.net - 在 MVC 3 中创建 Cookie

> ID：10580608
> 
> 赞同：4
> 
> 时间：2012-05-14T09:26:22.180
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

我怎样才能一步一步地创建一个cookie，

当他/她单击记住我时存储用户登录 ID 和密码？选项

我打算在一段时间后杀死这个饼干

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-14T09:29:17.857

Cookie 的创建方式与它们在普通的旧 ASP.NET 中的创建方式相同，您只需要访问`Response`.

```
 public ActionResult Login(string username, string password, bool rememberMe)
        {
            // validate username/password

            if (rememberMe)
            {
               HttpCookie cookie = new HttpCookie("RememberUsername", username);
               Response.Cookies.Add(cookie);
            }

            return View();

        } 
```

但是，如果您使用的是 Forms Auth，您可以让您的 FormsAuth 票证 cookie 持久化：

```
 public ActionResult Login(string username, string password, bool rememberMe)
        {
            // validate username/password

            FormsAuthentication.SetAuthCookie(username, rememberMe);

            return View();

        } 
```

您可以像这样读取 cookie：

```
public ActionResult Index()
{
    var cookie = Request.Cookies["RememberUsername"];

    var username = cookie == null ? string.Empty : cookie.Value; // if the cookie is not present, 'cookie' will be null. I set the 'username' variable to an empty string if its missing; otherwise i use the cookie value

    // do what you wish with the cookie value

    return View();
} 
```

如果您*使用*表单身份验证并且用户已登录，您可以像这样访问他们的用户名：

```
public ActionResult Index()
{

    var username = User.Identity.IsAuthenticated ? User.Identity.Name : string.Empty;

    // do what you wish with user name

    return View();
} 
```

可以解密和读取票证的内容。如果需要，您甚至可以在票证中存储少量自定义数据。[有关更多信息，请参阅本文。](http://www.danharman.net/2011/07/07/storing-custom-data-in-forms-authentication-tickets/)

# asp.net - 如果 Url 无效，请在抛出 404 错误之前执行旧版 url 查找

> ID：10580610
> 
> 赞同：0
> 
> 时间：2012-05-14T09:26:24.037
> 
> 标签：asp.net

我正在重写一个使用多种不同非微软技术编写的旧网站。新站点是asp.net 网络表单。

我在数据库中有一个 OLD url 的列表，并且有一个例程将根据数据库中的 url 列表检查请求的页面 url，并执行适当的 301 重定向到内容 NEW url。

但是，从效率的角度来看，我的问题是，只有在请求的 Url 本质上是 404/未找到时，我才能执行此 OLD url 查找。我不想在每个页面请求（通过 global.asax 中的 Application_BeginRequest）时触发我的“Check-Old-Urls-And-Redirect-If-Found”例程，因为大多数情况下，请求的页面将是不需要 301 重定向的有效新 .net 页面。因此，我希望只有在它基本上要抛出 404 错误时才能触发我的例程。

我检查数据库中旧站点 URL 的例程已缓存，因此至少它不会每次都访问数据库，但我只想阻止它甚至调用此例程（并且偶尔会在缓存过期时访问数据库）没有必要的时候。

我在想也许我可以从 global.asax 中的 Application_Error 例程中执行旧的 url 查找，检查 404 状态的错误代码，在这种情况下，执行旧的 url 查找，但是在测试时，它似乎没有在 global.asax 的 Application_Error 例程中击中我的断点 - 相反，浏览器显示 IIS 7 404 Not Found 错误。

浏览器必须接收到对新 url 的 301 响应并且不会得到不正确的 404 响应代码（除非请求的 url 既不是新的也不是旧的风味 url）。

谁能推荐一种有效的方法来处理这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T10:40:02.487

IMO 最好的办法是安装[IIS 重写模块](http://www.iis.net/download/urlrewrite)并为所有旧 URL-s 创建重定向。您可以在单独的 XML 文件中进行 301 重定向，这是一种更简洁的方法，这是关于此的 SO 帖子：

[IIS7 urlrewrite 模块 - 外部 xml 文件中的规则](https://stackoverflow.com/questions/3767864/iis7-urlrewrite-module-rules-in-external-xml-file)

更新：您可以简单地放置一个 url 列表，如下所示：

```
 <rule name="Redirect map bluesunhotels">
      <match url=".*"/>
      <conditions>
        <add input="{bluesunhotels:{REQUEST_URI}}" pattern="(.+)"/>
      </conditions>
      <action type="Redirect" url="{C:1}" appendQueryString="false"/>
    </rule>
  </rules>
  <rewriteMaps>
    <rewriteMap name="bluesunhotels">
      <add key="/index.php?show=2326" value="/resort-afrodita.aspx"/>
      <add key="/index.php?show=2271" value="/starigrad-paklenica.aspx"/>
    </rewriteMap>
  </rewriteMaps> 
```

# regex - 我可以将这两个正则表达式合二为一吗？

> ID：10580611
> 
> 赞同：1
> 
> 时间：2012-05-14T09:26:30.440
> 
> 标签：regex, perl

我的应用程序的数据库记录有十位数的 ID，空值可以用`""`或表示`"0000000000"`。目前，我使用以下习惯用法来检查有效 ID：

```
my $is_valid = $id =~ m/[0-9]{10}/ && $id =~ /[1-9]/; 
```

`"0000000000"`第一个正则表达式检查整体格式，第二个正则表达式通过在字符串中的某处查找非空数字来排除该 值。我很好奇我是否可以将这两个正则表达式合二为一。

那一个正则表达式可能效率较低，但正如我所说，我只是好奇它是否可行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T10:18:30.567

这需要[先行断言](http://www.regular-expressions.info/lookaround.html)（为清楚起见，正则表达式分为多行）：

```
if ($id =~ 
    m/\A      # Anchor the match to the start of the string
    (?!0*\z)  # Assert that it's impossible to match only zeroes until end-of-str
    [0-9]{10} # Match exactly 10 digits
    \z        # Anchor the match to the end of the string
    /x)       # (verbose regex)
    {
    # Successful match
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T11:00:17.223

我很好奇您是如何将 10 位数字 ID 与

```
my $is_valid = $id =~ m/[0-9]{11}/ && $id =~ /[1-9]/; 
```

..因为这仅匹配 11 位数字 ID。如果第`&&`一个参数为假，则运算符会短路，因此甚至永远不会检查第二个参数。

我要做的是编写一个小子程序来处理验证：

```
sub is_valid_id {
    my $id   = shift;
    return 0 if (length($id) != 10);           # assert length
    return 0 unless $id =~ /^[0-9]+$/;         # assert numeric
    return 0 unless $id =~ /[1-9]/;            # assert at least 1 non-zero digit
    return 1;
} 
```

这可能看起来过于冗长，但我认为在这种情况下以清晰的方式陈述每个要求是一个好主意。

至于好奇心，我认为 Tim Pietzcker 已经找到了将两者结合起来的正则表达式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T09:50:20.587

为什么要使用正则表达式来检查常量字符串？只需比较它们：

```
my $is_valid = $id =~ m/[0-9]{11}/ && $id ne "0000000000"; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-14T09:32:33.093

`/0{0}[1-9][0-9]{10}|0{1}[1-9][0-9]{9}|0{2}[1-9][0-9]{8}|...|0{10}[1-9][0-9]{0}/`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-14T10:44:11.660

更容易检查**$id>0** 但如果你想要正则表达式试试这个

```
my $is_valid = $id =~ /0*[1-9]+/; 
```

但两种变体都没有检查 $id 是否正好有 11 位数字。

# java - @After ,@before 不在测试用例中工作

> ID：10580613
> 
> 赞同：33
> 
> 时间：2012-05-14T09:26:38.220
> 
> 标签：java, junit, testcase

我已经开始测试，现在我想使用`@After`，`@Before`但`@Test`我的应用程序只运行该`@Before`方法并在控制台上提供输出

> 前

但是，如果我删除它`@After`并`@Before`运行@Test。我的代码在这里：

```
public class TestPractise extends AbstractTransactionalDataSourceSpringContextTests{

    @Before
    public void runBare(){
        System.out.println("before");
    }

    @Test
    public void testingMethod(){
        System.out.println("testing");
    }

    @After
    public void setDirty(){
        System.out.println("after");
    }
} 
```

为什么不`@After`,`@Test`和`@before`同时工作？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2018-07-25T09:39:51.340

使用`@BeforeEach`代替`@Before`和`@AfterEach`代替`@After`。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-05-14T14:44:58.657

The `AbstractTransactionalDataSourceSpringContextTests` class forces the use of the old JUnit 3.x syntax, which means that any of the JUnit 4 annotation will not work.

Your method `runBare()` is executed not because of the `@Before` annotation, but because it is named `runBare()`, which is a method provided by `ConditionalTestCase` and JUnit [`TestCase`](http://junit.sourceforge.net/junit3.8.1/javadoc/junit/framework/TestCase.html#runBare%28%29) class.

So you have 2 solutions:

*   Use the AlexR answer to use JUnit 4 tests and Spring;
*   Keep your inheritance of `AbstractTransactionalDataSourceSpringContextTests`, but use the `onSetUp` and `onTearDown` methods instead of the `@Before` and `@After` methods.

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2020-07-14T06:58:44.280

检查您是否正在使用 Junit4，因为从 Junit5 开始，@Before/@After 现在是 @BeforeEach/@AfterEach 并且类似的 @BeforeClass/@AfterClass 是 @AfterAll/@BeforeAll。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-05-14T09:35:59.227

它应该可以工作...但是由于您使用的是 spring 框架并且几年前引入了 JUnit 4，我建议您使用注释而不是继承。

所以，用`@RunWith(SpringJUnit4ClassRunner.class)`. 删除`extends AbstractTransactionalDataSourceSpringContextTests`.

不要忘记将[@Before](http://junit.sourceforge.net/javadoc/org/junit/BeforeClass.html)和@After 方法设为**静态**

现在它应该可以工作了。

即使您想扩展 Spring 抽象测试类，至少也要注意其中一些已被弃用。例如`AbstractTransactionalDataSourceSpringContextTests`，不推荐使用类。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-03-08T12:00:36.093

如果您在 IDE 中使用自动导入，请确保`@Test`和`@Before`是从`org.junit`包中导入的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-30T21:40:09.333

就我而言，我遇到了这个问题，解决方案是更改 java 访问修饰符，它是私有的。

之前（不工作）@Test void validate() throws Exception {}

之后（工作）@Test public void validate() throws Exception {}

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-27T11:50:53.063

# JUnit Jupiter，又名“JUnit 5”：使用`@BeforeAll`

如果您使用较新的 JUnit Jupiter（Java 8 及更高版本），您需要替换`@Before`为`@BeforeAll`.

此外，您需要使用`@TestInstance(Lifecycle.PER_CLASS)`或制作`@BeforeAll`方法来注释您的测试类`static`。这是一个例子：

```
@TestInstance(Lifecycle.PER_CLASS)
class MyTestClass {

    MyHeavyResource sharedResource;

    @BeforeAll
    void init() {
        System.out.println("init");
        sharedResource = new MyHeavyResource(1234);
    }

    @Test
    void myTest() {
        System.out.println("myTest");
        sharedResource.methodUnderTest();
    }
} 
```

## 理解`Lifecycle.PER_CLASS`

JUnit 5 对此更加严格的可能原因——要么要求要么`static`——`Lifecycle.PER_CLASS`它希望测试作者承认在`@BeforeAll`方法中初始化的任何资源实例将真正在类中的每个单独的单元测试方法之间共享。这可能会损害它们的隔离性，例如，如果`sharedResource`上面示例中的 不是无状态/幂等的。

如果`sharedResource`不能安全地共享（或者如果它是相当轻量级的），则`init`应该对方法进行注释`@BeforeEach`，这将在执行类中的每个单独测试之前创建一个新实例。

[Javadoc 用于`TestInstance`](https://junit.org/junit5/docs/current/api/org.junit.jupiter.api/org/junit/jupiter/api/TestInstance.Lifecycle.html#PER_CLASS)解释 using 如何`Lifecycle.PER_CLASS`实际执行测试类的单个实例；而 JUnit 4 和更早版本的行为相当于，它为其中包含的每个方法`Lifecycle.PER_METHOD`创建了一个新的测试类实例。`@Test`这会在一定程度上误导作者假设`@Before`每个测试只执行一次。

# java - 如何使用正则表达式抑制单行和多行注释？

> ID：10580614
> 
> 赞同：2
> 
> 时间：2012-05-14T09:26:42.133
> 
> 标签：java, regex, string

我需要在一个字符串中找到所有多行注释并将它们替换为空格（如果注释在一行中）或替换为`\n`（如果注释在多行中）。例如：

```
int/* one line comment */a; 
```

应改为：

```
int a; 
```

和这个：

```
int/* 
more
than one
line comment*/a; 
```

应改为：

```
int
a; 
```

我有一个包含所有文本的字符串，我使用了这个命令：

```
file = file.replaceAll("(/\\*([^*]|(\\*+[^*/]))*\\*+/)"," "); 
```

其中文件是字符串。

问题是它找到了所有多行注释，我想将它分成 2 种情况。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T09:32:20.597

这可以使用[`Matcher.appendReplacement`](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Matcher.html#appendReplacement%28java.lang.StringBuffer,%20java.lang.String%29)和来解决[`Matcher.appendTail`](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Matcher.html#appendTail%28java.lang.StringBuffer%29)。

```
String file = "hello /* line 1 \n line 2 \n line 3 */"
            + "there /* line 4 */ world";

StringBuffer sb = new StringBuffer();
Matcher m = Pattern.compile("(?m)/\\*([^*]|(\\*+[^*/]))*\\*+/").matcher(file);

while (m.find()) {

    // Find a comment
    String toReplace = m.group();

    // Figure out what to replace it with
    String replacement = toReplace.contains("\n") ? "\n" : "";

    // Perform the replacement.
    m.appendReplacement(sb, replacement);
}

m.appendTail(sb);

System.out.println(sb); 
```

**输出：**

```
hello 
there  world 
```

* * *

**注意：**如果您想为所有*不在*注释中的文本保留正确的行号/列（如果您想在错误消息等中参考源代码，那很好）我建议您这样做

```
String replacement = toReplace.replaceAll("\\S", " "); 
```

它将所有非空白替换为空白。这种方式`\n`被保留，并且

```
"/* abc */" 
```

被替换为

```
"         " 
```

# android - 包含 .jar 的 Android 库项目

> ID：10580615
> 
> 赞同：1
> 
> 时间：2012-05-14T09:26:50.257
> 
> 标签：android, jar

我有一个 Android 库项目，其中包含我的应用程序所需的所有类和资源。但是，当我尝试完全基于我的库项目创建一个新的 android 项目时，我遇到了麻烦。

库项目包含几个带有自己的 xml:schemes 的 .jar，导致以下错误：错误：在包“my.library”中找不到属性“hideMethod”的资源标识符。

我试图将 attrs.xml 复制到新的项目/值文件夹中，但我只是得到一个“属性已定义”-错误。

如果您有一些提示可以为我指明正确的方向，那就太好了。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T09:50:35.830

编译你的图书馆项目。这将在其 /bin 文件夹中生成 .jar。然后从您的主项目中，转到属性> 库并添加到库项目的 .jar 文件的路径。应用主项目的干净构建。它必须解决你的问题。我也面临同样的问题。

# javascript - 如何在导航中获取下一页的href？

> ID：10580616
> 
> 赞同：0
> 
> 时间：2012-05-14T09:26:55.503
> 
> 标签：javascript, html

**例子：**

```
<ul id="nav1">
    <li><a href="page1.html">Page 1</a></li>
    <li class="active"><a href="page2.html">Page 2</a></li>
    <li><a href="page3.html">Page 3</a></li>
    <li><a href="page4.html">Page 4</a></li>
</ul> 
```

在此示例中，我当前位于第 2 页，在第 2 页上，我想放置一个`Next Page`带有指向第 3 页的 url 的按钮。

如何获得`href`第 3 页（使用 JavaScript）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T09:28:09.340

如果你可以使用 jQuery

```
$('.active').next('li').find('a').attr('href');  // page3.html 
```

否则在普通的javascript中（例如小提琴：http: [//jsfiddle.net/gGRcX/2/](http://jsfiddle.net/gGRcX/2/)）

```
var ul   = document.getElementsById('nav1'),
    link = ul.querySelector('li.active + li a');

if (link) {   /* in case there's no "active" class 
               * (or if it's applied on last li element) 
               */
    console.log(link.href) // page3.html
} 
```

`querySelectorAll`适用于所有现代浏览器和 IE8+

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-14T09:35:33.143

```
$('#nav1 .active + li > a').attr('href'); 
```

CSS3 FTW :)

编辑：甚至可能是 CSS 2.x，懒得检查。

# c# - 缺少程序集参考？

> ID：10580618
> 
> 赞同：0
> 
> 时间：2012-05-14T09:27:01.190
> 
> 标签：c#, wpf

错误消息：找不到类型“GoogleMapProject_Behaviors:ZoomBehavior”。确认您没有丢失程序集引用并且所有引用程序集都已构建。

这是代码：

> ```
> <i:Interaction.Behaviors>
>     <GoogleMapProject_Behaviors:ZoomBehavior/>
>     <GoogleMapProject_Behaviors:PanBehavior 
>         RightHandPosition="{Binding RightHandPosition, Mode=TwoWay}" 
>         LeftHandPosition="{Binding LeftHandPosition, Mode=TwoWay}"
>         IsPanning="{Binding IsPanning, Mode=TwoWay}">
>         </GoogleMapProject_Behaviors:PanBehavior> 
> </i:Interaction.Behaviors> 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T09:39:21.630

这意味着在 XAML 中映射为的命名空间`GoogleMapProject_Behaviors`不包含 class `ZoomBehavior`。

*   检查命名空间映射（在 XAML 文件的顶部）：是否 `GoogleMapProject_Behaviors`引用了正确的命名空间？
*   接下来，检查你的类`ZoomBehavior`：命名空间是否对应定义，类是Public，是否有默认构造函数？

VS 抱怨该类的事实表明可以解析命名空间，因此应该这样做。

# graphviz - graphviz：子图的不同方向

> ID：10580623
> 
> 赞同：1
> 
> 时间：2012-05-14T09:27:19.433
> 
> 标签：graphviz

我想用 3 个子图创建图。他们中的两个是否可以像本例那样具有左右方向和第三个上下方向？

![图表示例](../Images/0b488582e3b494d76a4bc43ac3ac8316.png)

我还需要将几个节点从一个子图连接到另一个子图，但这应该很容易。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T10:10:36.100

这对于graphviz 是不可能的。[`rankdir`](http://www.graphviz.org/content/attrs)是一个图属性（不是子图或集群）。

# iphone - 如何找到未翻译的字符串。NSLocalizedString()

> ID：10580631
> 
> 赞同：14
> 
> 时间：2012-05-14T09:27:49.590
> 
> 标签：iphone, objective-c, ios, cocoa-touch, localization

我将**NSLocalizedString()**用于所有本地化内容。项目非常大。我们支持多种语言。有没有一种方法可以轻松提取不在 Localizable.strings 中但用 NSLocalizedString 包装的字符串。

**例子。** 假设我的代码中有某处：

```
NSString *message = NSLocalizedString(@"Sample message"); 
```

但是开发者忘记把这个字符串放在 Localizable.strings 文件中，所以它不会被翻译。有没有办法从源代码中提取未翻译的字符串？

另外，我不想使用**genstrings**工具。我已经有一个非常大的 NSLocalizable.strings 文件。genstrings 工具生成一个新的，所有字符串都用 NSLocalizedString 包裹，删除所有以前的翻译，这是我不想要的。我只想提取未翻译的字符串，而不是所有用 NSLocalizedString() 标记的字符串。

谢谢， 拉法尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T09:29:02.953

查看[genstrings](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/genstrings.1.html)工具，它正是这样做的。

编辑：尝试使用 XCode 中的 FileMerge 工具（XCode > Open Developer Tool）将 genstrings generatet strings 文件与现有文件合并。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-03-22T14:55:03.527

从 XCode 项目[http://xcode.fabriziobernasconi.it/生成 Localizable.strings](http://xcode.fabriziobernasconi.it/)

# sql-server - JPA 不写入表

> ID：10580644
> 
> 赞同：0
> 
> 时间：2012-05-14T09:28:27.157
> 
> 标签：sql-server, hibernate, jpa, transactions, jboss6.x

我有以下 JPA 代码，检查了所有值（`ticket`包含一个有效的 bean，它没有异常结束等）它被执行，它没有抛出任何异常，但最终没有数据写入表中。

我还尝试从表中检索一个 bean，它也“有效”（它是空的，所以没有返回数据）。

设置是

*   JBoss 6.1 最终版

*   SQLServer 2008 Express（来自 MS 的驱动程序 SQL JDBC 3）

持久化代码：

```
public String saveTicket() {
  System.out.println("Controller saveTicket() ");
  EntityManagerFactory factory = Persistence.createEntityManagerFactory("GesMan"); /* I know it would be better to share a single instance of factory, this is just for testing */
  EntityManager entityMan = factory.createEntityManager();
  entityMan.persist(this.ticket);
  entityMan.close();
} 
```

持久性单位是

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
  <persistence-unit name="GesMan" transaction-type="JTA">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <jta-data-source>java:/GesManDS</jta-data-source>
    <class>es.caib.gesma.gesman.Ticket</class>
    <properties>
      <property name="hibernate.dialect" value="org.hibernate.dialect.SQLServerDialect"/>
      <property name="hibernate.transaction.manager_lookup_class"
      value="org.hibernate.transaction.JBossTransactionManagerLookup"/>
      <property name="hibernate.show_sql" value="true"/>
    </properties>
  </persistence-unit>
</persistence> 
```

数据源

```
<datasources>
  <local-tx-datasource>
    <jndi-name>GesManDS</jndi-name>
    <connection-url>jdbc:sqlserver://spsigeswnt14.caib.es:1433;DatabaseName=TEST_GESMAN</connection-url>
    <driver-class>com.microsoft.sqlserver.jdbc.SQLServerDriver</driver-class>
    <user-name>thisis</user-name>
    <password>notthepassword</password>
    <check-valid-connection-sql>SELECT * FROM dbo.Ticket</check-valid-connection-sql>
    <metadata>
      <type-mapping>MS SQLSERVER</type-mapping>
    </metadata>
  </local-tx-datasource>
</datasources> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T12:28:57.583

调用`entityMan.flush()`或`transaction.commit()`关闭它之前，否则它将丢弃所有在关闭时排队的更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T13:51:53.943

最后，看起来我使用了错误的方法....在 JBoss 中，您不能（更好地说，我无法访问）直接访问 JPA（就像您在 JSE 中所做的那样）。

我结束了创建 EJB（带有事务）并在那里传递所有 JPA 逻辑。

PS：当然，如果我错了，请告诉我（现在这更像是一个学术问题，但我还是想知道）

# ruby-on-rails - 将变量放在字符串中，它不起作用？

> ID：10580645
> 
> 赞同：1
> 
> 时间：2012-05-14T09:28:27.103
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我有一个存储在其中的字符串`session[:login]`，我想在 SQL 查询中使用它，所以我写了这个。

```
@users = User.find(:all, :conditions => ['user = "#{session[:login]}"']) 
```

为什么这不起作用？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T09:34:53.660

您可以通过这种方式重建查询：

```
@users = User.find(:all, :conditions => ['user = ?', session[:login]]) 
```

但这个看起来更好：

```
@users = User.where(user: session[:login]) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-14T09:38:39.210

这只是一个没有任何变量插值的字符串：`'user = "#{session[:login]}"'`

带有变量插值的字符串如下所示：`"user = '#{session[:login]}'"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T09:48:50.763

你能试试这个

```
 @users = User.find(:all, :conditions => ["user = '#{session[:login]}' "]) 
```

外部使用双引号，内部使用单引号。

# java - 如何在说 1 秒后停止执行方法。时间？

> ID：10580646
> 
> 赞同：1
> 
> 时间：2012-05-14T09:28:30.743
> 
> 标签：java, multithreading

我在java中有一个调用webservice的方法。现在，如果网络服务花费超过 1 秒。的时间。我应该能够终止该方法并继续程序流程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T09:41:30.010

谷歌番石榴的[SimpleTimeLimiter](http://docs.guava-libraries.googlecode.com/git-history/v12.0/javadoc/com/google/common/util/concurrent/SimpleTimeLimiter.html)会做你需要的，特别是它的`callWithTimeout()`方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T10:15:58.903

我建议您使用 Executors 框架并调用[`Future.get(long, TimeUnit)`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Future.html#get%28long,%20java.util.concurrent.TimeUnit%29). 至于杀死那个电话，你可以打电话`Future.cancel(true)`。当然，您必须`submit`包含`Callable`调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T14:49:31.147

如果您不想添加新库，您可以通过将 Web 服务调用委托给另一个线程来轻松完成此操作，并使用 1 秒的超时时间[加入它。](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#join%28long%29)下面是一个完成这些任务的完整程序。有2个关键点：

1.  使用异步线程进行调用并使用 TimeOut 加入它。您还可以将其设置为守护程序。
2.  当操作中的值不需要被消耗时，传递给异步线程，这样它就不会进行不必要的分配。

代码：

```
public class Main {

String returnVar;
private static final long TIME_OUT=1000;//in mills
private void makeCall() {
    WebServiceStubDummy ws = new WebServiceStubDummy();
    Boolean timeElapsed = false;
    Thread t = new Thread(new AsyncWSCall(ws,timeElapsed));
    t.start();
    try {
        t.join(TIME_OUT);
    } catch (InterruptedException e) {}
    synchronized (ws) {
        timeElapsed=true;
    }
    System.out.println(returnVar);
}

private class AsyncWSCall implements Runnable{
    WebServiceStubDummy ws;
    Boolean timeElapsed;

    public AsyncWSCall(WebServiceStubDummy ws,  Boolean timeElapsed){
        this.ws=ws;
        this.timeElapsed=timeElapsed;
    }

    @Override
    public void run() {
        String myStr = ws.dummyMethod();
        //synchronize for shared variable timeElapsed
        synchronized (ws) {
            if(!timeElapsed){
                //if time elapsed don't assign
                returnVar=myStr;
            }
        }
    }       
}

class WebServiceStubDummy{
    public String dummyMethod(){
        try {
            //Dummy Call: if changed to 2000 value will not be consumed
            Thread.sleep(100);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        return "From Dummy Metho";
    }
}

/**
 * @param args
 */
public static void main(String[] args) {
    Main m=new Main();
    m.makeCall();
}} 
```

您还可以根据您希望如何传递 WebService 对象以及您希望如何分配 WS 操作的结果来微调您的代码

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T09:38:24.103

SO-thread“[在java中的某个指定时间限制后杀死线程](https://stackoverflow.com/questions/2733356/killing-thread-after-some-specified-time-limit-in-java)”可能会有所帮助。它利用[ExecutorService](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html)

也可以使用[Java 中方法执行的时间限制。](http://westergaard.eu/2010/11/time-limitation-on-method-execution-in-java/)请记住，虽然 Thread.stop 已被弃用：

> > 为什么不推荐使用 Thread.stop？
> 
> 因为它本质上是不安全的。停止线程会导致它解锁所有已锁定的监视器。（当 ThreadDeath 异常向上传播堆栈时，监视器被解锁。）如果以前受这些监视器保护的任何对象处于不一致状态，则其他线程现在可能会查看这些处于不一致状态的对象。据说这些物体已损坏。当线程对损坏的对象进行操作时，可能会导致任意行为。这种行为可能很微妙且难以检测，也可能很明显。与其他未经检查的异常不同，ThreadDeath 以静默方式杀死线程；因此，用户没有警告他的程序可能已损坏。损坏可以在实际损坏发生后的任何时间出现，甚至在未来几小时或几天内。

来源：[Java Thread Primitive Deprecation](http://docs.oracle.com/javase/1.4.2/docs/guide/misc/threadPrimitiveDeprecation.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-14T09:30:08.867

使用 1 秒的超时。根据您的网络服务请求。

# jquery - Jquery - 在 li 中选择 img

> ID：10580648
> 
> 赞同：4
> 
> 时间：2012-05-14T09:28:34.177
> 
> 标签：jquery

```
 <div class="banner">
        <div class="banner_wrapper">
            <div class="banner_image">
                <img class="banner_img" src="banner-pic1.png" />                        
            </div>
            <div class="banner_bottom_wrapper">
                <div class="banner_phrase">
                    <img src="banner-text.png"/>
                </div><!-- banner_phrase ENDS -->
                <div class="banner_btns">
                   <ul class="btn_list">
                       <li><img class="banner_btn" src="banner-btn-not-selected.png" /></li>
                       <li><img class="banner_btn" src="banner-btn-not-selected.png" /></li>
                       <li><img class="banner_btn" src="banner-btn-not-selected.png" /></li>
                       <li><img class="banner_btn" src="banner-btn-not-selected.png" /></li>
                   </ul>
                </div><!-- banner_btns ENDS -->
            </div><!-- banner_bottom_wrapper ENDS -->
        </div><!-- banner_btns ENDS -->
    </div><!-- banner ENDS --> 
```

这是我目前正在处理的源代码。如果鼠标光标位于 4 个按钮之一上，则其图片将变为彩色图标图像，顶部的横幅图像必须更改为不同的东西。是的，这是一个典型的图像滑块。

问题是我一直在使用 Javascript 来处理它，人们告诉我 Jquery 更好......但对我来说，经过一堆教程后 Jquery 的工作方式仍然非常混乱：S

```
 $('.banner_btn').mouseover(
                function btn_on() {
                    //Set all the btn imgs to 'off'
                    $(".btn_list li").each(function() {$('.btn_list li img').attr('src','banner-btn-not-selected.png');
                    //And set the selected button img to 'on'
                    $(this).attr('src','banner-btn-selected.png');
                    //Now......  How to know #th btn is clicked? D:  Accroding to the btn selected, I should change the banner image.

                });                     
            }); 
```

我需要你的帮助，大师:'(

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T09:30:34.130

```
$(".btn_list li").each(function() {
   $('img', this).attr('src', 'banner-btn-selected.png');
}); 
```

总计的，

```
$('.banner_btn').on('mouseover', function() {
    $(".btn_list li").each(function() {
       $('img', this).attr('src', 'banner-btn-not-selected.png'); // changes all images src to default
    });
    this.src = 'banner-btn-selected.png'; // change the hovered image src
}); 
```

实现目标的另一种方式

```
 $('.banner_btn').on(
   'hover', 
   function() {
      this.src = 'banner-btn-selected.png';
   }, 
   function(){
      this.src = 'banner-btn-not-selected.png';
   }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T09:37:59.490

```
$(".btn_list li").on("click", handleClick);
function handleClick(e)
{
    var ind = $.inArray(this, $(".btn_list li"));
    //ind is the zero based number of the clicked button
    //so you can change the main banner accordingly 
} 
```

# android - Android：如何在 Android 2.2 中获得搜索键盘？

> ID：10580654
> 
> 赞同：0
> 
> 时间：2012-05-14T09:28:51.080
> 
> 标签：android, android-edittext

我有一个应用程序，我可以在其中编辑文本。我想用它作为搜索栏。所以当我点击它时，我想得到一个我应该有一个搜索按钮的键盘。

我尝试使用： android:imeOptions="actionSearch", android:imeActionLabel="Search" 但我没有得到它。在 android 2.1 我们得到它，但在 android 2.2 我们没有得到它。您可以为此提出一个好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T09:33:31.333

它已经在 SO 回答了。[在这里](https://stackoverflow.com/a/5579944/786337)查看答案

您的 edittext 应设置为 singleLine。

# maven - 想要构建多模块 pom，它在 maven 中从同一个项目构建 2 个耳朵

> ID：10580661
> 
> 赞同：0
> 
> 时间：2012-05-14T09:29:07.990
> 
> 标签：maven, maven-ear-plugin

我有一个主要的 PTC 项目，其中有不同的模块（子项目）

```
PTC
|
+-- pom.xml
|    
+-- PrismaTestClientConfig
|    
+-- PrismaTestEarM
|  |  
|  \-- pom.xml
|  
+-- PrismaTestClientHTMLGeneration
|  |  
|  \-- pom.xml
|  
+-- PrismaTestClientWeb
|  |  
|  \-- pom.xml
|  
+-- PrismaTestCommon
\ 
```

```
<modules>  
    <module>PrismaTestCommon</module>  
    <module>PrismaTestClientHTMLGeneration</module>  
    <module>PrismaTestClientWeb</module>  
    <module>PrismaTestClientEarM</module>  
</modules> 
```

所以我有一个常见的 PTC pom.xml，其中包含模块的上述依赖项：

上面的东西构建了 ptc.ear

现在我想在 BTCEarM 上添加 2 个模块 BTCHTMLGeneration 并使用 PTC 的 PTCCommon 和 PTCWeb 并构建 btc.ear。此外，当我想构建 ptc.ear 时，它需要 4 个以上的模块，而当我想构建 btc.ear 时，它应该从 PTC 获取常见的 2 个模块，从 BTC 获取 2 个新模块

我怎样才能做到这一点...请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T10:23:49.937

只需创建两个单独的模块 btc.ear（最好将它们命名为 btc-ear 或 ptc-ear）并将适当的依赖项添加到 ear 模块。深入了解[maven-ear-plugin 文档](http://maven.apache.org/plugins/maven-ear-plugin/)。

# jquery - CSS 定位：相对构建独立的“堆栈”；或者：为什么蓝色害怕红色和黄色？

> ID：10580671
> 
> 赞同：1
> 
> 时间：2012-05-14T09:29:48.543
> 
> 标签：jquery, css, jquery-ui, jquery-ui-draggable, jquery-ui-slider

**我需要做的：**我需要并排创建两个 div。在每个 div 中，我需要有绝对定位的图像。我还需要将这些图像从一个 div 拖到另一个。

**我的问题**是拖动的图像消失在另一个 div 后面。这是一个[jsFiddle](http://jsfiddle.net/Ivoo/9abbA/)显示问题，因为黄色 div 消失在蓝色容器后面。

**我的问题**：*有没有办法让蓝色容器识别黄色 div 的 z-index （绝对位置），而黄色 div 将红色容器作为其锚点？*

**一些背景**：我需要实现这一点，因为我想从一个列表中拖动图像，然后将它们放入另一个可排序的列表中。我想通过 jQuery UI 的可拖动、可放置和可排序方法来实现这一点。到目前为止，一切都很简单和标准。

但是，两个图像列表都必须是可滑动的。就其本身而言，这可以通过 jQuery UI 的滑块方法相对轻松地实现。但是，为了使图像滑动，我需要使用绝对定位（图像列表的实际滑动是通过改变绝对位置来实现的）。因此，我无法绕过[jsFiddle](http://jsfiddle.net/Ivoo/9abbA/)中所示的相对和绝对定位。

一如既往，非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T10:07:55.897

您可以：

1.  *仅*将 z-index 应用于容器内的元素。（并且确保*不要*将 z-index 应用于容器，否则它们将设置自己的堆叠上下文，并且应用于其中任何内容的 z-index 仅与新上下文相关。）

2.  从 2 个容器中删除 position:relative 声明。如果没有任何 z-index 声明，定位元素将出现在非定位元素的前面。

可以在这里找到关于堆叠上下文的一个很好的解释：http: [//timkadlec.com/2008/01/detailed-look-at-stacking-in-css/](http://timkadlec.com/2008/01/detailed-look-at-stacking-in-css/)

**更新**
您可以尝试 jQuery/UI 可拖动的 helper:clone 选项。

由于它“克隆”了您要拖动的项目（“用于拖动显示”），因此它不受与原始容器相同的容器的约束。但是您需要处理这样一个事实，即在拖动“克隆”项目时该项目仍出现在其原始位置。

你可以使用 draggable 的 start 和 stop 事件让原来的不可见和可见：

```
$('.myDiv')
    .draggable({
        helper: 'clone',
        start: function () {
            $(this).css('visibility', 'hidden');
        },
        stop: function () {
            $(this).css('visibility', 'visible');
        }
    }) 
```

...但是，正如 Andrius 建议的那样，您需要处理物品掉落时会发生的情况。为此，我建议您查看这篇文章：[克隆节点拖动](https://stackoverflow.com/questions/623703/clone-node-on-drag)

祝你好运。

# java - 如何运行 Hadoop 0.23.0 源示例中给出的分布式 shell 应用程序

> ID：10580673
> 
> 赞同：4
> 
> 时间：2012-05-14T09:30:08.147
> 
> 标签：java, hadoop

我在 hadoop 0.23.0 源代码中找到了一个分布式 shell 应用程序，任何人都可以帮我运行它。如何通过编译包含所需 jar 文件的 Client.java 和 applicationmaster.java 将应用程序转换为 jar 文件。如果有人在这个问题上帮助我或我可以学习它的一些资源，那将是一个很大的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T06:32:34.317

hadoop jar /usr/lib/hadoop-yarn/hadoop-yarn-applications-distributedshell.jar org.apache.hadoop.yarn.applications.distributedshell.Client --jar /usr/lib/hadoop-yarn/hadoop-yarn-applications -distributedshell.jar --shell_command 日期 --num_containers 1

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T09:49:27.147

为此使用 maven 构建整个 Hadoop 0.23.x 源，您可以在项目目录中获取 jar。

您可以在此处找到有关构建和内容的更多信息： [https ://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-common/SingleCluster.html](https://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-common/SingleCluster.html)

# python - 按元素比较两个 NumPy 数组的相等性

> ID：10580676
> 
> 赞同：375
> 
> 时间：2012-05-14T09:30:18.343
> 
> 标签：python, arrays, numpy, elementwise-operations

比较两个 NumPy 数组是否相等的最简单方法是什么（其中相等定义为：A = B iff 对于所有索引 i: `A[i] == B[i]`）？

简单地使用`==`给我一个布尔数组：

```
 >>> numpy.array([1,1,1]) == numpy.array([1,1,1])

array([ True,  True,  True], dtype=bool) 
```

我是否必须使用`and`该数组的元素来确定数组是否相等，或者是否有更简单的比较方法？

* * *

## 回答 #1

> 赞同：545
> 
> 时间：2012-05-14T09:37:13.133

```
(A==B).all() 
```

测试数组 (A==B) 的所有值是否为真。

注意：也许您还想测试 A 和 B 形状，例如`A.shape == B.shape`

**特殊情况和替代方案**（来自 dbaupp 的回答和 yoavram 的评论）

应当指出的是：

*   此解决方案在特定情况下可能会出现奇怪的行为：如果`A`或`B`为空而另一个包含单个元素，则返回`True`。出于某种原因，比较`A==B`返回一个空数组，`all`运算符为此返回`True`.
*   另一个风险是如果`A`和`B`不具有相同的形状并且不可广播，那么这种方法将引发错误。

总之，如果您对形状有疑问`A`或`B`只是想保证安全：请使用以下专用功能之一：

```
np.array_equal(A,B)  # test if same shape, same elements values
np.array_equiv(A,B)  # test if broadcastable shape, same elements values
np.allclose(A,B,...) # test if same shape, elements have close enough values 
```

* * *

## 回答 #2

> 赞同：118
> 
> 时间：2012-05-14T11:00:58.877

`(A==B).all()`解决方案非常简洁，但是有一些内置函数可以完成这项任务。即和。[`array_equal`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.array_equal.html)_[`allclose`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.allclose.html#numpy.allclose)[`array_equiv`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.array_equiv.html#numpy.array_equiv)

（虽然，一些快速测试`timeit`似乎表明该`(A==B).all()`方法是最快的，这有点奇怪，因为它必须分配一个全新的数组。）

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2018-01-11T22:35:53.727

如果你想检查两个数组是否相同`shape`，`elements`你应该使用`np.array_equal`文档中推荐的方法。

> 性能方面不要指望任何相等性检查会击败另一个，因为没有太多优化空间`comparing two elements`。只是为了着想，我还是做了一些测试。

```
import numpy as np
import timeit

A = np.zeros((300, 300, 3))
B = np.zeros((300, 300, 3))
C = np.ones((300, 300, 3))

timeit.timeit(stmt='(A==B).all()', setup='from __main__ import A, B', number=10**5)
timeit.timeit(stmt='np.array_equal(A, B)', setup='from __main__ import A, B, np', number=10**5)
timeit.timeit(stmt='np.array_equiv(A, B)', setup='from __main__ import A, B, np', number=10**5)
> 51.5094
> 52.555
> 52.761 
```

所以几乎相等，无需谈论速度。

其`(A==B).all()`行为与以下代码片段非常相似：

```
x = [1,2,3]
y = [1,2,3]
print all([x[i]==y[i] for i in range(len(x))])
> True 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2016-02-23T13:42:04.133

让我们使用以下代码来衡量性能。

```
import numpy as np
import time

exec_time0 = []
exec_time1 = []
exec_time2 = []

sizeOfArray = 5000
numOfIterations = 200

for i in xrange(numOfIterations):

    A = np.random.randint(0,255,(sizeOfArray,sizeOfArray))
    B = np.random.randint(0,255,(sizeOfArray,sizeOfArray))

    a = time.clock() 
    res = (A==B).all()
    b = time.clock()
    exec_time0.append( b - a )

    a = time.clock() 
    res = np.array_equal(A,B)
    b = time.clock()
    exec_time1.append( b - a )

    a = time.clock() 
    res = np.array_equiv(A,B)
    b = time.clock()
    exec_time2.append( b - a )

print 'Method: (A==B).all(),       ', np.mean(exec_time0)
print 'Method: np.array_equal(A,B),', np.mean(exec_time1)
print 'Method: np.array_equiv(A,B),', np.mean(exec_time2) 
```

**输出**

```
Method: (A==B).all(),        0.03031857
Method: np.array_equal(A,B), 0.030025185
Method: np.array_equiv(A,B), 0.030141515 
```

根据上面的结果，numpy 方法似乎比**==**运算符和**all()**方法的组合更快，并且通过比较 numpy 方法**，最快**的方法似乎是**numpy.array_equal**方法。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2019-10-06T22:46:01.443

通常两个数组会有一些小的数值错误，

您可以使用`numpy.allclose(A,B)`, 而不是`(A==B).all()`. 这将返回一个布尔 True/False

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-05-25T17:00:03.527

现在使用`np.array_equal`. 从文档：

```
np.array_equal([1, 2], [1, 2])
True
np.array_equal(np.array([1, 2]), np.array([1, 2]))
True
np.array_equal([1, 2], [1, 2, 3])
False
np.array_equal([1, 2], [1, 4])
False 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-04-19T12:46:19.120

在其他答案之上，您现在可以使用断言：

```
numpy.testing.assert_array_equal(x, y) 
```

您也有类似的功能，例如`numpy.testing.assert_almost_equal()`

[https://numpy.org/doc/stable/reference/generated/numpy.testing.assert_array_equal.html](https://numpy.org/doc/stable/reference/generated/numpy.testing.assert_array_equal.html)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-03-04T23:41:10.197

只是为了完整性。我将添加 pandas 方法来比较两个数组：

```
import numpy as np
a = np.arange(0.0, 10.2, 0.12)
b = np.arange(0.0, 10.2, 0.12)
ap = pd.DataFrame(a)
bp = pd.DataFrame(b)

ap.equals(bp)
True 
```

仅供参考：如果您正在寻找如何在 R 中比较向量、数组或数据帧。您可以使用：

```
identical(iris1, iris2)
#[1] TRUE
all.equal(array1, array2)
#> [1] TRUE 
```

# objective-c - 使用 AVFoundation 在 iOS 上录制音频样本

> ID：10580680
> 
> 赞同：0
> 
> 时间：2012-05-14T09:30:32.360
> 
> 标签：objective-c, ios, audio, avfoundation, recording

选择捕获 AVFoundation 音频样本的音频格式。

我熟悉处理来自 iPhone 摄像头的视频帧。在那里，`AVCaptureVideoDataOutput`'[`videoSettings`](https://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVCaptureVideoDataOutput_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40009544)属性可用于指定应接收视频帧的格式。

对于音频，类似的类[AVCaptureAudioDataOutput](https://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVCaptureAudioDataOutput_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40009547)没有这样的属性。

但是，该`AVAudioSettings.h`文件清楚地表明存在多种音频格式。

*   如何选择音频数据的格式？我基本上对具有特定比特率的原始 PCM 样本感兴趣。

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-05-14T09:49:19.330

你可以试试[OpenAL](https://github.com/kstenerud/ObjectAL-for-iPhone)。这是[文档](http://kstenerud.github.com/ObjectAL-for-iPhone/documentation/)。此致 ;）

# ruby - 乘客不会通过 rvm 安装 apache 模块

> ID：10580684
> 
> 赞同：0
> 
> 时间：2012-05-14T09:30:41.930
> 
> 标签：ruby, apache, passenger

我有一个服务器，它有乘客使用 apache2 和 ruby​​ 1.8.7 作为系统默认值。

现在我必须将 rails 2 应用程序升级到 rails 3。

所以我安装了 rvm 并将其安装在 /usr/local/rvm/bin/rvm 中。

然后我使用 rvm 使用 1.9.2@global。

接下来，我使用 rvmsudo gem install Passenger 安装了乘客。它安装好了。

每当我运行 rvmsudopassenger-install-apache2-module 时，它​​都会给我这个消息。

正在检查所需的软件...

*   GNU C++ 编译器...位于 /usr/bin/g++
*   具有 SSL 支持的 Curl 开发标头...找到
*   OpenSSL 开发头文件...找到
*   Zlib 开发头文件...找到
*   Ruby 开发头文件...找到
*   OpenSSL 对 Ruby 的支持...找到
*   RubyGems... 找到
*   耙子...位于 /usr/local/rvm/wrappers/ruby-1.9.2-p320/rake
*   机架...找到
*   Apache 2... 位于 /usr/sbin/httpd
*   Apache 2 开发头文件...位于 /usr/sbin/apxs
*   Apache Portable Runtime (APR) 开发头文件...位于 /usr/bin/apr-1-config
*   Apache Portable Runtime Utility (APU) 开发头文件...位于 /usr/bin/apu-1-config

* * *

编译和安装 Apache 2 模块... cd /usr/local/rvm/gems/ruby-1.9.2-p320/gems/passenger-3.0.12 /usr/local/rvm/wrappers/ruby-1.9.2-p320 /rake apache2:clean apache2 RELEASE=yes

# /usr/local/rvm/wrappers/ruby-1.9.2-p320/rake apache2:clean apache2 RELEASE=yes

/usr/local/rvm/wrappers/ruby-1.9.2-p320/rake：第 6 行：/usr/local/rvm/gems/ruby-1.9.2-p320@global/bin/rake：成功

* * *

好像出了点问题

请阅读我们的用户指南以获取故障排除提示：

/usr/local/rvm/gems/ruby-1.9.2-p320/gems/passenger-3.0.12/doc/用户指南 Apache.html

如果这没有帮助，请使用我们的支持设施：

[http://www.modrails.com/](http://www.modrails.com/)

我们会尽力帮助您。

我不知道出了什么问题。帮助！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T10:27:19.910

没关系。我更新了 yum，现在一切都像黄油一样。

# c# - 从下拉列表中获取 SelectedValue

> ID：10580687
> 
> 赞同：1
> 
> 时间：2012-05-14T09:30:51.960
> 
> 标签：c#, .net, umbraco, ascx

我正在尝试创建一个基本的宏来封装表单以及通过电子邮件发送输入其中的详细信息的能力。它适用于文本框，但出于某种原因，DropDownLists 采用选项列表中的第一个值。我已经为此工作了几个小时，似乎已经尝试了一切，所以希望有人可以提出解决方案。我正在使用 Umbraco 4.0.3，不幸的是升级不是一个选项。我的简化代码如下：

CorpRefundForm.ascx:

```
<%@ Control Language="C#" AutoEventWireup="true" CodeFile="CorpRefundForm.ascx.cs" Inherits="umbracowebsitewizard_site.Usercontrols.CorpRefundForm" %>

<asp:DropDownList ID="frm_dropdown" runat="server" CssClass="linkselect" />

<br />

<button id="submitButton" runat="server" onserverclick="submitButton_Click">Submit</button> 
```

CorpRefundForm.ascx.cs

```
using System;
using System.Net.Mail;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace umbracowebsitewizard_site.Usercontrols
{
    public partial class CorpRefundForm : UserControl
    {
        protected void Page_Init(object sender, EventArgs e)
        {
            if (!Page.IsPostBack)
            {
                frm_dropdown.Items.Add(new ListItem("Select one", ""));
                frm_dropdown.Items.Add(new ListItem("One", "One"));
                frm_dropdown.Items.Add(new ListItem("Two", "Two"));
                frm_dropdown.Items.Add(new ListItem("Three", "Three"));
                frm_dropdown.Items.Add(new ListItem("Four", "Four"));
            }
        }

        public void submitButton_Click(object sender, EventArgs e)
        {
            SmtpClient mySMTPClient = new SmtpClient();

            mySMTPClient.Send("[email removed]", "[email removed]", "Test", frm_dropdown.SelectedValue + frm_dropdown.Text + frm_dropdown.SelectedItem.Value + frm_dropdown.SelectedItem.Text);
        }
    }
} 
```

CorpRefundForm.ascx.designer.cs：

```
using System.Web.UI.WebControls;

namespace umbracowebsitewizard_site.Usercontrols
{
    public partial class CorpRefundForm
    {
        protected DropDownList frm_dropdown;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T09:35:20.733

这可能会发生，因为您的第一个`ListItem`没有`Value`分配。尝试分配一个值，看看它是否有效。

```
 frm_dropdown.Items.Add(new ListItem("Select one", "-1")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T10:27:21.950

解决了！原来 jquery.linkselect-1.2.07.min.js 库正在使用破坏它的 DropDownList 做一些事情。把它拿出来，它奏效了。

# mpmovieplayercontroller - MPMoviePlayerController 隐藏 AirPlay 按钮

> ID：10580691
> 
> 赞同：1
> 
> 时间：2012-05-14T09:31:13.920
> 
> 标签：mpmovieplayercontroller, airplay

`MPMoviePlayerController`即使打开了完全镜像，我也需要隐藏 AirPlay 按钮。有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-15T09:41:19.973

`MPMoviePlayerController`将设置`allowsAirPlay`属性的 AirPlay 按钮隐藏为`NO`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T18:51:30.233

如果要隐藏 AirPlay 图标，则需要将控件设置为`MPMovieControlStyleNone`或编写自己的播放器。（另请参阅：[使用 MPMoviePlayerController 禁用 AirPlay](https://stackoverflow.com/questions/7749770/disable-airplay-with-mpmovieplayercontroller)）

# ruby-on-rails - Ubuntu 12.04 - RubyOnRails - gem install mysql2 似乎安装但我安装时失败： gem mysql2 - Unknown command mysql2

> ID：10580693
> 
> 赞同：2
> 
> 时间：2012-05-14T09:31:33.357
> 
> 标签：ruby-on-rails, ubuntu, gem, mysql2

我是 Ror 新手，我正在尝试使用 rails 创建我的第一个 web 应用程序。我在安装 gem mysql2 时遇到了一个问题：这是我的实际配置：

**ruby -v：ruby 1.9.3p194（2012-04-20 修订版 35410）[x86_64-linux]**

**导轨 -v：导轨 3.2.3**

**宝石-v：1.8.24**

```
michele@michele:~/rails/my_app$ gem install mysql2
Building native extensions.  This could take a while...
Successfully installed mysql2-0.3.11
1 gem installed
Installing ri documentation for mysql2-0.3.11...
Installing RDoc documentation for mysql2-0.3.11... 
```

在此之后，我编辑了 database.yml 并运行：

**耙分贝：创建**

它返回：

```
rake aborted!
Please install the mysql2 adapter: `gem install activerecord-mysql2-adapter` (mysql2 is not part of the bundle. Add it to Gemfile.) 
```

所以，当我最终尝试安装它时，我得到了错误：

```
michele@michele:~/rails/my_app$ gem install activerecord-mysql2-adapter
ERROR:  Could not find a valid gem 'activerecord-mysql2-adapter' (>= 0) in any repository
ERROR:  Possible alternatives: activerecord-jdbch2-adapter, activerecord-jdbcmysql-adapter, activerecord-postgis-adapter, activerecord-jdbc-adapter, activerecord-odbc-adapter 
```

显然我正确安装了其他适配器，但它们不适合我对 mysql2 的需要。

没有别的，我只是堆在这里。:)

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-30T14:56:59.463

迟到总比不到好：

1) 为 RoR 安装 mysql 支持

在 ubuntu 上`sudo apt-get install libmysql-ruby libmysqlclient-dev`

2）创建轨道应用程序

`rails new mysql_app -d mysql`

3) 编辑`config/database.yml`

设置您的用户名和密码和其他详细信息。主要是我写这篇文章是为了不要忘记自己......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T10:21:47.630

尝试像这样创建一个全新的项目

```
rails new -d=mysql 
```

这应该用正确的值初始化`Gemfile`和`config/database.yml`你可以在你的问题中超过你的 Gemfile 吗？

**编辑**

替换`gem 'sqlite3'`为`gem 'mysql2'`和`bundle install`。那么你需要更新`config/database.yml`，看看我在第一行建议的新项目中生成了什么

**编辑**

删除套接字线，您应该可以使用以下内容：

```
development:
  adapter: mysql
  database:  whatever_is_there
  username: your_username
  password: your_pwd
  host: localhost
  encoding: utf8 
```

# jquery - 如何使用jQuery以增量方式从数组中索引

> ID：10580702
> 
> 赞同：1
> 
> 时间：2012-05-14T09:32:12.053
> 
> 标签：jquery

我有一个包含多个数据的数组，我想用增量值索引一个 div。

```
var fancyboxInfo = [
'Title1', 'Details1', 'Location1', 
'Title2', 'Details2', 'Location2',
'Title3', 'Details3', 'Location3',
]

$(".fancybox").each(function(index) {
   $(this).attr("title", fancyboxInfo[index]);
}); 
```

使用“每个”，以下结果是：

```
<div class="fancybox" title="Title1"></div>
<div class="fancybox" title="Details1"></div>
<div class="fancybox" title="Location1"></div> 
```

我想让它成为索引 [0]、[3]、[6] 等。这可以使用 jQuery 索引来完成吗？

jsFiddle：http: [//jsfiddle.net/fNNkx/](http://jsfiddle.net/fNNkx/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T09:35:03.363

```
x = 0;
$(".fancybox").each(function() {
   if (x < $(".fancybox").length) {
      $(this).attr("title", fancyboxInfo[x]);
      x += 3;
   }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T09:37:42.940

```
$(".fancybox").each(function(index) {
   if(index % 3 == 0) {
      $(this).attr("title", fancyboxInfo[index]);
   }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T09:40:13.650

你也可以做

```
$(".fancybox").each(function(index) {
   $(this).attr("title", fancyboxInfo[(index*3)]);
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-14T09:55:30.310

你可以做

```
var fancyboxInfo = [
    'Title1', 'Details1', 'Location1',
    'Title2', 'Details2', 'Location2',
    'Title3', 'Details3', 'Location3',
    'Title4', 'Details3', 'Location3',        
  ]
i=0;
$(".fancybox").each(function(index) {

      $(this).attr("title", fancyboxInfo[i]);
  i = i+3;
}); 
```

# android - JW 播放器通过网络在 android 上工作，但 apk 不工作

> ID：10580704
> 
> 赞同：0
> 
> 时间：2012-05-14T09:32:20.927
> 
> 标签：android, jquery-mobile, jwplayer

我正在使用 JW-Player 播放嵌入的 YouTube 视频。我在播放视频时遇到了一些问题。我已经将我的文件上传到我的网络空间并且点击视频时可以正常工作，但是当我编译一个 apk（使用 phonegap build）并将 apk 安装在我的手机上（三星 Galaxy 2 和 htc 的愿望）时，我点击了视频并它显示黑屏。

这是我播放视频的代码：

```
<div id='mediaspace2'><b>Player is Loading...</b></div>
<script type="text/javascript">
jwplayer("mediaspace2").setup({
    file: "http://www.youtube.com/watch?v=VFrnWAK-DLk",
    height: 300,
    width: 270,
    modes: [
        { type: "html5" },
        { type: "flash", src: "/jwplayer/player.swf" },
        { type: "download" }
    ]

}); 
```

我不明白如何通过 android 手机访问我的网站并播放视频，但是当我创建 APK 时，视频将无法通过程序播放。任何帮助将不胜感激。

*忘记使用 JW 播放器 5.9 版和最新的 Flash 播放器添加即时消息。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T11:08:11.667

问题可能`{ type: "flash", src: "/jwplayer/player.swf" }` 在于确保在使用 PhoneGap 时正确链接您的 swf、js 和其他内容，因为这些项目的链接肯定与 Web 上的链接不同。

# javascript - JavaScript：如何检测节点是否已被删除？

> ID：10580707
> 
> 赞同：2
> 
> 时间：2012-05-14T09:32:25.450
> 
> 标签：javascript, jquery, memory

我认为描述我的问题的最佳方式是在这种情况下创建一些图像对象：

```
<div id="image_collection">
    <div class="image" data-src="http://image1.jpg"></div>
    <div class="image" data-src="http://image2.jpg"></div>
</div> 
```

在我的 JavaScript 中，我可以有以下内容：

```
$('.image').each(function( index, element ){
    var image = new Image(); //NEW INSTANCE(S) CREATED (IN MEMORY)
    image.src = $(this).attr('data-src');
    $(this).parent().append(image);
}); 
```

请记住，这是我真实脚本中的一个示例，`new Image()`它是一个自定义对象。

这个脚本是自动完成的，所以无论我放在哪里`<div class="image" data-src="http://image1.jpg"></div>`都会创建一个图像。现在一些程序员使用这个脚本并将其导入并使用以下代码创建自己的脚本：

```
$('#image_collection').remove(); //OR 
$('#image_collection').html('Some new content'); 
```

现在我的脚本首先触发，它将转换所有图像，创建新实例，但是当程序员删除 image_collection 中的节点时，我相信这些图像实例仍将保留在内存中。一旦不再在 DOM 中使用这些图像实例，我该如何删除它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T09:43:41.113

该`.remove()`函数从 DOM 中删除节点并返回它们。如果你没有对返回值做任何事情，它们最终会被清理掉。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T09:52:38.267

如果您真的担心内存问题，您可以将这些图像放在全局图像（或您的自定义对象）数组中，而不是将其放在局部变量中。取一个全局变量

`var image_cleaned=false;`

使用计时器（即 setTimeOut ）检查 din 是否包含带有 class 的 img 标签`image`。如果它没有找到任何匹配的元素（并且 image_cleaned 为 false ），则删除该数组。然后设置`image_cleaned=true;`。然后删除计时器（可选但更好）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T09:59:23.540

Image() 对象在 $(.image).each() 的范围结束时被销毁：实际上，“image” var 是在该范围内创建的，并且在 .each() 结束后无法生存。

到目前为止，您只有 DOM 节点，但它已被 .remove() 删除。

你会感觉很舒服：P

# java - jar创建后的jdbc异常

> ID：10580708
> 
> 赞同：0
> 
> 时间：2012-05-14T09:32:31.600
> 
> 标签：java, jdbc, jar, manifest

我有一个应用程序，我在其中使用 JDBC 连接。当我从 Eclipse 环境中运行它时，没有问题。但是，当我把它装进罐子里时，这条线

```
Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver"); 
```

导致异常：

```
java.lang.ClassNotFoundException: com.microsoft.sqlserver.jdbc.SQLServerDriver
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Unknown Source) 
```

我在清单文件中放了一行，但没有帮助：

```
Class-Path: sqljdbc4.jar 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T13:41:15.783

我终于解决了这个问题。我还在远程服务器上安装了 jdbc 驱动程序，并将文件打包到一个可执行 jar 中（不仅仅是像以前那样的 jar）。

# php - Magento 1.6 - 为注册页面添加自定义字段

> ID：10580712
> 
> 赞同：1
> 
> 时间：2012-05-14T09:32:44.643
> 
> 标签：php, magento

我想修改注册页面以添加可能包括的自定义字段

*   详细地址

    *   地址第一行
    *   地址行 2
    *   市郊
    *   邮政编码
    *   国家
    *   状态
*   公司详情

    *   名称，交易名称
    *   ABN，联系方式

我一直在阅读有关如何添加自定义字段的信息，但是我一直没有成功，我只是对整个事情感到困惑。我只是想学习系统

任何帮助将不胜感激

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T18:12:51.677

有很多扩展可以让这种情况发生。我的理念是在尝试用 magento 编写任何东西之前开始研究扩展。当升级破坏某些东西时特别有用；他们通常会免费修复明显影响他们自己的扩展的升级问题。

为了详细说明，我在联系表格中手动滚动了一些代码以添加谷歌重新验证码以及让客户从现有产品属性（车辆年份、品牌、型号）中进行选择。我最终能够弄清楚如何让这些反映在我们从联系表单获得的电子邮件中，但是，没有数据库持久性，这是正确的解决方案。此外，在代码中快速轻松地以意想不到和令人惊讶的方式破坏 Magento，因此我在这里的正常 Magento 回复是强烈敦促人们购买扩展。如果你问我会问的那种问题，你知道的不够多，无法进行专业扩展……购买一些合适的扩展，分析它们，花大量时间试图弄清楚。

Any more there are plenty of extensions competing to do the same tasks, so there should be something already working to do what you want.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T01:02:01.460

查看 customer_setup 脚本以供参考。例如：

```
Mage/Customer/sql/customer_setup/mysql4-upgrade-1.4.0.0.0-1.4.0.0.1.php 
```

此文件有一个示例，说明如何将属性分配给客户地址表单（文件底部）：

```
Mage/Customer/sql/customer_setup/mysql4-data-upgrade-1.4.0.0.13-1.4.0.0.14.php 
```

最佳实践是使用安装脚本创建一个新模块，并将您的代码放在那里以添加自定义属性。

客户模型是 EAV 模型。EAV 在 Magento 中是一个复杂的主题。一个很好的练习是阅读有关创建 EAV 模块的内容——了解基础知识——然后返回添加自定义属性。

Enterprise 允许您通过管理面板添加客户属性，但不幸的是，这对 CE 来说更痛苦。

那应该让你开始。希望这可以帮助。

# python - 使用python删除文件夹中的文件

> ID：10580715
> 
> 赞同：2
> 
> 时间：2012-05-14T09:33:07.747
> 
> 标签：python

我有一个文件夹，其中包含一个地理数据库和两个其他文件 (txt)。我使用了 zip 并将它们拉上拉链。所以现在在这个文件夹中我有 gdb、txt、txt 和新的 zip 文件。现在我需要删除那些被压缩的文件，所以这将只是文件夹中的 zip 文件。我写了以下代码：

```
def remove_files():
   for l in os.listdir(DestPath):
      if l.find('zipped.zip') > -1:
         pass
      else:
           print ('Deleting ' + l)
           os.remove(l) 
```

但得到：

```
Error Info: 
[Error 2] The system cannot find the file specified: 'geogeo.gdb' 
```

谁能帮我？先感谢您。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-14T09:35:10.950

`os.listdir`只返回文件名，而不是完整的路径。 `os.remove`如果仅给出文件名，则使用当前工作目录。如果当前工作目录不同于`DestPath`，那么您需要提供完整路径：

```
os.remove(os.path.join(DestPath,l)) 
```

# html - Dynamics Crm 2011 电子邮件草稿超链接

> ID：10580716
> 
> 赞同：1
> 
> 时间：2012-05-14T09:33:08.303
> 
> 标签：html, email, hyperlink, dynamics-crm-2011

我尝试在 Mycrosoft Dynamics Crm 2011 的电子邮件草稿中创建超链接。

我的问题是，我在草稿中动态添加了一个链接，该链接是从记录的一个字段中获取的。添加了链接，一切正常，但我需要添加链接并隐藏 url，所以我需要以某种方式从链接中设置 InnerHtml。我不想显示 url 内容。这有可能吗？有解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T08:26:10.710

当您动态创建电子邮件时，要添加 url，请选择“插入超链接”选项。只需输入“要显示的文本”，然后从记录字段中为 Url 选择适当的 Url。

希望能帮助到你。

![例子](../Images/fc840b8e830c3a01b8b92b5f584eb60f.png)

# android - 如何通过 Android 上的微调器禁用屏幕？

> ID：10580718
> 
> 赞同：0
> 
> 时间：2012-05-14T09:33:19.267
> 
> 标签：android, drop-down-menu

有一个微调器包括两个选择：是/否和一个按钮 如果在微调器上选择是并单击保存按钮，之前的登录屏幕将被禁用。应用程序将进入主屏幕。否则，登录将启用。请帮我！谢谢

```
public void onClick(View v) {
if(String.valueOf(spinner2.getSelectedItem()).equals("yes"))
                    {

                        //login screen is disable

                    }
                    else
                    {
                        //Login screen is enable
                    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T10:02:25.480

使用了 android:visibility .....

# c - 分发用 C 编写的库

> ID：10580725
> 
> 赞同：4
> 
> 时间：2012-05-14T09:33:35.580
> 
> 标签：c, conventions

假设我有一些用 C 编写的代码，其中定义了一些数据结构和一些函数来处理这些结构，所有这些都在一个名为 src1 的目录中。假设现在我想分发此代码。

如果我想在项目中使用 src1 中的外部代码，我该怎么办？我是否应该将 src1 中的代码编译为 .a 存档，然后将该存档包含在我要使用的其他项目中？

基本上我需要知道的是在项目中使用外部代码的正确约定。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T09:59:54.783

要以库的形式分发代码，您需要按照以下步骤操作：

1.  列出您想要向其他项目公开的一组结构、函数、宏等。
2.  将 Point-1 中列出的一组数据分组到一组头文件中。其余的内部内容可以在其他头文件中。
3.  将您的代码编译成***静态***（基于 linux 的系统为 .a 或 windows 为 .lib）或***动态***库（基于 linux 的系统为 .so/.sl 或 windows 为 .dll）
4.  将您的库和一组公开的头文件（如上面第 2 点所决定）提供给其他项目。

使用 gcc 创建静态或共享库的链接[在这里](http://www.adp-gmbh.ch/cpp/gcc/create_lib.html)

使用 MSVC 在 Windows 中创建静态或动态库的链接在[这里](http://www.codeproject.com/Articles/85391/Microsoft-Visual-C-Static-and-Dynamic-Libraries)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T09:53:06.750

是的，您可以使用*静态库*，它在 Linux 中是一个 .a 文件，在 Windows 中通常是一个 .lib。当然，这也需要您共享标头，因此使用该库的代码可以具有正确的数据结构定义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T09:55:13.803

您可以使用任何格式（.a 或 .so）来分发您的库。第一个是静态盟友 Inked，第二个是动态链接。要了解更多信息，请参阅此答案[静态库和共享库之间的区别？](https://stackoverflow.com/questions/2649334/difference-between-static-and-shared-libraries)

无论您使用哪个，您总是以相同的方式链接它。

```
gcc -L/path/to/lib -lsrc1 source.c -o source.o 
```

在这里，`/path/to/lib`可以包含您之前编译的任何内容`libsrc1.so`或`libsrc1.a`

# ruby - 是否可以使用 Ruby 读取文件的修改日期？

> ID：10580728
> 
> 赞同：59
> 
> 时间：2012-05-14T09:33:49.817
> 
> 标签：ruby

是否可以使用 Ruby 读取文件的修改日期？我已经成功打开了一个文本文件并捕获了文件的内容

```
File.open("test.txt", "r").each do |line|" 
```

但是读取文件的修改日期会非常有用。

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-05-14T09:39:07.153

使用[`mtime`](http://ruby-doc.org/core/File.html#method-c-mtime)：

```
File.mtime("testfile")
=> 2014-04-13 16:00:23 -0300 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-05-14T09:35:19.323

“将命名文件的修改时间作为时间对象返回。”

```
File.mtime("testfile")   #=> Tue Apr 08 12:58:04 CDT 2003 
```

[检查这个。](http://ruby-doc.org/core-1.9.3/File.html#method-c-mtime)

# ios - iCloud 存储权利和越狱

> ID：10580730
> 
> 赞同：3
> 
> 时间：2012-05-14T09:33:57.967
> 
> 标签：ios, jailbreak, icloud

我正在尝试`NSUbiquitousKeyValueStore`在我的应用程序中使用它，它可以在未越狱的 iPad 上按预期工作。我可以删除该应用程序，当我重新安装它时，首选项仍存储在 iCloud 中。

但是，当我尝试在越狱的 iPhone（安装了 AppSync for iOS 5.0+）中运行相同的应用程序时，我收到以下错误：

```
NSUbiquitousKeyValueStore error: com.companyname.yourapp has no valid com.apple.developer.ubiquity-kvstore-identifier entitlement 
```

我尝试了常见的修复方法，例如重新创建和重新安装配置文件或清理构建目录，但没有办法解决这个问题。

另一方面，我知道使用 Game Center + AppSync 越狱设备进行开发会导致“游戏无法识别”错误。

你知道iCloud存储开发和越狱是否会导致我得到这个错误吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T13:38:46.107

我将回答我自己的问题，如果您安装了适用于 iOS 5.0+ 的 Jailbreak + AppSync，iCloud 将无法按预期工作。您必须删除 AppSync。

# mysql - CakePHP 2 应用程序在本地运行良好，但在运行时返回数据库错误？

> ID：10580731
> 
> 赞同：0
> 
> 时间：2012-05-14T09:33:58.930
> 
> 标签：mysql, cakephp, deployment

在过去的几个月里，我一直在开发一个 CakePHP 应用程序，并最终将它放在 Internet 上的测试服务器上。安装它并生活起来相当容易，而且它在一定程度上起作用。

有一个与服务器的数据库连接，应用程序可以从数据库中检索数据。但是，一些页面现在返回 SQL 错误，如下所示：

```
Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'personel.companyid' in 'where clause' 
```

我认为这可能是应用程序的错误，所以我重新检查了我的本地副本，本地副本工作正常。然后，我检查了测试服务器上的数据库模式，以查看在我收到这些错误的所有情况下是否确实存在该列。显然未知的列在那里，包括我本地数据库的副本。

我对为什么会发生这种情况感到困惑。我的本地机器和我的测试服务器之间唯一不同的是，我在 XAMPP 设置下的 Windows 计算机上本地开发了站点，并且测试服务器在 Linux (CentOS) VPS 上运行。

还有其他可能导致此问题的原因吗？

**编辑：***
这是两个失败的查询：

```
Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'personel.companyid' in 'where clause'

SQL Query: SELECT `Personel`.`id`, `Personel`.`firstname`, `Personel`.`surname`, `Personel`.`email`, `Personel`.`companyid`, `Personel`.`accesslevel`, `Personel`.`poc`, `Personel`.`password`, `Personel`.`telephone`, `Accesslevel`.`id`, `Accesslevel`.`acclevname` FROM `personel` AS `Personel` LEFT JOIN `accesslevels` AS `Accesslevel` ON (`Personel`.`accesslevel` = `Accesslevel`.`id`) WHERE `personel`.`companyid` = 1 
```

和这个：

```
Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'personel.companyid' in 'where clause'

SQL Query: SELECT `Personel`.`id`, `Personel`.`firstname`, `Personel`.`surname`, `Personel`.`email`, `Personel`.`companyid`, `Personel`.`accesslevel`, `Personel`.`poc`, `Personel`.`password`, `Personel`.`telephone`, `Accesslevel`.`id`, `Accesslevel`.`acclevname` FROM `personel` AS `Personel` LEFT JOIN `accesslevels` AS `Accesslevel` ON (`Personel`.`accesslevel` = `Accesslevel`.`id`) WHERE `personel`.`companyid` = 1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T09:59:45.750

我认为查询区分大小写。尝试在任何地方使用大写字母`Personel`。

请参阅[http://dev.mysql.com/doc/refman/5.0/en/identifier-case-sensitive.html](http://dev.mysql.com/doc/refman/5.0/en/identifier-case-sensitivity.html)。第一段将解释 MySQL 在 Unix 上区分大小写而不是在 Windows 上。

# java - Java：使用 HashMaps 从 ArrayList 中迭代 JMenuItem

> ID：10580734
> 
> 赞同：0
> 
> 时间：2012-05-14T09:34:04.247
> 
> 标签：java, swing, hashmap, jframe, actionlistener

我有一个带有菜单栏的 JFrame，我想要一些动态菜单，例如，这取决于带有 HashLists 的 ArrayList 的大小。这里的问题是我得到了动态数量的 JMenuItems，所以我需要一种方法来获取与 HashLists 一样多的变量。在这种情况下，我将变量的名称设为静态，但显然这不适用于 ActionListener，因为所有 MenuItem 都将具有相同的 ActionListener。

我想知道如何解决这个问题，以及如何获得一个包含动态数量的菜单项的菜单，这些菜单项都有独特的动作监听器。

```
private ArrayList<HashMap> menuLijst; 
```

.

```
 for (HashMap h : menuLijst) {
        String vraag = (String) h.get("vraag");
        JMenuItem qMenu = new JMenuItem(vraag);
        informatie.add(qMenu);
        qMenu.addActionListener(this);
    } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T10:11:31.100

根据您想在 ActionListener 中执行的操作，您可以`this`像现在一样使用 ，然后在 actionPerformed 中使用`((JMenutItem)event.getSource())`来查看单击了哪个菜单项。或者，您可以注册与菜单一样多的 ActionListener，如下所示：

```
for (final HashMap h : menuLijst) {
    final String vraag = (String) h.get("vraag");
    final JMenuItem qMenu = new JMenuItem(vraag);
    informatie.add(qMenu);
    qMenu.addActionListener(new ActionListener() {
         public void actionPerformed(ActionEvent event) {
               // here event.getSource() is the same as qMenu
               System.out.println("Menu "+qMenu+" with label "+vraag+" has been pressed");
               System.out.println("HashMap is "+h);
         }
    });
} 
```

但对我来说（也看到你以前的问题），你似乎在滥用`HashMap`而不是使用适当的新对象。我不知道您的 HashMap 中还有什么，假设您有 3 个键：“vraag”、“answer”、“grade”，您可以创建以下类：

```
public class MyClass {
     private String vraag;
     private String answer;
     private int grade;

     // And getters and setters here.
} 
```

并有一个`List<MyClass>`而不是`List<HashMap>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T09:46:01.990

我不明白你为什么要为你的字符串使用 HashMap。如果您保存一个字符串数组列表，并循环遍历它们以将它们全部添加到菜单中，您可以将 actionListeners 添加到所有字符串中，就像您现在所做的那样。

在您的 ActionListener 中，通过遍历 ArrayList 并与单击按钮的名称进行比较来检查单击了哪个按钮。

# c++ - 如何编写在 IDE 之间工作的 C++ 代码？

> ID：10580740
> 
> 赞同：3
> 
> 时间：2012-05-14T09:34:36.697
> 
> 标签：c++, xcode, eclipse, cross-platform

我是C#.NET 和 Visual Studio 背景（以及一些 Objective-C / XCode）的**C++新手。**

我想用 C++ 编写跨平台（Windows、OS X、Linux）应用程序。我从 Mac 上的 TextMate 和 Windows 上的记事本开始，并在命令行/终端上使用 g++ 编译代码以在其平台上构建可执行文件。

当我开始使用 IDE（即**VC++**、**XCode**和**Eclipse**）时，我感到很困惑。在将代码粘贴到其中之前，我尝试了所有三个并创建了项目。如果我开始在一个 IDE 中进行编辑，我不知道如何让最终的一段代码在不同的平台上编译。

例如，如果我有一个类文件 - `foo.cpp`. 在 Eclipse 中，它将生成`foo.cpp`（在其中一个`foo.h`, `foo::foo()`）和一个单独的`foo.h`头文件（在其中一个`FOO_H_`文件等）。在 Xcode 中，它会生成一个文件夹包含`Foo`和`main.cpp`) `foo.l`- 就是这样。为什么有区别？

我虽然 C++ 代码只是 C++ 代码，如果在该平台上编译，它会产生特定于平台的可执行文件。（例如在Mac 上编译，它变成Mac 可执行文件；如果在Windows 上编译，它变成Windows 可执行文件）。

看来，一旦我开始使用 IDE，我的 C++ 代码就会自动变得不可移植，因为所有这些我不了解的自动生成的文件。我尝试同时阅读有关 XCode、Eclipse 和 Visual Studio 的文档，这让我更加困惑。我只想写C++...

我也按照**Stroustrup 的**经典文本来学习 C++，并且在书中，没有提到任何文件的头文件或源`.h`文件`_H_`，以及生成所有这些文件的原因。

除了使用 Notepad/Textmate + G++ 编译器之外，我如何在一个可以跨平台的 IDE 中编写纯的、可移植的 C++ 程序，甚至有可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T09:45:48.990

调用的 c++ 类的默认（=最常用）文件结构`Foo`由一个名为的头文件组成，该头文件`foo.h`将包含 的类定义`Foo`，以及一个`foo.cpp`包含 的方法定义的头文件`Foo`。

通常所有的头文件都放在一个单独的文件夹中，称为`include`.

因此，具有相同文件/文件夹结构且可用于多个 IDE 的一般方法是：

*   手动创建文件夹结构（例如`include`，项目文件夹中的文件夹`src`，IDE 的项目文件将进入 make，.h 文件进入 include，.cpp 文件进入 src）`make``MyProject`
*   使用 explorer/finder/... 为您的类手动创建 .h 和 .cpp 文件
*   使用“添加现有文件”或等效的东西将这些文件添加到 IDE 的项目文件中。
*   正如 Rup 指出的那样，对于 Visual Studio，应该使用“空项目”预设，否则它会添加一些你不想要的头文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T09:48:11.413

使用 CMake 或其他元构建系统 使用 Boost 和 Qt 尽可能多地抽象出平台。

CMake 允许您为大多数 IDE:s 生成项目文件，这意味着在平台和 IDE:s 之间切换时，您只需告诉 CMake 为您在该平台上使用的那个 IDE 生成新的项目文件。

在 windows、linux 和 mac 上最容易获得平台无关代码是使用 QtCreator 作为 IDE，它也有很多很好的教程。[http://qt.nokia.com/downloads](http://qt.nokia.com/downloads)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T10:11:50.163

为什么不全部使用 1 个 IDE？Eclipse 是跨平台的 IDE

# javascript - 用 jQuery.ajax 更新 mysql 然后定位到页面

> ID：10580742
> 
> 赞同：0
> 
> 时间：2012-05-14T09:34:42.813
> 
> 标签：javascript, mysql, jquery-mobile, window.location

我正在用 phonegap 和 jQuery mobile 构建一个应用程序。在我的应用程序中，我有一个更新 mysql 的按钮，成功后定位到不同的页面。当我按下按钮 mysql 得到更新，但浏览器没有定位到不同的页面，所以我猜功能不成功？`window.locate`这是我使用的代码，是否存在一些问题，或者即使更新部分可以，为什么也不能工作？

html:

```
<!DOCTYPE HTML>
<html>
<head>
</head>
<body>
<div id="detailsPage" data-role="page" data-add-back-btn="true">
    <div data-role="header">
        <h1>Header</h1>
    </div>
  <div data-role="content"> 
      <input type="button" id="button_id" value="UPDATE" data-theme="b" onClick="UpdateRecord();">
      <input type="button" id="button_id" value="DELETE="d" onClick="DeleteRecord();">
</div>
</body>
</html> 
```

js：

```
<script>  

function getUrlVars() {
    var vars = [], hash;
    var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
    for(var i = 0; i < hashes.length; i++)
    {
        hash = hashes[i].split('=');
        vars.push(hash[0]);
        vars[hash[0]] = hash[1];
    }
    return vars;
}

function UpdateRecord(update_id) {
        var id = getUrlVars()["id"]; 
        jQuery.ajax({
            type: "POST", 
            url: serviceURL + "update.php", 
            data: 'id='+id , 
            cache: false, 
            success: function(response) 
            {
                window.location = "list.html"
            }
        });
}

function DeleteRecord(update_id) {
        var id = getUrlVars()["id"]; 
        jQuery.ajax({
            type: "POST", 
            url: serviceURL + "delete.php", 
            data: 'id='+id , 
            cache: false, 
            success: function(response) 
            {
                window.location = "list.html"
            }
        });
    }
</script> 
```

和update.php：

```
<?php
include 'config.php';
// database connection
$conn = new PDO("mysql:host=$dbhost;dbname=$dbname",$dbuser,$dbpass);
// new data
$id = @$_POST['id'];
// query
$sql = "UPDATE table
        SET number=3
        WHERE IND=?";
$q = $conn->prepare($sql);
$q->execute(array($id));
?> 
```

# java - Java EE 是否包含 Java SE？

> ID：10580743
> 
> 赞同：2
> 
> 时间：2012-05-14T09:34:51.310
> 
> 标签：java, jakarta-ee

我正在关注有关 Java EE 的教程 - [http://docs.oracle.com/javaee/5/tutorial/doc/bnaff.html](http://docs.oracle.com/javaee/5/tutorial/doc/bnaff.html)

当我使用 netbean 和捆绑的 glassfish 部署 netbean 项目时，它返回错误说它找不到 java 持久性。

```
Compiling 11 source files to E:\Raymond\Programming Practice\j2ee\javaeetutorial5\examples\web\bookstore\build\classes
E:\Raymond\Programming Practice\j2ee\javaeetutorial5\examples\web\bookstore\src\com\sun\bookstore\database\Book.java:13: package javax.persistence does not exist
import javax.persistence.Entity;
E:\Raymond\Programming Practice\j2ee\javaeetutorial5\examples\web\bookstore\src\com\sun\bookstore\database\Book.java:14: package javax.persistence does not exist
import javax.persistence.Id; 
```

我意识到我可能需要安装 java EE，因为我已经在机器中安装了 java SE6。

但是 Java EE 是否包含 Java SE？我试图不创建重复。

如果 Java EE 包含 Java SE，我需要卸载我的 Java SE，然后安装 Java EE。

如果 Java EE 不包含 Java SE，我应该单独安装 Java EE。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T09:36:32.330

Java EE 构建在 Java SE 之上。是的，您必须单独安装它。

如果您的机器上已经安装了 Java SE 6，那么您就拥有了所需的一切。

异常中引用的类是 Java EE 类。我猜这意味着你有一个 CLASSPATH 问题。将persistence.jar 添加到您的CLASSPATH。

# javascript - Raphael.js - 使用自定义字体的 bbox 太大

> ID：10580749
> 
> 赞同：2
> 
> 时间：2012-05-14T09:35:02.853
> 
> 标签：javascript, text, fonts, raphael, bounding-box

我有一个问题，当我创建一个自定义字体的文本时，边界框太大了。当我使用标准字体时，一切都很好。任何人的想法？

我解决了！显然 raphael.js 无法检测到文本的宽度，当仅使用 @font-face 时。我必须用 Raphael.registerFont() 注册字体。

# c# - .NET 简单聊天服务器示例

> ID：10580752
> 
> 赞同：3
> 
> 时间：2012-05-14T09:35:11.437
> 
> 标签：c#, sockets

我一直在为 .Net 程序员寻找简单的分步通信教程。经过一些 Google 查询，我在 net-informations.com 上找到了“CSharp Communications”代码集合。只要我到达“[如何使用 C# 聊天服务器](http://csharp.net-informations.com/communications/csharp-chat-server.htm)”示例，它看起来就相当不错。

作者提出了带有 HashTable 容器的多线程服务器，以将所有连接保持在服务器端的共享内存中。根据 MSDN 文档，用于广播消息的 [TcpClient](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcpclient.aspx)和[NetworkStream类不是线程安全的，而示例从多个服务器线程中使用它们。](http://msdn.microsoft.com/en-us/library/system.net.sockets.networkstream.aspx)

我的问题是：

1.  你能确认这个例子是错误的吗？
2.  应该怎么做，锁定广播方法是否足够（标记为临界区）？
3.  你能推荐一些套接字通信教程（.Net 首选）吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T09:42:03.150

它并不像我差不多 7 年前写的那样完美，但它涵盖了并将让您对 TCP 通信领域有很好的理解：

[通用 TCP/IP 客户端服务器](http://www.codeproject.com/Articles/19307/Generic-TCP-IP-Client-Server)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T09:42:20.740

> 根据 MSDN 文档，用于广播消息的 TcpClient 和 NetworkStream 类不是线程安全的，而示例从多个服务器线程中使用它们。

这是对的; 但它是关于并发访问的。如果每个线程依次使用实例（例如，使用锁来控制访问），那么*可以*使用不同的线程。

换句话说：不是线程安全的并不意味着绑定到单个线程。

# django - Django - 模板链标签

> ID：10580755
> 
> 赞同：1
> 
> 时间：2012-05-14T09:35:26.747
> 
> 标签：django, django-templates

我想用`firstof`一个`with`喜欢

```
<div>
  {% with variable = firstof variable1 variable2 %}</div>
  {{ variable }}
  {% endwith %}
</div> 
```

但我当然得到

> u'with' 收到无效令牌：u'variable1'

还有另一种方法可以一起使用这两个标签吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T09:41:53.767

`firstof`遗憾的是，您不能分配给这样的变量（请参阅[django-users 上的此线程](http://groups.google.com/group/django-users/browse_thread/thread/f5a90aa42dd43b47?pli=1)）。您需要编写[自己的自定义模板标签](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/)。

# javascript - 谷歌地图中的嵌套数组以制作许多多边形

> ID：10580760
> 
> 赞同：0
> 
> 时间：2012-05-14T09:35:49.040
> 
> 标签：javascript, google-maps

我有一个数组：

```
[[[11.11,11.11],[22.22,22.22],[33.33,33.33]],[[11.11,11.11],[22.22,22.22],[33.33,33.33]]] 
```

我需要在Javascript中做的是喙每个

> [[11.11,11.11],[22.22,22.22],[33.33,33.33]]

出来并创建一个新的谷歌多边形。

我目前有下面的代码为一个多边形工作，它工作正常，但我从数组中手动​​复制和粘贴以查看代码是否工作，能够自动迭代它会很好，然后在谷歌上创建多个多边形地图。

```
 var locs = [[51.4840407, -0.0318375], [51.4840351, -0.0306535], [51.4839436, -0.0300458],   [51.4840184, -0.0285545]]

 var latLng = []
 var point, _i, _len;
 for (_i = 0, _len = locs.length; _i < _len; _i++) {
  point = locs[_i];
  latLng.push(new google.maps.LatLng(point[0], point[1]));
} 
```

如何将数组放在顶部，拉出每个多边形，然后将其作为单独的多边形绘制到地图上。

根据第一个答案 - 我已将代码重新编写为：

```
var latLng =[]
var locs = []
for (var _p=0; _p < polys.length; _p++) {
    locs = polys[_p];
    for (_i = 0, _len = locs.length; _i < _len; _i++) {
        point = locs[_i];
        latLng.push(new google.maps.LatLng(point[0], point[1]));
        bermudaTriangle = new google.maps.Polygon({
        paths: [latLng]
        });

        bermudaTriangle.setMap(map);

}
} 
```

但是，当绘制多边形时，它们都“连接”，因为它们被视为一个 - 而不是每个单独的多边形。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T11:29:28.970

您已经有了需求的后半部分，因此您只需将每个单独的多边形放入`locs`然后使用它。

```
var polys = [[[11,11],[22,22],[33,33]],[[44,44],[55,55],[66,66]]];
for (var _p=0; _p < polys.length; _p++) {
    locs = polys[_p];
    // locs is [[11,11],[22,22],[33,33]] first time
    // locs is [[44,44],[55,55],[66,66]] second time
    ...
} 
```

# java - 在 Eclipse 模拟器上测试不同的密度

> ID：10580761
> 
> 赞同：0
> 
> 时间：2012-05-14T09:35:51.397
> 
> 标签：java, android, eclipse

抱歉这个基本问题，我搜索了档案但没有真正找到明确的答案。这是关于密度以及应用程序如何在不同屏幕上运行的问题。这比我能吸收的信息多一点，所以我想知道，如果我在模拟器的所有不同内置皮肤（HVGA、QVGA、WQVGA 和列表中的所有其他皮肤）上测试运行 eclipse 中的应用程序，它看起来不错，然后我知道我的应用程序在大多数设备上看起来都不错，然后我可以在晚上睡个好觉，还是我必须弄乱其他东西，比如抽象 LCD 密度？

感谢您的帮助！安德烈亚斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T10:03:35.457

大多数情况下，我为纵向和横向创建自定义布局。在 100 种情况下，您将登陆运行 android 并具有特殊屏幕的设备，可能小或大...如果您的应用看起来有点奇怪，那么您需要复制该屏幕你的模拟器......然后为此创建一个名为 layout-small 的自定义布局。

# jquery - 如何在jQuery中检查复选框

> ID：10580763
> 
> 赞同：2
> 
> 时间：2012-05-14T09:35:55.777
> 
> 标签：jquery

嗨，我在我的 asp.net mvc 应用程序中使用 jQuery，在此我创建了一些复选框，例如

```
$("#dvModules").append('<input type="checkbox" id=Module_' + jsModulesData[ctr].Code + ' name="' + jsModulesData[ctr].Name + '" value="' + jsModulesData[ctr].Code + '"> ' + jsModulesData[ctr].Name + '
'); 
```

我检查了其中一些并将其值存储在数据库中，当我再次将其输入到此页面时，我从数据库中获取了值，但我无法使用它们的值检查相应的复选框，我的代码如下：

```
var arrModuleIDs = SelectedModuleIDs.split(',');

$(document).ready(function () {
    SelectedModuleIDs = '@ViewBag.SelectedModuleIDs';
    var arrModuleIDs = SelectedModuleIDs.split(',');

    for (var i = 0; i < arrModuleIDs.length; i++) {
        $("#Module_" + arrModuleIDs[i] + "").attr('checked', true);
         //Here the arrmoduleIDs is the values from database.
    } 
```

这里循环运行良好，但未选中复选框，任何人都可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T11:39:56.483

```
 $(document).ready(function () {
        //            $.each(('@ViewBag.SelectedModuleIDs').split(','), function (i, value) {
        //                $('#dvModules').find("#Module_" + value + "").attr('checked', true);
        //            });

        $.each(('4,3,6,7').split(','), function (i, value) {
            $('#dvModules').find("#Module_" + value).attr('checked', true);
        });
    });

<div id="dvModules">
    <input type="checkbox" id="Module_1" value="1" />1<br />
    <input type="checkbox" id="Module_2" value="2" />2<br />
    <input type="checkbox" id="Module_3" value="3" />3<br />
    <input type="checkbox" id="Module_4" value="4" />4<br />
    <input type="checkbox" id="Module_5" value="5" />5<br />
</div> 
```

# php - Ajax CORS 替代品

> ID：10580765
> 
> 赞同：3
> 
> 时间：2012-05-14T09:35:56.513
> 
> 标签：php, javascript, ajax, browser, cors

我在域 api.example.com 上有一个 REST API 服务。并且想将此 api 也用于我在 www.example.com 上的 javascript ajax 请求。

我使用 CORS 构建了我的 jQuery AJAX 请求（GET、POST、PUT 和 DELETE），并且在 firefox 和 chrome 上一切正常。我在 Opera 上测试了脚本，但没有加载任何内容。之后，我阅读了一些在线文章，不得不意识到 CORS 不适用于 Opera。

获取数据并将数据放入 Rest 服务有哪些替代方法？JSONp 不起作用，因为我也需要其他 HTTP 动词（POST、PUT、DELETE）。

在同一个域上创建一个“隧道”php-Script？但是，我有更多的网络流量和服务器负载。

```
Client -> WWW-Server -> API-Server
API-Server -> WWW-Server -> Client 
```

代替

```
Client -> API-Server
API-Server -> Client 
```

我感谢每一个将与我分享的想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T10:15:24.050

您可以使用第三方工具进行隧道传输，例如[YQL](http://developer.yahoo.com/yql/)。

> 雅虎！查询语言是一种表达能力强的类 SQL 语言，可让您跨 Web 服务查询、过滤和连接数据。

YQL 将充当中间人，将来自您的站点的调用连接到您的 API。网络流量如下所示：

```
Client -> YQL -> API Server 
```

这对我来说看起来不错。

YQL 已经存在了很长时间。他们的[免费配额](http://developer.yahoo.com/yql/guide/usage_info_limits.html)很有利，正常运行时间也很长：

> *   每个 IP 限制：/v1/public/ *：每小时 2,000 次呼叫；/v1/yql/*：每小时 20,000 个电话。
>     
>     
> *   YQL 的性能正常运行时间目标超过 99.5%。

此外，配额不断增加，雅虎！提供一定的保证，如果他们决定关闭服务，他们会保持它运行一段时间，这样你就有时间迁移。今天有几个使用 YQL 的项目（我知道一个这样的服务 - [TipTheWb.org](http://tiptheweb.org/)）

此外，我建议您检测给定浏览器是否支持 CORS 并仅在必要时回退到 YQL：

```
function browserSupportsCors() {
    if ("withCredentials" in new XMLHttpRequest())
        return true; // most browsers
    else if (typeof XDomainRequest == "object")
        return true; // IE8+
    else // Opera currently here, but they'll get better pretty soon :)
    return false;
} 
```

或者如果你使用 jQuery，它有一个简洁的[`support`](http://api.jquery.com/jQuery.support/)方法。

```
if (!$.support.cors) {
    // YQL fallback
} 
```

还有一些很好的[技巧来调整 YQL 性能](http://www.slideshare.net/cheilmann/using-yql-sensibly-yuiconf-2010)。

* * *

*感谢您对 Opera 用户的关心！*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T09:38:36.247

最常见的解决方案确实是在您的服务器上使用代理脚本。

带宽很可能可以忽略不计——我们谈论的是小请求，毕竟不是大下载。
而且服务器负载也很小——你总是可以使用一些异步和轻量级的东西，比如 node.js 来进一步减少负载。

# linux - top 命令中的 SWAP 列代表什么？

> ID：10580767
> 
> 赞同：1
> 
> 时间：2012-05-14T09:35:59.927
> 
> 标签：linux, swap, top-command

> **可能重复：**
> [如何找出Linux中哪些进程正在交换？](https://stackoverflow.com/questions/479953/how-to-find-out-which-processes-are-swapping-in-linux)

我给出了 top 命令并使用下面的排序字段对输出进行了排序。

P: SWAP = 交换大小 (kb)

我正在寻找消耗最大交换量的进程ID。

这是我得到的输出

交换命令

1.1g java 979m
java
568m java

这是什么意思？这似乎不是这些进程使用的交换空间，因为在顶部命令输出的开头，交换详细信息如下所示

交换：总共 2096440k，已使用 830636k，

swap 总量为 1.99g，所以前三个进程消耗不了这么多。那么这个专栏到底代表什么？

此外，有没有办法追查消耗大量交换空间的进程？

# c# - 如何获取属性树的踪迹？

> ID：10580768
> 
> 赞同：2
> 
> 时间：2012-05-14T09:36:01.253
> 
> 标签：c#, .net, properties, path, trace

假设我有这样的事情：

```
class Program
{
    static void Main(string[] args)
    {
        A A1 = new A();
        A1.B1.C1.GetPath();
    }
}

class A
{
    public B B1 { get; set; }
    public B B2 { get; set; }
}

class B
{
    public C C1 { get; set; }
}
class C
{
    public string GetPath();
} 
```

是否有可能实现方法`GetPath()`，例如返回“ `C1 in B1 in A1`”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T09:41:14.423

没有内置的方法可以实现这一点。

你*可以*做的是：

*   OOP方式：在传递父/持有者类引用的地方定义ctor，这样就可以在运行时计算出来。

*   使用[Environment.StackTrace](http://msdn.microsoft.com/en-us/library/system.environment.stacktrace.aspx)并获取堆栈跟踪（不知道这是否真的符合您的需求）

希望这可以帮助。

# java - 如何通过安卓谷歌地图上的触摸屏获取地址信息

> ID：10580770
> 
> 赞同：0
> 
> 时间：2012-05-14T09:36:05.577
> 
> 标签：java, android, google-maps, touchscreen

我在这个网站上尝试了所有答案，但没有一个有效。我正在使用 android SDK r_18 并在`android 2.2`. 我仍然不知道为什么示例不起作用。

如果我添加`mapView.setOnTouchListener(this);`到`onCreate()`下面的功能一次。当函数返回 false 时，它​​不再工作。

```
public boolean onTouch(View v, MotionEvent event) {     
    if (event.getAction() == 1) {                
        GeoPoint p = mapView.getProjection().fromPixels(
            (int) event.getX(),
            (int) event.getY());
            showToast("if 11");
            mapCon = mapView.getController();
            mapCon.animateTo(p);
            //mapCon.setZoom(mapCon.zoo);
    }       
    else
    if (event.getAction() == 2)
    {
        showToast("if 22");
      GeoPoint p = mapView.getProjection().fromPixels(
      (int) event.getX(),
      (int) event.getY());
      mapCon = mapView.getController();
      mapCon.animateTo(p);
    }
    else
        if (event.getAction() == 0)
        {
            showToast("if 00");
        }

    return (super.onTouchEvent(event));

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T09:52:46.053

好吧，由于您的问题中没有足够的信息来说明您已经在做什么，您还剩下什么，以及您到底在使用什么语言，我会提出这个问题，直到您将这些信息放在您的问题中。

我最近创建了一个包含谷歌地图的 android 应用程序，并使用[这篇](http://blog.jayway.com/2012/04/02/simple-google-maps-api-example/)文章来让谷歌地图正常工作，所以我可以告诉你这是可行的，所以如果你在应用程序中使用 Javascript，请查看这篇文章，它应该会有所帮助你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T09:48:35.017

要获取地址，您必须使用 GeoCoder。现在，当您使用 GeoCoder 时，android 的其他 API 会出现一些错误。

使用 2.1 使用 GeoCoder 测试东西

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T19:14:27.803

我解决了这个问题。

我正在使用这种方法“mapView.setBuiltInZoomControls(true);”

当我删除它时，我开始使用触摸屏。

# python - Selenium：测试弹出窗口

> ID：10580772
> 
> 赞同：5
> 
> 时间：2012-05-14T09:36:13.153
> 
> 标签：python, html, selenium

尝试使用 Selenium/Python 测试 Web 应用程序时遇到问题。基本上我无法测试弹出窗口的元素。

**一个场景：**我可以测试一个页面的所有元素。但是当我点击一个打开一个小弹出框的按钮时，我无法测试弹出窗口中的元素。就像弹出窗口不是焦点或活动一样。

我可以在下一页上测试元素。例如，单击一个按钮，将我带到下一页，我可以使用“下一页”上的元素。因此，问题似乎是特定于弹出窗口的。

我可以发布代码，但老实说，在这个阶段它可能会混淆。我可能会在以后的帖子中发布代码，谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T09:43:17.420

There is a property called **switch_to**

> **Q: How do I handle pop up windows?**

A: WebDriver offers the ability to cope with multiple windows. This is done by using the `WebDriver.switch_to.window(knownName)` method to switch to a window with a known name.

If the name is not known, you can use `WebDriver.window_handles` to obtain a list of known windows.

You may pass the handle to `switch_to.window(handleName)`

For example I used `driverName.switchTo.window(driverName.getWindowHandle())` to get a hold of popups for which I didn't want to look for names.

Additional references: [http://code.google.com/p/selenium/wiki/FrequentlyAskedQuestions](http://code.google.com/p/selenium/wiki/FrequentlyAskedQuestions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T15:34:06.537

对于 Selenium RC API，您需要使用 SelectWindow 命令切换到弹出窗口。窗口可以通过其名称（如 JavaScript`window.open()`函数中指定的那样）或其标题来指定。要切换回主窗口，请使用`SelectWindow(None)`.

# python - Python 线程：如何使用外部脚本的返回值？

> ID：10580780
> 
> 赞同：0
> 
> 时间：2012-05-14T09:36:45.550
> 
> 标签：python, multithreading, queue, ironpython, return-value

[（我在这里](https://stackoverflow.com/questions/5093164/multi-threading-different-scripts "这里")找到了一个不错的解决方案，但不幸的是我使用的是 IronPython，它没有实现多处理模块......）

驱动脚本 Threader.py 会调用 Worker.py 的单个函数两次，使用 threading 模块。它的单一功能只是获取数据字典。

粗略地讲：

**工人.py**

```
def GetDict():
    :
    :
    :
    return theDict 
```

**线程器.py**

```
import threading
from Worker import GetDict
    :
    :
    :
def ThreadStart():
    t = threading.Thread(target=GetDict)
    t.start()
    :
    : 
```

在驱动脚本 Threader.py 中，我希望能够对 Worker.py 的 2 个实例输出的两个字典进行操作。

[这里](https://stackoverflow.com/questions/2577233/threading-in-python-retrieve-return-value-when-using-target/ "这里")接受的涉及 Queue 模块的答案似乎是我在访问返回值方面所需要的，但这是从在*单个*脚本中完成的所有事情的角度编写的。如何使 Worker.py 中调用的函数的返回值可用于 Threader.py（或任何其他脚本）？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T10:01:44.303

另一种做你想做的事（不使用 a `Queue`）的方法是使用[`concurrent.futures`](http://docs.python.org/dev/library/concurrent.futures.html)模块（来自 python3.2，对于早期版本[，有一个 backport](http://pypi.python.org/pypi/futures)）。

使用它，您的示例将像这样工作：

```
from concurrent import futures

def GetDict():
    return {'foo':'bar'}

# imports ...
# from Worker import GetDict

def ThreadStart():
    executor = futures.ThreadPoolExecutor(max_workers=4)
    future = executor.submit(GetDict)
    print(future.result()) # blocks until GetDict finished

    # or doing more then one:
    jobs = [executor.submit(GetDict) for i in range(10)]
    for j in jobs:
        print(j.result())

if __name__ == '__main__':
    ThreadStart() 
```

编辑：

类似的事情是使用您自己的线程来执行目标函数并保存它的返回值，如下所示：

```
from threading import Thread

def GetDict():
    return {'foo':'bar'}

# imports ...
# from Worker import GetDict

class WorkerThread(Thread):

    def __init__(self, fnc, *args, **kwargs):
        super(WorkerThread, self).__init__()
        self.fnc = fnc
        self.args = args
        self.kwargs = kwargs

    def run(self):
        self.result = self.fnc(*self.args, **self.kwargs)

def ThreadStart():
    jobs = [WorkerThread(GetDict) for i in range(10)]
    for j in jobs:
        j.start()
    for j in jobs:
        j.join()
        print(j.result)

if __name__ == '__main__':
    ThreadStart() 
```

# linux - 如何在不安装 RPM 的情况下“重新打包”一个 RPM 文件，例如 cpio2rpm？

> ID：10580781
> 
> 赞同：9
> 
> 时间：2012-05-14T09:36:53.597
> 
> 标签：linux, rpm, rebuild

1.  我可以从 RPM 文件中提取文件，但是如何“重建”它，例如 cpio2rpm？
2.  我已经使用以下命令提取了 RPM 文件。rpm2cpio 文件名.rpm | cpio –idmv
3.  我必须修改几个 Web 应用程序文件，例如 *.php、*.html 或 .js。这些文件不需要任何源重新编译。所以我想用修改替换或更改这些文件而不重建 rpm。因为，我需要为 Redhat Linux 和 SUSE 等多个平台以及 32 位和 64 位操作系统等多种架构执行此操作。
4.  我希望仅在系统上进行这些更改，而不需要重新构建 rpm，并且不会有目标系统架构依赖性（如 i386、64）。
5.  我看起来不像命令 rpmbuild –rebuild the.src.rpm，因为我没有源代码。我需要重建二进制 .RPM 文件（不是源 .rpm）
6.  我想在没有源和平台或体系结构的情况下做到这一点，并且尽可能不使用规范文件。

    任何朋友，您能否提出任何解决方案或任何免费工具。

    感谢所有花时间阅读和回复我的帖子的人。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-05-22T17:00:44.150

您可以使用[rpmrebuild](http://rpmrebuild.sourceforge.net/)修改实际的 rpm 文件（不需要安装）。

大多数示例使用复杂的内联编辑命令以特定方式修改已知文件，但您可以使用普通编辑器。我用它来修复我没有源代码的 rpm 文件中的 shell 脚本。调用命令为

```
rpmrebuild -ep theFileName.rpm 
```

这会将您置于带有 RPM 规范文件的编辑器中。该文件的名称将类似于`~/.tmp/rpmrebuild.12839/work/spec.2`. 如果您查看，在本例中`~/.tmp/rpmrebuild.12839/work`，您将找到用于制作 RPM 的所有文件（在我的例子中，该文件`root/usr/sbin`位于该目录中）。因此，转到另一个窗口，cd 到该目录，然后编辑您需要更改的任何文件。

完成文件编辑后，返回带有规范文件的编辑窗口，对该文件进行任何您需要的更改（我没有任何更改，因为我没有添加或删除文件），保存文件，然后对“你想继续”问题说“y”。然后它会构建一个新的 RPM 文件，并告诉你它放在哪里（在我的例子中，在 ~/rpmbuild/RPMS/x86_64/ 中）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T22:00:48.290

您可以使用 rpmrebuild 重新打包已安装的 RPM（包括修改的文件）。[http://rpmrebuild.sourceforge.net/](http://rpmrebuild.sourceforge.net/)

显然，您的二进制文件（如果有的话）必须独立于平台/体系结构才能在您希望的所有操作系统风格上工作，但听起来它们只是 Web 文件，这不应该是一个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T10:11:13.603

原则上，您可以将所需的所有内容打包到 RPM 文件中。只需将您拥有的内容视为“源”并编写一个 SPEC 文件，该文件将数据放在编译后的二进制文件通常会去的地方。

关于 RPM，我认为“源”“我有什么”和“二进制”“我需要运行什么”。不是很准确的术语，但它有助于使用 RPM。

您的规范文件看起来像任何其他规范文件，涉及参数等。但代码部分不同：

```
[...]
%prep
# Here you either have nothing to do or you already unpack the cpio and possibly modify it.

# %build can be omitted

%install
[ "${buildroot}" != "/" ] && [ -d ${buildroot} ] && rm -rf ${buildroot};
# Here you can either unpack the cpio or copy the data unpacked in %prep.
# Be careful to put it into %{buildroot} or $RPM_BUILD_ROOT. 
```

# asp.net - 仅更新一行中的字段子集

> ID：10580783
> 
> 赞同：1
> 
> 时间：2012-05-14T09:37:23.317
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

我正在学习 asp.net MVC。使用 Code First 模型，您可以在其中创建类，然后使用 EF 管理所有数据库交互。

无论如何只使用这种方法从给定表中请求一些字段，并且只更新这些字段？

我的整个班级是：

```
Public Class Employee
  Public Property ID() As Integer
  <DisplayName("Staff Name")>
  <Required()>
  Public Property StaffName() As String
  <DisplayName("Location")>
  <Required()>
  Public Property Location() As String
  <Required()>
  <DisplayName("Team Leader")>
  Public Property teamleader() As String

  Public Property ScoreCardM1() As Integer
  Public Property ScoreCardM1Notes() As String
  Public Property ScoreCardM2() As Integer
  Public Property ScoreCardM2Notes() As String
  Public Property ScoreCardM3() As Integer
  Public Property ScoreCardM3Notes() As String
  Public Property ScoreCardM4() As Integer
  Public Property ScoreCardM4Notes() As String
  Public Property ScoreCardM5() As Integer
  Public Property ScoreCardM5Notes() As String
  Public Property ScoreCardM6() As Integer
  Public Property ScoreCardM6Notes() As String
  Public Property ScoreCardTotal() As Integer
  Public Property ScoreCardTotalNotes() As String
  Public Property ScoreCardM7() As Integer
  Public Property ScoreCardM7Notes() As String
  Public Property ScoreCardM8() As Integer
  Public Property ScoreCardM8Notes() As String
  Public Property ScoreCardM9() As Integer
  Public Property ScoreCardM9Notes() As String
  Public Property ScoreCardQ3Total() As Integer
  Public Property ScoreCardQ3TotalNotes() As String
  Public Property ScoreCardM10() As Integer
  Public Property ScoreCardM10Notes() As String
  Public Property ScoreCardM11() As Integer
  Public Property ScoreCardM11Notes() As String
  Public Property ScoreCardM12() As Integer
  Public Property ScoreCardM12Notes() As String
  Public Property ScoreCardQ4Total() As Integer
  Public Property ScoreCardQ4TotalNotes() As String
  Public Property GeneralNotes() As String
End Class 
```

但是，我只想一次显示和编辑一个月：

```
Public Class Employee
  Public Property ID() As Integer
  <DisplayName("Staff Name")>
  <Required()>
  Public Property StaffName() As String

  Public Property ScoreCardM1() As Integer
  Public Property ScoreCardM1Notes() As String
End Class 
```

我怎样才能最好地做到这一点？我是否设置了另外 12 个类，每个类只包含一个月，或者是否有一种最佳实践方法可以更新数据库行中的字段子集，而不影响其他类？

谢谢你的帮助，

标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T14:04:54.090

进一步我上面的评论......你可以设置你的课程如下：

员工等级：

```
Public Class Employee
  Public Property EmployeeID() As Integer
  <DisplayName("Staff Name")>
  <Required()>
  Public Property StaffName() As String
  <DisplayName("Location")>
  <Required()>
  Public Property Location() As String
  <Required()>
  <DisplayName("Team Leader")>
  Public Property teamleader() As String
  Public virtual Property reports() As ICollection<Of MonthlyRports> // not sure if the syntax is right (haven't worked in VB)
End Class 
```

月报班

```
Public Class Employee
  Public Property MonthlyReportID() As Integer // primary key
  Public Property EmployeeID() As Integer // foreign key. who this report belongs to
  Public Property Month As String // report for month ...
  Public Property ScoreCard() As Integer
  Public Property ScoreCardNotes() As String
End Class 
```

# java - Java：深拷贝的序列化性能？

> ID：10580784
> 
> 赞同：3
> 
> 时间：2012-05-14T09:37:24.110
> 
> 标签：java, performance, serialization, cloning

我需要为我的一个项目深度复制 Java 对象；我想知道是否可以为此使用序列化。

这些对象相当小（每个< 1kb），每个副本的总#objects 将< 500，并且每天将调用几次复制例程。在这种情况下，是否可以*在生产*中使用序列化，或者考虑到序列化的性能，这仍然是一个非常糟糕的主意？

如果这仍然是一个坏主意，我可以考虑为每个此类使用复制构造函数/静态复制方法来提高性能。还有其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T10:08:30.427

也许。性能将不是问题 - 依赖关系将是。

序列化的常见问题是，对应用程序中某个核心类的无害引用可以为您提供所有生命实例的 90% 的副本，因为它们突然变得可访问。所以你必须非常小心`transient`你使用的参考资料。

更糟糕的是，如果您需要序列化以进行深度复制和真实状态保存，您最终可能会遇到不兼容的目标：

*   深拷贝需要快
*   深拷贝可以处理开放资源（数据库连接）
*   状态保存需要处理 API 演变（状态存储在磁盘上，可以使用新版本的代码恢复）。
*   状态保存可以从使用可读形式中受益（因此人类可以修复错误）

因此，使用[复制构造函数](https://en.wikipedia.org/wiki/Copy_constructor)通常比使用“聪明的黑客”更好，即使它现在可能会保护你一些/很多时间。

# .net - 我应该将当前单位存储在数据库中还是只使用 .NET RegionInfo.ISOCurrencySymbol

> ID：10580786
> 
> 赞同：1
> 
> 时间：2012-05-14T09:37:29.803
> 
> 标签：.net, localization, currency

![在此处输入图像描述](../Images/e9ddc9ac804141d05e9ef1f5bd01ad40.png)

我在我正在做的一个项目中看到了这一点，他们像这样存储国家名称和货币类型。

如果货币事物使用 .Net 提供的 System.Globalization 代替会更好。

[http://msdn.microsoft.com/en-us/library/system.globalization.regioninfo.isocurrencysymbol.aspx](http://msdn.microsoft.com/en-us/library/system.globalization.regioninfo.isocurrencysymbol.aspx)

我们应该将这些货币存储在我们自己的数据库中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T09:55:55.333

存储您的货币符号没有明确的正确或错误方式，这在很大程度上取决于您的需求和您预期的未来需求。如果您想存储货币符号而不是 ISO 代码并且这对您有用，那么很好。但是，当您的要求扩展到例如检索货币兑美元的汇率时，它可能会给您带来困难。为此，您可能会使用第三方 Web 服务来获取汇率，并且此 Web 服务很可能会要求您将货币指定为 ISO 代码。如果您只存储您的货币符号，那么您将不得不编写一个方法将符号转换为 ISO 代码。

但是，在您的数据库表中，您存储的是针对该国家/地区的货币。如果您只是将国家/地区的 ISO 代码存储在此表中，会不会更容易。然后，您可以使用 RegionInfo 类来获取该县的货币符号，以及有关该国家/地区的许多其他信息，这些信息将来可能会有用。

因此，我的建议是您存储国家/地区的 ISO 代码而不是货币。

# c++ - 使用 cmake 将 log4cpp 库链接到项目

> ID：10580789
> 
> 赞同：1
> 
> 时间：2012-05-14T09:37:41.760
> 
> 标签：c++, cmake, log4cpp

我正在尝试将 log4cpp 链接到我的项目。我使用 CMake，但我想不出办法。

Log4cpp 安装在 projectfolder/log4cpp/ 上（其中包含 bin/ include/ lib/ ...）

我使用以下 Findlog4cpp.cmake ：

```
IF (LOG4CPP_FOUND)
    SET(LOG4CPP_FIND_QUIETLY TRUE)
ENDIF (LOG4CPP_FOUND)

FIND_PATH(LOG4CPP_INCLUDE_DIR log4cpp/FileAppender.hh
    "./log4cpp/include/"
)

FIND_LIBRARY(LOG4CPP_LIBRARIES
  NAMES liblog4cpp.so
  PATHS "./log4cpp/lib"
)

SET(LOG4CPP_FOUND 0)
IF(LOG4CPP_INCLUDE_DIR)
  IF(LOG4CPP_LIBRARIES)
    SET(LOG4CPP_FOUND 1 CACHE INTERNAL "log4cpp found")
    IF (NOT LOG4CPP_FIND_QUIETLY)
      MESSAGE(STATUS "Found Log4CPP")
    ENDIF (NOT LOG4CPP_FIND_QUIETLY)
  ENDIF(LOG4CPP_LIBRARIES)
ENDIF(LOG4CPP_INCLUDE_DIR)

MARK_AS_ADVANCED(
  LOG4CPP_INCLUDE_DIR
  LOG4CPP_LIBRARIES
) 
```

在我的 CMakeLists.txt 我称之为：

```
...
FIND_PACKAGE(log4cpp REQUIRED)
INCLUDE_DIRECTORIES(${LOG4CPP_INCLUDE_DIR})
SET(LIBS ${LOG4CPP_LIBRARIES} ${LIBS})

MESSAGE("############################# ${LOG4CPP_LIBRARIES}")
MESSAGE("############################# ${LOG4CPP_INCLUDE_DIR}")
... 
```

输出 ：

```
-- Found Log4CPP
############################# /SOMEPATH/projectfolder/log4cpp/lib/liblog4cpp.so
############################# /SOMEPATH/projectfolder/log4cpp/include
-- Configuring done
-- Generating done
-- Build files have been written to: /SOMEPATH/projectfolder/ 
```

然后当我运行 make 我有以下错误：

```
/SOMEPATH/projectfolder/common/Common.h:24:31: error: log4cpp/Category.hh: No such file or directory
/SOMEPATH/projectfolder/common/Common.h:25:35: error: log4cpp/FileAppender.hh: No such file or directory
/SOMEPATH/projectfolder/common/Common.h:26:34: error: log4cpp/BasicLayout.hh: No such file or directory 
```

我只是在 common.h 中包含了标题（#include "log4cpp/xxx.hh"）

我补充说，没有 log4cpp，所有构建和编译都可以正常工作（使用 cmake 然后 make）

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T11:23:48.697

如果您将公用目录添加为具有自己的 CMakeLists.txt 的子目录，如果您希望传递已包含的目录，则需要在调用`INCLUDE_DIRECTORIES`之前调用。`ADD_SUBDIRECTORY`

# c - 如何在不使用 system() 的情况下从 C 程序中使用“sudo”？

> ID：10580797
> 
> 赞同：0
> 
> 时间：2012-05-14T09:38:04.407
> 
> 标签：c, system, sudo, chmod

我有以下代码：

```
std::string cmd = "sudo chmod a+x file";
int r = system(cmd.c_str()); 
```

哪个工作正常。

如何在不调用 system() 函数的情况下做同样的事情？

我能得到的是：

```
#include <sys/stat.h>
int r = chmod("file", S_IXUSR | S_IXGRP | S_IXOTH); 
```

在这种情况下如何使用“sudo”？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T09:39:51.953

你不能。除非您的程序是 suid root，否则很可能不是这种情况 - 否则您不会使用 sudo。

然而，根据你的程序做什么，给它 setuid-root 可能确实是要走的路。您需要执行需要 root 权限和 sudo 访问权限的操作`chmod`，尤其是在任意模式/路径上，通常不会授予非 root 用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T09:47:44.460

特权基于进程。处理此问题的一种方法是让您的程序设置 setuid 位并由 root 拥有。启动后，做任何需要特权的事情，然后使用`setuid`系统调用删除特权状态。

# javascript - 使用 JQuery 的嵌套网格列的总和

> ID：10580804
> 
> 赞同：0
> 
> 时间：2012-05-14T09:38:41.350
> 
> 标签：javascript, jquery, asp.net, ajax

*   请看这个小提琴，我想要嵌套网格的总和并将总和值放在父网格的文本框中。这种结构可以重复，所以我不能硬编码文本框名称。
*   小提琴中的 HTML 非常混乱，但这是从我的页面生成的。

**小提琴：http:** [//jsfiddle.net/kashifnadeem/kGzFL/8/](http://jsfiddle.net/kashifnadeem/kGzFL/8/)

*   另一个问题是，如果我将它放在 Ajax（更新面板）中，那么不会生成这个 html，为什么会这样以及在这种情况下如何使用 JQuery。

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T13:24:16.913

试试这个：http: [//jsfiddle.net/NyHa6/1/](http://jsfiddle.net/NyHa6/1/)

不知道这是不是你想要的。

# iphone - 遍历指向指针向量的指针

> ID：10580805
> 
> 赞同：1
> 
> 时间：2012-05-14T09:38:44.173
> 
> 标签：iphone, c++, cocos2d-iphone, box2d

我正在尝试使用 cocos2d 和 Box2D 编写 iPhone 游戏，这意味着我必须在 Objective-C 和 C++ 之间进行混合。我有一个关于使用指向我创建的 gameLevels 和 levelObjects 对象的指针的问题。

我有一个名为 GameLevel 的类，其中包含 levelObjects 的向量。我认为使用指针是这样做的方法，以确保我使用尽可能少的内存。这意味着我的向量是

```
std::vector<LevelObject*>* levelObjects; 
```

LevelObject 类包含精灵、b2bodyDef 等，以及所有指针。

当我想绘制一个关卡时，我想遍历这个向量时，问题就开始了。我写的代码是这样的：

```
-(void)startLevel:(b2World*) world withLevel:(GameLevel*) level{
std::vector<LevelObject*>::iterator it;
for (it = level->getLevelObjects()->begin() ; it != level->getLevelObjects()->end(); ++it) {
    CCSprite* sprite = it->sprite; //Here XCode complaints about "Member reference base type 'LevelObject *' is not a structure or union" and "Use of undeclared identifier 'sprite'". I cannot seem to access any of the objects variables/methods from it-> 
```

所以我要问的问题是：使用指向指针向量的指针，这是实现这一目标的好方法吗？为什么迭代不起作用？

谢谢 ：）

编辑： getLevelObjects() 是：

```
std::vector<LevelObject*>* getLevelObjects(){return levelObjects;} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T09:42:33.140

您的迭代器指向指针，因此您需要两个取消引用：

```
(*it)->sprite 
```

迭代器的解引用，

```
*it 
```

给你一个`LevelObject*`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T09:42:56.247

您有两个间接级别，即迭代器和向量内的指针。

您需要`(*it)`获取指针，然后使用它`->`来取消引用：

```
CCSprite* sprite = (*it)->sprite; 
```

# ruby-on-rails - 在rails路线中使用#..！

> ID：10580806
> 
> 赞同：0
> 
> 时间：2012-05-14T09:38:54.010
> 
> 标签：ruby-on-rails

我正在尝试有一个执行以下操作的路由规则

`http://localhost:3003/tab/show#user11`

加载此 url 时，系统应获取 # 之后的值并使用它来生成用户输出。

我尝试在 routes.rb 文件中添加此规则

```
 match "tab/show#:value => "tab#show"
```

但我无法使用它并在 #like 之后获取值

```
@current = request["value"]
```

请建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T09:49:16.867

这部分 url 在请求期间不会发送到服务器。因此，自然地，您无法在服务器端访问它。使用 javascript 访问它。

这不是 Rails 的“功能”。是常事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T14:38:46.167

如果您将根更改为

```
match "tab/show/:value => "tab#show" 
```

并使用网址

```
http://localhost:3003/tab/show/user11 
```

然后它将在 params 哈希中可用：

```
@current = params[:value] 
```

除非您对当前的结构有充分的理由，否则这是最好的方法。

汤姆

# hibernate - 可以根据部署配置隐藏表吗？

> ID：10580808
> 
> 赞同：0
> 
> 时间：2012-05-14T09:39:03.377
> 
> 标签：hibernate, orm, schema, db2

我们将支持多个客户端，并且某些数据库表不应该对所有客户端可见。然而，由于易于部署，我们希望为所有客户端提供相同的架构。

1）是否可以“隐藏”一些表，以便我们可以为客户端提供相同的架构，但某些表仅在某些部署中可见？我们使用 Hibernate，我不确定这会如何影响映射。

2) 另一种选择是创建视图并将其映射到 Hibernate，在某些情况下不应该显示物理表结构。这适用于 DB2 数据库吗？

有什么想法吗？感谢您的输入！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T14:11:23.457

此刻，当hibernate 打开一个新配置时（即当您调用 时`Configuration.configure()`），hibernate 会检查它在hibernate.cfg.xml 中找到的所有映射文件。此检查包括验证表和映射列是否存在。如果它们不存在，你会立即得到一个异常。

您可以做什么：
您向所有客户端提供相同的映射文件，但每个客户端都有自己的 hibernate.cfg.xml，其中只有他拥有的表包含在`<mapping...>`标记中。在这种情况下，您甚至可以为同一个表提供不同的映射文件（如果不同的客户端具有此表的不同版本，这很有用），并且在 hibernate.cfg.xml 中只提到了这些映射文件中的一个。

# homebrew - 如何修复 brew doctor 错误？

> ID：10580813
> 
> 赞同：63
> 
> 时间：2012-05-14T09:39:23.733
> 
> 标签：homebrew

说到这一切，我还是个新手，所以请原谅我的无能。

当我运行 brew Doctor 时，我得到以下信息。有人可以帮忙吗？

```
[/usr/local]$ brew doctor

Error: Setting DYLD_LIBRARY_PATH can break dynamic linking.
You should probably unset it.
Error: Some keg-only formula are linked into the Cellar.
Linking a keg-only formula, such as gettext, into the cellar with
brew link f will cause other formulae to detect them during the
./configure step. This may cause problems when compiling those
other formulae.

Binaries provided by keg-only formulae may override system binaries
with other strange results.

You may wish to brew unlink these brews:

libxml2

Error: Unbrewed dylibs were found in /usr/local/lib.
If you didn't put them there on purpose they could cause problems when
building Homebrew formulae, and may need to be deleted.

Unexpected dylibs:
/usr/local/lib/libcharset.1.dylib /usr/local/lib/libfreetype.6.dylib /usr/local/lib/libjpeg.8.dylib /usr/local/lib/liblcms.1.0.19.dylib /usr/local/lib/libMagickCore.4.dylib /usr/local/lib/libMagickWand.4.dylib /usr/local/lib/libpng15.15.dylib /usr/local/lib/libtiff.3.dylib /usr/local/lib/libtiffxx.3.dylib /usr/local/lib/libwmf-0.2.7.1.0.dylib /usr/local/lib/libwmflite-0.2.7.0.1.dylib
Error: Unbrewed .la files were found in /usr/local/lib.
If you didn't put them there on purpose they could cause problems when
building Homebrew formulae, and may need to be deleted.

Unexpected .la files:
/usr/local/lib/libcharset.la /usr/local/lib/libfreetype.la /usr/local/lib/libjpeg.la /usr/local/lib/liblcms.la /usr/local/lib/libMagickCore.la /usr/local/lib/libMagickWand.la /usr/local/lib/libpng15.la /usr/local/lib/libtiff.la /usr/local/lib/libtiffxx.la /usr/local/lib/libwmf.la /usr/local/lib/libwmflite.la
Error: Unbrewed .pc files were found in /usr/local/lib/pkgconfig.
If you didn't put them there on purpose they could cause problems when
building Homebrew formulae, and may need to be deleted.

Unexpected .pc files:
/usr/local/lib/pkgconfig/freetype2.pc /usr/local/lib/pkgconfig/ImageMagick.pc /usr/local/lib/pkgconfig/lcms.pc /usr/local/lib/pkgconfig/libpng15.pc /usr/local/lib/pkgconfig/MagickCore.pc /usr/local/lib/pkgconfig/MagickWand.pc /usr/local/lib/pkgconfig/Wand.pc
Error: Unbrewed static libraries were found in /usr/local/lib.
If you didn't put them there on purpose they could cause problems when
building Homebrew formulae, and may need to be deleted.

Unexpected static libraries:
/usr/local/lib/libcharset.a /usr/local/lib/libfreetype.a /usr/local/lib/libjpeg.a /usr/local/lib/liblcms.a /usr/local/lib/libpng15.a /usr/local/lib/libtiff.a /usr/local/lib/libtiffxx.a /usr/local/lib/libwmf.a /usr/local/lib/libwmflite.a
Error: You have uncommitted modifications to Homebrew's core.
Unless you know what you are doing, you should run:
cd /usr/local && git reset --hard
Error: Some directories in your path end in a slash.
Directories in your path should not end in a slash. This can break other
doctor checks. The following directories should be edited:
/usr/local/git/bin/
[/usr/local]$ 
```

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-06-14T07:42:16.583

```
Error: Setting DYLD_LIBRARY_PATH can break dynamic linking. You should probably unset it. Error: Some keg-only formula are linked into the Cellar. Linking a keg-only formula, such as gettext, into the cellar with brew link f will cause other formulae to detect them during the ./configure step. This may cause problems when compiling those other formulae.

Binaries provided by keg-only formulae may override system binaries with other strange results. 
```

这要求您取消设置动态加载库路径。你可以通过找出你设置它的位置并删除它来做到这一点。很可能，您的 ~/.bashrc 或 ~/.bash_profile 中有一行看起来像`export DYLD_LIBRARY_PATH=/some/path:$DYLD_LIBRARY_PATH`

```
You may wish to brew unlink these brews:

libxml2 
```

当 Brew 链接时，它正在为安装创建一个符号链接。这就是你可以拥有python2.6的方式。python2.7 已安装，但`python`将运行其中之一。

`brew unlink libxml2`

```
Error: Unbrewed dylibs were found in /usr/local/lib. If you didn't put them there on purpose they could cause problems when building Homebrew formulae, and may need to be deleted.

Unexpected dylibs: /usr/local/lib/libcharset.1.dylib /usr/local/lib/libfreetype.6.dylib /usr/local/lib/libjpeg.8.dylib /usr/local/lib/liblcms.1.0.19.dylib /usr/local/lib/libMagickCore.4.dylib /usr/local/lib/libMagickWand.4.dylib /usr/local/lib/libpng15.15.dylib /usr/local/lib/libtiff.3.dylib /usr/local/lib/libtiffxx.3.dylib /usr/local/lib/libwmf-0.2.7.1.0.dylib /usr/local/lib/libwmflite-0.2.7.0.1.dylib Error: Unbrewed .la files were found in /usr/local/lib. If you didn't put them there on purpose they could cause problems when building Homebrew formulae, and may need to be deleted.

Unexpected .la files: /usr/local/lib/libcharset.la /usr/local/lib/libfreetype.la /usr/local/lib/libjpeg.la /usr/local/lib/liblcms.la /usr/local/lib/libMagickCore.la /usr/local/lib/libMagickWand.la /usr/local/lib/libpng15.la /usr/local/lib/libtiff.la /usr/local/lib/libtiffxx.la /usr/local/lib/libwmf.la /usr/local/lib/libwmflite.la Error: Unbrewed .pc files were found in /usr/local/lib/pkgconfig. If you didn't put them there on purpose they could cause problems when building Homebrew formulae, and may need to be deleted.

Unexpected .pc files: /usr/local/lib/pkgconfig/freetype2.pc /usr/local/lib/pkgconfig/ImageMagick.pc /usr/local/lib/pkgconfig/lcms.pc /usr/local/lib/pkgconfig/libpng15.pc /usr/local/lib/pkgconfig/MagickCore.pc /usr/local/lib/pkgconfig/MagickWand.pc /usr/local/lib/pkgconfig/Wand.pc Error: Unbrewed static libraries were found in /usr/local/lib. If you didn't put them there on purpose they could cause problems when building Homebrew formulae, and may need to be deleted.

Unexpected static libraries: /usr/local/lib/libcharset.a /usr/local/lib/libfreetype.a /usr/local/lib/libjpeg.a /usr/local/lib/liblcms.a /usr/local/lib/libpng15.a /usr/local/lib/libtiff.a /usr/local/lib/libtiffxx.a /usr/local/lib/libwmf.a /usr/local/lib/libwmflite.a 
```

这些是其他安装的残留文件。您可以删除它们。

`rm FILENAME`

```
Error: You have uncommitted modifications to Homebrew's core. Unless you know what you are doing, you should run: cd /usr/local && git reset --hard 
```

在这里，它告诉您您对 Homebrew 文件进行了修改。幸运的是，Homebrew 存储在 Git 版本控制中，因此您可以恢复这些更改。

`cd /usr/local && git reset --hard`

```
Error: Some directories in your path end in a slash. Directories in your path should not end in a slash. This can break other doctor checks. The following directories should be edited: /usr/local/git/bin/ 
```

PATH 变量是您在命令行中键入程序时计算机搜索程序的地方。你可以看到你的路径`echo $PATH`。

标准规定 PATH 中的所有路径都不应以斜线结尾。因此，自制软件要求您修复它。

`nano ~/.bashrc`或`nano ~/.bash_profile`查找 '/usr/local/git/bin/' 并删除尾部斜杠。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T16:17:12.813

我也是新手。当我第一次尝试时，我得到了一份错误清单。并非所有都*需要*修复才能让我根据需要使用 brew。特别是，我能够忽略

```
Unbrewed * were found in /usr/local/lib 
```

我收到的消息。我相信只有当您使用 brew 安装的软件包会干扰您之前安装的软件包时，这些才是问题（在我的情况下，它是 NTFS-3g，与我未来对 brew 的使用无关）。

# javascript - .prev() 方法不起作用

> ID：10580820
> 
> 赞同：1
> 
> 时间：2012-05-14T09:39:58.213
> 
> 标签：javascript, jquery, html, class

> **可能重复：**
> [jquery 找到最近的同级同级](https://stackoverflow.com/questions/2310270/jquery-find-closest-previous-sibling-with-class)

下面给出的代码运行良好

```
<!DOCTYPE html>
<html>
<head>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
  <div><span>Hello</span></div>

  <p class="selected">Hello Again</p>
  <p>And Again</p>
<script>$("p").prev(".selected").css("background", "yellow");</script>

</body>
</html> 
```

但是当我将 .selected 移到顶部（如下所示）时，它不起作用。谁能告诉我如何让它为我工作并在第二种情况下从 .prev() 方法中获取 .selected 元素而不操作 html

```
<!DOCTYPE html>
<html>
<head>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>

<p class="selected">Hello Again</p>//Moved to top
<div><span>Hello</span></div>

  <p>And Again</p>
<script>$("p").prev(".selected").css("background", "yellow");</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T09:45:26.693

You need to use [`.prevAll()`](http://api.jquery.com/prevAll/) instead of [`.prev()`](http://api.jquery.com/prev/). The latter only checks the immediate predecessor which is `div` in your case. `prevAll()` however checks *all* prececessors so it will find your element. In case you have multiple predecessors matching your selector, use `.prevAll('.selected').first()` to get only the nearest one.

Demo: [http://jsfiddle.net/ThiefMaster/GnEK5/](http://jsfiddle.net/ThiefMaster/GnEK5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T09:41:41.427

你可以试试

```
$('p').prevAll('.selected'); 
```

# c++ - 使用小数组制作长向量（列矩阵）

> ID：10580822
> 
> 赞同：0
> 
> 时间：2012-05-14T09:40:06.263
> 
> 标签：c++, opencv

我正在尝试制作一个包含数组元素的向量（特征向量）。

假设我在第一次迭代中有一个`arr1`大小数组。`nx1`我必须将此数组元素添加到大小`CvMat`矩阵`featureVect`中，`2*n x 1`.

在下一次迭代中，我有一个`arr2`size数组`nx1`，现在我必须将此数组添加到`featureVect`from row `n+1`to `2*n`（使用从一开始的索引）

假设我有

```
int arr1[4] = {1, 2, 3, 4};
int arr2[4] = {5, 6, 7, 8};

CvMat *featureVect; 
```

现在我希望结果看起来像这样（`featureVect`一列矩阵在哪里）

```
featureVect = {1, 2, 3, 4, 5, 6, 7, 8};// featureVect size is 8x1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T13:15:44.227

如果您将 C++ 与 OpenCV 一起使用，我会推荐该`Mat`课程。然后，

```
Mat featureVect(8,1,CV_32S); //CV_32s <=> int (32-bit signed integer)
const int n = 4;
for(int i = 0; i < n; ++i) 
{
   featureVect.at<int>(i,0)     = arr1[i];
   featureVect.at<int>(i+n,0) = arr2[i];
} 
```

# html - HTML5 Canvas 上下文填充在 Chrome 上不起作用

> ID：10580824
> 
> 赞同：0
> 
> 时间：2012-05-14T09:40:17.707
> 
> 标签：html, google-chrome, canvas, fill

我使用 HTML5 画布创建了一个圆形图案生成器。我已经使用弧线来创建圆圈并将它们随机放置在画布上。另外，我的圆圈填充了鼠标按下时生成的随机颜色。弧形填充在 Firefox 上有效，但在**Chrome**上不显示。我正在使用最新的 Chrome 版本 18。

```
 context.save();
    context.scale(1, 1);
    context.beginPath();
    context.arc(nextX, nextY, radius, 0, 2 * Math.PI, false);
    context.closePath();
    context.fillStyle = color;
    context.lineWidth = 1;
    context.strokeStyle = color;
    context.stroke();
    context.fill();
    context.restore(); 
```

这是现场工作链接 - [http://www.riaxe.com/html5cirpattern/](http://www.riaxe.com/html5cirpattern/)

# sql - 从子查询中多次插入

> ID：10580830
> 
> 赞同：0
> 
> 时间：2012-05-14T09:40:33.650
> 
> 标签：sql, oracle

我有一个查询将返回一些 id。

```
SELECT ID FROM xf_menu WHERE m.modul_id = 13; 
```

然后是一个简单的插入查询

```
INSERT INTO xp_uziv_menu (menu_id, modul_id, right)  VALUES (???, 136, 3); 
```

值 136 和 3 是常数。

我想知道是否可以编写一个查询，其中 id 将从第一个查询传递到插入查询并执行。

我尝试了这种语法，但它不起作用。

```
INSERT INTO 
     xp_uziv_menu (menu_id, modul_id, right)  
VALUES 
     (SELECT ID FROM xf_menu WHERE m.modul_id = 13, 136, 3); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T09:43:08.837

也许是这样的：

```
INSERT INTO xp_uziv_menu (menu_id, modul_id, right)   
SELECT 
    ID,
    136,
    3 
FROM xf_menu WHERE m.modul_id = 13; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T09:42:01.817

试试这种方式：

```
INSERT INTO xp_uziv_menu (menu_id, modul_id, right)  
SELECT ID, 136, 3 FROM xf_menu WHERE m.modul_id = 13; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T09:45:05.803

尝试：-

```
INSERT INTO xp_uziv_menu
 SELECT ID, modul_id, 3 Where id = 13 
```

# python - 如何在 python 中基于 gevent 的程序中使用 mysql？

> ID：10580835
> 
> 赞同：4
> 
> 时间：2012-05-14T09:41:24.137
> 
> 标签：python, mysql, gevent

我发现 ultramysql 符合我的要求。但它没有文档，也没有windows二进制包。

我有一个非常依赖互联网下载和 mysql 插入的程序。所以我使用 gevent 来解决多下载任务的问题。在我下载网页并解析网页后，我可以将数据插入到 mysql 中。

monkey.patch_all() 是否使 mysql 操作异步？

谁能告诉我正确的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T01:23:10.777

由于其异步功能，Postgres 可能更适合

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T06:54:11.200

我认为一种解决方案是使用 pymysql。由于 pymysql 使用 python 套接字，在猴子补丁之后，应该可以与 gevent 一起使用。

# codeigniter - CodeIgniter 中的模型调用

> ID：10580842
> 
> 赞同：0
> 
> 时间：2012-05-14T09:41:38.803
> 
> 标签：codeigniter

我们`model calls`只能从`controller`吗？我也从视图中进行模型调用，这样做是错误的。请给我建议。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T09:42:51.933

好吧，尽管有可能，但确实鼓励从控制器执行此操作并将数据传递给视图。

为什么？因为诸如数据库请求之类的较重的计算会使站点负载变得有趣。

您可能首先加载页面的打开，然后是菜单，然后由于查询在渲染中运行，而不是之前，比赛需要半秒钟才能弹出。

**所以基本实践：**
让控制器运行繁重的东西，并使用给定的数据简单地渲染视图文件，避免渲染太多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T03:00:19.547

> 控制器充当模型、视图和处理 HTTP 请求和生成网页所需的任何其他资源之间的中介。 [http://codeigniter.com/user_guide/overview/mvc.html](http://codeigniter.com/user_guide/overview/mvc.html)

[http://www.tonymarston.net/php-mysql/model-view-controller.html#together](http://www.tonymarston.net/php-mysql/model-view-controller.html#together)

在MVC结构中，模型是处理数据/数据库的部分，视图是设计/布局，控制器是模型和视图之间的中介。

为了回答您的问题，模型和视图在任何意义上都不应直接连接。CodeIgniter 可能允许您这样做，但这不是 MVC 的用途。

您可能想了解更多关于 MVC 结构的整体信息

# objective-c - 设置 UITextField inputAccessoryView 的 alpha 不起作用

> ID：10580845
> 
> 赞同：1
> 
> 时间：2012-05-14T09:41:43.063
> 
> 标签：objective-c, ios, cocoa, uitextfield

显示`inputAccessoryView`成功，但它完全是黑色的。

```
 _textField = [[UITextField alloc] initWithFrame: CGRectZero]; // update frame later
    _textField.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;

    UIView *inputAccessoryView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 180)];
    inputAccessoryView.backgroundColor = [UIColor blackColor];
    inputAccessoryView.alpha = 0.2;

    _textField.inputAccessoryView = inputAccessoryView; 
```

我对此感到完全困惑......谁能解释它为什么会发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T09:47:32.900

在上一行使用这种 UIColor 方法而不是设置 alpha：-

```
[UIColor  colorWithHue:saturation:brightness:alpha:]; 
```

# c# - RegEx 模式需要在两个不同的组名下返回相同的找到模式

> ID：10580846
> 
> 赞同：1
> 
> 时间：2012-05-14T09:41:53.500
> 
> 标签：c#, regex

目前我正在使用某种在每个级别上都有一个正则表达式的树来将一些任意文本文件解析成一棵树。到目前为止，一切正常，正则表达式结果被传递给子节点以进一步解析文本。为了获得节点和子节点之间的链接，节点本身也有一个名称，在正则表达式中用作组名。因此，在解析了一些文本之后，我将得到一个包含一些命名组的正则表达式，并且节点本身也包含具有相同名称的子节点，这会导致递归结构进行一些任意解析。

现在我遇到了麻烦，为了让下一步中这棵树的处理更容易一些，我需要在我的树中不同节点下的文本文件中的相同信息。由于事实上，这可能有点难以理解，这是一个单元测试，显示了我想要实现的目标：

```
string input = "Some identifier=Just a value like 123";
// ToDo: Change the pattern, that the new group 'anotherName' will contain the same text as 'key'.
string pattern = "^(?'key'.*?)=(?'value'.*)$";
Regex regex = new Regex(pattern);
Match match = regex.Match(input);

var key = match.Groups["key"];
var value = match.Groups["value"];
var sameAsKeyButWithOtherGroupName = match.Groups["anotherName"];

Assert.That(key, Is.EqualTo(sameAsKeyButWithOtherGroupName)); 
```

任何想法如何让这个工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T09:48:39.223

要在 .NET 模式中调用反向引用，您必须指定`\k<name_of_group>`语法。可以试试这个：

```
bool foundMatch = false;
try {
    foundMatch = Regex.IsMatch(subjectString, @"^(?<authorName>(?'key'.*?)=\k<key>)$", RegexOptions.IgnoreCase | RegexOptions.Multiline);
} catch (ArgumentException ex) {
    // Syntax error in the regular expression
} 
```

**解释：**

```
<!--
^(?<authorName>(?'key'.*?)=\k'key')$

Assert position at the beginning of the string «^»
Match the regular expression below and capture its match into backreference with name “authorName” «(?<authorName>(?'key'.*?)=\k'key')»
   Match the regular expression below and capture its match into backreference with name “key” «(?'key'.*?)»
      Match any single character that is not a line break character «.*?»
         Between zero and unlimited times, as few times as possible, expanding as needed (lazy) «*?»
   Match the character “=” literally «=»
   Match the same text as most recently matched by the named group “key” «\k'key'»
Assert position at the end of the string (or before the line break at the end of the string, if any) «$»
--> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T10:20:23.777

在阅读了 Cylians 的回答并向他写了我自己的评论后，我对反向引用做了更多的研究，我的测试将通过这个稍微改变的正则表达式成功：

```
string input = "Some identifier=Just a value like 123";
string pattern = @"^(?'key'.*?)(?'anotherName'\k<key>)=(?'value'.*)$";
Regex regex = new Regex(pattern);
Match match = regex.Match(input);

var key = match.Groups["key"];
var value = match.Groups["value"];
var sameAsKeyButWithOtherGroupName = match.Groups["anotherName"];

Assert.That(key, Is.EqualTo(sameAsKeyButWithOtherGroupName)); 
```

所以结论很简单：如果你需要在另一个名称下的同一个组，只需声明这个组并将另一个组的内容用作模式字符串。

# c# - 窗口服务因错误而自动停止？

> ID：10580851
> 
> 赞同：1
> 
> 时间：2012-05-14T09:42:05.357
> 
> 标签：c#, .net, windows-services

我有一个 24*7 运行的 Windows 服务。该服务使用 Renci.SshNet（第三方 dll）连接到 sftp 服务器并下载和上传文件。

我在事件查看器中获得了以下信息。我检查了日志文件，发现当这个错误出现时，与 SFTP 服务器相关的代码没有运行。

我已经在 try catch 块中编写了所有代码，因此每个错误都记录到日志文件中。

由于此错误，Windows 服务停止。

我想知道这个问题的根本原因以及如何修改代码，这样我的服务就不会再次自动停止。

```
Log Name:      Application
Source:        .NET Runtime
Date:          5/12/2012 10:49:12 AM
Event ID:      1026
Task Category: None
Level:         Error
Keywords:      Classic
User:          N/A
Computer:      FedEx-EDI-01
Description:
Application: Ess.SupplyChainService.exe
Framework Version: v4.0.30319
Description: The process was terminated due to an unhandled exception.
Exception Info: System.Net.Sockets.SocketException
Stack:
   at Renci.SshNet.Session.WaitHandle(System.Threading.WaitHandle)
   at Renci.SshNet.Channels.Channel.Dispose(Boolean)
   at Renci.SshNet.Channels.ChannelSession.Dispose(Boolean)
   at Renci.SshNet.Channels.Channel.Dispose()
   at Renci.SshNet.Sftp.SubsystemSession.Dispose(Boolean)
   at Renci.SshNet.Sftp.SftpSession.Dispose(Boolean)
   at Renci.SshNet.Sftp.SubsystemSession.Finalize()

Event Xml:
<Event xmlns="http://schemas.microsoft.com/win/2004/08/events/event">
  <System>
    <Provider Name=".NET Runtime" />
    <EventID Qualifiers="0">1026</EventID>
    <Level>2</Level>
    <Task>0</Task>
    <Keywords>0x80000000000000</Keywords>
    <TimeCreated SystemTime="2012-05-12T14:49:12.000Z" />
    <EventRecordID>3723</EventRecordID>
    <Channel>Application</Channel>
    <Computer>FedEx-EDI-01</Computer>
    <Security />
  </System>
  <EventData>
    <Data>Application: Ess.SupplyChainService.exe
Framework Version: v4.0.30319
Description: The process was terminated due to an unhandled exception.
Exception Info: System.Net.Sockets.SocketException
Stack:
   at Renci.SshNet.Session.WaitHandle(System.Threading.WaitHandle)
   at Renci.SshNet.Channels.Channel.Dispose(Boolean)
   at Renci.SshNet.Channels.ChannelSession.Dispose(Boolean)
   at Renci.SshNet.Channels.Channel.Dispose()
   at Renci.SshNet.Sftp.SubsystemSession.Dispose(Boolean)
   at Renci.SshNet.Sftp.SftpSession.Dispose(Boolean)
   at Renci.SshNet.Sftp.SubsystemSession.Finalize()
</Data>
  </EventData>
</Event> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T09:46:13.357

You got a socket exception there - the stack trace you posted doesn't contain enough information as to why this happened.

Since the exception was not handled, the process terminated and of course the service stopped as result.

You need to find out why the exception occurred - add more logging and try to capture the incoming socket data.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-14T09:47:18.403

一个未经处理的异常将使您的流程停止。

一个答案是处理异常，但是：

*   仅仅处理异常并不能确保进程处于良好状态。
*   有一小组`StackOverflowException`无法捕获的异常（例如 ）：进程无法可靠地返回到已知状态。

或者：

1.  配置服务（通过`Services.msc`）在出错时重新启动，
2.  配置一个工具，如`adplus`（来自 Windows 调试工具）以在失败时进行进程转储。
3.  使用这些进程转储来修复基础错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T10:00:15.380

根据您提供的堆栈跟踪，由于垃圾收集在终结线程中引发了异常（请参阅堆栈跟踪中的“at Renci.SshNet.Sftp.SubsystemSession.Finalize”行）。

因为您无法捕获此异常，所以它会变得无人处理并停止您的进程。
这就是为什么“代码没有运行与 SFTP 服务器相关的”。

此外，如果您更仔细地查看堆栈跟踪，则会发现“在 Renci.SshNet.Channels.Channel.Dispose()”行。这条线意味着，第 3 方库开发人员试图在最终确定期间释放**托管**资源。在极少数情况下，这很有用。但是，与此同时，它非常危险且容易出错。

您应该联系库开发人员。
作为临时解决方法，您可以设置服务重启。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T09:56:05.737

如果存在未处理的异常，Windows 服务将停止像*任何其他应用程序一样工作，这就是您的情况。*尝试调试代码（让服务作为控制台应用程序运行是我的策略，但您也可以使用附加到进程）来检查异常发生的**原因**，并正确处理它：服务应该以某种可靠的方式恢复，错误重启选项和朋友应该被用作极端的解决方案，例如，如果你不拥有代码。

# file - 如何使用 TortoiseSVN 获取特定版本下的文件

> ID：10580852
> 
> 赞同：0
> 
> 时间：2012-05-14T09:42:08.777
> 
> 标签：file, tortoisesvn, version

嗨，现在我开始使用 TortoiseSVN，在此之前我使用的是 CVS。

假设我们在同一个项目上有并发更改，并且每个更改需要在不同的时间发布。

在 CVS 中，当我们需要提交一个文件时，我们会在消息文本框中写下一些消息（假设我输入了 CR00001），然后当我们部署应用程序时，我们只会得到所有消息等于 ='CR0001' 的文件。所以我们不用担心发布错误的版本。

我有办法在 TortoiseSVN 中做到这一点吗？

请帮忙，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T04:18:06.673

您总是可以使用 TortoiseSVN 更新到特定的版本。

但是，对于您正在尝试做的事情，请考虑创建代码的 RELEASE 分支，然后使用[svnmerge](http://www.orcaware.com/svn/wiki/Svnmerge.py)来管理特定变更集的升级。

# mysql - mysql sql distinct与连接两个表

> ID：10580853
> 
> 赞同：1
> 
> 时间：2012-05-14T09:42:14.623
> 
> 标签：mysql, sql, join, distinct

我有两个mysql表，表`event`和表`eventvenue`。

我想从场地获得其他活动。

--------------表`event`：---------------

```
id_e
id_event
title
content 
```

-------------- 表`eventvenue`：--------------

```
id_ev
id_event_ev
id_location_ev 
```

我使用 join 从场地获取其他事件：

```
SELECT * 
FROM eventvenue 
JOIN event ON eventvenue.id_event_ev = event.id_event 
WHERE eventvenue.id_location_ev=1 
```

结果是：

```
id_ev id_event_ev id_location_ev id_e id_event 标题内容  
----- ----------- -------------- ---- -------- ------ -- ----------
1 2 1 2 2 事件A aaaaaaaaaaaa
2 2 1 2 2 事件A aaaaaaaaaaaa
1 4 1 4 4 事件B bbbbbbbbb
1 9 1 9 9 事件C cccccccc
3 5 1 5 5 事件5 555555

```

输出包含两行具有相同`id_event_ev`/`id_event`值的`2`。

如何仅显示每个位置**的不同事件 ID？**像这样：

```
id_ev id_event_ev id_location_ev id_e id_event 标题内容  
----- ----------- -------------- ---- -------- ------ -- ----------
1 2 1 2 2 事件A aaaaaaaaaaaa
1 4 1 4 4 事件B bbbbbbbbb
1 9 1 9 9 事件C cccccccc
3 5 1 5 5 事件5 555555

```

注意：`id_ev`不重要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T10:20:05.373

试试这个代码

```
SELECT * 
FROM eventvenue 
JOIN event ON eventvenue.id_event_ev = event.id_event 
WHERE eventvenue.id_location_ev=1
GROUP BY event.id_event, eventvenue.id_event_ev 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T09:49:14.527

事实上，你只是想忽略`id_ev`它，或者得到它的最低值。

这让你需要

```
SELECT DISTINCT

-- maybe drop next line
MIN(id_ev) AS id_ev, 
-- maybe drop next line

id_event_ev, id_location_ev, id_e, id_event, title, content 

FROM eventvenue 
INNER JOIN event ON eventvenue.id_event_ev = event.id_event 
WHERE eventvenue.id_location_ev=1

-- Drop next line if you dropped line above
GROUP BY eventvenue.id_ev 
```

# parameters - 是否可以将参数传递给 F# 模块？

> ID：10580854
> 
> 赞同：4
> 
> 时间：2012-05-14T09:42:16.950
> 
> 标签：parameters, f#, module

我是 F# 新手，正在学习基础知识。

我有两个模块。一种用于树数据结构的通用结构，称为`Tree`：

```
module Tree

let rec getDescendants getChildren node  = 
    seq { yield node
          for child in getChildren node do 
            yield! getDescendants getChildren child }

let isLeaf getChildren node = Seq.isEmpty (getChildren node)

let getLeaves getChildren node = getDescendants getChildren node  
                               |> Seq.filter (isLeaf getChildren) 
```

如您所见，所有函数都有一个`getChildren`参数，该参数是一个枚举给定类型节点的子节点的函数。

第二个模块处理 XML 树的更具体的情况：

```
module XmlTree

open System.Xml.Linq

let getXmlChildren (node : XElement) = node.Elements()

let getDescendants = Tree.getDescendants getXmlChildren 
let getLeaves = Tree.getLeaves getXmlChildren 
let isLeaf = Tree.isLeaf getXmlChildren 
```

`getXmlChildren`为 XML 节点定义了一个特定的函数并将其传递给 curried`Tree`函数。

现在有大量的代码重复。

有没有可能做以下事情？（伪代码）

```
module XmlTree = Tree with getChildren = fun (node : XElement) -> node.Elements() 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-14T11:22:12.480

F# 不支持[仿函数](https://stackoverflow.com/questions/1426239/can-ml-functors-be-fully-encoded-in-net-c-f)，因此您不能将参数传递给 F# 模块。在您的示例中，将生成节点子节点的函数传递给对象构造函数就足够了：

```
type Tree<'T>(childFn: 'T -> 'T seq) =
    let getChildren = childFn

    member x.getDescendants node  = 
        seq { yield node
              for child in getChildren node do 
                yield! x.getDescendants child }

    member x.isLeaf node = node |> getChildren |> Seq.isEmpty
    member x.getLeaves node = node |> x.getDescendants |> Seq.filter x.isLeaf

// Type usage
open System.Xml.Linq
let xmlTree = new Tree<XElement>(fun x -> x.Elements()) 
```

对于更复杂的情况，[继承](http://msdn.microsoft.com/en-us/library/dd233225.aspx)是要走的路。特别是，您可以`Tree<'T>`使用抽象成员声明为抽象类`getChildren`，并在子类中覆盖该方法`XmlTree`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-14T09:58:42.380

例如，您不用模块执行此操作，而是使用泛型执行此操作

**编辑**：

```
type tree<'t>(Children:seq<tree<'t>>)=

    member x.isLeaf()  = Seq.isEmpty (Children )

    member x.getLeaves() = 
        getDescendants Children
        |> Seq.filter (fun x -> x.isLeaf()) 
```

我省略了 getdescendants，但这应该足够了。此外，某些类型注释不是必需的，但会显示正在发生的事情

# c# - WCF 返回错误的 JSON

> ID：10580855
> 
> 赞同：0
> 
> 时间：2012-05-14T09:42:18.740
> 
> 标签：c#, json, wcf

我有一个必须返回 JSON 的 wcf 服务。我的代码如下所示：

```
public String areaGetStreetTypes(int city_id, int language_id)
        {
            string json = "";
            string responseList = "{\"triname\":\"IMP\",\"name\":\"IMPASSE\"}";
            if (responseList.Length != 0){
                string responseStatusJSON = "{\"status\":0, \"message\":\"Success !!!\"}";
                json += "{\"responseList\":[" + responseList + "],";
                json += "\"responseStatus\":" + responseStatusJSON + "}";
            }
            else{
                string responseStatusJSON = "{\"status\":1, \"message\":\"Error !!!\"}";
                json += responseStatusJSON;
            }
            return json;
        }

//my interface looks like
[OperationContract]
        [WebInvoke(Method = "POST", UriTemplate = "areaGetStreetTypes", ResponseFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.Wrapped)]        
        String areaGetStreetTypes(int city_id, int language_id); 
```

原始格式的响应：

> {"areaGetStreetTypesResult":"{\"responseList\":[{\"triname\":\"IMP\",\"name\":\"IMPASSE\"}],\"responseStatus\":{\"状态\":0, \"消息\":\"成功!!!\"}}"}

我使用 php 脚本进行测试。第一次解码后：

> 标准类对象（
> 
> ```
> [areaGetStreetTypesResult] => {"responseList":[{"triname":"IMP","name":"IMPASSE"}],"responseStatus":{"status":0, "message":"Success !!!"}} 
> ```
> 
> )

只有在我的第二个 json_decode 之后，我才得到我想要的：[GOOD JSON Response](http://pastebin.com/QDUUASma)

我可以在我的服务中进行哪些更改以第一次获得良好的 JSON？我只想解码一次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T10:05:40.553

你 JSON'ing 两次 - 一次是在你的方法中，第二次是你告诉 WCF 在 WebInvoke 属性中使用 JSON 序列化。

为什么不制作更多合约并返回它们，而不是手动构造结果字符串？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T10:17:39.237

您可以创建一个可以返回的类对象，如下所示：

```
namespace Rest
{
    public class JsonRes
    {
        public ResponseList ResponseList { get; set; }
        public ResStatus ResponseStatus { get; set; }

    }
    public class ResponseList
    {
        public string triName { get; set; }
        public string name { get; set; }
    }
    public class ResStatus
    {
        public string status { get; set; }
        public string message { get; set; }
    }

} 
```

WCF 框架对 JSON 进行序列化。

如果您有从 db 动态构建的 json 字符串，则尝试查找是否可以获得在所有情况下都足够的通用对象。就像拥有一个包含列名及其值的对象列表，然后将完整列表传回给客户端。

# java - 如何让 Java 反映到超类中的点字段？不仅仅是实际的班级

> ID：10580866
> 
> 赞同：24
> 
> 时间：2012-05-14T09:42:40.163
> 
> 标签：java, oop, reflection, audit

我最近改变了我的模式，所以我的类从一个超类继承，问题是我的比较方法生成审计日志，使用 Java 反射，现在只循环通过子类的字段，而不是超类，是有没有办法获得所有的FIELDS？还是我需要将其转换为超级类.....？

下面是我的方法：

```
public static <T> String GenerateChangeLogForEntity(T old, T updated) {
        String text = "";
        try {
            Field[] fields = old.getClass().getDeclaredFields();
            if(fields != null) {
                BaseController.getLogger().info("Z1 num fields:"+fields.length);
                for (Field field : fields) {
                    if(field.isAnnotationPresent(Column.class)) {
                        String fieldName = field.getName();
                        BaseController.getLogger().info(field.getName());
                        if(field.isAnnotationPresent(Variation.class)) {
                            Variation v = field.getAnnotation(Variation.class);
                            fieldName = v.friendlyName();
                        }
                        field.setAccessible(true);
                        if(field.get(old) != null && field.get(updated) != null) {
                            if(!(field.get(old)).equals(field.get(updated))) {
                                text += "<p><span class=\"field-name\">"+fieldName+"</span> changed from: <strong>"+GetFriendlyFieldValueForChangeLog(field.get(old))+"</strong>  to: <strong>"+GetFriendlyFieldValueForChangeLog(field.get(updated)) + "</strong></p>";
                            }
                        }
                        if(field.get(old) == null && field.get(updated) != null) {
                            text += "<p><span class=\"field-name\">"+fieldName+"</span> changed from: <strong>empty</strong> to: <strong>"+GetFriendlyFieldValueForChangeLog(field.get(updated)) + "</strong></p>";
                        }
                        if(field.get(old) != null && field.get(updated) == null) {
                            text += "<p><span class=\"field-name\">"+fieldName+"</span> changed from: <strong>"+GetFriendlyFieldValueForChangeLog(field.get(updated))+"</strong> to <strong>empty</strong>" + "</p>";
                        }
                        field.setAccessible(false);
                    }
                }
            }
        } catch(IllegalAccessException e) {}
        return text;
    } 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-05-14T09:45:52.000

您可以使用`this.getClass().getSuperClass()`直到此`getSuperClass()`方法返回 null 来获取父字段。

所以，最好的办法是分解你的代码。实现一个将列表作为参数并在其中执行逻辑部分的方法，以及一个通过循环`Field`搜索字段的 main 方法。`while(superClass != null)`

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-12-06T23:06:50.987

虽然已经很晚了，但我正在添加我的建议，因为它是一个很好的解决方案。

Spring 框架提供了一个很好的 Util 类 `org.springframework.util.ReflectionUtils`，这个类有几个我们可以使用的方法。为了从 objectClass 和 superClasses 中获取属性的 Field 实例，我使用`ReflectionUtils.findField(clazz, fieldName);`

了 util 的好处是它不会引发异常。相反，它为无效的返回 null，因此您可以优雅地处理它。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-10-03T07:27:00.137

Apache Commons Lang 提供了一个[FieldUtils.getAllFields()](https://commons.apache.org/proper/commons-lang/apidocs/index.html?org/apache/commons/lang3/reflect/FieldUtils.html)方法，它是 @sp00m 算法的实现。

# android - Android - 读取 SD 文件夹的自定义库

> ID：10580867
> 
> 赞同：0
> 
> 时间：2012-05-14T09:42:43.853
> 
> 标签：android, android-gallery, classcastexception

我正在尝试实现一个画廊，该画廊显示位于外部存储中的特定文件夹中的所有图像。

这是我的代码：

```
public class ExistingPicGallery extends Activity {

    private Cursor cursor;
    private int columnIndex;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.gallery);
        Gallery g = (Gallery) findViewById(R.id.gallery);
        String[] projection = { MediaStore.Images.ImageColumns._ID,
                MediaStore.Images.Thumbnails.IMAGE_ID,
                MediaStore.Images.Thumbnails.KIND };
        // Create the cursor pointing to the SDCard
        String selection = MediaStore.Images.Thumbnails.KIND + "=" + // Select
                                                                        // only
                                                                        // mini's
                MediaStore.Images.Thumbnails.MINI_KIND;
        cursor = managedQuery(
                MediaStore.Images.Thumbnails.EXTERNAL_CONTENT_URI, projection,
                selection, null, null);
        // Get the column index of the image ID
        columnIndex = cursor.getColumnIndexOrThrow(MediaStore.Images.Media._ID);
        g.setAdapter(new ImageAdapter(this));

        g.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView parent, View v, int position,
                    long id) {
                Toast.makeText(ExistingPicGallery.this, "" + position,
                        Toast.LENGTH_SHORT).show();
            }
        });

    }

    private class ImageAdapter extends BaseAdapter {
        int mGalleryItemBackground;

        private Context mContext;

        File folder;
        String[] allFiles;

        public ImageAdapter(Context c) {
            mContext = c;
            folder = new File(Environment.getExternalStorageDirectory()
                    .toString() + "/CuantoComic");
            allFiles = folder.list();
            int y = 0;

        }

        public int getCount() {
            return allFiles.length;
        }

        public Object getItem(int position) {
            return position;
        }

        public long getItemId(int position) {
            return position;
        }

        public View getView(final int position, View convertView,
                ViewGroup parent) {

            ImageView myImageView = new ImageView(mContext);

            if (convertView != null)
                myImageView = (ImageView) convertView;
            else {
                myImageView = new ImageView(mContext);
                myImageView.setLayoutParams(new GridView.LayoutParams(60, 60));
                myImageView.setAdjustViewBounds(false);
                myImageView.setScaleType(ImageView.ScaleType.CENTER_CROP);

            }

            Bitmap bitmapImage = BitmapFactory.decodeFile(folder + "/"
                    + allFiles[position]);
            BitmapDrawable drawableImage = new BitmapDrawable(bitmapImage);
            myImageView.setImageDrawable(drawableImage);

            return myImageView;

        }

    }

} 
```

和xml：

```
<?xml version="1.0" encoding="utf-8"?>

<Gallery xmlns:android="http://schemas.android.com/apk/res/android" android:id="@+id/gallery"
       android:layout_width="fill_parent"
       android:layout_height="wrap_content"
/> 
```

我在 LogCat 中收到以下错误：

```
05-14 11:37:50.311: E/AndroidRuntime(6904): FATAL EXCEPTION: main
05-14 11:37:50.311: E/AndroidRuntime(6904): java.lang.ClassCastException: android.widget.AbsListView$LayoutParams
05-14 11:37:50.311: E/AndroidRuntime(6904):     at android.widget.Gallery.setUpChild(Gallery.java:769)
05-14 11:37:50.311: E/AndroidRuntime(6904):     at android.widget.Gallery.makeAndAddView(Gallery.java:738)
05-14 11:37:50.311: E/AndroidRuntime(6904):     at android.widget.Gallery.layout(Gallery.java:622)
05-14 11:37:50.311: E/AndroidRuntime(6904):     at android.widget.Gallery.onLayout(Gallery.java:336)
05-14 11:37:50.311: E/AndroidRuntime(6904):     at android.view.View.layout(View.java:7034)
05-14 11:37:50.311: E/AndroidRuntime(6904):     at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
05-14 11:37:50.311: E/AndroidRuntime(6904):     at android.view.View.layout(View.java:7034)
05-14 11:37:50.311: E/AndroidRuntime(6904):     at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1249)
05-14 11:37:50.311: E/AndroidRuntime(6904):     at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1125)
05-14 11:37:50.311: E/AndroidRuntime(6904):     at android.widget.LinearLayout.onLayout(LinearLayout.java:1042)
05-14 11:37:50.311: E/AndroidRuntime(6904):     at android.view.View.layout(View.java:7034)
05-14 11:37:50.311: E/AndroidRuntime(6904):     at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
05-14 11:37:50.311: E/AndroidRuntime(6904):     at android.view.View.layout(View.java:7034)
05-14 11:37:50.311: E/AndroidRuntime(6904):     at android.view.ViewRoot.performTraversals(ViewRoot.java:1049)
05-14 11:37:50.311: E/AndroidRuntime(6904):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1744)
05-14 11:37:50.311: E/AndroidRuntime(6904):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-14 11:37:50.311: E/AndroidRuntime(6904):     at android.os.Looper.loop(Looper.java:144)
05-14 11:37:50.311: E/AndroidRuntime(6904):     at android.app.ActivityThread.main(ActivityThread.java:4937)
05-14 11:37:50.311: E/AndroidRuntime(6904):     at java.lang.reflect.Method.invokeNative(Native Method)
05-14 11:37:50.311: E/AndroidRuntime(6904):     at java.lang.reflect.Method.invoke(Method.java:521)
05-14 11:37:50.311: E/AndroidRuntime(6904):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
05-14 11:37:50.311: E/AndroidRuntime(6904):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
05-14 11:37:50.311: E/AndroidRuntime(6904):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T09:47:29.833

> myImageView.setLayoutParams(new GridView.LayoutParams(60, 60));

此行导致 classcastEx。你确定你有

`import android.widget.Gallery.LayoutParams;`

**代替**

`import android.widget.AbsListView.LayoutParams;`

# html - 在 HTML 中使用文件路径作为超链接

> ID：10580875
> 
> 赞同：0
> 
> 时间：2012-05-14T09:43:10.647
> 
> 标签：html, c, file, hyperlink, cgi

我想知道我是否可以使用 pdf Source[as hyperlink] 作为系统中与脚本运行目录相关的文件路径。

部分代码是。

```
 <a href="../pdfs/sample.pdf">pdf</a> 
```

我正在使用 C 语言中的 CGI 脚本生成此 HTML，我的 pdf 文件位于与我的脚本运行目录相关的 ../pdfs/sample.pdf 中。并且通过pdf源意味着我想在单击pdf时显示pdf sample.pdf，如上面的示例代码所示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T09:53:50.013

浏览器不关心也不知道资源是如何生成的。你可以通过 CGI 用 C 生成它，你可以让服务器只交出一个静态文件。就浏览器而言没有区别，它发出一个 HTTP 请求并收到一个 HTTP 响应。

在 HTML 文档中解析相对 URI 的规则是相同的。浏览器将其与基本 URI（在包含链接的文档中指定`<base>`或者是包含链接的文档的 URI）进行比较。

如果它解析为服务器将为其提供 PDF 的 URI，那么它将起作用。

由于 URI 并不总是直接映射到文件系统，因此无法说这是否适用于您的情况（因为您的问题仅涉及文件系统）。如果这是在我执行 CGI 程序的服务器之一上，那么它将无法工作 - 因为我将它们保存在一个不是 webroot 子目录的 cgi-bin 中，因此无法访问 pdf完全是 HTTP。您的服务器可能配置不同。

# jquery-mobile - jQuery Mobile is not reloading my page properly

> ID：10580879
> 
> 赞同：1
> 
> 时间：2012-05-14T09:43:25.427
> 
> 标签：jquery-mobile

Ok, this is odd: First I open page1.html. From page1.html I go to page2.html by link and then back to page1.html via another link. These links are just regular links with relative path and not `rel="back"` kind of link.

Problem is: jQuery Mobile will cache page1.html (though it doesn't cache page2.html) If I add rel="external" to the link of page2.html then the page1 is refresh, but together, all resources is also reloaded (which not what I want).

I only want the html of page1.html to be reloaded. I added `data-cache=false` and `data-dom-cache=false` to page1.html annotation but it doesn't help.

How can I have jQuery Mobile not caching page1.html with the given scenario?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:01:43.017

我正在使用基于 data-dom-cache 属性手动删除页面的解决方法。您需要为**pagehide**事件添加事件处理程序并检查页面数据的**domCache**属性

```
$(document).on('pagehide', function(event, ui){
          var page = $(event.target);
          var pageData = page.data(); // get all the data attributes (remove the data prefix and format to camel case)
          if(pageData.domCache == false){
              console.log("Removing Page (id: " + page.attr('id') + ", url: " + pageData.url + ")"); //Log to console for debugging
              page.remove(); // remove the page
        }
    }); 
```

# android - 使用 CursorLoader 进行分组

> ID：10580883
> 
> 赞同：10
> 
> 时间：2012-05-14T09:43:44.060
> 
> 标签：android, android-cursorloader

如何`GROUP BY`为我的 CursorLoader 定义查询？

`CursorLoader`我看到的 a 的两个构造函数采用 single`Context`或 a `Context`, `Uri`, `projection`, `selection`, `selectionArgs`and `sortOrder`。

但是没有`groupBy`。

（我正在使用 Android 2.3 设备的支持包）

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-11T04:23:44.620

并不真地...

您可以为特定的 GROUP BY 子句定义特定的 URI。

例如，如果您有一个可能按性别分组的表 mPersonTable，您可以定义以下 URI：

```
PERSON
PERSON/#
PERSON/GENDER 
```

查询时，在查询之间切换，以便您可以按参数添加组：

```
public Cursor query(Uri uri, String[] projection, String selection,
            String[] selectionArgs, String sortOrder) {
   String groupBy = null;
   switch (mUriMatcher.match(uri)) {
      case PERSON_ID:
         ...
         break;
      case PERSON_GENDER:
         groupBy = GENDER_COLUMN;
      case PERSON:
        SQLiteQueryBuilder builder = new SQLiteQueryBuilder();
        builder.setTables(mPersonTable);
        builder.setProjectionMap(mProjectionMap);
        return builder.query(db, projection, selection, selectionArgs, groupBy, having, sortOrder, limit);
      default:
         break;
   }
} 
```

事实上，您可以将任何类型的参数传递给您的查询

Obs.：使用 UriMatcher 将 uri 与您的查询实现相匹配。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-10-27T12:05:12.433

**您可以使用选择**参数添加 Group by

```
new CursorLoader(context,URI,
                        projection,
                                selection+") GROUP BY (coloum_name",
                        null,null); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-09T05:40:57.040

显然（这有点尴尬）[文档](http://developer.android.com/reference/android/content/CursorLoader.html)中的第一行清楚地说明`CursorLoader`了`ContentResolver`要检索`Cursor`. 虽然`ContentResolver`没有公开任何方法`GROUP BY`，因此也没有办法`CursorLoader`公开这样的功能。

所以对我自己的问题的明显答案是：***你不能！***

# java - StreamCorruptedException: invalid type code: 00

> ID：10580885
> 
> 赞同：0
> 
> 时间：2012-05-14T09:43:57.803
> 
> 标签：java, exception, serialization, stream

Server code:

```
while (true) {                                  
    Socket sock = serv.accept(); 
    try {
        new ClientSession(sock, outQueue, activeSessions);
        System.out.println("CS");
    } catch (IOException e) {
        System.out.println("Sock error");
        sock.close();
    }
} 
```

ClientSession:

```
class ClientSession extends Thread {
private Socket socket;
private OutboundMessages outQueue;
private ActiveSessions activeSessions;
private ObjectInputStream netIn;
private ObjectOutputStream netOut;
int n = 0;
boolean inGame = false;
boolean ready = false;
Player p;

public ClientSession(Socket s, OutboundMessages out, ActiveSessions as)
        throws IOException {
    socket = s;
    outQueue = out;
    activeSessions = as;
    netOut = new ObjectOutputStream(socket.getOutputStream());
    netOut.flush();
    netIn = new ObjectInputStream(socket.getInputStream());
    System.out.println("ClientSession " + this + " starts...");
    while (true) {
        Object nameMsg = null;
        try {
            nameMsg = netIn.readObject();
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        }
        if (nameMsg instanceof NameMessage) {
            this.setName(((NameMessage) nameMsg).name);
            break;
        }
    }
    start();
}

public void run() {
    try {
        activeSessions.addSession(this);
        while (true) {
            Object inMsg = null;
            try {
                try {
                    inMsg = netIn.readObject();
                } catch (ClassNotFoundException e) {
                    e.printStackTrace();
                }
            } catch (IOException e) {
                e.printStackTrace();
            }
            if (inMsg instanceof ReadyMessage) {
                ready = true;
            } else if (inMsg instanceof DirMessage) {
                p.setDir(((DirMessage)inMsg).dir);
            }

        }
    } finally {
        try {
            socket.close();
        } catch (IOException e) {
        }
    }
}

public void sendMessage(Message msg) {
    try {
        if (!socket.isClosed()) {
            netOut.writeObject(msg);
            netOut.flush();
        } else {
            throw new IOException();
        }
    } catch (IOException eee) {
        try {
            socket.close();
        } catch (IOException ee) {
        }
    }
} 
```

Creating input and output on client side:

```
public void connect() {
    try {
        InetAddress serverAddr = InetAddress.getByName(serverName);
        try {
            System.out.println("Connecting with "
                    + serverAddr.getHostName() + ":" + port);
            socket = new Socket(serverAddr, port);

            try {
                System.out.println("Connected to "
                        + serverAddr.getHostName());
                netOut = new ObjectOutputStream(socket.getOutputStream());
                netOut.flush();
                netIn = new ObjectInputStream(socket.getInputStream());
                netOut.writeObject(new NameMessage(name));
                netOut.flush();
            } finally {

            }

        } catch (ConnectException e) {
            System.out.println("Cannot connect to server");

        } catch (IOException e) {
            System.out.println("Input error");
        }

    } catch (UnknownHostException e) {
        System.out.println("Unknown server: " + e.getMessage());
    }
} 
```

receiver on client end:

```
public void run() {
    while (true) {
        Object a = null;

            try {
                a = netIn.readObject();
                netIn.reset();
            } catch (ClassNotFoundException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }

        if (a != null && a instanceof CoordMessage) {
            setXY((CoordMessage)a);
        }
    }
} 
```

Stacktrace:

```
java.io.StreamCorruptedException: invalid type code: 00
at java.io.ObjectInputStream.readObject0(Unknown Source)
at java.io.ObjectInputStream.readObject(Unknown Source)
at twoPlayerClient.Receiver.run(Receiver.java:28) 
```

After creating input and output I keep passing them on to other classes and not creating new ones.

I have read other similar questions but can't find an answer to why this keeps happening.

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-14T09:51:56.723

```
 new ClientSession(sock, outQueue, activeSessions); 
```

我认为，每个客户端都有一个新会话，因此您不能使用具有全局范围的流变量。因为它也被其他会话线程使用。

# cmusphinx - PocketSphinx output nothing

> ID：10580886
> 
> 赞同：1
> 
> 时间：2012-05-14T09:44:10.253
> 
> 标签：cmusphinx

I want to do a Chinese speech recognition application. I build a language model（using CMUCLMTK） and an acoustic model base on the tutorial

[http://cmusphinx.sourceforge.net/wiki/tutoriallm](http://cmusphinx.sourceforge.net/wiki/tutoriallm)

[http://cmusphinx.sourceforge.net/wiki/tutorialam](http://cmusphinx.sourceforge.net/wiki/tutorialam)

But I got nothing output while using the

```
pocketsphinx_continuous -hmm ... -lm ... -dict ... 
```

The output just like

```
READY....
Listening...
Recoding is stopped, start...
Stoped listening...
...(lots of INFO)
000000000:(nothing here!)
READY.... 
```

I've checked my wav files' format, it's 16it 16KHz mono. And also use `./scripts_pl/decode/slave.pl` command and the result is 40% Error rate.(My model and training set is very small). My devices are running well because I've test pocketSphinx in English model and it performs very well.

**What other may lead to that strange result?**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T05:03:57.220

> 还有什么可能导致这种奇怪的结果？

由于您没有提供您正在使用的数据文件，因此无法回答您的问题。本教程的故障排除部分说

> 如果您想寻求有关培训的帮助，请**尝试提供培训文件夹**或至少提供 logdir 文件夹。我们很乐意为您提供帮助。

# android - 更改 EditPreference 的 inputType

> ID：10580889
> 
> 赞同：1
> 
> 时间：2012-05-14T09:44:23.780
> 
> 标签：android, input, preferences, preferenceactivity

我想更改我的 EditPreferences 中的 inputType：

```
<PreferenceCategory android:title="Test" >
    <EditTextPreference
        android:key="@string/pref_delay"
        android:summary="Set the delay"
        android:title="preview_delay"
        android:defaultValue="13"
         />
</PreferenceCategory>

<PreferenceCategory android:title="Similarity List" >
    <EditTextPreference
        android:key="@string/pref_songcount"
        android:summary="Set the number of songs)"
        android:title="Songcount"
        android:defaultValue="10" />
    <EditTextPreference
        android:key="@string/pref_similarity"
        android:summary="Enter the minimum percentage"
        android:title="Similarity"
        android:defaultValue="0" />
</PreferenceCategory> 
```

android:inputType="XYZ" 不适用于 EditPreferences。

我怎么还能这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T10:04:42.273

`android:inputType`作品！

它只是没有出现在 Eclipse 的自动完成功能中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T10:17:41.463

EditPreferences 是 inputType 的错误位置。将其放入 EditTextPreference 块中。

如果你的意思是它不适合你：

这将是设置 EditTextPreferences InputType 的基于 java 的方法。

```
 EditTextPreference editTextPreference = findByViewId(R.id.editTextPrefId);
        EditText editText = editTextPreference.getEditText();
        editText.setInputType(InputType.TYPE_CLASS_TEXT); 
```

# c - GTK Segmentation Fault

> ID：10580890
> 
> 赞同：0
> 
> 时间：2012-05-14T09:44:25.907
> 
> 标签：c, gtk, gtk3

I'm new to GTK+ and I get a segmentation fault error when I try to compile my program. I've isolated the cause of the error down to the following lines of code.

```
 GtkTextBuffer *buffer; 
      char buffers[65535];
      struct ip  *ip;          
      .
      .
      .
      ip = (struct ip *)buffers;
      gtk_text_buffer_insert_at_cursor (buffer,ip->ip_protocol, -1); 
```

(ip_protocol is a variable in the struct ip)

I'm trying to insert,at the cursor of a textview,the value of the char,"ip_protocol",situated in "buffers" using a pointer.Unfortunately I have to use a pointer in this case.Can anyone help with rectifying my code?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T09:47:59.517

~~你永远不会初始化你的`buffer`变量（或相关的内容`buffers`），所以当你传递它时它的值是未定义的 do `gtk_text_buffer_insert_at_cursor`。`GtkTextBuffer`在将它传递给函数之前，您需要使其指向 a 。~~（根据您的评论，您在遗漏的代码部分初始化变量，因此本段不适用于您的真实代码）。

此外，您说您的`ip_protocol`变量是 a `char`，但 to 的第二个参数`gtk_text_buffer_insert_at_cursor`应该是一个指针。因此，这会导致分段错误也就不足为奇了。

# javascript - 更改事件不会触发选择列表

> ID：10580893
> 
> 赞同：0
> 
> 时间：2012-05-14T09:44:54.250
> 
> 标签：javascript, jquery, html, ajax, cascadingdropdown

我似乎无法让 jQuery 触发和更改county_id 选择列表的事件。我已经尝试了多个代码片段，但没有一个会触发更改。有任何想法吗？

HTML：

```
<select id="county_id" name="county_id">
    <option value=""></option>
    <option value="1">Somewhere</option>
    <option value="2">Somewhere else</option>
</select>

<select id="vice_county_id" name="vice_county_id"></select> 
```

JS：

```
$(function(ready) {
    $("#county_id").change(
            function() {
                $("#vice_county_id").html("");
                var co_id = $("#county_id > option[@selected]").attr("value");
                if (co_id != 0) {
                    $.getJSON('./vice_county_web_service.php?co_id=' + co_id,
                            function(data) {
                                $.each(data, function() {
                                    $("#vice_county_id").append(
                                            $("<option></option>").val(
                                                    this['value']).html(
                                                    this['name']));
                                });
                            });
                }
            });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T09:48:07.100

足以获得选择框的价值

```
var co_id = $("#county_id").val(); 
```

你应该使用 [on()](http://api.jquery.com/on)

```
$('#county_id').on('change', function() {
  //....
  var co_id = $("#county_id").val(); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T09:48:29.407

尝试：

```
$(document).ready(function(){
    $("#county_id").change(function() {
        $("#vice_county_id").html("");
        var co_id = $(this).val();
        if(county_id != 0) {
            $.getJSON('./vice_county_web_service.php?co_id=' + co_id,function(data) {   
                $.each(data, function() {
                    $("#vice_county_id").append($("<option></option>").val(this['value']).html(this['name']));
                });
            });
        }
    });
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T09:48:51.437

更改`var co_id = $("#county_id > option[@selected]").attr("value");' to 'var co_id = $("#county_id > option:selected").attr("value");'

[http://jsfiddle.net/XvRsV/](http://jsfiddle.net/XvRsV/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T09:49:07.453

事件正在触发，但是这行代码失败了：

```
var co_id = $("#county_id > option[@selected]").attr("value"); 
```

...因为这是一个无效的选择器。在浏览器的 JavaScript 控制台中，您应该会看到`Syntax error, unrecognized expression: [@selected]`.

jQuery 很乐意为您提供价值，只需使用`val`：

```
var co_id = $("#county_id").val(); 
```

[实例](http://jsbin.com/ocihok)| [来源](http://jsbin.com/ocihok/edit)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-14T09:55:51.637

您的代码工作正常意味着代码正确处理了更改事件请参考此[链接](http://jsfiddle.net/PPuCS/)

```
$(function(ready){
            $("#county_id").change(function() {
                $("#vice_county_id").html("test");
                var co_id= $("#county_id").attr("value");
                alert('Value : ' +co_id); 
            if(co_id != 0) {
                $.getJSON('./vice_county_web_service.php?co_id=' + co_id,function(data) {    
                    $.each(data, function() {
                        $("#vice_county_id").append($("<option></option>").val(this['value']).html(this['name']));
                    });
                });
            }
        });

    });​ 
```

仅更改此行，

var co_id= $("#county_id").attr("value");

只需检查您的 ajax 调用是否有效

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-14T09:48:46.547

```
 <select id="county_id" name="county_id" onchange="ChangeCountry();">

function ChangeCountry()
{
   var _countryId = $('#county_id').val();
} 
```

# android - 为什么与 ui 线程的通信只能通过处理程序？

> ID：10580897
> 
> 赞同：1
> 
> 时间：2012-05-14T09:45:06.187
> 
> 标签：android, android-layout

这篇文章[在线程之间通信部分](http://eagle.phys.utk.edu/guidry/android/progressBarExample.html)说

> 如果新线程上的任务希望修改与主 UI 线程关联的视图，则该问题尤其严重，因为严格禁止直接这样做。

为什么禁止/禁止。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T10:31:13.103

请阅读这个，

保持 UI 在 UI 线程上工作，非 UI 在非 UI 线程上工作始终是一个好习惯，因为 HoneyComb 是一个法律。我们总是从专用 UI​​ 线程开始，但是一旦我们创建另一个线程来执行某些非 UI 任务，我们就会放弃专用 UI​​ 线程，并降落在非 UI 线程上，一旦我们完成工作并且想把处理后的Output放到UI线程上，直接不行，因为我们丢失了对UI线程的引用。现在 Handler 有助于获取对创建它的线程的引用。因此，在 onCreate() 中初始化 Handler 是一个很好的做法，然后稍后从非 ui 线程中调用此引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T10:52:44.190

Handler 帮助在 MessageQueue 中对来自工作线程的请求进行排队，以便它们在主线程上按顺序执行。

以下博客文章对于了解更多有关处理程序如何工作的信息非常有帮助：

[Android – UI 环境中的多线程](http://www.aviyehuda.com/2010/12/android-multithreading-in-a-ui-environment/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T10:08:58.480

使用android提供的AsyncTask<>，同步UI和Non-UI线程

AsyncTask<> 中的方法

doInBackground(String...) // 在非 UI 线程上工作

postExecute(String result) // 从非 Ui 线程获取输出和

将输出放回 UI 线程

# list - Prolog 中大小均匀的列表

> ID：10580905
> 
> 赞同：2
> 
> 时间：2012-05-14T09:45:34.860
> 
> 标签：list, prolog

我一直在尝试编写一个谓词来评估列表的大小是否为偶数，并且必须在不计算列表长度或任何算术运算的情况下完成此操作。据说它比计算长度更容易，但我很难考虑如何做到这一点。我猜是一种递归技术，但如果有人能够提供帮助，那就太好了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-14T09:57:36.000

是的，你想要递归。基本情况将是您可以拥有的最小的奇数/偶数列表，然后您只需要弄清楚如何构造递归调用，以便将其归结为基本情况。您可以从想象一个长度为 3 的列表开始，该列表应该为“oddList”返回 true。如果这不是基本情况，那么下一个合乎逻辑的步骤是什么？奇数列表与偶数列表有何不同？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-27T06:49:26.773

**保持[逻辑纯度](/questions/tagged/logical-purity "显示标记为“逻辑纯度”的问题")**！只需像这样进行：

```
evenlength([]).             % smallest list with even length is [] (length=0)
evenlength([_|Xs]) :-
   oddlength(Xs).

oddlength([_|Xs]) :-        % smallest list with odd length is [_] (length=1)
   evenlength(Xs). 
```

`evenlength/1`和的一些简单地面查询`oddlength/1`：

```
?- evenlength([]).
true.
?- oddlength([]).
false.

?- evenlength([1]).
false.
?- oddlength([1]).
true.

?- evenlength([1,2]).
true.    
?- oddlength([1,2]).
false.

?- evenlength([1,2,3]).
false.    
?- oddlength([1,2,3]).
true. 
```

请注意，这些谓词不仅可以*测试*候选列表，还可以*生成*它们：

```
?- evenlength(Xs).
  Xs = []
; Xs = [_A,_B]
; Xs = [_A,_B,_C,_D]
; Xs = [_A,_B,_C,_D,_E,_F]
...

?- oddlength(Xs).
  Xs = [_A]
; Xs = [_A,_B,_C]
; Xs = [_A,_B,_C,_D,_E]
; Xs = [_A,_B,_C,_D,_E,_F,_G]
... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-15T17:32:52.443

使用[元谓词](/questions/tagged/meta-predicate "显示标记为“元谓词”的问题") `foldl/4`和[Prolog lambda](http://www.complang.tuwien.ac.at/ulrich/Prolog-inedit/ISO-Hiord)，我们需要做的就是：

```
evenlength(Xs) :-
   foldl(\_^E^O^(O is \E),Xs,1,1).   % each item in `Xs` flips the "evenness flag" 
```

样品用途：

```
?- evenlength([]).
true.

?- evenlength([_]).
false.

?- evenlength([_,_]).
true.

?- evenlength([_,_,_]).
false.

?- evenlength([_,_,_,_]).
true. 
```

让我们不要忘记最一般的查询！

```
?- evenlength(Xs).
  Xs = []
; Xs = [_A,_B]
; Xs = [_A,_B,_C,_D]
; Xs = [_A,_B,_C,_D,_E,_F] 
... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-01T05:25:53.110

我知道现在回答您的问题为时已晚，但希望这会有所帮助：

查找列表的长度为奇数：

```
oddlength([_]).
oddlength([_,_|R]) :- oddlength(R),!. 
```

查找列表的长度是偶数：

```
evenlength([]).
evenlength([_,_|R]) :- evenlength(R),!. 
```

# c# - 排序列表视图

> ID：10580907
> 
> 赞同：0
> 
> 时间：2012-05-14T09:45:42.690
> 
> 标签：c#, asp.net, listview, data-binding

我有一个要排序的列表视图。我的问题是，当我单击排序列时，仅当我再次在页面加载时绑定数据时才会触发 Onsorting 事件。这意味着在每次页面加载时，我首先必须绑定数据，然后我可以捕获 OnBinding 事件，然后我可以再次重新绑定数据。有一个更好的方法吗。基本上我想要的是仅在 onsorting 事件中绑定数据

```
<asp:ListView ID="TempList" runat="server" OnSorting="TempList_sorting">
    <LayoutTemplate>
        <table >
            <tr>
                <th >
                    <asp:LinkButton runat="server" ID="btnSortVoorletters2" CommandName="Sort" Text="Voorletters"
                        CommandArgument="Voorletters" OnClick="btnSortVoorletters_Click" />
                </th>
            </tr>
              <tr runat="server" id="itemPlaceholder">
            </tr>
        </table>
    </LayoutTemplate>
    <ItemTemplate>
        <tr>
            <td>
                <asp:Label ID="EmpIDLabel" runat="server" Text='<%# Eval("Naam") %>'/>
            </td>
        </tr>
    </ItemTemplate>
    <EmptyDataTemplate> 
    <p>Empty text that will be displayed.</p> 
</EmptyDataTemplate> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T10:22:20.560

看来您总是有约束力，`PageLoad`因此以前提供的订单会丢失。`IsPostback`仅当为假时才绑定。（您需要将 ListView`EnableViewState`设置为 true，这是默认值）。

```
 if(!IsPostback)
 {
   // do the binding
 } 
```

当用户单击“排序”按钮时，将触发该事件，您的事件将相应地对数据进行排序和绑定。

如果页面被重新加载，并且你不重新绑定它就`PageLoad`足够了。

但是，如果由于某种原因您确实需要重新绑定 in `PageLoad`，则您要做的就是将排序存储在`ViewState`,中`HiddenField`，`Session`以便您可以从那里获取值以在绑定之前对数据进行排序`PageLoad`。

您应该获取排序和绑定到新方法的代码，并从排序和`PageLoad`事件中调用它。

# c++ - 基于文件的 C++ 数据库

> ID：10580914
> 
> 赞同：7
> 
> 时间：2012-05-14T09:45:57.273
> 
> 标签：c++, database

我想在我的应用程序中使用数据库。但它不应该是基于服务器的数据库（如 MySQL）。是否有任何基于文件的 C++ 数据库系统？如果您可以建议一个非关系数据库，那就更好了。像基于 XML 文件的...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-14T09:47:21.463

为什么，是的，有。尝试[SQLite](http://www.sqlite.org/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-14T09:48:00.493

你可以试试这个： [ZWinSQL](http://www.it.fht-esslingen.de/~zimmerma/software/ZWinSql.htm)

> 这个 C++ 库提供了一个瘦包装器来使用 DR Hipp 的 SQLite，它是一个基于单个文件的 SQL 数据库。ZWinSql 仅允许您使用标准 SQL 命令创建、修改和查询包含在单个本地文件中的数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T10:31:14.467

如果您不是在寻找关系数据库，也许[http://soprano.sourceforge.net](http://soprano.sourceforge.net)可能适合您。它可以设置为直接使用本地文件

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T19:48:21.047

我不确定您所说的基于文件的数据库是什么意思。例如，Informix 和 MySQL 将它们的数据保存在文件中。

但是，您提到了非关系数据库，所以我建议您从[couchdb](http://couchdb.apache.org/)或[mongoDB](http://www.mongodb.org/)开始。

[SQL lite](http://www.sqlite.org/)是一个优秀的关系数据库，如果您已经习惯了 SQL，恕我直言，这将是一个非常好的选择。我还没有尝试过使用非关系数据库的任何生产代码，但是仅仅看一下关键结构就让我意识到，在我将数据投入安全之前，会涉及到很多超出常规 SQL 数据库表设计的思考。非关系型数据库。

# javascript - document.write() in IE executive order is not the same by others

> ID：10580917
> 
> 赞同：1
> 
> 时间：2012-05-14T09:46:03.060
> 
> 标签：javascript, internet-explorer, document.write

```
 <script>
      document.write("before write h1.js"+"<br/>");
      document.write("<script  src='h" + "1.js'><\/script>");
      document.write("after write h1.js" +"<br/>");
   </script> 
```

* * *

h1.js file:

This is h1.js

* * *

In IE the result will be:

1.  before write h1.js
2.  after write h1.js
3.  This is h1.js

Firefox Chrome Safari Opera:

1.  before write h1.js
2.  This is h1.js
3.  after write h1.js

How could I write a script to make it the same order in all brower.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T09:54:30.217

这应该在所有浏览器中都一样：

```
<script>
    document.write('before h1.js');
</script>
<script src="h1.js"></script>
<script>
    document.write('after h1.js');
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T10:00:21.930

可以这样想：IE 执行您的脚本，添加新内容`document`，然后检查内容。

因此，如果您的`h1.js`脚本写入文档，那么这段代码将在您的 JavaScript 完成*后执行。*这是由于 JavaScript 的同步特性。

如果你想避免这种情况，通常的解决方案是`h1.js`定义一个你可以在适当的时候调用的函数。然后，您可以编写：

```
<script>document.write("<script  src='h" + "1.js'><\/script>");</script>
<script>
    document.write("before write h1.js"+"<br/>");
    document.write(h1());
    document.write("after write h1.js" +"<br/>");
</script> 
```

第一个脚本块允许您加载函数。完成后，IE 将解析新代码。然后它将运行第二个代码块并定义函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T11:40:46.703

查看Steve Souders 的[这篇](http://www.stevesouders.com/blog/2009/04/27/loading-scripts-without-blocking/)博文，了解异步加载脚本和确保顺序的技术中的问题。

来自同一个参考

> **document.write 脚本标签**– 使用 document.write 将 HTML 写入页面。这只会加载脚本而不会在 IE 中阻塞。

这就是为什么您能够看到如此多变的执行顺序的原因。脚本加载没有阻止`after write h1.js`执行。它只发生在 IE 中

# hibernate - Hibernate - mapping composite relations to non-primary keys

> ID：10580922
> 
> 赞同：2
> 
> 时间：2012-05-14T09:46:17.010
> 
> 标签：hibernate, nhibernate, jpa, nhibernate-mapping

I have to map a large enterprise database schema. As a number of legacy applications are depending on that schema I can't change it from composite keys to surrogate keys (other than using views with instead-of triggers for ~70% of database objects) which led me to a number of issues I don't know how to overcome.

1.  How to map tables that have a surrogate (primary, auto-increment) key and a composite unique key to which a number of tables form a many-to-one relation over the surrogate key, and at the same time a number of legacy tables relate over the composite unique?
2.  What to do when several relationships over composite keys share the same component (Naselja: Korisnik/Opcina, Korisnik/Grad)? Hibernate tells me I can't use the same column (Korisnik) twice, unless I add 'updatable = false, insertable = false' to the @JoinColumn annotation. Yet when I do that, I get the message that all components of the relation have to have the same settings for insertable and updatable. How do I ever update or insert the second relation then?
3.  Inserting a row into 'Ulice' table will give me a error "org.hibernate.AnnotationException: referencedColumnNames(Korisnik, Naselje) of lc.data.hibernate.Ulice.naselja referencing lc.data.hibernate.Naselja not mapped to a single property" unless in 'Naselja' table I explicitly add a many-to-one relation to 'Korisnici' table in the model, which doesn't reflect the actual database schema.

From what I've read so far [JPA doesn't support relationships to non-primary keys](https://stackoverflow.com/questions/5818373/does-the-jpa-specification-allow-references-to-non-primary-key-columns), but [people still do it](http://www.kawoolutions.com/Technology/JPA,_Hibernate,_and_Co./Relationships_to_Non-Primary_Key_Columns). Also my second problem [might be solved with Hibernate 5](https://hibernate.onjira.com/browse/HHH-6221), but I'm hoping for some good advice what route to take here.

Test model, database scripts and projects:

* * *

![Database schema MSSQL](../Images/ac07978465e54e19217508aa2fa1bc89.png)

[MSSQL create database scripts](http://pastebin.com/G9qL6HbJ)

[Java NetBeans example projects](https://docs.google.com/open?id=0BxIzMpeayz9nWm1YalZhTllQdjQ)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T12:24:49.083

1) - 将自动递增列映射为主键 - 为复合 ID 创建类并使用 property-ref 映射多对一

```
 <component name="compIdProperty" unique="true">
      <property column="naselje" />
      <many-to-one column="korisnik" class="Korisnik"/>
    </component>

    <many-to-one name="Naselja" property-ref="compIdProperty">
      <column name="naselje" />
      <column name="korisnik" />
    </many-to-one> 
```

2）AFAIK根本不可能使用hibernate

我看到的唯一可能的方法是将（Grad，Opcina）映射为属性并自己管理关联

3）由于这是一个遗留模式，我会妥协添加多对一并将多对一映射到 Opcine 和 Gradovi 中的 Korisnik

# mercurial - How to generate a clean patch from Mercurial?

> ID：10580927
> 
> 赞同：0
> 
> 时间：2012-05-14T09:46:37.587
> 
> 标签：mercurial, diff, patch

The diff command, even using git option, includes path prefixes commonly used on DCS:

```
--- a/file.ext
+++ b/file.ext 
```

So applying such patches you should need to using -p1 instead of -p0.

Is there any way to generate clean patched from Mercurial?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T21:41:50.457

Mercurial 不会发出 -p0 补丁。正如@Ringdig 指出的那样，它们很少是您想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T07:25:56.587

您可以调整此答案中给出的查看脚本：[转换补丁条级别](https://stackoverflow.com/questions/1007114/transforming-patch-strip-level)以删除第一个目录而不是添加它。

像这样的东西应该可以工作（未经测试）：

```
sed \
    -e 's!^--- a/!--- !' \
    -e 's!^+++ b/!+++ !' \
    < p1.patch \
    > p0.patch 
```

假设您的“p1 补丁”在名为 p1.patch 的文件中，则输出将在 p0.patch 中

# ruby-on-rails - 从转储创建数据库后如何跳过 Rails 迁移

> ID：10580928
> 
> 赞同：6
> 
> 时间：2012-05-14T09:46:58.890
> 
> 标签：ruby-on-rails, postgresql, rails-migrations

我从最新的转储中恢复了我的数据库并尝试运行 rake 测试。不幸的是，有 30 个迁移未决。我的第一个想法是注释掉 30 个迁移代码中的每一个并运行“rake db:migrate”，但必须有一个更简单的解决方案。我使用 Rails 2.3.14 和 Postgresql 9.1.3。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T09:51:29.160

如果您要从转储中恢复数据库，则该`schema_migrations`表应与其余表一起恢复。

这似乎表明您的`schema_migrations`表可能没有得到备份，这会导致您现在遇到的问题。

理想的解决方案是恢复包含正确的所有表的备份 - 包括`schema_migrations`.

即使您决定在短期内找到解决此问题的方法，但从长远来看，正确的解决方案是修改您的备份脚本以获取您需要的*所有*表，包括`schema_migrations`.

就现在要做什么而言，理想的解决方案可能是`schema_migrations`从您的数据库中仅备份一个表 ( )，然后将该数据导入您现在尝试加载的数据库中。那么您的迁移应该不再处于挂起状态。

用一个简单的表转储和加载脚本来做应该没问题。简单的 postgres gui [PgAdmin](http://www.pgadmin.org/) ( [http://www.pgadmin.org/](http://www.pgadmin.org/) ) 还可以提供一些基本工具，用于转储然后加载单个表。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-14T10:37:21.897

凯文是正确的。然而，他错过了一个关键点。

当您从备份恢复时，它会恢复 schema_migrations 表，该表跟踪需要运行的迁移。如果这 30 个迁移是在您从中恢复的数据库上运行的，它们就不会运行。

但是，您的代码比备份所代表的数据库快照提前了 30 次迁移。

如果我部署然后立即获取生产备份，这可能会发生在我身上。尽管迁移已在生产环境中运行，但我在部署之前的办公时间*之前获得了备份。*我通常喜欢等一天，然后得到第二天的备份。

或者，不要担心。您的备份是在这 30 次迁移之前进行的，但随后它们已被应用，因此迁移已确保您的架构与您的代码版本匹配。这是好事。

不要出汗，明天再刷新，当备份有你的变化时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-14T16:06:30.220

您还可以在 db 表中手动添加缺少迁移的时间戳，例如：

```
INSERT INTO "public"."schema_migrations"("version") VALUES ('20201212012345') 
```

这应该与暂时取消迁移文件中的“创建”指令具有相同的效果。如果您在 git 的部署过程中运行迁移，注释掉意味着您必须将这些更改推送到 git。

如果您只是在暂存/开发环境中工作，直接修复数据库可能比推送这些更改更好，可能会混淆其他部署或开发人员。

# android - 在 Android 中检查 Facebook 登录

> ID：10580929
> 
> 赞同：0
> 
> 时间：2012-05-14T09:47:02.203
> 
> 标签：android

我有一个使用 Facebook SDK for Android 登录到我的应用程序的应用程序。但是我在检查用户是否已经登录时遇到了一些问题。登录页面后，将向用户显示主界面。我想要的是，如果用户在过去与应用程序的交互中已经登录，那么下次启动应用程序时，不再有登录屏幕，只有主界面。所以在启动时，我的应用程序应该检查用户是否登录。我将如何做？

我尝试使用`mFacebook.isSessionValid()`，但它总是返回一个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T10:21:24.373

**您可以尝试以下代码：**

```
if(mFacebook.isSessionValid()) {
onFacebookClick();
}

private void onFacebookClick() {
        if (mFacebook.isSessionValid()) {
            final AlertDialog.Builder builder = new AlertDialog.Builder(this);
            builder.setMessage("Delete current Facebook connection?")
                    .setCancelable(false)
                    .setPositiveButton("Yes",new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog,int id) {
                                fbLogout();
                                }
                            })
                    .setNegativeButton("No",new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog,int id) {
                                dialog.cancel();
                                facebook_btn.setText(getResources().getString(R.string.signinout));
                                }
                            });
            final AlertDialog alert = builder.create();
            alert.show();
        } else {
            facebook_btn.setText(getResources().getString(R.string.signin));
            mFacebook.authorize(this, PERMISSIONS, -1,new FbLoginDialogListener());
        }
    } 
```

# mysql - mysql表的困难约束

> ID：10580930
> 
> 赞同：0
> 
> 时间：2012-05-14T09:47:10.737
> 
> 标签：mysql, join, constraints

我需要一个 mysql 表的约束。该表具有字段“id”、“ref”、“from”和“to”。约束应该保证不存在具有相同“ref”和时间重叠（字段“from”和“to”）的数据集。

在 sql 中：以下语句应始终返回“0”。

```
select count(*) 
from   `TABLE` d1 inner join `TABLE` d2 on 
       d1.`ref` = d2.`ref` and d1.`id` <> d2.`id` and 
       d1.`to` >= d2.`from` and d1.`from`<=d2.`to` 
```

有没有办法通过约束来处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T10:29:23.447

现在我有以下触发器。谢谢你的帮助！

```
DELIMITER $$

USE `devtestplandb`$$

CREATE
TRIGGER `db`.`trig1`
BEFORE INSERT ON `db`.`TABLE`
FOR EACH ROW
BEGIN
    SET @CNT = (
            select  count(*) 
            from    `TABLE` d 
            where   d.`ref` = NEW.`ref` and 
                    d.`to` >= NEW.`from` and 
                    d.`from` <= NEW.`to`);
    IF @CNT != 0 THEN
        CALL error_001();
    END IF;
END$$

CREATE
TRIGGER `db`.`trig2`
BEFORE UPDATE ON `db`.`TABLE`
FOR EACH ROW
BEGIN
    SET @CNT = (
            select  count(*) 
            from    `TABLE` d 
            where   d.`ref` = NEW.`ref` and 
                    d.`ID` <> NEW.`ID` and
                    d.`to` >= NEW.`from` and 
                    d.`from` <= NEW.`to`);
    IF @CNT != 0 THEN
        CALL error_002();
    END IF;
END$$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-25T19:28:48.857

*“有没有办法通过约束来处理这个问题？”*

是的，SQL Standard 2011 以可读的声明方式支持这种场景：

> [唯一约束定义](https://jakewheat.github.io/sql-overview/sql-2011-foundation-grammar.html#_11_7_unique_constraint_definition)

> ```
> <without overlap specification> ::=
> <application time period name>  WITHOUT OVERLAPS 
> ```

在您的示例中：

```
CREATE TABLE tab (
  id INT AUTO_INCREMENT PRIMARY KEY,
  ref VARCHAR(100),
  from_date DATE,
  end_date DATE,
  PERIOD FOR ref_period(from_date, end_date),
  UNIQUE (ref, ref_period WITHOUT OVERLAPS)
); 
```

和样本插入：

```
INSERT INTO tab(ref, from_date, end_date) VALUES ('a', '2020-01-01','2020-03-01');
-- OK

INSERT INTO tab(ref, from_date, end_date) VALUES ('a', '2020-03-01','2020-05-01');
-- OK

INSERT INTO tab(ref, from_date, end_date) VALUES ('a', '2020-04-01','2020-07-01')
-- Duplicate entry 'a-2020-07-01-2020-04-01' for key 'ref

SELECT * FROM tab; 
```

**[db<>fiddle 演示 - Maria DB 10.5](https://dbfiddle.uk/?rdbms=mariadb_10.5&fiddle=437f1b5fb12b0cfdb1a01c0653e7ebee)**

# java - 如何找到“插件项目”向导的源代码？

> ID：10580938
> 
> 赞同：0
> 
> 时间：2012-05-14T09:47:39.590
> 
> 标签：java, eclipse, plugins

使用[Eclipse Source Code - Tutorial](http://www.vogella.com/articles/EclipseCodeAccess/article.html)中的说明，我可以获得所有插件的源代码。但是我怎样才能在这一大堆文本中找到我真正需要的一个具体向导的代码呢？即，在“新建”菜单中具有“插件项目”菜单项的插件创建向导。使用搜索没有帮助。搜索“插件项目”一无所获。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T09:53:24.850

“插件间谍”说：`NewPluginProjectWizard`由 `org.eclipse.pde.ui (3.6.100.v20120103_r372)`

只需打开对话框并按`Shift+Alt+F1` (`Shift+Option+F1`在 Mac 上)

另请参阅：[热键/快捷方式：“这是哪个插件？”](https://stackoverflow.com/questions/4512113/hotkey-shortcut-for-which-plugin-is-this)

# php - 使用 jquery 滑块时，单独的视频不会出现在屏幕上

> ID：10580944
> 
> 赞同：0
> 
> 时间：2012-05-14T09:48:04.103
> 
> 标签：php, javascript, jquery

我在这里有一个应用程序，我在基本 jquery 滑块中使用 jwplayer：[应用程序](http://helios.hud.ac.uk/u0867587/Mobile_app/Text3.php)

此处基本 jquery 滑块的信息：http: [//basic-slider.com/](http://basic-slider.com/)

现在这就是我发现的，如果一个滑块包含多个视频，那么它会显示滑块，但如果一个滑块只有一个视频，它不会显示视频或滑块。

现在奇怪的是，如果我将视频替换为图像，那么如果我只有一个图像，它就可以工作，因为它不显示滑块而是显示图像，这很好。但我的问题是如何为视频做同样的事情？

这是带有图像的滑块的演示：[应用](http://helios.hud.ac.uk/u0867587/Mobile_app/Text20.php)

以下是视频和滑块的代码：

```
 $vidquery = "SELECT s.SessionId, q.QuestionId, v.VideoId, VideoFile
                FROM Session s
                INNER JOIN Question q ON s.SessionId = q.SessionId
                INNER JOIN Video_Question vq ON q.QuestionId = vq.QuestionId
                INNER JOIN Video v ON vq.VideoId = v.VideoId
                WHERE s.SessionId = ?";

    $vidqrystmt=$mysqli->prepare($vidquery);
    // You only need to call bind_param once
    $vidqrystmt->bind_param("i",$session);
    // get result and assign variables (prefix with db)
    $vidqrystmt->execute(); 
    $vidqrystmt->bind_result($vidSessionId,$vidQuestionId,$vidVideoId,$vidVideoFile);

        $arrVideoFile = array();

    while ($vidqrystmt->fetch()) {
    $arrVideoFile[ $vidQuestionId ][] = basename($vidVideoFile);
  }

    $vidqrystmt->close(); 

?>
<form action='results.php' method='post' id='exam'>

<?php
                //start:procedure video
        $vid_result = '';
        if(empty($arrVideoFile[$key])){
          $vid_result = '&nbsp;';
        }else{

            ?>

 <div id="banner-video_<?php echo $key; ?>">
 <ul class="bjqs">
<?php
$i = 0;
foreach ($arrVideoFile[$key] as $v) { ?>
<li><div id="myElement-<?php echo $key.'-'.$i; ?>">Loading the player...

<script type="text/javascript">

jwplayer("myElement-<?php echo $key.'-'.$i; ?>").setup({
    file: "<?php echo 'VideoFiles/'.$v; ?>",
    width: 480,
    height: 270
});

<?php $i++; ?>
</script>

</div>
</li>
<?php } ?>
</ul>
</div>

         <script type="text/javascript">

jQuery(document).ready(function($) {

         $('#banner-video_<?php echo $key; ?>').bjqs({
            animtype      : 'slide',
            height        : 300,
            width         : 700,
            responsive    : true,
            randomstart   : false,
            automatic : false
          });  
          });

          </script>

<?php

        }
        //end:procedure video
?>

</div>

</form> 
```

更新：

如果有人知道如何对其进行编码，以便如果它能够检测到单个视频，那么不要将它放在滑块中，那么我相信这可以解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T07:17:43.737

我要说的是，通过您的示例，看起来您的所有滑块都将图像或视频滑过并显示下一个或上一个，但是如果您只有一个项目，为什么不完全跳过所有这些。

你有一个数组：`$arrVideoFile`

您可以使用`count($arrVideoFile);`来获取数组中的总值。

所以

```
if(count($arrVideoFile) != 0 || $arrVideoFile) != 1)
{
    //do the stuff you pasted above
}

else
{
    //if(array == 0) maybe show a default image

    //if(array == 1) lets just show that
        //if image show <img> if video show <object> or in your case 
        //<div id="myElement-<?php echo $key.'-0'; ?>"></div>
} 
```

让我知道这是否有帮助

# python - HTML：从嵌入 src 获取文件的直接链接

> ID：10580947
> 
> 赞同：0
> 
> 时间：2012-05-14T09:48:17.990
> 
> 标签：python, html, embed

我想知道如何仅从嵌入链接获取到嵌入式视频的直接链接（指向 .flv/.mp4 或任何文件的链接）。

例如，[http://www.kumby.com/ano-hana-episode-1/](http://www.kumby.com/ano-hana-episode-1/)有

```
<embed src="http://www.4shared.com/embed/571660264/396a46be"></embed> 
```

，虽然视频的链接似乎是“http://dc436.4shared.com/img/571660264/396a46be/dlink__2Fdownload_2FM2b0O5Rr_3Ftsid_3D20120514-093834-29c48ef9/preview.flv”

浏览器如何知道从哪里加载视频？如何编写将嵌入链接转换为直接链接的代码？

更新：感谢您的快速回答，昆汀。但是，连接到“http://www.4shared.com/embed/571660264/396a46be”时，我似乎没有收到“位置”标题。

```
import urllib2
r=urllib2.urlopen('http://www.4shared.com/embed/571660264/396a46be') 
```

给我以下标题：'content-length'，'via'，'x-cache'，'accept-ranges'，'server'，'x-cache-lookup'，'last-modified'，'connection'， “etag”、“日期”、“内容类型”、“x-jsl”

```
from urllib2 import Request
r=Request('http://www.4shared.com/embed/571660264/396a46be') 
```

根本没有给我任何标题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T10:02:40.850

服务器发出[302 HTTP 状态代码](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3.3)和[Location 标头](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.30)。

```
$ curl -I http://www.4shared.com/embed/571660264/396a46be
HTTP/1.1 302 Moved Temporarily
Server: Apache-Coyote/1.1

(snip cookies)

Location: http://static.4shared.com/flash/player/5.6/player.swf?file=http://dc436.4shared.com/img/M2b0O5Rr/gg_Ano_Hi_Mita_Hana_no_Namae_o.flv&provider=image&image=http://dc436.4shared.com/img/M2b0O5Rr/gg_Ano_Hi_Mita_Hana_no_Namae_o.flv&displayclick=link&link=http://www.4shared.com/video/M2b0O5Rr/gg_Ano_Hi_Mita_Hana_no_Namae_o.html&controlbar=none
Content-Length: 0
Date: Mon, 14 May 2012 10:01:59 GMT 
```

* * *

如果您想获取有关重定向响应的信息而不是自动跟随重定向，请参阅[如何防止 Python 的 urllib(2) 跟随重定向。](https://stackoverflow.com/questions/554446/how-do-i-prevent-pythons-urllib2-from-following-a-redirect)

# java - 如何以编程方式启动/停止 EJB

> ID：10580951
> 
> 赞同：1
> 
> 时间：2012-05-14T09:48:32.263
> 
> 标签：java, jakarta-ee, jboss, ejb, jmx

有谁知道是否可以在我的应用程序代码中启动/停止 EJB？例如。我有一些 MDB，我希望在我的应用程序运行时选择性地启动/停止？有任何想法吗？这可以通过 JMX 完成吗？

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T14:26:45.807

EJB 不是可以“启动”或“停止”的东西。当然，它有一个[生命周期](http://java.sun.com/j2ee/tutorial/1_3-fcs/doc/EJBConcepts9.html)，但它更关心 EJB*实例*的创建、激活、钝化和删除，并且完全由 EJB 容器来管理生命周期。

简而言之：您不能以编程方式管理 EJB 的生命周期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T14:10:05.717

EJB 规范没有在应用程序中启动/停止单个 EJB（甚至模块）的机制。可以通过[JSR 77](http://jcp.org/en/jsr/detail?id=77)使用 JMX 动态启动/停止应用程序。

（我看到你在使用 jboss 标签。我对 JBoss 没有专业知识，所以我不知道它是否提供支持你想做的扩展。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T18:39:02.633

每个部署的 MDB 都有一个管理 MBean。MBean 类是**org.jboss.ejb3.mdb.MdbDelegateWrapper**。JMX ObjectName 在 JBoss 4 的版本之间有所不同，并且取决于您如何部署它们。假设您在名为*myapp.jar*的 jar 中部署了一个名为*MyMDB的 MDB，该 jar 位于名为**myapp.ear* 的耳朵中，名称可能是：

 **```
jboss.j2ee:ear=myapp.ear,jar=myapp.jar,name=MyMDB,service=EJB3 
```

旧版本的 JBoss 4 也有一个系统哈希码。而且，如果您不使用 EJB3，我*认为*该服务仍然存在，只是它将是*EJB2*。

无论如何，一旦找到管理 bean，就可以调用**停止**和**启动**操作。我们经常使用它来暂停消息传递。**

# javascript - 为什么将 `this` 分配给 `self` 并运行 `self.method()`？

> ID：10580957
> 
> 赞同：14
> 
> 时间：2012-05-14T09:48:41.407
> 
> 标签：javascript

我正在阅读来自[猫鼬的源代码](https://github.com/LearnBoost/mongoose/blob/master/lib/collection.js#L40)

```
Collection.prototype.onOpen = function () {
  var self = this;
  this.buffer = false;
  self.doQueue();
}; 
```

我不明白为什么作者分配`this`给`self`并运行`self.doQueue()`. 为什么不直接运行：

```
this.buffer = false;
this.doQueue(); 
```

我是 javascript 新手，感谢您的帮助。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-14T09:52:35.850

你是对的，在这种情况下，他们可以简单地使用`this`.

使用`me`or`self`有点小技巧，以确保使用正确的上下文`this`，因为在 JavaScript 中，范围`this`是变体。例如，如果您有一个事件在您的类中触发一个函数，`this`那将是不同的，并且不会是您包含该函数的对象，而是调用该函数的对象。为了解决这个问题，人们经常使用`me`或`self`确保他们指的是正确的对象... `this`，就像在实际对象中一样。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-14T10:03:57.250

只是为了让@richard 前面说的更清楚，

```
Collection.prototype.onOpen = function () {
  var self = this;
  this.buffer = false;
  this.onclick = function(){
     //do some other operations here
     //if you refer `this` here then, `this` will refer to present function not the above. so to make sure it is referring to exact object people pass this to `me` or `self`   
     self.doQueue();
  } 
 }; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T09:54:04.120

您通常这样做的唯一原因是，如果调用`doQueue()`位于将更改`this`诸如另一个函数之类的值的块内。

但是在这种情况下，它没有任何用途，并且可能是未改回的旧代码的残余。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-14T09:54:56.457

开发人员很可能想要一致性，**但未能如愿**。

否则，您将`this`在某些函数、`self`其他函数中使用以及在其他函数中同时使用[这两种](https://paste.aeum.net/show/83/)函数，具体取决于您使用对象的位置以及是否使用嵌套函数/回调。

通过[总是分配`this`给`self`](https://paste.aeum.net/show/84/)后者然后使用后者，您在每个函数的一开始就有一个额外的分配，但您*总是*使用它`self`来访问对象。

但是，开发人员在您发布的代码中所做的事情并没有多大意义。他应该使用`self`或`this`两次，而不是甚至没有必要的混合。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-05-14T09:53:08.377

self 是 'this' 的副本，但它总是引用正确的对象，而 'this' 可能不会。

# plugins - 从外部位置加载 MCFileManager TinyMCE 插件

> ID：10580962
> 
> 赞同：0
> 
> 时间：2012-05-14T09:48:57.320
> 
> 标签：plugins, tinymce

我在 MCFileManager 的更新日志中看到了以下功能：

> 版本 3.0.6 (2008-02-21) 添加了对从外部位置加载 TinyMCE 插件的支持。

但是我该怎么做呢？当我加载 editor_plugin.js 文件并在 tinyMCE 设置中启用插件时，我只会收到错误，因为路径不正确。

在 tinyMCE 文档中，我发现了这一点：

> TinyMCE 还支持从外部资源添加插件的能力。这些插件需要在 tinyMCE.init 调用后自行注册和加载。您还应该 > 为这些插件添加前缀“-”字符，以便 TinyMCE 不会尝试从 TinyMCE 插件目录加载它。

但是当我使用“-insertimage”添加插件时，什么都没有加载。

谢谢你的帮助，dattn

# jsf - JSF 数据表中的垂直原始名称

> ID：10580963
> 
> 赞同：0
> 
> 时间：2012-05-14T09:48:57.663
> 
> 标签：jsf, jsf-2

在下面的 JSF 页面中，我试图打印出下表视图并在浏览器中获取单行空原始数据。你认为我做错了什么？

```
 -----------------------
 Up Time:        |  3  |   
 Cpu Load 1 Min: |  2  |
 Cpu Load 5 Min: |  4  |
 Cpu Load 15 Min:|  5  |
 Free Mem:       |  6  |
 Tot Mem:        |  9  |
 Dae Mem:        |  1  |
 -----------------------

     <%@page contentType="text/html" pageEncoding="UTF-8"%>
     <%@ taglib uri="http://java.sun.com/jsf/html" prefix="h"%>
     <%@ taglib uri="http://java.sun.com/jsf/core" prefix="f"%>

  <f:view><html>
    <head>
        <title>
            PmCounters Web Interface
        </title>

        <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
        <meta http-equiv="Content-Style-Type" content="text/css"/>
        <meta http-equiv="Content-Script-Type" content="text/javascript"/>
        <meta http-equiv="X-UA-Compatible" content="IE=8"/>

        <!-- Set GWT property to get browsers locale -->
        <meta name="gwt:property" content="locale=en_US">
        <base href="http://10.64.85.10/opennms/" />

        <!--   -->
        <link rel="stylesheet" type="text/css" href="http://10.64.85.10/opennms/css/styles.css" media="screen" />
        <link rel="stylesheet" type="text/css" href="http://10.64.85.10/opennms/css/gwt-asset.css" media="screen" />
        <link rel="stylesheet" type="text/css" href="http://10.64.85.10/opennms/css/onms-gwt-chrome.css" media="screen" />
        <link rel="stylesheet" type="text/css" href="http://10.64.85.10/opennms/css/print.css" media="print" />

    </head>
    <body>
    <center>
        <br><br><br>

        <h:dataTable value="#{sysInfoTableDAO.sysInfoItem}" var="row" bgcolor="#F1F1F1" border="10" cellpadding="5" cellspacing="3" rows="4" width="50%" dir="LTR" frame="hsides" rules="all" summary="DAE PM Counters Display." > 
```

下面是我生成这个表的地方。St 一定是错的。

```
 <%-- 
              HERE is the place where the table should be printed
              --%>

            <h:panelGrid columns="2">
                <h:outputText value="Up Time:"/>
                <h:outputText value="#{row.getUpTime()}"/>
                <h:outputText value="Cpu Load 1 Min:"/>
                <h:outputText value="#{row.getCpuLoad1min()}"/>
                <h:outputText value="Cpu Load 5 Min:"/>
                <h:outputText value="#{row.getCpuLoad5min()}"/>
                <h:outputText value="Cpu Load 15 Min:"/>
                <h:outputText value="#{row.getCpuLoad15min()}"/>
                <h:outputText value="Free Mem:"/>
                <h:outputText value="#{row.getCpufreeMem()}"/>
                <h:outputText value="Tot Mem:"/>                                       
                <h:outputText value="#{row.getTotMem()}"/>
                <h:outputText value="Dae Mem:"/>                                       
                <h:outputText value="#{row.getDaeMem()}"/>
            </h:panelGrid>

        </h:dataTable>

    </center>
</body></html></f:view> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T10:57:04.823

换句话说，JSF 标记没有被解析并在生成的 HTML 输出中显示为普通标签？这只能意味着`FacesServlet`没有被调用。您需要确保出现在浏览器地址栏中的请求 URL 与 中定义的 URL 模式`FacesServlet`匹配`web.xml`。如果是 例如`*.jsf`，那么您应该打开页面`page.jsf`而不是`page.jsp`。

* * *

**与具体问题无关**，当您用“jsf-2.0”标记问题时，您似乎正在使用 JSF 2.0。为什么你要使用遗留 JSP 而不是它的继任者 Facelets，这是自 JSF 2.0 以来的默认视图技术？

# android - 带视图的 Coverflow

> ID：10580965
> 
> 赞同：1
> 
> 时间：2012-05-14T09:49:06.750
> 
> 标签：android, widget, gallery, coverflow

我正在尝试使用布局进行覆盖流，图像我没有问题并且工作完美，问题是尝试使用 los*.xml 来完成。

我有以下错误：

```
 05-14 09:14:56.901: WARN/ImageView(774): Unable to find resource: 2130903041
    05-14 09:14:56.901: WARN/ImageView(774): android.content.res.Resources$NotFoundException: File res/layout/prueba1.xml from drawable resource ID #0x7f030001
    05-14 09:14:56.901: WARN/ImageView(774):     at android.content.res.Resources.loadDrawable(Resources.java:1697)
    05-14 09:14:56.901: WARN/ImageView(774):     at android.content.res.Resources.getDrawable(Resources.java:581)
    05-14 09:14:56.901: WARN/ImageView(774):     at android.widget.ImageView.resolveUri(ImageView.java:489)
    05-14 09:14:56.901: WARN/ImageView(774):     at android.widget.ImageView.setImageResource(ImageView.java:274)
    05-14 09:14:56.901: WARN/ImageView(774):     at com.example.coverflow.CoverFlowExample$ImageAdapter.getView(CoverFlowExample.java:77)
    05-14 09:14:56.901: WARN/ImageView(774):     at android.widget.Gallery.makeAndAddView(Gallery.java:745)
    05-14 09:14:56.901: WARN/ImageView(774):     at android.widget.Gallery.layout(Gallery.java:622)
    05-14 09:14:56.901: WARN/ImageView(774):     at android.widget.AbsSpinner.setSelectionInt(AbsSpinner.java:292)
    05-14 09:14:56.901: WARN/ImageView(774):     at android.widget.AbsSpinner.setSelection(AbsSpinner.java:269)
    05-14 09:14:56.901: WARN/ImageView(774):     at com.example.coverflow.CoverFlowExample.onCreate(CoverFlowExample.java:30)
    05-14 09:14:56.901: WARN/ImageView(774):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
    05-14 09:14:56.901: WARN/ImageView(774):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
    05-14 09:14:56.901: WARN/ImageView(774):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
    05-14 09:14:56.901: WARN/ImageView(774):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
    05-14 09:14:56.901: WARN/ImageView(774):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
    05-14 09:14:56.901: WARN/ImageView(774):     at android.os.Handler.dispatchMessage(Handler.java:99)
    05-14 09:14:56.901: WARN/ImageView(774):     at android.os.Looper.loop(Looper.java:123)
    05-14 09:14:56.901: WARN/ImageView(774):     at android.app.ActivityThread.main(ActivityThread.java:4627)
    05-14 09:14:56.901: WARN/ImageView(774):     at java.lang.reflect.Method.invokeNative(Native Method)
    05-14 09:14:56.901: WARN/ImageView(774):     at java.lang.reflect.Method.invoke(Method.java:521)
    05-14 09:14:56.901: WARN/ImageView(774):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
    05-14 09:14:56.901: WARN/ImageView(774):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
    05-14 09:14:56.901: WARN/ImageView(774):     at dalvik.system.NativeStart.main(Native Method)
    05-14 09:14:56.901: WARN/ImageView(774): Caused by: org.xmlpull.v1.XmlPullParserException: Binary XML file line #2: invalid drawable tag LinearLayout
    05-14 09:14:56.901: WARN/ImageView(774):     at android.graphics.drawable.Drawable.createFromXmlInner(Drawable.java:784)
    05-14 09:14:56.901: WARN/ImageView(774):     at android.graphics.drawable.Drawable.createFromXml(Drawable.java:729)
    05-14 09:14:56.901: WARN/ImageView(774):     at android.content.res.Resources.loadDrawable(Resources.java:1694) 
```

这是代码：

```
 package com.example.coverflow;

import java.io.FileInputStream;

import android.app.Activity;
import android.content.Context;
import android.graphics.Bitmap;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageView;

public class CoverFlowExample extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);

     CoverFlow coverFlow;
     coverFlow = new CoverFlow(this);

     coverFlow.setAdapter(new ImageAdapter(this));

     ImageAdapter coverImageAdapter =  new ImageAdapter(this);

     coverFlow.setAdapter(coverImageAdapter);

     coverFlow.setSpacing(-25);
     coverFlow.setSelection(0, true);
     coverFlow.setAnimationDuration(1000);

     setContentView(coverFlow);
    }

 public class ImageAdapter extends BaseAdapter {
     int mGalleryItemBackground;
     private Context mContext;

     private FileInputStream fis;

//     private Integer[] mImageIds = {
////             R.drawable.twitter,
////             R.drawable.centros,
////             R.drawable.seas,
////             R.drawable.estudios,
////             R.drawable.videos
//     };

     private ImageView[] mImages;

     Context context;
        LayoutInflater v1 = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View p1 = v1.inflate(R.layout.prueba1, null);

        LayoutInflater v2 = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View p2 = v2.inflate(R.layout.prueba2, null);

        LayoutInflater v3 = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View p3 = v3.inflate(R.layout.prueba3, null);

     public ImageAdapter(Context c) {
      mContext = c;
//      mImages = new ImageView[mImageIds.length];
     }

     public int getCount() {
         return 1;
     }

     public Object getItem(int position) {
         return position;
     }

     public long getItemId(int position) {
         return position;
     }

     public View getView(int position, View convertView, ViewGroup parent) {

      //Use this code if you want to load from resources
         ImageView i = new ImageView(mContext);
         Bitmap bmp[] = new Bitmap[3];
         bmp[0]=p1.getDrawingCache(true);
         bmp[1]=p2.getDrawingCache(true);
         bmp[2]=p3.getDrawingCache(true);
//         i.setImageDrawable(drawable[position]); 
         i.setLayoutParams(new CoverFlow.LayoutParams(130, 130));
         i.setScaleType(ImageView.ScaleType.CENTER_INSIDE); 

         //Make sure we set anti-aliasing otherwise we get jaggies
//         BitmapDrawable drawable = (BitmapDrawable) i.getDrawable();
//         drawable.setAntiAlias(true);
         return i;

      //return mImages[position];
     }
   /** Returns the size (0.0f to 1.0f) of the views 
      * depending on the 'offset' to the center. */ 
      public float getScale(boolean focused, int offset) { 
        /* Formula: 1 / (2 ^ offset) */ 
          return Math.max(0, 1.0f / (float)Math.pow(2, Math.abs(offset))); 
      } 

 }
} 
```

它应该只用视图替换图像数组吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T09:52:16.303

据我了解你的问题，问题是，

您正在尝试将 XML 布局文件设置为 Imageviews 的可绘制对象。

要使其工作，请从您的 XML 布局文件创建视图，然后从中制作位图并将这些位图设置为您的 ImageView。然后它工作..

**代码：**

```
public class ImageAdapter extends BaseAdapter {
     int mGalleryItemBackground;
     private Context mContext;
     private FileInputStream fis;
     private ImageView[] mImages;
     Bitmap bmp[] = new Bitmap[3];
     Context context;

     public ImageAdapter(Context c) {
      mContext = c;
      LayoutInflater v1 = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
      View p1 = v1.inflate(R.layout.prueba1, null);
      p1.setDrawingCacheEnabled(true);
      // this is the important code :)  
      // Without it the view will have a dimension of 0,0 and the bitmap will be null          
      p1.measure(MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED), 
        MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED));
      p1.layout(0, 0, p1.getMeasuredWidth(), p1.getMeasuredHeight()); 

      p1.buildDrawingCache(true);
      bmp[0] = Bitmap.createBitmap(p1.getDrawingCache());
      p1.setDrawingCacheEnabled(false); // clear drawing cache

      View p2 = v2.inflate(R.layout.prueba2, null);
      p2.setDrawingCacheEnabled(true);
      // this is the important code :)  
      // Without it the view will have a dimension of 0,0 and the bitmap will be null          
      p2.measure(MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED), 
        MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED));
      p2.layout(0, 0, p2.getMeasuredWidth(), p2.getMeasuredHeight()); 

      p2.buildDrawingCache(true);
      bmp[1] = Bitmap.createBitmap(p2.getDrawingCache());
      p2.setDrawingCacheEnabled(false); // clear drawing cache     

      View p3 = v3.inflate(R.layout.prueba3, null);
      p3.setDrawingCacheEnabled(true);
      // this is the important code :)  
      // Without it the view will have a dimension of 0,0 and the bitmap will be null          
      p3.measure(MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED), 
        MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED));
      p3.layout(0, 0, p3.getMeasuredWidth(), p3.getMeasuredHeight()); 

      p3.buildDrawingCache(true);
      bmp[2] = Bitmap.createBitmap(p3.getDrawingCache());
      p3.setDrawingCacheEnabled(false); // clear drawing cache   
     }

     public int getCount() {
         return bmp.length;
     }

     public Object getItem(int position) {
         return position;
     }

     public long getItemId(int position) {
         return position;
     }

     public View getView(int position, View convertView, ViewGroup parent) {
      //Use this code if you want to load from resources
         ImageView i = new ImageView(mContext);

         i.setImageBitmap(bmp[position]); 
         i.setLayoutParams(new CoverFlow.LayoutParams(130, 130));
         i.setScaleType(ImageView.ScaleType.CENTER_INSIDE); 

        return i;
     }
   /** Returns the size (0.0f to 1.0f) of the views 
      * depending on the 'offset' to the center. */ 
      public float getScale(boolean focused, int offset) { 
        /* Formula: 1 / (2 ^ offset) */ 
          return Math.max(0, 1.0f / (float)Math.pow(2, Math.abs(offset))); 
      } 
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T10:05:28.477

这也是我的问题。很长一段时间我自己都试过了。好好玩。我在 CoverFlow.java 中找到，只需更改使用/将 ImageView 转换为 View 的地方。因此，在 ImageAdapter 的 getView() 中，您可以根据需要返回视图 :)。对不起我的英语不好。

# soapui - SoapUI 全局代理测试在执行测试时不起作用

> ID：10580968
> 
> 赞同：1
> 
> 时间：2012-05-14T09:49:13.630
> 
> 标签：soapui

我使用 SoapUi GUI（免费版）创建了一个 Web 测试项目。我需要一个代理来连接到 Internet。因此，我在 File->Preferences->Proxy Settings 中设置了代理主机和端口，并确保它已启用。代理是正确的，因为我可以正确看到“soapUi Starter Page”，并且可以通过 WSDL 成功创建 SOAP 项目。但是当我执行测试用例时，它总是显示未知主机。代理设置好像没有生效。

任何人都可以帮忙吗？我正在测试这个公共网络服务：[http ://www.webxml.com.cn/WebServices/WeatherWebService.asmx](http://www.webxml.com.cn/WebServices/WeatherWebService.asmx)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T15:21:21.193

简而言之，使用较旧或较新版本的 SoapUI。根据我自己的经验，SoapUI 是（是？）臭名昭著的关于这个代理功能的错误。大量用户在他们的论坛上报告了同样的问题。2 年前，我的解决方法是使用较旧且错误较少的 SoapUI 版本。

奥马尔

# android - 如何使用适用于 Android 的 macbook 10.5.8 生成 MD5 指纹？

> ID：10580974
> 
> 赞同：0
> 
> 时间：2012-05-14T09:49:31.187
> 
> 标签：android, eclipse, macos

我想生成在 Android`MD5 Fingerprint`中使用。`GoogleMap`但我正在使用`Macbook 10.5.8`and `Eclipse Indigo`。

任何建议将不胜感激...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T09:55:38.950

查看生成 MD5 指纹的过程。 [在 Android 中使用谷歌地图](http://mobiforge.com/developing/story/using-google-maps-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T05:05:31.097

我的问题的答案是我们可以以通常的方式为 MAC 创建 MD5 指纹，即使用以下命令 $ keytool -list -alias androiddebugkey -keystore .keystore \ -storepass android -keypass android

关于 MAC 的一件重要的事情是 .android 文件夹是隐藏的。要使该文件夹可见，我们使用命令 Command+Shift+G。

我的问题是我安装了新的 eclipse，但我没有运行一个项目，所以没有生成 debug.keystore 文件。所以它给了我一个找不到文件异常的错误。

# objective-c - 未调用访问器方法

> ID：10580975
> 
> 赞同：0
> 
> 时间：2012-05-14T09:49:33.433
> 
> 标签：objective-c, ios5

我正在尝试使用本文中提供的解决方案构建动态选取框：

[如何在 iphone 中创建具有选取框效果的多个动态 uiview](https://stackoverflow.com/questions/9919455/how-to-create-dynamic-more-than-one-uiview-with-marquee-effect-in-iphone)

问题在于该方法访问器。这就是我在视图控制器中实现的方式：

网格视图控制器.h

```
#import "CrawlView.h" 

CrawlView *marquee;

@property (strong, nonatomic) CrawlView *marquee;

gridViewController.m

@synthesize marquee;

....

[marquee setMessages:self.noticiasArray];

[marquee go]; 
```

我在访问器方法中设置了一个断点，但它从未被调用过：

```
- (void)setMessages:(NSMutableArray *)messages {

    if (_messages != messages) {
        _messages = messages;
        [self buildSubviews];
    }
} 
```

所以不显示选框。

我会感谢你在这方面的帮助。

感恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T09:53:05.160

您需要将其设置为@dynamic

```
 @dynamic marquee; 
```

而不是@synthesize 选框；为了使用您的自定义设置器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T10:23:15.403

尝试 self.marquee 调用访问器方法。

# java - JSF - 在单个方法中检查 null 和空

> ID：10580981
> 
> 赞同：3
> 
> 时间：2012-05-14T09:49:46.443
> 
> 标签：java, jsf

目前我的代码就像

```
<h:panelGroup rendered="#{templatePrescriptionMaintenanceBackingBean.allSelectedMedicationList != null && !empty templatePrescriptionMaintenanceBackingBean.allSelectedMedicationList}">
        <b>List of Selected Drugs</b> // and some other stuff
</h:panelGroup> 
```

现在`allSelectedMedicationList`将在后端做很多处理。调用网络服务并在当前数据库中添加数据等等......

现在，当我需要检查`null`或`empty`-此处调用该方法的**2 倍时，就会出现问题。**当我再次对数据表使用相同的方法时，它将再次调用**1**次。我认为自己为 JSF 创建一种方法或某种东西，它会检查`null`并`empty`同时返回列表。**是否可以？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-14T09:53:54.400

运算符“empty”已经做了你想要的，你不需要也检查 null。

来自[http://docs.oracle.com/javaee/5/tutorial/doc/bnahq.html#bnaik](http://docs.oracle.com/javaee/5/tutorial/doc/bnahq.html#bnaik)：

*Empty：空操作符是一个前缀操作，可以用来判断一个值是空还是空。*

# c++ - c ++排序跟踪索引

> ID：10580982
> 
> 赞同：26
> 
> 时间：2012-05-14T09:49:54.430
> 
> 标签：c++, algorithm, sorting, stl

您是否有一些有效的例程来返回带有数组中已排序元素索引的数组？我认为使用 stl 存在一些方便的方法`vector`。您是否已经实现了一个没有 stl 的高效算法，或者您是否参考了伪代码或 C++ 代码？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-05-14T09:55:09.093

使用 C++11，以下应该可以正常工作：

```
template <typename T>
std::vector<size_t> ordered(std::vector<T> const& values) {
    std::vector<size_t> indices(values.size());
    std::iota(begin(indices), end(indices), static_cast<size_t>(0));

    std::sort(
        begin(indices), end(indices),
        [&](size_t a, size_t b) { return values[a] < values[b]; }
    );
    return indices;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-14T10:04:10.350

你可以尝试这样的事情：

```
template<typename C>
class index_sorter {
  public:
    compare(C const& c) : c(c) {}
    bool operator()(std::size_t const& lhs, std::size_t const& rhs) const {
      return c[lhs] < c[rhs];
    }
  private:
    C const& c;
};

std::sort(index_vector.begin(), index_vector.end(), index_sorter(vector)); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-14T14:45:35.350

添加到@Konrad 答案：

如果由于某种原因您无法使用 C++11，那么您可以使用`boost::phoenix`它来模拟它

```
 #include <vector>
    #include <algorithm>

    #include <boost/spirit/include/phoenix_core.hpp>
    #include <boost/spirit/include/phoenix_operator.hpp>

    template <typename T>
    std::vector<size_t> ordered(std::vector<T> const& values)
    {
        using namespace boost::phoenix;
        using namespace boost::phoenix::arg_names;

        std::vector<size_t> indices(values.size());
        int i = 0;
        std::transform(values.begin(), values.end(), indices.begin(), ref(i)++);
        std::sort(indices.begin(), indices.end(), ref(values)[arg1] < ref(values)[arg2]);
        return indices;
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-14T09:58:26.487

对于 C++03，我认为[本周的这位大师](http://www.gotw.ca/gotw/073.htm)可以帮助你：

```
namespace Solution3
{
  template<class T>
  struct CompareDeref
  {
    bool operator()( const T& a, const T& b ) const
      { return *a < *b; }
  };

  template<class T, class U>
  struct Pair2nd
  {
    const U& operator()( const std::pair<T,U>& a ) const
      { return a.second; }
  };

  template<class IterIn, class IterOut>
  void sort_idxtbl( IterIn first, IterIn last, IterOut out )
  {
    std::multimap<IterIn, int, CompareDeref<IterIn> > v;
    for( int i=0; first != last; ++i, ++first )
      v.insert( std::make_pair( first, i ) );
    std::transform( v.begin(), v.end(), out,
                    Pair2nd<IterIn const,int>() );
  }
}

#include <iostream>

int main()
{
  int ai[10] = { 15,12,13,14,18,11,10,17,16,19 };

  std::cout << "#################" << std::endl;
  std::vector<int> aidxtbl( 10 );

  // use another namespace name to test a different solution
  Solution3::sort_idxtbl( ai, ai+10, aidxtbl.begin() );

  for( int i=0; i<10; ++i )
  std::cout << "i=" << i
            << ", aidxtbl[i]=" << aidxtbl[i]
            << ", ai[aidxtbl[i]]=" << ai[aidxtbl[i]]
            << std::endl;
  std::cout << "#################" << std::endl;
} 
```

原始文章在[这里](http://www.drdobbs.com/cpp/184401318)。

# php - phpmailer smtp 不工作

> ID：10580983
> 
> 赞同：0
> 
> 时间：2012-05-14T09:49:57.660
> 
> 标签：php, email, smtp, phpmailer, smtp-auth

我已经尝试了很长时间，但我无法让 phpmailer 与 smtp 一起工作。我一直在这里测试[http://smtper.sweetylife.com/](http://smtper.sweetylife.com/)看看我的 smtp 是否正常工作，在这个网站上我可以毫无问题地连接。我的phpmailer设置是：

```
 $mail   = new PHPMailer();
    $mail->IsSMTP(); // telling the class to use SMTP
    $mail->Host       = "mail.mydomain.com"; // SMTP Server
    $mail->SMTPDebug  = 2; // Debugmode
    $mail->SMTPAuth   = true; // enable SMTP authentication
    $mail->SMTPSecure = "tls";
    $mail->Port       = 587; // set the SMTP port for the GMAIL
    $mail->Username   = "administratie@mydomain.com"; // SMTP account username
    $mail->Password   = "password";        // SMTP account password
    //$mail->SetFrom("administratie@mydomain.com", "First Last");
    $mail->AddReplyTo("administratie@mydomain.com","First Last");
    $mail->Subject    = "PHPMailer Test Subject via smtp, basic with authentication";
    //$mail->AltBody    = "To view the message, please use an HTML compatible email viewer!"; // optional, comment out and test
    $mail->Body       = "demo mail";
    $address = "re@ceiv.ed";
    $mail->AddAddress($address, "John Doe");
    if(!$mail->Send()) {
        echo "Mailer Error: " . $mail->ErrorInfo;
    }
    else{
        echo "Message sent!";
    } 
```

但它不起作用。我收到以下错误：

```
SMTP -> FROM SERVER: 220 helios.web.xyn-ta.net ESMTP Exim 4.77 Mon, 14 May 2012 11:47:16 +0200
SMTP -> FROM SERVER: 250 helios.web.xyn-ta.net Hello localhost.localdomain [77.243.225.73]
SMTP -> FROM SERVER: 250 OK
SMTP -> FROM SERVER: 550 relay not permitted, authentication required
SMTP -> ERROR: RCPT not accepted from server: 550 relay not permitted, authentication required
SMTP -> FROM SERVER: 503-All RCPT commands were rejected with this error:
503-relay not permitted, authentication required
503 valid RCPT command must precede DATA
SMTP -> ERROR: DATA command not accepted from server: 503-All RCPT commands were rejected with this error:
503-relay not permitted, authentication required
503 valid RCPT command must precede DATA
SMTP -> FROM SERVER: 221 helios.web.xyn-ta.net closing connection
Mailer Error: 
```

我不知道我做错了什么，有没有人有解决这个问题的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T14:07:00.133

这条线是问题所在：

```
SMTP -> FROM SERVER: 550 relay not permitted, authentication required 
```

您的邮件服务器需要登录，并且您提供的密码凭据未被接受。您应该与邮政局长交谈并确保您拥有正确的用户名和密码。

如果失败，请尝试使用脚本中的详细信息从命令行登录到 SMTP 服务器，并查看是否会产生任何错误。

# android - sencha touch2.0如何在屏幕之间传递数据？

> ID：10580984
> 
> 赞同：1
> 
> 时间：2012-05-14T09:49:59.550
> 
> 标签：android, sencha-touch-2

我正在开发 sencha touch2.0 应用程序，我想将数据从一个屏幕发送到另一个屏幕。我知道这个问题已经在[这里](https://stackoverflow.com/questions/8033185/sencha-touch-2-ext-dispatch-replacement)被问过了，但我觉得它没有帮助，所以我在这里再次问这个问题。

我的应用程序中有一个复选框列表视图，我想要的是，当我单击一个或多个复选框并转到下一个屏幕时，我将在此处获取所有“选中”列表项，这意味着我想发送选中的列表项数据一个屏幕到另一个屏幕。从我对网络的研究中我了解到，这可以通过`dispatch()`方法[http://docs.sencha.com/touch/2-0/#!/api/Ext.app.Application-method-dispatch](http://docs.sencha.com/touch/2-0/#!/api/Ext.app.Application-method-dispatch)来完成。但我不知道该怎么做。所以，请给我任何建议/解决方案来摆脱这些问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T12:24:34.570

`Ext.dispatch()`在 Sencha Touch 2.0 中已弃用，因为您可以随时通过此调用任何控制器的任何方法，就在您的视图中：

`yourAppName.getApplication().getController.method(params)`

甚至更进一步，您可以通过控制器使其自动`refs`运行`controls`。

# java - 替换两个引号

> ID：10580985
> 
> 赞同：1
> 
> 时间：2012-05-14T09:50:11.780
> 
> 标签：java, regex

我找不到这个简单问题的解决方案。

我想用“替换两个连续的''或``。

```
Input:
    some ``text'' dspsdj
Out: 
    some "text" 
```

为什么：

```
 s.replaceAll("[`{2}'{2}]", "\"")
Out:  
   some ""text"" 
```

？？？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T09:52:12.727

你应该这样做：

```
s.replaceAll("``|''", "\"") 
```

您可能打算在这里做的是：

```
s.replaceAll("[`']{2}", "\"") 
```

但这并不完全正确

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T09:52:41.790

```
String input = "some ``text'' dspsdj";
String output = input.replaceAll("`{2}|'{2}", "\""); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T09:52:58.893

将基数放在类之后：

```
.replaceAll("[`']{2}", "\"")); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T09:53:40.063

**尝试这个：**

```
String resultString = subjectString.replaceAll("([\"'`])\\1", "\""); 
```

**解释：**

```
<!--
(["'`])\1

Match the regular expression below and capture its match into backreference number 1 «(["'`])»
   Match a single character present in the list “"'`” «["'`]»
Match the same text as most recently matched by capturing group number 1 «\1»
--> 
```

# c# - 可序列化类创建

> ID：10580987
> 
> 赞同：-3
> 
> 时间：2012-05-14T09:50:20.727
> 
> 标签：c#, xml, serialization

我必须创建一个可序列化的类，它具有下面提到的格式的 xml。请检查此链接上的 xml 和 ExtendedAttribute 元素。

[http://telligent.com/community/developers/w/developer6/update-a-user.aspx](http://telligent.com/community/developers/w/developer6/update-a-user.aspx)

以下标签由键值对组成，没有对象

我的 ExtendedAtribute 类不是一个固定类，而是一个可以动态增加和减少的键值类型对象

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T11:30:57.730

对于简化的 XML 文件：-

```
<ExtendedAttributes>
  <EnableDisplayName>True</EnableDisplayName>
  <EditorType>Enhanced</EditorType>
  <EnableConversationNotifications>True</EnableConversationNotifications>
  <EnableUserSignatures>True</EnableUserSignatures>
  <CPPageSize>10</CPPageSize>
  <EnableActivityMessageNewUserAvatar>True</EnableActivityMessageNewUserAvatar>
  <EnableActivityMessageThirdPartyMessageType>True</EnableActivityMessageThirdPartyMessageType>
  <EnableStartConversations>1</EnableStartConversations>
  <avatarUrl>~/cfs-file.ashx/__key/communityserver-components-selectableavatars/03b2c875-fbfb-4d26-8000-ef001b9f4728/avatar.png</avatarUrl>
  <EnableActivityMessageNewProfileComment>False</EnableActivityMessageNewProfileComment>
  <EnableActivityMessageStatus>True</EnableActivityMessageStatus>
</ExtendedAttributes> 
```

您可以使用以下方法解析它：-

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Xml.Serialization;

  [XmlRoot("ExtendedAttributes")]
  public class SerialisableDictionary : Dictionary<string, string>, IXmlSerializable
  {
    #region IXmlSerializable Members
    public System.Xml.Schema.XmlSchema GetSchema()
    {
      return null;
    }

    public void ReadXml(System.Xml.XmlReader reader)
    {
      reader.Read();
      while (reader.NodeType != System.Xml.XmlNodeType.EndElement)
      {
        string key = reader.Name;
        this.Add(key, reader.ReadElementContentAsString());
        reader.MoveToElement();
      }
      reader.ReadEndElement();
    }

    public void WriteXml(System.Xml.XmlWriter writer)
    {
      // TODO
    }
    #endregion
  }

  class Program
  {
    static void Main(string[] args)
    {
      SerialisableDictionary sd = new SerialisableDictionary();
      XmlSerializer x = new XmlSerializer(sd.GetType());
      using (StreamReader sr = new StreamReader(@"XMLFile1.xml"))
      {
        sd = (SerialisableDictionary)x.Deserialize(sr);
      }
      foreach(var kvp in sd)
      {
        Console.WriteLine(kvp.Key + " = " + kvp.Value);
      }
      Console.WriteLine("Done.");
      Console.ReadKey();
    }
  } 
```

这给你一个`Dictionary<string, string>`你几乎肯定想要解析的真/假/字符串/数字值，但这是另一个问题。

我很欣赏这并不完美，但它应该足以让你继续前进。不幸的是，它会涉及很多，我没有太多时间。

全部基于[包含字典成员的序列化类中的答案](https://stackoverflow.com/questions/495647/serialize-class-containing-dictionary-member)

# android - 应用程序未显示在最近的应用程序列表中

> ID：10580988
> 
> 赞同：10
> 
> 时间：2012-05-14T09:50:31.873
> 
> 标签：android, android-manifest

每当我将以下代码放入我的活动清单条目时，我的应用程序就不会显示在最近的应用程序列表中

`<category android:name="android.intent.category.DEFAULT" />`

如果我删除上面的行，它工作正常。我还确保以下标志设置为 false-

```
 android:noHistory="false"
        android:excludeFromRecents="false" 
```

但即使我手动启动应用程序，它仍然不会显示。

万一有人想看看清单，它——

```
<?xml version="1.0" encoding="UTF-8"?> 
```

```
<uses-sdk android:minSdkVersion="8" />

<application
    android:name="com.raj.poc.copypaste.MainApplication"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".CopyPasteActivity"
        android:launchMode="singleTop"
        android:noHistory="false"
        android:excludeFromRecents="false"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
            <action android:name="android.intent.action.SEARCH_LONG_PRESS" />
            <category android:name="android.intent.category.DEFAULT" /> 
        </intent-filter>
    </activity>
</application> 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-02-21T14:21:14.393

如果你设置它也可能发生

```
 <activity... android:label=""/> 
```

为您的主要`Activity`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T10:25:36.577

这是您的应用程序中唯一的活动，对吗？

您正在使用类别标签两次。你已经写在你的代码中

```
 <category android:name="android.intent.category.LAUNCHER" /> 
```

所以你已经选择了类别。添加新活动时，您将编写默认类别标签。

# jquery - jQuery：父动画时链接消失

> ID：10580989
> 
> 赞同：0
> 
> 时间：2012-05-14T09:50:32.670
> 
> 标签：jquery

我有一个这样的DOM：

```
<div id="book-container">
    <div id="book-inner">
       Contents of slidedown
    </div>
    <a href="#" id="book-tab">Slide Down</a>
</div> 
```

我有这个 jQuery

```
$('#book-tab').on('click', function(){
   $('#book-container, #book-inner').animate({
      'height' : 350
   })
}) 
```

它工作正常，但问题是在制作`#book-container`动画`#book-inner`时`#book-tab`链接消失并在完成动画后重新出现。

谁能解释它为什么这样做以及如何解决它。这不是一个大问题，但如果它没有发生，我会更喜欢它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T09:55:23.290

```
$('#book-tab').on('click', function(e){
   e.preventDefault();
   $('#book-container').animate({ // apply animation only one element
      'height' : 350
   })
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T09:59:06.433

```
$('#book-tab').on('click', function(e){
    $('#book-inner').animate({
      'height' : 350
   })
})​ 
```

仅对内部 div 使用动画。

工作[JsFiddle](http://jsfiddle.net/Ghokun/WNeq7/3/)

# java - 调用网络服务时出错

> ID：10580993
> 
> 赞同：0
> 
> 时间：2012-05-14T09:51:02.433
> 
> 标签：java, android, web-services, ksoap2

我已经完成了使用 .net c# 开发的 asmx，它运行良好

但是当我需要使用 java android 错误调用时发现错误：java.lang.ClassCastException:org.ksoap2.serialization.SoapObject cannot be cast to org.ksoap2.serialization.SoapPrimitive

结果显示在我的 asmx 上：

```
<customer xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://tempuri.org/">
<customerID>1</customerID>
<companyName>ABC</companyName>
<contactName>Jack</contactName>
<customerID>2</customerID>
<companyName>SS Company</companyName>
<contactName>Mary</contactName>
</customer> 
```

我的java cs：

```
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        tv = (TextView)findViewById(R.id.textView1);

        SoapObject Request = new SoapObject (NAMESPACE, METHOD_NAME);
        Request.addProperty("custID", "member");

        SoapSerializationEnvelope soapEnvelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

        soapEnvelope.dotNet = true;
        soapEnvelope.setOutputSoapObject(Request);

        AndroidHttpTransport aht = new AndroidHttpTransport(URL);

        try
        {
         aht.call(SOAP_ACTION, soapEnvelope);
        SoapObject resultString = (SoapObject) soapEnvelope.getResponse();
        tv.setText(resultString.toString());
        }
        catch(Exception e)
        {
            tv.setText(e.toString());          
        }                 
    } 
```

[如果我使用http://www.w3schools.com/webservices/tempconvert.asmx](http://www.w3schools.com/webservices/tempconvert.asmx)，上面的代码就可以运行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T09:02:32.387

我已经解决了

```
 SoapObject resultString = (SoapObject) soapEnvelope.getResponse();           

            String addon = "";
            for(int i =0;i<resultString.getPropertyCount();i++)
            {                            
                SoapObject array2 = (SoapObject) resultString .getProperty(i);              
                addon = (addon + "ID = " + array2.getProperty(0).toString() + array2.getProperty(1).toString() + array2.getProperty(2).toString() + "\n");  
            }
            tv.setText(addon.toString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T10:23:04.677

1) 将**userType**更改为**custID**。这是你的错。

测试[这个](http://max-5.com.my/service.asmx/GetCustomer?userType=member)。

在这些情况下，ksoap2 序列化程序无法将返回的字符串转换为有效的 xml 字符串。

2）试试这个：

```
aht.call(SOAP_ACTION, soapEnvelope);
SoapObject resultString = (SoapObject) soapEnvelope.getResponse();
tv.setText(resultString.getPropertyAsString("customerID")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T14:22:34.773

似乎您必须解析一个复杂的对象。您必须创建一个`Customer`实现`KvmSerializable`接口的类。看看这个：[http ://seesharpgears.blogspot.com.es/2010/10/ksoap-android-web-service-tutorial-with.html](http://seesharpgears.blogspot.com.es/2010/10/ksoap-android-web-service-tutorial-with.html)

# java - 使用扫描仪处理字符串

> ID：10580998
> 
> 赞同：1
> 
> 时间：2012-05-14T09:51:30.963
> 
> 标签：java

问题：编写一个名为 wordWrap 的方法，该方法接受一个代表输入文件的 Scanner 作为其参数，并将文件的每一行输出到控制台，将所有超过 60 个字符的行换行。例如，如果一行包含 112 个字符，则该方法应将其替换为两行：一行包含前 60 个字符，另一行包含最后 52 个字符。包含 217 个字符的行应分成四行：三行长度为 60，最后一行长度为 37。

**我的代码：**

```
public void wordWrap(Scanner input) {

    while(input.hasNextLine()){
        String line=input.nextLine();
        Scanner scan=new Scanner(line);
        if(scan.hasNext()){
            superOuter:
            while(line.length()>0){

                for(int i=0;i<line.length();i++){
                    if( i<60 && line.length()>59){
                        System.out.print(line.charAt(i));

                    }
                    //FINISH OFF LINE<=60 characters here

                    else if(line.length()<59){

                        for(int j=0;j<line.length();j++){
                            System.out.print(line.charAt(j));

                        }
                        System.out.println();

                        break superOuter;
                    }
                    else{
                        System.out.println();

                        line=line.substring(i);

                        break ;
                    }

                }

            }
        }
        else{
            System.out.println();
        }

    }
} 
```

*输出中的问题：*

**预期输出：**

```
你好
你好吗
敏捷的棕色狐狸跳过懒惰的狗 敏捷的棕色
狐狸跳过懒狗
我没事

谢谢
敏捷的棕色狐狸跳过懒惰的狗 敏捷的棕色
狐狸跳过懒狗
敏捷的棕色狐狸跳过懒惰的狗 敏捷的棕色
狐狸跳过懒狗

敏捷的棕色狐狸跳过懒惰的狗 敏捷的棕色
狐狸跳过懒狗
敏捷的棕色狐狸跳过懒惰的狗 敏捷的棕色
狐狸跳过懒狗
敏捷的棕色狐狸跳过懒惰的狗 敏捷的棕色
狐狸跳过懒狗

这一行正好有六十个字符长；很有意思！

再见

```

**产生的输出：**

```
你好
你好吗
敏捷的棕色狐狸跳过懒惰的狗 敏捷的棕色
狐狸跳过懒狗
我没事

谢谢
敏捷的棕色狐狸跳过懒惰的狗 敏捷的棕色
狐狸跳过懒狗
敏捷的棕色狐狸跳过懒惰的狗 敏捷的棕色
狐狸跳过懒狗

敏捷的棕色狐狸跳过懒惰的狗 敏捷的棕色
狐狸跳过懒狗
敏捷的棕色狐狸跳过懒惰的狗 敏捷的棕色
狐狸跳过懒狗
敏捷的棕色狐狸跳过懒惰的狗 敏捷的棕色
狐狸跳过懒狗

这一行正好有六十个字符长；多么有趣！这一行正好有六十个字符；多么有趣！这一行正好有六十个字符；很有意思！...
*** 错误：第 13 行输出过多

```

*我哪里做错了？？？？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T10:04:41.400

在`else`条件中（对于正好 60 个字符的行），您只是从内部`for`循环中断，而您想从外部`while`循环中断（因此，您最终会写出同一行 60 次）。

改为使用`break superOuter`少于 59 个字符的行。

# javascript - javascript得到什么样的属性？

> ID：10580999
> 
> 赞同：0
> 
> 时间：2012-05-14T09:51:33.287
> 
> 标签：javascript, client

我想通过javascript获取客户信息。但是我不知道javascript获取了哪些属性。我应该如何学习这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T09:54:24.770

查看[窗口](https://developer.mozilla.org/en/DOM/window)和[文档对象属性](https://developer.mozilla.org/en/DOM/document)。所有客户端信息都在这里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T10:08:12.827

你可以使用 Navigator userAgent 属性，据我了解你的问题

[示例 Navigator userAgent 属性](http://www.w3schools.com/js/tryit.asp?filename=try_nav_all)

[一个很好的用户代理参考](http://msdn.microsoft.com/en-us/library/ms537503%28v=vs.85%29.aspx#ViewingUA)