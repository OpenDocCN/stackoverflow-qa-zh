# StackOverflow 问答 11060000-11060999

# php - Symfony2 使用自定义实体提供程序对某人进行身份验证错误

> ID：11060000
> 
> 赞同：0
> 
> 时间：2012-06-16T01:15:58.893
> 
> 标签：php, symfony, user-management

我在尝试为用户身份验证实现**自定义实体提供程序时遇到了问题。**我得到了我的实体不是有效或映射的超类的映射异常。这是我的实际错误： **------------- 异常/错误开始 --------------**

```
1/1 MappingException: Class MunichInnovationGroup\PatentBundle\Entity\UmUsers is not a valid entity or mapped super class.

in C:\wamp\www\idp\vendor\doctrine\lib\Doctrine\ORM\Mapping\MappingException.php line 142
at MappingException::classIsNotAValidEntityOrMappedSuperClass() in C:\wamp\www\idp\vendor\doctrine\lib\Doctrine\ORM\Mapping\Driver\DriverChain.php line 80
at DriverChain->loadMetadataForClass() in C:\wamp\www\idp\vendor\doctrine\lib\Doctrine\ORM\Mapping\ClassMetadataFactory.php line 281
at ClassMetadataFactory->loadMetadata() in C:\wamp\www\idp\vendor\doctrine\lib\Doctrine\ORM\Mapping\ClassMetadataFactory.php line 170
at ClassMetadataFactory->getMetadataFor() in C:\wamp\www\idp\vendor\doctrine\lib\Doctrine\ORM\EntityManager.php line 257
at EntityManager->getClassMetadata() in C:\wamp\www\idp\vendor\doctrine\lib\Doctrine\ORM\EntityManager.php line 573
at EntityManager->getRepository() in C:\wamp\www\idp\vendor\symfony\src\Symfony\Bridge\Doctrine\Security\User\EntityUserProvider.php line 42
at EntityUserProvider->__construct() in C:\wamp\www\idp\app\cache\dev\appDevDebugProjectContainer.php line 2191
at appDevDebugProjectContainer->getSecurity_User_Provider_Concrete_UserDbService() in C:\wamp\www\idp\app\bootstrap.php.cache line 190
at Container->get() in C:\wamp\www\idp\app\cache\dev\appDevDebugProjectContainer.php line 2174
at appDevDebugProjectContainer->getSecurity_User_Provider_Concrete_ChainProviderService() in C:\wamp\www\idp\app\bootstrap.php.cache line 190
at Container->get() in C:\wamp\www\idp\app\cache\dev\appDevDebugProjectContainer.php line 2140
at appDevDebugProjectContainer->getSecurity_Authentication_ManagerService() in C:\wamp\www\idp\app\bootstrap.php.cache line 190
at Container->get() in C:\wamp\www\idp\app\cache\dev\appDevDebugProjectContainer.php line 1304
at appDevDebugProjectContainer->getSecurity_ContextService() in C:\wamp\www\idp\app\bootstrap.php.cache line 190
at Container->get() in C:\wamp\www\idp\app\cache\dev\appDevDebugProjectContainer.php line 1178
at appDevDebugProjectContainer->getProfilerService() in C:\wamp\www\idp\app\bootstrap.php.cache line 190
at Container->get() in C:\wamp\www\idp\app\cache\dev\appDevDebugProjectContainer.php line 1195
at appDevDebugProjectContainer->getProfilerListenerService() in C:\wamp\www\idp\app\bootstrap.php.cache line 190
at Container->get() in C:\wamp\www\idp\app\cache\dev\classes.php line 4779
at ContainerAwareEventDispatcher->lazyLoad() in C:\wamp\www\idp\app\cache\dev\classes.php line 4768
at ContainerAwareEventDispatcher->dispatch() in C:\wamp\www\idp\app\cache\dev\classes.php line 3916
at HttpKernel->handleException() in C:\wamp\www\idp\app\cache\dev\classes.php line 3855
at HttpKernel->handle() in C:\wamp\www\idp\app\cache\dev\classes.php line 4828
at HttpKernel->handle() in C:\wamp\www\idp\app\bootstrap.php.cache line 547
at Kernel->handle() in C:\wamp\www\idp\web\app_dev.php line 20

**------------- Exception/Error End --------------** 
```

让我们描述一下我的应用程序

1.  我有三个数据库**DB-A**，**DB-B**，**DB-C**并在**config.yml**文件中建立三个**默认**的数据库连接：DB-A，**DB_B**：DB-B，**DB_C**：DB-C
2.  **默认**连接使用**default_entity_manager** ORM 配置，其他实体管理器**DB_B** 使用连接 DB_B 并与 MIGPatBundle 映射，**DB_C**使用连接 DB_C 并与 MIGPatBundle 映射。
3.  我的**UmUsers**实体位于 MIGPatBundle 中，我们需要在**DB-B**数据库中对其进行验证。
4.  我详细解释了这些，因为如果我将**default_entity_manager** ORM 从**默认**更改为**DB_B**那么它工作正常。

这是我的文件

------------- config.yml 开始 --------------

```
**Doctrine Configuration**

doctrine:
  dbal:
    default_connection:       default
    connections:
        default:
            driver:   "%db_driver_DB-A%"
            host:     "%db_host_DB-A%"
            port:     "%db_port_DB-A%"
            dbname:   "%db_name_DB-A%"
            user:     "%db_user_DB-A%"
            password: "%db_password_DB-A%"
            charset:  UTF8
        DB_B:
            driver:   "%db_driver_DB-B%"
            host:     "%db_host_DB-B%"
            port:     "%db_port_DB-B%"
            dbname:   "%db_name_DB-B%"
            user:     "%db_user_DB-B%"
            password: "%db_password_DB-B%"
            charset:  UTF8
        DB_C:
            driver:   "%db_driver_DB-C%"
            host:     "%db_host_DB-C%"
            port:     "%db_port_DB-C%"
            dbname:   "%db_name_DB-C%"
            user:     "%db_user_DB-C%"
            password: "%db_password_DB-C%"
            charset:  UTF8

orm:
    default_entity_manager:   default
    entity_managers:
        default:
            connection:       default
            mappings:
                MIGBundle: ~
        DB_B:
            connection:       DB_B
            mappings:
                MIGPatBundle: ~
        DB_C:
            connection:       DB_C
            mappings:
                MIGPatBundle: ~ 
```

------------- config.yml 结束 --------------

------------- security.yml 开始 ------------

```
security:
encoders:
    MIG\PatBundle\Entity\UmUsers:
        algorithm: sha512
        encode-as-base64: true
        iterations: 10

role_hierarchy:
    ROLE_ADMIN:       ROLE_USER
    ROLE_SUPER_ADMIN: [ROLE_USER, ROLE_ADMIN, ROLE_ALLOWED_TO_SWITCH]

providers:
    chain_provider:
        providers: [user_db]
    user_db:
        entity: { class: MIG\PatBundle\Entity\UmUsers }

firewalls:
    secured_area:
        pattern:    ^/
        anonymous: ~
        logout:
            target: /
        form_login:
            provider: chain_provider
            check_path:  /security/login_check
            default_target_path: /
            login_path:  /security/login

access_control:
    - { path: ^/account, roles: ROLE_USER }
    - { path: ^/management, roles: ROLE_ADMIN }
    - { path: ^/portfolio, roles: ROLE_USER }
    - { path: ^/portfoliogroup, roles: ROLE_USER }
    - { path: ^/security, roles: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/userpatent, roles: ROLE_USER }
    - { path: ^/_internal, roles: IS_AUTHENTICATED_ANONYMOUSLY, ip: 127.0.0.1 }

access_denied_url: /security/forbidden 
```

------------- security.yml End --------------

------------- 用户实体开始 --------------

```
<?php

namespace MIG\PatBundle\Entity;

use Doctrine\Common\Collections\ArrayCollection;
use Doctrine\ORM\Mapping as ORM;
use Symfony\Bridge\Doctrine\Validator\Constraints\UniqueEntity;
use Symfony\Component\Validator\Constraints as Assert;
use Symfony\Component\Security\Core\User\UserInterface;

/**
 *MIG\PatBundle\Entity\UmUsers
 *  
 *@ORM\Entity(repositoryClass="MIG\PatBundle\Entity\UserRepository")
 *@ORM\Table(name = "um_users")
 */
class UmUsers implements UserInterface
{

 /**
  @var string $id

  @ORM\Column(name="id", type="string", length=36, nullable=false)
  @ORM\Id
  @ORM\GeneratedValue(strategy="UUID")
 */
private $id;

/**
 * @ORM\Column(name="user_name", type="string", length=50, nullable=true)
 *
 * @var string $userName
 */
private $userName;

/**
 * @var string $email
 *
 * @ORM\Column(name="email", type="string", length=100, nullable=false)
 */
private $email;

    /**
 * @ORM\Column(name="password", type="string", length=100, nullable=false)
 *
 * @Assert\MinLength(
 *     limit = 6,
 *     message = "The password must contain at least {{ limit }} characters."
 * )
 * @var string $password
 */
private $password;

/**
 * @var string $salt
 *
 * @ORM\Column(name="salt", type="string", length=255, nullable=false)
 */
private $salt;

/**
 * @var string $activationCode
 *
 * @ORM\Column(name="activation_code", type="string", length=255, nullable=false)
 */
private $activationCode;

/**
 * @var boolean $activated
 *
 * @ORM\Column(name="activated", type="boolean", nullable=true)
 */
private $activated;

/**
 * @var UmRoles
 *
 * @ORM\ManyToMany(targetEntity="UmRoles", inversedBy="user")
 * @ORM\JoinTable(name="um_usersinroles",
 *   joinColumns={
 *     @ORM\JoinColumn(name="user_id", referencedColumnName="id")
 *   },
 *   inverseJoinColumns={
 *     @ORM\JoinColumn(name="role_id", referencedColumnName="id")
 *   }
 * )
 */
private $role;

public function __construct()
{
    $this->role = new \Doctrine\Common\Collections\ArrayCollection();
    $this->createdAt = new \DateTime();
    $this->lastLoginAt = new \DateTime();
    $this->lastUpdatedDate = new \DateTime();
    $this->lastLoginDate = new \DateTime();
    $this->lastPasswordChangedDate = new \DateTime();
}

/**
 * Get id
 *
 * @return string 
 */
public function getId()
{
    return $this->id;
}

/**
 * Set userName
 *
 * @param string $userName
 */
public function setUserName($userName)
{
    $this->userName = $userName;
}

/**
 * Get userName
 *
 * @return string 
 */
public function getUserName()
{
    return $this->userName;
}

/**
 * Set email
 *
 * @param string $email
 */
public function setEmail($email)
{
    $this->email = $email;
}

/**
 * Get email
 *
 * @return string
 */
public function getEmail()
{
    return $this->email;
}

/**
 * Set password
 *
 * @param string $password
 */
public function setPassword($password)
{
    $this->password = $password;
}

/**
 * Get password
 *
 * @return string 
 */
public function getPassword()
{
    return $this->password;
}

/**
 * Set salt
 *
 * @param string $salt
 */
public function setSalt($salt)
{
    $this->salt = $salt;
}

/**
 * Get salt
 *
 * @return string 
 */
public function getSalt()
{
    return $this->salt;
}

/**
 * Set activationCode
 *
 * @param string $activationCode
 */
public function setActivationCode($activationCode)
{
    $this->activationCode = $activationCode;
}

/**
 * Get activationCode
 *
 * @return string 
 */
public function getActivationCode()
{
    return $this->activationCode;
}

/**
 * Set activated
 *
 * @param boolean $activated
 */
public function setActivated($activated)
{
    $this->activated = $activated;
}

/**
 * Get activated
 *
 * @return boolean 
 */
public function getActivated()
{
    return $this->activated;
}

/**
 * Add role
 *
 * @param MIG\PatBundle\Entity\UmRoles $role
 */
public function addUmRoles(\MIG\PatBundle\Entity\UmRoles $role)
{
    $this->role[] = $role;
}

/**
 * Get role
 *
 * @return Doctrine\Common\Collections\Collection 
 */
public function getRole()
{
    return $this->role;
}

/**
 * Gets an array of roles.
 *
 * @return array An array of Role objects
 */
public function getRoles()
{
    return $this->getRole()->toArray();
}

/**
 * Erases the user credentials.
 */
public function eraseCredentials()
{
}

/**
 * Compares this user to another to determine if they are the same.
 *
 * @param UserInterface $user The user
 * @return booleanean True if equal, false othwerwise.
 */
public function equals(UserInterface $user)
{
    return md5($this->getUsername()) == md5($user->getUsername());
} 
```

}

------------- 用户实体端 --------------

------------- UserRepository 实体开始--------------

```
namespace MIG\PatBundle\Entity;

use Symfony\Component\Security\Core\User\UserInterface;
use Symfony\Component\Security\Core\User\UserProviderInterface;
use Symfony\Component\Security\Core\Exception\UsernameNotFoundException;
use Symfony\Component\Security\Core\Exception\UnsupportedUserException;
use Doctrine\ORM\EntityRepository;
use Doctrine\ORM\NoResultException;

class UserRepository extends EntityRepository implements UserProviderInterface
{
public function loadUserByUsername($username)
{
    $q = $this
        ->createQueryBuilder('u')
        ->where('u.userName = :username OR u.email = :email')
        ->setParameter('username', $username)
        ->setParameter('email', $username)
        ->getQuery()
    ;

    try {
        // The Query::getSingleResult() method throws an exception
        // if there is no record matching the criteria.
        $user = $q->getSingleResult();
    } catch (NoResultException $e) {
        throw new UsernameNotFoundException(sprintf('Unable to find an active admin MunichInnovationGroup\PatentBundle\Entity\UmUsers object identified by "%s".', $username), null, 0, $e);
    }

    return $user;
}

public function refreshUser(UserInterface $user)
{
    $class = get_class($user);
    if (!$this->supportsClass($class)) {
        throw new UnsupportedUserException(sprintf('Instances of "%s" are not supported.', $class));
    }

    return $this->loadUserByUsername($user->getUsername());
}

public function supportsClass($class)
{
    return $this->getEntityName() === $class || is_subclass_of($class, $this->getEntityName());
}
} 
```

---------- UserRepository 实体结束--------------

实际上我有一个截止日期来完成这项任务。如果有人能给我解决方案，我将非常高兴。

问候，扎伊夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T12:06:15.003

如果你查看 vendor/symfony/src/Symfony/Bundle/SecurityBundle/Resources/config/security.xml，你会看到：

```
<service id="security.user.provider.entity" class="%security.user.provider.entity.class%" abstract="true" public="false"    >
    <argument type="service" id="security.user.entity_manager" />       
</service>
<service id="security.user.entity_manager" alias="doctrine.orm.entity_manager" public="false" /> 
```

我认为您需要覆盖`security.user.entity_manager`，但我不确定如何（也许在 security.yml 中添加一些行会起作用），并且由于它不是公开的，我不确定您是否可以。

如果这不起作用，也许您可​​以报告有关此的问题。

# ntfs - 如何确定 NTFS 文件夹是否损坏？

> ID：11060002
> 
> 赞同：0
> 
> 时间：2012-06-16T01:16:01.607
> 
> 标签：ntfs, corruption

最近，我遇到了一个未知问题，导致 NTFS 文件夹中的特定文件夹在多台计算机中损坏。我需要检测文件夹是否已损坏并执行重新定位文件夹或发送通知等操作。但是我还不知道该怎么做。正常的 API，如 OpenFile/CreateFile 似乎因文件夹损坏而出现故障，我无法使用它们来确定文件夹是否损坏。所以我打算解析MTF结构并直接检查问题。

于是，我开始研究NTFS MFT结构。我发现 $Volume 有一个脏标志来确定驱动器是否需要 chkdisk。但它与文件损坏没有直接关系，并且会在 Windows 意外关闭时设置。DI 未能找到特定标志或任何东西来确定 MFT 结构中的 INDEX 或 FILE 是否损坏。

我能否知道是否有办法确定损坏的 NTFS 文件夹？

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T18:55:20.790

我发现了与 NTFS 磁盘损坏问题有关的 3 件事。它是不完整的；但是，如果没有更新的 NTFS 源代码，很难找出微软在 chkdisk 中真正做了什么。如果有人需要知道，我会发布我发现的内容。

“文件记录”部分的 $BadClus 中有 1 个脏标志

如果 $BadClus 中的标志设置为 ON，则操作系统将在启动时执行磁盘扫描。如果遇到磁盘操作，我相信 NTFS 模块会将标志设置为 ON。

2 文件记录标识字段中的“BAAD”

如果文件记录有问题，例如 USA/USN 不匹配，则 MFT 可以在文件记录结构的标识字段中将“FILE”替换为“BAAD”。它可用于快速识别损坏的文件/目录。

3 比较每个 FILE/INDX 记录中的 USA/USN

FILE/INDX 结构都包含用于损坏检查的 USA/USN。扫描系统并比较 USA 和 USN 可以帮助您发现腐败问题。

# jboss - 哪个 jboss 应用程序服务器与 netbeans 6.91 一起使用？

> ID：11060007
> 
> 赞同：0
> 
> 时间：2012-06-16T01:17:13.723
> 
> 标签：jboss, netbeans-6.9, installation, appserver

我正在尝试在 netbeans 6.9.1 中添加 jboss 服务器，我尝试过 openlogic-jboss-5.1.0.GA-all-bin-1 jboss-as-distribution-6.1.0.Final jboss-as-distribution-6.0。 0.20100721-M4-src jboss-5.1.0.GA-src.tar 但它给出了同样的错误选择有效的 jboss 应用程序服务器 4 或 5 任何人都可以给我一个它的确切版本的链接。我只需要指定服务器文件夹的路径还是需要做其他事情？请简要说明。谢谢你。

感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T01:58:36.840

我得到了解决方案。我不会删除这个问题，因为任何有此类疑问的人都可以从中获得帮助。

请参阅此链接 [http://www.paulomotta.pro.br/2011/05/14/netbeans-6-9-jboss-6-support-to-use-icefaces-2-0](http://www.paulomotta.pro.br/2011/05/14/netbeans-6-9-jboss-6-support-to-use-icefaces-2-0)

下载块末尾指定的代码并将文件放在指定位置。

# sql - 表上的锁定保持时间

> ID：11060008
> 
> 赞同：0
> 
> 时间：2012-06-16T01:17:14.243
> 
> 标签：sql, oracle, oracle10g, oracle11g

我如何才能找到在桌子上持有的锁以及持有锁的进程以及在哪个桌子上以及已经持有多长时间的锁？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T06:12:55.347

没有测试这个查询，但我认为这会给你想要的结果。

```
select session_id "sid",SERIAL#  "Serial",
 substr(object_name,1,20) "Object",
 substr(os_user_name,1,10) "Terminal",
 substr(oracle_username,1,10) "Locker",
 nvl(lockwait,'active') "Wait",
 decode(locked_mode,
        2, 'row share',
        3, 'row exclusive',
        4, 'share',
        5, 'share row exclusive',
        6, 'exclusive',  'unknown') "Lockmode",
 OBJECT_TYPE "Type"
 ,ctime "locked_time"
FROM
 SYS.V_$LOCKED_OBJECT A,
 SYS.ALL_OBJECTS B,
 SYS.V_$SESSION c,
 V$LOCK d
WHERE
 A.OBJECT_ID = B.OBJECT_ID AND
 C.SID = A.SESSION_ID
 AND d.sid =A.session_id
ORDER BY 1 ASC, 5 Desc
/ 
```

这`ctime`是自`current mode`(locked_mode) 被授予以来的时间。我在下面的参考资料中找到了这个查询： [脚本](http://www.adp-gmbh.ch/ora/admin/scripts/locks.html)

# asp.net - ASP.NET：在不使用 Membership API 的情况下，如何将资源文件（例如 jpg）限制为某些角色？

> ID：11060013
> 
> 赞同：1
> 
> 时间：2012-06-16T01:18:29.643
> 
> 标签：asp.net

限制对 aspx 页面的访问很容易，只需在代码隐藏中使用角色检查逻辑即可。但是像照片这样的资源文件并没有代码来放置角色检查逻辑，那么如何限制访问呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T01:55:43.610

首先，您需要设置 IIS。如果您有 IIS7+，那就轻而易举了。将您的应用程序池从 Classic 更改为 Integrated Pipeline。这允许将托管模块和处理程序应用于您的静态资源文件。如果您使用的是 IIS6，[请参阅这篇文章](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/784eeb32-d781-4917-95b3-34f302a81680.mspx?mfr=true)。

其次，您可能需要在 web.config 中确保此设置（对于 IIS7）：

```
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer> 
```

FormsAuth 之类的东西现在应该与 ASPX 等一样工作，这意味着您只能通过使用 web.config 来限制授权用户的路径（例如）。

**更新**

回应以下光圈的评论：

除了使用 之外`RoleProviders`，ASP.NET 可以通过在使用 Windows 身份验证时读取用户所属的组来确定主体的角色，或者通过替换应用程序中的当前 IPrincipal 来手动更改角色，最好是在`AuthenticateRequest`.

`Global.asax.cs`

```
public void Application_AuthenticateRequest(object sender, EventArgs e)
{
    var application = sender as HttpApplication;
    var context = application.Context;

    if (!context.User.Identity.IsAuthenticated) return; // if the user hasn't been authenticated by another module such as FormsAuth, don't do anything further

    string[] roleNames = FindRolesForUser(context.User.Identity.Name); // this method you will create to figure out what roles the specified user has
    context.User = new GenericPrincipal(new GenericIdentity(context.User.Identity.Name), roleNames); // updates the current principal. 
} 
```

现在，就检查我们上面指定的角色而言，有很多方法。您可以创建一个自定义 HttpModule 来查找以 JPG、GIF、JS 等结尾的路径，然后简单地检查`context.User.IsInRole`. 您也可以简单地在 web.config 中使用`location`和：`authorization`

```
 <location path="images">
      <system.web>
         <authorization>
            <allow users="?"/> <!-- or perhaps <allow roles="Admins" /> it's up to you -->
         </authorization>
      </system.web>
   </location> 
```

底线是，**在您配置集成管道或将静态资源映射到 ASP.NET ISAPI 模块之前，您无法在请求静态资源期间执行任何托管代码**。所以，我的回答是恰当的。

# c# - 命令提示符输出被读取为空字符串

> ID：11060019
> 
> 赞同：4
> 
> 时间：2012-06-16T01:20:03.427
> 
> 标签：c#, command-prompt

我正在尝试执行命令提示符命令并读取 C# 中的输出。这是我的代码：

```
ProcessStartInfo cmdInfo = new ProcessStartInfo("cmd.exe", "/c " + command);
cmdInfo.CreateNoWindow = true;
cmdInfo.RedirectStandardOutput = true;
cmdInfo.UseShellExecute = false;

Process cmd = new Process();
cmd.StartInfo = cmdInfo;
cmd.Start();
string result = cmd.StandardOutput.ReadToEnd();
cmd.WaitForExit();
cmd.Close();
return result; 
```

它在大多数情况下都有效，但有时 result="" 对于我正在使用的命令来说是不可能的（例如， route add 应该在成功或失败时给出输出）。有任何想法吗？我想知道我是否在进程和 ReadToEnd 调用之间创建了竞争条件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-16T01:27:08.560

并非所有输出都写入 StandardOutput；如果出现问题，许多应用程序将改为写入 StandardError。您必须从两者中读取才能获得所有输出。

只要应用程序从不阻塞输入，调用`ReadToEnd()`两个输出流以获取所有输出应该是安全的。然而，一个更安全的选择是将事件连接到`OutputDataReceived`和`ErrorDataReceived`事件。您可以将 lambda 表达式附加到这些关闭局部变量的变量上，以使事情变得非常简单：

```
var output = new StringBuilder();
var error = new StringBuilder();

cmd.OutputDataReceived += (o, e) => output.Append(e.Data);
cmd.ErrorDataReceived += (o, e) => error.Append(e.Data);

cmd.Start();
cmd.BeginOutputReadLine();
cmd.BeginErrorReadLine();
cmd.WaitForExit(); 
```

# emacs - ESS + AUCTeX + Sweave。来自 .Rnw <-> pdfviewer 的 SyncteX 集成？

> ID：11060023
> 
> 赞同：3
> 
> 时间：2012-06-16T01:20:26.583
> 
> 标签：emacs, sweave, ess, auctex

我正在将我的工具链从 R + TeXShop 改造成我希望通过 emacs（Aquamacs，具体而言）更高效的 Sweave -> LaTeX -> SyncteX -> pdfview (skim) AUCTeX-mode (with emacs-speaks- statsitics 的 sweave 次要模式）。AUCTeX -> pdfview 链中的 SyncteX 一切正常，从 Sweave 编译为 .pdf 一切正常。

当我添加 Sweave 作为第一步时，麻烦就来了。.Rnw 文件现在成为主要的原始文档，它生成的 .tex 文件只是一个中间步骤。当然，SyncteX 锁定的是 .tex 文件。

我对 .emacs 文件所做的唯一更改是注册两个新命令以从 .Rnw 构建 .pdf。

谁能提供有关如何让 emacs 使用 SyncteX 将输出 .pdf 同步到 .Rnw 而不是 .tex 的建议？

谢谢！

**编辑1：** **警告：**这最终成为我整个下午摸索的总结。我非常接近解决方案，但最后却被一个我找不到文档的错误所挫败。**警告 2：**今天是我第一次深入了解 emacs 的内部工作原理。肯定会出现错误或效率低下。

VitoshKa 的回答让我大部分时间都在那里。将他的建议添加到我的 .emacs（好吧，Preferences.el，但功能相同）文件中会导致`Symbol’s value as variable is void: noweb-minor-mode-map`启动时出错，因为 Aquamacs 似乎在其其余 init 文件之前加载 .emacs 文件。

我通过`(require 'ess-site) (require 'ess-eldoc)`在 VitoshKa 的`(define-key noweb-minor-mode-map (kbd "\C-c \C-c") 'Rnw-command-master)`. 不幸的是，Aquamacs 附带的 ess-swv.elc 文件已经是二进制文件，并强制 Mn P 阅读器使用 acroread。因此，我将 ess-swv.el 文件的一部分的以下编辑添加到我自己的 .emacs 的底部：

```
(defun ess-makePDFandView ()
(interactive)
(setq namestem (substring (buffer-name) 0 (search ".Rnw" (buffer-name))))
(setq tex-filename (concat "\"" namestem "\".tex"))
(setq my-command-string (concat "pdflatex -synctex=1" tex-filename))
(shell-command my-command-string)
(setq my-command-string (concat "/Applications/Skim.app/Contents/MacOS/Skim \"" namestem ".pdf\" &"))
(shell-command my-command-string))

(define-key noweb-minor-mode-map "\M-nv" 'ess-makePDFandView) 
```

**现在 emacs 将使用Mn v**或**Cc Cc View RET**从 emacs 以正确的 pdf 名称启动skim 。还有一个障碍要克服...

emacs 中的 Command-Shift-Click 尝试同步到 filename.Rnw.pdf（但丢弃错误消息至少仍会导致 pdfviewer 中的正确同步）。pdfviewer 中的 Command-Shift-Click 以搜索回源强制 emacs 打开 filename.tex 文件并同步到该文件。[幸运的是，Cameron Bracken 对此进行了修复](http://cameron.bracken.bz/synctex-with-sweavepgfsweave-in-texshoptexworks)。他只是没有完全走上 emacs 集成的道路。

所以我在我的 .emacs 中添加了 ess-swv.el 的进一步破解：

```
(defun ess-swv-latex-rnw-sync ()
  "Run LaTeX on the product of Sweave()ing the current file."
  (interactive)
  (save-excursion
    (let* ((namestem (file-name-sans-extension (buffer-file-name)))
           (latex-filename (concat namestem ".tex"))
       (synctex-filename (concat namestem ".synctex.gz"))
           (tex-buf (get-buffer-create " *ESS-tex-output*"))
       (patchDVI-command-string (concat "Rscript -e \"library('patchDVI');patchSynctex('" synctex-filename "')\"")))
    (message "synctex string: %s" patchDVI-command-string) 
    (message "Running LaTeX on '%s' ..." latex-filename)
    (switch-to-buffer tex-buf)
    (call-process "latex" nil tex-buf 1 "-synctex=1 " latex-filename)
    (switch-to-buffer (buffer-name))
    (display-buffer tex-buf)
    (message "Finished running LaTeX" )
    (message "Running patchDVI...")
    (shell-command patchDVI-command-string))))

(define-key noweb-minor-mode-map "\M-nq" 'ess-swv-latex-rnw-sync) 
```

认为这是缺少修补 DVI 并将其同步...但没有！Command-Shift-Click 上的行为与上面相同...回到破解 ess-swv。我删除了 ess-makePDFandView 函数，而是将以下内容添加到我的 .emacs 中：

```
(defun ess-swv-PDF-rnw-sync (&optional pdflatex-cmd)
"From LaTeX file, create a PDF (via 'texi2pdf' or 'pdflatex', ...), by
default using the first entry of `ess-swv-pdflatex-commands' and display it."
(interactive
  (list
    (let ((def (elt ess-swv-pdflatex-commands 0)))
    (completing-read (format "pdf latex command (%s): " def)
                   ess-swv-pdflatex-commands ; <- collection to choose from
                   nil 'confirm ; or 'confirm-after-completion
                   nil nil def))))
(let* ((buf (buffer-name))
     (namestem (file-name-sans-extension (buffer-file-name)))
     (latex-filename (concat namestem ".tex"))
     (tex-buf (get-buffer-create " *ESS-tex-output*"))
     (pdfviewer (ess-get-pdf-viewer))
     (pdf-status)
     (cmdstr-win (format "start \"%s\" \"%s.pdf\""
                         pdfviewer namestem))
     (cmdstr (format "\"%s\" \"%s.pdf\" &" pdfviewer namestem)))
;;(shell-command (concat "pdflatex " latex-filename))
(message "Running '%s' on '%s' ..." pdflatex-cmd latex-filename)
(switch-to-buffer tex-buf)
(setq pdf-status
      (call-process pdflatex-cmd nil tex-buf 1 "-synctex=1 " 
                    (if (string= "texi2" (substring pdflatex-cmd 0 5))
                        ;; workaround (bug?): texi2pdf or texi2dvi *fail* to work with      full path:
                        (file-name-nondirectory latex-filename)
                      latex-filename)))
(if (not (= 0 pdf-status))
    (message "** OOPS: error in '%s' (%d)!" pdflatex-cmd pdf-status)
  ;; else: pdflatex probably ok
  (shell-command
   (concat (if (and ess-microsoft-p (w32-shell-dos-semantics))
               cmdstr-win
             cmdstr))))
(switch-to-buffer buf)
(display-buffer tex-buf)))

(define-key noweb-minor-mode-map "\M-nv" 'ess-swv-PDF-rnw-sync) 
```

越来越近了，但我们仍然需要告诉 auctex 要通过哪些文件名进行浏览。所以我硬着头皮编辑了 auctex-config.el。我注释掉了现有的 aquamacs-call-viewer 函数定义并将其替换为我自己的：

```
(defun aquamacs-call-viewer (line source)
"Display current output file as PDF at LINE (as in file SOURCE).
Calls `aquamacs-tex-pdf-viewer' to display the PDF file using the
Skim AppleScript protocol."
  (cond 
    ((string= (file-name-extension (TeX-active-master)) "Rnw") 
      (let* ((full-file-name 
     (expand-file-name
      ;; as in TeX-view
      ;; C-c C-c view uses %o (from TeX-expand-list), which
      ;; is the same.
      (concat (file-name-sans-extension (TeX-active-master)) "." (TeX-output-extension))
      default-directory))
    (full-source-name
     (expand-file-name 
      (concat (file-name-sans-extension (source)) ".Rnw") ;; this is relative to the master 
      (file-name-directory (full-file-name)))))
   (message "full pdf name: %s" full-file-name)
   (message "full rnw sournce name: %s" full-source-name)
   (do-applescript
(format 
 "
 set theSink to POSIX file \"%s\" 
 set theSource to POSIX file \"%s\" 
 tell application \"%s\" 
 activate 
 open theSink 
 tell front document to go to TeX line %d from theSource%s
 end tell
 " 
 full-file-name full-source-name aquamacs-tex-pdf-viewer line
 ;; do not say "showing reading bar false" so users can override in future
 (cond ((eq t aquamacs-skim-show-reading-bar)
    " showing reading bar true")
       ((eq nil aquamacs-skim-show-reading-bar)
    " showing reading bar false")
       (t ""))))))
(t
 (let* ((full-file-name 
     (expand-file-name
      ;; as in TeX-view
      ;; C-c C-c view uses %o (from TeX-expand-list), which
      ;; is the same.
      (TeX-active-master (TeX-output-extension))
      default-directory))
    (full-source-name
     (expand-file-name 
      source ;; this is relative to the master 
      (file-name-directory full-file-name))))
   (message "IN OTHERWISE!! WAT: %s" (file-name-extension (TeX-active-master)))
   (do-applescript
(format 
 "
 set theSink to POSIX file \"%s\" 
 set theSource to POSIX file \"%s\" 
 tell application \"%s\" 
 activate 
 open theSink 
 tell front document to go to TeX line %d from theSource%s
 end tell
 " 
 full-file-name full-source-name aquamacs-tex-pdf-viewer line
 ;; do not say "showing reading bar false" so users can override in future
 (cond ((eq t aquamacs-skim-show-reading-bar)
    " showing reading bar true")
       ((eq nil aquamacs-skim-show-reading-bar)
    " showing reading bar false")
       (t "")))))))) 
```

还有一个最终测试（请注意，我将工具链的键绑定更改为：Mn s -> Mn q -> Mn v 按 sweave -> latex -> view 的顺序[注意，对于最后一步，您必须使用 pdflatex 和不是texi2pdf]），一切都建立起来，没有错误，启动查看器......

```
"Skim" "/Users/myname/text/testing/myfile.pdf": exited abnormally with code 127. 
```

现在我又完全迷路了。有人对Skim足够熟悉吗？

**编辑 2：**好吧，错误 127 只是在二进制文件中找不到文件。在那里的某个地方，我一定把路弄坏了。所以我`(setenv "PATH" (concat (getenv "PATH") ":" "/Applications/Skim.app/Contents/MacOS"))`在我的 auctex-config.el 顶部附近添加了。现在一切都编译并启动，没有错误......但是emacs上的Command-Shift-Click没有让Skim做出响应（至少它没有给出错误）。在 Skim 上的 Command-Shift-Click 仍然强制 emacs 打开 .tex 文件。

我想这现在已经成为一个非常 Aquamacs + Skim 的特定问题，因为其余的大部分交互都在 applescript 中，除非我在上面指出的 lisp 的关键行中遗漏了一些明显的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T09:00:56.857

澄清。您希望从 Rnw 文件中对 Sweave ( )`C-c C-c` 的输出运行 AUCTeX 命令。`M-n s`

问题是 Auctex 不知道它必须对不同的文件进行操作。这是使它意识到这一点的方法：

```
(defun Rnw-command-master (&optional override-confirm)
  "Run command on the current document.

If a prefix argument OVERRIDE-CONFIRM is given, confirmation will
depend on it being positive instead of the entry in `TeX-command-list'."
  (interactive "P")
  (let ((TeX-transient-master (concat
                               (file-name-sans-extension (buffer-file-name))
                               ".tex"))
        (TeX-master nil))
    (TeX-command (TeX-command-query (TeX-master-file)) 'TeX-master-file
                 override-confirm)))

(define-key noweb-minor-mode-map (kbd "\C-c \C-c") 'Rnw-command-master) 
```

要让 Auctex 首先运行 sweave，需要做一些额外的工作。Noweb 支持现在在 ESS 中被积极重写，到下一个版本，您将拥有一个全新的系统，其中包含 AucTeX 集成和许多其他默认激活的有用功能。

# java - Java 对象数组崩溃

> ID：11060027
> 
> 赞同：4
> 
> 时间：2012-06-16T01:21:24.600
> 
> 标签：java

Java菜鸟问题：

考虑以下 C 数组和初始化程序代码：

```
struct {
  int x;
  int y;
} point_t;

point_t points[1000]; 
```

简单的。这会在加载时创建并分配内存。

现在考虑 Java 中的类似情况：

```
public class point_t
{
   public int x;
   public int y;
}

point_t points[] = new point_t[1000];
// Without this loop, java will crash when you run this
for (int i=0; i<1000; i++)
{
   points[i] = new point_t;
}
points[0].x = 10;  // Crash would occur here without above loop
points[1].x = 10; 
```

最初，我的 java 程序因空指针取消引用而崩溃。问题是，来自 C++，我不知道您必须创建 1000 个 point_t 对象。只是一个评论，但这似乎很疯狂。假设数组大小为 100 万或 10 亿。在运行时用空条目“创建”这个数组实际上需要几秒钟。在 C++ 中，这一切都发生在加载时。我承认你并不总是知道 C++ 数组的单元格中会有什么，但在我工作的嵌入式系统中，内存通常会自动初始化为零，因此它可以工作。

那么，当你有一个对象数组时，在 Java 中有没有更简单、更快、更有效的方法来创建一个数组并分配内存呢？或者我在上面的代码中做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-16T01:25:27.530

由于您来自 C++ 背景，这可能会有所帮助。在 Java 中，当你编写

```
point_t points[] = new point_t[1000]; 
```

这类似于用 C++ 编写，

```
point_t* points[] = new point_t*[1000]; 
```

也就是说，在 Java 中，当您创建数组时，您创建的不是点对象数组，而是点引用数组，就像您在 C++ 中创建点指针数组一样。

Java 是一种托管（垃圾收集）语言；这就是 Java 程序员所期望的。

至于您问题的第二部分，如何自己创建对象，您所做的很好。在循环中创建 1000 个点对象并加载它们。如果你想要更短的代码，你可以编写一个很好的方法来完成这项工作。:)

您还可以查看其他*可能*具有此类便利工厂方法的集合库。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-16T01:26:33.577

写作

```
point_t[] points = new point_t[ 1000 ]; 
```

正在为 point_t 对象分配一千个引用。（在 C 语言中，它分配指向该类型结构的指针。）

那个循环

```
for (int i=0; i<1000; i++)
{
    points[i] = new point_t;
} 
```

分配一个新的 point_t 对象，并将指向它的引用（指针）放入数组中。在你这样做之前，数组只是空值，它可能会给你空异常。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-16T01:31:22.047

`point_t`那不是实例数组；那些生活在堆上。

`point_t`它实际上是堆上这些实例的引用数组。

任何未通过分配给引用值（例如通过调用 new）来初始化的引用都设置为 null。

对于非数组引用类型也是如此。

```
public class Person {
    private String name; // not initialized; that means it's null
    public Person() {} // oops; constructor should have initialized name, but now it's null
    public String getName() { return name; } // returns null unless you set it properly
    public void setName(String newName) { this.name = newName; }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-16T02:55:51.397

您可以使用 [享元模式](http://en.wikipedia.org/wiki/Flyweight_pattern)在不同对象之间共享相同的数据，并将点对象的创建推迟到真正需要时

# c# - 拥有两个单独的 MEF 插件容器是不好的做法吗？

> ID：11060030
> 
> 赞同：2
> 
> 时间：2012-06-16T01:22:20.510
> 
> 标签：c#, plugins, mef

假设我有一个类（不是静态类），`A`它以某种方式使用插件。我使用 MEF 来管理这些插件，并为我的用户添加方法来添加部件目录。示例用法：

```
var myA = new A();
myA.LoadPlugins(new DirectoryCatalog("path/to/plugins"));
myA.DoStuffWithPlugins(); 
```

`A`在与class相同的命名空间中`B`。`B`也使用 MEF 来管理插件，并且有自己的`CompositionContainer`. 如果用户想要与`B`' 的插件交互，她必须使用`B`' 的插件管理方法。

`B`就像`A`上面一样使用。

我的问题是，这很糟糕吗？我是否应该关心在我的命名空间中有两个单独的位置来加载插件？如果不好，有什么替代方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T01:34:09.617

> 我的问题是，这很糟糕吗？我是否应该关心在我的命名空间中有两个单独的位置来加载插件？如果不好，有什么替代方案？

不必要。没有理由不能在同一个应用程序中拥有两个完全独立的组合。

话虽如此，在大多数情况下，也没有真正的理由拥有多个组合。MEF 将同时组合两组数据。在您的情况下，您可以使用相同的组合容器组合您的导入程序和您的报告，这将具有允许扩展您的系统的人只创建一个扩展您的应用程序的两个部分的单个程序集的优势。

这里一个潜在的小红旗是，它们是同一命名空间中的两种不同类型，但每种类型都有自己的插件系统。通常，具有完整插件系统的框架将足够复杂，以至于我会质疑它们是否属于同一个命名空间——尽管从“A”和“B”的类型名称来看，不可能知道这是否真的是不当。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T01:32:13.597

我看不出有什么问题。我会推荐一个基类`class A`来`class B`重用方法。

```
class A : BaseCompositionClass {
    //    implementations
}

class B : BaseCompositionClass {

    //    implementations
} 
```

您可以使用单个[`CatalogExportProvider`](http://msdn.microsoft.com/en-us/library/system.componentmodel.composition.hosting.catalogexportprovider)然后查询该提供程序以获取匹配的导入和导出。`CompositionFactory`然后，您可以使用其中的单个`classA`并`classB`请求组合。

# linux - 在 Linux 上安装 perforce 可视化客户端

> ID：11060032
> 
> 赞同：4
> 
> 时间：2012-06-16T01:22:45.740
> 
> 标签：linux, perforce

我来自 Mac 背景，尝试在我的 linux 机器上安装 perforce client visual(P4V)。为此，我在 [此处](http://www.perforce.com/downloads/complete_list)下载正确的版本并解压缩文件。
然后我 cd 到目录

> ~/桌面/p4v-2012-blah-blah/bin

我也说

> chmod +x p4*

在此之后，我尝试运行 p4v（通过双击），但我什么也没看到。文件类型显示为**“文本可执行文件”**，但我不知道它为什么没有运行。在mac上我做了同样的事情——只需点击p4v，客户端就会出现（我填写了服务器地址和所有内容）但不知道这里出了什么问题。有人能给我指路吗？

FWIW 我确实检查了[这个](http://www.perforce.com/perforce/doc.current/manuals/p4guide/01_install.html#1070774)链接，我确实看到了桌面（所以可能安装了 GNOME？）。因此 p4v 应该能够运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:17:52.177

我知道我们不喜欢基于链接的答案，但这里有一个相当完整的演练：[http ://www.perforce.com/documentation/tenminute-test-drive-linuxunix](http://www.perforce.com/documentation/tenminute-test-drive-linuxunix)

可能应该在超级用户上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T21:11:23.490

您可能拥有 64 位 Linux 并尝试安装 x86 P4V，反之亦然，这就是该命令无法运行的原因。检查操作系统和应用程序类型是否匹配。

# internet-explorer - IE 的 Selenium WebDriver 错误

> ID：11060033
> 
> 赞同：4
> 
> 时间：2012-06-16T01:23:07.717
> 
> 标签：internet-explorer, selenium, webdriver

我正在尝试使用 selenium webdriver、junit 和 ant build 自动化测试用例。从早上开始，我就遇到了奇怪的错误。一个测试用例包含按钮单击命令。测试在 Chrome 和 FF 上运行成功，但在 IE 上运行失败。之前，至少是说无法找到某些元素 X，但是这个说服务器没有提供任何信息。

```
Testcase: testMethod took 10.342 sec
    Caused an ERROR
Cannot click on element (WARNING: The server did not provide any stacktrace information)
Command duration or timeout: 172 milliseconds
Build info: version: '2.23.1', revision: '17143', time: '2012-06-08 18:59:04'
System info: os.name: 'Windows 7', os.arch: 'x86', os.version: '6.1', java.version: '1.6.0_33'
Driver info: driver.version: RemoteWebDriver
Session ID: 8dfc5072-2755-40a7-bb32-05708c51101f
com.thoughtworks.selenium.SeleniumException: Cannot click on element (WARNING: The server did not provide any stacktrace information)
Command duration or timeout: 172 milliseconds
Build info: version: '2.23.1', revision: '17143', time: '2012-06-08 18:59:04'
System info: os.name: 'Windows 7', os.arch: 'x86', os.version: '6.1', java.version: '1.6.0_33'
Driver info: driver.version: RemoteWebDriver
Session ID: 8dfc5072-2755-40a7-bb32-05708c51101f
    at org.openqa.selenium.internal.seleniumemulation.SeleneseCommand.apply(SeleneseCommand.java:41)
    at org.openqa.selenium.internal.seleniumemulation.Timer.run(Timer.java:38)
    at org.openqa.selenium.WebDriverCommandProcessor.execute(WebDriverCommandProcessor.java:144)
    at org.openqa.selenium.WebDriverCommandProcessor.doCommand(WebDriverCommandProcessor.java:74)
    at com.thoughtworks.selenium.DefaultSelenium.click(DefaultSelenium.java:193)
    at dmswebui.IE.TestLogin.testMethod(TestLogin.java:19)
Caused by: org.openqa.selenium.ElementNotVisibleException: Cannot click on element (WARNING: The server did not provide any stacktrace information)
Command duration or timeout: 172 milliseconds
Build info: version: '2.23.1', revision: '17143', time: '2012-06-08 18:59:04'
System info: os.name: 'Windows 7', os.arch: 'x86', os.version: '6.1', java.version: '1.6.0_33'
Driver info: driver.version: RemoteWebDriver
Session ID: 8dfc5072-2755-40a7-bb32-05708c51101f
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at org.openqa.selenium.remote.ErrorHandler.createThrowable(ErrorHandler.java:188)
    at org.openqa.selenium.remote.ErrorHandler.throwIfResponseFailed(ErrorHandler.java:145)
    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:458)
    at org.openqa.selenium.remote.RemoteWebElement.execute(RemoteWebElement.java:244)
    at org.openqa.selenium.remote.RemoteWebElement.click(RemoteWebElement.java:77)
    at org.openqa.selenium.internal.seleniumemulation.Click.handleSeleneseCommand(Click.java:36)
    at org.openqa.selenium.internal.seleniumemulation.Click.handleSeleneseCommand(Click.java:1)
    at org.openqa.selenium.internal.seleniumemulation.SeleneseCommand.apply(SeleneseCommand.java:32) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T15:24:53.520

我在异常中注意到以下内容

```
Caused by: org.openqa.selenium.ElementNotVisibleException: Cannot click on element 
```

这通常发生在您单击的元素在页面中被遮挡或隐藏时。WebDriver 使用本机事件，因此每当您要求它对隐藏的 WebElement 执行操作时都会失败。

这在 Selenium RC 中不是问题，因为它部署了合成事件（JS 事件）并且可以模拟对任何 DOM 元素的点击，而不管其可见性如何。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T05:47:50.137

在 Internet Explorer 中，至少在最新版本 10 和之前的 9 中，DOM 无法在单页应用程序或动态创建 DOM 的重型 ajax 页面中完全重新加载或对 WebDriver 可见。我现在找到一种解决方法是简单地刷新页面

`driver.navigate().refresh();`

我意识到这可能看起来像一个 hack，但它确实会强制 IE 浏览器重新加载页面并绘制当前预期的 DOM 元素。即使插入 WebDriverWait 也无济于事（尽管这是最佳实践，并且在使用 ajax 繁重的应用程序时应在大多数情况下实施）。

在我的经验中，我在 Java 项目和 IE 10（进出兼容模式）中使用了最新的 webdriver (2.31.0) 版本。

一旦我弄清楚为什么 IE 会这样做，我会将此答案更新为更长期的可移植解决方案，然后只需刷新页面即可。现在，我继续使用 Chrome 驱动程序并在 IE 中实现 Chrome 框架。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T17:26:01.967

在触发点击事件之前插入以下块

```
for (int second = 0;; second++) {
    if (second >= 60) return "Page load failed";
    try {
        if (session().isTextPresent("Logoff")) 
            break;
    } 
    catch (Exception e) {}
    Thread.sleep(1000);
} 
```

就我而言，我有测试用例的超级类，这就是我能做到的原因

```
session().somecommand 
```

但是，您可以将我的解决方案翻译成您的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-19T16:17:08.020

在我的情况下，问题是提交过程花费的时间太长，比如超过两分钟，我的问题已解决，将点击操作包装在 try catch 上并添加睡眠以完成该过程，然后继续。代码如下

```
try {
        button.click();
    } 
    catch (Exception e) 
{
    Thread.sleep(1000);
} 
```

# javascript - 这个程序集看起来很容易访问。JavaScript 无法找到它

> ID：11060034
> 
> 赞同：1
> 
> 时间：2012-06-16T01:23:19.003
> 
> 标签：javascript, .net, com, com-interop, .net-assembly

```
using System;
using System.Runtime.InteropServices;
using System.ComponentModel;
using System.Collections.Generic;
using System.Text;
using System.Security;
using System.Security.Permissions;
using System.Collections;
using System.Windows.Forms;
using System.Reflection;
using System.Runtime.CompilerServices;

[assembly: AllowPartiallyTrustedCallers]
namespace Whatever
{
    [
        Guid("AD3EE0B2-4C9F-441B-8E6F-0D1223354EBD"),
        InterfaceType(ComInterfaceType.InterfaceIsDual),
        ComVisible(true)
    ]

    public interface ISetup
    {
        [DispId(1)]
        string Hello();

        [DispId(2)]
        int ShowDialog(string msg);
    };

    [
        Guid("81F44339-C03D-444F-95AD-3E86CF8FA514"),
        ProgId("Whatever.CSetup"),

        ClassInterface(ClassInterfaceType.None),

        ComDefaultInterface(typeof(ISetup)),
        ComVisible(true)
    ]

    public class CSetup : ISetup
    {
        #region [ISetup implementation]

        [ZoneIdentityPermission(SecurityAction.Demand, Zone = SecurityZone.Intranet)]
        public string Hello()
        {
            MessageBox.Show("Hello world.");
            return "Hello from CSetup object";
        }

        public int ShowDialog(string msg)
        {
            System.Windows.Forms.MessageBox.Show(msg, "");
            return 0;
        }
        #endregion
    };
} 
```

当我使用时，`regasm /codebase /tlb /verbose Whatever.dll`我得到了这个反馈：

```
Microsoft (R) .NET Framework Assembly Registration Utility 4.0.30319.1
Copyright (C) Microsoft Corporation 1998-2004\.  All rights reserved.

Types registered successfully
Type 'N' exported.
Type 'N' exported.
Assembly exported to 'C:\Users\Whoever\Whatever.tlb', and the type lib
rary was registered successfully 
```

除了不知道“N”型导出的含义之外，这很好，但程序集确实在 HKEY_LOCAL_MACHINE\SOFTWARE\Classes\ 中显示为“Whatever.CSetup”

如果我将浏览器启动到包含 JavaScript（如下再现）的站点，该站点尚未识别出有问题调用的 .NET 程序集方法，我可以在 MSIE 菜单工具！Internet 选项！程序！管理加载项中看到！工具栏和扩展，“Whatever.CSetup”与其他一些附加组件一起出现在名称列中，并且状态列将其报告为已启用。（尽管它的加载时间和导航时间列什么都没有显示——但发送到蓝牙设备或其他一些设备也没有。）

JavaScript：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" > 

<html>
  <head>
    <title>WebForm1</title>
    <meta name="GENERATOR" Content="Microsoft Visual Studio .NET 7.1">
    <meta name="CODE_LANGUAGE" Content="C#">
    <meta name=vs_defaultClientScript content="JavaScript">
    <meta name=vs_targetSchema content="http://schemas.microsoft.com/intellisense/ie5">
  </head>
  <body onload="OpenActiveX()">

  <!-- Our activeX object -->
  <OBJECT id="Whatever.CSetup" name=”Whatever.CSetup" classid="clsid:81F44339-C03D-444F-95AD-3E86CF8FA514" VIEWASTEXT codebase="Whatever.CSetup"></OBJECT>  

  <!-- Attaching to an ActiveX event-->
<script language="javascript">
           function OurActiveX::OnClose(redirectionUrl)
       {
        alert(redirectionUrl);   <!-- http://otherwebsite.com should be returned-->
                    //window.location = redirectionUrl;
           }
</script>

<script language="javascript">
    //Passing parameters to ActiveX object and starting application
function OpenActiveX()
{
    try
    {
//      document.OurActiveX.MyParam = "Hi I am here." //Passing parameter to the ActiveX
        document.Whatever.CSetup.Open(); //Running method from activeX
    }
    catch(Err)
    {
        alert(Err.description);
    }
}   
</script>
 </body>
</html> 
```

当我转到该页面时，我得到“无法获取属性 What.CSetup' 的值：对象为空或未定义”

1.  我知道这一点：如果我通过更改 JavaScript 中的 CLSID 进行测试，则转到该页面根本不会触发任何内容。如果我改回来，我会收到该错误消息。

2.  `<OBJECT id="Whatever.CSetup" name=”Whatever.CSetup" classid="clsid:81F44339-C03D-444F-95AD-3E86CF8FA514" VIEWASTEXT codebase="Whatever.CSetup"></OBJECT>`除了冒险我在 CLSID 字段中具有正确的值之外，我无法确定我向对方提供了什么。其他的，那些“id”或“name”或“codebase”，我不知道。

3.  我不知道我是否在 js 底部附近正确调用了程序集类方法。

与此类似的 JavaScript 被认为能够调用 .NET 组装方法。有三个网站确认它是可能的：

[http://www.dreamincode.net/forums/topic/38890-activex-with-c#](http://www.dreamincode.net/forums/topic/38890-activex-with-c#) http://www.codeproject.com/Articles/24089/Create-ActiveX-in-NET-Step-by-Step [http： //www.codeproject.com/Articles/1265/COM-IDs-Registry-keys-in-a-nutshell](http://www.codeproject.com/Articles/1265/COM-IDs-Registry-keys-in-a-nutshell)

感谢您的任何帮助。

# php - PHP 变量作为 javascript 弹出窗口

> ID：11060035
> 
> 赞同：-2
> 
> 时间：2012-06-16T01:23:34.260
> 
> 标签：php, javascript, popup, window

> **可能重复：**
> [创建 javscript 函数来破坏 php 会话](https://stackoverflow.com/questions/11060735/creating-javscript-function-to-destroy-php-session)

您好我正在尝试创建一个将自身显示为弹出窗口的 php 变量。这是我的代码...

```
 <?php 
 // this starts the session 
 session_start(); 
 $var = "";

 // echo variable from the session, we set this on our other page 
 if ($_SESSION['color'] == "") {
        $var = "<a href='JavaScript:newPopup('http://www.yourfantasyfootballreality.com/signin.php');' class='two'>Sign In</a>";
    } else {
    echo "Hello, ";
    }
 echo $var;
 ?> 
```

我似乎无法正确排列分号和引号。有人可以告诉我这是如何完成的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T01:26:02.220

您可以使用转义字符 ( `\`) 转义用于在字符串中分隔字符串的引号字符...

```
$var = "<a href=\"JavaScript:newPopup('http://www.yourfantasyfootballreality.com/signin.php');\" class=\"two\">Sign In</a>"; 
```

或者，您可以混合使用引号，即使用单引号分隔您的字符串，使用双引号分隔您的属性周围的引号，反之亦然。

您也可以使用[heredoc](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)或[nowdoc](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.nowdoc)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T01:28:12.010

在`"<a href='JavaScript:newPopup('http://www.yourfantasyfootballreality.com/signin.php');' class='two'>Sign In</a>";`第二个`'`关闭`href`标签。你需要逃避它，所以你会做这样的事情：

```
$var = "<a href='JavaScript:newPopup(\"http://www.yourfantasyfootballreality.com/signin.php\");' class='two'>Sign In</a>"; 
```

这样当它实际输出时你得到`<a href='JavaScript:newPopup("http://www.yourfantasyfootballreality.com/signin.php");' class='two'>Sign In</a>`

# c# - 对象引用 = 字符串引用；换一个不影响另一个？

> ID：11060042
> 
> 赞同：3
> 
> 时间：2012-06-16T01:25:01.980
> 
> 标签：c#

```
string name = "bob";
object obj = name; 
obj = "joe";
Console.WriteLine(name); 
```

我对 name 将如何打印 bob 有点困惑。如果字符串和对象都是引用类型，那么在“obj = name”赋值之后，它们不应该指向堆上的同一块内存吗？感谢您的任何澄清。

编辑：StackUnderflow 的示例提出了另一个相关问题。

```
MyClass myClass1 = new MyClass();
MyClass myClass2;
myClass1.value = 4;
myClass2 = myClass1;
myClass2.value = 5;  // myClass1 and myClass2 both have 5 for value 
```

当两者都是类引用时会发生什么？为什么它不能以同样的方式工作，因为我可以通过一个引用更改类字段并反映在另一个引用中。类变量也应该是引用。这就是不可变的刺痛发挥作用的地方吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-16T01:28:46.860

> 他们不应该在“obj = name”分配之后指向堆上的同一块内存吗

是的。它们都引用相同的字符串实例。你可以通过调用来查看：

```
bool sameStringReference = object.ReferenceEquals(obj, name); // Will be true 
```

但是，一旦您这样做：

```
obj = "joe"; 
```

您正在更改它，以便`obj`现在引用不同的字符串。 `name`但是，由于您尚未重新分配它，因此仍将引用原始字符串。

如果你这样做：

```
sameStringReference = object.ReferenceEquals(obj, name); // Will be false 
```

在这一点上这将是错误的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-16T01:37:56.583

（由于OP声明了C ++背景）：

C# 中的引用与 C++ 中的引用不同，它们的作用更像指针。在 C# 中，它们在初始化时没有“绑定”，因此赋值运算符 ( `=`)**将分配一个新的引用，而不是修改原始对象**。

在 C++ 中：

```
std::string name = "bob";
std::string& obj = name; // now bound to 'name'
obj = "joe"; // name is directly affected
std::cout << name; // prints "joe" 
```

在 C# 中：

```
string name = "bob";
string obj = name; // both reference "bob"
obj = "joe"; // obj now references "joe", and name still references "bob"
Console.WriteLine(name); // prints "bob" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T01:27:52.397

不，您只是将`obj`引用重新分配给“joe”字符串对象。字符串是不可变的，因此不能以这种方式更改。你能做的最好的就是`name`用你自己的类包装。

```
public class MyName
{
    public string Name { get; set; }
}

MyName firstName = new MyName() { Name = "bob" };
MyName secondName = name;
secondName.Name = "joe";
Console.WriteLine(firstName.Name) //outputs "joe" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-16T01:33:05.010

赋值和作用于变量之间是有区别的。如果你有这个：

```
public class A { public string Name; }

...
var orig = new A { Name = "bob" };
var obj = orig;
obj.Name = "joe";
Console.WriteLine(orig.Name); //"joe" 
```

在这里，您将修改`obj`指向的对象（而不是修改`obj`指向的对象）。

# ruby-on-rails - 通过 http on my rails JSON api 接收视频文件

> ID：11060046
> 
> 赞同：1
> 
> 时间：2012-06-16T01:25:43.327
> 
> 标签：ruby-on-rails, file-upload, resque, rails-api

事情就是这样。我相信我的案例在这一点上非常特别，专家的一些帮助是非常可取的。

我有一个基于 Rails (3.2.6) 的 API，我想做的是接收视频文件（主要是 .mp4、.avi）并通过进程队列（使用 Resque）将其上传到 s3。

现在我有点迷失了如何做到这一点。据我了解，我将通过作为视频的请求接收一个字节 []（字节数组）并将其作为参数发送到我的 Resque 作业以上传它（Resque 作业参数只能是字符串，而不是对象)?

有没有人有做这种程序的经验。我们非常想模仿[http://docs.brightcove.com/en/media/](http://docs.brightcove.com/en/media/) create_video 方法。可以通过在请求中发送直接文件或链接文件来创建 Video 对象。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T20:56:31.127

尝试使用[CarrierWave](https://github.com/jnicklas/carrierwave) gem。您应该允许某人将文件数据 HTTP POST 到您的 API，然后将该文件数据保存在后端并使用 CarrierWave 将其上传到 S3。

# node.js - node-mongodb-native 中的连接池，何时调用 db.open 和 db.close

> ID：11060058
> 
> 赞同：8
> 
> 时间：2012-06-16T01:28:19.720
> 
> 标签：node.js, mongodb, express, connection-pooling

我在这里阅读了有关[node-mongodb-native 的大多数问题](https://github.com/mongodb/node-mongodb-native)问题，但我无法制定关于何时打开/关闭连接的标准做法。

一些消息来源说根据需要打开/关闭，一些消息来源说在整个过程中使用一个数据库实例。node-mongodb-native 是否支持自动连接池？如果是这样，我该如何使用它？

我非常感谢示例代码显示正确使用`db.open`并与`db.close`登录请求相关的示例代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T11:21:46.510

我建议使用[通用池](https://github.com/coopernurse/node-pool)

它非常清晰且非常简单，您定义了如何打开连接、如何关闭以及池的大小。该模块负责其余的工作，根据需要创建新连接，并在您也选择超时后处理未使用的连接。

我将模块与需要池化的每个资源一起使用，因此我不必每次都使用自定义池化 API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T18:53:38.743

这是我能找到的最佳答案。显然，它是自动工作的，但我仍在弄清楚细节。

如果你发现任何东西，请告诉我！

[http://technosophos.com/node/255](http://web.archive.org/web/20131006193348/http://technosophos.com/node/255)

# css - 自定义光标：经验法则

> ID：11060061
> 
> 赞同：0
> 
> 时间：2012-06-16T01:29:15.417
> 
> 标签：css, cursor, standards

在网站上使用自定义光标是不好的做法吗？不仅仅是一个特定的标签，而是所有的**东西** `*{cursor:url();}`？如果你提供一个全局选项来关闭它呢？或者这是那些不言而喻的不做问题之一？……我似乎从来不知道。

通常我觉得如果我必须询问一个标准，答案是否定的，但我的搜索都没有提出任何东西，如果这样做是否被认为是不好的做法。

作为一个附带问题，如果您确实为网站提供了自定义光标，您是否应该留下一些（如链接）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T01:42:39.857

不，自定义光标会分散注意力和烦人。遵循约定是有充分理由的，这就是为什么它们是约定。

话虽如此，如果您的网站如此创新和令人敬畏，以至于自定义光标是乐趣的一部分，那么一定要打破常规。约定作为要被打破的事物最有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T01:49:05.243

我发现“不良做法”通常有一些理由说明它们是不良做法，并且还有另一种方式来完成相同的事情，但以更快、更容易理解、更有效或更优雅的方式完成。这方面的一个例子可能是对 goto 的普遍厌恶。

对于您的特定情况，我不知道使用自定义光标是否是不好的*做法*，但是如果这是您想要/需要的行为，我想不出您不应该这样做的原因。我也不知道有更好的方法来实现这一点。

话虽这么说，但还是遵循了一些一般约定，例如默认使用箭头、将鼠标悬停在文本上时的文本光标、将鼠标悬停在链接上时的手形光标等。通常遵循这些约定是为了方便和避免混淆（我的光标是一只手，所以这一定是一个链接）。但是，如果您认为这对您来说不是问题，并且如果光标增加了用户体验，那么我会鼓励您使用它。

# php - 根据内容中的日期动态创建文件

> ID：11060067
> 
> 赞同：0
> 
> 时间：2012-06-16T01:30:21.343
> 
> 标签：php, shell

我在文件中有一些数据，其中一行包含 Day。根据一天，我想将数据复制到特定目录中。我如何在 PHP 或 Shell 脚本中做到这一点？

文件 1.txt：

```
101
RJ
打印机
周一

```

文件2.txt：

```
101
RJ
转变
周三

```

我想将第一个数据复制到一个目录“星期一”和另一个目录“星期三”。PHP或Shell脚本中有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T01:35:50.493

外壳（如果总是第 4 行）：

```
 for i in file*.txt; do cp $i "`sed -n 4p $i`/$i";done; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T02:22:41.693

这里的重点是您如何检测“这一天”。假设“day”行在字符串末尾包含“day”：

```
for i in file*.txt
do
  day=$(cat $i| grep day$ | head -1)
  [ -z "$day" ] && day=UNKNOWN
  mkdir -p "$day"
  cp "$1" "$day"
done 
```

在这种情况下：

*   当文件中有两个或更多“天”时，将使用第一个
*   当文件中没有“天”时，文件将被复制到`UNKNOWN`目录

# php - 从具有与时间戳变量相同日历日期的 MySQL 表中获取结果

> ID：11060074
> 
> 赞同：0
> 
> 时间：2012-06-16T01:31:59.397
> 
> 标签：php, mysql

我有以下日期变量，它被转换为`Month, 10, 2012`以亚利桑那时间显示：

```
$date = $_GET['date'];

$tzFromend = new DateTimeZone('America/New_York'); 
$tzToend = new DateTimeZone('America/Phoenix'); 

    $dtend = new DateTime($date, $tzFromend); 
    $dtend->setTimezone($tzToend);

$dtend->format('F j, Y'); 
```

在下面的查询中，`e.time`是一个时间戳。我想修改下面的查询以包含与`$date`亚利桑那时间具有相同日历日期的所有值。

我怎么能这样做？

```
$sqlStrend = "SELECT e.loginid, e.time, e.points, s.title
      FROM endorsements e
      JOIN submission s ON e.submissionid = s.submissionid
     WHERE e.loginid = '$idn' 
  ORDER BY e.time DESC
  LIMIT $offset, $rowsperpage"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T01:49:01.827

尝试这个：

```
$d = $dtend->format('c');

$sqlStrend = "SELECT e.loginid, e.time, e.points, s.title
  FROM endorsements e
  JOIN submission s ON e.submissionid = s.submissionid
 WHERE e.loginid = '$idn' AND DATE(e.time) = DATE($d)
 ORDER BY e.time DESC
 LIMIT $offset, $rowsperpage"; 
```

# php - 警告：preg_match

> ID：11060086
> 
> 赞同：0
> 
> 时间：2012-06-16T01:35:04.917
> 
> 标签：php, wordpress

> 警告：preg_match() [function.preg-match]：编译失败：第 201 行 /home/watchit/public_html/wp-includes/class-wp.php 中偏移量 3 处的括号不匹配

为了这：

```
if ( preg_match("#^$match#", $request_match, $matches) || 
```

改为：

```
if ( preg_match("#^$match#", $request_match, $matches)) || 
```

得到了这个：

> 解析错误：语法错误，第 201 行 /home/watchit/public_html/wp-includes/class-wp.php 中的意外 T_BOOLEAN_OR

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T01:43:59.150

```
if ( preg_match("#^".preg_quote($match,'#'),"#", $request_match, $matches) || 
```

`)`还要注意我之前删除了额外的`||`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T01:46:19.337

您的 OR 运算符（ || ）需要是 if 子句的一部分，所以

```
if ( preg_match("#^$match#", $request_match, $matches)) || 
```

需要成为

```
if ( preg_match("#^$match#", $request_match, $matches) || your other conditions ){ 
```

# matlab - MATLAB 中的列表目录不适用于 fish

> ID：11060090
> 
> 赞同：3
> 
> 时间：2012-06-16T01:36:20.110
> 
> 标签：matlab, shell, fish

设置`fish`为主 shell`chsh -s /usr/local/bin/fish`后，我尝试`ls`在 MATLAB 中使用命令，但出现以下错误：

```
??? Error using ==> ls at 36
/usr/local/bin/fish: /opt/MATLAB/R2011a/sys/os/glnxa64/libstdc++.so.6: version `GLIBCXX_3.4.15'
not found (required by /usr/local/bin/fish) 
```

有人知道为什么会这样吗？我的实际解决方案是重置`bash`为主 shell 并始终运行`fish`以使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T11:18:43.457

Matlab 使用它自己的 glibc 库，因此它经常是一团糟。

您可以在那里查看我的答案以找到解决该问题的一种方法： [在 mex 下编译 vtk 示例时未找到 GLIBCXX](https://stackoverflow.com/questions/8421708/glibcxx-not-found-when-compiling-vtk-example-under-mex/8422003#8422003)

# c# - 多用户金融客户经理应用程序设计推荐

> ID：11060091
> 
> 赞同：0
> 
> 时间：2012-06-16T01:36:34.743
> 
> 标签：c#, database, security, passwords

喜欢这个网站——在我的整个学习过程中，它提供了非常丰富的信息。刚刚完成了四分之一的 C# 介绍，其中一个项目是设计一个财务“账户管理器”应用程序，该应用程序保持余额并在进行提款和存款时更新它。该项目相当简单，我没有任何问题。不幸的是，我的下一个季度不包括任何编程课程 :(，所以我正在利用时间通过增强我的客户经理应用程序来扩展我的知识。

我想做的第一件事是启用多个用户。到目前为止，我已经包含了一个 CreateNewUser 类，该类禁止重复的用户名，检查新密码的特定格式要求，加盐和散列，并将其保存到带有用户名（电子邮件地址）和自动递增的“帐户”表中用户身份。很简单。

所以现在我被困住了：不确定什么是最佳实践。我不认为用户应该使用与其他用户相同的表，所以我认为每个用户都应该有自己的表。我是“过于偏执”，还是我的想法符合常见的编程安全实践？事实是，可能没有人会使用这个应用程序，但我正在努力学习我长大后可以在现实世界中应用什么。

使用同一个表只需要使用匹配用户 ID 的查询加载 DataSet，所以这没什么大不了的。如果我应该使用单独的表，那么我需要在创建新用户时动态创建一个新表，并且我将使用用户 id 来命名表，这将模拟现实世界中的帐号，我我假设。

无论如何，我找不到涵盖这个的另一个问题，所以我想我会问你的想法。

谢谢，

死神

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T04:49:05.357

这样想吧。如果您要保留这些表格的物理示例，例如，使用笔记本。您是想要很多小笔记本还是一个大笔记本也可以参考？

只要您的代码被编写为仅提取正确的数据（在这种情况下，匹配用户 ID），就没有大的安全性，因为您的所有代码都将处理对数据的访问权限。您的数据库和代码也设置了正确的权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T05:43:54.953

> 到目前为止，我已经包含了一个 CreateNewUser 类，该类禁止重复的用户名，检查新密码的特定格式要求，加盐和散列，并将其保存到带有用户名（电子邮件地址）和自动递增的“帐户”表中用户身份。很简单。

已经很糟糕了。它应该是一个用户表 - 处理财务信息的应用程序中的帐户具有非常特定的财务含义，您可能希望每个用户有多个帐户和/或用户共享一个帐户。

此外，除非您编写 Powershell CmdLets（其中每个命令一个类是模式），否则 CreateNewUser 类与出去烧车一样糟糕。用户是一个类，某种存储库是可以的，但如果有的话，CREATE NEW 就是类上的一个 FUNCTION。它绝对不是一个完整的类——如果你把类中的每一个方法都转过来，你就完全搞砸了面向对象的概念。

> 我认为用户不应该使用与其他用户相同的表，

又是一个完全的初学者错误。为什么不？适当地输入引用帐户和/或用户的适当字段，就可以了。

> 那么我需要在创建新用户时动态创建一个新表，

你有没有想过你在这里做什么？维护明智的每次更改都意味着编写一个程序来找出存在哪些用户表，然后修改它们。窗外的工具支持。我曾经看过一个这样写的应用程序——发票管理。它有一个发票详细信息表 PER INVOICE（以及每个发票的发票表，由发票编号编码），因为程序员从不了解数据库是什么。

> 我是“过于偏执”，还是我的想法符合常见的编程安全实践？

他们的思路是“你被解雇了，学习数据库是如何工作的”。

> 使用同一个表只需要加载具有匹配用户 ID 的查询的数据集

;) 所以 DataSet 还在吗？遵循微软过去 30 年来最糟糕的做法，您是否有理由进行考古编程 - 而不是使用微软自一段时间以来已经提供的 ORM（Linq2SQL，实体框架），这将使您的应用程序很多 - 啊 -更多——啊——面向对象？

我可以建议读一本像样的书吗？查找 Scott Ambler 的“构建有效的对象应用程序”？不，它不是为 C# 编写的——有趣的是，良好架构的概念 99% 与语言无关。

# scala - log4j:WARN 找不到附加程序

> ID：11060094
> 
> 赞同：2
> 
> 时间：2012-06-16T01:36:48.690
> 
> 标签：scala, hadoop, log4j

我有这个非常简单的 scala 应用程序。它所做的只是初始化一个记录器并执行一个 logger.info("Hello")。我在具有以下设置的类路径中有一个 log4j.properties 文件

```
# Root logger option
log4j.rootLogger=INFO, stdout

# Direct log messages to stdout
log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.Target=System.out
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1}:%L - %m%n 
```

但是，当我尝试运行应用程序时。我收到错误 log4j:WARN No appenders could be found for logger (app.TestApp$)。log4j:WARN 请正确初始化 log4j 系统。

我错过了什么？但是，如果我在类路径中有 hadoop-core.jar，我会打印出日志（是的，里面也有一个 log4j）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-16T12:54:12.290

您的 log4J 配置文件不在类路径中，即使您认为是。解决这个问题最简单的方法是添加`-Dlog4j.debug`VM 参数，然后 Log4J 将跟踪它使用的算法来查找其配置：

```
scala -cp {yourclasspath} -Dlog4j.debug {yourscalaentrypoint} 
```

不幸的是，当您运行 Scala 程序时，@Jens 的回答对您没有帮助，因为 Scala 不使用标准的 Java 系统属性来存储其类路径。当您需要打印出用于 Scala 程序的类路径时，您应该使用类似[这种技术](https://stackoverflow.com/a/6485462/991432)的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T08:31:11.697

听起来您的属性文件在类路径中找不到。打印出类路径（系统属性 java.class.path）以验证发生了什么。

# apache - Wordpress - 页面名称与物理目录冲突

> ID：11060095
> 
> 赞同：1
> 
> 时间：2012-06-16T01:36:53.480
> 
> 标签：apache, .htaccess, mod-rewrite

这不是 wordpress 问题，因为所有 CMS 似乎都在 Apache 上运行同样的问题。

我在 wordpress 中有一个页面：http: [//mysite.com/usa](http://mysite.com/usa)

我还想创建一个物理目录 /usa 以便我可以将子目录放在它下面并将静态 html 页面放在那里。

如何告诉使用 htaccess 的网络服务器不要默认到目录？

谢谢，

吉姆

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-16T16:59:45.610

假设您使用的是 WP-generated `.htaccess`，请尝试在顶部添加以下内容`RewriteCondition`，即在已经存在的那些之后

```
RewriteCond %{REQUEST_URI} !^/usa/ 
```

脑海中浮现出另一个想法，那就是将博客移动到它自己的`/blog`子目录中，不要太在意 WP 的重写规则，或者它们最终是否会与您自己的网站其余部分混淆。如果您选择这样做，则需要将`RewriteBase`WP 中`.htaccess`的

```
RewriteBase / 
```

至

```
RewriteBase /blog/ 
```

# mysql - 当您请求数组时，Ruby 的 dbi select_all 会给出有趣的结果

> ID：11060096
> 
> 赞同：0
> 
> 时间：2012-06-16T01:37:54.797
> 
> 标签：mysql, ruby

考虑这个程序

```
require 'dbi'

handle = DBI.connect('DBI:Mysql:tasks', 'root', 'stupid')

handle.select_all('select * from tasks') do |row|
  puts row.inspect
end

rows = handle.select_all('select * from tasks')
puts rows.inspect 
```

第一次调用`select_all`被传递一个块，它使用它来遍历表行，就像它假设的那样。这是用于迭代的标准 Ruby 习惯用法，所以它当然可以工作。

第二次调用应返回相同的数据，但一次全部打包在一个数组中。数组实际上包含的是表格的最后一行！

这是一个错误，还是我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T21:04:21.847

我也偶然发现了这个。经过大量研究，我决定`DBI::Row`与特定语句相关的每个实例都引用相同的内存。更糟糕的是，复制或克隆它没有任何区别。获得正确副本的唯一方法是将其转换为数组，`.to_a`这意味着您将丢失方法:(

我不厌其烦地提交了一份关于 ruby​​forge 的错误报告——不是因为我认为它会得到修复，而是因为它可能会帮助其他一些正在拔头发的傻瓜。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T01:40:26.447

I just stumbled across this too. After considerable research I have decided that every instance of DBI::Row associated with a particular statement hand reference the same memory. Worse still dup or cloning it makes no difference. The only way to get a proper copy is to convert it to an array with .to_a which means you loose the methods :(

I took the trouble to file a bug report on rubyforge -- not because I think it will get fixed but because it may help some other sucker who is pulling their hair out.

In fact I have just finished converting a couple of scripts over to Sequel from DBI. Sequel looks very nice as it allow both ORM type access as well as supporting raw sql like dbi.

Translation was straight forward.

# sqlalchemy - sqlalchemy 关系和关系查询

> ID：11060099
> 
> 赞同：4
> 
> 时间：2012-06-16T01:38:13.403
> 
> 标签：sqlalchemy

假设我在 sqlalchemy 中有 3 个表。以声明方式定义的用户、角色和用户角色。有人会如何建议做这样的事情：

```
user = Users.query.get(1) # get user with id = 1
user_roles = user.roles.query.limit(10).all() 
```

目前，如果我想获得用户角色，我必须查询 3 个表中的任何一个并执行连接以获得预期的结果。直接调用`user.roles`会带来我无法过滤或限制的项目列表，因此它不是很有帮助。加入事情也不是很有帮助，因为我正在尝试创建一个带有以下请求的休息界面： `localhost/users/1/roles`所以只需通过该查询，我就需要能够做到`Users.query.get(1).roles.limit(10) etc etc`真正应该“智能”我的休息界面而没有太多臃肿的代码和if 条件，而不必知道要加入哪个表。用户模型已经具有作为关系属性的角色，那么为什么我不能像使用普通模型那样简单地查询关系属性呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-17T21:37:41.200

只需使用[动态关系加载器](http://docs.sqlalchemy.org/en/rel_0_7/orm/collections.html#dynamic-relationship)。下面逐字逐句的代码来自上面链接的文档：

```
class User(Base):
    __tablename__ = 'user'

    posts = relationship(Post, lazy="dynamic")

jack = session.query(User).get(id)

# filter Jack's blog posts
posts = jack.posts.filter(Post.headline=='this is a post')

# apply array slices
posts = jack.posts[5:20] 
```

# scala - 如何区分组合用例和自键入用例

> ID：11060105
> 
> 赞同：11
> 
> 时间：2012-06-16T01:39:58.617
> 
> 标签：scala, composition, self-type

Scala 有两种表达对象组合的工具：原始的自我类型概念和众所周知的琐碎组合。我很好奇我应该在哪些情况下使用。

它们的适用性存在明显差异。自我类型要求你使用特质。对象组合允许您在运行时使用 var 声明更改扩展。

抛开技术细节，我可以想出两个指标来帮助对用例进行分类。如果某些对象用作复杂结构（例如树）的组合器，或者仅具有几个类似类型的部件（1 辆汽车与 4 个轮子的关系），则应该使用组合。有极端相反的用例。让我们假设一个特征变得太大而无法清楚地观察它并且它被分裂了。在这种情况下，您应该使用自类型是很自然的。

这些规则不是绝对的。您可能需要做额外的工作来在这些技术之间转换代码。例如，您可以用 Product4 上的自键入替换 4 个轮子组合。您可以使用`Cake[T <: MyType] {part : MyType}`而不是`Cake { this : MyType => }`蛋糕模式依赖项。但这两种情况似乎都违反直觉，并且会给您额外的工作。

虽然有很多边界用例。一对一的关系很难决定。是否有任何简单的规则来决定哪种技术更可取？

自类型使您的类抽象，组合使您的代码冗长。self-type 给你混合命名空间的问题，也给你额外的免费打字（你不仅得到了两种元素的混合物，还有被称为汽油炸弹的汽油发动机油混合物）。

我该如何选择它们？有哪些提示？

**更新：**

让我们讨论以下示例：

*适配器模式*。它对自编和组合方法有什么好处？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T17:12:02.323

以下提示来自启发式方法（当算法方法不切实际时使用的试错法解决问题的方法），并且不受任何公式的支持（基于数学的推理）。

***此处给出的提示应参考随附的提示进行评估，没有提示是区分组合和自键入用例的完美规则。

（虽然遵循下面提到的提示，但我不在乎或关注代码的冗长或行数或编程工作输入。）

组合（字典含义）：将部分或元素组合成一个整体的行为（琐碎组合）

trait（字典含义）：显着的特征或品质

**Trivial Composition 的提示**（可以通过超子类机制或关联关系来实现）（例如 Car 和 Wheels）：

*   可以离散计数（例如车轮）

*   可以进一步分类（基于不同的标准）（例如车轮 - 合金车轮，钢轮等）

*   可以添加或删除（注：我们说轮子停止时，实际上是轮子的转速停止了，当我们说心脏停止时，实际上是心脏的搏动速度变为零了）

*   一般适用于few（宇宙中有些车辆有些机械有轮子）（few可以是10-15，也可以是几百万——解释一下让我们理解这个说法：当地质学家谈时间，说前段时间时，意思是几百万几年前，这取决于实际的主题）

**自我类型**（特征）的提示（例如汽车和速度）：

*   它是一维的（不是物理方面），可以绘制在数轴上（无论物理单位是什么）（例如速度）

*   哪个不能自然地进一步分类（例如速度）（或者至少你不会进一步分类）这里，自然这个词用来传达含义，分类它你必须取决于你自己的标准，并且会有一个明确的将其分类为数百万个子类型的可能性。移动，你可以拥有数百万个移动子特征......像之字形移动，旋转和前进，......（具有各种排列组合的百万可能性）。

*   可以增加或减少或停止（例如速度、愤怒、爱等）

*   在非常遥远的课程中通常可以看到/可以看到（例如光速，地球速度，跑步者的速度）

*   一般适用于许多（宇宙中大多数（这里每个）物体都有速度）

    软件开发就像创造自己的宇宙，作为创造者，你定义了一切。在您的域（您自己的宇宙）中遥远的类中会看到一个特征。

请注意，对于用于琐碎作文的部分，我没有看到任何语言（我知道的很少）中的任何特定词（这里是 trait 的对应词）。

进一步说明：

要获得答案，您需要深入了解软件开发的面向类或面向对象的哲学，并且需要了解编程语言（如 java 和 scala（或更多））的创建者的思想和逻辑在这些语言中灌输了面向类或面向对象的范式。

您需要的另一件事是对语义（通过对意义和形式的变化进行分类和检查来研究意义或语言发展的研究）的深入理解，我们用来描述现实世界和关键字背后的语义（在编程语言中） ) 我们作为程序员使用。

我相信，当我们创建课程时，我们希望将现实世界体现为软件。该类成为现实世界中某些事物的表示，可能是汽车、人类、星星、梦想、思想或想象等。

当有人说“轮子”时，你会清楚地看到它的形状和应用，你会想到驱动轮或在道路上滚动的轮子。轮子永远是某事的一部分。它可以用离散的数字来计算。轮子可以根据材料、应用、尺寸等标准进一步分类。轮子一样的东西符合琐碎组合的条件。

当有人说“速度”时，你不会有任何清晰的画面……没有形状……没有颜色……但你可以将它与宇宙中任何移动的（相对论）部分联系起来。这是一个特点，特质。速度不是任何事情的一部分。它可以在那里，也可以不在那里。它可以绘制在一条线上（方向 + 或 - ）。很难对“速度”进行分类。速度之类的东西符合特质。

在我看来，

如果我们将 Car 作为一个类（对象），“速度”之类的特性应该作为 scala 中的特性。和“轮子”一样的零件，组件应该作为“琐碎的组合”进入。类似“速度”的特征不会有自然分类，其中“车轮”可以有很多类，它们本身是独立的对象（实际上）。

如果我们把 Human 作为一个类（Oject），“愤怒、哭泣、大笑等”。类似的行为应该作为特征和“手、腿、大脑、心脏等”。应该作为“琐碎的组合”进入，因为它们本身是独立的对象（实际上）。

如果我们想到名字，它可以给任何人和任何人命名，例如我们最近的星星有一个名字“太阳”，最高的山有一个名字“喜马拉雅”，我的狗有一个名字“洛基”，河流有一个名字“亚马逊” “....”名字“是一个特征，不应该被认为是“琐碎的作文”。

如果我们想到心，动物的心就是它们的一部分。必须将其视为“微不足道的构图”，而不是作为特征。

什么是类？

类是特定对象的描述或蓝图。

什么是对象？

对象是可以通过类定义来描述的现实。

（鸡蛋还是母鸡？哪个先出现？）我相信，软件工程师首先想到对象，然后（描述它们或制作它们）（从蓝图）定义类。（请注意IN Object Oriented Modeling and Design - Class and Object 是相辅相成的存在。）问题（http://en.wikipedia.org/wiki/Circle-ellipse_problem）因为后者与继承或子类型多态性有关。）

接口：使单独的、有时不兼容的元素能够有效协调的东西

软件开发就像创造自己的宇宙，作为创造者，你定义了一切。组合应该优先于继承。（四人组 - 设计模式）

# c# - 如何从 C# 中的 usergridview 中获取一行？

> ID：11060106
> 
> 赞同：0
> 
> 时间：2012-06-16T01:40:07.573
> 
> 标签：c#, oledb

当我想在 C# 中使用 OleDB 将 usergridview 中的内容添加到 access 数据库时，我有以下代码：

```
da.InsertCommand = new OleDbCommand("INSERT INTO [some] ([some1], [some2]) VALUES (?,?)");

da.InsertCommand.Parameters.Add("@some1", OleDbType.VarChar, 60, "some1");
da.InsertCommand.Parameters.Add("@some2", OleDbType.VarChar, 60, "some2"); 
```

据我了解`some1`，`some2`我们末尾的和`InsertCommands`是我的`usergridview`. 现在我想要实现的是在将内容插入数据库之前对其进行编辑。所以我的实际问题是我怎样才能得到“ `some1`”之外的`InsertCommand`把它放到一个函数中（**例如** `my_function(some1)`应该是参数内容）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T02:09:21.253

这是一些伪语法

```
 public void my_function(string varSome1, string varSome2)
    {
        .
        .
        OleDbCommand cmd = new OleDbCommand("INSERT INTO [some] ([some1], [some2]) Values (@some1, @some2)", yourOleDbConnection);

        cmd.Parameters.AddWithValue("@some1", varSome1);
        cmd.Parameters.AddWithValue("@some2", varSome2);
        .
        .
        .
        da.InsertCommand = cmd;           
        .
        .
    } 
```

**编辑**

从您的其他功能编辑值

```
string editedSome1 = "your edited value1";
string editedSome2 = "your edited value2"; 
```

然后你打电话

```
my_function(editedSome1, editedSome2); 
```

# javascript - 使用 JavaScript 在画布上的光标位置绘图

> ID：11060110
> 
> 赞同：4
> 
> 时间：2012-06-16T01:41:06.163
> 
> 标签：javascript, canvas, draw, point, mouse-cursor

我正在尝试通过单击并拖动鼠标来绘制画布。我的问题是，除了这条线的质量很差（我想要一个更明显的边框）之外，它只在鼠标位置为 0,0 时才尊重鼠标位置。当我将鼠标移动到下角时，线条与它的距离增加了，就像我在画布中间时一样，线条已经超出了它。我的代码位于：http: [//jsfiddle.net/ajTkP/12/](http://jsfiddle.net/ajTkP/12/)

我也会在这里发布：

```
var MDown = false;
var Color = 'blue';

var Canvas = document.getElementById('canvas');
var Context = Canvas.getContext('2d');

Canvas.onselectstart = function() { return false; };
Canvas.unselectable = "on";
Canvas.style.MozUserSelect = "none";

Canvas.onmousedown = function(e) {
    MDown = true;
    Context.strokeStyle = Color;
    Context.lineWidth = 3;
    Context.lineCap = 'round';
    Context.beginPath();
    Context.moveTo(e.pageX - Position(Canvas).left, e.pageY - 5);
}

Canvas.onmouseup = function() { MDown = false; };

Canvas.onmousemove = function(e) { 
    if (MDown) {
        Context.lineTo(e.pageX - Position(Canvas).left, e.pageY - 5);
        Context.stroke();
    }
}

function Position(el) {
    var position = {left: 0, top: 0};
    if (el) {
        if (!isNaN(el.offsetLeft) && !isNaN(el.offsetTop)) {
            position.left += el.offsetLeft;
            position.top += el.offsetTop;
        }
    }
    return position;
} 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-16T01:54:44.117

您需要在画布上设置一个明确的`width`和。`height`画布的默认尺寸是 300 的宽度和 150 的高度（[请参阅此处的规范](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html)）。通过 CSS 设置宽度和高度，您只是在拉伸画布。

要么做：

```
<canvas id="canvas" width="300" height="200"></canvas> 
```

或通过 JavaScript 设置宽度/高度：

```
canvas.width = 300;
canvas.height = 200; 
```

查看更新的 jsfiddle：http: [//jsfiddle.net/ajTkP/13/](http://jsfiddle.net/ajTkP/13/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T02:04:32.333

看起来 jimr 在画布的高度和宽度方面击败了我。

线的质量很差是由于你画线的方式。您会注意到您正在调用`stroke()`每个**onmousemove**事件。请记住，它会跟踪从 when you`beginPath()`到 when you的线条路径`closePath()`，因此您基本上是在多次抚摸同一条线（每次鼠标移动）。这就是为您提供锯齿（看起来像块状）线的原因，而不是您期望的平滑抗锯齿线。

# vim - Janus Vim：将 Command-Shift-F 重新映射到 git grep

> ID：11060111
> 
> 赞同：1
> 
> 时间：2012-06-16T01:41:32.887
> 
> 标签：vim, grep, janus

我找到了这个 git grep vim 插件，但我不知道如何映射我的 Command-Shift-F 来调用它。我已经禁用了默认提供的 Ack 插件。

[https://github.com/tjennings/git-grep-vim/](https://github.com/tjennings/git-grep-vim/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T07:39:23.310

您只需要创建一个调用`GitGrep`命令的自定义映射：

```
nnoremap <D-S-f> :GitGrep<Space> 
```

之后，击中`<D-S-f>`将放

```
:GitGrep | <-- cursor here 
```

在命令行中，准备接受参数。

但我建议您选择更好的快捷方式：`<D-S-f>`仅适用于 MacVim。即使在那里，我似乎记得像这样的组合键并没有真正*起作用*。MacVim 没有抱怨，但`<D-S-f>`不知何故与`<D-f>`. IIRC，您必须映射`<D-F>`而不是`<D-S-f>`.

我相信，类似的东西`,f`会更合适，而且更便携。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-08T08:57:48.763

Janus 已经包含了非常棒的[vim-fugitive](https://github.com/tpope/vim-fugitive)，它也提供了`:Ggrep`命令。

所以，我们可以破解[Janus 为 Ack 添加映射](https://github.com/carlhuda/janus/blob/master/janus/vim/tools/janus/after/plugin/ack.vim)的方式。

首先禁用你喜欢的`Ack`插件：`~/.vimrc.before`

`call janus#disable_plugin('ack')`

然后在您`~/.vimrc.after`只需附加以下代码：

```
if has("gui_macvim") && has("gui_running")
  " OSX 上的 Command-Shift-F
  调用 janus#add_mapping('ggrep', 'map', '', ':Ggrep')
别的
  " 定义一个虚拟值，看看它是否也会设置。
  地图：假人

  如果 maparg("") == ":dummy"
    " f 在 == 的系统上
    调用 janus#add_mapping('ggrep', 'map', 'f', ':Ggrep')
  别的
    “如果我们仍然可以映射到
    调用 janus#add_mapping('ggrep', 'map', '', ':Ggrep')
  万一

  地图  
万一

```

享受！

# c++ - *& 是什么意思

> ID：11060112
> 
> 赞同：0
> 
> 时间：2012-06-16T01:41:36.207
> 
> 标签：c++

我是一名 java 编码员，不熟悉 c++ 语言。但是现在，我阅读了以下代码：

```
void method(A* a,A*& b);

A *a;
A *b;
method(a,b); 
```

而我的问题是：“*&”是什么意思？是不是表示它代表了b本身的值？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T01:42:40.543

`b`是对 的指针的引用`A`。

所以如果`method`设置`b`了，`b`调用的范围将被改变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T01:48:37.200

从右到左阅读。`A*& b`表示这`b`是对指向 的对象的引用`A`。为什么这很有用？它允许您直接修改传递给函数的指针。`b`当函数返回时，该函数内部发生的任何事情都将是可见的。

# php - 日期格式然后添加 3 小时

> ID：11060115
> 
> 赞同：1
> 
> 时间：2012-06-16T01:42:20.530
> 
> 标签：php, date, time, timezone

我怎么能采用诸如`June 15, 2012 06:37PM`PST 时区格式的东西并将其转换为`06/15/12 06:37PM`但在 EST 时区（因此它将是`06/15/12 09:37PM`）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T02:34:46.283

如果您使用 PHP >= 5.2.0，您可以尝试以下解决方案：

```
$date = 'June 15, 2012 06:37PM';
$nDate = DateTime::createFromFormat('F d, Y h:iA' , $date, new DateTimeZone('PST'));
$nDate->setTimezone(new DateTimeZone('EST'));
echo $nDate->format('m/d/y h:iA'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T02:45:39.313

如果不使用时区，您可以这样做：

```
$new_date = strtotime($date) + strtotime("+3 hours");
$new_date = date('m/d/y h:ia', $new_date); 
```

# java - 在mac上获取java中打开窗口的坐标

> ID：11060123
> 
> 赞同：2
> 
> 时间：2012-06-16T01:44:59.550
> 
> 标签：java, macos, swing

我需要能够找到在计算机中打开的窗口的坐标，即使它们不是由我的应用程序或另一个 java 应用程序创建的。除了截屏整个屏幕然后尝试让应用程序跟踪每个窗口的轮廓之外，我对这样做的任何方式都不知所措，这似乎非常低效并且可能不是很有效（如果窗口重叠怎么办）？

非常感谢任何帮助：我花了一整天的时间试图弄清楚！

**注意：**我需要在 mac 上执行此操作，并且不需要将其移植到 windows。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T02:29:16.783

您需要从操作系统获取信息，使用 Java 有多种方法可以做到这一点，但没有一种方法只使用*核心*Java。我建议尝试[JNA](https://github.com/twall/jna)以允许您直接调用 OS 函数，而无需使用[JNI](http://en.wikipedia.org/wiki/Java_Native_Interface)所涉及的所有大惊小怪。

# php - 如何使用 PHP 处理稀有字符？

> ID：11060135
> 
> 赞同：0
> 
> 时间：2012-06-16T01:47:26.293
> 
> 标签：php, html

我接受用户在 textarea 中输入文本，然后保存它（它保存到一个简单的 .txt 文件中，并且还包含 html）。然后使用 file_get_contents() 抓取文本文件，然后回显。这很好用，除非我用稀有字符测试它。例如，当我用三叶草 (♧) 对其进行测试时，它会将它保存到文本文件中，但当我显示它时，它就像是 â～€。几乎所有稀有符号都以â为前缀。我猜这是一些编码问题，但我不知道从哪里开始。更具体地说，我如何确保任何用户输入的内容最终都能正确显示？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T02:54:44.633

**我如何确保任何用户输入的内容最终都能正确显示？**`

只接受 UTF-8 编码的字符串

PHP 带有一个名为[mb_check_encoding](http://php.net/manual/en/function.mb-check-encoding.php)的便捷函数— 检查字符串是否对指定的编码有效 使用此函数检查用户输入是否“稀有”

```
 if(mb_check_encoding($string, 'UTF-8'))
   {
       // do stuff, input is UTF-8
   }
   else 
   {
        // input is not UTF-8
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T05:15:47.853

试试这个..

php 中定义的标头内容类型

```
 header("content-type: text/html; charset=utf-8"); 
```

[http://hiox.org/33451-non-standard-characters-handle-in-php.php](http://hiox.org/33451-non-standard-characters-handle-in-php.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T10:33:07.230

您可以在回显之前将特殊字符转换为 HTML 实体：

```
htmlentities($mytext); 
```

然后浏览器会将它们转换回另一端的正确字符。有两个小缺点：

1.  HTML 实体占用了几个字节的额外空间
2.  如果要保存到文本文件，则 HTML 实体将不会转换回正确的字符。

它可能并不理想，但它应该可以完成这项工作。

# php - SQLite3 表不接受 INSERT INTO 语句。表已创建，数据库也已创建，但没有向其中传递任何内容

> ID：11060136
> 
> 赞同：0
> 
> 时间：2012-06-16T01:47:29.300
> 
> 标签：php, database, sqlite

```
<?php
try
{
        //open the database
        $db = new PDO('sqlite:music.db');
        $db->exec("DELETE from Music;");
        $db->exec("INSERT INTO Music(Title, Author, ReleaseDate) VALUES ('Whatd I Say', 'Ray Charles', '1956');" .
                    "INSERT INTO Music(Title, Author, ReleaseDate) VALUES ('Smells Like Teen Spirit.', 'Nirvana', '1991');" .
                    "INSERT INTO Music(Title, Author, ReleaseDate) VALUES ('Hey Jude', 'The Beatles', '1968');" .
                    "INSERT INTO Music(Title, Author, ReleaseDate) VALUES ('Johnny B. Goode', 'Chuck Berry', '1958');" .
                    "INSERT INTO Music(Title, Author, ReleaseDate) VALUES ('Good Vibrations', 'The Beach Boys', '1966');" .
                    "INSERT INTO Music(Title, Author, ReleaseDate) VALUES ('Respect', 'Aretha Franklin', '1967');" .
                    "INSERT INTO Music(Title, Author, ReleaseDate) VALUES ('Whats Going On', 'Marvin Gaye', '1971');" .
                    "INSERT INTO Music(Title, Author, ReleaseDate) VALUES ('Imagine', 'John Lennon', '1971');" .
                    "INSERT INTO Music(Title, Author, ReleaseDate) VALUES ('(I Cant Get No) Satisfaction', 'Rolling Stones', '1965');" .
                    "INSERT INTO Music(Title, Author, ReleaseDate) VALUES ('Like A Rolling Stone', 'Bob Dylan', '1965');");

        //now output the data to a simple html table...
        //example of specifier  --> WHERE First=\'Josh\'; <--
        print "<table border=1>";
        print "<tr><td>Title</td><td>Author</td><td>Y.O.P.</td></tr>";
        $result = $db->query('SELECT * FROM Music ');
        foreach($result as $row)
        {
            print "<td>".$row['Title']."</td>";
            print "<td>".$row['Author']."</td>";
            print "<td>".$row['ReleaseDate']."</td></tr>";
            }
        print "</table>";

        $db = NULL;
        }
    catch(PDOException $e)
    {
        print 'Exception : '.$e->getMessage();
        }
    ?> 
```

* * *

我不确定为什么没有任何东西被插入到表中。文件“music.db”存在于正确的路径中。

作为记录，我只能使用 SQlite3，不允许使用 SQL。允许使用 PHP，SQLite3 也是如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T02:56:16.380

SQLite3 的一些实现将每个执行命令限制为仅一个查询。例如，您不能像以前那样链接 INSERT，但必须为每个插入调用 $db->e​​xec()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T02:10:21.857

你看到这两行之间的区别了吗？

```
"INSERT INTO Music(Title, Author, Release Date) VALUES 
"INSERT INTO Music(Title, Author, ReleaseDate) VALUES 
                                         ^ 
```

你去吧。从列名中去掉那个空格，你应该没问题。

* * *

这是运行代码之前我的 music.db 的内容。

```
sqlite> .dump
PRAGMA foreign_keys=OFF;
BEGIN TRANSACTION;
CREATE TABLE music (Title text, Author text, ReleaseDate text);
COMMIT; 
```

您当前在问题中发布的代码现在无需修改即可成功运行。

# c# - 从 IIS Express 访问远程 Web 服务导致 403 被禁止

> ID：11060139
> 
> 赞同：0
> 
> 时间：2012-06-16T01:48:24.873
> 
> 标签：c#, iis-express, http-status-code-403, cassini

当我尝试从在[IIS Express](http://learn.iis.net/page.aspx/868/iis-express-overview/)上运行的 Web 应用程序连接到 Intranet Web 服务时，该 Web 服务返回[403 Forbidden](http://en.wikipedia.org/wiki/HTTP_403)。当我通过单元测试或从在[Cassini](https://stackoverflow.com/questions/tagged/cassini)上或在我的服务器上的 IIS 7.5 下运行的同一站点访问时，该服务可以正常工作。我的直觉告诉我这是一个配置问题，但我不确定从哪里开始寻找。

当从运行在 IIS Express 上的站点访问该服务时，什么会导致远程 Web 服务返回 403 Forbidden？

为了澄清我正在访问的服务不是基于 SOAP 的。我正在设置一个特定的网络凭据并将其与我的请求一起传递，如下代码所示。

```
protected XDocument Search(Uri requestUri)
{
    var nc = new NetworkCredential(this.config.ServiceUserName,
        this.config.ServicePassword);
    var cCache = new CredentialCache();
    cCache.Add(requestUri, "Basic", nc);

    var request = (HttpWebRequest)HttpWebRequest.Create(requestUri);
    request.Credentials = cCache;
    request.PreAuthenticate = true;
    request.Method = WebRequestMethods.Http.Get;

    var response = (HttpWebResponse)request.GetResponse();
    return XDocument.Load(new StreamReader(response.GetResponseStream()));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T04:26:54.610

在 Web 服务端使用 Windows 身份验证时您将遇到/将遇到的问题列表：

*   正如 Cheeso 指出的那样，您的请求可能只是在匿名（或本地）帐户下运行。这可能是由于在没有模拟调用用户的情况下运行并且进程本身在错误的帐户下运行，或者用户被认为是匿名的并且请求被切换到该特殊的本地“匿名”帐户。
*   当您通过打开传入用户的模拟来解决上述问题时，您将遇到“NTLM 单跳地狱”问题 - 传入凭据不能在其他服务器上使用（Kerberos 是一种解决方案，但在大多数情况下不太可能可用）。
*   当您通过禁用模拟（或在进程帐户而不是传入用户帐户下运行代码）并让进程在域帐户（或其他实际有权访问 Web 服务的帐户）下运行来解决第一个问题时，您会遇到这样的事实您可能会为用户提供获取本不应访问的数据的可能性。

本质上，您需要弄清楚哪个帐户可以/应该访问 Web 服务并运行访问该帐户下的 Web 服务的代码。该帐户必须在本地登录（不能使用传入用户的身份）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T19:20:05.573

我现在没有时间深入研究原因，但我可以说这与我的代理设置有关。为我的盒子切换到不同的代理提供商缓解了这个问题。这个内部事务应该一起绕过代理，为什么 IIS 的行为与其他机制不同是我无法理解的。我不情愿地将其标记为答案，并希望检查您的代理设置的小通知对某人有所帮助。抱歉，这不是更具体。

# jquery - 使用 Magento，我如何获取要加载的 jQuery 脚本？

> ID：11060141
> 
> 赞同：0
> 
> 时间：2012-06-16T01:48:42.840
> 
> 标签：jquery, magento

所以我试图在我们的单页结帐页面上加载以下 jQuery 代码......基本上它应该在输入文本字段时显示一个相关的 div......但是，它只是不会加载。我已经在 jsfiddle 中尝试过，它工作正常，但是一旦在 Magento 上，它就无法工作了......

jQuery代码

```
<script>
  jQuery.noConflict();

  jQuery(window).load(function(){
jQuery(".show-hidden-div").click(function() {
    jQuery('.hidden-div').css('display','none');
    var inputId = $(this).attr('id');
    jQuery("#tip-"+inputId+"").show();
});

});
</script> 
```

以上代码直接输入到head.phtml文件中

这是 jsfiddle 的链接，它显示了它应该如何工作.... [http://jsfiddle.net/PeTUy/8/](http://jsfiddle.net/PeTUy/8/)

任何见解都会有所帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T06:15:43.183

Magento 默认不包含 jQuery，您需要先包含 jQuery 源代码。

如果您还没有包含 jQuery，这里的链接可能会有所帮助：

[http://www.magentocommerce.com/boards/viewthread/268482/](http://www.magentocommerce.com/boards/viewthread/268482/)

假设您已经这样做了，请注意使用 jQuery 的 noConflict 模式的好处是重新定义用于选择元素的变量，如下所示：

```
var $j = jQuery.noConflict(); 
```

然后在需要的地方使用 $j ，如下所示：

```
$j(document).ready(function(){

    $j(".selector).functionName();

}); 
```

这样，jQuery 使用的标准“$”变量不会与原型之类的使用相同变量的变量冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T05:53:10.003

但是关于 Magento 和 jQuery 以及 Prototype 的使用：

1.  在任何原型脚本之前包含 jQuery
2.  添加 jQuery.noConflict(); 直接到你的 jQuery 文件的末尾，以确保它总是在原型脚本之前被调用并正确隔离

你需要这个来避免 protptype 和 jquery 冲突，因为它们都争用 $ 作为方法名

# php - 将表单验证值传递给 php

> ID：11060142
> 
> 赞同：1
> 
> 时间：2012-06-16T01:48:55.803
> 
> 标签：php, javascript, forms, variables

所以我有一个带有脚本的简单表单，可以在提交之前检查数据：

```
<form action='self.php' name='my_form' method='post' onSubmit="return checkit();">
    <select name='menu' id='menu'>
        <option value='00'>ZERO</option>
        <option value='01'>ONE</option>
    </select>
</form> 
```

我想要一个弹出框或警告框来请求更多信息。有点像：

```
<script type="text/javascript">
function checkit()
{
    if(document.my_form.menu.value == "01")
    {
        var getColor = prompt("Enter Color: ", "enter the color");
        return false;
    }
</script> 
```

然后我将如何在提交时将变量“getColor”传递给 PHP 变量？

几乎是这样的：

```
<?php
    $theColorIs = getColor;
?> 
```

有没有办法做到这一点？我知道 PHP 是服务器端，而脚本不是，但由于脚本停止了表单，因此尚未提交表单。这似乎是一件简单的事情，还有其他选择吗？

早点感谢帮助！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T01:56:01.153

您可以在表单中使用隐藏字段来存储值并通过 PHP 检索它

html表单：

```
<form action='self.php' name='my_form' method='post' onSubmit="return checkit();">
<input type="hidden" value="" name="myhiddenfield" id="myhiddenfield" />
<select name='menu' id='menu'>
<option value='00'>ZERO</option>
<option value='01'>ONE</option>
</select>
</form> 
```

剧本：

```
if(document.my_form.menu.value == "01")
{
   var getColor = prompt("Enter Color: ", "enter the color");
   document.getElementById('myhiddenfield').value = getColor;
} 
```

所以当表单提交时，值存储在 $_POST['myhiddenfield']

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T16:50:53.347

您可以将该值附加到表单操作的查询字符串中：

```
<script type="text/javascript">
function checkit()
{
  if(document.my_form.menu.value == "01")
  {
    var getColor = prompt("Enter Color: ", "enter the color");
    document.my_form.action += "?color=" + getColor;
    return false;
  }
}
</script> 
```

然后，您可以在 PHP 代码中引用颜色，如下所示：

```
if( isset( $_GET['color'] )
{
  $theColorIs = $_GET['color'];
} 
```

# javascript - 无法使用谷歌应用引擎播放音频。它在本地工作

> ID：11060146
> 
> 赞同：1
> 
> 时间：2012-06-16T01:49:41.643
> 
> 标签：javascript, html, google-app-engine, webapp2

我有一个带有一些阿拉伯数字的网页，其中通过鼠标悬停动作播放音频并且数字发音。它在我的浏览器中本地工作，但在谷歌应用引擎下不起作用。它在谷歌应用引擎下也不能在本地工作，但如果我只运行 html 文件，它就可以工作。这是我的代码的一部分

```
<script language="javascript" type="text/javascript">

 function playSound(soundfile) {
 document.getElementById("dummy").innerHTML=
 "<embed src=\""+soundfile+"\" hidden=\"true\" autostart=\"true\" loop=\"false\" />";
 };
 </script> 
```

```
<div>

    <table>
        <tr>    
            <td onmouseover="playSound('numbers/1.mp3');">واحِد</td>
            <td onmouseover="playSound('numbers/1st.mp3');">الأَوَّل</td>
            <td onmouseover="playSound('numbers/1st_f.mp3');">الأُولى</td>
            <td onmouseover="playSound('numbers/saturday.mp3');">السَّبْت</td>
        </tr>

    </table> 
```

这是python代码

```
import os
import webapp2
import jinja2
from google.appengine.ext import db

template_dir = os.path.join(os.path.dirname(__file__), 'templates')
jinja_env = jinja2.Environment(loader = jinja2.FileSystemLoader(template_dir),
                               autoescape=True)

class Handler(webapp2.RequestHandler):
    def write(self, *a, **kw):
        self.response.out.write(*a, **kw)
    def render_str(self, template, **params):
        t = jinja_env.get_template(template)
        return t.render(params)
    def render(self, template, **kw):
        self.write(self.render_str(template, **kw))

class MainPage(Handler):
    def get(self):
        self.render('ArabicNumbers.html')

app = webapp2.WSGIApplication([('/', MainPage)], debug=True) 
```

这是 app.yaml

```
application: arabicbetweenyourhands
version: 1
runtime: python27
api_version: 1
threadsafe: yes

handlers:
- url: /favicon\.ico
  static_files: favicon.ico
  upload: favicon\.ico

- url: .*
  script: main.app

libraries:
- name: webapp2
  version: "2.5.1"

- name: jinja2
  version: latest 
```

另外，这里是网站的网址。arabicbetweenyourhands.appspot.com。你可以在那里看到完整的源代码。有任何想法吗？？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T02:54:37.727

当我访问您的页面时，我得到了[http://arabicbetweenyourhands.appspot.com/numbers/4th_f.mp3的 404](http://arabicbetweenyourhands.appspot.com/numbers/4th_f.mp3)

您需要将您的“数字”目录作为静态目录添加到您的 app.yaml 并添加适当的 mime 类型，如下所示：

```
handlers:
- url: /numbers
  static_dir: numbers
  mime_type: audio/mp3 
```

# html - 居中的搜索框 + 按钮，以最大宽度增长和缩小，不换行

> ID：11060147
> 
> 赞同：1
> 
> 时间：2012-06-16T01:49:45.007
> 
> 标签：html, css

我坚持让这个 HTML/CSS 工作。

我有 3 个输入，一个搜索框和 2 个按钮。当浏览器足够宽以处理它时，我希望搜索框的最大宽度增加到 400 像素，但也缩小到适合 100% 的宽度减去移动浏览器之类的 2 个按钮的宽度。我不想让按钮换行。

这就是我想要的：

桌面/大显示器：

```
|                                                          |
|            SSSSSSSSSSSSSSSSSSSSSSSSSSSSSS A B            |
|                                                          | 
```

移动/小型显示器：

```
|                  |
| SSSSSSSSSSSS A B |
|                  | 
```

这是我到目前为止所得到的。使用 div 方法，不考虑按钮的组合宽度，当浏览器缩小时它们会滚动到页面外。表格方法是关闭的，但是当浏览器放大时，按钮会紧贴浏览器的右侧。

分区：

```
<html>
  <head>
    <meta name="viewport"
    content="width=device-width, initial-scale=1" />
    <style type="text/css">
        .search {
            text-align: center;
            padding:5px;
            white-space:nowrap;
        }
    </style>
  </head>
  <div id="SearchDiv" class="search">
    <input type="text" id="SearchTextBox" x-webkit-speech=""
    speech="" style="width:100%;max-width:400px" />
    <input type="submit" value="Find" id="FindButton" style="" />
    <input type="submit" value="More" id="MoreButton" style="" />
  </div>
</html> 
```

桌子：

```
<html>
  <head>
    <meta name="viewport"
    content="width=device-width, initial-scale=1" />
    <style type="text/css">
    .search {
        text-align: center;
        padding:5px;
    }
    </style>
  </head>
  <table class="search" align="center" width="100%"
  cellpadding="0">
    <tr>
      <td width="100%">
        <input type="text" id="SearchTextBox" x-webkit-speech=""
        speech="" style="width:100%;max-width:400px;" />
      </td>
      <td>
        <input type="submit" value="Find" id="FindButton" />
      </td>
      <td>
        <input type="submit" value="More" id="MoreButton" />
      </td>
    </tr>
  </table>
</html> 
```

贾志豪的建议（不能正常工作）

分区：

```
<html>
  <head>
    <meta name="viewport"
    content="width=device-width, initial-scale=1" />
    <style type="text/css">
        .search {
            text-align: center;
            padding:5px;
            white-space:nowrap;
            max-width:400px;
        }
    </style>
  </head>
  <div id="SearchDiv" class="search">
    <input type="text" id="SearchTextBox" x-webkit-speech=""
    speech="" style="width:100%;" />
    <input type="submit" value="Find" id="FindButton" style="" />
    <input type="submit" value="More" id="MoreButton" style="" />
  </div>
</html> 
```

桌子：

```
<html>
  <head>
    <meta name="viewport"
    content="width=device-width, initial-scale=1" />
    <style type="text/css">
    .search {
        text-align: center;
        padding:5px;
    }
    </style>
  </head>
  <table class="search" width="100%"
  cellpadding="0">
    <tr>
      <td align="right">
        <input type="text" id="SearchTextBox" x-webkit-speech=""
        speech="" style="width:100%;max-width:400px;" />
      </td>
      <td align="left">
        <input type="submit" value="Find" id="FindButton" />
        <input type="submit" value="More" id="MoreButton" />
      </td>
    </tr>
  </table>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T08:32:40.027

根据我对问题的理解，请尝试以下解决方案 -

仅粘贴更改后的代码 -

```
<div id="SearchDiv" class="search"style="min-width:480px;" >
<input type="text" id="SearchTextBox" x-webkit-speech=""
speech="" style="width:70%;min-width:100px" /> 
```

[**完整演示**](http://jsfiddle.net/QRNcx/)

注意：如果内容没有空间容纳可用的显示 - 它**会**消失，但仍然可以通过滚动看到。因此，使用宽度来优化显示。我不确定您是否可以将搜索栏保持在给定宽度的位置，并期望按钮在没有任何空间留在当前视图中时也保持在同一视图中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T02:37:17.150

对于 div 方法，您可以通过在 div（包含元素）而不是文本框上设置 max-width 来考虑按钮的宽度。

对于表格方法，您可以通过将两个按钮放在一个 td 中，然后在按钮 td 上设置 align=left 并在文本框 td 上设置 align=right 来避免按钮拥抱右侧。您还需要从文本框 td 中删除 width=100%。像这样的东西：

```
<tr>
  <td align="right">
    <input type="text" id="SearchTextBox" x-webkit-speech=""
    speech="" style="width:100%;max-width:400px;" />
  </td>
  <td align="left">
    <input type="submit" value="Find" id="FindButton" />
    <input type="submit" value="More" id="MoreButton" />
  </td>
</tr> 
```

# python - 如何在 python 中进行 fork 或非阻塞系统调用

> ID：11060150
> 
> 赞同：4
> 
> 时间：2012-06-16T01:50:58.330
> 
> 标签：python, ubuntu-12.04, autokey

这与[这个问题](https://stackoverflow.com/questions/204017/how-do-i-execute-a-program-from-python-os-system-fails-due-to-spaces-in-path)有关，但有不同的看法。

在 Ubuntu 中，我使用 Autokey，它使用 python 来自动化它观察到的击键。所以我已经`<super>+e`映射到`<shift>+<super>+3`打开 Gedit，打开 OOwriter 等。当我进行其中一个调用时，我不能再进行另一个调用，直到之前调用的程序退出。

这是它执行的脚本示例：

```
import subprocess
subprocess.call("/opt/openoffice.org3/program/scalc") 
```

...使用相同的行为：

```
import os
os.system("/opt/openoffice.org3/program/scalc") 
```

这一切在我之前的 Ubuntu 10.04LTS 中运行顺利，但从那以后情况发生了变化，我无法重复进行这些调用。

**您能帮我解决如何在不等待程序退出的情况下从 subprocess.call() 中“取回”的方法进行分叉或做一些事情吗？**我尝试了 nohup 和背景`/opt/openoffice.org3/program/scalc &`，但它们什么也没做（可能会破坏 Autokey 和 Py 中的某些内容）

* * *

**答案：**下面的答案实际上并没有用，但让我更多地窥探，我找到了另一个对我的情况有用的[SO 答案！](https://stackoverflow.com/questions/1613713/in-python-how-can-i-do-a-non-blocking-system-call)

```
#Enter script code -- mapped to <super>+e
import thread
thread.start_new_thread(os.system,('gedit',)) 
```

这完全有效！我可以连续点击`<super>+e`2 或 3 次，它会不断向 gedit 添加标签。:) 此脚本使 Autokey 的行为就像在命令行中键入引号中的命令一样。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-16T02:08:27.563

它就像使用`Popen`而不是一样简单`call`：

```
import subprocess
subprocess.Popen("/opt/openoffice.org3/program/scalc") 
```

`call`永远不应该以这种方式工作，因为它必须返回退出代码，这意味着程序实际上必须退出。

# c++ - 静态初始化器

> ID：11060152
> 
> 赞同：0
> 
> 时间：2012-06-16T01:51:57.553
> 
> 标签：c++, initialization

我正在摆弄一种可能的方法来运行一些“这些东西需要在程序启动时初始化”代码，同时将它们保持在各自模块的本地，并想出了这个：

```
static struct init {
    init() {
        // do stuff
    }
} _; 
```

当我把它放在模块中`a.cc`时，它工作得很好。当我把它也放在`b.cc`不太好的模块中时 - A 的版本被调用了两次，而 B 的版本根本没有。我认为好的，编译器错误，它对具有相同名称的两个函数感到困惑，但令我惊讶的是，在进一步的测试中，它在 Microsoft C++ 和 GCC 中的行为方式完全相同。两个编译器是否碰巧有相同的错误，还是我在语言语义方面遗漏了什么？

此外，对于解决方法或实现相同结果的其他方法的任何建议（除了导出相关函数并显式调用它们`main`显然是后备）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T01:56:01.300

*变量*是静态的，因此仅在它们各自的翻译单元中可见，但*类型*不是。将你的结构放在匿名命名空间中怎么样？

# ruby-on-rails - Rails 搜索 => 模型关系

> ID：11060153
> 
> 赞同：0
> 
> 时间：2012-06-16T01:51:59.027
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个名为“Notes”的主要模型，它具有以下内容：

```
attr_accessible :name, :label_tokens
has_many :labelships
has_many :labels, :through => :labelships
attr_reader :label_tokens 
```

所以基本上 Note_id 和 Label_id 都保存在 Labelships 表中。

我想做的是创建一个不同标签的列表，并在每个值上创建一个指向相应注释的链接。

示例：注意“mynote”有一个通过 labelship 表关联的“git”标签，我希望 Git 出现在其他标签列表中，然后当我点击 git 时，我得到一个带有标签的笔记列表'git' 在他们身上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T02:01:20.387

假设您有以下模型：

```
class Note
  has_many :labelships
  has_many :labels, :through => :labelships
end

class Labelships
  belongs_to :note
  belongs_to :label
end

class Label
  has_many :labelships
  has_many :notes, :through => :labelships
end 
```

现在给定一个标签，你可以得到它的注释，如下所示：

```
label.notes 
```

要排除手头的笔记：

```
label.notes.where("id != ?", note.id) 
```

# iphone - iOS - 在数组中查找复杂对象

> ID：11060156
> 
> 赞同：17
> 
> 时间：2012-06-16T01:52:15.693
> 
> 标签：iphone, ios, cocoa-touch, cocoa, ipad

我有一个来自 NSObject 类的对象，我称之为“品牌”，并且具有以下属性：

```
.name
.number
.site 
```

在给定时间，数十个这样的对象存储在 NSMutableArray 上，例如：

```
object 1
object 2
object 3
object 4
... 
```

我希望能够通过其编号从数组中检索给定对象。不是数组中对象的索引，而是对象的 number 属性（例如，获取 number 属性等于 10 的对象）。

我知道 NSArrays 有检索东西的智能方法，但我不了解它们，因为我很少使用它。有没有办法从数组中检索该对象，而不必遍历数组上的所有对象并检查每个对象的 number 属性？

你们能帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-16T02:10:11.840

我会推荐`NSPredicate`。你可以用这样的东西来做，假设`listOfItems`你的数组包含你`NSObject`的 's 和上述属性。

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"number == 10"];
NSArray *filtered = [listOfItems filteredArrayUsingPredicate:predicate]; 
```

您过滤的结果，任何匹配的数字`10`现在都将在`filtered`数组中。如果你想转换回你的对象，你可以这样做：

```
YourObject *object = (YourObject*)[filtered objectAtIndex:0]; 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-16T02:02:19.620

```
NSUInteger indexOfObject10 = [myArray indexOfObjectPassingTest:^(id obj, NSUInteger idx, BOOL *stop){
    MyObject *object = (MyObject *)obj;
    return [object.number == 10];
}];

MyObject *object10 = myArray[indexOfObject10]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T03:54:10.760

我更喜欢使用 NSArray 的块扩展，让您更自然地与它们“交谈”并编写更少的代码。Smalltalk Collections 行话中的一些东西：

*   探测：
*   选择：
*   注入：注入：
*   等等

在你的情况下，我会使用：

```
MyObject* theObject = [myArray detect:^(MyObject* each){
     return each.number == 10;
}]; 
```

在这里，您有一个可能实现 NSArray 的扩展

```
typedef BOOL (^BlockPredicate) (id element);

-(id) detect:(BlockPredicate) predicateBlock{
     for (id each in self) {
        if (predicateBlock(each)) {
            return each;
        }
    }
    return nil;
} 
```

我发现这种工具真的很有帮助。我希望你也觉得它们有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-16T02:04:55.873

也许是这样的：

```
NSObject *retrieveObject = [[NSObject alloc] init];
retrieveObject.number = 1;

NSObject *anObject = [yourMutableArray objectAtIndex:[yourMutableArray indexOfObjectIdenticalTo:testObject]]; 
```

首先，我创建一个与数组中要检索的对象具有相同编号的对象（在本例中为“1”）。在下一行中，我假设当您检索它时，您希望将它的值分配给另一个对象，因此我使用标准`objectAtIndex:`方法检索它，索引参数是另一个方法，即`indexOfObjectIdenticalTo:`方法，该方法的参数是`retriveObject`对象。所以它的作用是在数组中查找与retrieveObject 相同的第一个对象（意味着它们具有相同的编号）并返回该对象的索引，然后将该值传递给该`objectAtIndex`方法。

希望这可以帮助！

# php - 匹配 HTML 类标签之间的文本

> ID：11060161
> 
> 赞同：1
> 
> 时间：2012-06-16T01:53:02.223
> 
> 标签：php, regex, html-parsing, preg-match-all

我得到以下 HTML 代码：

```
<ul class='ips'>my_content</ul> 
```

现在，我怎样才能`preg_match_all`只匹配`my_content`文本？

我正在尝试这个问题的答案：[Preg match text in php between html tags](https://stackoverflow.com/questions/1586779/preg-match-text-in-php-between-html-tags)但修改正则表达式会导致选择包括 HTML 标签在内的整个代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T02:53:13.700

以下正则表达式将用于标签之间的匹配。

它将匹配：

```
<ul class='ips'>... 
```

带单引号和双引号。

```
$string = "<ul class='ips'>my_content</ul>";
preg_match_all('/[^>]class=["\']ips[\'"]*>(.*?)<\//',
           $string,
           $matches,
           PREG_PATTERN_ORDER);
print_r($matches); 
```

如果您不关心它是 div、ul 还是等，请从正则表达式模式中删除`<ul`and 。`ul>`

楼上的回复：

```
Array
(
[0] => Array
    (
        [0] => <ul class="ips">my_content</ul>
    )

[1] => Array
    (
        [0] => my_content
    )

) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-12T20:56:46.243

在这里，使用这个 RegEx 来允许变化：

```
/[^>]class\s*=\s*["\'].*ips.*[\'"].*>/ 
```

*   等号前后的空格
*   一个类属性中的多个类名
*   类属性后的多个属性

# html - 水平移动时背景图像未在较小的屏幕中显示

> ID：11060162
> 
> 赞同：0
> 
> 时间：2012-06-16T01:53:02.480
> 
> 标签：html, css, stylesheet, resolution, screen-resolution

我设计了一个具有 960 网格系统的网站，并通过 CSS 为页眉和页脚应用了背景图像和备用颜色，如下所示，

```
html {
height: 100%;
background: url(../images/htmlbg1.jpg) repeat-x;
} 

body {
font-family:Geneva,Arial,Helvetica,sans-serif; font-size:12px;
margin:0;
width:100%;
height: 100%;
background:url(../images/headerdrbg.jpg) repeat-x 0 0;
}

footer { 
width:100%; padding:12px 0px; 
background:#404040 url(../images/footertop1.jpg) repeat-x 0 0;
color:#808080; 
} 
```

它在大多数浏览器上都能正常工作。小屏也挺好看的。但是当我水平滚动时，我看不到背景图像（即.headerdrbg.jpg 和footertop1.jpg）。见附图。[在 640x480px 水平移动滚动条后的页脚截图](http://i.stack.imgur.com/gw4OH.png)

请帮我找到解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T02:55:46.007

如果您使用的是 960 GS，您应该不会遇到这个问题，因为它们在`body`. 确保您没有删除它，或者如果您的布局宽于 960 像素，则更改该值：

```
/*
  Forces backgrounds to span full width,
  even if there is horizontal scrolling.
  Increase this if your layout is wider.

  Note: IE6 works fine without this fix.
*/

body {
    min-width: 960px;
} 
```

# google-apps-script - 在 Google Apps 脚本中使用 BigQuery 连接到 Google 电子表格

> ID：11060163
> 
> 赞同：0
> 
> 时间：2012-06-16T01:53:17.113
> 
> 标签：google-apps-script, google-sheets, google-spreadsheet-api, google-bigquery

我在 API 控制台和我的 GAS 应用程序中启用了 BigQuery，并尝试使用此线程中的示例：[Accessing BigQuery with Google Spreadsheet](https://stackoverflow.com/questions/10775975/accessing-bigquery-with-google-spreadsheet/10777975#10777975)

我获得了项目 ID，但我不知道如何连接到我的 Google 电子表格。

无论如何，您如何在 GAS 中使用 BigQuery 连接到 Google 电子表格？您是否在 API 控制台中将电子表格作为数据集输入？这是怎么做的？

V2 文档有几个教程和示例，但没有关于使用 GAS 连接到 Google 电子表格的内容。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T02:03:13.900

您可以使用 GAS 从电子表格调用 Google BigQuery。但是您无法从 Google BigQuery 查询中读取 Google 电子表格中的值。

Google BigQuery 是单独的产品，您必须将数据上传到 Google BigQuery 进行查询。Google BigQuery 不会自动读取电子表格。您必须先将 Spreasheet 导出为 CSV 并上传到 BigQuery，然后才能查询数据。

您可以做的是您可以将电子表格用作 BigQuery 的前端，例如，用户可以填充电子表格中的某些字段，GAS 可以使用该值并查询 BigQuery 以获取结果并填充电子表格并使用图表等可视化小工具在电子表格中查看数据。

# windows - 重定向命令行输出以防止错误消息显示在命令窗口中

> ID：11060166
> 
> 赞同：1
> 
> 时间：2012-06-16T01:54:13.697
> 
> 标签：windows, redirect, batch-file, errorlevel

我正在测试一个文件夹的存在，并且根据它的存在，我想运行不同的命令：

```
DIR %MYDIR%\tmp > test.txt
IF ERRORLEVEL 1 (
      echo/FOLDER DOES NOT EXIST
) else (
      echo/FOLDER EXISTS
      ) 
```

问题是，如果该文件夹不存在，除了标准输出之外，我还会收到此错误：

```
The system cannot find the file specified. 
```

我想显示正确的输出而不会出现错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T02:14:35.223

这个怎么样：

```
DIR %MYDIR%\tmp > nul 2>&1 
```

"> nul" 表示将标准输出重定向到文件 nul（比特桶）。

“2>”用于重定向标准错误（描述符2）。所以 "2>&1" 用于将标准错误重定向为标准输出（描述符 1 -- 所以 "> null 和 1> null 是相同的）。或者你可以使用 "2> nul"。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T01:57:35.557

You might have run into a common problem that I have seen many times in my own scripts: not expecting a space in the file path.

The value of the MYDIR environment variable might have a space in it. When there is are spaces in a path, most commands see it as multiple parameters since spaces are used to separate parameters. So, in your case if MYDIR is `C:\Documents and Settings\Jim\My Documents` then your script would be attempting to perform a directory listing on several parameters:

*   C:\Documents
*   and
*   Settings\Jim\My
*   Documents

Try this in a command prompt:

```
C:\> mkdir learn

C:\> cd learn

C:\learn> mkdir peas and carrots

C:\learn> dir

 Volume in drive C is OS
 Volume Serial Number is 7199-C950

 Directory of C:\learn

10/03/2012  07:26 PM    <DIR>          .
10/03/2012  07:26 PM    <DIR>          ..
10/03/2012  07:26 PM    <DIR>          and
10/03/2012  07:26 PM    <DIR>          carrots
10/03/2012  07:26 PM    <DIR>          peas 
```

Hmmm, three folders named "peas", "and", "carrots", (sorted alphabetically as is my preference for the dir command). To create a folder with spaces in the name, you must put quotes around the folder name:

```
C:\learn> mkdir "peas and carrots"

C:\learn> dir

 Volume in drive C is OS
 Volume Serial Number is 7199-C950

 Directory of C:\learn

10/03/2012  08:10 PM    <DIR>          .
10/03/2012  08:10 PM    <DIR>          ..
10/03/2012  07:26 PM    <DIR>          and
10/03/2012  07:26 PM    <DIR>          carrots
10/03/2012  07:26 PM    <DIR>          peas
10/03/2012  07:29 PM    <DIR>          peas and carrots
               0 File(s)              0 bytes
               6 Dir(s)  49,670,320,128 bytes free 
```

To correct this problem in your case, add quotes around the file/folder path:

```
DIR "%MYDIR%\tmp" > test.txt 
```

That eliminates the `system cannot find the file specified` even if the file **does** exist problem.

Unfortunately, if the file/folder really **does not** exist, you will get that same error message. If you are insistent upon using the `DIR` command for this, then you will have to redirect `stderr` stream. You have already redirected `stdout` using the `>` redirect operator. To redirect `stderr` to the same file, your command should look like this:

```
DIR "%MYDIR%\tmp" > test.txt 2>&1 
```

Based on the output messages of your batch file, I am assuming you are only interested in determining if %MYDIR%\tmp exists, and you do not actually want the directory listing of %MYDIR%\tmp left in a file called test.txt in the current working directory. If you are simply checking if a file/folder exists, then using the `DIR` command is a pretty bad choice. If %MYDIR%\tmp is a folder, then the script would be wasting time retrieving the directory information for every file in that folder. If there are thousands of files in that folder, it could result in a noticeable delay. In addition, you have deposited a file named test.txt in the current working directory which you should delete before you script exits... you know... assuming you didn't really want that file in the first place.

If you simply want to know if the folder or file exists there is a much better choice: The `if exist` command is perfectly suited for your needs. To find out more about the `if` command, in a Windows Command Prompt window, type: `if /?`

Example:

```
C:\> if /?
Performs conditional processing in batch programs.

IF [NOT] ERRORLEVEL number command
IF [NOT] string1==string2 command
IF [NOT] EXIST filename command 
```

At first glance the documentation implies that `if exist` works with files only, but rest assured it does work with folders as well as files.

As you are reading through the `if` command's documentation, you may come across the phrase "if Command Extensions are enabled ..." On most systems Command Extensions are enabled by default, but I still like to make the second line of any script `setlocal EnableExtensions`. The first line is `@echo off`, which is quickly change to `rem @echo off` until I have finished debugging.

The `setlocal EnableExtensions` command does two things:

1.  ensures that any environment variables that you set or change within that script will not affect the calling environment.
2.  ensures that Command Extensions are enabled. Command Extensions are good

If you want to impress your friends by writing sophisticated and useful scripts in Batch (a task that at one time was thought to be impossible), read carefully and grock the embedded documentation on each of these commands:

*   if
*   set
*   call
*   for
*   cmd

You will have to utilize every trick and nuance these commands have to offer to write really good scripts.

For example: The `set` command can be used for many tasks:

1.  Simple assignment:
    `set myDir=C:\Foo`

2.  Performing math:
    `set /a myCount=myCount + 1`

3.  Prompting for input:
    `set /p myColor=What is favorite color`

4.  Extracting substrings:
    `set myCentury=%myYear:~0,2%`

Here is how I would have written your script

```
@echo off
setlocal EnableExtensions

if exist "%MyDir%\tmp" (
    echo Folder exists
) else (
    echo Folder does not exist
) 
```

Good luck and happy hunting.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T02:17:23.280

改用`exist`：

```
@echo off
if exist %MYDIR%\tmp (
  dir %MYDIR%\tmp > test.txt
  goto EndIt
)
echo %MYDIR%\tmp not found > test.txt
:EndIt 
```

# iphone - 如何声明 textFIELDShouldEndEditing？

> ID：11060169
> 
> 赞同：-1
> 
> 时间：2012-06-16T01:54:50.787
> 
> 标签：iphone, xcode, uitextfield

当我验证输入并确定用户需要进行更改时，我无法保持键盘处于活动状态。有人建议我使用 textFieldShouldEndEditing 并返回“no”来完成此操作。

我在一开始就在我的代码中用 NSLog 声明了这一点，但我从来没有到达那里。我做了一些研究，发现它是在 UITextField.h 中声明的。我有一种感觉，我没有得到那个。我尝试导入 UITextField.h 并出现错误。有人可以告诉我我做错了什么以及我需要做什么才能调用 textFieldShouldEndEditing 吗？我发现的一些文档表明，当要求文本字段辞去第一响应者时，会调用此方法。我正在这样做，但基于没有 NSLog 条目，我显然没有进入该方法。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T02:02:30.203

确保您的课程符合`UITextFieldDelegate`并且您正确设置它。

```
@interface YourClass: UIViewController <UITextFieldDelegate> 
```

在你的`.m`.

```
textfield.delegate = self; 
```

# php - PHP：简单的 HTML DOM 解析器 - 如何获取具有特定内容的元素？

> ID：11060170
> 
> 赞同：1
> 
> 时间：2012-06-16T01:54:51.140
> 
> 标签：php, web-scraping, simple-html-dom

在 PHP 中，我使用的是 Simple HTML DOM Parser 类。

我有一个包含多个 A 标记的 HTML 文件。

现在我需要找到里面有特定文本的标签。

例如 ：

```
$html = "<a id='tag1'>A</a>
         <a id='tag2'>B</a>
         <a id='tag3'>C</a>
        ";

$dom = str_get_html($html);
$tag = $dom->find("a[plaintext=B]"); 
```

上面的例子不起作用，因为纯文本只能用作属性。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T03:36:45.997

```
<?php
include("simple_html_dom.php");
$html = "<a id='tag1'>A</a>
         <a id='tag2'>B</a>
         <a id='tag3'>C</a>
        ";

$dom = str_get_html($html);
$select = NULL;
foreach($dom->find('a') as $element) {
       if ($element->innertext === "B") {
            $select = $element;
            break;   
       }
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-25T15:51:21.450

假设您要查找的每个特定文本仅映射到单个链接（听起来像您这样做），您可以构建一个关联查找数组。我自己也遇到了这个需求。以下是我的处理方式。这样您就不需要每次都循环遍历所有链接。

```
function populateOutlines($htmlOutlines)
{
  $marker = "courses";
  $charSlashFwd = "/";

  $outlines = array();

  foreach ($htmlOutlines->find("a") as $element)
  {
    // filter links for ones with certain markers if required
    if (strpos($element->href, $marker) !== false)
    {
      // construct the key the way you need it
      $dir = explode($charSlashFwd, $element->href);
      $code = preg_replace(
        "/[^a-zA-Z0-9 ]/", "", strtoupper(
          $dir[1]." ".$dir[2]));

      // insert the lookup entry
      $outlines[$code] = $element->href;
    }
  }

  return $outlines;
}

// ...stuff...

$htmlOutlines = file_get_html($urlOutlines);
$outlines = populateOutlines($htmlOutlines);

// ...more stuff...

if (array_key_exists($code, $outlines)) {
  $outline = $outlines[$code];
} else {
  $outline = "n/a";
} 
```

# javascript - javascript：传递函数

> ID：11060179
> 
> 赞同：6
> 
> 时间：2012-06-16T01:56:54.260
> 
> 标签：javascript

我正在学习 JavaScript。我知道我们可以在定义函数后将函数传递给其他函数。但我需要帮助来理解这个例子：

```
function map(func, array) {
  var result = [];
  forEach(array, function (element) {
    result.push(func(element));
  });
  return result;
} 
```

据我了解，func是map的一个参数。我需要提供一个函数作为func。但是在我正在阅读的教程中，并没有提到这个 func 来自哪里，似乎不需要指定这个参数？教程中的另一个例子是相同的：

```
 function count(test, array) {
  return reduce(function(total, element) {
    return total + (test(element) ? 1 : 0);
  }, 0, array);
} 
```

这个测试函数等于 element === 0 ? 1 : 0 ，但是教程并没有说我需要写下测试函数。我需要编写这个测试函数吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T02:07:56.233

***编辑：***在您发布的教程的链接中，传递的函数是一个预定义的函数`Math.round`。我下面的示例显示了创建自己的函数来传递。

* * *

该`map`示例显示了实现。当您调用`map`.

从它的外观来看，`map`将数组中的当前项传递给您的函数，您的函数应该对其进行处理并返回结果。您的函数返回的结果将添加到新数组中。

```
var arr = [1,2,3,4,5];
var my_func = function(item) { return item * 2; };

var new_arr = map(my_func, arr);

console.log(new_arr); // [2,4,6,8,10] 
```

1.  我们创建了一个 Array *( `arr`)*，

2.  我们创建了一个函数*( `my_func`)*，它接受给定的任何内容，并将其乘以 2。

3.  我们都通过了`map`

4.  该`map`函数迭代 our `arr`，将每次迭代中的当前项传递给我们的函数。

5.  我们的函数获取当前项目，并返回将其乘以 2 的结果。

6.  该`map`函数获取该结果，并将其添加到新数组中。

7.  迭代完成后，`map`函数返回新的数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T02:14:22.810

调用 map 时，传递的是内联函数或现有函数。

```
// The following would return [2,3,4]
map(function(item) { return item + 1}, [1,2,3]);

function double(item) {return item*2}
map(double, [1,2,3])
// returns [2,4,6]

// Your example, Math.round
map(Math.round, [0.01, 2, 9.89, Math.PI])
// returns [0,2,10,3] 
```

另一种说法是，一个函数可以像任何其他参数一样传递给另一个函数。这与函数在同一行上就像可以从函数传递或返回的任何其他变量一样

```
function createAdder(toAdd) {
    return function (num) {
        return num + toAdd;
    }
}

var add5 = createAdder(5);
add5(2); // returns 7

var add7 = createAdder(7);
add7(-2); // returns 5 
```

# wordpress - Wordpress tinymce.js 被解析为 PHP？

> ID：11060182
> 
> 赞同：6
> 
> 时间：2012-06-16T01:58:14.903
> 
> 标签：wordpress, tinymce

我的 WordPress“编辑帖子”页面中的 TinyMCE 编辑器似乎坏了。Chrome 控制台显示：

```
Resource interpreted as Script but transferred with MIME type text/html: "http://mysite.com/wp-includes/js/tinymce/langs/wp-langs-en.js?ver=349-20805". post.php:62
Resource interpreted as Script but transferred with MIME type text/html: "http://mysite.com/wp-includes/js/tinymce/tiny_mce.js?ver=349-20805". post.php:62
Uncaught SyntaxError: Unexpected token <          tiny_mce.js:1
Uncaught ReferenceError: tinyMCE is not defined   wp-langs-en.js:1
Uncaught ReferenceError: tinymce is not defined   post.php:1180 
```

如果我在 Chrome 开发人员工具中检查 tinymce.js，我会看到以下响应标头：

```
Cache-Control:public, must-revalidate, proxy-revalidate
Connection:close
Content-Type:text/html
Date:Sat, 16 Jun 2012 01:40:42 GMT
Pragma:public
Server:Apache
Transfer-Encoding:chunked
Vary:Accept-Encoding
X-Powered-By:PHP/5.2.17, W3 Total Cache/0.9.2.4 
```

而这个回应：

```
<br />
<b>Parse error</b>:  syntax error, unexpected T_CONSTANT_ENCAPSED_STRING in <b>/home/mysite/public_html/wp-includes/js/tinymce/tiny_mce.js</b> on line <b>1</b><br /> 
```

正在正确检索和执行各种其他 .js 文件。关闭 W3TC 没有任何区别。Firefox 也存在问题。这个问题似乎突然出现了。我不知道我改变了什么，甚至没有更新或安装/卸载插件。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T09:41:37.140

除非 PHP 正在处理 .js 文件请求，否则这不会发生。

检查您的 Apache2 conf 文件并检查 conf.d 文件夹中的所有 conf.d 文件。还要检查您的 .htaccess 文件。在这些文件中寻找如下内容：

```
AddHandler application/x-httpd-php .js 
```

它可能出现在这样的块中：

```
<FilesMatch ".js$">
AddHandler application/x-httpd-php .js
php_value default_mimetype "text/javascript"
</FilesMatch> 
```

一些 .htaccess 和 apache 配置教程建议使用 PHP 来处理 .js 文件，因为它会让你做一些技巧。最常见的原因是调用 PHP GZIP 文件来 ZIP 压缩 JS 文件。不幸的是，使用 php 处理 tiny_mce.js 似乎破坏了 Wordpress。PHP 绊倒了 tiny_mce.js 文件中的某些东西——也许是因为它被缩小了？

我遇到了这个确切的问题，不得不从我的配置中删除 .js 文件的 php 处理程序。实际上不需要它，因为我的 Apache 被配置为自己进行压缩。我没有调用 PHP 文件来执行 gzip。依靠 PHP 脚本进行 zip 压缩确实不是最好的做事方式（很明显，因为它会产生类似这样的问题！）。

希望这可以帮助某人。

读者可能还会发现这篇文章很有用： [Caching problem using "AddHandler application/x-httpd-php"](https://stackoverflow.com/questions/7437800/caching-problem-using-addhandler-application-x-httpd-php)

我还要补充一点，出于性能原因，随意使用 PHP 处理 JS 和 CSS 等静态文件并不是一个好主意。除非文件是真正动态的，否则永远不要调用 PHP 处理程序。否则，您将向服务器添加不必要的资源要求。

# ruby - 为什么在 Mac OSX 10.6 上使用 RVM 安装 Ruby 1.9.3 时出现“文件不是必需的架构”？

> ID：11060184
> 
> 赞同：1
> 
> 时间：2012-06-16T01:58:36.210
> 
> 标签：ruby

我正在尝试在 Mac OSX 10.6 上安装 Ruby 1.9.3。我已经很好地安装了 10.8.7。StackOverflow 上已经有很多这样的主题，但他们的修复一直没有奏效。这是终端打印出来的内容：

```
Installing Ruby from source to: /Users/cavan/.rvm/rubies/ruby-1.9.3-p194, this may take a while depending on your cpu(s)...
ruby-1.9.3-p194 - #fetching 
ruby-1.9.3-p194 - #extracted to /Users/cavan/.rvm/src/ruby-1.9.3-p194 (already extracted)
ruby-1.9.3-p194 - #configuring 
ruby-1.9.3-p194 - #compiling 
Error running 'make ', please read /Users/cavan/.rvm/log/ruby-1.9.3-p194/make.log
There has been an error while running make. Halting the installation. 
```

这是它请求的日志的错误部分：

```
linking shared-object digest/md5.bundle
compiling rmd160init.c
ld: in /usr/local/lib/libz.1.dylib, file is not of required architecture
collect2: ld returned 1 exit status
make[2]: *** [../../../.ext/x86_64-darwin10.7.0/digest/md5.bundle] Error 1
make[1]: *** [ext/digest/md5/all] Error 2
make[1]: *** Waiting for unfinished jobs....
compiling rmd160ossl.c
installing default rmd160 libraries
linking shared-object digest/rmd160.bundle
ld: in /usr/local/lib/libz.1.dylib, file is not of required architecture
collect2: ld returned 1 exit status
make[2]: *** [../../../.ext/x86_64-darwin10.7.0/digest/rmd160.bundle] Error 1
make[1]: *** [ext/digest/rmd160/all] Error 2
make: *** [build-ext] Error 2 
```

我认为这与“文件不是必需的架构信息”有关。我的电脑是 10.6 的，是 64 位的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T05:03:46.330

您在编译不同的库时遇到问题，我在为 OSX 构建 RailsInstaller 时已经解决了这些问题 => [http://railsinstaller.org/](http://railsinstaller.org/)

# javascript - 更改自动滚动的 URL（推送状态？）

> ID：11060186
> 
> 赞同：0
> 
> 时间：2012-06-16T01:59:01.427
> 
> 标签：javascript, jquery, pushstate

我目前正在使用我发现的自动滚动到锚点的代码：

```
$(function() {
    $('nav a[href*=#]').bind('click',function(event){
        var $anchor = $(this);

        $('html, body').stop().animate({
            scrollTop: $($anchor.attr('href')).offset().top - 100
        }, 1000);
        event.preventDefault();

    });
}); 
```

我可以添加什么以确保在单击时将#anchor 添加到 URL 中？

我已经看到这个使用了，但我不知道如何添加它..

```
function() {
        if(history.pushState) {
            history.pushState(null, null, target);
        }
        else {
            location.hash = target;
        }
      }); 
```

非常感谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T02:19:23.000

[动画完成后](http://api.jquery.com/animate/)运行它：（[这里很好的演示](http://jsfiddle.net/DerekL/uPS9W/show)）

```
$(function () {
    $('nav a[href*=#]').on('click', function (event) {
        var $anchor = $(this),
            name = $anchor.attr("href").match(/#(.+)/i)[1];

        $('html, body').stop().animate({
            scrollTop: $($anchor.attr('href')).offset().top - 100
        }, 1000, function () {
            if (history.pushState) {
                history.pushState(null, null, "#" + name);
            } else {
                location.hash = name;
            }
        });
        event.preventDefault();
    });
}); 
```

**工作演示：http:** [//jsfiddle.net/DerekL/uPS9W/show](http://jsfiddle.net/DerekL/uPS9W/show)

# json - 从异步 NSURLConnection/Class 返回 NSDictionary

> ID：11060187
> 
> 赞同：0
> 
> 时间：2012-06-16T01:59:21.183
> 
> 标签：json, asynchronous, nsdictionary

我想要做的是创建一个类，它在调用时返回 Json Data 的 NSDictionary。我过去对图像做过同样的事情，但是我对如何用 NSDictionary 实现它有点困惑。

我想要做的是加载一个视图，然后在后台发送请求以获取一些 Json 数据（异步）并返回包含要使用的数据的字典。我将在很多不同的视图中加载大量 Json 数据，所以它应该是一个可重用的类。

```
- (id)initWithURL:(NSURL *)url
{
    self = [self init];

    if (self)
    {
        receivedData = [[NSMutableData alloc] init];
        [self loadWithURL:url];
    }

    return self;
}

- (void)loadWithURL:(NSURL *)url    
{
    NSURLConnection *connection = [NSURLConnection connectionWithRequest:[NSURLRequest requestWithURL:url]delegate:self];
    [connection start];
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    [receivedData setLength:0];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    [receivedData appendData:data];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{

    NSError *error = nil;

    jsonReturn = [NSJSONSerialization JSONObjectWithData:receivedData options:kNilOptions error:&error];

} 
```

我想只是将结果添加到视图可以访问的协议中，但是必须有一种更简单/更清洁的方式对吗？有没有办法让它像这样返回 NSdictionary：

NSDictionary *dictionary = [LoadURLJSon initWithURL:myurl];

它取回了 NSDictionary？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T02:09:30.643

您想要的是在异步 API（特别是 ）之上的同步操作`[NSURLConnection start]`。如果没有一些繁重的线程杂耍，你就无法做到这一点，无论如何这都是个坏主意 - 异步确实是要走的路。不要抛弃异步性。

执行一次性异步检索方法的最佳方法是构建一个以 URL、一个`NSObject`和一个选择器作为参数的方法，一旦请求完成，就在所述对象上调用所述选择器，并提供 NSDictionary 作为参数. 这就是 Objective C 的回调方式。

该方法将在内部实例化您的类，传递回调信息，并启动请求。完成请求并将 JSON 解析为 NSDictionary 后，您将调用`[performSelector:]`callback `NSObject`。

如果您毕竟想要同步操作，请使用`[NSURLConnection sendSynchronousRequest]`而不是`[NSURLConnection start]`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T06:14:11.987

这就是我的结局！应该对以后路过这里的人有用。

```
 #import <Foundation/Foundation.h>

@protocol LoadJsonDelegate <NSObject, NSURLConnectionDelegate>
@optional
- (void) downloadFinished;
- (void) downloadReceivedData;
- (void) dataDownloadFailed: (NSString *) reason;
@end

@interface LoadURLJson : NSObject
{
    NSMutableData *receivedData;
    int expectedLength;
}

@property (nonatomic, strong) NSMutableData *receivedData;
@property (strong) NSString *urlString;
@property (weak) id <LoadJsonDelegate> delegate;

-(void)start;
-(void)cancel;

+ (id)download:(NSString *)aURLString withDelegate:(id <LoadJsonDelegate>)aDelegate;

@end 
```

他们

```
#import "LoadURLJson.h"
#define SAFE_PERFORM_WITH_ARG(THE_OBJECT, THE_SELECTOR, THE_ARG) (([THE_OBJECT respondsToSelector:THE_SELECTOR]) ? [THE_OBJECT performSelector:THE_SELECTOR withObject:THE_ARG] : nil)

@implementation LoadURLJson

@synthesize receivedData, delegate, urlString;

+ (id) download:(NSString *)aURLString withDelegate:(id <LoadJsonDelegate>)aDelegate
{
    if (!aURLString)
    {
        NSLog(@"Error. No URL string");
        return nil;
    }

    LoadURLJson *loadJson = [[self alloc] init];
    loadJson.urlString = aURLString;
    loadJson.delegate = aDelegate;
    [loadJson start];

    return loadJson;
}

-(void)start   
{
    receivedData = [NSMutableData data];
    NSURL *url = [NSURL URLWithString:urlString];

    NSURLConnection *connection = [NSURLConnection connectionWithRequest:[NSURLRequest requestWithURL:url]delegate:self];
    [connection start];
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    [receivedData setLength:0];

    // Check for bad connection
    expectedLength = [response expectedContentLength];
    if (expectedLength == NSURLResponseUnknownLength)
    {
        NSString *reason = [NSString stringWithFormat:@"Invalid URL [%@]", urlString];
        SAFE_PERFORM_WITH_ARG(delegate, @selector(dataDownloadFailed:), reason);
        [connection cancel];
        [self cleanup];
        return;
    }
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    [receivedData appendData:data];
    SAFE_PERFORM_WITH_ARG(delegate, @selector(downloadReceivedData), nil);
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    SAFE_PERFORM_WITH_ARG(delegate, @selector(downloadFinished), nil);
}

-(void)cleanup
{
    self.urlString = nil;
}

-(void)dealloc
{
    [self cleanup];
}

-(void)cancel
{
    [self cleanup];
}

@end 
```

用法 - 在 yourView.h

```
#import "LoadURLJson.h"

@interface ViewController : UIViewController <LoadJsonDelegate>
{
    LoadURLJson *loadJson;
} 
```

优视.m

致电：

```
loadJson = [LoadURLJson download:@"url" withDelegate:self]; 
```

然后实施

```
-(void)downloadFinished
{
    NSData *data = [[NSData alloc] initWithData:loadJson.receivedData];

    NSError *error = nil;
    NSDictionary *dictionary = [NSJSONSerialization JSONObjectWithData: data options: NSJSONReadingMutableContainers error:&error];

    NSLog(@"%@",dictionary);
} 
```

基于此处的 DownloadHelper：[https ://github.com/erica/iOS-5-Cookbook](https://github.com/erica/iOS-5-Cookbook)

BSD 许可证。

# c# - 使用 Json.Net 反序列化 Instagram JSON

> ID：11060189
> 
> 赞同：2
> 
> 时间：2012-06-16T02:00:33.677
> 
> 标签：c#, json, serialization, json.net, instagram

我在反序列化从 Instagram 获取的一些 Json 时遇到问题。

这是网络客户端：

```
var json = client.DownloadString("https://api.instagram.com/v1/locations/search?foursquare_v2_id=4f9e03fce4b0176467266bc1&client_id=****"); 
```

哪个拉这个字符串：

> {"meta":{"code":200},"data":[{"latitude":35.736772,"id":"17812842","longitude":139.339496,"name":"新鲜百吉圈"}] }

我正在尝试将其反序列化为这样的动态对象：

```
dynamic jsonData = JsonConvert.DeserializeObject<dynamic>(json); 
```

这似乎有效，除了嵌套数组。我可以这样调用根动态属性：

```
jsonData.meta, or jsonData.data 
```

但我无法获得这样的 id：

```
jsonData.data.id 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T02:16:22.557

它工作，除了`data`是一个数组。你的意思是`jsonData.data[0].id`。

# c# - 从视图模型调用方法的命令

> ID：11060192
> 
> 赞同：6
> 
> 时间：2012-06-16T02:00:51.610
> 
> 标签：c#, wpf, xaml, mvvm, command

好的，我倾向于避免使用命令，因为它们总是设法让我感到困惑，但我正在进行一个新项目，并且正在尝试正确地构建它，而我的视图中没有任何代码。基本上我现在要做的就是连接一个按钮，该按钮触发一个命令，在我的视图模型上做一些事情，不知何故，如此简单的事情仍然给我带来麻烦。我想我已经很近了，但还不能到达那里。这是我现在所拥有的。

```
<Window.Resources>
    <RoutedUICommand x:Key="GetMusic" />
</Window.Resources>
<Window.DataContext>
    <core:ViewMain />
</Window.DataContext>
<Window.CommandBindings>
    <CommandBinding Command="{StaticResource GetMusic}" Executed="GetMusicExecuted"/>
</Window.CommandBindings> 
```

而视图模型现在几乎什么都不是

```
public class ViewMain
{
    public MusicCollection Music { get; set; }

    private void GetMusicExecuted(object sender, ExecutedRoutedEventArgs e)
    {
        //Logic
    }
} 
```

现在我要做的是连接我在命令绑定中设置的这个命令，以便在我的视图模型中调用我执行的方法，但是它试图在视图本身中找到该方法。有没有办法可以将它定向到我的视图模型中的方法，或者有更好的方法来设置它来完成同样的事情？希望一开始能保持简单，这样我就不会过早地大惊小怪。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-16T03:43:52.680

我倾向于使用自己的命令类，实现 ICommand。然后我将 Button Command 属性绑定到我的视图模型中的 command 属性。单击按钮时，它会执行绑定到 Command 属性的 Execute 方法。

这是丑陋的两分钟版本，但它展示了如何创建一个 Command 类，然后将其分配给您在视图模型上喜欢的任何方法的委托。

视图模型：

```
public class MyViewModel
{
    public MyCommand ActionCommand
    {
        get;
        set;
    }

    public MyViewModel()
    {
        ActionCommand = new MyCommand();
        ActionCommand.CanExecuteFunc = obj => true;
        ActionCommand.ExecuteFunc = MyActionFunc;
    }

    public void MyActionFunc(object parameter)
    {
        // Do stuff here 
    }

}

public class MyCommand : ICommand 
{
    public Predicate<object> CanExecuteFunc
    {
        get;
        set;
    }

    public Action<object> ExecuteFunc
    {
        get;
        set;
    }

    public bool CanExecute(object parameter)
    {
        return CanExecuteFunc(parameter);
    }

    public event EventHandler CanExecuteChanged;

    public void Execute(object parameter)
    {
        ExecuteFunc(parameter);
    }
} 
```

视图将因此绑定到它（假设 DataContext 设置为视图模型的实例）：

```
<Window x:Class="exp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Button Command="{Binding Path=ActionCommand}">Action</Button>
    </Grid>
</Window> 
```

# php - 根据其属性值之一重新排序 php 对象

> ID：11060200
> 
> 赞同：0
> 
> 时间：2012-06-16T02:02:37.457
> 
> 标签：php, sorting, object

假设我有一个对象，`$obj`在这个`foreach()`循环之后：

```
foreach($obj as $row){
    echo 'file_id:'.$row->file_id.'-name:'.$row->name.'<br>';
} 
```

看起来像这样：

```
file_id:321-name:321-is-good
file_id:322-name:322-is-better
file_id:323-name:323-is-best 
```

如何排序`$obj`以便我可以选择第一个`echo`'d是`$row`什么？例如，如果我在`322`某处插入，结果将如下所示：

```
file_id:322-name:322-is-better
file_id:323-name:323-is-best
file_id:321-name:321-is-good 
```

如果我插入`323`：

```
file_id:323-name:323-is-best
file_id:321-name:321-is-good
file_id:322-name:322-is-better 
```

我知道这可能涉及到`usort()`，但我不知道需要做什么。

想法？

谢谢，蒂姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T02:20:27.727

假设您想`file_id`在特定的开始排序，附加之前的内容，这也是排序的`file_id`：

```
$sort = '323';
usort($arr,function($a,$b) use ($sort) {
   //normal sorting for low-ids after high-ids
   if($a->file_id < $sort && $a->file_id < $sort){
      return strcmp($a->file_id,$b->file_id);
   } 
   //if only $a is smaller $a should be later
   if($a->file_id < $sort) return 1;
   //if only $b is smaller $a should be earlier
   if($b->file_id < $sort) return -1;
   //both above $sort, sort normally
   return strcmp($a->file_id,$b->file_id);
 }); 
```

* * *

使用对象而不是数组的工作示例：

```
<?php
//build a test with arrays is easier;
$arr = new ArrayObject(array(
    array('file_id' => '321','name' => '321 is good'),
    array('file_id' => '322','name' => '322 is better'),
    array('file_id' => '323','name' => '323 is best')));
//cast all to object for purposes of testing objects
foreach($arr as &$val) $val = (object)$val;
//when you used a reference _always_ unset... trust me on this one
unset($val);

$sort = '323';
// we define the callback separately because for this test we use it more then once
// don't pay much attention to the reference as &$sort, this is just to alter it in 
// multiple tests, and should not be needed in the actual implementation.

$callback = function($a,$b) use (&$sort) {
   //normal sorting for low-ids after high-ids
   if($a->file_id < $sort && $b->file_id < $sort){ //$a & $b indeed, not $a twice ;)
      return strcmp($a->file_id,$b->file_id);
   }
   //if only $a is smaller $a should be later
   if($a->file_id < $sort) return 1;
   //if only $b is smaller $a should be earlier
   if($b->file_id < $sort) return -1;
   //both above $sort, sort normally
   return strcmp($a->file_id,$b->file_id);
};

//322 first:
$sort='322';
$arr->uasort($callback);
var_dump($arr);

//323 first:
$sort='323';
$arr->uasort($callback);
var_dump($arr);

//321 again first:
$sort='321';
$arr->uasort($callback);
var_dump($arr);

//non-existing:
$sort='400';
$arr->uasort($callback);
var_dump($arr);

object(ArrayObject)#1 (1) {
  ["storage":"ArrayObject":private]=>
  array(3) {
    [1]=>
    object(stdClass)#5 (2) {
      ["file_id"]=>
      string(3) "322"
      ["name"]=>
      string(13) "322 is better"
    }
    [2]=>
    object(stdClass)#6 (2) {
      ["file_id"]=>
      string(3) "323"
      ["name"]=>
      string(11) "323 is best"
    }
    [0]=>
    object(stdClass)#4 (2) {
      ["file_id"]=>
      string(3) "321"
      ["name"]=>
      string(11) "321 is good"
    }
  }
}
object(ArrayObject)#1 (1) {
  ["storage":"ArrayObject":private]=>
  array(3) {
    [2]=>
    object(stdClass)#6 (2) {
      ["file_id"]=>
      string(3) "323"
      ["name"]=>
      string(11) "323 is best"
    }
    [0]=>
    object(stdClass)#4 (2) {
      ["file_id"]=>
      string(3) "321"
      ["name"]=>
      string(11) "321 is good"
    }
    [1]=>
    object(stdClass)#5 (2) {
      ["file_id"]=>
      string(3) "322"
      ["name"]=>
      string(13) "322 is better"
    }
  }
}
object(ArrayObject)#1 (1) {
  ["storage":"ArrayObject":private]=>
  array(3) {
    [0]=>
    object(stdClass)#4 (2) {
      ["file_id"]=>
      string(3) "321"
      ["name"]=>
      string(11) "321 is good"
    }
    [1]=>
    object(stdClass)#5 (2) {
      ["file_id"]=>
      string(3) "322"
      ["name"]=>
      string(13) "322 is better"
    }
    [2]=>
    object(stdClass)#6 (2) {
      ["file_id"]=>
      string(3) "323"
      ["name"]=>
      string(11) "323 is best"
    }
  }
}
object(ArrayObject)#1 (1) {
  ["storage":"ArrayObject":private]=>
  array(3) {
    [0]=>
    object(stdClass)#4 (2) {
      ["file_id"]=>
      string(3) "321"
      ["name"]=>
      string(11) "321 is good"
    }
    [1]=>
    object(stdClass)#5 (2) {
      ["file_id"]=>
      string(3) "322"
      ["name"]=>
      string(13) "322 is better"
    }
    [2]=>
    object(stdClass)#6 (2) {
      ["file_id"]=>
      string(3) "323"
      ["name"]=>
      string(11) "323 is best"
    }
  }
} 
```

* * *

# jquery - JQUERY 从和获取数据标记每一行并在单行输出

> ID：11060203
> 
> 赞同：0
> 
> 时间：2012-06-16T02:03:08.387
> 
> 标签：jquery

抱歉，说到 JQUERY，我真的很绿。我有以下 html 代码，它基本上使用和复选框制作了一个带有文本的表格。

```
<html>
<head>
<script type="text/javascript" src="table2CSV.js" > </script>
<script>
function getCSVData()
{
     var csv_value=$('#tblGrid').table2CSV({delivery:'value'});
     $("#csv_text").val(csv_value);
}
</script>
</head>
<body>
<table>
   <tr>
     <td class="cellText">HB DIOCD - AR3 HT</td>
       <td width="60" align="center">
          <input class="chText" type="checkbox" checked="checked" value="X" name="options" />
     </td>
        <td width="60" align="center">
           <input class="chText" type="checkbox" checked="checked" value="X" name="options" />
      </td>
      <td width="60" align="center">
         <input class="chText" type="checkbox"  name="options"/>
      </td>
   </tr>
</table> 
<form action="getCSV.php" method ="post" >
<input type="hidden" name="csv_text" id="csv_text">
<input type="submit" value="Save Configuration" onclick="getCSVData()"></form>
</body>
</html> 
```

接下来是 jquery 代码（在网络上找到此代码，KunalBabre.com - table2CSV）。当只有文本时它做得很好：

```
jQuery.fn.table2CSV = function(options) {
    var options = jQuery.extend({
        separator: ',',
        header: [],
        delivery: 'popup' // popup, value
    },
    options);

    var csvData = [];
    var headerArr = [];
    var el = this;

    //header
    var numCols = options.header.length;
    var tmpRow = []; // construct header avalible array

    if (numCols > 0) {
        for (var i = 0; i < numCols; i++) {

           tmpRow[tmpRow.length] = formatData(options.header[i]);
        }
    } else {
        $(el).filter(':visible').find('th').each(function() {
            if ($(this).css('display') != 'none') tmpRow[tmpRow.length] = formatData($(this).html());
        });
    }

   row2CSV(tmpRow);
    // actual data   
    $(el).find('tr').each(function() 
     {
        var tmpRow = [];
        var valArray=[];
        $(this).filter(':visible').find('td').each(function()
        {   
             if ($(this).css('display') != 'none') tmpRow[tmpRow.length] = formatData($(this).html());
   });        
       //alert(tmpRow);
       row2CSV(tmpRow);
   });
   if (options.delivery == 'popup') {
       var mydata = csvData.join('\n');
       return popup(mydata);
   } else {
       var mydata = csvData.join('\n');
       return mydata;
   }

    function row2CSV(tmpRow) {
        var tmp = tmpRow.join('') // to remove any blank rows
        // alert(tmp);
       if (tmpRow.length > 0 && tmp != '') {
           var mystr = tmpRow.join(options.separator);
           csvData[csvData.length] = mystr;
      }
  }
   function formatData(input) {
      // replace " with “
      var regexp = new RegExp(/["]/g);
      var output = input.replace(regexp, "“");
      //HTML
      var regexp = new RegExp(/\<[^\<]+\>/g);
          var output = output.replace(regexp, "");
       if (output == "") return '';
       return '"' + output + '"';
  }
  function popup(data) {
      var generator = window.open('', 'csv', 'height=400,width=600');
       generator.document.write('<html><head><title>CSV</title>');
       generator.document.write('</head><body >');
       generator.document.write('<textArea cols=70 rows=15 wrap="off" >');
       generator.document.write(data);
       generator.document.write('</textArea>');
       generator.document.write('</body></html>');
       generator.document.close();
       return true;
    }
}; 
```

执行时的代码返回标签内的数据，但不返回标签内的值。

这是输出示例：“HB DIOCD - AR3 HT”,,,

我想要的是：“HB DIOCD - AR3 HT”，X，X，

在脚本的实际数据部分中，我成功地从输入复选框中获取了各个值，但是我不知道如何获取与值连接的文本。

谢谢你的帮助，

CPAZ

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T02:29:15.410

好吧，您的复选框具有保存值，因此对您没有太大用处。但无论如何，你可以这样做：

```
var outputArr = [];

$('td').each(function() {
   output.push($(this).find('input').val() || $(this).text());
});

var output = outputArr.toString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T05:28:02.440

通过根据单元格文本提供复选框名称并将表格包装在其自己的`<form id="myDummyForm">...</form>`标签中，您可以利用 jQuery轻松地将对`$(formSelector).serialize()`格式化`name=value`为字符串。

然后，您可以进行一些简单的（？）字符串处理以获取所需格式的数据。

HTML：

```
<form id="myDummyForm">
<table>
   <tr>
     <td class="cellText">HB DIOCD - AR3 HT</td>
     <td width="60" align="center">
          <input class="chText" type="checkbox" checked="checked" value="X" name="HB DIOCD_AR3_HT_1" />
     </td>
     <td width="60" align="center">
           <input class="chText" type="checkbox" checked="checked" value="X" name="HB DIOCD_AR3_HT_2" />
     </td>
     <td width="60" align="center">
         <input class="chText" type="checkbox" name="HB DIOCD_AR3_HT_3"/>
     </td>
   </tr>
</table>
</form> 
```

Javascript：

```
jQuery.fn.table2CSV = function(options) {
    ...
    var arr = $("#myDummyForm").serialize().split('&');
    ...
}; 
```

因此，您的 javascript 将被简化，但代价是涉及更多的 HTML。

稍加想象，您可以动态设置输入的名称（再次使用 jQuery），以避免必须手动进行（或者如果页面是在服务器端构建的，则以程序方式进行）。

# android - 清单不允许正确的名称格式，说活动在更改时不存在

> ID：11060205
> 
> 赞同：0
> 
> 时间：2012-06-16T02:03:33.753
> 
> 标签：android, manifest

问题出在`ServerStatus.ServerStatusActivity`. 由于活动名称不正确，应用程序将无法安装，但如果我更改它，它会说包不存在。我有 C++ 背景，上周我自学了 Android/Java。我知道我的格式很粗糙，我很抱歉。

难道是错误地添加了一个新的活动？

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="d3.link"
    android:versionCode="1"
    android:versionName="1.0" >

        <uses-permission android:name="android.permission.INTERNET"/>

        <uses-sdk android:maxSdkVersion="15"
              android:targetSdkVersion="10"
              android:minSdkVersion="8" />

    <application
        android:icon="@drawable/d3l"
        android:label="@string/app_name" >
        <activity
            android:name=".D3LinkActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:permission="android.permission.INTERNET" android:name="ServerStatusActivity"></activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T02:27:45.230

活动的名称必须与您声明 D3LinkActivity 的方式相同。您在清单的根目录中提供了包名称。当您声明一个活动时，您可以提供全名（完整的包名 + '.' + 类名）或提供类的相对路径（'.' + 包名的一部分 + 类名）。

例如：

你在 d3.link.ui.SampleActivity 有一堂课。在清单中提供“d3.link”后，您可以使用“d3.link.ui.SampleActivity”或“.ui.SampleActivity”声明您的活动。

你提供这个的方式，就像你在根包中有一个名为“ServerStatus”的包和一个名为“ServerStatusActivity”的类或一个“ServerStatus”，其中有一个名为“ServerStatusActivity”的嵌套类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T02:46:28.270

您必须在清单标签中提供[http://developer.android.com/guide/topics/manifest/manifest-element.html#package](http://developer.android.com/guide/topics/manifest/manifest-element.html#package) 在 Android 中，系统在应用程序中搜索一个组件，通过 Package_Name + 组件名称，像 com.google + .activity1，所以活动路径是 com.google.activity1。希望这对您有所帮助。

# c++ - 模板实例化中模板模板参数的可能形式

> ID：11060208
> 
> 赞同：2
> 
> 时间：2012-06-16T02:04:11.060
> 
> 标签：c++, template-templates

模板参数的一种可能形式是类模板。C++ 标准 (C++2003) 声明模板实例化期间模板模板参数的参数是“id 表达式”。这个非终端相当宽。它允许析构函数、重载运算符等。例如，以下代码应该可以正常编译：

```
template <template <typename x> class T>
struct MyClass
{
    T<int> a;
    T<double> b;
};

template <typename x> struct Helper
{
    ~Helper() { }
    x operator+(x p) { return(x[1]+p); }
    x[4] c;
};

 MyClass<Helper> p1;
 MyClass<~Helper> p2;
 MyClass<Helper::operaror+> p3; 
```

最后两行没有任何意义。但从语法的角度来看，它们很好。语法不是（也不应该）准确地描述语言，但是第 14.3.3 段，“模板模板参数”没有提到在这种情况下对语法规则的任何限制。

任何人都可以接受或反驳我的陈述：

1.  模板模板参数只能是一个标识符，可能是合格的。
2.  如果第一点属实，这在标准中绝对值得一提。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T02:11:40.443

14.3 [温度参数] p1

> *" template-argument*有 3 种形式，对应于*template-parameter*的三种形式：type、non-type 和*template。template-id*中指定的每个*template-argument*的类型和形式都应与指定的类型和形式相匹配对于模板在其模板参数列表中声明的相应参数。

 *该参数`~Helper`没有模板模板参数的正确类型`template<typename> class T`，它不是类模板。

14.3.3 [temp.arg.template] p1

> *模板模板参数*的模板*参数*应是类模板的名称，表示为*id-expression*。

`~Helper`不是类模板的名称。

这很明显排除了你的例子。*

# php - 从数据库中检索到php时显示引号字符

> ID：11060212
> 
> 赞同：1
> 
> 时间：2012-06-16T02:04:32.507
> 
> 标签：php, html, sql

我在数据库中存储大量文本。问题是，当我尝试存储引号（''“”而不是“'）时，它们可以很好地存储在数据库中，尽管在我显示数据库中的文本时不显示。！

我尝试将 sql 中的排序规则更改为 utf8_unicode_ci，但仍然没有改变

(' ' “ ” not " ') 被一个方形黑框内的问号代替

# 列类型排序规则属性 Null 默认额外操作

```
 2  qr_topics   text    utf8_unicode_ci     No  None 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T03:31:49.977

您需要[`htmlentities()`](http://php.net/htmlentities)在显示之前运行您的数据库返回！

```
$results = $pdo->fetchAll();

foreach($results as $result) {
    echo htmlentities($result['fieldQuotesAndOtherGoodies']);
} 
```

这不仅是一种很好的做法（尤其是在使用不同的字符集或括号时，`<`and `>`，您必须对其进行编码，因为否则它们将被解释为 HTML 标记），这对于安全性也是非常重要的。如果不对从数据库中检索到的用户数据进行编码，您的站点可能容易受到 XSS（以及因此的 CSRF）攻击。

仅供参考：解决方案是简单地添加一个元标记，以确保交付的 HTML 被浏览器解释为 UTF-8：

```
<meta charset="UTF-8" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-17T00:14:28.923

mysql_query('SET CHARACTER SET utf8, NAMES utf8');

它对我有用！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T05:02:57.693

确保通过 htmlentities() 插入代码。并在检索它时使用 html_entity_decode()。我同意@PhpMycoder。使用字符集“utf-8”或您喜欢的任何字符集，但将其传递给函数。

在发送到服务器时使用

```
htmlentities ($_POST['textarea'], ENT_QUOTES, 'utf-8');

and while retriving

html_entity_decode($_POST['textarea'], ENT_QUOTES, 'utf-8'); 
```

# node.js - Mongoose：ObjectId 比较失败不一致

> ID：11060213
> 
> 赞同：32
> 
> 时间：2012-06-16T02:04:35.260
> 
> 标签：node.js, mongodb, mongoose

我有一个简单的工具，用于构建文档集合，然后自动将它们格式化为 EPUB 或 LaTeX 渲染，编写在 ExpressJS 之上。我正在使用 Coffeescript，如果这很重要（我对此表示怀疑）。

使用猫鼬，我有以下内容：

```
DocumentSchema = new Schema
    title:     String

Offrefs = new Schema
    ref:       { type: ObjectId }
    isa:       String

BinderSchema = new Schema
    title:     String
    contains:  [Offrefs] 
```

Offrefs 没有指定它所指的内容，因为我希望能够在其他活页夹中包含一些活页夹，以创建逻辑集合：“这些用于打印机，”“这些用于 epub”，“这些仅用于网络， "等（我已经把所有杂项都去掉了。）

不幸的是，我遇到了查询，对于检索到的对象

```
(story._id == offref.ref) -> True 
```

而且两者确实看起来一样。但：

```
(binder._id == offref.ref) -> False
(String(binder._id) == String(offref.ref)) -> True 
```

并且对最后两个中的两个引用进行视觉比较，它们*是*相同的 ID 号，但`ObjectId`对象没有正确比较。

我不想不断地进行字符串转换，当我将这些复杂的对象转换为数据树时，这是一个很大的可能性。树关系在任何数据库中都是熊；它们在 MongoDB 中应该不难。

你如何在 MongoDB 中进行 ObjectId 比较？

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-06-16T03:32:19.023

直接`==`（或`===`）比较将通过引用而不是值来比较两个对象。因此，只有当它们都引用相同的实例时，才会评估为 true。

相反，您应该使用 的[`equals`](http://mongodb.github.io/node-mongodb-native/api-bson-generated/objectid.html#equals)方法`ObjectID`来比较它们的值：

```
story._id.equals(offref.ref) 
```

正如@bendytree 在评论中指出的那样，如果任何一个值都可以为空（并且您希望空值比较相等），那么您可以改用以下内容：

```
String(story._id) === String(offref.ref) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-11T01:58:37.457

这在一定程度上超出了最初提出的问题，但我发现 ObjectID 的 .equals 方法在某些情况下会返回 false，即使值不为空，字符串比较也会返回 true。例子：

```
var compare1 = invitationOwningUser.toString() === linkedOwningUser.toString();
var compare2 = invitationOwningUser.equals(linkedOwningUser);
var compare3 = String(invitationOwningUser) === String(linkedOwningUser);
logger.debug("compare1: " + compare1 + "; " + "compare2: " + compare2 + "; " + "compare3: " + compare3); 
```

输出：

```
compare1: true; compare2: false; compare3: true 
```

当invitationOwningUser（一个ObjectID）来自一个使用Mongoose模式创建的Collection，而linkedOwningUser（也是一个ObjectID）来自一个不是使用Mongoose创建的Collection（只是常规的MongoDB方法）时，就会发生这种情况。

这是包含invitationOwningUser（owningUser 字段）的文档：

```
{
    "_id" : ObjectId("5782faec1f3b568d58d09518"),
    "owningUser" : ObjectId("5781a5685a06e69b158763ea"),
    "capabilities" : [
        "Read",
        "Update"
    ],
    "redeemed" : true,
    "expiry" : ISODate("2016-07-12T01:45:18.017Z"),
    "__v" : 0
} 
```

这是包含linkedOwningUser（owningUser 字段）的文档：

```
{
    "_id" : ObjectId("05fb8257c95d538d58be7a89"),
    "linked" : [
        {
            "owningUser" : ObjectId("5781a5685a06e69b158763ea"),
            "capabilities" : [
                "Read",
                "Update"
            ]
        }
    ]
} 
```

所以，作为我的底线，我将使用字符串比较技术来比较 ObjectID，而不是 .equals 方法。

# javascript - 街景和主干变量范围

> ID：11060218
> 
> 赞同：0
> 
> 时间：2012-06-16T02:06:59.437
> 
> 标签：javascript, google-maps, google-maps-api-3, backbone.js

我在以下呈现谷歌街景的主干视图中遇到问题。

问题是在 processSVData 函数中，`this`不是`App.DetailStreetView`. 当我`console.log(this)`进去时`processSVData()`，我得到了`DOMWindow`对象。因此，当尝试访问时，`this.panorama`我得到`undefined`

```
App.DetailStreetView = Backbone.View.extend({
    initialize: function() {
        this.latLng = new google.maps.LatLng(37.869085,-122.254775);
        this.panorama = new google.maps.StreetViewPanorama(this.el);
    },
    render: function() {
        var sv = new google.maps.StreetViewService();
        sv.getPanoramaByLocation(this.latLng, 50, this.processSVData);        
    },
    processSVData: function(data, status) {
        if (status == google.maps.StreetViewStatus.OK) {
            // calculate correct heading for POV
            //var heading = google.maps.geometry.spherical.computeHeading(data.location.latLng, this.latLng);
            this.panorama.setPano(data.location.pano);
            this.panorama.setPov({
                heading: 270,
                pitch:0,
                zoom:1, 
            });
            this.panorama.setVisible(true);
        }
    },
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T02:47:35.347

你有几个选择。您可以使用[`_.bindAll`](http://documentcloud.github.com/underscore/#bindAll)绑定`processSVData`到适当的`this`：

```
initialize: function() {
    _.bindAll(this, 'processSVData');
    //...
} 
```

这将`this`始终使内部的视图`processSVData`。

您也可以[`_.bind`](http://documentcloud.github.com/underscore/#bind)仅用于回调：

```
sv.getPanoramaByLocation(this.latLng, 50, _.bind(this.processSVData, this)); 
```

这将确保这是作为回调调用`this`时的视图。您也可以使用or做类似的事情（如果您不必担心浏览器版本问题）。`this.processSVData``sv.getPanoramzByLocation`[`$.proxy`](http://api.jquery.com/jQuery.proxy/)[`Function.bind`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind)

或者您可以使用通常的 jQuery 样式手动完成：

```
var _this = this;
sv.getPanoramaByLocation(this.latLng, 50, function(data, status) {
    _this.processSVData(data, status);
}); 
```

第一种`_.bindAll`可能是 Backbone 中最常见的方法。

# ruby-on-rails - 表单字段不是 rails db 模型的一部分

> ID：11060220
> 
> 赞同：16
> 
> 时间：2012-06-16T02:07:26.630
> 
> 标签：ruby-on-rails

我在相应模型中尝试访问的表单上有一个字段，但它不是模型数据库表的一部分。处理这个问题的最佳方法是什么？这是不好的做法吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-16T02:33:48.763

可以有不在数据库表中的模型属性。这些被称为**虚拟属性**。

假设您要处理一个名为“virtual_attribute”的属性。以下是您将如何处理它：

在您的表单中，您将拥有以下内容：

```
<%= f.check_box :virtual_attribute %> 
```

在您的模型中，您必须这样做：

```
attr_accessor :virtual_attribute 
```

请注意，这是一个内置的 Ruby 方法，它为您提供了该属性的 setter 和 getter：

```
#getter
def virtual_attribute
  @virtual_attribute
end

#setter
def virtual_attribute=(value)
  @virtual_attribute = value
end 
```

# css - 谷歌地图信息框 - maxWidth

> ID：11060221
> 
> 赞同：5
> 
> 时间：2012-06-16T02:07:43.547
> 
> 标签：css, google-maps

我正面临谷歌地图信息框的奇怪行为。我将 maxWidth 调整为 0 以允许信息框大小调整为内容，但我总是得到一个 236px 的信息框。

```
var infobox = new InfoBox({
    maxWidth:0
    ,pixelOffset: new google.maps.Size(5, 10)
    ,isHidden:false
    ,closeBoxURL:""
    ,pane: "floatPane"
    ,enableEventPropagation: false
    ,Zindex: null
}); 
```

如果我在 css 文件中调整信息框宽度，如下所示，我会在每个信息框中得到相同的大小。

```
.infobox {width: 500px;} 
```

我做错了什么？任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T08:53:12.087

也可以使用`boxStyle`对象`InfoBoxOptions`

```
boxStyle: {
      whiteSpace: "nowrap"
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T16:56:09.667

我遇到了类似的问题，所以我动态检索了最佳宽度和高度，然后相应地设置了我的 infoBox 尺寸。这是一个 jQuery 函数和应该解决此问题的函数的应用程序。我觉得 API 在这方面真的没有给人留下深刻的印象。

```
getInfoBoxDimensions: function( content ) {
    var sensor = $("<div>").html(content);
    $(sensor).appendTo("body").css({"position" : "absolute", "left" : "-900px"});
    var width = $(sensor).width();
    var height = $(sensor).height();
    $(sensor).remove();
    return new Array(width, height);
}, 
```

现在您可以使用以下内容获取 html 内容的高度和宽度：

```
var infoBoxDimensions = getInfoBoxDimensions(info_box_html); 
```

并使用以下设置您的信息框：

```
var ib = new InfoBox({
     content : info_box_html,
     boxStyle : {
          width : infoBoxDimensions[0] + "px",
          height : infoBoxDimensions[1] + "px"
     },
     ....
     ....
}); 
```

您的 info_box_html 应将其样式设置为“inline-block”。默认情况下，块元素将采用 100% 的宽度，我们只需要内容的确切宽度，而 inline-block 会为我们做到这一点。

希望能帮到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-16T07:19:19.943

Don't know how "correct" this solution but here it goes:

Just set the width and height of the google infobox wrapper to auto and add important to prevent google JS from resizing it:

```
.gm-style-iw {
    width: auto !important;
    height: auto !important;
    div {
        width: auto !important;
        height: auto !important;
    }
} 
```

# java - 我需要能够通过另一个类中的按钮更改java中框架的标题

> ID：11060223
> 
> 赞同：2
> 
> 时间：2012-06-16T02:08:09.540
> 
> 标签：java, swing, frames

我已经在网上找了大约2个小时了。我需要完成的是一种在另一个类中有一个按钮的方法，改变整个程序的框架窗口的标题。所以基本上我想做到这一点，以便客户可以将 setTitle 更改为他的公司名称。这是我目前所拥有的两个将涉及此问题的类的代码。

选项.java

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;

public class Options extends JPanel {
    JLabel nameLabel;
    JTextField nameField;
    JButton sNn;

    public Options()
    {
        nameLabel = new JLabel();
        nameLabel.setText("Change Company Name:");
        nameField = new JTextField(22);
        sNn = getTitleChangeButton();
        ExitButton exitButton = new ExitButton();

        this.add(nameLabel);
        this.add(nameField);
        this.add(sNn);
        this.add(exitButton.getExitButton());   
    }

    public JButton getTitleChangeButton()
    {
        JButton ChangeTitle; 
        ChangeTitle = new JButton("Change Company Title");
        ChangeTitle.setMnemonic('C');
        ChangeTitle.addActionListener(new ActionListener()
        {
            public void actionPerformed(ActionEvent e)
            {       
                String title;       
            }
        });
            return ChangeTitle;
            }
        } 
```

这是第二个类，称为 tabbedPane。这是我想成为超类并通过按钮更改 setTitle 的类。

TabbedPane.java

```
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTabbedPane;
//import poolCalculation.PoolVolumeCalc;
//import poolCalculation.GenTab;
//import poolCalculation.TempCalc;
import poolCalculation.Options;

public class TabbedPane extends JFrame
{
    public TabbedPane()
    {

        setTitle("Gardening INC.");

        JTabbedPane Tabs = new JTabbedPane();
        getContentPane().add(Tabs);

        JPanel jp1 = new JPanel();

        //Tabs.addTab("Pool Volume Calculator", new PoolVolumeCalc());
        //Tabs.addTab("General Tab", new GenTab());
        //Tabs.addTab("Temperature Calculation", new TempCalc());
        Tabs.addTab("Options", new Options());

        getContentPane().add(Tabs);
        setSize(400,300);
        setVisible(true);
    }

    public static void main(String[] args) {
        TabbedPane test = new TabbedPane();
        test.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }

} 
```

在我的一生中，当用户单击选项中的按钮时，我无法弄清楚如何更改框架的标题。到目前为止，这是我尝试过的，我尝试在 TabbedPane 的主要部分中制作 setTitle(title) 并使其成为一个字符串，然后使用 get 方法从选项中获取文本，但这不起作用。或者我做错了。我尝试将按钮设为自己的类，但遇到无法读取文本字段的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T02:26:22.293

这是一个演示如何动态更改标题的示例：

![在此处输入图像描述](../Images/9ebb0a5b3df0fc77b34122dbec7c69fa.png)

```
import java.awt.BorderLayout;
import java.awt.Container;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;

public class NormalFrame extends JFrame
{
    private static final long serialVersionUID = 1L;

    public NormalFrame()
    {
        super("The title");
        setDefaultCloseOperation(EXIT_ON_CLOSE);

        Container contentPane = getContentPane();
        contentPane.add(new CustomPanel(this));

        pack();
        setLocationRelativeTo(null);
    }

    public static void main(String[] args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            @Override
            public void run()
            {
                new NormalFrame().setVisible(true);
            }
        });
    }
}

class CustomPanel extends JPanel
{
    private static final long serialVersionUID = 1L;
    private JFrame mainFrame;
    private JLabel lbl;
    private JTextField txt;
    private JButton btn;

    private ActionListener listener = new ActionListener()
    {
        @Override
        public void actionPerformed(ActionEvent e)
        {
            mainFrame.setTitle(txt.getText());
        }
    };

    public CustomPanel(JFrame mainFrame)
    {
        this.mainFrame = mainFrame;

        lbl = new JLabel("The new title: ");
        txt = new JTextField(10);
        btn = new JButton("Change Title");
        btn.addActionListener(listener);

        setLayout(new BorderLayout());
        add(lbl, BorderLayout.LINE_START);
        add(txt, BorderLayout.CENTER);
        add(btn, BorderLayout.LINE_END);
    }
} 
```

# r - 按日期和时间选择时间序列对象的间隔

> ID：11060224
> 
> 赞同：3
> 
> 时间：2012-06-16T02:08:24.897
> 
> 标签：r, date, time-series, hour

我的问题是关于如何管理空气质量数据库中的日期和时间，该数据库从 2002 年到 2008 年每天每十分钟保存一次数据。

我想生成几个分析和绘图，但仅指从早上 6:00 到早上 8:00 的早高峰时段我试图在所需的时间间隔内生成图表，但 R 工具总是在因此，高峰时段的可用数据会失真。

我非常感谢您就如何仅在高峰时段选择和绘制间隔以及如何生成多个图表提供指导。

我有下一个脚本来生成日期间隔，但我想汇总小时间隔（早上 6 点到 8 点）并只绘制间隔数据：

```
# select interval
start.date = as.POSIXct("2007-03-27 05:00", tz = "GMT")
end.date = as.POSIXct("2007-05-27 05:00", tz = "GMT")
subdata = subset(mydata, date >= start.date & date <= end.date,
select = c(date, nox, co))
#
#plot the variables 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-16T12:07:46.243

我建议您使用时间序列类而不是 data.frame。使用 xts 每天按时间间隔进行子集很容易：

```
# use DWin's example data
Data <- data.frame(a=rnorm(240),
  dtm=as.POSIXct("2007-03-27 05:00", tz="GMT")+3600*(1:240))
# create xts object
library(xts)
x <- xts(Data[,"a"], Data[,"dtm"])
# subset by time of day
y <- x["T06:00/T08:00"]
# plot
plot(y)  # plots all 24 hours of each day
# use chartSeries from quantmod to avoid above behavior
library(quantmod)
chartSeries(y) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-16T07:44:14.083

如果您的日期时间在名为“dtm”的列中，则此代码应获取 6A 到 8A 区间内的记录

```
dfrm <- data.frame(a=rnorm(24),  
                   dtm =as.POSIXct("2007-03-27 05:00", tz='GMT') +3600*(1:24) )     
    sub6_8A <- subset(dfrm, strftime(dtm, "%H", tz="GMT") %in% c('06','07','08') )
sub6_8A
           a                 dtm
1  0.5020823 2007-03-27 06:00:00
2 -0.7455312 2007-03-27 07:00:00
3  1.8035086 2007-03-27 08:00:00 
```

您也可以使用带有“[[”的索引方法，但如果您有 NA，除非您特别排除它们，否则它们会被拖累。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T07:38:12.503

如果这是一个 data.frame，我将首先将每个条目的时间提取到一个新列中，然后用“峰值”标志标记每一行，然后使用它变得更加容易。一周中的一天同上。由于只有大约 350k 行，这将相当快，而且是一次性的，所以你可以做一些丑陋的事情，比如：

```
# create some fake data
t1 <- as.POSIXct(paste('2012-06-16 0', 1:9, ':00', sep=''), tz='GMT')
N <- length(t1)
mydata <- data.frame(timestamp=t1, co=runif(N, 1,30), nox=runif(N, 5,50))

# extract out the hour of day
mydata$hour <- gsub('^.* ', '', as.character(t1))
# is this a peak time?
mydata$peak <- regexpr('^0[678]', mydata$hour) >0 
```

现在，您可以轻松地仅选择那些来自高峰时段的记录 - 这将是一个小得多的图表子集 - 少于 50k 条记录。

```
mypeakdata <- subset(mydata, peak) 
```

因为我确信您将使用不同的假设进行许多此类分析，所以我建议您将各种列（例如一天中的小时、一周中的一天等）添加到您的 data.frame 中并将它们留在那里，然后保存这个大data.frame，如：

```
save(mydata, 'mydata_version_2012-06-16_8h58.RData') 
```

# github - Jenkins 和 Github 不使用 SSH 密钥

> ID：11060226
> 
> 赞同：5
> 
> 时间：2012-06-16T02:08:35.913
> 
> 标签：github, jenkins

我已经将 Jenkins 设置为从 Github 上的私有存储库中提取特定工作。尽管我已经生成了一个私钥/公钥并将其作为部署密钥添加到 github，但 Jenkins 似乎没有使用 SSH 密钥。

当我从 Jenkins 用户执行 git clone 时，系统会提示我输入用户名和密码。为什么不使用我的 ~/.ssh/id_rsa.pub 密钥？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T21:49:40.527

您使用的是哪个网址？听起来您使用的是 https 而不是 ssh 。

在您的项目 github 页面的顶部，有三个 url 的按钮，HTTP、SSH、Git 只读。你想要一个 SSH。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-01T09:57:15.573

刚刚遇到同样的问题，这是你可以做的：

1）以詹金斯用户身份登录

```
sudo su jenkins 
```

2) 为 jenkins 用户生成密钥：

```
ssh-keygen -t rsa 
```

3) 在 GitHub 上您的仓库的管理部分输入 id_rsa.pub 作为部署密钥

甚至更好：

*   为 jenkins 创建一个 Github 用户
*   在用户配置文件信息中添加 ssh 密钥
*   将 jenkins guthub 用户添加为项目的协作者

希望这会有所帮助，文森特

# python - 使用 Python 寻找颜色的色调？

> ID：11060227
> 
> 赞同：1
> 
> 时间：2012-06-16T02:08:52.017
> 
> 标签：python

如果您有一个输入十六进制颜色代码的表格

```
FFFFFF 
```

你将如何确定它们的色调？像青色，橙色等......？

所以如果有人输入

```
#FF8000 
```

色调将打印在橙色的页面上。

如果可能的话，您能否解释一下这是如何工作的？或者将我链接到解释它的东西？

在我的主要 python 脚本中输入这段代码以便能够转换为 HSV 是否合理？

```
 #RGB to HSV start
    ONE_THIRD = 1.0/3.0
    ONE_SIXTH = 1.0/6.0
    TWO_THIRD = 2.0/3.0
    def rgb_to_hsv(r, g, b):
        maxc = max(r, g, b)
        minc = min(r, g, b)
        v = maxc
        if minc == maxc:
            return 0.0, 0.0, v
            s = (maxc-minc) / maxc
            rc = (maxc-r) / (maxc-minc)
            gc = (maxc-g) / (maxc-minc)
            bc = (maxc-b) / (maxc-minc)
        if r == maxc:
            h = bc-gc
        elif g == maxc:
            h = 2.0+rc-bc
        else:
            h = 4.0+gc-rc
            h = (h/6.0) % 1.0
            return h, s, v

    #RGB to HSV end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T02:13:01.840

请参阅[colorsys](http://docs.python.org/library/colorsys.html)。

基本上，它是这样工作的：

```
>>> import colorsys
>>> colorsys.rgb_to_hsv(.3, .4, .2)
(0.25, 0.5, 0.4) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T02:46:36.580

使用`webcolors.txt`Tools\pynche 中的文件，您可以创建自己的文件，该文件`function`将返回传递的十六进制值的颜色名称：

```
with open ('Tools\pynche\webcolors.txt') as f:
      color_dict={x.split()[1].strip():x.split()[0].strip() for x in f.readlines()[1:]}

color_dict['fetch']=lambda x:color_dict.get(x.lower(),'color not found')

print( color_dict['fetch']('#ffFF00') )
print( color_dict['fetch']('#AAdd00') )
print(color_dict['fetch']('#FFFFFF')) 
```

输出：

```
Yellow
color not found
White 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T02:10:53.627

我不确定是否有一种简单的算法方法可以解决这个问题，从而得出准确和描述性的颜色名称。我认为需要进行某种查找。

除非您已经可以访问十六进制代码/描述的数据库，否则一种方法是使用字典，其中您的键将是您的十六进制代码，而值将是相应的描述是一种方法。您可以查找十六进制代码并显示相应的颜色描述。

您可以从任意数量的专门处理此类颜色信息类型的网页中找到字典的值，例如[十六进制颜色代码芯片表（10° 分离的色调）](http://www.december.com/html/spec/colorhslhex10.html)或此[十六进制颜色代码](http://www.december.com/html/spec/colorhex.html)

尽管考虑到大量的十六进制代码，但我不确定您自己从头开始构建它是否可行。

# spring - Spring数据neo4j和使用IN关键字查询

> ID：11060229
> 
> 赞同：0
> 
> 时间：2012-06-16T02:09:18.833
> 
> 标签：spring, neo4j, cypher, spring-data-neo4j

我有许多与关系相关的不同节点。在这些关系上，我使用了一些 Enum 类型的属性，并且我尝试使用 Cyper 语言查询这些关系，并且只返回那些具有 Enum 属性的数组。此外，我试图查询的关系是另一个具有我要查询的属性的关系的子类。这是一个例子：

```
@RelationshipEntity
public class Mother {

    @Indexed(level=Level.INSTANCE) Visibility visibility;
    public Visibility getVisibility() {
        return visibility;
    }
    public void setVisibility(Visibility visibility) {
        this.visibility = visibility;
    }
}

public class Child extends Mother {
    @StartNode StartNode start;
    @EndNode EndNode end;
} 
```

想象一下，可见性是一个可以是私有、网络或公共的枚举。然后在存储库中我尝试了以下查询，但它总是返回所有内容或引发错误：

```
@Query("start s=node({0}) match s-[r:TYPE]->e where r.visibility='Private' return r")
Iterable<Child> findChildren(StartNode start);
@Query("start s=node({0}) match s-[r:TYPE]->e where r.visibility=\"Private\" return r")
Iterable<Child> findChildren(StartNode start);
@Query("start s=node({0}) match s-[r:TYPE]->e where r.visibility=Private return r")
Iterable<Child> findChildren(StartNode start); 
```

我真正想使用的是“IN”运算符，但这会引发错误，就像它不知道 IN 是什么一样。

```
@Query("start s=node({0}) match s-[r:TYPE]->e where r.visibility in ['Private', 'Network'] return r")
Iterable<Child> findChildren(StartNode start); 
```

我的可见性没有被索引吗？还是我不应该这样做？我没有尝试通过字符串更改 Visibility 属性，我认为这应该可以工作，因为我有其他可以成功查询的字符串属性。使用“IN”运算符是一个奖励！

编辑 1：我正在使用 spring-data-neo4j 2.0.1.RELEASE。我正在尝试在单元测试中使用 执行此操作`org.neo4j.test.ImpermanentGraphDatabase`，但我刚刚意识到查询`@Query("start s=node({0}) match s-[r:TYPE]->e where r.visibility='Private' return r")`在运行服务器时使用默认配置时有效，但在单元测试中仍然无效。此外，即使在运行服务器时，“IN”子句仍然会引发错误。这与我使用的版本有关吗？我记得尝试使用更新的版本，但依赖项失败了，也许我应该再试一次。

编辑2：所以我将spring-data-neo4j的版本更新为2.1.0.BUILD-SNAPSHOT，也将neo4j版本升级为1.7。现在，“IN”关键字没有错误，但我不知道应该使用什么语法来传递要搜索的值。所以有

```
@Query("start s=node({0}) match s-[r:TYPE]->e where r.visibility in [{1}] return r")
Iterable<Child> findChildren(StartNode start, String visibility); 
```

`Public`如果我传递一个简单的字符串`Public, Private`（`Public`如 我也尝试更改`String visibility`a的参数`String[] visibility`，但这根本不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T10:54:59.630

Have you tried to execute the queries just standalone against the db? Either with the neo4j-shell, neoclipse or the server? Or programmatically in a unit-test? And also check the db, if your nodes and relationships are there and which properties they have.

Indexing is not related to your query.

Enums are stored as strings in properties.

Some notes:

*   how do you create the relationships?
*   private classes for entities can probably cause problems
*   make sure that the TYPE relationship-type is really what you use

This example in the [neo4j console](http://tinyurl.com/84kax7t) shows that it works. What version of Neo4j are you using?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T08:33:31.733

@纪尧姆，

完成：[https ://jira.springsource.org/browse/DATAGRAPH-281](https://jira.springsource.org/browse/DATAGRAPH-281)

它在构建快照中可用，并将在 SDN 2.1.RC4/GA 中

问候，

拉斯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T14:45:51.613

吉劳姆：

你找到了一个弱点；我提出了一个问题，这将很快得到解决。你可以在这里追踪它：

[https://jira.springsource.org/browse/DATAGRAPH-281](https://jira.springsource.org/browse/DATAGRAPH-281)

问候，

拉斯

# eclipse-plugin - eclipse 中的 XQJ 和 DataDirectXquery

> ID：11060232
> 
> 赞同：0
> 
> 时间：2012-06-16T02:09:47.083
> 
> 标签：eclipse-plugin, xquery

我对 XQJ 和 DataDirectXquery 很陌生，我想使用 eclipse 在 JavaAPI 上对 Xquery 进行一些练习。我不确定我需要在 eclipse 上安装哪些库或软件才能使其与执行 xquery 表达式一起工作，有人可以指导我吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T12:17:16.237

为了使用 XQuery，我为 eclipse [http://www.xqdt.org/html/index](http://www.xqdt.org/html/index) 和 SAXON [http://sourceforge.net/projects/saxon/](http://sourceforge.net/projects/saxon/)解释器安装了 XQDT（xquery 开发工具包）。这两个将使您的 Eclipse 安装能够执行 xquery 表达式。

您编写一个 .xq 文件并像从 eclipse 中的常规程序一样启动它

一旦您的查询准备就绪，您就可以将 SAXON 集成到您的 Java 应用程序中，并在那里执行查询。请参阅 SAXON 指南的这一部分：http: [//saxon.sourceforge.net/saxon7.9/using-xquery.html#Embedding](http://saxon.sourceforge.net/saxon7.9/using-xquery.html#Embedding)

# mysql - 遇到问题 if(!empty mysql 不工作

> ID：11060233
> 
> 赞同：2
> 
> 时间：2012-06-16T02:10:01.300
> 
> 标签：mysql, post, if-statement, is-empty

```
if(!empty($_POST['client_name']) && !empty($_POST['ref_no']) && !empty($_POST['assigned_engr']) &&     !empty($_POST['purpose']))
    {
        mysql_query("INSERT INTO `summary_item`(`date_out`, `client`, `reference_no`,     `item`, `comcode`, `serial_no1`, `purpose`, `assigned_engineer`, `status`) VALUES ('".date("F d,   Y")."','".$_POST['client_name']."','".$_POST['ref_no']."','".$row['classification']."','".$row['comcode']."','".$_SESSION['STF_DELIVERY_ITEMS']  [$i]."','".$_POST['purpose']."','".$_POST['assigned_engr']."','PENDING')");
    }
} 
```

我不是我们系统中的程序员，所以我不知道如何更改和删除 if(!empty 语句我希望删除此代码以便没有必填字段。请帮助。我知道我应该删除if(!empty 但是当我这样做时我得到一个错误因为我仍然有这样的代码

```
<td style="border-bottom:1px solid #000;"><strong><span id="client_address_span"><?php if(!empty($_POST['caddr'])) { echo $_POST['caddr']; } ?> 
```

当我也删除 if(!empty 并留下这样的代码时

```
<td style="border-bottom:1px solid #000;"><strong><span id="client_address_span"><?php echo $_POST['caddr']; ?> 
```

它不起作用。它不会添加到数据库中。请我真的需要帮助来完成这个库存系统。

# objective-c - 关于使用 AVAudioPlayer&AVAudioRecorder 自动录制和自动播放

> ID：11060235
> 
> 赞同：2
> 
> 时间：2012-06-16T02:10:03.580
> 
> 标签：objective-c, avfoundation, avaudioplayer, avaudiorecorder

在 .h 文件中我这样写：

```
#import <UIKit/UIKit.h>
#import "SCListener.h"
#import <AVFoundation/AVFoundation.h>

@interface TalkingAndSayingViewController : UIViewController<AVAudioPlayerDelegate>
{

IBOutlet UIImageView *bkg;
IBOutlet UILabel *showVoulme;

SCListener *listener;

NSTimer *time;

BOOL listen;
NSString *audioPath;
AVAudioRecorder *recoder;
AVAudioPlayer *player;

int breakCount;

BOOL timeActive;

}
@property(nonatomic,assign)int roleIndex;
@end 
```

在 .m 文件中我写了这个：

```
- (void)viewDidLoad
{

[super viewDidLoad];

NSArray *searchPaths =  NSSearchPathForDirectoriesInDomains (NSDocumentDirectory, NSUserDomainMask, YES);
audioPath = [[searchPaths objectAtIndex:0] stringByAppendingPathComponent:@"audio.wav"];
[audioPath retain];

listen = YES;

NSMutableDictionary *recordSettings = [NSDictionary dictionaryWithObjectsAndKeys:
                                       [NSNumber numberWithFloat: 44100.0],                 AVSampleRateKey,
                                       [NSNumber numberWithInt: kAudioFormatAppleLossless], AVFormatIDKey,
                                       [NSNumber numberWithInt: 1],                         AVNumberOfChannelsKey,
                                       [NSNumber numberWithInt: AVAudioQualityMax],         AVEncoderAudioQualityKey,
                                       nil];

NSString *imgName = [NSString stringWithFormat:@"role%d.png",self.roleIndex];
[bkg setImage:[UIImage imageNamed:imgName]];

recoder = [[AVAudioRecorder alloc] initWithURL:[NSURL fileURLWithPath:audioPath] settings:recordSettings error:nil];
[recoder setMeteringEnabled:YES];

player = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:audioPath] error:nil];
[player setNumberOfLoops:0];

AVAudioSession *audioSession = [[AVAudioSession sharedInstance] retain];
[audioSession setCategory:AVAudioSessionCategoryPlayAndRecord error: nil];
[audioSession setActive:YES error: nil];

time = [NSTimer scheduledTimerWithTimeInterval:0.1 target:self selector:@selector(CheckVolume) userInfo:nil repeats:YES];
[[NSRunLoop currentRunLoop] addTimer:time forMode:NSDefaultRunLoopMode];

}

-(void)audioPlayerDidFinishPlaying:(AVAudioPlayer *)player successfully:(BOOL)flag
{
     timeActive = YES;
        listen = YES;
        NSLog(@"fihish playing, start listen");
}

-(void)CheckVolume

    {    
        Float32 peak = [[SCListener sharedListener] peakPower];
        if(timeActive)
        {
            if(listen)
            {
                [showVoulme setText:[NSString stringWithFormat:@"%f",peak]];
                if(peak>0.3)
                {
                    listen = NO;
                    [recoder prepareToRecord];
                    [recoder record];
                    NSLog(@"start recording");
                }
            }

            else
            {
                if(peak<0.1)
                {
                    if(breakCount >= 5)
                    {
                        NSLog(@"start play");

                        [recoder stop];

                        player.delegate = self;
                        [player prepareToPlay];
                        [player play];
                        timeActive = NO;
                        breakCount = 0;
                    }
                    else 
                        breakCount++;
                }
                else
                    breakCount = 0;
            }
        }
    }

-(void)viewWillDisappear:(BOOL)animated
{
    [recoder stop];
    [[SCListener sharedListener] stop];

    timeActive = NO;
}

-(void)viewDidAppear:(BOOL)animated
{
    timeActive = YES;

    [[SCListener sharedListener] listen];

    breakCount = 0;
} 
```

这里有一些问题，首先：audioPlayerDidFinishPlaying这个函数根本没有做，而且这段代码只能运行“开始播放”，但声音实际上并没有播放，我以前用录音机检查音量的时候处于录制状态，但是 peakPowerForChannel:0 只返回一个静态值 0.00001，我不知道如何解决这个问题，谁能帮我或发个自动录制和自动播放的示例代码？对此，我真的非常感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-12-07T13:23:08.460

是的，已经 5 年过去了，我仍然与 iOS 开发人员合作，这个问题在提出这个问题后大约一个月内得到解决，我不记得看到这个答案。我当时做了一个像会说话的应用程序。并且已经完成了，然而，对我来说没用。

# c# - 创建包含集合的 EF 4 迁移

> ID：11060238
> 
> 赞同：1
> 
> 时间：2012-06-16T02:10:30.800
> 
> 标签：c#, entity-framework, entity-framework-4, entity-framework-migrations

我正在尝试使用 EF4 为我的博客创建迁移，但我不确定如何使用通用集合声明字段，例如`Posts`. 如何才能做到这一点？使用智能感知时，没有可用于声明属性的泛型类型。

```
 CreateTable("Blogs", t => new
     {
         Id = t.Int(false, true),
         Title = t.String(),
         BloggerName = t.String(),
         Posts = t.ICollection<Post>()  //no ICollection
     }).PrimaryKey(k => k.Id); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T02:45:23.333

我认为您首先将迁移与代码中的实体混合在一起，在这种情况下，您希望创建另一个名为“Posts”的表，该表与“Blogs”表具有外键关系。

```
 CreateTable("Posts", c => new
 {
     Id = c.Int(false, true),
     Content = c.String(nullable: false, maxLength: 512)
 }).PrimaryKey(k => k.Id)
 .ForeignKey("Blogs", t => t.Id); 
```

通常更容易将实体构建为类（代码优先），然后让迁移工具在控制台中自己生成迁移，例如

```
Add-Migration "BlogPosts" 
```

# mysql - 复杂的mysql查询（从结果中获取结果）

> ID：11060243
> 
> 赞同：0
> 
> 时间：2012-06-16T02:12:23.763
> 
> 标签：mysql

我继承了一个奇怪的编程数据库，并且在处理复杂查询时遇到了麻烦。至少对我来说。

在一张表中，我有四个字段：

```
 app_id - question - answer - user
    as4d1a - date_com -  ***   - 421 
    as4d1a - status   -   0    - 421 
    as4d1a - date_com -  ***   - 428 
    as4d1a - status   -   0    - 428 
    as4d1a - date_com -  ***   - 474 
    as4d1a - date_com -  ***   - 511 
```

从这张表中，我需要运行下面的查询，它将返回许多唯一用户：

```
 SELECT user 
    WHERE  question = 'date_completed' 
```

.. 对于这些用户中的每一个，我需要运行类似下面的查询

```
 SELECT * 
    WHERE  question = status 
    AND    answer = 0 
```

但是以这样一种方式，我可以在`mysql_num_rows`以后使用并可能对每个值做一些事情。但我主要需要一个`count`.

任何人都可以帮忙吗？我一直在寻找，但我什至不知道我是否需要一个`JOIN`，因为所有这些东西都在同一张桌子上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T02:19:58.473

```
SELECT
    a.*
FROM
    table a
INNER JOIN
    table b ON a.user = b.user AND b.question = 'date_completed'
WHERE
    a.question = 'status'
    AND a.answer = 0 
```

# javascript - 如何仅下载/读取文件的前 80KB？

> ID：11060244
> 
> 赞同：2
> 
> 时间：2012-06-16T02:12:31.627
> 
> 标签：javascript, jquery, ajax, download, greasemonkey

我正在为一个有许多 flash 文件的网站制作一个 Greasemonkey 脚本。我想对闪存进行哈希处理，问题是闪存文件高达 10 兆字节。

这很慢；我希望能够只抓取前 80KB 进行散列。最终结果将是一种将某些包含不需要内容的 Flash 文件列入黑名单的简单方法。我的脚本如何只抓取文件的前 80 KB（左右）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-16T04:49:00.660

Send [the `range` header](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.35.2) in your AJAX request.

For example:

```
$.ajax ( {
    url:        'http://TARGET_SERVER.COM/TARGET_PATH/TARGET_FILE.FLV',
    headers:    { Range: "bytes=0-80000" },
    success:    function (Resp) {
                    console.log(Resp);
                }
} ); 
```

(For files that are on the same-domain as the target page.)

* * *

For cross-domain files use [GM_xmlhttpRequest()](http://wiki.greasespot.net/GM_xmlhttpRequest):

```
GM_xmlhttpRequest ( {
    method:     "GET",
    url:        'http://TARGET_SERVER.COM/TARGET_PATH/TARGET_FILE.FLV',
    headers:    { Range: "bytes=0-80000" },
    onload:     function (Resp) {
                    console.log(Resp.responseText);
                }
} ); 
```

# jquery - 选项卡无法进入选定状态，直到单击两次（第一次）

> ID：11060246
> 
> 赞同：1
> 
> 时间：2012-06-16T02:14:05.527
> 
> 标签：jquery, ajax, jquery-ui, jquery-ui-tabs

自从我使用 jQuery UI 选项卡以来，这种情况已经发生了很长时间，如[http://eq4.net/hive/](http://eq4.net/hive/)上所见- 在第一次加载页面时（或为此添加选项卡后）。

单击一次后，会触发 load 和 show 事件，但不会将任何内容加载到面板中，并且当前选择的选项卡索引设置为 -1（无），并且选项卡都脱离了选定状态。

然后，如果您再次单击，一切都会按照您的预期运行，直到您添加一个选项卡。

有人可以指出我正确的方向，以便我可以开始调试这个怪癖吗？我的代码中没有任何内容会对选项卡选择产生任何影响，其中大部分是更新 UI 的其他方面，这似乎是正确发生的。

我正在使用 jQuery UI 1.8.20 和 jQuery 1.7.2 - 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T04:50:12.887

Confirm the behaviour you report and can only suggest a workaround by which, after a tab is added, the previously selected tab is automatically re-selected *twice*. The first select will be the buggy ineffective one and the second will actually reselect the tab (and its associated panel).

Something along the following lines maybe :

```
$(function(){

    ...

    var selectedTab = null;

    $(selector).tabs({
          ...
          select: function(event, ui) {
              //Keep `selectedTab` up to date to remember the selected tab
              selectedTab = ui.tab; //or ui.index?
          }
          add: function(event, ui) {
               //Here re-select selectedTab twice (if not null).
               //Probably easier to use selectedTab.trigger('click') than the tabs' .select() method, (which requires the selector to be known).
          }
    });
}); 
```

It's difficult to see how to handle the special case where no tab has yet been selected (ie. `selectedTab === null`).

This would be a nasty, inefficient fudge (and not recommended with ajax mode) but would save having to hack the plugin (which, if easily fixable, would have been fixed).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T03:57:10.777

试着把这个

```
 $( "#pages" ).tabs().find( ".ui-tabs-nav" ).sortable({ 
              axis: "x",   sort: function(event, ui) {
                        }, 
```

在 Document.Ready 中

```
 $(document).ready(function () {
            $( "#pages" ).tabs().find( ".ui-tabs-nav" ).sortable({
                axis: "x",
                sort: function(event, ui) {

            },
      }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T08:00:58.730

原来是 fx 选项导致了这种行为，我冒昧地猜测事件起泡器没有正确起泡。

删除后：

```
fx: {
     opacity: 'toggle',
    duration: 100
} 
```

选项卡现在按应有的方式加载。我将探索使用 fx 选项时会发生（和不会）发生的确切情况并进行报告。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-17T02:56:43.140

由于谷歌的功劳，很明显有几个问题与 jQuery UI 选项卡的`.add()`方法有关，但是以下过程似乎（不足为奇？）是完全可靠的：

*   称呼`.tabs('destroy')`
*   附加一个新选项卡（即一个新`li`节点），“手动”
*   重新初始化`.tabs()`

从表面上看，这很容易实现，但实际上在开发通用工作代码时需要跳过一些障碍——主要是：

*   需要保留本机`.add()`方法在任何索引处插入制表符的能力，而不仅仅是在结尾处
*   需要跟踪当前选定的选项卡并在重新初始化后重新选择它
*   需要确保 UI 的全部`.tabs()`选项仍然可用。

太好了，有机会写一些具有挑战性的东西！

在玩了一段时间的代码之后，我得出的结论是，对于 UI 选项卡插件本身以及之后的补丁，“feeder”（更传统的“适配器”）模式比补丁或猴子补丁更合适（并且更简单）几次迭代我想出了一个轻量级的 jQuery 插件来完成这项工作：

```
$.fn['tabsFeeder'] = function(options) {
    this.on('addTab', function(event, url, label, index) {
        var $that = $(this),
            s = $that.data('tabs').options;
        $that.tabs('destroy');
        try {
            var $lis = $that.find('li'),
                n = $lis.length;
            index = Math.max((index === undefined) ? n : index, 0);
            $lis.eq(Math.min(index, n - 1))[(index < n) ? 'before' : 'after']('<li><a href="' + url + '">' + label + '</a></li>');
            if (s.selected !== undefined && index <= s.selected) {
                s.selected += 1;
            }
            throw ('');
        }
        catch (e) {
            $that.tabs(s);
        }
    });

    this.on('current', function(event, callback) {
        $that = $(this);
        if ($that.eq(0).length > 0 && typeof callback === 'function') {
            var ui = {
                'tab': $that.find('li.ui-state-active a'),
                'panel': $that.find('.ui-tabs-panel').not('.ui-tabs-hide'),
                'index': $that.tabs('option', 'selected')
            };
            callback(event, ui);
        }
    });
    this.tabs(options);
}; 
```

相信我，它很轻。

有了这个插件（和 jQuery UI 选项卡），我们现在可以：

*   用 初始化选项卡`$('selector').tabsFeeder(options)`，`options`标准 jQuery UI 选项卡选项在哪里 - 没有添加也没有遗漏
*   调用`$('selector').trigger("addTab", [url, label]);`or`$('selector').trigger("addTab", [url, label, index]);`而不是`.tabs("add", url, label)`or `.tabs("add", url, label, index)`。

为了更好地衡量，我包含了一个`current`自定义事件来访问当前选定的选项卡（根据选项卡本机事件作为“ui”对象传递给回调函数）。

我不确定我是否可以彻底证明使用自定义事件处理程序而不是正确的方法，除了说插件：

*   更容易写
*   更简洁
*   不需要将自己的任何数据写入 DOM。
*   方法链得到保证

您可以在[此处](http://jsfiddle.net/zBVah/13/)`tabsFeeder`查看实际操作

**缺点**

因为`tabsFeeder`依赖于重新初始化`.tabs()`，所以效率低下并且可能不适合与 ajax 模式一起使用，因为可能需要重新获取内容 - 但无论如何尝试 - 性能可能是可以接受的。

“addTab”事件处理程序使用 UI 选项卡插件的`select`事件来跟踪当前选项卡。为了允许`select`在选项中指定回调，我选择了一种紧凑的类似观察者的模式，其中触发顺序被硬编码为标准回调（如果存在），然后是插件的`defaultSelect()`（一个 JavaScript 语句）。虽然这看起来合乎逻辑并且在演示中运行良好，但它没有被充分探索，我不能保证它在所有应用程序中都是正确的。可以允许以编程方式建立顺序（AB 与 BA），但这对编码来说很乏味，而且可能没有必要。

# google-closure - Google Closure：工作方程式编辑器演示？

> ID：11060251
> 
> 赞同：0
> 
> 时间：2012-06-16T02:15:11.933
> 
> 标签：google-closure

## 语境

我知道[http://closure-library.googlecode.com/svn/trunk/closure/goog/demos/editor/equationeditor.html#](http://closure-library.googlecode.com/svn/trunk/closure/goog/demos/editor/equationeditor.html#)

但是，当我尝试它时，它对我不起作用。

## 问题：

是否有 Google Closure 方程编辑器的工作演示？我知道它可能有效，因为它可以在 Google Docs 内部工作，但是，我找不到示例代码来查看如何使用 EquationEditor。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T03:01:53.440

如果您阅读源文件，您会看到许多库引用是硬编码的，例如

`goog.ui.equation.ImageRenderer.SERVER_NAME_ = 'https://www.google.com';`

如果您想在不依赖谷歌的情况下使用它，或者如果您想自定义行为，您似乎必须复制粘贴相当多的代码。基本用法很简单：

[http://closure-library.googlecode.com/svn/trunk/closure/goog/demos/editor/equationeditor.js](http://closure-library.googlecode.com/svn/trunk/closure/goog/demos/editor/equationeditor.js)

# php - PHP快速解密方法

> ID：11060252
> 
> 赞同：2
> 
> 时间：2012-06-16T02:15:36.627
> 
> 标签：php, encryption

我对即将到来的项目有一点独特的问题；我需要一种算法，可以从变量中获取非明文数据并尽快解密。但是，我在最松散的意义上使用了解密，因为我正在寻找一种简单的优化算法，其中唯一的目标是快速解密。解密所述字符串的复杂性/难度并不重要；出于这些目的，所有字符都移动一位的字符串将与 AES 实现一样有效。我知道我可以简单地遍历“加密”字符串并转换其所有字符，但我很好奇是否有更快的方法来实现这一点。我正在考虑缓存，但我不确定这个脚本是否能够写入文件，所以事情变得复杂了。还，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-16T02:17:13.507

您可以使用[`str_rot13()`](http://php.net/str_rot13)- 它非常简单，但它是原生 PHP。

# c - C 输出未显示（C 新手）

> ID：11060254
> 
> 赞同：0
> 
> 时间：2012-06-16T02:15:58.023
> 
> 标签：c, windows, compiler-errors

我是 C 新手，正在编写一个简单的程序来显示数据的字节表示。当我编译时，命令提示符屏幕每秒闪烁 1/2 秒然后消失。简而言之，输出不显示。以下是我的代码：

```
#include <stdio.h>
typdef unsigned char* pointer;

void show_int(int);
void show_bytes(pointer, int);
int main()
{
show_int(100);
}

void show_int(int x)
{
show_bytes((ponter) &x, sizeof(int));
}

void show_bytes(pointer start, int len)
{ 
  int i;
  for(i=0;i<len;i++)
  {
    printf("0x%p\t0x%.2x\n", start + i, start[i]);
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T02:19:29.457

该程序可能正在显示您的输出，然后快速退出。你会想要在退出之前延迟。如果您在 Windows 上，请使用睡眠（毫秒）；如果您使用的是 Unix，请使用 sleep(seconds)。不仅要注意不同的单位，还要注意不同的大小写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T02:22:33.750

```
show_bytes((ponter) &x, sizeof(int)); 
```

我想那应该是`(pointer)`吧？

也听从 Akroy 的建议。除非你使用像 CodeBlocks 这样的 IDE。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T02:50:35.010

首先，`show_bytes((ponter) &x, sizeof(int));`是对的！

其次，我认为这个问题是输出框在 Windows 控制台上很快消失，如果我是对的，你可以在`cmd`.

例如，您的程序在`d:\project\test.exe`

```
start -> run -> cmd -> 
```

第1步：将目录更改为您的工作地点，

```
cmd:\ cd /d d:\project\ 
```

第二步：执行

```
cmd:\test.exe 
```

或者您可以直接使用完整路径执行它：`cmd:\d:\project\test.exe`.

# web-services - 调用网络服务失败

> ID：11060259
> 
> 赞同：0
> 
> 时间：2012-06-16T02:17:37.803
> 
> 标签：web-services, soap, asp-classic

我得到了需要调用的 Web 服务的这种结构。ws 名称是 Set_Details 我做对了，所以不会导致错误。我无法弄清楚如何解决这个问题。当我调用它时，我得到了错误：

System.InvalidOperationException：Set_Details Web 服务方法名称无效。在 System.Web.Services.Protocols.HttpServerProtocol.Initialize() 在 System.Web.Services.Protocols.ServerProtocol.SetContext（类型类型，HttpContext 上下文，HttpRequest 请求，HttpResponse 响应）在 System.Web.Services.Protocols.ServerProtocolFactory。创建（类型类型、HttpContext 上下文、HttpRequest 请求、HttpResponse 响应、Boolean& abortProcessing）

*我将真实网址路径更改为假地址，因此请忽略网址

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <Set_Details xmlns="http://ws.blobobobo.uk/WebService/">
      <Details>
        <Number>int</Number>
        <Category>string</Category>
      </Details>
      <LoginID>string</LoginID>
      <LoginPassword>string</LoginPassword>
    </Set_Details>
  </soap:Body>
</soap:Envelope> 
```

这是我调用类网络服务的代码

```
 dim ws
      set ws = new webservice
      ws.url = mainip
      ws.method = "Set_OrderDetails"

      ws.parameters.Add "Number", "6166""
      ws.parameters.Add "Category", "ffff"

      ws.parameters.Add "LoginID", "ex10"
      ws.parameters.Add "LoginPassword", "ex20"

    ws.execute

    response.write ws.response
set ws = nothing 
```

这是代表网络服务的我的班级

```
class WebService
    public Url
    public Method
    public Response
    public Parameters

    public function execute()
        dim xmlhttp

        Set xmlhttp = CreateObject("Microsoft.XMLHTTP")
        xmlhttp.open "POST", Url & "/" & Method, false
        xmlhttp.setRequestHeader "Content-Type", "application/x-www-form-urlencoded"
        xmlhttp.send Parameters.toString
        response = xmlhttp.responseText
        set xmlhttp = nothing
    end function

    Private Sub Class_Initialize()
        Set Parameters = new wsParameters
    End Sub

    Private Sub Class_Terminate()
        Set Parameters = Nothing
    End Sub

end class

class wsParameters
    public mCol

    public function toString()
        dim nItem
        dim buffer

        buffer = ""
        for nItem = 1 to Count
            buffer = buffer & Item(nItem).toString & "&"
        next
        if right(buffer,1)="&" then
            buffer = left(buffer,len(buffer)-1)
        end if
        toString = buffer   
    end function

    public sub Clear
        set mcol = nothing 
        Set mCol = CreateObject("Scripting.Dictionary") 
    end sub

    public sub Add(pKey,pValue)
        dim newParameter

        set newParameter = new wsParameter
        newParameter.Key = pKey
        newParameter.Value = pValue
        mCol.Add mCol.count+1, newParameter

        set newParameter = nothing
    end sub

    public function Item(nKey)
        set Item=mCol.Item(nKey)
    end function

    public function ExistsXKey(pKey)
        dim nItem

        for nItem = 1 to mcol.count
            if mCol.Item(nItem).key = pKey then
                ExistsXKeyword = true
                exit for
            end if
        next
    end function

    public sub Remove(nKey)
        mCol.Remove(nKey)
    end sub

    public function Count()
        Count=mCol.count
    end function

    Private Sub Class_Initialize()
        Set mCol = CreateObject("Scripting.Dictionary")
    End Sub

    Private Sub Class_Terminate()
        Set mCol = Nothing
    End Sub
end class

class wsParameter
    public Key
    public Value

    public function toString()
        toString = Key & "=" & Value
    end function
end class

Dim ip
mainip="http://ws.bloblobo.uk/WebServices/ws.asmx" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T03:48:02.487

通过执行原始 HTTP POST 调用 SOAP Web 服务方法时，您应该按照 Web 服务的描述构建和发送整个请求。即您需要发送：

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <Set_Details xmlns="http://ws.blobobobo.uk/WebService/">
      <Details>
        <Number>6166</Number>
        <Category>ffff</Category>
      </Details>
      <LoginID>ex10</LoginID>
      <LoginPassword>ex20</LoginPassword>
    </Set_Details>
  </soap:Body>
</soap:Envelope> 
```

目前你只是发布：

```
Number=6166&Category=ffff&LoginID=ex10&LoginPassword=ex20 
```

Web 服务管道不知道如何处理它。

您的 Web 服务方法也接受复杂类型，`Details`因此您必须将请求作为 HTTP POST 和完整的请求（信封、正文等）发送。

您还需要`SOAPAction`在请求中设置 HTTP 标头，例如：

```
SOAPAction: "http://ws.blobobobo.uk/WebService/Set_Details" 
```

**更新：**

这是一个完整的示例：

```
<%
result = Set_Details(6166, "ffff", "ex10", "ex20")
Response.Write result

Function Set_Details(number, category, loginID, loginPassword)

  Dim request, doc, xmlHttp, url
  url = "http://ws.bloblobo.uk/WebServices/ws.asmx"

  request = "<?xml version='1.0' encoding='utf-8'?>" & _
    "<soap:Envelope xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xmlns:xsd='http://www.w3.org/2001/XMLSchema' xmlns:soap='http://schemas.xmlsoap.org/soap/envelope/'>" & _
    "  <soap:Body>" & _
    "    <Set_Details xmlns='http://ws.blobobobo.uk/WebService/'>" & _
    "      <Details>" & _
    "        <Number>" & number  & "</Number>" & _
    "        <Category>" & category & "</Category>" & _
    "      </Details>" & _
    "      <LoginID>" & loginID & "</LoginID>" & _
    "      <LoginPassword>" & loginPassword & "</LoginPassword>" & _
    "    </Set_Details>" & _
    "  </soap:Body>" & _
    "</soap:Envelope>"

  Set xmlHttp = CreateObject("MSXML2.ServerXMLHTTP")
  xmlHttp.open "POST", url, False
  xmlHttp.setRequestHeader "Content-Type", "text/xml; charset=utf-8"
  xmlHttp.setRequestHeader "SOAPAction", _
          """http://ws.blobobobo.uk/WebService/Set_Details"""

  xmlHttp.send request

  Set response = xmlHttp.responseXML

  '' The presumption here is that you get some kind of result back. 
  '' The example here assumes that the `Set_Details` method returns a simple type 
  '' such as a string, number or boolean
  result = response.documentElement.selectSingleNode("//Set_DetailsResult").text

  Set_Details = result

End Function

%> 
```

最后永远不要用于`Microsoft.XMLHTTP`发出 HTTP 请求，它不适合与 ASP 或服务器端应用程序一起使用，`MSXML2.ServerXMLHTTP`而是使用。

# javascript - 在 Three.js 中加载 STL 文件的首选方法是什么

> ID：11060261
> 
> 赞同：13
> 
> 时间：2012-06-16T02:18:47.070
> 
> 标签：javascript, three.js, loader, stl-format

我正在编写一个应用程序，旨在用作机械设计和模拟工作流程的一部分，我们希望能够使用 Three.js 加载和可视化在 Solidworks 中设计的零件，可以导出为 STL （文本或二进制）。

** 我完全认识到可以使用 Meshlab 之类的东西来转换为 OBJ 或其他格式，但这似乎是阻碍工作流程的不必要的额外步骤。**

Three.js 似乎对 Collada、OBJ、UTF-8、VTK 和 JSON 有很好的加载解决方案，但没有干净的 STL 支持示例。我看到了一些过去使用过的东西，例如 [https://github.com/tbuser/thingiview.js/blob/master/javascripts/thingiloader.js](https://github.com/tbuser/thingiview.js/blob/master/javascripts/thingiloader.js) 由于许可证的原因我想避免, 和 [https://github.com/tbuser/three.js/blob/master/utils/stl_geometry.js](https://github.com/tbuser/three.js/blob/master/utils/stl_geometry.js) 似乎没有完全集成。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2018-08-10T11:31:01.717

有一个[STLLoader](https://github.com/mrdoob/three.js/blob/master/examples/js/loaders/STLLoader.js)和一个[如何使用它](https://github.com/mrdoob/three.js/blob/master/examples/webgl_loader_stl.html)的[示例](https://threejs.org/examples/#webgl_loader_stl)。这些是在[2012 年 8 月](https://github.com/mrdoob/three.js/commit/55cb3f115d241868adb9b13b2b9ce7a75cd7fb27#diff-ca98faf51657dc1461e94a2dfb7694a2)添加到 Three.js 中的，在这个问题最初发布后仅仅一个月左右。从那时起，已经有几个涉及 STLLoader 的[提交。](https://github.com/mrdoob/three.js/commits/master/examples/js/loaders/STLLoader.js)

# mysql - MySQL 不允许我使用数据类型 INT 插入超过 10 位数字

> ID：11060262
> 
> 赞同：1
> 
> 时间：2012-06-16T02:18:59.520
> 
> 标签：mysql

我试图用 11 个数字填充一个字段，但 MySQL 不允许我使用数据类型 INT 插入超过 10 个数字。我最多只能插入 10 位数字。这是错误：

```
ERROR 1264: Out of range value for column 'cpf' at row 1
SQL Statement:
UPDATE `mercado`.`cliente` SET `cpf`=12345678901 WHERE `cpf`='20' 
```

有谁知道为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T02:21:40.613

请参阅[MySQL 数据类型文档](http://dev.mysql.com/doc/refman/5.5/en/integer-types.html)。an`INT`的最大值是 2,147,483,647，恰好包含 10 位数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T02:22:20.143

您限制的`INT`类型列从`-2147483648`到`2147483647`。如果要输入上述范围之外的值，请使用`BIGINT`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T02:27:31.417

那是因为数据类型限制。数据类型的范围`INT`仅从`-2147483648`到`2147483647`。您可以使用数据类型`BIGINT`代替。但我认为，如果您使用非常大的数字，最好的方法是使用文本数据类型（如`VARCHAR`）。如果您需要数字进行计算，只需将其转换即可。

# javascript - JS：将字符串“foo [bar]”转换为代码 obj.foo.bar 的简单方法？

> ID：11060269
> 
> 赞同：2
> 
> 时间：2012-06-16T02:20:15.623
> 
> 标签：javascript, node.js

我有一个变量`obj`定义如下：

```
{user: {username: "AzureDiamond", password: "hunter2"}} 
```

我有一个`str`可能被定义为以下任何字符串的字符串：

*   “用户”
*   “用户[用户名]”
*   “用户密码]”
*   “伪造的”

我在 JS（特别是 node.js）中是否有一种相对简单的方法可以基本上/动态地执行以下操作？

*   时`str == "user"`，返回`{username: "AzureDiamon", password: "hunter2"}`
*   时`str == "user[username]"`，返回“AzureDiamond”
*   时`str == "user[password]"`，返回“hunter2”
*   时`str == "fake"`，返回`null`

**编辑：**这个问题更多是为了找出除了正则表达式匹配之外我可以使用的更简单或内置到 JS/node.js 中的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T02:41:49.590

## 解决方案

如果您确定 的语法`str`正确，则该函数可能如下所示：

```
function get_by_path(source, path){
    var path_elements = path.split(']').join('').split('[');
    for (var i=0; i < path_elements.length; i++){
        source = source[path_elements[i]];
        if (typeof source === 'undefined'){
            return null;
        }
    };
    return source;
}; 
```

## 测试

这是它的行为方式：

```
var data = {'user': {
    'username': "AzureDiamond", 'password': "hunter2",
    'details': {'address': {'street': "Happiness Street"}}
}};

get_by_path(data, 'user');                           // gives user object
get_by_path(data, 'user[username]');                 // gives "hunter2"
get_by_path(data, 'user[password]');                 // gives "AzureDiamond"
get_by_path(data, 'fake');                           // gives null
get_by_path(data, 'user[details][address][street]'); // gives "Happiness Street" 
```

## 解释

该脚本不使用正则表达式，也不使用危险`eval()`的调用，只假设您的“*路径*”将以一个不带括号的单词开头，并且每个下一部分（如果有）将是括在方括号中的单词。如果在遍历的对象中找不到某些路径，`null`则将返回。如果它被找到，它将被返回（不管它是一些复杂的对象、字符串`null`、、布尔值还是其他任何东西）。

脚本从解析您的路径开始。它通过删除右方括号 (" `]`") 并通过打开方括号 (" `[`") 拆分结果字符串来做到这一点。该过程如下所示：

```
"user"                  -> "user"                -> ["user"]
"user[username]"        -> "user[username"       -> ["user", "username"]
"user[password]"        -> "user[password"       -> ["user", "password"]
"user[address][street]" -> "user[address[street" -> ["user", "address", "street"]
"fake"                  -> "fake"                -> ["fake"] 
```

因此，如您所见，最后您有一个路径元素数组。这些被一一评估。如果在任何级别上都无法对数据参数的结构进行更深入的适当步骤，则`null`返回。否则返回最后访问的元素。

## 证明

它有效的证明在这里：http: [//jsfiddle.net/EJCgE/2/](http://jsfiddle.net/EJCgE/2/)

**编辑**`replace()`：由于字符串方法的工作原理，更复杂的路径（当有两个以上级别时）存在一些问题。我已更新我的代码以不包含 jQuery 并修复该问题。

**EDIT2**：我已更新脚本以删除冗余行和一个冗余变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T02:28:07.753

这直接取自 EXTJS3 源代码，但我已经多次使用它来做类似的事情。

```
createAccessor : function(){
    var re = /[\[\.]/;
    return function(expr) {
        if(Ext.isEmpty(expr)){
            return Ext.emptyFn;
        }
        if(Ext.isFunction(expr)){
            return expr;
        }
        var i = String(expr).search(re);
        if(i >= 0){
            return new Function('obj', 'return obj' + (i > 0 ? '.' : '') + expr);
        }
        return function(obj){
            return obj[expr];
        };

    };
}(), 
```

你会这样使用它：

```
var accessor = createAccessor(str);
var data = accessor(object); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T02:25:19.407

试试这个`eval`功能。它接受一个字符串，并像执行 javascript 代码一样执行该字符串。例如：

```
var data = {user: {username: "AzureDiamond", password: "hunter2"}};
var str = "user[\"password\"]";
console.log( eval("data." + str) );
// Prints "hunter2" 
```

但是你必须非常小心，因为根据它的`str`来源，人们基本上可以在你的服务器上远程运行代码。在执行之前使用正则表达式验证字符串，以确保人们无法向您发送偷偷摸摸的信息并将您的服务器破解为位。

编辑：请注意，您还必须引用`password`，以便在执行时将其视为字符串，而不是变量。

# c - 除法和浮点数

> ID：11060272
> 
> 赞同：6
> 
> 时间：2012-06-16T02:21:00.933
> 
> 标签：c, floating-point, floating-accuracy

谁能帮我为什么 x2 打印为零。我猜由于浮点表示 X1 被四舍五入，有没有办法保持进动。

```
long double x1, x2;
x1= 0.087912088; // Note: 360/4095 = 0.087912088
x2 = 360/4095;
printf("%Lf, %Lf \n",x1, x2); 
```

结果：

```
x1 =0.087912
x2= 0.000000 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-16T02:22:26.967

问题是*整数截断*..你正在划分两个整数=>结果将是另一个整数，小数部分被丢弃。（例如，在整数除法的实际结果为 3.9 的情况下，截断将使其变为 3（即它不四舍五入））。

在您的情况下，如果您将其更改为：

```
x2 = 360 / 4095.0;  /* one of the operands now has a decimal point */ 
```

你会得到

```
0.087912, 0.087912 
```

作为输出。

即，只要除法运算符的*一个或两个*`/`操作数都是浮点数/双精度数，结果也会是浮点数/双精度数（即，它将被“提升”为浮点数/双精度数）。所以我本可以`x2`改为

```
x2 = 360.0 / 4095.0; 
```

或者

```
x2 = 360.0 / 4095; 
```

并且会得到与上面相同的结果。

正如@chris 所提到的，只使用 a`.`也足够了。

关于您上面关于精度的问题：

您已经在使用长双打了.. 我不认为在内部您可以更改任何内容，除非您使用一些特殊的库，但您当然可以显示更多数字。例如，

```
 printf("%Lf, %.20Lf \n",x1, x2); 
```

将产生

```
 0.087912, 0.08791208791208791895 
```

最后，正如@edA-qa mort-ora-y 提醒我们的那样，您还可以*将*值强制转换为某些类型，但是*当*您这样做时很重要。一个简单的例子（请注意，在任何情况下，值都会在赋值`float` *之后*`v`结束，因为是 a `float`）：

```
float v = 0;
                     /* values shown are BEFORE assignment */
v = (5 / 2);         /* value is 2 due to integer truncation before assignment */
v = (float) (5 / 2); /* 2.0 as integer division occurs 1st, then cast to float */
v = (float) 5 / 2;   /* 2.5 since 5 becomes 5.0 through casting first. */ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-16T02:28:13.230

内置运算符适用于相同类型的对象。结果与参数的类型相同。在这种情况下，除法是对两个整数进行的，因此结果是一个整数。

```
x2 = 360/4096;
//   int/int  = int 
```

因此，我期望结果为 0。

如果内置类型上的运算符不同，则将提升它们以使它们具有相同的类型（并且结果也是该类型）。所以你想要的是：

```
x2 = 1.0 * 360/4095;  // or 360.0/4095

// This is
    double * int / int

==> (double * double)/int
==> (double * double)/double 
```

# php - PHP Facebook API 身份验证工作，但在日志中看到“CSRF 状态令牌与提供的令牌不匹配”

> ID：11060274
> 
> 赞同：0
> 
> 时间：2012-06-16T02:21:17.860
> 
> 标签：php, facebook

我在追查这个错误的原因时碰了壁。

我的应用程序功能齐全，即使我在错误日志中看到此错误：“CSRF 状态令牌与提供的令牌不匹配”

我搜索了这个站点并看到了与使用 get loginUrl 和 .htaccess 相关的帖子。

我在使用 loginURL 或我的 .htaccess 的代码中看不到问题。我会在这里发布。

我看到的行为是用户来到我的页面（未登录），我显示登录 URL，用户通过 facebook 登录，当他们返回状态字符串时，我的错误日志中有 4 个条目出现此错误。

```
options -multiviews
<IfModule mod_rewrite.c>
RewriteEngine On 
RewriteBase /

RewriteRule ^my$ my.php [L,QSA]
RewriteRule ^site-admin$ site-admin.php [L,QSA]
RewriteRule ^admin$ site-admin.php [L,QSA]
RewriteRule ^banned$ banned.php [L,QSA]
RewriteRule ^userlist$ userlist.php [L,QSA]
RewriteRule ^uploadfeatured$ uploadfeatured.php [L,QSA]
RewriteRule ^viewlatest$ viewlatest.php [L,QSA]
RewriteRule ^featured$ featured.php [L,QSA]
RewriteRule ^get$ get.php [L,QSA]

</IfModule>
<IfModule mod_security.c> 
   # Turn off mod_security filtering. 
   SecFilterEngine Off 

   # The below probably isn't needed, 
   # but better safe than sorry. 
   SecFilterScanPOST Off 
</IfModule>

    function getLoginURL()
{
    $facebook = new Facebook(array(
        'appId'  => APP_ID,
        'secret' => SECRET,
        'fileUpload' => true
    ));
    $user = $facebook->getUser();
    if($user && userHasPermissions())
    {
        //user has permissions and is logged in

        $me= $facebook->api('/me'); 
        $con = getConn();   
        $query="select * from users where fb_id='".$user."';";
      $result=mysql_query($query);   
        $result=mysql_query($query);     
      while ($row = mysql_fetch_assoc($result)) 
      {
      $userid =  $row['id'];
        }                                       

      if (mysql_num_rows($result) == 0)
        {
            // Got a newbie, now we need to add him into our db                 
            $query2= "INSERT INTO users (fb_id ,name ,email) VALUES ('".$user."','". $me['name']."','". $me['email']."')";
            $result2=mysql_query($query2);                          
            $facebook->api("/me/feed", "post", array(
            message => "Welcome to XXX - XXX!",
            picture => "http://XXX.us/static/img/XX.png",
            link => "http://XXX.us",
            name => "XXX ",
            caption => "XXX welcomes you!"
            ));
            echo "<script language='javascript'> window.location='http://XXX.us';</script>" ;
        }
        else
        {                           
            $query3 = "UPDATE  users SET  email='". $me['email']. "',access_token='". $facebook->getAccessToken() ."',name='". $me['name'] ."' WHERE  id=". $userid .".;";                                                              
            $result3=mysql_query($query3);                                                                                                  

        }

      return null;
    } 
    else 
    {
        $loginUrl = $facebook->getLoginUrl(
        array('scope' => 'publish_stream,user_photos,offline_access,email'));   

    }
    if($user)
    {
        $access_token = $facebook->getAccessToken();
        $query3 = "UPDATE  users SET  email='". $me['email']. "',access_token='". $facebook->getAccessToken() ."',name='". $me['name'] ."' WHERE  id=". $userid .";";                                                               
        $result3=mysql_query($query3);  
    }
    else
    {

    }
    return $loginUrl;
} 
```

# android - 使用 phonegap 为 android 应用程序创建欢迎屏幕

> ID：11060275
> 
> 赞同：-1
> 
> 时间：2012-06-16T02:21:18.430
> 
> 标签：android, cordova

我想在第一次用户打开应用程序时显示一个欢迎屏幕以及我的应用程序的一些基本教程，以后不再显示它。欢迎屏幕可能包含多个页面，用户需要从一个页面滑动到另一个页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T04:01:51.870

Phonegap 是硬性要求吗？您可以使用 SharedPreferences 轻松完成此操作。在欢迎屏幕启动之前，检查是否设置了 ShownWelcomeScreen 之类的首选项。如果为假，则显示屏幕，最后将其设置为真。如果它已经是真的，只需启动 Activity 的另一个端口。

# python - 多处理/子处理时 Tkinter GUI 冻结

> ID：11060287
> 
> 赞同：2
> 
> 时间：2012-06-16T02:23:07.853
> 
> 标签：python, subprocess

所以我遇到了一个重大问题。我目前正在尝试使用多处理/子处理在我的 Tkinter 应用程序旁边运行文件，但是，一旦我运行该进程，GUI 就会冻结，直到我完成该进程。有没有办法解决这个问题？我还查看了关于 SO 的其他问题，但无济于事（我发现一个建议`root.update()`，但它没有按预期工作。

注意：我没有包含 GUI 元素，因为我已经制作了基本程序来尝试这个（只有几行）并得到同样的问题。值得注意的是，我正在运行 Windows。

代码（断章取义）：

```
def run_file(self):
    self.root.update()
    sub_process=subprocess.call(self.sub_proc_args)

process=multiprocessing.Process(target=self.run_file())
process.start() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T02:24:59.403

通过这样做`self.run_file()`，您`run_file`在多处理可以使用它之前调用它。您需要使用`target=self.run_file`（注意，没有括号）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T02:35:28.140

我发现了问题（BrenBarn 指出的目标问题除外）。这是我的修复：

（我拿出了多处理。）

```
def run_file(self):
    sub_process=subprocess.Popen(self.sub_proc_args) #Open subprocess
    self.root.update() #Update GUI    
self.run_file() #Initiate sub_process 
```

我发现这是解决方法，因为使用调用，当你执行它时，它必须返回一个返回值，这使得 Tkinter 不能继续它的主循环。这可以通过使用`Popen`.

# ajax - 使用 ajax 和 jquery 将内容加载到可扩展的 DIV 中

> ID：11060293
> 
> 赞同：0
> 
> 时间：2012-06-16T02:25:12.610
> 
> 标签：ajax, jquery, jquery-plugins, jquery-mobile

我想使用可折叠 DIV 向用户显示和隐藏内容。

我发现这个 jQuery 代码来做展开和折叠： [http ://webcloud.se/code/jQuery-Collapse/](http://webcloud.se/code/jQuery-Collapse/)

然而，内容已经加载到 div 中（它只是从视图中隐藏）。

所以我发现了这个： [http ://www.raymondcamden.com/index.cfm/2011/4/5/Collapsible-content-and-Ajax-loading-with-jQuery-Mobile](http://www.raymondcamden.com/index.cfm/2011/4/5/Collapsible-content-and-Ajax-loading-with-jQuery-Mobile)

它将内容加载到打开的 div 中，但在关闭时也将其卸载！

然而，它都与 jQuery mobile 混合在一起，所以它的风格。我希望能够自己设置 div 的样式。第一个示例也使用漂亮的反弹或淡入淡出效果来显示内容。

这样做的原因是我想向用户显示不同的内容，例如图像或 Flash 文件，但我不希望在页面加载时将所有内容加载到页面中，这将是太多的东西。

那么我如何使用第一个 jQuery Collapse 示例但加载外部页面呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T18:20:05.647

我喜欢这个问题，所以我花了一点时间做一些接近插件的东西：

```
//only run the event handler for collapsible widgets with the "data-url" attribute
$(document).delegate('.ui-collapsible[data-url] > .ui-collapsible-heading', 'click', function () {

    //cache the collapsible content area for later use
    var $this = $(this).siblings('.ui-collapsible-content');

    //check if this widget has been initialized yet
    if (typeof $this.data('state') === 'undefined') {

        //initialize this widget

        //update icon to gear to show loading (best icon in the set...)
        $this.siblings('.ui-collapsible-heading').find('.ui-icon').removeClass('ui-icon-plus').addClass('ui-icon-gear')

        //create AJAX request for data, in this case I'm using JSONP for cross-domain abilities
        $.ajax({

            //use the URL specified as a data-attribute on the widget
            url           : $this.closest('.ui-collapsible').data('url'),
            type          : 'get',
            dataType      : 'jsonp',
            success       : function (response) {

                //get the height of the new content so we can animate it into view later
                var $testEle   = $('<div style="position:absolute;left:-9999px;">' + response.copy + '</div>');
                $('body').append($testEle);
                var calcHeight = $testEle.height();

                //remove the test element
                $testEle.remove();

                //get data to store for this widget, also set state
                $this.data({
                    state         : 'expanded',
                    height        : calcHeight,
                    paddingTop    : 10,
                    paddingBottom : 10

                //add the new content to the widget and update it's css to get ready for being animated into view
                }).html('<p>' + response.copy + '</p>').css({
                    height        : 0,
                    opacity       : 0,
                    paddingTop    : 0,
                    paddingBottom : 0,
                    overflow      : 'hidden',
                    display       : 'block'

                //now animate the new content into view
                }).animate({
                    height        : calcHeight,
                    opacity       : 1,
                    paddingTop    : $this.data('paddingTop'),
                    paddingBottom : $this.data('paddingBottom')
                }, 500);

                //re-update icon to minus
                $this.siblings('.ui-collapsible-heading').find('.ui-icon').addClass('ui-icon-minus').removeClass('ui-icon-gear')
            },

            //don't forget to handle errors, in this case I'm just outputting the textual message that jQuery outputs for AJAX errors
            error         : function (a, b, c) { console.log(b); }
        });
    } else {

        //the widget has already been initialized, so now decide whether to open or close it
        if ($this.data('state') === 'expanded') {

            //update state and animate out of view
            $this.data('state', 'collapsed').animate({
                height        : 0,
                opacity       : 0,
                paddingTop    : 0,
                paddingBottom : 0
            }, 500);
        } else {

            //update state and animate into view
            $this.data('state', 'expanded').animate({
                height        : $this.data('height'),
                opacity       : 1,
                paddingTop    : $this.data('paddingTop'),
                paddingBottom : $this.data('paddingBottom')
            }, 500);
        }
    }

    //always return false to handle opening/closing the widget by ourselves
    return false;
});​ 
```

可折叠的 HTML 如下所示：

```
<div data-role="collapsible" data-url="http://www.my-domain.com/jsonp.php">
    <h3>Click Me</h3>
    <p></p>
</div> 
```

这是一个演示：http: [//jsfiddle.net/YQ43B/6/](http://jsfiddle.net/YQ43B/6/)

请注意，对于演示，我发现使初始动画平滑的最佳方法是添加以下 CSS：

```
.ui-mobile .ui-page .ui-collapsible .ui-collapsible-content {
    padding-top    : 0;
    padding-bottom : 0;
}​ 
```

jQuery Mobile 添加的默认填充`10px`用于顶部和底部填充，我将这些值作为数据属性添加到每个小部件以保持默认值。

请注意，可以稍微调整此代码以显示其他类型的内容，我使用 JSONP 只是因为您可以在 JSFiddle 上使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T03:37:33.593

检查此[链接](http://www.dynamicdrive.com/forums/showthread.php?t=28882)它在 php 中，并显示如何加载到 DIV 的外部链接 Ajax 只能加载内部页面并且不能跨域工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T03:25:35.287

这是我做的一个例子：

```
 $(document).ready(function () {
               $('.accordian_body').hide();
                 });

         $('.accordian_head').click(function () {
            $(this).next().animate(
        { 'height': 'toggle' }, 'fast'
        ); 
```

然后在 HTML

```
 <div class="accordian_head"></div>
   <div class="accordian_body"></div> 
```

在 CSS 中，你可以随意设置头部和身体的样式，在后面添加代码 -

```
 <asp:Literal ID="lit1" runat="server" />

    foreach(DataRow dr in DataTable.Rows)
     {
         lit1.Text = lit1.Text + "<div class=\"accordian_head\">" Whatever you want... "</div><div class=\"accordian_body\">" Whatever in body "</div>
      } 
```

# php - 重新对齐 html 中 php 函数的返回值

> ID：11060295
> 
> 赞同：1
> 
> 时间：2012-06-16T02:25:53.747
> 
> 标签：php, jquery, html

我正在尝试创建一个简单的投票页面。每边有几个链接，当用户点击向上箭头时，投票被计算，投票计数值增加。现在一切正常，除了当投票增加时，新值出现在 upvote 箭头的顶部（这是有道理的，因为我正在呼应新值）。我无法弄清楚如何将更新后的投票数设置到应该显示投票数的 SPAN 中。

这是代码： **HTML**

```
<?php
$sql=mysql_query("SELECT * FROM discussion_links WHERE link_side = 'Michigan'");
while($row = mysql_fetch_array($sql)) {
    $link_id=$row['link_id'];
    $url=$row['link_url'];
    $title=$row['link_title'];
    $source=$row['link_source'];
    $votes=$row['vote_count'];
?> 
<div class="top-links-wrapper">
    <div class="link-info">
        <a class="link-title" href="http://<?php echo $url ?>"><?php echo $title . "</a>"; ?>
        <p class="link-source"><?php echo $source . "</p>" ?>
    </div>
    <div class="link-vote-wrapper">
        <div class="link-votes">
            <span><?php echo $votes; ?></span>
        </div>
        <a href="#" class="vote" id="<?php echo $link_id; ?>" name="up" title="Up vote"></a>
    </div>
</div>
<?php   
    }
?> 
```

我想将下面 PHP 函数返回的值替换为上面代码中的 SPAN。

**PHP**

```
<?php
$ip=$_SERVER['REMOTE_ADDR']; 

if($_POST['id']) {
    $id=$_POST['id'];
    $id = mysql_escape_String($id);
    //Verify IP address in Voting_IP table
    $ip_sql=mysql_query("select ip_add from Voting_IP where link_id_fk='$id' and ip_add='$ip'");
    $count=mysql_num_rows($ip_sql);

    if($count==0) {
        // Update Vote.
        $sql = "update discussion_links set vote_count=vote_count+1 where link_id='$id'";
        mysql_query( $sql);
        // Insert IP address and Message Id in Voting_IP table.
        $sql_in = "insert into Voting_IP (link_id_fk,ip_add) values ('$id','$ip')";
        mysql_query( $sql_in);
    }
    else {
        echo "<script>alert('You have already voted');</script>";
    }
    $result=mysql_query("select vote_count from discussion_links where link_id='$id'");
    $row=mysql_fetch_array($result);
    $up_value=$row['vote_count'];
    echo $up_value;
}
?> 
```

这个**$up_value**是我想替换 H​​TML 中当前投票计数的值。

**jQuery**

```
<script type="text/javascript">
    //<![CDATA[
    var $j = jQuery.noConflict();
    $j(function() {
        $j(".vote").click(function() {
            var id = $j(this).attr("id");
            var name = $j(this).attr("name");
            var dataString = 'id='+ id ;
            var parent = $j(this);

            if (name=='up') {
                $j(this).fadeIn(200).html('<img src="dot.gif" />');
                $j.ajax({
                    type: "POST",
                    url: "up_vote.php",
                    data: dataString,
                    cache: false,

                    success: function(html) {
                        parent.html(html);
                    } 
                });
            }
            return false;
        });
    });
    //]]>
</script> 
```

谢谢，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T02:29:57.743

假设您`(int)`在函数中返回了适当的总数`success`，那么您应该将 span 元素的 InnerHTML 设置为该值

如果您要给每个`link-votes`元素一个唯一的 ID 并使用该 ID 来更改元素的 ID，`InnerHTML`那将会很方便`span`。关于ajax成功

由于您已经将**vote_id**与事件处理程序相关联，因此您可以简单地为`span` **id**元素添加一个前缀，然后在`success`函数中调用如下内容：

```
 $("#myPrefix"+id).html(html); 
```

# wcf - 使用我的 ISerializable 实现而不是 DataContractSerializer

> ID：11060298
> 
> 赞同：0
> 
> 时间：2012-06-16T02:26:38.623
> 
> 标签：wcf

我的 WCF 客户端和服务器交换对象，其类型在服务器和客户端共享的类库上定义。这些对象通过 ISerializable 实现自定义序列化。但是，我的自定义序列化没有被使用。相反，正在使用 DataContractSerializer。如何强制使用我的自定义序列化？

我需要使用自己的序列化的原因是因为我确实传输了一些大对象图，并且我的序列化算法在压缩/加速方面做得很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T19:30:33.607

这可以通过将正确的属性添加到您的 wcf 联系人来实现。

有关详细信息，请参阅：[http](http://www.danrigsby.com/blog/index.php/2008/03/07/xmlserializer-vs-datacontractserializer-serialization-in-wcf/) ://www.danrigsby.com/blog/index.php/2008/03/07/xmlserializer-vs-datacontractserializer-serialization-in-wcf/ 。

如果这没有帮助，请显示一些代码，说明您如何告诉 wcf 合同它应该使用自定义序列化程序。

# c# - Autofac：解析同名注册的 IEnumerable

> ID：11060305
> 
> 赞同：4
> 
> 时间：2012-06-16T02:28:17.673
> 
> 标签：c#, dependency-injection, inversion-of-control, ioc-container, autofac

我正在使用 Autofac 来处理我的应用程序中的依赖注入。为了不必明确地进行每一次注册，我首先使用`RegisterAssemblyTypes().AsImplementedInterfaces()`然后只处理那些需要特别配置的。

我有一个名为的接口`IToolStripPopulator`，它有几个不同的实现，其中几个正在使用，但有些不再使用（因为我正在努力工作并遵守 OCP，如果我需要不同的功能，我通常不会更改它们，而是不要管它们，然后创建新的来满足我现在的需要）。出于这个原因，我需要通过两种方式覆盖接口的自动注册：

*   一种实现是注入到我的主要逻辑中，并充当其他一些实现的装饰器。我自然希望通过它注册`As<IToolStripPopulator>()`并完成它，因为这是我的应用程序功能当前依赖的实现。
*   那些其他实现是仅在该装饰器类中使用的“内部”填充器。要注入它们，有两种方法：
    *   使用特定类型显式连接外部实现的构造函数；这不是很好，还因为该构造函数必须采用我现在正在使用的内部填充器的确切数量*，*这不符合 OCP。
    *   让外部实现采用`IEnumerable<IToolStripPopulator>`; 这是我想做的，但这也是我卡住的地方。

我不能让 Autofac`IEnumerable`自己解决这个问题，因为它只会解决接口的所有实现，即使是我不再使用的接口以及我不想要的“外部”（以及可能会在解析过程中导致无限循环）。

所以我想做的是：

```
// the inner populators
builder.RegisterType<BrowsersMenuPopulator>().Named<IToolStripPopulator>("inner");
builder.RegisterType<ThreadsafeConnectionMenuPopulator>().Named<IToolStripPopulator>("inner");

// the decorator implementation
builder.RegisterType<BrowserAndConnectionMenuPopulator>().As<IToolStripPopulator>().WithParameter( ? ); 
```

但此时无法实际访问现有注册。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-16T02:28:18.140

....在这里，我又尝试了一件我实际上没想到会奏效的东西，但它确实奏效了。

```
builder.Register(c => c.ResolveNamed<IEnumerable<IToolStripPopulator>>("inner")).As<IEnumerable<IToolStripPopulator>>(); 
```

正如我所预料的那样，不会尝试解析`IEnumerable<IToolStripPopulator>`名为“inner”的注册，而是解析名为“inner”`IEnumerable`的`IToolStripPopulator`注册——完全符合我的需要。

然后，这将被正确地解决并注入到装饰器实现中，只需注册`As<IToolStripPopulator>()`而无需进一步配置。

从形式上看，我实际上更希望能够说明直接使用装饰器注册解析的名称，因为这样会更直观和灵活（如果我需要解析几个`IEnumerable<IToolStripPopulator>`呢？），但在很多情况下，这应该是足够。

@codinghorror 的“橡皮鸭问题解决”概念支配着我的每个工作日....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T15:11:15.107

直接指定我知道的唯一方法是直接在您的注册码中“新建”：

```
//decorator impl
builder.Register(c => new BrowserAndConnectionMenuPopulator(c.ResolveNamed<IEnumerable<IToolStripPopulator>>("inner"),...)).As<IToolStripPopulator>(); 
```

这具有在注册中直接指定所需的确切依赖项的优点，但缺点是在重新配置`BrowserAndConnectionMenuPopulator`的依赖项中失去灵活性。为了完整起见，我将其包括在内，但老实说，我更喜欢您发现的解决方案。

# debugging - GLESRender Debug Draw on Cocos2d v2.0

> ID：11060307
> 
> 赞同：3
> 
> 时间：2012-06-16T02:28:37.300
> 
> 标签：debugging, cocos2d-iphone, box2d, draw

我最近升级到 cocos2d v2.0 和 box2d 2.1.2 并且我的调试绘图停止工作。游戏仍然运行良好，但身体不再被绘制。我读过它与 cocos2d v2.0 使用 GLES 2.0 的事实有关，但没有人能够给我解决方案，论坛没有回应。

Chipmunk debugdraw 也坏了，但我得到了一个 CPDebugLayer 类文件并恢复了它。Box2d 是唯一一个我无法正常工作的。

有人遇到同样的情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T09:03:18.590

首先，按照通常的方式安装 cocos2d 2.0 模板：

```
./install-templates.sh -f 
```

然后从模板中创建一个带有 Box2D 项目的新 cocos2d。将项目的 GLES-Render.h/.m 文件替换为 cocos2d+Box2D 模板项目中的文件。这应该就是全部了。

值得一提的是，如果您在应用程序中进行了任何自定义 OpenGL 绘图，您将不得不修改渲染代码以独占使用 OpenGL ES 2.0 函数，即使旧代码仍然可以编译。一些 OpenGL ES 1.1 函数仍然可用并且您可以使用它们，但它们通常不起作用或更糟会导致 OpenGL 错误。这可能会产生各种渲染副作用。

# javascript - 创建画布元素的最佳实践

> ID：11060308
> 
> 赞同：6
> 
> 时间：2012-06-16T02:28:51.837
> 
> 标签：javascript, html, canvas, element

我一直在尝试以几种不同的方式创建画布元素，并且想知道是否有人知道这些（或其他）方式中的哪一种最有效。

最基本的似乎是在 html 中放置一个画布元素，如下所示：

```
<canvas id="myCanvas" width="500", height="500"></canvas> 
```

然后在javascript中：

```
var canvas = document.getElementById('myCanvas');
var ctx = canvas.getContext('2d'); 
```

有时我需要将所有画布 biznass 保存在 .js 文件中（例如，当我想动态更改元素的宽度/高度时），我会这样做：

```
var canvas = document.createElement('canvas');
document.body.appendChild(canvas);
canvas.height = '500';
canvas.width = '500';
var ctx = canvas.getContext('2d'); 
```

或者当我变得懒惰时，是这样的：

```
document.write("<canvas id='myCanvas' width='500', height='500'></canvas>");

var canvas = document.getElementById('myCanvas');
var ctx = canvas.getContext('2d'); 
```

优点？缺点？编辑？其他选择？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-16T03:17:25.520

第一个是目前最好的。

第一个在效率上获胜（稍微），因为第二个和第三个会导致页面不必要地重新布局。此外，如果 JavaScript 中出现停止后续执行的错误，则页面看起来会非常奇怪。

此外，出于可访问性目的，您应该始终选择第一个。**如果有人禁用了 JavaScript，您仍然希望他们看到后备内容。**即使只是说“打开 JavaScript！” 或“获取现代浏览器！”

如果你使用第二种或第三种方法，用户可能永远不会知道，他们会继续认为你在页面布局上很烂，因为有一个奇怪的空间应该是后备内容（或画布）。

* * *

即使除此之外，方法 2 和 3 还是稍微打乱了事情的顺序。你什么时候添加画布？`onload`火灾后？好吧，通过触发`onload`页面，刚刚说 DOM 完成了它的舞蹈并且一切就绪！然后你去改变 DOM！

...真没礼貌！

当然，您可能不会使用任何依赖于隐含承诺的库，`onload`因为您使用 2 或 3 有点破坏，但如果您可以避免它，这是不必要的破坏约定。

* * *

顺便说一句，对于简单的应用程序或示例，我已将这个小提琴添加为书签：

[http://jsfiddle.net/eAVMs/](http://jsfiddle.net/eAVMs/)

其中使用第一种方法。如果你经常使用画布，你也应该为这个小提琴添加书签！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T02:35:32.627

```
document.write("<canvas id='myCanvas' width='500', height='500'></canvas>"); 
```

是唯一需要注意的方法。对于任意创建元素，使用`document.write`通常被认为是不好的做法。

我可以在这里重复为什么，但是[这个答案](https://stackoverflow.com/a/802943/322395)很好地解释了它。

其他两种方法完全有效且很好。它真的只是一个偏好问题。通常我会创建一个画布标签，除非我需要一个临时画布来做某事，我会在其中使用该`createElement`方法。

除此之外，它实际上只是一个偏好问题，总体上不会以任何方式影响性能。

# database-design - 在 neo4j 中寻找生日

> ID：11060310
> 
> 赞同：0
> 
> 时间：2012-06-16T02:28:59.867
> 
> 标签：database-design, neo4j

所以我最近一直在研究neo4j，不记得上次我对某事如此兴奋是什么时候。我只是认为这是最酷的事情。我还有很多东西要学，但是...

给出这样的东西： ![neo4j 图](../Images/88b674010cebc96f4bcf9b45acdbece1.png)

我和山姆都有生日。他是 10 月 18 日，我的是 10 月 12 日。我怎么会找到山姆的生日？山姆与“出生日期”或类似的日期有关系吗？

我意识到我可能没有以正确的方式接近这个建模，这可能是我的障碍。这只是令人困惑，因为一切都以一种或另一种方式相关，很难确定什么，如果有的话，实际上是一个独特的属性，什么是简单的关系。

如果我要求生日，我想要生日 -> 10 月 18 日 -> sam 和 10 月 12 日 -> 我。

如果我要我，我会想要我 -> 生日 -> 10 月 12 日

如果我要求 10 月 12 日，我想要 10 月 12 日 -> 生日 -> 我（我认为这是正确的）

所以...希望对建模事物以及如何正确地将这些事物联系在一起有所了解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T02:38:51.427

所以我想问题是，你想在这里得到什么答案？

你想找其他过生日的人吗？好吧，这将（理论上）返回数据库中的所有用户，而不仅仅是“Sam”，除非您专门针对“Sam”定制问题

因此，对此进行建模的一种方法是让您的参考节点（这在 neo4j 模型中很常见）引用所有生日节点，然后像这样遍历：

```
(Reference_Node)-[:BIRTHDAY_REFERENCE]->(Birthday)<-[:HAS_BIRTHDATE]-(User) where User.name='Sam' 
```

这是你想要的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T05:03:03.750

您可能还对多级索引时间线感兴趣[http://docs.neo4j.org/chunked/stable/cypher-cookbook-path-tree.html](http://docs.neo4j.org/chunked/stable/cypher-cookbook-path-tree.html)以帮助您执行诸如“查找所有在 10 月过生日的用户”之类的事情- 如果您的用例涉及这种查询，那就是。

# memory - 将其更改为使用 auto_ptr？

> ID：11060313
> 
> 赞同：1
> 
> 时间：2012-06-16T02:29:54.357
> 
> 标签：memory, auto-ptr

我一直在阅读 c++ auto_ptr 和 unique_ptr 之类的东西，并想尝试在我正在玩的课程中使用它们......但我无法让它工作......

我如何将这些指针转换为自动指针或类似的指针，以便自动处理指针的删除？

标题 - [http://ideone.com/Z9bc5](http://ideone.com/Z9bc5) 正文 - [http://ideone.com/WfwBY](http://ideone.com/WfwBY)

目前它正在使用普通指针工作，但有时我会遇到访问冲突错误。我很确定我知道它是什么原因造成的。但“最好”的方法可能是使用最近添加到 c++11 中的自动删除内容？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T02:35:24.413

不要使用`auto_ptr`. 尝试其中之一`unique_ptr`或`shared_ptr`。[这是](http://herbsutter.com/gotw/_103/)Sutter 解释何时使用 which：

> 如有疑问，默认情况下更喜欢 unique_ptr，如果需要，您可以随时移动转换为 shared_ptr。但是，如果您从一开始就知道您需要共享所有权，请通过 make_shared 直接转到 shared_ptr（参见下面的 #2）。

同样来自他的博客文章：

> **3\. auto_ptr 是怎么回事？**
> 
> auto_ptr 最慷慨地描述为在 C++ 具有移动语义之前创建 unique_ptr 的勇敢尝试。
> 
> auto_ptr 现在已弃用，不应在新代码中使用。如果有机会，请尝试在代码库中将 auto_ptr 全局搜索并替换为 unique_ptr；绝大多数用途都是一样的，它可能会暴露（作为编译时错误）或修复（默默地）一两个你不知道的错误。

因此，您的成员声明从：

```
 sf::Texture * tSpriteSheet; 
```

到：

```
 std::unique_ptr<sf::Texture> tSpriteSheet; 
```

至于返回原始指针的成员函数，您有但显而易见的选择：`unique_ptr`如果类不可移动，则不能返回 a。因此，您可以：

*   保持签名不变
*   返回一个`const& unique_ptr<T>`
*   返回对对象的引用

选择最适合您需求的那一款。

# linux - trying to read iw_statistics but code wont work?

> ID：11060318
> 
> 赞同：1
> 
> 时间：2012-06-15T10:48:43.637
> 
> 标签：linux, wireless, linux-kernel, c

I need to read certain statistics from iw_statistics structure, here's the code:

```
struct net_device *dev;
struct iw_statistics *wi_stats;
dev = first_net_device(&init_net);

  while (dev)
    {
      if (strncmp(dev->name , "wlan",4)==0 )
      {
         if (dev->wireless_handlers->get_wireless_stats(dev) !=NULL ) // <--- here's where the code crashes.
         {
        wi_stats = dev-wireless_handlers->get_wireless_stats(dev);
        printk(KERN_INFO "wi_stats = dev-wireless_handlers->get_wireless_stats(dev); worked!!! :D\n"); 
         }
       }

    } 
```

I'm working on linux kernel 2.6.35 and I'm writing a kernel module. What am I doing wrong here?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T09:20:38.117

Looks like `wireless_handlers` struct is `Null` ... Just because a net device has it's `name` field filled doesn't mean it's configured.

This is where `wireless_handlers` gets set:

```
#ifdef CONFIG_WIRELESS_EXT
    /* List of functions to handle Wireless Extensions (instead of ioctl).
     * See <net/iw_handler.h> for details. Jean II */
    const struct iw_handler_def *   wireless_handlers;
    /* Instance data managed by the core of Wireless Extensions. */
    struct iw_public_data * wireless_data;
#endif 
```

You should check the value called `CONFIG_WIRELESS_EXT` if it's not set , the `wireless_handler` struct is not set and thus you''ll be pointing to a `Null` and your module will get stuck

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T15:09:51.517

You should check that dev->wireless_handlers is not null. Can you paste the actual code snippet? What is the error you get?

# jquery - 随机选择幻灯片开始

> ID：11060320
> 
> 赞同：0
> 
> 时间：2012-06-16T02:30:32.360
> 
> 标签：jquery, loops, random, fadein

我们有一个幻灯片，可以循环淡入/淡出 3 张幻灯片。有没有办法随机选择一张幻灯片开始？

当前代码：

```
function startSlideshow(){
    $("#slide1").fadeIn(1000).delay(3500).fadeOut(1000); //5500
    $("#slide2").delay(5500).fadeIn(1000).delay(3500).fadeOut(1000); //11000
    $("#slide3").delay(11000).fadeIn(1000).delay(3500).fadeOut(1000, startSlideshow); //55000
} 
```

到目前为止，这个网站和你们都是令人难以置信的资源。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T02:57:17.797

```
function startSlideshow(){
    var slides = ["#slide1","#slide2","#slide3"];
    var rand = Math.floor(Math.random()*slides.length);
    var slideSeq = slides.splice(rand).concat(slides);
    $(slideSeq[0]).fadeIn(1000).delay(3500).fadeOut(1000); //5500
    $(slideSeq[1]).delay(5500).fadeIn(1000).delay(3500).fadeOut(1000); //11000
    $(slideSeq[2]).delay(11000).fadeIn(1000).delay(3500).fadeOut(1000, startSlideshow); //55000
} 
```

**注意：**我看到 naab 在我撰写答案时发布了与我的解决方案非常相似的内容，但无论如何我都会发布，因为我的解决方案保留了幻灯片序列。

**编辑：**我整理了一个小提琴来测试我的代码。它依次淡化三个 div，从随机选择的一个开始。

[http://jsfiddle.net/QmDt5/2/](http://jsfiddle.net/QmDt5/2/)

# google-apps-script - 删除的脚本，没有触发器，仍然收到电子邮件

> ID：11060326
> 
> 赞同：1
> 
> 时间：2012-06-16T02:32:53.750
> 
> 标签：google-apps-script, google-sheets

我从 docs (Gmail Snooze) 中删除了一个 google 应用程序脚本，但我每天都收到一条消息：

启动函数错误消息触发器
12 年 6 月 9 日上午 12:49 myFunction 很抱歉，发生了基于时间的服务器错误。请稍等，然后重试。

我已经尝试创建一个新脚本，转到 Resources > All Your Triggers，但那里什么也没有。

有没有比在 gmail 中创建新过滤器来自动删除它们更好的方法来消除这些错误消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T19:53:01.333

您是否也尝试过从 Google 文档的垃圾箱中删除电子表格？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T06:14:26.027

这对我有用！

> 打开电子表格，然后转到工具-电子表格编辑器，然后在编辑器窗口中转到资源->所有触发器...并查看触发器是否仍列在那里。如果是这样，请将其删除。

来源：[如何删除谷歌应用脚​​本服务](https://stackoverflow.com/questions/10459410/how-to-delete-a-google-apps-script-service)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T18:29:43.963

有一些关于删除触发器的报告问题。您可能想对这个[未解决的问题](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1184)添加评论。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-03-01T16:24:49.773

界面可能有更新。现在可以通过不同的菜单访问触发器。打开[script.google.com](http://script.google.com)并打开任何项目，如果您没有任何项目，请创建一个新项目。然后转到**编辑>所有触发器**并关闭不需要的触发器。

# python - python mako模板是否支持循环上下文中的connitue/break？

> ID：11060327
> 
> 赞同：10
> 
> 时间：2012-06-16T02:33:37.127
> 
> 标签：python, templates, loops, mako

是否可以在 %control 结构循环中使用 continue/break。

例如：

```
% for x in range(1):
 % continue
% endfor 
```

谢谢，

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-16T03:18:07.927

是的。您使用`<% continue %>`和`<% break %>`。

例子：

```
from mako.template import Template 
t = Template( 
""" 
% for i in xrange(5): 
    % if i == 3: 
        <% break %> 
    % endif 
    ${i} 
% endfor 
% for i in xrange(5): 
    % if i == 3: 
        <% continue %> 
    % endif 
    ${i} 
% endfor 
""") 
print t.render() 
```

输出：

```
0 
1 
2 
0 
1 
2 
4 
```

# c# - 从不同的客户端同时插入不同的数据

> ID：11060329
> 
> 赞同：0
> 
> 时间：2012-06-16T02:34:05.447
> 
> 标签：c#, sql-server-2008, linq-to-sql

我用 C# 创建了一个 windows 窗体应用程序和一个数据库`MS SQL server 2008 Express`，我使用`LINQ-to-SQL`查询来插入和编辑数据。

该数据库位于带有`Windows Server 2008 R2 (standard edition)`. 现在我的应用程序在五台不同的计算机上运行，​​并且用户通过活动目录进行身份验证。

向我报告的一项投诉是，有时当输入和提交不同的数据时，相同的数据不会出现在包含应用程序的列表中。我使用 try catch 块发送错误，但应用程序中没有出现错误；但数据只是消失了。

表记录的 id 是一个整数自增。因为我必须告诉他们输入的注册号，所以我使用以下代码：

```
try{
    ConectionDataContext db = new ConectionDataContext();
    Table_Registers tr = new Table_Registers();
    tr.Name=textbox1.text;
    tr.sector=textbox2.text;
    db.Table_Registers.InsertOnSubmit(tr);
    db.SubmitChanges();
    int numberRegister=tr.NumberRegister;
    MessageBox.Show(tr.ToString());
}
catch{Exception e} 
```

我想知道我是否做错了什么，或者您是否知道网络上的任何文章讲述了如何在 MSSQL Server 数据库中插入来自不同客户端的数据，请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T02:47:32.637

这就是数据库服务器所做的*：* “同时从不同的客户端插入数据”。

您可以做的一件事是考虑“交易”：

*   [http://www.sqlteam.com/article/introduction-to-transactions](http://www.sqlteam.com/article/introduction-to-transactions)

您可以（并且应该！）做的另一件事是通过使用“存储过程”确保在服务器上完成尽可能多的工作：

*   [http://www.sql-server-performance.com/2003/stored-procedures-basics/](http://www.sql-server-performance.com/2003/stored-procedures-basics/)

您还应该检查 SQL Server 错误日志，尤其是潜在的死锁。您可以在 SSMS GUI 或 SQL Server 安装下的“日志”目录中查看这些内容。

但是您需要做的*第一*件事是确定到底发生了什么。由于您只有 MSSQL Express（这*不是*生产使用的好选择！），也许最简单的方法是创建一个“日志”表：每次在真正的表，看看东西是否“丢失”（即日志表中的整体比数据表中的多）。

# command-line - 复制不断变化的目录

> ID：11060331
> 
> 赞同：1
> 
> 时间：2012-06-16T02:35:10.300
> 
> 标签：command-line, cron, copy

我正在尝试从安全凸轮程序不断使用的目录中复制文件。要将这些 .jpg 文件存档到另一个 HD，我首先需要复制它们。问题是，随着复制以每秒约 10 .jpgs 的速度进行，目录正在被填充。我可以选择停止程序，复制然后重新启动它，这不是我想做的，原因有很多。或者我可以使用 find/mtime 方法。我尝试了以下方法：

```
find /var/cache/zm/events/* -mmin +5 -exec cp -r {} /media/events_cache/ \; 
```

在正常情况下会起作用。但似乎这些目录也在改变它们的时间戳并在不同的方向分支，所以它永远不会在逻辑上出现，并且由于某种原因，每个目录都非常深，比如 /var/cache/zm/events/../../../ ../../../../001.jpg x 3000。如果可能，我要做的就是通过 cron 使用简单的命令行复制文件和目录。随着目录不断变化，有没有办法在不停止程序的情况下制作这个副本？

任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T06:05:46.023

在这种情况下，rsync 应该是更好的选择，但您需要尝试一下。尝试在流量不那么高的非高峰时段进行设置。

另一种选择是在使用镜像或 RAID 5 的卷上设置目录；这样您就不必担心丢失数据（如果这确实是您的担忧）。

# objective-c - XCODE 工具中的实际内存利用率 Vrs “实时”内存

> ID：11060340
> 
> 赞同：0
> 
> 时间：2012-06-16T02:37:04.847
> 
> 标签：objective-c, xcode, memory-management, image-processing, gpuimage

我们的应用程序使用 GPUImage 框架来处理图像。我们正在使用框架内的几乎所有过滤器和混合模式。我们按照我们应该的方式分配和释放内存。但是，尽管我们的“实时”内存保持在 2.5MB 左右，有时会飙升至 10MB 但又回落至 2.5MB，但毫无疑问，该应用程序在保存大约 13 张使用覆盖或边框的图像后会崩溃。所以，在深入研究这个问题并被它完全愚蠢的时候，我看到了一些“检查活动监视器以了解你的“真实”内存使用情况”的内容。所以我只是发现“真实”内存一直在攀升，直到大约 250MB 真实和 480MB 虚拟应用程序将崩溃。我正在按我应该的方式释放我的内存。

这是我们用来处理图像的代码。这将获取图像，将其发送到第一个过滤器，分配过滤器，处理图像，释放分配的过滤器，然后将处理后的图像发送到下一个过滤器进行处理，具体取决于启用与否的过滤器。如果我在这里做错了什么，我欢迎所有的批评和建议！我不是专业人士！就我而言，处理 13 张 1536 x 2048 大小的图像不会导致应用程序崩溃，如果您正确处理内存的话。非常感谢你提前拯救了我剩下的头发。

吉姆

```
-(id)processFilters{
NSAutoreleasePool *loopPool = [[NSAutoreleasePool alloc] init];
self.previewView.image = [UIImage imageWithContentsOfFile:[self.documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"thumb_%@", self.file]]];
if (sephiaFilterEnabled){
    sephiaFilter = [[GPUImageSepiaFilter alloc] init];
    [(GPUImageSepiaFilter *)sephiaFilter setIntensity:[_filterSephiaSlider value]];
    self.previewView.image = [sephiaFilter imageByFilteringImage:previewView.image];
    [sephiaFilter release];

}
if (saturationFilterEnabled){
    saturationFilter = [[GPUImageSaturationFilter alloc] init];
    [(GPUImageSaturationFilter *)saturationFilter setSaturation:[_filterSaturationSlider value]];
    self.previewView.image = [saturationFilter imageByFilteringImage:previewView.image];
    [saturationFilter release];

}
if (contrastFilterEnabled){
    contrastFilter = [[GPUImageContrastFilter alloc] init];
    [(GPUImageContrastFilter *)contrastFilter setContrast:[_filterContrastSlider value]];
    self.previewView.image = [contrastFilter imageByFilteringImage:previewView.image];
    [contrastFilter release];

}
if (brightnessFilterEnabled){
    brightnessFilter = [[GPUImageBrightnessFilter alloc] init];
    [(GPUImageBrightnessFilter *)brightnessFilter setBrightness:[_filterBrightnessSlider value]];
    self.previewView.image = [brightnessFilter imageByFilteringImage:previewView.image];
    [brightnessFilter release];

}
if (exposureFilterEnabled){
    exposureFilter = [[GPUImageExposureFilter alloc] init];
    [(GPUImageExposureFilter *)exposureFilter setExposure:[_filterExposureSlider value]];
    self.previewView.image = [exposureFilter imageByFilteringImage:previewView.image];
    [exposureFilter release];

}
if (sharpenFilterEnabled){
    sharpenFilter = [[GPUImageSharpenFilter alloc] init];
    [(GPUImageSharpenFilter *)sharpenFilter setSharpness:[_filterSharpenSlider value]];
    self.previewView.image = [sharpenFilter imageByFilteringImage:previewView.image];
    [sharpenFilter release];

}
if (vignetteFilterEnabled){
    vignetteFilter = [[GPUImageVignetteFilter alloc] init];
    [(GPUImageVignetteFilter *)vignetteFilter setVignetteEnd:[_filterVignetteSlider value]];
    self.previewView.image = [vignetteFilter imageByFilteringImage:previewView.image];
    [vignetteFilter release];

}
if (gBlurFilterEnabled){
    if(blurRadialEnabled){
        gBlurFilter = [[GPUImageGaussianSelectiveBlurFilter alloc] init];
        float yy;
        float xx;

        yy = blurToPoint.y / 320;
        xx = blurToPoint.x / 240;

        //NSLog (@"%f   %f", xx, yy);

        if(blurToPoint.x == 0 && blurToPoint.y == 0){
            xx = 0.5;
            yy = 0.5;
        }

        [(GPUImageGaussianSelectiveBlurFilter *)gBlurFilter setExcludeCirclePoint:CGPointMake(xx, yy)];
        [(GPUImageGaussianSelectiveBlurFilter *)gBlurFilter setExcludeCircleRadius:[_filterGBlurSlider value]];
        [(GPUImageGaussianSelectiveBlurFilter *)gBlurFilter setExcludeBlurSize:0.6];
        self.previewView.image = [gBlurFilter imageByFilteringImage:previewView.image];
        [gBlurFilter release];
    }else if(blurBoxEnabled){
        gBlurBoxFilter = [[GPUImageBoxBlurFilter alloc] init];

        self.previewView.image = [gBlurBoxFilter imageByFilteringImage:previewView.image];
        [gBlurBoxFilter release];
    }else if(blurTiltEnabled){
        gBlurTiltFilter = [[GPUImageTiltShiftFilter alloc] init];

        float yy;

        yy = blurToPoint.y / 320;

        if(blurToPoint.y == 0){
            yy = 0.5;
        }

        [(GPUImageTiltShiftFilter *)gBlurTiltFilter setTopFocusLevel:yy - [_filterTiltBlurSlider value]];
        [(GPUImageTiltShiftFilter *)gBlurTiltFilter setBottomFocusLevel:yy + [_filterTiltBlurSlider value]];

        self.previewView.image = [gBlurTiltFilter imageByFilteringImage:previewView.image];
        [gBlurTiltFilter release];
    }

}
if (cropFilterEnabled){
    cropFilter = [[GPUImageCropFilter alloc] init];
    float wBuff = [_filterCropSlider value] * cropToPoint.x;
    float hBuff = [_filterCropSlider value] * cropToPoint.y;

    float xp = cropToPoint.x - wBuff;
    float yp = cropToPoint.y - hBuff;

    float t1 = xp * [_filterCropSlider value];
    float t2 = yp * [_filterCropSlider value];

    xp = xp + (t1 * 4);
    yp = yp + (t2 * 3.5);

    xp = xp / 1000;
    yp = yp / 1000;

    //NSLog(@"%f, x: %f   y: %f   wB: %f   hB: %f", [_filterCropSlider value], xp, yp, wBuff, hBuff);

    [(GPUImageCropFilter *)cropFilter setCropRegion:CGRectMake(xp, yp, [_filterCropSlider value], [_filterCropSlider value])];
    self.previewView.image = [cropFilter imageByFilteringImage:previewView.image];
    [cropFilter release];

}
if (kuwaharaFilterEnabled){
    kuwaharaFilter = [[GPUImageKuwaharaFilter alloc] init];
    [(GPUImageKuwaharaFilter *)kuwaharaFilter setRadius:round([_filterKuwaharaSlider value])];
    self.previewView.image = [kuwaharaFilter imageByFilteringImage:previewView.image];
    [kuwaharaFilter release];

}
if (toonFilterEnabled){
    toonFilter = [[GPUImageToonFilter alloc] init];
    self.previewView.image = [toonFilter imageByFilteringImage:previewView.image];
    [toonFilter release];

}
if (invertFilterEnabled){
    invertFilter = [[GPUImageColorInvertFilter alloc] init];
    self.previewView.image = [invertFilter imageByFilteringImage:previewView.image];
    [invertFilter release];
}
if (pixelFilterEnabled){
    pixelFilter = [[GPUImagePixellateFilter alloc] init];
    [(GPUImagePixellateFilter *)pixelFilter setFractionalWidthOfAPixel:[_filterPixelSlider value]];
    self.previewView.image = [pixelFilter imageByFilteringImage:previewView.image];
    [pixelFilter release];
}
if (gammaFilterEnabled){
    gammaFilter = [[GPUImageGammaFilter alloc] init];
    [(GPUImageGammaFilter *)gammaFilter setGamma:[_filterGammaSlider value]];
    self.previewView.image = [gammaFilter imageByFilteringImage:previewView.image];
    [gammaFilter release];

}
if (sketchFilterEnabled){
    sketchFilter = [[GPUImageSketchFilter alloc] init];
    self.previewView.image = [sketchFilter imageByFilteringImage:previewView.image];
    [sketchFilter release];

}
if (swirlFilterEnabled){
    swirlFilter = [[GPUImageSwirlFilter alloc] init];
    [(GPUImageSwirlFilter *)swirlFilter setAngle:[_filterSwirlSlider value]];
    self.previewView.image = [swirlFilter imageByFilteringImage:previewView.image];
    [swirlFilter release];

}
if (overlayFilterEnabled){
    if (![self.overlayImage compare:@""] == NSOrderedSame){
        GPUImageOutput<GPUImageInput> *overlayFilter;
        if(multiplyBlendEnabled){
            overlayFilter = [[GPUImageMultiplyBlendFilter alloc] init];
        }else if(overlayBlendEnabled){
            overlayFilter = [[GPUImageOverlayBlendFilter alloc] init];
        }else if(lightenBlendEnabled){
            overlayFilter = [[GPUImageLightenBlendFilter alloc] init];
        }else if(darkenBlendEnabled){
            overlayFilter = [[GPUImageDarkenBlendFilter alloc] init];
        }else if(burnBlendEnabled){
            overlayFilter = [[GPUImageColorBurnBlendFilter alloc] init];
        }else if(dodgeBlendEnabled){
            overlayFilter = [[GPUImageColorDodgeBlendFilter alloc] init];
        }else if(screenBlendEnabled){
            overlayFilter = [[GPUImageScreenBlendFilter alloc] init];
        }else if(differenceBlendEnabled){
            overlayFilter = [[GPUImageDifferenceBlendFilter alloc] init];
        }else if(subtractBlendEnabled){
            overlayFilter = [[GPUImageSubtractBlendFilter alloc] init];
        }else if(exclusionBlendEnabled){
            overlayFilter = [[GPUImageExclusionBlendFilter alloc] init];
        }else if(hardLightBlendEnabled){
            overlayFilter = [[GPUImageHardLightBlendFilter alloc] init];
        }else if(softLightBlendEnabled){
            overlayFilter = [[GPUImageSoftLightBlendFilter alloc] init];
        }else{
            overlayFilter = [[GPUImageMultiplyBlendFilter alloc] init];
        }

        UIImage *inputImage = [[[UIImage alloc]init]autorelease];

        // The picture is only used for two-image blend filters
        inputImage = [UIImage imageNamed:[NSString stringWithFormat:@"preview_%@.jpg", self.overlayImage]];

        GPUImagePicture *sourcePreviewPicture = [[GPUImagePicture alloc] initWithImage:inputImage smoothlyScaleOutput:YES];

        [sourcePreviewPicture addTarget:overlayFilter];

        inputImage = [overlayFilter imageByFilteringImage:self.previewView.image];

        if(overlayOpacityFilterEnabled){
            GPUImageOutput<GPUImageInput> *overlayOpacityFilter = [[GPUImageAlphaBlendFilter alloc] init];
            sourcePreviewPicture = [[GPUImagePicture alloc] initWithImage:self.previewView.image smoothlyScaleOutput:YES];
            [sourcePreviewPicture addTarget:overlayOpacityFilter];
            [(GPUImageAlphaBlendFilter *)overlayOpacityFilter setMix:[_filterOverlayOpacitySlider value]];
            inputImage = [overlayOpacityFilter imageByFilteringImage:inputImage];
            [overlayOpacityFilter release];
        }

        self.previewView.image = inputImage;

        [overlayFilter release];
        [sourcePreviewPicture release];
    }
}
if (borderFilterEnabled){
    if (![self.borderImage compare:@""] == NSOrderedSame){
        GPUImageOutput<GPUImageInput> *borderFilter;
        if ([self.borderImage rangeOfString:@"black"].location == NSNotFound) {
            borderFilter = [[GPUImageLightenBlendFilter alloc] init];
        } else {
            borderFilter = [[GPUImageMultiplyBlendFilter alloc] init];
        }

        UIImage *inputImage = [[[UIImage alloc]init]autorelease];

        // The picture is only used for two-image blend filters
        inputImage = [UIImage imageNamed:[NSString stringWithFormat:@"preview_%@.jpg", self.borderImage]];

        GPUImagePicture *sourcePreviewPicture = [[GPUImagePicture alloc] initWithImage:inputImage smoothlyScaleOutput:YES];
        [sourcePreviewPicture addTarget:borderFilter];

        self.previewView.image = [borderFilter     imageByFilteringImage:self.previewView.image];

        [borderFilter release];
        [sourcePreviewPicture release];
    }
}
[loopPool drain];
return self.previewView.image;
} 
```

# parallel-processing - 将一个简单的 C++ 代码片段重写为 CUDA 代码

> ID：11060341
> 
> 赞同：-2
> 
> 时间：2012-06-16T02:37:06.500
> 
> 标签：parallel-processing, cuda

我编写了以下简单的 C++ 代码。

```
#include <iostream>
#include <omp.h>

int main()
{
    int myNumber = 0;
    int numOfHits = 0;

    cout << "Enter my Number Value" << endl;
    cin >> myNumber;

    #pragma omp parallel for reduction(+:numOfHits)

    for(int i = 0; i <= 100000; ++i)
    {
        for(int j = 0; j <= 100000; ++j)
        {
            for(int k = 0; k <= 100000; ++k)
            {
                if(i + j + k == myNumber)
                    numOfHits++;
            }
        }
    }

    cout << "Number of Hits" << numOfHits << endl;

    return 0;
} 
```

如您所见，我使用 OpenMP 来并行化最外层的循环。我想做的是在 CUDA 中重写这个小代码。任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T03:58:12.860

好吧，我可以给你一个快速教程，但我不一定会为你*写完。*

因此，首先，您需要使用 CUDA 设置 MS Visual Studio，这很容易遵循本指南： http: [//www.ademiller.com/blogs/tech/2011/05/visual-studio-2010-and -cuda-更容易使用-rc2/](http://www.ademiller.com/blogs/tech/2011/05/visual-studio-2010-and-cuda-easier-with-rc2/)

现在您将需要阅读 NVIDIA CUDA 编程指南（免费 pdf）、文档和 CUDA 示例（我强烈推荐用于学习 CUDA 的一本书）。

但是，假设您还没有这样做，以后肯定会这样做。

这是一个算术繁重且数据量极少的计算——实际上它可以在没有这种蛮力方法的情况下相当简单地计算出来，但这不是您要寻找的答案。我为内核建议这样的事情：

```
__global__ void kernel(int* myNumber, int* numOfHits){

    //a shared value will be stored on-chip, which is beneficial since this is written to multiple times
    //it is shared by all threads
    __shared__ int s_hits = 0;

    //this identifies the current thread uniquely
    int i = (threadIdx.x + blockIdx.x*blockDim.x);
    int j = (threadIdx.y + blockIdx.y*blockDim.y);
    int k = 0;

    //we increment i and j by an amount equal to the number of threads in one dimension of the block, 16 usually, times the number of blocks in one dimension, which can be quite large (but not 100,000)
    for(; i < 100000; i += blockDim.x*gridDim.x){
        for(; j < 100000; j += blockDim.y*gridDim.y){
                  //Thanks to talonmies for this simplification
               if(0 <= (*myNumber-i-j) && (*myNumber-i-j) < 100000){
                  //you should actually use atomics for this
                 //otherwise, the value may change during the 'read, modify, write' process
                  s_hits++;
               }
        }
    }

    //synchronize threads, so we now s_hits is completely updated
    __syncthreads();

    //again, atomics
    //we make sure only one thread per threadblock actually adds in s_hits
    if(threadIdx.x == 0 && threadIdx.y == 0)
        *numOfHits += s_hits;

    return;
} 
```

要启动内核，你需要这样的东西：

```
dim3 blocks(some_number, some_number, 1); //some_number should be hand-optimized
dim3 threads(16, 16, 1);
kernel<<<blocks, threads>>>(/*args*/); 
```

我知道您可能想要一种快速的方法来做到这一点，但进入 CUDA 并不是一件真正“快速”的事情。如，您需要做一些阅读和一些设置才能使其正常工作；过去，学习曲线并不太高。我还没有告诉你任何关于内存分配的事情，所以你需要这样做（虽然这很简单）。如果您遵循我的代码，我的目标是您必须阅读一些有关共享内存和 CUDA 的内容，因此您已经开始了。祝你好运！

免责声明：我没有测试我的代码，我也不是专家——这可能是愚蠢的。

# c# - 添加多对多实体框架

> ID：11060344
> 
> 赞同：0
> 
> 时间：2012-06-16T02:38:20.883
> 
> 标签：c#, asp.net, entity-framework-4

我有一个问题：

我有 3 张桌子：

1.  用户
2.  菜单
3.  用户菜单

UserMenu 包含 IdMenu 和 IdUser。

在我的 DataModel Entity Framework 4.0 中，我正在填充我的用户模型并用我的表菜单的现有菜单填充 User.Menu（菜单是导航属性）。

我必须在 UserMenu 表中保存用户并保存每个相关的菜单项。

我得到以下异常：

> ObjectStateManager 不包含引用“SGGED.Model.Menu”类型对象的 ObjectStateEntry。

**代码**

```
Users objUser = new Users();

objUser.name = itemUsers.name.Trim();
objUser.email = itemUsers.email.Trim();
objUser.password = Util.HashString("12345");
objUser.effdt = DateTime.Now;

objData.Users.AddObject(objUser);

foreach (var itemMenu in itemUsers.Menu)
{
    objData.ObjectStateManager.ChangeObjectState(itemMenu, EntityState.Unchanged);
}

affRows = objData.SaveChanges(); 
```

处理这个问题的方法是什么？

此致，

米尔顿·卡马拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T03:44:00.340

看看这篇关于多对多关系的帖子：

[与 EF 的多对多关系](http://odetocode.com/Blogs/scott/archive/2012/06/13/many-to-many-relationships-with-ef.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T06:57:24.727

问题很可能是`itemUsers.Menu`您当前的 objData 上下文中不存在其中的项目。这可能是您从另一个上下文对象加载它们，或者它们已在代码中创建但从未添加到 objData.Menus 集中。

# c# - 在 XNA 上读取 XML 文件

> ID：11060345
> 
> 赞同：0
> 
> 时间：2012-06-16T02:38:39.043
> 
> 标签：c#, xna-4.0

嗨，我无法理解这个错误

我想阅读这个 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<XnaContent>
  <Asset Type="ReadXML.Nod[]">
    <Item>
      <coneccion>
        <Item>
          <price>53.6003723</price>
          <startNode>
            <coneccion />
            <position>347 0 228</position>
          </startNode>
          <endNode>
            <coneccion />
            <position>334 0 176</position>
          </endNode>
        </Item>
      </coneccion>
      <position>347 0 228</position>
    </Item>
    <Item>
      <coneccion>
        <Item>
          <price>54.74486</price>
          <startNode>
            <coneccion />
            <position>334 0 176</position>
          </startNode>
          <endNode>
            <coneccion />
            <position>280 0 167</position>
          </endNode>
        </Item>
        <Item>
          <price>53.6003723</price>
          <startNode>
            <coneccion />
            <position>334 0 176</position>
          </startNode>
          <endNode>
            <coneccion />
            <position>347 0 228</position>
          </endNode>
        </Item>
      </coneccion>
      <position>334 0 176</position>
    </Item>
  </Asset>
</XnaContent> 
```

我有这门课供阅读：

```
public class Nod
{
    public List<Coneccion> coneccion;

    public Vector3 position;

    public Nodo(Vector3 p)
    {
        position = p;
        coneccion = new List<Coneccion>();
    }
} 
```

和

```
public class Coneccion
{
    public float price;
    public Nodo startNode;
    public Nodo endNode;

    public Coneccion(Nod c, Nod f, float cost)
    {
        startNode = c;
        endNode = f;
        price = cost;
    }
} 
```

这些类模拟一个图。

我必须阅读这些名为 level.xml 的 xml 文件，并使用这些函数进行阅读

```
Nod[] graph1 = Content.Load<Nod[]>("level.xml"); 
```

但我运行项目并打印下一个错误：

```
Error   1   Building content threw InvalidOperationException: Cannot deserialize type ReadXML.Nod because it does not have a parameterless constructor.
en Microsoft.Xna.Framework.Content.Pipeline.Serialization.Intermediate.ReflectiveSerializer.Deserialize(IntermediateReader input, ContentSerializerAttribute format, Object existingInstance)
en Microsoft.Xna.Framework.Content.Pipeline.Serialization.Intermediate.IntermediateReader.ReadRawObjectInternal[T](ContentSerializerAttribute format, ContentTypeSerializer typeSerializer, Object existingInstance)
en Microsoft.Xna.Framework.Content.Pipeline.Serialization.Intermediate.IntermediateReader.ReadObjectInternal[T](ContentSerializerAttribute format, ContentTypeSerializer typeSerializer, Object existingInstance)
en Microsoft.Xna.Framework.Content.Pipeline.Serialization.Intermediate.CollectionHelper.Deserialize(IntermediateReader input, ContentSerializerAttribute format, Object collection)
en Microsoft.Xna.Framework.Content.Pipeline.Serialization.Intermediate.ArraySerializer`1.Deserialize(IntermediateReader input, ContentSerializerAttribute format, T[] existingInstance)
en Microsoft.Xna.Framework.Content.Pipeline.Serialization.Intermediate.ContentTypeSerializer`1.Deserialize(IntermediateReader input, ContentSerializerAttribute format, Object existingInstance)
en Microsoft.Xna.Framework.Content.Pipeline.Serialization.Intermediate.IntermediateReader.ReadRawObjectInternal[T](ContentSerializerAttribute format, ContentTypeSerializer typeSerializer, Object existingInstance)
en Microsoft.Xna.Framework.Content.Pipeline.Serialization.Intermediate.IntermediateReader.ReadObjectInternal[T](ContentSerializerAttribute format, ContentTypeSerializer typeSerializer, Object existingInstance)
en Microsoft.Xna.Framework.Content.Pipeline.Serialization.Intermediate.IntermediateReader.ReadObject[T](ContentSerializerAttribute format)
en Microsoft.Xna.Framework.Content.Pipeline.Serialization.Intermediate.IntermediateSerializer.Deserialize[T](XmlReader input, String referenceRelocationPath)
en Microsoft.Xna.Framework.Content.Pipeline.XmlImporter.Import(String filename, ContentImporterContext context)
en Microsoft.Xna.Framework.Content.Pipeline.ContentImporter`1.Microsoft.Xna.Framework.Content.Pipeline.IContentImporter.Import(String filename, ContentImporterContext context)
en Microsoft.Xna.Framework.Content.Pipeline.BuildCoordinator.ImportAssetDirectly(BuildItem item, String importerName)
en Microsoft.Xna.Framework.Content.Pipeline.BuildCoordinator.ImportAsset(BuildItem item)
en Microsoft.Xna.Framework.Content.Pipeline.BuildCoordinator.BuildAssetWorker(BuildItem item)
en Microsoft.Xna.Framework.Content.Pipeline.BuildCoordinator.BuildAsset(BuildItem item)
en Microsoft.Xna.Framework.Content.Pipeline.BuildCoordinator.RunTheBuild()
en Microsoft.Xna.Framework.Content.Pipeline.Tasks.BuildContent.RemoteProxy.RunTheBuild(BuildCoordinatorSettings settings, TimestampCache timestampCache, ITaskItem[] sourceAssets, String[]& outputContent, String[]& rebuiltContent, String[]& intermediates, Dictionary`2& dependencyTimestamps, KeyValuePair`2[]& warnings)  C:\Downloads\Bomber-O-Man (Entrega 2)\IAJMovimiento\IAJMovimiento\IAJMovimientoContent\level.xml    IAJMovimiento 
```

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T02:42:33.130

您需要将此代码添加到您的`Nod`或`Nodo`班级（其中一个拼写错误）。

```
public Nodo()
{
    position = Vector3.Zero;
    coneccion = new List<Coneccion>();
} 
```

这是我第一眼看到的，可能还有其他错误。

此外，据我了解，您需要在`ContentTypeWriter`.

# c# - 从 XNA c# 中杀死可执行文件

> ID：11060348
> 
> 赞同：0
> 
> 时间：2012-06-16T02:39:34.470
> 
> 标签：c#, xna

我想知道如何从 xna 中杀死一个可执行文件。我从 xna 调用文件，但是当我尝试关闭它时，它不会。我正在使用 Process.Kill() 方法，我想知道 if 语句是否与此有关。我试图在按 2 时调用 .exe 并在按 3 时关闭它。

这是我到目前为止的代码。

...私人进程你好；……

```
 if (keyboardState.IsKeyDown(Keys.D2) || gamePadState.Buttons.Back == ButtonState.Pressed)
      {
       hello = Process.Start(@"C:\Users\VC\Downloads\On-ScreenKeyboardPortable\On-ScreenKeyboardPortable.exe");

      }

    if (keyboardState.IsKeyDown(Keys.D1) || gamePadState.Buttons.Back == ButtonState.Pressed)
    {
        hello.Kill();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T17:37:31.587

你有没有尝试过这样的事情？

```
Process process = Process.GetProcessesByName("processName");
process.Kill(); 
```

# prolog - 在 Prolog 中将上下文无关语法转换为下推自动机

> ID：11060355
> 
> 赞同：3
> 
> 时间：2012-06-16T02:42:31.137
> 
> 标签：prolog, dcg

我需要从 DCG 形式的上下文无关文法中获取非确定性下推自动机的 delta 函数，并且执行此操作的算法非常简单：

* * *

`A --> B`对于语法中的每条规则，`[q1, lambda, A] --> [B]`向 delta 函数添​​加一个转换。

`E --> c`对于语法中的每条规则，`[q1, c, c] --> [lambda]`向 delta 函数添​​加一个转换。

将转换`[q0, lambda, z0] --> [q1, S*z0]`和添加`[q1, lambda, z0] --> [q2, z0]`到 delta 函数。

每个大写字母都是非终结符，每个小写字母都是终结符。`lambda`是空字符串，`S`是文法的初始符号，`*`是连接运算符，`z0`是栈顶符号。

* * *

这意味着语法

```
S --> A*b | B | y
A --> w*x | x
B --> A*b 
```

使用 delta 函数生成下推自动机

```
[q0, lambda, z0] --> [q1, S*z0]
[q1, lambda, S] --> [q1, A*b]
[q1, lambda, S] --> [q1, B]
[q1, lambda, S] --> [q1, y]
[q1, lambda, A] --> [q1, w*x]
[q1, lambda, A] --> [q1, x]
[q1, lambda, B] --> [q1, A*b]
[q1, b, b] --> [q1, lambda]
[q1, w, w] --> [q1, lambda]
[q1, x, x] --> [q1, lambda]
[q1, y, y] --> [q1, lambda]
[q1, lambda, z0] --> [q2, z0] 
```

我必须在 Prolog 中实现这个算法（从用户那里获取语法并返回 delta 函数），我很困惑，因为这是我第一次使用逻辑编程语言。

我想我可以将语法翻译成它的谓词形式，然后“迭代”所有谓词，并以某种方式将已经“遍历”的谓词添加到一个列表中，这样我就可以处理这个列表并返回 delta 函数。但我认为这是一种非常复杂的命令式做事方式，为此使用 Prolog 毫无意义。

也许这个问题有一个更优雅的解决方案，所以我想知道这样的解决方案是否存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T14:04:04.343

这里有一个可能的编码

```
g2nfa(Grammar, Delta) :-
    maplist(transitions, Grammar, DeltaT),
    append(DeltaT, DeltaF),
    Initial = (q0, lambda, z0 --> q1, 'S'*z0),
    Final = (q1, lambda, z0 --> q2, z0),
    append([[Initial], DeltaF, [Final]], Delta).

transitions(Sym --> Alternatives, Transitions) :-
    phrase(transition(Sym, Alternatives), Transitions).

transition(Sym, A|As) --> state(Sym, A), !, transition(Sym, As).
transition(Sym, A) --> state(Sym, A).
state(Sym, A) --> [(q1, lambda, Sym --> q1, A)].

test :-
    g2nfa([( 'S' --> 'A'*b | 'B' | y ),
           ( 'A' --> w*x | x ),
           ( 'B' --> 'A'*b )
          ], T), maplist(writeln, T). 
```

这似乎满足您的要求

```
?- test.
q0,lambda,z0-->q1,S*z0
q1,lambda,S-->q1,A*b
q1,lambda,S-->q1,B
q1,lambda,S-->q1,y
q1,lambda,A-->q1,w*x
q1,lambda,A-->q1,x
q1,lambda,B-->q1,A*b
q1,lambda,z0-->q2,z0
true. 
```

所以你可以计算出语法细节。请注意，第二个重写规则（*对于语法中的每个规则 E --> c，将转换 [q1, c, c] --> [lambda] 添加到 delta 函数。*）尚未在您的示例中应用。

# git - 在哈德逊使用 git 克隆失败

> ID：11060363
> 
> 赞同：1
> 
> 时间：2012-06-16T02:44:21.060
> 
> 标签：git, hudson

这个问题让我发疯，我试图在 hudson 中集成 Git，但在安装插件（Jenkins GIT 插件 V1.16）并使用 Git 作为 SCM 工具创建作业后，每次我尝试构建此作业时，它都会失败立即，附加错误堆栈跟踪信息如下：

```
Started by user anonymous
Building remotely on William
Checkout:testgit / C:\Hudson\workspace\testgit - hudson.remoting.Channel@78b4c4:William
Using strategy: Default
Checkout:testgit / C:\Hudson\workspace\testgit - hudson.remoting.LocalChannel@167d3c4
Fetching changes from the remote Git repository
Fetching upstream changes from ssh:git@github.com:williamhu1985/robotium.git
ERROR: Problem fetching from origin / origin - could be unavailable. Continuing anyway
ERROR: Could not fetch from any repository
FATAL: Could not fetch from any repository
hudson.plugins.git.GitException: Could not fetch from any repository
    at hudson.plugins.git.GitSCM$2.invoke(GitSCM.java:852)
    at hudson.plugins.git.GitSCM$2.invoke(GitSCM.java:812)
    at hudson.FilePath$FileCallableWrapper.call(FilePath.java:1931)
    at hudson.remoting.UserRequest.perform(UserRequest.java:114)
    at hudson.remoting.UserRequest.perform(UserRequest.java:48)
    at hudson.remoting.Request$2.run(Request.java:270)
    at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at hudson.remoting.Engine$1$1.run(Engine.java:58)
    at java.lang.Thread.run(Unknown Source) 
```

我可以使用 git bash 克隆 repo，但不知道为什么它在 hudson 上失败了，有没有人遇到过这个问题，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T22:28:34.570

> 从 ssh:git@github.com:williamhu1985/robotium.git 获取上游更改

网址错误，应该是：

*   ssh://git@github.com:williamhu1985/robotium.git

或者

*   [https://github.com/williamhu1985/robotium.git](https://github.com/williamhu1985/robotium.git)

# android - 在 GridView 中使用 scrollTo()

> ID：11060367
> 
> 赞同：3
> 
> 时间：2012-06-16T02:44:48.223
> 
> 标签：android, android-gridview, android-scroll

我有一个`GridView`，`Activity`我想`GridView`使用该方法将其滚动到特定位置`scrollTo()`。具体来说，在 中滚动`GridView`by`scrollTo()`和 alert a `Dialog`，在click 中`OnItemClickListener()`滚动回滚。`scrollTo()``PositiveButton`

如果我只是单击 中的项目`GridView`，效果很好，但如果我在`GridView`用手指滚动后单击项目，`GridView`则会滚动到特定位置，然后立即回滚。我不知道为什么或如何处理它。

```
gv.setOnItemClickListener(new OnItemClickListener() 
    { 
        public void onItemClick(AdapterView<?> parent, View v, int position, long id) 
        { 
            gv.scrollTo(0, 200);
            AlertDialog.Builder dilog =new AlertDialog.Builder(MainActivity.this);
            dilog.setPositiveButton("aa", new OnClickListener(){

                public void onClick(DialogInterface dialog, int which) {
                    // TODO Auto-generated method stub
                    gv.scrollTo(0, 0);
                }

            });
            dilog.create().show();
        } 
    }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T15:23:40.513

`GridView`有一些[已知](https://groups.google.com/d/msg/android-developers/Cb94wmekux4/QiM1CydrcMEJ)问题`scrollTo()`。根据您的情况，有一些[解决方法](https://stackoverflow.com/questions/12852413/workarounds-for-gridview-scrollto)，例如调用`smoothScrollToPosition()`或`setSelection()`。

# openid - 登录多个 OpenId

> ID：11060368
> 
> 赞同：0
> 
> 时间：2012-06-16T02:45:12.960
> 
> 标签：openid

我正在设计一个允许用户使用 OpenId（例如 Google）注册的应用程序，这将是用于登录的“主要”ID。该应用程序还将允许用户“链接”其他帐户（例如 Facebook）以获取额外功能的优势。

虽然我很清楚将存储多个帐户之间关系的后端设计（通常只是存储一个额外的 userId-openId-openIdSource 映射），但我想知道如何自动化实际登录的过程。我正在寻找的序列：

1.  使用“主要”帐户（例如 Google）登录。

2.  将用户自动登录到他们的“链接”帐户（例如 Facebook）<--- 如何？

如果用户没有与第 3 方 OpenId 提供商（例如 Facebook）的开放会话，那么我的理解是她每次完成第 1 步后都必须登录到“链接”帐户。有没有办法自动化（没有保存密码）？还是预期并接受第 2 步的手动登录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T08:23:55.497

是的，用户必须手动登录所有其他“链接”帐户，存储他们的密码不是一个好主意，我想也没有用户会喜欢它。

但 OAuth 会为您解决问题。OAuth 将允许您将用户重定向到 facebook 并让他们登录。然后 facebook 会给您一个访问令牌，您可以使用该令牌从 facebook 检索用户信息，在他们的墙上发布等。

因此，使用 OpenID 注册用户，然后使用 OAuth 登录“链接”帐户。

# cakephp - cakephp saveMany 使用 $fieldList （无表单）

> ID：11060372
> 
> 赞同：2
> 
> 时间：2012-06-16T02:46:12.693
> 
> 标签：cakephp

我有这个 $data 数组：（建立在外壳上，而不是表单上）

（在这里调试）

```
array(
(int) 0 => array(
    (int) 0 => 's511013t',
    (int) 1 => 'id3422',
    (int) 2 => '1'
),
(int) 1 => array(
    (int) 0 => 's511013t',
    (int) 1 => 'id3637',
    (int) 2 => '1'
)
) 
```

并使用 saveMany ：

```
$this->Dir->saveMany($data, array( 'validate' => 'false', 'fieldList' => array('name','dir_dataname', 'project_id'))); 
```

保存失败，没有错误。

我不确定我的 $data 数组是否格式正确，（我很困惑它是否应该有另一个级别）我从 sql 选择等构建它。但是它确实包含我需要保存的所有信息，单个模型。

我正在从 Shell 运行所有这些，并且每次只要提供字段名称，它就可以保存一条记录：

```
// this works
$this->Dir->save(array('name' => $data[0][0], 'project_id' => $data[0][2], 'dir_dataname' => $data[0][1])); 
```

已经阅读了保存您的数据，由于我的自定义 $data 格式，我真的很想使用 saveMany 和 fieldList。（我不想在我的 $data 上插入字段名称）。
（没有 sql_dump 显示，因为从 shell 任务中获取它非常麻烦）

我花了整个晚上试图弄清楚，你能给我指出正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T12:15:47.840

恕我直言，每个数组中的键都不是数据库表中的有效字段。它们应该代表与您的表字段相同的名称。当您从 sql 构建数组时，输出应如下所示 - 关联数组：

```
array(
(int) 0 => array(
    (string) name => 's511013t',
    (string) dir_dataname => 'id3422',
    (string) project_id => '1'
),
(int) 1 => array(
    (string) name => 's511013t',
    (string) dir_dataname => 'id3637',
    (string) project_id => '1'
)
) 
```

[Cake2.0文档](http://book.cakephp.org/2.0/en/models/saving-your-data.html#model-saveall-array-data-null-array-options-array)

```
$this->Dir->saveMany($data); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T05:07:35.523

您可以通过以下方式获取日志

```
debug($this->Dir->getDataSource()->getLog()); 
```

看起来好像您使用`fieldList`不正确。`fieldList`是要被列入白名单以保存到数据库的字段列表，而不是您正在使用的“映射”。

您需要`field => value`在数组中为每条记录指定对，而不是数字索引。我可能是错的，但我从未见过，根据文档，它看起来不是那样的。

# ruby-on-rails - 如何在 ruby on rails 中为 rinku auto_link 生成的链接添加标题属性？

> ID：11060375
> 
> 赞同：0
> 
> 时间：2012-06-16T02:46:22.543
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1

这是当前在 auto_html.rb 中的代码

标题需要是动态的，基本上是截断 URL 的完整 URL，其中截断 URL 由 auto_link 生成。

```
AutoHtml.add_filter(:link).with({}) do |text, options|
  attributes = Array(options).reject { |k,v| v.nil? }.map { |k, v| %{#{k}="#{REXML::Text::normalize(v)}"} }.join(' ')

  Rinku.auto_link(text, :all, attributes) do |url|
      url.gsub(/https?:\/\//, "").truncate(25)
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T12:44:56.207

您可以添加其他属性作为传递给第三个参数的字符串的一部分：

```
Rinku.auto_link(text, :all, 'title="my title" target="_blank"') 
```

在您的情况下，您可以将其附加到属性变量：

```
AutoHtml.add_filter(:link).with({}) do |text, options|
  attributes = Array(options).reject { |k,v| v.nil? }.map { |k, v| %{#{k}="#{REXML::Text::normalize(v)}"} }.join(' ')

  attributes += ' title="My title"'

  Rinku.auto_link(text, :all, attributes) do |url|
      url.gsub(/https?:\/\//, "").truncate(25)
  end
end 
```

# c++ - 在不调用复制构造函数的情况下重置对象？

> ID：11060384
> 
> 赞同：1
> 
> 时间：2012-06-16T02:48:05.523
> 
> 标签：c++

我有一个无法复制的对象，一个 NetGame，因为它里面有一个字符串流。

我在课堂上将其声明为：

```
NetGame m_game; 
```

稍后在代码中，我只想重置它，不需要复制任何内容。

```
void ServerTable::setActive( bool active )
{
    //reset for now
    if(m_active && !active)
    {
        m_inProgress = false;
        m_game = NetGame();
    }

    m_active = active;
} 
```

如果每次没有堆重新分配，我该怎么做？

我可以把它变成一个指针，然后简单地新建，每次都删除，但在这种情况下，这不应该是必要的。我没有使用多态性。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T02:59:15.907

免责声明：我认为这个问题没有多大意义。您声称该对象有许多未在构造函数中初始化的字段，这反过来意味着您的代码不会触及这些字段......所以*重置*的定义似乎并不准确。

无论如何，从技术上讲，您可以调用析构函数，然后就地构造：

```
m_game.~NetGame();
new (&m_game) NetGame(); 
```

从技术上讲，如果析构函数没有副作用或者程序不依赖于这种副作用，您甚至不需要调用析构函数......但*如果*您决定遵循这条路径，我无论如何都会调用析构函数。

但我敦促您重新考虑设计并实际提供一个`reset()`成员函数来初始化所有`NetGame`需要重置的成员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T03:05:40.790

您可以为 NetGame 类编写一个重置方法。

```
void NetGame::reset()
{
/*u can just reset the attribute u need*/
} 
```

然后您可以调用 setAcitvity 函数中的方法。

```
void ServerTable::setActive( bool active )
{
    //reset for now
    if(m_active && !active)
    {
        m_inProgress = false;
    }
    m_active.reset();
} 
```

# javascript - 嵌入 Fusion TablesLayer 向导图

> ID：11060386
> 
> 赞同：0
> 
> 时间：2012-06-16T02:48:07.693
> 
> 标签：javascript, html, google-fusion-tables

使用[Fusion LayersTable Wizard](http://fusion-tables-api-samples.googlecode.com/svn/trunk/FusionTablesLayerWizard/src/index.html)和我自己的融合表，我得到以下代码（嵌入在末尾）。它应该是哈利斯科州的地图，顶部有一些 kml 数据层和一个应该充当地图搜索/过滤器的列表框。该向导向我展示了我的数据和地图应该是什么样子的预览，并且在预览中一切正常。但是如果我把html代码作为我本地web服务器的index.html文件，我可以看到地图，但是地图的搜索列表框不起作用。Y 不知道为什么会发生这种情况我真的需要搜索才能工作，但我无法让它在我的服务器中工作。

我真的很感激有人可以帮助我找出代码有什么问题，并帮助我让搜索列表框正常工作。

```
<!DOCTYPE html>
  <html>
    <head>
     <style>
       #map-canvas { width:900px; height:600px; }
     </style>
       <script type="text/javascript"
         src="http://maps.google.com/maps/api/js?sensor=false">
       </script>
    <script type="text/javascript">
      var map;
      var layerl0;
      function initialize() {
      map = new google.maps.Map(document.getElementById('map-canvas'), {
      center: new google.maps.LatLng(20.704738720055598, -103.64501953125),
      zoom: 8
    });
    var style = [
    {
      featureType: 'poi',
      elementType: 'all',
      stylers: [
        { visibility: 'off' }
      ]
    },
    {
      featureType: 'transit',
      elementType: 'all',
      stylers: [
        { visibility: 'off' }
      ]
    }
  ];
  var styledMapType = new google.maps.StyledMapType(style, {
    map: map,
    name: 'Styled Map'
  });
  map.mapTypes.set('map-style', styledMapType);
  map.setMapTypeId('map-style');
  layerl0 = new google.maps.FusionTablesLayer({
    query: {
      select: "'geometry'",
      from: '1UrfZ_tAPsMF9lUHkNWjQREsnbdRSMDKpHftF-rk'
    },
    map: map
  });
}
function changeMapl0() {
  var searchString = document.getElementById('search-string-l0').value.replace(/'/g, "\\'");
  layerl0.setOptions({
    query: {
      select: "'geometry'",
      from: 1UrfZ_tAPsMF9lUHkNWjQREsnbdRSMDKpHftF-rk,
      where: "'name' = '" + searchString + "'"
    }
  });
}
google.maps.event.addDomListener(window, 'load', initialize);
</script>
</head>
<body>
<div id="map-canvas"></div>
<div style="margin-top: 10px;">
  <label>Municipio</label>
  <select id="search-string-l0" onchange="changeMapl0(this.value);">
    <option value="">--Select--</option>
    <option value="TEOCUITATLAN DE CORONA (JAL)">TEOCUITATLAN DE CORONA (JAL)</option>
    <option value="UNION DE SAN ANTONIO (JAL)">UNION DE SAN ANTONIO (JAL)</option>
    <option value="SAN DIEGO DE ALEJANDRIA (JAL)">SAN DIEGO DE ALEJANDRIA (JAL)     </option>
    <option value="GOMEZ FARIAS (JAL)">GOMEZ FARIAS (JAL)</option>
    <option value="TONAYA (JAL)">TONAYA (JAL)</option>
    <option value="TEQUILA (JAL)">TEQUILA (JAL)</option>
    <option value="MANUEL M. DIEGUEZ (JAL)">MANUEL M. DIEGUEZ (JAL)</option>
    <option value="PUERTO VALLARTA (JAL)">PUERTO VALLARTA (JAL)</option>
    <option value="CIUDAD GUZMAN (JAL)">CIUDAD GUZMAN (JAL)</option>
    <option value="IXTLAHUACAN DEL RIO (JAL)">IXTLAHUACAN DEL RIO (JAL)</option>
    <option value="SANTA MARIA DE LOS ANGELES (JAL)">SANTA MARIA DE LOS ANGELES (JAL)</option>
    <option value="TLAJOMULCO DE ZU¾IGA (JAL)">TLAJOMULCO DE ZU¾IGA (JAL)</option>
    <option value="CABO CORRIENTES (JAL)">CABO CORRIENTES (JAL)</option>
    <option value="PONCITLAN (JAL)">PONCITLAN (JAL)</option>
    <option value="VILLA PURIFICACION (JAL)">VILLA PURIFICACION (JAL)</option>
    <option value="VALLE DE JUAREZ (JAL)">VALLE DE JUAREZ (JAL)</option>
    <option value="JOCOTEPEC (JAL)">JOCOTEPEC (JAL)</option>
    <option value="MANZANILLA DE LA PAZ, LA (JAL)">MANZANILLA DE LA PAZ, LA (JAL)</option>
    <option value="JILOTLAN DE LOS DOLORES (JAL)">JILOTLAN DE LOS DOLORES (JAL)</option>
    <option value="CA¾ADAS DE OBREGON (JAL)">CA¾ADAS DE OBREGON (JAL)</option>
    <option value="GRULLO, EL (JAL)">GRULLO, EL (JAL)</option>
    <option value="SAN CRISTOBAL DE LA BARRANCA (JAL)">SAN CRISTOBAL DE LA BARRANCA (JAL)</option>
    <option value="TOLIMAN (JAL)">TOLIMAN (JAL)</option>
    <option value="CUQUIO (JAL)">CUQUIO (JAL)</option>
    <option value="MEZQUITIC (JAL)">MEZQUITIC (JAL)</option>
    <option value="AUTLAN DE NAVARRO (JAL)">AUTLAN DE NAVARRO (JAL)</option>
    <option value="HOSTOTIPAQUILLO (JAL)">HOSTOTIPAQUILLO (JAL)</option>
    <option value="UNION DE TULA (JAL)">UNION DE TULA (JAL)</option>
    <option value="CONCEPCION DE BUENOS AIRES (JAL)">CONCEPCION DE BUENOS AIRES (JAL)</option>
    <option value="SAN MIGUEL EL ALTO (JAL)">SAN MIGUEL EL ALTO (JAL)</option>
    <option value="SALTO, EL (JAL)">SALTO, EL (JAL)</option>
    <option value="JUANACATLAN (JAL)">JUANACATLAN (JAL)</option>
    <option value="JUCHITLAN (JAL)">JUCHITLAN (JAL)</option>
    <option value="CIHUATLAN (JAL)">CIHUATLAN (JAL)</option>
    <option value="ANTONIO ESCOBEDO (JAL)">ANTONIO ESCOBEDO (JAL)</option>
    <option value="DEGOLLADO (JAL)">DEGOLLADO (JAL)</option>
    <option value="LIMON, EL (JAL)">LIMON, EL (JAL)</option>
    <option value="VILLA GUERRERO (JAL)">VILLA GUERRERO (JAL)</option>
    <option value="TECHALUTA DE MONTENEGRO (JAL)">TECHALUTA DE MONTENEGRO (JAL)</option>
    <option value="ZAPOTLANEJO (JAL)">ZAPOTLANEJO (JAL)</option>
    <option value="MASCOTA (JAL)">MASCOTA (JAL)</option>
    <option value="ARANDAS (JAL)">ARANDAS (JAL)</option>
    <option value="TECOLOTLAN (JAL)">TECOLOTLAN (JAL)</option>
    <option value="HUEJUCAR (JAL)">HUEJUCAR (JAL)</option>
    <option value="COLOTLAN (JAL)">COLOTLAN (JAL)</option>
    <option value="JALOSTOTITLAN (JAL)">JALOSTOTITLAN (JAL)</option>
    <option value="CUAUTITLAN (JAL)">CUAUTITLAN (JAL)</option>
    <option value="ZACOALCO DE TORRES (JAL)">ZACOALCO DE TORRES (JAL)</option>
    <option value="JESUS MARIA (JAL)">JESUS MARIA (JAL)</option>
    <option value="SAN MARTIN DE BOLA¾OS (JAL)">SAN MARTIN DE BOLA¾OS (JAL)</option>
    <option value="TENAMAXTLAN (JAL)">TENAMAXTLAN (JAL)</option>
    <option value="TOMATLAN (JAL)">TOMATLAN (JAL)</option>
    <option value="VILLA CORONA (JAL)">VILLA CORONA (JAL)</option>
    <option value="OJUELOS DE JALISCO (JAL)">OJUELOS DE JALISCO (JAL)</option>
    <option value="YAHUALICA DE GONZALEZ GALLO (JAL)">YAHUALICA DE GONZALEZ GALLO (JAL)</option>
    <option value="CHAPALA (JAL)">CHAPALA (JAL)</option>
    <option value="TECALITLAN (JAL)">TECALITLAN (JAL)</option>
    <option value="SAYULA (JAL)">SAYULA (JAL)</option>
    <option value="VALLE DE GUADALUPE (JAL)">VALLE DE GUADALUPE (JAL)</option>
    <option value="CASIMIRO CASTILLO (JAL)">CASIMIRO CASTILLO (JAL)</option>
    <option value="SAN MARTIN HIDALGO (JAL)">SAN MARTIN HIDALGO (JAL)</option>
    <option value="ZAPOTLAN DEL REY (JAL)">ZAPOTLAN DEL REY (JAL)</option>
    <option value="ARENAL (JAL)">ARENAL (JAL)</option>
    <option value="MEXTICACAN (JAL)">MEXTICACAN (JAL)</option>
    <option value="AYOTLAN (JAL)">AYOTLAN (JAL)</option>
    <option value="TAPALPA (JAL)">TAPALPA (JAL)</option>
    <option value="TUXCUECA (JAL)">TUXCUECA (JAL)</option>
    <option value="COCULA (JAL)">COCULA (JAL)</option>
    <option value="AHUALULCO DE MERCADO (JAL)">AHUALULCO DE MERCADO (JAL)</option>
    <option value="MAZAMITLA (JAL)">MAZAMITLA (JAL)</option>
    <option value="IXTLAHUACAN DE LOS MEMBRILLOS (JAL)">IXTLAHUACAN DE LOS MEMBRILLOS (JAL)</option>
    <option value="CHIQUILISTLAN (JAL)">CHIQUILISTLAN (JAL)</option>
    <option value="TEPATITLAN DE MORELOS (JAL)">TEPATITLAN DE MORELOS (JAL)</option>
    <option value="CHIMALTITAN (JAL)">CHIMALTITAN (JAL)</option>
    <option value="SAN MARCOS (JAL)">SAN MARCOS (JAL)</option>
    <option value="SAN JUAN DE LOS LAGOS (JAL)">SAN JUAN DE LOS LAGOS (JAL)</option>
    <option value="QUITUPAN (JAL)">QUITUPAN (JAL)</option>
    <option value="TLAQUEPAQUE (JAL)">TLAQUEPAQUE (JAL)</option>
    <option value="JAMAY (JAL)">JAMAY (JAL)</option>
    <option value="CUAUTLA (JAL)">CUAUTLA (JAL)</option>
    <option value="CIUDAD VENUSTIANO CARRANZA (JAL)">CIUDAD VENUSTIANO CARRANZA (JAL)</option>
    <option value="ETZATLAN (JAL)">ETZATLAN (JAL)</option>
    <option value="TOTATACHE (JAL)">TOTATACHE (JAL)</option>
    <option value="AMECA (JAL)">AMECA (JAL)</option>
    <option value="OCOTLAN (JAL)">OCOTLAN (JAL)</option>
    <option value="MAGDALENA (JAL)">MAGDALENA (JAL)</option>
    <option value="TEUCHITLAN (JAL)">TEUCHITLAN (JAL)</option>
    <option value="EJUTLA (JAL)">EJUTLA (JAL)</option>
    <option value="ATENGUILLO (JAL)">ATENGUILLO (JAL)</option>
    <option value="ZAPOTITLAN DE VADILLO (JAL)">ZAPOTITLAN DE VADILLO (JAL)</option>
    <option value="TEOCALTICHE (JAL)">TEOCALTICHE (JAL)</option>
    <option value="SAN JULIAN (JAL)">SAN JULIAN (JAL)</option>
    <option value="TONALA (JAL)">TONALA (JAL)</option>
    <option value="ZAPOTILTIC (JAL)">ZAPOTILTIC (JAL)</option>
    <option value="ATENGO (JAL)">ATENGO (JAL)</option>
    <option value="ATOYAC (JAL)">ATOYAC (JAL)</option>
    <option value="ZAPOPAN (JAL)">ZAPOPAN (JAL)</option>
    <option value="PIHUAMO (JAL)">PIHUAMO (JAL)</option>
    <option value="HUEJUQUILLA EL ALTO (JAL)">HUEJUQUILLA EL ALTO (JAL)</option>
    <option value="TUXCACUESCO (JAL)">TUXCACUESCO (JAL)</option>
    <option value="BARCA, LA (JAL)">BARCA, LA (JAL)</option>
    <option value="GUACHINANGO (JAL)">GUACHINANGO (JAL)</option>
    <option value="TOTOTLAN (JAL)">TOTOTLAN (JAL)</option>
    <option value="ENCARNACION DE DIAZ (JAL)">ENCARNACION DE DIAZ (JAL)</option>
    <option value="AMACUECA (JAL)">AMACUECA (JAL)</option>
    <option value="ACATLAN DE JUAREZ (JAL)">ACATLAN DE JUAREZ (JAL)</option>
    <option value="VILLA HIDALGO (JAL)">VILLA HIDALGO (JAL)</option>
    <option value="ATOTONILCO EL ALTO (JAL)">ATOTONILCO EL ALTO (JAL)</option>
    <option value="AYUTLA (JAL)">AYUTLA (JAL)</option>
    <option value="ACATIC (JAL)">ACATIC (JAL)</option>
    <option value="SAN SEBASTIAN DEL OESTE (JAL)">SAN SEBASTIAN DEL OESTE (JAL)</option>
    <option value="LAGOS DE MORENO (JAL)">LAGOS DE MORENO (JAL)</option>
    <option value="TONILA (JAL)">TONILA (JAL)</option>
    <option value="AMATITAN (JAL)">AMATITAN (JAL)</option>
    <option value="TALA (JAL)">TALA (JAL)</option>
    <option value="HUERTA, LA (JAL)">HUERTA, LA (JAL)</option>
    <option value="TUXPAN (JAL)">TUXPAN (JAL)</option>
    <option value="BOLAôOS (JAL)">BOLAôOS (JAL)</option>
    <option value="GUADALAJARA (JAL)">GUADALAJARA (JAL)</option>
    <option value="ATEMAJAC DE BRIZUELA (JAL)">ATEMAJAC DE BRIZUELA (JAL)</option>
    <option value="TIZAPAN EL ALTO (JAL)">TIZAPAN EL ALTO (JAL)</option>
    <option value="TALPA DE ALLENDE (JAL)">TALPA DE ALLENDE (JAL)</option>
    <option value="TAMAZULA DE GORDIANO (JAL)">TAMAZULA DE GORDIANO (JAL)</option>
    <option value="MIXTLAN (JAL)">MIXTLAN (JAL)</option>
   </select>
  </div>
 </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T04:52:45.880

你检查你的javascript错误了吗？如果我复制您的 html 页面，我会收到以下 javascript 错误：

消息：预期 '}' 行：53 字符：14 代码：0 URI：file:///C:/Users/Larry/Documents/geocodezip/website/v3_FusionTables_WizOut.html

如果我改变这个：从：1UrfZ_tAPsMF9lUHkNWjQREsnbdRSMDKpHftF-rk，到：从：“1UrfZ_tAPsMF9lUHkNWjQREsnbdRSMDKpHftF-rk”，

我看到一张地图。

# javascript - 网站在 IE9 中运行良好，但在 IE8 中无法加载外部脚本

> ID：11060391
> 
> 赞同：0
> 
> 时间：2012-06-16T02:50:03.957
> 
> 标签：javascript, internet-explorer, internet-explorer-8, socket.io, ie8-compatibility-mode

地点：

[http://www.compassionpit.com/vent](http://www.compassionpit.com/vent)

如果你在 IE9 中去那里，它会很好地加载。然而，如果你在 IE8 兼容模式下访问，它甚至都不会加载——根本就加载不出来。

非常感谢和赞赏任何帮助甚至领导的人。

# python - Django - 渲染模板时文本输入导致奇怪的字符

> ID：11060399
> 
> 赞同：0
> 
> 时间：2012-06-16T02:53:39.173
> 
> 标签：python, django, utf-8

我不确定要搜索什么，所以我希望社区可以为我指明正确的方向。

我的站点中有一个带有文本输入的模型表单。在其中一个输入中，有人复制并粘贴了文本

> 温哥华营销杰出人物鲍勃·雷尼（Bob Rennie）问道：“如果不是泡沫怎么办？

从这个链接 [http://blog.buzzbuzzhome.com/2012/05/vancouver-marketing-bob-rennie-bubble.html](http://blog.buzzbuzzhome.com/2012/05/vancouver-marketing-bob-rennie-bubble.html) 你会注意到引号和撇号有点不同。

对象保存得很好。

当模板呈现输出该字段时出现问题。我有：

> 温哥华营销杰出人物鲍勃·雷尼（Bob Rennie）问 1C 如果 19 年代不是泡沫怎么办？

（注意引号和撇号应该在的**1C**和**19s ）**

我认为这可能是一个 utf-8 问题，但我已经在我的 html 文件的顶部有这个

```
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T03:55:10.627

我认为在您返回响应之前，您应该先对 unicode 字符串进行编码。

```
In [17]: from django.template import Template, Context                                                                                                                   

In [18]: t = Template("{{ text }}")

In [19]: c = Context({'text': 'Vancouver marketing extraordinaire Bob Rennie asks “What if it’s not a bubble?'})                                                         

In [20]: print t.render(c)
Vancouver marketing extraordinaire Bob Rennie asks “What if it’s not a bubble?

In [21]: t.render(c)
Out[21]: u'Vancouver marketing extraordinaire Bob Rennie asks \u201cWhat if it\u2019s not a bubble?' 
```

当我写入`t.render(c).encode('utf-8')`html 文件并添加其他元信息时，它会显示![在此处输入图像描述](../Images/9a8774f54149b2d5e1e58d3a77f4613b.png)

# c - 在 windows visual c++ express 中调用 Free 时出错

> ID：11060407
> 
> 赞同：0
> 
> 时间：2012-06-16T02:55:39.690
> 
> 标签：c, free, corruption

我在一个 cpp 文件中有以下代码，该文件是 Visual c++ 2010 中项目的一部分我不明白为什么对 free 的调用失败。

```
#include <time.h>

#include "stdafx.h"
#include <wchar.h>
#include <stdio.h>
#include <stdlib.h>
#include <Windows.h>

wchar_t * getRandomShortToken(){

    int       i;
    wchar_t * token = 0;

    srand((unsigned int)time(NULL));

    token = (wchar_t*)malloc(sizeof(wchar_t) * 6);
    memset(token, 0, sizeof(wchar_t*) *6);

    for(i = 0; i < 5; i++){

        token[i] = ( rand() % 20 ) + 64;

    }

    return token;

}

int _tmain(int argc, _TCHAR* argv[]){

    wchar_t * token = 0;

    system("pause");

    token = getRandomShortToken();
    printf("My Token is '%ls'\n', token);
    system("pause");
    free(token);

    system("pause");

    return 0;
} 
```

请注意，令牌已正确填充到 printf!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T03:43:59.473

您的代码在此语句中损坏了内存：

```
memset(token, 0, sizeof(wchar_t*) *6); 
```

你可能的意思是：

```
memset(token, 0, sizeof(wchar_t) * 6); 
```

存在语法错误：

```
printf("My Token is '%ls'\n', token); 
```

应该：

```
printf("My Token is '%ls'\n", token); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T03:29:02.423

我认为这可能是因为令牌没有以空值终止，并且当您稍后尝试释放它时，它会尝试访问您没有专门分配的内存。

# json - 即使在解码 URL 之后，node.js 中的 JSON 解析错误

> ID：11060409
> 
> 赞同：1
> 
> 时间：2012-06-16T02:55:47.640
> 
> 标签：json, parsing, node.js

```
data={"convID":"E40E92FD4B410","serverDate":"2012/06/15 07:51:07 PM","masterInfo":{"instance":"808477149_R_BDD72269D1C1E98A32D8C83EC58CF471","appVersion":"0.97.13.D","depth":4,"jsonURL":"//testtn","scenario":"R","serverDate":"2012/06/15 07:51:07 PM ","deviceName":"M’s","localDate":"2012/5/6 11:14:59 AM PDT"}}

JSON.parse(data); 
```

给出一个错误。这是由 JSON.generate 在 ruby​​ 脚本中生成并发送到节点 http 服务器，应用 decodeURIComponent 来获取上面打印的数据。仍然 JSON 解析失败并出现此错误：

```
undefined:1
ate":"2012/06/15
^
SyntaxError: Unexpected token d
at Object.parse (native) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T03:06:51.600

在您的代码示例`data`中是 JS 对象。但是`JSON.parse`将字符串作为其参数，而不是对象。所以你的代码必须是：

```
data='{"convID":"E40E92FD4B410","serverDate":"2012/06/15 07:51:07 PM","masterInfo":{"instance":"808477149_R_BDD72269D1C1E98A32D8C83EC58CF471","appVersion":"0.97.13.D","depth":4,"jsonURL":"//testtn","scenario":"R","serverDate":"2012/06/15 07:51:07 PM ","deviceName":"M’s","localDate":"2012/5/6 11:14:59 AM PDT"}}';

JSON.parse(data); 
```

因此，请检查`data`实际代码中变量的值和类型。

# android - 如何对 android 进行编程以查找特定网络？

> ID：11060414
> 
> 赞同：0
> 
> 时间：2012-06-16T02:56:24.710
> 
> 标签：android, networking, private

我的应用程序只有在校园网络上才能访问校园数据时才有效。在公共 wifi 或 3g 网络上运行应用程序时，应用程序将挂起然后强制关闭。如何对我的应用程序进行编程以检查该专用网络/wifi 或检查 android 当前正在使用什么连接，如果不等于“校园 wifi”那么......？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T03:29:26.207

从你所说的我认为你想强制应用程序只使用 Campus wifi。

所以给你

创建 WifiConfiguration 实例：

```
String networkSSID = "put network SSID here";
String networkPass = "put network password here";

WifiConfiguration conf = new WifiConfiguration();
conf.SSID = "\"" + networkSSID + "\"";   //ssid must be in quotes 
```

然后，对于 WEP 网络，您需要执行以下操作：

```
conf.wepKeys[0] = "\"" + networkPass + "\""; 
conf.wepTxKeyIndex = 0;
conf.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.NONE);
conf.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.WEP40); 
```

对于 WPA 网络，您需要像这样添加密码：

```
conf.preSharedKey = "\""+ networkPass +"\""; 
```

对于开放网络，您需要这样做：

```
conf.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.NONE); 
```

然后，您需要将其添加到 Android wifi 管理器设置：

```
WifiManager wifiManager = (WifiManager)context.getSystemService(Context.WIFI_SERVICE); 
wifiManager.add(conf); 
```

最后，您可能需要启用它，以便 Android 连接到它：

```
List<WifiConfiguration> list = wifiManager.getConfiguredNetworks();
for( WifiConfiguration i : list ) {
    if(i.SSID != null && i.SSID.equals("\"" + networkSSID + "\"")) {
         wm.disconnect();
         wm.enableNetwork(i.networkId, true);
         wm.reconnect();                

         break;
    }           
 } 
```

请注意，在 WEP 的情况下，如果您的密码是十六进制的，则不需要用引号括起来。

# css - 在网络上加载高分辨率图像是否有良好的非阻塞模式？

> ID：11060416
> 
> 赞同：3
> 
> 时间：2012-06-16T02:57:07.533
> 
> 标签：css, performance, high-resolution

我有一个样式表 ( `hi-dpi.css`)，它包含一堆更高分辨率的资产，其中许多是内联的（数据 URI）。但目前它会阻止页面渲染。

解决这个问题的最佳方法是什么？

也许`<link rel=stylesheet>`在页面之后写标签`load`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T03:17:13.390

将此脚本放在头部，它应该加载它而不会阻塞（[测试](http://stevesouders.com/cuzillion/?c0=hc1dtff4_0_f)）。

```
setTimeout(function () {
    var el = document.createElement('link'),
        sc = document.getElementsByTagName('script')[0];
    el.rel = 'stylesheet';
    el.href = 'hi-dpi.css';
    sc.parentNode.insertBefore(el, sc);
}, 30); 
```

如果它太大，您可能必须将其分成几部分，以便并行下载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T03:17:29.593

在我走得更远之前，我不得不问这个问题，但真的有必要在 CSS 中拥有很多“高分辨率资产”吗？我的意思是，也许这只是我，但是......

所以这是我的建议：在“原始样式表”中加载除 data-uri 之外的所有内容（以便页面渲染仍然获得图像大小以及可能声明的其他内容），但在页面末尾有第二个文件表包含所有那里有实际的数据uri。**字面上是页面的最后一个元素**

我不完全确定这会起作用，但它应该有助于缓解问题。

原因是渲染引擎需要知道宽度、CSS 框模型等信息才能正确渲染，但渲染图像往往需要更长的时间来处理图形引擎（这是我的理解）加上我愿意成为文件本身就很大，所以下载需要时间。因此，通过为页面提供所有 CSS box-model 等，它可以进行布局，并在最后加载图像。

您可能想阅读以下内容：http: [//developer.yahoo.com/performance/rules.html](http://developer.yahoo.com/performance/rules.html)

这是我的替代选项：

在当前 CSS 中加载低分辨率图像（以便页面显示某些内容）并在页脚 CSS 中加载高分辨率图像，以便它们*覆盖*低分辨率图像。

# c# - 包含在列表中的 C# 字符串解析

> ID：11060418
> 
> 赞同：1
> 
> 时间：2012-06-16T02:57:18.730
> 
> 标签：c#, list, split

我正在尝试为 c# 创建一个解析系统，以阻止我的程序从位于列表中的“禁止”网站获取图像。我曾尝试使用 bool 类来执行 Regex.Replace 操作，不幸的是它没有成功。

为了详细说明我到底想要什么，这是一个例子：我有一个 List BannedSites = new List { "site" };

```
 if(Bannedsites.Contains(input))
 { 
    Don't go to that site
 }
 else 
 { 
    Go to that site
 } 
```

虽然我最常得到的错误是我在列表中有“站点”，但如果有人在“站点”之后使用空格，它会转到 else 语句，因为它不直接存在于列表中，或者如果有人这样做“地点？” 我们知道网址末尾的问号通常不会影响访问该网站，因此他们再次绕过它。如果输入包含“站点”，是否可以做一些事情，用字符串，让它不去站点。对不起，如果这是一个简单的代码，虽然我无法弄清楚，谷歌也没有帮助。

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T03:00:07.887

您可以使用 LINQ`.Any`来帮助解决这个问题：

```
if(Bannedsites.Any(x => input.Contains(x)) {
    // Don't go to that site
} else {
    // Go to that site
} 
```

请记住`.ToUpperInvariant()`在所有内容上使用以使其不区分大小写。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T03:39:43.380

如果您确保列表中只有域名（可以说是 ips），`Bannedsites`那么您可以只查找域。

要获取 Uri 的域，请执行以下操作：

```
var uri = new Uri("http://stackoverflow.com/questions/11060418/c-sharp-string-parsing-containing-in-a-list");
Console.WriteLine(uri.DnsSafeHost); 
```

输出是：

```
stackoverflow.com 
```

现在你可以让它像这样工作（记得在 Bannedsites 中以大写形式存储）：

```
var uri = new Uri(input)
if(Bannedsites.Contains(uri.DnsSafeHost.ToUpper(CultureInfo.InvariantCulture)))
{
    //Don't go to that site
}
else
{
    //Go to that site
} 
```

这也将确保域不会偶然作为另一个字符串的一部分出现，例如作为参数的一部分。

另请注意，此方法将为您提供子域，因此：

```
var uri = new Uri("http://msdn.microsoft.com/en-US/");
Console.WriteLine(uri.DnsSafeHost); 
```

返回：

```
msdn.microsoft.com 
```

不仅：

```
microsoft.com 
```

* * *

您还可以通过以下方式验证 uri 是否有效`uri.IsWellFormedOriginalString()`：

```
var uri = new Uri(input)
if(uri.IsWellFormedOriginalString() && Bannedsites.Contains(uri.DnsSafeHost))
{
    //Don't go to that site
}
else
{
    //Go to that site
} 
```

* * *

现在，假设您要考虑子域的细节，那么您可以这样做：

```
var uri = new Uri(input)
if(uri.IsWellFormedOriginalString() && Bannedsites.Any(x => uri.DnsSafeHost.EndsWith(x))
{
    // Don't go to that site
}
else
{
    // Go to that site
} 
```

* * *

最后，如果您禁止特定页面而不是整个网络（在这种情况下，关注子域没有意义），那么您可以执行以下操作：

```
var uri = new Uri(input)
if(uri.IsWellFormedOriginalString() && Bannedsites.Contains((uri.DnsSafeHost + uri.AbsolutePath)))
{
    //Don't go to that site
}
else
{
    //Go to that site
} 
```

使用 AbsolutePath 您可以处理那些“？” 和“#”通常用于传递参数，以及不会更改请求页面的任何其他字符。

* * *

您也可以考虑使用 Uri.Compare 并存储 Uri 列表而不是字符串列表。

* * *

正如[RFC 1035](https://www.rfc-editor.org/rfc/rfc1035)所说：“对于作为官方协议一部分的 DNS 的所有部分，字符串（例如，标签、域名等）之间的所有比较都在不区分大小写的方式。”

# c++ - 在 Ubuntu 中获取 CPU 时间？

> ID：11060419
> 
> 赞同：0
> 
> 时间：2012-06-16T02:57:38.140
> 
> 标签：c++, ubuntu-11.10

我有一个关于在 Ubuntu 12.04 上测量 CPU 时间的问题。

我想在某个循环中使用 CPU 时间作为停止标准。什么是最好的方法？

```
while(....)
{
    //main part
    // get CPUTIME
    if(CPUTIME>= Given_Time)
    {
        break;         
    }

} 
```

1）`clock()`如果我不太关心时间的分辨率，我可以使用。

```
time_t begin=clock();
....
time_t end=clock();

CPUTIME=(double)(end-begin)/(double)(CLOCKS_PER_SEC); 
```

然而，`time_t`许多是溢出的，因为运行时间可能很长（超过一个小时）。我该如何解决这个问题？

2）第二个选项是使用`getrusage(int who, struct rusage *usage)` 在循环中调用这个函数是否花费太多？

3）第三个选项是使用`int clock_gettime(clockid_t clk_id, struct timespect *tp)` 到目前为止，这是我的选项中最好的选择。

任何建议和意见都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T04:50:23.563

Depending on how fast your loop is running, you might not want to call the checking function every cycle. Perhaps add a loop counter and check the CPU time only if, for example, `(i % 1000) == 0`.

To answer your question: I'd personally use `clock_gettime(CLOCK_PROCESS_CPUTIME_ID, ...)` because `librt`, the library in which this function resides, was made specifically for tasks like this. However, there's no reason that you can't use the other two; you can easily detect the overflow with `clock()` by detecting when the value wraps and having a separate counter that counts the number of times it wraps.

# database - 巨大的 PostgreSQL 表可能存在的性能问题

> ID：11060421
> 
> 赞同：1
> 
> 时间：2012-06-16T02:57:54.307
> 
> 标签：database, performance, postgresql

我创建的网站有“事件”。事件有标题、日期和相关人员的用户 ID。事件可以是关注某人、创建新帖子等。我正在考虑将所有事件存储在一个表中，但我可以看到它很快变得非常大。

我做对了吗？例如，当我需要在表中搜索与某个用户有关的事件时，这会对系统造成多大的影响？我可以以某种方式优化它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T03:54:11.283

您将在 WHERE 子句中最常使用的列上添加索引，例如，如果您经常选择与某个用户相关的所有事件，则应在 user_id 列上创建索引。

[http://www.postgresql.org/docs/9.1/static/sql-createindex.html](http://www.postgresql.org/docs/9.1/static/sql-createindex.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T04:01:57.883

只要该表中的数据是[规范化](http://en.wikipedia.org/wiki/Database_normalization)的，就应该没问题。如果您发现对该表的读取查询速度变慢，您可以为某些列添加索引，但您应该记住，这会减慢对该表的写入速度。

如果你发现性能太慢，你可以切换到使用一些对大表进行了更好优化的[NoSQL](http://en.wikipedia.org/wiki/NoSQL)数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T19:34:15.163

如果表真的很大，您可以使用分区： [http](http://www.postgresql.org/docs/9.1/static/ddl-partitioning.html) ://www.postgresql.org/docs/9.1/static/ddl-partitioning.html 但您必须选择一个好的分区键 - 好的候选者是：

*   事件时间戳
*   事件类型
*   用户身份

# matlab - matlab 有 matlabrc 文件吗？

> ID：11060426
> 
> 赞同：8
> 
> 时间：2012-06-16T02:59:17.593
> 
> 标签：matlab, path, startup, rc

今天偶然发现了这个话题：

[http://www.mathworks.com/matlabcentral/newsreader/view_thread/112560](http://www.mathworks.com/matlabcentral/newsreader/view_thread/112560)

问题基本上是如何让 Matlab 读取您的 startup.m 文件，而不管您在哪里开始您的 matlab 会话。

提供的解决方案之一是：

> 一种解决方案是要求系统管理员在“matlabrc.m”中添加几行，将用户主目录中的一些预先确定的文件夹添加到 MATLAB 路径（例如，~/.matlabstart）。然后每个用户都可以在此文件夹中拥有自己的“startup.m”文件。

我最终在我的系统（OS X）中做的是在以下位置添加一个 startup.m 文件：

```
/Applications/MATLAB_R2011a.app/toolbox/local/ 
```

在这个 startup.m 文件中，我添加了：

```
if exist([getenv('HOME') '/.matlabrc/startup.m'])
    run([getenv('HOME') '/.matlabrc/startup.m']);
end 
```

这样用户就可以选择创建隐藏文件夹`~/.matlabrc`并在其中放置文件`startup.m`。在这个启动文件中，他们可以告诉 matlab 每当他们启动 Matlab 时要执行什么，而不管他们启动它的目录是什么。我添加到自己的个人`startup.m`文件中的一个例子是

```
addpath(genpath('/Users/jmlopez/matlabcode/')) 
```

现在我可以在该目录中添加尽可能多的文件夹，并且每次我自动启动 Matlab 时，所有文件夹都将添加到路径中，而无需修改路径。

问题是：Matlab 是否已经提供了一个像我创建的那样的特殊文件，还是我只是经历了所有这些麻烦来完成我想要的？如果答案是我给出的第二个选项，那么为什么 Matlab 不提供这个呢？每当您没有管理员权限并且我不想将我的`startup.m`文件带到我去的每个目录时，将目录添加到 Matlab 路径是一件非常痛苦的事情。有人可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-16T17:37:35.097

您可以将 pathdef 文件（存储您添加的所有路径）保存到自定义目录。然而问题是，当 matlab 启动时，它不会自动知道您在上一个会话中使用了哪个自定义目录。

但这就是 MATLABPATH 环境变量的用武之地。因为这允许您自己设置 matlab 起始路径。在 linux 中，这只需在启动 matlab 之前设置此环境变量 MATLABPATH 即可完成（从终端 / 在您的 .bashrc / ...）

```
export MATLABPATH=$HOME/.matlab 
```

这样就可以让所有用户都有自己的pathdef文件，解决了启动时必须手动添加的问题。

## 编辑

我测试了添加`startup.m`到该 MATLABPATH 目录是否有效，即：matlab 是否运行该启动文件？......确实如此。我认为它对您不起作用，因为在其他（更高优先级）目录（可能`matlabroot`）中有另一个 startup.m 文件，因此优先。我唯一的启动文件在 MATLABPATH 中，所以只有一个选择。

## 编辑2

不，我将启动添加到 matlabroot 目录，并且我自己在 .matlab 中的启动文件仍然可以运行。您确定在启动 matlab 之前正确设置了 MATLABPATH 吗？

# visual-studio - 在 Visual Studio 中设置京都内阁

> ID：11060427
> 
> 赞同：5
> 
> 时间：2012-06-16T02:59:32.530
> 
> 标签：visual-studio, installation, kyotocabinet

我正在尝试在 Visual Studio (VC++) 中设置京都内阁。我添加了源文件和静态库kyotocabinet.lib

但是，它给了我一个链接错误 LINK2005 默认情况下，该库是使用链接到`LIBCMT.LIB' by the`/MT' 选项构建的。我还尝试使用 `/MD' 选项重建库。我仍然无法做到。

有人尝试在 Visual Studio 中使用它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T18:52:05.827

我找到了解决方案。我们只需要在 Visual Studio 中创建一个新的空 C++ 项目。[添加来自Kyoto Cabinet Win32 Package](http://fallabs.com/kyotocabinet/winpkg/ "Kyoto Cabinet Win32 Package")的头文件和静态库

将运行时库从 Properties -> Configuration Properties -> Code Generation 设置为 [/MT]

# c - c & gcc : 堆栈增长和对齐 - 用于 64 位机器

> ID：11060429
> 
> 赞同：9
> 
> 时间：2012-06-16T02:59:56.923
> 
> 标签：c, linux, gcc

我有以下程序。我想知道为什么它在下面的 64 位机器上输出 -4？我的哪个假设出错了？

> [Linux ubuntu 3.2.0-23-generic #36-Ubuntu SMP Tue Apr 10 20:39:51 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux]

1.  在上面的机器和 gcc 编译器中，默认情况下应该先推送 b，然后再推送。堆栈向下增长。所以 b 应该有更高的地址，而 a 应该有更低的地址。所以结果应该是积极的。但我得到-4。有人可以解释一下吗？

2.  参数是占用堆栈帧中 2 个字节的两个字符。但是我看到差异为 4，而我期望为 1。即使有人说这是因为对齐，那么我想知道具有 2 个字符的结构在 4 个字节处未对齐。

> ```
> #include <stdio.h>
> #include <stdlib.h>
> #include <unistd.h>
> 
> void CompareAddress(char a, char b)
> {
>     printf("Differs=%ld\n", (intptr_t )&b - (intptr_t )&a);
> }
> 
> int main()
> {
>     CompareAddress('a','b');
>     return 0; 
> }
> 
> /* Differs= -4 */ 
> ```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-16T03:07:20.353

这是我的猜测：

在 x64 的 Linux 上，[调用约定](http://en.wikipedia.org/wiki/X86_calling_conventions)规定前几个参数通过寄存器传递。

因此，在您的情况下，两者`a`和`b`都通过寄存器而不是堆栈传递。但是，由于您获取了它的地址，因此编译器将在调用函数***后将其存储在堆栈中的某个位置。***
（在向下的顺序中不需要。）

该函数也有可能是完全内联的。

在任何一种情况下，编译器都会创建临时堆栈空间来存储变量。这些可以按任何顺序排列并进行优化。因此，它们可能不是您所期望的任何特定顺序。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-16T03:40:50.257

回答这类问题（关于特定平台上特定编译器的行为）的最佳方法是查看汇编程序。你可以`gcc`通过传递`-S`标志来转储它的汇编程序（`-fverbose-asm`标志也很好）。跑步

```
gcc -S -fverbose-asm file.c 
```

给出一个`file.s`看起来有点像（我已经删除了所有不相关的位，括号中的位是我的笔记）：

```
CompareAddress:
        # ("allocate" memory on the stack for local variables)
        subq    $16, %rsp       
        # (put a and b onto the stack)
        movl    %edi, %edx      # a, tmp62
        movl    %esi, %eax      # b, tmp63
        movb    %dl, -4(%rbp)   # tmp62, a
        movb    %al, -8(%rbp)   # tmp63, b 
        # (get their addresses)
        leaq    -8(%rbp), %rdx  #, b.0
        leaq    -4(%rbp), %rax  #, a.1
        subq    %rax, %rdx      # a.1, D.4597 (&b - &a)
        # (set up the parameters for the printf call)
        movl    $.LC0, %eax     #, D.4598
        movq    %rdx, %rsi      # D.4597,
        movq    %rax, %rdi      # D.4598,
        movl    $0, %eax        #,
        call    printf  #

main:
        # (put 'a' and 'b' into the registers for the function call)
        movl    $98, %esi       #,
        movl    $97, %edi       #,
        call    CompareAddress 
```

（[这个问题](https://stackoverflow.com/questions/1395591/what-is-exactly-the-base-pointer-and-stack-pointer-to-what-do-they-point)很好地解释了什么`[re]bp`和`[re]sp`是。）

差异为负的原因是堆栈向下增长：即，如果您将两个东西压入堆栈，则您首先压入的一个将具有更大的地址，并且`a`在之前被压入`b`。

原因是编译器决定将参数与 4 字节边界对齐是“更好的”，这可能是因为 32 位/64 位 CPU 一次处理 4 个字节比处理单个字节要好`-4`。`-1`

（此外，查看汇编程序显示了它的效果`-mpreferred-stack-boundary`：它本质上意味着堆栈上的内存被分配在不同大小的块中。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T03:28:57.297

我认为程序给你的答案是正确的，GCC的默认preferred-stack-boundary是4，你可以设置`-mpreferred-stack-boundary=num`GCC选项来改变堆栈边界，然后程序会根据你的设置给你不同的答案。

# c - 编译 csapp.c 和 csapp.h

> ID：11060434
> 
> 赞同：0
> 
> 时间：2012-06-16T03:01:13.230
> 
> 标签：c, multithreading, sockets, unix, header

我正在尝试在 Ubuntu 12 操作系统上编译文件[csapp.c](http://www.ece.cmu.edu/~ece845/sp02/csapp.c)和[csapp.h 。](http://www.ece.cmu.edu/~ece845/sp02/csapp.h)我想我缺少一些头文件或一些选项，但我不知道是哪一个。或者也许我没有最新的 gcc。这是我的Makefile：

```
SRC = tiny.c
LIB = csapp.c
INC = csapp.h

ALL = $(SRC) $(LIB) $(INC)

webServer-gcc : $(ALL)
    gcc -std=c99 -O2 -lpthread -lrt -o server $(ALL) 
```

这是我从终端输出的错误：

```
csapp.c: In function ‘Kill’:
csapp.c:81:5: warning: implicit declaration of function ‘kill’ [-Wimplicit-function-    declaration]
csapp.c: In function ‘Signal’:
csapp.c:124:22: error: storage size of ‘action’ isn’t known
csapp.c:124:30: error: storage size of ‘old_action’ isn’t known
csapp.c:127:5: warning: implicit declaration of function ‘sigemptyset’ [-Wimplicit-  function-declaration]
csapp.c:128:23: error: ‘SA_RESTART’ undeclared (first use in this function)
csapp.c:128:23: note: each undeclared identifier is reported only once for each    function it appears in
csapp.c:130:5: warning: implicit declaration of function ‘sigaction’ [-Wimplicit-function-declaration]
csapp.c: In function ‘Sigprocmask’:
csapp.c:138:5: warning: implicit declaration of function ‘sigprocmask’ [-Wimplicit-function-declaration]
csapp.c: In function ‘Sigfillset’:
csapp.c:152:5: warning: implicit declaration of function ‘sigfillset’ [-Wimplicit-function-declaration]
csapp.c: In function ‘Sigaddset’:
csapp.c:159:5: warning: implicit declaration of function ‘sigaddset’ [-Wimplicit-function-declaration]
csapp.c: In function ‘Sigdelset’:
csapp.c:166:5: warning: implicit declaration of function ‘sigdelset’ [-Wimplicit-function-declaration]
csapp.c: In function ‘Sigismember’:
csapp.c:174:5: warning: implicit declaration of function ‘sigismember’ [-Wimplicit-function-declaration]
csapp.c: In function ‘Fdopen’:
csapp.c:326:5: warning: implicit declaration of function ‘fdopen’ [-Wimplicit-function-declaration]
csapp.c:326:13: warning: assignment makes pointer from integer without a cast [enabled by default]
csapp.c: In function ‘open_clientfd’:
csapp.c:741:5: warning: implicit declaration of function ‘bzero’ [-Wimplicit-function-declaration]
csapp.c:743:5: warning: implicit declaration of function ‘bcopy’ [-Wimplicit-function-declaration]
make: *** [webServer-gcc] Error 1 
```

这是我的主要功能中最后剩下的错误：

```
tiny.c:23:24: error: storage size of ‘clientaddr’ isn’t known 
```

这是我的代码的第 23 行：

```
 struct socketaddr_in clientaddr; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T04:14:49.020

使用`-std=gnu99`，看这个[链接](http://forums.debian.net/viewtopic.php?t=6408)。我为你写了一个新`Makefile`的，希望这可以帮助你。

```
CC = gcc
LIBS = -lpthread  -lrt
INCS = -I./
CCFLAGS = -std=gnu99 -O2

all: server
server: csapp.o tiny.c
        $(CC) $(CCFLAGS) $^ -o $@  $(LIBS) $(INCS)
csapp.o: csapp.c csapp.h
        $(CC) $(CCFLAGS) -c $< -o $@  $(INCS)

clean:
        rm -f server csapp.o 
```

# python - 使用 PyQt 和 QWebview 填写表格

> ID：11060439
> 
> 赞同：8
> 
> 时间：2012-06-16T03:02:07.813
> 
> 标签：python, pyqt, screen-scraping, qtwebkit, qwebview

我想使用 PyQt/QWebview 1）加载特定的 url，2）在表单中输入信息，3）单击按钮/链接。机械化不起作用，因为我需要一个实际的浏览器。

这是我的代码：

```
import sys
from PyQt4.QtCore import *
from PyQt4.QtGui import *
from PyQt4.QtWebKit import *
from PyQt4 import QtCore

app = QApplication(sys.argv)
web = QWebView()
web.load(QUrl("https://www.lendingclub.com/account/gotoLogin.action"))

def fillForm():
    doc = web.page().mainFrame().documentElement()
    user = doc.findFirst("input[id=master_username]")
    passwd = doc.findFirst("input[id=master_password]")

    user.setAttribute("value", "email@email.com")
    passwd.setAttribute("value", "password")

    button = doc.findFirst("input[id=master_sign-in-submit]")
    button.evaluateJavaScript("click()")

QtCore.QObject.connect(web, QtCore.SIGNAL("loadFinished"), fillForm)
web.show()
sys.exit(app.exec_()) 
```

页面加载正确，但未输入任何输入且未提交表单。有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T12:06:25.980

这帮助我使它工作：

```
user.setAttribute("value", "email@email.com")
-->
user.evaluateJavaScript("this.value = 'email@email.com'") 
```

属性和属性是不同的东西。

另一个修复：

```
click() --> this.click() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-07-18T23:27:03.780

对于希望使用 PyQt5 执行此操作的任何人，此示例可能会有所帮助，因为有几件事发生了变化。显然javascript需要根据网站的内容进行调整。

```
import os
import sys
from PyQt5.QtWidgets import QApplication, QVBoxLayout, QWidget
from PyQt5.QtCore import QUrl, QEventLoop
from PyQt5.QtWebEngineWidgets import QWebEngineView

class WebPage(QWebEngineView):
    def __init__(self):
        QWebEngineView.__init__(self)
        self.load(QUrl("https://www.url.com"))
        self.loadFinished.connect(self._on_load_finished)

    def _on_load_finished(self):
        print("Finished Loading")
        self.page().toHtml(self.Callable)

    def Callable(self, html_str):
        self.html = html_str
        self.page().runJavaScript("document.getElementsByName('loginid')[0].value = 'email@email.com'")
        self.page().runJavaScript("document.getElementsByName('password')[0].value = 'test'")
        self.page().runJavaScript ("document.getElementById('signin').click()")

if __name__ == "__main__":
    app = QApplication(sys.argv)
    web = WebPage()
    web.show()
    sys.exit(app.exec_())  # only need one app, one running event loop 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T11:18:50.237

您可能可以使用 Webkit/QWebView 来做到这一点，但是使用 selenium 怎么样：[http](http://code.google.com/p/selenium/) ://code.google.com/p/selenium/ ？它专为这种浏览器自动化而设计，并具有很好的 python 绑定。

# javascript - 您如何在大型应用程序中管理 tabindex？

> ID：11060441
> 
> 赞同：5
> 
> 时间：2012-06-16T03:02:34.603
> 
> 标签：javascript, html

我的任务是在界面中包含大量表单元素的站点上实现 tabindex。使用ajax更新大部分ui的复杂页面中可以使用哪些策略来管理tabindex？您是否只是遍历所有 html 直到组织好 tabindex？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T16:24:26.813

从我的角度来看，最好的方法是调用 JS 函数`$(document).ready()`或类似的东西。因为你有足够的时间来做这件事，而且它不是视觉的。

# iphone - 透明的 UITabBarController 在后台具有可变视图

> ID：11060442
> 
> 赞同：2
> 
> 时间：2012-06-16T03:02:42.397
> 
> 标签：iphone, objective-c, ios, uiview, uitabbarcontroller

我想要一个`UITabBarController`，它的 alpha 为 0.5，它的透明度允许您在背景中看到一个视图。背景视图必须是可访问和可更改的。

我可以使用这种技术添加背景：[https ://gist.github.com/1157542](https://gist.github.com/1157542)

它向`Category`中添加子视图`UITabBarController`，并将子视图发送到后面。但是，因为它是一个类别，所以我不能使子视图成为一个属性。所以我无法真正访问它。

有没有办法让这个背景视图更加灵活和易于访问？所以我可以，例如，从任何标签栏控制器的视图控制器轻松地向它添加其他子视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T03:41:48.867

而不是类别，您应该`subclass` `UITabBarController`. 这将允许您更好地控制对象。这是一个子类的例子。

```
// MPCustomTabBar.h
@interface MPCustomTabBar : UITabBarController
- (void) setBackgroundImage:(UIImage *)image;
@end

// MPCustomTabBar.m
@interface MPCustomTabBar

- (void) setBackgroundImage:(UIImage *)image  {
UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(0,0,320,480)];
imageView.backgroundColor = [UIColor colorWithPatternImage:i];  
[[self view] addSubview:imageView];
[[self view] sendSubviewToBack:imageView];
[[self view] setOpaque:NO];
[[self view] setBackgroundColor:[UIColor clearColor]];
[imageView release];
}

@end 
```

现在你可以做所有你想要的自定义，分配和初始化你的新子类，如下所示：

```
MPCustomTabBar *bar = [[MPCustomTabBar alloc] init]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T06:03:36.713

我的问题的解决方案可能只是这个..

在我的 AppDelegate 中，就在之前`[self.window makeKeyAndVisible];`

```
self.theImage = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"image1.png"]];
[self.tabBarController.view insertSubview:self.theImage atIndex:0]; 
```

然后，我可以在任何选项卡栏控制器的视图控制器中轻松更改此图像，例如：

```
AppDelegate *appDelegate= (AppDelegate *)[[UIApplication sharedApplication] delegate];
appDelegate.theImage.image = [UIImage imageNamed:@"image2.png"]; 
```

..不需要类别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-26T19:42:27.380

Here's what worked for me:

1.  Make TabBar transparent (either by Storyboard or programmatically) by setting the Tint- and Background to Clear Color and Opaque to No.

2.  The black background color is actually the window's colour. Assign the image you want to use as the background to the window itself:

    UIImage *i = [UIImage imageNamed:@"main_background.png"]; UIColor *c = [[UIColor alloc] initWithPatternImage:i]; [self.window setBackgroundColor:c];

# javascript - for循环中对象中每个键的返回值

> ID：11060444
> 
> 赞同：0
> 
> 时间：2012-06-16T03:04:59.413
> 
> 标签：javascript, arrays, object, key-value

我有一个对象和一个数组：

```
m = { "1": ["2", "3"], "6": ["4", "5"] };
var p = ["1", "6"]; 
```

我有一个 for 循环：

```
for (var i = 0; i < p.length; i++) {
    // Return an array that is the value of a key in m, for each key specified in p
    var array = m[p[i]]; 

    // do stuff with array
} 
```

以上不起作用的任何原因？数组仍在`undefined`for 循环运行之后。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T03:12:55.870

我也觉得`p`应该`[1,6]`也是？由于您使用它来引用 object 中的键`m`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T03:05:56.547

发生错误是因为您有以下声明：

```
var p = ["1","2"]; 
```

但是`m`属性是：

```
m = {
    "1": [2,3],
    "6": [4,5]
} 
```

所以 in`p[1]`让你的程序被读取`m["2"]`，但它没有“2”属性。请改用此代码：

```
var p = ["1","6"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T03:19:03.497

你的声明 `m = { "1": ["2", "3"], "6", ["4", "5"] };`给我带来了语法错误。我假设你的意思是`m = { "1": ["2", "3"], "6": ["4", "5"] };`。

`p.length`是 2，所以你有 2 次循环迭代。在您的表达式的第一次迭代值是：

```
i = 0
p[i] = "1"
m[p[i]] = m["1"] = ["2", "3"] 
```

在第二个循环中：

```
i = 1
p[i] = "2"
m[p[i]] = m["2"] (undefined) 
```

你只有`m["1"]`和`m["6"]`，没有`m["2"]`。这就是为什么`array`在最后一次迭代中未定义。所以在循环之后它仍然是未定义的。

您可以更正`m`声明如下：

```
m = { "1": ["2", "3"], "2": ["4", "5"] }; 
```

现在你会`array = ["4", "5"]`在循环之后。

我可以建议您不要将整数存储在字符串中。使用`2`而不是`"2"`. 否则将来可能会导致错误。例如，`2 + 2 = 4`和`"2" + "2" = "22"`。如果您有`"2"`其他代码，请使用`parseInt`将其转换为普通数字。

此外，您不必`p`使用键列表创建变量。您可以简单地使用`for..in`循环来遍历对象的键：

```
m = { 1: [2, 3], 2: [4, 5] };
for(i in m) {
  var array = m[i];
  //do stuff
} 
```

请记住，这`for..in`并不能保证保留键的顺序。但是，所有现有的实现`for..in`都保留了顺序。

# html - 填充不移动我的标志

> ID：11060452
> 
> 赞同：1
> 
> 时间：2012-06-16T03:08:15.187
> 
> 标签：html, css

我有一个使用背景图像（css sprite）的徽标链接。一切正常，但是当我尝试在链接顶部添加 20px 填充（为用户单击链接提供更多空间）时，背景图像不会向下移动。这是我的CSS：

```
a {
    background-image:url("sprite.png");
    background-repeat:no-repeat;
    display:block;
    height:70px;
    width:70px;
    padding-top:20px; /* give top of the link more click space */
} 
```

还有我的html：

```
<a href="#" style="background-position:0 0;"></a> 
```

我究竟做错了什么？
编辑：我认为你们错过了最初的目标。我的目标是给 logo 链接更多的点击空间。如果我使用边距，则元素链接会被向下推，这不会像我最初想要的那样提供更多的点击空间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T03:09:46.060

填充不会影响背景图像。要影响链接的点击区域，请添加填充，然后将背景 y 偏移量更改相同的量，即：

```
a
{
    padding-top: 10px;
    background-position: 0px 10px;
} 
```

这是一个演示行为的[小提琴](http://jsfiddle.net/hYMER/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T03:10:39.900

尝试使用 margin 属性

```
 margin-top:20px 
```

# php - PHP 的 fopen 最终失败

> ID：11060453
> 
> 赞同：1
> 
> 时间：2012-06-16T03:08:19.943
> 
> 标签：php, fopen

好的，我必须在这里遗漏一些完全基本的东西。我对 PHP 的 fopen 函数有一个非常简单的使用，但是由于某种原因，无论我做什么它都不会打开文件。

奇怪的是，我在同一个脚本的另一个函数中使用了 fopen 并且它运行良好。我在这两个函数中都使用了 fclose。所以，我知道这不是流氓文件句柄的问题。

我已经确认了文件的路径和目标文件的存在。

我以 root 身份在命令行运行脚本，所以我知道原因不是 apache。而且由于我以 root 身份运行脚本，因此我相当有信心权限不是问题。

那么，我到底在这里想念什么？

```
function get_file_list() {
  $file = '/home/site/tmp/return_files_list.txt';
  $fp = fopen($file, 'r') or die("Could not open file: /home/site/tmp/return_files_list.txt for reading.\n");
  $files_list = array();
  while($line = fgets($fp)) {
    $files_list[] = $line;
  }
  fclose($fp);
  return $files_list;
}

function num_records_in_file($filename) {
  $fp = fopen( $filename, 'r' ); # or die("Could not open file: $filename\n");
  $counter = 0;

  if ($fp) {
    while (!feof( $fp )) {
      $line = fgets( $fp );
      $arr = explode( '|', $line );

      if (( ( $arr[0] != 'HDR' && $arr[0] != 'TRL' ) && $arr[0] != '' )) {
        ++$counter;
        continue;
      }
    }
  }

  fclose( $fp );
  return $counter;
} 
```

根据要求，这是两个功能。第二个函数传递一个文件的绝对路径。这就是我用来确认文件存在并且路径正确的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T03:32:22.693

哇！嗯，我想通了。一时兴起，我决定尝试修剪文件名。显然，它在文件名的末尾带有一些空格或其他东西。所以，当它试图打开文件时，它不能因为寻找 $filename +

每天都学点新东西，我猜。

# bash - 一个可以让调用者返回的函数

> ID：11060454
> 
> 赞同：0
> 
> 时间：2012-06-16T03:08:39.627
> 
> 标签：bash

我正在写一些 BASH 脚本，我希望它有一些错误处理机制：

```
function f()
{
  command1 || { echo "command1 failed"; return 1; }
  command2 || { echo "command2 failed"; return 1; }
  command3 || { echo "command3 failed"; return 1; }
  command4 || { echo "command4 failed"; return 1; }
} 
```

我想通过定义一些函数来使这种重复结构更具可读性：

```
function print_and_return()
{
  echo "$@"
  # some way to exit the caller function
} 
```

这样我就可以将函数编写`f`为

```
function f()
{
  command1 || print_and_return "command1 failed"
  command2 || print_and_return "command2 failed"
  command3 || print_and_return "command3 failed"
  command4 || print_and_return "command4 failed"
} 
```

实现这一目标的最佳方法是什么？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T04:48:31.923

### 问题

你想要：

1.  稍微完善一下您的代码。
2.  稍微干燥一下代码。
3.  在命令第一次失败时停止执行。

### 一种可能的解决方案

你可以重构你的代码。例如：

```
print_and_return() {
  echo "command failed: $@" >&2
  return 1
}

commands=("cmd1" "cmd2" "cmd3" "cmd4")

for cmd in "${commands[@]}"; do
    { $cmd || print_and_return "$cmd"; } || break
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T07:31:53.983

也许你可以使用`set -e`，但你必须小心，因为它退出了外壳：

```
function f()
{
    (
    set -e
    command1
    command2
    command3
    command4
    )
} 
```

只要命令诊断出任何问题，当第一个命令失败时，此功能就会停止。

测试版：

```
function f()
{
    (
    set -e
    true
    echo true
    true
    echo true
    false
    echo false
    true
    echo true
    )
}

echo calling function
f
echo still here 
```

输出：

```
calling function
true
true
still here 
```

注意：当我使用序列时：

```
echo calling function
if f
then echo still here - f passed
else echo still here - f failed
fi 
```

然后该函数在 Mac OS X 10.7.4 上的 bash 3.2.48 下表现不同：

```
calling function
true
true
false
true
still here - f passed 
```

所以，有创意，但并不完全可靠。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T07:14:31.057

类似于[CodeGnome 的解决方案](https://stackoverflow.com/a/11060903/296974)，但不使用数组（可能并非每个 shell 中都存在）：

```
function callthem()
{
    for cmd; do # short form for "for cmd in "$@"; do"
        "$cmd" || { echo "$cmd failed." >&2; return 1; }
    done
}

function f()
{
    callthem command1 command2 command3 command4
    # or maybe even
    callthem command{1,2,3,4}
} 
```

# python - 如何确保只有一个线程实例在 Python 中运行？

> ID：11060459
> 
> 赞同：2
> 
> 时间：2012-06-16T03:10:35.477
> 
> 标签：python

我有一个带有三个线程的程序。我这样称呼他们：

```
if __name__ == "__main__":
    while True:
        try:
            t1().start()
        except:
            log.debug('Trouble with t1 synchronizer')
        try:
            t2().start()
        except:
            log.debug('Trouble with t2 synchronizer')
        try:
            t3().start()
        except:
            log.debug('Trouble with t3 synchronizer') 
```

我想让这 3 个线程一直运行。但我还想确保 t1、t2 和 t3 每次只有一个实例在运行。

**编辑**

我能想到的唯一解决方案是在每个线程中都有锁定文件。类似的东西

```
if os.path.exists(lockfile):
   EXIT THREAD
f=open(lockfile,'w')
f.write('lock')
f.close()
THREAD_STUFF
os.remove(lockfile) 
```

但不知何故，它对我来说似乎不是一个干净的解决方案，因为程序可能由于某种原因退出并且线程可能根本无法启动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T04:19:40.333

您是正确的一种方法，可以确保线程只运行一次，每个线程都将使用锁定文件。

如何有另一种方法来检查它们是否正在运行，而不是不断尝试运行它们。通过使用以下代码

```
if __name__ == "__main__":
    try:
        t1().start()
    except:
        log.debug('Trouble with t1 synchronizer')
    try:
        t2().start()
    except:
        log.debug('Trouble with t2 synchronizer')
    try:
        t3().start()
    except:
        log.debug('Trouble with t3 synchronizer')
    Time.sleep(5)
# this sleep allows the threads to start so they will return a True for isAlive()
    while True:
        try:
            if t1().isAlive()==False:
                try:
                    t1().start()
                except:
                    log.debug('Trouble with t1 synchronizer')
            if t2.isAlive()==False:
                try:
                    t2().start()
                except:
                    log.debug('Trouble with t2 synchronizer')
            if t2.isAlive()==False()
               try:
                    t3().start()
                except:
                    log.debug('Trouble with t3 synchronizer') 
```

# html - 高度在 Internet Explorer 8 及以下版本上扩展

> ID：11060461
> 
> 赞同：-2
> 
> 时间：2012-06-16T03:10:42.643
> 
> 标签：html, css, internet-explorer

在早期的 IE 上，我的`<body>`主页高度扩展到了 200% 左右。该网站是[http://www.graetz-ran.co.il/](http://www.graetz-ran.co.il/)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T03:18:25.823

`<div id="fp-gallery"></div>`摆脱后`<span class="push-h"></span>`

# android - Android中是否有任何第三方库可用于捕获图像？

> ID：11060462
> 
> 赞同：0
> 
> 时间：2012-06-16T03:10:50.037
> 
> 标签：android, android-camera

现在我尝试开发一个与图像处理相关的应用程序，因为我必须需要相机功能。我不希望使用默认的设备相机意图，而是可以使用任何库或其他开源代码。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T03:39:03.350

为了应用灰度效果，您可以使用各种库

**1个马文项目**

你可以试试marvinproject。[http://marvinproject.sourceforge.net/en/index.html](http://marvinproject.sourceforge.net/en/index.html)

```
MarvinImage image = MarvinImageIO.loadImage("./res/image.jpg");
MarvinImagePlugin plugin = MarvinPluginLoader.loadImagePlugin("org.marvinproject.image.color.grayScale.jar");
plugin.process(image,image,null,MarvinImageMask.NULL_MASK, false);
image.update(); 
MarvinImageIO.saveImage(image, "./res/image_output.jpg"); 
```

**2 鸟舍**

[http://www.aviary.com/android](http://www.aviary.com/android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T04:00:24.240

按照开发者文档中的[构建相机应用程序进行操作。](http://developer.android.com/guide/topics/media/camera.html#custom-camera)

那应该教您如何使用相机 API 来获取您也可以应用过滤器的图片。

# python - 运行 python 脚本/GTKBuilder 应用程序时出现分段错误？

> ID：11060467
> 
> 赞同：2
> 
> 时间：2012-06-16T03:11:24.657
> 
> 标签：python, segmentation-fault, pygtk

我正在尝试使用 python2 和 GTKBuilder 学习 GUI 编程，但是在运行代码时出现分段错误。这是我的文件，在 Glade 中作为 GTKBuilder 文件创建：

```
<?xml version="1.0" encoding="UTF-8"?>
<interface>
  <!-- interface-requires gtk+ 3.0 -->
  <object class="GtkWindow" id="mainWindow">
    <property name="can_focus">False</property>
    <child>
      <object class="GtkBox" id="box1">
        <property name="visible">True</property>
        <property name="can_focus">False</property>
        <property name="orientation">vertical</property>
        <child>
          <object class="GtkBox" id="box2">
            <property name="visible">True</property>
            <property name="can_focus">False</property>
            <property name="halign">start</property>
            <property name="margin_left">146</property>
            <property name="margin_right">276</property>
            <child>
              <object class="GtkLabel" id="label1">
                <property name="visible">True</property>
                <property name="can_focus">False</property>
                <property name="label" translatable="yes">label</property>
              </object>
              <packing>
                <property name="expand">True</property>
                <property name="fill">False</property>
                <property name="position">0</property>
              </packing>
            </child>
            <child>
              <object class="GtkEntry" id="entryName">
                <property name="visible">True</property>
                <property name="can_focus">True</property>
                <property name="margin_bottom">4</property>
                <property name="hexpand">True</property>
                <property name="vexpand">True</property>
                <property name="invisible_char">●&lt;/property>
                <property name="placeholder_text">Please enter your name here...</property>
              </object>
              <packing>
                <property name="expand">True</property>
                <property name="fill">True</property>
                <property name="position">1</property>
              </packing>
            </child>
          </object>
          <packing>
            <property name="expand">False</property>
            <property name="fill">True</property>
            <property name="position">0</property>
          </packing>
        </child>
        <child>
          <object class="GtkButton" id="buttonWriteNameToFile">
            <property name="label" translatable="yes">button</property>
            <property name="use_action_appearance">False</property>
            <property name="visible">True</property>
            <property name="can_focus">True</property>
            <property name="receives_default">True</property>
            <property name="use_action_appearance">False</property>
            <signal name="clicked" handler="buttonWriteNameToFile_clicked" swapped="no"/>
          </object>
          <packing>
            <property name="expand">False</property>
            <property name="fill">True</property>
            <property name="position">1</property>
          </packing>
        </child>
        <child>
          <placeholder/>
        </child>
        <child>
          <placeholder/>
        </child>
      </object>
    </child>
  </object>
</interface> 
```

我的python代码，基于[这个问题](https://stackoverflow.com/questions/2668618/python-glade-could-not-create-gladexml-object)，是这样的：

```
#!/usr/bin/env python

import gtk

class NameApp:
    def __init__(self):
        filename = "project.glade"
        builder = gtk.Builder()
        builder.add_from_file(filename)
        builder.connect_signals(self)
        builder.get_object("mainWindow").show_all() 

    def buttonWriteNameToFile_clicked(self, widget):
        print("File write code...")

if __name__ == "__main__":
    app = NameApp()
    gtk.main() 
```

运行该文件会`python2`产生此错误：

```
name.py:9: Warning: cannot create instance of abstract (non-instantiatable) type `GtkBox'
  builder.add_from_file(filename)
./geany_run_script.sh: line 5: 14897 Segmentation fault      python2 "name.py" 
```

我认为我尽可能地遵循该示例，并且在 GTKBuilder 文件之外我没有看到任何差异。但是，链接问题中的示例在我的机器上成功运行。我不知道这是否相关，但我正在运行 Arch Linux x86_64。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T09:30:13.370

如果您更喜欢 3.x 版本（因为它可以在您的 Glade 文件中读取），您必须使用 GObject Introspection 模块中的 GTK。您的修改后的代码如下。

```
#!/usr/bin/env python

#import gtk
from gi.repository import Gtk 

class NameApp:
    def __init__(self):
        filename = "test.glade"
        builder = Gtk.Builder()
        builder.add_from_file(filename)
        builder.connect_signals(self)
        builder.get_object("mainWindow").show_all() 

    def buttonWriteNameToFile_clicked(self, widget):
        print("File write code...")

if __name__ == "__main__":
    app = NameApp()
    Gtk.main() 
```

在 GTK 的 2.x 版本中，小部件[GtkBox](http://developer.gnome.org/gtk/2.24/GtkBox.html)是抽象的，因此您无法实例化它。您可以使用 GtkHBox 或 GtkVBox。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T09:23:29.560

您使用 GTK 3.0 构建了 Glade 文件，这`Box`是一个常规的小部件。在 GTK 2 中，它是一个抽象类，您必须使用`VBox`或`HBox`。您的 Python 脚本使用的是 GTK 2，因此无法加载 Glade 文件。

转到 Glade 中的项目首选项并选择低于 3.0 的 GTK 版本。

# objective-c - 自动创建的 NSManagedObject 子类不使用 ARC

> ID：11060470
> 
> 赞同：2
> 
> 时间：2012-06-16T03:12:40.193
> 
> 标签：objective-c, ios, automatic-ref-counting

我的项目启用了 ARC（构建设置将 Objective-C 引用计数设置为 YES）。没有文件例外，它在项目范围内启用。（Xcode 的最新稳定版本）。

当我通过 File > New 为 Core Data 实体创建 NSManagedObject 子类时，生成的标头在其属性声明中使用以下内容：

```
@property (nonatomic, retain) 
```

但“保留”不是 ARC！这是一个错误，还是我缺少或不理解的东西？没有构建警告 - 如果这是一个错误，我该如何补救？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T04:21:44.370

`retain`是 的同义词`strong`。所以在这种情况下使用`retain`or是完全有效的。`strong`

[有关更多详细信息，请查看此问题。](https://stackoverflow.com/questions/7796476/property-definitions-with-arc-strong-or-retain)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T04:21:31.537

`retain`是 ARC 中的有效属性声明：请参阅上面的 clang[文档](http://clang.llvm.org/docs/AutomaticReferenceCounting.html#ownership.spelling.property)

# java - 我如何读取文件夹并在 java 中显示内容。

> ID：11060471
> 
> 赞同：0
> 
> 时间：2012-06-16T03:12:51.253
> 
> 标签：java, directory

我正在用java创建一个视频游戏（基于文本的），我需要读取一个文件夹来显示几个.java文件名作为savegames。我该怎么做呢？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T03:17:28.457

使用[`File`](http://docs.oracle.com/javase/6/docs/api/java/io/File.html)类及其方法[`list()`](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#list%28%29)或[`listFiles()`](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#listFiles%28%29)：

```
String folderPath = ...;
for(String fileName : new File(folderPath).list())
{
    if(fileName.endsWith(".java") && fileName.contains("savegames"))
    {
         System.out.println(fileName);
    }
} 
```

您也可以对 a 使用相同的方法[`FilenameFilter`](http://docs.oracle.com/javase/6/docs/api/java/io/FilenameFilter.html)，它们是[`list(FilenameFilter filter)`](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#list%28java.io.FilenameFilter%29)or [`listFiles(FilenameFilter filter)`](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#listFiles%28java.io.FilenameFilter%29)：

```
String folderPath = "";
FilenameFilter filter = new FilenameFilter()
{
    @Override
    public boolean accept(File dir, String name)
    {
        return name.endsWith(".java") && name.contains("savegames");
    }
};

for(String fileName : new File(folderPath).list(filter))
{
    System.out.println(fileName);
} 
```

# php - PHP 连接：关闭

> ID：11060476
> 
> 赞同：2
> 
> 时间：2012-06-16T03:14:01.653
> 
> 标签：php, http-headers, connection

我有一个 PHP 应用程序，我遇到了一些问题，有些页面需要很长时间才能加载。

几个小时后，我发现了问题，但我不知道如何解决它。

问题似乎出在 header 上`Connection: keep-alive`。我使用了一个名为“Tamper Data”的 Firefox 插件，它允许您“篡改”标题和内容。一旦我使用该工具将连接标题更改为`Connection: close`某些页面上的延迟停止。

在 PHP 中，如何确保使用了`Connection: close`标头？

我尝试将`header("Connection: close");`PHP 文件放在顶部，然后重新加载页面。它仍然发送`Connection: keep-alive`标题，而不是我要发送的标题。

我怎样才能实现我想要做的事情？

**编辑：**我刚刚意识到，在这个子域上，大多数页面根本没有发送 content-length 标头。它仅在表单提交和重定向之后立即发送。

**编辑2：**

这是页面：http: [//volunteer.essentialtransit.com/job/13/just-a-test-at-eta/](http://volunteer.essentialtransit.com/job/13/just-a-test-at-eta/)

单击“立即申请”链接并填写一些随机文本，您不需要附加文件。请注意，当您被重定向回“工作”详细信息页面时，加载需要很长时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T04:00:09.503

您的问题与连接状态无关。这似乎与连接有关，因为 Apache 会自动为来自不同来源的每个新请求生成一个新的子线程。使用 keep-alive，它将尝试重用前一个线程，该线程正忙于 PHP 脚本（来自您的应用程序）。实际上它有点复杂，但这是基本的。请注意正在发送“连接：关闭”，但它应该仅在脚本完成后关闭连接（发送所有缓冲区）。

现在我要告诉你如何调试你的脚本。我会这样做，因为如果您不解决问题并且获得更多流量，您的主机会因为极端的资源使用而将您踢出去。

所以：

1.  追加`set_time_limit(5)`或更高以确认存在后台脚本问题
2.  检查对本地资源的请求，这些请求只能在你的登台服务器上工作（你可以使用 WireShark）
3.  检查外部请求、cURL、`file_get_contents()`调用以及任何超时
4.  对冗长的脚本进行基准测试和优化（您可以为此尝试 xdebug）
5.  将所有 PHP 通知、警告和错误记录到文件中；你最多应该得到零错误
6.  最后，对整个应用程序进行三次检查是一个很好的做法。一是数据录入，二是数据操作，三是模块互联。但是你应该关注不能返回输出的 AJAX 后台脚本

当然，跳过任何不适用的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T03:23:42.117

因此，我确定了问题所在，并找到了解决此问题的方法。

处理表单的脚本只是处理输入并重定向到另一个页面，但它实际上并没有输出任何内容。在站点上的大多数页面上，内容长度标头要么未发送，要么设置为正确的值。但是由于某种原因，当发布到页面，然后在没有处理脚本向浏览器输出任何内容的情况下进行重定向时，内容长度被设置为 0。

我尝试自己设置内容长度，但运气不佳，因为它似乎没有什么不同。

所以，我所做的只是让处理脚本有一些输出。因此，现在提交表单时，处理脚本会输出一个带有重定向脚本的页面（以及“单击以继续”消息以防万一），该页面会导致正确的页面。因此，虽然这会在表单提交和看到的正确页面之间增加一个非常短暂的延迟，但它会导致正确设置内容长度并解决问题。

虽然这不是一个理想的解决方案，但它是可管理的并且可以使脚本正常工作。

# javascript - 如何拆分数组索引

> ID：11060477
> 
> 赞同：0
> 
> 时间：2012-06-16T03:14:05.073
> 
> 标签：javascript

如何拆分数组索引，即。示例代码

```
var parts = currentVal.split(" ");
var datePart = parts.splice(0,1);
alert("Date: " + datePart );
var timePart = parts.join(' '); 
```

在这里，我正在验证日期时间正则表达式。var datePart 是一个数组索引，现在我想拆分 datepart ....

```
var parts1 = datePart.split('/');
parts1.date = parseInt(parts1[0]);
parts1.month = parseInt(parts1[1]);
parts1.year = parseInt(parts1[2]); 
```

但它显示未捕获的类型错误，它们没有方法 split(); 任何人都可以帮助我如何分隔日期，月份，年份。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T03:19:19.227

我认为您正在寻找函数explode()。 [http://php.net/manual/en/function.explode.php](http://php.net/manual/en/function.explode.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T03:29:44.197

实际上函数 splice 返回一个已删除元素的数组，因此要解决您的问题，您只需在 datePart 数组的第一个元素上应用 split ：

```
var parts1 = datePart[0].split("/"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T03:33:56.220

如果你只是想检查一个字符串是否代表一个有效的日期，我个人会推荐`Date`javascript 原生支持的神奇对象。通过某种魔法，它可以读取几乎任何格式的日期，如果它是无效的日期，它将评估为字符串`Invalid Date`。

因此，要检查是否`currentVal`是有效日期，请执行以下操作：

```
if (new Date(currentVal) == 'Invalid Date') {
    ... // The date is invalid
} else {
    ... // The date is valid
} 
```

另一方面，如果您需要使用特定的正则表达式来验证日期，您可以执行类似的操作

```
var parts = currentVal.split(' ');
var dateParts = parts[0].split('/');
var timePart = parts[1]; // Maybe you want to split this as well? 
```

这会将 dateParts 保留为包含月、日和年的数组。

# java - Java 动态内存分配（堆）

> ID：11060478
> 
> 赞同：0
> 
> 时间：2012-06-16T03:14:12.770
> 
> 标签：java, memory-management

这不是一个我期望得到具体答案的问题，因为它相当广泛。我正在自学 Java，并且特别关注动态内存分配。让我们举一个非常简单的例子：假设我有一个非常基本的数据输入屏幕。如此基本以至于发生的所有事情都是用户输入一系列名字，可能是员工目录或其他东西。在我的 JFrame 上，我有一个输入这些名称的 JTextField 控件。员工人数仅在运行时才知道。用户输入一个名称并按下回车键，该键将名称提交到内存并创建一个新对象来存储下一个名称（我知道这很傻，但我正在努力集中注意力）。像这样的东西（不要太从字面上理解 - 我显然没有编译这个）：

```
public class Employee {
  String fName;

  public void setName( String n ) {
      fName = n;
  }
};

public class JFrameEmp {

//blah, blah, blah

JTxtName.addKeyListener(new KeyAdapter() {
    public void keyPressed(KeyEvent e) {
        /* Handle the enter key */
        if (e.getKeyCode() == KeyEvent.VK_ENTER) {
            /* Store name */
            this.setName(JTxtName.getText());

            /* Create New Object */
            Employee next = new Employee();
            }
        };
    }
} 
```

我需要帮助的地方在最后一行。即使这可行，假设我想打印出输入名称的列表。在我的方法中，我看不到唯一标识每个对象的方法（以便我可以遍历它们）。

我需要创建一个数组来存储这些吗？但它有一个固定的长度并且存在于堆栈中。我宁愿找到一种方法来使用堆来允许一个开放式列表。

我应该阅读什么来学习如何做到这一点？这一定是一件很常见的事情，但我所拥有的书籍似乎没有涵盖它。

谢谢。我希望我已经很好地解释了这一点，而无需过多详细说明。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T03:18:22.423

听起来您想存储 a `List`of `Employee`s。Java 为其类提供了动态大小的数组[`ArrayList`](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)。

这是一个例子：

```
ArrayList<Employee> employees = new ArrayList<Employee>();
employees.add(new Employee("Alice"));
employees.add(new Employee("Bob"));
System.out.println(employees.get(0)); // prints out Alice 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T03:19:30.237

你可以使用一个数组。[您可能会发现查看 Java Collections](http://docs.oracle.com/javase/tutorial/collections/index.html)框架很有用，尤其是关于[实现](http://docs.oracle.com/javase/tutorial/collections/implementations/index.html)的页面。

但是，是的，您需要将对象添加到某种数据结构中，否则在没有对它们的有效引用后，它们将被[垃圾收集器清理。](http://en.wikipedia.org/wiki/Java_%28programming_language%29#Automatic_memory_management)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-16T03:19:40.343

您似乎正在寻找一种数据存储结构。

您可以使用内置数组，该数组实际上存储在 java 的堆中（唯一的问题是您必须跟踪大小并在需要更多空间时重新分配）。

更好的选择是 ArrayList，它内置了在`add`需要时自动调整大小的方法。

您还可以使用 HashMap，它可以通过姓名快速搜索您的员工。

# regex - jMeter 正则表达式 JSON 响应

> ID：11060483
> 
> 赞同：8
> 
> 时间：2012-06-16T03:16:04.527
> 
> 标签：regex, jmeter

我已经阅读了一些关于 jMeter RegEx 提取的教程，但它不起作用。我正在使用 jMeter 2.7。

我有这个 JSON：

```
{"address":{"id":26,"user_id":1,"genre":"billing","first_name":"testFN1","last_name":"testLN1","company":null,"street1":null,"street2":null,"city":null,"state":"DC","zip":null,"country":null,"country_iso2":null,"phone1":"32432424322","phone2":null}} 
```

还有这个 RegEx Extractor: "id":(.+?)，这是 jMeter 的截图

![在此处输入图像描述](../Images/62833ad6dcdc95d0e1d0fef93d30e50d.png)

对于提取，我得到`$new_address_id`= **2**而不是**26**。有任何想法吗？

**2012 年 6 月 26 日更新**：

感谢 Cylian 的建议。这是非常有帮助的。我最终将其更改为：`"id":(\d+)`.

我还在 JMX 文件中找到了一个替换

```
<stringProp name="RegexExtractor.regex">&quot;id&quot;:(.+?,)</stringProp> 
```

并替换为

```
<stringProp name="RegexExtractor.regex">&quot;id&quot;:(\d+)</stringProp> 
```

这使得修复很快。谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-16T05:07:08.757

您正在使用`.+?`这意味着：

*   `.`- 匹配任何不是换行符的单个字符（默认，可以使用`s`标志更改）
*   `+`- 在一次和无限次之间匹配前面的字符
*   `?`- 尽可能少的次数（懒惰）

所以，虽然它会匹配`"id":26`模式匹配`.+?`，但它`2`只是而不是`26`.

要解决此问题，您可以尝试比这更好的方法：

```
 ("id":\d+)\b 
```

方法

```
// ("id":\d+)\b
// 
// Options: case insensitive
// 
// Match the regular expression below and capture its match into backreference number 1 «("id":\d+)»
//    Match the characters “"id":” literally «"id":»
//    Match a single digit 0..9 «\d+»
//       Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+»
// Assert position at a word boundary «\b» 
```

***或者***

```
 ("id":[^,:]+)\b 
```

方法

```
// ("id":[^,:]+)\b
// 
// Options: case insensitive
// 
// Match the regular expression below and capture its match into backreference number 1 «("id":[^,:]+)»
//    Match the characters “"id":” literally «"id":»
//    Match a single character NOT present in the list “,:” «[^,:]+»
//       Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+»
// Assert position at a word boundary «\b» 
```

*或者*

```
("id":\S+)\b 
```

***方法***

```
// ("id":\S+)\b
// 
// Options: case insensitive
// 
// Match the regular expression below and capture its match into backreference number 1 «("id":\S+)»
//    Match the characters “"id":” literally «"id":»
//    Match a single character that is a “non-whitespace character” «\S+»
//       Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+»
// Assert position at a word boundary «\b» 
```

* * *

希望这可以帮助。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-26T09:05:24.167

我建议你看看：

[http://jmeter-plugins.org/wiki/JSONPathExtractor/](http://jmeter-plugins.org/wiki/JSONPathExtractor/)

本节（JSON utils (JSON Path Assertion, JSON Path Extractor, JSON Formatter)）特别适用于这种情况。这些是我公司开发的一套jmeter工具，非常有用。

让我们以你的情况为例。测试用例如下所示：

![在此处输入图像描述](../Images/e06dae07a73583e73c5c06b4f5303abc.png)

所以虚拟样本返回响应，就像您指定的那样：

```
{"address":{"id":26,"user_id":1,"genre":"billing","first_name":"testFN1","last_name":"testLN1","company":null,"street1":null,"street2":null,"city":null,"state":"DC","zip":null,"country":null,"country_iso2":null,"phone1":"32432424322","phone2":null}} 
```

JSON 提取非常简单：

```
$.address.id 
```

这样就不需要花哨的正则表达式了。结果是 26（这是我在调试采样器中看到的）。

从评论中的问题更新：

如果您有值列表，即：

```
{"address":[{"id":26,"user_id":1,"genre":"billing","first_name":"testFN1","last_name":"testLN1","company":null,"street1":null,"street2":null,"city":null,"state":"DC","zip":null,"country":null,"country_iso2":null,"phone1":"32432424322","phone2":null}, {"id":6,"user_id":1,"genre":"billing","first_name":"testFN1","last_name":"testLN1","company":null,"street1":null,"street2":null,"city":null,"state":"DC","zip":null,"country":null,"country_iso2":null,"phone1":"32432424322","phone2":null}]} 
```

具有 2 个地址的列表，1 个具有 id 26，另一个具有 6。Json 路径`$.address.id`应返回这两个 id。我刚刚看到了采样器源代码，但无法获得计数，但是您可以通过在示例中添加另一个后处理器来做到这一点，即`BSF Sampler`并添加以下代码：

```
vars.put("ADDRESS_COUNT", "${__javaScript('${add}'.split('\,').length,)}".toString()); 
```

`${add}`存储结果的变量在哪里`$.address.id`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-28T16:05:35.973

在 jmeter 中选择 JSON 响应的最佳方法是执行类似 (?m) "nodeRef": "workspace://SpacesStore/idSpaceStore",\s* "name": "folder_for_testing-1372432881900",

(?m) - 表示开始将正则表达式视为面向多行的 (\s*) - 表示任何字符

# java - 有没有一种干净的方法可以将泛型类型的类分配给变量？

> ID：11060491
> 
> 赞同：13
> 
> 时间：2012-06-16T03:17:38.800
> 
> 标签：java, generics

鉴于此代码：

```
List<Integer> ints = new ArrayList<Integer>();

// Type mismatch: 
// cannot convert from Class<capture#1-of ? extends List> to Class<List<Integer>>       
Class<List<Integer>> typeTry1 = ints.getClass(); 

// Type safety: 
// Unchecked cast from Class<capture#2-of ? extends List> to Class<List<Integer>>
Class<List<Integer>> typeTry2 = (Class<List<Integer>>) ints.getClass();

// List is a raw type. References to generic type List<E> should be parameterized
Class<? extends List> typeTry3 = ints.getClass(); 
```

有没有办法在没有错误或警告的情况下获得`Class`a ？`List<Integer>`我可以很容易地抑制警告，但如果 Java 要求我抑制对这个有效代码的警告，我会非常[失望](http://knowyourmeme.com/memes/son-i-am-disappoint)。

另一方面，如果警告压制是唯一的方法，那么什么是最安全的压制呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-16T05:00:06.430

这是 Java 中真正的 Catch-22。

如果您不向以下位置添加泛型类型，编译器会发出警告`List`：

```
// WARN: List is not typed
Class<? extends List> typeTry3 = ints.getClass(); 
```

这是因为，在大多数情况下，最好键入您的列表。

但是，由于类型擦除，Java 无法在运行时找出 的泛型类型`List`，而编译器知道这一点。因此，没有任何方法`Class`会返回一个类型化的对象：

```
// ERROR: ints.getClass() doesn't return a Class<List<Integer>>, it returns a Class<List>
Class<? extends List<? extends Integer>> var = ints.getClass(); 
```

因此，您*必须*将其转换为类型列表。但是，如您所知，由于没有运行时类型检查，Java 会警告您任何类型化变量的强制转换：

```
// WARN: Casting to typed List
Class<List<Integer>> typeTry2 = (Class<List<Integer>>) ints.getClass(); 
```

任何解决这个问题的尝试本质上都是混淆编译器的一种手段，并且不可避免地会令人费解。

那么你最好的选择是选择选项 B：

> 另一方面，如果警告压制是唯一的方法，那么什么是最安全的压制呢？

抑制此警告的最安全方法是使您的`@SuppressWarnings("unchecked")`注释尽可能本地化。将它们放在每个未经检查的演员之上。这样就绝对清楚是谁造成了警告。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-16T04:02:34.773

一种方法是创建[自己的类](http://ideone.com/mRUD9#view_edit_box)。我不确定这是否能满足您的需求。

我不确定您要达到的目标。所以也许[通配符](http://ideone.com/1I6IF)就是答案。

```
import java.util.*;

class Main
{
      public static void main(String[] args)
      {
            List<Integer> list = new ArrayList<Integer>();
            Class<?> clazz = list.getClass();
            System.out.println(clazz) ;
      }
} 
```

# ios - 如何在 ios 上实现 3D 音效？

> ID：11060496
> 
> 赞同：2
> 
> 时间：2012-06-16T03:18:36.873
> 
> 标签：ios, audio, ios5, openal

我对一种从空间中相对于用户的特定点播放声音的方法感兴趣。

基本上我想说用户在点（0,0），声音来自（10,10），然后通过一些播放它的库发送声音，听起来好像它来自源（ 10,10)。这样做的性能将非常重要。

如果阅读这个问题不是很明显，那么我在任何设备上的音频经验都很少。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T20:36:20.253

在做了一些研究之后，似乎可以选择使用苹果支持的 OpenAL 框架，或者基本上在 Audio Unit 之上滚动你自己的框架。

苹果提供了一个3D Mixer Audio Unit，这需要你对Audio Units有很多了解。

然后是 OpenAL，它是一个跨平台的音频框架，您可以在其中定位“源”和“听者”，它会为您计算衰减和立体声。

两者都需要对播放音频有低水平的了解，而且都不是很有趣。所以我想我不妨一直跳到水里去学习音频单元，因为我将来可能想做一些更专业的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T03:39:43.173

这是 iOS OpenAL 功能的简单包装：[ObjectAL-for-iPhone](https://github.com/kstenerud/ObjectAL-for-iPhone)

玩弄这个例子，看看它是否符合你的要求。

# ruby-on-rails - Gmaps4rails：集群不起作用？

> ID：11060497
> 
> 赞同：3
> 
> 时间：2012-06-16T03:18:46.947
> 
> 标签：ruby-on-rails, ruby-on-rails-3, google-maps, gmaps4rails

由于[Gmaps4rails](https://github.com/apneadiving/Google-Maps-for-Rails)更新到 1.5，集群选项默认设置为 false。[文档](https://github.com/apneadiving/Google-Maps-for-Rails/wiki/Markers)说 :do_clustering 是在洪水标记上显示集群的方式。

在我的代码中：

```
 <%= gmaps(:markers => {:data => @json}, :map_options => {:do_clustering => true}) %> 
```

编辑：当然[支持](https://docs.google.com/spreadsheet/ccc?key=0AvG8BjhQ7xttdEFKR0JwT1BkbGxFbVQtcFExUGQtbGc&hl=fr#gid=0)

但是集群仍然没有显示。有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T06:38:58.390

才意识到：

您`do_clustering`作为地图选项传递，而它是标记选项。

# android - 如何在 getCallback 之外使用 getCallback 中提供的数据

> ID：11060499
> 
> 赞同：0
> 
> 时间：2012-06-16T03:18:59.733
> 
> 标签：android

所以我现在使用 Parse 来运行我的应用程序的后端。当您查询 Parse 数据库时，数据以一种看似奇怪的方式返回（对我来说，但我是新手） -

```
 query.getFirstInBackground(new GetCallback() {
            public void done(ParseObject object, ParseException e) {
              if (object == null) {
              } else {
              }
            }
          }); 
```

查询中的数据例如在 Else 语句中可用。我可以做 Date time = object.getCreatedAt(); 获取创建检索对象的时间。

但是，问题的出现是因为我想使用该数据来更新我的应用程序中 textView 的文本。我觉得数据“卡在”callBack 中（我意识到这可能不是真的。我尝试这样做的方式出现错误：“不能在定义的内部类中引用非最终变量 updateText以不同的方法”。错误出现在 updateText、timeText、table 和 i 上。这是失败的相关代码片段 -

```
TableLayout table = (TableLayout) findViewById(R.id.tableLayout);
    TextView courtText;
    TextView updateText;
    TextView timeText;
    // For each row
    for (int i = 0; i < table.getChildCount(); i++) {
        // Get the one `courtText` in this row
        courtText = (TextView) table.getChildAt(i).findViewById(R.id.courtText);

        ParseQuery query = new ParseQuery("Updates");
        query.whereEqualTo("court",courtText);
        query.orderByAscending("createdAt");
        query.getFirstInBackground(new GetCallback() {
            public void done(ParseObject object, ParseException e) {
              if (object == null) {
                Log.d("update", "The getFirst request failed.");
              } else {
                Log.d("update", "Retrieved the object.");

                String update = object.getString("update");
                Date time = object.getCreatedAt();

                updateText = (TextView) table.getChildAt(i).findViewById(R.id.updateText);
                timeText = (TextView) table.getChildAt(i).findViewById(R.id.timeText);

                updateText.setText(update);
                java.text.DateFormat dateFormat = android.text.format.DateFormat.getDateFormat(getApplicationContext());
                timeText.setText(dateFormat.format(time));
              }
            }
          });

    } 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T04:40:59.510

我现在无法对其进行测试，但这样的事情应该可以工作：

```
final TableLayout table = (TableLayout) findViewById(R.id.tableLayout);
TextView courtText;

for (int i = 0; i < table.getChildCount(); i++) {
    courtText = (TextView) table.getChildAt(i).findViewById(R.id.courtText);
    final TextView updateText = (TextView) table.getChildAt(i).findViewById(R.id.updateText);
    final TextView timeText = (TextView) table.getChildAt(i).findViewById(R.id.timeText);

    ParseQuery query = new ParseQuery("Updates");
    query.whereEqualTo("court",courtText);
    query.orderByAscending("createdAt");
    query.getFirstInBackground(new GetCallback() {
        public void done(ParseObject object, ParseException e) {
            if (object == null) {
                Log.d("update", "The getFirst request failed.");
            } else {
                Log.d("update", "Retrieved the object.");

                String update = object.getString("update");
                Date time = object.getCreatedAt();

                updateText.setText(update);
                java.text.DateFormat dateFormat = android.text.format.DateFormat.getDateFormat(getApplicationContext());
                timeText.setText(dateFormat.format(time));
            }
        }
    });
} 
```

这样，只有两个需要从内部访问的内部类外部变量（`updateText`和`timeText`）被声明`final`，所以一切都应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T04:52:34.700

There are two possible ways to resolve this. One, as Darshan said, is to make table final. This will allow you to access it from inside the GetCallback object (an inner class) without error. The second way is to refer back to the parent object - if this code is, for example, in an Activity subclass called `DisplayTableActivity`, you could put a method into it `UpdateTable(String updateText, String timeText)`, and instead of accessing the table directly in the GetCallback object, have the following line:

```
DisplayTableActivity.this.UpdateTable(updateText, timeText); 
```

That way, you can get the table's views inside that function (which belongs to the Activity) without any problems.

# c - 文字字符串放在哪里，为什么我可以返回指向它们的指针？

> ID：11060504
> 
> 赞同：1
> 
> 时间：2012-06-16T03:19:33.533
> 
> 标签：c, string, constants, literals, placement

[我在回答](https://stackoverflow.com/a/4929561/195701)[这个问题](https://stackoverflow.com/q/4929329/195701)时偶然发现了这个功能：

```
/* Note: I've formatted the code for readability. */
const char * getString() {
    const char *x = "abcstring";
    return x;
} 
```

我惊讶地发现返回一个指向文字字符串的指针是有效的，并且没有像我想象的那样发生段错误。我一直认为文字被推入堆栈或放入其他一些临时内存，但仅限于函数的范围。但在这里，它们似乎比我想象的更静态。然后将它们放入对整个可执行文件全局的某种字符串池中吗？

另外，如果我将字符串文字作为参数传递给函数，是否也是同样的事情？例如：

```
/* Where is the string literal in this example being placed? */
myfunc(value1, value2, "rainbowdash"); 
```

我希望有人能启发我。提前致谢！:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-16T04:11:06.123

在 C 中，字符串文字具有静态存储持续时间。您的代码在逻辑上等同于：

```
const char * getString() {
    static const char literal[] = "abcstring";
    const char *x = literal;
    return x;
} 
```

除了在带有字符串文字的版本中，字符串的存储可能与其他字符串文字的存储重叠。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-16T04:20:21.347

作为大多数其他答案的附录，您可以查看编译器生成的汇编程序（例如通过传递`-S`给 GCC）以查看它们的存储方式。将你的函数单独放入一个文件中，我们发现 GCC 基本上会生成（我已经删除了一些不相关的东西）：

```
.section        .rodata
.LC0:
        .string "abcstring"
        .text

        .globl  getString
        .type   getString, @function
getString:
        # load the address of ".LC0" which is the start of the "abcstring"
        movl    $.LC0, %eax 
        ret 
```

因此字符串存储在`.rodata`节（“**只读****数据**”）中，而不是堆栈中，因此它具有“全局”地址（并且始终在范围内）。

类似地，字符串字面量 in`myfunc("thisisastring")`也被放入一个`.rodata`节中，并且不在堆栈中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T03:24:45.380

它因 ABI 而异，但在 x86 上，它们位于静态内存/数据页面中，由 DS 寄存器指向。

# python - Python中有“不等于”运算符吗？

> ID：11060506
> 
> 赞同：426
> 
> 时间：2012-06-16T03:19:57.627
> 
> 标签：python, operators

你怎么会说不等于？

像

```
if hi == hi:
    print "hi"
elif hi (does not equal) bye:
    print "no hi" 
```

有没有等同于`==`“不等于”的东西？

* * *

## 回答 #1

> 赞同：669
> 
> 时间：2012-06-16T03:21:41.920

使用`!=`. 请参阅[比较运算符](https://docs.python.org/3/library/stdtypes.html#comparisons)。为了比较对象身份，您可以使用关键字`is`及其否定`is not`。

例如

```
1 == 1 #  -> True
1 != 1 #  -> False
[] is [] #-> False (distinct objects)
a = b = []; a is b # -> True (same object) 
```

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2012-06-16T03:22:40.890

不相等 `!=` （与相等`==`）

你是在问这样的事情吗？

```
answer = 'hi'

if answer == 'hi':     # equal
   print "hi"
elif answer != 'hi':   # not equal
   print "no hi" 
```

这个[Python - 基本运算符](http://www.tutorialspoint.com/python/python_basic_operators.htm)图表可能会有所帮助。

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2012-06-16T03:45:38.100

当两个值不同时，有一个`!=`（不等于）运算符返回`True`，但要小心类型，因为`"1" != 1`. 这将始终返回 True 并且`"1" == 1`始终返回 False，因为类型不同。Python 是动态的，但是是强类型的，而其他静态类型的语言会抱怨比较不同的类型。

还有`else`条款：

```
# This will always print either "hi" or "no hi" unless something unforeseen happens.
if hi == "hi":     # The variable hi is being compared to the string "hi", strings are immutable in Python, so you could use the 'is' operator.
    print "hi"     # If indeed it is the string "hi" then print "hi"
else:              # hi and "hi" are not the same
    print "no hi" 
```

`is`运算符是用于检查两个对象实际上是否相同的对象标识运算符*：*

```
a = [1, 2]
b = [1, 2]
print a == b # This will print True since they have the same values
print a is b # This will print False since they are different objects. 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2016-01-12T12:17:58.057

您可以同时使用`!=`或`<>`。

但是，请注意，不推荐使用`!=`的地方是首选`<>`。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-06-16T04:04:30.950

鉴于其他人已经列出了大多数其他表示不相等的方式，我将添加：

```
if not (1) == (1): # This will eval true then false
    # (ie: 1 == 1 is true but the opposite(not) is false)
    print "the world is ending" # This will only run on a if true
elif (1+1) != (2): #second if
    print "the world is ending"
    # This will only run if the first if is false and the second if is true
else: # this will only run if the if both if's are false
    print "you are good for another day" 
```

在这种情况下，将正 == (true) 的检查切换为负检查很简单，反之亦然......

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-01-28T01:47:30.010

您可以使用“不是”来表示“不等于”或“！=”。请看下面的例子：

```
a = 2
if a == 2:
   print("true")
else:
   print("false") 
```

上面的代码将打印“true”作为在“if”条件之前分配的 a = 2。现在请参阅下面的代码“不等于”

```
a = 2
if a is not 3:
   print("not equal")
else:
   print("equal") 
```

上面的代码将打印“不等于”作为前面分配的 a = 2。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-01-17T12:01:30.980

Python中有两个运算符用于“不等于”条件 -

a.) != 如果两个操作数的值不相等，则条件为真。(a != b) 是真的。

b.) <> 如果两个操作数的值不相等，则条件为真。(a <> b) 是真的。这类似于 != 运算符。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-12-28T18:47:32.563

您可以使用`!=`运算符来检查不等式。此外，`python 2`有`<>`操作员曾经做同样的事情，但它已被**弃用**`python 3`

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2017-02-24T21:27:03.310

使用`!=`或`<>`。两者都代表不相等。

比较运算符`<>`和`!=`是同一运算符的替代拼写。`!=`是首选拼写；`<>`已过时。【参考：Python语言参考】

* * *

## 回答 #10

> 赞同：-5
> 
> 时间：2015-04-21T13:35:36.887

你可以简单地做：

```
if hi == hi:
    print "hi"
elif hi != bye:
     print "no hi" 
```

# jquery - jQuery Isotope - 如何将项目重置为原始顺序

> ID：11060511
> 
> 赞同：2
> 
> 时间：2012-06-16T03:22:34.807
> 
> 标签：jquery, jquery-isotope

我已经使用很棒的 jQuery Isotope 插件设置了一个员工简历页面。

布局是标准的 4 列网格，所有项目的大小相同。当用户单击一个项目时，它所在行中的先前项目使用“插入”方法附加到布局中，然后单击的项目将大小增加 4 倍，达到全宽。这非常有效，但是当大型生物关闭（点击时）时，我想将布局重置为其原始顺序（页面加载顺序）。

我尝试使用“sortBy”选项设置为“original-order”，但它似乎没有将订单重置为原始订单。

任何帮助表示赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T18:19:56.710

你用过 Isotope 的 shuffle 和/或 reLayout 方法吗？然后，删除那些。你也看过[这里](http://isotope.metafizzy.co/docs/adding-items.html)吗？你可能做到了。指向沙盒或小提琴的链接总是有帮助......

# c++ - 如何在更新语句中获取输出子句的结果

> ID：11060513
> 
> 赞同：0
> 
> 时间：2012-06-16T03:22:43.993
> 
> 标签：c++, tsql, ado

我使用 ado 在 c++ 中编程，tsql 上的文档说 OUTPUT 子句可以将结果返回给调用程序，无论如何我可以在 c++ 中用 ado 检索它吗？如果有可能怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T12:52:17.617

在您的 ADO 对象中设置一个额外的参数，并将参数方向作为输出。然后让您的原始更新语句定义一个额外的变量（即输出变量）并将您的结果分配给该输出变量。

# css - 水平列表中的第一项向左浮动，其余项向右对齐

> ID：11060514
> 
> 赞同：0
> 
> 时间：2012-06-16T03:22:56.077
> 
> 标签：css

我有以下 HTML，我希望第一个项目与左侧对齐，然后将其余三个项目作为一个组与右侧对齐。

我不想在这三个上使用 float:right，因为那样它们就必须在 HTML 中以不正确的顺序出现。

有没有办法将 margin-left 应用于第二个列表项，以便它始终强制自身和三个组向右？请参阅附图以供参考。

```
<ul class="overview">
  <li class="title">Some text</li>
  <li>Some text</li>
  <li>Some text</li>
  <li>Some text</li>
</ul> 
```

![第一个 li 项目向左，组中的其他项目向右对齐](../Images/ae3d67da18c42744b321edf5e2809e8c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T03:50:30.393

看起来您将在该列表周围有一个容器元素。如果是这样，以下内容可能会满足您的需求。

```
<style type="text/css">
    .container {
        position: relative;
        width: 600px;
        padding: 10px;
        border: 1px solid #f00;
    }
    .overview {
        text-align: right;
        margin: 0;
        padding: 0;
    }
    .overview li {
        display: inline;
        width: 100px;
        height: 20px;
        border: 1px solid #000;
        text-align: left;
    }
    .overview li.title {
        position: absolute;
        left: 10px;
    }
</style>

<div class="container">
    <ul class="overview">
        <li class="title">Some text</li>
        <li>Some text</li>
        <li>Some text</li>
        <li>Some text</li>
    </ul>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T03:32:10.870

如果语义对您来说并不重要，那么您可以使用`table`.

# css - 使用不同的媒体查询方法的响应式布局行为

> ID：11060515
> 
> 赞同：2
> 
> 时间：2012-06-16T03:22:57.657
> 
> 标签：css, less, responsive-design, media-queries

有人可以向我解释这种响应式方法是如何工作的吗？这是使用 LESS 框架完成的。作者如何实现所需的设备特定行为？

```
.responsive (@scale: 1) {

/*Responsive code goes here for example*/
.logo {
        padding: 44px * @scale 0 33px * @scale;

        img {
            width: 580px * @scale;
            height: 90px * @scale;
        }
    }
}

.responsive;

@media screen and (min-width: 480px) and (max-width: 639px) {
    .responsive(0.75);
}

@media screen and (min-width: 320px) and (max-width: 479px) {
    .responsive(0.5);
}

@media screen and (max-width: 319px) {
    .responsive(0.25);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T03:49:20.497

首先是关于 LESS 框架的快速课程。它基本上是 CSS 的预处理器，它使用编码概念使 CSS 更易于编写和可读。

Less 样式表转换为 CSS 如下：

```
.logo {
  padding: 44px 0 33px;
}
.logo img {
  width: 580px;
  height: 90px;
}
@media screen and (min-width: 480px) and (max-width: 639px) {
  /*Responsive code goes here for example*/
  .logo {
    padding: 33px 0 24.75px;
  }
  .logo img {
    width: 435px;
    height: 67.5px;
  }
}
@media screen and (min-width: 320px) and (max-width: 479px) {
  /*Responsive code goes here for example*/
  .logo {
    padding: 22px 0 16.5px;
  }
  .logo img {
    width: 290px;
    height: 45px;
  }
}
@media screen and (max-width: 319px) {
  /*Responsive code goes here for example*/
  .logo {
    padding: 11px 0 8.25px;
  }
  .logo img {
    width: 145px;
    height: 22.5px;
  }
} 
```

如您所见，CSS 中有很多重复，而且可读性不强（更不用说更改徽标图像的纵横比需要做多少工作）。

在 Less 代码的顶部，您会看到：

```
.responsive (@scale: 1) {

    /*Responsive code goes here for example*/
    .logo {
        padding: 44px * @scale 0 33px * @scale;
        img {
            width: 580px * @scale;
            height: 90px * @scale;
        }
    }
} 
```

上面的代码被称为“参数混合”，将它们视为面向对象语言中的类。您可以在这些“mixin”中传入变量、设置变量和规则。在这种情况下，传入`@scale`的是参数和默认值`1`。您几乎可以在 mixins 中设置规则，除了您可以使用 LESS 做的一件很酷的事情是声明“嵌套”规则（这就是您在`img`选择器中看到的内容）选择`.logo`器。这与生成的 CSS 将具有的基本相同`.logo img{/*rules*/}`。有关 LESS 的完整文档，请参阅此站点：http: [//lesscss.org/](http://lesscss.org/)

现在是它的媒体查询方面。如您所见，`.responsive`首先声明了 mixin - 所以将此规则集视为“默认”视口规则。

第一个媒体查询`@media screen and (min-width: 480px) and (max-width: 639px)`声明对于浏览器宽度大于 480 像素且小于 639 像素的所有视口，应用指定的任何规则 - 在这种情况下`.responsive(0.75);`（因此在 mixin 中以 0.75 作为参数重新缩放尺寸）。因此，当满足此参数时，CSS 的级联方面将使用媒体查询中的规则覆盖预先设置的默认规则。

相同的概念将适用于其他媒体查询。只需将 min-width 和 max-width 视为断点设置器。无论您在哪里看到定义的最小宽度，规则都将应用于大于或至少是定义的断点的所有视口。同样，对于小于指定断点的所有视口应用最大宽度规则。您可以在媒体查询中结合 min-width 和 max-width 以获得一系列视口来应用规则。

有关更多信息，我建议查看这篇文章[http://coding.smashingmagazine.com/2011/01/12/guidelines-for-responsive-web-design/](http://coding.smashingmagazine.com/2011/01/12/guidelines-for-responsive-web-design/)

它对响应式设计以及媒体查询如何发挥作用以及设计响应式网页进行了很好的解释。

# python - Django 管理员将变量传递给 base_site.html

> ID：11060516
> 
> 赞同：3
> 
> 时间：2012-06-16T03:23:35.317
> 
> 标签：python, django, django-admin

我正在使用 django-livesettings 将站点标题保存到数据库中。但是，为了能够访问配置值，您需要通过视图将变量传递给模板：

[http://django-livesettings.readthedocs.org/en/latest/usage.html#accessing-your-value-in-a-view](http://django-livesettings.readthedocs.org/en/latest/usage.html#accessing-your-value-in-a-view)

我可以重写 admin.ModelAdmin 类的什么方法来将变量传递给管理站点标题“Django Site Admin”所在的 base_site.html？

这个答案可能很接近，但我不知道它错过了什么： [Django how to pass custom variables to context to use in custom admin template?](https://stackoverflow.com/questions/9220042/django-how-to-pass-custom-variables-to-context-to-use-in-custom-admin-template)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-09-24T11:16:55.190

我发现的最优雅的解决方案在这里： [https ://stackoverflow.com/a/36421610/7521854](https://stackoverflow.com/a/36421610/7521854)

本质上，它会覆盖您的管理站点的`each_context`方法，以根据需要添加任意数量的自定义变量。更新后的上下文无需任何进一步的努力即可应用于所有管理页面。

就我而言，我希望有一个自定义页脚显示发布版本信息。此信息取自`git describe`在部署期间使用命令自动更新的文件。

文件`app-name/sites.py`：：

```
class MyAdminSite(AdminSite):
    """ Extends the default Admin site. """
    site_title = gettext_lazy('My Admin')
    site_header = gettext_lazy('My header')
    index_title = gettext_lazy('My Administration')

    def each_context(self, request):
        version_info = ""
        try:
            version_info = os.environ['RELEASE_TAG']
        except KeyError:
            f = open(os.path.join(settings.BASE_DIR, 'assets/version.txt'), 'r')
            version_info = f.read()
            f.close()
            os.environ['RELEASE_TAG'] = version_info

        context = super(MyAdminSite, self).each_context(request)
        context['releaseTag'] = version_info
        return context

admin_site = MyAdminSite(name='my_custom_admin') 
```

相关的页脚标签是：

```
{% block footer %}
<div class="copyright-center">
    <p><small>My Admin {{releaseTag}} Copyright &copy; MyCo</small></p>
</div>
{% endblock %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T03:59:00.420

第二个链接是关于向 a 的更改列表页面添加额外的变量`ModelAdmin`。
由`base_site.html`许多管理页面和视图扩展，如果您想要一些全局更改，您需要扩展所有相关视图的上下文，或者通过[在上下文中设置变量来](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#setting-a-variable-in-the-context)`base_site.html`覆盖自身

# asp.net - 在 ASP.net 中使用 VariantType

> ID：11060521
> 
> 赞同：1
> 
> 时间：2012-06-16T03:25:08.913
> 
> 标签：asp.net, vb.net, variant

希望在这里得到快速的答复。

好的，因为我从数据库中进行了很多单值查找，所以我创建了一个函数来为我处理查找。它旨在获取任何类型的数据类型（字符串、整数、日期……）。

当我想要检索一个数字时它可以工作，但是当我想要一个字符串时给我一个错误（InvalidCastException 试图将一个字符串转换为一个整数就行了：GetValue = DR(0)）。我不能做 ctype 或 directcast，因为数据类型是未知的并且会变化。尚未测试任何其他数据类型。

代码如下。我想知道如何使这个函数工作，或者指出另一个可以达到同样目的的函数。

```
Public Shared Function GetValue(Optional ByVal SQL As String = "", Optional ByVal FieldName As String = "", Optional ByVal TableName As String = "", Optional ByVal WhereClause As String = "") As VariantType?
    Dim myConnection As SqlConnection
    Dim myCommand As SqlCommand
    Dim strSQL As New SQLStringBuilder
    Dim DR As SqlDataReader

    myConnection = New SqlConnection(ConfigurationManager.ConnectionStrings("ConnAFRAMSSQL").ConnectionString)
    strSQL.Add(SQL)
    If FieldName > "" Then
        strSQL.Add("SELECT " & FieldName)
    End If
    If TableName > "" Then
        strSQL.Add("FROM " & TableName)
    End If
    If WhereClause > "" Then
        strSQL.Add("WHERE " & WhereClause)
    End If
    myConnection.Open()
    myCommand = New SqlCommand(strSQL.ToString, myConnection)
    DR = myCommand.ExecuteReader()
    If DR.HasRows Then
        DR.Read()
        GetValue = DR(0)
    Else
        GetValue = Nothing
    End If
End Function 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T03:35:54.033

您可以指定方法的返回类型`System.Object`（[System.Object](http://msdn.microsoft.com/en-us/library/system.object.aspx)是所有类型的最终基类）。

```
Public Shared Function GetValue(Optional ByVal SQL As String = "", Optional ByVal FieldName As String = "", Optional ByVal TableName As String = "", Optional ByVal WhereClause As String = "") As Object
    Dim myConnection As SqlConnection
    ....
   Dim obj as Object=Nothing
   If DR.Read()
        obj=DR(0)
   End If
   DR.Close()
   myConnection.Close()
   return obj
End Function 
```

# c# - 为什么在从 CanSeek 返回 false 的流上调用 Seek？

> ID：11060525
> 
> 赞同：0
> 
> 时间：2012-06-16T03:26:59.917
> 
> 标签：c#, stream, biztalk

我最近遇到的一个有趣的问题：

我实现了一个[Stream](http://msdn.microsoft.com/en-us/library/system.io.stream.aspx)类（自定义流管道组件的包装流），后来的一些测试让我的管道抛出了异常。异常是从对 Seek 的调用中引发的，由于我的流是仅向前的、不可写的流实现（CanSeek 和 CanWrite 返回 false，Position:set 引发异常，没有什么异常），因此我已对其进行硬编码以引发[NotImplementedException 。](http://msdn.microsoft.com/en-us/library/system.notimplementedexception.aspx)对 Seek 的调用来自非托管代码，因此我无法真正对其进行过多调试。我真正能说的是，在我的[Stream](http://msdn.microsoft.com/en-us/library/system.io.stream.aspx)实现中调用了 Seek，即使我的 CanSeek 返回 false 并且用户甚至没有检查 CanSeek。

那是怎么回事？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-16T03:31:51.097

所有答案都在这里找到：[在托管流管道组件中实现搜索方法](http://msdn.microsoft.com/en-us/library/ee267887%28v=bts.10%29.aspx)

事实证明，在没有 Position 属性的时候。所以获取流指针当前位置的方法是调用`Seek( 0, SeekOrigin.Current );`

迷人。又是旧事新事。

该页面提供了所需的 Seek 实现：

```
override public long Seek(long offset, SeekOrigin origin)
{
   long pos = -1;

   switch(origin)
   {
      case SeekOrigin.Begin :
         pos = offset;
         break;
      case SeekOrigin.Current :
         pos = Position + offset;
         break;
      case SeekOrigin.End :
         break;
   }

   // We generally disallow seeking of the stream
   // However, in unmanaged code, many people use Seek(0,CURR) to retrieve    // the current position
   // Special case (that is, if Seek does not change position, do not 
   // throw an exception)
   if (pos==Position)
   {
      return pos;
   }
   else
   {
      throw new NotSupportedException("ForwardOnlyEventingReadStream does not support Seek()");
   }
} 
```

这就是整个解决方案。耶！

# facebook - Facebook 忽略应用程序的“默认活动隐私”

> ID：11060527
> 
> 赞同：-1
> 
> 时间：2012-06-16T03:27:31.583
> 
> 标签：facebook, facebook-graph-api, privacy

我将应用程序的默认活动隐私设置为“所有人”，但是当显示用于安装应用程序的身份验证对话框时，Facebook 会忽略此设置并始终显示“朋友”。

我已经用几个应用程序尝试过，但仍然是一样的。

此链接中还报告了有关此案例的错误： [https ://developers.facebook.com/bugs/268481063205627](https://developers.facebook.com/bugs/268481063205627)

Facebook 在此处描述了默认活动隐私： [https ://developers.facebook.com/docs/opengraph/authentication/](https://developers.facebook.com/docs/opengraph/authentication/)

任何人都可以帮助我吗？或者你能告诉我是否有任何其他方法可以通过 PHP 代码设置活动隐私？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T07:09:26.867

Depends on the user default settings, you can set an Activity Privacy,
but if the user have make any changes (Friends Only), you can't do something for this.

> If the user changes it to Friends, the permission will be updated to friends only. If the user changes that to Public, your app activity will turn into public actions. Possible settings: None, Friends, Me only, or Public. The user can also change the Activity Privacy setting through the Auth Dialog.

# html - CSS 文件选择

> ID：11060528
> 
> 赞同：0
> 
> 时间：2012-06-16T03:27:51.167
> 
> 标签：html, css

我需要浏览器为客户端浏览器下载适当的脚本。我需要某种可行的 switch 语句？

我有 ;

*   (common.css) 所有浏览器脚本都需要这个文件
*   (ie6.css) IE 6 脚本
*   (ie7.css) IE 7 脚本
*   (ie8.css) IE 8 脚本
*   (ie9.css) IE 9 脚本
*   (other.css) Mozilla + Firefox + Safari 对所有版本使用相同

我有（但不工作）

```
 <link rel="stylesheet" href="common.css" type="text/css" />

<!--[if IE 6 ]>
        <link rel="stylesheet" href="ie6.css" type="text/css" />
<!--[elseif IE 7 ]>
        <link rel="stylesheet" href="ie7.css" type="text/css" />
<!--[elseif IE 8 ]>
        <link rel="stylesheet" href="ie8.css" type="text/css" />
<!--[elseif IE 9 ]>
        <link rel="stylesheet" href="ie9.css" type="text/css" />
<!--[else]>
        <link rel="stylesheet" href="other.css" type="text/css" />
<![endif]--> 
```

**问：我从另一个文件中破解了上述代码，但不能让它工作？如果我弄错了，是否可以使用更好的 switch 语句类型？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T03:32:32.163

我相当确定您必须分别执行每个条件，而不是在 switch 语句中

```
 <link rel="stylesheet" href="common.css" type="text/css" /> 
   <!--[if IE 6 ]>
       <link rel="stylesheet" href="ie6.css" type="text/css" />
    <![endif]-->
    <!--[if IE 7 ]>
       <link rel="stylesheet" href="ie7.css" type="text/css" />
    <![endif]-->
    <!--[if IE 8 ]>
      <link rel="stylesheet" href="ie8.css" type="text/css" />
    <![endif]-->
    <!--[if IE 9 ]>
      <link rel="stylesheet" href="ie9.css" type="text/css" />
    <![endif]--> 
```

**如果不是 IE**

```
 <!--[if !IE]> -->
         <link rel="stylesheet" href="other.css" type="text/css" />
   <!-- <![endif]--> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T03:36:28.747

```
<link rel="stylesheet" href="common.css" type="text/css" />
<!--[if IE 6 ]>
    <link rel="stylesheet" href="ie6.css" type="text/css" />
   <![endif]--> 
<!--[if IE 7 ]>
    <link rel="stylesheet" href="ie7.css" type="text/css" />
   <![endif]-->
<!--[if IE 8 ]>
    <link rel="stylesheet" href="ie8.css" type="text/css" />
   <![endif]--> 
   <!--[if IE 9 ]>
    <link rel="stylesheet" href="ie9.css" type="text/css" />
   <![endif]-->
<!--[if !IE]> -->
    <link rel="stylesheet" href="other.css" type="text/css" />
<!-- <![endif]--> 
```

# python - 具有递归模板支持的模板引擎

> ID：11060529
> 
> 赞同：0
> 
> 时间：2012-06-16T03:28:06.310
> 
> 标签：python, ruby, template-engine

模板引擎可用于代码生成。以下是 Ruby ERB 模板脚本的示例：

```
<ul><% for @item in @shopping_list %><li><%= @item %></li><% end %></ul> 
```

但是，我的代码生成要求不仅仅是简单的变量扩展或 for 循环。我需要递归代码生成能力，换句话说，我需要一个支持递归模板的 python 或 ruby​​ 模板引擎。有人可以为我推荐这样的模板引擎吗？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T03:46:34.250

Rails 中默认使用的 Ruby ERB 模板系统支持递归模板。这是一个例子。

*app/views/controller1/action1.html.erb*：

```
Factorial of <%= @n %> equals to <%= render "factorial", :n => @n %> 
```

*app/views/controller1/_factorial.html.erb*：

```
<% if n == 1 %>
  1
<% else %>
  <%= n %> * <%= render "factorial", :n => n - 1 %>
<% end %> 
```

输出：

```
Factorial of 10 equals to 10 * 9 * 8 * 7 * 6 * 5 * 4 * 3 * 2 * 1 
```

# html - 手机上的字体太大 - 如何限制大小或修复？

> ID：11060531
> 
> 赞同：1
> 
> 时间：2012-06-16T03:28:31.997
> 
> 标签：html, fonts, size, cell

我正在使用 CSS，我的手机上的一些字体正在分解 Div，而不是弄乱 html 的其余部分。有没有办法限制 css 样式的 Div 中的字体大小？

例如，我有一个在计算机上看起来不错的按钮，但相同的按钮文本在我的手机上太大或尺寸不正确，并且在按钮中显示不正确。

我包括一张它在电脑上的样子的图片。

我正在使用 DROID。如果您使用手机，您可以在此处查看链接：[http ://www.edvizenor.com/?p=PicturePoll&id=33](http://www.edvizenor.com/?p=PicturePoll&id=33)

![在此处输入图像描述](../Images/6d6da252c4f44dbd8c3e76d04de1371f.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T03:56:44.323

CSS[媒体查询](http://www.w3.org/TR/css3-mediaqueries/)可能是您正在寻找的。您可以根据设备宽度更改字体大小（或任何其他您想要的），例如：

```
@media all and (max-device-width: 480px) {
    .changeThisFont {
        font-size: 0.5em;
    }
} 
```

您还可以在 HTML 头中添加类似这样的内容：

```
<meta name="viewport" content="width=600, initial-scale=1"> 
```

# android - Android 内存问题：回栈太多？

> ID：11060535
> 
> 赞同：1
> 
> 时间：2012-06-16T03:29:12.667
> 
> 标签：android, memory, android-activity

我有一个非常复杂的 Android 应用程序，其中包含大量活动。它有一个滑动的“Facebook”风格菜单，所以后台可以很满。我已经将 REORDER_TO_FRONT 标志添加到从主菜单启动的 Intents 中，但我仍然经常因内存不足而崩溃。

我使用 Eclipse Memory Analyzer 分析了我的堆，发现大部分内存都被 RelativeLayouts（我的 ListView 项）占用了。我能做些什么来安全地解决这个问题吗？是否有一种合乎逻辑的方法来释放所有这些在后台堆栈上的 List 项正在占用的内存？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-16T04:19:57.900

为什么不在 onPause() 方法中调用 finish() 来终止活动并展平堆栈？一旦 onCreate() 被调用，你总是可以保持它们的状态并实例化它。

# java - Android ClassNotFoundException with ViewPager

> ID：11060536
> 
> 赞同：17
> 
> 时间：2012-06-16T03:29:19.117
> 
> 标签：java, android, classnotfoundexception, android-viewpager, inflate

I am getting the following error, which I don't understand...

```
06-15 22:06:49.196: W/dalvikvm(17622): threadid=1: thread exiting with uncaught exception (group=0x40bcc1f8)
06-15 22:07:05.031: W/dalvikvm(17877): threadid=1: thread exiting with uncaught exception (group=0x40bcc1f8)
06-15 22:07:05.031: E/AndroidRuntime(17877): FATAL EXCEPTION: main
06-15 22:07:05.031: E/AndroidRuntime(17877): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.whipple.android/com.whipple.android.StockActivity}: android.view.InflateException: Binary XML file line #6: Error inflating class ViewPager
06-15 22:07:05.031: E/AndroidRuntime(17877):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1968)
06-15 22:07:05.031: E/AndroidRuntime(17877):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1993)
06-15 22:07:05.031: E/AndroidRuntime(17877):    at android.app.ActivityThread.access$600(ActivityThread.java:127)
06-15 22:07:05.031: E/AndroidRuntime(17877):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1159)
06-15 22:07:05.031: E/AndroidRuntime(17877):    at android.os.Handler.dispatchMessage(Handler.java:99)
06-15 22:07:05.031: E/AndroidRuntime(17877):    at android.os.Looper.loop(Looper.java:137)
06-15 22:07:05.031: E/AndroidRuntime(17877):    at android.app.ActivityThread.main(ActivityThread.java:4512)
06-15 22:07:05.031: E/AndroidRuntime(17877):    at java.lang.reflect.Method.invokeNative(Native Method)
06-15 22:07:05.031: E/AndroidRuntime(17877):    at java.lang.reflect.Method.invoke(Method.java:511)
06-15 22:07:05.031: E/AndroidRuntime(17877):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:794)
06-15 22:07:05.031: E/AndroidRuntime(17877):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:561)
06-15 22:07:05.031: E/AndroidRuntime(17877):    at dalvik.system.NativeStart.main(Native Method)
06-15 22:07:05.031: E/AndroidRuntime(17877): Caused by: android.view.InflateException: Binary XML file line #6: Error inflating class ViewPager
06-15 22:07:05.031: E/AndroidRuntime(17877):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:691)
06-15 22:07:05.031: E/AndroidRuntime(17877):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
06-15 22:07:05.031: E/AndroidRuntime(17877):    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
06-15 22:07:05.031: E/AndroidRuntime(17877):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
06-15 22:07:05.031: E/AndroidRuntime(17877):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
06-15 22:07:05.031: E/AndroidRuntime(17877):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:272)
06-15 22:07:05.031: E/AndroidRuntime(17877):    at android.app.Activity.setContentView(Activity.java:1851)
06-15 22:07:05.031: E/AndroidRuntime(17877):    at com.whipple.android.StockActivity.onCreate(StockActivity.java:17)
06-15 22:07:05.031: E/AndroidRuntime(17877):    at android.app.Activity.performCreate(Activity.java:4481)
06-15 22:07:05.031: E/AndroidRuntime(17877):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1052)
06-15 22:07:05.031: E/AndroidRuntime(17877):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1932)
06-15 22:07:05.031: E/AndroidRuntime(17877):    ... 11 more
06-15 22:07:05.031: E/AndroidRuntime(17877): Caused by: java.lang.ClassNotFoundException: android.view.ViewPager
06-15 22:07:05.031: E/AndroidRuntime(17877):    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
06-15 22:07:05.031: E/AndroidRuntime(17877):    at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
06-15 22:07:05.031: E/AndroidRuntime(17877):    at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
06-15 22:07:05.031: E/AndroidRuntime(17877):    at android.view.LayoutInflater.createView(LayoutInflater.java:552)
06-15 22:07:05.031: E/AndroidRuntime(17877):    at android.view.LayoutInflater.onCreateView(LayoutInflater.java:636)
06-15 22:07:05.031: E/AndroidRuntime(17877):    at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:66)
06-15 22:07:05.031: E/AndroidRuntime(17877):    at android.view.LayoutInflater.onCreateView(LayoutInflater.java:653)
06-15 22:07:05.031: E/AndroidRuntime(17877):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:678)
06-15 22:07:05.031: E/AndroidRuntime(17877):    ... 21 more 
```

This is my code...

```
public class StockActivity extends Activity {
public ListAdapter listadapter;
private StockPageAdapter myAdapter;
private ViewPager myPager;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    super.setContentView(R.layout.main);

    this.myAdapter = new StockPageAdapter(this);
    this.myPager = (ViewPager)super.findViewById(R.id.pager);
    this.myPager.setAdapter(myAdapter);
} 
```

It's a `ListAdapter` with a `ViewPager` to scroll through the lists. I'm extending `BaseAdapter` and inflating the view with this code...

```
LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
row = inflater.inflate(R.layout.row, null); 
```

Could someone please help me to understand what is wrong.

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-06-16T04:14:56.003

What does your XML look like in the layout file? If you simply put

```
<ViewPager
    android:layout_width="..."
    android:layout_height="..." /> 
```

Your application will crash because `ViewPager` is not located in the core SDK package with other widgets, it's in the support library. You need to put the fully qualified name

```
<android.support.v4.view.ViewPager
    android:layout_width="..."
    android:layout_height="..." /> 
```

Also, as others have mentioned, **make sure the support library JAR is properly included in your project**.

HTH

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T04:09:41.750

I think you have a few too many `super` prefixes there.

Try this:

```
@Override   
public void onCreate(Bundle savedInstanceState) {   
    super.onCreate(savedInstanceState);   
    setContentView(R.layout.main);   

    this.myAdapter = new StockPageAdapter(this);   
    this.myPager = (ViewPager)findViewById(R.id.pager);   
    this.myPager.setAdapter(myAdapter);   
} 
```

Also, make sure the `android-support-v4.jar` is in a directory called `libs` (which should be in your project and on the same level as `res` and `src` and `assets`). This is a **must** now as of ADT 17 (IIRC). Just create that directory, drop the .jar in there and Eclipse will take care of the rest, no need to try and add it manually to the build path or anything.

# android - DialogFragment 中的 setArgument 有什么意义？

> ID：11060538
> 
> 赞同：3
> 
> 时间：2012-06-16T03:29:29.273
> 
> 标签：android, bundle

我有这段代码：

```
public static DateDialogFragment newInstance(Context context, DateDialogFragmentListener listener) {
    DateDialogFragment dialog = new DateDialogFragment();
    mContext = context;
    mListener = listener;
    /*I dont really see the purpose of the below*/
    Bundle args = new Bundle();
    args.putString("title", "Set Date");
    dialog.setArguments(args);

    return dialog;
} 
```

非常不言自明，但我不明白给它一个捆绑包有什么意义。我猜我从来没有真正使用过它。Android Doc 对此（片段）的解释在这里：http: [//developer.android.com/reference/android/app/Fragment.html#setArguments](http://developer.android.com/reference/android/app/Fragment.html#setArguments(android.os.Bundle) (android.os.Bundle ) 构造参数到底是什么意思？由于它从未使用过，我看不到它的用途。任何解释都非常感谢。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-16T03:50:16.837

它只是一种通用机制，您可以附加您可能想要用于配置`Fragment`或在操作期间以其他方式读取的数据值，类似于您如何通过它将额外的 a`Bundle`传递给新的。`Activity``Intent`

然而，我确实同意，因为 a`Fragment`可以使用它的构造函数来实例化，而 an`Activity`不能，API 的有用性可能会受到影响，因为您可以在返回实例之前轻松配置 a `Fragment`using setter 方法和内部的成员变量。`newInstance()`例如，您的代码可以在被`Fragment`调用对象上实现一个`setTitle()`您可以调用的方法，并且您不需要将其作为参数传递。但是，如果该模型适合您的应用程序，参数确实提供了将此信息存储为键/值数据的好方法。

关于 a 的参数的一个关键区别`Fragment`是它们作为已保存实例状态的一部分保留。因此，如果您的 UI 旋转或某些其他更改需要`Fragment`重新创建，`Bundle`附加的参数将被保留并返回给新实例。

高温高压

# objective-c - 选择器是对象吗？

> ID：11060540
> 
> 赞同：0
> 
> 时间：2012-06-16T03:29:45.753
> 
> 标签：objective-c

来自 Apple 的 Obj-C 文档：

> 如果方法返回一个对象，则发送给 nil 的消息返回 0（nil）。例如：
> 
> ```
>  Person *motherInLaw = [[aPerson spouse] mother]; 
> ```
> 
> 如果此处的配偶对象为nil，则将mother 发送到nil，并且该方法返回nil。

所以`spouse`这里可以是一个对象？如果它是一个对象，它必须是一个选择器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T03:37:10.853

选择器就像 C++ 类中的类方法，它是您调用的方法的名称，您可以定义它将接受的参数的数量和类型。它根本不是一个对象。在上面的示例中，“配偶”是您调用的方法名称。它永远不是一个对象。

编辑：

编码

```
Person *motherInLaw = [[aPerson spouse] mother]; 
```

可以扩展为：

```
Person *theSpouse = [aPerson spouse];
Person *motherInLaw = [theSpouse mother]; 
```

如您所见，在“配偶”方法的返回值上调用了“母亲”方法。这应该可以消除任何混淆。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T04:12:06.280

该文件实际上是正确的。这只是objective-c的语法。实际上，在这个实例中，aPerson 正在为配偶调用 getter 方法。如果在调用时没有设置配偶，它将返回 nil，此时将母亲的 getter 方法发送给配偶会导致对 nil 的方法调用。

你看到的确实是一个方法——只是一个返回类型对象的方法，我上面的海报已经描述了选择器是什么。

# c# - 如何在后面的代码中选择多选元素

> ID：11060543
> 
> 赞同：0
> 
> 时间：2012-06-16T03:30:46.530
> 
> 标签：c#, windows-phone-7, xaml

当导航到多选列表页面时，我试图预选多选列表中的某些项目，因为一旦导航页面，我选择的项目就不会保持选中状态。我创建了一个包含要使用的选定值的列表（名为 StrobeBrushList 位于名为 Settings.cs 的自定义类中，它使用隔离存储来保存值，并且工作正常），但我不确定如何正确地重新选择当页面从导航然后返回到时的那些项目。

*注意，ColorItem 和 ColorHelper 也是用于获取颜色和值的自定义类

多选列表.xaml

```
<toolkit:MultiselectList x:Name="ColorList" HorizontalAlignment="Left" VerticalAlignment="Top" Tap="ColorList_Tap">
                <toolkit:MultiselectList.ItemTemplate>
                    <DataTemplate>

                        <StackPanel Orientation="Horizontal" Margin="12,0,0,0" Grid.ColumnSpan="2">
                            <!--<Rectangle Fill="{Binding Brush}" Width="50" Height="50"/>-->
                            <CheckBox Background="{Binding Brush}"/>

                            <TextBlock Text="{Binding Name}" Margin="12,10,0,0"/>
                        </StackPanel>
                    </DataTemplate>
                </toolkit:MultiselectList.ItemTemplate>
            </toolkit:MultiselectList> 
```

多选列表.xaml.cs

```
List<ColorItem> solidColorBrushList;

public MultiselectlistPage()
    {
        InitializeComponent();

        solidColorBrushList = new List<ColorItem>()
        {
            new ColorItem { Brush = ColorHelper.ToSolidColorBrush("#FFF0F8FF"), Name = "alice blue" },
            new ColorItem { Brush = ColorHelper.ToSolidColorBrush("#FFFAEBD7"), Name = "antique white" },
            new ColorItem { Brush = ColorHelper.ToSolidColorBrush("#FF00FFFF"), Name = "aqua" },
            new ColorItem { Brush = ColorHelper.ToSolidColorBrush("#FF7FFFD4"), Name = "aquamarine" },
            new ColorItem { Brush = ColorHelper.ToSolidColorBrush("#FFF0FFFF"), Name = "azure" },  //dont translate!?
            new ColorItem { Brush = ColorHelper.ToSolidColorBrush("#FFF5F5DC"), Name = "beige" },

                   ...

        };

        this.ColorList.ItemsSource = solidColorBrushList;

        this.Loaded += new RoutedEventHandler(ColorListPage_Loaded);
    }

    void ColorListPage_Loaded(object sender, RoutedEventArgs e)
    {
        //show checkboxes when page is loaded
        this.ColorList.IsSelectionEnabled = true;
    }

    protected override void OnNavigatedTo(NavigationEventArgs e)
    {
        if (solidColorBrushList == null)
        {
            return;
        }

        ItemContainerGenerator itemContainerGenerator = this.ColorList.ItemContainerGenerator;

        //Settings.StrobeBrushList.Value contains the list of brush items selected by the user
        foreach (SolidColorBrush scB in Settings.StrobeBrushList.Value)
        {
            //this.SetCheckBoxesSelected(true, null);
            if (scB != null)
            {                    
                foreach(ColorItem cI in solidColorBrushList)
                { 
                    //compare the color values of the lists and only select (and show checkmark?) of items in the saved list
                    if (cI.Brush.Color == scB.Color)
                    {
                        DependencyObject vI = itemContainerGenerator.ContainerFromItem(cI);
                        MultiselectItem msI = vI as MultiselectItem;
                        if (msI != null)
                        {
                            msI.IsSelected = true;
                        }
                    }
                }                    
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:07:34.107

如果您有一个多选列表绑定到的项目列表，您可以简单地将“选定项目”添加到列表的`SelectedItems`集合中，然后再将其添加到绑定列表中。

像这样的一些xaml

```
<toolkit:MultiselectList ItemsSource="{Binding AllColors}"> 
```

并在您的填充代码中

```
MultiselectList list = /* The list from your xaml */;
foreach (ColorModel model in allModels) {
    ColorViewModel viewModel = new ColorViewModel(model);
    if (shouldBeSelected(model)) {
        list.SelectedItems.Add(viewModel);
    }
    AllColors.Add(viewModel);
} 
```

# hadoop - 写入本地文件系统或 HDFS 的映射任务的输出？

> ID：11060548
> 
> 赞同：1
> 
> 时间：2012-06-16T03:31:53.507
> 
> 标签：hadoop, mapreduce

我读到 Hadoop Map 任务将其输出写入本地磁盘。

假设如果我只有映射任务而没有任何减速器，映射输出仍然会写入本地文件系统吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T06:43:45.393

是的，它仍然会将输出写入 FileOutputFormat.setOutputPath(JobConf, Path) 设置的路径，并且不会进行排序或分区。

[更多信息：](http://hadoop.apache.org/common/docs/r0.20.0/api/org/apache/hadoop/mapred/JobConf.html#ReducerNone)

更新：正如 Chris White 所提到的，它将直接写入 HDFS 而不是本地文件系统。

# java - 如何存储生成的文本字段中的数据

> ID：11060553
> 
> 赞同：0
> 
> 时间：2012-06-16T03:32:25.160
> 
> 标签：java, swing

这是我想做的事情的概述。该程序将接受正整数和负整数来进行加法、减法、乘法、除法。将有两个并排的罐子，在输入数字时，球会掉进罐子里。如果输入的数字是正数，它将放入一个罐子中，如果输入的数字是负数，它将放入另一个罐子中。执行计算时，球数的结果将保留在罐中。一次也可以计算两个以上的数字。

这很简单，但不确定要走什么路。有人可以指导我如何做到这一点。我已经开始了，但不确定是否在正确的轨道上。这是我到目前为止所做的。

我有两个带有下拉菜单的文本字段来选择操作类型（x、/、-、+）。如果需要更多数字，“添加”按钮可添加更多文本字段。但我不确定如何存储这些数字并让数字在输入文本字段时减少球的数量。

任何帮助或想法都会非常有用。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T03:50:46.510

除非我误解了您要做什么，否则您似乎想要一种视觉计算器，每次计算的操作数可变。

尽管许多人可能会争论这一点，但这样做的一种简单且具有教育意义的方法是创建一个“操作”对象（类），其中包含输入的数字和将要执行的操作（+-*/）。

从这里您可以采取两种方法...

**理智的做法：**

将操作数限制为一个合理的数字（即 8）并创建一个静态大小的数组（即 Operation[] ops = new Operation[8]; ），并且对于每个达到限制的新操作，将其添加到数组中.

执行此操作后，您可以保留条目计数器或搜索数组，直到遇到未初始化的索引，然后按优先级（+ 然​​后 - 然后 * 然后 /...）对操作进行排序并运行计算。

**不太理智的方法：**

无限操作！与之前仅使用 ArrayList ( [ArrayList, java API](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html) ) 的操作相同，一旦您获得了条目总数，请执行与上述相同的操作。

快乐编码；）

# jekyll - Jekyll 无法生成任何东西

> ID：11060556
> 
> 赞同：2
> 
> 时间：2012-06-16T03:32:49.477
> 
> 标签：jekyll, static-site

当我运行 Jekyll 时，它不会生成任何东西。我看到的输出：

```
Configuration from /home/mbsheikh/techtraits/techtraits-blog/_config.yml
Auto-regenerating enabled: /home/mbsheikh/techtraits/techtraits-blog -> /home/mbsheikh/techtraits/techtraits-blog/_site
[2012-06-15 23:23:03] regeneration: 118 files changed 
```

`_site`目录是空的。有没有办法调试 Jekyll？我更改了几个文件，但在`_site`.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-04T02:54:06.080

`auto=false`在 中设置`_config.yml`，然后`jekyll`再次运行，然后您将看到 ruby​​ 错误跟踪信息。

# c# - 持有 sql money 数据类型的变量不会更新（C#）

> ID：11060557
> 
> 赞同：1
> 
> 时间：2012-06-16T03:33:26.580
> 
> 标签：c#, sqldatareader, sqldatatypes, type-equivalence

我的 sql server 数据库中有一个列类型 money ，即`moneyAcumulated`. 然后，`command`我使用一个对象执行一个存储过程，该过程 - 除其他外 - 为 column 带来值`moneyAcumulated`。然后在 while 循环中，我将存储过程返回的每一列的所有值存储在变量中。

```
SqlCommand command = new SqlCommand("getTickets", Connection.getConnection());
            command.CommandType = CommandType.StoredProcedure;

            SqlDataReader reader = command.ExecuteReader();

            string bet = "";
            decimal moneyAcumulated = 0.0M;
            string id= "";
            string name = "";
            int cod = -1;
            decimal prize = 0.0M;
            while (reader.Read())
            {
                bet = reader.GetString(0);
                moneyAcumulated = reader.GetDecimal(1); // This variable doesn't chage its value
                name = reader.GetString(2);
                id = reader.GetString(3);
                cod = reader.GetInt32(4);
            } 
```

第一次while循环迭代每个变量都取正确的值（包括`moneyAcumulated`带来的`reader`，但第二次`moneyAcumulated`没有改变它的值而其他人这样做，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T05:51:59.040

问题是SqlDataReader加载了`command.ExecuteReader`内存中返回的所有数据然后如果数据库中的数据发生变化，它们在内存中不会改变，我以为每次程序执行该`reader.Read()`方法时它们都会改变，所以这就是为什么不工作。由于`moneyAcumulated`数据库中的字段**最初**对于所有让我感到困惑的元组都是相同的，因为其他的都在改变而`moneyAcumulated`没有改变。

# java - 数字格式异常：无法识别字符串

> ID：11060560
> 
> 赞同：-1
> 
> 时间：2012-06-16T03:34:17.767
> 
> 标签：java

我正在尝试创建一个`filereader`最多可以创建 50 个客户实例的实例，每个实例都有：

```
String last names, first names,

int birth year, month, day, and SIN number (9 digits)

double savings balance (private double sbalance), chequing account, and credit card. 
```

文本文件由九个字段组成，为每个客户重复。

```
Yang
Wesley
324917400
1996
8
1
3233.36
none
none
Tam
Christian
984635684
1996
6
12
none
10233.52
none 
```

这是方法：

```
public static customer [] customerarray = new customer [50];
public static void readfile (){ 
String sb = "";
String cb = "";
String ca = "";

int counter = 0;
String thisLine;

try {
        BufferedReader br = new BufferedReader(new FileReader("bankinfo.txt"));
        while ((thisLine = br.readLine()) != null) {
           customerarray[counter].setLastName(thisLine);
           System.out.println (lastname);
           customerarray[counter].setFirstName(br.readLine());
           System.out.println (firstname);
           customerarray[counter].setSin(Integer.parseInt(br.readLine()));
           System.out.println (sin);
           customerarray[counter].setYear(Integer.parseInt(br.readLine()));
           System.out.println (year);
           customerarray[counter].setMonth(Integer.parseInt(br.readLine()));
           System.out.println (month);
           customerarray[counter].setDay(Integer.parseInt(br.readLine()));
           System.out.println (day);
           sb = br.readLine();
           System.out.println (sb);
           if (sb == "none"){
              customerarray[counter].setSBalance("none") ;
           }
           else {
              customerarray[counter].setSBalance(Double.parseDouble(sb));
           }
           cb = br.readLine();
           System.out.print (cb);
           if (cb == "none"){
              customerarray[counter].setCBalance ("none");
              System.out.print (cbalance);
           }
           else if (cb != "none"){
              customerarray[counter].setCBalance(Double.parseDouble(cb));
           }
           else{
              System.out.print ("error CBalance");
           }

           ca = br.readLine();
           if (ca == "none"){
              customerarray[counter].setSBalance("none") ;
           }
           else {
              customerarray[counter].setCardbal(Double.parseDouble(ca));
           }

           counter++;

        }  
     }

        catch (IOException e) {
           System.err.println("Error: " + e);
        }
     customerarray[0].printSin();
  } 
```

输出是：

```
Yang
Wesley
324917400
1996
8
1
3233.36
noneException in thread "main" java.lang.NumberFormatException: For input string:      "none"
at sun.misc.FloatingDecimal.readJavaFormatString(FloatingDecimal.java:1222)
at java.lang.Double.parseDouble(Double.java:510)
at customer.readfile(customer.java:81)
at customer.main(customer.java:38) 
```

为什么它不能识别 'cb' 是 == 到“none”？

当我运行程序时出现问题 - 它在

```
if (cb == "none"){
 customerarray[counter].setCBalance ("none");
              System.out.print (cbalance);
           }
           else if (cb != "none"){
              customerarray[counter].setCBalance(Double.parseDouble(cb));
           } 
```

我将整个 .java 文件和 bankinfo.txt 文件上传到 [这里](http://www.mediafire.com/?bkwc32x57psqujy "Mediafire 链接：包含带有 customer.java 和 bankinfo.txt 的 .zip 文件")

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T03:38:08.633

你需要使用`cb.equals("none")`. 阅读[此处](http://blog.enrii.com/2006/03/15/java-string-equality-common-mistake/)以获得更多说明。

您的代码应如下所示：

```
 if (cb.equals("none")){
          customerarray[counter].setCBalance ("none");
          System.out.print (cbalance);
       }
       else {
          customerarray[counter].setCBalance(Double.parseDouble(cb));
       } 
```

*（无需检查`else if`，因为它要么是“无”，要么不是。）*

此外，这也应该适用于`sb`和`ca`。

# java - 创建一个 JPanel

> ID：11060561
> 
> 赞同：2
> 
> 时间：2012-06-16T03:34:22.203
> 
> 标签：java, swing, oop, layout

我的主类显示一个 JMenuBar。此 JMenuBar 由“calculator.ui.MenuBar”管理。

```
public JMenuBar createMenuBar() 
{
    JMenuBar menuBar = new JMenuBar();
    new calculator.ui.MenuBar(menuBar);
    return menuBar;
} 
```

MenuBar 创建我的“文件”JMenu 和“插入”JMenu。

```
public MenuBar(JMenuBar menuBar)
{
    new FileMenu(menuBar);
    new InsertMenu(menuBar);
} 
```

FileMenu 包含“文件”的所有选项。在 File 类中，有一个名为“New Calculator”的 JMenuItem。现在，当您单击“新建计算器”时，我希望主类中的 JPanel 在我的主类中创建一个计算器实例。

```
newFileSubMenu = new JMenu("New...");
calculatorFileSubMenu = new JMenuItem("New Calculator");

calculatorFileSubMenu.getAccessibleContext().setAccessibleDescription(
                "New Calculator");

newFileSubMenu.add(calculatorFileSubMenu);

ActionListener newCalculatorListener = new ActionListener() 
    {
    public void actionPerformed(ActionEvent event) 
    {
       newCalculator();
    }
};
calculatorFileSubMenu.addActionListener(newCalculatorListener); 
```

这是我的主类 JPanel 的代码：

```
public Container createContentPane() {
    JPanel contentPane = new JPanel(new BorderLayout());
    contentPane.setOpaque(true);

    JTabbedPane tabbedPane = new JTabbedPane();

    return contentPane;
} 
```

我的问题与我的程序设计有关。对于计算器的每个实例，我想：

1.  在包含我的计算器的主 JPanel 中创建一个 JPanel（让我感到困惑的是我如何 - 从我的 FileMenu 类 - 创建一个在我的主类中的 JPanel？）。
2.  确保 Calculator 对象刷新。

注意：我还希望我的 JPanel 位于 TabbedPanes 中（如果这改变了任何东西；如果没有，那么一旦我知道第一个问题的答案，我就可以弄清楚那部分。）

感谢您的帮助，我希望我已经很清楚我想要做什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T10:28:38.567

在您的菜单项中[`Action`](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)，您可以使用[`setSelectedIndex()`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTabbedPane.html#setSelectedIndex%28int%29)您的[`JTabbedPane`](http://docs.oracle.com/javase/tutorial/uiswing/components/tabbedpane.html)来选择包含现有计算器实例的窗格。您可以使用[`setComponentAt()`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTabbedPane.html#setComponentAt%28int,%20java.awt.Component%29)计算器实例替换任何选项卡的内容。

[这里](https://stackoverflow.com/a/4039359/230513)有一个相关的例子。

# asp.net - 单击提交按钮时禁用中继器中的选中复选框

> ID：11060564
> 
> 赞同：2
> 
> 时间：2012-06-16T03:34:54.360
> 
> 标签：asp.net

当用户单击 ASP.NET 中的提交按钮时，我想禁用选中复选框。我可以使用按钮的 onclick 事件使用 JavaScript 禁用复选框。复选框位于中继器中。当通过单击提交按钮提交表单时，在代码隐藏按钮单击代码中，没有一个复选框显示为选中状态。如何在单击提交按钮时禁用选中的复选框，并且在提交页面时仍然看到复选框被选中？有解决办法吗？我的偏好是在 JavaScript 中执行此操作，但我也愿意使用 jQuery。

```
function disableCheckboxes() {
    for (var count = 0; i < document.forms[0].elements.length; i++) 
    {
        if (document.forms[0].elements[count].type == 'checkbox')
        {
            document.forms[0].elements[count].disabled = true;
        }
    }
}
 <form id="form1" runat="server">
<div>
    <table>

        <asp:Repeater ID="rptCustomer" runat="server" OnItemDataBound="DisplayCustomerRepeater_ItemDataBound">
            <ItemTemplate>
                <tr>
                    <td>
                        <asp:CheckBox ID="checkSubscription" runat="server" />
                    </td>
                    <td>
                        <%# ((Customer)Container.DataItem).FirstName + " " + ((Customer)Container.DataItem).LastName%>
                    </td>
                </tr>
                <tr>
                    <td>
                        <hr />
                    </td>
                </tr>
            </ItemTemplate>
        </asp:Repeater>
    </table>
</div>
<div>
    <asp:Button ID="btnSubmit" OnClick="btnSubmit_Click"
        Text="Submit" runat="server" /></div>
</form>

protected void Page_Load(object sender, EventArgs e)
{
    if (!this.IsPostBack)
    {
        rptCustomer.DataSource = customers;
        rptCustomer.DataBind();
    }

    btnSubmit.Attributes.Add("onclick", String.Concat("this.disabled=true;disableCheckboxes();", ClientScript.GetPostBackEventReference(btnSubmit, "")));
}
protected void DisplayCustomerRepeater_ItemDataBound(object sender, System.Web.UI.WebControls.RepeaterItemEventArgs e)
{
    ListItemType lt = e.Item.ItemType;
    if (lt == ListItemType.Item || lt == ListItemType.AlternatingItem)
    {
        Customer customer = e.Item.DataItem as Customer;
        if (customer != null)
        {
            CheckBox chkCustomer = e.Item.FindControl("checkSubscription") as CheckBox;
            if (chkCustomer != null)
            {
                if (customer.IsEligible)
                {
                    chkCustomer.Checked = true;
                }
            }
        }
    }
}
protected void btnSubmit_Click(object sender, EventArgs e)
{
    bool isChecked = false;

    foreach (RepeaterItem item in rptCustomer.Items)
    {
        CheckBox selectedCheckBox = (CheckBox)item.FindControl("checkSubscription");
        if (selectedCheckBox.Checked)
        {
            isChecked = true;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T05:12:21.603

提交表单时，浏览器根本不会发送禁用的表单元素。

顺便说一句，这正是未选中复选框所发生的情况。提交表单时，禁用的选中复选框将完全按照启用的未选中复选框进行处理。

因此，如果您在提交表单之前禁用所有复选框，则相应的服务器端复选框控件将在回发时全部取消选中。

作为一种解决方法，您需要将每个文本框的状态复制到其他控件中，然后再将其重置为未选中状态。然后您可以使用其他字段来检查您的代码中的状态。

# haskell - 用状态单子打结

> ID：11060565
> 
> 赞同：40
> 
> 时间：2012-06-16T03:34:55.957
> 
> 标签：haskell, tying-the-knot, monadfix

我正在处理一个涉及打结的 Haskell 项目：我正在解析图形的序列化表示，其中每个节点都位于文件的某个偏移量处，并且可能通过其偏移量引用另一个节点。`do rec`所以我需要在解析时建立一个从偏移量到节点的映射，我可以在一个块中反馈给自己。

我有这个工作，并且有点合理地抽象成一个`StateT`-esque monad 转换器：

```
{-# LANGUAGE DoRec, GeneralizedNewtypeDeriving #-}

import qualified Control.Monad.State as S

data Knot s = Knot { past :: s, future :: s }

newtype RecStateT s m a = RecStateT (S.StateT (Knot s) m a) deriving
  ( Alternative
  , Applicative
  , Functor
  , Monad
  , MonadCont
  , MonadError e
  , MonadFix
  , MonadIO
  , MonadPlus
  , MonadReader r
  , MonadTrans
  , MonadWriter w )

runRecStateT :: RecStateT s m a -> Knot s -> m (a, Knot s)
runRecStateT (RecStateT st) = S.runStateT st

tie :: MonadFix m => RecStateT s m a -> s -> m (a, s)
tie m s = do
  rec (a, Knot s' _) <- runRecStateT m (Knot s s')
  return (a, s')

get :: Monad m => RecStateT s m (Knot s)
get = RecStateT S.get

put :: Monad m => s -> RecStateT s m ()
put s = RecStateT $ S.modify $ \ ~(Knot _ s') -> Knot s s' 
```

该`tie`函数是魔法发生的地方：调用`runRecStateT`产生一个值和一个状态，我将其作为它自己的未来提供。请注意，它`get`允许您读取过去和未来的状态，但`put`只允许您修改“现在”。

**问题 1**：一般来说，这似乎是实现这种打结模式的一种不错的方式吗？或者更好的是，是否有人对此实施了通用解决方案，而我在窥探 Hackage 时忽略了这一点？我用头撞了一下`Cont`monad，因为它看起来可能更优雅（参见Dan Burton[的类似帖子](https://stackoverflow.com/questions/10560124/using-cont-to-acquire-values-from-the-future-and-the-past)），但我就是无法解决。

**完全主观的问题 2**：我对我的调用代码最终看起来的方式并不完全兴奋：

```
do
  Knot past future <- get
  let {- ... -} = past
      {- ... -} = future
      node = {- ... -}
  put $ {- ... -}
  return node 
```

显然，这里省略了实现细节，重要的一点是我必须*在 let 绑定*`past`中获取和`future`状态，模式匹配它们（或显式使先前的模式变得惰性）以提取我关心的任何内容，然后构建我的节点，更新我的状态，最后返回节点。似乎不必要地冗长，而且我特别不喜欢意外地使提取and状态的模式变得严格是多么容易。那么，有人能想到更好的界面吗？*`past``future`*

 ** * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-18T20:12:41.263

[我在题为Assembly: Circular Programming with Recursive do](http://www.haskell.org/wikiupload/1/14/TMR-Issue6.pdf)上写了一篇关于这个主题的文章，我在其中描述了使用打结构建汇编程序的两种方法。像您的问题一样，汇编程序必须能够解析文件中稍后可能出现的标签地址。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-18T20:21:21.890

关于实现，我将它作为一个 Reader monad（用于未来）和一个 State monad（用于过去/现在）的组合。原因是您只设置了一次未来（在 中`tie`），然后不要更改它。

```
{-# LANGUAGE DoRec, GeneralizedNewtypeDeriving #-}

import Control.Monad.State
import Control.Monad.Reader
import Control.Applicative

newtype RecStateT s m a = RecStateT (StateT s (ReaderT s m) a) deriving
  ( Alternative
  , Applicative
  , Functor
  , Monad
  , MonadPlus
  )

tie :: MonadFix m => RecStateT s m a -> s -> m (a, s)
tie (RecStateT m) s = do
  rec (a, s') <- flip runReaderT s' $ flip runStateT s m
  return (a, s')

getPast :: Monad m => RecStateT s m s
getPast = RecStateT get

getFuture :: Monad m => RecStateT s m s
getFuture = RecStateT ask

putPresent :: Monad m => s -> RecStateT s m ()
putPresent = RecStateT . put 
```

关于您的第二个问题，了解您的数据流会有所帮助（即有一个最小的代码示例）。严格的模式总是导致循环是不正确的。确实，您需要小心，以免创建非生产循环，但确切的限制取决于您正在构建的内容和方式。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-06-19T01:39:23.343

我一直在玩一些东西，我想我想出了一些……有趣的东西。我称它为“Seer”monad，它提供（除了 Monad 操作之外）两个原始操作：

```
see  :: Monoid s => Seer s s
send :: Monoid s => s -> Seer s () 
```

和运行操作：

```
runSeer :: Monoid s => Seer s a -> a 
```

这个单子的工作方式是`see`允许一个先知看到*一切*，并`send`允许一个先知“发送”信息给所有其他的先知让他们看到。每当任何一个 Seer 执行`see`操作时，他们都能够看到所有已发送的信息，以及所有将要发送的信息。换句话说，在给定的运行中，`see`无论何时何地调用它，总是会产生相同的结果。另一种说法`see`是你如何获得对“打结”结的工作参考。

这实际上与 using 非常相似，只是`fix`所有子部分都是增量和隐式添加的，而不是显式添加的。显然，在存在悖论的情况下，先知将无法正常工作，需要足够的惰性。例如，`see >>= send`可能会导致信息爆炸，使您陷入时间循环。

一个愚蠢的例子：

```
import Control.Seer
import qualified Data.Map as M
import Data.Map (Map, (!))

bar :: Seer (Map Int Char) String
bar = do
  m <- see
  send (M.singleton 1 $ succ (m ! 2))
  send (M.singleton 2 'c')
  return [m ! 1, m ! 2] 
```

正如我所说，我只是在玩弄，所以我不知道这是否比你所拥有的更好，或者它是否有任何好处！但它很漂亮，也很相关，如果你的“结”状态是 a `Monoid`，那么它可能对你有用。公平警告：我`Seer`使用`Tardis`.

[https://github.com/DanBurton/tardis/blob/master/Control/Seer.hs](https://github.com/DanBurton/tardis/blob/master/Control/Seer.hs)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-26T10:01:34.513

我最近遇到了类似的问题，但我选择了不同的方法。递归数据结构可以表示为数据类型函子上的类型固定点。然后可以将加载数据分为两部分：

*   将数据加载到仅通过某种标识符引用其他节点的结构中。在示例中`Loader Int (NodeF Int)`，它构造了一个类型值的映射`NodeF Int Int`。
*   通过用实际数据替换标识符来创建递归数据结构来打结。在示例中，生成的数据结构具有 type `Fix (NodeF Int)`，为了方便起见，它们稍后被转换`Node Int`为。

它缺乏适当的错误处理等，但这个想法应该很清楚。

```
-- Public Domain

import Control.Monad
import Data.Map (Map)
import qualified Data.Map as Map
import Data.Maybe (fromJust)

-- Fixed point operator on types and catamohism/anamorphism methods
-- for constructing/deconstructing them:

newtype Fix f = Fix { unfix :: f (Fix f) }

catam :: Functor f => (f a -> a) -> (Fix f -> a)
catam f = f . fmap (catam f) . unfix

anam :: Functor f => (a -> f a) -> (a -> Fix f)
anam f = Fix . fmap (anam f) . f

anam' :: Functor f => (a -> f a) -> (f a -> Fix f)
anam' f = Fix . fmap (anam f)

-- The loader itself

-- A representation of a loader. Type parameter 'k' represents the keys by
-- which the nodes are represented. Type parameter 'v' represents a functor
-- data type representing the values.
data Loader k v = Loader (Map k (v k))

-- | Creates an empty loader.
empty :: Loader k v
empty = Loader $ Map.empty

-- | Adds a new node into a loader.
update :: (Ord k) => k -> v k -> Loader k v -> Loader k v
update k v = update' k (const v)

-- | Modifies a node in a loader.
update' :: (Ord k) => k -> (Maybe (v k) -> (v k)) -> Loader k v -> Loader k v
update' k f (Loader m) = Loader $ Map.insertWith (const (f . Just)) k (f Nothing) $ m

-- | Does the actual knot-tying. Creates a new data structure
-- where the references to nodes are replaced by the actual data.
tie :: (Ord k, Functor v) => Loader k v -> Map k (Fix v)
tie (Loader m) = Map.map (anam' $ \k -> fromJust (Map.lookup k m)) m

-- -----------------------------------------------------------------
-- Usage example:

data NodeF n t = NodeF n [t]
instance Functor (NodeF n) where
    fmap f (NodeF n xs) = NodeF n (map f xs)

-- A data structure isomorphic to Fix (NodeF n), but easier to work with.
data Node n = Node n [Node n]
  deriving Show
-- The isomorphism that does the conversion.
nodeunfix :: Fix (NodeF n) -> Node n
nodeunfix = catam (\(NodeF n ts) -> Node n ts)

main :: IO ()
main = do
    -- Each node description consist of an integer ID and a list of other nodes
    -- it references.
    let lss = 
            [ (1, [4])
            , (2, [1])
            , (3, [2, 1])
            , (4, [3, 2, 1])
            , (5, [5])
            ]
    print lss
    -- Fill a new loader with the data:
    let
        loader = foldr f empty lss
        f (label, dependsOn) = update label (NodeF label dependsOn)
    -- Tie the knot:
    let tied' = tie loader
    -- And convert Fix (NodeF n) into Node n:
    let tied = Map.map nodeunfix tied'

    -- For each node print the label of the first node it references
    -- and the count of all referenced nodes.
    print $ Map.map (\(Node n ls@((Node n1 _) : _)) -> (n1, length ls)) tied 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-15T23:34:37.093

我对 Monad 的使用量有点不知所措。我可能不理解过去/未来的事情，但我猜你只是想表达惰性+固定点绑定。（如果我错了，请纠正我。）`RWS`R=W 的 Monad 用法有点有趣，但是当你可以用 . 做同样的事情时，你不需要`State`和。如果 Monads 不能让事情变得更容易，那么使用 Monads 是没有意义的。（无论如何，只有极少数 Monad 代表时间顺序。）`loop``fmap`

我打结的一般解决方案：

1.  我将所有内容*解析*为节点列表，
2.  将该列表转换`Data.Vector`为 O(1) 访问装箱（=惰性）值的列表，
3.  `let`使用or函数将该结果绑定到名称`fix`，`mfix`
4.  并在*解析器*中访问名为 Vector 的名称。（*见*1。）

* * *

那个`example`解决方案在你的[博客](http://mergeconflict.com/tying-the-knot-redux)中，你写的地方。像这样：

```
data Node = Node {
  value :: Int,
  next  :: Node
} deriving Show
…
tie = …
parse = …
data ParserState = …
…
example :: Node
example =
  let (_, _, m) = tie parse $ ParserState 0 [(0, 1), (1, 2), (2, 0)]
  in (m Map.! 0) 
```

我会这样写：

```
{-# LANGUAGE ViewPatterns, NamedFieldPuns #-}
import Data.Vector as Vector

example :: Node
example =
   let node :: Int -> Node
       node = (Vector.!) $ Vector.fromList $
                   [ Node{value,next}
                   | (value,node->next) <- [(0, 1), (1, 2), (2, 0)]
                   ]
   in (node 0) 
```

或更短：

```
{-# LANGUAGE ViewPatterns, NamedFieldPuns #-}
import Data.Vector as Vector

example :: Node
example = (\node->(Vector.fromList[ Node{value,next}
                                  | (value,node->next) <- [(0, 1), (1, 2), (2, 0)]
                                  ] Vector.!)) `fix` 0 
```*

# javascript - 在浏览器中绘制动态圆圈的最佳方法是什么（除了flash）

> ID：11060569
> 
> 赞同：0
> 
> 时间：2012-06-16T03:36:06.597
> 
> 标签：javascript, html

我想画圆圈，我想根据一些服务器事件重新调整它的大小？有可能是 js/html 吗？

PS：我试过画布，但画布不允许单独调整圆圈的大小。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T03:42:39.653

1.  使用[SVG](http://www.w3.org/TR/SVG/struct.html)。（最靠谱的）
2.  使用作为 HTML5 标签且不是跨浏览器的[画布。](http://dev.w3.org/html5/2dcontext/)（画一个圆圈然后清理它并画另一个）
3.  使用[CSS3`border-radius`属性](http://www.css3.info/preview/rounded-border/)。

    ```
    -webkit-border-radius: 10px;
    -moz-border-radius: 10px;
    border-radius: 10px; 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T03:38:19.500

试试 Raphael
[http://raphaeljs.com/](http://raphaeljs.com/)
[http://raphaeljs.com/reference.html#Paper.circle](http://raphaeljs.com/reference.html#Paper.circle)这是一个如何在 Raphael 中画圆
的好[例子。](http://net.tutsplus.com/tutorials/javascript-ajax/an-introduction-to-the-raphael-js-library/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T03:39:12.957

也许创建一个具有相同高度和宽度、50% 的“边框半径”和几个像素的“边框宽度”的某个大小的块元素？

[这是一个例子。](http://jsfiddle.net/vx3hD/) 如果需要动态调整大小，可以使用 JavaScript 设置高度和宽度。

# php - php序列化未定义的变量

> ID：11060576
> 
> 赞同：2
> 
> 时间：2012-06-16T03:36:59.507
> 
> 标签：php, serialization

我有以下内容；

```
$foo;
$foo  = serialize($foo);
print_r($foo);

it gave me a result of N; 
```

现在我不知道这是否是我正在使用的系统所独有的，或者这是否是正常结果。我所知道的是它给我的网站造成了重大问题。

我的问题是......在序列化未定义的变量时这是否正常？如果是这样，有人可以解释为什么它会输出这个结果。谢谢你的时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T03:52:48.673

该字符串似乎`N;`是 的[`serialize()`](http://php.net/serialize)d 形式`null`。（[请参阅此键盘](http://codepad.viper-7.com/n9eFIu)）
但是，需要注意两点：

1.  您应该在使用它们之前定义所有变量，即使您只是将它们声明为`null`. 否则，您将收到有关`$foo`未定义变量的通知。有些人认为你可以隐藏警告，但这是不好的做法。您应该通过对所有变量使用合理的默认值来完全防止它们。
2.  通常，不需要读取`serialize()`. 您可以将其存储在数据库、文件或内存缓存系统（如 Memcached、APC 或 Redis）中。但是，您永远不需要了解输出的`serialize()`含义，这要归功于[`unserialize()`](http://php.net/unserialize).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T03:53:02.407

它按预期工作：

```
<?php

$foo;
$foo  = serialize($foo);
var_dump($foo); // Print the string "N"

$unserialized = unserialize($foo);
var_dump($unserialized); // Print NULL 
```

但是你为什么要查看 的输出`serialize`？这应该与您的网站无关。重要的是，它`unserialize`会为您提供正确的数据。

# objective-c - NSString 填充/字符之间的空格

> ID：11060577
> 
> 赞同：6
> 
> 时间：2012-06-16T03:37:08.123
> 
> 标签：objective-c, ios, nsstring, padding, kerning

我正在 Obj.C 中寻找一种简单的方法来在字符串的每个字符之间添加一个空格。所以“1234”看起来像“1 2 3 4”。

我在这里找到了一个完美的 javascript 示例：[https ://stackoverflow.com/a/7437422/949538](https://stackoverflow.com/a/7437422/949538)

有谁知道 Obj.C 有类似的东西吗？Kerning 是 iOS 中的 PITA，无论如何这就是我所需要的……

想法/评论？

谢谢！- 德鲁

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-16T10:49:58.960

要正确执行此操作，考虑到 David Rönnqvist 的评论中提到的问题，请执行以下操作：

```
NSMutableString* result = [origString mutableCopy];
[result enumerateSubstringsInRange:NSMakeRange(0, [result length])
                           options:NSStringEnumerationByComposedCharacterSequences | NSStringEnumerationSubstringNotRequired
                        usingBlock:^(NSString *substring, NSRange substringRange, NSRange enclosingRange, BOOL *stop){
     if (substringRange.location > 0)
         [result insertString:@" " atIndex:substringRange.location];
}]; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-16T03:55:08.723

试试这个 ：

```
NSString *string =[NSString stringWithString:@"1234"];
NSMutableArray *buffer = [NSMutableArray arrayWithCapacity:[string length]];
for (int i = 0; i < [string length]; i++) {
    [buffer addObject:[NSString stringWithFormat:@"%C", [string characterAtIndex:i]]];
}
NSString *final_string = [buffer componentsJoinedByString:@" "]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T09:26:11.343

做这个：

```
 NSString *string =[NSString stringWithString:@"1234"];

    NSMutableString *spacedString= [NSMutableString stringWithString:[NSString stringWithFormat:@"%C",[string characterAtIndex:0]]];

    for(int i = 1; i<[string length];i++)
    {
        [spacedString appendString:[NSString stringWithFormat:@" %C",[string characterAtIndex:i]]];
    } 
```

# android - 拉伸图像按钮

> ID：11060579
> 
> 赞同：1
> 
> 时间：2012-06-16T03:37:20.053
> 
> 标签：android, size, imagebutton

我`layout`用很少的`ImageButtons`. 我的布局在小屏幕（例如 3.6 英寸到 4.2 英寸）上运行良好，但是当我在 7 英寸或 9 英寸平板电脑上使用我的应用程序时`layout`，纵向和横向模式都变得丑陋。我没有为`ImageButton`. 我怎样才能解决这个问题？

在 4 英寸屏幕上：

![在 3.8](../Images/aae36f74414fa6cc3c9d5930d690a8a3.png)

在 7 英寸屏幕上：

![7日](../Images/f64609b0c22e742c39cbb919a6858038.png)

这是我的布局代码：

```
<?xml version="1.0" encoding="utf-8"?>    
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent" 
android:layout_height="fill_parent" 
android:orientation="vertical" >

   <LinearLayout
       xmlns:android="http://schemas.android.com/apk/res/android"
       android:layout_width="fill_parent"
       android:layout_height="35dp"
       android:background="#81BEF7"
       android:orientation="vertical"
       android:scrollbars="vertical" >

        <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
                android:id="@+id/buttonlayout" android:orientation="horizontal"
                android:layout_width="fill_parent" android:layout_height="wrap_content"
                android:height="32dp" android:gravity="left|top" android:background="#000000"
                android:paddingTop="2dp" android:paddingBottom="2dp">
                <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
                        android:id="@+id/buttonlayout2" android:orientation="horizontal"
                        android:layout_height="wrap_content" android:gravity="left|center_vertical"
                        android:layout_gravity="left" android:layout_width="wrap_content">
                        <ImageButton android:id="@+id/imgbtn1"
                                android:layout_width="32dp" android:layout_height="32dp"
                                android:background="@drawable/logo" />
                        <TextView android:id="@+id/txtTest" android:layout_width="fill_parent"
                                android:layout_height="fill_parent" android:textStyle="bold"
                                android:text="Max-Apps" android:textColor="#ffffff"
                                android:textSize="15sp" android:gravity="center_vertical"
                                android:paddingLeft="5dp" />
                        <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
                                android:id="@+id/buttonlayout2" android:orientation="horizontal"
                                android:layout_height="wrap_content" android:gravity="right"
                                android:layout_gravity="right" android:layout_width="fill_parent">
                        </LinearLayout>
                </LinearLayout>
                <TableLayout android:id="@+id/TableLayoutTop"
                        android:layout_gravity="left" android:scrollbars="horizontal|vertical"
                        android:scrollbarAlwaysDrawVerticalTrack="true"
                        android:scrollbarAlwaysDrawHorizontalTrack="true"
                        android:layout_height="wrap_content" android:layout_width="fill_parent"
                        android:orientation="horizontal">
                        <TableRow android:id="@+id/TableRowTop"
                                android:layout_height="wrap_content" android:layout_width="fill_parent" />
                </TableLayout>
        </LinearLayout>
</LinearLayout>
<HorizontalScrollView
        android:id="@+id/scrollView1"
        android:layout_height="50dp"
        android:layout_width="fill_parent" >

<LinearLayout
    android:id="@+id/select_names_tags_ll1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:background="@android:drawable/bottom_bar" 
    android:orientation="horizontal"
    android:paddingBottom="1.0dip"
    android:paddingLeft="4.0dip"
    android:paddingRight="4.0dip"
    android:paddingTop="5.0dip" 
    android:gravity="center">

    <Button
        android:id="@+id/btnPageTwo"
        android:layout_width="80dp"
        android:layout_height="wrap_content"        
        android:padding="5dp"
        android:text="Featured" 
        />

    <Button
        android:id="@+id/button3"
        android:layout_width="130dp"
        android:layout_height="wrap_content"
        android:padding="5dp"
        android:text="Category"
        android:onClick="onClickCategory" />

    <Button
        android:id="@+id/button2"
        android:layout_width="130dp"
        android:layout_height="wrap_content"
        android:padding="5dp"
        android:text="Top Download" 
        android:onClick="onClickList"/>

    <Button
        android:id="@+id/button3"
        android:layout_width="130dp"
        android:layout_height="wrap_content"
        android:padding="5dp"
        android:text="About us" />
</LinearLayout>    
</HorizontalScrollView>

<ScrollView
        android:id="@+id/scrollView2"
        android:layout_height="fill_parent"
        android:layout_width="fill_parent" >

        <LinearLayout
            android:id="@+id/linearLayout1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true">

    <LinearLayout
        android:orientation="horizontal"        
        android:paddingLeft="4.0dip"
        android:paddingTop="5.0dip"
        android:paddingRight="4.0dip"
        android:paddingBottom="1.0dip"
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content"
        android:layout_below="@+id/TextView01">

        <ImageButton
            android:id="@+id/imageButton1"
            android:layout_width="wrap_content" 
            android:layout_weight="1"
            android:layout_height="wrap_content"
            android:layout_margin="2dip"
            android:background="@drawable/winnie"
            android:onClick="onClickPageTwo" /> 0       

        <ImageButton
                 android:id="@+id/imageButton2"
                 android:layout_width="wrap_content" 
                 android:layout_weight="1"
                 android:layout_height="wrap_content"
                 android:layout_margin="2dip"                                 
                 android:background="@drawable/games"
                 android:onClick="onClickPageTwo" /> 
    </LinearLayout>   
</RelativeLayout>

<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true">

    <LinearLayout
        android:orientation="horizontal"
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content"
        android:gravity="center_horizontal" 
        android:layout_below="@+id/TextView01">

        <ImageButton
            android:id="@+id/imageButton1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/papago"
            android:onClick="onClickPageTwo" />
    </LinearLayout>
</RelativeLayout>

<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true">

    <LinearLayout
        android:orientation="horizontal"        
        android:paddingLeft="4.0dip"
        android:paddingTop="1.0dip"
        android:paddingRight="4.0dip"
        android:paddingBottom="1.0dip"
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content"
        android:layout_below="@+id/TextView01">        

        <ImageButton
                 android:id="@+id/imageButton3"
                 android:layout_width="fill_parent" 
            android:layout_weight="1"
                 android:layout_height="wrap_content"
                 android:layout_margin="2dip"                                 
                 android:background="@drawable/winnie"
                 android:onClick="onClickPageTwo"  />

        <ImageButton
            android:id="@+id/imageButton4"
            android:layout_width="fill_parent" 
            android:layout_weight="1"
            android:layout_height="wrap_content"
            android:layout_margin="2dip"
            android:background="@drawable/mickey"
            android:onClick="onClickPageTwo" />
    </LinearLayout>   
</RelativeLayout>           

<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content"    
    android:layout_centerHorizontal="true">

    <LinearLayout
        android:orientation="horizontal"        
        android:paddingLeft="4.0dip"
        android:paddingTop="1.0dip"
        android:paddingRight="4.0dip"
        android:paddingBottom="1.0dip"
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content"
        android:gravity="center_horizontal" 
        android:layout_below="@+id/TextView01">

        <ImageButton
            android:id="@+id/imageButton1"
            android:layout_width="wrap_content"            
            android:layout_height="wrap_content"
            android:layout_margin="1dip"
            android:background="@drawable/fb"                         
            android:onClick="onClickPageTwo" />
    </LinearLayout>   
</RelativeLayout>
        </LinearLayout>            
    </ScrollView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T04:04:47.373

您应该为可能的屏幕尺寸设计布局和图像，并将它们放在下面的相应文件夹中。

```
 res/layout/my_layout.xml // layout for normal screen size ("default") 
 res/layout-small/my_layout.xml // layout for small screen size 
 res/layout-large/my_layout.xml // layout for large screen size 
 res/layout-xlarge/my_layout.xml // layout for extra large screen size 
 res/layout-xlarge-land/my_layout.xml // layout for extra large in landscape orientation 

 res/drawable-mdpi/my_icon.png // bitmap for medium density 
 res/drawable-hdpi/my_icon.png // bitmap for high density 
 res/drawable-xhdpi/my_icon.png // bitmap for extra high density 
```

花时间阅读[http://developer.android.com/design/index.html](http://developer.android.com/design/index.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T10:12:06.190

(1) 大屏、中屏、小屏可以将不同尺寸的图片分别放在不同的文件夹中，即hdpi、mdpi、ldpi。设备将根据其大小自动为自己挑选图像。

(2) 在“res”文件夹中创建一个名为“layout-land”的新文件夹，并在此文件夹中创建具有相同名称（与您的主 xml 文件相同的名称）的 xml 文件。只需将主 xml 文件的代码复制并粘贴到此文件中即可。现在在您的活动类中创建一个方法（实际上是覆盖）“onConfigurationChanged()”，并将“onCreate()”方法的代码复制粘贴到其中。

完成上述 2 个步骤后，您会看到无论设备的大小或方向如何，您的应用程序的布局都将始终正确且符合要求。

# ios - 获得超过 25 个 Facebook 墙贴

> ID：11060590
> 
> 赞同：0
> 
> 时间：2012-06-16T03:39:33.180
> 
> 标签：ios, facebook

我正在尝试制作一个 iPhone 应用程序 - 它是一个 Facebook 墙查看器。但是，我无法获得超过 25 个帖子。

听说这是默认的。这个值可以改变吗？

这是我的代码：

```
- (void) getWallList {
    currentApiCall = GETWALLLIST;
    AppDelegate *delegate = (AppDelegate *) [[UIApplication sharedApplication] delegate];
    [[delegate facebook] requestWithGraphPath:@"/me/home" andDelegate:self]; 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T06:51:58.497

是的，您可以通过将**限制**参数设置为您的 Facebook api 来更改它。您可以通过将**限制**传递给 params 字典来设置它。

查看标题**Paging下**[的 Facebook api](http://developers.facebook.com/docs/reference/api/)，您可以在其中通过**limit**和**until** params

 ******看看下面的示例供您参考。

```
params = [[NSMutableDictionary alloc] initWithObjectsAndKeys: [NSString stringWithFormat:@"%d", yourLimit,], @"limit", untilString, @"until", nil];
[[delegate facebook] requestWithGraphPath:@"me/home" andParams:params andDelegate:self]; 
```

`yourLimit`限制变量在哪里，您可以使用键**分页**`until`从 api 响应中设置 ' 值

 **希望这对您有所帮助。********

# jquery - jquery验证插件自定义规则检查单词

> ID：11060591
> 
> 赞同：1
> 
> 时间：2012-06-16T03:39:39.647
> 
> 标签：jquery, jquery-validate

我需要为 Jquery Validation Plugin 创建一个自定义规则来检查一个特定的单词。

在这种情况下，用户必须通过在输入字段中输入单词“cat”来正确回答问题。自定义规则需要将答案定义为“猫”，我认为是一个变量，然后检查它。

我失败的尝试：

```
jQuery.validator.addMethod("answercheck", function(value, element) { 
  var password = string('hot');
  return value(password); 
}, "Type the correct answer"); 
```

和设置：

```
rules: {
    input_answer{
        required: true,
        answercheck: true
    }

messages: {
    input_answer{
        required: "Answer the question",
        answercheck: "Your answer is incorrect"
    } 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T21:46:09.583

**正如其他人所说，这不是一种安全的方法，因为任何人都可以看到/操纵 JavaScript 并轻松绕过它。**

但是，为了简单地回答您的问题，以下是它的完成方式。（这也是一个很好的关于使用的学习练习`addMethod`）......

```
jQuery.validator.addMethod('answercheck', function (value, element) { 
    return this.optional(element) || /^\bcat\b$/.test(value);
}, "Type the correct answer"); 
```

而且你也不需要为`answercheck`下面指定一条消息，因为它已经在上面定义了`method`。（您还缺少此代码中的一些大括号`{`、冒号`:`和逗号`,`。）

```
rules: {
    input_answer: { // <- missing colon after input_answer
        required: true,
        answercheck: true
     }
}, // <- missing brace & comma
messages: {
    input_answer: { // <- missing colon after input_answer
        required: "Answer the question"
        //, answercheck: "Your answer is incorrect"  // not needed, specified in method
    } 
} // <- missing brace and maybe a comma depending on what follows 
```

[**工作 jsFiddle 演示**](http://jsfiddle.net/ht8Lu/)：

[http://jsfiddle.net/ht8Lu/](http://jsfiddle.net/ht8Lu/)

* * *

[根据文档](http://docs.jquery.com/Plugins/Validation/Validator/addMethod#namemethodmessage)，您需要构建自己的自定义方法。

> 添加自定义验证方法。它必须由名称（必须是合法的 javascript 标识符）、基于 javascript 的函数和默认字符串消息组成。
> 
> **论据：**
> 
> **姓名;** String 方法的名称，用于识别和引用它，必须是有效的 javascript 标识符
> 
> **方法;** Callback 实际的方法实现，如果元素有效则返回 true。第一个参数：当前值。第二个参数：经过验证的元素。第三个参数：参数。
> 
> **消息（可选）；**String, Function 要为此方法显示的默认消息。可以是 jQuery.validator.format(value) 创建的函数。如果未定义，则使用已经存在的消息（便于本地化），否则必须定义字段特定的消息。

# xcode - UISegmentedControl 的 .text 属性的等效项？

> ID：11060598
> 
> 赞同：0
> 
> 时间：2012-06-16T03:40:41.177
> 
> 标签：xcode, email, properties, uisegmentedcontrol

我有一个 MFMailViewController 显示用户在上一页上回答的内容。还有一些区域他们必须通过分段控制对象选择是或否。

我的意思是 TextField 的属性是 Name.text，但 UISegmentedControl 的 .text 是什么？

例如，如果用户在 SegmentedControl 中选择“是”，它会在邮件编辑器中显示“您是否同意这些条款 = 是”。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T04:13:09.650

您可以使用该`titleForSegmentAtIndex:`方法。

你可以做这样的事情。

```
NSString *selectedSegmentText = [yourSegmentedControl titleForSegmentAtIndex:yourSegmentedControl.selectedSegmentIndex];
myUILabel.text = [NSString stringWithFormat: @"Do you agree to these terms = %@", selectedSegmentText]; 
```

假设用户选择了“是”部分。那么此代码的输出将是：“您是否同意这些条款 = 是”；

希望这可以帮助！

# python - Python方法查找规则

> ID：11060600
> 
> 赞同：5
> 
> 时间：2012-06-16T03:40:53.207
> 
> 标签：python, python-3.x

我发现以下示例有点令人惊讶：

```
>>> class Foo:
        def blah(self):
            pass

>>> f = Foo()
>>> def bar(self):
        pass

>>> Foo.bar = bar
>>> f.bar
<bound method Foo.bar of <__main__.Foo object at 0x02D18FB0>> 
```

我希望绑定方法与每个特定实例相关联，并在构造时放置在其中。似乎合乎逻辑的是，每个实例的绑定方法都必须不同，以便它知道将哪个实例传递给底层函数 - 实际上：

```
>>> g = Foo()
>>> g.blah is f.blah
False 
```

但是我对这个过程的理解显然是有缺陷的，因为我不希望将函数分配给类属性会将其放入到*那时已经创建的*实例中。

所以，我的问题有两个——

1.  为什么将函数分配给类会追溯应用于实例？造成这种情况的实际查找规则和过程是什么？
2.  这是语言保证的事情，还是只是碰巧发生的事情？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-16T03:47:36.027

你想大吃一惊，试试这个：

```
f.blah is f.blah 
```

没错，实例方法包装器每次访问都不*一样。*

实际上，实例方法是一个描述符。换句话说，`f.blah`实际上是：

```
Foo.blah.__get__(f, type(f)) 
```

方法实际上并不存储在实例上；它们存储在类中，并动态生成方法包装器以将方法绑定到实例。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-16T03:48:32.063

实例不“包含”该方法。查找过程在您访问时动态发生`foo.bar`。它检查实例是否具有该名称的属性。因为它没有，所以它查看类，然后找到该类当时具有的任何属性。请注意，方法在这方面并不特殊。如果你设置，你会看到同样的效果`Foo.bar = 2`；之后，`foo.bar`将评估为 2。

该语言保证的是属性查找以这种方式进行：首先是实例，然后是类，如果在实例上找不到属性。[（通过运算符重载等隐式调用](https://stackoverflow.com/questions/10376604/overriding-special-methods-on-an-instance)的特殊方法的查找规则不同。）

只有当您直接将属性分配给实例时，它才会屏蔽类属性。

```
>>> foo = Foo()
>>> foo.bar
Traceback (most recent call last):
  File "<pyshell#79>", line 1, in <module>
    foo.bar
AttributeError: 'Foo' object has no attribute 'bar'
>>> foo.bar = 2
>>> Foo.bar = 88
>>> foo.bar
2 
```

以上所有内容与绑定/未绑定方法是分开的。Python 中的类机制使用[描述符协议](http://docs.python.org/reference/datamodel.html#descriptors)，因此当您访问时`foo.bar`，会动态创建一个新的绑定方法实例。这就是为什么您会在不同的对象上看到不同的绑定方法实例。但请注意，这些绑定方法在底层依赖于相同的代码对象，正如您在类中编写的方法所定义的那样：

```
>>> foo = Foo()
>>> foo2 = Foo()
>>> foo.blah.im_func.__code__ is foo2.blah.im_func.__code__
True 
```

# javascript - 在交叉过滤器中过滤多个离散值

> ID：11060604
> 
> 赞同：7
> 
> 时间：2012-06-16T03:41:57.483
> 
> 标签：javascript, d3.js, crossfilter

有没有人有办法在多个值上过滤[交叉](https://github.com/square/crossfilter/wiki/API-Reference)过滤器对象维度？就像是

```
.filterExact(["cash","visa"]) 
```

或者

```
.filter(["cash","visa"]) 
```

...但不是它的范围形式...

或者

```
.filterAll(["cash","visa"]) 
```

...但没有清算部分。

或不使用的等效解决方法/方法

```
.filterRange(["cash","visa"]) 
```

??

还是我在 API 中遗漏了什么？

谢谢！

拉里

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-12-03T13:22:27.600

我面临着类似的问题。我解决它的方法是我编写了一个过滤器函数来检查维度是否位于特定数组中。

```
// Array of things you want to filter
var f = ["cash", "visa"];
// Assuming "dim" is our dimension
dim.filter(function(d){
  return f.indexOf(d) > -1;
}); 
```

This will check if the value lies in that array and filter accordingly.

Hope this helps.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T01:10:15.657

以下拉取请求看起来可以满足您的需求，但尚未合并。

[过滤器的多个参数导致过滤器操作的联合](https://github.com/square/crossfilter/pull/22)

合并后，您将能够执行以下操作。

```
data.total.filter("cash", "visa"); 
```

这将导致所有过滤条件的联合。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T08:27:54.553

API 中似乎没有任何内容，但如果您想避免使用 filterRange，您可以使用两个基本过滤器并连接结果：

```
var paymentsByType = payments.dimension(function(d) { return d.type; }),
cashAndVisaPayments = Array.prototype.concat(paymentsByType.filter('cash').top(Infinity),paymentsByType.filter('visa').top(Infinity)) 
```

# html - 我正在建立一个网站，并想添加一个与 iOS 兼容的“收藏此页”按钮

> ID：11060607
> 
> 赞同：-1
> 
> 时间：2012-06-16T03:42:12.800
> 
> 标签：html, ipad, web, icons, bookmarks

我正在建立一个网站，并想添加一个与 iOS 兼容的“收藏此页”按钮

客户希望能够让人们点击“书签”按钮并自动将图标添加到 iPad 桌面设备（创建书签）。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T21:44:30.137

这是不可能的。您应该告知访问者制作网络剪辑的可能性（主屏幕上的图标），但您不能为他们制作。

![手机书签泡泡](../Images/6e26c70defdc0bd53bce1f4180833327.png)

您可以使用[移动书签气泡](http://code.google.com/p/mobile-bookmark-bubble/)来触发用户将网络剪辑添加到主屏幕。

# jquery - Adipoli 插件文本过多

> ID：11060610
> 
> 赞同：0
> 
> 时间：2012-06-16T03:43:22.140
> 
> 标签：jquery, jquery-plugins

我最近遇到了一个令人兴奋的用于图像叠加的 jquery 插件[http://jobyj.in/adipoli/](http://jobyj.in/adipoli/) 它说它具有文本叠加功能，但我无法弄清楚它是如何工作的，有没有人有一个工作示例。

```
 <script>
  $('.hover').adipoli({
      'overlayText' : 'overlayText'
  }); 
```

只是默认叠加我需要将画廊名称作为叠加层，真的很喜欢这个插件的效果，但对其他插件的建议持开放态度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T04:34:48.937

来源：`jquery.adipoli.js`

线路：64

```
//...
else if (settings.startEffect == "overlay") {
    element = $(this);
    element.hide();
    $(this).siblings('.adipoli-before').html(settings.overlayText).css({
//... 
```

因而为了使能`settings.overlayText`，`settings.startEffect`必须相等`overlay`。这将为您提供工作覆盖演示的示例代码...

```
 $(function(){
        $('.hover').adipoli({
            'overlayText' : '<b>overLayText</b>',
            'startEffect' : 'overlay',
            'hoverEffect' : 'popout'
        });
    }); 
```

现场演示：http: [//jsfiddle.net/tzE4V/2/](http://jsfiddle.net/tzE4V/2/)

完整的 JSfiddle.net 演示源：

```
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Demo</title>
    <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
        <link href="http://jobyj.in/adipoli/css/adipoli.css" rel="stylesheet" type="text/css"/>

    <body>
      <p id="hello">Hello World</p>
      <img class="img-style row1" src="http://jobyj.in/adipoli/img/gallery-images/1_1.png"/>
      <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
      <script src="http://jobyj.in/adipoli/js/jquery.adipoli.min.js"></script>
      <script type="text/javascript">
        $(function(){
            $('.row1').adipoli({
          'overlayText' : '<b>overLayText</b>',
                'startEffect' : 'overlay',
                'hoverEffect' : 'popout'
            });
        });
      </script>
    </body>
  </head>
</html> 
```

# python - 使用 Bash 的 Python 脚本的权限被拒绝？

> ID：11060612
> 
> 赞同：6
> 
> 时间：2012-06-16T03:43:29.653
> 
> 标签：python, permissions

我是 Ubuntu 的新手......我正在尝试运行我的第一个简单的 python 程序“Hello World”......在终端中运行以下命令后

```
1\. chmod +x filename.py 
2\. ./filename.py 
```

终端显示以下错误“ `bash: ./filename.py: Permission denied`”我该怎么做才能解决问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-16T03:44:46.183

你的 python 文件顶部有适当的咒语吗？例如，

`#!/usr/bin/python` （或替代`#!/usr/bin/env python`）

只是为了澄清，`chmod +x`只使文件可执行，它不会运行它。

而且我假设您的脚本看起来没有比这更复杂的了：

```
#!/usr/bin/env python
print 'hello world' 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-16T03:51:41.420

一些可能性：

1.  如果你打字，它会说什么`umask`？ `chmod +x`如果您的 umask 不阻止用户可执行位，则只会为您生成可执行文件。像 0022 这样的典型 umask 不会阻塞用户执行位，但像 0122 这样的 umask 可以。（有关详细信息，请参阅描述部分[`chmod(1)`](http://linux.die.net/man/1/chmod)。）

2.  要执行诸如 Python 脚本之类的脚本，您还需要*读取*权限。再次尝试`chmod u+rx filename.py`执行脚本。

3.  您在文件开头使用“hashbang”行指定的任何解释器（例如`#!/usr/bin/env python`）也很可能无法执行，尽管根据我的经验，这会产生不同的错误消息。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-11-28T14:54:13.470

我在我的新系统上处理同样的问题。

这是我第三次尝试解决这个问题，你的帖子是第一个出现在谷歌搜索结果中的帖子。我的帖子迟到了，但认为它会帮助其他有同样问题的用户。

就我而言，这是关于分区表设置的。

检查您的 /etc/mtab 文件是如何存储 python 脚本的。检查是否有子句：**noexec**

**noexec**是禁止在分区下执行的标志。默认情况下，它使用 exec 设置。但是，有时，这种事情会发生。

现在，它在这里工作正常。

# html - 悬停的标题文本和背景的本机/默认颜色

> ID：11060617
> 
> 赞同：2
> 
> 时间：2012-06-16T03:44:10.957
> 
> 标签：html, css, hover

在 chrome/firefox 中，将鼠标悬停在元素上会显示其标题，黄色背景和黑色文本。

有谁知道每种颜色的***确切***HEX 或 RGB 颜色？

谢谢，蒂姆

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-16T04:04:39.200

截屏，在 Photoshop 中打开，使用颜色选择器查找值。

在 OSX/Chrome 中，工具提示黄色背景为：

```
#ffffca 
```

在 OSX/Chrome 中，工具提示文本是：

```
#000023 
```

在 OSX/FF 中，工具提示黄色背景为：

```
#feffcd 
```

在 OSX/FF 中，工具提示文本是：

```
#000 
```

Chrome bg 中的某些点实际上存在细微的变化，它不是纯粹的纯色。我不确定是什么导致了这种异常。但是我采用的十六进制值是最一致的，无论如何任何变化都可以忽略不计。

文本当然是抗锯齿的，并且值取自我认为是文本最暗的区域，这将对应于它的实际 RGB/HEX 值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-16T04:05:11.067

Windows 工具提示背景的十六进制颜色值：

```
FFFFE1 
```

Linux 的十六进制颜色值：

```
F6F6B9 
```

Windows 工具提示背景的 RGB 颜色值：

```
(255,255,225) 
```

Linux 工具提示背景的 RGB 颜色值：

```
(246,246,185) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-11T14:14:55.620

从 RGB 空间，转换为 Hunter-Lab 空间，使用 L 条件（>0.5）设置适当的值， [http://dataanalysisrs.com/00ff00](http://web.archive.org/web/20140202062244/http://dataanalysers.com/00ff00)

# c# - 出现涉及“;”的语法错误

> ID：11060626
> 
> 赞同：2
> 
> 时间：2012-06-16T03:47:16.930
> 
> 标签：c#

我正在制作一个口袋妖怪游戏，这部分给了我 3 个错误：“无效的表达式术语 ';' （CS1525）”和“；预期（CS1002）”

```
public class HeldItem
{
    public static int CritCalc(bool item,bool skill, bool UsedItem,int dmg)
    {
        Random rand=new Random();
        Action jump=new Action();
        int i = rand()%100;
        double CritPerc = 6.25;
        if(item==true)
            CritPerc=12.5;
        else if(skill==true)
            CritPerc=12.5;
        else if(UsedItem==true)
            CritPerc=12.5;
        else if((item==true & skill== true) || (item==true & UsedItem == true) || (skill==true & UsedItem==true))
                CritPerc=25%;
        else if(item==true & skill == true & UsedItem==true)
            CritPerc=33.3%;
        if(Action) //jump
            CritPerc = 50%;
        if(i<CritPerc)
            dmg=2*dmg;
        else if(i>CritPerc)
            dmg==dmg;
        return dmg; 
    }
} 
```

}

也许这是一个愚蠢的问题，但我不知道它是什么

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-16T03:48:28.740

您不能在 C# 中指定百分比。

您有以下几行：

```
CritPerc=25%;
CritPerc=33.3%;
CritPerc = 50%; 
```

那是无效的（百分比表示 C# 中的模运算符）。

相反，您可能希望将值指定为双浮点值。

```
CritPerc=0.25;
CritPerc=0.333;
CritPerc = 0.50; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T03:54:44.967

> c# 中的 %(percent) 运算符表示取两个操作数的模运算。但你给一个。所以它给出了错误。

代替

```
CritPerc=25%; 
```

写

```
CritPerc=.25; 
```

或者

```
CritPerc=25/100; 
```

和

> dmg==dmg

导致错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T03:50:25.480

那行说：

```
dmg == dmg; 
```

啊，致命的“=”错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-16T03:56:30.297

你有 dmg ==dmg 这是错误的运算符，如果 dmg 已经有正确的值，只需返回它， dmg=dmg 不用说

# javascript - 如何在 CoffeeScript 中克隆/复制对象的实例？

> ID：11060631
> 
> 赞同：6
> 
> 时间：2012-06-16T03:48:14.763
> 
> 标签：javascript, coffeescript, clone, instance

相当直截了当的问题，但谷歌搜索还没有出现任何问题。

如何在 Coffeescript 中复制/克隆/复制对象的实例？我总是可以创建一个`clone()`返回具有复制值的新实例的方法，但这似乎是一种容易出错的方法。

CoffeeScript 是否提供更简单的解决方案？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-16T04:44:27.123

这可能会奏效。

```
clone = (obj) ->
  return obj  if obj is null or typeof (obj) isnt "object"
  temp = new obj.constructor()
  for key of obj
    temp[key] = clone(obj[key])
  temp 
```

采用自：[在 JavaScript 中深度克隆对象的最有效方法是什么？](https://stackoverflow.com/questions/122102/what-is-the-most-efficient-way-to-clone-a-javascript-object)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-17T04:13:35.130

感谢 Larry Battle 的提示：

John Resig 使用 jQuery.extend 的解决方案非常出色！

```
// Shallow copy
newObject = $.extend({}, oldObject);

// Deep copy
newObject = $.extend(true, {}, oldObject); 
```

更多信息可以在[jQuery 文档](http://api.jquery.com/jQuery.extend/)中找到。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-04T21:46:15.093

来自 CoffeeScript 食谱：

[http://coffeescriptcookbook.com/chapters/classes_and_objects/cloning](http://coffeescriptcookbook.com/chapters/classes_and_objects/cloning)

Underscore.js 还有一个浅克隆功能：

[http://underscorejs.org/#clone](http://underscorejs.org/#clone)

# jquery - JQuery 函数（窗口调整大小）

> ID：11060639
> 
> 赞同：2
> 
> 时间：2012-06-16T03:49:29.927
> 
> 标签：jquery, html, resize

我正在使用这个 JQuery 函数来等于我的 div 高度：

```
//equalize funciton
function equalHeight(group) {
    tallest = 0;
    group.each(function() {
        thisHeight = $(this).height();
        if(thisHeight > tallest) {
            tallest = thisHeight;
        }
    });
    group.height(tallest);
} 
```

有了这个 OnLoad：

```
$(window).load(function(){
equalHeight($("#div_right, #div_left, #div_bottom, .border"));
}); 
```

它要求我刷新页面以使其生效（在调整页面大小后）。我希望它要么在用户拖动窗口时执行此操作，要么在之后刷新页面。

推荐哪个？我知道如果 JQuery 函数不断重新加载，页面调整大小不会很顺利。另外，我怎样才能更改我的代码以适应任一选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T03:59:09.417

[`$(window).resize()`](http://api.jquery.com/resize/)在和上调用你的函数[`$(document).ready()`](http://api.jquery.com/ready/)。会没事的。

**版：**
我认为这就是你需要的：

```
<script type="text/javascript"> 
$(window).resize(function() { 
    equalHeight($("#div_right, #div_left, #div_bottom, .border")); 
});

$(document).ready(function() { 
    equalHeight($("#div_right, #div_left, #div_bottom, .border")); 
}); 
</script> 
```

# git - Git 中的报告生成

> ID：11060640
> 
> 赞同：3
> 
> 时间：2012-06-16T03:49:47.617
> 
> 标签：git, report

谁能告诉我，是否有任何选项可以在 git 中生成报告，就像存储库中未合并的分支一样，获取在特定时间段内创建的分支名称。如果有任何单独的 git 报告生成工具，请参考。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T04:59:22.560

这个[http://gitstats.sourceforge.net/](http://gitstats.sourceforge.net/)看起来很有趣。可能会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T12:07:42.873

关于各个分支发生了哪些变化、哪些分支已合并、哪些未合并等的报告可能在很大程度上取决于您的实际工作流程。

Git 维护者 Junio C Hamano 使用此类脚本来自动生成其“[正在烹饪](http://git.661346.n2.nabble.com/What-s-cooking-in-git-git-Jun-2012-01-Sun-3-td7560641.html)”电子邮件。这些脚本位于 git 存储库的[todo 分支](https://github.com/git/git/tree/todo)上，但我不知道它们的使用是否记录在某处......

# java - 用于 Java 源代码的静态代码解析器以提取方法/注释

> ID：11060646
> 
> 赞同：5
> 
> 时间：2012-06-16T03:51:15.210
> 
> 标签：java, parsing, static, static-analysis

我正在寻找一个可以从 java 类（静态源代码-> .java 文件）和方法签名、注释/文档、每个方法的变量中提取方法的解析器。最好用Java编程语言。

有人可以建议吗？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-16T05:12:18.257

您可以通过 Eclipse 使用 ASTParser。它使用起来超级简单。

[在这里](http://www.programcreek.com/2011/01/a-complete-standalone-example-of-astparser/)找到一个快速的独立示例。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-26T09:54:57.877

这是我从 java 文件中提取方法签名的方法：

我使用[Sublime Text 2](http://www.sublimetext.com/)，到我想从中获取签名的文件，并为我制作的以下正则表达式设置正则表达式的 find `Ctrl`+ （我在我的代码上对其进行了测试并且它有效，我希望它对你有用`F`也）

```
((synchronized +)?(public|private|protected) +(static [a-Z\[\]]+|[a-Z\[\]]+) [a-Z]+\([a-Z ,\[\]]*\)\n?[a-Z ,\t\n]*\{) 
```

在[Sublime Text 2](http://www.sublimetext.com/)突出显示我的结果后，我单击“查找全部”，然后复制`Ctrl`+ `C`，打开一个新选项卡`Ctrl`+`N`并粘贴`Ctrl`+ `V`。
然后，您将看到所有方法签名。

我希望它有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T05:07:54.060

如果您想要的只是*每个*方法的确切文本，以及方法内变量的确切文本，您可以使用生成 CST 的解析器，遍历 CST 以找到正确的节点，然后漂亮地打印找到的子树。 [ANTLR 有一个 Java 解析器](http://www.antlr.org)可以解决这个问题。我不知道它是否会捕获评论。我认为 ANTLR 的主要发行版是用 Java 编码的。

您可能会在 Java 中使用 Java 的词法分析器来更巧妙地做到这一点，实现相当于查找关键短语的坏岛解析器。（“在 'class' 之后，找到 '{' 并打印出你找到的所有内容，直到匹配的 '}'”会给你所有的方法和字段）。

如果您想要更精确的细节（例如，您想知道参数的实际类型而不仅仅是它的名称，或者类型实际定义的位置），您将需要一个具有完整前端和名称解析的解析器。（ANTLR 不会这样做。）[Eclipse JDT](http://www.eclipse.org/jdt/)肯定会构建树。它可能会进行名称解析。我们的[DMS Software Reengineering Toolkit](http://www.semanticdesigns.com/Products/DMS/DMSToolkit.html)及其[Java 前端](http://www.semanticdesigns.com/Products/FrontEnds/JavaFrontEnd.html)可以提供此任务所需的一切，包括评论捕获和提取。DMS 不是用 Java 编码的。

您反对 Javadoc 的不足，因为它没有为您提供方法的内容。也许我们的[Java Source Browser](http://www.semanticdesigns.com/Products/Formatters/JavaBrowser.html)确实为您提供了该代码，它会提供更好的服务。它集成了来自我们的 DMS/Java 前端的名称解析数据，以将 JavaDoc 类型的信息超链接到可浏览的源文本中；所有字段以及局部变量都被显式索引。源浏览器不是用 Java 编码的，但大概你只是想运行它并抓取你的结果。这种刮擦可能比盯着屏幕看起来更难；这样的显示背后有很多 HTML。

# sql - ColdFusion 9：数学查询

> ID：11060651
> 
> 赞同：1
> 
> 时间：2012-06-16T03:52:07.333
> 
> 标签：sql, coldfusion

我有一个包含内容编号的表格。我想从表的每一行添加值：

```
table name: item
columns:    item_name, item_price. 
```

如何总结`item_price`列中的值？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-16T12:39:18.060

这取决于您使用的数据库，但语法类似于：

```
SELECT SUM( item_price) FROM item 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T13:02:01.747

有了 CF，我们开始

```
<cfset TotalItemPrice = 0>
<cfoutput query="myQrt">
    <cfset TotalItemPrice = TotalItemPrice + item_price>
</cfoutput>

<cfoutput>#TotalItemPrice#</cfoutput> 
```

# sql - 更新基于总和

> ID：11060652
> 
> 赞同：1
> 
> 时间：2012-06-16T03:52:13.217
> 
> 标签：sql, sql-server, database

我有这张表`Test`，因为`Id, SomeValue, SomeText`它包含大约一个磨坊记录，我将表更改为

```
ALTER TABLE Test
ADD ComputedColFloat FLOAT 
```

一切都设置好了`null`，很好！我想要的是，对于每一行，ComputedColFloat 的值应该设置`SomeValue`为该行的列中值的总和。（其中的值`SomeValue`是使用`RAND()`! 计算的）

说，如果在添加列之前，前五行是

```
Id    SomeValue    SomeText
1     .91          text
2     .34          text
3     .52          text
4     .11          text
5     .68          text 
```

我想要的是编写一个查询来更新表并将添加的列设置为将值反映为

```
Id    SomeValue    SomeText    ComputedColFloat
1     .91          text        .91   // .91
2     .34          text        1.25  // .91 + .34
3     .52          text        1.77  // .91 + .34 + .52
4     .11          text        1.88  // .91 + .34 + .52 + .11
5     .68          text        2.56  // .91 + .34 + .52 + .11 + .68 
```

我正在使用 sql server 2008，并且更愿意从 SSMS 中执行此操作，而不是通过 C# 或任何东西从 Visual Studio 执行此操作！（在 VS 中的 C# 中，我可以循环，找到总和，然后编写一个更新记录的查询，但这不是我需要的，我需要从 SSMS 中执行）
另外，如果有超过 1 种方法可以做这个，我想知道什么是最好的表现，因为我有一个磨坊记录，我不想永远等待！:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T04:04:22.303

您可以为表创建游标并更新每一行。

```
 DECLARE CUR_TEST CURSOR LOCAL For Select ID,SomeValue From test ORDER BY ID ASC
        DECLARE @TOTALSUM FLOAT
                    DECLARE @ID INT
        DECLARE @SOMEMVALUE FLOAT
        OPEN CUR_LOCAL
        SET @TOTALSUM=0
        SET @SOMEVALUE=0
        FETCH CUR_LOCAL INTO @ID,@SOMEVALUE
        WHILE @@FETCH_STATUS = 0 
        BEGIN
            SET @TOTALSUM=@TOTALSUM + @SOMEVALUE
            Update TEST SET ComputedColFloat =@TOTALSUM Where ID=@ID
            FETCH CUR_LOCAL INTO @ID,@SOMEVALUE
        END
        CLOSE CUR_LOCAL
        DEALLOCATE CUR_LOCAL 
```

在执行之前复制你的表来验证

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T04:30:54.477

这是比游标更好的选择：

首先，设置第一行的第一个值：

```
update Test set ComputedColFloat = [text] where id = 1 
```

然后，您只需考虑前一行更新每一行

```
update t2 set ComputedColFloat = [text] + (select ComputedColFloat from Test  where id = t2.id-1 ) from Test t2  where t2.id > 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T04:11:52.407

你可以试试这个：

```
declare @sumUptoThatRow float,@query varchar(2000),@Id int,@ComputedColFloat float,@updateQuery nvarchar(max)

set @query = 'declare dbcursor cursor for select Id,ComputedColFloat  from test order by id '

set @sumUptoThatRow = 0.00

exec (@query)

open dbcursor

fetch next from dbcursor into @Id,@ComputedColFloat

while @@FETCH_STATUS = 0

begin

set @sumUptoThatRow = @sumUptoThatRow + @ComputedColFloat

--Update 
set @updateQuery = 'Update test set ComputedColFloat = ' + sumUptoThatRow + '  where Id = ' + @Id

exec (@updateQuery)

fetch next from dbcursor into @Id,@ComputedColFloat

end

close dbcursor

deallocate dbcursor 
```

# html - 用于移动和视网膜显示器上的高分辨率图像的 CSS

> ID：11060654
> 
> 赞同：13
> 
> 时间：2012-06-16T03:52:37.993
> 
> 标签：html, css, responsive-design, media-queries, retina-display

对于使用 Retina 显示器的用户，我的网站图像看起来很模糊。（例如，在 Retina MacBook Pro 上）。

如何为使用 Retina 显示器的访问者提供高分辨率图像，但向其他所有人提供标准尺寸的图像，同时保持图像的外观尺寸相同？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-16T03:52:38.570

在您的 HTML 中，`<div>`像这样创建：

```
<div class="ninjas-image"></div> 
```

在你的 CSS 中，添加：

```
.ninjas-image {
  background-image: url('ninja-devices.png');
  width: 410px;
  height: 450px;
}

@media (-webkit-min-device-pixel-ratio: 1.5), (min-resolution: 144dpi) {
  .ninjas-image {
    background-image: url('ninja-devices@2x.png');
    background-size: 410px 450px;
  }
} 
```

这里的魔力在于 CSS`@media`查询。当设备报告“设备像素比”为 1.5 (144 dpi) 或更高时，我们有一个双倍大小的图像 (ninja-devices@2x.png)。这样做可以让您通过将原始的、较小的图像传送到非视网膜设备来节省带宽，当然它在视网膜设备上看起来很棒。

**笔记：**

此答案于 2016 年更新，以反映最佳实践。`min-device-pixel-ratio`没有达到标准。相反，`min-resolution`它被添加到标准中，但桌面和移动 Safari 在撰写本文时不支持它（因此是`-webkit-min-device-pixel-ratio`后备）。您可以在以下网址查看最新信息：[http](http://caniuse.com/#feat=css-media-resolution) ://caniuse.com/#feat=css-media-resolution 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T13:07:00.857

我们一直在使用以下方法来处理比率为 1.5 或更高的多种情况 - 这需要考虑更多设备和浏览器：

```
@media only screen and (-webkit-min-device-pixel-ratio: 1.5),
    only screen and (-o-min-device-pixel-ratio: 3/2),
    only screen and (min--moz-device-pixel-ratio: 1.5),
    only screen and (min-device-pixel-ratio: 1.5) { 
```

我们启用了整个网站的 Retina：[http ://www.embraceware.com/](http://www.embraceware.com/)

# struts2 - 评估 Struts2 标记中的运行时表达式

> ID：11060657
> 
> 赞同：0
> 
> 时间：2012-06-16T03:52:54.730
> 
> 标签：struts2

以下标签有问题

```
<s:textfield  name="st_enroll.name"  value="getText('st_enroll.name')"   theme="simple" /> 
```

由于您无法在 struts2 标记中插入表达式，因此我通过使用 getText 读取，您可以插入表达式，但这不起作用。知道如何在 struts2 标记的值字段中插入表达式 ${st_enroll.name} 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T09:48:55.857

**您应该使用“ %{}** ”包装该方法

```
<s:textfield  name="st_enroll.name"  value="%{getText('st_enroll.name')}"   theme="simple" /> 
```

# jquery - Slide JS CSS 图片调整大小和居中

> ID：11060659
> 
> 赞同：0
> 
> 时间：2012-06-16T03:53:44.480
> 
> 标签：jquery, css

我正在帮助一个家庭朋友建立他们的网站，他们的主页上有一个 Slide JS。我需要将滑块图像缩小到 600 像素宽和 300 像素高。我还需要在页面上居中滑块。我已经尝试了这个网站上的一些答案，但没有一个有效。

这是代码：

```
/*-------------------------------------------------------
* Slide JS
//-------------------------------------------------------*/

/*Common*/
.slides-js-style {
    position:relative;
}

.slides-js-style .slides_container {    
        overflow:hidden;
    position:relative;
    display:none;
    width: 100%;

}

.slides-js-style .slides_container .slide {
    display:block;
}

.slider-next,
.slider-prev {
    position:relative;
    top: 45%;
    z-index: 10;
    width: 31px;
    height: 31px;
    text-indent: -999em;
    background-image: url(../images/slide-js-arrow.png);
    background-repeat: no-repeat;
}

.slider-prev {
    left: 20px;
    background-position: 0 0;
}

.slider-prev:hover {
    background-position: 0 100%;
}

.slider-next {
    right: 20px;
    background-position: 100% 0;
}

.slider-next:hover {
    background-position: 100% 100%;
}

/*Home Slide*/
#slides-wrap-home  {
    margin-bottom: 60px;
    background: #FFF;
}

#slides-wrap-home,
#slides-wrap-home .slides_container .slide {
    width: 940px;
    height: 430px;
}

#slides-wrap-home .slide-caption {
    position:relative;
    left: 0;
    bottom: 0;
    padding: 5px 20px; 
    background: #333;
    border-bottom-left-radius: 5px; 
    -moz-border-radius-bottomleft: 5px; 
    -webkit-border-bottom-left-radius: 5px; 
}

#slides-wrap-home .slide-caption h3 {
    font-size: 16px; 
    color: #EEE;
    font-weight: 100;
}

#slides-wrap-home .slider-pagination {
    position: absolute;
    bottom: -28px;
    height: 11px;
    z-index: 20;
}

#slides-wrap-home .slider-pagination li {
    float: left;
    margin-right: 3px;
}

#slides-wrap-home .slider-pagination li a {
    display: block;
    text-indent: -999em;
    width: 11px;
    height: 11px;
    background-image: url(../images/slide-js-button.png);
    background-repeat: no-repeat;
    background-position: 0 0;
}

#slides-wrap-home .slider-pagination li a:hover,
#slides-wrap-home .slider-pagination li.current a {
    background-position: 100% 0;
}

/*Post Slide*/
.post-portfolio-list-slider {
    margin-bottom: 30px;
}

.post-single-slider-blog { 
    margin-bottom: 60px;
}

.post-portfolio-list-slider,
.post-single-slider-blog,
.post-portfolio-list-slider .slides_container .slide,
.post-single-slider-blog .slides_container .slide {
    width: 560px;
    height: 350px;
}

.post-single-slider-portfolio {
    margin-bottom: 48px;
    background: #FFF;
}

.post-single-slider-portfolio,
.post-single-slider-portfolio .slides_container .slide {
    width: 940px;
    height: 500px;
}

.post-portfolio-list-slider .slider-next,
.post-portfolio-list-slider .slider-prev {
    opacity: 0; 
    filter: alpha(opacity=0); 
}

.post-slider-wrap .slider-pagination {
    position: absolute;
    bottom: -28px;
    height: 9px;
    z-index: 20;
}

.post-slider-wrap .slider-pagination li {
    float: left;
    margin-right: 3px;
}

.post-slider-wrap .slider-pagination li a {
    display: block;
    text-indent: -999em;
    width: 9px;
    height: 9px;
    background-image: url(../images/post-slider-btn.png);
    background-repeat: no-repeat;
    background-position: 0 0;
}

.post-slider-wrap .slider-pagination li a:hover,
.post-slider-wrap .slider-pagination li.current a {
    background-position: 100% 0;
} 
```

任何帮助将不胜感激，谢谢！

此处修改为 HTML 代码：

```
 <link rel='stylesheet' id='slideshow-css'  href='/Portals/174841/js/slideshow.css?ver=1.0.1' type='text/css' media='screen' />
<script type='text/javascript' src='/Portals/174841/js/jquery.js?ver=1.7.1'></script>
<script type='text/javascript' src='/Portals/174841/js/jquery.scripts.js?ver=1.0.1'></script>
<script type='text/javascript' src='/Portals/174841/js/custom.js?ver=1.0.1'></script>

<div id="slides-wrap-home" class="slides-js-style" data-loader="/Portals/174841/images/slider-loader.gif">
<div class="slides_container">
<div class="slide">
<img width="940" height="430" src="/Portals/174841/images/IMG_20120126_102410-940x430.jpg" class="wp-featured-image" alt="Dimensional Letters" />   </div>
<div class="slide">
<img width="940" height="430" src="/Portals/174841/images/133498_297690699994_98792189994_1198958_5498342_o-940x430.jpg" class="wp-featured-image" alt="Vehicle Graphics" />    </div>
<div class="slide">
<img width="940" height="430" src="/Portals/174841/images/IMG_20110829_143414-940x430.jpg" class="wp-featured-image" alt="Cabinet Sign Faces" />    </div>
<div class="slide">
<img width="940" height="430" src="/Portals/174841/images/CIMG2573-940x430.jpg" class="wp-featured-image" alt="Wall Vinyl" />   </div>
<div class="slide">
<img width="940" height="430" src="/Portals/174841/images/cimg1622.jpg" class="wp-featured-image" alt="Window Decals" />    </div>
</div><!--end slides_container-->
</div><!--end slides-wrap--> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T03:59:42.713

**我还需要在页面上居中滑块**

要使页面上的主要内容居中，您可以使用以下命令：

```
 .center-content {
                width:600px;
                margin: 0 auto;
               }

 <div class="center-content"></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T04:07:57.357

我们确实需要 HTML 来完全理解如何回答您的问题，但我认为这可能会有所帮助

```
 .slides-js-style {
           position:relative;
           width: 600px;
           height: 300px;
            } 
```

要使 div 居中，您必须将带有 class="slides" 的 div 放入另一个 div 中，如上一个答案

```
 <div class="center">

           slider here...

        </div> 
```

然后更新css文件

```
 .center{
         text-align: center;
         text-align: -moz-center;
         text-align: -webkit-center;
         position: relative;
          } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-26T21:40:10.750

您需要修改`.slides-js-style`定义：

```
.slides-js-style {
  overflow: hidden;
  height: 300px;
  width: 600px;
} 
```

# apple-push-notifications - 我可以在推送通知中使用官方 apns（或简易 apns）吗？

> ID：11060662
> 
> 赞同：7
> 
> 时间：2012-06-16T03:53:53.303
> 
> 标签：apple-push-notifications, trigger.io, forge, parse-platform

我想在 iphone 应用程序中使用简单的 apns，但我不知道是否可以将 apns 与 forge 一起使用（不要使用 Parse 服务），我找不到任何 API，在 phoneGap 中，我可以编辑本机目标-c 代码来处理这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T09:22:58.517

目前，我们不支持直接与 APNS 交互：我们很想知道为什么 Parse 的产品不适合您？

我们最初计划在原始 APNS 之前提供一些其他 3rd 方推送集成，但如果我们缺少一些关键见解，我们很乐意修改该计划。

# python - 为什么读取循环跳过行？

> ID：11060673
> 
> 赞同：-2
> 
> 时间：2012-06-16T03:56:14.690
> 
> 标签：python

我不知道为什么我的读取文件循环跳过了行。

我正在尝试在 python 中编写一个简单的程序来解析一个 txt 文档，然后再在另一个文档中运行它。我基本上拥有的是一个看起来像三角形的文本文件，我试图将其解析为列表中的列表，即

```
1

2 3

4 5 6

7 8 9 10 
```

进入

```
[[1],[2,3],[4,5,6],[7,8,9,10]] 
```

但是，在我下面的代码中，我的 while 循环似乎每隔一行“跳过”，所以我没有得到上面的列表，而是得到类似`[[2,3],[7,8,9,10]]`. 更令人费解的是，如果我注释掉最后一行，while 循环将打印 '1' 的正确次数

```
f = open('test.txt')
triangle = []

while f.readline() != '':
    print 1
    triangle.append(map(int,f.readline().strip().split())) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-16T03:57:35.963

每次打电话`f.readline()`，你都会读到一行。由于您`f.readline()`在循环内调用，因此您正在读取循环内的额外行。一种更简单的方法是直接遍历文件：

```
for line in f:
    # do whatever you want with the line. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-16T04:01:59.230

`[[], [], [], []]` 如果您只是在文件顶部添加一个空行，您的示例就会生成`[[1], [2, 3], [4, 5, 6], [7, 8, 9, 10]]`

也可以试试这个：

```
triangle = [ [int(value) for value in line.split(' ') if value.strip()] 
                 for line in open('test.txt') if line.strip()] 
```

列表理解*可以*比标准循环更快。测试它，它工作，这个代码也可以工作，不管空行，它更安全，假设你所有的条目都是整数。

显然不是每个人都喜欢 LC 所以：

```
triangle = []
with open('test.txt', 'r') as f:
    for index, line in enumerate(f):
        if line.strip():
            value = []
            for number in line.split(' '):
                if number.strip():
                    try:
                        value.append(int(number))
                    except Exception as ex:
                        print 'Failed to convert %s at line %i' % (number, index)
                        print 'Exception %s' % str(ex)                        
                        raise ex
            triangle.append(value)
print triangle 
```

生产`[[1], [2, 3], [4, 5, 6], [7, 8, 9, 10]]`

现在有些人可能喜欢 LC 有些人可能喜欢标准 for 循环，这完全取决于意见/口味，虽然是的，for 循环`try ... except ...`更好一些，因为它可以告诉你哪条线失败了，尽管我再次提到只要所有值都是整数，LC就可以了。

```
$ python -m timeit 'execfile("test.py")'
10000 loops, best of 3: 198 usec per loop
$ python -m timeit 'execfile("test1.py")'
10000 loops, best of 3: 130 usec per loop 
```

所以基本上是`35%`改进与标准，再次取决于个人。我个人使用非常大的数据集，因此我尝试尽可能优化它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T04:08:28.103

```
with open('data1.txt') as f:
        lis=[map(int,x.split()) for x in f if x.strip()]
print(lis)

[[1], [2, 3], [4, 5, 6], [7, 8, 9, 10]] 
```

**解释：**

使用 逐行读取文件并跳过应用后值等于or`for x in f`的那些行。`strip()``False``''`

然后使用`map()`and`split()`创建列表`int`。

# java - Java 方法的内部标识是什么？

> ID：11060675
> 
> 赞同：6
> 
> 时间：2012-06-16T03:56:40.500
> 
> 标签：java, function, methods, symbol-tables, symbol-table

众所周知，在Java中，方法名不足以区分不同的方法。

我认为（可能是错误的），要区分一个方法，它需要以下信息：

```
(className, methodName, methodParameters) 
```

更远，

*   如何在内部更有效地识别方法？
*   我听说过“方法ID”。是不是意味着上面的三元组和一个整数之间存在映射关系，所以JVM解析后只使用方法id？
*   如果是这样，它是否位于符号表中？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-16T04:05:37.780

它是一个指向[方法描述符的](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.3.3)[CONSTANT_NameAndType_info 结构](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.4.6)。

它几乎由方法名称、参数类型和（有点令人惊讶的）返回类型组成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T04:08:40.743

Java 总是通过完全限定的名称来区分其语言元素。

假设您在包中的`myMethod(int a, int b)`类中有一个方法，那么 java 将使用 name 标识该方法。`MyClass``com.mypackage``com.mypackage.MyClass.myMethod(int a , int b)`

只是为了让您更深入地了解，当需要解析两个相同的元素时，它还会考虑类加载器。

它确实考虑了哪个类加载器用于加载包含您所引用的方法的特定类。java中有四种类型的类加载器。您可以为此阅读课程文档`java.lang.Thread`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T04:23:39.000

我不太了解您要做什么，但我认为仍然有一些可能的答案：

*   您可能对[JNI Method Descriptors](http://java.sun.com/docs/books/jni/html/types.html#70136)感兴趣，这是 JVM（和 JNI 库）内部使用的各种[字符串格式](http://java.sun.com/docs/books/jni/html/types.html#58909)之一，用于识别 Java 元素。

*   很难知道你在说什么。“方法 id”可以是`java.lang.reflect.Method`对象的引用，也可以是下面提到的方法描述符或任何其他东西。你在哪里读到的？

*   我怀疑JVM中有这样的表。我的意思是，我怀疑是否存在*全局*表，因为几乎总是*从*类中检索方法，即使在 JVM 内部处理它时也是如此，因此有理由相信该方法存储在类中。就像我们使用反射来检索方法时一样：

    ```
    Class clazz = String.class;
    Method method = clazz.getDeclaredMethod("charAt", Integer.TYPE);
    System.out.println(method.getName()); 
    ```

请注意，我向类询问`String`方法，而不是要求某些 util 类给我方法`charAt`，它接收一个`int`and 来自 class `String`。

换句话说，您的标识元组几乎是正确的 - 它只是没有类：

```
(methodName, methodParameters) 
```

并且，不是从传递类、方法名称和参数类型的 JVM 中检索方法，而是直接从类中检索方法，为类提供方法名称和参数类型。一个微妙的区别，当然，但我认为这是你想知道的。

即使在我下面提到的 JNI 描述符中，这一点也很明显。例如，方法

```
long f(int i, Class c); 
```

由以下描述符表示：

```
"(ILjava/lang/Class;)J" 
```

请注意，没有对方法的类的引用。

[关于类文件格式](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html)的优秀文档（@Lawence 已经指出）可能会给您一些见解。我建议你完整地阅读它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-16T04:35:01.713

> 1）如何在内部更有效地识别方法？

对内做什么？有许多地方可能需要在“内部”“识别”方法。在字节码编译器中，JIT 编译器、类加载器/链接器、类文件表示、反射 API、调试器等等。他们每个人都有不同的效率问题。

> 2）我听说过“方法ID”。是不是意味着上面的三元组和一个整数之间存在映射关系，所以JVM解析后只使用方法id？

方法 id 用于类文件表示，并且可以被任何基于它的东西使用，包括类加载器/链接器、JIT 编译器和调试器。

JVM 不解析 Java 代码。

> 3）如果是这样，它是否驻留在符号表中？

它可能会。这取决于“符号表”的含义。请记住，在类的整个生命周期中，有很多地方需要方法识别。例如，Java 反射 API 需要方法信息来实现方法，`getDeclaredMethod(...)`例如`Method`.

# servlets - HTTP 状态 404 - Servlet .... 不可用

> ID：11060677
> 
> 赞同：0
> 
> 时间：2012-06-16T03:57:00.360
> 
> 标签：servlets, servletexception

我使用 ecrise 创建一个这样的 servlet：

```
package hello;
public class NewServlet extends HttpServlet {
private static final long serialVersionUID = 1L;

protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    System.out.println("doPost");

    String name = request.getParameter("textField");

    response.setContentType("text/html");
    PrintWriter pw = response.getWriter();
    pw.print("<html><head></head><body><center>");
    pw.print("Hello " + name + "!");
    pw.print("</center></body></html>");
 }
} 
```

和一个 html 文件，如：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Insert title here</title>
</head>
<body>
<form method="post" action="NewServlet">
    <p align="center">
        <font>Input some text</font> <br> <input type="text"
            name="textFiled"> <br> <input type="submit"
            value="submit"> <br>
    </p>
</form>
</body>
</html> 
```

当我运行 servlet 时，遇到了一个错误：

```
HTTP Status 404 - Servlet NewServlet is not available

--------------------------------------------------------------------------------

type Status report

message Servlet NewServlet is not available

description The requested resource (Servlet NewServlet is not available) is not available. 
```

我检查了文件夹：WEB-INF 或其他任何文件夹，但看不到文件 .class

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T04:49:03.807

您应该检查 IDE 中的 web-inf 文件夹并将您的 servlet 映射到 web.xml 文件中

```
 <servlet>
              <servlet-name>NewServlet</servlet-name>
               <servlet-class>NewServlet</servlet-class>
      </servlet>
       <servlet-mapping>
               <servlet-name>NewServlet</servlet-name>
               <url-pattern>/NewServlet</url-pattern>
        </servlet-mapping> 
```

确保此映射正确完成，并且您的 servlet 不在任何包或文件夹中，如果是，则在 servlet 标记中写入该类名，后跟 . 和你的 servlet 名称。

如果问题仍然存在，请确保删除 servlet 的 .class 文件并再次构建项目。（Net beans 有一个 clean and build 然后运行选项）没有使用 eclipse，但我相信它有类似的选项以及

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T04:20:21.187

Servlet 需要注册并映射到特定的 URL 模式，以便能够通过 HTTP 请求执行它们。鉴于您的 HTML 代码，您似乎希望 servlet 侦听`/NewServlet`.

如果您使用的是 Tomcat 7，那么只需将`@WebServlet`注释放在具有该 URL 模式的类上：

```
@WebServlet("/NewServlet")
public class NewServlet extends HttpServlet {
    // ...
} 
```

如果由于某种原因您仍在使用 Tomcat 6 或更早版本，那么您需要以老式的`web.xml`方式进行操作。一个具体的例子可以在[我们的 servlets wiki 页面](https://stackoverflow.com/tags/servlets/info)中找到。

Eclipse 不会`.class`在项目资源管理器中显示文件。它只会在导航器中的`/build`文件夹中显示它们。但这不应该是现在担心的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-25T07:52:09.943

web.xml 中的格式应该是这样的。

```
 <servlet-name>NewServlet</servlet-name>
           <servlet-class>PackageName.JavaClass</servlet-class> 
```

在你的情况下是

```
 <servlet-name>NewServlet</servlet-name>
           <servlet-class>Hello.NewServlet</servlet-class> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-22T03:10:20.477

编辑这个：form method="post" action="NewServlet"

to this
form method="post" action="/ **(你的项目名称)** /NewServlet"

我有同样的问题，这对我有用

# python - 金字塔可以将默认 request.charset 从 utf-8 更改为 gbk 吗？

> ID：11060681
> 
> 赞同：2
> 
> 时间：2012-06-16T03:57:26.050
> 
> 标签：python, sqlalchemy, pyramid

我是金字塔的新手。我使用 python2.7、MSSQL、slqalchemy.mssql 并使用`gbk`字符集，而且我有很多旧数据。因此，我将前面的 html 更改为编码为`gbk`，使用以下代码：

```
@view_config(route_name='g', renderer='json')
def my_view1(request):
　　print 2
　　print request.charset
　　print 1
　　print isinstance(request.params['one'], str)
　　if request.params['one']:
　　　　print request.params['one']
　　　　filters = (Bzjl.one == request.params['one'])
　　try:
　　　　two1 = DBSession.query(Bzjl).filter(filters)
　　except DBAPIError:
　　　　return Response(conn_err_msg, content_type='text/plain', status_int=500)
　　return Response(getjson(two1)) 
```

示例 url：`http://127.0.0.1:6543/g?one='中国福建'`不返回任何行：`{"records": 0, "total": 20, "rows": [], "page": 1}`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T06:16:43.567

Pyramid 支持请求工厂。您可以使用它来解码请求。

```
def request_factory(environ):
    req = pyramid.request.Request(environ)
    return req.decode(charset='gbk')

config.set_request_factory(request_factory) 
```

这意味着在金字塔内传递的请求将使用 gbk 字符集。未能使用此字符集解码请求将导致 UnicodeDecodeError 异常，因此您可能需要向请求工厂添加额外的逻辑来处理这些事情。

# ruby-on-rails - 发生异常时Rails TemplateMissing

> ID：11060685
> 
> 赞同：0
> 
> 时间：2012-06-16T03:58:06.697
> 
> 标签：ruby-on-rails, ruby

我有以下代码段

```
def range
  respond_to do |format|
    if params[:start] && params[:end]
      begin
        dstart = Time.parse(params[:start])
        dend = Time.parse(params[:end])
      rescue => e
        format.json { render :json => { :status => :unprocessable_entity, :error => e.message }} and return
      end
  ... 
```

它工作得很好，并使它成为底部的东西......

```
...
format.json { render :json => { :status => :ok, :posts => @res.to_json(:only => [:date, :content, :user_id]) } }
  else
format.json { render :json => { :status => :unprocessable_entity, :error => "must have a _start_ and _end_ date" } }
... 
```

问题是当发生异常并`rescue`调用该部分时，Rails 不会以 json 响应，而是告诉我“模板缺失”。我的语法有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T04:47:05.560

Consider this example regarding show action to understand the error

```
class ModelsController
.
.
  def show
    @model = Model.find(params[:id])

    respond_to do |format|
      format.html
      format.js
    end
  end
end 
```

In this case, if the request is of type html then rails by convention searcher for a file app/views/models/show.html.erb.

But if the request is of type js then rails will search for app/views/models/show.js.erb. If these files does not exist then rails will throw template missing error

so if you are only responding to json then you can do

```
respond_to do |format|
  format.json do
    begin 
    ..  
    rescue
      render :json => { }
    end 
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T04:01:02.687

哦，原来我不需要那个`format.json`位。为什么呢？

# c# - 具有返回类型的方法的线程池

> ID：11060686
> 
> 赞同：2
> 
> 时间：2012-06-16T03:58:58.973
> 
> 标签：c#

我有一个名为的方法`InitializeCRMService()`，它返回一个`IOrganizationService`. 现在我定义了一个不同的方法，它根据传递给它的参数`GetConnection(string thread)`调用它。`InitializeCRMService()`如果传递给的字符串`GetConnection`是单个的，它将启动该`IntializeCRMService()`方法的单个线程实例，但如果传递的字符串是多个，我需要使用一个线程池，我需要将方法传递给`QueueUserWorkItem`. 该方法`InitializeCRMService`没有输入参数。它只是返回一个服务对象。请在方法中的代码块下方找到`GetConnection`：

```
public void GetConnection(string thread)
{
    ParallelOptions ops = new ParallelOptions();

    if(thread.Equals("one"))
    {
        Parallel.For(0, 1, i =>
        {
            dynamic serviceObject = InitializeCRMService();       
        });
    }
    else if (thread.Equals("multi"))
    {
        // HERE I NEED TO IMPLEMENT MULTITHREADING USING THREAD POOL 
        // AND NOT PARALLEL FOR LOOP......
        // ThreadPool.QueueUserWorkItem(new WaitCallback(InitializeCRMService));
    }
} 
```

请注意我的方法`InitializeCRMService()`的返回类型是服务对象。

请告诉我如何实现它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T04:07:43.507

由于您希望在插槽可用时在 ThreadPool 中执行 InitializeCRMService，并且您只执行一次，因此解决方案取决于您要如何处理 InitializeCRMService 的返回值。

如果你只想忽略它，到目前为止我有两个选择。

* * *

## **选项1**

```
public void GetConnection(string thread)
{
    //I found that ops is not being used
    //ParallelOptions ops = new ParallelOptions();
    if(thread.Equals("one"))
    {
        Parallel.For(0, 1, i =>
        {
            //You don't really need to have a variable
            /*dynamic serviceObject =*/ InitializeCRMService();
        });
    }
    else if (thread.Equals("multi"))
    {
        ThreadPool.QueueUserWorkItem
        (
             new WaitCallback
             (
                 (_) =>
                 {
                      //You don't really need to have a variable
                      /*dynamic serviceObject =*/ InitializeCRMService();
                 }
             )
        );
    }
} 
```

另一方面，如果您需要将它传递到某个地方以存储它以供以后重用，您可以这样做：

```
public void GetConnection(string thread)
{
    //I found that ops is not being used
    //ParallelOptions ops = new ParallelOptions();

    if(thread.Equals("one"))
    {
        Parallel.For(0, 1, i =>
        {
            //It seems to me a good idea to take the same path here too
            //dynamic serviceObject = InitializeCRMService();
            Store(InitializeCRMService());
        });
    }
    else if (thread.Equals("multi"))
    {
        ThreadPool.QueueUserWorkItem
        (
             new WaitCallback
             (
                 (_) =>
                 {
                      Store(InitializeCRMService());
                 }
             )
        );
    }
} 
```

* * *

Store 会是这样的：

```
private void Store(dynamic serviceObject)
{
    //store serviceObject somewhere you can use it later.
    //Depending on your situation you may want to
    // set a flag or use a ManualResetEvent to notify
    // that serviceObject is ready to be used.
    //Any pre proccess can be done here too.
    //Take care of thread affinity,
    // since this may come from the ThreadPool
    // and the consuming thread may be another one,
    // you may need some synchronization.
} 
```

现在，如果您需要允许您的类的客户端访问 serviceObject，您可以采取以下方法：

```
//Note: I marked it as partial because there may be other code not showed here
// in particular I will not write the method GetConnection again. That said...
// you can have it all in a single block in a single file without using partial.
public partial class YourClass
{
    private dynamic _serviceObject;

    private void Store(dynamic serviceObject)
    {
        _serviceObject = serviceObject;
    }

    public dynamic ServiceObject
    {
        get
        {
            return _serviceObject;
        }
    }
} 
```

但这并不能解决所有情况。特别是如果你想让线程等待 serviceObject 准备好：

```
public partial class YourClass
{
    private ManualResetEvent _serviceObjectWaitHandle = new ManualResetEvent(false);
    private dynamic _serviceObject;

    private void Store(dynamic serviceObject)
    {
        _serviceObject = serviceObject;
        //If you need to do some work as soon as _serviceObject is ready...
        // then it can be done here, this may still be the thread pool thread.
        //If you need to call something like the UI...
        // you will need to use BeginInvoke or a similar solution.
        _serviceObjectWaitHandle.Set();
    }

    public void WaitForServiceObject()
    {
            //You may also expose other overloads, just for convenience.
            //This will wait until Store is executed
            //When _serviceObjectWaitHandle.Set() is called
            // this will let other threads pass.
            _serviceObjectWaitHandle.WaitOne();
    }

    public dynamic ServiceObject
    {
        get
        {
            return _serviceObject;
        }
    }
} 
```

* * *

不过，我还没有涵盖所有场景。例如......如果多次调用 GetConnection 会发生什么？我们需要决定是否允许这样做，如果允许，我们如何处理旧的 serviceObject？（我们需要调用一些东西来解除它吗？）。如果我们允许多个线程同时调用 GetConnection，这可能会出现问题。所以默认情况下我会说我们不这样做，但我们也不想阻塞其他线程......

解决方案？如下：

```
//This is another part of the same class
//This one includes GetConnection
public partial class YourClass
{
    //1 if GetConnection has been called, 0 otherwise
    private int _initializingServiceObject;

    public void GetConnection(string thread)
    {
        if (Interlocked.CompareExchange(ref _initializingServiceObject, 1, 0) == 0)
        {
            //Go on, it is the first time GetConnection is called

            //I found that ops is not being used
            //ParallelOptions ops = new ParallelOptions();
            if(thread.Equals("one"))
            {
                Parallel.For(0, 1, i =>
                {
                    //It seems to me a good idea to take the same path here too
                    //dynamic serviceObject = InitializeCRMService();
                    Store(InitializeCRMService());
                });
            }
            else if (thread.Equals("multi"))
            {
                ThreadPool.QueueUserWorkItem
                (
                     new WaitCallback
                     (
                         (_) =>
                         {
                              Store(InitializeCRMService());
                         }
                     )
                );
            }
        }
    }
} 
```

* * *

最后，如果我们允许多个线程使用 _serviceObject，而 _serviceObject 不是线程安全的，我们就会遇到麻烦。使用监视器或使用读写锁是解决该问题的两种选择。

你记得这个吗？

```
 public dynamic ServiceObject
    {
        get
        {
            return _serviceObject;
        }
    } 
```

好的，您希望调用者在 _serviceObject 处于阻止其他线程进入的上下文中时访问它（请参阅 System.Threading.Monitor），并确保它停止使用它，然后离开我之前提到的这个上下文。

现在考虑调用者线程仍然可以在某个地方存储 _serviceObject 的副本，然后离开同步，然后对 _serviceObject 做一些事情，这可能会在另一个线程使用它时发生。

当涉及到线程时，我习惯于考虑每一个角落情况。但是，如果您可以控制调用线程，则只需使用上面显示的属性就可以很好地做到这一点。如果你不...让我们谈谈它，我警告你，它可能是广泛的。

* * *

## **选项 2**

这是一种完全不同的行为，[Damien_The_Unbeliever](https://stackoverflow.com/users/15498/damien-the-unbeliever)在您的问题中提出的赞扬让我认为您可能打算返回 serviceObject。在这种情况下，它不是在线程之间共享的，一次有多个 serviceObject 是可以的。任何需要的同步都留给调用者。

好的，这可能是您一直在寻找的：

```
public void GetConnection(string thread, Action<dynamic> callback)
{
    if (ReferenceEquals(callback, null))
    {
        throw new ArgumentNullException("callback");
    }
    //I found that ops is not being used
    //ParallelOptions ops = new ParallelOptions();
    if(thread.Equals("one"))
    {
        Parallel.For(0, 1, i =>
        {
            callback(InitializeCRMService());
        });
    }
    else if (thread.Equals("multi"))
    {
        ThreadPool.QueueUserWorkItem
        (
             new WaitCallback
             (
                 (_) =>
                 {
                      callback(InitializeCRMService());
                 }
             )
        );
    }
} 
```

回调应该如何看待？好吧，只要它不在线程之间共享就可以了。为什么？因为每个调用GetConnection 的线程都会传递它自己的回调Action，并且会收到不同的serviceObject，所以一个线程对其所做的事情不会影响另一个线程对其所做的事情（因为它不是同一个serviceObject）。

除非你想让一个线程调用它然后与其他线程共享它，在这种情况下，这是调用者的问题，它将在另一个地方解决。

* * *

最后一件事，您可以使用枚举来表示您当前在字符串线程中传递的选项。事实上，由于只有两个选项您可以考虑使用 bool，除非它们将来可能会出现更多情况。

# android - 如何使 GridlView 在屏幕上显示它的中心？

> ID：11060691
> 
> 赞同：0
> 
> 时间：2012-06-16T03:59:37.893
> 
> 标签：android, android-layout, android-gridview

我有一个`GridView`这样的（`main.xml`）：

```
<?xml version="1.0" encoding="utf-8"?>
<GridView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/gridView1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:columnWidth="100dp"
    android:gravity="center"
    android:numColumns="2"
    android:stretchMode="columnWidth"
    android:background="@color/black"
    android:horizontalSpacing="5dp"
    android:verticalSpacing="5dp" >

</GridView> 
```

和这样的`GridView`项目（`grid.xml`）：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/gridItemLayout"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:padding="5dp"
    android:gravity="center"
    android:background="@color/white" >

    <ImageView
        android:id="@+id/grid_item_image"
        android:layout_width="60dp"
        android:layout_height="60dp"
        android:layout_marginRight="10dp"
        android:src="@drawable/person" >
    </ImageView>

    <TextView
        android:id="@+id/grid_item_label"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/grid_item_image"
        android:text="@+id/label"
        android:layout_alignLeft="@id/grid_item_image"
        android:layout_alignRight="@id/grid_item_image"
        android:layout_marginTop="5dp"
        android:textSize="15dp"
        android:gravity="center"
        android:textColor="@color/black" >
    </TextView>

</RelativeLayout> 
```

由于我只有 2 行项目`GridView`，我希望这两行完全填满屏幕，不留下任何空白空间或不超出屏幕高度，这需要滚动才能完全看到。为此，我做了这个（`GridViewActivity.java`）：

```
DisplayMetrics metrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(metrics);

width = metrics.widthPixels;
height = metrics.heightPixels; 
```

在我的适配器（`ImageAdapter.java`）中：

```
gridView = new View(context);

gridView = inflater.inflate(R.layout.grid, null);
gridView.setMinimumHeight(GridViewActivity.height/2);
gridView.setMinimumWidth(GridViewActivity.width/2); 
```

这并没有给出我想要的：

![在此处输入图像描述](../Images/284a2b6f79658739a148a0f7190a3c30.png)

你可以看到第二行不完全可见

![在此处输入图像描述](../Images/44e838669d091425efebf28fbffe10e9.png)

任何人都可以帮助我如何使这 2 行完全适合屏幕，或者如何在`GridView`调用 Activity 时使其显示为中心，就像这样：

![在此处输入图像描述](../Images/f58e5e9d4f5b5e0499e76e8f059513c5.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T08:24:49.463

首先，如果您`GridView`只有 2 行和 2 列并且您不打算添加更多项目，为什么不使用一个简单`RelativeLayout`的（`FrameLayout`每个单元格一个）来将这些项目放置在您想要的网格中（或者你可以使用`TableLayout`2 行）？正确定位它们会容易得多，并且性能将相同。

如果您仍然想使用，`GridView`那么您必须找到屏幕的尺寸（就像您已经做过的那样）减去行之间的空间、标题栏高度和通知栏高度，然后将其划分为 2 行. 然后，您将使用您之前计算的这个尺寸，在适配器`LayoutParams`的方法中将其设置为膨胀项目布局的高度`getView`（不要忘记宽度）。

我的建议是使用另一种布局，然后`GridView`. 下面的示例（您可以使用 an`include`使其更小）

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <View
        android:id="@+id/anchor"
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:layout_centerInParent="true" />

    <RelativeLayout
        android:id="@+id/griditem1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@id/anchor"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_margin="3dp"
        android:layout_toLeftOf="@id/anchor"
        android:background="#ffffff"
        android:gravity="center"
        android:padding="5dp" >

        <ImageView
            android:id="@+id/grid_item_image1"
            android:layout_width="60dp"
            android:layout_height="60dp"
            android:layout_marginRight="10dp"
            android:src="@drawable/shop_open" >
        </ImageView>

        <TextView
            android:id="@+id/grid_item_label1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@id/grid_item_image"
            android:layout_alignRight="@id/grid_item_image"
            android:layout_below="@id/grid_item_image"
            android:layout_marginTop="5dp"
            android:gravity="center"
            android:text="@+id/label"
            android:textColor="#000000"
            android:textSize="15dp" >
        </TextView>
    </RelativeLayout>

    <RelativeLayout
        android:id="@+id/griditem2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@id/anchor"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:layout_margin="3dp"
        android:layout_toRightOf="@id/anchor"
        android:background="#ffffff"
        android:gravity="center"
        android:padding="5dp" >

        <ImageView
            android:id="@+id/grid_item_image2"
            android:layout_width="60dp"
            android:layout_height="60dp"
            android:layout_marginRight="10dp"
            android:src="@drawable/shop_open" >
        </ImageView>

        <TextView
            android:id="@+id/grid_item_label2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@id/grid_item_image"
            android:layout_alignRight="@id/grid_item_image"
            android:layout_below="@id/grid_item_image"
            android:layout_marginTop="5dp"
            android:gravity="center"
            android:text="@+id/label"
            android:textColor="#000000"
            android:textSize="15dp" >
        </TextView>
    </RelativeLayout>

      <RelativeLayout
        android:id="@+id/griditem3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/anchor"
        android:layout_alignParentLeft="true"
        android:layout_alignParentBottom="true"
        android:layout_margin="3dp"
        android:layout_toLeftOf="@id/anchor"
        android:background="#ffffff"
        android:gravity="center"
        android:padding="5dp" >

        <ImageView
            android:id="@+id/grid_item_image3"
            android:layout_width="60dp"
            android:layout_height="60dp"
            android:layout_marginRight="10dp"
            android:src="@drawable/shop_open" >
        </ImageView>

        <TextView
            android:id="@+id/grid_item_label3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@id/grid_item_image"
            android:layout_alignRight="@id/grid_item_image"
            android:layout_below="@id/grid_item_image"
            android:layout_marginTop="5dp"
            android:gravity="center"
            android:text="@+id/label"
            android:textColor="#000000"
            android:textSize="15dp" >
        </TextView>
    </RelativeLayout>

      <RelativeLayout
        android:id="@+id/griditem4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/anchor"
        android:layout_alignParentRight="true"
        android:layout_alignParentBottom="true"
        android:layout_margin="3dp"
        android:layout_toRightOf="@id/anchor"
        android:background="#ffffff"
        android:gravity="center"
        android:padding="5dp" >

        <ImageView
            android:id="@+id/grid_item_image4"
            android:layout_width="60dp"
            android:layout_height="60dp"
            android:layout_marginRight="10dp"
            android:src="@drawable/shop_open" >
        </ImageView>

        <TextView
            android:id="@+id/grid_item_label4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@id/grid_item_image"
            android:layout_alignRight="@id/grid_item_image"
            android:layout_below="@id/grid_item_image"
            android:layout_marginTop="5dp"
            android:gravity="center"
            android:text="@+id/label"
            android:textColor="#000000"
            android:textSize="15dp" >
        </TextView>
    </RelativeLayout>
</RelativeLayout> 
```

# facebook - 将 Facebook API 批处理请求转换为 FQL 多查询

> ID：11060693
> 
> 赞同：0
> 
> 时间：2012-06-16T03:59:57.483
> 
> 标签：facebook, facebook-graph-api

我的 Web 应用程序构建了对 Facebook 图形 API 的批处理请求。该批次是通过进行第一次 API 调用来获取用户的朋友而组成的。然后我遍历朋友列表并为每个人添加一个特定的请求（使用该用户的特定访问令牌）并将每个人添加到批处理中。所以它最终是两个 API 调用。不幸的是，它真的很慢，而且我听说 FQL 请求更快。

所以我的问题是，我可以用 FQL 做到这一点吗？我已经阅读[了文档](https://developers.facebook.com/docs/reference/fql/)，但我不知道如何通过一个 FQL 查询返回朋友的所有朋友的工作历史记录（这需要每个朋友的访问令牌）。这可能吗？显然我可以构建一个 FQL 请求的批处理请求，但这会让我回到我开始的地方。

**更新：** 我做了一些测试，FQL 肯定似乎比批量请求更快。我的 FQL 多查询如下所示：

```
$multiQuery = array(
"query1"=>"SELECT uid2 FROM friend WHERE uid1 = me()", //LIST OF FRIEND IDs
"query2"=>"SELECT uid, name, work, education, is_app_user FROM user WHERE uid IN (SELECT uid2 FROM #query1)", //FRIEND PROFILES
"query3"=>"SELECT uid2 FROM friend WHERE uid1 IN (SELECT uid FROM #query2 WHERE is_app_user=1)",
"query4"=>"SELECT uid, name, work, education FROM user WHERE uid IN (SELECT uid2 FROM #query3)"
);

$multiQueryResult = $facebook->api(array(
'method'   => 'fql.multiquery',
'queries'  => $multiQuery
));

var_dump( $multiQueryResult ); 
```

查询有效，但有两个问题：

1.  query3 返回所有用户 ID，而不仅仅是授权我的应用程序的用户 ID。

2.  query4 不返回工作/教育字段...大概是因为 API 请求是使用当前用户的访问令牌调用的（而不是来自 query3 的特定用户的访问令牌）。我已经将授权用户的访问令牌存储在数据库中，但我不知道是否可以在这种情况下使用它们。

这可以用 FQL 完成吗？我可以在 FQL 多查询中定义唯一的访问令牌吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T11:37:37.133

> 朋友工作历史的所有朋友（需要每个朋友的访问令牌）

如果您需要不同的访问令牌，那么显然无法在一个请求中完成……但是，如果我的每个朋友最近都没有与您的应用程序进行交互，那么您从哪里获得访问令牌呢？如果他们愿意的话，您可以已经获得他们的工作信息并将其放入您自己的数据库中，这样您就可以从那里获取它，只需使用我朋友的 uid 进行查找。否则，我认为这*不是*你要走的路。

宁愿这样：

如果您的用户的朋友已经设置了他们的隐私设置，以便他们愿意与您的用户正在使用的应用程序共享他们的工作信息，那么您可以获得该信息，而无需为每个朋友提供单独的访问令牌。然后你会像这样做一个 FQL 查询，

```
SELECT uid, name, work FROM user WHERE uid IN
  (SELECT uid1 FROM friend WHERE uid2 = me()) 
```

这将为您提供用户朋友的工作信息——但显然仅适用于那些愿意与朋友正在使用的应用程序共享该信息的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T18:56:08.180

这并不是我原来问题的真正答案，因为似乎没有。似乎在撰写本文时，Facebook 批处理请求真的很慢......这太糟糕了，因为这基本上违背了它的全部目的。

# windows-8 - 如何使用 WinRT 获取文件？

> ID：11060697
> 
> 赞同：1
> 
> 时间：2012-06-16T04:00:52.200
> 
> 标签：windows-8, windows-runtime, microsoft-metro

**我想要什么：**
从 AppData 中获取要使用的 xml

**我编码的内容**

```
 StorageFolder localFolder = Windows.Storage.ApplicationData.Current.LocalFolder;
   StorageFile sampleFile = localFolder.GetFileAsync("abc.xml"); 
```

**我得到**
的错误：无法将类型“Windows.Foundation.IAsyncOperation”隐式转换为“Windows.Storage.StorageFile”

**我检查的内容**

> 当此方法成功完成时，它会返回一个表示该文件的**StorageFile 。**

[来自 MSDN](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.storage.storagefolder.getfileasync.aspx)

**我有什么**
Windows 8 Release Preview 64bit；
适用于 Windows 8 的 Visual Studio Express 2012 RC；
C＃

我根据 MSDN 文档编写代码，为什么会发生这个错误以及如何解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-16T04:55:41.430

拉里给了你正确的解决方案。让我试着解释发生了什么。

如果您查看[GetFileAsync](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.istoragefolder.getfileasync.aspx)的 MSDN 文档，您将看到它返回一个 IAsyncOperation。您的代码假定它返回一个 SampleFile。GetFileAsync 不提供文件，它提供了一个对象，该对象将在检索完成后提供一个文件。

C# 中的 Await 提供了一个函数，一旦满足完成条件，该对象（或代表该对象）将调用该函数。然后该函数将值返回给您。JavaScript 中的 Promise（.then 或 .done）提供了类似的功能，但您必须自己提供该功能。

这样做的原因是应用程序可以响应。文件访问很慢。如果访问内存需要 1 秒，那么文件访问大约需要 15 分钟。 [异步编程](http://msdn.microsoft.com/en-us/library/windows/apps/hh464924.aspx)允许在您的程序等待时发生其他事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-16T04:11:39.880

`StorageFile sampleFile = await localFolder.GetFileAsync("abc.xml")`如果您使用 C#，请尝试使用“ ”，`localFolder.GetFileAsnc("abc.xml").done(function (sampleFile) {})`如果您使用 JS，请尝试使用“”。

# webview - 如何使用 webview 从网页中缩放和提取框？

> ID：11060698
> 
> 赞同：0
> 
> 时间：2012-06-16T04:00:52.740
> 
> 标签：webview, screen-scraping, jsoup

我正在使用 web 视图命令来显示网页。我的问题是，“是否有一个命令实际上只占用一个具有声明大小缩放的网页框并将屏幕锁定在它周围？”

基本上我正在尝试删除网页的服务器状态部分并在点击时在手机上显示缩放部分。下面是我调用 Google 的网络视图文件，但将来会更改为 rel 站点。

如果可能的话，我想压缩这个框以适应手机屏幕、横向或其他尺寸的大小。

编辑：我做了一些研究和阅读。我将尝试使用 Jsoup。不幸的是，在阅读了网页“抓取”的文档和示例后，我无法弄清楚如何将网页 HTML 作为文档加载-> 搜索文档以查找目标代码-> 在布局上显示目标代码。

如您所见，我开始尝试在 webview 中执行此操作，并且将来我可能会尝试通过 webview 进行布局。

任何帮助更好地理解这一点将不胜感激！

编辑 2：添加了一些更多的抓取代码，这似乎可以做我想要的，但我不清楚如何引用 HTML 代码中的变量来显示。

这是我正在使用的 HTML，然后是我正在使用的代码：

```
<div class="page-header">
    <h2 class="header ">                Server Status
</h2>

            <div class="desc">
                This page lists all available Diablo III game and auction house servers, as well as the status of each – either available or undergoing maintenance.
            </div>

    <span class="clear"><!-- --></span>
        </div>

            <div class="server-status">
    <div class="db-directory">
        <div class="db-directory-inner">
                    <div class="column column-1">
                        <div class="box">
                            <h3 class="category">Americas</h3>
                                <div class="server-list">
    <div class="server">
        <div class="status-icon up" data-tooltip="Available">
        </div>
        <div class="server-name">
                Game Server
        </div>
    <span class="clear"><!-- --></span>
    </div>
                                </div>
                                    <h4 class="subcategory">Auction House</h4>
                                <div class="server-list">
    <div class="server">
        <div class="status-icon up" data-tooltip="Available">
        </div>
        <div class="server-name">
                Gold
        </div>
    <span class="clear"><!-- --></span>
    </div>
    <div class="server alt">
        <div class="status-icon up" data-tooltip="Available">
        </div>
        <div class="server-name">
                Hardcore
        </div>
    <span class="clear"><!-- --></span>
    </div>
    <div class="server">
        <div class="status-icon up" data-tooltip="Available">
        </div>
        <div class="server-name">
                USD
        </div>
    <span class="clear"><!-- --></span>
    </div>
    <div class="server alt">
        <div class="status-icon up" data-tooltip="Available">
        </div>
        <div class="server-name">
                AUD
        </div>
    <span class="clear"><!-- --></span>
    </div>
    <div class="server">
        <div class="status-icon up" data-tooltip="Available">
        </div>
        <div class="server-name">
                MXN
        </div>
    <span class="clear"><!-- --></span>
    </div>
    <div class="server alt">
        <div class="status-icon down" data-tooltip="Maintenance">
        </div>
        <div class="server-name">
                BRL
        </div>
    <span class="clear"><!-- --></span>
    </div>
    <div class="server">
        <div class="status-icon down" data-tooltip="Maintenance">
        </div>
        <div class="server-name">
                CLP
        </div>
    <span class="clear"><!-- --></span>
    </div>
    <div class="server alt">
        <div class="status-icon down" data-tooltip="Maintenance">
        </div>
        <div class="server-name">
                ARS
        </div>
    <span class="clear"><!-- --></span>
    </div>

    package d3.link;

import java.io.File;
import java.io.IOException;
import d3.link.R;
import android.app.Activity;
import android.os.Bundle;
import android.webkit.WebView;
import org.jsoup.Connection;
import org.jsoup.Connection.Response;
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.select.Elements;
import android.widget.TextView;

public class ServerStatusActivity extends Activity 
{

    //WebView webView;
    public static void main(String[] args) throws Exception
    {
        String url = "http://us.battle.net/d3/en/status";
        Document doc = Jsoup.connect(url).get();

        String serverstatus = Document.select().text();
        System.out.println("Server Status: " + serverstatus);

        Elements answerers = Document.select();
            for (Element answerer : answerers) 
            {
                System.out.println("Answerer: " + answerer.text());
            }

    }

    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.ss);

        //webView = (WebView) findViewById(R.id.webView1);
        //webView.getSettings().setJavaScriptEnabled(true);
        //webView.getSettings().setSupportZoom(false);
        //webView.getSettings().setBuiltInZoomControls(false);
        //webView.getSettings().setLoadWithOverviewMode(true);
        //webView.getSettings().setUseWideViewPort(true);
        //webView.loadUrl("http://us.battle.net/d3/en/status");

    }

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T07:06:26.543

使用 XPath 选择服务器状态 HTML (//div[@class="server-status"])，然后只渲染这部分。

# java - 在 Java Derby 中创建具有值的表

> ID：11060701
> 
> 赞同：0
> 
> 时间：2012-06-16T04:01:05.097
> 
> 标签：java, sql, loops, derby

我正在尝试使用字符串数组中的值创建一个表。我正在寻找最好的方式来循环它而不必发送一堆查询。这就是我所拥有的，但显然循环不起作用。有人有更好的方法来执行此操作吗？

```
 public static void createTable(String table, String[] values) throws SQLException{
    try {
        Class.forName(driver);
        conn = DriverManager.getConnection(connectionURL);
        Statement state = conn.createStatement();

        for(int x = 0; x < values.length; x++){

            state.execute("CREATE TABLE" + table + " ( " + values[x] + " );");
        }
        conn.commit();

    } catch (ClassNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } finally {
        try {
            conn.close();
        } catch (SQLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T04:28:10.777

连接 Values 数组的元素。

```
StringBuilder sb=new StringBuilder();
sb.append("CREATE TABLE " + table + " ( ");

 for (int i = 0; i < values.length; i++) {
   sb.append(values[i]);
   if (i >= values.length-1) {break;}
  sb.append(",");
 }
 sb.append(" )");
 state.execute(sb.toString()); 
```

# visual-studio-2010 - 将项目 Visual Studio 2008 转换为 2010 的问题

> ID：11060702
> 
> 赞同：0
> 
> 时间：2012-06-16T04:01:10.920
> 
> 标签：visual-studio-2010, visual-studio

所以我从教程网站[http://devmaster.net/posts/introduction-to-c-with-game-development-part-2-project-template](http://devmaster.net/posts/introduction-to-c-with-game-development-part-2-project-template)下载了一个模板 但是我有一个问题，因为模板显然是制作的在 Visual Studio 2008 中，我有 Visual Studio 2010。当我转换项目时，我收到错误“无法启动程序'C:\c++\Debug\Template.exe' 系统找不到指定的文件。”

我在转换之前查看了原始文件，并且 \Debug\Template.exe 文件确实存在，但是在转换文件后它被删除了。我在转换时收到了一些警告，我发现了这一点：

“MSB8012：$(TargetPath) ('C:\c++\Debug\Template.exe') 与项目配置中链接器的 OutputFile 属性值 'Template_debug.exe' ('C:\c++\Template_debug.exe') 不匹配'调试|Win32'。”

知道如何解决这个问题吗？

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T05:06:28.797

如何在 Visual Studio 2010 中创建一个新项目并添加源文件和依赖项。然后编译运行，总是可以的！

# qt - 跨平台截图和屏幕分辨率

> ID：11060716
> 
> 赞同：0
> 
> 时间：2012-06-16T04:04:40.257
> 
> 标签：qt, boost, screenshot, resolution

我需要截屏，获取当前的屏幕分辨率，以及支持的分辨率列表。目前我在这三个上有系统特定的包装器，是否有任何跨平台轻量级库可以做到这一点？我还需要我现在通过 Qt 的事件做的鼠标/键盘事件抽象。还有更好的选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T14:52:54.643

在 Qt 中，您有 QDesktopWidget 来访问桌面信息（可用大小、屏幕几何形状）。要获取截图，请查看 Qt 的[截图示例](http://qt-project.org/doc/qt-4.8/desktop-screenshot.html)

# mysql - 仅返回使用 MySQL DISTINCT 出现一定次数的字段

> ID：11060718
> 
> 赞同：2
> 
> 时间：2012-06-16T04:05:04.487
> 
> 标签：mysql

我正在使用以下查询返回多次出现在表格中的艺术家的姓名，并且第一个字符以 A 开头

```
SELECT DISTINCT artist FROM releases WHERE artist LIKE 'a%' ORDER BY artist 
```

我现在想更进一步，只想返回出现超过 10 次的艺术家

我该怎么做？

干杯!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T04:19:48.130

最好的方法是使用 a`GROUP BY`来获取艺术家出现的次数，然后使用`HAVING`来指示他们至少需要出现一定次数。

我相信这个查询会给你你想要的：

```
SELECT artist, count(*) 
FROM releases 
WHERE artist LIKE 'a%'
GROUP BY artist 
ORDER BY artist
HAVING count(*) > 10 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T04:28:50.267

```
SELECT artist, count(*)  FROM releases 
WHERE artist LIKE 'a%' GROUP BY artist
ORDER BY artist
HAVING count(*) > 10 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T04:27:48.433

您的查询选择只有艺术家姓名：

```
select artist from releases
where artist like 'a%' group by artist 
having count(distinct(artist))>10; 
```

# java - 在 java 中传递对象时到底发生了什么？

> ID：11060723
> 
> 赞同：5
> 
> 时间：2012-06-16T04:06:05.967
> 
> 标签：java, object, hashcode, hash-code-uniqueness

我知道当我们传递对象时，我们将其引用作为值传递。但是你得到的这个值是使用`hashcode()`正确的方法（根据我的测试是一样的）？既然`hashcode()`不是内存地址，也不能保证一直获取唯一值，那么在传递对象的时候会不会发生碰撞之类的奇怪事情呢？

（假设`hashcode()`没有被覆盖，即它返回与 相同的值`System.identityHashCode()`）

三个像这样的问题很多，但我找不到相关资源来讨论传递的值是什么以及如何获得它？

**编辑：** 这是我的测试。默认`toSting()`使用`hashCode()`内部并将其转换为十六进制值。那么当我们传递对象时，这是传递的值吗？或者 java 做了什么来跟踪所有的对象（被传递）所以不会有任何*引用冲突*？

```
Object o = new Object();
System.out.println(o);
System.out.println(o.toString()); //both prints same thing - java.lang.Object@10385c1 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-16T04:32:14.540

`hashcode()`与 Java 的内部内存存储没有任何关系。它只是一个应该返回可以表示对象的唯一值的方法。

现在，*碰巧*获得表示对象的唯一值的一种好方法是使用其内部内存地址。这就是默认实现的`hashcode()`作用。但是`hashcode()` *使用*内存地址并不***意味着***定义`hashcode()` *了*内存地址。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T04:15:05.917

> 但是你得到的这个值是使用 hashcode() 方法对吗（根据我的测试它是一样的）？

不。

来自[JSL](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html)：

> 引用值（通常只是引用）是指向这些对象的指针，以及一个特殊的空引用，它不引用任何对象。

[从Harnessing Java](http://books.google.co.in/books?id=SSaPXEH-mQUC&pg=PA231&lpg=PA231&dq=does%20java%20reference%20variables%20holds%20memory%20address&source=bl&ots=XVgOlK9gcl&sig=kv2jBpFnav7ZUuaS75TwaWb5F10&hl=en&sa=X&ei=OAfcT7bMLoftrAfq34itDQ&ved=0CF0Q6AEwBA#v=onepage&q=does%20java%20reference%20variables%20holds%20memory%20address&f=false)中阅读此页面

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-16T04:15:14.527

java中hashcode for的默认实现`Object`是基于对象的内存地址，也就是引用。

这并不意味着`hashCode()`被调用来获取引用。这不是发生的事情。`new Whatever()`引用变量只是在从实例化（ ）中获取内存地址后保存它。事实上，类实现重写 hashcode() 来做一些不同的事情是很常见的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-16T18:57:50.690

没有要求或期望它`hashCode()`是独一无二的。它**不是**一种身份方法。

但是，大部分 JDK 都*期望*if `a.equals(b)`， then `a.hashCode() == b.hashCode()`。

没想到会出现相反的情况。即如果`!a.equals(b)`那么*不需要*。`a.hashCode() != b.hashCode()`但是，如果不是*通常*情况，性能会受到影响。换句话说，`hashCode()`预计很少有碰撞。

`hashCode()`类中的默认实现`Object`通常使用内存地址来*生成*，`hashCode()`但它不*返回*地址，语言规范也没有要求这样做。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-16T04:39:00.733

通过`Java` `Objects`引用传递意味着当你传递一个`Object`实际上你传递原始对象引用时。哈希码取决于与该对象关联的字段值。hashcode 与 real 无关，`memory address.`具有相同值的两个对象具有不同的`hashcode`. 即使您创建了两个不同的对象但具有相同的值，它们的哈希码也将始终取决于您的哈希函数的效率

# scala - InitelliJ 中的 ScalaDocs 标签？

> ID：11060726
> 
> 赞同：3
> 
> 时间：2012-06-16T04:06:40.860
> 
> 标签：scala, intellij-idea

当我在 IntelliJ 中输入带有参数的方法然后尝试向其添加 doc 标签时，当我输入

/**

我希望 @param 和 @return 标记已为我填写。当我输入上述内容时，如何让它自动发生

例如

```
 /**
      *
      * @param field1
      * @return String
      */      
    def testMethod(field1:String): String = "hi" 
```

但是当我这样做时，它会这样做：

```
 /**
*/
    def testMethod(field1:String): String = "hi" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T16:15:12.637

它在 IntelliJ idea v11.1.2 和 scala plugin v0.5.800 中工作

只需键入`/**`，然后按功能顶部的“返回”。它生成以下代码：

```
/**
  *
  * @param field1
  * @return
  */      
def testMethod(field1:String): String = "hi" 
```

你也可以尝试更新你的scala插件，这个功能还很年轻。

**编辑**：在 JetBrains 中有一张针对该文档的公开票，但“它似乎已修复”

[http://youtrack.jetbrains.com/issue/SCL-2433#tab=评论](http://youtrack.jetbrains.com/issue/SCL-2433#tab=Comments)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T21:15:38.093

我的现有设置一定是某个地方的问题，我清除了 OSX 上的设置，删除了 ~/Library/Preferences/IntelliJ* 文件夹并重新启动它，重新配置了我的 IntelliJ 设置。它现在正在使用 scaladoc 标签。

# android - 在 Android 中将选项卡添加到 Tabspec 时崩溃

> ID：11060728
> 
> 赞同：0
> 
> 时间：2012-06-16T04:07:33.193
> 
> 标签：android, layout, android-fragments

我想创建选项卡并向其添加片段，但是在将 Tabspec 添加到选项卡时出现崩溃。这里是来源，

```
mTabHost = (TabHost)findViewById(android.R.id.tabhost);

  TabHost.TabSpec spec;  // Resusable TabSpec for each tab
  Intent intent;  // Reusable Intent for each tab

  intent = new Intent().setClass(this, DummyFrag.class);

  spec = mTabHost.newTabSpec("artists").setIndicator("Numbers").setContent(intent);

  FragmentManager fm       = getSupportFragmentManager();
  Fragment        fragment = fm.findFragmentById(android.R.id.tabcontent);

  if (fragment == null) 
  {
    FragmentTransaction ft = fm.beginTransaction(); 
    ft.add(android.R.id.tabcontent, new DummyFrag(),"DummyFrag");
   //   m_mainactivity.getSupportActionBar().selectTab(curTab);
    ft.commit();
  }

  mTabHost.addTab(spec);

}

public static class DummyFrag extends Fragment {

    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) 
    {
        View view = inflater.inflate(R.layout.dummy, container, false);   
        return view;    
    }

} 
```

请告诉我问题可能出在哪里，提前谢谢

记录猫的详细信息

```
 06-16 11:11:15.797: E/AndroidRuntime(461): java.lang.RuntimeException: Unable to start activity ComponentInfo{simple.preview.screen/simple.preview.screen.SimplePreviewActivity}: java.lang.NullPointerException
06-16 11:11:15.797: E/AndroidRuntime(461):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
06-16 11:11:15.797: E/AndroidRuntime(461):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
06-16 11:11:15.797: E/AndroidRuntime(461):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
06-16 11:11:15.797: E/AndroidRuntime(461):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
06-16 11:11:15.797: E/AndroidRuntime(461):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-16 11:11:15.797: E/AndroidRuntime(461):  at android.os.Looper.loop(Looper.java:123)
06-16 11:11:15.797: E/AndroidRuntime(461):  at android.app.ActivityThread.main(ActivityThread.java:4627)
06-16 11:11:15.797: E/AndroidRuntime(461):  at java.lang.reflect.Method.invokeNative(Native Method)
06-16 11:11:15.797: E/AndroidRuntime(461):  at java.lang.reflect.Method.invoke(Method.java:521)
06-16 11:11:15.797: E/AndroidRuntime(461):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
06-16 11:11:15.797: E/AndroidRuntime(461):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
06-16 11:11:15.797: E/AndroidRuntime(461):  at dalvik.system.NativeStart.main(Native Method)
06-16 11:11:15.797: E/AndroidRuntime(461): Caused by: java.lang.NullPointerException
06-16 11:11:15.797: E/AndroidRuntime(461):  at android.widget.TabHost.addTab(TabHost.java:209)
06-16 11:11:15.797: E/AndroidRuntime(461):  at simple.preview.screen.SimplePreviewActivity.onCreate(SimplePreviewActivity.java:50)
06-16 11:11:15.797: E/AndroidRuntime(461):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
06-16 11:11:15.797: E/AndroidRuntime(461):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T05:50:06.173

问题是在包含 tabhost 的 xml 文件中，您必须将其从 @android:id/tabhost 更改为 @+id/tabhost。

# javascript - 如何在轴 three.js 上旋转 3D 对象？

> ID：11060734
> 
> 赞同：40
> 
> 时间：2012-06-16T04:08:23.210
> 
> 标签：javascript, coffeescript, three.js

我对three.js 中的旋转有一个很大的问题我想在我的一个游戏中旋转我的3D 立方体。

```
//init
geometry = new THREE.CubeGeometry grid, grid, grid
material = new THREE.MeshLambertMaterial {color:0xFFFFFF * Math.random(), shading:THREE.FlatShading, overdraw:true, transparent: true, opacity:0.8}
for i in [1...@shape.length]
    othergeo = new THREE.Mesh new THREE.CubeGeometry(grid, grid, grid)
    othergeo.position.x = grid * @shape[i][0]
    othergeo.position.y = grid * @shape[i][1]
    THREE.GeometryUtils.merge geometry, othergeo
@mesh = new THREE.Mesh geometry, material

//rotate
@mesh.rotation.y += y * Math.PI / 180
@mesh.rotation.x += x * Math.PI / 180
@mesh.rotation.z += z * Math.PI / 180 
```

和 (x, y, z) 可能是 (1, 0, 0)

然后立方体可以旋转，但问题是立方体在自己的轴上旋转，所以旋转后，它不能按预期旋转。

我找到页面[如何围绕轴旋转 Three.js Vector3？](https://stackoverflow.com/questions/10747510/how-to-rotate-a-three-js-vector3-around-an-axis)，但它只是让 Vector3 点围绕世界轴旋转？

我尝试使用**matrixRotationWorld**作为

```
@mesh.matrixRotationWorld.x += x * Math.PI / 180
@mesh.matrixRotationWorld.y += y * Math.PI / 180
@mesh.matrixRotationWorld.z += z * Math.PI / 180 
```

但它不起作用，我不知道我是否以错误的方式使用它或有其他方式..

**那么，如何让 3D 立方体绕世界轴旋转？？？**

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2015-06-20T14:20:33.477

从 r59 版本开始，three.js 提供了这三个[函数](https://threejs.org/docs/index.html?q=geom#api/en/core/Object3D.rotateX)来围绕对象轴旋转对象。

```
object.rotateX(angle);
object.rotateY(angle);
object.rotateZ(angle); 
```

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2012-06-16T05:01:45.177

这是我使用的两个函数。它们基于矩阵旋转。并且可以绕任意轴旋转。要使用世界轴旋转，您需要使用第二个函数 rotateAroundWorldAxis()。

```
// Rotate an object around an arbitrary axis in object space
var rotObjectMatrix;
function rotateAroundObjectAxis(object, axis, radians) {
    rotObjectMatrix = new THREE.Matrix4();
    rotObjectMatrix.makeRotationAxis(axis.normalize(), radians);

    // old code for Three.JS pre r54:
    // object.matrix.multiplySelf(rotObjectMatrix);      // post-multiply
    // new code for Three.JS r55+:
    object.matrix.multiply(rotObjectMatrix);

    // old code for Three.js pre r49:
    // object.rotation.getRotationFromMatrix(object.matrix, object.scale);
    // old code for Three.js r50-r58:
    // object.rotation.setEulerFromRotationMatrix(object.matrix);
    // new code for Three.js r59+:
    object.rotation.setFromRotationMatrix(object.matrix);
}

var rotWorldMatrix;
// Rotate an object around an arbitrary axis in world space       
function rotateAroundWorldAxis(object, axis, radians) {
    rotWorldMatrix = new THREE.Matrix4();
    rotWorldMatrix.makeRotationAxis(axis.normalize(), radians);

    // old code for Three.JS pre r54:
    //  rotWorldMatrix.multiply(object.matrix);
    // new code for Three.JS r55+:
    rotWorldMatrix.multiply(object.matrix);                // pre-multiply

    object.matrix = rotWorldMatrix;

    // old code for Three.js pre r49:
    // object.rotation.getRotationFromMatrix(object.matrix, object.scale);
    // old code for Three.js pre r59:
    // object.rotation.setEulerFromRotationMatrix(object.matrix);
    // code for r59+:
    object.rotation.setFromRotationMatrix(object.matrix);
} 
```

所以你应该在你的函数中调用这些函数`anim`（requestAnimFrame 回调），导致在 x 轴上旋转 90 度：

```
var xAxis = new THREE.Vector3(1,0,0);
rotateAroundWorldAxis(mesh, xAxis, Math.PI / 180); 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-10-15T23:11:22.323

我需要该`rotateAroundWorldAxis`功能，但上面的代码不适用于最新版本（r52）。它看起来像`getRotationFromMatrix()`被替换为`setEulerFromRotationMatrix()`

```
function rotateAroundWorldAxis( object, axis, radians ) {

    var rotationMatrix = new THREE.Matrix4();

    rotationMatrix.makeRotationAxis( axis.normalize(), radians );
    rotationMatrix.multiplySelf( object.matrix );                       // pre-multiply
    object.matrix = rotationMatrix;
    object.rotation.setEulerFromRotationMatrix( object.matrix );
} 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-01-22T14:23:53.697

使用 r55 你必须改变
rotationMatrix.multiplySelf(object.matrix);
到
rotationMatrix.multiply(object.matrix);

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2013-08-18T06:27:37.443

在 Three.js R59 中，`object.rotation.setEulerFromRotationMatrix(object.matrix);`已更改为`object.rotation.setFromRotationMatrix(object.matrix);`

3js 变化如此之快 :D

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2012-11-07T20:22:47.517

以防万一...在 r52 中调用该方法`setEulerFromRotationMatrix`而不是`getRotationFromMatrix`

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2014-05-24T11:21:33.380

在 r59 附近的某个地方，这变得更容易（围绕 x 旋转）：

```
bb.GraphicsEngine.prototype.calcRotation = function ( obj, rotationX)
{
    var euler = new THREE.Euler( rotationX, 0, 0, 'XYZ' );
    obj.position.applyEuler(euler);
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-03-11T19:40:02.733

在 Three.js R66 中，这是我使用的（CoffeeScript 版本）：

```
THREE.Object3D.prototype.rotateAroundWorldAxis = (axis, radians) ->
  rotWorldMatrix = new THREE.Matrix4()
  rotWorldMatrix.makeRotationAxis axis.normalize(), radians
  rotWorldMatrix.multiply this.matrix
  this.matrix = rotWorldMatrix
  this.rotation.setFromRotationMatrix this.matrix 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-09-20T16:06:25.497

我是这样解决的：

我为 ThreeJS 创建了“ObjectControls”模块，它允许您旋转单个 OBJECT（或组），而不是 SCENE。

包括库：

`<script src="ObjectControls.js"></script>`

用法：

`var controls = new ObjectControls(camera, renderer.domElement, yourMesh);`

你可以在这里找到一个现场演示：[https ://albertopiras.github.io/threeJS-object-controls/](https://albertopiras.github.io/threeJS-object-controls/)

这是回购：[https](https://github.com/albertopiras/threeJS-object-controls) ://github.com/albertopiras/threeJS-object-controls 。

# php - 创建javascript函数来破坏php会话

> ID：11060735
> 
> 赞同：2
> 
> 时间：2012-06-16T04:08:23.683
> 
> 标签：php, javascript, session, destroy

我无法弄清楚如何创建一个会破坏 php 会话的 javascript 函数。我有一个可点击的链接，它将调用一个名为 destroyphpsess 的函数。我认为到目前为止一切都很好。现在我需要定义 javascript 函数。这是我到目前为止的代码......

```
if ($_SESSION['color'] == "") {
    $var = "<a href='JavaScript:newPopup(\"http://www.yourfantasyfootballreality.com/register.php\");' class='two'>Register</a> | <a href='JavaScript:newPopup(\"http://www.yourfantasyfootballreality.com/signin.php\");' class='two'>Sign In</a>";
} else {
    $var = "Hello, ".$_SESSION['color'] ."! | " . "<a href=\"http://www.yourfantasyfootballreality.com/index.php\" onclick=\"destroyphpsess()\" class='two'>Log Out</a>";
}
echo $var; 
```

现在我需要定义 javascript 函数。这是我遇到麻烦的地方。这是我到目前为止的基本轮廓......

```
function destroyphpsess()
{
<?php
session_destroy();
?>
} 
```

如果有人可以帮助我使用该功能，我将不胜感激！谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-16T04:16:20.270

您的 JavaScript 在客户端运行，而您的 PHP 在服务器端运行。您不能以这种方式从 JavaScript 调用 PHP 函数。你有两个选择：

1.  对清除会话数据的服务器端脚本执行 AJAX 调用*（推荐，以保持服务器端内容的一致性和正确清除）*
2.  使用 JavaScript 清除 PHPSESSID cookie *（如果您重新配置处理会话的方式，或者如果会话由 URL 参数处理，则不起作用）*

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-16T04:18:11.830

PHP 会话通常使用存储在客户端的 cookie。以下代码将清除该 cookie，从而取消链接会话。

`document.cookie = 'PHPSESSID=; expires=Thu, 01-Jan-70 00:00:01 GMT;';`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T04:39:05.317

每个人都在说 AJAX。如果您也想在服务器端清理 cookie，这将是一个好主意，但我认为如果您知道 AJAX 是什么，您可能已经使用它了......

[当我第一次接触AJAX](http://en.wikipedia.org/wiki/Ajax_%28programming%29)时，我发现它非常令人困惑。所以我建议看看并可能使用 jQuery 的[AJAX](http://api.jquery.com/category/ajax/)功能。只为一个函数包含 jQuery 可能有点矫枉过正，但它可能会更容易一些。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T01:17:54.157

Your JavaScript runs client-side, and your PHP runs server-side. You can't call PHP functions from JavaScript this way. You have two options:

Do an AJAX call to a server-side script that clears the session data (recommended, for consistency and proper clearing of that stuff server-side) Clear the PHPSESSID cookie with JavaScript (won't work if you reconfigure how you handle sessions, or if sessions are handled by URL parameters)

# visual-c++ - NMAKE.EXE 和带有多个句点的文件

> ID：11060738
> 
> 赞同：1
> 
> 时间：2012-06-16T04:08:30.383
> 
> 标签：visual-c++, protocol-buffers, nmake

我想在 Windows 下使用 nmake.exe 来构建一个使用 Google protobufs 的 C++ 项目。这需要为项目中的所有 .proto 文件执行 protoc.exe。

我遇到的问题是在 nmake.exe 中提出一个规则，该规则将编译一个 .proto 文件，这是由于 protoc.exe 的输出是 .pb.cc 形式的文件这一事实引起的

以下都不起作用：

```
.SUFFIXES: .proto .cc

.proto.cc:
        protoc.exe -cpp_out=<target folder> $< 
```

或者

```
.SUFFIXES: .proto .pb.cc

.proto.pb.cc:
        protoc.exe -cpp_out=<target folder> $< 
```

第二个产生以下错误：

```
filename.mk(3) : fatal error U1092: too many names in rule 
```

这并不奇怪，但是第一个默默地失败了。我相当肯定第一种情况会失败，因为文件名“stems”，因为 gnu make 调用它们，由于在名称中添加了“.pb”序列而不匹配。

# javascript - for 循环元素的执行时间比内部 AJAX 调用可以响应的时间要快

> ID：11060739
> 
> 赞同：2
> 
> 时间：2012-06-16T04:08:40.630
> 
> 标签：javascript

我有函数 LoadTempMovieList()，需要从 sessionStorage 加载电影。但似乎 for 循环的执行时间比我正在制作的 AJAX 调用可以响应更快，因此最终输出的顺序有时不正确。我怎么解决这个问题？

```
function LoadTempMovieList(){
  var obList = [];
  if(sessionStorage.struct != null){
    alert(sessionStorage.struct);
    obList = sessionStorage.struct.split(",");
    for(var i=0; i<obList.length;i++){
      MovieLoader(obList[i],"movie");
      //it use setTimeOut(), the problem also present 
    }
  }
} 
```

更新

```
function MovieLoader(name,type,movieArray){
  $.ajax({
    ...
    data:{shortName:name,type:type},
    dataType:'html',
    success:function (html){
      if(html!="0"){
        ...
      }else{
        ...
      }
    }
  });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T04:20:38.613

我正在引入递归以按对象在数组中的顺序加载对象。我还介绍了一些您可能认为不需要包含的代码来验证我们是否有一个数组（以防某些错误的其他函数调用它，或其他）

```
function LoadTempMovieList(){
  var obList = [];
  if(sessionStorage.struct != null){
    alert(sessionStorage.struct);
    obList = sessionStorage.struct.split(",");

    LoadMoviesInOrder(obList);
  }
}

function LoadMoviesInOrder(movies){
  if( Object.prototype.toString.call( movies ) === '[object Array]' ){
    //get the very first object in the array, take it off the array
    var movie = movies.shift();
    MovieLoader(movie,"movie",movies);
  }
}

function MovieLoader(name,type,movieArray){
  $.ajax({
    ...
    data:{shortName:name,type:type},
    dataType:'html',
    success:function (html){
      if(html!="0"){
        ...

        if (movieArray.length) { //test to see if there are more movies left by using truthiness
          //wait 50 ms and call this function again, so that we achieve recursion
          setTimeout(function(){LoadMoviesInOrder(movieArray); }, 50);
        }
      }else{
        ...
      }
    }
  });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T04:22:38.537

如果您在原始问题中引用的 ajax 调用（在其他人编辑之前）是异步的，那么您将不得不使用 ajax 调用的完成功能来触发对 MovieLoader 的下一次调用。

由于 ajax 调用的完成时间不确定，因此尝试使用某种 setTimeout() 来猜测 ajax 调用需要多长时间并不完全可靠。对 ajax 结果进行排序的唯一 100% 可靠的方法是对 ajax 调用进行排序，并且在第一个调用完成之前不启动下一个 ajax 调用，等等......

您没有向我们展示您的实际 ajax 调用，因此我们无法更具体地了解实现此功能的最佳方式。

# java - 链表直觉

> ID：11060743
> 
> 赞同：0
> 
> 时间：2012-06-16T04:09:24.487
> 
> 标签：java, linked-list

```
public void printList( ){
    Node<E> p ;
    System.out.printf( ” [ ” ) ;
    for ( p=head.next ; p != null ; p=p.next )
        System.out.print( p.element ) ;
    System.out.printf( ” ] ” ) ;
}

public void addLast (E e){
    Node<E> p = head;   // <--- data type Node<E>, var name = p, but what is head type?
    while ( p.next != null )
        p = p.next ;
    p.next = new Node<E>(e , null ) ;
} 
```

泛型示例：

```
public class Box {
private Object object;

public void set(Object object) { this.object = object; }
public Object get() { return object; } 
```

}

使用泛型：

```
// T stands for "Type"
public class Box<T> {
    private T t; 

    public void set(T t) { 
        this.t = t;
    }
    public T get() { 
        return t;
    }
} 
```

我对链表如何直观地工作有一个大致的了解，但是我在代码中看不到它。

我知道你有元素和对下一个节点的引用。在上面的代码中，“.”是怎么回事？运算符在遍历列表直到达到 null 时工作？

我相信“下一个”是一个参考变量。当它执行 p=p.next 时，它在代码/计算机中如何工作？

在不相关的注释上，节点？而不是节点（E）？不同之处？在上面的例子中，似乎 'object' 被 't' 取代了，我看不出有什么好处。;S

任何帮助都非常感谢，在此先感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T04:14:19.337

在上面的代码中，只要`head.next`不等于 null p 就会被设置为列表中的下一个“链接”。这将继续下去。`p.next`返回对下一个链接的引用，然后将其设置为 p。该参考链将继续存在。

`Node<E>`是一个泛型类型，它允许类的用户传递节点要包含的类型。与简单地使用强制转换相比，这允许更大的类型安全性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T04:16:33.050

假设您的`Node`班级属于以下类型：

```
class Node<T>{
    Node<T> next;
    T element;
} 
```

现在任何对“节点”类的引用都可以访问它的两个属性。运算符`.`用于访问属性。

当您设置`p = p.next`时，它只是内部指针的移动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T04:24:44.510

将 LinkedList 视为链接节点的列表可能会有所帮助。每个节点将持有对下一个节点的引用（如果存在）。我不确定它是否会有所帮助，但是当我不得不在学校完成这项作业时，我发现查看[API](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedList.html)并尝试使用它非常有帮助。

使用泛型节点将是对象类型的节点，其中节点将是特定类型的节点。例如，LinkedList 将保存字符串。[这](http://docs.oracle.com/javase/tutorial/java/generics/types.html)可能有助于更好地理解泛型的工作原理。

下面是一个使用泛型的简单示例：

```
Class Box<E>{
    private E variable;

    public E get(){
        return variable;
    }

    public void set(E variable){
        this.variable=variable;
    }

    public static void main(String[] args){
        Box<String> example=new Box<String>();
        example.set("test");
        System.out.println(example.get());

        Box<Integer> example2=new Box<Integer>();
        example2.set(1);
        //example2.set("test");will not work because it is types as an Integer
        System.out.println(example2.get()+1);
    }
} 
```

# objective-c - 使用 Tiled 和 Cocos2d 的平铺贴图时，如何避免对视网膜的双重努力

> ID：11060750
> 
> 赞同：1
> 
> 时间：2012-06-16T04:11:49.823
> 
> 标签：objective-c, cocos2d-iphone, tmx

我有视网膜瓦片地图工作，15x10 瓦片，64x64 瓦片。问题是对于非视网膜设备，我需要制作 32x32 瓷砖的 15x10 瓷砖。我不想重新创建 Tile，这只是更改 XML (.tmx) 文件的情况吗？是否有自动化工具或其他解决方法？我一直在网上寻找，但没有得到太多帮助。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T09:00:23.243

您必须更新 TMX 文件并缩放某些属性。除非您的 TMX 地图非常简单，否则这将是一项乏味且容易出错的任务，最好留给工具来完成。

市面上有多种 TMX 重新缩放工具，但有些对我不起作用，或者当时根本不完整（即一个没有缩放对象层）。我所知道的所有工具通常都是用相当不寻常的语言（至少对于 iOS 开发人员而言）编写的，比如 Python、Ruby 或 Bash 脚本。其他的只能作为没有源代码的二进制文件提供。

[查看这个 cocos2d 论坛帖子](http://www.cocos2d-iphone.org/forum/topic/11660)。特别[是 App Store 上的](http://www.sovapps.com/hd2x/)[这个工具](http://wasabibit.com/WasabiBit/Dev_Notes.html)或HDx 。[iTilemaps](http://www.klemix.com/page/iTileMaps.aspx)也可能对您有用。

因为我对这两种选择都不满意，所以我在 Objective-C 中编写了自己的命令行工具**tmx2scale**，以智能地在各个方向重新缩放 TMX 地图。tmx2scale 工具目前不可用，但它将与[KoboldScript 游戏工具包项目](http://www.koboldscript.com/)的源代码一起分发。

# jquery - “未捕获的类型错误：无法设置未定义的属性‘左’”使用来自内容脚本 chrome 扩展的 jQuery

> ID：11060754
> 
> 赞同：2
> 
> 时间：2012-06-16T04:13:05.977
> 
> 标签：jquery, google-chrome-extension

我正在尝试使用 jQuery 遍历我正在向其中注入代码的页面的 DOM，但不断收到此错误。

我的清单文件是：

```
{
  "name": "Jive enhancer",
  "version": "2.0.0",
  "description": "",
  "permissions": [
    "tabs", "http://*/*", "https://*/*"
  ],
  "icons": {
    "48" : "sample-48.png",
    "128" : "sample-128.png"
  },
  "content_scripts": [
    {
      "matches": ["https://*/*"],//just for the question
      "js": [
            "jquery-1.7.2.js",
                "contentscript.js"
                ]
    }
  ]
} 
```

这是我的 contentscript.js：

```
function test () {
    console.log ("injected");
    $("j-comm-activity-list").style.left="100px";   
}

test(); 
```

我的内容脚本被注入的页面有一个 div，其 id 为：“j-comm-activity-list”，但由于某种原因，我不断收到此错误。从控制台执行相同的命令就可以了。我很绝望！

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T04:14:42.020

使用 jQuery (Sizzle) 选择器，就像在 CSS 中一样，您可以使用`#`. `$("j-comm-activity-list")`没有 a的选择器`#`正在搜索具有标签 name`j-comm-activity-list`的元素，而不是具有该 id 的元素。您想使用[jQuery ID Selector](http://api.jquery.com/id-selector/)。

jQuery 对象也没有`style`属性。您可以使用数组表示法获取您选择的 DOMElement，例如[（](http://api.jquery.com/css/)这`$("#j-comm-activity-list")[0]`是`$("#j-comm-activity-list").get(0)`.

```
$("#j-comm-activity-list").css('left', 100); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T04:14:35.323

尝试这个：

```
$("#j-comm-activity-list").css('left', '100px') 
```

# objective-c - ARC 印象

> ID：11060757
> 
> 赞同：0
> 
> 时间：2012-06-16T04:13:56.210
> 
> 标签：objective-c, automatic-ref-counting

自 Apple 推出 ARC 以来已经过去了大约一年。我个人还没有尝试过——主要是因为我很好地使用了经典的保留/释放方案。在我看来，ARC 就像另一个“Objective-C GC 泡沫”——承诺使内存管理更容易的技术，但通过将控制权从程序员手中移开并替换旧的众所周知且干净的技术，只会使问题变得更加复杂规则与其他一些隐含的规则。

我只是想知道，开发人员有什么印象，谁有机会在现实世界的生产应用程序中使用它？这是一种解脱还是一种巨大的失望？

在此先感谢，亚历山大

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T04:17:36.327

我很喜欢。我认为这很棒。

一开始习惯有点奇怪，但我永远不会回去（我不认为）。我想不出一个我觉得 ARC 阻碍了我的例子，事实上，我认为不必再担心模糊的悬空指针或内存管理规则是一种巨大的解脱:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T04:47:07.463

老实说，我从来没有真正介意手动进行内存管理。话虽如此，我喜欢 ARC 有几个原因：

1.  省时间
2.  代码缩减器
3.  **清零弱参考！！！**我喜欢积木，它们正变得越来越流行。将弱引用归零对于块来说是巨大的。要在不使用 ARC 的情况下实现弱引用归零，您需要使用[MAZeroingWeakRef 之](http://www.mikeash.com/pyblog/introducing-mazeroingweakref.html)类的东西，这是一个合适但不太理想的解决方案。

看起来 ARC 不会节省太多时间或减少你必须编写的代码量，但在我看来，它实际上比你想象的要大得多。起初我持怀疑态度，但在这一点上，如果没有 ARC，我永远不会开始一个新项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T05:08:54.180

我可能听起来很菜，但是 ARC 在编程过程中让事情变得更加直观。我从 Visual C# 转到 Xcode，变化并没有那么剧烈，因为 c# 已经自动化了一段时间的内存管理。我想这更多的是个人喜好。

# asp.net - 是否可以读取 asp.net 也使用的 aspx/cshtml 文件

> ID：11060758
> 
> 赞同：0
> 
> 时间：2012-06-16T04:14:05.750
> 
> 标签：asp.net, asp.net-mvc

我希望用户能够看到他所在页面的源代码，所以我打算从文件系统 ( `Server.MapPath("~/Views/home/index.aspx"`)) 中读取文件并将其输出到 html 中。

我只是想知道这种方法是否有任何问题，例如 asp.net 进程是否锁定了 aspx/cshtml 文件或类似的东西

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T04:31:22.270

这完全没问题。Asp.net 不会锁定到 aspx 文件。它在第一次请求时读取这些文件，并以一种格式存储它 IL 格式编译的代码，然后从那时起只监视原始 aspx 的更改。如果文件更改，则重新编译。

参考：[动态编译](http://msdn.microsoft.com/en-us/library/ms366723.aspx)

我找不到任何文档来支持这一点，但如果你阅读了 aspx 文件，你应该没有问题。

# scala - 我的 Play 2 应用程序如何响应来自客户端的不同“接受”标头？

> ID：11060761
> 
> 赞同：10
> 
> 时间：2012-06-16T04:14:38.007
> 
> 标签：scala, playframework-2.0

在 Rails 中，我能够执行类似于以下的操作：

```
respond_to do |format|
  format.xml { ... }
  format.json { ... }
end 
```

并且将根据客户端在 Accept 标头中提供的内容执行相应的块。

如何在 Play 2.0 (Scala) 中做同样的事情？

我想做一些看起来大致像这样的事情：

```
try {
  Resources.delete(id)
  Ok("done")
} 
catch { 
  case e: ClientReportableException =>
    ?? match { 
      case "application/xml" => Ok(<error>{e.message}</error>)
      case "application/json" => Ok(...)
  }
} 
```

是否有一个 Play 习惯用法，或者我只是从请求中获取 Accept 标头的值？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-16T09:32:32.813

在 Play 2.1 中，您可以编写以下代码：

```
request match {
  case Accepts.Xml() => Ok(<error>{e.message}</error>)
  case Accepts.Json() => Ok(…)
} 
```

case 语句按照它们编写的顺序进行尝试，因此如果您的客户端将 HTTP`Accept`标头设置`*/*`为第一个，则将匹配（在此示例中`case Accepts.Xml()`）。因此，您通常希望先编写`Accepts.Html()`案例，因为浏览器将`Accept`标题设置为`*/*`.

（注意：对于 Java 中的类似问题，您可能也[对此答案](https://stackoverflow.com/questions/10676577/render-output-format-html-json-xml-depending-on-parameter/10685804#10685804)感兴趣）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T22:06:05.463

我刚刚发布了一个Play！用于内容协商的 2.0 模块称为 mimerender ( [http://github.com/martinblech/play-mimerender](http://github.com/martinblech/play-mimerender) )。

这个想法是您必须定义从域类到不同表示的映射：

```
val m = mapping(
  "text/html" -> { s: String => views.html.index(s) },
  "application/xml" -> { s: String => <message>{s}</message> },
  "application/json" -> { s: String => toJson(Map("message" -> toJson(s))) },
  "text/plain" -> identity[String]_
) 
```

完成一次后，您可以在所有控制器中重用该映射：

```
object Application extends Controller {
  def index = Action { implicit request =>
    m.status(200)("Hello, world!")
  }
} 
```

请注意，这是一个非常早的版本，仅在 Play 2.0.4 上进行了测试

# php - 在 MySQL 中使用准备好的语句可以防止 SQL 注入攻击吗？

> ID：11060768
> 
> 赞同：4
> 
> 时间：2012-06-16T04:15:33.803
> 
> 标签：php, mysql, pdo, sql-injection

我只想验证在 MySQL 中使用准备好的语句是否可以防止 SQL 注入。

下面的代码会阻止所有的 SQL 注入攻击吗？

```
$var = $_GET['q']; 
$trimmed = trim($var);
if ($trimmed != NULL) {
  $get_fighters = $DBH->prepare(
    'SELECT * 
    FROM fighters 
    WHERE name LIKE :searchTerm 
      OR nickname LIKE :searchTerm 
      OR born_in_city LIKE :searchTerm
      OR born_in_state LIKE :searchTerm
      OR born_in_country LIKE :searchTerm
      ORDER BY name ASC');
  $get_fighters->bindValue(':searchTerm', '%' . $trimmed . '%', PDO::PARAM_STR);
  $get_fighters->setFetchMode(PDO::FETCH_ASSOC);
  $get_fighters->execute();
  $check_results_fighters = $get_fighters->rowCount();

  $get_events = $DBH->prepare(
    'SELECT * 
    FROM events 
    WHERE event_name LIKE :searchTerm
      OR event_arena LIKE :searchTerm
      OR event_city LIKE :searchTerm
      OR event_state LIKE :searchTerm
      OR event_country LIKE :searchTerm
      OR organization LIKE :searchTerm
    ORDER BY event_date DESC');

  $get_events->bindValue(':searchTerm', '%' . $trimmed . '%', PDO::PARAM_STR);
  $get_events->setFetchMode(PDO::FETCH_ASSOC);
  $get_events->execute();
  $check_results_events = $get_events->rowCount(); 
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-16T04:21:24.447

准备好的查询通过分离要运行的查询和要用于该查询的数据来防止攻击。这意味着不会发生一阶攻击，因为您没有将数据直接连接到查询中。

简而言之，如果您总是使用准备好的查询，并且您的所有数据都是使用绑定参数发送的（包括来自其他查询的数据！），那么就 SQL 注入而言，您没问题。

*（我还应该注意，一些不支持准备好的查询的服务器的 PDO 驱动程序会使用传统的转义例程来伪造它。不要担心这个。它是安全的。）*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-16T04:19:13.920

是的，根据 php 文档，使用准备好的语句将防止 SQL 注入。

见[链接](http://php.net/manual/en/pdo.prepared-statements.php)

# android - Android：等待更长的运行过程[Timer vs AsyncTask]

> ID：11060773
> 
> 赞同：0
> 
> 时间：2012-06-16T04:16:20.913
> 
> 标签：android, android-asynctask

当我的应用程序在 中加载数据时`AsyncTask`，它会显示一个启动画面。有时这种数据加载需要不到一秒钟的时间，有时需要更长的时间。但是，如果数据加载首先完成，我想确保启动至少 2 秒，否则等到数据完成。

我的第一个解决方案是使用一个`Countdown Timer`, 和两个布尔值。当进程启动时，它们的布尔值将设置为 true。该过程完成后，它将设置为布尔值假。然后它会检查对方的布尔值是否为假，以及是否关闭了飞溅。

虽然这可行，但我觉得它过于复杂，并希望找到更有效或更好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T04:21:42.700

> 如果数据加载首先完成，我想确保启动至少 2 秒，否则等到数据完成。

您可以异步启动 Thread(Splash) 和 AsyncTask 以加载数据并在`onPostExecute()`AsyncTask 上调用新的 Activity。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T04:23:44.837

你不能用来`System.getCurrentTime();`完成这个吗？

在 AsyncTask 开始时，调用该方法并存储结果。然后，当任务完成时，再次调用该方法并计算时间值的差异。如果它不大于 2000 毫秒，则有一个 while 循环不断请求系统时间并比较这些值，直到其等于或大于 2 毫秒。

# ruby-on-rails - RoR：如何缩进一个输入表单而不缩进另一个？

> ID：11060779
> 
> 赞同：1
> 
> 时间：2012-06-16T04:18:38.557
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

所以我试图缩进这段代码给出的形式。

```
<%= form_for([micropost, micropost.comments.build]) do |f| %>

    <div class="field">
      <p2>Who are you?</p2>
      <%= f.text_field :commenter %>
    </div>
    <div class="field">
      <p2>What deal are you offering?</p2>
      <%= f.text_area :body %>
    </div>
    <div class="actions">
      <%= f.submit "Submit"%>
    </div> 
```

现在我的css文件有这个

```
/* forms */

input, textarea, select, .uneditable-input {
  border: 1px solid #bbb;
  width: 100%;
  padding: 10px;
  height: auto;
  margin-bottom: 15px; 
```

我可以添加类似 margin-left: 80px; 但这会缩进我所有的输入表单。我怎样才能以不同的方式命名这个表单，以便我可以用我的 css 文件与之交谈？或者，还有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T04:28:23.387

如果您使用的是 google chrome，我强烈建议您使用 stylebot 实时测试您的 css 修改。太有帮助了。[https://chrome.google.com/webstore/detail/oiaejidbmkiecgbjeifoejpgmdaleoha](https://chrome.google.com/webstore/detail/oiaejidbmkiecgbjeifoejpgmdaleoha)

此外，您需要做的是向您希望更改的表单或表单元素添加一个唯一的 id。

对于整个表格

```
<%= form_for([micropost, micropost.comments.build], :html => { :id => "blah_form" }) do |f| %> 
```

只针对一个领域

```
<%= f.text_area :body, :id => 'blah_field' %> 
```

有关 form_for 的更多信息：

[http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T04:29:36.617

尝试这个：

```
<%= form_for([micropost, micropost.comments.build], :html => {:id => "some_id" }) do |f| %> 
```

这会为表单添加一个唯一的 id，这样您就可以在 CSS 中缩进它，而不要更改其他的。

我的意思是，为了改变它，你可以在你的 CSS 中为那个 id 定义一些东西。

# c - C/C++：缓存相机数据

> ID：11060781
> 
> 赞同：2
> 
> 时间：2012-06-16T04:19:00.177
> 
> 标签：c, caching, opencv, camera

我通过千兆位以太网接口从相机获取数据。因为数据很小，我想把这个直接放到L1缓存中（而不是DRAM），这样处理速度很快。

我怎样才能做到这一点？有没有为此的编译器指令？

**平台信息**
Windows 7、Intel Core2Duo、Visual Studio 2010、C/C++、OpenCV。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T16:24:37.230

在具有大缓存的高端计算机中，性能不会有显着提高。

在图像太大而无法完全加载到缓存中并且许多算法要在同一个图像上运行大量次的情况下，可能会提高性能。在这种情况下，图像的一部分被加载到缓存并在其上运行算法，然后复制其余部分并继续运行。这种情况可以很容易地在 Beagleboard 等具有 32kb L1 缓存的嵌入式设备中重现。在这种情况下，可以通过有效地分割图像并在加载图像的下一部分之前在图像的一部分上运行所有进程来提高算法的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T10:49:04.753

~~Gcc 将为 -O1 -O2 -O3 的数组数据生成数据预取指令。这一切都是最近重新设计的。因此，_DATAPREFETCH 标志不太可能比标准优化级别提供任何改进。~~

至于绕过内存，如何为数据分配缓存标签？缓存标签在内存获取时发出，cpu 通过它的缓存标签在缓存中找到数据。

DuoCore 共享一个标签总线，我相信 GPU 可以挂起标签总线，所以我们可以设想一个 I/O 控制器这样做，但我还没有找到参考。你的千兆卡在哪个插槽？

（各种 cpu 系列的旧标签列表。）[ http://gcc.gnu.org/projects/prefetch.html]

```
" -fprefetch-loop-arrays
如果目标机器支持，生成指令以预取内存以提高访问大型数组的循环的性能。

此选项可能会生成更好或更差的代码；结果高度依赖于源代码中的循环结构。“（gcc-4.7）[http://gcc.gnu.org/onlinedocs/gcc-4.7.1/gcc/Optimize-Options.html#Optimize-Options]
```

# ruby-on-rails - Mac OSx Lion - 无法安装 RoR

> ID：11060785
> 
> 赞同：0
> 
> 时间：2012-06-16T04:19:19.753
> 
> 标签：ruby-on-rails, ruby

我最近升级到 Lion，我正在尝试安装 Rails。我使用 RubyGems 安装 rails，每次尝试启动一个新的 rails 项目时，我都会收到一条错误消息，提示“找不到方法 'list '”。

所以我使用 RubyGems 卸载了 Rails。我注意到我安装了两个版本。我都卸载了。然后我跑了'gem clean'。我再次安装了 Rails，但现在当我尝试创建一个新的 Rails 应用程序时，就好像没有安装 Rails。

> rails：找不到命令

我安装了新的 Xcode 命令行工具。有谁能帮帮兄弟吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T05:23:03.683

我相信我的问题是由于 RubyGem 没有将“rails”添加到 $PATH 环境变量。[通过安装RVM](https://rvm.io/rvm/install/)并使用它来更新我的默认 Ruby 并安装 Rails，我能够让一切正常工作

# ios - 通过更改 CGPoint 设置动画

> ID：11060796
> 
> 赞同：2
> 
> 时间：2012-06-16T04:21:22.657
> 
> 标签：ios, animation, core-animation

在我的 iOS 应用程序中，我根据给定点（`CGPoint`由 `GLKit`我想通过`CGPoint`随着时间的推移改变基础来创建动画，但我不确定我应该使用什么方法来制作动画。

我真正在寻找的是一个 API，它允许我指定在每次迭代时调用的函数，就像这样`NSTimer`做一样，但如果我可以利用轻松进出等优势，那就太酷了。唯一的一块每次迭代需要修改的数据是我的主要`CGPoint`部分，其余的渲染可以从中确定。

我考虑过但放弃的方法：

1.  核心动画：我使用 OpenGL 来绘制，所以核心动画似乎没有帮助。

2.  `NSTimer`：这并没有给我贝塞尔曲线的灵活性，而且看起来很手动。

3.  基于给定帧率的心跳：我只需要在点变化时重新渲染，而且大部分时间它是静止的。感觉心跳不是正确的方法。

有没有像我描述的那样存在？我必须自己写吗？还是我只是误解了为我提供的工具，这表明我应该再看看我是如何绘制图形的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T05:41:35.120

您可以使用`GLKView`和`GLKViewController`进行渲染并更改.`update:`方法中的点`GLKViewController`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T12:29:55.820

我同意另一张海报。假设你可以使用 iOS 5，你应该使用 GLKView 和 GLKViewController。设置为每次屏幕刷新调用一次（在内部使用 CADisplayLink。）如果您不想只使用 iOS 5，则可以自己设置 CADisplayLink。

Core Animation 对 OpenGL 渲染没有用处。但是，您可以使用 Core Animation 的设计来驱动您的设计。核心动画（就像 Cocoa 的其余部分一样）构建在 OpenGL 之上，因此您可以自己完成 CA 所做的一切。它只需要工作。（有时工作量很大。）

Core Animation 使用基于运动的动画模型，而不是基于帧的动画模型。每次渲染场景时，它都会根据动画开始后经过的时间来决定应该应用多少运动。如果它在渲染帧中落后，下一帧会移动得更远，因此随着时间的推移运动是一致的。

至于缓入/缓出时间，你也可以自己做。您需要阅读动画时间。它使用输入时间到输出时间的非线性映射，使用贝塞尔曲线在开始和结束时改变曲线的形状。

# mysql - 如何从 mysql 提示将导出表导出到文件？

> ID：11060798
> 
> 赞同：1
> 
> 时间：2012-06-16T04:21:24.407
> 
> 标签：mysql

主题。进入 table_name.sql 文件。我想知道，MySQL 的官方文档只有关于如何转储整个数据库的信息，否则我是个糟糕的冲浪者。

**更新：**

好的，尝试：

```
mysql> mysqldump db_name tbl_name; 
```

或者

```
mysql> mysqldump root mypass123 db_name tbl_name; 
```

或者

```
mysql> mysqldump -root -mypass123 db_name tbl_name; 
```

总是同样的错误：

> ERROR 1064 (42000)：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“mysql dump personal”附近使用正确的语法

**更新：**

是的，它真的来自 shell（而不是提示）：

> mysql\bin>mysqldump -root -p db_name table_name > table_name.sql
> 
> 输入密码：***** ****
> 
> mysqldump：得到错误：1045：尝试连接时用户'ODBC'@'localhost'的访问被拒绝（使用pas Sword：是）

我有密码，我的用户是 root，为什么现在不好？

**找到了：**

必须是 -uroot 而不是简单的 root 或 -root。

一会儿，现在我需要找到那个文件。微笑。好的。他在当前的 bin 目录中，也许正确的方法是使用完整路径：> C:\tbl_name.sql

谢谢你们！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T04:38:41.373

您可以仅使用导出表

```
mysql\bin> mysqldump -uuser -p db_name table_name, table_name  > table_name.sql 
```

[mysql 转储文档](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html)

```
mysql\bin> mysqldump [options] db_name [tbl_name ...]
mysql\bin> mysqldump [options] --databases db_name [tbl_name] 
```

# powershell - Powershell Windows 2003 通配符不起作用

> ID：11060811
> 
> 赞同：2
> 
> 时间：2012-06-16T04:24:21.717
> 
> 标签：powershell, windows-server-2003, wildcard

我在 Windows 2003 和 Windows 2008 中都运行 Powershell，并且两者都运行 2.0，但在 Windows 2003 中似乎不接受通配符（或者至少不以相同的方式做出反应）。例如：

```
((get-counter -counter '\process(w3*)\id process').CounterSamples) 
```

在 Windows 2008 中运行良好，但在 Windows 2003 中失败。

```
((get-counter -counter '\process(w3wp)\id process').CounterSamples) 
```

在 Windows 2003 中运行良好。

如何在 Windows 2003 中根据通配符进行过滤？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T19:56:54.760

嗨，我遇到了这样的问题，这似乎是由 windows server 2003 和 2008 的工作方式之间的差异引起的，而不是 powershell 本身，所以我所做的是编写一个代码块来检测我正在运行的 windows server 的版本和然后更改我要执行的代码。您可以使用下面的代码或将其放入 switch 语句中。

```
$WindowsVesrion = Get-WmiObject win32_operatingSystem

IF ($WindowsVesrion.Version -gt 6.0)
    {
    ((get-counter -counter '\process(w3*)\id process').CounterSamples)
    }
ELSE {
     ((get-counter -counter '\process(w3wp)\id process').CounterSamples)
     } 
```

# c# - 更改 EditorTemplates 文件夹位置

> ID：11060816
> 
> 赞同：5
> 
> 时间：2012-06-16T04:26:09.053
> 
> 标签：c#, asp.net-mvc-3

关于我阅读的内容，EditorTemplates 文件夹必须位于 Views 文件夹中的 Shared 文件夹下。是否可以更改此位置？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T15:41:47.863

我总是把我的`EditorTemplates`放在它们相关的每个视图文件夹下面。例如：

![编辑器模板](../Images/28e62f7252eba61c031719bf84d2b33b.png)

如果它们在多个视图中“共享”，我会将它们放在“Shared/EditorTemplates”文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T10:01:57.517

> 是否可以更改此位置？

不，这是在 MVC 源代码中硬编码的。对不起。

# python - 我无法访问我班级的属性？

> ID：11060820
> 
> 赞同：1
> 
> 时间：2012-06-16T04:27:18.470
> 
> 标签：python, pyqt, pyqt4

我正在使用 PyQt4 模块创建用户界面。我面临的问题是我无法访问“self.ftp_tableWidget”变量

```
class Ui_MainWindow(object):
def setupUi(self, MainWindow):
    MainWindow.setObjectName(_fromUtf8("MainWindow"))
    MainWindow.resize(790, 610)
    self.FTP = QtGui.QWidget()
    self.FTP.setObjectName(_fromUtf8("FTP"))
    self.ftp_tableWidget = QtGui.QTableWidget(self.FTP)
    self.ftp_tableWidget.setGeometry(QtCore.QRect(40, 90, 411, 192))
    self.ftp_tableWidget.setMinimumSize(QtCore.QSize(331, 0))
    self.ftp_tableWidget.setObjectName(_fromUtf8("ftp_tableWidget"))
    self.ftp_tableWidget.setColumnCount(2)
    self.ftp_tableWidget.setRowCount(31)
    item = QtGui.QTableWidgetItem()
    self.ftp_tableWidget.setHorizontalHeaderItem(0, item)
    item = QtGui.QTableWidgetItem()
    self.ftp_tableWidget.setHorizontalHeaderItem(1, item)
    self.update_table() 
```

这是 ftp_tableWidget 初始化的地方。

```
 def update_table(self):
    cursor.execute('''SELECT MAX(SNO) FROM ftp_auth_table1''')
    entry=cursor.fetchall()
    entry=entry[0]
    count=entry[0]
    self.ftp_tableWidget.setRowCount(count)
    cursor.execute('''SELECT * FROM ftp_auth_table1''')
    entry=cursor.fetchall() 
```

这是更新表格小部件的代码。

```
 def adding(self):
    self.msg=add_to()
    self.msg.show() 
```

这段代码正在调用一个将数据添加到数据库的类。

```
class add_to(QtGui.QDialog,Ui_MainWindow):
def __init__(self):
    super(add_to,self).__init__()
    Ui_MainWindow.__init__(self) 
```

这段代码初始化了将数据附加到数据库的类，并调用 update_table 函数来更新表小部件。

这是我得到的错误

```
 self.ftp_tableWidget.setRowCount(count)
    AttributeError: 'add_to' object has no attribute 'ftp_tableWidget' 
```

规格：我使用 python 2.7 和 PyQt4 模块。

根据“notbad jpeg”给出的答案编辑代码后： class Ui_MainWindow(object): def **init** (self,mainwindow): self.setupUi(mainwindow) def setupUi(self, MainWindow):

这给了我一个问题：

```
class add_to(QtGui.QDialog,Ui_MainWindow):
   def __init__(self):
    super(add_to,self).__init__()
    self.window=QtGui.QMainWindow()
    self.MainWindow=Ui_MainWindow(self.window)
    Ui_MainWindow.__init__(self,self.MainWindow) 
```

这给出了一个错误：

```
MainWindow.setObjectName(_fromUtf8("MainWindow"))
AttributeError: 'Ui_MainWindow' object has no attribute 'setObjectName' 
```

请任何人都可以帮助我。

提前感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T05:42:17.813

该评论说明了您的问题。您需要向`__init__()`您的`Ui_MainWindow`类添加一个调用方法，`self.setupUi()`以便在您`setupUi()`调用时立即调用您的所有内容`super()`。

编辑：现在您稍微更改了代码并且遇到了`__init__()`需要两个参数的错误，我环顾四周，看到您的内联代码表明您需要将`MainWindow`参数传递给您的`Ui_MainWindow.__init__(self, MainWindow)`. 然后，将其传递`MainWindow`给您的`setupUi`方法。

编辑#2：改变

```
class add_to(QtGui.QDialog,Ui_MainWindow):
   def __init__(self):
       super(add_to,self).__init__()
       self.window=QtGui.QMainWindow()
       self.MainWindow=Ui_MainWindow(self.window)
       Ui_MainWindow.__init__(self,self.MainWindow) 
```

到...

```
class add_to(QtGui.QDialog,Ui_MainWindow):
   def __init__(self):
       super(add_to,self).__init__()
       self.window=QtGui.QMainWindow()
       self.MainWindow=Ui_MainWindow(self.window) 
```

调用`Ui_MainWindow.__init__()`是多余的，因为它会在您创建类的实例时自动调用：`self.MainWindow=Ui_MainWindow(self.window)`. 另外，您将自身的实例作为参数传递给自身。

# function - 括号 Powershell 函数

> ID：11060833
> 
> 赞同：8
> 
> 时间：2012-06-16T04:30:01.513
> 
> 标签：function, powershell

如何在powershell中使用带括号的参数调用函数。

我有这个功能的例子

```
function Greet([string]$name , [int]$times)
{
    for ([int]$i = 1; $i -le $times;$i++)
    {
        Write-Host Hiiii $name
    }
} 
```

`Greet Ricardo 5`如果我使用或调用函数 `Greet "Ricardo" 5`。但是当我使用`Greet ("Ricardo",5)`or`Greet("Ricardo" ; 5)`它失败了。

怎么了？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-16T06:24:16.693

函数的行为类似于 cmdlet。也就是说，您不需要键入 dir(c:\temp)。函数同样将参数作为空格分隔，类似于 cmdlet，支持位置参数、命名参数和可选参数，例如：

```
Greet Recardo 5
Greet -times 5 -name Ricardo 
```

PowerShell 使用 () 允许您指定表达式，如下所示：

```
function Greet([string[]]$names, [int]$times=5) {
    foreach ($name in $names) {
        1..$times | Foreach {"Hi $name"}
    }
}

Greet Ricardo (1+4)

Great Ricardo    # Note that $times defaults to 5 
```

您还可以使用逗号分隔的列表指定简单的数组，例如：

```
Greet Ricardo,Lucy,Ethyl (6-1) 
```

因此，当您传入类似的东西时`("Ricardo",5)`，它会被评估为单个参数值，该参数值是一个包含两个元素`"Ricardo"`和`5`. 这将被传递给`$name`参数，但随后参数将没有值`$times`。

唯一一次使用带括号的参数列表是在调用 .NET 方法时，例如：

```
"Hello World".Substring(6, 3) 
```

# ruby-on-rails - Rails 新动作尝试秀

> ID：11060847
> 
> 赞同：0
> 
> 时间：2012-06-16T04:32:48.097
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routes

我正在启动一个新的 Rails 3.2.6 应用程序。当我尝试查看新的嵌套表单时，我的嵌套路由失败。我将首先显示错误，然后显示所有涉及的代码。

尝试访问的 URL：`http://localhost:3000/reports/1/expenses/new`

```
No route matches {:action=>"show", :controller=>"expenses", :report_id=>#<Report id: 1, name: "Test Report", created_at: "2012-06-07 21:58:37", updated_at: "2012-06-07 21:58:37">} 
```

**路线.rb**

```
resources :reports do
  resources :expenses
end 
```

**费用_控制器.rb**

```
def new
  @report = Report.find(params[:report_id])
  @expense = @report.expenses.new
end 
```

**意见/费用/new.html.haml**

```
%h1 New Expense
= render 'form' 
```

**意见/费用/_form.html.haml**

```
= form_for [@report, @expense] do |f| 
```

这是我试图点击的链接：

```
= link_to 'New Expense', new_report_expense_path(@report) 
```

当我明确调用新操作时，我无法弄清楚为什么它试图访问 show 操作。

**耙子路线**

```
report_expenses     GET    /reports/:report_id/expenses(.:format)          expenses#index
                    POST   /reports/:report_id/expenses(.:format)          expenses#create
new_report_expense  GET    /reports/:report_id/expenses/new(.:format)      expenses#new
edit_report_expense GET    /reports/:report_id/expenses/:id/edit(.:format) expenses#edit
report_expense      GET    /reports/:report_id/expenses/:id(.:format)      expenses#show
                    PUT    /reports/:report_id/expenses/:id(.:format)      expenses#update
                    DELETE /reports/:report_id/expenses/:id(.:format)      expenses#destroy
        reports     GET    /reports(.:format)                              reports#index
                    POST   /reports(.:format)                              reports#create
     new_report     GET    /reports/new(.:format)                          reports#new
    edit_report     GET    /reports/:id/edit(.:format)                     reports#edit
         report     GET    /reports/:id(.:format)                          reports#show
                    PUT    /reports/:id(.:format)                          reports#update
                    DELETE /reports/:id(.:format)                          reports#destroy
           root            /                                               reports#index 
```

**更新** GitHub 存储库链接：[https ://github.com/ardavis/expense_report](https://github.com/ardavis/expense_report)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T08:41:02.440

错误在views/expences/_form.html.haml，最后一行

```
 = link_to 'Cancel', report_expense_path(@report), class: 'btn' 
```

你可能是说

```
 = link_to 'Cancel', report_path(@report), class: 'btn' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T05:34:02.917

您是否尝试过路线：

```
map.resources :reports do |report|
    report.resources :expenses
end 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-16T04:54:15.590

您需要在链接中添加 @report.id 而不是 @report

```
link_to 'New Expense', new_report_expense_path(@report.id) 
```

# java - LWJGL 的 Matrix4f.mul 方法是先乘还是后乘？

> ID：11060849
> 
> 赞同：4
> 
> 时间：2012-06-16T04:33:01.060
> 
> 标签：java, matrix, lwjgl, matrix-multiplication

只是想知道 LWJGL 的 Matrix4f.mul 方法是先乘还是后乘。或者，如果有办法选择。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T01:47:13.613

根据 javadoc，`Matrix4f.mul`将：

> 将右矩阵乘以左并将结果放在第三个矩阵中。

```
public static Matrix4f mul(Matrix4f left, Matrix4f right, Matrix4f dest) 
```

因此，要实现后乘，请将现有矩阵用作`left`参数，并将新矩阵用作`right`参数。如果您为 提供一个空对象`dest`，该函数将为您分配一个新对象`Matrix4f`，并从函数调用中返回它。

我通常认为矩阵乘法的方式是首先应用与向量“最近”的矩阵。例如：

```
Perspective  *  View  *  Model  *  Vec4 
```

从最接近向量的矩阵开始，您可以看到首先应用模型变换，然后是视图变换，最后是透视变换。

在您的代码中，上面的内容如下所示：

```
Matrix4f MVP = Matrix4f.mul(View, Model, null);
Matrix4f.mul(Perspective, MVP, MVP);

Vector4f result = Matrix4f.transform(MVP, Vec4, null); 
```

希望这可以帮助！

**编辑：**以上是我倾向于连接我的变换的方式，但由于矩阵乘法是关联的，以下也应该有效：

```
Matrix4f MVP = Matrix4f.mul(Perspective, View, null);
Matrix4f.mul(MVP, Model, MVP);

Vector4f result = Matrix4f.transform(MVP, Vec4, null); 
```

# ruby-on-rails - rake db:migrate 失败（活动记录）

> ID：11060852
> 
> 赞同：1
> 
> 时间：2012-06-16T04:33:14.803
> 
> 标签：ruby-on-rails, rake, migrate

我试图`rake db:migrate`在我的终端中执行命令，但它给出了错误。几分钟前它还在工作。这是我得到的错误：

```
rake aborted!
no such file to load -- activerecord 
```

错误的完整跟踪：

```
/Users/amritayalur/.rvm/gems/ruby-1.9.2-p318/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:251:inrequire' 
/Users/amritayalur/.rvm/gems/ruby-1.9.2-p318/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:251:in block in require' 
/Users/amritayalur/.rvm/gems/ruby-1.9.2-p318/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:236:inload_dependency' 
/Users/amritayalur/.rvm/gems/ruby-1.9.2-p318/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:251:in require' 
/Users/amritayalur/.rvm/gems/ruby-1.9.2-p318/gems/has_one_autocreate-1.0.0/lib/has_one_autocreate.rb:2:in' 
/Users/amritayalur/.rvm/gems/ruby-1.9.2-p318@global/gems/bundler-1.1.4/lib/bundler/runtime.rb:68:in require' 
/Users/amritayalur/.rvm/gems/ruby-1.9.2-p318@global/gems/bundler-1.1.4/lib/bundler/runtime.rb:68:inblock (2 levels) in require' 
/Users/amritayalur/.rvm/gems/ruby-1.9.2-p318@global/gems/bundler-1.1.4/lib/bundler/runtime.rb:66:in each' 
/Users/amritayalur/.rvm/gems/ruby-1.9.2-p318@global/gems/bundler-1.1.4/lib/bundler/runtime.rb:66:inblock in require' 
/Users/amritayalur/.rvm/gems/ruby-1.9.2-p318@global/gems/bundler-1.1.4/lib/bundler/runtime.rb:55:in each' 
/Users/amritayalur/.rvm/gems/ruby-1.9.2-p318@global/gems/bundler-1.1.4/lib/bundler/runtime.rb:55:inrequire' 
/Users/amritayalur/.rvm/gems/ruby-1.9.2-p318@global/gems/bundler-1.1.4/lib/bundler.rb:119:in require' 
/Users/amritayalur/rails_projects/mobilecapdb/config/application.rb:7:in' 
/Users/amritayalur/.rvm/rubies/ruby-1.9.2-p318/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in require' 
/Users/amritayalur/.rvm/rubies/ruby-1.9.2-p318/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:inrequire' 
/Users/amritayalur/rails_projects/mobilecapdb/Rakefile:5:in <top (required)>' 
/Users/amritayalur/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/rake_module.rb:25:inload' 
/Users/amritayalur/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/rake_module.rb:25:in load_rakefile' 
/Users/amritayalur/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/application.rb:501:inraw_load_rakefile' 
/Users/amritayalur/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/application.rb:82:in block in load_rakefile' 
/Users/amritayalur/.rvm/gems/ruby1.9.2p318/gems/rake0.9.2.2/lib/rake/application.rb:133:instandard_exception_handling' 
/Users/amritayalur/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/application.rb:81:in load_rakefile' 
/Users/amritayalur/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/application.rb:65:inblock in run' 
/Users/amritayalur/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/application.rb:133:in standard_exception_handling' 
/Users/amritayalur/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/lib/rake/application.rb:63:inrun' 
/Users/amritayalur/.rvm/gems/ruby-1.9.2-p318/gems/rake-0.9.2.2/bin/rake:33:in <top (required)>' 
/Users/amritayalur/.rvm/gems/ruby-1.9.2-p318/bin/rake:23:inload' /Users/amritayalur/.rvm/gems/ruby-1.9.2-p318/bin/rake:23:in <main>' 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T20:46:05.203

您可能没有正确安装指定的 Gem。尝试这个：

```
bundle install
rake db:migrate 
```

# stanford-nlp - 如何保留 MaxEntTagger 中不可标记的字符？

> ID：11060854
> 
> 赞同：1
> 
> 时间：2012-06-16T04:34:02.870
> 
> 标签：stanford-nlp

我正在使用 MaxEntTagger 通过使用以下代码进行 pos-tagging 和句子拆分：

```
MaxentTagger tagger = new MaxentTagger("models/left3words-wsj-0-18.tagger");

@SuppressWarnings("unchecked")
List<Sentence<? extends HasWord>> sentences = MaxentTagger.tokenizeText(new BufferedReader(new StringReader(out2)));

for (Sentence<? extends HasWord> sentence : sentences) {
    content.append(sentence + "\n");
    Sentence<TaggedWord> tSentence = MaxentTagger.tagSentence(sentence);
    out.append(tSentence.toString(false) + "\n");
} 
```

问题是它会抱怨文本中有不可标记的字符。并且标记的输出将省略那些不可标记的字符。所以比如原文是：设Σ为函数符号的有限集合，即签名。

其中 Σ 在 big5 代码中。但是程序会显示以下警告信息： Untokenizable: Σ (first char in decimal: 931)

并且标记的输出是：设/VB 是/VB a/DT 有限/JJ 集/NN of/IN 函数/NN 符号/NNS ,/,/DT 签名/NN ./。

我得到的拆分后的句子是： Let be afinite set of function symbols ， the signature 。

我的问题是如何保留这些不可标记的字符？

我试过修改模式的道具文件，但没有运气：

```
  标注器训练在 2008 年 9 月 21 日星期日 23:03:26 PDT 2008 调用，参数如下：
                    模型 = left3words-wsj-0-18.tagger
                     拱 = left3words,naacl2003unknowns,wordshapes(3)
                trainFile = /u/nlp/data/pos-tagger/train-wsj-0-18 ...
                 编码 = Big5
            initFromTrees = 假

```

有什么建议吗？

感谢Manning教授的帮助。但是我在使用解析器树时遇到了同样的问题。

## 续集

我需要得到一个句子的解析器树，所以我使用了以下代码：

```
PTBTokenizer<Word> ptb = PTBTokenizer.newPTBTokenizer(new StringReader(sentences));            
List<Word> words = ptb.tokenize(); 
Tree parseTree2 = lp.apply(words); 
TreebankLanguagePack tlp = new PennTreebankLanguagePack(); 
GrammaticalStructureFactory gsf = tlp.grammaticalStructureFactory(); 
GrammaticalStructure gs = gsf.newGrammaticalStructure(parseTree2); 
```

但是这次我不知道如何设置 PTBTokenizer 来解决不可标记字符的问题。如果使用工厂方法生成 PTBTokenizer 对象，我不知道如何将其连接到 StringReader。

```
List<Word> words = ptb.getTokenizer(new StringReader(sentences)); 
```

不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T16:05:22.753

斯坦福分词器接受多种选项来控制分词，包括如何处理它不知道的字符。但是，要设置它们，您当前必须实​​例化您自己的标记器。但这并不比你上面的难多少。以下完整程序使用选项制作标记器，然后使用它进行标记。

“noneKeep”选项意味着它不记录有关未知字符的消息，但保留它们并将每个消息转换为单个字符标记。您可以在 PTBTokenizer 类 javadoc 中了解其他选项。

**注意：**您似乎使用的是相当旧版本的标记器。（大约 2 年前，我们摆脱了 Sentence 类并开始使用 List 的标记，可能与这些选项被添加到标记器的时间差不多。）所以您可能必须升级到最新版本。无论如何，下面的代码只能针对更新版本的标记器正确编译。

```
import java.io.*;
import java.util.*;

import edu.stanford.nlp.ling.*;
import edu.stanford.nlp.process.*;
import edu.stanford.nlp.objectbank.TokenizerFactory;
import edu.stanford.nlp.tagger.maxent.MaxentTagger;

/** This demo shows user-provided sentences (i.e., {@code List<HasWord>}) 
 *  being tagged by the tagger. The sentences are generated by direct use
 *  of the DocumentPreprocessor class. 
 */
class TaggerDemo2 {

  public static void main(String[] args) throws Exception {
    if (args.length != 2) {
      System.err.println("usage: java TaggerDemo modelFile fileToTag");
      return;
    }
    MaxentTagger tagger = new MaxentTagger(args[0]);
    TokenizerFactory<CoreLabel> ptbTokenizerFactory = 
    PTBTokenizer.factory(new CoreLabelTokenFactory(), "untokenizable=noneKeep");
    BufferedReader r = 
        new BufferedReader(new InputStreamReader(new FileInputStream(args[1]), "utf-8"));
    PrintWriter pw = new PrintWriter(new OutputStreamWriter(System.out, "utf-8"));
    DocumentPreprocessor documentPreprocessor = new DocumentPreprocessor(r);
    documentPreprocessor.setTokenizerFactory(ptbTokenizerFactory);
    for (List<HasWord> sentence : documentPreprocessor) {
      List<TaggedWord> tSentence = tagger.tagSentence(sentence);
      pw.println(Sentence.listToString(tSentence, false));
    }
  }

} 
```

# java - OpenJDK开发JavaEE？

> ID：11060856
> 
> 赞同：19
> 
> 时间：2012-06-16T04:34:54.267
> 
> 标签：java, jakarta-ee, openjdk

我正在开发一个 JavaEE 应用程序并将其部署在 Glassfish 3 中。我正在使用 Ubuntu 12.04、面向 EE 开发人员的 Eclipse 和 OpenJDK 6 JDK（包 openjdk-6-jdk）。到目前为止没有问题。

问题是，在我寻找有关使用 OpenJDK 进行 Java EE 开发的信息的任何地方，我都发现 OpenJDK 只是 Java SE，例如[此处](http://openjdk.java.net/faq/)或[此处](http://en.wikipedia.org/wiki/OpenJDK)。尽管如此，在我的应用程序中，我使用`javax.*`了很多，并且正在工作。

我已经下载了 OpenJDK 6 的源代码，并且找到`/jdk/src/share/classes/javax/`了包含很多类的文件夹，但是缺少一些重要的东西，例如`javax.servlet`,`javax.ejb`或`javax.faces`.

同样，除了 OpenJDK、GCJ 或 Oracle 之外，我没有任何其他 JDK。

我的问题是：这怎么可能？OpenJDK 是否支持 JavaEE API？它可以用于此，还是我需要下载并安装 Oracle JDK？我不明白这里的东西？

请注意，Oracle 列出了用于 SE 的 SDK 和用于 EE 的 SDK，所以我想它们是不同的，对吧？

亲切的问候

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-16T04:36:37.700

您的 Glassfish 服务器是具体的 Java EE 实现。请注意，OpenJDK 是一个具体的 Java SE 实现。另请注意，每当您从 Oracle 站点[下载](http://www.oracle.com/technetwork/java/javaee/downloads/index.html)Java EE 时，基本上您所获得的只是 Glassfish 以及一堆文档和示例。

### 也可以看看：

*   [Java EE 到底是什么？](https://stackoverflow.com/questions/7295096/what-exactly-is-java-ee/7295697#7295697)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-01-21T03:31:41.137

事实上，J2EE 没有指定 JVM，Glassfish4 和 5 都检查 Oracle JVM，并且不与任何其他 JVM 一起运行。

请注意，OpenJDK 根本不适用于 Glassfish。Glassfish 正在专门寻找 OracleJDK。

如果您尝试使用 OpenJDK 12.0 在 MacOS 上启动 glassfish，会发生这种情况：

```
bin/asadmin start-domain
Exception in thread "main" java.lang.NullPointerException
    at com.sun.enterprise.module.common_impl.AbstractModulesRegistryImpl.initializeServiceLocator(AbstractModulesRegistryImpl.java:152)
    at com.sun.enterprise.module.common_impl.AbstractModulesRegistryImpl.newServiceLocator(AbstractModulesRegistryImpl.java:144)
    at com.sun.enterprise.module.common_impl.AbstractModulesRegistryImpl.createServiceLocator(AbstractModulesRegistryImpl.java:218)
    at com.sun.enterprise.module.common_impl.AbstractModulesRegistryImpl.createServiceLocator(AbstractModulesRegistryImpl.java:224)
    at com.sun.enterprise.module.single.StaticModulesRegistry.createServiceLocator(StaticModulesRegistry.java:88)
    at com.sun.enterprise.admin.cli.CLIContainer.getServiceLocator(CLIContainer.java:217)
    at com.sun.enterprise.admin.cli.CLIContainer.getLocalCommand(CLIContainer.java:255)
    at com.sun.enterprise.admin.cli.CLICommand.getCommand(CLICommand.java:231)
    at com.sun.enterprise.admin.cli.AdminMain.executeCommand(AdminMain.java:371)
    at com.sun.enterprise.admin.cli.AdminMain.doMain(AdminMain.java:306)
    at org.glassfish.admin.cli.AsadminMain.main(AsadminMain.java:57) 
```

# java - 您可以将包含不可打印字符的字节数组转换为字符串吗？

> ID：11060860
> 
> 赞同：2
> 
> 时间：2012-06-16T04:36:05.613
> 
> 标签：java

如果字节数组包含非ASCII字符，是否会创建字符串？

```
String s  = new String(byte[] b) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-14T18:17:24.523

将单个字节解释为 ascii 字符，很容易拒绝低于 32 和高于 126 的值。

```
public static boolean isPrintableAscii(byte value)
{
    return (value > 32 ) && (value < 127);
}

public static String readableText(byte[] buffer, int offset, int bufferSize)
{
    StringBuilder builder = new StringBuilder();
    for( int index = 0; index < bufferSize; ++index)
    {
        byte current = buffer[offset+index];
        if( isPrintableAscii(current))
        {
            builder.append((char)current);
        }
        else
        {
            builder.append('.');
        }
    }

    return builder.toString();
} 
```

当遇到不可打印的字节时，我只打印一个'。' 被十六进制转储实用程序使用了很长时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T04:38:23.210

您可以使用`new String (byte[] data, String charsetName)`传递第二个参数作为`US-ASCII`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-16T04:44:36.610

No, it will not fail. However, there ways to detect non-ascii characters in a string and remove them. But Strings with non-ascii characters are perfectly fine.

# c - 如何使用 linux 内核一次进行多个系统调用？

> ID：11060863
> 
> 赞同：0
> 
> 时间：2012-06-16T04:36:39.843
> 
> 标签：c, linux, linux-kernel, kernel

我想知道我是否可以同时进行大量系统调用，而只有一个开关开销。我需要这个，因为我需要同时进行许多（128）系统调用。如果我可以在不切换内核和用户空间 256 次以上的情况下做到这一点，我认为它可以使我的（速度敏感的）库显着更快。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-16T04:43:20.993

你真的不能从应用程序中做到这一点。您*可以*做的是构建一个可加载的内核模块来实现这些操作并提供一个简单的 API——然后您可以更改一次上下文，完成所有工作，然后返回。

然而，与大多数这类优化问题一样，首先要问的是“你为什么认为它是必要的？” 你有时间信息等吗？你有简介吗？你真的有多少性能问题，额外的复杂性是否值得加速？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T04:59:18.640

我认为 Linux 不会很快支持系统调用链接。您可能会更幸运地在另一个内核上实现它并移植您的应用程序。

也就是说，编写一个代理来为您在内核空间中完成这项工作并不难，但不要指望它会在上游合并。我从事实时工作，我们有这样的解决方案，但由于支持问题从未在生产中使用过：/。

# objective-c - 在 Objective-C 中调用指定的初始化器后如何执行额外的初始化？（自我 = [自我...）

> ID：11060865
> 
> 赞同：2
> 
> 时间：2012-06-16T04:37:20.057
> 
> 标签：objective-c, ios, macos, initialization

假设我有一个指定的初始化器，它可以像这样进行一些初始化：

```
- (id)initWithBlah:(NSString *)arg1 otherBlah:(NSArray *)arg2
{ 
    if (self = [super init])
    {
        ...
    }
    return self;
} 
```

我有另一个初始化程序需要调用它，然后执行一些其他设置任务：

```
- (id)initWithSomeOtherBlah:(void *)creativeArg
{
    // Is this right? It seems to compile and run as expected, but feels wrong
    self = [self initWithBlah:nil otherBlah:nil];
    if (self)
    {
        [self someProcessingForThisInitDependentOnSelfInit:creativeArg];
    }

    return self;
} 
```

既然测试是为了确保返回值是正确的，那么在这种情况下应该使用'self'吗？我想知道这是否甚至是事件的有效组合。我们有一个初始化程序需要在指定初始化程序运行后执行一些额外设置的情况。

我想知道正确的方法是否是将这个额外的处理推到指定的初始化程序中。

如果需要更多说明，请告诉我。我试图保持简单。:)

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T04:50:27.147

A general rule of thumb that I follow is that the designated initializer is the initializer with the most parameters and the other initializers chain down to the designated initializer.

In your example you are not using creativeArg in your initWithSomeOtherBlah constructor. I am not sure if that was intentional or not.

With this approach you are being explicit with your intentions when creating an object instead of side effect programming.

For example:

```
@implementation BlaClass

- (id)initWithBlah:(NSString *)arg1 otherBlah:(NSArray *)arg2 creativeArg:(void *)arg3
{
    if (self = [super init])
    {
        self.arg1 = arg1;
        self.arg2 = arg2;
        self.arg3 = arg3;
        [self someProcessingForThisInitDependentOnSelfInit:arg3];
    }
    return self;
}

- (void)someProcessingForThisInitDependentOnSelfInit:(void *)creativeArg
{
    if(creativeArg == NULL) return; 

    //do creative stuff 
}

- (id)initWithSomeOtherBlah:(void *)arg
{
    return [self initWithBlah:nil otherBlah:nil creativeArg:arg];
}

 ...
 @end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T05:15:47.793

如果您的类中需要两个初始化器，它们对类的初始化有所不同，一个好的编码实践是识别两个初始化器需要执行它们的设置任务，并将它们移动到单独的方法中。这样，您无需在另一个内部调用一个自定义初始化程序。以下是您需要执行的操作：

```
-(void) setupBlah
{.....}

- (id)initWithBlah:(NSString *)arg1 otherBlah:(NSArray *)arg2
{ 
    if (self =[super init])
      {
        [self setupBlah];
        //Do other initialization
            ....
       }
   return self;
}

- (id)initWithSomeOtherBlah:(void *)creativeArg
{

    if (self = [super init])
    {
        [self setupBlah];
        //Do other initialization
          .....
    }

    return self;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T08:05:55.763

从非指定初始化程序调用另一个初始化程序没有任何问题，请参阅[此处](http://developer.apple.com/library/ios/#documentation/general/conceptual/DevPedia-CocoaCore/MultipleInitializers.html)的 Apple 文档。

如果我有两个或多个指定的初始化程序（例如带有`initWithFrame:`and的视图`initWithCoder:`），我发现自己定义了一个`setUp`从两个初始化程序调用的方法，这只是您的`someProcessingForThisInitDependentOnSelfInit`方法的较短名称。

# css - 根据高度（垂直长度）调整尺寸

> ID：11060866
> 
> 赞同：0
> 
> 时间：2012-06-16T04:37:49.703
> 
> 标签：css

我正在做一个需要显示文本字段的全部内容并动态调整文本大小以使其不会溢出的 div。

要了解这个问题，请看这里[http://sandbox.littlegraffyx.com/bible/](http://sandbox.littlegraffyx.com/bible/)

`GEN 1:1`您可以尝试使用“创世纪 1:1”的格式在左下方的文本框中输入经文

我的问题是当我尝试显示长诗句时，它们会被截断。我需要根据当前文本的长度来更改大小。是否有一些可以根据文本字段大小应用的 css？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T07:09:32.997

正如评论中提到的，使用纯 CSS 无法根据包含元素的高度来缩放文本。但这是我过去在需要实现您想要的目标时使用的一个小型 jQuery 脚本。当用户调整浏览器窗口大小时，它还会调整文本大小。

HTML：

```
<p class="quote">
Really long text goes here...
</p>​ 
```

CSS：

```
.quote {
    // The largest size to display text at.
    font-size: 36px;
}​ 
```

JS：

```
$(window).bind('resize',function(e){
    scaleQuote();
});

function scaleQuote(){    
    var quote = $('.quote');
    var winH = $(window).height();

    // Reset font size.
    quote.css('font-size', '');

    // If quote is larger than viewport, reduce font-size until it fits.
    while (winH < (quote.height())){
        var fontSize = parseInt(quote.css('font-size'), 10);
        quote.css('font-size', fontSize-1+'px');
    }
}

scaleQuote();​ 
```

演示：http: [//jsfiddle.net/eCBmc/2/](http://jsfiddle.net/eCBmc/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T07:14:11.983

你可以尝试这样的事情。它将输入字段设置为 10 个字符，如果它更大，它会增加它的大小。 [http://jsfiddle.net/4qjjf/1/](http://jsfiddle.net/4qjjf/1/)

```
<html>
<body>
<textarea cols="10" rows="1" id="shit"
onkeyup="this.cols=this.value.length>10?this.value.length:10;"></textarea>
</body>
</html>​ 
```

# javascript - javascript 'deviceorientation' 事件 - 它测量什么传感器？

> ID：11060869
> 
> 赞同：11
> 
> 时间：2012-06-16T04:38:53.130
> 
> 标签：javascript, android, accelerometer, sensors, gyroscope

如果我有一个如下所示的简单网页和脚本：

```
<body>
    <div id="alpha">a</div>
    <div id="beta">b</div>
    <div id="gamma">g</div>
</body>

<script>
window.addEventListener('deviceorientation', function(event) {
    var alpha = event.alpha;
    var beta = event.beta;
    var gamma = event.gamma;

    document.getElementById("alpha").innerHTML = alpha;
    document.getElementById("beta").innerHTML = beta;
    document.getElementById("gamma").innerHTML = gamma;

}, false);
</script> 
```

我可以在移动 Firefox for Android 中打开它，它会输出 3 个如下所示的数字：

```
89.256125
3.109375
0.28125 
```

当我旋转设备时，数字会根据旋转轴而变化。我注意到“alpha”的值非常嘈杂——即使手机放在我的桌子上，它们也会不停地反弹，而其他两个保持稳定。我知道阿尔法是我的方向。那我很好奇，它是从指南针（有噪音问题）获得“阿尔法”值，而从陀螺仪获得另外两个？

另一个问题是当我改变音高时，由于某种原因，航向也会改变，即使我实际上并没有改变航向。我只是好奇为什么会这样以及如何纠正它？

此外，由于陀螺仪测量角速度，我认为这个事件监听器正在自动集成它 - 集成算法是否和任何算法一样好？它是否使用加速度计来校正漂移？

在这个谷歌技术谈话视频中，从 15:00 到 19:00，演讲者谈到了使用加速器校正陀螺仪固有的漂移，以及校准相对于重力的方向：[http ://www.youtube .com/watch?v=C7JQ7Rpwn2k](http://www.youtube.com/watch?v=C7JQ7Rpwn2k) 我该怎么做呢？

感谢任何人可能有的任何见解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T19:20:42.117

所有的方向值对我来说也很嘈杂。颤抖的手、欧拉角、磁干扰、制造错误……谁知道呢？

我做了一个[小的指数平滑](http://en.wikipedia.org/wiki/Exponential_smoothing "平滑")。也就是说，我用一个平滑的值替换了波动的*event.alpha*，它被方便地称为*alpha*：

`alpha = event.alpha + *s**(alpha - event.alpha), with 0 <= *s* <= 1;`

换句话说，每次接收到新的观测值时，都会使用与误差成比例的校正来更新平滑值。

*   如果*s* =0，则平滑后的值恰好是观测值，没有平滑。
*   如果*s* =1，则 alpha 保持不变，这确实是一种过于有效的平滑。
*   否则 alpha 介于观察值和平滑值之间。事实上，它是最后一次观察和历史之间的（加权）平均值。因此，它遵循具有一定阻尼效应的值变化。
*   如果*s*很小，则该过程接近最后一次观察并快速适应最近的变化（以及随机波动）。阻尼很小。
*   如果*s*接近 1，则过程更*粘稠*。它对随机波动（以及集中趋势的变化）反应迟钝。阻尼很大。
*   不要在 0..1 范围之外尝试*s*，因为这会导致负反馈循环，并且 alpha 很快就会随着越来越大的波动而开始发散。

*   我使用*s =0.25，在测试**s*在 0.1 和 0.3 之间没有显着差异之后。

**重要提示：**使用此方法时，不要忘记在 addEventListener 函数之外初始化 alpha：

`var alpha = guestimate (= here 0);`

请注意，这种简单的自适应平滑在许多其他情况下也有效，而且编程非常简单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T07:23:42.003

通过传感器融合获得设备方向。严格来说，没有一个传感器测量它。方向是以智能方式合并加速度计、陀螺仪和磁力计数据的结果。

> 我注意到“alpha”的值非常嘈杂——即使手机放在我的桌子上，它们也会不停地反弹，而其他两个保持稳定。

这是[欧拉角的一个常见问题，](https://stackoverflow.com/a/5578867/341970)如果可以的话，尽量避免它们。

顺便说一句，您链接到*的 Android 设备上的传感器融合：运动处理革命*视频在 38:25 进行了解释。

> 此外，由于陀螺仪测量角速度，我认为这个事件监听器正在自动集成它 - 集成算法是否和任何算法一样好？它是否使用加速度计来校正漂移？

是的，陀螺仪漂移在加速度计（和磁力计，如果有的话）读数的帮助下得到纠正。这称为传感器融合。

> 在这个谷歌技术谈话视频中，从 15:00 到 19:00，演讲者谈到了使用加速器校正陀螺仪固有的漂移，以及校准相对于重力的方向：[http ://www.youtube .com/watch?v=C7JQ7Rpwn2k](http://www.youtube.com/watch?v=C7JQ7Rpwn2k)我该怎么做呢？

如果你有方向，那么有人已经为你做了这一切。你不必做任何事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-12T23:40:54.593

使用方向余弦矩阵或卡尔曼滤波器。您可以使用加速度计或陀螺仪或两者的组合来绘制它。可以通过一些机器学习来计算漂移。我认为运动融合是德州仪器校准包的一部分。我可能是错的。但它并不难检查。乘以 3 个旋转矩阵，大一点。[http://www.itu.dk/stud/speciale/segmentering/Matlab6p5/help/toolbox/aeroblks/euleranglestodirectioncosinematrix.html](http://www.itu.dk/stud/speciale/segmentering/Matlab6p5/help/toolbox/aeroblks/euleranglestodirectioncosinematrix.html)

# ios - 初学IOS开发——如何摆脱我不小心添加的控制器

> ID：11060873
> 
> 赞同：0
> 
> 时间：2012-06-16T04:40:03.130
> 
> 标签：ios, xcode, storyboard

我不确定我点击了什么，但我正在为我正在学习的第一个应用程序制作一个主屏幕，我添加了一个名为“根视图控制器”的东西我该如何摆脱它？我不是故意要加的。

另外，这里的控制器是否有点像单击按钮后处理的代码？我还没有进入教程的那部分:)

谢谢！![在此处输入图像描述](../Images/5bc0c9f7961abecf49be8714d64e3566.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T04:55:23.833

如果您使用的是 Xcode 4，您可以通过在左侧的检查器区域中选择它们来轻松删除控件。只需单击要删除的项目并按退格键。
编辑：现在看到图像。只需单击要删除的内容并回击空格即可。就如此容易。
点击（实际触摸）后处理的代码通过 IBActions 链接。你应该查一下，因为它们是应用程序非常重要的一部分。假设它们是“事件处理程序”。祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T04:56:14.107

单击该“根视图控制器”以选择它，然后按键盘上的“*删除*”键。那应该删除它。

当您按下按钮时，视图控制器通常会接收操作（即@Fiire 提到的 IBActions...+1 给他！）。如果您没有设置任何指向意外创建的根视图控制器的操作，则删除视图控制器应该是完全安全的。如果您确实设置了操作，您可以使用对象检查器找到它们，然后“X”（取消）从按钮或控件到视图控制器的任何连接操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T05:00:15.297

这里有两点，只是为了补充其他答案。首先是 Xcode 有很多级别的 undo，所以通常 control-z 可以把你带回来。但是 Xcode 确实崩溃了，然后你就无法撤消了。出于这个原因，我（像许多其他开发人员一样）痴迷于使用 Git，因为他们努力能够从像你这样的情况中恢复过来。像这样的测试项目是让你的 git 启动的完美场所……或者 Mercurial 或任何你喜欢的解决方案。

# c++ - ofstream的使用

> ID：11060874
> 
> 赞同：1
> 
> 时间：2012-06-16T04:40:26.690
> 
> 标签：c++, ofstream

我对ofstream有点困惑。ofstream 继承自 ostream。它还从 ostream 继承了方法“operator<<”。

```
 ofstream x;
    x << "hello world" << endl;
     //cout << "hello world" << endl;

    system("pause");
    return 0; 
```

上面的代码片段试图使用 ofsream 的对象将“hello world”输出到终端，就像 cout 一样。

上面的代码片段可以编译但什么也不显示。为什么会这样？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T04:47:11.453

`ofstream`是文件对象的抽象。为了能够创建文件，您需要传入文件名。如果您不`ofstream`创建默认对象（这就是它编译的原因）。这样的对象本身并没有多大用处。尝试：

```
ofstream x( "out.txt" );
x << "hello world" << endl;

... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T04:50:14.453

已经很长时间了，但是流的 IIRC 是一个 output_file-stream ，它将数据流式传输到打开的文件中。要使 ofstream 对象实际打印到终端，您必须将其打开“/dev/console”或类似的东西。一个普通的 ofstream 实例可能不会打开 /dev/console b/c 你已经有 cout 可用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-16T05:15:05.793

[http://en.wikipedia.org/wiki/Input/output_%28C%2B%2B%29](http://en.wikipedia.org/wiki/Input/output_%28C%2B%2B%29)

```
<iostream> contains the definition of basic_iostream class template, 
which implements formatted input and output
<fstream> contains the definitions of basic_ifstream, basic_ofstream and 
basic_fstream class templates which implement formatted input, output and input/output
on file streams. 
```

# c# - 网格中的工具提示，用于显示数据库中的日期时间

> ID：11060875
> 
> 赞同：0
> 
> 时间：2012-06-16T04:40:30.963
> 
> 标签：c#, asp.net, tooltip

我正在使用用户选择类别和子类别的选择页面。然后根据该选择，用户在网格中显示一些文档，一行中的一个文档。

根据该选择有五个文档，它显示五个网格行。

如何显示这些文档的工具提示。我想显示该文件是在什么时候附上的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T21:16:25.720

您可以使用`ToolTip`属性显示工具提示：

```
<asp:TemplateField HeaderText="Title"> 
    <itemtemplate>
    <asp:Label ID="Label2" runat="server" ToolTip='<%#Eval("your-datetime")%>' Text='<%#Eval("title")%>' Visible="false">
    <asp:LinkButton ID="link1" runat="server" ToolTip='<%#Eval("your-datetime")%>' CommandName="link" ForeColor="Blue">      
    <%#Eval("title")%> 
    </itemtemplate> 
    <itemstyle forecolor="Blue" font-size="Medium" />
</asp:TemplateField> 
```

# python - 从 Python 中的字符串中删除 Wiki 标记

> ID：11060877
> 
> 赞同：1
> 
> 时间：2012-06-16T04:40:51.087
> 
> 标签：python

我有一个包含从 Wikia 页面下载的信息的字符串。

为了解析其内容，我将如何从页面中删除所有 Wiki 格式，只留下原始文本？

以下是可能出现的示例：

```
#REDIRECT[[Blah]]

{{
I have some stuff in here
}}
[[I also have some stuff in here|and here]]
[[http://blehthisisfake.com Link to a fake website]]

&lt;span class="plainlinks"&gt;This is quite useless. Why was [[this page]] even created?&lt;/span&gt;

&lt;nowiki&gt;There are more HTML tags, they should probably all be stripped...&lt;/nowiki&gt;

There is random text in here. bleh bleh bleh

I'm not sure what single [brackets] do, but they should be stripped too... 
```

预期输出：

```
这里有随机文本。呜呜呜

我不确定单身做什么，但他们也应该被剥夺......

```

有没有可以做到这一点的模块？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T04:44:47.513

A Google search for "python wiki parser" turns up [this code](http://wiki.sheep.art.pl/Wiki%20Markup%20Parser%20in%20Python), which strips and replaces the tags (see the source code in the link for details).

# wix - 如何在 WiX 中运行带有参数的可执行文件？

> ID：11060881
> 
> 赞同：4
> 
> 时间：2012-06-16T04:41:17.573
> 
> 标签：wix, wix3.5

我想在 WiX 中运行带有命令行参数的可执行文件。如何传递参数？

我要补充一点，我需要运行一个控制台 EXE 文件，该文件包含在要安装的[MSI文件中。](http://en.wikipedia.org/wiki/Windows_Installer)

我尝试在示例中的某处添加参数，第 3 步在*[How To: Run the Installed Application After Setup](http://wix.sourceforge.net/manual-wix3/run_program_after_install.htm)*，但我还没有找到如何实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T06:24:47.027

只需将[ExeCommand](http://wix.sourceforge.net/manual-wix2/wix_xsd_customaction.htm)属性设置为所需的命令行。对于您提到的文章中使用的自定义操作，ExeCommand 属性可以包含命令行选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T09:18:45.533

创建安装程序最重要的一点是不要单独使用提示。这很丑陋，您需要对管理员权限保持耐心，尝试启动第三方应用程序。

[您可以使用C++](http://en.wikipedia.org/wiki/C++)、[C#](http://en.wikipedia.org/wiki/C_Sharp_%28programming_language%29)或[VB.NET](http://en.wikipedia.org/wiki/Visual_Basic_.NET)创建延迟 CA，而不是这样做。它有点长，需要知道“一些”语法等等，但你可以控制你想要的任何东西。首先，这里有一些资源：

*   *[使用 WiX 延迟自定义操作](http://vadmyst.blogspot.dk/2006/05/deferred-custom-actions-with-wix.html)*（简单[操作方法](http://en.wiktionary.org/wiki/how-to#Noun)）

*   *[CustomAction 元素](http://wix.sourceforge.net/manual-wix2/wix_xsd_customaction.htm)*（在[SourceForge 上](http://en.wikipedia.org/wiki/SourceForge)的 WiX 主页上）

# iphone - 从网络切换时如何从 NSURLConnectionDelegate 接收数据？

> ID：11060885
> 
> 赞同：0
> 
> 时间：2012-06-16T04:42:42.097
> 
> 标签：iphone, objective-c, ios, nsurlconnection, nsurlconnectiondelegate

我正在创建一个与远程服务器通信的类。目前我的设备（iPhone 4）通过 wifi 和本地网络蜂窝连接。默认情况下，它使用 wifi。在这两种情况下都可以正常工作。

但是，当我从 wifi 切换到手机服务时，它会遇到错误委托。即使连接发生变化，我也希望继续进行通信。

是否可以？如何？谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T09:49:48.927

我不认为这是可能的。切换网络后，您可能还切换了 IP 地址。连接由端点的 IP 地址（以及协议和协议特定数据，例如端口号）定义。因此，当 IP 地址更改时，您无法保持连接。您必须清理并处理断开的连接并打开一个新连接。

如果您使用的高级协议（例如 FTP 或 HTTP）允许，您可以尝试在数据传输中断时恢复数据传输。例如，如果下载一个文件，您可能能够在您收到的最后一个数据的文件位置恢复下载。

# jquery - NonSQL：在浏览器控制台中初始化 DB 对象？用户空间中的 DB 逻辑？

> ID：11060894
> 
> 赞同：0
> 
> 时间：2012-06-16T04:45:18.170
> 
> 标签：jquery, database, initialization, lazy-evaluation

我正在尝试将逻辑从数据库移到非常高的级别。从技术上讲，我正在寻找对事物进行极其懒惰的评估。我觉得一些非 sql -db 是为此目的，因为它看起来在非 sql db 中的计算成本很高，因此倾向于移动到用户空间。所以

> `"by which NonSQL db I can initialize the DB -object in the user-space probably in things such as JavaScript/jQuery?"`

**试验**

> **试用 0： MongoDB，根据**[这里](https://stackoverflow.com/questions/11025808/how-can-i-initialize-mongodb-object-db-in-a-browser-console)不可能 。
> 
> **试用 1：** CouchDB，打开。
> 
> > jQcouch 可能工作，更多[here](http://archive.plugins.jquery.com/project/jqcouch)，但找不到源代码。那么如何初始化 couchDB 对象以`db.test.save('hello world')`在浏览器控制台中做一些简单的事情呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T05:31:39.257

`jquery.couch.js`Futon的代码在[此处](http://daleharvey.github.com/jquery.couch.js-docs/symbols/%24.couch.html)有详细记录。您可以在安装 CouchDB 后查看源代码，例如使用 Ubuntu `$ sudo apt-get install couchdb`：

> `"http://127.0.0.1:5984/_utils/script/jquery.couch.js"`.

[此处](https://stackoverflow.com/questions/4975117/using-couchdbs-jquery-couch-js)有关 CouchDB 的相关问题。

# java - eclipse变量视图中的id是什么意思？

> ID：11060897
> 
> 赞同：4
> 
> 时间：2012-06-16T04:46:45.870
> 
> 标签：java, eclipse

在 eclipse 变量视图中，我总是看到类似

评论“测试字符串”（id=2559）

id=2559 是什么意思？我认为这不是哈希。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T04:50:21.300

那就是eclipse分配给它看到的对象的唯一对象ID。

它可以帮助您在调试时识别对象。

# android - 一个表中的两个外键 sqlite android

> ID：11060906
> 
> 赞同：0
> 
> 时间：2012-06-16T04:49:30.383
> 
> 标签：android, sqlite

我正在制作一个表，该表有两个外键到另一个表。但是查询中仍然有错误。

这里的代码：

```
 //inialitation attribute
    public static final String TABLE_MATRIKPENDAPAT = "tableMatrikPendapat";
    public static final String MATRIK_IDKRITERIA1 = "matrikIdKriteria1";
    public static final String MATRIK_IDKRITERIA2 = "matrikIdKriteria2";
    public static final String MATRIK_NILAI = "nilaiMatrik";

    //create query

    private static final String CREATE_TABLE_MATRIKPENDAPAT = "create table "
            + TABLE_MATRIKPENDAPAT + " ("
            + MATRIK_IDKRITERIA1 + " integer , FOREIGN KEY ("+ MATRIK_IDKRITERIA1 +") REFERENCES "
            + TABLE_KRITERIA + " ("+ KRITERIA_ID +"), " 
            + MATRIK_IDKRITERIA2 + " integer , FOREIGN KEY ("+ MATRIK_IDKRITERIA2 +") REFERENCES "
            + TABLE_KRITERIA + " ("+ KRITERIA_ID +"), "
            + MATRIK_NILAI + " integer not null);"; 
```

错误说：

```
sqlite.SQLiteException: near "matrikIdKriteria2": syntax error 
```

当我用一个外键制作它时，就像这里：

```
 private static final String CREATE_TABLE_MATRIKPENDAPAT = "create table "
    + TABLE_MATRIKPENDAPAT + " ("
    + MATRIK_IDKRITERIA1 + " integer , FOREIGN KEY ("+ MATRIK_IDKRITERIA1 +") REFERENCES "
    + TABLE_KRITERIA + " ("+ KRITERIA_ID +"), " 
    + MATRIK_NILAI + " integer not null);"; 
```

错误说：

> sqlite.SQLiteException：靠近“nilaiMatrik”：语法错误

所以我认为，我在第一个外键之后的查询中存在问题。

正确的查询应该是什么？请帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T04:56:30.473

这：

```
integer , FOREIGN 
```

应该

```
integer  FOREIGN 
```

使用逗号，它看起来像另一列。

这是我所拥有的：

```
 + BookTableMetaData.BOOK_USER_ID + " INTEGER REFERENCES "
   + UserTableMetaData.TABLE_NAME + "("
+ UserTableMetaData._ID + ")," 
```

因此，要在您的设置中进行这项工作

```
MATRIK_IDKRITERIA1 + " integer REFERENCES "
+ TABLE_KRITERIA + " ("+ KRITERIA_ID +") 
```

这可能就足够了。

# bash - 控制 awk 输出中的间距

> ID：11060907
> 
> 赞同：0
> 
> 时间：2012-06-16T04:49:37.963
> 
> 标签：bash, sed, awk, grep, gnuplot

我有两个文本文件。hash_only.txt 和 final_output.txt hash_only.txt 如下所示。

```
193548
401125
401275 
```

final_output.txt 如下所示。

```
193548      1199687744  5698758206701808640
193548      1216464960  5698758206761818112
193548      1216464960  5698758206778417152
193548      4236691520  5698758206778945280
401125      2138607488  5698762375908890880
401125       863932288  5698762375909423360
401125      3884158848  5698762375910044160
401125      2609483648  5698762375911032320 
```

我写了一个脚本，如下所示。

```
awk '
FNR==NR {
    hash[$1]
    next
}
$1 in hash {
    print $2,'\t',$3 >> "ecast_print_"$1;
}' hash_only.txt final_output.txt 
```

对于 hash_only.txt 中的所有值，例如 193548,401125 等，我想从文件 'final_output.txt' 中提取第 2,3 列，其中第 1 列匹配 193548,401125 等，并将第 2,3 列输出到 print_193548、print_401125 等。这将产生如下所示的输出。

```
1133254688 5698771509078629376
1150031904 5698771509371165696
1150031904 5698771510035551232
4170258464 5698771510036082688
2895583264 5698771510036715520
1620908064 5698771510037202176
346232864 5698771510037665280
3366459424 5698771510038193664
2091784224 5698771510332259072
817109024 5698771510332816128
3837335584 5698771510333344512
2562660384 5698771510339882240 
```

正如您在上面看到的，输出未对齐，其中第一个字段的长度小于正常值。我希望第二行从确切位置开始。我需要这个以便将其作为 gnuplot 的输入。任何帮助都会受到赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T05:12:08.263

您可能会考虑使用[`printf`](http://www.gnu.org/software/gawk/manual/html_node/Printf-Examples.html)来使字段具有一致的宽度。

此外，gnuplot 不介意文件中的字段是否未完全对齐，如果这是您想要的。所需要的只是字段用空格分隔。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T07:28:57.577

这可能对您有用（GNU sed）：

```
sed 's|.*|/^& /{s/.\\{12\\}//;w ecast_print_&\n}|' hash_only.txt |
sed -nf - final_output.txt 
```

解释：

从文件中创建一个 sed 脚本，该脚本`hash_only.txt`将匹配的行写入文件名`ecast_print_`并附加密钥。从提供给 sed 脚本的输入文件中删除前 12 个字符。

# java - 从 appengine blob 存储提供 GWT 排列 - 未找到 XSRF

> ID：11060914
> 
> 赞同：0
> 
> 时间：2012-06-16T04:50:37.287
> 
> 标签：java, google-app-engine, gwt, gwt-rpc

在尝试从 blob 存储中提供 GWT 排列以避开 AppEngine 对静态文件 150 mb 的硬限制时，我已经成功地为“html”和图像文件“jpeg、png、.etc”和其他文件这样做了.rpc 调用，但我挂断了 XSRF 调用。

在服务器日志中，我看到：找不到序列化策略文件'/theapplication/CCA65B31464BDB27545C23C142FEEEF8.gwt.rpc'；

我的上传日志显示它已上传 /CCA65B31464BDB27545C23C142FEEEF8.gwt.rpc : HTTP/1.1 200 OK

请求 url 显示[http://14.applicationXYZ.appspot.com/xsrf](http://14.applicationXYZ.appspot.com/xsrf)

RequestPayload 显示：[http://14.applicationXYZ.appspot.com/theapplication/|CCA65B31464BDB27545C23C142FEEEF8|com.google.gwt.user.client.rpc.XsrfTokenService|getNewXsrfToken|1|2|3|4|0|](http://14.applicationXYZ.appspot.com/theapplication/|CCA65B31464BDB27545C23C142FEEEF8|com.google.gwt.user.client.rpc.XsrfTokenService|getNewXsrfToken|1|2|3|4|0|)

其他 rpc 调用正在解析（通过服务器过滤器正在寻找 /theapplication 并将请求映射到要服务的 blob），如下例所示，在没有 Xsrf 请求的情况下进行了 rpc 调用（因为用户尚未登录）

请求网址——http: [//14.applicationXYZ.appspot.com/someRPCCall](http://14.applicationXYZ.appspot.com/someRPCCall)

RequestPayload -- [http://14.applicationXYZ.appspot.com/theapplication/|62D7E6737056C685E10947B640409549|com.abc.client.rpc.Service|doWork|java.lang.String/2004016611|java.lang.Boolean/476441737|wwwerr| 1|2|3|4|3|5|5|6|7|7|6|0|](http://14.applicationXYZ.appspot.com/theapplication/|62D7E6737056C685E10947B640409549|com.abc.client.rpc.Service|doWork|java.lang.String/2004016611|java.lang.Boolean/476441737|wwwerr|1|2|3|4|3|5|5|6|7|7|6|0|)

所以，我有两个问题：

1）为什么XSRF调用未能返回适当的blob，即。为什么 xrsf 调用不像其他 url 调用 /theapplication/* 那样由过滤器处理？2）我能做些什么呢？3）另外，我尝试将内容类型设置为“text/x-gwt-rpc; charset=UTF-8 并且在我上传 blob 时也未指定。任何人都知道 *.gwt.rpc 的内容类型应该是什么如果我确实让 xrsf 工作了？错误的内容类型会导致问题吗？

***注意 applicationXYZ 不是真实姓名，所以没有链接将不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T05:25:59.160

好的 /xsrf 也被映射到一个 servlet，所以如果过滤器返回一个 blob 而不传递过滤器，它似乎不会到达 servlet。

无论如何，只需像往常一样上传几个 .rpc 文件而不将它们作为 blob 提供就很容易了。

# ruby-on-rails - Bundler / eventmachine install issue (Rails / Windows)

> ID：11060915
> 
> 赞同：2
> 
> 时间：2012-06-16T04:50:45.450
> 
> 标签：ruby-on-rails, windows, eventmachine

I am having trouble installing Bundler in Windows. I first do a gem install, which seems fine (although only one gem is installed?):

```
C:\furious-ocean-6331>gem install bundler --pre
Successfully installed bundler-1.2.0.pre.1
1 gem installed
Installing ri documentation for bundler-1.2.0.pre.1...
Installing RDoc documentation for bundler-1.2.0.pre.1...</code> 
```

Then, I bundle install, and I get this beaut:

```
Fetching gem metadata from https://rubygems.org/.......
Using rake (0.9.2.2)
Using i18n (0.6.0)
Using multi_json (1.3.5)
Using activesupport (3.2.2)
Using builder (3.0.0)
Using activemodel (3.2.2)
Using erubis (2.7.0)
Using journey (1.0.3)
Using rack (1.4.1)
Using rack-cache (1.2)
Using rack-test (0.6.1)
Using hike (1.2.1)
Using tilt (1.3.3)
Using sprockets (2.1.3)
Using actionpack (3.2.2)
Using mime-types (1.18)
Using polyglot (0.3.3)
Using treetop (1.4.10)
Using mail (2.4.4)
Using actionmailer (3.2.2)
Using arel (3.0.2)
Using tzinfo (0.3.33)
Using activerecord (3.2.2)
Using activeresource (3.2.2)
Using addressable (2.2.8)
Using bcrypt-ruby (3.0.1)
Using bundler (1.2.0.pre.1)
Using coffee-script-source (1.3.3)
Using execjs (1.3.2)
Using coffee-script (2.2.0)
Using rack-ssl (1.3.2)
Using json (1.7.3)
Using rdoc (3.12)
Using thor (0.14.6)
Using railties (3.2.2)
Using coffee-rails (3.2.2)
Using daemons (1.1.8)
Installing eventmachine (0.12.10) with native extensions
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension
.

        C:/RailsInstaller/Ruby1.9.3/bin/ruby.exe extconf.rb
checking for rb_trap_immediate in ruby.h,rubysig.h... no
checking for rb_thread_blocking_region()... yes
checking for inotify_init() in sys/inotify.h... no
checking for __NR_inotify_init in sys/syscall.h... no
checking for writev() in sys/uio.h... no
checking for rb_thread_check_ints()... yes
checking for rb_time_new()... yes
checking for windows.h... yes
checking for winsock.h... yes
checking for main() in -lkernel32... yes
checking for main() in -lrpcrt4... yes
checking for main() in -lgdi32... yes
checking for main() in -lssl... no
creating Makefile

make
generating rubyeventmachine-i386-mingw32.def
compiling binder.cpp
cc1plus.exe: warning: command line option "-Wdeclaration-after-statement" is val
id for C/ObjC but not for C++
cc1plus.exe: warning: command line option "-Wimplicit-function-declaration" is v
alid for C/ObjC but not for C++
In file included from project.h:137:0,
                 from binder.cpp:20:
binder.h:35:34: warning: type qualifiers ignored on function return type
In file included from project.h:138:0,
                 from binder.cpp:20:
em.h:91:47: warning: type qualifiers ignored on function return type
em.h:92:76: warning: type qualifiers ignored on function return type
em.h:93:56: warning: type qualifiers ignored on function return type
em.h:95:57: warning: type qualifiers ignored on function return type
em.h:96:60: warning: type qualifiers ignored on function return type
em.h:97:58: warning: type qualifiers ignored on function return type
em.h:98:55: warning: type qualifiers ignored on function return type
em.h:99:36: warning: type qualifiers ignored on function return type
em.h:101:47: warning: type qualifiers ignored on function return type
em.h:106:42: warning: type qualifiers ignored on function return type
em.h:123:45: warning: type qualifiers ignored on function return type
em.h:132:36: warning: type qualifiers ignored on function return type
In file included from project.h:145:0,
                 from binder.cpp:20:
eventmachine.h:45:61: warning: type qualifiers ignored on function return type
eventmachine.h:46:112: warning: type qualifiers ignored on function return type
eventmachine.h:47:69: warning: type qualifiers ignored on function return type
eventmachine.h:49:73: warning: type qualifiers ignored on function return type
eventmachine.h:62:75: warning: type qualifiers ignored on function return type
eventmachine.h:63:74: warning: type qualifiers ignored on function return type
eventmachine.h:64:77: warning: type qualifiers ignored on function return type
eventmachine.h:65:41: warning: type qualifiers ignored on function return type
In file included from project.h:145:0,
                 from binder.cpp:20:
eventmachine.h:99:60: warning: type qualifiers ignored on function return type
eventmachine.h:100:58: warning: type qualifiers ignored on function return type
eventmachine.h:102:60: warning: type qualifiers ignored on function return type
eventmachine.h:105:41: warning: type qualifiers ignored on function return type
compiling cmain.cpp
cc1plus.exe: warning: command line option "-Wdeclaration-after-statement" is val
id for C/ObjC but not for C++
cc1plus.exe: warning: command line option "-Wimplicit-function-declaration" is v
alid for C/ObjC but not for C++
In file included from project.h:137:0,
                 from cmain.cpp:20:
binder.h:35:34: warning: type qualifiers ignored on function return type
In file included from project.h:138:0,
                 from cmain.cpp:20:
em.h:91:47: warning: type qualifiers ignored on function return type
em.h:92:76: warning: type qualifiers ignored on function return type
em.h:93:56: warning: type qualifiers ignored on function return type
em.h:95:57: warning: type qualifiers ignored on function return type
em.h:96:60: warning: type qualifiers ignored on function return type
em.h:97:58: warning: type qualifiers ignored on function return type
em.h:98:55: warning: type qualifiers ignored on function return type
em.h:99:36: warning: type qualifiers ignored on function return type
em.h:101:47: warning: type qualifiers ignored on function return type
em.h:106:42: warning: type qualifiers ignored on function return type
em.h:123:45: warning: type qualifiers ignored on function return type
em.h:132:36: warning: type qualifiers ignored on function return type
In file included from project.h:145:0,
                 from cmain.cpp:20:
eventmachine.h:45:61: warning: type qualifiers ignored on function return type
eventmachine.h:46:112: warning: type qualifiers ignored on function return type
eventmachine.h:47:69: warning: type qualifiers ignored on function return type
eventmachine.h:49:73: warning: type qualifiers ignored on function return type
eventmachine.h:62:75: warning: type qualifiers ignored on function return type
eventmachine.h:63:74: warning: type qualifiers ignored on function return type
eventmachine.h:64:77: warning: type qualifiers ignored on function return type
eventmachine.h:65:41: warning: type qualifiers ignored on function return type
In file included from project.h:145:0,
                 from cmain.cpp:20:
eventmachine.h:99:60: warning: type qualifiers ignored on function return type
eventmachine.h:100:58: warning: type qualifiers ignored on function return type
eventmachine.h:102:60: warning: type qualifiers ignored on function return type
eventmachine.h:105:41: warning: type qualifiers ignored on function return type
cmain.cpp:98:71: warning: type qualifiers ignored on function return type
cmain.cpp:109:122: warning: type qualifiers ignored on function return type
cmain.cpp:119:79: warning: type qualifiers ignored on function return type
cmain.cpp:129:83: warning: type qualifiers ignored on function return type
cmain.cpp:260:85: warning: type qualifiers ignored on function return type
cmain.cpp:270:84: warning: type qualifiers ignored on function return type
cmain.cpp:280:88: warning: type qualifiers ignored on function return type
cmain.cpp:290:51: warning: type qualifiers ignored on function return type
cmain.cpp:300:70: warning: type qualifiers ignored on function return type
cmain.cpp:320:55: warning: type qualifiers ignored on function return type
cmain.cpp:546:70: warning: type qualifiers ignored on function return type
cmain.cpp:669:68: warning: type qualifiers ignored on function return type
cmain.cpp: In function 'int evma_send_file_data_to_connection(long unsigned int,
 const char*)':
cmain.cpp:752:6: error: cannot convert 'stat*' to '_stati64*' for argument '2' t
o 'int _fstati64(int, _stati64*)'
make: *** [cmain.o] Error 1

Gem files will remain installed in C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9
.1/gems/eventmachine-0.12.10 for inspection.
Results logged to C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/eventmach
ine-0.12.10/ext/gem_make.out
An error occurred while installing eventmachine (0.12.10), and Bundler cannot co
ntinue.
Make sure that `gem install eventmachine -v '0.12.10'` succeeds before bundling. 
```

I tried `gem install eventmachine -v '0.12.10'`, but when I do `bundle install` again, I get the same huge error about my eventmachine.

Any thoughts?

Thanks!

EDIT: I tried installing `gem install eventmachine --pre` as per [this](https://stackoverflow.com/questions/6927907/ruby-problem-installing-eventmachine-under-windows-7) post, but I got the same result.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-28T10:35:38.453

[这](https://stackoverflow.com/questions/10421728/i-cant-install-eventmachine-in-windows?rq=1) 可能会有所帮助或尝试`gem "eventmachine", "~> 1.0.3"`在您的 gem 文件中的任何行添加它在您的应用程序的主目录中

# java - 字符串不写入新行

> ID：11060916
> 
> 赞同：3
> 
> 时间：2012-06-16T04:50:49.017
> 
> 标签：java, file-io, newline

以下代码段尝试将某个目录中存在的目录和文件的名称写入文本文件。每个名称应写入单独的行。相反，它将每个名称打印在同一行上。为什么会这样？

```
 try {
        File listFile = new File("E:" + System.getProperty("file.separator") + "Shiv Kumar Sharma Torrent"+ System.getProperty("file.separator") +"list.txt");
        FileWriter writer = new FileWriter(listFile,true);
        Iterator iterator = directoryList.iterator();
        while(iterator.hasNext()) {
            writer.write((String)iterator.next());
            writer.write("\n"); // Did this so each name is on a new line
        }
        writer.close();
    }catch(Exception exc) {
        exc.printStackTrace();
    } 
```

*输出：*

![在此处输入图像描述](../Images/8a559cacdd71b56721b3087947a7627e.png)

我在哪里犯错了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-16T04:54:22.283

每当您需要文本格式时，请始终使用[PrintWriter](http://docs.oracle.com/javase/6/docs/api/java/io/PrintWriter.html)。
正确的做法是将编写器包装在[PrintWriter](http://docs.oracle.com/javase/6/docs/api/java/io/PrintWriter.html)中并使用 println() 方法，例如：

```
PrintWriter printWriter = new PrintWriter(writer);
printWriter.println(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-16T04:52:20.327

如果您使用的是 Windows，请`\r\n`使用`\n`.

或者对于独立于操作系统的，使用：

```
System.getProperty("line.separator"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T04:55:23.483

如果您在 Windows 平台上，则应将下一行写为“\r\n”。

Windows 的下一行是“\r\n”

Mac 的下一行是“\n”

或者，使用 System.getProperty("line.separator") 换行。它会自动为其运行的系统确定正确的换行符。这应该是最佳实践，因为 Java 预计会在不同的操作系统上执行相同的操作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-16T05:00:25.700

如果您要使用 BufferedWriter ：

```
 File f = new File("C:/file.txt");
 BufferedWriter bw = new BufferedWriter(new FileWriter(f, true));
 bw.write("Hello");
 bw.newLine();   // new line
 bw.write("How are you?");
 bw.close(); 
```

# kinect - Kinect windows sdk 1.5 缺少参考

> ID：11060918
> 
> 赞同：1
> 
> 时间：2012-06-16T04:51:56.087
> 
> 标签：kinect

我是 kinect 环境的新手，我试图修改一些类但找不到它们，SkeletonData 骨架；字典联合地图；没有找到 SkeletonData 和 Joint ID 作为参考 我想做的是应用这个例子：http://www.youtube.com/watch?v=g-3EQ6xcFM8&feature=related 这是用于修改，但我不知道把它放在哪里让它工作 [http://codepaste.net/8j3pef](http://codepaste.net/8j3pef)

我需要显示骨骼每个关节的角度，所以如果有人可以帮助我或给我发一个项目，只为一个关节做这个，然后我会申请另一个关节提前非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T07:26:34.673

某些 API 已更改，您需要迁移代码。

`SkeletonData`现在是`Skeleton`。

`JointID`现在是`Joint`。

请参阅：[http ://robrelyea.wordpress.com/2012/02/01/k4w-code-migration-from-beta2-to-v1-0-managed/](http://robrelyea.wordpress.com/2012/02/01/k4w-code-migration-from-beta2-to-v1-0-managed/)

向下滚动以查看[Skeleton API 更改](http://robrelyea.wordpress.com/2012/02/01/k4w-details-of-api-changes-from-beta2-to-v1-managed/#skeletons)

我没有适合你的项目，抱歉。

# powershell - How to enable OGV in a powershell function

> ID：11060920
> 
> 赞同：2
> 
> 时间：2012-06-16T04:52:05.600
> 
> 标签：powershell, scripting

How to enable Out-GridView in a function.

I mean,

```
 "Hello" | Out-GridView 
```

Works.

But if I have a simple function like this

```
function Count ([int]$times)
{
    for ($i=1; $i -le $times;$i++)
    {
        Write-Host $i
    }
} 
```

Why calling `Count 5` doest not support a pipe to Out-GridView?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T06:16:02.937

您遇到的问题是`Write-Host`根本不输出到管道。它直接写入屏幕。替换`Write-Host`为`Write-Output`它应该可以正常工作。

顺便说一句，`Write-Output`是默认设置，因此您可以使用：

```
function Count ([int]$times)
{
    for ($i=1; $i -le $times;$i++)
    {
        $i
    }
} 
```

或者更简单地说：

```
function Count([int]$times) 
{
    1..$times
} 
```

# json - JSON to Groovy with JsonSlurper and unknown "string"

> ID：11060922
> 
> 赞同：7
> 
> 时间：2012-06-16T04:52:16.897
> 
> 标签：json, grails, groovy

I am writing a Grails/Groovy app and I have a JSON object with a "string" name (**grommet** and **widget**) inside the **params** member that can change. That is, next time it might be **acme** and **zoom**. Here is the JSON:

```
def jx = """{ 
    "job": "42",
    "params": {
        "grommet": {"name": "x", "data": "y"},
        "widget": { "name": "a", "data": "b"}
    } 
}""" 
```

I am trying to figure out how to get the string **grommet** . Code so far:

```
def dalist = new JsonSlurper().parseText(jx)
println dalist.job     // Gives: 42
println dalist.params  // Gives: [grommet:[name:x, data:y], widget:[name:a, data:b]]
println dalist.params[0]  // Gives: null 
```

Any idea how to get the string **grommet**? Iama going to keep hitting my head against a wall.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-16T05:19:00.600

JSON 对象上的`params`键与 JSON 对象相关联，而不是数组，因此您无法通过索引访问它。JsonSlurper 将 JSON 对象映射到 Groovy Maps，因此您可以`params`通过它的键进行访问，这些键是字符串，例如`dalist.params.grommet`，它将为您提供映射`[name: 'x', data: 'y']`。

要访问`params`你可以做的钥匙`dalist.params.keySet()`，这会给你的清单`['grommet', 'widget']`。如果您只对知道`params`密钥感兴趣，那应该可以解决问题。如果您出于某种原因需要获取`'grommet'`字符串，您可以通过访问该列表中的第一个元素 ie 来`dalist.params.keySet()[0]`完成，但我不知道您为什么想知道这一点。而且我不确定是否可以保证该映射的第一个键始终是`'grommet'`，因为 JSON 对象未按规范排序（来自[json.org](http://json.org/)：*对象是一组无序的名称/值对*），但是，反过来，Groovy 映射*是*有序（默认实现是 LinkedHashMap）...所以我会假设在将 JSON 解析到 Groovy 世界时会保留该顺序，但我会尽量不依赖该特定行为呵呵。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-16T05:16:30.550

这是`Map`实例，请尝试：

```
def params = dalist.params.entrySet() as List  // entrySet() returns Set, but it's easier to use it as a List
println params
println params.size()
println params[0]
println params[0].key
println params[0].value 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-16T05:34:51.187

这可能会帮助你。

```
import groovy.json.JsonSlurper;
def jx='{"job":"42","params":{"grommet":{"name":"x","data":"y"},"widget":{"name":"a","data":"b"}}}'

def dalist = new JsonSlurper().parseText( jx )

assert dalist.params.getClass().name == "java.util.HashMap";
assert dalist.params.size() == 2;

def keys = dalist.params.collect{ a, b -> a}; // returns "[grommet, widget]"
assert !!dalist.params.get( "grommet" ) == true 
```

# ruby-on-rails - DelayedJob email where to have 'who to email' logic

> ID：11060924
> 
> 赞同：0
> 
> 时间：2012-06-16T04:52:26.153
> 
> 标签：ruby-on-rails, ruby-on-rails-3, email, delayed-job

In my [app](http://shutterhire.com) I have certain events that trigger a lot of emails (~100). Obviously sending them immediately is not an option, so I'm using DelayedJob to queue them up and send them after the request is processed. I've now found that the logic to determine WHICH 100 people to email is heavy enough that it takes a while to run, so I'd like to DelayedJob that process as well. **Where should this logic go? (model? mailer?)** Sending mail from the model just feels wrong. Is there a best practice here?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T05:02:10.733

您应该编写一个代表工作的类。不是模型类，也不是控制器类：作业类。

```
# app/jobs/mail_job.rb
class MailJob
  attr_accessor :first_option, :second_option

  def initialize(first_option, second_option)
    self.first_option = first_option
    self.second_option = second_option
  end

  def perform
    accounts = Account.where("some_key" => first_option).to_a
    # more complicated stuff goes here
    accounts.each do |account|
      AccountMailer.hello_message(account).deliver
      account.mark_hello_delivered!
    end
  end
end

job = MailJob.new(params["first"], params["second"])
Delayed::Job.enqueue(job) 
```

# c++ - In c++11, is there ever still a need to pass in a reference to an object that will accept the output of a function?

> ID：11060928
> 
> 赞同：5
> 
> 时间：2012-06-16T04:54:17.540
> 
> 标签：c++, c++11, move-semantics, return-by-value

Prior to C++11, if I had a function that operated on large objects, my instinct would be to write functions with this kind of prototype.

```
void f(A &return_value, A const &parameter_value); 
```

(Here, return_value is just a blank object which will receive the output of the function. A is just some class which is large and expensive to copy.)

In C++11, taking advantage of move semantics, the default recommendation (as I understand it) is the more straightforward:

```
A f(A const &parameter_value); 
```

Is there ever still a need to do it the old way, passing in an object to hold the return value?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-16T13:19:02.283

其他人已经涵盖了`A`可能没有廉价移动构造函数的情况。我假设你`A`这样做。但是还有另一种情况，您可能希望传入“out”参数：

如果`A`是某种类型，例如`vector`or`string`并且已知“out”参数已经具有可以在 内部重用的资源（例如内存）`f`，那么如果可以的话，重用该资源是有意义的。例如考虑：

```
void get_info(std::string&);
bool process_info(const std::string&);

void
foo()
{
    std::string info;
    for (bool not_done = true; not_done;)
    {
        info.clear();
        get_info(info);
        not_done = process_info(info);
    }
} 
```

与：

```
std::string get_info();
bool process_info(const std::string&);

void
foo()
{
    for (bool not_done = true; not_done;)
    {
        std::string info = get_info();
        not_done = process_info(info);
    }
} 
```

在第一种情况下，容量将`string`随着循环的执行而增加，然后该容量可能会在循环的每次迭代中重用。在第二种情况下`string`，每次迭代都会分配一个新的（忽略小字符串优化缓冲区）。

现在这并不是说你永远不应该`std::string`按值返回。只是您应该意识到这个问题并根据具体情况应用工程判断。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-16T05:00:46.020

一个对象可能很大并且复制起来很昂贵，*并且移动语义无法改进复制*。考虑：

```
struct A {
    std::array<double,100000> m_data;
}; 
```

以这种方式设计对象可能不是一个好主意，但是如果由于某种原因您有一个这种类型的对象并且您想编写一个函数来填充数据，那么您可以使用 out 参数来完成。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-16T05:09:40.420

这取决于：您的编译器是否支持返回值优化，您的函数是否`f`设计为能够使用您的编译器支持的 RVO？

如果是这样，那么是的，无论如何都要按值返回。通过传递一个可变参数，您将一无所获，而通过这种方式，您将获得大量的代码清晰度。如果不是，那么您必须调查 的定义`A`。

对于某些类型，移动只不过是副本。如果`A`不包含任何真正值得移动的东西（指针转移所有权等），那么你将不会通过移动获得任何东西。毕竟，搬家不是免费的。它只是一个知道原件拥有的任何东西都被转移到副本的副本。如果该类型不拥有任何东西，那么移动只是一个副本。

# c# - Snake game - Getting collision to work with images

> ID：11060930
> 
> 赞同：1
> 
> 时间：2012-06-16T04:54:38.580
> 
> 标签：c#

This works when I used a rectangle as the food but now I'm trying to use my own image for the food but can't get it to work correctly. I keep getting the error of "Cannot convert Image to Rectangle" when using `IntersectsWith` so I'm stuck there and not sure what to do.

My error is on this part of the code:`if (snake.SnakeRec[i].IntersectsWith(food.foodRec))`

```
for (int i = 0; i < snake.SnakeRec.Length; i++)
        {
            if (snake.SnakeRec[i].IntersectsWith(food.foodRec))
            {
                score += 10;
                snake.growSnake();
                food.foodLocation(randFood);
            }
        } 
        collision();

        this.Invalidate(); 
```

In the Food.cs class

```
public void drawFood(Graphics paper)
    {
        Image foodRec = Image.FromFile(@"C:\food.bmp"); 
        Rectangle rectangleAreaToDrawImage = new Rectangle(x, y, width, height);

        paper.DrawImage(foodRec, rectangleAreaToDrawImage);
    } 
```

If you need more code let me know.

Edit: Solved

I had to change:

`if (snake.SnakeRec[i].IntersectsWith(food.foodRec))`

`Rectangle rectangleAreaToDrawImage = new Rectangle(x, y, width, height);`

to:

`if (snake.SnakeRec[i].IntersectsWith(food.rectangleAreaToDrawImage))`

`rectangleAreaToDrawImage = new Rectangle(x, y, width, height);`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T05:04:07.360

而不是将图像发送到`IntersectsWith`您需要发送图像矩形，如下所示：

```
// Instead of this:
if (snake.SnakeRec[i].IntersectsWith(food.foodRec))
// Put this:
if (snake.SnakeRec[i].IntersectsWith(food.rectangleAreaToDrawImage)) 
```

我假设`rectangleAreaToDrawImage`是公开可用的，因为您使用`foodRec`的是同一个班级。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T05:04:32.157

您现在的代码将 foodRec 定义为图像而不是矩形。尝试将 foodRec 定义为具有图像尺寸的矩形。

# java - Method for changing an existing color OpenGL

> ID：11060932
> 
> 赞同：2
> 
> 时间：2012-06-16T04:55:16.947
> 
> 标签：java, opengl, rgb, lwjgl, bytebuffer

With a method like `glColor4f(0f, 0f, 0f, 0f);`, it sets the values to whatever parameters one puts in. However, what I would like to do is only slightly change a color. Is there any existing OpenGL method that will add or subtract its parameters to the existing colors it has?

The only other way of doing this that I can come up with is first getting its color values, then editing those how I want to, and finally sending them back with `glColor4f()`.

So, in closing, I would like to know if there is either a method for editing existing RGBA, or at least retrieving an existing RGBA.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T05:01:08.253

好吧，您可以`glColor4f`使用`glGet`with获得最后一个设置的值`GL_CURRENT_COLOR`，但我不推荐它；`glGet`操作通常对你的表现不利，所以尽量不要太频繁。

一个更好的主意是维护您发送到的最后一个值的本地副本`glColor4f`，以便您拥有数据客户端，而不必从 opengl 驱动程序请求它。

~~没有办法从我知道的当前颜色中添加或减去。~~

编辑：实际上我只是抬头看到这个函数[`glSecondaryColor`](http://www.opengl.org/sdk/docs/man/xhtml/glSecondaryColor.xml)，它可能会做你想做的事。您可以提供第二种 RBG 颜色，然后启用 GL_COLOR_SUM，这两种颜色会加在一起。

# objective-c - Difference between NSWindowController Vs NSViewController

> ID：11060935
> 
> 赞同：30
> 
> 时间：2012-06-16T04:55:25.823
> 
> 标签：objective-c, cocoa-touch, cocoa, cocoa-design-patterns, nswindowcontroller

I am coming from **iOS** background and starting to learn Cocoa. On **iOS** unless we have multiple targets for `iPad` and `iPhone` we usually have **one Window** and manage the screen using `UIViewControllers`. Where every new screen will most of the time will map to a `UIViewController`.

However on cocoa this seems to be the otherway around where a new screen/window is manage by `NSWindow` and it's subcomponents are managed by `NSViewController`. So if I have multiple window app I should have separate `NSWindowController` for each window.

Is this approach correct or am I having a misunderstanding ?

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-16T05:49:44.603

在 iPhone SDK 和 Leopard SDK 中，他们引入了视图控制器，即 NSViewController 和 UIViewController。正如他们的名字所暗示的那样，他们所做的是管理视图

视图控制器用于管理视图。UI设计的当前趋势是单窗口，多视图。这意味着有一个窗口，在它里面，为不同目的设计的不同组的视图可以被换入和换出。因此，视图控制器为程序员处理这些已建立的模式。目前，视图控制器对于 iPhone 和 iPod touch 编程非常重要，因为该平台基于单窗口和多视图模型。但是，在我看来，使用视图控制器在 Mac 上并不流行。像 NSWindowController 这样的窗口控制器怎么样？对于 iPhone 和 iPod touch 环境，它的对应物 UIWindowController 不存在，因为这些环境只有一个窗口。与视图控制器不同，NSWindowController 用于基于文档的程序。那么，基于文档的程序可以使用多个窗口。因此，正如 Apple 的文档所说，认为 NSWindowController 用于基于文档的程序是合理的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-16T07:05:27.107

我也来自 iOS，不久前开始编写 Mac 应用程序，主要从 Apple 的文档中学习。

我的印象是，在桌面上，您几乎不需要`NSViewController`s（一个大的例外是带有选项卡和多个视图的窗口，例如 GarageBand 欢迎屏幕）。

大多数情况下，`NSWindowController`每个窗口都有一个。首先了解`NSWindow`和`NSWindowController`（`NSDocument`如果您正在制作基于文档的应用程序）之间的关系。

一旦你做对了，就开始尝试`NSViewController`.

* * *

**更新：**似乎自从为 mac 应用程序引入**故事板**以来，Apple 预计大部分视图呈现逻辑应该从旧的迁移`NSWindowController`到新的`NSViewController`，更符合 iOS 应用程序的结构。我不太了解在*哪里*画线，或者窗口控制器中应该保留什么样的代码（或者它是否仍然需要子类化）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-10-14T10:08:30.887

窗口控制器创建一个传统窗口并拥有所有传统 API。

视图控制器也可以显示在另一个视图之外。然后它获取一个窗口框架，但不支持完整的传统窗口控制器 API。

除了自定义、模式和显示之外，视图控制器还可以在模式表和弹出窗口中呈现。

因此，View Controller 具有更多的表示选项和更精简的 API，但在传统 Window Controller 涵盖的情况下可能存在一些限制。

# c# - 显示/隐藏水晶报表中某些记录的数据字段和标签

> ID：11060936
> 
> 赞同：2
> 
> 时间：2012-06-16T04:55:36.680
> 
> 标签：c#, crystal-reports

如何根据水晶报表中的条件显示或隐藏某些记录的字段？我在 VS 2005 C# 中使用水晶报表，我的报表看起来像这样。

```
Bill No.     : B0012510
Customer     : AA Company
Cashier      : Test
Cancelled By : User1
Item Name   Price   Qty Amount
---------   -----   --- ------
Item1       100 3    300
Item2       500 2   1000
--------------------------------------
            Total   1300

Bill No.     : B0012511
Customer     : BB Company
Cashier      : Test2

Item Name   Price   Qty Amount
---------   ------  --- ------
Item3       100 3   300
Item4         50    2   100
--------------------------------------
            Total   400 
```

如果该账单没有像第二个账单那样被取消（取消状态=0），想要隐藏“取消者”。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T05:27:29.143

在 Crystal 报表设计器中，选择要隐藏的字段 + 鼠标右键打开`Format object`+ 常用 + 选中`Suppress`并打开格式公式编辑器和如下表达式：

```
{tableName.cancelstatus}=0 
```

# jsf - 使用 Primefaces 咆哮时出错，无法转换为 AutoUpdatable

> ID：11060939
> 
> 赞同：0
> 
> 时间：2012-06-16T04:56:08.113
> 
> 标签：jsf, primefaces

我已经多次使用 Primefaces。太棒了。但这一次我不知道为什么：

我无法添加咆哮组件，错误是：org.primefaces.component.growl.Growl 无法强制转换为 org.primefaces.component.api.AutoUpdatable

p:messages 也一样

这可能是由于我的facelet中的一些错误。但我将此与我之前写的一个成功的 facelet 进行比较，我无法弄清楚问题出在哪里。facelet 的问题是（删除 p:growl 并且一切顺利）：

```
<body>

    <ui:composition template="./../../WEB-INF/master.xhtml">

        <ui:define name="top">
            <h:outputText value="#{bundle.ListAccountHolderTitle}"></h:outputText>
        </ui:define>

        <ui:define name="content">
            <h:form>
                <p:growl id="growl"/>
                <p:dataTable value="#{accountHolderBean.items}" var="holder">
                    <p:column headerText="Type">#{holder.name}</p:column>
                </p:dataTable>
                <h:panelGrid columns="2">
                    Type
                    <h:inputText id="type1" required="true" value="#{accountHolderBean.selected.type}"/>
                    Name
                    <h:inputText id="name1" value="#{accountHolderBean.selected.name}"/>
                    Field
                    <h:inputText id="field1" accesskey="f" value="#{accountHolderBean.field}"/>
                    Value
                    <h:inputText id="val" accesskey="v" value="#{accountHolderBean.val}"/>
                    All attributes
                    <h:outputText id="attrs" value="#{accountHolderBean.allAttributes}"/>
                </h:panelGrid>
                <p:commandLink update="attrs" actionListener="#{accountHolderBean.update}">Update</p:commandLink>
            </h:form>
        </ui:define>

    </ui:composition>

</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T05:11:04.063

> ```
> org.primefaces.component.growl.Growl cannot be cast to org.primefaces.component.api.AutoUpdatable 
> ```

这表明您在 web 应用的运行时类路径中同时拥有 PrimeFaces 2.x 和 3.x 库。`AutoUpdatable`是在 PrimeFaces 3.0 中引入的，而之前在 2.x 中已经`Growl`存在，但`AutoUpdatable`直到 PrimeFaces 3.0 才实现。

清理您的类路径并摆脱令人讨厌的旧 PrimeFaces 2.x 库。

# python - Pygame按钮在按下/仅在悬停时不起作用

> ID：11060945
> 
> 赞同：0
> 
> 时间：2012-06-16T04:57:51.747
> 
> 标签：python, pygame

我正在尝试让 onclick 按钮打印支票并运行我的铅笔功能。目前，如果我将鼠标悬停在 Box sprite 上，它将运行打印和铅笔功能。它应该是 ONCLICK 它运行那些 2。任何人都可以帮助我吗？谢谢！（这应该是所有相关代码，如果您需要更多，请告诉我:)

```
class Box(pygame.sprite.Sprite):
def __init__(self):
    pygame.sprite.Sprite.__init__(self)
    self.image = pygame.Surface((35, 30))
    self.image = self.image.convert()
    self.image.fill((255, 0, 0))
    self.rect = self.image.get_rect()
    self.rect.centerx = 25
    self.rect.centery = 505
    self.dx = 10
    self.dy = 10

while keepGoing:

    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            keepGoing = False
        box = Box()
        allSprites = pygame.sprite.Group(box)   
        allSprites.draw(screen)

        if event.type == MOUSEMOTION:
            x,y = event.pos
            if box.rect.collidepoint(x,y) and pygame.MOUSEBUTTONUP:                      
                print("collide works")
                pencil(background,clock,keepGoing,screen)
        pygame.display.flip() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T08:32:04.577

您的代码不是检查鼠标点击，而是检查鼠标移动。

如果您想测试您的框上的点击，请更改条件以检查`MOUSEBUTTONDOWN`或`MOUSEBUTTONUP`事件（取决于您想要对点击的哪一部分做出反应），而不是`MOUSEMOTION`事件。

不过，您的代码还有其他一些问题。例如，您在每次活动后创建您的 Box 和 Group。可能您只想在进入游戏循环之前创建它们一次（这将更有意义并且表现更好）。

# ruby-on-rails - Rails FactoryGirl 定义语法

> ID：11060947
> 
> 赞同：2
> 
> 时间：2012-06-16T04:58:18.330
> 
> 标签：ruby-on-rails, factory-bot

在使用 factory girl gem 时，我们创建了一个 factory.rb 文件，其语法为

```
FactoryGirl.define do
  factory :model do
    ...  
  end
  ...
end 
```

那么 FactoryGirl.define 语法到底是什么意思呢？是否类似于

```
class FactoryGirl
  def factory :model do
  end
end 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T05:07:20.827

与许多 Ruby gem 一样，FactoryGirl 定义了一种“领域特定语言”或 DSL，以简化配置。这是一种常见的模式。

您的示例如下所示：

```
FactoryGirl.define do
  factory :model do
    ...  
  end
  ...
end 
```

发生的事情是使用另外传递一个块`factory`的参数调用该方法。`:model`与往常一样，所讨论的方法可以自由决定如何处理该块。在这种情况下，它会在工厂生成过程中被保存并稍后执行。

您对它的重新解释没有任何意义，因为那不是有效的 Ruby。您不能将符号作为参数说明符。请记住，这`factory`是一种预先存在的方法，而不是您当时定义的方法。

如果这有点模糊，您将需要更多地尝试块以了解它们在 Ruby 中的工作方式。它们被用于许多事情，因此您需要了解每个设置对块可以做什么、它应该返回什么以及它将被调用多少次（如果有的话）的期望。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T05:16:49.867

在 ruby​​ 中，任何东西`do end`都是一个块，所有块都附加到一个方法上。

因此，在您的示例中，`FactoryGirl.define`是以块为参数的方法调用。`factory :model`也是以块为参数的方法调用，但在这种情况下，`:model`也是传入的参数。

你可以想象在 FactoryGirl 中定义的方法在**概念上**是这样的：

```
class FactoryGirl
  def self.define
    yield # do something w/ the block passed in
    ...
  end

  def factory(model_name, &block)
    block.call # do something w/ the block passed in
    ...
  end
end 
```

# gnuplot - 尝试导出 .png 时终端出现垃圾

> ID：11060962
> 
> 赞同：0
> 
> 时间：2012-06-16T05:01:18.580
> 
> 标签：gnuplot

我有一个文件（称为`print_1012720.txt`），看起来像下面显示的文本。

```
1133254688 5698771509078629376
1150031904 5698771509371165696
1150031904 5698771510035551232
4170258464 5698771510036082688
2895583264 5698771510036715520
1620908064 5698771510037202176
346232864 5698771510037665280  <----
3366459424 5698771510038193664
2091784224 5698771510332259072
817109024 5698771510332816128  <-----
3837335584 5698771510333344512
2562660384 5698771510339882240
1287985184 5698771510340411392
13309984 5698771510340939776 <-------
3033536544 5698771510348048896
1758861344 5698771510348577280
484186144 5698771510349228800
3504412704 5698771510632804864
2229737504 5698771510633441792
955062304 5698771510634390272
3975288864 5698771510638858496
2700613664 5698771510639347712
1425938464 5698771510642663168
134486304 5698771510643387136
3154712864 5698771510643808768 
```

我在 bash 中运行以下命令。

```
gnuplot

reset
set terminal png

set xdata time
set timefmt "%d/%m/%Y %H:%M:%S"
set format x "%H:%M"
set xlabel "time"

set ylabel "highest seq number"
set yrange [0:65535]

set title "seq number over time"
set key reverse Left outside
set grid

set style data linespoints

plot "print_1012720" using 1:2 title "Flow 1" 
```

它在我的外壳中产生垃圾。我怀疑这是导致这种情况的列之间的间距。但是，如果我更正间距，则文件被正确绘制。任何线索如何纠正？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T05:38:29.080

我怀疑您的主要问题是您没有设置输出。在你的`set terminal`命令之后，你应该设置一个输出文件，否则 gnuplot 会将 .png 吐出到你的终端，这看起来像乱码。尝试将以下内容放入文件中（例如保存为“plot.plt”），然后`gnuplot plot.plt`在 bash 命令行中运行。

```
set terminal png 
set output 'output.png'

set xdata time
set timefmt "%s"
set format x "%H:%M"
set xlabel "time"

set ylabel "highest seq number"

set title "seq number over time"
set key reverse Left outside
set grid

set style data linespoints

plot "print_1012720.txt" using 1:2 title "Flow 1" 
```

以这种方式创建绘图文件将为您节省大量在 gnuplot 命令行中输入的时间。

其他一些评论：

1）当数据文件中的 y 值更大时，您将 yrange 设置为 0:65535。

2) 看起来您正试图从数据文件的第一列中提取 UNIX 格式的时间。为此，您需要`set timefmt '%s'`我上面的那条线。但是，数据文件中的时间数据似乎无处不在，y 数据也是如此。

3) 一开始不需要这个`reset`命令，因为这样运行 gnuplot 会创建一个新的 gnuplot 实例，所以没有什么需要重置的。

4) 你也有没有'.txt'扩展名的'print_1012720'；我不确定这是您的错误。

# ruby-on-rails - 不能在对虾中旋转桌子

> ID：11060963
> 
> 赞同：2
> 
> 时间：2012-06-16T05:01:22.900
> 
> 标签：ruby-on-rails, ruby-on-rails-3, pdf-generation, prawn

我正在尝试将一个大表放在一个 pdf 文件中，该文件最终将用于打印输出。

我想水平渲染该表，但找不到任何选项。

我尝试使用旋转文本

```
pdf.text "text", :rotate => 90 
```

但我不能在单元格中使用它。有没有其他方法可以解决这个问题？

我正在使用虾 0.12.0 和 rails 3.2.0

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T18:38:38.197

如果您可以将该表格移动到它自己的页面，只需创建一个横向页面并忽略任何文本旋转。

```
pdf.start_new_page(:layout => :landscape) 
```

（是一条评论，但不能将其作为答案，以便其他人可以将其视为已回答，并且 CodeMaster 可以保持 100% 的回答率……我在想什么？）

# java - 玩！框架 2.0 crud 模块

> ID：11060964
> 
> 赞同：11
> 
> 时间：2012-06-16T05:01:26.803
> 
> 标签：java, frameworks, playframework-2.0, crud

我使用 play 2.0.1 来构建我的应用程序。到目前为止，我还使用 Ebean 作为后端层，使用 mysql 作为数据库。Java 作为语言。

问题：

没有 CRUD 模块（动态）或 crud 创建模块吗？我在互联网上查找，很难找到有关新游戏框架 2.x 的信息。

根据这个线程没有... [[play-framework] [2.0] CRUD Administration](https://groups.google.com/forum/#!msg/play-framework/0g7YhdzA6Fs/xXSoW25X4ekJ)。

但有些答案是旧的。也许有些事情正在酝酿中？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T23:38:37.297

游戏 2 中没有垃圾。这是您的选择：

*   示例代码。前端的“ZenTasks”、后端的“计算机数据库”和表单内容的“表单”等示例包含可以快速操作的示例代码。不如真正的垃圾好，但你可以得到你能得到的。
    [http://www.playframework.org/documentation/2.0/Samples](http://www.playframework.org/documentation/2.0/Samples)

*   闪光8。来自论坛的当前建议是使用glender8。将此视为特定于游戏的 crud 替换的示例 [https://github.com/k33g/play-java-lazy.g8](https://github.com/k33g/play-java-lazy.g8)

*   cato-crud 生成器。我注意到了这一点。可以检查一下：[http ://alvinalexander.com/scala/crud-forms-play-framework-2-cato-crud-generator](http://alvinalexander.com/scala/crud-forms-play-framework-2-cato-crud-generator)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T20:05:13.700

我已经为 Play2 实现[了这个](https://github.com/hakandilek/play2-crud)简单的 CRUD 库。您可以从库中扩展通用 DAO 对象，并将它们传递给通用 CRUD 或 API (JSON) 控制器。您只需要编写模板代码，如果您从示例中操作它们，这将非常容易。也适用于 Guice 注射器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-19T06:23:40.370

我也尝试过简单的 CRUD 播放应用程序。

我创建了学生 CRUD。

你可以在[这里找到它](https://mahendrabagul@bitbucket.org/mahendrabagul/final-demo.git)

# c++ - 在函数参数中使用后增量

> ID：11060968
> 
> 赞同：10
> 
> 时间：2012-06-16T05:02:14.543
> 
> 标签：c++

当我运行此代码时，输​​出为 11、10。

为什么会这样？有人可以给我一个解释，希望能启发我吗？

谢谢

```
#include <iostream>
using namespace std;

void print(int x, int y)
{ 
    cout << x << endl;
    cout << y << endl;
}
int main()
{
    int x = 10;
    print(x, x++);
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-16T05:06:51.060

[C++ 标准](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2005/n1905.pdf)规定（第1.9.16 节中的注释）：

> 与不同参数表达式相关的值计算和副作用是无序的。

换句话说，在将参数的值传递给函数之前，参数的评估顺序是未定义的和/或编译器相关的。因此，在某些编译器（首先评估左参数）上，代码将输出`10, 10`，而在其他编译器（首先评估右参数）上，它将输出`11, 10`. 一般来说，你永远不应该依赖未定义的行为。

为了帮助您理解这一点，假设在调用函数之前对每个参数表达式进行评估（并不是说这正是它的实际工作方式，这只是一种简单的思考方式，可以帮助您理解排序）：

```
int arg1 = x;       // This line
int arg2 = x++;     // And this line can be swapped.
print(arg1, arg2); 
```

C++ 标准说两个参数表达式是无序的。所以，如果我们像这样在单独的行上写出参数表达式，它们的顺序应该不重要，因为标准说它们可以按任何顺序进行计算。一些编译器可能会按上述顺序评估它们，其他编译器可能会交换它们：

```
int arg2 = x++;     // And this line can be swapped.
int arg1 = x;       // This line
print(arg1, arg2); 
```

这使得它很明显如何`arg2`保持价值`10`，同时`arg1`保持价值`11`。

您应该始终避免在代码中出现这种未定义的行为。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-16T05:33:02.883

整体而言，声明：

```
 print(x, x++); 
```

导致***未定义的行为***。一旦程序具有未定义的行为，它就不再是有效的 C++ 程序，并且实际上任何行为都是可能的。因此，为这样的程序寻找推理是没有意义的。

* * *

> **为什么这是未定义的行为？**

让我们逐步评估程序，直到我们可以毫无疑问地证明它会导致***Undefined Behavior***。

函数参数的评估顺序是***未指定***^(的[参考 1])。

***未指定***意味着允许实现根据需要实现此特定功能，并且不需要记录有关它的详细信息。

将上述规则应用于您的函数调用：

```
print(x, x++); 
```

一个实现可能会将其评估为：

*   从左到右或
*   从右到左或
*   任何魔法命令（*如果函数参数超过两个*）

简而言之，您不能依赖实现来遵循任何特定顺序，因为根据 C++ 标准，它不是必需的。

***[在 C/C++ 中，如果没有中间序列点](http://en.wikipedia.org/wiki/Sequence_point)***^([Ref 2]) ，您不能多次读取或写入变量。如果这样做，则会导致未定义的行为。无论任何一个参数是否在所述函数中首先被评估，它们之间没有序列点，只有在评估所有函数参数后才会存在序列点^([Ref 3])。

在这种情况下`x`，在没有中间序列点的情况下进行访问，因此会导致未定义的行为。

简而言之，最好编写任何不调用此类***未定义行为***的代码，因为一旦这样做，您就无法期望此类程序有任何特定行为。

* * *

^([参考 1]) **C++03 标准§5.2.2.8**
**第 8 段：**

> [...] 函数参数的评估顺序**未指定**。[...]

* * *

^([参考 2]) **C++03 5 表达式 [expr]：**
**第 4 段：**

> ....
> **在前一个和下一个序列点之间，一个标量对象的存储值最多只能通过表达式的评估修改一次。此外，只能访问先验值以确定要存储的值**。对于完整表达式的子表达式的每个允许排序，都应满足本段的要求；**否则行为未定义**。

* * *

^([参考 3]) **C++03 1.9 程序执行 [intro.execution]：**
**第 17 段：**

> 调用函数时（无论该函数是否内联），**在对所有函数参数**（如果有）求值之后都有一个序列点，该序列点发生在函数体中的任何表达式或语句执行之前。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-16T05:04:54.540

x++ 是一个函数参数，它们可以按未指定的顺序进行评估，这意味着行为未定义且不可移植（或合法）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-16T05:23:31.860

我相信这与最后一个参数首先进入的函数调用堆栈有关。所以 x++ 是你的 y 而 x 是 print() 中的本地 x。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-05T05:03:22.533

迟到的答案。忽略评估顺序的问题，请注意 C++ 标准解释了后递增和后递减如何操作：“后递增和后递减创建对象的副本，递增或递减对象的值并返回副本从增加或减少之前开始。”

[https://en.cppreference.com/w/cpp/language/operator_incdec](https://en.cppreference.com/w/cpp/language/operator_incdec)

作为结果差异显着的示例，请考虑 std::list::splice，例如：

```
 mylist.splice(where, mylist, iter++); 
```

This will move the node pointed by *iter* to just before the node pointed by *where*. The sequence will be make a copy of *iter* to be passed to splice, increment *iter*, then call splice using the copy of *iter* before it was incremented. After splice returns, *iter* will point to the next node after the node *iter* originally pointed to, as opposed to the next node after *iter*'s new location in the list after it was moved.

# android - Moving AppWidgetProvider under different Package name breaks active widgets

> ID：11060972
> 
> 赞同：6
> 
> 时间：2012-06-16T05:03:05.527
> 
> 标签：android, android-widget, android-appwidget, appwidgetprovider

I have an AppWidgetProvider under package "com.developer.application"

I tried moving this AppWidgetProvider under package "com.developer.application.widgets" Upon doing so I updated all references in the AndroidManifest to accommodate the move.

After uploading the changes to the device, the widgets (associated with the aforementioned AppWidgetProvider) that were currently on the home screen break and just forever show the "Loading" graphic.

I know nothing is wrong with my pointers/package paths because if I re-add the widget to the home screen everything works fine.

So simply put, moving an AppWidgetProvider to a different package and updating all necessary references still breaks the active home screen widget(s).

Any ideas? Thank you!

Matt.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T06:34:02.163

I've also experienced that.

My guess is that the launcher saves the class name of the widget (including package name), so it just breaks when you change it.

# php - 在mysql中使用strpos？

> ID：11060976
> 
> 赞同：4
> 
> 时间：2012-06-16T05:04:20.077
> 
> 标签：php, mysql, database, string, function

我不确定这是否是使用 mysql 的正确功能，但我想知道是否有人可以帮助我解决我遇到的这个问题

前任：

我有这些值的mysql

```
id     name
1      house_home
2      movie_film
3      restaurant_food 
```

所以如果我试图找到`movie`，它应该得到值 movie_film。

strpos 函数是否适合这种情况？还是有其他方法？

```
$string = 'movie';
$query = $db->prepare("SELECT * FROM values WHERE name = ?";
$query->execute(array($string));
while($row = $query->fetch(PDO::FETCH_ASSOC)){
    echo $row['name']; //this should output movie_film
} 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-11-11T19:19:33.507

使用 strpos 您将获得该字符串的位置，然后修剪您想要的长度

使用`LOCATE('substring', 'mainstring')`功能

[http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_locate](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_locate)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T05:06:06.707

您可以`LIKE`在 SQL 中使用“运算符”。

`SELECT * FROM values WHERE name LIKE '%?%'`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T05:12:23.553

请尝试`LIKE operator`一下

```
SELECT * from values where name LIKE '%?%'; 
```

# php - 循环浏览mysql数据？

> ID：11060980
> 
> 赞同：-2
> 
> 时间：2012-06-16T05:04:56.573
> 
> 标签：php, mysql

我正在为有趣的图像创建一个网站。这些图像存储在服务器的文件中。我有一个数据库，其中包含所有这些图像的所有信息（文件中的名称、类型、视图、喜欢、不喜欢、报告等）。

我想使用该图像的名称作为我的 url `www.example.com/name_of_the_image`，当我单击图像时，它会将我带到下一个（图像页面），因此每个图像都有自己唯一的 url。

我已经尝试将图像的 id 从数据库传递到 url 并继续浏览图像，但这似乎是不专业的方式来做我想要实现的目标。

现在最好和最有效的方法是什么？有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T21:38:17.750

使用“蛞蝓”。数据库图像数据有一个额外的字段，称为 slug。每次上传图像时，都使用 slug 存储它（通常 slug 是小写的标题，带有下划线而不是空格）。然后使用 .htaccess 将您的 url 重写为使用 slug 检索信息的漂亮内容。www.host.com/images/cat_in_a_pickle_jar 指向 www.host.com/displayimage.php?slug=cat_in_a_pickle_jar

# c# - GetHashCode 功能

> ID：11060981
> 
> 赞同：0
> 
> 时间：2012-06-16T05:05:06.743
> 
> 标签：c#, .net

为什么两个对象的哈希码不相同，即使它们具有相似的值。在不读取每个属性并检查其他属性的情况下找到对象之间值相等的另一种最佳方法是什么？

```
 Person person = new Person();
                person.Name = "X";
                person.Age = 25;
                person.Zip = 600056;
                person.Sex = 'M';

                Person person1 = new Person();
                person1.Name = "X";
                person1.Age = 25;
                person1.Zip = 600056;
                person1.Sex = 'M';

                int hashCode1 = person1.Name.GetHashCode();
                int hashCode = person.Name.GetHashCode();

                // hashCode1 and hashCode values are same.

                if (person.GetHashCode() == person1.GetHashCode())
                {
                    // Condition is not satisfied
                } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T05:44:50.827

在你的代码中 hashCode1 == hashCode 是真的，因为散列相同的字符串总是会给你相同的结果。但是实例不同，因此您必须以适合您业务逻辑的方式覆盖 GetHashCode()

```
 public override int GetHashCode()
    {
        return Name.GetHashCode() ^ Zip.GetHashCode() ^ Sex ^ Age;
    } 
```

我建议你看看这个答案[GetHashCode Guidelines in C#](https://stackoverflow.com/questions/462451/gethashcode-guidelines-in-c-sharp)。

和[http://musingmarc.blogspot.com/2007/08/vtos-rtos-and-gethashcode-oh-my.html](http://musingmarc.blogspot.com/2007/08/vtos-rtos-and-gethashcode-oh-my.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T05:16:11.487

在您的示例中，两个对象相似但不相同。它们是不同的实例，因此它们具有不同的哈希码。person1 == person2 和 person1.Equals(person2) 也是错误的。

您可以覆盖此行为。如果您认为这两个对象在这些属性相等的情况下是相同的，那么您可以：

```
public override bool Equals(object other) {
    if(other == this) return true;

    var person = other as Person;
    if(person == null) return false;

    return person.Name == Name && person.Age == Age && person.Zip == Zip && person.Sex == Sex; 
```

 }

```
public override int GetHashCode() {
    //some logic to create the Hash Code based on the properties. i.e.
    return (Name + Age + Zip + Sex).GetHashCode(); // this is just a bad example!
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-16T05:09:41.710

> 为什么两个对象的哈希码不相同，即使它们具有相似的值

因为这是唯一识别它们的预期方式。AFAIK，大多数框架/库默认使用指针值。

> 在不读取每个属性并检查其他属性的情况下找到对象之间值相等的另一种最佳方法是什么？

根据您的需要，取决于使它们“相等”的原因。基本上它仍在比较属性，但可能更有限。

# vim - 如果缓冲区不为空，则 vim 拆分

> ID：11060984
> 
> 赞同：1
> 
> 时间：2012-06-16T05:05:40.513
> 
> 标签：vim

我尝试为打开 ~/.vimrc 创建一个映射，但仅在缓冲区为空时打开 ~/.vimrc，否则拆分并打开。
我试试这个

```
fun! BufferIsEmpty() "{{{                                                                
    if line('$') == 1 && getline(1) == ''                                                
        return 1                                                                         
    else                                                                                 
        return 0                                                                         
    endif                                                                                
endf "}}}                                                                                
fun! NotEmptySplit() "{{{                                                                
    if !BufferIsEmpty()                                                                  
        sp                                                                               
    endif                                                                                
    return                                                                               
endf                                                                                     
command! -nargs=0 NotEmptySplit call NotEmptySplit()  
nnoremap <silent><leader>ve :NotEmptySplit <bar> ~/.vimrc<CR> 
```

但我得到这个错误

```
E488: Trailing characters 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-16T08:34:23.380

进一步了解kev的出色答案：

如果缓冲区不为空，如何拉出一个通用的“在拆分中打开文件”功能。

```
fu! OpenInSplitIfBufferDirty(file)
    if line('$') == 1 && getline(1) == ''
        exec 'e' a:file
    else
        exec 'sp' a:file
    endif
endfu

nnoremap <silent> <leader>ve :call OpenInSplitIfBufferDirty($MYVIMRC)<cr>
command -nargs=1 -complete=file -bar CleverOpen :call OpenInSplitIfBufferDirty(<q-args>) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-16T05:31:07.717

添加`-bar`选项将修复`E488`错误。

```
command! -bar -nargs=0 NotEmptySplit call NotEmptySplit()
nnoremap <silent><leader>ve :NotEmptySplit <BAR> ~/.vimrc<CR> 
```

但它会引发另一个`E488`错误`<BAR> ~/.vimrc<CR>`。

* * *

我正在尝试重构您的代码：

```
fun! OpenVimrc()
    if line('$') == 1 && getline(1) == ''
        e $MYVIMRC
    else
        sp $MYVIMRC
    endif
endf

nnoremap <silent><leader>ve :call OpenVimrc()<CR> 
```

* * *

这些是一个称为`b:changedtick`跟踪变化计数器的变量。

# ruby-on-rails - Rails 嵌套表单 - 一对一和一对多嵌套

> ID：11060985
> 
> 赞同：1
> 
> 时间：2012-06-16T05:05:55.933
> 
> 标签：ruby-on-rails, forms, associations, nested-forms

我有一个问题，我很难解释它。这是我的模型：

```
class Company < ActiveRecord::Base
  has_one :publisher
  has_one :developer
end

class Publisher < ActiveRecord::Base
  belongs_to :company
  has_many :games
end

class Developer < ActiveRecord::Base
  belongs_to :company
  has_many :games
end

class Game < ActiveRecord::Base
  belongs_to :publisher
  belongs_to :developer
end 
```

基本上，公司可以是开发商或出版商或两者兼而有之。然后我可以打电话`Company.publisher.games`查看公司发布的所有游戏，并`Company.developer.games`查看他们开发的游戏。

问题是我不知道为此嵌套表单的最有效方法。

基本上，当我在 时`/company/new`，我想为公司创建一个表单，该表单又包含一个框，我可以在其中为公司的 Publisher 或 Developer 方面指定多个游戏 ID。我似乎无法弄清楚如何才能做到`@company.update_attributes(params[:company])`并采用嵌套形式并创建具有多个相关游戏的发行商和/或开发商。

# php - 如何根据mysql数据库中的数据自动调整文本框的大小？

> ID：11060986
> 
> 赞同：0
> 
> 时间：2012-06-16T05:05:58.797
> 
> 标签：php, mysql, html

我正在从 mysql 数据库中获取数据，并且在获取的数据中，文本框中有 4 个字段。

所以我想根据数据库中存在的总记录调整行的大小。

我用过这段代码：

```
<tr bgcolor="#DFEFFF">

    <td align="left" style="vertical-align:top;">
         <h3>Description</h3>
    </td>

    <td align="left">
         <textarea name="feature" id="features" rows="5" cols="74" 

         disabled style="background-color:#DFEFFF; border:none; color:#000; font-

          family:Arial, Helvetica, sans-serif; font-size:14px;">

         <?php echo $results['des']; ?>
         </textarea>
    </td>    
 </tr> 
```

如果我在 rows = "auto" 中使用 auto，那么它甚至不起作用。

请帮我在文本区域中自动显示。

我想，以防管理员使用复制粘贴方法插入数据，而不是在前端，textarea 将自动调整大小并包含数据库中存在的所有数据。

我仍在寻找这个答案。请回复 ..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T05:41:46.267

尝试这个..

```
#rtextarea { resize:vertical; max-height:300px; min-height:200px; }
#rtextarea.horiz { resize:horizontal; max-width:400px; min-width:200px; }
#rtextarea { resize:both; } 
```

# codeigniter - CodeIgniter 会话，我的 sess_time_to_update 是否过于频繁？（少于 15 秒）

> ID：11060988
> 
> 赞同：0
> 
> 时间：2012-06-16T05:06:24.873
> 
> 标签：codeigniter, session-cookies, codeigniter-2, php

我正在使用 CodeIgniter 2.1

我使用 CodeIgniter 的会话来处理用户是否登录。而且效果很好。我将会话存储到数据库中。这是我的一些会话变量：

`$config['sess_expiration'] = 3600;`
`$config['sess_expire_on_close'] = TRUE;`
`$config['sess_encrypt_cookie'] = TRUE;`
`$config['sess_use_database'] = TRUE;`
`$config['sess_table_name'] = 'user_sessions';`
`$config['sess_match_ip'] = FALSE;`
`$config['sess_match_useragent'] = FALSE;`
`$config['sess_time_to_update'] = 15;`

我使用如此低的`sess_time_to_update`增量是因为我需要一种方法来监控用户是否已关闭或导航离开页面。由于 CodeIgniter`last_activity`在每次更新（15 秒）时更新该列 - 为了检查空闲情况，我进行如下查询*（我知道这不是正确的语言/语法）*：

> `if last_activity < (current_time - 25s)`然后我知道用户可能已经离开了该页面。

这个概念很好，但我想知道如此频繁地更新会话表是否有任何看不见的问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T11:24:07.010

`if last_activity < (current_time - 25s)`仅表示在过去 25 秒内未发出任何请求，不一定表示用户已离开。

除非用户每 15 秒发出一次请求，否则最后一个活动实际上不会每 15 秒更新一次。例如，如果我打开一个页面并阅读它五分钟，最后一个活动将不会更新，直到下一个请求。

> 我想知道如此频繁地更新会话表是否有任何看不见的问题

只是更新会话表和刷新 cookie 的一点点开销。15 秒是一个非常小的时间范围，但如果这是你真正需要的，应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-18T05:14:57.020

如果您不想每五分钟更新一次会话，请执行以下更改。

转到中的`session.php`文件`System/libraries/Session.php`并将如下所有参数设置为空白。它对我有用。

```
public $sess_encrypt_cookie;
public $sess_use_database; 
```

# iphone - UITableView 单元格多行对齐

> ID：11060991
> 
> 赞同：2
> 
> 时间：2012-06-16T05:06:35.647
> 
> 标签：iphone, ios, uitableview

我已经看到这里发布的问题，询问如何左右对齐两个文本块，但是我怎样才能整齐地左右对齐多行单元格内的整个段落？（例如，如果您单击对齐按钮以使文本的左右两侧始终对齐，那么 MS Word 等会做什么）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T07:34:59.803

您还可以创建一个带有标签的自定义单元格，其中 IBOutlet 到此类可以在 github [OHAttributedLabel](https://github.com/AliSoftware/OHAttributedLabel/)上下载，然后尝试下面的代码

```
cell.label.textAlignment = UITextAlignmentJustify; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-16T05:13:13.660

这是你要找的吗？

```
yourTextLabel.textAlignment = UITextAlignmentCenter; 
```

以及您想要的文本标签的帧大小。

# c++ - ASN1 对象标识符名称

> ID：11060993
> 
> 赞同：1
> 
> 时间：2012-06-16T05:06:41.297
> 
> 标签：c++, c, openssl, asn.1

如何获取 X509_NAME_ENTRY 的对象标识符名称？

我的例子：

```
X509_NAME *subject = X509_get_subject_name(certificate);

for (i = 0; i < X509_NAME_entry_count(subject); i++)
{
    e =X509_NAME_get_entry(subject, i);
    OBJ_obj2txt(id, 200, e->object, 1);
            //id like '2.5.4.6,2.5.4.6'

    value = ASN1_STRING_data(e->value);

} 
```

对于标识符“2.5.4.6,2.5.4.6”，我想获得值“C”，对于“2.5.4.8,2.5.4.8”-“ST”等。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T12:56:18.943

它是

```
char long_name[512];
i2t_ASN1_OBJECT(long_name, sizeof(long_name), e->object); 
```

对于 OpenSSL 所谓的“ln”和

```
const char *short_name;
int nid = OBJ_ln2nid(long_name);
short_name = OBJ_nid2sn(nid); 
```

对于“sn”。

# python - 为什么 MySQLdb 安装无法在我的 64 位 Mac 上运行

> ID：11060996
> 
> 赞同：0
> 
> 时间：2012-06-16T05:06:58.303
> 
> 标签：python, pydev, mysql-python

```
>>> import MySQLdb
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "build/bdist.macosx-10.6-intel/egg/MySQLdb/__init__.py", line 19, in <module>
  File "build/bdist.macosx-10.6-intel/egg/_mysql.py", line 7, in <module>
  File "build/bdist.macosx-10.6-intel/egg/_mysql.py", line 6, in __bootstrap__
ImportError: dlopen(/Users/samwu/.python-eggs/MySQL_python-1.2.3-py2.7-macosx-10.6-intel.egg-tmp/_mysql.so, 2): no suitable image found.  Did find:
    /Users/samwu/.python-eggs/MySQL_python-1.2.3-py2.7-macosx-10.6-intel.egg-tmp/_mysql.so: mach-o, but wrong architecture 
```

我认为问题必须是python和mysql的64位版本，而img **_mysql.so**必须是32位

anybd可以给我一些建议吗

谢谢你！

**------追加1------**

我只是通过修改 setup_posix.py 中的**mysql_config.path = options['mysql_config']**来安装**MySQLdb**，然后像这样重建`python setup.py build`并安装，mysql_config 指向你的 mysql

**------追加2------**

我可以导入 MySQLdb，但它在 pydev 中不起作用

我在 python shell 中检查了 MySQLdb 模块的位置，如下所示：

```
import MySQLdb
print MySQLdb.__file__ 
```

**/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/MySQL_python-1.2.3-py2.7-macosx-10.6-intel.egg/MySQLdb/_ *init* _.pyc**

然后我将鸡蛋添加到我的 pydev lib.it 工作

[关闭]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T05:35:47.940

你安装了多个版本的python吗？它可能已安装到您的非默认版本，因此无法使用。