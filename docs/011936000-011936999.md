# StackOverflow 问答 11936000-11936999

# windows-7 - 挂钩受保护的进程

> ID：11936003
> 
> 赞同：3
> 
> 时间：2012-08-13T14:07:24.003
> 
> 标签：windows-7, hook

我知道受保护的进程都是关于保护的，完全是为了阻止我这样做，但我遇到了一个问题。

我的问题如下：

我正在构建一个安全工具，它应该在其他东西之间阻止某些服务的启动/停止等。

我这样做的方法是挂钩“services.exe”并绕过 RStartService 函数。它在 Windows XP SP3 上完美运行。

但当然，它不适用于我的 Windows 7 机器。我假设问题是“受保护的进程”机制。

有没有办法绕过这种保护？（签署我的申请或其他什么？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T18:39:15.093

问题**不是**受保护的进程，而是注射器的问题。

从 Windows Vista 开始，交互式应用程序不再在“会话 0”中运行，而“services.exe”确实在“会话 0”中运行。自大爆炸以来，跨会话挂钩被阻止（或 windows xp，我不确定哪个先出现）。这就像试图将软件挂接到不同的“远程桌面”会话上。

我的注入器是一个控制台应用程序，这意味着它在交互式应用程序会话中运行，这就是我得到**ERROR_ACCESS_DENIED**的原因。

一个快速的解决方法是将注入器转换为服务，因为服务在“会话 0”中运行。

# asp.net-mvc - 如何向 ASP.NET MVC 项目添加捆绑和缩小？

> ID：11936005
> 
> 赞同：1
> 
> 时间：2012-08-13T14:07:33.367
> 
> 标签：asp.net-mvc, asp.net-mvc-4, bundling-and-minification

我刚刚将一个 ASP.NET MVC 3 项目升级到 MVC 4，现在正在尝试向它添加捆绑和缩小工具。到目前为止，我已经通过 NuGet 安装了[Microsoft ASP.NET Web 优化框架](http://nuget.org/packages/microsoft.aspnet.web.optimization)，并在 Web.config 的 Razor 命名空间中添加了 System.Web.Optimization：

```
<system.web>
  ...
  <pages>
    <namespaces>
      ...
      <add namespace="System.Web.Optimization" />
      ...
    </namespaces>
  </pages>
  ...
</system.web> 
```

但是，@Styles 和 @Scripts 仍然不能在我的 Razor 视图 (*.cshtml) 中直接访问，我不得不在它们前面加上 System.Web.Optimization 命名空间。关于我缺少什么的任何线索？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T15:48:36.653

您在哪个 web.config 中添加了命名空间？视图文件夹中有一个，项目的根目录中有另一个。您必须在两者中添加名称空间。

# iphone - 从单词对象的 NSMutableArray 中创建一个干净的 NSString 单词，然后用于搜索

> ID：11936007
> 
> 赞同：0
> 
> 时间：2012-08-13T14:07:41.137
> 
> 标签：iphone, objective-c, ios

**suitsArray**是 MutableArray，在按钮处于选中状态时添加了对象（单词）。

在接下来的部分中，我需要将**suitsCriteriaString 设置**为一个*干净的字符串，其中单词与* **suitsArray 之间**只有一个空格，这意味着没有逗号或其他符号！（用 NSSet 什么的？）

```
NSString *suitsCriteriaString = [NSString stringWithFormat:@"%@", suitsArray];
NSString *wineSuitsString = [wine objectForKey:@"Suits"];
NSRange range = [wineSuitsString rangeOfString:suitsCriteriaString options:NSCaseInsensitiveSearch]; 
```

然后，如果操作正确，NSRange 应该检查 suitsCriteriaString 中的**单词****是否**存在于**wineSuitsString**中。然后，结果应该被过滤为只包含匹配的单词！

我的搜索功能的代码如下，如果您需要更多信息来完成这项工作，请告诉我。

* * *

**SearchViewController.h**

* * *

```
#import <UIKit/UIKit.h>

@interface SearchViewController : UIViewController {

@property (nonatomic, strong) NSMutableArray *allObjectsArray;
@property (nonatomic, strong) NSMutableArray *resultObjectsArray;

@property (nonatomic, strong) NSMutableArray *suitsArray;

@property (nonatomic, retain) IBOutlet UISlider *minPrisSlider;
@property (nonatomic, retain) IBOutlet UISlider *maxPrisSlider;

-(IBAction)searchButtonPressed:(id)sender;

@end 
```

* * *

**SearchViewController.m：**

* * *

填充所有对象数组：

```
- (void)viewDidLoad
{
[super viewDidLoad];

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *path = [documentsDirectory stringByAppendingPathComponent:@"Wine.plist"];
allObjectsArray = [[NSMutableArray alloc] initWithContentsOfFile:path];
} 
```

* * *

从 suitsArray 添加或删除对象，我有 10 个类似于此的按钮：

```
-(IBAction)lambButtonPressed:(id)sender
{
if (lambButtonSelected == 0) {

    lambButtonSelected = 1;
    [suitsArray addObject:@"lamb"];

} else {

    lambButtonSelected = 0;
    [suitsArray removeObject:@"lamb"];

}
} 
```

* * *

然后，将对象添加到搜索结果：

```
-(IBAction)searchButtonPressed:(id)sender{  

resultObjectsArray = [NSMutableArray array];
for(NSDictionary *wine in allObjectsArray)

    {

    //String for price
    NSString *winePrice = [wine objectForKey:@"Price"];        

    /*THIS IS WHERE I'M TRYING TO CHECK IF THE WORDS IN suitsCriteriaString
    ARE EXISTING IN wineSuitsString */

    NSString *suitsCriteriaString = [NSString stringWithFormat:@"%@", suitsArray];
    NSString *wineSuitsString = [wine objectForKey:@"Suits"];
    NSRange range = [wineSuitsString rangeOfString:suitsCriteriaString options:NSCaseInsensitiveSearch];

    //THEN LAST, ADD OBJECTS WITH MATCH OF PRICE CRITERIA AND SUITS CRITERIA TO RESULTS:

    BOOL priceConditionGood = YES;
    if (minPrisSlider.value <= maxPrisSlider.value && (winePrice.floatValue < minPrisSlider.value || winePrice.floatValue > maxPrisSlider.value))
        priceConditionGood = NO;
    if (range.location != NSNotFound && priceConditionGood)
        [resultObjectsArray addObject:wine];
     }
     }

//AND PUSH RESULTS CONTROLLER:

ResultsTableViewController *nextController = [[self storyboard] instantiateViewControllerWithIdentifier:@"ResultsController"];
nextController.objectsArray = [[NSMutableArray alloc]initWithArray:resultObjectsArray];
[self.navigationController pushViewController:nextController animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:12:20.333

您可以使用 componentsJoinedByString: 方法来做到这一点：

```
NSString *suitsCriteriaString = [suitsArray componentsJoinedByString:@" "];
NSString *wineSuitsString = [wine objectForKey:@"Suits"];
NSRange range = [wineSuitsString rangeOfString:suitsCriteriaString options:NSCaseInsensitiveSearch]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T14:36:23.770

“suitsCriteriaString”不会给你你想要的。迭代“suitsArray”并比较每个单词会容易得多：

```
NSString *wineSuitsString = [wine objectForKey:@"Suits"];
BOOL foundMatch = true;
for (NSString *suit in suitsArray) {
  NSRange range = [wineSuitsString rangeOfString:suit options:NSCaseInsensitiveSearch];
  if (range.location == NSNotFound) {
    foundMatch = false;
    break;
  }
} 
```

# asp.net-mvc-3 - 用于 Solr 分析的 Zabbix

> ID：11936008
> 
> 赞同：1
> 
> 时间：2012-08-13T14:07:46.220
> 
> 标签：asp.net-mvc-3, solr, profiling, windows-server-2008, zabbix

不确定这是否可以完成？或者可能有人已经这样做了。

我想监控应用程序，特别是 Zabbix 上的 Solr？它在 Windows 服务器上。Zabbix 监控 JVM，这没有问题。它是否像任何具有执行时间详细信息的应用程序分析器一样提供配置文件信息？

此外，我在同一台服务器上也有 asp.net c# mvc3 应用程序。我可以使用 Zabbix 监控/配置文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T09:04:15.163

通过使用 Zabbix 2.0 及更高版本中的 JMX 功能，我们非常有效地使用 Zabbix 监控 Solr。按照说明使用 Zabbix 设置[JMX，](https://www.zabbix.com/documentation/2.0/manual/config/items/itemtypes/jmx_monitoring)然后指向您的 Solr 实例。Solr 默认启用 JMX。

# abap - 为什么第二个 CREATE OBJECT 会生成一个简短的转储？

> ID：11936016
> 
> 赞同：1
> 
> 时间：2012-08-13T14:07:55.457
> 
> 标签：abap

我有以下情况。

具有本地接口定义的包含

```
*&---------------------------------------------------------------------*
*&  Include           ZZZ_INCL_INTERFACE
*&---------------------------------------------------------------------*

INTERFACE lif_test.
  METHODS:
    test.
ENDINTERFACE.                    "lif_test 
```

使用此包含并定义实现此接口的类的报告。

```
*&---------------------------------------------------------------------*
*& Report  ZZZ_IMPL_A
*&
*&---------------------------------------------------------------------*
*&
*&
*&---------------------------------------------------------------------*

REPORT zzz_impl_a.

INCLUDE zzz_incl_interface.

*----------------------------------------------------------------------*
*       CLASS lcl_test_a DEFINITION
*----------------------------------------------------------------------*
*
*----------------------------------------------------------------------*
CLASS lcl_test_a DEFINITION FINAL.
  PUBLIC SECTION.
    INTERFACES:
      lif_test.
ENDCLASS.                    "lcl_test_a DEFINITION

*----------------------------------------------------------------------*
*       CLASS lcl_test_a IMPLEMENTATION
*----------------------------------------------------------------------*
*
*----------------------------------------------------------------------*
CLASS lcl_test_a IMPLEMENTATION.
  METHOD lif_test~test.
  ENDMETHOD.                    "lif_test~test
ENDCLASS.                    "lcl_test_a IMPLEMENTATION 
```

第二个报告也使用此包含并定义了一个新类，该类也实现了包含中定义的相同接口。

```
*&---------------------------------------------------------------------*
*& Report  ZZZ_IMPL_B
*&
*&---------------------------------------------------------------------*
*&
*&
*&---------------------------------------------------------------------*

REPORT zzz_impl_b.

INCLUDE zzz_incl_interface.

*----------------------------------------------------------------------*
*       CLASS lcl_test_b DEFINITION
*----------------------------------------------------------------------*
*
*----------------------------------------------------------------------*
CLASS lcl_test_b DEFINITION FINAL.
  PUBLIC SECTION.
    INTERFACES:
      lif_test.
ENDCLASS.                    "lcl_test_b DEFINITION

*----------------------------------------------------------------------*
*       CLASS lcl_test_b IMPLEMENTATION
*----------------------------------------------------------------------*
*
*----------------------------------------------------------------------*
CLASS lcl_test_b IMPLEMENTATION.
  METHOD lif_test~test.
  ENDMETHOD.                    "lif_test~test
ENDCLASS.                    "lcl_test_b IMPLEMENTATION

CLASS lcl_main DEFINITION FINAL CREATE PRIVATE.
  PUBLIC SECTION.
    CLASS-METHODS:
      main.
ENDCLASS.

CLASS lcl_main IMPLEMENTATION.
  METHOD main.
    DATA:
      l_rif_test TYPE REF TO lif_test.

    CREATE OBJECT l_rif_test TYPE ('\PROGRAM=ZZZ_IMPL_B\CLASS=LCL_TEST_B').
    CREATE OBJECT l_rif_test TYPE ('\PROGRAM=ZZZ_IMPL_A\CLASS=LCL_TEST_A').
  ENDMETHOD.
ENDCLASS.

END-OF-SELECTION.
  lcl_main=>main( ). 
```

该行`CREATE OBJECT l_rif_test TYPE ('\PROGRAM=ZZZ_IMPL_A\CLASS=LCL_TEST_A')`生成一个简短的转储，说明动态创建的对象不是`lif_test`. 有人能解释一下为什么会这样吗？它看起来像是语言定义中的一个大漏洞。从一开始就停止任何讨论：不，我不能使用接口的字典定义。

编辑：尝试转换第二个创建的对象的实例时，会获得更具描述性的简短转储`CREATE OBJECT`。

```
DATA:
  l_rcl_object TYPE REF TO object.
*...
CREATE OBJECT l_rcl_object TYPE ('\PROGRAM=ZZZ_IMPL_A\CLASS=LCL_TEST_A').
l_rif_test ?= l_rcl_object. 
```

短转储有它

```
The content of the source variable does not fit in the target variable.
Source type: "\PROGRAM=ZZZ_IMPL_A\CLASS=LCL_TEST_A"
Target type: "\PROGRAM=ZZZ_IMPL_B\INTERFACE=LIF_TEST" 
```

看起来当我在两个地方包含接口的本地定义时，它们变成了两个单独的定义，一个是 program `ZZZ_IMPL_B`，另一个是`ZZZ_IMPL_A`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T17:34:14.037

这种行为的原因是 INCLUDE 就是这样做的——它在 INCLUDE 语句的点包含了 include 的内容，从开发人员的角度来看，这比复制和粘贴要好一些，但就系统而言是一样的担心的。您会在不同的程序中获得两个相同但不相同的接口定义。一种解决方案可能是生成包含接口的报告、子程序池、函数池或模块池。这些程序类型会生成自己的负载，因此您将获得一个接口 \PROGRAM=ZZZ_MY_SUBROUTINE_POOL\INTERFACE=LIF_TEST，然后您可以从其他程序中使用该接口。请注意，您仍然必须将此子例程池写入存储库，仅将其保存在本地无济于事。

（除此之外，为什么不生成全局接口和类是一个选项？）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T15:20:54.783

您应该将您的 A 类和 B 类定义和实现放在单独的包含中，并将这些与接口一起包含在包含您的主类的报告中。像这样：

```
report zzz_impl.

include zzz_incl_interface.
include zzz_incl_a.
include zzz_incl_b.

class lcl_main definition final create private.
  public section.
    class-methods:
      main.
endclass.

class lcl_main implementation.
  method main.
    data l_rif_test type ref to lif_test.

    create object l_rif_test type lcl_test_b.
    create object l_rif_test type lcl_test_a.
  endmethod.
endclass.

end-of-selection.
  lcl_main=>main( ). 
```

shortdump 的原因是因为您尝试使用类型为 \PROGRAM=ZZZ_IMPL_B \INTERFACE=LIF_TEST 的**变量**来引用实现 \PROGRAM=ZZZ_IMPL_A \INTERFACE=LIF_TEST 的**对象**。

* * *

编辑：我不完全确定您的评论是什么意思，但也许为您的用例生成整个报告是可能的？例如：

```
report zzz_impl_gen.

data source_interface type standard table of char255.
append `interface lif_test.` to source_interface.
append `  methods:` to source_interface.
append `    test.` to source_interface.
append `endinterface.` to source_interface.

data source_class_a type standard table of char255.
append `class lcl_test_a definition final.` to source_class_a.
append `  public section.` to source_class_a.
append `    interfaces:` to source_class_a.
append `      lif_test.` to source_class_a.
append `endclass.` to source_class_a.
append `class lcl_test_a implementation.` to source_class_a.
append `  method lif_test~test.` to source_class_a.
append `  endmethod.` to source_class_a.
append `endclass.` to source_class_a.

data source_class_b type standard table of char255.
append `class lcl_test_b definition final.` to source_class_b.
append `  public section.` to source_class_b.
append `    interfaces:` to source_class_b.
append `      lif_test.` to source_class_b.
append `endclass.` to source_class_b.
append `class lcl_test_b implementation.` to source_class_b.
append `  method lif_test~test.` to source_class_b.
append `  endmethod.` to source_class_b.
append `endclass.` to source_class_b.

data source_main type standard table of char255.
append `class lcl_main definition final create private.` to source_main.
append `  public section.` to source_main.
append `    class-methods:` to source_main.
append `      main.` to source_main.
append `endclass.` to source_main.
append `class lcl_main implementation.` to source_main.
append `  method main.` to source_main.
append `    data l_rif_test type ref to lif_test.` to source_main.
append `    create object l_rif_test type lcl_test_b.` to source_main.
append `    create object l_rif_test type lcl_test_a.` to source_main.
append `    write: / 'Hello, World!'.` to source_main. " Just to test if it works
append `  endmethod.` to source_main.
append `endclass.` to source_main.

data source_form type standard table of char255.
append `form main.` to source_form.
append `  lcl_main=>main( ).` to source_form.
append `endform.` to source_form.

data source_all type standard table of char255.
append `program subpool.` to source_all.
append lines of source_interface to source_all.
append lines of source_class_a to source_all.
append lines of source_class_b to source_all.
append lines of source_main to source_all.
append lines of source_form to source_all.

data generated_program type string.
data message type string.
data sid type string.
generate subroutine pool source_all name generated_program message message shortdump-id sid.

perform ('MAIN') in program (generated_program) if found. " Important, subroutine name must be in upper case! 
```

# ruby-on-rails - Rails 选择标签

> ID：11936017
> 
> 赞同：0
> 
> 时间：2012-08-13T14:07:55.753
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我正在尝试显示带有选择标签的性别模型。这是我的模型

```
Customer        Gender
ID              Id
First           Customer_id
Last            description
Email
Password

Customer
  has_one :gender
Gender
  belongs_to :customer 
```

这是我的选择标签 atm

```
<%= collection_select(:gender, :id, Gender.all, :id, :description) %> 
```

但它向我显示了以下错误

```
NoMethodError in Customers#edit

Showing /home/jean/rail/map/app/views/customers/_general.html.erb where line #23 raised:

undefined method `id' for []:Array
Extracted source (around line #23):

20:     
21:     <%= #collection_select(:gender, :description, @genders, :id, :description)
22:     %>
23:     <%= collection_select(:gender, :id, Gender.all, :id, :description) %>
24: 
25:     <div class="customer_edit_name">
26:             <%= f.label "Birthday" %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:15:40.943

我希望您尝试在客户表单中添加一个性别复选框。如果是这样，它应该是

> collection_select(:customer, :gender_id, Gender.all, :id, :description)

# linux - 分段错误处理程序中的分段错误

> ID：11936020
> 
> 赞同：4
> 
> 时间：2012-08-13T14:08:14.373
> 
> 标签：linux, segmentation-fault

Linux下的分段故障处理程序中发生的分段故障是否有一些定义的行为？是否会再次调用同一个处理程序？如果是这样，在所有平台上，它是否已定义等等。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T14:51:11.143

答案取决于您如何安装信号处理程序。如果您使用已弃用的[`signal()`](http://linux.die.net/man/2/signal)调用安装了信号处理程序，那么它会将信号处理程序重置为默认处理程序，或者在调用信号处理程序之前阻止正在处理的信号。如果它阻塞了信号，它将在信号处理程序返回后解除阻塞。

如果使用[`sigaction()`](http://linux.die.net/man/2/sigaction)，则可以控制在调用信号处理程序时阻止哪些信号。如果您如此指定，则可能导致无限递归。

可以实现一个安全的包装器`sigaction()`，其 API 类似于`signal()`：

```
sighandler_t safe_signal (int sig, sighandler_t h) {
    struct sigaction sa;
    struct sigaction osa;
    sa.sa_handler = h;
    sigemptyset(&sa.sa_mask);
    sa.sa_flags = 0;
    if (sigaction(sig, &sa, &osa) < 0) {
        return SIG_ERR;
    }
    return osa.sa_handler;
} 
```

这会在信号处理程序调用期间阻塞所有信号，在信号处理程序返回后恢复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T14:35:10.353

从`C-11`标准, `7.14.1.1`,

> 当一个信号出现并且func指向一个函数时，实现定义是否等价于signal(sig, SIG_DFL); 被执行或实现阻止某些实现定义的信号集（**至少包括 sig**）发生，直到当前信号处理完成；

所以标准说它是实现定义的，它是否允许递归调用相同的信号处理程序。*所以我会得出结论，行为已定义，但实现已定义*！

但是，如果段错误处理程序本身就是段错误，那将是一团糟：)

# ember.js - 使用来自不同模板的相同车把动作助手 - 最佳实践是什么

> ID：11936023
> 
> 赞同：2
> 
> 时间：2012-08-13T14:08:25.263
> 
> 标签：ember.js, handlebars.js

我有一个 ember.js 应用程序。**它使用posts.handlebars**显示对象列表（我们称它们为*Post*对象）。每个列表项都包含一个链接，用于显示该*帖子*的详细信息（**post.handlebars**）。*列表项和详细信息页面都包含一个删除链接，该链接从Posts*集合中删除该对象。由于除了显示链接的标签之外在实现上没有区别，因此保持 DRY 是有意义的。

 ******当前代码正在运行：

```
# router
App.Router = Em.Router.extend({
  ...
  "delete": function(router, event) {
    var post = event.context;
    if (confirm("Are you sure you want to delete the post with title '" + (post.get('title')) + "'?")) {
      post.deleteRecord();
      post.store.commit();
      App.router.transitionTo('posts.index');
    }

  }
});

# posts.handlebars
<ul>
{{#each post in controller}}
  <li>
    {{post.title}}
    <a {{action delete post}}>x</a>
  </li>
{{/each}}
</ul>

# post.handlebars
<p>{{title}}</p>
<a {{action delete content}}>Destroy</a> 
```

但我不想重复包含**删除**操作的代码。

我的下一个最佳猜测是定义一个视图并在两个模板中重新使用它。但是，现在我无法通过将*Post*对象作为上下文传递给操作，方法是将其移动到视图（我可能正在做某事）。通过将事件从路由器移动到视图，我得到了它的工作，但这感觉不对。

我目前的解决方案如下所示：

```
App.DeletePostView = Em.View.extend({
  mouseUp: function(event) {
    var id, post;
    id = this.get('content.id');
    post = App.Post.find(id);
    if (confirm("Are you sure you want to delete the post with title '" + (post.get('title')) + "'?")) {
      post.deleteRecord();
      post.store.commit();
      App.router.transitionTo('posts.index');
    }
  }
});

# posts.handlebars
<ul>
{{#each post in controller}}
  <li>
        {{post.title}}
        {{#view App.DeletePostView contentBinding="post"}}
            x
        {{/view}}
    </li>
{{/each}}
</ul>

# post.handlebars
<p>{{title}}</p>
<div>
    {{#view App.DeletePostView contentBinding="this"}}
        Destroy
    {{/view}}
</div> 
```

如果我想重新使用车把动作助手，有谁知道是否有更好的方法？******

# git - 在 git 中合并从 Master 到 Remote 分支的更改

> ID：11936031
> 
> 赞同：3
> 
> 时间：2012-08-13T14:08:41.177
> 
> 标签：git, merge

我创建了远程分支名称 REMOTE1 并进行了更改并更新了 REMOTE1。同样，我的同事们也在 MASTER 上工作并进行了大量的更改。

现在我必须将远程/MASTER 的更改合并到远程/REMOTE1。

任何人都可以帮助我在这种情况下遵循最佳工作流程。我尝试了以下步骤

```
git checkout master

git pull

git checkout REMOTE1

git rebase master 
```

这么多合并冲突，我已经解决了......

当我尝试 git status

```
# On branch REMOTE1
# Your branch and 'origin/REMOTE1' have diverged,
# and have 16 and 10 different commit(s) each, respectively.
# 
```

我不确定这是什么意思？？？

然后我尝试推入我的远程分支 REMOTE1 并收到以下错误

```
 ! [rejected]        HEAD -> REMOTE1 (non-fast-forward)
To prevent you from losing history, non-fast-forward updates were rejected
Merge the remote changes before pushing again.  See the 'Note about
fast-forwards' section of 'git push --help' for details. 
```

在任何变基操作之前

```
--- A - B - C - D   MASTER
         \
         P - Q - R  REMOTE1 
```

完成上述步骤后

```
 MASTER     LOCAL REMOTE1
                |           |
--- A - B - C - D - P - Q - R    
        \
         P - Q - R   REMOTE1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:57:00.373

看起来您正在尝试使用与 origin/REMOTE1 上的更改不同的更改来推送 REMOTE1。在执行此操作之前，请尝试拉动 REMOTE1。首先，检查一下：

```
git checkout REMOTE1 
```

现在，在 REMOTE1 上，从以下位置提取更改`origin`：

```
git pull origin REMOTE1 
```

现在您已将本地 REMOTE1 与 origin/REMOTE1 同步。您可以从 master 重新调整更改并推送：

```
git checkout master
git rebase REMOTE1
git checkout REMOTE1
git push origin REMOTE1 
```

# magento - Magento 管理选项卡 ACL 问题

> ID：11936033
> 
> 赞同：1
> 
> 时间：2012-08-13T14:08:46.307
> 
> 标签：magento, tabs, admin, acl

我在管理系统中添加了一个选项卡-> 配置后端...我以前做过的事情没有问题。出于某种原因，当我尝试访问选项卡时收到 404（即使进入系统-> 配置时默认视图上显示了“选项卡”配置内容）。

我一直在使用 ACL ...将代码添加到 config.xml 文件中，并且尝试创建一个单独的 adminhtml.xml 文件......但它不会启动。请有人查看我的配置代码，看看我哪里出错了。我想我只是看不到它...代码盲...

```
<?xml version="1.0"?>
<config>
<modules>
    <Mworkz_Mavp>
        <version>0.1.0</version>
    </Mworkz_Mavp>
</modules>
<global>
    <!-- 
    <blocks>
        <micoavp><class>Mworkz_Micoavp_Block</class></micoavp>
        <catalog>
            <rewrite>
                    <product_view_type_configurable>Bsm_Micoavp_Block_Configurable</product_view_type_configurable>
            </rewrite>
        </catalog>
    </blocks>

    <events>
            <catalog_product_save_after>
                <observers>
                    <micoavp>
                        <type>singleton</type>
                        <class>Mworkz_Micoavp_Model_Observer</class>
                        <method>Add_CustomOptions_Automatically</method>
                    </micoavp>
                </observers>
            </catalog_product_save_after>
     </events>
       -->  
</global>
<frontend>  
    <layout>
        <updates>
            <mworkz_mavp>
                <file>mworkz_mavp.xml</file>
            </mworkz_mavp>
        </updates>
    </layout>
</frontend>
<adminhtml>
    <acl>
        <resources>
            <all>
                <title>Allow Everything</title>
            </all>
            <admin>  <!--This is acl based on URL. If you see URL it would be /admin/system_config/ -->
                <children>
                    <system>
                        <children>
                           <config>
                                <children>
                                        <mavp translate="title">  <!-- This is name of the section created by us -->
                                            <title>Mico AVP ACL</title>  <!-- Title as shown in User->Roles->Permissions Window -->
                                            <sort_order>99</sort_order>
                                        </mavp>
                                 </children>
                            </config>
                        </children>
                    </system>
                </children>
            </admin>
        </resources>
    </acl>
</adminhtml> 
```

提前谢谢....肖恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T19:04:52.133

我使用的是小节名称（avp），而不是部分名称（mworkz）。

所以改变：

```
<mavp translate="title">  ...  </avp> 
```

至：

```
<mworkz translate="title">  ...  </mworkz> 
```

# google-app-engine - NDB 成员资格查询（“IN”操作）性能是否会因许多可能的值而降低？

> ID：11936035
> 
> 赞同：5
> 
> 时间：2012-08-13T14:08:54.987
> 
> 标签：google-app-engine, google-cloud-datastore, app-engine-ndb

查询操作 的[文档](https://developers.google.com/appengine/docs/python/ndb/queries#neq_and_in)`IN`指出，这些查询是作为大 OR'ed 相等查询实现的：

```
qry = Article.query(Article.tags.IN(['python', 'ruby', 'php'])) 
```

相当于：

```
qry = Article.query(ndb.OR(Article.tags == 'python',
                           Article.tags == 'ruby',
                           Article.tags == 'php')) 
```

我目前正在为 GAE 项目建模一些实体，并计划使用这些具有许多可能值的成员查询：

```
qry = Player.query(Player.facebook_id.IN(list_of_facebook_ids)) 
```

where`list_of_facebook_ids`可以有成千上万的项目。

这种类型的查询会在列表中有数千个可能值时表现良好吗？如果不是，那么推荐的建模方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-13T19:30:45.123

这不适用于数千个值（事实上，我敢打赌它会从超过 10 个值开始降级）。我能想到的唯一选择是某种形式的预计算。您必须更改架构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-03T01:51:28.563

一种方法是创建一个名为 FacebookPlayer 的新模型，它是一个索引。这将由 facebook_id 键入。每当您添加新播放器时，您都会更新它。它看起来像这样：

```
class FacebookUser(ndb.Model):
    player = ndb.KeyProperty(kind='Player', required=True) 
```

现在您可以完全避免查询。你可以这样做：

```
# Build keys from facebook ids.
facebook_id_keys = []
for facebook_id in list_of_facebook_ids:
    facebook_id_keys.append(ndb.Key('FacebookPlayer', facebook_id))

keysOfUsersMatchedByFacebookId = []
for facebook_player in ndb.get_multi(facebook_id_keys):
    if facebook_player:
        keysOfUsersMatchedByFacebookId.append(facebook_player.player)
usersMatchedByFacebookId = ndb.get_multi(keysOfUsersMatchedByFacebookId) 
```

如果 list_of_facebook_ids 是数千个项目，您应该分批执行此操作。

# fortran - Fortran Mex 文件中的时序（通过使用自动并行化）

> ID：11936036
> 
> 赞同：0
> 
> 时间：2012-08-13T14:09:01.437
> 
> 标签：fortran, timing, mex

我目前正在尝试比较两个 Fortran 子例程的运行时。因此，我编写了 Matlab MEX 文件，以便更轻松地从那里访问代码。我做的第一件事是测量每个例程的单独调用时间（在 MEX 文件中）：

```
 CALL DTIME( TARRAY, TIME )

   CALL MY_PROGRAM1( ... )
   CALL DTIME( TARRAY, TIME ) 
```

和

```
 CALL DTIME( TARRAY, TIME )
   CALL MY_PROGRAM2( ... )
   CALL DTIME( TARRAY, TIME ) 
```

程序 1 为 1.53s，程序 2 为 0.93s。

现在，为了对 DTIME 分辨率不够好的小问题也进行计时，我将上面的调用放入一个循环中来解决问题，比如 10 次：

```
 CALL DTIME( TARRAY, TIME )
   DO 10 K = 1, 10
      CALL MY_PROGRAM1/2( ... )
10 CONTINUE
   CALL DTIME( TARRAY, TIME ) 
```

但是，现在我得到 Program 1 的 9.23s（现在应该像 15.3s）和 Program 2 的 9.16s，所以时间关系与上面的两个调用完全不同。

我有一台 4 核的 64 位 ubuntu 机器，所以我想程序 1 的 DO 循环中可能会有一些自动并行化。但似乎程序 2 没有这样做，即使我使用了相同的混合选项。有谁知道上面的问题可能是什么以及如何解决它（也许只是在上面的循环中阻止自动并行化？）？提前谢谢了！

马蒂亚斯

# sugarcrm - 如何使用 Sugarcrm 中的自定义模块添加自定义下拉列表

> ID：11936041
> 
> 赞同：0
> 
> 时间：2012-08-13T14:09:25.700
> 
> 标签：sugarcrm

我在使用自定义模块时遇到问题，我想在其中添加自定义下拉菜单。我想要的是为下拉列表预设几个项目，但让它显示在下拉编辑器中，以便管理员可以更改或向下拉列表添加更多项目。我已经玩了很长时间了，但无法让它工作。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:25:07.440

SugarCRM 似乎不允许您在另一个模块的（多）选择中使用模块的数据。尽管在模块之间设置了这样的关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T01:18:26.450

听起来像 Sugar 6.5 中的 Dependent Dropdowns 是您正在寻找的...

[http://developers.sugarcrm.com/wordpress/2012/05/03/new-for-sugar-6-5-create-dependent-dropdowns-using-sugar-logic-in-studio/](http://developers.sugarcrm.com/wordpress/2012/05/03/new-for-sugar-6-5-create-dependent-dropdowns-using-sugar-logic-in-studio/)

# asp.net-mvc - 如何使用 IIS7 将 ASP.NET MVC3 应用程序部署到本地主机

> ID：11936043
> 
> 赞同：1
> 
> 时间：2012-08-13T14:09:35.320
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我在教程中搜索了很多，但我现在很困惑。

1.  我用 VS2010 创建了一个名为 tile-shop2 的 ASP.MVC3 应用程序，
2.  安装IIS7，
3.  在默认网站部分的 IIS7 管理器中，使用 ASP.NET V4.0 应用程序池创建了一个名为 tile-shop2 的新应用程序，物理路径是创建应用程序的位置（文档、Visual Studio 2010、项目...）
4.  在VS2010中，右键单击项目名称并单击发布，
5.  在 VS2010 中的项目菜单 => tile-shop2 属性 => Web => 服务器 => 勾选使用本地 IIS Web 服务器

当我运行 VS 时，我看到了这个窗口：

![在此处输入图像描述](../Images/f314f8ef6d2b7a50b9e592e31da15397.png)

当在浏览器中搜索 localhost/tile-shop2 时，我在解决方案资源管理器中看到了目录列表，当我单击其中一个时，出现错误 404.8。（我运行 aspnet_regiis 并且 IIS7 自己运行）有人可以告诉我这里有什么问题吗？非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T14:34:55.660

听起来 IIS 应用程序指向的是包含您的 Web 项目的文件夹，而不是已发布的 Web 项目内容。

您想在 IIS 根目录 ('C:\inetpub\MyProject') 中创建一个文件夹，并将 IIS 应用程序的物理路径指向同一个发布文件夹，而不是 Visual Studio 项目文件夹。然后，您需要使用 Visual Studio 将网站发布到此文件夹。

# android - Android AsyncTask [无法在未调用 Looper.prepare() 的线程内创建处理程序]

> ID：11936048
> 
> 赞同：29
> 
> 时间：2012-08-13T14:10:05.877
> 
> 标签：android, android-asynctask, android-handler, android-looper

我已经创建了一个`AsyncTask`基于函数的图像上传。上传后，我在`onPostExecute()`. 我阅读了一些 StackOverflow 的答案，`Runnable`尽管实施了不同的解决方案，但我仍然一遍又一遍地收到错误。

我的代码：

```
class uploadFile extends AsyncTask<String, String, String> {
    private ProgressDialog pDialog;

    /**
     * --------------------------------------------------------------------
     * --------------------------------- Before starting background thread
     * Show Progress Dialog
     */
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(MainActivity.this);
        pDialog.setMessage("Uploading file");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(false);
        pDialog.show();
    }

    /**
     * --------------------------------------------------------------------
     * --------------------------------- getting all recent articles and
     * showing them in listview
     */
    @Override
    protected String doInBackground(String... args) {
        HttpURLConnection conn = null;
        DataOutputStream dos = null;
        DataInputStream inStream = null;
        String existingFileName = Environment.getExternalStorageDirectory()
                .getAbsolutePath() + "/mypic.png";
        String lineEnd = "\r\n";
        String twoHyphens = "--";
        String boundary = "*****";
        int bytesRead, bytesAvailable, bufferSize;
        byte[] buffer;
        int maxBufferSize = 1 * 1024 * 1024;
        String serverResponseMessage = "";
        String urlString = "http://google.info/imgupl/index.php";
        try {
            // ------------------ CLIENT REQUEST
            FileInputStream fileInputStream = new FileInputStream(new File(
                    existingFileName));
            // open a URL connection to the Servlet
            URL url = new URL(urlString);
            // Open a HTTP connection to the URL
            conn = (HttpURLConnection) url.openConnection();
            // Allow Inputs
            conn.setDoInput(true);
            // Allow Outputs
            conn.setDoOutput(true);
            // Don't use a cached copy.
            conn.setUseCaches(false);
            // Use a post method.
            conn.setRequestMethod("POST");
            conn.setRequestProperty("Connection", "Keep-Alive");
            conn.setRequestProperty("Content-Type",
                    "multipart/form-data;boundary=" + boundary);
            dos = new DataOutputStream(conn.getOutputStream());
            dos.writeBytes(twoHyphens + boundary + lineEnd);
            dos.writeBytes("Content-Disposition: form-data; name=\"uploadedfile\";filename=\""
                    + existingFileName + "\"" + lineEnd);
            dos.writeBytes(lineEnd);
            // create a buffer of maximum size
            bytesAvailable = fileInputStream.available();
            bufferSize = Math.min(bytesAvailable, maxBufferSize);
            buffer = new byte[bufferSize];
            // read file and write it into form...
            bytesRead = fileInputStream.read(buffer, 0, bufferSize);
            while (bytesRead > 0) {
                dos.write(buffer, 0, bufferSize);
                bytesAvailable = fileInputStream.available();
                bufferSize = Math.min(bytesAvailable, maxBufferSize);
                bytesRead = fileInputStream.read(buffer, 0, bufferSize);
            }
            // send multipart form data necesssary after file data...
            dos.writeBytes(lineEnd);
            dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);
            // close streams
            Integer serverResponseCode = conn.getResponseCode();
            serverResponseMessage = conn.getResponseMessage();
            Toast.makeText(getApplicationContext(), serverResponseMessage,
                    Toast.LENGTH_SHORT).show();
            Toast.makeText(getApplicationContext(),
                    serverResponseCode.toString(), Toast.LENGTH_SHORT)
                    .show();
            Log.e("Debug", "File is written");
            fileInputStream.close();
            dos.flush();
            dos.close();
        } catch (MalformedURLException ex) {
            Log.e("Debug", "error: " + ex.getMessage(), ex);
        } catch (IOException ioe) {
            Log.e("Debug", "error: " + ioe.getMessage(), ioe);
        }
        // ------------------ read the SERVER RESPONSE
        try {
            inStream = new DataInputStream(conn.getInputStream());

            while ((str = inStream.readLine()) != null) {
                Log.e("Debug", "Server Response " + str);
            }
            inStream.close();

        } catch (IOException ioex) {
            Log.e("Debug", "error: " + ioex.getMessage(), ioex);
        }
        return null;
    }

    /**
     * --------------------------------------------------------------------
     * --------------------------------- After completing background task
     * Dismiss the progress dialog
     **/
    protected void onPostExecute(String args) {
        // dismiss the dialog after getting all products
        pDialog.dismiss();
        MainActivity.this.runOnUiThread(new Runnable() {
            public void run() {
                Toast.makeText(MainActivity.this, "Hello", Toast.LENGTH_SHORT).show();
            }
        });

    }
} 
```

我的日志猫：

```
08-13 22:13:32.627: E/AndroidRuntime(9554): FATAL EXCEPTION: AsyncTask #1
08-13 22:13:32.627: E/AndroidRuntime(9554): java.lang.RuntimeException: An error occured while executing doInBackground()
08-13 22:13:32.627: E/AndroidRuntime(9554):     at android.os.AsyncTask$3.done(AsyncTask.java:200)
08-13 22:13:32.627: E/AndroidRuntime(9554):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
08-13 22:13:32.627: E/AndroidRuntime(9554):     at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
08-13 22:13:32.627: E/AndroidRuntime(9554):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
08-13 22:13:32.627: E/AndroidRuntime(9554):     at java.util.concurrent.FutureTask.run(FutureTask.java:138)
08-13 22:13:32.627: E/AndroidRuntime(9554):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
08-13 22:13:32.627: E/AndroidRuntime(9554):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
08-13 22:13:32.627: E/AndroidRuntime(9554):     at java.lang.Thread.run(Thread.java:1019)
08-13 22:13:32.627: E/AndroidRuntime(9554): Caused by: java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
08-13 22:13:32.627: E/AndroidRuntime(9554):     at android.os.Handler.<init>(Handler.java:121)
08-13 22:13:32.627: E/AndroidRuntime(9554):     at android.widget.Toast.<init>(Toast.java:68)
08-13 22:13:32.627: E/AndroidRuntime(9554):     at android.widget.Toast.makeText(Toast.java:231)
08-13 22:13:32.627: E/AndroidRuntime(9554):     at dev.google.imageupload.MainActivity$uploadFile.doInBackground(MainActivity.java:128)
08-13 22:13:32.627: E/AndroidRuntime(9554):     at dev.google.imageupload.MainActivity$uploadFile.doInBackground(MainActivity.java:1)
08-13 22:13:32.627: E/AndroidRuntime(9554):     at android.os.AsyncTask$2.call(AsyncTask.java:185)
08-13 22:13:32.627: E/AndroidRuntime(9554):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
08-13 22:13:32.627: E/AndroidRuntime(9554):     ... 4 more 
```

在 zapl 的建议后编辑：

```
08-13 22:38:06.297: E/AndroidRuntime(11511): FATAL EXCEPTION: AsyncTask #1
08-13 22:38:06.297: E/AndroidRuntime(11511): java.lang.RuntimeException: An error occured while executing doInBackground()
08-13 22:38:06.297: E/AndroidRuntime(11511):    at android.os.AsyncTask$3.done(AsyncTask.java:200)
08-13 22:38:06.297: E/AndroidRuntime(11511):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
08-13 22:38:06.297: E/AndroidRuntime(11511):    at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
08-13 22:38:06.297: E/AndroidRuntime(11511):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
08-13 22:38:06.297: E/AndroidRuntime(11511):    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
08-13 22:38:06.297: E/AndroidRuntime(11511):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
08-13 22:38:06.297: E/AndroidRuntime(11511):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
08-13 22:38:06.297: E/AndroidRuntime(11511):    at java.lang.Thread.run(Thread.java:1019)
08-13 22:38:06.297: E/AndroidRuntime(11511): Caused by: java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
08-13 22:38:06.297: E/AndroidRuntime(11511):    at android.os.Handler.<init>(Handler.java:121)
08-13 22:38:06.297: E/AndroidRuntime(11511):    at android.widget.Toast.<init>(Toast.java:68)
08-13 22:38:06.297: E/AndroidRuntime(11511):    at android.widget.Toast.makeText(Toast.java:231)
08-13 22:38:06.297: E/AndroidRuntime(11511):    at dev.google.imageupload.MainActivity$uploadFile.doInBackground(MainActivity.java:128)
08-13 22:38:06.297: E/AndroidRuntime(11511):    at dev.google.imageupload.MainActivity$uploadFile.doInBackground(MainActivity.java:1)
08-13 22:38:06.297: E/AndroidRuntime(11511):    at android.os.AsyncTask$2.call(AsyncTask.java:185)
08-13 22:38:06.297: E/AndroidRuntime(11511):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
08-13 22:38:06.297: E/AndroidRuntime(11511):    ... 4 more 
```

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-08-13T14:16:37.087

您正在尝试从后台线程更新 UI。将 toast 移动到`onPostExecute`在 UI 线程上执行的 （推荐），或者调用`runOnUiThread`.

```
runOnUiThread(new Runnable() {
    public void run() {
        // runs on UI thread
    }
}); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-13T14:38:54.843

> 在 dev.shaunidiot.imageupload.MainActivity$uploadFile.doInBackground(MainActivity.java:128)

您可以在任务运行时使用 s 的进度机制`AsyncTask`从内部更新 UI ：`doInBackground`

代替

```
Toast.makeText(getApplicationContext(), serverResponseMessage,
        Toast.LENGTH_SHORT).show();
Toast.makeText(getApplicationContext(),
        serverResponseCode.toString(), Toast.LENGTH_SHORT)
        .show(); 
```

在`doInBackground`与

```
publishProgress(serverResponseMessage, serverResponseCode.toString()); 
```

并将以下内容添加到您的`AsyncTask`实施中

```
@Override
protected void onProgressUpdate(String... values) {
    if (values != null) {
        for (String value : values) {
            // shows a toast for every value we get
            Toast.makeText(MainActivity.this, value, Toast.LENGTH_SHORT).show();
        }
    }
} 
```

您已经设置`String`为进度类型，`AsyncTask<Params, Progress, Result>`因此如果您想将进度用于不同的东西，您可以尝试使用`runOnUiThread`，但我不知道这是否可行。

# c# - 在 Telerik RadGrid 中，用户无法通过寻呼机上的文本框设置 PageSize，但可以通过下拉菜单

> ID：11936049
> 
> 赞同：1
> 
> 时间：2012-08-13T14:10:06.190
> 
> 标签：c#, asp.net, telerik, telerik-grid

我在各个页面中有许多 RadGrid，但其中一个特别大，现在当用户通过 Pager 文本字段更改页面大小时，它不会保留它：当网格完成更新时，它会重置页面大小变回原来的样子。如果我更改 PagerStyle.Mode 以显示下拉列表而不是文本字段，那么他们可以更改它就好了。`NextPrevNumericAndAdvanced`我可以在和之间来回更改它`NextPrevAndNumeric`，并且始终可以与下拉列表（`NextPrevAndNumeric`）一起使用，但不能与文本字段（`NextPrevNumericAndAdvanced`）一起使用。如果我使用显示为下拉列表的寻呼机修改页面大小，然后更改 aspx 以使用文本字段，然后它将页面大小锁定为我在下拉列表中选择的任何内容。

这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T14:30:59.867

原来`if (!Page.IsPostBack) ...`已从 中删除`Page_Load`，因此在每次回发时它都在重置东西。把它放回去解决了这个问题。

# java - 通过春天初始化我的工厂

> ID：11936050
> 
> 赞同：0
> 
> 时间：2012-08-13T14:10:15.967
> 
> 标签：java, spring, initialization, factory

我可以有如下工厂吗？

```
public class Factory
{
    private static Map<EnumXyz, IDAO> map = new HashMap<Sting, Object>();

    public static void init()
    {
        //how do i initialize my map through spring initialization
    }

    public static IDAO getDAO(EnumXyz dao)
    {
        if (map.containsKey(dao))
        return map.get(dao);
        else
        {
            throw new IllegalArgumentException("dao not supported " + dao);
        }

        return null;
    }

} 
```

1.  我如何通过 spring 来处理我的工厂的初始化？
2.  这种建厂方式正确吗？

3.  还有其他更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T14:13:28.023

1.  不要让一切都是静态的，尤其是 init() 方法。
2.  用注释你的 bean`@Component`
3.  用注释您的`init()`方法`@PostConstruct`。

现在，`init()`当 Spring 构造您的 Factory 类时，将调用该方法，为它提供一个初始化自身的钩子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T14:11:58.703

我会将您的工厂实例化为 bean 本身，并拥有它的一个*实例*- 不要让一切都成为静态的。Spring 本身可以控制您的 bean 是否为单例（默认为单例）。

例如

```
public class Factory {
   public Factory(final Map<String,Object} map) {
      this.map = map;
   }
} 
```

和你的 Spring 配置：

```
<bean id="myFactory" class="Factory">
   <constructor-arg>
      <util:map>
        <!-- configure your map here, or reference it as a separate bean -->
        <entry key="java.lang.String" value="key">....</entry>
      </util:map>
   </constructor-arg>
</bean> 
```

在您的构造函数中，传入在您的 Spring 配置中定义的映射。

# registry - 使用 NSIS 在注册表中搜索给定条目

> ID：11936054
> 
> 赞同：2
> 
> 时间：2012-08-13T14:10:38.950
> 
> 标签：registry, nsis

基本上，我的应用程序的 NSIS 在一个名为“path”的键中设置了一个名为“path”的注册表值，该键`SOFTWARE\APPLICATION_NAME VERSION_NUMBER`表示应用程序当前的安装位置。我现在尝试介绍检查是否安装了应用程序的先前版本以及是否提供使用先前设置的功能。如果安装了多个版本，用户将能够选择他希望从哪个版本中获取设置。我遇到的问题是在注册表中搜索以前安装的版本。由于我包含了 VERSION_NUMBER，因此可以找到路径的键对于每个版本都会发生变化，因此没有“一成不变”的搜索查询。

因此，例如，如果我从一开始就使用`SOFTWARE\APPLICATION_NAME`没有版本作为设置路径信息的位置，这将很容易，因为我可以检查该注册表值是否存在。一个理想的解决方案是能够使用通配符进行搜索并检索所有匹配的路径（例如`SOFTWARE\APPLICATION_NAME*`）。从现在开始，我确实可以停止插入“VERSION_NUMBER”，但这不会允许用户在下一个版本中保留他们当前的配置，而是在下一个版本中保留（如果他们首先从最新版本更新） ）。

我希望我的问题很清楚。如果有什么我可以澄清的，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T15:56:48.677

使用[EnumRegKey](http://anders_k.users.sourceforge.net/public/NSIS/2.46/Manual.html#enumregkey)和一些基本的字符串处理/比较...

# php - Magento 过滤器收集计数不正确

> ID：11936055
> 
> 赞同：1
> 
> 时间：2012-08-13T14:10:39.570
> 
> 标签：php, magento

下面的代码我试图创建一个产品集合并对其进行过滤，但是，它没有给我一个准确的产品数量，我不知道为什么。

```
$collection = Mage::getModel('catalog/product')->getCollection();
$collection->addAttributeToSelect('*')
        ->joinField('category_id', 'catalog/category_product', 'category_id', 'product_id = entity_id', null, 'left')
        ->addFieldToFilter(array(
                array('attribute'=>'distributor','in'=>array(intval($distributor))),

        ))
        ->addAttributeToFilter('category_id', array(
                array('finset' => strval($cat->getId())),
        ));
$count = $collection->getSize(); 
```

例如，我有一个包含大约 30 个产品的分销商过滤器的类别，但上面代码中的计数显示为 20。对于另一个有 3 个产品但计数返回 2 的类别也是如此。

更新：我自己使用 finset 解决了这个问题。请看下面我的回答

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T16:49:06.273

尝试从此集合中获取您的查询代码并直接在您的数据库上运行它。您可以检查查询是否正确。

尝试这个：

```
$collection->getSelect()->__toString(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T17:42:30.253

回答了我自己的问题。使用分配器的 finset，因为它是一个多选。

```
$collection = Mage::getModel('catalog/product')->getCollection();

                    $dists = array(
                      array(
                        "finset" => array(intval($distributor))
                      ),
                    );

                    $collection->addAttributeToSelect('*')
                    ->joinField('category_id', 'catalog/category_product', 'category_id', 'product_id = entity_id', null, 'left outer')
                    ->addAttributeToFilter("distributor", $dists)
                    ->addAttributeToFilter('category_id', array(
                         array('finset' => $cat->getId()),
                    ));
                    $collection->load();
                    $count = $collection->getSize(); 
```

# python - 蟒蛇：不能使用urlopen！来自 urllib、urllib2、clientcookie urlopen ssl 错误

> ID：11936056
> 
> 赞同：0
> 
> 时间：2012-08-13T14:10:40.593
> 
> 标签：python, django, urllib2, urllib, urlopen

我制作了一些代码来访问特定站点而不是用户。它与自动登录程序非常相似。我的程序从用户那里接收用户名和密码，并尝试使用数据和登录访问 url，返回登录结果。

这是代码。

```
from urllib import urlencode
from urllib2 import Request
from ClientCookie import urlopen, install_opener, build_opener

httpheaders = {'User-Agent' : 'Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1;)'}
y_url1 = 'http://www.xxx.kr/papp.jsp'
y_url2 = 'https://im.xxx.kr/sso/auth'

def check_valid_user(user_id, user_pw):
    values = {'ssousername': user_id, 'password': user_pw}
    data = urlencode(values)
    req = Request(y_url1, data, httpheaders)
    response = urlopen(req)
    the_page = response.read()
    token = the_page.split('"site2pstoretoken"')[1].split('"')[1]
    values = {'ssousername': user_id, 'password': user_pw, 'site2pstoretoken' : token}
    data = urlencode(values)
    req = Request(y_url2, data, httpheaders)
    response = urlopen(req)
    the_page = response.read()
    install_opener(build_opener())
    if the_page.find('Cyber') == -1:
        return False
    else:
        return True 
```

当我在我的 Windows 桌面上运行这个程序时，它运行良好。

但是当我在我的 ubuntu apache 服务器上运行这个程序时，它不起作用。（ubuntu 11.04，python 2.7.1）

我打开 django python shell 并尝试逐行调试 python manage.py shell

```
response = urlopen(req) 
```

此时，出现错误。

```
>>>response = urlopen(req)
Traceback (most recent call last):
  File "<console>", line 1, in <module>
  File "/usr/lib/python2.7/dist-packages/ClientCookie/_urllib2_support.py", line 824, in urlopen
    return _opener.open(url, data)
  File "/usr/lib/python2.7/urllib2.py", line 397, in open
response = meth(req, response)
  File "/usr/lib/python2.7/dist-packages/ClientCookie/_urllib2_support.py", line 626, in http_response
"http", request, response, code, msg, hdrs)
  File "/usr/lib/python2.7/urllib2.py", line 429, in error
result = self._call_chain(*args)
  File "/usr/lib/python2.7/urllib2.py", line 369, in _call_chain
result = func(*args)
  File "/usr/lib/python2.7/dist-packages/ClientCookie/_urllib2_support.py", line 154, in http_error_302
return self.parent.open(new)
  File "/usr/lib/python2.7/urllib2.py", line 391, in open
response = self._open(req, data)
  File "/usr/lib/python2.7/urllib2.py", line 409, in _open
'_open', req)
  File "/usr/lib/python2.7/urllib2.py", line 369, in _call_chain
result = func(*args)
  File "/usr/lib/python2.7/dist-packages/ClientCookie/_urllib2_support.py", line 724, in https_open
return self.do_open(httplib.HTTPSConnection, req)
  File "/usr/lib/python2.7/dist-packages/ClientCookie/_urllib2_support.py", line 694, in do_open
raise URLError(err)
URLError: <urlopen error [Errno 1] _ssl.c:499: error:14077417:SSL routines:SSL23_GET_SERVER_HELLO:sslv3 alert illegal parameter> 
```

有什么问题？请帮我.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:19:11.263

查看此错误报告[urllib 错误](http://bugs.python.org/issue11220)

看起来像下面的东西可能会解决它。

```
 import ssl
 https_sslv3_handler = urllib.request.HTTPSHandler(context=ssl.SSLContext(ssl.PROTOCOL_SSLv3))
 opener = urllib.request.build_opener(https_sslv3_handler)
 urllib.request.install_opener(opener) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T15:37:36.923

我会使用[请求](http://docs.python-requests.org/en/latest/index.html)而不是 urllib。语法更加简洁：

```
r = requests.get('https://your-url', auth=('user', 'pass')) 
```

您还可以添加标题：

```
headers = {'content-type': 'application/json'}
r = requests.get('https://your-url', auth=('user', 'pass'), headers=headers) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-08T13:00:48.537

您的服务器可能不支持 SSLv2，Python ssl 似乎默认使用它。

看看我在这里发布的解决方案，看看它是否对您有帮助：[https ://stackoverflow.com/a/24175862/41957](https://stackoverflow.com/a/24175862/41957)

# mysql - 根据两个固定条目删除双工字段

> ID：11936057
> 
> 赞同：0
> 
> 时间：2012-08-13T14:10:41.007
> 
> 标签：mysql, duplicates

下面是我在另一篇文章中找到的 SQL 命令，这对我来说是一个好的开始，但我对 SQL 了解不多，我主要只是使用 PHPMyAdmin 来做所有事情。但我有许多不同的领域要检查。我需要的是在选定的“Job_id”上找到任何双工条目，其中“日期”（时间戳字段）在给定用户“user_id”上是相同的。

```
SELECT varchar_col
FROM table
GROUP BY varchar_col
HAVING count(*) > 1; 
```

我希望我已经清楚了。如果我没有去过，请告诉我，我会尝试重新措辞！

格伦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T15:13:37.967

```
select job_id
from temp.new_table
where user_id=123
group by user_id, date
having count(*) > 1 
```

表数据

```
'1', '2012-08-13 20:40:21', '123' ||
'1', '2012-08-13 20:40:21', '123' ||
'2', '2012-08-13 20:40:21', '123' 
```

输出

```
job_id
 1 
```

我希望这是你想要的

# php - 在每个文件中包含标头 php

> ID：11936064
> 
> 赞同：2
> 
> 时间：2012-08-13T14:11:05.203
> 
> 标签：php, header, include

我正在尝试在我制作的每个页面中包含一个 php 标头。现在据我所知，可以通过`<?php include('header.php'); ?>`在每个文件中使用来完成。

现在我的问题是我有 5 个页面，并且在标题 php 中我有一个导航，它链接到每个页面。当我加载标题时，我想更改加载标题的文件的链接。

例如：如果我打开主页，我希望标题将标题导航内的链接加粗。这可能需要我在包含它或 smt 时将变量发送到头文件？如果是这样，那该怎么做？:D

提前谢谢你，丹尼尔！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T14:15:09.990

您始终可以使用`$_SERVER['SCRIPT_NAME']`来获取所请求的最外部 php 文件的名称。比您可以相应地更改导航中的链接样式，即：

```
 <a href="some.php" style="font-weight: <?= $_SERVER["SCRIPT_NAME"] == '/some.php' ? 'bold' : 'normal' ?>">Link to Some</a>
 <a href="other.php" style="font-weight: <?= $_SERVER["SCRIPT_NAME"] == '/other.php' ? 'bold' : 'normal' ?>">Link to Other</a> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T14:15:14.483

您可以通过在包含标头之前设置变量或查看 URL 来执行此操作。

一个简化的例子：

```
$page = "home";
include "header.php" 
```

在`header.php`

```
if ($page == "home") { ... } 
```

以下代码将为您提供 URL 中的文件名

```
$basename = basename($_SERVER['REQUEST_URI']); 
```

所以如果你有`http://mysite.com/index.php`它会给你`index.php`

您可以`header.php`像我上面描述的那样使用它来决定哪个链接为粗体。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-13T14:21:21.263

在下面的代码中，您可以将此类调用到其他页面并将页面名称作为参数传递，并且可以非常轻松地调用 jQuery 函数

```
<?php
class header {
function __construct($title = "Home", $page = 'home') {
    ?>
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
        <head>
            <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
            <title><?php echo $title; ?></title>
         <script type="text/javascript" src="js/jquery.js"></script>
            <script type="text/javascript" src="js/script.js"></script>
            <script>
        $(document).ready(function(){
            $('.<?php echo $page ?>').addClass('active');
            });    
        </script> 
        </head>
<body>
     <ul class="nav">
        <li class="home"><a href="index.php"><br />HOME<br /></a></li>
         <li class="about"><br />ABOUT US<br /></li>
     </ul>
<?php }} ?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T14:16:33.740

一种方法是从头文件中检查执行脚本的名称，如下所示（在 header.php 中）：

```
$page = basename($_SERVER["REQUEST_URI"]);
if($page == 'index.php') {
    //header included from inside index.php
}
elseif($page == 'contact.php') {
    //header included from contact.php
}
... 
```

# python - 克隆：缩放图像

> ID：11936066
> 
> 赞同：2
> 
> 时间：2012-08-13T14:11:09.697
> 
> 标签：python, image, plone

我的克隆页面模板中有以下代码：

```
<img 
tal:define="folderimagetitle python:context.getField('folderimagetitle').getAccessor(context)()"
tal:condition="folderimagetitle" 
src="" 
alt="" 
tal:replace="structure python:context.getWrappedField('folderimage').tag(context, alt=folderimagetitle, css_class='photo')" 
/> 
```

基本上我想在 H1 标签旁边显示图像。该图像可以正常工作并显示，但它会显示与文本不对齐的完整图像大小。我也不想只添加一个高度和宽度属性，因为这会导致图像边缘参差不齐，无法很好地缩放。

如何将其缩小到 Plone 中可用的默认尺寸之一，即列表、图标、平铺、拇指、迷你、预览和大？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T14:12:47.620

“现代”方式是使用 plone.app.imaging。

例子

```
<img tal:define="scales context/@@images;
                 thumbnail python: scales.scale('image', width=64, height=64);"
     tal:condition="thumbnail"
     tal:attributes="src thumbnail/url;
                     width thumbnail/width;
                     height thumbnail/height" /> 
```

[http://plone.org/products/plone.app.imaging/](http://plone.org/products/plone.app.imaging/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-07-22T04:02:00.740

接受的答案非常完美，但这里有一个关于它如何工作的额外提示：

/@@images 上下文在任何对象类型上都是可获取的，但 scales.scale() 的第一个参数是必须在该上下文上使用 .getField(name) 可获取的字段名称。

因此，例如，如果您有一个画廊视图，它在 view/images 上显示了一个图像列表，您可以使用：

```
<li tal:repeat="image view/images">
<img tal:define="scales image/@@images;
                 img python: scales.scale('image', width=100, height=100);"
     tal:attributes="src img/url">
</li> 
```

请特别注意，您不能只将图像实例传递为：

```
scales context/@@images; <--- Don't do this. You need the @@images for an Image
scales.scale(instance, width=10, height=10); 
```

如果由于某种原因您需要使用 TAL 以外的语言执行此操作*，*则诀窍是使用 restrictedTraverse() 来获取“@@images”上下文，例如：

```
%if request.context.children.has(0, 'ATBlob'):
    <%
        # NB. The 'ATBlob' is the concrete Image instance
        image = request.context.children.nth(0, 'ATBlob')  
        scales = image.restrictedTraverse('@@images')
        scaled_image = scales.scale('image', width=100, height=100)
    %>
    ${scaled_image} 
%endif 
```

# database - 具有复合类型数组的 Postgres FTS

> ID：11936067
> 
> 赞同：1
> 
> 时间：2012-08-13T14:11:10.557
> 
> 标签：database, postgresql, full-text-search, relational-database, data-modeling

假设我有以下伪模式，其中`1-many`关系是使用 Postgres 数组建模的：

```
CREATE TYPE quotes AS
(
  text  CHARACTER VARYING,
  is_direct CHARACTER VARYING
);

CREATE TABLE posts
(
    body  CHARACTER VARYING,
    q     quotes[]
);
insert into posts(body,q) VALUES('ninjas rock',ARRAY[ ROW('I AGREE',True)::quotes, ROW('I DISAGREE',FALSE)::quotes ]); 
```

**我的第一个问题是：**如何执行选择以`quote->text`从整个数组中过滤掉。

这有效：

```
test=# select body, q[1].text from posts;
     body     |  text   
--------------+---------
 hassan rocks | I AGREE
(1 row) 
```

但这不是（请注意，正在检索整个复合类型）：

```
test=# select body, (q).text from posts;
     body     |                      text                       
--------------+-------------------------------------------------
 hassan rocks | {"(\"I AGREE\",true)","(\"I DISAGREE\",false)"}
(1 row) 
```

**为了解决我真正的问题**，我将如何创建一个`to_tsvector`包含帖子正文和所有引用文本的 gin 或 gist（有或没有）索引？我不喜欢使用额外的列索引方法，因为触发器[让我很伤心](http://ktulu.com.ar/god-kills-a-kitten-generator/index.php?txt=Rirelgvzr%20n%20gevttre%20vf%20hfrq%20va%20n%20eryngvbany%20fpurzn&lang=en)。

目前，我的模式将帖子和引用表示为一种`1-many`关系，但是我认为如果 postgres 支持我正在尝试做的事情，它将大大简化事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T17:41:54.997

您可以创建一个函数来获取数组部分并以 a 的形式返回`SETOF quotes`并在 上调用该函数`SELECT`：

```
CREATE OR REPLACE FUNCTION getquote(posts)
RETURNS SETOF quotes
LANGUAGE sql
AS $getquote$
SELECT $1.q[i].text, $1.q[i].is_direct
FROM generate_series(array_lower($1.q, 1), array_upper($1.q, 1)) AS i
$getquote$ 
```

这`SELECT`将是：

```
SELECT body, (getquote(p)).* FROM posts p; 
```

您可以创建一个视图以使事情变得更容易，您还可以对函数本身执行过滤任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-30T12:40:24.183

我可以回答第 1 部分。

要为每个正文/引用返回一行：

```
SELECT body, q_unnest.text AS quote
FROM posts, UNNEST(q) AS q_unnest 
```

要为每个帖子返回一行，其中包含一组引用文本：

```
SELECT posts.body, array_agg(q_unnest.text) AS quotes
FROM posts, UNNEST(q) AS q_unnest
GROUP BY posts.body 
```

要为每个帖子返回一行，其中引用文本由分隔符分隔：

```
SELECT posts.body, array_to_string(array_agg(q_unnest.text), '|') AS quotes
FROM posts, UNNEST(q) AS q_unnest
GROUP BY posts.body 
```

我设置了一个[SQLFiddle](http://sqlfiddle.com/#!15/052cd/11)，所以你可以自己尝试一下。

至于第 2 部分和索引复合类型数组，我相信它需要一个“操作员类”，根据[此处](http://www.postgresql.org/docs/9.1/static/xindex.html)的 Postgres 扩展指南。这对我来说看起来很麻烦，我还没有找到如何做到这一点的例子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T05:08:15.427

以下代码将“过滤”您的数组。`select (unnest(q)).text from posts;`. `unnest`将数组旋转为行。请注意，`unnest`它包含在括号中，这很重要，因为如果没有括号，您将无法选择特定的字段——即，`unnest(q).text`它是无效的，并且`unnest(q)`它本身会导致一行包含字符串形式的组合。

将 post txt 和 quote txt 视为单个文本单元的代码如下：

```
SELECT to_tsvector(q.b_txt || q.q_t) FROM
(
    SELECT b_txt,string_agg(p.q_txt,' ') as q_t 
    FROM ( SELECT 1 AS id,body b_txt, (unnest(q)).text AS q_txt FROM posts) AS p 
    GROUP BY p.id,b_txt
) AS q; 
```

这可能需要改编成 UDF 以用于`gin`或`gist`索引。

# amazon-ec2 - 我们应该还是不应该在 Chef 中配置 ami？

> ID：11936069
> 
> 赞同：0
> 
> 时间：2012-08-13T14:11:19.977
> 
> 标签：amazon-ec2, chef-infra

**设想：**

我为 webserver1(ws1) 旋转了一个 ami，并希望为 ws2、ws3、wsN 做同样的事情。

**问题：**

如何在 Chef 中配置 ami 以使其成为 scm-ed？如果这不是你的做法，请分享你的经验。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T23:56:39.270

Chef 背后的想法是，它采用简单的香草系统并根据食谱进行配置。可以创建以某种方式预先配置的自定义 AMI，并优先使用它而不是通用的。虽然我从来不需要这样做，但是有一些软件包需要很长时间才能安装，例如，在您自己的 AMI 中预安装它可能是值得的。

拥有自定义 AMI 意味着您必须对其进行管理、测试和更新。另外我相信您需要将其上传到您希望使用的每个区域。这是一个额外的移动部分，所以为了简单起见，我建议只使用亚马逊提供的一张图片。

# c# - XmlReader：无法解析不带引号的属性

> ID：11936070
> 
> 赞同：2
> 
> 时间：2012-08-13T14:11:20.133
> 
> 标签：c#, xml-parsing, html-parsing

我试图解析的一段 HTML 包含一些不带引号的属性值，例如宽度和高度属性：

```
<img src="/static/logo.png" width=75 height=90 /> 
```

在 C# 代码中，阅读器会一直读取到下一个锚标记。

```
while (reader.ReadToFollowing("a")) 
```

此语句报告 XmlException：

```
'75' is an unexpected token. The expected token is '"' or '''. Line 16, position 37. 
```

是否有一些 XmlReaderSetting 使 XmlReader 更宽松？我无法控制生成的 HTML。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T14:12:59.507

为了阅读 HTML，您需要为此目的设计的阅读器。[HtmlAgilityPack](http://html-agility-pack.net/?z=codeplex)可以在这里为您提供帮助，相关[问题的](https://stackoverflow.com/q/6452433/23234)[答案](https://stackoverflow.com/a/6452528/23234)中提到的[SgmlReader](https://github.com/MindTouch/SGMLReader)也可以。

[HTML](http://dev.w3.org/html5/spec/)不是[XML](http://www.w3.org/XML/)。它们都基于[SGML](http://www.w3.org/TR/html4/intro/sgmltut.html)，但遵循不同的规则。XML 具有比 HTML 更严格的规则，其中包括需要关闭所有标签以及用单引号或双引号将属性括起来。因此，除非您正在解析符合 XML 的 XHTML，否则 XmlReader 将无法为您工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T14:22:08.153

您也可以使用 WebBrowser 控件。将文件加载到其中并从 WebBrowser.Document 属性中获取 HtmlDocument。然后，您可以循环通过控件。

# c - 在 O(r * c) 上计算位图中的连续区域可以改进吗？

> ID：11936073
> 
> 赞同：8
> 
> 时间：2012-08-13T14:11:40.617
> 
> 标签：c, algorithm, time-complexity

给您一张由卫星拍摄的表面图像。该图像是一个位图，其中水标有“。” 土地用“ `*`”标记。相邻的 ' 组`*`形成一个岛。（如果两个 ' `*`' 是水平、垂直或对角相邻的，则它们是相邻的）。您的任务是打印位图中的岛屿数量。

示例输入：-

```
.........**
**......***
...........
...*.......
*........*.
*.........* 
```

输出：- 5

这是我的实现，它占用`O(r * c)`空间和`O(r * c)`空间，其中 r 是总数。行数，c 是列数。

```
#include <stdio.h>
#define COLS 12

void markVisted(char map[][COLS], int visited[][COLS], int row, int col, int rowCount)
{
    if((row < 0) || (row >= rowCount) || (col < 0) || (col >= COLS) || (map[row][col] != '*') || (visited[row][col] == 1)) return;

    visited[row][col] = 1;

    //calling neighbours
    markVisted(map, visited, row+1, col, rowCount);
    markVisted(map, visited, row, col+1, rowCount);
    markVisted(map, visited, row-1, col, rowCount);
    markVisted(map, visited, row, col-1, rowCount);
    markVisted(map, visited, row+1, col+1, rowCount);
    markVisted(map, visited, row-1, col-1, rowCount);
    markVisted(map, visited, row-1, col+1, rowCount);
    markVisted(map, visited, row+1, col-1, rowCount);
}
int countIslands(char map[][COLS], int visited[][COLS], int rowCount)
{
    int i, j, count = 0;
    for(i=0; i<rowCount; ++i){
        for(j=0; j<COLS; ++j){

            if((map[i][j] == '*') && (visited[i][j] == 0)){
                ++count;
                markVisted(map, visited, i, j, rowCount);
            }
        }
    }
    return count;
}

int main()
{
    char map[][COLS] = {
                    "*..........",
                    "**........*",
                    "...........",
                    "...*.......",
                    "*........*.",
                    "..........*"               
                    };
    int rows = sizeof(map)/sizeof(map[0]);
    int visited[rows][COLS], i, j;  

    for(i=0; i<rows; ++i){
        for(j=0; j<COLS; ++j) visited[i][j] = 0;
    }

    printf("No. of islands = %d\n", countIslands(map, visited, rows));

    return 0;
} 
```

**请为此问题提出一些更好的逻辑，**
欢迎提出改进我的解决方案的建议。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-13T14:34:10.980

我认为这里的困惑在于您的算法实际上确实以线性时间运行，而不是二次时间。

使用大 O 表示法时，`n`代表输入大小。您在此处的输入不仅仅是*，*`r`而是`c`* `r`，`c`因为它是一个节点网格。正如您在问题中所说，您的算法运行`O(r * c)`在...因此您的算法运行`O(n)`在线性时间。

在我看来，任何解决这个问题的算法都必须在最坏的情况下读取每个输入单元格一次。因此，您可以期望的最佳运行时间是`O(n)`. 当您的算法运行时`O(n)`，在最坏的情况下，您无法拥有比您提出的算法运行速度更快的任何算法。

我能想到一些巧妙的技巧。例如，如果你有一个`*`s 块，在某些情况下你只能检查对角线。也就是说，如果你有

```
......
.****.
.****.
.****.
.****.
...... 
```

如果您只阅读这些单元格，则无关紧要：

```
......
.*.*..
..*.*.
.*.*..
..*.*.
...... 
```

除非例如您在最左下角有东西，在这种情况下，您需要阅读最左下角的内容`*`。所以也许在某些情况下你的算法可以运行得更快，但对于最坏的情况（这是什么`O`措施），它必须是`O(n)`.

编辑：即使在您只读取一半节点的情况下，运行时间`O(n/2)`仍然是相同的顺序（`O(n)`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T14:23:50.577

[这与连接组件标记](http://en.wikipedia.org/wiki/Connected-component_labeling)高度相关。连接组件的数量只是标签的副产品。链接的维基百科文章中描述的算法在线性时间内工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T14:24:59.407

1.  创建一个无向图，其中每个岛节点都连接到其相邻的岛节点。

2.  虽然有未访问的节点：

    *   选择一个未访问的节点，进行深度优先遍历并标记每个访问过的节点，增加 number_of_islands。
3.  完毕。

(1) 和 (2) 都需要 O(n) 时间。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T21:10:50.180

渐近地，您的方法是最好的 O(n)。

但是，我注意到了几件事：

**第一的：**

在函数 markVisited 中，您按顺序检查单元格邻居：

```
down, right, up, left, down-right, up-left, up-right, down-left 
```

更好的顺序是：

```
left, right, up-left, up, up-right, down-left, down, down-right 
```

这将在缓存中更好地发挥作用，因为它是通过直接读取当前位置旁边的值开始的，并且在给定的行中按顺序读取。

（请注意，从对角线开始会标记访问过更多的位置，但由于检查是否访问过一个单元格只是最后一次检查，因此不会节省任何时间）。

**第二：**

在仅包含陆地的卫星图像的最坏情况下，您的算法将多次访问每个单元格（类似于单元格拥有的每个邻居一次）。

这意味着您执行的数组访问次数大约是可能需要的八倍。

我相信您可以通过或多或少地线性传递数据来解决这个问题。

我目前正在考虑一种方法，如果可行，我会将代码添加为编辑。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T20:50:19.080

如果没有任何关于岛屿性质的先验知识，算法就不能及时比 O(n) 更有效，但是在内存方面可以改进你的算法。访问的数组只是多余的。这是一个快速尝试（请原谅使用 ASCII 算法 - 不那么可读，但编码速度更快）

```
#include <stdio.h>
#define COLS 12

int main()
{
    char map[][COLS] = {
            "*..........",
            "**........*",
            "...........",
            "...*.......",
            "*........*.",
            "..........*"               
            };
    int rows = sizeof(map)/sizeof(map[0]);
    int i, j;  

    int main_count = 0;

    if(map[0][0] == '*') {
        main_count++;
    }
    for(j=0; j<COLS-1; j++) {
        if((map[0][j]-map[0][j+1])==4) {
            main_count++;   
        }
    }

    for(i=1; i<rows; ++i){
        if(map[i][0] == '*' && (map[i][0]-map[i-1][0]-map[i-1][1])==-50) {
            main_count++;
        }
        for(j=0; j<COLS-1; j++) {
            if((map[i][j]-map[i][j+1])==4) {
                if( j==COLS-2 && (map[i][j+1]-map[i-1][j]-map[i-1][j+1])==-50) {
                    main_count++;
                }   
                if( j!=COLS-2 && (map[i][j+1]-map[i-1][j]-map[i-1][j+1])-map[i-1][j+1]==-96) {
                    main_count++;
                }   
            }
        }
    }

    printf("Number of islands: %d\n", main_count);

    return 0;
} 
```

# whitelist - 在fuelphp中添加自定义模型到白名单

> ID：11936083
> 
> 赞同：0
> 
> 时间：2012-08-13T14:12:12.973
> 
> 标签：whitelist, fuelphp

我只是想将我的一个定制模型类添加到fuelphp白名单中，但我找不到我应该指定什么路径才能使其工作。

这就是它的样子（在 config.php 中）：

'whitelisted_classes' => 数组（'Fuel\Core\Response', 'Fuel\Core\View', 'Fuel\Core\ViewModel', 'Closure'）

我想将 Model_Piece 添加到该列表中 Model_Piece 位于fuel/app/classes/model

'Fuel\app\classes\model\Model_piece' 不起作用

我在这里想念什么？我对fuelphp不太熟悉，所以欢迎任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T14:25:37.507

它实际上是您要进入`whitelisted_classes`数组的命名空间（尽管从技术上讲，这应该与文件的路径有关）。

如果您没有专门命名您的模型，它将位于根命名空间中，因此您应该能够将以下内容放入`whitelisted_classes`数组中。

`Model_piece`（或可能`\Model_piece`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T15:43:41.673

为了完整起见，它应该是一个完全命名空间的类名。

如果您的类是在全局命名空间中指定的（即您没有明确定义一个），只需指定类名（即'Model_Piece'），不需要前导反斜杠。

# php - 用jquery替换页面文本并提示文件下载

> ID：11936092
> 
> 赞同：0
> 
> 时间：2012-08-13T14:12:39.867
> 
> 标签：php, javascript, jquery

好吧，这就是我想要做的。

一个用户使用短链接 ?f=xHnAnn 然后将他们发送到 /psn/xHnAnn.aspx ，在那里他们会收到一条感谢消息并将文件推送到浏览器。

我想用 jQuery 做的是，当用户发送到该页面时，他们会看到 Preparing 文本，并且当 2200 毫秒延迟过去并且文件被推送给用户时，Preparing 更改为Thank You。

我目前没有使用或编写任何 jQuery。我正在使用基本的 JavaScript 进行延迟推送。

```
<?php if($_GET['f'] == 'xHnAnn') { ?> //just an example actuall code has == $itemID

<script type="text/javascript">
<!--
function delay(){
    window.location = "psn/xHnAnn.aspx?hash=fa456f8df65663d9fb"
}
//-->
</script>

<?php } ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:20:39.917

我给你写了一些东西：

```
function delay(time) {
    timeout = setTimeout(function() {
        document.getElementById("thanks").innerHTML = "Thank You!";
    }, time);
}
delay(2200); 
```

​</p>

还有一个**[短小提琴](http://jsfiddle.net/jVTSX/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T14:24:42.837

这是一种方法（使用jQuery）：

```
​&lt;p id="status">Preparing text...</p>

<script type="text/javascript">
    window.setTimeout(function(){
        $("#status").html(​​​​​​​​​"Thanks for waiting!");
    }, 2200);
</script>​​​​​​​​​ 
```

[**演示**](http://jsfiddle.net/Snowsickle/f3vUg/1/)

如果要将文本更改之间的延迟从 2200 毫秒更改为 2200 秒（加载 37 分钟？？），请将`2200`上述代码中的`2200000`.

或者，如果您不想使用 jQuery，则可以使用纯 javascript：

```
​&lt;p id="status">Preparing text...</p>

<script type="text/javascript">
    window.setTimeout(function(){
        document.getElementById("status").innerHTML = ​​​​​​​​​"Thanks for waiting!";
    }, 2200);
</script>​​​​​​​​​ 
```

[**演示**](http://jsfiddle.net/Snowsickle/f3vUg/2/)

# html - 如何使外部 div 增长或缩小到内部 div 的大小

> ID：11936093
> 
> 赞同：2
> 
> 时间：2012-08-13T14:12:42.650
> 
> 标签：html, css

我有一个外部 div 和三个内部 div，每个 div 单独查看，当查看每个 div 时，我希望外部 div 的高度相应地增长或缩小。

我希望在每个 div 中都有表格，它们会动态扩展，这意味着它们的大小不会相同，我希望外部 div 与内部 div 的大小相匹配，提前致谢

**HTML**

```
<div id="scroll-view">
    <div id="scroll-items">
        <div class="view"></div>
        <div class="view"></div>
        <div class="view"></div>
    </div>
</div>
<button id="previous">Previous</button>
<button id="next">Next</button> 
```

**CSS**

```
.view { width: 300px; height: 300px; float:left; }
#scroll-view {
    width: 300px;
    height: 50px;

    overflow:hidden;
    position:relative;
}

#scroll-items { width: 10000px; max-height: auto;  overflow:auto; position: absolute ; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:23:22.933

我实际上并不了解您要达到的效果，如果您可以改写问题会有所帮助。

话虽如此，这接近你想要的吗？[http://jsfiddle.net/72deF/](http://jsfiddle.net/72deF/)

# xml - 使用 XSLT 1.0 计算 xhtml 中的元素 我有一个 XSLT 2.0，它将 xhtml 表转换为 InDesign XML 表。此 XSLT 计算下面模板 ( )中每行第 7 行中的最大元素数。max(for $td in //tr return count($td/td)) &l 问问题 问问题 2012-08-13T14:12:43.807 1277 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我有一个 XSLT 2.0，它将 xhtml 表转换为 InDesign XML 表。此 XSLT 计算下面模板 ( )中每行第 7 行中的最大元素数。max(for $td in //tr return count($td/td)) <xsl:template match="table"><xsl:element name="id_table"><xsl:attribute name="aid:trows"><xsl:value-of select="count(child::*/tr)"></xsl:value-of></xsl:attribute><xsl:attribute name="aid:tcols"><xsl:value-of select="max(for $td in //tr return count($td/td))"></xsl:value-of></xsl:attribute><xsl:apply-templates></xsl:apply-templates></xsl:element></xsl:template>我不知道如何使用 XSLT 1.0 实现这一点——任何想法都将不胜感激！遗憾的是，工作流管道中只有一个 1.0 处理器。 “现代”方式是使用 plone.app.imaging。 例子  http://plone.org/products/plone.app.imaging/ xmlxsltxhtmladobe-indesign 4 1 回答 1 This answer is useful 2 <xsl:attribute name="aid:tcols"> <xsl:for-each select="//tr"> <xsl:sort select="count(td)" order="descending"><xsl:if test="position() = 1"> <xsl:value-of select="count(td)"></xsl:value-of> </xsl:if></xsl:sort> </xsl:for-each> </xsl:attribute> 应该做。 于 2012-08-13T15:20:17.933 回答 Related 1 nhibernate - 在 3.0 升级后为 Castle Windsor 配置 NHibernate 3.3.1 1 azure - 编码作业时 Azure 媒体服务为 .wmv 文件提供 JobState.Error 1 objective-c - Objective-C中双打的模 1 ipad - 是否可以在 iOS 5 上安装 MediaWiki 4 python - 在 nGINX 上部署 Django 应用程序 2 heroku - Heroku 上的 Gevent-socketio 1 c# - 配置序列化格式 1 google-fusion-tables - 在 fusiontables 中取消合并表 1 vb.net - 将 vb.net 解决方案移动到另一台机器 2 algorithm - 这个拼字游戏算法中的“锚点”到底是什么？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：11936094
> 
> 赞同：1
> 
> 时间：
> 
> 标签：xml, xslt, xhtml, adobe-indesign

我有一个 XSLT 2.0，它将 xhtml 表转换为 InDesign XML 表。此 XSLT 计算下面模板 ( )中每行第 7 行中的**最大**`<td>`元素数。`<tr>``max(for $td in //tr return count($td/td))`

```
<xsl:template match="table">
    <xsl:element name="id_table">
        <xsl:attribute name="aid:trows">
            <xsl:value-of select="count(child::*/tr)"/>
        </xsl:attribute>
        <xsl:attribute name="aid:tcols">
            <xsl:value-of select="max(for $td in //tr return count($td/td))"/>
        </xsl:attribute>
        <xsl:apply-templates/>
    </xsl:element>
</xsl:template> 
```

我不知道如何使用 XSLT 1.0 实现这一点——任何想法都将不胜感激！遗憾的是，工作流管道中只有一个 1.0 处理器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T15:20:17.933

```
<xsl:attribute name="aid:tcols">
  <xsl:for-each select="//tr">
    <xsl:sort select="count(td)" order="descending"/>
    <xsl:if test="position() = 1">
      <xsl:value-of select="count(td)"/>
    </xsl:if>
  </xsl:for-each>
</xsl:attribute> 
```

应该做。

# java - 使用 RestEasy 生成 Etag

> ID：11936096
> 
> 赞同：1
> 
> 时间：2012-08-13T14:12:49.717
> 
> 标签：java, web-services, resteasy, etag

我的问题很简单：有没有办法使用 Java/RestEasy 在 GET 请求上生成 ETag？

在我看来，我正在以 @Cache{param0=val0, param1=val1} 的方式寻找一个简单优雅的注释

有人知道该怎么做吗？有什么建议吗？

提前致谢。

# asp.net - 表单数据的基于 Asp.net 角色的身份验证

> ID：11936097
> 
> 赞同：2
> 
> 时间：2012-08-13T14:12:52.953
> 
> 标签：asp.net

我有一个 asp.net 4 webforms 项目。我有一个用于管理应用程序中现有用户的表单，但是根据用户在应用程序中的角色（管理员、用户等），某些用户可能会显示为灰色或隐藏某些选项。例如，管理员可以从下拉列表中更改用户的角色，但普通用户会看到下拉列表变灰（或可能隐藏）。

当然，在回发时，我可以有一个很大的功能来检查所有条件，例如“如果用户小于管理员修改属性 X，则忽略保存该更改”。对于一个表单，可能会有多个此类检查的列表。

但是在 asp.net 中是否有更好的方法来处理这种类型的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:28:34.477

可以使用 PrincipalPermissions 来限制方法不被特定角色以外的任何人执行

`Import System.Security.Permissions`

放在方法上面

`<PrincipalPermissions(SecurityAction.Demand, role:="Admin")> _`
`...`

这不会对用户隐藏控件，但我想您可以将特定控件包装在 LoginView 中或以编程方式控制它们的可见性。

# asp.net-mvc - 从控制器获取json数据？

> ID：11936102
> 
> 赞同：1
> 
> 时间：2012-08-13T14:13:01.583
> 
> 标签：asp.net-mvc, jquery

脚本：

```
<script type="text/javascript">
function getMeterInfo(meter_id) {
    $.ajax({
        url: '@Url.Action("MeterInfo", "Power")',
        data: { meter_id: meter_id},
        dataType: "json",
        type: "GET",
        error: function () {
            alert("Error!");
        },
        success: function (data) {
            var item = "";
            item += data.sno + " " + data.customer_id + data.city + data.region; //+ more info about meter.

            $("#meter_info").html(item);
        }
    });
}

$(document).ready(function () {
    $("#meters").change(function () {
        var meter_id = $("#meters").val();
        getMeterInfo(meter_id);
    });
});
</script> 
```

**注意：**我知道成功功能的内容不正确。我不知道，我可以在那里写什么。

cshtml

```
@Html.DropDownList("sno", new SelectList(Model, "sno", "meter_name"), "-- Select Meter --", new { id = "meters" })

<table id=meter_info>
</table> 
```

控制器

```
 [HttpGet]
 public ActionResult MeterInfo(string meter_id)
 {
    int _meter_id = Int32.Parse(meter_id);
    var _meter = entity.TblMeters.Where(x => x.sno == _meter_id).FirstOrDefault();

    return Json(_meter, JsonRequestBehavior.AllowGet);
 } 
```

模型

```
 public class TblMeters
 {
      int sno;
      int customer_id;
      string city;
      string region;
      .....
 } 
```

我想在 html 表中显示我的模型值（sno、customer_id、city、region 等）。当我调试程序时，控制器操作会返回预期的数据。

1.  我不知道如何在名为meter_info 的表上显示返回的数据项。
2.  当我运行上面的代码时，错误函数起作用，而不是成功函数。

如何在表格上显示数据？为什么错误函数有效？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T16:33:44.777

您能否验证成功函数是否甚至被 firebug 等调用...？或者只是通过在其中放置警报（'被调用！'）来实现老派？

此外：

1) 您发布的以下代码使用一个名为**item**的变量和另一个名为**items**的变量。这是您的意图，因为您将内部 html 设置为空字符串。

```
 var **item** = "";
    **items** += data.sno + " " + data.customer_id + data.city + data.region; 

    $("#meter_info").html(**item**); 
```

2) 如果您想遍历结果并为每个结果添加一个表格行：您可能希望为此使用 jQuery "each"，但进一步检查看起来您只是通过此结果显示一条记录。奇怪的是，您使用表格只显示一行。

要添加一个结果（当然您可能希望将其分成多列）：

```
$('#meter_info').append('<tr><td>' + data.sno 
           + ' ' + data.customer_id + data.city + data.region + '</td></tr>' 
```

如果您想返回并附加多行：

```
 $.each(data, function(index,data){$('#meter_info').append('<tr><td>' + data.sno 
       + ' ' + data.customer_id + data.city + data.region + '</td></tr>' }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T16:42:29.370

如果这是一个选项，我建议使用不显眼的 AJAX 来完成此操作。这需要大量的工作并为您完成。

因此，根据您的尝试，您需要创建一个强类型的 Partial View，它接受 TableMeters 列表作为它的模型类。（原谅我缺乏 Razor，但我更喜欢 C#...）

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<List<TableMeters>>" %>
    <table>
    <% foreach(TableMeter meter in Model){ %>
        <tr>
            <td><%= meter.sno %></td>
            <td>...</td>
        </tr>
    <% } %> 
```

然后，在主页上，您需要以下内容：

```
<% using(Ajax.BeginForm("MeterInfo", "Power", new AjaxOptions() { UpdateTargetId = "meterTable" })){ %>
    <%= Html.DropDownList("meter_id", new SelectList(Model, "sno", "meter_name"), "-- Select Meter --", new { id = "meters", onchange="$(this).parent().submit()" }) %>
<% } %>

<div id="meterTable">
    <%= Html.Partial("MeterTable", Model.TblMeters) %>
</div> 
```

您的控制器方法可以保持大致相同，但您需要删除 [HttpGet] 并将返回更改为：

```
return PartialView("MeterTable", _meter); 
```

仔细检查传递的逻辑，我不完全确定你所有的类是什么样的，但这应该可以解决问题。当您更改下拉列表时，它将触发“onchange”事件，该事件应提交包含表单。表单将通过 AJAX 提交给控制器。请注意，下拉列表的名称必须与控制器方法的参数匹配。您可以像已经拥有它一样进行过滤，并将列表返回到部分视图。部分视图将填充并替换 div 的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T06:15:07.457

我想知道您的序列化是否正常工作。如果你改变这个会发生什么：

```
return Json(_meter, JsonRequestBehavior.AllowGet); 
```

到

```
return Json(new { sno = _meter.sno, customer_id = _meter.customer_id etc. }, JsonRequestBehavior.AllowGet); 
```

此外，如果您可以检查开发人员工具栏（大多数浏览器中的 F12）网络选项卡以检查响应内容，这将非常有帮助。

**更新**

您可以检查您的数据如何序列化。如果您使用的是内置的序列化器/反序列化器，那么您可以尝试这样的事情。

```
var serializer = new JavaScriptSerializer();
var json = serializer.Serialize(yourData); 
```

使用 JSON.NET

```
var json = JsonConvert.SerializeObject(yourData, jsonSerializerSettings); 
```

# perl - 通过 Perl DBI 在 Oracle 中进行多语句处理

> ID：11936111
> 
> 赞同：2
> 
> 时间：2012-08-13T14:13:33.860
> 
> 标签：perl, oracle, dbi

有没有办法我可以使用 Oracle / DBI / Perl 做这样的事情。

```
use DBI;
my $dbh = DBI->connect( oracle_stuff );
my $sql = <<EOF;
select current_timestamp(3) from dual;
select current_timestamp(3) from dual;
EOF
my $sth  = $dbh->prepare($sql);
print $sth->execute(); 
```

显然，我想处理比 2 x current_datetimes 大得多的东西，但这是我的小例子。我不断收到错误消息：SQL 命令未正确结束 :-(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:22:29.713

准备语句正在等待“？” 喜欢在这里建议 DBI 包的文档[http://search.cpan.org/dist/DBI/DBI.pm](http://search.cpan.org/dist/DBI/DBI.pm)

例如 ：

```
$sth = $dbh->prepare('select current_timestamp(?) from dual')
$sth->execute(3);
$sth->execute(4);
$sth->execute(5); 
```

ETC...

# windows-8 - Metro 应用程序中的刷新问题

> ID：11936114
> 
> 赞同：0
> 
> 时间：2012-08-13T14:13:45.937
> 
> 标签：windows-8, windows-runtime

这是我坚持的一个奇怪的问题。我有一个要移植到 Win 8 的 Windows Phone 应用程序。它基本上是一个按以下方式构造的日历应用程序。

首先是 MainPage.xaml，其中包含所有可用选项的预览。当您单击日历选项时。它导航到另一个称为日历的页面。应用程序的全部数据由一个名为 CycleManager 的类管理，该类是一个密封类。其中存储的数据`ApplicationDataContainer`相当于`IsolatedStorage`.

第一次创建实例时，它从`ApplicationDataContainer`

```
public sealed class CycleManager
{
    private static readonly CycleManager instance = new CycleManager();

    public CycleManager()
    {
        localfolder = Windows.Storage.ApplicationData.Current.LocalFolder;
        ReadFromIsolatedStorage();

    }

    public static CycleManager Instance
    {
        get
        {
            return instance;
        }

    }
} 
```

当您导航回主页时，数据将被保存。

所以现在，我的问题是，当我调试时。它工作正常。保存的数据显示在日历上。在 Calendar 类的构造函数中，我调用了一个名为 CreateCalendar 的函数，并在其中呈现数据和图像。

但是如果我从模拟器运行它，会发生保存的数据不显示，但是当您导航回主页并再次返回日历页面时。它呈现。

模拟器如何在调试时显示一种行为，而通过运行已部署的应用程序来显示另一种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:35:26.443

`ApplicationDataContainer` **您是否从异步**加载数据（使用**async/await**关键字）？每个花费超过 20 毫秒的操作（这涉及到所有不是简单代码操作的操作）都应该在 WinRT 中异步完成。

加载数据可能需要一段时间，根据数据绑定的设置方式，您通常会在 1-2 秒后看到数据出现在屏幕上，如果您没有实现`INotifyPropertyChanged`事件（Common 文件夹中的VS 模板有一个`BindableBase`对象为您执行此操作）。如果正确实施，数据会弹出，请给它一些时间。

当您使用断点进行调试时，数据加载速度足够快，因此可以正确显示。如果您在模拟器中前后导航，数据也有时间加载到内存中。

您还可以考虑在应用程序启动时加载数据并在加载时使用[扩展的初始屏幕](http://blogs.msdn.com/b/windowsappdev/archive/2012/05/21/creating-a-fast-and-fluid-app-launch-experience.aspx)。

*编辑：* 在 Windows 8 中开始使用异步的一个很好的链接：[http](http://www.silverlightshow.net/items/Windows-8-Metro-Asynchrony-made-easy.aspx) ://www.silverlightshow.net/items/Windows-8-Metro-Asynchrony-made-easy.aspx 。在您的情况下，这将是

```
public CycleManager()
{
    localfolder = Windows.Storage.ApplicationData.Current.LocalFolder;
    Task.Run(() => ReadFromIsolatedStorage());

}

public async Task ReadFromIsolatedStorage() { 
    ApplicationDataContainer localSettings = ApplicationData.Current.LocalSettings; 
    ApplicationDataCompositeValue composite = 
            (ApplicationDataCompositeValue)localSettings.Values["Setting"]; 
} 
```

将其与 INotifyPropertyChanged 的​​正确实现相结合（例如，通过从 BindableBase 派生的类并使用`SetProperty`setter 中的方法）。

# windows-phone-7 - 对 https 的 GET 请求 - NotFound。wp7

> ID：11936116
> 
> 赞同：1
> 
> 时间：2012-08-13T14:13:51.933
> 
> 标签：windows-phone-7, https, get-request

这是我第一次为 wp7 编写代码，但我遇到了一些麻烦。当我声明**token_req = "http://api.server.com/oauth/token"**时没问题，但是当我声明 * *https*时，它无法连接，所以我得到“远程服务器返回错误：未找到。” 在线错误

> WebResponse 响应 = (HttpWebResponse)request.EndGetResponse(result);

```
const string results
 private void button1_Click(object sender, RoutedEventArgs e)
        {
            string token_req = "https://api.server.com/oauth/token";
            string client_id = "...";
            string client_secret = "...";
            string username = Field_Login.Text;
            string password = Field_Password.Password;
            string token_req_param = "grant_type=password&client_id=" + client_id + "&client_secret=" + client_secret + "&username=" + username + "&password=" + password;

            HttpWebRequest request = (HttpWebRequest)WebRequest.Create(token_req+"?"+token_req_param);

            request.BeginGetResponse(GetCallback, request);
        }

        void GetCallback(IAsyncResult result)
        {
            WebRequest request = (HttpWebRequest)result.AsyncState; 
            WebResponse response = (HttpWebResponse)request.EndGetResponse(result);
            using (StreamReader httpwebStreamReader = new StreamReader(response.GetResponseStream()))
            {
                results = httpwebStreamReader.ReadToEnd();

            }
            response.Close();

        } 
```

此外，我无法使用 IE 连接到此 url，而我使用 wp7 模拟器。=\

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T15:47:28.727

Error Not Found 是一个通用的 WCF 错误消息，最好的办法是使用 Fiddler，尽管根据我的经验，你还没有设置 HTTPS 来处理你的服务，如果你想设置 HTTPS 连接，你需要更多的魔法，你可以从中获得

[https://github.com/geersch/WcfOverHttps](https://github.com/geersch/WcfOverHttps)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T16:36:44.853

您是否尝试使用自签名证书？

如果是这样，那么您必须在手机上安装证书，这只能通过将 WebBrowserTask 指向证书的远程 url 来完成。这很糟糕，但这是唯一的方法。

# javascript - xhtml中javascript的eclipse格式删除// 我正在使用 eclipse（juno 和以前的版本）来编写 JSF 代码。这些页面都是xhtml。每隔一段时间我需要添加javascript。当我这样做时，我必须使用 CDATA 标记，否则当我有某些字符（如 > < &）时 xhtml 无效。 无论如何，该解决方案运行良好，直到我告诉 eclipse 格式化代码，此时它删除了 问问题 问问题 2012-08-13T14:13:56.607 615 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我正在使用 eclipse（juno 和以前的版本）来编写 JSF 代码。这些页面都是xhtml。每隔一段时间我需要添加javascript。当我这样做时，我必须使用 CDATA 标记，否则当我有某些字符（如 > < &）时 xhtml 无效。 无论如何，该解决方案运行良好，直到我告诉 eclipse 格式化代码，此时它删除了 CDATA 标记并且一切都崩溃了。 有没有办法告诉 eclipse 不要删除这些标签？我意识到我可以转义字符，这也可以，但我更喜欢使用 CDATA 标记来保持代码更具可读性。 谢谢。 JavaScript 库的性能开销 有谁知道是否有研究表明使用 javascript 库（除了明显的下载时间）与仅使用基本 javascript 的性能开销？这些天图书馆很大，我很好奇。 从我的计算机科学学位来看，它似乎应该有增长。（换句话说，线性）。 在计算机科学术语中，这并没有威胁性，但它实际上如何影响页面加载时间和页面性能（以毫秒为单位）？我知道 CPU 是一个问题，RAM 等等。但是是否有任何测试可以衡量这些事情？ 我知道另一个因素是库通常经过优化，可以以不太优化的方式手动编写代码，但库也有开销，并非所有功能都会被使用。 编辑： 我发现这似乎彻底回答了我的问题，即使它开始于其他事情： 何时使用 Vanilla JavaScript 与 jQuery？ “由于评论很快指出（我同意 100%），上面的陈述指的是基准代码。一个‘原生’JavaScript 解决方案（假设它写得很好）将胜过一个 jQuery 解决方案，它几乎可以完成同样的事情每一个案例（我很乐意看到一个例子）。jQuery 确实加快了开发时间，这是一个重要的好处，我并不是要贬低它。它便于阅读，易于遵循代码，这不仅仅是一些开发人员能够自行创建。 在我看来，答案取决于你想要达到的目标。如果，正如我根据您提到的性能优势所推测的那样，您追求的是应用程序的最佳速度，那么每次调用 $() 时使用 jQuery 都会引入开销。如果你追求可读性、一致性、跨浏览器兼容性等，那么肯定有理由偏爱 jQuery 而不是‘原生’ JavaScript。” javascripteclipsejsf-2xhtml 4 1 回答 1 This answer is useful 1 我自己也面临同样的问题，我没有完全解决方法，但可以解决。您只需在调用格式化程序之前选择要格式化的代码段。 在这里，我会选择 from并点击 Ctrl Shft F。 您可能还想尝试不同的编辑器，http://amateras.sourceforge.jp/cgi-bin/fswiki_en/wiki.cgi?page=EclipseHTMLEditor。我自己没有，但它说它有一个可配置的格式化程序。如果您找到更简单的解决方案，请告诉我。谢谢 于 2012-09-02T02:55:24.023 回答 Related 1 transactions - Windows 工作流基础状态机事务 1 android - 如何将联系人导出到 .vcf 文件 4 java - 我对代码的措辞感到困惑 0 xml - 使 xml 文件在网络上可编辑的最佳方法 1 c# - 将哈希集与文件进行比较 3 jquery - jquery选择子元素 4 c# - 简单的子字符串搜索（蛮力） 1 web-services - 云中的 SharePoint 2010 Web 服务 API (BPOS / Office 265) 2 jsf-2 - Primefaces 3.2 客户端 API 文档在哪里？ 2 iphone - 表格单元格幻灯片 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：11936118
> 
> 赞同：1
> 
> 时间：
> 
> 标签：javascript, eclipse, jsf-2, xhtml

我正在使用 eclipse（juno 和以前的版本）来编写 JSF 代码。这些页面都是xhtml。每隔一段时间我需要添加javascript。当我这样做时，我必须使用 CDATA 标记，否则当我有某些字符（如 > < &）时 xhtml 无效。

无论如何，该解决方案运行良好，直到我告诉 eclipse 格式化代码，此时它删除了 CDATA 标记并且一切都崩溃了。

有没有办法告诉 eclipse 不要删除这些标签？我意识到我可以转义字符，这也可以，但我更喜欢使用 CDATA 标记来保持代码更具可读性。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T02:55:24.023

我自己也面临同样的问题，我没有完全解决方法，但可以解决。您只需在调用格式化程序之前选择要格式化的代码段。

```
<head>
    <script type="text/javascript">
    //<![CDATA[
      alert('test');
    //]]></script>
</head>
<body>
    <form action="register.jsp" method="post">
        <div class="row">
            <span class="cell1">Username</span><span><input id="username"
                name="username" type="text" /></span><span id="result"></span>
        </div>
        <div class="row">
            <span class="cell1">Full name</span><span><input id="fullname"
                name="fullname" type="text" /></span>
        </div>
    </form>
</body> 
```

在这里，我会选择 from`<body>`并`</body>`点击 Ctrl Shft F。

您可能还想尝试不同的编辑器，[http://amateras.sourceforge.jp/cgi-bin/fswiki_en/wiki.cgi?page=EclipseHTMLEditor](http://amateras.sourceforge.jp/cgi-bin/fswiki_en/wiki.cgi?page=EclipseHTMLEditor)。我自己没有，但它说它有一个可配置的格式化程序。如果您找到更简单的解决方案，请告诉我。谢谢

# javascript - JavaScript 库的性能开销

> ID：11936123
> 
> 赞同：8
> 
> 时间：2012-08-13T14:14:21.697
> 
> 标签：javascript

有谁知道是否有研究表明使用 javascript 库（除了明显的下载时间）与仅使用基本 javascript 相比的性能开销？这些天图书馆很大，我很好奇。

从我的计算机科学学位来看，它似乎应该有增长。（换句话说，线性）。

在计算机科学术语中，这并没有威胁性，但它实际上如何影响页面加载时间和页面性能（以毫秒为单位）？我知道 CPU 是一个问题，RAM 等等。但是是否有任何测试可以衡量这些事情？

我知道另一个因素是库通常经过优化，可以以不太优化的方式手动编写代码，但库也有开销，并不是所有的功能都会被使用。

**编辑：** 我发现这似乎彻底回答了我的问题，即使它开始于其他事情： [何时使用 Vanilla JavaScript 与 jQuery？](https://stackoverflow.com/questions/4651923/when-to-use-vanilla-javascript-vs-jquery)

“由于评论很快指出（我同意 100%），上面的陈述指的是基准代码。一个‘原生’JavaScript 解决方案（假设它写得很好）将胜过一个 jQuery 解决方案，它几乎可以完成同样的事情每一个案例（我很乐意看到一个例子）。jQuery 确实加快了开发时间，这是一个重要的好处，我并不是要贬低它。它便于阅读，易于遵循代码，这不仅仅是一些开发人员能够自行创建。

在我看来，答案取决于你想要达到的目标。如果，正如我根据您提到的性能优势所推测的那样，您追求的是应用程序的最佳速度，那么每次调用 $() 时使用 jQuery 都会引入开销。如果你追求可读性、一致性、跨浏览器兼容性等，那么肯定有理由偏爱 jQuery 而不是‘原生’ JavaScript。”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:25:20.063

这是一个很好的问题！除了库本身的下载时间之外，大多数框架都没有做太多，这意味着它们不会延迟页面显示或其他什么。

JQuery 的 $.css 方法可以很容易地为元素设置样式，如果您需要经常触发它并且直接对样式对象进行操作要快得多，那么它可能会成为性能瓶颈。

我认为最好用普通的javascript做更多的事情，你必须获得更高的性能。对于像 ajax 请求、菜单淡入淡出等正常的东西，我曾经使用过的所有框架的性能都足够了，而编码本身又反过来加快了速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T14:21:30.477

这完全取决于图书馆。但是对于像 jQuery 这样的库，这可能无关紧要：性能瓶颈可能不是 jQuery，Google 提供了一个 CDN 托管的 jQuery，因此它甚至不会影响页面加载时间，以及 jQuery 为您提供的易用性。超过了轻微的性能影响。库还可以使用不常见或困难的技术来提高性能，因此使用库有时甚至比您自己编写的要快。真的没有最终答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T15:02:41.343

虽然不是对您问题的直接回答，但我对这个问题的回答是：[**“不使用 jQuery 的一些经验技术原因是什么？”**](https://stackoverflow.com/questions/5099949/what-are-some-empirical-technical-reasons-not-to-use-jquery/5100169#5100169) 以及其他答案和评论可能对您的研究很有趣，因为其中很多都在谈论使用和不使用 JavaScript 库和框架的性能问题。我希望它有所帮助。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-13T14:20:20.280

这是基于 js 库和 venilla js 附加文本的性能的研究

[http://www.learningjquery.com/2009/03/43439-reasons-to-use-append-correctly](http://www.learningjquery.com/2009/03/43439-reasons-to-use-append-correctly)

我可以说，使用 venilla javascript 总是比在库的帮助下执行某些操作要快。但是，如果您想节省开发时间，最好使用一些您擅长的库。

# objective-c - 如何在iOS中通过参数将UITableView IndexPath传递给UIButton @selector？

> ID：11936126
> 
> 赞同：8
> 
> 时间：2012-08-13T14:14:24.920
> 
> 标签：objective-c, ios, uitableview, parameters, uibutton

我已经添加`UIButton`在`UITableViewCells`. 我有当用户单击按钮时，我们获得了 indexpath 以使用来自`NSMutableArray`. 我用下面的来获取电流`IndexPath`，

```
[getMeButton addTarget:self action:@selector(resendTheErrorMessage:) forControlEvents:UIControlEventTouchUpInside];

-(void) resendTheErrorMessage:(id)sender 
{
   NSLog(@"SEnder: %@", sender);
   //NSLog(@"Index Path : %@", indexpath);
} 
```

谁能帮我通过当前的索引路径`UIButton's`@selector。提前致谢。

**编辑：**

这是我得到的输出`NSLog()`

```
<UIButton: 0x864d420; frame = (225 31; 95 16); opaque = NO; tag = 105; layer = <CALayer: 0x864d570>> 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-13T14:23:21.090

添加您的`UIButton`赞

```
UIButton *btn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[btn setFrame:CGRectMake(10.0, 2.0, 140.0, 40.0)];
[btn setTitle:@"ButtonTitle" forState:UIControlStateNormal];
[btn addTarget:self action:@selector(buttonClicked:) forControlEvents:UIControlEventTouchUpInside];
[btn setTag:indexPath.row];
[cell.contentView addSubview:btn]; 
```

然后得到它的标签号——

```
-(void)buttonClicked:(id)sender
{
    NSLog(@"tag number is = %d",[sender tag]);
    //In this case the tag number of button will be same as your cellIndex.
   // You can make your cell from this.

   NSIndexPath *indexPath = [NSIndexPath indexPathForRow:[sender tag] inSection:0];
   UITableViewCell *cell = [tblView cellForRowAtIndexPath:indexPath];
} 
```

**注意：** ***当您的 tableView 只有 1 个部分时，上述解决方案将起作用。如果您的 tableView 有多个部分，您应该知道您的部分索引或使用以下方法。***

**备选方案：1**

```
UIView *contentView = (UIView *)[sender superview];
UITableViewCell *cell = (UITableViewCell *)[contentView superview];
NSIndexPath *indexPath = [tblView indexPathForCell:cell]; 
```

**备选方案：2**

```
CGPoint touchPoint = [sender convertPoint:CGPointZero toView:tblView];
NSIndexPath *indexPath = [tblView indexPathForRowAtPoint:touchPoint];
UITableViewCell *cell = [tblView cellForRowAtIndexPath:indexPath]; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-13T14:35:19.610

鉴于按钮是单元格视图的子视图，并且表格视图知道单元格视图的索引路径，这样的事情会起作用：

```
- (UITableViewCell *)containingCellForView:(UIView *)view
{
    if (!view.superview)
        return nil;

    if ([view.superview isKindOfClass:[UITableViewCell class]]) 
        return (UITableViewCell *)view.superview;

    return [self containingCellForView:view.superview];
}

- (IBAction)buttonClicked:(id)sender
{
    UITableViewCell *containingCell = [self containingCellForView:sender];
    if (containingCell) {
        NSIndexPath *indexPath = [self.tableView indexPathForCell:containingCell];
        NSLog(@"Section: %i Row: %i", indexPath.section, indexPath.row);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-13T14:23:02.563

如果您只需要表格行，那么您可以将按钮的标签属性设置为行号。如果您需要整个路径（带有节号），那么您必须将 UIButton 子类化并创建一个新属性（“indexPath”将是一个好名字），您将在将按钮添加到表格行时设置该属性。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-06-10T11:10:27.197

For a tableview with more than one section a simpler solution would be to assign the tag:

```
cell.button.tag = indexPath.section * 1000 + indexPath.row 
```

In the event handler use:

```
let section = sender.tag / 1000
let row = sender.tag % 1000 
```

Note that you need to multiply with a larger number than 1000 if any of your sections can contain 1000 or more rows.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-07T22:21:20.783

如果将标签添加到 cellForRowAtIndexPath 中的按钮，对我来说有效...

```
cell.button.tag = indexPath.row; 
```

并在单元格类中获取标签...例如：

```
 NSLog(@"tag number is = %d",[sender tag]); 
```

你可以知道cell.row。好吧，这对我有用，对不起我的英语。

# java - App Engine 拉取队列仅加载一部分任务

> ID：11936129
> 
> 赞同：0
> 
> 时间：2012-08-13T14:14:33.267
> 
> 标签：java, google-app-engine, cron, task-queue, pull-queue

我可以设置从任务队列中获取任务之前的最短时间吗？我想在 X 天后处理一项任务，例如有没有简单的方法或者我应该把这些信息放在任务本身？如果大部分任务只能在 3 天内执行，那么每 2 小时加载一次所有任务（例如，使用 cron 作业）听起来效率低下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:49:48.657

您可以设置[`etaMillis`](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/taskqueue/TaskOptions.html#etaMillis%28long%29)或[`countdownMillis`](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/taskqueue/TaskOptions.html#countdownMillis%28long%29)在[`TaskOptions`](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/taskqueue/TaskOptions.html#countdownMillis%28long%29).

在特定时间过去之前，不应允许任何工作人员租用任务，如[Task Queue Python 文档](https://developers.google.com/appengine/docs/python/taskqueue/functions)中所示：

> 参数：倒计时
> 
> 拉取队列中的功能：指定在允许租用任务之前等待多长时间（以秒为单位）。
> 
> 参数：eta
> 
> 拉队列中的功能：指定工作人员可以租用任务的最早时间。没有工人可以租用任务

# php - PHP Hangman 应用程序从右到左

> ID：11936134
> 
> 赞同：1
> 
> 时间：2012-08-13T14:14:49.647
> 
> 标签：php

当你猜字母时，我需要用希伯来语写刽子手游戏。一切正常，但是当我猜这个词时。表示第一个字母是右，但第二个字母不是出现在它的左边，而是出现在它的右边，例如：

A -> AB 我需要它是 A -> BA

代码很长，因为我不允许使用任何循环（我知道这很愚蠢）。这是应用程序主页的链接：http: [//pastebin.com/tmaUFLGi](http://pastebin.com/tmaUFLGi)

我试过使用strrev，没有成功。

感谢您提供的任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:16:55.097

用html5从右到左渲染怎么样？虽然您可以处理变量而无需转换它们。如果您需要用英文展示申请表怎么办？您只需使用一些 css，就这么简单。

[http://www.w3schools.com/html5/att_bdo_dir.asp](http://www.w3schools.com/html5/att_bdo_dir.asp)

# xslt - 在 XSLT 中合并数据并排除重复项

> ID：11936136
> 
> 赞同：0
> 
> 时间：2012-08-13T14:14:57.463
> 
> 标签：xslt

我有一个传入的 XML 文档，其中包含以下表单的一些节点：

```
<userOptions>
  <userOption>
      <type>A</type>
      <plan>
          <frequency>MONTHLY</frequency>
      </plan>
      <method>
          <methodType>X1</methodType>
      </method>
  </userOption>

  <userOption>
      <type>B</type>
      <plan>
          <frequency>QUARTERLY</frequency>
      </plan>
      <method>
          <methodType>X2</methodType>
      </method>
  </userOption>

  <userOption>
    <type>A</type>
      <plan>
        <frequency>3MONTH</frequency>
      </plan>
      <method>
        <methodType>X1-B</methodType>
      </method>
  </userOption>
</userOptions> 
```

我需要将其合并并转换为如下所示的内容：

```
<userOptions>
    <userOption>
      <type>A</type>
      <plan>
         <frequency>3MONTH</frequency>
         <methodType>X1-B</methodType>
      </plan>
      <plan>
         <frequency>MONTHLY</frequency>
         <methodType>X1</methodType>
      </plan>
    <userOption>
    <userOption>
      <type>B</type>
      <plan>
         <frequency>QUARTERLY</frequency>
         <methodType>X2</methodType>
      </plan>
    <userOption>
</userOptions> 
```

我目前的转型是这样的：

```
<userOptions>
    <xsl:for-each select="//userOptions">
        <userOption>
            <type>
                <xsl:value-of select="type" />
            </type>

            <xsl:variable name="currentType" select="type"/>
            <xsl:message><xsl:value-of select="$currentType"/></xsl:message>

            <xsl:variable name="currentMethod" select="method/methodType"/>
            <xsl:message><xsl:value-of select="$currentMethod/></xsl:message>

            <plan>
                <frequency>
                    <xsl:value-of select="plan/frequency" />
                </frequency>
                <method>
                    <xsl:value-of select="method/methodType" />
                </method>
            </plan>

            <xsl:for-each select="../userOptions[type=$currentType and method/methodType!=$currentMethod]">

                <plan>
                    <frequency>
                        <xsl:value-of select="plan/frequency" />
                    </frequency>
                    <method>
                        <xsl:value-of select="method/methodType" />
                    </method>
                </plan>

            </xsl:for-each>
        </userOption>
    </xsl:for-each>
</userOptions> 
```

问题是我得到了重复，例如：

```
 <userOption>
      <type>A</type>
      <plan>
         <frequency>3MONTH</frequency>
         <methodType>X1-B</methodType>
      </plan>
      <plan>
         <frequency>MONTHLY</frequency>
         <methodType>X1</methodType>
      </plan>
    <userOption>
    <userOption>
      <type>A</type>
      <plan>
         <frequency>MONTHLY</frequency>
         <methodType>X1</methodType>
      </plan>
      <plan>
         <frequency>3MONTH</frequency>
         <methodType>X1-B</methodType>
      </plan>
    <userOption> 
```

我不确定如何合并匹配`type`和不同的记录，`methodType`但也要避免重复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T15:37:51.983

这是[Muenchian 分组](http://www.jenitennison.com/xslt/grouping/muenchian.html)方法的一个很好的候选：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:key name="user-type" match="userOption" use="type" />
  <xsl:template match="/">
    <userOptions>
      <!-- this for-each iterates over a node set consisting of just
      the *first* userOption element for each type -->
      <xsl:for-each select="userOptions/userOption[count( . | key('user-type', type)[1]) = 1]">
        <userOption>
          <xsl:copy-of select="type" />
          <!-- apply templates for all userOption elements of this type
          (including the one we are currently for-eaching over) -->
          <xsl:apply-templates select="key('user-type', type)" />
        </userOption>
      </xsl:for-each>
    </userOptions>
  </xsl:template>

  <xsl:template match="userOption">
    <plan>
      <frequency>
        <xsl:value-of select="plan/frequency" />
      </frequency>
      <method>
        <xsl:value-of select="method/methodType" />
      </method>
    </plan>
  </xsl:template>
</xsl:stylesheet> 
```

这是一种定义节点组的好方法，然后通过仔细使用键，为每个组而不是每个节点迭代一次。如果您可以使用 XSLT 2，那么语言 ( ) 中内置了一个更直接的方法，`<xsl:for-each-group>`但在 XSLT 1 中不可用。

# c# - C# 中具有奇怪行为的自动完成文本框

> ID：11936137
> 
> 赞同：0
> 
> 时间：2012-08-13T14:14:57.667
> 
> 标签：c#, winforms, autocomplete

在 C# 的 Windows.Forms 表单中，我有一个组合框和一个文本框。文本框使用 AutoCompleteCustomSource 打开了 AutoComplete。AutoCompleteCustomSource 中的元素取决于组合框的选定值。这意味着每次组合框的值更改时，我都必须更改 AutoComplete 值。但是这样做我经历了一些我不喜欢的奇怪行为：

*   离开并重新进入文本框后，自动完成的文本保持选中状态
*   离开并重新输入文本框时，光标将始终放置在文本的末尾，即使我单击字符之间的某个位置
*   使用退格键会导致出现提示框

我有以下简短的示例代码，它显示了所描述的行为。例如，尝试在文本框中输入“必须”。在键盘上按 TAB 后，应建议并附加“Mustang”。现在从组合框中选择“福特”并重新输入文本框以了解我的意思。

**Form2.Designer.cs**

```
partial class Form2
{
    /// <summary>
    /// Required designer variable.
    /// </summary>
    private System.ComponentModel.IContainer components = null;

    /// <summary>
    /// Clean up any resources being used.
    /// </summary>
    /// <param name="disposing">true if managed resources should be disposed; otherwise, false.</param>
    protected override void Dispose(bool disposing)
    {
        if (disposing && (components != null))
        {
            components.Dispose();
        }
        base.Dispose(disposing);
    }

    #region Windows Form Designer generated code

    /// <summary>
    /// Required method for Designer support - do not modify
    /// the contents of this method with the code editor.
    /// </summary>
    private void InitializeComponent()
    {
        this.comboBox1 = new System.Windows.Forms.ComboBox();
        this.label1 = new System.Windows.Forms.Label();
        this.label2 = new System.Windows.Forms.Label();
        this.textBox1 = new System.Windows.Forms.TextBox();
        this.textBox2 = new System.Windows.Forms.TextBox();
        this.SuspendLayout();
        // 
        // comboBox1
        // 
        this.comboBox1.FormattingEnabled = true;
        this.comboBox1.Items.AddRange(new object[] {
        "Audi",
        "Fiat",
        "Ford",
        "VW"});
        this.comboBox1.Location = new System.Drawing.Point(87, 12);
        this.comboBox1.Name = "comboBox1";
        this.comboBox1.Size = new System.Drawing.Size(193, 21);
        this.comboBox1.TabIndex = 0;
        // 
        // label1
        // 
        this.label1.AutoSize = true;
        this.label1.Location = new System.Drawing.Point(1, 15);
        this.label1.Name = "label1";
        this.label1.Size = new System.Drawing.Size(38, 13);
        this.label1.TabIndex = 1;
        this.label1.Text = "Brand:";
        // 
        // label2
        // 
        this.label2.AutoSize = true;
        this.label2.Location = new System.Drawing.Point(1, 64);
        this.label2.Name = "label2";
        this.label2.Size = new System.Drawing.Size(34, 13);
        this.label2.TabIndex = 2;
        this.label2.Text = "Type:";
        // 
        // textBox1
        // 
        this.textBox1.Location = new System.Drawing.Point(87, 61);
        this.textBox1.Name = "textBox1";
        this.textBox1.Size = new System.Drawing.Size(193, 20);
        this.textBox1.TabIndex = 3;
        // 
        // textBox2
        // 
        this.textBox2.Location = new System.Drawing.Point(12, 110);
        this.textBox2.Multiline = true;
        this.textBox2.Name = "textBox2";
        this.textBox2.ReadOnly = true;
        this.textBox2.Size = new System.Drawing.Size(268, 144);
        this.textBox2.TabIndex = 4;
        // 
        // Form2
        // 
        this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
        this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
        this.ClientSize = new System.Drawing.Size(292, 266);
        this.Controls.Add(this.textBox2);
        this.Controls.Add(this.textBox1);
        this.Controls.Add(this.label2);
        this.Controls.Add(this.label1);
        this.Controls.Add(this.comboBox1);
        this.Name = "Form2";
        this.Text = "Form2";
        this.ResumeLayout(false);
        this.PerformLayout();

    }

    #endregion

    private System.Windows.Forms.ComboBox comboBox1;
    private System.Windows.Forms.Label label1;
    private System.Windows.Forms.Label label2;
    private System.Windows.Forms.TextBox textBox1;
    private System.Windows.Forms.TextBox textBox2;
} 
```

**Form2.cs**

```
public partial class Form2 : Form
{
    private string[] types_audi = new string[] { "A4" };
    private string[] types_ford = new string[] { "Mustang", "Focus" };
    private string[] types_fiat = new string[] { "Punto", "500" };
    private string[] types_vw = new string[] { "Golf" };
    private List<string[]> types = new List<string[]>();

    public Form2()
    {
        InitializeComponent();

        this.types.Add(this.types_audi);
        this.types.Add(this.types_ford);
        this.types.Add(this.types_fiat);
        this.types.Add(this.types_vw);

        this.textBox1.AutoCompleteMode = AutoCompleteMode.SuggestAppend;
        this.textBox1.AutoCompleteSource = AutoCompleteSource.CustomSource;
        this.textBox1.AutoCompleteCustomSource = new AutoCompleteStringCollection();
        this.textBox1.AutoCompleteCustomSource.AddRange(this.types_audi);
        this.textBox1.AutoCompleteCustomSource.AddRange(this.types_fiat);
        this.textBox1.AutoCompleteCustomSource.AddRange(this.types_ford);
        this.textBox1.AutoCompleteCustomSource.AddRange(this.types_vw);

        this.textBox1.Enter += new EventHandler(this.textBox1_Enter);
        this.textBox1.Leave += new EventHandler(this.textBox1_Leave);
        this.comboBox1.Select();
    }

    private void textBox1_Leave(object sender, EventArgs e)
    {
        this.textBox2.Clear();
    }

    private void textBox1_Enter(object sender, EventArgs e)
    {
        // reset AutoCompleteCustomSource
        this.textBox1.AutoCompleteCustomSource.Clear();

        switch (this.comboBox1.SelectedItem as string)
        {
            case "Audi":
                this.textBox1.AutoCompleteCustomSource.AddRange(this.types_audi);
                break;
            case "Ford":
                this.textBox1.AutoCompleteCustomSource.AddRange(this.types_ford);
                break;
            case "Fiat":
                this.textBox1.AutoCompleteCustomSource.AddRange(this.types_fiat);
                break;
            case "VW":
                this.textBox1.AutoCompleteCustomSource.AddRange(this.types_vw);
                break;
            default:
                this.textBox1.AutoCompleteCustomSource.AddRange(this.types_audi);
                this.textBox1.AutoCompleteCustomSource.AddRange(this.types_fiat);
                this.textBox1.AutoCompleteCustomSource.AddRange(this.types_ford);
                this.textBox1.AutoCompleteCustomSource.AddRange(this.types_vw);
                break;
        }

        this.textBox2.Text = "Possible values: " + Environment.NewLine;

        foreach (var val in this.textBox1.AutoCompleteCustomSource)
        {
            this.textBox2.Text += Environment.NewLine + val;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T15:06:48.993

您可以创建一个新的字符串对象来存储组合框中先前选定的项目，如果组合中的选定项目与先前选定的项目不同，则在 textBox1_Enter 方法中清除 textBox1，然后将先前选定的项目设置为当前选定的项目。

它应该是这样的：

```
private void textBox1_Enter(object sender, EventArgs e)
{
    // reset AutoCompleteCustomSource
    var selectedItem = comboBox1.SelectedItem as string;

    if (string.Compare(this.previouslySelectedItem, selectedItem) != 0)
    {
        this.textBox1.Clear();
        this.previouslySelectedItem = selectedItem;
    }

    this.textBox1.AutoCompleteCustomSource.Clear();

    switch (this.comboBox1.SelectedItem as string)
    {
        case "Audi":
            this.textBox1.AutoCompleteCustomSource.AddRange(this.types_audi);
            break;
        case "Ford":
            this.textBox1.AutoCompleteCustomSource.AddRange(this.types_ford);
            break;
        case "Fiat":
            this.textBox1.AutoCompleteCustomSource.AddRange(this.types_fiat);
            break;
        case "VW":
            this.textBox1.AutoCompleteCustomSource.AddRange(this.types_vw);
            break;
        default:
            this.textBox1.AutoCompleteCustomSource.AddRange(this.types_audi);
            this.textBox1.AutoCompleteCustomSource.AddRange(this.types_fiat);
            this.textBox1.AutoCompleteCustomSource.AddRange(this.types_ford);
            this.textBox1.AutoCompleteCustomSource.AddRange(this.types_vw);
            break;
    }

    this.textBox2.Text = "Possible values: " + Environment.NewLine;

    foreach (var val in this.textBox1.AutoCompleteCustomSource)
    {
        this.textBox2.Text += Environment.NewLine + val;
    }
} 
```

# java - Android ContentResolver.update() 产生重复

> ID：11936138
> 
> 赞同：1
> 
> 时间：2012-08-13T14:15:03.753
> 
> 标签：java, android, android-contentprovider

我在以前的项目中与 ContentProviders 合作过，这一直对我有用，但是这次我无法解决这个问题。当我使用 Content Resolver 运行 update() 时，它会复制数据库中的对象而不是更新它。

这是触发更新的代码。它仅在 ContentValues 中包含所需的更新数据，而不是对象的完整重复。where语句中的索引变量是对象在数据库中的行号，这个索引是正确的。

```
ContentValues cv = new ContentValues();
cv.put(MessageProvider.KEY_MESSAGE_STATUS, m.getStatus());
cr.update(MessageProvider.CONTENT_URI_MESSAGE, cv, MessageProvider.KEY_ID + "=" + index, null); 
```

我不相信这段代码有问题，因为我尝试过更改它，但它仍然会产生相同的重复。我的替代方法是在 Uri 中包含行索引。

这是来自内容提供者的代码。

```
@Override
public int update(Uri uri, ContentValues values, String where,
        String[] whereArgs) {

    int count = 0;
    String whereString;

    switch (uriMatcher.match(uri)) {
    case MESSAGE:
        count = messageDB.update(MESSAGE_TABLE, values, where, whereArgs);
        break;

    case MESSAGE_ID_:
        String segment = uri.getPathSegments().get(1);

        if (!TextUtils.isEmpty(where)) {
            whereString = " AND (" + where + ')';
        } else {
            whereString = "";
        }

        count = messageDB.update(MESSAGE_TABLE, values, KEY_ID + "="
                + segment + whereString, whereArgs);
        break;

    default: throw new IllegalArgumentException("Unsupported URI " + uri);

    }

    getContext().getContentResolver().notifyChange(uri, null);
    return count;
} 
```

这里没有什么是不正确的，但我相信更多专家的眼睛将能够提供帮助！非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T22:19:51.187

感谢您的回复，非常感谢！

在深入研究代码并调试之后，代码似乎很好，正如我已经说过的那样，我是这么认为的。结果证明这个问题与内容提供者无关，这是服务器后端的错误，包括响应应用程序的错误数据。

感谢您发布想法。我的经验教训：在找到解决方案之前不要离开调试器，即使确实需要几天时间......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T14:44:51.090

我想到的事情是。

您是否验证过 where 子句是正确的并且它指向实际存在的记录。

当您有一个实际上不存在的 where 子句时， messageDB.update 如何处理？

我自己没有与 ContentProviders 合作过。但这似乎是一个可能的错误来源。

# objective-c - 找不到 NSScrollView 的种类

> ID：11936144
> 
> 赞同：0
> 
> 时间：2012-08-13T14:15:21.960
> 
> 标签：objective-c, cocoa, nsscrollview

如何将这样的徽章附加到 NSScrollView？我不知道它是否是一个自定义框架，但它看起来像是修改了 NSScrollView。

![滚动视图](../Images/512bd443b448e808f7bc2c87f234dcc6.png)

谢谢，MCPP。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T14:50:04.767

提供您所追求的效果的不是滚动视图，而是`NSOutlineView`配置为源列表。

为了获得徽章等，您必须处理数据显示，如果您使用基于单元格或基于视图的`NSOutlineView`.

由于`NSOutlineView`是您的子类，`NSTableView`因此您应该确保阅读两者的文档，因为`NSOutlineView`文档假定了解其超类的工作原理。

[NSOutlineView](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSOutlineView_Class/Reference/Reference.html)的文档将为您提供初始起点，但请准备好自己进行一些挖掘。

[这里](http://developer.apple.com/library/mac/#samplecode/SourceView/Introduction/Intro.html)有一个来自 Apple 的演示项目，但请注意它使用了一个`NSTreeController`，您可能希望或可能不希望在自己的实现中这样做。

# c - 串口 readfile() 输出什么类型的参数？在 C/C++ 中

> ID：11936147
> 
> 赞同：0
> 
> 时间：2012-08-13T14:15:33.313
> 
> 标签：c, file-io, parameters, serial-port

我花了很长时间找出从串口发出的数据的实际来源类型。由于我想要逐字节的数据，如果我只使用`char[]`缓冲区读取，我看不到他的正确答案！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:22:42.197

您只需将字节写入串行端口。在接收端读回它们时，只需读入`unsigned char`缓冲区即可。要正确解释数据，您需要知道数据发送时的结构。这通常由某种协议指定，以便您可以检测到传输的结束（例如 Modbus 协议）。如果您知道您收到的数据包的结构（以及例如用于解释多字节整数和浮点数的字节顺序），那么将您收到的数据重新解释为原始字节数组应该没有问题。您的问题有点不清楚，但这就是我推断您要问的问题。

# jquery - 在 jqGrid 中使“搜索”远程和其他所有内容（排序、分页等）本地化

> ID：11936149
> 
> 赞同：3
> 
> 时间：2012-08-13T14:15:42.377
> 
> 标签：jquery, django, jqgrid

我正在开发一个 Django 项目，该项目使用 JQgrid 显示数据库中的数据。

我想要实现的是只连接搜索选项以执行远程搜索，其中服务器将返回结果集，并且所有其他 jqgrid 选项（如列排序、分页等）都将在客户端执行。

我知道这可以通过在事件之间设置和`loadonce:true`切换`'datatype'`参数来完成，具体取决于我是单击排序还是下一页、搜索等。`'local'``'json'``.click()`

还有另一种方法可以做到这一点吗？如果没有，你们能否建议一种干净的方式来完成上述黑客攻击。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T19:32:52.647

我设法完成了这件事，我很高兴与大家分享这个。我已经在解释下方发布了我的整个 jqgrid 代码供您参考。

所以首先，我使用 JSON 作为结果，因此使用 jsonReader。

接下来，以下是特定于实现 {{search: remote},{sorting: local}, {pagination: local}} 行为的设置。

1.  设置`loadonce: false`或点击“搜索”按钮不会点击服务器，而是始终进行本地搜索。

2.  我想实现 jqGrid 的多重搜索功能，因此让微小的“放大镜”出现在您的寻呼机栏中。

    ```
    jQuery("#list2").jqGrid('navGrid','#pager2',{ del:false,add:false,edit:false},{},{},{},{multipleSearch:true}); 
    ```

3.  现在我实现远程搜索功能的方法是在 onSearch 和 onClose 事件上将数据类型从本地切换到 json。即在触发搜索查询（即单击“查找”按钮）时，我将 loadonce 设置为 false 并将数据类型设置为 json。这确保了远程搜索。现在我们的网格填充了远程搜索数据，我们必须切换回 datatype:local，但是显式设置它 onClose 不起作用，所以我设置 loadonce: true 稍后设置 datatype: local 本身。另请注意，我有 closeAfterSearch: true、closeOnEscape: true，因此我确保在触发搜索查询后始终关闭 onClose 事件。

    ```
    jQuery("#list2").jqGrid('searchGrid', {multipleSearch: true, closeAfterSearch: true, closeOnEscape: true,
                                                        onSearch: function(){$("#list2").setGridParam({loadonce: false, datatype: 'json'});
                                                                                        $("#list2").trigger("reloadGrid");                                  
                                                                                        },                                                              onClose: function(){$("#list2").trigger("reloadGrid");                                                                                  
                                                                                    $("#list2").setGridParam({loadonce: true});
                                                                                    $(".ui-icon-refresh").trigger('click');                                                                                 
                                                                                    }
                                                    }); 
    ```

加载结果`$(".ui-icon-refresh").trigger('click');`后强制刷新。在某些情况下这是必要的（不知道为什么）。我自己偶然发现了这个修复程序，我不确定它为什么会起作用。如果您有想法，我很想知道它背后的原因。

1.  最后，每次我的网格加载时，默认情况下都会弹出搜索框。所以我通过简单地让 jquery 单击模态框的“x”按钮来强制关闭它。哈克但有效！:P

    ```
    $(".ui-icon-closethick").trigger('click'); 
    ```

<<<整个jqGrid代码>>>

请原谅我在代码中的'xyz'。我在那里有一些 Django 代码，所以我只是用 xyz 替换它以避免任何混淆。

```
jQuery(document).ready(function(){ 

  $("#list2").jqGrid({

    url:'xyz',
    datatype: 'json',
    loadonce: false,
    mtype: 'GET',
    colNames:xyz
    colModel :xyz,
    jsonReader : {
                repeatitems: false,
                root: "rows",
                page: "page",
                total: "total",
                records: "records"
        },
    height: '100%',
    width: '100%',
    pager: '#pager2',
    rowNum:15,
    rowList:[10,15,30],
    viewrecords: true,
    caption: '&nbsp',
     autowidth: false,
     shrinkToFit: true,
     ignoreCase:true,
     gridview: true

   });
  jQuery("#list2").jqGrid('navGrid','#pager2',{ del:false,add:false,edit:false},{},{},{}, {multipleSearch:true});
  jQuery("#list2").jqGrid('navButtonAdd', '#pager2',
                         {
                             caption: "", buttonicon: "ui-icon-calculator", title: "choose columns",
                             onClickButton: function() {
                                 jQuery("#list2").jqGrid('columnChooser');
                            }
                         });
  jQuery("#list2").jqGrid('searchGrid', {multipleSearch: true, closeAfterSearch: true, closeOnEscape: true,
                                                        onSearch: function(){$("#list2").setGridParam({loadonce: false, datatype: 'json'});
                                                                                        $("#list2").trigger("reloadGrid");                                  
                                                                                        }, 

                                                        onClose: function(){$("#list2").trigger("reloadGrid");                                                                                  
                                                                                    $("#list2").setGridParam({loadonce: true});
                                                                                    $(".ui-icon-refresh").trigger('click');                                                                                 
                                                                                    }
                                                    });

  $(window).bind('resize', function () {
    clearTimeout(resizeTimer);
    resizeTimer = setTimeout(resizeGrids, 60);
    divwidth = $(".content-box-header").width() - 40;
    //alert(divwidth);
   $("#list2").setGridWidth(divwidth,true);

    }); 

    $(window).resize();
    $(".ui-icon-closethick").trigger('click');

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T12:53:50.097

如果您查看下面的代码，我正在工具栏上的两个日期之间进行搜索，“e”是我正在使用的控件的 ID。现在关键因素是名为“search”的属性，如果您将其设置为“true”，它将执行客户端搜索，false 将对您为搜索调用的任何 ajax 方法执行远程搜索。

```
 var gridFilter;
        var fieldId = e.replace('#', '');
        var fieldForFilter = fieldId.replace('gs_', '');//All toolbar filters Id's are the same as the column Id but prefixed with "gs_"
        var splitteddates = $("#" +fieldId).val().split('-');
        var grid = $("#GridJq1");
        gridFilter = { groupOp: "AND", rules: [] };
        gridFilter.rules.push({ field: "" + fieldForFilter + "", op: "gt", data: "" + $.trim(splitteddates[0]) + "" });
        gridFilter.rules.push({ field: "" + fieldForFilter + "", op: "lt", data: "" + $.trim(splitteddates[1]) + "" });
        grid[0].p.search = true;//specifies wether to do a client search or a server search which will be done manually. true=client search
        $.extend(grid[0].p.postData, { filters: JSON.stringify(gridFilter) });//combine post data and newly added filter data
        grid.trigger("reloadGrid", [{ page: 1, current: true}]);//reset to page and keep current selection if any 
```

如果我没记错的话，上面用于构建搜索的部分代码来自著名的 JQGrid Oleg 的答案，如果这是他的代码的一部分，那么对他表示敬意。

# flash - SiteCatalyst 15 - 视频跟踪、s.Media.open() 和 .play() 不起作用！我需要一个工作示例

> ID：11936151
> 
> 赞同：2
> 
> 时间：2012-08-13T14:15:45.043
> 
> 标签：flash, video, tracking, adobe-analytics

我使用 SiteCatalyst 15 并在我们的 Flash 视频播放器中安装了 AppMeasurement.swc。

我按照omniture文档中的步骤进行操作。“网络分析师的测量视频” [http://microsite.omniture.com/t2/help/en_US/sc/appmeasurement/video/index.html#Measuring_Video_for_Web_Analysts](http://microsite.omniture.com/t2/help/en_US/sc/appmeasurement/video/index.html#Measuring_Video_for_Web_Analysts)

另外，我复制了以下代码作为起点。“ActionScript 示例代码” [http://microsite.omniture.com/t2/help/en_US/sc/appmeasurement/video/index.html#ActionScript_Sample_Code](http://microsite.omniture.com/t2/help/en_US/sc/appmeasurement/video/index.html#ActionScript_Sample_Code)

当我测试视频播放器时，s.track() 实际上正在工作并向 SiteCatalyst 服务器发送参数，但 s.Media.open() 和 s.Media.play() 不工作。

我有点困惑我的 AS3.0 代码出了什么问题，所以我想找到任何 Flash 视频跟踪的工作示例。

谢谢您的帮助。

# search - ExpressionEngine -> 搜索模块问题

> ID：11936154
> 
> 赞同：0
> 
> 时间：2012-08-13T14:15:45.557
> 
> 标签：search, module, expressionengine

我们的搜索模块功能一直存在很多问题。

这是标签：

```
{exp:search:simple_form channel="courses|static_courses|courses_general|online_courses" no_result_page="search/noresults" status="open" search_in="everywhere" where="exact"}
<input type="text" name="keywords" id="keywords" value="Search NA" class="mr10" 'Search NA')"/>
<input type="hidden" name="orderby" value="title"/>
<input type="hidden" name="sort_order" value="asc"/>
<input type="submit" class="darkBtn" value="SEARCH"/>
{/exp:search:simple_form} 
```

如果我设置 where=“any”，它会带来很多结果，但其中大多数在页面上没有一个搜索词。
如果我设置 where=“all”，它永远不会显示任何结果。
如果我设置 where=“exact”，它有时会显示完整的搜索词，但并非总是如此。

关于我需要寻找什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T15:06:19.577

`where="all"`是我最常用的参数。这是大多数人在搜索语法方面所习惯的。

如果您没有得到任何结果，请检查以下几点：

*   确保您的所有频道字段都设置为可在其字段设置屏幕上搜索
*   确保您期望结果的条目未设置为自定义状态或未来日期（在这些情况下，您需要添加`status="not closed"`和`show_future_entries="yes"`/或`show_expired="yes"`）
*   如果您使用第三方字段类型，请查看它们实际存储在`exp_channel_data`表字段中的内容（它们可能会在前端输出您的数据，但该数据可能存储在第三方数据库表中，或者以其他方式编码，使其对搜索模块不可见）

# payment-gateway - 收集和进行 ACH 付款

> ID：11936165
> 
> 赞同：1
> 
> 时间：2012-08-13T14:16:33.790
> 
> 标签：payment-gateway, payment, credit-card, payment-processing, payment-services

我们正在创建一个带有 PHP 后端的平台，客户可以通过该平台使用他们的信用卡或关联的支票账户购买服务。该平台将收取付款，取出他们的费用并将剩余部分转交给履行客户订单的企业。付款将直接存入履行公司的支票账户。

我知道 PayPal 提供了他们的 Advanced Payments 和 Payment Pro 解决方案来解决这个问题，但我们正在尝试确定一个支付平台，允许通过直接 ACH 借记/付款来完成此操作。

我们研究了以下内容，但这些内容并未为此用例提供解决方案：

*   [https://samurai.feefighters.com](https://samurai.feefighters.com)
*   授权网
*   [http://www.firstdata.com/global-selector.html](http://www.firstdata.com/global-selector.html)
*   条纹网

任何人都知道可以解决此需求的解决方案吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T03:19:24.217

看看[平衡](https://www.balancedpayments.com)。我们处理信用卡和 ACH 存款。

Balanced 还有一个 ACH 借记 API 正在开发中，请在[Github repo](https://github.com/balanced/balanced-api/issues/milestones)上查看规范和讨论。借记 API 有望在一个月内投入生产。

# authentication - 我的 sudzc loginHandler 只返回 NSString。如何获取返回的 Innertoken？

> ID：11936174
> 
> 赞同：1
> 
> 时间：2012-08-13T14:17:08.653
> 
> 标签：authentication, soap, return-value, sudzc

当我在 Soap 服务的 wsdl 上使用从 SUDZC 生成的 LoginHandler 时，我只会看到以下输出：

```
Login returned the value: OK 
```

但是，当我启用 service.logging 时，我会得到以下输出：

```
<soap:Body>
  <LoginResponse xmlns="http://tempuri.org/">
     <LoginResult>OK</LoginResult>
     <authToken>
        <InnerToken>21017998-02fd-4ac9-b132-98c0cb2fd1bf</InnerToken>
     </authToken>
  </LoginResponse> 
```

我需要获取 InnerToken 值并将其保留以供后续 SOAP 调用使用（即需要将其添加到 service.headers 成员中）。关于如何从上述结果中获取 InnerToken 的任何想法？

我正在使用以下 LoginHandler 代码片段。

```
- (void) LoginHandler: (id) value {
  // Handle errors
  if([value isKindOfClass:[NSError class]]) {
    NSLog(@"%@", value);
    return;
  }
  // Handle faults
  if([value isKindOfClass:[SoapFault class]]) {
    NSLog(@"%@", value);
    return;
  }
  // Do something with the NSString* result
  NSString* result = (NSString*)value;
  NSLog(@"Login returned the value: %@", result);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:30:19.880

在（生成的）SoapRequest.m 文件中，我更改了以下内容：

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    ...
    if(self.handler != nil && [self.handler respondsToSelector: self.action]) {
        objc_msgSend(self.handler, self.action, output);
} 
```

进入：

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    ...
    if(self.handler != nil && [self.handler respondsToSelector: self.action]) {
        objc_msgSend(self.handler, self.action, element);
} 
```

这解决了我的问题！

# wordpress - 使用 baseurl 获取查询 ID

> ID：11936176
> 
> 赞同：0
> 
> 时间：2012-08-13T14:17:16.230
> 
> 标签：wordpress

我正在从 wordpress 中的列表中创建单个项目信息。我在 wordpress 中创建了汽车列表页面。我在模板根目录中也有一个 singlecar.php 文件。

现在我想将汽车列表项 id 传递给单个列表。我该怎么做？

***汽车.php***

Cartitle：Manza（将可链接）

```
<a href="car.php?carid=1">Manza</a> 
```

***汽车.php***

```
$_GET['carid']; 
```

如果我在 wordpress 中创建自定义页面模板怎么办？

> 我需要 url 结构。我正在从一个名为 wp_cars 的自定义表中查询...首先，所有列表都会出现在名为 cars.php 的列表页面中，然后每个列表都有一个视图。因此，当用户单击标题时，我需要 url 结构将用户传递到单个视图。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T20:18:46.963

也许有点切线，但我建议你在这里查看 wp-mvc 插件和相关文档：[http ://wpmvc.org/documentation/70/tutorial/](http://wpmvc.org/documentation/70/tutorial/)

它使基于数据库中的记录列表创建视图变得相当容易，并链接到单个记录，并允许您轻松添加管理视图来管理数据。

# c# - C＃ 。在文本中查找自定义标签

> ID：11936179
> 
> 赞同：0
> 
> 时间：2012-08-13T14:17:24.017
> 
> 标签：c#, regex

纯文本包含一个名为 <code> 的自定义标记。在标签内有纯文本或 XML。

例如：

```
bla-bla-bla  
    <code lang="cs">
        public static void main(){}
    </code>
bla-bla-bla 
```

或者

```
bla-bla-bla
    <code lang="xaml">
        <StackPanel>
            <Button Content="Click Me"/>
        </StackPanel>
    </code>
bla-bla-bla 
```

我需要使用正则表达式找到所有带有内容的 <code> 标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:22:01.700

这对我有用（你需要打开 Singleline 才能工作）：

```
<code[^>]*>(.*?)<\/code> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T14:33:01.307

如果您不想明确使用单行模式，请使用此代码：

```
<code[^>]*>((?:.|\n|\r)*?)<\/code> 
```

[在这里查看测试](http://regexpr.com/?pattern=/%3Ccode%5B%5E%3E%5D%2a%3E%28%28?%3a.%7C%5Cn%7C%5Cr%29%2a?%29%3C%5C/code%3E/&subject=bla-bla-bla%0D%0A%20%20%20%20%3Ccode%20lang=%22xaml%22%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CStackPanel%3E%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CButton%20Content=%22Click%20Me%22/%3E%0D%0A%20%20%20%20%20%20%20%20%3C/StackPanel%3E%0D%0A%20%20%20%20%3C/code%3E%0D%0Abla-bla-bla)

# html - 如何制作一个以两侧空白为中心的固定流体表？

> ID：11936182
> 
> 赞同：0
> 
> 时间：2012-08-13T14:17:28.293
> 
> 标签：html, css, fluid-layout

我做了一个 JS fiddle，让它在 Chrome 和 Safari 中正常工作：

[http://jsfiddle.net/ZWvzB/](http://jsfiddle.net/ZWvzB/)

但这在 Firefox 中的工作方式不同。在 Firefox 中，它是右对齐的。

任何人都知道我怎样才能使这对 Firefox 和 Chrome 都有效？而且...还有.. IE ？

我希望这不会让任何人失望，但要让它只在 FF 而**不是**chrome 中工作，我所做的是让`.sticky`类的宽度设置为`inherit`. 然后它将仅适用于 FF 和 Safari。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T14:52:01.333

我会这样做：

**CSS**

```
.sticky
{
    position:fixed;
    top:0;
    left:31px;
    right:31px;
}
.sticky table
{
    border:1px solid blue;
    width:100%;
    border-spacing:0;
    border-collapse:collapse;
}
.sticky table tr
{
    background:blue;
    padding:5px;
    text-align:center;
} 
```

**HTML**

```
<div class="sticky">
    <table>
        <tbody>
            <tr><td>Crazy Fixed Div</td></tr>
        </tbody>
    </table>
</div> 
```

**[演示](http://jsfiddle.net/ZWvzB/34/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T14:25:54.240

这将涵盖 Firefox

```
.sticky { 
text-align: -webkit-center;    //Chrome
text-align: -moz-center;   //FireFox
text-align: center;  
position: fixed;
top: 0;
left: 0;
z-index: 120;  
padding: 0 31px;
width: 100%;    
display: inline-table;
} 
```

您也可以使用自动边距居中，因为这可能是首选方式

```
 margin: auto; 
```

这是 FireFox 中的基本居中；

```
.sticky-container {
 text-align: -moz-center;
 width: 100%;   
 position: fixed;   
}

  .sticky {
position: relative;
width: 100px;
z-index: 120; 
```

}

# .net - 在模拟器上部署的 WP 7 应用程序和桌面应用程序之间进行通信

> ID：11936186
> 
> 赞同：0
> 
> 时间：2012-08-13T14:17:35.387
> 
> 标签：.net, windows-phone-7, localhost, tcpclient

目前我有一个使用`TcpListener`该类与客户端通信的服务器。我必须测试 Windows Phone 客户端应用程序和服务器之间的通信。

问题是在开发我的服务器时正在监听`IPAdress.Loopback`我机器上的（localhost）。

有没有办法从模拟器创建到服务器的连接，所以我可以测试任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T15:37:53.703

好吧，如果我没记错的话，您需要在 TCPListener 上设置一个端口，如果该端口与 VS 正在侦听的端口相同，那么我们就会遇到问题，下面的文章详细解释了如何使用 TCPListener 设置正确的连接

[http://msdn.microsoft.com/en-us/library/system.net.sockets.tcplistener.aspx](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcplistener.aspx)

您可以设置一台笔记本电脑并打开您的服务器/客户端，然后让您的模拟器连接到该机器的专用网络地址，然后您可以进行测试，否则我通常会在我的桌面上启动一个虚拟机并连接到它以测试服务器/客户的东西

# android - 如何以及在哪里注册用于从应用程序向设备所有者发送电子邮件的电子邮件帐户？

> ID：11936193
> 
> 赞同：0
> 
> 时间：2012-08-13T14:18:04.223
> 
> 标签：android

我编写了一个（android）应用程序，可以向设备用户发送电子邮件。用户的 gmail 帐户从设备中读取，并用作电子邮件的发件人和收件人地址。这些电子邮件目前是通过 gmail smtp 服务器发送的，通过我注册的电子邮件帐户（名称与应用程序的名称相对应）。该应用程序使用正确的密码以编程方式登录我的帐户，并将电子邮件发送到用户的帐户。它工作了很短的时间。然后 gmail 似乎对这个电子邮件帐户正在从世界各地（即从我的各种/不同客户使用的应用程序）登录这一事实作出反应，他们怀疑该帐户被劫持。他们强迫我更改密码。所以这个设置似乎不再有效。

所以我的问题是：如何做到这一点？使用另一个电子邮件帐户发送电子邮件？如何？在哪里？还是有另一种方法可以为此目的使用 gmail smtp 服务器？

问候， 泰尔杰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:27:22.933

**原因：** 向我们解释为什么您要在发送邮件的同一台设备上发送电子邮件......有人可能会为您提供更好的解决方案来解决您想要实现的目标。

**回答：** 实现您想要做的最好最可靠的方法是设置您自己的网络服务器（最便宜的网络托管公司的最便宜的可以工作），它将附带您自己的预配置 smtp 服务。

然后调用此服务器上的 Web 服务，该服务将从服务器发送电子邮件。

Web 服务可以像一个 php 脚本一样简单，只需一行：

```
<?php
     $to      = 'personne@example.com';
     $subject = 'subject';
     $message = 'Hello !';
     $headers = 'From: webmaster@example.com' . "\r\n" .
     'Reply-To: webmaster@example.com' . "\r\n";

     mail($to, $subject, $message, $headers);
 ?> 
```

当然，您将从您的 Android 应用程序发送的 GET 或 POST 变量中获取变量。

您可以像我上面所做的那样使其非常安全或非常松散，如果您更改了 smtp，您只需在网络服务器上更改一次，所有已安装的应用程序将自动能够继续向您的用户发送电子邮件。

# javascript - UJS + Bootstrap 按钮加载

> ID：11936204
> 
> 赞同：0
> 
> 时间：2012-08-13T14:18:51.410
> 
> 标签：javascript, ruby-on-rails-3, twitter-bootstrap

我正在使用带有 Rails Unobtrusive JavaScript [http://twitter.github.com/bootstrap/javascript.html#buttons的 Twitter Bootstrap 的按钮加载状态](http://twitter.github.com/bootstrap/javascript.html#buttons)

form 元素使用`data-remote="true"`option 并返回一个 .js 文件。提交按钮调用`.button("loading")`，使用以下 JS：

```
$(document).on("click", ".btn-loading", function() {
  var btn;
  btn = $(this);
  btn.button("loading");
}); 
```

有没有办法检测 Ajax 成功和错误条件并重置按钮状态？

我尝试执行以下操作，但是在触发此功能后，我无法弄清楚如何访问`.btn-loading`处于活动状态的元素

```
$(document).on("ajax:success", function(evt, data, status, xhr) {
  var btn;
  btn = $(this);  //how to access .btn-loading() that's active?
  btn.button("reset");
  btn.button("toggle");
}); 
```

有关如何在 ajax 请求后重置按钮的任何建议？

另外，如何检测 HTML5 错误并重置按钮状态？

更新：2012 年 8 月 14 日

我发现你可以通过以下方式监听事件并触发按钮：

```
$(document).on("ajax:success", "form[data-remote]", function(evt, data, status, xhr) {
  var el;
  el = $(this).find('.btn-loading');
  el.button("reset");
  el.button("toggle");
}); 
```

看到这个维基：[https ://github.com/rails/jquery-ujs/wiki/ajax](https://github.com/rails/jquery-ujs/wiki/ajax)

但是，错误捕获部分不起作用，有人成功了吗？

```
$("form").live("ajax:aborted:required", function(evt, elements) {
  var el;
  el = $(this).find('.btn-loading');
  el.button("reset");
  el.button("toggle");
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T17:12:12.573

如果您查看[jquery 文档`bind`](http://api.jquery.com/bind/)（通常用于事件处理），他们注意到`this`在处理程序函数中是指***处理程序****绑定到的**DOM 元素，而***不是引发事件的元素。所以最简单的方法是给所有的加载按钮一个公共类（在这个例子中我们称之为“ajax-button”），将你的成功处理程序绑定到那个，然后你将`this`在你的处理程序函数中获得适当的可用。**

 **如果您使用的是 jquery（假设您有一些功能`resetButton`可以执行您想做的任何重置），您只需使用类似以下的内容来进行重置。

```
$(".ajax-button").bind("ajax:success", function() { 
     $(this).button("reset").button("toggle");}) 
```

[这个关于 Unobtrusive Javascript 的教程](http://net.tutsplus.com/tutorials/javascript-ajax/using-unobtrusive-javascript-and-ajax-with-rails-3/)有一些关于 Rails 的很好的附加信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T15:32:13.310

这应该有效。基本上将`click()`事件绑定到你的`button`，它会立即显示加载状态。**然后使用您的URL**、**HTTP 方法**（`POST`或`GET`）和**DataType**（在本例中我使用）将 AJAX 请求放在一起`JSON`。jQuery在 AJAX 设置中提供`success`和功能。`error`在按钮或相应部分中适用的任何其他内容上执行您的应用特定逻辑。

参考：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

```
$("#yourbutton",).on("click", function() {
   var btn;
   btn = $(this);
   btn.button("loading");
$.ajax({
    url: yoururl,
    type: 'GET',
    dataType: 'json',
    contentType: 'application/json; charset=utf-8',
    error: function(jqXHR, textStatus, errorThrown){
     *perform error here*
    btn.button("failure");
    }
    success: function (data, textStatus, jqXHR) {
    *perform success here - for you it seems to be*
    btn.button("reset");
    btn.button("toggle");
    }
});    
}); 
```

如果您想将其分解为对于按下的任何按钮都是通用的，那么您可以试试这个。

```
$(document).on("click", ".btn-loading", function() {
doSomething($(this));
});
function doSomething(btn){
$.ajax({
    url: yoururl,
    type: 'GET',
    dataType: 'json',
    contentType: 'application/json; charset=utf-8',
    error: function(jqXHR, textStatus, errorThrown){
     *perform error here* 
    btn.button("failure");
    }
    success: function (data, textStatus, jqXHR) {
    *perform success here - for you it seems to be*
    btn.button("reset");
    btn.button("toggle");
    }
});
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T19:07:44.843

以下作品无需任何 JavaScript

```
<form ... data-remote="true">
   ...
   <input class="btn" data-disable-with="Disabling text" name="commit" type="submit" value="Initial text">
</form> 
```**

# php - 有人可以帮我理解为什么我的 PHP css 样式表突然不工作了吗？

> ID：11936207
> 
> 赞同：0
> 
> 时间：2012-08-13T14:19:05.917
> 
> 标签：php, debugging, stylesheet

我为网站构建了一个正常的 CSS。然后我读到您可以将 CSS 重命名为 PHP 页面，附带条件`<?php header("Content-type: text/css"); ?>`是放在 PHP 页面的第一行。

然后，而不是链接到“style.css”，您可以链接到“style.php”，不用担心。

当我这样做时，一切都完美无缺。在有人问我为什么这样做之前，我会解释一下。我还创建了一个基本的 CSS 工具来通过 HTML 表单来更改各种颜色和字体等等等等。一切正常 okej ..... 然后 POOF！

现在 CSS 只加载了一部分，我弹出了一些代码。

我用来链接到 PHP CSS 的语法是：

```
<link rel="stylesheet" type="text/css" media="screen" href="phpstylesheet.php"> 
```

出现在页面顶部的错误代码是样式表链接的片段：

```
' rel='stylesheet' type='text/css'> 
```

我完全不知道突然出了什么问题。

谁能诊断出我做了什么突然搞砸了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:40:48.020

这听起来像是一个错误，会破坏您的文档，因为您说样式正在部分加载。尝试将下面的代码放在文档的最顶部，您应该会看到生成了哪些错误。

```
<?php error_reporting(E_ALL); ?> 
```

您的服务器设置可能不允许您看到错误。您可以在此处阅读有关错误处理的更多信息：http: [//php.net/manual/en/book.errorfunc.php](http://php.net/manual/en/book.errorfunc.php)

请记住在将文件提交到生产环境时再次删除上面的行。

# coldfusion - ColdFusion Application.cfc - 执行顺序

> ID：11936210
> 
> 赞同：8
> 
> 时间：2012-08-13T14:19:12.360
> 
> 标签：coldfusion, application.cfc

我需要一个现实检查 - 并希望一个解释（如果我的现实是错误的）。

CF 应用程序框架评估事物的方式是这样的（我的理解）——请求被传递给 cfserver

*   cf 查找 application.cfm 或 cfc（基于遍历规则）

*   application.cfc 执行（如果找到）

*   设置了**THIS**范围（可以在此处设置一系列特定于应用程序的变量，但

有些是必需的 - 例如“applicationTimeout” - 然后会发生一系列事件 - 如果需要，会触发方法。

-- onApplicationStart()

----onSessionStart()

------onRequestStart()

等等

所以我的问题

1）这个设置发生在每个页面请求上 - 在其他任何事情之前？

2）如果我在 onApplicationStart() 中设置了一个应用程序变量 - 它在之后发生的任何进程中都可用 - 并且应该在内存中持续存在 applicationTimeout() 的长度 - 对吗？

3）所以如果我做这样的事情......

if ( isdefined("application.myvar" ) { this.something = application.myvar; }

它应该在启动应用程序范围的初始请求之后处理任何页面请求。

但是它似乎没有这样做。

我问的原因是这个 - 有一些有趣的应用程序杠杆设置需要在这个范围内设置......其中一些可能是“密集的”（至少从执行每个请求的角度来看 - 所以我想要只做一次，在持久内存中设置一个结构，然后将它们作为 THIS 使用。

我做了一些错误的假设吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T23:08:12.043

There's two things at play here: when code runs, and when variable scopes are availed and how long they last.

*   The code outwith any method (ie: the "pseudoconstructor") runs every request. Obviously minimise the amount of code in this part of the CFC.
*   Code in various event handlers run as indicated by the event handler name, eg: onApplicationStart() code runs only once, when the application starts. Ditto onSessionStart() only runs once per new session.

Scopes:

*   this scope is available throughout the CFC. Behaves exactly like the this-scope in any other CFC, except some this-scoped variables have special meaning (like `this.name`, `this.datasource`, etc). Those special-meaning variables can be changed per session or per request in the relevant handlers, but seem to apply to the entire system (ie: not for the specific session or request making the setting change). In normal CFCs, the `this` scope is used to expose public variables, but as there is no public instance of Application.cfc, there is no point using the `this` scope beyond making those special settings. If one wants to have variables available to all methods within the CFC, use the variables scope as one normally would. Contrary to someone's advice here, this-scoped variables are NOT the same as application-scoped variables.
*   The request scope is also available throughout the CFC (pseudo constructor and methods). These will also be available to the calling code of templates called later in the request, like any other request-scoped variables.
*   Application scope: not available in the pseudo-constructor, even after the `this.name` setting is made. Only becomes available in onApplicationStart() and thenceforth from there.
    *   Session scope: similarly, not available in the pseudo-constructor or onApplicationStart()l and not until onSessionStart().

I've demonstrated this in a blog post (test code provided), [over here](http://adamcameroncoldfusion.blogspot.co.uk/2012/08/more-on-applicationcfc-when-things-run.html). it's too lengthy to include here, but the stuff above summarises it.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T09:21:37.967

[ColdFusion Application.cfc 文档](http://help.adobe.com/en_US/ColdFusion/10.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-606e.html)包含以下知识：

> 当请求执行时，ColdFusion 按以下顺序运行 CFC 方法：
> 
> 1.  onApplicationStart（如果之前没有为此应用程序运行）
> 2.  onSessionStart（如果之前没有为此会话运行）
> 3.  onRequestStart
> 4.  onRequest/onCFCRequest
> 5.  请求结束
> 
> onApplicationEnd、onSessionEnd 和 onError CFC 由特定事件触发。

整个请求顺序（至少）还有两个步骤。

> 0：执行所有`cfcomponent`不在 a 中的代码`cffunction`
> 0.5：运行相当于`cfapplication`创建应用程序的标签

因此，您的问题的答案是：

1.  如果您在步骤 0 中设置这些变量，那么可以。
2.  正确的。
3.  这取决于您在哪里设置变量。如果您尝试更改的值列在[Application.cfc 的应用程序变量文档](http://help.adobe.com/en_US/ColdFusion/10.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-750b.html)页面上，则它们必须在步骤 0 中。在其他位置设置它们将更新`this`范围，但不会在步骤 0.5 中生效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T11:50:15.057

请查看评论，因为它看起来像下面的帖子有效，但它没有。如果您转储 this 范围，则会显示您的新值，但它实际上不会更改任何应用程序设置。

您可以随心所欲地更改任何应用程序设置；但是，由于每次请求页面时都会运行伪构造函数，因此您需要在伪构造函数运行后不断更改设置。应用程序范围在伪构造函数中不可用，因此您可以在 onRequestStart 或 onRequest 函数中执行此操作。我已经完成了一个简单的测试，根据 onRequestStart 函数中的条件重新分配 customtagpaths。当您第一次访问该页面时，您会注意到自定义标签文件夹将是“customtags”，其他请求将显示“someOtherCustomtagsFolder”附带说明，如果您的应用程序设置基于每个用户更改，您的全局应用程序设置将被翻转并可能导致其他用户设置不正确。

```
<cfcomponent>
<!--- pseudo constructor --->
<cfset this.customtagpaths = expandPath('./customtags')>

<!--- onRequestStart --->
<cffunction name = "onRequestStart" returnType="void">
     <cfif structKeyExists(application,'testSetting')>
          <cfset this.customtagpaths = expandPath('./someOtherCustomtagsFolder')>
     </cfif>
</cffunction>

<!--- onRequest --->
<cffunction name = "onRequest" returntype="void">
     <cfargument name="targetPage" type="String" required = "true" />
     <cfdump var = "#this#" label = "this">
     <cfset application.testSetting = "foo">
     <cfinclude template="#Arguments.targetPage#">
</cffunction>
</cfcomponent> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-13T15:08:24.097

**Application.cfc 文件中此**范围内的任何内容都将成为应用程序变量，并且每个应用程序生命周期仅创建一次。应用程序启动后，Application.cfc 中没有其他用户**对此**进行操作。

第一次运行 CF 应用程序时，onApplicationStart() 的内容在 onRequest/Start/End 之前运行（“CF10 中的新功能”onServerStart() 除外）。

在应用程序的任何位置设置的任何应用程序变量都存在，直到应用程序停止。

您来自 #3 的代码应该是

`if ( !structKeyExists( application, "myvar" ) { application.myvar = foo; }`

然后在需要的地方引用 application.myvar。

根据您的描述，不需要将任何内容添加到**this**范围，只需将其放入 application 范围即可。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-08-13T17:46:22.140

应用程序范围在 Application.cfc 伪构造函数中不可用，因为在设置 this.name 之前，无法将请求绑定到应用程序。

如果您担心创建应用程序映射的开销，一种方法是将它们缓存在可用的服务器范围内。

if(!structkeyexists(server, 'myappmappings')){ server.myappmappings = createMappings(); } this.mappings = server.myappmappings;

您也许还可以使用 cachePut/cache Get 将映射存储在 ehcache 中，但我没有在伪构造函数中尝试过。

# mysql - MYSQL 查询：ORDER BY 特定日期

> ID：11936211
> 
> 赞同：0
> 
> 时间：2012-08-13T14:19:15.860
> 
> 标签：mysql, date, sql-order-by

我目前正在创建一个可以添加视频的网站。添加视频时，我需要给出发布日期，格式如下：“21-09-2012”。

现在，当我使用简单的 ORDER BY 命令时，它只对前两位数字进行排序。

有谁知道我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T14:26:50.043

听起来您将日期字段存储为字符串。如果是这种情况，那么您需要在尝试订购之前将该值转换为日期：

```
SELECT  STR_TO_DATE(yourdate, '%d-%m-%Y')
FROM    yourtable 
```

MySQL 文档[`STR_TO_DATE`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)

但是，您应该将日期存储在日期数据类型中，而不是作为字符串值。那么您将不必执行这些类型的转换。

您还可以在 ORDER BY 语句本身中进行转换：

```
order by STR_TO_DATE(yourdate, '%d-%m-%Y') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-18T22:30:12.663

经过非常无聊的研究，我有了一个绝妙的主意：

格式：`18/11/2014`

```
select id,
       date_string,
       substr(date_string, 1, 2) as day,
       substr(date_string, 4, 2) as month,
       substr(date_string, 7, 4) as year
from myTable
order by year, month, day 
```

或者，您可以执行相同的逻辑来添加小时、分钟、秒......

# python - 将 Jython 从 2.2.1 版本升级到 2.5.2，可能存在风险

> ID：11936213
> 
> 赞同：7
> 
> 时间：2012-08-13T14:19:22.427
> 
> 标签：python, upgrade, jython, backwards-compatibility, jython-2.5

我们想将我们的 Jython 版本升级到 2.5.2。在阅读文档和测试之后，似乎我们唯一要做的就是`magic comment`在每个 python 文件的开头添加编码，即`#encoding=utf-8`

这似乎太容易了，但我担心将来可能会出现错误。

有没有人经历过这个？任何向后兼容性？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T15:20:24.780

Jython 2.5.2*应该具有*Python 2.5.2 的功能。

快速浏览[一长串 Python 2.5.2 的发行说明](http://www.python.org/getit/releases/2.5.2/NEWS.txt)，我没有立即跳出来表明向后兼容性被破坏了。除非您的代码依赖于发行说明中已修复错误之一的不稳定行为，否则您应该没问题。

我的组织最近进行了相同的升级（Jython 2.2.1 --> Jython 2.5.2），没有出现任何问题。

我在升级时注意到了一些 Jython 特有的东西：

*   `os.chdir`现在可以在 Windows 上运行。
*   我们的一个 Java 包开始（正确地）将其`Exception`s 子类化为`java.lang.Exception`Jython 中的 s。

如果您升级了运行 Jython 的 Java 运行时，您还应该检查其发行说明，尤其是在您的代码大量使用内置 Java 包的情况下。

# c# - 为什么 c# / xna 中的垃圾收集不会自动处理渲染目标？

> ID：11936216
> 
> 赞同：1
> 
> 时间：2012-08-13T14:19:36.163
> 
> 标签：c#, xna, garbage-collection

我发现 c# / xna 中的渲染目标不会自动释放，您必须调用 .dispose() 成员才能摆脱它们。

我认为垃圾收集应该在所有引用都消失后自动摆脱它们，这是什么？

还有什么不是自动处理的吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-13T15:09:26.093

> 我认为垃圾收集应该在所有引用都消失后自动摆脱它们，这是什么？

这在两个方面是不正确的。

垃圾收集收集可以安全收集和需要的**托管内存。**就是这样。

将垃圾收集视为模拟无限堆内存的一种方式。既然我们可以假装我们有无限的内存，我们就不必调用任何东西来释放我们用完的内存，因为我们为什么要保留无限的资源？*

GC 模拟无限堆的最简单方法是什么都不做。这在例如进程有 4GiB 可用内存并且它使用 50MiB 时有效。收集永远不会出现。如果应用程序足够小以至于永远不会发生集合，这确实会发生。（虽然它不会懒到让你在没有集合的情况下使用 megs，但它会在尝试向操作系统询问应用程序的更多内存之前尝试收集，但当你想知道“为什么不使用 GC”时它仍然很有用。 ..” 在某些时候什么都不做可能是一种有效的 GC 方法，一旦你想到了这种可能性，很多其他问题就会消失）。

另一种方法是在可以清理的那一刻立即清理所有东西。这发生在引用计数垃圾收集器上；这与 .NET 无关，但值得一提，因为它与您的问题的“在所有引用都消失后”非常匹配。

另一个是当需要内存，并且在已经空闲内存的存储中不可用时，GC 会停止所有线程，识别根（静态变量和每个线程堆栈中的本地引用），识别根引用的所有内容，以及那些引用的所有内容，依此类推，直到找到仍然可以被应用程序使用的所有内容，然后将其他所有内容占用的内存视为空闲。然后它会压缩所有没有释放内存的对象，这样既可以避免在释放更多可用内存时产生碎片，又可以使对象在内存中更紧密地结合在一起（这对性能的影响很小）。

如果还“提升”它没有删除的对象，因为如果第一次删除它是不正确的，那么下一次就不会了，所以它会更少地查看那些在这个过程中幸存下来的对象经常。

此时需要注意两点：

1.  我们无法预测 GC 何时（如果有的话）会释放给定对象的内存。
2.  GC 唯一要做的就是释放托管内存。它不做任何其他事情（它确实有助于终结者，我们稍后会谈到）。

获取然后释放托管内存当然只是我们希望先做某事然后撤消它的一种情况。其他例子是：

1.  获取文件句柄，并释放它。
2.  获取一个窗口句柄，然后释放它。
3.  获取 GDI 句柄，然后释放它。
4.  打开网络连接，然后关闭它。
5.  通过网络连接发送协议定义的握手，然后在关闭之前通过它发送协议定义的签名。
6.  获取一些非托管内存，然后释放它。
7.  从池中获取一个对象（对于该对象，除了分配给它的创建之外还有一些开销，或者它通过使用来“学习”），然后将其返回到池中。

到目前为止，我们所描述的 GC 对这些都没有帮助。

尽管如此，它们都有两个共同点。它们有一个开始操作和一个结束操作。

开始操作要么很好地映射到对象创建，要么映射到某个方法调用。

结束操作可以匹配`Close()`, `End()`, `Free()`,`Release()`方法调用，但在定义时`IDisposable.Dispose()`我们可以给它们一个通用接口。该语言还可以通过`using`†添加一些帮助。

（一个类可能同时具有 a`Close()`和 a `Dispose()`。在这种情况下，我们既可以选择关闭我们稍后将重新打开或以其他方式在其关闭状态下使用的东西，也可以选择在我们完成后确保清理的方法目的）。

因此，通过这种方式，`IDisposable.Dispose()`存在清理*除*托管内存之外的所有需要​​清理的内容。

现在，在这种情况下，需要实现三种类型的类`IDisposable`：

1.  那些拥有像句柄这样的非托管资源的人，他们自己。
2.  那些我们在我们自己的设计（或其他人的设计，但仍然在.NET 本身内）的某种池或其他场景之前/之后使用的那些。
3.  那些具有依次实现的字段，`IDisposable`因此当我们处置此类的对象时，它会调用`Dispose()`这些字段。

让我们考虑一下如果 GC 释放了这样一个对象的内存并且`Dispose()`没有被调用会发生什么。

在第三种情况下，实际上没有处理对象并不重要。真正重要的是这些字段没有被处理（或者也许这无关紧要，但有些字段很重要）。

在第二种情况下，它的重要性取决于池的重要性。这可能不是最理想的，但不是世界末日。

在第一种情况下，这是一场灾难——我们有一个未释放的资源，在应用程序结束之前我们不可能释放它，甚至可能在应用程序结束之后（取决于资源的性质）。

出于这个原因，对象可以有终结器。

当 GC 即将释放一个对象的内存时，如果它有一个终结器，并且如果该终结器没有被抑制（`Dispose()`通常会这样做以表明该对象已被很好地清理并且不需要对其进行更多工作)，然后不是从对象中释放内存，而是将其放入终结队列。这当然意味着该对象不仅没有收集到它的内存，而且也没有任何可以通过它的字段访问的对象。

终结器线程通过此队列工作，在每个队列上调用终结器方法。

发生这种情况有两个不好的地方：

1.  我们不知道什么时候会发生。也许我们会用完资源或无法打开文件进行写入。
2.  这意味着一个应该释放内存的对象被提升了，并且不仅会比它应该的寿命长一个周期，而且会长很多周期。

编辑：请注意，我们没有第三类课程的终结者，也许没有第二类课程。在这种情况下，不需要终结器，因为它作为字段具有的真正关键的对象将调用其终结器，它完成了重要的工作。如果您尝试从终结器中处理可终结的字段，也很容易得到一个严重的错误。如果您编写了一个一次性类，它包装了它“拥有”的一个或多个一次性字段并负责清理，那么请实现`IDisposable`，但不要*添加*终结器。

总之，调用 finalizer 意味着以下两种情况之一：

1.  应用程序正在关闭，所有终结器都在运行（伟大的，一切都很好）。
2.  有人搞砸了，没有清理应该清理的东西。

因此，虽然 GC 与除托管内存之外的资源之间通过终结器进行交互，但它是最后手段的交互，无论如何它都不可靠。您不应该将终结器视为使 GC 进行清理的一种方式，而是一种让 GC 在缺陷意味着它没有发生的情况下不让清理变得不可能的方式（以及一种清理的方式） -up 应用程序关闭）。

*当然，如果你认为你拥有无限的资源（鱼、水牛、海洋的废物处理能力）而事实证明你没有，那么事情就会变得一团糟，所以也许不要将这条规则应用于生活。

†<code>using 使调用`Dispose()`更简单

```
using(someDisposableObject)
{
  //Do Stuff
} 
```

相当于：

```
try
{
  //Do Stuff
}
finally
{
  if(someDisposableObject != null)
    ((IDisposable)someDisposableObject).Dispose();
} 
```

和：

```
using(var someDisposableObject = someMethodCallOrCallToNew())
{
  //Do Stuff
} 
```

相当于：

```
var someDisposableObject = someMethodCallOrCallToNew();
try
{
  //Do Stuff
}
finally
{
  if(someDisposableObject != null)
    ((IDisposable)someDisposableObject).Dispose();
} 
```

在编译器可以确定 someDisposableObject 不可能为空的情况下，可以删除空检查作为优化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T14:23:36.127

`Dispose`即使使用自动垃圾收集，当您确定不会再次使用该实例时调用它仍然是一个好主意。

或者使用`using`语句。

这样，您可以选择何时“处置”对象，而不是等到垃圾收集器执行此操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T14:34:42.917

存在的原因`IDisposable`是支持垃圾收集无法[有效]管理对象内存的异常情况。它存在的主要原因是为了释放非托管资源。

这种情况的常见情况之一是与非托管内存的交互。当一个对象正在做一些涉及在垃圾收集器范围之外分配内存的事情时，垃圾收集器就不能负责清理它；它需要由程序员处理。这些情况也更有可能分配大量内存，因此确保更快地清理它变得更加重要。

它也用于对象需要进行某种“清理”而不是实际释放内存的情况。示例是处理 IO 时的文件处理程序，或与应关闭的数据库的连接。让垃圾收集器释放对象的内存不会执行这种类型的清理。

在某些情况下，程序员使用`IDisposeable`接口“劫持”`using`语句的语法，实际上并没有在它的 dispose 方法中处理非托管资源。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T14:25:39.357

我的观点是，如果一个对象有一个 Dispose 方法，它可能需要被释放。我通常尝试将它放在一个带有“使用”语句的块中。这将在块的末尾自动调用 Dispose 方法。

# php - 无法从服务器 php openlayers 打开文件

> ID：11936218
> 
> 赞同：0
> 
> 时间：2012-08-13T14:19:41.360
> 
> 标签：php, linux, permissions

我正在尝试在 linux 中使用我的网页。我在 Windows 上创建了它，但出现了一个奇怪的错误。我想这与权限有关。

我不知道现在是什么问题，在 Windows 中它工作正常，但是当我在 linux 中尝试相同时，我收到此错误：

`Warning: Unknown: failed to open stream: Permiso denegado in Unknown on line 0`

`Fatal error: Unknown: Failed opening required '/opt/lampp/htdocs/open/listaZonas.php' (include_path='.:/opt/lampp/lib/php') in Unknown on line 0`

Permiso denegado 的意思是 Permissions not allowed

我有一个带有 xampp (lampp) 的服务器，在那里，我的网页被托管。之后，我有一个提供 REST 服务的 eclipse Tomcat 服务器。

在我的网页中，我调用这个休息服务给我一个文件，但我通过我的 xampp 服务器中的一个 php 文件读取它：

```
<?php
echo file_get_contents($_GET['url']); 
?> 
```

我传入 url，我的休息服务的 url。它在 Windows 上运行良好，我可以毫无问题地读取所需的文件，但现在我不知道发生了什么。

我必须在 xampp 服务器中配置一些东西吗？php 或其他东西来读取这个文件......我把所有文件放在它们必须放在的地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:57:41.093

打开终端并以 root 身份在 htdocs/ 的父文件夹中运行

```
chmod -R 777 htdocs/ 
```

这样您就可以使整个 htdocs 文件夹可读、可写和可执行。出于安全原因，我不建议将其用于可从 Internet 访问的服务器，但对于本地使用而言，它就可以了。

如果有一个带有`chown`.

# java - 带有 Java 的 Oracle ORA-02089

> ID：11936220
> 
> 赞同：10
> 
> 时间：2012-08-13T14:19:45.540
> 
> 标签：java, plsql, oracle11g

尝试从 Java 调用 PL/SQL 存储过程时出现以下错误：`ORA-02089: COMMIT is not allowed in a subordinate session`

它从 Oracle 测试良好。有人对这个有经验么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-14T05:06:59.463

试试这种方法；

*   更改数据源以使用非 XA（并选中“支持全局事务”和“模拟两阶段提交”按钮）
*   从您的代码中删除 COMMIT。
*   使用“PRAGMA AUTONOMOUS_TRANSACTION”。这将创建一个允许使用提交的单独事务。例如：CREATE PROCEDURE XXX AS PRAGMA AUTONOMOUS_TRANSACTION; 开始……</li>

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T04:58:17.650

oracle 文档对错误有什么看法：

> COMMIT 在不是两阶段提交全局协调器的会话中发出。

基本上你正在执行一个分布式事务。作为分布式事务的一部分，您正在尝试调用自治事务。这是不可能的，因为分布式事务需要执行 2PC。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T14:22:52.997

嗯，我认为它与XA有关。[当我用AUTONOMOUS_TRANSACTION Pragma](http://docs.oracle.com/cd/B14117_01/appdev.101/b10807/13_elems002.htm)将存储过程括起来时，它工作正常：

```
PROCEDURE foo (val IN VARCHAR2(4000)) is
  PRAGMA AUTONOMOUS_TRANSACTION;
  BEGIN
  INSERT INTO tbl1 VALUES (val);
  DELETE FROM tbl2;
  COMMIT;
END foo; 
```

# php - 如果内存使用率超过 10%，则 APC 用户缓存的性能

> ID：11936222
> 
> 赞同：1
> 
> 时间：2012-08-13T14:19:54.247
> 
> 标签：php, caching, memcached, apc

我需要某种类型的用户缓存存储，所以目前我使用 APC 作为操作码缓存和 Zend 和 Kohana 可以使用的用户缓存。我从几个人那里听说，由于某种原因，如果您最终使用了超过 10% 左右的分配给用户缓存的内存，APC 用户缓存性能就会下降。一般建议是使用 memcache 或 memcached 进行我的框架用户缓存。

有谁知道 APC 性能问题的内存使用是真实的还是只是一个城市神话？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T15:45:46.653

好的，所以没有回应......做了一些更深入的挖掘，问题与内存空间的碎片有关。APC 没有碎片内存管理，所以除非你有很多多余的未使用的内存，否则 APC 会变得碎片化并且很难找到足够大的“洞”来放置新的请求来存储东西。

在各个地方找到了一些细节，但这篇文章给出了一个更好的主意：http: [//xerosphere.net/optimizing-apc-for-drupal](http://xerosphere.net/optimizing-apc-for-drupal)

# c - 如何防止 Waf 重命名目标文件？

> ID：11936226
> 
> 赞同：6
> 
> 时间：2012-08-13T14:20:03.573
> 
> 标签：c, gcov, waf

我正在使用 Waf 构建一个 C 项目并`gcov`具有一些测试代码覆盖率。但是，Waf以从源文件`gcc`生成的方式调用，这在搜索生成的文件时会造成混淆：`foo.c.1.o``foo.c``gcov`

```
$ gcov foo.c
$ foo.gcno:cannot open graph file 
```

幸运的是，`gcov`具有`-o`可以指定相应目标文件的选项。尽管如此，这并不方便，并且执行`lcov`仍然失败。因此，我的问题是：

1.  为什么 Waf 重命名目标文件？
2.  如何禁用此行为或...
3.  如何`gcov`/如何`lcov`解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T12:40:17.217

您可以使用[`gcovr`](https://software.sandia.gov/trac/fast/wiki/gcovr)而不是直接运行`gcov`.

`gcovr`不依赖文件名魔术，而是解析`gcov`的覆盖文件。
然后它`gcov`使用适当的参数调用。
这适用于 Waf 的目标文件重命名。

您可以`gcovr`从 Waf 的`build`子目录运行：

```
cd build
gcovr --root=$(pwd) --keep
lcov --capture --directory $(pwd) --base-directory $(pwd) --output-file coverage.info
genhtml coverage.info --output-directory out 
```

该`--root`选项删除当前目录前缀
该`--keep`选项保留由/`gcov`使用的临时文件。`lcov``genhtml`

您还可以使用`gcovr`'`--xml`选项来生成与[Cobertura](http://cobertura.sourceforge.net/)兼容的 xml 输出。
然后它可以被各种格式化程序使用（我将它与 Jenkins 的[Cobertura 插件](https://wiki.jenkins-ci.org/display/JENKINS/Cobertura+Plugin)一起使用）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T14:43:00.710

您是否尝试过使用类似的方式修改 Waf 的配置

```
bld.program(
  obj_ext  = '.o',
  source   = 'test.c',
  target   = 'test1') 
```

# sybase - 在 sybase-iq 上使用 create table 运行脚本

> ID：11936229
> 
> 赞同：1
> 
> 时间：2012-08-13T14:20:18.387
> 
> 标签：sybase, sap-iq, isql

我想从 sybase-iq 上的脚本创建表。脚本 table.sql 包含：

```
create table abc
(
 id int
)
go 
```

我运行脚本命令

```
isql -U*** -P*** -S*** -D*** -itable.sql  -oout.txt 
```

我确定连接参数没问题。脚本名称也正确。

但它不起作用，脚本没有创建表，我在输出文件中没有任何错误。

提前感谢您的建议。

PX

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T07:50:16.227

我找到了！

该脚本由带有选项 -o 的 isql 生成，它是 Macintosh 格式！我在 np++ 中见过它。我已将格式更改为 DOS\Windows 并且可以正常工作！

EOL 有问题。我有 char(13) (Mac)，但正确的是 char(13)+char(10) (DOS)。

感谢您的回答！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T14:51:02.227

输入语法错误以查看是否正确找到“go”并且该语句实际上正在发送到服务器。你应该得到一个错误。

如果是，那么它是默认数据库吗？我不确定 Sybase IQ 是否有不同的数据库，如 ASE，但如果有，那么您的登录 ID 可能有一个默认数据库，可以将选项卡安装到不同的数据库？

# java - 写入文件的问题

> ID：11936231
> 
> 赞同：1
> 
> 时间：2012-08-13T14:20:22.153
> 
> 标签：java, android, file-io, ioexception, fileoutputstream

我正在尝试使用以下代码写入 Android 应用程序中的文件：

```
File save = new File("sdcard/save.txt"); 
if(!save.exists()) {
    try {
        save.createNewFile();
    } catch (IOException e) {
        e.printStackTrace();
    }
}

try {
    FileOutputStream fos = new FileOutputStream(save);
    OutputStreamWriter osw = new OutputStreamWriter(fos);

    osw.write("1");
    osw.flush();
    osw.close();
} catch (FileNotFoundException e1) {
    e1.printStackTrace();
} catch (IOException e) {
    e.printStackTrace();
} 
```

但是，我的调试器转到`IOException`行后`osw.close();`

问题是那个阶段`e`不存在，所以我无法阅读异常消息。

我在 androidManifest.xml 中添加了正确的前提

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T14:22:50.967

```
 File save = new File("sdcard/save.txt"); is bad code 
```

**使用下面的代码**

```
String path= Environment.getExternalStorageDirectory().getAbsolutePath();
String fileName = "myFile.txt";

File file = new File(path + File.separator + fileName); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T15:15:58.247

我认为您需要在`manifest.xml`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T18:04:48.547

我最近以这种方式将文件写入了我的 sdcard：

```
private static final String sdcardPath = "/mnt/sdcard/yourfolder_or_fileName"
File folder = new File(path); 
```

但是如上所述，您应该使用此解决方案

```
String path= Environment.getExternalStorageDirectory().getAbsolutePath(); 
```

# http - Grails 编码可下载文件

> ID：11936232
> 
> 赞同：0
> 
> 时间：2012-08-13T14:20:27.717
> 
> 标签：http, grails

我想对可下载的文件名进行编码。我想用 ą ę ć ż ź 之类的波兰语字母设置文件名。这是我的代码：

```
response.setHeader("Content-disposition", "attachment; filename=" + URLEncoder.encode("ŻżŹźĄą", 'UTF-8')) 
```

它适用于 Chrome，但 MozillaFirefox 显示不正确。

如何正确设置编码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:23:46.613

它行不通。HTTP 标头隐含地需要 ASCII 但最高的拉丁 1 编码。没有标准以 UTF-8 对名称进行编码。如果你分解这些字母，Yolu 会更好。请参阅：[如何在 HTTP 中对 Content-Disposition 标头的文件名参数进行编码？](https://stackoverflow.com/questions/93551/how-to-encode-the-filename-parameter-of-content-disposition-header-in-http)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T16:38:47.090

这是因为 Chrome 和 IE 有问题。“%”在 Content-Disposition 参数中并不特殊，除非您使用 RFC 5987 中定义的编码。

# php - 突出显示 preg_match_all() 的主题字符串中的匹配结果

> ID：11936233
> 
> 赞同：4
> 
> 时间：2012-08-13T14:20:30.300
> 
> 标签：php, html, regex, match, highlight

我正在尝试使用 preg_match_all() 返回的 $matches 数组突出显示主题字符串。让我从一个例子开始：

```
preg_match_all("/(.)/", "abc", $matches, PREG_OFFSET_CAPTURE | PREG_SET_ORDER); 
```

这将返回：

```
Array
(
    [0] => Array
        (
            [0] => Array
                (
                    [0] => a
                    [1] => 0
                )

            [1] => Array
                (
                    [0] => a
                    [1] => 0
                )

        )

    [1] => Array
        (
            [0] => Array
                (
                    [0] => b
                    [1] => 1
                )

            [1] => Array
                (
                    [0] => b
                    [1] => 1
                )

        )

    [2] => Array
        (
            [0] => Array
                (
                    [0] => c
                    [1] => 2
                )

            [1] => Array
                (
                    [0] => c
                    [1] => 2
                )

        )

) 
```

在这种情况下，我想做的是突出显示整体消耗的数据和每个反向引用。

输出应如下所示：

```
<span class="match0">
    <span class="match1">a</span>
</span>
<span class="match0">
    <span class="match1">b</span>
</span>
<span class="match0">
    <span class="match1">c</span>
</span> 
```

另一个例子：

```
preg_match_all("/(abc)/", "abc", $matches, PREG_OFFSET_CAPTURE | PREG_SET_ORDER); 
```

应该返回：

```
<span class="match0"><span class="match1">abc</span></span> 
```

我希望这足够清楚。

我想突出显示整体消费数据并突出显示每个反向引用。

提前致谢。如果有什么不清楚的，请询问。

注意：它不能破坏 html。正则表达式 AND 输入字符串在代码中都是**未知的并且是****完全动态**的。所以搜索字符串可以是 html，匹配的数据可以包含类似 html 的文本，什么不是。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T19:38:05.177

到目前为止，这似乎对我抛出的所有示例都是正确的。请注意，为了在其他情况下的可重用性，我已经打破了 HTML 处理部分中的抽象突出显示部分：

```
<?php

/**
 * Runs a regex against a string, and return a version of that string with matches highlighted
 * the outermost match is marked with [0]...[/0], the first sub-group with [1]...[/1] etc
 *
 * @param string $regex Regular expression ready to be passed to preg_match_all
 * @param string $input
 * @return string
 */
function highlight_regex_matches($regex, $input)
{
    $matches = array();
    preg_match_all($regex, $input, $matches, PREG_OFFSET_CAPTURE | PREG_SET_ORDER);

    // Arrange matches into groups based on their starting and ending offsets
    $matches_by_position = array();
    foreach ( $matches as $sub_matches )
    {
            foreach ( $sub_matches as $match_group => $match_data )
            {
                    $start_position = $match_data[1];
                    $end_position = $start_position + strlen($match_data[0]);

                    $matches_by_position[$start_position]['START'][] = $match_group;

                    $matches_by_position[$end_position]['END'][] = $match_group;
            }
    }

    // Now proceed through that array, annotoating the original string
    // Note that we have to pass through BACKWARDS, or we break the offset information
    $output = $input;
    krsort($matches_by_position);
    foreach ( $matches_by_position as $position => $matches )
    {
            $insertion = '';

            // First, assemble any ENDING groups, nested highest-group first
            if ( is_array($matches['END']) )
            {
                    krsort($matches['END']);
                    foreach ( $matches['END'] as $ending_group )
                    {
                            $insertion .= "[/$ending_group]";
                    }
            }

            // Then, any STARTING groups, nested lowest-group first
            if ( is_array($matches['START']) )
            {
                    ksort($matches['START']);
                    foreach ( $matches['START'] as $starting_group )
                    {
                            $insertion .= "[$starting_group]";
                    }
            }

            // Insert into output
            $output = substr_replace($output, $insertion, $position, 0);
    }

    return $output;
}

/**
 * Given a regex and a string containing unescaped HTML, return a blob of HTML
 * with the original string escaped, and matches highlighted using <span> tags
 *
 * @param string $regex Regular expression ready to be passed to preg_match_all
 * @param string $input
 * @return string HTML ready to display :)
 */
function highlight_regex_as_html($regex, $raw_html)
{
    // Add the (deliberately non-HTML) highlight tokens
    $highlighted = highlight_regex_matches($regex, $raw_html);

    // Escape the HTML from the input
    $highlighted = htmlspecialchars($highlighted);

    // Substitute the match tokens with desired HTML
    $highlighted = preg_replace('#\[([0-9]+)\]#', '<span class="match\\1">', $highlighted);
    $highlighted = preg_replace('#\[/([0-9]+)\]#', '</span>', $highlighted);

    return $highlighted;
} 
```

**注意**：正如 hakra 在聊天中向我指出的那样，如果正则表达式中的子组可以在一个整体匹配中多次出现（例如 '/a(b|c)+/'），`preg_match_all`只会告诉你最后一个这些匹配 - 所以`highlight_regex_matches('/a(b|c)+/', 'abc')`返回`'[0]ab[1]c[/1][/0]'`不是`'[0]a[1]b[/1][1]c[/1][/0]'`你可能期望/想要的。外面的所有匹配组仍然可以正常工作，所以`highlight_regex_matches('/a((b|c)+)/', 'abc')`给出`'[0]a[1]b[2]c[/2][/1][/0]'`这仍然是正则表达式如何匹配的一个很好的指示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T18:13:39.650

阅读您在第一个答案下的评论，我很确定您并没有真正按照您的意图提出问题。但是，按照您具体要求的内容是：

```
$pattern = "/(.)/";
$subject = "abc";

$callback = function($matches) {
    if ($matches[0] !== $matches[1]) {
        throw new InvalidArgumentException(
            sprintf('you do not match thee requirements, go away: %s'
                    , print_r($matches, 1))
        );
    }
    return sprintf('<span class="match0"><span class="match1">%s</span></span>'
                   , htmlspecialchars($matches[1]));
};
$result = preg_replace_callback($pattern, $callback, $subject); 
```

在你现在开始抱怨之前，先看看你描述问题的缺点在哪里。我有一种感觉，您实际上想要实际解析匹配结果。但是，您想做子匹配。除非您同时解析正则表达式以找出使用了哪些组，否则这不起作用。到目前为止，情况并非如此，在你的问题中也不是在这个答案中。

因此，请将此示例仅用于一个子组，该子组也必须是整个模式作为要求。除此之外，这是完全动态的。

有关的：

*   [如何使用 preg_match_all() 获取子组匹配的所有捕获？](https://stackoverflow.com/q/6371226/367456)
*   [忽略 preg_replace 中的 html 标签](https://stackoverflow.com/questions/8193327/ignore-html-tags-in-preg-replace)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T12:51:04.627

我对在 stackoverflow 上发帖不太熟悉，所以我希望我不要搞砸了。我这样做的方式与@IMSoP 几乎相同，但是略有不同：

我像这样存储标签：

```
$tags[ $matched_pos ]['open'][$backref_nr] = "open tag";
$tags[ $matched_pos + $len ]['close'][$backref_nr] = "close tag"; 
```

如您所见，几乎与@IMSoP 相同。

然后我像这样构造字符串，而不是像 @IMSoP 那样插入和排序：

```
$finalStr = "";
for ($i = 0; $i <= strlen($text); $i++) {
    if (isset($tags[$i])) {
        foreach ($tags[$i] as $tag) {
            foreach ($tag as $span) {
                $finalStr .= $span;
            }
        }
    }
    $finalStr .= $text[$i];
} 
```

`$text`使用的文本在哪里`preg_match_all()`

我*认为*我的解决方案比@IMSoP 的解决方案要快一些，因为他每次都必须进行排序，而不是什么。但我不确定。

我现在主要担心的是性能。但它可能无法让它比这更快地工作吗？

我一直试图让递归`preg_replace_callback()`的事情发生，但到目前为止我还不能让它工作。preg_replace_callback() 似乎非常非常快。无论如何，比我目前正在做的要快得多。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-13T14:36:25.533

快速混搭，为什么要使用正则表达式？

```
$content = "abc";
$endcontent = "";

for($i = 0; $i > strlen($content); $i++)
{
    $endcontent .= "<span class=\"match0\"><span class=\"match1\">" . $content[$i] . "</span></span>";
}

echo $endcontent; 
```

# wpf - WPF 必应地图控件 (IE) 缓存

> ID：11936234
> 
> 赞同：2
> 
> 时间：2012-08-13T14:20:37.263
> 
> 标签：wpf, caching, bing-maps

我们正在开发一个 WPF 应用程序，主要使用 WPF Bing Maps 控件。

我们有多个切片图层，可以在运行时打开或关闭。瓦片层使用自定义瓦片源检索它们的数据，因此我们可以更好地控制返回的 uri。

当应用程序启动时，多个 tilelayers 是可见的，导致调用我们的 restservices 来检索切片。服务检查数据库中的图像，如果存在，则返回图像，如果不存在，则生成图像，存储它们并返回它们。到目前为止，它就像一个魅力。

现在有以下两种情况：数据库由于某种原因被清除->服务只是在调用时重新创建图像，然后返回它们。这里没问题。

如果有人清除了 IE 缓存（客户端），而应用程序仍在运行，则缩放/移动地图。之前加载的瓷砖消失了，并且不会回来。进一步放大时，它确实检索到之前未加载的图块，但在图块层中留下了很大的间隙。

解决这个问题的唯一方法似乎是关闭应用程序，清除 IE 缓存，清除 DB，然后重新启动。是什么导致了这种行为？为什么会加载看似空的图像？

在对一个选项进行一些挖掘之后，将为 uri 提供一个刻度参数，因此它总是会检索新的图块。但这会带来很大的性能损失。

关于如何解决这个问题的任何建议？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-29T22:41:03.970

WPF 中的切片图层缓存切片并从缓存中提取切片（如果已加载一次）。如果缓存被清除，则不会重新加载这些图块。这是为性能而设计的。特别是对于没有所有可能的瓦片的瓦片层。没有办法解决这个问题。

# delphi - 在 DataSetProvider OnUpdateData 中追加/插入详细记录 (NestedDataSet)

> ID：11936238
> 
> 赞同：1
> 
> 时间：2012-08-13T14:20:49.457
> 
> 标签：delphi, delphi-7, delphi-2010, dbexpress

我想在`OnUpdateData`事件中插入详细记录，`DataSetProvider`并将更改与主记录一起更新到数据库中。

实现这一目标的最佳方法是什么。

我尝试将记录插入到，`NestedDataSet`但它们没有与增量一起发送到数据库。

将 Delphi 7 或 Delphi 2010 与 MySQL 和 dbexpress 一起使用：

```
Master: InvoicePayment (SQLDataSet, DataSetProvider, ClientDataSet)
Detail: InvoicePaymentLine (NestedDataSet) 
```

用户输入付款金额，程序`Delta`在`OnUpdateData`事件处理中循环处理要支付的发票，并将它们插入到`InvoicePaymentLine`每个主记录的明细表 ( ) 中。

我宁愿不使用`BeforeUpdateRecord`事件，而是在循环中一次处理所有记录。

# asp.net-mvc - 对 MVVM 和 MVC 使用相同的模型

> ID：11936241
> 
> 赞同：0
> 
> 时间：2012-08-13T14:20:55.307
> 
> 标签：asp.net-mvc, model-view-controller, mvvm

我对 MVVM 和 MVC 有疑问。我正在开发一个桌面客户端和 Web 应用程序。我打算使用 WPF（和 MVVM）为 Web 应用程序开发桌面客户端和 ASP.Net MVC。

我以前从未使用过 ASP.Net MVC，虽然我从来没有真正喜欢过 Web 窗体（除了一些功能，如母版页、输出缓存等），而且我主要使用 AJAX (jQuery) 和处理程序来填充 HTML 和处理输入（我认为在阅读了有关该模式的信息后，我很接近 MVC，但方式不同）。

现在，这些应用程序大多具有相同的输入、报告和数据库。我计划创建可以在 MVVM 和 MVC 中重复使用的模型。但是在阅读了关于这些模式的各种文章，以及对 ASP.Net MVC 代码的分析之后，我怀疑它是否可以做到。在 MVVM 中，View 永远不知道 Model，而在 MVC 中，Controller 与 View 共享 Model。此外，在 ASP.Net MVC 中，视图（ASPX 文件）是从 System.Web.Mvc.ViewPage 派生的，标签/标题是从模型本身填充的。

有没有办法可以为两个应用程序使用相同的模型？

谢谢你。

里特什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T06:31:29.363

> 在 MVVM 中，View 永远不知道 Model，而在 MVC 中，Controller 与 View 共享 Model。

不太对。在 MVVM 中，视图绑定到视图模型。与 ASP.NET MVC 中的完全相同。在 ASP.NET MVC 中，控制器不与视图共享模型。它共享一个视图模型。它与模型对话，然后构建一个传递给视图的视图模型。

与 MVVM 中的 MVC 相反，视图可以与模型对话，但这会在整个视图模型中间接发生，因此视图和模型都不知道彼此的存在。

因此，您可以在桌面客户端应用程序和 Web 应用程序中拥有相同的模型。唯一的区别是视图模型。

# xml - XSLT 对列表的各个部分进行分组

> ID：11936243
> 
> 赞同：1
> 
> 时间：2012-08-13T14:21:09.603
> 
> 标签：xml, xslt, xpath

我正在努力将列表的一部分转换为一个组。

假设我有一个这样的列表：

```
<table>
    <tr>
        <td>One</td>
    </tr>
    <tr>
        <td>Two</td>
    </tr>
    <tr>
        <td><a href="#">Three</a></td>
    </tr>
    <tr>
        <td><a href="#">Four</a></td>
    </tr>
    <tr>
        <td><a href="#">Five</a></td>
    </tr>

    <tr>
        <td>Six</td>
    </tr>
</table> 
```

并想将其转换为

```
<p>One</p>
<p>Two</p>
<div class="group">
    <a href="#">Three</a>
    <a href="#">Four</a>
    <a href="#">Five</a>
</div>
<p>Six</p> 
```

我不知道如何实现这一点。有什么建议么？

**编辑：** 有这样的东西会很有帮助：

```
<xsl:template match="td[a and ( preceding-sibling::td/a or following-sibling::td/a )]">
    <div class="group"> <!-- this has to be called one time !! -->
        <xsl:for-each select=".//a">
            <xsl:apply-templates select="."/>
        </xsl:for-each>
    </div>
</xsl:template> 
```

我的方法是括号应该将所有匹配分组到模板的一次执行中，以便只创建一个分组 div。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T15:35:56.317

这个 XSLT 1.0 样式表...

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes"/>
<xsl:strip-space elements="*" />  

<xsl:template match="/">
 <root>
   <xsl:apply-templates select="*/tr[not(td/a) or not(preceding-sibling::tr/td/a)]" />
 </root>  
</xsl:template>

<xsl:template match="tr[not(td/a)]" priority="0.6">
 <p>
   <xsl:copy-of select="td/@* | td/node()" /> 
 </p>  
</xsl:template>

<xsl:template match="tr[td]">
 <div class="group">
   <xsl:copy-of select="
    td/@* | td/node() | 
    following-sibling::tr[
        preceding-sibling::tr[not(preceding-sibling::tr/td/a)][1]
     ]/td/node()" /> 
 </div>
</xsl:template>

</xsl:stylesheet> 
```

...将您的样本输入转换为...

```
<root>
  <p>One</p>
  <p>Two</p>
  <div class="group">
    <a href="#">Three</a>
    <a href="#">Four</a>
    <a href="#">Five</a>
  </div>
</root> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T16:49:08.713

好吧，我自己找到了一个适合我需要的解决方案：

```
<xsl:template match="tr[td/a and following-sibling::tr/td/a][1]">
    <div class="list">
        <xsl:apply-templates select=".//a | following-sibling::tr//a"/>
    </div>
</xsl:template>
<xsl:template match="td[p/a]"/> 
```

谢谢你们的帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T15:02:33.813

你可以通过这样的方式达到目标

```
 <xsl:template match="/">
        <xsl:apply-templates select="//tr/td"/>
        <div class="group">
            <xsl:apply-templates select="//td/a"/>
        </div>
    </xsl:template>

    <xsl:template match="//tr/td"> 
        <p><xsl:value-of select="text()"/></p>
    </xsl:template>

    <xsl:template match="//td/a"> 
        <a href="#"><xsl:value-of select="text()"/></a>
    </xsl:template> 
```

编辑：代码解析器放弃了重要的代码和平：/现在可以了

希望这可以帮助

问候

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T01:56:56.717

**这种转换**（没有任何`xsl:apply-templates`指令）：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="tr/td/text()">
     <p><xsl:value-of select="."/></p>
 </xsl:template>
 <xsl:template match="tr[td[a]][1]">
  <div class="group">
   <xsl:copy-of select="../tr[td[a]]/td/a"/>
  </div>
 </xsl:template>
 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<table>
    <tr>
        <td>One</td>
    </tr>
    <tr>
        <td>Two</td>
    </tr>
    <tr>
        <td>
            <a href="#">Three</a>
        </td>
    </tr>
    <tr>
        <td>
            <a href="#">Four</a>
        </td>
    </tr>
    <tr>
        <td>
            <a href="#">Five</a>
        </td>
    </tr>
    <tr>
        <td>Six</td>
    </tr>
</table> 
```

**产生想要的正确结果**：

```
<p>One</p>
<p>Two</p>
<div class="group">
   <a href="#">Three</a>
   <a href="#">Four</a>
   <a href="#">Five</a>
</div>
<p>Six</p> 
```

# asp.net - HTTP post 请求在服务器上发送失败

> ID：11936245
> 
> 赞同：1
> 
> 时间：2012-08-13T14:21:22.357
> 
> 标签：asp.net

我试图发布这些变量抛出了一个引擎，它会给出一个响应，但是在 VStudio 上本地测试它时一切正常。当我将它上传到服务器上时，不会处理发布请求。

```
Dim webStream As Stream
Dim s As HttpWebRequest`enter code here`
Dim res As HttpWebResponse
Dim webResponse = ""
Dim enc As UTF8Encoding
Dim postdata As String
Dim postdatabytes As Byte()

s = HttpWebRequest.Create("http://private.pin-pay.com:3902/")
enc = New System.Text.UTF8Encoding()
postdata = "PN=961" & ddlPhone.SelectedValue & txtMobilePhone.Text & "&TI=" & TransactionID.Text
postdatabytes = enc.GetBytes(postdata)
s.Method = "POST"
s.ContentType = "application/x-www-form-urlencoded"
s.ContentLength = postdatabytes.Length
Using stream = s.GetRequestStream()
    stream.Write(postdatabytes, 0, postdatabytes.Length)
End Using
res = s.GetResponse()

webStream = res.GetResponseStream()
Dim webStreamReader As New StreamReader(webStream)
While webStreamReader.Peek >= 0
    webResponse = webStreamReader.ReadToEnd()
End While 
```

# sql-server - 是否可以对 SQL Server Management Studio 中的所有查询使用共享连接？

> ID：11936246
> 
> 赞同：0
> 
> 时间：2012-08-13T14:21:22.683
> 
> 标签：sql-server, ssms

## 背景：

我有一个连接到 sql-server 数据库并从目录中的几个 .sql 文件加载脚本的应用程序。

这些查询使用临时表来传达其结果。

为了测试我正在使用 Management Studio 的查询，但这不起作用，因为每个查询选项卡都有自己的连接。

## （简化的）问题：

我在单独的 SQL 查询选项卡上有两个查询：

```
CREATE TABLE
  #tmp
(
  id INTEGER
) 
```

第二个：

```
INSERT INTO 
  #tmp
SELECT
  42 
```

现在这不起作用，因为每个查询选项卡使用不同的连接。

那么是否可以在不同的查询选项卡之间共享连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T15:07:36.687

您可以创建一个全局临时表 ( `##tmp`) 来解决您的问题吗？

# jquery - 两个元素 - 一次单击，另一个悬停，一个功能

> ID：11936248
> 
> 赞同：1
> 
> 时间：2012-08-13T14:21:23.660
> 
> 标签：jquery, click, hover

我试图让 button1 和 button2 有每个触发器，但功能相同。

像这样的东西：

```
$("#button1").hover,$("#button2").click (function () {... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T14:23:10.030

函数参数可以接收指向函数的指针。

所以：

```
$("#button1").hover(DoSomething);
$("#button2").click(DoSomething);

function DoSomething() {
     //does something...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T14:28:13.380

使用`.bind()`它允许您将多个事件绑定到一个对象。

```
$(obj).bind('hover, click',function(e){.....}) 
```

见这里：http: [//jsfiddle.net/uc9W9/](http://jsfiddle.net/uc9W9/)

编辑：：：

`.on()`如果您使用的是较新版本的 jquery，请改用，因为将来`.bind()`版本的 jquery 可能不会使用

见这里：http: [//jsfiddle.net/uc9W9/1/](http://jsfiddle.net/uc9W9/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T14:25:15.423

您可以更好地定义一次事件处理函数并在两个事件中绑定相同的函数。

```
var callback = function() { ... }
$('#button1').hover(callback);
$('#button2').click(callback); 
```

# php - CMS 或不适合我的网站？

> ID：11936250
> 
> 赞同：1
> 
> 时间：2012-08-13T14:21:27.600
> 
> 标签：php, module, content-management-system, structure, pydio

我正在建立一个网站[newfutureuniversity.org](http://newfutureuniversity.org/)，我不确定是否应该在 CMS 下重建它。我可以做程序 PHP，但不能做 OOP PHP（如果需要，我可以学习它）。我一直在努力解决这个问题，所以我决定在这里问它。

我的页面现在是这样工作的：每个页面的开头和结尾都有一个包含，每个页面都调用其他包含。例如，开头调用'translation.php'、'login.php'、'menu.php'等。

## 要求

*   代码管理。我目前正在使用[AjaXplorer](http://ajaxplorer.info/)。它很棒，非常完整，而且它无法完成我的主机（[000webhost](http://www.000webhost.com/)）提供的工具就足够了。另一个好处是它允许具有不同权限的多个用户。我需要保留此功能。

*   博客。我正在使用[Chyrp](http://chyrp.net/)来写博客，因为它是轻量级的，并且可以实现我的博客位目标。

*   用户。不使用任何引擎，只需用旧的普通 PHP 构建我自己的引擎。用户可以注册、登录等。

*   语言。还建了我自己的。它允许我翻译每一个信息。

*   维基。或类似的。对于页面中的文件，我需要（尚未完成）一个高度个性化的 wiki 引擎。我还不确定是找到一些轻量级的并个性化它还是自己做一个。另外，我应该在 wiki 引擎中包含[CKeditor 。](http://ckeditor.com/)

*   还有一些我仍然需要考虑的未来功能。

如您所见，我需要在不同目录上同时运行“基础”和不同类型的引擎。

## 问题

如果没有问题，我不会写这个问题。这些是我发现的主要问题：

*   集中用户。最重要的问题。因为我混合了不同的引擎，所以每个引擎都使用（如果我包括 wiki，甚至更糟）不同的用户表。我希望访问者只需要注册一次，然后就能够浏览 wiki、博客、提交文件或使用相同的用户名做任何其他事情。

*   集中式程序员。与用户相同，但与我计划添加到项目中的程序员一起使用。它也应该使用权限。不需要*，*但如果可能的话会更好。

*   风格。不必手动更改引擎，默认情况下每个引擎都具有相同的样式。这可能是不可能的，但也不是很重要（也不需要），只是耗时。

因此，这些引擎必须建立在相同的“基础”（CMS）上，而不是单独运行在不同的目录上。根据我在网上阅读的内容，我正在考虑切换到**Drupal**以获得巨大的支持，或者切换到**Joomla**以获得“更多”可定制性。

## 问题

这 2 个 CMS（或您建议的任何其他内容）是否会满足所有要求并解决问题？还是 CMS 模块（维基一、博客一等）仍然构建为独立的？这意味着每个人都将构建不同的用户表结构。使用 CMS 还有其他优势吗？

理想情况下，CMS 本身会构建用户表，然后模块访问它们而不是创建自己的。我从未使用过 CMS，因此我需要了解它们，但如果它有效，那不是问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T14:33:58.310

如果我是你，我会花时间学习如何使用框架、zend、code igniter、yii 等。CMS 只会在新的布局特性或简单的功能改进方面束缚你的手。

绝对去 PHP/OOP。在使用 CMS 时遇到的许多问题，您会发现很多简单的解决方案，同时您会提高您的编程技能，这是最重要的，对吧？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T14:58:51.583

CMS 不是一个框架。CMS 允许不了解 php、html、css 或您可能使用的任何其他语言的用户/管理员更改您网站的内容。在某种程度上，它不应该限制你的编码。换句话说，CMS 可以是框架的一部分，也可以是您自制的代码。我看到以“当我使用 CMS 时..”开头的响应。当您以某种方式使您的网站具有交互性时，它就是一个 CMS。您正在使用将一些文本放入数据库的表单来管理站点的内容。就像我现在输入的 textarea 一样，我是使用 stackExchange 的 CMS 的用户，但我的权限比管理员少。但我再次使用 CMS。但是 stackexchange 正在某种框架中构建他的站点，因此您可以使用框架并实现 CMS 功能。

另外，试着理解 OOP，它很难进入，但是当你掌握它的窍门时，它会很好用。它大大简化了您的代码。我是通过 Flash (ActionScript 3.0) 学会的。我发现那里更容易理解 OOP 的基础知识，因为你可以直接看到你正在做的事情。它比 PHP-OOP 更容易，因为 PHP 和 OOP 实际上并不适合。这是一个类似于 OOP 的外观（每次都变得越来越好）。所以先尝试学习OOP。

因此，作为结论，您可能会认为我会说在您选择的框架中构建您自己的 CMS 功能。但是从头开始进入框架和 OOP 有点困难。所以也许你应该建立一些功能非常简单的试错网站来学习 OOP 和框架。几年前，我正在学习 CakePHP 和学习 OOP。这有点难。所以一步一步地做，想想你想要完成什么，你需要什么。我认为这个话题是一个很好的开始。

只是为了记录，每个聪明的程序员，我认为你是，都在使用 OOP 方法，因为你不必重写代码片段，也不必复制粘贴。当您的代码良好时，您将不会在任何地方重复代码。当您在网站的 200 个页面上遇到错误并且知道您只需要更改一个文件而不是 200 个时，这很好。:)

# sql - 查找表的数据库位置

> ID：11936253
> 
> 赞同：2
> 
> 时间：2012-08-13T14:21:39.800
> 
> 标签：sql

我的 SQL Server 2008 中有几个数据库。我忘记了一些表来自哪里，所以我需要询问是否有这样的查询可以找到某个表的数据库位置？

我需要这样的东西：

```
SELECT DATABASE_NAME FROM SQLSERVER WHERE TABLE= "TBL_PRODUCTS" 
```

补充：现在，我需要知道某些视图和存储过程的数据库位置

像这样的东西：

```
SELECT DATABASE_NAME FROM SQLSERVER WHERE VIEW= "VW_PRODUCTS"

SELECT DATABASE_NAME FROM SQLSERVER WHERE StoredProcedure= "SP_PRODUCTS" 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T14:24:12.060

以下过程将完成这项工作：

```
CREATE PROCEDURE usp_FindTableNameInAllDatabase
@TableName VARCHAR(256)
AS
DECLARE @DBName VARCHAR(256)
DECLARE @varSQL VARCHAR(512)
DECLARE @getDBName CURSOR
SET @getDBName = CURSOR FOR
SELECT name
FROM sys.databases
CREATE TABLE #TmpTable (DBName VARCHAR(256),
SchemaName VARCHAR(256),
TableName VARCHAR(256))
OPEN @getDBName
FETCH NEXT
FROM @getDBName INTO @DBName
WHILE @@FETCH_STATUS = 0
BEGIN
SET @varSQL = 'USE ' + @DBName + ';
INSERT INTO #TmpTable
SELECT '''+ @DBName + ''' AS DBName,
SCHEMA_NAME(schema_id) AS SchemaName,
name AS TableName
FROM sys.tables
WHERE name LIKE ''%' + @TableName + '%'''
EXEC (@varSQL)
FETCH NEXT
FROM @getDBName INTO @DBName
END
CLOSE @getDBName
DEALLOCATE @getDBName
SELECT *
FROM #TmpTable
DROP TABLE #TmpTable
GO
EXEC usp_FindTableNameInAllDatabase 'Address'
GO 
```

结果将如下所示：

![结果表](../Images/d9c7ddf943231755493a4fe9cb6fcae5.png)

[资源](http://blog.sqlauthority.com/2008/04/29/sql-server-find-table-in-every-database-of-sql-server/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T14:41:43.707

做这个

```
Use Master
Go

    select 
    'select '''+CAST(name as varchar(200))+''' from '+CAST(name as varchar(200))+'.sys.tables where name = yourTableName' 
    from sysdatabases 
```

替换 `yourTableName`为您的表的名称，`' '`

你会得到`selects`; 然后运行这些并会得到结果。如果超过 100 `databases`，请使用，因为要网格化，您最多`results to text`只能得到 100`selects`

# c# - Linq to SQL：在更新到另一个实体期间动态插入

> ID：11936254
> 
> 赞同：2
> 
> 时间：2012-08-13T14:21:47.910
> 
> 标签：c#, linq-to-sql

我正在使用 Linq to SQL，并且有一个场景，我想在更新特定记录时插入表中。

所以可以说我有`Table1`，`Table2`每当`Table1`更新记录时，我都想将新记录插入`Table2`.

目前我有工作代码，允许我在更新时更新几个字段，`Table1`这是通过为`UpdateTable1`函数创建部分方法来实现的，如下所示：

```
partial void UpdateTable1(Table1 instance)
{
   //update some fields
   this.ExecuteDynamicUpdate(instance);
} 
```

这很好用，而且非常有用，我想用它来确保总是在更新`Table2`时创建新记录`Table1`。顺便说一句，这主要用于记录目的。

所以这就是我接下来尝试做的事情：

```
partial void UpdateTable1(Table1 instance)
{
   //update some fields
   this.ExecuteDynamicUpdate(instance);
   this.ExecuteDynamicInsert(instance.ConvertToTable2());
} 
```

（我这里使用的是扩展方法，基于Table1实例创建了Table2记录）

问题是我收到以下错误：

> 无法对实体执行该操作，因为它没有被跟踪更改。

有什么想法可以让我完成这项工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T15:04:00.340

忘记我不可靠的解决方法（如果必须，请参阅编辑历史记录），我找到了一种更可靠的方法来完成这项工作！

首先，忘记为此使用部分方法（例如`UpdateTable1`在问题中），除非您仅修改实例记录的数据，否则它效果不佳。所以我保留这些部分方法只是为了我需要更新实例中的相关字段。

这样做的`SubmitChanges`方法是覆盖部分`DataContext`类中的方法。这将允许在您允许处理默认值之前插入/更新/删除任何表记录`SubmitChanges`（并因此锁定此功能）。

在覆盖内，您可以使用 访问当前`DataContext`更改集`this.GetChangeSet()`，从中可以循环所有更改并执行所需的任何其他表工作（例如添加日志记录）。

对于下面的示例，假设我有一个名为的标准数据库表，并且我`Table1`有一个名为a （更改时间）和 a （即添加/编辑/删除）。`Table1Log``Table1``Table1Log``DateTime``LogType`

这是我最终代码的重要部分：

```
partial class MyDataContext
{

    public override void SubmitChanges(System.Data.Linq.ConflictMode failureMode)
    {

        var set = this.GetChangeSet();//get a list of all pending changes

        foreach (var item in set.Inserts)
        {
            AddLog(item, LogType.Add);
        }
        foreach (var item in set.Updates)
        {
            AddLog(item, LogType.Edit);
        }
        foreach (var item in set.Deletes)
        {
            AddLog(item, LogType.Delete);
        }

        base.SubmitChanges(failureMode);//allow the DataContext to perform it's default work (including your new log changes)

    }

    public void AddLog(object item, LogType logType)
    {

        //some painful type testing, so feel free to refactor this as you wish
        if(item is Table1)
        {
           var log = (item as Table1).ToLog(logType);//ToLog() is an extension method (one for each type)
           this.Table1_Logs.InsertOnSubmit(log);//add the log record ready to be submitted
        }
        else if(item is Table2)
        {
           //same again
        }
        //...repeat for each table class type

    }

} 
```

**注意**：可以[在此处找到](https://stackoverflow.com/a/299120/838807)if/else 类型测试的替代方法。我实际上在我的代码中使用了它，它工作得非常好，我怀疑它是否有性能优势，但是当你需要切换 50 多种类型时，它确实有助于使事情更具可读性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T15:20:54.433

好吧，对于插入，您实际上只有两个选择。好吧，实际上是3。

您可以将触发器添加到数据库。我们用它来跟踪我工作的地方。我们有一个更新触发器，它插入带有更改的记录。它很有效，也很容易。

如果您想使用 LINQ to SQL，您唯一的选择是插入您指定的表，即`db.Table2s.InsertOnSubmit(...)`，然后提交更改。

另一种选择，假设您的日志表和实体之间有外键关系，是通过 LINQ to SQL 分配该实体关系，然后您可以简单地插入您的日志实体，而无需引用数据上下文。

```
partial void UpdateEntity(Entity instance)
{
    instance.Logs.Add(instance.createLogEntry());
} 
```

以这种方式完成后，您将不需要对数据上下文的引用，但是根据您的情况，这可能不是一个选项。

# javascript - 如果 Object 未定义，为什么“if（！Object.property）”会中断？

> ID：11936257
> 
> 赞同：0
> 
> 时间：2012-08-13T14:21:54.187
> 
> 标签：javascript

如果我想检查对象的属性是否存在，我必须确保该对象存在，这对我来说似乎很愚蠢。如果一个对象是未定义的，那么它的所有属性也应该是未定义的。

那么为什么会有类似的东西

```
if ( ! Object.property ) {
    console.log('Nope!')
} else {
    console.log('Yep!')
} 
```

如果对象未定义，则完全中断？将属性验证嵌套在对象验证中很烦人。这不应该总是一个合法的 if 语句吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-13T14:24:05.070

它不起作用，因为查找属性必须首先查找定义该属性（可能）的对象。

就是这样 - 这是一种语言设计选择。设计者*可以*定义如果未定义`a.b`总是返回，但他们没有。`undefined``a`

作为捷径，您可以使用以下语法：

```
if (obj && typeof obj.property !== 'undefined') {
    // yep, it's defined (and not just "falsey")
} else {
    // nope
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T14:24:05.620

首先，您必须检查对象本身是否已定义。您无法访问不存在的对象的属性或变量。否则，您的代码会中断，如您所见。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T14:40:17.137

如果您想简化这一点，您可以查看 Ben Alman 的`getObject`and `setObject`：

[http://benalman.com/projects/jquery-getobject-plugin/](http://benalman.com/projects/jquery-getobject-plugin/)

```
var myObj = {};

// Setting.
Cowboy.setObject( 'a.b.c', { d: 1, e: 2 }, myObj ); // returns a.b.c reference

// myObj is now { a: { b: { c: { d: 1, e: 2 } } } }

// Getting.
Cowboy.getObject( 'a.b.c.d', myObj ); // returns 1
Cowboy.getObject( 'a.b.c.x', myObj ); // returns undefined
Cowboy.getObject( 'a.b.c.d.x', myObj ); // returns undefined

// Testing.
Cowboy.exists( 'a.b.c.d', myObj ); // returns true
Cowboy.exists( 'a.b.c.x', myObj ); // returns false
Cowboy.exists( 'a.b.c.d.x', myObj ); // returns false

// I'm not sure why you'd want to do something like this, but it's
// certainly possible...
Cowboy.setObject( 'document.body.style.display', 'none' );
Cowboy.getObject( 'document.body.style.display' ); // returns 'none' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T14:48:06.400

严格来说，如果您实际上是在检查属性是否存在，那么最好使用以下代码：

```
if ( Object && "property" in Object ) {
    // defined
} else {
    // nope
} 
```

原因是属性可能存在但包含值“未定义”。

欲了解更多信息，请查看[此处](http://chamnapchhorn.blogspot.co.uk/2008/08/checking-property-existence-in.html)

# java - JScrollbar 每 50 像素滚动一次

> ID：11936258
> 
> 赞同：1
> 
> 时间：2012-08-13T14:21:56.007
> 
> 标签：java, swing, jscrollpane, jscrollbar

我正在开发一个包含滚动条的程序。在程序中，我得到了一个 500 像素的可滚动字段，我希望滚动条每 50 像素滚动一次。所以我得到了10页。我不想能够显示 50% 的页面我只想能够一次显示 1 页。那么如何更改滚动尺寸？

还是有更好的方法来实现这一点？

问候，并提前感谢布拉姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T14:42:22.603

您可以使可滚动字段实现`Scrollable`接口，该接口声明了滚动字段将用来决定滚动多远的两种方法，`getScrollableUnitIncrement`（滚轮，单击滚动箭头）和`getScrollableBlockIncrement`（单击滚动条的轨迹）。

如果你真的只希望它是 50，你可以使用

```
jScrollPane.getVerticalScrollBar().setUnitIncrement(50);
jScrollPane.getVerticalScrollBar().setBlockIncrement(50); 
```

但是，如果用户然后拖动滚动条直到显示半页（我认为这种行为不能轻易改变），滚动仍然会跳转 50 像素并显示下一页的一半......如果你实现`Scrollable`，你可以基于当前可见的滚动量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T14:36:13.773

和你一起试试`JScrollPane`

```
scrollPane.getVerticalScrollBar().setUnitIncrement(50); 
```

当您使用`JScrollPane`向上/向下按钮滚动时，这会有所帮助，但您可以通过使用鼠标移动旋钮来显示半页。

作为替代方案，我可以建议`AdjustmentListener`手动观察旋钮位置并移动 scrollPane 值。

```
scrollPane.getVerticalScrollBar().addAdjustmentListener(new AdjustmentListener()
    {
        public void adjustmentValueChanged(AdjustmentEvent e)
        {
            scrollPane.getVerticalScrollBar().setValue(e.getValue() / 50 * 50);
        }
    }); 
```

但我认为这不是一个好主意。可能有人会提出更好的方法。

# java - 二叉树打印所有路径

> ID：11936264
> 
> 赞同：0
> 
> 时间：2012-08-13T14:22:13.993
> 
> 标签：java, algorithm, optimization, tree, binary-tree

下面的设计可以进一步优化吗？我使用了哈希图和队列。SO 空间复杂度为 O(n)，运行时间为 O(n)

```
public class PrintAllRootToLeaves {

    public static void print(BinaryTreeNode root) {     

        Queue nodesQ = new Queue();
        HashMap hMap = new HashMap();
        BinaryTreeNode head = root;
        String tempVal ;        
        hMap.put(head,String.valueOf(head.getData()));
        while (head != null) {

            BinaryTreeNode left = head.getLeft();
            BinaryTreeNode right = head.getRight(); 

            if (left != null) {
                if ((tempVal = (String) hMap.get(head)) != null) {                  
                    hMap.put(left,tempVal + left.getData());
                }
                nodesQ.enqueue(left);
            }

            if (right != null) {
                if ((tempVal = (String) hMap.get(head)) != null) {  
                    hMap.put(right,tempVal + right.getData());

                }
                nodesQ.enqueue(right);
            }           
            if (right != null && left != null) {
                hMap.remove(head);
            }
            head = (BinaryTreeNode) nodesQ.dequeue();                       
        }       
        System.out.println("-----------Printing all routes ---------->" + hMap.values());               
    }
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-08-01T02:34:04.653

```
public class BinaryTree {

    private class Node {
        final int key;
        final int value;
        Node left;
        Node Right;

        public Node (Node node, int pKey, int qValue) {
            key = pKey;
            value = qValue;
            if (node != null && node.key < pKey) {
                left = node;
            }
            else if (node != null) {
                Right = node;
            }
        }
    }

    public void preOrderTraversal(Node pNode,String path){

        if (path == null) {
            path = "";
        }
        if (pNode != null) {
            path = path+" "+String.valueOf(pNode.key);
//If you remove the modulo check it will print all the paths.
            if (pNode.key%5 == 0) {
                System.out.println(path);
            }
            preOrderTraversal(pNode.left,path);

            preOrderTraversal(pNode.Right,path);

        }

    }

    /**
     * @param args
     */
    public static void main(String[] args) {
        Node node1 = new BinaryTree().new Node(null, 5, 2);
        Node node2 = new BinaryTree().new Node(null, 10, 25);
        Node node3 = new BinaryTree().new Node(node1, 7, 50);
        node3.Right = node2;
        Node root = new BinaryTree().new Node(node3, 15, 6);
        Node node4 = new BinaryTree().new Node(null, 30, 8);
        Node node5 = new BinaryTree().new Node(node4, 20, 7);
        root.Right = node5;
//This will print paths only divisable by 5
        new BinaryTree().preOrderTraversal(root,null);
    }

} 
```

# firefox - 用于测试移动设计的浏览器插件

> ID：11936265
> 
> 赞同：8
> 
> 时间：2012-08-13T14:22:14.570
> 
> 标签：firefox, firefox-addon, fennec

是否有任何附加组件可以测试 HTML 页面以查看它在移动设备上的外观？我正在使用 PhoneGap 进行开发，但 Eclipse 模拟器太慢了，无法一直刷新它，所以我想要一个浏览器扩展，让屏幕分辨率像在移动设备上一样。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-13T14:35:30.980

如果您只关心屏幕尺寸，Firefox 15（目前为[Beta 版](http://www.mozilla.org/firefox/beta/)，两周后发布）在 Web Developer 菜单中具有[响应式设计视图](https://hacks.mozilla.org/2012/07/debugger-responsive-design-view-and-more-in-firefox-aurora-15/)，可让您调整“屏幕尺寸”。例如，您可以选择 360x640（nHD 分辨率）并查看您的页面。

但是，移动浏览器会对网页进行自定义调整，这些调整取决于所使用的浏览器。例如，Firefox Mobile 做了一个叫做[Font Inflation](http://jwir3.wordpress.com/2012/07/30/font-inflation-fennec-and-you/)的事情。您无法在桌面浏览器中重现它，您必须为此实际运行 Firefox Mobile。问题：移动浏览器只能在手机上运行，​​甚至 Mozilla 在切换到原生 Android UI 后也停止为桌面提供 Firefox Mobile。

**编辑**：从 Firefox 33 开始，Firefox 内置了一个 Firefox OS 模拟器（感谢[Tomek](https://stackoverflow.com/users/1597982/tomek)为我指明了这个方向）。要启动它，请[打开 WebIDE](https://developer.mozilla.org/en-US/docs/Tools/WebIDE/Opening_WebIDE)，然后单击“选择运行时”并选择“Firefox OS 1.3”。这将启动模拟器，然后您需要做的就是单击 Firefox 图标（对我来说它是蓝色的，而不是通常的橙色）。在那里，您可以在真正的移动浏览器中测试任何网站，就在您的桌面上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-20T16:54:23.053

[Firefox OS 模拟器](https://addons.mozilla.org/en-US/firefox/addon/firefox-os-simulator/)可以解决问题：只需安装它。运行它 - 并在里面运行浏览器。:)

# regex - 在匹配模式后如何在 perl.regex 中的字符串后添加破折号

> ID：11936266
> 
> 赞同：0
> 
> 时间：2012-08-13T14:22:15.803
> 
> 标签：regex, perl, pattern-matching

我有这种类型的数据：请帮助我，我是正则表达式的新手，请在回答时解释每个步骤。谢谢..

```
7210315_AX1A_1X50_LI_MOTORTRAEGER_VORN_AUSSEN

7210316_W1A_1X50_RE_MOTORTRAEGER_VORN_AUSSEN

7210243_U1A_1X50_LI_MOTORTRAEGER_VORN_INNEN

7210330_AV21NA_ABSTUETZUNG_STUETZTRAEGER_RAD 
```

我只想从上面的行中提取这些数据：

```
7210315_AX1A_MOTORTRAEGER_VORN_AUSSEN

7210316_W1A_MOTORTRAEGER_VORN_AUSSEN

7210243_U1A_MOTORTRAEGER_VORN_INNEN

7210330_AV21NA_ABSTUETZUNG_STUETZTRAEGER_RAD 
```

那么如果*AX1A*在下划线后包含两个连续的字母，则应写为 AX_ ，如果包含单个数字和单个字母，则它们变为 -1_ 和 -A_ ，因此在应用此模式后，它将变为： AX_-1_-A_ 和所有其他数据应保持不变。

同样在下一行“W1A”中，所以首先它包含单个字母“W”，应该转换为 -W_ 现在下一个字符是单个数字，所以它也应该转换为相同的模式 -1_ 同样最后一个也被视为相同。所以它变成-W_-1_-A_

我们只对将正则表达式应用于数字后跟下划线的部分感兴趣。

```
_AX1A_

_W1A_

_U1A_

_AV21NA_ 
```

输出应该是：

```
7210315_AX_-1_-A_MOTORTRAEGER_VORN_AUSSEN

7210316_-W_-1_-A_MOTORTRAEGER_VORN_AUSSEN

7210243_-U_-1_-A_MOTORTRAEGER_VORN_INNEN

7210330_AV_21_NA_ABSTUETZUNG_STUETZTRAEGER_RAD 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:45:36.413

我不知道你需要剥离的所有细节，但我会推断并让你澄清这是否不能完全满足你的需要。

对于第一步，提取`1X50_RE_`and `1X50_LI`，您可以搜索这些字符串并将它们替换为空。

接下来，要将您的第二个字母/数字代码分成小块，您可以使用一对匹配项，对每个匹配项使用前瞻。但是，由于您只想弄乱第二个代码块，因此我会先拆分整个线路，处理第二个代码块，然后再将各个部分重新组合在一起。

```
while (<$input>) {

    # Replace the 1X50_RE/LI_ bits with nothing (i.e., delete them)
    s/1X50_(RE|LI)_//;

    my @pieces = split /_/; # split the line into pieces at each underscore

    # Just working with the second chunk. /g, means do it for all matches found
    $pieces[1] =~ s/([A-Z])(?=[0-9])/$1_-/g; # Convert AX1 -> AX_-1
    $pieces[1] =~ s/([0-9])(?=[A-Z])/$1_-/g; # Convert 1A -> 1-_A

    # Join the pieces back together again
    $_ = join '_', @pieces;

    print;
} 
```

`$_`如果您不指定，则它是许多 Perl 操作所使用的变量。读取名为的文件句柄的`<$input>`下一行。, ,和函数在没有给出时起作用。运算符是您告诉 Perl 使用（或您正在处理的任何变量）而不是用于正则表达式操作的方式。（对于or ，您将变量作为参数传递，因此与和相同。）`$input``$_``s///``split``print``$_``=~``$pieces[1]``$_``split``print``split /_/``split /_/, $_``print``print $_`

哦，解释一下正则表达式：

```
s/1X50_(RE|LI)_//; 
```

这是匹配任何包含`1X50_RE`or的东西`1X50_LI`（这`(|)`是一个替代列表）并将它们替换为空（`//`最后是空的）。

查看其他行之一：

```
s/([A-Z])(?=[0-9])/$1_-/g; 
```

将原因`(...)`周围的普通括号设置为内部匹配的任何字母（在本例中为字母 AZ）。括号导致零宽度正向预测断言。这意味着正则表达式仅在字符串中的下一个匹配表达式（数字，0-9）时才匹配，但匹配的那部分不包含在被替换的字符串中。`[A-Z]``$1``(?=...)`

`/$1_-/`导致字符串的匹配部分 ,被`[A-Z]`替换为括号捕获的值, `(...)`, 但在查找头之前, `[0-9]`, 添加`_-`您需要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T14:51:34.077

你确定是这样的：

```
while (<DATA>) {
    s/1X50_(LI|RE)_//;
    s/(\d+)_([A-Z])(\d)([A-Z])/$1_-$2_-$3_-$4/;
    s/(\d+)_([A-Z]{2})(\d)([A-Z])/$1_$2_-$3_-$4/;
    s/(\d+)_([A-Z]{1,2})(\d+)([A-Z]+)/$1_$2_$3_$4/;
    print;
}

__DATA__
7210315_AX1A_1X50_LI_MOTORTRAEGER_VORN_AUSSEN
7210316_W1A_1X50_RE_MOTORTRAEGER_VORN_AUSSEN
7210243_U1A_1X50_LI_MOTORTRAEGER_VORN_INNEN
7210330_AV21NA_ABSTUETZUNG_STUETZTRAEGER_RAD 
```

输出：

```
7210315_AX_-1_-A_MOTORTRAEGER_VORN_AUSSEN
7210316_-W_-1_-A_MOTORTRAEGER_VORN_AUSSEN
7210243_-U_-1_-A_MOTORTRAEGER_VORN_INNEN
7210330_AV_21_NA_ABSTUETZUNG_STUETZTRAEGER_RAD 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T15:02:59.463

```
use strict;
use warnings;

my $match 
    = qr/
    ( \d+          # group of digits
      _            # followed by an underscore
    )              # end group
    ( \p{Alpha}+ ) # group of alphas             
    ( \d+ )        # group of digits
    ( \p{Alpha}* ) # group of alphas
    ( \w+ )        # group of word characters
    /x
    ;

while ( my $record = <$input> ) { # record of input
    # match and capture
    if ( my ( $pre, $pre_alpha, $num, $post_alpha, $post ) = $record =~ m/$match/ ) {
        say $pre 
             # if the alpha has length 1, add a dash before it
          . ( length $pre_alpha == 1 ? '-' : '' )
            # then the alpha
          . $pre_alpha
            # then the underscore
          . '_'
            # test if the length of the number is 1 and the length of the 
            # trailing alpha string is 1 
          . ( length( $num ) == 1 && length( $post_alpha ) == 1
              # if true, apply a dash before each 
            ? "-$num\_-$post_alpha" 
              # otherwise treat as AV21NA in example.
            : "$num\_$post_alpha"
            )
          . $post
          ;

    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T15:04:35.240

```
#!/usr/bin/perl -w
use strict;
while (<>) {
    next if /^\s*$/;
    chomp;
    ## Remove those parts of the line we do not want
    ## You do not specify what, if anything, is constant about
    ## the parts you do not want. One of the following cases should
    ## serve.

    ## i) Remove the string _1X50_ and the next characters between
    ## two underscores:
    s/_1X50_.+?_/_/;

    ## ii) keep the first 2 and last 3 sections of each line.
    ## Uncomment this line and comment the previous one to use this:
    #s/^(.+?_.+?)_.+_(.+_.+_.+)$/$1_$2/;

    ## The line now contains only those regions we are 
    ## interested in. Split on '_' to collect an array of the
    ## different parts (@a):
    my @a=split(/_/);

    ## $a[1] is the second string, eg AX1A,W1A etc.
    ## We search for one or more letters, followed by one or more digits
    ## followed by one or more letters. The 'i' operand makes the match
    ## case Insensitive and the 'g' operand makes the search global, allowing
    ## us to capture the matches in the @matches array. 
    my @matches=($a[1]=~/^([a-z]*)(\d*)([a-z]*)/ig);

    ## So, for each of the matched strings, if the length of the match
    ## is less than 2, add a '-' to the beginning of the string:
    foreach my $match (@matches) {
        if (length($match)<2) {
        $match="-" . $match;
        }
    }
    ## Now replace the original $a[1] with each string in
    ## @matches, connected by '_':
    $a[1]=join("_", @matches);

    ## Finally, build the string $kk by joining each element
    ## of the line (@a) by a '_', and print:
    my $kk=join("_", @a);
    print "$kk\n";
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-13T14:56:40.230

如果您是 regex 初学者，zostay 的拆分线建议可能会使事情变得更容易。但是，从性能的角度来看，避免拆分是最佳的。以下是如何在不拆分的情况下执行此操作：

```
open IN_FILE, "filename" or die "Whoops!  Can't open file.";
while (<IN_FILE>)
{
     s/^\d{7}_\K([A-Z]{1,2})(\d{1,2})([A-Z]{1,2})/-${1}-${2}-${3}/ 
          or print "line didn't match: $line\n";
     s/1X50_(LI|RE)_//;
} 
```

分解第一个模式： `s///`是搜索和替换运算符。 `^`匹配行的开头 `\d{7}_`匹配七位数字，后跟下划线 `\K`后视运算符。这意味着之前出现的任何内容都不会成为被替换字符串的一部分。`()`每组括号指定将被捕获的匹配块。这些将按顺序放入匹配变量 $1、$2 等中。`[A-Z]{1,2}`这意味着匹配一到两个大写字母。您可能会弄清楚括号中的其他两个部分的含义。`-${1}-${2}-${3}`用前三个匹配变量替换匹配的内容，前面是破折号。花括号的唯一原因是为了明确变量名是什么。

# iphone - GCDasyncUdpSocket 和 wifi 接口

> ID：11936267
> 
> 赞同：2
> 
> 时间：2012-08-13T14:22:17.910
> 
> 标签：iphone, objective-c, cocoa, cocoaasyncsocket

en0 似乎是 Apple iOS 设备的 wifi 接口，但在我的代码中，当我指定接口 en0 时，小型多播客户端我没有收到任何东西。有什么可能出错的线索吗？GDCasyncUdpSocket 日志不显示任何错误 => 将套接字绑定到端口（1234）接口（（en0））

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    //log test
    [DDLog addLogger:[DDTTYLogger sharedInstance]];

    // Create multicast High Priotity queue
    mcastQueue = dispatch_queue_create("mcastQueue", NULL);
    dispatch_queue_t high = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0);

    dispatch_set_target_queue(mcastQueue, high);

    // Create UDP Socket
    mcastSocket=[[GCDAsyncUdpSocket alloc] initWithDelegate:self     delegateQueue:mcastQueue];

    [mcastSocket setPreferIPv4];
    return self;
}

- (void)viewDidLoad {
[super viewDidLoad];

  NSError *socketError=nil;

if (![mcastSocket bindToPort:1234 interface:@"en0" error:&socketError]) {
    NSLog(@"Failed binding socket to port: %@" ,socketError);
    return;
}

if (![mcastSocket enableBroadcast:YES error:&socketError]) {
    NSLog(@"Failed enabling broadcast: %@" ,socketError);
    return;
}

if (![mcastSocket joinMulticastGroup:@"239.0.0.1" error:&socketError]) {
    NSLog(@"Failed joining multicast group: %@" ,socketError);
    return;
}

//start receiving multicast data
if (![mcastSocket beginReceiving:&socketError]) {
    [mcastSocket close];
    NSLog(@"Failed to start receiving: %@" ,socketError);

} else {
    NSLog(@"Multicast start receiving");
}
} 
```

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-03-23T23:26:10.123

经过一年左右的间歇性尝试解决这个问题并放弃后，我终于找到了我认为的答案。

答案是在接收 UDP 数据包时***不***应该绑定到接口。（见[https://stackoverflow.com/a/10739443/179216](https://stackoverflow.com/a/10739443/179216)）

相反，您应该在***加入***多播组时指定接口：

```
// Do *not* specify the interface here
if (![mcastSocket bindToPort:1234 error:&socketError]) {
    NSLog(@"Failed binding socket to port: %@" ,socketError);
    return;
}

if (![mcastSocket enableBroadcast:YES error:&socketError]) {
    NSLog(@"Failed enabling broadcast: %@" ,socketError);
    return;
}

// This is where you specify the interface
if (![mcastSocket joinMulticastGroup:@"239.0.0.1" onInterface:@"en0" error:&socketError]) {
    NSLog(@"Failed joining multicast group: %@" ,socketError);
    return;
} 
```

# javascript - 如何使用 ScriptTags 为 shopify 开发 Rails 应用程序

> ID：11936268
> 
> 赞同：3
> 
> 时间：2012-08-13T14:22:18.597
> 
> 标签：javascript, ruby-on-rails, frontend, shopify

我在 Heroku 中部署了一个 Shopify 应用程序，在 Rails 中开发。我需要从任何 shopify 商店的前端调用一个 javascript 函数。我读过这篇文章（[http://www.shopify.com/technology/3033852-shopify-api-update-scripttags-javascript-insertion](http://www.shopify.com/technology/3033852-shopify-api-update-scripttags-javascript-insertion)），但我不明白......

我必须把这段代码放在哪里：

```
HTTP POST http://their-shop.myshopify.com/admin/scripttags

  <?xml version="1.0" encoding="UTF-8"?>
  <script-tag>
    <src>http://example.com/your-awesome-script.js</src>
    <event>onload</event>
  </script-tag> 
```

src 标签应该是什么（对于我部署的 rails 应用程序），我应该把 javascript 调用函数放在哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T15:03:49.153

这可能会有所帮助。

[Shopify Rails 应用程序](http://wiki.shopify.com/Creating_an_app_and_deploying_it_to_Heroku_using_Rails_3)

您只需对用户进行身份验证，然后您需要获取从 Shopify 生成的令牌并将其保存在您的数据库中。稍后只做：

```
ShopifyAPI::Base.site = token 
```

然后使用以下命令安装脚本：

```
s = ShopifyAPI::ScriptTag.create(:events => "onload",:src => "your javascript url") 
```

你就完成了！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T07:44:00.393

这是我为使其正常工作所做的：

在位于 app > controllers 的 sessions_controller.rb 文件中

在这之后

```
def show
  if response = request.env['omniauth.auth']
    sess = ShopifyAPI::Session.new(params[:shop], response[:credentials][:token])
    session[:shopify] = sess 
```

我添加了

```
ShopifyAPI::Base.activate_session(sess)
ShopifyAPI::ScriptTag.create(:event => "onload", :src => "https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js") 
```

您需要将`https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js`上面的代码中的代码替换为您的绝对 js 文件路径。

然后在位于 config > initializers 的 omniauth.rb 文件中，确保添加`write_script_tags`到范围，即

```
:scope => 'write_script_tags', 
```

并且您可能还需要重新启动 Rails 服务器并重新安装应用程序，以便授予这些权限。这应该够了吧！

# asp.net - 我收到错误“无法在 nvarchar 上调用方法”，为什么？

> ID：11936272
> 
> 赞同：0
> 
> 时间：2012-08-13T14:22:21.063
> 
> 标签：asp.net, sql, vb.net, stored-procedures

大家好，我已经写了这个存储过程，但是里面有一个错误，上面写着

> 无法在 nvarchar 上调用方法

T-SQL 代码：

```
ALTER PROCEDURE dbo.User_Announcement_Create
        @Announcement nvarchar(250),
        @UserName nvarchar(256)
AS
BEGIN
    DECLARE @NewAnnouncement nvarchar(250)
    SELECT @NewAnnouncement = NULL

    IF( @UserName.dbo.Announcements IS NULL )
       ( SELECT UserName FROM dbo.aspnet_Users
         WHERE @UserName = UserName ) 
       RETURN -1
END

DECLARE @CreateAnnouncement bit

DECLARE @ReturnValue   int
SET @ReturnValue = 0

SELECT @NewAnnouncement = Announcement FROM Announcements

SET @CreateAnnouncement = 1

INSERT INTO Announcements (Announcement, UserName)
VALUES (@Announcement, @UserName) 
```

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:32:08.437

更换这部分

```
IF( @UserName.dbo.Announcements IS NULL ) -- not understandable what are you doing here 
```

有了这个

```
IF( @UserName IS NULL ) 
```

# antlr - Antlr 生成的 Java 与 Antlr IDE 不匹配

> ID：11936273
> 
> 赞同：1
> 
> 时间：2012-08-13T14:22:21.890
> 
> 标签：antlr, grammar

我有一个语法，它接受每行出现一个的键/值对。这些值可以是多行的。

Eclipse 插件 ANTLR IDE 工作正常并接受有效的测试字符串。但是，生成的 Java 不接受相同的字符串。

这是语法：

```
message: block4 ;

block4:  STARTBLOCK '4' COLON expr4+ ENDBLOCK ;

expr4:   NEWLINE (COLON key COLON expr | '-')+;

key:     FIELDVALUE* ; 

expr:    FIELDVALUE* ; 

NEWLINE    : ('\n'|'\r') ;
FIELDVALUE : (~('-'|COLON|ENDBLOCK|STARTBLOCK))+; 
COLON      : ':' ;
STARTBLOCK : '{' ;
ENDBLOCK   : '}' ; 
```

ANTLR IDE 正确解析： ![SwiftTiny 解析树](../Images/538f0dc5c1d9fcc86de146ae253d305f.png)

不要眯着眼睛...它正在划分键/表达式对，无论它们是单行值（如 23B / CRED）还是多行值（如 59 / /13212312\r\nRECEIVER NAME SA\r\n）。

这是输入字符串：

```
{4:
:20:007505327853
:23B:CRED
:32A:050902JPY3520000,
:33B:JPY3520000,
:50K:EUROXXXEI
:52A:FEBXXXM1
:53A:MHCXXXJT
:54A:FOOBICXX
:59:/13212312
RECEIVER NAME S.A
:70:FUTURES
:71A:SHA
:71F:EUR12,00
:71F:EUR2,34
-} 
```

Eclipse 在语法上运行 anltr-3.4-complete.jar 时，会生成 SwiftTinyLexer.java 和 SwiftTinyParser.java。词法分析器将它们词法分析为 35 个标记，首先是：

1.  起始块
2.  4
3.  冒号
4.  字段值
5.  冒号

我希望令牌 4 成为 expr4 而不是 FIELDVALUE（IDE 似乎同意我的看法）。但由于它是一个 FIELDVALUE，解析器会用`line 1:3 required (...)+ loop did not match anything at input '\r\n'`.

为什么 anltr 3.4 和 ANTLR IDE 2.1.2.201108281759 lex 相同字符串的方式有区别？

有没有办法修复语法，使其在匹配 FIELDVALUE 之前匹配 expr4？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T17:21:59.080

IDE 输入字符串有一个`\n`，而 Java 测试代码是 Windows 样式的`\r\n`。

我通过添加“1 或更多”来更改 NEWLINE，即

```
NEWLINE    : ('\n'|'\r') ; 
```

到

```
NEWLINE    : ('\n'|'\r')+ ; 
```

这使得解析继续进行而没有词法错误，现在为什么 IDE 的行为与生成的 Java 不同是有道理的：它们得到的输入字符串略有不同。

# android - 以编程方式在 API 级别 7 中设置视图位置

> ID：11936279
> 
> 赞同：4
> 
> 时间：2012-08-13T14:22:36.583
> 
> 标签：android, android-layout, android-view, android-compatibility

目前我正在尝试使用以下代码设置我以编程方式创建的视图的位置：

```
LayoutParams params = bottomBar.getLayoutParams();
params.height = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP,(float) 5, getResources().getDisplayMetrics());
params.width = LayoutParams.MATCH_PARENT;
bottomBar.setLayoutParams(params);
bottomBar.setLeft(0);
bottomBar.setTop(this.getHeight()-bottomBar.getHeight()); 
```

**问题**

我得到的错误是我不能在低于 11 的 api 级别中使用`setLeft`and属性。`setTop`

**问题**

如何以编程方式设置视图的位置`API level < 11`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T14:31:58.827

看起来您已经在创建自定义视图，因此您将覆盖`onLayout()`并调用`View#layout(int left, int top, int right, int bottom)`所需的布局。

```
final int left = 0;
final int top = getHeight() - bottomBar.getHeight();
final int right = left + bottomBar.getWidth();
final int bottom = top + bottomBar.getHeight();
bottomBar.layout(left, top, right, bottom); 
```

# directshow - DirectShow 过滤器图的 CMP4 解码器

> ID：11936292
> 
> 赞同：1
> 
> 时间：2012-08-13T14:23:17.223
> 
> 标签：directshow, mp4, decoder

我有我必须用**CMP4 编解码器**格式解码的流...有人知道 CMP4 解码器吗？

**注意：** 当我使用 Elecard 等标准 MP4 解码器解码流时，我得到一个损坏的图像......主要是红绿和黄色图片。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T08:13:25.653

CMP4 是 Comart Systems 的编解码器。[您可以在下载站点](http://www.comartsystem.com/EU/SUPPORT/download/patch/)上找到 Codec Pack 。使用“Comart Hicap/MIS Codec Pack”或“Comart ND & Pillar Codec Pack”，您应该能够播放这些文件。

# django - 没有默认用户模型的 Tastypie 身份验证

> ID：11936296
> 
> 赞同：0
> 
> 时间：2012-08-13T14:23:24.467
> 
> 标签：django, authorization, tastypie

我正在使用 Django Tastypie 构建一个 API，并且我正在尝试实现 ApiKeyAuthentication。

我的系统没有使用 Django 提供的内置 User 模型，所有示例似乎都依赖于此。

我创建了自己的 User 模型版本，称为 Author，它更简单。对于 ApiKeyAuthorization，我希望能够使用 Author 的 id 而不是 User 模型的用户名。

有没有一种方法可以在不使用用户模型的情况下构建这个授权系统？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:34:32.393

ApiKeyAuthentication 依赖于 Django 的内置用户对象。这是一个相当简单的类实现，查看它的源代码应该可以让您了解如何[编写自己的身份验证模型](http://django-tastypie.readthedocs.org/en/latest/authentication_authorization.html#implementing-your-own-authentication-authorization)。

# python - BIT 转换 HEx 值 telnet

> ID：11936299
> 
> 赞同：1
> 
> 时间：2012-08-13T14:23:36.510
> 
> 标签：python

我正在控制一个以秒为单位报告总灯泡时间的设备。数据是小端的。

```
0xXX, 0xXX, 0x2A, 0x30 
```

所以我知道这个值是 10800 秒。

我不确定我是否只是抓取每个字节，然后用变量重新排序字节，还是我真的需要移动它们？但是，如果我转移它们，我可能会丢失数据吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T14:29:35.050

使用该`struct`模块从字节流中提取数值。您可以指定编码值的字节顺序。

# java - Mockito - 如何验证从未调用过模拟

> ID：11936301
> 
> 赞同：65
> 
> 时间：2012-08-13T14:23:39.333
> 
> 标签：java, junit, mockito

我正在寻找一种使用 Mockito 验证的方法，即在测试期间与给定的模拟没有任何交互。对于具有验证模式的给定方法，很容易实现这一点`never()`，但我还没有找到完整模拟的解决方案。

我真正想要实现的是：在测试中验证，没有任何东西打印到控制台。jUnit 的总体思路是这样的：

```
private PrintStream systemOut;

@Before
public void setUp() {
    // spy on System.out
    systemOut = spy(System.out);
}

@After
public void tearDown() {
    verify(systemOut, never());  // <-- that doesn't work, just shows the intention
} 
```

A`PrintStream`有很多方法，我真的不想用单独的验证来验证每一个方法——对于`System.err`......

所以我希望，如果有一个简单的解决方案，我可以，考虑到我有很好的测试覆盖率，强制软件工程师（和我自己）在提交更改之前`System.out.println("Breakpoint#1");`或之前删除他们的（我的）调试代码。`e.printStacktrace();`

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-08-13T15:10:53.623

用这个 ：

```
import static org.mockito.Mockito.verifyZeroInteractions;

// ...

private PrintStream backup = System.out;

@Before
public void setUp() {
    System.setOut(mock(PrintStream.class));
}

@After
public void tearDown() {
    verifyZeroInteractions(System.out);
    System.setOut(backup);
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-13T14:28:08.637

```
verifyZeroInteractions(systemOut); 
```

如评论中所述，这不适用于间谍。

有关大致等效但更完整的答案，请参阅 gontard 对此问题的回答。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2020-02-12T23:40:42.217

由于原始正确答案`verifyZeroInteractions`已被弃用，请`verifyNoInteractions`改用：

```
import org.junit.jupiter.api.Test;

import static org.mockito.Mockito.*;

public class SOExample {

    @Test
    public void test() {
        Object mock = mock(Object.class);
        verifyNoInteractions(mock);
    }
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-13T14:52:00.807

您可以尝试稍微不同的方法：

```
private PrintStream stdout;

@Before public void before() {
    stdout = System.out;
    OutputStream out = new OutputStream() {
        @Override public void write(int arg0) throws IOException {
            throw new RuntimeException("Not allowed");
        }
    };
    System.setOut(new PrintStream(out));
}

@After public void after() {
    System.setOut(stdout);
} 
```

如果您愿意，您可以将匿名类型切换为模拟并[按照 Don Roby 的建议](https://stackoverflow.com/a/11936364/304)进行验证。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-14T11:05:18.617

解决此问题的一种方法是重构您正在测试的类，以允许注入可用于输出的 PrintStream。这将让您对它进行单元测试，而不依赖于`System`类的行为。您可以为此注入使用包私有构造函数，因为您只会在相应的测试类中使用它。所以它可能看起来像这样。

```
public class MyClass{
    private PrintWriter systemOut;

    public MyClass(){
        this(System.out);
    }

    MyClass(PrintWriter systemOut){
        this.systemOut = systemOut;

        // ...any other initialisation processing that you need to do
    }
} 
```

在类本身中，在调用后者的任何地方都使用 systemOut 变量而不是 System.out。

现在，在测试类中，创建一个 mock`PrintStream`并将其传递给 package-private 构造函数，以获取您要测试的对象。现在，您可以从测试中运行您喜欢的任何操作，并使用它`verify`来检查它们对您的 mock 的影响`PrintStream`。

# facebook - Facebook 应用程序未重定向到登录页面

> ID：11936302
> 
> 赞同：1
> 
> 时间：2012-08-13T14:23:44.037
> 
> 标签：facebook, redirect, canvas, login

当用户未登录并转到apps.facebook.com/my_app_name_here Facebook 重定向到“应用程序“我的APP NAME HERE”的使用已被限制”页面（如果我先登录它工作正常）。

我根本没有看到请求到达我的服务器。我必须对我的应用程序设置做些什么才能使其正常工作。像 cityville 这样的游戏会正确重定向到登录页面，然后在登录时将您带回应用程序页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T01:43:31.787

这可能是因为您的应用配置了**限制**。[检查Developer App](https://developers.facebook.com/apps)中应用设置的“高级”选项卡中的限制。当用户未登录时，Facebook 无法判断用户是否受到您配置的任何限制，因此必须显示受限制的消息。

例如，如果您的应用仅限于 21 岁及以上，则 Facebook 无法确定用户的年龄，直到他/她登录。

# sql-server - 使用 SQL Server 创建跨计算机互斥锁

> ID：11936307
> 
> 赞同：5
> 
> 时间：2012-08-13T14:23:52.710
> 
> 标签：sql-server, sql-server-2008, synchronization, locking

我有几台计算机使用相同的数据库（SQL Server 2008）

我正在尝试使用数据库在所有这些计算机之间同步任务。

每个任务都由一个锁定 ID 的 guid 表示（如果与 Mutex 相比，那将是 Mutex 名称）

我有一些想法，但我认为它们是一种黑客，并希望这里有人能有更好的解决方案：

1.  创建一个新表“锁定”每行由一个 guid 组成，在事务中专门锁定表行 - 并在完成后完成/恢复事务。
2.  `sp_getapplock`在锁定名称为锁定 ID GUID 的事务中使用

我认为保持事务运行不太好......我想也许有一个解决方案不需要我保持打开的事务或会话？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-12-03T12:44:56.970

我已经整理了一个小班***将测试和反馈***

```
public class GlobalMutex
{
    private SqlCommand _sqlCommand;
    private SqlConnection _sqlConnection;

    string sqlCommandText = @"

        declare @result int
        exec @result =sp_getapplock @Resource=@ResourceName, @LockMode='Exclusive', @LockOwner='Transaction', @LockTimeout = @LockTimeout

    ";

    public GlobalMutex(SqlConnection sqlConnection, string unqiueName, TimeSpan lockTimeout)
    {
        _sqlConnection = sqlConnection;
        _sqlCommand = new SqlCommand(sqlCommandText, sqlConnection);
        _sqlCommand.Parameters.AddWithValue("@ResourceName", unqiueName);
        _sqlCommand.Parameters.AddWithValue("@LockTimeout", lockTimeout.TotalMilliseconds);
    }

    private readonly object _lockObject = new object();
    private Locker _lock = null;
    public Locker Lock
    {
        get
        {
            lock(_lockObject)
            {
                if (_lock != null)
                {
                    throw new InvalidOperationException("Unable to call Lock twice"); // dont know why
                }
                _lock = new Locker(_sqlConnection, _sqlCommand);
            }
            return _lock;
        }
    }

    public class Locker : IDisposable
    {
        private SqlTransaction _sqlTransaction;
        private SqlCommand _sqlCommand;

        internal Locker(SqlConnection sqlConnection, SqlCommand sqlCommand)
        {
            _sqlCommand = sqlCommand;
            _sqlTransaction = sqlConnection.BeginTransaction();
            _sqlCommand.Transaction = _sqlTransaction;
            int result = sqlCommand.ExecuteNonQuery();
        }

        public void Dispose()
        {
            Dispose(true);
            GC.SuppressFinalize(this);
        }

        protected virtual void Dispose(bool disposing)
        {
            if (disposing) 
            {
                _sqlTransaction.Commit(); // maybe _sqlTransaction.Rollback() might be slower
            }
        }
    }
} 
```

用法是：

```
GlobalMutex globalMutex = new GlobalMutex(
    new SqlConnection(""),
    "myGlobalUniqueLockName",
    new TimeSpan(0, 1, 0)
);

using (globalMutex.Lock)
{
    // do work.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T14:45:22.130

我会推荐一些不同的东西：[使用队列](http://rusanu.com/2010/03/26/using-tables-as-queues/)。与其显式锁定任务，不如将任务添加到处理队列中，让队列处理程序将任务出列并执行工作。额外的解耦也将有助于可扩展性和吞吐量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T18:29:11.800

如果您拥有的唯一共享资源是数据库，那么使用事务锁作为解决方案的一部分可能是您的最佳选择。如果我在另一个答案中理解@Remus Rusanu 链接的文章，它还需要在事务中进行出队。

这在一定程度上取决于您计划打开这些锁多长时间。如果你是...

1.  强制序列化以对相关锁 ID 进行简短操作
2.  无论如何已经打开事务以完成该操作

...那么您的选项 2 可能是最简单和最可靠的。几年来，我在生产系统中都有类似的解决方案，没有任何问题。如果您将互斥锁的创建与事务的创建捆绑在一起并将其全部包装在“使用”块中，则会变得更加容易。

```
using (var transaction = MyTransactionUtil.CreateTransaction(mutexName))
{
    // do stuff
    transaction.Commit();
} 
```

在您的 CreateTransaction 实用程序方法中，您在创建事务后立即调用 sp_getapplock。然后整个事情（包括互斥锁）一起提交或回滚。

# java - 使用 twitter4j 获取状态时抛出异常？

> ID：11936317
> 
> 赞同：0
> 
> 时间：2012-08-13T14:24:39.047
> 
> 标签：java, twitter4j

我试图在这里关注文档：[https](https://github.com/yusuke/twitter4j/blob/master/twitter4j-examples/src/main/java/twitter4j/examples/tweets/ShowStatus.java) ://github.com/yusuke/twitter4j/blob/master/twitter4j-examples/src/main/java/twitter4j/examples/tweets/ShowStatus.java但似乎出了问题某处。但是，我正在尝试做一些与文档略有不同的事情。我没有使用 args，而是使用硬编码的用户名。这是令人不安的代码。

```
import twitter4j.Twitter;
import twitter4j.Status;
import twitter4j.TwitterException;
import twitter4j.TwitterFactory;

public class ChrisTwitter {
    public Status status;
    public ChrisTwitter (){
        Twitter twitter = new TwitterFactory().getInstance();
        try {
            Status status = twitter.showStatus(Long.parseLong("rye761"));
            System.out.println("@" + status.getUser().getScreenName() + " - " + status.getText());
        }
        catch (TwitterException e) {
            e.printStackTrace();
        }
    }
} 
```

有任何想法吗？哦，这是我在控制台中得到的：（新堆栈跟踪）

```
Exception in thread "AWT-EventQueue-0" java.lang.Error: Unresolved compilation problems: 
    TwitterFactory.getInstance cannot be resolved to a type
    The method Page(int, int) is undefined for the type ChrisTwitter

    at com.github.ryebread761.lockergnome.ChrisTwitter.<init>(ChrisTwitter.java:16)
    at com.github.ryebread761.lockergnome.Base$CTListener.actionPerformed(Base.java:121)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2028)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2351)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:387)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:242)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:236)
    at java.awt.Component.processMouseEvent(Component.java:6375)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3267)
    at java.awt.Component.processEvent(Component.java:6140)
    at java.awt.Container.processEvent(Container.java:2083)
    at java.awt.Component.dispatchEventImpl(Component.java:4737)
    at java.awt.Container.dispatchEventImpl(Container.java:2141)
    at java.awt.Component.dispatchEvent(Component.java:4565)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4619)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4280)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4210)
    at java.awt.Container.dispatchEventImpl(Container.java:2127)
    at java.awt.Window.dispatchEventImpl(Window.java:2482)
    at java.awt.Component.dispatchEvent(Component.java:4565)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:684)
    at java.awt.EventQueue.access$000(EventQueue.java:85)
    at java.awt.EventQueue$1.run(EventQueue.java:643)
    at java.awt.EventQueue$1.run(EventQueue.java:641)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:98)
    at java.awt.EventQueue$2.run(EventQueue.java:657)
    at java.awt.EventQueue$2.run(EventQueue.java:655)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:654)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:296)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:211)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:201)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:196)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:188)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:122) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:29:43.160

您正在尝试将字母数字字符串解析为 long，这会引发 NumberFormatException：

```
Status status = twitter.showStatus(Long.parseLong("rye761")); 
```

由于您没有在 try-catch 块中捕获 NumberFormatException 异常传播。为了防止这种情况发生，您应该在这样做之前验证您尝试解析的输入，或者为该 NumberFormatException 添加一个额外的捕获。

**编辑**

要获取用户的最新推文，您可以采用以下方法：

首先定义你的请求的分页。在这种情况下，只需要求一页和每页一条推文（如果我没记错的话，它将是最新的）。然后您直接发出请求，因为您正在咨询推文并且您没有做任何其他您不需要验证 AFAIK 的事情。

```
Twitter latestTweetChecker = new TwitterFactory.getInstance();
Paging page = Page(1,1);
List<Status> statusList = latestTweetChecker.getUserTimeline("rye761",page); 
```

在那里，您将获得所需的状态。[只需通过相应的方法](http://twitter4j.org/en/javadoc/twitter4j/Status.html)获取您需要的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T14:29:33.510

[Long.parseLong](http://docs.oracle.com/javase/6/docs/api/java/lang/Long.html#parseLong%28java.lang.String%29) ("rye761")

尽管 parseLong 的输入格式为 String，但 String 中的字符必须全部为十进制数字，而`rye761`. 所以，你得到了例外

> 字符串中的字符必须都是十进制数字，除了第一个字符可以是 ASCII 减号“-”（\u002D'）来表示负值。

# javascript - jQuery 的 slideUp、slideDown、动画功能的任何替代品？

> ID：11936318
> 
> 赞同：2
> 
> 时间：2012-08-13T14:24:41.617
> 
> 标签：javascript, jquery, google-dfp

我正在创建一个页脚广告格式以在 Google DFP 中运行，但 jQuery 无法在其中运行（长话短说）。因此，我试图找到一些替代方法来完成相同的任务——即 slideUp、slideDown 和 animate 函数。有谁知道一些替代品？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-03-08T19:05:11.480

[dom-slider](https://github.com/BrentonCozby/dom-slider)是 jQuery 的 slideDown、slideUp 和 slideToggle 方法的 vanilla-js 实现，适用于***高度未知***的元素。像 jQuery 一样使用它：

```
element.slideUp()
element.slideDown(800)
element.slideToggle(800, 'easeOut') // CSS transition timing function
element.slideUp(300).slideDown(500) 
```

但是，它的方法不接受回调——相反，您提供带有返回承诺的回调：

```
element.slideUp().then(function() {
  console.log('sliding done!');
}) 
```

There are a few other improvements as well. Check out the [README](https://github.com/BrentonCozby/dom-slider) for the details.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T14:33:48.343

检查适用于 javascript 的此链接：

[http://www.switchonthecode.com/tutorials/javascript-sliding-panels-using-generic-animation](http://www.switchonthecode.com/tutorials/javascript-sliding-panels-using-generic-animation)

例子：

HTML：

```
<div style="position:relative;
           width:150px;
           height:170px;
           top:0px;
           left:0px;">
  <div id="exampleHeader1" 
      style="position:absolute;
             width:150px;
             height:20px;
             top:0px;
             left:0px;
             background:#3b587a;
             text-align:center;
             color:#FFFFFF;"
      onclick="slideExample1('examplePanel1', this);">
    ^^^
  </div>
  <div id="examplePanel1" 
      style="position:absolute;
             width:150px;
             height:130px;
             top:20px;
             left:0px;
             background:#a6bbcd;
             overflow:hidden;">
    Content
  </div>
</div> 
```

Javascript：

```
function slideExample1(elementId, headerElement)
{
   var element = document.getElementById(elementId);
   if(element.up == null || element.down)
   {
      animate(elementId, 0, 20, 150, 0, 250, null);
      element.up = true;
      element.down = false;
      headerElement.innerHTML = 'vvv';
   }
   else
   {
      animate(elementId, 0, 20, 150, 130, 250, null);
      element.down = true;
      element.up = false;
      headerElement.innerHTML = '^^^';
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T14:27:19.920

两种选择：

1.  Scriptaculous 已经有这样的事情要做，并且没有在我有冲突的页面上崩溃。

2.  穆工具。

你可以在一些[Scriptaculous 演示](http://madrobby.github.com/scriptaculous/demos/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T14:29:59.563

为什么不使用 Css 动画？
我知道，它会在旧浏览器（< IE10）中直接跳到最后，
但总比没有好，而且非常轻量级。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T14:34:13.437

你到底想达到什么目的？我也许可以帮助您解决 slideUP 和 downs/ 或者，您可以使用 jquery.animate() 重新定位和更改高度等，但 slideUp 和 slideDown 确实工作得很好！

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2014-04-09T05:54:30.960

只需将整个 jQuery 源文件粘贴到您可以编辑的脚本中。之后我可能会添加 100 或 200 个换行符，以从我的代码中添加一些视觉分离。

# javascript - 如何让一个用户定义何时为其他用户显示按钮

> ID：11936325
> 
> 赞同：0
> 
> 时间：2012-08-13T14:25:00.920
> 
> 标签：javascript, apache2

我有一个人们在网络直播时使用的自定义投票应用程序。投票管理员希望能够确定他们何时进入下一个问题。我可以推送新的投票页面，也可以显示一个显示“下一个问题”的按钮。

这可能是一个长期轮询的事情吗？还是只是一个简短的投票？这些用户中的大多数都在大公司中并使用 IE 7 或 8。我正在考虑：

管理员单击将键放入 memcached "permit_next:{$question_id}" 的按钮

不过，我担心会有 30-100 次长时间的民意调查。服务器通常可以很好地处理 10-20 个并发请求，但我不想锁定 100 个等待的 Apache 进程。

以前有人解决过这个问题，或者在你记得的页面上看到一个例子，我可以调查一下吗？

TIA，汉斯

# java - Netty Guice 集成

> ID：11936326
> 
> 赞同：1
> 
> 时间：2012-08-13T14:25:09.830
> 
> 标签：java, guice, netty

我知道，Netty 前段时间有一个 Guice 集成（参见[https://issues.jboss.org/browse/NETTY-69](https://issues.jboss.org/browse/NETTY-69)），不知何故，这个 Guice 集成在 3.5.3 中丢失了。删除集成的原因是什么？

有没有人用 Netty 进行过手动 Guice 集成，并且可以指出一些问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T20:46:13.357

好的，我找到了一个示例：[https ://gist.github.com/1653087](https://gist.github.com/1653087)

基本上，应用程序的入口点从 com.google.common.util.concurrent.AbstractIdleService 扩展而来，并且 Pipeline 是使用 Providers 构建的。所有其他事情都是非常简单的“标准Guice”事情。

# java - 为什么我在 Java 中收到此代码的 IllegalFormatConversionException？

> ID：11936327
> 
> 赞同：8
> 
> 时间：2012-08-13T14:25:14.013
> 
> 标签：java, string, format, jtextarea

我目前正在研究从网络获取数据并将其打印在 JTextArea 上的代码。在这两者之间，我试图根据小数位对齐数字。这是在实现十进制对齐之前工作的代码：

```
private static final String NewLine = System.getProperty("line.separator");
String NetString = "";
byte[] data = p.getData();
NewString += "SID:     " + BuildShort(data,4) + NewLine;
NewString += "DID:     " + BuildShort(data,6) + NewLine; 
```

这是新的

```
NewString += String.format("%-8s%11.5f" + NewLine, "SID    : ", BuildShort(data,4));
NewString += String.format("%-8s%11.5f" + NewLine, "DID    : ", BuildShort(data,6)); 
```

我收到了错误消息

```
Exception in thread "Thread-2" java.util.IllegalFormatConversionException: f != java.lang.Integer
at java.util.Formatter$FormatSpecifier.failConversion(Unknown Source)
at java.util.Formatter$FormatSpecifier.printFloat(Unknown Source)
at java.util.Formatter$FormatSpecifier.print(Unknown Source)
at java.util.Formatter.format(Unknown Source)
at java.util.Formatter.format(Unknown Source)
at java.lang.String.format(Unknown Source)
at MT302.ParsePacket(MT302.java:97)
at MK20_DataView.run(MK20_DataView.java:261)
at java.lang.Thread.run(Unknown Source) 
```

你知道我为什么会收到这个错误吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-13T14:41:33.033

您收到错误是因为您的`BuildShort`方法返回一个整数，并且您正在给它一个浮点格式模式。只要在它前面贴一个`double`石膏，应该没问题：

```
NewString += String.format("%-8s%11.5f" + NewLine, "SID    : ", (double)BuildShort(data,4)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-18T10:37:51.160

您正在格式化浮点而不是整数。插入 %d 而不是 %f ，它应该可以工作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-24T20:01:51.580

Oracle 编写的这些格式转换错误的错误消息非常糟糕，我一生都无法弄清楚为什么他们会以这种方式编写它。如上所述，这意味着您试图使用浮点格式标记来格式化整数。

# oracle - RAISE_APPLICATION_ERROR 不返回消息

> ID：11936334
> 
> 赞同：0
> 
> 时间：2012-08-13T14:25:52.667
> 
> 标签：oracle, plsql, oracleforms, raise

```
IF l_value = 'FALSE' THEN
  RAISE_APPLICATION_ERROR(-20299, 'some error message');
END IF; 
```

这是表触发器的一部分。它应该返回一个错误号和消息，但是当警报弹出时它只返回消息号。没有“一些错误信息”。怎么了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T04:54:10.370

表单上的某些触发代码已引发表单中的警报。看看你的`ON-ERROR`触发器——它有什么代码？

您可能需要对其进行扩充以显示`DBMS_ERROR_TEXT`在警报中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T18:47:48.563

也许这个名字`RAISE_APPLICATION_ERROR`对你有误导。它不会在您的 GUI 上弹出一些东西。您根据所使用的客户端自行编程。您可以使用它`RAISE_APPLICATION_ERROR`来创建您自己的 SQL 错误并根据这些错误采取行动。

例子

```
-- a example table
create table mytest (col_a number, col_b char(20));

-- a example trigger
CREATE OR REPLACE TRIGGER mytest_before
BEFORE UPDATE
    ON mytest
    FOR EACH ROW
DECLARE
BEGIN
    if :new.col_a < 0 then
      RAISE_APPLICATION_ERROR(-20299, 'negative value not allowed for column A');
    end if;
END;

insert into mytest values (1,'hallo');

set serveroutput on
DECLARE
  negative_value EXCEPTION; -- declare exception
  PRAGMA EXCEPTION_INIT (negative_value, -20299); -- assign error code to exception
BEGIN
  update mytest set col_a = -1 where col_b = 'hallo';
EXCEPTION
  WHEN negative_value THEN -- handle exception
    -- do whatever you need to do to bring the error to the user
    DBMS_OUTPUT.PUT_LINE(TO_CHAR(SQLERRM(-20299)));
END;
/ 
```

以上将为您带来 SQL*Plus 或那种 SQL Developer 中的输出。

```
table MYTEST created.
TRIGGER mytest_before compiled
1 rows inserted.
anonymous block completed
ORA-20299: negative value not allowed for column A
ORA-06512: at "DEMO.MYTEST_BEFORE", line 4
ORA-04088: error during execution of trigger 'DEMO.MYTEST_BEFORE 
```

除了 DBMS_OUTPUT.PUT_LINE，您可以做任何您需要做的事情来向用户展示您希望他展示的任何内容。

# r - 替换字符串中的特定字符

> ID：11936339
> 
> 赞同：313
> 
> 时间：2012-08-13T14:26:09.313
> 
> 标签：r, regex, replace, gsub, string-substitution

我想从向量中的字符串中删除特定字符，类似于 Excel 中的*查找和替换*功能。

这是我开始的数据：

```
group <- data.frame(c("12357e", "12575e", "197e18", "e18947") 
```

我从第一列开始；我想通过删除`e`'s来生成第二列：

```
group       group.no.e
12357e      12357
12575e      12575
197e18      19718
e18947      18947 
```

* * *

## 回答 #1

> 赞同：463
> 
> 时间：2012-08-13T14:29:47.347

使用正则表达式和函数`gsub()`：

```
group <- c("12357e", "12575e", "197e18", "e18947")
group
[1] "12357e" "12575e" "197e18" "e18947"

gsub("e", "", group)
[1] "12357" "12575" "19718" "18947" 
```

这里的作用是用空字符串`gsub`替换每次出现的。`"e"``""`

* * *

请参阅`?regexp`或`gsub`获取更多帮助。

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2012-08-13T14:30:27.980

正则表达式是你的朋友：

```
R> ## also adds missing ')' and sets column name
R> group<-data.frame(group=c("12357e", "12575e", "197e18", "e18947"))  )
R> group
   group
1 12357e
2 12575e
3 197e18
4 e18947 
```

现在使用`gsub()`最简单的替换模式：空字符串：

```
R> group$groupNoE <- gsub("e", "", group$group)
R> group
   group groupNoE
1 12357e    12357
2 12575e    12575
3 197e18    19718
4 e18947    18947
R> 
```

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2015-08-04T14:11:31.363

总结2种替换字符串的方法：

```
group<-data.frame(group=c("12357e", "12575e", "197e18", "e18947")) 
```

1) 使用`gsub`

```
group$group.no.e <- gsub("e", "", group$group) 
```

2）使用`stringr`包

```
group$group.no.e <- str_replace_all(group$group, "e", "") 
```

两者都会产生期望的输出：

```
 group group.no.e
1 12357e      12357
2 12575e      12575
3 197e18      19718
4 e18947      18947 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2017-02-09T13:13:26.977

如果要替换其中的某些字符，则无需从字符串向量创建数据框。正则表达式是它的好选择，因为@Andrie 和@Dirk Eddelbuettel 已经提到过它。

注意，如果你想替换特殊字符，比如点，你应该使用完整的正则表达式语法，如下例所示：

```
ctr_names <- c("Czech.Republic","New.Zealand","Great.Britain")
gsub("[.]", " ", ctr_names) 
```

这将产生

```
[1] "Czech Republic" "New Zealand"    "Great Britain" 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-11-22T07:48:27.650

使用[stringi](http://rpackages.ianhowson.com/rforge/stringi/)包：

```
require(stringi)

group<-data.frame(c("12357e", "12575e", "197e18", "e18947"))
stri_replace_all(group[,1], "", fixed="e")
[1] "12357" "12575" "19718" "18947" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-04-05T22:33:28.723

```
> library(stringi)                
> group <- c('12357e', '12575e', '12575e', ' 197e18',  'e18947')              
> pattern <- "e"  
> replacement <-  ""  
> group <- str_replace(group, pattern, replacement)      
> group 
[1] "12357"  "12575"  "12575"  " 19718" "18947" 
```

# android - 每次点击时在单独的浏览器中打开 webview？

> ID：11936340
> 
> 赞同：0
> 
> 时间：2012-08-13T14:26:10.823
> 
> 标签：android, android-webview

我正在准备基于 Web 视图的示例应用程序。在我的启动画面中必须加载 url，如果我点击启动画面，它将打开另一个站点。它工作正常。但是当我点击启动画面时，我想打开单独的浏览器。为此，我使用了以下代码，

```
 this.webView.setWebViewClient(new WebViewClient(){

            @Override
            public boolean shouldOverrideUrlLoading(WebView view, String url){
              view.loadUrl(url);
              return true;
            }
        }); 
```

但它正在打开相同的浏览器。请指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:34:02.743

`view.loadUrl(url)`将在同一个 WebView 中打开 url。您必须定义何时在同一个 WebView 或另一个单独的 WebView 或浏览器中加载的规则。加载单独的 webview 调用`anotherWebView.loadUrl(url)`。或浏览器调用`Intent.ACTION_VIEW`。

解决方法可能是这样的 -

```
if(need to load same webView)
{
    view.loadUrl(url);
}
else if(need to load same webView)
{
    anotherWebView.loadUrl(url);
}
else
{
    Intent i = new Intent(Intent.ACTION_VIEW);
    i.setData(Uri.parse(url));
    startActivity(i);
} 
```

# memcached - Enyim.Caching.Memcached - 无法从 Socket 读取

> ID：11936343
> 
> 赞同：0
> 
> 时间：2012-08-13T14:26:19.980
> 
> 标签：memcached, membase, enyim

我目前正在构建一个用于部署 web.application 的环境。

Web.Application 使用 Enyim.Caching。插座似乎有问题

我对 membase 服务器不熟悉，如果我可以在这篇文章中包含任何其他信息，请询问...

任何关于我可以检查的建议将不胜感激：

```
 Enyim.Caching.Memcached.MemcachedNode.InternalPoolImpl - Pool has been inited for 127.0.0.1:11212 with 10 sockets`
 Enyim.Caching.Memcached.MemcachedNode.InternalPoolImpl - Acquiring stream from pool. 127.0.0.1:11212`
 Enyim.Caching.Memcached.PooledSocket - Socket 86101442-5fc2-4169-bba2-9f25f1647254 was reset
 Enyim.Caching.Memcached.MemcachedNode.InternalPoolImpl - Socket was reset. 86101442-5fc2-4169-bba2-f25f1647254
 Enyim.Caching.Memcached.MemcachedNode - System.IO.IOException: Failed to read from the socket '127.0.0.1:11212'. Error: ?
     at Enyim.Caching.Memcached.PooledSocket.BasicNetworkStream.Read(Byte[] buffer, Int32 offset, Int32 count) in d:\d\repo\EnyimMemcached\Enyim.Caching\Memcached\BasicNetworkStream.cs:line 92
     at System.IO.BufferedStream.ReadByte()
     at Enyim.Caching.Memcached.PooledSocket.ReadByte() in 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:07:37.233

Enyim 默认使用端口**11211**。看起来您正在尝试**11212**，请尝试更改为 11211。

# dynamics-ax-2009 - Dynamics AX 2009：如何对未绑定的表单控件的内容进行排序？

> ID：11936344
> 
> 赞同：1
> 
> 时间：2012-08-13T14:26:19.777
> 
> 标签：dynamics-ax-2009, axapta

我在表单上使用**Listbox**控件，并以编程方式向其中添加**项目**。我认为如果我在**Listbox上调用***sort(SortOrder::Ascending)*方法，它就会这样做——但是，我错了。

 **最终，我无法实现这些结果。我不必使用**Listbox**，但我需要两个功能：

1.  以编程方式能够将字符串添加到控件
2.  能够在*单击*或*选择项目时运行代码*
3.  该列表应该能够按字母顺序排序

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T16:13:39.060

我也无法让列表框排序。最简单的可能是使用“ListView”控件而不是列表框。您可以在 (AOT>Forms\tutorial_Form_ListControl) 中查看如何使用 AND 排序。您的要求 #1 和 #2 几乎适用于您所做的任何事情。问题是我认为的排序。

另一种选择是保留一个控制排序的局部变量。我会使用一个[集合类](http://msdn.microsoft.com/en-us/library/aa608508.aspx)，一个数组或映射，这样您就可以通过键值控制排序，然后您可以在用户添加/删除某些内容时重新加载列表框。由于它是客户端并且听起来列表框不会有 1000 多个控件，因此重新加载它可能不会对性能造成重大影响。如果控制得当，还可以使用 listbox.insert([value], [index]) 插入正确的位置。

另一种选择，从 AOT 劫持任何简单表（TmpABC 是一个很好的表），插入值，然后使用简单查询进行排序，甚至更好，将 TmpABC 设置为 ListView 控件的数据源，然后通过数据源排序进行排序。**

# .net - 如何通过 Tor 进行 httpwebrequest

> ID：11936346
> 
> 赞同：6
> 
> 时间：2012-08-13T14:26:26.893
> 
> 标签：.net, proxy, httpwebrequest, tor

我试图通过 tor 代理发出请求

```
myRequest.Proxy = New WebProxy("127.0.0.1", 8118) 
```

但这给了我一个错误 `Unable to connect to the remote server`

内部的例外是`No connection could be made because the target machine actively refused it 127.0.0.1:8118`

我的阅读表明这可能是防火墙问题，所以我完全关闭了 Windows FW，我还暂时禁用了我的 AVG AV。我没有任何其他我知道的保护措施

为了更好的衡量，我还尝试了 9050 和 9051 作为端口号，但这并没有帮助

Tor 浏览器正在运行，所以我想我的代码也应该可以运行。如何设置代理以使用 Tor。

顺便说一句，“8118”内存不足，我找不到任何关于我应该使用哪个端口作为代理的文档

也许我的tor被设置为其他东西？

太感谢了！

**编辑**

关于隐私：

在过去（大约一年前或更长时间）我只是下载了 Tor，然后添加了 8118 作为代理，一切正常。现在没有了。也许有些改变？

所以我现在按照CodeCaster的建议下载了privoxy，现在当tor和privoxy都在运行时，请求可以工作，但是，恐怕它没有使用tor代理，因为响应回来了，好像我被服务器识别了

你知道为什么过去我不必下载 privoxy，而现在必须下载并启用它吗？

谢谢你

**编辑#2：** *测试*

我现在做了一个简单的测试功能，如下所示：

```
 Function ExternalIP(Optional Proxy As Integer? = Nothing) As String
        Dim webClient = New WebClient
        webClient.Headers.Add("Cache-Control", "max-age=0")
        If Proxy.HasValue Then webClient.Proxy = New WebProxy("127.0.0.1", Proxy.Value)
        Dim ip = webClient.DownloadString("http://myip.ozymo.com/")
        webClient.Dispose()
        Return ip
    End Function 
```

在不通过代理的情况下使用时，我会取回我的常规真实 IP。到目前为止，一切都很好

当我使用 8118 作为代理时，它取决于：

如果 privoxy 正在运行，那么我会取回我的常规 IP（而不是出现在 Tor 浏览器中的欺骗 IP）。这让整个事情变得毫无意义

如果它没有运行，那么我会收到上述错误`No connection could be made because the target machine actively refused it 127.0.0.1:8118`

回顾一下，过去我使用 Tor 本身（加上 Vidalia）没有 Privoxy 或类似的东西，它工作得很好。

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T10:26:57.427

@junior-mayhe 的回答在这里为我做了

[使用 Tor 作为代理](https://stackoverflow.com/questions/1962483/c-sharp-using-tor-as-proxy#comment10383284_2124446)

以防万一其他人将来偶然发现这个问题......

Junior-mayhe：如果你看到这个，请你在这里回答一下，这样我就可以提高我的代表了？谢谢 ：-）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T14:37:27.113

使用下面的代码获取您的默认代理并为其分配 myRequest 对象。

```
 WebProxy proxy = (WebProxy) WebProxy.GetDefaultProxy();

    // See what proxy is used for resource.
    Uri resourceProxy = proxy.GetProxy(resource);

    // Test to see whether a proxy was selected.
    if (resourceProxy == resource)
    {
        Console.WriteLine("No proxy for {0}", resource);
    } 
    else
    {
        Console.WriteLine("Proxy for {0} is {1}", resource.ToString(),
            resourceProxy.ToString());
    } 
```

来源：http: [//msdn.microsoft.com/en-us/library/system.net.webproxy.getdefaultproxy.aspx](http://msdn.microsoft.com/en-us/library/system.net.webproxy.getdefaultproxy.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-15T18:59:14.650

我会建议一个适合我的选项：您可以使用[Tor.NET](https://www.codeproject.com/Articles/1072864/Tor-NET-A-managed-Tor-network-library)库

# actionscript-3 - 对缩放的显示对象应用平滑

> ID：11936347
> 
> 赞同：2
> 
> 时间：2012-08-13T14:26:28.207
> 
> 标签：actionscript-3, flash

我有一个正在缩小的显示对象（不是图像）。它具有与图像缩放时相同的锯齿和锯齿边缘。有没有办法像平滑图像一样平滑显示对象？

**更新**
这是一个带有交互式子显示对象的交互式显示对象（精灵）。我无法将其绘制为位图。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T17:12:36.570

您可以尝试通过向其添加 Matrix3D 变换来强制显示对象进入“3d”模式。最简单的方法是简单地给它一个 rotationX 值：

```
myDisplayObject.rotationX = 0.0; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T02:22:33.760

您还可以尝试检查形状上的“提示”框（有时这会使圆形和椭圆形变得有点奇怪，所以这是一场赌博），您可以尝试从渲染下拉列表中选择“缓存为位图”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T17:32:26.053

使用 Pixel Blender 对精灵进行双三次重采样？

[http://blog.onthewings.net/2009/08/25/bicubic-resampling-by-pixel-bender/](http://blog.onthewings.net/2009/08/25/bicubic-resampling-by-pixel-bender/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T14:32:31.980

您可以尝试将位图对象的平滑属性设置为 true，然后对其进行缩放：

[看这里](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Bitmap.html#smoothing)

你的Display对象必须包含一个Bitmap，或者是Bitmap本身...

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-13T14:35:52.880

你试过设置`stage.quality = stageQuality.High;`吗？此外，如果您这样做并且想要手动设置平滑，您可以尝试[Lanczos 重新采样功能](http://wonderfl.net/c/dLf0)（我没有做到）。

警告：你不想在每一帧都使用这个函数，因为它的性能很重！

首先，您需要使用 BitmapData 将 displayObject 绘制到位图：

```
var bmd:BitmapData = new BitmapData(dispObject.width, dispObject.height, true, 0);
//Create new bitmapData with the same size as your object and with transparancy.
bmd.draw(dispObject);
//Draw you displayObject onto the empty Bitmap
var b:Bitmap = new Bitmap(bmd, true);
//Create the bitmap container and load the data, and the true turns smoothing on!
addChild(b);
//Add it to the stage and now you can use the scale and width variables like this
b.x = dispObject.x;
b.y = dispObject.y;
b.scaleX = dispObject.scaleX;
b.scaleY = dispObject.scaleY; 
```

# cocos2d-iphone - cocos2d : 如何克隆 CCNode 层次结构

> ID：11936348
> 
> 赞同：3
> 
> 时间：2012-08-13T14:26:29.317
> 
> 标签：cocos2d-iphone, clone, hierarchy, ccnode

我尝试克隆 CCNode 层次结构，问题是我需要按类型重置和设置所有变量，我有办法更自动地做到这一点吗？

基本上我想要做的是： - 存储一个 CCNode*（有一些孩子，例如在 Pos 10-10 的图像，以及在 Pos 100-50 的带有文本“测试”的标签）；- 然后克隆它，以获得具有相同默认值和子节点的新 CCNode*。

我需要复制它，因为在它们被修改之后，就像一个节点的模板，在获得自定义值之前。

如果您知道一种简单的复制方法，并设置所有层次结构（也具有正确的类型），并且每种类型都没有大的 if/else 语句，那将对我有很大帮助^^

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T11:51:56.740

此代码递归地克隆 CCNode 和所有子 CCNode。您可以添加其他子类和其他属性进行复制。

```
+ (CCNode*) cloneCCNode:(CCNode*)source
{
    CCNode* clone = [CCNode node];
    for (CCNode* srcSubnode in source.children) {

        CCNode* subnode;

        if ([srcSubnode isKindOfClass:[CCSprite class]]) { //only CCSprites are copied, add other subclasses if you need to
            CCSprite* srcSprite = (CCSprite*)srcSubnode;
            subnode = [CCSprite spriteWithTexture:srcSprite.texture];
            ((CCSprite*)subnode).displayFrame = srcSprite.displayFrame;
        } else {
            subnode = [self cloneCCNode:srcSubnode];
        }

        subnode.rotation = srcSubnode.rotation;
        subnode.position = srcSubnode.position;
        subnode.anchorPoint = srcSubnode.anchorPoint;
        subnode.zOrder = srcSubnode.zOrder;
        [clone addChild:subnode];
    }
    return clone;
} 
```

# python - 用 `try except` 尝试两个表达式

> ID：11936350
> 
> 赞同：7
> 
> 时间：2012-08-13T14:26:38.397
> 
> 标签：python, sqlalchemy, try-except

我有两种表达方式。我需要尝试一个表达式，如果它引发异常，请尝试另一个，但如果第二个也引发异常 - 引发异常。

我试过这个，但它看起来很难看，我不确定这是解决这个问题的最佳方法：

```
try:                                                           
    image = self.images.order_by(func.random()).limit(1)       
except:                                                        
    try:                                                       
        image = self.images.order_by(func.rand()).limit(1)     
    except ProgrammingError:                                   
        raise ProgrammingError(                                
            'The database engine must be PostgtreSQL or MySQL') 
```

你怎么做呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T14:32:17.183

使用循环：

```
for methname in ("random", "rand"):
    try:
        image = self.images.order_by(getattr(func, methname)()).limit(1)
        break
    except ProgrammingError:
        continue
else:
    raise ProgrammingError("The database engine must be PostgtreSQL or MySQL") 
```

`else`只有当循环正常终止（即没有 a ）时才会执行循环的子句，`break`这就是我们`break`在进行`image`赋值之后的原因。如果您认为这太棘手了，因为该`else`子句很少与 一起使用`for`，那么这也可以：

```
image = None
for methname in ("random", "rand"):
    try:
        image = self.images.order_by(getattr(func, methname)()).limit(1)
    except ProgrammingError:
        continue
if not image:
    raise ProgrammingError("The database engine must be PostgtreSQL or MySQL") 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-13T14:42:00.027

制作一个单独的函数非常有帮助。

```
def get_random_image(self):
    for rand in func.random, func.rand:
        try:                                                           
            return self.images.order_by(rand()).limit(1)
        except ProgrammingError:                                                        
            pass
    raise ProgrammingError('This database engine is not supported') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-13T14:35:39.623

在这种特殊情况下，我实际上会在选择函数之前尝试检测数据库。你能从你的代码中访问数据库连接吗？如果是这样，只需打开驱动程序名称：

```
random = None
if drivername == 'postgres':
    random = func.random
elif drivername == 'mysql':
    random = func.rand
else:
    raise ValueError('This module requires that you use PostgreSQL or MySQL') 
```

然后，在选择图像时，使用以下`random`值：

```
image = self.images.order_by(random()).limit(1) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T14:33:02.807

实际上它可能是一个设计缺陷。引发异常是对通常不应该发生的事件采取行动。如果你想在一个异常中做一些功能性的事情（除了处理异常），看起来你想尝试的第一个语句根本不是应该得到异常的语句。

所以而不是：

```
try:
    do statement 1
except ...
    try:
        do statement 2
    except: 
```

想一想 ：

```
if (statement_1 result == ...)
    try:
         do statement 2
    except: 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T14:40:44.753

如果你想检查 rand 或 random 是否是一个类的函数，你也可以使用

```
if 'rand' in dir(some object of a class) 
```

# wpf - 更改绑定属性时如何执行控件的方法？

> ID：11936351
> 
> 赞同：0
> 
> 时间：2012-08-13T14:26:39.577
> 
> 标签：wpf, mvvm, datagrid, scroll

我有一个数据网格，并且正在绑定 selectedItem 属性。我也知道 DataGrid 控件有一个方法 ScrollIntoView 将 dataGrid 滚动到所选项目。

所以我想知道当我更改viewModel中的selectedItem时是否存在执行dataGrid的方法ScrollIntoView的方法。

我的 Datagrid 设置为多项选择，如果这很重要，我想使用 MVVM 模式。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:31:55.973

在后面的代码中定义一个[依赖属性](http://msdn.microsoft.com/en-us/library/ms752914.aspx)并将网格中的选择绑定到它。然后，您可以在值更改时添加回调。你可能想要这样的东西：

```
 public static readonly DependencyProperty SelectedItemsProperty =
        DependencyProperty.Register(
            "SelectedItems",
            typeof(object[]),
            typeof(Control),
            new PropertyMetadata(null, SelectedItemsChanged)); 
```

定义回调函数并添加任何适当的逻辑。

# php - PHP mysql_query 语法错误

> ID：11936354
> 
> 赞同：0
> 
> 时间：2012-08-13T14:27:03.107
> 
> 标签：php, android, mysql, post

```
<?php
mysql_connect("localhost","root","");
mysql_select_db("hftwmvirtualdb");
$Booknum = mysql_real_escape_string($_POST['Booknum']); 
$Chapternum = mysql_real_escape_string($_POST['Chapternum']); 
$Versenum = mysql_real_escape_string($_POST['Versenum']); 
$sql = mysql_query("SELECT `VERSETEXT` FROM `booktable` WHERE `BOOKID` = $Booknum AND `CHAPTERID` = $Chapternum AND `VERSENO` = $Versenum");
echo mysql_error();
while($row=mysql_fetch_assoc($sql));
print(json_encode($row));
mysql_close();
?> 
```

我正在尝试使用来自 android 应用程序的发布数据来触发查询并从 mysql 数据库中检索结果。该表有 4 列，我试图通过定义前 3 列中的值来检索第三列中的值。每次单击该按钮时，我都会收到解析错误，以发现我的 PHP 脚本没有处理 SQL 查询。通过浏览器运行脚本时，我收到以下消息：

*   未定义索引：第 4 行 C:\wamp\www\GetVerse.php 中的 Booknum
*   未定义索引：第 5 行 C:\wamp\www\GetVerse.php 中的 Chapternum
*   注意：未定义索引：第 6 行 C:\wamp\www\GetVerse.php 中的 Versenum
*   您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“AND `CHAPTERID`= AND `VERSENO`=”附近使用正确的语法
*   警告：mysql_fetch_assoc() 期望参数 1 是资源，布尔值在第 9 行的 C:\wamp\www\GetVerse.php 中给出。

我知道我收到警告消息 1-3 是因为我没有提交帖子数据，但后者我不知道如何修复，因为我尝试使用正确的语法，我尝试删除“喜欢”的“=”和那也失败了。问题是什么？。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T14:30:18.173

正如您所指定的，这些`undefined index`错误是因为您没有提交发布数据而发生的。这反过来又导致变量`$Booknum`、`$Chapternum`和`$Versenum`为空。

使用空变量，正在生成 MySQL 查询，其中包含`WHERE`如下子句：

```
WHERE `BOOKID` =  AND `CHAPTERID` =  AND ... 
```

缺失值导致 MySQL 无效，因此您的错误。此外，正如您（在评论中）指定的 POST 值是字符串（而不是我根据它们的用法和名称假设的整数），您必须在 MySQL 查询中将值括在引号中也。如果不将值括在引号中，即使是有效的字符串也可能导致查询失败。

要解决此问题，请尝试以下操作：

```
$Booknum = isset($_POST['Booknum']) ? mysql_real_escape_string(trim($_POST['Booknum'])) : null;
$Chapternum = isset($_POST['Chapternum']) ? mysql_real_escape_string(trim($_POST['Chapternum'])) : null;
$Versenum = isset($_POST['Versenum']) ? mysql_real_escape_string(trim($_POST['Versenum'])) : null;
if (!empty($Booknum) && !empty($Chapternum) && !empty($Versenum)) {
    $sql = mysql_query("SELECT `VERSETEXT` FROM `booktable` WHERE `BOOKID` = '" . $Booknum . "' AND `CHAPTERID` = '" . $Chapternum . "' AND `VERSENO` = '" . $Versenum . "'");
    echo mysql_error();
    while($row=mysql_fetch_assoc($sql));
    print(json_encode($row));
    mysql_close();
} 
```

这将验证这些值是否设置正确 - 如果没有，它们将设置为`null`. 如果所有三个值都不为空，则通过 PHP[`empty()`](http://php.net/empty)执行您的查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T14:30:02.773

您收到的“未定义索引”消息是因为未设置这些变量。检查您是否确实将它们发布到脚本中。

空变量是您的查询错误并且您收到错误的原因。

考虑使用[PDO](http://php.net/manual/en/book.pdo.php)，因为“mysql_”命令已被弃用。在将输入传递给查询之前，您应该检查输入。 [isset()](http://php.net/manual/en/function.isset.php)将为此工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T14:30:23.260

当变量被替换时，您的 SQL 查询将如下所示：

```
SELECT `VERSETEXT` FROM `booktable` WHERE `BOOKID` =  AND `CHAPTERID` =  AND `VERSENO` = 
```

当变量不包含内容时（如果您不提交数据，它们不会包含内容），则查询毫无意义：语法格式错误。

在进行查询之前检查数据是否已发布。此外，为了安全和方便，开始使用参数化查询（使用 MySQLi 或 PDO）也将使您受益。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-08-13T14:35:42.277

检查 Post 数据是否到来，**未定义索引**是因为，您使用的变量没有数据。所以首先验证它，然后执行 SQL 查询。

```
if(isset($_POST['Booknum']) && isset($_POST['Chapternum']) && isset($_POST['Versenum']))
 {
   $Booknum = mysql_real_escape_string($_POST['Booknum']); 
   $Chapternum = mysql_real_escape_string($_POST['Chapternum']); 
   $Versenum = mysql_real_escape_string($_POST['Versenum']); 
   $sql = mysql_query("SELECT `VERSETEXT` FROM `booktable` WHERE `BOOKID` = $Booknum AND    `CHAPTERID` = $Chapternum AND `VERSENO` = $Versenum");
   echo mysql_error();
   while($row=mysql_fetch_assoc($sql));
   print(json_encode($row));
  }
else
{
 echo "No post data";
 } 
```

# tcp-ip - 使用 GA 库的进程间通信

> ID：11936356
> 
> 赞同：1
> 
> 时间：2012-08-13T14:27:07.397
> 
> 标签：tcp-ip, rdma

(GA) 全局数组库（ARMCI 的实现）如何用于位于不同远程机器上的两个进程之间的通信。

这是否类似于 TCP 套接字编程，其中一个进程等待数据而另一个进程传输它？

我尝试查看**ga_put()**和**ga_get()**是用于进程间通信的两个操作的文档。到目前为止，我只能想出一个在使用共享内存架构的同一台机器上运行的程序（我使用**ga_put()**和**ga_get()**将数据放入全局数组并分别获取它）。

现在，我想使用这个程序在两个远程进程之间进行数据通信（基本上是单向通信）。显然，将我在单台机器上运行的程序放在远程端会奏效。它需要某种方式来告诉我们应该访问哪台机器并获取正确的数据。这里是我需要你帮助的地方。我怎样才能做到这一点？（它在 GA 上的 TCP/IP 监听、接受和连接等价物是什么？）

还是 GA 在下面也使用 TCP/IP 套接字的情况？

有人可以向我解释一下吗？两个远程进程通信的示例代码也是可观的。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T16:07:54.767

毕竟我是在回答我的问题。可能会帮助一些寻找相同问题的人。

GA 库被实现为与 MPI 一起使用。所以我们有类似的东西：

```
 MPI_Init(..)     
   GA_Initialize()
   MA_Init(..)
     //  ....  do sothing here 
   GA_Terminate()   
   MPI_Finalize() 
```

我的问题的答案是：MPI 具有以下能够支持客户端-服务器通信的原语：

```
 //in the server side
    MPI_Open_port()
    MPI_Comm_accept()
    //do  MPI_Send() or MPI_Recv()
    MPI_Close_port()

    //client Side
    MPI_Comm_connect()
    //do  MPI_Recv() or MPI_Send() 
```

根据硬件支持和使用的 MPI 实现，MPI 可能使用套接字或其他机制（例如 SAN（系统区域网络））。

通常，大多数 MPI 实现使用套接字进行基于 TCP 的通信。

所以，是的，GA 也在下面使用套接字（当然取决于使用的 MPI 实现）

干杯，

# javascript - javascript 不适用于分页

> ID：11936361
> 
> 赞同：0
> 
> 时间：2012-08-13T14:27:43.773
> 
> 标签：javascript

我正在使用 phtml 在 php 中对表格进行分页。问题是我有一个 javascript 来更改行的颜色。它仅适用于我的第一页，不适用于其他页面。

```
foreach($this->paginator as $record)
       {echo "<td width='61'> <a href='#' class='test'  data-id='" . $record['id']. "'>". $record['id'] . "</td>";
       echo "<td width='61'  >". $record['firstname'] . "</td>";
       echo "<td width='61'>" . $record['emailid'] . "</a></td>";
       echo "<td width='38'>" . $record['customdata'] . "</td>";
} 
```

Javascript是

```
function approve(id) {

   var id =id;  
   $.ajax({
       url: 'http://localhost/feedback/public/index/approve/',
       type: 'POST',                    
       data:"id="+id,
       success:function(data) {
                 alert('Approved successfully');
                     var index =parseFloat(id)+1;                                    
                    $('table tr:eq('+index+')').css("background-color", "54FF9F");//this           works only for first page
                    }
           })   
    } 
```

我在弹出窗口中的按钮的 onclick 中调用 javascript。谁能帮助我，它不适用于其他页面

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:33:35.677

您的`success`功能是为行着色；通过将内联样式添加到`tr`标签本身。因为当您转到表格的下一页时此函数（很可能）不会再次运行，所以新呈现的行不会被着色。

我建议改为向行添加一个类，并将 CSS 规则添加到样式表中。

```
$('table tr:eq('+index+')').addClass('alt-row'); 
```

CSS：

```
.alt-row td { background-color: #54FF9F; } 
```

此外，为了安全起见，我将背景颜色应用于单元格，而不是行，因为一些较旧的浏览器不支持表格行的背景。

# tridion - 安圭拉的 _isEnabled 和 isEnabled 有什么区别？

> ID：11936363
> 
> 赞同：7
> 
> 时间：2012-08-13T14:28:07.737
> 
> 标签：tridion, tridion-2011

我一直在关注 GUI 扩展并注意示例使用`_isEnabled`or `isEnabled`，不带下划线。两者似乎都可以扩展或可能替换现有功能。

# 已启用

例如，PowerTools 基类（似乎没有“扩展”现有功能）具有：

```
PowerTools.BaseCommand.prototype.isEnabled = function(selection, pipeline)
{
    var p = this.properties;

    if (!p.initialized)
    {
        this.initialize();
    }

    if (!this.isToolConfigured())
    {
        return false;
    }

    if (this.isValidSelection)
    {
        return this.isValidSelection(selection, pipeline);
    }

    return true;
}; 
```

工具可以使用此基类并声明 .isValidSelection，例如：

```
PowerTools.Commands.CountItems.prototype.isValidSelection = 
                                       function (selection) { ... } 
```

# _isEnabled

我看到安圭拉使用`._isEnabled`现有功能（在代码中许多地方的 Chrome 控制台中）。例如，`WhereUsed`有：

```
Tridion.Cme.Commands.WhereUsed.prototype._isAvailable =
                      function WhereUsed$_isAvailable(selection) ... 
```

# 私人功能？

我熟悉前面的下划线是私有变量的命名约定。_isEnabled 和其他以下划线开头的函数是“私有的”吗？如果是这样，那么

*   我们应该如何*扩展*（向现有代码添加附加功能）这些功能？
*   我们应该如何*替换*（不运行现有代码，而是让我们的代码像“覆盖”一样运行）这些？

我假设相同的方法适用于以下划线开头的其他函数，例如`_isAvailable`, 和`_invoke`.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-13T16:29:25.633

为命令调用以下方法：

1.  可用
2.  已启用
3.  调用

所有命令的基类 - Tridion.Core.Command - 具有这些方法的标准实现。在大多数情况下，此默认实现允许对命令进行扩展。它们还调用下划线方法（_isAvailable、_isEnabled 和 _execute）。

我不知道为什么 CME 命令只覆盖下划线方法。也许有人认为这样更容易。它们应该被认为是私有的（或相当于 C# 中的“受保护”），所以这对我来说实际上似乎是一种不好的做法。

实现适当的方法（isAvailable、isEnabled 和 invoke）然后使用 this.callBase 调用基本实现会更简洁。但是，在这种情况下，您可能需要停止管道，或者还需要覆盖下划线方法，以避免您的返回值被默认的下划线方法覆盖。这取决于您正在实施或扩展的命令。

简而言之：使用下划线方法可能是不好的做法，但核心实现似乎确实让您更难“正确”地做到这一点。因此，我的目标是避免使用下划线方法，但如果事实证明这样做太难，请不要大汗淋漓。

PS isValidSelection 是一种仅限 PowerTools 的方法，它将它们都需要的公共逻辑与每个命令特定的逻辑分开。

# visual-studio-2010 - 如何读取 Excel 单元格并写入数据库

> ID：11936371
> 
> 赞同：0
> 
> 时间：2012-08-13T14:28:33.337
> 
> 标签：visual-studio-2010, c#-4.0, excel-2007

我正在编写一个从 Excel 工作表读取的 C# 应用程序。它读取整张纸，但是我有兴趣只读取一行中的特定单元格并移动到下一行并再次读取该行中的特定单元格。未读取或省略的单元格对于 excel 中的所有行都是相同的。下面是我阅读excel的示例代码：

```
private void button1_Click(object sender, EventArgs e)
        {
            Excel.Application xlApp = new Excel.Application();
            Excel.Workbook xlWorkbook = xlApp.Workbooks.Open(@"C:/test.xlsx");
            Excel._Worksheet xlWorksheet = xlWorkbook.Sheets[1];
            Excel.Range xlRange = xlWorksheet.UsedRange;

            int rowCount = xlRange.Rows.Count;
            int colCount = xlRange.Columns.Count;
            for(int i=1; i <= rowCount; i++)
                {
                    for(int j=1; j<=colCount; j++)
                        {
                             MessageBox.Show(xlRange.Cells[i,j].Value2.ToString());
                        }
                }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:42:11.160

您可以使用 OleDB 而不是 Excel.Interop。您的问题只需要读取单元格值，因此更容易将您的 excel 文件视为数据表本身......

```
string fileName = @"C:\test.xlsx"; 
string connectionString = String.Format(@"Provider=Microsoft.ACE.OLEDB.12.0;" + 
                          "Data Source={0};Extended Properties='Excel 12.0;HDR=YES;IMEX=0'", fileName); 
using(OleDbConnection cn = new OleDbConnection(connectionString))
{
   cn.Open();
   OleDbCommand cmd = new OleDbCommand("SELECT Column1, Column2, Column3 From [Sheet1$]", cn);
   OleDbDataReader rd = cmd.ExecuteReader();
   while(rd.Read())
   {
        Console.WriteLine("Loop");
        Console.WriteLine(rd.GetString(0));
        Console.WriteLine(rd.GetString(1));
        Console.WriteLine(rd.GetString(2));
        Console.WriteLine();
    }
} 
```

几点注意事项：

我正在使用 ACE.OleDB，因为您的文件具有 XLSX 扩展名
我假设您的文件在名为 Column1 的第一行中有列标题。ETC....

# smartclient - Smartclient：菜单右对齐使页面更宽

> ID：11936372
> 
> 赞同：0
> 
> 时间：2012-08-13T14:28:35.193
> 
> 标签：smartclient

我正在使用 Smartclient，v 8.2 (LGPL)。
我有一个可以打开菜单的 MenuButton。按钮右对齐。问题是显示菜单时；菜单的左侧与按钮的左侧对齐，并且没有用于渲染菜单的空间。结果，当我单击菜单按钮时，页面变宽（出现水平滚动条）以便为渲染菜单腾出空间。当菜单被隐藏时，页面恢复正常大小。
有没有办法避免这种情况？我想要的是菜单的右侧与按钮的右侧对齐。
我尝试使用`align`菜单的属性，但无论我使用什么值，我总是看到相同的行为。我也设置了`overflow= "hidden"`，但仍然是同样的问题。

这是一个小测试用例：

```
isc.Menu.create({
    ID: "menu",
    autoDraw: false,
    showShadow: true,
    shadowDepth: 10,
    overflow: "hidden",
    align: "right",
    data: [
     {title: "New", keyTitle: "Ctrl+N", icon: "icons/16/document_plain_new.png"},
     {title: "Open", keyTitle: "Ctrl+O", icon: "icons/16/folder_out.png"},
     {isSeparator: true},
     {title: "Save", keyTitle: "Ctrl+S", icon: "icons/16/disk_blue.png"},
     {title: "Save As", icon: "icons/16/save_as.png"}
    ]
});

isc.MenuButton.create({
    ID: "menuButton",
    autoDraw: false,
    title: "File",
    width: 100,
    menu: menu
});

isc.HLayout.create({
   width: "100%",
   members: [
   isc.Canvas.create({
   width: "*",
   height: 24,
   backgroundColor: "lightgray"
    }),
   menuButton
]
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T15:29:36.427

我发现了问题：如果`showShadow`设置为 true，那么我会看到问题中描述的问题。删除该属性（默认为 false）解决了问题：菜单向右对齐，并且没有出现滚动条。

# c# - 最小起订量验证无效

> ID：11936375
> 
> 赞同：3
> 
> 时间：2012-08-13T14:28:51.167
> 
> 标签：c#, moq, verify

我在使用 moq 时遇到了一个奇怪的问题。

在一个项目中，当我尝试验证一个方法是否被调用时，它说它没有。当我调试测试时，它清楚地调用了该方法。

这是一个简单的缓存对象，我想看看我是否向缓存中添加了一些东西。我有（除其他外）添加、包含和获取方法。

我的验证在这些方法上运行良好：

```
bool Contains(string key);
T Get<T>(string key); 
```

但不是这个：

```
void Add(string key, object objectToCache, CacheItemPolicy policy); 
```

我已经尝试了我给该方法的确切值，如下所示：

```
mockedCache.Verify(p => p.Add(LOCATION_CACHE_KEY, locations, policy), Times.Once()); 
```

使用 It.IsAny

```
mockedCache.Verify(p => p.Add(It.IsAny<string>(), It.IsAny<IEnumerable<string>>(),
     It.IsAny<CacheItemPolicy>()), Times.Once()); 
```

无论我尝试什么，我都会得到它被调用 0 次的响应。

我以前从未见过这种行为。谁能告诉我有什么问题？

谢谢

迈克尔

更新：正如@SergRogovtsev 所建议的，我查看了生成的输出起订量。

我的方法不是用 IEnumerable 而是用 List 调用的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T07:59:43.923

如您所见，Moq 并没有检查传递的参数的确切类型，而不仅仅是它们从您断言的类型派生。如果你想要这个功能，你可能需要使用这样的东西：

```
mockedCache.Verify(p => p.Add(It.IsAny<string>(), It.Is<object>(o => o is IEnumerable<string>), It.IsAny<CacheItemPolicy>()), Times.Once()); 
```

否则，您可以考虑获取 Moq 的更新版本 - 我已经测试了您的原始场景（`It.IsAny<IEnumerable<string>>`在断言中使用）并且它与 Moq v4.0 一起正常工作）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-30T01:01:15.807

是否`CacheItemPolicy`实现接口？如果是这样，你会尝试用

```
mockedCache.Verify(p => p.Add(It.IsAny<string>(), It.IsAny<IEnumerable<string>>(), It.IsAny<ICacheItemPolicy>()), Times.Once()); 
```

或者接口的名称是什么？

我有同样的问题。问题是，我的 SUT 方法收到了一个接口，这就是它传递给模拟对象的内容。尽管类可以实现接口，但接口仍然是不同的类型。希望这可以帮助。

# postgresql - 多字段 UNIQUE 约束可以包含来自多个表的字段吗？

> ID：11936376
> 
> 赞同：5
> 
> 时间：2012-08-13T14:28:52.527
> 
> 标签：postgresql, database-design, join, constraints, unique-constraint

我有以下 2 个表：

```
Bookings
  - User ID

Shifts
  - Booking ID
  - Date 
```

我想确保用户不会在同一日期预订超过一个班次。换句话说，字段 [Bookings.UserID, Shifts.date] 的唯一约束

我可以在 PostgreSQL 中执行此操作吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T16:39:10.840

**PostgreSQL 中的索引在*一张*表**上，不能跨越多张表。

但是您可以通过适当的表格布局解决您的问题。您可能需要的是一个 n:m 关系，用 3 个表实现。然后有多种方法可以强制执行您的条件。

*   您可以将日期冗余存储在预订中，创建**主键`(usr_id, shift_date)`**而不是使用*多列外键*来`(usr_id, shift_id)`保证引用完整性：*`(shift_id, shift_date)`*

 *```
CREATE TABLE usr(
  usr_id serial PRIMARY KEY
 --, more?
);

CREATE TABLE shift(
  shift_id serial PRIMARY KEY
 ,shift_date date
 --, more?
); 
```

这也需要先`UNIQUE INDEX`开启`shift`：

```
CREATE UNIQUE INDEX shift_date_idx ON shift (shift_id, shift_date);

CREATE TABLE booking(
  usr_id int REFERENCES usr(usr_id)
 ,shift_id int
 ,shift_date date
 --, more?
 ,CONSTRAINT booking_pkey PRIMARY KEY (usr_id, shift_date)
 ,CONSTRAINT booking_fkey FOREIGN KEY (shift_id, shift_date)
 REFERENCES shift(shift_id, shift_date)
); 
```

*   另一种限制较少但也不太可靠的方法是在表格上使用**触发器** 来检查用户是否已经在新日期进行了轮班。可以在没有冗余日期列的情况下工作。`ON INSERT OR UPDATE``booking`

我会选择第一个解决方案。

* * *

**PostgreSQL 中的视图也没有索引**（据我所知，从 v9.1 开始）。

您*可以*创建一个返回`shift_date`给定值的函数`shift_id`并声明它`IMMUTABLE`（尽管实际上并非如此）。有了它，您*可以*在表达式上创建多列索引：

```
CREATE function f_shift_date (shift_id int)
 RETURNS date LANGUAGE SQL IMMUTABLE AS
$BODY$
   SELECT shift_date FROM shift WHERE shift_id = $1;
$BODY$;

CREATE UNIQUE INDEX shift_date_idx ON booking (shift_id, f_shift_date(shift_id)); 
```

这将强制执行您的条件。但老实说，这很自杀。该索引依赖于您`shift_id`无限期地获得相同日期的条件。如果`shift_date`相对于它的 发生变化`shift_id`，则必须重新创建索引，否则将产生不正确的结果。所以，*不要那样做*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T17:50:01.293

只是以上还不能解决你的问题？

```
ALTER TABLE shifts
ADD CONSTRAINT uk_shifts_book UNIQUE (booking_id, date); 
```

如果您已经在班次上有引用列，那么您只需要在引用列和日期列上创建一个唯一约束（甚至是唯一索引）。*

# ruby-on-rails - Rails Rspec redirect_to 跳到根目录

> ID：11936378
> 
> 赞同：1
> 
> 时间：2012-08-13T14:29:06.600
> 
> 标签：ruby-on-rails, routes, rspec2

我正在 Rspec2，Rails 3 中进行控制器测试，基本上我在通信控制器中有一个编辑操作，所以如果有人想编辑批量电子邮件，他们可以在草稿模式下。如果它已被批准或发送它不能被编辑。

我的控制器看起来像这样

```
class CommunicateController < ApplicationController
before_filter :setup

require_role 'view_communication'
#require_role 'edit_communication', :only => [:new, :edit, :create, :update, :destroy] Role not implemented
require_role 'approve_communication', :only => :approve
require_role 'send_communication', :only => :distribute

 ...

# GET /communications/1/edit
def edit
  if @communication.status == 'Sent' || @communication.status == 'Approved'
    flash[:error] = 'Cannot edit communication once it has been either approved or sent.'
    redirect_to(communicate_path(@communication))
 end
end

 ...

private
  def setup
    @communication = current_account.communications.find(params[:id]) if params[:id]
  end
end 
```

现在它可以在生产中使用，一切都很酷。现在的问题是我必须对其进行测试。

我的测试如下所示：

```
describe CommunicateController, "#edit" do
  context "when i am editing a pre approved bulk email" do
  before(:each) do
    @account = FactoryGirl.create(:account)
    @user = FactoryGirl.create(:superuser, :accounts => [@account])
    controller.stub(:current_account).and_return(@account)
    @supplier = FactoryGirl.create(:supplier, :account => @account)
    @other_supplier = FactoryGirl.create(:supplier, :account => @account)
    @supplier_report = FactoryGirl.create(:supplier_report, :reportable => @account)
    @communicate = FactoryGirl.create(:communication, :account => @account, :supplier_report => @supplier_report)
    controller.stub(:setup).and_return(@communicate)
  end

  it "denies edit access if the bulk email is sent" do
    @communicate.status = 'Sent'
    get :edit, :id => @communicate.id 
    response.should redirect_to(communicate_path(@communicate))
  end

  it "denies edit access if the bulk email has been approved" do
    @communicate.status = 'Approved'
    get :edit, :id => @communicate.id
    response.should redirect_to(communicate_path(@communicate))
  end

  it "allows edits to Draft bulk email" do
    @communicate.status = 'Draft'
    get :edit, :id => @communicate.id
    response.should redirect_to(edit_communicate_path)
  end

 end
end 
```

正如您所看到的，为这个特定的测试设置环境非常复杂，需要满足所有要求。但是当我运行测试时，它给了我以下错误：

```
Failure/Error: response.should redirect_to(communicate_path(@communicate))
Expected response to be a redirect to <http://test.host/communicate/1> but was a redirect to <http://test.host/> 
```

但对于所有三个测试，相同的错误。所以代码正在工作并且测试似乎正在寻找正确的路线，我只是不知道它为什么要寻找根路线。

抱歉，如果这是一个简单的错误，我只在 Rails 中编程了几个月，这实际上是我在 rspec 中的第一次控制器测试，所以我不确定要寻找什么，或者我的测试是否状况良好。

任何帮助或指导将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T16:56:40.017

做类似的事情

```
grep -ri "redirect_to root_path" ./ 
```

在您的应用程序目录中，您可以看到您在哪里重定向到根路径并尝试使用它进行调试

这些动作实际上被调用了吗？在编辑操作开始时放一些“打印'输入！'”，我想它不会在控制台上打印任何东西，因为它甚至没有到达那里，如果是这种情况，你可能有一些 before_filter 或 require_role 或者你的东西在你的测试中丢失

顺便说一句（你还问你的规范是否良好），你应该模拟你的模型并存根你需要的方法，比如

（在控制器上）

```
def edit
  unless @communication.can_edit?
    flash[:error] = 'Cannot edit communication once it has been either approved or sent.'
    redirect_to(communicate_path(@communication))
  end
end 
```

（在模型上）

```
def can_edit?
  ('Sent','Approved').include? status
end 
```

（然后在规范上）

```
before(:each) do
  account = mock(:account)
  controller.stub(:current_account).and_return(account)
  communication = mock(:communication)
  communication.stub(:can_edit? => false) #you can override this with true on the allow test
  controller.stub(:setup).and_return(communication)
end 
```

然后您将这两个拒绝测试（已发送和已批准）移至通信规范（如果状态为已发送，则返回 false 等等），并且您的控制器测试应该是“如果无法通信，它将拒绝访问编辑“做”

希望能帮助到你

编辑：另外，我认为如果您只在控制器的操作上使用@communication，您的规范将需要一些辅助方法，例如：

```
def current_communication
  @communication
end 
```

由于您正在对 setup 方法进行存根，因此永远不会执行 @communication 分配，如果您直接使用它，@communication 将为零

# xcode - 将按钮连接到应用程序委托

> ID：11936380
> 
> 赞同：3
> 
> 时间：2012-08-13T14:29:16.100
> 
> 标签：xcode, facebook

我正在关注本教程[http://developers.facebook.com/docs/mobile/ios/build/#implementsso](http://developers.facebook.com/docs/mobile/ios/build/#implementsso)，我正在添加注销按钮的部分（第 4 步）。我已经输入了代码，但我无法找到触发注销功能的方法，因为我一直将所有代码放在应用程序委托文件而不是视图控制器文件中，因为这就是本教程所指示的我来做。该代码包括按钮的设置，但我不知道如何将其转换为情节提要文件。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T17:49:46.693

尝试遵循本指南： http: [//klanguedoc.hubpages.com/hub/IOS-5-A-Beginners-Guide-to-Storyboard-Connection](http://klanguedoc.hubpages.com/hub/IOS-5-A-Beginners-Guide-to-Storyboard-Connection)

您将要按住“控制”并从按钮拖动到视图控制器。一旦你这样做了，它应该会弹出一个可供选择的 IBAction 方法列表。单击相应的。

它应该看起来像这样： ![在此处输入图像描述](../Images/9856d2bcd8c91ae0f0ede1f87aad3279.png)

编辑1：

您无法从应用委托连接 IBAction。只需将它放在您的 ViewController 文件中。如果它需要在应用程序委托中，请在 VC IBAction 中调用：

```
-(IBAction)yourAction {
YourAppDelegate *appDelegate = (YourAppDelegateClass*)[[UIApplication sharedApplication] delegate];
[appDelegate performSelector:@selector(yourOtherMethod)];
} 
```

# java - 从 Runnable 内部访问线程

> ID：11936381
> 
> 赞同：6
> 
> 时间：2012-08-13T14:29:18.377
> 
> 标签：java, multithreading, runnable, thread-sleep

如何访问`Thread`给定正在执行的对象`Runnable`？我想做的是`sleep()`从方法内部调用`run()`。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-13T14:30:36.380

如果你需要在 a 中睡觉`Runnable`，你可以简单地在方法`Thread.sleep();`内部调用`run`。

要访问正在运行的线程`Runnable`，您可以调用`Thread.currentThread()`，但这不是调用`sleep`静态方法所必需的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-13T14:32:27.073

您始终可以`Thread`通过调用静态方法来获取您的代码正在执行的电流`Thread.currentThread()`。

但是在您的情况下，您不需要线程本身，因为睡眠是通过以下静态方法控制的：

```
Thread.sleep(1000L); 
```

# ios - 减少包含音频文件的 ios Native App 大小

> ID：11936386
> 
> 赞同：0
> 
> 时间：2012-08-13T14:29:49.657
> 
> 标签：ios

我们通过 HTML、CSS、JQuery 移动开发了一个 ios 应用程序，并通过 PhoneGap 框架转换为 Native App。该应用程序具有音频和文本，用户将导航到不同的章节，每个章节都包含相应的歌曲。

我们的应用程序大小为 80MB，这是因为其中包含大量音频文件（mp3 格式）。音频文件：78MB 源文件：2MB

我们希望减小应用程序的大小以便于下载，OTA 更新的最大限制为 50MB。

我们可以通过哪些方式来减小应用程序的大小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T14:39:05.547

1）您可以让应用在第一次运行时下载所有音频内容（尽管这会使应用的第一次用户体验很糟糕）。

2) 您可以在应用需要时（即用户第一次要求章节时）从网络上流式传输内容。然后将其缓存，以便下次播放时可以播放本地文件。这意味着应用程序在用户第一次查看新章节时需要网络连接。

3）按照@Almo的评论所说的去做。这意味着您的应用程序将通过 3G 下载，但如果您可能会丢失音频质量。

4) 接受它，只让用户通过 wifi 下载应用程序。在您的 iTunes 描述顶部添加评论，例如“由于音频质量高，此应用只能通过 WiFi 使用”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T14:39:46.927

您可以以较低的比特率或单声道或两者对 MP3 进行编码。鉴于您的设置，没有太多其他工作要做，而无需做一些更激烈的事情。

严厉措施包括：

*   删除一些 MP3。
*   通过网络流式传输音乐。

# dll - 如何集中 VB6 dll 引用的 .net dll（com 互操作）

> ID：11936388
> 
> 赞同：2
> 
> 时间：2012-08-13T14:29:54.553
> 
> 标签：dll, .net-4.0, vb6, dllregistration

VB6 程序员给了我一个要求（是的，它们仍然存在）。存在使用 vb6 dll 的 vb6 应用程序，此 dll 现在使用 .net dll，而后者又使用另一个 .net dll。现在我的要求是 .net dll 应该像 vb dll 一样工作，即一旦注册了 vb6 dll，它就可以被其他应用程序使用，并且在推出时不需要包含（所以我被告知）。有没有办法放置我的 .net dll 以便其他 vb6 应用程序可以使用它。从我所见，这仅在我的 .net dll 与我的 vb6 exe 位于同一文件夹中时才有效。

我已阅读此[COM 程序如何定位为 COM 互操作注册的 .NET DLL？](https://stackoverflow.com/questions/2867999/how-does-a-com-program-locate-a-net-dll-registered-for-com-interop)

谢谢你

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T14:58:39.360

COM 因其 DLL Hell 问题而臭名昭著。注册对于机器上的所有程序都是全局的。因此，替换 DLL 通常最终会破坏使用 COM 服务器的其他程序。

.NET 对此有一个对策，当您运行 Regasm.exe 来注册 [ComVisible] .NET 程序集时，它将默认假定您将程序集放在 GAC 中。这会自动购买 DLL 地狱保护。然而，使用 /codebase 选项注册程序集并不少见，尤其是在您的开发机器上以及由 IDE 完成的情况。

然而，您现在会遇到一个新问题，CLR 没有很好的机制来定位相关的 .NET 程序集。探测路径基于 COM 客户端 EXE。这就是为什么将您的依赖程序集复制到 EXE 安装目录中的原因。

这对于测试来说很好，但不是您在部署服务器时想要使用的一个好的通用解决方案。您无法准确预测什么 EXE 将使用 COM 服务器以及它的位置。弄乱别人拥有的程序的安装目录通常在政治上很困难。

使用GAC，所有问题都解决了。

# asp.net-mvc-3 - 如何在控制器中检索值数组

> ID：11936401
> 
> 赞同：0
> 
> 时间：2012-08-13T14:30:36.037
> 
> 标签：asp.net-mvc-3, visual-studio-2010

我正在使用 asp.net MVC3。在我看来，我有一个数组，我将这个数组传递给控制器​​，比如

```
return{model:JSON.stringify("array")}; 
```

在控制器中我给了喜欢

```
public ActionResult SearchDetails( string model)     //To load the SearchResults List view
{              
} 
```

当我执行时，当我放置光标时，它显示为 `"\"[{\\\"id\\\":1 "id\\\":2}]\""`. 我想在我的控制器中检索这些值，但我不想使用`for/foreach`循环。我该怎么做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:35:24.147

您是否阅读过有关数组模型和模型绑定的主题？

[用于模型绑定到数组、列表、集合、字典的 ASP.NET 有线格式](http://www.hanselman.com/blog/ASPNETWireFormatForModelBindingToArraysListsCollectionsDictionaries.aspx)

# drag-and-drop - Objective-C - 是否可以拖动一个项目并将其锁定在某个位置？

> ID：11936407
> 
> 赞同：0
> 
> 时间：2012-08-13T14:31:13.877
> 
> 标签：drag-and-drop, position

如何拖动图像或按钮，然后当图像位于特定位置时，即 (x = 240 y = 240) 它将停留在那里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:42:58.813

我会假设 iOS，因为我比 OS X 更熟悉它。

要使视图可拖动，请使用以下三种方法检测拖动它的触摸：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event;
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event;
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event; 
```

诀窍是您应该将触摸的位置存储在视图的超级视图中，然后在第二种方法中相应地更新视图本身的位置。当您检测到视图的中心或原点到达某个点时（不要使用 == 检查它，它不适用于浮点数，使用一些小的 epsilon 来检测视图是否在所需**区域内**） ，您可以在视图上设置一个布尔标志，然后在 touchesMoved 方法中检查该布尔标志并且不再更新视图的位置。

# sql-server-2008 - 如何在 SQL 中合并多个结果行

> ID：11936409
> 
> 赞同：0
> 
> 时间：2012-08-13T14:31:22.773
> 
> 标签：sql-server-2008, codeigniter, activerecord

这是我想要做的：我有以下表格：

```
User
id     name  
1      user1

Emails
id     email                           user_id
1      something@somewhere.com         1
2      something_else@somewhere.com    1

Addresses
id    address  user_id
 1    Here     1
 2    There    1 
```

我想做的是一个 SELECT，每个用户只包含一行，不管他有多少电子邮件和地址。问题是我还需要一个地址才能看到。所以我需要我的结果看起来像这样：

```
name         email                address  total_emails total_addresses
user1        something@somewhere  Here     2            2 
```

我想到了 GROUP BY，但由于我使用 COUNT 函数来获取电子邮件和地址的数量，我被迫对所有列进行 GROUP BY，因此每个组合都会得到一个结果......

我想在 SQL 中做的甚至可能吗？是否可以使用 CodeIgniter ActiveRecord？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:40:07.287

我不熟悉 sql-server 但在 mysql 中我会这样写：

```
SELECT t1.id AS user_id, 
       t2.email AS user_email,
       t3.address AS user_address,
       (SELECT count(*) from emails WHERE user_id = t1.id) as total_emails,
       (SELECT count(*) from emails WHERE user_id = t1.id) as total_addresses,
FROM user t1
LEFT JOIN emails t2 on t1.id = t2.user_id
LEFT JOIN addresses t3 ON t1.id = t3.user_id
GROUP BY t1.id 
```

如果 sql server 支持子查询，它应该可以工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T14:52:52.133

```
;With user_details AS
(
SELECT
name
,_Addresses.address
,_email.email
,row_number() OVER (PARTITION BY name ORDER BY _email.id ASC) AS email_row
,COUNT(_email.email) OVER (PARTITION BY name) AS email_count
,row_number() OVER (PARTITION BY name ORDER BY _addresses.id ASC) AS address_row
,COUNT(_addresses.address) OVER (PARTITION BY name) AS address_count
FROM _user
LEFT OUTER JOIN _email on _email.user_id = _user.id
LEFT OUTER JOIN _Addresses ON _Addresses.user_id = _user.id
)
SELECT 
name
,MAX(CASE WHEN email_row = 1 THEN email END) AS email
,MAX(CASE WHEN address_row = 1 THEN address END) AS address
,MAX(email_count) as total_emails
,MAX(address_count) as total_addresses
FROM user_details
GROUP BY name 
```

# c# - jQuery UI Accordion with MVC3

> ID：11936414
> 
> 赞同：2
> 
> 时间：2012-08-13T14:31:45.600
> 
> 标签：c#, asp.net-mvc-3, jquery-ui

Im having some problems implementing an jQuery UI Accordion widget on my site.

I list with a heading, that i wan't to be able to colapse/expand. For this im trying to use the jQuery UI Accordion widget.

But for some reason its not working.

I have this razor view:

```
<div id="parameter_accordion">
<h3>Parameters</h3>

    @foreach (var item in Model)
    {
        <div>
            <p>@item.Name</p>
        </div>    
    } 
```

The div tag is "pointing" to the function in my JS file ("ConfigApplication.js"):

```
$("#parameter_accordion").accordion(); 
```

Im importing this file along with all the Jquery files in the _Layout.cshtml:

```
<link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
<link href="@Url.Content("~/Content/themes/base/jquery.ui.all.css")" rel="stylesheet" type="text/css" />

<script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/modernizr-1.7.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery-ui-1.8.11.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/ConfigApplication.js")" type="text/javascript"></script> 
```

but for some reason the view is not showing as a accordion. Its shoving all content, all the time. Can anyone see what i'm doing wrong?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T14:34:38.453

The general html for a jquery accordion follows the following standard:

```
<div id="accordion">
    <h3><a href="#">First header</a></h3>
    <div>First content</div>
    <h3><a href="#">Second header</a></h3>
    <div>Second content</div>
</div> 
```

Therefore, if you are wanting only one header, then you should not have the div inside the foreach loop and it should look like this:

```
<h3><a href="#">Parameters</a></h3>

<div>
    @foreach (var item in Model)
    {
        <p>@item.Name</p>
    }
</div> 
```

However, if you are wanting a header for each section, you need to have a `<h3>` with an anchor tag within it for each unique section. So you should include the tag within the foreach loop. It would look something like this:

```
@foreach (var item in Model)
{
    <h3><a href="#">@item.Name</a></h3>
    <div>
        <p>@item.Name</p>
    </div>    
} 
```

Also to note, the accordion is not collapsible by default and you need to add that option in order to allow it to be collapsed completely.

```
$("#parameter_accordion").accordion({ collapsible: true }); 
```

Check out the [demo for the jquery UI accordion](http://jqueryui.com/demos/accordion/) for more information.

# css - 溢出：具有持久标头的自动

> ID：11936422
> 
> 赞同：0
> 
> 时间：2012-08-13T14:32:02.590
> 
> 标签：css, list, scroll, overflow, css-position

我正在尝试创建一个带有持久导航标题的可滚动列表。但是，当您滚动到列表底部时，最后几个项目不可见，因为列表被标题向下推。我创建了一个 jsfiddle 来显示问题：

[http://jsfiddle.net/U34vq/12/](http://jsfiddle.net/U34vq/12/)

问题是高度：100%。我怎样才能解决这个问题？我*可以*使用 CSS3 calc() 来制作它，height: calc(100% - 3em); 但是，我的目标是不支持 calc() 的浏览器。

我想我的问题是，我可以有 2 个嵌套元素，一个以 ems 为高度，另一个以 % 为单位，并且可以工作，因为我似乎做不到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T18:14:04.737

看看这个解决方案。我已经添加`position: absolute;`到项目并设置了`bottom`和`top`参数，似乎工作正常

[http://jsfiddle.net/skip405/U34vq/15/](http://jsfiddle.net/skip405/U34vq/15/)

# jquery - 选择 div 中的所有 Li

> ID：11936430
> 
> 赞同：1
> 
> 时间：2012-08-13T14:32:20.343
> 
> 标签：jquery, css, list, menu, background

我需要在 div 内的所有 li 项目上设置背景颜色。我很难到达列表项，因为在渲染 li 时会创建混乱的共享点。每个 li 都是共享点服务器控件渲染的结果。这本质上是一个顶部导航，有 6 个水平布局的菜单项，其中一些甚至有子菜单项。

我需要在所有列表项上设置 bgcolor 并在悬停时更改 bg 颜色并在鼠标移出时更改回原始颜色。

```
<div id="zz16_HDRNav" class="s4-tn">
    <div class="menu horizontal menu-horizontal">
        <ul class="root static">
            <li class="static">
                <a class="static menu-item" href="/">
                    <span class="additional-background">
                    <span class="menu-item-text">Home</span></span>
                </a>
            </li>
            <li class="static dynamic-children">
                <a class="static dynamic-children menu-item" href="/finance">
                    <span class="additional-background">
                    <span class="menu-item-text">Employee Center</span></span>
                </a>
                <ul class="dynamic">
                    <li class="dynamic">
                        <a class="dynamic menu-item" href="/finance/EMEA"><span class="additional-background">
                            <span class="menu-item-text">Benefits</span></span>
                        </a>
                    </li>
                    <li class="dynamic">
                        <a class="dynamic menu-item" href="/finance/APAC"><span class="additional-background">
                            <span class="menu-item-text">Travel</span></span>
                        </a>
                    </li>
                    <li class="dynamic">
                        <a class="dynamic menu-item" href="/finance/CORP">
                            <span class="additional-background"><span class="menu-item-text">TSO</span></span>
                        </a>
                    </li>
                </ul>
            </li>
            <li class="static">
                <a class="static menu-item" href="/team">
                    <span class="additional-background">
                    <span class="menu-item-text">Business Communities</span></span>
                </a>
            </li>
            <li class="static dynamic-children">
                <span class="static dynamic-children menu-item"><span class="additional-background"><span class="menu-item-text">Internal Services</span></span></span>
                <ul class="dynamic">
                    <li class="dynamic">
                        <a class="dynamic menu-item" href="/regions/NA">
                            <span class="additional-background"><span class="menu-item-text">North America</span></span>
                        </a>
                    </li>
                    <li class="dynamic">
                        <a class="dynamic menu-item" href="/regions/me">
                            <span class="additional-background"><span class="menu-item-text">Middle East</span></span>
                        </a>
                    </li>
                </ul>
            </li>
            <li class="static">
                <a class="static menu-item" href="/it">
                    <span class="additional-background"><span class="menu-item-text">Best Practices</span></span>
                </a>
            </li>
            <li class="static">
                <a class="static menu-item" href="/legal">
                    <span class="additional-background"><span class="menu-item-text">PolicyProcedures</span></span>
                </a>
            </li>
        </ul>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T14:34:33.850

这将在你的 div 中设置所有 li 的背景颜色

```
$('#YourdivId').find('li').hover(function () {
                            $(this).css({ 'background-color': 'gray' });
                        }, function () { $(this).css({ 'background-color': '' }); }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T14:38:09.113

在 CSS 中：

```
#zz16_HDRNav li{
       background-color: your color;
}

#zz16_HDRNav li:hover{
       background-color: your color;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-13T14:41:42.153

您可能应该使用`hover()`方法并为悬停样式使用一个类。像这样的东西：

```
$("#zz16_HDRNav li").hover(
    function() {
        $(this).addClass('yourHoverClass');
    },
    function() {
        $(this).removeClass('yourHoverClass');
    }
); 
```

那是 jQuery 解决方案，尽管我个人尝试将直接 CSS 用于悬停条件，如其他答案中所述。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T14:35:18.870

如果你需要使用 jQuery 而不是 CSS，我会使用一个类来做到这一点：

```
$('div li').css({'background-color':'red'})
       .hover(function(){ 
             $(this).toggleClass('hover')
             }); 
```

然后在css中：

```
.hover{
    background-color: green;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-13T14:37:15.897

这应该处理第一级 LI 项目：

```
div.s4-tn div.menu ul.root li.static {
    background-color:red;
}

div.s4-tn div.menu ul.root li.static:hover {
    background-color:blue;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-13T14:38:56.283

您可以为此使用一些直接的 CSS：

```
#zz16_HDRNav>.menu>ul>li
{
    background-color:gray;
}
#zz16_HDRNav>.menu>ul>li :hover
{
    background-color:red;
} 
```

小提琴：http: [//jsfiddle.net/johnkoer/XgExk/7/](http://jsfiddle.net/johnkoer/XgExk/7/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-13T15:17:53.703

CSS：

```
ul.dynamic {display:none}
.root li { width:auto; float:left; margin:4px; display:block;}
.menu { width:780px}
.yourclass { background:#ffbbcc; color:#aaffcc;}
.root li.dynamic { width:100px; clear:left}
li.dynamic:hover { background:#aaffcc;color:#ffbbcc;} 
```

JavaScript：

```
jQuery('li.static').live('hover', function() {
    jQuery('li.static').find("ul.dynamic").hide();
    jQuery('li.static').removeClass('yourclass');       
    jQuery(this).addClass('yourclass');
    jQuery(this).find("ul.dynamic").show();
}); 
```

[jsfiddle](http://jsfiddle.net/vitrum/nHgWe/14/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-13T14:37:22.177

为什么要使用 jQuery？只需使用 CSS：

```
div li {
background-color:#CCC;
}

div li:hover {
background-color: #AAA;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-13T14:40:39.923

像这样的东西应该可以解决问题！[http://jsfiddle.net/BnJ3G/2/](http://jsfiddle.net/BnJ3G/2/)

干杯

# html-parsing - 是否有 D 的 HTML 解析？

> ID：11936434
> 
> 赞同：4
> 
> 时间：2012-08-13T14:32:31.887
> 
> 标签：html-parsing, d

我正在寻找 D 语言的 HTML 解析（如果可能，支持 XPath）。我做了一些谷歌搜索，但没有运气（很难找到带有“D”关键字的解决方案；它就像 C，我说“C”，谷歌说`C#`。）。在[http://www.dsource.org](http://www.dsource.org)和[https://stackoverflow.com/questions/tagged/html-parsing+d](https://stackoverflow.com/questions/tagged/html-parsing+d)上也没有。

注意：我不想混合 C++ 和 D 代码。我正在寻找 C 或 libxml2 中的解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T14:38:51.817

查看 Adam Ruppe 的 dom.d：

[https://github.com/adamdruppe/misc-stuff-including-D-programming-language-web-stuff/blob/master/dom.d](https://github.com/adamdruppe/misc-stuff-including-D-programming-language-web-stuff/blob/master/dom.d)

# php - 用php查找重复的单词列表

> ID：11936436
> 
> 赞同：0
> 
> 时间：2012-08-13T14:32:55.960
> 
> 标签：php, text

这是一个简单的问题，但我仍然不知道如何弄清楚。

我有一个单词列表，例如：

```
word
word
    one
    two
    three
    four
    five
    .
    ....X100
word
word 
```

单词（一、二、三、四、五）以相同的顺序准确重复，比如说 100 次。单词（word）不重复，应忽略。

我想以完全相同的顺序获得（一、二、三、四、五）的列表。这如何在 php.ini 中完成。到目前为止，我所尝试的只是计算单词的出现次数，并且不尊重单词顺序。

**更新**

谢谢大家的解答！

这是我的代码，仍然有很多错误

```
<?php
$str = 'word
word
word2
word3
one
two
three
four
one
two
three
four
one
two
three
four
one
two
three
four
one
two
three
four
one
two
three
four
yes
no 
do';
function repeated($str)
{
    $str=trim($str);  
    $str=ereg_replace('[[:space:]]+', ' ',$str);  
    $words=explode(' ',$str);  
    $lastWord = '';
    foreach($words as $w)  
    {  
        $wordstats[($w)]++;  

        if($lastWord!=''){
            $wordstats[$lastWord.' '.$w]++;
        }
        $lastWord = $w;
    }  
    foreach($wordstats as $k=>$v)  
    {  
        if($v>=2)  
        {  
            print "$k"." , ";  
        }  
    }  
}

print repeated($str);

?> 
```

基本上我想要的是给 php 那个 $str 文本，其中将包含多次重复的单词（一、二、三、四），并确定模式（一、二、三、四）就是这样

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:37:01.683

现在，请将此视为提示：

您可以使用计数变量和数组。创建一个你想要的单词数组：

```
$SearchMe = array("One", "Two", "Three", "Four");
$Index = 0; 
```

接下来，遍历您想要的列表。但不要检查“一”、“二”、“三”，而是检查：

```
$SearchMe[$Index]; 
```

每次，您找到 $SearchMe[$Index]，将其迭代一，直到您位于数组的末尾。一旦你在那里，你增加另一个计数器，因为你已经找到了你的序列。在序列结束时，或者如果您发现不匹配，请记住将 $Index 重置为 0。

那应该行得通。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T14:39:19.553

**更新** 我认为这不是您正在寻找的答案。再次阅读您的问题后，我不太确定您实际上在问什么。因此，请向我们提供更多信息，以便我们更准确。

--

我想你正在寻找这样的东西。你的列表是一个数组吗？如果是这样：

```
 <?php      
    foreach ($list as $key => $value ){
      if (isarray($value)){
        $ListINeed[] = $value;
      }
    }
    ?> 
```

当您在开篇帖子中发布了数组时，这将返回：

```
 $ListINeed[1] = array(
      [0] => one
      [1] => two
      [2] => three
      [3] => four
      [4] => five
      [x] => .
      [100] => ....X100
    ) 
```

如果您确定 ListINeed 只会出现一次，请删除 if 语句中第一段代码中 $ListINeed 之后的两个括号 ([])。然后你会得到

```
 $ListINeed = array(
      [0] => one
      [1] => two
      [2] => three
      [3] => four
      [4] => five
      [x] => .
      [100] => ....X100
    ) 
```

# playframework-1.x - 如何在 Play 中覆盖 CRUD 标签！框架 1.2.4

> ID：11936439
> 
> 赞同：1
> 
> 时间：2012-08-13T14:33:01.590
> 
> 标签：playframework-1.x

我有一个具有多对多关系的模型，并且已经应用​​了 CRUD 模块，所以我在管理屏幕上得到了一个漂亮的多选框，但它只有 4 行高。我想指定至少 20 行，但因为 CRUD 都是通过反映对象自动生成的（我猜......），即使覆盖模板也不允许这样做。

我需要覆盖的代码在`views.tags.crud/relationField.html`- 我只想添加一个像这样的“大小”值： -

`<select id="${field.id}" name="${pName}" multiple="yes" size="20">`

但这似乎不可替代。

有人有任何技巧来解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:35:13.587

您可以在加载时使用 JQuery 脚本来更改表单...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T06:39:55.800

您可以首先覆盖控制器的`show`和`blank`模板。

然后，在模板中显式声明表单字段，如下所示：

```
#{crud.form fields: ['field1','field2','field3'] /} 
```

将您的特殊情况字段排除在列表之外。然后，在表单标记之后，以您喜欢的任何方式为您的字段添加必要的 HTML。（您可以查看该字段的构建方式`relationField.html`并仅进行必要的更改。）

这有点hacky，但仍然是实现您所追求的体面的方式。希望这可以帮助！

[http://www.playframework.org/documentation/1.2.4/guide7#aCustomizingthePostforma](http://www.playframework.org/documentation/1.2.4/guide7#aCustomizingthePostforma)

# android - 组合硬按钮触发服务

> ID：11936444
> 
> 赞同：2
> 
> 时间：2012-08-13T14:33:24.160
> 
> 标签：android

我正在构建一个需要非常快速的快捷方式来触发我的应用程序的应用程序。它必须小于 2 秒。

具体来说，我想知道是否可以听硬键组合（音量增大和减小）长键按下事件来触发我的应用程序？即使屏幕被锁定。

谢谢你。

# c# - 为 JSON 提要定义嵌套类的最佳方法

> ID：11936445
> 
> 赞同：2
> 
> 时间：2012-08-13T14:33:24.583
> 
> 标签：c#, json, class, json.net

我目前正在使用 c# 中的 Facebook API，使用 NewtonSoft JSON 库来使用所有返回的 API 数据。

返回用户页面列表时，我发现自己为返回的 JSON 中的属性创建了一个类，以便对其进行序列化。

现在我有这个：

```
 public class FacebookPage
    {
        public string id { get; set; }
        public string name { get; set; }
        public string link { get; set; }
        public string category { get; set; }
        public bool is_published { get; set; }
        public bool can_post { get; set; }
        public int likes { get; set; }
        public FacebookPageLocation location { get; set; }
        public string phone { get; set; }
        public int checkins { get; set; }
        public string picture { get; set; }
        public FacebookPageCover cover { get; set; }
        public string website { get; set; }
        public int talking_about_count { get; set; }
        public string access_token { get; set; }
    }
    public class FacebookPageLocation
    {
        public decimal latitude { get; set; }
        public decimal longitude { get; set; }
    }
    public class FacebookPageCover
    {
        public string cover_id { get; set; }
        public string source { get; set; }
        public int offset_y { get; set; }
    } 
```

似乎必须有更好的方法来做到这一点。我可以用 Dictionary 替换 FacebookPageLocation，但我将如何替换 FacebookCoverPage？

理想情况下，我希望能够以漂亮的嵌套格式声明它，就像这样

```
 public class FacebookPage
    {
        id = string,
        name = string.
        link = string,
        category = string,
        is_published = bool,
        can_post = bool,
        likes = int,
        location = 
        {
            latitude = decimal,
            longtitude = decimal
        },
        phone = string,
        checkins = int,
        picture = string,
        cover  = 
        {
            cover_id = string,
            source = string,
            offset_y = int
        }
        website = string,
        talking_about_count = int,
        access_token = string
    } 
```

我意识到这在实践中是行不通的，但是有什么东西可以让声明这些类更整洁吗？还是不必要的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:46:53.580

我不会声明很多类，而是使用`dynamic`. 对于下面的示例 json

```
{
  "name": "joe",
  "id": 1151,
  "location": {
    "lat": 180.0,
    "lng": -180.0
  }
} 
```

-

代码将是

```
dynamic obj = JsonConvert.DeserializeObject(json);
Console.WriteLine("{0} {1} {2}", obj.id, obj.name, obj.location.lat); 
```

# magento - Magento - adminhtml 网格编辑操作不起作用

> ID：11936446
> 
> 赞同：0
> 
> 时间：2012-08-13T14:33:32.807
> 
> 标签：magento, gridview

我对magento中的网格不太了解，但我需要创建一个。网格有效，但是当我单击一行时出现错误：`Fatal error: Class '(Namespace)_Logger_Block_Adminhtml_Logger_Edit' not found in \app\code\core\Mage\Core\Model\Layout.php on line 491` 哪个文件可能导致此错误？目录结构：

```
Logger/Block/Adminhtml/Logger/Edit/Tab/Form.php
Logger/Block/Adminhtml/Logger/Edit/Form.php
Logger/Block/Adminhtml/Logger/Edit/Tabs.php
Logger/Block/Adminhtml/Logger/Edit.php
Logger/Block/Adminhtml/Logger/Grid.php
Logger/Block/Adminhtml/Grid.php
Logger/Block/Adminhtml/Loggerbackend.php
Logger/Helper/Data.php
Logger/Model/Mysql4/Logger/Collection.php
Logger/Model/Mysql4/Logger.php
Logger/Model/Logger.php
Logger/controllers/Adminhtml/LoggerbackendController.php
Logger/etc/config.xml
Logger/sql/logger_setup/... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T07:56:11.737

错误太愚蠢了：/类名不正确。

```
Path: Logger/Block/Adminhtml/Logger/Edit.php
Name: Logger_Block_Adminhtml_Loggerbackend_Edit 
```

感谢所有帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T15:05:39.963

我相信 magento 正在寻找一个名为：' `(Namespace)_Logger_Block_Adminhtml_Logger_Edit`'的类，因此您缺少以下文件： `/(namespace)/Logger/Block/Adminhtml/Logger/Edit.php`

# wpf - 获取 WPF 框架以使用 Windows 安全性

> ID：11936448
> 
> 赞同：0
> 
> 时间：2012-08-13T14:33:39.543
> 
> 标签：wpf, frame, windows-security

我正在尝试在我的程序中放置一个框架并让它访问一个需要窗口安全性的网站：

当我的程序窗口加载时，我可以输入密码，但它只会引发错误：

System.Net.WebException 未处理消息：远程服务器返回错误：（401）未经授权。

最好的情况是我的程序能够自动提供密码，然后我可以直接进入网站。

有任何想法吗？

# c# - 滚动时缓慢更新 datagrid.datacontext

> ID：11936449
> 
> 赞同：0
> 
> 时间：2012-08-13T14:33:40.013
> 
> 标签：c#, wpf, wpfdatagrid

我有一个显示一些数据的 wpf 数据网格。

我有一个滚动条，当滚动条滚动时，我更改了数据网格的数据上下文以显示一些其他数据。

此功能有效，但我发现按住滚动按钮时滚动条似乎很迟钝。

在登录一段时间后，处理部分（获取新数据，设置数据网格的数据上下文）似乎需要大约 00:00:00.1198219，但需要进一步的 00:00:00.3100004 才能拦截下一个滚动事件。

这意味着它需要将近 0.5 秒的时间来进行滚动。

我只是坚持这个还是有什么我可以做的来加快它？

我会发布我认为相关的代码，但如果您需要其他任何内容，请告诉我。

```
private void scrollBar1_Scroll(object sender, System.Windows.Controls.Primitives.ScrollEventArgs e)
        {
            Console.WriteLine(DateTime.Now - lastScroll);
            Stopwatch sw = new Stopwatch();
            Console.WriteLine("Got new load");
            sw.Start();
            getLoad();
            sw.Stop();
            Console.WriteLine("Full process took " + sw.Elapsed.ToString());
            lastScroll = DateTime.Now;
        }

private void getLoad()
        {
            double startRecord = scrollBar1.Value;
            DataTable dt = panelInterface.LoadDT(Convert.ToInt32(startRecord), numberOfRecordsToLoad);       
            dtgMain.DataContext = dt;    
        } 
```

# r - 什么是回调机制以及它如何在 R 中应用

> ID：11936451
> 
> 赞同：6
> 
> 时间：2012-08-13T14:33:49.200
> 
> 标签：r

有人可以用更简单的非计算机科学术语向我解释一下 R 中的回调功能（`taskCallback`、、`getTaskCallbackNames`... `taskCallbackManager`等）是什么？我查看了 R 帮助，但我发现信息有点过于抽象。

它的设计目的是什么，用户如何使用它们？

如果有人可以解释一般概念（用 R 和其他计算机语言），并用 R 提供示例，我将非常感激，因为我从来没有真正理解过。它是否必须与递归函数做任何事情，还是我被名称回调误导了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T14:48:59.337

我对 R 了解不多，所以我无法在这里深入研究 R 的任何细节。话虽如此：

通常，在命令式、过程式和函数式编程语言中（可能还有其他一些范式），调用函数将阻塞，直到该函数完成，并将函数的结果传递给调用者。这通常是一种很好的做事方式，但是在某些情况下，我们可能会有一些要求，使其成为不太可行的作案手法。

对于长时间运行的操作，我们可能不想长时间阻塞调用者。根据我们所处的环境，调用者可能无法生成另一个线程，或者可能的线程数量可能太少而无法容纳所需的并行调用数量，因此以这种同步方式执行长时间运行的操作会带来非常糟糕的体验。具有单线程模型和频繁调用服务器的 JavaScript 就是一个典型的例子。

所以回调的基本思想是，调用者不是在实际处理完成时返回被调用函数，而是传入一个回调对象（在 OOP 中，在其他范例中类似的东西，例如回调函数，通常是匿名的，用于函数式编程）。被调用的函数将立即返回，释放调用线程来做其他事情。当长时间运行的进程完成时，回调将被调用，调用者可以在那里处理从长时间运行的进程中给出的结果。

这个模式可以概括一下，所以不仅会在处理结束时调用回调，而且还会*在*处理过程中定期调用，提供某种状态更新，因此调用者可以例如向用户显示一些反馈（状态栏，预计完成时间，...）。另一个常见的添加是调用者在处理任务时取消任务的方法。

这是一般原则。也许更博学的人可以详细说明这如何适用于 R 以及 R 与此一般描述的不同之处。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-13T18:22:28.317

可以在[此处](http://developer.r-project.org/TaskHandlers.pdf)找到详细信息和示例。

基本思想不处理递归，而是为发出到 R 命令行的每个顶级命令调用一个（或多个函数）。

它的一个用途是在 TeachingDemos 包中，`txtStart`相关函数使用任务回调将每个命令的副本及其结果输出保存到外部文件，从而创建交互式会话的副本。

# ios - 无法使用 Facebook SDK 3.0 上传 iOS 应用程序，因为引用了非公共选择器

> ID：11936453
> 
> 赞同：1
> 
> 时间：2012-08-13T14:33:53.710
> 
> 标签：ios, facebook, sdk

我无法上传链接到 Facebook SDK 3.0 的应用程序。它被这种误报 (?) 私有 API 使用拒绝：

```
The app references non-public selectors in <appname> setAttribution: 
```

我认为它与 facebook sdk 框架有关：我在框架的二进制文件[http://imgur.com/7KN2I中找到了这个参考](http://imgur.com/7KN2I)

我没有使用过这种方法，FB.framework 是我的应用程序中唯一的第三方链接框架。

任何的想法？

**我刚刚尝试删除 FacebookSDK.framework 和所有引用的代码，它工作正常......所以我想这是 setAttribution 的问题：调用该代码中的某处。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-15T03:42:56.937

我今天也遇到了这个问题，但我在[这里](https://stackoverflow.com/questions/14448056/the-app-references-non-public-selector-in-id-facebook-sdk-ios)找到了一个很好的解决方案。看看它是否也适合你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T09:56:40.983

我今天重试上传，现在一切正常。很可能苹果已经修复了一些问题。

# sql-server - 是否可以在同一条目中包含基于其他列的值 SELECT 列？

> ID：11936461
> 
> 赞同：1
> 
> 时间：2012-08-13T14:34:19.933
> 
> 标签：sql-server, tsql

在标题上道歉，不确定我能否轻松/很好地解释这一点。我继承了一份从表格运行的报告 (StockMovements)。此表包含产品编号、机芯类型和数量（其中，这三个是重要值）。该报告使用 ProductMaster 表，并为每个产品编号尝试按产品分组，然后为每个移动类型设置一列，汇总所有匹配的条目。目前它正在做这样的事情：

```
SELECT PM.ProductNumber,
    (SELECT SUM(Quantity) FROM StockMovements WHERE MovementType='StockIn' AND ProductNumber=PM.ProductNumber) AS [StockIn],
    (SELECT SUM(Quantity) FROM StockMovements WHERE MovementType='StockOut' AND ProductNumber=PM.ProductNumber) AS [StockOut],
    (SELECT SUM(Quantity) FROM StockMovements WHERE MovementType='ClosingStock' AND ProductNumber=PM.ProductNumber) AS [ClosingStock]
FROM ProductMaster AS PM
GROUP BY PM.ProductNumber 
```

这正在扼杀系统，因为 StockMovements 是一个巨大的表，正如您所看到的，它正在对每种产品和每种运动类型进行新的查找。我正在尝试修改存储过程以从按 ProductNumber 分组的 StockMovements 中驱动 SELECT，但我正在努力了解如何根据 MovementType 对每个不同的列求和值。我喜欢的是这样的：

```
SELECT ProductNumber,
    SUM(Quantity) WHERE MovementType='StockIn',
    SUM(Quantity) WHERE MovementType='StockOut',
    SUM(Quantity) WHERE MovementType='ClosingStock'
FROM StockMovement
GROUP BY ProductNumber 
```

我非常愿意重写整个这一切，并把它从最有意义的地方赶走，我只是在努力寻找一种更好的方法（请告诉我这很简单，我也刚刚开始这样做长）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T14:39:10.750

关闭。

```
SELECT ProductNumber,
    SUM(CASE WHEN MovementType='StockIn' THEN Quantity END),
    SUM(CASE WHEN MovementType='StockOut' THEN Quantity END),
    SUM(CASE WHEN MovementType='ClosingStock' THEN Quantity END)
FROM StockMovement
GROUP BY ProductNumber 
```

如果还有其他运动类型，您可能需要考虑添加一个`WHERE`子句来限制您感兴趣的 3 种类型。

如果某些产品可能没有移动类型的行，您可能需要将其包装`SUM()`在 a 中`COALESCE()`：

```
COALESCE(SUM(CASE WHEN MovementType='StockIn' THEN Quantity END),0) 
```

给出一个更好的总数。

# grails - 基于用户与对象的关系的 Grails 访问控制和过滤结果

> ID：11936463
> 
> 赞同：1
> 
> 时间：2012-08-13T14:34:27.877
> 
> 标签：grails, hibernate-filters

我所追求的是相当简单的（概念上）：

1.  一种定义用户访问对象的方法
2.  一种基于各种条件（与父母的关系等）过滤访问的机制

我正在探索 Hibernate Filter 插件和自定义过滤器的组合来实现这一点，我正在取得一些进展（还没有完全工作），但我想知道是否有更好的方法。Hibernate Filter 方法看起来很棒，因为我们可以在域级别定义这些基于条件的过滤器，并通过自定义过滤器在运行时启用它们。这看起来是个好方法吗？

期待任何指导或想法。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T17:35:17.403

[Spring Security](http://grails.org/plugin/spring-security-core/)提供了一个过滤器链和**许多**工具来维护用户、用户访问、权限，以及[OpenID](http://grails.org/plugin/spring-security-openid)、[Facebook](http://grails.org/plugin/spring-security-facebook)、[LDAP](http://grails.org/plugin/spring-security-ldap)的插件......

我之前一直[想知道这一点](https://stackoverflow.com/questions/7717250/how-does-grails-handle-security-and-why-should-i-use-a-plugin)，现在我确信就安全性而言，最好使用众所周知的实现，而不是自己动手。*尤其是*在 Java EE 世界中，事情比应有的复杂得多（但那是另一回事了）。

Spring Security 提供了一个方便的[教程](http://blog.springsource.com/2010/08/11/simplified-spring-security-with-grails/)、[大量的文档](http://grails-plugins.github.com/grails-spring-security-core/docs/manual/)，甚至还有一个 Grails 2.0[截屏视频](http://www.bobbywarner.com/2012/01/05/jump-into-grails-2-0/)，所以您没有理由不去看看！

# django - 从数据库值填充的 Django ChoiceField

> ID：11936470
> 
> 赞同：17
> 
> 时间：2012-08-13T14:34:48.827
> 
> 标签：django, choicefield

我在使用 ChoiceField 在数据库中创建值的下拉列表时遇到问题。这是代码片段

```
from django import forms
from testplatform.models import ServiceOffering

class ContactForm(forms.Form):

    subject = forms.ChoiceField(queryset=ServiceOffering.objects.all())
    #subject = forms.ModelMultipleChoiceField(queryset=ServiceOffering.objects.all()) 
```

#subject.... 行有效，但是当我使用 ChoiceField(queryset....) 行时，出现以下错误。

```
__init__() got an unexpected keyword argument 'queryset' 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-13T14:35:47.087

`ChoiceField`没有查询集。您正在寻找`ModelChoiceField`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-04-16T07:55:10.277

如果您想从数据库中填充下拉列表，我建议您将单个对象中的所有值从 views.py 传递到您的模板。您可以这样做： 1] 从数据库中获取所有值：

```
objectlist = ModelName.objects.all() 
```

如果您想在下拉列表中排序列表，请执行以下操作：

```
objectlist = ModelName.objects.all().order_by('fieldname') 
```

如果您想要独特的列表，请执行以下操作：

```
objectlist = ModelName.objects.distinct('fieldname') 
```

2]通过这个渲染这个'objectlist'与模板

```
return render(request, 'template.html', {'objectlist': objectlist}) 
```

3] 在模板中使用选择标签，并在用户 for 循环中迭代对象列表。

```
<select>

{% for element in objectlist %}

<option value={{ element.id }}>{{ element.name }}

     </select> 
```

**选项标签中的值取决于您需要在 API 中处理的内容**

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-13T14:45:52.150

在此处使用**ModelChoiceField** [链接](https://docs.djangoproject.com/en/dev/ref/forms/fields/#modelchoicefield)

**ChoiceField**不支持查询集

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-05-20T11:42:25.387

view.py :- 这是我的 view.py 文件。并创建以下代码。

```
def add_customer(request):
    objectlist = Vehicle.objects.values('brand_name').distinct().order_by('brand_name')
    if request.method == 'POST':
        form = CustomerForm(request.POST)
        if form.is_valid():
            form.save()
            return redirect('/show-customers')
    else:
        form = CustomerForm()
    return render(request, 'add-customer.html', {'form':form, 'objectlist':objectlist}) 
```

客户.html

```
<select name="prefer_car_model" id="id_prefer_car_model" required>
                <option value="0" selected disabled> Select Car model </option>
                {% for obj in objectlist %}
                <option value="{{ obj.brand_name }}">{{ obj.brand_name }} </option>
                {% endfor %}
            </select> 
```

***输出***

[![VMS - 车辆品牌名称列表](../Images/a53818a5cf7c692265869f3efeb563e8.png)](https://i.stack.imgur.com/wobCP.jpg)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-07T20:21:25.010

在 Django 2+ 中，您可以使用“选择”而不是“查询集”

# .net - 将 FullTrust 授予 Visual Studio 2012 和 .Net 4.0 的 UNC 共享

> ID：11936471
> 
> 赞同：6
> 
> 时间：2012-08-13T14:34:49.140
> 
> 标签：.net, visual-studio, .net-4.0, visual-studio-2012, unc

每次我尝试打开位于 UNC 共享上的解决方案时，我都会收到以下对话框：

![在此处输入图像描述](../Images/d112243c388313b2bbc24eba2b7e9f05.png)

我试过使用Hanselman 在[这里](http://www.hanselman.com/blog/CommentView.aspx?guid=c2eae5a7-1ad7-4828-b363-e6fbb4866335#commentstart)`caspol.exe`谈到的实用程序，但它似乎不起作用。至少不适用于在 Visual Studio 2012 中运行的 .Net 4 项目。使用相同的参数运行 .NET 4 版本的 caspol 我收到以下消息：

```
WARNING: The .NET Framework does not apply CAS policy by default. Any settings
shown or modified by CasPol will only affect applications that opt into using
CAS policy.

Please see http://go.microsoft.com/fwlink/?LinkId=131738 for more information. 
```

我点击了那个链接，但对我来说似乎没有任何意义。

为了提供一些关于我正在做的事情的背景信息，我在我的 Mac 上将 Windows 7 作为 VM（通过 VirtualBox）运行。我在我的 Mac 上设置了一个 SMB 网络共享，我可以从我的 VM 成功连接到它。但是，尝试加载解决方案不断给我这个错误。我知道我可以“取消选中该框”并加载所有内容，但我想知道如何完全信任该位置。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-13T13:06:03.250

您可以在“工具>选项>项目和解决方案>项目位置不受信任时警告用户”中禁用此功能吗？这个设置实际上在 VS 2010 中被[破坏](http://connect.microsoft.com/VisualStudio/feedback/details/604282/trusting-network-shares-in-visual-studio-2010-net-4-0)了，但它现在被指示为在 2012 年修复。

# c# - 连接网络上其他计算机的 SQL 服务器的 SQL 服务器连接字符串是什么？

> ID：11936474
> 
> 赞同：0
> 
> 时间：2012-08-13T14:34:59.277
> 
> 标签：c#, sql-server, connection-string

我有连接到 SQL Server 2008 并使用此连接字符串的 ac# 程序：

```
"server = HAMED-PC;database = museum ; integrated security = true"; 
```

我想将此程序复制到另一个程序并连接到网络上的此 SQL 服务器。那么连接字符串应该是什么？

SQL server 所在的 PC 有这个 IP `192.168.1.11`。
我已经尝试了很多但没有成功。

例如我试过

```
 "server = 192.168.1.11;database = museum ; integrated security = true"; 
```

但它没有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T14:46:15.643

默认情况下安装 SQL Server express 并关闭网络访问。但是，您可以将其打开。

这是[2005](http://msdn.microsoft.com/en-us/library/ms165647%28v=sql.90%29.aspx)和[2008](http://kristofmattei.be/2009/10/25/sql-server-2008-express-edition-access-over-network/)的方法。

如果 HAMED-PC 有防火墙，则需要允许 tcp 端口 1433。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T14:52:58.507

1.  您应该将“HAMED-PC”更改为其他 PC 可见的 IP 地址或 DNS 名称。
2.  如果您的 PC 不在域中 - 您应该打开简单的 SQL Server 身份验证 ( [http://msdn.microsoft.com/en-us/library/ms188670(v=sql.90).aspx](http://msdn.microsoft.com/en-us/library/ms188670%28v=sql.90%29.aspx) )。创建一个新的 SQL Server 用户，为要在外部 PC 上使用的数据库添加正确的读写权限（我猜是博物馆）。并将连接字符串“integrated security = true”更改为“User Id=username; Password=password;”
3.  打开 HTTP 访问并检查 Windows 防火墙是否不会阻止为远程 HTTP 连接设置的端口（其他答案中有如何执行此操作的链接）。

# symfony - Symfony2 - 安装 TwitterOAuth 库

> ID：11936475
> 
> 赞同：1
> 
> 时间：2012-08-13T14:35:00.777
> 
> 标签：symfony, twitter-oauth

我正在尝试在不使用 FOSTwitterBundle的情况下安装[Abraham 的 twitteroauth 库。](https://github.com/abraham/twitteroauth)我想通过库直接使用 API。

我的问题是该库没有分配命名空间。我尝试按照本[教程](http://www.kiwwito.com/article/add-third-party-libraries-to-symfony-2)进行操作并达到此配置：

```
# app/autoload.php
$loader->registerPrefixes(array(
    // ...
    'TwitterOAuth_'    => __DIR__.'/../vendor/twitteroauth/lib',
));

# vendor/twitteroauth/lib/TwitterOAuth/TwitterOAuth_TwitterOAuth.php
require_once __DIR__.'/src/twitteroauth/twitteroauth.php';
class TwitterOAuth_TwitterOAuth extends TwitterOAuth
{
} 
```

在我的控制器中：

```
$api = new \TwitterOAuth_TwitterOAuth('asd','asd'); 
```

我仍然得到：

```
Fatal error: Class 'TwitterOAuth_TwitterOAuth' not found. 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T14:42:23.363

我认为您通往 lib 的路径是错误的。

根据您提供的链接，Geshi 是：

```
# vendor/geshi/lib/Geshi/Geshi.php 
```

为了：

```
$geshi = new \Geshi_Geshi (); 
```

所以你应该使用：

```
vendor/twitteroauth/lib/TwitterOAuth/TwitterOAuth.php 
```

代替

```
vendor/twitteroauth/lib/TwitterOAuth/TwitterOAuth_TwitterOAuth.php 
```

# java - 如何在Java中逐行传递args？

> ID：11936485
> 
> 赞同：0
> 
> 时间：2012-08-13T14:35:37.517
> 
> 标签：java, string, input, line, args

`Public static void main(String[] args)`只接受输入作为一行，对吗？我想逐行传递参数。请帮我。我该死的肯定有什么办法。我的条件是“程序应该逐行接受控制台上的输入”。请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T14:37:37.513

如果您想传入多行参数，请将您的信息写入 txt 文件，然后在程序中使用 BufferedReader 解析该文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T14:37:55.083

无法从应用程序内部控制传递给应用程序的参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T14:53:09.323

您可以像这样从控制台输入数据：

```
BufferedReader buffReader = new BufferedReader(new InputStreamReader(System.in));       
...
String input = buffReader.readLine(); 
```

# android - Android - 三星 Galaxy S3 图像加载

> ID：11936491
> 
> 赞同：1
> 
> 时间：2012-08-13T14:35:55.807
> 
> 标签：android

我有一个 Android 应用程序，几乎可以在所有 Android 设备上正常运行。最近，我在三星 Galaxy S3 上测试了这个应用程序，它开始在我身上崩溃——它时不时地随机耗尽内存。

当应用程序加载时，它会加载一个启动图像和一个背景图像（大约 100k 大小）。当我在应用程序加载时删除这些图像时，应用程序工作正常。但是当我把它们放在那里时，它会在应用程序加载后随机耗尽内存。我检查了资源目录，该应用程序仅在 Drawable 文件夹中有图像，而不是在任何 drawable-hdpi 或 ldpi 或 mdpi 文件夹中。那么设备是否试图转换这些图像以适应手机的分辨率并且它正在使用所有内存？我们有 hdpi、ldpi 和 mdpi 文件夹的标准图像尺寸吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T20:14:22.973

我的应用程序在 Galaxy S3 上失败的原因是因为 Galaxy S3 的分辨率比我测试我的应用程序的任何其他手机都要高得多。因此，它为位图分配的内存要高得多，这会导致应用程序在内存不足时崩溃。为了解决这个问题，我在 onDestroy 方法中简单地从视图中删除了位图，它解决了这个问题。

# php - PHP 在 Foreach 循环中是否有“内置”迭代器？

> ID：11936492
> 
> 赞同：14
> 
> 时间：2012-08-13T14:36:01.150
> 
> 标签：php, foreach, iterator, phpexcel

我正在使用 foreach 循环来遍历 REQUEST 数组，因为我希望有一种简单的方法来利用 REQUEST 数组的键和值。

但是，我还想要一个循环运行次数的数字索引，因为我正在用 PHPExcel 编写电子表格，并且我想使用该`SetCellValue`函数。我在想这样的事情：

```
foreach( $_REQUEST as $key => $value){
    $prettyKeys = ucwords(preg_replace($patt_underscore," ",preg_replace($patt_CC,"_",$key)));
    $prettyVals = ucwords(preg_replace($patt_underscore," ",preg_replace($patt_CC,"_",$value)));
    // Replace CamelCase with Underscores, then replace the underscores with spaces and then capitalize string
    // "example_badUsageOfWhatever" ==> "Example Bad Usage Of Whatever"

    $myExcelSheet->getActiveSheet()->SetCellValue( "A". $built-in-foreach-loop-numerical-index ,$prettyKeys);
    $myExcelSheet->getActiveSheet()->SetCellValue( "B". $built-in-foreach-loop-numerical-index ,$prettyVals);
} 
```

我知道我可以很容易地实现类似`$c = 0`foreach 的东西，然后每次循环运行时增加它，但是有更干净的东西吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T14:39:51.803

PHP 的 foreach 没有内置此功能（[根据手册](http://php.net/manual/en/control-structures.foreach.php)）。使用[for 循环](http://www.php.net/manual/en/control-structures.for.php)来拥有一个迭代器或自己实现它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-13T14:39:10.950

该`for`循环将为您提供一个自动计数器，但无法循环通过您的`$_REQUEST`关联数组。该`foreach`循环将让您循环通过，但没有内置计数器。这是一个权衡，但至少它是一个非常易于管理的（只需要 2 行代码来构建计数器）！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T14:48:32.000

使用[SPL 迭代器类](http://www.php.net/manual/en/spl.iterators.php)。我敢肯定那里有一些东西可以用来做这件事。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T15:22:11.540

不，没有内置的迭代器数字索引。不过，您可以通过其他方式解决此问题。

最明显的方法是使用一个简单的`for`循环：

```
for ($i = 0, $numFoo = count($foo); $i < $numFoo; ++$i) {
    // ...
} 
```

您还可以使用`foreach`计数器变量：

```
$i = 0;
foreach ($foo as $key => $value) {
    // ...
    ++$i;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-07-28T18:29:13.437

## 使用 For 循环

你绝对可以用 for 循环来做到这一点，它只是有点难看：

```
reset($array);
for ($i=0; $i<count($array); $i++) {
    // $i is your counter
    // Extract current key and value
    list($key, $value) = array(key($array), current($array));

    // ...body of the loop...

    // Move to the next array element
    next($array);
} 
```

* * *

## 扩展 ArrayIterator

我的首选方法是扩展[ArrayIterator](http://www.php.net/manual/en/class.arrayiterator.php)。添加一个内部计数器，然后覆盖 next() 和 rewind() 以更新计数器。计数器给出当前数组元素从 0 开始的键：

```
class MyArrayIterator extends ArrayIterator
{
    private $numericKey = 0;

    public function getNumericKey()
    {
        return $this->numericKey;
    }

    public function next()
    {
        $this->numericKey++;
        parent::next();
    }

    public function rewind()
    {
        $this->numericKey = 0;
        parent::rewind();
    }
}

// Example:
$it = new MyArrayIterator(array(
    'string key' =>'string value',
    1 =>'Numeric key value',
));
echo '<pre>';
foreach ($it as $key =>$value) {
    print_r(array(
        'numericKey' =>$it->getNumericKey(),
        'key' =>$key,
        'value' =>$value,
    ));
}

// Output:
// Array
// (
//     [numericKey] => 0
//     [key] => string key
//     [value] => string value
// )
// Array
// (
//     [numericKey] => 1
//     [key] => 1
//     [value] => Numeric key value
// ) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-13T14:45:40.730

您的问题也在这里得到解答：[如何在不使用“计数器”变量的情况下找出 PHP 中 foreach 构造循环的次数？](https://stackoverflow.com/questions/6699043/how-can-i-find-out-how-many-times-a-foreach-construct-loops-in-php-without-usin)

很快，没有。没有更简单的方法了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-05-12T15:06:01.760

您可以获取 $_REQUEST 数组的每个键的索引：

`$req_index= array_flip (array_keys($_REQUEST));`

现在您通过 获得了当前元素的数字索引，`$req_index[$key]`它还给出了循环的迭代次数：

```
foreach($_REQUEST as $key => $value){
    $prettyKeys = ucwords(preg_replace($patt_underscore," ",preg_replace($patt_CC,"_",$key)));
    $prettyVals = ucwords(preg_replace($patt_underscore," ",preg_replace($patt_CC,"_",$value)));
    // Replace CamelCase with Underscores, then replace the underscores with spaces and then capitalize string
    // "example_badUsageOfWhatever" ==> "Example Bad Usage Of Whatever"

    //THE NUMERICAL INDEX IS $req_index[$key]
    $myExcelSheet->getActiveSheet()->SetCellValue( "A". $req_index[$key], $prettyKeys);
    $myExcelSheet->getActiveSheet()->SetCellValue( "B". $req_index[$key], $prettyVals);
} 
```

# c# - 项目完成后实施 TDD 有什么意义吗？

> ID：11936494
> 
> 赞同：3
> 
> 时间：2012-08-13T14:36:07.020
> 
> 标签：c#, tdd

我一直在做的项目快完成了，在项目开始之前我从来没有机会学习 TDD，现在项目几乎完成了设置测试有什么意义？当然，每周都会有很多插件和更多的变化，所以还没有完全完成。

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-13T14:39:01.217

您可以在最后添加单元测试，它们会很有用，但这不是 TDD。

TDD 是测试驱动开发，这意味着您的测试指导开发过程。它们不仅要检查您的逻辑是否失败，还要帮助您设计更好的代码，这就是为什么需要首先创建它们的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T14:38:00.487

把事情做对永远不会太晚。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T14:41:09.710

在这种情况下，我建议在符合以下条件之一的代码区域中实施测试：

*   它们对程序的运行*至关重要*
*   如果他们打破，没有人会立即注意到

后者尤为重要。没有什么比在系统出现故障 5 个月后发现系统在没有它的情况下一直一瘸一拐的情况更糟糕的了。有些事情需要变得更加明显，测试可能是这样做的好方法。

显然，最好在任何地方进行测试，但这可能既不符合您的日程安排的需要，又在政治上很困难。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T14:38:07.077

是的。进行单元测试的优点之一是，您可以判断过去工作的某些内容何时因不相关的代码更改而中断。

我以前经历过这种情况，当您向已经（看似）完成的项目添加单元测试时，这似乎是一个毫无意义的练习，但事实并非如此：

1.  我们通过这种方式发现了很多小缺陷。否则直到后来才被发现的缺陷，并且可能会在生产中出现
2.  该项目当时似乎已经完成，但随后又进行了 6 个月，客户要求进行更改，结果证明单元测试非常有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T15:01:15.753

现在，您将面临一项艰巨的任务，即尝试将测试重新安装到遗留代码中。网上有很多文章和很多方法来实现它（GoldenMaster，它非常适合 WCF-y 的东西）。我会说，如果您希望支持软件/添加功能，那么值得投资至少实施一些测试（尤其是在关键区域周围）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-13T14:38:25.707

测试总是值得的。您现在可能会执行一些测试，并发现您的代码中有一些主要错误。即使您现在只进行一些基本测试，然后逐渐建立它们。然后对任何新位使用 TDD。

它对于发现您所做的任何更改是否破坏了代码的其他部分也很有用。

# java - java.net.ConnectException：系统缺少足够的缓冲区空间或因为队列已满

> ID：11936495
> 
> 赞同：0
> 
> 时间：2012-08-13T14:36:07.750
> 
> 标签：java, windows, sockets

我正在尝试通过以下代码 ping 各种 IP 来检查连接性。

```
ipAdd = InetAddress.getByName(ipAddress);
            boolean isConnected = ipAdd.isReachable(3000); 
```

但我得到这个错误。

```
java.net.ConnectException: An operation on a socket could not be performed because the system lacked sufficient buffer space or because a queue was full 
```

大约有 1000 个线程同时执行此过程。我曾考虑将这些 IP 保留在队列中。但为此我想知道我可以使用的最大线程数。有没有办法找出缓冲区空间，以便我可以计算出将同时触发运行上述代码的线程数。除了排队方法之外，我将不胜感激任何其他解决方法/解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:41:05.907

我猜这个异常的发生是因为你已经超出了你的应用程序可以使用的端口限制。
你关闭你的连接吗？

# jstree - JsTree contextmenu 回调函数未触发

> ID：11936498
> 
> 赞同：2
> 
> 时间：2012-08-13T14:36:21.883
> 
> 标签：jstree

我正在使用 jstree 库。一个非常好的图书馆，但我遇到了一个问题。上下文菜单的回调不起作用。

我做了一个小的工作示例 - 当您添加/删除/重命名节点时它应该发出警报，但没有任何反应..

有谁知道为什么不，解决方案是什么？

您可以在线查看工作 - 不工作示例：http: [//www.leermetstrips.nl/Content/tree.htm](http://www.leermetstrips.nl/Content/tree.htm)

或者在这里：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>JS tree example</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script src="http://code.jquery.com/jquery-1.8.0.js"></script>      
    <script src="http://cachedcommons.org/cache/jquery-jstree/1.0.0/javascripts/jquery-jstree.js" type="text/javascript"> </script>    
<script type="text/javascript">
$().ready( function() {
    var data = [{"data":"Root node","children":[{"data":"node one","children":[],"metadata":[{"action":"action12"}]}],"metadata":[{"action":"action11"}]}];
    $('#tree').jstree(
        {
            json_data: { data: data },
            plugins: ["themes", "json_data", "ui", "contextmenu", "crrm"],
            // TODO: this does not work, why?
            callback: {
                oncreate: function (NODE, REF_NODE, TYPE, TREE_OBJ, RB) {
                    alert('oncreate');
                },
                onrename: function (NODE, LANG, TREE_OBJ, RB) {
                    alert('onrename');
                },
                ondelete: function (NODE, TREE_OBJ, RB) {
                    alert('ondelete');
                }
            }
        }
        );
});
</script>
</head>
<body>
        <h3>JS tree example</h3>
        <p>When adding, or deleting new nodes, there should be an alert. But there is none. Why?</p>
        <div id="tree" style="border:1px solid;"></div> 
        <p>Click on the tree with your right mouse button to add, rename or delete NEW tree nodes.</p>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T13:53:56.020

jstree 核心功能中没有`callback`属性。所以删除这个：

```
 callback: {
        oncreate: function (NODE, REF_NODE, TYPE, TREE_OBJ, RB) {
            alert('oncreate');
        },
        onrename: function (NODE, LANG, TREE_OBJ, RB) {
            alert('onrename');
        },
        ondelete: function (NODE, TREE_OBJ, RB) {
            alert('ondelete');
        }
    } 
```

您需要以这种方式在 jstree 对象之外绑定 jstree 事件：

```
$('#tree').bind('create.jstree',function (node, ref) {
  alert('oncreate');
});

$('#tree').bind('rename.jstree',function (node, ref) {
  alert('onrename');
});

$('#tree').bind('remove.jstree',function (node, ref) {
  alert('ondelete');
}); 
```

# android - 如何静音/控制 WebView/Flash 音量？

> ID：11936502
> 
> 赞同：1
> 
> 时间：2012-08-13T14:36:32.960
> 
> 标签：android, flash, android-webview

我在 webview 中播放 Flash。是否可以将动画声音静音？

我的活动也可以播放音乐文件，所以我设置：

```
this.setVolumeControlStream(AudioManager.STREAM_MUSIC); 
```

有什么关系吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T15:06:32.400

我使用 setStreamVolume 而不是 setStreamMute，以便在取消音量 = 0 时能够将音量设置为最大值

```
 /**
 * Set sound state
 * @param soundOn new sound state
 */
private void setSoundState(boolean soundOn) {
    // set sound param
    mGlobalData.SoundOn = soundOn;
    AudioManager audioManager = (AudioManager) this.getSystemService(Context.AUDIO_SERVICE);

    if (soundOn) {
        // restore old volume
        int newVoume = mGlobalData.oldSoundVolume;

        if (newVoume == 0)
            newVoume = audioManager.getStreamMaxVolume(AudioManager.STREAM_MUSIC);

        mSoundIcon.setImageResource(R.drawable.sound_on);
        audioManager.setStreamVolume(AudioManager.STREAM_MUSIC,newVoume, 0);

        //mMediaPlayer.setVolume(0, 1);
    } else {
        mSoundIcon.setImageResource(R.drawable.sound_off);
        mGlobalData.oldSoundVolume = audioManager.getStreamVolume(AudioManager.STREAM_MUSIC);
        audioManager.setStreamVolume(AudioManager.STREAM_MUSIC,0, 0);
        //mMediaPlayer.setVolume(0, 0);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T14:40:01.227

如果您想静音设备任何流的声音，请使用

```
public void setStreamMute (int streamType, boolean state) 
```

例子 ：

```
myAudioManager.setStreamMute(AudioManager.STREAM_MUSIC, true); 
```

# vb.net - 在 Visual Basic 中处理字符串

> ID：11936503
> 
> 赞同：0
> 
> 时间：2012-08-13T14:36:40.947
> 
> 标签：vb.net, string, vb.net-2010

我知道字符串只是一组字符。我已经使用文本框在 Visual Basic 中输入了一个字符串。

```
message = textbox1.text 
```

我现在可以去更改字符串中字符的位置吗？

```
"Dogs" //string entered 
"odsg" //that must be output in textbox2
textbox2.text = Encrypted 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T14:39:06.953

> 我现在可以去更改字符串中字符的位置吗？

不。.NET 中的字符串是不可变的——它们无法更改。为了在 VB 中修改字符串，您调用一个函数，该函数根据旧字符串的修改内容创建一个*新*字符串。这就是所有[字符串方法](http://msdn.microsoft.com/en-us/library/system.string_methods.aspx)正在做的事情。

不过，您的加密功能应该做什么并不完全清楚。它似乎置换了字母位置，但它使用什么模式？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T15:56:37.330

我假设您正在尝试创建一种类似于 MS Word 使用的自动更正功能。我会使用字典来存储更正。错误的词将用作键，而正确的词将用作值

```
Dim dict = new Dictionary(Of String, String)

dict.Add("dogs", "odsg")
dict.Add("fiel", "file")
... 
```

设置字典后

```
Dim input As String = textbox2.Text
Dim corrected As String

If dict.TryGetValue(LCase(input), corrected) Then
    textbox2.Text = corrected
End If 
```

# php - require_once 不能在 MacBook Pro（Mountain Lion）上工作，但可以在所有其他平台上工作

> ID：11936504
> 
> 赞同：0
> 
> 时间：2012-08-13T14:36:41.603
> 
> 标签：php, macos, apache

我有一个奇怪的问题，我在我的 MacBook Pro 上尝试了 MAMP 和 PhP / Apache 的标准安装，但总是出现这个错误

> 警告：require_once（../interfaces/class-ai1ec-get-data-from-cache.php）：无法打开流：/usr/local/zend/apache2/htdocs/wordpress/wp-中没有这样的文件或目录第 3 行的 content/plugins/all-in-one-event-calendar-premium/app/strategies/get_data_from_cache/class-ai1ec-get-data-from-db-cache.php 致命错误：require_once()：需要打开失败'../interfaces/class-ai1ec-get-data-from-cache.php' (include_path='.:/usr/local/zend/share/ZendFramework/library:/usr/local/zend/share/pear' ) 在 /usr/local/zend/apache2/htdocs/wordpress/wp-content/plugins/all-in-one-event-calendar-premium/app/strategies/get_data_from_cache/class-ai1ec-get-data-from-db -cache.php 在第 3 行

从这个电话

```
require_once ( '/../interfaces/class-ai1ec-get-data-from-cache.php' ); 
```

我是 Mac 的新手，所以它一定很愚蠢，但我被阻止了。

当然我尝试了每个版本

```
require_once ( '../interfaces/class-ai1ec-get-data-from-cache.php' );

require_once ( './../interfaces/class-ai1ec-get-data-from-cache.php' ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:52:04.497

这没有任何意义：

```
require_once ( '/../interfaces/class-ai1ec-get-data-from-cache.php' ); 
```

您从根目录开始，然后尝试从那里向上一个目录。

尝试输入您的实际完整文件路径，看看是否有效。

# css - CSS：将子项与具有相同类的父项对齐

> ID：11936505
> 
> 赞同：1
> 
> 时间：2012-08-13T14:36:48.967
> 
> 标签：css, html, alignment

这是一个基本场景（我这样做不是为了专门对齐文本，但 div 中有很多其他内容，所以不要告诉我这不是对齐文本的最合适方法：D 我更感兴趣在这里的原则）；

```
<div id="1" class="mydivclass">
  <p>The first div</p>
  <div id="2" class="mydivclass">
    <p>The second div</p>
    <div id="3" class="mydivclass">
      <p>The third div</p>
    </div>
  </div>
</div> 
```

使用 css，我可以使用同一个类来制作带有子 div（div 内的 div）的 div，以相对于它的父级将它们定位在页面上吗？所以我希望上面的输出看起来像这样：

```
The first div
  The second div
    The third div 
```

我想知道我是否可以，如果可以，如何使用 CSS 实现这一目标？例如，您是否可以使用类似以下的方法将每个子 div 比父 div 多 10 个像素，以得到上述结果？

```
.mydivclass {
  padding-left: 10px;
} 
```

因此，通过在每个 div 上嵌套相同的 CSS 类，它们会慢慢增加它们的水平对齐方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:42:22.053

你的意思是`position:relative;`这样的组合`left`吗？[http://jsfiddle.net/EUTPB/](http://jsfiddle.net/EUTPB/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T14:45:17.460

不是不使用表达式，只有 IE 支持。要做你想做的事，你必须使用`position:relative`和`left`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T14:46:00.550

这是一个严肃的问题吗？显然你可以，如果你真的想试试的话。这是您的实际代码：[https ://dl.dropbox.com/u/73603348/nesting.html](https://dl.dropbox.com/u/73603348/nesting.html)

# c# - 从 Byte[] 中查找未序列化的类型

> ID：11936510
> 
> 赞同：2
> 
> 时间：2012-08-13T14:37:15.710
> 
> 标签：c#, .net, active-directory

我正在从 AD/LDAP 导入一些数据，并且`byte[]`在`ResultPropertyValueCollection`对象中返回的二进制属性存在一些问题。

最简单的示例是 objectGUID 属性。我需要它在适当的 GUID 对象中，而不是`byte[]`. 我可以很容易地说`new Guid(myByteArray)`，但如果有其他**不是**GUID 的二进制字段（我猜图像等），这似乎很笨拙。

是否有任何干净整洁的方法可以从 a 获取非序列化类型，`byte[]`而不仅仅是尝试从中创建不同的对象？或者更好：我可以让 LDAP/AD 告诉我它是什么类型的对象吗？我喜欢这个，因为我想要一个可以处理所有属性并将它们正确映射到我自己的系统中的通用导入。

...这可能是一种边缘情况，但如果可以以通用方式做到这一点，那将是完美的。如果没有，我现在可能会坚持尝试捕捉 a `new Guid(myByteArray)`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T14:41:28.613

您应该检查字节数组的长度是否正好为 16 个字节。除此之外，GUID 显然只是一个 16 字节的数组，因此您无法根据任何其他指标对其进行验证。

至于意外反序列化另一个数据类型的字节数组，不幸的是，这些信息通常不与序列化的字节数组一起存储。调用者应该已经知道字节数组是什么，并自己进行转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T14:45:52.647

你可以用一行代码来做到这一点我现在在我们的 LDAP/AD 环境中这样做

```
var sObjectGUID = entry.NativeGuid.ToString(); 
```

请记住，我正在做更多的代码，但基本上我的业务代码中有一个方法，我不能在这里分享，但我正在根据 SamAccount 是否存在进行检查。

```
public static string SamExist( string domain, string userid)
{
} 
```

# c++ - 为什么断点会在 .h 文件中跳来跳去？

> ID：11936514
> 
> 赞同：2
> 
> 时间：2012-08-13T14:37:34.973
> 
> 标签：c++, visual-studio-2008, breakpoints

我正在尝试使用 getter / setter 调试 .h 文件，但在附加到我要调试的进程时，当我在某些方法上放置断点时，IDE 会自动将断点跳转到文件中的单独方法。有谁知道为什么会发生这种情况？

我尝试过的一些事情：

*   重建并链接我正在调试的 .exe
*   删除 .obj 文件，并重新制作包含我要调试的文件的目录
*   检查任务管理器以确保正确的 .exe 正在运行
*   检查 .pdb 和 .exe 文件的时间戳以确保它们（大致）匹配

这不是解决方案范围内的问题；我只是偶尔看到这个。还有什么我可以尝试的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T16:22:34.303

考虑一个 Point 类和一个 Rectangle 类。想象一下，Point 有一个名为 GetX() 的 getter，而 Rectangle 有一个名为 GetLeft() 的 getter。在机器指令级别，这两种方法可能相同，因为它们都返回对象中的第一个 32 位值。

由于代码是相同的，编译器和/或链接器可以通过丢弃方法的一份副本并将所有对丢弃的方法的调用解析为对保留的方法的调用来减小二进制文件的大小。例如，链接器可能会从可执行文件中删除 Rectangle::GetLeft()，并将所有对 Rect::GetLeft() 的调用替换为对 Point::GetX() 的调用。

发生这种情况时，调试器将无法再区分 GetX() 和 GetLeft()。即使调用的是 Rect::GetLeft()，指令指针也在属于 Point::GetX() 的代码范围内。您可以通过查找堆栈以查看实际调用了哪个方法来区分差异，但调试器不会为您执行此操作。

通常，您构建调试版本时禁用优化以避免此类调试混淆。这并不总是可能的。例如，您可能正在调试运行优化二进制文件的客户的故障转储。在这种情况下，您只需了解问题并了解调用上下文即可了解实际情况。

# facebook - Facebook 审核评论不适用于 href 属性

> ID：11936517
> 
> 赞同：1
> 
> 时间：2012-08-13T14:37:52.637
> 
> 标签：facebook, comments, facebook-comments, xfbml

我有一个带有 facebook 评论的页面，这就是问题所在：

当我放置 HREF 属性时，我无法管理/审核评论，当我不放置 HREF 属性时，它会给我以下错误/消息：

> **警告**：此评论插件在兼容模式下运行，但还没有帖子。考虑按照评论插件文档中的建议指定一个明确的“href”，以利用所有插件功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T14:25:45.077

我修好了，我忘记了标题上的 og 和 fb 标签。如果你有同样的问题尝试把

```
<meta property='fb:app_id' content=""/>
<meta property="fb:admins" content=""/>
<meta property="og:url" content="[put current url here]" /> 
```

标签上。

现在你可以使用

```
<fb:comments href="[put current url here]" num_posts="2" width="620"></fb:comments> 
```

在这里[http://developers.facebook.com/tools/debug/og/object](http://developers.facebook.com/tools/debug/og/object)你可以看到 facebook 对你的 url 的看法

# objective-c - iOS 表格视图中的许多单元格

> ID：11936519
> 
> 赞同：0
> 
> 时间：2012-08-13T14:37:56.797
> 
> 标签：objective-c, ios

我在表格视图的大小上遇到了问题，因为我放置了几个单元格，当我显示时，会出现一个滚动，并且他没有滚动到足以看到我的所有单元格，我尝试更改表格视图的高度，但我做不到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:41:14.970

您是否正确实施了此方法？

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)sectio
{
    return 5; // If you have 5 cells.
} 
```

# sql-server-2008 - sql server 报告iis权限不足

> ID：11936520
> 
> 赞同：0
> 
> 时间：2012-08-13T14:37:58.747
> 
> 标签：sql-server-2008, iis

尝试从 Visual Studio 部署我的 sql server iis 报告。

报表服务器在 host_B 上运行，我从 host_A 进行部署。我“知道”我低于错误的原因。

我的问题真的是：

如何获得“报告服务登录”页面？它已经记住了一个没有所需权限的旧用户名/密码。

该报告被部署为没有足够权限的 User_A。如何将报告部署为 User_B？视觉工作室的这个设置在哪里？它显然是从某个地方拿起 user_A 。在此先感谢您的帮助！

错误 1 ​​授予用户“DMS\TSReport”的权限不足以执行此操作。0 0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:45:20.703

您应该尝试以具有将报表部署到报表服务器的足够权限的用户身份打开报表解决方案。尝试右键单击 Visual Studio 图标并选择“运行方式”并提供具有报告服务器权限的用户凭据。

# eclipse - 在 Eclipse 'open type' 中过滤掉我们自己的类型？

> ID：11936524
> 
> 赞同：5
> 
> 时间：2012-08-13T14:38:08.503
> 
> 标签：eclipse

我想知道是否有一种方法可以配置 Eclipse 的“开放类型”搜索工具，以将“我们自己的”源代码（即项目中的源代码）中定义的类型与库中定义的类型分开？我经常想找到一个项目定义的类型，但它被库中的类型海洋淹没了。

一种解决方案是使用源包过滤器将我们所有的类型放在同一个包中；不幸的是，现在这是不可能的。并且打开和关闭它有点困难，通常你*确实*想在所有类型中搜索。

编辑。是的全局文本搜索，但为此目的更慢且更笨拙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T14:42:19.560

也许您想检查首选项对话框：Java > 外观 > 类型过滤器。在那里，您可以为来自外部库的类型设置过滤器。

# vb6 - 以编程方式创建的标签不会右对齐

> ID：11936528
> 
> 赞同：1
> 
> 时间：2012-08-13T14:38:18.567
> 
> 标签：vb6

以编程方式创建标签（即不在设计器中）不会在我的表单上右对齐。

```
Set lblStatus = StatusForm.Controls.Add("VB.Label", "lbl" & xml(Prop, "column"))
With lblStatus
    .Visible = True
    .Caption = Text
    .Alignment = vbRightJustify
    .WordWrap = False
    .AutoSize = True
    .top = Index * (lblStatus.height)
    .left = MaxWidth - Screen.TwipsPerPixelX * 15
    .Width = StatusForm.TextWidth(Text)
End With 
```

我创建了其中三个控件，但它们继续从左侧扩展，而不是从右侧扩展：

![左对齐标签](../Images/25949b02f5016a5ada56dd4815f3c941.png)

理想情况下，我希望这些标签（由 包围`#`）将它们的分号对齐。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T14:41:21.163

由于您设置`AutoSize`为 true，因此宽度设置为文本的精确宽度，不留任何对齐空间。

要在固定宽度内布局文本，请关闭 AutoSize。

# r - 如何防止 reshape() 改变变量名

> ID：11936535
> 
> 赞同：2
> 
> 时间：2012-08-13T14:38:26.140
> 
> 标签：r, reshape

我的`reshape()`功能有些问题。例如，一旦我重塑了形状，它就会将我所有的变量名更改为“value.var 1”。

我用来重塑的代码是：

```
test<- reshape(cdc_city, idvar= "site", timevar="variable", 
               direction="wide", new.row.names=FALSE) 
```

我猜我使用错误的“new.row.names=FALSE”部分。我曾尝试用 FALSE 代替 NULL，但这也没有用。

我的目标是按如下方式转换数据集：

```
site    variable    value
site 1  var 1       4
site 1  var 2       7
site 1  var 3       2
site 1  var 4       6
site 1  var 5       3
site 2  var 1       89
site 2  var 2       43
site 2  var 3       12
site 2  var 4       54
site 2  var 5       23
site 3  var 1       76
site 3  var 2       62
site 3  var 3       13
site 3  var 4       43
site 3  var 5       23 
```

进入这样的数据集：

```
site    var 1    var 2    var 3    var 4    var 5
1       4        7        2        6        3
2       89       43       12       54       23
3       76       62       13       43       23 
```

如果有人知道如何摆脱“价值”。出现在我的变量名的开头，那太好了！或者，如果有更好的代码我可以使用，我也对此非常开放。

谢谢，

提摩太

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T16:05:53.083

对于这样的重塑，`xtabs`也很有用：

```
xtabs(value ~ site + variable, data = cdc_city)
#         variable
# site     var 1 var 2 var 3 var 4 var 5
#   site 1     4     7     2     6     3
#   site 2    89    43    12    54    23
#   site 3    76    62    13    43    23 
```

不过，关于您的问题，我实际上并不认为这是一个“***问题***”。这正是它*应该*如何工作的。

考虑以下场景。您的另一列`data.frame`（我们将其称为“其他”）并且您想要将整个数据集从长到宽重塑。

这是一些示例数据和输出：

```
set.seed(1)
cdc_city$other = sample(1:20, 15, replace=TRUE)
reshape(cdc_city, direction="wide", 
        idvar="site", timevar="variable")
#      site value.var 1 other.var 1 value.var 2 other.var 2 value.var 3
# 1  site 1           4           6           7           8           2
# 6  site 2          89          18          43          19          12
# 11 site 3          76           5          62           4          13
#    other.var 3 value.var 4 other.var 4 value.var 5 other.var 5
# 1           12           6          19           3           5
# 6           14          54          13          23           2
# 11          14          43           8          23          16 
```

在*我*看来，在这种情况下，添加`value`和`other`变量名是必不可少的。

最后，您的`new.row.names`论点在这里毫无用处，因为您对列名而不是行名感到不满。

# 更新

由于我有心情分享替代方案，您可能也有兴趣探索`aggregate`，它的语法也相当容易理解：

```
aggregate(list(var = cdc_city$value), 
          list(site = cdc_city$site), c)
#     site var.1 var.2 var.3 var.4 var.5
# 1 site 1     4     7     2     6     3
# 2 site 2    89    43    12    54    23
# 3 site 3    76    62    13    43    23 
```

如果您使用`aggregate`，您还可以对结果变量的名称进行*一些*控制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T14:55:47.047

我建议你改用这个包——它比内置的更`reshape2`容易使用：`melt``dcast``reshape()`

```
library(reshape2)
dcast(cdc_city, site~variable, mean)
    site var 1 var 2 var 3 var 4 var 5
1 site 1     4     7     2     6     3
2 site 2    89    43    12    54    23
3 site 3    76    62    13    43    23 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-30T23:52:20.503

是的，这可以通过内置的`base::reshape()`.

对于`direction=="wide"`，您可以使用带有参数的列表来重命名重新整形的变量`varying`。正如您所发现的，`reshape` [将生成一个](https://github.com/wch/r-source/blob/35104d51ef86c2572a7efa446f40eec528da3d78/src/library/stats/R/reshape.R#L134-L143)看起来像``v.name`.`times``. [R 文档错误地建议](http://www.astrostatistics.psu.edu/su07/R/html/stats/html/reshape.html)接受`varying`名称向量（它确实适用于`direction=="long"`）。

```
cdc_city <- data.frame(
    site=paste("site", rep(1:3, each=5)),
    variable=paste("var", rep(1:5, 3)), 
    value=c(4,7,2,6,3,89,43,12,54,23,76,62,13,43,23))

#       site variable value
#  1  site 1    var 1     4
#  2  site 1    var 2     7
#  3  site 1    var 3     2
#  4  site 1    var 4     6
#  5  site 1    var 5     3
#  6  site 2    var 1    89
#  7  site 2    var 2    43
#  8  site 2    var 3    12
#  9  site 2    var 4    54
#  10 site 2    var 5    23
#  11 site 3    var 1    76
#  12 site 3    var 2    62
#  13 site 3    var 3    13
#  14 site 3    var 4    43
#  15 site 3    var 5    23

test <- reshape(cdc_city,
    varying=list(c("var 1", "var 2", "var 3", "var 4", "var 5")),
    idvar= "site", timevar="variable", direction="wide")

#       site var 1 var 2 var 3 var 4 var 5
#  1  site 1     4     7     2     6     3
#  6  site 2    89    43    12    54    23
#  11 site 3    76    62    13    43    23 
```

请注意字符串是因素的 data.frames。您可以`varying`直接使用 data.frame 中的一个因子指定

```
reshape( ..., varying=list(as.character(unique(cdc_city$variable))), ...) 
```

# audio - 如何在 Corona 上播放音频？

> ID：11936539
> 
> 赞同：0
> 
> 时间：2012-08-13T14:38:45.350
> 
> 标签：audio, playback, coronasdk

我正在尝试像以前一样播放音频，但现在似乎无法正常工作。这些是我尝试过的代码：

```
 local birdSound =  audio.loadSound("bird.mp3")
  audio.play(birdSound) 
```

它给出了这样的错误：

警告：无法创建音频声音

你能帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T19:52:35.070

1.  不要使用 .mp3。.wav 适用于 iphone 和 android。
2.  确保 .wav 文件在我们的文件夹中。
3.  有时一些声音文件可以在电脑上播放，但不能在模拟器中播放。在这种情况下，请改用其他文件。
4.  如果你真的很喜欢那个 .mp3 文件却找不到 .wav，找一些免费软件来转换它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T00:26:30.203

更改文件的比特率（增加）帮助我解决了问题。感谢 SatheeshJM！

# javascript - javascript 事件更新

> ID：11936545
> 
> 赞同：0
> 
> 时间：2012-08-13T14:38:58.973
> 
> 标签：javascript, jquery-ui, jquery, livequery

我的 ui-autocomplete 应该将 ajax 请求发送到不同的路径。我的脚本在更改选择事件时更改了此路径。但是事件不会更新并向旧网址发送请求。

我试过 live()、on()、livequery()。没有任何效果。

如何更新活动？

我的输入自动完成字段：

```
<input class="specialization_names ui-autocomplete-input" data-autocomplete-source="/specializations"> 
```

我在改变`data-autocomplete-source`

下一条我要参加的活动（由咖啡脚本生成）

```
_ref = $('.specialization_names');
for (_i = 0, _len = _ref.length; _i < _len; _i++) {
  input = _ref[_i];
  $(input).on('focus', function() {
    return $(input).catcomplete({
      source: $(input).data('autocomplete-source')
    });
  });
} 
```

或更改`on()`为`live()`或插件 livequery

此代码在选择时更改 url。

```
var select, _i, _len, _ref;

_ref = $('.resume_scopes');
for (_i = 0, _len = _ref.length; _i < _len; _i++) {
  select = _ref[_i];
  $(select).on('change', function() {
    var scope_id;
    scope_id = $(this).children("option:selected").attr('value');
    return $(this).siblings('.specialization_names').attr("data-autocomplete-source", "/specializations/" + scope_id);
  });
} 
```

有没有办法手动刷新一次事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T15:19:39.800

jQuery`.data`只从`data-*`属性中读取一次（第一次调用`.data`元素来获取值）。 `.attr`更新元素上的属性，但 jQuery`.data`已经缓存了该值。如果您想更新它，请尝试`.data`改用。

```
return $(this).siblings('.specialization_names').data("autocomplete-source", "/specializations/" + scope_id); 
```

# android - clearAnimation() - 如何让动画保持在最终位置？

> ID：11936546
> 
> 赞同：0
> 
> 时间：2012-08-13T14:38:59.663
> 
> 标签：android, android-animation

想象这个场景，我有一个从左到右穿过屏幕的位图和一个按下时会调用的按钮`clearAnimation()`

当按下此按钮时，它会调用`clearAnimation()`移动位图，但位图会停留在屏幕上的位置（左右之间的某个位置）。

我实际上想要发生的是，当按下按钮时，位图结束在动画点的末尾（屏幕右侧）

知道如何实现这一目标吗？下面是我的动画代码

```
questionAnimation = AnimationUtils.loadAnimation(QuestionActivity.this, R.anim.left_to_right);
questionWrapper.setBackgroundDrawable(getResources().getDrawable(R.drawable.imageview_rounded));
questionWrapper.startAnimation(questionAnimation); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T15:02:45.873

我认为你的动画发生的事情是它的 setFillAfter() 默认设置为 true 或者你在应用动画之前将其设置为 true，通过 java 或从 xml 所以首先你应该将 setFillAfter 设置为 false 或者你可以直接更改setFillEnabled 到 false 就像这里在 xml 中应用于设置

```
<set xmlns:android="http://schemas.android.com/apk/res/android"
android:fillAfter="false" >

<translate
    android:duration="300"
    android:fromYDelta="100%p"
    android:toYDelta="0" />

<alpha
    android:duration="300"
    android:fromAlpha="0.0"
    android:toAlpha="1.0" />

</set> 
```

或者

```
<set xmlns:android="http://schemas.android.com/apk/res/android"
android:fillEnabled="false" >

<translate
    android:duration="300"
    android:fromYDelta="100%p"
    android:toYDelta="0" />

<alpha
    android:duration="300"
    android:fromAlpha="0.0"
    android:toAlpha="1.0" />

</set> 
```

因此在这种情况下，当动画结束或清除时，它不会保留视图图像（将您的图像暂停在中间）所以其次，当您清除动画或动画结束时，您必须通过代码设置图像的新位置，即屏幕右侧自然而然，为此您必须将实际视图（ImageView）放置到新位置（因为之前 FillAfter 已处理过此问题，但由于在按下清除动画时暂停视图出现故障，您需要将其删除，所以现在您必须覆盖它的功能由你自己）通过设置你的ImageView的属性，如果它在RelativeLayout中，然后通过将AlignParentRight的属性设置为true。

# css - CSS有图像从div边缘突出

> ID：11936548
> 
> 赞同：0
> 
> 时间：2012-08-13T14:39:03.650
> 
> 标签：css

```
#col{
width:200px; 
float:left;
overflow:visible;
position:relative;
z-index:2;
}

<div id="col">

<img style="margin-left:-6px; z-index:999; position:relative;"  src="img.jpg" />
</div> 
```

我希望图像向左突出 6px，但它被切断了。

我还必须在每行代码的字体中放置 4 个空格，这非常慢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:54:03.943

您的图像被截断，因为您在父母身上使用了溢出`div#col`

```
<div id="col">
  <img src="img.jpg" alt="some info">
</div> 
```

CSS

```
#col{
width:200px; 
float:left;
position:relative;
/*overflow: visible;*// remove
/*z-index:2;*// no need to do that
}
#col img {
position: absolute;
top: 0;
left: -6px;
width: width of image in px;
height: height of image in px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T14:46:05.603

这是你要找的吗？

[http://jsfiddle.net/qPhba/](http://jsfiddle.net/qPhba/)

# asp.net-mvc - 删除 MVC 中 DropDownList 上的空白条目

> ID：11936557
> 
> 赞同：2
> 
> 时间：2012-08-13T14:39:12.303
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-3

我一直在寻找，但找不到任何方法来删除下拉列表中的空白项。理想情况下，我想在不改变模型的情况下做到这一点。我只想从下拉列表中删除空白项，以便用户被迫选择一项（因此他们无法选择“空白”）。

注意：我使用的是 MVC 框架附带的默认下拉列表。

这是我的代码：

```
' controller action:

ViewBag.CompanyId = New SelectList(db.Companies, "CompanyId", "Name")

' view:

@Html.DropDownList("CompanyId", String.Empty)
@Html.ValidationMessageFor(Function(model) model.CompanyId) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T14:46:27.627

您如何为下拉菜单构建选项？

我从来没有空白选项。

我通常像这样创建我的下拉列表：

```
 @Html.DropDownListFor(x=>x.Client, new SelectList(Model.Clients)) 
```

显然，您的模型选项会有所不同。

**答案：** 删除 String.Empty

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-24T21:32:09.723

2021 年更新：我的问题出在 JS 脚本方面，我在下拉列表中添加了一个空行：D

像这样：

```
$("#" + "YourID").append('<option></option>'); //Remove This Line

for (var i = 0; i < CountriesList.length; i++) 
{
$("#" + "YourID").append('<option  value="' + CountriesList[i] + '">' + CountriesList[i] + '</option>');
 } 
```

删除第一行将使您直接从您的项目列表中获得第一个元素:)

祝大家编码愉快。

# xml - 从 xml 中删除多行

> ID：11936560
> 
> 赞同：0
> 
> 时间：2012-08-13T14:39:34.907
> 
> 标签：xml, lines

可以说我有这样的xml结构：

```
<list>
    <main id="1" name="asd1">
        <reward id="5">
            <set reward_id="32" value="5123" />
            <set reward_id="352" value="12" />
        </reward>
        <reward id="6">
            <set reward_id="72" value="666666" />
            <set reward_id="32" value="21" />
        </reward>
    </main>
</list> 
```

而且我有 30 个这样的文件，其中包含更多行。我的问题是，我想从reward_id 为“32”的每个文件中删除每一行。一个接一个地做这件事需要几周时间。你知道任何可以处理我的问题的程序吗？

编辑：每一行的值都会改变，有时还有比这两个更多的属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T11:35:40.213

通过这个 xsl 转换可以轻松地从单个 xml 文件中删除：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="set[@reward_id='32']" />

</xsl:stylesheet> 
```

此转换包含两个模板。第一个是简单地复制所有内容的身份转换。第二个为要跳过的数据定义了一个例外。这种事情在 xslt 中很常见。

为了将其应用到文件，您需要使用应用 xsl 的工具。我用来从命令行执行此操作的是 xsltproc，如果您使用的是 MacOS 或 Linux，它可能已经在您的系统上。如果没有[，此页面](http://www.sagehill.net/docbookxsl/InstallingAProcessor.html)将帮助您获得它。

当我编写上述转换时，我将其命名为 test.xsl 并将其应用于保存为 test.xml 的示例 xml。运行它

```
xsltproc test.xsl test.xml > testout.xml 
```

生成了一个文件 testout.xml，其中包含：

```
<list>
    <main id="1" name="asd1">
        <reward id="5">

            <set reward_id="352" value="12"/>
        </reward>
        <reward id="6">
            <set reward_id="72" value="666666"/>

        </reward>
    </main>
</list> 
```

要将其应用于一组文件，您可以创建一个 shell 脚本来遍历这些文件，并为每个文件应用一个与此类似的命令，但当然文件名会有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T14:42:30.437

任何**优秀的文本编辑器**都可以使用*xml 插件、搜索和替换以及正则表达式*来解决问题。选择一个，掌握它。编程大神会奖励你丰厚的！

我目前选择的武器是**[Notepad++](http://notepad-plus-plus.org/)**。

作为替代方案，您可以使用命令行实用程序和 shell，例如*PowerShell*。学习曲线有点陡峭，但它也会带来自己的优势。

# email - 以收件人的语言显示电子邮件？

> ID：11936574
> 
> 赞同：0
> 
> 时间：2012-08-13T14:40:17.043
> 
> 标签：email, internationalization

我想发送一封包含多个翻译的电子邮件。应根据收件人的语言偏好显示正确的翻译。可能的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T17:02:41.350

电子邮件格式中没有任何内容可以让您这样做。相反，您可以做的是将翻译后的内容作为附件放置，或将一些（翻译后的）链接发布到您的网站，这将向收件人推荐翻译后的内容。

无论如何，我认为最好将语言首选项存储在用户配置文件中（前提是您有一个）并使用此信息来自定义电子邮件。这很好用，除非你向一群人发送消息......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T19:54:15.307

据我所知，除非收件人提供，否则电子邮件帐户不会获得有关收件人的任何信息。甚至电子邮件客户端也经常阻止电子邮件显示图片，因为它会显示收件人的 IP 地址。所以我也认为，这不太可能。

我同意 Pawel Dyda 的想法。

# c# - StreamWriter 生成 0 字节文件

> ID：11936575
> 
> 赞同：0
> 
> 时间：2012-08-13T14:40:17.817
> 
> 标签：c#, io, windows-ce

我有以下逻辑，每 20 分钟通过 Timer 调用一次，它将对象的内容序列化为文件路径，我看到的 filePath 是 \hard disk\logs\applicationstate.xml ，请注意我确认这是一个有效的路径..

它在大多数情况下都有效，但我时不时地通过以下堆栈堆栈跟踪得到`System.IO.IOeException`在线：`this.StreamWriter = new StreamWriter(filePath);`

> 在 System.IO.__Error.WinIOError(Int32 errorCode, String str)\r\n at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, Boolean useAsync, String msgPath) \r\n 在 System.IO.FileStream..ctor（字符串路径，FileMode 模式，FileAccess 访问，FileShare 共享，Int32 bufferSize）\r\n 在 System.IO.StreamWriter.CreateFile（字符串路径，布尔附加）\r \n
> 在 System.IO.StreamWriter..ctor(String path, Boolean append, Encoding encoding, Int32 bufferSize)\r\n 在 System.IO.StreamWriter..ctor(String path)\r\n 在 Shs.ScanPanel。 CA.DataManager.DataManagercr.CopyData(对象数据)\r\n
> at System.Threading.Timer.ring()\r\n"

当它发生时，我看到 \hard disk\logs\applicationstate.xml 存在，但它有 0 字节。

所以我的问题是，StreamWriter 会导致这个 0 字节文件首先生成吗？我在 MSDN 上的 StreamWriter 下阅读了 IOException，它说以下内容

**IOException
路径包含文件名、目录名或卷标语法的错误或无效语法。**

这让我很困惑，是不是因为它试图打开一个 0 字节文件的流写入器？这个 0 字节是否会在最后一次运行此代码时生成一个空对象被序列化到文件中的位置？如果是这样，为什么我在 Visual Studio 中没有看到该异常？

```
 if (filePath != string.Empty)
            {
                if (this.StateObject == null)
                {
                    this.StateObject = new State();
                }
                    //Do something to my StateObject object

                    this.StreamWriter = new StreamWriter(filePath);
                    this.Serializer = new XmlSerializer(typeof(State));

                    this.Serializer.Serialize(this.StreamWriter, this.StateObject);
                }
                else
                {
                    if (this.log != null)
                    {
                        this.log.Write(LogLevel.Error, this.componentName, "CopyData : Unable to initilize State Object");
                    }
                }
            }
            else
            {
                if (this.log != null)
                {
                    this.log.Write(LogLevel.Error, this.componentName, "CopyData : Error while retrieving Current working directory");
                }
            }
        }
        catch (Exception ex)
        {
            if (this.log != null)
            {
                this.log.Write(ex, this.componentName);
            }
        }
        finally
        {
            if (this.StreamWriter != null)
            {
                this.StreamWriter.Close();
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T15:56:09.670

我建议使用**this.StreamWriter.Flush()**来确保所有内容都已写入。

但是，您的异常似乎在抱怨路径不正确。

编辑：Opps 我错过了 WinCE 标签

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T16:35:49.423

所以我编写了一个小程序，并确认使文件具有 0 字节的行就在 this.StreamWriter = new StreamWriter(filePath);

但真正让我难以置信的是它成功地清除了文件，以便可以将新数据序列化到其中，但同时它会引发异常。我认为这是 StreamWriter api 的较低层，或者它可能与闪存驱动器有关....毕竟我在 WINDOW CE 上运行这个程序

# java - oc4j 会话无效

> ID：11936582
> 
> 赞同：0
> 
> 时间：2012-08-13T14:40:52.263
> 
> 标签：java, session, vaadin, oc4j

我们正在开发一个 Vaadin 应用程序，在 oc4j 10.1.3 上运行它。实施基本身份验证后，用户的会话会在超时（这是默认设置）内自动失效。因此，用户打开 Vaadin 应用程序时，应该有一些数据集作为另一个 servlet 的会话属性。但是，当时我们有一个异常说会话已经失效。它从来没有被明确地调用过，也许是 oc4j 呢？在实施身份验证之前它工作正常。

```
Aug 13, 2012 4:21:27 PM com.vaadin.Application terminalError
SEVERE: Terminal error:
com.vaadin.event.ListenerMethod$MethodException: Invocation of method buttonClick in com.mycompany.myapp$1 failed.
at com.vaadin.event.ListenerMethod.receiveEvent(ListenerMethod.java:530)
at com.vaadin.event.EventRouter.fireEvent(EventRouter.java:164)
at com.vaadin.ui.AbstractComponent.fireEvent(AbstractComponent.java:1219)
at com.vaadin.ui.Button.fireClick(Button.java:567)
at com.vaadin.ui.Button.changeVariables(Button.java:223)
at com.vaadin.terminal.gwt.server.AbstractCommunicationManager.changeVariables(AbstractCommunicationManager.java:1460)
at com.vaadin.terminal.gwt.server.AbstractCommunicationManager.handleVariableBurst(AbstractCommunicationManager.java:1404)
at com.vaadin.terminal.gwt.server.AbstractCommunicationManager.handleVariables(AbstractCommunicationManager.java:1329)
at com.vaadin.terminal.gwt.server.AbstractCommunicationManager.doHandleUidlRequest(AbstractCommunicationManager.java:761)
at com.vaadin.terminal.gwt.server.CommunicationManager.handleUidlRequest(CommunicationManager.java:318)
at com.vaadin.terminal.gwt.server.AbstractApplicationServlet.service(AbstractApplicationServlet.java:501)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:856)
at com.evermind.server.http.ResourceFilterChain.doFilter(ResourceFilterChain.java:64)
at com.mycompany.myapp.RewriteFilter.doFilter(RewriteFilter.java:44)
at com.evermind.server.http.ServletRequestDispatcher.invoke(ServletRequestDispatcher.java:644)
at com.evermind.server.http.ServletRequestDispatcher.forwardInternal(ServletRequestDispatcher.java:391)
at com.evermind.server.http.HttpRequestHandler.doProcessRequest(HttpRequestHandler.java:908)
at com.evermind.server.http.HttpRequestHandler.processRequest(HttpRequestHandler.java:458)
at com.evermind.server.http.AJPRequestHandler.run(AJPRequestHandler.java:313)
at com.evermind.server.http.AJPRequestHandler.run(AJPRequestHandler.java:199)
at oracle.oc4j.network.ServerSocketReadHandler$SafeRunnable.run(ServerSocketReadHandler.java:260)
at com.evermind.util.ReleasableResourcePooledExecutor$MyWorker.run(ReleasableResourcePooledExecutor.java:303)
at java.lang.Thread.run(Thread.java:595)
Caused by: java.lang.IllegalStateException: Session was invalidated
at com.evermind.server.http.EvermindHttpSession.setAttribute(EvermindHttpSession.java:158)
at com.evermind.server.http.EvermindHttpSession.setAttribute(EvermindHttpSession.java:137)
at com.mycompany.myapp$1.buttonClick(MyPage.java:105)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:585)
at com.vaadin.event.ListenerMethod.receiveEvent(ListenerMethod.java:510)
... 22 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T14:04:13.483

实现 HttpSessionListener 后，我发现会话本身是有效的。Vaadin 方面一定有问题，b/c 在我的应用程序实现中通过 HttpServletRequestListener.onRequestStart 方法将会话设置为变量，该会话实例没问题。

# python - 未找到 PIL group4 解码器

> ID：11936583
> 
> 赞同：4
> 
> 时间：2012-08-13T14:40:54.097
> 
> 标签：python, python-imaging-library, tiff

我已经使用[适用于 Python 2.7 的 Windows 安装程序](http://www.pythonware.com/products/pil/index.htm)安装了 PIL 1.1.7，并且我正在尝试使用它来打开`TIFF`文件。但是，我一直收到`IOError: decoder group4 not available`.

缺少什么位？据我了解，应该编译必要的库。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T15:53:13.703

PIL 1.1.7 无法读取 G4 TIFF 文件。有非官方的[补丁](https://github.com/wiredfool/Python-Imaging-Library-G4-Tiff-Support)和[二进制文件](http://www.lfd.uci.edu/~gohlke/pythonlibs/#pil)可以。

更新：[Pillow](https://pypi.python.org/pypi/Pillow/) 2.x 可以读取 G4 TIFF 文件。

# ios - "itms-apps://" 尚未发布的 iOS 应用的 URL

> ID：11936584
> 
> 赞同：3
> 
> 时间：2012-08-13T14:40:54.773
> 
> 标签：ios, app-store

我的付费 iOS 应用正在审核中，仅在日本应用商店发布。我想创建带有付费版本链接的免费版本，但没有付费版本的 URL。

[这个问题](https://stackoverflow.com/questions/10771730/apps-app-store-link)中提到了[http://itunes.apple.com/linkmaker/](http://itunes.apple.com/linkmaker/)，但是当我在那里搜索我的应用程序时，它没有出现。

建议的另一个选项是[在我们的域上创建一个永久链接](https://stackoverflow.com/a/10792334/194309)，但这将迫使用户通过额外的重定向。

iTunes connect 将我的应用程序网址以“ [http://itunes.apple.com/us/app/dumi-shuki-ying-yu/](http://itunes.apple.com/us/app/dumi-shuki-ying-yu/) ”开头，单击该链接会发出警告，表明该应用程序目前仅在美国可用（虽然我们只为日本发布了它）。

![您要求的商品目前在日本商店中不可用](../Images/2e8a07fae5037447c4c9545a0d6996ac.png)

我有 SKU 和捆绑 ID，但我可以将什么用于 URL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-08T19:03:18.970

这适用于我（Xcode 5 - iOS 7 -**设备**！）：

```
itms-apps://itunes.apple.com/app/idYOUR_APP_ID 
```

代码片段（您可以复制并粘贴它）：

```
#define YOUR_APP_STORE_ID 123456789 // Change this one to your app ID (get it from iTunes Connect)

static NSString *const iOS7AppStoreURLFormat = @"itms-apps://itunes.apple.com/app/id%@";

[NSURL URLWithString:[NSString stringWithFormat:iOS7AppStoreURLFormat, YOUR_APP_STORE_ID]]; // Would contain the right link 
```

请注意，我们没有使用应用程序名称（不是必需的，而且使用起来很糟糕，因为它可能会发生变化）。在 iOs 7 上，您还可以使用“http”而不是“itms-apps”，这将产生相同的结果（不会像在旧操作系统上那样首先打开 safari）。

最后一件重要的事情是**我们没有使用链接上的国家数据**（通常是“我们”或任何其他），因此设备会选择相关的。如果您确实在链接上写了“我们”（例如您从 iTunes Link Maker 获得的链接），如果您在日本设备上打开该链接，是否会显示警报，因为商店可能设置为日本并且不会打开链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T15:01:00.743

您在 iTunes Connect 中获得的链接应该可以通过替换`http://`为`itms-apps://`.

话虽如此，这个警报很奇怪，您是否有任何与您的 iTunes 帐户相关联的内容设置为美国英语？我猜这只是自动的，一旦您的应用程序获得批准，只要单击该链接的 iTunes 帐户的用户与日本商店相关联，该链接就应该可以工作。

# open-source - Open Graph - 同一动作上的多个对象

> ID：11936585
> 
> 赞同：0
> 
> 时间：2012-08-13T14:40:59.480
> 
> 标签：open-source, facebook-opengraph

我正在尝试找出一种为电子商务网站实施 og 操作的方法。操作类似于“购买产品”，但通常人们通过将不同的商品添加到购物车来一次购买多个产品。我不想显示为“Jack 买了 xx，Jack 买了 yy，等等。”相反，我想有一个像“完全购买”这样的动作，其中购买是一个可能有多个项目的对象。任何想法表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:55:25.507

# sql - 为什么 SQL 触发器不按顺序插入行？

> ID：11936586
> 
> 赞同：0
> 
> 时间：2012-08-13T14:40:59.913
> 
> 标签：sql, database, tsql, triggers

最近我继承了一个新的 ASP Web 应用程序，它只允许客户在线支付他们的未结发票。该应用程序设计不佳，并且没有付款历史记录表。将支付记录传输到记录会计系统的 Web 服务删除了整个支付表。

我刚刚在 Payments 表上创建了一个简单的触发器，它只是将 Payments 表中的数据复制到 Payment_Log 表中。最初，触发器只是做了一个 select * on insert 来复制数据。但是，我刚刚修改了触发器以将付款日期插入到 Payment_Log 表中，因为我们的一位客户遇到了一些我需要调试的问题。新的触发器如下。我的问题是我注意到使用这个新版本的触发器，行被插入到表的中间（即不是在末尾）。有人可以解释为什么会这样吗？

```
ALTER trigger [dbo].[PaymentHistory] on [dbo].[Payments]
for insert as

Declare @InvoiceNo nvarchar(255),
    @CustomerName nvarchar(255),
    @PaymentAmount float,
    @PaymentRefNumber nvarchar(255),
    @BulkPaid bit,
    @PaymentType nvarchar(255),
    @PaymentDate datetime

Select @InvoiceNo = InvoiceNo,
   @CustomerName = CustomerName,
   @PaymentAmount = PaymentAmount,
   @PaymentRefNumber = PaymentRefNumber,
   @BulkPaid = BulkPaid,
   @PaymentType = PaymentType
from inserted

Set @PaymentDate = GETDATE()

Insert into Payment_Log 
values (@InvoiceNo, @CustomerName, @PaymentAmount, @PaymentRefNumber, @BulkPaid, @PaymentType, @PaymentDate) 
```

下面是 SQL Server Management Studio 的屏幕截图，显示了插入到表数据中间的行。在此先感谢您的帮助。

![在此处输入图像描述](../Images/b913d3a83ba2f6ef97fb867c86cc2f26.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T14:51:53.990

数据集没有顺序。这意味着每次都`SELECT * FROM x` ***可以以不同的顺序返回结果。***

***唯一******保证***数据以相同顺序返回的情况是在您指定`ORDER BY`子句时。

也就是说，在某些情况下，数据*通常*会按特定顺序返回。最明显的是聚集索引。

这让我想知道这两个表是否有主键。检查每个表上的所有索引，并至少强制执行主键。

顺便说一句，SQL Server 中的触发器不是针对每行触发，而是针对每批触发。这可能意味着该`inserted`表可以包含不止一行。 *（例如，批量插入测试数据，或重新加载大批量事务时。）*

因此，将数据复制到变量中不是标准做法。相反，您可以执行以下操作...

```
ALTER trigger [dbo].[PaymentHistory] on [dbo].[Payments]
for insert as

INSERT INTO
  Payment_Log
SELECT
  InvoiceNo, CustomerName, PaymentAmount, PaymentRefNumber,
  BulkPaid,  PaymentType,  GetDate()
FROM
  inserted 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-13T14:47:26.023

好的 这个问题的答案与我在 SQL 查询中不使用 order by 子句时为什么行以不同的顺序返回的答案相同。如果您要求 SQL 以任何方式处理行，它将以最快的方式处理它们，首先兑现行，接下来是最接近硬盘驱动器上读取头的行，最后是其余行。

换一种说法：如果查询的行顺序比先到先得的方式要长 10 倍，您会很恼火。SQL 尽可能快地完成您所要求的工作

希望这可以帮助

# android - 九个补丁图像显示奇怪的行为？

> ID：11936588
> 
> 赞同：3
> 
> 时间：2012-08-13T14:41:08.517
> 
> 标签：android, android-layout, nine-patch

我正在 Android 中创建一个应用程序，它在其中实现了聊天功能。我有 2 种聊天气泡 - 蓝色表示其他用户，橙色表示登录用户。我对这些气泡使用九个补丁图像，因为气泡可以拉伸。

蓝色气泡中的文本显示良好 - 位于中心（如下图所示）。但是橙色气泡中的文本显示在与图像上边界有一些垂直间隙之后。我无法弄清楚为什么会这样。两个气泡具有相同的属性，并且是按照相同的程序创建的。请帮忙。提前致谢。

![聊天泡泡](../Images/b65d904736e7032199ffa6ae786ff63b.png)

这是橙色的聊天气泡：

![橙色泡泡](../Images/8b19890bae682c7c7f008458471a99e7.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T15:00:16.103

问题出在九个补丁中。右侧边框定义了内容的去向，您可以将其从对话气泡的尖部下方开始。将边框继续到您希望内容开始的位置，它将起作用！

澄清一下：右下边界定义了内容可以去哪里，上边界和左边界定义了图像需要拉伸时将重复的图像区域。

试试这个： ![在此处输入图像描述](../Images/cb5d6fcc84775f13db61b34ad573a1ad.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T15:16:33.397

draw9 将根据您的需要进行拉伸。

//你的图片宽度太长了。使用这个供您参考。//这个图像对我来说很好，因为我在左侧使用。

如果您将一个点放在箭头上方的右侧，您的橙色聊天气泡也可以。

![在此处输入图像描述](../Images/6ea46be43e620a036d8f97b98b45324c.png)

# ruby-on-rails - 如何存储选择信息

> ID：11936598
> 
> 赞同：0
> 
> 时间：2012-08-13T14:41:30.203
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我有点不确定如何存储来自 collection_tag 的数据。

这是我正在研究的模型

```
Customer         GenderManager      Genders
Id               Id                 Id
First            Customer_id        Description
Last             Gender_id
Email            Created_at
Password 
```

这里的关系

```
Customer::class
  has_many :gender_managers
  accepts_nested_attributes_for :gender_managers, allow_destroy: :true
Gender::class
  has_many :gender_managers
GenderManagers:class
  belongs_to :customer_id
  belongs_to :gender_id 
```

我目前拥有的表格如下

```
 <%= form_for @customer do |f| %>
    <div class="customer_edit_error_message">
            <%= render 'shared/error_messages' %>
    </div>
    <fieldset>
    <div class="customer_edit_name">
            <%= f.label :first_name %>
            <%= f.text_field :first_name %>
    </div>

    <div class="customer_edit_middle_name">
            <%= f.label :middle_name %>
            <%= f.text_field :middle_name %>
    </div>

    <div class="customer_edit_last_name">
            <%= f.label :last_name %>
            <%= f.text_field :last_name %>
    </div>

    <div class="customer_edit_gender">
    <%= f.collection_select(:customer, :id, Gender.all, :id, :description) %>
    </div>
    <div class="customer_edit_button">
            <%= f.submit "Save changes", class: "button_accept" %>
    </div>
  <% end %> 
```

在 customerController 中不确定我是否必须做某事。我知道它给我错误是不对的。它的形式让我担心选择像

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T06:36:42.137

`gender`我建议您为模型添加一个属性`Customer`。如果您想跟踪更改，您可以创建一个`GenderHistory`模型并执行以下操作`Customer`：

```
class Customer < ActiveRecord::Base
  has_many :gender_histories
  before_update :track_gender

  def track_gender
    self.gender_histories.create(:gender => self.gender) if self.gender_changed?
  end
end 
```

您的`Genders`和`GenderManager`模型不是必需的。

# java - 如何修复以下Java代码的小片段

> ID：11936604
> 
> 赞同：0
> 
> 时间：2012-08-13T14:41:45.400
> 
> 标签：java, arrays

所以我试图只从一个数组和数组方法创建一个数组集。我有以下代码应该找到所选项目的索引（我已包含注释，以便您了解每种方法应该做什么）。如您所见，在添加项目之前， findIndex 方法上的 add 方法调用。我遇到的问题是 findIndex 方法引发了错误（缺少返回值）。我将如何只返回代码找到的项目的 int 索引？（代码中的问号只是为了显示我卡在哪里）

```
/** Find the index of an element in the dataarray, or -1 if not present
 *  Assumes that the item is not null 
 */
private int findIndex(Object item) {

    for(int i=0; i<data.length;i++){
        if(data[i] == item){
            return i;
        }

    }
  return ???
}

/** Add the specified element to this set (if it is not a duplicate of an element
 *  already in the set).
 *  Will not add the null value (throws an IllegalArgumentException in this case)
 *  Return true if the collection changes, and false if it did not change.
 */
public boolean add(E item) {

    if(item == null){
        throw new IllegalArgumentException();
    }
    else if(contains(item) == true){
        throw new IndexOutOfBoundsException();
    }
    else{

        int index = findIndex(item);
        if(index<0||index>count){
            throw new IndexOutOfBoundsException(); 
       }
        ensureCapacity();
        for(int i=count; i>index; i--){
            data[i]=data[i-1];
        }
        data[index] = item;
        count++;
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:44:58.093

在大多数情况下，您已经在评论中回答了您自己的问题。找不到项目时*应该*返回哪个整数？它不能是集合中某些东西的有效值（想想 0 <= x < list.size()）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T14:46:11.413

如果我正确理解您的问题，则应该是这样，“return i”完成了您的要求，return -1 用于未找到的情况：

```
private int findIndex(Object item) {

  for(int i=0; i<data.length;i++){
    if(data[i] == item){
        return i;
    }
  }
  return -1;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T14:47:13.583

声明为返回值的方法*必须*返回值或抛出异常，无论如何。在您迄今为止编写的代码中，只有当您真正找到所需内容时才返回一个值。当你*没有*找到你要找的东西时，该方法应该怎么做？它也需要返回一些东西。

通常做的是返回一个不可能是索引的特殊值。提示：Java 中从不使用什么样的整数作为数组索引？返回其中之一。然后记录这个选择，调用你的方法的代码必须检查这个特殊的返回值，看看是否找到了该项目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T14:48:15.447

您应该`return i`像现在一样在循环的中间。

但是您还需要一个 return 语句，以防永远无法到达 if 语句。由于您的评论说您应该使用-1，因此您需要`return -1`一个`return ???`

# html - 水平堆叠 DIV

> ID：11936606
> 
> 赞同：2
> 
> 时间：2012-08-13T14:41:57.653
> 
> 标签：html, css, fluid

我有这个 HTML 片段：

```
<style>
    #top, #left, #right
    {
        border: 1pt solid silver;
        margin: 3px;
    }
    #left
    {
        float: left;
        width:50%;
    }
    #right
    {
        float: right;
        width:50%;
    }
</style>
<div>
    <div id="top">Text</div>
    <div id="left">Text</div>
    <div id="right">Text</div>
</div> 
```

我希望“左”和“右” div 占据屏幕的整个宽度，所以我将它们的宽度分别设置为 50%。

出于某种原因，“左”和“右” div 重叠——“右” div 在“左” div 下方。设置这些 div 样式的正确方法是什么，以便它们并排显示并占据屏幕的整个宽度。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T14:44:00.413

没有足够的空间让它们对齐，因为它们每个占 50%，您必须添加四个 3px 的边距，所以总共需要 100% + 12px，因此无法对齐。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T14:44:50.970

见[http://jsfiddle.net/ER8pR/1/](http://jsfiddle.net/ER8pR/1/)

CSS：

```
 #top, #left>div, #right>div
    {
        border: 1pt solid silver;
        margin: 3px;
    }
    #left
    {
        float: left;
        width:50%;
    }
    #right
    {
        float: right;
        width:50%;
    } 
```

HTML：

```
<div>
    <div id="top">Text</div>
    <div id="left"><div>Text</div></div>
    <div id="right"><div>Text</div></div>
</div> 
```

问题是 和 的总`#left`宽度`#top`是

```
margin-left + border-left + padding-left + width + padding-right + border-right + margin-right 
```

在你的情况下，`3px+1px+0+50%+0+1px+3px`= `50% + 8px`，所以如果你把它们相加，你会得到`100% + 16px`，它大于`100%`。

您可以修复它，删除所有边距、填充和边框，并`<div>`在其中创建一个新的，其中包含`width:auto`您想要的边距、填充和边框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T14:44:08.383

添加：

```
display:inline-block; 
```

到你的#left 和#right..

div 是块并占据整行，即使它们有宽度！所以使它们成为内联块，以便它们也可以水平堆叠

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T14:44:53.830

那是因为您的边框和边距 50% + 左边 1px 和右边 1px 等于 50% 以上。
用于`box-sizing: border-box;`确保您的 div 为 50%，而不是更多的边框。

请参阅此示例[http://jsfiddle.net/zvMTN/](http://jsfiddle.net/zvMTN/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T14:45:01.983

您遇到的问题是您在这些 div 上设置了边框和边距，因此它们会注意到并排保持 50% 的宽度。如果您不在固定宽度的容器中工作，您可能应该使用 48% 之类的宽度。

# asp.net-mvc-3 - 当我在向导上回击或下一步时，文本框显示“0.00”或带两位小数的值

> ID：11936607
> 
> 赞同：1
> 
> 时间：2012-08-13T14:41:59.137
> 
> 标签：asp.net-mvc-3

我有这个`decimal`设置：

```
[Required(ErrorMessage = "Please tell us your income")]
[Display(Name = "How much do you earn from all the income types you selected above?")]
[DataType(DataType.Currency)]
[DisplayFormat(DataFormatString = "{0:c}")]
public decimal IndivdualIncome { get; set; } 
```

我`[Serializable]`在我的模型上使用。使用 ViewModel 将其引入我的视图。还使用多步骤向导。

当我使用这种类型的输入（用于捕获`decimal`值）进入一个步骤时，文本框为空，我可以输入“1000”。这是预期的行为。但是，假设我在向导上单击“下一步”并且下一步有一个类似的文本框（同样，它是预期的空白 - 称之为“SpouseIncome”），但是如果我没有输入任何值并且：

1.  我点击“返回”，然后“IndividualIncome”文本框将显示值为“1000.00”；和
2.  如果我然后点击“下一步”，“配偶收入”（我留空）现在显示“0.00”。

是我使用的`decimal`，还是我正在使用的属性？

非常感谢任何有关如何将其显示为空白（无“0.00”）或取出“.00”（如果先前输入了值）的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T15:20:52.883

您可能想要使用`"{0:N}"`which is number format 或`"{0:g}"`, which is general number format 而不是`"{0:c}"`您当前使用的货币格式。

或者您可能需要考虑自定义数字格式以非常具体地针对您要查找的内容。像这样的东西`{0:0,0}`，它是千位分隔符，给你 1,500。

更多关于字符串格式和自定义数字格式[的信息](http://www.dotnetdawgs.com/?tag=/dataformatstring)。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T14:53:39.933

更改`[DisplayFormat(DataFormatString = "{0:c}")]`为`[DisplayFormat(DataFormatString = "{0:N0}")]`应该工作

# android - setOnClickListener 在具有可绘制对象的视图上

> ID：11936612
> 
> 赞同：0
> 
> 时间：2012-08-13T14:42:20.570
> 
> 标签：android, drawable, onclicklistener

再会。

我有一个 LinearLayout 位图框，我在其中通过 SandboxView 类放置可绘制对象，如下所示：

```
LinearLayout myLayout = (LinearLayout) mRoot.findViewById(R.id.bitmapBox);
View view = new SandboxView(this.getActivity(), bitmap);
myLayout.addView(view); 
```

在父布局中，我也有一个水平滚动视图，但我想通过触摸画布使其可见/不可见。我试图这样做：

```
view.setOnClickListener(new OnClickListener() {
int x = 0;

@Override
public void onClick(View view) {
  HorizontalScrollView myLayout = (HorizontalScrollView) mRoot.findViewById(R.id.hide);
  if (x == 0) {
    myLayout.setVisibility(1);
    myLayout.setVisibility(View.GONE);
    x = 1;
  }

  else {
    myLayout.setVisibility(View.VISIBLE);
    x = 0;
  }
}
}); 
```

“视图”不是在画布上保存位图的对象吗？因为这行不通。我不知道使用什么视图来设置 onClick 侦听器，有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T15:13:48.480

您的 onClickListener 可以稍微清理一下：

```
view.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View view) {
        // no need to cast to horizontalscrollview here since we are just setting visibility which is available to anything extending the View class.
        View mView = mRoot.findViewById(R.id.hide);
        if (mView == null) {
            return; // do nothing
        } else if (mView.getVisibility() == View.GONE) {
            mView.setVisibility(View.VISIBLE);
        } else if (mView.getVisibility() == View.VISIBLE) {
            mView.setVisibility(View.GONE);
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T14:55:13.780

确保将布局的可点击属性设置为 true。

# java - 用于文件的 AES 加密/解密的 Java 类

> ID：11936616
> 
> 赞同：1
> 
> 时间：2012-08-13T14:42:29.350
> 
> 标签：java, file, encryption, aes

是否有一个 Java 类仅通过提供源文件和目标文件以及 AES 密钥来简单地加密/解密文件，而无需担心加密和 IO 细节？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:45:10.750

您可以查看[Jasypt 库](http://www.jasypt.org/easy-usage.html)。

# java - Jackson - 反序列化 JSON 字符串 - TypeReference 与 TypeFactory.constructCollectionType

> ID：11936620
> 
> 赞同：43
> 
> 时间：2012-08-13T14:42:31.180
> 
> 标签：java, json, jackson, deserialization

要将 JSON 字符串反序列化为类列表，[StackOverflow 问题中列出了不同的方法](https://stackoverflow.com/questions/7246157/how-to-parse-a-json-string-to-an-array-using-jackson)

类型 1（[文档链接](https://fasterxml.github.io/jackson-core/javadoc/2.5/com/fasterxml/jackson/core/type/TypeReference.html)）：

```
List<SomeClass> someClassList = mapper.readValue(jsonString, typeFactory.constructCollectionType(List.class, SomeClass.class)); 
```

类型 2（[文档链接](https://fasterxml.github.io/jackson-databind/javadoc/2.5/com/fasterxml/jackson/databind/type/TypeFactory.html#constructCollectionLikeType(java.lang.Class,%20java.lang.Class))）：

```
List<SomeClass> list = mapper.readValue(jsonString, new TypeReference<List<SomeClass>>() { }); 
```

尽管上述两种类型都可以完成工作，但这些实现之间有什么区别？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-08-14T17:39:47.440

构造后`JavaType`，两者都调用相同的反序列化功能，因此唯一的区别是泛型类型的处理方式。

第二个是完全静态的，所以类型在编译类型中必须是已知的，并且不能变化。所以它类似于使用基本的类文字。

第一个是动态的，所以它可以用来构造参数化不同的东西。

就个人而言，我更喜欢所有情况下的第一种选择（它避免创建一个匿名内部类），但第二种可能更具可读性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-10T23:49:08.900

实现这一目标的另一种方法是：

`List<SomeClass> list = Arrays.asList(mapper.readValue(jsonString, SomeClass[].class));`

# php - 关于 PHP 和 Microsoft SQL Server

> ID：11936622
> 
> 赞同：1
> 
> 时间：2012-08-13T14:42:37.713
> 
> 标签：php, sql-server, dll

我的系统是 Win7-32​​bit，我使用的是 Apache 2.4.2 和 XAMPP win32-1.8.0-VC9-installer 的 PHP 5.4.4。

最近我正在为我朋友的在线服务器建立一个网站，他使用的是 Microsoft SQL Server Express 2005。我在互联网上搜索了很多关于 sqlsrv.dll 扩展的解决方案，不幸的是它不能解决我的问题。我已将 php_sqlsrv.dll 扩展名提取到 php/ext/ 文件夹中，并在 php.ini 配置文件中添加了 extension=php_sqlsrv.dll，但我仍然收到警告错误（PHP 启动：无法加载动态库 'C:\xampp \php\ext\php_sqlsrv.dll' - 找不到指定的模块。）在重新启动 Apache 服务期间。

因为互联网上有太多的下载链接，我真的不了解扩展的非线程安全和线程安全，所以对于专业人士，请提供直接链接以下载与我的 PHP 匹配的那些扩展文件和MS SQL Server 版本。

必需的扩展名： - sqlsrv.dll - pdo_sqlsrv.dll

当然，如果有什么我需要注意或修改的，请提出您的意见。

您的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T14:50:13.343

您将需要[此页面](http://www.microsoft.com/en-us/download/details.aspx?id=20098)中的“SQLSRV30.EXE” 。您需要检查您是否正在运行线程安全（使用[phpinfo();](http://php.net/manual/en/function.phpinfo.php)）。来自该 exe 的文件的命名很重要。您想要名称中带有“54”的那些。那么“TS”或“NTS”指的是线程安全或非线程安全。有关详细信息，请参阅[手册](http://php.net/manual/en/ref.pdo-sqlsrv.php)。

# php - Magento - 通过代码以编程方式创建贷项通知单/退款

> ID：11936631
> 
> 赞同：-1
> 
> 时间：2012-08-13T14:43:08.323
> 
> 标签：php, zend-framework, magento

有什么方法可以通过代码动态创建贷项凭单/退款。我知道可以使用发票上的后端功能创建贷项通知单，但我想根据以下要求分别为特定订单创建贷项通知单

*   对于选定的项目
*   从退款中扣除运费
*   更新库存数量
*   联系我的支付网关以执行此退款并将钱转回客户的帐户

我还安装了 Sagepay 模块以用于付款目的，并且使用 Magento 的内置功能和 Sagepay 一起退款可以正常进行。但是，当客户在发货后要求为订单的少数商品或所有商品退款时，我想创建退款。

我创建了一个自定义模块并正在调用一个函数来执行退款操作。因此，在调用此功能时，我想为所选商品动态创建退款，并联系 Sagepay 为客户执行退款交易，并联系 Magento 更新库存。

我想要一些关于在哪里寻找代码以及如何将 Sagepay 的退款功能与 Magento 在我的模块的函数调用等中的内置功能结合起来的帮助？

任何帮助表示赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-08-13T14:48:32.350

我找到了一个用于创建贷项通知单的 API（参见下面的链接）。

[http://www.magentocommerce.com/boards/errors.php/viewthread/215141/](http://www.magentocommerce.com/boards/errors.php/viewthread/215141/)

# php - 多页文件上传

> ID：11936633
> 
> 赞同：0
> 
> 时间：2012-08-13T14:43:24.857
> 
> 标签：php, file, upload

我正在创建一个以这种方式工作的 php 表单：

1）用户填写表格并添加文件上传；

2) 提交的信息显示给用户确认；

3) 确认后，将发送一封电子邮件，其中包含所有数据，包括文件。

我的问题是我可以在第二步访问上传的文件，但不能在第三步访问。由于安全原因，无法通过创建具有默认值的输入文件字段（上传的文件）在第二步中重新发送文件。

有可能实现我想要做的事情，而不必将上传的文件复制到另一个文件夹？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-12T15:52:19.207

我的问题的解决方案是将实际文件上传仅放在确认页面上。没有办法以我想要的方式将文件从一个页面上传到另一个页面。感谢您的回复。

# portlet - 如何在 JSF portlet 中配置自定义错误页面

> ID：11936635
> 
> 赞同：0
> 
> 时间：2012-08-13T14:43:43.933
> 
> 标签：portlet, jsf-1.2, custom-error-pages, jsr286

我在门户页面中有一个 JSF Portlet。每当任何页面 bean 方法抛出异常时，我都需要显示错误页面。我怎样才能做到这一点？

我在 web.xml 中尝试了以下配置，它适用于 servlet，但不适用于 portlet。

```
<error-page>
  <exception-type>java.lang.Exception</exception-type>
  <location>/faces/exception.xhtml</location>
</error-page> 
```

现在，只要页面 bean 方法抛出异常，应用程序就会显示第一页。

我正在使用 JSF 1.2 + Facelets，并且我没有任何额外的 3rd 方库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T11:16:04.140

我扩展了我们正在使用的 IBM FacesPortlet，并在 processAction 和 render 方法中添加了异常处理。

# java - vysper 服务器登录失败

> ID：11936636
> 
> 赞同：2
> 
> 时间：2012-08-13T14:43:44.400
> 
> 标签：java, xmpp, ssl, apache-vysper

我正在制作一个 vysper xmpp 服务器。这是我的代码：

```
public static void main(String[] args) throws Exception {

    XMPPServer server = new XMPPServer("myserver.org");

    StorageProviderRegistry providerRegistry = new MemoryStorageProviderRegistry();

    AccountManagement accountManagement = (AccountManagement) providerRegistry.retrieve(AccountManagement.class);

    Entity user = EntityImpl.parseUnchecked("user@myserver.org");
    accountManagement.addUser(user, "password");

    server.setStorageProviderRegistry(providerRegistry);

    server.addEndpoint(new TCPEndpoint())

    server.setTLSCertificateInfo(new File("keystore.jks"), "boguspw");

    //server.setTLSCertificateInfo(new File("bogus_mina_tls.cert"), "boguspw");

    server.start();
    System.out.println("Vysper server is running...");

    server.addModule(new EntityTimeModule());
    server.addModule(new VcardTempModule());
    server.addModule(new XmppPingModule());
    server.addModule(new PrivateDataModule());
} 
```

我已经尝试了两个证书文件。(keystore.jks,bogus_mina_tls.cert)

启动服务器后，它连接到它，并尝试登录但无法登录。

SmackConfiguration.setPacketReplyTimeout(5000);

```
 config = new ConnectionConfiguration("myserver.org", port, "localhost");
    config.setSelfSignedCertificateEnabled(true);
    config.setSecurityMode(ConnectionConfiguration.SecurityMode.enabled);
    config.setSASLAuthenticationEnabled(true); 
```

// config.setKeystorePath("keystore.jks");

// config.setTruststorePath("keystore.jks");

```
 config.setKeystorePath("bogus_mina_tls.cert");
    config.setTruststorePath("bogus_mina_tls.cert");

    config.setTruststorePassword("boguspw");

    XMPPConnection.DEBUG_ENABLED = true;
    connection = new XMPPConnection(config);

    try {
        connection.connect();

    } catch (XMPPException e) {
        System.out.println("Error connect");
        e.printStackTrace();
    }

    System.out.println("Connected: " + connection.isConnected());

    try {
        System.out.println(connection.isAuthenticated());
        connection.login("user", "password");

    } catch (XMPPException e) {
        System.out.println("Error login");
        e.printStackTrace();
    } 
```

我抓住了这个例外：

> SASL 身份验证 PLAIN 失败：不正确的编码：在 org.jivesoftware.smack.XMPPConnection.login(XMPPConnection.java:203) 在 org.jivesoftware.authenticate(SASLAuthentication.java:337) 在 org.jivesoftware.smack。 Connection.login(Connection.java:348) 在 com.protocol7.vysper.intro.WorkingClient.init(WorkingClient.java:57) 在 com.protocol7.vysper.intro.WorkingClient.(WorkingClient.java:27) 在 com。 protocol7.vysper.intro.Runclient.main(Runclient.java:11)

我已经看过这些示例（[1st](https://svn.apache.org/repos/asf/mina/vysper/trunk/server/core-inttest/src/test/java/org/apache/vysper/xmpp/modules/extension/xep0199_xmppping/AbstractIntegrationTestCase.java)，[2nd](http://protocol7.com/archives/2011/01/09/introducing-apache-vysper/)），但它们不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T10:25:00.750

首先请注意，服务器证书不用于用户认证，它用于提供客户端和服务器之间的安全通信通道。

从日志中您可以看到您的身份验证方法是“SASL PLAIN”，使用用户和密码。

在服务器上，您将用户名/密码设置为：

```
accountManagement.addUser("user@myserver.org", "password"); 
```

但在您使用的客户端上

```
connection.login("user", "password"); 
```

这不符合您发布的错误消息，但我建议您使用正确的用户/密码重试。

# javascript - 锚点 Onclick 分区亮点

> ID：11936637
> 
> 赞同：4
> 
> 时间：2012-08-13T14:43:46.520
> 
> 标签：javascript, jquery, html, anchor

我做了一个简单的网页，有很多部门。所以要直接导航到一个部门，我在上面放了一个锚，如下所示：

```
<a href="#first">First</a><br/>
<a href="#second">Second</a><br/>
<a href="#third">Third</a> 
```

为了平滑滚动，我使用了 javascript：

```
$('a').click(function(){
    $('html, body').animate({
        scrollTop: $( $(this).attr('href') ).offset().top
    }, 500);
    return false;
}); 
```

现在我想为选定的部门添加效果。因此，当用户单击锚点时，页面会平滑滚动到分区，并且所选分区会突出显示一秒钟。就像当我们在 Stack Overflow 收件箱中收到任何消息时，我们点击它；页面变暗，新闻项目在短时间内突出显示。

我想对我的页面做那件事。因为我有超过 18 个部门，它们都是一样的。所以有必要区分所选的部门。

这是 Fiddle 的示例：[Fiddle For the Code](http://jsfiddle.net/gZSE5/9/)

任何帮助，将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T14:57:03.527

在您的代码中 $('html, body') 返回 2 个元素，因此动画将触发两次。如果你包含 jquery.ui 你将能够做到这一点：

```
$('a').click(function(){
    var selector = $(this).attr('href');        
    $('html').animate({
        scrollTop: $(selector).offset().top
    }, 500,'',function(){
        $(selector).effect("highlight", {}, 1000);                             
    });
    return false;
}); 
```

[提琴手](http://jsfiddle.net/gZSE5/11/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T14:47:10.140

这使用不透明度，例如：

```
$('a').click(function(){
    var el = $(this).attr('href');
    $('html, body').animate({
        scrollTop: $( $(this).attr('href') ).offset().top
    }, 500, function(){
        $(el).animate({'opacity':0.5},200, function(){ $(el).animate({'opacity':1}, 200)} );
    });
    return false;
}); 
```

# c++ - 在 WinRT 组件中跨 ABI 边界编组 VARIANT

> ID：11936639
> 
> 赞同：4
> 
> 时间：2012-08-13T14:43:52.693
> 
> 标签：c++, windows-runtime, variant

我正在移植我们的组件，该组件的核心是用 C++ 编写的，同时具有 ActiveX 和 .Net shell。组件内部在很多地方都使用了 VARIANT 类型。该组件参数的一些公共属性（get/set）和方法在 ActiveX 实现中属于 VARIANT 类型，在 .Net 实现中属于 System::Object 类型。在我们的代码内部，我们直接使用 VARIANT。

在实现 ActiveX 组件时，我不需要进行任何封送处理，因为 VARIANT 是 OLE/COM 类型。

在实现 .Net 组件时，我使用了类似的方法：

```
VARIANT var;

//...

//Initialize the VARIANT value

//...

System::IntPtr p( &var );

System::Object ^o = System::Runtime::InteropServices::Marshal::GetObjectForNativeVariant(p );

return o; 
```

在 WinRT 中，似乎没有任何类似的 Marshal 类可以完成这项工作。根据 MSDN，“WinRT Platform::Runtime::InteropServices 命名空间仅供内部使用，不用于开发。”

我有哪些选择？当然，必须有一个现有的类来完成跨 ABI 边界编组 VARIANT 的工作。我不想写这样一个编组器然后发现它已经存在了！

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T16:43:49.033

感谢您的回复。我最终使用 Windows::Foundation::IPropertyValue 编写了一个实用程序类。

我在这里发布了代码以及返回该线程的链接：

[在 WinRT 组件中编组 VARIANT](http://www.amyuni.com/forum/viewtopic.php?f=24&t=2854)

例子：

```
// in a C# we can write:
string [] sarray = new string[2];
sarray[0] = "abc";
sarray[1] = "def";

SetValue(sarray);

//in C++/CX we write:
void SetValue( Object ^value )
{
    VARIANT var;
    VariantInit( &var );

    var = acMarshall::MarshalObjectToVariant( value );
    //
    // We will have a SAFEARRAY of BSTRs in the VARIANT...
    //
    VariantClear( &var );
}

// and the reverse, in C++/CX
Object ^ GetValue()
{
    VARIANT var;
    VariantInit(&var);

    v.vt = VT_BSTR | VT_ARRAY;

    SAFEARRAYBOUND sab;
    sab.cElements = 2;
    sab.lLbound = 0;
    SAFEARRAY *psa = SafeArrayCreate( VT_BSTR, 1, &sab );
    LPVOID p = NULL;
    SafeArrayAccessData( psa, &p );

    ((BSTR *) p)[0] = SysAllocString(L"string one");
    ((BSTR *) p)[1] = SysAllocString(L"string two");

    SafeArrayUnaccessData( psa );
    var.parray = psa;

    Object ^ obj = acMarshall::MarshalVariantToObject( var );
    VariantClear( &var );

    return obj;
}

//and in C#:
object obj = GetValue() //obj will contain a string array... 
```

问候，

罗杰

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T14:39:09.610

Windows 运行时中没有等效的“VARIANT”。在 ABI 级别，System::Object 表示为实现 IInspectable 的对象，这可能是一种可以用来替换变体的机制。

可以使用 IReference 创建一个基于 IInspectable 的接口，该接口代表您的更高级别的对象，但它不会具有 VARIANT 所做的弱类型语义。

# android - 可以通过 Button 更新服务的 Activity

> ID：11936644
> 
> 赞同：1
> 
> 时间：2012-08-13T14:44:08.637
> 
> 标签：android, service, android-activity

我正在尝试从活动更新服务。当用户单击按钮时，Activity 会将数据保存到手机上的 sql lite 数据库中。我想在这里做的是，当单击此按钮时，服务会刷新并使用新数据。

我在按钮上使用了启动/停止服务，但应用程序崩溃并跳到不同的活动。

我认为我的问题类似于[Android: Update / Refresh a running service](https://stackoverflow.com/questions/10859662/android-update-refresh-a-running-service) and [Broadcast Receiver within a Service](https://stackoverflow.com/questions/9092134/broadcast-receiver-within-a-service)

但是，我不会更新小部件或其他 android 原生组件。该服务是一个自定义类。

请注意，广播接收器会在手机启动时启动此服务。此外，Logcat 窗口不会滚动读数。它上下颠簸。所以我没有错误日志给你看。

如何创建一个函数，当用户单击活动中的按钮时，允许服务更新？

这是我的活动（按钮在底部）：

```
 import java.sql.Timestamp;
    import java.text.ParseException;
    import java.text.SimpleDateFormat;
    import java.util.Calendar;
    import java.util.Date;
    import java.util.GregorianCalendar;

    import org.joda.time.DateTime;

    import android.app.Activity;
    import android.app.ActivityManager;
    import android.app.ActivityManager.RunningServiceInfo;
    import android.app.AlarmManager;
    import android.app.PendingIntent;
    import android.content.Context;
    import android.content.Intent;
    import android.graphics.Color;
    import android.os.Bundle;
    import android.util.Log;
    import android.view.View;
    import android.view.View.OnClickListener;
    import android.widget.AdapterView;
    import android.widget.AdapterView.OnItemSelectedListener;
    import android.widget.ArrayAdapter;
    import android.widget.Button;
    import android.widget.Spinner;
    import android.widget.TextView;
    import android.widget.Toast;
    import android.widget.ToggleButton;

    import com.google.android.gcm.demo.app.R;
    import com.google.android.gcm.demo.app.EventList.DataView;
    import com.google.android.gcm.demo.app.EventList.EventDetails;
    import com.google.android.gcm.demo.app.sqllite.DatabaseSqlite;

    public class AlertDetails extends Activity {

        Integer id;
        String name;
        String date;
        String startTime;
        String endTime;
        String location;
        int alertState;
        Bundle bundle;
        String alertTime;
        String s;
        private TextView mTitleDisplay;
        private TextView mDateDisplay;
        private TextView mTimeDisplay;
        private TextView mTimeEndDisplay;
        private TextView mLocationDisplay;
        private TextView mAlertDisplay;
        private String update_alarmTime;
        String eventYear;
        String eventDay;
        String eventMonth;
        String eventdate;
        Context context;
        Intent  alarmServiceControl;

        DatabaseSqlite entry = new DatabaseSqlite(AlertDetails.this);

    //  Intent startServiceIntent = new Intent(context, AlarmsService.class);

        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.alertview);

            bundle = getIntent().getExtras();
            id = bundle.getInt("id");
            name = bundle.getString("eventName");
            date = bundle.getString("date");
            startTime = bundle.getString("startTime");
            endTime = bundle.getString("endTime");
            location = bundle.getString("location");
            alertState = bundle.getInt("alertState");
            alertTime = bundle.getString("alertTime");
            alertTime = "10:00:00";// need to be hooked up correctly to get the right 

            // capture our View elements
            mTitleDisplay = (TextView) findViewById(R.id.titleDisplay);
            mDateDisplay = (TextView) findViewById(R.id.dateDisplay);
            mTimeDisplay = (TextView) findViewById(R.id.timeDisplay);
            mTimeEndDisplay = (TextView) findViewById(R.id.timeEndDisplay);
            mLocationDisplay = (TextView) findViewById(R.id.locationDisplay);
            mAlertDisplay = (TextView) findViewById(R.id.alertDisplay);

            // set start
            mTimeDisplay.setText(startTime);
            mTimeEndDisplay.setText(endTime);

            // set title
            mTitleDisplay.setText(name);

            // set Date
            eventYear = date.substring(0, 4);
            eventDay = date.substring(5, 7);
            eventMonth = date.substring(8, 10);
            mDateDisplay.setText(eventDay + "-" + eventMonth + "-" + eventYear);

             eventdate = eventDay + "/" + eventMonth + "/" + eventYear;

            // set location
            mLocationDisplay.setText(location);

            if (alertState == 0) {
                entry.open();
                mAlertDisplay.setText("Alert is ON and Set to " +entry.getAlert(id));
                entry.close();
            }
            if (alertState == 1) {

                mAlertDisplay.setText("Alert is OFF");
            }

            Button button1 = (Button) findViewById(R.id.btnSetAlert);

            button1.setOnClickListener(new View.OnClickListener() {

                public void onClick(View v) {
                    if (alertState == 0) {
                        alertState++;
                        mAlertDisplay.setText("Alert is OFF");
                        entry.open();
                        entry.updateAlertState(id, alertState);
                        entry.close();

                    } else {

                        //turn alarm on
                        entry.open();
                        mAlertDisplay.setText("Alert is ON and Set to " +entry.getAlert(id));
                        alertState = 0;
                        entry.updateAlertState(id, alertState);
                        entry.close();

                    }
                    // TODO check if service is running
                    stopService(new Intent(AlertDetails.this,
                            AlarmsService.class));
                    startService(new Intent(AlertDetails.this,
                            AlarmsService.class));

                    Intent intent = new Intent(AlertDetails.this,
                            AlertView.class);
                    startActivity(intent);

                }
            });
    }

    } 
```

这是我要更新的服务：

```
 package com.google.android.gcm.demo.app.Alerts;

import java.util.Calendar;
import java.util.List;

import com.google.android.gcm.demo.app.sqllite.DatabaseSqlite;

import android.app.AlarmManager;
import android.app.PendingIntent;
import android.app.Service;
import android.content.Intent;
import android.os.IBinder;
import android.util.Log;
import android.widget.Toast;

public class AlarmsService extends Service {

    DatabaseSqlite db = new DatabaseSqlite(this);
    List<Alerts> listAlerts;
    PendingIntent pendingIntent;

    String tag = "alerttService";

    @Override
    public void onCreate() {
        super.onCreate();
        Toast.makeText(this, "Created from Alerts service ...",
                Toast.LENGTH_LONG).show();
        Log.i(tag, "Service created...");
    }

    public int onStartCommand(Intent intent, int flags, int startId) {
        Log.d("TAG", "started onstart command Created from Alerts service .");
        return super.onStartCommand(intent, flags, startId);// START_STICKY;
    }

    @Override
    public void onStart(final Intent intent, int startId) {
        super.onStart(intent, startId);

        Toast.makeText(this, "Created from Alerts service started...",
                Toast.LENGTH_LONG).show();
        Log.i(tag, "Service started. ..");

        // for looops

        Thread thread = new Thread() {
            @Override
            public void run() {

                Boolean x = true;
                while (x) {

                    db.open();
                    listAlerts = db.getAlarmsForService();
                    db.close();
                    int alerts=listAlerts.size();
                    for (int i = 0; i < alerts; i++) {
                        Alerts item = listAlerts.get(i);
                        item.getRowId();
                        item.getRemoteServerId();
                    String alertInMills = item.getAlertDateInMills();
                    String alertDuration = item.getAlertDurationInMinutes();
                    String eventName = item.getEventName();
//                      intent.putExtra("eventState", item.getEventState());
//                      intent.putExtra("startTime", item.getStartTime());
//                      intent.putExtra("alertState", item.getAlertState());
//                      intent.putExtra("eventName", item.getEventName());
//                      intent.putExtra("location", item.getLocation());
//                      intent.putExtra("alertTime", item.getAlertTime());

//                      intent.putExtra("date", item.getDate());

                    long longAlertInMills = Long.parseLong(alertInMills);

                     pendingIntent = PendingIntent.getService(AlarmsService.this, 0,intent, 0);

                     AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);

                     Calendar calendar = Calendar.getInstance();

                    // go to data base for time in mills

                     calendar.setTimeInMillis(longAlertInMills);

                     alarmManager.set(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(),
                     pendingIntent);
                    //
                     System.out.println(calendar.toString());

                    }

                    //
                    System.out.println("thread");
                    x = false;

                }

            }
        };

        thread.start();

    }

    @Override
    public void onDestroy() {
        super.onDestroy();
        Toast.makeText(this, "Service destroyed...", Toast.LENGTH_LONG).show();
    }

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }

} 
```

广播接收器：

```
package com.google.android.gcm.demo.app.Alerts;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.util.Log;

public class AlarmsBroadcastReceiver extends BroadcastReceiver {

    private static final String TAG = "BootReceiver";

    Intent startServiceIntent;

    @Override
    public void onReceive(Context context, Intent intent) {

        if (intent.getAction().equals("android.intent.action.BOOT_COMPLETED")) {

            startServiceIntent = new Intent(context, AlarmsService.class);
            context.startService(startServiceIntent);
            Log.d("TAG", "alarmBroadcastReceiver");

            System.out.println("alarm broadcast ...");

        }

    }

} 
```

# sql - SQL 注入道德黑客

> ID：11936646
> 
> 赞同：6
> 
> 时间：2012-08-13T14:44:24.270
> 
> 标签：sql

这不是一个编程问题，但我不知道我为什么这样做。昨天，我正在浏览一个关于道德黑客的教程，并找到了一个关于 SQL 注入的教程。它说，找到一个管理员 login.asp 站点并输入如下： Admin: Admin Password: ' or '1'='1

我真的不知道那是什么以及它是如何工作的。但是，当我对一个网站进行同样的尝试时，我对结果感到震惊。它给了我一个警告，比如“......你的 IP 地址 ip xxx.xxx.xxx.xxx，你可能会因为这个行为被起诉......等等”我真的被这个警告吓到了。我无意做任何事情，我只是按照教程进行操作。

谁能告诉我会发生什么？我真的很担心这个。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T14:55:26.343

总结一下发生了什么：

1.  您试图通过您尝试的任何方法注入 SQL。

2.  他们的网站足够聪明，可以识别您的输入。

3.  他们生成了一个自动威胁并将其发送回您的浏览器。

我怀疑你必须担心。他们的网站很可能经常受到此类攻击，而且他们需要花费大量资金进行起诉，而且只有在您所在地区被认为是非法的情况下。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T15:33:20.803

您应该向他们发送一封电子邮件，在其中描述您想学习避免 SQL 注入攻击的技术。你应该道歉，我相信不会有任何问题。

# memory - X-Plane 10 的共享内存问题

> ID：11936649
> 
> 赞同：0
> 
> 时间：2012-08-13T14:44:36.527
> 
> 标签：memory, memory-management, simulation, shared-memory, simulate

我有一个程序可以从 X 平面和其他具有模拟值的 pc 发送/接收数据报。此代码适用于 x-plane 9，但当更改为 x-plane 10 时，它现在无法与 x-plane 通信。我打开一个套接字并通过来自 x-plane 和 sim 的 UDP 通过共享内存发送/接收数据。我有一个插件可以在 x-plane 9 上与所有这些一起使用。这是它过去与 x-plane 9 一起使用但在 x-plane 10 中不使用的方式。我注意到 x-plane 建立了连接但它无法接收发送给它的数据。那么有谁知道与x-plane 10兼容的代码是否有任何关系？谢谢。

编辑：我在研究中发现我的共享内存没有将模拟值发送到 x-plane 10，但它如何适用于 x-plane 9。我看到指向共享内存地址的指针变为空。这是否与 x-plane 10 和 x-plane 10 在退出时崩溃有关，在崩溃日志中显示一些异常 c000005。任何人都可以通过这个或某种想法帮助我克服这个障碍。

Edit2：共享内存问题：我有一个创建句柄的函数，它检查它是否为空，并且在 x 函数中使用了这个句柄，它应该具有相同的内存，因为句柄没有在任何地方关闭，但它显示为 0。所以重新在 x 函数中创建了句柄，但现在它为之前的 5780 分配了大约 17500 的大小。我很好奇我是否因此而没有遇到任何内存问题。问题已解决，但一切都用于 x-plane 9 我想知道为什么不在 10 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T18:24:34.353

我有一个创建句柄的函数，它检查它是否为空，并且在 x 函数中使用了这个句柄，它应该具有相同的内存，因为句柄没有在任何地方关闭，但它显示为 0。所以在 x 函数中重新创建了句柄但现在它为之前的 5780 分配了大约 17500 的大小。我很好奇我是否因此而没有遇到任何内存问题。问题已解决，但一切都用于 x-plane 9 我想知道为什么不在 10 中。

# c# - WPF ListView 以编程方式取消选择项目

> ID：11936650
> 
> 赞同：6
> 
> 时间：2012-08-13T14:44:37.587
> 
> 标签：c#, listview, data-binding, selection

我使用以下方法将我的项目的 IsSelected 绑定到属性：[WPF ListView Programmatically Select Item](https://stackoverflow.com/questions/1069577/wpf-listview-programmatically-select-item)

```
<ListView.ItemContainerStyle>
    <Setter Property="IsSelected" Value="{Binding IsSelected}"/>
</ListView.ItemContainerStyle> 
```

现在我可以通过简单地将 IsSelected 属性设置为 true 来在代码中选择我的项目。但是，我无法通过将我的项目的 IsSelected 属性设置为 false 来取消选择项目。

将项目属性 IsSelected 设置为 true 将触发 ListViewSelectionChanged 事件。但是，将已选择项目的 IsSelected 属性设置为 false 不会触发事件。该属性将更改为 false，但该项目在 ListView 中仍处于选中状态。我也尝试过使用 Mode=TwoWay 没有任何成功。

我将不胜感激任何帮助！

非常感谢您，

托马斯

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-06-24T16:32:47.970

对于希望“以编程方式”取消选择 ListView 的 OP 或其他人。如果您的 ListView 设置为 Single、Extended 或 Multiple，您始终可以：

```
YourlistView.Selecteditem = null; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T17:50:56.110

看起来你只是错过`TargetType`了风格。`ListViewItem`按照下面肯特的原始代码 添加目标类型。

```
<ListView.ItemContainerStyle>         
    <Style TargetType="ListViewItem">             
        <Setter Property="IsSelected" Value="{Binding IsGroovy}"/>               
    </Style>   
</ListView.ItemContainerStyle> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-08-05T12:33:04.053

或者你也可以使用它：

```
YourlistView.UnselectAll(); 
```

# javascript - 如何创建带背景的三角形（固定高度，宽度=100%）

> ID：11936655
> 
> 赞同：2
> 
> 时间：2012-08-13T14:44:52.093
> 
> 标签：javascript, css, css-shapes

我有一个图形背景，我需要在左上角显示一个彩色三角形（与分辨率无关）。

我可以仅使用宽度 = 100% 且高度 = 200px 且背景 = 红色的 HTML/CSS/JS 创建三角形元素吗？

我可以通过宽度 = 100% 的 IMG 创建它，但我希望有一个比调整图像大小更好的解决方案。

解决方案需要兼容 IE7+ 并使用浏览器的版本（超过 2%）。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-15T19:16:18.637

因为您无法创建具有百分比的边框，请尝试改用 vw（查看器宽度）。所以：

```
.triangle{
   width: 0;
   height: 0;
   border-bottom: 600px solid blue;
   border-left: 100vw solid transparent;
  } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-02T10:54:24.210

IE8 不支持 Vw 单位，您需要为不支持这些单位的浏览器使用 JS 后备。

这是一个 jQuery 脚本，它根据窗口大小设置边框宽度并在窗口调整大小时对其进行调整。在 IE8（IE 测试仪）中测试：

```
$(document).ready(function() {
  function triangle() {
    var width = $('#wrap').width(),
      border = width / 4;

    $("#wrap .tr").css({
      "border-left": border + "px solid #fff",
      "border-bottom": border + "px solid transparent"
    });
  }
  triangle();

  $(window).on('resize', triangle);
});
```

```
body {
  background: #fff;
}
#wrap {
  position: relative;
  min-height: 500px;
  background: teal;
}
.tr {
  position: absolute;
  left: 0;
  top: 0;
  border-left: 200px solid #fff;
  border-bottom: 200px solid transparent;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<div id="wrap">
  <div class="tr"></div>
</div>
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-06T03:37:37.643

为了扩展[web-tiki 的答案](https://stackoverflow.com/a/26698502/1811992)，我认为这实际上是你想要的：

```
$(document).ready(function() {
  function triangle() {
    $("#wrap .tr").css({
      "border-left": $('#wrap').width() + "px solid #fff",
      "border-bottom": "200px solid transparent"
    });
  }
  triangle();

  $(window).on('resize', triangle);
});
```

```
body {
  background: #fff;
}
#wrap {
  position: relative;
  min-height: 500px;
  background: teal;
}
.tr {
  position: absolute;
  left: 0;
  top: 0;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<div id="wrap">
  <div class="tr"></div>
</div>
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-11-06T22:02:19.360

我认为最好使用背景而不是边框​​：

```
.my-triangle {
   width: 100%;
   height: 200px;
   background: linear-gradient(to left top, transparent 50%, red 50%);
}
```

```
<div class="my-triangle"></div>
```

请注意，为了使其跨浏览器兼容，您需要使用 CSS 前缀、IE 过滤器和 SVG。（我不能轻易访问 IE，所以我会把那个留给你，但它会是这样的：）

```
 background-image: -webkit-gradient(linear, right bottom, left top, color-stop(0, transparent), color-stop(0.5, transparent), color-stop(0.5, #FF0000), color-stop(1, #FF0000));
  background-image: -webkit-linear-gradient(bottom right, transparent 0%, transparent 50%, #FF0000 50%, #FF0000 100%);
  background-image: -moz-linear-gradient(bottom right, transparent 0%, transparent 50%, #FF0000 50%, #FF0000 100%);
  background-image: -ms-linear-gradient(bottom right, transparent 0%, transparent 50%, #FF0000 50%, #FF0000 100%);
  background-image: -o-linear-gradient(bottom right, transparent 0%, transparent 50%, #FF0000 50%, #FF0000 100%);
  background-image: linear-gradient(to top left, transparent 0%, transparent 50%, #FF0000 50%, #FF0000 100%); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-04T07:19:59.943

只需取一个 div 元素，给一个类名 'triangle-topleft'，然后写下给定的 css

```
.triangle-topleft {
    width: 0;
    height: 0;
    border-top: 100px solid red;
    border-right: 100px solid transparent;
} 
```

边框顶部的颜色将是 div 的背景颜色..这里是红色。有关更多三角形结构，请点击此链接.. [ [http://css-tricks.com/examples/ShapesOfCSS/][1]](http://css-tricks.com/examples/ShapesOfCSS/][1])

# jquery - 展开/折叠不适用于某些浏览器

> ID：11936660
> 
> 赞同：0
> 
> 时间：2012-08-13T14:45:09.940
> 
> 标签：jquery, css, twitter-bootstrap, overflow

[在 Chrome 中，在这里](http://staging.openingdesign.com/projects/585)看到的展开/折叠按钮工作正常。（第一张图片）。

然而，在 Firefox 中，有一个奇怪的重叠问题，如（第二张图片）所示。

几天来一直在拼命尝试找出原因。想知道是否有人可能有建议的线索来解决。

## 在铬...

![在此处输入图像描述](../Images/12797701ea7c0d04c27679f714d0ca32.png)

## 在火狐...

![在此处输入图像描述](../Images/a00e5e34ad69f6f7ff0591e9ad2f4038.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T15:21:39.690

在动画结束时，孩子的高度在 Chrome 上设置为“auto”，但在 Firefox 上设置为“0px”。如果您手动删除此值，它会起作用。您的脚本是否因浏览器而异？

# sql-server - 计算表中值与现在之间的时间差

> ID：11936662
> 
> 赞同：-1
> 
> 时间：2012-08-13T14:45:12.677
> 
> 标签：sql-server, sql-server-2008, tsql

我正在为我的商家数据做一份报告，以了解他们开始业务以来的年数或月数。因此，在我的表中，我有一个 BusinessStartDate，但我想找出他们开始业务以来的年份或月份，例如：

```
BusinessStartdate           No of years or Months

2003-02-01 00:00:00.000     9 
```

我正在使用 SQL Server 2008。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T14:49:30.207

```
SELECT BusinessStartDate,
  DATEDIFF(MONTH, BusinessStartDate, CURRENT_TIMESTAMP)
  FROM dbo.table_name; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T14:50:17.510

```
case
    when datediff(mm, BusinessStartDate, current_timestamp) > 12
    then datediff(yy, BusinessStartDate, current_timestamp)
    else datediff(mm, BusinessStartDate, current_timestamp)
end 
```

请注意我在关于计数方法的答案下方的评论。这个版本与我们通常认为的周年纪念不符。下面的表达式更接近正常，因此您可以使用它进行比较。还有很多其他的答案可以解决生日和年龄的问题。

```
case
    when datediff(mm, BusinessStartDate, current_timestamp) > 12
    then datediff(dd, BusinessStartDate, current_timestamp) / 365
    else datediff(dd, BusinessStartDate, current_timestamp) / 30
end 
```

# c# - WPF 中 DateTimePicker 中的日历按钮对齐问题

> ID：11936663
> 
> 赞同：3
> 
> 时间：2012-08-13T14:45:13.320
> 
> 标签：c#, wpf

我在我们的项目中同时使用 WPFToolkit 和 WPFExtendedtoolkit dll 来获取`DateTimePicker`. 但是当日历弹出日历按钮不正常时，一半的按钮被隐藏了。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-24T05:40:29.763

这可能是一个迟到的答案。但希望它可以帮助其他有同样问题的人。我认为您在自定义样式中为 Button 定义了样式。只需将以下样式添加到您的自定义样式中。

```
<Style TargetType="{x:Type DatePicker}">
    <Style.Resources>
        <Style TargetType="Button"/>
    </Style.Resources>
</Style> 
```

# vba - MS Access通过参数化查询动态填充连续表单子表单

> ID：11936666
> 
> 赞同：0
> 
> 时间：2012-08-13T14:45:17.317
> 
> 标签：vba, ms-access, vbscript

我正在开发一个应允许用户从列表框中选择代码的应用程序，并且该值应作为参数传递给与 SQL 查询绑定的子表单（连续），以使用从返回的值填充表单查询。

如何将父表单上的列表框与连续表单（子表单）联系起来，以便在子表单中注册列表框的更改并相应地重新填充它（子表单）？

下面的代码是我目前在父表单中触发子表单更改的代码。但是我仍然错过了用这个触发子表单中信息重新加载的地方。

存储过程

```
SELECT tblACCOUNT.ACCOUNT_LABEL, tblACCOUNTValue.[ACCOUNTVALUE_VALUE]
FROM ((tblUPS INNER JOIN tblProductUPS ON tblProductUPS.[PRODUCTUPS_UPS] = tblUPS.[UPS_CODE]) INNER JOIN tblACCOUNT ON tblUPS.UPS_ID = tblACCOUNT.ACCOUNT_UPSID) INNER JOIN tblACCOUNTValue ON tblACCOUNTVALUE.[ACCOUNTVALUE_ACCOUNTID]= tblACCOUNT.[ACCOUNT_ID]
WHERE TBLPRODUCTUPS.[PRODUCTUPS_PRODUCTID] =   (SELECT tblProductLevel.[PRODUCTLEVEL_ID] 

FROM  tblProductLevel WHERE tblProductLevel.[PRODUCTLEVEL_Code] IN ( [UPSIDS])

   ); 
```

这是我的子表单中的一个字段，我想将它作为查询的参数源绑定到我的查询。

```
Public Property Let qString(unstring As String)
    If Not IsNull(unstring) And Len(unstring) > 0 Then
            Currentstring = unstring
    End If
End Property 
```

下面的代码是我测试的父表单中的代码，它直接连接到我创建的查询并将参数直接传递给查询。但是，由于我的子表单本身与查询相关联，因此我需要一种方法来获取子表单查询并传递我需要传递的信息，然后在表单上调用更新。

```
 Private Sub LoadSubform(unspscstring As String)
On Error GoTo Err_LoadSubform_Change

            Dim dbs As Database
            Dim strSQL As String
            Dim strSelect  As String
            Dim strQueryName As String
            Dim qryDef As QueryDef
             Dim rst As Recordset
             Dim prmOne As DAO.Parameter

            Set dbs = CurrentDb
            'then we'll open up the query:
            Set qryDef = dbs.QueryDefs("spgetAttributeByUNSPSC")
            'Now we'll assign values to the query using the parameters option:
                'link your DAP.Parameters to the query
                'Set prmOne = qryDef.Parameters!param_one
                'prmOne = unspscstring
             qryDef.Parameters(0) = unspscstring
             'Now need to somehow trigger an update on the subform

            'Close all objects
            rst.Close
            qryDef.Close
            Set rst = Nothing
            Set qryDef = Nothing
Bye_LoadSubform_Change:
                     Exit Sub

Err_LoadSubform_Change:
Beep:                      MsgBox Error$, 16, "Select Failed"
                     Resume Bye_LoadSubform_Change

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:52:37.327

只要列表框只允许一项，您就可以使用子表单的链接子字段和主字段来执行此操作。

```
Link Child Fields: ID; ListFieldMatch
Link Master Fields : ID; MyListBox 
```

或者，您可以在 VBA 中设置子窗体控件的窗体对象的记录源：

```
sSQL = "SELECT ID,Stuff FROM Table WHERE ID=" & Me.MyNumericListBox
Me.MySubformControlName.Form.RecordSource = sSQL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-14T10:44:37.290

sSQL = "SELECT ID,Stuff FROM Table WHERE ID=" & Me.MyNumericListBox Me.MySubformControlName.Form.RecordSource = sSQL

给出错误 2467 运行时错误

“您输入的表达式引用了一个已关闭或不存在的对象。

# asp.net - GridView 丢失 DataKeys

> ID：11936676
> 
> 赞同：1
> 
> 时间：2012-08-13T14:45:45.260
> 
> 标签：asp.net, vb.net, gridview

为什么当我尝试使用会话状态设置 GridView 的排序时，突然我的 GridView 不再具有 DataKeys？我所做的只是将以下代码放入我的 Page_Init；

```
Dim SortDirection As String = Session("SortDir")
Dim sortExpression As String = Session("SortExp")
If Not SortDirection Is Nothing AndAlso Not sortExpression Is Nothing Then
    If (SortDirection = "asc") Then
        GridView1.Sort(sortExpression, WebControls.SortDirection.Ascending)
    Else
        GridView1.Sort(sortExpression, WebControls.SortDirection.Descending)
    End If
End If 
```

但是，如果我将这一点注释掉，那么我的其他方法就不会再崩溃了，因为我的 GridView 现在有了它的 DataKeys。为什么是这样？

**更新**

当上述代码到位时，这就是停止工作的确切行。

```
Dim UserID = GridView1.DataKeys(e.RowIndex).Value.ToString 
```

根据调试器 GridView1 有列，但它的 DataKeys 计数为 0。我收到的错误是；

```
Index was out of range. Must be non-negative and less than the size of the collection.
Parameter name: index 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T15:15:41.130

您希望在`Page_Load`（可能在`If Not Page.IsPostBack`块中）事件中执行这些操作，而不是在`Page_Init`事件中。Init 用于*初始化*或*读取*控件属性；负载是您通常*设置*属性（如排序方向等）的地方。

基本上，您`ViewState`的尚未加载`Page_Init`。因此，您修改 中的控件属性`Init`，然后从 ViewState 中填写一些属性，当您的 Page 执行`Load`事件（递归调用每个服务器控件的`Load`事件）时，这会导致意外行为。

您可以在 MSDN 上阅读有关此（有些令人困惑的）主题的所有内容：[ASP.NET 页面生命周期概述](http://msdn.microsoft.com/en-us/library/ms178472.aspx)

# php - 如何在 Doctrine2 查询生成器中使用“间隔”

> ID：11936677
> 
> 赞同：11
> 
> 时间：2012-08-13T14:45:44.113
> 
> 标签：php, postgresql, symfony, doctrine-orm, query-builder

在我的 Symfony2 存储库中，我想从计划表中获取已开始但尚未完成的对象。对象内的间隔应该作为“未完成”遇到，应该作为变量传递。

使用纯 SQL，它的工作方式如下：

```
SELECT * FROM slots rbs 
  WHERE rbs.rundate = '2012-08-13' 
  AND rbs.runtime <= '11:05:00' 
  AND '11:05:00' <= rbs.runtime + interval '300 seconds'
  ORDER BY rbs.rundate DESC, rbs.runtime DESC 
```

我可以使用 DQL / Query Builder 实现相同的目标吗？

这是我到目前为止所拥有的：

```
$qb = $this->createQueryBuilder('rbs');
$qb->where(
    $qb->expr()->andX(
         $qb->expr()->eq('rbs.rundate', ':date'),
         $qb->expr()->lte('rbs.runtime', ':time'),
         'rbs.runtime + interval 300 seconds >= :time'
        )
    )
  ->orderBy('rbs.rundate', 'DESC')
  ->addOrderBy('rbs.runtime', 'DESC')
  ->setParameter('date', date('Y-m-d'))
  ->setParameter('time', date('H:i:s')) 
```

但这会返回以下错误：

```
[Doctrine\ORM\Query\QueryException]                                                 
[Syntax Error] line 0, col 139: Error: Expected =, <, <=, <>, >, >=, !=, got '300' 
```

我发现Doctrine2 / DQL[不支持“间隔”](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.1/reference/dql-doctrine-query-language.html#dql-functions)，这里也提到[了](https://stackoverflow.com/questions/10041513/interval-1-month-not-working-with-symfony2-doctrine)。

关于如何使用 Doctrine2 的查询生成器或 DQL（并将间隔作为变量传递）来完成此任务的任何建议？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-13T19:05:29.887

据我所知，Interval 没有移植到 Doctrine 中。我发现的解决方法是直接在我作为参数传递的 DateTime 上工作（在这里，我想使用 2 天的间隔，通过 Datetime）：

```
public function findOngoingPublicEvents()
{
    return $this->createQueryBuilder('e')
        ->where('e.isActive = 1')
        ->andWhere('e.isPublic = 1')
        ->andWhere('e.begin <= :begin')
        ->andWhere('e.end >= :end')
        ->orderBy('e.id', 'ASC')
        ->setParameter('begin', new \DateTime('+2 days'))
        ->setParameter('end', new \DateTime('-2 days'))
        ->getQuery()
        ->execute();
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-04-11T05:09:02.567

如果你想在 mysql comumn 字段上使用 INTERVAL（在 Doctrine 2，DQL 中），你可以使用如下，

```
$qb->andWhere("DATE_ADD(pv.myDAte,48,'hour') >= UTC_TIMESTAMP()"); 
```

它将打印如下 SQL，

```
...... DATE_ADD(p0_.appointment_date, INTERVAL 48 HOUR) >= UTC_TIMESTAMP() ..... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-04-18T12:44:23.993

@Kiran 只写 about `DATE_ADD`，但您也可以使用`DATE_SUB`

```
$qb->andWhere("DATE(a2_.updatedAt) = DATE_SUB(CURRENT_DATE(), 6, 'day')"); 
```

它相当于 SQL：

```
DATE(a2_.updatedAt) = DATE_SUB(CURRENT_DATE, INTERVAL 6 DAY) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-15T05:28:37.750

Doctrine 中的 AFAIK 但不支持 postgres 间隔。但是，可以编写列的自定义映射以及 dbal 类型。这是一个例子：

```
#[ORM\Column(type: 'carbon_interval', columnDefinition: 'INTERVAL NOT NULL')]
private CarbonInterval $duration; 
```

碳的包装类型：

```
#[Immutable]
final class CarbonIntervalPostgresType extends DateIntervalPostgresPostgresType
{
    public const NAME = 'carbon_interval';

    public function convertToPHPValue($value, AbstractPlatform $platform): ?CarbonInterval
    {
        //1 years 0 mons 0 days 0 hours 0 mins 0.0 secs
        $interval = parent::convertToPHPValue($value, $platform);

        if ($interval instanceof DateInterval) {
            $interval = CarbonInterval::instance($interval);
        }

        return $interval;
    }
} 
```

覆盖`dateinterval`学说类型以使用 postgres 格式。请注意，在现有的代码库中，它可能会破坏很多东西，所以要小心，如果你不确定不要覆盖。

```
#[Immutable]
class DateIntervalPostgresPostgresType extends IntervalPostgresType
{
    public const NAME = Types::DATEINTERVAL;
} 
```

Next 类负责提供适当的 postgresql 间隔格式和 php DateInterval 转换。顺便说一句，如果您定义`getSQLDeclaration`，那么您甚至不需要手动编写 columnDefinition 。

```
#[Immutable]
class IntervalPostgresType extends Type
{
    public const NAME = 'interval';

    /** @see \Doctrine\DBAL\Types\Type::getName() */
    public function getName(): string
    {
        return static::NAME;
    }

    /** @see \Doctrine\DBAL\Types\Type::getSQLDeclaration() */
    public function getSQLDeclaration(array $fieldDeclaration, AbstractPlatform $platform): string
    {
        return static::NAME;
    }

    /** @see \Doctrine\DBAL\Types\Type::convertToDatabaseValue() */
    public function convertToDatabaseValue($value, AbstractPlatform $platform)
    {
        if ($value === null) {
            return null;
        }

        if (!$value instanceof DateInterval) {
            throw new InvalidArgumentException('Interval value must be instance of DateInterval');
        }

        $parts = array(
            'y' => 'year',
            'm' => 'month',
            'd' => 'day',
            'h' => 'hour',
            'i' => 'minute',
            's' => 'second',
        );

        $sql = '';
        foreach ($parts as $key => $part) {
            $val = $value->{$key};
            if (empty($val)) {
                continue;
            }
            $sql .= " {$val} {$part}";
        }

        return trim($sql);
    }

    /**
     * @throws ConversionException
     * @see \Doctrine\DBAL\Types\Type::convertToPHPValue()
     */
    public function convertToPHPValue($value, AbstractPlatform $platform): ?DateInterval
    {
        if ($value === null) {
            return null;
        }

        $matches = array();
        preg_match(
            '/(?:(?P<y>[0-9]+) (?:year|years))?'
            .' ?(?:(?P<m>[0-9]+) (?:months|month|mons|mon))?'
            .' ?(?:(?P<d>[0-9]+) (?:days|day))?'
            .' ?(?:(?P<h>[0-9]{2}):(?P<i>[0-9]{2}):(?P<s>[0-9]{2}))?/i',
            $value,
            $matches
        );

        if (empty($matches)) {
            throw ConversionException::conversionFailed($value, static::NAME);
        }

        $interval = new DateInterval('PT0S');

        if (!empty($matches['y'])) {
            $interval->y = (int)$matches['y'];
        }

        if (!empty($matches['m'])) {
            $interval->m = (int)$matches['m'];
        }

        if (!empty($matches['d'])) {
            $interval->d = (int)$matches['d'];
        }

        if (!empty($matches['h'])) {
            $interval->h = (int)$matches['h'];
        }

        if (!empty($matches['i'])) {
            $interval->i = (int)$matches['i'];
        }

        if (!empty($matches['s'])) {
            $interval->s = (int)$matches['s'];
        }

        return $interval;
    }
} 
```

# c++ - NULL 指针参数有多贵？

> ID：11936682
> 
> 赞同：7
> 
> 时间：2012-08-13T14:45:52.587
> 
> 标签：c++, c, performance, embedded, avr-gcc

在用 C(++) (AVR-Gcc) 在嵌入式系统上实现菜单时，我最终得到了带有参数的 void 函数指针，并且通常会使用它们。

```
// void function prototype
void (*auxFunc)(char *); 
```

在某些情况下（实际上不少），该函数实际上不需要参数，所以我会这样做：

```
if (something)    doAuxFunc(NULL); 
```

我知道我可以重载到不同的函数类型，但实际上我试图不这样做，因为我正在实例化多个对象并希望它们保持轻便。

使用 NULL 指针调用多个函数（当它们用于实际指针时）是否比实现更多函数原型更糟糕？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-13T14:50:08.743

即使在微控制器上检查 NULL 也是非常小的开销 - 与 0 的比较应该是闪电般的快。如果你重载了几个函数，你会为了（非常轻微的）性能改进而牺牲可读性。只需让 GCC 的优化器完成它的工作，它就很擅长了 :)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T17:24:59.637

看看反汇编，它应该生成一个空（零）作为第一个参数传递，它要么烧录一个寄存器，要么烧一个堆栈位置，如果它烧一个寄存器，那么如果调用函数是，它可能会花费你一个 push 和 pop渴望寄存器。（如果函数为了实现调用约定而急需寄存器，则仅使用函数调用可能会花费您推送和弹出的费用）。

所以可能会有成本，但可能不足以改变你做事的方式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-13T15:23:49.060

检查`0`真的很便宜，重载甚至更便宜，因为在编译时决定选择哪个函数。

但是，如果您认为您的接口因重载而变得过于复杂并且您的函数很小，您应该声明它`inline`并将其放在头文件中。Checkig for`0`然后可以很容易地被任何体面的现代编译器优化掉。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T14:51:23.833

我认为每种方法的“权衡”都非常低，但现在是为自己做基准测试的时候了。如果你这样做，请发布一些结果:)

# c# - 不断运行的 C# 代码 - 服务还是单独的线程？

> ID：11936684
> 
> 赞同：5
> 
> 时间：2012-08-13T14:45:53.620
> 
> 标签：c#, html, multithreading, web-services, entity-framework

我有一个 .NET 4 Web 应用程序，它关联了 3 个独立的项目——DAL、BAL 和 UI。我正在使用实体框架进行数据库交互。

我的代码循环遍历一堆数据库数据，根据找到的内容调用方法，然后更新数据库。我希望这段代码一直运行。同时，我希望用户能够在后台代码不断运行的同时登录并运行报告等。

对此有什么好的方法？我是为不断运行的代码创建一个服务、一个单独的线程、为不断运行的代码创建一个完全独立的项目，还是另一种方法......？

另外，根据给出的答案，我将如何启动不断运行的代码？即只是通过表单加载方法还是有更好的方法？我目前通过单击开始按钮来启动代码；这对于测试很好，但在生产中不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T14:47:46.467

您最适合将[Windows 服务](http://msdn.microsoft.com/en-us/library/d56de412%28v=vs.100%29.aspx)用于**始终运行的任务**。

在 IIS 下的单独线程上运行代码不是一种可靠的机制，因为 IIS 可以随意终止线程以节省服务器资源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T18:28:02.500

鉴于您的问题和对其他答案的澄清：

1.  您的解决方案在无法安装服务的托管环境中运行；
2.  从第三台服务器（即 Azure 等）调用它不是您的选择；

您最好在 Application_Start 事件中启动一个线程来管理数据库工作。您可能希望确保该线程有一些周期性的空闲时间，以免占用过多的托管环境并确保它在您的应用程序结束或重新启动时关闭。

服务确实是最佳的，但是如果您在托管环境中并且不能/不会使用另一台服务器，那么这是不可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T14:50:44.277

使用 Windows 服务。还应该考虑将存储过程用于您提到的数据库交互。在启动 Windows 服务方面，您可以将其设置为自动启动（当操作系统启动时），这意味着它将一直运行直到终止。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T15:02:12.467

我只会推荐一个 Windows 服务，如果它真的*一直*在运行。但是，“总是”通常意味着每 x 秒/分钟/小时/天。

如果 x 大于几分钟，我会将其设为控制台应用程序并通过 Windows 任务计划程序运行它。这样您就不必担心内存泄漏和许多其他问题。

但是，如果它只与数据库一起使用，我会推荐一个存储过程和一个 Sql Job。

# java - 如何获取默认java安装的cacerts的位置？

> ID：11936685
> 
> 赞同：115
> 
> 时间：2012-08-13T14:45:55.080
> 
> 标签：java, security

`cacerts`当您没有`JAVA_HOME`或`JRE_HOME`未定义时，我正在研究如何获取默认 java 安装的位置。

我需要一个至少适用于`OS X`和的解决方案`Linux`。

是的。`java -v`假定工作:)

* * *

## 回答 #1

> 赞同：195
> 
> 时间：2012-08-13T15:56:30.940

在**Linux**下，要查找的位置`$JAVA_HOME`：

```
readlink -f /usr/bin/java | sed "s:bin/java::" 
```

在`cacerts`以下`lib/security/cacerts`：

```
$(readlink -f /usr/bin/java | sed "s:bin/java::")lib/security/cacerts 
```

在**mac OS X**下，查找`$JAVA_HOME`运行：

```
/usr/libexec/java_home 
```

在`cacerts`以下`Home/lib/security/cacerts`：

```
$(/usr/libexec/java_home)/lib/security/cacerts 
```

**更新（带有 JDK 的 OS X）**

上面的代码是在没有安装 JDK 的计算机上测试的。[正如 pR0Ps 所说](https://stackoverflow.com/a/27971915/369977)，安装 JDK后，它位于

```
$(/usr/libexec/java_home)/jre/lib/security/cacerts 
```

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2015-01-15T19:56:30.277

从 OS X 10.10.1 (Yosemite) 开始，`cacerts`文件的位置已更改为

```
$(/usr/libexec/java_home)/jre/lib/security/cacerts 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2018-02-07T00:43:50.190

如果您需要以编程方式访问这些证书，最好根本不使用该文件，而是通过信任管理器访问它。以下代码来自 OpenJDK[测试用例](http://cr.openjdk.java.net/~martin/webrevs/jdk/CacertsExplorer/test/jdk/javax/net/ssl/sanity/CacertsExplorer.java.html)（确保构建的 cacerts 集合不为空）：

```
TrustManagerFactory trustManagerFactory =
    TrustManagerFactory.getInstance("PKIX");
trustManagerFactory.init((KeyStore) null);
TrustManager[] trustManagers =
    trustManagerFactory.getTrustManagers();
X509TrustManager trustManager =
    (X509TrustManager) trustManagers[0];
X509Certificate[] acceptedIssuers =
    trustManager.getAcceptedIssuers(); 
```

因此，您不必处理文件位置或密钥库密码。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2019-07-03T17:02:24.480

在 MacOS Mojave 中，位置是：

```
/Library/Java/JavaVirtualMachines/jdk1.8.0_192.jdk/Contents/Home/jre/lib/security/cacerts 
```

如果使用 sdkman 管理 java 版本，cacerts 在

```
~/.sdkman/candidates/java/current/jre/lib/security 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-03-28T14:22:13.383

在 High Sierra，**cacerts**位于：`/Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk/Contents/Home/jre/lib/security/cacerts`

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2022-01-12T00:23:45.547

`Java 9`以后，它在

> `${JAVA_HOME}/lib/security/cacerts`

与通常的相反

> `${JAVA_HOME}/jre/lib/security/cacerts`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-01-15T20:00:16.777

也可以参考readlink -f " `which java`"。但是，它可能不适用于所有二进制包装器。实际启动一个 Java 类很可能会更好。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-11-05T18:54:30.630

在 Ubuntu 20.04.3 LTS 中，**cacerts**位于：`/etc/ssl/certs/java/cacerts`

```
$ java --version
openjdk 11.0.11 2021-04-20
OpenJDK Runtime Environment (build 11.0.11+9-Ubuntu-0ubuntu2.20.04)
OpenJDK 64-Bit Server VM (build 11.0.11+9-Ubuntu-0ubuntu2.20.04, mixed mode, sharing) 
```

```
$ ls -lah /usr/lib/jvm/java-11-openjdk-amd64/lib/security/cacerts*
/usr/lib/jvm/java-11-openjdk-amd64/lib/security/cacerts -> /etc/ssl/certs/java/cacerts 
```

# .htaccess - 使用 .htaccess 设置 URL 目录样式

> ID：11936687
> 
> 赞同：0
> 
> 时间：2012-08-13T14:46:00.580
> 
> 标签：.htaccess

我已经搜索了这个问题并环顾四周，但似乎无法让它在实践中发挥作用。这是我的 .htaccess 文件：

```
Options +FollowSymLinks
RewriteEngine on
RewriteRule /poker/(.*)/(.*)/$ /poker/?$1=$2 
```

我试图让我的页面像这样工作：

```
mysite.com/poker/page/home 
```

但这不起作用，我使用了 3 种不同的生成器并尝试从教程中手动输入，但它只是返回 404。任何想法都非常感谢，它可能真的很明显..

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T08:41:31.890

`http://mysite.com/poker/?page=home`好吧，如果正确解析，您拥有的规则确实没有错。唯一的问题是，如果这是在 htaccess 文件中，则当它与 a 匹配时，前导斜杠会从 URI 中`RewriteRule`删除，因此您需要将其从正则表达式中删除（或将其设为可选）：

```
RewriteRule ^poker/(.+)/(.+)/?$ /poker/?$1=$2 
```

并且也许`(.+)`改为进行分组，以便那里至少有一个字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T15:22:19.513

您的示例中没有斜杠，但您的规则需要斜杠。您可以使尾部斜杠可选：

```
RewriteEngine on
RewriteRule /poker/(.*)/(.*)/?$ /poker/?$1=$2 
```

但是请注意，`/poker/a/b/c/d/e/f/g/`这里的 uri 也是一个匹配项 -`a/b/c/d/e/f`将匹配第一个子模式并`g`匹配第二个子模式，因为`(.*)`它是贪婪的。如果您希望仅匹配斜杠之间的内容，请更具体 - 例如`([^/]*)`

# facebook - facebook，如何通过 id 数组获取许多用户的个人资料详细信息

> ID：11936691
> 
> 赞同：1
> 
> 时间：2012-08-13T14:46:10.283
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

我如何通过他们的 id 在 FB 中获取用户详细信息？我有 ids 数组，我需要通过 ActionScript 的一个查询来获取所有用户的个人资料，这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T00:39:34.517

此示例取自[Graph API 文档的第一页](https://developers.facebook.com/docs/reference/api/)“选择”标题下：

> 您还可以使用“ids”查询参数在单个查询中请求多个对象。例如，URL [https://graph.facebook.com?ids=arjun,vernal](https://graph.facebook.com?ids=arjun,vernal)在同一响应中返回两个配置文件。

这也适用于 ?fields 选择器，所以你也可以这样做`https://www.graph.facebook.com/?fields=id,name,picture&ids=<CSV LIST OF IDS>`

# linux-device-driver - linux 设备驱动选择/epoll 支持

> ID：11936697
> 
> 赞同：1
> 
> 时间：2012-08-13T14:46:25.803
> 
> 标签：linux-device-driver, epoll

我正在阅读 Linux 设备驱动程序 3rd。在第 6 章：投票和选择中，作者说：

“*unsigned int (*poll) (struct file *filp, poll_table *wait); 每当用户空间程序执行涉及与驱动程序关联的文件描述符的 poll、select 或 epoll 系统调用时，都会调用驱动程序方法。* ”

那么如果我的epoll调用中有数百个fd，每次到达epoll()，驱动中的这个poll会被调用数百次吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T15:42:11.913

是的，内核将遍历所有文件描述符并调用 poll() 方法。它需要对所有文件描述符的当前状态进行采样，以便将它们报告回用户空间中的调用者。

注意，select和poll也是这样，我对epoll不熟悉，但是如果它使用相同的文件op，那么它也应该在这里应用。

# c++ - 读取 .wav 文件 - 不读取标题？

> ID：11936702
> 
> 赞同：0
> 
> 时间：2012-08-13T14:46:36.773
> 
> 标签：c++, file, text, wav

我正在尝试从 .wav 文件中读取标头信息，并且正在读取文件的以下属性：

```
 type 
    size
    Format Tag
    Format Length
    Channels
    Sample Rate
    Average Bytes Second
    Block Align
    Bits Per Sample
    Data size 
```

现在，一切都完美读取，直到读取采样率，然后，输出是“0”值或只是 NULL。

这是代码：（我打开了文本文件，并将指针传递给了成员函数）

```
bool Wav::readHeader(FILE *dataIn)
{
   char type2[4];
   fread(this->type, sizeof(char), 4, dataIn);

   fread(&this->size, sizeof(int), 1, dataIn);

   fread(this->type, sizeof(char), 4, dataIn);

   fread(this->type, sizeof(char), 4, dataIn);

   fread(&this->format_length, sizeof(short), 1, dataIn);

   fread(&this->format_tag, sizeof(short), 1, dataIn);

   fread(&this->channels, sizeof(short), 1, dataIn);

   fread(&this->sample_rate, sizeof(unsigned int), 1, dataIn);

   fread(&this->avg_bytes_sec, sizeof(unsigned short), 1, dataIn);

   fread(&this->block_align, sizeof(short), 1, dataIn);

   fread(&this->bits_per_sample, sizeof(short), 1, dataIn);

   return true;
} 
```

类成员定义为：

```
 char type[4]; 
    int size;
    unsigned short format_tag;
    unsigned short format_length;
    unsigned short channels;
    unsigned int sample_rate;
    unsigned short avg_bytes_sec;
    unsigned short block_align;
    unsigned short bits_per_sample;
    unsigned int data_size; 
```

有没有人有任何解决方案或建议？

（如果这个问题不正确，PS 道歉。我已经尽力写了！）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T16:22:28.663

如果您有表示 (PCM) WAVE 标头的紧凑结构，它将如下所示：

```
struct Riff
{
  char chunkId[4]; // "RIFF" (assuming char is 8 bits)
  int chunkSize; // (assuming int is 32 bits)
  char format[4]; // "WAVE"
};

struct Format
{
  char chunkId[4]; // "fmt "
  int chunkSize;
  short format; // assuming short is 16 bits
  short numChannels;
  int sampleRate;
  int byteRate;
  short align;
  short bitsPerSample;
};

struct Data
{
  char chunkId[4]; // "data"
  int chunkSize; // length of data
  char* data;
};

struct Wave // Actual structure of a PCM WAVE file
{
  Riff riffHeader;
  Format formatHeader;
  Data dataHeader;
}; 
```

从本质上讲，您的问题是`format_length`（`Format::chunkSize`在我的结构中）和`avg_bytes_sec`（`Format::byteRate`在我的结构中）在您的代码中各有 2 个字节，但它们每个都应该是 4。您也没有读取数据子块的标头，但我认为这是故意的？

要阅读，您可以执行以下操作：

```
void readWave(std::ifstream& file, Wave& wave)
{
  // First read the RIFF header
  file.read(wave.riffHeader.chunkId,                                   4);
  file.read(reinterpret_cast<char*>(&wave.riffHeader.chunkSize),       4);
  file.read(wave.riffHeader.format,                                    4);

  // Now read the FORMAT header
  file.read(wave.formatHeader.chunkId,                                 4);
  file.read(reinterpret_cast<char*>(&wave.formatHeader.chunkSize),     4);
  file.read(reinterpret_cast<char*>(&wave.formatHeader.format),        2);
  file.read(reinterpret_cast<char*>(&wave.formatHeader.numChannels),   2);
  file.read(reinterpret_cast<char*>(&wave.formatHeader.sampleRate),    4);
  file.read(reinterpret_cast<char*>(&wave.formatHeader.byteRate),      4);
  file.read(reinterpret_cast<char*>(&wave.formatHeader.align),         2);
  file.read(reinterpret_cast<char*>(&wave.formatHeader.bitsPerSample), 2);

  // Now read the DATA header
  file.read(wave.dataHeader.chunkId,                                   4);
  file.read(reinterpret_cast<char*>(&wave.dataHeader.chunkSize),       4);

  // The actual data goes in wave.dataHeader.data, so you can allocate it
  // and then read direclty into it now
} 
```

[Michael 的链接是我在需要读/写 WAVE 文件时经常使用的链接](https://ccrma.stanford.edu/courses/422/projects/WaveFormat/)（我不得不多次这样做）。我建议你仔细阅读。

如果您的“数据”块之前的 WAVE 文件中有额外的块，则此代码应该能够跳过它们：

```
void readWave(std::ifstream& file, Wave& wave)
{
  // First read the RIFF header
  file.read(wave.riffHeader.chunkId,                                   4);
  file.read(reinterpret_cast<char*>(&wave.riffHeader.chunkSize),       4);
  file.read(wave.riffHeader.format,                                    4);

  // Now read the FORMAT header
  file.read(wave.formatHeader.chunkId,                                 4);
  file.read(reinterpret_cast<char*>(&wave.formatHeader.chunkSize),     4);
  file.read(reinterpret_cast<char*>(&wave.formatHeader.format),        2);
  file.read(reinterpret_cast<char*>(&wave.formatHeader.numChannels),   2);
  file.read(reinterpret_cast<char*>(&wave.formatHeader.sampleRate),    4);
  file.read(reinterpret_cast<char*>(&wave.formatHeader.byteRate),      4);
  file.read(reinterpret_cast<char*>(&wave.formatHeader.align),         2);
  file.read(reinterpret_cast<char*>(&wave.formatHeader.bitsPerSample), 2);

  // WAVE files are just a special type of RIFF file, so it's possible
  // there are other chunks, like "fact" chunks. We'll skip over these
  // extra chunks until we find a "data" chunk
  char chunkId[4] = {0};
  int chunkSize = 0;
  while (file.read(chunkId, 4) &&
         (chunkId[0] != 'd' ||
          chunkId[1] != 'a' ||
          chunkId[2] != 't' ||
          chunkId[3] != 'a'))
    {
      file.read(reinterpret_cast<char*>(&chunkSize), 4); // Read the chunk's size
      file.seekg(chunkSize, std::ios_base::cur); // Skip the chunk
    }

  // We've found the DATA chunk and header
  wave.dataHeader.chunkId[0] = chunkId[0];
  wave.dataHeader.chunkId[1] = chunkId[1];
  wave.dataHeader.chunkId[2] = chunkId[2];
  wave.dataHeader.chunkId[3] = chunkId[3];
  file.read(reinterpret_cast<char*>(&wave.dataHeader.chunkSize),       4);

  // The actual data goes in wave.dataHeader.data, so you can allocate it
  // and then read direclty into it now
} 
```

# jquery - 如何在显示 jQuery 对话框后立即触发事件？

> ID：11936703
> 
> 赞同：0
> 
> 时间：2012-08-13T14:46:37.973
> 
> 标签：jquery, jquery-ui

我正在编写一个脚本，该脚本使用 jQuery Ui 对话框中的图像构建模式。此对话框通过锚点单击打开。我需要使用另一个图像的位置作为参考来放置图像。问题是似乎虽然没有显示对话框，但我无法检索参考图像的正确位置。

因此，我需要一种在显示对话框后立即触发事件的方法，以便正确放置图像。

有什么办法吗？

亲切的问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:48:48.370

**创造**

*类型：* **对话框创建**

创建对话框时触发此事件。

提供一个回调函数来处理 create 事件作为一个 init 选项。

```
$( ".selector" ).dialog({
   create: function(event, ui) { ... }
}); 
```

按类型绑定到 create 事件：dialogcreate。

```
$( ".selector" ).bind( "dialogcreate", function(event, ui) {
  ...
}); 
```

[http://jqueryui.com/demos/dialog/#event-create](http://jqueryui.com/demos/dialog/#event-create)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T14:57:33.657

使用[开放事件](http://jqueryui.com/demos/dialog/#event-open)

```
$( ".selector" ).dialog({
   open: function(event, ui) { ... }
}); 
```

每次打开对话框时都会调用该函数

# iphone - 基于先前 viewController、Class 或 rootViewController 的数据

> ID：11936705
> 
> 赞同：1
> 
> 时间：2012-08-13T14:46:46.573
> 
> 标签：iphone, objective-c, ios, ios5

我有 4 个单独的 tableViews，当被选中时，对包含四个选项卡的 tabBarController 进行模态搜索。在这四个选项卡中，它们都有一个执行 XML 解析的通用选项卡。

我做了一些阅读，似乎我有三种方法。我可以

A）使用类来定义数据的来源，但我不想实例化所有选项

B）找出当前的 TabBarController 是什么并将其用作条件

c）找出我们从哪里开始并使用这些数据

这将是执行此操作的最佳方式，我将如何执行（segue 正在处理正在传递的数据）。请注意，我没有使用 UINavigationController。

我基本上想最终得到一个开关，根据它的来源来执行功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T15:43:12.893

好吧，你可以使用单例。

您还可以根据需要创建一个数据模型并将指向它的指针传递给您的各种类。

至于使用开关，只需使用某种索引（例如数组）设置您的数据，然后根据当前的标签栏对象拉取它。如果您打算使用，`UITabBarController`则调用其`selectedIndex`属性以了解选择了哪个选项卡栏项。

# javascript - 允许 My(!) 网站与 iframe 通信？

> ID：11936706
> 
> 赞同：7
> 
> 时间：2012-08-13T14:46:47.833
> 
> 标签：javascript, html

我拥有所有权`A.com`（*我希望...*）

我也拥有`B.com`

是否有任何 HTML*标签/令牌/代码*可以允许`B.com`这样做：`top.myFunc()`

```
 ________________
| A.com          |
|   __________   |
|   | B.com   |  |
|   |_________|  |
|________________| 
```

*ps：我见过很多关于这个话题的问题，但没有一个关于一个人拥有 2 个域并**希望** 允许这样做的问题。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T14:50:52.670

这些文章可以帮助你

[http://davidwalsh.name/window-iframe](http://davidwalsh.name/window-iframe)
[http://ternarylabs.com/2011/03/27/secure-cross-domain-iframe-communication/](http://ternarylabs.com/2011/03/27/secure-cross-domain-iframe-communication/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T14:58:49.100

我没有这个问题的完美答案，但我想指出，Facebook 应用程序会做类似的事情！

Facebook 应用程序驻留在 B.com，而 Facebook 本身就是 A.com。要访问 Facebook 在其 API 中提供的一些方法，您必须在 B.com/index.html 中包含 all.js，然后从 A.com/all.js 加载。这样，您至少可以调用这个 all.js 文件提供的操作。

Facebook 还使用 channel.html 文件使跨域访问成为可能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T15:33:56.893

有什么阻止您使用[window.postMessage](https://developer.mozilla.org/en-US/docs/DOM/window.postMessage)吗？

# java - 与数字连接时，Java 字符串比较不起作用

> ID：11936714
> 
> 赞同：2
> 
> 时间：2012-08-13T14:47:11.177
> 
> 标签：java

我对 java 人的问题是，当我比较两个字符串时

```
imageName=new String[20];    
....    
imageName[1]="img1";  
imageName[2]="img1";  

if(imageName[1]==imageName[2])  
{  
 ////  codes  
} 
```

它工作得很好，但是当我通过数字连接制作字符串时它不起作用

```
imageName=new String[20];  
int j=1,k=1;  
imageName[1]="img"+j;  
imageName[2]="img"+k;

 if(imageName[1].toString()==imageName[2].toString())     
        {  
           ////  codes  
        } 
```

尽管 j 和 k 的值相同，但它不起作用

提前感谢您的解决方案

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T14:49:09.933

比较两个字符串时应该使用[String.equals ：](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#equals%28java.lang.Object%29)

```
if (imageName[1].equals(imageName[2]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T14:49:23.127

您不应将字符串与 进行比较`==`，而应使用`.equals`方法：`imageName[1].equals(imageName[2])`。

`==`比较指针是否相等，因此`true`如果两个变量都表示内存中完全相同的实例。在第一种情况下，之所以如此，是因为 Java 池化字符串文字以提高性能。但是在第二种情况下，您将获得两个不同的堆分配对象，尽管它们的**内容**相同，但它们仍然是两个不同的对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T14:49:35.733

您正在比较两个 String 是否是完全相同的对象。

您的意图是比较它们的内容。我建议你`.equals`改用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T14:50:29.327

*永远不要*使用“==”来比较 Java 中的字符串。使用`equals()`方法。`==`运算符检查两个 String 变量是否引用内存中的同一位置，而该方法`equals()`检查两个单独的 String 对象是否包含相同的字符。这是第二个定义在这里有意义：您的字符串连接正在创建单独的字符串对象，但我们仍然希望将它们视为“相等”。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-13T14:53:29.573

`The correct way to compare strings is using equals() method`

所以，请更改您的代码如下，

```
if (imageName[1].equals(imageName[2]) 
```

并且请考虑在发布之前对 SO 进行研究，因为这样的问题之前已经回答过很多次了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-13T14:50:20.027

比较两个`String`你最好使用`equals()`方法

```
 `if(imageName[1].equals(imageName[2]))

        {

           ////  codes

        }` 
```

* * *

 `## 回答 #7

> 赞同：0
> 
> 时间：2012-08-13T14:52:10.527

`==`是参考比较。也就是说，您正在确定这两个对象是否实际上是同一个对象。如果您使用`equals()`，那么该方法会比较字符串的内容，即这些对象是否具有相同的内容（您会明白这里有细微的差别）

您的第一个场景有效，因为编译器足够聪明，可以意识到您有两次相同的字符串。即它看起来：

```
imageName[1]="img1";  
imageName[2]="img1"; 
```

并确定您的数组元素可以指向*同一个*对象。在你的第二种情况下，这不再是真的。

```
imageName[1]="img"+j;  
imageName[2]="img"+k; 
```

编译器无法可靠地确定这些可能是相同的字符串对象（也非常正确）。

所以（一般来说）你应该使用 equals() 来比较`Strings`。您可以使用引用相等（它更快，因为它比较引用而不是字符串内容），但您必须*绝对确定*您在做什么（也许您正在使用`String.intern()`- 但那里有[缺点](http://www.codeinstructions.com/2009/01/busting-javalangstringintern-myths.html)）`

# fluid - 位置绝对流体设计

> ID：11936727
> 
> 赞同：1
> 
> 时间：2012-08-13T14:47:51.907
> 
> 标签：fluid

这是 4 个图像（宽度 = 160 像素）的流畅设计，带有 ul 或浮动 div。调整窗口大小时一切都很好。它是流动的。

但是当我传递到一个绝对位置时，我最初发现没有 160px

代码：

> 身体 { 位置：相对；} .container { /*位置：绝对；左：0；顶部：0；*/ /* 删除这条注释以查看差异 */ margin: 0; 填充：0；边框：黑色 1px 实心；最大宽度：690px；溢出：隐藏/*清除浮动孩子*/；} .galleryItem {浮动：左；宽度：23%；保证金：0 1%；padding:1% 0;} .galleryItem img { max-width: 100%;} ul { list-style:none;} ul.thumbs
> { / *position:absolute; 左：0；顶部：100px；*/ /* 去掉这个注释看看有什么不同 */ display:block; 边距：0；填充：0；边框：黑色 1px 实心；最大宽度：690px；溢出：隐藏/*清除浮动孩子*/;} ul.thumbs>li{ display:block; 向左飘浮; 宽度：23%；保证金：0 1%；padding:1% 0;} ul.thumbs>li img{ display:block; 最大宽度：100%；}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T07:35:35.753

我认为不要将 % 和 px 混合用于液体设计。我知道我可以说，如果位置是绝对的，那么有些东西是固定的，所以没有液体。如果您希望液体设计更好地以百分比进行定位。您也可以使用引导 css 进行响应式设计。

# c++ - 如果我用非常量参数定义了复制构造函数和 operator=，我还会得到默认的复制构造函数和 operator= 吗？

> ID：11936730
> 
> 赞同：7
> 
> 时间：2012-08-13T14:48:01.867
> 
> 标签：c++, constants, language-lawyer, default-copy-constructor

在 C++ 中，如果我定义了一个复制构造函数和 operator= 对类进行非常量引用，编译器是否应该仍然为 const 引用提供默认版本？

```
struct Test {
  Test(Test &rhs);
  Test &operator=(Test &rhs);

private:
  // Do I still need to declare these to avoid automatic definitions?
  Test(const Test &rhs);
  Test &operator=(const Test &rhs);
}; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T14:50:41.640

不，如果您定义了复制构造函数和赋值运算符，编译器将不会隐式声明或定义它自己的。请注意，*copy-constructor*的定义允许参数由 const 或非 const 引用采用，因此您的构造函数确实是一个*copy-constructor*。同样对于`operator=`

[*省略了很大一部分细节，特别是在什么情况下*隐式声明的*特殊成员函数也会被*隐式定义]

> 12.8 [class.copy]/2 类 X 的非模板构造函数是复制构造函数，如果它的第一个参数是 X&、const X&、volatile X& 或 const volatile X& 类型，并且要么没有其他参数，要么所有其他参数参数具有默认参数 (8.3.6)。
> 
> 12.8 [class.copy]/7 如果类定义没有显式声明复制构造函数，则隐式声明。
> 
> 12.8 [class.copy]/17 用户声明的复制赋值运算符 X::operator= 是类 X 的非静态非模板成员函数，只有一个 X、X&、const X&、volatile X& 或 const 类型的参数挥发性X&。
> 
> 12.8 [class.copy]/18 如果类定义没有显式声明复制赋值运算符，则隐式声明一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T14:59:07.100

不，一旦您声明了自己的复制构造函数或复制赋值运算符（无论它是否使用规范`const`性），编译器将不再为您执行此操作。

但是通过非常量引用来做到这一点几乎是违反最小意外原则的教科书示例。每个人都希望可以分配 const 对象，并且右侧不会发生变异。第一个并没有那么糟糕，因为编译器会捕捉到它，但第二个可能会导致各种难以发现的错误。

如果您尝试实现移动语义并且不能使用 C++11，我建议创建一个特殊的移动方法，并且根本不允许“移动”构造。如果您可以使用 C++11，则使用内置的右值引用。

# zend-framework - '"php.exe"' 未被识别为内部或外部命令

> ID：11936732
> 
> 赞同：3
> 
> 时间：2012-08-13T14:48:07.250
> 
> 标签：zend-framework, environment-variables, wamp

我正在尝试使用 wamp 创建一个新的 zend 项目。

```
Microsoft Windows XP [Version 5.1.2600]
(C) Copyright 1985-2001 Microsoft Corp.

C:\> cd wamp\www\zendtest*

C:\wamp\www\zendtest>C:\wamp\www\zend\bin\zf.bat create project quickstart*

'"php.exe"' is not recognized as an internal or external command,
operable program or batch file.

C:\wamp\www\zendtest> 
```

我的环境变量路径是

%SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem;C:\PROGRA~1\IBM\SQLLIB\BIN;C:\PROGRA~1\IBM\SQLLIB\FUNCTION;C:\Program Files\ Zend\MySQL51\bin;C:\wamp\www\zend\bin;

这是我认为是错误的部分。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-12T05:17:51.083

`zf.bat`替换文件中的这一行

```
SET PHP_BIN=C:\wamp\bin\php\php5.3.4\php.exe 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T05:41:35.240

当我启动 Zend 时，我也遇到了同样的错误。以下是一些**解决**此问题的方法。

1.  确保**PHP 解释器路径**（例如，C:\wamp\bin\php\php5.3.8\bin）设置为环境变量路径。只能设置一个 PHP 解释器。
2.  确保您的 WAMP 文件夹和工作目录（例如 www 目录）具有正确执行的**有效权限集**。
3.  确保您的**防病毒/防火墙**或任何其他软件阻止了对 php.exe 的访问。我之所以这么说，是因为在 Windows 7 中，用户访问控制功能不允许从命令行执行 php.exe。

我建议您使用内置支持 Zend 和 Doctrine ORM 的 NetBeans 7.2。这要容易得多。但是您也必须在初始状态中执行上述技术。可以从 NetBeans 上下文菜单直接执行命令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-21T14:07:21.957

即使我将环境路径添加到 Windows，在新安装时也会遇到此错误。

如果 NetBeans 正在运行，您需要启动它，因为这些变量是在启动时加载的。

# javascript - .click 函数仅适用于断点

> ID：11936738
> 
> 赞同：0
> 
> 时间：2012-08-13T14:48:18.353
> 
> 标签：javascript, jquery, html

`enter code here`我有一个点击框，在这个框内我有一个按钮。当弹出窗口显示时，我通过 javascript 设置了 .click 函数。只有当我在

```
$("#button").click(function (event) 
```

[http://www.leecarmichael.com/bootstrapx-clickover/examples.html](http://www.leecarmichael.com/bootstrapx-clickover/examples.html)

任何想法将不胜感激

```
 $('.socialMediaEnabled .btn-palette-checkbox-unchecked').clickover(
    {
        //      auto_close: 3 * 1000,
        width: 170, height: 80,
        placement: 'right',
        onShown: function () {  button.init(); }
    })

var button= function (credentials, url) 
{
    this.init = function () 
    {
        //facebook
        $("#button").attr('onclick', '').unbind('click');
        $("#button").click(function (event) 
        {

        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T15:00:23.410

当我运行该代码时，我收到一条错误消息，指出 init 不是一个有效的函数。

尝试在按钮对象上使用 new ：

```
var button = new function() {
    this.init= function() {
        //facebook
        $("#button").attr('onclick', '').unbind('click');
        $("#button").click(function(event) {
             alert('a');
        });
    }
}​ 
```

小提琴：http: [//jsfiddle.net/johnkoer/XWbfV/19/](http://jsfiddle.net/johnkoer/XWbfV/19/)

# c++ - 如何在 OOP 程序中共享结构？

> ID：11936739
> 
> 赞同：0
> 
> 时间：2012-08-13T14:48:19.550
> 
> 标签：c++, struct

我正在编写一个 OOP 代码，我需要在文件之间共享一个结构。我将结构放在 .h 文件的末尾并包含它。如：

```
struct icsData
{
    AudioBuilder *audioBPtr;
}icsDataPtr; 
```

然后我收到以下错误：

```
NetworkSocket.o:(.bss+0x0): multiple definition of `icsDataPtr'
main.o:(.bss+0x0): first defined here
AudioCore.o:(.bss+0x10): multiple definition of `icsDataPtr'
main.o:(.bss+0x0): first defined here
AudioBuilder.o:(.bss+0x0): multiple definition of `icsDataPtr'
main.o:(.bss+0x0): first defined here
AudioInterface.o:(.bss+0x0): multiple definition of `icsDataPtr'
main.o:(.bss+0x0): first defined here
ChannelEndpoint.o:(.bss+0x0): multiple definition of `icsDataPtr'
main.o:(.bss+0x0): first defined here
Device.o:(.bss+0x0): multiple definition of `icsDataPtr'
main.o:(.bss+0x0): first defined here
MainCore.o:(.bss+0x0): multiple definition of `icsDataPtr'
main.o:(.bss+0x0): first defined here
MicroHandShake.o:(.bss+0x0): multiple definition of `icsDataPtr'
main.o:(.bss+0x0): first defined here
FrameBuilder.o:(.bss+0x0): multiple definition of `icsDataPtr'
main.o:(.bss+0x0): first defined here
RealTimeStatus.o:(.bss+0x0): multiple definition of `icsDataPtr'
main.o:(.bss+0x0): first defined here
collect2: error: ld returned 1 exit status
make: *** [eCom] Error 1 
```

问：可以分享吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T14:51:43.733

您需要在一个地方定义它。在头文件中定义它，您将拥有多个定义，因为源文件包含该头文件。

`cpp`在一个文件中定义它，并`extern`用于其他文件。例如

```
// cpp1
struct icsData
{
    AudioBuilder *audioBPtr;
}icsDataPtr;

// cpp2
struct icsData;
extern icsData icsDataPtr; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T14:52:34.030

您必须使用`extern`关键字，然后在一个翻译单元中定义它：

头文件：

```
struct icsData
{
    AudioBuilder *audioBPtr;
};

extern icsData icsDataPtr; 
```

一些cpp文件：

```
icsData icsDataPtr; 
```

请注意，这并不是真正的面向对象。您可能希望创建一个提供指针实例的静态类，或者只是使该类成为单例，具体取决于您想共享多少公共对象。如果可能，应避免使用全局对象或变量。

# perl - 如何逐列读取 CSV 文件以进行转置？

> ID：11936740
> 
> 赞同：0
> 
> 时间：2012-08-13T14:48:27.370
> 
> 标签：perl, csv, large-files, transpose

我有以下格式的数据集：

```
snp,T2DG0200001,T2DG0200002,T2DG0200003,T2DG0200004
3_60162,AA,AA,AA,AA
3_61495,AA,AA,GA,GA
3_61466,GG,GG,CG,CG 
```

真实的数据比这大得多，扩展到数百万行和大约一千列。我的最终目标是转置这个怪物并将结果输出到一个文本文件（或 CSV 文件或其他文件，无所谓）中。

我需要将数据逐个输入我的计算机，以免内存超载。我逐行读取 CSV 文件，然后将其转置，然后写入文件。然后，我循环返回并重复这些步骤，并在执行过程中附加到文本文件中。

问题当然是如果结果是原始数据文件的转置，我应该**逐列而不是逐行附加文本文件。**但一位朋友告诉我，这在 Perl 代码中是不可行的。我想知道我是否可以逐列读取数据。有没有类似的东西，比如我在原始代码中使用的[`getline`方法](http://p3rl.org/IO%3a%3aHandle#io-getline)

```
while (my $row = $csv->getline ($fh)) { 
```

可以返回列而不是行？`cut`如果不需要将整个数据加载到内存中，则首选类似于 Unix命令的命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T15:20:28.013

CSV 只是一个文本文件；它由一大长行的文本字符组成，因此不能随机访问列。理想情况下，您会将 CSV 放入数据库中，然后该数据库就可以直接执行此操作。

然而，除此之外，我相信你*可以*在 Perl 中稍微聪明一点地做到这一点。我的方法是这样的：

```
my @filehandles;
my $line = 0;    

while (my $row = $csv->getline ($fh)<FILE>)
{
   #open an output file for each column!
   if (not defined $filehandles[0])
   {
       for (0..$#$row)
       {
           local $handle;
           open $handle, ">column_$_.txt" or die "Oops!";
           push @filehandles, $handle;
       }
   }

   #print each column to its respective output file.
   for (0..$#$row)
   {
       print $filehandles[$_] $row->[$_] . ",";
   }

   #This is going to take a LONG time, so show some sign of life.
   print '.' if (($line++ % 1000) == 0);
} 
```

最后，每列将在其自己的文本文件中打印为一行。不要忘记关闭所有文件，然后再次打开它们以供阅读，然后一次将它们写入一个输出文件。我的猜测是这会很慢，但足够快以执行数百万行，只要您不必经常这样做。而且它不会面临内存限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T15:04:01.750

如果文件不适合您的计算机内存，您的程序必须多次读取它。没有其他办法了。

可能有一些模块掩盖或隐藏了这一事实——比如 DBD::CSV——但那些只是在幕后做同样的工作。

# php - PHP 序列化格式

> ID：11936744
> 
> 赞同：1
> 
> 时间：2012-08-13T14:48:34.700
> 
> 标签：php, serialization

我正在尝试使用 Python phpserialize 库从 PHP 读取序列化会话数据。但是，我发现我的 PHP 设置以不同于 phpserialize（以及几乎所有其他网络文档）所期望的格式保存会话数据。例如：

```
$_SESSION["userid"] = 42;
echo session_encode(); 
```

打印出来

```
userid|i:42; 
```

而 phpserialize 将其序列化为：

```
phpserialize.serialize({'userid':42})
'a:1:{s:6:"userid";i:42;}' 
```

我通过 phpinfo() 检查了 session.serialize_handler 并将其设置为“php”（其他选项是 php_binary 和 wddx）。结果，我无法在 python 中使用任何标准的 php 序列化库。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T16:38:53.350

如果你想将它从 PHP 传递给 Python，`serialize`你应该调用数组。`$_SESSION`

例子：

```
echo serialize($_SESSION); 
```

然后结果将由 PHP 序列化库解释。

`session_encode`不一样`serialize`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T14:58:44.417

在 PHP 中序列化变量，在 Python 中序列化数组。

这段代码：

```
$data = array('userid' => 42);
echo json_encode($data); 
```

将向您显示与 phpserialize 相同的结果。

但最好使用 json_encode/json_decode 在 php 应用程序和 python 应用程序之间传输数据。

# android - 从 xml 膨胀类片段时出错

> ID：11936745
> 
> 赞同：1
> 
> 时间：2012-08-13T14:48:45.167
> 
> 标签：android, android-fragments, android-xml

我在这里发现了几个类似的问题，但建议的答案不适合我。

所以错误是：

```
08-13 14:40:10.723: E/AndroidRuntime(630): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.fragments/com.example.fragments.MainActivity}: android.view.InflateException: Binary XML file line #7: Error inflating class fragment 
```

我的主要活动是：

```
 package com.example.fragments;

import android.os.Bundle;
import android.support.v4.app.FragmentActivity;

public class MainActivity extends FragmentActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

} 
```

我的xml是：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <fragment
        android:id="@+id/listFragment"
        android:layout_width="150dip"
        android:layout_height="match_parent"
        android:layout_marginTop="?android:attr/actionBarSize"
        class="com.example.fragments.ListFragment" >
    </fragment>

    <fragment
        android:id="@+id/detailFragment"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        class="com.example.fragments.DetailFragment" >
    </fragment>

</LinearLayout> 
```

非常感谢有关此问题的任何帮助

xx

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T20:44:07.330

所以基本上问题是通过在项目中实现所有与 Fragment 相关的导入来解决的，如下所示：

```
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.Fragment;
import android.support.v4.app.ListFragment 
```

而不是：

```
import android.app.Fragment
import android.app.FragmentActivity
import android.app.ListFragment 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T15:24:05.377

我认为错误可能是由于

```
android:layout_marginTop="?android:attr/actionBarSize" 
```

actionBarSize 仅在 api 11 中引入，并且当您使用支持库时，我假设您正在 Android 3.0 之前的设备上进行开发。尝试删除该属性，看看是否是问题所在。

# c# - 获取文件名子串的不同计数

> ID：11936748
> 
> 赞同：1
> 
> 时间：2012-08-13T14:48:51.017
> 
> 标签：c#, linq

我有一个包含文件名列表的目录。

VAH007157100-pic1.jpg
VAH007157100-pic2.jpg
VAH007157100-pic3.jpg

WAZ009999200-pic1.jpg
WAZ009999200-pic2.jpg
WAZ009999200-pic3.jpg

我想知道子串 (0, 12) 的不同计数。

由于某种原因，这不起作用：

```
string[] originalFiles = Directory.GetFiles(SelectedDirectory);

private int GetDistinctPolicyCountInDirectory()
        {
            var prefixes = originalFiles
                .GroupBy(x => x.Substring(0, 12))
                .Select(y => new { Policy = y.Key, Count = y.Count() });

            return prefixes.Count();
        } 
```

我一直得到 0。我在这里遗漏了什么吗？

请注意，我不想进行拆分以将数字分开。我想通过子串来做到这一点。

更新 -

```
private int GetDistinctPolicyCountInDirectory(string[] originalFiles)
        {
            var count = originalFiles.Distinct(x => Path.GetFileName(x).Substring(0, 12)).Count();

            return Convert.ToInt32(count);
        } 
```

我在这里遇到一个错误，它说：错误1无法将lambda表达式转换为类型'System.Collections.Generic.IEqualityComparer'，因为它不是委托类型

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T14:52:53.303

我只是考虑使用`.Distinct()`.

此外，您需要将其剥离为文件名而不是完整的文件路径。

```
originalFiles.Select(x => Path.GetFileName(x).Substring(0, 12))
             .Distinct().Count(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T14:54:10.097

`GetFiles`返回具有完整路径的文件名数组，包括目录。您只想比较文件名，因此您应该考虑使用`Path.GetFileName`.

`GroupBy(x => Path.GetFileName(x).Substring(0, 12));`

# android - 在Android中运行robotium测试套件时出现OutOfMemory异常

> ID：11936751
> 
> 赞同：0
> 
> 时间：2012-08-13T14:49:00.177
> 
> 标签：android, maven, out-of-memory, robotium

我正在使用maven为我的android应用程序运行robotium测试套件，但是我遇到了Java：内存不足异常，尽管当我尝试单独运行测试文件时它们运行良好。我尝试使用 MAT 分析堆转储，它说罪魁祸首是一个数组列表，它保存着我所有测试文件的对象，而这些对象又保存着他们正在测试的活动的对象。转储分析为 9.4MB，这个 araylist 包含 4.3MB。请提出任何解决方案。

提前致谢！！马扬克

受保护的 void tearDown() 抛出异常 {

```
 //Log out...

    solo.sendKey(Solo.MENU);
    solo.clickOnText("More");
    solo.clickOnText("Logout");
    if (solo.searchButton("Logout")) {
        solo.clickOnButton("Logout");
    }

    solo.waitForActivity(LoginActivity.class.getName(), 1000);

    assertTrue(solo.searchText("Your id"));

    int i = 0;

    while(solo.getAllOpenedActivities()!=null && solo.getAllOpenedActivities().size()>0){

        solo.finishOpenedActivities();
        solo.goBack();                                  

        if(i++>5){
            break;
        }
    }

    solo.finishOpenedActivities();

    solo = null;
    System.gc();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T15:10:06.887

您描述的问题已在 Robotium 版本 3.4.1 中修复。请改用该版本。

# c++ - C++中的向量迭代器

> ID：11936754
> 
> 赞同：2
> 
> 时间：2012-08-13T14:49:17.433
> 
> 标签：c++, vector, iterator, segmentation-fault

我正在尝试使用迭代器来遍历`vector<char*>`c++ 中的 a。我已经构建了一个虚拟程序，它应该从末尾开始，然后在大于 0 的数字上后退（朝向开头，或`rend()`），在数字 <0 上前进（朝向结尾，或`rbegin()`），然后在 0 上退出. 如果迭代器已经到达任一端并且用户试图进一步，它应该在该端重复元素并且不移动迭代器。我的问题是，如果用户试图跑到最后，而不是这样做，我只会得到一个段错误。这是我的代码：

```
#include <iostream>
#include <vector>
#include <stdio.h>

using namespace std;

int main(){
    vector<char*> vect;
    char* tmp;
    for (int i=1; i<=5; i++){
        tmp = new char[7];
        sprintf(tmp, "hello%d", i);
        vect.push_back(tmp);
    }

    vector<char*>::const_reverse_iterator it = vect.rbegin();

    int a;
    cin >> a;

    while (a!=0){
        if (a>0){
            if (it < vect.rend()){
                cout << *(++it) << endl;
            } else{
                cout << *it << endl;
            }
        } else{
            if (it > vect.rbegin()){
               cout << *(--it) << endl;
            } else{
                cout << *it << endl;
            }
        }
        cin >> a;
    }

    return 0;
} 
```

任何人都可以识别问题吗？

**编辑**

我忘了我做了一个小改动。我之前的代码没有填充`tmp`到初始化 for 循环中。已修复

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T14:54:30.783

问题是`rend`迭代器将一个项目指向序列的（反向）结束。取消引用它会导致段错误：

```
 if (it < vect.rend()){
        cout << *(++it) << endl;
    } else{
        cout << *it << endl;    // <---- segfault
    } 
```

一个最小的修复可能是

```
if (it+1 < vect.rend())
{
    cout << *(++it) << endl;
} else{
    cout << *it << endl;   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T15:56:26.637

由于目标实际上是不使用过去的位置，所以我重新定义了这个问题：它需要两个迭代器，一个指向所需范围内的第一个元素，一个指向最后一个。然后机制变得简单：

```
if (it != end)
    ++it;
cout << *it << endl; 
```

同样，往另一个方向发展：

```
if (it != begin)
    --it;
cout << *it << endl; 
```

开始和结束的定义如下：

```
typedef vector<char*>::reverse_iterator iter;
iter begin = vect.rbegin();
iter end = --vect.rend();  // assumes that vect is not empty 
```

# c# - 如何装饰（Active Record 属性）我的主键，使其在 SQL Server 2008 中生成为 IDENTITY

> ID：11936756
> 
> 赞同：0
> 
> 时间：2012-08-13T14:49:21.633
> 
> 标签：c#, sql-server-2008, castle-activerecord

![在此处输入图像描述](../Images/dbdf46df63dfdca548344f518444e04c.png)

我正在使用 Active Record 并用属性装饰我的类。

我有一个主键，属性是：

```
[PrimaryKey(PrimaryKeyType.Native, Column = "ID")] 
```

然后我根据 C# 类自动生成 SQL Server 2008 的表。

结果是：

```
CREATE TABLE [dbo].[MyTable](
    [ID] [int] NOT NULL, 
```

……

但我想要的是：

```
CREATE TABLE [dbo].[MyTable](
    [ID] [int] NOT NULL IDENTITY, 
```

如您所见，我生成的 T-SQL 中缺少 IDENTITY 关键字。

我应该使用什么属性来制作我的主键 IDENTITY？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T15:04:06.690

我假设您正在使用 The Castle Project Active Records。所以，你需要`PrimaryKeyType.Identity`属性。代码：

```
[PrimaryKey(PrimaryKeyType.Identity, Column = "ID")] 
```

# data-structures - 在 opencl 中使用自定义结构

> ID：11936765
> 
> 赞同：3
> 
> 时间：2012-08-13T14:49:41.333
> 
> 标签：data-structures, opencl

我正在尝试将自定义数据结构与 OpenCL 内核一起使用。我在我的主机程序中定义了一个简单的结构，例如：

```
struct myStruct{
   cl_ulong n_occ;
   cl_ulong start_time;
   cl_ulong end_time;
   cl_ulong exec_time;
   cl_ulong total_time;
   cl_float avg_time;
} myStruct_t; 
```

等效的自定义数据结构定义也在我的 OpenCL 内核中完成。

```
struct myStruct{
   unsigned long n_occ;
   unsigned long start_time;
   unsigned long end_time;
   unsigned long exec_time;
   unsigned long total_time;
   float avg_time;
} myStruct_t; 
```

核函数如下：

```
__kernel void process_data( __global myStruct_t* input, __global myStruct_t* output){
    output->start_time = input->start_time;
    output->end_time = input->end_time;
    output->exec_time = input->end_time - input->start_time;
    output->total_time = input->total_time + output->exec_time;
    output->n_occ = input->n_occ + 1;
    output->avg_time = output->total_time / output->n_occ;
} 
```

我使用 Nvidia 卡作为 GPU 设备。执行内核代码后，我得到了不正确的结果。我不明白原因。有什么遗漏吗？

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T15:32:33.073

您是否检查过您的主机结构 (C) 是否正确[打包](http://en.wikipedia.org/wiki/Data_structure_alignment#Default_packing_and_.23pragma_pack)（同时确保 OpenCL 端[打包正确](http://www.khronos.org/registry/cl/sdk/1.1/docs/man/xhtml/attributes-types.html)并且两者报告的大小相同）？在两个结构中使用相同的 cl_* 类型也可能是一个好主意。

# openlayers - 使用 OpenLayers 为多边形分配标识符

> ID：11936776
> 
> 赞同：0
> 
> 时间：2012-08-13T14:50:08.640
> 
> 标签：openlayers, identifier, polygons

我希望能够允许最终用户使用 OpenLayers 在地图上绘制多边形。这很容易做到。但是，我需要能够将用户定义的标识符，或者换句话说，区域名称与多边形相关联。对于我的生活，我无法弄清楚如何做到这一点。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T17:48:00.703

有两种选择：

**1\. 与`attributes`：**

这是来自 OpenLayers 的示例：[OpenLayers.org's example](http://openlayers.org/dev/examples/vector-features-with-text.html)

```
var linearRing = new OpenLayers.Geometry.LinearRing(pointList);
var polygonFeature = new OpenLayers.Feature.Vector(
  new OpenLayers.Geometry.Polygon([linearRing]));
polygonFeature.attributes = {
  name: "dude",
  age: 21,
  favColor: 'purple',
  align: 'lb'
}; 
```

**2.带样式：**

这是来自 HazardMapping.com 的示例：[来自 Hazardmapping.com 的示例](http://hazardmapping.com/openlayers_styles.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T18:08:09.627

[您可以在OpenLayers](http://dev.openlayers.org/apidocs/files/OpenLayers/Feature/Vector-js.html#OpenLayers.Feature.Vector.style)中检查 Vector 的样式 有了它，您可以为您的多边形命名一个好的标签

# ruby-on-rails - ActionMailer 和 Gmails 设置 Rails 3.0.1/3.1.0

> ID：11936790
> 
> 赞同：0
> 
> 时间：2012-08-13T14:50:53.403
> 
> 标签：ruby-on-rails, ruby, actionmailer

我一直在尝试使用我的 rails 应用程序设置 ActionMailer，但没有成功。我已经搜索了几个不同的线程，但没有找到解决方案。我需要安装某种宝石来防止我的问题吗？

这是问题：

[https://gist.github.com/3341261](https://gist.github.com/3341261)

==解决方案==

所以我的解决方案是去使用 tlsmail gem。我关注了这个帖子，那里的第二个答案帮助我解决了我的问题。

[带有rails 3的gmail smtp](https://stackoverflow.com/questions/6379950/gmail-smtp-with-rails-3)

说到独角兽，有一个问题。我正在使用 init.d 文件重新启动服务器，但是我必须实际停止服务器，然后手动删除 pid 文件以用于独角兽。启动独角兽后，它起作用了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T15:33:23.930

以下是我的有效设置之一。希望它可以帮助您发现错误的地方。=)

```
config.action_mailer.delivery_method = :smtp

config.action_mailer.smtp_settings = {
        :address              => "smtp.gmail.com",
        :port                 => 587,
        :domain               => 'mobileme.com',
        :user_name            => 'hello@mobileme.com',
        :password             => 'Z!DDq%a!OsfGCsdsd2mEc',
        :authentication       => 'plain',
        :enable_starttls_auto => true  
    } 
```

当然，我更改了域和密码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T15:11:05.393

`:enable_starttls_auto => true`在动作邮件配置中尝试 选项

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T15:34:04.440

所以我的解决方案是去使用 tlsmail gem。我关注了这个帖子，那里的第二个答案帮助我解决了我的问题。

带有rails 3的gmail smtp

说到独角兽，有一个问题。我正在使用 init.d 文件重新启动服务器，但是我必须实际停止服务器，然后手动删除 pid 文件以用于独角兽。启动独角兽后，它起作用了。

# sql - 如何将两条记录合并为一行？

> ID：11936791
> 
> 赞同：3
> 
> 时间：2012-08-13T14:50:54.193
> 
> 标签：sql, db2

假设我有一个包含列的表`id, name, phone_type, phone_no`

我有 2 条记录

```
{1, Tom, home, 123}
{2, Tom, mobile, 234} 
```

如果我只使用 sql：

```
SELECT * FROM table WHERE name = tom; 
```

它将显示两条记录。

但是，我想在一行中显示：

```
Tom, mobile,234,home,123 
```

类似的东西...

如何修改db2中的sql？

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:31:14.627

这是一个使用 OLAP 函数的更通用的示例。这将获得每个名称的前四对电话类型和电话号码。如果有人少于四个，其余的将用 NULL 填充。很明显，您可以如何将其扩展到四个以上。

```
select * from (
    select id,
           min(id) over (partition by name) as first_id,
           name,
           phone_type as phone_type1,
           phone_no as phone_no1,
           lead(phone_type,1) over (partition by name order by id) as phone_type2,
           lead(phone_no,1) over (partition by name order by id) as phone_type2,
           lead(phone_type,2) over (partition by name order by id) as phone_type3,
           lead(phone_no,2) over (partition by name order by id) as phone_type3,
           lead(phone_type,3) over (partition by name order by id) as phone_type4,
           lead(phone_no,3) over (partition by name order by id) as phone_type4
   from table
) where id = first_id 
```

外部选择保证您每人只能获得一行。您需要这个，因为 OLAP 函数的结果（在这种情况下`min(id)`）不能直接放入 where 子句中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T14:54:45.953

这是一种方法：

```
select name,
       'mobile',
       max(case when ttype = 'mobile' then phone end) as mobilephone,
       'home',
       max(case when ttype = 'home' then phone end) as homephone
from t
group by name 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T15:05:09.403

这可能会给出一个想法

```
declare @rVal nvarchar(128)
set @rVal = 'Tom'
select @rVal = @rval + coalesce(',' + phoneType + ',' + convert(nvarchar,phoneNumber),'') from testTable where name = 'Tom'
select @rVal 
```

# spring - 石英jboss弹簧多个webapps

> ID：11936797
> 
> 赞同：2
> 
> 时间：2012-08-13T14:51:19.783
> 
> 标签：spring, jboss, datasource, quartz-scheduler

我已经在我的应用程序中成功使用了石英。基本上，我在 Jboss 内运行的 webapp1 中捆绑了石英。

但是我们在 jboss 中运行了另一个 webapp2，它也需要进行石英作业

现在我需要做的是让石英调度器作为某种服务在 jboss 中运行，并且两个 webapps 都应该能够在单个石英调度器上注册它们的作业。

下面是我对 webapp1 的相关 spring 配置，它一直工作到现在。

```
<bean id="qtzScheduler"
    class="org.springframework.scheduling.quartz.SchedulerFactoryBean">
    <property name="dataSource">
        <ref bean="jndiDataSource" />
    </property>
    <property name="applicationContextSchedulerContextKey">
        <value>applicationContext</value>
    </property>
    <property name="transactionManager">
        <ref bean="transactionManager" />
    </property>
    <property name="schedulerName" value="webapp1" />       
</bean>

<bean id="wrapperScheduler" class="uk.fa.quartz.schedule.ServiceScheduler">
    <property name="scheduler">
        <ref bean="qtzScheduler" />
    </property>
</bean>

<bean id="jndiDataSource" class="org.springframework.jndi.JndiObjectFactoryBean">
    <property name="jndiName">
        <value>java:/FmManagerDS</value>
    </property>
</bean> 
```

当我必须安排工作时，代码如下：

```
 WrapperScheduler scheduler = (WrapperScheduler) ctx.getBean("wrapperScheduler");
   scheduler.scheduleCronJob(job, jobName + "CronTrigger", WrapperScheduler.TRIGGER_GROUP, cronExpression); 
```

现在我不想在 webapp2 中再次定义相同的调度程序，这将导致 2 个石英调度程序在 jboss 中运行。

有人知道怎么做吗？我在互联网上看到了一个示例，如下[链接](http://zunkthoughts.blogspot.co.uk/2008/12/quick-howto-quartz-with-jboss.html "关联")所示，我认为它正在做我想做的事。但我不明白如何使用我的 spring 源中定义的数据源将它与我的系统集成。如果有人可以分享配置或将我指向互联网上的正确资源，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T18:14:26.790

您参考的[链接](http://zunkthoughts.blogspot.co.uk/2008/12/quick-howto-quartz-with-jboss.html)解释了如何访问[JBoss 中内置](http://docs.jboss.org/ejb3/docs/tutorial/1.0.7/html/Quartz_scheduler_integration.html)的 Quartz 调度程序服务。我从来没有使用过这种方法，但基本上你让 JBoss 处理你的调度程序、数据源和它周围的一切。这使得在没有所有配置的情况下很容易利用作业调度 - 但不是很灵活，您的应用程序不再是独立的。

在您的情况下，我看到两个值得研究的选项：

# 集群 Quartz 调度器

将您的两个 Web 应用程序配置为[在集群中运行](http://quartz-scheduler.org/documentation/quartz-2.1.x/configuration/ConfigJDBCJobStoreClustering)。两个应用程序将共享相同的数据库并运行彼此定义的作业。由于以下几个原因，这可能不是您的选择：

*   两个应用程序必须能够运行彼此定义的作业 - 例如，作业类必须在 CLASSPATH 上可用

*   您仍然需要在两个应用程序中定义 Quartz 配置（尽管您可以轻松共享配置，例如通过将 XML 配置提取到单独的文件中）

*   两个应用程序将维护单独的线程池

集群更适合在多台机器上运行的同构应用程序，而不是在单个节点上运行的异构应用程序。

# 远程调度程序

Quartz通过[rmi](/questions/tagged/rmi "显示标记为“rmi”的问题")[内置了对远程调度程序的支持](http://quartz-scheduler.org/documentation/quartz-2.1.x/configuration/ConfigRMI)。基本上，一个应用程序托管成熟的 Quartz 服务器，而另一个应用程序连接到该服务器。这对您来说似乎是一种更好的方法（我们称之为“*主从*”），因为只有一个应用程序管理调度程序，而另一个应用程序使用现有的。

 *见：[`RemoteScheduler`](http://quartz-scheduler.org/api/2.1.5/org/quartz/impl/RemoteScheduler.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T14:39:16.913

最后，我有时间为所有其他可能不得不使用 Quartz 作为在 jboss 中运行的服务的人写下这一切。但也可以尝试@Tomasz 在他的回答中提到的其他选项。

请注意，如果您尝试从绑定它的 JBoss 服务器外部检索它，您将得到一个空引用。如果您有这样的要求，您可能需要考虑使用 Quartz 的 RMI 支持。

1）首先确保你删除了 jboss/[profile]/lib 或 jboss 发行版附带的 quartz.rar 中任何现有的石英版本。

2)请将您的quartz.1.8.3.jar &quartz-jboss.1.8.jar 放入accesmanager/[profile]/lib

3）下面是quartz-service.xml的代码，需要放在jboss deploy文件夹中，它将启动Quartz调度程序：

```
 <server> 
     <mbean code="org.quartz.ee.jmx.jboss.QuartzService" 
     name="user:service=QuartzService,name=QuartzService">    
     <attribute name="JndiName">Quartz</attribute> 
     <attribute name="Properties">        
     org.quartz.scheduler.instanceName = BGSScheduler 
     org.quartz.scheduler.rmi.export = false 
     org.quartz.scheduler.rmi.proxy = false 
     org.quartz.scheduler.xaTransacted = false 
     org.quartz.threadPool.class = org.quartz.simpl.SimpleThreadPool  
     org.quartz.threadPool.threadCount = 5 
     org.quartz.threadPool.threadPriority = 4 
     org.quartz.scheduler.threadsInheritContextClassLoaderOfInitializer = true
     org.quartz.threadPool.threadsInheritContextClassLoaderOfInitializingThread = true
     org.quartz.jobStore.class = org.quartz.impl.jdbcjobstore.JobStoreCMT
     org.quartz.jobStore.driverDelegateClass =  org.quartz.impl.jdbcjobstore.StdJDBCDelegate
     org.quartz.jobStore.dataSource = QUARTZ
     org.quartz.dataSource.QUARTZ.jndiURL = java:FmManagerDS 
     org.quartz.jobStore.nonManagedTXDataSource = QUARTZ_NO_TX
     org.quartz.dataSource.QUARTZ_NO_TX.jndiURL = java:FmManagerDS
     </attribute>     
     <depends>jboss.jca:service=DataSourceBinding,name=FmManagerDS</depends>
     </mbean> 
     </server> 
```

] 大多数事情都是不言自明的，或者您可以在[Quartz Configuration](http://quartz-scheduler.org/documentation/quartz-1.x/configuration/ "石英配置")获得更多详细信息 。关键是要注意，quartz 需要 2 个数据源。一个是容器管理的数据源 - 与 jboss *-ds.xml( java:FmManagerDS 在我的例子中）。如果您的 'org.quartz.jobStore.dataSource' 是 XA，则将 'org.quartz.jobStore.nonManagedTXDataSource' 设置为非 XA 数据源（对于同一数据库）。否则，您可以将它们设置为相同。

然后在spring applicationContext中，我必须得到quartz的句柄，这样我才能注入到wrapperScheduler。下面的代码

```
 <bean id="quartzScheduler" class="org.springframework.jndi.JndiObjectFactoryBean">
            <property name="jndiName">
                <value>Quartz</value>
            </property>
    </bean>

<bean id="wrapperScheduler" class="k.fa.quartz.schedule.ServiceScheduler">
            <property name="scheduler">
                <ref bean="quartzScheduler" />
            </property>
    </bean> 
```

然后我们可以使用以下方式安排作业

```
Timestamp t = new Timestamp (System.currentTimeMillis());
ScheduleJob job = new ScheduleJob(EmailJob.class.getCanonicalName() +t.toString(), EmailJob.class); 
```

下面是将 spring applicationContext 传递给 EmailJob 的代码，以便我们可以访问 bean 和其他东西。为了实现这一点，我们需要实现 ApplicationContextAware 接口，以便 applicationContext 可用，然后将其推送到 schedulerContext。请确保我们不要将 applicationContext 放入 JobdataMap 以防您使用 JDBC 存储，因为它会产生序列化问题。

```
 serviceScheduler.getScheduler().getContext().put("applicationContext", ctx);
    serviceScheduler.scheduleCronJob(job, "test" + t.toString(), ServiceScheduler.DEFAULT_TRIGGER_GROUP, cronExpression); 
```

其他不使用 wrapperscheduler 的人可以类似地使用以下方法将石英的句柄直接放入他们的代码中

```
 InitialContext ctx = new InitialContext();
    Scheduler scheduler = (Scheduler) ctx.lookup("Quartz");
    ScheduleJob job = new ScheduleJob(EmailJob.class.getCanonicalName() +t.toString(), Executor.class);
    scheduler.scheduleJob(job, trigger); 
```

在电子邮件作业类中，您可以使用下面来获取 applicationContext

```
 applicationContext = (ApplicationContext) context.getScheduler().getContext().get(APPLICATION_CONTEXT_KEY);
       //get spring bean and do the necessary stuff 
```

另一个重要的事情是，由于quartz 调度程序在web 应用程序之外运行，如果它在war 内部，quartz 将无法触发jobclass。它需要在jboss/[profile]/lib 中的共享jar 中。*

# r - 提取两个指定子串之间的子串

> ID：11936798
> 
> 赞同：1
> 
> 时间：2012-08-13T14:51:20.767
> 
> 标签：r, regex, string-matching, substr

我有一个具有以下模式的子字符串列表：

```
my.list <- list("file1\\subfile1-D.ext", "file12\\subfile9-D.ext", "file2\\subfile113-D.ext") 
```

等等。我想将文件编号和子文件编号提取到包含文件/子文件编号的数字数据框中。到目前为止，我一直在使用以下方法：

```
extract.file <- function(file.name){
  file.name <- sub("file", "", file.name)
  file.name <- sub("\\\\*subfile.*", "", file.name)
}

extract.subfile <- function(subfile.name){
  subfile.name <- sub("file.*subfile", "", subfile.name)
  subfile.name <- sub("-D.ext", "", subfile.name)
}

name.file <- lapply(my.list, extract.file)
name.file <- as.numeric(unlist(name.file))
name.subfile <- lapply(my.list, extract.subfile)
name.subfile <- as.numeric(unlist(name.subfile))

my.df <- data.frame(file=name.file, subfile=name.subfile) 
```

我还尝试过首先使用`substring.location`from `stringr`library 提取字符串位置（这会产生另一个具有开始和结束值的列表），然后遍历这两个列表，但这又变得太复杂了。有没有更好的方法来实现目标？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T17:28:01.277

一些替代方案：
[编辑：strsplit 可以接受一个数组并返回一个列表，与在 rbind 调用中嵌套应用相比，将时间缩短了大约一半。]

```
my.df <- do.call( rbind, strsplit( unlist(my.list), split="(\\\\|-D.ext)" ) )
my.df <- data.frame( my.df )
names( my.df ) <- c("file", "subfile") 
```

或者

```
my.df <- do.call( rbind, strsplit( unlist(my.list), split="[^[:alnum:]]" ) )[, 1:2]
my.df <- data.frame( my.df )
names( my.df ) <- c("file", "subfile") 
```

以这种方式做事的一件事是，如果所有输入都遵循原始`my.list`样本，那么您将留下非常毫无价值和冗余的数据。

也许更好的解决方案可能是；

```
# Not sure why strsplit() returns an empty string on the first non-digit match,
# but it does and we account for it by dropping the first returned column.
my.list <- unlist( my.list )
my.df <- do.call( rbind, strsplit( my.list, split="[^[:digit:]]+" ) )[,-1]
my.df <- data.frame( my.list, my.df )
names( my.df ) <- c( "orig", "file", "subfile" ) 
```

我们已经节省了相当多的内存/存储，而没有所有这些重复，并且我们获得了操作事物的能力，而无需对文本/字符排序/表示大惊小怪。

* * *

检查`?strsplit`,`?regex`和`?grep`匹配的东西。

data.frame 设置非常简单...... strsplit 接受一个向量并返回一个列表，而 do.call 需要一个列表来绑定在一起。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T14:59:22.320

这是一个带有反向引用的正则表达式，似乎可以满足您的要求：

```
sapply(my.list, function(x)gsub(".*\\\\(.*)-D\\.ext", "\\1", x))
[1] "subfile1"   "subfile9"   "subfile113" 
```

* * *

这`"\\1"`是一个反向引用，它返回括号内字符串的值。

# ruby - 如何在 Windows 下使用 Bourne shell 作为活动的 Ruby shell

> ID：11936803
> 
> 赞同：3
> 
> 时间：2012-08-13T14:51:46.040
> 
> 标签：ruby, environment-variables, sh

**摘要**：在 Windows 机器上，我怎样才能使 Bourne shell 成为活动的 Ruby shell？这是我想要发生的事情：

```
irb> exec('echo $SHELL')
/bin/sh 
```

实际输出为：

```
irb> exec('echo $SHELL')
$SHELL 
```

如果我尝试在`cmd.exe`. 根据 Ruby 文档，它看起来像`exec`调用检查`$RUBYSHELL`和`$COMSPEC`（按那个顺序？）。我已经尝试设置`$RUBYSHELL`到`"C:\Program Files (x86)\Git\bin\sh.exe"`我拥有、 和副本的位置`sh`，但似乎都不起作用。看起来它基本上完全忽略了......`/bin/sh``/sh``RUBYSHELL`

**为什么？**：我正在使用一个 Ruby gem，它调用`exec`并传递`Shellwords.shelljoin`. 该调用转义字符，但仅适用于 Bourne shell。在 Windows' 下运行时`cmd.exe`，它似乎对任何转义的引号字符都感到厌恶，而只是忽略它们。因此，该命令无法正确解释。我想解决我的问题的另一种方法是让我知道是否有更好的跨平台方法来执行转义命令序列，但在我看来，如果我可以制作`sh`我的活动 Ruby shell，我的问题就会得到解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T04:01:23.643

我会直接执行shell，例如 `exec('c:\bin\sh')`

我应该注意（您可能知道这一点），通过用百分号包围它们来访问 Windows 环境变量：

```
irb> exec(`echo %SHELL%`) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-05T19:54:00.787

```
exec("sh","-c","echo $SHELL") 
```

这种务实的做法应该可以解决这种情况，在我的环境中它在不同的运行时环境中工作方式相同，例如：

Windows 7 64 位 ruby​​ 2.1.6p336 上的 mingw32（2015-04-13 修订版 50298）[i386-mingw32] ![红宝石 2.1.6p336](../Images/9fc530d5f2fddd8d372a3526b7b65cf4.png)

OS-X 10.10.3 ruby​​ 2.0.0p451（2014-02-24 修订版 45167）[x86_64-darwin13.1.0] ![红宝石 2.0.0p451](../Images/484e93478491ad570eebbb96ebc6e2f0.png)

# c# - 使变量线程安全的最佳方法是什么？

> ID：11936804
> 
> 赞同：0
> 
> 时间：2012-08-13T14:51:48.687
> 
> 标签：c#, .net, multithreading, thread-safety

由于代码重构而出现了问题，在这种情况下最好的解决方案是什么？

问题是 DbConnection 已从本地方法变量重构为类变量。该应用程序是多线程的。似乎问题在于 DbConnection 对象在它是成员变量时被共享。什么是最好的解决方案？将其保留为本地方法变量？

```
public IDataReader Execute(CommandBehavior behavior, string[] parameterNames, object[] arguments)
{

        DbConnection conn = null;
        try
        {

            conn = Connection.CreateConnection();

            DbCommand cmd = conn.CreateCommand();
            cmd.CommandText = StoredProcedureName;
            cmd.CommandType = CommandType.StoredProcedure;

           //     ..................................................

            // Perform the call.                        
            return DataCachingContext.SetCachedData(call, cmd.ExecuteReader(behavior));

        }
        catch (Exception ex)
        {
            //..........................
        }
        finally
        {
            //
        }

} 
```

只是为了澄清，这是导致问题的版本。除了运行时异常，索引到 ResultSets 的问题，这很可能是由于连接被覆盖。

```
DbConnection _conn = null;

public IDataReader Execute(CommandBehavior behavior, string[] parameterNames, object[] arguments)
{

        try
        {

            _conn = Connection.CreateConnection();

            DbCommand cmd = _conn.CreateCommand();
            cmd.CommandText = StoredProcedureName;
            cmd.CommandType = CommandType.StoredProcedure;

           //     ..................................................

            // Perform the call.                        
            return DataCachingContext.SetCachedData(call, cmd.ExecuteReader(behavior));

        }
        catch (Exception ex)
        {
            //..........................
        }
        finally
        {
            //
        }

} 
```

经过更多调查，看起来 DbConnection 变量已成为一个类变量以启用单元测试。当它是局部变量时，无法测试它的值。正在测试 DbConnection 的状态

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T14:53:13.280

我认为您正在寻找[lock 语句](http://msdn.microsoft.com/en-us/library/c5kehkcz%28v=vs.80%29.aspx) 。

> lock 确保一个线程不进入代码的临界区，而另一个线程在临界区。如果另一个线程试图输入一个锁定的代码，它将等待、阻塞，直到对象被释放。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T15:06:04.033

MSDN 文档说[`DbConnection`](http://msdn.microsoft.com/en-us/library/system.data.common.dbconnection.aspx)：

> 不保证任何实例成员都是线程安全的。

因此，在我看来，将其保留为类变量并不是一个好主意。即使您的实现可能是线程安全的，但假设这样是有风险的。您可以使用锁来避免线程问题，但这些方法通常难以扩展。因此，最好将对象保持在本地。

如果您担心总是打开和关闭太多连接的性能，请查看[SQL Server Connection Pooling (ADO.NET)](http://msdn.microsoft.com/en-us/library/8xx3tyca.aspx)，它可以很好地池化实际连接而不是`DbConnection`对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T15:03:11.880

> 该应用程序是多线程的。似乎问题在于 DbConnection 对象在它是成员变量时被共享。什么是最好的解决方案？将其保留为本地方法变量？

是的，一个好的使用模式`DbConnection`是在方法中创建和处理连接（将其存储在局部变量中）。在幕后，连接是池化的，因此这样做没有显着的开销。您还可以避免处理共享状态和锁。

问题中提供的代码完全符合我在此处描述的内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T15:01:44.087

数据库连接对象通常应该是局部变量，因为数据库连接是一种相对昂贵的资源，要保持打开任何时间长度。将数据库连接作为类变量的危险在于，在实例化对象时会打开连接，然后在释放类之前保持打开状态。这会导致锁没有被及时释放，以及长时间运行的事务，这会严重影响性能。

最好在需要之前打开连接（例如，调用存储过程、执行 SQL 语句），然后立即关闭/释放它。在幕后，数据库连接通常无论如何都会被缓存，这样可以最大限度地减少重复打开和关闭连接的开销，因为当您在代码中打开一个连接时，您很可能会从缓存中获得一个已经打开的连接。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T15:46:14.777

在这两个代码片段中，您都创建了新的连接。那么将连接作为类变量的意图是什么？从您发布的代码看来，连接应该是局部变量。

# c# - 从 C# 中的类型以编程方式生成 XSD - 在子类 XSD 中包含基类属性

> ID：11936807
> 
> 赞同：4
> 
> 时间：2012-08-13T14:51:55.277
> 
> 标签：c#, xml, xsd

我有一种情况，我们有一个由几个子类实现的基类。基类用于强制子类包含系统所需的某些属性。

无论如何，我想以编程方式为子类生成 XSD，但我希望基类的属性出现在子类 XSD 中，因为基类用于内部原因并且对客户端没有真正意义.

例如，目前如果我有：

```
class Foo {
    public string Id { get; set; }
}

class Bar : Foo {
    public string Name { get; set; }
} 
```

我通过以下代码运行它：

```
private string ExtractXsdFromType()
{
    Type type = typeof(Bar);
    XmlReflectionImporter importer = new XmlReflectionImporter();
    XmlTypeMapping mapping = importer.ImportTypeMapping(type);
    XmlSchemas xmlSchemas = new XmlSchemas();
    XmlSchemaExporter xmlSchemaExporter = new XmlSchemaExporter(xmlSchemas);
    using (var writer = new StringWriter())
    {
        xmlSchemaExporter.ExportTypeMapping(mapping);
        xmlSchemas[0].Write(writer);
        return XElement.Parse(writer.ToString()).ToString();
    }
} 
```

然后它会产生一个像这样的 XSD：

```
<xs:schema elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="Bar" nillable="true" type="Bar" />
  <xs:complexType name="Bar">
    <xs:complexContent mixed="false">
      <xs:extension base="Foo">
        <xs:sequence>
          <xs:element minOccurs="0" maxOccurs="1" name="Name" type="xs:string" />
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="Foo" abstract="true">
    <xs:attribute name="Id" type="xs:int" use="required" />
  </xs:complexType>
</xs:schema> 
```

但我想创建一个这样的 XSD：

```
<xs:schema elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="Bar" nillable="true" type="Bar" />
  <xs:complexType name="Bar">
    <xs:complexContent mixed="false">
      <xs:sequence>
        <xs:attribute name="Id" type="xs:int" use="required" />
        <xs:element minOccurs="0" maxOccurs="1" name="Name" type="xs:string" />
      </xs:sequence>
    </xs:complexContent>
  </xs:complexType>
</xs:schema> 
```

有谁知道这是否可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T18:12:56.760

我会非常惊讶地看到这可能只是您描述的方式，因为这样做会从面向对象的角度破坏事情，至少在大多数情况下。例如，如果一个类使用一个类型的属性，那么在 OO 中任何扩展该类型的类都将被允许。

折叠类层次结构（如果我理解正确，这就是您所描述的），将无法正确创建 XSD 模型。即使从 XSD 重构的角度尝试这样做也会有限制，特别是在涉及抽象类型或替换组的情况下（我说的是一般情况）。

# php - 空 MySQLi 准备好的语句结果

> ID：11936810
> 
> 赞同：0
> 
> 时间：2012-08-13T14:52:01.270
> 
> 标签：php, mysqli

我只是想在数据库中选择一个特定的行，但我的结果集由于某种原因一直为空。但是，当我在 HeidiSQL 中运行查询时，我得到了结果。

我难住了。我没有看到我的代码有什么特别的问题，我试过 echoing `$mysqli->error`，但没有任何错误。我也添加`ini_set('display_errors', 'On'); error_reporting(E_ALL);`到我的代码中。

```
$id =$_GET['sysid'];
$system_info = $mysqli->prepare("SELECT * FROM systems WHERE systems.id = ?");
$system_info->bind_param("i", $id);
$system_info->execute();
$system_info->store_result();
$system_info->bind_result($system_id, $system_name, $system_img); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T14:56:54.250

你需要[`fetch`](http://php.net/manual/en/mysqli-stmt.fetch.php)结果。

```
$id = $_GET['sysid'];
$system_info = $mysqli->prepare("SELECT * FROM systems WHERE systems.id = ?");
$system_info->bind_param("i", $id);
$system_info->execute();
$system_info->bind_result($system_id, $system_name, $system_img);
$system_info->fetch(); 
```

然后你可以使用`$system_id`,`$system_name`和`$system_img`。

[`store_result`](http://www.php.net/manual/en/mysqli.store-result.php)会给你一个[`mysqli_result`](http://www.php.net/manual/en/class.mysqli-result.php)对象；它忽略了`bind_result`。

```
$id = $_GET['sysid'];
$system_info = $mysqli->prepare("SELECT * FROM systems WHERE systems.id = ?");
$system_info->bind_param("i", $id);
$system_info->execute();
$result = $system_info->store_result();
list($system_id, $system_name, $system_img) = $result->fetch_array(MYSQLI_NUM); 
```

# javascript - 如何防止 Firefox 推测加载 javascript 文件？

> ID：11936811
> 
> 赞同：2
> 
> 时间：2012-08-13T14:52:02.483
> 
> 标签：javascript, firefox, speculative-execution

我在 HEAD 中有一些设置 cookie 的 javascript 代码。稍后在页面底部我加载另一个 javascript 文件。该文件由动态后端页面提供服务，该页面使用 cookie 来确定要返回的内容。

Firefox 出现了一个问题，因为它使用推测解析：它在 HEAD 中的 javascript 执行之前在页面末尾加载了 javascript 文件。由于在加载第二个 javascript 文件时 cookie 尚未设置，因此后端页面不会收到 cookie 值。

有什么办法可以防止 Firefox 过早加载第二个 javascript 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:55:08.940

如果您希望在另一个脚本运行后通过 HTTP 获取脚本（而不是当浏览器在 DOM 中找到它通过解析 HTML 创建的脚本时），然后`script`使用 JS/DOM 生成第二个元素，而不是将其放入 HTML .

# sql-server - SQL Service Broker 和内部激活.. 官方教程中的无限循环是否正确？

> ID：11936814
> 
> 赞同：1
> 
> 时间：2012-08-13T14:52:09.630
> 
> 标签：sql-server, service-broker

构建使用异步通信的分布式应用程序的基础之一可以表示为*不要主动等待任何事件！*这样，基于 SQL Service Broker 的自然解决方案是使用到达队列的消息激活存储过程。

微软官方教程中的[第 2 课：创建内部激活过程](http://msdn.microsoft.com/en-us/library/cc281526%28v=sql.105%29.aspx)展示了如何将存储过程绑定到消息队列。它还提出*了如何实施 sp 的方式*。

（我是 SQL 新手。但不应该在`BEGIN`之后再出现一个`CREATE PROCEDURE... AS`，`END`在 之前再出现一个`GO`吗？）

我是否正确理解它？在代码下方查看我的问题...

```
CREATE PROCEDURE TargetActivProc
AS
  DECLARE @RecvReqDlgHandle UNIQUEIDENTIFIER;
  DECLARE @RecvReqMsg NVARCHAR(100);
  DECLARE @RecvReqMsgName sysname;

  WHILE (1=1)
  BEGIN

    BEGIN TRANSACTION;

    WAITFOR
    ( RECEIVE TOP(1)
        @RecvReqDlgHandle = conversation_handle,
        @RecvReqMsg = message_body,
        @RecvReqMsgName = message_type_name
      FROM TargetQueueIntAct
    ), TIMEOUT 5000;

    IF (@@ROWCOUNT = 0)
    BEGIN
      ROLLBACK TRANSACTION;
      BREAK;
    END

    IF @RecvReqMsgName =
       N'//AWDB/InternalAct/RequestMessage'
    BEGIN
       DECLARE @ReplyMsg NVARCHAR(100);
       SELECT @ReplyMsg =
       N'<ReplyMsg>Message for Initiator service.</ReplyMsg>';

       SEND ON CONVERSATION @RecvReqDlgHandle
              MESSAGE TYPE 
              [//AWDB/InternalAct/ReplyMessage]
              (@ReplyMsg);
    END
    ELSE IF @RecvReqMsgName =
        N'http://schemas.microsoft.com/SQL/ServiceBroker/EndDialog'
    BEGIN
       END CONVERSATION @RecvReqDlgHandle;
    END
    ELSE IF @RecvReqMsgName =
        N'http://schemas.microsoft.com/SQL/ServiceBroker/Error'
    BEGIN
       END CONVERSATION @RecvReqDlgHandle;
    END

    COMMIT TRANSACTION;

  END
GO 
```

当消息到达时，该过程被调用，并进入“无限”循环。实际上，循环不是无限的，因为没有数据到达之后（在 之后`BREAK`）。`ROLLBACK``TIMEOUT`

如果数据到达，`BREAK`则跳过。如果预期的消息到达，则将回复发回。如果接收到`...EndDialog`or`...Error`消息，`END CONVERSATION`则执行 。这里还可以观察到其他类型的消息吗？

当一些消息到达（并被处理）时，事务被提交。

但是为什么现在循环呢？是否打算处理过去因为通信线路中断而卡在队列中的其他消息？还是因为一次有更多的消息来了，不能这么快处理？

当另一条消息排队并且存储过程仍在运行时会发生什么。是否为其处理分配了另一个工作流程？可以并行启动另一个存储过程吗？如果是，那么为什么要循环？

谢谢你的帮助，彼得

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T15:04:22.807

内部激活不像触发器。具体来说，激活的过程不会*为*到达的每条消息启动。相反，当 SSB 基础设施正在监视进度时，当有一些事情要处理并且应该连续（在循环中）使消息出队时启动该过程，并且如果有必要，启动第二个过程以提供帮助，直到指定的最大值。请参阅[了解队列监视器](http://rusanu.com/2008/08/03/understanding-queue-monitors/)。

并不是严格要求在激活的过程中有一个循环，即使没有循环，事情也应该可以正常工作。循环应该在非常繁忙的环境中表现更好。另请参阅这个旧的[MSDN 讨论](http://social.msdn.microsoft.com/forums/en-US/sqlservicebroker/thread/e2758500-58ed-4e71-8a95-918b04d85270/)。

# javascript - 页面加载完成后执行函数

> ID：11936816
> 
> 赞同：157
> 
> 时间：2012-08-13T14:52:17.087
> 
> 标签：javascript, html, image

我正在使用以下代码在页面加载后执行一些语句。

```
 <script type="text/javascript">
    window.onload = function () { 

        newInvite();
        document.ag.src="b.jpg";
    }
</script> 
```

但是这段代码不能正常工作。即使正在加载某些图像或元素，也会调用该函数。我想要的是调用页面完全加载的函数。

* * *

## 回答 #1

> 赞同：191
> 
> 时间：2012-08-13T14:58:02.183

这可能对你有用：

```
document.addEventListener('DOMContentLoaded', function() {
   // your code here
}, false); 
```

或者如果您对 jquery 感到满意，

```
$(document).ready(function(){
// your code
}); 
```

`$(document).ready()`在 DOMContentLoaded 上触发，但此事件在浏览器之间的触发不一致。这就是为什么 jQuery 很可能会实施一些繁重的变通方法来支持所有浏览器。这将使使用纯 Javascript“精确”模拟行为变得非常困难（但当然并非不可能）。

正如 Jeffrey Sweeney 和 J Torres 所建议的那样，我认为`setTimeout`在触发如下功能之前最好有一个功能：

```
setTimeout(function(){
 //your code here
}, 3000); 
```

* * *

## 回答 #2

> 赞同：79
> 
> 时间：2015-09-30T13:14:19.843

# JavaScript

```
document.addEventListener('readystatechange', event => { 

    // When HTML/DOM elements are ready:
    if (event.target.readyState === "interactive") {   //does same as:  ..addEventListener("DOMContentLoaded"..
        alert("hi 1");
    }

    // When window loaded ( external resources are loaded too- `css`,`src`, etc...) 
    if (event.target.readyState === "complete") {
        alert("hi 2");
    }
}); 
```

# jQuery 相同：

```
$(document).ready(function() {   //same as: $(function() { 
     alert("hi 1");
});

$(window).load(function() {
     alert("hi 2");
}); 
```

* * *

**注意：** - 不要使用以下标记（因为它会覆盖其他同类声明）：

```
document.onreadystatechange = ... 
```

* * *

## 回答 #3

> 赞同：45
> 
> 时间：2017-12-26T05:51:32.703

我有点混淆你所说的页面加载完成，“DOM加载”或“内容加载”是什么意思？在 html 页面加载可以在两个类型事件之后触发事件。

1.  DOM 加载：确保整个 DOM 树从头到尾加载。但不能确保加载参考内容。假设您通过`img`标签添加了图像，因此此事件确保所有已`img`加载但没有正确加载的图像。要获得此事件，您应该编写以下方式：

    ```
    document.addEventListener('DOMContentLoaded', function() {
       // your code here
    }, false); 
    ```

    或者使用 jQuery：

    ```
    $(document).ready(function(){
    // your code
    }); 
    ```

2.  After DOM and Content Load：也表示 DOM 和 Content 的加载。它将确保不仅`img`标记它还将确保加载所有图像或其他相关内容。要获得此事件，您应该编写以下方式：

    ```
    window.addEventListener('load', function() {...}) 
    ```

    或者使用 jQuery：

    ```
    $(window).on('load', function() {
     console.log('All assets are loaded')
    }) 
    ```

* * *

## 回答 #4

> 赞同：37
> 
> 时间：2012-08-13T14:55:37.587

如果您可以使用 jQuery，请查看[load](http://api.jquery.com/load-event/)。然后，您可以将函数设置为在元素完成加载后运行。

例如，考虑一个带有简单图像的页面：

```
<img src="book.png" alt="Book" id="book" /> 
```

事件处理程序可以绑定到图像：

```
$('#book').load(function() {
  // Handler for .load() called.
}); 
```

如果需要加载当前窗口上的所有元素，可以使用

```
$(window).load(function () {
  // run code
}); 
```

如果您不能使用 jQuery，那么纯 Javascript 代码基本上是相同数量（如果不是更少）的代码：

```
window.onload = function() {
  // run code
}; 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2014-01-30T11:17:42.037

如果您想在 html 页面中调用 js 函数，请使用 onload 事件。当用户代理完成加载 FRAMESET 中的窗口或所有框架时，会发生 onload 事件。此属性可以与 BODY 和 FRAMESET 元素一起使用。

```
<body onload="callFunction();">
....
</body> 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2019-11-07T21:57:59.783

据我所知，你最好的选择是使用

```
window.addEventListener('load', function() {
    console.log('All assets loaded')
}); 
```

使用`DOMContentLoaded`事件的第一个答案是倒退了一步，因为 DOM 将在所有资产加载之前加载。

其他答案建议`setTimeout`我强烈反对，因为它完全取决于客户端的设备性能和网络连接速度。如果某人的网络速度较慢和/或 CPU 速度较慢，则加载页面可能需要几到几十秒，因此您无法预测需要多少时间`setTimeout`。

至于，只要根据[MDN](https://developer.mozilla.org/en-US/docs/Web/API/Document/readyState)的更改仍将在事件发生之前`readystatechange`，它就会触发。`readyState``load`

> **完全的**
> 
> 该状态指示加载事件即将触发。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2017-06-13T16:02:33.703

这样您就可以处理这两种情况 - 如果页面已加载或未加载：

```
document.onreadystatechange = function(){
    if (document.readyState === "complete") {
       myFunction();
    }
    else {
       window.onload = function () {
          myFunction();
       };
    };
} 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2020-09-11T10:28:50.900

you can try like this without using jquery

```
window.addEventListener("load", afterLoaded,false);
function afterLoaded(){
alert("after load")
}
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2018-12-20T03:00:41.353

或者，您可以在下面尝试。

```
$(window).bind("load", function() { 
// code here }); 
```

这在所有情况下都有效。这只会在加载整个页面时触发。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2017-12-26T04:58:43.833

```
window.onload = () => {
  // run in onload
  setTimeout(() => {
    // onload finished.
    // and execute some code here like stat performance.
  }, 10)
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-12-28T17:26:19.860

如果你已经在使用 jQuery，你可以试试这个：

```
$(window).bind("load", function() {
   // code here
}); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-03-18T10:11:34.787

我可以告诉你，我找到的最佳答案是在`</body>`命令之后放置一个“驱动程序”脚本。它是最简单的，并且可能比上面的一些解决方案更通用。

计划：在我的页面上是一张桌子。我将带有表格的页面写入浏览器，然后用 JS 对其进行排序。用户可以通过单击列标题来使用它。

表格结束一个`</tbody>`命令，正文结束后，我使用以下行调用排序 JS 以按第 3 列对表格进行排序。我从网上获取排序脚本，因此这里不再复制。至少在接下来的一年里，你可以在`static29.ILikeTheInternet.com`. 点击页面底部的“这里”。这将打开另一个包含表格和脚本的页面。您可以看到它放置数据然后快速对其进行排序。我需要加快速度，但现在已经有了基础。

```
</tbody></body><script type='text/javascript'>sortNum(3);</script></html> 
```

制造商米奇

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-05-07T15:52:39.163

我倾向于使用以下模式来检查文档是否完成加载。该函数返回一个 Promise （如果您需要支持 IE，请包括[polyfill](https://github.com/jakearchibald/es6-promise/)），一旦文档完成加载，该 Promise 就会解析。它`setInterval`在下面使用，因为类似的实现`setTimeout`可能会导致非常深的堆栈。

```
function getDocReadyPromise()
{
  function promiseDocReady(resolve)
  {
    function checkDocReady()
    {
      if (document.readyState === "complete")
      {
        clearInterval(intervalDocReady);
        resolve();
      }
    }
    var intervalDocReady = setInterval(checkDocReady, 10);
  }
  return new Promise(promiseDocReady);
} 
```

当然，如果你不必支持 IE：

```
const getDocReadyPromise = () =>
{
  const promiseDocReady = (resolve) =>
  {
    const checkDocReady = () =>
      ((document.readyState === "complete") && (clearInterval(intervalDocReady) || resolve()));
    let intervalDocReady = setInterval(checkDocReady, 10);
  }
  return new Promise(promiseDocReady);
} 
```

使用该功能，您可以执行以下操作：

```
getDocReadyPromise().then(whatIveBeenWaitingToDo); 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2016-09-26T06:05:42.563

**完成页面加载设置超时后调用函数**

```
setTimeout(function() {
   var val = $('.GridStyle tr:nth-child(2) td:nth-child(4)').text();
	for(var i, j = 0; i = ddl2.options[j]; j++) {
		if(i.text == val) {      
			ddl2.selectedIndex = i.index;
			break;
		}
	} 
}, 1000);
```

* * *

## 回答 #15

> 赞同：-3
> 
> 时间：2012-08-13T14:59:40.217

试试这个[jQuery](http://api.jquery.com/ready/)：

```
$(function() {
 // Handler for .ready() called.
}); 
```

* * *

## 回答 #16

> 赞同：-5
> 
> 时间：2013-12-02T10:05:12.160

在body标签完成后放置你的脚本......它可以工作......

# hibernate - Hibernate, JPA - 单向一对一

> ID：11936818
> 
> 赞同：0
> 
> 时间：2012-08-13T14:52:24.307
> 
> 标签：hibernate, jpa

我想使用 Hibernate 和 JPA 实现一对一的关系。我有两个属于层次结构的类：问题层次结构和答案层次结构。

```
@Entity
@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)
public abstract class QuestionUnit {

    @Id
    @GeneratedValue(strategy = GenerationType.TABLE)
    private int id;

    @OneToOne(cascade = CascadeType.ALL)    
    @PrimaryKeyJoinColumn
    private AnswerUnit correctAnswer;
...}

@Entity
@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)
public abstract class AnswerUnit {

    @Id
    private int id;

    public abstract Object getAnswerContent();

    public abstract boolean isEqual(AnswerUnit otherAnswer);

    public int getId() {
        return id;
    }
} 
```

我们有 OpenQuestion 和 OpenAnswer 作为实现。

我想要这样带有 OpenQuetions 的表将具有自动生成的主键，而带有 OpenAnswer 的表将具有与 OpenQuestion 表中的主键具有相同值的主键。

我尝试从这里遵循示例：http: [//docs.jboss.org/hibernate/annotations/3.5/reference/en/html/entity.html](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html/entity.html) part 2.2.5.1。一对一。

但是当我坚持 OpenQuestion 时，我得到了带有 columns 的表 OpenQuestion和带有`id`,的`questionContent`OpenQuestionAnswer `id`，`answerContent`但是 id 的值不匹配。

那么，我在哪里犯了错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T15:02:32.103

您在“OpenQuestion”中没有“CorrectAnswer”栏吗？
这应该是“OpenAnswer”中 ID 列的外键 -
即 - 这些应该是匹配的 ID 值。
如果您没有此列 - 我怀疑您的 JPA 映射中有某种错误。
编辑 - 对我自己 -
请添加 MappedSuperClass。[在这里](http://docs.oracle.com/javaee/5/api/javax/persistence/MappedSuperclass.html)阅读它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T15:14:32.980

我不确定您要做什么，为什么从问题到答案的关系是一对一的？逻辑告诉我一个问题可以有很多答案（而且可能只有一个正确答案）。

使用这种方法，您不需要关心两个 id 是否相等，如果是这样，您应该有这样的模型：

```
@Entity
@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)
public abstract class QuestionUnit {
    @Id ... private int id;
    @OneToMany private List<AnswerUnit> answers; //optional assuming there's a list of answers for every question
    @ManyToOne private AnswerUnit correctAnswer;

    public void setCorrectAnswer(AnswerUnit answer){
        if(answer.getQuestion().equals(this)){ //or maybe instead answer.setQuestion(this)
            this.correctAnswer = answer;
        }else{
            throw new RuntimeError("Answer does not belong to this question");
        }
    }

    //Other getter and setters
    //Override the "equals" method!!!
}

@Entity
@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)
public abstract class AnswerUnit {
    @Id private int id;
    @OneToMany private QuestionUnit question;

    public abstract Object getAnswerContent();    
    public abstract boolean isEqual(AnswerUnit otherAnswer); //should't you just overwrite the equals method in here?    
    //Other getter, setters, etc
} 
```

然后使用它，如下所示：

```
QuestionUnit q = new OpenQuestion();
List<AnswerUnit> answers = new List<OpenAnswer>();

AnswerUnit a1 = new OpenAnswer();
AnswerUnit a2 = new OpenAnswer();
AnswerUnit a3 = new OpenAnswer();

a1.setQuestion(q);
a2.setQuestion(q);
a3.setQuestion(q);

//Also set the contents and other required info for the questions...

//And then associate the instances:
q.setAnswers(answers);
q.setCorrectAnswer(a3);

em.persist(q); 
```

即使有公开和常规的答案，这也可以工作

# android - 为什么eclipse不能正确导入我的项目？

> ID：11936820
> 
> 赞同：0
> 
> 时间：2012-08-13T14:52:29.960
> 
> 标签：android

我有这个错误：

/._GoogleAdMobAdsSdk-6.0.0.jar 无法读取或不是有效的 zip 文件

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:55:10.870

错误消息中的路径是文件名以点 (.) 开头的文件，该文件位于文件系统的根目录；我敢打赌，这两件事都不是这样。也许您尝试输入“./_GoogleAdMobAdsSdk-6.0.0.jar”并颠倒了前两个字符？在任何情况下，无论您指定了 jar 文件的路径，请将其修复为正确文件名的正确路径。

# apache-pig - Pig : 用空白分隔符解析行

> ID：11936826
> 
> 赞同：2
> 
> 时间：2012-08-13T14:52:40.690
> 
> 标签：apache-pig

我正在使用 Hadoop Pig (0.10.0) 处理日志文件，日志行如下所示：

```
2012-08-01  INFO   (User:irim)   getListedStocksByMarkets completed in 7041 ms 
```

我想获得与由空格分隔的标记的关系，即：

`(2012-08-01,INFO,(User:irim),getListedStocksByMarkets,completed,in,7041,ms`)

使用语句加载该数据：

`records = LOAD 'myapp.log' using PigStorage(' ');`

没有做到这一点，因为我的标记可以被几个空格分隔，导致几个空标记。PigStorage 似乎不支持正则表达式分隔符（或者至少我没有成功配置它）。

所以我的问题是：获得这些令牌的最佳方式是什么？

如果我可以从关系中删除空元素，我会很高兴，可以用 Pig 做到这一点吗？

例如从：

`(2012-08-01,,,INFO,,,(User:irim),,getListedStocksByMarkets,completed,in,7041,ms`)

要得到

`(2012-08-01,INFO,(User:irim),getListedStocksByMarkets,completed,in,7041,ms`)

我正在尝试另一种方法，`TextLoader`但`TOKENIZE`我不确定这是最好的策略。也许用户加载函数是一个更自然的选择......

问候，

乔尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T21:11:42.240

您可以使用带有正则表达式的内置函数 STRSPLIT 将一行分成一个元组。这是您的特定示例的脚本，其中逗号作为分隔符：

```
inpt = load '~/data/regex.txt' as (line : chararray);
dump inpt;
-- 2012-08-01,,,INFO,,,(User:irim),,getListedStocksByMarkets,completed,in,7041,ms

splt = foreach inpt generate flatten(STRSPLIT(line, ',+'));
dump splt;
-- (2012-08-01,INFO,(User:irim),getListedStocksByMarkets,completed,in,7041,ms) 
```

# android - Android SDK 使用 PreferenceActivity 添加设置

> ID：11936827
> 
> 赞同：1
> 
> 时间：2012-08-13T14:52:42.203
> 
> 标签：android, android-preferences

好的，我正在关注一本 android 书籍，他们正在使用扩展 PreferenceActivity 的类向数独游戏添加设置，这个类由一个意图调用，它所做的只是 addPreferencesFromResource(R.xml.settings)，这种方法已被弃用它不再工作了，这是书中的代码：

```
package org.example.sudoku;

import android.os.Bundle;
import android.preference.PreferenceActivity;

public class Prefs extends PreferenceActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // Load the preferences from an XML resource
        addPreferencesFromResource(R.xml.settings);
    }

} 
```

现在我已经研究了这个问题，发现你必须实例化一个 PreferenceManager 才能做到这一点，但在示例中我发现它们从 PreferenceFragment 扩展了 Prefs 类（不是书中的 PreferenceActivity），我设法在代码如下：

```
/*
 * this is for use from API version 11 and after...
 * 
 */ 
package org.example.sudoku;

import android.os.Bundle;
import android.preference.PreferenceFragment;
import android.preference.PreferenceManager;

public class Prefs extends PreferenceFragment {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // Make sure default values are applied.  In a real app, you would
        // want this in a shared function that is used to retrieve the
        // SharedPreferences wherever they are needed.
        PreferenceManager.setDefaultValues(getActivity(),
                R.xml.settings, false);

        // Load the preferences from an XML resource
        addPreferencesFromResource(R.xml.settings);
    }

} 
```

但这不起作用，我不知道是不是因为我从一个意图调用这个类并且这个类扩展了 PreferenceFragment 而不是 PreferenceActivy 或者这不是做这件事的方式，有人可以帮我明白此事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T16:29:24.547

```
final String PREF_SETTINGS_FILE_NAME = "PrefSettingsFile"; 
```

**读取**您的偏好变量的值。

```
SharedPreferences preferences = getSharedPreferences(PREF_SETTINGS_FILE_NAME, MODE_PRIVATE);
            prefSettingsValue1=  preferences.getInt("value1", 1); // default value of prefSettingsValue1 will be 1 in case you are trying to read a non-existent value. You can specify it according to your wish. (like I have done for the next value)
            prefSettingsValue2=  preferences.getInt("value2", 0); 
            prefSettingsValue3=  preferences.getInt("value3", 1); 
```

将值**写入**您的偏好变量。

```
 SharedPreferences preferences = getSharedPreferences(PREF_SETTINGS_FILE_NAME, MODE_PRIVATE);
        SharedPreferences.Editor editor = preferences.edit();
        editor.putInt("vaule1", prefSettingsValue1);
        editor.putInt("value2",prefSettingsValue2);
        editor.putInt("value3",prefSettingsValue3);
        editor.commit(); 
```

**注意：**无需使用任何 XML 文件来存储首选项。只需将值保存在 Preference 变量中，稍后在您的应用程序中读取它们。不仅是整数，您还可以通过使用和函数分别读取和写入`get`字符串。此外，您不需要扩展任何 Preference Activity/Fragment。`put``getString``putString`

# c# - c# BackgroundWorker DoWork 方法调用另一个类和 ProgressReport

> ID：11936837
> 
> 赞同：2
> 
> 时间：2012-08-13T14:53:17.687
> 
> 标签：c#, backgroundworker

我正在运行一个 BackgroundWorker 线程来执行一项耗时的任务。耗时的任务在另一个班级。我需要将在 BackgroundWorker 上运行的这个单独的类上取得的进展传回 Main Form1 类。我不知道如何解决这个问题。请提供建议。先感谢您。

```
 **// Main Form1 UI Class**    

    public void backgroundWorker2_DoWork(object sender, DoWorkEventArgs e)
    {
        //e.Argument always contains whatever was sent to the background worker
        // in RunWorkerAsync. We can simply cast it to its original type.
        DataSet ds = e.Argument as DataSet;
        this.createje.ProcessData(this.ds);
    }

    private void backgroundWorker2_ProgressChanged(object sender, ProgressChangedEventArgs e)
    {
        this.progressBar1.Minimum = 0;
        this.progressBar1.Maximum = CreateJE.max;
        this.progressBar1.Value = e.Recno;
    }

    **//Other Class called CreateJE**

    public void ProcessData(DataSet ds)
    {
        //Do time consuming task...
     for (int i = 1; i <= 10; i++)
        {
            if (worker.CancellationPending == true)
            {
                e.Cancel = true;
                break;
            }
            else
            {
                // Perform a time consuming operation and report progress.
                System.Threading.Thread.Sleep(500);

                **//How do I report progress back to the Main UI?** 
                //worker.ReportProgress(i * 10);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T15:01:31.277

最干净、最可扩展的解决方案可能是让您的`ProcessData()`方法引发一个事件，该事件`BackgroundWorker`正在侦听。这种方式`ProcessData()`不依赖于`BackgroundWorker`作为调用者。（您还需要设法取消`ProcessData()`）。如果需要，您甚至可以重复使用`ProgressChangedEventArgs`。例如（未经测试，但你明白了吗？）：

```
partial class Form1 { 
    public void backgroundWorker2_DoWork(object sender, DoWorkEventArgs e) {
        //e.Argument always contains whatever was sent to the background worker 
        // in RunWorkerAsync. We can simply cast it to its original type.
        DataSet ds = (DataSet)e.Argument;
        var bgw = (BackgroundWorker)sender;

        var eh = new ProgressChangedEventHandler((o,a) => bgw.ReportProgress(a.ProgressPercentage));
        createje.ProgressChanged += eh;
        this.createje.ProcessData(this.ds));
        createje.ProgressChanged -= eh; //necessary to stop listening
    }

    private void backgroundWorker2_ProgressChanged(object sender, ProgressChangedEventArgs e)
    {
        this.progressBar1.Minimum = 0;
        this.progressBar1.Maximum = CreateJE.max;
        this.progressBar1.Value = e.ProgressPercentage;
    }

}

partial class CreateJE { 

    public event ProgressChangedEventHandler ProgressChanged; 
    protected virtual void OnProgressChanged(ProgressChangedEventArgs e)
    { 
        var hand = ProgressChanged; 
        if(hand != null) hand(this, e);
    }

    public void ProcessData(DataSet ds)
    {
        for(int i = 1; i <= 10; i++)
        {
            // Perform a time consuming operation and report progress.
            System.Threading.Thread.Sleep(500);

            var e = new ProgressChangedEventArgs(i * 10, null);
        }
    }

} 
```

快速而肮脏的方法是将`BackgroundWorker`作为参数传递给`ProcessData()`. 恕我直言，这是相当丑陋的，但是，将您限制为仅使用 BackgroundWorkers，并且还迫使您`BackgroundWorker`在一个地方（主窗体类）定义 ReportProgress 的返回值在另一个地方（CreateJE 类）。

您还可以使用计时器并每隔 X 毫秒报告一次进度，查询 CreateJE 对象的进度。这似乎与您的其余代码一致。与此有关的问题是它会使您的 CreateJE 类对多线程不友好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T15:25:44.340

最快和最简单的选择是`delegate`在类`CreateJE`中声明一个报告进度，然后将其挂接`ReportProgress`到`BackgroundWorker`.

```
class CreateJE
{
    public Action<int> ReportProgressDelegate{get;set;}

    public void ProcessData(DataSet ds)
    {
        for(int i = 0; i < 10; i++)
        {
            Thread.Sleep(500);
            ReportProgress(i*10);
        }
    }

    private void ReportProgress(int percent)
    {
        if(ReportProgressDelegate != null)
            ReportProgressDelegate(percent);
    }
} 
```

在您的表单中，初始化`ReportProgressDelegate`您的实例的属性（我假设`this.createje`是指表单的一个字段，因此`OnLoad`似乎是进行初始化的好地方）：

```
protected override void OnLoad(EventArgs e)
{
    this.creatje.ReportProgressDelegate = worker.ReportProgress;
} 
```

之后，您可以使用已有的事件处理程序（`backgroundWorker2_DoWork`和`backgroundWorker2_DoWork`）。

**PS**：您应该对属性使用相同的方法`worker.CancellationPending`。

# php - 使用范围（字节服务）直通的 PHP 重定向

> ID：11936838
> 
> 赞同：3
> 
> 时间：2012-08-13T14:53:19.660
> 
> 标签：php, redirect, http-headers

我有一些 PHP 代码经常通过 header 将页面重定向到客户端`('Location: x') function`。标头重定向工作正常；我在Header函数之前没有输出，用户成功重定向到新页面。一些连接的客户端`HTTP byte range requests`与它们相关联，目的是只获取我重定向到的请求文件的特定部分。
发送到新站点时，我需要保留此范围请求；我重定向到的站点还应该在其标头中看到范围信息，并且能够正确处理用户的请求。

我知道我可以通过查看来查看他们在我的 PHP 代码中请求的字节范围`$_SERVER['HTTP_RANGE']`，但我无法想出一种方法来将此范围传递给他们标头中的重定向站点。我很确定尝试通过 header 函数实现是错误的，因为它会设置我自己页面的标题。相反，我需要能够设置发送到我要重定向到的页面的标题。

有人对如何实现这一点有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T15:00:36.730

如果您实际上不需要将用户重定向到另一个站点，而只需要为他们提供来自另一个站点的内容，您可能希望使用 cURL 函数来设置请求的 Content-Range 标头，获取结果，然后将其提供给最终用户。

# c# - 如何使用 BackgroundWorker 在单独的线程中运行类似“object = ClassA.GetObject()”的任务？

> ID：11936839
> 
> 赞同：2
> 
> 时间：2012-08-13T14:53:22.757
> 
> 标签：c#, multithreading, backgroundworker

我正在尝试使这条线与`BackgroundWorker`：

```
map = Map.LoadMap(mapname); 
```

…像这样：

```
bw.DoWork += (map = Map.LoadMap(mapname)); 
```

它会导致错误`Cannot implicitly convert type 'game.Map' to 'System.ComponentModel.DoWorkEventHandler'`。

我刚开始`BackgroundWorker`在我的游戏中使用线程组件，但看起来将所有现有方法转换为使用它并不容易。有没有一种简单的方法可以完成这项工作，还是切换到其他线程机制更好？

注意：从线程基础我需要能够轮询进度百分比，而不是弄乱我现有的方法调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T14:59:05.337

您可以像这样利用[匿名代表](http://msdn.microsoft.com/en-us/library/0yw3tz5k%28v=vs.100%29.aspx)：

```
bw.DoWork += (sender, args) => { map = Map.LoadMap(mapname); }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T14:58:32.283

Backgroundworker 很好，因为您可以使用选项 WorkerReportsProgress = true 这可用于合并百分比

您可以像这样在 DoWork 方法中报告进度

```
bw.ReportProgress(percentage); 
```

我曾经将 BackgroundWorker 关联为 Threads 的包装器。所以我在 GUI 工作上使用 BackgroundWorker，在更专业或肮脏的工作（Windows 服务等）上使用线程

你的dowork方法必须这样写

```
bw.DoWork += (sender, args) => { map = Map.LoadMap(mapname); }; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T15:03:34.067

据我了解变量映射的类型和 Map.LoadMap 方法的返回类型 - 是 game.Map。在您的代码中

```
bw.DoWork += (map = Map.LoadMap(mapname)); 
```

您接下来要做的是：从 Map.LoadMap(mapname) 获取结果，将其设置为变量 map，然后尝试将此值用作 DoWork 事件的处理程序。并且变量映射的类型和属性 bw.DoWork 是不同的。

因此，您只需要将这一行更改为：

```
bw.DoWork += (sender, eventArgs) => { map = Map.LoadMap(mapname); } 
```

这意味着您正在尝试创建新的委托 "(sender, eventArgs) => ..." 并将其用作属性 bw.DoWork 的处理程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T15:20:17.890

您可以像这样使用 BackgroundWorker：

```
 var worker = new System.ComponentModel.BackgroundWorker();
        worker.DoWork += delegate 
        { 
             map = Map.LoadMap(mapname); 
        };
        worker.RunWorkerAsync(); 
```

请记住，程序将在 RunWorkerAsync() 方法之后立即继续执行，因此如果您之后使用 map 变量，它可能不是已加载的地图。

要在地图加载后继续执行，您还需要订阅 RunWorkerCompleted：

```
 var worker = new System.ComponentModel.BackgroundWorker();
        worker.DoWork += delegate 
        { 
            map = Map.LoadMap(mapname); 
        };
        worker.RunWorkerCompleted += delegate 
        { 
            MapComplete(); // contiune with stuff here
        };
        worker.RunWorkerAsync(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T15:21:30.387

+= 运算符表示您正在附加一个事件处理程序（DoWork 是一个事件）。

这是一个示例用法：

创建一个 backgroundworker 的实例（在这种情况下它将在类级别），调用附加事件的函数**SetupBackgroundWorker()**

```
private BackgroundWorker bw = new BackgroundWorker();

private void SetupBackgroundWorker()
{
    bw.DoWork += new DoWorkEventHandler(bw_DoWork);
    bw.RunWorkerCompleted += new RunWorkerCompletedEventHandler(bw_RunWorkerCompleted);
    bw.ProgressChanged += new ProgressChangedEventHandler(bw_ProgressChanged);
    bw.ReportProgress = true;
} 
```

这些是示例事件处理程序，应该给你一个想法

```
private void bw_ProgressChanged(object sender, ProgressChangedEventArgs e)
{//Just as an example, I don't ever call the functions to trigger this event
    int ProgressPercent = e.ProgressPercentage;
    object AnyOtherDataReported = e.UserState;
}
private void bw_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{
   //Do something when the work has been completed
   //Note: You should always check e.Cancelled and e.Error before attempting to touch the e.Result. I did not put that protection in this example.

   object TheResultFrom_DoWork = e.Result;//This is your "map" object
}
private void bw_DoWork(object sender, DoWorkEventArgs e)
{
  //object PassedInObject=e.Argument; //This is the argument you sent to RunWorkerAsync

    //Type cast PassedInObject to your correct Type
    WhateverTypeItIs_YouDidntSay mapname=(WhateverTypeItIs_YouDidntSay)e.Argument

    //Perform your task
    object returnvalue=Map.LoadMap(mapname);//This was your varriable called "map"

    //Assign the result of your task to the return value
    e.Result=returnvalue;
} 
```

**将mapname**的值传递给此函数，如果后台工作人员不忙于执行先前的任务，它应该启动该进程。

```
private void ProcessTheMap_InBackground(WhateverTypeItIs_YouDidntSay mapname)
{
    if (!bw.IsBusy)
    {
        bw.RunWorkerAsync(mapname);
    }
    else
    {//You are already loading something in the background
    }
} 
```

# jetty - javax.servlet.jsp:jsp-api:2.1 和 org.mortbay.jetty:jsp-api-2.1:6.1.5 有什么区别？

> ID：11936841
> 
> 赞同：3
> 
> 时间：2012-08-13T14:53:24.513
> 
> 标签：jetty

我正在为使用 Jetty 的产品清理构建系统。目前该项目有

```
javax.servlet.jsp:jsp-api:2.1 
```

作为依赖。鉴于我在我的项目中使用 Jetty，我怀疑使用

```
org.mortbay.jetty:jsp-api-2.1:6.1.5 
```

将是更好的选择。我是对/错吗？它们可以互换使用吗？是否`jsp-api-2.1`利用不同的实现？或者如果`jsp-api`断言与 Jetty 的兼容性，它只是一个重新包装？

我一直试图在网上找到有关此的信息，到目前为止还没有任何消息。

**更新**：似乎`org.mortbay.jetty:servlet-api-2.5:6.1.5`和`javax.servlet.jsp:servlet-api:2.1`有相同的关系。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T15:08:36.470

Jetty 在 jsp 方面有着悠久而丰富多彩的历史，我们没有自己的 jsp 实现，我们经常利用其他实现，从您查看的版本号判断，这些都是非常旧的版本，我们在 glassfish jsp 实现之上维护补丁。我认为这是一个支持登录码头的补丁，然后是一个或三个错误修复。

现在我们一直在使用 java.net 项目中的 jsp 工件，该项目是前一段时间从 glassfish 中分离出来的。然而，这似乎也没有非常定期地跟踪错误修复，所以我们正在尝试在 tomcat 中实现 jasper。

回到您的问题，jsp-api 工件通常只是重新打包的工件，因为 api 不会经常更改。我们历来重新捆绑它们以使它们与修补的实现配对。

现在，您显然正在使用 jetty-6 设置，因为您仍在使用 org.mortbay 包装，但 jetty6 和 jetty7 都是 servlet-api 2.5，因此您可以使用 jetty7 jsp 设置，我们有一个方便的 pom在这里声明这些工件：

[http://central.maven.org/maven2/org/eclipse/jetty/jetty-jsp/7.6.5.v20120716/jetty-jsp-7.6.5.v20120716.pom](http://central.maven.org/maven2/org/eclipse/jetty/jetty-jsp/7.6.5.v20120716/jetty-jsp-7.6.5.v20120716.pom)

这些也是 glassfish 捆绑包，在此过程中重新打包并制作成 osgi 捆绑包，因此它们可以在 osgi 环境中与 jetty 一起使用......虽然它们应该可以正常工作，但我们将它们打包在我们的 jetty7 发行版中。

# javascript - SilkJS / 服务器端 JavaScript 供企业使用的可行性

> ID：11936851
> 
> 赞同：5
> 
> 时间：2012-08-13T14:53:46.890
> 
> 标签：javascript, webserver, v8, silkjs

我一直在将 SilkJS 用于我的一些爱好项目。到目前为止，性能是惊人的，我非常喜欢能够在前端和后端使用 JavaScript。我正在考虑在一些商业项目中使用它，但我想对这样一个决定的可行性进行尽职调查。我有一些问题，想了解一下。

1) 你们知道哪些企业项目（如果有的话）使用 SilkJS？

2) 关于使用 SilkJS 作为 Web 服务器或其他基于 V8 的解决方案的安全性，有哪些可用资源？（漏洞历史、平均修补时间等）。

3) 你们在使用 SilkJS 或其他基于 V8 的解决方案作为 Web 服务器时遇到过哪些陷阱，如果可能的话，你们是如何处理的？

4) SilkJS 是否能很好地处理水平扩展（跨多个服务器分配负载）？你的答案是基于理论计算和现场测试的例子吗？

5) 除了官方网站本身，您还知道哪些关于使用 SilkJS 作为 Web 服务器构建网站的资源？

在回复之前，让我先消除 80% 的回复，我会受到以下限制：

1) 不，我不会使用 NodeJS。出于商业和心理健康的原因，我不会使用异步回调疯狂编程。不要试图说服我我会“习惯并喜欢它”。对于我正在从事的项目类型来说，这并不是最佳选择。是的，你听到了——异步并不适合所有事情。

2）我知道可以在NodeJS中模拟同步编程。不，我也对此不感兴趣。我没有使用 NodeJS - 克服它。

3）我完全意识到大多数应用程序都是 i/o 绑定的，而不是 cpu 绑定的。因此，是的，使用 PHP 通常没问题。但是，对于某些项目，cpu 优化应产生可观的投资回报。不，一家公司不必是 Facebook 就可以做到这一点。这并不是要讨论“为什么 PHP 是好的”。这是对SilkJS对更多商业项目可靠性的探索。

3) 是的，我知道 Java 是什么。不，如果我想减少 CPU 瓶颈，我对为什么这样做会很好并不感兴趣。再一次，这并不是要讨论“为什么其他语言还可以”。它是对更多企业项目的 SilkJS 和基于 V8 的服务器端解决方案的可靠性的探索。

4）是的，有可能对这个问题有一个最佳答案。谁对在企业环境中使用 SilkJS 做出最佳支持或反对，谁就获得了正确的答案投票。

另外，我知道尽管我希望避免使用 NodeJS，但它确实使用了 V8。在这方面，我愿意在通过 NodeJS 使用的上下文中对服务器端的 V8 进行安全审查和稳定性审查。

至于我所说的“企业”，想想每月点击数几十万的电子商务网站和/或稳定性和正常运行时间至关重要且拥有数十万用户的应用程序。

我的目标不是抨击 SilkJS。我非常喜欢它，并会在可能的情况下继续使用它。但是，作为一名专业程序员，我不能只在每个项目中使用我喜欢的东西。所以，让洞察力开始..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T19:18:23.100

SilkJS 应该像 Apache+PHP 一样扩展。SilkJS 服务器场前的负载均衡器。像您已经知道的那样扩展 MySQL 后端。

SilkJS 不执行 GZIP 或 SSL。我认为相信一个或两个在野外的实现是有风险的，反对所有各种机器人（黑客或其他）、蜘蛛、浏览器、自定义 perl 程序等。你可以简单地实现 Apache 作为反向SilkJS 前面的代理来提供这些功能。

事实上，您可以对服务器端应用程序进行分片，并使用 apache 作为反向代理，根据请求的 URL 连接到正确的分片。

我想如果你在 SilkJS google 组发布任何安全或其他问题，你会看到及时发布到 github 存储库的补丁。

除了 SilkJS.net 站点，您可能会在 github 上查找各种存储库，其中包含使用 SilkJS 的示例程序。

[http://www.sencha.com/blog/discover-music-with-sencha-touch-2](http://www.sencha.com/blog/discover-music-with-sencha-touch-2)

那篇文章讨论了 Modus Create 如何使用 Sencha Touch 作为前端和 SilkJS 作为后端为 NPR 构建应用程序。它说：

“SilkJS 服务器托管在 Amazon 的 EC2 云上，位于负载均衡器后面，以实现速度和冗余。两个 SilkJS 主机都由 NPR API 通过 cURL 提供，并负责从数据包中修剪超过 300KB，从而带来平均负载在被压缩传输之前小于 200KB！”

# tridion - Tridion - 将项目从事件放入工作流

> ID：11936852
> 
> 赞同：6
> 
> 时间：2012-08-13T14:53:54.683
> 
> 标签：tridion, tridion-2011

是否可以从事件系统将项目放置在工作流中？我面临的问题是，我们希望根据组件所在的文件夹（而不是它们使用的架构）将组件引导到两个不同的工作流程，而 Tridion UI 似乎不支持。我希望编写一个在签入组件时触发的事件，这样我就可以确定该组件在哪个文件夹中，并将其引导到事件中的适当工作流中。

我对事件的创建很好，就将项目添加到工作流程而言，我完全不知道从哪里开始。我查看了 TOM.NET API 文档，但确实没有找到任何帮助。任何帮助或示例将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T15:11:52.820

正如@Jeremy 建议的那样，您实际上想要做的事情是不可能的。

但是，您可以通过将工作流程的第二步设为自动决策来实现相同的结果，该决策在一个工作流程过程定义中创建 2 个单独的工作流程分支。您的自动决策可以读取组件的组织项并相应地指导它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-13T15:00:18.723

这是不可能的 - 组件仅在保存时才添加到 WF 流程，并且其架构具有关联的流程定义。

# jsf - JSF 中的多语言支持

> ID：11936858
> 
> 赞同：0
> 
> 时间：2012-08-13T14:54:14.590
> 
> 标签：jsf, jakarta-ee

是否可以使用数据库资源创建多语言网页？

而不是“messages_EN.properties”、“messages_HU.properties”等等......我想将这些文本保存在数据库中。是否可以像使用属性文件一样使用它？例如 #{messages.hello} 将取决于当前用户的语言，并且文本将从数据库加载，而不是属性文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T15:05:46.110

首先你应该检查这个：

[正确的 java.util.ResourceBundle 组织](https://stackoverflow.com/questions/11416375/correct-java-util-resourcebundle-organization)

此处描述了执行此操作的方法：

[messages.properties 取自 db](https://stackoverflow.com/questions/9080474/messages-properties-taken-from-db)

# c# - 无法从 Web 服务反序列化斯堪的纳维亚字符

> ID：11936859
> 
> 赞同：0
> 
> 时间：2012-08-13T14:54:16.967
> 
> 标签：c#, web-services, magento, soap

我正在使用 Magento 1.7 和他们的 SOAP api 来检索我的 .Net 环境的订单。除了字符编码，一切都很好。Å、Ä 和 Ö 等字符被翻译为 ??。

Fiddler 的响应显示服务器 (Litespeed) 实际上以 UTF-8 发送正确的字符。MySql 数据库也是用 UTF-8 编码的。

提琴手原料：

```
<city xsi:type="xsd:string">Å Ä Ö</city> 
```

关于如何强制我的 c# 客户端不将其呈现为的任何想法？?? ???..?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:58:52.887

尝试指定 CultureInfo：http: [//msdn.microsoft.com/en-us/library/system.globalization.cultureinfo%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo%28v=vs.71%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T07:14:58.613

我完全发疯了，并以可能最糟糕的方式解决了它，但它确实帮助我完成了我的任务，因为在 webclient 上设置cultureinfo 或设置 requestencoding 没有帮助：自定义 SoapExtension：

```
Public Class MySoapExtension
Inherits SoapExtension
Private oldStream As Stream
Private newStream As Stream

Public Overrides Function ChainStream(stream As Stream) As Stream
    oldStream = stream
    newStream = New MemoryStream()
    Return newStream
End Function

Public Overloads Overrides Function GetInitializer(methodInfo As  _
    LogicalMethodInfo, _
  attribute As SoapExtensionAttribute) As Object

End Function

Public Overloads Overrides Function GetInitializer(WebServiceType As  _
  Type) As Object

End Function

Public Overrides Sub Initialize(initializer As Object)

End Sub
Public Overrides Sub ProcessMessage(message As SoapMessage)
    Select Case message.Stage
        Case SoapMessageStage.BeforeSerialize
        Case SoapMessageStage.AfterSerialize
            WriteOutput(message)
        Case SoapMessageStage.BeforeDeserialize
            WriteInput(message)
        Case SoapMessageStage.AfterDeserialize
        Case Else
            Throw New Exception("invalid stage")
    End Select
End Sub

' Write the SOAP message out to a file.
Public Sub WriteOutput(message As SoapMessage)
    newStream.Position = 0
    Copy(newStream, oldStream)
End Sub

' Write the SOAP message out to a file.
Public Sub WriteInput(message As SoapMessage)
    Copy(oldStream, newStream)
    newStream.Position = 0
End Sub

Sub Copy(fromStream As Stream, toStream As Stream)
    Dim reader As New StreamReader(fromStream)
    Dim writer As New StreamWriter(toStream)
    writer.WriteLine(ReplaceInvalidChars(reader.ReadToEnd()))
    writer.Flush()
End Sub

Private Function ReplaceInvalidChars(ByVal content As String) As String
    If content.Contains("salesOrderInfo") Then
        Return MagentoHackHelper.Encode(content)
    Else
        Return content
    End If
End Function

End Class

Public Class MagentoHackHelper

Public Shared Function Encode(content As String) As String
    content = content.Replace("Å", "##Aaring##")
    content = content.Replace("Ä", "##Auml##")
    content = content.Replace("Ö", "##Ouml##")

    content = content.Replace("å", "##aaring##")
    content = content.Replace("ä", "##auml##")
    content = content.Replace("ö", "##ouml##")

    Return content
End Function

Public Shared Function Decode(content As String) As String
    content = content.Replace("##Aaring##", "Å")
    content = content.Replace("##Auml##", "Ä")
    content = content.Replace("##Ouml##", "Ö")

    content = content.Replace("##aaring##", "Å")
    content = content.Replace("##auml##", "Ä")
    content = content.Replace("##ouml##", "Ö")

    Return content
End Function

End Class 
```

# jquery - 在 jQuery Mobile 的 changePage 中指定内容类型？

> ID：11936861
> 
> 赞同：0
> 
> 时间：2012-08-13T14:54:23.270
> 
> 标签：jquery, ajax, jquery-mobile

我试图在 changePage 中指定 contentType，但它不起作用。这是我尝试过的：

```
 $.mobile.changePage('/Detail', {
        type: 'POST',
        contentType: 'application/json',
        cache: false,
        data: JSON.stringify({
            item: marker.item
        })
    }); 
```

这可能吗？我认为它会覆盖常规的 jQuery ajax，但似乎并非如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T15:11:33.940

如果要覆盖默认选项，则必须将选项作为第二个参数传递给 changePage 函数。目前，您在第一个参数之后关闭了括号，因此您的选项不会作为参数传递给函数。但是这样做，它仍然无法按您的预期工作，因为方法`contentType`中没有使用选项`$.mobile.changePage()`。请检查[http://jquerymobile.com/test/docs/api/methods.html](http://jquerymobile.com/test/docs/api/methods.html)以获取有效选项。

# asp.net-mvc-3 - 温莎短暂的生活方式

> ID：11936862
> 
> 赞同：1
> 
> 时间：2012-08-13T14:54:28.450
> 
> 标签：asp.net-mvc-3, model-view-controller, castle-windsor

我的温莎集装箱有一些非常奇怪的行为。

我已经像这样配置了我的容器。

```
Container = new WindsorContainer();
Container.Kernel.ComponentModelCreated += KernelComponentModelCreated;
Container.Install(FromAssembly.This());

private static void KernelComponentModelCreated(ComponentModel model)
{
    if (model.LifestyleType == LifestyleType.Undefined)
        model.LifestyleType = LifestyleType.Transient;
} 
```

因此，我假设我所有未指定生活方式的组件都会获得短暂的生活方式，并且直到现在它似乎都没有出现任何问题。

我启动了多个异步任务，它们都解决了一些组件。（所以你会期望每个任务都会获得一个新的组件实例）

但是现在我知道任务没有获得新实例，因为我的任务由于组件的跨线程问题而失败。（所以它被用于多个任务）

当我更换 Container.Resolve(somecomponent); 只需在适当的位置创建新组件，一切就可以正常工作。

```
var contextProvider = MvcApplication.Container.Resolve<IDbContextProvider>(); 
```

替换为

```
var contextProvider = new DbContextProvider(); 
```

所以我的问题是我在这里错过了什么。

由于显式配置，任务在临时配置的 MVC3 控制器中启动。

由于上面的代码，所有存储库中都解析了 DbContextProvider，也配置了瞬态。

我在文档中发现的另一件事是。您必须释放瞬态组件。我用 IDisposable 实现了所有组件。但是由于控制器中的自动构造器注入，我不完全确定是否必须手动释放它们，如果是，我该怎么做。（是的，我知道我必须调用容器上的 Release 方法）

**更新**

下面的代码负责释放和解决我的控制器：

```
public class WindsorControllerFactory : DefaultControllerFactory
{
    private readonly IKernel _kernel;

    public WindsorControllerFactory(IKernel kernel)
    {
        _kernel = kernel;
    }

    public override void ReleaseController(IController controller)
    {
        _kernel.ReleaseComponent(controller);
    }

    protected override IController GetControllerInstance(RequestContext requestContext, Type controllerType)
    {
        if (controllerType == null)
        {
            throw new HttpException(404, string.Format("The controller for path '{0}' could not be found.", requestContext.HttpContext.Request.Path));
        }
        return (IController)_kernel.Resolve(controllerType);
    }
} 
```

如果所有依赖项都以应有的方式解决和发布，是否有一些示例可用于测试？（生活方式测试）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T06:34:48.300

我不确定这是否是导致您的问题的原因，但您应该只`ComponentModel`在实现中进行修改`IContributeComponentModelConstruction`。

查看[组件模型构建贡献者的文档以](http://docs.castleproject.org/Default.aspx?Page=ComponentModel-construction-contributors&NS=Windsor&AspxAutoDetectCookieSupport=1)获取有关如何有效更改容器默认生活方式的帮助。

关于`IDisposable`s 的处置-如果您像应该一样释放控制器，那么一切都将与 Windsor 一起工作:)

# mysql - 选择查询以获取最近 3 个电话和邮件

> ID：11936866
> 
> 赞同：2
> 
> 时间：2012-08-13T14:54:33.653
> 
> 标签：mysql, sql

我有 2 张桌子。其中一张表包含来自用户的所有邮件，另一张表包含来自用户的所有电话。

```
Table 1
call_id, | call_date | user_id 
1        |   10/01/12|    3 
2        |   9/01/12 |    3 

Table 2 
mail_id, | mail_date | user_id
1        |   8/01/12 |    3
2            7/01/12 |    3 
```

我需要收到最后 3 个电话和邮件：10/01/12 - 电话 9/01/12 - 电话 8/01/12 - 邮件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T15:01:09.503

假设 MySQL，并且只有一个 User_ID ...

```
SELECT
   *
FROM
(
  SELECT 'call' AS type, id, call_date AS event_date, user_id FROM table_1
  UNION ALL
  SELECT 'mail' AS type, id, mail_date AS event_date, user_id FROM table_2
)
  data
WHERE
  user_id = 3
ORDER BY
  event_date DESC
LIMIT
  3 
```

**编辑：**糟糕，忘记在 中指定`DESC`，`ORDER BY`抱歉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T15:07:00.560

```
Declare @userID int;
SET @userID=3;

select call_id FROM table_1 
where user_id=@userID
order by call_date desc limit 2

UNION ALL

select mail_id FROM table_2
where user_id=@userID
order by mail_date desc limit 1 
```

# apache - 可以将 %26 重写为特殊字符序列的重写规则

> ID：11936868
> 
> 赞同：1
> 
> 时间：2012-08-13T14:54:39.520
> 
> 标签：apache, rewrite

我的网站提供来自 tocmat 的文档，这些文档有时`&`在文件名中有 '。

所以

`nick&janes.doc`

这是我们访问它的 URL：

`http://mysite.com/sub/nick%26janes.doc`

出于某种原因，由于某些错误，我们的 Apache + OpenSSL 版本无法正确重写。所以 %26 变成了 & 然后请求全部被破坏，因为`http://mysite.com/sub/nick&janes.doc`

升级 OpenSSL 将解决这个问题，但不幸的是，这在几个月内都不是一个选项。

作为一种变通方法，我们正在尝试创建一个重写规则，可以将任何`%26`字符序列转换为特殊字符序列......让我们说`___--___`。然后在 Tomcat 上，我们可以使用过滤器来修复 URL，因此不再有问题。

有谁知道我怎么能写出这样的重写规则？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T16:22:58.023

```
RewriteRule ^(.*)&(.*)$ $1__-__$2 [N] 
```

这`foo%26bar`变成`foo__-__bar`

此时，您可以使用 Tomcat 过滤器将任何 URL 更改`__-__`回 %26

# c++ - C++中流接口的问题

> ID：11936870
> 
> 赞同：6
> 
> 时间：2012-08-13T14:54:46.787
> 
> 标签：c++, serialization

所以我在 C++ 中有一个虚拟流接口

```
class KxStream
{
public:
   virtual KxStream& operator<< ( u32 num ) = 0;
}; 
```

它有大量适用于所有内置类型的基本 << 运算符。我刚刚列出了一个。

然后我有一些实现流接口的类。像这样：

```
class KxCbuf : public KxStream
{
public:
   KxStream& operator<<( u32 num );
} 
```

所以在 KxCbuf 中有一个流接口的实现。到目前为止，一切都很好。然后我有一些重载流接口的类：

```
class KxSymbol
{
   operator u32() const;
   friend KxStream& operator<<( KxStream& os, KxSymbol sym );
}; 
```

请注意，此类已将运算符强制转换为内置类型。现在，当我尝试将这些类之一流式传输到实现流式接口的类之一时，我收到一个错误：

```
KxCbuf buf;
KxSymbol sym;

buf << sym; // error! 
```

编译器对使用哪些函数感到困惑。Gcc 编译得很好，但是说有多种方法可以做到这一点。MSVC 没有编译说有多个重载：

```
src/variable.cpp(524) : error C2666: 'KxCbuf::operator <<' : 15 overloads have similar conversions 
```

我知道发生了什么，只是不知道如何令人满意地解决它。所以编译器可以要么强制转换 KxCbuf -> KxStream，然后调用友元函数，这是正确的做法。或者它可以强制转换 KxSymbol -> u32，然后调用继承自 KxStream 的 KxCbuf 中的 u32 << 运算符。

我可以用两种（坏的）方法解决它。

我可以从流式传输一些明确的内容开始：

```
buf << "" << sym; 
```

这样第一个流运算符“”的返回值返回KxStream，一切正常。或者我可以为实现类实现一个冗余的流操作符。例如，我可以将以下内容添加到 KxSymbol：

```
friend KxStream& operator<<( KxCbuf& os, KxSymbol sym ); 
```

第一个答案总是有效的 - 但它肯定是丑陋的。第二个答案也很丑陋，因为我必须创建冗余的流运算符，并且并不总是有效，因为 KxStream 实现在我需要定义新的流运算符的地方并不总是可见。

理想情况下，我希望 KxStream 接口的实现就像 KxStream 对象一样工作，并避免导致模糊转换的隐式转换。

我该如何解决这个问题？

（ps。我需要为我的库的自定义序列化方案创建自己的流操作符。我不能使用具有自己的序列化类的 boost 或类似的第三方库）

@Edit：有几个很好的答案与控制编译器对隐式转换的使用有关，比如转换为 KxSymbol -> u32，不幸的是隐式转换对代码很重要。例如，KxSymbol 是一个将字符串存储在表格中并将它们作为数字返回的类，以便我可以将字符串作为数字进行比较。例如，如果两个符号不相等，则字符串不相同。我还将符号作为数字存储在某些数据结构中。

有没有办法从另一边解决这个问题，*以某种方式让编译器理解 KxStream 的实现应该优先于其他隐式转换转换为 KxStream 对象？*

例如，如果我以某种方式强制编译器必须首先将 KxCbuf 转换为 KxStream，然后再使用 operator<< 来处理内置类型。这将使它总是更喜欢重载运算符<<'而不是 KxStream 运算符。- 重载需要一次，而 KxStream 需要两次。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T15:05:46.583

如果您有 C++11 编译器，请将转换函数标记为“显式”。这样你就不会得到到 u32 的隐式转换，这种歧义就会消失。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T15:07:40.090

最简单和最安全的方法是将隐式转换从更改`operator u32() const;`为命名方法`u32 as_u32() const`。这不仅消除了歧义，还可以防止各种不必要的意外转换，这些转换会在未来给您带来麻烦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T16:52:15.477

我想我可能会有答案。在虚拟私有方法中实现内置的流操作符。

所以我做这样的事情：

```
class KxStream
{
public:
   KxStream& operator<< ( u32 num ) { return stream_i( num ); }
private:
   virtual KxStream& stream_i ( u32 num ) = 0;
};

class KxCbuf : public KxStream
{
private:
   KxStream& stream_i( u32 num );
} 
```

现在编译器没有办法通过KxCbuf调用内置的operator<<。它只能使用 KxStream 中的公共方法。但我仍然通过私有 stream_i 方法获得虚拟方法重载。因此，当流式传输到 KxCbuf 时，编译器*必须始终*转换为 KxStream。这是唯一的方法。

在友元重载和内置函数之间进行选择时，友元重载获胜，因为内置函数需要 2 次强制转换，而重载则需要 1 次。

# sql - Teradata 导入错误 - 导入完成但没有数据插入到列中

> ID：11936880
> 
> 赞同：-2
> 
> 时间：2012-08-13T14:55:20.523
> 
> 标签：sql, teradata

我正在使用 Teradata 的 SQL 助手将数据加载到表中。文件具有具有相同布局的匹配列。关于为什么这会完成导入但不会将任何数据插入表中的任何想法？

这是表和插入的 SQL...

```
CREATE MULTISET TABLE DLAB_MARKETING.ProfileAttributes,
NO FALLBACK,
NO BEFORE JOURNAL,
     NO AFTER JOURNAL,
     CHECKSUM = DEFAULT,
     DEFAULT MERGEBLOCKRATIO
     (
      FullName VARCHAR(50) CHARACTER SET LATIN NOT CASESPECIFIC NOT NULL,
      EmailAddress VARCHAR(100) CHARACTER SET LATIN NOT CASESPECIFIC NOT NULL,
      FirstName VARCHAR(100) CHARACTER SET LATIN NOT CASESPECIFIC,
      LastName VARCHAR(100) CHARACTER SET LATIN NOT CASESPECIFIC,
      ZipCode INTEGER,
      StoreNumber INTEGER,
      StoreAddress VARCHAR(100) CHARACTER SET LATIN NOT CASESPECIFIC,
      StoreCity VARCHAR(100) CHARACTER SET LATIN NOT CASESPECIFIC,
      StoreState CHAR(2) CHARACTER SET LATIN NOT CASESPECIFIC,
      StoreZip INTEGER,
      State VARCHAR(25) CHARACTER SET LATIN NOT CASESPECIFIC NOT NULL,
      Source_ VARCHAR(75) CHARACTER SET LATIN NOT CASESPECIFIC NOT NULL,
      PhoneNumber INTEGER,
      Address1 VARCHAR(150) CHARACTER SET LATIN NOT CASESPECIFIC,
      Address2 VARCHAR(150) CHARACTER SET LATIN NOT CASESPECIFIC,
      City VARCHAR(100) CHARACTER SET LATIN NOT CASESPECIFIC,
      Gender CHAR(1) CHARACTER SET LATIN NOT CASESPECIFIC,
      MobilePhone INTEGER,
      CR2StoreIntersection INTEGER,
      CR2StoreCity VARCHAR(100) CHARACTER SET LATIN NOT CASESPECIFIC,
      Pet INTEGER,
      ShoppingFrequency INTEGER,
      AgeToddler INTEGER,
      AgeChildren6to17 INTEGER,
      Age25To34 INTEGER,
      Age18To24 INTEGER,
      Age35To44 INTEGER,
      Age45To54 INTEGER,
      AdultApparel INTEGER,
      Age55To64 INTEGER,
      Age65orGreater INTEGER,
      Dog INTEGER,
      Cat INTEGER,
      Groceries INTEGER,
      Snacks INTEGER,
      Cleaning INTEGER,
      Q4NoAnswer INTEGER,
      AgeInfant INTEGER,
      HBA INTEGER,
      Baby INTEGER,
      ChildrenClothing INTEGER,
      Housewares INTEGER,
      Party INTEGER,
      Seasonal INTEGER,
      Toys INTEGER,
      SchoolSupplies INTEGER,
      Cellular INTEGER,
      General INTEGER,
      Ad INTEGER,
      Survey INTEGER,
      Coupon INTEGER,
      Contest INTEGER,
      White INTEGER,
      AA INTEGER,
      AmericanIndian INTEGER,
      Asian INTEGER,
      Hawaiian INTEGER,
      Hispanic INTEGER,
      Other INTEGER,
      Q6NoAnswer INTEGER,
      CR2StoreNumber INTEGER,
      HTMLEmails VARCHAR(100) CHARACTER SET LATIN NOT CASESPECIFIC,
      SubscriberKey VARCHAR(125) CHARACTER SET LATIN NOT CASESPECIFIC,
      Status VARCHAR(50) CHARACTER SET LATIN NOT CASESPECIFIC NOT NULL)
PRIMARY INDEX ( EmailAddress );

INSERT  INTO DLAB_MARKETING.ProfileAttributes
(FullName, EmailAddress, FirstName, LastName, ZipCode, StoreNumber,
        StoreAddress, StoreCity, StoreState, StoreZip, State, Source_,
        PhoneNumber, Address1, Address2, City, Gender, MobilePhone, CR2StoreIntersection,
        CR2StoreCity, Pet, ShoppingFrequency, AgeToddler, AgeChildren6to17,
        Age25To34, Age18To24, Age35To44, Age45To54, AdultApparel, Age55To64,
        Age65orGreater, Dog, Cat, Groceries, Snacks, Cleaning, Q4NoAnswer,
        AgeInfant, HBA, Baby, ChildrenClothing, Housewares, Party, Seasonal,
        Toys, SchoolSupplies, Cellular, General, Ad, Survey, Coupon,
        Contest, White, AA, AmericanIndian, Asian, Hawaiian, Hispanic,
        Other, Q6NoAnswer, CR2StoreNumber, HTMLEmails, SubscriberKey,
        Status)

VALUES  
(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?,
        ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?,
        ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?,
        ?) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T17:02:17.507

如果您的连接的事务语义默认为 ANSI 而不是 Teradata，您将需要在声明`COMMIT;`之后提交`INSERT`。

要检查会话的事务语义：

1.  连接到 Teradata
2.  `HELP SESSION;`
3.  寻找事务语义。它将是 Teradata 或 ANSI。

您还可以在 ODBC DSN 配置中指定事务语义。

# java - Play framework & CAS - 如何登录功能测试？

> ID：11936881
> 
> 赞同：1
> 
> 时间：2012-08-13T14:55:22.580
> 
> 标签：java, testing, functional-testing, cas, playframework-1.x

我正在使用带有 CAS 3.1 的 Play 1.2.4 作为安全模块。在开发过程中一切正常，我必须登录才能使用我的控制器方法。

但是我无法让日志部分在我的功能测试中工作。我使用这个问题作为参考： [Playframework Secure module: How do you "log in" to test a secure controller in a FunctionalTest?](https://stackoverflow.com/questions/5762246/playframework-secure-module-how-do-you-log-in-to-test-a-secured-controller-in)

我的测试如下所示：

```
@Test
public void testThatIndexPageWorks() {

    final Map<String, String> loginUserParams = new HashMap<String, String>();
    loginUserParams.put("login", "foobar");
    loginUserParams.put("password", "foobar");
    final Response loginResponse = POST("/@cas/authenticate", loginUserParams);

    final Request request = newRequest();
    request.cookies = loginResponse.cookies; // makes the request authenticated
    request.url = "/";
    request.method = "GET";
    final Response response = makeRequest(request);
    assertIsOk(response);
} 
```

测试在 "POST("/@cas......)" 行失败，但有以下异常：

```
java.lang.RuntimeException: java.util.concurrent.ExecutionException: play.exceptions.ActionNotFoundException: Action null?ticket=ST-e71ba57f-3f1f-4b71-b16f-0141db78b42f not found
    at play.test.FunctionalTest.makeRequest(FunctionalTest.java:299)
    at play.test.FunctionalTest.makeRequest(FunctionalTest.java:305)
    at play.test.FunctionalTest.POST(FunctionalTest.java:152)
    at play.test.FunctionalTest.POST(FunctionalTest.java:200)
    at play.test.FunctionalTest.POST(FunctionalTest.java:167)
    at ApplicationTest.testThatIndexPageWorks(ApplicationTest.java:53)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at play.test.PlayJUnitRunner$StartPlay$2$1.evaluate(PlayJUnitRunner.java:105)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:76)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at play.test.PlayJUnitRunner.run(PlayJUnitRunner.java:55)
    at org.junit.runners.Suite.runChild(Suite.java:128)
    at org.junit.runners.Suite.runChild(Suite.java:24)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.junit.runner.JUnitCore.run(JUnitCore.java:157)
    at org.junit.runner.JUnitCore.run(JUnitCore.java:136)
    at org.junit.runner.JUnitCore.run(JUnitCore.java:117)
    at play.test.TestEngine.run(TestEngine.java:112)
    at controllers.TestRunner.run(TestRunner.java:66)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at play.mvc.ActionInvoker.invokeWithContinuation(ActionInvoker.java:548)
    at play.mvc.ActionInvoker.invoke(ActionInvoker.java:502)
    at play.mvc.ActionInvoker.invokeControllerMethod(ActionInvoker.java:478)
    at play.mvc.ActionInvoker.invokeControllerMethod(ActionInvoker.java:473)
    at play.mvc.ActionInvoker.invoke(ActionInvoker.java:161)
    at play.server.PlayHandler$NettyInvocation.execute(PlayHandler.java:257)
    at play.Invoker$Invocation.run(Invoker.java:278)
    at play.server.PlayHandler$NettyInvocation.run(PlayHandler.java:235)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:98)
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:206)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.util.concurrent.ExecutionException: play.exceptions.ActionNotFoundException: Action null?ticket=ST-e71ba57f-3f1f-4b71-b16f-0141db78b42f not found
    at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:232)
    at java.util.concurrent.FutureTask.get(FutureTask.java:91)
    at play.test.FunctionalTest.makeRequest(FunctionalTest.java:286)
    ... 57 more
Caused by: play.exceptions.ActionNotFoundException: Action null?ticket=ST-e71ba57f-3f1f-4b71-b16f-0141db78b42f not found
    at play.mvc.ActionInvoker.getActionMethod(ActionInvoker.java:590)
    at play.mvc.Controller.redirect(Controller.java:555)
    at play.mvc.Controller.redirect(Controller.java:532)
    at play.mvc.Controller.redirect(Controller.java:501)
    at controllers.modules.cas.MockServer.loginAction(MockServer.java:51)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at play.mvc.ActionInvoker.invokeWithContinuation(ActionInvoker.java:548)
    at play.mvc.ActionInvoker.invoke(ActionInvoker.java:502)
    at play.mvc.ActionInvoker.invokeControllerMethod(ActionInvoker.java:478)
    at play.mvc.ActionInvoker.invokeControllerMethod(ActionInvoker.java:473)
    at play.mvc.ActionInvoker.invoke(ActionInvoker.java:161)
    at play.test.FunctionalTest$1.execute(FunctionalTest.java:269)
    at play.Invoker$Invocation.run(Invoker.java:278)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    ... 3 more
Caused by: java.lang.Exception: Controller controllers not found
    ... 22 more 
```

看起来身份验证本身有效，因为我得到了某种票。

有谁知道我如何在功能测试中通过 CAS 登录我的应用程序，或者在运行测试时一起禁用 CAS / @With(SecureCAS.class) ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T13:28:45.597

设置 CAS 以将 MockServer 用于播放测试配置文件，在 application.conf 添加：

```
%test.cas.mockserver=true 
```

然后

```
@Test
public void testThatIndexPageWorks() {
        // test with cas functionality
        final Map<String, String> loginUserParams = new HashMap<String, String>();
        loginUserParams.put("login", "foobar");
        loginUserParams.put("password", "foobar");
        loginUserParams.put("serviceUrl", "modules.cas.securecas/authenticate"); // must be set but is not used
        final Response authenticateResponse = POST("/@cas/authenticate", loginUserParams);
        // you get a redirect to the authenticate service: assertEquals(Integer.valueOf(302), authenticateResponse.status);

        // extract the ticket from the redirect url:
        String location = authenticateResponse.getHeader("Location");
        String ticket = location.substring(location.indexOf("ticket=")+7, location.length());
        Logger.debug("ticket: "+ticket);

        // odd workaround: we have to set the port and create the request by ourself, otherwise play is calling the url without port!
        final int port = Http.Request.current() == null ? 80 : Http.Request.current().get().port;
        final Request authenticateRequest = newRequest();
        authenticateRequest.port = port;
        final Response validateResponse = GET(authenticateRequest, "/modules.cas.securecas/authenticate?service=cas/serviceValidate&ticket="+ticket);
        // the response is again a redirect, normally to the initially called page:  assertEquals(Integer.valueOf(302), authenticateResponse.status);
        Logger.debug("Authentication successfull");

         // functional test of a html page:
         final Request request = newRequest();
         request.url = "/";
         request.cookies = validateResponse.cookies; // makes the request authenticated
         request.method = "GET";
         final Response response = makeRequest(request);
         assertIsOk(response);
} 
```

# php - 将日期从一种格式转换为另一种格式

> ID：11936884
> 
> 赞同：0
> 
> 时间：2012-08-13T14:55:24.963
> 
> 标签：php, date, datetime, format, date-format

> **可能重复：**
> [在 PHP 中将一种日期格式转换为另一种日期格式](https://stackoverflow.com/questions/2167916/convert-one-date-format-into-another-in-php)

我有一个用户格式化的日期和使用 PHP 日期格式（[http://fr.php.net/manual/en/function.date.php](http://fr.php.net/manual/en/function.date.php)）的对应格式。这种格式在用户输入之前是未知的。

我必须将此日期转换为已知格式，例如“d/m/Y h:i:s”。我的 PHP 服务器使用 5.2.1 PHP 版本，所以我不能使用 DateTime 类。

有人可以替代 DateTime::createFromFormat 方法，这样的脚本或可以帮助我的想法？

最好的问候，弗洛里安。

**编辑 ：**

我编写了一个函数，可以在不知道原始日期格式的情况下将日期转换为其他格式：

```
/**
 * This function converts a date with unknown format into a defined format.
 * It could detect some standard date formats : dd/mm/YYYY, dd-mm-YY, YYYY-mm-dd hh:mm:ss, etc.
 * @param string $date date which is user formatted.
 * @param int $options used to help algorithm to detect date format : US or FR date, past date or future date, hour format.
 * @param string $newFormat format the date must be converted into
 * @param string $originalFormat format detected
 * @return boolean|string the new date, corresponding to the $date argument, formatted into the $newFormat format
 */
function convertDateToFormat($date, $options = 0, $newFormat, &$originalFormat = ''){
    if($options == 0){
        $options = DATE_FR | DATE_PAST | HOUR_24;
    }
    $matches = array();

    $year = 0;
    $month = 0;
    $day = 0;
    $hour = 0;
    $minute = 0;
    $second = 0;

    $originalFormatOk = false;

    if(preg_match('#(\d{1,2})([/.-])(\d{1,2})(([/.-])(\d{2,4}))?#', $date, $matches)){
        if(isset($matches[6])){
            if(strlen($matches[6]) == 2){
                if($matches[6] >= date('y') && DATE_PAST)
                    $year = '19'.$matches[6];
                else
                    $year = '20'.$matches[6];
                $originalFormatyear = 'y';
                if($options & DATE_US){
                    $originalFormat = 'm'.$matches[2].'d'.$matches[5].$originalFormatyear;
                    $year = $matches[6];
                    $month = $matches[1];
                    $day = $matches[3];
                    $originalFormatOk = true;
                }
            }
            else{
                $year = $matches[6];
                $originalFormatyear = 'Y';
            }
            if(!$originalFormatOk){
                $year = $matches[6];
                $month = $matches[3];
                $day = $matches[1];
                $originalFormat = 'd'.$matches[2].'m'.$matches[5].$originalFormatyear;
                $originalFormatOk = true;
            }
        }
        else{
            if($options & DATE_US){
                $originalFormat = 'm'.$matches[2].'d';
                $year = date('Y');
                $month = $matches[1];
                $day = $matches[3];
            }
            else{
                $originalFormat = 'd'.$matches[2].'m';
                $year = date('Y');
                $month = $matches[3];
                $day = $matches[1];
            }
            $originalFormatOk = true;
        }

    }

    if(preg_match('#'.$matches[0].'(\D*)(\d{1,2})([:hH])(\d{1,2})(:(\d{1,2}))?#', $dateHour, $matches)){
        if($options & HOUR_12)
            $originalFormatHour = 'h';
        else
            $originalFormatHour = 'H';
        $hour = $matches[2];
        $minute = $matches[4];
        if(strtolower($matches[3]) == 'h')
            $matches[3] = '\\'.$matches[3];
        $originalFormat .= $matches[1].$originalFormatHour.$matches[3].'i';
        if(isset($matches[6])){
            $second = $matches[6];
            $originalFormat .= ':s';
        }
    }

    if($originalFormatOk)
        return date($newFormat, mktime($hour, $minute, $second, $month, $day, $year));
    return false;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T15:02:48.690

该[`date_parse_from_format()`](http://at2.php.net/manual/en/function.date-parse-from-format.php)功能可以满足您的一切需求。

例如（来自文档）：

```
$date = "6.1.2009 13:00+01:00";
print_r(date_parse_from_format("j.n.Y H:iP", $date)); 
```

但是，如果您*不*知道格式，这或多或少是一个粗略的猜测，您必须使用类似的东西[`date_parse()`](http://at2.php.net/manual/en/function.date-parse.php)，它可以给您（希望）一个正确的日期，但可能会失败。

例如（来自文档）：

```
print_r(date_parse("2006-12-12 10:00:00.5")); 
```

将打印：

```
Array
(
    [year] => 2006
    [month] => 12
    [day] => 12
    [hour] => 10
    [minute] => 0
    [second] => 0
    [fraction] => 0.5
    [warning_count] => 0
    [warnings] => Array()
    [error_count] => 0
    [errors] => Array()
    [is_localtime] => 
) 
```

# wix - 检测 VC++ Redistributable ATL SP1（安装开始前）

> ID：11936887
> 
> 赞同：0
> 
> 时间：2012-08-13T14:55:37.557
> 
> 标签：wix, wix3.5, redistributable

我的项目依赖于“Microsoft Visual C++ 2005 Service Pack 1 Redistributable Package ATL 安全更新”，我想在安装开始时进行检查，以在未安装包时显示条件错误。

我检查了这个问题：[How to detect VC++ 2008 redistributable?](https://stackoverflow.com/questions/203195/how-to-detect-vc-2008-redistributable) ? 我找不到为 Visual C++ 2005 SP1 ATL 安全更新运行时文件提供的注册表项（手动安装可再发行组件后）。

我在这里做错了什么？有没有更好的方法来检测可再发行包？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:14:23.807

对于其他寻找相同答案的人：

已安装或 (HASVCPP200564)

32/64 位有不同的注册表 guid，上面是 64 位。

干杯，

# linux - 查找一个字符串并添加之前保存在变量中的多个行字符串

> ID：11936890
> 
> 赞同：1
> 
> 时间：2012-08-13T14:55:54.307
> 
> 标签：linux, bash, shell, sed, awk

我一直在尝试很多方法，但都没有运气。我有一个名为 test.txt 的文件，其中包含一些 lorem ipsum 和文本 [staging: production] 我只是想在它之前添加几行我保存在变量中的行。

如果您能解释我在以下任何一个方面出了什么问题，将不胜感激！

```
#!/bin/bash

test="lala\
kjdsh"

sed '/^#$/{N; /[staging: production]/ i \
<Location /cgis> \
</Location>\

}' ./test.txt

sed -i -e 's/\[staging\: production\]/\$test/g' ./test.txt
#sed -i 's/Lorem/beautiful/g' test.txt

#awk -v data=$test '{A[NR]=$0}/\[staging\: production\]/{ print data }' test.txt > testfile.txt

#read -a text <<<$(cat test.txt)
#echo ${#text[@]}
#for i in ${text[@]};
#do
#   echo -n $i;
#   sleep .2;
#done

#ed -s test.txt <<< $'/\[staging\: production\]/s/lalalala/g\nw'

#awk -v data=$test '/\(/\[staging\: production\]\)/ { print data }' test.txt > testfile.txt

# && mv testfile.txt test.txt

#sed -i -e '/\(\[staging\: production\]\)/r/$test\1/g' test.txt

#sed "/\(\[staging\: production\]\)/s//$test\1/g" test.txt 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T15:23:30.747

```
sed -i -e 's/\[staging\: production\]/\$test/g' ./test.txt 
```

不起作用，因为单引号 BASH 内部不会扩展`\$test`。
因此，您无需逃避`$`.

如果要替换变量的内容，`$test`请执行以下操作：

```
sed -i -e 's/\[staging: production\]/'$test'/g' ./test.txt 
```

你也不需要逃避`:`

在你的模式对我有用之前插入：

```
sed -i -e '/\[staging: production\]/ i '$test'' ./test.txt 
```

但是，为了保留我需要定义的变量内的换行符：

```
test="lala\nkjdsh" 
```

请注意`\n`对换行符进行编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T15:19:22.280

在 perl 中尝试，它似乎工作正常：

```
perl -pe '{$rep="what\nnow"; s/(\[foo foo2\])/$rep$1/}' file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T19:24:50.313

这可能对您有用（GNU sed）：

```
test="lala\\                                   
kjdsh"
sed '/\[staging: production\]/i\'"$test" test.txt 
```

变量中的NB`\\`和变量`"`在 sed 命令中被 's 包围。

# excel - Excel - 返回值，单元格匹配后，标题之间 - V2

> ID：11936892
> 
> 赞同：0
> 
> 时间：2012-08-13T14:56:12.607
> 
> 标签：excel, excel-2007, vba

![例子](../Images/c4aba1dd460580392d28e3315eda51ea.png)

这个问题是我之前在以下位置发布的问题的延续： [Excel - Return value, after cell has been mapped, between headers](https://stackoverflow.com/questions/11884850/excel-return-value-after-cell-has-been-matched-between-headers/)

**和以前一样（以及更多）：**

• 如果一个数字是负数：

• 使用 MATCH 检查范围内（标题之间）是否有对应的（正数）数字**并且“IDX”是否相同**；

• 如果有 MATCH，则输出已匹配的 F 的 ID（第 1 列）的值，然后，输出已匹配的负值的 ID；

• 如果没有，什么也不做。

**问题是：**

• 它需要循环，因为负值可以在正值之后；

• 搜索必须包含在标题之间并且idx 必须相同。我认为我上传的图像很清晰，希望如此。

我已经尝试从 lori_m 修改以前的答案，添加一个新的变量和条件，但一切都刚刚结束：

```
Names.Add "i", "=$A$1:$A$12": _
Names.Add "v", "=$B$1:$B$12": _
Names.Add "m", "=$D$1:$D$12": _
Names.Add "h", [IF({1},LOOKUP(ROW(i),ROW(i)/(v=INDEX(v,1))))]: _
Names.Add "l", [IF({1},LOOKUP(ROW(i),ROW(i)/(v=INDEX(v,1)),FREQUENCY(-ROW(i),IF(v=INDEX(v,1),-ROW(i),0))-1))]: _
[m]=[IF(COUNTIF(OFFSET(v,h,,l),"=-"&v),CONCATENATE("=",ADDRESS(ROW(i),COLUMN(i),4),"&"" AND ""&INDEX(",ADDRESS(h+1,COLUMN(i)),":",ADDRESS(h+l,COLUMN(i)),",MATCH(-",ADDRESS(ROW(v),COLUMN(v),4),",",ADDRESS(h+1,COLUMN(v)),":",ADDRESS(h+l,COLUMN(v)),",0))"),"")]: _
Names("h").Delete: _
Names("l").Delete 
```

我非常感谢所有的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T19:02:10.427

这是一些 VBA 代码，40,000 行大约需要 0.4 秒：

```
Public Sub MatchVals()

    Dim Arr As Variant, dic As Object, v As Variant, Match() As String
    Dim i As Long, j As Long, k As Long, n As Long

    Arr = ActiveSheet.UsedRange.Value2
    Set dic = CreateObject("scripting.dictionary")
    n = UBound(Arr)

    ReDim Match(1 To n, 1 To 1) As String
    k = n
    For i = n To 1 Step -1
        If Arr(i, 3) <> Arr(1, 3) Then
            dic.Add Arr(i, 3) & "|" & Arr(i, 2), i
        Else
            For j = i + 1 To k
                If Arr(j, 3) < 0 Then
                    v = dic(-Arr(j, 3) & "|" & Arr(j, 2))
                    If Not IsEmpty(v) Then
                        Match(v, 1) = Arr(v, 1) & " AND " & Arr(j, 1)
                    End If
                End If
                k = i - 1
            Next j
            dic.RemoveAll
        End If
    Next i

    With ActiveSheet.UsedRange
        .Offset(0, .Columns.Count).Resize(, 1).Value2 = Match
    End With
End Sub 
```

# c - Windows、fork 和 execv

> ID：11936894
> 
> 赞同：2
> 
> 时间：2012-08-13T14:56:27.477
> 
> 标签：c, windows, unix

我收到了一个想要在 Windows 下运行/编译的 Unix 工具。看了之后，我看到它使用`fork`和`execv`其他。我现在想了解它的作用以及如何在 Windows 中实现这一点。

该代码的功能不止于此，因此请不要评论此代码是否有意义。

```
pid = fork();
if(pid==0){
    execv("/usr/bin/java",args);
} 
```

如果我正确地解释了这一点，那么这个只会做一些事情，比如使用数组`java`中提供的参数进行调用。`args`所以在 Windows 中，这可以很容易地通过类似`system()`or的东西来实现`CreateProcess`（我没有读过*如何*做到这一点，只知道它可以做到）。

但这是我的问题：如果我理解正确，这段代码会分叉并调用`execv`，因为`execv`它不会返回，如果不先分叉，我的程序就不会完成。它是否正确？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T18:14:41.617

fork 创建一个子进程，它的 pid 与父 pid 不同。在您的代码中，您正在调用 fork 来运行另一个进程而不关闭当前（父）进程。

在调用 fork 并进入子进程之后，我们调用 execv(); execv() 函数用一个新的进程映像替换当前进程映像，它将执行带有 args 传递的 java 程序。

父进程必须等待子进程完成，这样子进程才不会成为僵尸进程（没有父进程的子进程）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T14:58:54.227

> execv 不返回，如果不先分叉，我的程序将无法完成。它是否正确？

实际上，您的程序会将自己变成执行程序。即在 exec 之后新程序将开始执行，但过程将是相同的：相同的 PID，相同的几个继承属性等。

# php - php数组对数组键和键数组的区别？

> ID：11936898
> 
> 赞同：2
> 
> 时间：2012-08-13T14:56:41.420
> 
> 标签：php, arrays, performance, array-key

假设我们有两个数组：

```
$a=array('1'=>'Apple','2'=>'Microsoft',
         '3'=>'Microapple','4'=>'Applesoft','5'=>'Softapple');
$b=array(1,3); 
```

其中 $b 数组表示要区分的数组 $a 的键。

我们希望收到另一个具有以下值的数组 $c：

```
$c=array('2'=>'Microsoft','4'=>'Applesoft','5'=>'Softapple'); 
```

在php手册中有两个功能：

```
array_diff($array1,$array2);    //difference of values
array_diff_key($array1,$array2);//difference of keys 
```

但以上都不适用于这里。

我们应该做什么？

**编辑**

感谢大家的贡献。

我对两个预定义的数组执行了一些基准测试，如下所示：

```
for ($i=0; $i < 10000; $i++) {    //add 10000 values
    $a[]=mt_rand(0, 1000000); //just some random number as a value
}
for ($i=0; $i < 10000; $i++) {    //add 10000 values as keys of a
    $b[]=mt_rand(0, 1000);    
}        //randomly from 0 to 1000 (eg does not cover all the range of keys) 
```

每个测试也进行了 10000 次， 的平均`Nanne`求解时间为：

`0.013398`

和之一`decereé`：

`0.014865`

这也很棒。

...与 in_array() 的其他建议不同，但是（该答案已被删除）：

```
foreach ($a as $key => $value)
if (!in_array($key, $b)) 
$c[$key] = $value; 
```

以上平均2秒。显而易见的原因是 in_array() 必须遍历 $b 以检查该值是否存在。`not`以上是如何做到这一点的一个很好的例子！:-)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-13T15:20:48.233

```
$c = array_diff_key($a, array_flip($b)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T15:00:24.937

我只是将其编码为：

```
$c = $a;
foreach ($b as $removeKey) {
    unset($c[$removeKey]);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T15:04:29.243

您的数组 $b 不是设置数组键，而是设置值。

如果您要使用：

```
$a=array('1'=>'Apple','2'=>'Microsoft',
     '3'=>'Microapple','4'=>'Applesoft','5'=>'Softapple');
$b=array('1' => NULL ,'3' => NULL);
array_diff_key($a,$b) 
```

你会得到你预测的结果。

# ios - 发行证书问题

> ID：11936900
> 
> 赞同：1
> 
> 时间：2012-08-13T14:56:52.187
> 
> 标签：ios, xcode, app-store, app-store-connect

我是团队中的新开发人员，我不得不接管以前的开发人员应用程序。

该应用程序已多次被拒绝，现在处于重新提交的稳定位置。

问题是 XCode 无法验证签名，因为我没有安装私钥。

对此有什么解决办法吗？我的第一反应是从 iTunes Connect 中删除该应用程序并重新开始，但它警告我，我将无法重复使用相同的名称！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T15:01:11.417

你有几个选择：

1.  在 iOS 开发中心的供应门户中吊销分发证书。然后使用您机器上生成的证书请求创建一个新的。然后，您可以更新您的 App Store 配置文件以使用新证书。

2.  如果可用，从以前的开发人员的机器中导出公钥和私钥对。（从钥匙串访问中）。将它们安装在您的机器上，现有的配置文件应该可以工作。

我猜选项 1 在您的情况下是最好的。

# crash - Monotouch 应用程序中的随机崩溃

> ID：11936902
> 
> 赞同：0
> 
> 时间：2012-08-13T14:56:55.913
> 
> 标签：crash, xamarin.ios

我的 Monotouch iOS 应用程序出现随机崩溃。使用该应用程序一段时间后会发生崩溃。它们也经常发生在锁定和解锁设备之后。此崩溃中出现了两个堆栈跟踪，这是：

```
0 ogaza 0x00003382 + 0
1 ogaza 0x00003fac + 0
2 libsystem_c.dylib 0x327e17ec _sigtramp + 48
3 libsystem_c.dylib 0x327d720e pthread_kill + 54
4 libsystem_c.dylib 0x327d029e abort + 94
5 ogaza 0x00684666 _ZNSt6vectorIhSaIhEEC2IPKhEET_S5_RKS0_ + 6626814
6 ogaza 0x005dc0ee _ZNSt6vectorIhSaIhEEC2IPKhEET_S5_RKS0_ + 5937286
7 ogaza 0x005dc3b6 _ZNSt6vectorIhSaIhEEC2IPKhEET_S5_RKS0_ + 5937998
8 ogaza 0x006501a0 _ZNSt6vectorIhSaIhEEC2IPKhEET_S5_RKS0_ + 6412600
9 ogaza 0x00650f16 _ZNSt6vectorIhSaIhEEC2IPKhEET_S5_RKS0_ + 6416046
10 ogaza 0x00650fd8 _ZNSt6vectorIhSaIhEEC2IPKhEET_S5_RKS0_ + 6416240
11 ogaza 0x005e8244 _ZNSt6vectorIhSaIhEEC2IPKhEET_S5_RKS0_ + 5986780
12 ogaza 0x005e83f0 _ZNSt6vectorIhSaIhEEC2IPKhEET_S5_RKS0_ + 5987208
13 ogaza 0x005e70c2 _ZNSt6vectorIhSaIhEEC2IPKhEET_S5_RKS0_ + 5982298
14 ogaza 0x002ffd87 _ZNSt6vectorIhSaIhEEC2IPKhEET_S5_RKS0_ + 2938143
15 ogaza 0x004579eb _ZNSt6vectorIhSaIhEEC2IPKhEET_S5_RKS0_ + 4346243
16 ogaza 0x00457d0b _ZNSt6vectorIhSaIhEEC2IPKhEET_S5_RKS0_ + 4347043
17 ogaza 0x00458e73 _ZNSt6vectorIhSaIhEEC2IPKhEET_S5_RKS0_ + 4351499
18 ogaza 0x00457c17 _ZNSt6vectorIhSaIhEEC2IPKhEET_S5_RKS0_ + 4346799
19 ogaza 0x004577bb _ZNSt6vectorIhSaIhEEC2IPKhEET_S5_RKS0_ + 4345683
20 ogaza 0x00415ed3 _ZNSt6vectorIhSaIhEEC2IPKhEET_S5_RKS0_ + 4077163
21 ogaza 0x00415abf _ZNSt6vectorIhSaIhEEC2IPKhEET_S5_RKS0_ + 4076119
22 ogaza 0x004807db _ZNSt6vectorIhSaIhEEC2IPKhEET_S5_RKS0_ + 4513651
23 ogaza 0x004801eb _ZNSt6vectorIhSaIhEEC2IPKhEET_S5_RKS0_ + 4512131
24 ogaza 0x0046db27 _ZNSt6vectorIhSaIhEEC2IPKhEET_S5_RKS0_ + 4436671
25 ogaza 0x003fdc7b _ZNSt6vectorIhSaIhEEC2IPKhEET_S5_RKS0_ + 3978259
26 ogaza 0x003ffacb _ZNSt6vectorIhSaIhEEC2IPKhEET_S5_RKS0_ + 3986019
27 ogaza 0x0004d2a3 _ZNSt6vectorIhSaIhEEC2IPKhEET_S5_RKS0_ + 109115
28 ogaza 0x002aa467 _ZNSt6vectorIhSaIhEEC2IPKhEET_S5_RKS0_ + 2587647
29 ogaza 0x005d4172 _ZNSt6vectorIhSaIhEEC2IPKhEET_S5_RKS0_ + 5904650
30 ogaza 0x0064f996 _ZNSt6vectorIhSaIhEEC2IPKhEET_S5_RKS0_ + 6410542
31 ogaza 0x005bf8d6 _ZNSt6vectorIhSaIhEEC2IPKhEET_S5_RKS0_ + 5820526
32 CoreFoundation 0x3532f3fc -[NSObject performSelector:withObject:withObject:] + 52
33 UIKit 0x32e24e06 -[UIApplication sendAction:to:from:forEvent:] + 62
34 UIKit 0x32e24dc2 -[UIApplication sendAction:toTarget:fromSender:forEvent:] + 30
35 UIKit 0x32e24da0 -[UIControl sendAction:to:forEvent:] + 44
36 UIKit 0x32e24b10 -[UIControl(Internal) _sendActionsForEvents:withEvent:] + 492
37 UIKit 0x32e25448 -[UIControl touchesEnded:withEvent:] + 476
38 UIKit 0x32e17b86 _UIGestureRecognizerUpdate + 5222
39 CoreFoundation 0x353a9b1a __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + 18
40 CoreFoundation 0x353a7d56 __CFRunLoopDoObservers + 258
41 CoreFoundation 0x353a80b0 __CFRunLoopRun + 760
42 CoreFoundation 0x3532b4a4 CFRunLoopRunSpecific + 300
43 CoreFoundation 0x3532b36c CFRunLoopRunInMode + 104
44 GraphicsServices 0x36fc7438 GSEventRunModal + 136
45 UIKit 0x32e37cd4 UIApplicationMain + 1080
46 ogaza 0x000712b3 _ZNSt6vectorIhSaIhEEC2IPKhEET_S5_RKS0_ + 256587
47 ogaza 0x003d7777 _ZNSt6vectorIhSaIhEEC2IPKhEET_S5_RKS0_ + 3821327
48 ogaza 0x002aa467 _ZNSt6vectorIhSaIhEEC2IPKhEET_S5_RKS0_ + 2587647
49 ogaza 0x005d4172 _ZNSt6vectorIhSaIhEEC2IPKhEET_S5_RKS0_ + 5904650
50 ogaza 0x0064f996 _ZNSt6vectorIhSaIhEEC2IPKhEET_S5_RKS0_ + 6410542
51 ogaza 0x006526ae _ZNSt6vectorIhSaIhEEC2IPKhEET_S5_RKS0_ + 6422086
52 ogaza 0x00655fda _ZNSt6vectorIhSaIhEEC2IPKhEET_S5_RKS0_ + 6436722
53 ogaza 0x005d8bce _ZNSt6vectorIhSaIhEEC2IPKhEET_S5_RKS0_ + 5923686
54 ogaza 0x00695697 _ZNSt6vectorIhSaIhEEC2IPKhEET_S5_RKS0_ + 6696495
55 ogaza 0x00032bfb _ZNSt6vectorIhSaIhEEC2IPKhEET_S5_RKS0_ + 915 
```

和这个：

```
0 ogaza 0x00003382 + 0
1 ogaza 0x00003fac + 0
2 libsystem_c.dylib 0x327e17ec _sigtramp + 48
3 ogaza 0x00053b8f _ZNSt6vectorIhSaIhEEC2IPKhEET_S5_RKS0_ + 135975
4 ogaza 0x0047abff _ZNSt6vectorIhSaIhEEC2IPKhEET_S5_RKS0_ + 4490135
5 ogaza 0x00406cdb _ZNSt6vectorIhSaIhEEC2IPKhEET_S5_RKS0_ + 4015219
6 ogaza 0x002aa467 _ZNSt6vectorIhSaIhEEC2IPKhEET_S5_RKS0_ + 2587647
7 ogaza 0x005d4172 _ZNSt6vectorIhSaIhEEC2IPKhEET_S5_RKS0_ + 5904650
8 ogaza 0x0064f996 _ZNSt6vectorIhSaIhEEC2IPKhEET_S5_RKS0_ + 6410542
9 ogaza 0x005cc522 _ZNSt6vectorIhSaIhEEC2IPKhEET_S5_RKS0_ + 5872826
10 UIKit 0x32e4bb94 -[UIViewController _setViewAppearState:isAnimating:] + 144
11 UIKit 0x32ea5d84 -[UIViewController _endAppearanceTransition:] + 264
12 UIKit 0x32e68250 -[UINavigationController navigationTransitionView:didEndTransition:fromView:toView:] + 680
13 UIKit 0x32e67fa0 -[UINavigationTransitionView _notifyDelegateTransitionDidStopWithContext:] + 292
14 UIKit 0x32e67cba -[UINavigationTransitionView _cleanupTransition] + 650
15 UIKit 0x32e67a2e -[UINavigationTransitionView _navigationTransitionDidStop] + 62
16 UIKit 0x32e1eaaa -[UIViewAnimationState sendDelegateAnimationDidStop:finished:] + 470
17 UIKit 0x32e243d4 -[UIViewAnimationState animationDidStop:finished:] + 52
18 QuartzCore 0x3222ac2e _ZN2CA5Layer23run_animation_callbacksEPv + 202
19 libdispatch.dylib 0x34264ee6 _dispatch_main_queue_callback_4CF$VARIANT$mp + 194
20 CoreFoundation 0x353a82ac __CFRunLoopRun + 1268
21 CoreFoundation 0x3532b4a4 CFRunLoopRunSpecific + 300
22 CoreFoundation 0x3532b36c CFRunLoopRunInMode + 104
23 GraphicsServices 0x36fc7438 GSEventRunModal + 136
24 UIKit 0x32e37cd4 UIApplicationMain + 1080
25 ogaza 0x000712b3 _ZNSt6vectorIhSaIhEEC2IPKhEET_S5_RKS0_ + 256587
26 ogaza 0x003d7777 _ZNSt6vectorIhSaIhEEC2IPKhEET_S5_RKS0_ + 3821327
27 ogaza 0x002aa467 _ZNSt6vectorIhSaIhEEC2IPKhEET_S5_RKS0_ + 2587647
28 ogaza 0x005d4172 _ZNSt6vectorIhSaIhEEC2IPKhEET_S5_RKS0_ + 5904650
29 ogaza 0x0064f996 _ZNSt6vectorIhSaIhEEC2IPKhEET_S5_RKS0_ + 6410542
30 ogaza 0x006526ae _ZNSt6vectorIhSaIhEEC2IPKhEET_S5_RKS0_ + 6422086
31 ogaza 0x00655fda _ZNSt6vectorIhSaIhEEC2IPKhEET_S5_RKS0_ + 6436722
32 ogaza 0x005d8bce _ZNSt6vectorIhSaIhEEC2IPKhEET_S5_RKS0_ + 5923686
33 ogaza 0x00695697 _ZNSt6vectorIhSaIhEEC2IPKhEET_S5_RKS0_ + 6696495
34 ogaza 0x00032bfb _ZNSt6vectorIhSaIhEEC2IPKhEET_S5_RKS0_ + 915 
```

我怀疑内存管理存在一些问题。我尝试了一些来自互联网的提示，例如：

*   使用从 UITableViewCell 继承的类时，将它们保存在我的视图控制器中的数组中。
*   保存我在类字段中附加事件的所有控件。
*   使用带有引用计数扩展的 SGen GC

这些都不起作用。

关于我可以做些什么来调试这个的任何提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T23:20:43.710

1.尝试在设备上调试，这里是[如何](http://docs.xamarin.com/ios/getting_started/debugging)

2.Try 在入口点添加try catch

```
public class Application
{
    private static void Main(string[] args)
    {
        try
        {
            UIApplication.Main(args, null, "AppDelegate");
        }
        catch (Exception ex)
        {
            Logger.Error(ex);
        }
    } 
```

3.尝试订阅UnhandledException

```
 public override bool FinishedLaunching(UIApplication app, NSDictionary options)
    {
        AppDomain.CurrentDomain.UnhandledException += OnUnhandledException;
        .....
    }

    private static void OnUnhandledException(object sender, UnhandledExceptionEventArgs e)
    {
        Logger.Error(e.ExceptionObject);
    } 
```

4.看看[Monotouch 的局限性](http://docs.xamarin.com/ios/about/limitations)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T18:05:37.117

我能够解决这个问题。问题的根源是 TestFlight 崩溃报告导致 Monotouch 调试行为不端。在调试版本中删除 TestFlight 后，我​​从 Mono 那里得到了一个关于这个问题的正确错误报告：

[http://docs.xamarin.com/ios/troubleshooting#Ran_out_of_trampolines_of_type_2](http://docs.xamarin.com/ios/troubleshooting#Ran_out_of_trampolines_of_type_2)

# google-app-engine - 有没有办法为 ndb.get_multi() 指定投影？

> ID：11936904
> 
> 赞同：4
> 
> 时间：2012-08-13T14:57:02.717
> 
> 标签：google-app-engine, app-engine-ndb

使用 NDB，可以为查询指定[投影](https://developers.google.com/appengine/docs/python/ndb/queries#projection)，允许限制为匹配查询的实体检索的属性数量。

但是，我在文档中找不到关于如何在 using 时指定投影的任何内容`ndb.get_multi()`，它总是获取完整的实体。

有没有办法在使用时只获取某些属性`ndb.get_multi()`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-13T19:28:50.960

不，投影功能仅适用于查询。投影 get() 操作没有优势（就更少的 I/O 操作而言）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-12T00:25:53.310

我最终遇到了使用投影`ndb.get_multi()`确实可以提高性能的情况。我有一个具有约 25 个属性的大型实体类，其中一些甚至是重复的。我需要 get_by_id 大约 10 个对象来为我的应用程序中的每个网页提供服务，但每个对象只需要 4 个属性。如果我使用 plain 实现它`ndb.get_multi()`，那么大约一半的前端 CPU 时间最终花费在一个名为 的 NDB API 方法`Model._from_pb`中，即反序列化从数据库中读取的对象。这看起来像是可以通过投影改进的东西，实际上，在我使用投影的情况下，以下方式将整体响应时间减少了一半：

```
Product.query(Product.key.IN(keys_to_get)).fetch(projection=list_of_columns) 
```

`Product`我的实体类的名称在哪里。当然，在这种情况下，查询需要一个新索引。

# php - 如何在 TCPDF 中为具有动态高度的 HTMLCell 应用分页符？

> ID：11936908
> 
> 赞同：1
> 
> 时间：2012-08-13T14:57:13.803
> 
> 标签：php, tcpdf

我有一个网站，您可以通过 TCPDF 打印包含各种信息的表格。这些信息中的大部分都是表格，我发现自己很容易为其编写分页符。我也不能对这些使用 AutoPageBreak 方法，因为 HTMLCell 似乎在我的标题中开始，以防自动分页（我通过 getY() 动态生成 Y 值）。所以我写了一个简单的分页符，它与 HTMLCells 的迭代一起工作得很好。现在的问题是我需要为一个 HTMLCell 设置分页符，该 HTMLCell 显示保存在网站上的电子邮件等消息。所以我需要在分页的情况下将 HTMLCell 拆分为 2，或者让它不要忽略我的标题。

我已经搜索了很多，但似乎没有找到答案。我看过 Nicola Asuni 的一篇文章，他写道它可以处理交易，但我不太明白它应该如何工作，或者我只是愚蠢。

提前致谢

# android - setOnItemClickListener 不起作用

> ID：11936914
> 
> 赞同：2
> 
> 时间：2012-08-13T14:57:38.350
> 
> 标签：android, onitemclicklistener

我有类似的[情况](https://stackoverflow.com/questions/2098558/listview-with-clickable-editable-widget/2098866#2098866)

我使用`setDescendantFocusability(FOCUS_BLOCK_DESCENDANTS)`and `setOnItemClickListener`，但它们不起作用。

这是我的来源：

```
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    setContentView(R.layout.database_table_list);

    LBD conection = new LBD(this);
    conection.open();
    setting = conection.tblSettings();
    setting.create();

    urlLists = setting.selectRssTable();
    urlListView = (ListView) findViewById(R.id.listView1);
    uAdapter = new UrlArrayAdapter(DatabaseTable.this, urlListView,
            urlLists);

    urlListView.setAdapter(uAdapter);
    urlListView.setDescendantFocusability(ViewGroup.FOCUS_BLOCK_DESCENDANTS);
    urlListView.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            ((BaseAdapter) uAdapter).notifyDataSetChanged();
        }
    });
} 
```

![在此处输入图像描述](../Images/e3b552664e9fc7dd6d673e4d3e8ca3c6.png)

所有活跃的元素。

[**帮助我访问此链接**](http://vikaskanani.wordpress.com/2011/07/27/android-focusable-edittext-inside-listview/)

# cocoa - 可可防止窗口激活

> ID：11936915
> 
> 赞同：0
> 
> 时间：2012-08-13T14:57:40.313
> 
> 标签：cocoa

是否可以防止 Cocoa 中的窗口被激活/聚焦？我正在研究 Qt，但需要实现他们的自定义 macEvent 函数，给我一个 EventRef 结构。有没有办法使用它来防止窗口在某些情况下变为活动状态？

谢谢！亚历克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T15:44:58.697

在可可中，您可以覆盖 NSWindow 方法`- (BOOL)canBecomeKeyWindow`

每次窗口应该成为键时都会调用它。

```
- (BOOL)canBecomeKeyWindow {
    return NO;
} 
```

# html - 下拉导航在选择后保持打开状态

> ID：11936917
> 
> 赞同：0
> 
> 时间：2012-08-13T14:57:55.790
> 
> 标签：html, css

我有一个子导航，我希望在单击它时保持打开状态。我有一个“ul li a.selected”，并应用了规则“#main_nav ul li a.selected > ul { display: block; }”。我在这里错在哪里？特别是在此页面上，“位置”下拉菜单应处于活动状态。它有类“class="first selected"”。

提前感谢您的帮助。

[http://cypresshh.cakuun.com/index.php?id=14](http://cypresshh.cakuun.com/index.php?id=14)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T15:11:18.077

您的子导航不是您选择的链接 (>) 的子导航，而是直接兄弟 (+)。你应该改用这个：

~~#main_nav ul li a.selected + ul { 显示：块；}~~

```
#main_nav li a.selected + ul { display: block; } 
```

# jquery - 功能之间的奇怪切换，我做错了什么？

> ID：11936920
> 
> 赞同：1
> 
> 时间：2012-08-13T14:58:02.203
> 
> 标签：jquery

我第一次点击，什么都没有。第二次，第一个警报触发两次。第三次，第二个警报触发两次，第一个触发一次。第四次，它变得更加奇怪。我想我使用 toggle() 错误，但我不明白怎么做。代码是

```
<button onclick="$(this).toggle(function(){alert(1)}, function(){alert(2)})">Play</button> 
```

小提琴：http: [//jsfiddle.net/2uRKD/](http://jsfiddle.net/2uRKD/)

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T15:06:48.263

Toggle 是一个 jquery 事件，它在替代点击之间切换，您不需要点击事件来绑定切换。

**[现场演示](http://jsfiddle.net/rajaadil/2uRKD/5/)**

```
$(function(){

  $('button').toggle(

    function() {
        alert(1);
    },

    function() {
        alert(2);
    });​
  }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T15:06:47.377

尝试这个：

html:

```
<button type="button">Play</button> 
```

Javascript：

```
<script>
​$(document).ready(function(){
   $("button").toggle(function(){alert(1)}, function(){alert(2)}) 
});​
</script> 
```

我没有解释:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T15:02:54.303

切换不用于在 2 个功能之间切换。这是隐藏和显示元素。

这是一个例子：

[http://jsfiddle.net/2uRKD/4/](http://jsfiddle.net/2uRKD/4/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T15:12:40.960

您使用的方法的形式是[切换事件](http://api.jquery.com/toggle-event/)。这实际上是绑定点击处理程序。因此，您所做的是每次单击时都将切换绑定到事件。我不想试图理解你在那里绑定的逻辑，我只想说这是错误的。:)

您想要做的是：

```
$('.ToggleButton').toggle(function(){alert(1)}, function(){alert(2)}) 
```

这应该放在您的 document.ready 或等效文件中。

# sql - 我的查询有什么问题吗

> ID：11936921
> 
> 赞同：0
> 
> 时间：2012-08-13T14:58:08.567
> 
> 标签：sql

我有一个简单的查询：

```
SELECT stco, sum(STSD) As "Shipped Dollars"
FROM MSTDW 
```

这表示选择列 stco 有问题。

但是，这两个字段都存在，并且：

```
SELECT stco
FROM MSTDW 
```

工作，这

```
SELECT sum(STSD) As "Shipped Dollars"
FROM MSTDW 
```

也可以。

两者兼有有什么问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T14:59:07.163

我想你想要这个，一组，得到每个的总和`stco`

```
SELECT stco, sum(STSD) As "Shipped Dollars"
FROM MSTDW 
group by stco 
```

对于应用聚合函数，您需要分组；无论如何，如果你只想要 ALL 列的总和（我不认为你想要那个，但我添加它以防万一）做

```
SELECT stco, (select sum(STSD) from MSTDW) As "Shipped Dollars"
    FROM MSTDW 
    group by stco 
```

这将列出每个`stco`，并重复`sum`所有列

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T14:59:21.043

为了使用聚合函数（例如`SUM`），您需要定义分组条件：

```
SELECT stco, sum(STSD) As "Shipped Dollars"
FROM MSTDW 
GROUP BY stco 
```

您的第二个查询没有工作的原因是因为该组在您要求`stco`的单个值中是隐式的（即无条件总和） 。`SUM`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T15:05:40.700

嗯，`stco`不是[聚合](http://msdn.microsoft.com/en-us/library/ms173454.aspx)的，所以你必须添加到`GROUP BY`

```
SELECT stco, SUM(STSD) AS "Shipped Dollars"
FROM MSTDW 
GROUP BY stco 
```

但是，您也可以应用聚合`stco`，如下所示：

```
SELECT AVG(stco) AS SomeValue, SUM(STSD) AS "Shipped Dollars"
FROM MSTDW 
```

通常，所有值都必须聚合或位于分组键部分中，这将分隔数据的聚合区域。

# apache - Apache 重写或代理

> ID：11936922
> 
> 赞同：4
> 
> 时间：2012-08-13T14:58:15.677
> 
> 标签：apache, mod-rewrite, plone, zope, mod-proxy

我的机器上运行着 Apache 服务器（端口 80） 我的机器上运行着 Zope 服务器（端口 8080）

我希望所有用户，无论域（现在让我们使用 www.example.com）无缝地推送到 zope 实例

IE 如果我在浏览器中输入 [http://www.example.com/mysite](http://www.example.com/mysite)

它将显示 [http://www.example.com:8080/mysite的效果](http://www.example.com:8080/mysite)

**但**

我希望 URL 仍然显示 [http://www.example.com/mysite](http://www.example.com/mysite)

（子）域应该是无关的，因为将有 2 或 3 个域指向同一服务器

我应该查看 mod_rewrite 或 mod_proxy 吗？

我有一半的 mod_rewrite 工作，但它改变了浏览器中的内容？

目前正在尝试

```
RewriteEngine on    
RewriteRule ^($|/.*) http://localhost:8080/$1 [P] 
```

但获得服务器 500

使用“http://localhost/mysite”连接

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T15:01:38.427

您可以使用`mod_rewrite`（`P`代理）规则或`mod_proxy`做您想做的事。使用`mod_rewrite`您的配置将如下所示：

```
RewriteRule ^/mysite/(.*) http://www.example.com:8080/mysite/$1 [P] 
```

使用`mod_proxy`，您的配置将如下所示：

```
<Location /mysite/>
  ProxyPass http://www.example.com:8080/
  ProxyPassReverse http://www.example.com:8080/
</Location> 
```

两者都完成了大致相同的事情。使用`Location`块 with`ProxyPass`可以轻松地将其他配置指令应用于前端服务器上的此路径。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T15:32:21.460

`VirtualHostMonster`Zope在路径中使用标志，通过一些特殊的重写来支持您的场景开箱即用。这确保了 Zope（以及扩展名为 Plone）生成的任何 URL 对于代理请求也是正确的。

您应该*同时* `mod_rewrite`使用and `mod_proxy`，它们将协同工作。

为了更轻松地创建正确的重写 URL，有人构建了一个出色的[RewriteRule Witch](http://betabug.ch/zope/witch/)。插入您的特定示例输出：

```
RewriteRule ^/mysite($|/.*) \
http://127.0.0.1:8080/VirtualHostBase/\
http/%{SERVER_NAME}:80/mysite/VirtualHostRoot/_vh_mysite$1 [L,P] 
```

因此，对于任何以 为根的 URL `http://www.example.com/mysite`，重写它们以从运行在 localhost 端口 8080 上的服务器提供服务，确保 Zope 生成具有相同根的 URL。

有关更多详细信息，请参阅Zope wiki[上有关 VirtualHostMonster 功能的详细文档。](http://wiki.zope.org/zope2/ZopeAndApache)

# c++ - 如何将 Windows SDK 添加到 Eclipse C 工具？

> ID：11936923
> 
> 赞同：1
> 
> 时间：2012-08-13T14:58:21.150
> 
> 标签：c++, windows, winapi, sdk, eclipse-cdt

我为 Java 开发人员使用 Eclipse Juno，我想向它添加 C/C++ 功能。我下载了 Windows SDK 并尝试创建 Hello World C++ 项目。但似乎 Eclipse 没有看到 Windows SDK，所以我无法编译我的项目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-05-23T15:41:46.740

Compile & build a C++ project with microsoft compiler is some chore work.But if you already installed some version of windows sdk, nearly a half of job done...

Well, I think you don't need to set up MS development environment, which is already in your path.

I can show you this process with eclipse neon version. I also assume you have eclipse cdt installed through the market place.

One thing you should do is installing the 'Visaul studio C++' setup.

Run eclipse, Open the "Install New Software..." on the help menu.

Type the url [http://download.eclipse.org/releases/neon](http://download.eclipse.org/releases/neon), if you don't have any name with available site on it. Then Ok, you see the all available list from the site.

[![enter image description here](../Images/83ce5fdce94cc50f08439453358df436.png)](https://i.stack.imgur.com/ze4Je.png)

And you check the check box name, C/C++ Visual C++ Support.

[![enter image description here](../Images/33f9beca754d5f3a537a3d9351ed049e.png)](https://i.stack.imgur.com/qEHKI.png)

Then, Make C++ project for yourself. Run and enjoy it

[![enter image description here](../Images/24c7b7dbdc8a0428589f3d1eda37cc7c.png)](https://i.stack.imgur.com/2iULZ.jpg)

I hope it is not a too late answer...

In case you don't have any environmental variables. you can have main variables you have to set your env.

Open the windown SDK shell on start menu. [![enter image description here](../Images/dfc73fbdf58477e307a5d6ae2f0c3bd9.png)](https://i.stack.imgur.com/7Odyq.png)

you can check that by running commands set lib, set include, set path in turn. [![enter image description here](../Images/d30be3e5792b12362566c8d3d343fd07.png)](https://i.stack.imgur.com/n9p8c.png)

# parsing - lex/yacc 简单 Q

> ID：11936925
> 
> 赞同：0
> 
> 时间：2012-08-13T14:58:29.093
> 
> 标签：parsing, yacc, lex

lex 和 yacc 可以用来制作编程语言吗？以及对某些书籍的任何推荐。

一些参考资料？

到目前为止，我发现了一些类似的东西：

[使用 lex 和 yacc 构建代码，第 1 部分：简介](http://www.ibm.com/developerworks/library/l-lexyac/index.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T15:43:23.897

是的，您当然可以使用 lex 和 yacc 为编程或脚本语言构建编译器/翻译器。这些工具有 GNU 变体，称为[flex](http://westes.github.io/flex/manual/)和[bison](http://www.gnu.org/software/bison/manual/html_node/index.html)。多年来，John Levine 的**lex & yacc一直是有关这些工具的书籍的黄金标准。**那本书可能已经绝版，但我希望后继书[Flex & Bison](https://rads.stackoverflow.com/amzn/click/com/0596155972)也一样好。要深入了解构建编译器，请从 Aho 等人的《[编译器：原理、技术和工具](https://rads.stackoverflow.com/amzn/click/com/0321486811)》，2/e 开始。（同样，我的建议是基于本书的第一版。）

# java - Java 编码风格

> ID：11936931
> 
> 赞同：0
> 
> 时间：2012-08-13T14:58:44.807
> 
> 标签：java

我已经用 Java 编程大约 3 到 4 年了......但经常得到的反馈是我没有有效地使用方法。我上面的人说好的编码人员确实将代码行保持在 25 行以内的方法中.但是我有多少努力或尝试实现更多方法......我一直在我的方法中编写更多代码行，比如 50 到 100 行。

关于我的编码风格是否错误或可以继续编码方式的任何建议。

我尝试过阅读《Effective java》、《Thinking in Java》等书籍……但是当涉及到实际代码时，我倾向于详细说明……

提高自己的建议对我很有帮助！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T15:03:23.380

这向我表明你的方法做得太多了。你应该从缩小他们的注意力开始，让他们做好一件事。

对于那些较长的方法，寻找机会将它们分解为可以调用的较小方法。密切注意重复的代码。当您发现自己正在剪切和粘贴时，您的脑海中应该会响起警钟：“这两个块之间有什么共同点？我可以将其重构为传递给方法的参数，我可以在这两个地方简单地调用它吗？ "

消除代码重复将使您实现 90% 的目标。

# c# - Unity 框架与 Activator.CreateInstance

> ID：11936937
> 
> 赞同：0
> 
> 时间：2012-08-13T14:58:58.290
> 
> 标签：c#, dependency-injection, unity-container

我希望做一些简单的事情，例如从配置文件中动态地实例化一个类，其中配置文件存储类型名称列表。我想知道我是否应该使用 Unity Framework 或者只是使用 Activator.CreateInstance。主要区别是什么？

我想做的样本：

```
LIST myList = Config.GetSection... blah blah

foreach(item in in mylist) {
   IPlugIn x = (IPlugIn)Activator.CreateInstance(item.myPlugInTypeFromConfig,myassembly);

   x.Start(); 
} 
```

就我而言，似乎我不需要 Unity 框架，只需激活器即可。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T17:05:32.987

根本区别在于 Unity（或任何 DI 容器）实际上可以管理您的依赖项。Activator.CreateInstance 只是创建实例。

如果你有一些类型有构造函数参数而一些没有呢？或者你想要设置的属性？容器将向下递归对象图并找出应该将哪些值放入那些构造函数参数或属性中。Activator.CreateInstance 不这样做。

容器管理对象的生命周期。如果对于某些类型，您总是希望类型 A 具有相同的实例，而 B 的每个类型都需要一个新实例，该怎么办？使用容器执行此操作很简单，您必须自己为 Activator.CreateInstance 执行此操作。

如果您所做的只是“从没有参数的配置文件中新建此类型列表”，那么您是对的，您不需要容器。一旦你超越了这一点，容器就会为桌子带来更多的力量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T15:04:28.563

如果您有许多要使用组件的类，您会想要使用 Unity。在这些情况下，依赖注入发生在构造函数时。

然而，恕我直言，它不是插件架构的存储库。在我看来，您正在做您需要做的事情（尽管您需要演员表和程序集名称），但有一个例外。插件架构通常使用 ConfigurationManager 来控制插件的加载。

有关此类架构的真正好文章，您可以阅读Dobbs 博士的[这篇文章](http://www.drdobbs.com/cpp/implementing-a-plug-in-architecture-in-c/184403942)。

# linux - 在 Redhat 上使用“nologin”shell 运行进程

> ID：11936942
> 
> 赞同：0
> 
> 时间：2012-08-13T14:59:12.093
> 
> 标签：linux, redhat

我阅读了一些 Tomcat 指南，以使用`nologin`shell 的用户身份运行 Tomcat，以防止该用户在 Tomcat 中存在安全漏洞时能够使用 shell。

我曾尝试以该用户身份使用 setuid`(-rws---r-x)`以及使用执行脚本，`su -s /bin/sh my_nologin_user myscript.sh`但我发现它能够执行类似`pwd` `ps -ef` `grep`.

显然我误解了这一点，但如果可以编辑 Tomcat 启动脚本以执行任何 shell 命令（如果被黑客入侵），我看不出使用 nologin 作为 shell 的意义何在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T15:04:11.793

nologin shell 可以防止这种情况：登录。任何系统登录服务——各种 ttys、sshd 等，都将拒绝访问，因为它们运行`login`可执行文件，并且失败。一旦不受信任的代码在该用户 ID 下运行，nologin shell 将不会阻止人们通过 shell 运行任意命令。

使用 nologin 作为 shell 的要点是，有人不能以相关用户的身份 ssh/telnet 进入您的系统——只要所述服务使用默认配置并`login`在（可能是伪的）tty 上运行。

# php - PHP登录脚本在特定计算机上的IE中不起作用

> ID：11936946
> 
> 赞同：3
> 
> 时间：2012-08-13T14:59:21.870
> 
> 标签：php, internet-explorer, session, login

我有一个令人困惑的问题。我正在为网站构建登录系统，并且仅在 IE 9 中的一个用户计算机上，登录脚本失败。我已经使用 Fiddler 检查是否正在发送正确的 POST 数据。我会更多地使用那台计算机，但我没有那个机会。

我知道正在发送正确的登录详细信息；当发送不正确的登录详细信息时，PHP 脚本会发出正确的错误，并且所有帐户的登录都失败。登录系统使用 PHP 会话。我对此完全感到困惑，从未见过这样的事情。

位于[gatewaymma.com](http://www.gatewaymma.com/)的站点我设置了一个没有任何特殊访问权限的测试帐户：

用户名：testAcc

密码：test22

**同样，这只发生在 IE 9 中，没有其他浏览器，并且只在一台机器上（win 7），所以我无法复制它，据我所知，收到了正确的 $_POST 数据。**

如果有人可以复制这一点或给出他们看到的可能导致这种情况的可能区域，将不胜感激。

我曾认为 cookie 安全性可能会导致问题，但在添加了对 cookie 的检查后，没有产生任何错误。

这是登录脚本的一部分：

```
 if(/* the password was correct, there is def no problem here*/){

                session_regenerate_id(true);

                $_SESSION['logged'] = true;
                /*set other session vars*/

                DB::query("UPDATE fa_logged_ips SET tries = 0, next_try = 0 WHERE ip = %s LIMIT 1", $_SESSION['ip']);

                DB::query("UPDATE fa_users SET last_login = $_SESSION[last_activity] WHERE ID = %s LIMIT 1", $_SESSION['uid']);
            }
        }
        //If the login was not successful (this error message is not fired, so I don't believe the session is being lost somewhere after this point
        if($_SESSION['logged'] !== TRUE){
            $fArray['loginErr'] = "The username and password combination you entered is not valid.";
            check_ip();
        } 
```

请注意，脚本的最后一部分检查用户是否已登录，这意味着会话已成功创建，但是当用户被重定向到主页时它会以某种方式丢失。

编辑：还有一件事，这个登录系统源自我在网站的另一部分（在子域上）启动的系统，该系统在同一台计算机上运行良好，并且在过去 5 个月内一直如此。

编辑：

```
if(!isset($_SESSION['logged'])){

formatSession();
setcookie('cookieTest', '1', time()+3600*24*30); //set a cookie that will be checked for later
$ip = $_SERVER['REMOTE_ADDR'];  //Get the user's ip address

//Check if the IP is logged in the system
$logged_ip = DB::queryFirstRow("SELECT * FROM fa_logged_ips WHERE ip = %s", $ip);

//if so
if(!empty($logged_ip)){

    //if ip has too many failed logins
    if ($logged_ip["tries"] < $login_attempt_limit) {   
        $_SESSION['next_try'] = $logged_ip["next_try"]; //store when their lockout ends
    }
    else {
        $_SESSION['next_try'] = 0; //otherwise they may try to log in at their discretion
    }

    $_SESSION['tries'] = intval($logged_ip["tries"]); //store how many login tries the ip has
}               
}

The session format funciton

 function formatSession(){
global $sysEnable;

$_SESSION['logged'] = false;        //The user is not logged in
$_SESSION['sysEnable'] = $sysEnable;//Store wether or not the system is accessible
} 
```

**编辑**

我强烈认为这与 IE 中的某种安全设置有关，因为我只看到它发生在一台计算机上，并且无法在任何其他计算机上复制它。另外我可以通过打开cookie安全来产生类似的效果，但是如前所述，cookie检查在计算机上是成功的

**编辑 9/1**

我认为 IE 可能无法维持会话；IE 没有保存会话 ID。同样，我无法复制这种行为，所以在我可以使用那台计算机之前不能100％肯定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T15:21:00.567

哦，我最近偶然发现了这个！我简直不敢相信自己的眼睛会发生这种情况——因为发布的数据是正确传递的！我已经建立了精确的登录脚本，只有在 IE 中我遇到了同样的问题！

我所拥有的是，当您在登录后按 Enter 并在字段中输入密码时，并且在所有其他浏览器中登录都正常时，在 IE 中我只是刷新了页面。但是，如果我单击密码字段下的登录按钮，那么一切都会好起来的！

对此没有合乎逻辑的解释，现在我必须说这只是 IE 未被注意到的错误！

我所做的是检测到用户浏览器，如果是 IE，我取消了输入键并强制用户单击登录按钮。

这是我解决这个疯狂问题的代码：

```
function browserIE(){
 if($.browser.msie){ 
     return true;
 }
 return false;
}

$(document).keypress(function(event) {
        var keycode = (event.keyCode ? event.keyCode : event.which);
        if (keycode == '13' && browserIE()){
            event.preventDefault();
            event.stopPropagation();
        }
}); 
```

这是迫使 IE 用户单击 singin 按钮以进行正确登录的唯一方法，因为正如我在按 Enter 之前所说的那样，在我的情况下也失败了！

## 编辑：

## 另一个解决方案 1

另一个解决方案可能是，但在我的情况下它不起作用是添加额外的隐藏输入字段：

```
<!-- Fix for Internet Explorer bug (One text input and submit, disables submit on pressing "Enter") -->
  <div style="display:none">
    <input type="text" name="hiddenText"/>
  </div> 
```

## 另一个解决方案 2

Internet Explorer 似乎在加载时扫描页面并确定哪些提交按钮是可见的，然后将输入提交功能附加到这些表单。

要解决此问题，您可以使用以下 jQuery 代码：

```
$(document).ready(function() {
   $('input').keydown(function(e){
     if (e.keyCode == 13) {
        $(this).parents('form').submit();
        return false;
     }
   });
}); 
```

return false 在 Internet Explorer 中相当重要，因为它可以防止您在点击 return 时听到的哔哔声。哔声是说“你不能在这里输入！”，但返回 false 会取消按键，因此浏览器不会发出警告。

阅读有关此内容的更多信息以及人们的评论：[使用 Enter 在 IE 中提交表单](http://www.thefutureoftheweb.com/blog/submit-a-form-in-ie-with-enter)

另推荐阅读：[Internet Explorer 及更高版本中的按钮与 Input[type="submit"]](http://ajaxian.com/archives/button-versus-inputtypesubmit-in-ie-and-beyond)

# javascript - 使用 ping 来确定使用 Javascript 的 IF 语句？

> ID：11936949
> 
> 赞同：0
> 
> 时间：2012-08-13T14:59:27.833
> 
> 标签：javascript, ajax, if-statement, ip, ping

我在这些论坛的第一篇文章 :)

这适用于移动浏览器（在这种情况下为 android）。在我知道要使用哪个功能之前，我需要检查计算机是否打开。

有没有办法可以 ping 它以确定它的网络存在并运行相应的功能？现在，我只有要测试的消息。（navigator.notification.alert 是用于在移动设备上显示消息的 Cordova 方法）

我已经编写了这段代码，有什么办法可以让它工作，我做了一些谷歌搜索无济于事。

请注意，这是在本地网络上工作的。

```
function isOn() {
    $.ajax({
        url : 'http://192.168.x.xxx' ,              //x.xxx being the client ip
        success : function () {
            navigator.notification.alert(
        'The computer is on.',              //Message body
        alertDismissed,                 //Callback
        'The Computer is On',               //Title
        'Yes'                       //Button Label
        );
        },
        error : function () {
            navigator.notification.alert(
            'The computer is off.',         //Message body
            alertDismissed,             //Callback
            'The Computer is Off',          //Title
            'Yes'                   //Button Label
            );
        }
    });
};

<a onclick="isOn();">Test</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T15:10:38.840

url 不能只是一个 IP。您必须索取文件。如果您的客户端没有可用的 Web 服务器，您将收到错误消息。

因此，如果要 ping 计算机，则必须调用服务器端脚本：

```
$.post('http://myserver.com/ping.php', {'ip': '111.222.123.123'}, function(data){
  // your code
}); 
```

在服务器端，您可以使用以下内容： http:
[//www.codediesel.com/php/ping-a-server-using-php/](http://www.codediesel.com/php/ping-a-server-using-php/) ping 客户端，然后返回 JSON 编码的结果。

# php - 将 UTF-8 编码的字符串插入 UTF-8 编码的 mysql 表失败 ，并显示“字符串值不正确”

> ID：11936950
> 
> 赞同：14
> 
> 时间：2012-08-13T14:59:28.743
> 
> 标签：php, mysql, drupal

将 UTF-8 编码字符串插入 UTF-8 编码表会给出不正确的字符串值。

> PDOException：SQLSTATE [HY000]：一般错误：1366 不正确的字符串值：'\xF0\x9D\x84\x8E i...' 列 'body_value' 在第 1 行：INSERT INTO

我有一个`字符，在[mb_detect_encoding](http://php.net/manual/en/function.mb-detect-encoding.php)声称是 UTF-8 编码的字符串中。我尝试将此字符串插入到 MySQL 表中，该表定义为（除其他外）`DEFAULT CHARSET=utf8``

 `**编辑：** Drupal 总是`SET NAMES utf8`使用可选的`COLLATE`（至少在与 MySQL 交谈时）。

**编辑 2：**一些似乎相关的更多细节。我从 PostgreSQL 数据库中获取一些文本。我将它粘贴到一个对象上，使用 mb_detect_encoding 来验证它是 UTF-8，然后使用[node_save](http://api.drupal.org/api/drupal/modules!node!node.module/function/node_save/7)将对象保存到数据库中。因此，虽然有触发导入的 HTTP 请求，但数据并非来自浏览器。

**编辑 3：**数据在两个表上非规范化：

> 从信息架构中选择字符集名称。`COLUMNS`C WHERE table_schema = "[database]" AND table_name IN ("field_data_body", "field_revision_body") AND column_name = "body_value";

```
>+--------------------+
| character_set_name |
+--------------------+
| utf8               |
| utf8               |
+--------------------+ 
```

**编辑4：**这个角色有可能是“新人”吗？我对[unicode 和 UTF-8 之间的关系](https://stackoverflow.com/questions/643694/utf-8-vs-unicode)有点模糊，但是这篇[维基百科文章](http://en.wikipedia.org/wiki/List_of_Unicode_characters#Musical_symbols)暗示该字符是最近才标准化的。

我不明白“字符串值不正确”怎么会失败。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-14T08:29:30.057

(U+1D10E) 是在 BMP（基本多语言平面）（在 U+FFFF 之上）之外发现的字符 Unicode，因此不能以 UTF-8 的 3 个字节表示。MySQL charset utf8 仅接受 UTF-8 字符，如果它们可以用 3 个字节表示。如果您需要将其存储在 MySQL 中，则需要使用 MySQL charset utf8mb4。您需要 MySQL 5.5.3 或更高版本。您可以使用 ALTER TABLE 更改字符集，没有太大问题；由于它需要更多空间来存储字符，因此出现了一些可能需要您减小字符串大小的问题。请参阅[http://dev.mysql.com/doc/refman/5.5/en/charset-unicode-upgrading.html](http://dev.mysql.com/doc/refman/5.5/en/charset-unicode-upgrading.html)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-03-29T02:54:32.317

要解决此问题，首先将数据库字段更改为 utf8m4b 字符集。例如：

```
ALTER TABLE `tb_name` CHANGE `field_name` `field_name` VARCHAR(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL; 
```

然后在您的数据库连接中，将 driver_options 设置为 utf8mb4。例如，如果您使用 PDO

```
$db = new PDO('mysql:host=localhost;dbname=testdb;charset=utf8mb4', 'username', 'password'); 
```

或在 zend 框架 1.2 中

```
$dbParam = array('host' => 'localhost', 'username' => 'db_user_name',
            'password' => 'password', 'dbname' => 'db_name',
            'driver_options' => array(
                '1002' => "SET NAMES 'utf8mb4'",
                '12'    => 0 //this is not necessary
            )
        ); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-13T15:08:38.853

在您的 PDO 连接中，设置字符集。

```
new PDO('mysql:host=localhost;dbname=the_db;charset=utf8mb4', $user, $password); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-08-28T04:22:22.927

我修复了错误：SQLSTATE[HY000]: General error: 1366 Incorrect string value ...... 用这个方法：

我为数据库使用 utf8mb4_unicode_ci [![数据库](../Images/6c7488a2f6f3c116997f432d269a4999.png)](https://i.stack.imgur.com/I3NF0.png) 为所有表设置 utf8mb4_unicode_ci [![表](../Images/ad3fbef61cc77cc979c08df897aac4c1.png)](https://i.stack.imgur.com/nfJRU.png)

**为列设置长博客数据类型**（不是文本，长文本......您需要大数据类型来存储 4 个字节的内容） [![字段](../Images/3b14d75bd34a1b13f7dcc2e52c85a428.png)](https://i.stack.imgur.com/Lu7dY.png)

现在好了。如果你使用 laravel，继续编辑 config/database.php

```
'charset' => 'utf8mb4',
'collation' => 'utf8mb4_unicode_ci', 
```

[![拉拉维尔](../Images/6bc0dba9f4434a1b4df84ceb44175cc3.png)](https://i.stack.imgur.com/m110o.png)

如果您使用函数 strtolower，请将其替换为 mb_strtolower 注意：您必须戴上`<meta charset="utf-8">`head 标签`

# c++ - 处理来自 std::clock() 的时钟溢出

> ID：11936951
> 
> 赞同：0
> 
> 时间：2012-08-13T14:59:29.860
> 
> 标签：c++, ctime

关于`clock()`from生成的时钟滴答计数的问题`<ctime>`。[（其他问题](https://stackoverflow.com/questions/3220477/how-to-use-clock-in-c)`clock()`中涵盖了的用法）

在我的系统`clock_t`上是一个别名，`long`根据我的编译器，它的最大值`<climits>`是 2147483647。

```
clock_t delay = clock_t(10) * CLOCKS_PER_SEC;
clock_t start = clock();
while(clock() - start < delay); //Note Semi-colon here makes this null statement
std::cout << clock(); 
```

运行这个我得到大约 10060。这与 d（对于我的系统）为 1000 是一致`CLOCKS_PER_SEC`的`#define`。

因此，如果有 1000`CLOCKS_PER_SEC`则 2147483647 / 1000 = 2147483.647 秒，大约需要 24-25 天。

我不确定它是否实际上是由 C++ 定义的行为，但我注意到超出`long`限制的常见行为是换行到负端。

例如，

```
long m = long(2147483647);
std::cout << ++m << std::endl; 
```

将输出：-2147483648

所以假设程序在初始化之前已经运行了很长时间`start`，并且`start`恰好被初始化为 2147483647（最大可能`long`值）。

在这一点上，我假设我们将开始包装返回的值，`clock()`以便在我们再次接近 2147483647 时获取诸如 -2147482649 之类的值。所以现在我的原始代码可能需要很长时间才能完成循环，比预期的延迟要长得多。

是实际行为吗？这种风格的暂停应该只用于小于一定数量的延迟吗？是否应该进行其他检查以使其“安全”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T15:08:10.320

当您溢出有符号整数类型时会发生什么是实现定义的，并且可能是一个信号。是的，这意味着它`clock()`只能在您的流程开始后的固定时间内使用，并且可能只有在实现确保第一次调用将始终返回 0 时（我知道的所有实现都是这种情况）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T15:28:05.803

使用：GetTickCount64();
[http://msdn.microsoft.com/en-us/library/windows/desktop/ms724411(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724411(v=vs.85).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T15:06:40.123

如果`clock_t`被定义为有符号类型，那么是的，这是预期的行为。

如果您担心环绕，您总是可以将`clock_t`值转换为 a `unsigned long`（这意味着您假设它`clock_t`不比 a 宽`long`），然后存储/比较该值。

# r - 在 R 中使用多个输入更改 data.frame 列名称

> ID：11936953
> 
> 赞同：-1
> 
> 时间：2012-08-13T14:59:35.837
> 
> 标签：r, dataframe

我希望更改用户输入的每个文件中一个特定列或所有列的名称。到目前为止，我已经尝试过：

```
File.names<-(tk_choose.files(default="", caption="Files", multi=TRUE, filters=NULL, index=1))
Num.Files<-NROW(File.names)
test<-sapply(1:Num.Files,function(x){readLines(File.names[x])})
data<-lapply(1:Num.Files, function(x){data<-read.table(header=TRUE, text=test)})
new.names<-names(data)
new.names[[14]]<-'column14'
names(data) <- new.names 
```

但我得到：

```
Error in names(data) <- new.names : 
  'names' attribute [14] must be the same length as the vector [1]
Execution halted 
```

原始列名如下：

```
Targ  cov  av_cov  87A_cvg  87Ag  87Agr  87Agr  87A_gra  87A%_1   87A%_3   87A%_5   87A%_10  87A%_20  87A%_30 87A%_40   87A%_50 87A%_75 87A%_100 
```

有没有人对如何以这种方式更改多个文件的列名有任何建议？谢谢，斯蒂芬

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T16:10:35.383

```
File.names<-(tk_choose.files(default="", caption="Choose your files", multi=TRUE, filters=NULL, index=1))
Num.Files<-NROW(File.names)
# read the files into a dummy variable
test<-sapply(1:Num.Files,function(x){readLines(File.names[x])})
# manipulate the first file
data<-read.table(header=T,text=test[1])
names(data)[14]<-'column14' 
```

`tk_choose.files`允许您选择文件。它将这些文件名存储在字符向量中。然后，您需要将数据读入 R。为了简单起见，我刚刚`readLines`从适当的文件中存储了所有数据。您可以使用类似`read.tables`或`read.csv`直接的东西。

# javascript - AngularJS——创建自定义数据绑定和 ng-repeat

> ID：11936955
> 
> 赞同：0
> 
> 时间：2012-08-13T14:59:43.670
> 
> 标签：javascript, jquery, angularjs

我正在尝试创建一个自定义控制器，该控制器显示一堆绑定到数据集的类似对象，如下所示：

```
[{name: card1, values: {opt1: 9, opt2: 10}},{name: card1, values: {opt1: 9, opt2: 10}}] 
```

我想显示每张卡片的名称和其中一个值（在屏幕上表示为每个卡片的正方形），根据用户是单击选项 1 还是选项 2 的按钮，只显示一个值。我被困在如何更改使用 ng-repeat 时显示的值。

html代码：

```
<div ng-controller="aggViewport" >
<div class="btn-group">
    <button class="btn active">opt1</button>
    <button class="btn">opt2</button>
</div>
<div id="container" iso-grid width="500px" height="500px">
    <div ng-repeat="card in cards" class="item {{card.class}}">
        <table width="100%">
            <tr>
                <td align="center">
                    <h4>{{card.name}}</h4>
                </td>
            </tr>
            <tr>
                <td align="center"><h2>{{card.opt1}}</h2></td>
            </tr>
        </table>        
    </div>
</div> 
```

控制器：

```
module.controller('aggViewport',['$scope','$location',function($scope,$location){
$scope.cards = [{name: card1, values: {opt1: 9, opt2: 10}},{name: card1, values: {opt1: 9, opt2: 10}}];

}]); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T15:41:45.533

这是您的问题的可能解决方案

```
<div ng-controller="aggViewport" >
<div class="btn-group" >
    <button ng-click="setOption(opt.name)" ng-repeat="opt in optList" class="btn active">{{opt.name}}</button>
</div>
<div id="container" iso-grid width="500px" height="500px">
    <div ng-repeat="card in cards" class="item {{card.class}}" ng-controller="aggCardController">
        <table width="100%">
            <tr>
                <td align="center">
                    <h4>{{card.name}}</h4>
                </td>
            </tr>
            <tr>
                <td align="center"><h2>{{getOption()}}</h2></td>
            </tr>
        </table>        
    </div>
</div> 
```

在你的控制器中：

```
module.controller('aggViewport',['$scope','$location',function($scope,$location){
$scope.cards = [{name: card1, values: {opt1: 9, opt2: 10}},{name: card1, values: {opt1: 9, opt2: 10}}];

$scope.option = "opt1";

$scope.setOption = function(val){
$scope.option = val;
}

}]);

module.controller('aggCardController',['$scope',function($scope){

$scope.getOption = function(){
return $scope.card.values[$scope.option];
}

}]); 
```

只是为了解释这里发生了什么。aggCardController 是单独定义的，因为当您使用 ng-repeat 时会创建一个新范围。此外，当您引入具有 ng-repeat 的控制器时，您将创建将控制该范围的控制器。所以现在您可以单独访问每个范围。并且将为每个创建的范围创建一个新控制器。由于在 html 中，aggCardController 位于 aggViewPort 内部，它将继承父范围的属性。因此，如果您在 aggViewPort 中声明*选项*，它将被继承到所有子范围中。

之所以在这里引入这个新的控制器，就是因为这个说法

```
return $scope.card.values[$scope.option]; 
```

因为我们试图在这里访问 $scope.card 并记住 card 是在转发器中创建的一个新变量。此新变量仅在中继器创建的子范围内可用。如果您不需要访问 $scope.card，那么我们也可以在父作用域中编写这个 getOption() 函数。

另请注意，javascript 中的所有对象都是关联数组。这就是我们使用数组访问运算符 [] 访问 opt1 或 opt2 中的值的原因。

希望这可以帮助。

# selenium - webshaper 元素 id

> ID：11936956
> 
> 赞同：2
> 
> 时间：2012-08-13T14:59:56.230
> 
> 标签：selenium, f#, websharper

我们计划将 WebSharper 用于我们的 Web 界面。问题是我们的集成测试是基于 selenium 的，并且使用页面元素的 id 来点击和填充数据。
出于这个原因，我们需要能够为页面中的所有相关元素指定 id。

对于非表单元素，我们可以这样做： A [HRef (ctx.Link Home)] -< [Text "Home" ] -< [Id "home"]

我们如何为 formlet 中的输入字段做到这一点？

谢谢

更新：最后我们决定不使用 websharper formlets。原因之一是我们无法为表单元素分配 ID，因此我们的测试方法不再有效。另一个原因是基于表格的布局不适合我们的设计。我们仍将使用 websharper 但没有 formlets 库

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T11:22:40.450

为什么您明确需要使用 id 进行硒测试？我确信你知道这一点，但我会放链接 [http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/By.html](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/By.html)。

从我的 xp 中，xpath 比 id 更可靠，而且我看到了很多相同 id 的页面（尽管我抓取了野生网络而不是内部应用程序 :-)）

# objective-c - 如何从 NSOperation 获取对 NSOperationQueue 的引用？

> ID：11936958
> 
> 赞同：2
> 
> 时间：2012-08-13T15:00:00.793
> 
> 标签：objective-c, ios, nsoperation, nsoperationqueue

有没有办法从同一个 nsoperation 中获取 nsoperation 所在的“父”操作队列？类似 [self getCurrentOperationQueue] 的东西。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-13T15:04:22.993

[`+[NSOperationQueue currentQueue]`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/NSOperationQueue_class/Reference/Reference.html#//apple_ref/occ/clm/NSOperationQueue/currentQueue)您可以通过从正在运行的操作中调用适当命名的来获取当前队列。

> **currentQueue**
> 返回启动当前操作的操作队列。
> 
> *+ (id)currentQueue*
> 
> **返回值**
> 开始操作的操作队列，如果无法确定队列，则返回 nil。
> 
> **讨论**
> 您可以在正在运行的操作对象中使用此方法来获取对启动它的操作队列的引用。从正在运行的操作的上下文之外调用此方法通常会导致返回 nil。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T15:05:30.390

[[NSOperationQueue 当前队列]](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/NSOperationQueue_class/Reference/Reference.html#//apple_ref/doc/uid/TP40004592-RH2-SW20)

# c# - 使用 Lightswitch、Silverlight 和自定义控件

> ID：11936961
> 
> 赞同：6
> 
> 时间：2012-08-13T15:00:12.543
> 
> 标签：c#, silverlight, visual-studio-lightswitch

我有一个带有一些数据的屏幕。在屏幕内部，我有两个自定义控件（在左侧和右侧）。

我需要做的是以下几点：

将数据库中的一些数据绑定到第一个自定义控件中的一些控件。（填写列表、组合框等，问题不大）

然后用户可以在列表中选择一个条目，按下一个按钮 -> 现在应该使第二个 CustomControl 可见；根据选择从数据库请求一些数据并动态创建和显示图表。

所以我知道如何构建图表和构建控件。但是如何通过代码从屏幕访问数据并从第一个 CustomControl 中访问另一个 CustomControl？

**编辑：**

我发现的事情。

1.  从屏幕访问控制

    `this.FindControl("yourControl");`

2.  用控件做一些事情：

    `this.FindControl("yourControl").ControlAvailable += ( (o,e) => { YourControlType myControl = e.Control as YourControlType; });`

3.  访问屏幕数据

    ```
     IContentItem dataContext = this.DataContext as IContentItem;
        IScreenObject screen = dataContext.Screen;

        IScreenProperty prop = screen.Details.Properties["yourProperty"];

        VisualCollection<yourProperty> items = prop.Value as  VisualCollection<yourProperty>; 
    ```

4.  显示新画面

    `Application.Current.Details.Dispatcher.BeginInvoke(() => Application.Current.ShowGraphScreen(reportItem.BlockID));`

也许这会对某人有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T12:03:58.987

在您希望从中获取数据的数据库中的集合上创建一个带有参数的过滤器查询。将此查询添加到屏幕并将 Parameter Binding 设置为`FirstCustomControl`。

将查询拖到屏幕树上，将其更改为图表，然后按照 Yann 的链接检查绑定。

然后，您需要类似于以下的代码来显示/隐藏控件：

```
partial void ScreenName_InitializeDataWorkspace(List<IDataService> saveChangesTo)
{
    this.FindControl("SecondCustomControl").IsVisible = False;
}

partial void ButtonName_Execute()
{
    this.FindControl("SecondCustomControl").IsVisible = True;
} 
```

由于`SecondCustomControl`（我假设这是图表）绑定到查询并且查询的参数绑定到中选择的值`FirstCustomControl`，因此数据收集全部在后台完成。

# python - 使用 Python 解析文本文件

> ID：11936967
> 
> 赞同：18
> 
> 时间：2012-08-13T15:00:20.733
> 
> 标签：python, parsing, text, file-io, python-2.7

我正在尝试解析一系列文本文件并使用 Python (2.7.3) 将它们保存为 CSV 文件。所有文本文件都有一个 4 行长的标题，需要去掉。数据行有各种分隔符，包括 "（引号）、-（破折号）、: 列和空格。我发现在 C++ 中使用所有这些不同的分隔符对其进行编码很痛苦，所以我决定在 Python 中尝试一下与 C/C++ 相比，做起来相对容易。

我写了一段代码来测试它的单行数据，它可以工作，但是，我无法让它对实际文件工作。为了解析单行，我使用了文本对象和“替换”方法。看起来我当前的实现将文本文件作为列表读取，并且列表对象没有替换方法。

作为 Python 的新手，我被困在了这一点上。任何输入将不胜感激！

谢谢！

```
# function for parsing the data
def data_parser(text, dic):
for i, j in dic.iteritems():
    text = text.replace(i,j)
return text

# open input/output files

inputfile = open('test.dat')
outputfile = open('test.csv', 'w')

my_text = inputfile.readlines()[4:] #reads to whole text file, skipping first 4 lines

# sample text string, just for demonstration to let you know how the data looks like
# my_text = '"2012-06-23 03:09:13.23",4323584,-1.911224,-0.4657288,-0.1166382,-0.24823,0.256485,"NAN",-0.3489428,-0.130449,-0.2440527,-0.2942413,0.04944348,0.4337797,-1.105218,-1.201882,-0.5962594,-0.586636'

# dictionary definition 0-, 1- etc. are there to parse the date block delimited with dashes, and make sure the negative numbers are not effected
reps = {'"NAN"':'NAN', '"':'', '0-':'0,','1-':'1,','2-':'2,','3-':'3,','4-':'4,','5-':'5,','6-':'6,','7-':'7,','8-':'8,','9-':'9,', ' ':',', ':':',' }

txt = data_parser(my_text, reps)
outputfile.writelines(txt)

inputfile.close()
outputfile.close() 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-13T15:03:49.850

我会使用`for`循环来遍历文本文件中的行：

```
for line in my_text:
    outputfile.writelines(data_parser(line, reps)) 
```

如果您想逐行读取文件而不是在脚本开头加载整个内容，您可以执行以下操作：

```
inputfile = open('test.dat')
outputfile = open('test.csv', 'w')

# sample text string, just for demonstration to let you know how the data looks like
# my_text = '"2012-06-23 03:09:13.23",4323584,-1.911224,-0.4657288,-0.1166382,-0.24823,0.256485,"NAN",-0.3489428,-0.130449,-0.2440527,-0.2942413,0.04944348,0.4337797,-1.105218,-1.201882,-0.5962594,-0.586636'

# dictionary definition 0-, 1- etc. are there to parse the date block delimited with dashes, and make sure the negative numbers are not effected
reps = {'"NAN"':'NAN', '"':'', '0-':'0,','1-':'1,','2-':'2,','3-':'3,','4-':'4,','5-':'5,','6-':'6,','7-':'7,','8-':'8,','9-':'9,', ' ':',', ':':',' }

for i in range(4): inputfile.next() # skip first four lines
for line in inputfile:
    outputfile.writelines(data_parser(line, reps))

inputfile.close()
outputfile.close() 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-13T15:24:40.987

从接受的答案看来，您想要的行为是转身

```
skip 0
skip 1
skip 2
skip 3
"2012-06-23 03:09:13.23",4323584,-1.911224,-0.4657288,-0.1166382,-0.24823,0.256485,"NAN",-0.3489428,-0.130449,-0.2440527,-0.2942413,0.04944348,0.4337797,-1.105218,-1.201882,-0.5962594,-0.586636 
```

进入

```
2012,06,23,03,09,13.23,4323584,-1.911224,-0.4657288,-0.1166382,-0.24823,0.256485,NAN,-0.3489428,-0.130449,-0.2440527,-0.2942413,0.04944348,0.4337797,-1.105218,-1.201882,-0.5962594,-0.586636 
```

如果那是正确的，那么我认为类似

```
import csv

with open("test.dat", "rb") as infile, open("test.csv", "wb") as outfile:
    reader = csv.reader(infile)
    writer = csv.writer(outfile, quoting=False)
    for i, line in enumerate(reader):
        if i < 4: continue
        date = line[0].split()
        day = date[0].split('-')
        time = date[1].split(':')
        newline = day + time + line[1:]
        writer.writerow(newline) 
```

会比`reps`东西简单一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-13T15:11:08.527

有几种方法可以解决这个问题。一种选择是使用`inputfile.read()`而不是`inputfile.readlines()`- 您需要编写单独的代码来去除前四行，但如果您希望最终输出为单个字符串，这可能是最有意义的。

第二个更简单的选择是在用 . 分割前四行后重新加入字符串`my_text = ''.join(my_text)`。这有点低效，但如果速度不是主要问题，代码将是最简单的。

最后，如果您确实希望将输出作为字符串列表而不是单个字符串，则只需修改数据解析器以遍历列表即可。这可能看起来像这样：

```
def data_parser(lines, dic):
    for i, j in dic.iteritems():
        for (k, line) in enumerate(lines):
            lines[k] = line.replace(i, j)
    return lines 
```

# stored-procedures - 如何在 SQL Server 2008 R2 中循环调用存储过程？

> ID：11936970
> 
> 赞同：2
> 
> 时间：2012-08-13T15:00:29.640
> 
> 标签：stored-procedures, sql-server-2008-r2

我需要多次调用存储过程。我怎样才能把它放在一个循环中？

```
DECLARE @return_value int,
                @sinresultado varchar(200),
                @svcmensaje varchar(200)

EXEC    @return_value = [dbo].[ppocfdcancelacionwsejecuta]
                @evcrfcemisor = N'BBA940707IE1',
                @evcserie = N'XXAABB',
                @evcfolio = N'666',
                @sinresultado = @sinresultado OUTPUT,
                @svcmensaje = @svcmensaje OUTPUT 
```

我需要`@evcfolio`在同一个循环中从 1 运行到 10。就像java中的for和`evcfolio`每个循环的值增加1。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T15:04:26.990

```
Declare @Counter int;
Declare @CounterText nvarchar(10);
Declare @return_value int,
                @sinresultado varchar(200),
                @svcmensaje varchar(200);
Set @Counter = 666;

While @Counter < 676
Begin
    Set @CounterText = Cast( @Counter As nvarchar(10));
    exec @return_value = [dbo].[ppocfdcancelacionwsejecuta]
                    @evcrfcemisor = N'BBA940707IE1',
                    @evcserie = N'XXAABB',
                    @evcfolio = @CounterText,
                    @sinresultado = @sinresultado OUTPUT,
                    @svcmensaje = @svcmensaje OUTPUT
    Set @Counter = @Counter + 1;
End 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T15:04:21.317

虽然我同意重组存储过程并让它处理循环（或 TVP 中的一个集合）而不是多次调用该过程是一种更好的方法，但与此同时，任何语言的循环都相当简单，你可以这样做像这样的东西：

```
DECLARE @i INT;
SET @i = 666;

WHILE @i <= 675
BEGIN
    EXEC ... @evcfolio = @i ...;
    SET @i += 1;
END 
```

# mysql - Mysql 错误 2008 客户端内存不足

> ID：11936973
> 
> 赞同：2
> 
> 时间：2012-08-13T15:00:47.490
> 
> 标签：mysql, memory, mysql-workbench

我在具有 16GB 内存的 Windows 7 64 位上运行 MySQL Server 5.5.20。当我在 Workbench 的 5m 记录表上执行 select * 时，我得到错误代码 2008 Client of Memory。我无法查看我的整个表格以便将其导出。ODBC 连接给我同样的内存不足错误。是否有一组变量可以更改以阻止这种情况？

我尝试了很多不同的东西，是的，返回此表中的所有字段和所有记录对我来说很重要。有没有人有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T15:47:54.967

使用 --quick 选项，这将强制 mysql 一次从服务器 1 行检索结果，而不是将其作为必须缓冲在内存中的整个集合返回。这可能需要更长的时间，但至少它会运行。

```
select * from table quick 
```

# css - CSS - 如何绘制多色线？

> ID：11936982
> 
> 赞同：1
> 
> 时间：2012-08-13T15:01:17.707
> 
> 标签：css

我有一个导航栏，对于一个特定的元素，我希望使用 5 种颜色为线条着色，而不是默认的白色下划线，并且想知道这是否可能？

结构如下：

**HTML**

```
<div id="underlinemenu" class="clearfix">
    <ul>
        <li class="page_item page-item-67">
            <a href="#">Home</a>
        </li>
        <li class="page_item page-item-69 current_page_item">
            <a href="#">The Blogs</a>
        </li>
        <li class="page_item page-item-60">
             <a href="#">Meet the Bloggers</a>
        </li>
        <li class="page_item page-item-2">
            <a href="#">Gallery</a>
        </li>
    </ul>
</div>​ 
```

**CSS**

```
#underlinemenu{
    padding:0;
    margin:0;
    padding-bottom: 30px;
    font-size: 14px;
}

#underlinemenu ul{
    float: left;
    font-weight: bold;
    width: 770px;
    height: 57px;
    background-color: #242129;
    margin: -14px 0 -30px 0;
}

#underlinemenu ul li{
    display: inline;
    float: left;
    color: #ffffff;
    padding: 21px 40px 0px 8px; 
}

#underlinemenu ul li a{
    color: #fff;
    font-weight: bold;
    text-decoration: none;
    padding: 5px;
}

#underlinemenu ul li a:hover{
    color: #ffffff;
    padding-bottom: 16px;
    border-bottom: 3px solid #ffffff;
}

.current_page_item {
    color: #ffffff;
    padding: 21px 10px 16px 5px !important;
    margin: 0 30px 0 3px;
    border-bottom: 3px solid #ffffff;
} 
```

​</p>

**小提琴**

[http://jsfiddle.net/SMrYF/](http://jsfiddle.net/SMrYF/)

**颜色代码**

```
#a3ad24
#4594cc
#c4262e
#d9709c
#ffa100 
```

任何帮助深表感谢。

**更新**

样机可以在这里找到：http: [//img59.imageshack.us/img59/2866/navbarf.jpg](http://img59.imageshack.us/img59/2866/navbarf.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T15:07:34.673

-剪掉之前的答案-

好的，所以我想出了一个替代解决方案。我使用了五个位于每个底部的 div，`li`宽度为 20%。看起来像一个丑陋的解决方案，但是，嘿，它的工作原理！

[http://jsfiddle.net/VdMPL/6/](http://jsfiddle.net/VdMPL/6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T15:40:31.967

几个选项

*   添加背景图像而不是底部边框（使用静态图像文件）。
*   为背景图像添加线性渐变（IE9 及更早版本不支持）。
*   使用`border-image`样式（IE9 及更早版本不支持）。

如果超链接不是固定宽度，您可以设置`background-size`（IE9 及更早版本不支持），或为每个超链接添加一个 img 标签（静态，或使用 JS 或 jQuery）并将其缩放为 100% 宽度和固定高度。

使用线性渐变将涉及定义 10 个渐变点（每种颜色 2 个）（假设可以指定超过 2 个渐变点）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T16:45:59.450

## 纯 CSS2 选项

利用伪元素。添加`position: relative;`到`.current_page_item`（或者`li`如果您打算将其用于悬停）。然后...

**新答案（解决 IE 错误）**

添加以下代码会产生在[此小提琴](http://jsfiddle.net/SMrYF/8/)中看到的结果。它与原始答案的不同之处在于让伪元素使用自己的底部边框来制作颜色，而不是`background-color`伪元素的颜色。这似乎解决了 IE 的愚蠢问题。

```
.current_page_item:before,
.current_page_item:after,
.current_page_item a:before,
.current_page_item a:after {
    content: '';
    position: absolute;
    height: 100%;
    width: 20%;
    bottom: -3px;
    left: 20%;
    border-bottom: 3px solid #4594cc;
}

.current_page_item:after {    
    left: 40%;
    border-bottom-color: #c4262e;
}
.current_page_item a:before {    
    left: 60%;    
    border-bottom-color: #d9709c;
}
.current_page_item a:after {    
    left: 80%;    
    border-bottom-color: #ffa100;
}

.current_page_item:hover {
    border-color: #ffffff;
}

.current_page_item:hover:before,
.current_page_item:hover:after,
.current_page_item:hover a:before,
.current_page_item:hover a:after {   
    border-bottom-color: #ffffff;
} 
```

**原始答案（在 IE 中有错误，因为它似乎无法理解`height: 3px`）**

添加以下代码（不确定您是否需要`hover`当前页面的代码，但如果需要我包括在内）会产生在[这个小提琴](http://jsfiddle.net/SMrYF/7/)中看到的结果：

```
.current_page_item:before,
.current_page_item:after,
.current_page_item a:before,
.current_page_item a:after {
    content: '';
    position: absolute;
    height: 3px;
    width: 20%;
    bottom: -3px;
    left: 20%;
    background-color: #4594cc;
}

.current_page_item:after {    
    left: 40%;
    background-color: #c4262e;
}
.current_page_item a:before {    
    left: 60%;
    background-color: #d9709c;
}
.current_page_item a:after {    
    left: 80%;
    background-color: #ffa100;
}

.current_page_item:hover {
    border-color: #ffffff;
}

.current_page_item:hover:before,
.current_page_item:hover:after,
.current_page_item:hover a:before,
.current_page_item:hover a:after {
    background-color: #ffffff;
} 
```

**注意：**我注意到 IE 在某些情况下似乎存在足够智能来确定高度`3px`和`4px`高度之间的差异的问题，这会导致`1px`在某些点上出现恼人的错位。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T22:50:45.677

你也可以做一些不圣洁的事情并使用 CSS 渐变。这是一个在 Safari/Chrome 中唯一有效的被破解的小提琴：http: [//jsfiddle.net/ASLs3/1/](http://jsfiddle.net/ASLs3/1/)

但正如其他人所说，您可能应该只使用背景图片。

# python - Python 3.2：运行 python 程序并创建用户输入

> ID：11936984
> 
> 赞同：0
> 
> 时间：2012-08-13T15:01:27.800
> 
> 标签：python, python-3.x, python-3.2

好的，所以我想做的是我有一堆只是测试的python程序（使用unittest库）。我想创建一个 python 程序，它背靠背地运行每个 python 程序，并在最后给我一份报告（这将是最好的情况），或者如果一个失败就停止运行。

难点在于每个程序都需要用户输入（简单的 Y 表示是）。如何运行每个 python 程序（我已经运行了`executefile("script.py")`命令但没有测试它），然后插入来自用户的输入（一个简单的 Y），或者在测试失败时让它停止（更容易）或者最好是能够判断哪些失败并在它们全部运行后打印失败和通过的结果。

我还在学习python（自学）很抱歉！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T15:05:44.337

您是否尝试过使用该`unittest`模块来运行所有测试？

```
% python -m unittest -h
Usage: python -m unittest [options] [tests]

Options:
  -h, --help       Show this message
  -v, --verbose    Verbose output
  -q, --quiet      Minimal output
  -f, --failfast   Stop on first failure
  -c, --catch      Catch control-C and display results
  -b, --buffer     Buffer stdout and stderr during test runs

Examples:
  python -m unittest test_module               - run tests from test_module
  python -m unittest module.TestClass          - run tests from module.TestClass
  python -m unittest module.Class.test_method  - run specified test method

[tests] can be a list of any number of test modules, classes and test
methods.

Alternative Usage: python -m unittest discover [options]

Options:
  -v, --verbose    Verbose output
  -f, --failfast   Stop on first failure
  -c, --catch      Catch control-C and display results
  -b, --buffer     Buffer stdout and stderr during test runs
  -s directory     Directory to start discovery ('.' default)
  -p pattern       Pattern to match test files ('test*.py' default)
  -t directory     Top level directory of project (default to
                   start directory)

For test discovery all test modules must be importable from the top
level directory of the project. 
```

### 文档：

*   [http://docs.python.org/py3k/library/unittest.html#command-line-interface](http://docs.python.org/py3k/library/unittest.html#command-line-interface)
*   [http://docs.python.org/py3k/library/unittest.html#test-discovery](http://docs.python.org/py3k/library/unittest.html#test-discovery)
*   [http://docs.python.org/py3k/library/unittest.html#unittest.TextTestRunner](http://docs.python.org/py3k/library/unittest.html#unittest.TextTestRunner)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T15:31:58.833

您可以测试脚本中的函数并绕过需要人工干预的“raw_input”部分。例子：

你好.py：

```
def main():
    print "hello world"

if __name__ == "__main__":
    test = True
    while test:
       test = raw_input() != 'Y'
    main() 
```

test_hello.py：

```
import hello

if __name__ == "__main__":
    hello.main() 
```

对于测试 python 代码，您可以将[Nose](http://pypi.python.org/pypi/nose/1.1.2)视为单元测试的替代品。

# javascript - 无法将 Jquery 对象复制到 Jquery 对象中

> ID：11936991
> 
> 赞同：0
> 
> 时间：2012-08-13T15:01:47.300
> 
> 标签：javascript, jquery

您好我正在尝试通过执行以下操作将 JQuery 对象插入另一个对象：

```
var htmlCode = $("<div id='"+data.layoutDescriptions[i].id+"'></div");          
if(data.contentRef == "RecursiveContactSubForm"){
        if(htmlArray[2]){
            alert("in here");
        htmlCode.append(htmlArray[2]);
        }
        else{
            alert("in here2");
            var tmp = htmlCode;
            htmlCode.append(tmp);
        }
    } 
```

我不明白为什么这不起作用。

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T15:25:58.553

我假设你的错误在这里：

```
var tmp = htmlCode;
htmlCode.append(tmp); 
```

此分配不会创建 的副本`htmlCode`，而是会创建对它的新引用。`tmp`并`htmlCode`表示相同的对象，因此尝试将对象附加到自身将失败。

您可以使用以下`clone`功能：

```
var tmp = htmlCode.clone(true);
htmlCode.append(tmp); 
```

传递`true`到`clone`会将附加到对象的任何事件和数据也复制到新对象中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T15:19:42.710

尝试 ：

```
var tmp = htmlCode[0].outerHTML;
htmlCode.append(tmp); 
```

虽然这（我希望）回答了您的问题，但它并没有解决一些问题，特别是，您正在推送一个与其容器具有相同 id 的元素，这确实应该避免。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T15:27:36.253

好吧，你可以做的可能的事情（因为你的代码逻辑看起来不错）：

**(1)**检查返回值以确保这是否是您所期望的。

```
console.log(htmlCode);
console.log(data.contentRef);
console.log(htmlArray[2]);
console.log(tmp); 
```

**(2)**检查浏览器控制台并寻找另一种错误（可能您在其他一些 javascript 代码中有语法错误）。

**(3)**`tmp`变量部分的赋值可能会出错，正确的方法是使用`clone()`：

```
var tmp = htmlCode.clone(true); 
```

* * *

只是要知道，您的代码的想法工作正常，您可以测试以下内容并确保：

**例如：**

**现场演示：http:** [//jsfiddle.net/FYC7L/](http://jsfiddle.net/FYC7L/)

```
var htmlArray = new Array("<div id='newElement_1'>Element 1</div>", "<div id='newElement_2'>Element 2</div>", "<div id='newElement_3'>Element 3</div>");

var htmlCode = $("<div id='test'>Test</div>");          

if(htmlArray[2]){
    htmlCode.append(htmlArray[2]);
}

console.log(htmlCode); 
```

正如您所看到的那样，这是有效的，所以正如我在帖子的第一部分中所写的那样，您的返回值存在某些问题（可能是错误的），或者可能与`tmp`变量有关。

**上面的示例将输出：**

![在此处输入图像描述](../Images/6d614023f735fabac5275a72c831e44e.png)

希望这可以帮助 ：-）

# math - 使用向量根据旋转和速度绘制船的航向

> ID：11936993
> 
> 赞同：1
> 
> 时间：2012-08-13T15:01:49.710
> 
> 标签：math, language-agnostic, vector, linear-algebra

我有一个海战游戏，我试图根据速度和旋转速度向我的用户展示他的船将采取的路线。即，我尝试实现类似于下图的效果。正如你所看到的，一艘能够走红色航线的船，其旋转速度比蓝色的快。现在，我不知何故需要找到一种方法来根据速度、旋转速度和所需方向计算最终的运动矢量，但我还不知道怎么做。任何想法表示赞赏！

![船舶](../Images/761c7c9c6dafe62a40631596cf23c500.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T17:45:08.333

我猜想因为这是一个游戏而不是一个精确的海上模拟，你只是在寻找一种方法来创建一个轨迹图。

这最好用一个简单的迭代/参数方法来处理，假设一个足够小的时间步长它会产生一个不错的曲线。请记住，曲线没有简单的函数形式，它必须由点数组表示。

### 伪代码（Matlab / Octave 样式语法）

```
Given: StartX, StartY, StartHeading, EndX, EndY, MaxSpeed, MaxRotationRate
-----------------------------------------------------------------------------

MaxDisplacement = Max Speed * deltaT
MaxRotation = MaxRotationRate * deltaT

CurrentX = StartX
CurrentY = StartY
CurrentHeading = StartHeading

Trajectory = []

While [CurrentX, CurrentY] != [EndX, EndY]
    % Store the Current Position by appending to results
    Trajectory = [Trajectory; [CurrentX, CurrentY, CurrentHeading]]

    % Get the vector form of the current heading and the straight-line path
    HeadingVector = [cos(CurrentHeading),sin(CurrentHeading)]
    DirectVector = [EndX - CurrentX, EndY - CurrentY]

    % Some simple vector math here using dot products and cross products
    RequiredRotation = arccos(dotP(HeadingVector,DirectVector)/abs((HeadingVector)*abs(DirectVector))
    RotationDirection = sign(crossP(HeadingVector,DirectVector))

    % Clip the rotation rate based on the maximum allowed rotation
    if RequiredRotation > MaxRotation
        RequiredRotation = MaxRotation

    % Update the position based on the heading information
    CurrentX = CurrentX + cos(RequiredRotation) * MaxDisplacement
    CurrentY = CurrentY + sin(RequiredRotation) * MaxDisplacement
    CurrentHeading = CurrentHeading + RequiredRotation * RotationDirection
Loop

Return Trajectory 
```

此代码在到达端点时存在一些问题，我将由您决定如何最好地处理它。两个明显的问题：船将超出所写的端点，因为船总是以最大速度移动；如果终点太近而无法驶入，船可能会卡在“轨道”点上。对此有多种解决方法，这取决于您希望游戏如何处理此问题。

### 几何解

另一种方法是做一些更硬核的几何计算（精确解决方案）。

首先，您需要计算转弯半径而不是最大转弯率。从那里，给定船的当前位置和航向，可以确定船可以采取的两个“转弯圈”。选择正确的中心点*C*，然后在圆上计算正确的切点*T 。*最终路径将是一条弧线（起点、终点、中心），后跟一条线段。

![弧线段路径](../Images/8512701b37a0c3c519fe00ab471e21f9.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T15:26:12.220

这可能不是你的确切答案，但我相信你想要的公式是这样的： ![](../Images/22c4b38bdc34a22ee7462647b7291dd6.png)

这里 U 是物体的四速，Γ 代表坐标系的 64 个连接系数或 Christoffel 符号。请注意，希腊下标有四个可能的值，即时间轴为 0，空间坐标轴为 1-3，并且重复索引用于表示该索引的所有值的总和。

这组四个方程的左侧（一个用于类时和三个类空间的索引 λ 值）是物体的适当加速度 3 向量与从参考的有利位置看到的零时间分量相结合或簿记员坐标系。右手边的第一项列出了在旅行钟上每单位时间 τ，物体四速 U 的类时间（能量/mc）和类空间（动量/m）分量的变化率。

如您所见，它不是 QUITE 线性代数。:)

# oracle - cfqueryparam 行为怪异

> ID：11936994
> 
> 赞同：2
> 
> 时间：2012-08-13T15:01:50.547
> 
> 标签：oracle, coldfusion

我在 Coldfusion 中运行更新查询时遇到问题。我收到一条错误消息，提示 CFSQLTYPE CF_SQL_NUMERIC 的数据无效。我知道数据是数字的，因为我在错误之前输出它并且它是正确的。我像这样设置变量：

```
<cfset itemID = FORM.itemID * 1> <!--- The * 1 is to force a numeric operation, and
therefore a numeric datatype, and like I said, it outputs right. --->

<!--- This is the line (45) the error says is bad --->
WHERE itemid = <cfqueryparam value="#itemID#" cfsqltype="CF_SQL_NUMERIC"> 
```

发生的一件奇怪的事情是，如果我将 cfqueryparam 更改为 varchar，我仍然会得到同样的错误！！

```
WHERE itemid = <cfqueryparam value="#itemID#" cfsqltype="CF_SQL_VARCHAR"> 
```

更奇怪的是，当我完全取出 cfqueryparam 并使用一个数字时，会出现一个新错误，说 BEFORE (44) 行现在不好：

```
WHERE itemid = 20072 <!--- Changing to this produces a new error on the line before --->

<!--- Line 44, which is also using a cfqueryparam numeric. This new error is the same
as before, but on line 44 now instead of 45\. --->
min_qty = <cfqueryparam value="#FORM.itemMinQuantity#" cfsqltype="CF_SQL_NUMERIC"> 
```

知道发生了什么吗？

**编辑**更多代码...

```
<cfquery name="qUpdateItem" datasource="#thedb#">
UPDATE items_something
SET
    itemdesc = <cfqueryparam value="#FORM.itemDescription#" cfsqltype="CF_SQL_VARCHAR">,
    room = <cfqueryparam value="#FORM.itemRoom#" cfsqltype="CF_SQL_VARCHAR">,
    value = <cfqueryparam value="#FORM.itemValue#" cfsqltype="CF_SQL_NUMERIC">,
    categoryid = <cfqueryparam value="#FORM.categoryID#" cfsqltype="CF_SQL_NUMERIC">,
    keywords = <cfqueryparam value="#FORM.itemKeywords#" cfsqltype="CF_SQL_VARCHAR">,
    manufact = <cfqueryparam value="#FORM.itemManufacturer#" cfsqltype="CF_SQL_VARCHAR">,
    partno = <cfqueryparam value="#FORM.itemPartNumber#" cfsqltype="CF_SQL_VARCHAR">,
    itemtitle = <cfqueryparam value="#FORM.itemTitle#" cfsqltype="CF_SQL_VARCHAR">,
    qty = <cfqueryparam value="#FORM.itemQty#" cfsqltype="CF_SQL_NUMERIC">,
    assembly_draw_no = <cfqueryparam value="#FORM.itemAssemblyDrawingNo#" cfsqltype="CF_SQL_NUMERIC">,
    bin = <cfqueryparam value="#FORM.itemBin#" cfsqltype="CF_SQL_VARCHAR">,
    shelf = <cfqueryparam value="#FORM.itemShelf#" cfsqltype="CF_SQL_VARCHAR">,
    min_qty = <cfqueryparam value="#FORM.itemMinQuantity#" cfsqltype="CF_SQL_NUMERIC">
WHERE itemid = <cfqueryparam value="#itemID#" cfsqltype="CF_SQL_NUMERIC"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T15:09:19.260

该问题可能与查询参数无关。执行语句最后一行的 Oracle 错误（通常是 where、group by 或 order by 子句）。如果您提供 ORA- 错误和您的表定义，那将有所帮助。

但该错误可能与查询参数无关。还有其他问题（连接中的相同列（例如，查询中两个表中的 ID 列）、缺少逗号等）。

**编辑：**

根据[cfqueryparam](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7f6f.html)帮助页面中的文本，您可能想尝试 CF_SQL_FLOAT 或 CF_SQL_DECIMAL，因为 CF_SQL_NUMERIC 似乎与 Oracle 没有直接关联。您也可以检查其他列。我不知道这是否能解释它，但我似乎记得在过去看到过这个。

# scala - 根据 scala 中参数的类型选择函数列表的子集

> ID：11936997
> 
> 赞同：2
> 
> 时间：2012-08-13T15:01:53.960
> 
> 标签：scala, shapeless

这是有问题的代码。下面包括一些描述/解释

```
对象功能{
  导入 scala.reflect.Manifest
  私有 var 函数：List[(Manifest[_],Any,String)] = List()
  def add[T](desc: String,func: T)(隐式 m: Manifest[T]) {
    函数 ::= (m,func,desc)
  }

  def get[T]()(隐式 m : Manifest[T]): List[(T,String)] = {
    函数平面图 {
      case (t,f,s) => if (t <:< m) Some(f.asInstanceOf[T],s) else None
    }
  }

  def getInputs[T]()(隐式 m : Manifest[T]): List[(T => Any,String)] = {
  函数平面图 {
    case (t,f,s) => if (t <:< (T => Any)) Some(f.asInstanceOf[T => Any],s) else None
    }
  }

```

基本上我的目标是拥有一个函数列表，保留它们的类型（输入和输出），并能够根据它们作为输入和作为输出的内容来搜索特定函数。我开始相信，如果没有某种猴子补丁，这在 scala 中是不可能的，我想避免这种情况。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T16:10:36.190

[你应该可以用shapeless](https://github.com/milessabin/shapeless)做你想做的事`HLists`，

示例 REPL 会话，

```
scala> import shapeless._
import shapeless._

scala> val f1 : String => Int = _.length
f1: String => Int = <function1>

scala> val f2 : Boolean => Boolean = !_
f2: Boolean => Boolean = <function1>

scala> val f3 : Int => String = "("+_+")"
f3: Int => String = <function1>

scala> val fs = f1 :: f2 :: f3 :: HNil
fs: (String => Int) :: (Boolean => Boolean) :: (Int => String) :: HNil =
  <function1> :: <function1> :: <function1> :: HNil

scala> val args = "foo" :: true :: 23 :: HNil
args: String :: Boolean :: Int :: HNil = foo :: true :: 23 :: HNil

scala> fs zipApply args
res0: Int :: Boolean :: String :: HNil = 3 :: false :: (23) :: HNil 
```

请注意，函数的各个类型保存在 中`HList` `fs`，参数值的各个类型保存在 中`args`，并且结果的元素的`zipApply`类型由相应的函数和参数的类型适当地确定。

# php - Kohana框架：如何知道foreach中的元素编号？

> ID：11936999
> 
> 赞同：1
> 
> 时间：2012-08-13T15:02:08.340
> 
> 标签：php, foreach

这个问题是关于 Kohana 框架的。我是新手。

使用`foreach()`我想显示一些数据。一切都很好，但我想将该数据连续分组为 4 个项目，如下所示：

```
1st 2nd 3rd 4th
5th 6th 7th 8th
9th 10th 11th 12th
.... 
```

这就是为什么我必须`<div>`每 4 次添加一次。

你怎么做到的？您是否使用简单的计数器并检查其 mod 是否为零？是否有一个特殊的 Kohana 函数来检查 foreach() 中当前 $item 的编号，如果它是第一个、第二个或第 n 个 ... item ？

```
<?foreach ($items as $item): ?>
//add <div> tag for 1st, 4th, 7th, etc item

//do something

//add closing </div> tag for 1st, 4th, 7th, etc item
<? endforeach; ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T15:47:38.333

使用通过`foreach`指定数组键的构造`$key => $item`，您可以测试是否`$key % 4 == 0`（或者可能`$key % 4 == 3`在您的情况下）关闭 open `<div>`。

```
// Initial opening div..
<div>
<?foreach ($items as $key => $item): ?>
 <?=$item ?>
 <? if ($key % 4 == 3): ?>
... Close the open div and open a new one
</div>
<div>
<? endif; ?>
<? endforeach; ?>
</div> 
```

模板语法伤害了我的眼睛。这是正确的PHP：

```
echo '<div>';
foreach ($items as $key => $item) {
  echo $item;

  if ($key % 4 == 3) {
    echo '</div><div>';
  }
}
echo '</div>'; 
```

给定以下输入：

```
$items = array('a','b','c','d','e','f','g','h','i','j','k');
// Output:
<div>abcd</div><div>efgh</div><div>ijk</div> 
```