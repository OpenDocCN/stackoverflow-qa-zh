# StackOverflow 问答 000906000-000906999

# database - ORACLE 7.3 用户管理

> ID：906001
> 
> 赞同：0
> 
> 时间：2009-05-25T09:12:06.517
> 
> 标签：database, oracle, schema, user-management

在工作中，我有一个基于 Oracle 7.3 的应用程序（是的，旧东西）。最近，我尝试创建一个能够在所有表上进行 SELECT 的帐户，但没有别的，即没有更新或删除。但是每当我创建一个新帐户时，它已经可以访问所有应用程序表。我什至将其简化为仅创建会话。这没有帮助 - 用户仍然可以更新任何表！

所以，我发现有一大堆公共同义词与表命名完全相同（即表myTable123，公共同义词myTable123）。我删除了其中一个，用户无法在该特定表上进行选择。然后我创建了一个新表，显然新用户看不到它。我为该表添加了公共同义词，希望用户能够访问它。不幸的是，新用户看不到它..这是有道理的，因为没有给予任何授权。必须有别的东西......

我不是甲骨文专家，我正在努力解决这个问题，但到目前为止还没有运气。请帮助您提出任何建议。干杯! 达摩

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-25T12:05:11.193

正如 tuinstoel 所说，您可以忽略公共同义词 - 这不会影响权限。

您可能在创建原始表格时创建者做了

```
grant [permissions] on [table] to public 
```

其中 [permissions] 可以与“all”一样广泛，这意味着任何新用户都将自动被授予对这些表的权限。

做

```
select * from ALL_TAB_PRIVS where table_name = '[one of your problem tables]' 
```

退货？

顺便说一句 - 从未使用过 Oracle 7.3.3 - 我假设许可模型没有太大变化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-25T11:50:53.937

Oracle 7.3 不仅旧，而且非常、非常、非常旧。它是 12 或 13 岁。

创建或删除公共 syns 不会更改任何人访问表的权限。创建公共同义词的唯一原因是可以访问表而不用为其模式名称添加前缀。

我认为您的老用户拥有诸如“更新任何表”和“选择任何表”或“dba”之类的特权。

# html - 将文本框中的文本直接输出到 html 页面？

> ID：906007
> 
> 赞同：0
> 
> 时间：2009-05-25T09:13:29.493
> 
> 标签：html

如何将文本从文本框中直接输出到将永久存储的 html 页面？

这个问题的目的是我想为这样的网站实现一个评论脚本：ommmm.de/modelle_sticky.htm 每次团队成员点击“评论 - 发送”按钮之一时，我都希望所有这些都是在下面的文本框中输入将立即更新到上面的空间中。（我之前在考虑 php-mysql，但我也想知道使用注释所在的同一个 html 文件作为平面文件存储的最简单方法）。

编辑：对我来说似乎很奇怪，似乎没有一个最简单的解决方案可以让您在文本框中输入一些内容，点击一个按钮并将其作为 html 嵌入到同一页面上。

感谢您提供有关如何将数据插入数据库表的文章。但是，检索数据的最佳方式是什么？每次重新加载页面时，对每个表中的每一列执行 Select * 吗？是这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-25T09:16:51.407

您需要将数据保存到存储网页的服务器上。或者通过：

*   将其写入 HTML 文件本身或
*   将其存储在数据库中

我认为这是一个相当大的问题，需要在这里完全回答，所以我认为我们需要您提供更多信息。

编辑：

这又是一个相当大的主题，我建议创建一个数据库表来保存评论，然后有一个 PHP 表单（或您喜欢的任何语言）将信息提交到数据库中。

您有另一个脚本从数据库中读取以显示当前评论。

我不想只是粘贴一些 PHP 评论工具或留言簿工具，因为我不知道它做得有多好以及你实现它有多容易。我也不知道你的编程水平。

因此，我将向您介绍这篇关于[将数据插入数据库的 W3Schools 文章。](http://www.w3schools.com/PHP/php_mysql_insert.asp)请注意，此示例在网络上实时使用并不安全。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-25T10:31:22.600

如果我没记错的话，您可以使用 javascript 重构您的评论部分，同时通过 javascript 调用您的网络服务，您可以轻松找到相关教程。希望有效...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-25T09:17:25.353

您需要使用一些服务端逻辑 + AJAX 来做到这一点。一般来说，假设您选择 PHP 作为您的服务器端脚本语言，您将需要编写一些脚本，该脚本将能够接收文本参数并将其存储在磁盘上，然后在那里进行 AJAX 调用，您将从文本框传递文本（使用POST）到该脚本。

编辑：出于安全原因，JavaScript 不允许进行任何磁盘访问（cookie 除外），尤其是在服务器上。我只是不明白为什么你对提议的解决方案如此消极。总之，这听起来很容易，但背后还有一些工作要做。因此，每次重新加载页面时，您都需要从 DB 表中重新选择数据并创建一个 HTML，就像您需要从服务器上已更新的 HTML 文件中重新读取数据一样。你想改进它吗？实现缓存。有一种简单的方法（比如说使用 jquery）只是在已经存在的 DOM 结构中插入新输入的文本，但是在您必须重新加载页面后它不会在任何地方持久存在。所以不要试图找到最简单的方法，那是不可能的。

# jquery - jquery保存元素位置（序列化？）

> ID：906023
> 
> 赞同：0
> 
> 时间：2009-05-25T09:16:55.057
> 
> 标签：jquery, save, serialization

如何在 div 中保存元素位置？

我是否使用序列化，如果是，我该怎么做？

我有这个 div：

```
<div id="produtlist">
    <img id="productid_10" src="images/pic10.jpg" class="sortableproduct" alt="" title="" />
    <img id="productid_11" src="images/image1.jpg" class="sortableproduct" alt="" title="" />
    <img id="productid_12" src="images/image2.jpg" class="sortableproduct" alt="" title="" />
    <img id="productid_13" src="images/pic1.jpg" class="sortableproduct" alt="" title="" />
    <img id="productid_14" src="images/pic2.jpg" class="sortableproduct" alt="" title="" />
    <img id="productid_15" src="images/pic3.jpg" class="sortableproduct" alt="" title="" />
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-25T09:23:46.277

好吧，如果您只需要记住顺序，您可以将逗号分隔的 id 字符串插入 cookie 中？并在页面加载时将它们拉回来。

据我所知，序列化仅适用于表单数据，不适用于 DOM 元素。

为了解决您的评论，您将使用简单的 jquery 从页面构建一个 CSV：

```
var list = '';
$('#productlist .sortableproduct').each(function() {
    list += this.attr('id') + ',';
}); 
```

然后将列表保存到 cookie，或将其发送回服务器。

把事情恢复原状有点困难。如果您将字符串发送回服务器，则以正确的顺序输出内容会简单得多......但是您可以使用 jquery 中的 DOM 工具来移动 DOM 对象。无论哪种方式都足够简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-26T08:53:35.183

我在我的一个项目中使用了类似的功能，并且我已经准备好一段代码来恢复排序。该函数有 2 个参数：

1.  列表容器
2.  保存逗号分隔 ID 的 cookie。

我用它来重新排序基于 ul 的列表，但在你的情况下也应该可以正常工作......

```
// Function that restores the list order from a cookie
function restoreOrder( _list, _cookie ) {

    var list = $( '#' + _list );
    if( list == null ) return;

    // fetch the cookie value (saved order)
    var cookie = $.cookie( _cookie );

    if( !cookie ) return;

    // make array from saved order
    var IDs = cookie.split( "," );

    // fetch current order
    var items = list.sortable( "toArray" );

    // make array from current order
    var rebuild = new Array();
    for( var v = 0, len = items.length; v < len; v++ )
        rebuild[items[v]] = items[v];

    for( var i = 0, n = IDs.length; i < n; i++ ) {

        // item id from saved order
        var itemID = IDs[i];

        if( itemID in rebuild ) {

            // select item id from current order
            var item = rebuild[itemID];

            // select the item according to current order
            var child = $( '#' + _list ).children( '#' + item );

            // select the item according to the saved order
            var savedOrd = $( '#' + _list ).children( '#' + itemID );

            // remove all the items
            child.remove();

            // add the items in turn according to saved order
            // we need to filter here since the "ui-sortable"
            // class is applied to all ul elements and we
            // only want the very first!  You can modify this
            // to support multiple lists - not tested!
            $( '#' + _list ).filter( ':first' ).append( savedOrd );

        } // if

    } // for

} // restoreOrder 
```

我忘记了我是从哪里得到它的（谷歌搜索时出现的一些论坛或博客）......但应归功于原作者。我通过接受这些参数对原始例程进行了一些修改，以使其更易于重用。

干杯，微观世界^地球

# tcp - 通过 tcp 连接打开优化协议打开操作

> ID：906028
> 
> 赞同：1
> 
> 时间：2009-05-25T09:17:57.177
> 
> 标签：tcp, protocols, network-protocols

我正在设计一个名为 DITP 的新协议。它是一种面向连接的协议，将使用 TCP 作为传输层。使用常见的 Internet 协议，当 TCP 连接建立时，服务器首先发送问候消息给客户端响应，最终发送它的第一个请求。

我发现我可以通过反转初始协议事务来节省一次往返时间。客户端首先发送问候语，然后是第一个请求。

下图显示了两种协议事务时间之间的比较，以及它如何节省一个往返时间。

[![常用协议和DITP协议比较](https://i.stack.imgur.com/dIWTe.png)](https://i.stack.imgur.com/dIWTe.png)
[（来源：[disnetwork.info](http://www.disnetwork.info/uploads/3/8/0/1/38014/705893.png?490x241)）]

您可能需要阅读以下博客注释以获得更详细的说明。 [http://www.disnetwork.info/1/post/2008/08/optimizing-ditp-connection-open.html](http://www.disnetwork.info/the-blog/optimizing-ditp-connection-open)

我有两个问题要问 StackOverflow 的网络编程专家：

1.  这个假设正确吗？

2.  为什么通用协议不使用这个？

这种方法可以为通信延迟高且需要频繁建立连接的长距离连接提供显着的性能优化。HTTP 本来是一个不错的选择。

编辑：哎呀大错误。HTTP 使用客户端直接发送请求的优化方法。没有与 SMTP 一样的问候事务。请参阅 Wikipedia[超文本传输​​协议](https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol)页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-25T09:39:26.760

这主要是因为：

a.) 客户端可能需要知道服务器使用的协议版本

b.) 您甚至都不知道您真的在与支持该协议的服务器通话。

简而言之，在向其发送数据之前了解您正在与之交谈的内容通常是有意义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-25T09:45:20.477

我想知道这种设计是否可以说不违反[Postel 定律](http://en.wikipedia.org/wiki/Robustness_Principle)，因为它假设了关于接收者的事情，因此在知道之前就假设了什么是合法的。

我至少希望这个原则成为大多数协议设计的原因，以便它们在发送可能根本无法理解的数据之前花费往返来了解更多关于另一端的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-25T10:03:18.490

如果延迟是您主要关心的问题，您可能需要查看[LPT](https://www.rfc-editor.org/rfc/rfc5326)，这是一种专为往返时间极长的连接而设计的协议。

在设计新的传输协议时，您应该注意拥塞控制以及防火墙在遇到未知协议的数据包时会做什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-25T10:20:23.290

HTTP、SMTP 等协议的设计目标不是速度，而是不稳定的物理网络条件下的可靠性和微薄的带宽利用率。现在，随着硬件的改进，这些条件在很大程度上发生了变化。

您的设计应该根据您将遇到的网络条件、所需的可靠性、延迟和预期应用程序的带宽利用率来考虑。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-25T18:42:38.820

1.  **理论上**，这是正确的。
2.  普通协议不使用它，因为它效率低下。客户端必须拆分数据流，因此它们必须是可区分的。服务器必须注意这一点，例如将每个数据块打包在一个容器中（XML、JSON、类似 Bitorrent，你可以命名它）。而容器只是不必要的数据开销，减慢了传输速度。

为什么不只打开几个 TCP 套接字并通过这些多个连接发送单独的请求呢？这里没有开销！哦，这已经被一些现代网络浏览器完成了。使用`wireshark`or`tcpdump`检查数据包并亲自查看。

不止于此。TCP 套接字需要时间来建立（SYN，一些时间，SYN+ACK，一些时间，ACK...）。有人认为在每次请求后重置连接是一种浪费，因此一些现代 HTTP 服务器和客户端使用`Connection: keep-alive`来表示他们希望重用连接。

很抱歉，但我认为您的想法很棒，但是您可以在 RFC 中找到它们。不过，请继续思考，我相信有一天你会发明一些很棒的东西。[请参阅此处](http://bittyrant.cs.washington.edu/)的fe以获得优化的 bitorrent 客户端。

# sharepoint - 修改 SharePoint KPI 列表视图

> ID：906033
> 
> 赞同：1
> 
> 时间：2009-05-25T09:21:39.963
> 
> 标签：sharepoint, sharepoint-2007, moss, kpi

我正在尝试向 SharePoint KPI 列表添加新字段和新视图。KPI 列表显示两个视图：

*   所有项目
*   关键绩效指标清单

默认情况下，我无法添加或删除这两个视图中显示的任何字段。当尝试创建一个新视图时，它会显示四列**指示符、目标、值、状态，**而不管通过配置视图设置要显示哪些列。

在尝试添加字段、视图和使用代码设置这些字段的项目时，它以红色显示此消息：

> 检索数据时发生错误。

这种行为是设计使然吗？

有没有办法修改这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2011-06-09T16:49:21.357

看起来 KPI 有很多错误和限制

*   当您第一次创建 KPI 时，它通常不会从所选视图中提取正确的列列表；发明一个虚假的 KPI 表达式，保存它，然后再次编辑它会更新列列表。（显然是一个错误。）

*   您可以将新列添加到 KPI 列表，但它不会显示它们或让您编辑它们。（也许只是不完整的实现。）

*   您可以将过滤器添加到 KPI 列表的视图中，但它们会被完全忽略。（显然是一个错误。）

# c# - 在 C# 中计算未来纪元时间

> ID：906034
> 
> 赞同：16
> 
> 时间：2009-05-25T09:21:46.733
> 
> 标签：c#, time, epoch

我能够找到示例代码来获取 Linux Epoch 中的当前时间戳（自 1970 年 1 月 1 日午夜以来的秒数），但是我无法找到一个关于如何计算未来 Epoch 的示例，例如 10从现在开始几分钟，那么我如何计算 Linux Epoch 中的未来时间？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2009-05-25T09:31:40.550

这种扩展方法应该可以完成这项工作：

```
private static double GetUnixEpoch(this DateTime dateTime)
{
    var unixTime = dateTime.ToUniversalTime() - 
        new DateTime(1970, 1, 1, 0, 0, 0, DateTimeKind.Utc);

    return unixTime.TotalSeconds;
} 
```

你可以这样使用它：

```
var unixTime1 = DateTime.Now.GetUnixEpoch(); // precisely now
var unixTime2 = (DateTime.Now + new TimeSpan(0, 10, 0)).GetUnixEpoch(); // 10 minutes in future 
```

请注意，您需要处理**UTC**（通用时间）中的所有日期时间，因为这就是定义 Unix 纪元开始的方式。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2009-05-25T11:12:07.040

当您想在 Windows 系统上了解 .Net 中的 Unix 纪元时间时，有一个有趣的转折。

对于几乎所有实际情况并假设当前时间已超过 Unix 纪元，您确实可以采取

```
System.TimeSpan timeDifference = DateTime.UTCNow - 
            new DateTime(1970, 1, 1, 0, 0, 0, DateTimeKind.Utc);
long unixEpochTime = System.Convert.ToInt64(timeDifference.TotalSeconds); 
```

但，

Unix Epoch Time 被定义为“......用于描述时间点的系统，定义为自 1970 年 1 月 1 日协调世界时 (UTC) 午夜以来经过的秒数，**不包括闰秒**。” (1)

自 1972 年以来，UTC 已包含“闰秒”，到目前为止，我们总共有 25 个。(2)

.Net DateTime 没有关于闰秒的规定，但只会依赖操作系统时间。Windows 很高兴地不知道闰秒 (3)(4)，因此当它从其 NTP 主机接收到时间时，它只会有时间的概念（我相信非域连接机器的默认设置是 time.windows.com ） ，这可能正在提供包括闰秒在内的 UTC。

这意味着，为了准确地了解自 Unix 纪元以来经过的实际秒数，对于依赖于此的应用程序，您可能应该将闰秒添加到上面获得的结果中。您必须跟踪每次添加的秒数，因为闰秒并未提前宣布 (2)。但是，由于 Unix Epoch Time 的定义明确排除了闰秒，您可以放心地忽略这一点并简单地从当前 UTC 时间重新计算秒数。

有时，闰秒确实会导致软件混乱 (5)。关于是否保留或消除这种做法的辩论正在进行中 (6)(7)(8)。

回答时的最后一个闰秒发生在 2012 年 7 月 1 日 (9)，并导致各种站点和应用程序出现问题 (10)

(1) [http://en.wikipedia.org/wiki/Unix_time](http://en.wikipedia.org/wiki/Unix_time)

(2) [http://en.wikipedia.org/wiki/Leap_second](http://en.wikipedia.org/wiki/Leap_second)

(3) [http://support.microsoft.com/kb/909614](http://support.microsoft.com/kb/909614)

(4) [http://www.meinberg.de/english/info/leap-second.htm](http://www.meinberg.de/english/info/leap-second.htm)

(5) [http://www.networkworld.com/news/2009/010609-leap-second-snafu-affects-oracle.html](http://www.networkworld.com/news/2009/010609-leap-second-snafu-affects-oracle.html)

(6) [http://www.pcworld.idg.com.au/article/358024/time_waits_no_one_leap_seconds_may_cut/](http://www.pcworld.idg.com.au/article/358024/time_waits_no_one_leap_seconds_may_cut/)

(7) [http://queue.acm.org/detail.cfm?id=1967009](http://queue.acm.org/detail.cfm?id=1967009)

(8) [http://arxiv.org/abs/1106.3141](http://arxiv.org/abs/1106.3141)

(9) [http://hpiers.obspm.fr/iers/bul/bulc/bulletinc.dat](http://hpiers.obspm.fr/iers/bul/bulc/bulletinc.dat)

(10) [http://arstechnica.com/business/2012/07/one-day-later-the-leap-second-v-the-internet-scorecard/](http://arstechnica.com/business/2012/07/one-day-later-the-leap-second-v-the-internet-scorecard/)

（最初的答案有一个错误，幸好被下面的评论者 Edward Brey 和 Mormegil 发现了）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-25T09:31:34.310

基本解决方案：

1.  取当前时间
2.  向未来添加偏移量（在您的示例中为 10 分钟）
3.  减去 1970 年 1 月 1 日的午夜
4.  获取两者之间的总秒数

在 c# 中（在我的脑海中，未经测试）：

```
DateTime myEpoch = DateTime.Now.Add( new TimeSpan(...) );
return myEpoch.Subtract( new DateTime(1970, 1, 1, 0, 0, 0) ).TotalSeconds; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-25T09:32:57.287

你用什么函数来获取当前时间？

当然，这需要一个 .NET DateTime 参数......

当然，这只是将未来的 DateTime 传递给函数的简单问题。

或在当前时间和未来时间之间以秒为单位执行 DateDiff 并将其添加。

```
var dt = new DateTime(1970, 1, 1, 0, 0, 0).ToUniversalTime();

var now = System.DateTime.Now.ToUniversalTime();
var future = new DateTime(2010, 1, 1).ToUniversalTime();

Console.WriteLine((now - dt).TotalSeconds);
Console.WriteLine((future - dt).TotalSeconds); 
```

# java - hibernate二级缓存ehcache的性能

> ID：906035
> 
> 赞同：6
> 
> 时间：2009-05-25T09:21:57.590
> 
> 标签：java, hibernate, caching, ehcache

我们正在考虑使用 ehcache (1.6.0-beta5) 来启用许多从未修改过的表的二级缓存。我们已经为这个表设置了一个只读的 ehcache 区域，目前它似乎工作正常。存储在缓存中的 Hibnerate POJO 都是不可变的。

这里的一位开发人员提出了一个问题，即从 ehcache 中“水合”对象（即从 ehcache 的实体内部表示到实际 Java 对象的映射）所花费的时间显着降低了性能。相反，他建议我们手动将对象存储在我们自己的缓存中。这将需要对我们的代码进行重大修改，我对改进的幅度持保留态度。

我的问题是：

1.  这种性能下降真的很显着吗？
2.  如果实体在只读缓存中是不可变的，那么 ehcache 实际上是否需要进行任何水合？它不能直接存储对象吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-25T09:44:44.800

您应该描述水合所需的时间。如果这很重要（至少百分之几），您应该考虑更改代码。

# wpf - 组合纯色画笔

> ID：906045
> 
> 赞同：6
> 
> 时间：2009-05-25T09:26:30.123
> 
> 标签：wpf, brush

有没有办法创建一种混合了 2 个纯色画笔的“纯色画笔”？

对于背景颜色，我希望能够对其他画笔使用 DynamicReference。而另一种颜色（在前面）可能是具有不透明度的静态颜色。

如果这真的没有道理，请随时要求澄清！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-03-27T14:46:47.287

我遇到了同样的问题。我通常只为基本的深色、基本的灯光使用一个 xaml，然后为每种颜色重音（蓝色、红色等）使用一个 xaml。The accent is slightly lookthrough which makes it darker when then darker theme is selected with a darker background.

在创建具有辅助强调色的主题以在应用程序中具有更多对比度时（例如，选择浅色主题时为灰色，选择深色主题时为强调色），我需要用两种颜色构建画笔，否则我必须创建每种颜色的深色和浅色主题。

这是我使用的：

```
<DrawingBrush x:Key="SecondaryAccentColorBrush" Viewport="0,0,1,1" TileMode="Tile">
    <DrawingBrush.Drawing>
        <DrawingGroup>
            <GeometryDrawing>
                <GeometryDrawing.Geometry>
                    <RectangleGeometry Rect="0,0,1,1" />
                </GeometryDrawing.Geometry>
                <GeometryDrawing.Brush>
                    <SolidColorBrush Color="{DynamicResource AccentColor}"/>
                </GeometryDrawing.Brush>
            </GeometryDrawing>
            <GeometryDrawing>
                <GeometryDrawing.Geometry>
                    <RectangleGeometry Rect="0,0,1,1" />
                </GeometryDrawing.Geometry>
                <GeometryDrawing.Brush>
                    <SolidColorBrush Color="{DynamicResource Gray10}"/>
                </GeometryDrawing.Brush>
            </GeometryDrawing>
        </DrawingGroup>
    </DrawingBrush.Drawing>
</DrawingBrush> 
```

切换主题时，“Gray10”的 alpha 在 00 和 FF 之间切换，因此画笔显示灰色或强调色。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-25T23:51:39.820

不幸的是，WPF 中不支持自定义画笔（画笔类型被标记为“内部”并且不能从其继承），因此无法像普通 SolidColorBrush 一样创建可以从 XAML 中使用的两个画笔的混合画笔。

作为一种解决方法，您可以使用 MarkupExtension 来模拟自定义画笔的行为，这允许您使用 XAML 语法并提供自定义值，这允许我们使用内置的 SolidColorBrush（无需自定义画笔）设置为混合两种颜色时获得的值：

```
/// <summary>
/// Markup extension to mix two SolidColorBrushes together to produce a new SolidColorBrush.
/// </summary>
[MarkupExtensionReturnType(typeof(SolidColorBrush))]
public class MixedColorBrush : MarkupExtension, INotifyPropertyChanged
{
    /// <summary>
    /// The foreground mix color; defaults to white.  
    /// If not changed, the result will always be white.
    /// </summary>
    private SolidColorBrush foreground = Brushes.White;

    /// <summary>
    /// The background mix color; defaults to black.  
    /// If not set, the result will be the foreground color.
    /// </summary>
    private SolidColorBrush background = Brushes.Black;

    /// <summary>
    /// PropertyChanged event for WPF binding.
    /// </summary>
    public event PropertyChangedEventHandler PropertyChanged;

    /// <summary>
    /// Gets or sets the foreground mix color.
    /// </summary>
    public SolidColorBrush Foreground
    {
        get 
        { 
            return this.foreground; 
        }
        set 
        { 
            this.foreground = value; 
            this.NotifyPropertyChanged("Foreground"); 
        }
    }

    /// <summary>
    /// Gets or sets the background mix color.
    /// </summary>
    public SolidColorBrush Background
    {
        get 
        { 
            return this.background; 
        }
        set 
        { 
            this.background = value; 
            this.NotifyPropertyChanged("Background"); 
        }
    }

    /// <summary>
    /// Returns a SolidColorBrush that is set as the value of the 
    /// target property for this markup extension.
    /// </summary>
    /// <param name="serviceProvider">Object that can provide services for the markup extension.</param>
    /// <returns>The object value to set on the property where the extension is applied.</returns>
    public override object ProvideValue(IServiceProvider serviceProvider)
    {
        if (this.foreground != null && this.background != null)
        {
            // Create a new brush as a composite of the old ones
            // This does simple non-perceptual additive color, e.g 
            // blue + red = magenta, but you can swap in a different
            // algorithm to do subtractive color (red + yellow = orange)
            return new SolidColorBrush(this.foreground.Color + this.background.Color);
        }

        // If either of the brushes was set to null, return an empty (white) brush.
        return new SolidColorBrush();
    }

    /// <summary>
    /// Raise the property changed event.
    /// </summary>
    /// <param name="propertyName">Name of the property which has changed.</param>
    protected void NotifyPropertyChanged(string propertyName)
    {
        if (this.PropertyChanged != null)
        {
            this.PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

然后可以像使用普通画笔一样从 XAML 中使用它：

```
<Grid>
    <Grid.Background>
        <local:MixedColorBrush Foreground="Blue" Background="Red"/>
    </Grid.Background>
</Grid> 
```

或者通过使用标记扩展语法：

```
<Grid Background="{local:MixedColorBrush Foreground=Blue, Background=Red}"> 
```

这种方法的缺点是您不能使用 DynamicResource 或 StaticResource 引用将值绑定到应用程序中的其他资源。MarkupExtension 不是 DependencyObject，资源绑定只对 DependencyObjects 起作用；内置画笔是 DependencyObjects，这就是绑定与传统画笔一起使用的原因。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-25T09:50:43.600

从前景和背景画笔中获取颜色，将它们混合，然后从生成的颜色创建一个新画笔。

C# 中的示例：

```
Color foreground = foregroundBrush.Color;
Color background = backgroundBrush.Color;

int opacity = 25;

int r = (opacity * (foreground.R - background.R) / 100) + background.R;
int g = (opacity * (foreground.G - background.G) / 100) + background.G;
int b = (opacity * (foreground.B - background.B) / 100) + background.B;

SolidColorBrush mixedBrush = new SolidColorBrush(Color.FromArgb(r, g, b)); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-09T14:30:44.080

一种简单的方法（但可能未优化），以重复模式创建两种颜色的[LinearGradientBrush](https://www.google.fr/url?sa=t&rct=j&q=&esrc=s&source=web&cd=11&cad=rja&ved=0CIABEBYwCg&url=http://msdn.microsoft.com/en-us/library/system.windows.media.lineargradientbrush.aspx&ei=zn7tUPrVNOKv0QWz_IDIAg&usg=AFQjCNHU6TVAhSD5Sc5Pdblwtpc_gnJIig&sig2=bjvdNmnL73dyur_sSWstow&bvm=bv.1357316858,d.d2k)，端点等于起点：

```
<LinearGradientBrush SpreadMethod="Repeat" EndPoint="0,0">
                                <GradientStop Color="Red" Offset="0" />
                                <GradientStop Color="Yellow" Offset="1" />
                            </LinearGradientBrush> 
```

这个给你一个橙色的刷子。

# iphone - editButtonItem 设置但没有减号按钮？

> ID：906047
> 
> 赞同：7
> 
> 时间：2009-05-25T09:27:28.407
> 
> 标签：iphone, objective-c, cocoa-touch

我的编辑按钮放在viewDidLoad中：

```
self.navigationItem.rightBarButtonItem = self.editButtonItem; 
```

它正确显示在导航栏上，点击此按钮确实将其更改为完成。但是，我的表格行中没有显示减号按钮。不过，滑动一行，然后点击删除就可以了。

有任何想法吗？

**编辑1：**这是我的做法：

```
- (void)loadView {
tableView = [[UITableView alloc] initWithFrame:[[UIScreen mainScreen] applicationFrame]];
tableView.delegate = self;
tableView.dataSource = self;
tableView.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;

self.view = tableView;
} 
```

**编辑 2：**我的观察是，如果我的表视图是在 IB（RootViewController）中创建的，那么编辑和减号按钮显示正常。另外两个（或三个）tableview 是由上述代码创建的，所以这可能是问题所在。我想我必须深入研究 isEditing、编辑等等。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2010-04-12T14:48:45.670

如果你不继承 UITableViewController，有办法做到这一点。只需在您的 UIViewController 子类中实现 setEditing:animated: ，如下所示：

```
- (void) setEditing:(BOOL)editing animated:(BOOL)animated {
    [super setEditing: editing animated: animated];
    [self.tableView setEditing:editing animated:animated];
} 
```

*注意：如果需要替换“self.tableView”...*

还将“编辑”按钮添加到工具栏：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    self.navigationItem.rightBarButtonItem = self.editButtonItem;
} 
```

就这样！

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-05-25T19:59:18.230

傻我。我忘记将 UIViewController（我的视图控制器继承自的类）更改为 UITableViewController。现在，它起作用了。

如果不这样做，我需要手动启用行编辑，例如：

```
// in loadView
self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemEdit target:self action:@selector(turnOnEditing)];

- (void)turnOnEditing {
[self.navigationItem.rightBarButtonItem release];
self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(turnOffEditing)];
[self.tableView setEditing:YES animated:YES];
}

- (void)turnOffEditing {
[self.navigationItem.rightBarButtonItem release];
self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemEdit target:self action:@selector(turnOnEditing)];
[self.tableView setEditing:NO animated:YES];
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-12T06:21:13.490

要显示和激活每个 tableviewcell 左角的减号按钮，请执行以下操作：

将以下代码添加到您的 viewdidload 方法中：

```
self.navigationItem.rightBarButtonItem = self.editButtonItem; 
```

//上面一行是在导航栏右上角显示“编辑”和“完成”按钮。

并将以下方法添加到您的 .m 文件中，以显示和动画化 tableview 单元格上的 MINUS 符号。

```
- (void)setEditing:(BOOL)editing animated:(BOOL)animated
 {
    [super setEditing:editing animated:animated];

    if(editing == YES) {

    [self.tableView setEditing:editing animated:animated];

     } else {

    [self.tableView setEditing:NO animated:animated];

     }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-25T19:37:07.370

你可能需要做：

```
self.tableView = tableView; 
```

在你的`loadView`方法中。这是`UITableViewController`操作的属性，如果您从 NIB 加载视图，它会自动设置。由于您是以编程方式创建视图，因此您需要明确设置它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-01-20T18:41:50.800

我遇到了同样的问题。根据 UITableViewController 的文档，它写道： UITableViewController 实现了超类方法 setEditing:animated: 因此，如果用户点击导航栏中的 Edit|Done 按钮，控制器会切换表格的编辑模式。

[请参阅UITableViewController](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewController_Class/Reference/Reference.html)文档中的最后一个要点。

# php - imagecreatefromjpeg 内存问题

> ID：906051
> 
> 赞同：1
> 
> 时间：2009-05-25T09:30:08.620
> 
> 标签：php, memory

大家好，我正在尝试使用 imagecreatefromjpeg 调整 700kb 的图像大小。

这给出了错误：致命错误：允许的内存大小为 25165824 字节已用尽（尝试分配 9356 字节）

首先 memory_limit 是 8M 然后我们将其设置为 24 M 但它仍然给出错误。这是内存泄漏吗？可能发生了什么？我们已经重新启动了 apache。

这里有一些代码供有兴趣的人参考：

```
function getResizedBackgroundImageURL($afb="",$params="") {
#1\. Verwijder webroot
$filename=C_Settings::getFileRoot().str_replace(C_Settings::getWebRoot(),"",$afb);
$i=strrpos($filename,".");
if ($i!==FALSE) {
    $ext=substr($filename,$i);
    $basefilename=substr($filename,0,$i);

    #Parse width/height params
    $a=explode("&",$params);
    foreach($a as $attr) {
        $b=explode("=",$attr);
        if ($b[0]=="w") {
            $w=$b[1];
        }   elseif ($b[0]=="h") {
            $h=$b[1];
        }
    }

    if (!is_numeric($w)) {
      die("Missing param w for getResizedBackgroundImageURL");
    }

    if (!is_numeric($h)) {
      die("Missing param h for getResizedBackgroundImageURL");
    }

    #Compose new filename
    $newFilename=$basefilename."_w".$w."_h".$h.$ext;
    #See if the resized image exists
    if (!file_exists($newFilename)) {
    if (is_file($filename)) {
        if($ext==".jpg" || $ext==".jpeg"){

            $image_org=imagecreatefromjpeg($filename);

        }
        if($ext==".gif") {
            $image_org=@imagecreatefromgif($filename);
        }

        if ($image_org) {
            list($wp,$hp,$type,$attr)=getimagesize($filename);
            $hfactor=$hp/$h;
            $wfactor=$wp/$w;
            if ($hfactor > $wfactor) {
            $factor=$hfactor;
        } else {
            $factor=$wfactor;
        }   
                if($wp > $w || $hp > $h) {
        $image_w=$wp/$factor;
        $image_h=$hp/$factor;
        }else{
            #if image fits the given boundaries, do not resize
            $image_w=$wp;
        $image_h=$hp;               
        }
        //Note: PHP with GD2.0 required for imagecreatetruecolor
        $img_copy=imagecreatetruecolor($image_w, $image_h);
        imagecopyresampled($img_copy, $image_org, 0, 0, 0, 0, $image_w, $image_h, $wp, $hp);

            if (@imagejpeg($img_copy, $newFilename, 80)) {
                chmod($newFilename,0777);
            }   else {
                echo("<b>Error: </b>Unable to create image $newFilename. Check directory permissions.");
            }   

          imagedestroy($image_org);
            imagedestroy($img_copy);
    }
  }      
    }
    $newURL=C_Settings::getWebRoot().str_replace(C_Settings::getFileRoot(),"",$newFilename);
    return $newURL;     
} 
```

}

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-25T09:54:18.523

增加你的内存，直到你有足够的内存，并确保在完成处理后使用 imagedestroy()。

```
ini_set("memory_limit","10000M"); 
```

# c# - C#中的委托语法问题

> ID：906057
> 
> 赞同：6
> 
> 时间：2009-05-25T09:32:05.183
> 
> 标签：c#, multithreading, delegates

我构建了一个测试箱来学习有关 Windows 窗体应用程序中的线程的知识。Silverlight 和 Java 提供了 Dispatcher，这在更新 GUI 元素时非常有用。

代码示例：声明类委托

```
public delegate void d_SingleString(string newText); 
```

创建线程

```
 _thread_active = true;
        Thread myThread = new Thread(delegate() { BackGroundThread(); });
        myThread.Start(); 
```

线程函数

```
 private void BackGroundThread()
    {
        while (_thread_active)
        {
            MyCounter++;
            UpdateTestBox(MyCounter.ToString());
            Thread.Sleep(1000);
        }
    } 
```

委派文本框更新

```
 public void UpdateTestBox(string newText)
    {
        if (InvokeRequired)
        {
            BeginInvoke(new d_SingleString(UpdateTestBox), new object[] { newText });
            return;
        }
        tb_output.Text = newText;
    } 
```

有没有办法在 BeginInvoke 方法中声明延迟声明？！

就像是

```
BeginInvoke(*DELEGATE DECLARATION HERE*, new object[] { newText }); 
```

非常感谢， 雷特

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-25T09:50:17.237

在很多这样的情况下，最简单的方法是使用“捕获的变量”在线程之间传递状态；这意味着您可以保持逻辑本地化：

```
public void UpdateTestBox(string newText)
{
    BeginInvoke((MethodInvoker) delegate {
        tb_output.Text = newText;
    });        
} 
```

如果我们*希望*在工作线程上调用它（如此少的点检查`InvokeRequired`），上面的内容特别有用 - 请注意，这对于 UI 或工作线程都是安全的，并允许我们在线程之间传递尽可能多或尽可能少的状态.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-25T09:34:29.857

对于像这样的简单委托，您可以使用框架中的`Action<T>`委托（[链接到 msdn](http://msdn.microsoft.com/en-us/library/018hxwa8.aspx)）。

```
public void UpdateTestBox(string newText)
{
    if (InvokeRequired)
    {
        BeginInvoke(new Action<string>(UpdateTestBox), new object[] { newText });
        return;
    }
    tb_output.Text = newText;
} 
```

这样您就不需要维护自己的委托声明。

# c# - 文件名处理程序

> ID：906061
> 
> 赞同：1
> 
> 时间：2009-05-25T09:34:20.840
> 
> 标签：c#, filesystems, .net

当 windows 通过 Window Explorer 显示文件时，我需要能够在文件类型显示之前更改文件类型的图标。我见过像 SubVersion 和 Carbonite 这样的应用程序，根据它们的状态更改图标，但是你是怎么做到的呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-25T09:37:47.060

这需要一个“外壳扩展”，特别是一个“图标覆盖处理程序”；我自己没有做过，但也许搜索这些术语，或者看看[这个讨论](http://www.mombu.com/programming/c/t-c-shell-extension-handler-icon-overlay-handler-1568092.html)。

# javascript - 需要访问选中的复选框

> ID：906067
> 
> 赞同：0
> 
> 时间：2009-05-25T09:37:44.983
> 
> 标签：javascript, jquery

我需要获取已分配给已选中复选框的值，并且我已使用 for 循环来显示复选框，现在我需要访问仅选中的复选框的值，

有人可以帮我解决这个问题吗？

```
foreach($inbox as $inbox_info) 
{
    <input type="checkbox" id="checkUnread" name="checkUnread" value="<? echo $inbox_info['inbox_id'];?>" />
} 
```

我正在尝试做一个邮件收件箱功能，我需要获取选中其复选框的元素的 ID，以便我可以标记数据库中未读的那些元素

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-25T09:40:38.630

查看[`:checked selector`](http://docs.jquery.com/Selectors/checked)

```
$("input:checked").val() 
```

这是一个示例函数。

```
function checkValue()
{
    $('.boxes:checked').each(function(){
        alert($(this).val());
    });
} 
```

这适用于这个集合。

```
<input type="checkbox" class="boxes" value="1" />
<input type="checkbox" class="boxes" value="2" />
<input type="checkbox" class="boxes" value="3" />
<input type="checkbox" class="boxes" value="4" />
<input type="checkbox" class="boxes" value="5" />
<input type="button" onclick="return checkValue()" value="Check Value" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T18:40:51.453

为了阐述 edeverett 在这里所说的内容，我认为您并不需要复选框 ID。如果将每个复选框的值设置为消息 ID，则可以执行以下操作：

```
<input type="checkbox" name="checkUnread" value="message_id" /> 
```

然后检索这些值的数组，

```
var vals = $.map($('input:checked'), function(e){ return $(e).val(); }); 
```

看看这个[jsFiddle](http://jsfiddle.net/T8xgt/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-26T11:37:36.633

看起来您需要查看 html。

HTML 中的 id 属性必须是唯一的 - 每个页面只允许您使用每个 id 一次。看起来您的所有输入都使用 'checkUnread' 的 id，这将导致您的 Javascript 中出现错误（名称也可能是这种情况，除非在提交表单时未使用这些值）。

我建议您将唯一的 inbox_id 指定为输入的 id。然后，不要使用 Javascript 获取输入的值，而是获取 id。

# c# - 一般开发类库和专门开发数据库层的最佳实践是什么？

> ID：906076
> 
> 赞同：5
> 
> 时间：2009-05-25T09:40:54.183
> 
> 标签：c#, class-library

我将开发一个数据库层来公开一组功能，这些功能将提供对我们数据库的读写。我有一组与此相关的问题，我希望有人建议

1.  如何处理数据库异常？（即：超时异常）或让 dll 客户端处理它们

2.  dll 不是线程安全的，所以我应该为每个 dll 实例使用单个连接吗？因为这提高了性能。

3.  开发类库有什么通用规则吗？

我正在使用 C# vs2008 和 SQL2008

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-25T09:54:27.867

1：由你决定；你真的不能对它们做任何事情，所以我可能会让它们浮出水面，除非我*需要*对调用者隐藏它（用类似的、不太具体的例外替换它）

2：您应该尽可能保持“本地”和短暂的连接；通常每个方法调用一个。大多数提供程序都有连接池，这意味着您将获得相同的底层连接（只要您使用相同的连接字符串），而不必担心同步、重入等（它将根据需要分配更多连接）

3：查看存储库模式等模式；还可以查看 ORM 框架，如 LINQ-to-SQL、实体框架、NHibernate 等。

IE

```
Customer GetCustomer(int id) {
    using(var conn = CreateConnection()) {
        conn.Open();
        // etc
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-25T09:52:56.607

我要给你的唯一建议是，以前有人比我聪明得多，他们已经从陷阱中吸取了教训。也许您应该花时间阅读哪些框架可供您自定义，而不是滚动您自己的代码？

除此之外，我建议您认真考虑数据库层的使用者，确保他们不需要知道您的层内部到底发生了什么来确定要做什么。制作一个友好的可重用公共界面，这应该对您有很大帮助。

我还建议您仔细查看 Linq to SQL，因为使用它会使您的类库看起来完全不同，而不是使用 ADO.net 或 vanilla ORM。

# matlab - MATLAB：在不使用循环的情况下提取矩阵的多个部分

> ID：906077
> 
> 赞同：8
> 
> 时间：2009-05-25T09:42:11.170
> 
> 标签：matlab, matrix, extract

我有一个巨大的二维矩阵，我想从中提取 15 个不同的 100x100 部分。我有两个向量 x 和 y ，其中保存了零件的左上角索引。我用过这样的东西：

```
result = cam1(x(1:end):(x(1:end)+99), y(1:end):(y(1:end)+99)); 
```

但结果只是一个 100x100 矩阵而不是 15x100x100。为什么？

我知道它可以很容易地使用循环来完成，但我们不允许使用循环（这是图像处理练习的一部分）。另一种可能性是编写所有 15 行，但这有点难看。

你有什么优雅的解决方案吗？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-25T17:57:35.527

有很多方法可以在没有循环的情况下做到这一点。大多数解决方案涉及将向量**x**和**y**扩展为更大的索引矩阵，并且可能会使用一个或多个函数[REPMAT](http://www.mathworks.com/access/helpdesk/help/techdoc/ref/repmat.html)、[BSXFUN](http://www.mathworks.com/access/helpdesk/help/techdoc/ref/bsxfun.html)或[SUB2IND](http://www.mathworks.com/access/helpdesk/help/techdoc/ref/sub2ind.html)。矩阵索引的一个很好的教程可以在[这里](http://www.mathworks.com/company/newsletters/digest/sept01/matrix.html)找到。

但是，由于您要求一个*优雅*的解决方案，这里有一个有点不寻常的解决方案。它使用[匿名函数](http://www.mathworks.com/access/helpdesk/help/techdoc/matlab_prog/f4-70115.html)以及函数[ARRAYFUN](http://www.mathworks.com/access/helpdesk/help/techdoc/ref/arrayfun.html)和[CAT](http://www.mathworks.com/access/helpdesk/help/techdoc/ref/cat.html)：

```
indexFcn = @(r,c) cam1(r:(r+99),c:(c+99));
result = arrayfun(indexFcn,x,y,'UniformOutput',false);
result = cat(3,result{:}); 
```

**解释：**

第一行创建了一个*匿名函数*。这是一个简单的单行函数，可以即时创建，而无需将其放入 m 文件中。该函数定义了两个输入**r**和**c**，它们用于从**cam1**中提取一个 100×100 的子矩阵。变量**indexFcn**存储用于调用函数的[函数句柄。](http://www.mathworks.com/access/helpdesk/help/techdoc/ref/function_handle.html)请注意，匿名函数使用的**cam1的值是***static*。即使变量**cam1**中的值发生变化，匿名函数仍然使用创建函数时**cam1**中的值。

第二行调用 ARRAYFUN，它将一个函数应用于数组的每个元素。ARRAYFUN 循环遍历**x**和**y**中的每个条目，将值传递给**indexFcn**。输出存储在**result**中，这是一个 15 元素元胞数组，其中每个元胞包含一个 100×100 矩阵。

第三行使用 CAT 函数将 100×100 矩阵连接成 100×100×15 矩阵。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-25T13:30:15.560

由于这显然是作业，我不会给你完整的答案。

有几种方法可以索引到矩阵中。当您有这样的分散索引集时，您需要使用单个索引。因此，如果

```
A = rand(5,6)
A =
      0.81472      0.09754      0.15761      0.14189      0.65574      0.75774
      0.90579       0.2785      0.97059      0.42176     0.035712      0.74313
      0.12699      0.54688      0.95717      0.91574      0.84913      0.39223
      0.91338      0.95751      0.48538      0.79221      0.93399      0.65548
      0.63236      0.96489      0.80028      0.95949      0.67874      0.17119

A(3:4,3:4) 
```

将从 A 产生一个 2x2 子矩阵。但我们也可以找到该子矩阵

```
reshape(A([13 14 18 19]),[2 2])
ans =
      0.95717      0.91574
      0.48538      0.79221 
```

我为什么选择这个索引集？要获得答案，您需要阅读有关 sub2ind 的信息。

```
[I,J] = ndgrid(3:4,3:4);
sub2ind([5 6],I(:),J(:))
ans =
    13
    14
    18
    19 
```

最后，看起来您想要从提取的部分中获得一个 15x100x100 的数组。所以从我展示的部分构建必要的索引数组。您需要在最后进行最终重塑以使其成为正确的形状。

这应该给你足够的开始来完成你的作业。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T00:06:24.727

你认为一切都很难，试试这个：mat2cell

# configuration - Dynamics AX 2009 客户端配置文件启动路径问题

> ID：906078
> 
> 赞同：1
> 
> 时间：2009-05-25T09:42:54.677
> 
> 标签：configuration, client, axapta, dynamics-ax-2009

我需要启动具有不同配置的 MS Dynamics AX 2009 客户端以连接到不同的 AOS。
为此，我将客户端配置导出到一个 axc 文件中，该文件运行良好。
现在我想为我们网络中的所有客户端共享此文件，但它在某些客户端上不起作用，因为出于某种有趣的原因，Dynamics AX 二进制文件的路径被硬编码到客户端配置文件中。因此，在一台计算机上，AX 客户端安装在 C:\Program Files (x86)\Microsoft Dynamics AX\50\Client\Bin 中，在下一台计算机上安装在 C:\Program Files\Microsoft Dynamics AX\50\Client\Bin 中，该文件不起作用，因为 axc 中的路径与实际路径不同。

如何创建可在每台客户端计算机上运行的 axc 文件，以便我可以使用共享配置文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2010-02-03T13:37:20.837

我发现的唯一解决方法是将客户端安装在某些自定义路径中的每台计算机上，例如 c:\ax，而不是将其安装到程序文件中。

丑陋的。我真的希望微软能在未来的某个版本中解决这个问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2010-02-04T15:08:29.050

您可以使用 NTFS 中的连接点将“Program Files (x86)”指向 32 位客户端上的“Program Files”。连接点基本上是 UNIX 符号链接的 Windows 等效项。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-09T10:06:44.900

如果您设法将注册表项部署到客户端，那么解决方案是这样的：

1.  从注册表中导出有问题的 AX 配置（通常可以在 HKCU\Software\Microsoft\Dynamics\5.0\Configuration 中找到），将其导入目标计算机（在域登录期间等...）
2.  创建到 Ax32 应用程序的 lnk，并提供命令行参数：-regconfig=<typeTheConfigNameHere>
    例如：Ax32.exe -regconfig=LIVE

既然我输入了这个，我意识到这个解决方案还有一个问题，那就是那些路径......但是很容易创建和维护两个版本的 lnk 文件（一个用于 32 位环境，另一个用于 64 位环境）.. .和注册表是一样的。希望能帮助到你！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-12-01T22:48:42.120

我正在使用我的开发环境设置的以下结构，我想这就是你要找的。

下面是例子。

* * *

服务器名称：SRV01 在该服务器上为 ex 创建文件夹。AX5 并共享该文件夹。文件夹结构：

```
AX5
--Application
----Appl
------Application_1 <- here is your *.aod file(-s)
------Application_2 <- here is your *.aod file(-s)

--AXC
------Application_1
-------- usr.axc configuration file <- save your configuration here
-------- cus.axc configuration file <- save your configuration here
------Application_2 
-------- *.axc configuration file <- save your configuration here

--Client <- here is your Ax32.exe.
--Server <- here is your Ax32Serv.exe
--StartUp
------Application_1
-------- usr.bat with one line. In this case this would be \\SRV01\AX5\Client\Bin\Ax32.exe \\SRV01\AX5\AXC\Application_1\usr.axc
-------- cus.bat with one line. In this case this would be \\SRV01\AX5\Client\Bin\Ax32.exe \\SRV01\AX5\AXC\Application_1\cus.axc
------Application_2
-------- *.bat with one line. In this case this would be \\SRV01\AX5\Client\Bin\Ax32.exe \\SRV01\AX5\AXC\Application_1\*.axc 
```

这是 *.axc 文件的示例

```
Configuration export file for Dynamics
Formatversion: 1
Configuration: usr.axc
    logdir,Text,C:\Users\Public\Microsoft\Dynamics Ax\Log\ <------------- change this but it's up to you
    company,Text,
    startupcmd,Text,
    extracmdline,Text,
    startupmsg,Text,
    aos2,Text,AOS_Instance_Name@SRV01:2712 <------------- change this
    aosencryption,Text,1
    xppdebug,Text,1
    globalbreakpoints,Int,1
    aol,Text,usr
    aolcode,Text,
    traceeventsenabled,Text,1
    tracestart,Int,0
    tracexppmethodcalldepth,Text,3
    client,Text,thin
    _clientmode,Int,0
    sql,Int,1
    native,Int,0
    hassqlpwd,Int,0
    localappldoc,Int,0
    localsysdoc,Int,0
    applshare,Int,1
    applexclusive,Int,0
    hascompwd,Int,0
    hasserveridletimeout,Int,0
    allowunauth,Int,0
    windowsauth,Text,1
    sqloraclefirstrowsfix,Text,0
    hasocipwd,Int,0
    dbunicodeenabled,Text,1
    cachesynctime,Text,
    caslevel,Text,enable
    language,Text,
    _clientadname,Text,
    aos,Text,
    application,Text,
    bindir,Text,\\SRV01\AX5\Client\Bin <------------- change this
    broadcast,Text,
    compwd,Text,
    connectionidletimeout,Text,
    createdsn,Text,
    database,Text,AXDB   <------------- change this
    datadir,Text,\\SRV01\AX5\Client\Data  <------------- change this
    dbcli,Text,odbc
    dbserver,Text,SRV01  <------------- change this
    directory,Text,\\SRV01\AX5\Client  <------------- change this
    dsn,Text,
    exposeserverprinters,Int,0
    fetchahead,Text,
    haswarnings,Int,0
    hint,Text,
    ignoredatasourceindex,Text,0
    installationlanguage,Text,EN-US
    internet,Text,SRV01
    log,Text,
    newconnectionretrycount,Text,
    newconnectionretrydelayms,Text,
    ociconnectservice,Text,1
    ocidbid,Text,
    ocihost,Text,
    ociservice,Text,
    ocitcpipport,Text,1521
    opencursors,Text,
    port,Text,
    preloadthresholdmsec,Text,
    preloadthresholdrecords,Text,
    querytimelimit,Text,
    retry,Text,
    serveridletimeout,Text,
    servermask,Text,2712  <------------- change this
    sqlbuffer,Text,
    sqlcomplexliterals,Text,1
    sqlformliterals,Text,1
    sqlpwd,Text,
    sqltrace,Text,0
    sqluser,Text,
    user,Text,
    warnings,Text,
    tracemaxfilesize,Text,10000
    tracebuffersize,Text,1024
    tracemaxbuffers,Text,120
    traceminbuffers,Text,30
    traceallowclient,Int,0 
```

重要提示：在每台客户端 PC 上安装 AX 2009 客户端。安装时，系统会要求您说明 AOS - 说明任何值。需要此本地安装的 AX 2009 客户端，因为它使用 GAC 中没有的几个附加程序集。

最后 - 如何启动 AX？只需运行 *.bat 文件。希望我足够清楚，希望我明白你在找什么））

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-25T12:13:34.950

只需放置两条路径：

```
directory,Text,C:\Program Files\Microsoft Dynamics AX\50\Client
directory,Text,C:\Program Files (x86)\Microsoft Dynamics AX\50\Client\Bin 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-25T13:16:36.697

怎么样

C:\Progra~1\Microsoft Dynamics AX\50\Client

# wsdl - 使用 svcutil 生成 WebService 代理的问题

> ID：906082
> 
> 赞同：9
> 
> 时间：2009-05-25T09:43:40.620
> 
> 标签：wsdl, wcf-client, svcutil.exe

在我们的应用程序中，我们被迫使用多个 WebService。一开始我们只使用了“添加服务引用”菜单选项，以创建 WCF 代理。

该向导没有生成 DataContract，而是生成了一个 XML-Serializable 类。到目前为止，很糟糕，但这不是杀手。但是，后来我们注意到，我们正在丢失数据，因为生成的代理在归因时添加了 Order 属性，这导致了问题。

现在我们尝试使用 SVCUTIL.EXE 从 WSDL 生成代理类，但我们总是收到以下错误消息：

```
 C:\temp\WSDL>svcutil /serializer:DataContractSerializer ReadSddsAddressOut.wsdl
Microsoft (R) Service Model Metadata Tool
[Microsoft (R) Windows (R) Communication Foundation, Version 3.0.4506.2152]
Copyright (c) Microsoft Corporation.  All rights reserved.

Warning: Das optionale WSDL-Erweiterungselement "body" aus Namespace "http://schemas.xmlsoap.org/wsdl/soap/" wurde nicht behandelt.
XPath: //wsdl:definitions[@targetNamespace='http://post.ch/sdds/address']/wsdl:binding[@name='ReadSddsAddressOutBinding']/wsdl:operation[@name='GeoSuchKanton']/wsdl:input

Warning: Das optionale WSDL-Erweiterungselement "body" aus Namespace "http://schemas.xmlsoap.org/wsdl/soap/" wurde nicht behandelt.
XPath: //wsdl:definitions[@targetNamespace='http://post.ch/sdds/address']/wsdl:binding[@name='ReadSddsAddressOutBinding']/wsdl:operation[@name='GeoSuchKanton']/wsdl:output

Warning: Das optionale WSDL-Erweiterungselement "body" aus Namespace "http://schemas.xmlsoap.org/wsdl/soap/" wurde nicht behandelt.
XPath: //wsdl:definitions[@targetNamespace='http://post.ch/sdds/address']/wsdl:binding[@name='ReadSddsAddressOutBinding']/wsdl:operation[@name='GeoSuchPlz']/wsdl:input

Warning: Das optionale WSDL-Erweiterungselement "body" aus Namespace "http://schemas.xmlsoap.org/wsdl/soap/" wurde nicht behandelt.
XPath: //wsdl:definitions[@targetNamespace='http://post.ch/sdds/address']/wsdl:binding[@name='ReadSddsAddressOutBinding']/wsdl:operation[@name='GeoSuchPlz']/wsdl:output

Warning: Das optionale WSDL-Erweiterungselement "body" aus Namespace "http://schemas.xmlsoap.org/wsdl/soap/" wurde nicht behandelt.
XPath: //wsdl:definitions[@targetNamespace='http://post.ch/sdds/address']/wsdl:binding[@name='ReadSddsAddressOutBinding']/wsdl:operation[@name='GeoSuchNation']/wsdl:input

Warning: Das optionale WSDL-Erweiterungselement "body" aus Namespace "http://schemas.xmlsoap.org/wsdl/soap/" wurde nicht behandelt.
XPath: //wsdl:definitions[@targetNamespace='http://post.ch/sdds/address']/wsdl:binding[@name='ReadSddsAddressOutBinding']/wsdl:operation[@name='GeoSuchNation']/wsdl:output

Warning: Das optionale WSDL-Erweiterungselement "body" aus Namespace "http://schemas.xmlsoap.org/wsdl/soap/" wurde nicht behandelt.
XPath: //wsdl:definitions[@targetNamespace='http://post.ch/sdds/address']/wsdl:binding[@name='ReadSddsAddressOutBinding']/wsdl:operation[@name='GeoSuchAdr']/wsdl:input

Warning: Das optionale WSDL-Erweiterungselement "body" aus Namespace "http://schemas.xmlsoap.org/wsdl/soap/" wurde nicht behandelt.
XPath: //wsdl:definitions[@targetNamespace='http://post.ch/sdds/address']/wsdl:binding[@name='ReadSddsAddressOutBinding']/wsdl:operation[@name='GeoSuchAdr']/wsdl:output

Warning: Das optionale WSDL-Erweiterungselement "body" aus Namespace "http://schemas.xmlsoap.org/wsdl/soap/" wurde nicht behandelt.
XPath: //wsdl:definitions[@targetNamespace='http://post.ch/sdds/address']/wsdl:binding[@name='ReadSddsAddressOutBinding']/wsdl:operation[@name='GeoSuchPkt']/wsdl:input

Warning: Das optionale WSDL-Erweiterungselement "body" aus Namespace "http://schemas.xmlsoap.org/wsdl/soap/" wurde nicht behandelt.
XPath: //wsdl:definitions[@targetNamespace='http://post.ch/sdds/address']/wsdl:binding[@name='ReadSddsAddressOutBinding']/wsdl:operation[@name='GeoSuchPkt']/wsdl:output

Generating files...
C:\temp\WSDL\ReadSddsAddressOut.cs
C:\temp\WSDL\output.config 
```

英文的错误信息是这样的

“未处理来自命名空间‘ [http://schemas.xmlsoap.org/wsdl/soap/ ’的可选 WSDL 扩展元素‘body’。”](http://schemas.xmlsoap.org/wsdl/soap/)

原始 WSDL 如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<wsdl:definitions name="ReadSddsAddressOut" targetNamespace="http://post.ch/sdds/address" xmlns:p2="http://post.ch/sdds" xmlns:p1="http://post.ch/sdds/address" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/">
    <wsdl:documentation/>
    <wsdl:types>
        <xsd:schema targetNamespace="http://post.ch/sdds" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://post.ch/sdds">
            <xsd:element name="ZuboGeoKantonReq">
                <xsd:complexType>
                    <xsd:sequence>
                        <xsd:element name="GEOKTNID" type="xsd:string" minOccurs="0"/>
                        <xsd:element name="GEOKTNBEZ" type="xsd:string" minOccurs="0"/>
                        <xsd:element name="maxRows" type="xsd:integer" minOccurs="0"/>
                    </xsd:sequence>
                </xsd:complexType>
            </xsd:element>
            <xsd:element name="ZuboGeoPktReq">
                <xsd:complexType>
                    <xsd:sequence>
                        <xsd:element name="GEOPKTID" type="xsd:integer" minOccurs="0"/>
                        <xsd:element name="GEOADRID" type="xsd:integer" minOccurs="0"/>
                        <xsd:element name="GEOKTNID" type="xsd:string" minOccurs="0"/>
                        <xsd:element name="GEOKTNBEZ" type="xsd:string" minOccurs="0"/>
                        <xsd:element name="GEOPLZPLZ" type="xsd:string" minOccurs="0"/>
                        <xsd:element name="GEOPLZPLZ4" type="xsd:string" minOccurs="0"/>
                        <xsd:element name="GEOPLZORT39" type="xsd:string" minOccurs="0"/>
                        <xsd:element name="GEOSTRBEZ" type="xsd:string" minOccurs="0"/>
                        <xsd:element name="GEOADRSTRNRT" type="xsd:string" minOccurs="0"/>
                        <xsd:element name="GEOADRCMT" type="xsd:string" minOccurs="0"/>
                        <xsd:element name="GEOPKTKORX" type="xsd:decimal" minOccurs="0"/>
                        <xsd:element name="GEOPKTKORY" type="xsd:decimal" minOccurs="0"/>
                        <xsd:element name="GEOPKTKORZ" type="xsd:decimal" minOccurs="0"/>
                        <xsd:element name="GEOPKTTYP" type="xsd:integer" minOccurs="0"/>
                        <xsd:element name="GEOPKTMAIN" type="xsd:boolean" minOccurs="0"/>
                        <xsd:element name="withDeletedPkt" type="xsd:boolean" minOccurs="0"/>
                        <xsd:element name="maxRows" type="xsd:integer" minOccurs="0"/>
                    </xsd:sequence>
                </xsd:complexType>
            </xsd:element>
            <xsd:element name="ZuboGeoNationResp">
                <xsd:complexType>
                    <xsd:sequence>
                        <xsd:element name="ErrorCode" type="xsd:integer"/>
                        <xsd:element name="ErrorText" type="xsd:string" minOccurs="0"/>
                        <xsd:element name="DataSet">
                            <xsd:complexType>
                                <xsd:sequence maxOccurs="unbounded">
                                    <xsd:element name="row" minOccurs="0">
                                        <xsd:complexType>
                                            <xsd:sequence>
                                                <xsd:element name="GEONATID" type="xsd:string"/>
                                                <xsd:element name="GEONATBEZ" type="xsd:string"/>
                                            </xsd:sequence>
                                        </xsd:complexType>
                                    </xsd:element>
                                </xsd:sequence>
                            </xsd:complexType>
                        </xsd:element>
                    </xsd:sequence>
                </xsd:complexType>
            </xsd:element>
            <xsd:element name="ZuboGeoKantonResp">
                <xsd:complexType>
                    <xsd:sequence>
                        <xsd:element name="ErrorCode" type="xsd:integer"/>
                        <xsd:element name="ErrorText" type="xsd:string" minOccurs="0"/>
                        <xsd:element name="DataSet">
                            <xsd:complexType>
                                <xsd:sequence maxOccurs="unbounded">
                                    <xsd:element name="row" minOccurs="0">
                                        <xsd:complexType>
                                            <xsd:sequence>
                                                <xsd:element name="GEOKTNID" type="xsd:string"/>
                                                <xsd:element name="GEOKTNBEZ" type="xsd:string"/>
                                                <xsd:element name="GEONATID" type="xsd:string"/>
                                                <xsd:element name="GEONATBEZ" type="xsd:string"/>
                                            </xsd:sequence>
                                        </xsd:complexType>
                                    </xsd:element>
                                </xsd:sequence>
                            </xsd:complexType>
                        </xsd:element>
                    </xsd:sequence>
                </xsd:complexType>
            </xsd:element>
            <xsd:element name="ZuboGeoPlzResp">
                <xsd:complexType>
                    <xsd:sequence>
                        <xsd:element name="ErrorCode" type="xsd:integer"/>
                        <xsd:element name="ErrorText" type="xsd:string" minOccurs="0"/>
                        <xsd:element name="DataSet">
                            <xsd:complexType>
                                <xsd:sequence maxOccurs="unbounded">
                                    <xsd:element name="row" minOccurs="0">
                                        <xsd:complexType>
                                            <xsd:sequence>
                                                <xsd:element name="GEOPLZPLZ" type="xsd:string"/>
                                                <xsd:element name="GEOPLZPLZ4" type="xsd:string"/>
                                                <xsd:element name="GEOPLZONRP" type="xsd:integer"/>
                                                <xsd:element name="GEOPLZSPRCOD1" type="xsd:integer"/>
                                                <xsd:element name="GEOPLZSPRCOD2" type="xsd:integer" minOccurs="0"/>
                                                <xsd:element name="GEOPLZORT18" type="xsd:string"/>
                                                <xsd:element name="GEOPLZORT27" type="xsd:string"/>
                                                <xsd:element name="GEOPLZORT39" type="xsd:string"/>
                                                <xsd:element name="GEOPLZPLZTYP" type="xsd:integer"/>
                                                <xsd:element name="GEOKTNID" type="xsd:string" minOccurs="0"/>
                                                <xsd:element name="GEOKTNBEZ" type="xsd:string" minOccurs="0"/>
                                                <xsd:element name="GEONATID" type="xsd:string"/>
                                                <xsd:element name="GEONATBEZ" type="xsd:string"/>
                                                <xsd:element name="GEOPLZSTATUS" type="xsd:integer"/>
                                            </xsd:sequence>
                                        </xsd:complexType>
                                    </xsd:element>
                                </xsd:sequence>
                            </xsd:complexType>
                        </xsd:element>
                    </xsd:sequence>
                </xsd:complexType>
            </xsd:element>
            <xsd:element name="ZuboGeoPktResp">
                <xsd:complexType>
                    <xsd:sequence>
                        <xsd:element name="ErrorCode" type="xsd:integer"/>
                        <xsd:element name="ErrorText" type="xsd:string" minOccurs="0"/>
                        <xsd:element name="DataSet">
                            <xsd:complexType>
                                <xsd:sequence maxOccurs="unbounded">
                                    <xsd:element name="row" minOccurs="0">
                                        <xsd:complexType>
                                            <xsd:sequence>
                                                <xsd:element name="GEOPKTID" type="xsd:integer"/>
                                                <xsd:element name="GEOPKTBEZ" type="xsd:string" minOccurs="0"/>
                                                <xsd:element name="GEOPKTKORX" type="xsd:decimal"/>
                                                <xsd:element name="GEOPKTKORY" type="xsd:decimal"/>
                                                <xsd:element name="GEOPKTKORZ" type="xsd:decimal" minOccurs="0"/>
                                                <xsd:element name="GEOPKTSTK" type="xsd:integer" minOccurs="0"/>
                                                <xsd:element name="GEOPKTWOH" type="xsd:integer" minOccurs="0"/>
                                                <xsd:element name="GEOPKTTYP" type="xsd:integer" minOccurs="0"/>
                                                <xsd:element name="GEOPKTMAIN" type="xsd:boolean"/>
                                                <xsd:element name="GEOADRID" type="xsd:integer" minOccurs="0"/>
                                                <xsd:element name="GEOSTRBEZ" type="xsd:string" minOccurs="0"/>
                                                <xsd:element name="GEOSTRTYP" type="xsd:integer" minOccurs="0"/>
                                                <xsd:element name="GEOADRSTRNR" type="xsd:integer" minOccurs="0"/>
                                                <xsd:element name="GEOADRSTRNRZ" type="xsd:string" minOccurs="0"/>
                                                <xsd:element name="GEOADRSTRNRT" type="xsd:string" minOccurs="0"/>
                                                <xsd:element name="GEOADRHAUSN" type="xsd:string" minOccurs="0"/>
                                                <xsd:element name="GEOADRGEBFLG" type="xsd:boolean" minOccurs="0"/>
                                                <xsd:element name="GEOADRLAGFLG" type="xsd:boolean" minOccurs="0"/>
                                                <xsd:element name="GEOADRCMT" type="xsd:string" minOccurs="0"/>
                                                <xsd:element name="GEOADRHAUSKEY" type="xsd:integer" minOccurs="0"/>
                                                <xsd:element name="GEOADRGPOID" type="xsd:integer" minOccurs="0"/>
                                                <xsd:element name="GEOPLZPLZ" type="xsd:string" minOccurs="0"/>
                                                <xsd:element name="GEOPLZPLZ4" type="xsd:string" minOccurs="0"/>
                                                <xsd:element name="GEOPLZONRP" type="xsd:integer" minOccurs="0"/>
                                                <xsd:element name="GEOPLZSPRCOD1" type="xsd:integer" minOccurs="0"/>
                                                <xsd:element name="GEOPLZSPRCOD2" type="xsd:integer" minOccurs="0"/>
                                                <xsd:element name="GEOPLZORT18" type="xsd:string" minOccurs="0"/>
                                                <xsd:element name="GEOPLZORT27" type="xsd:string" minOccurs="0"/>
                                                <xsd:element name="GEOPLZORT39" type="xsd:string" minOccurs="0"/>
                                                <xsd:element name="GEOPLZPLZTYP" type="xsd:integer" minOccurs="0"/>
                                                <xsd:element name="GEOKTNID" type="xsd:string" minOccurs="0"/>
                                                <xsd:element name="GEOKTNBEZ" type="xsd:string" minOccurs="0"/>
                                                <xsd:element name="GEONATID" type="xsd:string" minOccurs="0"/>
                                                <xsd:element name="GEONATBEZ" type="xsd:string" minOccurs="0"/>
                                                <xsd:element name="GEOPKTSTATUS" type="xsd:integer"/>
                                            </xsd:sequence>
                                        </xsd:complexType>
                                    </xsd:element>
                                </xsd:sequence>
                            </xsd:complexType>
                        </xsd:element>
                    </xsd:sequence>
                </xsd:complexType>
            </xsd:element>
            <xsd:element name="ZuboGeoPlzReq">
                <xsd:complexType>
                    <xsd:sequence>
                        <xsd:element name="GEOPLZPLZ" type="xsd:string" minOccurs="0"/>
                        <xsd:element name="GEOPLZPLZ4" type="xsd:string" minOccurs="0"/>
                        <xsd:element name="GEOPLZORT39" type="xsd:string" minOccurs="0"/>
                        <xsd:element name="maxRows" type="xsd:integer" minOccurs="0"/>
                    </xsd:sequence>
                </xsd:complexType>
            </xsd:element>
            <xsd:element name="ZuboGeoNationReq">
                <xsd:complexType>
                    <xsd:sequence>
                        <xsd:element name="GEONATID" type="xsd:string" minOccurs="0"/>
                        <xsd:element name="GEONATBEZ" type="xsd:string" minOccurs="0"/>
                        <xsd:element name="maxRows" type="xsd:integer" minOccurs="0"/>
                    </xsd:sequence>
                </xsd:complexType>
            </xsd:element>
            <xsd:element name="ZuboGeoAdrResp">
                <xsd:complexType>
                    <xsd:sequence>
                        <xsd:element name="ErrorCode" type="xsd:integer"/>
                        <xsd:element name="ErrorText" type="xsd:string" minOccurs="0"/>
                        <xsd:element name="DataSet">
                            <xsd:complexType>
                                <xsd:sequence maxOccurs="unbounded">
                                    <xsd:element name="row" minOccurs="0">
                                        <xsd:complexType>
                                            <xsd:sequence>
                                                <xsd:element name="GEOADRID" type="xsd:integer"/>
                                                <xsd:element name="GEOSTRBEZ" type="xsd:string" minOccurs="0"/>
                                                <xsd:element name="GEOSTRTYP" type="xsd:integer" minOccurs="0"/>
                                                <xsd:element name="GEOADRSTRNR" type="xsd:integer" minOccurs="0"/>
                                                <xsd:element name="GEOADRSTRNRZ" type="xsd:string" minOccurs="0"/>
                                                <xsd:element name="GEOADRSTRNRT" type="xsd:string" minOccurs="0"/>
                                                <xsd:element name="GEOADRSTRHAUSN" type="xsd:string" minOccurs="0"/>
                                                <xsd:element name="GEOADRGEBFLG" type="xsd:boolean" minOccurs="0"/>
                                                <xsd:element name="GEOADRLAGFLG" type="xsd:boolean" minOccurs="0"/>
                                                <xsd:element name="GEOADRCMT" type="xsd:string" minOccurs="0"/>
                                                <xsd:element name="GEOADRHAUSKEY" type="xsd:integer"/>
                                                <xsd:element name="GEOADRGPOID" type="xsd:integer" minOccurs="0"/>
                                                <xsd:element name="GEOPLZPLZ" type="xsd:string" minOccurs="0"/>
                                                <xsd:element name="GEOPLZPLZ4" type="xsd:string" minOccurs="0"/>
                                                <xsd:element name="GEOPLZONRP" type="xsd:integer" minOccurs="0"/>
                                                <xsd:element name="GEOPLZSPRCOD1" type="xsd:integer" minOccurs="0"/>
                                                <xsd:element name="GEOPLZSPRCOD2" type="xsd:integer" minOccurs="0"/>
                                                <xsd:element name="GEOPLZORT18" type="xsd:string" minOccurs="0"/>
                                                <xsd:element name="GEOPLZORT27" type="xsd:string" minOccurs="0"/>
                                                <xsd:element name="GEOPLZORT39" type="xsd:string" minOccurs="0"/>
                                                <xsd:element name="GEOPLZPLZTYP" type="xsd:integer" minOccurs="0"/>
                                                <xsd:element name="GEOKTNID" type="xsd:string" minOccurs="0"/>
                                                <xsd:element name="GEOKTNBEZ" type="xsd:string" minOccurs="0"/>
                                                <xsd:element name="GEONATID" type="xsd:string" minOccurs="0"/>
                                                <xsd:element name="GEONATBEZ" type="xsd:string" minOccurs="0"/>
                                                <xsd:element name="GEOADRSTATUS" type="xsd:integer"/>
                                            </xsd:sequence>
                                        </xsd:complexType>
                                    </xsd:element>
                                </xsd:sequence>
                            </xsd:complexType>
                        </xsd:element>
                    </xsd:sequence>
                </xsd:complexType>
            </xsd:element>
            <xsd:element name="ZuboGeoAdrReq">
                <xsd:complexType>
                    <xsd:sequence>
                        <xsd:element name="GEOADRID" type="xsd:integer" minOccurs="0"/>
                        <xsd:element name="GEOKTNID" type="xsd:string" minOccurs="0"/>
                        <xsd:element name="GEOKTNBEZ" type="xsd:string" minOccurs="0"/>
                        <xsd:element name="GEOPLZPLZ" type="xsd:string" minOccurs="0"/>
                        <xsd:element name="GEOPLZPLZ4" type="xsd:string" minOccurs="0"/>
                        <xsd:element name="GEOPLZORT39" type="xsd:string" minOccurs="0"/>
                        <xsd:element name="GEOSTRBEZ" type="xsd:string" minOccurs="0"/>
                        <xsd:element name="GEOADRSTRNRT" type="xsd:string" minOccurs="0"/>
                        <xsd:element name="GEOADRCMT" type="xsd:string" minOccurs="0"/>
                        <xsd:element name="withDeletedAdr" type="xsd:boolean" minOccurs="0"/>
                        <xsd:element name="maxRows" type="xsd:integer" minOccurs="0"/>
                    </xsd:sequence>
                </xsd:complexType>
            </xsd:element>
        </xsd:schema>
    </wsdl:types>
    <wsdl:message name="p2.ZuboGeoKantonReq">
        <wsdl:documentation/>
        <wsdl:part name="ZuboGeoKantonReq" element="p2:ZuboGeoKantonReq"/>
    </wsdl:message>
    <wsdl:message name="p2.ZuboGeoKantonResp">
        <wsdl:documentation/>
        <wsdl:part name="ZuboGeoKantonResp" element="p2:ZuboGeoKantonResp"/>
    </wsdl:message>
    <wsdl:message name="p2.ZuboGeoPlzReq">
        <wsdl:documentation/>
        <wsdl:part name="ZuboGeoPlzReq" element="p2:ZuboGeoPlzReq"/>
    </wsdl:message>
    <wsdl:message name="p2.ZuboGeoPlzResp">
        <wsdl:documentation/>
        <wsdl:part name="ZuboGeoPlzResp" element="p2:ZuboGeoPlzResp"/>
    </wsdl:message>
    <wsdl:message name="p2.ZuboGeoNationReq">
        <wsdl:documentation/>
        <wsdl:part name="ZuboGeoNationReq" element="p2:ZuboGeoNationReq"/>
    </wsdl:message>
    <wsdl:message name="p2.ZuboGeoNationResp">
        <wsdl:documentation/>
        <wsdl:part name="ZuboGeoNationResp" element="p2:ZuboGeoNationResp"/>
    </wsdl:message>
    <wsdl:message name="p2.ZuboGeoAdrReq">
        <wsdl:documentation/>
        <wsdl:part name="ZuboGeoAdrReq" element="p2:ZuboGeoAdrReq"/>
    </wsdl:message>
    <wsdl:message name="p2.ZuboGeoAdrResp">
        <wsdl:documentation/>
        <wsdl:part name="ZuboGeoAdrResp" element="p2:ZuboGeoAdrResp"/>
    </wsdl:message>
    <wsdl:message name="p2.ZuboGeoPktReq">
        <wsdl:documentation/>
        <wsdl:part name="ZuboGeoPktReq" element="p2:ZuboGeoPktReq"/>
    </wsdl:message>
    <wsdl:message name="p2.ZuboGeoPktResp">
        <wsdl:documentation/>
        <wsdl:part name="ZuboGeoPktResp" element="p2:ZuboGeoPktResp"/>
    </wsdl:message>
    <wsdl:portType name="ReadSddsAddressOut">
        <wsdl:documentation/>
        <wsdl:operation name="GeoSuchKanton">
            <wsdl:documentation/>
            <wsdl:input message="p1:p2.ZuboGeoKantonReq"/>
            <wsdl:output message="p1:p2.ZuboGeoKantonResp"/>
        </wsdl:operation>
        <wsdl:operation name="GeoSuchPlz">
            <wsdl:documentation/>
            <wsdl:input message="p1:p2.ZuboGeoPlzReq"/>
            <wsdl:output message="p1:p2.ZuboGeoPlzResp"/>
        </wsdl:operation>
        <wsdl:operation name="GeoSuchNation">
            <wsdl:documentation/>
            <wsdl:input message="p1:p2.ZuboGeoNationReq"/>
            <wsdl:output message="p1:p2.ZuboGeoNationResp"/>
        </wsdl:operation>
        <wsdl:operation name="GeoSuchAdr">
            <wsdl:documentation/>
            <wsdl:input message="p1:p2.ZuboGeoAdrReq"/>
            <wsdl:output message="p1:p2.ZuboGeoAdrResp"/>
        </wsdl:operation>
        <wsdl:operation name="GeoSuchPkt">
            <wsdl:documentation/>
            <wsdl:input message="p1:p2.ZuboGeoPktReq"/>
            <wsdl:output message="p1:p2.ZuboGeoPktResp"/>
        </wsdl:operation>
    </wsdl:portType>
    <wsdl:binding name="ReadSddsAddressOutBinding" type="p1:ReadSddsAddressOut">
        <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"/>
        <wsdl:operation name="GeoSuchKanton">
            <soap:operation soapAction="http://sap.com/xi/WebService/soap1.1" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"/>
            <wsdl:input>
                <soap:body use="literal" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"/>
            </wsdl:input>
            <wsdl:output>
                <soap:body use="literal" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"/>
            </wsdl:output>
        </wsdl:operation>
        <wsdl:operation name="GeoSuchPlz">
            <soap:operation soapAction="http://sap.com/xi/WebService/soap1.1" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"/>
            <wsdl:input>
                <soap:body use="literal" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"/>
            </wsdl:input>
            <wsdl:output>
                <soap:body use="literal" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"/>
            </wsdl:output>
        </wsdl:operation>
        <wsdl:operation name="GeoSuchNation">
            <soap:operation soapAction="http://sap.com/xi/WebService/soap1.1" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"/>
            <wsdl:input>
                <soap:body use="literal" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"/>
            </wsdl:input>
            <wsdl:output>
                <soap:body use="literal" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"/>
            </wsdl:output>
        </wsdl:operation>
        <wsdl:operation name="GeoSuchAdr">
            <soap:operation soapAction="http://sap.com/xi/WebService/soap1.1" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"/>
            <wsdl:input>
                <soap:body use="literal" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"/>
            </wsdl:input>
            <wsdl:output>
                <soap:body use="literal" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"/>
            </wsdl:output>
        </wsdl:operation>
        <wsdl:operation name="GeoSuchPkt">
            <soap:operation soapAction="http://sap.com/xi/WebService/soap1.1" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"/>
            <wsdl:input>
                <soap:body use="literal" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"/>
            </wsdl:input>
            <wsdl:output>
                <soap:body use="literal" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"/>
            </wsdl:output>
        </wsdl:operation>
    </wsdl:binding>
    <wsdl:service name="ReadSddsAddressOutService">
        <wsdl:port name="ReadSddsAddressOutPort" binding="p1:ReadSddsAddressOutBinding">
            <soap:address location="http://h03kyq:51000/XISOAPAdapter/MessageServlet?channel=:SDDS_DEV:ssReadSddsAddress" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"/>
        </wsdl:port>
    </wsdl:service>
</wsdl:definitions> 
```

（拧）代理类看起来像这样：

```
//------------------------------------------------------------------------------
// <auto-generated>
//     Dieser Code wurde von einem Tool generiert.
//     Laufzeitversion:2.0.50727.3074
//
//     Änderungen an dieser Datei können falsches Verhalten verursachen und gehen verloren, wenn
//     der Code erneut generiert wird.
// </auto-generated>
//------------------------------------------------------------------------------

[System.CodeDom.Compiler.GeneratedCodeAttribute("System.ServiceModel", "3.0.0.0")]
[System.ServiceModel.ServiceContractAttribute(Namespace="http://post.ch/sdds/address", ConfigurationName="ReadSddsAddressOut")]
public interface ReadSddsAddressOut
{

    [System.ServiceModel.OperationContractAttribute()]
    void GeoSuchKanton();

    [System.ServiceModel.OperationContractAttribute()]
    void GeoSuchPlz();

    [System.ServiceModel.OperationContractAttribute()]
    void GeoSuchNation();

    [System.ServiceModel.OperationContractAttribute()]
    void GeoSuchAdr();

    [System.ServiceModel.OperationContractAttribute()]
    void GeoSuchPkt();
}

[System.CodeDom.Compiler.GeneratedCodeAttribute("System.ServiceModel", "3.0.0.0")]
public interface ReadSddsAddressOutChannel : ReadSddsAddressOut, System.ServiceModel.IClientChannel
{
}

[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.CodeDom.Compiler.GeneratedCodeAttribute("System.ServiceModel", "3.0.0.0")]
public partial class ReadSddsAddressOutClient : System.ServiceModel.ClientBase<ReadSddsAddressOut>, ReadSddsAddressOut
{

    public ReadSddsAddressOutClient()
    {
    }

    public ReadSddsAddressOutClient(string endpointConfigurationName) : 
            base(endpointConfigurationName)
    {
    }

    public ReadSddsAddressOutClient(string endpointConfigurationName, string remoteAddress) : 
            base(endpointConfigurationName, remoteAddress)
    {
    }

    public ReadSddsAddressOutClient(string endpointConfigurationName, System.ServiceModel.EndpointAddress remoteAddress) : 
            base(endpointConfigurationName, remoteAddress)
    {
    }

    public ReadSddsAddressOutClient(System.ServiceModel.Channels.Binding binding, System.ServiceModel.EndpointAddress remoteAddress) : 
            base(binding, remoteAddress)
    {
    }

    public void GeoSuchKanton()
    {
        base.Channel.GeoSuchKanton();
    }

    public void GeoSuchPlz()
    {
        base.Channel.GeoSuchPlz();
    }

    public void GeoSuchNation()
    {
        base.Channel.GeoSuchNation();
    }

    public void GeoSuchAdr()
    {
        base.Channel.GeoSuchAdr();
    }

    public void GeoSuchPkt()
    {
        base.Channel.GeoSuchPkt();
    }
} 
```

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2009-05-30T03:19:28.590

wsdl 使用的模式不符合 Data Contract Serializer 的[Schema Reference](http://msdn.microsoft.com/en-us/library/ms733112.aspx)。

问题：

1.  “所有元素都必须符合 DataContractSerializer 支持的架构”。

    您的架构省略了标签上的 elementFormDefault 属性，因此默认值“不合格”有效。您需要将以下属性名称/值对添加到 <schema> 元素，以便 Data Contract Serializer (DCS) 可以解析本地元素/类型。

    **elementFormDefault="合格"**

2.  <sequence> 标签上的 maxOccurs 和 minOccurs 属性必须为 1 或省略（默认为 1）。

    因此，删除 <sequence> 上的 maxOccurs="unbounded"。

3.  在 <row> 标记上添加 maxOccurs="unbounded" 以获取为 DataSet 字段生成的嵌套集合数据协定。

    例如，

    `<xsd:element name="DataSet"> <xsd:complexType> <xsd:sequence> <xsd:element name="row" minOccurs="0" maxOccurs="unbounded"/>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-04T14:53:13.197

我不得不摆脱“元素”的使用，而只是使用“complexType”。

所以我删除了 DataContracts 和 Messages 中的封闭元素，我设置了 type 属性而不是 element 属性。现在可以了，非常感谢。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T10:23:21.260

嘿，我不确定您是如何生成 wsdl 之类的，但数据集有一些奇怪之处。

使用 ds 生成代理时，我需要引用此程序集：

C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\System.Data.dll

干杯，斯蒂安

# visual-studio-2008 - 使用相同的 vdproj 文件创建 x86 和 x64 安装程序？

> ID：906087
> 
> 赞同：2
> 
> 时间：2009-05-25T09:47:02.483
> 
> 标签：visual-studio-2008, deployment, x86, 64-bit

我想使用相同的 Visual Studio 2008 部署项目构建一个 x86 msi 包和一个 x64 包。

我在项目属性对话框中看到了一个 TargetPlatform，我知道我可以使用它来选择 x86 或 x64（或安腾）。

问题是我似乎无法将此属性与项目配置相关联（？）

理想情况下，我希望能够通过从构建脚本（批处理文件）执行 devenv.exe 两次来创建单独的 x86 和 x64 msi 安装程序，每次调用以某种方式通过提供参数来设置 TargetPlatform 属性。

如果可能，我想避免使用 WIX 或其他 3rd-party 工具。

注意：我注意到x86和x64部署项目的区别主要是：

*   文件夹\默认位置 = ProgramFilesFolder (x86) | ProgramFiles64 文件夹 (x64)
*   产品\目标平台 = "3:0" (x86) | "3:1" (x64) | “3:2”（安腾）

我是否真的必须创建两个单独的部署项目才能使用 devenv.exe 创建单独的 msi 包，只是因为这两个差异？

我想我可以在每次调用 devenv.exe(?) 之前使用脚本进行这些更改

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-27T11:34:29.463

当我遇到这个问题时，我必须在执行 devenv 命令之前在 vdproj 文件中使用字符串替换。对于替换，我使用了[SDCTasks](http://sdctasks.codeplex.com)的文件替换任务 然后我的 msbuild 项目看起来几乎像这样：

```
<Project DefaultTargets="Default" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
<PropertyGroup>
<Configuration>Release</Configuration>
<x86>3:0</x86>
<x64>3:1</x64>
<Import Project="$(SDCTasksPath)\Microsoft.Sdc.Common.tasks"/>
<Target Name="Default">
    <File.Replace Path="$(SolutionDirectory)Setup\Setup.vdproj" OldValue="%22TargetPlatform%22 = %22$(x86)%22" NewValue="%22TargetPlatform%22 = %22$(x64)%22" />
<Exec Command="devenv.exe $(SolutionDirectory)Solution.sln /build $(Configuration) /project $(SolutionDirectory)Setup\Setup.vdproj /projectconfig $(Configuration)"></Exec> 
```

# asp.net - 表单身份验证 Cookie - 为什么选择 SSL？

> ID：906091
> 
> 赞同：0
> 
> 时间：2009-05-25T09:47:54.183
> 
> 标签：asp.net, security

我在 ASP.NET 中使用 formsAuthentication 时看到的指导是通过 requireSSL 属性使用 SSL。

我的印象是 cookie 的内容是加密的。所以我试图理解为什么还需要 SSL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-25T09:49:43.930

问题不是 cookie，而是发送用户名和密码。使用 SSL 将阻止该交易被拦截（如果用户会费心检查证书*grin*并提供一定程度的保证）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-11-06T04:41:37.840

我有同样的问题！

我对@blowdart 对您登录时看不到敏感信息的网站的回答有些满意。绝对肯定您应该通过 SSL 登录 - 但如果有人可以访问您的 cookie，他们可以冒充您直到它过期了。

[http://msdn.microsoft.com/en-us/library/ms998310.aspx](http://msdn.microsoft.com/en-us/library/ms998310.aspx)

> 为防止表单身份验证 cookie 在通过网络时被捕获和篡改，请确保对所有需要身份验证访问的页面使用 SSL，并通过在元素上设置 requireSSL="true" 将表单身份验证票证限制为 SSL 通道。
> 
> 将表单身份验证 cookie 限制为 SSL 通道
> 
> 在元素上设置 requireSSL="true"，如下代码所示。
> 
> 通过设置 requireSSL="true"，您可以设置确定浏览器是否应将 cookie 发送回服务器的安全 cookie 属性。设置了安全属性后，浏览器只会将 cookie 发送到使用 HTTPS URL 请求的安全页面。
> 
> 注意：如果您使用无 cookie 会话，则必须确保身份验证票证永远不会通过不安全的通道传输。

# .net - xsd.exe 输出文件名

> ID：906093
> 
> 赞同：30
> 
> 时间：2009-05-25T09:48:52.747
> 
> 标签：.net, xsd, xsd.exe

有没有办法控制 xsd.exe 的输出文件名？

我的具体问题是，如果引用了导入的 xsd，则会将其添加到文件名中。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2010-07-05T08:12:59.513

[该链接](http://social.msdn.microsoft.com/Forums/en-US/xmlandnetfx/thread/8ab41df8-69d4-44e4-8795-436088f230e2)提出了另一种选择……在指定输入模式时使用路径字符会重置生成的文件名。因此，如果您使用以下内容，您将能够控制您的输出文件名。

```
xsd.exe schema1.xsd schema2.xsd .\schema3.xsd 
```

将强制`xsd.exe`生成`schema3.cs`文件。

**注意：**这是一个 hack，但到目前为止（VS 2010）它可以工作。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-11-25T01:07:27.390

要添加到 AxelEckenberger 的答案，如果您定期执行此操作（即在批处理脚本中），那么 hack 会有非常轻微的改进。使用您要使用的输出名称创建一个空模式文件

**`Output.xsd`**

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" /> 
```

然后你不需要重命名输出

```
xsd.exe schema1.xsd schema2.xsd schema3.xsd .\Output.xsd 
```

现在输出文件将命名为`Output.cs`.

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2009-05-25T10:29:22.477

xsd.exe 将根据输入文件名自动选择文件的输出名称。您只能使用 /o 开关选择将其输出到的目录。

也就是说，将它包装在批处理作业中是微不足道的，这会做你想要的。

```
rename output.cs yourname.cs 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-05-25T10:22:58.543

**更新**：请参阅@Obalix 的回答。

不，只有输出文件夹：

```
/o[ut]:directoryName 
```

从[这里](http://msdn.microsoft.com/en-us/library/x6c1kb0s(VS.80).aspx)。

# cakephp - 在 CakePhp 中跨三个表编写 Model->find() 的正确方法是什么？

> ID：906096
> 
> 赞同：1
> 
> 时间：2009-05-25T09:50:01.667
> 
> 标签：cakephp

谁能告诉我从数据库中做类似事情的最佳方法是什么

```
Table 1
-id
-data
-foreign_key_id_table2

Table 2
-id
-data
-foreign_key_id_table3

Table 3
-id
-data 
```

我需要选择表一的所有项目，这些项目链接到给定表 3 条目的表 2 中的所有项目，例如

```
select table1.data from table1 where table1.foreign_key_id_table2 in (select table2.id from table2 where table2.foreign_key_id_table3 = X) 
```

但我需要用 cakephp 做到这一点，因为我是新手，所以我不知道怎么做

请帮忙 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-25T11:57:12.940

好的，我会尝试帮助“教人如何钓鱼”。

Cake 模型代表数据库表。每个模型都可以定义[关联](http://book.cakephp.org/view/78/Associations-Linking-Models-Together)，例如belongsTo、hasMany、hasOne 等。当您定义关联时，cake 会识别它并获取您需要的所有相关数据。

例如，假设您有一个模型帖子和一个模型评论。如果您在它们之间建立关联（Post-hasMany-Comment 和 Comment-belongsTo-Post），那么每次执行 Post->find() 或 Comment->find() 时，蛋糕都会发挥作用

那么这是什么意思？如果你做这样的事情：

$data = $this->Post->findByTitle('你的帖子标题');

$data 变量不仅包含您的 Post 数据，还包含所有相关的评论。您可以随时通过调用查看其中的内容`debug($data);`

[可以通过使用递归](http://book.cakephp.org/view/439/recursive)属性/参数或使用内置的可[包含](http://book.cakephp.org/view/474/Containable)行为来设置“深度”蛋糕的级别与相关数据。

定义模型之间的关联（以回答您对 Rob 的回答的评论）的另一个好处是您不需要将所有模型都放在 $uses 变量中。事实上，*这样做是错误的*。

信不信由你，但是一旦您正确定义了关联，这将起作用：

```
class PostsController extends AppController
{
    // not really needed, cake detects it automagically
    var $uses = array('Post');

    function index()
    {
        $comments = $this->Post->Comment->find('all');
    }
} 
```

甜，不是吗？

在你的情况下，它会是这样的：

```
$this->Table1->find
    (
        'all',
        array
        (
            'conditions' => array
            (
                'Table2.foreign_key_id_table3' => X
            )
        )
    ); 
```

当你使用 cake 的内置函数和类时，还有许多其他有用的技巧，所以我建议你花一些时间正确学习 cake，它会让你的生活更轻松。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-25T11:05:07.193

我建议`find()`对模型使用 Cake 的方法。您所要做的就是创建适当的模型关联，Cake 将为您完成工作。在您的情况下，它看起来像 Table1 模型`belongsTo`Table2 和 Table2 `belongsTo`Table3。

那么，表 2 将与表 1 具有`hasOne`或`hasMany`关系，而表 3 将与表 2 具有相同的关系。

为了提供真实世界的场景，请考虑无处不在的博客应用程序。A `User`can create`Posts`和 a `Post`can have many `Comments`：

**数据库**

```
用户
 - ID
 - 数据

帖子
 - ID
 - 用户身份
 - 数据

注释
 - ID
 - post_id
 - 数据

```

**`User`模型**

```
类用户扩展 AppModel {
   $hasMany = array ( '发布' );

   // ...
}

```

**`Post`模型**

```
类 Post 扩展 AppModel {
   $hasMany = array ( '评论' );
   $belongsTo = array ( '用户' );

   // ...
}

```

**`Comment`模型**

```
类注释扩展 AppModel {
   $belongsTo = array ( '发布' );

   // ...
}

```

一旦有了关联，只需调用[`find()`](http://book.cakephp.org/view/73/Retrieving-Your-Data)您感兴趣的任何对象的方法，Cake 也会返回其他类的关联记录。

# c# - 从应用程序运行一个实例

> ID：906100
> 
> 赞同：4
> 
> 时间：2009-05-25T09:51:48.810
> 
> 标签：c#, semaphore

我有一个 Windows 应用程序（C#），我需要将它配置为当时从应用程序运行一个实例，这意味着一个用户单击了 .exe 文件并且应用程序运行并且用户没有关闭第一个实例正在运行的应用程序需要运行下一个实例，因此它应该出现在第一个实例中，而不是打开新实例。

谁能帮我怎么做？

提前致谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-25T11:02:40.023

我经常通过检查其他同名进程来解决这个问题。这样做的优点/缺点是您（或用户）可以通过重命名 exe 来“避开”检查。如果您不希望这样，您可能会使用返回的 Process-object。

```
 string procName = Process.GetCurrentProcess().ProcessName;
  if (Process.GetProcessesByName(procName).Length == 1)
  {
      ...code here...
  } 
```

这取决于您的需要，我认为绕过检查而不重新编译很方便（它是一个服务器进程，有时作为服务运行）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-25T12:08:31.013

VB.Net 团队已经实施了一个解决方案。您将需要依赖 Microsoft.VisualBasic.dll，但如果这不打扰您，那么恕我直言，这是一个很好的解决方案。请参阅以下文章的结尾：[单实例应用程序](http://msdn.microsoft.com/en-us/magazine/cc163741.aspx)

以下是文章的相关部分：

1) 添加对 Microsoft.VisualBasic.dll 的引用 2) 将以下类添加到您的项目中。

```
public class SingleInstanceApplication : WindowsFormsApplicationBase
{
    private SingleInstanceApplication()
    {
        base.IsSingleInstance = true;
    }

    public static void Run(Form f, StartupNextInstanceEventHandler startupHandler)
    {
        SingleInstanceApplication app = new SingleInstanceApplication();
        app.MainForm = f;
        app.StartupNextInstance += startupHandler;
        app.Run(Environment.GetCommandLineArgs());
    }
} 
```

打开 Program.cs 并添加以下 using 语句：

```
using Microsoft.VisualBasic.ApplicationServices; 
```

将类更改为以下内容：

```
static class Program
{
    /// <summary>
    /// The main entry point for the application.
    /// </summary>
    [STAThread]
    static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        SingleInstanceApplication.Run(new Form1(), StartupNextInstanceEventHandler);
    }

    public static void StartupNextInstanceEventHandler(object sender, StartupNextInstanceEventArgs e)
    {
        MessageBox.Show("New instance");
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-25T11:27:54.527

我们遇到了完全相同的问题。我们尝试了进程方法，但如果用户无权阅读有关其他进程的信息，即非管理员，则此方法失败。所以我们实现了下面的解决方案。

基本上我们尝试打开一个文件进行独占阅读。如果这失败了（因为另一个实例已经这样做了），我们会得到一个异常并且可以退出应用程序。

```
 bool haveLock = false;
        try
        {
            lockStream = new System.IO.FileStream(pathToTempFile,System.IO.FileMode.Create,System.IO.FileAccess.ReadWrite,System.IO.FileShare.None);
            haveLock = true;
        }
        catch(Exception)
        {
            System.Console.WriteLine("Failed to acquire lock. ");
        }
        if(!haveLock)
        {
            Inka.Controls.Dialoge.InkaInfoBox diag = new Inka.Controls.Dialoge.InkaInfoBox("App has been started already");
            diag.Size = new Size(diag.Size.Width + 40, diag.Size.Height + 20);
            diag.ShowDialog();
            Application.Exit();
        } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-25T09:57:32.933

编辑：在问题被修改为包含 c# 之后。我的答案仅适用于 vb.net 应用程序

选中**Make single instance application**复选框以防止用户运行您的应用程序的多个实例。此复选框的默认设置被清除，允许运行应用程序的多个实例。

您可以从项目 -> 属性 -> 应用程序选项卡执行此操作

[资源](http://dotnetdud.blogspot.com/2007/12/preventing-multiple-instances-of-net.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-25T09:58:06.067

假设您使用的是 C#

```
 static Mutex mx;
        const string singleInstance = @"MU.Mutex";
        /// <summary>
        /// The main entry point for the application.
        /// </summary>
        [STAThread]
        static void Main()
        {
            try
            {
                System.Threading.Mutex.OpenExisting(singleInstance);
                MessageBox.Show("already exist instance");
                return;
            }
            catch(WaitHandleCannotBeOpenedException)
            {
                mx = new System.Threading.Mutex(true, singleInstance);

            }
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            Application.Run(new MainForm());
        } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-25T09:03:07.977

我会`Mutex`在这种情况下使用 a 。或者， a`Semaphore`也可以工作（但 a`Mutex`似乎更合适）。

这是我的示例（来自 WPF 应用程序，但相同的原则应适用于其他项目类型）：

```
public partial class App : Application
{
    const string AppId = "MY APP ID FOR THE MUTEX";
    static Mutex mutex = new Mutex(false, AppId);
    static bool mutexAccessed = false;

    protected override void OnStartup(StartupEventArgs e)
    {
        try
        {
            if (mutex.WaitOne(0))
                mutexAccessed = true;
        }
        catch (AbandonedMutexException)
        {
            //handle the rare case of an abandoned mutex
            //in the case of my app this isn't a problem, and I can just continue
            mutexAccessed = true;
        }

        if (mutexAccessed)
            base.OnStartup(e);
        else
            Shutdown();
    }

    protected override void OnExit(ExitEventArgs e)
    {
        if (mutexAccessed)
            mutex?.ReleaseMutex();

        mutex?.Dispose();
        mutex = null;
        base.OnExit(e);
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-06-13T05:37:22.433

我找到了这段[代码](https://stackoverflow.com/questions/6392031/how-to-check-if-another-instance-of-the-application-is-running)，它的工作！

```
 /// <summary>
        /// The main entry point for the application.
        /// Limit an app.to one instance
        /// </summary>
        [STAThread]
        static void Main()
        {
            //Mutex to make sure that your application isn't already running.
            Mutex mutex = new System.Threading.Mutex(false, "MyUniqueMutexName");
            try
            {
                if (mutex.WaitOne(0, false))
                {
                    // Run the application
                    Application.EnableVisualStyles();
                    Application.SetCompatibleTextRenderingDefault(false);
                    Application.Run(new Form1());
                }
                else
                {
                    MessageBox.Show("An instance of the application is already running.",
                        "An Application Is Running", MessageBoxButtons.OK, MessageBoxIcon.Information);
                }
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message, "Application Error 'MyUniqueMutexName'", 
                    MessageBoxButtons.OK, MessageBoxIcon.Information);
            }
            finally
            {
                if (mutex != null)
                {
                    mutex.Close();
                    mutex = null;
                }
            }
        } 
```

# sql - MySQL：将来自多个查询的记录收集到一个结果中

> ID：906102
> 
> 赞同：0
> 
> 时间：2009-05-25T09:52:52.333
> 
> 标签：sql, mysql

我希望创建一个 SQL 查询来收集来自多个查询的结果。

我想应用随机排序顺序并返回有限数量的记录。

查询都将返回相同的字段（`RefCode`在此示例中为“”），但将具有不同的 FROM 和 WHERE 语句。

请参阅下面的一些可能查询的示例：

```
SELECT PD.RefCode
FROM ((PD 
INNER JOIN P ON PD.PrdFK = P.PrdID) 
INNER JOIN PR ON PR.ChildCatFK = P.ChildCatFK)
WHERE PR.ParentCatFK = 6

SELECT PD.RefCode
FROM (PR 
INNER JOIN PD ON PR.PrdDetFK = PD.PrdDetID)
WHERE PR.ChildCatFK = 14 
```

我曾尝试使用各种技术（即`UNION`）来做到这一点，但未能获得正确的方法。

记录的随机排序和限制（使用`RAND()`and `LIMIT 0,10`）不是必需的，但如果有它会很棒。

这是可能的还是我需要单独创建每个查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-25T09:55:45.137

使用 UNION 来组合查询。将它们包装在子查询中，以便您可以 ORDER BY 和 LIMIT 结果：

```
SELECT RefCode
FROM (
    SELECT PD.RefCode
    FROM PD 
    INNER JOIN P ON PD.PrdFK = P.PrdID
    INNER JOIN PR ON PR.ChildCatFK = P.ChildCatFK
    WHERE PR.ParentCatFK = 6

    UNION ALL

    SELECT PD.RefCode
    FROM PR 
    INNER JOIN PD ON PR.PrdDetFK = PD.PrdDetID
    WHERE PR.ChildCatFK = 14

) subquery
ORDER BY RAND() 
LIMIT 10 
```

# jquery - 可排序类似于 youtube 主页

> ID：906104
> 
> 赞同：0
> 
> 时间：2009-05-25T09:53:04.640
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

我正在尝试实现与 youtube 主页类似的效果（您必须登录，所以[我发布了一个小电影来解释这一点](http://screencast.com/t/G3plNO2Qtdq)）：我们有一个基本的可排序（仅限垂直）但在每个可排序项目上我们都有一个“向上移动” ”和一个“下移”按钮。这些按钮确实......正如它所说的那样：用一个整洁的动画移动或向下移动每个项目。

所以，我认为这与 sortable 非常相似：它创建了一个帮助器（即动画元素），然后在动画完成后，DOM 被更改为新的位置。

所以，欢迎任何想法！

* * *

我在萤火虫中做了一个小测试。我可以用这个克隆元素：

```
$('.hslider:first').clone(true).insertAfter('.hslider:first') 
```

但主要问题是我有一些 JS 绑定在`.hslider`. 即使有些仍然有效，但其他（如 jquery UI 滑块）却没有。有一种方法可以在不重新初始化整个 js 的情况下做到这一点吗？我试图看一下 jquery UI 源但是......我在 js/jquery 上不太擅长解码任何有用的东西（是的，源是未压缩的：P）

* * *

编辑：

[我在这里](http://www.brothercake.com/scripts/dbx/column-controls.html)找到了类似的东西，但我真的不想只为了这个效果再加载 40kb+（尤其是当我已经加载了 jQuery 时）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-26T07:37:45.743

为什么不使用jQuery 1.3+ 中可用的**[live()方法。](http://docs.jquery.com/Events/live#typefn)**这将确保您的元素即使在重新插入后也将保留事件绑定。Live 基本上将 js 例程绑定到所有现有和未来匹配的元素。不需要加载额外的;)

# visual-studio - 带有 Subversion 的 Visual Studio 2008 源代码管理资源管理器

> ID：906105
> 
> 赞同：2
> 
> 时间：2009-05-25T09:53:34.047
> 
> 标签：visual-studio, svn, version-control, source-control-explorer

我通常使用带有 TFS 的 Visual Studio Team System 2008 源代码控制资源管理器，但我正在考虑将 Subversion 用于一些小项目，我可以使用已经安装的源代码控制资源管理器而不在我的 IDE 中安装新的 Subversion 客户端/插件吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-25T10:06:23.210

我认为您不能使用源代码管理资源管理器（我猜这与 TFS 有关？）。

但是你有几个选项可以将 subversion 集成到 Visual Studio 中：

*   [AnkhSVN 插件](http://ankhsvn.open.collab.net/)（免费）
*   [Mindscape 文件资源管理器](http://www.mindscape.co.nz/blog/?p=199)+ [TortoiseSVN](http://tortoisesvn.net/)（免费）
*   [VisualSVN](http://www.visualsvn.com/visualsvn/)（商业）

我主要使用 TortoiseSVN（作为独立的颠覆客户端）。

我还安装了 AnkhSVN，因为它允许我查看 Visual Studio 中修改了哪些文件，但除此之外，我真的不需要任何集成的 Visual Studio 解决方案来进行源代码控制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-25T10:10:34.433

您需要在 IDE 中安装新的 Subversion 客户端/插件。

看看[VisualSVN](http://www.visualsvn.com/visualsvn/)。它不是免费的，但价格合理且非常好。

# aix - 如何在 aix 上重新导出具有不同名称的原始系统调用？

> ID：906106
> 
> 赞同：0
> 
> 时间：2009-05-25T09:53:48.790
> 
> 标签：aix

如何在 aix 上重新导出具有不同名称的原始系统调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2011-05-19T02:42:49.067

系统调用扩展是 AIX 的一项独特功能——它明确允许您编写新的内核扩展来替换旧的原始系统调用，以便今后（从加载内核扩展时）所有系统调用都使用“旧”名称, 将改为调用新的。为了保留对旧系统调用的引用，因此必须先记住地址，然后再用新的系统调用覆盖它 - 这就是以下文章“使用两个内核模块”的含义：

[http://qasim.zaidi.me/2009/05/overriding-system-call-in-aix.html](http://qasim.zaidi.me/2009/05/overriding-system-call-in-aix.html)

此处提供更多 AIX 特定信息：

[http://publib.boulder.ibm.com/infocenter/aix/v6r1/index.jsp?topic=/com.ibm.aix.kernelext/doc/kernextc/kernex_binding.htm](http://publib.boulder.ibm.com/infocenter/aix/v6r1/index.jsp?topic=/com.ibm.aix.kernelext/doc/kernextc/kernex_binding.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-25T12:45:02.063

简单的作弊方法就是#define它。

如果这不起作用，请查看 LD_PRELOAD 示例，例如： http://neworder.box.sk/newsread.php?newsid= [13857](http://neworder.box.sk/newsread.php?newsid=13857)

# c# - C# HttpWebRequest - 如何在不下载的情况下区分 HTML 和 XML 页面？

> ID：906109
> 
> 赞同：2
> 
> 时间：2009-05-25T09:54:54.340
> 
> 标签：c#, html, xml, httpwebrequest, xmlreader

我需要能够通过查看标题或类似内容（无需下载）来判断链接（URL）是否指向 XML 文件（RSS 提要）或常规 HTML 文件

那里对我有什么好的建议吗？:)

谢谢！罗伊

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-25T10:01:47.073

你可以只做一个 HEAD 请求而不是一个完整的 POST/GET

这将为您提供该页面的标题，其中应包含内容类型。从中你应该能够区分它的文本/html或xml

[这里](https://stackoverflow.com/questions/153451/c-how-to-check-if-system-net-webclient-downloaddata-is-downloading-a-binary-fi)有一个很好的例子

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-25T10:05:00.123

跟进 Eoin Campbell 的回应，这里有一个代码片段，应该使用该`System.Net`功能完全做到这一点：

```
using (var request = System.Net.HttpWebRequest.Create(
    "http://tempuri.org/pathToFile"))
{
    request.Method = "HEAD";

    using (var response = request.GetResponse())
    {
        switch (response.ContentType)
        {
            case "text/xml":
                // ...
                break;
            case "text/html":
                // ...
                break;
        }
    }
} 
```

Of course, this assumes that the web server publishes the content (MIME) type and does so correctly. But since you stated that want a bandwidth-efficient way of doing this, I assume you don't want to download all the markup and analyse that! To be honest, the content type is usually set correctly in any case.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-25T10:01:00.850

您可以使用`Content-Type`标题，并且为了节省带宽，您可以强制 Web 服务器为您提供文档的指定部分。如果服务器`Accept-Ranges: bytes`在其响应中包含标头，您可以使用`Range: bytes=0-10`仅下载前十个字节（甚至尝试不下载任何内容）。

也研究`HEAD`动词而不是`GET`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-25T10:06:33.053

Check the headers in your HttpWebResponse object. The Content-Type header should read text/xml for an XML/RSS document and text/html for a standard web page.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-25T10:01:40.490

您无法仅通过查看 URL 来找出它是什么文件类型。

我建议您尝试检查您请求的文档的 MIME-type，或者阅读第一行并希望作者输入了 Doctype。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-25T10:11:50.143

Generally speaking, this impossible. This is because it is possible (though unhelpful) to serve either HTML or XML files as application/octet-stream. Also, as noted by others, there are multiple valid XML mime types. However, a HEAD request then content type check could work sometimes:

```
WebRequest req = WebRequest.Create(url);
WebResponse resp = req.GetResponse();
req.Method = "HEAD";
String contentType = resp.ContentType;

if(contentType == "text/xml")
  getXML(url);
else if(contentType == "text/html")
  getHTML(url); 
```

But if you're going to process it somehow either way, you can do:

```
WebRequest req = WebRequest.Create(url);
WebResponse resp = req.GetResponse();
String contentType = resp.ContentType;

if(contentType == "text/xml")
  processXML(resp.GetResponseStream());
else if(contentType == "text/html")
  processHTML(resp.GetResponseStream());
else
  // process error condition 
```

Keep in mind, files are downloaded on an as-needed basis. So just asking for the response object does not cause the whole file to be downloaded.

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2009-05-25T10:00:06.420

只需在“文本”阅读器中阅读即可。然后决定哪个是最好的，例如，寻找一些想到的标签；）然后将其放入您的实际阅读器中。

还是那太简单了？

# iphone - 如何在uitextfield而不是键盘中显示pickerview？

> ID：906112
> 
> 赞同：9
> 
> 时间：2009-05-25T09:55:31.580
> 
> 标签：iphone, xcode, uitextfield, uipickerview

我想显示一个 UIPickerView 成为 UITextfield 的 FirstResponder 而不是键盘，并在选择器视图的文本字段中填充值。

有人知道吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-20T15:51:55.683

使用 [textfield setInputView:pickerView];

替换系统输入视图 [inputView](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITextField_Class/Reference/UITextField.html) [inputAccessoryView](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITextField_Class/Reference/UITextField.html) [](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITextField_Class/Reference/UITextField.html) 

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2009-05-25T13:45:28.417

**编辑：**此答案在撰写本文时是正确的。苹果此后推出了`inputView`. Mafonya的[回答](https://stackoverflow.com/a/10249439/1555903)是你现在应该做的。

可以防止键盘弹出。将您的类设置为 UITextField: 的委托，并在头文件中的接口声明之后（{ 之前）`textField.delegate = self`添加： 。`<UITextFieldDelegate>`

现在实施`textFieldShouldBeginEditing:`：

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField {
    // Show UIPickerView

    return NO;
} 
```

如果您希望能够隐藏您的 pickerView，此方法将不起作用。然后你可以做的是创建 UITextField 的子类并覆盖`*trackingWithTouch:event:`选择器并在其中发挥你的魔力。您可能仍然需要返回 NO from`textFieldShouldBeginEditting:`以防止键盘显示。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-16T08:20:26.830

将输入视图添加到文本字段。

```
picker = [[UIPickerView alloc]init];
[picker setDataSource:self];
[picker setDelegate:self];
[picker setShowsSelectionIndicator:YES];

MyTextField.inputView = picker; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2010-09-30T12:51:20.280

嘿，我已经粘贴了一些我写了一段时间的代码来涵盖这种情况。有两个示例，一个带有操作表，一个没有操作表：

```
- (void)textFieldDidBeginEditing:(UITextField *)myTextField{

             [myTextField resignFirstResponder];

             actionSheet = [[UIActionSheet alloc] initWithTitle:nil delegate:self cancelButtonTitle:nil destructiveButtonTitle:nil otherButtonTitles:nil];

             [actionSheet setActionSheetStyle:UIActionSheetStyleBlackTranslucent];

             CGRect pickerFrame = CGRectMake(0, 40, 0, 0);

             UIPickerView *pickerView = [[UIPickerView alloc] initWithFrame:pickerFrame];

              pickerView.showsSelectionIndicator = YES;

              pickerView.dataSource = self;

              pickerView.delegate = self;

              [actionSheet addSubview:pickerView];

              [pickerView release]; //NB this may result on the pickerview going black the next time you come back to the textfield, if this is the case just remove this statement

              UISegmentedControl *closeButton = [[UISegmentedControl alloc] initWithItems:[NSArray arrayWithObject:NSLocalizedString(@"SUBMIT", @"")]];

              closeButton.momentary = YES;

               closeButton.frame = CGRectMake(260, 7.0f, 50.0f, 30.0f);

               closeButton.segmentedControlStyle = UISegmentedControlStyleBar;

               closeButton.tintColor = [UIColor blackColor];

               [closeButton addTarget:self action:@selector(dismissActionSheet:) forControlEvents:UIControlEventValueChanged];

               [actionSheet addSubview:closeButton];

               [closeButton release];

               [actionSheet showInView:displayedInView];

               [actionSheet setBounds:CGRectMake(0, 0, 320, 485)];

} 
```

这是没有操作表的代码：

```
- (void)textFieldDidBeginEditing:(UITextField *)myTextField{

         [myTextField resignFirstResponder];

          for (int component = 0;  component &lt; (((NSInteger)numberOfComponentsForPickerView) - 1); component++) {

              NSInteger valueForRow = [[self.textField.text substringWithRange:NSMakeRange(component,1)] integerValue];

               [pickerView selectRow:valueForRow inComponent:component animated:YES];

          }

           [self fadeInPickerView];

            [view addSubview:pickerView];

            [pickerView release];

} 
```

可以在以下位置找到更详细的示例：[http ://www.buggyprogrammer.co.uk/2010/08/18/open-uipickerview-when-user-enters-textfield/](http://www.buggyprogrammer.co.uk/2010/08/18/open-uipickerview-when-user-enters-textfield/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-25T10:05:42.993

查看代码（有 textview+tabbar 和 pickerview+tabbar 代码）

[带有自己的 UIToolbar 的 UITextView 和 UIPickerView](https://stackoverflow.com/questions/885002/uitextview-and-uipickerview-with-its-own-uitoolbar/885342#885342)

这将使pickerview辞职等。然后你需要做的就是使用pickerview委托方法来更新文本视图

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component 
```

不要使用文本字段，而是使用具有白色背景的 UIlabel。这样，当您点击它时，键盘将不会显示。覆盖 UILabel 上的 touches 事件，当这种情况发生时，调用方法形成将显示新视图的 privious 问题。

```
 -(void) addToViewWithAnimation:(UIView *) theView 
```

# c# - 内部加入 NetTiers

> ID：906113
> 
> 赞同：2
> 
> 时间：2009-05-25T09:55:33.123
> 
> 标签：c#, .net, .nettiers

我今天正在对不同类型的 ORM 工具和 DAL 生成器进行审查。其中之一是 NetTiers。

我有一个带有客户、订单、订单详细信息等的经典数据库模型。

我想对这些表执行复杂的内部联接。这是原始 SQL 查询：

```
SELECT [Contact].LastName, SUM(OrderRow.Amount * Product.Price) TotalAmount
FROM Contact
    INNER JOIN [Order] ON [Contact].ContactId=[Order].ContactId 
        INNER JOIN [OrderRow] ON [Order].OrderId=[OrderRow].OrderId
            INNER JOIN [Product]ON OrderRow.ProductId=Product.ProductId 
                GROUP BY [OrderRow].OrderId, [Contact].LastName
                    HAVING SUM(OrderRow.Amount * Product.Price) > 100 
```

我找不到用 NetTiers 用代码完成这项工作的方法。你能 ？

（ps：使用VS2008 SP1和SQLServer2008 SP1）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-12-07T12:40:47.000

如果没有自定义存储过程，您将无法做到这一点。此处的解决方案：http: [//benpowell.org/paging-and-sorting-in-a-nettiers-custom-stored-procedure/](http://benpowell.org/paging-and-sorting-in-a-nettiers-custom-stored-procedure/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-25T12:18:31.760

为什么不为此创建一个自定义存储过程，nettiers 在 TableProvider 类下为存储过程生成特定的方法，之后您可以简单地调用您的方法。在这种情况下，方法返回类型可能是 DataSet（不确定！）。看[这里](http://nettiers.com/Display%20related%20data%20in%20an%20ASP.net%20GridView%20control.ashx)

# visual-c++ - 如何禁用 MFC 中的最大化按钮？

> ID：906116
> 
> 赞同：5
> 
> 时间：2009-05-25T09:58:01.090
> 
> 标签：visual-c++, mfc, maximize, sdi

如何在 SDI 应用程序中禁用最大化按钮/功能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-25T11:41:12.597

为了完整性：

```
int CMainFrame::OnCreate(LPCREATESTRUCT lpCreateStruct)
{
    ModifyStyle(WS_MAXIMIZEBOX, 0);

    <etc...>
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-12T08:24:30.317

```
ModifyStyle(WS_MAXIMIZEBOX,0,SWP_FRAMECHANGED);  // disable maximize
ModifyStyle(WS_MINIMIZEBOX,0,SWP_FRAMECHANGED);  // disable minimize
ModifyStyle(0,WS_MAXIMIZEBOX,SWP_FRAMECHANGED);  // enable maximize
ModifyStyle(0,WS_MINIMIZEBOX,SWP_FRAMECHANGED);  // enable minimize 
```

试试这个，应该可以

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-25T10:25:50.830

你可以在这里看到它：[如何在 SDI 应用程序中禁用最大化](http://www.codeguru.com/forum/showthread.php?p=1581037)

# java - 使用 JMS 的 WebSphere MQ

> ID：906121
> 
> 赞同：4
> 
> 时间：2009-05-25T10:00:38.370
> 
> 标签：java, jms, websphere, message-queue, ibm-mq

我有一个使用 WebSphere MQ Java API 和配置 (xml) 文件来访问 MQ 的应用程序。我想迁移到 WebSphere JMS API。为此，我尝试从我的本地 WAS 创建 1) WebSphere MQ 队列连接工厂和 2) WebSphere MQ 队列目标。当我配置我的队列目标并尝试设置我的 MQ 配置参数时，我收到一条错误消息，例如“WMSG0316E：您尝试查看不是本地队列的队列。仅支持本地队列的管理。”

在我尝试连接到远程队列的意义上，该消息是正确的。现在，我不能将我的 WAS 配置为尝试连接到远程队列的 MQ 客户端吗？MQ 客户端在服务器类路径中有必要的 MQ JMS jar。

如果有人能对此有所了解，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2010-02-14T00:48:16.150

我正在研究同样的问题 - 我发现作者确认必须告知 WebSphere 需要“客户端到远程队列”模式的文章，但我还没有找到关于如何做到这一点的详细信息，除了一个作者提到了一个环境变量。

仍在搜索...如果找到解决方案，我将发布解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-25T12:00:18.753

我将您的错误消息剪切并粘贴到 Google 中。[以下是关于您的问题](http://publib.boulder.ibm.com/infocenter/wxdinfo/v6r0/index.jsp?topic=/com.ibm.websphere.messages.doc/com.ibm.ejs.jms.messaging.html)的 IBM 文档，以其独特的风格。有帮助，不是吗？

您在哪里设置了您尝试联系的队列？它是在与您部署的 WebSphere 实例相同的服务器上运行，还是远程服务器？如果是后者，我想知道您是否需要网桥或代理，以便您可以在本地发送消息，但通过代理将其显示在远程服务器上。

更新：我不知道，但也许解决这个问题的一种方法是设置一个本地队列，类似于你所说的工作，并让它简单地将所有消息转发到远程队列。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-25T13:39:21.267

你能澄清一下吗。您说您从本地 WAS“创建”连接工厂和队列目标。你的意思是你自己在构建对象吗？

如果是这样，这是错误的方法，您应该将资源配置为应用程序配置的一部分，然后通过 JNDI 查找它们。配置是将本地 JMS 资源绑定到实际实现的位置，在您的情况下是远程 MQ 服务器。您的代码应该只绑定到 JMS，而不是具体的实现。

# algorithm - 比 BMH (Boyer–Moore–Horspool) 搜索更快的算法

> ID：906130
> 
> 赞同：3
> 
> 时间：2009-05-25T10:03:45.493
> 
> 标签：algorithm, search, string, full-text-search

您将使用哪种算法来搜索短文本中的短子字符串？简而言之，我的意思是子字符串 5-10 个字符和字符串 255 个字符。我正在考虑根据输入数据长度选择算法。哪种算法更适合较长的输入？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-25T10:07:07.390

试试[Turbo-BM](http://www-igm.univ-mlv.fr/~lecroq/string/node15.html)。但是，IMO 使用如此短的字符串，通常的线性扫描就足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-01-18T19:24:48.303

@anon @Anton Gogolev
一句话回答你的问题：Railgun_Quadruplet

这个 C 函数在短 2,3,4 模式与 160 个字符的字符串上进行了大量测试，查看此表[http://www.sanmayce.com/Railgun/index.html#Heavy-Search-Hustle](http://www.sanmayce.com/Railgun/index.html#Heavy-Search-Hustle)您可以自己决定.

一篇文章也在： http: [//www.codeproject.com/KB/cpp/Railgun_Quadruplet.aspx](http://www.codeproject.com/KB/cpp/Railgun_Quadruplet.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-07-17T10:07:53.807

如果您正在寻找比 Boyer Moore 更好的算法，那么您正在寻求一个混合的答案。

据我所知，只有后缀树在文本搜索中胜过 Boyer Moore。但是，它使用更多时间来创建索引并使用更多磁盘空间。

附加信息：在速度方面，后缀树或后缀数组击败了任何版本的 Boyer Moore，因为后缀树基本上在树状数据结构中实现了所有可能的搜索。

但是，后缀树的 RAM 内存成本很高，并且索引文本的速度较慢（创建树数据结构）。

Boyer Moore 与 Suffix 树的速度差异：Boyer Moore 在搜索文本上是线性的。后缀树在搜索模式上是线性的。

如果您在 200 个字符的文本上搜索 5 个字母单词，则 boyer moore 执行 200 次操作，而后缀树执行 5 次。

不管它可能更快，它很难实现。就数据结构的难度而言，它可能是最难的之一。一旦建成，它就可以针对空间和速度进行极大优化。

这就是说，在未来几年寻找后缀树。通常，后缀树用于 DNA 索引和网络搜索引擎优化。

Boyer Moore 无处不在，例如约定程序（文本搜索功能）并广泛用于网络搜索引擎。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-25T10:12:47.050

您可以尝试[Suffix Trees](http://en.wikipedia.org/wiki/Suffix_tree)或[Suffix Arrays](http://en.wikipedia.org/wiki/Suffix_array)。两者都取决于图案长度。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-13T12:24:01.917

这是另一种方法，*可能会*击败 BMH。这与 BMH 类似，但在最后一个文本字符之后继续对齐后续文本字符，直到当前文本字符无法对齐或没有更多模式字符要对齐。预处理在每个模式位置构建任何字符的下一个位置的表。例如：

```
Pattern:  ABCABC
          012345 
```

位置 5 的下一个 C 是 5 本身，而位置 4 的下一个 C 是 2。模式中未找到的字符的下一个位置是 -1。以下是Java代码：

```
public class BoyerMooreHorspool {

    int[] tab1 = new int[256];
    int[][] tab2 = new int[1000][1000];
    int[] tab3 = new int[1000];

    public BoyerMooreHorspool() {
        for (int i = 0; i < tab1.length; i++) {
            tab1[i] = 999;
        }
        for (int i = 0; i < 1000; i++) {
            tab2[999][i] = -1;
        }
    }

    public void processPattern(char[] pattern) {
        int i, j, p;

        for (i = 0; i < pattern.length; ++i) {
            tab1[pattern[i]] = -1;
        }

        for (i = 0; i < pattern.length; ++i) {
            tab3[i] = tab1[pattern[i]];
            tab1[pattern[i]] = i;
        }

        for (i = 0; i < pattern.length; i++) {
            p = tab1[pattern[i]];

            for (j = tab3[i] + 1; j < i; j++) {
                tab2[p][j] = tab3[i];
            }
            if (i == p) {
                for (j = i; j < pattern.length; j++) {
                    tab2[p][j] = i;
                }
            } else {
                tab2[p][i] = i;
            }
        }
    }

    public int search(char[] text, char[] pattern) {
        int k = pattern.length - 1;
        int i, j, oi, ok;
        int lpos = k;

        while (k < text.length) {
            j = k;
            ok = k;
            i = tab2[tab1[text[j]]][lpos];
            k += lpos - i;
            j--;
            i--;
            while (i > -1) {
                oi = i;
                i = tab2[tab1[text[j]]][i];
                k += oi - i;
                j--;
                i--;
            }
            if (ok == k) {
                return j + 1;
            }
        }

        return -1;
    }

    public int search(String origText, String origPattern) {
        char[] text = origText.toCharArray();
        char[] pattern = origPattern.toCharArray();

        processPattern(pattern);
        int res = search(text, pattern);

        for (int i = 0; i < pattern.length; i++) {
            tab1[pattern[i]] = 999;
        }

        return res;
    }
} 
```

# java - 堆栈的元素

> ID：906142
> 
> 赞同：1
> 
> 时间：2009-05-25T10:09:12.160
> 
> 标签：java, types, stack

如何在 Java 中将不同数据类型的元素插入到单个堆栈中？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-25T10:12:12.683

它似乎违背了[generics](http://java.sun.com/j2se/1.5.0/docs/guide/language/generics.html)的目的，但它是这样的：

```
Stack<Object>s = new Stack<Object>();
s.add("hello");
s.add(1);           // int is autoboxed to Integer 
```

问题是，当从 中检索`Object`s时`Stack`，需要花费一些精力来找出每个元素的类型——这将需要 using`instanceof`和 typecasts：

```
while (!s.isEmpty()) {
  Object e = s.pop();

  if (e instanceof String)
    System.out.println("String: " + (String)e);
  else if (e instanceof Integer)
    System.out.println("Integer: " + (Integer)e);
  else
    System.out.println("Other type: " + e);
} 
```

现在，在泛型被添加到语言中之前 5 天，我们有一些类似于 Java 之前的脆弱代码。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-25T10:25:16.947

通常，您需要使用继承来解决这个问题。可能使用标记界面：

```
interface MyMarker
{
}

class Foo implements MyMarker
{
}

class Bar implements MyMarker
{
} 
```

在这种情况下，接口是实用的，因为您可以在单个类中实现无限数量的接口，并且您可以在类层次结构中的任何位置添加额外的接口。

然后您可以将 Foo 和 Bar 放在同一个堆栈中：

```
Stack<MyMarker> s = new Stack<MyMarker>();
s.add(new Foo());
s.add(new Bar()); 
```

如果可能的话，这就是要走的路。否则你将不得不像 coobird 建议的那样去做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-25T13:00:29.850

堆栈的泛型参数应该是所有元素运行时类型的通用超类型。对于完全异构的集合，`Object`是所有引用类型的通用超类型。所以：

```
Queue<Object> stack = Collections.asLifoQueue(new ArrayDeque<Object>());
stack.add("red");
stack.add(Color.GREEN);
stack.add(stack); 
```

显然，当您将这些元素从堆栈中弹出时，您将需要`instanceof`检查以路由到适当的代码（并且可能是强制转换）。

可能更好的是引入一个间接层。与其将对象直接放入队列，不如将它们包装在一个有意义的对象中。这些`instanceof`检查都可以通过调用执行您需要的操作的（虚拟）方法来代替。这就是多态性应该是的样子。

# sifr - sifr 文本宽度

> ID：906143
> 
> 赞同：0
> 
> 时间：2009-05-25T10:09:45.777
> 
> 标签：sifr

我想知道在 flash 中呈现的 sifr-text 在所有浏览器/flash 插件中是否具有相同的宽度（如果我设置了绝对字体大小）。那么，无论您使用什么 Flash 插件版本或浏览器，24px Helvetica 字符串“Hello”的比例是否相等？

提前感谢您的任何答案/见解！

蒂斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-26T17:24:52.063

应该，是的，只要您使用`fitExactly`的是 Flash 影片的宽度与其中的文本相同。

# c# - 为超长期项目选择 C# 和 WPF？

> ID：906144
> 
> 赞同：1
> 
> 时间：2009-05-25T10:09:57.837
> 
> 标签：c#, wpf

我参与了一个项目，其中一个开发团队正在构建一个非常长期的基础设施项目，以替换现有的 10 年旧系统。“非常长期”是指从发布之日起，它必须在未来至少 10 年内运行、支持和维护。考虑到大约 2 年的发展，这意味着我们此时应该选择一种技术/语言/框架至少可以使用 12 年。我们可以完全控制运行该项目的计算机、它们的操作系统等。我是即将更换 10 年旧系统的开发人员，我正在帮助团队构建新系统。

该应用程序具有非常复杂的用户界面。UI 是在启动时从配置文件动态构建的，每个 UI 组件都依赖于逻辑和其他 UI 组件，它们必须在运行时接收。UI 元素本身非常复杂，想象一下自定义仪表、图表、旋钮等。

项目中已经做出了两个选择，我不会判断或尝试改变：

1.  它将是一个桌面应用程序
2.  它将用 C# 开发

现在我们正处于选择合适的框架以使我们非常灵活的 UI 系统“易于开发”的阶段，即通过依赖已调试的、已制作的框架来减少开发人员错误的数量。

该团队检查了 Microsoft 的 CAB（复合 UI），它非常适合其目的，但是考虑到项目的长期方面，微软在 2007 年停止使用它是一个巨大的问题（想想在 6 中发现的框架错误）年 - 谁将提供支持？ - 我知道我们可以修复 CAB 本身的代码，但这是我们想要避免的）。

显而易见的一件事是依赖微软的 WPF。这似乎是 UI 开发的“未来”，但从长远来看，它让我感到害怕。我主要担心的是市场不会接受它，3年后微软将停止它，6年后我将无法获得适当的支持。

但是，除了编写我们自己的框架之外，我真的没有看到其他选择。我不想不尊重任何 3rd 方框架开发人员，但对于这样一个长期项目，我只能使用来自非常成熟的供应商的产品/框架/等。

考虑到上述情况，我将不胜感激选择 WPF 是否是正确的调用（如果不是，那么对于使用 C# 的这种长期桌面应用程序项目来说，正确的“复杂 UI 框架”是什么？）。

谢谢（很抱歉这个问题很长）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-25T10:23:19.870

超长期？10年？仍在使用 COBOL！

开个玩笑，我相信 WPF 是你最好的选择。在过去的几年里，微软在 WPF 和 XAML 上投入了大量资金，并且在 Silverlight 上使用相同的核心基础架构（微软真正关心的）是坚持使用它足够长的时间的一个优势。我认为 WPF 不会很快被丢弃。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-25T10:56:36.463

Visual Studio 2010 UI 已用 WPF 重写这一事实有力地证明了他们会在一段时间内支持它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-25T14:27:02.403

1.  [智能客户端贡献](http://www.codeplex.com/scsfcontrib)
2.  [棱镜](http://www.codeplex.com/CompositeWPF)

如果您还没有看过它们，可能会有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-25T10:58:29.643

WPF 的采用率仍然很低，尽管在我看来，微软在未来几年将越来越多地朝着这个方向发展。您可能对此并不特别高兴，但这是唯一能想到的可靠选择。

# c# - 如何增加 DataGridView 滚动条的宽度？

> ID：906145
> 
> 赞同：0
> 
> 时间：2009-05-25T10:10:14.093
> 
> 标签：c#, winforms, datagridview

有没有办法增加 DataGridView 滚动条的宽度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-09-08T07:23:07.160

唯一的方法是实现您自己的控件并替换`DataGridView`. 我在 CodeProject 上找到了这个（它的 VB 但仍然是一个很好的例子）：

[VectorX的核心自定义滚动条类](http://www.codeproject.com/KB/miscctrl/corescrollbar.aspx)

MSDN论坛上也有一些东西

[datagridview 的自定义滚动条](http://social.msdn.microsoft.com/forums/en-US/winformsdatacontrols/thread/08c5425e-881d-4681-bf8b-60a40f4ebc4a/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-25T10:13:58.937

两个滚动条都在 DataGridView 的 Control 集合中。你可以简单地从那里得到它们并尝试改变它。

# asp.net-2.0 - ASP.NET 中的文件上传功能

> ID：906156
> 
> 赞同：0
> 
> 时间：2009-05-25T10:12:36.613
> 
> 标签：asp.net-2.0

我在 ASP.NET 中使用了文件上传功能。如果用户使用文本框旁边显示的浏览按钮并选择所需的文件，则文件上传没有问题。

但是，如果他们直接在文本框中输入文件名而不是使用“浏览”按钮，那么我应该能够检查该文件是否真的存在于客户端计算机中。

请注意，我不是在尝试检查文件是否存在于服务器中，我想要一些功能可以让我在用户的本地计算机中检查文件是否存在。

如果有人作为一个想法，这将对我有很大帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-25T10:19:49.003

正如@kirtan 所说，您应该限制用户使用浏览来选择文件。

你有没有尝试过：

```
'' Before attempting to save the file, verify
'' that the FileUpload control contains a file.
If (FileUpload1.HasFile) Then
  '' Call a helper method routine to save the file.
  SaveFile(FileUpload1.PostedFile)
Else
  '' Notify the user that a file was not uploaded.
  UploadStatusLabel.Text = "You did not specify a file to upload."
End If 
```

从[这里](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.fileupload.saveas.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-25T10:25:45.510

您不必关心文件是使用浏览按钮还是通过文本输入指定的，因为这是由浏览器本身处理的（不同浏览器的输入类型文件的呈现方式不同）。

相反，您应该检查浏览器是否使用

```
FileUpload.HasFile 
```

FileUpload ASP.NET 控件的属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-25T10:16:54.530

理想情况下，允许用户输入要上传的文件名在大多数浏览器上都不起作用。并且不能这样做。不得允许用户在上传控件的输入框中键入任何内容。

而且，幸运的是，没有任何方法可以用来检查文件是否存在于用户的文件系统中（它们曾经存在于旧时代）。

# java - 以 a4j 形式有条件地要求 jsf 验证

> ID：906167
> 
> 赞同：2
> 
> 时间：2009-05-25T10:19:06.460
> 
> 标签：java, jsf, seam, ajax4jsf

我在 jsf/a4j 中使用条件评估表达式时遇到了一点问题

这是我的代码

```
<a4j:form>
         <h:inputText id="id1" value="#{mybean.myvalue}" size="1"
                   required="#{not mybean.condition}"
                   rendered="#{not mybean.condition}"
                   requiredMessage="Put a number in here" />

           <h:selectBooleanCheckbox value="#{mybean.condition}">
                <a4j:support event="onclick" reRender="id1"/>
            </h:selectBooleanCheckbox>

<a4j:commandButton action="#{mybean.myaction}" value="Do something" />

 </a4j:form> 
```

布尔复选框有条件地启用/禁用验证。

这不起作用： a4j:commandButton 只是跳过验证。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-25T13:00:11.643

如果*inputText*验证失败（Process Validations 阶段），则值*mybean.condition*将不会被更新（Process Updates 阶段）。由于文本字段使用*required*属性，这很有可能。

RichFaces 文档中的生命周期：

[![替代文字](https://i.stack.imgur.com/EUDiT.png)](https://i.stack.imgur.com/EUDiT.png)
[（来源：[jboss.org](http://www.jboss.org/file-access/default/members/jbossrichfaces/freezone/docs/devguide/en/html_single/images/newpic1.png)）]

如果任何 JSF 阶段失败，生命周期会跳到呈现响应以避免对无效输入进行操作。您可以使用[h:message](http://java.sun.com/javaee/javaserverfaces/1.2_MR1/docs/tlddocs/h/message.html)和[h:messages](http://java.sun.com/javaee/javaserverfaces/1.2_MR1/docs/tlddocs/h/messages.html)标签来查看报告的错误（尽管因为您使用的是 AJAX，所以您必须将它们放入将重新呈现的内容中。

我猜如果你在[aj4:support标签上设置](http://www.jboss.org/file-access/default/members/jbossrichfaces/freezone/docs/tlddoc/a4j/support.html)*ajaxSingle*属性，你会得到你想要的行为。文档说这只会提交控件的值，因此文本字段不会参与应用请求值/流程验证/流程更新阶段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-05-13T22:25:55.727

mybean的范围是什么？如果它是请求范围，那么当您单击按钮时它的值将被重置，并且输入字段可能会被处理（如果呈现解析为“假”）。

# iphone - iphone：旋转设备时调整视图大小

> ID：906176
> 
> 赞同：0
> 
> 时间：2009-05-25T10:24:25.890
> 
> 标签：iphone, objective-c, cocoa-touch

我正在尝试开发一个对地理敏感的应用程序。所以，我写了——

```
(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    // return (interfaceOrientation == UIInterfaceOrientationPortrait);
    return YES;
} 
```

我在那个屏幕上放了不同的图像，当视图发生变化时我必须调整它的大小，那么，我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2011-05-19T13:26:24.270

```
imageViewObject.autoresizingMask = UIViewAutoresizingFlexibleLeftMargin | 
                                   UIViewAutoresizingFlexibleRightMargin | 
                                   UIViewAutoresizingFlexibleTopMargin | 
                                   UIViewAutoresizingFlexibleBottomMargin |
                                   UIViewAutoresizingFlexibleHeight |
                                   UIViewAutoresizingFlexibleWidth; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-12-21T05:18:11.533

您可以在 - (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration 方法中调整视图大小，例如：

*   (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation 持续时间:(NSTimeInterval)duration {

    if((toInterfaceOrientation == UIInterfaceOrientationPortrait) || (toInterfaceOrientation == UIInterfaceOrientationPortraitUpsideDown)) {

    } 别的 {

    }

}

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-25T15:53:03.577

-shouldAutorotateToInterfaceOrientation: 是 UIViewController 上的一个方法，当设备的方向改变时，它会导致它的视图被调整大小。

您有两种主要方法来调整该视图的子视图的大小：

1）您可以设置该视图的子视图的 autoresizingMask ，以便它们在其父视图更改大小时更改大小。如果您使用 Interface Builder 添加子视图，则可以从 Size 面板直观地设置这些掩码。

2）您可以覆盖该视图中的 -layoutSubviews 并在该方法中手动调整它们的大小。

# iphone - NSMutableArray 的 -replaceObjectAtIndex:withObject: 会释放被新对象替换的旧对象吗？

> ID：906183
> 
> 赞同：2
> 
> 时间：2009-05-25T10:27:44.277
> 
> 标签：iphone, cocoa-touch, memory-management, uikit, nsmutablearray

该文档没有说明任何内容。当一个旧对象被“移除”并且一个新对象进入它的位置时，旧对象会发生什么？我必须自己释放吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-25T12:38:00.657

**不，您不必自己释放它。**

如果被替换对象的保留计数等于 0，您可能会收到错误消息。

**新对象被保留。旧对象被释放。**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-25T12:45:13.827

您不必释放它。

您没有对其执行**alloc**、**复制**或**保留**，因此不对内存负责 - 文档非常清楚。

我不希望 Apple 为 SDK 中的每个方法记录内存管理过程，除非它违反了他们已经设置的内存管理规则。如果文档没有说明任何内容，您可以假设默认规则适用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-25T21:49:16.837

该文档在文件顶部非常清楚地说明了这一点：

> 与 NSArray 一样，NSMutableArray 的实例维护对其内容的强引用。如果不使用垃圾回收，当您将对象添加到数组时，该对象会收到一条保留消息。当一个对象从一个可变数组中移除时，它会收到一条释放消息。如果没有对该对象的进一步引用，这意味着该对象已被释放。如果您的程序保留对此类对象的引用，则除非您在对象从数组中删除之前向该对象发送保留消息，否则该引用将变为无效。

对每种方法都重复记录这一点是没有意义的。

# sql - SQL 索引有问题的删除

> ID：906185
> 
> 赞同：0
> 
> 时间：2009-05-25T10:28:27.923
> 
> 标签：sql, indexing, sql-update

我有一些表：

*   表问与`idask`
*   带有`idpref`, `fk_idask`,的表首选项`fk_idstructure`
*   表结构与`idstructure`

与表 PREFERENCES ( , )之间的所有约束`id`和`fk_id`唯一索引。`fk_idask``fk_idstructure`

问题是当我在 PREFERENCES 中有两行时。

```
`IDPREF`   `FK_IDASK`   `FK_IDSTRUCTURE`  
 1          1            1  
 2          1            2 
```

如果我想反转（切换？）偏好之间的两种结构

```
`IDPREF`   `FK_IDASK`   `FK_IDSTRUCTURE`  
 1          1            **2**
 2          1            **1** 
```

`FK_IDASK`和分解之间的唯一索引`FK_IDSTRUCTURE`，因为第一次更新导致两个偏好具有相同结构的相同询问。

为了防止这种情况，我创建了一个函数 deleteAndResave 并暂时解决了这个问题。

`idassignation`但是现在用and到达了 ASSIGNATION 表`fk_idpref`。

现在，如果我删除由 ASSIGNATION 链接的首选项，则约束中断。

我已经找到了解决方法，但是很丑。这个问题有一些理智的解决方案吗？

感谢你的回答！

附言。对不起，我的英语不好 ：（

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-25T12:03:25.097

你可以试试这个：

```
UPDATE
    PREFERENCES
SET
    FK_IDSTRUCTURE = 3 - FK_IDSTRUCTURE 
```

现在，因为它一次性运行，“ACID”中的“C”（一致性）意味着外键和唯一性在“期间”处理，但前后都可以。

您可以使用 CASE 语句对语句进行拉皮条处理更复杂的内容

```
UPDATE
    PREFERENCES
SET
    FK_IDSTRUCTURE = CASE FK_IDSTRUCTURE 
        WHEN 2 THEN 1 WHEN 1 THEN 2 ELSE FK_IDSTRUCTURE END 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-05-25T10:44:11.013

是的，在表索引和分解之间反转了两个结构！

无论如何，我猜你的外键指向错误的方向。看起来外键正在分配，并指向首选项。

外键应该是关于preferences 和REFERENCE 分配的。

另一种选择是考虑外键上的 ON DELETE CASCADE 选项。这意味着当您删除引用表中的行时，数据库引擎会自动删除外键表中的相关行。

另一个经常使用的选项是保留行，但将它们标记为非活动。这可以通过添加“活动位”列来完成。查询时过滤掉标记为非活动的行。

# xmpp - 通过 Java 程序连接到 Yahoo、MSN、AIM 等即时消息 (IM) 服务的库

> ID：906186
> 
> 赞同：7
> 
> 时间：2009-05-25T10:28:50.700
> 
> 标签：xmpp, instant-messaging

我正在寻找一些可以帮助我**通过 Java 程序连接到 IM 网络的库。**

我的要求如下：

1.  用户应该能够登录，检索朋友列表，并能够向他的朋友发送消息
2.  消息也应该传递给离线的朋友。

我对 lib-purple 做了一些研究。但它不是用Java编写的。是否有任何可用的 Java 包装器，以便我可以将它与 Java 程序一起使用？或者一些可以与 XMPP 服务器一起使用的 libpurple 插件？或者有没有其他的解决方案。

谢谢阿内兹

PS：

我已经尝试将 Openfire XMPP 服务器与 IM 网关插件结合使用（也尝试了 Kraken IM 网关插件）。它不会向 MSN 和 AIM 朋友发送离线消息（适用于 Yahoo 和 GTalk）。

我也尝试了以下库，发现它们也不支持向离线朋友发送消息

*   Java MSN 库
*   jYMSG（雅虎）
*   DAIM（用于 AIM）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-29T18:02:06.017

通过[Java Native Interface](http://java.sun.com/docs/books/jni/)，您可以使用其他语言的库，例如 c++。因此，您可以使用 Miranda IM 等的 ICQ.dll 连接到 ICQ。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-29T14:33:18.887

我一直在努力写这篇文章。显然我不允许添加超链接甚至 URL。

谷歌“java目标api”

第一项是用 Java 创建支持 AIM 的应用程序，第 1 部分。很好读。您基本上需要请求开发密钥。然后，本文将引导您完成 Eclipse 的设置。

我怀疑其他服务也需要开发密钥。

干杯!

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-26T02:04:24.297

您希望将离线消息存储在本地还是服务器上？我知道 AIM/MSN 有某种服务器来存储离线消息，但我还没有做足够的研究来了解它的可访问性。另一种方法是创建（或使用现有的）机器人，您将处理传递的消息发送到该机器人。

出于目标，JAIMBot 似乎提供了一个支持此功能的库：http: [//jaimbot.sourceforge.net/](http://jaimbot.sourceforge.net/)

通过谷歌搜索“msn 离线消息传递机器人”或类似查询，您可能能够找到类似的库/机器人来处理其他系统。

祝你好运！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-29T02:29:30.267

创建 openfire XMPP 服务器的同一个人创建了一个非常好的 Java 库，用于与 Xmmp 服务器通信，并通过 Jabber 传输系统与几乎所有即时消息传递可能性进行通信。

该库名为 Smack，可在 Ignite Realtime 的主页上找到。

我为一些项目使用了不同版本的 Smack，并用它构建了一个自定义的 Jabber 客户端。该库现在看起来非常稳定和成熟。

我不知道如何处理发送给离线用户的消息，但是离线时发送给您的消息存储在 openfire 服务器上

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-02T00:06:55.513

检查来自创建 Openfire 的同一个人的 Kraken...只需谷歌“Kraken Jabber”并点击第一个结果

这里有一个简短的描述：Kraken 是 Openfire IM Gateway 插件的延续，但它适用于任何 XMPP 服务器。它为 XMPP 用户提供了一种登录方式，并通过他们的旧 IM 帐户（例如 AIM、ICQ、MSN、Yahoo 和朋友）进行通信。

似乎在我设置的服务器上工作正常

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-07-27T02:23:31.897

您可以使用 Kik API 连接 Kik Messenger 移动 IM 服务。它让您的 Android 或 iPhone 应用程序可以使用 Kik 自己的传输和基础设施向其他移动应用程序用户发送丰富的内容和文件。在更简单的场景中，集成也非常快 - 5 行代码。API 网站或博客上有更多信息：[http](http://www.kik.com/dev) ://www.kik.com/dev和[http://apiblog.kik.com](http://apiblog.kik.com)

免责声明：我是 Kik API 背后的人之一 :)

# php - 使用 PHP 输出 XML

> ID：906188
> 
> 赞同：0
> 
> 时间：2009-05-25T10:29:51.573
> 
> 标签：php, xml

```
<?
    $MySQLPassword = "indian";  
    $HostName = "localhost";    
    $UserName = "monty";

    mysql_connect($HostName,$UserName,$MySQLPassword)
    or die("ERROR: Could not connect to database!");

    mysql_select_db("sachin") or die("cannot select db");

    $keyword = $_POST['keyword'];
    echo $keyword;
   /* Execute the query that performs the actual search in the DB: */
   $result = mysql_query(" SELECT p.page_url AS url,
                           COUNT(*) AS occurrences 
                           FROM page p, word w, occurrence o
                           WHERE p.page_id = o.page_id AND
                           w.word_id = o.word_id AND
                           w.word_word = \"$keyword\"
                           GROUP BY p.page_id
                           ORDER BY occurrences DESC
                           " );

$output = new DOMDocument();
$output->formatOutput = true;
$output = "<loginsuccess>";

for( $i = 1; $row = mysql_fetch_array($result); $i++ )      {

$output .="<person><keyword>".$_POST['keyword']."</keyword><name>".$row['url']."</name><occur>".$row['occurrences']."</occur></person>";
}

$output .= "</loginsuccess>";
print ($output);

?> 
```

我将输出作为 XML 获取，但我需要将其存储在单独的 xml 文件中，任何人都可以帮助我。

还有一个问题，....

我正在使用 fwrite 并且能够写入文件，但是如何在每次写入时清除文件，而不是在文件末尾写入？我需要销毁现有内容并重新编写。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-25T10:32:18.197

使用[fwrite](http://us2.php.net/fwrite)。

编辑：要截断，请使用：

```
$handle = fopen($filename , "wb") 
```

做open的时候。w 表示打开写入并截断为 0 长度。b 表示二进制模式，因此 Windows 不会弄乱您的行尾。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-25T11:12:08.617

file_put_contents 是将字符串转储到文件的最简单方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-25T10:57:03.420

只是简单的文件函数，在 PHP.net 网站上查看它们。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2009-05-25T10:43:28.160

此外，您要确保正确转义 XML 文件的内容。[htmlentities()](http://www.php.net/htmlentities)是开始阅读该主题的好地方，或者您可以使用`<![CDATA[ ... ]]>`

# php - Zend 框架执行缓慢

> ID：906189
> 
> 赞同：8
> 
> 时间：2009-05-25T10:30:40.370
> 
> 标签：php, zend-framework

我正在使用 zend 框架开发一个基于社区的网站 - 但它太慢了，页面加载需要一段时间。我想知道我应该研究 zend 框架的哪些方面以确保它运行得更快。

任何提示和帮助将不胜感激:)

* * *

不错的建议 - 我使用数据库并从头开始对其进行索引 - 没有任何索引可以从 :\ 开始，但无论如何速度有所提高，但仍然相当慢。还有什么我必须注意的吗？

因为我只是假设它与框架有关，就像我第一次运行使用框架制作的基本教程项目时一样——它们也有点慢。

* * *

不错的提示 - 查看 zend 性能指南文章。不过，我不太确定将缓存表元数据的代码放在哪里:([对不起，这里听起来像个菜鸟]，正如[这个链接中提到的那样](http://framework.zend.com/manual/en/zend.db.table.html#zend.db.table.metadata.caching)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-05-25T11:04:01.720

确定瓶颈在哪里的唯一方法是进行深度分析。

我使用 xdebug，结合 kcachegrind（windows 的 kde 的一部分）。它为每个执行的 PHP 脚本生成完整的调用跟踪，然后您可以检查以找出哪些函数占用了大部分时间。无需更改代码，因此您可以轻松分析 Zend Framework 等第三方库。

*   [http://www.xdebug.org/](http://www.xdebug.org/)
*   [http://windows.kde.org/](http://windows.kde.org/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-05-25T13:22:00.930

如果您可以与服务器位于同一 LAN（至少用于测试），那么您可以从客户端验证您的配置文件（在某种程度上）。

如果它是一台机器，最可能导致速度下降的原因是内存问题（使用过多或过少的主内存），然后是可怕的数据库查询。

PHP 操作码缓存似乎总是有帮助，还记得禁用“atime”（*nix 上的 noatime 挂载选项，Windows 上的注册表更改）以避免昂贵的磁盘写入。

一篇关于 Zend 特定内容的不错的文章是： [http ://till.vox.com/library/post/zendframework-performance.html](http://till.vox.com/library/post/zendframework-performance.html)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-05-25T10:42:02.500

在服务器上安装[APC 。](http://se2.php.net/apc)操作码缓存消除了框架造成的大量开销。您通常可以通过简单地运行来做到这一点

```
pecl install apc 
```

在服务器上。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-05-25T11:03:56.917

一定要安装 APC，因为它可能会以最少的工作为您带来最大的性能提升（2-4 倍）。我还建议您查看[参考指南的性能部分](http://framework.zend.com/manual/en/performance.html)。

Zend_Cache 可以与许多 ZF 组件一起使用以加速它们，也可以与您自己的数据一起使用。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2009-05-25T11:29:34.057

Web 上的大多数性能问题都是数据库问题，在继续之前总是先从数据库方面着手。

可能有很多数据库调用，你可以用更少的调用就足够了，索引没有放在正确的列上。

这些是通常会减慢速度的事情。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-05-25T10:34:20.003

最明显的是 zend_cache

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-05-26T15:29:02.577

看看这里：

Zend[性能指南](http://framework.zend.com/manual/en/performance.html)

[Zend_Log](http://framework.zend.com/manual/en/zend.log.html)可以记录和跟踪您的应用程序

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-05-25T11:06:14.337

你应该查看官方的 Zend 性能指南。
有很多关于如何调整 Zend 速度的技巧，其中大部分是关于减少启动时 zend 加载的文件数量。

[http://framework.zend.com/manual/en/performance.classloading.html](http://framework.zend.com/manual/en/performance.classloading.html)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-06-23T17:15:28.363

关于`Zend_Db_Table`元数据缓存，您应该在引导程序中配置缓存并将其`Zend_Db_Table_Abstract`作为静态属性添加到类中。

（类似于打开默认数据库适配器并将其设置为所有`Zend_Db_Table`对象的默认适配器的方式。）

您链接到的手册部分中有一个配置默认元数据缓存的代码示例。这将进入您的引导程序。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-05-26T11:24:10.590

同意数据库评论。如果您的站点很慢，则很可能不是 Zend 框架问题，而很可能是数据库问题。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2012-01-30T00:51:34.880

如果您的数据库中没有任何索引，那么我敢肯定还有其他事情您做错了！

无论如何...安装 APC 以缓存您的操作码。这将大大缩短执行时间。由于需要在应用程序中包含大量脚本，大多数框架都会产生巨大的开销。APC 将真正解决这个问题。FastCGI 还可以显着提高性能。持久的数据库连接也是如此（假设 FastCGI 已安装并正常工作）。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-06-11T04:58:06.413

[http://www.nabble.com/Caching-of-MVC-and-other-ZF-components-td15576554s16154.html](http://www.nabble.com/Caching-of-MVC-and-other-ZF-components-td15576554s16154.html)

我想我们将不得不等待 PHP5.3 发布，然后希望我们可以在生产机器上使用它。:)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2010-11-29T17:51:39.197

[http://www.zend.com/webinar/Server/webinar-Magento-Performance-Optimization-20090709.flv](http://www.zend.com/webinar/Server/webinar-Magento-Performance-Optimization-20090709.flv)

现在观看他们的免费网络研讨会，他们展示了人们在此线程中提到的许多解决方案。

希望这可以帮助！

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2012-06-06T21:23:38.773

我有一个非常相似的问题，在我的本地工作时加载单个页面需要 10 秒，使用`http://localhost/MY_WEB_SITE`. 碰巧我试过`http://127.0.0.1/MY_WEB_SITE`了，它工作得非常快（几乎立即）。我不确定使用 localhost 有什么问题，但它对我有用（顺便说一句，我在 Windows 7 上，检查了 system32/drivers/etc/hosts 和 localhost 是在那里定义的）。因此，使用 127.0.0.1 代替 localhost 也可能是您的解决方案。

# javascript - Javascript验证：阻止特殊字符

> ID：906190
> 
> 赞同：11
> 
> 时间：2009-05-25T10:30:58.387
> 
> 标签：javascript, validation

如何限制用户在文本框中输入特殊字符。我只想输入数字和字母（键入/粘贴）。

有样品吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2011-06-19T03:10:21.547

试试这个，这个函数允许字母数字和空格：

```
function alpha(e) {
    var k;
    document.all ? k = e.keyCode : k = e.which;
    return ((k > 64 && k < 91) || (k > 96 && k < 123) || k == 8 || k == 32 || (k >= 48 && k <= 57));
} 
```

在您的 html 中：

```
<input type="text" name="name"  onkeypress="return alpha(event)"/> 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2009-05-25T11:09:38.370

你有两种方法：

1.  检查“按键”事件。如果用户按下特殊字符键，请立即阻止他
2.  检查“onblur”事件：当输入元素失去焦点时，验证其内容。如果该值无效，则在该输入框旁边显示一个谨慎的警告。

我建议第二种方法，因为它不那么刺激。记得也要检查`onpaste`。如果您只使用按键，那么我们可以复制和粘贴特殊字符，因此`onpaste`也可以用来限制粘贴特殊字符

此外，我还建议您重新考虑是否真的要阻止用户输入特殊字符。因为很多人的密码中都有 $、#、@ 和 *。

我想这可能是为了防止 SQL 注入；如果是这样：最好在服务器端处理检查。或者更好的是，转义这些值并将它们存储在数据库中。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2011-08-20T06:56:13.033

对于特殊字符：

```
var iChars = "!@#$%^&*()+=-[]\\\';,./{}|\":<>?";

for (var i = 0; i < document.formname.fieldname.value.length; i++) {
    if (iChars.indexOf(document.formname.fieldname.value.charAt(i)) != -1) {
        alert ("Your username has special characters. \nThese are not allowed.\n Please remove them and try again.");
        return false;
    }
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-05-25T11:01:13.413

它会帮助你......假设你有一个带有“formname”表单的表单和一个带有“txt”名称的文本框。那么你可以使用下面的代码来只允许一个字母数字值

```
var checkString = document.formname.txt.value;
if (checkString != "") {
    if ( /[^A-Za-z\d]/.test(checkString)) {
        alert("Please enter only letter and numeric characters");
        document.formname.txt.focus();
        return (false);
    }
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-05-25T10:35:42.760

基本上，只需使用适当的 onkeypress 处理程序。请参阅[http://www.qodo.co.uk/blog/javascript-restrict-keyboard-character-input/](http://www.qodo.co.uk/blog/javascript-restrict-keyboard-character-input/)和示例[http://www.qodo.co.uk/wp-content/uploads/2008/05/ javascript-restrict-keyboard-character-input.html](http://www.qodo.co.uk/wp-content/uploads/2008/05/javascript-restrict-keyboard-character-input.html)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-09-12T04:02:52.093

我认为检查`keypress`事件并不完全足够，因为我相信用户可以在不触发按键的情况下**复制/粘贴到输入框中。**

所以`onblur`可能更可靠一些（但不那么直接）。

为了真正确保您不想要的字符没有输入到输入框（或文本区域等）中，我认为您需要

1.  检查`keypress`（如果您想立即提供反馈）和
2.  还要检查`onblur`，
3.  以及验证服务器上的输入（这是确保没有不需要的数据进入您的数据的唯一真正方法）。

其他答案中的代码示例可以很好地进行客户端检查（只是不要*仅*依赖检查`keypress`事件），但正如在接受的答案中指出的那样，确实需要服务器端检查。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-05-30T20:04:50.320

截至今天，一些选项已被弃用。所以要小心那些。

如果您尝试`<input onkeypress="blockSpecialCharacters(event)" />`，IDE 之类的`WebStorm`会删除~~事件~~并告诉您：

> 使用了不推荐使用的符号，请查阅文档以获得更好的替代方案

然后当你拿到 JavaScript 时，`console.log(e.keyCode)`也会给出~~keyCode~~并说：

> 使用了不推荐使用的符号，请查阅文档以获得更好的替代方案

无论如何，我使用 jQuery 做到了。

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.js"></script>

<input id="theInput" />

<script>
    function blockSpecialCharacters(e) {
            let key = e.key;
            let keyCharCode = key.charCodeAt(0);

            // 0-9
            if(keyCharCode >= 48 && keyCharCode <= 57) {
                return key;
            }
            // A-Z
            if(keyCharCode >= 65 && keyCharCode <= 90) {
                return key;
            }
            // a-z
            if(keyCharCode >= 97 && keyCharCode <= 122) {
                return key;
            }

            return false;
    }

    $('#theInput').keypress(function(e) {
        blockSpecialCharacters(e);
    });
</script> 
```

# entity-framework - 我可以将 ADO.NET Entity Framework 与现有模型一起使用吗？

> ID：906193
> 
> 赞同：1
> 
> 时间：2009-05-25T10:32:27.417
> 
> 标签：entity-framework, model

我的项目有一个现有模型。我想切换到实体框架，但我不想用从 EF 生成的模型替换我的模型。

此外，我的模型与我的数据库架构非常不同，因此任何机会使用从 EF 生成的模型并进行所有必需的重构似乎都太难了。

是否存在任何方式来拥有现有域、现有数据库并仅使用 EF 向我的域添加方法以包含 O/RM 层？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-25T10:55:56.403

在 .NET 3.5SP1 中，恐怕答案是一个很大的“不”。在 .NET 4.0 中，这个故事看起来更有希望，引入了 POCO 支持（希望可以让您使用自己的对象，尽管我还没有在公共测试版上尝试过）。

请注意，您可以使用 LINQ-to-SQL 执行 POCO（使用您自己的对象），方法是使用外部映射文件（并提供`DataContext`对象） - 但这些工具并不能完全帮助您执行此操作（它想使用代码默认生成）。

现在，也许 NHibernate（和类似的）是您的最佳选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-25T14:25:07.853

如果您是 MSDN 订阅者，则可以下载 Entity Framework 的[beta 版本。](http://blogs.msdn.com/adonet/archive/2009/05/20/entity-framework-4-0-beta-1-bits-now-available-in-the-vs-2010-and-net-4-beta-1.aspx)它支持您所指的 POCO 对象，EF 1.0 也因此受到严厉批评。

ADO.NET 设计团队最近刚刚[在实体框架中发布了@POCO：第 1 部分 -](http://blogs.msdn.com/adonet/archive/2009/05/21/poco-in-the-entity-framework-part-1-the-experience.aspx)将帮助您走上正轨的体验。

根据我使用 EFPocoAdapter（EF 4.0 的前身）的经验，我很乐意推荐 EF 4.0。

您还可以获得对一些很酷的 n 层场景的支持，这意味着您可以将对象传递到另一层，该层可以修改和返回它们，您仍然可以将它们持久化到数据库中。并且其他层不必了解有关实体框架的任何信息，因此您可以清楚地分离关注点。

# redirect - outputstream response.redirect 二进制

> ID：906195
> 
> 赞同：0
> 
> 时间：2009-05-25T10:33:04.717
> 
> 标签：redirect

我需要从 ac# 代码进行重定向并将数据传递给它。

sy能指出正确的方向吗？如何在 httpcontext 上写入二进制数据，将其重定向到[http://myserver/hello.aspx并在 http:](http://myserver/hello.aspx) [//myserver/hello.aspx](http://myserver/hello.aspx)的页面加载时取回此二进制文件

提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-25T16:18:35.760

If it is not a big amount of data (there are limits on the length of the url) you could serialize your data and pass it as a querystring parameter. You redirect to [http://myserver/hello.aspx?param1=0102030405060708090A0B0C](http://myserver/hello.aspx?param1=0102030405060708090A0B0C) on the page load, you read the querystring and deserialize it.

Not sure but I think to remember the default max for the querystring is 2048 bytes, so anything close to 1K of binary data would be your maximun if you serialize to hex string. You could try base64 but you would need to sanitize it as it would include non valid caracters (like /,and ? and =).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-27T07:27:55.997

供参考

我从另一个论坛得到了解决方案

用重定向做这样的事情是不可能的。

两种唯一的方法似乎是：

使用您提到的查询字符串使用 server.redirect 并使用“上一页”

无论如何谢谢

# c++ - Qt：QButtonGroup的QList

> ID：906196
> 
> 赞同：0
> 
> 时间：2009-05-25T10:33:15.607
> 
> 标签：c++, qt, linked-list

嘿！我尝试执行以下操作

```
 QList<QButtonGroup*> groups;
    for (int i=0; i<nGroup; i++)
    {
        QButtonGroup *objects = new QButtonGroup(this);
        objects->setExclusive(false);
        for (int j=0; j<nObject; j++)
        {
            Led *tempLed = new Led();
            tempLed->setAutoExclusive(false);
            layout->addWidget(tempLed,j,i,Qt::AlignLeft);
            objects->addButton(tempLed);
        }
        groups.append(objects);
    } 
```

然后尝试做这样的事情：

```
groups.at(1)->button(2)->setChecked(true); 
```

代码编译，但在运行时抛出未处理的异常。我究竟做错了什么？有没有更好的方法来创建 QButtonGroup 组？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-25T14:16:10.680

QButtonGroup::button 函数返回特定 ID 的按钮，但在将按钮添加到按钮组时没有使用 id。QButtonGroup::button 在您的示例中返回 0 导致空指针访问异常。

```
...
objects->addButton(tempLed);
... 
```

如果您将代码更改为

```
...
objects->addButton(tempLed, j );
... 
```

您的原始代码将起作用。

我更喜欢 QList::at 而不是 QList::operator[] 因为您不想更改列表中的值（==指针）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-25T11:34:42.220

我认为问题与[.](http://doc.trolltech.com/4.5/qlist.html#at) 它返回一个 const 项，并且您正在调用其中的一个非常量函数。

请改用[运算符 []](http://doc.trolltech.com/4.5/qlist.html#operator-5b-5d)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-25T10:59:56.067

好的，我这样解决了：

```
QButtonGroup *bG;
bG = groups[gr];
QAbstractButton *aB = bG->buttons()[obj];
aB->setChecked(command); 
```

没有真正明白你有什么问题。

# c# - 在 C# 中使用字节/短等的任何理由？

> ID：906198
> 
> 赞同：7
> 
> 时间：2009-05-25T10:35:09.160
> 
> 标签：c#, java, types

超过int类型？

很多代码要么将 int 与 double/floats 一起使用。

我知道有 .NET 移动版本之类的东西，所以字节/短是自己的，但是对于桌面应用程序有什么意义吗？

当我从事 C++ 工作（游戏编程）时，我非常了解我使用的每种数据类型，尽管我在 C#/Java 工作中没有这种感觉。

如果我知道我的循环永远不会超过字节的范围，那么我使用字节会不会有什么好处？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-25T10:38:50.353

单个`byte`与 a 相比`long`不会在内存方面产生巨大差异，但是当您开始拥有大型数组时，这 7 个额外的字节将产生很大的不同。

更重要的是，数据类型有助于更好地传达开发人员的意图：当您遇到 a 时，`byte length;`您肯定知道`length`' 的范围是 a 的范围`byte`。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-05-25T10:41:20.597

我认为这个问题的意思是，10 多年前，通常的做法是考虑变量需要存储什么值，例如，如果你存储一个百分比 (0..100)，你可能会使用一个字节（-128 到 127 有符号或 0 到 255 无符号），因为它对于这项工作来说足够大，因此被视为不那么“浪费”。

然而，这些天来，这些措施是不必要的。内存通常没有那么高的溢价，如果是这样，您可能会被现代计算机在 32 位字边界（如果不是 64 位）上对齐事物所击败。

除非您要存储数千个这样的东西的数组，否则这些类型的微优化（现在）是无关紧要的干扰。

坦率地说，我不记得上次我没有将字节用于原始数据以外的其他内容，而且我想不起来上次我使用缩写来表示任何东西。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-25T10:40:43.670

使用小于 CPU 的本机字大小的数据类型时，性能损失很小。当 CPU 需要将两个字节相加时，它会将它们加载到（32 位）字大小的寄存器中，相加，调整它们（切断三个最高有效字节，计算进位/溢出）并将它们存储在一个字节中。

这是很多工作。如果要在循环中使用变量，请不要使其小于 CPU 的原生字。

这些数据类型的存在使得代码可以处理包含它们的结构，因为大小限制，或者因为遗留 API 或其他原因。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-25T10:36:57.110

这是一个“为工作使用正确的工具”的案例。如果您正在处理表示字节的内容，则使用`byte`数据类型。例如，许多涉及字节流的代码都需要使用字节数组。相反，如果您只是使用任意整数，则使用`int`或者`long`如果它们比`int`可以处理的更大。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-05-25T10:37:33.460

**使用的理由**很多**`byte`——任何处理原始二进制流（图像、文件、序列化代码等）的东西都必须在`byte[]`缓冲区方面进行讨论。**

 **不过，我不会`byte`只用作计数器——CPU 可以`int`更有效地处理。

使用`short`... 好吧，当您拥有它们的*数组*时，它可能会节省相当多的空间，但总的来说，我只会使用`int`.

# asp.net - 在 ASP.NET 中，将上传的文件存储到关系数据库中，还是将其存储到文件系统中更好？

> ID：906203
> 
> 赞同：2
> 
> 时间：2009-05-25T10:37:31.727
> 
> 标签：asp.net, file-upload

把上传的文件存入关系型数据库好还是放到IIS中某个目录下的文件系统好？我认为关系系统将是一个更好的选择。任何意见？您什么时候会使用其中一种？

编辑：RDBMS，将​​更容易将多个文件附件与记录相关联。更容易维护版本

文件系统使存储数据变得更容易，我认为在性能方面这是一个更好的选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-25T10:59:29.313

这真的取决于具体情况。如果您存储非常大的文件，您的数据库将变得非常大 - 考虑这一点 - 它可能会影响您的托管价格。

当您在网络场中时，首选将文件存储在数据库中 - 例如，如果对应用程序的请求由多个服务器处理并且您将文件存储在数据库中，那么您只需要 SQL 集群，并将文件存储在在这种情况下，文件系统要困难得多——您必须使用公共位置或通过服务器场同步文件！

我会将数据库用于文件存储 - 与您的应用程序相关的所有数据的一个位置 - 更易于维护和备份/恢复！

这是一篇解释如何在数据库中存储的文章：[http ://www.dbazine.com/sql/sql-articles/charran5](http://www.dbazine.com/sql/sql-articles/charran5)

这是有关 SQL Server 2008 和文件流功能的有趣读物：http: [//www.devx.com/dotnet/Article/40812](http://www.devx.com/dotnet/Article/40812)

# c - 这个关于结构的 C 错误是什么意思？

> ID：906205
> 
> 赞同：3
> 
> 时间：2009-05-25T10:37:47.717
> 
> 标签：c, initialization, structure

有人可以帮我理解 C 结构中的这个错误吗？这是我的代码：

```
struct Orientation
{
    char facing;
    char sensor;
    char mazeDir;
}; 

struct Orientation O[16];
O[0] = {'N', 'F', 'N'};
O[1] = {'N', 'B', 'S'};
O[2] = {'N', 'R', 'E'};
O[3] = {'N', 'L', 'W'};
O[4] = {'S', 'F', 'S'};
O[5] = {'S', 'B', 'N'};
O[6] = {'S', 'R', 'W'};
O[7] = {'S', 'L', 'E'};
O[8] = {'E', 'F', 'E'};
O[9] = {'E', 'B', 'W'};
O[10] = {'E', 'R', 'S'};
O[11] = {'E', 'L', 'N'};
O[12] = {'W', 'F', 'W'};
O[13] = {'W', 'B', 'E'};
O[14] = {'W', 'R', 'N'};
O[15] = {'W', 'L', 'S'}; 
```

我收到关于 O[13]、O[14] 和 O[15] 的这些错误

```
..\RMNCODE.C(282): error C231: 'O': redefinition
..\RMNCODE.C(283): error C279: 'O': multiple initialization
..\RMNCODE.C(283): error C231: 'O': redefinition
..\RMNCODE.C(284): error C279: 'O': multiple initialization
..\RMNCODE.C(284): error C231: 'O': redefinition 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-25T10:43:21.077

像这样初始化数组：

```
struct Orientation O[16] = {
    {'N', 'F', 'N'},
    {'N', 'B', 'S'},
    {'N', 'R', 'E'},
    {'N', 'L', 'W'},
    {'S', 'F', 'S'},
    {'S', 'B', 'N'},
    {'S', 'R', 'W'},
    {'S', 'L', 'E'},
    {'E', 'F', 'E'},
    {'E', 'B', 'W'},
    {'E', 'R', 'S'},
    {'E', 'L', 'N'},
    {'W', 'F', 'W'},
    {'W', 'B', 'E'},
    {'W', 'R', 'N'},
    {'W', 'L', 'S'}
}; 
```

干杯！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-25T10:44:38.517

如果您要初始化 O，您需要在声明中一次性完成所有操作：

```
struct Orientation O[16] = {
  { 'N', 'F', 'N' },
  { 'N', 'B', 'S'),
  ... 
```

};

你不能这样做：

```
O[0] = {'N', 'F', 'N'}; 
```

因为 C 不支持语句中的结构文字，仅作为初始化列表的一部分。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-25T10:44:28.890

您必须`O`使用单个初始化程序进行初始化，或者您可以在初始化函数中单独分配给其成员。您不能像以前那样在函数之外使用赋值表达式。

例如

```
struct Orientation O[16] = { {'N', 'F', 'N'}, {'N', 'B', 'S'} /* , ... */ }; 
```

或者

```
void InitializeO(void)
{
    O[0].facing = 'N';
    O[0].sensor = 'F';
    O[0].mazeDir = 'N';

    O[1].facing = 'N';
    O[1].sensor = 'B';
    O[1].mazeDir = 'S';

    /* ... */
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-25T10:44:53.570

通过初始化更改分配。

```
struct Orientation { char facing; char sensor; char mazeDir; };

struct Orientation O[16] = 
{{'N', 'F', 'N'},
{'N', 'B', 'S'}, 
{'N', 'R', 'E'}, 
{'N', 'L', 'W'}, 
{'S', 'F', 'S'}, 
{'S', 'B', 'N'}, 
{'S', 'R', 'W'}, 
{'S', 'L', 'E'}, 
{'E', 'F', 'E'}, 
{'E', 'B', 'W'}, 
{'E', 'R', 'S'}, 
{'E', 'L', 'N'}, 
{'W', 'F', 'W'}, 
{'W', 'B', 'E'}, 
{'W', 'R', 'N'}, 
{'W', 'L', 'S'}}; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-25T10:44:39.780

你不能像你正在做的那样分配一个结构。你需要明确地做到这一点：

```
O[0].facing = 'N';
O[0].sensor = 'F';
O[0].mazeDir = 'N';

O[1].facing = 'N';
O[1].sensor = 'B';
O[1].mazeDir = 'S';

//etc... 
```

否则，您可以像 Magnus 建议的那样初始化结构。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-25T10:45:03.633

尝试

```
struct Orientation O[16] = {
    { 'W','L','S'},
    { 'W', 'R', 'N'},
    ...
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-25T10:45:22.790

虽然它不是您问题的直接答案，但您可以通过以下语法解决问题：

```
struct Orientation O[16] = {
  {'N', 'F', 'N' },
  {'N', 'B', 'S'},
  {'N', 'R', 'E'},
  {'N', 'L', 'W'},
  ...
}; 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-25T10:45:25.567

C89 没有结构的文字。它确实有初始化列表，看起来好像是文字，但实际上不是。

这意味着您只能执行一次“初始化赋值”，其中定义了变量：

```
struct Orientation O[16] = {
  {'N', 'F', 'N'},
  ...
}; 
```

在 C99 中，这已更改，请参阅评论中的链接。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-31T07:15:31.327

如果您想在以后分配值，您正在寻找复合文字，您想要的语法是

```
struct Orientation O[16];
O[0] = (struct Orientation){'N', 'F', 'N'};
O[1] = (struct Orientation){'N', 'B', 'S'};
O[2] = (struct Orientation){'N', 'R', 'E'};
O[3] = (struct Orientation){'N', 'L', 'W'};
O[4] = (struct Orientation){'S', 'F', 'S'};
O[5] = (struct Orientation){'S', 'B', 'N'};
O[6] = (struct Orientation){'S', 'R', 'W'};
O[7] = (struct Orientation){'S', 'L', 'E'};
O[8] = (struct Orientation){'E', 'F', 'E'};
O[9] = (struct Orientation){'E', 'B', 'W'};
O[10] = (struct Orientation){'E', 'R', 'S'};
O[11] = (struct Orientation){'E', 'L', 'N'};
O[12] = (struct Orientation){'W', 'F', 'W'};
O[13] = (struct Orientation){'W', 'B', 'E'};
O[14] = (struct Orientation){'W', 'R', 'N'};
O[15] = (struct Orientation){'W', 'L', 'S'}; 
```

优点是它可以在函数内的任何地方完成，而不仅仅是在初始化期间。

尽管正如其他人所建议的那样，您可以将其重写为：

```
struct Orientation O[16] = 
{
    {'N', 'F', 'N'},
    {'N', 'B', 'S'}, 
    {'N', 'R', 'E'},
    ...
}; 
```

甚至

```
struct Orientation O[16] =
{
    [0] = {'N', 'F', 'N'},
    [1] = {'N', 'B', 'S'},
    [2] = {'N', 'R', 'E'},
    [3] = {'N', 'L', 'W'},
    ...
}; 
```

如果您只想在初始化期间分配值。

# programming-languages - 有人在商业上使用 pop11 语言吗？

> ID：906206
> 
> 赞同：4
> 
> 时间：2009-05-25T10:38:23.880
> 
> 标签：programming-languages, artificial-intelligence, pop-11

前段时间我曾经在人工智能领域使用过pop11，我想知道现在是否有人在商业上使用pop11编程语言，如果有，那是为了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-08-23T13:07:52.500

I have been planning a commercial project for 4 months now, that studies what the user does on a daily/weekly/monthly/yearly basis with their computer, and tries to predict what the user will and/or may need to do next. And it will then automate the process.

This project is in development. If you're interested; A website and blog will be up by the end of the year, if all goes well...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-14T16:38:32.447

我不知道这个信息请求，并为花了这么长时间回答（六年？？？）道歉！

Poplog 仍然有效，可从 Birmingham 网站获得。它可以安装在 32 位或 64 位 Linux 系统上，但作为 32 位进程运行。有一些安装脚本已经在 Ubuntu、Fedora、CentOS 和 Scientific Linux 上测试过了。安装的前提是已经安装了一些 32 位的 linux 软件包。Fedora 和 Ubuntu 的脚本执行该安装，然后调用不同的脚本下载 tar 文件（约 17MB），然后将其安装在 /usr/local/poplog（约 80MB）中，并提供一些可用于测试的演示。

任何希望在其他版本的 linux 上安装的人都可以在安装所需的软件包后使用第二个脚本，如本安装文档中所述：[安装最新的 Poplog](http://www.cs.bham.ac.uk/research/projects/poplog/latest-poplog/)

有一个用户论坛，可以将问题、评论和请求定向到，可在此处获取：[https ://mailman.cs.bham.ac.uk/mailman/listinfo/pop-forum](https://mailman.cs.bham.ac.uk/mailman/listinfo/pop-forum "https://mailman.cs.bham.ac.uk/mailman/listinfo/pop-forum")

如有必要，请给我发电子邮件： cs.bham.ac.uk 的 a.sloman

PS：回答这个问题：“我真正想要的是让那个了不起的 VED 编辑器再次运行，最好是在 Cygwin-X 下运行，但我有最后期限要赶上，我的黑客时间受到严格限制，这些天！”

没有希望让 poplog 在 Cygwin 下工作，因为 poplog 所做的所有低级工作（包括使用其增量编译器在运行时生成机器代码过程）。

但是，如果您有足够的内存和文件空间来使用虚拟 linux 系统（例如轻量级 Fedora 或类似的东西，您应该能够非常快速地安装 poplog 并在几秒钟内运行编辑器，前提是您之前已经安装了所需的库，这些库似乎适用于许多版本的 linux。去一个 32 位的 linux VM 以节省空间并确保与 32 位 poplog 的兼容性）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-10-16T22:57:55.047

我自己从未使用过，但这里引用[了 Aaron Sloman 所写](http://pages.citebite.com/h1u8l5t0i0dnj)的内容（Poplog 是完整的系统，包括基于 Pop-11 编程语言编写的 Lisp、Prolog 和 ML 编译器，以及一些其他包和库）：

> Poplog 在 1990 年代已经是一个设计精良、功能强大且非常成功的商业产品，由苏塞克斯大学和 ISL（Integral Solutions Ltd）联合开发，并由 ISL 销售，后者使用它来开发广泛使用的 Clementine 数据挖掘系统，直到1998 年，当 ISL 被 SPSS 收购时（为 Clementine - 现在扩展并重新命名为 PASW）。

请注意，上面的链接使用 Citebite 服务直接链接到引用的段落。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T13:20:16.147

过去我们确实在商业上使用过 Pop-11，至少用于工业研究原型。我很想今天仍然使用 Pop-11，但尴尬的 Poplog 安装过程让我望而却步，这限制了我们将有意义的结果传递给他人的能力。我最近才尝试自己进行全新安装，但只有最基本的工作[*]；安装一直是一个挑战，即使在 Integral Solutions 积极维护 Poplog 的日子里也是如此。

Python 语言是目前人工智能/机器学习最明显的选择语言，安装简单，适用于各种平台！我对 Python 了解得越多，就越会想起 Pop-11。

我注意到这个线程已经有几年历史了——还有其他人对 Pop-11 有足够的兴趣来尝试新的语言实现吗？让我们制作一个为 Java 虚拟机和/或 Dalvik 子系统生成 VM 代码的版本。也许[http://pyparsing.wikispaces.com/](http://pyparsing.wikispaces.com/)将是一个很好的起点。我欢迎 Aaron 对此发表意见，您还参与其中吗？

[*] 我真正想要的是让那个了不起的 VED 编辑器再次运行，最好是在 Cygwin-X 下运行，但是我有最后期限要赶上，而且我的 hacking 时间受到严格限制，这些天！~~~

# java - Java 安全异常

> ID：906210
> 
> 赞同：2
> 
> 时间：2009-05-25T10:40:11.443
> 
> 标签：java, security, exception

我正在尝试将 Hibernate 应用程序集成到专有框架中。我的问题是这个框架以某种方式检查包的签名。当我尝试调用我的 Hibernate 应用程序时，我收到以下错误：

> ```
> Caused by: java.lang.SecurityException: class "org.hibernate.dialect.Oracle10gDialect"'s signer information does not match signer information of other classes in the same package 
> ```

附加信息：Hibernate 工作的数据库是 Oracle 10g，所以这个类是强制性的。

哪个包是“相同包”的意思？是“org.hibernate.dialect”吗？

我真正的问题是我不知道从哪里开始。“org.hibernate.dialect”包包含在从[Hibernate Core 3.3.1GA](https://www.hibernate.org/30.html)获取的“hibernate3.jar”中。他们是否错误地签署了他们的课程？还是应该责怪框架的提供者，因为他使用的是同一个 jar（我对此没有任何信息）。

有没有办法显示签名信息？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-25T11:06:36.490

好的，我想我解决了。框架的提供者将所有使用的库重新打包到“thirdparty.jar”中。访问此 JAR 后，我意识到他们也在使用“org.hibernate.dialect”，但他们的不包含“Oracle10gDialect”。因此，每当我调用我的 Hibernate 应用程序时，它都会使用框架的库，并且在找不到“org.hibernate.dialect.Oracle10gDialect”时回退到我提供的“org.hibernate.dialect”包。我想我终于发现了相当于 DLLhell 的 Java ;-)

我的下一个问题是如何正确管理这些依赖关系。

# c# - Web 服务如何验证请求的 URL 是否有效？

> ID：906214
> 
> 赞同：0
> 
> 时间：2009-05-25T10:40:52.470
> 
> 标签：c#, asp.net, web-services

我已经实现了一个返回 xml 字符串的 Web 服务。

我想通过哈希码验证该 Web 服务，当请求来自任何 URL 时，然后验证该 URL 是否有效，这将如何通过 c# 代码完成？

XML Web 服务将要求向 API 提交有效的 HASH 代码，同时验证发出请求的 URL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-25T11:21:21.797

可能您可以检查 HttpRequest.Url.Referrer 并 ping 引荐来源网址。如果它返回，那么您可以确定引荐来源网址是有效的。不过，我不确定你是如何 ping 的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-02-06T07:16:39.367

我们中的许多人都希望保护对我们 Web 服务的调用，对吧？

有很多方法可以做到这一点，其中之一是使用自定义 SOAP 标头。

使用此方法，我们只需将所需的 SOAP 标头添加到我们的 Web 服务调用中。

我们将 SOAP 标头嵌入到我们的消息中，并在服务器上验证其内容。

如果 SOAP 标头验证成功完成，则 Web 服务器将 Web 服务响应发送给消费者。

# regex - 正则表达式匹配“CP”后跟 3-5 位数字

> ID：906216
> 
> 赞同：1
> 
> 时间：2009-05-25T10:41:20.677
> 
> 标签：regex

接受'CP123'前两个字母CP和其他3或4或5个字母的正则表达式是什么。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-25T10:43:12.310

```
CP[0-9]{3,5} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-25T10:52:48.903

这将符合您的要求：

```
^CP\d{3,5}$ 
```

^ 匹配字符串的开头，因此它不允许任何字符出现在“CP”的左侧。

\d 匹配一个数字，{3,5} 使其匹配 3-5 个数字。

$ 匹配字符串的结尾，因此它不允许数字后面的任何字符。

如果您在验证控件中使用正则表达式，则可以删除 ^ 和 $，因为它们是由控件添加的：

```
CP\d{3,5} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-25T10:43:24.057

这应该适用于所有正则表达式引擎：

```
CP[0-9]{3,5} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-25T11:03:28.027

根据评论中的更新：

```
CP\d{1,5} 
```

如果你想要 CP 后面的一到五位数字。否则使用

```
CP\d+ 
```

如果您只想要 CP 后跟至少一位数字。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-25T10:48:01.830

即使你的问题不是很清楚，这应该有效：

```
r'^CP[0-9]{3,5}$' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-25T10:58:00.360

```
Regex regxExp = new Regex( "CP[0-9]{3,5}" );
bool result = regxExp.IsMatch( //Expression ); 
```

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2009-05-25T10:43:44.663

```
"$CP123[3-5]^" 
```

# java - 使用 Java 和一般情况下的日志记录：最佳实践？

> ID：906233
> 
> 赞同：79
> 
> 时间：2009-05-25T10:45:39.573
> 
> 标签：java, logging, log4j

有时当我看到我的日志记录代码时，我想知道我是否做得对。对此可能没有明确的答案，但我有以下担忧：

**库类**

我有几个库类可能会记录一些`INFO`消息。致命错误报告为异常。目前，我的类中有一个静态记录器实例，其类名作为日志记录名称。（Log4j 的`Logger.getLogger(MyClass.class)`：）

这是正确的方法吗？也许这个库类的用户不想要我的实现中的任何消息，或者想要将它们重定向到特定于应用程序的日志。我应该允许用户从“外部世界”设置记录器吗？您如何处理此类案件？

**一般日志**

在某些应用程序中，我的类可能希望将日志消息写入未由类名称标识的特定日志。（即：）`HTTP Request log`做这种事情的最好方法是什么？想到了一个查找服务......

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2009-05-25T10:48:50.520

您的约定非常标准且非常好（恕我直言）。

需要注意的一件事是过多的 unnedded 调试调用导致的内存碎片，因此，使用 Log4J（和大多数其他 Java 日志框架），您最终会得到如下结果：

```
if (log.isDebugEnabled()) {
  log.debug("...");
} 
```

因为构建该日志消息（您可能没有使用）可能会很昂贵，特别是如果完成数千或数百万次。

您的 INFO 级别日志记录不应该太“健谈”（从您所说的来看，听起来并非如此）。INFO 消息通常应该是有意义和重要的，例如正在启动和停止的应用程序。如果遇到问题，您可能想知道的事情。当您真正遇到要诊断的问题时，更多地使用调试/精细级别日志记录。调试/精细日志记录通常仅在需要时打开。信息通常始终处于打开状态。

如果有人不想从您的课程中获得特定的 INFO 消息，他们当然可以随意更改您的 log4j 配置以不获取它们。Log4j 在这个部门非常简单（与 Java 1.4 日志记录相反）。

至于您的 HTTP 事情，我通常认为这不是 Java 日志记录的问题，因为通常一个类负责您感兴趣的内容，因此您只需将其放在一个地方。在（在我的经验中很少见）当您想要跨看似不相关的类的通用日志消息时，只需放入一些可以轻松获取的标记。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2018-01-21T05:22:12.687

以下是我在所有项目中遵循的一套指导方针，以确保良好的性能。我已经根据互联网上各种来源的输入形成了这套指南。

到今天为止，我相信 Log4j 2 是迄今为止登录 Java 的最佳选择。

基准可[在此处](https://logging.apache.org/log4j/2.x/performance.html)获得。我为获得最佳性能而遵循的做法如下：

1.  我目前避免使用 SLF4J，原因如下：
    *   它与标记有一些并发问题，我想用它来管理 SQL 语句的日志记录（[标记不如 slf4j 强大](https://issues.apache.org/jira/browse/LOG4J2-585)- 请参阅 Ralph Goers 的第一条评论）
    *   它不支持 Java 8 Lambda，我想再次使用它来获得更好的性能（[支持 Logger 中的 lambda 表达式](https://jira.qos.ch/browse/SLF4J-371)）
2.  使用异步记录器执行所有常规记录以获得更好的性能
3.  使用同步记录器将错误消息记录在单独的文件中，因为我们希望在错误消息发生时立即看到它
4.  不要在常规日志中使用位置信息，例如文件名、类名、方法名、行号，因为为了派生这些信息，框架会拍摄堆栈的快照并遍历它。这会影响性能。因此，仅在错误日志中使用位置信息，而不在常规日志中使用
5.  为了跟踪由单独线程处理的单个请求，请考虑使用线程上下文和随机 UUID，如此[处所述](https://logging.apache.org/log4j/2.x/manual/thread-context.html)
6.  由于我们将错误记录在单独的文件中，因此将上下文信息也记录在错误日志中非常重要。例如，如果应用程序在处理文件时遇到错误，则在错误日志文件中打印文件名和正在处理的文件记录以及堆栈跟踪
7.  日志文件应该是 grep-able 且易于理解的。例如，如果应用程序处理多个文件中的客户记录，则每个日志消息应如下所示：

> ```
> 12:01:00,127 INFO FILE_NAME=file1.txt - Processing starts
> 12:01:00,127 DEBUG FILE_NAME=file1.txt, CUSTOMER_ID=756
> 12:01:00,129 INFO FILE_NAME=file1.txt - Processing ends 
> ```

8.  使用 SQL 标记记录所有 SQL 语句，如下所示，并使用过滤器启用或禁用它：

> ```
> private static final Marker sqlMarker = 
>   MarkerManager.getMarker("SQL");
> 
> private void method1() {
>     logger.debug(sqlMarker, "SELECT * FROM EMPLOYEE");
> } 
> ```

9.  使用 Java 8 Lambda 记录所有参数。当给定的日志级别被禁用时，这将使应用程序免于格式化消息：

> ```
> int i=5, j=10;
> logger.info("Sample output {}, {}", ()->i, ()->j); 
> ```

10.  不要使用字符串连接。使用如上所示的参数化消息

11.  使用日志配置的动态重新加载，以便应用程序自动重新加载日志配置中的更改，而无需重新启动应用程序

12.  不要使用`printStackTrace()`或`System.out.println()`

13.  应用程序应在退出前关闭记录器：

> ```
> LogManager.shutdown(); 
> ```

14.  最后，供大家参考，我使用如下配置：

> ```
> <?xml version="1.0" encoding="UTF-8"?>
> <Configuration monitorinterval="300" status="info" strict="true">
>     <Properties>
>         <Property name="filePath">${env:LOG_ROOT}/SAMPLE</Property>
>         <Property name="filename">${env:LOG_ROOT}/SAMPLE/sample
>         </Property>
>         <property name="logSize">10 MB</property>
>     </Properties>
>     <Appenders>
>         <RollingFile name="RollingFileRegular" fileName="${filename}.log"
>             filePattern="${filePath}/sample-%d{yyyy-dd-MM}-%i.log">
>             <Filters>
>                 <MarkerFilter marker="SQL" onMatch="DENY"
>                     onMismatch="NEUTRAL" />
>             </Filters>
>             <PatternLayout>
>                 <Pattern>%d{HH:mm:ss,SSS} %m%n
>                 </Pattern>
>             </PatternLayout>
>             <Policies>
>                 <TimeBasedTriggeringPolicy
>                     interval="1" modulate="true" />
>                 <SizeBasedTriggeringPolicy
>                     size="${logSize}" />
> 
>             </Policies>
>         </RollingFile>
>         <RollingFile name="RollingFileError" 
>             fileName="${filename}_error.log"
>             filePattern="${filePath}/sample_error-%d{yyyy-dd-MM}-%i.log"
>             immediateFlush="true">
>             <PatternLayout>
>                 <Pattern>%d{HH:mm:ss,SSS} %p %c{1.}[%L] [%t] %m%n
>                 </Pattern>
>             </PatternLayout>
>             <Policies>
>                 <TimeBasedTriggeringPolicy
>                     interval="1" modulate="true" />
>                 <SizeBasedTriggeringPolicy
>                     size="${logSize}" />
>             </Policies>
>         </RollingFile>
>     </Appenders>
>     <Loggers>
>         <AsyncLogger name="com"
>             level="trace">
>             <AppenderRef ref="RollingFileRegular"/>
>         </AsyncLogger>
>         <Root includeLocation="true" level="trace">
>             <AppenderRef ref="RollingFileError" level="error" />
>         </Root>
>     </Loggers>
> </Configuration> 
> ```

15.  所需的 Maven 依赖项在这里：

> ```
> <dependency>
>     <groupId>org.apache.logging.log4j</groupId>
>     <artifactId>log4j-api</artifactId>
>     <version>2.8.1</version>
> </dependency>
> <dependency>
>     <groupId>org.apache.logging.log4j</groupId>
>     <artifactId>log4j-core</artifactId>
>     <version>2.8.1</version>
> </dependency>
> <dependency>
>     <groupId>com.lmax</groupId>
>     <artifactId>disruptor</artifactId>
>     <version>3.3.6</version>
> </dependency>
> <!-- (Optional)To be used when working 
> with the applications using Log4j 1.x -->
> <dependency>
>     <groupId>org.apache.logging.log4j</groupId>
>     <artifactId>log4j-1.2-api</artifactId>
>     <version>2.8.1</version>
> </dependency> 
> ```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2015-10-17T20:13:29.087

在[@cletus 的回答](https://stackoverflow.com/a/906238/1587329)中，他写道

```
if (log.isDebugEnabled()) {
  log.debug("val is " + value);
} 
```

这可以通过使用[SLF4J](http://www.slf4j.org/)来克服。它提供了格式化帮助

```
log.debug("val is {}", value); 
```

仅当级别为调试时才构造消息。

因此，现在出于性能和稳定性的原因，[建议](http://logback.qos.ch/reasonsToSwitch.html)使用 SL4J 及其配套记录器 Logback 。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-11-14T14:18:35.983

关于实例化记录器，我使用 Eclipse Java 模板设置记录器取得了一些成功：

```
private static Logger log = Logger.getLogger(${enclosing_type}.class); 
```

这避免了 JVM 乱搞堆栈跟踪的问题，并减少了（也许是微不足道的）从一开始就创建堆栈跟踪的开销。

使用这样的模板的好处是，如果您想为记录器设置一个统一的标准，您可以与您的团队共享它。

看起来 IntelliJ 支持表示封闭类型名称的模板变量的相同概念。我看不到在 NetBeans 中轻松做到这一点的方法。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-05-12T09:23:11.833

我正在查看应用程序的日志级别，目前正在检测一种模式：

```
private static final Logger logger = Logger.getLogger(Things.class)

public void bla() {
  logger.debug("Starting " + ...)
  // Do stuff
  ...
  logger.debug("Situational")

  // Algorithms
  for(Thing t : things) {
    logger.trace(...)
  }

  // Breaking happy things
  if(things.isEmpty){
    logger.warn("Things shouldn't be empty!")
  }

  // Catching things
  try {
    ...
  } catch(Exception e) {
    logger.error("Something bad happened")
  }

  logger.info("Completed "+...)
} 
```

log4j2-file 定义了一个 socket-appender，带有一个故障转移文件-appender。还有一个控制台附加程序。有时我在情况需要时使用 log4j2 标记。

认为额外的观点可能会有所帮助。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-05-25T10:48:54.390

您描述的那种 log4j 配置的首选选项是使用**log4j 配置文件**。这允许您实现的用户完全按照您的要求进行操作，因为他们稍后可以使用更适合他们自己实现的内容覆盖您的配置。请参阅[**此处**](http://wiki.apache.org/logging-log4j/Log4jXmlFormat)以获得非常彻底的入门。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2009-05-25T11:10:56.153

我可能从某个地方偷了这个，但它很好。

它减少了在复制和粘贴时混淆记录器的风险^h^h^h 重构，并且输入更少。

*在您的代码中：*

```
private final static Logger logger = LoggerFactory.make(); 
```

*...在 LoggerFactory 中：*

```
public static Logger make() {
    Throwable t = new Throwable();
    StackTraceElement directCaller = t.getStackTrace()[1];
    return Logger.getLogger(directCaller.getClassName());
} 
```

（请注意，堆栈转储是在初始化期间完成的。堆栈跟踪*可能*不会被 JVM 优化掉，但实际上并不能保证）

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-12-19T23:35:23.127

另外，我认为简单的 Java 日志门面 (SLF4J) ( [http://www.slf4j.org/](http://www.slf4j.org/) ) 很重要。由于在一个大项目的不同部分使用不同的日志框架的一些问题，SLF4J 是解决问题以成功管理这些部分的事实标准，不是吗？

第二个概念：似乎一些老派的任务可以被[Aspect-Oriented-Programming](http://en.wikipedia.org/wiki/Aspect-oriented_programming)替代，Spring frmwrk 有它自己的[实现](http://static.springsource.org/spring/docs/2.5.5/reference/aop.html)，AOP-approach for logging 考虑在 StackOverflow 和[这里](https://stackoverflow.com/questions/2071050/is-using-spring-aop-for-logging-a-good-idea)[在](http://forum.springsource.org/showthread.php?106071-is-AOP-preferred-for-Logging)Spring 博客上。

# apache-flex - Flex 将 SWF 作为 Sprite 加载。我如何将其加载为影片剪辑？

> ID：906234
> 
> 赞同：2
> 
> 时间：2009-05-25T10:45:47.657
> 
> 标签：apache-flex, casting, movieclip, swfloader

[在遵循（ TheFlashCanon 的优秀教程](http://flash.fincanon.com/archives/category/flex)）使 SWF 与 Flex 通信时，我在将 SWFLoader.content 转换为 MovieClip 实例时遇到问题。有问题加载的 SWF 是使用 Flash CS3（使用 actionscript 3）编译的。

但是，当我尝试获取 SWFLoader 的内容并将其转换为 MovieClip 实例时，我总是会收到此错误：

> TypeError：错误 #1034：类型强制失败：无法将 maix::main_maix@49f94ec1 转换为 flash.display.MovieClip。在 test1/onLoadMinigameComplete()[/Users/chiyin/Documents/Flex Builder 3/SimpleGirlfriend/src/Main.as:68]

其中 maix::main_maix@49f94ec1 是我的电影的一个实例。

我究竟做错了什么？加载的 swf 可以正常播放，并且不表示为 AVM1Movie。

更新：发现 SWF 是作为 Sprite 而不是 Movieclip 导入的。如何强制 SWFLoader 将 SWF 作为 Movieclip 而不是 Sprite 对象加载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-25T17:59:33.853

`main_maix`看起来是正在加载的 swf 的文档类。如果是这样， main_maix 应该扩展`MovieClip`而不是`Sprite`：

```
public class main_maix extends MovieClip 
```

此外，您始终可以将类转换为能够自由访问它的对象（但不是一个很好的做法）。您可能只想“将其转换为 main_maix”：

```
/**
 * Loader finished loading
 * 
 * @param Event Complete event
 * @return void
 */
private function onLoadMinigameComplete(event:Event):void 
{
    // -- either will allow "free access" to methods of main_maix
    var maixAsObject:Object = Object(loader.content);
    var maixAsMaix:main_maix = main_maix(loader.content);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-01T19:52:26.103

我不知道这对于动态加载的 swfs 是否相同。但是，如果您在 Flash 创作环境中制作影片剪辑，并且它只有一个帧。然后将其嵌入到 Flex 应用程序中。它将作为精灵而不是影片剪辑嵌入。

# sql-server - SQL 持久化服务

> ID：906237
> 
> 赞同：0
> 
> 时间：2009-05-25T10:48:02.877
> 
> 标签：sql-server, persistence

我正在尝试运行来自使用持久性服务功能的 Workflow Foundation 的代码示例。在我观察到的代码中：

```
Initial Catalog=SqlPersistenceService;Data Source=localhost;Integrated Security=SSPI; 
```

当我运行代码时，我遇到了异常。如何在我的 SQLEXPRESS 服务器上启用持久性服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-25T11:02:25.873

见`%WINDIR%\Microsoft.NET\Framework\v3.0\Windows Workflow Foundation\SQL\EN`。这些是启用`SqlWorkflowPersistenceService`.

您将需要`SqlPersistenceService_Schema.sql`和`SqlPersistenceService_Logic.sql`。第一个定义数据库和表的结构，第二个定义存储过程。

# java - JPA+SQLite 问题

> ID：906241
> 
> 赞同：0
> 
> 时间：2009-05-25T10:50:18.270
> 
> 标签：java, hibernate, sqlite, jpa

我正在将 JPA 配置为使用 SQLite db，并使用 hibernate 作为提供程序。我将一个 pojo 映射到一张桌子上，没有 fk，现在很简单。我正在使用在互联网上找到的 SQLDialect。当我尝试初始化我的应用程序时，我得到了这个堆栈跟踪：

```
java.sql.SQLException: SQLite supports only TRANSACTION_SERIALIZABLE
    at org.sqlite.Conn.setTransactionIsolation(Conn.java:131)
    at com.mchange.v2.c3p0.impl.NewProxyConnection.setTransactionIsolation(NewProxyConnection.java:701)
    at org.hibernate.connection.C3P0ConnectionProvider.getConnection(C3P0ConnectionProvider.java:58)
    at org.hibernate.tool.hbm2ddl.SuppliedConnectionProviderConnectionHelper.prepare(SuppliedConnectionProviderConnectionHelper.java:27)
    at org.hibernate.tool.hbm2ddl.SchemaUpdate.execute(SchemaUpdate.java:127)
    at org.hibernate.impl.SessionFactoryImpl.<init>(SessionFactoryImpl.java:314)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1300)
    at org.hibernate.cfg.AnnotationConfiguration.buildSessionFactory(AnnotationConfiguration.java:915)
    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:730)
    at org.hibernate.ejb.HibernatePersistence.createEntityManagerFactory(HibernatePersistence.java:121)
    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:51)
    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:33)
    at hr.loggingserver.listeners.ApplicationListener.contextInitialized(ApplicationListener.java:27)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:3843)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4342)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:719)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:443)
    at org.apache.catalina.core.StandardService.start(StandardService.java:516)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:710)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:578)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:288)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413) 
```

这是我的persistence.xml：

```
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd"
    version="1.0">
    <persistence-unit name="loggingServerDB" transaction-type="RESOURCE_LOCAL">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>

        <class>hr.loggingserver.model.Type</class>
        <class>hr.loggingserver.model.LogSpec</class>

        <properties>
            <property name="hibernate.bytecode.use_reflection_optimizer" value="true"/>
            <property name="hibernate.default_batch_fetch_size" value="100"/>
            <property name="hibernate.cache.use_second_level_cache" value="true"/>
<!--        <property name="hibernate.cache.use_query_cache" value="true"/>     -->
            <property name="hibernate.cache.provider_class" value="net.sf.ehcache.hibernate.EhCacheProvider"/>

            <property name="hibernate.archive.autodetection" value="class, hbm"/>
            <property name="hibernate.show_sql" value="true"/>
            <property name="hibernate.format_sql" value="true"/>
            <property name="hibernate.hbm2ddl.auto" value="update"/>
            <property name="hibernate.dialect" value="hr.loggingserver.model.dao.dialect.SQLiteDialect"/>
            <!--  Set isolation level to repeatable_read (read_commited je 2) -->
            <property name="hibernate.connection.isolation" value="4"/>
            <property name="hibernate.connection.release_mode" value="after_transaction"/>

            <property name="hibernate.connection.driver_class" value="org.sqlite.JDBC"/>
            <property name="hibernate.connection.url" value="jdbc:sqlite:C:\work1\logging-server2\db1"/>
            <!--<property name="hibernate.connection.username" value="labosi"/>
            <property name="hibernate.connection.password" value="s%aHb31J7"/>-->
            <property name="hibernate.c3p0.min_size" value="5"/>
            <property name="hibernate.c3p0.max_size" value="50"/>
            <property name="hibernate.c3p0.timeout" value="300"/>
            <property name="hibernate.c3p0.max_statements" value="50"/>
            <property name="hibernate.c3p0.idle_test_period" value="600"/>

        </properties>
    </persistence-unit>
</persistence> 
```

这是我正在使用的 SQLDialect 类：

```
package hr.loggingserver.model.dao.dialect;
/*
 * The author disclaims copyright to this source code. In place of
 * a legal notice, here is a blessing:
 * 
 * May you do good and not evil.
 * May you find forgiveness for yourself and forgive others.
 * May you share freely, never taking more than you give.
 *
 */
import java.sql.Types;

import org.hibernate.dialect.Dialect;
import org.hibernate.dialect.function.StandardSQLFunction;
import org.hibernate.dialect.function.SQLFunctionTemplate;
import org.hibernate.dialect.function.VarArgsSQLFunction;
import org.hibernate.Hibernate;

public class SQLiteDialect extends Dialect {
    public SQLiteDialect() {
        super();
        registerColumnType(Types.BIT, "integer");
        registerColumnType(Types.TINYINT, "tinyint");
        registerColumnType(Types.SMALLINT, "smallint");
        registerColumnType(Types.INTEGER, "integer");
        registerColumnType(Types.BIGINT, "bigint");
        registerColumnType(Types.FLOAT, "float");
        registerColumnType(Types.REAL, "real");
        registerColumnType(Types.DOUBLE, "double");
        registerColumnType(Types.NUMERIC, "numeric");
        registerColumnType(Types.DECIMAL, "decimal");
        registerColumnType(Types.CHAR, "char");
        registerColumnType(Types.VARCHAR, "varchar");
        registerColumnType(Types.LONGVARCHAR, "longvarchar");
        registerColumnType(Types.DATE, "date");
        registerColumnType(Types.TIME, "time");
        registerColumnType(Types.TIMESTAMP, "timestamp");
        registerColumnType(Types.BINARY, "blob");
        registerColumnType(Types.VARBINARY, "blob");
        registerColumnType(Types.LONGVARBINARY, "blob");
        // registerColumnType(Types.NULL, "null");
        registerColumnType(Types.BLOB, "blob");
        registerColumnType(Types.CLOB, "clob");
        registerColumnType(Types.BOOLEAN, "integer");

        registerFunction("concat", new VarArgsSQLFunction(Hibernate.STRING, "",
                "||", ""));
        registerFunction("mod", new SQLFunctionTemplate(Hibernate.INTEGER,
                "?1 % ?2"));
        registerFunction("substr", new StandardSQLFunction("substr",
                Hibernate.STRING));
        registerFunction("substring", new StandardSQLFunction("substr",
                Hibernate.STRING));
    }

    public boolean supportsIdentityColumns() {
        return true;
    }

    /*
     public boolean supportsInsertSelectIdentity() {
     return true; // As specify in NHibernate dialect
     }
     */

    public boolean hasDataTypeInIdentityColumn() {
        return false; // As specify in NHibernate dialect
    }

    /*
     public String appendIdentitySelectToInsert(String insertString) {
     return new StringBuffer(insertString.length()+30). // As specify in NHibernate dialect
     append(insertString).
     append("; ").append(getIdentitySelectString()).
     toString();
     }
     */

    public String getIdentityColumnString() {
        // return "integer primary key autoincrement";
        return "integer";
    }

    public String getIdentitySelectString() {
        return "select last_insert_rowid()";
    }

    public boolean supportsLimit() {
        return true;
    }

    public String getLimitString(String query, boolean hasOffset) {
        return new StringBuffer(query.length() + 20).append(query).append(
                hasOffset ? " limit ? offset ?" : " limit ?").toString();
    }

    public boolean supportsTemporaryTables() {
        return true;
    }

    public String getCreateTemporaryTableString() {
        return "create temporary table if not exists";
    }

    public boolean dropTemporaryTableAfterUse() {
        return false;
    }

    public boolean supportsCurrentTimestampSelection() {
        return true;
    }

    public boolean isCurrentTimestampSelectStringCallable() {
        return false;
    }

    public String getCurrentTimestampSelectString() {
        return "select current_timestamp";
    }

    public boolean supportsUnionAll() {
        return true;
    }

    public boolean hasAlterTable() {
        return false; // As specify in NHibernate dialect
    }

    public boolean dropConstraints() {
        return false;
    }

    public String getAddColumnString() {
        return "add column";
    }

    public String getForUpdateString() {
        return "";
    }

    public boolean supportsOuterJoinForUpdate() {
        return false;
    }

    public String getDropForeignKeyString() {
        throw new UnsupportedOperationException(
                "No drop foreign key syntax supported by SQLiteDialect");
    }

    public String getAddForeignKeyConstraintString(String constraintName,
            String[] foreignKey, String referencedTable, String[] primaryKey,
            boolean referencesPrimaryKey) {
        throw new UnsupportedOperationException(
                "No add foreign key syntax supported by SQLiteDialect");
    }

    public String getAddPrimaryKeyConstraintString(String constraintName) {
        throw new UnsupportedOperationException(
                "No add primary key syntax supported by SQLiteDialect");
    }

    public boolean supportsIfExistsBeforeTableName() {
        return true;
    }

    public boolean supportsCascadeDelete() {
        return false;
    }
} 
```

有谁知道我做错了什么？谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-25T11:42:06.137

SQLException 的原因是您使用的 SQLite JDBC 驱动程序不支持您指定的事务隔离级别。

在您的 persistence.xml 中，hibernate.connection.isolation 设置为 4 (TRANSACTION_REPEATABLE_READ)。SQLException 表示驱动程序仅支持 TRANSACTION_SERIALIZABLE。这相当于将 hibernate.connection.isolation 设置为 8。您需要更改此值才能使用驱动程序。

# apache-flex - 我可以通过 vbscript 注入从 flex 动作脚本访问 excel 数学函数吗？

> ID：906243
> 
> 赞同：1
> 
> 时间：2009-05-25T10:50:39.657
> 
> 标签：apache-flex, math, vbscript

我们希望在 Flex GUI 图表中显示一些数学数据。我们需要对以下两个数据数组进行绘图。

每个的自相关和相关系数的互相关

看起来 Flex 本身不支持像互相关、自相关和相关系数这样的科学公式。**如果我错了或者此时有合理的替代方案，请纠正我。**

在寻找替代方案时，我确实在 actionscript.org 上看到了这篇文章 [--not allowed--]

我目前正在尝试查看是否可以从动作脚本中调用 excel 公式。看起来在 flex 和 vbscript 之间传递数据可能涉及一些复杂性。**这会是正确的方法吗？**

这是针对 POC 的，因此我们只是在寻找快速破解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-08-28T10:44:19.523

这可能为时已晚，但是，好吧......我很无聊:)

```
`private function correlationCoeff(X:Array, Y:Array):Number
{
    //correlation coeff between two random variables X and Y is defined as :
    //correlation(X,Y) = Covar(X,Y)/(sqrt(Var(X)) * sqrt(Var(Y)))
    //
    //Var(X) = Covar(X,X);
    //Covar(X,Y) = E((X-xm)(Y-ym)); where xm, ym are the population means.
    return sampleCovar(X, Y)/Math.sqrt(sampleCovar(X, X) * sampleCovar(Y, Y));
}

private function sampleCovar(X:Array, Y:Array):Number
{
    //Sample covariance is Sum((X-xm)(Y-ym))/n-1
    //where n is the sample size and xm & ym are sample means.
    //I'll assume that X and Y are the same size...
    var total:Number = 0;
    var xm:Number = sampleMean(X);
    var ym:Number = (X == Y)? xm : sampleMean(Y);
    for (var i:int=0; i

private function sampleMean(X:Array):Number
{
    //Sample mean = Sum(X)/(sample size)
    var total:Number = 0;
    for each(var x:Number in X)
        total += x;
    return total/X.length;
}` 
```

`我宁愿假设您正在使用离散随机变量，而不是使用信号处理做一些时髦的事情。请记住，sampleCovar 不会返回与 Excel 中的 COVAR 相同的东西，因为 Excel 使用有偏估计量（即它除以 n 而不是 (n-1)），但这在计算相关系数时会被抵消。`

 `* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-08-12T18:51:35.023

使用 ActionScript，您可以编写自己的 COREL 版本来进行计算。这比尝试与 Excel 通信要容易得多。当然，没有直接的方式可以从 Flex 应用程序与 Excel 进行通信。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-25T12:40:02.447

我从未使用过 VBScript，但我知道您可以使用 AS3 中的类从 AS3 访问 JavaScript，反之亦然`ExternalInterface`。据我所知，您还可以通过 JavaScript 访问网页中嵌入的 VB 函数。因此，从 Flash 调用 VB 函数应该不会太难。

# c++ - 如何在 C++ 中使用自定义类型作为映射的键？

> ID：906244
> 
> 赞同：23
> 
> 时间：2009-05-25T10:51:25.973
> 
> 标签：c++, struct, key, operator-overloading, stdmap

我正在尝试将自定义类型分配为`std::map`. 这是我用作键的类型：

```
struct Foo
{
    Foo(std::string s) : foo_value(s){}

    bool operator<(const Foo& foo1) {   return foo_value < foo1.foo_value;  }

    bool operator>(const Foo& foo1) {   return foo_value > foo1.foo_value;  }

    std::string foo_value;
}; 
```

与 一起使用时`std::map`，我收到以下错误：

```
error C2678: binary '<' : no operator found which takes a left-hand operand of type 'const Foo' (or there is no acceptable conversion) c:\program files\microsoft visual studio 8\vc\include\functional 143 
```

如果我将其更改为`struct`以下，一切正常：

```
struct Foo
{
    Foo(std::string s) : foo_value(s)   {}

    friend bool operator<(const Foo& foo,const Foo& foo1) { return foo.foo_value < foo1.foo_value;  }

    friend bool operator>(const Foo& foo,const Foo& foo1) { return foo.foo_value > foo1.foo_value;  }

    std::string foo_value;
}; 
```

没有任何改变，除了操作符被重载为*friend*。为什么我的第一个代码不起作用？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2009-05-25T10:53:28.717

我怀疑你需要

```
bool operator<(const Foo& foo1) const; 
```

请注意`**const**`参数之后，这是为了使“您的”（比较中的左侧）对象保持不变。

只需要一个运算符的原因是它足以实现所需的排序。要回答抽象问题“a 必须在 b 之前吗？” 知道 a 是否小于 b 就足够了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-25T11:03:41.707

它可能正在寻找 const 成员运算符（无论正确的名称是什么）。这有效（注意 const）：

```
bool operator<(const Foo& foo1) const { return foo_value < foo1.foo_value;} 
```

编辑：从我的答案中删除`operator>`，因为它不需要（从问题复制/粘贴），但它吸引了评论:)

注意：我 100% 确定您需要该**const**，因为我编译了该示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-03T13:46:13.797

其他答案已经解决了您的问题，但我想提供一个替代解决方案。从[C++11](https://en.wikipedia.org/wiki/C%2B%2B11)开始，您可以使用[lambda 表达式](https://en.cppreference.com/w/cpp/language/lambda)而不是`operator<`为您的`struct`. （`operator>`您的地图不需要工作。）向地图的构造函数提供 lambda 表达式具有一定的优势：

*   我发现 lambda 表达式的声明比运算符更简单且不易出错。
*   如果您无法修改`struct`要存储在地图中的内容，此方法特别有用。
*   `struct`您可以为使用您作为键的不同地图提供不同的比较功能。
*   您仍然可以`operator<`进行不同的定义并将其用于不同的目的。

因此，您可以保持`struct`如下简短：

```
struct Foo {
    Foo(std::string s) : foo_value(s) {}
    std::string foo_value;
}; 
```

然后可以通过以下方式定义您的地图：

```
int main() {
    auto comp = [](const Foo& f1, const Foo& f2) { return f1.foo_value < f2.foo_value; };
    std::map<Foo, int, decltype(comp)> m({ {Foo("b"), 2}, {Foo("a"), 1} }, comp);
    // Note: To create an empty map, use the next line instead of the previous one.
    // std::map<Foo, int, decltype(comp)> m(comp); 

    for (auto const &kv : m)
        std::cout << kv.first.foo_value << ": " << kv.second << std::endl;

    return 0;
} 
```

输出：

> 甲：1
> 乙：2

[Ideone 上的代码](https://ideone.com/haByIO)

# com - arcgis com 注册

> ID：906255
> 
> 赞同：0
> 
> 时间：2009-05-25T10:53:49.760
> 
> 标签：com, installation, arcgis

我有几个类库，其中包含一些 ArcGIS 的命令和自动更新程序。到目前为止，每个库都包含一个安装程序类，我们有一个单独的安装项目，负责安装所有 dll。就像[在这里](http://edndoc.esri.com/arcobjects/9.2/NET/0df20605-b457-42d6-b63c-341a3824474a.htm)一样。
我现在创建了另一个包含工具栏的库，它应该包含我们拥有的所有命令。该项目引用了其他项目，并且`AddItem`（来自`BaseToolbar`基类）正在使用`AddItem(Type type)`重载，使其全部为强类型，而不仅仅是基于字符串（用于 CLSID 或名称）。
当然，Toolbar 项目包含安装程序。我只是想知道更改建议的安装程序实现（来自上面的链接）是否是一个好主意，以便确保所有命令的 dll 都将被注册（迭代输出文件夹中的 dll 文件，并注册他们？有更好的方法吗？）
这会将安装问题从每个命令项目转移到一个集中的地方。我认为通过这种方式添加更多命令会更容易，因为我只需要从 Toolbar 项目中添加对它们的引用。这有意义吗，还是我应该坚持在每个项目中单独放置一个安装程序，然后将它们一个一个添加到安装项目中？

还有一件事——有没有一种简单的方法可以在 ArcMAP 中找到几个命令的来源？我有一些奇怪的类别（由这台机器上的过去用户创建），我想删除旧命令。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-26T05:42:53.540

我认为这是有道理的。当安装程序（如 Wise、installshield 等）在您的安装程序程序集中调用 RegisterAssembly 和 UnregisterAssembly 时，您只需确保一切都在正确的位置。例如，如果卸载在调用 UnregisterAssembly 之前删除了您的“命令”程序集，这可能是一个问题。我认为您只需要对其进行测试即可找到答案。只要您知道所有“命令”程序集都可用，它似乎就可以正常工作。

您也可以通过将通用安装代码包含在单独的通用程序集中并始终实现安装程序类来解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-03T13:04:05.567

更好和方便的工作流程是将所有命令等放在一个库/程序集本身中。这样你就只有一个 dll 可以注册。

至于查找其他自定义工具来自的 dll：有一个技巧。调试运行 ArcMap 的任何自定义 ArcGIS 扩展模块或示例。留意 Visual Studio 中的输出窗口。这将为您提供 ArcMap 加载的所有 dll 的列表

# javascript - 正则表达式不会从字符串中删除非数字

> ID：906257
> 
> 赞同：0
> 
> 时间：2009-05-25T10:54:25.173
> 
> 标签：javascript, regex

我有以下字符串“项目编号：237728”我正在应用替换

```
str.replace(/[^0-9]/g,''); 
```

但字符串不会改变，非数字不会被删除。知道为什么吗？谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-25T11:01:41.507

您是在分配返回的值并使用它，例如`str = str.replace(/[^0-9]/g,'');`，还是期望原始字符串发生变化？

字符串函数不修改原始字符串，它们返回修改后的字符串。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-25T10:58:04.493

这有效，请尝试粘贴到浏览器的位置框中：

```
javascript:alert("item number:237728".replace(/[^0-9]/g,"")) 
```

正如尼尔所说，我怀疑你的问题可能是字符串可变性。确保您从`replace()`.

# programming-languages - 为长期项目选择平台

> ID：906259
> 
> 赞同：4
> 
> 时间：2009-05-25T10:54:45.937
> 
> 标签：programming-languages

我刚刚发布了一个关于[WPF 是否是长期项目的好选择的](https://stackoverflow.com/questions/906144/choosing-c-over-wpf-for-ultra-long-term-project)问题，这让我对长期项目的开发进行了总体思考。

如果要为一个预计会持续多年（至少 10 年）的项目选择技术（语言/环境/框架），您会选择什么？我们今天认为理所当然的哪些技术预计将在 3-5 年内消失？

C# 会在 10 年后存在吗？鲁比会吗？5 年后 Python 的解释器还会运行 Python 3.0 代码吗？

你会选择什么？你绝对不会选择什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-25T10:58:01.047

将您的项目绑定到 C# 与将其绑定到 Windows 的风险差不多，即风险不大。

除非发生灭绝级别事件，否则 Windows 不会在一夜之间消失。

除此之外很难说，因为它只取决于您正在开发的项目。现在开发某些东西并且在未来 10 多年内完全不需要维护或修改的可能性是……遥远的。

但只要看看现在和 10 年前的区别：

*   Java 大约在 10 年前出现，但那些 JDK (1.0/1.1) 早已停产，这些应用程序需要更新才能在 Java 5+（当前支持的最低 JDK）上运行；
*   用 C/C++ 为 Win32 API 编写的应用程序可能仍然大部分都可以，尽管 Vista（在较小程度上是 2000/XP）确实破坏了一些在 Win95/98 上运行良好的东西。尽管如此，那个时代的 DOS 游戏（例如）通常仍然在模拟器上运行。
*   Perl 仍然存在并且仍然在版本 5 上；
*   有一些 COBOL 应用程序已经运行了数十年，尽管它们中的任何一个已经运行了 10 年而不进行修改的可能性几乎为零。

所以我真的不知道你在期待什么。软件是一个活生生的东西。如果你不喂它和维护它，它就会死。您应该关注的是灾难性的变化（例如，如果您将农场押在 BeOS 的成功上），任何与 Windows 或 Linux 相关的东西都会很好。Java、.Net 和 Python 仍将存在（我敢打赌）。但是需要小心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-25T11:10:28.340

对一项技术进行投资的人越多，它就越有可能存活下来。也就是说，当经典的 VB 停产并且 VB.net 与 VB6 不兼容时，很多 VB 开发人员感到恼火。

就个人而言，我会将赌注押在 Java 上。但无论如何，这是一个赌注。

# eclipse - Eclipse 控制台：检测警告和错误模式并使其可点击

> ID：906261
> 
> 赞同：9
> 
> 时间：2009-05-25T10:55:43.470
> 
> 标签：eclipse, console, design-patterns

我正在 Eclipse 中的 ant 中为我们的一些构建运行 flex 编译器（mxmlc）（它们也打算在我们的持续集成服务器上运行，这就是为什么我不使用 flex builder 本身构建）——模式eclipse-console 无法识别 mxmlc，因此我无法单击它们。

图案是这样的：

<文件的绝对路径>(<line no>): col: <column no> 警告: <message>

想出一个正则表达式来检测这些消息应该不难。

如何让 eclipse 识别一种新型的错误消息？我是否必须编写自己的扩展程序，或者是否有一些一般支持，我可以在配置中添加正则表达式？

我也可以尝试让 ant 将错误转换为看起来像 java 错误的东西，但我宁愿让 eclipse 识别 mxmlc 错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-28T14:49:57.043

**编辑：** 我发现了一个插件，它看起来更多：[Sunshade Errorlink](http://sunshade.sourceforge.net/)（向下滚动一点）。我不确定这到底有多灵活，但它提到了蚂蚁支持。

* * *

我知道您可能想要一个实际的实现，但这里是您想要的插件设计的粗略起点。如果有人想实现它，请在此处放置一个链接以指向它。如果我有空闲时间，我可能会自己做（哈！）:)

假设控制台基于 TextConsole，这似乎是合理的，[规范](http://www.java2s.com/Open-Source/Java-Document/IDE-Eclipse/ui/org/eclipse/ui/console/TextConsole.java.htm)说：

> 支持正则表达式匹配和超链接的抽象文本控制台。
> 
> **可以通过编程方式或通过org.eclipse.ui.console.consolePatternMatchListeners** 扩展点向控制台注册模式匹配侦听器。

我做了更多查看，[该扩展点的规范](http://help.eclipse.org/help32/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/extension-points/org_eclipse_ui_console_consolePatternMatchListeners.html)具有以下示例：

```
<extension point="org.eclipse.ui.console.consolePatternMatchListener">
  <consolePatternMatchListener
    class="com.example.ExampleConsolePatternMatcher"
    id="com.example.ExampleConsolePatternMatcher"
    regex=".*foo.*">
    <enablement>
      <test 
        property="org.eclipse.ui.console.consoleTypeTest"
        value="exampleConsole"/>
    </enablement>
  </consolePatternMatchListener>
</extension> 
```

您将需要[IPatternMatchListenerDelegate](http://help.eclipse.org/help32/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/ui/console/IPatternMatchListenerDelegate.html)的 API，然后您应该能够使用[TextConsole.addHyperlink](http://help.eclipse.org/help32/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/ui/console/TextConsole.html#addHyperlink(org.eclipse.ui.console.IHyperlink,%20int,%20int))创建所需的链接。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-01-20T12:42:22.057

@zvikico 让我对 Grep 控制台进行了更多研究——它可以设置为制作可点击的链接！

当前链接： http: [//marian.schedenig.name/projects/grep-console/](http://marian.schedenig.name/projects/grep-console/) - 您可以使用 Eclipse-Marketplace 安装它

要获得可点击的链接，必须这样做：

1.  安装 Grep 控制台（我使用的是 3.7.0）
2.  为您的文件/URL添加一个新表达式（`(?)`控制台视图中的图标），确保您的正则表达式仅捕获文件/链接，或者您有一个捕获组`()`以仅匹配文件/链接

    `FFDC-Vorfall an (.*\.txt)`

    将匹配这样的控制台输出：

    `FfdcProvider logIncident FFDC1003I: FFDC-Vorfall an C:\server1_e2f9557d_16.01.20_12.54.37.4484801293756887191925.txt erstellt.`

3.  在此表达式的样式和链接选项卡中，双击整行或捕获组的“链接”单元格。

4.  选择文件或 URL

5.  在文件/URL 的输入字段中，使用`{line}`或`{1}`用于第一个组。然后，Grep 控制台将使用该值。

6.  （可选）制作类似蓝色下划线的样式，以便突出显示链接

7.  要打开文件/链接，您必须按住`CTRL`键（可以在选项中更改），然后单击它

请参阅：文档的[样式和链接](http://marian.schedenig.name/wp-content/static/grepconsole_userguide/#editing-grep-expressions-styles-links)以及[模式字符串](http://marian.schedenig.name/wp-content/static/grepconsole_userguide/#pattern-strings)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-29T01:06:53.830

几年后我遇到了这个问题，想用 Eclipse CDT 做这种事情。Sunshade Errorlink 在我的 Eclipse 版本（4.4.0）中似乎不起作用。因此，我整理了一个简单且不专业的插件，似乎可以为我充分解决问题。我已经把它放在 GitHub 上，以防其他人可能想省去类似的麻烦，或者使用我的代码作为参考： [https ://github.com/mjwach/ErrorLinkyThing](https://github.com/mjwach/ErrorLinkyThing)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-25T11:54:19.497

[Grep 控制台](http://marian.musgit.com/projects_grepconsole.php)插件将完全做到这一点。

# asp.net-mvc - 未付款时重定向到页面

> ID：906269
> 
> 赞同：1
> 
> 时间：2009-05-25T10:57:26.570
> 
> 标签：asp.net-mvc, redirect

我在 C# 中使用 MVC。如果用户没有为某件商品付款，我需要将用户带到付款页面。我需要一个通用类来检查此功能并重定向到付款页面。

就像将所有控制器继承到基本控制器一样。在该基本控制器中，我必须检查某些控制器和操作（即 ViewPage）的付款状态并重定向到付款页面。

请有人建议最好的方法来做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-26T09:51:28.517

像这样创建一个自定义 actionFilterAttribute（此示例的工作原理是将您的项目存储在会话中，但您可以根据需要对其进行修改）：

```
public abstract class RequiresPaymentAttribute : ActionFilterAttribute
{
    protected bool ItemHasBeenPaidFor(Item item)
    {
        // insert your check here
    }

    private ActionExecutingContext actionContext;

    public override void OnActionExecuting(ActionExecutingContext actionContext)
    {
        this.actionContext = actionContext;

        if (ItemHasBeenPaidFor(GetItemFromSession()))
        {
            // Carry on with the request
            base.OnActionExecuting(actionContext);
        }            
        else
        {
            // Redirect to a payment required action
            actionContext.Result = CreatePaymentRequiredViewResult();
            actionContext.HttpContext.Response.Clear();
        }
    }

    private User GetItemFromSession()
    {
        return (Item)actionContext.HttpContext.Session["ItemSessionKey"];
    }

    private ActionResult CreatePaymentRequiredViewResult()
    {
        return new MyController().RedirectToAction("Required", "Payment");
    }
} 
```

然后，您可以简单地为所有需要此检查的控制器操作添加一个属性：

```
public class MyController: Controller
{
    public RedirectToRouteResult RedirectToAction(string action, string controller)
    {
        return RedirectToAction(action, controller);
    }

    [RequiresPayment]
    public ActionResult Index()
    {
        // etc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-25T13:53:52.283

我建议您使用动作属性来执行此操作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-25T15:39:56.650

创建您的自定义 ActionFilter 是最好的解决方案。您可以下载 ASP.NET MVC 源代码并查看 System.Web.Mvc.AuthorizeAttribute 类。我认为这对你来说是一个很好的起点。

# sql-server-express - 更改 SQL Server Express 表名

> ID：906270
> 
> 赞同：3
> 
> 时间：2009-05-25T10:57:26.743
> 
> 标签：sql-server-express

嗨，我正在使用 Visual Studio 2008，我的 ASP.NET MVC 项目的 app_data 中有一个 .mdf。我试图通过服务器资源管理器中的属性更改表的名称，但它是灰色的。是否可以更改名称？

我可以看到您可以复制表格，但我不确定如何将其副本粘贴到某处？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-25T11:05:25.337

双击 .mdf 文件。然后它将在服务器资源管理器中打开。右键单击您的表并选择“打开表定义”。然后打开“属性”窗口-第一个属性是“（名称）”-更改它并保存表格-就是这样！

# real-time - 简单的网络聊天，多条战线

> ID：906282
> 
> 赞同：0
> 
> 时间：2009-05-25T11:00:07.220
> 
> 标签：real-time, livechat, frontend

我正在寻找解决此问题的方法：

我需要为具有多个前端的网站创建简单的几乎类似实时的网络聊天。网络聊天不需要任何图标，只需昵称时间和消息。

网站在.net 上运行。

想要聊天的用户必须登录系统。对其已经处理的用户进行身份验证。这不是问题，其他人只能观看对话。

我在想，因为它在多个方面运行，所以应该使用 DB 或每秒向该 WS 发出请求的 WS 等等。从这里我不知道我迷路了......我在想ajax应该将收到的lastmassage id回发到Web服务，并且Web服务会向用户发送自上次收到消息以来的所有最新帖子。这应该每秒完成一次，它看起来像它的实时聊天，这将是一个服务器负载的地狱。

你们有什么感想？和建议有什么想法吗？和工作解决方案？

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-25T11:49:50.817

您可以查看 XMPP 协议来执行此类任务。[XEP-0124 同步 HTTP 上的双向流 (BOSH)](http://xmpp.org/extensions/xep-0124.html "XEP-0124 同步 HTTP 上的双向流 (BOSH)")定义了如何创建基于 HTTP 的持久 TCP 连接的错觉，即使您不使用 XMPP，这也可能很有用。

在软件方面，您可以使用[ejabberd](http://www.process-one.net/en/ejabberd/ "埃贾伯德")作为服务器，而[strophe](http://code.stanziq.com/strophe/ "Strophe 客户端")有 Javascript 客户端。对于您的需要，所有这些可能有点矫枉过正，但它会给您一个关于如何执行此类事情的好主意。

# architecture - 分层架构中同一层的模块

> ID：906284
> 
> 赞同：0
> 
> 时间：2009-05-25T11:00:39.357
> 
> 标签：architecture, layered

理论上，在分层架构中，您可以在同一层上拥有多个模块。这个模块可以相互交叉引用吗？在技​​术上是可能的，例如。使用.NET？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-25T11:07:56.893

当然可以这样做，只是注意不要在模块之间引入任何循环依赖。一般来说，给定层的模块应该只依赖于同一层或它下面的层的其他模块。模块不应该知道它们上面的层。

如果您想让这一点更加严格，那么您还可以限制对来自当前层下的同一层或其他层的其他模块的依赖。

将公开的接口保持在最低限度，例如只公开一组核心的公共接口、值对象和异常总是一个好主意。您可以使用语言的访问控制功能（即私有/包/公共）来限制模块内部的可见性，以免溢出到其他层。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-25T11:16:49.323

从技术上讲，您可以在 .NET 中按照您想要的任何方向进行交叉引用（DAL 引用 UI 组件没有技术限制，即使这可能不是一个好主意）。我认为在同一层中引用模块没有问题。

但是我们需要稍微看一下“层”这个词，因为层有不同的形状和大小。通常，当我们使用“层”这个词时，我们会想到数据访问层或表示层，我们通常允许层向下看，但不能向上看。

在每一层内，不同的模块通常也让它们自己按逻辑排列成层。同样的规则在这里适用；一个模块可以向下看，但不能向上看。考虑到这一点，在同一（外）层中引用模块感觉相当安全。

只是不要让两个模块直接或间接地相互引用。如果您发现 A 和 B 都需要彼此的功能（表明 A 和 B 处于同一级别），您可能需要重构代码，可能需要引入一个新模块 C，在逻辑上放置在 A 和 B 下方其中可以使用。

还要记住使模块尽可能分离；他们对彼此的了解越少越好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-25T11:17:56.217

正如 Pavel 所说，小心你的循环依赖。如果你绝对不能没有循环依赖（你称之为交叉引用），那么这些类不仅必须来自同一个“层”，而且还必须来自同一个程序集。

话虽这么说，不应该有交叉引用的理由 - 不仅应该（如pavel所说）模块只依赖于它们下面的层，而且在所有情况下都应该存在单向依赖关系。

这条规则有一些逻辑上的例外，例如在领域模型中——例如，客户将有许多订单。在这种情况下（尤其是 ORM 等），拥有一份关于客户的订单列表以及每个订单对客户的引用可能会很有用。就服务等功能单元而言，应该只有一种方式依赖。

解决此问题的一种方法是通过 Windsor、autofac、spring.net 等使用控制反转。您可以在程序集中定义一个接口，以及另一个使用该接口的具体实现的对象。另一个库可能包含实际的实现（这意味着程序集必须引用第一个程序集）。在这种情况下，IoC 容器会抓取实现。

# javascript - 需要获取循环中的每个选中的复选框值

> ID：906285
> 
> 赞同：0
> 
> 时间：2009-05-25T11:00:41.900
> 
> 标签：javascript, jquery

```
$(document).ready(function() {
  function countChecked() {
    var n = $("input:checked").length;
    $("div").text(n + (n <= 1 ? " is" : " are") + " checked!");
  }
  countChecked();
  $(":checkbox").click(countChecked);
});
```

```
div {
  color: red;
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<form>
  <input type="checkbox" name="newsletter" checked="checked" value="Hourly" />
  <input type="checkbox" name="newsletter" value="Daily" />
  <input type="checkbox" name="newsletter" value="Weekly" />
  <input type="checkbox" name="newsletter" checked="checked" value="Monthly" />
  <input type="checkbox" name="newsletter" value="Yearly" />
</form>
```

我需要获取所有选中复选框的值，例如“Hourly”、“Daily”

如何获得选中复选框的所有值有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-25T11:36:25.417

Pim Jager 略有改进（猜测您想要返回值的数组）：

```
function getCheckedNames(){
 var arr = new Array();
 var $checked = $('[@name=newsletter]:checked');
 $checked.each(function(){ 
  arr.push($(this).val());
 });
 return arr;
} 
```

并且随着duckyflip的改进：

```
function getCheckedNames(){
  return jQuery('[@name=newsletter]:checked').map(function(){
   return this.value;
  });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-25T11:39:42.773

```
var values = $.makeArray($(":checkbox:checked").map(function(){
   return this.value 
})).join(', ')

alert(values) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-25T11:05:06.650

不容易看到您在这里尝试做什么，但我猜这就是您所追求的：

```
$("input:checked").each(function() {
   alert($(this).val());
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-25T11:26:58.413

我认为这就是你所追求的：

```
function updateChecked(){
 var arr = new Array();
 $('input:checkbox:checked').each( function() {
   arr.push($(this).val());
 });
 var checkboxesText = arr.join(', ');
 var moreText = (arr.length <= 1 ? " is" : " are") + ' checked!';
 $('div').text(checkboxesText + moreText);
} 
```

这会将 div 文本设置为：“每小时，每天检查一次！”

# emacs - 2个问题。IDO 模式没有正确缓存/强制缓冲区到命名窗口

> ID：906290
> 
> 赞同：0
> 
> 时间：2009-05-25T11:02:06.717
> 
> 标签：emacs, jde

# 1

我的 ido 模式没有正确缓存文件名/文件夹。它将列出文件夹内的文件，但从前一段时间没有显示任何较新的文件。有什么建议么 ？

# 2

在jde中，当我打开多个窗口时，在一个窗口上编译会创建一个相应的“*类的名称*”，它将按顺序在下一个窗口中打开。如果我只打开一个窗口，这很好，但我可以得到一些帮助来编写一个我可以使用的函数：

*命名一个窗口 如果存在，则强制JDE 编译服务器*的所有缓冲区仅在该窗口中打开 强制从 jde 以 * 类的名称 * 形式运行的所有窗口如果存在，则在同一窗口中打开。Jde 自动将缓冲区命名为“* 类的名称 *”，我可能会挖掘代码以找到一个简单的解决方法......所以如果代码可以使用包含 * jde run - filename * 的正则表达式强制所有窗口或者类似的东西也可以。

感谢您的帮助，这里也是第一次发帖。如果有人感觉好的话，我真的很想知道 1、2 可能出了什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-25T17:23:58.783

我尝试使用 JDE 有一段时间，但最终尖叫着跑掉了，所以我真的帮不了你。

对于 1)，任何配置错误的最佳选择是跳过加载任何自定义文件

```
$ emacs -q 
```

看看这是否有效。如果是这样，请慢慢添加您常用的功能，直到它中断。没有更多信息，我无能为力。

如果您觉得您的问题已合理缩小，请尝试查看相关功能的源代码。你会学到很多关于 Emacs 的知识，并且经常会在那里找到解决问题的方法。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-25T14:55:33.813

1）我不确定你为什么会遇到这个问题，但将以下内容添加到你的 .emacs 中：

> (defadvice ido-find-file (在自动刷新-ido nil 激活之前)
> (setq ido-rescan t))

这将让 ido 知道在您尝试使用它打开文件时更新您的文件 - 尽管这应该可以正常工作，因此您可能在 .emacs 文件中有其他东西阻止它。

我不知道2。

# java - log4j 类别

> ID：906292
> 
> 赞同：6
> 
> 时间：2009-05-25T11:02:26.530
> 
> 标签：java, logging, log4j

我的 log4j.properties 上有以下内容

```
log4j.rootLogger = debug, stdout, fileLog

log4j.appender.stdout = org.apache.log4j.ConsoleAppender

log4j.appender.fileLog = org.apache.log4j.RollingFileAppender
log4j.appender.fileLog.File = C:/logs/services.log
log4j.appender.fileLog.MaxFileSize = 256MB
log4j.appender.fileLog.MaxBackupIndex = 32
#Category: ConsultaDados
log4j.category.ConsultaDados=ConsultaDados
log4j.appender.ConsultaDados=org.apache.log4j.DailyRollingFileAppender
log4j.appender.ConsultaDados.layout=org.apache.log4j.PatternLayout
log4j.appender.ConsultaDados.layout.ConversionPattern={%t} %d - [%p] %c: %m %n
log4j.appender.ConsultaDados.file=C:/logs/consulta.log
log4j.appender.ConsultaDados.DatePattern='.' yyyy-MM-dd-HH-mm 
```

我创建了我的记录器：

```
myLogger = Logger.getLogger("ConsultaDados"); 
```

但这不会记录我对文件的调用。他们被扔进了 rootLogger

有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-25T13:50:21.900

首先，您的类别未映射到附加程序，第二个*ConsultaDadosEORI*不匹配任何类别。

这是一个示例：

```
log4j.appender.YOUR_APPENDER=org.apache.log4j.RollingFileAppender
log4j.appender.YOUR_APPENDER.File=${SYSTEM_PROPEY_WITH_LOGGER_FOLDER}/log_file.log
log4j.appender.YOUR_APPENDER.Append=true
log4j.appender.YOUR_APPENDER.MaxFileSize=20MB
log4j.appender.YOUR_APPENDER.MaxBackupIndex=2
log4j.appender.YOUR_APPENDER.layout=org.apache.log4j.PatternLayout
log4j.appender.YOUR_APPENDER.layout.ConversionPattern=%d [%t] %p %c - %m %n
log4j.category.**YOUR_PACKAGE**=**INFO,YOUR_APPENDER** 
log4j.additivity.**YOUR_PACKAGE**=true or false 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2010-04-27T00:55:08.830

为了完成这个线程，真正的问题是您的类别行上的第一个值应该是日志级别。因此，正如您正确发现的那样，更改：

**log4j.category.ConsultaDados=ConsultaDados**

至

**log4j.category.ConsultaDados=info,ConsultaDados**

工作正常。作为仅供参考，您也可以将线路更改为

**log4j.category.ConsultaDados=,ConsultaDados**

这会导致您从根记录器继承日志记录级别。

# syntax - 一些函数式编程语言在语法上是否适合更好的性能？

> ID：906299
> 
> 赞同：5
> 
> 时间：2009-05-25T11:03:41.597
> 
> 标签：syntax, functional-programming, theory

我听说在使用某些语言 (RoR) 时，生产力会大幅提高。我还听说一些 VM 比其他 VM 更优化（GHC？）。还有一些人试图通过改进底层架构来优化他们选择的语言（Unladen Swallow）

然而，在阅读一篇论文（“SSA 是函数式编程”）时，我有一个问题，即某种特定语言是否可以凭借其语法（有朝一日）成为性能最佳的语言。

我想我要问的是，一种特定的语法在理论上是否是最适合产生最佳机器代码的语法。对于任何观点，我都会对基础理论非常感兴趣——我正在和一些朋友讨论这个问题，我们正在讨论关于特定语法的信息内容的想法。

请注意，我说的是至少具有一流功能的语言 - 请不要使用 ASM。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-25T11:14:56.643

**这是非常主观的**

语言的语法只是表达所需语义的一种方法。驱动性能的是语义。**鉴于过去的语法分析通常与语法无关，“**语法的性能影响”等于语义的性能影响。

 **语义的性能影响归结为运行这些语义的环境。这就是我们拥有 CPU 和 GPU 的原因，因为它们每个都可以更快地执行给定低级语言的语义。

如果不明确说明目标环境，就没有真正的答案。机器集群将更好地处理并发程序，并且有**表达并发**的语法，例如 Erlang。

您应该关注的可能是通用虚拟机或环境如何为广泛的语义提供最佳性能。例如，如果您将 Erlang 语法移植到 JVM，虚拟机是否可以**识别**该语言是单赋值和并发的，而不需要锁？它可以为此优化吗？无堆栈虚拟机是尝试使依赖于所需语义的通用环境有效的一个很好的例子。

真正的问题是：**环境是否可以针对一个类或一组受约束的语义进行优化，当环境是根据定义的一般情况下？**

我建议学习一些关于编译器的知识（以及语法不再重要的地方），然后看看 LLVM 之类的东西，然后重新问自己这个问题。至于功能语言是否更适合性能取决于执行*翻译*的环境（多核、分布式、小型嵌入式设备）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-25T11:23:39.060

来自[关于 c 与 ocaml 的博客条目](http://scienceblogs.com/goodmath/2006/11/the_c_is_efficient_language_fa.php)：

> Objective-Caml 字节码解释器比精心手工优化的 C 程序更快！为什么？因为 OCaml 编译器可以识别数组是完全独立的——它不需要担心循环的一次迭代会踩到另一个循环使用的值。C 编译器无法应用很多有用的优化，因为它无法确定它们是否有效。

不过，这与语法无关。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-26T03:36:00.713

不。所有渴望性能的函数式语言都转换为类似于 lambda 演算的*核心语言。*不同编译器的核心语言彼此之间的相似性远远超过它们与原始语法的相似性。并且*任何*语法都将被编译成核心语言，从中可以继续生成本机代码。因此*，在本机代码编译器*中，**具体语法永远不会影响性能**。

[如果您谈论的是像Lua](http://www.lua.org)编译器这样的高速一次性字节码编译器（Lua 完全支持类 Scheme 的一等函数），那么答案可能会有所不同——如果编译器是为快速编译而设计的，而不是好的代码，您也许可以对提高性能的具体语法做一些事情。一个示例可能是使用`case`or`switch`语句而不是嵌套`if`的 s。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-25T11:17:51.380

好吧，GHC 至少将 Haskell 代码编译成 C，然后再编译，所以它不可能比用 C 编写的相同算法更快，对吧？在最好的情况下，它可以同样有效，而且只有一个好的优化编译器才能做到这一点。从 Haskell->C 转换生成的代码非常不灵活，每条指令都重复大块代码，因此它可能会更糟。

话虽如此，我认为一种语言的库决定了该语言最适合什么，而不是实际语言本身（假设它具有可接受的性能），所以这不是最好的问题。

# asp.net-mvc - ASP.NET MVC - 如何为特定操作获取 Ajax 'onclick'（我需要 Ajax.ActionLink 就像 Url.RouteUrl 对 Html.ActionLink 所做的那样）

> ID：906303
> 
> 赞同：0
> 
> 时间：2009-05-25T11:04:53.717
> 
> 标签：asp.net-mvc, ajax, url, actionlink

**修订**
**我想向处理 Ajax 请求的元素添加 onclick，而不仅仅是路由重定向。**

* * *

我有这些选项用于路由 URL。

```
Html.ActionLink(params)
Url.RouteUrl(params) 'returns JUST ActionUrl 
```

所以我可以去

```
<div onclick="javascript:location.href('<%=Url.RouteUrl(params)%>')"></div> 
```

* * *

**但是我如何生成以下内容？**

```
<div onclick="Sys.Mvc.AsyncHyperlink.handleClick(this, new Sys.UI.DomEvent(event), { insertionMode: Sys.Mvc.InsertionMode.replace, updateTargetId: 'WorkorderDetails' });"></div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-04T23:53:47.830

事实证明这是不可能的。Sys.Mvc.AsyncHyperlink.handleClick() 函数依赖于锚标记才能正常工作。锚点中指定的 href 用于确定在服务器上调用哪个服务。

我最终创建了一个 Ajax.ActionLink() 并使其不可见（显示：无）。我知道使用 Javascript 调用点击。jQuery 实际上（正常调用：link.click() 不能正常工作！）：

```
$(link).trigger("click"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-25T11:15:01.200

我不确定我是否正确理解了这个问题，但您只想要基于操作方法或其他东西的原始 URL？

那么[UrlHelper 类](http://msdn.microsoft.com/en-us/library/system.web.mvc.urlhelper.aspx)呢？

这个[关于 SO 的上一个问题](https://stackoverflow.com/questions/366498/creating-urls-with-asp-net-mvc-and-routeurl)讨论了这个选项。

就像我说的，我不确定我是否 100% 理解了这个问题。

# php - 如何不从 html 中的链接发送引荐来源网址

> ID：906304
> 
> 赞同：17
> 
> 时间：2009-05-25T11:04:57.710
> 
> 标签：php, html

我想我有一天看到了一种无需发送用户最初所在页面即可创建链接的方法。那可能吗？还是我们需要使用重定向器来隐藏上一个站点的位置？

编辑：如果您对服务器端选项有一个想法来匿名链接，欢迎您。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-10-12T19:33:25.887

```
<a href="example.com" rel="noreferrer">Example</a> 
```

[http://www.w3.org/TR/html5/links.html#link-type-noreferrer](http://www.w3.org/TR/html5/links.html#link-type-noreferrer) **noreferrer**关键字可以与 a 和 area 元素一起使用 。此关键字不会创建超链接，但会注释元素创建的任何其他超链接（隐含的超链接，如果没有其他关键字创建超链接）。

*表示在点击链接时不会泄露referrer信息。*

如果用户代理遵循由具有 noreferrer 关键字的 a 或 area 元素定义的链接，则用户代理不得在请求中包含 Referer (sic) HTTP 标头（或其他协议的等效标头）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-25T11:16:15.487

[在 Wiki](http://en.wikipedia.org/wiki/HTTP_referrer#Referer_hiding)上查看有关引荐来源网址隐藏的这一部分。

> 大多数主流浏览器在被指示使用“刷新”HTTP 标头进行重定向时不会发送引用标头。但是，[W3C 不鼓励这种重定向方法。](http://www.w3.org/TR/WCAG10-HTML-TECHS/#meta-element)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-25T16:44:00.923

没有办法做到这一点。

事实上，这个参数是在客户端控制的。根据浏览器的不同，有些只是从不发送推荐人或假货。

你不应该以任何方式做到这一点。

但这里有两个提示：

*   使用重定向页面
*   向用户提供复制/粘贴功能，然后打开一个新窗口让他能够粘贴并继续。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-11T02:17:46.540

我建议使用像[https://anon.click/](https://anon.click/)这样的服务 ，在 HTML5 中还有可以使用的 rel="noreferrer"。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-06-23T16:33:40.917

我使用了我在这里看到的多个答案的组合。

```
<a href='data:text/html;charset=utf-8,<html><head><meta http-equiv="refresh" content="0;url=http://www.google.com/"></head><body><a href="http://www.google.com/" rel=noreferrer>Open Link</a></body></html>' rel=noreferrer target=_blank>A link without referer</a> 
```

我使用 Firefox、Chrome、iOS Safari 和三星 Android 默认浏览器进行了测试。它有效。

即使浏览器发送了referer，也不会是网站，因为页面地址是“data:...”。这就是为什么它比创建一个这样做的页面更安全的原因。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-25T11:14:15.617

根据您的情况，您可以使用[anonym.to 之](http://anonym.to/)类的东西- 如果您信任这些服务。

从您的标签中，我假设您不想使用（或无法访问）像 PHP 这样的服务器端工具。在这种情况下，这将是棘手的。我不知道仅使用 HTML/Javascript 是否有可能。

# windows - 安装和注册 win32 OpenSSL 库

> ID：906310
> 
> 赞同：7
> 
> 时间：2009-05-25T11:05:53.980
> 
> 标签：windows, qt, dll, installation, openssl

我的应用程序依赖于 OpenSSL 库（通过 Qt 网络模块；由于法律问题，您不能将其静态编译成 Qt）

有这个项目 - [Win32 OpenSSL](http://www.slproweb.com/products/Win32OpenSSL.html)

似乎我需要的只是将两个 dll 复制到 System32 并注册它们。

```
copy ssleay32.dll %WINDIR%\System32\ssleay32.dll
copy libeay32.dll %WINDIR%\System32\libeay32.dll
regsvr32.exe /s %WINDIR%\System32\ssleay32.dll
regsvr32.exe /s %WINDIR%\System32\libeay32.dll 
```

事实上，这已经在办公室的几台机器上运行了（我的应用程序在操作后开始使用 https 正常工作）。那些上面安装了很多东西，所以它可能会干扰。

它仍然无法在 VMWare 下的干净虚拟机上运行。

虽然当我在它下面安装 Tortoise SVN（它也附带 OpenSSL）时，一切都很好。将openssl安装到系统中的正确方法是什么？

注意：Qt 网络模块有自己的证书颁发机构列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2010-08-24T22:41:23.063

只需将 DLL 放在应用程序的安装文件夹中即可。没有什么要注册的（无论如何你不能使用 regsvr32，因为 OpenSSL 没有实现 ActiveX/COM 服务器，而这正是 regsvr32 的用途）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-25T11:16:38.170

也许这两个 DLL 有进一步的依赖关系，SVN 已经为你安装了......

尝试使用取决于查看 OpenSSL DLL 使用哪些 DLL，并确保将它们安装在干净的 VMware 上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-09T22:12:28.617

您可以使用 Dependency Walker 检查您的应用程序具有哪些依赖项以及哪些依赖项无法解决。

[http://www.dependencywalker.com/](http://www.dependencywalker.com/)

只需将您的应用程序拖到 Dependency Walker，然后在左侧窗格中，您就会看到它需要运行的所有 dll。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-08-24T22:24:41.450

您很可能依赖于 libsasl.dll，它随 tortoise-svn 一起提供！

# asp.net - 如何查看 SQL 2008 锁和阻塞表

> ID：906315
> 
> 赞同：6
> 
> 时间：2009-05-25T11:08:50.043
> 
> 标签：asp.net, sql-server, timeout, locking, deadlock

在我的应用程序的 ASP.NET 执行期间，似乎 SQL 2008 Express 持有一些锁，我得到

> ```
> Timeout expired.  The timeout period elapsed prior to completion of 
> ```
> 
> 操作或服务器没有响应

也许我的一些查询没有优化。Visual Studio 崩溃：

> ```
> Microsoft Visual Studio may be unstable now. It is recommended that 
> ```
> 
> 您保存所有文件并退出。

我需要查看阻止我的表的查询，但我有 Express 版本。我能怎么做？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-25T14:09:12.283

您可以查询`sys.dm_tran_locks`动态视图以获取此信息。在 MSDN 上转到[此处以了解更多信息。](http://msdn.microsoft.com/en-us/library/ms190345.aspx)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-05-26T22:11:15.950

```
exec sp_lock 
```

和

```
exec sp_who2 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-26T22:09:17.137

`sp_who2`是较新的版本`sp_who`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-25T18:54:31.153

你所要做的就是执行这个

```
sp_who 
```

告诉你你需要知道的一切。

# c++ - 密钥生成 AES 加密 symbian

> ID：906316
> 
> 赞同：0
> 
> 时间：2009-05-25T11:09:10.043
> 
> 标签：c++, symbian

我想为 AES 密钥加密创建公钥，是否提前在 symbian thnx 中有直接 API。目前我正在使用默认的 api。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-25T11:18:16.683

AES 是一种对称密码，没有公钥/私钥的概念。

至于 AES 密钥本身，只需为 AES256 生成例如 256 个随机位。对于加密的强随机生成，请使用例如`CSystemRandom::GenerateBytesL()`. 包括`random.h`，链接反对`random.lib`。

# c# - 在使用 C# 运行测试之前修改 Fitnesse 文本框中的字符串

> ID：906324
> 
> 赞同：1
> 
> 时间：2009-05-25T11:11:28.867
> 
> 标签：c#, .net, fitnesse

请耐心等待，因为我不知道如何使用 fitNesse 框架开始工作。

好的，这就是我需要帮助的地方，在运行测试时，我想捕获字符串或被放置在健身文本区域中的健身脚本，然后某个函数将解析脚本以替换我要替换的字符串。例如，我想用今天的真实 DateTime 替换 scipts 中的所有“今天”文本。

实际上我这样做的目的是因为不仅使用它来解析“今天的日期”，而且还包括解析明天、昨天和每个测试顶部的“基础”变量。它的大部分用途将是分配“基础”功能。

然后我创建了一个名为“DateFunctions”的类，它解析文本区域中的文本，不仅查找“今天”关键字，还包括解析明天、昨天

我的新问题是，我下面的新实现是否有意义或者是否正确？有没有办法在fitnesse中调试C#代码？

```
public class RowFixtureBase : fit.RowFixture
    {
        public virtual void setBaseDate(String basedate)
        {
            if (!DateFunctions.SetBaseDateTo(basedate))
            {
                throw new ArgumentException();
            }
        }

        public override void DoRow(fit.Parse rows)
        {
            foreach (fit.Parse row in new fitlibrary.ParseEnumerator(rows))
            {
                fit.Parse newrow = new fit.Parse(DateFunctions.EvaluateDate(row.Text));
                base.DoRow(newrow);
            }
        }

        //more codes here that is irrelevant to the question
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-26T03:12:37.467

使用最新版本的 FitNesse，您应该能够在 FitNesse 页面中使用 !today 作为标记。因此，您的具体示例可能已经为您实施。

[http://fitnesse.org/FitNesse.UserGuide.TodaysDate](http://fitnesse.org/FitNesse.UserGuide.TodaysDate)

# c# - 反射 - 设置返回 obj 的类型？

> ID：906327
> 
> 赞同：1
> 
> 时间：2009-05-25T11:12:08.443
> 
> 标签：c#, system.reflection, getproperties

我正在使用数据行填充不同类型的对象，相关对象的每个属性 = 到数据行中的类似名称字段。

我想使用一个通用函数来做到这一点。如何从泛型函数强制返回对象的类型。我还不知道`<T>`语法的实际含义： `PopulateObject<T>`当我得到编译器错误时不返回类型 - 无法将类型'object'隐式转换为'JobCard'请参阅下面的代码

```
public JobCard AcceptJobCard(Guid jobCardGuid, Guid userGuid)
{
    try
    {
        JobCard jc= new JobCard();
        DL_ISMS.DataSets.JobCardDS.View_JobcardDataTable dtJC = BL_ISMS.Meter.JobCard_CB.FetchJobCard(jobCardGuid);
        DL_ISMS.DataSets.JobCardDS.View_JobcardRow jcRow = dtJC[0];

        DateTime dateAccept = DateTime.Now;
        bool res = BL_ISMS.Meter.JobCard_CB.UpdatePdaJobCard(userGuid, jobCardGuid, null, null, null, JobCardStatus.Accepted.GetHashCode(), null, null, null, null, "", "", "", "", "", "", null, dateAccept, null, null, null, null, null, null);

        if (res)
        {                
            jc = PopulateObject<JobCard>(jc, jcRow);

            return jc;
        }
        else
        return jc;
    }
    catch (Exception ex )
    {
        Trace.WriteException(ex);
        throw;
    }
}

private object PopulateObject<T>(object dataObj, System.Data.DataRow dataRow)
{

    Type type = dataObj.GetType();
    System.Reflection.PropertyInfo[] proplist = type.GetProperties();
    string s = "";
    foreach ( System.Reflection.PropertyInfo propertyitem in proplist)
    {
        s += propertyitem.Name + ":" + (propertyitem.GetValue(dataObj,null)).ToString() + "\r\n";
        propertyitem.SetValue(dataObj, dataRow["propertyitem.Name"], null);
    }
    return (T)dataObj;
} 
```

----第二个答案后更新----

使用此代码： private T PopulateObject(T dataObj, System.Data.DataRow dataRow) {

```
 System.Reflection.PropertyInfo[] proplist = dataObj.GetType().GetProperties();

    foreach ( System.Reflection.PropertyInfo propertyitem in proplist)
    {
        if(propertyitem.Name != "")
            try
            {
                propertyitem.SetValue(dataObj, dataRow[propertyitem.Name], null);
            }
            catch (Exception ex)
            {
                if (ex.Message.Contains("does not belong to table"))
                {
                    propertyitem.SetValue(dataObj, PopulateObject<propertyitem.GetType()>(propertyitem, dataRow), null);
                }
                else
                throw;
            } 
    }
    return dataObj;
} 
```

不过，我遇到了另一个障碍。其中一个属性实际上是另一个名为 Customer 的对象，它拥有 11 个属性。我怀疑还有更多的嵌套对象仍然潜伏着。我将如何处理这些嵌套对象的填充，数据行中只有 1 个字段？

要处理这些对象： - 我必须在父 Objdata 中提取 ChildObj 类型 - 调用我将 ChildObjType 和完整数据行传递给的 ProcessChildObj() 函数 - 并在 ProcessChildObj() 中进行名称匹配，并设置那个属性？

或（如上面的代码） - 递归调用 PopulateObject。然而，这给我带来了一个问题，因为编译器抱怨我尝试将 obj 类型传递给递归调用：

propertyitem.SetValue(dataObj, PopulateObject(propertyitem, dataRow), null); //导致编译器消息“运算符'<'不能应用于'方法组'和'System.type'类型的操作数”

如何提取嵌套 childObj 的类型以将类型作为参数传递？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-25T11:15:01.683

将方法的签名更改为：

```
private T PopulateObject<T>(T dataObj, System.Data.DataRow dataRow) 
```

另外，我认为您不需要返回任何对象，因为您只需更新现有对象。您可以使用：

```
private void PopulateObject(object dataObj, System.Data.DataRow dataRow) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-25T11:16:46.313

重新退货……**为什么要**退货？您已经对其进行了更新...调用者将看到更改。如果你没有在方法中使用泛型（你不是），只需使用`object`而不使用泛型。

如果代码本身不起作用，我认为最大的问题是使用**字符串**“propertyitem.Name”，而不是评估属性值`propertyitem.Name`：：

```
propertyitem.SetValue(dataObj, dataRow[propertyitem.Name], null); // no quotes 
```

你可能也想看看[这篇文章](https://stackoverflow.com/questions/545328/datatable-to-generic-list-memory-leak/545429#545429)。

# jquery - 是否可以从变量加载特定的 div？

> ID：906329
> 
> 赞同：0
> 
> 时间：2009-05-25T11:12:30.673
> 
> 标签：jquery, variables, load, selector

有谁知道是否可以从变量加载特定的 div

```
$item = '#help_mobiel_prive';

$('#infopopup_content').load('help.html'+ $item, function() { 
```

只有那个不起作用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-25T11:18:44.157

我猜你的意思是这样的：

```
var $item = '#myDiv';
$("#infopopup_content").load('help.html ' + $item, function() {
    //blah blah
); 
```

确保您尝试加载的文件和选择器之间有空格。所以而不是：

```
load('help.html' + $item... 
```

利用：

```
load('help.html ' + $item... 
```

所以连接的字符串将是`'help.html #myDiv'`.

从[文档](http://docs.jquery.com/Ajax/load)：

> 在 jQuery 1.2 中，您现在可以在 URL 中指定 jQuery 选择器。这样做将过滤传入的 HTML 文档，只注入与选择器匹配的元素。语法类似于“url #some > 选择器”。默认选择器“body>*”始终适用。如果 URL 包含空格，它应该是 escape()d。有关更多信息，请参阅示例。

# sql-server-2005 - 是什么导致 SQL Server 2005 上出现私有字节？

> ID：906330
> 
> 赞同：1
> 
> 时间：2009-05-25T11:12:49.223
> 
> 标签：sql-server-2005, performance

我的服务器是 Windows 2003 和 SQL Server 2005 Standard。3 GB 内存。运行我的客户端程序一段时间后，私人字节高达 1.7 GB 并且永远不会下降。

只有状态为“可运行”的进程 51。点击详情。

```
create table #tmpDBCCinputbuffer (
[Event Type] nvarchar(512), 
[Parameters] int,
[EventInfo] nvarchar(512)) 
insert into #tmpDBCCinputbuffer exec ('DBCC INPUTBUFFER(51)') 
select [Event Info] from #tmpDBCCinputbuffer 
```

呼叫连接已关闭。

有什么线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-25T11:54:11.777

1.7GB 是 2GB（默认）用户模式地址空间减去 384MB。SQL Server 默认保留 384 MB。

如果您设置了 /3GB 和 3GB RAM，它将使用 2.7GB。

请参阅这篇文章[KB 316749](http://support.microsoft.com/default.aspx?scid=kb;EN-US;316749)，它适用于 SQL 7 到 SQL 2005。奇怪的是，我在其他任何地方都没有找到此信息，即使使用 SQL Server 内存白皮书也是如此。虽然它很容易重现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-25T11:31:40.120

SQL Server 管理自己的内存池，并在内存压力下将内存释放回操作系统（降至 SQL 配置值中设置的最小值。

所以你不需要担心。

# .net - subsonic 可以为我构建 CRUD 和分页存储过程吗？

> ID：906331
> 
> 赞同：0
> 
> 时间：2009-05-25T11:13:10.253
> 
> 标签：.net, database, stored-procedures, subsonic

subsonic 可以帮我构建这些主要的存储过程吗？

我可以编辑其模板以使其生成这些 SP 吗？

从哪里开始学习？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-25T15:09:59.773

就版本 2 而言，您可能可以编辑模板以生成您的 SP 创建脚本，但这绝非易事。当然，您随后必须添加执行脚本的功能，清理以前生成的 SP 并确保您没有丢弃任何其他的。老实说，我建议不要这样做，因为 SubSonic 旨在根据您的数据库生成 .Net 代码。

使用 SubSonic 的第 3 版和 t4 的所有功能，您可以更轻松地添加功能，但是一旦您在第 3 版中获得了完整的 Linq 支持，您就不需要 SP 进行分页，我看不出原因生成 SP 而不是使用 Linq 本身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-25T18:29:16.413

如果你真的需要使用 SP，那么像 Codesmith 这样的东西是更好的选择。您可以使用 T4 构建您自己的 SP 发生器 - 但对于 Subsonic 可以为您做的事情，它只是额外的一层绒毛。

取决于你和你如何设计东西——但 SP 已经失去了光彩。不——Linq 并不比 SP 慢。事实上，SP 根本没有性能增益。

# php - Flex Result 事件...问题

> ID：906332
> 
> 赞同：0
> 
> 时间：2009-05-25T11:13:31.640
> 
> 标签：php, xml, apache-flex

在通过 HTTPService 的 ResultEvent 上，我需要在文本框中打印结果。

私人功能谷歌（evt：ResultEvent）：无效{

```
Alert.show(evt.result.loginsuccess.person);

subtitle.text = evt.result.loginsuccess.person.keyword;

    } 
```

这是我的 XML 来自 PHP 文件... [index.php]

```
<loginsuccess><person><keyword>java</keyword><name>http://www.xml.com/</name><occur>4</occur></person
><person><keyword>java</keyword><name>http://www.sitepoint.com</name><occur>2</occur></person><person
><keyword>java</keyword><name>http://www.httpguru.com</name><occur>2</occur></person></loginsuccess> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-25T11:30:09.140

您不需要引用 XML 中的顶级节点。所以如果你做 evt.result.person.keyword; 然后将显示3个结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-25T11:40:28.917

如上面的答案，但如果你想得到一个特定的值，你可以做 evt.result.person.keyword[0] （这会给你第一个值）。其他人的答案会给您 XML 3 次，但指定您希望获取的关键字节点将仅返回该节点内的值（即“java”）

顺便说一句，我刚刚查看了您的个人资料，您是否知道在您提出问题并喜欢其中一个答案后，您可以将该答案标记为正确。您提出的 30 多个答案的 9 个问题中没有一个被标记为已回答，没有人适当地回答您的任何问题！

# apache - 为什么此配置代码在 .htaccess 中不起作用？

> ID：906335
> 
> 赞同：0
> 
> 时间：2009-05-25T11:14:23.137
> 
> 标签：apache, .htaccess, mod-rewrite

```
<VirtualHost *:80>
   DocumentRoot /lf/main/com 
   ServerName 74.220.215.241/~laborfa2 
   ServerAlias 74.220.215.241/~laborfa2 
   RewriteEngine on 
   #RewriteLogLevel 2 
   #RewriteLog logs/rewrite.log 
   RewriteCond %{DOCUMENT_ROOT}%{REQUEST_FILENAME}.php -f 
   RewriteRule ^/(.*)(/?)$ /$1.php [L] 
    RewriteRule ^/([a-zA-Z]+)([a-zA-Z0-9_]{3,15})(/?)$ /profile.php?fairid=$1$2 [L] 
    RewriteRule ^/([a-zA-Z]+)([a-zA-Z0-9_]{3,15})/([a-z]*)(/?)$ /$3.php?fairid=$1$2 [L]     

 </VirtualHost> 
```

它在 linux(htt.vhost) 上运行良好，但是当我将它粘贴到 .htaccess 中时不起作用。

那么我需要改变什么才能让它工作呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-25T12:03:27.263

天，

如上所述，VirtualHost 指令的上下文明确排除了它在 .htaccess 文件中的使用：

来自 Apache 2.2 手册：

> server config ... 意味着该指令可以在服务器配置文件（例如，httpd.conf）中使用，但不能在任何容器中使用。.htaccess 文件中根本不允许这样做。

高温高压

干杯，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-25T11:16:17.250

您不能`RewriteLog`在`.htaccess file`. 请参阅[`mod_rewrite`文档](http://httpd.apache.org/docs/2.0/mod/mod_rewrite.html#rewritelog)。当您遇到此类问题时，您还应该查看错误日志。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-25T11:23:38.670

您不能在虚拟主机内设置虚拟主机。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-25T11:27:16.293

您正在使用的`<VirtualHost>`块只能在**httpd.conf文件（主服务器配置）中配置，并且在****.htaccess**中不起作用。

您可以尝试将 VirtualHost 移到 httpd.conf 中，然后将 RewriteCond 和 RewriteRule 移到 .htaccess 文件中

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-25T11:29:16.320

ServerName 指令应包含服务器名称而不是 URL。将其设置为 www.example.com:80 的值是有效的，但 www.example.com/~example 是无效的。请参阅 Apache mod_core 文档。

除此之外，即使条目已被注释掉，您也不能在 .htaccess 文件中使用 RewriteLog 指令。请参阅 Apache mod_rewrite 文档。

# vb.net - 如何在 vb.net 2005 中压缩文件

> ID：906354
> 
> 赞同：3
> 
> 时间：2009-05-25T11:18:44.233
> 
> 标签：vb.net, file, zip

如何在 vb.net 2005 中压缩文件（任何文件或文件夹）？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-05-26T01:10:02.253

[DotNetZip](http://dotnetzip.codeplex.com)是一个易于使用的免费开源库，用于处理 VB.NET 和其他 .NET 语言的 ZIP 文件。

一些示例 VB.NET 代码，用于创建一个 zip 文件，一次添加一个文件：

```
Dim ZipToCreate As String = "ex1.zip"
Dim DirectoryToZip As String = "c:\temp"
Using zip As ZipFile = New ZipFile
    Dim filenames As String() = System.IO.Directory.GetFiles(DirectoryToZip)
    Dim filename As String
    For Each filename In filenames
        zip.AddFile(filename)
    Next
    zip.Save(ZipToCreate)
End Using 
```

或者，在组中添加文件：

```
Dim ZipToCreate As String = "ex1.zip"
Dim DirectoryToZip As String = "c:\temp"
Dim filenames As String() = System.IO.Directory.GetFiles(DirectoryToZip)
Using zip As ZipFile = New ZipFile
    zip.AddFiles(filenames, "temp")
    zip.Save(ZipToCreate)
End Using 
```

或者，压缩整个目录或文件夹的代码：

```
Using zip As ZipFile = New ZipFile
    zip.AddDirectory(directory)
    zip.Save(targetZip)
End Using 
```

提取zip文件的代码：

```
 Dim ZipFileToExtract As String = "c:\foo.zip"
    Using zip As ZipFile = ZipFile.Read(ZipFileToExtract)
        Dim e As ZipEntry
        For Each e In zip
            ' can conditionally extract here, '
            ' based on name, size, date, whatever.'
            e.Extract
        Next
    End Using 
```

使用进度条提取：

```
Imports Ionic.Zip

Module SimpleUnzip
  Public Sub Unzip(ByVal ZipToUnpack As String, ByVal ExtractDirectory As String)
    Try
      Using zip As ZipFile = ZipFile.Read(ZipToUnpack)
        Form1.ProgressBar1.Maximum = zip.Entries.Count
        Dim entry As ZipEntry
        For Each entry In zip
            Form1.Label1.Text = entry.FileName
            entry.Extract(ExtractDirectory, ExtractExistingFileAction.OverwriteSilently)
            Form1.ProgressBar1.Value = Form1.ProgressBar1.Value + 1
            ' sleep because it's too fast otherwise.
            System.Threading.Thread.Sleep(50)
        Next
        Form1.ProgressBar1.Value = 0
        Form1.Label1.Text = "Done"
      End Using
    Catch ex1 As Exception
      Form1.Label1.Text = ("Exception: " & ex1.ToString())
    End Try
  End Sub
End Module 
```

DotNetZip 具有用于读取、保存或提取的进度事件，因此您可以为 ASP.NET 或 Windows 窗体中的进度条提供动力。它执行受密码保护的 zip 文件、Unicode、ZIP64 和自解压档案。它生成的 zip 文件与所有其他 zip 工具兼容 - WinZip、WinRAR、Windows Explorer、Pkunzip 等。有一个很好的帮助文件（[此处为在线版本](http://cheeso.members.winisp.net/DotNetZipHelp/frames.htm)），其中包含大量代码示例。也有[可供下载的示例](http://code.msdn.microsoft.com/DotNetZip)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-25T11:23:12.027

看看[SharpZipLib](http://www.icsharpcode.net/OpenSource/SharpZipLib/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-25T11:23:51.633

我不知道如何在 VB.NET 中编程。然而，搜索发现了一个有趣的链接：[Zip Compression VB.NET Examples](http://www.example-code.com/vbdotnet/zip.asp)。我希望它对你有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-25T11:24:43.303

您可以使用[ICShaCode 的](http://www.icsharpcode.net/ "ICSharp代码") [SharpZipLib](http://www.icsharpcode.net/OpenSource/SharpZipLib/ "SharpZipLib")库。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-09-16T10:45:56.197

您可以使用我们的[Rebex ZIP](http://www.rebex.net/zip.net/)组件。

以下是您要求的一些操作示例：

一行代码中的简单压缩文件：

```
' add content of the local directory C:\Data\  '
' to the directory \Data-2010 (within the ZIP archive) '
' (ZIP archive C:\archive.zip doesn't have to exist) 
ZipArchive.Add("C:\archive.zip", "C:\Data\*", "\Data-2010") 
```

一行代码简单解压：

```
' extract all *.TXT files from the directory \Data-2010 (within the ZIP file) '
' to the existing local directory C:\Data '
ZipArchive.Extract("C:\archive.zip", "\Data-2010\*.html", "C:\Data") 
```

更多示例可以在[这里](http://www.rebex.net/zip.net/tutorials.aspx "Rebex ZIP 教程")找到。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-02-02T14:33:46.903

Shell it，wa-la 分两行完成

```
Dim zipcmd as String = "zip -r C:\directory\of\my\folder C:\directory\of\my\zip"
Shell("cmd.exe /c" + zipcmd1, AppWinStyle.Hide, True) 
```

# objective-c - 在 Xcode 编译的 Cocoa 应用程序包的子文件夹中引用 nib 文件

> ID：906360
> 
> 赞同：2
> 
> 时间：2009-05-25T11:20:27.117
> 
> 标签：objective-c, cocoa, directory, bundle, nib

如果我的 Xcode 项目（不是组）中有一个目录，它被添加到主目标并编译它，我如何指示 NSViewController 到`initWithNibName:bundle:`该目录内的 nib 文件？

我试过`[viewController initWithNibName:@"FolderName/NibName" bundle:nil]`了，但这不起作用。没有文件夹名称，也没有将 bundle 参数设置为`[NSBundle mainBundle]`. 我什至尝试将捆绑包设置`[NSBundle bundleWithPath:pathToFolderName]`为无济于事。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-29T09:59:11.500

你最好不要使用这样的文件夹。许多 Cocoa 便利，如 -[NSImage imageNamed:] 或视图控制器 init 方法都希望在包的 Resources 文件夹中找到一个文件。

如果您真的想保留一个包含 NIB 文件的文件夹，您可以，但您将无法使用便捷方法。您可以覆盖视图控制器的 -[NSViewController loadView] 方法来调用 -[NSBundle loadNibFile:externalNameTable:withZone:]。您将传递 NIB 文件的路径、将 NSNibOwner 设置为视图控制器的名称表和 NULL 区域。您还需要注意从 NIB 文件中释放顶级对象。

如果您放弃资源中的子目录，事情会顺利得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-03-06T20:29:14.317

另一种选择是创建一个“运行脚本”以在“构建阶段”结束时执行，该脚本可以将您的 *.xib 文件从非组目录复制到主包中。您不仅需要复制 xib 文件，还需要使用`ibtool`命令将它们编译成 *.nib 文件。下面是我正在使用的脚本示例：

```
# For some reason the tilde is causing problems with find
# so I am replacing the tilde with /Users/whoami
user=`whoami`

# We will find all non-nib files in this directory and copy them into the main bundle
find -L ${LW_ISHARE_PLATFORM_SRC/\~/\/Users\/$user}/lw-ishare-platform-nibs -type f -not -name ".*" -not -name "*.xib" | xargs -t -I {} cp {} ${CONFIGURATION_BUILD_DIR}/${UNLOCALIZED_RESOURCES_FOLDER_PATH}/

export IBC_MINIMUM_COMPATIBILITY_VERSION=${IPHONEOS_DEPLOYMENT_TARGET}
#setenv PATH "/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
export XCODE_DEVELOPER_USR_PATH="/Developer/usr/bin/"

# Now compile all xib files into nib files
for each in `find -L ${LW_ISHARE_PLATFORM_SRC/\~/\/Users\/$user}/lw-ishare-platform-nibs -type f -name "*.xib"`
do
prefix=`basename "${each}" .xib`
${XCODE_DEVELOPER_USR_PATH}/ibtool --errors --warnings --notices --output-format human-readable-text --compile ${CONFIGURATION_BUILD_DIR}/${UNLOCALIZED_RESOURCES_FOLDER_PATH}/${prefix}.nib ${each} --sdk ${SDKROOT}
done

exit 0 
```

`$LW_ISHARE_PLATFORM_SRC`对我来说是一个全局 XCode 变量，我将所有 *.xib 和相关资源放在`$LW_ISHARE_PLATFORM_SRC/lw-ishare-platform-nibs`目录中。

`${CONFIGURATION_BUILD_DIR}/${UNLOCALIZED_RESOURCES_FOLDER_PATH}`是您的“主捆绑包”的路径。

# logging - 数据挖掘日志以定位错误

> ID：906363
> 
> 赞同：2
> 
> 时间：2009-05-25T11:21:27.427
> 
> 标签：logging, data-mining

我正在开发一个数据分发应用程序，它从源接收数据并将该数据分发到多个目标应用程序。在 8 天内每秒成功分发多条消息后，它错过了一条消息，并且没有正确地将其传递给客户端。

当我查看日志时，我试图在那里找到在错过发生时特别的东西——无论是在数据、它的速率或其他一些条件中，但找不到任何东西。

是否有任何数据挖掘技术可以用来识别特定事件与其他事件的不同之处？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-25T11:48:48.260

您可以查看[异常值检测](http://www.itl.nist.gov/div898/handbook/prc/section1/prc16.htm)。一项基本技术是为大量消息绘制多个变量，并查看该消息是否从字面上脱颖而出。一种同时可视化两个以上维度的方法是[平行坐标](http://en.wikipedia.org/wiki/Parallel_coordinates)。也许您还应该查看半小时垃圾箱，计算它们的统计数据，看看这条消息是否存在问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-12-23T09:00:18.780

流程挖掘可用于各种目的，而不仅仅是推断业务流程模型。流程挖掘以及流程发现的下一个演变可以帮助组织超越流程模型的映射——即使这是起点。

以下是流程发现的输出有帮助的一些领域：

Process Discovery 可以生成**数字化流程双胞胎**，可用于模拟、建模和设计流程。

流程变体的详细输出有助于有效地定义自动化 (RPA) 和转换需求。在这方面，可以将流程挖掘视为组织流程的 X 射线或 CT 扫描。

[流程挖掘和发现软件解决方案](https://skan.ai/)也可能有助于流程一致性。

其他用例包括精确训练、容量规划和瓶颈识别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-25T12:32:30.420

我不认为数据挖掘是正确的工具。

我会添加一些系统的日志记录（在接口上，很难推断出内部状态的变化，以及在你的情况下为什么决定分发或不分发）并尝试重现问题，然后从日志中找出到底出了什么问题。尽管有数百万条消息和像这样很少发生的错误可能会很困难。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-09-10T03:49:53.547

抱歉，我看不出这只是对数据挖掘的误解。

您已经知道问题消息，因此您知道它是一个“异常值”。那你“挖矿”是为了什么？

# emacs - Emacs中的`global-set-key`和`define-key global-map`有什么区别

> ID：906368
> 
> 赞同：35
> 
> 时间：2009-05-25T11:23:53.397
> 
> 标签：emacs, keyboard-shortcuts, elisp

如果你有两个片段：

```
(global-set-key "\C-d" delete-char) 
```

和

```
(define-key global-map "\C-d" delete-char) 
```

两者有区别吗？如果是这样，您什么时候会使用其中一种？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2009-05-25T11:27:29.583

Function`global-set-key`是一个[交互式函数](https://stackoverflow.com/questions/378942/what-does-interactive-mean-in-an-emacs-lisp-function)，`define-key`您可以通过键入来调用它`M-x global-set-key`。函数`define-key`在 Lisp 程序中更常用。

您可以使用 查找它`global-set-key`的源代码，`C-h f global-set-key`以查看它只是包装`define-key`。

要回答您的问题，它们之间没有显着差异。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2009-05-25T11:27:30.147

global-set-key 在 subr.el 中定义为：

```
(define-key (current-global-map) key command)) 
```

# c# - 在 .Net 2003 中更新 DataGrid WinForm 控件

> ID：906369
> 
> 赞同：1
> 
> 时间：2009-05-25T11:24:18.047
> 
> 标签：c#, datagrid, .net-1.1

我一直在使用 VS 2005 和 VS 2008，从未问过这个问题，但现在我很难在 VS 2003 中使用控件。dataGridView 不存在，我被迫使用 DataGrid 控件显示一些数据。问题是，我想编辑此控件显示的一些值，并在数据库中反映这些更改，但我没有找到实现此目的的方法。已经“google”了，没有找到相关的结果，所以请给我一些帮助。我正在用 C# 编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-25T11:29:36.037

有一个*原因*`DataGrid`被替换为...我希望`DataGridView`您需要为 1.1 找到一个 3rd-party 网格控件来执行此操作（但较旧的 1.1 变得更难）。

抱歉，如果这不是很有帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-25T11:46:45.537

我从谷歌获得了一个链接，作为一个新用户，我无法发布它，当您使用“DataGrid Windows msdn”字词进行谷歌搜索时，第一个结果有一个示例，请确保您将 msnd 的版本更改为 1.1 框架。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-25T11:30:05.117

您可以使用 SqlDataAdapter 填充您的 DataSet 并将此 DataSet 绑定到 DataGrid，在 DataGrid 上进行更改后，只需调用 SqlDataAdapter.Update 方法来更新数据库

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-25T11:37:48.533

您可以使用列表视图列出数据库中的数据。您可以将 listview 的 itemsource 绑定到从 DB 获得的列表。您也可以使列表视图可编辑。

如果列表视图不够用，可以使用 WindowsFormHost 之类的

```
 System.Windows.Forms.FlowLayoutPanel advancedFlowLayoutPanel =
                                                this.flowLayoutHost.Child as System.Windows.Forms.FlowLayoutPanel;
            advancedFlowLayoutPanel.WrapContents = true; 
```

在它里面你可以放置DataGrid。

# sql - 在特定时间点之后执行 SQL 查询

> ID：906371
> 
> 赞同：1
> 
> 时间：2009-05-25T11:25:17.013
> 
> 标签：sql

在我们的项目中，我们要求在 3 分钟后收到来自第三方服务提供商的短信后，我需要执行 sql 查询来更新数据库。

我应该怎么做，任何建议都被接受。

** 是否可以使用存储过程...

确切的情况是，我们让中介服务应用程序认为它具有 Web 服务。从我的应用程序中，当我通过 SMS 服务提供商向 Web 服务应用程序发送 SMS 时，该系统将推送到嵌入式设备，这将使系统启动。2 分钟后，设备将通过 SMS 服务提供商向 pur 应用程序发送 SMS 消息，说检查正在进行中……在收到此消息后，我需要更新数据库，说检查成功完成。为什么是 3 分钟，因为恰好在此时间之后设备将关闭。

问候， 马赫什

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-25T11:30:55.613

您究竟是如何接收 SMS 消息的。什么服务接他们。

有几种方法可以做到。

在 SMSReceived 事件的应用程序代码中，您可以启动一个单独的线程以休眠 180 秒，然后调用您的 SQL 代码。

如果您想在数据库中执行此操作，则需要某种轮询线程。

记录“TimeReceived”并有一个位标志“PostProcessed”

然后你可以有一个每 60 秒运行一次的工作

```
SELECT *
FROM ReceivedSMS
WHERE TimeRecieved < dateadd(second, -180, getdatE()) AND
      PostProcessed = 0

FOREACH Record - Execute SPROC & Update PostProcessed = 1. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-25T11:32:10.870

您可以使用“SQL 作业”查看这些文章：http: [//msdn.microsoft.com/en-us/library/ms187910.aspx](http://msdn.microsoft.com/en-us/library/ms187910.aspx)

[http://dacosta9.wordpress.com/2008/10/22/how-to-disable-or-enable-a-sql-server-job-programatically/](http://dacosta9.wordpress.com/2008/10/22/how-to-disable-or-enable-a-sql-server-job-programatically/)

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-25T13:18:56.130

立即运行存储过程，但第一行 T-SQL 是`WAITFOR DELAY '00:03:00'`？

# java - 球衣部署

> ID：906386
> 
> 赞同：4
> 
> 时间：2009-05-25T11:29:01.047
> 
> 标签：java, deployment, jersey

我开发了一个 Jersey 资源类。

有人可以告诉我如何将它部署在 Web App 服务器上。最好是Tomcat或JBoss。

或者还有一个更好的问题，只有资源类的 Jersey 应用程序可以部署在 Web App 服务器上吗？如果是，如何？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-25T11:37:17.893

通过使用 web.xml：

```
<servlet>
    <servlet-name>jersey-servlet</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
    <init-param>
        <param-name>com.sun.jersey.config.property.packages</param-name>
        <param-value>com.foo.resources;org.bar.resources</param-value>
    </init-param>
</servlet> 
```

或在 Java 中（没有 servlet 容器）：

```
public class MyConfig extends PackagesResourceConfig {

   public MyApplication() {
      super("com.foo.resources;org.bar.resources");
   }
} 
```

或子类化应用程序：

```
public class MyApplicaton extends Application {

    public Set<Class<?>> getClasses() {
        Set<Class<?>> s = new HashSet<Class<?>>();
        s.add(com.foo.resources.MyResource.class);
        return s;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-07-05T16:47:09.917

如果您需要 servlet 容器，在 servlet 容器中部署肯定会起作用。泽西岛更简单且推荐使用 Grizzly - [http://jersey.java.net/nonav/documentation/latest/user-guide.html#d4e60](http://jersey.java.net/nonav/documentation/latest/user-guide.html#d4e60)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-13T10:01:54.263

首先，您需要将 jesey 引擎加载到您的 Web 应用程序中，这可以通过使用 web.xml 来完成，并将 loadonstartup 设置为 1。

[您可以在此处](https://jersey.java.net/documentation/latest/index.html)阅读第一个球衣应用程序和配置

[你可以在这里](http://www.mkyong.com/webservices/jax-rs/jersey-hello-world-example/)看到简单的 hello world 示例

# javascript - 具有分层数据和冻结列的surrport的网格控件？

> ID：906391
> 
> 赞同：0
> 
> 时间：2009-05-25T11:29:37.240
> 
> 标签：javascript, internet-explorer, grid

我试图找出一种在网格（在 IE6+ 中）中显示分层数据（3/4 级嵌套数据）的方法。

1.  我想为父节点和子节点的所有列显示分层数据。
2.  另外我想冻结网格中的前两列。
3.  能够通过按需加载数据（ajax）来扩展（向下钻取）网格视图
4.  查看大约 800 到 1K 行的加载网格。

我看到一些不支持列冻结的 jquery 网格和其他第三方控件（基础架构）生成如此多的 javascript，与第一列 IE 一起也开始冻结。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2009-05-25T11:38:43.990

我使用[Telerik](http://www.telerik.com/) [RadGrid——](http://www.telerik.com/products/aspnet-ajax/grid.aspx)我用过的最好的。看一些演示： http: [//demos.telerik.com/aspnet-ajax/grid/examples/hierarchy/declarativerelations/defaultcs.aspx](http://demos.telerik.com/aspnet-ajax/grid/examples/hierarchy/declarativerelations/defaultcs.aspx) [http://demos.telerik.com/aspnet-ajax/grid/examples/层次结构/twotablesatlevel/defaultcs.aspx](http://demos.telerik.com/aspnet-ajax/grid/examples/hierarchy/twotablesatlevel/defaultcs.aspx) [http://demos.telerik.com/aspnet-ajax/grid/examples/performance/linq/defaultcs.aspx](http://demos.telerik.com/aspnet-ajax/grid/examples/performance/linq/defaultcs.aspx) [http://demos.telerik.com/aspnet-ajax/grid/examples/概述/defaultcs.aspx](http://demos.telerik.com/aspnet-ajax/grid/examples/overview/defaultcs.aspx)

# wcf - 以编程方式添加 IOperationBehavior 的正确位置在哪里

> ID：906398
> 
> 赞同：3
> 
> 时间：2009-05-25T11:31:31.540
> 
> 标签：wcf

在 iis 上运行时如何以编程方式添加 IOperationBehavior？不在自定义 wcf 主机上。

谢谢

阿里·塔卡维奇

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-25T11:45:04.570

您可以将其作为属性附加：

```
public class CustomInspectorAttribute : Attribute, IOperationBehavior, IParameterInspector
{
    #region IOperationBehavior Members

    public void AddBindingParameters(OperationDescription operationDescription, BindingParameterCollection bindingParameters)
    {
    }

    public void ApplyClientBehavior(OperationDescription operationDescription, ClientOperation clientOperation)
    {
        // Attribute could be used on client side
        clientOperation.ParameterInspectors.Add(this);
    }

    public void ApplyDispatchBehavior(OperationDescription operationDescription, DispatchOperation dispatchOperation)
    {
        // Attribute could be used on server side
        dispatchOperation.ParameterInspectors.Add(this);
    }

    public void Validate(OperationDescription operationDescription)
    {
    }

    #endregion

    #region IParameterInspector Members

    public void AfterCall(string operationName, object[] outputs, object returnValue, object correlationState)
    {
         // Do something with returned values from operation
    }

    public object BeforeCall(string operationName, object[] inputs)
    {
        // Do something with incoming parameters before invoking actual operation
        return null;
    }

    #endregion
} 
```

并将属性附加到操作

```
[ServiceContract]
public interface ICustomServiceContract
{
    [CustomInspector]
    [OperationContract]
    void MyOperation();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-25T11:42:00.600

您需要构建一个[自定义服务主机](http://msdn.microsoft.com/en-us/library/aa395224.aspx)，然后设置您的 .svc 文件以使用它。在自定义服务主机中，您可以在服务启动之前对服务进行任何操作，包括设置行为。因为您要使用操作行为，您应该在 OnOpening() 方法中执行 - 因为服务工厂应用在配置端点行为后重置操作行为。您将能够遍历端点和 OnOpening 中的操作。

# java - 如何在 Java 密钥库中导入现有的 X.509 证书和私钥以在 SSL 中使用？

> ID：906402
> 
> 赞同：266
> 
> 时间：2009-05-25T11:34:01.770
> 
> 标签：java, ssl, jms, activemq, jks

我在 ActiveMQ 配置中有这个：

```
<sslContext>
        <sslContext keyStore="file:/home/alex/work/amq/broker.ks"  
 keyStorePassword="password" trustStore="file:${activemq.base}/conf/broker.ts" 
 trustStorePassword="password"/>
</sslContext> 
```

我有一对 X.509 证书和一个密钥文件。

如何导入这两个以便在 SSL 和 SSL+stomp 连接器中使用它们？我可以谷歌搜索的所有示例总是自己生成密钥，但我已经有一个密钥。

我试过了

```
keytool -import  -keystore ./broker.ks -file mycert.crt 
```

但这只会导入证书而不是密钥文件并导致

```
2009-05-25 13:16:24,270 [localhost:61612] ERROR TransportConnector - Could not accept connection : No available certificate or key corresponds to the SSL cipher suites which are enabled. 
```

我尝试将证书和密钥连接起来，但得到了相同的结果。

如何导入密钥？

* * *

## 回答 #1

> 赞同：591
> 
> 时间：2011-11-22T09:52:16.090

我使用了在其他答案中链接的评论/帖子中找到的以下两个步骤：

**第一步：将 x.509 证书和密钥转换为 pkcs12 文件**

```
openssl pkcs12 -export -in server.crt -inkey server.key \
               -out server.p12 -name [some-alias] \
               -CAfile ca.crt -caname root 
```

**注意：**确保在 pkcs12 文件上输入密码 - 否则在尝试导入时会出现空指针异常。（以防其他人有这种头痛）。（**谢谢jocull！**）

**注意 2：**您可能希望添加`-chain`选项以保留完整的证书链。（**感谢马夫巴**）

**第二步：将 pkcs12 文件转换为 Java 密钥库**

```
keytool -importkeystore \
        -deststorepass [changeit] -destkeypass [changeit] -destkeystore server.keystore \
        -srckeystore server.p12 -srcstoretype PKCS12 -srcstorepass some-password \
        -alias [some-alias] 
```

**完成的**

**可选步骤零：创建自签名证书**

```
openssl genrsa -out server.key 2048
openssl req -new -out server.csr -key server.key
openssl x509 -req -days 365 -in server.csr -signkey server.key -out server.crt 
```

干杯!

* * *

## 回答 #2

> 赞同：136
> 
> 时间：2010-01-26T17:26:15.557

Java 6 中的 Keytool 确实具有此功能：[Importing private keys into a Java keystore using keytool](http://cunning.sharp.fm/2008/06/importing_private_keys_into_a.html)

以下是该帖子的基本细节。

1.  使用 OpenSSL 将现有证书转换为 PKCS12。询问时需要密码，否则第二步会抱怨。

    ```
    openssl pkcs12 -export -in [my_certificate.crt] -inkey [my_key.key] -out [keystore.p12] -name [new_alias] -CAfile [my_ca_bundle.crt] -caname root 
    ```

2.  将 PKCS12 转换为 Java 密钥库文件。

    ```
    keytool -importkeystore -deststorepass [new_keystore_pass] -destkeypass [new_key_pass] -destkeystore [keystore.jks] -srckeystore [keystore.p12] -srcstoretype PKCS12 -srcstorepass [pass_used_in_p12_keystore] -alias [alias_used_in_p12_keystore] 
    ```

* * *

## 回答 #3

> 赞同：85
> 
> 时间：2009-05-25T17:42:02.797

信不信由你，keytool 不提供像将私钥导入密钥库这样的基本功能。您可以尝试通过将带有私钥的 PKSC12 文件合并到密钥库来尝试此[解决方法：](http://web.archive.org/web/20190426215445/http://cunning.sharp.fm/2008/06/importing_private_keys_into_a.html)

```
keytool -importkeystore \
  -deststorepass storepassword \
  -destkeypass keypassword \
  -destkeystore my-keystore.jks \
  -srckeystore cert-and-key.p12 \
  -srcstoretype PKCS12 \
  -srcstorepass p12password \
  -alias 1 
```

或者只是使用 IBM 提供的更加用户友好的[KeyMan](https://www.ibm.com/developerworks/mydeveloperworks/groups/service/html/communityview?communityUuid=6fb00498-f6ea-4f65-bf0c-adc5bd0c5fcc)来处理密钥库，而不是使用 keytool。

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2019-06-19T11:29:31.533

# 使用 Let's Encrypt 证书

[假设您已经使用Let's Encrypt](https://letsencrypt.org/) in创建了证书和私钥`/etc/letsencrypt/live/you.com`：

## 1\. 创建一个[PKCS #12](https://en.wikipedia.org/wiki/PKCS_12)文件

```
openssl pkcs12 -export -in fullchain.pem -inkey privkey.pem -out pkcs.p12 \
        -name letsencrypt 
```

这会将您的 SSL 证书`fullchain.pem`和您的私钥组合`privkey.pem`到一个文件中，`pkcs.p12`.

系统将提示您输入`pkcs.p12`.

该`export`选项指定将创建而不是解析 PKCS #12 文件（根据[手册](https://linux.die.net/man/1/pkcs12)）。

## 2\. 创建 Java 密钥库

```
keytool -importkeystore -destkeystore keystore.jks -srckeystore pkcs.p12 \
        -srcstoretype PKCS12 -alias letsencrypt 
```

如果`keystore.jks`不存在，将创建包含`pkcs.12`上面创建的文件。否则，您将导入`pkcs.12`现有的密钥库。

* * *

这些说明源自[此博客](https://maximilian-boehm.com/en-gb/blog/)上的文章“从 Let's Encrypt Certificates 创建 Java 密钥库 (.JKS)” 。

[这里有更多](https://certbot.eff.org/docs/using.html#where-are-my-certificates)关于`/etc/letsencrypt/live/you.com/`.

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2017-06-01T08:49:59.503

首先转换为 p12：

```
openssl pkcs12 -export -in [filename-certificate] -inkey [filename-key] -name [host] -out [filename-new-PKCS-12.p12] 
```

从 p12 创建新的 JKS：

```
keytool -importkeystore -deststorepass [password] -destkeystore [filename-new-keystore.jks] -srckeystore [filename-new-PKCS-12.p12] -srcstoretype PKCS12 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2015-07-27T23:00:07.433

还有一个：

```
#!/bin/bash

# We have:
#
# 1) $KEY : Secret key in PEM format ("-----BEGIN RSA PRIVATE KEY-----") 
# 2) $LEAFCERT : Certificate for secret key obtained from some
#    certification outfit, also in PEM format ("-----BEGIN CERTIFICATE-----")   
# 3) $CHAINCERT : Intermediate certificate linking $LEAFCERT to a trusted
#    Self-Signed Root CA Certificate 
#
# We want to create a fresh Java "keystore" $TARGET_KEYSTORE with the
# password $TARGET_STOREPW, to be used by Tomcat for HTTPS Connector.
#
# The keystore must contain: $KEY, $LEAFCERT, $CHAINCERT
# The Self-Signed Root CA Certificate is obtained by Tomcat from the
# JDK's truststore in /etc/pki/java/cacerts

# The non-APR HTTPS connector (APR uses OpenSSL-like configuration, much
# easier than this) in server.xml looks like this 
# (See: https://tomcat.apache.org/tomcat-6.0-doc/ssl-howto.html):
#
#  <Connector port="8443" protocol="org.apache.coyote.http11.Http11Protocol"
#                SSLEnabled="true"
#                maxThreads="150" scheme="https" secure="true"
#                clientAuth="false" sslProtocol="TLS"
#                keystoreFile="/etc/tomcat6/etl-web.keystore.jks"
#                keystorePass="changeit" />
#

# Let's roll:    

TARGET_KEYSTORE=/etc/tomcat6/foo-server.keystore.jks
TARGET_STOREPW=changeit

TLS=/etc/pki/tls

KEY=$TLS/private/httpd/foo-server.example.com.key
LEAFCERT=$TLS/certs/httpd/foo-server.example.com.pem
CHAINCERT=$TLS/certs/httpd/chain.cert.pem

# ----
# Create PKCS#12 file to import using keytool later
# ----

# From https://www.sslshopper.com/ssl-converter.html:
# The PKCS#12 or PFX format is a binary format for storing the server certificate,
# any intermediate certificates, and the private key in one encryptable file. PFX
# files usually have extensions such as .pfx and .p12\. PFX files are typically used 
# on Windows machines to import and export certificates and private keys.

TMPPW=$$ # Some random password

PKCS12FILE=`mktemp`

if [[ $? != 0 ]]; then
  echo "Creation of temporary PKCS12 file failed -- exiting" >&2; exit 1
fi

TRANSITFILE=`mktemp`

if [[ $? != 0 ]]; then
  echo "Creation of temporary transit file failed -- exiting" >&2; exit 1
fi

cat "$KEY" "$LEAFCERT" > "$TRANSITFILE"

openssl pkcs12 -export -passout "pass:$TMPPW" -in "$TRANSITFILE" -name etl-web > "$PKCS12FILE"

/bin/rm "$TRANSITFILE"

# Print out result for fun! Bug in doc (I think): "-pass " arg does not work, need "-passin"

openssl pkcs12 -passin "pass:$TMPPW" -passout "pass:$TMPPW" -in "$PKCS12FILE" -info

# ----
# Import contents of PKCS12FILE into a Java keystore. WTF, Sun, what were you thinking?
# ----

if [[ -f "$TARGET_KEYSTORE" ]]; then
  /bin/rm "$TARGET_KEYSTORE"
fi

keytool -importkeystore \
   -deststorepass  "$TARGET_STOREPW" \
   -destkeypass    "$TARGET_STOREPW" \
   -destkeystore   "$TARGET_KEYSTORE" \
   -srckeystore    "$PKCS12FILE" \
   -srcstoretype  PKCS12 \
   -srcstorepass  "$TMPPW" \
   -alias foo-the-server

/bin/rm "$PKCS12FILE"

# ----
# Import the chain certificate. This works empirically, it is not at all clear from the doc whether this is correct
# ----

echo "Importing chain"

TT=-trustcacerts

keytool -import $TT -storepass "$TARGET_STOREPW" -file "$CHAINCERT" -keystore "$TARGET_KEYSTORE" -alias chain

# ----
# Print contents
# ----

echo "Listing result"

keytool -list -storepass "$TARGET_STOREPW" -keystore "$TARGET_KEYSTORE" 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2014-09-04T16:18:01.203

就我而言，我有一个 pem 文件，其中包含两个证书和一个加密私钥，用于相互 SSL 身份验证。所以我的 pem 文件看起来像这样：

```
-----BEGIN CERTIFICATE-----
...
-----END CERTIFICATE-----
-----BEGIN RSA PRIVATE KEY-----
Proc-Type: 4,ENCRYPTED
DEK-Info: DES-EDE3-CBC,C8BF220FC76AA5F9
...
-----END RSA PRIVATE KEY-----
-----BEGIN CERTIFICATE-----
...
-----END CERTIFICATE----- 
```

这是我所做的：

将文件拆分为三个单独的文件，以便每个文件只包含一个条目，以“---BEGIN..”开头并以“---END..”行结尾。假设我们现在有三个文件：cert1.pem cert2.pem 和 pkey.pem

使用 openssl 和以下语法将 pkey.pem 转换为 DER 格式：

`openssl pkcs8 -topk8 -nocrypt -in pkey.pem -inform PEM -out pkey.der -outform DER`

请注意，如果私钥已加密，您需要提供密码（从原始 pem 文件的供应商处获取）以转换为 DER 格式，openssl 将要求您输入密码，如下所示：“输入 pkey 的密码.pem: " 如果转换成功，您将获得一个名为“pkey.der”的新文件

创建一个新的 java 密钥库并导入私钥和证书：

```
String keypass = "password";  // this is a new password, you need to come up with to protect your java key store file
String defaultalias = "importkey";
KeyStore ks = KeyStore.getInstance("JKS", "SUN");

// this section does not make much sense to me, 
// but I will leave it intact as this is how it was in the original example I found on internet:   
ks.load( null, keypass.toCharArray());
ks.store( new FileOutputStream ( "mykeystore"  ), keypass.toCharArray());
ks.load( new FileInputStream ( "mykeystore" ),    keypass.toCharArray());
// end of section..

// read the key file from disk and create a PrivateKey

FileInputStream fis = new FileInputStream("pkey.der");
DataInputStream dis = new DataInputStream(fis);
byte[] bytes = new byte[dis.available()];
dis.readFully(bytes);
ByteArrayInputStream bais = new ByteArrayInputStream(bytes);

byte[] key = new byte[bais.available()];
KeyFactory kf = KeyFactory.getInstance("RSA");
bais.read(key, 0, bais.available());
bais.close();

PKCS8EncodedKeySpec keysp = new PKCS8EncodedKeySpec ( key );
PrivateKey ff = kf.generatePrivate (keysp);

// read the certificates from the files and load them into the key store:

Collection  col_crt1 = CertificateFactory.getInstance("X509").generateCertificates(new FileInputStream("cert1.pem"));
Collection  col_crt2 = CertificateFactory.getInstance("X509").generateCertificates(new FileInputStream("cert2.pem"));

Certificate crt1 = (Certificate) col_crt1.iterator().next();
Certificate crt2 = (Certificate) col_crt2.iterator().next();
Certificate[] chain = new Certificate[] { crt1, crt2 };

String alias1 = ((X509Certificate) crt1).getSubjectX500Principal().getName();
String alias2 = ((X509Certificate) crt2).getSubjectX500Principal().getName();

ks.setCertificateEntry(alias1, crt1);
ks.setCertificateEntry(alias2, crt2);

// store the private key
ks.setKeyEntry(defaultalias, ff, keypass.toCharArray(), chain );

// save the key store to a file         
ks.store(new FileOutputStream ( "mykeystore" ),keypass.toCharArray()); 
```

（可选）验证新密钥库的内容：

`keytool -list -keystore mykeystore -storepass password`

> 密钥库类型：JKS 密钥库提供者：SUN
> 
> 您的密钥库包含 3 个条目
> 
> cn=...,ou=...,o=..，2014 年 9 月 2 日，trustedCertEntry，证书指纹 (SHA1): 2C:B8: ...
> 
> importkey，2014 年 9 月 2 日，PrivateKeyEntry，证书指纹 (SHA1)：9C:B0: ...
> 
> cn=...,o=....，2014 年 9 月 2 日，trustedCertEntry，证书指纹 (SHA1)：83:63：...

（可选）针对您的 SSL 服务器测试您的新密钥库中的证书和私钥：（您可能希望启用调试作为 VM 选项：-Djavax.net.debug=all）

```
 char[] passw = "password".toCharArray();
        KeyStore ks = KeyStore.getInstance("JKS", "SUN");
        ks.load(new FileInputStream ( "mykeystore" ), passw );

        KeyManagerFactory kmf = KeyManagerFactory.getInstance("SunX509");
        kmf.init(ks, passw);

        TrustManagerFactory tmf = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());
        tmf.init(ks);
        TrustManager[] tm = tmf.getTrustManagers();

        SSLContext sclx = SSLContext.getInstance("TLS");
        sclx.init( kmf.getKeyManagers(), tm, null);

        SSLSocketFactory factory = sclx.getSocketFactory();
        SSLSocket socket = (SSLSocket) factory.createSocket( "192.168.1.111", 443 );
        socket.startHandshake();

        //if no exceptions are thrown in the startHandshake method, then everything is fine.. 
```

如果打算使用它，最后使用 HttpsURLConnection 注册您的证书：

```
 char[] passw = "password".toCharArray();
        KeyStore ks = KeyStore.getInstance("JKS", "SUN");
        ks.load(new FileInputStream ( "mykeystore" ), passw );

        KeyManagerFactory kmf = KeyManagerFactory.getInstance("SunX509");
        kmf.init(ks, passw);

        TrustManagerFactory tmf = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());
        tmf.init(ks);
        TrustManager[] tm = tmf.getTrustManagers();

        SSLContext sclx = SSLContext.getInstance("TLS");
        sclx.init( kmf.getKeyManagers(), tm, null);

        HostnameVerifier hv = new HostnameVerifier()
        {
            public boolean verify(String urlHostName, SSLSession session)
            {
                if (!urlHostName.equalsIgnoreCase(session.getPeerHost()))
                {
                    System.out.println("Warning: URL host '" + urlHostName + "' is different to SSLSession host '" + session.getPeerHost() + "'.");
                }
                return true;
            }
        };

        HttpsURLConnection.setDefaultSSLSocketFactory( sclx.getSocketFactory() );
        HttpsURLConnection.setDefaultHostnameVerifier(hv); 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2009-05-26T07:19:56.090

是的，keytool 没有导入私钥的功能确实是一个可悲的事实。

作为记录，最后我采用了[此处描述的解决方案](https://web.archive.org/web/20160106102307/http://www.agentbob.info/agentbob/79-AB.html)

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2016-07-14T13:47:23.053

您可以使用这些步骤将密钥导入现有密钥库。这些说明是从该线程和其他站点中的答案组合而成的。这些说明对我有用（java 密钥库）：

1.  跑

`openssl pkcs12 -export -in yourserver.crt -inkey yourkey.key -out server.p12 -name somename -certfile yourca.crt -caname root`

（如果需要，请放置 -chain 选项。对我来说失败了）。这将要求输入密码 - 您必须提供正确的密码，否则您将收到错误（标题错误或填充错误等）。

2.  它会要求您输入新密码 - 您必须在此处输入密码 - 输入任何内容但记住它。（让我们假设您进入阿拉贡）。
3.  这将创建 pkcs 格式的 server.p12 文件。
4.  现在将其导入`*.jks`文件运行：（
    `keytool -importkeystore -srckeystore server.p12 -srcstoretype PKCS12 -destkeystore yourexistingjavakeystore.jks -deststoretype JKS -deststorepass existingjavastorepassword -destkeypass existingjavastorepassword`
    非常重要 - 不要遗漏 deststorepass 和 destkeypass 参数。）
5.  它会询问您的 src 密钥存储密码。输入阿拉贡并回车。证书和密钥现在已导入现有的 java 密钥库。

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2016-12-13T23:48:38.547

根据上面的答案，这里是如何使用 keytool（需要 JDK 1.6+）从独立创建的 Comodo 证书和私钥中为基于 Java 的 Web 服务器创建一个全新的密钥库

1.  发出此命令并在密码提示符处输入 somepass -“server.crt”是您的服务器的证书，“server.key”是您用于发出 CSR 的私钥： `openssl pkcs12 -export -in server.crt -inkey server.key -out server.p12 -name www.yourdomain.com -CAfile AddTrustExternalCARoot.crt -caname "AddTrust External CA Root"`

2.  然后使用 keytool 将 p12 密钥库转换为 jks 密钥库： `keytool -importkeystore -deststorepass somepass -destkeypass somepass -destkeystore keystore.jks -srckeystore server.p12 -srcstoretype PKCS12 -srcstorepass somepass`

然后导入您从 Comodo 收到的另外两个根/中间证书：

3.  导入 COMODORSAAddTrustCA.crt： `keytool -import -trustcacerts -alias cert1 -file COMODORSAAddTrustCA.crt -keystore keystore.jks`

4.  导入 COMODORSADomainValidationSecureServerCA.crt： `keytool -import -trustcacerts -alias cert2 -file COMODORSADomainValidationSecureServerCA.crt -keystore keystore.jks`

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2016-03-02T19:23:49.973

以前的答案正确地指出，您只能使用标准 JDK 工具执行此操作，方法是先将 JKS 文件转换为 PKCS #12 格式。如果您有兴趣，我可以将 OpenSSL 派生密钥导入 JKS 格式的密钥库，而无需先将密钥库转换为 PKCS #12：[http://commandlinefanatic.com/cgi-bin/showarticle。 cgi?article=art049](http://commandlinefanatic.com/cgi-bin/showarticle.cgi?article=art049)

您将像这样使用链接的实用程序：

```
$ openssl req -x509 -newkey rsa:2048 -keyout localhost.key -out localhost.csr -subj "/CN=localhost" 
```

（签署 CSR，取回 localhost.cer）

```
$ openssl rsa -in localhost.key -out localhost.rsa
Enter pass phrase for localhost.key:
writing RSA key
$ java -classpath . KeyImport -keyFile localhost.rsa -alias localhost -certificateFile localhost.cer -keystore localhost.jks -keystorePassword changeit -keystoreType JKS -keyPassword changeit 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2019-01-16T00:00:50.587

如果您有一个 PEM 文件（例如`server.pem`），其中包含：

*   可信证书
*   私钥

然后您可以将证书和密钥导入 JKS 密钥库，如下所示：

**1** ) 将 PEM 文件中的私钥复制到 ascii 文件中（例如`server.key`）

**2** ) 将 PEM 文件中的证书复制到 ascii 文件中（例如`server.crt`）

**3** ) 将证书和密钥导出到 PKCS12 文件中：

```
$ openssl pkcs12 -export -in server.crt -inkey server.key \
                 -out server.p12 -name [some-alias] -CAfile server.pem -caname root 
```

*   **PEM 文件可用作`-CAfile`选项**的参数。
*   系统会提示您输入“导出”密码。
*   如果在 git bash 中执行此操作，则添加`winpty`到命令的开头，以便可以输入导出密码。

**4** ) 将 PKCS12 文件转换为 JKS 密钥库：

```
$ keytool -importkeystore -deststorepass changeit -destkeypass changeit \
          -destkeystore keystore.jks  -srckeystore server.p12 -srcstoretype PKCS12 \
          -srcstorepass changeit 
```

*   `srcstorepass`密码应与步骤 3 中的导出密码匹配）

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2019-03-18T11:30:13.857

我试图实现的是使用已经提供的私钥和证书来签署消息，该消息需要确保消息来自我（私钥签名而公钥加密）。

那么如果你已经有一个 .key 文件和一个 .crt 文件呢？

试试这个：

**Step1：**将密钥和证书转换为 .p12 文件

```
openssl pkcs12 -export -in certificate.crt -inkey privateKey.key -name alias -out yourconvertedfile.p12 
```

**第 2 步：**导入密钥并使用单个命令创建一个 .jsk 文件

```
keytool -importkeystore -deststorepass changeit -destkeystore keystore.jks -srckeystore umeme.p12 -srcstoretype PKCS12 
```

**第 3 步：**在您的 java 中：

```
char[] keyPassword = "changeit".toCharArray();

KeyStore keyStore = KeyStore.getInstance("JKS");
InputStream keyStoreData = new FileInputStream("keystore.jks");

keyStore.load(keyStoreData, keyPassword);
KeyStore.ProtectionParameter entryPassword = new KeyStore.PasswordProtection(keyPassword);
KeyStore.PrivateKeyEntry privateKeyEntry = (KeyStore.PrivateKeyEntry)keyStore.getEntry("alias", entryPassword);

System.out.println(privateKeyEntry.toString()); 
```

如果您需要使用此密钥对某些字符串进行签名，请执行以下操作：

第 1 步：转换要加密的文本

```
byte[] data = "test".getBytes("UTF8"); 
```

第二步：获取base64编码的私钥

```
keyStore.load(keyStoreData, keyPassword);

//get cert, pubkey and private key from the store by alias
Certificate cert = keyStore.getCertificate("localhost");
PublicKey publicKey = cert.getPublicKey();
KeyPair keyPair = new KeyPair(publicKey, (PrivateKey) key);

//sign with this alg
Signature sig = Signature.getInstance("SHA1WithRSA");
sig.initSign(keyPair.getPrivate());
sig.update(data);
byte[] signatureBytes = sig.sign();
System.out.println("Signature:" + Base64.getEncoder().encodeToString(signatureBytes));

sig.initVerify(keyPair.getPublic());
sig.update(data);

System.out.println(sig.verify(signatureBytes)); 
```

*参考：*

1.  [如何在 Java 密钥库中导入现有的 x509 证书和私钥以在 SSL 中使用？](https://stackoverflow.com/questions/906402/how-to-import-an-existing-x509-certificate-and-private-key-in-java-keystore-to-u)
2.  [http://tutorials.jenkov.com/java-cryptography/keystore.html](http://tutorials.jenkov.com/java-cryptography/keystore.html)
3.  [http://www.java2s.com/Code/Java/Security/RetrievingaKeyPairfromaKeyStore.htm](http://www.java2s.com/Code/Java/Security/RetrievingaKeyPairfromaKeyStore.htm)
4.  [如何用私钥签署字符串](https://stackoverflow.com/questions/7224626/how-to-sign-string-with-private-key)

**最终计划**

```
public static void main(String[] args) throws Exception {

    byte[] data = "test".getBytes("UTF8");

    // load keystore
    char[] keyPassword = "changeit".toCharArray();

    KeyStore keyStore = KeyStore.getInstance("JKS");
    //System.getProperty("user.dir") + "" < for a file in particular path 
    InputStream keyStoreData = new FileInputStream("keystore.jks");
    keyStore.load(keyStoreData, keyPassword);

    Key key = keyStore.getKey("localhost", keyPassword);

    Certificate cert = keyStore.getCertificate("localhost");

    PublicKey publicKey = cert.getPublicKey();

    KeyPair keyPair = new KeyPair(publicKey, (PrivateKey) key);

    Signature sig = Signature.getInstance("SHA1WithRSA");

    sig.initSign(keyPair.getPrivate());
    sig.update(data);
    byte[] signatureBytes = sig.sign();
    System.out.println("Signature:" + Base64.getEncoder().encodeToString(signatureBytes));

    sig.initVerify(keyPair.getPublic());
    sig.update(data);

    System.out.println(sig.verify(signatureBytes));
} 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2018-12-31T16:45:17.080

只需制作一个PKCS12 keystore，Java现在可以直接使用它。事实上，如果您列出 Java 样式的密钥库，keytool 本身会提醒您 PKCS12 现在是首选格式。

```
openssl pkcs12 -export -in server.crt -inkey server.key \
               -out server.p12 -name [some-alias] \
               -CAfile ca.crt -caname root -chain 
```

您应该已从您的证书提供商处收到所有三个文件（server.crt、server.key、c​​a.crt）。我不确定“-caname root”实际上是什么意思，但似乎必须这样指定。

在 Java 代码中，确保指定正确的密钥库类型。

```
KeyStore.getInstance("PKCS12") 
```

通过这种方式，我的 comodo.com 颁发的 SSL 证书在 NanoHTTPD 中运行良好。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-03-20T21:49:14.590

在椭圆曲线的情况下并回答问题*import an existing x509 certificate and private key in Java keystore*，您可能还想看看这个线程[How to read EC Private key in java which is in .pem file format](https://stackhttps://stackoverflow.com/a/55269325/3785184)

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-06-24T21:47:59.930

如果您在单个 .pem 文件中收到了组合的证书和密钥，例如 MongoDB Atlas 的身份验证，那么，

用文本编辑器打开`pem`文件，将它们拆分成两个文件，例如`cert.pem`和`key.pem`（可以在文件中进行拆分的地方非常清楚），然后使用`openssl`命令创建单个 p12 格式文件，如下所示：

```
 openssl pkcs12 -export -out server.p12 -name test\
 -in cert.pem -inkey key.pem 
```

我正在使用 Java 8，事实证明，至少在 Java 8 或更高版本中，生成的 p12 ( ) 现在是密钥库文件，因此您可以`server.p12`直接使用它而无需使用`keytool`它。

# outlook - 如何读取 Outlook 昵称列表文件 (.NK2)？

> ID：906405
> 
> 赞同：-2
> 
> 时间：2009-05-25T11:34:49.460
> 
> 标签：outlook, pst

任何人都知道如何阅读 Outlook 昵称列表文件 (.NK2)？关于其格式的任何文件？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2009-05-25T11:39:11.043

搜索时发现：[debunk2](http://code.google.com/p/debunk2/wiki/fileformat "揭穿2")。

# wpf - 使用 MV-VM 的 WPF Prism V2 - 在运行时将视图从 ViewModel 添加到区域

> ID：906406
> 
> 赞同：0
> 
> 时间：2009-05-25T11:35:36.620
> 
> 标签：wpf, mvvm, dependency-injection, prism

希望是一个非常简单的，我第一次尝试使用 MV-VM 和 Prism V2 的 WPF，到目前为止发现一切都非常棒。我的 Shell 非常简单，顶部是 Ribbon Control，左侧是 Helpdesk 工单的 DataGrid，右侧是 TabControl。

当用户从数据网格打开所选票证时，我希望票证作为选项卡控件上的选项卡打开。我知道为了做到这一点，我需要使用 RegionManager 添加并激活该区域的视图。但是从 ViewModel 执行此操作对我来说似乎不正确，尽管我可以使用 DI (DepenecyInjection) 执行此操作，但它仍然在我的脑海中敲响警报，让 ViewModel 了解有关视图的一些知识。

要添加到这一点，不同的模块也会将其他视图（联系人、客户端等）添加到 TabControl 中，我想使用 DataTemplates 来让 TabControl 正确显示视图，任何人都可以给我任何指示.

非常感谢本

请提供完整答案，而不仅仅是链接。这就是 StackOverflow 的用途！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-06T14:05:14.913

MVVM + 服务 = 终极力量！

服务只是一个众所周知的接口，并在您的 IOC 容器中注册。当 ViewModel 需要在自身之外做一些事情时，比如打开一个选项卡式文档，它会使用该服务。然后根据特定程序的需要实施服务。

例如：

```
public interface IDocumentService
{
    void OpenDocument(IViewModel viewModel);
}

internal class DocumentService:IDocumentService
{
    public void OpenDocument(IViewModel viewModel)
    {
        // Implement code to select the View for the ViewModel,
        // and add it to your TabControl.
    }
}

{
    // Somewhere in your ViewModel...
    // Make sure you can get the IDocumentService
    IDocumentService docService = ioc.Get<IDocumentService>();
    docService.OpenDocument(new TicketViewModel());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-27T05:32:47.460

命令是执行此操作的方法 - 您将向自己发送一个名为“RequestBringTicketIntoView”的命令；它会冒泡到您处理它的窗口。阅读 Josh Smith 的文章：

[http://joshsmithonwpf.wordpress.com/2008/03/18/understanding-routed-commands/](http://joshsmithonwpf.wordpress.com/2008/03/18/understanding-routed-commands/)

# wpf - 模拟 XAML 代码继承的最佳方法是什么？

> ID：906410
> 
> 赞同：4
> 
> 时间：2009-05-25T11:37:43.777
> 
> 标签：wpf, xaml

我有许多 UserControl 类：

*   DataTypeWholeNumber
*   数据类型线
*   数据类型日期
*   日期类型持续时间
*   等等

它们都继承自一个普通的 C# 类，该类继承自没有附加 XAML 的 UserControl。我不得不这样做，因为我收到**错误说 XAML 不能被继承**。

问题是**这些 UserControls 中的每一个的 XAML 基本相同**，所以我想找到一些方法来至少模拟 XAML 继承，这样我就不必为 20 个不同的类重复此代码：

```
<dataTypes:BaseDataType x:Class="TestDependencyProperty827.DataTypes.DataTypeLine"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:dataTypes="clr-namespace:TestDependencyProperty827.DataTypes">
    <StackPanel Margin="{Binding Margin}">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="{Binding LabelWidth}"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <StackPanel Grid.Column="0" Orientation="Horizontal">
                <TextBlock Text="{Binding Label}" FontSize="14"/>
                <TextBlock FontSize="14" Text=":"/>
            </StackPanel>
            <TextBox Grid.Column="1" FontSize="12" HorizontalAlignment="Left" 
                      Text="{Binding Text}" 
                      Width="{Binding Width}"/>
        </Grid>
    </StackPanel>
</dataTypes:BaseDataType> 
```

有没有人遇到过这个问题并找到了解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-26T06:49:55.513

使用适用于基类的 Style：

```
<Style TargetType="BaseClass">
    <Setter Property="Control.Template">
        <Control.Value>          
            <StackPanel Margin="{Binding Margin}">
            <!-- Rest of code here -->
        </Control.Value>
</Style> 
```

*另外，我质疑每*一种基本类型都需要 UserControls - 为什么你不能在任何地方重用相同的 UserControl？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-07-06T11:37:17.197

XAML 类不能从 XAML 类继承，但普通类可以从 XAML 类继承 - 因此，如果所有这些的 XAML 相同，则将 XAML 放入 BaseDataType 并将所有派生类型创建为正常的非 WPF c# 类。

如果您需要从 BaseDataType 派生其他 XAML 用户控件，这是不可能的，但您可以使用样式、数据模板或控件模板在不同控件之间共享 XAML。

# c# - WPF：查找元素的位置

> ID：906417
> 
> 赞同：0
> 
> 时间：2009-05-25T11:39:35.847
> 
> 标签：c#, wpf, multithreading

在回答之前，这并不像您在阅读标题时所想的那样简单。

我有一个 ItemsControl，它绑定到 T 的 ObservableCollection，并且数据被描述为 DataTemplate。迄今为止，这是一个经典案例。

当我添加一个新元素时，我需要知道正在渲染的元素的窗口内的确切坐标和位置。

我意识到 Collection 需要一段时间才能引发事件，而 WPF 需要使用他的所有布局机制来实际定位元素。

我希望在完成后得到通知并获取这些位置。我正在使用这些代码行

```
UIElement item = list.ItemContainerGenerator.ContainerFromItem(foo) as UIElement;
Point point = TranslatePoint(new Point(0.0, 0.0), Window.GetWindow(item)); 
```

现在的问题是，当我遇到这些行时，它总是为时过早，如果我“等待”一秒钟并让 wPF 完成，我确实得到了正确的位置。

我试图找到比“等待”UI-Thread 更好的解决方案。也许你可以帮忙:)

谢谢！爱丽儿

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-25T11:52:27.083

[UIElement 的事件](http://msdn.microsoft.com/en-us/library/system.windows.uielement_events.aspx)之一可能会告诉您布局数据何时可用。 [LayoutUpdate](http://msdn.microsoft.com/en-us/library/system.windows.uielement.layoutupdated.aspx)看起来很有希望。

# c# - WCF Windows 身份验证错误

> ID：906419
> 
> 赞同：0
> 
> 时间：2009-05-25T11:39:49.857
> 
> 标签：c#, wcf, authentication

我正在尝试使用带有 WCF 控制台应用程序的服务。但我得到的唯一响应是“远程服务器返回了意外响应：(400) 错误请求。”

该服务配置有以下选项：

```
<services>
  <service name="TryOut.BasicService" behaviorConfiguration="NicksBasicBehavior">
    <host>
      <baseAddresses>
        <add baseAddress="http://192.168.10.67:8000/Service" />
      </baseAddresses>
    </host>

    <endpoint address ="http://192.168.10.67:8000/Service"

              name="NicksEndpoint"
              binding="basicHttpBinding"
              contract="TryOut.IBasicService"
              bindingConfiguration="BasicBinding"
              />
  </service>
</services>

<behaviors>
  <serviceBehaviors>
    <behavior name="NicksBasicBehavior">       
      <serviceMetadata httpGetEnabled="true"/>
    </behavior>
  </serviceBehaviors>
</behaviors>

<binding name="BasicBinding">
    <security mode="TransportCredentialOnly">
        <transport clientCredentialType="Windows"/>
    </security>
</binding> 
```

我的客户端的配置文件如下：

```
<system.serviceModel>
<bindings>
  <basicHttpBinding>
    <binding name="NicksEndpoint" closeTimeout="00:01:00" openTimeout="00:01:00"
        receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false"
        bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
        maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
        messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
        useDefaultWebProxy="true">
      <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
          maxBytesPerRead="4096" maxNameTableCharCount="16384" />
      <security mode="TransportCredentialOnly">
        <transport clientCredentialType="Windows" proxyCredentialType="None"
            realm="" />
        <message clientCredentialType="UserName" algorithmSuite="Default" />
      </security>
    </binding>
  </basicHttpBinding>
</bindings>
<client>
  <endpoint address="http://192.168.10.67:8000/Service" binding="basicHttpBinding"
      bindingConfiguration="NicksEndpoint" contract="ServiceReference1.IBasicService"
      name="NicksEndpoint" />
</client> 
```

现在，当我在与服务相同的 PC 上启动客户端时，一切正常。但是，如果我尝试在不在服务器 PC 域中的机器上运行客户端，则会出现错误，尽管我在客户端代码中提供了登录信息：

```
c.ClientCredentials.Windows.ClientCredential = new System.Net.NetworkCredential("Nick", "password", "mydomain"); 
```

有人知道我做错了什么，我该如何解决？感谢你在期待！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-27T14:29:38.330

您是否尝试过在客户端端点的标识元素中指定 userPrincipalName？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-25T12:46:44.010

根据[MSDN 上的这篇文章](http://msdn.microsoft.com/en-us/library/cc949012.aspx)，您似乎需要以不同的方式指定您的凭据：

```
WCFTestService.Service myService = new WCFTestService.Service();
myService.Credentials = System.Net.CredentialCache.DefaultCredentials;
MessageBox.Show(myService.GetData(123, true));
myService.Dispose(); 
```

您能否尝试使用此代码并尝试将 Windows 凭据传递给`myService.Credentials`? 那样有用吗？

马克

# javascript - JQuery在当前项目上添加类

> ID：906423
> 
> 赞同：1
> 
> 时间：2009-05-25T11:41:30.850
> 
> 标签：javascript, jquery

我有这种方法可以在点击时更改更大的图像源。

我需要在选定的对象上添加一个“当前”类。我添加这个类没有问题，但我需要它来删除另一个上一个选定项目上的类。

这是我目前正在使用的代码：

```
$(document).ready(function() {
    $("ul.timgs li a").click(function(e) {
        e.preventDefault();
        var path = $(this).attr("href");
        $("div.tour-image img").attr({"src": path});
    });
}); 
```

谢谢 ：-）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-25T11:44:36.820

这应该有效：

```
$("ul.timgs li a").click(function(e) {
  $(".current").removeClass("current");
  $(this).addClass("current");
  ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-25T11:47:53.833

在将“当前”类添加到新的当前项之前，请将其从上一个当前项中删除：

```
$(".current").removeClass("current"); 
```

# c# - 动态表单控件属性

> ID：906428
> 
> 赞同：1
> 
> 时间：2009-05-25T11:43:03.873
> 
> 标签：c#, winforms, reflection

我正在根据 EAV 类型模式中保存的一组元数据动态创建捕获表单。

我的麻烦在于将数据加载回控件，尤其是 winforms 组合框。

还将实体框架用于绑定到控件的数据。

1.  检查是否存在控件，否则创建。为每个映射属性设置它们的值。即数据源、DisplayMember、ValueMember 等...

2.  加载值是否存在于 SelectedValue 属性中？这是哪里失败了？

在检查对象时，似乎还没有加载包括数据源在内的先前值？但是组合框确实显示了渲染后的值吗？

以下是一些代码片段。

```
Type oType = Type.GetType("System.Windows.Forms.ComboBox");
if (oControlObject == null)
{
  oControlObject = (Control)Activator.CreateInstance(oType);
  oControlObject.Tag = item;
  oControlObject.CreateControl();
}

...Loop to set Datasource, DisplayMember & ValueMember ...

if (property.IsReadProperty.Value && value != null)
{
  PropertyInfo propSet = oType.GetProperty(property.PropertyName); //PropertyName here is "SelectedValue"
  propSet.SetValue(oControlObject, value.Value, null);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-29T16:19:38.997

得到它的工作。问题是控件在呈现在表单上之前没有初始化，因此即使设置了数据源，也没有项目集合。

首先建立动态表单，然后通过再次遍历控件来填充保存值......不优雅但它有效，直到我有另一个解决方案。

# jquery - 如何使用jQuery删除除了第一个和最后一个元素之外的所有li元素？

> ID：906432
> 
> 赞同：49
> 
> 时间：2009-05-25T11:44:26.913
> 
> 标签：jquery, html, html-lists

我有一个`<ul>`元素。如何`<li>`使用jQuery删除其中的所有元素，除了第一个和最后一个？

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2009-05-25T11:51:51.703

要从页面上的所有 ul-s 中删除既不是第一个也不是最后一个的 li-s：

```
$('ul li:not(:first-child):not(:last-child)').remove(); 
```

或使用特定的 id：

```
$('#yourul li:not(:first-child):not(:last-child)').remove(); 
```

如果您有一个带有 ul 的 jQuery 对象：

```
$(yourul).find('li:not(:first-child):not(:last-child)').remove(); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2009-05-25T11:48:10.603

您是否尝试过选择所有列表元素，然后从列表中删除第一个和最后一个？

```
$('ul li').not('li:first, li:last').remove() 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2011-02-04T05:39:33.943

```
$('ul li').not('li:first, li:last').remove(); 
```

这将从列表中删除所有项目，**除了/排除**第一个和最后一个元素，

* * *

从任何列表中删除所有项目

```
$('#yourulid li').remove();  //remove all li items from list named/id #yourulid 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-25T11:51:51.873

```
$("ul li:not(:first-child):not(:last-child)").remove(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-27T16:13:52.070

这是一种使用方法`slice`

```
$("#removeAllButFirstAndLast").click(function() {
  $("#myUL").children().slice(1, -1).remove()
})
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<ul id="myUL">
  <li>first</li>
  <li>second</li>
  <li>third</li>
  <li>fourth</li>
</ul>

<div id="removeAllButFirstAndLast">click to remove all but first and last</div>
```

# java - NIO Server 无法监听客户端

> ID：906433
> 
> 赞同：1
> 
> 时间：2009-05-25T11:44:34.633
> 
> 标签：java, tcp, nio

您好我正在尝试实现一个简单的 Java NIO 服务器；它将 socketChannel 注册到选择器。因此，我希望听取客户的意见并发送一些回复。socketChannel注册到selector后，即使client(non NIO)发送了一些数据，Server也无法读取；但是，生成的密钥仍在迭代中。

详细视图：服务器端：

```
**First thread**: 
```

公共无效运行（）{而（真）{

```
 ServerSocketChannel serverSocketChannel = ServerSocketChannel.open();
    serverSocketChannel.configureBlocking(true);
    serverSocketChannel.socket().bind(inetAdressOfServer);
    SocketChannel clientChannel = serverSocketChannel.accept();
    new Listener("").addSocketChannel(clientChannel);

}}

**Second Thread**:

    static Selector selector = Selector.open();
    public boolean addSocketChannel(SocketChannel clientChannel) {

        SelectionKey key = clientSocketChannel.register(selector, selector.OP_READ|SelectionKey.OP_WRITE);              
        key.attach(new ChannelCallback(clientSocketChannel));
        return key.isValid();
    }

    public void run() {

        Set keysSet = selector.keys();
        Iterator i = keysSet.iterator();        
        while (i.hasNext()) {
            SelectionKey key = (SelectionKey) i.next();
        }

        if (key.isReadable()) {
            //read and do something
        }
    }

Client Side:

Socket socket = new Socket(serverIP, serverPort);    
DataOutputStream dos = new DataOutputStream(socket.getOutputStream());    
dos.writeBytes(str + "\n"); 
```

注意：当在单线程中完成时，相同的程序可以工作，但是以上述方式实现时会导致它不听客户端。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-25T12:40:33.413

很难看到你在那里做了什么，但看起来你标记为“第二个线程”的东西被两个线程使用（对实现`Runnable`/扩展`Thread`和实际线程有些混淆？）。特别是，我猜测`new Listener`构造并启动一个线程。`addSocketChannel`然后你在第一个线程中调用。因此，存在竞争条件。

`selector`制作静态也是一个糟糕的主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-25T18:27:37.433

阅读从另一个线程阅读的作品，这是您的代码的明显问题。

```
public void run() {
    Set keysSet = selector.keys(); 
```

在这里，您从迭代器中获取键集，但没有代码在选择器上执行 select() 或 selectNow()，因此该集将始终为空。

```
 Iterator i = keysSet.iterator();        
    while (i.hasNext()) {
        SelectionKey key = (SelectionKey) i.next();
    }
    if (key.isReadable()) {
        //read and do something
    }
} 
```

这甚至不能编译，必须在 while 块内完成对键的“读取”检查。

```
SelectionKey key = clientSocketChannel.register(selector,
                                                SelectionKey.OP_READ | 
                                                SelectionKey.OP_WRITE); 
```

两个问题：在完成之前应该将通道设置为非阻塞模式，并且不应设置 SelectionKey.OP_WRITE，除非您希望每次运行选择时都返回键。

如果您实际上打算进行写入，则应仅设置 SelectionKey.OP_WRITE。

最后，这里使用两个线程是非常规的。这样做的推荐方法是使用 OP_ACCEPT 将 ServerSocketChannel 注册到 Selector，并在与读/写相同的线程上运行 ServerSocket 上的接受。

# stack - 我可以为升序堆栈增长方向配置 ARM 处理器吗？

> ID：906443
> 
> 赞同：5
> 
> 时间：2009-05-25T11:49:25.903
> 
> 标签：stack, arm

这里有一个关于堆栈增长方向的问题。Michael Burr 回答说在 ARM 处理器中可以配置堆栈增长方向 - 即下降（正常行为）堆栈向内存中的零地址（低地址）增长或上升，即堆栈向内存中的更高地址增长。

[大多数现代系统中堆栈增长的方向是什么？](https://stackoverflow.com/questions/664744/what-is-the-direction-of-stack-growth-in-most-modern-systems/664779#664779)

我的问题是：在 ARM 处理器中，我怎样才能使堆栈以递增的方向增长？

如何将堆栈配置为升序，默认情况下它是降序的？任何寄存器位设置/重置等。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-25T12:02:06.410

嗯，ARM 处理器不直接维护堆栈——但它们确实有设计时考虑到这一点的指令：LDM 和 STM。因此，如果您在函数的开头使用 STMDB 并在结尾使用 LDMIA，那么您实际上有一个完整的+降序堆栈：我记得使用的汇编程序允许您将“STMFD”和“LDMFD”写为别名。（“完整”堆栈是堆栈指针指向堆栈上的最新单词的堆栈，而不是下一个要使用的位置）

因此，这不是您可以在运行时简单地重新配置的东西：尽管如果您正在编写自己的操作系统并使用自己的调用约定，您可以选择使用升序堆栈。同样，您也可以选择不使用 R13 作为堆栈指针——这也是调用约定的一部分。这种选择有效地嵌入到使用堆栈的每个函数的实现中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-10-13T09:36:20.900

您有**__user_initial_stackheap()**函数，它可以帮助您使用 Stack-Start、Stack-End 和使用 Heap-Start、Heap-End 的堆重定位来更改 SP。该函数可以在初始化期间使用，因为 ARM 会使用它来重定向堆栈和堆。

此外，您可以选择使用单区域或双内存模型[取决于您的要求]。我在编写使用 ARM926EJ-S 的 UseCases 时使用了这个 API。

[**该**](http://infocenter.arm.com/help/topic/com.arm.doc.dai0179b/AppsNote179.pdf)文档在我的开发过程中有所帮助，也可能对您有所帮助。

希望这可以帮助。

-hjsblogger

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-26T17:03:30.670

嗯，拇指/拇指 2 可能会限制您推送/弹出，而拇指 2 只有 ARM，我不知道我们通常可以说您可以双向使用。传统的 arm 指令，是的，您可以使用 ldmia 或 ldmdb（之后递增或之前递减）以及 stmdb 和 stmia。例如，您如何使 C 编译器在地址中上升而不是自动下降？不知道。

它就像 ARM 上的大端序，只是因为你可能不想这样做，因为它带来了令人头疼的问题。

# google-app-engine - SMTPServerDisconnected 问题

> ID：906448
> 
> 赞同：1
> 
> 时间：2009-05-25T11:51:53.840
> 
> 标签：google-app-engine, smtp

我的 Google 应用引擎应用程序需要发送电子邮件（无论我们从屏幕上获取什么数据）。在开发服务器上，我在启动服务器时指定了我的 smtp 配置（主机、端口、用户、密码）。然后我在提交数据后以该表单运行我的应用程序，其显示错误为

```
**Traceback (most recent call last):
  File "C:\Program Files\Google\google_appengine\google\appengine\ext\webapp\__init__.py", line 500, in __call__
    handler.post(*groups)
  File "C:\Documents and Settings\desk\Desktop\apps\temp\main.py", line 139, in post
    """)
  File "C:\Program Files\Google\google_appengine\google\appengine\api\mail.py", line 205, in send_mail
    message.send(make_sync_call)
  File "C:\Program Files\Google\google_appengine\google\appengine\api\mail.py", line 474, in send
    make_sync_call('mail', self._API_CALL, message, response)
  File "C:\Program Files\Google\google_appengine\google\appengine\api\apiproxy_stub_map.py", line 68, in MakeSyncCall
    apiproxy.MakeSyncCall(service, call, request, response)
  File "C:\Program Files\Google\google_appengine\google\appengine\api\apiproxy_stub_map.py", line 240, in MakeSyncCall
    stub.MakeSyncCall(service, call, request, response)
  File "C:\Program Files\Google\google_appengine\google\appengine\api\apiproxy_stub.py", line 80, in MakeSyncCall
    method(request, response)
  File "C:\Program Files\Google\google_appengine\google\appengine\api\mail_stub.py", line 203, in _Send
    self._SendSMTP(mime_message, smtp_lib)
  File "C:\Program Files\Google\google_appengine\google\appengine\api\mail_stub.py", line 139, in _SendSMTP
    smtp.quit()
  File "C:\Python26\lib\smtplib.py", line 730, in quit
    res = self.docmd("quit")
  File "C:\Python26\lib\smtplib.py", line 362, in docmd
    self.putcmd(cmd,args)
  File "C:\Python26\lib\smtplib.py", line 318, in putcmd
    self.send(str)
  File "C:\Python26\lib\smtplib.py", line 310, in send
    raise SMTPServerDisconnected('please run connect() first')
SMTPServerDisconnected: please run connect() first** 
```

它告诉 SMTPServerDisconnected，请在我使用的代码之后首先运行 connect()

mail.send_mail(sender="abc@xyz.com", to="def@xyz.com", subject="Test Message", body=""" 亲爱的 Albert：

```
 Your example.com account has been approved.  You can now visit
          http://www.example.com/ and sign in using your Google Account to
          access new features.

          Please let us know if you have any questions.

          The example.com Team
          """) 
```

请告诉我这段代码有什么问题我是 Python 和 Google Apps 的新手

我正在等待任何回复提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-25T12:03:49.183

您配置使用哪个 SMTP 服务器？：[http ://code.google.com/appengine/docs/python/tools/devserver.html#Using_Mail](http://code.google.com/appengine/docs/python/tools/devserver.html#Using_Mail)

SMTP 主机将是 SMTP 服务器（即您的邮件中继）的完全限定域名（不是电子邮件地址，而是网络上的服务器名称）。

# asp.net-mvc - ASP.NET MVC - 我可以创建一个不可见的 Ajax.ActionLink() 吗？

> ID：906453
> 
> 赞同：1
> 
> 时间：2009-05-25T11:55:18.047
> 
> 标签：asp.net-mvc, ajax

**是否可以创建一个不可见的 Ajax.ActionLink？**

```
Ajax.ActionLink("", "Action", Args, AjaxArgs) 
```

以上不起作用，LinkName（第一个参数）不能为 Null 或 Empty...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-25T12:04:59.600

您可以添加样式 html 属性：

```
Ajax.ActionLink("LinkText", "Action", Args, AjaxArgs,new{style="display:none;"}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-25T12:04:24.737

您可能只需将其包装在这样的 div 中：

```
<div style="{display:none}">Ajax.ActionLink("", "Action", Args, AjaxArgs)</div> 
```

# bluetooth - 无需手动配对即可在 Windows 上访问蓝牙虚拟 COM 端口

> ID：906454
> 
> 赞同：4
> 
> 时间：2009-05-25T11:55:21.273
> 
> 标签：bluetooth, virtual-serial-port

我需要通过在 Windows 中创建的虚拟 COM 端口连接到蓝牙设备。如果在手动配对过程中已经创建了端口，这很容易。但我希望我的应用程序可以让用户免于手动配对设备。我想展示范围内的所有设备，允许用户选择一个，然后创建与所选设备连接的虚拟 COM 端口。我并不是想避免配对过程本身，而是我想通过我的应用程序调用它。

我开始熟悉[Microsoft Bluetooth API](http://msdn.microsoft.com/en-us/library/aa362932(VS.85).aspx)。然后出现了一些疑问。我一直想知道如果某些用户使用不同的（与微软的）蓝牙堆栈会发生什么？微软的 API 是真正的蓝牙 API，必须由任何其他蓝牙堆栈提供商实现吗？或者更确切地说，每个提供商都有自己的 API，而微软只是众多其他 API 中的一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-04T06:58:55.527

感谢大家的宝贵意见。我想总结一下我到目前为止的发现。Microsoft 蓝牙 API 不是操作系统 API。针对它编写的应用程序将无法与任何其他[蓝牙堆栈](http://en.wikipedia.org/wiki/Bluetooth_stack)正确协作。似乎打算与多个堆栈合作的应用程序需要提供一些堆栈抽象层，并为所有堆栈提供特定的代码。另一种解决方案是允许用户手动配对蓝牙设备，最终创建一些虚拟设备在操作系统中（例如，COM 端口）。然后应用程序可以使用这种设备的标准接口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-26T07:29:33.263

我不能代表 Microsoft 蓝牙 API，但有[多个可用于 PC 平台的蓝牙堆栈](http://en.wikipedia.org/wiki/Bluetooth_stack)（更适用于移动设备）。

底层 API 由[蓝牙核心规范](http://www.bluetooth.com/Bluetooth/Technology/Works/Core_Specification_v30.htm)定义，因此所有堆栈都应该能够交互，事实上它们互操作是强制性的，否则它们不能使用蓝牙名称和徽标。

至于配对，如果设备具有默认安全性，您将很难配对设备，这需要密码。

在（不久的）将来，事情可能会更简单，因为蓝牙标准引入了一种新的安全模型，即[安全简单配对](http://www.bluetooth.com/Bluetooth/Technology/Building/Research/emBluetoothem_Secure_Simple_Pairing_User_Interface_Flow.htm)，它具有不需要 Pin 码的“正常工作”模式。这仍然比当前的安全性更强，除了针对中间人的攻击。但是，您可能需要一段时间才能在 PC 中看到具有此功能的芯片。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-26T10:25:42.457

如果您可以改用 .NET：-/ 我可以推荐我们的库[32feet.NET](http://32feet.net)。对于显式配对，有 BluetoothSecurity.PairDevice。我们还可以为您创建虚拟端口，例如：

```
 BluetoothClient cli = new BluetoothClient();
   BluetoothDeviceInfo[] list = cli.DiscoverDevices();
   BluetoothDeviceInfo selected = GetUserToSelectOne(list);
   BluetoothSecurity.PairDevice(selected, pin);
   // Ask Win32 to create a virtual serial port
   selected.SetServiceState(BluetoothService.SerialPort); 
```

但是我真的不喜欢虚拟串行端口，所以我总是建议人们使用我们的 BluetoothClient 类使用普通套接字连接，如果需要，它会自动处理配对请求。

在 Win32 上，我们支持来自 Microsoft、Widcomm/Broadcom 和 BlueSoleil 的堆栈。在 Widcomm 上还没有对 SetServiceState 的支持，并且他们的 API 不支持响应配对*请求*。BlueSoleil 应该支持两者。

一个简短的用户指南在 [32feet.NET — 用户指南](http://www.alanjmcf.me.uk/comms/bluetooth/32feet.NET%20%E2%80%94%20User%E2%80%99s%20Guide.html)，所有的类文档都可以在主站点[http://32feet.net](http://32feet.net)上找到，Widcomm 文档目前只在我们的[代码库](http://32feet.codeplex.com/SourceControl/ListDownloadableCommits.aspx)中。

# asp.net-mvc - 执行操作而不重定向

> ID：906455
> 
> 赞同：1
> 
> 时间：2009-05-25T11:55:55.253
> 
> 标签：asp.net-mvc

我有一个小问题要问社区。`RedirectToAction()`ASP.NET MVC 是否允许在没有方法且不创建该控制器实例的情况下执行另一个控制器的操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-25T12:16:56.473

这是不可能的。要执行一个实例方法，必须有一个实例在其中执行。Action 方法与所有其他方法一样只是简单的方法，因此您总是需要一个实例来调用该方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-25T12:23:35.400

你的意思是你希望有一个什么都不返回的视图。没有视野。没有纳达？

如果是这样，你可以返回一个[EmptyResult](http://msdn.microsoft.com/en-us/library/system.web.mvc.emptyresult.aspx) *ViewResult*类...

HTH。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-12T13:23:21.287

您可以通过`Reflection`技术调用它，但**不推荐**。很快，因为它不在请求/响应/控制器上下文中。
就个人而言，我更喜欢有一个`internal static method(bla bla){...}`并在我想要的任何地方调用它。
但如果你放弃

> 无需创建此控制器的实例

条款，那么你可以使用[这个方法](http://www.productiverage.com/handing-off-to-another-aspnet-mvc-controller-action-without-redirecting)。但正如它所解释的，它**也不推荐**。总结如下：

```
var controller = new FooController();
controller.ControllerContext = new ControllerContext(this.ControllerContext.RequestContext, controller);
var jsonResult = controller.BlaMethod(someInputParams); 
```

# ruby-on-rails - 只允许上传 pdf

> ID：906457
> 
> 赞同：0
> 
> 时间：2009-05-25T11:56:14.907
> 
> 标签：ruby-on-rails, pdf

如何更改这段代码，以便只允许上传 pdf 文件：

```
unless @file.content_type =~ /^image/
  errors.add(:file, "is not a recognized format")
  return false
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-25T11:58:54.450

当然，该代码非常不安全。它依赖于发送文件的浏览器来获取正确的 MIME 类型，并假设没有人发送被黑的请求。

坦率地说，除非您打开文件并解析它，知道什么是特定格式的有效文件，否则您无法确定上传的任何文件都是特定类型的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-25T11:57:32.533

没用过，但是pdf mime类型是application/pdf，所以应该就是：

```
unless @file.content_type =~ /^application\/pdf$/ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-25T11:59:54.777

你必须：

1.  接受上传；
2.  尝试在某个库中打开 PDF；
3.  如果无法打开文件，请拒绝该文件。

您不能依赖浏览器为您提供的 MIME 类型。**唯一**的方法是验证文件。您可以使用标记等检查格式，但最简单和最可靠的方法是使用适当的库调用打开它。

# jquery - 先隐藏子元素，然后减小父元素的宽度

> ID：906464
> 
> 赞同：0
> 
> 时间：2009-05-25T11:59:13.887
> 
> 标签：jquery

我的布局如下：

```
<div id="outerwrap">
          <div id="innerwrap">      
             <div id="centerc">...</div>          

             <div id="rightc" style="font-weight:bold">
          </div>
          <div style="background-color:White;height:10px;top:284px;left:0px"></div>

          <div id="leftc">..</div>
        </div>
       <div id="footer"">...</div>

    #outerwrap
    {
       background-color: #EE44E7;
    }

    #innerwrap
    {
       background-color: #EE44E7;
       margin-right: 200px;
       top:0px;
       height:100%;
    }

    #leftc
    {
       position: absolute;
       top: 111px;
       left: 0px;
       width: 197px;
       background-color: #EE44E7;
       font-size: 10px;
    }

    #centerc
    {
       position: relative;
       margin-left: 199px;
       padding: 0px;
       background-color: white;
    }

    #rightc
    {
       position: absolute;
       top:111px;
       right: 0px;         
       width: 199px;
       color: blue;
       background-color: #EE44E7;
       font-size: 10px;
    }

#footer
    {
    padding: 0px;
    margin: 0px;
    width: 100%;
    height: 62px;
visibility: hidden;
    } 
```

div leftc 有子元素，包括里面的图像。

我想要做的是，当页面加载时，leftc 的孩子应该被隐藏，leftc 的宽度应该为 20px。当用户将鼠标悬停在 leftc 上时，leftc 应该变成 197px 宽，动画流畅，现在应该可以看到子元素。当用户将鼠标悬停在“外”时，应隐藏子级，并且 leftc 宽度应为 20px，仅带有动画。

如何在适用于所有浏览器（包括 IE8）的 jQuery 中执行此操作。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-25T12:33:02.323

像这样的东西：

```
$(document).ready(function() {
  $("#leftc").css("width", "20px").children().css("display", "none");

  $("#leftc").hover(function() {
    $(this).stop();
    $(this).animate({ width: "197px" }).children().css("display", "block/inline");
  }, function() {
    $(this).stop();
    $(this).animate({ width: "20px" }).children().css("display", "none");
  });
  ...
}); 
```

**编辑**：我的错，我误读了你的问题，只需选择所有孩子并隐藏它们（：

**第二次编辑：**请参阅上面的代码以进行悬停修复。您可以使用该`stop()`功能停止该元素上的所有动画，以便您每次都重新开始。如果你想用点击事件来做，你可以简单地设置一个标志，如下所示：

```
var leftActive = false;
$("#leftc").click(function() {
  if (leftActive) {
    $(this).animate({ width: "20px" }).children().css("display", "none");
    leftActive = false;
  } else {
    $(this).animate({ width: "197px" }).children().css("display", "block/inline");
    leftActive = true;
  }
}); 
```

# c# - 从 Console.In 异步读取

> ID：906465
> 
> 赞同：2
> 
> 时间：2009-05-25T11:59:22.733
> 
> 标签：c#

我刚刚意识到，Console.In 类型的 TextReader 没有 BeginRead 方法。

如何从 Console.In 实现异步读取？

我的第一个想法是让一个 HANDLE 到标准输入并让一个服务员等待那个句柄发出信号。但这涉及到很多 Win32 调用。

有没有更简单的方法来做到这一点？也许是这样的：

```
Stream s = (Stream) Console.In;
s.BeginRead(..) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-25T12:02:59.077

您可以在单独的线程中进行轮询`Console.KeyAvailable`，然后在数据可用时立即读取数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-27T16:54:52.093

创建您自己的类，将调用线程化到 Console.Read 并将所有读取的数据存储在某处。然后用 EndRead 结束线程并让它返回它读取的数据。

# c# - 如何使用 C# 中的反射从 .cs 文件中获取类和方法？

> ID：906483
> 
> 赞同：2
> 
> 时间：2009-05-25T12:05:47.697
> 
> 标签：c#, reflection

如何获取“.cs”文件中可用的类。？就像我们可以使用Assembly获取类和方法一样，

```
Assembly.GetTypes() and Type.GetMethods() 
```

获取程序集中的类和方法。

同样，如何获取 C# 文件（.cs 文件）中存在的所有类。？我需要**在 .cs 文件中获取类**，我可以从中轻松获取其中的方法以及更多详细信息，例如方法的参数等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-25T12:10:19.233

**没有使用 C# parser**，没有直接的方法可以做到这一点。您可以`.cs`使用编译文件`CSharpCodeProvider`（仅当文件自行编译并且您可以将所有引用的程序集告诉编译器时才有效）并对生成的程序集使用反射。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-25T13:28:29.637

我建议你使用解析器生成器工具来生成一个快速的 c# 解析器，你可以使用[Antlr](http://www.antlr.org/)。

你也可以检查[这个](http://www.codeplex.com/csparser)和[这个](http://www.temporal-wave.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-25T12:12:12.287

编译器会在编译代码时从您的代码中删除代码文件的所有概念。话虽这么说，如果它们在您的程序集中可用，也许可以从调试符号中检索您想要的信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-25T12:13:19.833

从课堂上你可以随时打电话

```
this.GetType() 
```

或在课堂外，您可以随时致电

```
obj.GetType() 
```

但是，当您编译反射工作所需的应用程序时，您不能再通过文件获取它们的定义。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-25T12:30:16.463

我之前通过调用 C# 编译器、编译 C# 文件然后对输出类型使用反射来完成此操作。如果 C# 文件是独立文件并且没有任何依赖项，则这是可能的。

然而，正确的方法是使用解析器——这并不容易做到。有几个可用的选项，MinosseCC 就是其中之一。

顺便说一句，C# 5.0 能够编译字符串并取回可执行代码，从而使动态编译代码变得更加容易。等不及了 - 这肯定会让每个阅读我的代码的人感到困惑。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-25T15:18:53.813

首先，没有定义类的 .cs 文件之类的东西。可以将一个类标记为部分，并且可以在多个 .cs 文件中定义部分。

当您使用调试信息进行编译时，每个方法的文件名都保留在程序集中（对于源文件的每一行，都标记了相应的 IL 命令）。

不幸的是，我不知道从正在运行的应用程序中获取该信息的简单方法（无需手动解析程序集文件）。

如果您可以安全地调用该方法，则可以调用它并并行构造堆栈跟踪（来自另一个线程） - 在 StackFrame 对象中，您将找到原始文件名。但这很慢（因为您必须调用每个方法才能发现文件名不同）并且有风险（如果该方法格式化您的硬盘驱动器怎么办？）。

因此，您可以尝试的唯一方法是自己尝试使用 AntLR 之类的解析器解析 .cs 文件。

# javascript - 如何以编程方式从锚标记调用 onclick() 事件，同时在 onclick 函数中保留“this”引用？

> ID：906486
> 
> 赞同：86
> 
> 时间：2009-05-25T12:07:22.263
> 
> 标签：javascript, dom-events

以下不起作用...（至少在 Firefox 中不是：`document.getElementById('linkid').click()`不是函数）

```
<script type="text/javascript">
    function doOnClick() {
        document.getElementById('linkid').click();
        //Should alert('/testlocation');
    }
</script>
<a id="linkid" href="/testlocation" onclick="alert(this.href);">Testlink</a> 
```

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2009-05-25T12:35:12.567

您需要[`apply`](https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/Function/apply)在该元素的上下文中的事件处理程序：

```
var elem = document.getElementById("linkid");
if (typeof elem.onclick == "function") {
    elem.onclick.apply(elem);
} 
```

否则`this`将引用执行上述代码的上下文。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-05-27T09:59:48.650

解决这个问题的最好方法是使用 Vanilla JS，但如果你已经在使用 jQuery，有一个非常简单的解决方案：

```
<script type="text/javascript">
    function doOnClick() {
        $('#linkid').click();
    }
</script>
<a id="linkid" href="/testlocation" onclick="alert(this.href);">Testlink</a> 
```

在 IE8-10、Chrome、Firefox 中测试。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2009-05-25T12:21:46.090

要触发事件，您基本上只需调用该元素的事件处理程序。对您的代码稍作更改。

```
var a = document.getElementById("element");
var evnt = a["onclick"];

if (typeof(evnt) == "function") {
    evnt.call(a);
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-12-27T20:52:25.107

当然，OP非常相似地表示这不起作用，但它对我有用。根据我的源代码中的注释，它似乎是在 OP 发布的时间或之后实施的。也许现在更标准了。

```
document.getElementsByName('MyElementsName')[0].click(); 
```

就我而言，我的按钮没有 ID。如果您的元素有 id，最好使用以下（未经测试）。

```
document.getElementById('MyElementsId').click(); 
```

我最初尝试过这种方法，但没有奏效。谷歌搜索后，我回来发现我的元素是按名称命名的，并且没有 ID。仔细检查您是否调用了正确的属性。

来源：[https ://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/click](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/click)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-11-21T18:59:11.063

```
$("#linkid").trigger("click"); 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2019-06-16T01:38:25.810

旧线程，但问题仍然相关，所以......

(1) 您问题中的示例现在可以在 Firefox 中使用*。*然而，除了调用事件处理程序（显示警报）之外，它还*单击*链接，导致导航（一旦警报被解除）。

(2)*只需*调用事件处理程序（不触发导航）只需替换：

```
document.getElementById('linkid').click(); 
```

和

```
document.getElementById('linkid').onclick(); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-01-22T17:30:54.220

看看 handleEvent 方法
[https://developer.mozilla.org/en-US/docs/Web/API/EventListener](https://developer.mozilla.org/en-US/docs/Web/API/EventListener)

“原始”Javascript：

```
function MyObj() {
   this.abc = "ABC";
}
MyObj.prototype.handleEvent = function(e) {
   console.log("caught event: "+e.type);
   console.log(this.abc);
}

var myObj = new MyObj();

document.querySelector("#myElement").addEventListener('click', myObj); 
```

现在单击您的元素（id 为“myElement”），它应该在控制台中打印以下内容：

> 捕获事件：单击
> ABC

这允许您将对象方法用作事件处理程序，并可以访问该方法中的所有对象属性。

您**不能**直接将对象的方法传递给 addEventListener （就像这样：），`element.addEventListener('click',myObj.myMethod);`并期望`myMethod`像通常在对象上调用我一样行事。我猜测传递给 addEventListener 的任何函数都会以某种方式被复制而不是被引用。例如，如果您将事件侦听器函数引用传递给 addEventListener（以变量的形式）然后取消设置此引用，则事件侦听器在捕获事件时仍会执行。

将方法作为事件侦听器和 stil 传递 `this`并且仍然可以访问事件侦听器中的对象属性的另一个（不太优雅的）解决方法是这样的：

```
// see above for definition of MyObj

var myObj = new MyObj();

document.querySelector("#myElement").addEventListener('click', myObj.handleEvent.bind(myObj)); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-25T12:33:08.967

如果您纯粹使用它来引用 onclick 属性中的函数，这似乎是一个非常糟糕的主意。内联事件通常是一个坏主意。

我建议如下：

```
function addEvent(elm, evType, fn, useCapture) {
    if (elm.addEventListener) {
        elm.addEventListener(evType, fn, useCapture);
        return true;
    }
    else if (elm.attachEvent) {
        var r = elm.attachEvent('on' + evType, fn);
        return r;
    }
    else {
        elm['on' + evType] = fn;
    }
}

handler = function(){
   showHref(el);
}

showHref = function(el) {
   alert(el.href);
}

var el = document.getElementById('linkid');

addEvent(el, 'click', handler); 
```

如果你想从其他javascript代码中调用相同的函数，模拟点击调用函数并不是最好的方法。考虑：

```
function doOnClick() {
   showHref(document.getElementById('linkid'));
} 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2013-09-13T09:59:53.413

一般来说，我建议不要“手动”调用事件处理程序。

*   由于多个注册的侦听器，目前尚不清楚执行了什么
*   进入递归和无限事件循环的危险（点击A触发点击B，触发点击A等）
*   对 DOM 的冗余更新
*   很难将由用户引起的视图中的实际更改与作为初始化代码所做的更改（应该只运行一次）区分开来。

更好的是弄清楚你到底想要发生什么，把它放在一个函数中并手动调用它并将它注册为事件监听器。

# c# - 确认在选项卡之间切换

> ID：906490
> 
> 赞同：1
> 
> 时间：2009-05-25T12:09:48.920
> 
> 标签：c#, .net, wpf, tabcontrol, tabcontainer

我有两个tabitems。用户将输入一些数据并将其保存在第一个选项卡上。第二个选项卡列出了保存的数据。我需要的是，当用户在第一个选项卡中保存数据之前选择第二个选项卡时，应显示一个带有是、否和取消的确认消息框。如果用户单击是按钮，则应保存数据并转到第二个选项卡。如果他点击否，则不需要保存数据，最后如果点击取消，选项卡将保留所有输入的数据。我怎么能做这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-25T12:16:19.780

尽管我不同意您中断用户从标签到标签的流程的方式，但我会幽默地回答您的问题：

你需要做两件事来完成这项工作：

1.  单击选项卡时发生的事件
2.  选择的上一个选项卡（您来自的选项卡）

**第一项：**

选项卡控件有一个可以订阅的 Click 方法：

```
Click=”MyTabButton_Click” 
```

**第二项：**

这部分您必须手动完成。您可以在单击事件中设置一个变量，其中包含上次选择的选项卡。设置完成后，您可以检查变量（您之前设置的）以了解之前选择的选项卡。然后，您可以进行所有验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-25T12:37:51.797

为简单起见，您可以在代码隐藏文件中执行以下操作。

我会为要在 WPF 控件中显示和编辑的数据创建一个模型类。使模型实现`INotifyPropertyChanged`和`IEditableObject`接口。

`INotifyPropertyChanged`将允许您绑定到模型。 `IEditableObject`将允许您提供编辑、保存和取消功能。

TabControl 有一个`SelectionChanged`您可以处理的事件，这将允许您检测用户何时更改选项卡，在此处理程序中您可以`System.Windows.MessageBox`用来要求用户保存等，`System.Windows.MessageBox.Show()`返回一个`MessageBoxResult`对象，您可以使用它来确定用户单击并执行的按钮适当的行动。

这不是一个很好的做事方式，但它使事情变得简单，您可能想研究一些 WPF 设计模式来帮助代码可管理性。

如果您需要进一步解释，请询问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-25T12:15:28.003

Delphi 的 TPageControl 有一个带有“AllowChange”参数的 OnChanging 事件。我想WPF中有类似的东西。

# c# - 如何访问 .NET Regex 中的命名捕获组？

> ID：906493
> 
> 赞同：273
> 
> 时间：2009-05-25T12:11:00.573
> 
> 标签：c#, .net, regex

我很难找到一个很好的资源来解释如何在 C# 中使用命名捕获组。这是我到目前为止的代码：

```
string page = Encoding.ASCII.GetString(bytePage);
Regex qariRegex = new Regex("<td><a href=\"(?<link>.*?)\">(?<name>.*?)</a></td>");
MatchCollection mc = qariRegex.Matches(page);
CaptureCollection cc = mc[0].Captures;
MessageBox.Show(cc[0].ToString()); 
```

然而，这总是只显示整行：

```
<td><a href="/path/to/file">Name of File</a></td> 
```

我已经尝试过在各种网站上找到的其他几种“方法”，但我一直得到相同的结果。

如何访问在我的正则表达式中指定的命名捕获组？

* * *

## 回答 #1

> 赞同：278
> 
> 时间：2009-05-25T12:18:00.230

使用 Match 对象的组集合，使用捕获组名称对其进行索引，例如

```
foreach (Match m in mc){
    MessageBox.Show(m.Groups["link"].Value);
} 
```

* * *

## 回答 #2

> 赞同：120
> 
> 时间：2009-05-25T12:18:09.310

您可以通过将命名的捕获组字符串传递给结果对象的`Groups`属性的索引器来指定它。`Match`

这是一个小例子：

```
using System;
using System.Text.RegularExpressions;

class Program
{
    static void Main()
    {
        String sample = "hello-world-";
        Regex regex = new Regex("-(?<test>[^-]*)-");

        Match match = regex.Match(sample);

        if (match.Success)
        {
            Console.WriteLine(match.Groups["test"].Value);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-05-25T14:01:39.163

以下代码示例即使在中间有空格字符的情况下也会匹配模式。IE ：

```
<td><a href='/path/to/file'>Name of File</a></td> 
```

也：

```
<td> <a      href='/path/to/file' >Name of File</a>  </td> 
```

方法返回真或假，取决于输入的 htmlTd 字符串是否与模式匹配。如果匹配，则输出参数分别包含链接和名称。

```
/// <summary>
/// Assigns proper values to link and name, if the htmlId matches the pattern
/// </summary>
/// <returns>true if success, false otherwise</returns>
public static bool TryGetHrefDetails(string htmlTd, out string link, out string name)
{
    link = null;
    name = null;

    string pattern = "<td>\\s*<a\\s*href\\s*=\\s*(?:\"(?<link>[^\"]*)\"|(?<link>\\S+))\\s*>(?<name>.*)\\s*</a>\\s*</td>";

    if (Regex.IsMatch(htmlTd, pattern))
    {
        Regex r = new Regex(pattern,  RegexOptions.IgnoreCase | RegexOptions.Compiled);
        link = r.Match(htmlTd).Result("${link}");
        name = r.Match(htmlTd).Result("${name}");
        return true;
    }
    else
        return false;
} 
```

我已经对此进行了测试，并且可以正常工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-07-28T10:24:26.180

此外，如果有人在对 Regex 对象执行搜索之前需要组名的用例，他可以使用：

```
var regex = new Regex(pattern); // initialized somewhere
// ...
var groupNames = regex.GetGroupNames(); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-10-29T18:20:57.550

这个答案改进了[Rashmi Pandit 的答案](https://stackoverflow.com/a/906847/146513)，这在某种程度上比其他答案更好，因为它似乎完全解决了问题中详述的确切问题。

不好的部分是效率低下并且没有始终使用 IgnoreCase 选项。

效率低下的部分是因为正则表达式的构建和执行成本很高，并且在那个答案中它可能只构建一次（调用`Regex.IsMatch`只是在幕后再次构建正则表达式）。并且`Match`方法可能只被调用一次并存储在一个变量中，然后`link`应该`name`从`Result`该变量调用。

并且 IgnoreCase 选项仅在`Match`零件中使用，而不在`Regex.IsMatch`零件中使用。

我还将 Regex 定义移到方法之外，以便只构造一次（如果我们使用`RegexOptions.Compiled`选项存储该程序集，我认为这是明智的方法）。

```
private static Regex hrefRegex = new Regex("<td>\\s*<a\\s*href\\s*=\\s*(?:\"(?<link>[^\"]*)\"|(?<link>\\S+))\\s*>(?<name>.*)\\s*</a>\\s*</td>",  RegexOptions.IgnoreCase | RegexOptions.Compiled);

public static bool TryGetHrefDetails(string htmlTd, out string link, out string name)
{
    var matches = hrefRegex.Match(htmlTd);
    if (matches.Success)
    {
        link = matches.Result("${link}");
        name = matches.Result("${name}");
        return true;
    }
    else
    {
        link = null;
        name = null;
        return false;
    }
} 
```

# python - Python Twisted 协议取消注册？

> ID：906496
> 
> 赞同：6
> 
> 时间：2009-05-25T12:12:09.180
> 
> 标签：python, twisted, protocols

我遇到了关于在应用程序运行时从反应堆中注销协议的问题。

我使用通过 USB 连接到 PC 的硬件调制解调器，这就是为什么这种情况对我的解决方案如此重要的原因。有谁知道怎么做？

问候，克里斯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-25T16:47:28.970

当您第一次调用`reactor.listen`您的协议工厂时，它会返回一个实现的对象`IListeningPort`，请参阅[http://twistedmatrix.com/documents/8.2.0/api/twisted.internet.interfaces.IListeningPort.html](http://twistedmatrix.com/documents/8.2.0/api/twisted.internet.interfaces.IListeningPort.html) - 只需将该对象保存在某处并当您想停止侦听该协议因子时，请调用该对象的`stopListening`方法。

我假设`reactor.listen`在协议工厂上是您通过“注册”协议隐含的意思（这在逻辑上应该是您试图通过“取消注册”它来撤消的内容），如果您的意思是别的，请准确说明您如何“注册”协议”，我们将研究如何撤消*它*！-)

# c# - 从 IEnumerable 获取类型 T

> ID：906499
> 
> 赞同：118
> 
> 时间：2009-05-25T12:12:43.407
> 
> 标签：c#, generics, reflection

有没有办法通过反射检索`T`类型`IEnumerable<T>`？

例如

我有一个变量`IEnumerable<Child>`信息；我想通过反射检索孩子的类型

* * *

## 回答 #1

> 赞同：160
> 
> 时间：2009-05-25T12:17:37.173

```
IEnumerable<T> myEnumerable;
Type type = myEnumerable.GetType().GetGenericArguments()[0]; 
```

因此，

```
IEnumerable<string> strings = new List<string>();
Console.WriteLine(strings.GetType().GetGenericArguments()[0]); 
```

打印`System.String`。

有关. [_](http://msdn.microsoft.com/en-us/library/system.type.getgenericarguments.aspx) _`Type.GetGenericArguments`

**编辑：**我相信这将解决评论中的问题：

```
// returns an enumeration of T where o : IEnumerable<T>
public IEnumerable<Type> GetGenericIEnumerables(object o) {
    return o.GetType()
            .GetInterfaces()
            .Where(t => t.IsGenericType
                && t.GetGenericTypeDefinition() == typeof(IEnumerable<>))
            .Select(t => t.GetGenericArguments()[0]);
} 
```

有些对象实现了多个泛型`IEnumerable`，因此有必要返回它们的枚举。

**编辑：**虽然，我不得不说，一个类实现`IEnumerable<T>`多个`T`.

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2012-03-14T19:12:22.743

我只是做一个扩展方法。这适用于我扔给它的所有东西。

```
public static Type GetItemType<T>(this IEnumerable<T> enumerable)
{
    return typeof(T);
} 
```

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2013-07-18T02:13:19.690

我有一个类似的问题。所选答案适用于实际情况。就我而言，我只有一个类型（来自 a `PropertyInfo`）。

当类型本身`typeof(IEnumerable<T>)`不是 的实现时，所选答案将失败`IEnumerable<T>`。

对于这种情况，以下工作：

```
public static Type GetAnyElementType(Type type)
{
   // Type is Array
   // short-circuit if you expect lots of arrays 
   if (type.IsArray)
      return type.GetElementType();

   // type is IEnumerable<T>;
   if (type.IsGenericType && type.GetGenericTypeDefinition() == typeof (IEnumerable<>))
      return type.GetGenericArguments()[0];

   // type implements/extends IEnumerable<T>;
   var enumType = type.GetInterfaces()
                           .Where(t => t.IsGenericType && 
                                  t.GetGenericTypeDefinition() == typeof(IEnumerable<>))
                           .Select(t => t.GenericTypeArguments[0]).FirstOrDefault();
   return enumType ?? type;
} 
```

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2009-05-25T12:27:13.830

如果您知道`IEnumerable<T>`（通过泛型），那么`typeof(T)`应该可以工作。否则（对于`object`或非泛型`IEnumerable`），检查实现的接口：

```
 object obj = new string[] { "abc", "def" };
        Type type = null;
        foreach (Type iType in obj.GetType().GetInterfaces())
        {
            if (iType.IsGenericType && iType.GetGenericTypeDefinition()
                == typeof(IEnumerable<>))
            {
                type = iType.GetGenericArguments()[0];
                break;
            }
        }
        if (type != null) Console.WriteLine(type); 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2010-05-20T20:16:45.823

非常感谢您的讨论。我将它用作以下解决方案的基础，它适用于我感兴趣的所有情况（IEnumerable、派生类等）。以为我应该在这里分享，以防有人也需要它：

```
 Type GetItemType(object someCollection)
  {
    var type = someCollection.GetType();
    var ienum = type.GetInterface(typeof(IEnumerable<>).Name);
    return ienum != null
      ? ienum.GetGenericArguments()[0]
      : null;
  } 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-08-27T17:20:55.283

```
public static Type GetInnerGenericType(this Type type)
{
  // Attempt to get the inner generic type
  Type innerType = type.GetGenericArguments().FirstOrDefault();

  // Recursively call this function until no inner type is found
  return innerType is null ? type : innerType.GetInnerGenericType();
} 
```

This is a recursive function that will go depth first down the list of generic types until it gets a concrete type definition with no inner generic types.

I tested this method with this type: `ICollection<IEnumerable<ICollection<ICollection<IEnumerable<IList<ICollection<IEnumerable<T>>>>>>>>`

which should return `T`

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-05-25T12:20:43.220

只需使用`typeof(T)`

**编辑：** 如果您没有 T，则在实例化对象上使用 .GetType().GetGenericParameter()。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-04-24T10:24:37.233

对于更简单的情况的替代方案，它要么是`IEnumerable<T>`or `T`- 请注意使用`GenericTypeArguments`代替`GetGenericArguments()`.

```
Type inputType = o.GetType();
Type genericType;
if ((inputType.Name.StartsWith("IEnumerable"))
    && ((genericType = inputType.GenericTypeArguments.FirstOrDefault()) != null)) {

    return genericType;
} else {
    return inputType;
} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-03-19T15:23:28.290

我知道这有点老了，但我相信这种方法将涵盖评论中所述的所有问题和挑战。感谢 Eli Algranti 启发了我的工作。

```
/// <summary>Finds the type of the element of a type. Returns null if this type does not enumerate.</summary>
/// <param name="type">The type to check.</param>
/// <returns>The element type, if found; otherwise, <see langword="null"/>.</returns>
public static Type FindElementType(this Type type)
{
   if (type.IsArray)
      return type.GetElementType();

   // type is IEnumerable<T>;
   if (ImplIEnumT(type))
      return type.GetGenericArguments().First();

   // type implements/extends IEnumerable<T>;
   var enumType = type.GetInterfaces().Where(ImplIEnumT).Select(t => t.GetGenericArguments().First()).FirstOrDefault();
   if (enumType != null)
      return enumType;

   // type is IEnumerable
   if (IsIEnum(type) || type.GetInterfaces().Any(IsIEnum))
      return typeof(object);

   return null;

   bool IsIEnum(Type t) => t == typeof(System.Collections.IEnumerable);
   bool ImplIEnumT(Type t) => t.IsGenericType && t.GetGenericTypeDefinition() == typeof(IEnumerable<>);
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-07-14T16:03:13.953

这是对 Eli Algranti 解决方案的改进，因为它也可以在`IEnumerable<>`类型位于继承树中的任何级别的情况下工作。

此解决方案将从 any 获取元素类型`Type`。如果类型不是`IEnumerable<>`，它将返回传入的类型。对于对象，使用`GetType`。对于类型，使用`typeof`，然后在结果上调用此扩展方法。

```
public static Type GetGenericElementType(this Type type)
{
    // Short-circuit for Array types
    if (typeof(Array).IsAssignableFrom(type))
    {
        return type.GetElementType();
    }

    while (true)
    {
        // Type is IEnumerable<T>
        if (type.IsGenericType && type.GetGenericTypeDefinition() == typeof(IEnumerable<>))
        {
            return type.GetGenericArguments().First();
        }

        // Type implements/extends IEnumerable<T>
        Type elementType = (from subType in type.GetInterfaces()
            let retType = subType.GetGenericElementType()
            where retType != subType
            select retType).FirstOrDefault();

        if (elementType != null)
        {
            return elementType;
        }

        if (type.BaseType == null)
        {
            return type;
        }

        type = type.BaseType;
    }
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-05-25T12:18:19.137

`typeof(IEnumerable<Foo>)`. 将返回第一个通用参数 - 在这种情况下。[`GetGenericArguments()`](http://msdn.microsoft.com/en-us/library/system.type.getgenericarguments.aspx)`[0]``typeof(Foo)`

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-06-16T13:36:54.277

这是我不可读的 Linq 查询表达式版本..

```
public static Type GetEnumerableType(this Type t) {
    return !typeof(IEnumerable).IsAssignableFrom(t) ? null : (
    from it in (new[] { t }).Concat(t.GetInterfaces())
    where it.IsGenericType
    where typeof(IEnumerable<>)==it.GetGenericTypeDefinition()
    from x in it.GetGenericArguments() // x represents the unknown
    let b = it.IsConstructedGenericType // b stand for boolean
    select b ? x : x.BaseType).FirstOrDefault()??typeof(object);
} 
```

请注意，该方法还考虑了非泛型`IEnumerable`，它`object`在这种情况下返回，因为它采用一个`Type`而不是具体实例作为参数。顺便说一句，因为*x 代表未知数*，我发现[这个视频](https://www.youtube.com/watch?time_continue=6&v=YX_OxBfsvbk)很有趣，虽然它无关紧要..

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-02-01T18:45:22.843

这就是我通常的做法（通过扩展方法）：

```
public static Type GetIEnumerableUnderlyingType<T>(this T iEnumerable)
    {
        return typeof(T).GetTypeInfo().GetGenericArguments()[(typeof(T)).GetTypeInfo().GetGenericArguments().Length - 1];
    } 
```

# asp.net-mvc - ASP.Net-MVC 示例代码从 html 下拉列表中检索所选项目

> ID：906500
> 
> 赞同：1
> 
> 时间：2009-05-25T12:12:44.173
> 
> 标签：asp.net-mvc

有人可以给我一个示例代码来从 html.dropdownlist 中检索项目吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-25T21:36:06.350

假设您在视图中有这个 DropDown：

```
<p><label for="ProductType">Product Type:</label>
<br /><%=Html.DropDownList("ProductTypeDropDown", 
             New SelectList(ViewData("ProductTypes"), 
             "ProductTypeID", "Name"))%>
</p> 
```

您可以使用简单地检索控制器中的选定值

```
Product.ProductType = form("ProductTypeDropDown") 
```

# .net - 如何更改转换器的 CultureInfo？

> ID：906501
> 
> 赞同：1
> 
> 时间：2009-05-25T12:12:52.223
> 
> 标签：.net, wpf, localization

我有一个显示用户控件 DP 的一些文本的用户控件。为此，使用了转换器。我知道文化参数是“en-US”文化，除非您在绑定的 ConverterCulture 值或 xml:lang 属性中指定不同的文化。

但是我怎样才能从 UserControl 之外改变文化？？？

这是我的用户控件：

```
<UserControl x:Class="CultInfoConverter.MyUserControl"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:my="clr-namespace:CultInfoConverter"
    DataContext="{Binding RelativeSource={RelativeSource Self}}" 
    Tag="{x:Null}">
    <UserControl.Resources>
        <my:MyConverter x:Key="MyConverter" />
    </UserControl.Resources>
    <StackPanel Orientation="Horizontal" >
        <TextBlock Margin="8">My converter culture is</TextBlock>
        <TextBlock FontWeight="Bold" Text="{Binding Tag, Converter={StaticResource MyConverter}}" />
    </StackPanel>
</UserControl> 
```

出于演示目的，转换器仅返回传递给它的文化信息的名称：

```
public class MyConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        return culture.Name;
    }
    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

在我的窗口中，我有两个用户控件实例，每个实例都应显示不同的文化。但两者都只显示标准的“en-US”。

```
<Window x:Class="CultInfoConverter.Window1"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Window1" Height="300" Width="300"
    xmlns:my="clr-namespace:CultInfoConverter">
    <StackPanel>
        <TextBlock Margin="8">using xml:lang="de-DE"</TextBlock>
        <my:MyUserControl xml:lang="de-DE"/>
        <TextBlock Margin="8">using xml:lang="fr-FR"</TextBlock>
        <my:MyUserControl xml:lang="fr-FR"/>
    </StackPanel>
</Window> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-29T08:58:07.800

您的示例不起作用的原因是您在 MyUserObject 已经构建之后设置了 xml:lang 属性。已经使用默认语言（即 en-US）创建了 TextBlock（以及 Binding 和 Converter）。

TheDuke 关于多个 xml:lang 属性是不正确的。虽然您确实只有 1 个 UI 线程，而且它只有 1 种文化，但[每个 FrameworkElements 都允许有自己的 xml:lang](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.language.aspx)。要对此进行测试，请将 MyUserControl XAML（在您的第一个代码清单中）中的 xml:lang 属性设置为 de-DE。您应该会看到 de-DE 现在以粗体显示两次。

要解决此问题，您必须在构建 MyUserControl 并设置 Language/xml:lang 属性**之后设置 DataBinding。**我通过在 MyUserControl 的 Loaded 事件中添加 DataBinding 进行了快速测试。这将为您提供我认为您期望的结果（第一行中的 de-DE，第二行中的 fr-Fr）。

[替代文字 http://img35.imageshack.us/img35/4588/howtochangetheculturein.png](http://img35.imageshack.us/img35/4588/howtochangetheculturein.png)

MyControl XAML 清单：

```
<UserControl
    x:Class="WPFCultureTester.MyUserControl"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:WPFCultureTester"
    DataContext="{Binding RelativeSource={RelativeSource Self}}"
    Tag="{x:Null}"
    Loaded="UserControl_Loaded">
    <StackPanel Orientation="Horizontal" >
        <TextBlock Margin="8">My converter culture is</TextBlock>
        <TextBlock x:Name="foo" FontWeight="Bold" />
    </StackPanel>
</UserControl> 
```

MyControl 代码隐藏：

```
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;

namespace WPFCultureTester
{
    /// <summary>
    /// Interaction logic for MyUserControl.xaml
    /// </summary>
    public partial class MyUserControl : UserControl
    {
        public MyUserControl()
        {
            InitializeComponent();
        }

        private void UserControl_Loaded(object sender, RoutedEventArgs e)
        {
            this.foo.SetBinding(
                TextBlock.TextProperty,
                new Binding("") { Converter = CultInfoConverter.Converter });
        }
    }
} 
```

顺便说一句，我冒昧地向 CultInfoConverter 添加了一个单例转换器，并重命名了一些命名空间，因此如果您正在执行直接剪切/粘贴，则可能必须将其更改回来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-25T13:30:39.850

我不是全球化方面的专家，事实上我认为我从未尝试过，但希望这会有所帮助。

这是我的 UserControl.xaml

```
<UserControl x:Class="Tab_Question.UserControl1"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
Height="30">
<Grid>
    <TextBlock Text="{Binding Path=CultureName, FallbackValue=bindingError}" />
</Grid> 
```

这是 UserControl.cs 背后的代码

```
 public partial class UserControl1 : UserControl
{
    public static DependencyProperty CultureStringProperty =
        DependencyProperty.RegisterAttached("Culture", typeof(String), typeof(UserControl1));

    public static DependencyProperty CultureNameProperty =
        DependencyProperty.Register("CultureName", typeof(String), typeof(UserControl1));

    public String CultureString
    {
        get
        {
            return (String)GetValue(UserControl1.CultureStringProperty);
        }
        set
        {
            if (CultureString != value)
            {
                SetValue(UserControl1.CultureStringProperty, value);
                DoSomethingWithCulture();
            }
        }
    }

    private void DoSomethingWithCulture()
    {
        // Good to continue
        CultureInfo newCulture = CultureInfo.GetCultureInfo(CultureString);
        SetValue(UserControl1.CultureNameProperty, newCulture.Name);
    }

    public UserControl1()
    {
        InitializeComponent();
        this.DataContext = this;
    }
} 
```

最后是 Window.xaml

```
<Window
x:Class="Tab_Question.Window1"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:local="clr-namespace:Tab_Question"
Title="Window1" Height="300" Width="300">
<StackPanel>
    <local:UserControl1 CultureString="en-us" />
    <local:UserControl1 CultureString="en-gb" />
</StackPanel> 
```

我会尝试解释我所做的，希望它能回答这个问题。

我在 UserControl 上设置了一个附加的 DependencyProperty，它允许您在更新字符串时将 CultureInfo 字符串传递给 UserControl UserControl 创建一个可以存储在成员变量中的 CultureInfo 对象，并更新 TextBlock 所在的 CultureName DependancyProperty UserControl 绑定到。

我不确定为什么设置您尝试的 XmlLang 属性不起作用，但怀疑它与只能使用一种语言的 UI 线程有关。

我知道这与您提供的示例代码不匹配，但我希望它为您提供修改和适应的起点。

本

# javascript - 如何只选择顶部元素文本？

> ID：906503
> 
> 赞同：6
> 
> 时间：2009-05-25T12:13:29.833
> 
> 标签：javascript, jquery, html

我有这个html：

```
<span class="price">
        $61.00
          <span class="detailFreeShipping">With Free Shipping</span>
    </span> 
```

如何编写一个 jquery 选择器，它只给我价格文本“61.00 美元”？

我想让它尽可能通用，因为在某些情况下可能没有内部跨度，只有父跨度。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-25T12:22:48.083

你可以这样做：

```
jQuery.fn.extend({
    textOnly: function() {
        // make a clone of this object so we are not changing the actual DOM
        var obj = $(this).clone();

        // remove all the children, i.e. any DOM objects
        obj.children().remove();

        // get the text value after all DOM elements are removed
        return obj.text();
    }
}); 
```

那么你可以这样称呼它

```
var price = $(".price").textOnly(); 
```

你会得到你想要的价值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-25T12:18:34.410

我不知道 jQuery，但只是为了伪回答您的问题，您可以通过以下方式执行此操作：

```
var elem = document.getElementById('yourid'); // or document.getElementsByTagName('span')[0];
var text = elem.innerHTML;
text = text.substr(0, (text.indexOf('<') > -1 ? text.indexOf('<') : text.length)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-25T12:37:31.987

一次尝试：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <script type="text/javascript" src="http://www.google.com/jsapi"></script>
    <script type="text/javascript" charset="utf-8">
        google.load("jquery", "1.3");
    </script>
    <script type="text/javascript" charset="utf-8">
        $(document).ready(function(){
            var white_out = $("span[class=price] :first-child").text();
            var all = $("span[class=price]").text();
            var price = all.replace(white_out, "");
            alert(price);
        });
    </script>
</head>
<body>
    <span class="price">
            $61.00
              <span class="detailFreeShipping">With Free Shipping</span>
        </span>
</body>
</html> 
```

其中行：

```
 var white_out = $("span[class=price] :first-child").text();
            var all = $("span[class=price]").text();
            var price = all.replace(white_out, ""); 
```

可能会为单个元素完成工作。

# iphone - 当我 Build&Go 到我的设备时，如何禁用 Instruments 自动启动？

> ID：906508
> 
> 赞同：-1
> 
> 时间：2009-05-25T12:15:51.030
> 
> 标签：iphone, cocoa-touch, uikit, instruments

我使用工具来搜索内存泄漏。我通过 XCode *Run > Start with performance tool > Leaks*做到了这一点。然后我退出了 Instruments。每次我 Build&Go 时，Instruments 都会自动启动。虽然这很酷，但当只是想测试应用程序时，不需要它。

我怎么能把它关掉？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-25T12:19:26.017

Apple+Y 或者只是从构建菜单中选择构建和调试。Apple+R 或从构建菜单中选择构建并运行

默认值现在将恢复为该值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-25T14:24:16.233

Build & Go 使用你最后的“运行类型”作为“Go”部分。

如果您选择 Build 菜单，您会注意到有一个“Build and Run”选项。选择一次，然后 Build & Go 将不会再次加载 Instruments，直到您明确要求它这样做。

# python - 在 ubuntu 上显示歌词

> ID：906509
> 
> 赞同：0
> 
> 时间：2009-05-25T12:16:07.597
> 
> 标签：python, plugins, gnome, rhythmbox

我正在为 Ubuntu 编写一个小脚本。我的意图是用全局快捷方式（配置gnome）调用节奏盒歌词插件。我可以从节奏盒 python 控制台调用它，但我不知道如何导入节奏盒内置模块（例如节奏数据库）。
有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-09-20T11:12:17.230

您不能从标准 python 控制台导入节奏盒“内置”模块。

据我所知，它们不是真正的模块，它们只是节奏盒过程中暴露给插件的对象。因此，只有当您从节奏盒进程运行脚本时，您才能访问它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-01-04T14:10:41.033

在这种情况下，我想你必须自己编写整个插件，然后听 dbus 以更改节奏盒中的歌曲，以检测正在播放的歌曲。

# project-management - 如果允许每个客户更改代码，您将如何维持产品开发？

> ID：906517
> 
> 赞同：3
> 
> 时间：2009-05-25T12:18:29.527
> 
> 标签：project-management, specifications, branch

你如何应对？

允许客户随心所欲地更改软件是否正常？我在一个没有规范和不断要求更改的环境中工作。

对于每个新客户，我们都必须创建一个新分支并进行如此多的更改，以至于当我完成时，我有一个完全不同的产品。因此，我几乎失去了对编程的兴趣。

所以，我说不应该让客户随意更改软件是不是错了？

英语是我的第二语言，所以请原谅任何错误。

> **相关：**
> [如何处理不知情的客户选择](https://stackoverflow.com/questions/53627/how-to-deal-with-poorly-informed-customer-choices)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-25T12:30:58.783

> 我说不应该允许客户随意更改软件是错误的吗？

谁拥有该软件？你还是他们？

如果我拥有一所房子，如果我愿意，我可以雇人每周给它涂上不同的颜色。如果画家抱怨，我可以找一个新画家。如果我没钱了，也许是因为我是个白痴。但是画家在粉刷我的房子，拿了我的钱并用它来养家糊口方面没有做错任何事。

如果我拥有某个软件，我*可以*用它做任何我想做的事情。如果你不这样做，那么我会问别人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-25T12:39:55.570

**编辑**：我最初错过了您有很多客户并为每个客户定制一个软件的部分。我会留下我原来的答案以供参考，但它并不真正适用于这种特殊情况。

在你的情况下，我建议你需要一种不同的策略来解决客户的问题。我见过使用的一种技术是，任何更改都需要与使产品对所有客户更有用的一致。这意味着您可以对许多更改说“是”。例如，通过模板使 UI 可定制。这将使所有客户受益，但可能是由特定客户希望将外观融入其标准的愿望所驱动的。但这也意味着您需要对某些请求说不，或者以一种对所有人有用的方式对其进行修改。

您可能还希望让您的客户使用诸如[UserVoice](http://uservoice.com)之类的东西来提出功能（和错误）请求并对其进行投票。这允许您的客户对产品的方向有一些直接的输入，但会强制要求通过所有这些过滤。同样，您不必总是接受评分最高的请求，您可以接受一些评分较低的请求。指导原则应该是让您的产品对最广泛的客户有用。

我认为为每个客户建立一个单独的自定义分支是不切实际的，除非您计划只拥有有限数量的高收入客户。最终，您的版本控制系统将成为您的瓶颈，并且不允许您的公司发展甚至为您当前的客户提供良好的服务。

一旦您进入更可持续的特征选择模式，我的原始答案可能仍然适用。希望这可以帮助。

**原来的**

我会提前说，有些客户不值得拥有。只有你能知道什么时候是这种情况。

但是，通常情况下，我们的工作是发现客户的实际需求并交付。我建议遵循敏捷开发方法来做到这一点。很少有客户真正预先知道他需要什么。开发人员在开始编写代码之前很少了解客户的需求。敏捷方法接受了这一现实，并遵循使变更对流程的破坏性更小的实践。

首先，敏捷方法采用轻量级流程，并将决策延迟到可能的最新时刻。有“刚刚好”的前期规划来布置一个基本的架构框架，但在大多数情况下，它是随用随设计的。这并不像听起来那样随心所欲，因为敏捷方法中使用的技术（例如 TDD、结对编程、重构等）是鼓励良好设计和设计改进的合理技术。

其次，敏捷方法很注重文档。虽然不是无文档的，但这些方法将文档维护降至最低。变更最糟糕的方面之一是文档变得过时并且必须不断更新以保持正确。敏捷方法识别那些真正有用的文档并维护它们，但其他过时的文档可以被丢弃。它们在需要的时候被使用，但你不受它们的束缚。敏捷方法非常重视代码和测试，并且可以自我记录。

第三，敏捷方法鼓励基于相互信任的合作开发形式。这是双向的。客户必须相信您牢记他们的最大利益，而您必须相信客户知道或至少可以在他看到时识别出他的需求。

最后，敏捷的标志是**早发布，经常发布**。尽早将产品交到客户手中是（再次，及早）获得客户真正需要的反馈的最佳方式。一旦你有了一个具体的产品，你就会开始获得关于真正重要的变化的信息。通过计划尽早和经常发布，并将其与其他敏捷实践相结合，您还将构建一个更容易适应变化的框架。

但是，即使遵循这些方法，正如我之前所说：有些客户不值得拥有。如果您的客户不够信任您，无法在更改不好时听从您的建议，或者如果客户不知道也无法识别他真正想要的东西，那么可能是时候切断您与他们的联系了。我建议与他们交谈，让他们知道你想得到他们需要的东西，但他们需要知道那是什么。花一些时间谈论它，以便你们双方都能更好地理解目标，并采用敏捷方法来应对变化的现实。如果它们仍然不合理，那么它可能不适合你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-25T12:29:56.743

指定应用程序与实施同样重要（甚至更重要）。至少给客户一个基准文档、UI 模型或类似的东西，我认为是至关重要的。

随着系统的发展和成熟，您必须接受变更请求，否则系统将遭受熵，您付出的任何努力都将永远失去。如果它是一种更商业化的产品，请尝试限制所有客户想要的更改。然后每个人都在获得附加值。

如果您有基线文档，则可以收取定制费用。您想要做的定制越少，您收取的费用就越多：P 确保您记录并估计所有更改请求。（我为此使用了fogbugz，但还有许多其他工具）如果客户为更改付费，那么在tleat，您将因更改系统的痛苦而获得报酬。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-25T12:29:28.710

您的公司正在绝望地陷入困境。

你应该马上去找工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-27T01:53:50.740

在我提出我的建议之前，我应该说我个人认为做生意是为了赚钱。因此，如果客户愿意为他们想要的东西付费，请弄清楚如何容纳他们（而不是拒绝他们）。

现在，***一个***解决方案：

我在一家公司，他们有一个软件包，他们卖给了许多政府组织——每个组织都有自己特定的调整和功能。

我问总经理他们是如何避免版本地狱的——考虑到他们必须为每个客户维护一个特定的版本。他说“我们没有，每个人都得到相同的版本”。他们只是为所有客户端维护一个版本，但关闭不特定于客户端的功能。

*   LM

# eclipse - 为什么我的 eclipse [on vista] 显示不正确的文件修改时间戳？

> ID：906520
> 
> 赞同：1
> 
> 时间：2009-05-25T12:18:52.803
> 
> 标签：eclipse, windows-vista, timestamp

当我右键单击最近修改的文件（如 Java Builder 生成的 jar）并查看文件属性时，修改时间戳总是关闭 2.5 小时。另一方面，Windows 资源管理器显示正确的时间戳。

我怀疑他们在 eclipse 中的某个时区设置用于转换文件系统时间。

我正在使用 Sun JDK 1.6 在 Vista 上运行 Ganymede

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-26T06:33:29.773

由于 Eclipse 支持[**jar 签名**](http://wiki.eclipse.org/JAR_Signing)，它可能会显示存储在签名中的时间戳，而不是与文件关联的时间戳。也许该时间戳是在 GMT 基础上计算的，而不是本地时间基础。

> 从 J2SE 5.0 开始，jarsigner 可以生成包含时间戳的签名，从而使系统/部署者（包括 Java 插件）能够在签名证书仍然有效时检查 JAR 文件是否已签名

你的罐子签名了吗？相关的清单包括什么？
2.5 小时与 GMT 和您所在区域之间的时移一致吗？

# .net - net.tcp 绑定元数据问题

> ID：906521
> 
> 赞同：2
> 
> 时间：2009-05-25T12:19:07.513
> 
> 标签：.net, net.tcp, wcf

```
<system.serviceModel>
    <services>
      <service name="SUR.Core.Service.Implementation.SURDirectoryService" behaviorConfiguration="DefaultServiceBehavior">
        <host>
          <baseAddresses>
            <add baseAddress="net.tcp://127.0.0.1:8731/ISURDirectoryService"/>
          </baseAddresses>
        </host>
        <endpoint address=""  binding="netTcpBinding" bindingConfiguration="DefaultDirectoryServiceBindConfig" contract="SUR.Core.Service.Facade.ISURDirectoryService"/>
        <endpoint address="mex" binding="mexTcpBinding" contract="IMetadataExchange"/>
      </service>
      <service name="MSS.Core.Service.Implementation.MSSDirectoryService" behaviorConfiguration="DefaultServiceBehavior">
        <host>
          <baseAddresses>
            <add baseAddress="net.tcp://127.0.0.1:8731/IMSSDirectoryService"   />
            <add baseAddress="http://127.0.0.1:8732/IMSSDirectoryService"   />
          </baseAddresses>
        </host>
        <endpoint address=""  binding="netTcpBinding" bindingConfiguration="DefaultDirectoryServiceBindConfig" contract="MSS.Core.Service.Facade.IMSSDirectoryService"/>
        <endpoint address="Person" binding="basicHttpBinding" bindingConfiguration="StreamedServicesBinding" contract="MSS.Core.Service.Facade.IMSSPersonService"/>
        <endpoint address="mex" binding="mexTcpBinding" contract="IMetadataExchange"/>
      </service>
    </services>
    <bindings>
      <customBinding>
        <binding name="MetadataExchangeTcpBinding">
          <tcpTransport portSharingEnabled="True" />
        </binding>
      </customBinding>
      <netTcpBinding>
        <binding name="DefaultDirectoryServiceBindConfig" maxReceivedMessageSize="1048576"
             closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:05:00">
          <security mode="None"></security>
        </binding>
        <binding name="mexBinding" portSharingEnabled="true">
          <security mode="None"/>
        </binding>
      </netTcpBinding>
      <basicHttpBinding>
        <binding name="StreamedServicesBinding" transferMode="StreamedResponse" maxReceivedMessageSize="10067108864"
                 closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:05:00" maxBufferSize="500" >
          <security mode="None"></security>
        </binding>
      </basicHttpBinding>
    </bindings>
    <behaviors>
      <serviceBehaviors>
        <behavior name="DefaultServiceBehavior">
          <serviceMetadata />
          <dataContractSerializer maxItemsInObjectGraph="6553600" />
          <!-- To avoid disclosing metadata information, 
          set the value below to false and remove the metadata endpoint above before deployment -->
          <!--<serviceMetadata httpGetEnabled="True"/>-->
          <serviceThrottling maxConcurrentCalls="30" maxConcurrentSessions="30" maxConcurrentInstances="30"/>
          <!-- To receive exception details in faults for debugging purposes, 
          set the value below to true.  Set to false before deployment 
          to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="True" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel> 
```

这是我的 WCF 配置，但是当我尝试将服务引用添加到

```
net.tcp://127.0.0.1:8731/IMSSDirectoryService 
```

我收到一个错误：

> 元数据包含无法解析的引用：“net.tcp://localhost:8731/IMSSDirectoryService”。

如果在当前解决方案中定义了服务，请尝试构建解决方案并再次添加服务引用。请帮助我理解我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-25T12:42:58.307

您定义了两个相同的基地址：

```
<service name="SUR.Core.Service.Implementation.SURDirectoryService" 
         behaviorConfiguration="DefaultServiceBehavior">
  <host>
    <baseAddresses>
      <add baseAddress="net.tcp://127.0.0.1:8731/ISURDirectoryService"/>
    </baseAddresses>

<service name="MSS.Core.Service.Implementation.MSSDirectoryService" 
         behaviorConfiguration="DefaultServiceBehavior">
   <host>
     <baseAddresses>
       <add baseAddress="net.tcp://127.0.0.1:8731/IMSSDirectoryService"   /> 
```

这就是您的问题的原因 - 连接到 时`net.tcp://127.0.0.1:8731/`，WCF 不知道您指的是哪个服务。

基地址在其“模式”中必须是唯一的（例如 http、net.tcp 等）

马克

编辑：如果您希望能够使用浏览器检索元数据并导航到 URL 以获取它，则需要激活`<serviceMetadata httpGetEnabled="True"/>`服务行为选项。否则，您将只能通过 net.tcp 使用 SOAP 调用来获取元数据 - 例如，使用 Visual Studio 9/Common7/IDE 文件夹中的“WcfTestClient.exe”应用程序。

编辑 2：您已经为 MEX 定义了许多额外的绑定和行为，但是由于您的 mex 端点实际上都没有引用任何这些设置，因此它们没有被使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-26T09:48:28.007

我解决了这个问题，我只是将 MSS 服务的 mex 绑定更改为 http。非常感谢 marc_s 您的回复帮助我理解问题！

# java - 使用 JSON 返回 Java Map

> ID：906530
> 
> 赞同：1
> 
> 时间：2009-05-25T12:21:50.753
> 
> 标签：java, json, map

使用 JSON 格式返回 Java Map 的最佳方式是什么？我的具体需要是日期和数字之间的键-> 值关联。

我担心的是：我的结构基本上包含 N 个相同类型的元素（日期和数字之间的映射），我希望能够在 Javascript 中快速迭代它们。

在 XML 中，我会：

```
<relation date='mydate' number='mynumber'/>
<relation date='mydate' number='mynumber'/>
...
<relation date='mydate' number='mynumber'/> 
```

我会像这样使用jQuery：

```
$(xml).find("relation").each(function() {
    $(this).attr("date"); // the date
    $(this).attr("number"); // the number
}) 
```

这是我第一次使用 JSON，我想知道我是否可以做类似的事情。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-25T12:33:50.400

虽然我自己没有尝试过，但是[来自 json.org 的 JSON](http://www.json.org/java/index.html)[`JSONObject`](http://www.json.org/javadoc/org/json/JSONObject.html)的Java 实现有一个构造函数。[`JSONObject(Map)`](http://www.json.org/javadoc/org/json/JSONObject.html#JSONObject(java.util.Map))

一旦从 中创建了一个 JSON 对象`Map`，就可以通过调用该[`toString`](http://www.json.org/javadoc/org/json/JSONObject.html#toString())方法获得一个 JSON 字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-25T12:31:28.427

```
String myJson = "{ ";
for (String key : myMap.keySet())
    myJson += key + " : " + "'" + myMap.get(key) + "',";
myJson += " } "; 
```

我留下最后一个逗号，因为它不会给我们带来很多问题。javascript只是忽略它。

好吧，这回答了你的问题，但我想这不会有太大帮助。尝试发布更具体的。

# hibernate - 如何验证集群中 Hibernate 二级缓存的正确操作？

> ID：906531
> 
> 赞同：0
> 
> 时间：2009-05-25T12:22:25.650
> 
> 标签：hibernate, caching, jboss, cluster-computing, jboss-cache

我想知道如何验证 Hibernate 的 L2 缓存是否正确执行。我有一个应用程序在带有 JBoss Cache 的 JBoss 5 实例集群上运行。负载测试将回答性能问题。

但是如何确保与集群相关的问题（如节点之间的缓存失效）正常工作呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-27T12:28:09.653

我建议通过 IP 地址请求资源。在服务器 A 上，您可以执行更新，然后从服务器 B 请求相同的资源。更新时，该资源应该从集群中的参与服务器中失效，因此服务器 B 上的结果请求应该是（新）更新的资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-10-26T16:35:25.910

最简单的方法是通过 JBoss 5 附带的嵌入式控制台检查二级缓存内容，并像@Rich Kroll 建议的那样进行练习。

您可以通过 JBoss 5 附带的嵌入式控制台查看缓存统计信息。它将显示发生的失效次数。

# eclipse - Eclipse 中的 TextMate 样式颜色

> ID：906534
> 
> 赞同：2
> 
> 时间：2009-05-25T12:25:00.873
> 
> 标签：eclipse, textmate

有谁知道类似于 TextMate 的一组 Eclipse 颜色配置文件的链接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-25T12:33:10.950

Eclipse有[Vibrant Ink](http://blog.codefront.net/2006/09/28/vibrant-ink-textmate-theme-for-eclipse/) TextMate 主题，但我之前没有太多运气，而且 Eclipse 并不真正支持主题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-05-05T05:31:10.060

[http://commentedout.posterous.com/the-typography-of-my-actionscript](http://commentedout.posterous.com/the-typography-of-my-actionscript) [http://commentedout.posterous.com/the-typography-of-my-flash-builder](http://commentedout.posterous.com/the-typography-of-my-flash-builder) [http://www.eclipsecolorthemes.org/](http://www.eclipsecolorthemes.org/)

希望这些帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-08-30T18:29:52.653

[http://jan.kuzniak.pl/?p=155](http://jan.kuzniak.pl/?p=155)这个充满活力的 ink textmate 主题适用于我的 Eclipse 3.6.2

# vim - 如何将复制的文本复制到 VI 命令提示符

> ID：906535
> 
> 赞同：122
> 
> 时间：2009-05-25T12:25:15.520
> 
> 标签：vim

我想知道是否有任何方法可以将拉取的文本粘贴到命令窗口。例如，如果我拉出一个单词并且我想在某个位置对其进行 grep，我不能简单地使用“p”粘贴该单词。但是，如果我将其复制到剪贴板，Shift-Insert 将粘贴相同的内容。

是否有任何可用的调整可以让我将拉出的文本粘贴到 vim 命令提示符？

我在 Windows 上使用 gvim。

* * *

## 回答 #1

> 赞同：179
> 
> 时间：2009-05-25T12:28:34.890

尝试使用

```
<ctrl+r>" 
```

其中 " 代表默认寄存器。

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2009-05-25T12:30:54.870

`<C-R>"`将粘贴默认缓冲区。或者，您可以使用`q:`为下一个命令打开缓冲区。尝试`:help q:`

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2009-05-25T12:32:06.630

*   首先确保您处于正常模式，请按`Esc`
*   在正常模式下，按`:`
*   然后使用键盘组合`ctrl-r`，然后键入`"`

注意：如果您正在拉出包含相对文件路径的完整行，则换行也会被粘贴...即 `:! touch src/bash/script.sh^M`

如果您不删除最后一个，将创建一个包含“\r”的“有趣的文件路径” `^M`...

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2013-11-09T07:07:04.287

如果你的光标在你想在 Ex 中使用的单词上，为了节省你一个拉的步骤，使用：

```
 <ctl-r><ctl-w> 
```

这避免了将其粘贴到命令行中；取而代之的是，将光标下的单词直接粘贴到命令行上。例如：

```
:%s/<ctl-r><ctl-w>/foo/g 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-06-02T02:49:24.843

如果只是要复制的单词，可以使用`<C-r><C-w>`

1.  将光标放在单词上
2.  然后你可以输入类似`:vim <C-r><C-w> *`

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-05-25T12:32:39.780

`*`您可以使用命名缓冲区拉到剪贴板。例如，这会将当前行复制到剪贴板：

```
"*yy 
```

因此，您可以使用它复制一行，然后在命令行中使用 shift-insert 将其粘贴。

同样，您可以像这样从剪贴板粘贴：

```
"*p 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-06-26T19:40:36.613

剪贴板的`+`，至少在 Mac 上。所以你会写信`"+yy`把一行拉到剪贴板，然后`"+p`粘贴。尽管您始终可以使用 Command-C 和 Command-V。

# c# - 你能把这行c#转换成vb.net吗？

> ID：906536
> 
> 赞同：0
> 
> 时间：2009-05-25T12:26:53.787
> 
> 标签：c#, asp.net-mvc, vb.net

我尝试了很多东西，但我总是得到“无法将字符串转换为会员用户”

来自[ASP.Net MVC Membership Starter Kit](http://www.codeplex.com/MvcMembership)

此行来自文件 ListUsers.aspx

```
var users = (ViewData["Users"] as List<MembershipUser>); 
```

ViewData["Users"] 来自

```
 public virtual ViewResult Index( int? pageIndex, int? pageSize )
    {
        ViewData["Title"] = "Membership Administration";
        int totalRecords;
        var members = Membership.GetAllUsers( pageIndex ?? 0, pageSize ?? 25, out totalRecords );
        ViewData["Users"] = ToList<MembershipUser>( members );
        ViewData["Roles"] = dotNetRoles.GetAllRoles().ToList();
        return View( "ListUsers" );
    } 
```

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-25T12:29:34.200

```
Dim users = TryCast(ViewData("Users"), List(Of MembershipUser)) 
```

# architecture - 多台服务器如何为 Web 应用程序同步工作？

> ID：906539
> 
> 赞同：14
> 
> 时间：2009-05-25T12:28:33.580
> 
> 标签：architecture, server, server-side, backend

1.  我的第一个问题是，我经常读到人们使用多个专用服务器来运行他们的网站，并处理来自用户的查询。但他们究竟是如何做到这一点的呢？我的意思是，当我输入一个域名时，DNS 会将其解析为一个 IP 地址，但在那之后我就迷路了……那里有某种主/从架构来负载平衡（可能）数百个传入请求服务器？

2.  如果是这样，各种服务器如何共享数据（例如数据库）？它们会连接到同一个硬盘吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-25T13:29:14.097

[ultramonkey](http://www.ultramonkey.org/about.shtml)将很好地描述如何在多个服务器之间进行负载平衡，因此您会看到 1 个 IP 地址，但连接被路由到许多服务器之一（包括容错）。

如果您的 Web 服务器没有使用相同的存储（公共存储可能很棘手，您必须使用具有“共享”文件系统（如[GFS ）或数据库的](http://en.wikipedia.org/wiki/Global_File_System)[SAN](http://en.wikipedia.org/wiki/Storage_area_network)），那么您应该启用[粘性会话](http://www.eggheadcafe.com/conversation.aspx?messageid=31273714&threadid=31227223)，告诉路由器每个客户端都会选择一个服务器第一次与之通信，并与该服务器保持联系。这容错性较差（但在 Web 中，您只需刷新断开的连接即可重新开始），但更容易构建（并且速度更快，因为每个 Web 服务器都可以保持独立）

在真正容错的情况下，您需要的另一个问题是将物理服务器放置在远离彼此的位置，这会引发大多数共享设计的性能问题（即，如果您的所有服务器都在不同国家），是使用多个服务器的方法，使用单个 DNS 名称并定期在它们之间复制数据。[DNS 负载平衡](http://ntrg.cs.tcd.ie/undergrad/4ba2.01/group8/DNS.html)可能是将多个 Web 服务器用作单个网站的最简单方法。

在这些情况下，数据库通常可以是所有服务器与之通信的单个数据库，或者可以自己共享，使用集群或更常见的日志传送，以确保您有一个准备好在主服务器发生故障时上线的备份。日志传送对于备份服务器来说比位于很远的地方更常见。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-25T12:32:47.550

1）您可以使用 NLB（网络负载平衡）-它将为场中的所有服务器使用相同的 IP [http://en.wikipedia.org/wiki/Network_Load_Balancing_Services](http://en.wikipedia.org/wiki/Network_Load_Balancing_Services) [http://technet.microsoft.com/en-us /图书馆/cc759510.aspx](http://technet.microsoft.com/en-us/library/cc759510.aspx)

2) 数据库的 SQL 集群和非关系数据的通用文件存储 [http://www.sql-server-performance.com/articles/clustering/clustering_intro_p1.aspx](http://www.sql-server-performance.com/articles/clustering/clustering_intro_p1.aspx)

# oracle-xe - Oracle Express Edition (XE) 可以处理多少个连接？

> ID：906541
> 
> 赞同：16
> 
> 时间：2009-05-25T12:28:44.843
> 
> 标签：oracle-xe

我正在构建一个使用 Oracle Database 10g 作为数据库后端的 Web 应用程序。我意识到 Express 版本有限制，但我只是想确保连接数不是其中之一。

Oracle Express Edition (XE) 是否限制并发连接数量（例如，查看站点的用户数量）？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-25T13:05:14.987

根据： http: [//forums.oracle.com/forums/thread.jspa?messageID=1673347](http://forums.oracle.com/forums/thread.jspa?messageID=1673347) （等等）

没有*硬编码*限制，但是有一个有效的默认限制为 ~20 个并发连接，但是您可以通过以下方式扩展它：（ `ALTER SYSTEM SET processes=200 scope=spfile` 并重新启动数据库）

实际上，您可能在 200 个连接之前就已经达到了其他 XE 限制，或者应该从一开始就使用更简单的数据库。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2011-03-04T19:00:56.243

这里有一些 XE 10g 的基准：

[http://ora-00001.blogspot.com/2011/03/stress-testing-oracle-xe-10g.html](http://ora-00001.blogspot.com/2011/03/stress-testing-oracle-xe-10g.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-25T13:19:29.170

连接数取决于 RAM 和其他相关事物。

# .net - 在 ASP.NET VB 中使用 HTTPWebRequest

> ID：906543
> 
> 赞同：0
> 
> 时间：2009-05-25T12:29:12.643
> 
> 标签：.net, asp.net, http, httpwebrequest

我不知道如何在.net 中使用这个类。有人想分享他的知识如何实现和使用这个类吗？

您是否有任何简单的程序可以调用页面并对其进行处理？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-25T12:36:12.410

```
Dim request = HttpWebRequest.Create("http://www.google.com")
Dim response = request.GetResponse()
Using reader = New StreamReader(response.GetResponseStream())
    Console.WriteLine(reader.ReadToEnd())
End Using 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-25T12:37:26.057

最简单的方法是使用`WebClient`简化 HttpWebRequest 最常见用法的类。

C# 中的示例：

```
string page;
using (WebClient client = new WebClient()) {
   page = client.DownloadString("http://www.guffa.com");
} 
```

# django - 更新时如何使字段只读

> ID：906551
> 
> 赞同：1
> 
> 时间：2009-05-25T12:31:22.810
> 
> 标签：django, django-admin, django-forms

我有一个表格。填写表格后，我不希望用户更改表格中的任何内容。

但是用户可以看到这些值。意味着所有字段都是不可编辑的。我可以通过使用实例方法来做到这一点，但这对外键没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-26T16:40:58.737

取决于您的意思是“一旦填写表格”。

如果是 html 表单帖子，只需使用提交表单的简单文本和值呈现一个新的 html 页面。

如果回发是一个 ajax 调用，您可以更改元素的 CSS 样式，例如禁用提交按钮或擦除整个并替换您从 ajax 请求返回的值。

顺便说一句，html 输入元素上没有“editable=False”属性。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-09-03T09:14:29.783

你可以使用 readonlyAdmin

# c# - 如何在 C# 中将 MS Word 2003 文档转换为 HTML？

> ID：906557
> 
> 赞同：1
> 
> 时间：2009-05-25T12:32:43.197
> 
> 标签：c#, .net, ms-word

我想将 MS Word 2003 文档的内容提取到 C# 中的 HTML 中。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-25T12:39:53.057

我认为这是最简单的方法

[http://asptutorials.net/C-SHARP/convert-ms-word-docs-to-html/](http://asptutorials.net/C-SHARP/convert-ms-word-docs-to-html/)

他们在文章中的关键点是他们使用 SaveAs 功能 [http://msdn.microsoft.com/en-us/library/aa220734.aspx](http://msdn.microsoft.com/en-us/library/aa220734.aspx)

像这样：

```
 string newfilename = folder_to_save_in + FileUpload1.FileName.Replace(".doc", ".html");
    object o_nullobject = System.Reflection.Missing.Value;    
    object o_newfilename = newfilename;
    object o_format = Word.WdSaveFormat.wdFormatHTML;
    object o_encoding = Microsoft.Office.Core.MsoEncoding.msoEncodingUTF8;
    object o_endings = Word.WdLineEndingType.wdCRLF;
    // SaveAs requires lots of parameters, but we can leave most of them empty:
    wordApplication.ActiveDocument.SaveAs(ref o_newfilename, ref o_format, ref o_nullobject,
    ref o_nullobject, ref o_nullobject, ref o_nullobject, ref o_nullobject, ref o_nullobject, ref o_nullobject,
    ref o_nullobject, ref o_nullobject, ref o_encoding, ref o_nullobject,
    ref o_nullobject, ref o_endings, ref o_nullobject); 
```

该库是 Microsoft.Office.Interop.Word；

如果我没记错的话，执行代码的机器上需要 Word。如果它是 ASP.NET，则在服务器上是必需的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-26T08:22:26.403

三种方式： 1\. 保存为 HTML，如 napster 所述 2\. 将 Open XML 转换为 HTML；XSLT 可在[http://www.codeplex.com/OpenXMLViewer](http://www.codeplex.com/OpenXMLViewer)获得 3\. 对于最干净的 HTML，编写代码将文档中的每个样式转换为 CSS，并将任何直接格式放入 @style。

运行 C# 代码的计算机上是否安装了 Word？

# c# - 为什么模数运算符在 c# 中不能用于双精度？

> ID：906564
> 
> 赞同：11
> 
> 时间：2009-05-25T12:34:24.190
> 
> 标签：c#, .net

考虑一下：

```
double x,y;
x =120.0;
y = 0.05;

double z= x % y; 
```

我试过了，预计结果为 0，但结果为 0.04933333。

然而，

```
x =120.0;
y = 0.5;
double z= x % y; 
```

确实给出了正确的结果 0。

这里发生了什么？

我试过`Math.IEEERemainder(double, double)`了，但它也没有返回 0。这里发生了什么？

另外，顺便说一句，在 C# 中查找余数的最合适方法是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-05-25T12:38:11.970

由于其存储格式，`double`s 不能完全按照输入或显示的方式存储每个值。数字的人类表示通常是十进制格式，而`double`s 基于对偶系统。

在 a`double`中，`120`因为它是一个整数值而被精确存储。但`0.05`不是。`0.05`双精度近似于它可以表示的最接近的数字。`0.5`是`2`( `1/2`) 的幂，因此可以精确存储并且不会出现舍入误差。

要使所有数字与您在十进制系统中输入/显示的方式完全相同，请`decimal`改用。

```
decimal x, y;
x = 120.0M;
y = 0.05M;

decimal z = x % y;  // z is 0 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-05-25T12:54:33.277

您可以执行以下操作：

```
double a, b, r;

a = 120;
b = .05;

r = a - Math.floor(a / b) * b; 
```

这应该会有所帮助；）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-25T12:51:37.433

[http://en.wikipedia.org/wiki/Floating_point#Accuracy_problems](http://en.wikipedia.org/wiki/Floating_point#Accuracy_problems)可以帮助您理解为什么会得到这些“奇怪”的结果。浮点数可以具有特定的精度。只需尝试这些查询并查看结果：

[0.5 英寸 2](http://www72.wolframalpha.com/input/?i=convert+0.5+to+binary)

[0.05 以 2 为底](http://www72.wolframalpha.com/input/?i=convert+0.05+to+binary)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-25T13:02:16.867

我相信如果您尝试相同的操作，`decimal`它会正常工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-25T12:59:15.217

模数只能与整数一起使用。其余部分来自欧几里得除法。使用 double，您可以获得意想不到的结果。

看[这篇文章](http://en.wikipedia.org/wiki/Modulo_operation)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-07-24T13:27:12.960

这就是我们使用的.. :)

```
 public double ModuloOf(double v1, double v2)
    {
        var mult = 0;

        //find number of decimals
        while (v2 % 1 > 0)
        {
            mult++;
            v2 = v2 * 10;
        }

        v1 = v1 * Math.Pow(10, mult);

        var rem = v1 % v2;
        return rem / Math.Pow(10, mult);
    } 
```

# java - 作为程序员，我怎样才能快速提高自己的能力？

> ID：906566
> 
> 赞同：6
> 
> 时间：2009-05-25T12:35:17.573
> 
> 标签：java

我的问题不仅仅是扩展语言特定技能。我想知道任何人可能会向渴望知识但缺乏方向的人提供什么样的建议。随意跳到问题。

**背景：**我在我的大学上过一门 Java 计算机科学课程，但我计划主修计算机科学和电气计算机工程 (ECE)。我的 Java 课程非常初级。我们得到了一个框架，并且仅仅编辑/创建了一些方法和类来执行一个简单的任务。我们制作了一个 Breakout 版本，并为简单的四人连线游戏创建了一个 AI。虽然我对大 O 表示法有点熟悉，但我并没有在课堂上真正研究过它（我的下一堂 CS 课会涵盖这个）。在我的 ECE 入门课程中，我们还在 PBASIC 中对 BOE-Bots 进行了编程，以参加各种障碍赛。作为一名工科学生，我也被介绍到了 matlab，尽管我只将它用于线性代数作业。总之，我没有太多的编程背景，但我

**采取的步骤：**在更多地关注reddit的编程部分后，我找到了一个指向[Project Euler](http://projecteuler.net)的链接。今年夏天我一直在解决这些问题（昨天完成了我的第 42 个解决方案），但我正在寻找更多的方向。我一直在阅读博客文章，而且如此之多。我想学习一些关于 php 的知识，也许还想创建一个动态网页，但从根本上说，我想尽我所能来提高自己并为工作世界做准备。

**问题：** *你会向我推荐什么方向？我应该学习一门新语言吗？继续攻击欧拉计划？读一些关于编程的书？开始一个编码项目（我什至不知道从哪里开始）？等到学校？了解更多基本的编程原理？*

我想在所有可用的道路上，我只是有点不知所措，我不想陷入可能对我的职业机会有害的道路。我也很不擅长做决定。您的建议将不胜感激！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-25T13:22:33.423

这个词很快让我担心......我建议你阅读[十年内自学编程 - 为什么每个人都这么着急？](http://norvig.com/21-days.html) ~~ 彼得·诺维格

如果您在坐在键盘前三周后没有让世界着火，请原谅自己……也许您注定要成为一个大器晚成的人？

;-)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-25T13:14:07.607

大多数人都建议做更多的编程。虽然这显然很重要，但我认为了解程序工作的环境很重要。

我将研究操作系统如何工作（它们如何为您分配资源、它们如何调度程序和线程）、网络如何工作（路由、TCP/UDP 行为和限制等）以及一些数据库理论。

我看到很多初级程序员具有丰富的语言知识，但除了他们程序的沙箱之外，他们不知道计算机/网络如何使他们的东西运行。

了解以上内容将使您在如何编写程序以及如何理解它们如何工作（以及如何调试它们或分析它们的故障）方面成为更好的程序员

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-25T12:39:14.417

只有一件事可以提高你作为程序员的技能：**程序**。

阅读有关编程的书籍类似于阅读有关骑自行车的书籍。它不会把你变成一个骑自行车的人。

编写一些你将使用并有既得利益的东西。然后低下头去做——在你去的时候阅读任何支持信息。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-25T12:45:02.580

编程技能只是成功程序员的一小部分，恕我直言。能够阅读规范、提出问题并与他人互动以提取编程所需的信息也非常重要。注意你的“软”技能，它们会帮助你在商业环境中成为一名成功的程序员。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-05-25T12:51:45.840

我建议你采取多管齐下的方法。阅读书籍只能带您到此为止，因为它们没有为您提供从头开始开发应用程序的实践经验。编程现在更多地是关于编写代码；您必须能够设计应用程序、阅读文档并知道如何解决不知道如何告诉您编写内容的客户的需求。

如果你还在上大学，试着找一家开发公司实习。您将可以接触到已经拥有此经验的人员和资源。如果你因为某种原因不能实习，那就找一个做开发者的朋友。让一个知道自己在做什么来激发想法的人的影响是无法估量的。

除了与知识渊博的人相处之外，您还应该自己编写应用程序。选择你感兴趣的东西，但同时尽量不要让它太复杂，你不想因为编写一个无聊的应用程序而让自己感到沮丧，或者选择一些学习曲线太陡峭的东西。请记住，应用程序是它的核心，是一个帮助您学习的工具，所以如果它没有您想象的那么复杂，或者您正在练习的代码不适用于您的范围内，那也没关系'正在尝试写作。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-05-25T12:52:04.890

您肯定需要编写代码才能成为更好的程序员。如果您对编写程序没有特定的想法，请选择一个开源程序（最好是您使用的程序），联系他们并了解他们需要做什么；贡献一些东西。修复错误，实现功能......从小处着手，逐步提升。这将帮助您了解如何在团队中工作、编写可维护的代码、预防问题以及处理有用的任务。人们在学习编程时所写的大部分内容只是练习代码，并没有真正有用或代表任何现实。这就是为什么一个真正有用的程序是最好的选择。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-05-25T13:13:17.763

听起来您正在愉快地编写程序，并且是一个不错的 java 程序员。所以写更多可能不是你学习新事物的最有效方式。

因此，我想说学习一门新语言——知道不止一种语言总是会让你接触到新概念。作为一名 java 程序员，我建议使用 C/C++，因为它们非常受欢迎，但它们填补了“托管高级”语言不去的领域，即低级高性能、全金属应用程序。如果您学习 C#（例如），您会发现您只是在使用不同的 java 方言（大致）并且您不会学到太多东西。

如果您不喜欢 C/C++ 的想法，请改用脚本语言 - bash、VBScript/WMI、perl 或 python。他们将有足够的不同来教你一些好东西。

或者两者都做！

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-05-25T12:46:09.317

我看到一个名为[CodeKata](http://codekata.com/)的网站的有趣链接，它可能会对您有所帮助。让你的技能快速发展的重要事情是为你在任何实际工作中可能遇到的实际问题编写实际代码。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-05-25T12:48:31.027

由于您已经了解编程的基础知识，并且显然有学习的愿望，我会开始一个**宠物项目**。

没有什么比拥有一个相当具有挑战性的宠物项目更能迫使我学习有关技术、语言或想法的大量交易了。

我会建议，就像 rein 提到的那样，选择一个你真正感兴趣的项目。否则它会很快变得无聊，你将不知道为什么要从事它。我认为使该项目相当重要是明智的。我总是发现我正在从事的项目越是琐碎，我从中学到的东西就越多。

此外，如果你住在大学/大学研究实验室附近，那么校园里的研究实验室几乎总是**在寻找暑期实习生**来研究一种形式或形式的代码。有些人甚至会付钱给你。通过高中和一些大学，我这样做了 4-5 年，这是一次很棒的学习经历。

显然，参与开源项目是获得与其他开发人员合作经验的好方法。查看[github](http://github.com)、[sourceforge](http://sourceforge.net/)、[bitbucket](http://bitbucket.org/)上的内容。

我只会提醒您寻求帮助并打扰您非常感兴趣并且您将坚持下去的项目的核心开发人员。通常，致力于该项目的开源开发人员很少。他们的时间对社区来说真的很宝贵，把它浪费在一个即将在夜间飞行并且再也见不到的人身上是一种耻辱。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2009-05-25T12:50:32.070

除了选择一个有趣的项目并从头开始实施之外，阅读他人的代码对于提高您的技能也很有价值。Scott Hanselman 有一个很好的阅读代码系列：[Weekly Source Code](http://www.hanselman.com/blog/googleresults.html?&sa=Search&domains=www.hanselman.com&sitesearch=www.hanselman.com&client=pub-7789616507550168&forid=1&ie=UTF-8&oe=UTF-8&safe=active&cof=GALT:%23B47B10;GL:1;DIV:%23A9501B;VLC:6F3C1B;AH:center;BGC:FFFFFF;LBGC:336699;ALC:B47B10;LC:B47B10;T:000000;GFNT:A9501B;GIMP:A9501B;FORID:11&hl=en&q=weekly%20source%20code)

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2009-05-25T13:21:29.777

您已经知道如何编程；为了让自己为现实生活中的工作做好准备，最重要的可能不是如何更好地编程，而是学习你必须做的不是编程的事情。

在您的工作场所，您很可能不会被要求编写“一劳永逸”的程序，而是在一个大型应用程序的团队中工作。为了有效地做到这一点，您需要学习：

*   如何与分析师、客户、经理和你的程序员同事有效沟通
*   如何计划和协调工作：使用源代码控制系统和错误跟踪系统，使用书面规范，遵循开发过程 - “软件工程”
*   也许最重要的是：习惯于使用其他人的代码——第三方库、框架，当然还有同事的代码。

这也可以通过实际项目中的实践经验最有效地学习。对我来说，让我大开眼界的是在一个由大约 10 名学生组成的小组中，在一个由大学组织的实验项目中工作，并得到了一些行业的支持。也许你可以在你的大学找到或组织类似的东西？如果它有一个处理软件工程的椅子，如果他们还没有，他们应该很乐意做类似的事情。如果做不到这一点，加入开源项目也很好。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2009-05-31T20:09:58.070

*与编写代码*的能力相反，对开源项目的贡献对您*开发软件*的能力有着惊人的高影响：

 **   你开始编写其他人编写的代码，这些代码有时很出色，有时很糟糕；
*   在地理分布的团队中进行协作；
*   了解团队政治（耶！）；
*   了解拥有实际用户意味着什么。

仅引用一些。一些值得一看的好地方：

*   [代码豪斯](http://codehaus.org/)
*   [源锻造](http://sf.net/)
*   [谷歌代码](http://code.google.com/)

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2009-05-25T12:59:01.037

编写程序以自动化您每天手动执行的操作。

比如，待办事项列表、记账、查看 RSS 提要……这个列表可能无穷无尽。如果你做一些生意，写一些简单的代码来帮助你。

本质是：

### 为了提高你的编程，做编程！:D

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-05-31T20:03:47.240

[成为更好的开发者的 99 种](http://www.developerzen.com/2008/12/05/99-ways-to-become-a-better-developer/)方法：

1.  程序！并尽量让你的工作多样化
2.  找导师
3.  做导师
4.  了解除代码之外的软件开发的不同方面（软件业务等）

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-05-27T19:54:11.123

这是我的多管齐下的建议：

1) 大局观工作 - 查看各种软件开发方法，并了解在编程时如何遵循其中一种方法。您做了一些 Java 工作，是 Web、Windows 应用程序、控制台应用程序还是其他什么？了解一些其他类型也可能很有用

2) 中等图片工作——你看过重构和设计模式吗？这些可能非常有用，但可能需要更多的编码经验才能了解它们如何有用。

3) 小图工作 - 研究各种算法并了解在选择数据结构的各种实现时可以做出的各种权衡，例如链表与数组。有一本关于算法的大白皮书，有些人在研究它们时会用到。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2009-05-27T20:50:57.937

我的多重建议：

1.  继续训练，写代码。参与小型开源项目。
2.  阅读标准书（[这里](http://www.codinghorror.com/blog/archives/000020.html)是杰夫的清单）
3.  [通过阅读像www.badprogramming.com](http://www.badprogramming.com)这样的网站，从你的错误中学习，或者更好地从别人的错误中学习

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2009-05-25T15:03:01.973

了解最佳实践（例如 windowsclient.net 上的培训视频）。获取任何问题并使用数据库作为输入和数据库作为输出来解决它。重新开始几次。这是尽可能接近真实世界的场景。阅读乔尔推荐的书籍。

# sql-server - SSRS 2008 TimeDataRetrieval 时间

> ID：906582
> 
> 赞同：0
> 
> 时间：2009-05-25T12:40:57.970
> 
> 标签：sql-server, performance, reporting-services

我有一个奇怪的性能问题的报告。在以下条件下运行时，SSRS Server ( `UAT_SSRS`) & SQL Server ( `SERVER_SQL`) 我得到的`TimeDataRetrieval`值为 23726。当我在不同的 SSRS 服务器 ( `PROD_SSRS`) 下运行它并且仍然使用相同的 SQL Server 时，`TimeDataRetrieval`值为 325952 (超过**十倍**）对于完全相同的参数。

我的理解是，它`TimeDataRetrieval`涵盖了数据的连接处理和数据集检索。为什么这两个报告之间会有如此巨大的差异？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-25T13:00:18.897

该值来自与 SSRS 安装关联的 ReportServer 数据库。托管 RS DB 的 SQL Server 实例无关紧要。

所以，这只是说你的 prod SSRS 比你的 UAT SSRS 忙 14 倍左右。它们有不同的后端元数据数据库，即使它们位于同一个 SQL Server 实例上。

# iphone - 核心动画和视图旋转性能不佳：如何改进？

> ID：906583
> 
> 赞同：0
> 
> 时间：2009-05-25T12:41:06.440
> 
> 标签：iphone, cocoa-touch, uikit, core-animation, transform

当通过触摸图标几秒钟进入主屏幕自定义模式时，我有 12 个视图旋转几乎类似于主屏幕中的图标。

我使用 3D 转换代码进行旋转。它们每个的持续时间仅为 0.02 秒，并且旋转的角度和方向会在加速度测量时永久改变。

其中 5 个视图很好，但 12 个视图的性能很差。这是旋转代码：

```
CATransform3D rotatedTransform = CATransform3DRotate(CATransform3DIdentity, degrees * M_PI / 180.0, 0.0f, 0.0f, 1.0f);
self.layer.transform = rotatedTransform; 
```

有一些核心动画围绕着它。但是我在这里看到了 CPU 的浪费，因为我不做任何 3D 的东西。我真的只旋转二维而不是别的。它们是简单的 UIImageViews，但是是一个自定义类，可以自己执行此旋转动画。

我听说有“仿射”变换应该适用于 2D 空间。在这种情况下，您会建议将其更改为 2D 吗？

我必须更喜欢更改图层或视图的转换吗？哪个更快？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-28T00:51:02.507

1.  **鲨鱼吧。**你必须知道到底什么是缓慢的继续。

2.  尝试将更新间隔从 0.02 秒增加到 0.1 秒；这是可以接受的吗？

3.  如果所有图像都一起旋转，`sublayerTransform`请在超层上使用 a 而不是单独转换每个图像

4.  在不关闭动画的情况下尝试它，只是为了确认您的回调按预期工作（setDisableActions：在 CATransaction 上）。当你关闭它们时，你是否看到与 Shark 中的慢速相同的事情？

5.  如果您在滚动视图中执行此操作，您可能会遇到其他问题。您需要处理屏幕上/屏幕外发生的事情等。

6.  3d 变换的速度与核心动画 AFAIK 中的仿射变换速度相同。基本的 sin/cos 东西并没有减慢应用程序的速度

有关您尝试实现的实际效果的更多信息将真正有助于提高性能。

屏幕上的图像有多大？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-25T12:55:39.797

## 我的建议是使用 OpenGL ES。

尽管 Core Animation 比“UITransformations”快一点，但您面临的问题是一个经典问题：**您正在尝试创建基于帧到帧的动作，其中有许多“虚拟”精灵漂浮在周围。这不是 UIKit 的用途**。尤其是你想要做的动画。旋转需要三角函数来计算像素插值。这是一个相当昂贵的过程。

除非对动画的强度、同时动画对象的数量以及重新计算新变换的频率有明确的限制，否则**我在这一点上给你的唯一建议是 OpenGL ES**。

**到目前为止，我对 iPhone 的体验非常相似**。每次我们为应用程序榨汁时，当前的平台都无法处理它。我们最终使用了 OpenGL ES，值得学习。**表现令人难以置信**。

对于“坏消息”，我深表歉意，但**我强烈建议不要将 UIKit 和 Core Animation 用于基于帧到帧的应用程序**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-07T10:49:05.107

CALayer 旋转是硬件加速的，2D 和 3D 转换非常相似，没有重绘发生，不需要去 opengl，不需要缓存。

Shark 会有所帮助，但您需要知道您在寻找什么，并且您正在寻找的不是提高当前代码的性能，而是完全删除您的代码。

听起来您过于频繁地浏览自己的代码，目的是为了改变每一层的角度。当您让 CA 完成工作时，您就赢了。

所以这里的策略是找到一种方法让 CA 完成这项工作，并且每秒回电不到 50 次。

`CAAnimationGroup`为每个图层包含几个`CAPropertyAnimation`并设置，例如，一次一秒钟的动画怎么样？

一旦你把它交给 CA，CA 就会在自己的线程中播放它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-25T13:02:01.717

这听起来像你不断地重绘你的观点。我确信有一种方法可以禁用它，并且只在动画结束时重绘。

# windows - 运行时更改批处理文件

> ID：906586
> 
> 赞同：43
> 
> 时间：2009-05-25T12:42:57.933
> 
> 标签：windows, batch-file

我正在运行一个长时间运行的批处理文件。我现在意识到我必须在批处理文件的末尾添加更多命令（现有内容没有更改，只是一些额外的命令）。考虑到大多数批处理文件是增量读取并一个一个执行的，是否可以这样做？还是系统读取文件的全部内容然后运行作业？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2009-05-25T12:54:48.877

我刚试了一下，结果出乎我的意料，它最后选择了新命令（在 Windows XP 上）

我创建了一个批处理文件，其中包含

```
echo Hello
pause
echo world 
```

我运行了文件，并在暂停时添加了

```
echo Salute 
```

保存并按回车继续暂停，所有三个提示都回显到控制台。

所以，去吧！

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2009-05-25T12:57:30.307

命令解释器记住它在批处理文件中的~~行位置~~ ***字节偏移量。***只要在**最近解析的代码行末尾的**~~当前执行行位置~~ 字节偏移后修改批处理文件就可以了。

 **如果您在此之前对其进行修改，它将开始做一些奇怪的事情（重复命令等）。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-03-11T01:26:58.927

[jeb 的例子](https://stackoverflow.com/a/9635783/1012053)很有趣，但它非常依赖于添加或删除的文本的长度。我认为反直觉的结果是当他说“如果你之前修改它，它将开始做奇怪的事情（重复命令等）”时的意思。

我已经修改了 jeb 的代码，以展示如何在执行批处理文件的开头自由修改可变长度的动态代码，只要适当的填充到位。每次迭代都会完全替换整个动态部分。每条动态线路都以 non-interfering 为前缀`;`。由于隐式选项，这可以方便`FOR /F`地剥离动态代码。`EOL=;`

我不是寻找特定的行号，而是寻找特定的注释来定位动态代码的开始位置。这更容易维护。

我使用等号行无害地填充代码以允许扩展和收缩。可以使用以下字符的任意组合：逗号、分号、等号、空格、制表符和/或换行符。（当然填充不能以分号开头。）括号内的等号允许代码扩展。括号后的等号允许代码收缩。

请注意，`FOR /F`剥离空行。可以通过使用 FINDSTR 为每行添加行号前缀，然后在循环中去除前缀​​来克服此限制。但是额外的代码会减慢速度，因此除非代码依赖于空行，否则不值得这样做。

```
@echo off
setlocal DisableDelayedExpansion
echo The starting filesize is %~z0
:loop
echo ----------------------
::*** Start of dynamic code ***
;set value=1
::*** End of dynamic code ***
echo The current value=%value%
::
::The 2 lines of equal signs amount to 164 bytes, including end of line chars.
::Putting the lines both within and after the parentheses allows for expansion
::or contraction by up to 164 bytes within the dynamic section of code.
(
  call :changeBatch
  ==============================================================================
  ==============================================================================
)
================================================================================
================================================================================
set /p "quit=Enter Q to quit, anything else to continue: "
if /i "%quit%"=="Q" exit /b
goto :loop
:changeBatch
(
  for /f "usebackq delims=" %%a in ("%~f0") do (
    echo %%a
    if "%%a"=="::*** Start of dynamic code ***" (
      setlocal enableDelayedExpansion
      set /a newValue=value+1, extra=!random!%%9
      echo ;set value=!newValue!
      for /l %%n in (1 1 !extra!) do echo ;echo extra line %%n
      endlocal
    )
  )
) >"%~f0.tmp"
::
::The 2 lines of equal signs amount to 164 bytes, including end of line chars.
::Putting the lines both within and after the parentheses allows for expansion
::or contraction by up to 164 bytes within the dynamic section of code.
(
  move /y "%~f0.tmp" "%~f0" > nul
  ==============================================================================
  ==============================================================================
)
================================================================================
================================================================================
echo The new filesize is %~z0
exit /b 
```

上面的方法可行，但如果将动态代码移到文件末尾的子程序中，事情会容易得多。代码可以不受限制地扩展和收缩，并且不需要填充。FINDSTR 在删除动态部分时比 FOR /F 快得多。动态行可以安全地以分号作为前缀（包括标签！）。然后 FINDSTR /V 选项用于排除以分号开头的行，并且可以简单地附加新的动态代码。

```
@echo off
setlocal DisableDelayedExpansion
echo The starting filesize is %~z0

:loop
echo ----------------------
call :changeBatch
call :dynamicCode1
call :dynamicCode2
echo The current value=%value%
set /p "quit=Enter Q to quit, anything else to continue: "
if /i "%quit%"=="Q" exit /b
goto :loop

:changeBatch
(
  findstr /v "^;" "%~f0"
  setlocal enableDelayedExpansion
  set /a newValue=value+1, extra=!random!%%9
  echo ;:dynamicCode1
  echo ;set value=!newValue!
  echo ;exit /b
  echo ;
  echo ;:dynamicCode2
  for /l %%n in (1 1 !extra!) do echo ;echo extra line %%n
  echo ;exit /b
  endlocal
) >"%~f0.tmp"
move /y "%~f0.tmp" "%~f0" > nul
echo The new filesize is %~z0
exit /b

;:dynamicCode1
;set value=33
;exit /b
;
;:dynamicCode2
;echo extra line 1
;exit /b 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-12-30T01:41:04.630

简短的回答：是的，批处理文件可以在运行时自行修改。正如其他人已经证实的那样。

多年前，在 Windows 3 之前，我工作的地方在 MS-DOS 中有一个内部菜单系统。它运行事物的方式非常优雅：它实际上是从一个批处理文件中运行的，主程序（用 C 编写）为了运行脚本而对其进行了修改。这个技巧意味着菜单程序本身在选择运行时不会占用内存空间。这包括诸如 LAN Mail 程序和 3270 终端程序之类的东西。

但是从一个自修改的批处理文件运行意味着它的脚本也可以做一些事情，比如加载 TSR 程序，实际上可以做任何你可以放在一个批处理文件中的事情。这使它非常强大。只有`GOTO`命令不起作用，直到作者最终弄清楚如何使批处理文件为每个命令重新启动。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-03-09T14:35:01.997

几乎就像[rein](https://stackoverflow.com/users/100142/rein)所说的那样， cmd.exe 记住它当前的文件位置（不仅是行位置），并且对于每次调用它都会将文件位置推送到一个不可见的堆栈上。

这意味着，您可以在文件运行在实际文件位置之前和之后编辑文件，您只需要知道您在做什么......

一个自修改批次的小样本它不断
改变生产线`set value=1000`

```
@echo off
setlocal DisableDelayedExpansion
:loop
REM **** the next line will be changed
set value=1000
rem ***
echo ----------------------
echo The current value=%value%
<nul set /p ".=Press a key"
pause > nul
echo(
(
call :changeBatch
rem This should be here and it should be long
)
rem ** It is neccessary, that this is also here!
goto :loop
rem ...
:changeBatch
set /a n=0
set /a newValue=value+1
set /a toggle=value %% 2
set "theNewLine=set value=%newValue%"
if %toggle%==0 (
   set "theNewLine=%theNewLine% & rem This adds 50 byte to the filesize.........."
)
del "%~f0.tmp" 2> nul
for /F "usebackq delims=" %%a in ("%~f0") DO (
   set /a n+=1
   set "line=%%a"
   setlocal EnableDelayedExpansion
   if !n!==5 (
       (echo !theNewLine!)
   ) ELSE (
       (echo !line!)
   )
   endlocal
) >> "%~f0.tmp"
(
  rem the copy should be done in a parenthesis block
  copy "%~f0.tmp" "%~f0" > nul
  if Armageddon==TheEndOfDays (
   echo This can't never be true, or is it?
  )
)
echo The first line after the replace action....
echo The second line comes always after the first line?
echo The current filesize is now %~z0
goto :eof 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-07-07T00:00:08.287

命令解释器似乎记住了它正在读取的每个命​​令文件中的字节偏移量，但文件本身并未锁定，因此可以在运行时进行更改，例如使用文本编辑器。

如果在这个记住的位置之后对文件进行了更改，解释器应该愉快地继续执行现在修改的脚本。但是，如果在该点之前进行了更改，并且该修改更改了该点的文本长度（例如，您插入或删除了一些文本），那么记住的位置现在不再指下一个命令的开始. 当解释器尝试读取下一个“行”时，它会选择不同的行，或者可能是行的一部分，具体取决于插入或删除的文本量。如果你很幸运，它可能无法处理它碰巧出现的任何单词，给出错误并从下一行继续执行 - 但仍然可能不是你想要的。

但是，通过了解正在发生的事情，您可以构建脚本以降低风险。我有实现简单菜单系统的脚本，通过显示菜单、使用命令接受用户输入`choice`然后处理选择。诀窍是确保脚本等待输入的点靠近文件顶部，这样您可能希望进行的任何编辑都将在该点之后进行，因此不会产生不良影响。

例子：

```
:top
call :displayMenu
:prompt
REM The script will spend most of its time waiting here.
choice /C:1234 /N "Enter selection: "
if ERRORLEVEL == 4 goto DoOption4
if ERRORLEVEL == 3 goto DoOption3
if ERRORLEVEL == 2 goto DoOption2
goto DoOption1
:displayMenu
(many lines to display menu)
goto prompt
:DoOption1
(many lines to do Option 1)
goto top
:DoOption2
(many lines to do Option 2)
goto top
(etc) 
```

# ruby-on-rails - Rails 中的 Active Record 有什么替代品吗？

> ID：906589
> 
> 赞同：0
> 
> 时间：2009-05-25T12:44:09.273
> 
> 标签：ruby-on-rails, activerecord

Rails 中的 Active Record 有什么替代品吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-25T14:14:45.580

[Datamapper](http://datamapper.org/doku.php)是最大的替代 ORM，但还有其他的。

我很清楚，因为当你使用这些时，你真的会靠自己走在最前沿，但到目前为止，我还没有必要证明这种风险是合理的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-25T12:46:17.990

是的，这是可能的，但不是很容易。

在 rails 3 中，ORM 层将是可插入的，因此插入另一个 ORM 层会更容易。

# linux - echo --version 不起作用

> ID：906590
> 
> 赞同：4
> 
> 时间：2009-05-25T12:44:37.400
> 
> 标签：linux, echo

我如何知道 echo echo 的手册页中指定的 echo 命令的版本 --version 应该输出 echo 命令的版本是 echo 命令或其文档中的错误.. 请解释一下.. echo 帮助也是如此！ ！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-05-25T12:47:43.913

您可能正在使用内置的 shell `echo`。尝试使用真正的程序

```
/bin/echo --version 
```

对于内置回声的帮助部分，请尝试

```
help echo 
```

对于它的联机帮助页，请尝试

```
man bash 
```

如果你使用 bash 作为你的 shell

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-25T12:50:18.230

这可能是因为您使用的回声是 bash 中集成的回声。

```
/bin/echo --version 
```

将强制从 coreutils 调用 echo，并显示其版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-25T12:57:49.823

有关“内置”的更多信息，请查看内置手册页（特定于 bash，基本上是主要、广泛的 bash 手册页的“内置”部分）

# nhibernate - 何时使用 nHibernate 加载配置？

> ID：906593
> 
> 赞同：0
> 
> 时间：2009-05-25T12:45:06.727
> 
> 标签：nhibernate

我在读到配置的初始加载时间在 nHibernate 中可能会相当长，具体取决于映射表的数量等。

这是一次完成并存储在会话或缓存中吗？
每次 ASP.NET 进程回收时都会发生这种情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-25T12:58:39.447

Configuration 对象通常与 ISessionFactory 相关联。如果您有很多映射构建（通过调用 cfg.BuildSessionFactory），会话工厂可能会很慢。这就是为什么您只需要构建一次会话工厂并在整个应用程序中使用它。在 ASP.NET 应用程序中，当进程回收时，您将丢失对该会话工厂的引用，并且需要再次重建它。

如果您发现构建会话工厂非常慢，您可以通过禁用反射优化器来提高性能： Environment.UseReflectionOptimizer = false (cf [doc](http://www.surcombe.com/nhibernate-1.2/api/html/P_NHibernate_Cfg_Environment_UseReflectionOptimizer.htm) )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-25T12:57:19.870

`Configuration`用于`ISessionFactory`构建. 这是一次性交易 - 将在应用程序启动时发生。

# flash - 关于 Flash 应用程序中的 loadMovie(..) 的问题

> ID：906595
> 
> 赞同：0
> 
> 时间：2009-05-25T12:45:20.957
> 
> 标签：flash

我在 Flash 应用程序中有以下代码

```
loadMovie("original_files/default_image.jpg", "default_img"); 
```

这是一张背景图片，AFAI 可以分辨。

现在，请注意本地文件的路径。当我将 Flash 应用程序编译为 swf 文件并嵌入网页时，这会产生什么影响？该 swf 将在本地查找，对吗？（没有一个客户端会有这个文件）。所以我必须将其设为 URI（例如[http://mywebsite.com/images/flashBackground.png](http://mywebsite.com/images/flashBackground.png) ”）。但如果是这种情况，当我尝试调试时，flash 应用程序将如何找到该文件闪存应用程序？

是的，我（或多或少）从未使用过闪光灯 :(

干杯:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-25T12:59:30.990

如果您没有将 url 指定为 http:// 那么它将是本地的。本地路径将相对于托管 swf 文件的 html 页面，而不是 swf 文件的实际路径。此外，如果您确实使用相对路径，请注意斜杠，因为 /someFolder/someFile 可能指向 Windows 或 *nix 服务器上的不同位置。

至于 URI，只要您从本地文件系统运行 swf，您在调试时应该会发现 swf 的本地副本有任何问题。另一方面，如果您从 localhost 运行，那么您将遇到 Flash Player 安全沙箱问题。不能加载不同于当前swf子域的访问资源。

# c++ - 为什么我不能使用 fopen？

> ID：906599
> 
> 赞同：24
> 
> 时间：2009-05-25T12:46:16.243
> 
> 标签：c++, c, deprecated, tr24731

在[我之前询问过的关于所谓的安全库弃用的问题](https://stackoverflow.com/questions/900338/why-cant-i-use-strerror)中，我发现自己同样对为什么`fopen()`应该弃用感到困惑。

该函数接受两个 C 字符串，并返回一个 FILE* ptr，或在失败时返回 NULL。线程安全问题/字符串溢出问题在哪里？或者是别的什么？

提前致谢

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2009-05-25T13:06:10.040

您*可以*使用`fopen()`. 说真的，在这里不要理会微软，他们背离了 ISO 标准，对程序员造成了真正的伤害。他们似乎认为编写代码的人不知何故是脑残，不知道如何在调用库函数之前检查参数。

如果有人不愿意学习 C 编程的复杂性，他们真的没有生意去做。他们应该转向更安全的语言。

这似乎只是微软对开发人员锁定供应商的又一次尝试（尽管他们不是唯一尝试这样做的人，所以我没有特别谴责他们）。我通常会添加：

```
#define _CRT_SECURE_NO_WARNINGS 
```

（或`"-D"`命令行上的变体）到我的大多数项目，以确保我在编写完全有效的合法 C 代码时不会被编译器打扰。

微软在函数中提供了额外的`fopen_s()`功能（例如文件编码）以及改变返回的方式。这对于 Windows 程序员来说可能会更好，但会使代码本质上不可移植。

如果您只打算为 Windows 编写代码，请务必使用它。我自己更喜欢在任何地方编译和运行我的代码的能力（尽可能少的改变）。

* * *

从 C11 开始，这些安全功能现在是标准的一部分，尽管是可选的。查看附件 K 了解完整详情。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2009-05-25T17:54:42.193

有一份官方 ISO/IEC JTC1/SC22/WG14（C 语言）技术报告**TR24731-1**（边界检查接口）及其基本原理，请访问：

*   [http://www.open-std.org/jtc1/sc22/wg14](http://www.open-std.org/jtc1/sc22/wg14)

还有针对 TR24731-2（动态分配功能）的工作。

陈述的理由`fopen_s()`是：

> ## 6.5.2 文件访问功能
> 
> 创建文件时，`fopen_s`和`freopen_s`函数通过设置文件保护和以独占访问方式打开文件来保护文件免受未经授权的访问，从而提高安全性。

规范说：

## 6.5.2.1 fopen_s 函数

### 概要

```
#define __STDC_WANT_LIB_EXT1__ 1
#include <stdio.h>
errno_t fopen_s(FILE * restrict * restrict streamptr,
                const char * restrict filename,
                const char * restrict mode); 
```

### 运行时约束

`streamptr`、`filename`或中的任何一个都不`mode`是空指针。

如果存在运行时约束冲突，`fopen_s`则不尝试打开文件。此外，如果`streamptr`不是空指针，则`fopen_s`设置`*streamptr`为空指针。

### 描述

> 该`fopen_s`函数打开名称为 指向的字符串的文件 `filename`，并将流与它相关联。
> 
> 模式字符串应与`fopen`的描述相同，此外，以字符 'w' 或 'a' 开头的模式可以前面有字符 'u'，见下文：
> 
> *   `uw`截断为零长度或创建用于写入的文本文件，默认权限
> *   `ua`附加; 打开或创建文本文件以在文件末尾写入，默认权限
> *   `uwb`截断为零长度或创建二进制文件进行写入，默认权限
> *   `uab`附加; 打开或创建二进制文件以在文件末尾写入，默认权限
> *   `uw+`截断为零长度或创建用于更新的文本文件，默认权限
> *   `ua+`附加; 打开或创建文本文件以进行更新，在文件末尾写入，默认权限
> *   `uw+b`或`uwb+`截断为零长度或创建二进制文件进行更新，默认权限
> *   `ua+b`或`uab+`附加；打开或创建二进制文件以进行更新，在文件末尾写入，默认权限
> 
> 在底层系统支持这些概念的范围内，为写入而打开的文件应以独占（也称为非共享）访问权限打开。如果正在创建文件，并且模式字符串的第一个字符不是'u'，则在底层系统支持的范围内，该文件应具有防止系统上其他用户访问该文件的文件权限。如果正在创建文件并且模式字符串的第一个字符是'u'，那么当文件被关闭时，它应该具有系统默认的文件访问权限^(10))。
> 
> 如果文件打开成功，则指向的指针`FILE`将`streamptr` 设置为指向控制打开文件的对象的指针。否则，指向的指针`FILE`将`streamptr`被设置为空指针。
> 
> 退货
> 
> `fopen_s`如果打开文件，该函数将返回零。如果它没有打开文件或存在运行时约束冲突，则`fopen_s`返回一个非零值。
> 
> ^(10))这些权限与 fopen 创建文件的权限相同。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-07-09T23:50:25.937

该`fopen_s()`函数已由 Microsoft 添加到 C 运行时，与以下基本区别`fopen()`：

*   如果打开文件以进行写入（在模式中指定“w”或“a”），则打开文件以进行独占（非共享）访问（如果平台支持）。
*   如果在 mode 参数中使用了“u”说明符并带有“w”或“a”说明符，那么在文件关闭时，它将具有系统默认权限，其他用户可以访问该文件（可能没有如果这是系统默认设置，则访问）。
*   *如果在这些情况下未*使用指定的“u” ，则当文件关闭（或之前）时，将设置文件的权限，以使其他用户无法访问该文件。

从本质上讲，这意味着应用程序写入的文件默认受到其他用户的保护。

他们没有这样做是`fopen()`因为现有代码可能会破坏。

Microsoft 选择弃用`fopen()`以鼓励 Windows 开发人员有意识地决定他们的应用程序使用的文件是否具有宽松的权限。

[Jonathan Leffler 的回答](https://stackoverflow.com/questions/906599/why-cant-i-use-fopen/907549#907549)为`fopen_s()`. 我添加了这个答案，希望能阐明理由。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-25T16:25:17.833

> 或者是别的什么？

'fopen' 使用的 FILE 结构的某些实现将文件描述符定义为 'unsigned short'。这样一来，您最多可以同时打开 255 个文件，减去 stdin、stdout 和 stderr。

虽然能够打开 255 个文件的价值值得商榷，当然，当您有超过[252 个套接字连接](http://technopark02.blogspot.com/2005/05/solaris-32-bits-fopen-and-max-number.html)时，这个实现细节会在 Solaris 8 平台上实现！最初在我的应用程序中使用 libcurl 建立 SSL 连接时出现的看似随机的失败原来是由这个引起的，但它需要部署 libcurl 和 openssl 的调试版本并通过调试器脚本逐步引导客户才能最终解决。

虽然这不完全是“fopen”的错，但我们可以看到摆脱旧接口束缚的好处；弃用的选择可能是基于维护与过时实现的二进制兼容性的痛苦。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-25T12:52:57.400

新版本进行[参数验证](http://msdn.microsoft.com/en-us/library/8ef0s5kh(VS.80).aspx)，而旧版本没有。

有关更多信息，请参阅[此 SO 线程](https://stackoverflow.com/questions/14386/fopen-deprecated-warning)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-25T12:56:30.527

线程安全。`fopen()`使用全局变量 ，`errno`而`fopen_s()`替换返回一个`errno_t`并接受一个`FILE**`参数来存储文件指针。

# sql - 唯一索引和包含语句

> ID：906603
> 
> 赞同：1
> 
> 时间：2009-05-25T12:47:06.333
> 
> 标签：sql, db2

## 创建唯一索引

在 DB2 UDB 中，我可以使用以下语法创建索引

```
create unique index I_0004 on TABLENAME (a) INCLUDE (b, c, d); 
```

其中 a、b、c 和 d 是表的字段`TABLENAME`。

在 DB2 for os390 中，这种语法（`INCLUDE`关键字）是不允许的，所以我创建索引如下

```
create unique index I_0004 on TABLENAME (a);  
create index I_0005 on TABLENAME (a, b, c, d); 
```

上面的两个语句是否等同于带有`INCLUDE`关键字的解决方案？

## 索引列顺序

而且，如果我稍微修改第一条语句

```
create index I_0005 on TABLENAME (a, b, c, d) ALLOW REVERSE SCANS; 
```

这是否`ALLOW REVERSE SCANS`等同于创建索引

```
create index I_0005 on TABLENAME (a, b, c, d);  
create index I_0005 on TABLENAME (d, c, b, a); 
```

或者它是否也考虑给定列的任何组合（我的意思是，a，b，c，d；b，c，d，a；c，d，a，b；等等......）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-25T16:31:16.380

关于`UNIQUE INDEX`： 粗略地说，是的，包含的唯一索引`(a)`相当于`(b, c, d)` *一个*唯一索引`(a)`加上一个非唯一索引`(a, b, c, d)`- 当然，在内部，数据库引擎可能能够使用更少的空间&c。

关于`ALLOW REVERSE SCANS`：不，`(a, b)`可以反向扫描的索引*不*等于不能加一个`(b, a)`的索引-相反，可以反向扫描的索引等于不能在同一列上加另一个的索引其中 each`ASC`变为 a `DESC`，反之亦然（`ASC`当您未指定时为默认值）。

请注意，由于默认情况下允许 DB2 9.1 反向扫描，请参阅[http://publib.boulder.ibm.com/infocenter/db2luw/v9/index.jsp?topic=/com.ibm.db2.udb.rn.doc/ doc/c0023548.htm](http://publib.boulder.ibm.com/infocenter/db2luw/v9/index.jsp?topic=/com.ibm.db2.udb.rn.doc/doc/c0023548.htm)（而且，我相信 DB2 V8 现在不再支持，请参阅[http://www-01.ibm.com/support/docview.wss?rs=71&uid=swg21370360——](http://www-01.ibm.com/support/docview.wss?rs=71&uid=swg21370360)我认为 V9.5 是当前版本）。

# ide - 最喜欢的 griffon 开发 IDE

> ID：906605
> 
> 赞同：3
> 
> 时间：2009-05-25T12:47:30.950
> 
> 标签：ide, groovy, griffon

我正在试验 Groovy Griffon 开发，我想知道使用什么 IDE。

我正在尝试使用 NetBeans 6.5，我发现了这篇文章

[https://blogs.oracle.com/geertjan/entry/notes_on_converting_netbeans_grails](https://blogs.oracle.com/geertjan/entry/notes_on_converting_netbeans_grails)

从本质上讲，它描述了对 NetBeans 主干的分叉和对 Grails 支持的破解；我希望有更轻量级的东西。

是否有任何简单的工具可以从 Griffin Apps 创建 eclipse、netbeans 或 pom.xml？

还是最好使用简单的文本编辑器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-10T18:11:46.933

[http://plugins.netbeans.org/PluginPortal/faces/PluginDetailPage.jsp?pluginid=18664](http://plugins.netbeans.org/PluginPortal/faces/PluginDetailPage.jsp?pluginid=18664)已经有一个 NetBeans Griffon 插件可用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-25T15:23:39.217

Griffon 应用程序已经有一些用于 IDE 集成的基本钩子。

首先，生成一个`.classpath`和`.project`文件来标记 Eclipse 的预期源和测试目录。IntelliJ 和 NetBeans 都有这些 eclipse 文件的导入器（它们可以工作，我经常使用它们）。

其次，Griffon 0.1.1 为并行添加了更多目标，`build.xml`以便可以像使用 ant 任务一样使用更多常见脚本（`run-app`、`compile`、`debug-app`等）

第三，一些 IDE 供应商的作品中有一些更好的 IDE 支持。正如您链接的文章中提到的，因为 Griffon 是 grails 派生的，因此重新利用现有的 Grails 支持相当容易。 [IntelliJ](http://www.jetbrains.net/jira/browse/GRVY-2118)具有我所知道的唯一特定的跟踪功能请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-12T18:02:40.713

IntelliJ Idea 有很好的 Griffon 支持。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-02-01T18:05:26.127

这个问题通常伴随着下一个问题：

*如何调试 Griffon？*

以防万一有人仍然需要帮助试图弄清楚如何在 Eclipse/STS 中调试 Griffon，我编写了一个简单的分步指南来完成它：

[http://ivo43.blogspot.com/2012/02/debugging-griffon-in-eclipsests.html](http://ivo43.blogspot.com/2012/02/debugging-griffon-in-eclipsests.html)

希望有一天它对某人有所帮助，：D

PD：我已经尝试过 Netbeans，尽管它看起来很棒，但我仍然使用 STS，称我为疯子！

# java - Jstack 和没有足够的存储空间来处理这个命令

> ID：906620
> 
> 赞同：28
> 
> 时间：2009-05-25T12:52:21.923
> 
> 标签：java, jstack

我正在尝试在我的 java 应用程序上运行 jstack 命令。应用程序比较大，运行在 jboss AS 内，占用大约 4gb 的内存。操作系统为 Windows Server 2003 标准版。每次我得到一个错误“没有足够的存储空间来处理这个命令”。有足够的内存、16gb 和磁盘空间。那么，有什么想法吗？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2010-06-11T21:24:46.200

我最近在 Win2008r2 上遇到了这个问题，我想我会分享我的解决方案，因为我花了一段时间才弄清楚。[Rob 对 psexec -s 的评论](https://stackoverflow.com/questions/906620/jstack-and-not-enough-storage-is-available-to-process-this-command/1677263#1677263)对我来说是这样的。

由于用户上下文，似乎在 Vista 和更高版本的 jstack 上不适用于服务。它与记忆无关。我怀疑这与人们在 2003 年通过远程桌面看到此问题的原因相同，除非您在 mstsc 上使用 /admin 或 /console 开关。在 Vista 中，加强的安全性可能是破坏它的原因。

从 cmd 窗口启动我的应用程序运行良好，但这并不能帮助我调试我们的标准安装。启用 java 调试端口（对于 VisualVM、Eclipse 或大多数 Java 调试器）需要重新启动应用程序，因此如果您尚未启用调试，您可能会丢失您可能试图捕获的状态。在我的用户凭据下启动服务不起作用 - 我对此有点惊讶。但是 psexec -s 从系统上下文中运行 jstack，这就像一个魅力。哦，如果 UAC 处于打开状态，您需要从提升的 cmd 提示符运行 psexec。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-11-04T22:57:36.710

过去，当 JVM 在 Windows 2003 上作为 Windows 服务运行时，我看到过这种情况。

首先，检查这是否是[TMP 目录的问题](http://blogs.oracle.com/lmalventosa/entry/jconsole_local_process_list_on "TMP 目录的问题")。

其次，jstack（或其他实用程序，如 jconsole）不会连接到本地进程，除非它在同一个会话中运行。如果服务以特定用户身份运行，您可以通过登录到同一会话进行连接。如果您使用的是远程桌面，您可以使用“mstsc /admin”（以前是 /console）连接并尝试再次运行 jstack。如果这不能解决问题，请务必检查以确保正确设置 TMP 目录。

如果服务作为 LocalSystem 运行，上述过程可能不会有太大帮助。我不知道是否有办法登录到与 LocalSystem 相同的会话。

其他一些替代方法可能是为远程监控设置进程并使用 jvisualvm（来自服务器本身或另一台机器）通过端口连接并执行线程转储。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-25T23:01:37.643

我们在 Windows 机器上运行 JStack 时遇到了问题，即使是一个普通的应用程序 (1GB)。我们最终使用 Netbeans 进行了堆栈和堆分析。这似乎可以更好地处理转储文件的解析。YMMV。

尝试使用 Netbeans 进行分析 - 它非常好。请注意，VisualVM 是一个精简的 NB 分析器，并带有 6u7。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-29T13:29:05.870

`psexec -s jstack PID >> c:\jstack.log`在同一台机器上完美运行。第一次花了一些时间，但我再次使用重定向到文件选项执行，它在几秒钟内完成。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-03-05T19:01:47.020

这是来自底层操作系统的错误消息。除了捕获抛出的异常之外，您在代码中无能为力来处理这个问题。嘘，Windows 是如此有限。

[http://technet.microsoft.com/en-us/library/cc978735.aspx](http://technet.microsoft.com/en-us/library/cc978735.aspx)

# iis - IIS应用程序池不在服务器开启时？

> ID：906622
> 
> 赞同：1
> 
> 时间：2009-05-25T12:52:43.843
> 
> 标签：iis, iis-6

嗨，我的一台服务器有问题，问题是服务器 iis 不会自动启动我们为我们的一个应用程序拥有的应用程序池之一，但是如果您转到 iis 并右键单击应用程序池并单击启动应用程序池启动正常。

任何想法

让

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-26T16:27:49.463

查看 App Pool 是否设置为自动启动：

```
adsutil.vbs get w3svc/AppPools/DefaultAppPool/AppPoolAutostart 
```

将 DefaultAppPool 更改为您的应用程序池名称。

要将其设置为自动启动，请使用

```
adsutil.vbs set w3svc/AppPools/DefaultAppPool/AppPoolAutostart true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-25T12:58:08.107

您在 AppPool 中的应用程序是否依赖于可能仍在启动的其他服务（例如 SQL）？

我记得 Skype 曾经劫持我的 80 端口，因为 IIS 启动时间过长。

# jquery - 从 jquery get 请求运行 rails RJS 模板

> ID：906634
> 
> 赞同：1
> 
> 时间：2009-05-25T12:56:04.880
> 
> 标签：jquery, ruby-on-rails, ruby, rjs

我正在使用带有 RJS 模板的 Rails 和 jquery 来执行各种 AJAX 请求。

对于我的大多数 Ajax 内容，我将提交处理程序附加到 application.js 中的表单，如下所示：

```
$('#tagging_flickr_photos').submitWithAjax();
$('#tag_submit').click(function() {
    $('#flickr-photos-status').show();

}); 
```

这将调用执行一些处理然后转发到 RJS 模板的表单操作，如下所示：

```
$("#flickr-photos-status").hide();
$("#flickr-photos").fadeIn();
$("#flickr-photos").html("<%= escape_javascript(render(:partial => 'flickr_photos_for_tagging_content')) %>"); 
```

这是一种享受。

现在我正在尝试做同样的事情，但只是基于在下拉列表中选择不同的值而不是提交表单。这是我将处理程序附加到下拉列表的javascript：

```
$('#film_film_name_id').change(function() {
    $.get('/admin_film/make_tags?film_name_id=' + $("#film_film_name_id").val() + '&film_speed_id=' + $("#film_film_speed_id").val());
}); 
```

我的控制器方法进行了一些处理，然后转发到 RJS 模板（make_tags.js.erb）：

```
$("#film_tags").val(<%=@tags%>) 
```

但是，模板似乎没有执行。我可以在我的日志中看到它正在调用我的方法并呈现模板的条目，但无论我在模板中放入什么，似乎都没有发生任何事情。我在那里放了一个 Javascript 警报，但它没有触发。

我认为问题与附加我的 Javascript 处理程序有关，但我无法弄清楚我缺少什么。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-25T15:00:58.297

我认为你必须告诉 jQuery 你期待 JavaScript 并且它应该被执行。尝试以下方法，看看它是否有效：

```
$('#film_film_name_id').change(function() {
  var url = '/admin_film/make_tags?film_name_id=' + $("#film_film_name_id").val() + '&film_speed_id=' + $("#film_film_speed_id").val()
  $.ajax({
    type: 'GET',
    dataType: 'script',
    url: url
  });
}); 
```

如果由于我没有测试代码而不起作用，请检查[jQuery.ajax()上的 jQuery 文档。](http://docs.jquery.com/Ajax/jQuery.ajax#options)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-25T13:32:35.087

你好，

我正在使用直接通过原型库（不是 jquery）调用的观察者

```
 <td><div id="outconditionnals_container">
                <% if !@milestone.howto.conditionnals.nil? then %>
                        <%= collection_select(:OUTconditionnal, :id, @milestone.howto.conditionnals, :id, :name, {:prompt => true}, {"index" => @outconditionnalID.to_s}) %>
                        <%= observe_field("OUTconditionnal_"+@outconditionnalID.to_s+"_id",
                                :url => { :action => :AJAX_selection_change },
                                :with => "'id='+value+'&dir=out&type=conditionnal&milestoneID="+@milestone.id.to_s+"'",
                                :on => "changed")%>                         
                <% end %>
            </div>
        </td> 
```

然后我的 rjs 从我的操作中渲染出来，以引用其他一些表单元素。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-04-09T10:28:16.253

或者，您也可以使用您一直在使用的**$.get 。**
这是您的发型示例：

```
$('#film_film_name_id').change(function() {
    $.get(
      '/admin_film/make_tags', // or something like '<%= make_tags_admin_film_path %>'
      {
        film_name_id: $("#film_film_name_id").val(),
        film_speed_id: $("#film_film_speed_id").val()
      },
      null, // you may define an additional callback here, if that makes sense
      "script"
    );
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-10-18T21:20:36.327

jQuery 方法[getScript](http://api.jquery.com/jQuery.getScript/)是执行 ujh 上面推荐的一个很好的简写。

# sql - 创建触发器动态

> ID：906636
> 
> 赞同：0
> 
> 时间：2009-05-25T12:56:37.593
> 
> 标签：sql, sql-server, stored-procedures, triggers, dynamic-sql

我使用 MS SQL 2008，我想在动态创建的数据库中创建触发器。

创建数据库是在另一个数据库的存储过程中调用的，并且运行良好，但是当我想添加触发器或存储过程时，执行失败。

如果我尝试使用

```
EXEC('USE dbase
GO
CREATE TRIGGER [blah]
GO') 
```

我得到：

> 'GO' 附近的语法错误

如果我删除“USE ...”，触发器将在错误的数据库中创建。

有什么技巧可以避免我的问题吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-25T13:04:38.203

“GO”不是 T-SQL 语言。这是一个被 SSMS 等客户端工具解释为批处理分隔符的关键字（这意味着“将文本发送到服务器”）。

现在，CREATE TRIGGER 必须是批处理中的第一条语句，因此不能使用“USE dbname”。

如果您在 EXEC 之前提到“USE dbnname”，那么它可能会在默认数据库中用于连接。你必须测试（我现在不能，抱歉）

```
--Might work
USE dbase
EXEC ('CREATE TRIGGER [blah]
') 
```

或者您必须使用 sqlcmd 或 osql 来连接和运行代码：这允许您在连接时设置 db 上下文。但不在 T-SQL 中。

或者您可以在 EXEC 之前尝试 ALTER LOGIN xxx WITh DEFAULT_DATABASE = dbname

```
ALTER LOGIN xxx WITH DEFAULT_DATABASE = dbname 
--Now the EXEC will connect to default db if above approach fails
EXEC('CREATE TRIGGER [blah]
') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-25T13:20:54.643

您可以在调用 exec 之前切换数据库，并在之后立即切换回来：

```
use newdb
exec ('CREATE TRIGGER [blah] ...')
use originaldb 
```

或者创建一个链接服务器到正确的数据库，启用 RPC，并且：

```
EXEC ('CREATE TRIGGER [blah] ...') AT LinkedServerName 
```

或者创建一个不同的用户，该用户在您要创建触发器的数据库中具有默认目录，并且：

```
EXECUTE AS LOGIN = 'UserName'
EXEC ('CREATE TRIGGER [blah] ...')
REVERT 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-09T14:38:16.457

无需“更改登录 ..” 使用这种方式进行动态数据库和动态触发器

```
set @db = 'XXX'
set @sql = 'use [' + @db + ']; 

exec (''CREATE TRIGGER [dbo].[Trigger1] ON dbo.Table1
    FOR UPDATE, INSERT, DELETE
    AS
    BEGIN
        SET NOCOUNT ON;
        /*your code*/
    END;'')'

exec (@sql) 
```

# javascript - Javascript：常量属性

> ID：906643
> 
> 赞同：12
> 
> 时间：2009-05-25T12:57:39.840
> 
> 标签：javascript, object, constants

在javascript中，我可以将对象的属性声明为常量吗？

这是一个示例对象：

```
 var XU = {
      Cc: Components.classes
   }; 
```

或者

```
 function aXU()
   {
      this.Cc = Components.classes;
   }

   var XU = new aXU(); 
```

只是把“const”放在它前面，是行不通的。

我知道，我可以声明一个具有相同名称的函数（这也是一种常量），但我正在寻找一种更简单、更易读的方法。

浏览器兼容性并不重要。它只需要在 Mozilla 平台上运行，就像在 Xulrunner 项目中一样。

十分感谢！

干杯。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-25T16:12:59.533

Since you only need it to work on the Mozilla platform, you can define a getter with no corresponding setter. The best way to do it is different for each of your examples.

### In an object literal, there is a special syntax for it:

```
var XU = {
    get Cc() { return Components.classes; }
}; 
```

In your second exampe, you can use the `__defineGetter__` method to add it to either `aXU.prototype` or to `this` inside the constructor. Which way is better depends on whether the value is different for each instance of the object.

**Edit:** To help with the readability problem, you could write a function like `defineConstant` to hide the uglyness.

```
function defineConstant(obj, name, value) {
    obj.__defineGetter__(name, function() { return value; });
} 
```

Also, if you want to throw an error if you try to assign to it, you can define a setter that just throws an Error object:

```
function defineConstant(obj, name, value) {
    obj.__defineGetter__(name, function() { return value; });
    obj.__defineSetter__(name, function() {
        throw new Error(name + " is a constant");
    });
} 
```

### If all the instances have the same value:

```
function aXU() {
}

defineConstant(aXU.prototype, "Cc", Components.classes); 
```

### or, if the value depends on the object:

```
function aXU() {
    // Cc_value could be different for each instance
    var Cc_value = return Components.classes;

    defineConstant(this, "Cc", Cc_value);
} 
```

For more details, you can read the [Mozilla Developer Center documentation](https://developer.mozilla.org/En/Core_JavaScript_1.5_Guide:Creating_New_Objects:Defining_Getters_and_Setters).

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-25T13:00:58.757

**更新**：这行得通！

```
const FIXED_VALUE = 37;
FIXED_VALUE = 43;
alert(FIXED_VALUE);//alerts "37" 
```

从技术上讲，我认为答案是否定的（直到[const](https://developer.mozilla.org/En/Core_JavaScript_1.5_Reference:Statements:const)进入野外）。您可以提供包装器等，但是当一切归结为它时，您可以随时重新定义/重置变量值。

我认为你会得到的最接近的是在“类”上定义一个“常量”。

```
// Create the class
function TheClass(){
}

// Create the class constant
TheClass.THE_CONSTANT = 42;

// Create a function for TheClass to alert the constant
TheClass.prototype.alertConstant = function(){
  // You can’t access it using this.THE_CONSTANT;
  alert(TheClass.THE_CONSTANT);
}

// Alert the class constant from outside
alert(TheClass.THE_CONSTANT);

// Alert the class constant from inside
var theObject = new TheClass();
theObject.alertConstant(); 
```

但是，“类” **TheClass**本身可以在以后重新定义

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-25T13:12:33.770

如果您使用的是 Javascript 1.5（例如在 XUL 中），您可以使用`const`关键字而不是`var`声明常量。

问题是它不能是对象的属性。您可以尝试通过在函数内命名空间来限制其范围。

```
(function(){ 

const XUL_CC = Components.classes;

// Use the constant here

})() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-25T10:50:15.213

要定义一个常量属性，您可以在 defineProperty 方法中将 writable 属性设置为 false，如下所示：

**代码片段：**

```
var XU = {};

Object.defineProperty(XU, 'Cc', {
    value: 5,
    writable: false
});

XU.Cc = 345;

console.log(XU.Cc); 
```

**结果：**

```
5           # The value hasn't changed 
```

# python - 如何检查 Python 引发异常的函数的范围？

> ID：906649
> 
> 赞同：2
> 
> 时间：2009-05-25T12:58:43.237
> 
> 标签：python, debugging

我最近发现了对 Python 非常有用的“-i”标志

```
-i ：在运行脚本后进行交互检查，（也是 PYTHONINSPECT=x）
         并强制提示，即使标准输入看起来不是终端

```

这对于检查全局范围内的对象非常有用，但是如果在函数调用中引发异常并且我想检查函数的局部变量会发生什么？自然，我对首次引发异常的范围感兴趣，有什么办法可以解决吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-31T04:37:45.430

在交互式提示下，立即键入

```
>>> import pdb
>>> pdb.pm() 
```

pdb.pm() 是“事后”调试器。它会将您置于引发异常的范围内，然后您可以使用通常的 pdb 命令。

我一直用*这个*。它是标准库的一部分（不需要 ipython），不需要将调试命令编辑到源代码中。

唯一的诀窍是记住马上去做；如果您先键入任何其他命令，您将失去发生异常的范围。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-25T14:16:25.170

在 ipython 中，您可以在代码崩溃的位置检查变量，而无需修改它：

```
>>> %pdb on
>>> %run my_script.py 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-25T13:02:13.823

使用 ipython：[http ://mail.scipy.org/pipermail/ipython-user/2007-January/003985.html](http://mail.scipy.org/pipermail/ipython-user/2007-January/003985.html)

使用示例：

```
from IPython.Debugger import Tracer; debug_here = Tracer()

#... later in your code
debug_here()  # -> will open up the debugger at that point. 
```

“一旦调试器激活，您就可以使用它的所有常规命令来单步执行代码、设置断点等。有关使用详情，请参阅 Python 标准库中的 pdb 文档。”

# crystal-reports - 如何查找 Crystal Report rpt 文件的版本？

> ID：906658
> 
> 赞同：11
> 
> 时间：2009-05-25T13:00:46.727
> 
> 标签：crystal-reports, version

我有一个旧版本的 Crystal Report 文件（不幸的是，我不知道也无法轻松找出使用了哪个版本），我需要对该 RPT 文件进行更改。我想知道哪个版本是 RPT 文件，以便我可以安装正确版本的编辑器。

如果我安装全新和最新版本，当我保存 RPT 文件时，它会告诉我原始文件来自旧版本（未指定哪个），并且保存会将其升级到最新格式，因此以前版本的该应用程序将无法使用它。那里没有太多帮助。

我还检查了 Crystal Report 周围的所有内容，以找到“属性”或“信息”窗口，但没有成功。

有没有办法知道 RPT 文件属于哪个版本？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-27T00:47:34.387

在 SAP Crystal Reports 中：报表/性能信息/报表定义应显示文件格式架构

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-01-30T10:29:44.413

上面帖子中的路径显示的版本是文件的版本还是系统安装的软件的版本？该文件可能是在较低版本的 Crystal Report 工具中开发的，并且由于向上兼容性，它可以正确打开并显示该工具的版本，而不是开发它的文件的版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-14T17:45:40.513

这是通过转到报告/性能信息/报告定义的信息图片[![在此处输入图像描述](https://i.stack.imgur.com/s5p3N.png)](https://i.stack.imgur.com/s5p3N.png)

这表明它是版本 10.2

# python - 替代包含标题的innerhtml？

> ID：906660
> 
> 赞同：0
> 
> 时间：2009-05-25T13:00:59.770
> 
> 标签：python, html, css, dom, com

我正在尝试从以下页面中提取数据：

[http://www.bmreports.com/servlet/com.logica.neta.bwp_PanBMDataServlet?param1=¶m2=¶m3=¶m4=¶m5=2009-04-22¶m6=37#](http://www.bmreports.com/servlet/com.logica.neta.bwp_PanBMDataServlet?param1=&param2=&param3=&param4=&param5=2009-04-22&param6=37#)

其中，既方便又低效，将所有嵌入为 csv 文件的数据包含在标题中，设置为名为 gs_csv 的变量。

我该如何提取这个？`Document.body.innerhtml`跳过数据所在的标头，包含标头的替代方案是什么（或者更好的是，与 关联的值`gs_csv`）？

（对不起，这一切都是新手，我一直在搜索大量文档，并尝试了很多，但到目前为止没有任何效果）。

* * *

感谢 Sinan（这主要是他转录成 Python 的解决方案）。

```
import win32com.client 

import time 

import os 

import os.path

ie = Dispatch("InternetExplorer.Application") 

ie.Visible=False 

ie.Navigate("http://www.bmreports.com/servlet/com.logica.neta.bwp_PanBMDataServlet?param1=&param2=&param3=&param4=&param5=2009-04-22&param6=37#")

time.sleep(20)

webpage=ie.document.body.innerHTML

s1=ie.document.scripts(1).text 

s1=s1[s1.find("gs_csv")+8:-11]

scriptfilepath="c:\FO Share\bmreports\script.txt" 

scriptfile = open(scriptfilepath, 'wb') 

scriptfile.write(s1.replace('\n','\n')) 

scriptfile.close()

ie.quit 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-25T13:10:39.250

**未经测试：**您是否尝试查看[Document.scripts](http://msdn.microsoft.com/en-us/library/aa752604(VS.85).aspx)包含的内容？

**更新：**

出于某种原因，我很难使用 Windows Scripting Host 让它工作（但是，我不经常使用它，抱歉）。无论如何，这是有效的 Perl 源代码：

```
use strict;
use warnings;

use Win32::OLE;
$Win32::OLE::Warn = 3;

my $ie = get_ie();

$ie->{Visible} = 1;

$ie->Navigate(
    'http://www.bmreports.com/servlet/com.logica.neta.bwp_PanBMDataServlet?'
    .'param1=&param2=&param3=&param4=&param5=2009-04-22&param6=37#'
);

sleep 1 until is_ready( $ie );

my $scripts = $ie->Document->{scripts};

for my $script (in $scripts ) {
    print $script->text;
}

sub is_ready { $_[0]->{ReadyState} == 4 }

sub get_ie {
    Win32::OLE->new('InternetExplorer.Application', 
        sub { $_[0] and $_[0]->Quit },
    );
}

__END__

C:\Temp> ie > output 
```

`output`现在包含脚本标签中的所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-25T13:12:16.067

使用 ajax 获取该页面的源代码，并使用 jquery 解析响应文本（如 XML）。获取您在

我与 jquery 脱节，否则我会发布代码示例。

编辑：我假设您正在谈论在客户端获取 csv。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-25T14:02:46.867

如果这只是一个一次性脚本，那么提取这个 csv 数据就像这样简单：

```
import urllib2

response = urllib2.urlopen('http://www.bmreports.com/foo?bar?')
html = response.read()
csv = data.split('gs_csv=')[1].split('</SCRIPT>')[0]

#process csv data here 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-25T15:47:11.753

感谢 Sinan（这主要是他转录成 Python 的解决方案）。

导入 win32com.client

导入时间导入操作系统

导入 os.path

ie = Dispatch("InternetExplorer.Application") ie.Visible=False

ie.Navigate(" [http://www.bmreports.com/servlet/com.logica.neta.bwp_PanBMDataServlet?param1=¶m2=¶m3=¶m4=¶m5=2009-04-22¶m6=37#](http://www.bmreports.com/servlet/com.logica.neta.bwp_PanBMDataServlet?param1=&param2=&param3=&param4=&param5=2009-04-22&param6=37#) ")

时间.sleep(20)

网页=ie.document.body.innerHTML

s1=ie.document.scripts(1).text s1=s1[s1.find("gs_csv")+8:-11]

scriptfilepath="c:\FO 共享\bmreports\script.txt"

脚本文件 = 打开（脚本文件路径，'wb'）

scriptfile.write(s1.replace('\n','\n'))

脚本文件.close()

即退出

# c# - Windows 侦听器服务

> ID：906661
> 
> 赞同：3
> 
> 时间：2009-05-25T13:01:10.690
> 
> 标签：c#, multithreading, windows-services, tcplistener

如何在 c# 中编写一个侦听 tcp 连接并处理这些连接的 Windows 服务？问题是我想要一个比在主线程中“阻塞”更好的方法，例如

```
而（真）；

```

我可以在另一个线程上启动侦听器，但主线程需要阻止以防止应用程序退出（以及服务停止）。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-25T13:09:29.737

为什么不使用 WCF 服务？- 您可以在 Windows 服务中托管 WCF 服务....然后您可以使用 NetTcpBinding（为了通过 tcp 进行通信）所以我们的代码看起来像

```
namespace WindowsService1
{
    public partial class Service1 : ServiceBase
    {
        internal static ServiceHost myServiceHost = null;

        public Service1()
        {
            InitializeComponent();
        }

        protected override void OnStart(string[] args)
        {
            if (myServiceHost != null)
            {
                myServiceHost.Close();
            }
            myServiceHost = new ServiceHost(typeof(WcfServiceLibrary1.Service1));
            myServiceHost.Open();
        }

        protected override void OnStop()
        {
            if (myServiceHost != null)
            {
                myServiceHost.Close();
                myServiceHost = null;
            }
        }
    }
} 
```

以下是一些示例： [http](http://www.pluralsight.com/community/blogs/aaron/archive/2008/12/02/screencast-hosting-wcf-services-in-windows-services.aspx) [://www.pluralsight.com/community/blogs/aaron/archive/2008/12/02/screencast-hosting-wcf-services-in-windows-services.aspx http://msdn。 microsoft.com/en-us/library/ms733069.aspx](http://msdn.microsoft.com/en-us/library/ms733069.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-25T13:04:01.730

最好的办法是使用`ManualResetEvent`which 会阻塞，直到你发出信号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-08T16:55:20.530

如果您不使用 WCF，那么[TcpListner](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcplistener.aspx)就是要走的路。

随着您继续使用此 Windows 服务，您将需要某种类型的“心跳”来验证该服务是否仍在运行。最简单的方法是让计时器（例如，每分钟一次）更新数据库。这具有保持服务“活跃”的额外好处。

# nhibernate - NHibernate 中的获取、更新、插入和删除操作是否不需要 HQL？

> ID：906664
> 
> 赞同：0
> 
> 时间：2009-05-25T13:02:02.217
> 
> 标签：nhibernate

Get/Update/Insert/Delete 是否所有内置函数都可以开箱即用，无需编写任何 HQL？

我猜它是从映射 XML 文件中获取这些信息的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-25T13:11:48.157

是的。这些是 ISession 提供的原始操作。只有复杂查询才需要 HQL。

# c++ - 带压缩磁盘的 GetDiskFreeSpaceEx

> ID：906667
> 
> 赞同：2
> 
> 时间：2009-05-25T13:02:22.200
> 
> 标签：c++, windows, winapi, diskspace

我想获得压缩磁盘上的可用空间以将其展示给最终用户。我在 Windows 2000 及更高版本上使用 C++、MFC。Windows API 提供了该`[GetDiskFreeSpaceEx()](http://msdn.microsoft.com/en-us/library/aa364937%28VS.85%29.aspx)`功能。

但是，此函数似乎返回“未压缩”大小的数据。这给我带来了一些问题。

例如： - 磁盘大小为 100 GB - 数据大小为 90 GB - 压缩数据大小为 80 GB

用户会看到磁盘已满 90%，但实际上只有 80% 已满。

* * *

**编辑**

正如 Gleb 指出的那样，该函数正在返回好的信息。

所以这是一个新问题：有没有办法同时获得压缩大小和未压缩大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-25T13:39:28.320

该函数正确返回可用空间量。可以使用这个简单的程序来演示。

```
#include <stdio.h>
#include <windows.h>

void main() {
    ULARGE_INTEGER p1, p2, p3;
    GetDiskFreeSpaceEx(".", &p1, &p2, &p3);
    printf("%llu %llu %llu\n", p1, p2, p3);
} 
```

压缩以前未压缩的目录后，可用空间会增加。

那你在说什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-25T14:01:18.087

我认为您必须映射所有文件，使用**GetFileSize()**和**GetCompressedFileSize()**查询并总结它们。使用**GetFileAttributes()**来了解文件是否被压缩，以防整个卷只有部分被压缩，这肯定是这种情况。

> 嗯，所以这不是一个简单的操作。我想我必须实现一些机制来避免一直查询所有文件的大小。我的意思是……如果我有一个 800GB 的硬盘驱动器，可能需要很长时间才能获得所有文件大小。

真的。

也许从全面扫描（应用程序启动）开始并填充您的自定义数据结构，例如从文件名到文件数据结构/类的哈希/映射，然后使用**FindFirstChangeNotification()**轮询驱动器并相应地更新您的内部结构。

您可能还想阅读“更改日记”。我自己从未使用过它们，所以不知道它们是如何工作的，但可能值得一试。

# java - JPA：如何在运行时指定与类对应的表名？

> ID：906671
> 
> 赞同：14
> 
> 时间：2009-05-25T13:03:41.463
> 
> 标签：java, hibernate, jpa

（注意：我对 Java 非常熟悉，但对 Hibernate 或 JPA 还不是很熟悉 :)）

我想编写一个通过 JPA 与 DB2/400 数据库对话的应用程序，现在我可以获取表中的所有条目并将它们列出到 System.out（使用 MyEclipse 进行逆向工程）。我知道 @Table 注释会导致名称与类一起静态编译，但我需要能够使用在运行时提供名称和模式的表（它们的定义是相同的，但我们有很多他们）。

显然这并不容易做到，我会很感激一个提示。

我目前选择 Hibernate 作为 JPA 提供程序，因为它可以处理这些数据库表不被记录的问题。

所以，问题是，我如何在运行时告诉 JPA 的 Hibernate 实现类 A 对应于数据库表 B？

（编辑：Hibernate NamingStrategy 中覆盖的 tableName() 可能允许我解决这个内在限制，但我仍然更喜欢供应商不可知的 JPA 解决方案）

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-05-25T13:19:25.350

您需要使用配置的[XML 版本](http://docs.jboss.org/hibernate/stable/core/reference/en/html/tutorial-firstapp.html#tutorial-firstapp-mapping)而不是注释。这样您就可以在运行时动态生成 XML。

或者您可能会对[Dynamic JPA 之](http://www.dynamicjava.org/projects/dynamic-jpa)类的东西感兴趣？

我认为有必要进一步澄清这个问题的问题。

第一个问题是：可以存储实体的表集是否已知？我的意思是您不是在运行时动态创建表并且希望将实体与它们相关联。例如，这种情况要求在*编译时*知道三个表。如果是这种情况，您可以使用 JPA 继承。OpenJPA 文档详细说明了[每个类](http://openjpa.apache.org/builds/1.0.2/apache-openjpa-1.0.2/docs/manual/jpa_overview_mapping_inher.html#jpa_overview_mapping_inher_tpc)继承策略的表。

这种方法的优点是它是纯 JPA。但是它有局限性，因为表必须是已知的，并且您不能轻易更改给定对象存储在哪个表中（如果这是您的要求），就像 OO 系统中的对象通常不会更改类一样或键入。

如果您希望它是真正动态的并（基本上）在表之间移动实体，那么我不确定 JPA 是否适合您。使 JPA 工作有很多魔力，包括加载时编织（仪器）和通常一个或多个级别的缓存[。](http://www.cforcoding.com/2009/05/orms-vs-sql-jpa-story.html)更重要的是，实体管理器需要记录更改并处理托管对象的更新。据我所知，没有简单的工具可以指示实体管理器将给定的实体存储在一个表或另一个表中。

这样的移动操作将隐含地要求从一个表中删除并插入到另一个表中。如果有子实体，这将变得更加困难。请注意，这并非不可能，但这是一个不寻常的极端案例，我不确定有人会打扰。

较低级别的 SQL/JDBC 框架（例如[Ibatis](http://www.cforcoding.com/2009/06/spring-and-ibatis-tutorial.html) ）可能是更好的选择，因为它可以为您提供所需的控制。

我还考虑过在运行时动态更改或分配注释。虽然我还不确定这是否可能，但即使是我也不确定它是否一定会有所帮助。我无法想象实体管理器或缓存不会因发生这种事情而感到绝望。

我想到的另一种可能性是在运行时动态创建子类（作为匿名子类），但这仍然存在注释问题，我再次不确定如何将其添加到现有的持久性单元中。

如果您提供有关您正在做什么以及原因的更多详细信息，这可能会有所帮助。不管它是什么，我倾向于认为你需要重新考虑你在做什么或你是如何做的，或者你需要选择一种不同的持久性技术。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-06-02T16:06:20.587

You may be able to specify the table name at load time via a custom [ClassLoader](http://java.sun.com/javase/6/docs/api/java/lang/ClassLoader.html) that re-writes the `@Table` annotation on classes as they are loaded. At the moment, I am not 100% sure how you would ensure Hibernate is loading its classes via this ClassLoader.

Classes are re-written using [the ASM bytecode framework](http://asm.ow2.org/).

**Warning:** These classes are experimental.

```
public class TableClassLoader extends ClassLoader {

    private final Map<String, String> tablesByClassName;

    public TableClassLoader(Map<String, String> tablesByClassName) {
        super();
        this.tablesByClassName = tablesByClassName;
    }

    public TableClassLoader(Map<String, String> tablesByClassName, ClassLoader parent) {
        super(parent);
        this.tablesByClassName = tablesByClassName;
    }

    @Override
    public Class<?> loadClass(String name) throws ClassNotFoundException {
        if (tablesByClassName.containsKey(name)) {
            String table = tablesByClassName.get(name);
            return loadCustomizedClass(name, table);
        } else {
            return super.loadClass(name);
        }
    }

    public Class<?> loadCustomizedClass(String className, String table) throws ClassNotFoundException {
        try {
            String resourceName = getResourceName(className);
            InputStream inputStream = super.getResourceAsStream(resourceName);
            ClassReader classReader = new ClassReader(inputStream);
            ClassWriter classWriter = new ClassWriter(0);
            classReader.accept(new TableClassVisitor(classWriter, table), 0);

            byte[] classByteArray = classWriter.toByteArray();

            return super.defineClass(className, classByteArray, 0, classByteArray.length);
        } catch (IOException e) {
            throw new RuntimeException(e);
        }
    }

    private String getResourceName(String className) {
        Type type = Type.getObjectType(className);
        String internalName = type.getInternalName();
        return internalName.replaceAll("\\.", "/") + ".class";
    }

} 
```

The `TableClassLoader` relies on the `TableClassVisitor` to catch the [visitAnnotation](http://asm.ow2.org/current/doc/javadoc/user/org/objectweb/asm/ClassVisitor.html#visitAnnotation(java.lang.String,%20boolean)) method calls:

```
public class TableClassVisitor extends ClassAdapter {

    private static final String tableDesc = Type.getDescriptor(Table.class);

    private final String table;

    public TableClassVisitor(ClassVisitor visitor, String table) {
        super(visitor);
        this.table = table;
    }

    @Override
    public AnnotationVisitor visitAnnotation(String desc, boolean visible) {
        AnnotationVisitor annotationVisitor;

        if (desc.equals(tableDesc)) {
            annotationVisitor = new TableAnnotationVisitor(super.visitAnnotation(desc, visible), table);
        } else {
            annotationVisitor = super.visitAnnotation(desc, visible);
        }

        return annotationVisitor;
    }

} 
```

The `TableAnnotationVisitor` is ultimately responsible for changing the `name` field of the `@Table` annotation:

```
public class TableAnnotationVisitor extends AnnotationAdapter {

    public final String table;

    public TableAnnotationVisitor(AnnotationVisitor visitor, String table) {
        super(visitor);
        this.table = table;
    }

    @Override
    public void visit(String name, Object value) {
        if (name.equals("name")) {
            super.visit(name, table);
        } else {
            super.visit(name, value);
        }
    }

} 
```

Because I didn't happen to find an `AnnotationAdapter` class in ASM's library, here is one I made myself:

```
public class AnnotationAdapter implements AnnotationVisitor {

    private final AnnotationVisitor visitor;

    public AnnotationAdapter(AnnotationVisitor visitor) {
        this.visitor = visitor;
    }

    @Override
    public void visit(String name, Object value) {
        visitor.visit(name, value);
    }

    @Override
    public AnnotationVisitor visitAnnotation(String name, String desc) {
        return visitor.visitAnnotation(name, desc);
    }

    @Override
    public AnnotationVisitor visitArray(String name) {
        return visitor.visitArray(name);
    }

    @Override
    public void visitEnd() {
        visitor.visitEnd();
    }

    @Override
    public void visitEnum(String name, String desc, String value) {
        visitor.visitEnum(name, desc, value);
    }

} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2010-10-19T02:13:39.210

在我看来，您所追求的是[用 ORM.xml 覆盖 JPA 注释](http://docs.jboss.org/hibernate/stable/annotations/reference/en/html/xml-overriding.html#d0e3578)。

这将允许您指定注释，然后仅在它们更改的地方覆盖它们。我已经做了同样的事情来覆盖注释`schema`中的`@Table`注释，因为它在我的环境之间发生变化。

使用这种方法，您还可以覆盖单个实体上的表名。

**[更新这个答案，因为它没有很好的记录，其他人可能会觉得它有用]**

这是我的 orm.xml 文件（请注意，我**只是**覆盖架构并单独保留其他 JPA 和 Hibernate 注释，但是完全可以在此处更改表。另请注意，我在字段上而不是 Getter 上进行注释）

```
<?xml version="1.0" encoding="UTF-8"?>
<entity-mappings 
  xmlns="http://java.sun.com/xml/ns/persistence/orm"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://java.sun.com/xml/ns/persistence/orm orm_2_0.xsd"
  version="1.0">
    <package>models.jpa.eglobal</package>
    <entity class="MyEntityOne" access="FIELD">
        <table name="ENTITY_ONE" schema="MY_SCHEMA"/>
    </entity> 
    <entity class="MyEntityTwo" access="FIELD">
        <table name="ENTITY_TWO" schema="MY_SCHEMA"/>
    </entity> 
</entity-mappings> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-25T13:28:12.397

作为 XML 配置的替代方案，您可能希望使用首选的字节码操作框架动态生成带有注释的 java 类

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-28T06:07:36.510

如果您不介意将自己绑定到 Hibernate，则可以使用[https://www.hibernate.org/171.html](https://www.hibernate.org/171.html)中描述的一些方法。根据数据的复杂性，您可能会发现自己使用了很多 hibernate 注释，因为它们超出了 JPA 规范，因此付出的代价可能很小。

# sql - Android：在列中获取最高值

> ID：906684
> 
> 赞同：5
> 
> 时间：2009-05-25T13:07:16.357
> 
> 标签：sql, database, android, aggregate

我有一个指向内容的 URL，我需要获取其中一列中包含的最高值。是否有任何聚合函数可以完成此操作，还是我必须手动执行此操作？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-06-04T00:20:11.253

如果您正在查询 Android 内容提供程序，您应该能够通过传入`MAX(COLUMN_NAME)`以下的 selection 参数来实现`ContentResolver.query`：

```
getContentResolver().query(uri, projection, "MAX(COLUMN_NAME)", null, sortOrder); 
```

其中 Uri 是内容提供者的地址。这应该返回 COLUMN_NAME 中具有最高值的单行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-25T16:12:19.083

Android 的数据库使用 SQLite，所以`SELECT MAX(thecolumn) FROM TheTable`应该可以工作，就像在任何其他 SQLite 实现中一样（或者就此而言，任何其他 SQL，“ite”与否；-）。（如果你不使用`android.database`你最好指定你使用的是什么;-) *。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-21T18:39:30.347

那对我有用。

基于@Reto Meier 和@Florian von Stosch 的回复。

```
public static long getMaxId(Context context) {

    long maxId = 0;

    Cursor maxCursor = context.getContentResolver().query(
            ProviderContentContract.CONTENT_URI,
            new String[]{"MAX(" + Table._ID + ")"},
            null,
            null,
            null);

    if (maxCursor != null && maxCursor.moveToFirst()) {
        maxId = maxCursor.getInt(0);
         maxCursor.close();
    }
    return maxId;
} 
```

# php - 如何将用户添加到 sfguard

> ID：906688
> 
> 赞同：5
> 
> 时间：2009-05-25T13:10:14.603
> 
> 标签：php, symfony1, sfguard

我将[symfony](http://www.symfony-project.net) 1.2 与[sfguard 1.4.1](http://www.symfony-project.org/plugins/sfGuardPlugin)一起使用。在系统上注册新用户的最佳做法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-25T13:54:20.147

它的：

```
symfony guard:create-user <username> <password> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-05-26T06:51:34.357

您可以使用 sfDoctrineApply。该插件生成必要的模板，用于在前端创建和验证用户。它还可以向用户发送电子邮件到经过验证的帐户。必须安装 ZendMail。

# google-maps - 谷歌地图：在谷歌地图显示的可见部分放置标记

> ID：906691
> 
> 赞同：0
> 
> 时间：2009-05-25T13:11:26.847
> 
> 标签：google-maps

我想在所有缩放级别和标记覆盖所有整个谷歌地图显示的方式显示有限数量的标记（让我们取 50 个左右......）。

所以，如果我在地图上查看整个世界，它会在世界各地显示不超过一定数量的标记，如果我放大到美国，它只会在美国境内显示以前的标记数量。如果我搬到加拿大，那么地图应该只显示加拿大的标记。

**我不能 - 将制造商放在地图上有限距离的可见区域，即所有可见标记彼此之间保持一定距离。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-25T13:21:28.073

您可能想研究将点“聚类”或“捆绑”成一个。它并不完全符合您的描述，但它会有效地限制您在缩小时拥有的标记数量，并在您放大后“取消聚类”它们。

有很多方法（所有第三方 - Google API 还不支持它），您可以在这里查看一个名为 ClusterMarker 的方法：http: [//googlemapsapi.martinpearman.co.uk/articles.php ?cat_id =1](http://googlemapsapi.martinpearman.co.uk/articles.php?cat_id=1)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-25T13:22:29.913

您应该使用标记管理器！

请参阅[http://code.google.com/p/gmaps-utility-library-dev/](http://code.google.com/p/gmaps-utility-library-dev/)和[http://gmaps-utility-library.googlecode.com/svn/trunk/markermanager/](http://gmaps-utility-library.googlecode.com/svn/trunk/markermanager/)

# .net - Winforms BringToBack 选项？

> ID：906700
> 
> 赞同：1
> 
> 时间：2009-05-25T13:14:46.980
> 
> 标签：.net, winforms, back, z-order

在 winforms 中有一个函数“BringToFront”，可以将表单移动到 Z-Order 的顶部。有没有办法做相反的事情 - 将表格推到后面？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-25T13:17:41.123

采用：`Form.SendToBack()`

# c# - 如何更改 ASP.NET 中的应用程序语言？

> ID：906716
> 
> 赞同：1
> 
> 时间：2009-05-25T13:19:50.153
> 
> 标签：c#, asp.net-3.5

我正在使用 ASP.NET 3.5 开发一个应用程序，并且我已经阅读到显示应用程序的语言是导航器的语言。

有没有办法以编程方式选择应用程序的语言？例如，我想查看英文版应用程序，但我的 Internet Explorer 是西班牙文版。

语言是存储在数据库中的用户偏好，所以我需要在用户登录时更改语言。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-25T13:23:59.847

您可以使用[CultureInfo](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.aspx "文化资讯")类为您的执行环境设置文化。

```
CultureInfo ci = new CultureInfo("en-US", false);
Thread.CurrentThread.CurrentCulture = ci;
Thread.CurrentThread.CurrentUICulture = ci; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-25T13:25:55.710

您是否在问如何更改浏览器的接受语言？有关 IE 7 和 IE 8 的说明，请参阅[http://windowshelp.microsoft.com/Windows/en-US/help/7b4a0825-28e2-4929-82f6-1feac4adb6f31033.mspx](http://windowshelp.microsoft.com/Windows/en-US/help/7b4a0825-28e2-4929-82f6-1feac4adb6f31033.mspx)。您想要的部分是“添加语言到IE浏览器”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-25T13:29:37.887

您也可以在 web.config 中进行设置：

```
<configuration>
 <system.web>
  <globalization
    requestencoding="utf-8"
    responseencoding=" utf-8"
    fileencoding=" utf-8"
    culture="en-US"
    uiculture="en-US" />
 </system.web>
</configuration> 
```

或者在页面级别：

```
<%@ Page Culture="en-US" UICulture="en-US" ResponseEncoding="utf-8"%> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-25T13:34:13.103

您可以`<globalization culture="en-US" uiCulture="en-US"/>`在`<system.web>`web.config 部分中使用它。

# windows-mobile - Windows Mobile - 允许在 TextBox 中输入电子邮件

> ID：906721
> 
> 赞同：0
> 
> 时间：2009-05-25T13:21:01.227
> 
> 标签：windows-mobile

我在我的 WinMo 应用程序的表单中添加了一个文本框，我想获取一个电子邮件地址作为输入。现在如果我输入@，它只是将输入作为'a'而不是@符号。

如何在文本框中允许 @ 字符？我正在使用 Windows Mobile Professional SDK 并在 Smartphone Emulator 上进行测试。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-25T13:36:35.470

这是智能手机的“abc”模式干扰您的文本输入。它将 shift-2 视为简单的“2”键，并且正在排队一个 a、b 或 c 字母（如果您多次按下它）。

由于许多输入法是依赖于设备的（有些设备有一个 FN 键，你必须与另一个和弦，其他设备有一个弹出符号选择器的 SYM 键），你被绑定到任何设备（或者在这种情况下，模拟器) 用途。

要使用该模拟器的输入法，请按住 1 键 - 它会循环显示包括“@”字符在内的常见符号。

# php - 如何从 php 中的数据库表创建表单下拉列表？

> ID：906723
> 
> 赞同：0
> 
> 时间：2009-05-25T13:21:15.877
> 
> 标签：php, mysql, html, forms, drop-down-menu

我正在尝试编写一个函数来创建从数据库中选择的学校名称的下拉列表。创建下拉列表做得很好，但它没有在下拉列表中放置任何内容。这是代码：

```
function schoolDD($name, $selected){
   $select = '';
   if( $selected != null )
   {
      $select = $selected;
   }

     $qry = "select *   
             from   school
             order by name, id
             where display = 'Y'";

     $schools = _execQry($qry);

   $html = '<select name="'.$name.'" >';

   foreach( $schools as $s ){
      $html .= '<option value="'. $s['id'] .'"';
      if( $select == $s['name'] ){
         $html .= 'selected="selected"';
      }
      $html .= '>'. $s['name'] . '</option>';

   }
   $html .= '</select>';
   return $html;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-25T13:24:37.693

问题解决了。这是因为在查询中我在哪里之前有订单。它应该是：

```
$qry = "select *   
             from   school
             where display = 'Y'
             order by name, id"; 
```

不是：

```
 $qry = "select *   
             from   school
             order by name, id
             where display = 'Y'"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-25T13:24:51.547

看起来不错，但很难说不知道 _execQry 做了什么。

如果您添加该行

```
print_r($schools); 
```

调用 _execQry 后，您确定从数据库中检索结果吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-25T16:58:48.927

我很高兴您找到了答案，但是我将 php 和 html 像这样混合在一起。

像这样的 tsomethign 怎么样...

```
<?php

$schools = getSchools();
$selectedSchool = 'sfgsfgd';
$name = 'asdfsafd';

?>

<select name="<?= $name ?>">
<?php foreach( $schools as $s ): ?>
    <option value="<?= $s['id'] ?>"<?php if( $s['name'] == $selectedSchool ): ?> selected="selected"<?php endif; ?>><?= $s['name'] ?></option>
</select> 
```

# html - 如何在单个突出显示的行上实现多个图像按钮

> ID：906733
> 
> 赞同：0
> 
> 时间：2009-05-25T13:23:39.507
> 
> 标签：html, css, anchor

我正在制作一个用户界面，我希望每条线在滚动时都以颜色效果响应，以给定的颜色为该特定线的整个背景着色。此外，每一行都应该包含几个小符号（按钮），这些小符号（按钮）也应该响应用户的点击和翻转。

我知道使用锚标记执行此操作的唯一方法，但是一旦我使用了它，我就无法在其中嵌套另一个锚。有没有办法产生“嵌套按钮”或解决方法（最好不包括 javascript）来实现我的目标？

马拉比约

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-25T13:52:45.063

您的 CSS 文件可能包含：

```
li:hover {
   background-color: #3f3; /* whatever color you want */
   list-style: none;
} 
```

您的 HTML 文件可能只有一个项目列表：

```
<ul>
 <li><a href="alink.html"><img src="image.png" alt="mybutton"></a></li>
 <li>Line</li>
 <li>Goes</li>
 <li>Here</li>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-25T15:25:20.587

如果没有脚本，您无法使其在较旧的 IE 浏览器中工作。:(

我最终做了 Dmitri Farkov 在他的评论中提出的建议：通过脚本添加悬停行为。不过，我曾经使用过一个有趣的替代方法：[whatever:hover](http://www.xs4all.nl/~peterned/csshover.html)。

也许它会更适合你。

# c++ - C++ 是否对 POD typedef 进行值初始化？

> ID：906734
> 
> 赞同：9
> 
> 时间：2009-05-25T13:23:43.780
> 
> 标签：c++, pointers

C++ 是否对简单的[POD](https://stackoverflow.com/questions/146452/) typedef 进行值初始化？

假设

```
typedef T* Ptr; 
```

做

```
Ptr() 
```

值初始化和保证是否相等`(T*)0`？

例如

```
Ptr p = Ptr();
return Ptr(); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-05-25T13:44:25.220

确实如此。对于 type `T`，`T()`值初始化类型的“对象”`T`并产生一个右值表达式。

```
int a = int();
assert(a == 0); 
```

pod 类也一样：

```
struct A { int a; };
assert(A().a == 0); 
```

对于一些没有用户声明的构造函数的非 POD 类也是如此：

```
struct A { ~A() { } int a; };
assert(A().a == 0); 
```

由于您不能这样做`A a()`（而是创建一个函数声明），因此 boost 有一个 class [`value_initialized`](http://www.boost.org/doc/libs/1_39_0/libs/utility/value_init.htm)，可以解决这个问题，C++1x 将具有以下替代语法

```
int a{}; 
```

用标准的干巴巴的话来说，这听起来像

> 表达式 T()，其中 T 是非数组完整对象类型或（可能是 cv 限定的）void 类型的简单类型说明符 (7.1.5.2)，创建指定类型的右值，即 value -初始化

由于 typedef-name 是一个 type-name，它本身就是一个简单的类型说明符，所以它工作得很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-25T14:07:37.420

```
#include <iostream>
struct Foo {
    char bar;
    char baz;
    char foobar;
    // the struct is a POD
    //virtual void a() { bar='b'; }
};

int main() {
    Foo o1;
    Foo o2 = Foo();

    std::cout << "O1: " << (int)o1.bar <<" "<< (int)o1.baz <<" "<< (int)o1.foobar << std::endl;
    std::cout << "O2: " << (int)o2.bar <<" "<< (int)o2.baz <<" "<< (int)o2.foobar << std::endl;
    return 0;
} 
```

输出：

> O1：-27 -98 0
> 
> 氧气：0 0 0

添加 () 会将初始化程序调用传播到所有 POD 成员。取消注释虚拟方法会将输出更改为：

> O1：-44 -27 -98
> 
> 氧气：-71 -120 4

但是添加析构函数 ~Foo() 不会抑制初始化，尽管它会创建非 POD 对象（输出类似于第一个对象）。

# quartz-scheduler - 每分钟安排一次触发器，如果 作业仍在运行，则待机并等待下一个触发器

> ID：906741
> 
> 赞同：4
> 
> 时间：2009-05-25T13:25:51.310
> 
> 标签：quartz-scheduler, quartz.net

我需要安排一个触发器每分钟触发一次，如果作业仍在运行，则下一分钟触发器不应该触发，应该再等一分钟检查，如果作业完成，触发器应该触发谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-14T14:20:19.710

在 Quartz 2 中，您需要`DisallowConcurrentExecution`在工作类上使用该属性。然后确保您使用类似于`TriggerBuilder.Create().WithIdentity( "SomeTriggerKey" )`as的方式设置密钥`DisallowConcurrentExecution`来确定您的作业是否已经在运行。

```
[DisallowConcurrentExecution]
public class MyJob : IJob
{
 ...
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-26T08:04:42.240

我没有找到任何关于 monitor.enter 或类似的东西，感谢任何其他答案是作业应该实现“StatefulJob”接口。作为 StatefulJob，只要一个实例已经在运行，另一个实例就不会运行再次感谢

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-01T05:40:59.050

IStatefulJob 是这里的关键。当您参与线程时，创建自己的锁定机制可能会导致调度程序出现问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-25T15:39:12.843

如果您使用的是 Quartz.NET，您可以在 Execute 方法中执行以下操作：

```
object execution_lock = new object();

public void Execute(JobExecutionContext context) {
    if (!Monitor.TryEnter(execution_lock, 1)) {
        return,
    }

    // do work

    Monitor.Exit(execution_lock);
} 
```

我把这个从我的头顶上拉下来，也许有些名字是错误的，但这就是想法：在你执行时锁定某个对象，如果在执行时锁定是打开的，那么之前的作业仍在运行，你只需`return;`

编辑： Monitor 类位于 System.Threading 命名空间中

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-12T07:47:09.907

如果您使用的是 springquartz 集成，则可以从 MethodInvokingJobDetailFactoryBean 将“concurrent”属性指定为“false”

```
 <bean id="positionFeedFileProcessorJobDetail" class="org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean">
        <property name="targetObject" ref="xxxx" />
        <property name="targetMethod" value="xxxx" />
        <property name="concurrent" value="false" /> <!-- This will not run the job if the previous method is not yet finished -->
    </bean> 
```

# php - mysql 数据库的更新逻辑问题

> ID：906744
> 
> 赞同：0
> 
> 时间：2009-05-25T13:26:29.093
> 
> 标签：php, sql, mysql

我有以下 PHP 表单，它回发到 mysql 数据库。我的问题是更新查询似乎有效，但总是被“选中”覆盖。我想要做的是检查从数据库中获取当前值，然后如果 post 中有值，则改为获取该值。现在......为什么这不起作用？检查它是否在 _POST 中时，我是否需要一个 else 子句？如果是这种情况，我什至需要使用 $checkDeleted = ""; 来初始化变量吗？

```
<?php
error_reporting(E_ALL);
if (isset($_GET["cmd"]))
  $cmd = $_GET["cmd"]; else
if (isset($_POST["cmd"]))
  $cmd = $_POST["cmd"]; else die("Invalid URL");
if (isset($_GET["pk"])) {
    $pk = $_GET["pk"];
}
$checkDeleted = "";
$con = mysqli_connect("localhost","user","pw", "db");
$getformdata = $con->query("select ARTICLE_NO, deleted from STATUS where ARTICLE_NO = '$pk'");
while ($row = mysqli_fetch_assoc($getformdata)) {
    $ARTICLE_NO = $row['ARTICLE_NO'];
    $checkDeleted = $row['deleted'];
}
$checkboxes = (isset($_POST['checkboxes'])? $_POST['checkboxes'] : array());
if (in_array('deleted', $checkboxes)) $checkDeleted = 'checked';
if($cmd=="submitinfo") {
    if ($ARTICLE_NO == null) {
        $statusQuery = "INSERT INTO STATUS VALUES (?, ?)";
        if ($statusInfo = $con->prepare($statusQuery)) {
            $statusInfo->bind_param("ss", $pk, $checkDeleted);
            $statusInfo->execute();
            $statusInfo->close();
        } else {
            print_r($con->error);
        }
    } else if ($ARTICLE_NO == $pk) {
        $statusQuery = "UPDATE STATUS SET deleted = ? WHERE ARTICLE_NO = ?";
        if ($statusInfo = $con->prepare($statusQuery)) {
            $statusInfo->bind_param("ss", $checkDeleted, $pk);
            $statusInfo->execute();
            $statusInfo->close();
        } else {
            print_r($con->error);
        }
    }
}
if($cmd=="EditStatusData") {
    echo "<form name=\"statusForm\" action=\"test.php?pk=".$pk."\" method=\"post\" enctype=\"multipart/form-data\">
                        <input type=\"checkbox\" name=\"checkboxes[]\" value=\"deleted\" ".$checkDeleted." />
                        <label for=\"deleted\">Delete</label>
                        <input type=\"hidden\" name=\"cmd\" value=\"submitinfo\" />
                        <input name=\"Submit\" type=\"submit\" value=\"submit\" />
        </form>";
}
?> 
```

我尝试更改该行以将 checkDeleted 设置为以下内容，这没有任何区别..虽然它应该？

```
if (in_array('deleted', $checkboxes)) {
$checkDeleted = 'checked';
} else {
$checkDeleted = '';
} 
```

编辑：好的，我已经设法让它工作，但只有在更改为

$checkDeleted = in_array('deleted', $checkboxes) ? '检查'：'';

根据下面的答案，但这仍然不起作用。为了让它工作，我必须删除数据库查询，并将其替换为 submitinfo 分支中的一个，以及 EditStatusData 分支中的一个......为什么？为什么不能只有一个查询？

```
if($cmd=="submitinfo") {

$getformdata = $con->query("select ARTICLE_NO from STATUS where ARTICLE_NO = '$pk'");

while ($row = mysqli_fetch_assoc($getformdata)) {
    $ARTICLE_NO = $row['ARTICLE_NO'];
}    
    if ($ARTICLE_NO == null) { etc 
```

和

```
if($cmd=="EditStatusData") {
$getformdata = $con->query("select deleted from STATUS where ARTICLE_NO = '$pk'");

while ($row = mysqli_fetch_assoc($getformdata)) {
    $checkDeleted = $row['deleted'];
} etc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-25T16:19:37.710

this is pretty much identical to your other question

[mysql not updating from php form](https://stackoverflow.com/questions/904879/mysql-not-updating-from-php-form/905834#905834)

there is nothing wrong with the code, it is working exactly as you want

> What I want to do is get the current value from the database, and then if there is a value in post, get that instead.

**case 1: html form with no tick**

1.  read from database $checkDeleted = 'checked'
2.  if $_POST['checkboxes']['deleted'] is not set, leave $checkDeleted as is
3.  writes 'checked' to database

**case 2\. html form with tick**

1.  read from database $checkDeleted = 'checked'
2.  if $_POST['checkboxes']['deleted'] is set, change $checkDeleted = 'checked'
3.  writes 'checked' to database

so no matter if you have a tick or not, once you have changed the database value to checked then, there is no way to change it

I will assume that what you want to do is always overwrite the database value with whatever the tick box is set to, in that case

replace this line

```
 if (in_array('deleted', $checkboxes)) $checkDeleted = 'checked'; 
```

with this

```
 $checkDeleted = in_array('deleted', $checkboxes) ? 'checked' : ''; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-25T14:09:54.233

这仅在您获取数据时才有效：

```
$getformdata = $con->query("select ARTICLE_NO, deleted from STATUS where ARTICLE_NO = '$pk'"); 
```

如果您的请求是 POST，则在您的代码中未设置 $pk。您还应该在这一行中转义 $pk 变量，因为用户可以将他们喜欢的任何数据放入 $_GET['pk'] 中，这可能会破坏您的 SQL 查询。

# wpf - 如何从我的代码隐藏构造函数中访问 DependencyProperty 值？

> ID：906745
> 
> 赞同：5
> 
> 时间：2009-05-25T13:26:42.540
> 
> 标签：wpf, xaml, dependency-properties

我有一个名为**SmartForm的 UserControl ，它有一个名为****Status**的 DependencyProperty 。

在我的 Window1.xaml 中，我有元素`<local:SmartForm Status="Ready"/>`.

然后我会认为在 SmartForm 对象的构造函数中， Status 将等于 "Ready" 但它等于*null*。

**那么为什么SmartForm 的构造函数中**Status 属性的值为 NULL呢？****

 **如果不在 UserControl 构造函数中，**那么我什么时候可以访问 value**呢？

**Window1.xaml：**

```
<Window x:Class="TestPropertyDefine23282.Window1"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:TestPropertyDefine23282"
    Title="Window1" Height="300" Width="300">
    <Grid>
        <local:SmartForm Status="Ready"/>
    </Grid>
</Window> 
```

**SmartForm.xaml：**

```
<UserControl x:Class="TestPropertyDefine23282.SmartForm"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Height="300" Width="300">
    <Grid>
        <TextBlock x:Name="TestingMessage"/>
    </Grid>
</UserControl> 
```

**SmartForm.xaml.cs：**

```
using System.Windows;
using System.Windows.Controls;

namespace TestPropertyDefine23282
{
    public partial class SmartForm : UserControl
    {
        public SmartForm()
        {
            InitializeComponent();

            TestingMessage.Text = Status; //WHY IS STATUS NOT YET SET HERE?

        }

        #region DependencyProperty: Status
        public string Status
        {
            get
            {
                return (string)GetValue(StatusProperty);
            }
            set
            {
                SetValue(StatusProperty, value);
            }
        }

        public static readonly DependencyProperty StatusProperty =
            DependencyProperty.Register("Status", typeof(string), typeof(SmartForm),
            new FrameworkPropertyMetadata());
        #endregion

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-25T14:57:17.303

```
<local:SmartForm Status="Ready"/> 
```

转换为：

```
SmartForm f = new SmartForm();
f.Status = Status.Ready; 
```

调用 setter 时，您将有权访问该值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-25T14:30:21.227

您可以将该测试消息设置为：

```
...
    public static readonly DependencyProperty StatusProperty = 
        DependencyProperty.Register("Status", typeof(string), typeof(SmartForm),
        new FrameworkPropertyMetadata("", FrameworkPropertyMetadataOptions.None,
            new PropertyChangedCallback(OnStatusChanged)));

    public static void OnStatusChanged(DependencyObject d, DependencyPropertyChangedEventArgs e) {
        ((SmartForm)d).TestingMessage.Text = e.NewValue.ToString();
    }
... 
```

或者作为：

```
<UserControl 
x:Class="TestPropertyDefine23282.SmartForm"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:local="clr-namespace:TestPropertyDefine23282"
Height="300" Width="300"
>
<Grid>
    <TextBlock
        x:Name="TestingMessage"
        Text="{Binding Path=Status, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type local:SmartForm}}}"
        />
</Grid>
</UserControl> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-16T15:45:50.167

Szymon Rozga 很好地解释了这个问题。您在设置参数之前但在初始化构造函数之后检查参数。

一个好的解决方案是使用加载的事件，如下所示：

（未经测试）

```
 public SmartForm()
    {
        InitializeComponent();

        Loaded += (sender, args) =>
        {
            TestingMessage.Text = Status; 
        };
    } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-05-26T06:37:05.757

这是一种第三类，但你为什么需要这个二传手呢？

```
<UserControl x:Class="TestPropertyDefine23282.SmartForm"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    x:Name="Control"
    Height="300" Width="300">
    <Grid>
        <TextBlock Text="{Binding Path=Status, ElementName=Control}" />
    </Grid>
</UserControl> 
```

# asp.net-mvc - HttpUtility.UrlEncoded URL 段的错误请求 400

> ID：906754
> 
> 赞同：2
> 
> 时间：2009-05-25T13:30:15.950
> 
> 标签：asp.net-mvc, model-view-controller

因此，如果我的应用程序 MVC url 中有 url 编码段，IIS 会抛出 BAD REQUEST 400。

例如 [http://u.lasoo.com.au/Offer/](http://u.lasoo.com.au/Offer/) *9289--750W-Generic-ATX12V-Power-Supply-%252449dot99/6355

<--- '*' 和 '%' 导致了这个错误。

请注意，[http](http://u.lasoo.com.au/Offer/The-Giant-Good-As-Gone-7-Day-Sale/6354) ://u.lasoo.com.au/Offer/The-Giant-Good-As-Gone-7-Day-Sale/6354工作正常。

将任意字符串转换为可接受的 MVC URL 段的正确方法是什么？

更新： URl 段应该类似于原始字符串。Base64 编码完全转换了字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-07-16T10:00:02.997

您可以将其作为 get 参数传递，而不是在 url 中传递信息。像这样：

```
http://u.lasoo.com.au/Offer/?id=*9289--750W-Generic-ATX12V-Power-Supply-%252449dot99/6355 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-25T19:44:32.283

你试过UrlEncode吗？[MSDN](http://msdn.microsoft.com/en-us/library/zttxte6w.aspx)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2010-09-06T13:43:48.783

尝试使用字符串替换来删除或替换符号“:”、“%”、“*”、“/” - 文件夹名称中的任何非法符号。他们似乎把所有事情都搞砸了，并且似乎是 URL 路由系统的设计弱点。

# asp.net-mvc - ASP.NET MVC Ajax - 是否可以使用键盘输入执行 -GENERATED- Ajax 链接？

> ID：906761
> 
> 赞同：0
> 
> 时间：2009-05-25T13:33:25.790
> 
> 标签：asp.net-mvc, ajax, keyboard-shortcuts, accessibility, actionlink

**当用户按下键盘上的键时，是否有人能够执行生成的 Ajax.ActionLink？**（这是可访问性所必需的）

***注意：我正在使用 ASP.NET MVC + Microsoft Js 库（...Ajax.js / ...MvcAjax.js）+ jQuery***

用于捕获按键的 Javascript (IE + Firefox)

```
$(document).keypress(function(event) {
    if(event.keyCode == 27) {
        //execution here
        var a = document.getElementById('linkid');
    }
}); 
```

由 ASP.NET MVC ( *Ajax.ActionLink()* )生成的 Html

```
<a id="linkid" href="/controller/action" onclick="
Sys.Mvc.AsyncHyperlink.handleClick(this, new Sys.UI.DomEvent(event), 
{ insertionMode: Sys.Mvc.InsertionMode.replace, 
updateTargetId: 'SomeDivId' });
">LinkText</a> 
```

* * *

*以下不是我要找的，这不起作用！*

```
$(document).keypress(function(event) {
    if(event.keyCode == 27) {
        var a = document.getElementById('linkid');
        a.onclick();           //doesn't exist in Firefox
        a.click();             //doesn't "work" in Firefox (reference to "this" [a] is needed .NET MVC javascript)
        a["onclick"]();        //same as .onclick()
        a["click"]();          //same as .click()

        //or even:
        a.onclick.apply(a);    //doesn't exist in Firefox
        a.click.apply(a);      //Somehow keeps "this" reference, but throws Sys.ArgumentUndefinedException
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-25T13:39:28.553

你试过使用 jQuery 的触发机制吗？

```
$(document).keypress( function(e) {
    if (e.keyCode == 27) {
       $(this).trigger('click');
    }
} 
```

如果做不到这一点，您可以只调用 href，它将执行完整的回发，但如果编写该操作以处理 AJAX 和非 AJAX 请求，则应该完成所需的操作。

```
$(document).keypress( function(e) {
    if (e.keyCode == 27) {
       location.href = $(this).attr('href');
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-04-11T16:13:22.893

请试试这个：

```
 var a = document.getElementById('linkid');
        $(a).trigger('click'); 
```

# objective-c - 自定义 UIView 的事件

> ID：906762
> 
> 赞同：7
> 
> 时间：2009-05-25T13:33:29.080
> 
> 标签：objective-c, iphone

为我的 UIView 子类注册事件的最佳方法是什么，以便我可以将它们连接到界面生成器中的 IBAction-s？

目前，我刚刚将一个标准 UIView 拖放到我的主视图上，并且我已将类设置为“RadioDial”（我的自定义类）。这可以很好地显示视图，但我不知道如何从中获取事件。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-25T13:52:18.217

请澄清：您的意思是您希望 Interface Builder 提供您的视图控制器来连接您的视图子类将发出的自定义事件（很像 Button 控件允许您连接 Touch Inside 等）？

如果您需要这种类型的功能，您将需要结合协议在您的视图上使用通用的“委托”属性。

```
@protocol RadioDialDelegate
-(void)dialValueChanged:(id)sender
@end

@interface RadioDial
{
    id<RadioDialDelegate> radioDelegate;
}
@property (nonatomic, assign) IBOutlet id<RadioDialDelegate> radioDelegate; 
```

这将允许控制器连接到视图（假设它实现了 RadioDialDelegate）并接收来自视图的任何事件。或者，您可以使用无类型委托，并在您的视图代码中，使用后期绑定调用：

```
if([radioDelegate respondsToSelector:@selector(dialValueChanged:)]) {
    [radioDelegate dialValueChanged:self];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-25T13:47:56.523

在您的视图控制器中创建一个方法（如果没有别的，您的项目中应该有一个 RootViewController）。假设你的方法是

```
 -(void) buttonClicked { code code code } 
```

然后在控制器的头文件（例如 RootViewController.h）中输入：

```
 -(IBAction) buttonClicked; 
```

在IB中，您右键单击您的按钮/无线电拨号/其他。您将看到一个事件列表，您可以从您希望控制器接收的事件的连接器拖动到 IB 中代表控制器的对象（可能是 First Responder）。这取决于您的 IB 结构是如何设置的，但应该很简单。

另一种选择是学习如何以编程方式创建 UIView，暂时忘记 IB。关于是一开始就学习使用 IB 更好，还是学习如何在代码中做所有事情并保存 IB 以备后用，意见存在分歧。无论如何，有必要在某个时候学习两种设置界面的方法。

# iphone - 在 iPhone 上绘制 Unicode 字符

> ID：906767
> 
> 赞同：8
> 
> 时间：2009-05-25T13:34:40.997
> 
> 标签：iphone, unicode, text, fonts, drawing

为什么很难弄清楚如何在 iPhone 上绘制 Unicode 字符，沿途导出简单的字体指标，例如每个图像字形在所选字体中的宽度？

看起来很容易使用`NSLayoutManager`，但该 API 显然在手机上不可用。人们这样做的方式似乎是使用私有 API，`CGFontGetGlyphsForUnichars`这不会让您通过 Apple 看门人进入 App Store。

任何人都可以指向我显示如何执行此操作的文档吗？我掉头发很快。

霍华德

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-25T14:37:49.230

我认为排除`CGFontGetGlyphsForUnichars`
是疏忽而不是故意的举动，但是我并没有
将农场押在上面。所以我改为使用

`[NSString drawAtPoint:withFont:];`（在 UIStringDrawing.h 中）

和

`[NSString sizeWithFont];`

这还具有对
字体中缺少的字符执行体面替换的优势，而这
`CGContextShowGlyphs`是无法做到的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-16T11:16:09.623

如果您想绘制 unicode 而不是`CGContextShowGlyphsAtPositions`. 它也比`[NSString drawAtPoint:withFont:]`您需要自定义绘图更好。这是一个完整的例子：

```
CTLineRef line = CTLineCreateWithAttributedString((CFAttributedStringRef)attributedString);
CFArrayRef runArray = CTLineGetGlyphRuns(line);

//in more complicated cases make loop on runArray
//here I assumed this array has only 1 CTRunRef within
const CTRunRef run = (CTRunRef)CFArrayGetValueAtIndex(runArray, 0);

//do not use CTFontCreateWithName, otherwise you won't see e.g. chinese characters
const CTFontRef font = CFDictionaryGetValue(CTRunGetAttributes(run), kCTFontAttributeName);

CFIndex glyphCount = CTRunGetGlyphCount(run);
CGGlyph glyphs[glyphCount];
CGPoint glyphPositions[glyphCount];

CTRunGetGlyphs(run, CFRangeMake(0, 0), glyphs);
//you can modify positions further
CTRunGetPositions(run, CFRangeMake(0, 0), glyphPositions);

CTFontDrawGlyphs(font, glyphs, glyphPositions, glyphCount, context);
CFRelease(line); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-08-02T02:29:45.247

我已经为私有函数做了一个非常合适的替代品。在这里阅读：http: [//thoughts.codemelody.com/2009/07/a-replacement-for-cgfontgetglyphsforunichars/](http://thoughts.codemelody.com/2009/07/a-replacement-for-cgfontgetglyphsforunichars/)

# iis-7 - 全局 asax application_start 应用程序 begin_request 方法？

> ID：906772
> 
> 赞同：2
> 
> 时间：2009-05-25T13:36:15.457
> 
> 标签：iis-7, global-asax, httpapplication

我有个问题。在 IIS 7.0 从经典管道模式迁移到集成管道模式时，我们遇到了问题：

> “/”应用程序中的服务器错误。
> 
> 请求在此上下文中不可用...

我们在这个问题上找到了解决方案

```
mvolo.com/blogs/serverside/archive/2007/11/10/Integrated-mode-Request-is-not-available-in-this-context-in-Application_5F00_Start.aspx 
```

作为解决方案，在 global.asax 中，我必须将 application_start 事件转发给**Application_BeginRequest**事件。

```
void Application_Start(object sender, EventArgs e) { // sender has type 'System.Web.HttpApplicationFactory' }

Application_BeginRequest(Object source, EventArgs e) | {

// sender has type 'System.Web.HttpApplication' } 
```

或者另一种解决方案是， Application_Start 事件可以在**Application_BeginRequest**之后开始。

有什么建议么 ？我没有选择“经典模式”之类的选项

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-25T13:51:16.593

将代码移至`Application_BeginRequest`或`Session_Start`。无论如何，您都不应该使用该`Request`对象。`Application_Start`

该`Request`对象包含特定于一页请求的信息。`Application_Start`在事件中对这些信息做任何事情都没有任何意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-25T13:37:24.970

因此，将您的应用程序池模式更改为经典。

# algorithm - 使用遗传算法进行稀疏参数选择

> ID：906777
> 
> 赞同：1
> 
> 时间：2009-05-25T13:37:41.023
> 
> 标签：algorithm, genetic-algorithm, data-mining

我面临一个参数选择问题，我想使用遗传算法 (GA) 来解决这个问题。我应该从 3000 个可能的参数中选择不超过 4 个参数。使用二进制染色体表示似乎是一种自然的选择。评估函数惩罚过多的“选择”属性，如果属性的数量可以接受，则评估选择。

问题是在这些稀疏的条件下，遗传算法几乎无法改善人口。平均适应度成本和“最差”个体的适应度都不会在几代人中得到改善。我所看到的只是最好个人的分数略有（甚至很小）的提高，我想这是随机抽样的结果。

使用参数索引对问题进行编码也不起作用。这很可能是因为染色体是有方向的，而选择问题不是（即染色体 [1, 2, 3, 4]; [4, 3, 2, 1]; [3, 2, 4, 1] 等相同）

你会建议什么问题表示？

PS 如果这很重要，我使用[PyEvolve](http://pyevolve.sourceforge.net/)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-26T04:17:47.217

我对 PyEvolve 不熟悉，但从我对遗传算法的记忆中，你关心 4 个步骤，

1.  染色体评估（你可能已经知道了）
2.  染色体初始化
3.  染色体交叉
4.  染色体突变

我认为你可以用列表来做到这一点。您需要重载一些运算符，但看起来 PyEvolve[可以让您这样做](http://pyevolve.sourceforge.net/getstarted.html#extending-pyevolve) 一个简单的事情是保留列表表示，只需在返回染色体之前对它们进行数字排序。

我需要更多地了解您的问题，但这是我的建议。由于您有可变数量的参数，因此您需要为染色体中的参数数量提出某种概率分布。我会在这里假设 1,2,3,4 是一个统一的随机数，但如果你更喜欢它，你可以尝试其他的东西。我将把这个分布称为 P_n。

2.  初始化。用（至少）3000 条染色体播种你的种群。调用这些 c_1,...,c_3000。从 P_n 画出 n_j。将 j 放入 c_j。从其余参数中选择具有均匀随机分布的剩余 n_j - 1 个参数。
3.  交叉。假设我们有两条染色体。C_1 和 C_2。我们将创建（并返回）染色体 C_3。从 {n_1, n_2} 中选择 n_3，每个概率为 1/2。现在将 C_1 和 C_2 的参数放在一个列表中（并且它们是唯一的，因此如果C_1 和 C_2*都*包含参数 1，则它只在列表中一次）。从联合列表中抽取n_3个参数，放入染色体C_3。
4.  突变。给定染色体 C_1，从 P_n 中画出 n_1*。如果 n_1* < n_1，则从 C_1 中随机删除元素，直到有 n_1* 个元素。如果 n_1* = n_1 从 C_1 中随机选择 1 个元素，并将其替换为从不在 C_1 中的参数中随机选择的参数。如果 n_1* > n_1 随机添加元素到 C_1 直到它的大小为 n_1*。

现在，有很多方法可以解决这个问题，所以做对你的问题最有意义的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-26T04:22:50.650

由于参数数量的限制，我认为奇异值分解（[http://en.wikipedia.org/wiki/Singular_value_decomposition](http://en.wikipedia.org/wiki/Singular_value_decomposition)）在这里可能更合适。

# visual-studio - 使用库的官方二进制文件，而不会丢失按需加载源的选项

> ID：906778
> 
> 赞同：2
> 
> 时间：2009-05-25T13:38:25.967
> 
> 标签：visual-studio, linker, binary

在 Visual Studio (2005/2008) 项目中，我想使用开源库。我想链接到二进制文件，以便我不负责正确构建，并且可以将这些二进制文件检入源代码控制服务器 (SVN)。

到目前为止一切都很好，但是如果我想调试开源库或想查看一个类实现，我将不得不将项目的源代码添加到我的解决方案中，而不是将我的项目链接到源而不是二进制文件。

是否可以告诉 Visual Studio 链接二进制库的源位置，以便“转到定义”和调试等工作正常？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-25T13:49:01.543

当然，如果您拥有 pdb 符号，它的所有功能都已为您完成 - 例如，查看 MFC，您可以获得二进制文件，但可以通过源代码进行调试。

如果您没有符号，那么它会复杂得多，当您通过代码进行调试时，它可能会要求您向它显示源代码行，您只需要为它找到它们（通常路径是一样，所以很容易）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-25T14:05:38.423

有多种方法可以实现这一目标。

1.  像 gbjbaanb 建议你可以使用 pdb 符号。它适用于托管的非托管代码。

2.  如果您使用的是 .NET，则可以使用[Reflector](http://www.red-gate.com/products/reflector/)进行调试。Oran Dennison 编写[了如何使用 Reflector 和 Visual Studio 进行调试](http://orand.blogspot.com/2006/10/debugging-with-reflector-and-visual.html)。我最喜欢的工具之一是[TestDriven.NET](http://www.testdriven.net/)。该工具的作者 Jamie Cansale 还在博客中介绍了如何在拥有 TestDriven.NET 时[使用 Reflector 进行调试。](http://weblogs.asp.net/nunitaddin/archive/2006/11/05/Debug-With-Reflector.aspx)在他的文章中，Jamie 有一个[截屏](http://www.testdriven.net/screencasts/ReflectorDebugging.html)链接，他在其中演示了如何逐步进行操作。

3.  最后，如果您使用像 TortoiseSVN 这样的 SVN 客户端，您可以在签入时添加文件/目录。更多详细信息[如何](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-ignore.html)使用 TortoiseSVN 忽略文件和目录。

# hibernate - 如何使用 iBATIS 实现审计拦截器？

> ID：906780
> 
> 赞同：0
> 
> 时间：2009-05-25T13:39:22.627
> 
> 标签：hibernate, ibatis, audit, interceptor

我想记录数据库中的所有更改以进行审计，使用名为 AuditEvent 的表存储修改后的行 ID（主键）、表名、列名、先前值、新值、更改日期（时间戳）、操作类型（插入/更新/删除）和进行更改的用户的名称。

我正在使用 SQL Server 2005，但我不想使用触发器，因为由于我使用连接池，因此很难找到当前用户。

基于 Interceptor 的 Hibernate 解决方案非常简单。使用 iBATIS / iBATOR 时如何做类似的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-07-10T15:07:10.943

如果您使用的是 spring，则可以使用 SqlMapClientDaoSupport 编写模板 Dao 对象，这些对象将审计与您正在使用的任何事务支持结合起来。如果没有，有一个 iBatis Doa 模板选项，iBatis DAO。那已经贬值了，所以你可能会在 Spring 上过得更好。

# iphone - 在 2D 空间中设置“恒等变换”的等价物是什么？

> ID：906783
> 
> 赞同：0
> 
> 时间：2009-05-25T13:39:34.327
> 
> 标签：iphone, cocoa-touch, uikit, core-animation

对于 3D 空间，我使用：

```
self.layer.transform = CATransform3DIdentity; 
```

如果我只需要 2d 空间并想要分配恒等变换，这里对应的是什么？我知道有什么东西，但我再也找不到了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-25T13:44:53.660

检查[**这个问题**](https://stackoverflow.com/questions/567829/catransform3d-vs-cgaffinetransform)以**获得对 CATransform3D 和 CGAffinetransform**（您需要的那个）的一个很好的解释。

# java - 我可以将 SessionBean 注入 Java EE AroundInvoke-Interceptor 吗？

> ID：906786
> 
> 赞同：6
> 
> 时间：2009-05-25T13:40:39.067
> 
> 标签：java, jboss, dependency-injection, jakarta-ee, interceptor

我有一个带模块的 EAR：

*   foo-api.jar
*   foo-impl.jar
*   拦截器.jar

在 foo-api 中有：

```
@Local
FooService // (interface of a local stateless session bean) 
```

在 foo-impl 中有：

```
@Stateless
FooServiceImpl implements FooService //(implementation of the foo service) 
```

在interceptor.jar 我想要

```
public class BazInterceptor {

  @EJB
  private FooService foo;

  @AroundInvoke
  public Object intercept( final InvocationContext i) throws Exception {
    // do someting with foo service
    return i.proceed();
  } 
```

问题是：

兼容 Java EE 5 的应用服务器（例如 JBoss 5）会注入拦截器吗？如果不是，那么访问会话 bean 的好策略是什么？

考虑：

*   部署顺序/竞争条件

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2010-11-20T15:07:35.340

是的，注入应该发生在拦截器中，例如在[Java EE 5 平台简介](http://java.sun.com/developer/technicalArticles/J2EE/intro_ee5/)文章中提到的（粗体是我的）：

> ### 通过依赖注入更轻松地访问资源
> 
> 依赖注入是一种模式，其中对象的依赖由该对象外部的实体自动提供。对象不需要明确地请求这些资源，例如，通过在命名服务中查找它们。在 Java EE 5 平台中，依赖注入可以应用于组件所需的所有资源，从而有效地将资源的创建和查找隐藏在应用程序代码中。依赖注入可以应用于整个 Java EE 5 技术——在 EJB 软件容器、Web 容器和客户端中。
> 
> 为了请求注入资源，组件使用`@Resource` 注解，或者在某些专用资源的情况下，使用`@EJB`和 `@WebServiceRef`注解。以下是可以注入的许多资源中的一些：
> 
> *   `SessionContext`目的
> *   `DataSources`目的
> *   `UserTransaction`
> *   `EntityManager`界面
> *   `TimerService`界面
> *   **其他企业 bean**
> *   网页服务
> *   消息队列和主题
> *   资源适配器的连接工厂
> *   环境条目（例如，字符串、整数等）
> 
> 任何组件类都可以请求资源注入，即生命周期由容器管理的任何类。在 EJB 软件容器中，支持注入的组件包括：
> 
> *   EJB 技术组件
> *   **拦截器**
> *   Java API for XML Web Services (JAX-WS) 和 Java API for XML-based RPC (JAX-RPC) 的消息处理程序
> 
> 在 web 容器中，支持注入的组件如下：
> 
> *   Servlet、Servlet 过滤器、事件监听器
> *   标签处理程序、标签库事件监听器
> *   托管豆
> 
> 在客户端容器中，**主** 类和`login`回调处理程序组件支持注入。

另请参阅JBoss **EJB 3.0 教程的**[EJB 拦截器](http://docs.jboss.org/ejb3/app-server/tutorial/interceptor/interceptor.html)部分：

 **> 就像 bean 类一样，拦截器可以成为依赖注入的目标。其工作方式的格式是相同的，并且注入在与拦截器绑定到的 bean 相同的 ENC 上工作。
> 
> ...
> 
> 请记住，拦截器遵循与它们绑定的 bean 相同的生命周期。拦截器在创建 bean 实例的同时创建，依赖注入发生在第一个业务方法被调用之前。

### 资源

*   [Java EE 5 平台简介](http://java.sun.com/developer/technicalArticles/J2EE/intro_ee5/)
*   EJB 3.0 教程
    *   [EJB 拦截器](http://docs.jboss.org/ejb3/app-server/tutorial/interceptor/interceptor.html)（参见**注入**部分）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-09-11T15:08:00.663

我的经验表明注入只能发生在托管类中：EJB（实体、会话或消息）和 Servlet。

# c# - 在异常期间捕获原始 HTTP POST 数据

> ID：906788
> 
> 赞同：7
> 
> 时间：2009-05-25T13:41:42.043
> 
> 标签：c#, asp.net, wcf, elmah, error-reporting

我有一个托管在 IIS/ASP.NET 中的 WCF 服务，它接受序列化对象的 HTTP Post（*而不是表单 post*）。

如果客户端发送格式错误的请求（例如，它们没有正确序列化对象），我想记录发送的消息。

我们已经在使用 ELMAH 来捕获未处理的异常，因此简单地附加发布数据将是最简单的选择。

我可以在异常期间获取当前的 HttpContext，但这仅包含 HTTP 标头信息。

我的问题是：有什么方法可以捕获原始的 HTTP POST 请求正文吗？或者，失败了 - 捕获导致错误的输入的更好方法（没有反向代理）？

编辑：只是为了澄清，始终运行数据包级捕获并不适合。我正在寻找一个可以部署到生产服务器的解决方案，该解决方案将使客户端超出我们的控制或监控能力。

编辑#2：建议访问 Request.InputStream - 如果您在 WCF 从流中读取请求后尝试读取，这将不起作用。

一个示例代码，看看我是如何尝试使用它的。

```
 StringBuilder log = new StringBuilder();

        var request = HttpContext.Current.Request;

        if (request.InputStream != null)
        {
            log.AppendLine(string.Format("request.InputStream.Position = \"{0}\"", request.InputStream.Position));
            if (request.InputStream.Position != 0)
            {
                request.InputStream.Seek(0, System.IO.SeekOrigin.Begin);
            }

            using (StreamReader sr = new StreamReader(request.InputStream))
            {
                log.AppendLine(string.Format("Original Input: \"{0}\"", sr.ReadToEnd()));
            }
        }
        else
        {
            log.AppendLine("request.Inputstream = null");
        }

        log.ToString(); 
```

log.ToString() 的输出是：

```
    request.InputStream.Position = "0"
    原始输入：“”

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-25T17:04:07.717

当它为您提供服务时，请求已被处理，您无法使用。

但是...您可以附加一个[消息检查器](http://weblogs.asp.net/paolopia/archive/2007/08/23/writing-a-wcf-message-inspector.aspx)。消息检查器允许您在消息到达您的操作实现之前对其进行处理。您可以创建消息的缓冲副本，并将其复制到 OperationContext.Current。

当然是丑陋的 hack，这将意味着内存开销，因为现在每个请求都有两个消息副本浮动。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-05-25T13:56:28.690

你看过 System.Web.Request.InputStream 属性吗？它应该有你想要的。

如何“倒带” InputStream 属性。

```
 if (Request.InputStream.Position != 0)
    {
        Request.InputStream.Seek(0, System.IO.SeekOrigin.Begin);
    } 
```

您应该研究的另一个选项是在 BeginRequest 事件上使用 HTTPModule 捕获此信息。数据应该在 BeginRequest 事件中存在，因为我不相信 WCF 会在 PostAuthenticateEvent 之后接收请求。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-03T12:46:20.277

在 ASP.NET（IIS 下的 ASP Web 服务）下，以下代码有帮助：

```
if (request.InputStream.Position != 0)
{
  request.InputStream.Seek(0, System.IO.SeekOrigin.Begin);
} 
```

WCF 可能不同（即在读取后 Dispose InputStream）

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2009-05-25T13:45:16.280

使用提琴手。免于 MS。效果很好。

# actionscript-3 - 如何将 bytearray 转换为 image 或 image 转换为 bytearray ？

> ID：906791
> 
> 赞同：6
> 
> 时间：2009-05-25T13:43:06.597
> 
> 标签：actionscript-3, apache-flex, flex3

如何将 bytearray 值分配给面板背景图像。如果有人有想法或经验请帮助我克服这个问题。简要经验：

我有面板控制，想加载从 web 服务获取的图像作为背景图像。所以我使用了 setstyle() 但它不接受该图像。那么如何将该图像添加到我的面板背景图像中。请在此处告诉我您的想法。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2010-05-16T20:13:15.183

在 Flex 3 或更高版本中，您只需执行以下操作：

```
 yourImage.source = yourByteArray; 
```

问候！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-25T15:55:42.250

嗯，我想，因为它是一个图像，你有它在一个 BitmapData，让我们说“myBmp”......然后使用以下从 BitmapData 中提取所有数据：

```
var bytes:ByteArray = myBmp.getPixels(myBmp.rect); 
```

以及以下内容：

```
myBmp.setPixels(myBmp.rect, bytes); 
```

请注意，只有原始的 32 位像素数据存储在 ByteArray 中，没有压缩，也没有原始图像的尺寸。

对于压缩，您应该参考 corelib，正如 ozke 所说...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-25T13:54:20.910

对于 AS3，您可以使用 adobe corelib。检查本教程... [http://ntt.cc/2009/01/09/as3corelib-tutorialhow-to-use-jpegencoder-and-pngencoder-class-in-flex.html](http://ntt.cc/2009/01/09/as3corelib-tutorialhow-to-use-jpegencoder-and-pngencoder-class-in-flex.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-25T17:44:31.637

使用 adobe 的 JPGEncoder (com.adobe.images.JPGEncoder) 类和 ByteArray 几乎是您所需要的。将图像转换为字节数组（假设 CAPS 是您需要填写的变量）：

```
// -- first draw (copy) the image's bitmap data
var image:DisplayObject = YOUR_IMAGE;
var src:BitmapData = new BitmapData(image.width, image.height);
src.draw(image);

// -- encode the jpg 
var quality:int = 75;
var jpg:JPGEncoder = new JPGEncoder(quality);
var byteArray:ByteArray = jpg.encode(src); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-05T20:47:47.473

我使用 flash.display.Loader() 将图像加载到数组中。它有一个 Complete 事件，在加载图像后触发。然后我将图像绘制到一个位图上，我将其设置为可以放置在面板中的图像数据。希望你能自此好运。

```
public static function updateImage(img:Image, matrix:Matrix,
                                   pageDTO:PageDTO, bitmapData:BitmapData):void {
    var loader:flash.display.Loader = new flash.display.Loader();
    loader.contentLoaderInfo.addEventListener(Event.COMPLETE, function (e:Event) : void {
        bitmapData.draw(loader.content, matrix);
        pageViewer.data = new Bitmap(bitmapData);
    });
    loader.loadBytes(pageDTO.thumbnail);
}

<mx:Panel>
    <mx:Image id="pageViewer"/>
</mx:Panel> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-22T04:45:54.220

我有同样的问题。作为一种解决方法，我创建了嵌套在主画布内的子画布，并将图像添加到子画布后面的主画布中。在子画布上绘制的任何内容都将出现在图像的顶部。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-02-22T05:50:28.857

只需使用 loadBytes 函数将其加载到 Loader 实例中。

```
var ldr:Loader = new Loader(); 
ldr.loadBytes(myByteArray); 
addChild(ldr); 
```

# django - 通过检查 OpenStreetMap 来避免图形验证码

> ID：906799
> 
> 赞同：-2
> 
> 时间：2009-05-25T13:46:10.943
> 
> 标签：django, geocoding, captcha, openstreetmap

我正在为一个拉力赛网站编写订阅应用程序。由于订阅不需要事先注册，因此验证码应该很有用。

订阅是基于团队的。一个团队包括 1 到 3 人。必须为每个人提供一个邮寄地址。

现在我想知道，检查城市是否存在以及提供的街道是否在提供的城市中是否有意义。或者它是否脆弱，即订户使用像 st 之类的缩写。而是在街上......

基于地理的验证码应用程序是否已经存在？

**编辑：**

我并不是要建立一个防弹的验证码系统。这是对网站所有者的暗示

*   来自不在目标群体中的国家/地区的地址：标记为需要审核。
*   来自同一个城镇的几个订阅：标记为需要审查。（这里当然不需要地理编码）
*   ...（你有想法吗？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-25T14:07:34.877

验证码的想法是提供某种软件难以解决的挑战。查找有效地址并不是一件难事，因此最终很难证明发帖人确实是人。如果您真的想避免图形验证码，也许您应该研究一些[不可见的验证码](http://www.google.se/search?q=invisible+captcha)方法？

# delphi - 在没有套接字的情况下在 Delphi 中进行应用程序数据交换的最佳方法是什么？

> ID：906800
> 
> 赞同：6
> 
> 时间：2009-05-25T13:46:51.207
> 
> 标签：delphi, delphi-2009, interprocess

我需要一些相关的应用程序来相互通信（交换数据和启动操作）。要求没有包，也没有插座。所以我猜这会留下命名管道、WM_CopyData（就像 Skype 那样）和命令参数。你的最佳实践是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-25T14:02:58.630

你可能有几个选择。

超越您已有的：
DDE
内存映射文件 (MMF)
邮槽

我可能会选择 Pipes 或 MMF。

您可以下载几个免费的 MMF 组件，Deborah Pate 有一组您可以使用的免费软件类。 [地图文件.zip](http://www.djpate.freeserve.co.uk/MapFiles.zip)

检查[Torry](http://www.torry.net)网站上的 MailSlots。

最终解决方案可能取决于决定您选择哪个选项的数据传输的数量、大小和频率。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-25T14:13:28.920

我建议在这种情况下使用 COM。（注意：不是 COM+，不是 ActiveX，不是 OLE；COM，只是 COM。）

由于 Delphi 7（或更早的版本，我不确定），这很容易通过向项目添加类型库和自动化对象来完成。

优点是它得到了相当广泛的支持，无论是在 Delphi 内（类型库编辑器有你需要的一切并更新你的代码，COM 内部和注册都由 ComServ 单元提供），还是在 Delphi 之外（我在许多与各种应用程序交互的项目：C++ 项目、使用 VBA 的 Word 和 Excel 文档、oldskool ASP...）。

我遇到的唯一缺点可能是线程问题，在普通应用程序中，简单`CoInitialize(nil);`的应用程序启动就可以了，在更复杂的应用程序中，您需要考虑“线程单元”或使用自由线程并进行自己的锁定。（在某些情况下，您已经这样做了。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-25T15:18:59.053

另一种实现起来很简单的替代方法是使用数据库来传递信息。

不是很优雅，而且确实使用了很多开销，但是如果您的应用程序已经是数据感知的（即，其中有一个数据库），那么使用一两个表来传递信息是相当容易的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-25T19:22:07.510

您可以使用简单的文件：一侧写入，另一侧读取。如果您需要双向通信，只需使用两个文件，每个方向一个。

当然，这并不是真正的高性能。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-27T15:12:58.383

我对命名管道的另一票投给了数据交换。比起 mmap 文件，我更喜欢它们，因为 win32 管道 API 为您提供了一些开箱即用的不错选择：同步/异步、字节流与消息包、简单的 ReadFile/WriteFile 调用。所有这些你*都可以*用 mmaps 自己做......但是管道已经在那里......

您可以使用安全属性控制访问——这不是 WM_CopyData 的选项。这可能不会立即成为问题......但可以很方便地选择，即使您不在乎谁发送您的应用程序消息。对我来说，当 Vista 出现时，这很有帮助，突然间，用户应用程序在我的服务的单独会话中运行。很好的是，调整安全属性是让事情再次正常运行所需的唯一事情。

对于“启动操作”，您可能能够像一些命名事件一样简单地逃脱，而根本不用担心发送消息？相关方只是等待它发出信号。

就个人而言，除非您必须专门支持基于 COM 的客户端，否则我会避免使用 COM。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-25T14:39:55.607

不要使用 COM，开销太大（变体），并且必须注册 .dll 或 .exe（它会带来很多奇怪的安装 + 更新问题）。

我应该选择 MMF，我用它来与 Windows 服务通信。我为此使用以下 TGpMessageQueueReader 和 writer：http: [//17slon.com/gp/gp/gpsync.htm](http://17slon.com/gp/gp/gpsync.htm)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-28T15:31:03.373

如果您想传递数据、调用函数等，请使用 COM，但是如果有很多调用，请注意 COM 很慢。此外，您可能必须使用“xxx.exe /Regserver”注册应用程序，然后它才能工作。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2009-05-26T08:31:54.650

这不是 RemObjects 擅长的那种吗？布里

# struts2 - 卡在 iReport、JasperReports、Struts 2 插件中获取空值

> ID：906802
> 
> 赞同：1
> 
> 时间：2009-05-25T13:48:00.797
> 
> 标签：struts2, jasper-reports, ireport

我正在使用`JasperReports`并`Struts2`在我的网络应用程序中制作一些报告。

为了设计目的，我正在使用`NetBeans`IDE 和3.5.1 插件做所有这些事情。`iReport`

我正在按照 xml 代码配置我的 struts2-jasperreports 插件。

```
<package name="jasper1" extends="jasperreports-default,struts-default">
    <result-types>
        <result-type name="jasper" class="org.apache.struts2.views.jasperreports.JasperReportsResult"/>
    </result-types>

    <action name="myJasperTest" class="testJasperAccountAction">

        <result name="success" type="jasper">
            <param name="location">/reports/account.jasper</param>
            <param name="dataSource">accounts</param>
            <param name="format">PDF</param>
        </result>

        <result name="error" type="jasper">/error.jsp</result>

    </action>
</package> 
```

我的动作课如下。

```
public class JasperAccountAction extends ActionSupport {

    private IAccountSecurityProcessor accountSecurityProcessor;
    private static ArrayList<Account> accounts;

    public void setAccounts(ArrayList<Account> accounts) {
        JasperAccountAction.accounts = accounts;
    }

    @Override
    public String execute() throws Exception {
        return SUCCESS;
    }

    public void setAccountSecurityProcessor(IAccountSecurityProcessor accountSecurityProcessor) {
        this.accountSecurityProcessor = accountSecurityProcessor;
    }

    public ArrayList<Account> getAccounts() throws Exception {
        try {
            accounts = (ArrayList<Account>) this.accountSecurityProcessor.findByAll(0, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, false, false, null, null, null, null, 0);

            JasperCompileManager.compileReportToFile("E:\\Final_copy_of_erp\\SufalamERP\\build\\web\\reports\\account.jrxml", "E:\\Final_copy_of_erp\\SufalamERP\\build\\web\\reports\\account.jasper");
            System.out.println("*******************************Accounts list for japser = =" + accounts + " ****************************************");
        } catch (SufalamException ex) {
            ex.printStackTrace();

            System.out.println("*******************************Exception in sufalam ==>" + ex);
            Logger.getLogger(JasperAccountAction.class.getName()).log(Level.SEVERE, null, ex);
        }
        return accounts;
    }
} 
```

我的碧玉报告如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="null" pageWidth="595" pageHeight="842" columnWidth="535" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20">
    <queryString language="SQL">
        <![CDATA[SELECT
     account_master."id" AS account_master_id,
     account_master."name" AS account_master_name
FROM
     "public"."account_master" account_master]]>
    </queryString>
    <field name="account_master_id" class="java.lang.Integer">
        <fieldDescription><![CDATA[]]></fieldDescription>
    </field>
    <field name="account_master_name" class="java.lang.String">
        <fieldDescription><![CDATA[]]></fieldDescription>
    </field>
    <group name="account_master_id">
        <groupExpression><![CDATA[$F{account_master_id}]]></groupExpression>
        <groupHeader>
            <band height="27">
                <staticText>
                    <reportElement mode="Opaque" x="0" y="0" width="139" height="27" forecolor="#FFFFFF" backcolor="#000000"/>
                    <textElement>
                        <font size="18"/>
                    </textElement>
                    <text><![CDATA[account_master_id]]></text>
                </staticText>
                <textField>
                    <reportElement mode="Opaque" x="139" y="0" width="416" height="27" forecolor="#FFFFFF" backcolor="#000000"/>
                    <textElement>
                        <font size="18" isBold="true"/>
                    </textElement>
                    <textFieldExpression class="java.lang.Integer"><![CDATA[$F{account_master_id}]]></textFieldExpression>
                </textField>
            </band>
        </groupHeader>
        <groupFooter>
            <band height="8">
                <line direction="BottomUp">
                    <reportElement key="line" x="1" y="4" width="554" height="1"/>
                </line>
            </band>
        </groupFooter>
    </group>
    <background>
        <band/>
    </background>
    <title>
        <band height="58">
            <line>
                <reportElement x="0" y="8" width="555" height="1"/>
            </line>
            <line>
                <reportElement positionType="FixRelativeToBottom" x="0" y="51" width="555" height="1"/>
            </line>
            <staticText>
                <reportElement x="65" y="13" width="424" height="35"/>
                <textElement textAlignment="Center">
                    <font size="26" isBold="true"/>
                </textElement>
                <text><![CDATA[Classic template]]></text>
            </staticText>
        </band>
    </title>
    <pageHeader>
        <band/>
    </pageHeader>
    <columnHeader>
        <band/>
    </columnHeader>
    <detail>
        <band height="20">
            <staticText>
                <reportElement x="0" y="0" width="139" height="20"/>
                <textElement>
                    <font size="12"/>
                </textElement>
                <text><![CDATA[account_master_name]]></text>
            </staticText>
            <textField>
                <reportElement x="139" y="0" width="416" height="20"/>
                <textElement>
                    <font size="12"/>
                </textElement>
                <textFieldExpression class="java.lang.String"><![CDATA[$F{account_master_name}]]></textFieldExpression>
            </textField>
        </band>
    </detail>
    <columnFooter>
        <band/>
    </columnFooter>
    <pageFooter>
        <band height="26">
            <textField evaluationTime="Report" pattern="" isBlankWhenNull="false">
                <reportElement key="textField" x="516" y="6" width="36" height="19" forecolor="#000000" backcolor="#FFFFFF"/>
                <box>
                    <topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </box>
                <textElement>
                    <font size="10"/>
                </textElement>
                <textFieldExpression class="java.lang.String"><![CDATA["" + $V{PAGE_NUMBER}]]></textFieldExpression>
            </textField>
            <textField pattern="" isBlankWhenNull="false">
                <reportElement key="textField" x="342" y="6" width="170" height="19" forecolor="#000000" backcolor="#FFFFFF"/>
                <box>
                    <topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </box>
                <textElement textAlignment="Right">
                    <font size="10"/>
                </textElement>
                <textFieldExpression class="java.lang.String"><![CDATA["Page " + $V{PAGE_NUMBER} + " of "]]></textFieldExpression>
            </textField>
            <textField pattern="" isBlankWhenNull="false">
                <reportElement key="textField" x="1" y="6" width="209" height="19" forecolor="#000000" backcolor="#FFFFFF"/>
                <box>
                    <topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                    <rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
                </box>
                <textElement>
                    <font size="10"/>
                </textElement>
                <textFieldExpression class="java.util.Date"><![CDATA[new Date()]]></textFieldExpression>
            </textField>
        </band>
    </pageFooter>
    <summary>
        <band/>
    </summary>
</jasperReport> 
```

我在我的项目中使用以下罐子。

```
asm.jar
cglib.jar
commons-fileupload-1.2.1.jar
displaytag-export-poi-1.2.jar
hibernate3.jar
jasperreports-3.0.0.jar
org.apache.commons.logging_1.0.4.jar
struts2-core-2.0.11.1.jar
tiles-core-2.1.2.jar
xwork-2.1.2.jar
batik-dom.jar
batik-svg-dom.jar
groovy-all-1.5.5.jar
jaxen-1.1.1.jar
jxl-2.6.jar
rhino-1.7R1.jar
commons-lang-2.3.jar
displaytag-portlet-1.2.jar
hibernate-annotations.jar
jdt-compiler-3.1.1.jar
postgresql-8.3-603.jdbc3.jar
struts2-jasperreports-plugin-2.0.11.1.jar
tiles-jsp-2.1.2.jar
batik-anim.jar
batik-ext.jar
batik-svggen.jar
jakarta-bcel-20050813.jar
jcommon-1.0.15.jar
kxml2-2.3.0.jar
xalan.jar
commons-beanutils-1.7.0.jar
commons-logging-1.0.4.jar
dom4j.jar
hibernate-commons-annotations.jar
jta.jar
slf4j-api.jar
struts2-spring-plugin-2.0.11.1.jar
tiles-portlet-2.1.2.jar
batik-awt-util.jar
batik-gvt.jar
batik-util.jar
jasperreports-chart-themes-3.5.1.jar
xml-apis-ext.jar
kxml2-min-2.3.0.jar
xercesImpl.jar
commons-collections.jar
commons-logging-api-1.1.jar
ejb3-persistence.jar
hibernate-core.jar
log4j.jar
slf4j-log4j12.jar
struts2-tiles-plugin-2.1.6.jar
tiles-servlet-2.1.2.jar
batik-bridge.jar
batik-parser.jar
batik-xml.jar
jasperreports-dejavu-fonts.jar
jfreechart-1.0.0.jar    
png-encoder-1.5.jar
commons-digester-1.8.1.jar
displaytag-1.2.jar
freemarker-2.3.8.jar
itext-1.3.1.jar
ognl-2.6.11.jar
spring.jar
tiles-api-2.1.2.jar
xwork-2.0.4.jar
batik-css.jar
batik-script.jar
castor-1.2.jar
JasperReportViewer.jar
jfreechart-1.0.12.jar
poi-3.2-FINAL-20081019.jar 
```

我收到以下错误。

```
2009-05-29 12:38:58,078 ERROR (org.apache.commons.digester.Digester:1646) - Parse Error at line 2 column 387: Document root element "jasperReport", must match DOCTYPE root "null".
org.xml.sax.SAXParseException: Document root element "jasperReport", must match DOCTYPE root "null".
        at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:195)
        at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(ErrorHandlerWrapper.java:131)
        at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:384)
        at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:318)
        at com.sun.org.apache.xerces.internal.impl.dtd.XMLDTDValidator.rootElementSpecified(XMLDTDValidator.java:1621)
        at com.sun.org.apache.xerces.internal.impl.dtd.XMLDTDValidator.handleStartElement(XMLDTDValidator.java:1900)
        at com.sun.org.apache.xerces.internal.impl.dtd.XMLDTDValidator.startElement(XMLDTDValidator.java:764)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanStartElement(XMLDocumentFragmentScannerImpl.java:1359)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$ContentDriver.scanRootElementHook(XMLDocumentScannerImpl.java:1316)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:3095)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$PrologDriver.next(XMLDocumentScannerImpl.java:921)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:648)
        at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:510)
        at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:807)
        at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:737)
        at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:107)
        at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1205)
        at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:522)
        at org.apache.commons.digester.Digester.parse(Digester.java:1764)
        at net.sf.jasperreports.engine.xml.JRXmlLoader.loadXML(JRXmlLoader.java:239)
        at net.sf.jasperreports.engine.xml.JRXmlLoader.loadXML(JRXmlLoader.java:226)
        at net.sf.jasperreports.engine.xml.JRXmlLoader.load(JRXmlLoader.java:214)
        at net.sf.jasperreports.engine.xml.JRXmlLoader.load(JRXmlLoader.java:168)
        at net.sf.jasperreports.engine.xml.JRXmlLoader.load(JRXmlLoader.java:152)
        at net.sf.jasperreports.engine.JasperCompileManager.compileReportToFile(JasperCompileManager.java:115)
        at com.sufalam.presentation.finance.action.JasperAccountAction.getAccounts(JasperAccountAction.java:99)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at ognl.OgnlRuntime.invokeMethod(OgnlRuntime.java:517)
        at ognl.OgnlRuntime.getMethodValue(OgnlRuntime.java:931)
        at ognl.ObjectPropertyAccessor.getPossibleProperty(ObjectPropertyAccessor.java:53)
        at ognl.ObjectPropertyAccessor.getProperty(ObjectPropertyAccessor.java:121)
        at com.opensymphony.xwork2.util.OgnlValueStack$ObjectAccessor.getProperty(OgnlValueStack.java:58)
        at ognl.OgnlRuntime.getProperty(OgnlRuntime.java:1643)
        at com.opensymphony.xwork2.util.CompoundRootAccessor.getProperty(CompoundRootAccessor.java:101)
        at ognl.OgnlRuntime.getProperty(OgnlRuntime.java:1643)
        at ognl.ASTProperty.getValueBody(ASTProperty.java:92)
        at ognl.SimpleNode.evaluateGetValueBody(SimpleNode.java:170)
        at ognl.SimpleNode.getValue(SimpleNode.java:210)
        at ognl.Ognl.getValue(Ognl.java:333)
        at ognl.Ognl.getValue(Ognl.java:310)
        at com.opensymphony.xwork2.util.OgnlUtil.getValue(OgnlUtil.java:190)
        at com.opensymphony.xwork2.util.OgnlValueStack.findValue(OgnlValueStack.java:208)
        at org.apache.struts2.views.jasperreports.ValueStackDataSource.<init>(ValueStackDataSource.java:59)
        at org.apache.struts2.views.jasperreports.JasperReportsResult.doExecute(JasperReportsResult.java:204)
        at org.apache.struts2.dispatcher.StrutsResultSupport.execute(StrutsResultSupport.java:178)
        at com.opensymphony.xwork2.DefaultActionInvocation.executeResult(DefaultActionInvocation.java:348)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:253)
        at com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:221)
        at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
        at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
        at com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:150)
        at org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:48)
        at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
        at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
        at com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:123)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
        at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
        at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:167)
        at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
        at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
        at com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:105)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
        at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
        at org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:83)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
        at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
        at org.ap
ache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:207)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
        at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
        at com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:74)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
        at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
        at com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:127)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
        at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
        at org.apache.struts2.interceptor.ProfilingActivationInterceptor.intercept(ProfilingActivationInterceptor.java:107)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
        at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
        at org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:206)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
        at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
        at com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:115)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
        at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
        at com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:143)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
        at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
        at com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:121)
        at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
        at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
        at org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:170)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
        at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
        at com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:123)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
        at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
        at com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:176)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
        at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
        at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
        at org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:50)
        at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:504)
        at org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:419)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:246)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:214)
        at org.displaytag.filter.ResponseOverrideFilter.doFilter(ResponseOverrideFilter.java:125)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:246)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:214)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:313)
        at org.apache.catalina.core.StandardContextValve.invokeInternal(StandardContextValve.java:287)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:218)
        at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:648)
        at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:593)
        at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:94)
        at com.sun.enterprise.web.PESessionLockingStandardPipeline.invoke(PESessionLockingStandardPipeline.java:98)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:222)
        at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:648)
        at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:593)
        at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:587)
        at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:1096)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:166)
        at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:648)
        at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:593)
        at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:587)
        at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:1096)
        at org.apache.coyote.tomcat5.CoyoteAdapter.service(CoyoteAdapter.java:288)
        at com.sun.enterprise.web.connector.grizzly.DefaultProcessorTask.invokeAdapter(DefaultProcessorTask.java:647)
        at com.sun.enterprise.web.connector.grizzly.DefaultProcessorTask.doProcess(DefaultProcessorTask.java:579)
        at com.sun.enterprise.web.connector.grizzly.DefaultProcessorTask.process(DefaultProcessorTask.java:831)
        at com.sun.enterprise.web.connector.grizzly.DefaultReadTask.executeProcessorTask(Def
aultReadTask.java:341)
        at com.sun.enterprise.web.connector.grizzly.DefaultReadTask.doTask(DefaultReadTask.java:263)
        at com.sun.enterprise.web.connector.grizzly.DefaultReadTask.doTask(DefaultReadTask.java:214)
        at com.sun.enterprise.web.connector.grizzly.TaskBase.run(TaskBase.java:265)
        at com.sun.enterprise.web.connector.grizzly.ssl.SSLWorkerThread.run(SSLWorkerThread.java:106)
2009-05-29 12:38:58,078  WARN (com.opensymphony.xwork2.util.OgnlValueStack:269) - Caught an exception while evaluating expression 'accounts' against value stack
Caught an Ognl exception while getting property accounts - Class: ognl.OgnlRuntime
File: OgnlRuntime.java
Method: getMethodValue
Line: 935 - ognl/OgnlRuntime.java:935:-1
        at com.opensymphony.xwork2.util.CompoundRootAccessor.getProperty(CompoundRootAccessor.java:106)
        at ognl.OgnlRuntime.getProperty(OgnlRuntime.java:1643)
        at ognl.ASTProperty.getValueBody(ASTProperty.java:92)
        at ognl.SimpleNode.evaluateGetValueBody(SimpleNode.java:170) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-03T21:58:19.903

看起来您的 JasperReport.xml 只是缺少一个文档类型。尝试以这种方式启动文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE jasperReport PUBLIC "-//JasperReports//DTD Report Design//EN" 
 "http://jasperreports.sourceforge.net/dtds/jasperreport.dtd">
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="null" pageWidth="595" pageHeight="842" columnWidth="535" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-09T13:30:20.213

字段名称应类似于帐户 bean 的属性名称

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-10-12T14:53:12.343

我遇到了同样的问题，我可以通过从我的 bean 中输入正确的字段名称来解决它

`<fieldDescription><![CDATA[correct_name_of_field]]></fieldDescription>`，当然在你的 .jrxml 中；）

我坚持了几天。

顺便把jasper、apache commons*、poi、itext、jxl的所有jar包都放了。

# c# - 在 Linq 查询中构建“where”子句

> ID：906804
> 
> 赞同：1
> 
> 时间：2009-05-25T13:50:16.097
> 
> 标签：c#, linq, linq-to-xml, dynamic-queries

在这个查询中，我总是想要“正常”类型的元素。
如果设置了 _includeX 标志，我也想要 'workspace' 类型的元素。
有没有办法把它写成一个查询？还是在提交查询之前基于_includeX构建where子句？

```
 if (_includeX) {
    query = from xElem in doc.Descendants(_xString)
        let typeAttributeValue = xElem.Attribute(_typeAttributeName).Value
        where typeAttributeValue == _sWorkspace ||
              typeAttributeValue == _sNormal
        select new xmlThing
        {
            _location = xElem.Attribute(_nameAttributeName).Value,
            _type = xElem.Attribute(_typeAttributeName).Value,
        }; 
}
else {
    query = from xElem in doc.Descendants(_xString)
        where xElem.Attribute(_typeAttributeName).Value == _sNormal
        select new xmlThing
        {
            _location = xElem.Attribute(_nameAttributeName).Value,
            _type = xElem.Attribute(_typeAttributeName).Value,
        }; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-25T14:00:56.637

您可以将其分解为一个单独的谓词：

```
Predicate<string> selector = x=> _includeX 
  ? x == _sWorkspace || x == _sNormal
  : x == _sNormal; 

query = from xElem in doc.Descendants(_xString)
      where selector(xElem.Attribute(_typeAttributeName).Value)
      select new xmlThing
      {
          _location = xElem.Attribute(_nameAttributeName).Value,
          _type = xElem.Attribute(_typeAttributeName).Value,
      }; 
```

或内联条件：

```
query = from xElem in doc.Descendants(_xString)
    let typeAttributeValue = xElem.Attribute(_typeAttributeName).Value
    where (typeAttributeValue == _sWorkspace && _includeX) ||
          typeAttributeValue == _sNormal
    select new xmlThing
    {
        _location = xElem.Attribute(_nameAttributeName).Value,
        _type = xElem.Attribute(_typeAttributeName).Value,
    }; 
```

或者删除查询表达式的使用并这样做： -

```
var all = doc.Descendants(_xString);
var query = all.Where( xElem=> {
      var typeAttributeValue = xElem.Attribute(_typeAttributeName).Value;
      return typeAttributeValue == _sWorkspace && includeX ) || typeAttributeValue == _sNormal;
})
.Select( xElem =>
    select new xmlThing
    {
        _location = xElem.Attribute(_nameAttributeName).Value,
        _type = xElem.Attribute(_typeAttributeName).Value,
    }) 
```

或者结合第一个和第三个并执行：

```
Predicate<string> selector = x=> _includeX 
  ? x == _sWorkspace || x == _sNormal
  : x == _sNormal; 

query = doc.Descendants(_xString)
      .Where(xElem => selector(xElem.Attribute(_typeAttributeName).Value))
      .Select(xElem => new xmlThing
      {
          _location = xElem.Attribute(_nameAttributeName).Value,
          _type = xElem.Attribute(_typeAttributeName).Value,
      };) 
```

这一切都取决于在您的环境中最干净的工作。

帮自己一个忙，购买（并阅读！）深度 C#，一点一点地学习这些东西会更快地变得有意义......

# .net - ROWLEX 在使用 GPL 的 SemWeb 时如何获得 L-GPL 许可？

> ID：906808
> 
> 赞同：4
> 
> 时间：2009-05-25T13:50:46.487
> 
> 标签：.net, licensing, rdf, rowlex, semweb

根据其主页，[SemWeb](http://razor.occams.info/code/semweb/)库（用于在 .NET 下处理 RDF 的出色库）是在 GPL 下发布的。由于[ROWLEX](http://rowlex.nc3a.nato.int/)工具是基于 SemWeb 构建的，因此 ROWLEX 也应该是 GPL。尽管如此，ROWLEX 仍声称是在 L-GPL 下发布的。这在法律上正确吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-25T14:02:41.767

事实上，你的说法并不完全准确。[SemWeb](http://razor.occams.info/code/semweb/)不仅是 GPL，而且是双重许可的。Joshua Tauberer 编写的源代码也获得知识共享署名许可。由于[ROWLEX](http://rowlex.nc3a.nato.int)完全依赖 Joshua 编写的代码，知识共享署名许可允许 ROWLEX 在 L-GPL 下分发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-25T14:04:46.677

在阅读[Semweb](http://razor.occams.info/code/semweb/)许可信息后，它声明它目前是根据 GPL 和知识共享署名许可获得许可的，但最初它仅根据 CC 署名许可获得许可。它还包含根据 LGPL 和 W3C 软件许可证获得许可的部分。我假设 Rowlex 开始使用 Semweb 代码时，它仅在 CC 下获得许可，因此不必使用 GPL。

另外，我想指出，这里有一组相当复杂的许可证，并且对所有不同许可证有更多了解的人可能会对正在发生的事情有更好的解释。

# mysql - MySQL中的批处理问题？

> ID：906810
> 
> 赞同：0
> 
> 时间：2009-05-25T13:52:10.040
> 
> 标签：mysql

我在 MySQL 中有一个创建两个表的脚本，第二个表引用了第一个表中的一个字段，现在当我尝试批量运行此脚本时，它返回一个错误。我的猜测是它会在创建表之前检查第二个表定义中的引用表。

知道如何同时创建两个表吗？

谢谢

编辑：

例子：

```
CREATE TABLE table1
(
    ID INT NOT NULL,
    PRIMARY KEY (ID)
) ENGINE=InnoDB;

CREATE TABLE table2
(
    ID INT NOT NULL,
    FID INT NOT NULL ,
    PRIMARY KEY (ID),
    FOREIGN KEY (FID) REFERENCES table1 (ID)
) ENGINE=InnoDB; 
```

如果我创建第一个表，然后创建第二个表一切正常，但是当我在一个批次中运行它时，它会返回一个错误

**更新：似乎这个问题已经用 MySQL 5.5 解决了。即使您在某些表定义中有外键约束，它现在也可以在一批中正常工作。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-25T13:57:25.880

简单的事情，首先创建 2 个表，然后更改表并添加引用。

# c# - 使用 .NET 创建 100,000 个 tcp 连接

> ID：906812
> 
> 赞同：6
> 
> 时间：2009-05-25T13:52:36.593
> 
> 标签：c#, sockets, comet

我正在用 C# 编写一个小彗星服务器，为了测试它，我编写了一个小程序，它打开一堆连接，向每个连接写入一点文本，然后关闭每个连接：

```
int basePort = 30000;
IPAddress localAddress = new IPAddress( new byte[] { 127, 0, 0, 1 } );
List<Socket> sockets = new List<Socket>();

for( int i = 0; i < 20000; i++ ) {
    Socket s = new Socket( AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp );
    s.Bind( new IPEndPoint( localAddress, basePort + i ) );
    s.Connect( "localhost", 1999 );
    sockets.Add( s );
}

string message = "hello";
byte[] messageData = Encoding.ASCII.GetBytes( message );
foreach( Socket s in sockets ) {
    s.Send( messageData );
}

foreach( Socket s in sockets ) {
    s.Disconnect( false );
} 
```

我现在使用的是 Windows XP，它只分配从 1025 到 5000 范围的动态客户端端口，所以我添加了从 30000 开始的端口的显式绑定。这使我从 4000 以下的连接数增加到了 16000 多一点，但是现在我在 Socket.Connect 上收到以下异常：

“由于系统缺少足够的缓冲区空间或队列已满 127.0.0.1:1999，因此无法对套接字执行操作”

有什么想法吗？更改发送和接收缓冲区大小似乎没有任何区别，而且似乎总是我的客户端应用程序坏了，而不是我的服务器。我意识到在达到 100,000 个连接之前我将用完客户端端口，但我仍然想更好地了解发生了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-25T14:21:48.593

您可能用完了非分页内存。每台机器和每进程的限制取决于安装的 RAM、操作系统、/3GB 开关设置等的数量。32 位操作系统 sku 对非分页内存的限制比 64 位操作系统 sku 低得多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-25T14:36:47.877

我认为 100.000 个连接不是一个可行的目标。

TCP/IP 端口是 16 位数字。所以任何高于 65535 的东西无论如何都是不行的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-25T14:12:42.667

Windows XP（可能还有其他版本）对任何时候允许的开放端口数量都有限制。此[MSDN 文章](http://msdn.microsoft.com/en-us/library/aa560610.aspx)可能有助于修改 TcpIp 参数以增加可用端口的数量并减少 Windows 在允许重用之前保持端口打开的时间。

# sql - 创建 SQL 命令以返回匹配或其他所有内容

> ID：906816
> 
> 赞同：2
> 
> 时间：2009-05-25T13:53:35.887
> 
> 标签：sql

我的应用程序中有三个复选框。如果用户勾选了框的组合，我想返回勾选框的匹配项，并且在未选中框的情况下，我只想返回所有内容。我可以使用单个 SQL 命令执行此操作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-25T13:56:39.813

我建议在 WHERE 子句中执行以下操作；

```
...
   AND (@OnlyNotApproved = 0 OR ApprovedDate IS NULL) 
```

这不是一个 SQL 命令，但对我来说效果很好。基本上，第一部分检查是否设置了开关（选中了复选框）。第二个是选中复选框的过滤器。在这里，您可以做您通常会做的任何事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-25T13:59:57.450

当然。下面的示例假定 SQL Server，但您明白了要点。

您可以使用一些动态 SQL 很容易地做到这一点假设您将复选框作为位值传递给存储过程。

```
DECLARE bit @cb1
DECLARE bit @cb2
DECLARE bit @cb3

DECLARE nvarchar(max) @whereClause

IF(@cb1 = 1)
    SET @whereClause = @whereClause + ' AND col1 = ' + @cb1
IF(@cb2 = 1)
    SET @whereClause = @whereClause + ' AND col2 = ' + @cb2
IF(@cb3 = 1)
    SET @whereClause = @whereClause + ' AND col3 = ' + @cb3

DECLARE nvarchar(max) @sql 

SET @sql = 'SELECT * FROM Table WHERE 1 = 1' + @whereClause

exec (@sql) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-25T14:08:58.680

您可以使用动态 where 子句构建 SQL 语句：

```
string query = "SELECT * FROM TheTable WHERE 1=1 ";
if (checkBlackOnly.Checked)
    query += "AND Color = 'Black' ";
if (checkWhiteOnly.Checked)
    query += "AND Color = 'White' "; 
```

或者您可以创建一个带有变量的存储过程来执行此操作：

```
CREATE PROCEDURE dbo.GetList
    @CheckBlackOnly bit
,   @CheckWhiteOnly bit
AS
SELECT *
FROM TheTable
WHERE
    (@CheckBlackOnly = 0 or (@CheckBlackOnly = 1 AND Color = 'Black'))
    AND (@CheckWhiteOnly = 0 or (@CheckWhiteOnly = 1 AND Color = 'White'))
    .... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-25T14:08:04.843

你当然可以。如果您在代码中编写 SQL SELECT 语句，那么您只需生成：

1.  如果没有选择或全部选择（使用您的语言检查），您只需发布非过滤版本：

    选择...从...

2.  如果选中了某些复选框，则创建添加一个`WHERE clause`：

    SELECT ... FROM ... WHERE MyTypeID IN (3, 5, 7)

这是单个 SQL 命令，但当然会根据选择而有所不同。现在，如果您想使用一个存储过程来完成这项工作，那么实现将取决于数据库引擎，因为您需要的是能够传递多个参数。我不鼓励使用仅包含 3 个参数的过程，因为当您添加另一个复选框时，您还必须更改 SQL 过程。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-25T14:30:33.893

该问题没有指定数据库产品或编程语言。但是，它可以通过 ANSI SQL 以交叉产品的方式完成。

假设一种编程语言使用 $var$ 对字符串进行变量插入。

在服务器上，您可以在列表中获得所有选定的值，因此如果选择了前两个框，您将有一个 GET/POST 变量，例如

```
http://url?colors=black,white 
```

所以你建立一个这样的查询（伪代码）

```
colors = POST['colors'];
colors_list = replace(colors, ',', "','"); // separate colors with single-quotes
sql = "WHERE ('$colors$' == '') OR (color IN ('$colors_list$'));"; 
```

您的数据库将看到：

```
WHERE ('black,white' == '') OR (color IN ('black','white')); -- some selections
WHERE ('' == '') OR (color IN ('')); -- nothing selected (matches all rows) 
```

这是一个有效的 SQL 查询。当未选择任何内容时，第一个条件匹配任何行，否则 OR 语句的右侧将匹配作为其中一种颜色的任何行。此查询无需修改即可扩展到无限数量的选项。每个子句周围的括号也是可选的，但为了清楚起见，我使用它们。

当然，您需要使用参数或转义来保护字符串免受 SQL 注入。否则，恶意的颜色值将使您的数据库受到攻击。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-25T16:16:56.633

```
SELECT  *
FROM    table
WHERE   value IN
        (
        SELECT  option
        FROM    checked_options
        UNION ALL
        SELECT  option
        FROM    all_options
        WHERE   NOT EXISTS (
                SELECT  1
                FROM    checked_options
                )
        ) 
```

内部子查询将返回选中选项的列表，或者如果列表为空，则返回所有可能的选项。

对于`MySQL`，最好使用这个：

```
 SELECT  *
    FROM    t_data
    WHERE   EXISTS (
            SELECT  1
            FROM    t_checked
            WHERE   session = 2
            )
            AND opt IN
            (
            SELECT  opt
            FROM    t_checked
            WHERE   session = 2
            )
    UNION ALL
    SELECT  *
    FROM    t_data
    WHERE   NOT EXISTS (
            SELECT  1
            FROM    t_checked
            WHERE   session = 2
            ) 
```

`MySQL`会注意到`IMPOSSIBLE WHERE`其中一个`SELECT`，并且只会执行适当的一个。

有关性能详细信息，请参阅我的博客中的此条目：

*   [**选择选项**](http://explainextended.com/2009/05/26/selecting-options/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-26T22:24:35.220

如果您将 null 传递给适当的值，那么它将将该特定列与自身进行比较。如果您传递一个值，它将将该列与该值进行比较

```
CREATE PROCEDURE MyCommand 
(
   @Check1 BIT = NULL,
   @Check2 BIT = NULL,
   @Check3 BIT = NULL
)

AS

SELECT     * 
FROM       Table
WHERE      Column1 = ISNULL(@Check1, Column1)
AND        Column2 = ISNULL(@Check2, Column2)
AND        Column3 = ISNULL(@Check3, Column3) 
```

# iphone - 文本字段的 onFocus 方法

> ID：906818
> 
> 赞同：0
> 
> 时间：2009-05-25T13:54:15.467
> 
> 标签：iphone, objective-c

我想将光标位置从一个文本字段更改为另一个文本字段。我想以编程方式设置它。我该怎么做？iPhone中有什么方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-25T14:05:39.513

将`setFirstResponder`消息发送到第二个文本字段。

# codeblocks - “重新加载文件？” 代码块错误

> ID：906823
> 
> 赞同：0
> 
> 时间：2009-05-25T13:55:17.540
> 
> 标签：codeblocks, file-access

我使用代码块作为我的 C++ IDE，每 10 分钟左右我收到以下错误消息：

“重新加载文件？文件 c:...node.cpp 在 IDE 外被修改。您要重新加载吗？（您将丢失未保存的工作）”是/否/全部/取消

如果我错误地单击“是”，有时我会失去最后几分钟的工作。如果我单击“否”，则一切正常。

所以我下载了“进程监视器”以找出正在访问我的 cpp 文件的程序，它告诉我 SVCHost 可能是罪魁祸首。

据我所知，SVCHost 负责各种事情。有谁知道我可以做些什么来停止接收此错误消息？

注意第一个月左右没有出现此错误消息，因此我使用了代码块，但我不知道我做了什么可能导致问题。

[截图][ [http://i44.tinypic.com/sgk3sx.jpg]](http://i44.tinypic.com/sgk3sx.jpg])

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T06:00:46.070

我遇到了同样的问题，我通过删除“检查外部修改文件”前面的勾号来解决它

> 设置 -> 环境 -> 常规设置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-25T14:10:34.310

你是对的，这`svchost`是一个通用的进程名称，被许多不同的服务使用。我认为原因是为了防止每个可能想要做某事的微小服务的大量进程——其中一组将共享一个`svchost`进程。

[Sysinternals](http://technet.microsoft.com/en-us/sysinternals/default.aspx)的[Process Explorer](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)`svchost`可用于通过查找进程 ID（JPEG 文件中的 1296）并双击条目来确定特定进程正在执行哪些服务。

然后，在出现的属性对话框中，选择服务选项卡，它将显示使用该进程的特定服务。

如果您不想（或不能）安装 Process Explorer，可以使用命令行：

```
tasklist /svc /fi "imagename eg svchost.exe" 
```

获取每个进程中所有服务的列表。

# ruby - 将 Ruby 代码转换为字符串

> ID：906824
> 
> 赞同：4
> 
> 时间：2009-05-25T13:55:41.283
> 
> 标签：ruby, syntax-highlighting

我正在重构一些我没有写的代码，我发现了这样一行（它更长，我在这个例子中只用了一点点）：

```
system("rubyw -e \"require 'win32ole'; @autoit=WIN32OLE.new('AutoItX3.Control');") 
```

为了提高可读性，我将其重构为

```
do_something =
  "rubyw -e \"
    require 'win32ole'
    @autoit=WIN32OLE.new('AutoItX3.Control')"
system do_something 
```

然后我想做一些改变，但由于我正在处理的代码是在一个字符串中，我失去了语法突出显示、括号匹配和所有这些好东西。

有没有一种简单的方法可以在字符串之外编写一些代码，然后将其转换为字符串？

我搜索了网络和stackoverflow，但找不到答案。

有关更多信息，请查看[bret/watir](http://github.com/bret/watir/blob/d6c28c90de2025f3889856789dfde1049bd1fa00/watir/lib/watir/input_elements.rb)的原始代码（Watir::FileField#set，第 445 行）和我在[zeljkofilipin/watir](http://github.com/zeljkofilipin/watir/blob/261bc2c519640a601c932482aa115ef59fdb2955/watir/lib/watir/input_elements.rb)的 fork （第 447-459 行）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-25T14:47:13.440

您可以使用以下语法：

```
do_something = <<SOMETHING
  rubyw -e 
  require 'win32ole'
  @autoit=WIN32OLE.new('AutoItX3.Control')
SOMETHING 
```

显然这是一个[heredoc](http://en.wikipedia.org/wiki/Heredoc)！您可以在此处找到另一个示例[（文档）](http://en.wikipedia.org/wiki/Ruby_(programming_language)#Strings)。

这并不是说该命令不会因为那里有换行符而吓坏了。但是，您可能会运行它`system do_something.split(/\r\n/).join('')`或类似的东西。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-25T13:59:43.770

好吧，您可以将代码放入外部文件并加载它。

或者，如果我没记错的话，Ruby 文件可能包含`DATA`以下部分：

```
# Sample ruby file:

puts DATA.readline()

__END__
foo bar 
```

这应该打印“ `foo bar`”。您可以将代码放在数据段中。运气好的话，您的编辑器仍会为该`DATA`片段提供语法突出显示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-25T18:50:38.087

Ruby2ruby 听起来有点像您要问的。

[http://seattlerb.rubyforge.org/ruby2ruby/](http://seattlerb.rubyforge.org/ruby2ruby/)

# .net - 如何重新加载另一个gridview按钮的gridview onclientclick？

> ID：906829
> 
> 赞同：0
> 
> 时间：2009-05-25T13:57:35.897
> 
> 标签：.net, asp.net, vb.net, events, gridview

我有一个包含网格视图的模式弹出窗口。单击网格内的按钮时，我使用取决于在网格视图中单击的行的 ID 的数据重新加载网格视图。我想重新加载gridview onclientclick，但我找不到这样做的方法。是否可以在用户不知道页面已部分加载的情况下重新加载 gridview 客户端？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-25T16:23:27.817

Have a look at what Matt Berseth is doing with gridview/detailsview, it might be of some help to you.

[http://mattberseth.com/blog/2008/04/masterdetail_with_the_gridview.html](http://mattberseth.com/blog/2008/04/masterdetail_with_the_gridview.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-25T14:06:03.133

为什么不将 GridView 和 Button 包装在 ModalPopup 内的 updatePanel 中。

这样，您`_click`仍然会触发并更新 gridview，但您不会体验到整页回发/提交。

# vba - 从 Office 2002 到 Office 2007 的 VBA 应用程序迁移

> ID：906834
> 
> 赞同：1
> 
> 时间：2009-05-25T13:58:42.710
> 
> 标签：vba, ms-office

寻找从 Office 2002 - VBA Word Doc 应用程序到 Office 2007 的迁移。

问题：虽然 Office 2007 支持 VBA 应用程序 - VB 宏代码，但没有出现菜单栏。事实上，VBA 宏菜单显示在“加载项”下。

在一项研究中，我意识到 Office 2007 支持 XML - 功能区。是否有任何理想的方法可以将 VBA 宏应用程序迁移到 Office 2007？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-26T12:51:54.080

最好的选择是这两篇 MSDN 文章：[Customizing the 2007 Office Fluent Ribbon](http://msdn.microsoft.com/en-us/library/bb226712.aspx)和[Creating a Custom Tab by Using Ribbon XML](http://msdn.microsoft.com/en-us/library/aa942955.aspx)，尽管它们看起来专注于在所有应用程序中执行此操作，而不仅仅是一个应用程序。每个 Office 应用程序都有帮助文档，让他们都尝试这个 Google 查询：[site:msdn.microsoft.com office 2007 add button to ribbon](http://www.google.com/search?hl=en&rls=com.microsoft:*&q=+site:msdn.microsoft.com+office+2007+add+button+to+ribbon)。

这个片段，来自第一个链接，应该是您正在寻找的内容：

> **现有的解决方案呢？**
> 
> 在以前的 Office 版本中，开发人员使用命令栏对象模型来构建修改 Fluent UI 的 Visual Basic 代码。在 Office 2007 版本中，此旧代码无需修改即可在大多数情况下继续工作。但是，对 Microsoft Office 2003 中的工具栏所做的更改现在显示在加载项选项卡上。显示的自定义类型取决于加载项的原始设计。例如，Office 创建一个菜单命令组，其中包含添加到先前菜单结构（如文件菜单、插入菜单和工具菜单）的项目。Office 还创建一个工具栏命令组，其中包含添加到以前的内置工具栏（如标准工具栏、格式工具栏和图片工具栏）的项目。此外，

# nhibernate - NHibernate 和延迟加载：如何从集合中只获取几行？

> ID：906839
> 
> 赞同：2
> 
> 时间：2009-05-25T14:00:22.270
> 
> 标签：nhibernate

当使用 NHibernate 和延迟加载时，我将如何获得这种行为：

我有一个客户类，客户有很多地址（比如 100 让这更有意义）。

我加载了我的客户行，我只想从地址集合中访问 3 个项目。

我不希望 nHibernate 加载所有 100 个地址，但是据我了解，延迟加载会加载所有地址吗？

我只想要其中的 3 个，并且我想一次加载所有 3 个，我将如何获得这种行为？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-25T15:03:42.550

这取决于

*   如果您需要“仅一个”或某个特定的
*   如果您稍后在同一会话中需要列表中的其他项目

您可以使用

*   [过滤器](http://nhforge.org/doc/nh/en/index.html#objectstate-filters)来过滤集合。这些过滤器在映射文件中定义，并在使用会话时被激活和参数化
*   [AliasToEntityMap 结果转换](http://nhforge.org/doc/nh/en/index.html#querycriteria-associations)器，可让您过滤查询中的集合
*   一次获取一定数量的元素的[批量获取。](http://nhforge.org/doc/nh/en/index.html#performance-fetching-batch)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-25T14:41:30.037

```
<class name="Customer">
    <set name="Address" batch-size="3">
        ...
    </set>
</class> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-25T15:03:47.417

我认为延迟加载在这里对您没有帮助。我将把这个责任交给 AddressDataProvider。您将获得基于客户和其他谓词的地址集合（我认为第一个地址没有任何商业价值。还有一件事可能会有所不同。返回地址的顺序是任意的。）

```
- The last visited address.
- The closest address to the customer address.
- The latest (added) address 
```

等等

```
Address GetLastVisited(Customer c);
Address GetClosest(Customer c); 
```

只是我的2美分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-25T14:19:43.013

可以添加批量大小，但是将批量大小设置为小，在迭代它们时可能最终会有很多数据库调用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-25T14:24:57.073

您可以使用 HQL 或仅选择 1 个地址的条件填充集合，但是除非您重新加载实体，否则您将无法访问其他地址。

在最坏的情况下，您将需要 Hibernate 的“with”关键字，而 NHibernate 中没有实现该关键字。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-27T08:11:39.700

您想查看这些记录是否有通用标准？（例如：类似于当前地址的东西？（比如 Current addressFlag = 1 ？）

如果是这种情况，那么您可以在集合映射上使用 Where 子句。

例如：

```
<bag name="Addresses"  where="CurrentAddressFlag = 1" cascade="save-update" fetch="select" lazy="true">
      <key column="AddressId"/>
      <one-to-many class="Address"/>
</bag> 
```

# c# - C# 的 CSV 解析器/读取器？

> ID：906841
> 
> 赞同：89
> 
> 时间：2009-05-25T14:00:37.840
> 
> 标签：c#, csv

是否有一些自由许可下可用的良好且免费的 CSV 解析器实现？[Java的SuperCSV](http://supercsv.sourceforge.net/)的一些对应物，也许是一个端口？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2009-05-25T14:04:46.753

[FileHelpers 开源库](http://www.filehelpers.net/)。

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2009-05-25T14:05:17.207

[CodeProject](http://www.codeproject.com/KB/database/CsvReader.aspx)上有一个很好的实现：

> 为了提供更多实事求是的数字，使用包含 145 个字段和 50,000 条记录的 45 MB CSV 文件，阅读器的处理速度约为 30 MB/秒。所以总而言之，花了1.5秒！机器规格为 P4 3.0 GHz，1024 MB。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2010-06-28T08:21:15.183

您可以将 CSV 文件加载到 DataTable。

示例代码 -

```
static DataTable CsvToDataTable(string strFileName)
{
    DataTable dataTable = new DataTable("DataTable Name");

    using (OleDbConnection conn = new OleDbConnection("Provider=Microsoft.Jet.OleDb.4.0; Data Source = " + Directory.GetCurrentDirectory() + "; Extended Properties = \"Text;HDR=YES;FMT=Delimited\""))
    {
        conn.Open();
        string strQuery = "SELECT * FROM [" + strFileName + "]";
        OleDbDataAdapter adapter = 
            new System.Data.OleDb.OleDbDataAdapter(strQuery, conn);
        adapter.Fill(dataTable);
    }
    return dataTable;
} 
```

确保将项目编译为 x86 处理器。它不适用于 x64。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-05-25T14:05:20.153

试试[filehelpers](http://www.filehelpers.net/)工作得非常好。我每天都用它来解析一个 100 MB 的文件。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-05-25T14:05:56.783

您是否尝试过 FileHelpers 库？它是免费的、开源的，可用于解析 CSV 文件。

*   [http://www.filehelpers.net/](http://www.filehelpers.net/)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2010-02-11T12:37:53.010

我已经开始使用 CSV Parser，它是[CommonLibrary.NET](http://commonlibrarynet.codeplex.com/)的一部分。

它使用 .NET 3.5，具有简单的 API，以及方便的重载/方法和 lamda 的迭代。

我没有像上面那样的任何基准测试，但它的好处是它只是类似于 Java Commons 的库的一个组件。因此，我还获得了命令行解析器、存储库实现等。

# c# - 使用 sendmessage（或类似功能）单击上下文菜单项

> ID：906848
> 
> 赞同：1
> 
> 时间：2009-05-25T14:01:48.163
> 
> 标签：c#, contextmenu

我需要右键单击另一个应用程序，获取它的上下文菜单（右键单击后打开），然后从中选择一个项目。

我可以将 postMessage 与其他应用程序句柄一起使用，结果请求的上下文菜单确实出现了，但我不知道如何从中进行选择。

 ````
 public  const int WM_RBUTTONDOWN = 0x0204;

    public  const int WM_RBUTTONUP = 0x0205;

    [System.Runtime.InteropServices.DllImport("user32.dll", EntryPoint = "SendMessage", CharSet = System.Runtime.InteropServices.CharSet.Auto)]

    public static extern void SendMessage(IntPtr hWnd, int msg, int wParam, int lParam);

    [System.Runtime.InteropServices.DllImport("user32.dll", EntryPoint = "PostMessage", CharSet = System.Runtime.InteropServices.CharSet.Auto)]

    public static extern void PostMessage(IntPtr hWnd, int msg, int wParam, int lParam);

    Point p = Cursor.Position;

    PostMessage((IntPtr)123456, WM_RBUTTONDOWN, 0, 0);

    PostMessage((IntPtr)123456, WM_RBUTTONUP, 0, 0); 
````  `接下来我应该做什么（现在上下文菜单已打开）？

谢谢，汤姆。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-25T14:15:43.050

我猜你想触发一个特定的动作。无需弹出上下文菜单：只需发布一条与您要选择的上下文菜单项匹配的[WM_COMMAND消息。](http://msdn.microsoft.com/en-us/library/ms647591%28VS.85%29.aspx)您将使用 Spy++ 或[Winspector](http://www.windows-spy.com/)等工具找到与所需菜单项关联的 WM_COMMAND 项 ID 。

```
PostMessage((IntPtr)hWnd, WM_COMMAND, 0, ID_MENU_ITEM); 
```

编辑：澄清您的评论：

您将 WM_COMMAND 消息直接发送或发布到主窗口，而不是菜单。实际上，您根本不需要弹出菜单。上下文菜单只是一个 GUI 元素，可让用户选择一个操作。应用程序不需要显示菜单来传达所述操作。

# android - addProximityAlert 不起作用（requestLocationUpdates 也不起作用） - Android

> ID：906850
> 
> 赞同：4
> 
> 时间：2009-05-25T14:02:27.977
> 
> 标签：android, gps, android-sensors

当手机靠近某个位置时，我正在尝试获取和更新。我都尝试过使用 addProximityAlert 和 requestLocationUpdates

```
 LocationManager lm =(LocationManager) getSystemService(Context.LOCATION_SERVICE);
    Location l = lm.getLastKnownLocation("gps");
    Intent intent = new Intent("eu.mauriziopz.gps.ProximityAlert");
    PendingIntent pIntent = PendingIntent.getActivity(this, 0, intent, 0);
    lm.addProximityAlert(12, 12, 100, 1000000, pIntent); 
```

这个永远不会触发意图（我知道这是有效的，因为我可以手动触发它）。我尝试使用监听器，但它只执行一次。无论我更新 gps 多少次，它都不会再被调用

```
 ProximityListener pl = new ProximityListener();
    lm. requestLocationUpdates("gps", 2000, 10, pl); 
```

这是活动的代码（在第一种情况下调用）

```
public class ProximityAlert extends Activity {
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    Log.d("intent", "Hi");
    finish();
} 
```

这是监听器

```
public class ProximityListener implements LocationListener {
String DEBUG_TAG = "ProximityListener";
@Override
public void onLocationChanged(Location location) {
    // TODO Auto-generated method stub
    Log.d(DEBUG_TAG, location.toString());

}

@Override
public void onProviderDisabled(String provider) {
    // TODO Auto-generated method stub

}

@Override
public void onProviderEnabled(String provider) {
    // TODO Auto-generated method stub

}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) {
    // TODO Auto-generated method stub

}
} 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-03T23:38:47.220

我认为问题在于您如何定义 Intent / PendingIntent。使用 Intent 启动 Activity 有两种方法，您包含的代码看起来像是两者的交叉。

启动 Activity 的标准方法是使用 Intent 构造函数，该构造函数采用当前上下文和 Activity 的类，并使用`getActivity`on 方法`PendingIntent`创建 PendingIntent：

```
Intent intent = new Intent(this, ProximityAlert.class);
PendingIntent pIntent = PendingIntent.getActivity(this, 0, intent, 0); 
```

或者，您可以`IntentReceiver`在 Manifest 中的 Activity 中添加一个用于侦听特定操作的 IntentFilter（例如“eu.mauriziopz.gps.ProximityAlert”）。但是，在这种情况下，您需要使用`PendingIntent.getBroadcast`来创建 PendingIntent。

```
Intent intent = new Intent("eu.mauriziopz.gps.ProximityAlert");
PendingIntent pIntent = PendingIntent.getBroadcast(this, 0, intent, 0); 
```

在所有情况下，您都需要确保您已获得清单中定义的基于位置的服务的正确权限：

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.INTERNET"/> 
```

* * *

此外，您可以考虑使用静态常量，而不是使用字符串“gps” `LocationManager.GPS_PROVIDER`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-06-21T08:29:05.490

```
Intent intent = new Intent("com.sccp.fourgdummy.REQUEST_DFGS");
intent.putExtra("launch_tab", "otp");
PendingIntent proximityIntent = PendingIntent.getActivity(this, 0, intent, Intent.FLAG_ACTIVITY_NEW_TASK); 
```

这个很重要 ：`Intent.FLAG_ACTIVITY_NEW_TASK`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-12-19T05:43:39.363

API 定义了`addProximityAlert`lat、long、radius、expiration、intent 的参数。您是否尝试过将到期时间设置为`-1`而不是`100000`

~~`lm.addProximityAlert(12, 12, 100, 1000000, pIntent);`~~

```
lm.addProximityAlert(12, 12, 100, -1, pIntent); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-01T12:32:43.077

I don't think you should terminate the Activity already in the onCreate method (by calling finish()).

# delphi - 从另一个表单访问 DataModule 上的事件

> ID：906853
> 
> 赞同：3
> 
> 时间：2009-05-25T14:02:52.983
> 
> 标签：delphi, event-handling, datamodule

在 Delphi 2009 中，我有一个带有过程 MyProcedure 的表单，该过程写入表单上的标签。该表单*使用*带有 ClientDataSet 的 DataModule。当 ClientDataSet 的 AfterScroll 事件被触发时，应该执行 MyProcedure。为了避免循环引用，更重要的是，由于我希望 DataModule 可重用，DataModule 不应引用此特定表单。

简而言之，我希望我可以从我的 Form 中访问 AfterScroll 事件。我可以从我的表单中连接 DataModule 上的 Afterscroll 事件吗？我认为这应该是可能的，但我不记得该怎么做。提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-25T14:18:04.480

您在 DataModule 中放置了一个事件属性：

```
private
FOnAfterScroll : TNotifyEvent;
public
property OnAfterScroll   : TNotifyEvent read FOnAfterScroll write FOnAfterScroll; 
```

然后在 DataModule 的 AfterScroll 过程中调用该事件：

```
If Assigned(FOnAfterScroll) then FOnAfterScroll(Self); 
```

在表单中：声明事件处理程序

```
procedure HandleAfterScroll(Sender : TObject); 
```

然后为 DataModule 的 OnAfterScroll 分配一个过程

> Datamodule1.OnAfterScroll := MyHandleAfterScroll;

另一种方法是从 DataModule 发送自定义窗口消息并在表单中响应该消息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-25T14:15:34.127

应该是这样的：

```
procedure TForm1.FormCreate(Sender: TObject);
begin
  DataModule1.MyCDS.AfterScroll := MyAfterScrollHandler;
end; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-25T14:23:24.220

如果您只想在不同的单元（例如表单）中声明事件处理程序，请遵循 Ulrich 的建议。如果您希望能够在数据模块中放置一个默认事件处理程序，然后能够扩展其行为，则需要做更多的工作。您可以通过向数据模块添加事件来完成此操作。

使用适当的签名定义一个方法指针，并在公共范围内将一个方法指针添加到数据模块，如下所示：

```
type
  TMyEvent = procedure({arg list here}) of object;

  TMyDataModule = class(TDataModule)
  //definition goes here
    procedure MyTableAfterScroll({arg list here});
  private
    FExternalEvent: TMyEvent;
  public
    property ExternalEvent: TMyEvent read FMyEvent write FMyEvent
  end;

implementation

procedure TMyDataModule.MyTableAfterScroll({arg list here});
begin
  //do whatever
  if assigned(FExternalEvent) then
    FExternalEvent({whatever arguments});
  //do more stuff, if you'd like
end; 
```

要连接它，在表单的 OnCreate 中，只需将您的过程分配给 MyDataModule.ExternalEvent 就可以了。

# java - 使用 xstream 解析谷歌地理编码

> ID：906855
> 
> 赞同：2
> 
> 时间：2009-05-25T14:03:37.507
> 
> 标签：java, geocoding, xstream

我正在使用 Java 和 XStream 通过 http 解析谷歌地理编码请求。我的想法是拥有一个包含所有地理编码属性（即纬度/经度、城市、省/州等）的地址类，但我在使用 xstream 解析 xml 时遇到问题。

谷歌的回应与此类似：

```
<?xml version="1.0" encoding="UTF-8" ?>
<kml xmlns="http://earth.google.com/kml/2.0"><Response>
  <name>98 St. Patrick St, Toronto</name>
  <Status>
    <code>200</code>
    <request>geocode</request>
  </Status>
  <Placemark id="p1">
    <address>98 St Patrick St, Toronto, ON, Canada</address>
    <AddressDetails Accuracy="8" xmlns="urn:oasis:names:tc:ciq:xsdschema:xAL:2.0"> <Country><CountryNameCode>CA</CountryNameCode><CountryName>Canada</CountryName><AdministrativeArea><AdministrativeAreaName>ON</AdministrativeAreaName><Locality><LocalityName>Toronto</LocalityName><Thoroughfare><ThoroughfareName>98 St Patrick St</ThoroughfareName></Thoroughfare><PostalCode><PostalCodeNumber>M5T</PostalCodeNumber></PostalCode></Locality></AdministrativeArea></Country></AddressDetails>
    <ExtendedData>
      <LatLonBox north="43.6560378" south="43.6497426" east="-79.3864912" west="-79.3927864" />
    </ExtendedData>
    <Point><coordinates>-79.3896388,43.6528902,0</coordinates></Point>
  </Placemark>
</Response></kml> 
```

这并没有很好地显示出来，但代码的核心在 AddressDetails 标记中。

无论如何，我是 Java 和 XStream 的新手，所以 API 术语对我来说有点混乱。我只需要能够编写一些映射器，将所有这些标签（即 CountryName）映射到我的地址对象中的一个属性，（即 address.country = blah）地址对象将非常简单，主要只是国家的字符串名称等并浮动纬度/经度。

文档和示例仅显示直接映射，其中每个 xml 标记直接映射到对象的同名属性。但是，在我的情况下，标签的名称与对象 attr 的名称不同。一个正确方向的快速点是我真正想要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-01T00:12:03.153

我在几个项目中使用过 XStream。不幸的是，您的问题并不是 XStream 旨在解决的问题。您也许可以使用它的转换器机制来实现您的直接目标，但您会遇到限制。简而言之，XStream 的设计目的不是将树结构 A 转换为树结构 B——它的目的是将 Java 域模型转换为一些合理的 XML。当您不太关心生成的 XML 的细节时，XStream 是一个很好的工具。如果您更关心 XML 而不是 Java 对象，请查看 XMLBeans——Java 很丑陋，但它非常符合模式。

对于您的项目，我将通过 XML bean 运行 Google XML 模式，生成一些 Java，这将为您提供一种更熟练的手动编码转换器的方式。您可以使用原始 DOM 树，但您将拥有类似 myAddress.setStreet(root.getFirstChild().getAttribute("addr1"))) 的代码。对于 XML bean，您可以说类似 myAddress.setStreet(googleResult.getAddress().getStreetName();

我会忽略 JAXB，因为它试图将接口与实现分开会增加不必要的复杂性。Castor 可能也是一个值得考虑的好工具，但我已经很多年没有使用它了。

简而言之，没有很多好的对象到对象或 XML 到对象的转换器可以很好地处理结构转换。在我见过的尝试声明性解决方案的那些方案中，所有这些方案似乎都比使用 XStream/XmlBeans 和手动编码的结构转换复杂得多（并且更难维护）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-25T14:39:32.240

是否可以定义一个专门用于处理 XStream 映射的单独类？`AddressDetails`然后，您可以通过从其他对象中查询值来简单地填充您的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-29T16:00:14.590

我最终只使用 xpath 并手动填充我自己的地址对象。似乎工作正常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-07-19T18:46:01.647

你试过json格式吗？它应该是相同的，但您需要将 com.thoughtworks.xstream.io.json.JettisonMappedXmlDriver 设置为 XStream 的驱动程序

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-07-21T19:06:26.803

您可以使用[EclipseLink JAXB (MOXy)](http://www.eclipse.org/eclipselink/moxy.php)来执行此操作：

```
package com.example;

import javax.xml.bind.annotation.XmlRootElement;
import org.eclipse.persistence.oxm.annotations.XmlPath;

@XmlRootElement(name="kml")
public class Address {

    private String country;

    @XmlPath("Response/Placemark/ns:AddressDetails/ns:Country/ns:CountryName/text()")
    public String getCountry() {
        return country;
    }

    public void setCountry(String country) {
        this.country = country;
    }

} 
```

和

```
@javax.xml.bind.annotation.XmlSchema( 
   namespace = "http://earth.google.com/kml/2.0",
   xmlns = { 
      @javax.xml.bind.annotation.XmlNs(
         prefix = "ns", namespaceURI ="urn:oasis:names:tc:ciq:xsdschema:xAL:2.0")
   },
   elementFormDefault = javax.xml.bind.annotation.XmlNsForm.QUALIFIED) 
package com.example; 
```

此处提供了完整示例：

*   [http://bdoughan.blogspot.com/2010/09/xpath-based-mapping-geocode-example.html](http://bdoughan.blogspot.com/2010/09/xpath-based-mapping-geocode-example.html)

# silverlight - StackPanel.Visibility 属性未按预期工作？

> ID：906858
> 
> 赞同：0
> 
> 时间：2009-05-25T14:05:02.667
> 
> 标签：silverlight, stackpanel

想象一下，我将以下代码保留在按钮单击中：

```
if(condition==true)
{
Panel1.Visibility = Visibility.Visible;
Panel.Visibility = Visibility.Collapsed;
}
else
{
Panel.Visibility = Visibility.Visible;
Panel1.Visibility = Visibility.Collapsed;
} 
```

第一次工作，然后一个面板折叠但另一个面板不可见。

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-26T18:43:20.017

可能是控件 Panel 和 Panel1 的父级在您修改其可见性时没有自行调整大小。尝试将 Panel 和 Panel1 放在有 2 行的 Grid 中，每行的 Height 设置为 Auto。过去，我在这种等级制度上取得了成功。如果这不起作用，您可以发布完整且最简单的 Xaml 来重现吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-27T15:01:33.010

实际上，当我移除面板时，面板已经设置了高度......无论如何，感谢回答者

# apache-flex - PopUpWindow 和空对象引用

> ID：906866
> 
> 赞同：0
> 
> 时间：2009-05-25T14:06:50.247
> 
> 标签：apache-flex, datagrid, binary, sockets

过去几个小时我一直在努力解决这个问题，但仍然不知道出了什么问题。这是场景：

构建在 Mate 框架之上的应用程序有时需要通过普通的二进制套接字与远程服务器交换数据。

收到特定数据包后，我必须切换视图（使用 ViewStack）并创建自定义面板（使用 PopUpManager 类）。此自定义面板包含一个 dataGrid 组件，该组件必须使用与提到的数据包一起接收的一些 XML 进行填充。

麻烦的是，当我尝试将 XML 分配给 DataGrid 的 dataProvider 时，我经常收到“无法访问空对象引用的属性或方法”错误。我唯一能想到的就是处理事件和创建组件时的某种竞赛。

以下是最有趣的代码片段：

```
<!-- LoginEvent.LOGIN_OK _____________________________________________________________________ -->

<EventHandlers type="{LoginEvent.LOGIN_OK}">

    <MethodInvoker generator="{UserManager}" method="storeCurrentUser" arguments="{event.fullName}"/>
    <EventAnnouncer generator="{NavigationEvent}" type="{NavigationEvent.MAIN}"/>
    <MethodInvoker generator="{CustomSocket}" method="listBoards"/> 
```

在上面的代码中，我在收到 LOGIN_OK 数据包时做出反应。

存储用户数据，更改视图并要求 Socket 类包装器发送请求（该请求的响应是我们的**verySpecificPacket**）

这是有关如何更改视图和创建自定义弹出窗口的详细信息。在 MainUI.mxml 中：

```
<mate:Listener type="{NavigationEvent.MAIN}"    method="handleNavigationEvent" />

private function launchBoardListWindow():void {
   Logger.info("launchBoardListWindow()");
   var win:BoardList = PopUpManager.createPopUp(this, BoardList, true) as BoardList;
   PopUpManager.centerPopUp(win);
}

private function handleNavigationEvent(event:NavigationEvent):void {

   viewStack.selectedIndex = MAIN;
   launchBoardListWindow();
} 
```

EventMap 中的第三个位置并不重要，它只是要求套接字包装器发送某种数据包。**服务器应该使用verySpecialPacket**以及XML 有效负载进行响应。在这里，我们处于错误所在的部分。在描述我的自定义面板的 mxml 中，我为接收到**verySpecialPacket后正在调度的事件设置了一个侦听器。**

```
public function handleListBoardsEvent(e:ListBoardsEvent):void {

   Logger.info("handleListBoardsEvent");        
   xmlData = e.xml;     
   boardList.dataProvider = xmlData.children(); // Here's the error!!!
} 
```

我真的不明白，因为 xmlData 没问题，并且创建了包含所有子组件的自定义面板。谢谢阅读！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-25T23:56:33.603

就比赛条件而言，您可能走在正确的轨道上。

建议：

放一个 try { ... } catch (e:Error) { trace("error"); 在你的 handleListBoardsEvent() 方法中阻塞代码。

然后，在 trace() 上放置一个断点，当它命中时，仔细查看所涉及的各种对象。

我的猜测是您试图在创建 boardList 对象之前访问它——即它为空。

另一种可能性是 boardList.dataProvider 是一个 setter，并且 setter 中有一些代码令人讨厌。（虽然，如果是这样的话，我相信你会注意到 FlexBuilder 中的堆栈跟踪）

# iphone - 带有第二个 NavBar 的可编辑 TextView - 出现文本，但为时已晚

> ID：906875
> 
> 赞同：0
> 
> 时间：2009-05-25T14:11:46.100
> 
> 标签：iphone, keyboard, uitextview, uinavigationbar

带有第二个 NavBar 的可编辑 TextView - 出现文本，但为时已晚。

该应用程序有一个导航控制器。我有一个基本上具有三个级别的 iPhone 应用程序。

1.  级别 1 - 具有类别名称的表

2.  级别 2 - 包含所选类别项目列表的表格

3.  第 3 级 - 具有多个视图的选项卡式视图，包括 UITextView 以获取项目一的详细信息，这些选项卡式视图具有 TextView 是可编辑的。

    当用户在可编辑的 TextView 中点击时，会出现键盘。用户可以在 TextView 中输入。字符在键入时出现。

    在这个 3 级 TextView 的顶部有一个导航栏（所有 3 个级别都有变化），右侧有一个 BackButton 和一个“home->Level1”按钮。

一切正常，直到在可编辑的 TextView 中，我在现有 NavBar 下方添加了第二个 NavigationBar。第二个 NavBar 也有两个按钮。它们是保存/取消。

当我单击这些保存和取消按钮时，会到达正确的操作方法。一切都很完美，只有一个例外，在触摸“保存”或“取消”按钮之前，输入的文本不会出现在 TextView 中。我的相关按钮设置和操作方法`TabViewController.m`如下。我需要保留这些数据。

我认为从 TextView 和操作 handleTextChange 获取通知可以解决问题，但没有运气。我被困住了。

```
.........
- (void)loadView {

    self.myTextView = [[UITextView alloc] init];
    self.myTextView.delegate = self;

    self.view   = self.myTextView;
    //UITextViewTextDidChangeNotification   
    NSNotificationCenter *nc = [NSNotificationCenter defaultCenter];
    [nc addObserver:self
    selector:@selector(handleTextChange:) 
    name:UITextViewTextDidChangeNotification
    object:nil];
    NSLog(@"Registered DG_HandleChangeTextNotification with notification center.");

}

- (void)handleTextChange:(NSNotification * )note 
{
    [self.myTextView  setNeedsDisplay] ;
    NSLog(@"...Handled Text Change.");
}

- (void)textViewDidBeginEditing:(UITextView *)textView
{
    // provide my own Done/Save button to dismiss the keyboard

    saveNavigationBar = [[UINavigationBar alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];
    saveNavigationBar.barStyle = UIBarStyleBlackOpaque;
    UINavigationItem *doneItem = [[UINavigationItem alloc] init];   
    doneItem.title = @"My Notes";

    UIBarButtonItem *doneItemButton = [[UIBarButtonItem alloc]
      initWithBarButtonSystemItem:UIBarButtonSystemItemSave 
        target:self action:@selector(saveAction:)];
    UIBarButtonItem *cancelItemButton = [[UIBarButtonItem alloc]
      initWithBarButtonSystemItem:UIBarButtonSystemItemCancel target:self 
        action:@selector(cancelAction:)];

    [doneItem setRightBarButtonItem:doneItemButton animated:NO];
    [doneItem setLeftBarButtonItem:cancelItemButton animated:NO];
    [saveNavigationBar pushNavigationItem:doneItem animated:NO];

    [self.view addSubview:saveNavigationBar];

    [doneItem release];
    [cancelItemButton release];
    [doneItemButton release];
}

- (void)saveAction:(id)sender
{
    // finish typing text/dismiss the keyboard by removing it as the first responder

        self.text = self.myTextView.text;
    [self.saveNavigationBar removeFromSuperview];

    [self.myTextView  resignFirstResponder]; 

}

- (void)cancelAction:(id)sender
{
    [self.saveNavigationBar removeFromSuperview];

    [self.myTextView  resignFirstResponder];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-27T00:53:33.953

第二个 NavBar 隐藏了 UITextEdit 的区域，因此我必须输入大约四行才能看到文本。我相信我需要将 UITextEdit 的高度降低 44 像素。

# javascript - 从 javascript 调用一个 url

> ID：906876
> 
> 赞同：15
> 
> 时间：2009-05-25T14:12:30.687
> 
> 标签：javascript

有没有办法使用 javascript 调用 url 并获得响应？我需要相当于 ASP.NET：

```
WebRequest req = HttpWebRequest.Create("http://someurl.com");
WebResponse webResponse = req.GetResponse(); 
```

我有一个包含一些我需要的信息的外部 url，我想从 javascript 调用这个 url 并解析响应以确定在我的应用程序中要做什么。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-05-25T14:15:28.310

如果 url 在同一个域中，您可以发出 AJAX 请求，例如，同一个主机不同的应用程序。如果是这样，我可能会使用像 jQuery 这样的框架，很可能是[get](http://docs.jquery.com/Ajax/jQuery.get#urldatacallbacktype)方法。

```
$.get('http://someurl.com',function(data,status) {
      ...parse the data...
},'html'); 
```

如果您遇到跨域问题，那么最好的办法是创建一个代理请求的服务器端操作。使用 AJAX 向服务器发出请求，获得服务器请求并从外部主机返回响应。

感谢@nickf，如果 url 在不同的域中，请指出我原始解决方案的明显问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-25T14:15:30.867

```
var req ;

// Browser compatibility check          
if (window.XMLHttpRequest) {
   req = new XMLHttpRequest();
    } else if (window.ActiveXObject) {

 try {
   req = new ActiveXObject("Msxml2.XMLHTTP");
 } catch (e) {

   try {
     req = new ActiveXObject("Microsoft.XMLHTTP");
   } catch (e) {}
 }

}

var req = new XMLHttpRequest();
req.open("GET", "test.html",true);
req.onreadystatechange = function () {
    //document.getElementById('divTxt').innerHTML = "Contents : " + req.responseText;
}

req.send(null); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-25T14:16:38.057

是的，您要求的是 AJAX 或 XMLHttpRequest。您可以使用像 jQuery 这样的库来简化调用（由于跨浏览器兼容性问题），或者编写自己的处理程序。

在 jQuery 中：

```
$.GET('url.asp', {data: 'here'}, function(data){ /* what to do with the data returned */ }) 
```

在普通的 javaScript（来自 w3c）中：

```
var xmlhttp;
function loadXMLDoc(url)
{
    xmlhttp=null;
if (window.XMLHttpRequest)
  {// code for all new browsers
      xmlhttp=new XMLHttpRequest();
  }
else if (window.ActiveXObject)
  {// code for IE5 and IE6
      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
if (xmlhttp!=null)
  {
      xmlhttp.onreadystatechange=state_Change;
      xmlhttp.open("GET",url,true);
      xmlhttp.send(null);
  }
else
  {
      alert("Your browser does not support XMLHTTP.");
  }
}

function state_Change()
{
    if (xmlhttp.readyState==4)
      {// 4 = "loaded"
          if (xmlhttp.status==200)
            {// 200 = OK
             //xmlhttp.data and shtuff
            // ...our code here...
        }
  else
        {
            alert("Problem retrieving data");
        }
  }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-25T14:28:23.837

如果您需要检查外部页面，您将无法使用纯 JavaScript 解决方案，因为对外部 URL 的任何请求都会被阻止。您可以通过使用 JSONP 来摆脱它，但除非您请求的页面仅提供 JSON，否则这将不起作用。

您需要在自己的服务器上有一个代理来为您获取外部链接。对于任何服务器端语言，这实际上都相当简单。

```
<?php
$contents = file_get_contents($_GET['url']); // please do some sanitation here...
                                             // i'm just showing an example.
echo $contents;
?> 
```

如果您需要检查服务器响应代码（例如：404、301 等），那么在您的服务器端脚本中使用诸如 cURL 之类的库可以检索该信息，然后将其传递到您的 javascript 应用程序。

*现在考虑一下，如果“设置我自己的代理”选项不可行，可能会有支持 JSONP 的代理供您使用。*

# iphone - 如何删除 XCode 中的 -mthumb 编译器标志？

> ID：906882
> 
> 赞同：2
> 
> 时间：2009-05-25T14:14:42.273
> 
> 标签：iphone, xcode, uikit

我一直在阅读，默认情况下有一个 -mthumb 编译器标志，可将代码大小减少 35%。然而，在像我这样的浮点计算密集型应用程序中，这不是一个好的选择，就像苹果说的那样。如果它改变任何东西，我想尝试一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-25T14:18:01.190

在目标选项中搜索“thumb”并取消选中该框。

或按照**blog.sapusmedia.com上的**[**这些说明**](http://blog.sapusmedia.com/2008/12/compile-for-thumb.html)进行操作。

 **# javascript - 在拖动图像或链接时禁用重定向

> ID：906884
> 
> 赞同：1
> 
> 时间：2009-05-25T14:15:14.270
> 
> 标签：javascript, css, events, event-handling

问题如下：

我正在使用 tinymce 编辑器（与问题无关）和外部图像管理器应用程序。我们为用户使用拖放功能，只需将图像从图像管理器拖到 tinymce 内容区域。

但是，当用户无意中将图像拖到内容区域之外时，就会出现问题。浏览器在它被拖到的窗口内打开链接，失去了用户在他们面前的表单。

我想知道是否有某种方法可以捕获此链接删除事件，以禁用浏览器中的重定向。如果您想查看问题，只需打开 2 个窗口，然后将图像从一个窗口拖到另一个窗口即可。

如果可能，解决方案也可以是 html/css，不一定是 JS。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-25T14:24:30.507

在正文上使用[onbeforeunload](https://developer.mozilla.org/en/DOM/window.onbeforeunload)事件。基本上，它会弹出一个对话框说（你指定字符串），“你确定要离开页面吗？”。如果他们单击取消，他们将停留在当前页面上。StackOverflow 本身（以及其他站点）使用这种技术。

# c# - 数字格式字符串：双倍到时间

> ID：906897
> 
> 赞同：0
> 
> 时间：2009-05-25T14:19:36.820
> 
> 标签：c#, string, formatting, format

我有一个以秒为单位的双精度值，我想使用数字格式字符串将其显示为 mm:ss 或 hh:mm:ss。这可能吗？没有在 MSDN 上找到任何关于它的信息吗？

原因是我们使用 Telerik Chart 来显示我们的数据，并且由于我无法更改基本格式，因此我必须将格式字符串挂接到他们的图表 api 中。

提前感谢约翰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-25T14:26:16.197

您正在寻找[TimeSpan 类](http://msdn.microsoft.com/en-us/library/system.timespan.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-25T14:58:28.300

使用以下内容：

```
var ts = new TimeSpan(0, 0, 0, (int)doubleValueOfSeconds, 0); 
```

当然，您可能需要考虑对双精度值进行更准确的舍入，而不是像我的示例中那样截断。

查看[MSDN 上的 TimeSpan](http://msdn.microsoft.com/en-us/library/system.timespan(VS.71).aspx)以获取字符串值，尽管当前最简单的特定于文化的东西是`TimeSpan.ToString()`.

**更新更新的问题**：

您不能直接将秒数格式化为日期和时间。格式化本质上是字符串操作，你需要在格式化发生之前做一些数学运算。

使用我上面的示例，然后调用`TimeSpan.ToString(formatString);`以获取要提供给控件的字符串值。

那是假设你没有简单地错过了什么。我个人认为 Telerik 控件非常复杂，但我确信它们会内置格式化。本质上，使用我上面的示例编写代码来创建具有时间跨度的数据，然后使用内置格式字符串告诉控件如何格式化给定数据系列的时间跨度。

# c# - 将枚举绑定到 WinForms 组合框，然后设置它

> ID：906899
> 
> 赞同：135
> 
> 时间：2009-05-25T14:19:52.950
> 
> 标签：c#, .net, winforms, combobox, enums

很多人都回答了如何将枚举绑定到 WinForms 中的组合框的问题。就像这样：

```
comboBox1.DataSource = Enum.GetValues(typeof(MyEnum)); 
```

但是，如果不能设置要显示的实际值，那将毫无用处。

我努力了：

```
comboBox1.SelectedItem = MyEnum.Something; // Does not work. SelectedItem remains null 
```

我也试过：

```
comboBox1.SelectedIndex = Convert.ToInt32(MyEnum.Something); // ArgumentOutOfRangeException, SelectedIndex remains -1 
```

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：176
> 
> 时间：2012-03-02T22:18:40.577

枚举

```
public enum Status { Active = 0, Canceled = 3 }; 
```

从中设置下拉值

```
cbStatus.DataSource = Enum.GetValues(typeof(Status)); 
```

从所选项目中获取枚举

```
Status status; 
Enum.TryParse<Status>(cbStatus.SelectedValue.ToString(), out status); 
```

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2015-09-04T07:39:48.980

简化：

首先初始化这个命令：（例如 after `InitalizeComponent()`）

```
yourComboBox.DataSource =  Enum.GetValues(typeof(YourEnum)); 
```

要检索组合框上的选定项目：

```
YourEnum enum = (YourEnum) yourComboBox.SelectedItem; 
```

如果要为组合框设置值：

```
yourComboBox.SelectedItem = YourEnem.Foo; 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2009-05-25T15:39:04.997

编码

```
comboBox1.SelectedItem = MyEnum.Something; 
```

没关系，问题一定出在 DataBinding 上。DataBinding 分配发生在构造函数之后，主要是第一次显示组合框时。尝试在 Load 事件中设置值。例如，添加以下代码：

```
protected override void OnLoad(EventArgs e)
{
    base.OnLoad(e);
    comboBox1.SelectedItem = MyEnum.Something;
} 
```

并检查它是否有效。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2009-05-25T14:26:05.790

尝试：

```
comboBox1.SelectedItem = MyEnum.Something; 
```

**编辑：**

哎呀，你已经试过了。但是，当我的组合框设置为 DropDownList 时，它对我有用。

这是我的完整代码，适用于我（同时使用 DropDown 和 DropDownList）：

```
public partial class Form1 : Form
{
    public enum BlahEnum
    { 
        Red,
        Green,
        Blue,
        Purple
    }

    public Form1()
    {
        InitializeComponent();

        comboBox1.DataSource = Enum.GetValues(typeof(BlahEnum));

    }

    private void button1_Click(object sender, EventArgs e)
    {
        comboBox1.SelectedItem = BlahEnum.Blue;
    }
} 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2010-12-14T21:59:11.013

假设您有以下枚举

```
public enum Numbers {Zero = 0, One, Two}; 
```

您需要有一个结构来将这些值映射到一个字符串：

```
public struct EntityName
{
    public Numbers _num;
    public string _caption;

    public EntityName(Numbers type, string caption)
    {
        _num = type;
        _caption = caption;
    }

    public Numbers GetNumber() 
    {
        return _num;
    }

    public override string ToString()
    {
        return _caption;
    }
} 
```

现在返回一个对象数组，其中所有枚举都映射到一个字符串：

```
public object[] GetNumberNameRange()
{
    return new object[]
    {
        new EntityName(Number.Zero, "Zero is chosen"),
        new EntityName(Number.One, "One is chosen"),
        new EntityName(Number.Two, "Two is chosen")
    };
} 
```

并使用以下内容填充您的组合框：

```
ComboBox numberCB = new ComboBox();
numberCB.Items.AddRange(GetNumberNameRange()); 
```

创建一个函数来检索枚举类型，以防万一你想将它传递给一个函数

```
public Numbers GetConversionType() 
{
    EntityName type = (EntityName)numberComboBox.SelectedItem;
    return type.GetNumber();           
} 
```

然后你应该没事:)

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2014-08-16T10:00:12.890

尝试这个：

```
// fill list
MyEnumDropDownList.DataSource = Enum.GetValues(typeof(MyEnum));

// binding
MyEnumDropDownList.DataBindings.Add(new Binding("SelectedValue", StoreObject, "StoreObjectMyEnumField")); 
```

StoreObject 是我的对象示例，其中 StoreObjectMyEnumField 属性用于存储 MyEnum 值。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2019-08-27T18:48:59.800

这可能永远不会在所有其他响应中看到，但这是我想出的代码，它的好处是使用`DescriptionAttribute`if 它存在，否则使用枚举值本身的名称。

我使用了字典，因为它有一个现成的键/值项模式。A`List<KeyValuePair<string,object>>`也可以工作并且没有不必要的散列，但是字典可以使代码更清晰。

我得到的成员有 a `MemberType`of`Field`并且是字面的。这将创建一个仅作为枚举值的成员的序列。这是稳健的，因为枚举不能有其他字段。

```
public static class ControlExtensions
{
    public static void BindToEnum<TEnum>(this ComboBox comboBox)
    {
        var enumType = typeof(TEnum);

        var fields = enumType.GetMembers()
                              .OfType<FieldInfo>()
                              .Where(p => p.MemberType == MemberTypes.Field)
                              .Where(p => p.IsLiteral)
                              .ToList();

        var valuesByName = new Dictionary<string, object>();

        foreach (var field in fields)
        {
            var descriptionAttribute = field.GetCustomAttribute(typeof(DescriptionAttribute), false) as DescriptionAttribute;

            var value = (int)field.GetValue(null);
            var description = string.Empty;

            if (!string.IsNullOrEmpty(descriptionAttribute?.Description))
            {
                description = descriptionAttribute.Description;
            }
            else
            {
                description = field.Name;
            }

            valuesByName[description] = value;
        }

        comboBox.DataSource = valuesByName.ToList();
        comboBox.DisplayMember = "Key";
        comboBox.ValueMember = "Value";
    }

} 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2014-09-23T14:54:57.590

```
 public static void FillByEnumOrderByNumber<TEnum>(this System.Windows.Forms.ListControl ctrl, TEnum enum1, bool showValueInDisplay = true) where TEnum : struct
    {
        if (!typeof(TEnum).IsEnum) throw new ArgumentException("An Enumeration type is required.", "enumObj");

        var values = from TEnum enumValue in Enum.GetValues(typeof(TEnum))
                     select
                        new
                         KeyValuePair<TEnum, string>(   (enumValue), enumValue.ToString());

        ctrl.DataSource = values
            .OrderBy(x => x.Key)

            .ToList();

        ctrl.DisplayMember = "Value";
        ctrl.ValueMember = "Key";

        ctrl.SelectedValue = enum1;
    }
    public static void  FillByEnumOrderByName<TEnum>(this System.Windows.Forms.ListControl ctrl, TEnum enum1, bool showValueInDisplay = true  ) where TEnum : struct
    {
        if (!typeof(TEnum).IsEnum) throw new ArgumentException("An Enumeration type is required.", "enumObj");

        var values = from TEnum enumValue in Enum.GetValues(typeof(TEnum))
                     select 
                        new 
                         KeyValuePair<TEnum,string> ( (enumValue),  enumValue.ToString()  );

        ctrl.DataSource = values
            .OrderBy(x=>x.Value)
            .ToList();

        ctrl.DisplayMember = "Value";
        ctrl.ValueMember = "Key";

        ctrl.SelectedValue = enum1;
    } 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2012-02-24T06:48:11.690

这是在组合框中加载枚举项的解决方案：

```
comboBox1.Items.AddRange( Enum.GetNames(typeof(Border3DStyle))); 
```

然后使用枚举项作为文本：

```
toolStripStatusLabel1.BorderStyle = (Border3DStyle)Enum.Parse(typeof(Border3DStyle),comboBox1.Text); 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2020-04-23T06:43:38.660

这对我有用：

```
comboBox1.DataSource = Enum.GetValues(typeof(MyEnum));
comboBox1.SelectedIndex = comboBox1.FindStringExact(MyEnum.something.ToString()); 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2016-04-05T15:21:35.943

根据@Amir Shenouda 的回答，我最终得到了这个：

枚举的定义：

```
public enum Status { Active = 0, Canceled = 3 }; 
```

从中设置下拉值：

```
cbStatus.DataSource = Enum.GetValues(typeof(Status)); 
```

从所选项目中获取枚举：

```
Status? status = cbStatus.SelectedValue as Status?; 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2011-08-16T17:18:19.660

```
public Form1()
{
    InitializeComponent();
    comboBox.DataSource = EnumWithName<SearchType>.ParseEnum();
    comboBox.DisplayMember = "Name";
}

public class EnumWithName<T>
{
    public string Name { get; set; }
    public T Value { get; set; }

    public static EnumWithName<T>[] ParseEnum()
    {
        List<EnumWithName<T>> list = new List<EnumWithName<T>>();

        foreach (object o in Enum.GetValues(typeof(T)))
        {
            list.Add(new EnumWithName<T>
            {
                Name = Enum.GetName(typeof(T), o).Replace('_', ' '),
                Value = (T)o
            });
        }

        return list.ToArray();
    }
}

public enum SearchType
{
    Value_1,
    Value_2
} 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2018-12-12T21:03:22.303

这些都不适合我，但这确实有效（它还有一个额外的好处，就是能够更好地描述每个枚举的名称）。我不确定这是否是由于 .net 更新造成的，但无论如何我认为这是最好的方法。您需要添加对以下内容的引用：

使用 System.ComponentModel；

```
enum MyEnum
{
    [Description("Red Color")]
    Red = 10,
    [Description("Blue Color")]
    Blue = 50
}

....

    private void LoadCombobox()
    {
        cmbxNewBox.DataSource = Enum.GetValues(typeof(MyEnum))
            .Cast<Enum>()
            .Select(value => new
            {
                (Attribute.GetCustomAttribute(value.GetType().GetField(value.ToString()), typeof(DescriptionAttribute)) as DescriptionAttribute).Description,
                value
            })
            .OrderBy(item => item.value)
            .ToList();
        cmbxNewBox.DisplayMember = "Description";
        cmbxNewBox.ValueMember = "value";
    } 
```

然后，当您要访问数据时，请使用以下两行：

```
 Enum.TryParse<MyEnum>(cmbxNewBox.SelectedValue.ToString(), out MyEnum proc);
        int nValue = (int)proc; 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2014-10-07T14:38:42.590

```
 public enum Colors
    {
        Red = 10,
        Blue = 20,
        Green = 30,
        Yellow = 40,
    }

comboBox1.DataSource = Enum.GetValues(typeof(Colors)); 
```

完整源代码...[将枚举绑定到组合框](http://csharp.net-informations.com/dataset/dataset-combobox.htm)

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2009-05-25T18:15:39.033

我使用以下帮助方法，您可以将其绑定到您的列表。

```
 ''' <summary>
    ''' Returns enumeration as a sortable list.
    ''' </summary>
    ''' <param name="t">GetType(some enumeration)</param>
    Public Shared Function GetEnumAsList(ByVal t As Type) As SortedList(Of String, Integer)

        If Not t.IsEnum Then
            Throw New ArgumentException("Type is not an enumeration.")
        End If

        Dim items As New SortedList(Of String, Integer)
        Dim enumValues As Integer() = [Enum].GetValues(t)
        Dim enumNames As String() = [Enum].GetNames(t)

        For i As Integer = 0 To enumValues.GetUpperBound(0)
            items.Add(enumNames(i), enumValues(i))
        Next

        Return items

    End Function 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2012-10-02T13:58:30.023

将枚举转换为字符串列表并将其添加到组合框

```
comboBox1.DataSource = Enum.GetValues(typeof(SomeEnum)).Cast<SomeEnum>(); 
```

使用 selectedItem 设置显示的值

```
comboBox1.SelectedItem = SomeEnum.SomeValue; 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2018-10-11T21:30:49.933

您可以使用扩展方法

```
 public static void EnumForComboBox(this ComboBox comboBox, Type enumType)
 {
     var memInfo = enumType.GetMembers().Where(a => a.MemberType == MemberTypes.Field).ToList();
     comboBox.Items.Clear();
     foreach (var member in memInfo)
     {
         var myAttributes = member.GetCustomAttribute(typeof(DescriptionAttribute), false);
         var description = (DescriptionAttribute)myAttributes;
         if (description != null)
         {
             if (!string.IsNullOrEmpty(description.Description))
             {
                 comboBox.Items.Add(description.Description);
                 comboBox.SelectedIndex = 0;
                 comboBox.DropDownStyle = ComboBoxStyle.DropDownList;
             }
         }   
     }
 } 
```

如何使用...声明枚举

```
using System.ComponentModel;

public enum CalculationType
{
    [Desciption("LoaderGroup")]
    LoaderGroup,
    [Description("LadingValue")]
    LadingValue,
    [Description("PerBill")]
    PerBill
} 
```

此方法在组合框项目中显示描述

```
combobox1.EnumForComboBox(typeof(CalculationType)); 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2014-04-23T09:56:19.090

这一直是个问题。如果你有一个排序枚举，比如从 0 到 ...

```
public enum Test
      one
      Two
      Three
 End 
```

您可以将名称绑定到组合框，而不是使用`.SelectedValue`属性使用`.SelectedIndex`

```
 Combobox.DataSource = System.Enum.GetNames(GetType(test)) 
```

和

```
Dim x as byte = 0
Combobox.Selectedindex=x 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2011-08-26T08:49:38.070

Old question perhaps here but I had the issue and the solution was easy and simple, I found this [http://www.c-sharpcorner.com/UploadFile/mahesh/1220/](http://www.c-sharpcorner.com/UploadFile/mahesh/1220/)

It makes use of the databining and works nicely so check it out.

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2011-08-31T16:37:27.000

```
comboBox1.DataSource = Enum.GetValues(typeof(MyEnum));

comboBox1.SelectedIndex = (int)MyEnum.Something;

comboBox1.SelectedIndex = Convert.ToInt32(MyEnum.Something); 
```

这两个都对我有用，你确定没有其他问题吗？

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2009-05-25T14:27:23.510

您可以使用“FindString..”功能：

```
Public Class Form1
    Public Enum Test
        pete
        jack
        fran
        bill
    End Enum
    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        ComboBox1.DataSource = [Enum].GetValues(GetType(Test))
        ComboBox1.SelectedIndex = ComboBox1.FindStringExact("jack")
        ComboBox1.SelectedIndex = ComboBox1.FindStringExact(Test.jack.ToString())
        ComboBox1.SelectedIndex = ComboBox1.FindStringExact([Enum].GetName(GetType(Test), Test.jack))
        ComboBox1.SelectedItem = Test.bill
    End Sub
End Class 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2009-05-25T14:29:04.380

```
comboBox1.SelectedItem = MyEnum.Something; 
```

应该工作得很好......你怎么知道那`SelectedItem`是空的？

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2009-05-25T14:33:35.620

您可以使用 KeyValuePair 值列表作为组合框的数据源。您将需要一个辅助方法，您可以在其中指定枚举类型并返回 IEnumerable> 其中 int 是枚举的值，字符串是枚举值的名称。在您的组合框中，将 DisplayMember 属性设置为“Key”，将 ValueMember 属性设置为“Value”。Value 和 Key 是 KeyValuePair 结构的公共属性。然后，当您将 SelectedItem 属性设置为您正在做的枚举值时，它应该可以工作。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2009-05-25T14:54:33.923

目前我使用的是 Items 属性而不是 DataSource，这意味着我必须为每个枚举值调用 Add，但它是一个小枚举，并且无论如何都是它的临时代码。

然后我可以对值执行 Convert.ToInt32 并使用 SelectedIndex 设置它。

临时解决方案，但现在是 YAGNI。

为这些想法喝彩，在获得一轮客户反馈后，当我做正确的版本时，我可能会使用它们。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2014-11-06T05:47:51.750

在 Framework 4 中，您可以使用以下代码：

要将 MultiColumnMode 枚举绑定到组合框，例如：

```
cbMultiColumnMode.Properties.Items.AddRange(typeof(MultiColumnMode).GetEnumNames()); 
```

并获得选定的索引：

```
MultiColumnMode multiColMode = (MultiColumnMode)cbMultiColumnMode.SelectedIndex; 
```

注意：我在这个例子中使用了 DevExpress 组合框，你可以在 Win Form Combobox 中做同样的事情

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2013-11-07T06:20:22.273

将枚举设置为下拉数据源的通用方法

显示将是名称。选定的值将是 Enum 本身

```
public IList<KeyValuePair<string, T>> GetDataSourceFromEnum<T>() where T : struct,IConvertible
    {
        IList<KeyValuePair<string, T>> list = new BindingList<KeyValuePair<string, T>>();
        foreach (string value in Enum.GetNames(typeof(T)))
        {
            list.Add(new KeyValuePair<string, T>(value, (T)Enum.Parse(typeof(T), value)));
        }
        return list;
    } 
```

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2015-06-12T14:59:04.373

这次聚会有点晚了，

SelectedValue.ToString() 方法应该拉入 DisplayedName 。然而，这篇文章[DataBinding Enum and Also With Descriptions](http://www.codeproject.com/Articles/19980/Data-Binding-an-Enum-with-Descriptions)展示了一种方便的方法，不仅可以拥有它，而且您可以向枚举添加自定义描述属性，如果您愿意，可以将其用作显示的值。非常简单易行，大约 15 行左右的代码（除非你算上花括号）。

这是非常漂亮的代码，您可以将其作为扩展方法来启动...

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2018-07-26T16:49:16.290

只能以这种方式使用强制转换：

```
if((YouEnum)ComboBoxControl.SelectedItem == YouEnum.Español)
{
   //TODO: type you code here
} 
```

# javascript - 为什么有些人认为 JavaScript 不好？

> ID：906900
> 
> 赞同：9
> 
> 时间：2009-05-25T14:21:44.053
> 
> 标签：javascript, security, browser

为什么允许在浏览器中禁用 JavaScript？（即为什么它被认为是坏的？）

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2009-05-25T15:06:36.630

```
<body onload="for(i=0; i<1000000; i++){window.open(
    'samplesite.com?pageid=' + i);}"> 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2009-05-25T14:23:07.903

> 为什么允许在浏览器中禁用 javascript？（即为什么它被认为是坏的？）

因为它可能被严重滥用（闪烁的图像，有人吗？），可能会减慢浏览器的速度，当然总是（非常有道理！）担心被利用的安全漏洞。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-05-25T14:25:42.687

首先，使用 Javascript，您可以创建用户可能不希望您创建的事件，例如更改窗口的大小......

另一方面，想想那些在某种程度上受到限制的人......如果您的用户是盲人并使用屏幕阅读器，而您的页面以某种方式不断更改其内容......在可访问性方面有很多反对 Javascript 的原因......

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2009-05-25T14:26:35.680

回到过去，它曾经是：

*   令人讨厌的光标跟随动画的来源（我相信你记得一些东西，比如下雨的绵羊或跟随光标的时钟......我想找到想到这个的聪明***并用鳟鱼拍他们）
*   被认为不安全
*   没有任何目的，但让浏览器陷入困境

然而，多年来，它变得更加先进和应用，背后有更多的思考。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2009-05-25T14:28:09.827

从历史上看，它一直是基于 Web 的服务的巨大安全问题。此外，对于任何可利用且技术门槛低的技术，它最终都会成为低俗麻烦制造者（脚本小子）的工具。在安全漏洞数据库中快速搜索[javascript](http://search.securityfocus.com/swsearch?sbm=%2F&metaname=alldoc&query=javascript&x=0&y=0)或[xss](http://search.securityfocus.com/swsearch?sbm=%2F&metaname=alldoc&query=xss&x=0&y=0)将显示数百页漏洞。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2009-05-25T14:31:48.790

JavaScript 通常被认为是危险的或至少令人讨厌的原因有两个：

*   网站可能会突然做一些你不想让他们做的事情，例如打开弹出窗口
*   网站可能会突然阻止您做您想做的事情，例如禁用右键单击

现在，在绝大多数情况下，JavaScript 是无害的，并且可以真正增强用户体验（想到[Ajax ）。](http://en.wikipedia.org/wiki/Ajax_%28programming%29)但它所需要的只是一个恶意站点，它使用 JavaScript 来做邪恶 (TM) 的事情，例如[跨站点脚本](http://en.wikipedia.org/wiki/Cross-site_scripting)。出于这个原因，通常认为最佳做法是全局禁用 JavaScript，并仅允许您明确信任的那些站点或域使用它。在这个时代，在互联网上偏执实际上是一件好事。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2009-12-06T03:00:02.723

它是一种弱类型的脚本语言。通常使用“大强”语言的程序员看不起这种胡说八道。为你考虑使用它而感到羞耻，我的上帝怜悯你的灵魂。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2009-05-25T15:05:26.633

就像其他人所说的那样，它使搜索引擎感到困惑。您添加的“动态”内容越多，它无法被索引的机会就越高。此外，互联网被许多人用作参考图书馆。当您阅读页面时，真实图书馆中的书籍不会改变周围的事物。您可能将您的网站视为“应用程序”，但您的用户可能更愿意将其视为“文档”。

简而言之，JavaScript 会混淆信息，有时甚至会完全拒绝访问（即，JavaScript 代码存在错误和崩溃）。一个典型的例子是几年前我无法观看[AOL](http://en.wikipedia.org/wiki/AOL)直播的 Live8 音乐会，因为 JavaScript 代码写得非常糟糕，实际上无法在我女朋友的 AOL 浏览器上运行（我知道很讽刺）。我试图直接访问电影 URL，但混淆太复杂了，我找不到它。它没有让我喜欢 AOL。

顺便说一句，我恰好是默认禁用 JavaScript 的人之一。[如果我需要它，我可以使用 Firefox 的NoScript](https://addons.mozilla.org/firefox/addon/722)插件在 2 秒内（真的）为特定站点或页面启用它。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2009-05-25T15:15:39.013

主要考虑的是安全性。通过 JavaScript 利用浏览器安全漏洞的路过式下载是当前恶意软件传播的最常见方式。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2009-05-25T14:23:20.213

它可能会导致安全问题。特别是在旧版本的 IE 中（不再那么多了）。

或者可能与[Stallman 的咆哮](http://www.gnu.org/philosophy/javascript-trap.html)有关；-)

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2009-12-06T03:05:43.463

一些公司或业务部门有不允许打开 javascript 的政策，因为担心任何安全漏洞的风险，这可能是最大的问题，因为它不能被安全地锁定，那么它必须是禁用。如果您可以在严格模式下运行 javascript，例如不允许 ajax 请求，那么您可能会发现更多人愿意在关注安全性的计算机上使用它。

只要用户可以访问网站，并且可以通过 Internet 透明地发送有关用户正在做什么的信息，那么这些安全问题就会存在。

例如，我可以有一个看起来很有用的 Firefox 插件，但它可能会向网站发送不需要的信息。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2009-12-06T04:33:11.027

因为它将负载从服务器转移到客户端，无法控制到什么程度。

我每天都使用 Javascript，并恭敬地承认它使什么成为可能，但有时当我浏览一个非常简单的页面时，界面反应很快，因为除了纯粹的、简单的 HTML 之外没有任何东西可以渲染，我认为那曾经是最初的目的 互联网的目的。您可以使用 600 MhZ Pentium 和 128 MB RAM 毫无问题地浏览这些页面，我只是夸大了一点。而对于一个 Javascript 繁重、高效的“丰富”网站，您需要在客户端拥有大量资源才能获得半流畅的体验，并且您需要几乎像游戏玩家一样经常更新您的设备。

此外，我通常对 Javascript 感到一些，不是敌意，而是*轻微*的烦恼，因为它通过添加**大量***不*兼容的目标平台、版本、晦涩难懂和特色来满足，以及通常容易出错、难以调试和易变的工作环境。

话虽如此，我认为这个行业应该非常感谢 JQuery、Prototype 等的创造者，非常感谢，等等。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2009-12-06T04:02:34.973

它可能会使浏览器崩溃，或对用户做烦人的事情。

然而，现在 Javascript 已经成为互联网的一个集成部分（Gmail、许多公司网站的账单支付等），如果你禁用它，那么浏览可能对你来说很困难，除非你有例外。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2009-05-25T14:39:24.470

JavaScript，正如 JSON 的发明者所说的那样，是世界的虚拟机。这是数十亿人所在的地方。这种巨大的曝光伴随着一些其他语言不必面对的危险。

**例子**。编写一个站点，只是将您“重定向”到另一个站点，您可以在其中登录。如果您不能完全控制您的浏览器/URL 等，一些 JavaScript 可能会从另一个站点加载页面内容并记录您的击键. 这可以通过几行 JavaScript 来实现。这不是 JavaScript 的真正错误（如果它完全是错误的话），而是所有组件（浏览器、HTML 和这个巨大的空间，我们称之为 Internet）。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2009-12-06T03:03:37.167

> 为什么允许在浏览器中禁用 javascript？（即为什么它被认为是坏的？）

因为浏览器并不完美！它为您提供了在需要时保护自己的方法。

当发现安全风险时，他们只会在他们的主页上发布

```
Please disable javascript until its fixed 
```

像这样，（我现在没有官方页面，所以从某个地方用谷歌搜索）

[http://browsers.about.com/b/2009/07/16/firefox-3-5-users-should-take-action-immediately.htm](http://browsers.about.com/b/2009/07/16/firefox-3-5-users-should-take-action-immediately.htm)

> 但是，在发布修复程序之前，我建议您完全禁用 JavaScript 或使用其他浏览器。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2009-12-06T03:05:01.590

在少数情况下 JavaScript 可能很危险（但任何东西都可能是危险的，包括无处不在的 Flash）。用户实际上禁用它或使用像 NoScript 这样的插件的原因在很大程度上是不合理的偏执狂。

最后，用户不会坚持破坏他们想要体验的网站的行为。所以，我不认为 JavaScript 偏执会成为一个长期问题，因为只有越来越多的网站依赖它（比如这个）。

这类似于我们几年前在 cookie 上看到的炒作。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2009-12-06T03:09:50.947

JavaScript 有一些非常“奇怪”的语言特性，比如通过忽略解析错误（“分号插入”）或 typeof 运算符的行为（数组是一个对象）来处理语句结尾处丢失的分号。

您确实需要了解该语言才能知道应该做哪些事情以及哪些事情是不好的。

但是该语言也有很多优点，比如它完全支持函数式编程。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2009-12-06T04:22:50.877

只有您访问有问题的网站是很糟糕的。没有 javascript，您将不会拥有 gmail、yahoo Finance 等应用程序。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2012-04-09T04:04:54.033

> 为什么允许在浏览器中禁用 JavaScript？

也许是因为计算机是为人类服务的工具？通过协议与计算机对话的计算机可以强制执行特定的行为。为用户编写软件的开发人员没有这种奢侈。

浏览器供应商强制要求“必须”启用 JavaScript 是没有意义的，因为有很多人不能或不想要它。尤其是因为 90% 的时间它只是被一些参差不齐的时髦人士用来制作猫图片的动画。

# c# - 使用 lame_enc.dll 或类似文件转换 mp3 比特率

> ID：906903
> 
> 赞同：1
> 
> 时间：2009-05-25T14:22:19.403
> 
> 标签：c#, mp3, bitrate

我需要以编程方式将任何比特率的 mp3 转换为标准比特率，以便使用 c# 流式传输音频。
目前，缓冲区中填充了来自磁盘的 mp3 数据，然后以应该是恒定的速度（广播）发送给“听众”，但 mp3 可以是任何比特率。这使得计时非常困难，应该以标准比特率而不是 mp3 本身规定的比特率流式传输。

Lame 似乎是适合这项工作的编码器，但任何文档或示例代码似乎只关心从 wav 示例转换为 mp3。不是 mp3 到 mp3。exe 包装器可以进行比特率转换，但对于传递给**beEncodeChunk()**的内容完全没有任何线索。

有没有人用跛脚或任何类似的编码器做这种事情的经验？我是否需要解码为 wav 然后编码回 mp3 以实现我所追求的？我张开双臂欢迎任何链接或建议。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-25T15:08:50.137

您必须将 mp3 解码为 wav，然后将其重新编码为新的比特率

# sql-server - SQL Server 性能和聚集索引值

> ID：906907
> 
> 赞同：0
> 
> 时间：2009-05-25T14:23:20.947
> 
> 标签：sql-server, performance, clustered-index

我有一个带有唯一聚集索引 myId 的表 myTable ，填充因子为 100% 它是一个整数，从零开始（但它不是表的标识列）我需要向表中添加一种新类型的行。如果我可以通过使用 myId 的负值来区分这些行，那可能会很好。

负值会导致额外的页面拆分并减慢插入速度吗？

额外背景：此表作为 etl 的一部分存在，用于从不同系统收集数据的数据仓库。我现在想容纳一种新型数据。我这样做的一种方法是为这些新数据保留负 ID，因此将自动聚类。这也将避免架构中的主要关键更改或额外列。

答案摘要： 100% 的填充系数通常会减慢插入速度。但不是顺序发生的插入，包括顺序否定插入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-25T14:26:54.557

不足以注意到任何合理的系统。

页面拆分发生在页面已满时，无论是在范围的开头还是结尾。只要你定期维护索引...

**编辑，填充因子评论后：**

在使用 90 或 100 FF 进行页面拆分后，每页将占满 50%。FF = 100 仅表示插入将更快发生（可能是第一次插入）。

对于严格单调递增（或递减）的键（+ve 或 -ve），页面拆分发生在范围的任一端。

但是，从 BOL，[FILLFACTOR](http://msdn.microsoft.com/en-us/library/ms177459.aspx)

填

> 将数据添加到表的末尾
> 
> 如果新数据均匀分布在整个表中，则除 0 或 100 之外的非零填充因子可能对性能有好处。但是，如果将所有数据都添加到表的末尾，则不会填充索引页中的空白空间。例如，如果索引键列是 IDENTITY 列，则新行的键始终在增加，并且索引行在逻辑上添加到索引的末尾。如果将使用延长行大小的数据更新现有行，请使用小于 100 的填充因子。每页上的额外字节将有助于最大程度地减少由行中的额外长度引起的页面拆分。

那么，对于严格单调的键，填充因子是否重要......？特别是如果它是低容量写入

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-25T23:32:35.943

除了您已经获得的实际管理点和可疑使用负 id 来表示数据模型属性之外，这里还有一个有效的问题：给出一个 int id 从 0 到 N 的表，插入新的负值这些值会去哪里他们会导致额外的分裂吗？

初始行将放置在聚集索引叶页上，id 为 0 的行位于第一页，id 为 N 的行位于最后一页，填充中间的页面。当插入值为 -1 的第一行时，这将排在 id 为 0 的行之前，因此将向树中添加一个新页面（实际上将分配 8 个页面的范围，但这是不同的点）和将链接页面放在叶级链接列表前面的页面。这不会导致前第一页的页面拆分。在进一步插入值 -2、-3 等时，它们将转到同一个新页面，并且它们将被插入到正确的位置（-2 在 -1 之前，-3 在 -2 之前等），直到页面填满。进一步的插入将在此页面之前添加一个新页面，该页面将容纳更多的新值。插入正值 N+1，

所以基本上答案是这样的：在聚集索引的任一端插入都不应该导致页面拆分。页面拆分只能由两个现有键**之间的插入引起。**这实际上也扩展到非叶页面，集群两端的索引也可能不会拆分非叶页面。我当然不会在这里讨论*更新*的影响（如果增加可变长度列的长度，它们可能会导致拆分）。

最近在 SQL Server 博客圈中关于页面拆分的潜在性能问题的讨论很多，但我必须警告不要采取不必要的极端来避免它们。页面拆分是一种正常的索引操作。如果您发现自己处于插入期间页面拆分性能影响可见的环境中，那么“缓解”措施可能会给您带来更严重的打击，因为您将创建人为的页面闩锁热点，这些热点要糟糕得多影响*每个*插入。**真实情况**是，频繁拆分的长时间操作会导致高碎片化，从而影响数据访问时间。我说最好通过非高峰期定期索引维护操作（重组）来缓解这种情况。避免过早的优化，总是先测量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-25T14:31:55.810

一点都不。负值与正值一样有效。没问题。基本上，在内部，它们都只是 4 个字节的 0 和 1 :-)

马克

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-25T15:15:35.443

你问错问题了！

如果创建填充因子为 100% 的聚集索引，则每次插入、删除甚至修改记录时，都可能发生页面拆分，因为现有索引数据页面上可能没有空间来写入更改。

即使定期维护索引，100% 的填充因子在您知道将要执行插入的表上也会适得其反。更常见的值是 90%。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-25T17:54:27.670

我担心这篇文章可能走错了方向，因为这里似乎存在一个潜在的设计问题，而不管产生的页面拆分如何。

为什么需要引入否定ID？

例如，整数主键应该唯一标识一行，它的符号应该是无关紧要的。如果不是这种情况，我怀疑您的表的主键可能存在定义问题。

如果您需要标记/识别新插入的记录，则专门为此目的创建一个列。

此解决方案将是理想的，因为您可以确保您的主键是顺序的（可能使用身份数据类型，尽管不是必需的），从而完全避免页面拆分问题（插入时）。

另外，为了确认是否可以，聚集索引主键（例如标识整数）的填充因子为 100%，不会导致顺序插入的页面拆分！

# c# - 如何在 C# 中创建用户可排序的列表框？

> ID：906909
> 
> 赞同：0
> 
> 时间：2009-05-25T14:23:41.943
> 
> 标签：c#, checkbox, sorting

我将如何在 c# 中创建用户可订购的复选框列表？用户需要从列表中选择要传递给另一个应用程序的文件，并且顺序很重要，因此我正在寻找一种使用侧面的向上/向下箭头类型界面来完成此操作的方法

关于我应该如何解决这个问题的任何想法？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-25T14:51:48.407

因此，严格来说，您的意思是可重新排序而不是可排序。

列表框项目属性允许基于索引的删除和插入。当用户单击向上/向下箭头时，只需根据 selectedindex 属性删除该项目，然后在 +1/-1 索引处再次将其插入。

# security - 网格框架中的网格安全

> ID：906910
> 
> 赞同：0
> 
> 时间：2009-05-25T14:23:46.217
> 
> 标签：security, grid, acl

最近，我开始尝试轻量级网格框架（Hazelcast、Gigaspaces、Infinispan）。

然而，令我惊讶的是，我尝试过的所有免费框架都没有内置任何 ACL 或基于角色的安全功能（Gigaspaces 确实有一些措施）。

通常使用什么方法来弥补这一点？我是否应该只使用网格在受信任的服务器端应用程序之间共享数据，并使用传统的 Java EE 堆栈（即传统的 DAO 层）来访问来自客户端或不受信任的服务器应用程序的数据？

是否有任何网格框架提供 ACL 功能以访问网格中的数据（我对一些特别的东西很满意，尽管遵守 Java EE 角色概念会很好）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-09-22T14:24:23.077

这是我对开源分布式缓存解决方案（例如 JBoss Cache 和 Infinispan）当前状态的看法。作为基线，我使用 GigaSpaces 商业缓存产品。让我知道您对开源和专有缓存产品的看法。

阅读更多：[http ://bigdatamatters.com/bigdatamatters/2009/09/infinispan-vs-gigaspaces.html](http://bigdatamatters.com/bigdatamatters/2009/09/infinispan-vs-gigaspaces.html)

# c++ - C++ 代码性能

> ID：906915
> 
> 赞同：1
> 
> 时间：2009-05-25T14:24:57.510
> 
> 标签：c++, visual-studio, performance, visual-studio-2005

什么时候要使用 VS2005 将代码写入 C++，如何衡量代码的性能？

VS中有任何默认工具吗？我可以知道哪个函数或类减慢了我的应用程序吗？

是否可以将其他外部工具集成到 VS 中以测量我的代码中的差距？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-25T14:37:19.450

如果您拥有 Visual Studio 2005 的 Team System 版本，则可以使用内置分析器。

*   [http://msdn.microsoft.com/en-gb/library/z9z62c29(VS.80).aspx](http://msdn.microsoft.com/en-gb/library/z9z62c29(VS.80).aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-25T18:31:24.633

[AMD CodeAnalyst](http://developer.amd.com/CPU/CODEANALYST/Pages/default.aspx)可在 Windows 和 Linux 上免费使用，并且适用于大多数 x86 或 x64 CPU（包括 Intel）。

当然，当您拥有 AMD 处理器时，它具有额外的功能。它还集成到 Visual Studio 中。

我很幸运。

* * *

请注意，一般至少有两种常见的分析器形式：

*   **检测**：改变你的构建以在某些区域的开始和结束记录信息（通常是每个功能）
*   **采样**：定期查看正在运行的代码以记录信息

记录的信息类型可以包括（但不限于）：经过的时间、CPU 周期数、缓存命中/未命中等。

检测可以特定于代码的某些区域（只是某些文件或只是您编译的代码，而不是您链接到的库）。开销要高得多（您将代码添加到项目中，这需要时间来执行，因此您正在更改时序；您可能会更改程序行为，例如中断处理程序或其他与时序相关的代码）。不过，您可以保证获得有关您所检测的功能/区域的信息。

采样可能会遗漏非常小或非常零星的功能，但现代机器有硬件帮助，可以让您进行更彻底的采样。请注意，一些采样系统可能仍会注入定时差异，尽管它们通常会小得多。

一些分析工具支持上述的混合，这取决于你如何使用它们。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-25T14:37:26.080

您也可以使用英特尔 VTune。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-25T14:37:20.013

您需要一个称为分析器的工具。对于涵盖大多数简单情况的免费软件，我推荐[非常困倦](http://www.codersnotes.com/sleepy/)。它通过定期对应用程序的当前调用堆栈进行采样来工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-25T14:32:23.877

您始终可以自己衡量代码的时间和性能。有关以下函数**QueryPerformanceCounter()**和**QueryPerformanceFrequency()**的信息，请咨询 MSDN 。

为了更深入地分析内存分配和执行时间，我们使用[Software Verify](http://www.softwareverify.com/)的 Memory Validator 和 Performance Validator 。它们支持 C++ 以外的多种语言。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-25T18:14:19.580

我认为衡量性能和定位要优化的代码是不同的问题，需要不同的方法。

为了找到要优化的代码，我发誓[这种简单的方法](https://stackoverflow.com/questions/375913/what-can-i-use-to-profile-c-code-in-linux/378024#378024)，它与公认的关于分析的智慧正交，并且不需要您购买或安装任何工具。

为了衡量性能，我对在循环中运行主题代码并对其进行计时的简单过程感到满意。

编辑：顺便说一句，我刚刚看了[很困](http://www.codersnotes.com/sleepy/)，它似乎在正确的轨道上。它对整个调用堆栈进行采样，并保留每个堆栈。我无法确定的是，对于每个调用指令或常规指令，它是否为您提供了包含该指令的堆栈样本的一部分。在我看来，这是最有价值的统计数据，不需要非常精确。

另一方面，dotTrace 看起来也可能保留了堆栈样本，但它的调用堆栈信息的 UI 表示似乎是一个调用树。我要寻找的是显示单个指令（或语句）的堆栈驻留百分比的东西，因为它们可能位于调用树的不同分支中，因此调用树可能会错过它们的重要性。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-25T21:27:13.340

对于侵入式测量，请使用性能计数器。由于您使用的是 C++，因此您应该在这个有点痛苦的 API 上使用外观。[STLSoft](http://www.stlsoft.org/)有[一系列这样的东西](http://www.stlsoft.org/doc-1.9/group__group____library____performance.html)，各有利弊。我建议`winstl::performance_counter`使用最高分辨率，或者`winstl::threadtimes_counter`如果您想监控特定线程的性能，而不考虑进程中的其他活动。几年前[Dobb 博士的一篇文章中对此进行](http://www.ddj.com/windows/184416651?pgno=1)了详细描述，其中详细描述了立面背后的设计原理。

对于非侵入式测量，您不能超过[VTune](http://software.intel.com/en-us/intel-vtune/)。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-25T14:29:56.033

我们使用 Rational quantify，它是[Rational PurifyPlus](http://www-01.ibm.com/software/awdtools/purifyplus/)工具集的一部分。

它是分析应用程序性能的绝佳工具。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-25T18:38:30.203

我最近尝试了 JetBrains **[dotTrace 分析器](http://www.jetbrains.com/profiler/index.html)**，它看起来非常好。它帮助我很容易地在现有 C++ 代码中找到了一些“黑洞”。

它在混合 C# 和 C++ 的解决方案中的 Visual Studio 2005 Professional 中运行良好 - 它为两段代码使用正确的函数名称并进行集成分析。您可以追踪时间或记忆。

评估期到期会很遗憾:)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-05-25T21:56:33.953

我们从[AQTime](http://www.automatedqa.com/products/aqtime/)取得了不错的成绩。它不是免费的，但比 Visual Studio 便宜；-)

# wiki - 有哪些关于贵公司如何使用 wiki 进行开发的示例？

> ID：906917
> 
> 赞同：3
> 
> 时间：2009-05-25T14:25:26.713
> 
> 标签：wiki, enterprise

您在公司中使用 wiki 吗？谁使用它和做什么。您是否在项目/团队/部门之间共享信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-25T15:15:10.700

我们用我们的来存储

*   编码风格文档
*   Web 服务器和站点的设置和部署过程
*   网络图（Dev、Staging、QA 和 Production 中的所有服务器称为什么等）
*   项目文档（pdf、visios、excel、docs 等）存储在 SVN 中。对于非技术人员，我们有指向 wiki 中那些文档的链接，这些文档指向我的盒子上的最新共享。（提示：一些 wiki 提供源代码控制集成，但我们没有）
*   开发工具的安装和设置过程
*   如何使用我们的错误跟踪系统，我们的单元测试理念
*   在对某个主题进行研究时，我通常会在 wiki 页面中获取重要信息以供其他人学习
*   我见过他们曾经在大中型组织中为新人保留座位表
*   在我以前的公司，所有紧急联系人和处理严重中断的程序都可以在 wiki 的首页上找到
*   wiki 最好的部分是它是可搜索的。一些 wiki 也支持在上传或链接的文档中进行搜索。

如果您建立一个 wiki 并鼓励甚至要求人们使用它，那么积累的信息量可能会非常惊人。这绝对值得付出努力，特别是如果您有 IT 部门的人有空闲时间来设置它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-25T14:27:01.077

> > 您在公司中使用 wiki 吗？

= 我们将其用于基于 Knowlede 的目的。基本上它是一个 wiki，但集成了更多功能。

> > 谁使用它以及用于什么

= 员工。知识共享、协作文档的准备等

> > 您是否在项目/团队/部门之间共享信息？

= 取决于要求。可以在用户之间设置权限。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-25T14:48:26.060

我们使用 wiki 来记录我们的系统。随着事物的更新和发展，它会逐渐更新。不言而喻，这样做是有好处的，但是无论您使用 wiki 还是其他方法都值得考虑。

wiki 非常适合协作编辑。这些信息在理论上不应该过时，因为当人们使用系统时，他们有机会使其保持最新。

然而，我们发现在我们的组织中，人们在使用 wiki 标记方面有些挣扎。尤其是桌子。我认为如果您有非高科技人员编辑它，那么具有所见即所得编辑的解决方案会更好。我想到了 Sharepoint，但它很昂贵。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-25T14:39:55.937

我使用 wiki 作为敏捷开发的虚拟“故事墙”。我所有的故事都是在 wiki 中编写和组织的。虽然我的客户相当本地化（我们可以进行面对面的会议），但他们并没有在同一地点。为了实现更好的客户交互，我使用了 wiki 而不是基于墙的故事跟踪机制。由于我的立方体中经常有多个并发项目和有限的墙壁空间，它对我来说也更好一些。在一个拥有更多专注项目和更多墙面积的更大团队中，我不确定我是否会做出同样的选择。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-25T15:02:33.987

我的公司使用 wiki 进行项目规划，但也用于存储文档和想法。
我发现 wiki 是一种将公司的程序员与商务人士联系起来的好方法。

当一个不属于编程团队的人提出一个想法或发现一个错误时，让那个人在 wiki 中记录它会更简单。

我认为对于像我这样的小公司来说，轻松地将业务团队与开发团队同步是一个重要方面。
wiki 对此有所帮助，因为它给人一种成为开发过程一部分的感觉，而不必直接向程序员询问每一个小细节。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-25T15:12:29.020

我们有 MediaWiki 来存储尚未准备好以其他格式发布的技术信息 - 规范草案、图表（通过 GraphViz 扩展）、短期调查结果等。

我也认为这个问题也是一个维基:)

# ms-access - MS Access：如何找出表、查询、宏等的使用位置？

> ID：906918
> 
> 赞同：10
> 
> 时间：2009-05-25T14:25:40.287
> 
> 标签：ms-access

我们继承了一个 MS Access 数据库/应用程序 (Office 2002)，其名称非常好，例如 NewTable、Subform 或 Macro1。不幸的是，当我们将这些更改为更有意义的名称时，引用（在其他查询、表单或操作中）不会更新。

我们如何找出特定对象的使用位置？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-11-12T13:09:20.770

MsAccess has an OBJECT DEPENDENCIES checker. in Access 2007, for example, you must:

1.  click on object (a table, for example);
2.  click on the DATABASE TOOLS tab;
3.  click on the OBJECT DEPENDENCIES (if asked to update dependencies info, click YES)

[this whitepage](https://support.office.com/en-US/Article/Learn-the-structure-of-an-Access-database-6a95097a-f95c-45bf-be9b-a3f8d7d61c1d#bm4) details the process and recommends additional steps that you might wish to take.

In access 2003 and 2000, the process is slightly different, for the interface changed significantly from 2007 onwards

[![Object Dependency in Access 2003](https://i.stack.imgur.com/xpPMZ.gif)](https://i.stack.imgur.com/xpPMZ.gif)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-05-25T15:18:17.120

您可以检查系统表、MSysObjects 和 MSysQueries 以获取对表和查询的引用（您也可以检查 querydefs 的 sql 字符串）。您可以循环访问表单和报表的属性及其控件，以获取对表、查询和宏的引用。您可以搜索代码。

名称更改自动更正选项通常已被弃用，但它可能在此处占有一席之地。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-07-24T11:59:23.627

I had found [ACCESS Dependency Checker](http://www.accessdependencychecker.com/) as free Microsoft Access Add-In that that reveals the dependencies between database objects like tables, queries, macros etc. I had installed and it's satisfactory for my needs. Try it.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-25T18:50:39.490

如果您在某处安装了 Access 2003：可以选择列出所有依赖项。只需右键单击一个对象并选择对象依赖项（我不确定翻译，我这里有荷兰语版本）。

这将向您显示两个方向的依赖关系。

在 Access 2003 中打开数据库后，您仍然可以在 Access 2002 中使用它。如果您不确定，可以随时创建备份副本。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-25T19:43:22.257

[Rick Fisher 的 Find and Replace](http://www.rickworld.com/products.html)是一个可以帮助您解决大部分问题的共享软件工具。它有 30 天的试用期，注册费用为 30 美元。

另一个功能更全的工具是[Black Moshannon 的 Speed Ferret](http://www.moshannon.com/)。这是一个非常优秀的产品，虽然相对昂贵（170 美元）。这也是相当有问题的，因为他们从未发布过 Access 2003 或 2007 的本机版本。但是在处理 2002 时，您在这方面很幸运。

如果你真的想快速做到这一点，Speed Ferret 绝对物有所值。考虑您的小时费率，任何重要的项目都会在您第一次使用时收回成本。

Rick Fisher 的工具不够专业，功能也不够全面，但可能足以满足您的需求。我只测试过它，从未在成熟的项目中使用过它。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-05-27T13:27:33.137

There is this small add-in, free and usefull [vtools](http://www.skrol29.com/us/vtools.php), that, among other possibilities, specifically allows you to search for values in all access objects (tables, queries, code, forms, ...).

# python - 带/不带预先编译的 exec 语句

> ID：906920
> 
> 赞同：1
> 
> 时间：2009-05-25T14:26:02.220
> 
> 标签：python, compilation, eval, exec

这个周末，我一直在拆解 Michele Simionato 的[装饰器模块](http://pypi.python.org/pypi/decorator/3.0.1)，它构建了保留签名的装饰器。这一切的核心是一个动态生成的函数，它的工作原理与此类似......

```
src = """def function(a,b,c) :\n    return _caller_(a,b,c)\n"""
evaldict = {'_caller_' : _caller_}
code = compile(src, '<string>', 'single')
exec code in evaldict
new_func = evaldict[function] 
```

我发现，玩弄这段代码，编译步骤可以完全避免，只需要一个：

```
exec src in evaldict 
```

现在，我确信这有充分的理由增加步骤，但我无法找到这两种方法之间的区别。表现？

既然我在问，是否可以通过 eval 实现类似的东西，即定义一个新函数并获得它的句柄？我试过了，但无法让它工作......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-25T15:19:16.277

我看到了一些差异。首先，[`compile`](http://www.python.org/doc/2.6.2/library/functions.html#compile)在面对语法错误时，语义比[`exec`](http://www.python.org/doc/2.6.2/reference/simple_stmts.html#the-exec-statement). 我怀疑真正的原因是，`compile`对于换行符的处理，定义非常明确，`exec`但不太精确。

我很好奇为什么`compile`以及`exec`在哪里被用来代替内部函数。我不知道`compile`/`exec`可以让您控制可用的全局变量。很有意思。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-25T19:37:26.480

compile() 允许您控制创建的代码对象及其名称和来源，而 exec 则不那么灵活。这样做也是值得的，其他人在阅读您的代码时会知道它们是单独的步骤，并在以后需要多次执行相同的代码时记住这一点（其中 compile() 一次，exec 多次将是更快），并且编写代码以教育下一个阅读它的人总是对设计选择产生有价值的影响。

# excel - excel的ROUND函数的实现

> ID：906925
> 
> 赞同：0
> 
> 时间：2009-05-25T14:26:51.187
> 
> 标签：excel, language-agnostic, fortran

您将如何实现 ROUND 函数：

```
ROUND(value, number of digits)
pi=3.14159265358979323
so, for example, ROUND(pi, 3) = 3.142 
```

如果您可以使用以下函数：
AINT - 将值截断为整数
ANINT - 计算最接近
的整数 NINT - 返回参数的最接近整数

或者不介意上述功能，浮动 ROUND 是如何完成的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-25T14:33:27.837

如果您不需要担心溢出，方法如下：

```
ROUND(value, nod) = NINT(value * POWER(10, nod)) / POWER(10, nod) 
```

否则，您需要分别处理整数部分和浮点部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-25T14:30:54.503

我会假设，请原谅我的伪代码

```
function Round(value, num){
    numsToSave = POWER(10, num);
    value *= numsToSave ; //Get the numbers we don't want rounded on the left side of the floating point
    value = AINT( ANINT(value) );
    value /= numsToSave;

    return value;
} 
```

或者

```
function Round(value, num){
    numsToSave = POWER(10, num);
    value *= numsToSave ; //Get the numbers we don't want rounded on the left side of the floating point
    value = NINT(value);
    value /= numsToSave;

    return value;
} 
```

# c# - “无法确定 URI 的格式”与 WebRequest

> ID：906932
> 
> 赞同：12
> 
> 时间：2009-05-25T14:27:52.387
> 
> 标签：c#, exception, httpwebrequest

我正在尝试使用 C# 中的 WebRequest 对站点执行 POST。我发布到的站点是一个 SMS 站点，messagetext 是 URL 的一部分。为了避免 URL 中的空格，我调用 HttpUtility.Encode() 对其进行 URL 编码。

但是当我使用类似于以下的代码时，我不断收到 URIFormatException -“无效的 URI：无法确定 URI 的格式”：

```
string url = "http://www.stackoverflow.com?question=a sentence with spaces";
string encoded = HttpUtility.UrlEncode(url);

WebRequest r = WebRequest.Create(encoded);
r.Method = "POST";
r.ContentLength = encoded.Length;
WebResponse response = r.GetResponse(); 
```

当我调用 WebRequest.Create() 时发生异常。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-05-25T14:30:20.667

您应该只对参数进行编码，而不是对整个 url 进行编码，因此请尝试：

```
string url = "http://www.stackoverflow.com?question=" + HttpUtility.UrlEncode("a sentence with spaces");

WebRequest r = WebRequest.Create(url);
r.Method = "POST";
r.ContentLength = encoded.Length;
WebResponse response = r.GetResponse(); 
```

对整个 url 进行编码意味着 :// 和 ? 也得到编码。编码后的字符串不再是有效的 url。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-25T14:30:27.310

UrlEncode 只能用于查询字符串。试试这个：

```
string query = "a sentence with spaces";
string encoded = "http://www.stackoverflow.com/?question=" + HttpUtility.UrlEncode(query); 
```

您的代码的当前版本正在对 URL 中的斜杠和冒号进行 urlencoding，这会混淆 webrequest。

# javascript - 如何使用 Regex 和 javascript 进行过滤？

> ID：906933
> 
> 赞同：0
> 
> 时间：2009-05-25T14:28:06.520
> 
> 标签：javascript, html, regex

我的页面中的元素中有一些文本，我想取消该页面上的价格，旁边没有任何文本。

我发现页面包含这样的价格：

```
<span class="discount">now $39.99</span> 
```

如何过滤这个并仅使用 JavaScript 和正则表达式获得“39.99 美元”。

*这个问题可能太简单了，或者以前用另一种方式问过，但我对正则表达式一无所知，所以请你帮忙:)。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-25T14:41:42.127

```
<script language="javascript">
window.onload = function () {

    // Get all of the elements with class name "discount"
    var elements = document.getElementsByClassName('discount');

    // Loop over each <span class="discount">
    for (var i=0; i < elements.length; i++) {

         // get the text, e.g. "now $39.99"
         var rawText = elements[i].innerHTML;

         // Here's a regular expression to match one or more digits (\d+)
         // followed by a period (\.) and one or more digits again (\d+)
         var priceAsString = rawText.match(/\d+\.\d+/)

         // You'll want to make the price a floating point number if you 
         // intend to do any calculations with it.
         var price = parseFloat(priceAsString); 

         // Now what do you want to do with the price? I'll just write it out
         // to the console (using FireBug or something similar)
         console.log(price);

    }
}
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-25T14:36:25.677

```
document.evaluate("//span[@class='discount']", 
  document, 
  null, 
  XPathResult.ANY_UNORDERED_NODE_TYPE, 
  null).singleNodeValue.textContent.replace("now $", ""); 
```

编辑：这是标准[XPath](http://en.wikipedia.org/wiki/XPath)。我不确定你在寻求什么样的解释。[对于过时的浏览器，您将需要像Sarissa](http://dev.abiss.gr/sarissa/)和/或[Java-line](http://developer.javeline.com/)这样的第三方库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-25T14:52:50.183

正则表达式根本不擅长解析 HTML（请参阅[您能否提供一些示例，说明为什么用正则表达式解析 XML 和 HTML 很困难？](https://stackoverflow.com/questions/701166)为什么）。您需要的是一个 HTML 解析器。请参阅[您能否提供一个使用您最喜欢的解析器解析 HTML 的示例？](https://stackoverflow.com/questions/773340)对于使用各种解析器的示例。

Patrick McElhaney 和 Matthew Flaschen 的回答都是解决问题的好方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-26T14:00:11.400

正如[Matthew Flaschen 所建议](https://stackoverflow.com/questions/906933/how-to-filter-using-regx-and-javascript/906967#906967)的那样，如果您对目标文档的节点结构有所了解（并且由于您提供了一个示例，您似乎知道），那么 XPATH 是一种更好的方法。如果您不知道节点结构，那么正则表达式对于解析 XML 仍然很糟糕。

一些更多的资源来启动你：

*   [Javascript 中的 XPath：简介](http://www.timkadlec.com/post.asp?q=47)
*   [使用 XPath 和 JavaScript 进行 DOM 解析](http://www.codestore.net/store.nsf/unid/BLOG-20050420)
*   Mozilla 开发中心：[在 JavaScript 中使用 XPath 的介绍](https://developer.mozilla.org/en/Introduction_to_using_XPath_in_JavaScript)

我还发现[DOM Inspector](https://addons.mozilla.org/en-US/firefox/addon/6622)和[XPather](https://addons.mozilla.org/en-US/firefox/addon/1192)的 FireFox 扩展组合是在给定页面上导出和测试 XPath 表达式的宝贵工具。（如果您使用的是其他浏览器——好吧，我不知道）。

# xslt - 使用XSLT，如何将每个标签变成一个与标签名称匹配的类的div？

> ID：906959
> 
> 赞同：1
> 
> 时间：2009-05-25T14:33:40.487
> 
> 标签：xslt, class, html

使用 XSLT，我希望能够对其进行转换：

```
<doc>
  <tag1>AAA</tag1>
  Hello !
  <tag2>BBB</tag2>
</doc> 
```

进入这个：

```
<div class="doc">
  <div class="tag1">AAA</div>
  Hello !
  <div class="tag2">BBB</div>
</div> 
```

...但没有在样式表中明确指定任何标签名称（现实世界中有太多标签名称）

最好的方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-25T14:40:51.440

类似的东西

```
<xslt:template match="*">
    <div class="{local-name()}">
        <xsl:apply-templates />
    </div>
</xslt:template> 
```

# openid - 表达式引擎：OpenID 支持？

> ID：906970
> 
> 赞同：0
> 
> 时间：2009-05-25T14:37:06.800
> 
> 标签：openid, expressionengine

有没有办法将 OpenID 与 EE 一起使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-25T15:47:59.677

你可以试试[EE Open ID](http://eeopenid.com/)。目前尚无支持的使用方式，但[该线程](http://expressionengine.com/forums/viewthread/24441/)表明开发人员意识到社区的愿望。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-02-20T12:21:19.217

现在有了 SocialEE：EE 中 RPX 支持的一个模块。这意味着您可以获得 Facebook Connect、OpenID 和整个 shebang。

[http://www.shotwellcompany.com/addons/socialee](http://www.shotwellcompany.com/addons/socialee)

# asp.net - 如何使用 HttpWebResponse 自动提交表单

> ID：906975
> 
> 赞同：0
> 
> 时间：2009-05-25T14:37:42.727
> 
> 标签：asp.net, screen-scraping, httpwebresponse

我正在寻找可以执行以下操作的应用程序

a)通过使用已经指定的用户名和密码，使用**HttpWebResponse**以编程方式**自动登录**到页面（login.asxp） 。

 **b) 如果登录成功，则检测重定向 URL。

c) 提交另一个表单 (settings.aspx) 以更新数据库中的某些字段。

所需的编码需要使用asp.net

应用程序需要在同一个会话 cookie 中完成这整个过程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-25T18:11:01.770

```
string sUrl = "login.aspx";
HttpWebRequest oRequest = (HttpWebRequest)WebRequest.Create(sUrl);
CookieContainer oMyCookies = new CookieContainer();
oRequest.CookieContainer = oMyCookies;
// encode postdata into byte array.  the postdata string format will most likely be different and you'll have to examine the postdata going back and forth using some firefox addon like LiveHTTPHeaders
byte[] oPostData = System.Encoding.UTF8.GetBytes("username=" + HttpUtility.UrlEncode(sUser) + "&pass=" HttpUtility.UrlEncode(sPass));
using (Stream oStream = oRequest.GetRequestStream())
{
    oStream.Write(oPostData, 0, oPostData.Length);
}
HttpWebResponse oResponse = oRequest.GetResponse();
// save response cookies in our cookie object for future sessions!
foreach (Cookie oCookie in oResponse.Cookies)
{
    oMyCookies.SetCookies(sUrl, oCookie.ToString());
}
// maybe check response headers for location
string sResponseContents = null;
using (StreamReader oReader = new StreamReader(oResponse.GetResponseStream())
{
    // store server response into string
    sResponseContents = oReader.ReadToEnd();
} 
```

...这是您想要做的事情所需的基本代码。

# qt - QGraphicsItem ：模拟不是左上角的项目原点

> ID：906994
> 
> 赞同：5
> 
> 时间：2009-05-25T14:42:04.917
> 
> 标签：qt, qgraphicsitem, qgraphicspixmapitem

我的应用程序正在使用 Qt。

我有一个继承[QGraphicsPixmapItem](https://doc.qt.io/qt-5/qgraphicspixmapitem.html)的类。

在这些项目上应用变换（例如，旋转）时，项目的原点（或枢轴点）始终是左上角。

我想改变这个原点，例如，在设置项目的位置时，这实际上会改变像素图的中心。

或者，如果我正在应用旋转，则旋转的原点将是像素图的中心。

我还没有找到使用 Qt 直接开箱即用的方法，所以我想像这样重新实现[itemChange()](https://doc.qt.io/qt-5/qgraphicsitem.html#itemChange)：

```
QVariant JGraphicsPixmapItem::itemChange(GraphicsItemChange Change, const QVariant& rValue)
{
    switch (Change)
    {
    case QGraphicsItem::ItemPositionHasChanged:
        // Emulate a pivot point in the center of the image
        this->translate(this->boundingRect().width() / 2,
                        this->boundingRect().height() / 2);
        break;
    case QGraphicsItem::ItemTransformHasChanged:
        break;
    }
    return QGraphicsItem::itemChange(Change, rValue);
} 
```

我认为这会起作用，因为[Qt 的文档](http://doc.qt.io/archives/4.6/qgraphicsitem.html#translate)提到项目的位置及其变换矩阵是两个不同的概念。

但它不起作用。

任何的想法 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-26T03:56:02.203

你想多了。QGraphicsPixmapItem 已经内置了这个功能。请参阅[setOffset](http://doc.qt.io/archives/4.6/qgraphicspixmapitem.html#setOffset)方法。

So to set the item origin at its centre, just do `setOffset( -0.5 * QPointF( width(), height() ) );` every time you set the pixmap.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-25T14:51:07.457

[关于旋转的 Qt 文档](http://doc.qt.io/archives/4.6/qgraphicsitem.html#rotate)：

> ## void QGraphicsItem::rotate (qreal 角度)
> 
> 围绕其原点顺时针旋转当前项目的变换角度。*要围绕任意点 (x, y) 平移，您需要将平移和旋转与 [`setTransform()`](http://doc.qt.io/archives/4.6/qgraphicsitem.html#setTransform).*
> 
> 例子：
> 
> ```
> // Rotate an item 45 degrees around (0, 0).
> item->rotate(45);
> 
> // Rotate an item 45 degrees around (x, y).
> item->setTransform(QTransform().translate(x, y).rotate(45).translate(-x, -y)); 
> ```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-05-25T15:51:54.467

您需要创建一个旋转函数，将对象平移到父级的 (0, 0) 角进行旋转并将对象移动到原始位置。

# visualization - 使用任何 Earth API 的实时数据可视化

> ID：906995
> 
> 赞同：0
> 
> 时间：2009-05-25T14:42:25.180
> 
> 标签：visualization, google-earth, google-earth-plugin, virtual-earth

如何使用“Google Earth API”或其他内容在此视频（1-2 分钟[http://www.ted.com/index.php/talks/sergey_brin_and_larry_page_on_google.html ）上创建类似内容？](http://www.ted.com/index.php/talks/sergey_brin_and_larry_page_on_google.html)

特别是：我有一个在线游戏，想在一些“虚拟地球”上显示动态数据。3 种类型的对象实时更改其状态。每 5 秒更新一次就足够了。我已经为它打开了 api。

问题是我不知道是否可以从球体中心绘制类似彩色线条的东西并动态更改它们。

很抱歉提出一个抽象的问题，但目标是相同的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-10T07:48:50.873

好吧，如果您使用的是 Google 地球 API（需要安装 Google 地球插件），您可以创建一堆挤压多边形。例如，如果您转到[Earth API Interactive Sampler](http://earth-api-samples.googlecode.com/svn/trunk/demos/interactive/index.html)并粘贴/运行以下内容：

```
var lookAt = ge.getView().copyAsLookAt(ge.ALTITUDE_RELATIVE_TO_GROUND);
var lat = lookAt.getLatitude();
var lng = lookAt.getLongitude();

// first create inner and outer boundaries
// outer boundary is a square
var outerBoundary = ge.createLinearRing('');
var coords = outerBoundary.getCoordinates();
coords.pushLatLngAlt(lat - 0.5, lng - 0.5, 1000000); 
coords.pushLatLngAlt(lat - 0.5, lng + 0.5, 1000000); 
coords.pushLatLngAlt(lat + 0.5, lng + 0.5, 1000000); 
coords.pushLatLngAlt(lat + 0.5, lng - 0.5, 1000000); 

// create the polygon and set its boundaries
var polygon = ge.createPolygon('');
polygon.setExtrude(true);
polygon.setAltitudeMode(ge.ALTITUDE_RELATIVE_TO_GROUND);
polygon.setOuterBoundary(outerBoundary);

// create the polygon placemark and add it to Earth
var polygonPlacemark = ge.createPlacemark('');
polygonPlacemark.setGeometry(polygon);
ge.getFeatures().appendChild(polygonPlacemark);

// persist the placemark for other interactive samples
window.placemark = polygonPlacemark;
window.polygonPlacemark = polygonPlacemark; 
```

您将看到一个 3D 多边形从地球中挤出。

你可以用这个做更多的事情；我建议通过访问 code.google.com/apis/earth 和 code.google.com/apis/kml 来使用 Earth API 和 KML（Earth API 中几何基元的基础）。****`*********`**