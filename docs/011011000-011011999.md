# StackOverflow 问答 11011000-11011999

# html - 为什么我的弹出窗口不显示？

> ID：11011001
> 
> 赞同：1
> 
> 时间：2012-06-13T08:32:22.153
> 
> 标签：html, css, jsp, popup

我在同一页面上有另一个使用此技术的弹出窗口，因此它应该可以工作，并且在我确实破坏了渲染的一些更新后它曾经可以工作。它曾经可以工作，但现在我有一个 HTML 回归错误，其中更新 b0rked 旧视图，所以现在我的弹出窗口不显示。我有许多应该激活弹出窗口的按钮： ![在此处输入图像描述](../Images/1685800dd8c93b58140d26e38e24a96a.png)

按搜索然后激活此代码

`<input type="button" value="S&ouml;k" onClick="getElementById('popupF').style.display=''">`

应该呈现这个弹出窗口

```
<div class="popup" id="popupF" 
<% if(!showSearchF) { %>
style="display: none;"
<% } %>
>
<%@ include file="includes/fullfoljd_fran_sok.jsp" %>
</div> 
```

反过来，这个 JSPF 片段应该呈现在这个页面的顶部，但什么也没有出现。

```
<table width="100%" border="0" cellspacing="0" cellpadding="2" align="center" class="TB_nb">
  <tr>
  <td colspan="3" class="pusher TB_nb"><h2>Sök person/företag</h2> 
</td>
  <td><a href="javascript:void(0)" onclick="document.getElementById('popupSokNamn').style.display = 'none';" >X</a></td>
</tr>
</table>
<br><br>
<h2 class="pusher">Sök person/företag</h2>
<div id="Vsok">

<div style="text-align: right; width: 100%; padding-right: 5%; padding-top: 5px;">
<span onClick="getElementById('sokF').style.display='', getElementById('bottomA').style.display='none', getElementById('bottomV').style.display='', getElementById('Vsok').style.display='none'" class="link_sm">Visa s&ouml;kformul&auml;r</span>
</div>

</div>

<div id="sokF">

<div style="text-align: right; width: 100%; padding-right: 5%; padding-top: 5px;; padding-bottom: 5px;">
<span onClick="getElementById('sokF').style.display='none', getElementById('bottomA').style.display='none', getElementById('bottomV').style.display='', getElementById('Vsok').style.display=''" class="link_sm">D&ouml;lj s&ouml;kformul&auml;r</span>
</div>

<div style="width: 100%; margin-left: 15px; margin-right: 80px;" class="fontS80">
<fieldset style="border: 1px solid Grey; display:inline;"><legend class="small">Fysisk</legend> 
<div class="fl30">&nbsp;F&ouml;rnamn:</div>
<div class="fl50"><input type="text" size="60" name="<%= PandoraFieldConstants.FIELD_SEARCH_FORNAMN %>" onkeyup="doSubmitByEnter('Namnsokning', 'search')"></div>
<div class="clear"></div>
<div class="fl30">&nbsp;Efternamn:</div>
<div class="fl50"><input type="text" size="60" name="<%= PandoraFieldConstants.FIELD_SEARCH_EFTERNAMN %>" onkeyup="doSubmitByEnter('Namnsokning', 'search')"></div>
</fieldset>

<fieldset style="border: 1px solid Grey; display:inline;"><legend class="small">Juridisk</legend> 
<div class="fl30">&nbsp;F&ouml;retag:</div>
<div class="fl50"><input type="text" size="60" name="<%= PandoraFieldConstants.FIELD_SEARCH_FORETAG %>" onkeyup="doSubmitByEnter('Namnsokning', 'search')"></div>
<div class="clear"></div>
<div class="fl30">&nbsp;Organisationsnummer:</div>
<div class="fl50"><input type="text" size="60" name="<%= PandoraFieldConstants.FIELD_SEARCH_ORGNUMMER %>" onkeyup="doSubmitByEnter('Namnsokning', 'search')"></div>
</fieldset> <br><br>

<!-- <div class="fl30">Attention, c/o etc.:</div>
<div class="fl50"><input type="text" size="60"></div>
<div class="clear"></div>

<div class="fl30">Postadress:</div>
<div class="fl50"><input type="text" size="60"></div>
<div class="clear"></div>

<div class="fl30">Postnummer:</div>
<div class="fl50"><input type="text" size="30"></div>
<div class="clear"></div> -->

<div class="fl30">Postort:</div>
<div class="fl50"><input type="text" size="40" name="<%= PandoraFieldConstants.FIELD_SEARCH_POSTORT %>" onkeyup="doSubmitByEnter('Namnsokning', 'search')"></div>
<div class="clear"></div>

<div class="fl30">Land:</div>
<div class="fl50"><input type="text" size="2" name="<%= PandoraFieldConstants.FIELD_SEARCH_LANDKOD %>" onkeyup="doSubmitByEnter('Namnsokning', 'search')">&nbsp;
                    <select name="<%= PandoraFieldConstants.FIELD_SEARCH_LAND %>" onkeyup="doSubmitByEnter('Namnsokning', 'search')">
                        <option value="1" SELECTED></option>
                        <option value="2"></option>
                        <option value="3"></option>
                        <option value="4"></option>
                        <option value="5">---------------------------------</option>
</select></div>
<div class="clear"></div>

<!-- <div class="fl30">Region:</div>
<div class="fl20"><select name="">
                        <option value="1" SELECTED></option>
                        <option value="2"></option>
                        <option value="3"></option>
                        <option value="4"></option>
                        <option value="5">-----------------------------------------------</option>
</select></div>
<div class="clear"></div>
<div class="fl30">Tel:</div>
<div class="fl50"><input type="text" size="40"></div>
<div class="clear"></div>

<div class="fl30">Fax:</div>
<div class="fl50"><input type="text" size="40"></div>
<div class="clear"></div>

<div class="fl30">E-post:</div>
<div class="fl50"><input type="text" size="60"></div>
<div class="clear"></div>
 -->
<div class="fl50">&nbsp;</div>
<div class="fl5"><input type="button" value="Rensa"></div>
<div class="fl10"><input type="button" value="  S&ouml;k  " onclick="javascript:doSubmit('Namnsokning', 'search')"></div>
<div class="clear">&nbsp;</div>
<div class="clear">&nbsp;</div>
</div>

</div>

<table width="100%" border="0" cellspacing="0" cellpadding="4" align="center">
<tr>    
    <td><h3>Sökresultat:</h3></td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
</tr>
<tr>    
    <td colspan="4">En massa text <span class="link">Hj&auml;lp!</span> </td>
</tr>
<tr>    
    <td><input type="button" value="Visa alla"></td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
</tr>
<tr class="smallb">
    <td>Antal &auml;renden: 527</td>
    <td>&nbsp;</td>
    <td>Visa &auml;renden: &#60;&#60; 1-200 201-400 401-527 &#62;&#62; </td>
<td>&nbsp;</td>
</tr>
</table>

<table width="100%" cellspacing="0" align="center" class="sortable" id="unique_id">
<tr>
    <th class="thkant">F&ouml;rnamn</th>
    <th class="thkant">Efternamn</th>
    <th class="thkant">Adress</th>
    <th class="thkant">Postnr</th>
    <th class="thkant">Postort</th>
    <th class="thkant">Region</th>
    <th class="thkant">Land</th>
    <th class="thkant">Telefonnummer</th>
</tr>

<%
    for(int i=0; i<apc.getSessionData().getNamnsokningLista().size(); i++) {

        PersonInfo person = (PersonInfo)apc.getSessionData().getNamnsokningLista().get(i);
        if(i%2==0) {
%>
<tr class="g1" onmouseover="javascript:setStoreStyle(this)"; onmouseout="javascript:getStoreStyle(this)" onclick="javascript:doSubmitWithModifierAndIndex('Grunduppgifter','editSearchPerson', '', '<%= person.getPersonId() %>')" style="cursor:pointer;">
<%
        } else {
%>
<tr class="g2"onmouseover="javascript:setStoreStyle(this)"; onmouseout="javascript:getStoreStyle(this)" onclick="javascript:doSubmitWithModifierAndIndex('Grunduppgifter','editSearchPerson', '', '<%= person.getPersonId() %>')" style="cursor:pointer;">
<%
        } 
%>
    <td><%= person.getFornamn() %></td>
    <td><%= person.getEfternamn() %></td>
    <td><%= person.getPostadress() %></td>
    <td><%= person.getPostnr() %></td>
    <td><%= person.getPostort() %></td>
    <td>&nbsp;</td>
    <td><%= person.getLandKod() %></td>
    <td><%= person.getTelefon() %></td> 
</tr>
<%
}
%>
</table>

<div id="bottomV">
<table width="100%" align="center">
<tr>
<td align="left"><input type="button" id="visaknapp" value="Visa" disabled style="width:150px;" onClick="getElementById('sokR').style.display='', getElementById('bottomA').style.display='', getElementById('bottomV').style.display='none', getElementById('Vsok').style.display='', getElementById('sokF').style.display='none'"></td>
<td align="right"><input type="button" value="Avbryt" style="width:150px;" class="checkmargin"><input type="button" value="Infoga" disabled style="width:150px;"></td>
</tr>
</table>
</div>

<div id="bottomA" style="display: none">
<table width="100%" align="center">
<tr>
<td align="left"><input type="button" value="&Auml;ndra i register" style="width:150px;"></td>
<td align="right"><input type="button" value="Avbryt" style="width:150px;" class="checkmargin"><input type="button" value="Infoga" style="width:150px;"></td>
</tr>
</table> 
```

但什么也没有出现。我怀疑有一些格式错误的 DIV 或其他 HTML 错误。使用 W3C 检查所有输出，有一些错误，但所有 DIV 都已关闭，并且我看不到其他相关的 HTML 错误。您认为我的弹出窗口不显示的原因是什么？你能帮我修一下吗？

谢谢

## 更新

完整的 HTMl 源代码粘贴在这里[http://pastebin.com/uEafLVBd](http://pastebin.com/uEafLVBd)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T08:41:31.533

尝试

```
document.getElementById('popupF').style.display='block' 
```

代替`getElementById('popupF').style.display=''`

[http://jsfiddle.net/j5mUj/5/](http://jsfiddle.net/j5mUj/5/)

# java - 如何在 Jconsole 工具中保存连接

> ID：11011006
> 
> 赞同：2
> 
> 时间：2012-06-13T08:32:43.050
> 
> 标签：java, jmx, jconsole

我编写了一个在服务器上运行的 Java 服务。

我使用`JMX`和`jconsole`监控来自 myPC 的服务。

为了连接，我必须将以下链接复制并粘贴到`jconsole`：

```
service:jmx:rmi://192.168.5.207:9999/jndi/rmi://192.168.5.207:9999/jmxrmi 
```

退出后`jconsole`，如果我想重新连接，我必须再次复制并粘贴链接。

有没有办法保存链接`jconsole`以便我可以重复使用它？

或者你能推荐另一个远程监控工具。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T08:43:42.803

我认为，您将无法在 JConsole 中保存 URL。您可以改用[VisualVM](http://visualvm.java.net/)。这是一个非常好的工具，它具有 JConsole 的所有功能以及一些非常好的额外功能。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-13T08:41:19.343

您可以将 URL 指定为程序参数：

> **jconsole [ 选项 ] [ pid | [主机：端口]]**
> 
> **PID**
> 
> 使用系统属性 com.sun.management.jmxremote 启动的本地 Java VM 的进程 ID。Java VM 必须使用与运行 jconsole 的用户 ID 相同的用户 ID 运行。有关详细信息，请参阅 JMX 监视和管理。
> 
> **主机：端口**
> 
> 运行 Java VM 的主机系统的名称以及 JVM 启动时由系统属性 com.sun.management.jmxremote.port 指定的端口号。有关详细信息，请参阅 JMX 监视和管理。

[http://docs.oracle.com/javase/1.5.0/docs/tooldocs/share/jconsole.html](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/share/jconsole.html)

# android - 获取 Android 源代码

> ID：11011007
> 
> 赞同：0
> 
> 时间：2012-06-13T08:32:49.780
> 
> 标签：android, android-source, repository

我想获取例如版本 2.3_r1 的 Android 源代码（您可以在此处查看所有版本：http: [//grepcode.com/project/repository.grepcode.com/java/ext/com.google.android/android/](http://grepcode.com/project/repository.grepcode.com/java/ext/com.google.android/android/) )

并根据[http://source.android.com/source/downloading.html](http://source.android.com/source/downloading.html)

我在写信`repo init -u https://android.googlesource.com/platform/manifest -b android-2.3_r1`

但似乎我正在下载所有源代码。

我的行为有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T08:59:22.703

我很确定这都是一个单一的 git 树，并且像这样指定分支只是说明在同步后要签出哪个 git 分支。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T09:01:13.673

不，你不是。git 只是告诉你它在远程端找到了哪些分支。您只需签出您指定的分支。

整个 repo 还包含几个 subrepos - 所以该`repo`命令执行多个`git clone`，看起来你也下载了所有分支。所以你将下载大约 6,5GB，我认为大约有 200 个存储库。

# jquery - jQuery Cycle插件菜单悬停效果自动启动

> ID：11011008
> 
> 赞同：0
> 
> 时间：2012-06-13T08:33:01.413
> 
> 标签：jquery, menu, hover, autostart

我正在尝试使用 Jquery Cycle 插件[http://malsup.com/jquery/cycle/](http://malsup.com/jquery/cycle/)创建菜单驱动程序幻灯片，但我不知道如何使其正常工作。它把数字放在导航上？我还希望它自动循环但在菜单项悬停时停止。

我希望它在与此插件类似的情况下工作（注意我不能使用它，因为它是与其他 jquery 冲突的 mootools） [http://www.devthought.com/wp-content/projects/mootools/barackslideshow/Demo /](http://www.devthought.com/wp-content/projects/mootools/barackslideshow/Demo/)

这是我正在实施的代码

```
<script type="text/javascript" src="js/jquery.cycle.all.2.72v2.js.gz"></script>   
<script type="text/javascript">
$(function() {
    $('#slideshow').cycle({
        speed:       200,
        timeout:     0,
        pager:      '#nav',
        pagerEvent: 'mouseover',
        activePagerClass: 'activeSlide', // class name used for the active pager element
    });
});
</script>

<div id="nav">
        <a href="#">test1</a>
        <a href="#">test2</a>
        <a href="#">test3</a>
        <a href="#">test4</a>
        <a href="#">test5</a>
        <a href="#">test6</a>
      </div>        
<div id="slideshow"  class="pics">
<a href="#"><img src="images/1.jpg" alt="#" /></a>
<a href="#"><img src="images/2.jpg" alt="#" /></a>
<a href="#"><img src="images/3.jpg" alt="#" /></a>
<a href="#"><img src="images/4.jpg" alt="#" /></a>
<a href="#"><img src="images/5.jpg" alt="#" /></a>
<a href="#"><img src="images/6.jpg" alt="#" /></a>                           
</div> 
```

谢谢你的帮助朱迪思

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:06:36.520

您对冲突的假设可以是句柄而不是 $ 使用`jQuery`，或者您可以使用自己的自定义 id，这样 jquery 可以通过执行以下操作设置为使用 jq：

```
var jq=$.noConflict(); 
```

这意味着您可以同时使用 jquery 和 mootools 而不会给您带来问题。

您找到的这个插件有选项 pause 可以在 hive 上启用暂停，请参见[此处](http://malsup.com/jquery/cycle/options.html)。所以在你的情况下：

```
$(function() {
    $('#slideshow').cycle({
        speed:       200, //timer removed so it cycles automatically.
        pager:      '#nav',
        pause:      1, //pause on hover
        pagerEvent: 'mouseover',
        after: onAfter,
        activePagerClass: 'activeSlide' //Remove comma here
    });
});

//Use this to add/remove styling to your #navs.
function onAfter() { 
 } 
```

它还指出你的容器的每个孩子都是一张幻灯片，所以在你的情况下，你`<a>`将是一张幻灯片，我建议将它包装在一个 div 中:)

# jquery - 找出事件未触发的原因

> ID：11011015
> 
> 赞同：0
> 
> 时间：2012-06-13T08:33:35.490
> 
> 标签：jquery

我有一个可拖动的，它在可拖动的范围内使用：

但是该事件没有触发，它是一个更大的 jQuery 文件的一部分，每次我将它添加到 jsFiddle 时它似乎都可以工作。是否有任何调试工具/方法可以用来找出此事件未触发的原因？

```
 over: function(event, ui) {
     console.log('in over');
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T08:48:07.600

在 Firebug 中你可以添加一个断点，你可以通过 console.log(ui) 来查看 ui 的值是否改变了

# javascript - 如何找到元素的最后一个子元素？

> ID：11011018
> 
> 赞同：3
> 
> 时间：2012-06-13T08:33:36.410
> 
> 标签：javascript, jquery, html

```
 <div id="main">
  <div class="1"></div>
  <div class="2"></div>
  <div class="2"></div>
  <div class="3"></div>
  <div class="3"></div>
  <div class="4"></div>
 </div> 
```

我们如何`:last-child`在 jquery 中编写一个选择器来找出`last div with class 3`?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-13T08:36:13.127

试试这个选择器......虽然你的课程不应该只是数字。他们应该从一个正常的字符开始。

`$("#main .3:last")`

仅供参考，`:last-child`检查目标是否是其父母的最后一个孩子。具有类的元素都不`.3`是其父级的最后一个子级。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T08:38:41.137

使用`.last()`：

```
$("#main .3").last(); 
```

[http://api.jquery.com/last/](http://api.jquery.com/last/)

[http://jsfiddle.net/E64Wm/1/](http://jsfiddle.net/E64Wm/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T08:36:48.843

`$('#main > .3').last()`应该指向正确的元素

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2012-06-13T08:36:02.340

尝试这个：

```
$('#main').find(':last-child'); 
```

# c# - 取消设置枚举标志

> ID：11011020
> 
> 赞同：50
> 
> 时间：2012-06-13T08:33:38.860
> 
> 标签：c#

考虑

```
 [Flags]
   public enum State
   {
      IsCool = 0x1,
      SomethingElse = 0x2
   } 
```

我有一个`State someState`，如果某个表达式的计算结果为真，我想取消设置`IsCool`标志，`someState` *无论*它已经设置或取消设置。这意味着我不能真正使用`someState ^= State.IsCool`，但我可以用什么来代替？

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2012-06-13T08:35:55.473

您需要以与设置标志相反的方式处理此问题：按位与当前状态与要删除的标志的补码。

```
someState &= ~State.IsCool; 
```

# c# - 多个小文件 v/s 一个用于 HTTP 请求的大文件

> ID：11011023
> 
> 赞同：1
> 
> 时间：2012-06-13T08:33:45.810
> 
> 标签：c#, asp.net, performance, http, web

我想知道哪种方法更好，多个 HTTP 请求要请求多个小文件，或者一次请求一个大文件

Plz 也提供了这两种方法的优缺点，因为我在网上得到了相互矛盾的搜索结果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T08:52:12.613

Yahoo 页面上的提示之一是**最小化 HTTP 请求**

[http://developer.yahoo.com/performance/rules.html#num_http](http://developer.yahoo.com/performance/rules.html#num_http)

主要原因是我们在每个请求中都有一个额外的开销。正如雅虎所说：

> 80% 的最终用户响应时间都花在了前端。大部分时间都用于下载页面中的所有组件：图像、样式表、脚本、Flash 等。减少组件的数量反过来会减少呈现页面所需的 HTTP 请求数量。这是加快页面速度的关键。

## 特别适用于 ASP.Net

在每个 ASP.Net 调用中，我们还拥有整个页面请求的会话锁定。这意味着所有用户的所有请求都必须相互等待，因为会话将锁定页面的其余部分，直到当前页面完成。

即使这听起来很糟糕，但它对启动和小型站点有很大帮助，因为它对所有数据的同步有很大帮助，而不仅仅是会话。

因此，通过多次调用，您可以获得一系列数据，而不是并行获取数据。

参考：[对 Web 服务的 jQuery Ajax 调用似乎是同步的](https://stackoverflow.com/questions/9052401/jquery-ajax-calls-to-web-service-seem-to-be-synchronous)

[完全替换 ASP.Net 的会话](https://stackoverflow.com/questions/8989648/replacing-asp-nets-session-entirely/9021543)

## Cookie 开销

对于每个请求，您还拥有从浏览器到服务器的 cookie。因此，如果您的 cookie 接近 500 字节并且您进行了 100 次调用，那么您有额外的 50KB 数据需要移动。这可以使用无 cookie 域来解决，但如果您没有此选项，那么接下来就是尝试减少调用。

参考：http: [//developer.yahoo.com/performance/rules.html#cookie_free](http://developer.yahoo.com/performance/rules.html#cookie_free)

## 精灵

如果您有许多图像要下载并显示在浏览器上，针对一个包含精灵的文件图像或其他图像，浏览器可以减少渲染时间，因为浏览器会重新渲染每个图像的每个部分。但是如果图像来自一个 sprite 文件，那么浏览器只需要一个动作来渲染它们 - 所以浏览器拥有更少的文件会更快。

## 脚本和 CSS

同样的事情也发生在这里。一旦你将所有的 javascript 合并到一个或两个文件中，浏览器就可以一次性获取并解析它们。如果您拥有尽可能多的文件，则浏览器需要逐一解析它们。此外，如果您 gzip 压缩 javascript 文件，它将比拥有许多较小的文件要好得多。

## 何时使用更多请求

对我来说，当这些数据可以与用户交互时，您可以使用 ajax 请求更多数据。这可能是请求额外数据库调用和计算的信息，您可以在第一次请求时避免这些信息，并且可能用户实际上从未要求过它们。

您可以通过这种方式拆分请求，以便仅在用户请求时获取额外数据，如果您这样做，您将减少数据库调用。

例如，在亚马逊的页面上，轮播控件仅在您在轮播中请求更多商品时才加载额外的商品，或者仅在您向下浏览页面时才显示用户历史记录。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T08:53:38.390

我不知道整个情况，不知道你如何定义“大文件”，但我不知道：

**一个大文件**

*   +可能更大的压缩率
*   +更少的往返服务器
*   - 更多数据下载

**几个较小的文件**

*   +客户端可能已经有一些，所以要传输的数据更少
*   - 更多往返服务器

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T09:02:55.447

与往常一样，当有人问一个没有上下文的开放式问题时，“这取决于”。

如果您一次通过网络发送大量数据，将其分成更小的块只会增加开销。压缩通常对较大的数据效果更好，每个请求的开销并不小，创建和维护到服务器的单个数据流也有好处。

但是，由于您已标记此 ASP.NET，因此可以合理地假设您正在谈论典型的网页数据。这些数据通常被分成单独的文件，通常是通过使用：样式表、脚本、页面内容、图像等。

这样做有方便的原因：作为开发人员，使用只有一种类型内容的文件更容易。从技术上讲，您*可以*将所有图像文件作为二进制数据嵌入到 HTML 文件的标记中，但这使得编辑图像变得非常困难！

在性能方面，较小的文件确实会稍微减慢初始传输速度，但通常会受益的是后续传输的速度。大多数客户端浏览器会缓存单个文件，并且不会重复下载这些文件。通过将内容分解为更小的文件并在多个页面中重复使用这些文件，我们减少了*跨多个请求*下载特定数据片段的次数。通过这种方式，您可以通过将可重复使用的内容分成更小的文件来提高整个站点的性能。

# .net - 对 Web 服务进行压力测试。.Net 框架

> ID：11011028
> 
> 赞同：0
> 
> 时间：2012-06-13T08:34:01.117
> 
> 标签：.net, web-services, stress-testing

我目前正在尝试强调基于 .Net 框架的 Web 服务，因此如果您能向我提供一些与 .Net 框架兼容的工具以及您对它们的评论，我将不胜感激。

我正在阅读有关 WCat 工具的信息，它看起来很有希望，我只是想要您对它和其他工具的评论。

非常感谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T13:44:17.580

我们使用[Load Tester](http://www.webperformance.com/load-testing/)测试了许多 .NET 应用程序，包括 Web 服务。

# ruby-on-rails - 如何在路径中自动包含 Gem？

> ID：11011030
> 
> 赞同：4
> 
> 时间：2012-06-13T08:34:11.863
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, gem

我有 foo.gem，里面`lib/foo.rb`有。

当我将 gem 添加到 Gemfile 时，我的路径中自动需要 foo.rb。但我需要自动包含它。这样做的原因是我正在制作控制台扩展，并且我希望它们可以在我不写“include Foo”的情况下使用。

我正在试验

```
SOME_CLASS.send(:include, Foo) 
```

但不确定使用什么类将其添加到路径中，例如当我启动自动包含的控制台时。以下是控制台中自动包含的一些 mixin，我需要我的 :) 谢谢

```
irb(main):006:0> self.class.included_modules
=> [PP::ObjectMixin, JSON::Ext::Generator::GeneratorMethods::Object, ActiveSupport::Dependencies::Loadable, Kernel] 
```

附言

我可以用初始化程序解决问题，但我不想更改项目的代码，我只想添加 gem 并且它可以工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T11:38:32.467

你试过了吗

```
Object.send(:include,Foo) 
```

或者

```
self.send(:include,Foo) 
```

在您的控制台内

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T11:44:49.343

您应该使用该[`Kernel`](http://www.ruby-doc.org/core-1.9.3/Kernel.html)模块，它包含在. 它是定义私有方法的地方，例如,和，因此它是定义命令式 API 的绝佳选择。 [`Object`](http://www.ruby-doc.org/core-1.9.3/Object.html)`exit``puts``require`

当您扩展时`Object`，人们希望能够在任何对象上显式调用您的方法，并且他们也明白您的方法取决于该对象的状态。

`Kernel`方法理解不同。尽管它们在技术上对所有对象都可用，但您不希望人们编写如下内容：

```
'some string'.sleep 1000 
```

这是没有意义的。[`sleep`](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-sleep)与字符串无关；它不以任何方式依赖它。它应该只使用隐式接收器调用，就好像`self`根本不存在的概念一样。

将您的方法设为私有并`Kernel`改为扩展可以帮助您传达该信息。

* * *

你可以这样做`foo.rb`：

```
module Foo
  # …
end

Some::Class.send :include, Foo 
```

当您`load`或`require`某些文件时，它会逐行执行。您可以将任意代码放在文件中的任何位置，甚至在模块和类定义中。您可以利用它来正确设置您的库，以便其他人不必这样做。

# iphone - iphone App中的剪刀功能

> ID：11011032
> 
> 赞同：-7
> 
> 时间：2012-06-13T08:34:18.813
> 
> 标签：iphone, objective-c, ios, image

Hiii 每个人都在 iPhone 中开发照片拼贴应用程序，我想在我的应用程序中使用剪刀功能，所以任何人都知道如何获得这种乐趣。在我的应用程序中，如果有人知道任何开源 API 来提供 Scissor 功能......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T08:47:32.903

查看本[指南](http://developer.apple.com/library/mac/#documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/dq_images/dq_images.html)简而言之，使用此功能，它可以从未裁剪的图像和裁剪蒙版中生成裁剪图像。

```
CGImageRef CGImageCreateWithMask (
   CGImageRef image,
   CGImageRef mask
); 
```

# sphinx - Sphinx 多重索引

> ID：11011035
> 
> 赞同：0
> 
> 时间：2012-06-13T08:34:36.467
> 
> 标签：sphinx

我正在做一个项目，其中我有一个配置文件。我现在正在做的是我的文件中有大约 20 个源和索引。新的将随着时间添加。现在我正在通过指定其名称来搜索特定索引。但我的问题是一些索引的时间不再使用，但与它相关的配置内容仍然存在于配置文件中。所以我真正想做的是，制作一个仅包含源和索引信息的文件。然后将该内容引用到主配置文件中。有没有这样做的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T18:37:03.733

目前 Sphinx 配置文件中不支持“包含”选项，但您可以在 Sphinx 设置中使用脚本支持（或 shebang 样式）：[http ://www.ivinco.com/blog/scripting-in-sphinx -配置/](http://www.ivinco.com/blog/scripting-in-sphinx-config/)

希望这可以帮助。

# android - 使用客人来比较用户签名

> ID：11011036
> 
> 赞同：2
> 
> 时间：2012-06-13T08:34:41.340
> 
> 标签：android, gesture

在我的应用程序中，用户将输入签名，下次它会比较并进行身份验证。

我看到了关于 SO 的问题，但我找不到我们如何比较。如果我们使用手势并将文件存储为图像，则它不正确，因为下次用户可能会几乎没有变化。

我曾尝试使用它自己的手势进行比较，但首先多冲程无法正常工作，第二次预测并不完美。

将手势添加到库： public void addGesture() { if (mGesture != null) {

```
 final GestureLibrary store = getStore();
            store.addGesture("ges", mGesture);
            store.save();
            setResult(RESULT_OK);

            final String path = new File(Environment.getExternalStorageDirectory(),
                    "gestures").getAbsolutePath();
            Toast.makeText(this,"success", Toast.LENGTH_LONG).show();
        } else {
            setResult(RESULT_CANCELED);
        }           
    } 
```

比较：

```
public void onGesturePerformed(GestureOverlayView overlay, Gesture gesture) {
        ArrayList<Prediction> predictions = mLibrary.recognize(gesture);
        Log.e("predictions","predictions----"+predictions.size());
        // We want at least one prediction
        if (predictions.size() > 0) {
            Prediction prediction = predictions.get(0);
            // We want at least some confidence in the result
            Log.e("SCORE","SCORE----"+prediction.score);
            if (prediction.score > 1.0) {
                // Show the spell
                Toast.makeText(this, prediction.name, Toast.LENGTH_SHORT).show();
            }
        }
    } 
```

任何人都可以提出一些关于这一点的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T09:20:39.113

您可以做的一件事是将预测分数从 0.7 降低到 0.7。

```
if (prediction.score > 0.7) {                 // Show the spell                 Toast.makeText(this, prediction.name, Toast.LENGTH_SHORT).show();             } 
```

我认为这应该可以解决您的问题。

# asp.net-mvc - T4MVC：MVC.Controller.ActionParams 是干什么用的？

> ID：11011040
> 
> 赞同：0
> 
> 时间：2012-06-13T08:34:53.727
> 
> 标签：asp.net-mvc, t4mvc

我找到了对应于每个操作的属性，命名如下：`MVC.<Controller>.<Action>Params`，它们包含每个操作的参数名称。它们的用途是什么以及如何使用它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T19:01:13.377

在某些边缘场景中，将参数名称作为常量传递很有趣。我无法立即回忆起那个人在做什么，但我可以看到这是有用的调用 AddRouteValue。最后，永远不必使用引用 C# 对象的文字字符串，无论它是类、方法还是参数。

# nhibernate - NHibernate 实体映射：具有最新订单的客户

> ID：11011041
> 
> 赞同：0
> 
> 时间：2012-06-13T08:34:54.970
> 
> 标签：nhibernate, fluent-nhibernate

我正在用 c# 开发一个 MVC3 应用程序，并且我将 NHibernate 用于 ORM 部分。我需要生成所有注册客户及其最新订单的列表。在应用程序方面，这需要遍历所有客户并检索他们的所有订单以提取最新的订单。不必要的开销，不是吗？

在数据库上，我可以创建一个视图并相应地为实体建模，但由于无法填充视图，我无法创建新客户。那么，您有什么想法或最佳实践是如何解决这些问题的？这是一个可以提供所需信息的 sql 查询：

```
SELECT c.id, c.name, c.description, m.ordernumber AS latest_order, m.unixtime, m.id AS latest_order_id
FROM dbo.customer c
LEFT JOIN dbo.mailorder m ON c.id = m.customer_id
WHERE m.unixtime = (SELECT MAX(unixtime) FROM dbo.mailorder) 
```

很感谢任何形式的帮助！

最好的问候，马丁

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T08:41:15.027

您可以使用公式来获取客户的最后一个订单，如下所示：

```
<property name="LatestOrder" formula="(SELECT MAX(dbo.mailorder.unixtime) FROM dbo.mailorder where dbo.mailorder.customer_id = ID)" /> 
```

# blackberry - 工具提示自定义

> ID：11011042
> 
> 赞同：0
> 
> 时间：2012-06-13T08:35:08.560
> 
> 标签：blackberry, popup, customization

我参考了我在堆栈上提出的早期问题创建了一个 CustomToolTip

[自定义弹出](https://stackoverflow.com/questions/10994282/custom-popup-to-work-like-tooltip-without-time-out)

和

[对话框创建](https://stackoverflow.com/questions/10962766/dialog-creation-in-blackberry)

现在，我创建了一个如下所示的 CustomisedToolTip 但问题是整个屏幕都被显示或占据了我需要的空间，以便前一个屏幕上的 TextField 在那一刻处于活动状态

我生成的自定义工具提示代码如下

```
import net.rim.device.api.system.Bitmap;
import net.rim.device.api.system.Characters;
import net.rim.device.api.ui.Color;
import net.rim.device.api.ui.Graphics;
import net.rim.device.api.ui.Manager;
import net.rim.device.api.ui.UiApplication;
import net.rim.device.api.ui.component.BitmapField;
import net.rim.device.api.ui.component.ButtonField;
import net.rim.device.api.ui.component.LabelField;
import net.rim.device.api.ui.container.PopupScreen;
import net.rim.device.api.ui.container.VerticalFieldManager;
import net.rim.device.api.ui.decor.Background;
import net.rim.device.api.ui.decor.BackgroundFactory;

public class ToolTip extends PopupScreen{

     protected void applyTheme() {

        }

    private static VerticalFieldManager vfm=new VerticalFieldManager(Manager.NON_FOCUSABLE|Manager.FIELD_HCENTER){

        protected void paint(Graphics graphics) {

            graphics.setColor(0x00FFFFFF); 
            graphics.fillRect(0,0,getWidth(),getHeight());
            graphics.setColor(0x00000000);
            graphics.drawRect(0,0,getWidth(),getHeight());
            super.paint(graphics);

        }   

    };

    private LabelField lbl;
    private static int xPosition;
    private static int yPosition;
    private String message;
    private static Bitmap toolTipImg;
    private static BitmapField toolTipBmpFld;
    private static ButtonField button;
    public ToolTip(final String message,int xPos,int yPos,final Bitmap toolTipImg){
        super(vfm);
        this.xPosition=xPos;
        this.yPosition=yPos;
        this.message=message;
        this.toolTipImg=toolTipImg;

        button=new ButtonField(message,ButtonField.NON_FOCUSABLE){
            protected void paint(Graphics graphics) {
                graphics.drawBitmap(0,0, toolTipImg.getWidth(), toolTipImg.getHeight(), toolTipImg, 0, 0);
                super.paint(graphics);
            }
            protected void layout(int width, int height) {
                super.layout(width, height);
                setExtent( toolTipImg.getWidth(),  toolTipImg.getHeight());

            }
        };

        vfm.add(button);
    }

    protected void sublayout(int width, int height) {
        super.sublayout(width, height);
        setPosition(xPosition, yPosition);

    }

    protected boolean keyChar(char c, int status, int time) {
        // TODO Auto-generated method stub
        if(c==Characters.ESCAPE)
        {
            UiApplication.getUiApplication().popScreen(UiApplication.getUiApplication().getActiveScreen());
        }
        return super.keyChar(c, status, time);
    }

} 
```

我可以在黑莓中获得这样的弹出窗口吗

![工具提示图片](../Images/7659f93c13a33e6f509b5e9b76ee311c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T10:54:39.287

在这种情况下，覆盖的`protected void paint(Graphics graphics)`方法可能会有所帮助。`MainScreen`

当`Field`获得焦点时，您可以告诉`MainScreen`（父屏幕）*`tooltip`*在完成自己的绘制后在指定位置绘制一个。而当`Field`失去焦点时，可以避免*`tooltip`*绘画。也*`timer`*可以引入a 以*`tooltip`*在一段时间后删除。

检查以下实现。实现需要改进，目前仅代表我的想法。

```
public final class MyScreen extends MainScreen implements TooltipProtocol {

    private TooltipProtocol tooltipProtocolInstance;
    public MyScreen() {
        tooltipProtocolInstance = this;
        ButtonField bfOne = getButtonField("ButtonField One", "Tooltip One", 200, 20);
        ButtonField bfTwo = getButtonField("ButtonField Two", "Tooltip Two", 200, 60);
        add(bfOne);
        add(bfTwo);
    }

    private ButtonField getButtonField(String text, final String tooltiptext, final int x, final int y) {
        ButtonField bf = new ButtonField(text) {
            protected void onFocus(int direction) {
                tooltipProtocolInstance.showToolTipText(tooltiptext, x, y);
                super.onFocus(direction);
            }
            protected void onUnfocus() {
                tooltipProtocolInstance.hideToolTipText();
                super.onUnfocus();
            }
        };
        return bf;
    }

    private String toolTipText;
    private int xTooptip;
    private int yTooptip;
    private Timer tooltipTimer;

    public void showToolTipText(String text, int x, int y) {
        toolTipText = text;
        xTooptip = x;
        yTooptip = y;
        if (tooltipTimer != null) {
            tooltipTimer.cancel();
            tooltipTimer = null;
        }
        tooltipTimer = new Timer();
        tooltipTimer.schedule(new TimerTask() {
            public void run() {
                hideToolTipText();
            }
        }, 2000);

        invalidate();
    }

    public void hideToolTipText() {
        toolTipText = null;
        invalidate();
    }

    protected void paint(Graphics graphics) {
        super.paint(graphics);
        if (toolTipText != null) {
            int oldColor = graphics.getColor();
            graphics.setColor(Color.GREEN);
            graphics.drawText(toolTipText, xTooptip, yTooptip);
            graphics.setColor(oldColor);
        }
    }
}

interface TooltipProtocol {
    public void showToolTipText(String text, int x, int y);
    public void hideToolTipText();
} 
```

***以下是上述代码的输出：***

*   当第一个按钮获得焦点时

![](../Images/49b5b41000f963d578af285f1dc68c40.png)

*   当第一个按钮失去焦点时，第二个按钮获得焦点

![](../Images/92a0d642fb1f51194bdb3f5bf02d9fb4.png)

*   当计时器隐藏*`tooltip`*第二个按钮时

![](../Images/ec1af2ff57500e448d9050c692513f73.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T11:46:40.497

据我了解这个问题，您想创建一个工具提示类型的弹出屏幕，但您希望用户与您的 LoginScreen UI 元素进行交互，而不会被工具提示阻塞整个屏幕。

这在黑莓中是无法实现的。PropupScreen 就像一个对话框。当我们将弹出屏幕的实例推送到屏幕堆栈以使其可视化时，它总是会阻塞代理屏幕。除非您从屏幕堆栈中删除弹出窗口，否则您无法与 LoginScreen UI 组件交互，尽管它们在视觉上是可用的。

有关更多详细信息，请访问 Blackberry java 文档：http: [//www.blackberry.com/developers/docs/6.0.0api/net/rim/device/api/ui/container/PopupScreen.html](http://www.blackberry.com/developers/docs/6.0.0api/net/rim/device/api/ui/container/PopupScreen.html)

**编辑：1**

您可以创建一个提供计时器的工具提示屏幕。你可以用谷歌搜索，我相信你会得到很多代码示例。我在下面列出了一个链接。

[http://v4ks1n.wordpress.com/2011/01/28/tooltips-class-for-blackberry/](http://v4ks1n.wordpress.com/2011/01/28/tooltips-class-for-blackberry/)

# yii - yii-dropdown 值未设置到 db

> ID：11011045
> 
> 赞同：0
> 
> 时间：2012-06-13T08:35:19.420
> 
> 标签：yii

我的 2 个相关下拉菜单考试类型和状态工作正常，它们显示值..但这些值没有设置到数据库中..请帮助我...这是我的代码

表单视图：

* * *

```
 <tr>
<td><?php echo $form->labelEx($model,'exam type :'); ?></td>

<td> 

   <?php echo   CHtml::dropDownList('exam_type','',CHtml::listData(class1::model()->findAll(),'class','class'),array('empty'=>'Choose one',

'ajax' => array(
'type'=>'POST', //request type
'url'=>CController::createUrl('dynamicstates'), //url to call.
//Style: CController::createUrl('currentController/methodToCall')
'update'=>'#status', //selector to update

)));

//empty since it will be filled by the other dropdown
?>

</td>

<td>    <?php echo $form->error($model,'exam_type'); ?></td>

</tr>
 <tr>
<td><?php echo $form->labelEx($model,'status :'); ?></td>
<td><?php echo CHtml::dropDownList('status','', array());?></td>
<td>    <?php echo $form->error($model,'status'); ?></td>

</tr> 
```

## 控制器视图：

```
public function actiondynamicstates()
{

echo $aasd=$_POST['exam_type'];
 echo $data=admission::model()->findAll('class=:class',
              array(':class'=>$aasd));

$data=CHtml::listData($data,'studentid','studentfname');

    foreach($data as $value=>$name)
            echo CHtml::tag('option', array('value'=>$value), CHtml::encode($name), true);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:36:19.407

很可能是下拉名称中的问题。你应该更换

```
CHtml::dropDownList('exam_type' 
```

和

```
CHtml::dropDownList(CHtml::activeName($model, 'exam_type' 
```

和

```
CHtml::dropDownList('status' 
```

和

```
CHtml::dropDownList(CHtml::activeName($model, 'status' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T08:17:26.437

几天前我也陷入了这个问题。我做了一些工作。

```
 <tr>
<td><?php echo $form->labelEx($model,'exam type :'); ?></td>

<td> 

<?php echo   CHtml::dropDownList('exam_type','',CHtml::listData(class1::model()->findAll(),'class','class'),array('empty'=>'Choose one',

'ajax' => array(
'type'=>'POST', //request type
 'url'=>CController::createUrl('dynamicstates'), //url to call.
//Style: CController::createUrl('currentController/methodToCall')
// 'update'=>'#status', //selector to update
 'update'=>'#modelname_status', //here is the trick replace modelname to orginal model class name 

  )));

 //empty since it will be filled by the other dropdown
 ?>
 </td>

 <td>    <?php echo $form->error($model,'exam_type'); ?></td>

 </tr>
 <tr>
 <td><?php echo $form->labelEx($model,'status :'); ?></td>
  <?php //echo CHtml::dropDownList('status','', array());?>
 <td><?php echo CHtml::dropDownList('modelname[status]','', array());?></td>//same here
   <td>    <?php echo $form->error($model,'status'); ?></td>

    </tr> 
```

在上面的代码中我改变了：

```
 'update'=>'#modelname_status', //here is the trick replace modelname to orginal model class name 

 <td><?php echo CHtml::dropDownList('modelname[status]','', array());?></td>//same here 
```

即使在它不起作用后也发表评论。（我没有测试，也许你的控制器似乎有问题。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T07:56:07.013

我希望你的问题已经解决了。如果有人仍然想知道为什么这些下拉列表不更新数据库，他们不会，因为它们没有被列为安全属性。这是使下拉列表起作用的示例（仅给出重要部分）：

假设您要添加名为“showOnHome”的字段。首先，在您的数据库表中创建一个名为“showOnHome”的字段（我更喜欢 int(1) 作为字段类型）。

**然后，在您的模型 Model 中：**

```
 public function rules() {
....
....
array('showOnHome','safe'),
}

....
....
 public function attributeLabels() {
    return array(
    .....
    .....
    .....
   'showOnHome' => 'Show On Homepage' ,

   )
} 
```

**在您的视图中：**

```
<div class="row">
        <?php echo $form->labelEx($model,'showOnHome'); ?>
        <?php echo $form->dropDownList($model, 'showOnHome', array('0'=>'No','1'=>'Yes') , array('empty'=>'--Select--')); ?>
        <?php echo $form->error($model,'showOnHome'); ?>
</div> 
```

**如果您没有更改 Yii 生成的默认控制器代码，上面的代码片段应该可以完成您的工作，例如**

```
/**
     * Creates a new model.
     * If creation is successful, the browser will be redirected to the 'view' page.
     */
    public function actionCreate()
    {
        $model=new Livefuture;

        // Uncomment the following line if AJAX validation is needed
        // $this->performAjaxValidation($model);

        if(isset($_POST['Livefuture']))
        {
            $model->attributes=$_POST['Livefuture'];
            if($model->save())
                $this->redirect(array('view','id'=>$model->id));
        }

        $this->render('create',array(
            'model'=>$model,
        ));
    }

    /**
     * Updates a particular model.
     * If update is successful, the browser will be redirected to the 'view' page.
     * @param integer $id the ID of the model to be updated
     */
    public function actionUpdate($id)
    {
        $model=$this->loadModel($id);

        // Uncomment the following line if AJAX validation is needed
        // $this->performAjaxValidation($model);

        if(isset($_POST['Livefuture']))
        {
            $model->attributes=$_POST['Livefuture'];
            if($model->save())
                $this->redirect(array('view','id'=>$model->id));
        }

        $this->render('update',array(
            'model'=>$model,
        ));
    } 
```

# arrays - 在分层表中沿路径（节点数组）查找第一个非空值

> ID：11011047
> 
> 赞同：3
> 
> 时间：2012-06-13T08:35:25.927
> 
> 标签：arrays, postgresql, hierarchy, plpgsql, postgresql-9.1

我已经徒劳地尝试了几个小时来创建一个函数，该函数根据下标数组的标准过滤数组下标，然后创建这些下标的数组。

我正在处理的数据结构类似于以下示例（除了要比较的列更多以及更复杂的规则和混合数据类型）：

```
id hierarchy abbreviation1 abbreviation2
1  {1}       SB            GL
2  {2,1}     NULL          NULL
3  {3,2,1}   NULL          TC
4  {4,2,1}   NULL          NULL 
```

我需要运行一个查询，该查询将下一个最接近父级的非空值用于 abbreviation1 和 abbreviation2，并根据与当前记录的层次距离进行比较，以获得缩写的单个值。因此，例如，如果 abbreviation1 和 abbreviation2 的第一个非空值都在同一记录级别，则 abbreviation1 将优先；另一方面，如果第一个非空 abbreviation2 更接近当前记录，那么 abbreviation1 对应的非空值，则将使用 abbreviation2。

因此，对上述示例表的描述查询将产生；

```
id abbreviation
1  SB
2  SB
3  TC
4  SB 
```

为了完成这个任务，我需要生成一个过滤的数组下标数组（在`array_agg()`对缩写列执行之后），它只包含缩写列中的值不为空的下标。

以下功能，基于我疲惫的头脑中的所有逻辑，应该可以工作，但不能

```
CREATE OR REPLACE FUNCTION filter_array_subscripts(rawarray anyarray,criteria anynonarray,dimension integer, reverse boolean DEFAULT False) 
  RETURNS integer[] as 
$$
DECLARE
  outarray integer[] := ARRAY[]::integer[];
  x integer;
  BEGIN
    for i in array_lower(rawarray,dimension)..array_upper(rawarray,dimension) LOOP
      IF NOT criteria IS NULL THEN
        IF NOT rawarray[i] IS NULL THEN
          IF NOT rawarray[i] = criteria THEN
            IF reverse = False THEN
              outarray := array_append(outarray,i);
            ELSE
              outarray := array_prepend(i,outarray);
            END IF;
         ELSE
            IF reverse = False THEN
              outarray := array_append(outarray,i);
            ELSE
              outarray := array_prepend(i,outarray);
            END IF;
         END IF;
        END IF;
      ELSE
        IF NOT rawarray[i] is NULL THEN
          IF reverse = False THEN
            outarray := array_append(outarray,i);
          ELSE
            outarray := array_prepend(i,outarray);
          END IF;
        END IF;
      END IF;
    END LOOP;
    RETURN outarray;
  END; 
$$ LANGUAGE plpgsql; 
```

例如，下面的查询`{5,3,1}`何时返回`{5,4,2,1}`

```
select filter_array_subscripts(array['This',NULL,'is',NULL,'insane!']::text[]
                               ,'is',1,True); 
```

我不知道为什么这不起作用，我尝试使用`foreach`数组迭代语法，但我不知道如何将迭代值转换为包含在`anyarray`.

可以做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T03:33:19.590

您可以使用PostgreSQL 8.4 或更高版本中提供的[**RECURSIVE CTE**](http://www.postgresql.org/docs/current/interactive/queries-with.html)来大大简化整个工作：

测试表（方便大家以这样的形式提供测试数据*）*：

```
CREATE TEMP TABLE tbl (
    id int
  , hierarchy int[]
  , abbreviation1 text
  , abbreviation2 text
);

INSERT INTO tbl VALUES
 (1, '{1}',     'SB', 'GL')
,(2, '{2,1}',   NULL, NULL)
,(3, '{3,2,1}', NULL, 'TC')
,(4, '{4,2,1}', NULL, NULL); 
```

询问：

```
WITH RECURSIVE x AS (
    SELECT id
         , COALESCE(abbreviation1, abbreviation2) AS abbr
         , hierarchy[2] AS parent_id
    FROM   tbl

    UNION ALL
    SELECT x.id
         , COALESCE(parent.abbreviation1, parent.abbreviation2) AS abbr
         , parent.hierarchy[2] AS parent_id
    FROM   x
    JOIN   tbl AS parent ON parent.id = x.parent_id
    WHERE  x.abbr IS NULL  -- stop at non-NULL value
    )
SELECT id, abbr
FROM   x
WHERE  abbr IS NOT NULL  -- discard intermediary NULLs
ORDER  BY id 
```

回报：

```
id | abbr
---+-----
1  | SB
2  | SB
3  | TC
4  | SB 
```

这假定每个路径上都有一个非空值，否则这些行将从结果中删除。

# javascript - 扩展对象时javascript自动添加属性

> ID：11011048
> 
> 赞同：4
> 
> 时间：2012-06-13T08:35:30.233
> 
> 标签：javascript, object, dynamic, properties

在使用 JavaScript 时，我遇到了一种情况，我不确定我想要完成的事情是否可行：

考虑以下对象：

```
var data = {}; 
```

是否可以通过以下方式扩展“数据”

```
data.entry_1 = {
    'prop_1': 'set_1',
    'prop_2': 'set_2'
}; 
```

新属性会自动附加到新对象，也就是说

```
data.entry_1 = {
    'prop_1': 'set_1',
    'prop_2': 'set_2',
    id: 1 // automatically created property
}; 
```

是否可以在不使用“外部”方法的情况下完成上述操作，例如没有 data.newEntry(object)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:19:37.743

```
var data = {
   set entry_1 (val) {
       for(var i in val) { this[i] = val[i] };
       this["id"] = 1;
   }
} 
```

在 IE9+ 和所有其他现代浏览器中受支持。

# jquery - YUI 监听 jquery 生成的自定义事件

> ID：11011054
> 
> 赞同：0
> 
> 时间：2012-06-13T08:36:04.407
> 
> 标签：jquery, events, yui3

我继承了一些用 JQuery 编写的遗留代码，这些代码正在创建一个自定义事件，例如 myJqueryEvent

我现在正在编写的代码是使用 yui3，我需要监听这个 Jquery 自定义事件。这可能吗？如何让 YUI3 识别 jquery 事件？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T23:49:24.940

不要认为这是可能的。您必须使用 jQuery 来监听它的事件，然后可以使用 YUI 来处理动作。

# iis-express - 通过 WPI（Windows 平台安装程序）安装 IIS express 7.5（错误代码：2329）

> ID：11011055
> 
> 赞同：0
> 
> 时间：2012-06-13T08:36:07.000
> 
> 标签：iis-express

通过 Web 平台安装程序安装 IIS Express 7.5 时出现问题。它给了我错误代码：2329。

调试：错误 2329：删除文件时出错：C:\Config.Msi\3df66fee.rbf

[我在这里](https://skydrive.live.com/redir?resid=38F0378B03409974!106&authkey=!ADyrcL3hgjyASow)上传了错误日志。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T22:11:54.827

从 Microsoft 站点下载和安装 IIS Express 7.5 解决了我的问题

[http://www.microsoft.com/en-us/download/details.aspx?id=1038](http://www.microsoft.com/en-us/download/details.aspx?id=1038)

我不知道为什么从 WPI 安装 IIS 失败的原因，但我想这与 Windows 中的权限有关。

* * *

根据 Anand 对我的另一个问题的回答[，](https://stackoverflow.com/questions/14016002/net-4-5-fatal-error-during-installation-of-vs-2012-ultimate-on-windows-7-32bit)它们都已通过关闭防病毒软件解决。

# javascript - 在没有服务器端语言的情况下获取 IP 地址

> ID：11011058
> 
> 赞同：2
> 
> 时间：2012-06-13T08:36:14.210
> 
> 标签：javascript, ip

我正在尝试制作一个只有 HTML 和 JavaScript 的简单网站。我想在屏幕上显示访问者的 IP 地址。我尝试了很多搜索并得出结论，这是通过 JavaScript 无法实现的，我必须使用一些服务器端脚本语言，如 PHP。但是，我不想增加开销，如何在没有服务器端编程的情况下实现这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T08:39:01.997

很简单，只要找到一个通过 JSONP 将 IP 返回给你的服务：

[如何使用 jQuery 获取客户端 IP 地址](https://stackoverflow.com/questions/1641868/how-to-get-client-ip-address-using-jquery)

其他资源：

[我可以使用客户端 Javascript 执行 DNS 查找（主机名到 IP 地址）吗？](https://stackoverflow.com/questions/102605/can-i-lookup-the-ip-address-of-a-hostname-from-javascript)

[如何仅使用 javascript 获取客户端的 IP 地址？](https://stackoverflow.com/questions/391979/get-client-ip-using-just-javascript)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T08:37:32.190

你不能。除了通过 HTTP 请求之外，JavaScript 无法访问任何提供该信息的 API。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-23T10:47:50.553

不。Javascript，无法访问 IP 地址。您的 Web 服务器上需要一个 API 或 PHP/ASP/JSON 文件。试试这个[服务](http://ip.codehelper.io)

```
<script src="http://www.codehelper.io/api/ips/?js"></script>
<script>
alert(codehelper_ip.IP);
</script> 
```

# red5 - 通过red5广播接收到的视频信号

> ID：11011067
> 
> 赞同：0
> 
> 时间：2012-06-13T08:36:46.733
> 
> 标签：red5, jwplayer

需要做的事情：将现场活动广播到网页。每个网页访问者都会看到 JW（或类似）播放器。

我如何理解逻辑：

1.  活动现场的电视巴士通过互联网将视频信号转换为 Red5。
2.  Red5 广播接收到的信号并将其提供给 rtmp://myserver.com/oflaDemo 上的 JW 播放器。
3.  JW 播放器完成这项工作并向访问者显示流。

如何使用 Red5 管理接收到的信号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T02:22:47.377

这有点准确，尽管我建议您为此使用 CDN，并让 jwplayer 从 CDN 获取实时流。

# php - 如何在codeigniter控制器中访问不同函数的成员变量

> ID：11011075
> 
> 赞同：0
> 
> 时间：2012-06-13T08:37:07.690
> 
> 标签：php, codeigniter

```
//first function
function insertdigit(){
$userdigit=5;
$flag = $this->usermodel->userdigitmodel($userdigit);

        $value = array(
            'result' => $flag
        );
        echo json_encode($value);
        if ($flag == true) {
              return $userdigit;
        } else {
        }

}
//second function
function usedigit(){
$data['userdigit']=$this->insertdigit();
} 
```

但我`{"result":true}`又回到了功能？如何访问不同成员函数中的成员变量

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T08:44:16.643

尝试`echo json_encode($value);`在您的代码中删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T12:15:39.637

如果您需要访问控制器上多个函数中的参数，则必须在函数之外创建它，以便它可用于所有控制器函数。

所以，在你的情况下，它应该是这样的：

```
class Test extends Controller
{
    private $userdigit; //here you can set a default value if necessary: private $userdigit = 5

     function insertdigit(){
        $this->userdigit=5;
        $flag = $this->usermodel->userdigitmodel($this->userdigit);

        $value = array(
            'result' => $flag
        );
        echo json_encode($value);
        if ($flag == true) {
              return $this->userdigit;
        } else {
        }

    }
    //second function
    function usedigit(){
      $data['userdigit']=$this->userdigit;
    }

} 
```

这样，您的`userdigit`变量可用于所有功能。随着`$this`您告诉 PHP 您正在尝试访问类中的某些内容。

此链接包含更多有用的信息：[http ://www.php.net/manual/en/language.oop5.properties.php](http://www.php.net/manual/en/language.oop5.properties.php)

那是你真正需要的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T13:15:27.317

一个可能的解决方案：

```
function insertdigit() 
{
    $userDigit = 5;
    $flag = $this->usermodel->userdigitmodel($userDigit);
    $value = array
    (
        'result' => $flag
    );
    if(!empty($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest')
    {
        echo json_encode($value);
    }
    if ($flag == true) 
    {
        return $userdigit;
    } 
    else 
    {
    }
}
//second function
function usedigit()
{
    $data['userdigit'] = $this->insertdigit();
} 
```

上面的代码，in`insertdigit`检测是否有 Ajax 请求，如果有，它将回显`json_encode`d 数据。如果您在正常请求中调用它，即通过`usedigit`它不会回显`json_encode`d 数据（除非您`usedigit`通过 Ajax 请求调用）。

你的问题并没有真正解释你在做什么，所以很难解释一个更好的解决方案，但是，如果你试图在多个地方访问一个“变量”，你应该真正分开你的代码，这样你就有一个该变量的入口点。

你的变量是动态的，还是静态的？

# remote-debugging - 执行 rsh 命令时出错

> ID：11011078
> 
> 赞同：0
> 
> 时间：2012-06-13T08:37:10.840
> 
> 标签：remote-debugging, rsh

1.  我尝试在远程服务器上执行一个简单的“ls”命令，使用命令：
    **rsh -l limlim/myPassword myServerName“ls”**
    运行此命令时，我收到以下错误消息：
    **rshd: luser too long**
    -->我在这里做错了什么？

2.  我的最终目标是使用 rsh 远程处理服务器文件，就像我在本地处理 Eclipse 上的文件一样。
    --> 这怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T08:43:09.217

您是否考虑过切换到现代的 rsh、ssh 等价物？

ssh 是与远程主机安全交互的标准工具，您会发现有更多了解 ssh 的人能够为您提供帮助。

# php - 如何在 kohana 中使用 cron 备份表并删除旧数据

> ID：11011079
> 
> 赞同：0
> 
> 时间：2012-06-13T08:37:10.543
> 
> 标签：php, mysql, kohana-3

我想运行一个 cron 来备份特定表过去三个月的数据，然后它会删除已保存到备份文件中的数据。我以前没有这样做过。我可以有一些指导方针如何完成它吗？

我研究过如何设置 cron，但对备份过程感到困惑。

我的项目在 Kohana 3.0.7 中并使用 Mysql。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T11:52:25.990

您可以将您的 cron 指向服务器上的 php 脚本，然后从那里做任何您需要做的事情。

或者

直接从 cron 脚本本身，您可以使用 mysql 客户端命令，如下所示（未经测试！）：

```
0 0 * * * mysqldump -t -u[username] -p[password] dbname table_name --where="date_field>xyz" > /home/username/data.sql
0 0 * * * mysql -u[username] -p[password] dbname -e 'delete from...' 
```

# asp.net - 如何让我的自定义用户控件接受 ASP.NET WebForms 中的属性列表？

> ID：11011084
> 
> 赞同：1
> 
> 时间：2012-06-13T08:37:28.110
> 
> 标签：asp.net, user-controls

假设我有一个包含文件上传字段和提交按钮的用户控件：

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="ImageUploader.ascx.cs" Inherits="MyProject.ImageUploader" %>

<asp:FileUpload ID="fileInput" runat="server"/>
<asp:Button ID="submitButton" runat="server" Text="Upload" OnClick="UploadImage" /> 
```

我想传递多种尺寸来调整上传图像的大小。我知道如何从后面的代码中做到这一点，但我希望能够像这样使用我的用户控件：

```
<%@ Register tagPrefix="uc" tagName="ImageUploader" src="ImageUploader.ascx" %>

<uc:ImageUploader id="uploader" runat="server">
    <Sizes>
        <Size Width="640" Height="480" />
        <Size Width="320" Height="240" />
    </Sizes>
</uc:ImageUploader> 
```

我怎样才能实现这样的目标？我不知道这个概念是如何被调用的，所以搜索它有点困难。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:10:13.380

在您的用户控件（ImageUploader）中，您应该创建像这样的属性

```
 public List<Size> Sizes { get; set; } 
```

当然，你必须创建类 Size

```
 public class Size
 {
    public int Width { get; set; } 
    public int Height { get; set; } 
 } 
```

之后，您可以像这样使用此属性

```
<uc:ImageUploader id="uploader" runat="server">
    <Sizes>
        <asp:Size Width="120" Height="340"/>
        <asp:Size Width="170" Height="540"/>
        <asp:Size Width="130" Height="740"/>
    </Sizes>
</uc:ImageUploader> 
```

# visual-studio-2010 - 如何在安装和部署项目中包含依赖项？

> ID：11011088
> 
> 赞同：6
> 
> 时间：2012-06-13T08:37:39.633
> 
> 标签：visual-studio-2010, visual-studio, setup-project, setup-deployment

我有一个由 3 个项目组成的解决方案。我创建了一个部署项目，它只包括我的解决方案中一个项目的依赖项。

到目前为止，我所做的是在我的设置和部署项目中，我右键单击“应用程序文件夹”以添加 - > 项目输出。接下来，我从下拉列表中选择了我的主要项目并选择了“主要输出”。我单击确定，该项目的依赖项已成功包含在部署中。

我尝试对解决方案中的其他 DLL 重复相同的过程，但它不包括它们的依赖项。

如何包含每个项目的所有依赖项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T06:38:24.637

请注意，Visual Studio 安装项目检测到的依赖项更像是建议。你不应该太相信他们，因为误报很常见。

对于专业的安装人员，您应该自己确定正确的依赖关系，并以适当的形式将它们添加到您的项目中。例如，一些依赖项可能是运行时或框架的一部分，可以作为先决条件添加到安装程序中。

如果您无法弄清楚您的应用程序具有哪些依赖项，您可以尝试使用[依赖项walker](http://www.dependencywalker.com/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-14T01:37:53.843

VS Setup 项目的依赖遍历能力非常强大，确实是直接依赖检查和产品二进制打包的好去处。随着构建详细程度的增加，它允许直接分析引用每个 DLL 的哪个版本，以便您获得更新构建引用所需的信息。不幸的是，版本信息被烘焙到依赖项中，如果在搜索路径中找不到合适的可用版本，安装项目可能无法获取。

关于误报，我的经验是它会带来任何二进制引用，无论该树上是否存在实际的代码路径。该问题的解决方案是重构您的代码（更好地细化项目）。

如果您不使用直接项目引用，则安装项目不会引入这些依赖项。这是你遇到的问题吗？否则，我会调高日志详细程度并搜索您期望的参考。它应该说明它正在寻找哪个版本，在哪里搜索以及为什么它没有抓取任何东西。

# android - 如何专注于操作栏中的可折叠操作视图 EditText 项（展开时）并强制打开软键盘？

> ID：11011091
> 
> 赞同：19
> 
> 时间：2012-06-13T08:37:45.903
> 
> 标签：android, android-softkeyboard, actionbarsherlock, android-actionbar, android-menu

我正在使用 Jake Wharton 出色的[ActionBarSherlock](http://actionbarsherlock.com)库，并有一个可折叠的搜索操作视图。我想在搜索操作视图展开时弹出软键盘。

我们可以在 Google 的“[使用 DialogFragments](http://android-developers.blogspot.nl/2012/05/using-dialogfragments.html) ”博客文章中的 DialogFragment 中阅读推荐的方法（为了便于阅读，做了一些改动）。

```
// Show soft keyboard automatically
mEditText.requestFocus();
int mode = WindowManager.LayoutParams.SOFT_INPUT_STATE_VISIBLE;
getDialog().getWindow().setSoftInputMode(mode); 
```

[当展开并请求将焦点放在可折叠的EditText 操作视图](http://developer.android.com/guide/topics/ui/actionbar.html#ActionViewCollapsing)上时，这似乎不起作用。我目前有这个。

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getSupportMenuInflater();
    inflater.inflate(R.menu.my_activity, menu);

    MenuItem menuItem = menu.findItem(R.id.menu_search);
    final EditText searchText = (EditText) menuItem.getActionView();

    menuItem.setOnActionExpandListener(new OnActionExpandListener() {
        @Override
        public boolean onMenuItemActionCollapse(MenuItem item) {
            return true; // Return true to collapse action view
        }

        @Override
        public boolean onMenuItemActionExpand(MenuItem item) {
            searchText.requestFocus();
            int mode = WindowManager.LayoutParams.SOFT_INPUT_STATE_VISIBLE;
            getWindow().setSoftInputMode(mode);
            return true; // Return true to expand action view
        }
    });
} 
```

这是 my_activity 菜单 xml 文件中的菜单项定义：

```
<item
    android:id="@+id/menu_search"
    android:icon="@drawable/ic_menu_search"
    android:actionLayout="@layout/collapsible_edittext"
    android:showAsAction="always|collapseActionView"
    android:title="@string/menu_search"/> 
```

...和 ​​collapsible_edittext 动作布局

```
<?xml version="1.0" encoding="utf-8"?>
<EditText xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:hint="@string/hint_search"
    android:imeOptions="actionSearch"
    android:inputType="text"
    android:focusable="true"
    android:focusableInTouchMode="true" /> 
```

警告：我不想*强制*使用软键盘。当用户有一个请求焦点的硬件键盘就足够了。

有什么想法吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-13T12:14:14.530

也许 requestFocus 从未出现在问题中的代码中，因为 searchText 尚未展开？无论如何，我不知道......这对我有用：

```
@Override
public boolean onMenuItemActionExpand(MenuItem item) {
    searchText.post(new Runnable() {
        @Override
        public void run() {
            searchText.requestFocus();
            InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
            imm.showSoftInput(searchText, InputMethodManager.SHOW_IMPLICIT);
        }
    });
    return true; // Return true to expand action view
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T06:54:09.890

也为我工作！

对于折叠 ActionView 和隐藏键盘，我使用：

将侦听器设置为捕获搜索按钮（或任何其他）按下软键盘，然后使用`collapseActionView()`：

```
searchText.setOnEditorActionListener(new OnEditorActionListener() {
    @Override
    public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
        if (actionId == EditorInfo.IME_ACTION_SEARCH) {
            searchMenuItem.collapseActionView();
            return true;
        }
        return false;
    }
}); 
```

`onMenuItemActionCollapse()`然后在方法中编写键盘隐藏代码。

```
public boolean onMenuItemActionCollapse(MenuItem item) {
    // Do something when collapsed
    searchText.post(new Runnable() {
        @Override
        public void run() {
            InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
            imm.hideSoftInputFromWindow(searchText.getWindowToken(), 0);
        }
    });
    return true; // Return true to collapse action view
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-08T20:50:09.643

为了在 ActionBar 中更轻松地实现可折叠搜索项，您可以简单地使用ActionBarSherlock ( )[`SearchView`](http://developer.android.com/reference/android/widget/SearchView.html)中也提供的。`com.actionbarsherlock.widget.SearchView`

它带有许多方便的方法和处理显示/隐藏软件键盘自动展开/折叠视图。此外，更容易定义提交搜索时要执行的操作。看看你可以设置的所有监听器`SearchView`。

这是一个例子：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    SearchView searchView = new SearchView(this);

    searchView.setQueryHint(getString(R.string.search_hint));
    searchView.setOnQueryTextListener(new OnQueryTextListener() {

        @Override
        public boolean onQueryTextSubmit(String query) {
            // what to do on submit, e.g. start an Activity and pass the query param
            return true;
        }

        @Override
        public boolean onQueryTextChange(String newText) {
            return false;
        }

    });

    menu.add(getString(R.string.search_title))
        .setIcon(R.drawable.ic_action_search)
        .setActionView(searchView)
        .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM|MenuItem.SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW);

    // ...place to add other menu items

    return super.onCreateOptionsMenu(menu);
} 
```

*另一个很好的理由：*当我使用自定义作为我的搜索视图时，我在旧设备上遇到了一些布局问题`EditText`（就像你在问题中所做的那样）。默认`SearchView`解决了所有这些问题并为我节省了许多代码行。

# android - iPhone / Android 意图

> ID：11011095
> 
> 赞同：0
> 
> 时间：2012-06-13T08:38:01.403
> 
> 标签：android, iphone, android-intent

在 Android 开发中，我可以使用 Intents 使用我自己的应用程序中的数据简单地启动另一个 Android 应用程序。

例如：在我的应用程序中，我输入了一些文本，然后单击一个按钮，我的另一个应用程序启动并显示来自另一个应用程序的输入文本。

现在的问题是：这在 iPhone 开发中是否可行？我可以使用我的应用程序中的数据启动另一个应用程序吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T08:45:35.143

是的，你可以使用 URL Schemes，看看[这个](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-working-with-url-schemes/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T08:40:17.843

`URL Schemes`您可以通过在两个 iPhone 应用程序中应用来触发另一个应用程序。参数可以传递给其他应用程序。

# entity-framework-4 - EF 自动迁移不适用于虚拟属性

> ID：11011097
> 
> 赞同：1
> 
> 时间：2012-06-13T08:38:08.040
> 
> 标签：entity-framework-4, ef-code-first, sql-server-ce, database-migration, entity-framework-4.3

我正在尝试首先将自动迁移与实体框架和代码一起使用。我向我的班级添加了新属性（团队也是自定义班级）：

```
public virtual Team SecondTeam { get; set; } 
```

我在更新数据库时遇到问题。在我编写命令后，我在控制台中得到了这个：

> SQL Server Compact 不支持直接重命名列。要重命名 SQL Server Compact 中的列，您需要重新创建它。

通常正在更新工作（我尝试添加简单的 int 道具并且它只是更新）但如果那是虚拟的我有问题。谁能帮我这个？谢谢

编辑：之后的所有行`Update-Database -Verbose`

```
Using NuGet project 'Project'.  
Using StartUp project 'Project'.  
Target database is: '|DataDirectory|database.sdf' (DataSource: |DataDirectory|database.sdf, Provider: System.Data.SqlServerCe.4.0, Origin: Configuration). 
No pending explicit migrations. 
Applying automatic migration: 201206130828142_AutomaticMigration. 
Direct column renaming is not supported by SQL Server Compact. To rename a column in SQL Server Compact, you will need to recreate it. 
```

Edit2：我要更改数据库的播放器类：

```
public class Player
    {
        [Key]
        public int PlayerID { get; set; }

        [Required]
        public string Name { get; set; }
        [Required]
        public string Surname { get; set; }
        public string Nickname { get; set; }
        public DateTime Birth { get; set; }

        public string PhotoUrl { get; set; }
        public string Post { get; set; }

        public int TeamID { get; set; }
        public virtual Team Team { get; set; }

        public int SecondTeamID { get; set; }
        public virtual Team SecondTeam { get; set; }

        public int UserId { get; set; }
        public virtual User User { get; set; }
    } 
```

团队班：

```
public class Team
    {
        [Key]
        public int TeamID { get; set; }
        public string Name { get; set; }

        public string League { get; set; }
        public string Trainings { get; set; }

        public string PhotoUrl { get; set; }

        public int CoachID { get; set; }
        public int AassistantID { get; set; }
        public int ManagerID { get; set; }

        public virtual ICollection<Player> Players { get; set; }

        public bool showPosts { get; set; }
    } 
```

这是 EF 生成的 SQL：

```
CREATE TABLE "Players" (
    "PlayerID" int not null identity,
    "Name" nvarchar(4000) not null,
    "Surname" nvarchar(4000) not null,
    "Nickname" nvarchar(4000) null,
    "Birth" datetime not null,
    "PhotoUrl" nvarchar(4000) null,
    "Post" nvarchar(4000) null,
    "TeamID" int not null,
    "SecondTeamID" int not null,
    "UserId" int not null,
    "Team_TeamID" int null,
    "Team_TeamID1" int null,
    "SecondTeam_TeamID" int null,
    PRIMARY KEY ("PlayerID")
);

ALTER TABLE "Players" ADD CONSTRAINT "Team_Players" FOREIGN KEY ("Team_TeamID") REFERENCES "Teams"("TeamID");
ALTER TABLE "Players" ADD CONSTRAINT "Player_Team" FOREIGN KEY ("Team_TeamID1") REFERENCES "Teams"("TeamID");
ALTER TABLE "Players" ADD CONSTRAINT "Player_SecondTeam" FOREIGN KEY ("SecondTeam_TeamID") REFERENCES "Teams"("TeamID");
ALTER TABLE "Players" ADD CONSTRAINT "Player_User" FOREIGN KEY ("UserId") REFERENCES "Users"("UserID") ON DELETE CASCADE; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-15T13:08:40.947

我知道这是一个老问题，但我认为该解决方案以后会很有用。

除非您确定代码仅限于调试环境，否则请勿使用该`RecreateDatabaseIfModelChanges`功能。如果它在生产代码中出现（并且您可能并不总是在发布之前查看 DAL）意外的数据丢失很容易成为一个问题。

如果您正确使用迁移，您将看到 EF 为您生成如下代码：

```
namespace Migrations_CE
{
    using System;
    using System.Data.Entity.Migrations;

    public partial class TargetInventoryChange : DbMigration
    {
        public override void Up()
        {
            RenameColumn(table: "dbo.TargetInventoryItems", name: "MatchedPrinter_ID", newName: "MatchedPrinterID");
            AddColumn("dbo.TargetInventoryItems", "CustomerID", c => c.String(maxLength: 40));
            AlterColumn("dbo.TargetInventoryItems", "Name", c => c.String(maxLength: 100));
        }

        public override void Down()
        {
            AlterColumn("dbo.TargetInventoryItems", "Name", c => c.String(maxLength: 4000));
            DropColumn("dbo.TargetInventoryItems", "CustomerID");
            RenameColumn(table: "dbo.TargetInventoryItems", name: "MatchedPrinterID", newName: "MatchedPrinter_ID");
        }
    }
} 
```

在这个特定的项目中，我保留了两组迁移，一组用于 SQL CE 数据库，一组用于 SQL Server。在为 Compact 版本进行迁移时，我偶然发现了您的问题。

我解决了它只是按照错误消息所说的那样做。**请注意，这将导致您正在重命名的列上的数据丢失。**当心。

这个例子解决了外键情况，这是（我相信）最糟糕的情况之一，因为 EF 自己生成列、FK 约束和自动索引。

```
public override void Up()
{
    //RenameColumn(table: "dbo.TargetInventoryItems", name: "MatchedPrinter_ID", newName: "MatchedPrinterID");
    DropIndex("dbo.TargetInventoryItems", "IX_MatchedPrinter_ID");
    DropForeignKey("dbo.TargetInventoryItems", "FK_dbo.TargetInventoryItems_dbo.CustPrinters_MatchedPrinter_ID");
    DropColumn("dbo.TargetInventoryItems", "MatchedPrinter_ID");
    AddColumn("dbo.TargetInventoryItems", "MatchedPrinterID", c => c.Int());
    AddForeignKey("dbo.TargetInventoryItems", "MatchedPrinterID", "dbo.CustPrinters", "ID");
    CreateIndex("dbo.TargetInventoryItems", "MatchedPrinterID", unique: false);
} 
```

如果您不知道索引的名称，可以使用 SQL CE 工具箱 ( [http://sqlcetoolbox.codeplex.com/](http://sqlcetoolbox.codeplex.com/) ) 查看特定表。您将看到一个索引列表，您可以在其中找到要删除的名称。

对于 FK 约束，您必须查询`INFORMATION_SCHEMA`，例如再次使用 SQL CE Toolbox，查询如下

```
SELECT * FROM INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS 
```

根据需要设置一些`WHERE`条件。我希望这将在适当的 SQL 生成器上得到修复，但与此同时，这实际上解决了问题 - 进行小的更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T07:09:39.887

我认为，如果您遵循此示例[Steven Sanderson - MvcScaffolding：一对多关系](http://blog.stevensanderson.com/2011/01/28/mvcscaffolding-one-to-many-relationships/)并在开发期间使用该功能在启动时根据[Scott Guthrie - Code-First Development with Entity Framework 4](http://weblogs.asp.net/scottgu/archive/2010/07/16/code-first-development-with-entity-framework-4.aspx) blog 重新创建数据库。（搜索段落`Taking advantage of SQL CE 4`和`The RecreateDatabaseIfModelChanges Feature`）

# mysql - MySQL LOAD DATA INFILE 错误

> ID：11011098
> 
> 赞同：0
> 
> 时间：2012-06-13T08:38:21.243
> 
> 标签：mysql, file-io, load

我尝试使用以下 SQL 语句将数据加载到某个列中：

```
LOAD DATA INFILE 'filelist.txt' INTO TABLE filelist (filepath) LINES TERMINATED BY '#'; 
```

每一行数据的结构是这样的：

```
file:://///...path...txt# 
```

我收到以下错误消息：

```
You have an error in your SQL syntax near 'LINES TERMINATED BY '#' 
```

我真的不知道出了什么问题。有人有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T13:29:03.837

尝试从您的 sql 语句中删除 'LINES TERMINATED BY '#'。仅运行此“LOAD DATA INFILE 'filelist.txt' INTO TABLE filelist (filepath)”...来自评论

# android - AccountManager.KEY_INTENT 在 TaskSample 示例代码中的外观如何

> ID：11011101
> 
> 赞同：2
> 
> 时间：2012-06-13T08:38:26.327
> 
> 标签：android, google-api, oauth-2.0, google-api-java-client

我在[TaskSample.java中引用代码](http://code.google.com/p/google-api-java-client/source/browse/tasks-android-sample/src/main/java/com/google/api/services/samples/tasks/android/TasksSample.java?repo=samples#126)

**因为我从来没有机会在方法****回调**中进入以下`if`语句**`gotAccount``AccountManager`**

```
if (bundle.containsKey(AccountManager.KEY_INTENT)) {
    Intent intent = bundle.getParcelable(AccountManager.KEY_INTENT);
    intent.setFlags(intent.getFlags() & ~Intent.FLAG_ACTIVITY_NEW_TASK);
    startActivityForResult(intent, REQUEST_AUTHENTICATE);
} 
```

任何人都知道将启动什么样的意图？您介意发布该意图的**屏幕截图吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T08:53:33.523

根据文档，如果您没有缓存的令牌或保存的密码，您可能会获得登录活动。

> 如果为此帐户和类型缓存了先前生成的身份验证令牌，则将其返回。否则，如果保存的密码可用，则将其发送到服务器以生成新的身份验证令牌。否则，将返回一个 Intent，该 Intent 在启动时会提示用户输入密码。如果设置了 notifyAuthFailure 参数，还会使用相同的 Intent 创建状态栏通知，提醒用户他们需要在某个时候输入密码。

实际活动将取决于帐户类型，您不必真正关心它的外观。

# java - Maven Gae Jsf2 ExternalizeJavaScript 警告

> ID：11011102
> 
> 赞同：0
> 
> 时间：2012-06-13T08:38:26.767
> 
> 标签：java, google-app-engine, maven, jsf-2

我在一个项目中使用 maven、google app engine、jsf2。但是，会发生如下异常：

```
WARNING: failed JettyContainerService$ApiProxyHandler@dfd2cd: java.lang.NoSuchFieldError: ExternalizeJavaScript
Haz 13, 2012 8:32:41 AM com.google.apphosting.utils.jetty.JettyLogger warn
WARNING: Error starting handlers
java.lang.NoSuchFieldError: ExternalizeJavaScript
    at com.sun.faces.config.processor.LifecycleConfigProcessor.addPhaseListeners(LifecycleConfigProcessor.java:132)
    at com.sun.faces.config.processor.LifecycleConfigProcessor.process(LifecycleConfigProcessor.java:115)
    at com.sun.faces.config.processor.AbstractConfigProcessor.invokeNext(AbstractConfigProcessor.java:108)
    at com.sun.faces.config.processor.FactoryConfigProcessor.process(FactoryConfigProcessor.java:133)
    at com.sun.faces.config.ConfigManager.initialize(ConfigManager.java:204)
    at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:200)
    at org.mortbay.jetty.handler.ContextHandler.startContext(ContextHandler.java:548)
    at org.mortbay.jetty.servlet.Context.startContext(Context.java:136)
    at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)
    at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
    at org.mortbay.jetty.Server.doStart(Server.java:224)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at com.google.appengine.tools.development.JettyContainerService.startContainer(JettyContainerService.java:196)
    at com.google.appengine.tools.development.AbstractContainerService.startup(AbstractContainerService.java:239)
    at com.google.appengine.tools.development.DevAppServerImpl.start(DevAppServerImpl.java:146)
    at com.google.appengine.tools.development.DevAppServerMain$StartAction.apply(DevAppServerMain.java:189)
    at com.google.appengine.tools.util.Parser$ParseResult.applyArgs(Parser.java:48)
    at com.google.appengine.tools.development.DevAppServerMain.<init>(DevAppServerMain.java:128)
    at com.google.appengine.tools.development.DevAppServerMain.main(DevAppServerMain.java:104)

Haz 13, 2012 8:32:41 AM com.google.apphosting.utils.jetty.JettyLogger info 
```

我覆盖了 WebContent.java 文件但是这个问题仍然发生..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T11:01:43.020

> ```
> java.lang.NoSuchFieldError: ExternalizeJavaScript
>    at com.sun.faces.config.processor.LifecycleConfigProcessor.addPhaseListeners(LifecycleConfigProcessor.java:132) 
> ```

该字段仅在 JSF 1.2 中可用，在 JSF 2.0 中已被删除/弃用。这表明您在运行时类路径中的某处有一个 JSF 1.2 实现 JAR 文件。从有问题的旧版本 JAR 文件中清除运行时类路径。

# java - 如何摆脱jsoup中的html，只提取html表格内容？

> ID：11011103
> 
> 赞同：0
> 
> 时间：2012-06-13T08:38:28.383
> 
> 标签：java, android, jsoup

所以我试图访问这个网站[http://www.engin.umich.edu/htbin/wwwhostinfo?detail=0&display=all&sort=open](http://www.engin.umich.edu/htbin/wwwhostinfo?detail=0&display=all&sort=open)中的表格，并试图将它变成一个 Elements 对象。我只需要第一列和第四列。所以我正在使用 jsoup 并这样做：

```
Document doc = Jsoup.connect("http://www.engin.umich.edu/htbin/wwwhostinfo?detail=0&display=all&sort=open").get();
        Elements buildings = doc.select("td:eq(0),td:eq(3)"); 
```

这应该选择第一列和第四列。它正在这样做，但是对于所有 html 数据，我也需要跳过网页“以下报告...”中的所有初始内容。我只需要两列 - Building 和 Open，这样我就可以简单地初始化额外的变量并将建筑物中打开的计算机的数量分配给它，最后使用 Toast 或类似的东西来显示建筑物中打开的计算机的数量屏幕。

目前我正在使用 TextView 来显示数据，它也向我显示了我不想要的所有 html 数据。

```
TextView tv = new TextView(this);
        tv.setText(""+buildings);
        setContentView(tv); 
```

可以从 Elements 中提取单个值吗？

简而言之：如何通过跳过所有其他数据并将它们分配给自己的变量来仅提取建筑物名称和开放计算机数量？

关于如何做到这一点的任何想法？

提前致谢 - av

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T09:10:45.237

您可以使用[JSOUP Cleaner & Whitelist](http://jsoup.org/cookbook/cleaning-html/whitelist-sanitizer)来完成该任务。

只需定义不应删除的内容，您就可以开始了！

# vba - 如何使用 VBA 发送键打印或发送大括号 ( )

> ID：11011104
> 
> 赞同：3
> 
> 时间：2012-06-13T08:38:29.100
> 
> 标签：vba, excel

我有以下不发送大括号的代码。

```
sendkeys "a=$(script.sh)",true 
```

但它作为 a=$script.sh 发送

大括号不见了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T09:03:11.580

尝试这个

```
SendKeys "a=${(}script.sh{)}", True 
```

例如

```
Sub Sample()
    Dim RetVal

    RetVal = Shell("NOTEPAD.EXE ", 1)

    AppActivate RetVal
    SendKeys "a=${(}script.sh{)}", True
End Sub 
```

**输出**

```
a=$(script.sh) 
```

# nhibernate-mapping - 路径位置：Oracle.Driver (Oracle.DataAccess.dll) for Oracle 11g Standard Edition Release 2

> ID：11011107
> 
> 赞同：2
> 
> 时间：2012-06-13T08:38:30.573
> 
> 标签：nhibernate-mapping, oracle11gr2

我已经安装了 Oracle 11g 标准版第 2 版。我正在使用 nhibernate 2.2。我已经花了很多时间，但我在安装的文件中找不到 Oracle Driver dll 文件（Oracle.DataAccess.dll）的位置。请帮助我。提前致谢。

萨塔迪普

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T13:09:24.423

从 11.2 开始，Oracle Data Provider for .NET 附带两组二进制文件

Oracle.DataAccess.dll 程序集安装到以下位置：

.NET 框架 2.0：

ORACLE_BASE\ORACLE_HOME\odp.net\bin\2.x 目录

.NET 框架 4：

ORACLE_BASE\ORACLE_HOME\odp.net\bin\4 目录

来自[Oracle Data Provider for .NET Developer's Guide 11g Release 2 (11.2.0.3)](http://docs.oracle.com/cd/E11882_01/win.112/e23174/toc.htm)

显然，要让文件在那里，您必须将 Oracle Data Provider for .NET 作为您的 Oracle 安装的一部分，或者从 OTN 下载 Oracle 数据访问组件 (ODAC)。

# php - 如何将自定义地图添加到 ushahidi

> ID：11011111
> 
> 赞同：0
> 
> 时间：2012-06-13T08:38:58.513
> 
> 标签：php, openstreetmap

我想向 ushahidi 添加一个类似 OSM 的地图源（例如 opencyclemap、hikebikemap）。由于无法通过管理界面执行此操作，我将如何在代码中执行此操作？

谢谢，迪玛

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T01:41:13.697

如果你想为 Ushahidi 添加一个额外的基础层，你需要编写一个插件，并使用 ushahidi_filter.map_layers_js 事件来添加你的地图。

这是一个从 mapbox [https://github.com/rjmackay/Ushahidi-plugin-mapbox](https://github.com/rjmackay/Ushahidi-plugin-mapbox)添加图层的示例。

# javascript - 使用 Raphael JS，部分填充一个圆圈

> ID：11011113
> 
> 赞同：4
> 
> 时间：2012-06-13T08:39:00.590
> 
> 标签：javascript, raphael

我正在尝试用颜色填充圆圈的一部分。例如，有一个 2/3 红色和 1/3 空的圆圈。

Raphael JS 文档没有多大帮助。解决这个问题的最佳方法是什么？

一些例子可以在下面的图片中看到：

![在此处输入图像描述](../Images/00d955d61789ba28547cb349cedd20ef.png)

```
var paper = new Raphael(document.getElementById('shape_container'), 400, 100);
var circle = paper.circle(50, 50, 30);
circle.attr (
        {
            fill: '#F00'
        }
    ); 
```

使用上面的代码，我可以画一个充满红色的圆圈..我找不到任何方法来填充 2/3 红色..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T17:17:14.287

欢迎，阿尔佩伦。我相信您真正想要的是弧形路径而不是圆形。看看这个：

```
function arcpath( canvas, x, y, r, ratio )
{
    if ( ratio >= 1.0 ) return canvas.circle( x, y, r );
    var degrees = 360 * ratio;  //  we use this to determine whether to use the large-sweep-flag or not
    var radians = ( Math.PI * 2 * ratio ) - Math.PI / 2;    //  this is actually the angle of the terminal point on the circle's circumference -- up is Math.PI / 2, so we need to subtract that out.
    var pathparts = 
    [
        "M" + x + "," + y,
        "v" + ( 0 - r ),
        "A" + r + "," + r + " " + degrees + " " + ( degrees >= 180 ? "1" : "0" ) + " 1 " + ( x + ( r * Math.cos( radians ) ) ) + "," + ( y + ( r * Math.sin( radians ) ) ),
        "z"
    ];

    return canvas.path( pathparts );
}

var partial_circle = arcpath( canvas, 250, 350, 100, 0.75 ).attr( { fill: mapit_red, stroke: mapit_black } ); 
```

arcpath 函数中的几何结构相当简单（尽管我必须查找[large-sweep-flag](http://www.w3.org/TR/SVG/paths.html#PathDataEllipticalArcCommands)的参考，这显然不明显）。我确信这可以进行大幅优化，但这是功能性的第一步。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-27T14:24:55.057

为此，我编写了一个 RaphaelJS 自定义属性。它可以是动画的，因此您可以控制切片的旋转/大小并创建甜甜圈或部分甜甜圈形状。

```
paper.customAttributes.filledArc = function(e,t,n,r,i,s){var o=360;if(o==i){i-=.001}i+=s;var u=(90-s)*Math.PI/180,a=e+n*Math.cos(u),f=t-n*Math.sin(u),l=e+(n-r)*Math.cos(u),c=t-(n-r)*Math.sin(u);var h=(90-i)*Math.PI/180,p=e+n*Math.cos(h),d=t-n*Math.sin(h),v=e+(n-r)*Math.cos(h),m=t-(n-r)*Math.sin(h);return{path:[["M",l,c],["L",a,f],["A",n,n,0,+(i>180+s),1,p,d],["L",v,m],["A",n-r,n-r,1,+(i>180+s),0,l,c]]}} 
```

进而：

```
paper.path().attr( {
    filledArc: [x,y,radius,width,degrees,rotation]
    fill: mapit_red,
    stroke: mapit_black
} ); 
```

# windows - setx 用空格设置 PATH

> ID：11011115
> 
> 赞同：4
> 
> 时间：2012-06-13T08:39:11.180
> 
> 标签：windows, windows-shell, setx

我正在尝试更新 win32 shell 脚本中的系统路径变量，但前提是值不存在。

我当前的版本看起来像这样：

```
for %%f in (xyz.exe) DO if [%%~$PATH:f]==[]; setx Path "%PATH%;%GRADLE_HOME%\bin" -m 
```

我遇到的问题是

```
setx Path "%PATH%;%GRADLE_HOME%\bin" 
```

这不起作用，但是如果我将引号更改为单引号

```
setx Path '%PATH%;%GRADLE_HOME%\bin' 
```

它确实有效，但路径在第一次出现 Program Files 时结束。即 abc;def;程序

有什么办法可以克服这个吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-02-04T22:41:51.217

实际上有一种更简单的方法..它似乎有效，但有点丑陋且不直观：

```
setx /M Path "%PATH%;%GRADLE_HOME%\bin 
```

请注意，只有一个双引号，它在开头.. 如果你把一个放在末尾，它会在路径字符串中结束（开头没有那个）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-30T23:22:46.010

我有点晚了，但我正在寻找类似的东西但找不到它，所以我自己想通了。我试图设置变量以从命令行启动 VSC#，并且 VSC# 的 exe 文件存在于包含与您的情况类似的空间的路径中。所以我的解决方案是使用以下设置变量：

```
setx vcs "\"E:\Program Files\IDE\vcsexpress.exe\" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T08:49:12.653

Single quotes never work in Windows. Period.

Your code does work for me with the double quotes, actually.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-21T19:47:40.903

我发现了这个问题，因为我正在寻找一些不同的东西。我需要在我设置的东西中加上引号。这并不是 OP 所要求的，但如果问题是嵌入引号，则可能与此相关。

```
setx SVN_EDITOR C:\Program Files\vim\vim74\vim.exe 
```

我发现这虽然“正确”但不起作用，因为该变量的用户被路径中的空格绊倒了，所以我需要在其中加上引号。

我找到

```
set SVN_EDITOR="C:\Program Files\vim\vim74\vim.exe" 
```

工作得很好，所以我想我会尝试在 Windows 上转义引号的正常方式：

```
setx SVN_EDITOR "^"C:\Program Files\vim\vim74\vim.exe^"" 
```

但这不起作用，导致错误：

```
 ERROR: Invalid syntax. Default option is not allowed more than '2' time(s).
 Type "SETX /?" for usage. 
```

所以我只是在控制面板中打开系统设置并在环境变量GUI中设置值。现在工作正常，我可以`set svn`在命令行输入，它会显示我需要的引用。

如果您确实需要以编程方式设置环境变量，则需要自己查看注册表。这在 C 和 Python 中都非常简单（也可能在其他语言中）。不过，它似乎无法`setx`为您做到。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-08-18T03:59:59.993

正确的格式是 setx var "\path1;\path\path2\" /M only 请注意，由于我的路径以斜杠结尾，因此最终结果是结尾的 " 被转义并作为路径的一部分添加。

如果您的路径以斜杠结尾...您必须转义最后一个反斜杠...更正的版本是 setx var "\path1;\path\path2\\" /M

需要引号来保护任何嵌入的空间..例如“程序文件”

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-13T12:59:05.213

我放弃了直接使用 %PATH% 的尝试，因为它存在上述程序文件中的空格问题。

我写了一个小命令将“Program Files”替换为“Progra~”，但很快我意识到这并不好，因为还有其他带有空格的路径。[代替](https://stackoverflow.com/questions/11012963/replace-program-files-with-progra1-in-a-shell-script)

我找到了一篇描述查询注册表的好[帖子。](http://www.robvanderwoude.com/ntregistry.php)
因此，作为测试，我设置了一个系统变量 AAA 并附加了路径和 gradle

```
for /F "tokens=2* delims=   " %%f IN ('reg query "HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Session Manager\Environment" /v Path ^| findstr /i path') do set OLD_SYSTEM_PATH=%%g

setx.exe AAA "%OLD_SYSTEM_PATH%%%GRADLE_HOME%%\bin;" -m 
```

希望这可以帮助

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-01-22T18:45:23.107

我发现以下内容可以使用四个前导空格和三个尾随。通常，Windows 用另一个双引号对双引号进行转义，所以尾随双引号有意义，但是路径前面的额外双引号有点奇怪。

```
setx VAR """"C:\path\to a file\with spaces\file.txt""" 
```

# c# - 如何创建不可为空的 CRM 基本类型，如 int 或 double？

> ID：11011116
> 
> 赞同：4
> 
> 时间：2012-06-13T08:39:14.080
> 
> 标签：c#, linq, dynamics-crm, crm, dynamics-crm-4

当我们在 Microsoft Dynamics CRM 中创建一个新字段时，它将在`NULL`允许的情况下在数据库中创建它。您如何在 CRM 中创建一个位于`NON-NULL`后备数据库中的字段，就像他们用于自己的某些字段一样？

选择 Mandatory 标志不会使其成为 NON-NULL。

问的原因：当使用 LINQ 对 CRM 进行编程时，当您必须处理可空值时，许多查询变得相对困难，有些甚至变得不可能，例如聚合查询（尝试`Max()`，它会`InvalidCastException`在底层 db 类型为可空时给出）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T09:20:42.810

很抱歉，根本没有支持的方式来执行此操作（“支持”==“SDK 中存在”）。

如果没有很多可怕的黑客攻击（删除属性及其依赖项，重新创建它以禁止 NULL 然后将其重新插入），您甚至无法在 SQL 级别执行任何操作，这甚至可能无法正常工作。

我认为正确的方法是克服您的 LINQ 问题。[这不是解决方案](https://stackoverflow.com/questions/5047721/linq-max-with-nulls)吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T19:41:18.790

虽然不完全符合您的要求，但您可以通过 API 实现类似的效果。在预验证阶段编写一个针对`Create`and的插件（以在数据库事务*之前*捕获值）。如果不可为空的属性永远为空，则抛出异常，这将完全取消事务。`Update``null`

 *如果您在创建记录*后*注册插件，那么您只需要确保使用值填充那些预先存在的记录。

```
public void Execute(IServiceProvider serviceProvider)
{
    IPluginExecutionContext context = (IPluginExecutionContext)serviceProvider.GetService(typeof(IPluginExecutionContext));

    if (context.InputParameters.Contains("Target") && context.InputParameters["Target"] is Entity)
    {
        var target = ((Entity)context.InputParameters["Target"]);
        if (target.LogicalName == Appointment.EntityLogicalName)
        {
            IOrganizationServiceFactory serviceFactory = (IOrganizationServiceFactory)serviceProvider.GetService(typeof(IOrganizationServiceFactory));
            IOrganizationService service = serviceFactory.CreateOrganizationService(context.UserId);
            var entity = target.ToEntity<Xrm.Appointment>();

            if (entity.Description == null && entity.Attributes.Contains("description"))
            {
                throw new Microsoft.Xrm.Sdk.SaveChangesException("Fill in the field, buddy.");
            }
        }
    }
} 
```*

# iis-7 - 在 IIS7 集成管道模式下首次运行网站加载缓慢

> ID：11011119
> 
> 赞同：0
> 
> 时间：2012-06-13T08:39:22.613
> 
> 标签：iis-7, web, render, integrated

我有一个纯 html 网站，没有什么可以渲染的。第一次运行时，加载大约需要 10 秒。在第二次及以上，在 10-15 分钟的范围内，即使我打开另一个浏览器，加载时间也不到一秒钟。

我可以看到一个浏览器正在等待服务器的响应，服务器是集成管道模式的 IIS7，如果我将其设置为经典模式，即使我在 10 小时后再次访问该网站，问题也会消失。

我很确定这与应用程序空闲超时无关，因为在集成管道中它设置为 1 小时。

请指教。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T17:43:12.333

最简单的解决方案可能是将应用程序初始化插件添加到您的站点。[这篇博文应该会有所帮助](http://www.orcsweb.com/blog/terri/implementing-application-initialization-on-iis-7-5/)。基本上，它只是偶尔 ping 您的网站，因此加载时间较长，而不是用户。

# c# - 如何使用 LINQ 对多个字段进行排序？

> ID：11011128
> 
> 赞同：5
> 
> 时间：2012-06-13T08:39:51.740
> 
> 标签：c#, linq

有人可以通过向我展示如何对 LINQ 表达式进行排序来提供帮助。

我有以下内容：

```
 .OrderByDescending(item => item.RowKey)
 .Select((t, index) => new City.Grid()
           {
               PartitionKey = t.PartitionKey,
               RowKey = t.RowKey,
               Row = index + 1,
               ShortTitle = t.ShortTitle,

           }) 
```

我想做的是对以下内容进行排序：

1) 前四个字符或字段 RowKey
2) ShortTitle

我不确定如何对几个字符进行排序，也不确定如何进行二次排序。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-13T08:42:33.487

对于前四个字符，将其包含在现有语句中，然后添加 ShortTitle

```
.OrderByDescending(item => item.RowKey.Substring(0,4))
.ThenBy(item => item.ShortTitle) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T08:42:13.477

您可以使用 OrderByDescending(...).ThenBy()...

```
.OrderByDescending(item => item.RowKey.Substring(0, Math.Min(4, item.RowKey.Length)))
.ThenBy(item => item.ShortTitle)
.Select((t, index) => new City.Grid()
       {
           PartitionKey = t.PartitionKey,
           RowKey = t.RowKey,
           Row = index + 1,
           ShortTitle = t.ShortTitle,

       }) 
```

Hth 托比

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T08:42:43.313

您可以使用[`ThenBy`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.thenby.aspx)and[`ThenByDescending`](http://msdn.microsoft.com/en-us/library/bb341945)添加第二个键进行排序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T08:44:24.807

您可以使用[Enumerable.ThenBy 方法](http://msdn.microsoft.com/en-us/library/bb534743)

```
.OrderByDescending(item => item.RowKey)
.ThenByDescending(item => item.ShortTitle)
 .Select((t, index) => new City.Grid()
           {
               PartitionKey = t.PartitionKey,
               RowKey = t.RowKey,
               Row = index + 1,
               ShortTitle = t.ShortTitle,

           }) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-13T08:45:52.447

对于第一个要求，按子字符串排序，您可以传递`Substring`到表达式树：

```
.OrderByDescending(item => item.RowKey.Substring(0, 4)) 
```

（但请注意超出范围的异常。）

对于二级排序，[使用`ThenBy()`方法](http://msdn.microsoft.com/en-us/library/bb534743)：

```
.ThenBy(item => item.ShortTitle) 
```

结合：

```
.OrderByDescending(item => item.RowKey.Substring(0, 4))
.ThenBy(item => item.ShortTitle)
.Select((t, index) => new City.Grid()
       {
           PartitionKey = t.PartitionKey,
           RowKey = t.RowKey,
           Row = index + 1,
           ShortTitle = t.ShortTitle,

       }) 
```

# javascript - 避免从主干视图重新渲染图像和其他内容

> ID：11011129
> 
> 赞同：5
> 
> 时间：2012-06-13T08:39:51.807
> 
> 标签：javascript, backbone.js

当我重新渲染主干视图时，跳过重新渲染图像和谷歌地图等内容的好方法是什么？每次重新渲染视图时（这很常见），我的照片和地图视图往往会闪烁非常糟糕。尤其是图像，模板引擎从头开始布局布局，这导致图像标签再次从服务器或缓存中获取位图。

当然，我仍然希望视图保持与布局无关，所以从技术上讲，它不应该知道我们要显示图像，对吧？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-13T09:40:33.747

我将提供一个与您的假设*“视图应该与模板无关”*相冲突的解决方案。

如果您`render()`在模型中有任何更改的任何时候调用，您的浏览器中都会*闪烁，尤其是在**模板*很大的情况下。

我的建议是将`render`View 与第一次可视化 View 时仅发生一次的 View 分开，以及几个`update`负责更新链接到具体 Model 属性的 View 的小块的辅助方法。

例如：

```
// code simplified and not tested
var MyView = Backbone.View.extend({
  initialize: function(){
    this.model.on( "change:title", this.updateTitle, this );
    this.model.on( "change:description", this.updateDescription, this );
    // ... more change:XXX
  },

  render: function(){
    this.$el.html( this.template( this.model.toJSON() ) );
  },

  updateTitle: function(){
    this.$el.find( ".title" ).html( this.model.get( "title" ) );
  },

  updateDescription: function(){
    this.$el.find( ".description" ).html( this.model.get( "description" ) );
  },

  // ... more updateXXX()
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T09:38:19.817

为了获得最佳结果，您真的不想重新渲染包含媒体的 HTML，因此我建议对更改的内容使用更有针对性的视图，这样您就不需要重新渲染具有不变化的内容的视图不。

# c# - 在 C# 中使用双引号对字符串进行 UTF-8 编码

> ID：11011130
> 
> 赞同：2
> 
> 时间：2012-06-13T08:39:52.430
> 
> 标签：c#, encoding, utf8-decode

```
StringBuilder request = new StringBuilder();
request.Append("<?xml version=\"1.0\" encoding=\"UTF-8\"?>");

byte[] msg;
string decoded;

msg=System.Text.Encoding.UTF8.GetBytes(request.ToString());
decoded = System.Text.Encoding.UTF8.GetString(msg); 
```

解码是`<?xml version=\"1.0\" encoding=\"UTF-8\"?>`

结果有`\"` _`\"``\r\n`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T08:41:50.460

您是否正在查看调试器中的字符串？如果是这样，它将显示字符串，就好像它是 C# 中的字符串文字一样。`\`不是真的在那里。您可以轻松地验证是否在某处输出字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T08:43:09.400

@joey 的答案是正确的——但由于 XML 支持单引号，你可以使用它来代替——我觉得它更容易阅读：

```
request.Append("<?xml version='1.0' encoding='UTF-8'"?>"); 
```

# java - 多部分 Http 请求

> ID：11011132
> 
> 赞同：0
> 
> 时间：2012-06-13T08:39:55.707
> 
> 标签：java, httprequest, multipartform-data

我怎样才能初始化多部分请求..？我正在使用 multipart/form-data 内容类型上传文件，但我无法在控制器中获取多部分请求。那么如何在我的控制器中获取多部分请求.. 提前致谢。我收到这样的错误..

```
Jun 13, 2012 2:01:05 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [appServlet] in context with path [/Login] threw  exception [Request processing failed; nested exception is java.lang.IllegalStateException:  Multipart request not initialized] with root cause
java.lang.IllegalStateException: Multipart request not initialized
at org.springframework.web.multipart.support.AbstractMultipartHttpServletRequest.initializeMultipart(AbstractMultipartHttpServletRequest.java:107)
at org.springframework.web.multipart.support.AbstractMultipartHttpServletRequest.getMultipartFiles(AbstractMultipartHttpServletRequest.java:97)
at org.springframework.web.multipart.support.AbstractMultipartHttpServletRequest.getFile(AbstractMultipartHttpServletRequest.java:60)
at com.mpm.common.controller.FileUploadController.create(FileUploadController.java:62)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176)
at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:436)
at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:424)
at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:790)
at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:669)
at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:585)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:405)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:279)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:515)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:300)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722) 
```

我的 JSP 代码是：

```
 <body>
    <h1>Please upload a file</h1>
    <form method="post" action="upload.action" enctype="multipart/form-data">
        <input type="text" name="name"/></br>
        <input type="file" name="file"/></br>
        <input type="submit"/>
    </form>
</body> 
```

我的 servlet-context.xml 代码是：

```
 <bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver">
    <!-- one of the properties available; the maximum file size in bytes -->
</bean>

<bean id="fileUploadController" class="com.mpm.common.controller.FileUploadController" ></bean> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T08:47:29.447

你似乎使用弹簧。在这种情况下，我通常管理这样的多部分请求：

```
@RequestMapping("/url")
public String method(HttpServletRequest request) {
    MultipartHttpServletRequest multipartRequest = (MultipartHttpServletRequest) request;
    // do stuff with multipartRequest
    return "/jsp";
} 
```

您只需要转换您的 HttpServletRequest 请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T08:48:15.533

```
 public void upload(HttpServletRequest request) {

    File up = new File("C:\\temp"); // path where u need to upload

    // Create object of MultipartRequest to upload file
    MultipartRequest m;
    try {
        m = new MultipartRequest(request, up.toString());

        Enumeration files = m.getFileNames();

        // Get the files to be uploaded from enumeration
        while (files.hasMoreElements()) {
            String upload = (String) files.nextElement();
            filename = m.getFilesystemName(upload);
            // out.println("<br/><br/><br/><br/>");
        }
    } catch (IOException e) {
        System.out.println("Error in Uploading files...");
    }
      xsdName = filename.substring(0, filename.lastIndexOf('.'));
 } 
```

这是我在 servlet 中执行相同操作的代码。希望能帮助到你。

# php - 如何在php中搜索文件/数组中的值并返回找到的值之后的所有内容

> ID：11011143
> 
> 赞同：0
> 
> 时间：2012-06-13T08:40:38.463
> 
> 标签：php, arrays, file

我有一个 .ini 文件，它看起来像：

```
password = password123
username = username123
host = host123 
```

在我的 php 中，我想将值“password123”保存到一个名为 $password 的私有成员变量中，并将“username123”和“host123”保存到私有成员变量中。前缀值（密码 = ，用户名 = ，主机 = ）永远不会改变，但之后的值可能会发生变化。我尝试将文件保存到数组并进行搜索，但遇到了一些问题。非常感谢任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T08:43:45.370

使用[parse_ini_file()](http://php.net/manual/en/function.parse-ini-file.php)函数：

```
class Foobar {
    private $password, $username, $host;

    public function __construct($filename) {
        $array = parse_ini_file($filename);

        $this->password = $array['password'];
        $this->username = $array['username'];
        $this->host = $array['host'];
    }
} 
```

# jpa - JPA Criteria 按枚举值查询顺序

> ID：11011151
> 
> 赞同：2
> 
> 时间：2012-06-13T08:41:11.333
> 
> 标签：jpa, enums, sql-order-by, case, criteria-api

如何使用 JPA 标准对枚举进行排序。例如，要获得类似“ORDER BY CASE color WHEN 'YELLOW' THEN 1 WHEN 'RED' THEN 3 ELSE 2 END”这样的查询

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T10:56:31.737

JPA Criteria API 中的 Case Expressions 可以解决这个问题。

```
CriteriaBuilder cb = entityManager.getCriteriaBuilder()

cb.selectCase(color)
.when(color.YELLOW, 1)
.when(color.YELLOW, 2)
.otherwise(3)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T14:11:09.210

这应该可以，您只需要用 asc 或 desc 包装 case 表达式。

你试过什么代码，你得到什么错误？

见， [http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/Criteria#Order](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/Criteria#Order)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-01T14:43:12.363

这就是我在阅读 JPA 文档后处理它的方式：[http](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/Criteria#Order) ://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/Criteria#Order 我没有深入了解它如何在内部处理，但我猜它是基于排序的在枚举序数上

```
 criteriaQuery.orderBy(criteriaBuilder.asc(Root.get("columnName"))); 
```

# javascript - 使用 API 加载方法时，JWPlayer 无法在 iPad / iPhone 上播放

> ID：11011154
> 
> 赞同：3
> 
> 时间：2012-06-13T08:41:17.540
> 
> 标签：javascript, iphone, ipad, jwplayer

如果我通过在初始化时传递文件来加载视频，它可以工作：

```
var jw = jwplayer('container').setup({
    width: 528,
    height: 295,
    skin: 'skins/rizla/rizla.xml',
    bufferlength : 0.1,
    modes: [
        {type: 'flash', src: 'jwplayer/player.swf'},
        {type: 'html5'}
    ],
    file : 'http://full/path/to/video.mp4',
}); 
```

但是，如果我使用`load`播放器 API 中的方法，它可以在浏览器中正常播放（禁用 Flash，以便加载 HTML5 版本）但不会在 iPad / iPhone 上播放（但没有显示错误）：

```
jw.load({file : 'http://full/path/to/video.mp4'}); 
```

检查`jw.getPlaylist()`每种加载类型的结果会发现非常不同的值，但这可能与问题无关。

注意：视频直接链接时播放正常，在默认媒体播放器中打开，所以这不是视频问题，而是 jwPlayer 特定的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T11:46:57.713

它似乎适用于 6.0 版。见 js 小提琴：

[http://jsfiddle.net/hRAKQ/4/](http://jsfiddle.net/hRAKQ/4/)

```
var jw = jwplayer("test").setup({
    file: "http://clips.vorwaerts-gmbh.de/big_buck_bunny.mp4"
}); 

$('button').on('click', function() {
    jwplayer("test").load([{
        file: "http://clips.vorwaerts-gmbh.de/big_buck_bunny.mp4",
        image: "http://lorempixel.com/320/180/"
    }]);
}); 
```

# vb.net - VB2010 express中通过ADO.Net连接数据库

> ID：11011164
> 
> 赞同：0
> 
> 时间：2012-06-13T08:41:44.227
> 
> 标签：vb.net, ado.net

谁能给我通过ADO.Net在VB2010 express中添加数据库连接的源代码。包括添加、更新、删除、检索和修改数据库字段的所有命令。如果有人可以为我提供带有源代码的小型原型工作模型，那将非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T09:52:07.180

ADO.NET 或多或少是基于 SQL 查询的。因此，对于 CRUD（创建、读取、更新、删除）操作，请查看[SQL 语言](http://en.wikipedia.org/wiki/SQL)（根据您使用的数据库，查询语法可能会有一些小的差异）。

该连接使用专门的提供者实体来实现命名空间中的`IDbConnection`、`IDbCommand`、和接口。`IDbDataAdapter``IDbDataParameter``IDbTransaction``System.Data`

有不同的数据库提供程序（例如 Microsoft SQL Server、Oracle、mySQl、OleDb、ODBC 等）。其中一些是 .NET Framework 原生支持的（MSSQL= [`System.Data.SqlClient`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.aspx)Namespace, OleDb= [`System.Data.OleDb`](http://msdn.microsoft.com/en-us/library/system.data.oledb.aspx), ODBC= [`System.Data.Odbc`](http://msdn.microsoft.com/en-us/library/system.data.odbc.aspx)Namespace），而另一些则必须通过外部库添加（如果您愿意，也可以编写自己的数据库提供程序）。

使用 IDBCommand 对象（例如`System.Data.SqlClient.SqlCommand`对象），您可以定义您的 SQL 命令。

这是一个小示例片段，可能会有所帮助：

```
Public Class Form1

   Sub DBTest()

      '** Values to store the database values in
      Dim col1 As String = "", col2 As String = ""

      '** Open a connection (change the connectionstring to an appropriate value 
      '** for your database or load it from a config file)
      Using conn As New SqlClient.SqlConnection("YourConnectionString")
         '** Open the connection
         conn.Open()
         '** Create a Command object
         Using cmd As SqlClient.SqlCommand = conn.CreateCommand()
            '** Set the command text (=> SQL Query)
            cmd.CommandText = "SELECT ID, Col1, Col2 FROM YourTable WHERE ID = @ID"
            '** Add parameters
            cmd.Parameters.Add("@ID", SqlDbType.Int).Value = 100 '** Change to variable
            '** Execute the value and get the reader object, since we are trying to
            '** get a result from the query, for INSERT, UPDATE, DELETE use 
            '** "ExecuteNonQuery" method which returns an Integer
            Using reader As SqlClient.SqlDataReader = cmd.ExecuteReader()
               '** Check if the result has returned som results and read the first record
               '** If you have multiple records execute the Read() method until it returns false 
               If reader.HasRows AndAlso reader.Read() Then
                  '** Read the values of the current columns
                  col1 = reader("col1")
                  col2 = reader("col2")
               End If
            End Using
         End Using

         Debug.Print("Col1={0},Col2={1}", col1, col2)
         '** Close the connection
         conn.Close()
      End Using
   End Sub
End Class 
```

# sql - SQL select IN（选择）过程太长为什么？

> ID：11011170
> 
> 赞同：1
> 
> 时间：2012-06-13T08:42:07.750
> 
> 标签：sql

假设 TABLE1 中有 100 万个条目。

表 2 中有 50k 个条目。

```
SELECT stringVal 
FROM TABLE2 
WHERE idTable2=5 
```

选择结果：

```
5
4 
```

该选择需要`0.02s`处理但是当我在 IN 中使用它时，它最多需要`20.20s`

```
SELECT count(*) 
FROM TABLE1 
WHERE stringVal IN (
   SELECT stringVal FROM TABLE2 where idTable2=5); 
```

如果我像这样使用它，它将在 0.02 秒内处理

```
SELECT count(*) 
FROM TABLE1 
WHERE stringVal IN (5,4); 
```

谁能解释一下这里的工作原理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T09:47:26.040

我认为您的 RDBMS 在执行查询方面做得很差，其他 RDBMS（例如 SQL Server）可以看到，如果子查询与外部查询不相关，它将在内部*实现*结果并且不会重复执行子查询。例如

```
select *
    , (select count(*) from tbl) -- an smart RDBMS won't execute this repeatedly
from tbl 
```

一个好的 RDBMS 不会重复执行计数，因为它是一个独立的查询（与外部查询不相关）

尝试所有选项，反正只有少数几个

第一，尝试存在。您的 RDBMS 的 EXISTS***可能***比它的 IN 快。我遇到的 IN 比 EXISTS 快，例如：[为什么最自然的查询（即使用 INNER JOIN（而不是 LEFT JOIN））非常慢](https://stackoverflow.com/questions/3177038/why-the-most-natural-queryi-e-using-inner-join-instead-of-left-join-is-very) Quassnoi 的相同观察（IN 比 EXISTS 快）：[http ://explainextended.com /2009/06/16/in-vs-join-vs-exists/](http://explainextended.com/2009/06/16/in-vs-join-vs-exists/)

```
SELECT count(*) 
FROM TABLE1 
WHERE 
   -- stringVal IN 
   EXISTS(
       SELECT * -- please, don't bikeshed ;-)
       FROM TABLE2            
       where 
             table1.stringVal = table2.stringVal -- simulated IN
             and table2.idTable2 = 5); 
```

2nd，尝试 INNER JOIN，如果没有重复就使用这个，或者使用 DISTINCT 删除重复。

```
SELECT count(*) 
FROM TABLE1 
JOIN (
       SELECT DISTINCT stringVal -- remove duplicates
       FROM TABLE2            
       where table2.idTable2 = 5 ) as x
ON X.stringVal = table1.stringVal 
```

第三，尝试自己实现行。我在使用 SQL Server 时遇到了同样的问题，查询物化行比查询另一个查询的结果要快。

检查将查询结果具体化到表的示例，然后在结果上使用 IN。我发现它比在另一种查询方法上使用 IN 更快，您可以阅读帖子的底部：[http ://www.ienablemuch.com/2012/05/recursive-cte-is-evil-and-cursor -is.html](http://www.ienablemuch.com/2012/05/recursive-cte-is-evil-and-cursor-is.html)

例子：

```
SELECT distinct stringVal -- remove duplicates
into anotherTable
FROM TABLE2            
where idTable2 = 5;

SELECT count(*) 
FROM TABLE1 where stringVal in (select stringVal from anotherTable); 
```

以上适用于 Sql Server 和 Postgresql，在其他 RDBMS 上可能是这样的：

```
create table anotherTable as
SELECT distinct stringVal -- remove duplicates
FROM TABLE2            
where table2.idTable2 = 5;

select count(*)
from table1 where stringVal in (select stringVal from anotherTable) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T08:50:37.550

虽然我喜欢子查询，但它们非常强大，但速度也很慢，因为每次迭代都必须对查询进行完全评估，哎呀！（取决于实施）

这就是为什么他们是我的/我们最后的手段。

一些 SQL 实现非常好，并且会缓存子查询，尽管我不太确定这有多安全，但你仍然必须遍历整个结构，如果结构没有正确优化，如果你嵌套它会花费二次甚至三次时间够了……

```
SELECT stringVal 
FROM TABLE2 
WHERE idTable2=5 
```

这是线性时间 O(n)，如果 sql 数据库存储统计信息，它甚至可以是常数 O(1)，但我们假设它不是这样，它将搜索每一行并返回所有匹配 where条款。

```
SELECT count(*) 
FROM TABLE1 
WHERE stringVal IN (
   SELECT stringVal FROM TABLE2 where idTable2=5); 
```

假设子查询不是缓存，那么它在每一行都被评估，如果你有很多评估，很多浪费的重复计算，即使它的缓存结构可能不是最佳的搜索，不是提到您还在字符串列表中比较字符串。

```
SELECT count(*) 
FROM TABLE1  
WHERE stringVal IN (5,4); 
```

子查询仍在评估中，但它是一个常量表达式，基本上没有开销，它不需要做任何 IO 或处理锁或任何事情 :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T08:45:54.647

试试这个

```
SELECT count(*) FROM TABLE1 where EXISTS
(SELECT 1 FROM TABLE2 where idTable2=5 and stringVal = TABLE1.stringVal  ); 
```

您应该为 TABLE1 和 TABLE2 表的 stringVal 创建索引。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T21:35:33.540

这是一个简单的连接，它将为您提供与您正在寻找的相同类型的结果。这可以应用于许多不同的情况，这将避免必须查询另一个表。

```
SELECT COUNT(*)
FROM TABLE1 INNER JOIN TABLE2 ON TABLE1.'COLUMN' = TABLE2.'COLUMN' AND TABLE2.IDTABLE2=5 
WHERE 'WHATEVER YOU WANT' 
```

将“COLUMN”替换为两个表中都引用的列，通常是 ID 或主键。

# android - listview 滚动到屏幕底部

> ID：11011171
> 
> 赞同：0
> 
> 时间：2012-06-13T08:42:09.250
> 
> 标签：android, android-layout, android-listview

我有一个具有以下布局的活动。

![在此处输入图像描述](../Images/6a87f45aaaf8bc678595117d10e7e214.png)

所以在这个屏幕上，最初`ListView`是空的。我输入一些文本`EditText`并单击它旁边的搜索图标，应用程序从服务器获取项目并填充`ListView`. 现在的问题是`ListView`向下滚动到最后一项。

我`onClick()`的搜索代码`Button`

```
 String str_searchTxt = mEt_search.getText().toString().trim();
            if (str_searchTxt.length() == 0) {
                Toast.makeText(getApplicationContext(),
                        getResources().getString(R.string.ENTER_MANDATORY),
                        Toast.LENGTH_LONG).show();
                return;
            }
            // get items List in araryList
            itemList = getItemList(messageHandler,str_searchTxt); 
```

我的消息处理程序中的代码：

```
 public void handleMessage(Message msg) {
        super.handleMessage(msg);
        switch (msg.what) {
        case 2:
            String txt = msg.getData().getString("text");

            Log.i("Result", txt);
            progressDialog.dismiss();
            if (txt.equalsIgnoreCase("success")) {
                lview3 = (ListView) findViewById(R.id.listView1);
                adapter = new ListViewCustomAdapter(
                        SearchAssetActivity.this, itemList);
                lview3.setAdapter(adapter);
                lview3.setOnItemClickListener(SearchAssetActivity.this);
                lview3.requestFocus();
                lview3.setSelection(0);             

            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T08:44:48.473

您可以使用ListView 的[**setSelection(position)**](http://developer.android.com/reference/android/widget/ListView.html#setSelection%28int%29)，

```
mListView.setSelection(first_position); 
```

其他的你可以试试

```
mListView.setSelectionAfterHeaderView(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T08:46:49.747

试试这个：

```
yourscrollview.fullScroll(ScrollView.FOCUS_UP); 
```

# javascript - 设置只读属性以保持输入可编辑

> ID：11011172
> 
> 赞同：0
> 
> 时间：2012-06-13T08:42:12.250
> 
> 标签：javascript, jquery, html

是否可以设置输入的“只读”属性以使其可编辑？

我正在做填字游戏，我可以更改我的功能以使用不同的属性搜索/选择标签，但我仍然想知道这是否可能。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T08:45:29.003

如果 JavaScript`readOnly`属性设置为`true`（布尔值，而不是字符串），则控件将不可编辑。

如果 JavaScript`readOnly`属性设置为`false`（布尔值，而不是字符串），则控件将是可编辑的。

如果 HTML`readonly`属性存在，则该`readOnly`属性将默认为`true`.

如果 HTML`readonly`属性不存在，则该`readOnly`属性将默认为`false`.

`value`无论属性处于何种状态，JavaScript 都可以修改控件的`readOnly`属性。

如果控件设置为`readOnly`（JavaScript 控制台和 DOM 检查器不是正常的 UI），则无法通过正常的浏览器 UI 编辑控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T08:54:51.097

该属性`readonly`使用户无法编辑输入控件。使用 javascript 您仍然可以更改其值。`readonly`将javascript 中的属性设置`false`为对用户没有影响，输入仍然是`readonly`. 删除该属性将再次为用户呈现可编辑的输入。

你也可以使用`disabled`属性，有两个不同：字段显示为灰色，你*可以*直接设置`disabled`属性。

这一切都在[这个 jsfiddle](http://jsfiddle.net/KooiInc/ECw6A/)中经过测试/演示[**注**：更新]

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-09-25T00:48:53.927

我建议使用 html5 支持的数据前缀 data-readonly="true" [https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Using_data_attributes](https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Using_data_attributes)

# c# - 如何使用 .NET 桥接在 Progress Openedge ABL 中使用属性装饰类、方法和属性？

> ID：11011173
> 
> 赞同：2
> 
> 时间：2012-06-13T08:42:13.520
> 
> 标签：c#, .net, attributes, progress-4gl, openedge

我在工作中必须使用 Progress Openedge Architect，并且需要将一些 C# 代码转换为 ABL 代码（ABL 是语言名称）。所以我需要找到如何用 .NET 属性来装饰我的类、属性和方法。我搜索了本指南（[http://documentation.progress.com/output/OpenEdge102b/pdfs/dvngm/dvngm.pdf](http://documentation.progress.com/output/OpenEdge102b/pdfs/dvngm/dvngm.pdf)），但在 C# 到 ABL 映射部分中没有提及装饰。

一个简单的 C# 示例：

```
[global::System.Configuration.UserScopedSettingAttribute()]
[global::System.Diagnostics.DebuggerNonUserCodeAttribute()]
[global::System.Configuration.DefaultSettingValueAttribute("9.75")]
public decimal POLICE {
    get {
        return ((decimal)(this["POLICE"]));
    }
    set {
        this["POLICE"] = value;
    }
} 
```

感谢您对此的任何帮助！

亲切的问候，

加布里埃尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T09:37:25.627

**不能**在 ABL 代码中使用 C# 中的属性。您可以从 C# 类创建实例或继承它。

在这种情况下，我将在 C# 代码中创建此属性。然后我会在 ABL 中继承这个类，并在必要时制作一些包装器。

直到 10.2B 才允许在客户端使用这个 C# 类**（**程序必须在 prowin32.exe 上运行）...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T13:55:59.860

这是提出这个问题的好地方：http: [//communities.progress.com/pcom/community/psdn/openedge/gui4dotnet ?view=discussions](http://communities.progress.com/pcom/community/psdn/openedge/gui4dotnet?view=discussions)

# objective-c - Sqlite 为 nil NSStrings 插入 '(null)'

> ID：11011177
> 
> 赞同：1
> 
> 时间：2012-06-13T08:42:22.623
> 
> 标签：objective-c, ios, sqlite

在尝试将记录插入数据库时​​，我利用用户将一些字段留空，即 nil 字符串。现在，当我将数据插入数据库时​​，我在数据源为 nil 的每一列中得到（null）而不是 nil 值。当我从数据库中获取记录并将其显示给用户时，他留空的值现在显示为（null）。

我可以实现逻辑来检查这个'（null）'字符串，但我想应该有一些方法可以在数据库级别处理它。我的意思是如果我插入一个 nil 值，那么它应该是 nil 或空而不是（null）字符串。谁能帮我解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T13:42:29.863

当您使用带有“%@”格式说明符的字符串格式，并且相应的对象指针值为`nil`时，格式化的字符串在该位置获得“（null）”。因此，您或您正在使用的库正在这样做。

在字符串格式之外，我不知道任何会突然产生“（null）”的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-09T17:20:07.587

Ken Thomases 的回答是正确的，因为您正在`"(null)"`退出数据库，因为您在`"(null)"`没有意识到的情况下将其放入数据库。

我只是想补充一点，当您将记录插入数据库时​​，您可以确保将可选字符串作为`NULL`值插入，如下所示：

```
let nullableStringValue: String

if let stringValue = myObject.myOptionalProperty {
    nullableStringValue = "'\(stringValue)'"
} else {
    nullableStringValue = "NULL"
}

let insertStatement = "INSERT INTO MyTable (MyNullableColumn) VALUES (\(nullableStringValue))"

// proceed to execute the insert statement 
```

然后，当您查询数据库时，您可以读取可能为 null 的值，如下所示：

```
let myNullableColumnText: String?

if let myNullableColumnTextPointer = sqlite3_column_text(compiledSelectStatement, columnIndex) {
    myNullableColumnText = String(cString: myNullableColumnTextPointer)
} else {
    myNullableColumnText = nil
} 
```

# jquery - 如何获取 xy 坐标但不是从窗口浏览器开始，而是从 div 开始？

> ID：11011178
> 
> 赞同：0
> 
> 时间：2012-06-13T08:42:25.187
> 
> 标签：jquery

大家好！！

我在这里有一个问题...我在这里使用 jquery ..n 使用 Visual Studio 2008 ..我需要在将图像拖放到 div 中后找到图像的坐标。但我得到的是坐标从超出 div ..我希望它从 div 内部计数..

请问……有人吗？？

这是我的代码：

```
 $('#dragThis').draggable({
    cursor: 'move',        // sets the cursor apperance
    containment: '#dragThis2',
    drag: function() {
    var offset = $(this).offset();
    var xPos = Math.abs(offset.left);
    var yPos = Math.abs(offset.top);
    $('#posX').text('x: ' + xPos);
    $('#posY').text('y: ' + yPos);
    },
    stop: function(event, ui) {

    // Show dropped position.
    var Startpos = $("#dragThis").position();
    var Stoppos = $(this).position();

    $("#dragThis2").val((Stoppos.left - Startpos.left));
    var left = Math.abs(Stoppos.left);
    var top = Math.abs(Stoppos.top);
    $('#posX').text('left: ' + left);
    $('#posY').text('top: ' + top);
    }

   }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T09:14:35.933

试试这个[http://jquerypp.com/#within](http://jquerypp.com/#within)。此功能确实完成了任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T08:56:04.273

你可以使用[`position()`](http://api.jquery.com/position/)：

> .position() 方法允许我们检索元素相对于偏移父元素的当前位置。

```
var pos = $(this).position(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T13:12:48.763

如果`#dragThis2`是你的父 div 那么

```
var parentLeft = $("#dragThis2").position().left;
var parentTop = $("#dragThis2").position().top;

var left = Math.abs(Stoppos.left - parentLeft);
var top = Math.abs(Stoppos.top - parentTop);
$('#posX').text('left: ' + left);
$('#posY').text('top: ' + top);​ 
```

会给你`left`和`top`相对于父div`#dragThis2`

# android - 如何在android中缩放已经存在的位图？

> ID：11011180
> 
> 赞同：1
> 
> 时间：2012-06-13T08:42:30.887
> 
> 标签：android

我有一个已经解码的位图，我想在画布上绘制之前临时缩放它。因此，解码文件并设置之前的大小是不可能的。我想保持现有位图的大小，并在将其绘制到画布上之前将其缩小。这可能吗？

使用 Matrix postScale(sx, sy, px, py) 可以正确缩放它，但不能正确定位它。而且 canvas.drawBitmap 没有矩阵和 x & y 位置的选项，从我所见。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T08:51:11.323

这是代码：

```
public static Bitmap scaleBitmap(Bitmap bitmap, int width, int height) {
    final int bitmapWidth = bitmap.getWidth();
    final int bitmapHeight = bitmap.getHeight();

    final float scale = Math.min((float) width / (float) bitmapWidth,
            (float) height / (float) bitmapHeight);

    final int scaledWidth = (int) (bitmapWidth * scale);
    final int scaledHeight = (int) (bitmapHeight * scale);

    final Bitmap decoded = Bitmap.createScaledBitmap(bitmap, scaledWidth, scaledHeight, true);
    final Canvas canvas = new Canvas(decoded);

    return decoded;
} 
```

**请注意：**将位图传递给缩放，它是新的高度和宽度。

# php - 使用php在字符串中降级标题标签（递归地将h1转换为h2，将h2转换为h3）

> ID：11011185
> 
> 赞同：3
> 
> 时间：2012-06-13T08:42:42.303
> 
> 标签：php, html, xml, parsing, domdocument

我知道我们可以通过将字符串加载到

`$doc = DOMDocument::loadXML($xml_str);`

然后像这样获取 H1 标签：

```
$list = $doc->getElementsByTagName("h1");
for ($i = 0; $i < $list->length; $i++) {
   print($list->item($i)->nodeValue . "<br/>\n");
} 
```

如果我想将这些 H1 更改为 H2，我会有点迷茫。我读过关于`appendChild()`，但这会使事情变得非常混乱。有没有办法递归地降级包含 html 的字符串中的标题标签？该方法将接受以下参数：

```
function demoteHeadings($xml_string, $top_level='H2'){
   //if string's highest heading is more than $top_level,
   //we demote all headings in this html by 1 level. i.e. if
   //h1 is found, all h1s, h2s and so on are demoted one level -
   //and we recursively    call this function again;
   if($top_level_in_xml > $top_level) demoteHeadings($output, $top_level);
} 
```

我希望我说得通。我想要实现的是自动解析我的客户在他们的 CMS 中输入的标题......当标题已经是 h1 时，他们在文章中使用 H1。有时，还有一个带有 h1 的页面标题，这确实弄乱了整个页面的结构。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T08:52:33.707

[使用str_ireplace()](http://php.net/manual/en/function.str-ireplace.php)会不会更简单

```
$content = str_ireplace(array('<h1>','</h1>'),array('<h2>','</h2>'),$input); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T08:55:56.470

由于文章将位于更深的容器中，因此适当地设置它们的样式应该不是问题。但是我想你已经考虑过了

我会因为建议正则表达式来解析 HTML 而被告知...但是由于您的客户正在使用 CMS 输入 HTML，我收集到输入的语法非常可靠并且元素没有属性，那么为什么不简单地 str_replace 呢？

啊，劳伦斯打败了我

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-10T09:14:39.617

str_ireplace 解决方案的另一个变体，但更健壮一些（考虑到 h1 到 h100）

```
function demoteHtmlHeaderTags($html)
{
        $originalHeaderTags = [];
        $demotedHeaderTags = [];

        foreach(range(100, 1) as $index)
        {
            $originalHeaderTags[] = '<h' . $index .'>';

            $originalHeaderTags[] = '</h' . $index . '>';

            $demotedHeaderTags[] = '<h' . ($index + 1) . '>';

            $demotedHeaderTags[] = '</h' . ($index + 1) . '>';
        }

        return str_ireplace($originalHeaderTags, $demotedHeaderTags, $html);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-21T23:45:44.517

此解决方案将执行简单的搜索和替换以降级标题标签。例如，它将变为`<h1>`和`<h2>`，`<h2>`等等`<h3>`。

将使用更强大的解决方案，`DOMDocument`但我在 Stack Overflow 上的任何地方都找不到有效的解决方案。我决定不花时间以最精确或“正确”的方式解决这个问题，因为这个解决方案在 99% 的情况下可能已经足够好了。

```
for ($i = 1; $i <= 5; $i++) {
    $html = str_ireplace("<h" . $i, "<h" . $i . "_replace", $html);
    $html = str_ireplace("</h" . $i . ">", "</h" . $i . "_replace" . ">", $html);
}

for ($i = 1; $i <= 5; $i++) {
    $html = str_ireplace("<h" . $i . "_replace", "<h" . ($i + 1), $html);
    $html = str_ireplace("</h" . $i . "_replace" . ">", "</h" . ($i + 1) . ">", $html);
} 
```

# android - 如果apk已签名，应用程序启动时会黑屏

> ID：11011190
> 
> 赞同：4
> 
> 时间：2012-06-13T08:43:06.380
> 
> 标签：android

我的应用程序在调试模式下运行良好，但如果我用相同的代码构建一个签名的 apk，它打开时将是黑屏。

这种情况只出现在android 4.0.3/samsung Galaxy II和2.3.X同款手机上没有问题。

为什么？如何解决？

# asp.net - 您如何指定 html 助手具有 runat 服务器属性？

> ID：11011196
> 
> 赞同：0
> 
> 时间：2012-06-13T08:43:22.820
> 
> 标签：asp.net, asp.net-mvc-3, html-helper

正如问题所说。具体来说，我希望 html.beginform() 具有 runat="server" 属性。

原因是我在表单中放置了 asp.net 登录控件，这需要表单元素在服务器上运行。

多谢了。

鲁文迪

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T08:44:28.480

不，您可以在 ASP.NET MVC 3 中忘记此属性。它不能使用。不要在 ASP.NET MVC 应用程序中使用服务器端控件。他们无法工作。要么使用旧的 WebForms ASPX 视图，要么如果你想使用 ASP.NET MVC，你将不得不用 ASP.NET MVC 特定的东西替换 ASP.NET 登录控件。使用内置向导创建一个新的 ASP.NET MVC 3 应用程序并查看 AccountController 和相应的 LogOn 视图。

# winforms - 分配给 datagridview 的实体集将禁用排序

> ID：11011198
> 
> 赞同：0
> 
> 时间：2012-06-13T08:43:36.407
> 
> 标签：winforms, entity-framework, entity-framework-4, datagridview

我使用实体框架。当我将实体集绑定到标准 DataGridView 控件时，我失去了按标题排序的功能。我什至尝试先将实体集绑定到绑定源，但结果是一样的。

此外，如果我尝试从代码中对列进行排序，我什至会得到一个接口未实现的异常......标准 EF 类是否不可排序（会很糟糕）？不用说，如果提供 DataView 作为数据源，则排序工作。

我怎么能解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T17:25:21.960

派对迟到了，但我想我至少会发布一个答案......有两种方法可以轻松实现这一点（实际上是相同的方法，只是路线略有不同）。

所以我们有一个基本的 EF 上下文查询，预执行。

```
var query = context.Projects
    .Where(x => x.Division == selectedDivision); 
```

加载查询，使实体位于本地缓存中。然后将 DGV 的绑定源指向本地缓存的同步 BindingList

```
query.Load();
projectBindingSource.DataSource = context.Projects.Local.ToBindingList(); 
```

或者......有时我不想/不需要更改跟踪或缓存“妨碍”其他操作，所以我需要一个非跟踪集合。

在不跟踪的情况下执行查询并将其结果加载到 ObservableCollection （这就是 .Local ）。将 DGV 的绑定源指向 ObservableCollection 的同步 BindingList

```
var locs = new ObservableCollection<Location>(query.AsNoTracking().ToList());
locationBindingSource.DataSource = locs.ToBindingList(); 
```

所有文本、数字和布尔列都将启用对标题单击的排序。导航属性的列不会排序：假设一个项目有一个所有者导航属性，因为我有所有者实体的 ToString() 覆盖显示 Owner.FullName 属性我将看到一个具有 FullName 值的所有者列，但我*假设*排序器仍然将列的类型视为 System.Data.Entity 对象（而不是显示的冒泡文本），因此没有默认的排序器。

# jqgrid - jqGrid loadComplete 在数据填充网格之前触发 - sum 函数显示以前的值

> ID：11011203
> 
> 赞同：1
> 
> 时间：2012-06-13T08:43:56.080
> 
> 标签：jqgrid

我有个问题。LoadComplete 在数据传递到网格之前触发。

我有这个表格： ![在此处输入图像描述](../Images/b2daa0576ece26fffb21a83fe2a52cc4.png)

我通过 jquery Post 将新行数据传递到服务器。并通过刷新网格

```
$('#grid').trigger("reloadGrid"); 
```

在该事件引发并运行此函数之后，将`alert($('#grid').jqGrid('getCol', 'Unit', false, 'sum');)`显示先前的值（在我添加项目之前的实际值）。所以如果我有两行，值在哪里

![在此处输入图像描述](../Images/3b14425e73dbd8fe0366ef20204e4e59.png)

我添加了第三个值 - 1。弹出显示**2**，但预期为**3**。如果我删除行我有同样的问题我的网格：

```
jQuery("#grid").jqGrid({
        caption: 'Timesheet',
    url:'/GetData',
        editUrl: '/EditRow'
    datatype: "json",
    colNames: ['Id','Start Time', 'End Time', 'Unit'],
        colModel: [
                     { name: 'Id', index: 'Id' },
                     { name: 'StartTime', index: 'StartTime' },
                     { name: 'EndTime', index: 'EndTime' },
                     { name: 'Unit', index: 'Unit' }
                 ],
    rowNum:10,
    rowList:[10,20,30],
    pager: '#pager2',
    sortname: 'id',
    viewrecords: true,
    sortorder: "desc",
    postData: { entityId: function () {
                    return $('#GetId').val();
                },
                loadComplete: function (data) {
                      **alert($('#grid').jqGrid('getCol', 'Unit', false, 'sum');)**
                    }

});
jQuery("#grid").jqGrid('navGrid','#pager2',{edit:false,add:true,del:false}); 
```

添加了示例。 [http://jsfiddle.net/5bmVt/1/](http://jsfiddle.net/5bmVt/1/)

已编辑。修改示例 [http://jsfiddle.net/SUvvW/1/](http://jsfiddle.net/SUvvW/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T09:24:31.177

编码

```
alert($('grid').jqGrid('getCol', 'Unit', false, 'sum')); 
```

看来我错了。可能是这样的

```
alert($('#grid').jqGrid('getCol', 'Unit', false, 'sum')); 
```

但最好使用`$(this)`inside of`loadComplete`和其他回调：

```
alert($(this).jqGrid('getCol', 'Unit', false, 'sum')); 
```

**更新**：您的演示代码中的主要问题是在您填充数据*之前*`loadComplete`将被调用。此外，填充网格是我所知道的最慢的方式。您应该将参数与网格的所有数据一起使用，并额外使用以提高性能。[在此处](http://jsfiddle.net/5bmVt/6/)查看修改后的演示。*`addRowData``data``gridview: true`*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T10:10:19.127

问题是我的代码中的错误。所以这不是 jq Grid 问题。*

# ruby - 将 ruby 数组转换为字符串

> ID：11011204
> 
> 赞同：0
> 
> 时间：2012-06-13T08:44:05.167
> 
> 标签：ruby, arrays

我对红宝石还很陌生。我有以下csv：

```
Office (1), Test 
Office (Test)(2), Test 
```

在“data.csv”中。

然后在我的红宝石脚本中；

```
CSV.foreach("data.csv") do |line|
  registeredOffice = line[0].to_s() 
  macOffice = registeredOffice.scan(/\(([^\)]+)\)/).last

  csvText = "#{csvText}\n#{macOffice}"
end 
```

这给了我

```
["1"]
["2"] 
```

但是我想知道如何将上面的内容转换为字符串，所以输出是

```
1
2 
```

使用`.join`或`[0]`返回一个`nil:NilClass (NoMethodError)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T09:06:45.017

你可能想要这样的东西：

```
macOffice = registeredOffice[/(\d+)\)$/, 1] 
```

使用捕获组扫描将为您提供多维数组

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T09:48:07.460

以下行：

```
macOffice = registeredOffice.scan(/\(([^\)]+)\)/).last 
```

返回数组，因为扫描返回数组数组。对于 的第一行`data.csv`，它是`["1"]`。

我猜你需要标量值`macOffice`，因此，你想使用 match ，它只返回非重复匹配 using `match`，它返回一次匹配数组。例如，您可以使用`[1]`下标从返回的数组中获取第一个匹配项，因此：

```
macOffice = registeredOffice.match(/\(([^\)]+)\)/)[1] 
```

返回`1`。

假设你想要一个数组，你可以这样写：

```
out = []
CSV.foreach("data.csv") do |line|
  registeredOffice = line[0].to_s() 
  macOffice = registeredOffice.match(/\((\d+)\)/)[1]
  out.push(macOffice)
end

puts out.join(",") 
```

生产`1,2`

# c# - 记录方法调用的最佳方式是什么？

> ID：11011214
> 
> 赞同：1
> 
> 时间：2012-06-13T08:44:39.947
> 
> 标签：c#, logging, aop

我需要在我的应用程序中记录每个方法调用。我不想在业务层的每个方法中重复代码

我一直在研究 AOP 方法，这似乎是目前最好的选择，但我不知道如何使用这种方法。

任何建议或链接文章或示例将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T08:48:07.847

您可以使用[PostSharp](http://www.codeproject.com/Articles/337564/Aspect-Oriented-Programming-Using-Csharp-and-PostS)，它是一个 APO 基础设施，并且您在该链接上有一个很好的示例来了解如何使用它。

如果你也需要任何日志基础设施，你可以使用[log4net](http://www.codeproject.com/Articles/14819/How-to-use-log4net)。

从上面的链接中，您可以看到日志属性示例，您也可以修改它以使用日志记录基础设施：

```
[Serializable]
public class LogAspect : OnMethodBoundaryAspect
{
    public override void OnEntry(MethodExecutionArgs args)
    {
        Console.WriteLine(Environment.NewLine);

        Console.WriteLine("Entering [ {0} ] ...", args.Method);

        base.OnEntry(args);
    }

    public override void OnExit(MethodExecutionArgs args)
    {
        Console.WriteLine("Leaving [ {0} ] ...", args.Method);

        base.OnExit(args);
    }
} 
```

在您的代码上使用它：

```
[LogAspect]
public void SomeMethod()
{
} 
```

这将登录`SomeMethod`通话

# uinavigationcontroller - MvvmCross UINavigationController 自定义导航栏

> ID：11011218
> 
> 赞同：2
> 
> 时间：2012-06-13T08:44:54.657
> 
> 标签：uinavigationcontroller, xamarin.ios, uinavigationbar, mvvmcross

根据我在 MvvmCross 方面的经验，我设法为 iPhone 构建了一个以 TabBarController 开头的应用程序。我还可以在每个选项卡中成功导航到更深层次。当我想在更深层次上自定义导航栏时，问题就开始了 - 设置后退按钮颜色等。我用于导航的代码是标准 viewModel 代码 -

```
this.RequestNavigate<InJourneyViewModel>(); 
```

…工作正常，但我不能对导航到视图的导航栏做任何事情，除了设置它的标题。

任何想法或建议表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T11:30:22.220

我认为如果您发布更多失败的代码可能会有所帮助。

我怀疑这个问题是更通用的 Cocoa、MonoTouch 和/或后退按钮问题。

我刚刚在[https://github.com/slodge/MvvmCross/tree/master/Sample%20-%20CirriousConference/Cirrious.Conference.UI.Touch中使用了 MapView.cs 中的 ViewDidLoad 代码](https://github.com/slodge/MvvmCross/tree/master/Sample%20-%20CirriousConference/Cirrious.Conference.UI.Touch)

最后，我可以添加一些条形按钮更改，例如：

```
 var leftButton = new UIBarButtonItem("FooBar", UIBarButtonItemStyle.Bordered, null);
        leftButton.TintColor = UIColor.Green;
        NavigationItem.SetLeftBarButtonItem(leftButton, false);
        NavigationItem.RightBarButtonItem.TintColor = UIColor.Red; 
```

结果是：

![四](../Images/45a0f26b9ebcc4c6d092d62a43068635.png)

或者，通过在 WelcomeView 中放置代码：

```
 var leftButton = new UIBarButtonItem("FooBar", UIBarButtonItemStyle.Bordered, null);
        leftButton.TintColor = UIColor.Green;
        NavigationItem.BackBarButton = leftButton; 
```

然后我成功实现：

![三](../Images/04fc6d56fcb11dc6b4a73a979e4305ed.png)

或者，通过使用如下代码：

```
 UIBarButtonItem.AppearanceWhenContainedIn(typeof(UINavigationBar)).TintColor = UIColor.Blue; 
```

然后这使我能够自定义所有导航栏按钮，例如：

![二](../Images/0d29d241a6d5fbca8066aa244f0be476.png)

* * *

在某一时刻，我还设法实现了：

![一](../Images/926dc150c02812e8cd54d22f6de7aa6a.png)

...但遗憾的是，我真的不知道哪个代码组合给了我这个！如果您的问题特别是与后退按钮有关，那么我认为您需要挖掘其他问题和/或发布一些代码并希望有人能提供帮助 - 有很多关于如何做到这一点的帖子，但我不太明白了解它们对 MonoTouch 的全部含义 - 例如[NavigationBar 和导航按钮中的单独标题](https://stackoverflow.com/questions/5338547/separate-title-in-navigationbar-and-navigation-buttons/5339862#5339862)

# ruby-on-rails - 未定义的局部变量或方法'current_user'（rails）

> ID：11011220
> 
> 赞同：1
> 
> 时间：2012-06-13T08:44:56.577
> 
> 标签：ruby-on-rails, testing, helper

我正在测试我的项目，它是关于包含此方法的 application_helper.rb ：

```
def delete_link table=""
        if current_user.role.name=="Admin" || current_user.role.name=="Pemilik"
            link_to 'Hapus', table, :confirm => 'Anda yakin?', :method => :delete
        end
    end 
```

我想测试那个方法，所以我像这样在我的 customers_controller_test.rb 上进行测试

```
require 'test_helper'

class CustomersControllerTest < ActionController::TestCase
  include Devise::TestHelpers
  include ApplicationHelper
  setup do
    @permission = Permission.create(:name=>"Customer")
    @role = Role.create(:name=>"Admin")
    @user = User.create(:name=>"Admin", :role_id => 1, :email => "email@email.email", :password => "123456")
    @role_permission = RolePermission.create(:role_id=>@role.id, :permission_id=>@permission.id, :access=>2)
    @customer = FactoryGirl.create(:customer)

    sign_in @user    
  end

  test "should link to delete" do
    puts assert sign_in @user
    current_user = @user
    puts current_user.name
    puts current_user.role.name
    assert delete_link(customer_path(@customer.id))
    puts "2"
  end
end 
```

但是我得到了未定义的局部变量或方法'current_user'。任何想法？谢谢你的建议:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T08:46:24.427

设计`current_user`方法是在应用程序控制器上定义的，因此在助手中不可用。通过辅助方法的参数提供给用户，你就设置好了。

# php - 查找和替换可能部分位于 html 标记内的字符串

> ID：11011236
> 
> 赞同：3
> 
> 时间：2012-06-13T08:46:13.170
> 
> 标签：php, html, regex, preg-replace, html-parsing

任何人都可以建议以下问题的可能解决方案。

例如，我有一串文本“Suspendisse potenti”。

我需要在一些 html 中搜索字符串并将其包装在 span 标签中：

以便

```
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque 
scelerisque neque in eros convallis egestas. Phasellus lacus massa, 
laoreet cursus scelerisque id, posuere ac mauris. In hac habitasse 
platea dictumst. Aenean eros dui, congue ut ultrices vitae, convallis
quis felis. Ut non ante non nunc tempus ultrices et et ipsum. 
Suspendisse potenti. In sed mauris vel nibh dapibus 
pellentesque eu id dolor. Morbi dictum quam eleifend ante mattis rutrum. 
Mauris nisl ligula, consectetur eget gravida vel, varius vel metus. 
Nullam a ante metus.</p> 
```

会成为

```
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque 
scelerisque neque in eros convallis egestas. Phasellus lacus massa, 
laoreet cursus scelerisque id, posuere ac mauris. In hac habitasse 
platea dictumst. Aenean eros dui, congue ut ultrices vitae, convallis
quis felis. Ut non ante non nunc tempus ultrices et et ipsum. 
<span class="search-match" id="search-term-0">Suspendisse potenti</span>. 
In sed mauris vel nibh dapibus pellentesque eu id dolor. Morbi dictum 
quam eleifend ante mattis rutrum. Mauris nisl ligula, consectetur eget 
gravida vel, varius vel metus. Nullam a ante metus.</p> 
```

我有这个工作使用：`$text = preg_replace_callback( '/(' . preg_quote($searchTerm, '/') . '*)/', "Search::addSearchId", $text );`

我遇到的问题是当我正在搜索的文本中的部分字符串位于 html 标记中时。

```
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque 
scelerisque neque in eros convallis egestas. Phasellus lacus massa, 
laoreet cursus scelerisque id, posuere ac mauris. In hac habitasse 
platea dictumst. Aenean eros dui, congue ut ultrices vitae, convallis
quis felis. Ut non ante non nunc tempus ultrices et et ipsum. 
Suspendisse <a href="/link">potenti</a>. In sed mauris vel nibh dapibus 
pellentesque eu id dolor. Morbi dictum quam eleifend ante mattis rutrum. 
Mauris nisl ligula, consectetur eget gravida vel, varius vel metus. 
Nullam a ante metus.</p> 
```

或在标签中使用搜索词和额外文本

```
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque 
scelerisque neque in eros convallis egestas. Phasellus lacus massa, 
laoreet cursus scelerisque id, posuere ac mauris. In hac habitasse 
platea dictumst. Aenean eros dui, congue ut ultrices vitae, convallis
quis felis. Ut non ante non nunc tempus ultrices et et ipsum. 
Suspendisse <a href="/link">potenti In sed</a> mauris vel nibh dapibus 
pellentesque eu id dolor. Morbi dictum quam eleifend ante mattis rutrum. 
Mauris nisl ligula, consectetur eget gravida vel, varius vel metus. 
Nullam a ante metus.</p> 
```

这显然错过了文本，因为它只搜索没有任何标签的纯字符串。

有没有人有任何方便的正则表达式可以匹配纯字符串以及其中包含 html 的字符串？

这是为了在从搜索页面引用后在页面顶部创建一些锚点，我想突出显示搜索词，所以我需要包装整个字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T09:19:01.437

**试试这个**

```
$result = preg_replace_callback('%\b(Suspendisse potenti)(?!</\w+)\b%im', 'compute_replacement', $subject);

function compute_replacement($groups) {
    // You can vary the replacement text for each match on-the-fly
    // $groups[0] holds the regex match
    // $groups[n] holds the match for capturing group n
    return '<span>$1</span>';
} 
```

# qt - 如何在 Qt 中获取系统默认字体设置？

> ID：11011238
> 
> 赞同：19
> 
> 时间：2012-06-13T08:46:14.480
> 
> 标签：qt, windows-7, fonts, locale, qt4.7

我正在使用 Qt 构建一个桌面应用程序，我的开发机器是 win 7 x64 with Japanese locale，标准系统字体是[Meiryo](http://en.wikipedia.org/wiki/Meiryo)。大多数win 7 UI都是这种字体，虽然经典/旧程序（如ui字体自定义窗口）本身使用不同的字体，即MS UI Gothic。直到我发现 QtCreator 在一个地方用 MS UI Gothic 构建我的应用程序，而在另一个地方用 Meiryo 构建我的应用程序时，这才困扰我。例如，qlabels、qlineedits、qcombobox 都使用 MS UI Gothic，但我稍后添加的带有 qtableview 的自定义完成程序使用 Meiryo。

我在 QtCreator 的 Designer 中制作了大部分 UI，并在代码中添加了完成者。如果我在 The Designer 中将所有小部件的字体更改为 Meiryo，那么应用程序当然会使用 Meiryo，因此看起来不错，但在这种情况下，我宁愿 Qt 自动为我选择任何系统的默认字体，因为 win 7 不会是唯一的平台我将使用这个程序。

更让我担心的是 QApplication::font() 返回 MS UI Gothic，在我的情况下这是错误的。当然，我可以使用 QApplication::setFont() 设置应用程序范围的字体，但这违背了在没有微管理字体的情况下拥有原生外观的整个目的。

所以我的问题是，

1.  Qt如何确定系统默认字体以及，
2.  如果这是一个 Qt Bug，我该如何解决它？
3.  我应该如何使用 .ui 文件并让我的 UI 在运行时使用默认系统字体？

**我发现的一些澄清和事实**

1.  我希望我的应用程序对每个文本都使用系统默认字体。

2.  [这个讨论](http://www.qtforum.org/article/15135/same-ui-for-linux-and-windows-result.html)说无论你是否想要，设计师都会添加字体信息。所以 Qt 会尊重这个信息而不是系统默认字体。至少有人提到手动删除此信息应该使 Qt 在运行时选择系统默认字体。

3.  在我的开发机器中 QApplication::font() 返回错误的默认字体。但是我稍后在代码中添加的 QTableView 怎么会使用 RIGHT 字体？它是从哪里得到这些信息的？

因此，如果我找到 QTableView 找到此信息的位置，我可以在 main 中获取它，并使用 QApplication::setFont() 将其设置为应用程序范围。然后剩下的就是手动删除所有字体信息，然后希望它会起作用。但这就像我们首先使用 Qt 的原因，不是吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-29T13:51:58.253

我可以想到两种可能的解决方案：

1.  您可以在您的应用程序中打包一个字体作为资源文件，这样所有平台都将使用该字体，而不管当前系统的默认字体。

2.  QFont 类有一个名为[`defaultFamily()`](http://qt-project.org/doc/qt-4.8/qfont.html#defaultFamily). 使用它，您可以手动设置整个[`QApplication`](http://doc.qt.nokia.com/4.7-snapshot/qapplication.html#setFont).

一个例子（主要方法）：

```
QApplication application(argc, argv);
QFont font;
font.setFamily(font.defaultFamily());
application.setFont(font);
...rest of your code... 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-11-02T13:04:16.703

Qt 会调用 Windows API`SystemParametersInfo`来获取等的字体`QMenu`，`QMessageBox`并使用`GetStockObject`来获取默认的系统字体。一些小部件具有与系统默认字体不同的特殊字体。我认为 Qt 的做法是正确的，但默认的日文/中文衬线字体在 HiDPI 显示器上看起来很糟糕。

只需使用`QFont QApplication::font ( const char * className )`即可获得正确的字体（在您的情况下为 Meryo），例如`qApp->setFont(QApplication::font("QMenu"))`

# facebook - 设计 + Facebook + Omniauth 回调卡住

> ID：11011240
> 
> 赞同：7
> 
> 时间：2012-06-13T08:46:28.090
> 
> 标签：facebook, ruby-on-rails-3, devise, omniauth

我正在使用 Devise + Rails 3。这些是我正在使用的宝石：

```
gem 'devise' (1.3.4)
gem 'mm-devise' (1.2)
gem 'omniauth-facebook' (1.3.0)
gem 'omniauth' (1.1.0)
gem 'oauth2' (0.6.1)
gem 'oa-core' (0.3.2) 
```

我按照设计/omniauth wiki 上的[设置教程进行操作。](https://github.com/plataformatec/devise/wiki/OmniAuth:-Overview)

```
My routes:

devise_for :users
resources :events
resources :posts
resources :users
root :to => "home#index"

devise_scope :user do
  get "sign_in", :to => "devise/sessions#new"
end

devise_for :users, :controllers => { :omniauth_callbacks => "users/omniauth_callbacks" } 
```

Facebook 将我重定向到：

```
http://localhost:3000/users/auth/facebook/callback. 
```

我看到请求在浏览器上停留在挂起模式。服务器日志显示：

```
(facebook) Callback phase initiated. 
```

但永远不会通过这个阶段。我按照教程中的建议设置了回调：

```
class Users::OmniauthCallbacksController < Devise::OmniauthCallbacksController

  def facebook
    ...
  end

  def passthru
    ...
  end
end 
```

我错过了什么？

任何帮助将不胜感激。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-02T23:23:16.700

您是否尝试过检查是否有故障

```
class Users::OmniauthCallbacksController < Devise::OmniauthCallbacksController

  def failure
    debugger
    ...
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T02:00:15.503

在端口 3000 上使用 JS SDK 时，这似乎是一个问题。
尝试在标准端口上运行本地服务器。

```
sudo rails s -p 80* or *rvmsudo rails s -p 80 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T20:44:32.423

你的防火墙设置如何？当端口 32768 到 61000 未打开时，我遇到了这个确切的问题。在 Superuser.com 的聪明人告诉我发生了什么事之后，很长一段时间都遭受了这种痛苦。[https://superuser.com/questions/479503/why-are-ports-30000-to-60000-needed-when-browsing-the-net](https://superuser.com/questions/479503/why-are-ports-30000-to-60000-needed-when-browsing-the-net)

# google-maps-api-3 - Google API 地图加载计数定义

> ID：11011241
> 
> 赞同：2
> 
> 时间：2012-06-13T08:46:35.383
> 
> 标签：google-maps-api-3

我想尽可能多地保存可能计费**的地图加载**。

我调用地图的方式是：在 IFRAME 中，我这样做：

```
map = new google.maps.Map(...) 
```

然后

```
geocoder.geocode(...)
map.setCenter(..) 
```

我担心的是：如果主页（外部）中的用户将输入新的地址来寻找，我只会进行地理编码然后显示，没有新的地图实例。

==>**所有**这些都算作**一次**地图加载还是每次用户搜索都算作一次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:01:34.170

它将计为 1 个地图加载。地理编码有一个单独的限制，每个用户/天 2500。

# sql - Oracle：除非字段为空，否则应用转换的 SELECT

> ID：11011242
> 
> 赞同：0
> 
> 时间：2012-06-13T08:46:36.203
> 
> 标签：sql, oracle, spatial

我有以下语句，我试图针对 Oracle 表运行，以便将一组结果返回导出：

```
SELECT 
   a.CLUSTER_ID, 
   SDO_CS.transform(a.CELL_GEOM, 4326).GET_WKT()  CELL_GEOM, 
   SDO_CS.transform(a.CELL_CENTROID, 4326).GET_WKT()  CELL_CENTROID, 
   SDO_CS.transform(a.CLUSTER_CENTROID, 4326).GET_WKT()  CLUSTER_CENTROID, 
   a.NUM_POINTS, 
   a.FEATURE_PK, 
   SDO_CS.transform(a.CLUSTER_EXTENT, 4326).GET_WKT()  CLUSTER_EXTENT
FROM HIGHWAYS.CLUSTER_128000M a 
```

当我对我的数据集运行它时，我收到以下错误：

```
ORA-06531: Reference to uninitialized collection
ORA-06512: at "MDSYS.SDO_CS", line 2553
ORA-06512: at "MDSYS.SDO_CS", line 2678 
```

这是因为（我相信）数据库中的某些字段可能为空。如果该字段为空，我如何修改代码以考虑到这一点并且不尝试应用转换？代码运行后，我将导出到 SQL Server，由于 SQL Server 在转换时无用，我在复制数据之前在 Oracle 中应用它们，因为它存储在 Oracle 中的 WGS84 (27700) 中，我需要它在 4326 时稍后从 SQL Server 中检索它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:09:25.100

尝试：

```
SELECT a.CLUSTER_ID,
       CASE
           WHEN a.CELL_GEOM IS NOT NULL THEN SDO_CS.transform(a.CELL_GEOM, 4326).GET_WKT()
           ELSE a.CELL_GEOM.GET_WKT()
       END CELL_GEOM,
       CASE
           WHEN a.CELL_CENTROID IS NOT NULL THEN SDO_CS.transform(a.CELL_CENTROID, 4326).GET_WKT()
           ELSE a.CELL_CENTROID.GET_WKT()
       END CELL_CENTROID,
       CASE
           WHEN a.CLUSTER_CENTROID IS NOT NULL THEN SDO_CS.transform(a.CLUSTER_CENTROID, 4326).GET_WKT()
           ELSE a.CLUSTER_CENTROID.GET_WKT()
       END CLUSTER_CENTROID,
       a.NUM_POINTS,
       a.FEATURE_PK,
       CASE
           WHEN a.CLUSTER_EXTENT IS NOT NULL THEN SDO_CS.transform(a.CLUSTER_EXTENT, 4326).GET_WKT()
           ELSE a.CLUSTER_EXTENT.GET_WKT()
       END CLUSTER_EXTENT
FROM HIGHWAYS.CLUSTER_128000M a 
```

# windows - Qt - 在 Windows 上为 Linux 交叉编译

> ID：11011251
> 
> 赞同：1
> 
> 时间：2012-06-13T08:47:15.343
> 
> 标签：windows, linux, qt, cross-compiling

我找不到任何关于如何在 Windows 平台上为 linux 交叉编译 Qt 应用程序的说明。所以有人可以给我或链接我到如何做到这一点的分步说明。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:48:14.737

在你的 Linux 机器上安装 distcc。选择一个 distcc 编译器作为 Qt 将在 Qt Creator 的项目窗格中使用的编译器。将 distcc 的 hosts 文件设置为指向您的 Windows 机器并指定要发送给它的作业数量。

在 Windows 机器上，您有两个选择 - 获取 VirtualBox，并在其上安装相同的 Linux 操作系统，或者使用 Cygwin。使用这些选项中的任何一个，您都可以安装 distcc 并让它监听来自您的 Linux 机器的传入任务。

# http - 基于用户生成内容设计 URI 的最佳方式

> ID：11011252
> 
> 赞同：3
> 
> 时间：2012-06-13T08:47:15.563
> 
> 标签：http, architecture, uri

在我们的系统中，我们有页面的 URL，其中内容（包括标题）基于用户生成的内容。我试图找出平衡 SEO、人类可读性和弹性的最佳设计。

我一直在阅读有关这方面的大量材料，包括 Tim Berners-Lee 早前的文档：[Cool URIs don't change](http://www.w3.org/Provider/Style/URI.html)。

例如，假设我有一个书评网站，用户在其中提交内容（文字评论）以及书名和作者。

因此，如果他们`A Tale of Two Cities`使用`Charles Dickens`. URL 可以是：

[http://foo.com/charles-dickens/a-tale-of-two-cities](http://foo.com/charles-dickens/a-tale-of-two-cities)

稍后，如果添加狄更斯的另一本书，它可能是：

[http://foo.com/charles-dickens/oliver-twist](http://foo.com/charles-dickens/oliver-twist)

然后`http://foo.com/charles-dickens/`可以是网站上所有评论书籍的列表。

但是，如果更改书名，问题就会出现。想象一下用户拼错了一些东西，比如`A Tale of Two City`，然后它被更正了。这也将更改 URL，并会破坏该页面的任何外部链接、pagerank 等。

处理此类问题的推荐方法是什么？我看到的选项：

1.  **第一次提交获胜：**在最初建立 URL 后，不能更改它

2.  **最后一次提交获胜：**始终更改 URL。因此，如果用户生成的内容发生更改，请修改 URL。使用这种方法，要么旧 URL 失效，要么保留所有 URL 更改的踪迹，并且所有这些更改仍然有效。Stackoverflow 似乎是这样的。

3.  **不要基于 UGC 的 URL：**忽略用户生成的内容，只是想出不基于它的 URL。所以 url 可能是`http://foo.com/reviews/1234`.

人们对此有何看法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T20:45:26.797

你有点不对；Stack Overflow 结合了 #2 和 #3。一个问题有一个特定的 ID，这就是您找到问题所需的全部内容。例如，这个问题的 id 是`11011252`。您可以使用 访问问题[`https://stackoverflow.com/questions/11011252`](https://stackoverflow.com/questions/11011252)，无需添加从问题标题生成的 URL 部分（或者在这种情况下您是否将其称为 URI？）。事实上，当您使用无标题地址时，它会自动添加（无论是通过重定向还是其他方法）。

更好的是，您可以将任何您想要的内容（我想在合理范围内）附加到地址的末尾。[`https://stackoverflow.com/questions/11011252/this-text-will-be-ignored`](https://stackoverflow.com/questions/11011252/this-text-will-be-ignored)将毫无问题地带您解决问题。

Stack Overflow 也不是唯一这样做的网站。我见过的许多其他专注于用户生成内容的网站都遵循相同的协议/无论你怎么称呼它。这似乎是最好的方法，因为它结合了 #3 的优点（基础 URI 保持不变）和 #2 的优点（URL 包含有关其目标的一些信息，用户会喜欢），并且最好all 意味着如果两个人生成具有相同非唯一标识符的内容，您将不会遇到任何 URI 冲突。

# android - 使用fromHtml方法的android textview中的图像不显示

> ID：11011254
> 
> 赞同：2
> 
> 时间：2012-06-13T08:47:27.723
> 
> 标签：android, html, image

我正在尝试使用 Html.fromHtml 方法在我的帮助文件中显示图像。

这是我的java代码

```
 TextView tv = (TextView)findViewById(R.id.text);
        tv.setText(Html.fromHtml(getString(R.string.help), new Html.ImageGetter() {
            @Override
             public Drawable getDrawable(String source) {
                    int id;

                    if (source.equals("top_scrollers.png")) {
                        id = R.drawable.top_scrollers;
                    }
                    else if (source.equals("prices.png")) {
                        id = R.drawable.prices;
                    }
                    else if (source.equals("percentage.png")) {
                        id = R.drawable.percentage;
                    }
                    else if (source.equals("mplus.png")) {
                        id = R.drawable.mplus;
                    }
                    else {
                        return null;
                    }

                    Drawable d = getResources().getDrawable(id);
                    d.setBounds(0,0,d.getIntrinsicWidth(),d.getIntrinsicHeight());
                    return d;
                }
        }, null)); 
```

这是我的xml

```
<string name="help">
<![CDATA[
<h1>Help</h1>
<p>
<h3>Getting stone price</h3>
<img src="top_scrollers.png"/>
</p>
]]>
</string> 
```

如您所见，我将图像放置在 cdata 文本中，并且我创建了一种从它们创建可绘制对象的方法，但它只是不可显示。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T09:29:51.993

您可以使用 WebView 而不是 TextView 。试试这个解决方案：

1) 将您的 top_scrollers.png 放在**assets**文件夹中

**2) 在包含内容的原始**文件夹中创建 your_html.html ：

```
<h1>Help</h1>
<p>
<h3>Getting stone price</h3>
<img src="file:///android_asset/top_scrollers.png"/>
</p> 
```

3）要将此原始文件作为字符串读取，您可以阅读此 [Android 读取文本原始资源文件](https://stackoverflow.com/questions/4087674/android-read-text-raw-resource-file)

4) 之后，您可以在 webView 中加载此文本：

```
webView.loadDataWithBaseURL("", your_raw_string, "text/html", "utf-8", ""); 
```

# c - 哪个代码消耗更少的能量？

> ID：11011260
> 
> 赞同：-6
> 
> 时间：2012-06-13T08:47:46.013
> 
> 标签：c, memory, cpu, energy

我的目标是针对某些特殊情况开发和实施绿色算法。我为此开发了两种算法。

一是没有大号。内存访问（加载和存储）。该模式有时是合并的，有时是非合并的。我假设最坏的情况是大多数访问都会导致缓存失败。请参阅示例代码片段 a)。

另一个是大号。的计算，大致相当于下面的代码片段 b)。

我如何估计每种情况下的功耗。哪一个更节能，为什么？

**平台：**我将在 Intel I3 处理器、Windows 7、4 GB DRAM、3 MB 缓存上运行这些代码。

**注意：我不想使用任何外部功率计。如果您发现代码没有做任何建设性的工作，也请忽略。这是因为它只是完整算法的一小部分。**

**更新：**

这很困难，但并非不可能。人们可以很好地计算出读取 DRAM 和 CPU 的 ALU 进行乘法的成本。唯一的问题是必须具备 DRAMS 和 CPU 的电子知识，**而我目前还缺乏这些**知识。至少在最坏的情况下，我认为这可以很好地成立。最坏的情况意味着没有合并访问，没有编译器优化。

如果您可以估计访问 DRAM 和进行浮点乘法的成本，那么为什么无法估计电流，因此对这些操作期间的功率有一个粗略的了解？另请参阅我的帖子，我不是在问有*多少*功耗，而是在问哪个代码消耗更少/更多的功率，或者哪个代码更节能？

```
a) for(i=0; i<1000000; i++)

  {

  a[i]= b[i]; //a, b floats in RAM.  

  {

 b) for(i=1; i<1000000; i++)

  {

   float j= j * i;  //j has some value. which is used later in the program , not  
                    // shown here    

  { 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:08:22.497

就像评论者指出的那样，尝试使用功率计。在现代超标量架构上，即使不是不可能的话，即使从原始汇编代码估计功耗也是很困难的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T09:17:04.920

要测量实际功耗，您应该使用在电源中添加[电表](http://en.wikipedia.org/wiki/Electricity_meter)（如果使用笔记本电脑，请取出电池）。

请注意，您将测量整个系统的功耗，因此请确保避免干扰参数（任何其他系统活动，即防病毒更新、图形桌面环境、索引服务、（内部）硬件设备），重复执行测量，运行和不运行您的算法以消除“背景”消耗。如果可能，请使用嵌入式系统。

* * *

关于您的算法，实际的能效不仅取决于 C 代码，还取决于编译器的性能以及与周围系统交互的运行时行为。但是，这里有一些资源，作为开发人员，您可以做些什么来帮助解决这个问题：

*   [节能软件清单](http://software.intel.com/en-us/articles/energy-efficient-software-checklist/)
*   [节能软件指南](http://software.intel.com/partner/assets/pdf/misc/Energy_Efficient_Software_Guidelines_v3_4_10_11.pdf)

尤其是查看上面“清单”中的**工具**段落，因为它列出了一些可以帮助您进行粗略估计的工具（基于应用程序分析）。它列出（除其他外）：

*   性能监视器
*   PwrTest/Windows 驱动工具包
*   Windows 事件查看器（计时器刻度更改事件、Microsoft-Windows-Kernel-PowerDiagnostic 日志）
*   英特尔 PowerInformer
*   Windows ETW（性能监控框架）
*   英特尔应用能源工具包

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T09:12:33.600

只要只涉及 CPU 和内存，您就可以假设功耗与运行时间成正比。

这可能不是 100% 准确，但在没有实际测量的情况下尽可能接近。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T09:16:20.573

您可以尝试使用一些 CPU 监控工具来查看哪种算法会使您的 CPU 发热更多。它不会为您提供可靠的数据，但会显示这两种算法在功耗方面是否存在显着差异。

在这里，我假设主要的电力消耗者是 CPU，算法不需要大量的 I/O。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-16T06:57:19.827

好吧，我已经完成了与电子专业的初步研究和讨论。

通过考虑两个因素可以得到一个粗略的想法：

1- 涉及的电流：更多的电流，更多的功耗。

2- 由于时钟速率引起的功耗。功耗随频率的平方而变化。

在 Snippet a) 中，DRAM 和存储器几乎不消耗太多电流，因此每个过程中的功耗都非常小

```
 a[i]= b[i]; 
```

手术。上面的操作就是数据的读写。

此外，与 CPU 相比，内存的时钟通常非常小。虽然 CPU 的时钟频率为 3 GHz，但内存的时钟频率约为 133MHz 左右。（并非所有组件都以额定时钟运行）。因此，由于时钟较低，功耗较低。

在片段 b) 中，可以看出我正在做更多的计算。这将涉及更多的功耗，因为时钟频率要高几个数量级。

另一个因素是乘法本身将包含几个更高的阶数。与数据读写相比的周期数（假设内存已合并）。

此外，如果有一个选项来测量或大致了解某些代码的功耗（“代码能量”），如下所示（颜色代表您的代码的能源效率，红色非常差，绿色高能效）：

![在此处输入图像描述](../Images/b9f58271fb46d94a27f7c774c76da9f3.png)

简而言之，考虑到当今的技术，软件估计这样的功率并不是很困难（除了我上面描述的方法之外，还可能采用许多其他参数）。这将有助于更快地开发和评估绿色算法。

# node.js - Arduino POST 无法完成

> ID：11011261
> 
> 赞同：2
> 
> 时间：2012-06-13T08:47:53.363
> 
> 标签：node.js, arduino

我正在使用 Ethernet [shield](http://www.arduino.cc/en/Main/ArduinoShields)的 Arduino 设备上发出发布请求。该服务器是一个[Node.js](http://en.wikipedia.org/wiki/Node.js)服务器，我在服务器端处理了 post 请求，结果与福尔马林和强大的结果相同。POST 已处理，但未完成文件传输。

> 加载开始：{“时间”：1339574854222}“字节接收”：178，“文件完成”：0

这是发送帖子的代码：

```
String boundary = "--73249889599006000";
String URL = "/upload";
String contentType = "text/plain";
String fileName = "text.txt";

void sendData(){
    String thisFile = "This is not the contents of thisFile";
    Serial.println("connecting...");
    // If you get a connection, report back via serial:
    if (client.connect(server, 80)) {
        Serial.println("connected");

        // Make a HTTP request:
        String postHeader = "POST " + URL + " HTTP/1.1\n";
        postHeader += "Content-Type: multipart/form-data; boundary=";
        postHeader += boundary + "\n";
        postHeader += "Host: 192.168.3.78\n";
        postHeader += "User-Agent: Arduino\n";
        postHeader += "Referer: http://192.168.3.78/upload\n";

        String requestHead = "\n--" + boundary + "\n";
        requestHead += "Content-Disposition: form-data; name=\"upload\"; filename=\"" + fileName + "\"\n";
        requestHead += "Content-Type: " + contentType + "\n\n";

        String tail = "\n--" + boundary + "--\n\n";

        int contentLength = requestHead.length() + thisFile.length() + tail.length();

        postHeader += "Content-Length: " + String(contentLength, DEC) + "\n\n";

        char charBuf0[postHeader.length() + 1];
        postHeader.toCharArray(charBuf0, postHeader.length() + 1);
        client.write(charBuf0);

        char charBuf1[requestHead.length() + 1];
        postHeader.toCharArray(charBuf1, requestHead.length() + 1);
        client.write(charBuf1);

        char charBuf2[thisFile.length() + 1];
        postHeader.toCharArray(charBuf2, thisFile.length() + 1);
        client.write(charBuf2);

        char charBuf3[tail.length() + 1];
        postHeader.toCharArray(charBuf3, tail.length() + 1);
        client.write(charBuf3);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T13:21:27.453

行尾和其他一些调整对其进行了排序。这是适用于福尔马林的更新代码。

```
String boundary = "--73249889599006000";
String URL = "/upload";
String contentType = "text/plain";
String fileName = "text.txt";

void sendData(){
  String thisFile = "This is not the contents of thisFile\r\n\r\n";

  Serial.println("connecting...");
  // if you get a connection, report back via serial:
  if (client.connect(server, 80)) {
    Serial.println("connected");

    // Make a HTTP request:
    String postHeader = "POST " + url + " HTTP/1.1\r\n";
    postHeader += "Content-Type: multipart/form-data; boundary=";
    postHeader += boundary + "\r\n";
    postHeader += "Host: 192.168.3.18\r\n";
    postHeader += "User-Agent: Arduino\r\n";
    postHeader += "Referer: http://192.168.3.18/upload\r\n";

    String requestHead = "--" + boundary + "\r\n";
    requestHead += "Content-Disposition: form-data; name=\"upload\"; filename=\"" + fileName + "\"\r\n";
    requestHead += "Content-Type: " + contentType + "\r\n\r\n";

    String tail = "--" + boundary + "--\r\n\r\n";

    int contentLength = requestHead.length() + thisFile.length() + tail.length();

    postHeader += "Content-Length: " + String(contentLength, DEC) + "\n\n";
    Serial.print("Content-Length: ");
    Serial.println(String(contentLength, DEC));

    char charBuf0[postHeader.length() + 1];
    postHeader.toCharArray(charBuf0, postHeader.length() + 1);
    client.write(charBuf0);
    Serial.print(charBuf0);

    char charBuf1[requestHead.length() + 1];
    requestHead.toCharArray(charBuf1, requestHead.length() + 1);
    client.write(charBuf1);

    char charBuf2[thisFile.length() + 1];
    thisFile.toCharArray(charBuf2, thisFile.length() + 1);
    client.write(charBuf2);
    Serial.print(charBuf2);

    char charBuf3[tail.length() + 1];
    tail.toCharArray(charBuf3, tail.length() + 1);
    client.write(charBuf3);
    Serial.print(charBuf3);
  } 
  else {
    // kf you didn't get a connection to the server:
    Serial.println("connection failed");
  }
} 
```

# java - 如何将 GridBagLayout 内容导出到 csv 文件（甚至 Excel）？

> ID：11011263
> 
> 赞同：0
> 
> 时间：2012-06-13T08:48:02.013
> 
> 标签：java, csv, gridbaglayout

我使用 Java 和 Swing 创建了 GUI。我使用了充满 JLabel 实例的 GridBagLayout。

我在 gridbaglayout 中只有文本（JLabels），没有其他 GUI 组件，如 JButton、JTextField 等。

是否有任何现有的解决方案如何将 GridBagLayout 中的内容导出到 CSV 文件中？或者，如果我想预先保存组件的对齐方式和字体，是否有任何 Java Excel API 可以从 GridBagLayout 开箱即用地做到这一点？

感谢帮助

# mysql - 在 AWS 上；乌班图；无法使用 crontab 重新启动 mysql

> ID：11011270
> 
> 赞同：1
> 
> 时间：2012-06-13T08:48:19.383
> 
> 标签：mysql, ubuntu, cron, amazon-web-services

在带有 Ubuntu 的 AWS 上；无法使用 crontab 重新启动 mysql：我在脚本中尝试了以下命令：

```
service mysql  start
 /etc/init.d/mysql restart 
```

我得到的错误是：

```
exec: 129: start: not found
/etc/init.d/mysql: 85: start: not found
exec: 129: restart: not found 
```

如果我从提示符运行，所有这些都可以正常工作；但从 crontab 失败

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:48:53.810

路径是问题所在。在命令提示符下，我得到了 $PATH; 然后在 crontab 脚本中；我像这样手动添加了这个路径。现在可以了。

```
PATH=$PATH:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin 
```

# winforms - 在 TreeView 中设置编辑框的位置

> ID：11011271
> 
> 赞同：1
> 
> 时间：2012-06-13T08:48:20.470
> 
> 标签：winforms, treeview, ownerdrawn

在 WinForms 中，我想知道是否可以在 TreeView 中以编程方式设置编辑框的位置，如果可以，如何设置？

让我提供更多细节。我们有一个所有者绘制的 TreeView (System.Windows.Forms.TreeView)，其 DrawMode 设置为 OwnerDrawAll。我们首先绘制一个图标，然后是层次结构，然后是与项目相关的图标，然后是文本。

```
[O] +- # Root 1
    |  |
[X] |  +- # Node 1
    |  |  |
[X] |  |  +- # SubNode 1
    |  |  |
[O] |  |  +- # SubNode 2
    |  |
[O] |  +- # Node 2
    |
[X] +- # Root 2
       |
[X]    +- # Node 3 
```

在上图中，`[X]`和`[O]`是第一个图标的`#`表示，符号是项目相关图标的表示。

问题是，当使用常规 TreeView 方式编辑文本时，通过将 LabelEdit 设置为 true，编辑框与图标重叠（图表上的 # 符号）而不是在图标旁边，因为我们改变了文本渲染。另一个问题是单击以使编辑框出现的位置（矩形）也发生了变化。

我尝试将 Indent 属性设置为更高的值，然后将我的层次结构、与项目相关的图标和文本渲染移回左侧以保持其正确对齐，但在这种情况下，每个节点的缩进加倍：

它在数学上导致`[spacing = level * indent * 2]`

我需要的地方`[spacing = indent + (level * indent)]`

我只是无法为每个节点单独设置 Indent 属性，因此此解决方案无效。

我试图在 OnBeforeLabelEdit 事件中成功获取编辑框句柄，但后来我发现我无法用它做任何有用的事情。

我们正在考虑使用自定义 TextBox 并将其放置在 TreeView 上，但首选已实现的常规方式。

提前致谢。

# html - 为什么我不能滚动这个列表（在 Firefox 上）？似乎它会拖我的元素

> ID：11011273
> 
> 赞同：0
> 
> 时间：2012-06-13T08:48:24.757
> 
> 标签：html, css

这是我的[代码](http://jsfiddle.net/YTKtf/)：

# HTML

```
<div class="box-booking-item">
    <a href="javascript:void(0);" class="box-booking-item-content">
        <span class="box-booking-tendina">
            <span id="tendina_128" class="box-booking-tendina-elemento">Field 1</span>
            <span id="tendina_147" class="box-booking-tendina-elemento">Field 2</span>
            <span id="tendina_149" class="box-booking-tendina-elemento">Field 3</span>
            <span id="tendina_151" class="box-booking-tendina-elemento">Field 4</span>
            <span id="tendina_152" class="box-booking-tendina-elemento">Field 5</span>
        </span>
    </a>
</div> 
```

# CSS

```
.box-booking-item
{
    position:relative;
    width:100px;
}

.box-booking-item-content
{
    width:100%;
    cursor:pointer;  
}
.box-booking-tendina
{
    display:block;
    overflow-y: scroll;
    height:80px;
}

.box-booking-tendina-elemento
{
    height:22px;
    display:block;
} 
```

尝试在 Firefox 上（我有 12.0，但尝试使用 10.0 和 11.0，它是相同的），单击滚动条，然后滚动到向下/向上（按该条，而不是使用向上和向下箭头）。就像它“拖动”整个容器 div。

为什么会有这种行为？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T08:52:33.383

只需 `href="javascript:void(0);"`从您的代码中删除

**更新**：执行上一个方法或仅附加`onmousedown="return false;"`到`a`标签

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T08:54:34.170

您需要`href="javascript:void(0);"`从代码中删除。也许您应该用 div 替换锚点？

**对于下面的评论。**

要停止选择文本，您可以使用 CSS。

在您希望停止选择的项目上包含此代码。

```
-webkit-touch-callout: none;
-webkit-user-select: none;
-khtml-user-select: none;
-moz-user-select: none;
-ms-user-select: none;
user-select: none; 
```

# ruby-on-rails - 带有指南针的导轨中的变量不起作用

> ID：11011274
> 
> 赞同：0
> 
> 时间：2012-06-13T08:48:28.827
> 
> 标签：ruby-on-rails, variables, asset-pipeline, compass-sass, sass

我正在使用 Rails Pipeline 和“Compass”GEM。

我想设计我的链接并尝试这样做：

```
// File /assets/stylesheets/application.css.scss

$grey: "#97A5A3";

a {
    text-decoration: none;
    color: white;

    &:hover {
        color:$grey;
        text-decoration: underline;
    }
    &:visited {
        color: $grey;
    }
    &:active {
        color: $grey;
    }
    &:visited {
        color: $grey;
    }
} 
```

但它不会工作...

当我将变量转换为十六进制代码（“#123456”）或白色（“白色”）时，它可以工作。他们停留在“标准”的蓝色、紫罗兰色模式中。

如果不是这样，我应该如何使用变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T09:38:04.463

您需要删除`"`from `"#97A5A3"`。

```
$grey: #97A5A3; 
```

在这个[站点上](http://sass-lang.com/try.html)，您可以检查您的 Sass 代码生成的 CSS，这有助于发现任何错误。

我希望它能解决你的问题......

# c# - 带有序言和结语的设计模式

> ID：11011275
> 
> 赞同：2
> 
> 时间：2012-06-13T08:48:36.607
> 
> 标签：c#, design-patterns

我正在寻找可以实现一些序言代码然后是结语代码的设计模式。让我解释：

我有一个功能（很多）几乎做同样的事情：

这是 presudo 代码，但实际上它是用 C# 4.5 编写的

```
public IDatabaseError GetUserByName(string Name)
{
  try
  {
      //Initialize session to database
  }
  catch (Exception)
  {
     // return error with description for this step
  }

  try
  {
       // Try to create 'transaction' object
  }
  catch(Exception)
  {
     // return error with description about this step
  }

  try
  {       
      // Execute call to database with session and transaction object
      //
      // Actually in all function only this section of the code is different
      //
  }
  catch(Exception)
  {
      // Transaction object rollback
      // Return error with description for this step
  }
  finally
  {
      // Close session to database
  }

   return everything-is-ok  
} 
```

所以 - 正如你所看到的'prolog'（创建会话、事务、其他辅助函数）和'epilog'（关闭会话、回滚事务、清理内存等）对于**所有**函数都是相同的。

一些限制：

*   我想**在**函数中而不是在 ctor中保留会话和事务对象的创建/销毁过程

*   自定义代码（在中间运行）必须包含在 try/catch 中，并针对不同的情况返回不同的错误

*   我愿意接受任何 Func<>、Action<> 更可取的 Task<> 功能建议

    关于设计模式或代码重构的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T08:57:01.303

这可以通过使用 IDisposable 对象来实现，例如：

```
using(var uow = new UnitOfWork() )
using(var t = new TransactionScope() )
{
   //query the database and throws exceptions
   // in case of errors
} 
```

请注意，[TransactionScope](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.aspx)类是 System.Transaction 中的一个开箱即用的类，它（不仅）适用于数据库连接。在 UnitOfWork`constructor`中执行“Prologue”代码（即打开连接...），在`Dispose`结尾部分执行。通过在发生错误时抛出异常，您可以确定结尾部分无论如何都会被调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T09:29:05.130

听起来您正在寻找[Template Method Pattern](http://en.wikipedia.org/wiki/Template_method_pattern)。

模板方法模式将允许您通过仅提取方法中不同的部分来减少类似方法中重复代码的数量。

对于这个特定的示例，您可以编写一个方法来完成所有繁重的工作，然后调用回调来完成有趣的工作......

```
// THIS PART ONLY WRITTEN ONCE
public class Database
{
    // This is the template method - it only needs to be written once, so the prolog and epilog only exist in this method...
    public static IDatabaseError ExecuteQuery(Action<ISession> queryCallback)
    {

        try
        {
            //Initialize session to database
        }
        catch (Exception)
        {
            // return error with description for this step
        }

        try
        {
            // Try to create 'transaction' object
        }
        catch(Exception)
        {
            // return error with description about this step
        }

        try
        {       
            // Execute call to database with session and transaction object
            //
            // Actually in all function only this section of the code is different
            //
            var session = the session which was set up at the start of this method...

            queryCallback(session);
        }
        catch(Exception)
        {
            // Transaction object rollback
            // Return error with description for this step
        }
        finally
        {
            // Close session to database
        }

        return everything-is-ok
    }
} 
```

这是用法：

```
// THIS PART WRITTEN MANY TIMES
IDatabaseError error = Database.ExecuteQuery(session =>
{
    // do your unique thing with the database here - no need to write the prolog / epilog...

    // you can use the session variable - it was set up by the template method...

    // you can throw an exception, it will be converted to IDatabaseError by the template method...
});

if (error != null)
    // something bad happened! 
```

我希望我这次解释得更好:)

# google-visualization - 谷歌图表的不同线条设置

> ID：11011276
> 
> 赞同：0
> 
> 时间：2012-06-13T08:48:43.807
> 
> 标签：google-visualization

我必须绘制具有不同线条设置（重量、点数等）的图表。例如，第一行必须是 3px 粗细和 5px 点大小，但第二行 - 没有点。我没有找到以这种方式配置图表的选项。有一个复合图表，但它是一个已弃用的 API。我还认为我可以使用不同的数据和选项多次调用 draw() 方法，但它会清除以前的绘图。所以我的问题 - 我如何在不重写以前的绘图的情况下多次调用 draw 或者如何配置图表以对不同的行使用自定义格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:18:55.247

您是否检查了“系列”选项中的设置？文档：[https ://google-developers.appspot.com/chart/interactive/docs/gallery/linechart](https://google-developers.appspot.com/chart/interactive/docs/gallery/linechart)

# android - Android，在自身内部调用 Activity

> ID：11011277
> 
> 赞同：5
> 
> 时间：2012-06-13T08:48:50.587
> 
> 标签：android, android-intent

我正在尝试制作一个具有 2 个主要控件（以及其他信息字段）的应用程序 1.> 下一步按钮 2.> 完成按钮

我想在按下下一个按钮时调用相同的活动，并在按下完成按钮时显示一些其他活动

完成按钮工作正常。但是当我按下下一步按钮时，应用程序停止工作。我得到的错误是：不幸的是，myapp 已停止工作

这与我在清单文件中未定义活动时通常遇到的错误相同。谁能帮我解决这个问题。

最后，在其内部调用相同的活动是合法的吗？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-13T09:12:24.763

我认为这应该有效

```
Intent i= new Intent(ActivityA.this,ActivityA.class); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-13T09:13:18.497

您可以使用`Intent flags`再次调用活动。在`button`点击

```
setContentView(R.layout.main);
Intent intent= new Intent(this,SameClass.class); 
startActivity(intent.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-31T09:00:43.150

**试试这个**

```
Intent intent= getIntent();
            finish();
            startActivity(intent); 
```

谢谢

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T08:55:35.157

为什么需要在自身内部调用 Activity？

您可以执行以下操作：

**1.**您可以在**下一步按钮点击****重置**数据。

 ****2.**您可以**隐藏视图或**在**下一步按钮单击**时使其可见。

清除您的**要求**并显示您的代码以检查**错误** `Unfortunately, myapp has stopped working`出现的原因。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T09:05:01.207

使用 TabGroup 活动

在下一个按钮 onclick 写入

```
public void next(View v) {      

    Intent next= new Intent(getParent(), next.class);
    TabGroupActivity parentActivity = (TabGroupActivity) getParent();
    parentActivity.startChildActivity("next", next);

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-20T14:53:32.853

```
Intent i= new Intent(ActivityA.this,ActivityA.class);
startActivity(i); 
```

或者

```
startActivity(new Intent(ActivityA.this,ActivityA.class)); 
```**

# visual-studio-2010 - VS2010 - 一个固定图标，所有打开的解决方案都将堆叠并显示最近的项目

> ID：11011279
> 
> 赞同：0
> 
> 时间：2012-06-13T08:48:57.830
> 
> 标签：visual-studio-2010, windows-7

我在开始菜单中固定了以下 exe：

```
"C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\devenv.exe" 
```

但是，它没有显示任何最近的项目，即使我有很多。

我把它固定在任务栏上，所有打开的解决方案都会在它上面叠加——这是期望的和预期的。但是，当我右键单击它时，它不会显示最近的项目。在某处我读到我需要别针

```
"C:\Program Files (x86)\Common Files\microsoft shared\MSEnv\VSLauncher.exe" 
```

为了有最近的项目，我做了并且确实显示了它们，但是，打开的解决方案仍然在另一个图标上（devenv.exe）所以，我怎样才能在打开的解决方案的任务栏中固定一个图标将堆叠到并在右键单击时显示最近的项目。

# ios - 如何在 iOS 应用程序中捕捉丢失的焦点事件？

> ID：11011280
> 
> 赞同：0
> 
> 时间：2012-06-13T08:49:01.343
> 
> 标签：ios, uiview, multi-touch, multitasking-gestures

我的应用程序接收并处理通过 UIWindow 对象接收的所有触摸事件。因此，对于每个触摸事件，我都会创建一个记录，并且随时可以检查屏幕上有多少手指......在我尝试使用系统手势（在任务之间切换，调用任务管理器）之前，一切都很好......在这个案例我收到了所有四个 touchesBegan 事件，但没有收到 tochesEnded。换句话说，如果它们成为系统手势，我的应用程序不会收到任何触摸事件。

问题是：我怎样才能捕捉到所有的触摸事件？

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T00:52:07.640

诀窍是正确处理 touchesCancelled:withEvent: 当应用程序失去对多任务手势的关注时触发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T08:54:51.633

我想我得到了答案：所以，我认为在应用程序退出其焦点后捕捉任何触摸事件是不可能或不正确的。所以，我只需要处理 applicationWillResignActive 和 applicationDidBecomeActive 事件来捕获和处理我的问题......换句话说，当我的应用程序失去焦点时，我必须删除我的所有触摸条目。

# php - post values having single quote lead to issue while using php curl

> ID：11011289
> 
> 赞同：0
> 
> 时间：2012-06-13T08:49:40.147
> 
> 标签：php, curl

I have to post values having single quote inside the string to a url using `curl`, single quote automatically stripped I think, how do I properly include single quote in strings while using `curl`,

```
$url = "test.com/req?a=10&b='1010','1012'";  
$ch = curl_init();  
curl_setopt($ch, CURLOPT_URL, $url);  
curl_setopt($ch, CURLOPT_HEADER, 0);  
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);  
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);  
$result = curl_exec($ch);  
curl_close($ch); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T08:51:11.940

Use urlencode.

```
$url = "test.com/req?a=10&b=" . urlencode("'1010','1012'"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T09:12:41.963

这样您就可以构建任何复杂的查询字符串：

```
$url   = 'test.com/req';
$query = array(
  'a' => 10,
  'b' => "'1010','1012'"
);

$url .= '?'. http_build_query($query);

// will produce this
// test.com/req?a=10&b=%271010%27%2C%271012%27 
```

# java - TreeSet internally uses TreeMap, so is it required to implement Hashcode method when using Treeset?

> ID：11011291
> 
> 赞同：11
> 
> 时间：2012-06-13T08:49:46.580
> 
> 标签：java, collections, hashcode, treemap, treeset

I would like to know what it means when *javadocs* for `TreeSet` says

> This class implements the Set interface, backed by a TreeMap instance?

In the below example, I haven't implemented the `Hashcode` method and still it is working as per expectation i.e it is able to sort the objects. Notice that I have purposely not implemented a consistent `Equals` implementation to check the `TreeSet` behaviour.

```
import java.util.TreeSet;

public class ComparisonLogic implements Comparable<ComparisonLogic>{

String field1;
String field2;

public String toString(){
    return field1+" "+field2;
}

ComparisonLogic(String field1,String field2){
    this.field1= field1;
    this.field2= field2;

}
public boolean equal(Object arg0){
    ComparisonLogic obj = (ComparisonLogic) arg0; 

    if(this.field1.equals(obj.field1))
        return true;
    else
        return false;
}

public int compareTo(ComparisonLogic arg0){
    ComparisonLogic obj = (ComparisonLogic) arg0;   
    return this.field2.compareToIgnoreCase(obj.field2);
}

/**
 * @param args
 */
public static void main(String[] args) {
    // TODO Auto-generated method stub

    ComparisonLogic x = new ComparisonLogic("Tom", "jon");
    ComparisonLogic y = new ComparisonLogic("Tom", "Ben");
    ComparisonLogic z = new ComparisonLogic("Tom", "Wik");

    TreeSet<ComparisonLogic> set = new TreeSet<ComparisonLogic>();
    set.add(x);
    set.add(y);
    set.add(z);
    System.out.println(set);
}

} 
```

This example prints `[Tom Ben, Tom jon, Tom Wik]`. So it is sorting based on the `compareTo` method and `hashcode()` method looks insignificant in this scenario. However, `Treeset` is backed by TreeMap, so internally if `TreeMap` is used for sorting, how is `TreeMap` hashing the object?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-01-22T18:22:59.413

我认为你提出了两个问题。

**1、为什么你的代码有效？**

正如[Avi在](https://stackoverflow.com/users/1605/avi)[此](https://stackoverflow.com/questions/1894377/understanding-the-workings-of-equals-and-hashcode-in-a-hashmap)主题中所写：

> 当您不覆盖 hashCode() 方法时，您的类会从 Object 继承默认的 hashCode() 方法，这会为每个对象提供不同的哈希码。这意味着 t1 和 t2 有两个不同的哈希码，即使你比较它们，它们也是相等的。根据特定的 hashmap 实现，map 可以**自由**地单独存储它们。

这意味着它不必单独存储它们，但它可能会。试试这个代码：

```
TreeSet<ComparisonLogic> set = new TreeSet<ComparisonLogic>();
    set.add(new ComparisonLogic("A", "A"));
    set.add(new ComparisonLogic("A", "B"));
    set.add(new ComparisonLogic("A", "C"));
    set.add(new ComparisonLogic("B", "A"));
    set.add(new ComparisonLogic("B", "B"));
    set.add(new ComparisonLogic("B", "C"));
    set.add(new ComparisonLogic("C", "A"));
    set.add(new ComparisonLogic("C", "B"));
    set.add(new ComparisonLogic("C", "C"));
    set.add(new ComparisonLogic("A", "A"));

    System.out.println(set.remove(new ComparisonLogic("A", "A")));
    System.out.println(set.remove(new ComparisonLogic("A", "B")));
    System.out.println(set.remove(new ComparisonLogic("A", "C")));
    System.out.println(set.remove(new ComparisonLogic("B", "A")));
    System.out.println(set.remove(new ComparisonLogic("B", "B")));
    System.out.println(set.remove(new ComparisonLogic("B", "C")));
    System.out.println(set.remove(new ComparisonLogic("C", "A")));
    System.out.println(set.remove(new ComparisonLogic("C", "B")));
    System.out.println(set.remove(new ComparisonLogic("C", "C"))); 
```

我的输出如下：

```
true
true
true
false
false
false
false
false
false 
```

这意味着他们中的一些人在那里，一些人没有。

**2、Treeset的javadocs说'这个类实现了Set接口，由TreeMap实例支持'是什么意思？**

这意味着 java 1.7 中的 TreeSet 类如下所示：

```
public class TreeSet<E> extends AbstractSet<E>
implements NavigableSet<E>, Cloneable, java.io.Serializable
{
/**
 * The backing map.
 */
private transient NavigableMap<E,Object> m;

 TreeSet(NavigableMap<E,Object> m) {
    this.m = m;
}

... (lots of other code)     

public boolean contains(Object o) {
    return m.containsKey(o);
}

etc. 
```

这意味着 TreeSet 类下面有一个映射，并且有很多方法只委托给它。

我希望我能帮上忙。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-02-20T13:33:24.817

确实，TreeSet 内部使用了 TreeMap。TreeMap 不需要为关键对象实现 hashCode 和 equals 方法。TreeMap 内部使用红黑树，它是一种自平衡二叉搜索树。通过使用 compareTo 方法（关键对象实现 Comparable 接口）或 compare 方法（假设比较器在构造 TreeMap 时定义，在这种情况下实际上是 TreeSet）来维护此树中的顺序。希望它清除。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-08T12:43:03.237

TreeSet 在内部使用 TreeMap 对象“m”将对象存储为键值对，这意味着调用

```
set.add(x); 
```

内部调用 TreeMap 的 put 方法：

```
public boolean add(E e) {
    return m.put(e, PRESENT)==null;
} 
```

现在 put 方法在内部调用比较，如果提供了比较器，或者在您的情况下使用比较逻辑类“compareTo”方法。

它从不显式使用等于或哈希码，而是使用 compareTo(Object o1)（在实现 Comparable 时提供）或 compare(Object o1, object o2)（在实现 Comparator 时提供）方法来确定集合中 Object 的存在。

因此，要回答您的问题，除非您在比较（compare 或 compareTo）方法实现中使用它，否则不需要实现 hashcode() 方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T08:57:11.893

您`ComparisonObject`正在使用上`hashCode`定义的方法`Object`。尝试添加多个不同`ComparisonLogic`的，两个字段的值相同，看看会发生什么。

# python - PyQT 读取文本文件

> ID：11011294
> 
> 赞同：4
> 
> 时间：2012-06-13T08:50:15.093
> 
> 标签：python, qt, pyqt

我一直在谷歌上搜索并没有找到解决方案，这令人难以置信！应该很简单。我试图让我的 PyQT UI 将文本文件打开到 QTextBrowser 或 QTextEdit 中。

但是 QTextEdit 不能 'setSource' 并且 QTextBrowser 不能显示除了 HTML 之外的任何内容，如果我打开文本文件它没有任何分段，它都是一行。该区域还将显示日志文件，我不希望我的日志文件以 html 格式输出！

我要做的就是以纯文本格式显示文本文件的内容。为什么这么傻这么难？？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-13T08:59:40.147

```
text_edit = QPlainTextEdit()
...
text=open('file.txt').read()
text_edit.setPlainText(text) 
```

对我来说似乎并不难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-28T14:32:55.393

你可以使用这个功能

```
 def openFileDialog(self):
    filename = QFileDialog.getOpenFileName(self,'Open File')

    if filename[0]:
        f = open(filename[0],'r')

        with f:
            data = f.read()
            self.textedit.setText(data) 
```

# php - 使用 3G 加密狗丢失会话变量

> ID：11011295
> 
> 赞同：1
> 
> 时间：2012-06-13T08:50:19.570
> 
> 标签：php, session-variables, 3g, suhosin, dongle

我对 session_vars 和移动 3g 连接有很大的问题。

我们有一个使用用户名和密码访问的虚拟校园。在每个页面上验证用户是否使用以下代码登录：

```
<?PHP session_start();

//Avoid not logged users
if ($_SESSION['auth']!=true)
{
    session_unset();
    header('Location:index.php'); // login page
    exit;
} 
```

当用户尝试下载文件并使用 3G 连接时，有时会丢失标识谁登录的会话变量，并将用户发送到登录页面。

我们已经尝试并未能重现该错误。我们假设这可能取决于 3G 连接的条件。

所有使用加密狗 3g 的用户都无法使用笔记本电脑。

下面是html下载链接代码：

```
<a onclick="window.location.href='download_file.php?id=48558&amp;id_aula=A1188788&amp;p=5'" title="download 21115400_cat.pdf" class="Arial11BlueBold ManoSola">Download</a> 
```

和download_file.php：

```
<?PHP session_start();

//Avoid not logged users
if ($_SESSION['auth']!=true)
{
    session_unset();
    header('Location:index.php');
    exit;
} 
```

...

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T09:01:01.317

除了简单会话之外，您的应用程序是否检查 IP 地址或任何其他变量？我不能肯定地说，但很有可能用户的 IP 地址在他们浏览时会发生变化，移动互联网提供商大量使用代理和其他此类技术。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T09:01:16.117

我的猜测是，您的问题不是下载过程，而是会话识别用户的方式，即**cookie**。您需要调查为什么您的用户会丢失他们的会话 cookie，这会导致自动断开连接。也许您的 3g 提供商缓存连接或在用户面前有代理？另一种可能性是您的会话以某种方式绑定到客户端的 IP 地址，这可能会在不稳定的 3g 连接期间发生变化。

看看这个：[iPhone cookie/caching issue on 3G, fine over wifi](https://stackoverflow.com/questions/3445708/iphone-cookie-caching-issue-on-3g-fine-over-wifi)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-22T09:11:12.373

Suhosin 对会话进行加密，似乎某些东西确实改变了 cookie 和会话。我们在 php.ini 中禁用了加密。

```
[suhosin] suhosin.session.encrypt=Off
[suhosin] suhosin.cookie.encrypt=Off 
```

我们还使用了 Ajax 代理库，该库重新加载页面并且丢失了一些会话变量。我们为 Ajax 调用替换了 Ajax 代理。

# java - read data from web service android

> ID：11011296
> 
> 赞同：2
> 
> 时间：2012-06-13T08:50:20.343
> 
> 标签：java, android, web-services

i have made web service with php Zend like this

```
<?php
 require('Zend\Db.php');
 require('Zend\Db\Exception.php');
 require('Zend\Debug.php');

 function sendResponse($status, $payload)
{
$responseCodeList = array(
    200 => 'OK',
    201 => 'Created',
    204 => 'No Content',
    301 => 'Moved Permanently',
    400 => 'Bad Request',
    404 => 'Not Found',
    410 => 'Gone',
    501 => 'Not Implemented',
);

header('HTTP/1.1 ' . $status . ' ' . $responseCodeList[$status]);
header('Content-Type: text/plain');
echo (string) $payload;
}

try {
     $db = Zend_Db::factory('Oracle', array(
       'host'       => '10.234.152.35',
       'username'   => 'REPORT',
       'password'   => 'r4pt0rsdw',
       'dbname'     => '//10.234.152.35/SATDW',
   ));
  } catch (Zend_Db_Exception $e) {
echo sendResponse(200,'100|Database Error');
exit;
  }

  $method = $_SERVER['REQUEST_METHOD'];

  $payload = '';

  if ($method = 'GET') {
   $data = $_GET;
   //$sql = "select * from rpt_ms_dc where msd_code = :code";
   try {
       $select = $db->select()
                    ->from(
                       'RPT_MS_DC',
                       array(
                           'KODE' => 'MSD_CODE',
                           'NAMA' => 'MSD_DESC',
                       )
                    )
                    ->where('MSD_CODE = ?', $data['code']);
       $stmt = $select->query();
       $result = $stmt->fetchAll();
       //return $result;
       //$payload = $result[0]['KODE'].$result[0]['NAMA'];
       $payload = json_encode($result);
       //Zend_Debug::dump($result[0]['KODE'].'||'.$result[0]['NAMA']);exit;
      } catch(Zend_Db_Exception $e) {
          Zend_Debug::dump($e->getMessage());exit;
      }
  }

echo sendResponse(200, $payload); 
```

and the result like this :

> [{"KODE":"A","NAMA":"DC SERPONG"}]

then i want retrieve just **DC SERPONG** in my edit text how can i do this?? this is my android code :

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    etKode = (EditText)findViewById(R.id.txtKode);
    etNama = (EditText)findViewById(R.id.txtBranch);
    save = (Button)findViewById(R.id.get);

    save.setOnClickListener(new Button.OnClickListener() {
            //@Override
    public void onClick(View v) {
        try {
            // setiap parameter yang akan dikirim melalui http
            // harus encode agar
            // dapat terbaca dengan baik oleh server
            String kode = URLEncoder.encode(etKode.getText().toString(), "utf-8");
            //String nama = URLEncoder.encode(etNama.getText().toString(), "utf-8");
            url += "?code=" + kode ;
            getRequest(url);
        } catch (UnsupportedEncodingException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
    });
}
public void getRequest(String Url) {

            HttpClient client = new DefaultHttpClient();
            HttpGet request = new HttpGet(url);
            try {
                HttpParams httpParameters = new BasicHttpParams();
                // Set the timeout in milliseconds until a connection is established.
                // The default value is zero, that means the timeout is not used. 
                int timeoutConnection = 3000;
                HttpConnectionParams.setConnectionTimeout(httpParameters, timeoutConnection);
                // Set the default socket timeout (SO_TIMEOUT) 
                // in milliseconds which is the timeout for waiting for data.
                int timeoutSocket = 5000;
                HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);

                DefaultHttpClient httpClient = new DefaultHttpClient(httpParameters);
                httpClient.setParams(httpParameters);
                if(timeoutConnection > 3000){
                    Toast.makeText(this, "Request Timeout", Toast.LENGTH_LONG).show();
                    System.out.println("Request Timeout");
                }
                HttpResponse response = client.execute(request);
                String res = EntityUtils.toString(response.getEntity());
                //Toast.makeText(this, "Tambah Data " + request(response) ,Toast.LENGTH_SHORT).show();
                System.out.println(res);
                etNama.setText(res);

        }

public static String request(HttpResponse response) {

            String result = "";
            try {
                InputStream in = response.getEntity().getContent();
                BufferedReader reader = new BufferedReader(
                        new InputStreamReader(in));
                StringBuilder str = new StringBuilder();
                String line = null;
                while ((line = reader.readLine()) != null) {
                    str.append(line + "\n");
                }
                in.close();
                result = str.toString();
            } catch (Exception ex) {
                result = "Error";
            }

            return result;
        } 
```

# asp.net-mvc - Asp .net mvc 3 CheckBoxFor 方法输出隐藏字段，当复选框被禁用并选中 true 时，该隐藏字段值为 false

> ID：11011300
> 
> 赞同：10
> 
> 时间：2012-06-13T08:50:46.910
> 
> 标签：asp.net-mvc, checkboxfor

CheckBoxFor(t => t.boolValue, new { disabled="disabled" }) 方法以在禁用模式下呈现复选框。

该方法也呈现一个隐藏字段。

我的问题是为什么这个隐藏字段的禁用复选框的值是错误的？我相信隐藏字段的目的是对默认复选框行为进行一些额外的行为

有没有办法覆盖默认的 MVC 功能，以便即使在禁用模式下，这个隐藏字段的值也基于复选框的状态？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-13T08:53:09.350

隐藏字段用于将复选框值绑定到布尔属性。问题是，如果未选中复选框，则不会向服务器发送任何内容，因此 ASP.NET MVC 使用此隐藏字段发送 false 并绑定到相应的布尔字段。除了编写自定义帮助程序之外，您无法修改此行为。

话虽这么说，而不是在复选框上使用`disabled="disabled"`use 。`readonly="readonly"`这样，您将保持相同的期望行为，即用户无法修改其值，但除此之外，它的值将在提交表单时发送到服务器：

```
@Html.CheckBoxFor(x => x.Something, new { @readonly = "readonly" }) 
```

* * *

更新：

正如评论部分所指出的，该`readonly`属性不适用于 Google Chrome。另一种可能性是使用另一个隐藏字段并禁用复选框：

```
@Html.HiddenFor(x => x.Something)
@Html.CheckBoxFor(x => x.Something, new { disabled = "disabled" }) 
```

* * *

更新 2：

这是一个带有附加隐藏字段的完整测试用例。

模型：

```
public class MyViewModel
{
    public bool Foo { get; set; }
} 
```

控制器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        return View(new MyViewModel { Foo = true });
    }

    [HttpPost]
    public ActionResult Index(MyViewModel model)
    {
        return Content(model.Foo.ToString());
    }
} 
```

看法：

```
@model MyViewModel

@using (Html.BeginForm())
{
    @Html.HiddenFor(x => x.Foo)
    @Html.CheckBoxFor(x => x.Foo, new { disabled = "disabled" })
    <button type="submit">OK</button>
} 
```

提交表单时， Foo 属性的值为`true`。我已经测试了所有主流浏览器（Chrome、FF、IE）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-07T09:20:11.213

我发现查询字符串中添加的参数看起来很乱，让人们认为我们作为开发人员做错了什么。所以我采用了创建自己的 InputExtensions 类的极端方法，它允许我决定是否要呈现隐藏的输入。

以下是我创建的 InputExtensions 类（基于现有的 MVC 代码以保持完全兼容）：

```
public static class InputExtensions
{
    //
    // Checkboxes
    //

    public static MvcHtmlString CheckBoxFor<TModel>(this HtmlHelper<TModel> htmlHelper,
        Expression<Func<TModel, bool>> expression, bool renderHiddenInput)
    {
        if (renderHiddenInput)
        {
            return System.Web.Mvc.Html.InputExtensions.CheckBoxFor(htmlHelper, expression);
        }
        return CheckBoxFor(htmlHelper, expression, false);
    }

    public static MvcHtmlString CheckBoxFor<TModel>(this HtmlHelper<TModel> htmlHelper,
        Expression<Func<TModel, bool>> expression, object htmlAttributes, bool renderHiddenInput)
    {
        if (renderHiddenInput)
        {
            return System.Web.Mvc.Html.InputExtensions.CheckBoxFor(htmlHelper, expression, htmlAttributes);
        }
        return CheckBoxFor(htmlHelper, expression, HtmlHelper.AnonymousObjectToHtmlAttributes(htmlAttributes), false);
    }

    public static MvcHtmlString CheckBoxFor<TModel>(this HtmlHelper<TModel> htmlHelper,
        Expression<Func<TModel, bool>> expression, IDictionary<string, object> htmlAttributes,
        bool renderHiddenInput)
    {
        if (renderHiddenInput)
        {
            return System.Web.Mvc.Html.InputExtensions.CheckBoxFor(htmlHelper, expression, htmlAttributes);
        }

        if (expression == null)
        {
            throw new ArgumentNullException("expression");
        }

        ModelMetadata metadata = ModelMetadata.FromLambdaExpression(expression, htmlHelper.ViewData);
        bool? isChecked = null;
        if (metadata.Model != null)
        {
            bool modelChecked;
            if (Boolean.TryParse(metadata.Model.ToString(), out modelChecked))
            {
                isChecked = modelChecked;
            }
        }

        return CheckBoxHelper(htmlHelper, metadata, ExpressionHelper.GetExpressionText(expression), isChecked, htmlAttributes);
    }

    private static MvcHtmlString CheckBoxHelper(HtmlHelper htmlHelper, ModelMetadata metadata, string name, bool? isChecked, IDictionary<string, object> htmlAttributes)
    {
        RouteValueDictionary attributes = ToRouteValueDictionary(htmlAttributes);

        bool explicitValue = isChecked.HasValue;
        if (explicitValue)
        {
            attributes.Remove("checked"); // Explicit value must override dictionary
        }

        return InputHelper(htmlHelper,
                           InputType.CheckBox,
                           metadata,
                           name,
                           value: "true",
                           useViewData: !explicitValue,
                           isChecked: isChecked ?? false,
                           setId: true,
                           isExplicitValue: false,
                           format: null,
                           htmlAttributes: attributes);
    }

    //
    // Helper methods
    //

    private static MvcHtmlString InputHelper(HtmlHelper htmlHelper, InputType inputType, ModelMetadata metadata, string name, object value, bool useViewData, bool isChecked, bool setId, bool isExplicitValue, string format, IDictionary<string, object> htmlAttributes)
    {
        string fullName = htmlHelper.ViewContext.ViewData.TemplateInfo.GetFullHtmlFieldName(name);
        if (string.IsNullOrEmpty(fullName))
        {
            throw new ArgumentException("Value cannot be null or empty.", "name");
        }

        var tagBuilder = new TagBuilder("input");
        tagBuilder.MergeAttributes(htmlAttributes);
        tagBuilder.MergeAttribute("type", HtmlHelper.GetInputTypeString(inputType));
        tagBuilder.MergeAttribute("name", fullName, true);

        string valueParameter = htmlHelper.FormatValue(value, format);
        var usedModelState = false;

        bool? modelStateWasChecked = GetModelStateValue(htmlHelper.ViewData, fullName, typeof(bool)) as bool?;
        if (modelStateWasChecked.HasValue)
        {
            isChecked = modelStateWasChecked.Value;
            usedModelState = true;
        }
        if (!usedModelState)
        {
            string modelStateValue = GetModelStateValue(htmlHelper.ViewData, fullName, typeof(string)) as string;
            if (modelStateValue != null)
            {
                isChecked = string.Equals(modelStateValue, valueParameter, StringComparison.Ordinal);
                usedModelState = true;
            }
        }
        if (!usedModelState && useViewData)
        {
            isChecked = EvalBoolean(htmlHelper.ViewData, fullName);
        }
        if (isChecked)
        {
            tagBuilder.MergeAttribute("checked", "checked");
        }
        tagBuilder.MergeAttribute("value", valueParameter, isExplicitValue);

        if (setId)
        {
            tagBuilder.GenerateId(fullName);
        }

        // If there are any errors for a named field, we add the css attribute.
        ModelState modelState;
        if (htmlHelper.ViewData.ModelState.TryGetValue(fullName, out modelState))
        {
            if (modelState.Errors.Count > 0)
            {
                tagBuilder.AddCssClass(HtmlHelper.ValidationInputCssClassName);
            }
        }

        tagBuilder.MergeAttributes(htmlHelper.GetUnobtrusiveValidationAttributes(name, metadata));

        return MvcHtmlString.Create(tagBuilder.ToString(TagRenderMode.SelfClosing));
    }

    private static RouteValueDictionary ToRouteValueDictionary(IDictionary<string, object> dictionary)
    {
        return dictionary == null ? new RouteValueDictionary() : new RouteValueDictionary(dictionary);
    }

    private static object GetModelStateValue(ViewDataDictionary viewData, string key, Type destinationType)
    {
        ModelState modelState;
        if (viewData.ModelState.TryGetValue(key, out modelState))
        {
            if (modelState.Value != null)
            {
                return modelState.Value.ConvertTo(destinationType, culture: null);
            }
        }
        return null;
    }

    private static bool EvalBoolean(ViewDataDictionary viewData, string key)
    {
        return Convert.ToBoolean(viewData.Eval(key), CultureInfo.InvariantCulture);
    }
} 
```

然后你可以像这样调用该方法：

```
@Html.CheckBoxFor(t => t.boolValue, new { disabled="disabled" }, false) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-19T00:39:21.900

这是我发现的一个快速提示：如果您为对象上的布尔值设置默认值。可以写出值为真/假的标签（此值应与对象上的默认布尔值相反）

```
<input type="checkbox" name="IsAllDayEvent" value="true" id="IsAllDayEvent" /> 
```

只有在选中复选框时才发送该值，因此它有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T20:49:57.173

尽管达林的回答非常好，但还有另一种方法可以确保禁用的复选框按预期回发。

此解决方案也适用于基于模型中的属性有条件地禁用复选框，或基于用户选择或客户端检索数据启用/禁用客户端的情况。

您可以保持视图简单：（此处禁用设置是可选的）

```
@Html.CheckBoxFor(m => m.Something, new { id = "somethingCheckbox", disabled = "disabled" }) 
```

正如 Darin 所提到的，这将生成一个额外的隐藏输入字段，设置为 false，这样复选框值也会在未选中复选框时回发。因此，我们知道该`Something`字段将始终回发，无论复选框是否选中，禁用与否。唯一的问题是，如果复选框被禁用，它将始终以`False`.

我们可以在提交之前通过一些 JavaScript 后处理来解决这个问题。在我的情况下，代码看起来像这样：

```
var dataToPost = $form.serializeArray();

if (dataToPost != null) {
    for (var i = 0; i < dataToPost.length; i++) {
        if (dataToPost[i].name === "Something") {
            dataToPost[i].value = $("#somethingCheckbox").attr("checked") === "checked";
            }
        }
    }  
$.post($form.attr("action"), dataToPost) 
```

您可能需要针对您的场景对其进行修改，但您应该明白这一点。

# javascript - Convert String to Integer in JavaScript

> ID：11011303
> 
> 赞同：3
> 
> 时间：2012-06-13T08:51:00.920
> 
> 标签：javascript, asp.net, integer

I have a string value of 41,123 and I want to convert it to an integer in JavaScript.

I tried parseInt(41,123, 10) and parseFloat, but nothing gives me correct answer.

ParseInt, parseFloat work well until comma is encountered, but to above the result is '41'.

Does anyone have an idea about the fix?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T08:52:04.663

```
var myInt = parseInt("41,123,10".replace(/,/g,"")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T08:54:05.047

这是解决方案：

```
Number(s.replace(/,/g, "")) 
```

**替换时需要使用正则表达式来删除所有逗号字符，否则只会替换一个逗号。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T08:55:27.207

可以去掉逗号，然后解析；假设数字是可变的`s`：

```
parseInt(s.replace(/,/g, '') 
```

# vim - Reusing the previous range in ex commands in VIM

> ID：11011304
> 
> 赞同：9
> 
> 时间：2012-06-13T08:51:10.700
> 
> 标签：vim

Is it possible to reuse the range of ex commands in VIM?

As an example, I can write (copy) lines 4 to 10 from my current file to a new file using the following command:

```
:4,10w foo/bar.txt 
```

But what I really want to do is move the lines to a new file. I can do this like so:

```
:4,10w foo/bar.txt
:4,10d 
```

But it's a bit annoying to have to type 4,10 both times.

So I have two questions:

1.  **Generally**, Is there a way to reference the previously used range in ex commands?
2.  **Specifically**, if there is not a way to do (1), is there any easier way to cut and paste a number of lines from one file into a new one.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T17:54:22.887

我通常使用 cat 来执行此操作：

```
:4,10!cat > foo/bar.txt 
```

这是有效的，因为您通过 cat 管道传输线路并用生成的输出替换它们，这没什么。当然，您可以通过 >> 而不是 > 来追加到现有文件的末尾。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-13T09:35:13.240

我不知道 (1) 的答案，但要回答 (2)，有许多不同的方法不需要手动重新选择线条。在可视模式下，这将起作用：

```
4GV10G
:w foo/bar.txt
gvd 
```

因为 gv 重新选择了之前的选择，这几乎是你想要的，没有使用 ex 范围。

但是你可以把问题转过来，然后尝试：

```
:4,10d
:sp foo/bar.txt
pZZ 
```

剪切，然后粘贴到一个新文件中，然后关闭它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-13T09:39:59.533

除了使用 Vim 历史记录 ( `:``Cursor Up`, `q:`) 并删除前面的命令以便只保留范围之外，没有办法重新使用最后一个范围，没有魔法变量。

如果我更频繁地使用这种*移动线组合，我会为它编写一个自定义命令：*

```
command! -bang -range -nargs=1 -complete=file MoveWrite <line1>,<line2>write<bang> <args> | <line1>,<line2>delete _ 
```

您只需指定一次范围并保存输入。

您也可以为其他组合编写类似的内容。主要挑战是指定所有命令属性（bang、范围、完成），然后记住自定义命令名称。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-13T09:32:59.113

通常，我所做的是从一个文件中删除行，切换到另一个文件，然后粘贴。

另外，我通常使用标记。我没有输入实际数字，而是点击`mb`标记开始行，然后转到结束行并点击`d'b`删除回到标记为的行`b`。但是您可以使用`mb`来标记开始行和`me`结束行，然后运行 ​​ex 命令：

```
:'b,'e w somefile.txt<Enter> 
```

当然，您可以使用任何字母`a`作为`z`标记；我通常使用`b`，`e`但你可以使用你喜欢的。

我将如何移动线条：

```
m'b
<navigate to end line>
d'b
:n somefile.txt<Enter>
p
Ctrl+^ 
```

Ctrl+^ 从当前打开的文件切换到上一个打开的文件。（如果您愿意，也可以只打开一个窗格并切换窗格。窗格在普通 vi 中不起作用，但在 vim 中起作用。）

以上假设您已将`autowrite`选项设置为 on。使用`autowrite`,`:n`命令和 Ctrl+^ 都只是写入当前文件然后切换文件，而不是抱怨文件已更改而您没有保存它。`:n`您也可以执行上述操作，并在使用或 Ctrl+^之前显式写入文件。

顺便说一句，我使用 Ctrl+^ 如此之多，以至于我将它映射到`K`. 更容易输入，但我很久以前就养成了这个习惯，当时我有时不得不使用无法输入 Ctrl+^ 的哑终端。

顺便说一句，当您删除行时，它们会进入“未命名缓冲区”。在 vim 中，切换文件时会保留未命名的缓冲区。在原始 vi 中，未命名的缓冲区被清除。所以上面的内容不适用于旧的vi。您可以通过删除命名缓冲区，然后从命名缓冲区粘贴来使其工作；适用于任何版本的vi。

```
m'b
<navigate to end line>
"ad'b
:n somefile.txt<Enter>
"ap
Ctrl+^ 
```

以上删除到名为 的缓冲区中，然后从另一个文件中`a`粘贴。`a`这当然在 vim 中有效；只是你不需要它。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-13T10:57:22.737

这是实现此目的的命令行映射。我已将它绑定到 CTRL-G CTRL-U，因为它执行与 CTRL-U 类似的操作。（但你当然可以改变它！）

```
" c_CTRL-G_CTRL-U   Remove all characters between the cursor position and
"           the closest previous |:range| given to a command. When
"           directly after a range, remove it.
"           Useful to repeat a recalled command line with the same
"           range, but a different command.
let s:singleRangeExpr = '\%(\d\+\|[.$%]\|''\S\|\\[/?&]\|/[^/]*/\|?[^?]*?\)\%([+-]\d*\)\?'
let s:rangeExpr = s:singleRangeExpr.'\%([,;]'.s:singleRangeExpr.'\)\?'
let s:upToRangeExpr = '^\%(.*\\\@<!|\)\?\s*' . s:rangeExpr . '\ze\s*\h'
" Note: I didn't take over the handling of command prefixes (:verbose, :silent,
" etc.) to avoid making this overly complex.
function! s:RemoveAllButRange()
    let l:cmdlineBeforeCursor = strpart(getcmdline(), 0, getcmdpos() - 1)
    let l:cmdlineAfterCursor = strpart(getcmdline(), getcmdpos() - 1)

    let l:upToRange = matchstr(l:cmdlineBeforeCursor, s:upToRangeExpr)
    if empty(l:upToRange)
        return getcmdline()
    else
        call setcmdpos(strlen(l:upToRange) + 1)
        return l:upToRange . l:cmdlineAfterCursor
    endif
endfunction
cnoremap <C-g><C-u> <C-\>e(<SID>RemoveAllButRange())<CR> 
```

### 作为插件

我的[CmdlineSpecialEdits 插件](http://www.vim.org/scripts/script.php?script_id=5865)（在许多其他插件中）也有这个映射。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-13T11:17:31.173

您也可以这样做将匿名寄存器的内容写入 file2.txt

```
 :4,10d | :call writefile(split(@@, "\n", 1), 'file2.txt') 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-13T09:36:46.023

您可以先删除，然后打开一个新选项卡并粘贴内容 - 所以`:4,10d`，然后`:tabe foo/bar.txt`，然后`p`...听起来更好吗？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-06-01T09:30:07.277

In Vim 8 and NVIM 0.3.7 as of writing, you can actually edit your command list and hit enter to execute.

```
:4,10w foo/bar.txt
q: 
```

`q:` is to enter interactive ex command

Once you open the interactive command list, you can then edit it and press enter to execute.

I love [moopet's answer](https://stackoverflow.com/a/11012066/340888) though, it's efficient.

# sql - 索引视图和执行计划

> ID：11011310
> 
> 赞同：2
> 
> 时间：2012-06-13T08:51:29.350
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2008-r2

我创建了一个索引视图，它加入了多个表以获得更好的性能，但是当我使用索引视图时，性能并没有比以前好。当我调查执行计划时，我看不到这些连接表上的视图和索引视图之间有任何变化。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T12:09:56.337

如果您没有使用 sql server 企业版（请参阅[查询优化器自动使用索引视图](http://msdn.microsoft.com/en-us/library/cc645993%28v=sql.105%29.aspx)功能），则 sql server 查询优化器不考虑索引视图。

在其他版本中，您可以让 sql server 使用它[- With (NoExpand)](http://msdn.microsoft.com/en-us/library/ms181714.aspx)：

```
Select col1, col2, col3
From dbo.vw_MyView With (NoExpand) 
```

# jquery - grey box AJS.js file conflicking with Jquery

> ID：11011313
> 
> 赞同：0
> 
> 时间：2012-06-13T08:51:39.450
> 
> 标签：jquery, asp.net, image, slider, jcarousel

Im using [http://orangoo.com/labs/GreyBox](http://orangoo.com/labs/GreyBox) for popup in my application everything was working fine until i added Jcarousal from [http://sorgalla.com/jcarousel](http://sorgalla.com/jcarousel) Now greybox is working but jcarousal is not working when i comment the line in greybox as you can see in code then jcarousal dont work. how can i avoid this confliction

```
<link href="Script/greybox/gb_styles.css" rel="stylesheet" type="text/css" />
<script type="text/javascript">
    var GB_ROOT_DIR = '<%= this.ResolveClientUrl("../Script/greybox/")%>';
</script>   
<%--<script type="text/javascript" src='<%= this.ResolveClientUrl("../Script/greybox/AJS.js") %>'></script>--%>**// if i comment this line then jcarousal works**
<script type="text/javascript" src='<%= this.ResolveClientUrl("../Script/greybox/AJS_fx.js") %>'></script>
<script type="text/javascript" src='<%= this.ResolveClientUrl("../Script/greybox/gb_scripts.js") %>'></script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:08:43.243

尝试在包含 jQuery 之后但在调用其他 javascript 库之前放置此行。

```
$.noConflict(): 
```

# apache - how to properly secure access to a site

> ID：11011316
> 
> 赞同：0
> 
> 时间：2012-06-13T08:52:03.173
> 
> 标签：apache, security

I am a developer and have a site that has some sensitive information that needs to be online for people in different cities. The data is not of much use for most people (no CC numbers, or marketing plans)

the server has a LAMP stack.

I have used .htaccess on the server and the site has a web based sign in screen as well.

Two questions: What is the best way to guarantee the data is secure (within reason)? How can i check there has not been a security breach?

thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T08:58:28.677

1.  您可以安装 SSL 证书。并将所有 HTTP 调用重定向到 HTTPS（使用 .htaccess 或 httpd.conf）。
2.  有许多可能的安全漏洞，例如：代码注入、sql 注入等。您可以使用这样的服务[和这样](http://www.websitedefender.com/?gclid=CJD-iv7ryrACFYcZQgodXiq5WA)的[服务](https://www.whitehatsec.com/seekinfo/GYRO/seccheck/SECURITYcheck.html?gclid=CMqh4PzryrACFWQKRQodmhR7XA)来检查您网站的安全性。

# wordpress - Wordpress plugin works only for logged users

> ID：11011317
> 
> 赞同：1
> 
> 时间：2012-06-13T08:52:04.220
> 
> 标签：wordpress

I'm using [Dave's Wordpress Live Search](http://wordpress.org/extend/plugins/daves-wordpress-live-search/).

The problem I have, is live search - it works only for logged users. If i'm logged in, plugin works fine. I found this line:

```
'ajaxURL' => admin_url('admin-ajax.php', is_ssl()), 
```

which mean plugin is using `admin-ajax.php` and i think unlogged users haven't access to it.
I tried to define ajaxURL without `, is_ssl()`:

```
'ajaxURL' => admin_url('admin-ajax.php'), 
```

but didn't help.

Is it a problem with access to `wp-admin/admin-ajax.php`? How can i change it?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T16:33:13.940

这是旧的，但我正在研究这个。您可以复制插件的钩子并添加“no_priv”版本，而不是更改核心。我相信这比在核心中复制文件更优雅。

见：[http ://codex.wordpress.org/AJAX_in_Plugins](http://codex.wordpress.org/AJAX_in_Plugins)

从该页面：

“面向查看器的 Ajax 从 WordPress 2.8 开始，有一个类似于 'wp_ajax_my_action' 的新钩子：

'wp_ajax_nopriv_my_action' 为未登录的用户执行。因此，如果您希望它为访问者和登录用户触发，您可以这样做：

```
add_action('wp_ajax_my_action', 'my_action_callback');
add_action('wp_ajax_nopriv_my_action', 'my_action_callback');" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T09:09:59.717

在您的情况下，我将克隆 admin-ajax.php 并重命名它并从文件中删除所有与管理相关的条件。

更详细：

*   确保在需要的地方包含新的克隆文件而不是旧文件。
*   确保您只更改文件中的权限级别。
*   克隆的文件只是放在与 admin-ajax.php 相同的目录中，“wp-admin”

祝你好运！:)

# c++ - 'const'双重复制+比较安全吗？

> ID：11011322
> 
> 赞同：10
> 
> 时间：2012-06-13T08:52:18.477
> 
> 标签：c++, floating-point

我注意到有很多关于浮点计算错误的讨论，这需要您使用比`==`. 但是，所有这些文章似乎都假设该值以某种方式被操纵（或双重计算），而我没有看到一个涵盖非常简单的常量复制的示例。

请考虑以下几点：

```
const double magical_value = -10;

class Test
{
    double _val;

public:
    Test()
        : _val(magical_value)
    {
    }

    bool is_special()
    {
        return _val == magical_value;
    }
}; 
```

据我了解，`magical_value`应该在编译时设置，以便所有舍入都发生在那个时候。之后，该值应该被复制到类中，并与原始值进行比较。这样的比较能保证安全吗？或者复制或比较可以在这里引入错误吗？

请不要建议替代比较或神奇的价值使用方法，那是另一个话题。我只是对这个假设感到好奇。

*编辑*：请注意，我有点担心在某些体系结构上，优化可能会导致将值复制到不同大小的浮点寄存器，从而引入精确值的差异。有这样的风险吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T08:58:50.247

> 这样的比较能保证安全吗？或者复制或比较可以在这里引入错误吗？

是的，安全的（这是复制操作的要求，由 暗示`=`）。只要源和目标类型相同，您就无需担心任何转化/促销。

但是，请注意，它`magical_value`可能不包含`10`精确值，而是一个近似值。这个近似值将被复制到`_val`.

给定`const`限定符，`magical_value`很可能会被优化掉（如果您打开优化）或按原样使用（即可能不会用完内存）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T09:52:33.470

除了可能不同大小的寄存器之外，您还需要担心非规范化浮点（cq 刷新为零）（请参阅[为什么将 0.1f 更改为 0 会使性能降低 10 倍？](https://stackoverflow.com/questions/9314534/why-does-changing-0-1f-to-0-slow-down-performance-by-10x/9314913#9314913)）

只是为了了解这可能导致的怪异，请尝试以下代码：

```
float       a = 0.000000000000000000000000000000000000000047683384;
const float b = 0.000000000000000000000000000000000000000047683384;
float aa = a, bb = b;

#define SUPPORT_DENORMALIZATION ({volatile double t=DBL_MIN/2.0;t!=0.0;})

printf("support denormals: %d\n",SUPPORT_DENORMALIZATION);
printf("a = %.48f, aa = %.48f\na==aa %d, a==0.0f %d, aa==0.0f %d\n",a,aa,a==aa,a==0.0f,aa==0.0f);
printf("b = %.48f, bb = %.48f\nb==bb %d, b==0.0f %d, bb==0.0f %d\n",b,bb,b==bb,b==0.0f,bb==0.0f); 
```

这给出了：（编译时没有清零）

```
support denormals: 1
a = 0.000000000000000000000000000000000000000047683384, aa = 0.000000000000000000000000000000000000000047683384
a==aa 1, a==0.0f 0, aa==0.0f 0
b = 0.000000000000000000000000000000000000000047683384, bb = 0.000000000000000000000000000000000000000047683384
b==bb 1, b==0.0f 0, bb==0.0f 0 
```

或：（用 编译`gcc -ffast-math`）

```
support denormals: 0
a = 0.000000000000000000000000000000000000000000000000, aa = 0.000000000000000000000000000000000000000000000000
a==aa 1, a==0.0f 1, aa==0.0f 1
b = 0.000000000000000000000000000000000000000047683384, bb = 0.000000000000000000000000000000000000000000000000
b==bb 1, b==0.0f 0, bb==0.0f 1 
```

最后一行当然是奇怪的：`b==bb && b!=0.0f && bb==0.0f`这是真的。

所以如果你还在考虑比较浮点值，至少要远离小值。

**更新**以抵消一些关于这是由于使用浮点数而不是双精度数的评论，它也适用于双精度数，但您需要将常量设置为以下某处`DBL_MIN`，例如`1e-309`.

**更新 2**与下面的一些评论相关的代码示例。这表明双精度数也存在问题，并且比较可能会变得不一致（启用刷新为零时）

```
 double a;
    const double b = 0.00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001225;
    const double c = 0.00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002225;

    printf("b==c %d\n",b==c);
    a = b;
    printf("assigned a=b: a==b %d\n",a==b);
    a = c;
    printf("assigned a=c: a==b %d\n",a==b); 
```

输出：

```
b==c 0
assigned a=b: a==b 1
assigned a=c: a==b 1 
```

问题显示在最后一行，您会天真地期望`a==b`在分配`a=c`with后会变为错误`c!=b`。

# javascript - jquery datatable 禁用特定行中的排序

> ID：11011335
> 
> 赞同：13
> 
> 时间：2012-06-13T08:53:01.887
> 
> 标签：javascript, jquery, datatable

如何使用类禁用jquery数据表中特定行/列的排序？

这是我的示例表；

```
 <table>
    <thead>
    <tr>
    <th class="sorting_disabled">Title1</th>
    <th class="">Title2</th>
    <th class="sorting_disabled">Title3</th>
    </tr>
    </thead>
    <tbody>
    <tr><td>Tag 1</td><td>Date 1</td><td>Date 2</td></tr>
    <tr><td>Tag 2</td><td>Date 2</td><td>Date 2</td></tr>
    <tr><td>Tag 3</td><td>Date 3</td><td>Date 3</td></tr>
    <tr><td>Tag 4</td><td>Date 4</td><td>Date 4</td></tr>
    <tr><td>Tag 5</td><td>Date 5</td><td>Date 5</td></tr>
....
    </tbody>
    </table> 
```

脚本;

```
$('.sortable thead tr th.sorting_disabled').livequery(function() {
       $(this).removeClass('sorting');
       $(this).unbind('click');
    }); 
```

上面的代码有效，但是如果我单击具有排序的下一列，它会再次显示一个箭头。虽然它不可点击;(

如何通过使用类而不是使用/重绘表格来禁用排序。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-06-17T22:20:03.953

您可以使用定义中的类禁用排序。只需将此代码添加到数据表初始化：

```
// Disable sorting on the sorting_disabled class
"aoColumnDefs" : [ {
    "bSortable" : false,
    "aTargets" : [ "sorting_disabled" ]
} ] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T09:37:40.200

```
$('#example').dataTable( {
  "aoColumnDefs": [
      { 'bSortable': false, 'aTargets': [ 1 ] }
   ]}); 
```

那应该这样做..;)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-08-14T17:16:13.390

如[Datatables 文档](https://datatables.net/examples/advanced_init/html5-data-options.html)中所述：

> 从 DataTables 1.10.5 开始，现在可以使用 HTML5 data-* 属性定义初始化选项。属性名称由 DataTables 读取，并可能与标准 Javascript 初始化选项结合使用（以 data-* 属性为优先）。

例子：

```
<thead>
    <tr>
        <th>Name</th>
        <th>Position</th>
        <th>Office</th>
        <th>Age</th>
        <th data-orderable="false">Start date</th>
        <th>Salary</th>
    </tr>
</thead> 
```

我强烈建议使用这种方法，因为它比其他方法更干净。DataTables 1.10.15 最初于 2017 年 4 月 18 日发布。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-11-15T12:46:40.407

尝试以下答案。它对我有用。

```
<table class="tablesorter" id="tmp">
<thead>
    <tr>
        <th>Area</th>
        <th>Total Visitors</th>
    </tr>
</thead>
<tbody>
    <tr>
        <td>Javascript</td>
        <td>15</td>
    </tr>
    <tr>
        <td>PHP</td>
        <td>3</td>
    </tr>
    <tr>
        <td>HTML5</td>
        <td>32</td>
    </tr>
    <tr>
        <td>CSS</td>
        <td>14</td>
    </tr>
    <tr>
        <td>XML</td>
        <td>54</td>
    </tr>
</tbody>
<tfoot>
    <tr class="no-sort">
        <td><strong>Total</strong></td>
        <td><strong>118</strong></td>
    </tr>
</tfoot> 
```

来源：[http ://blog.adrianlawley.com/tablesorter-jquery-how-to-exclude-rows](http://blog.adrianlawley.com/tablesorter-jquery-how-to-exclude-rows)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-12-19T07:54:00.827

```
<th class="sorting_disabled">&nbsp;</th>

$(document).ready(function () {
    $('#yourDataTableDivID').dataTable({
        "aoColumnDefs": [
           {
               "bSortable": false,
               "aTargets": ["sorting_disabled"]
           }
        ]
    });
}); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-06-23T22:15:51.537

唯一的解决方案：首先添加`class="sorting_disabled"`任何`<th>`要禁用排序的代码，然后将此代码添加到数据表初始化中：

```
 // Disable sorting on the sorting_disabled class
        "aoColumnDefs" : [ {
            "bSortable" : false,
            "aTargets" : [ "sorting_disabled" ]
        } ],
        "order": [
            [1, 'asc']
        ], 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-13T09:14:00.020

我希望下面的代码适用于您的情况。

```
 $("#dataTable").dataTable({
            "aoColumns": [{"bSortable": false}, null,{"bSortable": false}]
        }); 
```

您需要通过“bSortable”为该特定列禁用排序。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-13T09:19:01.290

```
$(document).ready(function() {
    $('#example').dataTable( {
        "aoColumns": [
            { "bSortable": false },
            null,
            { "bSortable": false }
        ]
    });
}); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-12-17T10:16:00.883

我提供了与问题中几乎相同的解决方案，但我使用了“fnHeaderCallback”。据我了解，在每次标题重新显示后都会调用它，因此无需再担心单击目标列旁边的列后再次出现的“排序”类。

```
$('.datatable').dataTable({
  "fnHeaderCallback": function() {
    return $('th.sorting.sorting_disabled').removeClass("sorting").unbind("click");
  }
}); 
```

有关回调的其他文档：http: [//datatables.net/usage/callbacks](http://datatables.net/usage/callbacks)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-08-08T07:01:17.150

这段代码对我有用。

在创建的行中，我将固定行类添加到我想保持固定且不可排序的行中，并且我绘制回调我隐藏了行，然后我将它附加到表本身。

希望这对你有用：

```
$(this.refs.main).DataTable({
        dom: '<"data-table-wrapper"t>',
        data: data,
        language: {
            "emptyTable": "Loading ...",

        },
        columns,
        ordering: true,
        order: [0,'asc'],
        destory:true,
        bFilter: true,
        fixedHeader: {
            header: true
        },
        iDisplayLength: 100,
        scrollY: '79vh',
        ScrollX: '100%',
        scrollCollapse: true,
        "drawCallback": function( settings ) {
            var dataTableId = $("#To_Scroll_List").find(".dataTables_scrollBody table").attr("id");
            $("..fixed-row").css('display','none');
            $("#"+dataTableId+"_wrapper table").find('tbody tr:last').after($('.fixed-row'));
            $(".fixed-row").show();
        },
        createdRow: function (row, data, index) {
                if(data.UnitsPerLine == 999){
                    $(row).addClass('fixed-row');
                } 
        },
        initComplete: function (settings, json) {

           $("#To_Scroll_List").find(".dataTables_scrollBodytable").attr("id");
            $("#"+dataTableId+" thead tr").remove();

            });

            DatatableSearch(dataTableId+"_wrapper table", "AverageUnitsPerLineReport");
        }     
    });  
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-09-05T10:20:47.623

在不使用类的情况下，您可以按照以下步骤操作：

1.  从表的主体中删除必须保持未排序的行。
2.  如果它是最后一行，则将要添加的行包含在表的页脚中。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-10-15T18:25:56.293

我在drawCallback中包括以下代码：

```
drawCallback: function(settings) {
    let td = $("td:contains('TOTAL')");
    if (td.length) {
        let row = td.closest('tr');
        let clonedRow = row.clone();
        row.remove();
        $('table tbody').append(clonedRow);
    }
} 
```

# drupal - Drupal 7 OG Group 在给定时间段后退订

> ID：11011337
> 
> 赞同：0
> 
> 时间：2012-06-13T08:53:04.193
> 
> 标签：drupal, drupal-7, subscription, organic-groups

我是 drupal 7 的新手，并且愿意从 OG Group 实施基于时间的取消订阅。

我在 OG Group 中添加了用户。我想对组中已经添加的用户实施基于时间的取消订阅，例如“计算机”。

用户说“Tony”今天已添加到“计算机”组，现在我希望用户“Tony”在订阅 3 个月（特定时间段）后从“计算机”组退订。

应向用户“Tony”发送通知消息。

所有过程都应基于系统当前日期和用户“Tony”加入“计算机”组的日期。

请帮助我解决任何问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T21:05:42.693

尝试使用规则模块：[http ://drupal.org/project/rules](http://drupal.org/project/rules)

启用该模块后，您可以创建一个规则（管理 » 配置 » 工作流 » 规则），每次在您的站点上运行 cron 时都会运行该规则。我假设 cron 每小时或每天运行一次。

在使用 cron 运行的新规则上，您必须添加几个操作

1.  从某个组中获取组成员
2.  循环这些成员
3.  退订每个用户

那对你有用吗？

* * *

添加：

另一件可以帮助您获得组和/或组成员列表的方法是安装和使用 Views Bulk Operations 模块：[http ://drupal.org/project/views_bulk_operations](http://drupal.org/project/views_bulk_operations)

规则与之集成，因此也许您可以执行以下操作：

1.  创建一个 VBO 视图，列出您有兴趣保持清洁的某个组中的所有成员。如果您愿意，可以将他们成为会员的时间用作您视图的过滤器...
2.  返回在 cron 上运行的规则并在“操作”下选择以下内容：“从 VBO 视图加载实体 ID 列表”（附截图） ![在此处输入图像描述](../Images/b9779e168e2c40f65a25e685b227390f.png)
3.  然后在这些用户上添加一个循环（第二个动作）
4.  然后为该循环添加一个取消订阅用户的操作（第三个操作）

# c# - 尝试检索图像时无图片显示

> ID：11011342
> 
> 赞同：0
> 
> 时间：2012-06-13T08:53:33.023
> 
> 标签：c#, wcf, windows-phone-7

我在数据库中的图像没有显示在窗口电话上。我只能在列表中获得 EmpNo，但图像没有出现在我的列表框中。我的编码有问题吗？

我在 MainPage.xaml 的编码是

```
<Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
        <Grid.Resources>
            <src:ImageConverter x:Key="imgConverter"/>
        </Grid.Resources>
        <ListBox Height="650" HorizontalAlignment="Left" Margin="11,17,0,0" Name="listBox1" VerticalAlignment="Top" Width="434" >
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="{Binding EmpNo}"/>
                        <Image Grid.Column="1" Grid.Row="4" Height="136" HorizontalAlignment="Left"
               Margin="16,16,0,0" Name="imgEmp" Stretch="Fill"
               VerticalAlignment="Top" Width="200"
                Source="{Binding EmpImage}"/>
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
 </Grid> 
```

我在 mainpage.xaml.cs 的编码是

```
public partial class MainPage : PhoneApplicationPage
{
    public MainPage()
    {
        InitializeComponent();
        Service1Client svc = new Service1Client();
        svc.GetAllModelsCompleted += new EventHandler<GetAllModelsCompletedEventArgs>(svc_GetAllModelsCompleted);
        svc.GetAllModelsAsync();
    }

    void svc_GetAllModelsCompleted(object sender, GetAllModelsCompletedEventArgs e)
    {
        listBox1.ItemsSource = e.Result;
    }
}
public class ImageConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        var memStream = new MemoryStream((byte[])value);
        memStream.Seek(0, SeekOrigin.Begin);
        var empImage = new BitmapImage();
        empImage.CreateOptions = BitmapCreateOptions.None;
        empImage.SetSource(memStream);
        return empImage;
    }
    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T08:55:59.333

尝试应用转换器：

```
Source="{Binding EmpImage, Converter={StaticResource imgConverter}}" 
```

# tsql - 从字符串转换日期和/或时间时转换失败错误

> ID：11011345
> 
> 赞同：4
> 
> 时间：2012-06-13T08:53:37.673
> 
> 标签：tsql, sql-server-2008-r2

```
Select CONVERT(Date, '13-5-2012') 
```

当我在 Management Studio 中运行上述 T-SQL 语句时，我得到以下错误：

**“从字符串转换日期和/或时间时转换失败”**

有没有我可以将该值成功转换为有效的 Date 类型？我在 nvarchar(255) 列中有这样的值，我想将其数据类型更改为 SQL Server 表中的日期类型，但我遇到了该错误，我想首先在表上的更新语句中进行转换。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-13T09:06:50.610

指定您使用的日期格式：

```
Select CONVERT(Date, '13-5-2012', 105) 
```

105 表示带有世纪的意大利日期格式 (dd-mm-yyyy)。

参考：http: [//msdn.microsoft.com/en-us/library/ms187928.aspx](http://msdn.microsoft.com/en-us/library/ms187928.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-13T09:06:21.667

一般来说，我怀疑通常存在无法在列中转换的数据，并且会使用 case 语句首先检查它是否可转换：

```
SELECT CASE WHEN ISDATE(mycolumn)=1 THEN CONVERT(Date, mycolumn, [style]) END
FROM mytable 
```

我相信`Convert`依赖于 SQL Server 日期格式设置。请使用 . 检查您的日期格式设置`DBCC USEROPTIONS`。

我怀疑如果您将日期格式设置为`dmy`它会理解：

```
SET DATEFORMAT dmy
GO 
```

如果即使那样它也不起作用，您也找不到与您的数据匹配的样式，并且如果您的数据格式一致，则需要手动字符串操作来构建它（如果您能提供帮助，请不要这样做它）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T08:57:09.043

试试这个....

```
Select CONVERT(Date,'5-13-2012') 
```

使用“mm-dd-yyyy”格式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-15T22:01:12.050

CONVERT 假定原始数据可以表示日期。一个错误的数据项可能会引发与此处提到的相同的转换错误，而不会指出问题所在。

使用 ISDATE 帮助我绕过了错误的数据项。

SELECT CONVERT(DATE, CONVERT(CHAR(8), FieldName)) FROM DBName WHERE ISDATE(FieldName) <> 0

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-30T10:58:14.710

You need to give the date format while conversion, this will resolve the error.

select convert(date, '13-5-2012' ,103)

# ios - 检测 NSString 中的 URL

> ID：11011355
> 
> 赞同：6
> 
> 时间：2012-06-13T08:54:09.270
> 
> 标签：ios, regex, cocoa-touch, uilabel, uitextview

我目前正在使用 a`UITextView`以`UITableViewCell`使链接可点击，但这会带来非常糟糕的性能。

所以我想知道是否可以检测 a`NSString`中的链接，如果有链接，请使用`UITextView`，否则只需使用 a `UILabel`。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-13T08:59:46.043

绝对地。使用 NSDataDetector（[NSDataDetector 类参考](https://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSDataDetector_Class/Reference/Reference.html)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T09:01:04.780

我猜你熟悉正则表达式来检测 URL，所以为了在你的单元格中获得一种或另一种类型的视图，你可以简单地`UITableViewCell`从你的`tableView:cellForRowAtIndexPath:`方法中返回两个不同的 s。

它可能看起来像这样（请注意，在未测试的浏览器中输入）：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    NSString *dataString = // Get your string from the data model

    // Simple pattern found here: http://regexlib.com/Search.aspx?k=URL
    NSString *URLpattern = @"^http\\://[a-zA-Z0-9\-\.]+\\.[a-zA-Z]{2,3}(/\\S*)?$";

    NSError *error = NULL;
    NSRegularExpression *URLregex = [NSRegularExpression regularExpressionWithPattern:URLpattern
                                                                              options:NSRegularExpressionCaseInsensitive
                                                                                error: &error];

    NSUInteger numberOfMatches = [URLregex numberOfMatchesInString:string
                                                    options:0
                                                      range:NSMakeRange(0, [string length])];

    if ( numberOfMatches == 0 ) {
        static NSString *PlainCellIdentifier = @"PlainCellIdentifier";

        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:MyIdentifier];
        if (cell == nil) {
            cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:MyIdentifier] autorelease];
        }
        cell.textLabel.text = timeZoneWrapper.localeName;
    }
    else {
        static NSString *FancyCellIdentifier = @"FancyCellIdentifier";

        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:MyIdentifier];
        if (cell == nil) {
            cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:MyIdentifier] autorelease];
        }

        // Configure cell view with text view here
    }

    return cell;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-23T09:36:08.637

使用这段代码，您将能够使用 NSDataDetector**在 UILable 中找到并获取 http url**：

```
NSDataDetector* detector = [NSDataDetector dataDetectorWithTypes:NSTextCheckingTypeLink error:nil];
                NSArray* matches = [detector matchesInString:yourString options:0 range:NSMakeRange(0,  [yourString. length])];
                NSLog(@"%@",matches) ;
                NSMutableAttributedString *MylabelAttributes = 
    [[NSMutableAttributedString alloc] initWithString:yourString];
                for (int index = 0 ; index < matches.count; index ++) {
                NSTextCheckingResult *textResult = [matches objectAtIndex : index]; 
                NSTextCheckingType textResultType = textResult.resultType;
                NSRange testRange = textResult.range;
                NSURL *testUrl = textResult.URL ;}

After applying this code, you will be able to attribute your `UILabel` text:

    [MylabelAttributes addAttribute:NSLinkAttributeName value:testUrl  range: testRange];
    [MylabelAttributes addAttribute:NSFontAttributeName                       
    value:[UIFont boldSystemFontOfSize:7.0]range:NSMakeRange(0,yourString.length)]; 
```

# java - 来自 javapns 的成功推送通知，但未显示在 ios 设备上

> ID：11011357
> 
> 赞同：2
> 
> 时间：2012-06-13T08:54:14.193
> 
> 标签：java, ios, apple-push-notifications

我正在使用 javapns 2.2 发送推送通知并从中获得成功的响应，但通知未显示在我的 iOS 测试手机上。我创建了一个使用来自 wiki 的代码的单元测试：

```
@Test
public void shouldSendATestMessageNotifyingDeviceThatNewMessageIsReady()
        throws RepositoryException {
    NotificationService nService = new NotificationService();
    nService.sendNotification("incoming message",
            "4854862ec7b58a939538f2e1262a48a7e8a3331c5f0e11feb11e1a79ff764649");
}

public void sendNotification(String message, String deviceId) {
    try {
        List<PushedNotification> notifications = Push.alert(message, certLocation, certPassword, false,
                deviceId);
        for (PushedNotification notification : notifications) {
            if (notification.isSuccessful()) {
                    /* Apple accepted the notification and should deliver it */  
                    System.out.println("Push notification sent successfully to: " +
                                                    notification.getDevice().getToken());
                    /* Still need to query the Feedback Service regularly */  
            } else {
                    String invalidToken = notification.getDevice().getToken();
                    /* Add code here to remove invalidToken from your database */  

                    /* Find out more about what the problem was */  
                    Exception theProblem = notification.getException();
                    theProblem.printStackTrace();

                    /* If the problem was an error-response packet returned by Apple, get it */  
                    ResponsePacket theErrorResponse = notification.getResponse();
                    if (theErrorResponse != null) {
                            System.out.println(theErrorResponse.getMessage());
                    }
            }
    }
    } catch (CommunicationException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (KeystoreException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

我正在使用我在钥匙串中创建的生产推送 SSL 证书 (p12)。我在我的 iOS 设备上有一个临时构建，我从我的 iOS 应用程序中的代码中提取了我通过此测试的设备 ID，`NSLog`用于我用于测试的设备，因此它是有效的。

我用开发证书交换了我的产品证书，并得到了无效的令牌错误，因为我希望确保它正在找到文件。

不知道还有什么可以看的，因为 javapns 告诉我推送的消息已成功发送。想法？

# java - 如何在使用 Ant/Jenkins 时签出同一 Java 项目的不同 Subversion 标签/分支？

> ID：11011358
> 
> 赞同：4
> 
> 时间：2012-06-13T08:54:14.610
> 
> 标签：java, jenkins, svn, svn-checkout

> 这是我的开发配置：
> 
> 在 Subversion 下，
> 
> -我有我的 project_X/trunk（带有我最新的开发），
> -我有我的 project_X/tags（带有不同的版本），
> -我正在考虑添加一个分支文件夹。
> 
> 我正在使用 Jenkins 使用 Ant 脚本构建我的 project_X/trunk。我的 Ant 脚本做了很多事情，它检查、编译、创建带有图表的文档、运行单元测试、执行 pmd、创建一个 jar 并压缩所有内容。

**我希望能够在同一项目的标签或分支（以及主干）上使用我的 Ant 脚本。**

最简单的方法是什么：

我认为这只是检查 Subversion 存储库的正确路径的问题，对吗？

- 如果我是正确的，我应该让 Subversion 的路径是动态的。
- 在我的 Ant 脚本中，我的 Subversion 路径应该是一个变量吗？
- 如何从 Jenkins 的界面传递路径值？
- 是否有一个插件可以让我将 Subversion 路径值从 Jenkins 传递到 Ant 脚本？
- 或者我应该在 Jenkins 中创建一个新工作（使用相同的脚本但不同的路径）？

希望

提前感谢您的帮助，
最好的问候，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T09:04:09.963

您应该通过标签/分支名称参数化您的构建。最简单的方法是向您的 Jenkins 作业添加一个参数（例如*SVN_BRANCH_DIR*），该参数将具有诸如`trunk`, `branches/branch1`,之类的值`tags/sometag`。

现在，如果您使用 Jenkins ANT 构建步骤，该参数将作为属性自动传递给您的 ANT 脚本（通过 ANT`-D`选项）。所以你可以`${SVN_BRANCH_DIR}`在其中使用（例如`svn://myserver/myrepo/${SVN_BRANCH_DIR}`）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T15:52:05.303

自 1.24 版（2011 年 3 月 22 日）起，Jenkins [Subversion 插件提供了“列出 subversion tags（和更多）”项目参数。](https://wiki.jenkins-ci.org/display/JENKINS/Subversion+Plugin)

字面上地，

> 使用时，此参数将在构建时显示一个字段，以便用户能够选择一个 Subversion 标记，从中为该项目创建工作副本。一旦设置了 Name 和 Repository URL 两个字段，您必须 (1) 确保作业使用 Subversion，并且 (2) 通过连接此参数的两个字段来设置 Subversion 的 Repository URL 字段。例如，如果 Name 设置为 SVN_TAG 并且 Repository URL 设置为[https://svn.jenkins-ci.org/tags](https://svn.jenkins-ci.org/tags)，那么 Subversion 的 Repository URL 必须设置为[https://svn.jenkins-ci.org/tags /](https://svn.jenkins-ci.org/tags/) $SVN_TAG。请注意，您可以将 Repository URL 字段设置为 Subversion 存储库根目录，而不仅仅是指向标签目录（即，您可以将其设置为[https://svn.jenkins-ci.org](https://svn.jenkins-ci.org)而不是[https://svn.jenkins-ci.org/tags](https://svn.jenkins-ci.org/tags)）。在这种情况下，如果此存储库根目录包含主干、分支和标签文件夹，则下拉菜单将允许用户选择主干、分支或标签。

对于无人值守的集成构建，您可以使用默认的“主干”参数值。

我希望这有帮助。

# ant - 在使用 ant 工具构建时，我遇到了错误

> ID：11011359
> 
> 赞同：0
> 
> 时间：2012-06-13T08:54:18.827
> 
> 标签：ant, izpack

使用 ant 工具构建时出现错误

```
installer.izpack.exe:
     [exec] Traceback (most recent call last):
     [exec]   File "C:\PROGRA~1\IzPack/utils/wrappers/izpack2exe/izpack2exe.py", line 126, in <module>
     [exec]     main()
     [exec]   File "C:\PROGRA~1\IzPack/utils/wrappers/izpack2exe/izpack2exe.py", line 123, in main
     [exec]     create_exe(parse_options())
     [exec]   File "C:\PROGRA~1\IzPack/utils/wrappers/izpack2exe/izpack2exe.py", line 77, in create_exe
     [exec]     subprocess.call(p7zcmd, shell=use_shell)
     [exec]   File "C:\Python27\lib\subprocess.py", line 493, in call
     [exec]     return Popen(*popenargs, **kwargs).wait()
     [exec]   File "C:\Python27\lib\subprocess.py", line 679, in __init__
     [exec]     errread, errwrite)
     [exec]   File "C:\Python27\lib\subprocess.py", line 896, in _execute_child
     [exec]     startupinfo)
     [exec] WindowsError: [Error 193] %1 is not a valid Win32 application

BUILD FAILED
E:\Java Projects\Spark Projects\EastIT - Copy\build\build.xml:873: exec returned: 1 
```

下面是出现错误的代码。

```
<target name="installer.izpack.exe" depends="installer.izpack" description="build release executable izpack installer">
        <exec executable="python" failonerror="true">
            <arg line="${installer.izpack.dir}/utils/wrappers/izpack2exe/izpack2exe.py"/>
            <arg line="--file=${basedir}/installer/EasyIT-installer.jar"/>
            <arg line="--output=${basedir}/installer/EasyIT-installer.exe"/>
            <arg line="--no-upx"/>
        </exec>
    </target> 
```

请任何人都可以弄清楚如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-03T15:11:33.843

我在 Windows 7 x64 机器上手动运行 izpack2exe.py 脚本时遇到了同样的问题。我对python脚本做了一些调整，现在看起来如下：

```
import os
import sys
import subprocess
import shutil
import optparse
import shlex

def parse_options():
    parser = optparse.OptionParser()
    parser.add_option("--file", action="append", dest="file",
                      help="The installer JAR file / files")
    parser.add_option("--output", action="store", dest="output",
                      default="setup.exe",
                      help="The executable file")
    parser.add_option("--with-jdk", action="store", dest="with_jre", default="",
      help="The bundled JRE to run the exe independently of the system resources. ")  # choosen JDK that may came with the package
    parser.add_option("--with-7z", action="store", dest="p7z",
                      default="7za",
                      help="Path to the 7-Zip executable")
    parser.add_option("--with-upx", action="store", dest="upx",
                      default="upx",
                      help="Path to the UPX executable")
    parser.add_option("--no-upx", action="store_true", dest="no_upx",
                      default=False,
                      help="Do not use UPX to further compress the output")
    parser.add_option("--launch-file", action="store", dest="launch",
                      default="",
                      help="File to launch after extract")
    parser.add_option("--launch-args", action="store", dest="launchargs",
                      default="",
                      help="Arguments for file to launch after extract")
    parser.add_option("--name", action="store", dest="name",
                      default="IzPack",
                      help="Name of package for title bar and prompts")
    parser.add_option("--prompt", action="store_true", dest="prompt",
                      default=False,
                      help="Prompt the user before extraction?")
    (options, args) = parser.parse_args()
    if (options.file is None):
        parser.error("no installer file has been given")
    return options

def create_exe(settings):
    if len(settings.file) > 0:
        filename = os.path.basename(settings.file[0])
    else:
        filename = ''

    if len(settings.with_jre) > 0:
        jdk = os.path.basename(settings.with_jre) #inside the jdk/jre that was given, there must be a bin/java.exe file
        jdk = jdk + "\\bin\\javaw.exe"
        print(jdk)
        settings.file.append(settings.with_jre) #jdk/jre is going in the package
    else:
        jdk = 'javaw' #java is added somehow to the PATH

    if settings.p7z == '7za':
        p7z = os.path.join(os.path.dirname(sys.argv[0]), '7za')
    else:
        p7z = settings.p7z

    # really no need right now
    # use_shell = sys.platform != 'win32'

    if (os.access('installer.7z', os.F_OK)):
        os.remove('installer.7z')
    files = '" "'.join(settings.file)
    p7zcmd = '7za.exe a -mmt -t7z -mx=9 installer.7z "%s"' % files
    zip_proc = subprocess.Popen(shlex.split(p7zcmd))
    zip_proc.communicate()

    config = open('config.txt', 'w')
    config.write(';!@Install@!UTF-8!\n')
    config.write('Title="%s"\n' % settings.name)
    if settings.prompt:
        config.write('BeginPrompt="Install %s?"\n' % settings.name)
    config.write('Progress="yes"\n')

    if settings.launch == '':
        config.write('ExecuteFile="' + jdk + '"\n') # who is going to run my installer.jar?
        config.write('ExecuteParameters="-jar \\\"%s\\\"' % filename)
        if settings.launchargs != '':
            config.write(' %s"\n' % settings.launchargs)
        else:
            config.write('"\n') 
    else:
        config.write('ExecuteFile="%s"\n' % settings.launch)
        if settings.launchargs != '':
            config.write('ExecuteParameters="%s"\n' % settings.launchargs)

    config.write(';!@InstallEnd@!\n')
    config.close()

    sfx = os.path.join(os.path.dirname(p7z), '7zS.sfx')
    files = [sfx, 'config.txt', 'installer.7z']

    output = open(settings.output, 'wb')
    for f in files:
        in_file = open(f, 'rb')
        shutil.copyfileobj(in_file, output, 2048)
        in_file.close()
    output.close()

    if (not settings.no_upx):
        if settings.upx == 'upx':
            upx = os.path.join(os.path.dirname(sys.argv[0]), 'upx')
        else:
            upx = settings.upx
        upx = 'upx.exe --ultra-brute "%s"' % settings.output
        upx_proc = subprocess.Popen(shlex.split(upx))
        upx_proc.communicate()

    os.remove('config.txt')
    os.remove('installer.7z')

def main():
    create_exe(parse_options())

if __name__ == "__main__":
    main() 
```

我将 7za.exe 静态放在 p7zcmd 变量中，这不会导致问题，因为它在我的路径上。我阻止脚本执行，直到子进程完成（分别为 7zip 和 upx）解决了我的问题。

希望我能帮助你。

问候

# sql-server - 约束检查：TRY/CATCH vs Exists()

> ID：11011364
> 
> 赞同：8
> 
> 时间：2012-06-13T08:54:36.353
> 
> 标签：sql-server, sql-server-2008, sql-server-2005

我有一个具有唯一约束的表：

```
create table dbo.MyTab
(
    MyTabID int primary key identity,
    SomeValue nvarchar(50)
);
Create Unique Index IX_UQ_SomeValue 
On dbo.MyTab(SomeValue);
Go 
```

哪个代码更适合检查重复项（如果找到重复项，则成功 = 0）？

**选项1**

```
Declare @someValue nvarchar(50) = 'aaa'
Declare @success bit = 1;
Begin Try 
    Insert Into MyTab(SomeValue) Values ('aaa');
End Try
Begin Catch
    -- lets assume that only constraint errors can happen
    Set @success = 0;
End Catch
Select @success 
```

**选项 2**

```
Declare @someValue nvarchar(50) = 'aaa'
Declare @success bit = 1;
IF EXISTS (Select 1 From MyTab Where SomeValue = @someValue)
    Set @success = 0;
Else 
    Insert Into MyTab(SomeValue) Values ('aaa');
Select @success 
```

从我的角度来看 - 我确实相信这`Try/Catch`是因为错误，这是不期望的（比如死锁，甚至在不期望重复时的约束）。在这种情况下 - 有时用户可能会尝试提交副本，因此会出现错误。

我发现[Aaron Bertrand 的文章](http://www.mssqltips.com/sqlservertip/2632/checking-for-potential-constraint-violations-before-entering-sql-server-try-and-catch-logic/)指出，即使大多数插入成功，检查重复项也不会慢很多。

网上也有大量使用 Try/Catch 的建议（以避免 2 个语句而不是 1 个语句）。在我的环境中，可能只有 1% 的不成功案例，所以这也是有道理的。

你有什么意见？使用选项 1 或选项 2 的其他原因是什么？

更新：我不确定在这种情况下它是否重要，但表有而不是更新触发器（出于审计目的 - 行删除也通过更新语句发生）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T09:03:53.427

我看过那篇文章，但请注意，对于低失败率，我更喜欢“JFDI”模式。我以前在大容量系统上使用过它（40k 行/秒）。

在 Aaron 的代码中，在高负载和大量写入的情况下首次测试时，您仍然可以得到重复。（在[dba.se](https://dba.stackexchange.com/a/9814/630)上解释）这很重要：你的重复仍然会发生，只是不那么频繁了。您仍然需要异常处理并知道何时忽略重复错误 (2627)

编辑：Remus在另一个答案中简洁地解释了

但是，我将有一个单独的 TRY/CATCH 来*仅*测试重复错误

```
BEGIN TRY

-- stuff

  BEGIN TRY
     INSERT etc
  END TRY
  BEGIN CATCH
      IF ERROR_NUMBER() <> 2627
        RAISERROR etc
  END CATCH

--more stuff

BEGIN CATCH
    RAISERROR etc
END CATCH 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T09:11:30.740

首先，这`EXISTS(SELECT ...)`是不正确的，因为它在并发下失败：多个事务可以同时运行检查*并且*都得出结论它们必须插入，一个将是第一个插入的幸运赢家，其余的将违反约束。换句话说，您在检查和插入之间存在竞争条件。*所以无论如何*你都必须尝试/捕捉，所以最好尝试/捕捉。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T09:02:28.753

## 错误记录

不要因为这个而抓住我，但是当抛出异常时可能会有日志记录的影响。如果您在插入之前检查，则不会发生这种情况。

## 知道为什么和什么时候它可以打破

try/catch 块应该用于可能因*非确定性*原因而中断的部分。我会说在您的情况下检查现有记录会更明智，因为您知道它可能会破坏以及为什么会破坏。因此，从开发人员的角度来看，自己检查是一种更好的方法。

但是在您的代码中，它可能仍然会在插入时中断，因为在检查时间和插入时间之间，其他用户已经插入了它......但这是（如前所述）非确定性错误。这就是为什么你：

1.  应该检查`exists`
2.  插入`try/catch`

## 不言自明的代码

另一个积极的方面是，从代码中可以清楚地看到为什么它会中断，而 try/catch 块可以隐藏它，人们可能会认为*为什么会在这里，它只是插入记录*......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T18:25:03.470

选项 - 3

```
Begin Try
    SET XACT_ABORT ON
    Begin Tran
        IF NOT EXISTS (Select 1 From MyTab Where SomeValue = @someValue)
        Begin
            Insert Into MyTab(SomeValue) Values ('aaa');
        End
    Commit Tran
End Try

begin Catch
    Rollback Tran
End Catch 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T09:13:24.833

为什么不在表上实现`INSTEAD OF INSERT`触发器？您可以检查该行是否存在，如果存在则不执行任何操作，如果不存在则插入该行。

# meteor - 如何使用meteor.js在第一个下拉菜单的变化上显示第二个下拉菜单？

> ID：11011365
> 
> 赞同：1
> 
> 时间：2012-06-13T08:54:37.370
> 
> 标签：meteor

我在一行中有两个下拉菜单。我想显示由两个下拉列表组成的第二行，这些下拉列表将使用meteor.js 中的jquery fadeIn() 命令显示第一个下拉列表的变化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T18:07:59.413

要使第二个下拉列表在第一个下拉列表的 onchange 时可见，
您可以在模板事件属性中执行此操作。使用事件属性，您可以将函数绑定到事件（如 jquery），这些事件将在发生绑定事件时执行。

看看[http://docs.meteor.com/#templates](http://docs.meteor.com/#templates)

# riak - 使用 riak 预提交钩子来验证 json 模式

> ID：11011366
> 
> 赞同：1
> 
> 时间：2012-06-13T08:54:38.763
> 
> 标签：riak, jsonschema

我想在 riak 中使用预提交挂钩来验证提交数据的 json 模式

json-schema.org 上的 javascript 中有许多实现

[http://json-schema.org/implementations.html](http://json-schema.org/implementations.html)

有没有办法将一个或多个外部库加载到 riak 中，这样我就可以在提交前和提交后挂钩中使用它们

最好还有外部模式定义文件（或至少从存储桶中加载它们）

我使用多种语言的客户端向 riak 提交数据，如果 riak 可以对所有提交的数据进行验证，那将是理想的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T12:40:41.703

好的，我从邮件列表中得到了我的遮阳篷，

> 是的。对于 JavaScript，这可以在 app.config 中的 'riak_kv' 设置中的 'js_source_dir' 中完成：
> 
> `{js_source_dir, "/etc/riak/javascript"},`

# android - 何时在活动中读取视图的属性（例如宽度）？

> ID：11011369
> 
> 赞同：0
> 
> 时间：2012-06-13T08:54:50.787
> 
> 标签：android, view, properties, tableview, creation

我填充方法`TableLayout`。`OnCreate(..)`我想获得表格每一列的宽度。问题是在`OnCreate(...)`方法视图中将宽度设置为 0。收集表格宽度的正确位置在哪里？

我也尝试过`OnStart(...)`（来自文档“当活动对用户可见时调用。”）但结果是一样的。

更简单的示例显示了问题（与上面的描述不同）：

```
package xliiv.hello;

import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.Toast;

public class __helloworldActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        tv = (Button) findViewById(R.id.button1);
        int width = tv.getWidth();
        //this width will be 0! I expect that textview widths is not 0
        Log.i("tag", "" + width);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T10:50:00.533

你应该这样做`onWindowFocusChanged()`，这将给出确切的宽度

试试这个：

```
@Override
public void onWindowFocusChanged(boolean hasFocus) {
    // TODO Auto-generated method stub
    super.onWindowFocusChanged(hasFocus);

    int width = findViewById(R.id.button1).getWidth();

    Log.i("tag", "" + width);

} 
```

# python - 使用 PyInstaller 制作的 pyOpenGL exe 给出属性错误

> ID：11011373
> 
> 赞同：3
> 
> 时间：2012-06-13T08:54:59.973
> 
> 标签：python, wxpython, pyopengl, pyinstaller

我正在尝试将 pyOpenGL 示例中的课程 18.py 制作为 exe，但是在编译时会出现此错误：

```
Traceback (most recent call last):
  File "<string>", line 46, in <module>
  File "C:\pyinstaller-1.5.1\iu.py", line 436, in importHook
    mod = _self_doimport(nm, ctx, fqname)
  File "C:\pyinstaller-1.5.1\iu.py", line 521, in doimport
    exec co in mod.__dict__
  File "pyinstall\build\pyi.win32\lesson18\outPYZ1.pyz/OpenGL.GL", line 3, in <m
odule>
  File "C:\pyinstaller-1.5.1\iu.py", line 436, in importHook
    mod = _self_doimport(nm, ctx, fqname)
  File "C:\pyinstaller-1.5.1\iu.py", line 521, in doimport
    exec co in mod.__dict__
  File "pyinstall\build\pyi.win32\lesson18\outPYZ1.pyz/OpenGL.GL.VERSION.GL_1_1"
, line 10, in <module>
  File "C:\pyinstaller-1.5.1\iu.py", line 477, in importHook
    mod = self.doimport(nm, ctx, ctx+'.'+nm)
  File "C:\pyinstaller-1.5.1\iu.py", line 521, in doimport
    exec co in mod.__dict__
  File "pyinstall\build\pyi.win32\lesson18\outPYZ1.pyz/OpenGL.arrays", line 22,
in <module>
  File "pyinstall\build\pyi.win32\lesson18\outPYZ1.pyz/OpenGL.arrays.formathandl
er", line 28, in loadAll
  File "pyinstall\build\pyi.win32\lesson18\outPYZ1.pyz/OpenGL.arrays.formathandl
er", line 35, in loadPlugin
  File "pyinstall\build\pyi.win32\lesson18\outPYZ1.pyz/OpenGL.plugins", line 14,
 in load
  File "pyinstall\build\pyi.win32\lesson18\outPYZ1.pyz/OpenGL.plugins", line 28,
 in importByName
  File "C:\pyinstaller-1.5.1\iu.py", line 436, in importHook
    mod = _self_doimport(nm, ctx, fqname)
  File "C:\pyinstaller-1.5.1\iu.py", line 521, in doimport
    exec co in mod.__dict__
  File "pyinstall\build\pyi.win32\lesson18\outPYZ1.pyz/OpenGL.arrays.vbo", line
430, in <module>
AttributeError: 'module' object has no attribute 'GL_READ_WRITE'
Press any key to continue . . . 
```

所有使用 pyOpenGL 的程序（包括我自己的程序）都会发生这种情况，错误是一样的。

是否有任何其他技巧（导入等）可以使用 pyInstaller 制作工作可执行文件（我知道有 py2exe，但我更喜欢 pyInstaller）？

我的 python 版本是 2.7 pyOpenGL 版本：3.0.2a5 pyinstaller 版本：1.5.1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T09:05:02.477

我找到了解决这个特定问题的方法！

它是关于 PyOpenGL 版本的。Pyinstaller 适用于 PyOpenGL 3.0.1b1 版

你可以在这里下载它：http: [//sourceforge.net/projects/pyopengl/files/PyOpenGL/](http://sourceforge.net/projects/pyopengl/files/PyOpenGL/)并自己编译。不要忘记从站点包文件夹中删除旧的 PyOpenGL 版本！您可以在执行以下操作的系统上检查 PyOpenGL 的活动版本：

```
>>>import pkg_resources
>>>pkg_resources.get_distribution("PyOpenGL").version
>>>'3.0.1b1' 
```

# knockout.js - knockout.js 绑定到静态数据

> ID：11011374
> 
> 赞同：3
> 
> 时间：2012-06-13T08:55:01.667
> 
> 标签：knockout.js

绑定到现有静态数据的建议方法是什么？我必须将它包含在视图模型中，因为它用于计算值。

[http://jsfiddle.net/z2ykC/4/](http://jsfiddle.net/z2ykC/4/)

```
<div id="sum" data-bind="text: sum">
</div>
<div class="line">
    dynamic: <span data-bind="text: dynamicValue"></span>
    static: <span data-bind="text: staticValue">312</span>
    <button data-bind="click: getDataFromServer">get data</button>
</div>
<div class="line">
    dynamic: <span data-bind="text: dynamicValue"></span>
    static: <span data-bind="text: staticValue">123</span>
    <button data-bind="click: getDataFromServer">get data</button>
</div> 
```

​</p>

```
function SumViewModel(lines){
    this.sum = ko.computed(function(){
        var value = 0;
        $.each(lines, function(index, element){
            var staticValue = element.staticValue();
            if (staticValue)
                value += staticValue;
            var dynamicValue = element.dynamicValue();
            if (dynamicValue)
                value += dynamicValue;
            value += dynamicValue;
        });
        return value;
    });
}

function LineViewModel() {

    this.randomNumber = function(max) {
        return Math.floor((Math.random() * max) + 1);
    };

    this.dynamicValue = ko.observable(0);
    this.staticValue = ko.observable();

    this.getDataFromServer = function() {
        this.dynamicValue(this.randomNumber(300));
    };

};

var lines = [];
$('.line').each(function(index, element) {
    var line = new LineViewModel()
    //line.staticValue(parseInt($('[data-bind*="staticValue"]', element).text()));
    lines.push(line);
    ko.applyBindings(line, element);
});
var sum = new SumViewModel(lines);
ko.applyBindings(sum, $('#sum')[0]); 
```

​</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T10:35:37.250

您可以查看创建自定义绑定，该绑定将初始化 staticValue 可观察对象。这是一个工作小提琴：

[http://jsfiddle.net/z2ykC/6/](http://jsfiddle.net/z2ykC/6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T09:50:47.367

您的视图效率低下，最好使用 foreach 绑定来渲染线条。如果您需要视图模型中的数据，它属于视图模型，或者应该从服务器获取。不要放入视图并将其提取回来。

```
function SumViewModel(lines) {
    // ...
    this.lines = lines;
}

function LineViewModel(staticValue) {
    // ...
    this.staticValue = ko.observable(staticValue);
}

var staticValues = [312, 123];
var lines = [];

$.each(staticValues, function(index, value) {
    lines.push( new LineViewModel(value) );
});

ko.applyBindings( new SumViewModel(lines) ); 
```

[http://jsfiddle.net/z2ykC/5/](http://jsfiddle.net/z2ykC/5/)

​</p>

# c# - 网格视图更新错误

> ID：11011378
> 
> 赞同：0
> 
> 时间：2012-06-13T08:55:26.627
> 
> 标签：c#, asp.net, .net, visual-studio-2010, oracle11g

这是我在网格视图中更新的 coe。当我执行它时，编辑命令可以正常工作，但是当我单击更新时，我的 cmd.ExecuteNonQuery() 旁边会弹出此错误；“无法将参数值从字符串转换为十进制。” 请在这里帮助我。如果我有另一种方法可以将详细信息添加到数据库中，请提前告诉我谢谢。:)

```
protected void GridView1_RowUpdating(object sender, GridViewUpdateEventArgs e)
{
    string v =   System.Configuration.ConfigurationManager.ConnectionStrings["harish"].ConnectionString;
    con = new OracleConnection(v);
    con.Open();

    string query = "update leave_module1 set name=:name,desig=:desig,srno=:srno,tol=:tol,compdates=:compdates,fd=:fd,td=:td,noofdays=:nod,remarks=:remarks";
    OracleCommand cmd = new OracleCommand(query, con);
        cmd.Parameters.Add(":name", OracleType.VarChar, 50).Value = GridView1.Rows[e.RowIndex].Cells[0].Text;
        cmd.Parameters.Add(":desig", OracleType.VarChar, 30).Value = GridView1.Rows[e.RowIndex].Cells[1].Text;
        cmd.Parameters.Add(":srno", OracleType.Number, 8).Value = GridView1.Rows[e.RowIndex].Cells[2].Text;
        cmd.Parameters.Add(":tol", OracleType.VarChar, 10).Value = GridView1.Rows[e.RowIndex].Cells[3].Text;
        cmd.Parameters.Add(":compdates", OracleType.VarChar, 30).Value = GridView1.Rows[e.RowIndex].Cells[4].Text;
        cmd.Parameters.Add(":fd", OracleType.DateTime).Value = GridView1.Rows[e.RowIndex].Cells[5].Text;
        cmd.Parameters.Add(":td", OracleType.DateTime).Value = GridView1.Rows[e.RowIndex].Cells[6].Text;
        cmd.Parameters.Add(":nod", OracleType.Number, 3).Value = GridView1.Rows[e.RowIndex].Cells[7].Text;
        cmd.Parameters.Add(":remarks", OracleType.VarChar, 50).Value = GridView1.Rows[e.RowIndex].Cells[8].Text;

        cmd.ExecuteNonQuery();
        ClientScript.RegisterStartupScript(Page.GetType(), "validation", "<script language='javascript'>alert('The Data has been added');window.location='Default2.aspx';</script>;");

        cmd.Dispose();
        con.Close();    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T09:00:54.090

将字符串转换为十进制：

```
 cmd.Parameters.Add(":srno", OracleType.Number, 8).Value = Convert.ToDecimal(GridView1.Rows[e.RowIndex].Cells[2].Text);
    cmd.Parameters.Add(":nod", OracleType.Number, 3).Value = Convert.ToDecimal(GridView1.Rows[e.RowIndex].Cells[7].Text); 
```

将字符串转换为日期时间：

```
 cmd.Parameters.Add(":fd", OracleType.DateTime).Value = DateTime.Parse(GridView1.Rows[e.RowIndex].Cells[5].Text);
    cmd.Parameters.Add(":td", OracleType.DateTime).Value = DateTime.Parse(GridView1.Rows[e.RowIndex].Cells[6].Text); 
```

在转换之前，检查字符串值是否不为空，如果任何一个为空，则分配默认的十进制/日期时间值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T09:25:25.670

*   不要在命名参数前加上冒号 (:)。Oracle 的 .NET Framework 数据提供程序自动提供冒号。
*   在分配给参数之前将参数转换为相关类型

    ```
    cmd.Parameters.Add("name", OracleType.VarChar, 50).Value = GridView1.Rows[e.RowIndex].Cells[0].Text; // this is ok 
    cmd.Parameters.Add("fd", OracleType.DateTime).Value = Convert.ToDateTime(GridView1.Rows[e.RowIndex].Cells[5].Text);
    cmd.Parameters.Add("nod", OracleType.Number, 3).Value = Convert.ToDecimal(GridView1.Rows[e.RowIndex].Cells[7].Text); 
    ```

*   采用`Using block`

    这是示例代码

    ```
    using (var connection = new OracleConnection(connectionString))
    {
        connection.Open();
        using (var command = new OracleCommand(queryString, connection))
        {
           // add parameters here 
           command.ExecuteNonQuery();
        }

     } 
    ```

# c++ - OpenCV 提取的描述符导致 valgrind 在被复制时报告无效读取

> ID：11011382
> 
> 赞同：1
> 
> 时间：2012-06-13T08:55:37.810
> 
> 标签：c++, opencv, memory-leaks, valgrind

我知道至少有十几个`valgrind reports invalid read`问题，但请耐心等待，因为我真的不知道如何帮助自己，所以我问你的。

我正在为 OpenCV 特征检测和特征描述模块编写一个包装器（我希望能够在某个时候实现我自己的特征检测/提取）。因此，我不能直接对 OpenCV 数据类型进行操作。

因此，当从特征中提取描述符时，我将它们存储为`std::vector <std::vector <double> >`而不是`cv::Mat`. 我有这段代码，我首先计算描述符，然后将它们从一种表示法转换为另一种表示法：

```
// private
void CVDescriptor::calculateDescriptors(std::vector <cv::KeyPoint> &feats){
    this->feats = &feats;
    this->descCalc->compute(*(this->image), feats, this->desc);
    this->calculated = true;  
}

// public
void CVDescriptor::calculateDescriptors
                         (std::vector< std::vector< double > >& desc,
                          std::vector< cv::KeyPoint >& feats){    

    if (!this->calculated)
        this->calculateDescriptors(feats);

    assert(this->calculated);

    const double *temp;
    desc.clear();
    desc.reserve(this->desc.rows);
    for (int i=0, szi = this->desc.rows; i < szi; ++i){
        temp = this->desc.ptr<double>(i);

        // this line is the problem
        desc.push_back(std::vector<double>(temp, temp+(this->desc.cols)));
        //  .
        // /|\
        //  |
    }

    assert(desc.size() == this->desc.rows);
    assert(desc[0].size() == this->desc.cols);
    return;
} 
```

以下是我的成员变量的类型，我已经检查并写入了初始化它们的位置（只是为了避免混淆）：

```
std::vector <cv::KeyPoint> *feats
cv::Mat *image;
    // it is set just before calling calculateDescriptors(desc, feats)
cv::Mat desc;
bool calculated; // set in the only constructor 
```

这[是`cv::DescriptorExtractor::compute`](http://opencv.willowgarage.com/documentation/cpp/features2d_common_interfaces_of_descriptor_extractors.html#cv-descriptorextractor-compute). 据我所见，每个计算的描述符应该是 中的一行`cv::Mat`，并且应该具有与矩阵的列一样多的组件。

* * *

我怀疑我的代码中某些地方存在内存泄漏，所以我通过*Valgrind*运行它。它报告的第一件事是`Invalid read of size 1`在我的代码摘录中标有大箭头的行上。据我所见，每次调用它只报告两次`CVDescriptor::calculateDescriptors(..)`，而不是在`for loop`.

任何人都可以看到我的复制代码有任何明显错误吗？或者有任何其他想法如何发生？

如果需要，我可以提供其他信息，但我尝试将所有相关代码放在这里（因为我的项目很大）。提前谢谢大家（我很抱歉这个冗长的问题）......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T10:12:42.860

我添加了在每次迭代中复制的内存块的起始地址和结束地址的打印输出，这揭示了问题。打印输出摘录：

```
copied from 0xc0d5990 -- 0xc0d5d90
copied from 0xc0d5b90 -- 0xc0d5f90
copied from 0xc0d5d90 -- 0xc0d6190
copied from 0xc0d5f90 -- 0xc0d6390
copied from 0xc0d6190 -- 0xc0d6590 
```

在每次迭代中，我不小心试图`cv::Mat`一次复制两行，因为我是通过指针访问它`double`，而存储的数据是`float`.

声明`temp`为 a`const float *temp;`并更改`temp`分配

```
temp = this->desc.ptr<float>(i); 
```

成功了。

# php - 在 kohana 中将值设置为 Form::select()

> ID：11011383
> 
> 赞同：1
> 
> 时间：2012-06-13T08:55:38.433
> 
> 标签：php, kohana, kohana-3

我的控制器是这样的

```
$content = View::factory('user/biochemistryTestForm')
                  ->bind('result', $result);
            $this->template->content = $content;
   //here $result is array of Datatbase records 
```

**在视野中**

```
<?php echo Form::select('allvalues', $result,null, null) ?>

this tag generate code to browser like this

<select name="allvalues">
<option value="0">Photo</option>
<option value="1">Kishore</option>
<option value="2">Chandrapal</option>
<option value="3">Framework</option>
</select> 
```

我想以编程方式为此标签设置值

帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T10:09:53.933

我不确定我是否完全理解这个问题，但无论如何我都会努力回答。

如果要将选择选项的值设置为数字以外的值，则需要将具有关联键的数组分配给`$result`控制器中的变量。

```
$result = array(
    'photo' => 'Photo',
    'kishore' => 'Kishore',
    'chandrapal' => 'Chandrapal',
    'framework' => 'Framework'
); 
```

**编辑：**我注意到您的`$result`变量从数据库中分配了一个数组，您还没有发布分配值的代码，`$result`所以我要在黑暗中刺伤。

您需要`->as_array('key','value')`在控制器中添加到数据库结果调用的末尾。该*键*将用作数组键，它将成为选择选项值，并且将使用该*值*和将成为选择选项标签的数组值。

**控制器**

```
$results = DB::select('name')
    ->from('things')
    ->execute()
    ->as_array('name', 'name'); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-13T09:27:59.723

如果你想为选择标签设置值，你可以使用 html 标签

```
<select name="allvalues">
<option value="Your value">Photo</option>
<option value="Your value">Kishore</option>
<option value="Your value">Chandrapal</option>
<option value="Your value">Framework</option>
</select> 
```

直接代替 kohana 标签

```
<?php echo Form::select('allvalues', $result,null, null) ?> 
```

# mysql - 如何在运行 SQL Update 语句之前对其进行测试？

> ID：11011384
> 
> 赞同：115
> 
> 时间：2012-06-13T08:55:38.743
> 
> 标签：mysql, sql, database, testing, myisam

在某些情况下，在生产环境中运行 UPDATE 语句可以节省时间。然而，一个无聊的更新可能比最初的问题更糟糕。

除了使用测试数据库之外，还有哪些选项可以告诉更新语句在运行之前会做什么？

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2015-07-15T21:46:47.430

交易呢？它们具有回滚功能。

@参见[https://dev.mysql.com/doc/refman/5.0/en/commit.html](https://dev.mysql.com/doc/refman/5.0/en/commit.html)

例如：

```
START TRANSACTION;
SELECT * FROM nicetable WHERE somthing=1;
UPDATE nicetable SET nicefield='VALUE' WHERE somthing=1;
SELECT * FROM nicetable WHERE somthing=1; #check

COMMIT;
# or if you want to reset changes 
ROLLBACK;

SELECT * FROM nicetable WHERE somthing=1; #should be the old value 
```

# 回答以下@rickozoe 的问题：

一般来说，这些行不会被执行一次。在 PHP fe 中，您会编写类似的东西（也许更简洁一些，但想快速回答 ;-)）：

```
$MysqlConnection->query('START TRANSACTION;');
$erg = $MysqlConnection->query('UPDATE MyGuests SET lastname='Doe' WHERE id=2;');
if($erg)
    $MysqlConnection->query('COMMIT;');
else
    $MysqlConnection->query('ROLLBACK;'); 
```

另一种方法是使用 MySQL 变量（参见[https://dev.mysql.com/doc/refman/5.7/en/user-variables.htm](https://dev.mysql.com/doc/refman/5.7/en/user-variables.html) l 和 [https://stackoverflow.com/a/18499823/1416909](https://stackoverflow.com/a/18499823/1416909) ）：

```
# do some stuff that should be conditionally rollbacked later on

SET @v1 := UPDATE MyGuests SET lastname='Doe' WHERE id=2;
IF(v1 < 1) THEN
    ROLLBACK;
ELSE
    COMMIT;
END IF; 
```

但我建议使用您最喜欢的编程语言中可用的语言包装器。

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2012-06-13T08:59:26.103

除了使用 Imad 所说的事务（无论如何这应该是强制性的）之外，您还可以通过使用与 UPDATE 相同的 WHERE 子句运行选择来执行完整性检查。

所以如果你 UPDATE 是

```
UPDATE foo
  SET bar = 42
WHERE col1 = 1
  AND col2 = 'foobar'; 
```

下面将显示哪些行将被更新：

```
SELECT *
FROM foo
WHERE col1 = 1
  AND col2 = 'foobar'; 
```

* * *

## 回答 #3

> 赞同：62
> 
> 时间：2012-06-13T08:57:28.017

自动提交关闭...

**MySQL**

```
set autocommit=0; 
```

它为当前会话设置自动提交关闭。

你执行你的语句，看看它发生了什么变化，然后如果它是错误的就回滚，或者如果它是你所期望的就提交！

编辑：使用事务而不是运行选择查询的好处是您可以轻松检查结果集。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-02-26T13:51:01.277

我知道这是其他答案的重复，但它有一些情感支持来采取额外的步骤来测试更新：D

对于测试更新，哈希 # 是你的朋友。

如果您有如下更新语句：

```
UPDATE 
wp_history
SET history_by="admin"
WHERE
history_ip LIKE '123%' 
```

您散列 UPDATE 和 SET 进行测试，然后将它们散列回：

```
SELECT * FROM
#UPDATE
wp_history
#SET history_by="admin"
WHERE
history_ip LIKE '123%' 
```

它适用于简单的陈述。

另一个实际强制性的解决方案是，每当在生产表上使用更新时获取副本（备份副本）。Phpmyadmin > 操作 > 复制：table_yearmonthday。<=100M 的表只需要几秒钟。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-06-13T09:08:23.973

不是一个直接的答案，但我已经看到了许多可以通过首先**输入`WHERE`子句**来避免的糟糕的 prod 数据情况！有时 a`WHERE 1 = 0`也可以帮助将工作声明安全地放在一起。并且查看估计的执行计划，这将估计受影响的行，可能很有用。除此之外，在您回滚的事务中，正如其他人所说。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-06-13T09:00:14.387

做一个`SELECT`，

就像你有

`UPDATE users SET id=0 WHERE name='jan'`

将其转换为

`SELECT * FROM users WHERE name='jan'`

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2020-10-17T23:26:32.267

另一种选择是向 MySQL 询问查询计划。这告诉你两件事：

*   查询中是否有语法错误，如果有则查询计划命令本身会失败
*   MySQL 计划如何执行查询，例如它将使用哪些索引

在 MySQL 和大多数 SQL 数据库中，查询计划命令是`describe`，所以你会这样做：

```
describe update ...; 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2018-10-13T18:01:20.500

在您要测试的这些情况下，最好只关注**当前**列值和**即将更新的**列值。

请查看我为更新 WHMCS 价格而编写的以下代码：

```
# UPDATE tblinvoiceitems AS ii

SELECT                        ###  JUST
    ii.amount AS old_value,   ###  FOR
    h.amount AS new_value     ###  TESTING
FROM tblinvoiceitems AS ii    ###  PURPOSES.

JOIN tblhosting AS h ON ii.relid = h.id
JOIN tblinvoices AS i ON ii.invoiceid = i.id

WHERE ii.amount <> h.amount   ### Show only updatable rows

# SET ii.amount = h.amount 
```

通过这种方式，我们可以清楚地将现有值与新值进行比较。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-06-13T08:59:18.250

`where`使用您在更新查询中应用的所有条件在同一张表上运行选择查询。

# logging - 在窗口中合并多个日志文件，带有时间戳

> ID：11011385
> 
> 赞同：0
> 
> 时间：2012-06-13T08:55:38.710
> 
> 标签：logging, command-line

我在 Windows 中有几个日志文件。每行的前导字符是时间戳，并且始终采用相同的格式。系统的不同模块创建单独的日志文件，但由于它们使用相同的日志模块，它们具有相同的格式

Windows下是否有任何命令行实用程序可以让我将这些文件与交错行合并？我希望能够“一目了然”地查看日志记录。

# android - 单元测试 Android 和权限

> ID：11011390
> 
> 赞同：8
> 
> 时间：2012-06-13T08:55:59.867
> 
> 标签：android, unit-testing, permissions, android-testing

我的 Android 应用程序的 junit 测试需要 android.permission.WRITE_SETTINGS。我在他们自己的模块中使用 IntelliJ Idea 11.1.2 和单元测试，其中包含用于测试的第二个 AndroidManifest.xml。

我添加`<uses-permission android:name="android.permission.WRITE_SETTINGS" />`到测试模块的 AndroidManifest.xml 中。

**错误：**`java.lang.SecurityException: Permission Denial: writing com.android.providers.settings.SettingsProvider uri content://settings/system from pid=1063, uid=10035 requires android.permission.WRITE_SETTINGS`

**丑陋的快速修复：**我也向应用程序的 AndroidManifest.xml 添加了相同的权限。测试运行没有任何错误。

**问题：**我不想授予整个应用程序更改设置的权限。

有没有办法只为测试授予权限？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T09:33:45.167

### 有没有办法只为测试授予权限？

简短的回答是否定的。

您的 Android 测试项目和 Android 应用程序项目实际上是两个应用程序，带有 test.apk 仪器 app.apk 和运行时。<uses-permission> 是针对每个应用程序的，将其添加到测试项目的 AndroidManifest.xml 仅授予 test.apk 所需的权限，而不是正在测试的应用程序，即 app.apk。

# qt - 保存 QML 图像

> ID：11011391
> 
> 赞同：7
> 
> 时间：2012-06-13T08:56:01.353
> 
> 标签：qt, qml

如何将 QML 图像保存到手机内存中？

如果保存图像是适用的，我有这种情况，我需要在图像中添加一些文本（我们可以想象它，因为我们有一个透明图像[保存文本]并将它放在第二个图像上，所以最后我们有一张我们可以将其保存到手机内存中的图像）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-02-03T11:47:43.607

使用 Qt 5.4+，您可以直接在 Qml 中使用： [grabToImage](http://doc.qt.io/qt-5/qml-qtquick-item.html#grabToImage-method)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-13T16:24:16.160

不是`Image`直接从。`QDeclarativeImage`有`pixmap`,`setPixmap`和`pixmapChange`方法，但由于某种原因没有声明属性。所以你不能在 qml 中使用它。不幸的是，它也不能在 C++ 中使用——它是一个私有类。

您可以做的是将图形项目绘制到像素图并将其保存到文件中。

```
class Capturer : public QObject
{
    Q_OBJECT
public:
    explicit Capturer(QObject *parent = 0);
    Q_INVOKABLE void save(QDeclarativeItem *obj);
};

void Capturer::save(QDeclarativeItem *item)
{
    QPixmap pix(item->width(), item->height());
    QPainter painter(&pix);
    QStyleOptionGraphicsItem option;
    item->paint(&painter, &option, NULL);
    pix.save("/path/to/output.png");
} 
```

注册“capturer”上下文变量：

```
int main()
{
    // ...
    Capturer capturer;
    QmlApplicationViewer viewer;
    viewer.rootContext()->setContextProperty("capturer", &capturer);
    // ...
} 
```

并在你的 qml 中使用它：

```
Rectangle {
    // ...
    Image {
        id: img
        source: "/path/to/your/source"
    }
    MouseArea {
        anchors.fill: parent
        onClicked: {
            capturer.save(img)
        }
    }
} 
```

# java - 使用 SimpleFormController 从 GET 请求到 jsp 页面的响应代码

> ID：11011395
> 
> 赞同：0
> 
> 时间：2012-06-13T08:56:06.207
> 
> 标签：java, spring, model-view-controller, jsp

我正在尝试使用带有 SimpleFormController 的 JSP 页面为传入的 GET 请求设置 http 响应程序。

我收到来自第三方公司的 GET 请求，他们期望得到 200 个 http 响应。然而，即使我的 JSP 基本上是空白的，当一个 GET 请求进来时，它会绕过我的 JSP 页面并自动提交给我的控制器中的 onSubmit 方法，并返回一个 201 的 http 响应。

如何发送 200 响应而不是 201？

谢谢，

戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T09:14:46.697

如果调用了 onsubmit 方法，我觉得他们不是在发送 get 请求，而是在发帖。

确保他们正在发送获取请求。

# user-interface - 虚幻引擎 4 功能演示中使用了哪些 GUI 框架或库？

> ID：11011401
> 
> 赞同：4
> 
> 时间：2012-06-13T08:56:20.417
> 
> 标签：user-interface, unreal-development-kit

像这样的虚幻引擎 4 GUI： [https ://pcper.com/2012/06/e3-12-unreal-engine-4-what-you-and-we-missed-at-gdc/](https://pcper.com/2012/06/e3-12-unreal-engine-4-what-you-and-we-missed-at-gdc/)

虚幻引擎 3 使用 wxwidgets，但在 UE4 中它看起来像 .NET Framework WPF。UE4 中的 GUI 非常棒。

PS Microsoft Expression Studio 4 也有同样的风格。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-24T12:56:11.653

它不是 wxwidgets 和 wpf。它是由虚幻引擎4团队开发的一个新的GUI框架，命名为“Slate UI Framework”。该框架用于编辑器和游戏两次，所以它是一个跨平台框架，使用硬件加速，如unity3D编辑器。如果您使用某些软件，例如 Fraps，它会告诉您全屏是一个帧缓冲区。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T00:47:28.040

虚幻引擎 3，至少它的后期版本正在慢慢用 WPF 替换 wxWidgets，您可以通过查看一些 .NET .dll 文件以及内容浏览器、颜色选择器等的外观来判断这一点。

虚幻引擎 4 继续这种趋势是有意义的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-11T09:08:07.800

UE4 编辑器将 Slate UI 框架用于其小部件。

它们可以通过 Widget Reflector 工具进行检查，该工具允许选择当前出现在编辑器屏幕上的小部件，然后查找和检查其源代码等方面，如下所示：

*   在 UE4 中，转到`Window > Developer Tools > Widget Reflector`

*   在 Widget Reflector 窗口中，单击`Pick Hit-Testable Widgets`或`Pick Painted Widget`

*   将鼠标移到编辑器窗口上的任何小部件上，然后按`ESC`停止

*   请注意，小部件及其对应的 CPP 文件将在 Widget Reflector 中突出显示

在 UE4 的默认安装中，包含 Slate UI 小部件的基本文件夹应为：

`C:\Program Files\Epic Games\UE_4.26\Engine\Source\Runtime\Slate\`

例如，`SBox`可以在以下位置找到小部件的实现：

`C:\Program Files\Epic Games\UE_4.26\Engine\Source\Runtime\Slate\Private\Widgets\Layout\SBox.cpp`

除了用于构建 UE4 编辑器本身之外，Slate UI 框架还[可以用于使用它创建的游戏/内容](https://www.youtube.com/watch?v=jeK6DPB5weA)。

本[文档](https://dokumen.tips/documents/the-slate-ui-framework.html)由其创建者提供了该框架的概述。

# ruby-on-rails - 使用 ActiveRecord 获取列名

> ID：11011402
> 
> 赞同：47
> 
> 时间：2012-06-13T08:56:24.110
> 
> 标签：ruby-on-rails, activerecord

有没有办法使用 ActiveRecord 获取实际的列名？

当我通过连接调用 find_by_sql 或 select_all 时，如果存在同名的列，则第一个将被覆盖：

```
select locations.*, s3_images.* from locations left join s3_images on s3_images.imageable_id = locations.id and s3_images.imageable_type = 'Location' limit 1 
```

在上面的示例中，我得到以下信息：

```
#<Location id: 22, name: ... 
> 
```

其中 id 是最后一个 s3_image 的。select_rows 是唯一按预期工作的东西：

```
Model.connection.select_rows("SELECT id,name FROM users") => [["1","amy"],["2","bob"],["3","cam"]] 
```

我需要获取上面行的字段名称。这篇文章接近我想要的，但看起来已经过时了（fetch_fields 似乎不再存在了[如何获取 ActiveRecord 查询结果中的行和列？](https://stackoverflow.com/questions/1690248/how-do-you-get-the-rows-and-the-columns-in-the-result-of-a-query-with-activereco)）

ActiveRecord 连接方法创建多个对象。我正在尝试实现与“包含”相同的结果，但会返回左连接。

我试图返回一大堆结果（有时是整个表），这就是为什么包含不适合我的需要。

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-06-13T12:40:04.260

Active Record 提供了`#column_names`一种返回列名数组的方法。

使用示例：`User.column_names`

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2015-03-05T04:01:09.980

两个选项

```
Model.column_names 
```

或者

```
Model.columns.map(&:name) 
```

名为 Rabbit 的示例模型，列名称、年龄、on_facebook

```
Rabbit.column_names
Rabbit.columns.map(&:name) 
```

返回

```
["id", "name", "age", "on_facebook", "created_at", "updated_at"] 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-13T12:47:35.100

这只是活动记录的检查方法的工作方式：它只列出模型表中的列。属性仍然存在

```
record.blah 
```

将返回 blah 属性，即使它来自另一个表。你也可以使用

```
record.attributes 
```

获取包含所有属性的哈希。

但是，如果您有多个具有相同名称的列（例如，两个表都有一个 id 列），那么活动记录只是将事物混合在一起，忽略表名。您必须为列名起别名以使其唯一。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T14:56:13.130

好吧，我一直想做一些更有效率的事情。

请注意，对于很少的结果，包含工作正常。当您有很多想要加入的列时，下面的代码效果更好。

为了更容易理解代码，我先设计了一个简单的版本并对其进行了扩展。

第一种方法：

```
# takes a main array of ActiveRecord::Base objects
# converts it into a hash with the key being that object's id method call
# loop through the second array (arr)
# and call lamb (a lambda { |hash, itm| ) for each item in it. Gets called on the main
# hash and each itm in the second array
# i.e: You have Users who have multiple Pets
# You can call merge(User.all, Pet.all, lambda { |hash, pet| hash[pet.owner_id].pets << pet }
def merge(mainarray, arr, lamb)
    hash = {}
    mainarray.each do |i|
      hash[i.id] = i.dup
    end

    arr.each do |i|
      lamb.call(i, hash)
    end

    return hash.values
  end 
```

然后我注意到我们可以有“通过”表（nxm 关系）

合并通过！解决这个问题：

```
 # this works for tables that have the equivalent of
  # :through =>
  # an example would be a location with keywords
  # through locations_keywords
  #
  # the middletable should should return as id an array of the left and right ids
  # the left table is the main table
  # the lambda fn should store in the lefthash the value from the righthash
  #
  # if an array is passed instead of a lefthash or a righthash, they'll be conveniently converted
  def merge_through!(lefthash, righthash, middletable, lamb)
    if (lefthash.class == Array)
      lhash = {}
      lefthash.each do |i|
        lhash[i.id] = i.dup
      end

      lefthash = lhash
    end

    if (righthash.class == Array)
      rhash = {}
      righthash.each do |i|
        rhash[i.id] = i.dup
      end

      righthash = rhash
    end

    middletable.each do |i|
      lamb.call(lefthash, righthash, i.id[0], i.id[1])
    end

    return lefthash
  end 
```

这就是我所说的：

```
 lambmerge = lambda do |lhash, rhash, lid, rid| 
                         lhash[lid].keywords << rhash[rid] 
                end
    Location.merge_through!(Location.all, Keyword.all, LocationsKeyword.all, lambmerge) 
```

现在是完整的方法（利用merge_through）

```
 # merges multiple arrays (or hashes) with the main array (or hash)
  # each arr in the arrs is a hash, each must have
  # a :value and a :proc
  # the procs will be called on values and main hash
  #
  # :middletable will merge through the middle table if provided
  # :value will contain the right table when :middletable is provided
  #
  def merge_multi!(mainarray, arrs)
    hash = {}

    if (mainarray.class == Hash)
      hash = mainarray
    elsif (mainarray.class == Array)
      mainarray.each do |i|
        hash[i.id] = i.dup
      end
    end

    arrs.each do |h|
      arr = h[:value]
      proc = h[:proc]

      if (h[:middletable])
        middletable = h[:middletable]
        merge_through!(hash, arr, middletable, proc)
      else
        arr.each do |i|
          proc.call(i, hash)
        end
      end
    end

    return hash.values
  end 
```

这是我使用代码的方式：

```
def merge_multi_test()

    merge_multi!(Location.all,
                 [
                     # each one location has many s3_images (one to many)
                     { :value => S3Image.all,
                       :proc => lambda do |img, hash|
                          if (img.imageable_type == 'Location')
                            hash[img.imageable_id].s3_images << img
                          end
                       end
                     },

                     # each location has many LocationsKeywords. Keywords is the right table and LocationsKeyword is the middletable.
                     # (many to many) 
                     { :value => Keyword.all,
                       :middletable => LocationsKeyword.all,
                       :proc => lambda do |lhash, rhash, lid, rid|
                         lhash[lid].keywords << rhash[rid]
                       end
                     }
                 ])
  end 
```

如果您希望延迟加载一对多的属性（例如，City is to a Location），您可以修改代码。基本上，上面的代码不起作用，因为您必须遍历主哈希并设置来自第二个哈希的城市（没有“city_id，location_id”表）。您可以反转城市和位置以获取城市哈希中的所有位置，然后提取回来。我还不需要那个代码所以我跳过了它=）

# scala - 将 MegaProtoUser 中的字段合并到向导屏幕中

> ID：11011407
> 
> 赞同：0
> 
> 时间：2012-06-13T08:56:38.873
> 
> 标签：scala, mongodb, lift

我刚开始使用 scala 和 lift 并且对于将 MegaProtoUser 中的表单字段合并到向导屏幕中有点卡住。

我有以下 MegaProtoUser 代码：

```
object User extends User 
  with MongoMetaRecord[User]
  with MetaMegaProtoUser[User] {
    override def skipEmailValidation = true
  }

class User private () extends MongoRecord[User]
  with MegaProtoUser[User] {
    def meta = User

     //protected methods ...

} 
```

我的向导设置如下所示：

```
object SignupWizard extends Wizard {
  object completeInfo extends WizardVar(false)

  val person = new Screen {

    //Incoroporate MegaProtoUser fields here ...

    override def nextScreen = {
       business
    }
  }

  val business = new Screen {
    val business = field("Business name","")
  }

  def finish() {
    S.notice("Thank you for registering!")
    completeInfo.set(true)
  }

} 
```

我想将我的 MegaProtoUser 类中的一些选定（不是全部）字段合并到人员屏幕中，但现在不知道如何使用两者都可用的方法来做到这一点。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:28:12.790

`AbstractScreen`的[`addFields`](http://scala-tools.org/mvnsites/liftweb-2.4/net/liftweb/http/AbstractScreen.html#addFields%28%28%29%20%E2%87%92%20FieldContainer%29%3aUnit)方法可以添加单个字段，也可以添加`Record`对象中的所有字段。这适用于[`LiftScreen`](http://scala-tools.org/mvnsites/liftweb-2.4/#net.liftweb.http.LiftScreen)和[`Wizard`。`Screen`](http://scala-tools.org/mvnsites/liftweb-2.4/#net.liftweb.wizard.Wizard%24Screen)

```
// assuming you just want to create a new user
object user extends WizardVar(User.createRecord)

val person = new Screen {
  // addFields(() => user.is) would add all fields
  addFields(() => user.is.email)
  addFields(() => user.is.password)
  addFields(() => user.is.timezone)

  override def nextScreen = {
     business
  }
} 
```

# vba - 如何使用 VBA 在 word 中打印排序后的数组？

> ID：11011408
> 
> 赞同：1
> 
> 时间：2012-06-13T08:56:40.060
> 
> 标签：vba, ms-word

我在两个单独的数组中有两个输入数据 Year 和 Name 。我需要先对两个数组值进行排序，我需要按时间顺序（年份）对其进行排序，然后如果年份信息重复，它将按字母顺序对数组进行排序。

至于我完成了年份和名称的排序。使用`Wordbasic.sortarray`命令

**输入**：（排序前）

```
SDF 1997
ELS 1986
PJK 1983
WKL 1995
EFD 1986 
```

**输出**：（排序后）

```
PJK 1983
EFD 1986
ELS 1986
WKL 1995
SDF 1997 
```

如果我用word打印它，它会像这样打印：

```
PJK 1983, ELS 1986, EFD 1986, WKL 1995, SDF 1997. 
```

这是我打印数据的代码。有人可以调查一下并指导我在哪里犯了错误吗？

```
WordBasic.sortarray SortyearArray() 
```

**代码**：

```
Dim I As Integer
Dim J As Integer
Dim K As Integer
Dim N As Integer
Dim Counter As Integer
COUNTER1 = 1

i1 = 1
J1 = 5

For I = 0 To UBound(SortyearArray())
    Counter = 1
    For J = I + 1 To UBound(SortyearArray())
        If SortyearArray(I) = SortyearArray(J) Then
            Counter = Counter + 1
            MsgBox (Counter)
        End If
        COUNTER1 = Counter + COUNTER1
    Next J
    If Counter = 1 Then
        For N = i1 To J1
            If SortyearArray(I) = Year(N) Then
                Selection.TypeText Text:="(" & AuthorName(N) & Year(N) & ")"
            End If
        Next N
    End If
Next I 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T10:00:56.660

**输入**

```
SDF 1997
ELS 1986
PJK 1983
WKL 1995
EFD 1986 
```

**核心功能：**

```
 Public Function QuickSort(ByRef array2check() As String, min As Long, max As Long) As Boolean
Dim lo As Long, hi As Long
Dim lo0 As Long, hi0 As Long
Dim midPos As String

    lo = min: hi = max
    lo0 = lo: hi0 = hi
    midPos = array2check((lo0 + hi0) / 2)
    DoEvents
    While (lo <= hi)
        While ((lo < hi0) And (array2check(lo) < midPos))
            lo = lo + 1
        Wend
        While ((hi > lo0) And (array2check(hi) > midPos))
            hi = hi - 1
        Wend
        If lo <= hi Then
            Call swap(array2check, lo, hi)
            lo = lo + 1
            hi = hi - 1
        End If
    DoEvents
    Wend

    If lo0 < hi Then Call QuickSort(array2check, lo0, hi)
    If lo < hi0 Then Call QuickSort(array2check, lo, hi0)

    QuickSort = True

End Function

Private Sub swap(arr() As String, idx1 As Long, idx2 As Long)
Dim tmp As String
    tmp = arr(idx1)
    arr(idx1) = arr(idx2)
    arr(idx2) = tmp
End Sub 
```

**样品测试仪**

```
Public Sub sample_test()
    Dim test_arr() As String
    test_arr = Split("SDF 1997" & vbCrLf & "ELS 1986" & vbCrLf & "PJK 1983" & vbCrLf & "WKL 1995" & vbCrLf & "EFD 1986", vbCrLf)
    If QuickSort(test_arr, LBound(test_arr), UBound(test_arr)) = True Then
        'Debug.Print Join(test_arr, vbCrLf)
        MsgBox Join(test_arr, vbCrLf)
    End If
End Sub 
```

**结果**

```
EFD 1986
ELS 1986
PJK 1983
SDF 1997
WKL 1995 
```

* * *

希望这可以帮助。

# jsf - 允许 h:form 中的 p:selectOneListbox 但不向 bean 提交值

> ID：11011410
> 
> 赞同：2
> 
> 时间：2012-06-13T08:56:50.630
> 
> 标签：jsf, primefaces

我有一个`p:selectOneListbox`within an`h:form`但没有该`value`属性，因为我只需要将它用于演示目的（仅用于显示另一个输入框，但此组件不需要值提交）。但是，当我尝试使用`h:commandButton`'s提交表单时`actionListener`，除非组件的值使用`value`属性绑定到 bean，否则会失败。

如何提交表单而不需要为此指定`value`属性`p:selectOneListbox`？

```
<p:selectOneListbox >
      <f:selectItems ... />
</p:selectOneListbox> 
```

有什么方法可以告诉我要从处理中排除哪些组件，而不是告诉所有要处理的组件（因为这会用一长串 id 不必要地使代码膨胀）？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T08:21:24.443

您可以将其`p:selectOneListbox>`放入另一种形式，然后通过 css 更改其位置：

```
<h:form id="otherForm>
  <p:selectOneListbox style="position: relative; top: -50px"">
      <f:selectItems ... />
  </p:selectOneListbox>
</h:form> 
```

这会将选择框从其正常位置向上移动 50 像素。

这是一种肮脏的解决方案，您必须摆弄才能找到正确的位置，但它应该可以工作。

# objective-c - 引用计数等于 0 的对象仍然是持久的

> ID：11011420
> 
> 赞同：1
> 
> 时间：2012-06-13T08:57:48.187
> 
> 标签：objective-c, ios, memory-leaks, instruments, reference-counting

我正在尝试增强非 ARC 应用程序中的内存分配。有一些对象，即使它们的引用计数为 0，它们也被列为两个 heapshot 之间的持久对象。

这是我的主要观点：![在此处输入图像描述](../Images/c471a0340b289875e58cf00a424aec86.png)

让我们以第一个 heapshot (0x6deb180) 中选定的 LSBookChapter 为例。这是该对象的历史：

![在此处输入图像描述](../Images/71d91a338f6cf06cfc80e2370bfa220f.png)

为什么那个对象没有被释放？如果引用计数为 0，我无法确定何时过度保留该对象..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T16:28:48.310

您可能打开了僵尸检测功能吗？

僵尸检测不会导致任何内容被释放，但是 - 可能 - 保留计数将降至零，并且更有用的是，您将看到导致保留和释放导致事件之间的一一对应关系。

* * *

此外，如果您没有打开“仅跟踪实时分配”，那么您将在 Instruments 中看到该对象被释放后，保留计数为 0，但它实际上已被释放。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T10:41:52.890

在我之前的应用程序中，我和你现在有一些担忧，因为我没有泄漏，但内存在增长。经过一番研究，我偶然发现了[这一点](http://www.friday.com/bbum/2010/10/17/when-is-a-leak-not-a-leak-using-heapshot-analysis-to-find-undesirable-memory-growth/)。我确实试图在他的文章上做一些捷径，但最后我只是阅读了整篇文章以真正理解哪里出了问题。是的，我能够查明我遇到的每一个问题。我可能会说我有很多。

对于您的特定问题，我没有做您现在正在尝试的操作：在不同的堆中查看对象的 retainCount。老实说，我认为这是在浪费时间。我的主要目标是确保如果我做某事并且我反转它，内存不应该增加，或者如果它应该稍微增加（快速示例：进入一个新的`UIViewController`并按下按钮）。

# ios - iOS：使用 CGContextRotate 旋转

> ID：11011425
> 
> 赞同：1
> 
> 时间：2012-06-13T08:57:58.010
> 
> 标签：ios, cgcontext, rotation, cgcontextdrawimage

我试图旋转图像，我想在图像文件上绘制（到上下文。一切正常，除非我旋转图像。

基本上我有一个图像；我想缩放和调整图像大小，然后将其剪辑为矩形，最后将其绘制到 UICurrentContext；

```
//create a new graphic context
UIGraphicsBeginImageContext(CGSizeMake(500, 500));
CGContextRef graphicContext = UIGraphicsGetCurrentContext();
CGContextDrawImage(graphicContext, CGRectMake(0, 0, rect.size.width, rect.size.height), image.CGImage);
CGContextRotateCTM(graphicContext, 45 * M_PI/180.0);
UIImage* editedImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

//draw it to the current context
[editedImage drawAtPoint:CGPointMake(0,0)]; 
```

问题是当我旋转图像时，我不知道图像上下文的新大小是多少。接下来，编辑图像中的图像**没有** 旋转..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T09:22:52.507

您需要在绘制*之前旋转上下文。*我知道这看起来很傻，但是用一张纸来比喻……这是一张不能移动的纸。相反，您必须绕着它移动，然后画图。

这样，您的尺寸将永远不会改变，因为任何太大的东西都会被简单地切断。

**编辑**另外，这个函数需要弧度，而不是度数，所以你不需要像你一样进行转换。如果你想要 45 度，它只是 PI / 4（`M_PI_4`在 math.h 中存储为常数）。

# jquery - 如何更改日期选择器颜色？

> ID：11011426
> 
> 赞同：1
> 
> 时间：2012-06-13T08:57:58.037
> 
> 标签：jquery, jquery-ui, datepicker

> **可能重复：**
> [JQuery DatePicker 背景颜色](https://stackoverflow.com/questions/4278402/jquery-datepicker-background-color)

正在使用以下功能来选择日期。它工作正常。如何更改 jquery 中的日期选择器颜色？

```
function DateControl(id){       
    $(id).datepicker({            
        changeMonth: true,
        changeYear: true
    });
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-13T09:06:18.063

要更改日期选择器的背景颜色，请尝试此操作

```
.ui-datepicker {
   background: #333;
   border: 1px solid #555;
   color: #EEE;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T09:24:02.737

用于更改日期选择器的背景

```
.ui-datepicker 
{
    background: #999;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T09:08:11.473

我认为设置日期选择器样式的唯一方法是通过 css。设置您自己的样式或使用主题滚轮（[http://jqueryui.com/themeroller/](http://jqueryui.com/themeroller/)）。

# iphone - 处理 UITableView 的字符串

> ID：11011430
> 
> 赞同：1
> 
> 时间：2012-06-13T08:58:32.133
> 
> 标签：iphone, objective-c, xcode, uitableview, nsstring

我需要处理这个字符串：

```
# 2012
20120604 Huge Sandstorm over Saudi Arabia
20120527 Huge Sandstorm over niger
# 2012
20110330 Huge Sandstorm over niger
# just for the test
20110330 AHuge Sandstorm over niger
20110330 BHuge Sandstorm over niger
20110330 CHuge Sandstorm over niger
20110330 1Huge Sandstorm over niger
20110330 2Huge Sandstorm over niger
20110330 3Huge Sandstorm over niger
20110330 4Huge Sandstorm over niger
20110330 5CHuge Sandstorm over niger
20110330 6Huge Sandstorm over niger
# **********
20110330 7Huge Sandstorm over niger
20110330 8Huge Sandstorm over niger
20110330 9CHuge Sandstorm over niger
20110330 AHuge Sandstorm over niger
20110330 B10CHuge Sandstorm over niger
20110330 **CHuge Sandstorm over niger 
```

在具有不同部分的 UITableView 中，标题将是 "# ......." 和内容 "20110330 ........" "20110330 ........" "20110330 。 ……”

请问我该如何处理这个字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:33:26.037

试试这个东西。

```
NSString *str = @"above string"; //load above string here
NSArray * firstArry = [str componentsSeparatedByString:@"#"];
NSMutableArray *secondArry = [[NSMutableArray alloc] init]; //Will hold the # titles
NSMutableDictionary *dict = [[NSMutableDictionary alloc] init]; //Will hold the strings related to # title
for(NSString firstArryStr in firstArry)
  {
      NSArray *tempArry = [firstArryStr componentsSeparatedByString@"\n"];
      NSMutableArray *titleStingsArry = [[NSMutableArray alloc] init];
      for (int i=0; i< [tempArry count];i++) {
            if (i==0) {
                NSString *title = [tempArry  objectAtIndex:i];
                [secondArry addObject:title];
                [dict setValue:titleStingsArry  forKey:title];
            } else {
                [titleStingsArry  addObject:[tempArry  objectAtIndex:i]];
            }
      } 
  } 
```

现在，您有`secondArry`部分中的行的部分和数组字典。

**PS 请忽略语法错误，因为我现在没有使用 mac 机器并且还要注意内存管理。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T09:13:11.290

试试这个：

```
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {
      if(section == 0) {
       return @"2012";
        } else if (section ==1) {
        return @"# just for the test";
    } // like wise add title for Section header in this method
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    NSString *sCellIdentifier = @"cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:sCellIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:sCellIdentifier];
    }

    if (indexPath.section == 0) {
        if (indexPath.row == 0) {
            cell.textLabel.text = @"Huge Sandstorm over Saudi Arabia";
        } else if (indexPath.row == 1) {
            cell.textLabel.text = @"Huge Sandstorm over niger";
        } 
    } else  if (indexPath.section == 1) {
        if (indexPath.row == 0) {
            cell.textLabel.text = @"Huge Sandstorm over niger";
        } 
    } else  if (indexPath.section == 2) {
        if (indexPath.row == 0) {
            cell.textLabel.text = @"AHuge Sandstorm over niger";
        } else if (indexPath.row == 1) {
            cell.textLabel.text = @"BHuge Sandstorm over niger";
        }
    } // like wise add text for different section in this method using this conditions
    return cell;
} 
```

# jquery - 基于 Ajax 的页面与事件的兼容性

> ID：11011431
> 
> 赞同：0
> 
> 时间：2012-06-13T08:58:35.363
> 
> 标签：jquery, ajax, events

我正在设计一种谷歌新闻或谷歌阅读器的页面（即一个充满数据和事件的页面）。我完全计划使这个页面基于 ajax。[谷歌新闻](https://news.google.co.in/)中还有一个主题功能（显示在左侧边栏中）。我还计划添加一项功能，将主题添加到当前的主题列表中。但与谷歌不同的是，我在这个侧边栏的顶部提供了一个输入字段。用户可以通过在其中键入任何内容来直接添加主题。**问题**是当我添加这个新主题时，没有附加到所有其他主题的事件。
我的意思是当我向页面添加新的 html 时，它确实附加了任何事件。
在搜索了 SO 之后，我发现绑定事件我可以使用`.live()`. 但`.live()`代表`.on()`. 但`.on()`我认为不要提供未来的事件附件。（在其文档中没有任何关于未来事件处理的内容）

现在我只添加了一个主题。但我必须在旅途中添加许多新的 html。有没有一种方法可以将事件附加到它们。目前我在`.class`.

使用已附加事件的 ajax 添加 HTML 的最佳方法是什么。

关于这个话题的任何进一步的建议，因为我认为现在我是这方面的菜鸟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:09:37.170

您可以像使用**.live**一样使用**.on**，您可以绑定**.on**事件以**记录**自己以供将来的元素使用，例如

```
$(document).on("click",".yourDynamicElement", function(){  
  console.log('i have been clicked'); 
}); 
```

或者您可以将**文档**替换为动态创建元素的现有父/容器元素

你的意思是这样的吗

# javascript - 未定义的javascript函数错误

> ID：11011433
> 
> 赞同：0
> 
> 时间：2012-06-13T08:58:41.877
> 
> 标签：javascript, function, iframe

我制作了一个简单的 javascript 函数，可以在单击按钮时执行 -

```
<asp:TextBox ID="TextBox3" runat="server" Width="98px"></asp:TextBox>
<asp:Button ID="Button3" runat="server" Text="Button" OnClientClick="fn4();" />

<script  type="text/javascript">

function fn4() 
{

var search = document.getElementById('TextBox3').value;

<iframe src="http://fooBar.com/q=" + search + " width="250" height="400" scrolling="no" frameborder="0"></iframe>

}
</script> 
```

因此，该`search`术语基于来自 的用户输入`TextBox3`，但是在执行此操作时，会出现错误-

```
Error: 'fn4' is undefined 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T09:01:29.013

当页面加载时，您的浏览器中可能会出现解析器错误。并且因为 JavaScript 没有解析，所以没有定义函数。这是无效的 JavaScript：

```
function fn4() 
{

    var search = document.getElementById('TextBox3').value;

    <iframe src="http://fooBar.com/q=" + search + " width="250" height="400" scrolling="no" frameborder="0"></iframe>

} 
```

那里混合了 HTML，所以它不会被解析为 JavaScript。你到底*想做*什么`iframe`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T09:01:02.600

我不熟悉 ASP，但您通常不能像`<iframe>`在`fn4()`函数中那样混合 JS 和 HTML。您的函数本身存在语法错误，因此无法成功定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T09:01:08.107

您的 JavaScript 函数中不能有 HTML。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T09:02:06.587

```
<iframe src="http://fooBar.com/q=" + search + " width="250" height="400" scrolling="no" frameborder="0"></iframe> 
```

为什么这在你的 JavaScript 函数中？这行不通

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T09:03:35.963

1）发布您生成的html代码而不是asp代码：它在这里或多或少没用，因为我们不确定您的asp会从中生成什么。

2) 脚本部分中的 HTML 标记肯定会破坏页面解析。

# database - SAS：在几个 proc 过程之后生成输出数据库

> ID：11011439
> 
> 赞同：2
> 
> 时间：2012-06-13T08:59:02.343
> 
> 标签：database, sas

我还是 SAS 的新手，我想知道如何执行以下操作：

假设我有一个包含以下信息的数据库：

```
Time_during_the day    date    prices   volume_traded
930am                  sep02    42            300
10am                   sep02    41            200
..4pm                  sep02    40            200
930am                  sep03    40            500
10am                   sep03    41            100
..4pm                  sep03    40            350
..... 
```

我想要的是取每日总交易量的平均值并将这个数字除以 50（总是）。所以说 avg.daily vol./50 = V; 我想要的是以大小 V 的每个间隔记录价格/时间/日期。现在，假设 V=500，我首先在我的数据库中记录第一个价格、时间和日期，然后记录相同的信息 500以后进行批量交易。有可能某一天的交易量是 300，其中一半将覆盖 v=500，另外 150 将用于填补下一个区间。

如何在一个数据库中获取这些信息？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T18:18:28.223

假设您的输入数据集称为 tick_data，并且它同时按`date`和排序`time_during_the_day`。然后这就是我得到的：

```
%LET n = 50;

/* Calculate V - the breakpoint size */
PROC SUMMARY DATA=tick_data;
    BY date;

    OUTPUT OUT = temp_1 
           SUM (volume_traded)= volume_traded_agg;
RUN;
DATA temp_2 ;
    SET temp_1;
    V = volume_traded_agg / &n;
RUN;

/* Merge it into original dataset so that it is available */
DATA temp_3;
    MERGE tick_data temp_2;
    BY date;
RUN;

/* Final walk through tick data to output at breakpoints */
DATA results 
    /* Comment out the KEEP to see what is happening under the hood */
    (KEEP=date time_during_the_day price volume_traded)
;
    SET temp_3;

    /* The IF FIRST will not work without the BY below */
    BY date;

    /* Stateful counters */
    RETAIN 
            volume_cumulative
            breakpoint_next
            breakpoint_counter
    ;

    /* Reset stateful counters at the beginning of each day */
    IF (FIRST.date) THEN DO;
            volume_cumulative   = 0;
            breakpoint_next     = V;
            breakpoint_counter  = 0;
    END;

    /* Breakpoint test */
    volume_cumulative = volume_cumulative + volume_traded;
    IF (breakpoint_counter <= &n  AND volume_cumulative >= breakpoint_next) THEN DO;
        OUTPUT;
        breakpoint_next = breakpoint_next + V;
        breakpoint_counter = breakpoint_counter + 1;
    END;
RUN; 
```

未来要牢记的关键 SAS 语言功能是将`BY`、`FIRST`和`RETAIN`一起使用。这使得有状态的遍历像这样的数据。有条件`OUTPUT`的也在这里。

请注意，无论何时使用`BY <var>`，数据集都必须按包含`<var>`. 在`tick_data`所有中间临时表的情况下，它是。

## 附加：备选方案 V

为了使 V 等于（平均每日总交易量/n），请将上面的匹配代码块替换为以下代码块：

```
. . . . . .
/* Calculate V - the breakpoint size */
PROC SUMMARY DATA=tick_data;
    BY date;

    OUTPUT OUT = temp_1 
           SUM (volume_traded)= volume_traded_agg;
RUN;
PROC SUMMARY DATA = temp_1
    OUTPUT OUT = temp_1a
           MEAN (volume_traded_agg) =;
RUN;
DATA temp_2 ;
    SET temp_1a;
    V = volume_traded_agg / &n;
RUN;

/* Merge it into original dataset so that it is available */
DATA temp_3 . . . . . .
 . . . . . . 
```

基本上你只需插入一秒钟`PROC SUMMARY`来取总和的平均值。请注意如何没有`BY`声明，因为我们是在整个集合上平均，而不是按任何分组或桶。还要注意.`MEAN (...) =`后面没有名字`=`。这将使输出变量与输入变量具有相同的名称。

# .net - .NET WinForms 应用程序的 Windows 8 RibbonBar 控件？

> ID：11011442
> 
> 赞同：0
> 
> 时间：2012-06-13T08:59:17.437
> 
> 标签：.net, winforms, windows-8

Windows 8 是否会为 .NET WinForms 应用程序提供随时可用的 RibbonBar 控件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T09:12:55.847

我想功能区栏使用了所有的 WPF 类和 XMAL。所以 WinForms 可能不支持它。

MSDN 文档： http: [//msdn.microsoft.com/en-us/library/ff799534 (v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/ff799534%28v=vs.110%29.aspx)

这是功能区的开源实现：

[http://windowsribbon.codeplex.com/](http://windowsribbon.codeplex.com/)

类似问题： [WinForms 的 Ribbon UI Control](https://stackoverflow.com/questions/413910/ribbon-ui-control-for-winforms)

# razor - ASP.NET MVC 4 仅为字符串定义显示模板

> ID：11011444
> 
> 赞同：9
> 
> 时间：2012-06-13T08:59:19.590
> 
> 标签：razor, asp.net-mvc-4, display-templates

我只想为字符串属性创建一个显示模板，并为所有其他属性使用默认值。

我尝试在 Views/Shared/DisplayTemplates 中创建一个 string.cshtml，其内容如下：

```
@model string
@Html.TextBoxFor(m => m, new { @readonly = "readonly" }) 
```

现在，当我尝试打开使用 DisplayFor(m => m.property) 的任何视图时遇到问题，它显示如下错误：传递到字典中的模型项的类型为“System.DateTime”，但该字典需要'System.String' 类型的模型项。或：传入字典的模型项的类型为“System.Int64”，但此字典需要“System.String”类型的模型项。

我知道我可以通过为使用的每种类型添加显示模板来解决这个问题，但我想也可以对未定义自定义模板的所有类型使用“默认”模板？

**更新** 达林回答后，我检查了布拉德的教程并将模板更改为：

```
@Html.TextBox("", ViewData.TemplateInfo.FormattedModelValue, new { @readonly = "readonly" }) 
```

这基于“默认”模板，适用于所有类型。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-13T09:23:41.100

有 9 个内置显示模板：“Boolean”、“Decimal”、“EmailAddress”、“HiddenInput”、“Html”、“Object”、“String”、“Text”和“Url”。

请查看[以下博客文章](http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-3-default-templates.html)，其中详细解释了模板的工作原理以及它们是如何解决的。这是它的引述：

> 依次尝试以下模板名称：
> 
> 1.  来自模型元数据的模板提示
> 2.  来自 ModelMetadata 的 DataTypeName
> 3.  类型的名称（见下面的注释）
> 4.  如果对象不复杂：“字符串”
> 5.  如果对象是复杂的和接口：“对象”
> 6.  如果对象很复杂而不是接口：通过类型的继承层次递归，尝试每个类型名称

因此，对于 DateTime 和 Int64，您要达到第 4 点，因为这些类型没有默认模板。

因此，您可以使用 ModelMetadata 中的模板提示或 DataType 名称来将此自定义模板仅用于视图模型上的给定属性。

# java - 如何将数组列表的一个单元格中的项目分开？

> ID：11011451
> 
> 赞同：0
> 
> 时间：2012-06-13T08:59:35.743
> 
> 标签：java, arraylist

有什么方法可以分隔 arraylist 的一个单元格中的项目？当我打印我的数组列表时，它看起来像这样：

```
[4485,8765,7665,76545,6544,66544,43332,2222 ....]
[8833,8383,38383,39595,49596,60696,50505,...]
.
.
. 
```

所以我认为它将许多项目保存在一个单元格中，而我想分别保存它们。现在如何将项目划分为一个单元格并分别保存？（arraylist 保存从 udp 收到的数据包）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:14:45.563

假设你`List`是这样声明的：

```
List<List<Integer>> list = new ArrayList<List<Integer>>(); 
```

你可以简单地迭代它。

```
for(List<Integer> integers : list) {
    System.out.println(integers);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T09:43:09.077

```
public static void main(String args[])
{
    ArrayList<Integer> arr=new ArrayList<Integer>();
    arr.add(121);
    arr.add(122);
    arr.add(123);
    arr.add(124);
    arr.add(125);

    List<Integer> l=arr;
    for(int i=0;i<l.size();i++)
   {
    System.out.println(l.get(i));
   }

  } 
```

# java - 面对 SOA 迁移时如何避免创建这么多 dto

> ID：11011458
> 
> 赞同：0
> 
> 时间：2012-06-13T08:59:50.590
> 
> 标签：java, spring, hibernate, soa, dto

我们现在正在做 SOA 迁移，我们旧系统的架构是基于 spring 和 hibernate。我们在所有层中使用 PO（持久对象）。

面对 SOA 迁移，如果我们使用 DTO 进行远程过程调用，我们必须创建这么多的 DTO。

关于如何避免这种情况有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T12:07:19.583

Develop a [Canonical Model](http://en.wikipedia.org/wiki/Canonical_Model), probably the most important SOA pattern there is. - Define a representation using an XML Schema for that model. - Use [jaxb](http://www.oracle.com/technetwork/articles/javase/index-140168.html) to [create](http://jaxb.java.net/tutorial/) the Java POJO representations. Once you have these you 'could' map these to your existing Persistent Objects and then round-trip until they are equivalent. Alternatively given you already use persistent object you could work bottom up with Jaxb, but in my experience that is more difficult/work intensive approach.

# c# - WPF：带画布的图像

> ID：11011459
> 
> 赞同：3
> 
> 时间：2012-06-13T08:59:52.920
> 
> 标签：c#, wpf

我想知道是否有人可以帮助解决两个问题。下面是一个带路径的画布，我一直在查看这段代码，并试图弄清楚它所显示的内容。

我的问题是路径中的数据，它是什么样的数据，它看起来不像二进制？

我的第二个问题是，我希望能够使用不同的图像创建我自己的数据版本，这可能吗？我可以拍摄另一张图像获取原始数据并使用它而不是下面的数据。

```
<Canvas Width="48" Height="48" Clip="F1 M 0,0L 48,0L 48,48L 0,48L 0,0" x:Key="appbar_cloud_download">
        <Path Width="24" Height="13.0001" Canvas.Left="12" Canvas.Top="18" Stretch="Fill"  Fill="{DynamicResource BlackBrush}" Data="F1 M 31,21C 33.7614,21 36,23.2386 36,26C 36,28.7614 33.7615,30.9999 30.9797,31L 24.5,31L 28,27L 26,27L 26,23L 23,23L 23,27L 21,27L 24.5,31L 14.5,31C 13.1193,31 12,29.8807 12,28.5C 12,27.2758 12.8799,26.2571 14.0417,26.0419L 14,25.5C 14,23.6206 15.4814,22.0871 17.3402,22.0035C 18.1629,19.6713 20.3863,18 23,18C 25.4816,18 27.6113,19.5065 28.5245,21.6549C 29.2543,21.2381 30.0994,21 31,21 Z " />
    </Canvas> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T09:04:56.327

你说的很对，它不是二进制数据，它是一种用来指挥笔的标记语言，你可以在[这里阅读标记语言](http://msdn.microsoft.com/en-us/library/ms752293.aspx)

这里有一个很好的获取路径数据的[工具](http://blogs.msdn.com/b/gavingear/archive/2007/02/15/intoducing-pathmaker-a-tool-for-creating-path-markup-for-wpf-e.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T09:05:07.480

这是一种[路径标记语法](http://msdn.microsoft.com/en-us/library/ms752293.aspx)。它用于描述路径几何。

是的，您可以创建自己的几何图形。我建议使用表达式混合。您可以使用可用的工具（例如线条、铅笔）在此处绘制几何图形，然后导出/复制粘贴创建的路径标记语法。

# asp.net - 无法识别的配置部分 log4net。web.config 网站

> ID：11011460
> 
> 赞同：7
> 
> 时间：2012-06-13T08:59:53.100
> 
> 标签：asp.net

我使用 log4net 在我的 Web 应用程序中记录错误，它工作正常。但是，如果我将相同的代码放在网站中，我会收到错误“无法识别的配置部分 log4net”

这是我的 web.config 部分

```
<section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler,Log4net" requirePermission="false"/> 
```

```
<root>

  <level value="RELEASE" />

  <appender-ref ref="LogFileAppender" />

</root>

<appender name="LogFileAppender" type="log4net.Appender.RollingFileAppender" >

        <param name="File" value="D:\ESSReport\Logs\ESSlog.log" />

        <param name="AppendToFile" value="true" />

  <rollingStyle value="Size" />

  <maxSizeRollBackups value="5" />

  <maximumFileSize value="4MB" />

  <staticLogFileName value="true" />

  <layout type="log4net.Layout.PatternLayout">

   <param name="ConversionPattern" value="%newline%-5p%d{yyyy-MM-dd hh:mm:ss} [%thread] [%logger] [%line] %newline - %message"  />

  </layout>

</appender> 
```

我已将 dll 添加到我的网站

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-13T09:12:50.070

您可能缺少配置部分注册。

以下是如何注册自定义部分的示例代码：

```
<configuration>
  <configSections>
    <sectionGroup name="LoggerConfiguration">
      <section name="GPWFLogger" type="GP.Solutions.WF.Entities.LoggerConfiguration,GPWFLogger" allowDefinition="Everywhere" allowLocation="true"/>
    </sectionGroup>
  </configSections>

  <LoggerConfiguration>
    <GPWFLogger
      ConnectionStringName="ASPNETDB"
      LogLevel="Full"
      LogPrimaryTarget="SqlServer"
      LogFilePath="GPWFwebClient.log" />     
  </LoggerConfiguration> 
```

注意 LoggerConfiguration 注册在 sectionGroup 中。您可以在您的情况下使用此原则。

# delphi - Delphi XE2 DataSnap 服务器 - 记录客户端连接用户/属性

> ID：11011461
> 
> 赞同：1
> 
> 时间：2012-06-13T08:59:56.263
> 
> 标签：delphi, http, rest, delphi-xe2, datasnap

我正在构建一个 XE2 DataSnap 服务器，它将为来自 REST 客户端的连接提供服务。我的 DSServerClass LifeCycle 属性设置为“调用”。我想要做的是记录所有客户端连接到服务器的详细信息，包括以下详细信息：用户名、IP 地址、协议、应用程序名称。我目前可以使用以下事件获取这些详细信息：

DSAuthenticationManager - UserAuthenticate() : 用户名、协议（使用传入的标准参数）

DSServer - Connect() ：协议、IP 地址、应用程序名称（使用 DSConnectEventObject.ChannelInfo.ClientInfo）

我想要做的只是为所有详细信息记录一次，但似乎我无法在一个事件中获得我需要的所有详细信息。我尝试在类中使用共享私有变量，但正如预期的那样，这会产生不一致的结果——错误的 IP 地址与错误的用户名。还有其他方法可以实现我想要的吗？

乔纳森

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T15:02:23.397

```
procedure TServerContainer1.DSServer1Connect(DSConnectEventObject: TDSConnectEventObject);
begin
  Form1.Memo1.Lines.Add(Format('Conn->UserName=%s, Password=%s', [
    DSConnectEventObject.ConnectProperties[TDBXPropertyNames.UserName],
    DSConnectEventObject.ConnectProperties[TDBXPropertyNames.Password]
    ]));
  // 取 Client 端的IP 和 Port
  Form1.Memo1.Lines.Add('IP =' + DSConnectEventObject.ChannelInfo.ClientInfo.IpAddress + ':'
    + DSConnectEventObject.ChannelInfo.ClientInfo.ClientPort);
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T09:34:16.323

您可以使用`TDSServer.OnConnect`事件（在 之后调用`TDSAuthenticationManager.OnUserAuthenticate`）。在那里，您可以访问`ChannelInfo.ClientInfo`您发现的内容，也`ConnectProperties`可以从中读取属性值，如下所示：

```
 Scheme := ConnectProperties.Values[TDBXPropertyNames.DSAuthenticationScheme];
  UserName := ConnectProperties.Values[TDBXPropertyNames.DSAuthenticationUser];
  Password := ConnectProperties.Values[TDBXPropertyNames.DSAuthenticationPassword]; 
```

# jquery - IE 7,8 中 Jquery 对话框的 CSS 问题

> ID：11011462
> 
> 赞同：0
> 
> 时间：2012-06-13T09:00:01.367
> 
> 标签：jquery, css, jquery-ui, jquery-dialog

[我在我的网站工作网站](http://wehavethecandidate.co.uk/)上使用 Jquery 对话框作为简历注册表单，当向我们发送您的简历 [图片] 在网站上单击时出现对话框，我已经自定义了 jquery 对话框的原始 css 以适应客户需要，css在除IE8、7之外的所有浏览器中都能正常工作。我只是找不到找出css为什么不工作的方法，我花了几个小时都没有成功，任何人都可以建议我或提供任何帮助谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T12:41:13.903

两件事情：

1.  您的模态窗口正在使用 iframe，`border:0`因为 IE 正在使用边框呈现 iframe。

2.  IE 不知道如何使 iframe 背景透明或没有正确继承它。我没有时间为此寻找适当的解决方法，但简单的解决方法是`.modal`在 style.css 中将背景颜色添加到您的类中。只要搭配漂亮的蓝色，你就会很高兴。

# ruby - 开始撬壳

> ID：11011464
> 
> 赞同：0
> 
> 时间：2012-06-13T09:00:09.837
> 
> 标签：ruby, pry

[我已经从github](https://github.com/pry/pry/downloads)下载了shell`pry`替代方案的 windows zip 包。我已经解压了包裹。`irb`

我如何启动撬壳？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T09:08:56.137

你不需要 zip 包，Pry 只是一个普通的 gem。在终端——或者现在 Windows 所称的任何终端中——执行以下操作（假设您不需要`sudo`Windows 上的 Ruby 之类的东西）：

```
gem install pry pry-doc 
```

完毕。现在从`pry`.

# search - 如何替换包含括号的文本模式？

> ID：11011467
> 
> 赞同：1
> 
> 时间：2012-06-13T09:00:20.003
> 
> 标签：search, sed, replace

我想在所有文件中递归地用另一条指令替换包含括号的特定指令。

例如，

```
mov r1, [r1, r2] 
```

和

```
sub [r8, r9], r10 
```

当我使用

```
 sed -i.bak "s/mov r1, [r1, r2]/sub [r8, r9], r10/g" file.S 
```

它不起作用。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T09:09:50.140

两件事情。

1.  您需要对匹配表达式中的括号进行转义，它们在正则表达式中具有特殊含义。
2.  您应该保护 sed 脚本免受 shell 扩展。使用双引号会强制展开。单引号关闭扩展。

因此：

```
's/mov r1, \[r1, r2\]/sub [r8, r9], r10/g' 
```

在制定正确的脚本时，您也许可以跳过内联编辑。像这样：

```
sed 's/mov r1, \[r1, r2\]/sub [r8, r9], r10/g' file.S 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T09:08:19.563

尝试使用转义括号`'s/mov r1, \[r1, r2\]/sub \[r8, r9\], r10/g'`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T12:19:30.653

在 sed 的替换命令中转义括号 -- [ ] -- 将按照您期望的方式处理您的文件。这是用括号转义的命令重写的：

```
sed 's/mov r1, \[r1, r2\]/sub [r8, r9], r10/g' file.S 
```

# c - 如何在C中获取结构字段

> ID：11011468
> 
> 赞同：1
> 
> 时间：2012-06-13T09:00:39.720
> 
> 标签：c, struct

我有代码：

```
main() 
{
   typedef struct
   {
      int data;
   } Information;

   typedef Information *PtrInformation;

   typedef struct InformationListStruct *PtrInformationListStruct;

   typedef struct InformationListStruct
   {
      PtrInformationListStruct ptrNext;
      PtrInformation ptrInf;
   } PtrInformationListStructElement;

   //==============================

   PtrInformationListStruct list;
   list = (PtrInformationListStruct)malloc(sizeof(InformationListStruct));
   PtrInformation ptr = (*list).ptrInf;  // error !!!

} 
```

编译器抛出错误：

*   "ptrInf" 不是 InformationListStruct 的成员，因为该类型尚未在函数 main() 中定义

如果我把这一行：

```
typedef struct InformationListStruct *PtrInformationListStruct; 
```

在这行之后：

```
 typedef struct InformationListStruct
   {
      PtrInformationListStruct ptrNext;
      PtrInformation ptrInf;
   } PtrInformationListStructElement; 
```

然后出现其他错误：

*   函数 main() 中预期的类型名称
*   声明缺失；在函数 main()

**如何正确获取“ptrInf”？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T09:22:53.017

[你不应该`malloc()`在 C 中强制转换 return 。](https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc/605858#605858)另外，使用`sizeof`，不要重复类型名称：

```
list = malloc(sizeof *list); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T09:03:40.937

你需要

```
 list = (PtrInformationListStruct)malloc(sizeof(struct InformationListStruct));
 //                                               |
 //                                          note struct keyword 
```

或者

```
 list = (PtrInformationListStruct)malloc(sizeof(PtrInformationListStructElement)); 
```

因为你有`typedef`它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T09:05:58.330

您正在使用哪个编译器，在 Visual Studio 中，您的代码编译成功。请避免在函数体内进行类型定义。

# php - 返回上一页并保存搜索条件

> ID：11011481
> 
> 赞同：1
> 
> 时间：2012-06-13T09:01:17.030
> 
> 标签：php, html, web

我有一个 index.html 页面，其中是一个带有一些字段的 html 表单，例如 AUTHOR 和 TITLE。这些字段被动态地创建为 DOM 对象。用户在表单中输入数据并单击提交。然后 index.html 将数据发布到 search.php。这个 php 站点在 mysql 数据库中搜索并将搜索结果写入 search.php 上的 html 表中。我在 search.php 上添加了一个返回按钮。当用户单击 BACK 按钮时，此按钮将返回到 index.html。我希望用户可以在字段中看到搜索数据。

例如，用户在作者字段中输入：Paulo Coelho，在标题字段中输入：The Alchemist。然后点击提交按钮，search.php 在数据库中搜索并写出结果。在用户想要返回上一页并点击 BACK 按钮之后。这又回到了 index.html，这里的 AUTHOR 字段由 Paulo Coelho 填充，TITLE 由 The Alchemist 填充。我想为这个问题找到任何解决方案。我已经有了一些起点，例如 php 会话、cookie 或将搜索条件 POST 回 index.html。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T09:08:19.303

您是否尝试过`window.history.back()`在输入框中键入的任何值都将被保留：

```
<input type="button" value="Back" onclick="javascript:window.history.back();" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T09:09:00.547

首先将 index.html 更改为 index.php，以便您可以在那里使用 php 代码，然后将表单值存储在会话中，然后回显会话值。

首先开始两个页面的会话..

```
<?php session_start(); ?> 
```

像这样将 Posted 值存储在会话中。

```
<?php 
           $_SESSION['fieldvalue1'] = $_POST['fieldvalue1'];
           $_SESSION['fieldvalue2'] = $_POST['fieldvalue2'];    
?> 
```

然后以类似的形式回显到值

```
 <input type="text" value="<?php 
    if(isset($_SESSION['fieldvalue2']))
    {
        echo $_SESSION['fieldvalue2']
    }
    unset($_SESSION['fieldvalue2'])
    ?>" name = "fieldvalue2"> 
```

# java - Java：将两个输入的整数加 2

> ID：11011483
> 
> 赞同：2
> 
> 时间：2012-06-13T09:01:24.997
> 
> 标签：java, increment

有人可以帮我..刚开始java ..:(如何根据给定的最小输入值、最大输入值和递增值显示所有可能的值？

例如：最小值：1 最大值：10 增量值：2

结果将是：1、3、5、7、9

这就是我到目前为止所得到的..

```
public class DisplayIncrement {
public static void main(String []args){

    int min, max, increment;

    Scanner in = new Scanner(System.in);

    System.out.println("Enter min value: ");
    in.nextInt();
    System.out.println("Enter max value: ");
    in.nextInt();
    System.out.println("Enter increment value: ");
    in.nextInt();

    int i;
    for(i=0; i<=10; i+=2){
    System.out.println(i);
    }
} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T09:12:50.910

一些注意事项：

1-`in.nextInt();`从用户那里读取一个整数，阻塞直到用户在控制台中输入一个整数并按下`ENTER`。必须保存结果整数以便以后使用它，并将其保存到变量中，如下所示：

```
int value = in.nextInt(); 
```

在您的代码中，您需要将用户输入的 3 个整数分配给相应的变量：

```
System.out.println("Enter min value: ");
min = in.nextInt();
System.out.println("Enter max value: ");
max = in.nextInt();
System.out.println("Enter increment value: ");
increment = in.nextInt(); 
```

2-您很好地实现了循环，但您只需要使用用户的输入而不是使用显式整数：

```
for(int i = min; i <= max; i += increment)
{
    System.out.println(i);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T09:04:46.973

```
 System.out.println("Enter min value: "); 
 int minVal =  in.nextInt(); 
    System.out.println("Enter max value: "); 
   int maxVal =  in.nextInt(); 
    System.out.println("Enter increment value: "); 
 int increment = in.nextInt(); 

for(i=minVal; i<=maxVal; i+=incremement){ 
    System.out.println(i); 
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T09:06:22.573

首先，您声明了所需的整数，但是，您实际上并没有使用它们。

因此，当您调用方法时`in.nextInt();`，您实际上是在“获取”一个整数。因此，您可以将整数 min、max 和 increment 分别设置为该方法。像这样，

```
 System.out.println("Enter min value: ");
min = in.nextInt();
    System.out.println("Enter max value: ");
   max = in.nextInt();
    System.out.println("Enter increment value: ");
  increment =  in.nextInt(); 
```

因此，对于完整的答案，这样的事情应该可以工作。

```
public class DisplayIncrement {
public static void main(String []args){

    int min, max, increment;

    Scanner in = new Scanner(System.in);

    System.out.println("Enter min value: ");
   min = in.nextInt();
    System.out.println("Enter max value: ");
   max = in.nextInt();
    System.out.println("Enter increment value: ");
  increment =  in.nextInt();

    for(int i=min; i<=max; i+=increment){
    System.out.println(i);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T09:04:09.550

```
 public class DisplayIncrement {
public static void main(String []args){

int min, max, increment;

Scanner in = new Scanner(System.in);

System.out.println("Enter min value: ");
int min=in.nextInt();
System.out.println("Enter max value: ");
int max=in.nextInt();
System.out.println("Enter increment value: ");
int inc=in.nextInt();

int i;
for(i=min; i<max; i+=inc){
    System.out.println(i);
}
}   
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T09:06:44.603

您的代码中的缺陷很明显，但是...

```
public class DisplayIncrement {
   public static void main(String []args) {

   int min, max, increment;
   Scanner in = new Scanner(System.in);
   System.out.println("Enter min value: ");
   min = in.nextInt();
   System.out.println("Enter max value: ");
   max = in.nextInt();
   System.out.println("Enter increment value: ");
   increment = in.nextInt();

   for(int i = min; i <= max; i += increment)
      System.out.println(i);
   }   
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-13T09:08:50.623

```
 public class DisplayIncrement {

public static void main(String []args){

int min, max, increment;

Scanner in = new Scanner(System.in);

System.out.println("Enter min value: ");
  min =  in.nextInt();
System.out.println("Enter max value: ");
 max =   in.nextInt();
System.out.println("Enter increment value: ");
 increment =  in.nextInt();

for(; min<=max; min+=increment ){
System.out.println(min);
}
}   

 } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-13T09:13:16.547

```
public static void main(String []args){

int min, max, increment;

Scanner in = new Scanner(System.in);

System.out.println("Enter min value: ");
int minval=in.nextInt();
System.out.println("Enter max value: ");
int maxval=in.nextInt();
System.out.println("Enter increment value: ");
int incr=in.nextInt();

int i;
for(i=minval; i<=maxval;i+=incr){
System.out.println(i);
} 
```

}

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-09-26T05:04:26.440

最后不要忘记关闭扫描仪。

```
import java.util.Scanner;
public class DisplayIncrement{

public static void main(String[] args) {

    int min, max, increment;

    Scanner in = new Scanner(System.in);

    System.out.println("Enter min value: ");
    min = in.nextInt();
    System.out.println("Enter max value: ");
    max = in.nextInt();
    System.out.println("Enter increment value: ");
    increment = in.nextInt();

  //for(initial value; condition; increment/decrement)
    for(int i=min; i <=max; i+= increment){
    System.out.println(i);
    }
        in.close();
}

} 
```

# twitter - 推文中的推特图像缩略图

> ID：11011486
> 
> 赞同：2
> 
> 时间：2012-06-13T09:01:41.553
> 
> 标签：twitter

如何像 instagram 一样在 Twitter 中显示图片？twitter 试图在页面中找到哪些元标记以显示为图像缩略图？就像提供 twitpic 或 instagram 链接一样。

像这个例子![推特帖子示例](../Images/c6228ff6bbad98a0c1b37ccb3b0e6030.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T12:34:54.543

我使用[http://embed.ly/](http://embed.ly/)

您可以使用该服务创建所有图像服务的正则表达式，找到这些链接，将它们传递给 Embed.ly 并获取图像缩略图。

您可以为最常见的服务编写一组简单的正则表达式，这是我使用的一个。

```
'#youtube\.com\/watch\?v=([_-\d\w]+)#i' => 'http://i.ytimg.com/vi/%s/1.jpg',
'#youtu\.be\/([_-\d\w]+)#i'             => 'http://i.ytimg.com/vi/%s/1.jpg',
'#qik\.ly\/([_-\d\w]+)#i'                       => 'http://qik.ly/%s.jpg',
'#twitpic\.com\/([\d\w]+)#i'            => 'http://twitpic.com/show/thumb/%s',
'#twitgoo\.com\/([\d\w]+)#i'            => 'http://twitgoo.com/show/thumb/%s',
'#hellotxt\.com\/i\/([\d\w]+)#i'        => 'http://hellotxt.com/image/%s.s.jpg',
'#ts1\.in\/(\d+)#i'                         => 'http://ts1.in/mini/%s',
'#moby\.to\/\?([\w\d]+)#i'                      => 'http://moby.to/%s:square',
'#mobypicture\.com\/\?([\w\d]+)#i'          => 'http://mobypicture.com/?%s:square',
'#twic\.li\/photo\/([\w]+)#i'           => 'http://twic.li/userimg/thumb_%s.jpg',
'#tweetphoto\.com\/(\d+)#'                      => 'http://api.plixi.com/api/tpapi.svc/imagefromurl?url=http://tweetp$
'#plixi\.com\/p\/(\d+)#'            => 'http://api.plixi.com/api/tpapi.svc/imagefromurl?url=http://plixi.$
'#phz\.in\/([\d\w]+)#'              => 'http://api.phreadz.com/thumb/%s?t=code',
'#imgur\.com\/([\w]{5})[\s\.ls][\.\w]*#i' => 'http://imgur.com/%ss.png',
'#imgur\.com\/gallery\/([\w]+)#i'           => 'http://imgur.com/%ss.png',
'#brizzly\.com\/pic\/([\w]+)#i'             => 'http://pics.brizzly.com/thumb_sm_%s.jpg',
'#img\.ly\/([\w\d]+)#i'             => 'http://img.ly/show/thumb/%s',
'#picplz\.com\/([\d\w\.]+)#'            => 'http://picplz.com/%s/thumb',
'#pk\.gd\/([\d\w]+)#i'              => 'http://img.pikchur.com/pic_%s_s.jpg',
'#pikchur\.com\/([\d\w]+)#i'            => 'http://img.pikchur.com/pic_%s_s.jpg',
'#znl\.me\/([\d\w]+)#'              => 'http://www.zannel.com/webservices/content/%s/Image-164x123-JPG.jp$
'#yfrog\.com\/([\d\w]+)#'                       => 'http://yfrog.com/%s:small',
'#instagr\.am\/p\/([_-\d\w]+)#i'        => 'http://instagr.am/p/%s/media/?size=t',
'#instagram\.com\/p\/([_-\d\w]+)#i'         => 'http://instagr.am/p/%s/media/?size=t',
'#twitrpix.com/([\d\w]+)#i'                 => 'http://img.twitrpix.com/thumb/%s', 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-31T11:30:03.540

您可以为此使用[推特卡](https://dev.twitter.com/cards/types/photo)

```
<meta name="twitter:card" content="photo" />
<meta name="twitter:site" content="@flickr" />
<meta name="twitter:title" content="Mountain sunset" />
<meta name="twitter:image" content="http://farm8.staticflickr.com/7334/11858349453_e3f18e5881_z.jpg" />
<meta name="twitter:url" content="https://www.flickr.com/photos/reza-sina/11858349453/" /> 
```

您可以在[twitter 卡验证器上测试您的卡](https://cards-dev.twitter.com/validator)

如果您发现任何[robote.text](http://www.robotstxt.org/robotstxt.html)问题，您可以按照[twitter 文档中的方式进行操作](https://dev.twitter.com/cards/getting-started#crawling)

# javascript - IE 8 上的 Javascript 错误

> ID：11011487
> 
> 赞同：1
> 
> 时间：2012-06-13T09:01:44.597
> 
> 标签：javascript, google-maps-api-3, internet-explorer-8

我对 Internet Explorer 8 引发的一些错误感到有些困惑，但 Firefox 却没有。

我看到以下错误：

```
Webpage error details

User Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windwos NT 5.1; Trident/4.0; .NET CLR 2.0.50727; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729)
Timestamp: Wed, 13 Jun 2012 08:33:22 UTC

Message: Object expected
Line: 3
Char: 1
Code: 0
URI: http://<ipAddress>/.../locations.js

Message: Syntax error
Line: 34
Char: 11
Code: 0
URI: http://<ipAddress>/.../testMap1.html 
```

我正在使用以下文件...

testMap1.html：

```
 <div id="map_canvas" style="width: 1200px; height: 700px;">map div foo</div>
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript" src="/static/app/foo/locations.js"></script>
    <!--<script type="text/javascript" src="/static/app/foo/script.js"></script>-->
    <script type="text/javascript">

  var centerPoint = new google.maps.LatLng(9.449062,7.950439);

  var parliament = new google.maps.LatLng(9.449062,7.950439);
  var parliament1 = new google.maps.LatLng(34.449062,7.950439);
  var marker;
  var map;
  var i;

  function initialize() {
      var mapOptions = {
        zoom: 2,
        mapTypeId: google.maps.MapTypeId.HYBRID,
        center: centerPoint
      };

      map = new google.maps.Map(document.getElementById("map_canvas"),
              mapOptions);

      for (i = 0; i < locations.length; i++) {
          marker = new google.maps.Marker({
            map:map,
            draggable: false,
            animation: google.maps.Animation.DROP,
            position: new google.maps.LatLng(locations[i][0], locations[i][1]),
          });
          google.maps.event.addListener(marker, 'click', toggleBounce);
      }
  }

// for toggleBounce, need to add ", toggleBounce" back into previous brackets.

  function toggleBounce() {

      if (marker.getAnimation() != null) {
        marker.setAnimation(null);
      } else {
      marker.setAnimation(google.maps.Animation.BOUNCE);
      }

  }
    </script> 
```

位置.js：

```
 var locations = [
     [9.449062, 7.950439, 0],
     [34.449062, 10.950439, 50]
  ]; 
```

关于为什么这不起作用的任何想法？任何致盲错误？

问候，

马特

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T09:05:49.737

从此行中删除尾随逗号：

```
position: new google.maps.LatLng(locations[i][0], locations[i][1]), 
```

它会导致 IE 出现问题。

```
marker = new google.maps.Marker({
   map:map,
   draggable: false,
   animation: google.maps.Animation.DROP,
   position: new google.maps.LatLng(locations[i][0], locations[i][1]) //removed comma
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T10:17:59.703

ioseb 已经发布了完美的答案。但是，为了防止将来出现此类错误，我建议使用 google 闭包编译器，如果发生此类错误，它将警告您。你在这里：[http ://code.google.com/p/closure-compiler/downloads/list](http://code.google.com/p/closure-compiler/downloads/list)

# android - 多个主屏幕小部件的单个配置活动

> ID：11011491
> 
> 赞同：10
> 
> 时间：2012-06-13T09:02:08.287
> 
> 标签：android

我有一个用于我的 Android 应用程序的不同主屏幕小部件的配置活动。

我在配置活动中得到 WidgetId，如下所示：

```
widgetid = extras.getInt(
       AppWidgetManager.EXTRA_APPWIDGET_ID, 
       AppWidgetManager.INVALID_APPWIDGET_ID); 
```

但稍后在代码中我想知道哪个 WidgetProvider 类调用了配置活动。我怎样才能做到这一点？

**附言**

我找到了答案：

```
AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(context);
AppWidgetProviderInfo appWidgetManager.getAppWidgetInfo(widgetid); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-12-02T10:07:26.917

使用[AppWidgetManager.getAppWidgetInfo()](https://developer.android.com/reference/android/appwidget/AppWidgetManager.html#getAppWidgetInfo(int))如

```
AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(context);
AppWidgetProviderInfo appWidgetManager.getAppWidgetInfo(widgetid); 
```

# c# - 如何使用内文定位网页元素

> ID：11011495
> 
> 赞同：2
> 
> 时间：2012-06-13T09:02:30.830
> 
> 标签：c#, selenium, element, getelementsbytagname, qwebelement

我使用**selenium**和**C#**编写测试，但现在我遇到了一个问题。

这是我的html。如何在网页上找到“100”？

```
< ul>

 < li class=""> 100 < /li>

 < li class=""> 200 < /li>

 < li class=""> 300 < /li>

 < li class=""> 400 < /li>

 < li class=""> 500 < /li>

< /ul> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-13T09:16:58.413

```
IWebDriver Driver = new FirefoxDriver();
IWebElement element = Driver.FindElement(By.XPath("//li[text()=' 100 ']")); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-13T09:33:18.610

也可以不用 xpath 来完成：

```
driver.FindElements(By.TagName("li")).Where(elem => elem.Text.Trim() == "100").FirstOrDefault(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-29T23:51:11.707

我更喜欢这样做：

1.  获取页面上的所有元素。
2.  遍历检查文本的元素。

```
IList<IWebElement> allElements = driver.FindElements(By.CssSelector("*"));
foreach (var element in allElements)
{
    if (element.Text == "My inner text that I am looking for") { element.Click(); }
} 
```

# c++ - 如何将 0（并且只有 0）转换为我的数据结构

> ID：11011509
> 
> 赞同：0
> 
> 时间：2012-06-13T09:03:31.437
> 
> 标签：c++, types, typeconverter

我正在实现一个 SI 单位类型系统。为了确保单位不会漏进和漏出，我不希望将任何值隐式转换为单位，反之亦然。但是，能够将 0 转换为我的单位系统真的很方便，有点像你可以用指针做的那样，其中 0 隐式转换为空指针，但没有其他值可以。

所以我的问题是：我可以复制这种从 0 到空指针的隐式转换吗？或者我可以利用它来实现同样的目标吗？

例如，您会如何看待这样的构造函数？

```
constexpr unit_t(void*) : _value(0) { } 
```

注意：单位本身是在类型中，而不是在值中。

**编辑：为什么要从 0 转换为单位？**

我想要这个的原因是编写不了解单位的算法。例如，如果您有一个长度矩阵并且想要反转它，您首先计算它的行​​列式，如果它不为 0，则返回逆矩阵（否则，这是一个错误）。

因此，将 0 文字视为通用单元会很方便。这正是指针所发生的事情。您可以键入：

```
void* c = 0; 
```

但不是：

```
void f(int a) { void *c = a; } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T09:55:20.110

经典的解决方案是指向某个用户无法命名的私有类型的指针。那样的话，他能得到匹配的东西的唯一方法是通过隐式转换 from `0`。（使用`void*`意味着几乎可以传递任何可以转换为指针的东西。）

请注意，此解决方案仅适用于*整数*常数 0。如果用户想使用`0.0`（因为他认为`double`值更有意义），他不能。

您也可以考虑使用默认构造函数，以便客户端可以`SomeUnit()`在需要默认初始化时简单地编写。

# java - 如何在 Android 中读取和写入数据到 COM/Serial 端口？

> ID：11011515
> 
> 赞同：14
> 
> 时间：2012-06-13T09:03:54.067
> 
> 标签：java, android, javax.comm

我必须使用 Android 读取和写入数据到设备的 COM 端口。我为此使用 javax.comm 包，但是当我安装 apk 文件时，它没有显示设备的任何端口。我需要在清单文件中添加任何权限吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-25T17:39:19.837

您的问题与操作系统有关。[Android 在后台运行 Linux](http://developer.android.com/about/index.html)，Linux 对待串行端口的方式与 Windows 不同。`javax.comm`还包含`win32com.dll`一个[驱动程序文件](http://www.fileinfo.com/extension/dll)，您将无法在 Android 设备上安装该文件。如果您确实找到了实现您想要做的事情的方法，那么您实际上无法在 Linux 环境中寻找“COM”端口。串行端口将使用不同的名称。

```
 Windows Com Port   Linux equivalent  
      COM 1           /dev/ttyS0  
      COM 2           /dev/ttyS1
      COM 3           /dev/ttyS2 
```

因此，假设您的想法可行，您必须寻找这些名称。

幸运的是，Android 确实提供了与 USB 设备接口的规定（我假设您想要连接到 USB 设备，而不是并行或 RS-232 端口）。为此，您需要将设备设置为[USB 主机。](http://developer.android.com/guide/topics/connectivity/usb/host.html)以下是您要执行的操作：

1.  得到一个[`USBManager`.](http://developer.android.com/reference/android/hardware/usb/UsbManager.html)
2.  找到您的设备。
3.  获取[`USBInterface`](http://developer.android.com/reference/android/hardware/usb/UsbInterface.html)和[`USBEndpoint`](http://developer.android.com/reference/android/hardware/usb/UsbEndpoint.html)。
4.  打开一个连接。
5.  传输数据。

这是我对你将如何做的粗略估计。当然，你的代码会有更成熟的做事方式。

```
String YOUR_DEVICE_NAME;
byte[] DATA;
int TIMEOUT;

USBManager manager = getApplicationContext().getSystemService(Context.USB_SERVICE);
Map<String, USBDevice> devices = manager.getDeviceList();
USBDevice mDevice = devices.get(YOUR_DEVICE_NAME);
USBDeviceConnection connection = manager.openDevice(mDevice);
USBEndpoint endpoint = device.getInterface(0).getEndpoint(0);

connection.claimInterface(device.getInterface(0), true);
connection.bulkTransfer(endpoint, DATA, DATA.length, TIMEOUT); 
```

额外的阅读材料：http: [//developer.android.com/guide/topics/connectivity/usb/host.html](http://developer.android.com/guide/topics/connectivity/usb/host.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-09-05T17:07:45.277

我不是专家，但对于所有想要连接串行 RS-232 端口或打开串行端口但无法通过`UsbManager`.

```
mDrivers = new Vector<Driver>();
LineNumberReader r = new LineNumberReader(new FileReader("/proc/tty/drivers"));
String l;
while ((l = r.readLine()) != null) {
    String drivername = l.substring(0, 0x15).trim();
    String[] w = l.split(" +");
    if ((w.length >= 5) && (w[w.length - 1].equals("serial"))) {
        mDrivers.add(new Driver(drivername, w[w.length - 4]));
    }
} 
```

找到所有驱动程序后，遍历所有驱动程序以获取所有设备，使用如下所示：

```
mDevices = new Vector<File>();
File dev = new File("/dev");

File[] files = dev.listFiles();

if (files != null) {
    int i;
    for (i = 0; i < files.length; i++) {
        if (files[i].getAbsolutePath().startsWith(mDeviceRoot)) {
            Log.d(TAG, "Found new device: " + files[i]);
            mDevices.add(files[i]);
        }
    }
} 
```

这是`Driver`类构造函数，有两个成员变量：

```
public Driver(String name, String root) {
    mDriverName = name;
    mDeviceRoot = root;
} 
```

要打开串行端口，您可以使用[Android SerialPort API](https://code.google.com/archive/p/android-serialport-api/)。只需在您的设备上打开串行端口，然后`write`. （您必须知道您的设备路径和波特率。例如，我的设备是 ttyMt2，波特率 96000。）

```
int baudRate = Integer.parseInt("96000");
mSerialPort = new SerialPort(mDevice.getPath(), baudRate, 0);
mOutputStream = mSerialPort.getOutputStream();
byte[] bytes = hexStr2bytes("31CE");
mOutputStream.write(bytes); 
```

[您可以从https://github.com/licheedev/Android-SerialPort-Tool](https://github.com/licheedev/Android-SerialPort-Tool)下载完整的项目，而不是在此代码上浪费时间。

# algorithm - 确定可能组合数量的算法

> ID：11011516
> 
> 赞同：0
> 
> 时间：2012-06-13T09:03:55.780
> 
> 标签：algorithm, permutation

我需要为一个给定的问题编写一个算法：你有无限的便士、五分钱、一角硬币和四分之一。编写一个类方法，该方法将输出所有硬币组合，使总数为 99 美分。

这似乎是一个排列 nPr 问题。有什么算法吗？

问候， 普里扬克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-17T21:55:26.710

我认为使用递归 wa 面额表最容易回答这个问题

{5000, 2000, ... 1} // 50 美元兑换一便士

你会开始：

```
WaysToMakeChange(10000, 0) // ie. $100...highest denomination index is 0 ($50)

WaysToMakeChange(amount, maxdenomindex) would calculate using 0 or more of the maxdenom
the recurance is something like
WaysToMakeChange(amount - usedbymaxdenom, maxdenomindex - 1) 
```

我对此进行了编程，可以通过多种方式对其进行优化：

1) 多线程

2）缓存。这个非常重要。算法工作方式的 B/c，WaysToMakeChange(m,n) 将使用相同的初始值多次调用：例如。更改 $100 可以通过以下方式完成：1 $50 + 0 $20's + 0 $10's + 以最高货币 $5 变为 $50 美元的方式（即 WaysToMakeChange(5000, index for $5) 0 $50 + 2 $20's + 1 $10' s +ways to $50 dollar with high currency $5 (ie. WaysToMakeChange(5000, index for $5) 显然 WaysToMakeChange(5000, index for $5) 可以被缓存，因此不需要进行后续调用

3）短路最低递归。假设 static const int denom[] = {5000, 2000, 1000, 500, 200, 100, 50, 25, 10, 5, 1};

WaysToMakeChange(int total, int coinIndex) 的第一个测试应该是这样的： if( coin[_countof(coins)-1] == 1 && coinIndex == _countof(coins) - 2){ return total / coin[_countof(硬币）-2] + 1; }

这是什么意思？好吧，如果你的最低面额是 1，那么你只需要走到第二低的面额（比如镍）。然后剩下 1+ 总/第二低的面额。例如：49c -> 5 个镍币 + 4 个便士。4 镍币 + 9 便士....49 便士 = 1+ 总数/剩下的第二个最低面额

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T09:14:25.807

这个问题似乎是一个[丢番图方程](http://en.wikipedia.org/wiki/Diophantine_equation)，即对于 a*x + b*y + ... = n，找到一个解决方案，其中所有字母都是整数。最简单但不是最优雅的解决方案是迭代解决方案（在 python 中显示，注意我跳过变量 l 因为它类似于数字 1）：

```
dioph_combinations = list()
for i in range(0, 99, 25):
    for j in range(0, 99-i, 10):
        for k in range(0, 99-i-j, 5):
            for m in range(0, 99-i-j-k, 1): 
                if i + j + k + m == 99:
                    dioph_combinations.append( (i/25, j/10, k/5, m) ) 
```

结果列表 dioph_combinations 将包含可能的组合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T09:15:00.870

最简单的方法可能是花几分钟时间思考这个问题。有一种相对不错的递归算法，可以巧妙地用于记忆或重新加工成动态编程解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T18:37:30.237

这个问题是经典的动态规划问题。你可以在这里读到它

[http://www.algorithmist.com/index.php/Coin_Change](http://www.algorithmist.com/index.php/Coin_Change)

蟒蛇代码是：

```
def count( n, m ):
    if n == 0:
        return 1
    if n < 0:
        return 0
    if m <= 0 and n >= 1:
        return 0

    return count( n, m - 1 ) + count( n - S[m], m ) 
```

这里 S[m] 给出面额的值，S 是面额的排序数组

# android - 如何查找另一部手机处于开启或关闭状态

> ID：11011518
> 
> 赞同：0
> 
> 时间：2012-06-13T09:04:06.907
> 
> 标签：android, telephony

**是否有可能找到另一个电话号码是打开或关闭**。

我认为这取决于服务提供商，在印度没有服务提供商提供信息。在乌拉圭这是可能的！如果可能的话，我怎么能在印度检查呢？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:36:38.330

没有标准可以确定手机是开机还是关机。我们大多数人都可以通过它立即进入语音邮件来判断手机在拨打电话时是否关机。发生这种情况时通常没有回铃，但可能因运营商而异。使用此作为确定的另一个问题是，用户可以选择避免呼叫，如果他们足够快，可能会给呼叫者类似的结果。

您可以使用通话进度分析来确定手机是打开还是关闭，但由于上述原因，它不会 100% 准确。获得呼叫进度分析的一种方法是将[呼叫控制 XML (CCXML)](http://www.w3.org/TR/ccxml/)与具有良好呼叫进度分析的平台（如[Voxeo 的 Prophecy](http://evolution.voxeo.com/) ）一起使用。如果您查看他们[关于 CCXML 的文档，](http://docs.voxeo.com/ccxml/1.0-final/)就会有一个关于外拨的部分，其中涵盖了呼叫进度分析。您将查看在应答之前是否没有回铃，以确定电话是否已关闭。

# .htaccess - .htaccess url重写后重定向旧页面url

> ID：11011526
> 
> 赞同：0
> 
> 时间：2012-06-13T09:04:24.563
> 
> 标签：.htaccess, mod-rewrite, redirect, rewrite, rule

我已经用 htaccess 重写了我的 url，现在我想将旧的 url 重定向到新的 url，但我不知道该怎么做。

这是我使用的重定向规则：

```
RewriteRule ^page/([^/]*)/$ /page.php?name=$1 [L] 
```

旧网址如下所示：page.php?name=page-name

新的 url 看起来像这样：/page/page-name/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T13:04:27.043

当您想要使用 GET 参数重定向 url 时，这有点复杂。

这是一个技巧：

```
RewriteRule ^page\.php$ %{QUERY_STRING} [C]
RewriteRule name=(.*) /page/$1/? [R=301,L] 
```

说明：

*   首先，您重定向`page.php?name=page-name`到`?name=page-name`
*   然后，您要求对此结果使用以下规则（带`[C]`标签）
*   第三，您重定向`page-name`，选择`(.*)`to`page/page-name/`
*   最后一招，如果你不放最后一个`?`，你的查询字符串将被附加到你的结果中，你将拥有这种 url : `page/page-name/?name=page-name`。使用无用`?`的擦除旧的 GET 参数。

在这里找到了一些信息：

*   [Apache mod_rewrite 文档](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule)
*   [如何剥离查询字符串](http://dranger.com/weblog/entry/apache_mod_rewrite_strip_query_string.html)

# command-line-arguments - 带有命令行参数的 Autohotkey 脚本运行程序

> ID：11011527
> 
> 赞同：4
> 
> 时间：2012-06-13T09:04:35.483
> 
> 标签：command-line-arguments, autohotkey

我正在使用 autohotkey 来自动化一些手动过程。我必须运行一个接受几个命令行参数的 java 命令行程序（.java）。

在自动化中执行一些预定义的任务后，我想从 autohotkey 运行这个 java 程序。

我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T14:40:23.070

我认为这就是你要找的。在此示例中，我在 IE 中覆盖了公司默认搜索引擎。

```
#i::Run "C:\Program Files\Internet Explorer\iexplore.exe" http://www.google.com 
```

基本上，将运行指针放在双引号和之后的参数之间。让我知道你是如何解决的。

# spring - @Resource dataSource mappedName - 覆盖以在非 JNDI 环境中进行测试

> ID：11011536
> 
> 赞同：1
> 
> 时间：2012-06-13T09:05:15.970
> 
> 标签：spring, unit-testing, jndi, spring-test

我有一个我们在 Jboss 中部署的现有服务 bean。不幸的是，它的数据源引用被配置为通过 JNDI 服务的“mappedName”查找注入数据源引用。

```
@Resource(name = "dataSource", mappedName = "java:/OracleDS")
private DataSource dataSource = null; 
```

我想在非 JNDI 环境中测试 bean。当我在非 JNDI 环境中运行时，我希望得到这个异常。

```
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating 
bean with name 'myService': Injection of resource fields failed; nested exception 
is org.springframework.beans.factory.BeanDefinitionStoreException: Invalid bean 
definition with name 'java:/OracleDS' defined in JNDI environment: JNDI lookup 
failed; nested exception is javax.naming.NoInitialContextException: Need to 
specify class name in environment or system property, or as an applet parameter, 
or in an application resource file:  java.naming.factory.initial 
```

我意识到解决这个问题的最快方法是删除 mappedName 限制，因为那时生产或测试 spring 上下文可以定义数据源。但在我不能这样做的情况下。有没有办法通过测试弹簧上下文定义 InitialContext 以避免上述异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T10:01:21.607

[我对SimpleNamingContextBuilder](http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/mock/jndi/SimpleNamingContextBuilder.html)做了更多阅读，并为我的测试用例提出了这个上下文设置。诀窍是使用 MethodInvokingFactoryBean 来确保调用 bind() 方法。

```
<bean id="jndiContext" class="org.springframework.mock.jndi.SimpleNamingContextBuilder" factory-method="emptyActivatedContextBuilder"/>

<bean id="invokingFactoryBean"
    class="org.springframework.beans.factory.config.MethodInvokingFactoryBean">
    <property name="targetObject">
        <ref local="jndiContext" />
    </property>
    <property name="targetMethod">
        <value>bind</value>
    </property>
    <property name="arguments">
        <list>
            <value>java:/OracleDS</value>
            <ref bean="dataSource" />
        </list>
    </property>
</bean>

<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="${datasource.driverClassName}" />
    <property name="url" value="${datasource.url}" />
    <property name="username" value="${datasource.username}" />
    <property name="password" value="${datasource.password}" />
</bean> 
```

# vb.net - VB电子表格写锁

> ID：11011538
> 
> 赞同：0
> 
> 时间：2012-06-13T09:05:18.763
> 
> 标签：vb.net, interop, spreadsheet

目前我有一个小应用程序，需要从一个对象中获取信息并将其显示到一个 excel 文件中，使用我已经能够写入文件的 Microsoft.office.interop 类，它一个一个地显示正在添加记录，但是大约每 3 次尝试一次，电子表格停止填充第 300 条和第 600 条记录之间的某个位置，我总共有 6,000 条，而且每次都没有中断，我在完成后检查是否最后一个记录已填写，但代码从未达到该点，我不确定发生了什么

我也不知道如何调试问题，因为这意味着要通过 6,000 个循环来检查它是否停止......这甚至可能不会发生？

代码的一小部分在这里

```
loadExcel(incidents, WorkSheetName)
            If WorkSheetName.Cells(DBObject.HighestInci + 1, 6) Is Nothing Then

                MessageBox.Show("Failed to fill spreadsheet, Retrying now.")
                loadExcel(incidents, WorkSheetName)

            End If 
```

上面是代码调用和检查下面的方法

```
Private Sub loadExcel(ByVal incidents As List(Of Incident), ByRef WorkSheetName As Excel.Worksheet)

        Dim i = 2
        For Each inc As Incident In incidents

            WorkSheetName.Cells(i, 1) = inc.DateLogged
            WorkSheetName.Cells(i, 2) = inc.DateClosed
            WorkSheetName.Cells(i, 3) = Convert.ToString(inc.DateLogged).Substring(3, 2)
            i += 1
        Next

    End Sub 
```

提前致谢

*编辑*

我正在考虑将它加载到某种缓冲区，然后在它们全部更新后写入将是要走的路，而不是当前单独加载和写入每个？但是我不知道从哪里开始？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T10:07:48.690

我已经解决了我的问题，打开上面的 Excel 并开始逐行打印到电子表格中，问题是与 excel 的任何交互都会导致进程冻结

通过添加一个

```
ExcelApp.visible = false 
```

在执行该过程和一个

```
ExcelApp.visible = true 
```

之后，一切正常，然后打开文件

# eclipse - Spring的Eclipse插件

> ID：11011539
> 
> 赞同：2
> 
> 时间：2012-06-13T09:05:19.563
> 
> 标签：eclipse, spring, ide, eclipse-plugin

IDEA 允许从 Java 代码中找到 xml 中声明的 bean 定义。例如，如果我有接口`SomeIntrfaceImpl`IDEA 允许我找出上下文文件中的实例`SomeIntrfaceImpl`，`.xml`将我指向 .xml 文件到创建 bean 的代码行

是否有任何 Eclipse 插件可以让我做同样的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T09:13:08.640

是的，SpringFramework 制造商本身提供了不同的 Eclipse。他们扩展了 eclipse，为 Spring Web 应用程序和 Spring ROO 等其他产品提供了简单的开发。

它被称为 SpringSourceToolSuit。您可以在此处以表格形式提供有关您的一些基本信息后，从[此处](http://www.springsource.org/springsource-tool-suite-download)下载其最新版本。

它是开发 Spring 应用程序的最佳 IDE。我目前正在使用它。

希望这对您有所帮助。干杯。

# iphone - 如何从服务器播放 mp3 文件？

> ID：11011540
> 
> 赞同：-1
> 
> 时间：2012-06-13T09:05:23.877
> 
> 标签：iphone, objective-c, xcode, mp3

我想播放存储在服务器中的 mp3 文件 例如：- [mp3 链接](http://in.orgware.in/testing/mp3/1.mp3)

我已经尝试了其他相关的答案，但我没有得到输出。谁能告诉我如何播放存储在网络上的 mp3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T09:09:10.077

Apple 的 AVPlayer 文档说明如下： AVPlayerplayer 与本地和远程媒体文件同样适用

Apple 的 AVAudioPlayer 文档说明如下： 使用此类进行音频播放，除非您正在播放从网络流中捕获的音频

```
 -(IBAction)playTapped {
        AVPlayer *player = [[AVPlayer playerWithURL:[NSURL  URLWithString:@"http://www.mp3.com/mp3file.mp3"]] retain];
        [player play];

     } 
```

# django-forms - 在 Django Crispy Forms 中设置 CRISPY_TEMPLATE_PACK 变量

> ID：11011541
> 
> 赞同：4
> 
> 时间：2012-06-13T09:05:27.967
> 
> 标签：django-forms, twitter-bootstrap

我指的是这个：[http](http://django-crispy-forms.readthedocs.org/en/d-0/install.html) ://django-crispy-forms.readthedocs.org/en/d-0/install.html 。我想将 Django Crispy Forms 与 Twitter Bootstrap 一起使用，因此我需要将 CRISPY_TEMPLATE_PACK 设置为 bootstrap。

我在哪里做这个？我不知道该怎么做..需要一些指导...

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-13T15:09:37.030

```
CRISPY_TEMPLATE_PACK = 'bootstrap' 
```

它在您的 settings.py 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-03T17:15:16.647

```
 CRISPY_TEMPLATE_PACK = 'bootstrap4' 
```

它应该被添加到你的根目录下的 settings.py 文件中

# php - 平等不适用于php

> ID：11011542
> 
> 赞同：0
> 
> 时间：2012-06-13T09:05:33.230
> 
> 标签：php

我正在尝试使用此功能检查希腊语中的两个句子：

```
 private function process_line_three($target_line_three,$case_line_three){
      $target_line_three=trim($target_line_three);
       $case_line_three=trim($case_line_three);
      echo "<br/><br/>";
       var_dump($case_line_three);
        echo "<br/><br/>";
        echo mb_detect_encoding($target_line_three);
        echo "<br/><br/>";
         echo mb_detect_encoding($case_line_three);
       //$this->print_chars_not_equal($target_line_three,$case_line_three);

   return strcasecmp($target_line_three, $case_line_three)==0;
   } 
```

当我将以下两个字符串传递给他们时，我得到了这个：

```
Line 3: case Συνδέσου με χιλιάδες ανθρώπους Παρακολούθησε & δράσε ζωντανά 24/7==Συνδέσου με χιλιάδες ανθρώπους Παρακολούθησε & δράσε ζωντανά 24/7 
```

但是平等在这里失败了..我对该结果返回错误，即使两个句子都相似..为什么会这样？

**更新 ：**

> var_dump($case_line_three); string(117) "Συνδέσου με χιλιάδες ανθρώπους Παρακολούθησε & δράσε ζωντανά 24/7"

同时，我正在尝试查找编码问题

**更新2：** 输出是：

```
string(117) "Συνδέσου με χιλιάδες ανθρώπους Παρακολούθησε & δράσε ζωντανά 24/7" 
```

> UTF-8
> 
> UTF-8

两个字符都是 utf

**当我写入文件时**更新 3输出：****

 **```
Συνδέσου με χιλιάδες ανθρώπους Παρακολούθησε &amp; δράσε ζωντανά 24/7

Συνδέσου με χιλιάδες ανθρώπους Παρακολούθησε & δράσε ζωντανά 24/7 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T09:10:32.767

你可以试试：

```
if(strcmp ($target1 , $target2 ) == 0); 
```

第二种选择是使用多字节编码不敏感比较....

```
function mb_strcasecmp($target1, $target2, $encoding = null) {
    if (null === $encoding) { $encoding = mb_internal_encoding(); }
    return strcmp(mb_strtoupper($target1, $encoding), mb_strtoupper($target2, $encoding)); } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T09:10:13.960

尝试使用 PHP 本机方法`strcasecmp()`- [http://php.net/strcasecmp](http://php.net/strcasecmp)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T09:15:42.797

您可以使用`strncmp`字符来比较两个字符串，当它们不相等时停止。然后您可以确定哪些字符不同。`levenshtein`可能会告诉你有多少个字符不同。

```
$a = 'Συνδέσου με χιλιάδες ανθρώπους Παρακολούθησε & δράσε ζωντανά 24/7';
$b = 'Συνδέσου με χιλιάδες ανθρώπους Παρακολούθησε & δράσε ζωντανά 24/7';

$i=1; $l=strlen($a); $equals=true;
while ($i<=$l && $equals) {
    if (strncmp($a, $b, $i) != 0) {
        $equals = false;
    } else {
        $i++;
    }
}
if ($equals) {
    echo 'Strings are equal';
} else {
    echo 'Character '.$i.' is not equal';
} 
```

字符串对我来说是相等的，所以这可能是一个编码问题。您可以使用`mb-detect-encoding`检查违规字符的编码[http://www.php.net/manual/en/function.mb-detect-encoding.php](http://www.php.net/manual/en/function.mb-detect-encoding.php)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-06-13T09:17:15.237

会不会是编码问题？

尝试使用这个：

```
return (strcmp($target_line_three, $case_line_three) == 0); 
```

`strcmp()`是区分大小写的。如果不区分大小写，请使用`strcasecmp()`**

# java - BrowserFactory.spawnMozilla() 返回 null

> ID：11011545
> 
> 赞同：1
> 
> 时间：2012-06-13T09:05:47.490
> 
> 标签：java, null

我在代码中使用了WebRenderer，程序在RedHat平台上运行，并且在平台上安装了Firefox浏览器，但是当执行到带有BrowserFactory.spawnMozilla()的行时，它返回null。谁能告诉我这是怎么发生的？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T09:40:31.873

只有下载了企业版 (6mb)，才能生成 Mozilla。此版本包括微型版本。企业版使用与 WebRenderer 一起分发的本地组件，并且不需要在计算机上安装任何软件来运行 WebRenderer。WebRenderer 完整发行版是一个自包含的 HTML 浏览器。WebRenderer Micro 依赖于 Internet Explorer（在 Windows 上）或 Safari（在 OSX 上）在用户系统上。Micro 版使用 Internet Explorer 或 Safari 库来显示 HTML。基于 Mozilla 的企业 WebRenderer 构建可在多个平台上运行，包括 Windows、Linux、OSX、JavaDesktop 和 Solaris。

这取自这里[http://www.webrenderer.com/products/desktop/developer/examples/createbrowser.php](http://www.webrenderer.com/products/desktop/developer/examples/createbrowser.php)

# iphone - iPhone App 中的 UI 自动化

> ID：11011547
> 
> 赞同：0
> 
> 时间：2012-06-13T09:05:50.430
> 
> 标签：iphone, ui-automation, ios-ui-automation

大家好，我手头有一个严重的问题，我制作了一个带有“用户名”和“密码”字段以及“登录”按钮的示例 iphone 应用程序，并且我已将所有组件的可访问性标签设置为用户名、密码和登录名并编写了一个 java 脚本来测试这些组件，如下所示：

UIALogger.logStart("开始测试"); var view = UIATarget.localTarget().frontMostApp().mainWindow();

var textfields = view.textFields()["username"]; var passwordFields = view.secureTextFields(); var convertButton = view.buttons()["login"];

textfields.setValue("ABC"); passwordFields[0].setValue("SDE");

转换按钮.tap();

我观察到的是，当我通过上面的 java 脚本启动工具来测试应用程序时，js 成功将值输入到用户名字段中，但无法在我已确保安全的密码字段中输入值，也点击了按钮成功并且控件移动到应用程序的下一页，并且在下一页上设置了一个注销按钮，该按钮带有可访问性标签“注销”，我也无法点击。如果有的话，您能否建议解决这种情况的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:17:42.717

```
var passwordFields = view.secureTextFields(); 
```

有多少安全文本字段 - 如果输出该数组的长度会发生什么？

为什么不

```
var passwordfield = view.secureTextFields()["password"];
passwordField.setValue("SDE"); 
```

以与文本字段相同的方式？

# eclipse - Ctrl 按钮在 Eclipse 中不起作用

> ID：11011549
> 
> 赞同：10
> 
> 时间：2012-06-13T09:06:00.540
> 
> 标签：eclipse, ubuntu

我使用 Ubuntu（64 位）。我看到了一些关于`Ctrl`+的讨论`Space`，但在我的情况下，我不能做`Ctrl`+ `S`、`Ctrl`+ `V`、`Ctrl`+ `Z`、`Ctrl`+ `Shift`+`F`并且可能还有其他事情（所有这些情况在其他程序中都可以正常工作，所以这不是键盘问题）。它不起作用，然后它起作用，然后又不起作用。有没有办法解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T10:56:00.823

我也在使用 64 位 Ubuntu（现在是 12.04，之前是 11.10）和 Eclipse。我遇到了与您所描述的类似的问题，直到我意识到键盘输入法/布局设置在使用复制/粘贴时在 Ubuntu 中实际上很重要（而在 Mac OS 或 Windows 中并不重要）。如果您使用两种键盘布局（例如，我使用的是英语和保加利亚语），`Ctrl`- `C`/ `Ctrl`-`V`将不适用于非英语布局。如果它不起作用，请仔细检查当前的键盘布局。我花了一段时间才弄清楚 - 希望它也能帮助你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-11T03:22:33.003

我已经解决了在 Windows 上重建工作区`CTRL`+的相同问题`B`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-17T13:09:15.300

# 类似问题

看起来有一些组合键与 eclipse 编辑器中的焦点有关。尝试使用焦点返回的快捷方式

`Shift`+ `Alt`+`f`

# c# - 如何将标准值放在下拉列表的顶部

> ID：11011554
> 
> 赞同：2
> 
> 时间：2012-06-13T09:06:30.983
> 
> 标签：c#, asp.net

我的下拉列表将填充来自实体模型的数据，如下所示：

```
 HotelTestDatabaseEntities hotelData = new HotelTestDatabaseEntities();
    var afdelingQuery = from afd in hotelData.Afdelings
                        orderby afd.afdelingNaam
                        select afd;
    DropDownList1.DataValueField = "afdelingID";
    DropDownList1.DataTextField = "afdelingNaam";
    DropDownList1.DataSource = afdelingQuery;
    DataBind(); 
```

如何将“选择值...”项放在下拉列表的顶部？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T09:08:46.997

在为 DropDownList1 完成绑定后添加此代码。

```
DropDownList1.Items.Insert(0,new ListItem("Please Select One","0")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T09:12:35.077

在您的 aspx 页面中

```
<asp:DropDownList ID="DropDownList1" runat="server">
    <asp:ListItem Value="0">Select Value</asp:ListItem>
</asp:DropDownList> 
```

在后面的代码中

```
DropDownList1.AppendDataBoundItems = true;
DropDownList1.DataValueField = "afdelingID";
DropDownList1.DataTextField = "afdelingNaam";
DropDownList1.DataSource = afdelingQuery;
DataBind(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-16T10:43:59.347

这就是我的想法，这对我有用

```
 int i = 0;
     foreach (DataRow dr in dt.Rows)
       {
           if (i == 0)
           {
               comboBox1.SelectedText = dr[0].ToString();
           }
           else
           {

               comboBox1.Items.Add(dr[0].ToString());
           }
           i++;

       } 
```

# javascript - 将代码片段转换为javascript中的方法

> ID：11011563
> 
> 赞同：0
> 
> 时间：2012-06-13T09:07:15.840
> 
> 标签：javascript, jquery

目前想将我的代码保存在一个对象中，我想将点击事件的内容转换为一个方法，但不太确定这是如何完成的。当前代码如下所示：

当前的 JS

```
init: function(){

            var _this = this,
                slides_li = _this.els.slides.children(),
                large = 260,
                small = 60;

            // Hover
            slides_li.on('mouseover', function(){
                $(this).stop(true, true).animate({ opacity: 1 }, 300);
            }).on('mouseout', function(){
                $(this).stop(true, true).animate({ opacity: .8 }, 300)
            });

            // Click handlers
            slides_li.on('click', function(){ 
```

// 想将此代码移动到它自己的方法 toggle_slides() 中？？

```
 $('.active', _this.els.slides).not(this).animate({
                    width: small
                }, 300).removeClass('active');
                // animate the clicked one

                if ( !$(this).hasClass('active') ){
                    $(this).animate({
                        width: large
                    }, 300).addClass('active');
                }                
            });                 
        } 
```

但我希望代码看起来像这样，但我知道我缺少一些关键的东西，而且这显然并不意味着点击事件：

JS

```
init: function(){

            var _this = this,
                slides_li = _this.els.slides.children(),
                large = 260,
                small = 60;

            // Hover
            slides_li.on('mouseover', function(){
                $(this).stop(true, true).animate({ opacity: 1 }, 300);
            }).on('mouseout', function(){
                $(this).stop(true, true).animate({ opacity: .8 }, 300)
            });

            // Click handlers
            slides_li.on('click', function(){
                toggle_slides(); //pass in this?
            });                 
        },
        toggle_slides: function(){ // add argument for this?
               $('.active', _this.els.slides).not(this).animate({
                    width: small
                }, 300).removeClass('active');
                // animate the clicked one

                if ( !$(this).hasClass('active') ){
                    $(this).animate({
                        width: large
                    }, 300).addClass('active');
                }                
        } 
```

任何人都可以就如何使这项工作提供一些建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T09:55:31.940

问题是“this”的依赖于上下文的值。

首先，关于原始代码如何工作的注释：

最初调用 init() 时，`this`指的是父对象 (gep)。但是在点击事件处理程序中，`this`指的是被点击的元素。这样您仍然可以在单击处理程序中访问父级，您将“this 的父级值”捕获到 中`_this`，以便以后使用它 - 一切正常。

但是，当您将处理程序中的代码移动到单独的方法中时，会发生很多变化：

*   首先，小变量、大变量和其他变量不再在本地范围内，因此必须重新定义或作为参数导入。

*   `this`now 再次引用父元素，因为现在执行的方法不是事件处理程序，而是父元素上的方法。所以`_this`旧代码中的引用只能`this`在新代码中使用。

*   最后，在旧代码中，在事件处理程序中，`this`引用了被单击的元素。但是（见上文）在新方法中，这意味着不同的东西：“父”对象。所以我们需要一个参数来捕获点击的元素——我已经将它作为参数传递了，旧代码中的`el`引用也会相应地改变。`this`

所以真正要注意的是：这段代码属于什么对象？如果您将属于一个对象的代码移动到另一个对象 - 例如。从一个对象上的事件处理程序到另一个对象上的方法 - 您可能需要根据需要重新处理/重命名任何 this 或类似 this 的变量。

更新代码的注释副本如下，也可作为[jsfiddle 获得](http://jsfiddle.net/E5GSM/13)：

```
...
        // Click handlers
        slides_li.on('click', function(){
            // pass 'this' - the clicked element - as the el param; also small and large.
            gep.toggle_slides(this, small, large);
        });                 
    },

    toggle_slides: function(el, small, large){
           // '_this' in old code in handler replaced with 'this';
           // 'this' in handler code replaced with 'el' here
           $('.active', this.els.slides).not(el).animate({
                width: small
            }, 300).removeClass('active');
            // animate the clicked one

            // 'this' in handler code replaced with 'el'here
            if ( !$(el).hasClass('active') ){
                $(el).animate({
                    width: large
                }, 300).addClass('active');
            }                
    } 
```

# openid - OpenId4java 注销

> ID：11011565
> 
> 赞同：0
> 
> 时间：2012-06-13T09:07:22.433
> 
> 标签：openid, yahoo, logout

我们开发了应用引擎应用程序。我们使用 openid4java 从 google/yahoo 登录。它适用于登录，而不适用于注销。谷歌/雅虎会话没有从这个 openid4java 中清除。

当我搜索时，我才知道，这不可能来自 openid。请就此提出建议，是否有任何其他方式可以从全局会话中注销（谷歌/雅虎）。

提前致谢。

谢谢，戈文德。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T05:50:53.433

**谷歌注销：**

```
function googleLogout() {
    window.open( 'https://www.google.com/accounts/Logout' );
    alert( 'logged out from google.' );
} 
```

**雅虎注销：**

```
function yahooLogout() {
    window.open( 'https://login.yahoo.com/config/login?logout=1' );
    alert( 'logged out from yahoo' );
} 
```

**奖金 - Facebook 注销：**

```
function facebookLogout() {
    FB.getLoginStatus(function(response) {
        if( response.status === 'connected' ) {
            logoutFromFB();
        }
        else {
            alert( 'already logged out from facebook');
        }
    }, true);
}

function logoutFromFB() {
    FB.logout(function(response) {
        alert( 'logged out from facebook' );
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T13:05:48.810

OpenID 规范没有单一注销配置文件。因此，大多数 OpenID 提供者不会支持这一点，除非他们以自己的方式实现它。尝试清除 cookie，这可能会奏效。

# gnuplot - Gnuplot：设置第三个（彩色）点的范围

> ID：11011566
> 
> 赞同：8
> 
> 时间：2012-06-13T09:07:23.470
> 
> 标签：gnuplot

使用 gnuplot 绘制颜色图时，我通常使用以下几行：

```
 ...
  set palette rgbformulae 33,13,10
  plot "file.dat" using 1:2:3 with points pointtype '7' palette 
```

通常第三点的范围（出现在图例中）由 gnuplot 自动设置。但是我该如何改变呢？假设我希望第三个点的范围是从 0 到 1500。

有什么建议么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-13T11:59:32.517

这实际上是一个非常好的问题——假设您的意思是要确定颜色条范围（而不是图例 [ie key]——图例通常没有该信息）。

我的第一个想法是`set cbrange`。这可能会做你想要的 -

```
set cbrange [0:1500]
set palette rgbformulae 33,13,10
plot "file.dat" u 1:2:3 w p pt 7 palette 
```

然而，问题是“你想对超出范围的点发生什么？” 此解决方案将超出范围点移动到刻度的底部/顶部（例如，紫色表示负数，红色表示大于 1500 的数字）。我的下一个想法是，您应该能够通过`set zrange [0:1500]`-- 剪掉这些点，但这不起作用。此时您至少有 2 个选项。

**选项 1：**使用 splot：

```
set view map
set cbrange [0:1500]
set zrange [0:1500]
set palette rgbformulae 33,13,10
splot "file.dat" u 1:2:3 w p pt 7 palette 
```

您的边界将与以前略有不同，但这没什么大不了的。

**选项 2：**使用三元运算符过滤（您已经从上一个问题中知道了）：

```
set cbrange [0:1500]
set palette rgbformulae 33,13,10
inrange(c)=((c>=0) && (c<=1500))? c : (1/0)
plot "file.dat" u 1:2:(inrange($3)) w p pt 7 palette 
```

此外，对于绘制彩色地图，您可能需要查看`pm3d`绘图样式（`image`可能也可以）。您可能需要稍微重构您的数据文件，但绘制彩色地图是绘图风格的基础。

# android - 下载图像在 android 应用程序中损坏

> ID：11011572
> 
> 赞同：2
> 
> 时间：2012-06-13T09:08:04.647
> 
> 标签：android, android-image, android-networking, android-internet

只是我需要下载图像，但问题是图像损坏了！！！我找到了很多下载图像的方法，但仍然出现了这个问题。

我试着这样做：

```
File path = Environment.getExternalStoragePublicDirectory(
Environment.DIRECTORY_PICTURES);
File file2 = new File(path,"DemoPictureX.png");
InputStream is=(InputStream) new URL("http://androidsaveitem.appspot.com/downloadjpg").getContent();
OutputStream os = new FileOutputStream(file2);
byte[] data = new byte[is.available()];
is.read(data);
os.write(data);

is.close();
os.close(); 
```

我认为它只是从图像中读取了一些行！！！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T09:14:36.173

您需要一个循环并从流中读取较小的缓冲区（如 1024 字节）。

```
 URL url = new URL("your url here");
  URLConnection connection = url.openConnection();
  InputStream is = connection.getInputStream();
  BufferedInputStream bis = new BufferedInputStream(is);
  FileOutputStream fos = new FileOutputStream(targetFile);
  byte buffer[] = new byte[1024];
  int read;
  while ((read = bis.read(buffer)) > 0) {
    fos.write(buffer, 0, read);
  }
  fos.flush();
  fos.close();
  bis.close();
  is.close(); 
```

这应该适合你

# akka - 在 Akka 中，如果我在事件流上收到 RemoteClientWriteFailed 错误，我是否确定没有收到消息？

> ID：11011573
> 
> 赞同：0
> 
> 时间：2012-06-13T09:08:05.193
> 
> 标签：akka

我知道 Akka 通常不提供任何强大的可靠性保证。但是，如果我收到针对特定远程参与者和消息的 RemoteClientWriteFailed 通知，我能否确定该消息*没有*放入远程系统的邮箱中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T09:26:17.550

由于我们没有做出这样的保证，我们不仅可以肯定，也不知道它是否会被保留。2.1 去掉了 RemoteClientWriteFailed 并将其放入 DeadLetters 中（应该如此）。

如果您在 DeadLetters 中弹出某些内容，则可以合理地假设它尚未交付。

有关如何操作的讨论，请参阅[this 。](http://doc.akka.io/docs/akka/2.0.2/general/message-send-semantics.html)

# android - 是否有可能窃取 Intents 发送的消息？

> ID：11011578
> 
> 赞同：1
> 
> 时间：2012-06-13T09:08:17.510
> 
> 标签：android, android-intent

**更新：** 我花了2个多小时google，但找不到答案。我添加了一个 main.java 来处理从登录活动发送的活动。现在文件树看起来像： ![在此处输入图像描述](../Images/8df390d1ae65c923d5baf758021d6b4b.png)

但是还是报错

> E/AndroidRuntime(1282): android.content.ActivityNotFoundException: 没有找到处理 Intent { act=com.goodboy.loginIntent.action.main cat=[android.intent.category.DEFAULT] 的活动 (有额外) }

我知道这个问题很简单，我是 android 新手，任何帮助将不胜感激:)

Android 允许具有特定接收者（活动或服务）的 Intent 以及在整个系统中向可能正在侦听的任何组件广播的 Intent。

我想做一个PoC（Proof of Concept），如果我们不设置setClassName，其他人可以听到你的私人信息。

这个 PoC 很简单，假设 App Goodboy 有 Login Activity，当用户在登录 Activity 中输入他的用户名和密码，然后点击登录按钮，来自 App Badboy 的邪恶 Activity 窃取了这条消息。

然而，失败了:(

当我单击登录按钮时，失败： ![在此处输入图像描述](../Images/cbe437e4f8813267f3c91f7b1fcf819e.png)

而邪恶的意图一无所获：

![在此处输入图像描述](../Images/c2a78b54e7b05c1a79c905b261f91912.png)

Login Activity的java源码

```
package com.goodboy.loginIntent;
import com.goodboy.loginIntent.R;
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
public class GoodloginActivity extends Activity {
    private EditText et_user;
    private EditText et_pwd;
    private Button btn_login;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.login);
        et_user = (EditText) findViewById(R.id.et_user);
        et_pwd = (EditText) findViewById(R.id.et_pwd);
        btn_login = (Button) findViewById(R.id.btn_login);
        btn_login.setOnClickListener(new OnClickListener(){
        public void onClick(View v) {
                Intent m_intent = new Intent();
                m_intent.putExtra("username", et_user.getText().toString());
                m_intent.putExtra("password", et_pwd.getText().toString());
                m_intent.setAction("com.goodboy.loginIntent.action.main");
                m_intent.addCategory(Intent.CATEGORY_DEFAULT);
                startActivity(m_intent);
            }
        });
    }
} 
```

main.java 的源代码

```
package com.goodboy.loginIntent;
import android.app.Activity;
import android.os.Bundle;
import com.goodboy.loginIntent.R;
public class main  extends Activity {
@Override
 public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     setContentView(R.layout.main);
  }
} 
```

登录布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <EditText
        android:id="@+id/et_user"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10" >

        <requestFocus />
    </EditText>

    <EditText
        android:id="@+id/et_pwd"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10"
        android:inputType="textPassword" />

    <Button
        android:id="@+id/btn_login"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

</LinearLayout> 
```

邪恶活动的java源码：

```
package com.badboy.stealIntent;

import com.badboy.stealIntent.R;

import android.app.Activity;
import android.os.Bundle;
import android.widget.Toast;

public class BadIntentActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Toast.makeText(getBaseContext(),
                "username: "+this.getIntent().getStringExtra("username")+
                "\npassword: "+this.getIntent().getStringExtra("password"),
                Toast.LENGTH_SHORT).show();
    }
} 
```

感谢@David Wasser，登录应用程序的清单（**更新**）：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.goodboy.loginIntent"
    android:versionCode="1"
    android:versionName="1.0" >
    <uses-sdk android:minSdkVersion="15" />
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".GoodloginActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN"/>
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".main"
            android:label="@string/main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN"/>
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

badIntent 的清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.badboy.stealIntent"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".BadIntentActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T09:16:10.143

您应该看一下[Intent Intercept](https://play.google.com/store/apps/details?id=uk.co.ashtonbrsc.android.intentintercept&hl=en)，这是一个面向开发人员的应用程序，顾名思义，它拦截任何“公共”意图，允许您浏览意图设置和数据。Intent Intercept 是开源的，你可以在[GitHub 上浏览代码](https://github.com/intrications/intent-intercept)

至于您的问题，请检查 BadBoy 应用程序是否已为您正在使用的操作注册。此外，请查看 goodlogin 上 logcat 中的堆栈跟踪，以了解活动崩溃的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T09:54:19.410

你可能会`ActivityNotFoundException`在你打电话时收到一个`startActivity()`，`GoodloginActivity`因为系统没有响应的活动：

```
ACTION = "com.goodboy.loginIntent.action.main" and
CATEGORY = CATEGORY_DEFAULT 
```

看看你的 logcat 输出。

# cakephp - 无需插件或使用控制器代码在 cakephp 中上传文件

> ID：11011579
> 
> 赞同：1
> 
> 时间：2012-06-13T09:08:17.393
> 
> 标签：cakephp, file-upload, cakephp-2.1

我正在学习 CakePHP 2.0，并创建了一个示例测试应用程序，用户可以在注册时提交文件。

下面是数据库表

## 用户表

```
id Auto_Increment
first_name
last_name
email
doc_file 
```

并且还创造`User.php`了`UsersController.php`

以下是中的内容代码`UsersController.php`

## 用户控制器.php

```
class UsersController extends AppController{

    public $helpers = array('Html', 'Form');

    public function index(){
        $this->set('user1', $this->User->find('all'));
    }

    public function register(){
        if ($this->request->is('post')){
            if ($this->User->save($this->request->data)){
                //move_uploaded_file($this->data['Model']['field']['tmp_name'], WWW_ROOT.DS.'xxx');

                move_uploaded_file($this->data['User']['doc_file']['tmp_name'], WWW_ROOT.DS.'hello.doc');

                $this->Session->setFlash('User is created');
                $this->redirect(array('action'=>'index'));
            } else {
                $this->Session->setFlash('Cannot register a user');
            }
        }
    }
} 
```

在视图中，我创建了两个文件，即视图目录中的`index.ctp`目录`register.ctp``Users`

的代码内容`register.ctp`

## 注册.ctp

```
<?php

    echo $this->Form->create('User', array('type'=>'file'));
    echo $this->Form->input('first_name', array('label'=>'First Name'));
    echo $this->Form->input('last_name', array('label'=>'Last Name'));
    echo $this->Form->input('email');
    echo $this->Form->input('doc_file', array('type'=>'file'));
    echo $this->Form->end('Register');
?> 
```

当运行这个页面，并填写所有信息时，它给出了一个错误

```
Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'Array' in 'field list' 
```

下面是我得到的查询，它在哪里`array`插入`doc_file`

```
SQL Query: INSERT INTO `database_db`.`users` (`first_name`, `last_name`, `email`, `doc_file`) VALUES ('master', 'shifu', 'shifu@k.com', Array) 
```

我正在尝试什么：

用户注册时，文件名应该是随机的，并且应该移动到

`localhost/mysite/app/webroot/files/user_data/`或者 `localhost/mysite/app/webroot/files/user_data/user_id_directory/`

很好，如果它创建用户标识目录并将文件存储在其父用户目录中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T10:19:30.387

问题是 CakePHP 看到 doc_file 字段并试图将其插入数据库。

在 Cake 处理完表单提交后， doc_file 包含一个值数组。

您可以通过执行以下操作来修复它：

在您看来：

```
echo $this->Form->input('new_doc_file', array('type'=>'file')); 
```

在您的控制器中：

```
if ($this->request->is('post')){
    $this->data['User']['doc_file'] = WWW_ROOT.DS.'hello.doc';
    if ($this->User->save($this->request->data)){
        move_uploaded_file($this->data['User']['new_doc_file']['tmp_name'], $this->data['User']['doc_file']);

        $this->Session->setFlash('User is created');
        $this->redirect(array('action'=>'index'));
    } else {
        $this->Session->setFlash('Cannot register a user');
    }
} 
```

（即使用临时字段名称上传文件，在尝试保存之前手动将 doc_file 字段添加到 post 数组）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T09:22:16.200

该错误表明

```
$this->data['User']['doc_file']['tmp_name'] 
```

正在返回一个数组 - 尝试

```
debug($this->data['User']['doc_file']['tmp_name']) 
```

在您的控制器代码中查看它包含的内容。

# maven - 神秘的 javac 行为：linux 与 windows

> ID：11011582
> 
> 赞同：1
> 
> 时间：2012-06-13T09:08:21.480
> 
> 标签：maven, javac

我有一个特殊的情况。

有一次，我需要进行分支，所以我复制了我的 eclipse 工作区并开始处理同一项目的两 (2) 个并行版本。

开发是在 Windows 工作站上完成的。出于测试目的，将应用程序部署到 Linux 服务器上。

如果我在 Windows 工作站上运行`mvn jetty:run`或为任一项目运行，一切正常。`mvn clean compile`这些项目使用相同`pom.xml`，因此没有区别。

但是，如果我将源代码传输到 Linux 服务器上，只有旧分支编译 100%，新分支编译大约 45%，这意味着如果我运行它，它会产生很多抱怨`ClassNotFoundException`......

奇怪的是：

*   两个项目实际上是相同的，相互复制，98%
*   为 Java 编码 UTF8，没有奇怪的非字母文件名
*   mvn 编译没有错误，它在两个项目上都显示“BUILD SUCCESSFUL”
*   但是，在编译后查看`target/classe`较新项目的 s 后，缺少文件，在其各自的路径`.class`中有文件`.java``src/main/java/`
*   我已经尝试使用verbose和nowarn等参数的javac，没有区别
*   JDK 1.6_33

非常混乱。现在我要做的是在 Windows 工作站上编译源代码并将目标/类内容复制到 Linux 服务器上，但似乎真的没有必要。我唯一想到的是较新的版本使用了一些重要的前沿泛型，但如果这会造成伤害，我会假设 a) 在 Windows 上的结果与 Linux 相同，b) 一些错误消息。但没什么，只是“构建成功”，缺少很多 .class 文件。

有任何想法吗？伍德？

这是对该问题的一些更新：*它也开始在 Windows 上发生（神奇地没有编译大部分 java 文件而没有任何错误指示），然后我只是在最近编译的版本和后来的非编译版本之间进行了 DIFF。Diff 很简单，因为只需进行一些更改。我发现我有一个大小约为 600k 的 java 文件（大量的内联数据初始化等），这似乎有所作为。我将这个特定的 java 文件分成两部分（原始文件为 109k，辅助文件为 567k）。现在它再次为 Windows 编译，我可能会继续寻找其他这样的大文件或进一步拆分这个文件，看看它是否也能在 Linux 上开始编译！*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T07:28:04.963

当我们升级到 JDK 7 时，该问题最终自行解决。

神秘。

# http - 鱿鱼重定向器从 https 到 http

> ID：11011586
> 
> 赞同：0
> 
> 时间：2012-06-13T09:08:30.807
> 
> 标签：http, https, squid

鱿鱼有问题。我正在使用带有我自己的重定向器的 3.1 版本。我的问题是，例如当客户端请求[https://twitter.com](https://twitter.com)（使用 https）但不知何故我的重定向器得到了一个逻辑，即 twitter.com 是无效页面，所以我将此请求重定向到我的无效页面。假设 302:http://mydomain.com?invalid=twitter.com，在这个阶段进程不会继续，浏览器会说“HTTP 网关失败”。

所以，我的理论是当一个请求被 https 重定向到 http 时，squid 将无法工作。是否需要进行任何配置才能使其正常工作？

感谢你们..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T17:48:01.943

RFC 2817 对 CONNECT 和重定向的行为不是很清楚。我认为大多数浏览器不会接受重定向作为对 CONNECT 方法的回复。所以，没有办法做你想做的事。

不是 Squid 问题，是协议/浏览器问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T23:18:02.367

好吧，我认为重定向的最佳方式是： - 如果请求是 https，则响应应该是 https - 如果请求是 http 响应应该是 http

这是我目前想不出的最好方法...

# java - Thread.join() 在 Android 中不起作用？

> ID：11011593
> 
> 赞同：1
> 
> 时间：2012-06-13T09:08:52.460
> 
> 标签：java, android, multithreading

我想创建长时间运行的应用程序来在不同的线程上执行各种任务。每个任务应该有一分钟的超时时间。这是我的实现：

```
runner = new Thread(new Runnable() { 
   @Override
   public void run() {  }
       // some actions here
});
runner.start();
startJoin = System.currentTimeMillis();            
runner.join(TIMEOUT);    
stopJoin = System.currentTimeMillis();

if ((stopJoin - startJoin) >= TIMEOUT)
            throw new TimeoutException("Timeout when reading the response from   process"); 
```

在一般情况下，它正在工作并抛出 TimeoutExceptions，但有时甚至几个小时后它什么也不做。所以问题是 Thread.join 在 Android 上是否可靠？

我有一个使用 Thread.wait 和 notify 的想法，你认为更好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T09:29:53.793

参考下面的程序。

```
public static void main(String[] args) throws InterruptedException {
    long TIMEOUT=100;
    Thread runner = new Thread(new Runnable() {
           @Override
           public void run() {

               for(;;){
                   System.out.println("running ");
               }

           }
               // some actions here
        });

    runner.start();
    long startJoin = System.currentTimeMillis();
    runner.join(TIMEOUT);
    long stopJoin = System.currentTimeMillis();

    if ((stopJoin - startJoin) >= TIMEOUT)
        try {
            throw new Exception("Timeout when reading the response from   process");
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        System.out.println("Running Thread");

} 
```

该程序永远不会结束，这意味着您的逻辑不正确。

更好用`TimerTask`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T09:17:29.487

`Timer`我更喜欢使用and来完成所有时基任务`TimerTask`。检查以下代码，这可能对您有用：

```
Timer t =new Timer();
    t.schedule(new TimerTask() {

        @Override
        public void run() {
            //The task you want to perform after the timeout period 
        }
    }, TIMEOUT); 
```

**编辑**

我正在尝试解决您的问题。我正在使用@amicngh 编写的代码作为我的基本代码，并对其进行了一些修改。我想在`TIMEOUT`你想关闭正在运行的线程之后。检查以下代码是否正常运行以及以下说明：

```
public class ThreadTest {
public static void main(String[] args) throws InterruptedException {
    final long TIMEOUT=100;
    final long startJoin = System.currentTimeMillis();

    Thread runner = new Thread(new Runnable() {
        long stopJoin;
           @Override
           public void run() {
               try{
                   for(;;){
                       System.out.println("running "); 
                       stopJoin = System.currentTimeMillis();

                       if ((stopJoin - startJoin) >= TIMEOUT){
                         throw new Exception();  
                       }
                   }
               }
               catch (Exception e) {
                // TODO: handle exception
               }

           }
               // some actions here
        });

    runner.start();

    synchronized (ThreadTest.class) {
        ThreadTest.class.wait(TIMEOUT);
    }

    /*if ((stopJoin - startJoin) >= TIMEOUT)
        try {
            throw new Exception("Timeout when reading the response from   process");
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }*/

        System.out.println("Running Thread");

} 
```

}

Thread API 描述说它是不安全的`destroy`or `stop`（因此这两种方法都已被弃用）并且停止线程的方法之一是抛出异常。因此，我正在检查`runner`线程内的超时。现在关于让主线程等待它是由`synchronized`用于同步对线程的访问的 2 行代码完成的。

希望这段代码和解释能解决你的问题。

# c# - 获取整个 SharePoint 的 ItemEventReceiver

> ID：11011602
> 
> 赞同：0
> 
> 时间：2012-06-13T09:09:15.460
> 
> 标签：c#, sharepoint

我想创建一个 SharePoint 扩展，它需要为整个 SharePoint 中的每个 Item 事件获得通知。通常，可以使用 ItemEventReceivers 来获取特定列表的此类通知。但是为了从整个共享点获取通知，我必须为每个站点的每个 Web 中的每个列表添加事件接收器。

有更好的方法吗？

# dbus - dbus glib 绑定 UDisks 错误

> ID：11011603
> 
> 赞同：2
> 
> 时间：2012-06-13T09:09:19.033
> 
> 标签：dbus, freedesktop.org

```
void device_added()
{
     printf("Added \n");
     g_main_loop_quit (loop);
}

void device_removed()
{
     printf("Removed\n");
     g_main_loop_quit (loop);
}

int
main (int argc, char **argv)
{
  DBusGConnection *connection;
  DBusMessage* message;
  GError *error;
  DBusGProxy *proxy;
  char **name_list;
  char **name_list_ptr;
  gchar *m1;
  gchar *m2;

  g_type_init ();

  error = NULL;
  connection = dbus_g_bus_get(DBUS_BUS_SYSTEM,NULL);

  if (connection == NULL)
    {
      g_printerr ("Failed to open connection to bus: %s\n",
                  error->message);
      g_error_free (error);
      exit (1);
    }

  /* Create a proxy object for the "bus driver" (name "org.freedesktop.DBus") */
     proxy=dbus_g_proxy_new_for_name(connection,"org.freedesktop.UDisks","/org/freedesktop/UDisks","org.freedesktop.UDisks");

     if(proxy == NULL)
     {
        g_printerr ("Failed To Create A proxy...: %s\n", error->message);
        g_error_free (error);
        exit(1);
     }
     else
       printf("Probably got a connection to the correct interface...\n");

     m1=g_cclosure_marshal_VOID__STRING;
     m2=g_cclosure_marshal_VOID__STRING;

     dbus_g_object_register_marshaller(m1,G_TYPE_BOOLEAN,G_TYPE_STRING,G_TYPE_INVALID);

     dbus_g_object_register_marshaller(m2,G_TYPE_BOOLEAN,G_TYPE_STRING,G_TYPE_INVALID);

     dbus_g_proxy_add_signal(proxy,"DeviceAdded",G_TYPE_INVALID);
     dbus_g_proxy_add_signal(proxy,"DeviceRemoved",G_TYPE_INVALID);

     dbus_g_proxy_connect_signal(proxy,"DeviceAdded",(GCallback)device_added,NULL,NULL);

     dbus_g_proxy_connect_signal(proxy,"DeviceRemoved",(GCallback)device_removed,NULL,NULL);

     loop=g_main_loop_new(NULL,FALSE);

     g_main_loop_run (loop);

     return 0;
} 
```

我想检测 USB 事件，我正在使用来自 org.freedesktop.UDisks 接口的 DeviceAdded 和 DeviceRemoved 信号。但是 device_added 或 device_removed 没有被调用，有人能告诉我上面的代码有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T07:01:02.103

```
/*
Compile using the command 
 * gcc -o dbus-usb dbus-usb.c `pkg-config --libs --cflags dbus-glib-1`
*/
#include <stdio.h>
#include <stdlib.h>
#include <sys/stat.h>
#include <dbus/dbus.h>
#include <dbus/dbus-glib.h>
#include <glib.h>
#include <glib-object.h>

static GMainLoop *loop;

static void
device_added (DBusGProxy *proxy,
         char *ObjectPath[],
         char *word_eol[],
         guint hook_id,
         guint context_id,
         gpointer user_data)
{
    g_debug("\nAdded a New Device:\nObjectPath: %s\nhook_id: %d\ncontext_id: %d\nuser_data: %d\n", (char*)ObjectPath, hook_id, context_id, (int)user_data); 
}

static void
device_removed (DBusGProxy *proxy,
         char *ObjectPath[],
         char *word_eol[],
         guint hook_id,
         guint context_id,
         gpointer user_data)
{
    g_debug("\nRemoved Device\nObjectPath: %s\nhook_id: %d\ncontext_id: %d\nuser_data: %d\n", (char*)ObjectPath, hook_id, context_id, (int)user_data); 
}

int
main (int argc, char **argv)
{
  DBusGConnection *connection;
  DBusMessage* message;
  GError *error;
  DBusGProxy *proxy;
  gchar *m1;
  gchar *m2;
  char *object_path;
  GPtrArray* ret;

  g_type_init ();

  error = NULL;
  connection = dbus_g_bus_get(DBUS_BUS_SYSTEM,NULL);

  if (connection == NULL)
    {
      g_printerr ("Failed to open connection to bus: %s\n",
                  error->message);
      g_error_free (error);
      exit (1);
    }
    else
    {
        printf("Got a connection to DBUS_BUS_SYSTEM\n");
    }

  /* Create a proxy object for the "bus driver" (name "org.freedesktop.DBus") */

     proxy=dbus_g_proxy_new_for_name(connection,"org.freedesktop.UDisks","/org/freedesktop/UDisks","org.freedesktop.UDisks");

     if(proxy == NULL)
     {
        g_printerr ("Failed To Create A proxy...: %s\n", error->message);
        g_error_free (error);
        exit(1);
     }
     else
       printf("Probably got a connection to the correct interface...\n");
//It works for me without marsheller register, add and connect to the signals directly
     m1=g_cclosure_marshal_VOID__STRING;
     m2=g_cclosure_marshal_VOID__STRING;

     dbus_g_object_register_marshaller(m1,G_TYPE_NONE,G_TYPE_STRING,G_TYPE_INVALID);

     dbus_g_object_register_marshaller(m2,G_TYPE_NONE,G_TYPE_STRING,G_TYPE_INVALID);

     dbus_g_proxy_add_signal(proxy,"DeviceAdded",DBUS_TYPE_G_OBJECT_PATH, G_TYPE_INVALID);
     dbus_g_proxy_connect_signal(proxy,"DeviceAdded",(GCallback)device_added,NULL,NULL);

     dbus_g_proxy_add_signal(proxy,"DeviceRemoved",DBUS_TYPE_G_OBJECT_PATH, G_TYPE_INVALID);
     dbus_g_proxy_connect_signal(proxy,"DeviceRemoved",(GCallback)device_removed,NULL,NULL);

     loop=g_main_loop_new(NULL,FALSE);

     g_main_loop_run (loop);

     g_error_free (error);

     return 0;
} 
```

上面的代码正在工作并且能够检测到 Ubuntu pc 上的 USB 事件，主要变化是 DBUS_TYPE_G_OBJECT_PATH 参数到 dbus_g_proxy_add_signal 函数而不是 G_TYPE_STRING。

但是，如果我为 ARM 架构交叉编译并在 ARM 板上执行相同的操作，我将再次面临同样的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T12:20:40.313

在启动两者之后，我也让它在 ARM 上工作

```
dbus-daemon --system 
```

和

```
/usr/libexec/udisks-daemon 
```

# javascript - Safari 使用 jQuery $.get 方法加载 Document 对象而不是数据，导致 HIERARCHY_REQUEST_ERR

> ID：11011605
> 
> 赞同：0
> 
> 时间：2012-06-13T09:09:25.193
> 
> 标签：javascript, jquery, google-chrome, safari

**编辑：我基本上把事情归结为使用 file:// 协议来重现它所必需的事实。另外，我用 --allow-file-access-from-files 标志启动了 Chrome。我现在使用的是普通的 http 协议，所以对我来说这个问题变得更学术了。如果它有效，那就太好了，或者至少有人可以向我解释发生了什么。**

考虑以下 HTML（在文件“a.html”中）：

```
<!DOCTYPE html>
<html>
<head>
    <title>Title</title>
    <meta charset="utf-8" />
</head>
<body>
    <article id="article-id">
        <h3 class="entry-title">
            Title-h3
        </h3>
        <div class="entry-content">
        </div>
    </article>  
 </body>
</html> 
```

我正在尝试从另一个文件（比如 index.html）加载#article-id 标记的第一个子项，如下所示：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.js"></script>

$.get('a.html', function() {
    return function(data)
    {
        alert(data);
        var lTitle = jQuery("<div>").append(data)
                    .find("#article-id :first-child").html().trim();
        alert(lTitle);
    }
}()); 
```

在 Safari 5.1.3 中，第一个警报给出“[object Document]”，下一个 jQuery 语句抛出 HIERARCHY_REQUEST_ERR。

在 Chrome 19.0.1084.54 中，这似乎按预期工作，我在第一个警报中获得加载的数据，在第二个警报中获得“Title-h3”。

这是 jQuery 中的错误还是我做错了什么？

奇怪的额外信息：如果你添加

```
<iframe width="500" height="369" src="http://www.youtube.com/" frameborder="0" allowfullscreen></iframe> 
```

在 div 中，Safari 与 Chrome 一样工作。

# facebook - 我们可以在“通过 {APP_NAME}”中为每条分享到 Facebook 的消息更改 {APP_NAME}

> ID：11011607
> 
> 赞同：0
> 
> 时间：2012-06-13T09:09:31.207
> 
> 标签：facebook, share

[请访问http://screencast.com/t/39uF7lz8I93](http://screencast.com/t/39uF7lz8I93)查看

我们能否破解“通过 {APP_NAME}”中专门用于发送到 Facebook 的每条传出消息的 {APP_NAME}。

我的问题不是关于更新 facebook APP SETINGS 中的 APP_NAME，而是关于有什么办法可以欺骗它（我可以使用与设置中不同的 APP_NAME 发布到 facebook。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T09:47:40.080

不，您不能通过 API 更改帖子的该部分 - 它被硬编码为应用名称

# java - 有没有办法将 Class 对象转换为 Java 源字符串？

> ID：11011609
> 
> 赞同：0
> 
> 时间：2012-06-13T09:09:36.333
> 
> 标签：java

我`Class.forName("classname")`用来获取一个Class对象，我想将Class对象转换为String，这意味着反编译java文件，并将这个字符串显示给GUI。

我能怎么做？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T09:14:01.847

Java 不会为你反编译类——你需要一个单独的反编译器。试试[这个](http://java.decompiler.free.fr/)[答案](https://stackoverflow.com/a/272595/626853)，这是建议的。

# mysql - 如何创建非强制性加入？

> ID：11011613
> 
> 赞同：2
> 
> 时间：2012-06-13T09:09:43.853
> 
> 标签：mysql, sql, join

我有以下 2 个表：

*   ProductCombined - 这里存储了几个产品信息
*   Productperformance - 定义产品是否表现良好

这是我当前的查询：

```
SELECT `prod_combined`.`sku`, `prod_combined`.`titel`, `prod_combined`.`preis_vk`, `prod_performance`.* 
FROM `prod_combined` 
INNER JOIN `prod_performance` ON prod_combined.sku = prod_performance.sku AND 
prod_performance.partner_id = 801 
WHERE (aktiv = 1) AND (active >= 0) 
AND prod_combined.sku = 1006224000 
LIMIT 5 
```

在此版本中，必须将“活动”字段设置为大于 0 的值。

但我需要一个将 JOIN 视为非强制性的查询。例如，如果这个产品从 prod_combined 到 prod_performance 的连接不成功，它也会被查询获取。

我是否充分解释了这一点？

问候，

最大限度

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:51:34.440

```
SELECT 
    a.sku, 
    a.titel, 
    a.preis_vk, 
    b.* 
FROM 
    prod_combined a
LEFT JOIN 
    prod_performance b ON a.sku = b.sku 
    AND b.partner_id = 801 
    AND b.active >= 0
WHERE 
    a.aktiv = 1 AND a.sku = 1006224000
LIMIT 5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T09:40:56.040

这应该对你有用：

```
SELECT `prod_combined`.`sku`, `prod_combined`.`titel`, `prod_combined`.`preis_vk`, `prod_performance`.* 
FROM `prod_combined` 
LEFT JOIN `prod_performance` ON prod_combined.sku = prod_performance.sku
  AND prod_performance.partner_id = 801
  AND prod_performance.active >= 0
WHERE prod_combined.aktiv = 1 
  AND prod_combined.sku = 1006224000  
LIMIT 5 
```

`LEFT JOIN`将确保如果有要添加的信息`prod_performance`，它将被显示

# extjs - ExtJS 网格面板：在屏幕上加载尽可能多的项目

> ID：11011615
> 
> 赞同：1
> 
> 时间：2012-06-13T09:09:47.267
> 
> 标签：extjs, grid, pagination, panel

我有一个带有分页工具栏的 ExtJS Grid 面板。

我的问题是：我只能指定一个静态限制。这不是我想要的，因为屏幕有不同的分辨率，并且网格面板会自动拉伸以适应屏幕。

现在我可以将要加载的项目数量设置得非常高。但这会迫使屏幕较小的用户滚动。

或者我可以将其设置为适合中等屏幕。但是有没有办法让 ExtJS 自动计算它可以在一个页面上容纳多少项目并加载它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T09:18:01.147

如果您知道单个网格行的高度（取决于您的 CSS），您可以自己计算行数 - 我认为这是唯一的选择。

示例代码（未经测试）：

```
var rowHeight = 28;
var grid = ... // initialize the grid
grid.on('afterrender', function(g) {
    var height = g.body.getHeight(true),
        rows = Math.floor(height / rowHeight);
    g.getStore().pageSize = rows;
    g.getStore().load();
}); 
```

**编辑**

正如[Sebastian Hoitz](https://stackoverflow.com/a/11012782/11354)所指出的，该`resize`事件是更好的监听事件，因为它会在调整浏览器窗口大小时重新触发。`afterrender`另一方面，该事件只会被触发一次。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T10:17:32.713

感谢 Stefan Gehrigs 的评论，我想出了这个：

```
# Adjust the page size of our store
@on "resize", (grid, width, height) =>
    rowHeight = 21

    if @title
        height -= 23 # Title row

    height -= 27 # toolbar height
    height -= 27

    height -= 27 # Pagination

    height -= 25 # Grid title

    rows = Math.floor(height / rowHeight)

    grid.getStore().pageSize = rows
    grid.getStore().load() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-09T15:15:31.207

您的常量可能会根据您是否在视口上重组组件而改变。在这种情况下，我只包含了一个名为“ROW_HEIGHT”的常量/变量。目标是在所有情况下消除垂直滚动条，无论在哪个设备上查看 MVC 应用程序（即：iPhone、Android、iPad、Android 平板电脑、Mac、PC 等...）。在 ExtJS 4.2 中，我发现如果分辨率太小或浏览器尺寸变小，值 21 会创建一个滚动条。值太小（如 20）在某些情况下会在网格底部出现空白行。如果您只有没有应用主题的默认网格，并且您正在继承（扩展）标准 Ext.grid.Panel 组件，我发现 21.1 是 Goldilox 的高度。因此，请根据您的应用程序的测试用例进行更改。

**实用类：**

```
Ext.define('App.Utilities', {
    statics: {
        APP_NAME: 'MVC',
        ROW_HEIGHT: 21.1
    }

}); 
```

**Ext.grid.Panel 视图监听器：**

```
listeners: {
    resize: function(view, width, height, oldWidth, oldHeight, eOpts) {
        height = this.body.getHeight(true);       
        var rows = Math.floor(height / App.Utilities.ROW_HEIGHT);
        view.getStore().pageSize = rows;
        view.getStore().load();
    }
} 
```

# c# - 类中处理全局变量的方法

> ID：11011619
> 
> 赞同：-2
> 
> 时间：2012-06-13T09:10:02.443
> 
> 标签：c#, c#-4.0

有一个这样的 php 代码，（这里是 php 函数的一部分）将其转换为 C#。

```
function jaktDate2()
{
    Global $nameofselectbox,$startYear,$endYear,$year,
    $startDate,$endDate,$startMounth,$endMounth,$startDay,$endDay;
    $today = getdate();
    $year=$today['year'];
    $mounth=$today['mon'];
    $day=$today['mday']; 
```

我的 C# 代码尝试是这样的，

```
 public class HuntingDate
    {
        public string StartYear;
        public string EndYear;
        public string Year;
        public DateTime StartDate;
        public DateTime EndDate;
        public string StartMonth;
        public string EndMonth;
        public DateTime StartDay;
        public DateTime EndDay;

    } 
```

我是这样开始的。。这样对吗？我下一步该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T05:24:37.207

你可以这样做：

```
public int Num { get; set; } 
```

而不是这个：

```
private int _num;
public int Num { get { return _num; } set { _num = value; } } 
```

至于最后一部分：

```
DateTime today = DateTime.Now;
int year = today.Year;
int month = today.Month;
int day = today.Day; 
```

请注意，它`today`也会有小时、分钟、秒和毫秒。如果您只想`Date`部分`Now`或任何其他 DateTime 对象（又名“修剪”从小时及以下开始的“小计数”） - 您可以执行以下操作：

```
DateTime dateOnly = someDate.Date;

// someDate: 2.4.2012 10:04:12:0004
// dateOnly: 2.4.2012 00:00:00:0000 
```

而且看起来您还需要从年、月和日创建一个 DateTime 对象，所以：

```
this.StartDate = new DateTime(startYear, startMonth, startDay); 
```

**编辑**

```
// This gets called the moment you initialize the object
public HuntingDate()
{
    DateTime today = DateTime.Now;
    int year = today.Year;
    int month = today.Month;
    int day = today.Day;

    // more logic, to set StartDate and EndDate
} 
```

现在从外面你可以做一些事情：

```
HuntingDate hd = new HuntingDate();
DateTime sd = hd.StartDate;
DateTime ed = hd.EndDate; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T05:25:26.300

在 .NET 中，您不需要私有成员变量，因为编译器会在编译时添加它。

因此你可以改变

```
private string _year;
public string Year
{
    get { return _year;}
    set { _year = value;}
} 
```

变成更好读的东西。

```
public string Year { get; set; } 
```

要在 .NET 中使用日期，您可以简单地使用`System.DateTime.Now`然后访问任何属性，如`System.DateTime.Now.Day`or`System.DateTime.Now.Year`等​​。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T09:11:02.850

如果将这些定义为属性会更好。[原因见这里](http://csharpindepth.com/articles/chapter8/propertiesmatter.aspx)。无论如何，您编写的课程是完全有效的，只是不被认为是一种好习惯。您可能也会添加一个构造函数，也可以像 php 代码那样初始化一些值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T09:14:24.983

这是带有属性的：

```
public class HuntingDate
{
    public string StartYear{
        get;
        set;
    }
    public string EndYear{
        get;
        set;
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-13T09:24:59.400

你定义的类看起来更像是一个随机的值，而不是一个定义明确的类。所有这些值实际上代表什么？

```
public string StartYear;
public string EndYear;
public string Year;
public DateTime StartDate;
public DateTime EndDate;
public string StartMonth;
public string EndMonth;
public DateTime StartDay;
public DateTime EndDay; 
```

`StartDate`例如，和有什么区别`StartDay`？`StartYear`和是什么`StartMonth`？这个类实际上*定义*了什么？看起来您正在尝试将`DateTime`值分解为组件。你不需要这样做。一个简单的`DateTime`值将充分存储必要的信息，您可以直接从该值获取组件：

```
public DateTime StartDate;
public DateTime EndDate; 
```

例如，如果您需要知道月份，您可以从该值中获取它：

```
myObject.StartDate.Month; 
```

要继续改进该类，您需要使用属性而不是公共成员。在 C# 中，它们看起来像这样：

```
public DateTime StartDate { get; set; }
public DateTime EndDate { get; set; } 
```

这些被专门称为自动实现的属性。它们是完整属性的编译器简写：

```
private DateTime _startDate;
public DateTime StartDate
{
    get { return _startDate; }
    set { _startDate = value; }
}
// repeat for EndDate 
```

属性的好处是该类对其内部结构的暴露较少。如果您需要向类添加任何逻辑（例如检查日期的特定范围，例如确保过去没有 StartDate），那么您可以将其添加到属性中而不会破坏类的二进制兼容性。所以消费代码永远不需要知道区别。例如：

```
private DateTime _startDate;
public DateTime StartDate
{
    get { return _startDate; }
    set
    {
        if (value < DateTime.Now)
            throw new ArgumentException(string.Format("Start Date must not be in the past: {0}", value.ToString()));
        _startDate = value;
    }
} 
```

您可以通过继续定义此类的行为来进一步实现这一点。即使暴露了这些属性，仍然会使类更像是“数据结构”而不是“对象”。（为了进一步了解数据/对象反对称，我推荐 Robert Martin 的 Clean Code。）正确的面向对象设计的目标是让对象隐藏其数据并公开在内部对该数据执行有状态操作的方法.

例如，如果您需要延长`EndDate`一天，您可以这样做：

```
myObject.EndDate += new TimeSpan(1, 0, 0, 0); 
```

但更面向对象的方法（坚持“告诉，不问”原则）是告诉对象本身延长时间，而不是直接告诉其数据延长时间（从而“询问”对象其过程中的数据，可以说也违反了得墨忒耳定律）：

```
myObject.ExtendEndDate(new TimeSpan(1, 0, 0, 0)); 
```

甚至：

```
myObject.ExtendEndDateInDays(1); 
```

您只需要在对象上实现这样的方法，并且该方法将在*内部*扩展`EndDate`.

类本身应该封装它所代表的概念所需的所有功能。如果绝对必要，它可以提供对其内部成员的公共读取访问，但从设计的角度来看，值得问问自己真正需要对对象的数据进行什么样的查询，并为这些查询提供更有针对性的方法，而不是直接访问到类的数据成员。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-13T09:25:17.237

没有办法像在 PHP 中那样在 c# 中进行全局操作。你可以使用单例或静态类来做到这一点。

```
public static class HuntingDate
{
    public static string StartYear { get; set; }
} 
```

然后在你的代码中

```
HuntingDate.StartYear = DateTime.Now 
```

或者

```
var startYear = HuntingDate.StartYear 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-13T09:50:44.737

C# 中没有全局变量声明。因为它是一种[面向对象的编程](http://msdn.microsoft.com/en-us/library/dd460654.aspx)语言。在您的情况下，您可以声明一个[静态类](http://msdn.microsoft.com/en-us/library/79b3xss3%28v=vs.80%29.aspx)

```
public static class HuntingDate
{
    public static string StartYear 
    {
      get; 
      set; 
    }
    public static string EndYear 
    {
      get; 
      set; 
    }
    // and so on
} 
```

您可以从类名中访问这些属性。

```
HuntingDate.StartDate = DateTime.Now;
HuntingDate.EndDate = DateTime.Now.AddDays(10); 
```

# javascript - 向阴影框图像添加描述

> ID：11011621
> 
> 赞同：2
> 
> 时间：2012-06-13T09:10:04.287
> 
> 标签：javascript, shadowbox

我正在尝试向图像添加描述。我知道您可以添加标题，但我正在寻找描述和标题。谁能告诉我实现这一目标的最佳方法，或者是否有可能？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T09:14:14.460

您需要将`title`属性与一些 HTML 一起使用，如下所示：

```
<a href="http://lorempixel.com/200/200/" rel="shadowbox;height=200;width=200" title="<b>My Image</b><span>Desc</span>">My Image</a>​ 
```

并使用 CSS 使其工作！

```
#sb-title, #sb-title-inner {height: 3em;}
#sb-title-inner b {display: block; font-size: 1.2em;}
#sb-title-inner span {display: block;}​ 
```

在这里查看[小提琴](http://jsfiddle.net/bagFr/)。希望能帮助到你！:)

# c# - 将 Include() 重写为 linq 连接

> ID：11011628
> 
> 赞同：1
> 
> 时间：2012-06-13T09:10:20.700
> 
> 标签：c#, linq, entity-framework, compiled-query

由于（此时）在编译查询中使用 Include() 是不可能的，我正在尝试将它们重写为连接。但它似乎并不像我想要的那样工作。

说我有这个关系：

```
Order              OrderState
Id                 Id   
OrderStateId       Description 
```

现在我用来获取描述如下：

```
var q = (from o in context.Orders
         where o.Id = orderId
         select o).Include("OrderState"); 
```

我尝试将其重写为：

```
var q = (from o in context.Orders
         join st in context.OrderStates on o.OrderStateId equals st.Id
         where o.Id = orderId
         select o); 
```

但是 OrderState 在我的结果集中仍然为空。我将如何解决这个问题（以编译查询可接受的方式）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T09:33:15.277

如果你不能使用`.Include`，你实际上需要`o.OrderState`在结果中包含某个地方，那么这个怎么样？

```
var q = (from o in context.Orders
         where o.Id = orderId
         select new { Order = o, o.OrderState }); 
```

`o.Order.OrderState`应该在`o.OrderState`没有额外帮助的情况下连接到`q`.

# javascript - Google Map V3 绘制多边形并打开 InfoWindow

> ID：11011630
> 
> 赞同：1
> 
> 时间：2012-06-13T09:10:29.967
> 
> 标签：javascript, google-maps, google-maps-api-3

我正在动态绘制多边形并单击多边形以打开 InfoWindow。我正在成功绘制多边形，但单击 Infowindow 时似乎没有。不给出错误只是似乎没有！

这是我所有的代码；

```
 function ADD_EVENT_FOR_POLYLINE_AND_POLYGON () {
            GLOBALS.PolyGonPath = new google.maps.MVCArray;
            GLOBALS.PolyGon = new google.maps.Polygon({
                strokeWeight: 3,
                fillColor: '#5555FF'
            });
            GLOBALS.PolyGon.setMap(GLOBALS.Map);
            google.maps.event.addListener(GLOBALS.Map, 'click', DRAW_POLYGON);
        }

     function DRAW_POLYGON(event) {
        GLOBALS.PolyGonPath.insertAt(GLOBALS.PolyGonPath.length, event.latLng);
        var marker = new google.maps.Marker({
            position: event.latLng,
            map: GLOBALS.Map,
            draggable: true
        });
        GLOBALS.PolyMarkers.push(marker);
        marker.setTitle("#" + GLOBALS.PolyGonPath.length);
        google.maps.event.addListener(marker, 'click', function () {
            marker.setMap(null);
            for (var i = 0, I = GLOBALS.PolyMarkers.length; i < I && GLOBALS.PolyMarkers[i] != marker; ++i);
            GLOBALS.PolyMarkers.splice(i, 1);
            GLOBALS.PolyGonPath.removeAt(i);
        });

        google.maps.event.addListener(marker, 'dragend', function () {
            for (var i = 0, I = GLOBALS.PolyMarkers.length; i < I && GLOBALS.PolyMarkers[i] != marker; ++i);
            GLOBALS.PolyGonPath.setAt(i, marker.getPosition());
        });

        **Here is I am adding a method to polygon for infowindow**
        GLOBALS.PolyGon.setPaths(new google.maps.MVCArray([GLOBALS.PolyGonPath]));
        google.maps.event.addListener(GLOBALS.PolyGon, 'click', SHOW_INFO);
    },

     function SHOW_INFO (event) {
        var infowin = new google.maps.InfoWindow();
        var vertices = GLOBALS.PolyGon.getPath();
        var contentString = "<b>Test</b><br />";

        for (var i = 0; i < vertices.length; i++) {
            var xy = vertices.getAt(i);
            contentString += "<br />" + "Coordinats: " + i + "<br />" + xy.lat() + "," + xy.lng();
        }
        infowin = new google.maps.InfoWindow();
        infowin.setContent(contentString);
        infowin.setPosition(event.latLng);
        infowin.open(GLOBALS.Map, this);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T12:17:41.037

尝试将函数中的最后一行代码更改为`SHOW_INFO`：

```
infowin.setPosition(event.latLng); //Leave this line
infowin.open(GLOBALS.Map, this); 
```

至：

```
infowin.setPosition(event.latLng); //This line stays the same
infowin.open( GLOBALS.Map ); 
```

的第二个参数`infowin.open`是一个可选`MVCObject`参数，具有公共`position`属性，用作锚点。在这种情况下，您不需要提供锚点，因为您已经调用了`infowin.setPosition`传递`google.maps.LatLng`. 从方法的`google.maps.InfoWindow`[^(api-doc)](https://developers.google.com/maps/documentation/javascript/reference#InfoWindow)描述`open`：

> 在给定地图上打开此信息窗口。可选地，信息窗口可以与锚相关联。在核心 API 中，唯一的锚点是 Marker 类。但是，锚点可以是任何公开位置属性的 MVCObject，也可以是用于计算 pixelOffset 的可选锚点（请参阅 InfoWindowOptions）。anchorPoint 是从锚点位置到信息窗口尖端的偏移量。

# iphone - iPhone中的多个本地通知

> ID：11011639
> 
> 赞同：1
> 
> 时间：2012-06-13T09:11:01.260
> 
> 标签：iphone, uilocalnotification

在我的应用程序中，我的朋友列表说：3 个朋友，这三个人都有生日详细信息。我需要安排本地通知以显示他们的生日警报。我知道并处理了本地通知，但我将如何处理这些多重通知？

我在“for循环”中设置触发日期。是否正确，请参阅代码。

```
UILocalNotification *localNotif = [[UILocalNotification alloc] init];
if (localNotif == nil)
        return;
    NSDateFormatter *formatter = [[[NSDateFormatter alloc]init]autorelease];
    for (int i = 0; i< [delegate.viewController.contactList count] ; i++) {
        NSString *birthday = [[myArray objectAtIndex:i]objectForKey:@"birthday"];

        [formatter setDateFormat:@"MM/dd/yyyy"];
        NSDate *date = [formatter dateFromString:birthday];

        localNotif.fireDate = [date dateByAddingTimeInterval:10];
        localNotif.timeZone = [NSTimeZone defaultTimeZone];
        NSLog(@"local %@",localNotif.fireDate);
    }

    localNotif.applicationIconBadgeNumber = 1;

    NSString *itemName = @“Friend Name";
    NSDictionary *userDict = [NSDictionary dictionaryWithObjectAndKey:itemName,@"msg", nil];

    localNotif.userInfo = userDict;
    [[UIApplication sharedApplication] scheduleLocalNotification:localNotif];
    [localNotif release]; 
```

我想要什么，只有在这种方法中，我必须根据他们的日期为所有朋友设置通知。谁能告诉我哪里做错了，如果我遗漏了什么，请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T09:13:37.867

只需制作三个（或更多）本地通知并用 安排每个通知，有 `scheduleLocalNotification:`什么问题？例如，这是我在项目中所做的：

```
for (int i = 0; i < 6; i++) {
    UILocalNotification *localNotification = [prototypeNotification copy];
    localNotification.fireDate = [NSDate dateWithTimeIntervalSinceNow:dates];
    [notifications addObject:localNotification];

    [[UIApplication sharedApplication] scheduleLocalNotification:localNotification];

    [localNotification release];
} 
```

**UPD**

```
// ...this goes earlier:
static NotificationController *sharedNotificationController = nil;

- (id) init 
{
    if (self = [super init]) {
        notifications = [[NSMutableArray alloc] init];

        prototypeNotification = [[UILocalNotification alloc] init];
        prototypeNotification.repeatCalendar = [NSCalendar currentCalendar];
        prototypeNotification.repeatInterval = NSMinuteCalendarUnit;

        prototypeNotification.timeZone = [NSTimeZone defaultTimeZone];
        prototypeNotification.fireDate = [NSDate dateWithTimeIntervalSinceNow:0];
        prototypeNotification.applicationIconBadgeNumber = 0;
        prototypeNotification.alertBody = NSLocalizedString(@"Body", nil);
        prototypeNotification.alertAction = NSLocalizedString(@"Action", nil);

        enabled_ = NO;
    }
    return self;
} 
```

# regex - 输入名称的正则表达式匹配

> ID：11011640
> 
> 赞同：1
> 
> 时间：2012-06-13T09:11:02.423
> 
> 标签：regex, arrays

我正在尝试用 JS 克隆输入字段并增加它们`id`，`name`这样我就可以验证它们。这是一个例子：

```
<input type="text" id="work_company0" name="work[0][company]" />
<input type="text" id="work_company1" name="work[1][company]" />

<input type="text" id="work_title0" name="work[0][title]" />
<input type="text" id="work_title1" name="work[1][title]" /> 
```

所以对于`id`，正则表达式将是：

```
/^(.*)(\d)+$/i 
```

对于`id="work_company1"`，匹配结果，`["work_company1", "work_company", "1"]`我使用`match[1] + newID`(work_company2) 创建新 ID。

`name`获得类似匹配的正则表达式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:13:11.940

**试试这个**

*身份证或姓名*

```
\b(?:id|name)="[^\"]+" 
```

**验证[姓名]**

```
\b(?:name)="work\[\d+\]\[company\]" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T09:15:31.073

你是这个意思吗？

```
var s = 'work[1][title]';
var r = /\w+\[(\d+)\]\[(\w+)\]/;
var m = s.match(r);

// in m variable m[1] is id and m[2] is name 
```

希望这是有道理的。

# c# - DotNetOpenAuth 和 Hotmail 登录

> ID：11011642
> 
> 赞同：1
> 
> 时间：2012-06-13T09:11:13.663
> 
> 标签：c#, asp.net, dotnetopenauth

如何使用 DotNetOpenAuth 检索 Hotmail 的登录电子邮件 ID

我已经从示例中尝试了此代码，它给出了名称而不是电子邮件 ID

```
IAuthorizationState authorization = client1.ProcessUserAuthorization(null);
    if (authorization == null)
    {
        // Kick off authorization request
        client1.RequestUserAuthorization(new[] { WindowsLiveClient.Scopes.Basic, "wl.emails" }, new Uri("http://localhost/SignIn.aspx")); // this scope isn't even required just to log in
    }
    else
    {
        var request = WebRequest.Create("https://apis.live.net/v5.0/me?access_token=" + Uri.EscapeDataString(authorization.AccessToken));
        using (var response = request.GetResponse())
        {
            using (var responseStream = response.GetResponseStream())
            {
                var graph = WindowsLiveGraph.Deserialize(responseStream);
                //this.nameLabel.Text = HttpUtility.HtmlEncode(graph.Name);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T10:52:18.297

您需要在`Scope`课程中添加另一个项目

```
/// <summary>
/// Well-known scopes defined by the Windows Live service.
/// </summary>
/// <remarks>
/// This sample includes just a few scopes.  For a complete list of scopes please refer to:
/// http://msdn.microsoft.com/en-us/library/hh243646.aspx
/// </remarks>
public static class Scopes
{
    /// <summary>
    /// The ability of an app to read and update a user's info at any time. Without this scope, an app can access the user's info only while the user is signed in to Live Connect and is using your app.
    /// </summary>
    public const string OfflineAccess = "wl.offline_access";

    /// <summary>
    /// Single sign-in behavior. With single sign-in, users who are already signed in to Live Connect are also signed in to your website.
    /// </summary>
    public const string SignIn = "wl.signin";

    /// <summary>
    /// Read access to a user's basic profile info. Also enables read access to a user's list of contacts.
    /// </summary>
    public const string Basic = "wl.basic";

    /// <summary>
    /// Read access to a user's personal, preferred, and business email addresses.
    /// </summary>
    public const string Email = "wl.emails";
} 
```

然后，您可以使用以下代码在正确的范围内传递 - 正如您从示例中看到的那样，您可以在两个或更多范围内传递。您可以在[此处](http://msdn.microsoft.com/en-us/library/hh243646.aspx)找到所提供范围的详细信息。

```
var windowsiveClient = WindowsLiveClient.Instance();

var authorization = windowsiveClient.ProcessUserAuthorization();
if (authorization == null)
{
    // Kick off authorization request
    windowsiveClient.RequestUserAuthorization(scope: new[] { WindowsLiveClient.Scopes.Email, WindowsLiveClient.Scopes.Basic });

    // retuning null will force the page to redirect to Windows Live and as we have not specified a callback if authorized will
    // return back to the calling URL - in this instance the 'AttemptSignInForWindowLiveOpenId' controller action.
    return null; // 
}

WindowsLiveGraph windowsLiveModel;

var windowsLiveRequest = WebRequest.Create(string.Format("https://apis.live.net/v5.0/me?access_token={0}", Uri.EscapeDataString(authorization.AccessToken)));
using (var response = windowsLiveRequest.GetResponse())
{
    using (var responseStream = response.GetResponseStream())
    {
        windowsLiveModel = WindowsLiveGraph.Deserialize(responseStream);
    }
} 
```

# java - Facebook 图片到 Google App Engine 应用程序 (Java)

> ID：11011647
> 
> 赞同：0
> 
> 时间：2012-06-13T09:11:38.717
> 
> 标签：java, facebook, google-app-engine

如果 appengine 应用程序的用户可以使用他们的 Facebook 帐户登录，是否可以将用户的一些图片从他们的 Facebook 帐户传输到 appengine 应用程序？

做这种事情的步骤是什么？只是给我一些提示和参考。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:44:02.680

如果您可以获取用户的 facebook id，那么获取个人资料图片很容易。

```
https://graph.facebook.com/{id}/picture 
```

其他一切都需要 auth_token。

在 developer.facebook.com 上阅读有关图形 API 和 FQL 的更多信息。

# cuda - 推力::序列 - 如何在每个 N 个元素之后增加步长

> ID：11011648
> 
> 赞同：1
> 
> 时间：2012-06-13T09:11:47.953
> 
> 标签：cuda, copy, sequence, thrust

我在用

```
thrust::sequence(myvector.begin(), myvector.end(), 0, 1) 
```

并实现良好的有序列表，例如：

```
0, 1, 2, 3, 4 
```

我的问题是如何才能在下面获得这样的列表（最好的方法？）

```
0, 0, 0, 1, 1, 1, 2, 2 ,2, 3, 3, 3 
```

我知道如何用仿函数来做，所以请不要试图用仿函数来回答。我想了解在 Thrust 中是否有优化的方法，或者我错过了一个简单的方法..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T14:53:30.290

像这样的东西：

```
thrust::device_vector<int> myvector(N);

thrust::transform( thrust::make_counting_iterator(0),
                   thrust::make_counting_iterator(N),
                   thrust::make_constant_iterator(3),
                   myvector.begin(),
                   thrust::divides<int>() ); 
```

（免责声明，用浏览器编写，从未编译或测试过，使用风险自负）

`[0..N]//3`应该通过计算和输出结果来给你你正在寻找的序列`myvector`。

* * *

看到您在编译版本时遇到问题，这是一个编译和运行的完整示例：

```
#include <thrust/device_vector.h>
#include <thrust/transform.h>
#include <thrust/functional.h>
#include <thrust/iterator/counting_iterator.h>
#include <thrust/iterator/constant_iterator.h>
#include <cstdio>

int main(void)
{
    const int N = 18, M = 3;
    thrust::device_vector<int> myvector(N);

    thrust::transform(  thrust::make_counting_iterator(0),
                        thrust::make_counting_iterator(N),
                        thrust::make_constant_iterator(M),
                        myvector.begin(),
                        thrust::divides<int>() );

    for(int i=0; i<N; i++) {
        int val = myvector[i];
        printf("%d %d\n", i, val);
    }
    return 0;
} 
```

# java - EasyPHP 自定义 java 扩展

> ID：11011649
> 
> 赞同：0
> 
> 时间：2012-06-13T09:11:51.013
> 
> 标签：java, php, xslt, easyphp

我正在使用 EasyPHP 进行测试，我希望在我的 php 代码中应用 XSLT 2.0 处理器。EasyPHP 5.3.9 标准 xslt 处理器虽然是 1.0 版本。

我必须做什么才能在 Saxon9he.jar 或 XSLT2Processor.jar（在 sourceforge.net 上找到）中应用 xslt 处理器？我想知道的东西：

*   jar 放在哪个目录
*   在哪里更改配置以包含 jar（可能使用扩展功能）
*   为了声明 xslt 处理器的新实例，需要在代码中添加什么

我目前使用的代码

```
<?php
    $XML = new DOMDocument();
    $XML->load('test.xml');
    $xslt = new XSLTProcessor();
    $XSL = new DOMDocument();
    $XSL->load('test.xslt');
    $xslt->importStylesheet( $XSL );
    print $xslt->transformToXML( $XML );
?> 
```

哪些错误是因为我有一个 XSLT 2.0 版本的样式表。我得到的错误就像

```
Warning: XSLTProcessor::importStylesheet() [xsltprocessor.importstylesheet]: compilation error: file file:///C:/Program%20Files%20(x86)/EasyPHP-5.3.9/www/test.xslt line 99 element function in C:\Program Files (x86)\EasyPHP-5.3.9\www\test.php on line 7 
```

# jquery - jquery如何从客户端调用非静态服务器端方法

> ID：11011650
> 
> 赞同：1
> 
> 时间：2012-06-13T09:11:52.117
> 
> 标签：jquery, asp.net, updatepanel

我需要知道如何通过 jquery 从客户端调用非静态服务器端方法。我搜索谷歌并开始知道这是不可能的。我知道如何通过 jquery 调用服务器端静态方法。这里有一个小片段

```
[WebMethod]
public static string yourmethod(/*params*/)
{
  return "Hello World!"   
}

$.ajax({
    type: 'POST',
    data: /*Your Data*/,
    dataType: 'JSON',
    contentType: 'application/json',
    url: '/yourpage.aspx/yourmethod',//Method to call
    success: function(result, status) {
            //handle return data
    },
    error: function(xhr, status, error) {
            //handle error
    }
 }); 
```

但是必须有某种机制，我们可以通过 jquery 或纯 javascript 调用服务器端非静态函数，因为更新面板、Ajax.Net 库使用户能够从客户端调用服务器端函数。当我们在更新面板中放置一个按钮并单击该按钮时，相应的服务器端函数就会被调用......所以告诉我这是怎么可能的。更新面板如何在后台调用服务器端功能。请讨论更新面板如何开发以及如何调用服务器端方法。

# sql-server - 检索数据库的当前时间戳

> ID：11011653
> 
> 赞同：1
> 
> 时间：2012-06-13T09:12:01.073
> 
> 标签：sql-server, linq, entity-framework

有没有办法使用 LINQ 或实体框架获取数据库的最后更新/当前时间戳（或导致表行的时间戳增加的计数器。）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-06T06:18:33.210

请参阅[http://www.sqlnotes.info/2012/04/13/dbts-vs-min_active_rowversion/](http://www.sqlnotes.info/2012/04/13/dbts-vs-min_active_rowversion/)。要在任何提交的事务运行中获取最新使用的时间戳（又名行版本）：

```
select @@dbts 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T09:16:01.417

在 Linq-to-SQL - 您可以使用以下[`ExecuteQuery`方法`DataContext`](http://msdn.microsoft.com/en-us/library/bb361109.aspx)：

```
DateTime currentDateTime = 
   ctx.ExecuteQuery<DateTime>("SELECT GETDATE()", new object[] {}).FirstOrDefault(); 
```

在实体框架中也应该有类似的东西（[ObjectContext.ExecuteStoreQuery](http://msdn.microsoft.com/en-us/library/dd487208.aspx)）

# authentication - 使用 PhoneGap/Cordova FileTransfer 进行基本身份验证

> ID：11011657
> 
> 赞同：0
> 
> 时间：2012-06-13T09:12:24.570
> 
> 标签：authentication, cordova

我正在尝试使用 Cordova 将文件上传到需要使用基本身份验证进行身份验证的服务器。如何在文件传输中设置自定义 http 标头？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-01-18T09:45:00.960

您可以像这样添加 Authorization-Header：

```
var options = {};
options.headers = {'Authorization': token};
fileTransfer.upload(fileURL, targetURL, win, fail, options); 
```

[文件传输文件](https://github.com/apache/cordova-plugin-file-transfer)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T13:27:47.580

需要在标头中设置基本身份验证，我认为 FileTransfer 不支持自定义标头。

唯一的方法是编写自己的上传插件。做起来并不难——你应该可以使用 Cordova 作为起点。当然，唯一的缺点是您需要为每个平台编写一个插件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T19:16:22.763

我实际上设法通过在 URL 中包含凭据来解决这个问题，例如*http://username:password@url*。

但是当我们生活在 API:s 的世界中时，我确实认为 Cordova 不支持身份验证或自定义标头很奇怪。

# log4j - log4j：在同一个容器上创建不同的 EJB 将它们的日志写入同一个 .log 文件时的风险

> ID：11011664
> 
> 赞同：1
> 
> 时间：2012-06-13T09:12:52.290
> 
> 标签：log4j

不同的 EJB 是否可以在同一个容器上部署并同步工作，将它们的应用程序日志写入同一个 .log 文件而没有任何风险，条件是它们都使用相同的 log4j.xml 和相同的 FileAppender。

我确认它可以在我的桌面上运行，但是如果这些 EJB 处于高负载运行状态怎么办？我应该关注文件锁定或延迟问题吗？

真挚地，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:09:25.577

是的，同一个应用服务器实例中的多个 EJB 可以写入同一个 appender。它们是一个 JVM 的一部分，并且 log4j 是线程安全的。

确实，在高负载下您会遇到延迟；但这就是日志级别的用途。在重要级别上记录尽可能少的语句，在调试级别上保持详细。

共享相同的文件附加程序是可能的（大多数时候它似乎正在工作），但很危险，尤其是在设置滚动策略的情况下。您可能会以这种方式丢失日志，log4j 并不是为此而设计的。

# java - Java：如果线程中使用的 Runnable 设置为 null 会发生什么？

> ID：11011666
> 
> 赞同：7
> 
> 时间：2012-06-13T09:12:55.713
> 
> 标签：java, multithreading, runnable

说我做以下...

//MyRunnable是我声明的一个类，它实现了Runnable。

```
MyRunnable r = new MyRunnable();
Thread t = new Thread(r);
t.start();

r = null; 
```

像我在上面的代码片段中那样将 r 设置为 null 有什么影响？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-13T09:33:20.090

让我通过数字向您解释：

1- 在

```
MyRunnable r = new MyRunnable(); 
```

`MyRunnable`您正在创建主要实现`Runnable`接口的类的新实例：

![在此处输入图像描述](../Images/93f8f05d6a093518742099c4a2cdf2b4.png)

2- 在

```
Thread t = new Thread(r); 
```

您正在创建一个新线程并按*值*传递引用 r 指向的对象：

![在此处输入图像描述](../Images/a87fa4fc5c268bb5db91eafad2993e79.png)

3- 在

```
r = null; 
```

您正在删除 r 引用和`MyRunnable`对象之间的链接，Thread`t`正在使用该链接来运行线程：

![在此处输入图像描述](../Images/9caedad0cd9d41fcdcb6b50f200ed37e.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-13T09:13:59.870

没有影响。

线程已经开始了。无论如何，线程对象将保留引用，因此它不会被垃圾收集，直到`t`这样做。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-13T09:24:14.560

没有。

变量`r`不是对象**本身**；`MyRunnable`它只是代码块中对该对象的*引用。*

最初，您创建一个新`MyRunnable`对象。然后，您“为其命名”/将其分配给变量`r`。然后将它传递给`Thread`构造函数（使用变量来描述您正在谈论的对象）。在该构造函数中，它几乎肯定会被分配给其他引用（在我使用的 JDK 中，它是一个名为 的字段`target`）。

稍后，您将引用重新指向`r`另一个对象 - 在本例中为`null`对象。这对它用来指向它的*对象*没有任何影响，只是引用。同样，它对指向同一对象的其他引用没有任何影响。

所以`Thread.target`引用仍然指向`MyRunnable`你最初创建的同一个对象，从线程的角度来看，没有任何改变。

唯一的潜在区别是您的（外部）代码片段不再引用它创建的对象。因此，后面的代码将无法调用该对象上的任何方法，或将其作为方法参数传递等。（这不应该是一个问题 - 或令人惊讶 - 鉴于您故意取消了对该对象的唯一引用！ )

* * *

如果*没有任何东西*持有对特定对象的引用，那么垃圾收集器将在下一次运行时认为该对象不可达，并收集它。不过，您很少需要担心这一点，因为如果您没有对该对象的引用，那么无论如何您将无法对它做任何事情（GC 背后的整个原理）。

在这种情况下，`MyRunnable`不会被 GCed，因为`Thread`仍然持有对它的引用。

也就是说，如果构造函数的行为不同并且不存储引用，因为它不需要引用（也许它只是使用`toString()`表示），那么该对象将被视为不可访问，*并将*被收集。在这两种情况下，垃圾收集器都会做正确的事情——当且仅当没有东西再引用它时才收集一个对象——而您无需担心或知道代码中的这一点。

# android - 使用批处理文件在 linux shell 中运行命令

> ID：11011667
> 
> 赞同：0
> 
> 时间：2012-06-13T09:13:07.260
> 
> 标签：android, linux, shell, batch-file

我需要能够在连接到我的 PC 的 Android 手机上运行以下命令：

```
su
mount -o rw,remount /system
chmod 777 /system/app/
exit
exit 
```

然后我需要在我的电脑上执行以下命令：

```
adb push ..\bin\MyApp_signed.apk /system/app/ 
```

最后，我需要进行一些清理并重新启动手机：

```
su
chmod 755 /system/app/
reboot
exit
exit 
```

如何创建 Windows 批处理文件，以便将这些 shell 命令传递给 android shell？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T09:19:54.737

`adb shell <command>`允许您从计算机在设备上运行 shell 命令。如果您的`su`命令支持该`-c`选项，您可以这样做：

```
adb shell su -c "mount -o rw,remount /system"
adb shell su -c "chmod 777 /system/app/"

adb push ..\bin\MyApp_signed.apk /system/app/

adb shell su -c "chmod 755 /system/app/"
adb shell su -c reboot 
```

如果您的`su`命令不支持命令，您可以制作一个脚本留在捆绑设备端的设备上。

# iphone - 在 iPhone/Cocoa 上复制 OpenSSL smime 命令

> ID：11011669
> 
> 赞同：7
> 
> 时间：2012-06-13T09:13:09.793
> 
> 标签：iphone, cocoa, openssl, smime

我正在尝试做的是复制以下命令在 Mac 上通过终端运行，但在**iPhone/Cocoa 中：**

```
openssl smime -binary -sign -signer cert.pem -inkey key.pem -in file.txt -out encrypted -outform DER 
```

其中“encrypted”是命令产生的加密文件。

尽管它指定了 2 个单独的密钥（公钥和私钥），但可以将它们作为单个`.p12`文件。

在遵循[这个](http://iphonesdksnippets.com/post/2010/03/26/Encrypt-NSString-with-certificate-from-p12-file.aspx)使用`.p12`证书加密文件的可可片段之后，我不确定这是否是正确的方法。

在 iPhone 上复制 smime 命令的最佳方法是什么（根据上面的终端命令），或者根本不可能通过可用的`Security.framework`/CommonCrypto 方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-08T06:54:49.383

据我所知——你有点过分了——桨被锁在了应用商店里。

*   iOS 缺少您需要的 CMSEncoderAddSigners、CMSEncoderUpdateContent、CMSEncoderCopyEncodedContent。
*   使用 openssl 或 Chilkat 也不理想 - 因为 iOS 的钥匙串 API 不会让您在导入后（不再）访问私钥。

我过去用 openssl 和 Chilkat 解决了这个问题。

但是，在每种情况下，我都会“缓存”私钥的副本——因为一旦它进入钥匙串——我能得到的只是一个 SecKeyRef（你需要与苹果签订额外的协议/许可才能获得它退出并仍然在应用商店。对任何 VPN（例如瞻博网络）应用程序进行逆向工程以查看要链接的方法/框架）。

对于 openssl - 只需在 openssl 的应用程序中获取 smime.c 代码并进行修改。对于 chilkat 来说，事情要简单得多：

```
 CkoCert * mine = [identity ckoCert];

    assert([mime AddEncryptCert: mine] == YES);

    for(id cc in backupCerts) {
        assert([mime AddEncryptCert:cc] == YES);
    }

    for(id key in [headers allKeys]) {
        [mime SetHeaderField:[NSString stringWithFormat:@"%s%@", X_HDR_PREFIX, key]
                       value:[headers objectForKey:key]
         ];
    };

    [mime SetBodyFromBinary:data];        
    assert([mime EncryptN] == YES);

    return  [mime GetMimeBytes]; 
```

并且身份字段具有“保留自己的缓存”作弊：

```
-(id)initWithPKCS12:(NSData*)pkcs12der password:(NSString *)password {
    if (password == nil)
        password = [APPSETTINGS wellKnownPkcsPassword];

    NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:
                             password, kSecImportExportPassphrase,
                             nil];

    CFArrayRef items;
    OSStatus status = SecPKCS12Import((__bridge CFDataRef)pkcs12der,  
        (__bridge CFDictionaryRef)options, &items);

    if (status != noErr) {
        NSLog(@"PKCS12 importAsDer failed: Error %ld",(long)status);
        ...
    }

    if (!items || CFArrayGetCount(items) < 1) {
        NSLog(@"PKCS12 importAsDer failed - nothing returned (%ld bytes DER)", 
              (long)[pkcs12der length]);
        ...
    }

    CFDictionaryRef dict0 = (CFDictionaryRef) CFArrayGetValueAtIndex(items, 0);
    if (!dict0)
        return nil;

    SecIdentityRef iRef = (SecIdentityRef) CFDictionaryGetValue(dict0, 
            kSecImportItemIdentity);
    CFArrayRef cRef = (CFArrayRef) CFDictionaryGetValue(dict0, kSecImportItemCertChain);

    self = [self initWithIdentityRef:iRef withChainArrayRef:cRef];
    CFRelease(items);

#if TARGET_OS_IPHONE
    // We lack SecPrivate* on iOS. So we cheat a bit - rather than
    // use the keychain we limt ourselves to our own *.p12's and
    // keep a copy of the private key in memory.
    //
#  ifdef WITH_OPENSSL

   const unsigned char * ptr = [pkcs12der bytes];
    PKCS12 * p12 = d2i_PKCS12(NULL, &ptr, len);
    char buff[1024];

    if (!p12) {
       NSLog(@"Could not decode PKCS#12: %s", ERR_error_string(ERR_get_error(), buff));
       ...
    };

    const char * pass = [password cStringUsingEncoding:NSASCIIStringEncoding];

   if (PKCS12_parse(p12, pass, &pkey, &x509, NULL) != 1) {
      NSLog(@"Could not parse PKCS#12: %s", ERR_error_string(ERR_get_error(), buff));
      ...
    };
    ....
#  else
    ckoCert = [[CkoCert alloc] init];

    if (!([ckoCert LoadPfxData:pkcs12der password:[APPSETTINGS wellKnownPkcsPassword]])) {
        NSLog(@"PKCS12 loadPfxData failed: %@", [ckoCert LastErrorText]);
        ...
    }

    ckoPrivateKey = [ckoCert ExportPrivateKey];
#  endif // chilkat or openssl
#endif // iOS

    return self;
} 
```

警告：在上面我已经剥离了大多数 mngt/错误管理和/或用断言替换它，否则它变得有点太笨拙了。

谢谢，

德。

# regex - 如何匹配小于或等于 100 的数字？

> ID：11011674
> 
> 赞同：32
> 
> 时间：2012-06-13T09:13:21.550
> 
> 标签：regex, perl

我想匹配一个小于或等于 100 的数字，它可以是 0-100 之间的任何数字，但正则表达式不应匹配大于 100 的数字，例如 120、130、150、999 等。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-06-13T09:26:57.457

**尝试这个**

```
\b(0*(?:[1-9][0-9]?|100))\b 
```

**解释**

```
"
\b                # Assert position at a word boundary
(                 # Match the regular expression below and capture its match into backreference number 1
   0              # Match the character “0” literally
      *           # Between zero and unlimited times, as many times as possible, giving back as needed (greedy)
   (?:            # Match the regular expression below
                  # Match either the regular expression below (attempting the next alternative only if this one fails)
         [1-9]    # Match a single character in the range between “1” and “9”
         [0-9]    # Match a single character in the range between “0” and “9”
            ?     # Between zero and one times, as many times as possible, giving back as needed (greedy)
      |           # Or match regular expression number 2 below (the entire group fails if this one fails to match)
         100      # Match the characters “100” literally
   )
)
\b                # Assert position at a word boundary
" 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-13T09:20:54.277

正则表达式怎么样：

```
^([0-9]|[1-9][0-9]|100)$ 
```

例如，这将验证 7、82、100，但**不会**验证 07 或 082。

[检查此](http://www.regular-expressions.info/numericranges.html)以获取有关数字范围检查的更多信息（以及包括零前缀在内的变体）

* * *

如果你需要处理浮点数，你应该[阅读这个](http://www.regular-expressions.info/floatingpoint.html)，这里有一个你可以使用的表达式：

浮点：`^[-+]?([0-9]|[1-9][0-9]|100)*\.?[0-9]+$`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-09-19T19:29:11.727

**我的实用建议。**

就个人而言，我会完全避免编写如此复杂的正则表达式。如果您的号码在不久的将来从 100 变为 200 怎么办。您的正则表达式将不得不进行重大更改，并且可能更难编写。上述所有解决方案都不是自我解释的，您必须在代码中添加注释来补充它。那是一种气味。

可读性很重要。代码是给人类的，而不是给机器的。

为什么不围绕它编写一些代码并保持正则表达式简单易懂。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-13T13:27:00.283

如果您需要正则表达式（最终），请使用**代码断言：**

```
 /^(.+)$(??{$^N>=0 && $^N<=100 ? '':'^'})/ 
```

测试：

```
my @nums = (-1, 0, 10, 22, 1e10, 1e-10, 99, 101, 1.001e2);

print join ',', grep 
                /^(.+)$(??{$^N>=0 && $^N<=100 ? '':'^'})/,
                @nums 
```

结果：

```
 0,10,22,1e-010,99 
```

（==>[这是了解代码断言的东西](http://collaboration.cmc.ec.gc.ca/science/rpn/biblio/ddj/Website/articles/TPJ/2004/0408/0408a/0408a.html)）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-11-18T05:59:47.667

此正则表达式匹配数字 0-100 音调并禁止数字 001：

```
\b(0|[1-9][0-9]?|100)\b 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-13T09:19:23.550

正则表达式

```
perl -le 'for (qw/0 1 19 32.4 100 77 138 342.1/) { print "$_ is ", /^(?:100|\d\d?)$/ ? "valid input" : "invalid input"}' 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-02-06T12:45:09.993

这匹配 0 到 100

```
^0*([0-9]|[1-8][0-9]|9[0-9]|100)$ 
```

# c++ - 尝试使用模板创建类的新实例，出现意外错误

> ID：11011676
> 
> 赞同：2
> 
> 时间：2012-06-13T09:13:22.820
> 
> 标签：c++, templates, pointers, binary-search-tree

尝试使用模板制作**B** inary **Search** Tree （简称 BST）**。**

当我尝试创建 BST 的新实例时，出现意外错误。我希望解决方案不涉及指针，因为我希望将它们保持在最低限度。

现在我有：

```
template <typename Type>
class BST {                 // The binary search tree containing nodes
private:
    BSTNode<Type> *root;    // Has reference to root node

public:
    BST ();
    bool add (int, Type);
}; 
```

和节点类型：

**编辑：**当我剪切代码以取消阻碍文本时，我忘记了构造函数，现在它已被添加

```
template <typename Type>
class BSTNode {    // Binary Search Tree nodes
private:
    int key;       // we search by key, no matter what type of data we have
    Type data;
    BSTNode *left;
    BSTNode *right;

public:
    BSTNode (int, Type&); 
    bool add (int, Type);
}; 
```

**EDIT2：**这是实际的构造函数

```
template <typename Type>
BSTNode<Type>::BSTNode (int initKey, Type &initData) {
     this->key = initKey;
     this->data = initData;
     this->left = NULL;
     this->right = NULL;
} 
```

我想尝试测试是否有任何工作/不起作用

```
BSTNode<int> data = new BSTNode (key, 10); 
```

我得到：BSTNode 之前的预期类型说明符。我不知道我做错了什么，但我希望做的一件事是我不必使用数据作为指针。

```
BSTNode<int> data = new BSTNode<int> (key, 10); 
```

也不起作用，似乎它认为`< int >`是`< & int>` 并且它不匹配

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-13T09:16:25.487

首先，您需要在赋值的 RHS 上完全指定类型，并且由于您使用 实例化动态分配的节点`new`，因此 LHS 应该是一个指针：

```
BSTNode<int>* data = new BSTNode<int> (key, 10);
            ^                     ^ 
```

如果您不需要节点指针，请使用

```
BSTNode<int> data(key, 10); 
```

其次，您的`BSTNode<T>`类没有采用 int 和 a 的构造函数`Type`，因此您也需要提供它。

```
template <typename Type>
class BSTNode {
 public:
  BSTNode(int k, const Type& val) : key(k), data(val), left(0), right(0) { .... }
}; 
```

# android - 如何从 sdcard 获取文件夹的完整路径？

> ID：11011677
> 
> 赞同：1
> 
> 时间：2012-06-13T09:13:24.333
> 
> 标签：android, sd-card

我想获取 sdcard 的所有文件夹和子文件夹。例如，我创建了一个文件夹名称`tempfolder`。如果我想获得完整的路径`tempfolder`，比如`mnt/sdcard/folder/tempfolder`. 如果我不知道文件夹在 sdcard 中的存储位置，但我知道文件夹的名称。

是否可以根据文件夹名称获取文件夹的完整路径。如果有人知道解决方案，请帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T09:35:37.677

您可以`FileFilter`用于从根目录搜索所有目录。

```
 String dirName= "mnt/sdcard/";

    File dir = new File(dirName);

    File[] files = (new File(dirName)).listFiles();

    // This filter only returns directories
    FileFilter dirFilter = new FileFilter() {
        public boolean accept(File dir) {
            return dir.isDirectory();
        }
    };

    files = dir.listFiles(dirFilter);

    for (int i=0; i<files.length; i++) {
        if(files[i].getAbsolutePath().contains("tempfolder"))
          System.out.println("directory path : " + files[i].getAbsolutePath());
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T09:22:29.673

您可以执行以下操作：

```
 //get the path of the sdcard and enter all the files to an array file
        File[] file = Environment.getExternalStorageDirectory().listFiles();  

        for (File f : file)
        {
            if (f.isDirectory()) { 
                 file[] innerFiles = f.listFiles();

                 for(int i=0; i< innerFiles.length;i++){
                   Log.i("Name", innerFiles[i].getPath() + "");
                 }
        }

            if (f.isFile()) { ... do stuff }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T09:27:00.363

请看看这个。我认为它对你有帮助。

```
 File file[] = Environment.getExternalStorageDirectory().listFiles();  

    for (File f : file)
    {
        if (f.isDirectory()) { 

            Log.i("Name", f.getPath()+"");
        }
    } 
```

谢谢

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-13T09:17:29.297

试试这个代码：

```
for (File file : folder.listFiles()) {
    if (file.isFile()) {
       Log.v("Folders on the sd card are:  ", folder.getName() + " in path " + folder.getAbsolutePath());
    } 
```

# xml - 如何在 XSLT2.0 中使用变量编写查询？

> ID：11011681
> 
> 赞同：0
> 
> 时间：2012-06-13T09:13:31.133
> 
> 标签：xml, perl, xslt, variables, xslt-2.0

我想使用 2 个名为 SOURCE 和 DEST 的变量。以这种方式，我的 perl 脚本将使用

源=“波恩”；

DEST="柏林";

然后我将从我的 perl 脚本调用 xslt2.0 转换。

```
<xsl:param name="SOURCE"/>
<xsl:param name="DEST"/>

<xsl:variable name="start" select="//S[@id=$SOURCE]/T[@id=$DEST]"/>

<!--<xsl:variable name="start" select="//S[@id='Paris']/T[@id='London']"/> --> 
```

碰巧我没有正确写入该行（因为这个 xslt 敌人不返回任何行）：

```
<xsl:variable name="start" select="//S[@id=$SOURCE]/T[@id=$DEST]"/> 
```

您能否更正我的 XSLT 语法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T10:43:09.310

我认为问题只是以正确的方式调用 Saxon，如果您使用命令行界面，那么我认为您需要使用 eg `transform.exe -s:file.xml -xsl:sheet.xsl -o:result.xml SOURCE=Bonn DEST=Berlin`。

# c++ - 绘制折线导致像素化线

> ID：11011684
> 
> 赞同：1
> 
> 时间：2012-06-13T09:13:43.913
> 
> 标签：c++, winapi, gdi

我正在尝试创建自己的可以具有透明背景的本机 win32 C++ 复选框。这个想法是使窗口/小部件看起来与 Windows XP 样式复选框完全相同，只是它可以具有透明背景。

**我的问题：**当我为我的文本框画勾时，'勾'线看起来像素化和锯齿状 - 请参阅下面的图片以了解它的外观。它看起来不像实际的复选框勾选那样平滑。

左边的复选框是我的，右边是我要复制的默认窗口： ![在此处输入图像描述](../Images/f7caeacdac5f23923e2afd42e6342812.png)

**我怎样才能使我的刻度平滑而不像素化。**什么是我可以用来绘制刻度的 Win32 GDI 函数。我应该使用位图图像而不是在 GDI 中绘制刻度吗？目前我使用 PolylineTo() 来绘制刻度线。也许我应该使用 PolylineToEx()？

任何建议将不胜感激。

绘制刻度的代码（此代码在 WM_PAINT 中）：

```
 HGDIOBJ hPen      = CreatePen(PS_SOLID, 2, RGB(45,45,45)); //ExtCreatePen(PS_COSMETIC, dwPenStyle[i], 1, &lb, 0, NULL); 
 HGDIOBJ hPenOld   = SelectObject(hdc, hPen); 
 POINT tickPnts[3] = {{3,((height-CHECK_RECTH)/2)+6}, {5,((height-CHECK_RECTH)/2)+9}, {9,((height-CHECK_RECTH)/2)+2}};
 MoveToEx(hdc, tickPnts[0].x, tickPnts[0].y, NULL);
 PolylineTo(hdc, tickPnts, 3);
 SelectObject(hdc, hPenOld); 
 DeleteObject(hPen); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T12:50:00.600

Windows 使用[Marlett](http://blogs.msdn.com/b/oldnewthing/archive/2012/01/16/10256947.aspx)字体来呈现复选框刻度、窗口框架按钮和其他可扩展的 UI 元素。您可以使用抗锯齿渲染字体以获得平滑的边缘。

（无论如何，这肯定是真的；我不确定 Windows 7 中的新窗口框架按钮是否使用该字体，但该字体仍然存在。）

GDI 不做任何抗锯齿，这就是为什么你的线条看起来参差不齐的原因。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-13T12:34:39.787

标准复选框可以是透明的。有关示例，请参见此页面：

[http://us.generation-nt.com/answer/transparent-background-color-checkbox-help-27571202.html](http://us.generation-nt.com/answer/transparent-background-color-checkbox-help-27571202.html)

在 Winforms 中，您只需将背景颜色设置为`Transparent`.

# c# - BehaviourSubject 和 CombineLatest - 奇怪的行为

> ID：11011687
> 
> 赞同：0
> 
> 时间：2012-06-13T09:13:51.557
> 
> 标签：c#, system.reactive

在以下代码中：

```
public class Connection
{
    private BehaviorSubject<string> addressSubject = new BehaviorSubject<string>("null");
    private EventLoopScheduler scheduler = new EventLoopScheduler(ts => new Thread(ts));
    private IDisposable reconnectSubscription = null;

    public Connection()
    {
        this.reconnectSubscription = this.addressSubject
            .ObserveOn(this.scheduler)
            .CombineLatest(Observable.Interval(TimeSpan.FromSeconds(1), this.scheduler), (x, y) => x)
            .Subscribe(x => Debug.WriteLine(x));
    }    

    public void Connect(string address)
    {
        Observable.Start(() => this.addressSubject.OnNext(address), this.scheduler);
    }

    public void Disconnect()
    {
        Observable.Start(() => this.addressSubject.OnNext(null), this.scheduler);
    }
} 
```

调用“连接”后，它会打印。

```
null
localhost
null
localhost
null
localhost 
```

我认为这是一些线程问题，因为如果我`Connect`在构造函数中调用它会按预期工作。

有什么建议么？

# facebook - OpenGraph：自定义属性未在帖子中显示

> ID：11011690
> 
> 赞同：7
> 
> 时间：2012-06-13T09:13:55.783
> 
> 标签：facebook, post, facebook-opengraph

我为我的应用程序创建了一个自定义对象/操作/聚合。

[https://graph.facebook.com/10151038251679973](https://graph.facebook.com/10151038251679973)

一切正常，但现在我想为我的对象添加自定义属性。

我已经成功添加了两个属性：when 和 facility。

问题是，当我共享对象（即在我的墙上发布链接）时，自定义属性不会显示。

任何的想法？我必须做一些额外的配置吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-24T12:01:09.190

自定义属性不会显示为刚刚发布的对象，但您可以使用您的操作显示它们。您应该`{match.when}`在操作设置（配置故事附件部分）的“标题”字段中指定类似内容：

![动作设置](../Images/d75d920a72eccae625eb0708a112a67c.png)

一旦发布了动作引用`match`对象（和上面描述的标题），您将看到如下内容：

![已发布的操作](../Images/f39ab9422881ebbd87ca944c669e0403.png)

**顺便说一句**，关于您在调试工具中看到的与日期格式相关的警告的一些注意事项：
目前没有办法摆脱提供数字`timestamp`而不是日期的其他消息（[简单类型](https://developers.facebook.com/docs/opengraph/simpletypes/)`ISO 8601`中为 DateTime 描述的任何示例或格式都没有警告） 。好消息是即使显示警告，日期也会正确更新，因此您可以忽略此类警告，只要在调试工具输出的对象属性中显示正确并代表您的实际日期。该问题存在几个错误：[#159315504193810](https://developers.facebook.com/bugs/159315504193810)和[#302542186507947](https://developers.facebook.com/bugs/302542186507947)`timestamp`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T09:46:52.483

在此处查看 Facebook 调试器输出：

[https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.sportilia.com%2Fg%2Fpartite%2F183%3Ffb_utente%3D5](https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.sportilia.com%2Fg%2Fpartite%2F183%3Ffb_utente%3D5)

看起来你的日期格式可能搞砸了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T11:53:32.937

> 问题是，当我共享对象（即在我的墙上发布链接）时，自定义属性不会显示。

我不确定当您仅​​共享指向墙上对象的*链接时它们是否应该出现。*

您是否尝试过为您的对象发布操作？当这创造了一个故事时，他们应该出现在那里。

进入您的应用程序设置，编辑对象，然后在底部查看预览对象（如果还没有预览对象，可能必须先创建一个）。编辑它，为你的自定义属性添加一些值——它们应该显示在那里（至少这是我在用我的一个测试它时看到的）。

# entity-framework - Entity Framework 4.3 迁移移动现有数据

> ID：11011695
> 
> 赞同：6
> 
> 时间：2012-06-13T09:14:07.297
> 
> 标签：entity-framework, ef-code-first, entity-framework-migrations

我正在使用 EF Code First 4.3 迁移来更新我的数据库方案。现在我有以下情况：需要删除表A，必须创建表B，并且必须将表A的数据（连同其他一些数据）复制到表B。我无权访问类`DbContext`中的，`DbMigration`我的问题是如何实现这个？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-13T09:42:42.827

在迁移的迁移`Up`方法中，您可以使用`Sql`方法来定义您需要的任何 SQL，因此如果您使用显式迁移，您可以将数据迁移代码放在创建表 B 和删除表 A 之间。

# javascript - 使用javascript删除行时出错？

> ID：11011697
> 
> 赞同：0
> 
> 时间：2012-06-13T09:14:15.293
> 
> 标签：javascript, jquery

我有一个示例代码：

```
<input type="checkbox" id="input_modem_1" onclick="add_delete_row(this, 1,'test1' )" name="modem_id[]" value="1" /> test 1
<input type="checkbox" id="input_modem_2" onclick="add_delete_row(this, 2,'test2' )" name="modem_id[]" value="2" /> test 2
<table id="modem_list"></table> 
```

和代码javascript：

```
<script>
function add_delete_row(element, id, modem_name) {
    if(element.checked) {
        if(id) {
            deleteRow(id);
        }
        addRow(id, modem_name);
    } else {
        deleteRow(id);
    }
}
function addRow(id, modem_name) {
    var table = document.getElementById("modem_list");

    var rowCount = table.rows.length;
    var row = table.insertRow(rowCount);

    var cell1 = row.insertCell(0);
    var element1 = document.createElement("input");
    element1.type = "checkbox";
    cell1.appendChild(element1);

    var cell2 = row.insertCell(1);
    var element2 = document.createElement("input");
    element2.type = "hidden";
    element2.value = id;
    cell2.innerHTML = modem_name;
    cell2.appendChild(element2);
}
function deleteRow(id) {
    try {
        $('modem_list').removeChild($('modem_'+id));
        $('modem_list').removeChild($('input_modem_'+id));
    } catch(err){}
}
</script> 
```

当我检查一个值是结果添加一行时，当我取消选中这一行时，结果没有运行并且它添加更多，如何修复它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T09:38:17.520

如果要使用 jQuery 按 ID 选择元素，则需要使用井号。那是

```
$('#modem_list') 
```

不是

```
$('modem_list') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T09:57:57.973

`row.setAttribute("name","modem_"+id);`之后添加`var row = table.insertRow(rowCount);`

并替换`function deleteRow(id)`为下一个

```
function deleteRow(id) {
    var table = document.getElementById("modem_list");
    var rowName = 'modem_'+id;
    if (table.rows.namedItem(rowName)) {
        table.deleteRow((table.rows.namedItem(rowName).rowIndex));
    }
} 
```

它可以在没有 jquery 的情况下工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T09:34:55.110

您不能使用此代码：在`function addRow()`您添加：

```
var row = table.insertRow(rowCount);
row.className = "input_"+id; // with id is 1, 2, ...n 
```

和：

```
function deleteRow(id) {
    try {
        jQuery(".input_"+id).remove();
    } catch(err){}
} 
```

# batch-file - 为什么 IS .. ELSE 构造在 CMD 中不起作用

> ID：11011698
> 
> 赞同：1
> 
> 时间：2012-06-13T09:14:16.937
> 
> 标签：batch-file, cmd

为什么 is .. else 构造在 CMD 中不起作用？它与 EnableDelayedExpansion 循环

```
IF ( !Delay! LSS !low_delay! ) ( SET priority=1 ) ELSE (
    IF ( !Delay! LSS !average_delay!) ( SET priority=2 ) ELSE (
      IF ( !Delay! LSS !high_delay! ) ( SET priority=3 ) ELSE (  SET priority=4 )  
)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T09:25:12.573

您的语法完全错误。
条件中不允许使用括号。
括号必须在 ELSE 语句所在的同一行。

```
IF !Delay! LSS !low_delay! ( 
  SET priority=1 
) ELSE (
    IF !Delay! LSS !average_delay! ( 
        SET priority=2 
    ) ELSE (
        IF !Delay! LSS !high_delay!  ( 
            SET priority=3 
        ) ELSE (  
            SET priority=4
        )
    )
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T09:26:17.723

Windows 批处理脚本支持 IF ELSE

你可以做

```
if "%VAR%" == "OK" (goto dowork) else (if "%VAR%" == "MAYBE" (goto dowork) else (goto end))

:dowork

do work

:end 
```

[外部参考](http://commandwindows.com/batchfiles-branching.htm)

# iphone - 如何“抛出”一组点并从中绘制连续样条？

> ID：11011706
> 
> 赞同：0
> 
> 时间：2012-06-13T09:14:37.310
> 
> 标签：iphone, objective-c, drawrect, spline

需要从drawRect中的多个点绘制样条线。是否可以“抛出”一组点并从中绘制连续样条曲线。另一种选择是在点之间循环并绘制多条样条线，一次从 2 个点绘制一条样条线。我想这样的连续样条被称为B样条？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T10:46:17.137

您将使用`UIBezierPath`and its `-addCurveToPoint:controlPoint1:controlPoint2:`or`-addQuadCurveToPoint:controlPoint:`方法。您必须自己计算控制点。

# .net - 相当于 SQL IN 运算符？

> ID：11011707
> 
> 赞同：0
> 
> 时间：2012-06-13T09:14:38.980
> 
> 标签：.net

给定以下查询：

```
Select * from myTable where stringField in ('A','B','C') 
```

我将从数据库中提取项目，但尚未决定是否将它们存储在列表、数组或其他集合对象中，但理想情况下需要内置的东西（无自定义类），并且无需手动迭代。

重点是性能和代码可维护性。

在.net中执行此操作的最有效方法是什么？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T09:16:37.153

最方便的方法是[`Enumerable.Contains`](http://msdn.microsoft.com/en-us/library/bb357185)（.NET 3.5 以上）。它也应该表现良好，尽管我没有进行基准测试。

例子：

```
var list = new[] { "A", "B", "C" };
var matches = myTable.Where(o => list.Contains(o.stringField)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T09:17:07.103

```
var searchItems = new [] {"A", "B", "C"};

var query = from c in myTable
            where searchItems.Contains(c.stringField)
            select c; 
```

如果它是关于 LINQ 2 SQL 的话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T09:18:21.413

您也许可以将 Linq Intersect 与自定义平等比较器一起使用

[http://msdn.microsoft.com/en-us/library/bb302032](http://msdn.microsoft.com/en-us/library/bb302032)

# python - 使用 xrange() 在特定条件下递增

> ID：11011711
> 
> 赞同：0
> 
> 时间：2012-06-13T09:14:55.237
> 
> 标签：python, increment, xrange

对于具有更多编程经验的人来说，这是一个非常简短且可能很容易回答的问题。如果满足某个条件，我想将我的计数器加一。我`xrange()`在我的`for`循环中使用。我可以手动增加`i`还是必须通过自己的计数器构建？

```
for i in xrange(1,len(sub_meta),2):
    if sub_meta[i][1] < sub_meta[i-1][1]:
            dict_meta[sub_meta[i-1][0]]= sub_meta[i][0]
    elif sub_meta[i][1] == sub_meta[i-1][1]:
            dict_meta[sub_meta[i-1][0]]= ''
            i += 1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T09:21:13.073

```
i = 1
while i < len(sub_meta):
    if sub_meta[i][1] < sub_meta[i-1][1]:
        dict_meta[sub_meta[i-1][0]]= sub_meta[i][0]
    elif sub_meta[i][1] == sub_meta[i-1][1]:
        dict_meta[sub_meta[i-1][0]]= ''
        i += 1
    i += 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T09:48:02.243

如果您打算经常这样做，这里有一个利用`send()`生成器方法的实现：

```
def changeable_range(start, stop=None, step=1):
    if stop is None: start, stop = 0, start
    while True:
        for i in xrange(start, stop, step):
            inc = yield i
            if inc is not None:
                start, stop = i, stop + inc
                break
        else:
            raise StopIteration 
```

用法：

```
>>> myRange = changeable_range(3)
>>> for i in myRange: print i
... 
0
1
2
>>> myRange = changeable_range(3)
>>> for i in myRange:
...     print i
...     if i == 2: junk = myRange.send(2) #increment the range by 2
... 
0
1
2
3
4 
```

# android - android布局不刷新

> ID：11011713
> 
> 赞同：1
> 
> 时间：2012-06-13T09:15:01.507
> 
> 标签：android, android-layout

我的应用程序不想刷新您`invalidate()`在任何一个布局上使用时看到的视图，如果我使用`this.invalidate()`. 我曾经`.removeAllViews()`从目标布局中删除视图，并尝试使用无效，但这也不起作用。

是否有另一种方法来刷新屏幕，使其显示最新的图像。用户将看到的图像是一组 editTexts 和标签，描述了需要哪些信息，然后将其全部删除，然后屏幕应该刷新，然后不再显示。

如果需要任何进一步的信息，请询问，这很紧急！谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:26:00.020

当再次调用 onDraw 时，invalidate 将强制 Android 更新。您可以尝试给`onDraw(Canvas)`自己打电话，因为它似乎没有被自动调用。

或者，您可以创建另一个布局文件，并使用
`setContentView(R.layout.newlayout)`

# format - 在 jqplot 中格式化 y 轴刻度/值

> ID：11011715
> 
> 赞同：2
> 
> 时间：2012-06-13T09:15:03.237
> 
> 标签：format, jqplot, axis

我发现以下线程非常有用

[http://groups.google.com/group/jqplot-users/browse_thread/thread/1986](http://groups.google.com/group/jqplot-users/browse_thread/thread/1986) ...

我想获取数组中的所有 y 轴值或刻度...我的目的是计算每个刻度中的位数并找到最频繁的位数。基于我计划截断y轴刻度/值中的位数。例如：如果大多数刻度有 6 位数字，则截断为 3 位数字并将单词（以千计）附加到轴标签上。

我怎样才能做到这一点？在下面的函数中，我可以一一获取刻度...但我需要提前获取它们，以便我可以决定通过什么因素截断数字。请忽略函数 numberwithCommas。它只是一个示例。

```
(function($) {
    $.jqplot.tickNumberFormatter = function (format, val) {
        if (typeof val == 'number') {
            if (!format) {
                format = '%.1f';
            }
            return numberWithCommas($.jqplot.sprintf(format, val));
        }
        else {
            return String(val);
        }
    };

    function numberWithCommas(x) {
        return x.toString().replace(/\B(?=(?:\d{3})+(?!\d))/g, ",");
    } 
```

@Boro：非常感谢您的回复。你能告诉我这条线到底是做什么的吗？

```
 var ticks = $('.jqplot-' + axisName + '-tick'); 
```

同一行在我的代码中不起作用。我该如何使用它？

在控件进入格式化程序之前，我可以使用它将所有刻度推入数组吗？也就是说，在控件进入下面的函数之前，我可以得到所有的刻度吗？

```
 $.jqplot.tickNumberFormatter = function (format, val) { 
```

以下代码在您的示例中运行良好。为什么它在我的不起作用:(

```
 var axisName = 'yaxis';
                var count = 0;
                var ticks = $('.jqplot-' + axisName + '-tick');
                for (count = 0; count <= ticks.length; count++)
                    {

                console.log($(ticks[count]).text());
                    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T10:30:50.840

起初我认为这就像[使用与此处类似的方法从情节本身中获取值一样简单。](https://stackoverflow.com/a/10701527/613495)因此，我创建[了一个示例，单击该示例围绕选定的轴刻度线循环。](http://jsfiddle.net/aQX8F/27/)这个问题是我们使用“私有”变量`_ticks`，`ticks`因为它是一个空数组（因为它必须显式设置）。例如，这种方法不适用于我们设置`ticks`变量的 xaxis。

因此，要获取所有刻度，无论它们是否由您设置，我会`jQuery`在您需要它们时使用并获取它们，[如本代码所示](http://jsfiddle.net/aQX8F/29/)。不过，考虑一下，如果格式化程序在情节完成之前采取行动，HTML 元素可能还没有抓取它们，但您可以自己测试它。如果这种方法不起作用，您可以随时调整第一种方法以根据是否设置的分时采取不同的行动。

**编辑响应 OP 的编辑：**

*你能告诉我这条线到底是做什么的吗？*

在这里，我使用它`jQuery`来捕获由其名称 ( `axisName`) 指定的轴的刻度。为此，在我使用它之前，我指定了`var axisName = 'yaxis';`变量。您可以将其替换为：`var ticks = $('.jqplot-yaxis-tick');`

当涉及到您的其他问题时，我在第一个答案的结尾可能会提到这种情况，即`if the formatter acts before the plot is finished the HTML elements might not be there yet to grab them`。

**编辑2：**

[看看这个样本。](http://jsfiddle.net/Boro/aQX8F/42/)它抓取格式化程序中的刻度，因为您有时可以观察到它们为零，这可能是因为格式化程序是在创建刻度 HTML 元素之前调用的。因此，只需在有一些刻度时应用您的算法，否则应用默认格式，看看这种方法是否有效。

它仍然可能不起作用，因为我们不知道发生了什么，例如，为什么在控制台中我们有一个`ticksNoZeroCounter`等于 20 的变量，它表示调用格式化程序的次数和`ticks.size() !== 0`. 为什么变量不等于 21 或其他可被 7 整除的数字（即刻度数）？

# php - 当您想扩展两个类时，php 中的最佳实践

> ID：11011717
> 
> 赞同：1
> 
> 时间：2012-06-13T09:15:06.370
> 
> 标签：php, oop

因此，我有一个名为 foo 的类，并且有两种在 mongo 或 mysql 中存储数据的方法。

目前我有类似的东西

```
namespace vendor;

use bar;
use bar\mysql;

class foo extends bar\mongo {

} 
```

现在有更好的方法吗？我知道有我只是不知道它是哪种模式（如果有的话）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T09:16:46.473

可以应用的原理叫做：

> 优先组合而不是继承

这意味着不是从这些对象继承，而是提供这些对象的类实例，然后对其进行操作。

例如：

```
class Mysql
{
    function getItems($what)
    {
        //return items from mysql
    }
}

class MongoDB
{
    function getItems($what)
    {
        //return items from MongoDB    
    }    
}

class Foo
{
    protected $db;

    public function __construct($db)
    {
        $this->$db = $db;
    }

    public function getFooItems()
    {
        $this->db->getItems('foo')    
    }
}

$db = new Mysql();
$foo = new Foo($db)
$foo->getFooItems(); //Will operate on the mysql db

$db1 = new MongoDB();
$foo1 = new Foo($db1);
$foo1->getFooItems(); //Will operate on the MongoDB 
```

我希望这有帮助

# java - Java 对象赋值

> ID：11011724
> 
> 赞同：23
> 
> 时间：2012-06-13T09:15:45.440
> 
> 标签：java, object, pass-by-reference, variable-assignment

我是 Java 新手，我对对象分配有一些疑问。例如，

```
Test t1 = new Test();
Test t2 = t1;
t1.i=1; 
```

假设变量`i`是在 Test 类中定义的，我是否正确假设 t1 和 t2 都指向同一个对象，其中修改`t1.i=1`会影响`t1`和`t2`？实际上我测试了它，似乎我是对的。但是，当我在 上尝试相同的操作时`String`，修改仅发生在另一侧不受影响的一侧。这背后的原因是什么？

编辑：我尝试使用 String 的情况。

```
String s1 = "0";
String s2 = s1;          
s1 = "1";
System.out.println(s1);
System.out.println(s2); 
```

我通过在 String 上测试案例来意识到我的错误，因为它是不可变的。我认为`s1="1"`修改字符串的情况实际上是将“1”的引用返回给s1。尽管如此，我的问题仍然存在。是否`Test t2 = t1;`导致 t2 和 t1 都指向同一个对象，或者现在每个都有自己的对象？这种情况是否适用于 Java 上的所有对象？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-13T09:17:47.287

你是对的，但字符串是一个特例；在这种情况下，它们是不可变的并且表现得像原语。

@newacct

我引用[http://docs.oracle.com/javase/tutorial/java/data/strings.html](http://docs.oracle.com/javase/tutorial/java/data/strings.html)：

> 注意： String 类是不可变的，因此一旦创建 String 对象就无法更改。String 类有许多方法，其中一些将在下面讨论，它们似乎可以修改字符串。由于字符串是不可变的，这些方法真正做的是创建并返回一个包含操作结果的新字符串。

这就是使字符串成为特殊情况的原因。如果您不知道这一点，您可能希望引用中讨论的方法不会返回新字符串，这会导致意外结果。

@user1238193

考虑您的以下问题：“Test t2 = t1; 是否导致 t2 和 t1 都指向同一个对象，或者现在每个对象都有自己的对象？这种情况是否适用于 Java 上的所有对象？”

t1 和 t2 将指向同一个对象。这适用于任何 java 对象（包括不可变对象）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-13T09:22:01.177

你的第一个假设是正确的。使用以下代码行：

```
Test t1 = new Test(); 
```

您创建一个新的 Test 对象，同时创建一个名为 t1 的 Test 引用来引用它。

在您发布的代码的第二行：

```
Test t2 = t1; 
```

您实际上是在创建另一个 Test 引用，并将其分配给 t1 引用的同一对象。

所以`t1.i = 1;`会影响`t2.i`它毕竟是同一个对象。

至于字符串，字符串是不可变的，实例化后不能修改。

关于您的编辑：

```
String s1 = "0";
String s2 = s1;          
s1 = "1";
System.out.println(s1);
System.out.println(s2); 
```

他们会打印出不同的结果，因为当你实际说

```
s1 = "1"; 
```

您实际上将 s1 绑定到另一个 String 对象，但 s2 仍将引用值为“0”的对象。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-13T18:04:01.720

在这两种情况下，您正在做完全不同的事情。在第一种情况下，`t1.i = 1;`您正在修改 指向的对象`t1`。在第二种情况下，使用`t1 = "1";`，您将引用更改为指向另一个对象（类似于您使用`t2 = t1;`.

如果你`Test`对第二种情况做同样的事情，你会得到相同的结果（假设`Test`有一个接受整数的构造函数）：

```
Test t1 = new Test(5);
Test t2 = t1;          
t2 = new Test(1); // Here we are assigning to the variable, just like your 2nd example
System.out.println(t1);
System.out.println(t2); 
```

人们提到这`String`是不可变的。但这无关紧要，语言中没有“可变性”的概念，“可变”和“不可变”类的工作方式没有区别。如果一个类碰巧没有您可以设置的任何字段或任何可以更改其内部内容的方法，我们非正式地说它是“不可变的”。情况就是这样`String`。但是，如果您根本不做任何事情来改变它，那么可变类将以完全相同的方式工作。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-13T09:17:02.507

你是绝对正确的，因为 t1 和 t2 都引用同一个对象，所以对象状态中的任何通道都会影响两者。

String 是一个不可变的对象。所以根本无法修改。有关 java 中不可变对象的更多信息，[请参阅此内容。](http://docs.oracle.com/javase/tutorial/essential/concurrency/immutable.html)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-13T09:18:17.497

[字符串对象是不可变的](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html)。

* * *

**编辑**

*是否`Test t2 = t1;`导致 t2 和 t1 都指向同一个对象，或者现在每个都有自己的对象？*

是的。虽然`t2`是一个新的引用，但它会指向同一个对象，因为你告诉它这样做。创建一个新`t2`的类型引用，`Test`让它指向同一个对象`t1`。

但是，当您使用`String`s 执行此操作然后执行类似`s1 = "1" ;`使 s1 指向另一个 String 对象的操作时。你可以用术语来想它`s1 = new String(1);`。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-13T09:20:43.747

字符串和其他对象一样是对象。因此，您分配给它们的任何变量都指的是对象的同一个实例，就像您对测试对象所做的那样。

但请记住，String 没有您可以像在 Test 上那样设置的字段，因此您基本上无法进行相同的测试，因此无法将您的代码从 Test 对象移植到 String 对象。

使用原始类型（如 long、int 等）会得到相反的行为。它们被“按值”分配给变量，所以如果你这样做

```
int t1 = 12;
int t2 = t1;
t1=15; 
```

t2 仍然有值 12

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-10-20T06:33:19.563

因为java使用了字符串字面量的概念。假设有5个引用变量，都引用一个对象“0”。如果一个引用变量改变了对象的值，就会影响到所有的引用变量。这就是为什么字符串对象在 java 中是不可变的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-05-07T02:46:59.187

以 StringBuilder 为例会更清楚一点。以下示例显示了仅使用引用而不是值的对象分配。

{ StringBuilder str = new StringBuilder();

```
 str.append("GFG");

    StringBuilder str1 = str;

    str.append("tail");
    // output: str1 = GFGtail str = GFGtail
    System.out.println("str1 = " + str1.toString() + " str = " + str.toString()); 
```

}

# google-docs-api - 如何在 Java 中进行分层文档搜索？

> ID：11011726
> 
> 赞同：0
> 
> 时间：2012-06-13T09:16:00.150
> 
> 标签：google-docs-api, google-drive-api

如何在 Google Doc api 的层次结构中搜索文档？

我在谷歌文档中有分层文件夹结构，如下所示..

```
-TestFolder  
---Test1  
-------Foo  
-------BAR  
---Test2   
-------Foo  
-------BAR 
```

我的搜索查询是这样的：

[https://docs.google.com/feeds/default/private/full/-/folder/TestFolder/Test2?title=Foo&title-exact=true&showfolders=true](https://docs.google.com/feeds/default/private/full/-/folder/TestFolder/Test2?title=Foo&title-exact=true&showfolders=true)

我仍然从 test1 中取回了 Foo 的文件夹资源 id，实际上需要在嵌套结构中进行精确搜索。

如何在层次结构中搜索 Google Doc 中的文件夹？

如何使用 Google Doc list api 对 Google Doc 中的文档和文件夹进行嵌套文件夹搜索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T05:11:36.057

我自己找到了答案，google doc没有提供任何机制，我们可以直接放置一些带有层次结构的url并获取文件夹列表和doclist，为此我必须使用google do api创建一些新方法，这将使用资源 id 遍历整个路径，最后我们将获得嵌套文件夹资源 id 及其内容。

# android - 如何在物理安卓设备上使用地图？

> ID：11011729
> 
> 赞同：0
> 
> 时间：2012-06-13T09:16:09.557
> 
> 标签：android, google-maps, android-mapview

我需要在物理 Android 设备上运行地图，我该怎么做？

我不想使用 AVD 来调试它。

顺便说一句，我在 AVD 上遇到了同样的错误，所以请帮忙？这是我的代码

```
<com.google.android.maps.MapView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/map"
        android:apiKey="0enZtoViiB7JtEUxmyjwYWuw0Hz8pdTqNNWtBjQ"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:clickable="true" /> 
```

AndroidManifest.xml

```
<uses-library android:name="com.google.android.maps" /> 
```

活动：

```
public class AroundMeActivity extends MapActivity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.qa_layout_activity);

    MapView mapView = (MapView) findViewById(R.id.map);
    mapView.setBuiltInZoomControls(true);
}

@Override
protected boolean isRouteDisplayed() {
    return false;
}
}

STACKTRACE:
at android.app.ActivityThread.main(ActivityThread.java:3683)
        at java.lang.reflect.Method.invokeNative(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:507)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
        at dalvik.system.NativeStart.main(Native Method)
        Caused by: java.lang.IllegalAccessError: Class ref in pre-verified class resolved to unexpected implementation
        at dalvik.system.DexFile.defineClass(Native Method)
        at dalvik.system.DexFile.loadClassBinaryName(DexFile.java:207)
        at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:200)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:511) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T07:30:44.510

这`Exception`通常意味着您的项目中存在符号冲突。确保您`maps.jar`在项目中只包含一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T09:41:49.210

第二个.java

```
import java.util.List;

import android.content.Context;
import android.content.Intent;
import android.graphics.drawable.Drawable;
import android.location.Criteria;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;
import com.google.android.maps.Overlay;
public class second extends MapActivity 
{

MapView mapView;
Drawable drawable;
LocationManager locationmanager;
private LocationListener locationListener;
MapController mapController;
private String provider;
Location location;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

            mapView = (MapView) findViewById(R.id.MapView);
            mapView.setBuiltInZoomControls(true);
            mapView.setSatellite(true);
            mapView.setStreetView(true);
            mapController = mapView.getController();
            mapController.setZoom(16);

            GeoPoint point = new GeoPoint(lat,lon);
//lat and lon are integer values for describing the location
            mapView.invalidate();
            mapController.animateTo(point);

} 
```

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<com.google.android.maps.MapView
    xmlns:android="http://schemas.android.com/apk/res/android"

    android:id="@+id/MapView"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:clickable="true"
    android:apiKey="API key"
/> 
```

AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.android.gps22"
      android:versionCode="1"
      android:versionName="1.0">
    <uses-sdk android:minSdkVersion="8" />
    <uses-permission android:name="android.permission.INTERNET"/>
    <application android:icon="@drawable/icon" android:label="@string/app_name">
    <uses-library android:name="com.google.android.maps"/>
        <activity android:name=".second"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

# php - 如何使用 SAX Parser 解析小部分数据？

> ID：11011732
> 
> 赞同：1
> 
> 时间：2012-06-13T09:16:25.300
> 
> 标签：php, android, saxparser, commonsware-cwac

我正在制作一个小型 android 应用程序，其中我使用 [https://github.com/commonsguy/cwac-endless/使用无限列表视图](https://github.com/commonsguy/cwac-endless/)

服务器端的数据可能包含数千个条目，因此一次下载所有值会非常大。`cacheInBackground()`我应该使用一个链接分段解析数据，还是应该分段分解 Web 服务并在一段时间后从不同的链接使用 sax 解析器调用它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T09:31:12.907

我认为主要问题不是解析我认为主要问题是大文件的下载时间

![在此处输入图像描述](../Images/7d6e481743c2a5911048675b9585d816.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T09:54:03.323

正如 Dheeresh 试图告诉你的那样，下载时间将比解析时间长得多。因此，多担心下载时间，少担心解析时间。

> 我应该使用一个链接分段解析数据，还是应该分段中断 Web 服务并在不同链接的一段时间间隔后使用 cacheInBackground() 中的 sax 解析器调用它们。

您应该“将 Web 服务分成几部分”以下载部分数据，对其进行解析，然后将其加载到您的适配器中。当用户再次滚动到底部时，下载并解析数据的下一部分并将其加载到适配器中。等等。

# java - Jaxb 2 Maven 插件 - 如何让 Maven 尊重 XSD 命名空间？

> ID：11011736
> 
> 赞同：0
> 
> 时间：2012-06-13T09:16:31.103
> 
> 标签：java, maven, xsd, jaxb, maven-jaxb2-plugin

根据 maven 的任何 jaxb2 插件，我有一个问题。我想从 XSD 模式生成源。通常，如果我从命令行运行 xjc，xjc 会根据它们的名称空间生成所有源（如**core** :AccountType 到**core** /AccountType.java 等）

```
cmd> xjc PublEnvlp.xsd 
```

我想使用一些 maven 插件来使用相同的功能，但是它将所有 java 类创建到一个目录中，因此存在重复冲突。是否有任何标志、插件、功能……使 maven 与命令行 xjc 命令一样工作？我在 Maven 中使用以下代码：

```
<plugin>
<groupId>org.codehaus.mojo</groupId>
<artifactId>jaxb2-maven-plugin</artifactId>
<version>1.3.1</version>
<executions>
    <execution>
        <id>xjc</id>
        <goals>
            <goal>xjc</goal>
        </goals>
        <configuration>
            <packageName>package.name</packageName>
            <schemaDirectory>src/main/resources/DataArchitecture/XML/RDF/Physical_Xml</schemaDirectory>
            <forceRegenerate>true</forceRegenerate>
            <verbose>true</verbose>
        </configuration>
    </execution>
</executions> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T09:36:11.030

尝试不使用`<packageName>package.name</packageName>`，它应该将它们放在适当的子目录中。

编辑：你可能有更多的运气`org.jvnet.jaxb2.maven2:maven-jaxb2-plugin`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T21:32:34.387

maven-jaxb2-plugin 调用 XJC 并且这尊重命名空间。您可以使用绑定来自定义包名称，但即使没有，您也应该根据命名空间获取包名称。你可能在其他地方有问题。

# c# - 无鼠标拖放 - 更改引发事件的方式（以编程方式引发拖放/拖动事件）

> ID：11011740
> 
> 赞同：5
> 
> 时间：2012-06-13T09:16:41.163
> 
> 标签：c#, wpf, kinect

（首先是问题，然后我会解释）

**如何告诉应用程序以编程方式放置对象/引发放置事件（我没有使用鼠标）？**

我目前正在为 MSKinect 开发，我想实现一个非常接近原生拖放的拖放（参见[msdn doc](http://msdn.microsoft.com/en-us/library/ms742859.aspx)）。

我已经使用画布实现了拖放，并使用 Kinect 光标引发的事件来“拖动”周围的东西。但我对使用拖放传输数据更感兴趣。

我知道通常释放鼠标按钮时会启动 drop 事件，我想在给定手势发生时释放 draggableElement。

附加信息：我正在根据[LesterLobo 的工作实施经理](http://blogs.msdn.com/b/llobo/archive/2008/02/26/drag-drop-library-updated.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T11:38:28.590

[`SendInput`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646310%28v=vs.85%29.aspx)您可以使用Win32 API的功能全局模拟鼠标移动和点击。[您可以在此处](http://www.pinvoke.net/default.aspx/user32.sendinput)找到有关如何使用 C# 调用函数的说明。

该`SendInput`功能与实际使用鼠标一样接近。不幸的是，使用它不是很方便。您必须模拟按下鼠标左键、移动鼠标​​和释放鼠标左键。

请注意，此方法旨在跨应用程序以及在应用程序内拖动内容。如果您只想在应用程序中拖动东西，很可能有一个更简单的解决方案。

# ios - iOS自定义更多导航控制器

> ID：11011741
> 
> 赞同：2
> 
> 时间：2012-06-13T09:16:41.937
> 
> 标签：ios, uitabbarcontroller

我想在 MoreNavigationController`UIImageView`中生成的顶部添加一个。`UITableView`为此，我需要更改`UITableView`的位置和大小。

这是我尝试过的代码：

```
UIImageView *img = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"barre.png"]];
    [img setFrame:CGRectMake(0, 20, 320, img.frame.size.height)];
    [self.tabBarController.moreNavigationController.view addSubview:img];
    [[[self.tabBarController.moreNavigationController.viewControllers objectAtIndex:0] view] setFrame:CGRectMake(0, 320, 320, 300)]; 
```

图像已添加，但 tableview 大小和位置不会改变。我也试过：

```
[self.tabBarController.moreNavigationController.topViewController.view setFrame:CGRectMake(0, 320, 320, 300)]; 
```

# java - Java null.equals(对象 o)

> ID：11011742
> 
> 赞同：24
> 
> 时间：2012-06-13T09:16:42.847
> 
> 标签：java, object, null

我知道不可能像这样在 null 对象上调用 equals 方法：

```
//NOT WORKING
            String s1 = null;
            String s2 = null;
            if(s1.equals(s2))
            {
                System.out.println("NOT WORKING :'(");
            } 
```

但在我的情况下，我想比较两个数据库中的两个对象，这两个对象的属性可以为空......

那么比较两个属性的方法是什么，知道我们不确定值是null还是填充。

这个方法好不好？

```
//WORKING
            String s1 = "test";
            String s2 = "test";
            if(s1 == s2 || s1.equals(s2))
            {
                System.out.println("WORKING :)");
            }

            //WORKING
            String s1 = null;
            String s2 = null;
            if(s1 == s2 || s1.equals(s2))
            {
                System.out.println("WORKING :)");
            } 
```

我不确定，因为在这种情况下它不起作用......：

```
//NOT WORKING
            String s1 = null;
            String s2 = null;
            if(s1.equals(s2)|| s1 == s2  )
            {
                System.out.println("NOT WORKING :'''(");
            } 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-13T09:22:49.677

我通常使用我编写的静态实用程序函数`equalsWithNulls`来解决这个问题：

```
class MyUtils {
  public static final boolean equalsWithNulls(Object a, Object b) {
    if (a==b) return true;
    if ((a==null)||(b==null)) return false;
    return a.equals(b);
  }
} 
```

用法：

```
if (MyUtils.equalsWithNulls(s1,s2)) {
  // do stuff
} 
```

这种方法的优点：

*   在单个函数调用中总结了完全相等测试的复杂性。我认为这比每次执行此操作时都在代码中嵌入一堆复杂的布尔测试要好得多。结果导致错误的可能性要小得多。
*   使您的代码更具描述性，因此更易于阅读。
*   通过在方法名称中明确提及空值，您可以向读者传达他们应该记住其中一个或两个参数可能为空值。
*   是否首先进行 (a==b) 测试（在 a 和 b 非空但引用完全相同的对象的相当常见的情况下避免调用 a.equals(b) 的优化）

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-06-13T09:21:33.067

在执行 equals 方法之前，您需要检查至少一个不为空 -

```
if(s1 == s2 || (s1!=null && s1.equals(s2)))  {
   System.out.println("WORKING :)");
} 
```

在这里`s1==s2`可以工作`null==null`。但是，如果甚至一个不为空，那么您需要在执行 equals 之前检查至少 s1。

更新：正如@'bernard paulus' 所编辑，如果您使用的是 Java 7，则可以使用[java.util.Objects.equals(Object, Object)](http://docs.oracle.com/javase/7/docs/api/java/util/Objects.html#equals%28java.lang.Object,%20java.lang.Object%29)

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2016-04-19T10:48:59.383

另一个使用选项：

```
Objects.equals(identification, criteria.getIdentification()) 
```

> [java.util.Objects](https://docs.oracle.com/javase/7/docs/api/java/util/Objects.html)
> 
> 此类包含用于对对象进行操作的静态实用程序方法。这些实用程序包括用于计算对象的哈希码、返回对象的字符串以及比较两个对象的空值安全或空值容忍方法。
> 
> 自：1.7
> 
> [公共静态布尔等于（对象a，对象b）](https://docs.oracle.com/javase/7/docs/api/java/util/Objects.html#equals(java.lang.Object,%20java.lang.Object))
> 
> 如果参数彼此相等，则返回 true，否则返回 false。因此，如果两个参数都为 null，则返回 true，如果恰好一个参数为 null，则返回 false。否则，相等性是通过使用第一个参数的 equals 方法来确定的。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-11-19T23:32:08.593

尝试使用 org.apache.commons.lang 中的 ObjectUtils 类

```
public static boolean equals(java.lang.Object object1,
                         java.lang.Object object2) 
```

从 api 文档...

比较两个对象是否相等，其中一个或两个对象可能为空。

ObjectUtils.equals(null, null) = true

ObjectUtils.equals(null, "") = false

ObjectUtils.equals("", null) = false

ObjectUtils.equals("", "") = true

ObjectUtils.equals(Boolean.TRUE, null) = false

ObjectUtils.equals(Boolean.TRUE, "true") = false

ObjectUtils.equals(Boolean.TRUE, Boolean.TRUE) = true

ObjectUtils.equals(Boolean.TRUE, Boolean.FALSE) = false

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-13T09:21:20.630

您在为 null时收到 NullPointerException 的原因`s1.equals(s2)`不是*因为*s2 为 null，而是因为您试图在 s1 上调用 equals 方法，该方法为 null。`s1`

 *尝试像这样修改它：

```
if(s1 != null && s1.equals(s2){ /*...*/ } 
```

另请注意，如果 s1 不为 null 而 s2 为 null，您将得到`false`equals 的返回值，但没有 NullPointerException。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-13T09:21:46.500

```
 String s1 = null;
        String s2 = null;

        if(s1 != null && s2 != null && s1.equals(s2)) {
            System.out.println("equals");
        } else {
            System.out.println("not equals");
        } 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-06-13T09:23:51.940

我认为您正在比较两个对象。

所以应该是这样的

```
if(s1==null & s2 == null)  // both null but equal
   return true;
else if(s1 != null && s2 != null && s1.equals(s2)) // both not null and equal
   return true;
else
   return false; 
```

True - 等于 False - 不等于

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-06-13T09:43:17.707

如果您想知道某些内容是否为“空”，您可以使用以下方法进行比较：

```
if(s1==null) 
```

如果它是空的，它会告诉你真实的。问题，如果你有一个空字符串，你不能使用equals()方法。由于这个原因，你的第三部分不起作用，因为如果它等于你就不能使用空指针。

您应该首先检查对象是否为空，然后如果它不为空，请使用 equals 方法。

另一方面要小心，因为也许你想比较空字符串，在这种情况下你必须使用 equal("")。如果要比较空字符串，最好将空字符串放在首位：

```
"".equals(YourStringNotNull); 
```

对不起我的英语，希望对你有帮助。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-12-27T09:26:02.117

在空对象上调用点运算符（调用方法或对象属性）将**始终**抛出 RuntimeException （***异常***是静态成员，因为它们不属于对象而是属于类）。

代码块之所以有效，只是因为 || 是一个快捷操作符：

```
 String s1 = null;
 String s2 = null;
 if(s1 == s2 || s1.equals(s2)) 
```

如果左侧为真，它**不会评估右侧。**

&& 相同：如果左侧为假，它不会评估右侧。*

# ios - iOS 为我的功能提供 EXC_BAD_ACCESS

> ID：11011745
> 
> 赞同：0
> 
> 时间：2012-06-13T09:16:49.987
> 
> 标签：ios, exc-bad-access

我写了一个小函数来放大 2 倍。但是当我运行它时它给出了 EXC_BAD_ACCESS 错误。下面是代码

```
- (CGImageRef)CGImageScale2x:(CGImageRef)imgRef
{
    CGFloat width = CGImageGetWidth(imgRef);
    CGFloat height = CGImageGetHeight(imgRef);

    CGRect imgRect = CGRectMake(0, 0, width, height);
    CGAffineTransform transform = CGAffineTransformMakeScale(2.0, 2.0);
    CGRect scaledRect = CGRectApplyAffineTransform(imgRect, transform);

    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    CGContextRef bmContext = CGBitmapContextCreate(NULL,
                                                   scaledRect.size.width,
                                                   scaledRect.size.height,
                                                   8,
                                                   0,
                                                   colorSpace,
                                                   kCGImageAlphaPremultipliedFirst);
    CGContextSetAllowsAntialiasing(bmContext, FALSE);
    CGContextSetInterpolationQuality(bmContext, kCGInterpolationNone);
    CGColorSpaceRelease(colorSpace);
    CGContextScaleCTM(bmContext, 2.0, 2.0);
    CGContextDrawImage(bmContext, CGRectMake(0, 0,
                                             scaledRect.size.width,
                                             scaledRect.size.height),
                       imgRef);

    CGImageRef scaledImage = CGBitmapContextCreateImage(bmContext);
    CFRelease(bmContext);
    [(id)scaledImage autorelease];

    return scaledImage;
} 
```

我是 iOS 新手。请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:19:53.870

`CGImageRef`不能自动发布，它是核心基础类型。尝试`CGImageRelease(scaledImage)`改用。

# openssl - 使用阻塞套接字在 openssl 中进行 SSL 重新协商

> ID：11011747
> 
> 赞同：1
> 
> 时间：2012-06-13T09:17:02.143
> 
> 标签：openssl

这是关于客户端服务器通信中的 openssl 重新协商问题。openssl 版本是 1.0.1c。

客户端和服务器正在使用阻塞套接字建立 SSL 连接，通信正常。客户端发送数据，服务器接收并发送回客户端。

当服务器想要重新协商时，使用 SSL_renogotiate，SSL_do_handshake 将 SSL 状态设置为 SSL_ST_ACCEPT。

客户端的一般行为是在控制台上等待使用 SSL_write 读取数据以将其发送到服务器。在此期间，如果服务器重新协商并且客户端通过调用 SSL_write 从控制台发送任何数据，则重新握手失败。

以下行在服务器端打印，从第二个 SSL_do_handshake 返回 -1

3086063264：错误：140940F5：SSL 例程：SSL3_READ_BYTES：意外记录：s3_pkt.c:1404：

以下行在客户端使用 SSL_read 读取时打印，在向服务器发送数据后返回 -1

3086079648：错误：140943F2：SSL 例程：SSL3_READ_BYTES：sslv3 警报意外消息：s3_pkt.c:1251：SSL 警报编号 10 3086079648：错误：140940E5：SSL 例程：SSL3_READ_BYTES：ssl 握手失败：s3_pkt.c:1151：

在 openssl.org 中给出了以下阻塞套接字

如果底层 BIO 阻塞，则 SSL_write() 只会在写入操作完成或发生错误后返回，除非发生重新协商，在这种情况下可能会发生 SSL_ERROR_WANT_READ。

当 SSL_write 接收 SSL 重新协商时，它在 clint 端的行为究竟如何。在这种情况下，如何重新握手成功。

问候， Pradeep

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T16:22:46.247

`SSL_write`如果底层 SSL 通道需要读取或写入操作以进行重新协商，则将在阻塞上下文中返回。您可以使用`SSL_set_mode`with允许 SSL 自动重新协商`SSL_MODE_AUTO_RETRY`。可以为每个连接设置此标志，也可以在`CTX`.

（[文档](http://www.openssl.org/docs/ssl/SSL_CTX_set_mode.html)）

# python - 如何在 PyQt4 脚本中导入和使用外部字典？

> ID：11011749
> 
> 赞同：1
> 
> 时间：2012-06-13T09:17:03.647
> 
> 标签：python, dictionary, import, pyqt

我正在编写我的 PyQt4 程序并操作许多字典。文件脚本本身没有问题，但现在需要使用不在我的文件脚本中的字典，我不知道如何正确导入和使用它们来更新我的“真实”字典。

我所有的字典都在程序顶部的**init构造函数中声明。**

这是我的程序的一部分，它在函数中显示示例字典：

```
self.dicoMentalRay = { 'projectDirectory' : self.mentalrayProjectDirectory_Text.text(),
'sceneFilename' : self.mentalrayProjectSceneFilename_Text.text(),
'renderer' : self.mentalrayRenderingRenderer_Text.text() } 
```

以及单击按钮后（在另一个功能中）应该如何更新：

```
self.dicoMentalRay.update(dicoMentalRay2) 
```

“dicoMentalRay2”应该在另一个 .py 文件中，在我的脚本的同一目录中。我很好地导入它

```
import dico 
```

问题是我总是遇到同样的错误：

```
NameError: global name 'dicoMentalRay2' is not defined 
```

我认为问题在于我的“dico.py”写得不好。确实，我只在里面写了一本新字典，没有别的，比如类或函数。

我该怎么办？谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:49:35.970

要使用 dico 文件中的 dicoMentalRay2，您必须使用

```
from dico import dicoMentalRay2
self.dicoMentalRay.update(dicoMentalRay2) 
```

或者

```
import dico
self.dicoMentalRay.update(dico.dicoMentalRay2) 
```

# python - 有没有任何pythonic方法可以组合两个dicts（为两者中出现的键添加值）？

> ID：11011756
> 
> 赞同：522
> 
> 时间：2012-06-13T09:17:28.147
> 
> 标签：python, dictionary

例如我有两个字典：

```
Dict A: {'a': 1, 'b': 2, 'c': 3}
Dict B: {'b': 3, 'c': 4, 'd': 5} 
```

我需要一种“组合”两个字典的pythonic方式，结果是：

```
{'a': 1, 'b': 5, 'c': 7, 'd': 5} 
```

也就是说：如果一个键出现在两个dict中，则添加它们的值，如果它只出现在一个dict中，则保留其值。

* * *

## 回答 #1

> 赞同：882
> 
> 时间：2012-06-13T09:22:27.340

使用[`collections.Counter`](http://docs.python.org/library/collections.html#collections.Counter)：

```
>>> from collections import Counter
>>> A = Counter({'a':1, 'b':2, 'c':3})
>>> B = Counter({'b':3, 'c':4, 'd':5})
>>> A + B
Counter({'c': 7, 'b': 5, 'd': 5, 'a': 1}) 
```

Counters 基本上是 的子类`dict`，因此您仍然可以使用它们执行通常使用该类型执行的所有其他操作，例如迭代它们的键和值。

* * *

## 回答 #2

> 赞同：126
> 
> 时间：2012-06-13T09:41:10.647

一个更通用的解决方案，它也适用于非数字值：

```
a = {'a': 'foo', 'b':'bar', 'c': 'baz'}
b = {'a': 'spam', 'c':'ham', 'x': 'blah'}

r = dict(a.items() + b.items() +
    [(k, a[k] + b[k]) for k in set(b) & set(a)]) 
```

甚至更通用：

```
def combine_dicts(a, b, op=operator.add):
    return dict(a.items() + b.items() +
        [(k, op(a[k], b[k])) for k in set(b) & set(a)]) 
```

例如：

```
>>> a = {'a': 2, 'b':3, 'c':4}
>>> b = {'a': 5, 'c':6, 'x':7}

>>> import operator
>>> print combine_dicts(a, b, operator.mul)
{'a': 10, 'x': 7, 'c': 24, 'b': 3} 
```

* * *

## 回答 #3

> 赞同：72
> 
> 时间：2012-06-13T09:25:28.460

```
>>> A = {'a':1, 'b':2, 'c':3}
>>> B = {'b':3, 'c':4, 'd':5}
>>> c = {x: A.get(x, 0) + B.get(x, 0) for x in set(A).union(B)}
>>> print(c)

{'a': 1, 'c': 7, 'b': 5, 'd': 5} 
```

* * *

## 回答 #4

> 赞同：47
> 
> 时间：2013-02-18T06:45:45.547

**简介：** 有（可能）最好的解决方案。但是您必须知道并记住它，有时您必须希望您的 Python 版本不会太旧或任何问题。

然后是最“hacky”的解决方案。它们又好又短，但有时难以理解、阅读和记忆。

不过，还有另一种选择，那就是尝试重新发明轮子。- 为什么要重新发明轮子？- 通常是因为它是一种非常好的学习方式（有时只是因为现有工具不能完全按照您的意愿和/或您希望的方式进行操作），如果您不知道或不知道，这是最简单的方法不记得解决问题的完美工具。

**所以**，我建议从模块中重新发明`Counter`课程的轮子`collections`（至少部分）：

```
class MyDict(dict):
    def __add__(self, oth):
        r = self.copy()

        try:
            for key, val in oth.items():
                if key in r:
                    r[key] += val  # You can custom it here
                else:
                    r[key] = val
        except AttributeError:  # In case oth isn't a dict
            return NotImplemented  # The convention when a case isn't handled

        return r

a = MyDict({'a':1, 'b':2, 'c':3})
b = MyDict({'b':3, 'c':4, 'd':5})

print(a+b)  # Output {'a':1, 'b': 5, 'c': 7, 'd': 5} 
```

可能会有其他方法来实现这一点，并且已经有工具可以做到这一点，但可视化事情的基本运作方式总是很好的。

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2017-03-10T11:12:15.363

在这种情况下，绝对对 s 求和`Counter()`是最 Pythonic 的方法，但前提是**它会产生一个正值**。`c`这是一个示例，您可以看到在否定字典中`c`的值后没有结果。`B`

```
In [1]: from collections import Counter

In [2]: A = Counter({'a':1, 'b':2, 'c':3})

In [3]: B = Counter({'b':3, 'c':-4, 'd':5})

In [4]: A + B
Out[4]: Counter({'d': 5, 'b': 5, 'a': 1}) 
```

这是因为`Counter`s 主要设计用于使用正整数来表示运行计数（负计数没有意义）。但是为了帮助这些用例，python 记录了最小范围和类型限制，如下所示：

> *   Counter 类本身是一个字典子类，对其键和值没有限制。这些值旨在是表示计数的数字，但您可以在值字段中存储任何内容。
> *   该`most_common()`方法只要求值是可排序的。
> *   对于诸如 的就地操作`c[key]` `+= 1`，值类型只需要支持加法和减法即可。所以分数、浮点数和小数都可以使用，并且支持负值。`update()`对于输入和`subtract()`输出都允许负值和零值也是如此。
> *   多集方法仅适用于具有正值的用例。输入可能是负数或零，但只会创建具有正值的输出。没有类型限制，但是值类型需要支持加减比较。
> *   该`elements()`方法需要整数计数。它忽略零计数和负计数。

因此，为了在对您的 Counter 求和后解决该问题，您可以使用`Counter.update`它来获得所需的输出。它的工作方式类似`dict.update()`，但增加了计数而不是替换它们。

```
In [24]: A.update(B)

In [25]: A
Out[25]: Counter({'d': 5, 'b': 5, 'a': 1, 'c': -1}) 
```

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2014-07-04T10:06:27.690

```
myDict = {}
for k in itertools.chain(A.keys(), B.keys()):
    myDict[k] = A.get(k, 0)+B.get(k, 0) 
```

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2014-05-03T06:20:57.897

**没有额外进口**的那一款！

 **他们是一个名为[EAFP的](https://docs.python.org/2/glossary.html#term-eafp)*Python 标准*（请求宽恕比许可更容易）。下面的代码基于该*python 标准*。

 *```
# The A and B dictionaries
A = {'a': 1, 'b': 2, 'c': 3}
B = {'b': 3, 'c': 4, 'd': 5}

# The final dictionary. Will contain the final outputs.
newdict = {}

# Make sure every key of A and B get into the final dictionary 'newdict'.
newdict.update(A)
newdict.update(B)

# Iterate through each key of A.
for i in A.keys():

    # If same key exist on B, its values from A and B will add together and
    # get included in the final dictionary 'newdict'.
    try:
        addition = A[i] + B[i]
        newdict[i] = addition

    # If current key does not exist in dictionary B, it will give a KeyError,
    # catch it and continue looping.
    except KeyError:
        continue 
```

编辑：感谢[jerzyk](https://stackoverflow.com/users/646765/jerzyk)的改进建议。

* * *

## 回答 #8

> 赞同：11
> 
> 时间：2014-07-04T10:49:33.167

```
import itertools
import collections

dictA = {'a':1, 'b':2, 'c':3}
dictB = {'b':3, 'c':4, 'd':5}

new_dict = collections.defaultdict(int)
# use dict.items() instead of dict.iteritems() for Python3
for k, v in itertools.chain(dictA.iteritems(), dictB.iteritems()):
    new_dict[k] += v

print dict(new_dict)

# OUTPUT
{'a': 1, 'c': 7, 'b': 5, 'd': 5} 
```

或者

或者，您可以使用上面提到的 @Martijn 的 Counter 。

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2014-11-14T10:43:41.230

对于更通用和可扩展的方式检查[mergedict](https://github.com/schettino72/mergedict/)。它使用`singledispatch`并可以根据其类型合并值。

例子：

```
from mergedict import MergeDict

class SumDict(MergeDict):
    @MergeDict.dispatch(int)
    def merge_int(this, other):
        return this + other

d2 = SumDict({'a': 1, 'b': 'one'})
d2.merge({'a':2, 'b': 'two'})

assert d2 == {'a': 3, 'b': 'two'} 
```

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2016-08-28T09:47:37.807

# 从 python 3.5：合并和求和

感谢@tokeinizer_fsj 在评论中告诉我我没有完全理解问题的含义（我认为 add 意味着只是添加最终在两个字典中不同的键，相反，我的意思是公共键值应该相加）。所以我在合并之前添加了那个循环，这样第二个字典就包含了公共键的总和。最后一个字典将是其值将在新字典中持续存在的字典，这是两者合并的结果，所以我认为问题已解决。该解决方案从 python 3.5 及以下版本开始有效。

```
a = {
    "a": 1,
    "b": 2,
    "c": 3
}

b = {
    "a": 2,
    "b": 3,
    "d": 5
}

# Python 3.5

for key in b:
    if key in a:
        b[key] = b[key] + a[key]

c = {**a, **b}
print(c)

>>> c
{'a': 3, 'b': 5, 'c': 3, 'd': 5} 
```

## 可重用代码

```
a = {'a': 1, 'b': 2, 'c': 3}
b = {'b': 3, 'c': 4, 'd': 5}

def mergsum(a, b):
    for k in b:
        if k in a:
            b[k] = b[k] + a[k]
    c = {**a, **b}
    return c

print(mergsum(a, b)) 
```

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2017-08-20T15:11:52.210

此外，请注意`a.update( b )`2x 比`a + b`

```
from collections import Counter
a = Counter({'menu': 20, 'good': 15, 'happy': 10, 'bar': 5})
b = Counter({'menu': 1, 'good': 1, 'bar': 3})

%timeit a + b;
## 100000 loops, best of 3: 8.62 µs per loop
## The slowest run took 4.04 times longer than the fastest. This could mean that an intermediate result is being cached.

%timeit a.update(b)
## 100000 loops, best of 3: 4.51 µs per loop 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2016-06-10T13:11:05.590

```
def merge_with(f, xs, ys):
    xs = a_copy_of(xs) # dict(xs), maybe generalizable?
    for (y, v) in ys.iteritems():
        xs[y] = v if y not in xs else f(xs[x], v)

merge_with((lambda x, y: x + y), A, B) 
```

你可以很容易地概括这一点：

```
def merge_dicts(f, *dicts):
    result = {}
    for d in dicts:
        for (k, v) in d.iteritems():
            result[k] = v if k not in result else f(result[k], v) 
```

然后它可以接受任意数量的字典。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2017-06-28T21:31:40.050

这是一个简单的解决方案，用于合并两个`+=`可以应用于值的字典，它只需要遍历字典一次

```
a = {'a':1, 'b':2, 'c':3}

dicts = [{'b':3, 'c':4, 'd':5},
         {'c':9, 'a':9, 'd':9}]

def merge_dicts(merged,mergedfrom):
    for k,v in mergedfrom.items():
        if k in merged:
            merged[k] += v
        else:
            merged[k] = v
    return merged

for dct in dicts:
    a = merge_dicts(a,dct)
print (a)
#{'c': 16, 'b': 5, 'd': 14, 'a': 10} 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2016-12-09T14:26:10.313

该解决方案易于使用，用作普通字典，但您可以使用 sum 函数。

```
class SumDict(dict):
    def __add__(self, y):
        return {x: self.get(x, 0) + y.get(x, 0) for x in set(self).union(y)}

A = SumDict({'a': 1, 'c': 2})
B = SumDict({'b': 3, 'c': 4})  # Also works: B = {'b': 3, 'c': 4}
print(A + B)  # OUTPUT {'a': 1, 'b': 3, 'c': 6} 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2018-06-12T17:45:22.060

关于什么：

```
def dict_merge_and_sum( d1, d2 ):
    ret = d1
    ret.update({ k:v + d2[k] for k,v in d1.items() if k in d2 })
    ret.update({ k:v for k,v in d2.items() if k not in d1 })
    return ret

A = {'a': 1, 'b': 2, 'c': 3}
B = {'b': 3, 'c': 4, 'd': 5}

print( dict_merge_and_sum( A, B ) ) 
```

输出：

```
{'d': 5, 'a': 1, 'c': 7, 'b': 5} 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2021-09-12T02:46:47.867

一种解决方案是使用字典理解。

```
C = { k: A.get(k,0) + B.get(k,0) for k in list(B.keys()) + list(A.keys()) } 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-08-01T04:58:16.083

上述解决方案非常适合您拥有少量`Counter`s 的场景。如果你有一个很大的列表，这样的事情会更好：

```
from collections import Counter

A = Counter({'a':1, 'b':2, 'c':3})
B = Counter({'b':3, 'c':4, 'd':5}) 
C = Counter({'a': 5, 'e':3})
list_of_counts = [A, B, C]

total = sum(list_of_counts, Counter())

print(total)
# Counter({'c': 7, 'a': 6, 'b': 5, 'd': 5, 'e': 3}) 
```

上述解决方案本质上`Counter`是通过以下方式对 s 求和：

```
total = Counter()
for count in list_of_counts:
    total += count
print(total)
# Counter({'c': 7, 'a': 6, 'b': 5, 'd': 5, 'e': 3}) 
```

这做同样的事情，但我认为它总是有助于了解它在下面有效地做了什么。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2021-09-12T01:39:05.073

结合两个dict的更传统的方式。使用模块和工具很好，但如果您不记得这些工具，了解其背后的逻辑会有所帮助。

程序结合两个字典添加公共键的值。

```
def combine_dict(d1,d2):

for key,value in d1.items():
  if key in d2:
    d2[key] += value
  else:
      d2[key] = value
return d2

combine_dict({'a':1, 'b':2, 'c':3},{'b':3, 'c':4, 'd':5})

output == {'b': 5, 'c': 7, 'd': 5, 'a': 1} 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2021-10-23T07:50:09.647

这是一个非常通用的解决方案。您可以处理仅在某些 dict + 中的任意数量的 dict + 键，轻松使用您想要的任何聚合函数：

```
def aggregate_dicts(dicts, operation=sum):
    """Aggregate a sequence of dictionaries using `operation`."""
    all_keys = set().union(*[el.keys() for el in dicts])
    return {k: operation([dic.get(k, None) for dic in dicts]) for k in all_keys} 
```

例子：

```
dicts_same_keys = [{'x': 0, 'y': 1}, {'x': 1, 'y': 2}, {'x': 2, 'y': 3}]
aggregate_dicts(dicts_same_keys, operation=sum)
#{'x': 3, 'y': 6} 
```

示例不同的键和通用聚合：

```
dicts_diff_keys = [{'x': 0, 'y': 1}, {'x': 1, 'y': 2}, {'x': 2, 'y': 3, 'c': 4}]

def mean_no_none(l):
    l_no_none = [el for el in l if el is not None]
    return sum(l_no_none) / len(l_no_none)

aggregate_dicts(dicts_diff_keys, operation=mean_no_none)
# {'x': 1.0, 'c': 4.0, 'y': 2.0} 
```

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2017-11-17T09:18:43.127

在没有任何其他模块或库的情况下将三个字典 a、b、c 合并在一行中

如果我们有这三个字典

```
a = {"a":9}
b = {"b":7}
c = {'b': 2, 'd': 90} 
```

用一行合并所有内容并使用返回一个 dict 对象

```
c = dict(a.items() + b.items() + c.items()) 
```

返回

```
{'a': 9, 'b': 2, 'd': 90} 
```***

# c# - 如何逐行阅读 MS Word 段落和表格内容

> ID：11011759
> 
> 赞同：1
> 
> 时间：2012-06-13T09:17:40.930
> 
> 标签：c#, .net, ms-word, office-interop

我正在使用 C# (3.5) 阅读 word 文档`Microsoft.Office.Interop.Word`。逐行读取，将行拆分为array[]并处理行中的每个单词，并根据某些业务逻辑替换某些单词，并在替换单词后将整行替换为转换后的行。

到现在为止一切正常。

现在我有一些word文档，那些有段落和表格。我想一一阅读表格的每一列，并替换特定列中列的内容。

**更新**

* * *

使用办公自动化

```
1\. Opening word file.
2\. Moving cursor to top of the document
3\. Selecting first line using (`wordApp.Selection.endKey`) and processing all words
4\. After processing the words replacing the selected line with the processed line.
5\. Using wordApp.Selection.MoveDown(ref lineCount, ref countPage, ref MISSING);    
   moving next line processed further. 
```

问题：1.读取表格时，使用时只读取第一列`wordApp.Selection.endKey`

我想处理所有列的数据。有什么方法可以识别内容是段落还是表格？

![在此处输入图像描述](../Images/95ecd9a739531e01208afff0c3fa53ab.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-30T19:18:41.513

使用选择来扫描文档在性能上应该是相当昂贵的。我建议使用以下代码：

```
 List<Word.Range> TablesRanges = new List<Word.Range>();

        wordApp = new Microsoft.Office.Interop.Word.Application();
        doc = wordApp.Documents.OpenNoRepairDialog(FileName: @"c:\AAAAA.docx", ConfirmConversions: false, ReadOnly: true, AddToRecentFiles: false, NoEncodingDialog: true);

        for (int iCounter = 1; iCounter <= doc.Tables.Count; iCounter++)
        {
            Word.Range TRange = doc.Tables[iCounter].Range;
            TablesRanges.Add(TRange);
        }

        Boolean bInTable;
        for (int par = 1; par <= doc.Paragraphs.Count; par++)
        {
            bInTable = false;
            Word.Range r = doc.Paragraphs[par].Range;
            foreach (Word.Range range in TablesRanges)
            {
                if (r.Start >= range.Start && r.Start <= range.End)
                {
                    Console.WriteLine("In Table - Paragraph number " + par.ToString() + ":" + r.Text);
                    bInTable = true;
                    break;
                }

            }

            if (!bInTable)
                Console.WriteLine("!!!!!! Not In Table - Paragraph number " + par.ToString() + ":" + r.Text);
        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T05:36:48.390

我找到了相同的解决方法。方法如下。

1.使用打开Word文档`WordApp.Documents.Open()`
2.使用`Selection.MoveDown`逐行遍历文档
3.跳过表格单元格的内容
4.最后只处理文档的表格

```
//Process all Paragraphs in the documents
while (doc.ActiveWindow.Selection.Bookmarks.Exists(@"\EndOfDoc") == false)
{
  doc.ActiveWindow.Selection.MoveDown(ref wdLine, ref wdCountOne, ref wdMove);
  doc.ActiveWindow.Selection.HomeKey(ref wdLine, ref wdMove);

  //Skiping table content
  if (doc.ActiveWindow.Selection.get_Information(WdInformation.wdEndOfRangeColumnNumber).ToString() != "-1")
  {
    while (doc.ActiveWindow.Selection.get_Information(WdInformation.wdEndOfRangeColumnNumber).ToString() != "-1")
    {
      if (doc.ActiveWindow.Selection.Bookmarks.Exists(@"\EndOfDoc"))
        break;

      doc.ActiveWindow.Selection.MoveDown(ref wdLine, ref wdCountOne, ref wdMove);
      doc.ActiveWindow.Selection.HomeKey(ref wdLine, ref wdMove);
    }
    doc.ActiveWindow.Selection.HomeKey(ref wdLine, ref wdMove);
  }

  doc.ActiveWindow.Selection.EndKey(ref wdLine, ref wdExtend);
  currLine = doc.ActiveWindow.Selection.Text;
}

//Processing all tables in the documents
for (int iCounter = 1; iCounter <= doc.Tables.Count; iCounter++)
{
  foreach (Row aRow in doc.Tables[iCounter].Rows)
  {
    foreach (Cell aCell in aRow.Cells)
    {
      currLine = aCell.Range.Text;
      //Process Line
    }
  }
} 
```

# asp.net-mvc-2 - 模拟控制器 UrlHelper

> ID：11011762
> 
> 赞同：1
> 
> 时间：2012-06-13T09:17:45.610
> 
> 标签：asp.net-mvc-2, mocking, routes

我在从 controller.RouteUrl(routeName) 方法检索路由 url 时遇到问题。这是我在测试方法中模拟 url 的代码：

```
//Arrange
...
//Mock routes
var routes = RouteTable.Routes;

routes.Clear();
routes.MapRoute(
    "AdminPaymentResult",      // Route name
    "Payment/Result");         // URL with parameters

routes.MapRoute(
    "AdminPaymentCancel",      // Route name
    "Payment/Cancel");         // URL with parameters

_controller.SetFakeUrlHelper(routes);
... 
```

其中方法 SetFakeUrlHelper 定义为：

```
public static void SetFakeUrlHelper(this Controller controller, RouteCollection routes)
{
    var fakeHttpContext = FakeHttpContext();
    var requestContext = new RequestContext(fakeHttpContext, new RouteData());
    controller.Url = new UrlHelper(requestContext, routes);
} 
```

并且 FakeHttpContext 方法定义为：

```
public static HttpContextBase FakeHttpContext()
{
    var request = new Mock<HttpRequestBase>();
    var response = new Mock<HttpResponseBase>();
    var session = new Mock<HttpSessionStateBase>();
    var server = new Mock<HttpServerUtilityBase>();

    var context = new Mock<HttpContextBase>();

    context.Setup(ctx => ctx.Request).Returns(request.Object);
    context.Setup(ctx => ctx.Response).Returns(response.Object);
    context.Setup(ctx => ctx.Session).Returns(session.Object);
    context.Setup(ctx => ctx.Server).Returns(server.Object);

    return context.Object;
} 
```

问题是当我在我的控制器操作中调用

```
public ActionResult MyAction()
{
    ...
    var callBackUrl = Url.RouteUrl("AdminPaymentResult");
    ...
} 
```

我得到一个空字符串而不是预期的“付款/结果”......提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T09:38:39.220

您应该模拟.内部使用的[`ApplyAppPathModifier`](http://msdn.microsoft.com/en-us/library/system.web.httpresponsebase.applyapppathmodifier.aspx)方法。因此，只需在您的方法中添加以下行，您就可以开始了：`response``UrlHelper``FakeHttpContext`

```
response
    .Setup(x => x.ApplyAppPathModifier(It.IsAny<string>()))
    .Returns<string>(x => x); 
```

# c# - C# XNA 在构造函数中通过引用类传递

> ID：11011768
> 
> 赞同：3
> 
> 时间：2012-06-13T09:18:08.430
> 
> 标签：c#, xna, pass-by-reference

我正在 XNA 中制作矢量图形游戏。我设计了一个 Line 类来围绕中心点旋转以帮助绘制特定的形状。为了保持单一的事实，有没有办法将对形状中心的引用传递给我创建的所有线条，以便更新中心的位置也会更新线条的位置？我认为这样的事情会起作用：

```
class Line
{
    private Vector2 start;
    private double length;
    private double angle;

    public Line(ref Vector2 start, double length, double angle){
        this.start = start;
        this.length = length;
        this.angle = angle;
    }
}

class Obj
{
    private Vector2 center;
    private Line[] lines;
    public Obj(){
        center = new Vector2(50,50);
        lines = new Lines[5];
        for (int i = 0; i < 5; i++){
            lines[i] = new Line(ref center,30, (i/5 * 2 * Math.PI));

        }

    }
} 
```

但是当我移动中心时线条不会更新。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T09:23:05.953

尽管`struct`通过引用正确传递了`Line`，但是当您在内部分配它时：

```
public Line(ref Vector2 start, double length, double angle){
    this.start = start;
} 
```

您实际上是在*复制*.`struct`

如果您发现自己需要引用类型语义而`struct`不是将其传递给单个方法，那么您可能需要重新考虑使用`class`.

您可以在类中重新实现类型或将其包装`Vector2`在一个类中并使用它：

```
class Vector2Class
{
    public Vector2 Centre;

    public Vector2Class(Vector2 inner)
    {
        Centre = inner;
    }
}

class Line
{
    private Vector2Class _centre;

    public Line(Vector2Class centre)
    {
        _centre = centre;    
    }
} 
```

请注意，您仍在针对副本工作，但如果您共享课程，您将在*同一个*副本上工作。

就个人而言，我会**避免**使用包装器并创建自己的类来代表“中心”。这得到了广泛接受的观点的支持，即`struct`类型应该是不可变的，但您似乎需要改变值以保持表示真实。

```
class CentreVector<T>
{
    public <T> X { get; set; }
    public <T> Y { get; set; }
} 
```

这仅允许您共享数据，它实际上并不会*通知*中心已更改的行。为此，您将需要某种事件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T09:23:44.617

**用替代解决方案编辑**

您遇到的问题是因为 Vector2 是一种值类型，您在方法参数中通过 ref 正确地传递了它，但随后使用分配制作了它的本地副本。

我不完全确定您是否可以按照您的想法维护指向 Vector2 的指针，但您可以创建自己的 Vector2 类作为引用类型。

```
class ObjectVector2
{
    public float X { get;set; }
    public float Y { get; set; }
} 
```

我想提出一种稍微不同的方法来实现相同的结果，方法是保持对线条所属的 obj 的引用。

```
class Line
{

    private Vector2 Center { get { return parent.center; } }
    private double length;
    private double angle;
    Obj parent;

    public Line(Obj parent, double length, double angle)
    {
       this.parent = parent;
       this.length = length;
       this.angle = angle;
    }
}

class Obj
{
    public Vector2 center;
    private Line[] lines;
    public Obj()
    {
        center = new Vector2(50, 50);
        lines = new Lines[5];
        for (int i = 0; i < 5; i++)
        {
           // passing the reference to this Obj in the line constructor.
           lines[i] = new Line(this, 30, (i / 5 * 2 * Math.PI));
        }

    }
} 
```

# django - 使用 INCLUDE 时，Django URL 模式无法按预期工作

> ID：11011771
> 
> 赞同：1
> 
> 时间：2012-06-13T09:18:12.097
> 
> 标签：django, python-2.7

我目前正在完成[Django 教程（第 3 步）](https://docs.djangoproject.com/en/1.4/intro/tutorial03/)，并被困在“解耦 URLconfs”的部分。

我尝试做的是设置一个捕获 lnadmin/ 的 URL 模式，以重定向到 django 管理员，并最终设置另一个重定向到另一个文件中包含的其他模式的全部捕获。

这是我的 mysite/urls.py：

```
from django.conf.urls import patterns, include, url

from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',

url(r'^lnadmin/', include(admin.site.urls)), #match admin
url(r'^test/', include('lnapp.urls')), #match test, should be a catch-all later
) 
```

这是 lnapp/urls.py，它应该匹配 hash/(anything)/：

```
from django.conf.urls import patterns, include, url

urlpatterns = patterns('lnapp.views',
    url(r'^hash/(?P<hash>.+)/$', 'hash'), #match part to load from hash
) 
```

我之前在主 url.py 中有这个模式，它按预期工作。现在发生的情况是，当我打开 (mydomain)/lnadmin/ 时，它会尝试访问 lnapp.views.hash（无法导入 lnapp.views.hash，因为尚未定义视图）。

这对我来说没有任何意义，因为 lnadmin/ 应该与第一个模式匹配，而 /lnadmin/ 不匹配 test/hash/(anything)/。一旦我注释掉 lnapp/urls.py 中的一个 url，它就会按预期重定向到管理员。

在主 url.py 中交换两个 url 无效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T09:23:06.730

我自己的问题的答案是：即使是不匹配的 url，您也必须定义一个视图，否则它将失败。

# mysql - 在存储过程中显示从属状态

> ID：11011780
> 
> 赞同：2
> 
> 时间：2012-06-13T09:18:31.793
> 
> 标签：mysql, stored-procedures, cursor, replication

我对 mysql 存储过程相当陌生，我需要能够从过程中访问 SHOW SLAVE STATUS 的结果。我在网上搜索但似乎无法找到它。这是我一直在尝试的事情：

```
 CREATE PROCEDURE test()
BEGIN
 DECLARE a VARCHAR(1000);
 DECLARE cur1 CURSOR FOR SHOW SLAVE STATUS;
 DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE;

 OPEN cur1;

 read_loop: LOOP
  FETCH cur1 INTO a;
  IF done THEN
   LEAVE read_loop;
  END IF;
 END LOOP;

 SELECT a;

 CLOSE cur1;
END; 
```

这失败了，原因如下：

```
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'SHOW SLAVE STATUS;
 DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE; 
```

如果有另一种方法可以做到这一点（可能不使用游标，因为只有一行返回），那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T11:37:29.290

以防万一其他人有这个问题。

我找到了一个肮脏的方法。我没有得到我需要的所有信息，但这是一个开始。

`information_schema.processlist`（或`SHOW PROCESSLIST`）具有我可以在存储过程中使用的从属进程：

```
+-----+-------------+---------------------+---------+---------+-------+-----------------------------------------------------------------------+------------------+
| Id  | User        | Host                | db      | Command | Time  | State                                                                 | Info             |
+-----+-------------+---------------------+---------+---------+-------+-----------------------------------------------------------------------+------------------+
|   1 | system user |                     | NULL    | Connect | 75212 | Waiting for master to send event                                      | NULL             |
|   2 | system user |                     | NULL    | Connect |  2158 | Has read all relay log; waiting for the slave I/O thread to update it | NULL             |
+-----+-------------+---------------------+---------+---------+-------+-----------------------------------------------------------------------+------------------+ 
```

# java - 注释：限制对带有注释的类的引用

> ID：11011783
> 
> 赞同：3
> 
> 时间：2012-06-13T09:18:58.243
> 
> 标签：java, annotations, definition

我认为这是不可能的，但也许我错了。所以我问你，是否可能。;-)

如果我定义一个仅接受类引用的注释，该类引用扩展了一些可能的接口或类：

```
 Class<? extends ServiceProviderIF> serviceIFProvider(); 
```

在这个注释中，我只能添加一些扩展 ServiceProviderIF 的类。**我的问题：另一个注释也可以这样定义吗？**这意味着使用类似这样的伪代码

```
 Class<? contains AnnotationXYZ> classReferences(); 
```

AnnotationXYZ 是另一个注释定义。并且应该添加的类只有通过包含此注释才能被接受。

TIA 和最好的问候，奥利

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T09:27:10.893

不，这是不可能的。泛型类型只接受类型。并且注释不定义类型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T09:58:35.387

不可能。可以在任何类型（类、接口）上设置注释，但 Java 方法不能返回包含来自不同层次结构的类型的多类型。换句话说，您应该将所有具有注释的类`AnnotationXYZ`放在某个接口或类下的同一层次结构中`Blabla`，然后使用类型`<? extends Blabla>`通配符。

# java - 如何在sql中转义“'”

> ID：11011786
> 
> 赞同：4
> 
> 时间：2012-06-13T09:19:02.133
> 
> 标签：java, sql, hibernate

您好我正在数据库中搜索名称组合。我通过如下组合

```
"firstName='" + firstName + "'", "middleName='" + middleName + "'", "lastName='" + lastName + "'" 
```

这工作正常。但问题出现在名称中有一些“'”的地方，我该如何纠正它？例如：Johns 或 Jerry 等导致异常

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-13T09:25:01.207

使用preparedStatement对你来说很容易

```
ps.executeUpdate("INSERT INTO tb_name values(?,?) WHERE id=?");
ps.setString(1,firstName);
ps.setString(2,middleName);
ps.setInt(3,id);
ps.execute(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-13T09:20:23.877

至少对于 MySQL，您必须在`'`前面加上另一个：

```
INSERT INTO table (column) VALUES ('this isn''t it'); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-13T10:01:56.567

如果你使用 Hibernate，你应该像这样使用：

```
Query query = session.createQuery("from Something s where s.firstName = :firstName and s.middleName = :middleName and s.lastName = :lastName");
query.setString("firstName", firstName);
query.setString("middleName", middleName);
query.setString("lastName", lastName);

List<?> list = query.list(); 
```

希望这可以帮到你！你可以在[这里](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/Query.html)和[这里看到更多](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T09:20:34.123

您可以通过使用反斜杠转义 SQL 中的单引号字符 (') 来忽略它们`\'`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T09:29:03.967

```
 String firstName="X";
    String middleName="Y";
    String lastName="Z";

 "firstName='" + firstName + "',middleName='" + middleName + "',lastName='" + lastName + "'"; 
```

您可以使用它来获取输出

```
firstName='X',middleName='Y',lastName='Z' 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-06-13T09:21:46.090

尝试这个：

```
firstName = firstName.replace("'" , "''"); 
```

改用 PreparedStatement ，你会更好。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-06-13T09:24:42.887

我想以下方法也有效（至少对于 MySQL）：

```
SELECT login FROM usertable WHERE lastname="O'Neil"; 
```

# android - Android Fragment Pager - 如何像我在下面给出的那样创建片段图块？

> ID：11011787
> 
> 赞同：1
> 
> 时间：2012-06-13T09:19:19.583
> 
> 标签：android, android-layout, actionbarsherlock

![在此处输入图像描述](../Images/e671cceead9237352f3735408b4be2bd.png)

在我的应用程序中，我使用的是 Sherlock Fragment Pager，我想为我的每个片段创建这种类型的标题。中间标题用于当前显示的当前片段，以及上一屏和下一屏的标题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T19:04:23.783

创建 ActionBarSherlock 作为此类功能项目的人，称为 ViewPageIndicator。这是网址：http: [//viewpagerindicator.com/](http://viewpagerindicator.com/)。

我认为这将为您提供所需的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T09:41:47.287

这里已经有一个关于这个的[问题](https://stackoverflow.com/questions/7971758/android-how-to-make-a-tab-flip-like-android-market)。

总结一下：

*   Kirill Grouchnikov 有一篇关于此设计界面的[文章](http://www.pushing-pixels.org/2011/08/11/android-tips-and-tricks-swipey-tabs.html)。

*   你也可以检查[这个](https://github.com/astuetz/ViewPagerExtensions)项目和[这个](http://code.google.com/p/android-playground/)项目。他们俩似乎都在尝试复制这种界面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T19:38:28.017

我在所有应用程序中都使用[它](https://github.com/ChainsDD/Superuser/blob/master/src/com/noshufou/android/su/widget/PagerHeader.java)来实现这种效果。

# objective-c - 在 NSWindow 之外绘图

> ID：11011788
> 
> 赞同：5
> 
> 时间：2012-06-13T09:19:21.767
> 
> 标签：objective-c, macos, cocoa, user-interface, nswindow

我了解如何在NSWindow 框架*内绘图。*但我不明白如何实现这样的目标，例如：

![取自名为 Eon 的时间跟踪应用程序](../Images/edd8eeb649d60e0c42d025df91ae84f9.png)

如果我知道，这怎么叫，我可以进一步调查此事，但由于我不知道*要寻找*什么，这是不可能的。

我很感激任何提示。

非常感谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-13T10:09:50.343

屏幕截图中的应用看起来像是在使用自定义的`NSDrawer`. 抽屉从窗口的一侧滑出，可以显示任何内容。

查看文档，看看它是否是您想要的： [https ://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Drawers/Drawers.html#//apple_ref/doc/uid/10000001 -巴比比亚](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Drawers/Drawers.html#//apple_ref/doc/uid/10000001-BABFIBIA)

抽屉很容易设置。然而，虽然您可以完全控制抽屉内的内容，但如果不使用私有 API（例如，屏幕截图中的参差不齐的边缘），您就无法控制边框的外观。如果你想要更多的控制，你可以使用无边框的子窗口。

这是一个制作无边界、完全自定义窗口的教程： http: [//cocoawithlove.com/2008/12/drawing-custom-window-on-mac-os-x.html](http://cocoawithlove.com/2008/12/drawing-custom-window-on-mac-os-x.html)

然后，您可以使用`-[NSWindow addChildWindow:ordered:]`. 这将允许子窗口在移动时跟随父窗口。您仍然需要自己响应对父窗口大小的更改，也许还有其他一些属性。

# java - 没有目标命名空间的 wsdl xsd

> ID：11011791
> 
> 赞同：0
> 
> 时间：2012-06-13T09:19:29.260
> 
> 标签：java, wsdl, wsdl2java

我对 WSDL+XSD 有疑问。通过使用 Apache CXF，我的 WSDL 和 XSD 可以正常工作：

```
<?xml version="1.0" encoding="UTF-8"?>
<wsdl:definitions targetNamespace="http://com.schema.goodsservice"
    xmlns="http://com.schema.goodsservice" 
    xmlns:tr="http://com.schema.goods"
    xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"
    xmlns:wsdlsoap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:xsd="http://www.w3.org/2001/XMLSchema">

    <wsdl:types>
        <xsd:schema targetNamespace="http://com.schema.goodsservice">
            <xsd:import namespace="http://com.schema.goods"   schemaLocation="goods.xsd" />
        </xsd:schema>
    </wsdl:types>

    <wsdl:message name="goodsInput">
        <wsdl:part name="goods"   element="tr:goods"  />
    </wsdl:message>

    <wsdl:message name="goodsOutput">
        <wsdl:part name="status"  element="tr:status" />
    </wsdl:message>

    <wsdl:portType name="GoodsService">
        <wsdl:operation name="addgoods">
            <wsdl:input message="goodsInput" />
            <wsdl:output message="goodsOutput" />
        </wsdl:operation>
    </wsdl:portType>

    <wsdl:binding name="GoodsServiceHTTPBinding" type="GoodsService">
        <wsdlsoap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http" />
            <wsdl:operation name="addgoods">
                <wsdlsoap:operation soapAction="" />
                    <wsdl:input>
                        <wsdlsoap:body use="literal" />
                    </wsdl:input>
                <wsdl:output>
                    <wsdlsoap:body use="literal" />
                </wsdl:output>
            </wsdl:operation>
    </wsdl:binding>

    <wsdl:service name="GoodsServicePorts">
        <wsdl:port binding="GoodsServiceHTTPBinding" name="GoodsService">
            <wsdlsoap:address
                location="http://localhost:9084/goodsService/GoodsServicePorts" />
            </wsdl:port>
    </wsdl:service>
</wsdl:definitions> 
```

和 XSD：

```
<?xml version="1.0" encoding="UTF-8"?>

<xsd:schema targetNamespace="http://com.schema.goods"
xmlns="http://com.schema.goods"
xmlns:xsd="http://www.w3.org/2001/XMLSchema">

    <!-- web service input types -->

    <xsd:element name="goods">
        <xsd:complexType>
            <xsd:sequence>
                <xsd:element name="parent_goods" type="parent_good" minOccurs="1" maxOccurs="unbounded" />
                <xsd:element name="child_goods" type="child_good" minOccurs="1" maxOccurs="unbounded" />
                <xsd:element name="login" type="xsd:string" minOccurs="1" maxOccurs="1" />
                <xsd:element name="password" type="xsd:string" minOccurs="1" maxOccurs="1" />
            </xsd:sequence> 
        </xsd:complexType>
    </xsd:element>

    <xsd:complexType name="parent_good">
        <xsd:sequence>
            <xsd:element name="age_beauty" type="xsd:string" minOccurs="0" maxOccurs="1" />
        </xsd:sequence>
    </xsd:complexType>

    <xsd:complexType name="child_good">
        <xsd:sequence>
            <xsd:element name="age" type="xsd:integer" minOccurs="0" maxOccurs="1" />
        </xsd:sequence>
    </xsd:complexType>

    <!-- web service output types -->

    <xsd:element name="status">
        <xsd:complexType>
            <xsd:sequence>
                <xsd:element name="iserror" type="xsd:boolean" minOccurs="1" maxOccurs="1" />
            </xsd:sequence>
        </xsd:complexType>
    </xsd:element>

</xsd:schema> 
```

任务是从 XSD 文件中删除 targetNamespace。如果 WSDL 的 targetNamespace 必须与 XSD 相同，我该怎么做？

谢谢！

# batch-file - How to create a String variable and use batch

> ID：11011792
> 
> 赞同：4
> 
> 时间：2012-06-13T09:19:30.423
> 
> 标签：batch-file

I want to create a variable in a batch file and I want to assign a path of a text file to to this variable. After that, I want to use this variable to copy that file. How can I do this?

Thank you,

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-13T09:20:57.760

The general idea is this:

```
SET filename=c:\path\to\file.txt
COPY "%filename%" c:\destination 
```

Note the quotes around `%filename%`: they are necessary to make the command work if the path or file name contains spaces.

# facebook - 有限制的 FQL 不会为所有用户返回结果

> ID：11011793
> 
> 赞同：0
> 
> 时间：2012-06-13T09:19:34.197
> 
> 标签：facebook, facebook-fql

我试图获取以下查询以返回我的两个朋友的结果：

```
SELECT pid, owner
FROM photo
WHERE aid IN (
  SELECT aid
   FROM album
   WHERE owner in (
     SELECT uid2
     FROM friend
     WHERE uid1=me()
     LIMIT 0, 2 ) ) 
```

但由于某种原因，它只显示其中一个的结果，并且返回的行数不超过限制（仅约 800）

当我运行时：

```
SELECT uid2
FROM friend
WHERE uid1=me()
LIMIT 0, 2 
```

正如预期的那样，当我以这种形式手动进行查询时，我得到了两个朋友的结果：

```
SELECT pid, owner
FROM photo
WHERE aid IN (
  SELECT aid
   FROM album
   WHERE owner = USER_ID_FROM_LAST_QUERY 
```

我得到了两个用户都期望得到的结果，但是为什么它不能与 IN 语句和子查询一起使用？

编辑：我试图实现的是获取我所有朋友的照片。并且仅要求我所有朋友的所有照片将超过 5000 张照片，因此我无法在 1 个查询中获得所有内容。

目前，我通过对每个用户进行查询来获取他的所有图片，从而使其正常工作-并且工作正常。（如果您忽略执行需要 2-3 分钟的事实。所以我想通过减少查询来缩短运行时间。

编辑：更多信息：

通过以下查询，我从两个用户那里获得了专辑：

```
SELECT aid, owner
FROM album
WHERE owner in (
  SELECT uid2
  FROM friend
  WHERE uid1=me()
  LIMIT 0, 2 ) 
```

但是通过完整的查询，我只能从其中一位用户拥有的相册中获取图片。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T09:29:11.067

尝试这个：

SELECT pid, owner FROM photo WHERE aid IN (SELECT aid FROM album WHERE owner in (SELECT uid2 FROM friend WHERE uid1=me() LIMIT 2) )

# javascript - 尝试自定义样式数据表

> ID：11011796
> 
> 赞同：0
> 
> 时间：2012-06-13T09:19:45.683
> 
> 标签：javascript, jquery, jquery-ui, datatables

我正在尝试修改默认生成的布局数据表。就像移动下面的过滤器搜索栏和下面的表格长度下拉菜单等等。基本上自定义样式整个表格，但我不明白我怎么能。我检查了数据表网站上的文档，但似乎无法理解。下面是我的代码：

html:

```
<table class="table table-bordered table-striped table-condensed" id="ray-table">
    <thead>
        <tr>
            <th>Rendering engine</th>

            <th>Browser</th>

            <th>Platform(s)</th>

            <th>Engine version</th>

            <th>CSS grade</th>
        </tr>
    </thead>

    <tbody>
        <tr>
            <td>Trident</td>

            <td>Internet Explorer 4.0</td>

            <td>Win 95+</td>

            <td>4</td>

            <td>X</td>
        </tr>

        <tr>
            <td>Trident</td>

            <td>Internet Explorer 5.0</td>

            <td>Win 95+</td>

            <td>5</td>

            <td>C</td>
        </tr>

        <tr>
            <td>Trident</td>

            <td>Internet Explorer 5.5</td>

            <td>Win 95+</td>

            <td>5.5</td>

            <td>A</td>
        </tr>
    </tbody>
</table> 
```

JS：

```
$(document).ready(function() { /* Build the DataTable with third column using our custom sort functions */
    $('#ray-table').dataTable({
        "aaSorting": [[0, 'asc'], [1, 'asc']],
        "aoColumnDefs": [
            {
            "sType": 'string-case',
            "aTargets": [2]}
        ]
    });
});​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T09:25:07.450

使用[sDom](http://www.datatables.net/usage/options#sDom)选项，例如：

```
 $('#ray-table').dataTable( {
                "aaSorting": [ [0,'asc'], [1,'asc'] ],
                "sDom": "<tlfrip>",
                "aoColumnDefs": [
                    { "sType": 'string-case', "aTargets": [ 2 ] }
                ]
            } ); 
```

# extjs - Ext Js ajax请求不适用于失败功能

> ID：11011800
> 
> 赞同：1
> 
> 时间：2012-06-13T09:19:49.917
> 
> 标签：extjs, extjs3, extjs-mvc

这是我的函数发送 ajax 请求以检查电子邮件重复，同时从我的 php 文件中获取响应，而不是失败函数，它仅在成功函数中返回，为此我已经检查 `result.responseText`== 为“false”，并且现在在这种情况下使用 else 条件它也显示错误弹出消息但不中止请求继续执行并保存数据

```
 function email_check(userType) {
      //alert(userType);
   var extmail=   Ext.Ajax.request({
                  url: '<?= Extjs_renderer::ajaxurl();; ?>ajax/emailcheck',

                  success: function ( result, request ) {
                   if(result.responseText=='false'){
                       //Ext.Ajax.abort(extmail); tried
                       Ext.MessageBox.alert('Error', "email already exist");
                      // return false;

                    //Ext.getCmp('email').setValue(''); works

                   }else {
                       return true;
                   }

                    },
                    failure: function(response, options) {

                    Ext.MessageBox.alert('Error', "email already exist fail");

                    },
                  params: {merc_mem_tab:userType }
                  });

  } 
```

这是我的 ajax.php 代码

```
 function  emailcheck(){
    $get_email=$this->db->query("select * from customers where email='".$_REQUEST['merc_mem_tab']."'");
    if($get_email->num_rows==0){
        echo "true";
                    return true;
    }else{
        echo "false";
       // echo "{success: true}";
        return false;

    }

} 
```

在我的面板处理程序上，我也在尝试检查响应但未能成功

```
 if('<?= $this->controller->name; ?>'=="customers"){
                        //alert(Ext.getCmp('email'))

                         if(email_check(Ext.getCmp('email').getValue()) == false){

                             return false;
                         }
                     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:25:57.640

你不能从 ajax 请求中返回，它是异步的，这段代码`if(email_check(Ext.getCmp('email').getValue()) == false)`不会等待答案。正如 Imad 所说，失败也只是针对 http 失败而不是针对错误响应。您检查响应错误的代码是正确的，但我建议您在成功函数上调用保存方法。例如：

```
 function email_check(userType) {
      //alert(userType);
   var extmail=   Ext.Ajax.request({
                  url: '<?= Extjs_renderer::ajaxurl();; ?>ajax/emailcheck',
                  scope: this,
                  success: function ( result, request ) {
                   if(result.responseText=='false'){
                       Ext.MessageBox.alert('Error', "email already exist");
                       //do nothing else
                   }else {
                       this.saveData();    
                   }
                    },
                    failure: function(response, options) {
                    Ext.MessageBox.alert('Error', "Communication failed");
                    },
                  params: {merc_mem_tab:userType }
                  });

  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T09:39:42.723

成功或失败回调的选择基于 HTTP 响应代码。所以，如果你想达到失败功能，你必须做一些事情：

```
function  emailcheck(){
    $get_email=$this->db->query("select * from customers where email='".$_REQUEST['merc_mem_tab']."'");
    if($get_email->num_rows==0){
        echo "true";
        return true;
    }else{
        throw new Exception("Error : Email Already Exists !");
    }
} 
```

它应该会引发错误 500（未处理的异常），并且 ExtJS 会将其识别为失败响应。

# php - 使用 PHP 5.3.x 安全删除

> ID：11011809
> 
> 赞同：6
> 
> 时间：2012-06-13T09:20:17.883
> 
> 标签：php, linux

有人知道从 linux 系统中删除或更好地擦除文件的良好 PHP 解决方案吗？

场景：文件被加密并保存，当请求下载时，文件被复制到临时文件夹并解密。这已经在起作用了。

但是如何在发送给用户后从临时位置删除文件？

在我看来，我有以下选择：

*   通过“fopen”打开文件并将 0,1 写入其中（想想很慢）
*   将文件保存到 Memcache 而不是硬盘（我的主机可能有问题）
*   在命令行或 cronjob 上使用 somd 3rd pary 工具（安装可能有问题）

目标：从硬盘中删除文件，无法恢复（擦除/覆盖）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T09:22:56.517

通过 exec/system/passthru调用“ [shred ”](http://linux.die.net/man/1/shred)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-13T09:26:44.683

可以说，最好的办法是从一开始就永远不要将文件保存为解密状态。

相反，使用[流过滤器](http://php.net/manual/en/stream.filters.php)即时解密并将其直接发送给最终用户。

**更新**

如果您考虑以下代码，您的选项 1 实际上还不错：

```
$filename = 'path/to/file';
$size = filesize($filename);

$src = fopen('/dev/zero', 'rb');
$dest = fopen('/path/to/file', 'wb');

stream_copy_to_stream($src, $dest, $size);

fclose($src);
fclose($dest); 
```

你也可以选择`/dev/urandom`，但这会很慢。

# iphone - iphone 项目 - 在 xcode 4.3 中复制和重命名

> ID：11011815
> 
> 赞同：3
> 
> 时间：2012-06-13T09:20:34.767
> 
> 标签：iphone, copy, project, rename, xcode4.3

我有一个 iphone 项目，它是一个“基础”项目。我想复制这个项目，重命名它并更改几个文件，以便创建我想要的每个应用程序的最终版本。如何在 xcode 4.3+ 中复制和重命名项目而不会出现任何问题（例如丢失目标等）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T09:37:47.147

单击您的项目，![](../Images/6efc63ad28e65bbbff8655b13bcad676.png) 输入您的项目名称，然后输入，

它会问，

**重命名项目内容项？**

说*重命名*然后它会要求您提供*快照*，单击`Enable` 然后按`OK`

**完毕 ！**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T19:19:30.487

您也可以只创建一个新项目并仅导入您需要的头文件和代码文件。

# wpf - 从内存中的（wpf）视觉创建Ximage

> ID：11011819
> 
> 赞同：0
> 
> 时间：2012-06-13T09:20:47.747
> 
> 标签：wpf, vb.net, printing, pdfsharp

我正在尝试将视觉效果转换为 Ximage（在 pdf 上打印）。
目前我正在使用这个：

```
 Dim img As XImage = XImage.FromFile(path.LocalPath) 
```

但它需要我将它保存在我想使用它的硬盘上，但我不知道如何从视觉（在内存中）创建图像并将其加载。

```
 Dim img As XImage = XImage.FromGdiPlusImage(myVisualAsImage) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:40:09.377

如果您使用 PDFsharp 的 WPF 构建，您还可以使用：

```
public static XImage FromBitmapSource(BitmapSource image) 
```

有几个类（包括 BitmapImage 和 WriteableBitmap）是从 BitmapSource 派生的，也可以在这里传递。

另见： [http ://ryancdavidson.com/blog/2009/09/getting-and-using-the-pixels-of-your-visual-in-wpf/](http://ryancdavidson.com/blog/2009/09/getting-and-using-the-pixels-of-your-visual-in-wpf/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-04-16T15:49:48.457

vb.net - 克服 PDFSharp 1.5 中缺少的方法 FromGdiPlusImage

```
Function getTiffImage(sourceImage As Image, pageNumber As Integer) As XImage
    Dim ms As MemoryStream
    Dim returnImage As XImage
    Try
        ms = New MemoryStream()
        Dim objGuid As Guid = sourceImage.FrameDimensionsList(0)
        Dim objDimension As Imaging.FrameDimension = New Imaging.FrameDimension(objGuid)
        sourceImage.SelectActiveFrame(objDimension, pageNumber)
        sourceImage.Save(ms, Imaging.ImageFormat.Tiff)
        returnImage = XImage.FromStream(ms)
    Catch ex As Exception
        returnImage = Nothing
    End Try
    Return returnImage 
```

# html - html5 不支持视频

> ID：11011823
> 
> 赞同：0
> 
> 时间：2012-06-13T09:21:12.743
> 
> 标签：html, video

我有最新的 FF，我正在尝试使用视频标签嵌入视频。我用 test.html 将文件保存在我的桌面上，我的视频也在桌面上这是我正在使用的代码

```
<!DOCTYPE html>
<html>
<body>
<video controls>

  <source src="Wildlife.wmv">
  Your browser doesn't support video, you may download the

</video>
</body>
</html> 
```

我收到一个错误`No video with supported format and MIME type found.`

知道可能是什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:23:07.137

浏览器不使用 wmv，因为编解码器没有广泛使用 - 根据浏览器使用 mp4、ogg 或 webm。

[http://camendesign.com/code/video_for_everybody](http://camendesign.com/code/video_for_everybody)是了解这里复杂性的绝佳资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T09:26:18.120

你可以试试这个

```
 <body>

 <object width="50%" height="50%" type="video/x-ms-asf" url="Wildlife.wmv" data="Wildlife.wmv" classid="CLSID:6BF52A52-394A-11d3-B153-00C04F79FAA6">
 <param name="url" value="Wildlife.wmv">
 <param name="filename" value="Wildlife.wmv">
 <param name="autostart" value="1">
 <param name="uiMode" value="full" />
 <param name="autosize" value="1">
 <param name="playcount" value="1"> 
 <embed type="application/x-mplayer2" src="Wildlife.wmv" width="100%" height="100%" autostart="true" showcontrols="true"      pluginspage="http://www.microsoft.com/Windows/MediaPlayer/"></embed>
 </object>

</body> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T11:50:52.933

如果您在各种用户代理上运行您的应用程序，请尝试此操作。

```
<!DOCTYPE html>
    <html>
    <body>
    <video controls>

      <source src="Wildlife.mp4" type="video/mp4">
      <source src="Wildlife.ogg" type="video/ogg">
    <source src="Wildlife.webm" type="video/webm">
    Your browser doesn't support video, you may download the

    </video>
    </body>
    </html> 
```

# asp.net - WCF wsDualHttpBinding ASP.NET 客户端回调不起作用

> ID：11011825
> 
> 赞同：0
> 
> 时间：2012-06-13T09:21:15.117
> 
> 标签：asp.net

**我使用 wsDualHttpBinding 创建了一个简单的回调服务，并尝试使用 ASP.net Web 应用程序调用它，但我的问题是回调事件没有被命中。我已经使用控制台客户端进行了尝试，并且可以正常工作。请帮助我我在做什么错误。我是 ASP.net 的新手**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.ServiceModel;
using System.Threading;

[ServiceContract(CallbackContract=typeof(IClientCallback))]
public interface ITemperature
{
    [OperationContract(IsOneWay=true)]
    void RegisterForTempDrops();
}

public interface IClientCallback
{   
    [OperationContract]
    bool TempUpdate(double temp);
}

[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerSession, ConcurrencyMode = ConcurrencyMode.Reentrant)]
public class Temperature : ITemperature
{
    public void RegisterForTempDrops()
    {
        OperationContext ctxt = OperationContext.Current;
        IClientCallback callBack = ctxt.GetCallbackChannel<IClientCallback>();
        Thread.Sleep(3000); //simulate update happens somewhere; for example monitoring a database field
        callBack.TempUpdate(10);
    }

} 
```

**应用程序配置**

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <system.serviceModel>
    <services>
      <service name="Temperature" behaviorConfiguration="ServiceBehavior">
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:5050/duplexservice" />
          </baseAddresses>
        </host>
        <!-- Service Endpoints -->
        <endpoint address="http://localhost:5050/duplexservice" binding="wsDualHttpBinding" contract="ITemperature" />
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="ServiceBehavior">       
          <serviceMetadata httpGetEnabled="true"/>       
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>
</configuration> 
```

**运行服务的 Windows 窗体。**

```
using System.Text;
using System.Windows.Forms;
using System.ServiceModel;

namespace DuplexService
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        internal static ServiceHost myServiceHost = null;
        private void button1_Click(object sender, EventArgs e)
        {
            myServiceHost = new ServiceHost(typeof(Temperature));
            myServiceHost.Open();
            MessageBox.Show("Service Started!");
        }

        private void button2_Click(object sender, EventArgs e)
        {
            if (myServiceHost.State != CommunicationState.Closed)
            {
                myServiceHost.Close();
                MessageBox.Show("Service Stopped!");
            }
        }
    }
} 
```

**ASP.net 客户端代码**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using DuplexService;
using System.ServiceModel;

public partial class _Default : System.Web.UI.Page, ITemperatureCallback
{
    static InstanceContext site = new InstanceContext(new _Default());
    static TemperatureClient proxy = new TemperatureClient(site);

    public bool TempUpdate(double temp)
    {
        Response.Redirect("Temp dropped to {0} : " + temp);
        return true;
    }

    protected void Page_Load(object sender, EventArgs e)
    {
        proxy.RegisterForTempDrops();
    }
} 
```

**Web.Config 代码**

```
<?xml version="1.0"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0"/>
  </system.web>
  <system.serviceModel>
    <bindings>
      <wsDualHttpBinding>
        <binding name="WSDualHttpBinding_ITemperature" closeTimeout="00:01:00"
          openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
          bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard"
          maxBufferPoolSize="524288" maxReceivedMessageSize="65536" messageEncoding="Text"
          textEncoding="utf-8" useDefaultWebProxy="true">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
            maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <reliableSession ordered="true" inactivityTimeout="00:10:00" />
          <security mode="Message">
            <message clientCredentialType="Windows" negotiateServiceCredential="true"
              algorithmSuite="Default" />
          </security>
        </binding>
      </wsDualHttpBinding>
    </bindings>
    <client>
      <endpoint address="http://localhost:5050/duplexservice" binding="wsDualHttpBinding"
        bindingConfiguration="WSDualHttpBinding_ITemperature" contract="DuplexService.ITemperature"
        name="WSDualHttpBinding_ITemperature">
        <identity>
          <userPrincipalName value="smdunk" />
        </identity>
      </endpoint>
    </client>
  </system.serviceModel>
</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:59:12.703

你用过

```
Response.Redirect("Temp dropped to {0} : " + temp); 
```

请改成

```
Response.Write("Temp dropped to {0} : " + temp); 
```

# android - 从应用程序重新启动时的主要活动开始

> ID：11011826
> 
> 赞同：0
> 
> 时间：2012-06-13T09:21:15.537
> 
> 标签：android

在我的应用程序被自动销毁并再次创建后，如何完成所有活动并从 main 开始？例如，当用户更改系统字体时，可能会发生这种情况。我的应用程序类包含许多活动使用的大量数据，并且在应用程序重新启动时被清除，状态变为无效，这就是为什么我必须返回启动器活动并清除所有历史记录。

我尝试按照 Marc [here](https://stackoverflow.com/questions/2470870/force-application-to-restart-on-first-activity-android "这里")的建议在应用程序的 onCreate() 方法中调用以下代码，但它不起作用：

```
Intent i = getBaseContext().getPackageManager().getLaunchIntentForPackage( getBaseContext().getPackageName() );
i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(i); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T09:27:54.310

通过您的 Intent 开始每个活动后，只需添加 Finish() 方法..

# java - Java ftp 下载状态栏

> ID：11011830
> 
> 赞同：0
> 
> 时间：2012-06-13T09:21:30.377
> 
> 标签：java, ftp, statusbar

您好，我需要一个用于 FTP 下载的状态栏。我想获得一个浮动 <=1 的进度。这是我的代码：

```
 float status=0;
                FTPFile[] files = ftp.listFiles(REMOTEFILE);
                if (files == null || files.length == 0) {
                    throw new FileNotFoundException();
                }
                long size = files[0].getSize();
                InputStream inputStream = ftp.retrieveFileStream(REMOTEFILE);
                byte buf[] = new byte[1024];
                int len;
                int download=0;
                while ((len = inputStream.read(buf)) > 0){
                    out.write(buf, 0, len);
                    download+=1024;
                    status=(float)download/size; // here it set the progress
                }
                out.close(); 
```

我的麻烦是最终状态大于 1 并且我认为超过了 1024 的缓冲区大小（如果最后没有完整的缓冲区）。也许是因为下载的字节数超过了 files[0].getSize() 给我的数量？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T09:32:36.330

`download`无论实际读取多少字节，都添加 1024 个字节。您已经拥有读取的字节数的参考；`len`- 改用这个。

# session - Doctrine 2/多步表单/实体进入会话

> ID：11011834
> 
> 赞同：2
> 
> 时间：2012-06-13T09:21:46.890
> 
> 标签：session, symfony, doctrine-orm

我在 Symfony2 和 Doctrine 2.1.6 下工作，我尝试设置一个多步骤表单。在每个表单页面之间，我尝试将学说实体发送到 $_SESSION。

根据该 dotrine 文档，甚至可以解决多页表单： [http ://docs.doctrine-project.org/en/2.1/cookbook/entities-in-session.html](http://docs.doctrine-project.org/en/2.1/cookbook/entities-in-session.html)

但是根据stackoverflow上的许多其他帖子，不可能将实体发送到会话中。

我有以下控制器动作，我几乎复制/过去了学说文档。

```
public function indexAction(Request $request, $id)
{
    $session = $request->getSession();
    $em = $this->getDoctrine()->getEntityManager();

    if (isset($_SESSION['propertyAdd'])) {   
    $property = $_SESSION['propertyAdd'];
    $property = $em->merge($property);
    }

    else {

    $property = new property;

    }

    $form = $this->createForm(new propertyType($this->getDoctrine()),$property);

    // check form
    if ($request->getMethod() == 'POST') {
            $form->bindRequest($request);
            if ($form->isValid()){

            $em->detach($property);
            $_SESSION['propertyAdd'] = $property;

            // redirection to next step here  

            }
            }
   return $this->render('AddProperty:'.$id.'.html.twig', array(
        'form' => $form->createView(),));

} 
```

行 $_SESSION['propertyAdd'] = $property; 给我以下错误：

```
Fatal error: Uncaught exception 'ErrorException' with message 'Notice: Unknown: "id" returned as member variable from __sleep() but does not exist in Unknown line 0' in G:..\Symfony\vendor\symfony\src\Symfony\Component\HttpKernel\Debug\ErrorHandler.php on line 65 
```

如果我使用 Symfony2 助手替换这一行

```
$session->set('propertyAdd', $property); 
```

它抛出以下异常：

```
Symfony\Bundle\FrameworkBundle\DataCollector\RequestDataCollector::serialize() must return a string or NULL 
```

学说示例是否可行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T09:49:40.853

这不能回答你的问题，但你为什么要：

*   创建实体
*   序列化它
*   放到session里面（我个人不认为把对象转成字符串是好事）
*   在表单的下一步中从会话中获取它
*   反序列化它
*   向其中添加新数据
*   序列化它
*   再把它放在会话中

一个等等...

为什么不直接将表单数据存储在会话中，并在表单的所有步骤完成后创建实体？

如果您这样做是为了验证实体，您可以简单地使用表单（未链接到实体）并向它们添加验证约束。

# android - 带有 on checkchangelistner 的列表视图复选框

> ID：11011837
> 
> 赞同：-1
> 
> 时间：2012-06-13T09:22:02.333
> 
> 标签：android, android-listview, custom-adapter

我见过很多例子，但没有一个是根据我的问题...在我的情况下，我有一个带有自定义适配器的自定义列表视图，checkboxex 主要是隐藏的，当单击选项菜单按钮时，复选框变得可见并且可**聚焦**性也设置为 true并且 listview 不再接收列表项单击侦听器...我也有代码来保存**SparseBooleanArray**中复选框的状态，但最大的问题是在**getView()**中，因为它没有调用复选框检查，所以检查状态被错误地保存**例如**，如果我的列表视图中 首先有**5 个项目...来自****公共视图 getView(int position,View convertView,ViewGroup parent)的位置**将是 6 因为最后一项将在位置 6.so 在我的代码中

```
@Override
    public View getView(final int position,View convertView,ViewGroup parent)
    {
        //currentPosition=position;
        Log.v("Position",""+position);
        Log.v("ConvertView", ""+convertView);
        View row=convertView;

        if(row==null)
        {
            LayoutInflater inflater=((Activity)context).getLayoutInflater();
            row=inflater.inflate(layoutResourceId, parent,false);
            holder=new Feedbacks();
            holder.lvGuestName=(TextView)row.findViewById(R.id.guestName);
            holder.checkBox=(CheckBox)row.findViewById(R.id.clearCheck);

            holder.checkBox.setOnCheckedChangeListener(new OnCheckedChangeListener()
            {
                @Override
                public void onCheckedChanged(CompoundButton buttonView, boolean isChecked)
                {
                    if(isChecked)
                    {                           
                        checks.put(position, true);
                        System.out.println("checking at pos:"+position);
                    }
                    else
                    {                           
                        checks.put(position, false);
                        System.out.println("unchecking at pos:"+position);
                    }

                }                   

            });

            row.setTag(holder);

        }       
        else
        {               
            holder=(Feedbacks)row.getTag();

        }

        if(showCheckbox)
        {
            holder.checkBox.setVisibility(View.VISIBLE);        
        }
        else
        {
            holder.checkBox.setVisibility(View.GONE);
        }
        holder.lvGuestName.setText(feedbackList.get(position).getGuestName());
        holder.checkBox.setChecked((checks.get(position)));
        System.out.println("seting check at pos:"+position);    
        return row;                                     

    }

} 
```

现在， 即使我点击**0 位置**项目，它也会得到位置为**6** 我知道它，因为当复选框被选中/取消选中时，**getView()**将不会被调用，因此不会得到相应的位置......我知道我可以很容易地在 listitem 上单击复选框**可聚焦性 false**但我**很想**学习新事物，这就是为什么只想知道是否有人知道根据我的方式如何获得在列表视图中选中的相应复选框的位置...任何形式的帮助对我来说都是最感激和最有价值的...在此先感谢`if(isChecked) {
checks.put(position, true); System.out.println("checking at pos:"+position); }`******`checks.put(position,true);`******

 ******* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:48:14.763

在您的代码中，如果条件更改了您的代码，例如将 OnCheckedChangeListener 更改为 onClickListener，则您有错误。

```
 @Override
    public View getView(final int position,View convertView,ViewGroup parent)
    {
        View row=convertView;
        Feedbacks holder = null;

        if(row==null)
        {
            LayoutInflater inflater=((Activity)context).getLayoutInflater();
            row=inflater.inflate(layoutResourceId, parent,false);
            holder=new Feedbacks();
            row.setTag(holder);
        }       
        else
        {               
            holder=(Feedbacks)row.getTag();
        }

        holder.lvGuestName=(TextView)row.findViewById(R.id.guestName);
        holder.checkBox=(CheckBox)row.findViewById(R.id.clearCheck);

        holder.checkBox.setOnClickListener(new OnClickListener()
        {
            @Override
            public void onClick(View v)
            {
                if(holder.checkBox.isChecked())
                {                           
                    checks.put(position, true);
                    System.out.println("checking at pos:"+position);
                }
                else
                {                           
                    checks.put(position, false);
                    System.out.println("unchecking at pos:"+position);
                }

            }
        });

        if(showCheckbox)
        {
            holder.checkBox.setVisibility(View.VISIBLE);        
        }
        else
        {
            holder.checkBox.setVisibility(View.GONE);
        }

        holder.lvGuestName.setText(feedbackList.get(position).getGuestName());
        holder.checkBox.setChecked((checks.get(position)));
        System.out.println("seting check at pos:"+position);    
        return row;                                     

    } 
```******

# java - 错误：“无法解析导入助手”

> ID：11011838
> 
> 赞同：0
> 
> 时间：2012-06-13T09:22:08.347
> 
> 标签：java, import

我正在尝试在 Eclipse Helios 中运行一个动态 Web 项目。我和一位同事都从同一台服务器下载了相同的类，并通过在 Eclipse 上的复制和粘贴来导入它们。我正在尝试在 Apache Tomcat 7 上运行该项目，并据我所知对其进行了正确配置。但是，我的许多课程都出现以下错误：

> 导入助手无法解析

在以下行：

```
<%@ page import="helpers.*" %> 
```

对问题有更深入了解的人是否知道问题以及如何解决？

谢谢，斯蒂芬。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T10:03:27.893

在 Eclipse 的 Package Explorer（左侧）中，在您的项目下应该有一个名为 的条目`Web App Libraries`，展开它并查看是否`<some_project_path>/WEB-INF/classes`列出了？这将告诉您您的 webapp 项目是否配置为使用您在应用程序类路径上生成的类。

如果不是这种情况，您可以转到您的项目属性，选择“Java Build Path”，然后在“源”选项卡上将您设置`Default output folder`为`<yourapp>/WebContent/WEB-INF/classes`- 或其他，具体取决于您的 webapp 的结构。

# html - CSS背景从变量头开始

> ID：11011840
> 
> 赞同：2
> 
> 时间：2012-06-13T09:22:13.390
> 
> 标签：html, css, background-image

**问题**

我希望我的内容区域的 CSS 背景纹理在可变高度标题之后立即开始。纹理的自然高度为 900px，并渐变为纯色，因此如果它适合 content-start 和 body-end 之间的可用空间，则应该显示整个纹理。纹理不应人为地扩大内容区域或造成不必要的滚动，但当内容长于页面大小时仍应出现滚动。

**JSFiddle**

根据要求，这是我的问题的 JSFiddle。由于问题中实际上只有一个 DOM 元素，我认为小提琴并没有澄清太多。[http://jsfiddle.net/AbEUe/5/](http://jsfiddle.net/AbEUe/5/)

**什么不起作用**

```
#contentAndBackground {
    padding-bottom: 900px;
    margin-bottom: -900px;
    background: url('my900pxHighImage.png') repeat-x;
} 
```

以上确保显示整个图像，但负边距不会像我希望的那样保持不必要的滚动条。

```
#contentAndBackground {
    min-height: 900px;
    background: url('my900pxHighImage.png') repeat-x;
} 
```

同样的问题。显示了整个图像，但始终显示滚动条。

我想避免使用需要处理屏幕大小调整的 JavaScript。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T12:30:58.383

我想我做到了：http: [//jsfiddle.net/AbEUe/7/](http://jsfiddle.net/AbEUe/7/)

我创建了 2 个容器 div，它们的高度均为 100%。

*   第一个包含标题和背景，`overflow:hidden`因此背景停止在底部。

*   第二个包含标题和内容，由于使用定位，这个位于第一个容器的顶部，它可以拉伸到 100% 以上（如果文本量需要的话）。

您可以看到您必须渲染标题两次，但这并不重要，因为第一次不可见。

**编辑：**

通过将背景设置为内容 div 解决了最后一个问题（见评论）。见[http://jsfiddle.net/AbEUe/8/](http://jsfiddle.net/AbEUe/8/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T10:29:47.737

你的问题不是很清楚，但这可以防止你的小猫被切碎。

```
#content {background: url('http://placekitten.com/g/200/300') repeat-x; min-height:300px;} 
```

# html - HTML5 IE 修复不起作用

> ID：11011845
> 
> 赞同：0
> 
> 时间：2012-06-13T09:22:24.250
> 
> 标签：html, excanvas

我创建了一个条形图，它是对[HTML5Lab](http://html5laboratory.com/creating-a-bar-chart-with-canvas.php)条形图的改进。我已经包含了 excanvas.js，但它似乎仍然没有显示任何内容。我的条形图可以在[这里找到](http://intercepter.comli.com/example3.html)

注意：此图适用于所有其他浏览器。

请帮我解决我的项目截止日期快到了，这个 IE 让我做噩梦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T12:01:46.573

一题。你永远不会让 IE 尝试像其他更现代的浏览器那样运行而没有 doctype。现在你处于怪癖模式。将此添加到您的第一行：`<!DOCTYPE html>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T10:28:21.067

可以通过使用 svn trunk 中的最新 excanvas.js 代码解决。google [project home](http://code.google.com/p/explorercanvas/)上的代码很旧，最后一次更新是在2009年。从这个[问题得到了想法](http://code.google.com/p/explorercanvas/issues/detail?id=69)

对于那些不知道的人，您可以从以下位置获取最新的 svn trunk 代码：

[http://explorercanvas.googlecode.com/svn/trunk/excanvas.js](http://explorercanvas.googlecode.com/svn/trunk/excanvas.js)

# opengl - 快速访问 DICOM 图像中的像素值

> ID：11011848
> 
> 赞同：0
> 
> 时间：2012-06-13T09:22:31.793
> 
> 标签：opengl, dicom

我正在尝试比较 DICOM 图像的数据集，以便我可以选择最适合在 opengl 中进行体积渲染的数据集。我需要具有 r、g、b 和 alpha 通道的 DICOM 图像。

所以，基本上，我想要一个像 ubuntu 中的 irfanView 这样的应用程序，我只需要点击一个点就可以得到相应的像素信息。

我不想要一些像 itk 或 dcmtk 这样的 c++ 库。我不知道如何用 imagemagick 做同样的事情。有谁知道这样的应用程序？

一些进展：我使用 dcmtk（虽然我更喜欢带有 gui 的东西）并使用这个命令：

$ dcmdump .dcm 一个巨大的输出如下所示：

Dicom 文件格式

Dicom 元信息标头

使用的 TransferSyntax: Little Endian Explicit (0002,0002) UI =MRImageStorage # 26, 1 MediaStorageSOPClassUID (0002,0010) UI =LittleEndianImplicit # 18, 1 TransferSyntaxUID

Dicom-Data-Set Used TransferSyntax: Little Endian Implicit (0008,0005) CS [ISO_IR 100] # 10, 1 SpecificCharacterSet (0008,0008) CS [ORIGINAL\SECONDARY\MPR] # 24, 3 ImageType (0008,0016) UI =MRImageStorage #26, 1 SOPClassUID (0008,0018) UI [1.3.12.2.1107.5.2.4.7259.20010531113752000010358] # 48, 1 SOPInstanceUID (0008,0020) DA [20010302] #8, 1 StudyDate

等等……直到……

(7fe0,0010) OW 0000\0000\0000\0000\0000\0000\0000\0000\0000\0000\0000\0000\0000... # 131072, 1 像素数据

这是该输出中的最后一行。这就是我正在寻找的信息。但是我如何提取完整的像素数据而不仅仅是一个很小的样本呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T10:02:56.913

我不知道任何具有这种功能的免费 DICOM 图像编辑器，因此我建议您分两步执行此操作：

*   使用工具将您的 DICOM 图像转储为常规图像格式，例如[dcm2pnm](http://support.dcmtk.org/docs/dcm2pnm.html)，它可作为[DCMTK 二进制发行](http://dicom.offis.de/dcmtk.php.en)版（至少是 Windows 发行版）中的预编译二进制文件使用。
*   使用您喜欢的任何图像查看和编辑工具（例如 IrfanView）来检查转储的图像。

# php - 接收 curl 请求

> ID：11011851
> 
> 赞同：-1
> 
> 时间：2012-06-13T09:22:42.220
> 
> 标签：php, curl

我在我的程序中使用 curl。
我的代码是：

```
$tref = $_GET['tref'];

$url = "https://paypaad.bankpasargad.com/PaymentTrace";
$curl_session = curl_init($url); // Initiate CURL session -> notice: CURL should be enabled.
curl_setopt($curl_session, CURLOPT_POST, 1);    // Set post method on.
//curl_setopt($curl_session, CURLOPT_FOLLOWLOCATION, 1); // Follow where ever it goes
curl_setopt($curl_session, CURLOPT_HEADER, 0); //Don't return http headers
//curl_setopt($curl_session, CURLOPT_RETURNTRANSFER, 1); // Return the content of the call
$post_data = "tref=".$tref;
curl_setopt($curl_session, CURLOPT_POSTFIELDS, $post_data);

// Get returning data
$output = curl_exec($curl_session);
print_r($output);
print_r($post_data); 
```

但是当我在我的主机中使用此代码时，`$output`未设置并且当正确使用另一台服务器时此代码。
我在服务器上的表现如何。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T12:14:31.283

嘿找到了这段代码：

```
$data = curl_exec($curl_handle);
if ($data === FALSE) {
   die(curl_error($curl_handle));
} else {
   $html_str .= $data;
} 
```

当我使用这段代码时，我遇到了这个错误：

> SSL证书问题，验证CA证书是否OK。详细信息：错误：14090086：SSL 例程：SSL3_GET_SERVER_CERTIFICATE：证书验证失败

然后我搜索这个错误并面对这个链接 [http://unitstep.net/blog/2009/05/05/using-curl-in-php-to-access-https-ssltls-protected-sites/](http://unitstep.net/blog/2009/05/05/using-curl-in-php-to-access-https-ssltls-protected-sites/)

我添加了这段代码

> curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);

前

> curl_exec():

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T09:25:25.640

确保您的服务器 curl 已启用..

更改 `;extension=php_curl.dll` 为

```
extension=php_curl.dll 
```

在 php.ini 中，您还检查了[对未定义函数 curl_init() 的调用。？](https://stackoverflow.com/questions/6382539/call-to-undefined-function-curl-init)

# jenkins - 我可以在 Jenkins 作业配置中使用令牌吗？

> ID：11011852
> 
> 赞同：0
> 
> 时间：2012-06-13T09:22:45.540
> 
> 标签：jenkins

我想在配置中使用 Jenkins 作业名称：

*   Maven 根 POM 应该是：{JOB_NAME}\pom.xml
*   SCM 子路径应为：{JOB_NAME}

我可以在这里使用令牌吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T10:00:05.833

对于 SCM，答案是“是”——使用 ${JOB_NAME}（例如`svn://myserver/myrepo/trunk/${JOB_NAME}`）。

在 Maven 构建步骤中它不起作用。但是，您可以尝试使用包含 ${JOB_NAME}（例如`C:\workspaces\${JOB_NAME}`）的自定义工作区（按下“构建”下的“高级”按钮 -> 选中“使用自定义工作区”）作为解决方法。

# selenium - 如何解析字符串以仅获取所需的文本？

> ID：11011856
> 
> 赞同：1
> 
> 时间：2012-06-13T09:22:52.747
> 
> 标签：selenium

```
storeText ( locator, variableName ) 
${variableName} 
```

如果 variableName 包含值“显示 145300 的 1 到 30”。我需要解析这个字符串并将值 145300 存储在另一个变量中。这怎么可能 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T09:47:00.937

```
Command: storeEval
Target : '${variableName}'.split(' ').last()
Value  : result 
```

# json - 在 AS3 中加载 JSON

> ID：11011868
> 
> 赞同：1
> 
> 时间：2012-06-13T09:23:18.143
> 
> 标签：json, actionscript-3, flash

我正在尝试将 JSON 加载到我的 flash 程序中。JSON 与 fla 和 swf 文件位于同一目录中。我能够将 JSON 加载到字符串变量中，并且当我进行跟踪时，我会看到 JSON。JSON 格式有效，请访问：http: [//www.jsonlint.org/](http://www.jsonlint.org/)。问题是当我尝试将 JSON 解码为对象时。我收到以下错误：“RangeError：错误 #1506：指定的范围无效。” 我正在使用来自 ac3corelib 的 JSON 库来解码字符串。这是所有代码：

```
import com.rational.serialization.json.JSON;
import flash.display.Loader;
import flash.external.ExternalInterface;
import flash.events.IOErrorEvent;
import flash.net.URLLoader;

var _jsonLoader:URLLoader = new URLLoader();
_jsonLoader.load(new URLRequest("JSON.json"));
_jsonLoader.addEventListener(Event.COMPLETE, processJson);
_jsonLoader.addEventListener(IOErrorEvent.IO_ERROR, _notify);

function _notify(e:IOErrorEvent):void
{
    trace("error");
    e.target.removeEventListener(IOErrorEvent.IO_ERROR, _notify);
}
function processJson(e:Event):void
{
    var stringJson:String;
    var temp:Object;
    stringJson = String (e.target.data);
    trace(stringJson);
    temp = JSON.decode(stringJson);
trace(temp)
} 
```

请告知我为什么会收到此错误

谢谢大家，Moshe S，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T10:19:00.047

如果没有看到您的 JSON 代码，很难分辨。但是，您使用的是什么版本的 Flash？从 Flash 11 和 Air 3.0（以及 Flex 4.6）开始，您将获得原生 JSON 支持。

查看本机解析器是否为您提供任何不同的信息：

```
temp = JSON.parse(stringJson); 
```

# azure - 主题的服务总线订阅不应用过滤器

> ID：11011870
> 
> 赞同：0
> 
> 时间：2012-06-13T09:23:40.997
> 
> 标签：azure, azureservicebus

我尝试按照[1](https://www.windowsazure.com/en-us/develop/java/how-to-guides/service-bus-topics/#bkmk_HowToReceiveMsgs)给出的教程进行操作。我创建了一个主题，主题上有 2 个订阅，分别使用 sqlFilter (user_age < 50) 和 (user_age>= 50)。我为消息定义了一个自定义属性 user_age。但是当我发送关于该主题的消息时，两个订阅都会收到相同的消息，这是无稽之谈！任何的想法？

我的代码完全受教程中给出的启发，除了我使用此代码从给定订阅接收消息：

```
resultQM = service.receiveSubscriptionMessage("MyTopic", subName, opts); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T22:42:03.710

该教程中的代码无法正常工作。这是我用来创建两个订阅（LowMessages 和 HighMessages）的 Java 代码，它们实际上过滤了用户定义的自定义属性“MessageNumber”的值。我发现这行得通。请注意，您需要显式地为 ruleInfo 命名（“RULENAME”），并且您还需要显式删除订阅的默认“AllMatch”规则（否则您将无法过滤。）

```
 SubscriptionInfo subInfo = new SubscriptionInfo("LowMessages");
  CreateSubscriptionResult result = service.createSubscription("TestTopic", subInfo);
  RuleInfo ruleInfo = new RuleInfo("RULENAME");
  ruleInfo = ruleInfo.withSqlExpressionFilter("MessageNumber <= 3");
  CreateRuleResult ruleResult = service.createRule("TestTopic", "LowMessages", ruleInfo);
  service.deleteRule("TestTopic", "LowMessages", "$Default");

  SubscriptionInfo subInfo2 = new SubscriptionInfo("HighMessages");
  CreateSubscriptionResult result2 = service.createSubscription("TestTopic", subInfo2);
  RuleInfo ruleInfo2 = new RuleInfo("RULENAME2");
  ruleInfo2 = ruleInfo2.withSqlExpressionFilter("MessageNumber > 3");
  CreateRuleResult ruleResult2 = service.createRule("TestTopic", "HighMessages", ruleInfo2);
  service.deleteRule("TestTopic", "HighMessages", "$Default"); 
```

# hadoop - TaskTracker 使用本地库

> ID：11011875
> 
> 赞同：0
> 
> 时间：2012-06-13T09:23:58.240
> 
> 标签：hadoop, mapreduce

当 tasktracker 被分配一个任务时，tasktracker 是否有可能使用其本地系统上的库启动任务？

如果是这样，使用本地库启用的命令是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T15:16:13.557

本地 HADOOP_HOME/lib 中的所有 jar 都将添加到类路径中，因此如果您想快速破解，可以将东西粘贴在那里。

正确的做法是在开始工作之前显式地将内容添加到分布式缓存中，然后该库将可用于 Map Reduce 工作的每个任务。

```
DistributedCache.addFileToClassPath(new Path("hdfs://path/to/lib.jar"), jobConf) 
```

# java - 优化java map的声明方式

> ID：11011876
> 
> 赞同：0
> 
> 时间：2012-06-13T09:23:59.617
> 
> 标签：java, dictionary

我是java新手，所以请帮助和指导

情况 1：如果 a 在循环内声明一个 java 映射。

```
for (Document doc : docList) {
    Map<String, String> input = new HashMap<String, String>();
} 
```

情况 2：如果 a 在循环外声明一个 java 映射。

```
Map<String, String> input = new HashMap<String, String>();
for (Document doc : docList) {

} 
```

哪种情况是更优化（最佳实践）的声明方式，为什么？

阿杰

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T09:25:45.997

好吧，这取决于您的使用情况-如果`Map`每次迭代都需要新的，则在循环之外进行初始化。
由于您在这两者之间感到困惑 - 我相信您应该使用案例 2 - 因为它只会初始化`Map`一次，如果您在循环中初始化它，那么`Map`将无法在循环外访问。我还认为，如果您解释一下您对该实例
所做的事情，将会更有帮助。`Map`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T09:28:23.617

这取决于。取决于你想要达到什么。

```
for (Document doc : docList) { 
  Map input = new HashMap();
} 
```

当每次迭代都需要一个具有完全不同值的新地图时，这很有用。

```
Map input = new HashMap();
for (Document doc : docList) {

} 
```

当您想将先前迭代的值用于下一次迭代时，这将很有用。

同样在第二种情况下，即使在循环之后，地图也可供您使用。首先，一旦循环结束，您将无法访问地图，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T09:30:14.100

当您在第二个中退出循环时，地图超出范围；除非您将其分配给其他东西，否则它有资格获得 GC。

如果您打算在其他地方使用它，则必须使用＃1。

如果每次迭代都需要一个，其他人已经解释了在循环内声明它的必要性。这是一个例子：

```
List<Map> maps = new ArrayList<Map>();
for (int i = 0; i < 10; ++i) {
    Map temp = new HashMap();
    maps.add(temp);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T09:31:21.633

实际上，在您的情况下，没有优化的意义，因为两者都不相同。您可能想知道以下情况下哪个更好。

```
Map<String, String> input = null;
for (Document doc : docList) {
    input = new HashMap<String, String>();
} 
```

或者

```
for (Document doc : docList) {
   Map<String, String> input = new HashMap<String, String>();
} 
```

在这种情况下，第一个几乎没有优化，因为声明它们映射一次，但为 docList 中的每个条目初始化它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T09:31:58.570

第一种方法会导致大量对象流失（特别是如果您的集合`docList`很大）。Java 对象分配总体上是一项相对昂贵的操作，并且该对象流失所产生的垃圾收集开销也会影响您的性能。

第二种方法将一遍又一遍地重复使用相同的地图（只要确保在每次新迭代之前不要忘记清空它）。

使用第二种方法在性能方面几乎总是更好，但是第一种方法使您的代码更清晰，您不打算在`Map`循环之外使用它（它的范围更窄），我有时会考虑一件好事。本质上，我的结论是：

1.  如果您的文档集合可能很大，请使用选项 2。
2.  如果您的文档集合保证很小，如果您希望您的代码非常明确地说明`Map`的可见性范围，请使用选项 1，否则使用选项 2，或者如果您真的关心获得最佳性能。

# nhibernate - NHibernate 会话管理

> ID：11011877
> 
> 赞同：2
> 
> 时间：2012-06-13T09:24:01.910
> 
> 标签：nhibernate, session

我在 win 服务中使用 NHiberante。有时我得到

```
System.ObjectDisposedException: Session is closed!
Object name: 'ISession'.
   at NHibernate.Impl.AbstractSessionImpl.ErrorIfClosed()
   at NHibernate.Impl.AbstractSessionImpl.CheckAndUpdateSessionStatus()
   at NHibernate.Impl.SessionImpl.FireSave(SaveOrUpdateEvent event)
   at NHibernate.Impl.SessionImpl.Save(Object obj)
   at Attraction.DAL.Repositories.Repository`1.Save(T entity)
   at Attraction.VideoDispatcher.Program.ThreadPoolCallback(Object threadContext) 
```

我不知道出了什么问题。我的会话管理子系统：

存储库：

```
 public class Repository<T> : IRepository<T>, IDisposable
    {
        protected readonly bool CommitAtDispose;
        public Repository(bool commitAtDispose)
        {
            CommitAtDispose = commitAtDispose;
            StartSession();
        }
        private void StartSession()
        {
            if (NHibernateSession == null)
                NHibernateHelper.StartSession();
        }
        public void Dispose()
        {
            if (CommitAtDispose)
                Flush();
        }
        public void Flush()
        {
            NHibernateHelper.EndSession();
        }
        protected override sealed ISession NHibernateSession
        {
            get
            {
                return SessionManager.CurrentSession; 
            }
        }       
        public virtual T GetById(int id)       
        public virtual List<T> GetAll()        
        public virtual List<T> GetByPage(int pageIndex, int pageSize)       
        public virtual int GetCount()        
        public virtual List<T> GetByCriteria(params ICriterion[] criterion)       
        public virtual T Save(T entity)       
        public virtual T Update(T entity)        
        public virtual void Delete(T entity)        
    }
} 
```

SessionManager - 提供对 sessionfactory 的访问的单音

```
public class SessionManager : ISessionFactoryProvider
{
        private static readonly ILog Log = LogManager.GetLogger(System.Reflection.MethodBase.GetCurrentMethod().DeclaringType);
        private readonly ISessionFactory sessionFactory;
        public static ISessionFactory SessionFactory
        {
            get { return Instance.sessionFactory; }
        }
        public ISessionFactory GetSessionFactory()
        {
            return sessionFactory;
        }
        public static ISession OpenSession()
        {
            return Instance.GetSessionFactory().OpenSession();
        }
        public static ISession CurrentSession
        {
            get
            {
                if (!CurrentSessionContext.HasBind(Instance.GetSessionFactory()))
                    return null;
                return Instance.GetSessionFactory().GetCurrentSession();
            }
        }

        public static SessionManager Instance
        {
            get
            {
                return NestedSessionManager.sessionManager;
            }
        }
        private SessionManager()
        {
            Log.Info("Start creating factory");
            Configuration configuration = new Configuration().Configure();
            sessionFactory = configuration.BuildSessionFactory();
            Log.Info("End creating factory");

        }

        class NestedSessionManager
        {
            internal static readonly SessionManager sessionManager =
                new SessionManager();
        }
    } 
```

NhibernateHelper，它为开始和结束会话做一些工作：

```
public static class NHibernateHelper
    {
        public static void StartSession()
        {
            var session = SessionManager.SessionFactory.OpenSession();
            session.BeginTransaction();
            CurrentSessionContext.Bind(session);

        }
        public static void EndSession()
        {
            var session = SessionManager.CurrentSession;
            CurrentSessionContext.Unbind(SessionManager.SessionFactory);
            if (session != null)
            {
                try
                {
                    if (session.Transaction != null && session.Transaction.IsActive)
                        session.Transaction.Commit();
                }
                catch (Exception ex)
                {
                    session.Transaction.Rollback();
                    throw new ApplicationException("Error committing database transaction. "+ex.Message, ex);
                }
                finally
                {
                    session.Close();
                    session.Dispose();

                }
            }

        }
    } 
```

可能是我的设计不太好，但我无法想象我怎么能抓住这个错误。

**UPD**

对不起我的配置。我还没有迁移到流利的，所以：

```
<hibernate-configuration xmlns="urn:nhibernate-configuration-2.2">
    <session-factory>
      <property name="connection.provider">NHibernate.Connection.DriverConnectionProvider</property>
      <property name="dialect">NHibernate.Dialect.MySQLDialect</property>
      <property name="connection.driver_class">NHibernate.Driver.MySqlDataDriver</property>
      <property name="connection.connection_string">***</property>
      <property name="show_sql">false</property>
      <property name="default_schema">**_***</property>
      <property name="current_session_context_class">thread_static</property>
      <mapping assembly="***.Core"/>
    </session-factory>
  </hibernate-configuration> 
```

**UPD2**

保存方法：

```
 public virtual T Save(T entity)
        {
            NHibernateSession.Save(entity);
            return entity;
        } 
```

线程池回调：

```
 public static void DetectStart(Object threadContext)
        {
            try
            {
                var task = (TasksPerAttraction)threadContext;                
                var startInfo = new ProcessStartInfo(..., ...)
                {
                    UseShellExecute = false,
                    RedirectStandardOutput = true
                };
                Process p = Process.Start(startInfo);
                var outputXml = p.StandardOutput.ReadToEnd();
                p.WaitForExit();
                var doc = XDocument.Parse(outputXml);
                foreach (var xElement in doc.Root.Descendants("start"))
                {
                    var startDetection = new StartDetection
                                             {
                                                 DtStart = DateTime.Parse(xElement.Attribute("startTime").Value),
                                                 Attraction = task.Attraction,                                                
                                             };
                    lock (spinLock)
                    {
                        using (var repo = new Repository<StartDetection>(true))
                            repo.Save(startDetection);
                    }
                }
                var tskRepo = new Repository<Task>(true);
                foreach(var tsk in task.Tasks)
                {
                    tsk.IsProcessedStart = true;
                    tskRepo.Update(tsk);
                }
                tskRepo.Flush();
            }
            catch (Exception ex)
            {
                //....
            }
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T17:35:04.357

有一些潜在的问题，但我怀疑最大的问题是您将任务保存在一个会话中（因此该任务的吸引力与会话 1 相关联），然后将任务保存在另一个会话中 - 所以您以会话 1 中的 Attraction 结束，该会话现已关闭，会话 2 正在导航关系以查看是否需要保存 Attraction 并因此出现错误。这是一个假设，因为我没有您的模型或映射。

我认为最简单的解决方法是在您的回调中打开会话，即：

```
public static void DetectStart(Object threadContext)
{
    try
    {
        ... run your process ...
        p.WaitForExit();
        // **** OPEN SESSION HERE ****
        NHibernateHelper.StartSession(); 

        var doc = XDocument.Parse(outputXml);
        foreach (var xElement in doc.Root.Descendants("start"))
        {
            var startDetection = new StartDetection
                                     {
                                         DtStart = DateTime.Parse(xElement.Attribute("startTime").Value),
                                         Attraction = task.Attraction,                                                
                                     };
            lock (spinLock)
            {
                // *** DON'T CLOSE THE SESSION ON DISPOSE
                using (var repo = new Repository<StartDetection>(false)) 
                    repo.Save(startDetection);
            }
        }
        // *** DON'T CLOSE THE SESSION ON DISPOSE HERE EITHER!
        using(var tskRepo = new Repository<Task>(false)) 
        { 
            foreach(var tsk in task.Tasks)
            {
                tsk.IsProcessedStart = true;
                tskRepo.Update(tsk);
            }
            tskRepo.Flush();
        }
    }
    catch (Exception ex)
    {
        //....
    }
    finally {
        // *** MAKE SURE YOU CLOSE THE SESSION
        NHibernateHelper.EndSession();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T17:23:26.857

您好 Andrew，如果您使用 IOC 来处理您的会话怎么办？我使用 ninject 并且它也很轻松，我将分享一些可能对您有所帮助的代码，这是我解决处理 Nhibernate 的近似方法，但我愿意接受建议。

**回购类：**

```
public class Repositorio<T> : IRepositorio<T> where T : class
{
    [Inject]
    public ISession Session { get; set; }

    #region IRepositorio<T> Members

    public IList<T> ListAll()
    {
        return Session.CreateCriteria<T>().List<T>();
    }

    public T Look(object id)
    {
        return Session.Get<T>(id);
    }

    public void Add(T t)
    {
        using (ITransaction transaction = Session.BeginTransaction())
        {
            transaction.Begin();
            try
            {
                Session.Save(t);
                transaction.Commit();
            }
            catch (Exception)
            {
                transaction.Rollback();
                throw;
            }
            finally
            {
                transaction.Dispose();
            }

        }
    }

    public void Save(T t)
    {
        using (ITransaction transaction = Session.BeginTransaction())
        {
            transaction.Begin();
            try
            {
                Session.SaveOrUpdate(t);
                transaction.Commit();
            }
            catch (Exception)
            {
                transaction.Rollback();
            }
            finally
            {
                transaction.Dispose();
            }

        }

    }

    public void Delete(T t)
    {
        using (ITransaction transaction = Session.BeginTransaction())
        {
            transaction.Begin();
            try
            {
                Session.Delete(t);
                transaction.Commit();
            }
            catch (Exception e)
            {
                transaction.Rollback();
                Console.WriteLine(e.StackTrace);
            }
            finally
            {
                transaction.Dispose();
            }

        }
    }

    #endregion

} 
```

**我的休眠助手：**

```
public sealed class NHibernateHelper
{
    public static ISessionFactory SessionFactory { get; set; }

    private static void OpenSession()
    {
        var configuration = new Configuration();
        configuration.Configure();
        SessionFactory = configuration.BuildSessionFactory();
    }

    public static ISession GetCurrentSession()
    {
        if (SessionFactory == null)
        {
            OpenSession();
        }
        if (SessionFactory != null)
            return SessionFactory.OpenSession();
        return null;
    }

    public static IStatelessSession GetStatelessSession()
    {
        if (SessionFactory == null)
        {
            OpenSession();
        }

        if (SessionFactory != null)
            return SessionFactory.OpenStatelessSession();
        return null;
    }

    public static void CloseSessionFactory()
    {
        if (SessionFactory != null)
            SessionFactory.Close();
    }
} 
```

在我的模块中，我这样做：

**如何将会话绑定到存储库：**

```
Bind<ISession>().ToMethod(c => NHibernateHelper.GetCurrentSession()).InSingletonScope().OnDeactivation(c => NHibernateHelper.CloseSessionFactory()); 
```

注意：检查绑定的范围可能更适合您的线程范围

**如何将 Open 会话与 repo 绑定**

```
Bind<SomeRepoImpl>().ToSelf(); 
```

希望对您有所帮助，我很乐意为您提供帮助。

# r - 不稳定的格式化行为

> ID：11011880
> 
> 赞同：0
> 
> 时间：2012-06-13T09:24:09.260
> 
> 标签：r, formatting

原谅我这个不漂亮的代码，但我试图让它首先工作。（“当然这只是暂时的。除非它有效”-red green）

我正在尝试创建一个函数，它将以我需要的样式格式化数字列。它看起来像这样。

```
 frmt <- function(x, rates=FALSE, thou=FALSE) {
  ifelse(x==0, "0", 
  ifelse(x < 0.01 & thou==TRUE, "<0.01", 
  ifelse(x < 0.1 & thou==FALSE, "<0.1", 
  ifelse(signif(x, 2) < 1 & thou==TRUE, formatC(round(x,3), format='f', digits=3),
  ifelse(signif(x, 2) < 1, formatC(round(x,2), format='f', digits=2), 
  ifelse(signif(x, 2) < 10, formatC(round(x,2), format='f', digits=1),
  ifelse(rates==FALSE, formatC(signif(x, 2), big.mark=" ", format='d'), 
  ifelse(signif(x, 3) < 100, formatC(signif(x, 2), big.mark=" ", format='d'), formatC(signif(x, 3), big.mark=" ", format='d')))))))))
} 
```

它对此非常有用：

```
> frmt(1413.612)
[1] "1 400" 
```

但不是这个：

```
> frmt(c(0.0001, 0.0213, 0.25413, 1.0123, 9.9123, 15.124, 112.05, 1413.612, NA))
[1] "<0.1" "<0.1" "0.25" "1.0"  "9.9"  "0"    "0"    "0"    NA 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T08:46:15.763

这是我终于开始工作的代码

```
 frmt <- function(x, rates=FALSE, thou=FALSE) {
  ifelse(x==0, "0", 
  ifelse(x < 0.01 & thou==TRUE, "<0.01", 
  ifelse(x < 0.1 & thou==FALSE, "<0.1", 
  ifelse(signif(x, 2) < 1 & thou==TRUE, formatC(round(x,3), format='f', digits=3),
  ifelse(signif(x, 2) < 1, formatC(round(x,2), format='f', digits=2), 
  ifelse(signif(x, 2) < 10, formatC(round(x,2), format='f', digits=1),
  ifelse(x > 1 & rates==FALSE, formatC(signif(x, 2), big.mark=" ", format='d'), 
  ifelse(signif(x, 3) < 100, formatC(signif(x, 2), big.mark=" ", format='d'), formatC(signif(x, 3), big.mark=" ", format='d')))))))))
} 
```

# php - 在 Moodle 中剥离 HTML 标签 - TinyMCE

> ID：11011885
> 
> 赞同：1
> 
> 时间：2012-06-13T09:24:17.083
> 
> 标签：php, javascript, tinymce, moodle

当我在 Moodle 的 wiki 中编写 TinyMCE 并编写如下 html 代码时：

```
<a onclick="testFunction()" rel="test">myTest</a> 
```

锚标记中的 onclick、rel 和所有其他属性都被剥离了。但是，当我在 Moodle 论坛的 TinyMCE 编辑器中编写相同的代码时，它不会剥离锚标记。

我已授予 Allow EMBED 和 OBJECT 标签并启用受信任的内容，并且为每个用户都这样做了。有人对这个问题有任何线索吗？

如何在 Moodle 的 WiKi 中禁用 HTML 标签剥离或至少允许一组预定义的标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:47:47.210

您必须在moodle安装中找到tinymce配置（通常是一个名为的文件`tinymce.js.php`）并根据您的需要更改设置[valid_elements](http://www.tinymce.com/wiki.php/Configuration%3avalid_elements)（查看链接以了解如何定义有效属性以便将它们保留在编辑器中） .

# c# - 在 MSVC 中生成 dll 和 exe

> ID：11011889
> 
> 赞同：1
> 
> 时间：2012-06-13T09:24:32.863
> 
> 标签：c#, .net

对于 Microsoft Visual Studio IDE 中的 Visual C# 项目，要使用什么配置设置，以便它可以生成 exe 和 dll 输出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T09:45:22.203

[使用nant](http://nant.sourceforge.net/)可以轻松实现您想要的。您必须创建一个简单的 xml 文件，该文件是脚本，并且可以通过批处理文件轻松执行。一旦你创建了它们，就很容易不再需要手动工作，每次你需要构建项目时，你所要做的就是执行脚本。

[这是一个关于nant](http://www.4guysfromrolla.com/articles/120104-1.aspx#postadlink)的优秀教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T09:36:52.543

正如达林在评论中指出的那样，没有设置可以做到这一点。但是，您可以通过构建事件和批处理脚本来实现它

1.  在 dll 项目上创建预构建事件以调用批处理脚本
2.  在批处理中，复制 dll 项目的 csproj
    *   修改复制的csproj的xml内容，将输出类型改为exe
    *   修改复制的csproj的输出目录
3.  在 Visual Studio 中运行它

您现在将获得生成的 csproj 的副本，该副本将输出到 exe。您可以将第二个 csproj 添加到 Visual Studio 中，每次构建时，它应该同步 exe csproj 并构建它。

一些技巧：

*   您可以使用 Powershell 修改 csproj。看[这里](https://stackoverflow.com/questions/8955964/possible-to-remove-and-add-a-reference-to-csproj-programmatically-via-a-batch-fi)
*   您可能希望将复制的 csproj 中的所有 cs 文件修改为[链接](http://support.microsoft.com/kb/306234)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T07:36:33.260

我知道这是一个老问题，但是可以在 proj 文件中做很多在用户界面中无法做到的事情。

对于这个特定问题，您只需这样做：

*   创建一个新的项目配置，例如 ReleaseExe
*   在项目的 csprojfile 中，您将找到以下行

    ```
    <OutputType>Library</OutputType> 
    ```

*   在该行之后添加以下行

    ```
    <OutputType Condition="'$(Configuration)|$(Platform)' == 'ReleaseExe|AnyCPU'">Exe</OutputType> 
    ```

保存，打开项目并使用批量构建来构建dll和exe

好处是您可以`Condition`在项目文件中的所有标签上使用该属性。我有一个项目，我需要根据不同的第 3 方程序集创建两个版本。为了解决这个问题，我只需向引用标签添加一个条件。

```
<Reference Include="3rdParty" Condition="'$(Configuration)|$(Platform)' == 'Release1|AnyCPU'">
    <HintPath>Release1\3rdParty.dll</HintPath>
</Reference>
<Reference Include="3rdParty" Condition="'$(Configuration)|$(Platform)' == 'Release2|AnyCPU'">
    <HintPath>Release2\3rdParty.dll</HintPath>
</Reference> 
```

# sql-server-2008 - 如果已安装 SQL Server，是否需要安装 SQL Express？

> ID：11011892
> 
> 赞同：0
> 
> 时间：2012-06-13T09:24:37.620
> 
> 标签：sql-server-2008

我有一台安装了 SQL Server 2008 R2 的服务器，但我的应用程序使用的是 SQL Express 2008 R2 - 我还需要安装 SQL Express 吗？我目前得到的错误是：

> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T09:29:36.573

您可以在 SQL Server 中创建数据库并使用正确的[连接字符串](http://connectionstrings.com/sql-server-2008)进行连接。但是，您不能像在 SQL Server express 中那样附加数据库文件。

无需安装 SQL Server Express。

连接到 SQL Server 的常用连接字符串是：

```
Data Source=yourServer;Initial Catalog=yourDatabase;Integrated Security=SSPI; 
```

替换`yourServer`为服务器名称（以 Server\instance 的形式）和`yourDatabase`您希望连接的数据库的名称。

SQL Server Express 的以下连接字符串不适用于标准 SQL Server：

```
Server=yourServer;AttachDbFilename=c:\data\yourDatabase.mdf;Database=yourDatabase; Trusted_Connection=Yes; 
```

# javascript - HighCharts 轴对齐

> ID：11011893
> 
> 赞同：2
> 
> 时间：2012-06-13T09:24:38.820
> 
> 标签：javascript, highcharts, highstock

我有一个带有 Y 轴和 X 轴的简单图表，默认情况下 X 轴显示在图表底部，如何定位并将其移动到图表顶部？

我查看了 API 参考，发现最接近的选项是“相反”选项，但这会将 2 个轴放在图表上，而我只想有一个位于图表顶部的轴。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T13:16:55.360

实际上，***相反***的选项是将 xAxis 移动到图表顶部所需的选项。这是一个按照您的需要工作的[**示例。**](http://jsfiddle.net/VNbLq/1/)如您所见，图表底部没有 xAxis 标签。

# c++ - 当涉及多个异常处理时，何时调用析构函数？

> ID：11011896
> 
> 赞同：2
> 
> 时间：2012-06-13T09:24:43.847
> 
> 标签：c++, exception-handling, destructor

在下面的代码中，如main()所示，在两种情况下都会抛出异常。

```
#include <iostream>

// Our own exception classes - just for fun.
class myExceptionClassA 
{
    public:
    myExceptionClassA () {std::cout << "\nWarning: Division by zero isn't allowed.\n";}
};

class myExceptionClassB
{
    public:
    myExceptionClassB () {std::cout << "\nWarning: Division by dividend isn't allowed.\n";}
};

class divisionClass
{
    private:
    int *result;

    public:
    divisionClass () 
    {
        // Allocating memory to the private variable.
        result = new int;
    }

    /* 
        The class function `doDivide`:
        1\. Throws above defined exceptions on the specified cases.
        2\. Returns the division result.
    */
    int doDivide (int toBeDividedBy) throw (myExceptionClassA, myExceptionClassB)
    {
        *result       = 200000;

        // If the divisor is 0, then throw an exception.
        if (toBeDividedBy == 0)
        {
            throw myExceptionClassA ();
        }
        // If the divisor is same as dividend, then throw an exception.
        else if (toBeDividedBy == *result)
        {
            throw myExceptionClassB ();
        }

        // The following code won't get executed if/when an exception is thrown.
        std :: cout <<"\nException wasn't thrown. :)";

        *result = *result / toBeDividedBy;
        return *result;
    }

    ~divisionClass () 
    {
        std::cout << "\ndddddddddd\n";
        delete result;
    }
};

int main ()
{
    divisionClass obj;
    try
    {
        obj.doDivide (200000);
    }
    catch (myExceptionClassA) {}
    catch (myExceptionClassB) {}

    try
    {
        obj.doDivide (3);
    }
    catch (myExceptionClassA) {}
    catch (myExceptionClassB) {}

    try
    {
        obj.doDivide (0);
    }
    catch (myExceptionClassA) {}
    catch (myExceptionClassB) {}

    try
    {
        obj.doDivide (4);
    }
    catch (myExceptionClassA) {}
    catch (myExceptionClassB) {}

    return 0;
} 
```

**- 两个异常类打印语句都被打印。
- 析构函数中的语句只打印一次。
- Valgrind 没有显示任何内存泄漏。**

```
anisha@linux-y3pi:~/Desktop> g++ exceptionSafe3.cpp -Wall
anisha@linux-y3pi:~/Desktop> valgrind ./a.out 
==18838== Memcheck, a memory error detector
==18838== Copyright (C) 2002-2009, and GNU GPL'd, by Julian Seward et al.
==18838== Using Valgrind-3.5.0 and LibVEX; rerun with -h for copyright info
==18838== Command: ./a.out
==18838== 

Warning: Division by dividend isn't allowed.

Exception wasn't thrown. :)
Warning: Division by zero isn't allowed.

Exception wasn't thrown. :)
dddddddddd
==18838== 
==18838== HEAP SUMMARY:
==18838==     in use at exit: 0 bytes in 0 blocks
==18838==   total heap usage: 3 allocs, 3 frees, 262 bytes allocated
==18838== 
==18838== All heap blocks were freed -- no leaks are possible
==18838== 
==18838== For counts of detected and suppressed errors, rerun with: -v
==18838== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 2 from 2)
anisha@linux-y3pi:~/Desktop> 
```

**析构函数不应该被调用 3 次 - 两次用于异常，一次用于 return 语句？**

请解释我所缺少的观点。

* * *

现在我通过删除 main() 中的所有 try catch 块来尝试它。
析构函数根本没有被调用？

```
anisha@linux-y3pi:~/Desktop> valgrind ./a.out 
==18994== Memcheck, a memory error detector
==18994== Copyright (C) 2002-2009, and GNU GPL'd, by Julian Seward et al.
==18994== Using Valgrind-3.5.0 and LibVEX; rerun with -h for copyright info
==18994== Command: ./a.out
==18994== 

Warning: Division by dividend isn't allowed.
terminate called after throwing an instance of 'myExceptionClassB'
==18994== 
==18994== HEAP SUMMARY:
==18994==     in use at exit: 133 bytes in 2 blocks
==18994==   total heap usage: 3 allocs, 1 frees, 165 bytes allocated
==18994== 
==18994== LEAK SUMMARY:
==18994==    definitely lost: 0 bytes in 0 blocks
==18994==    indirectly lost: 0 bytes in 0 blocks
==18994==      possibly lost: 129 bytes in 1 blocks
==18994==    still reachable: 4 bytes in 1 blocks
==18994==         suppressed: 0 bytes in 0 blocks
==18994== Rerun with --leak-check=full to see details of leaked memory
==18994== 
==18994== For counts of detected and suppressed errors, rerun with: -v
==18994== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 2 from 2)
Aborted
anisha@linux-y3pi:~/Desktop> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T09:29:55.870

从方法中抛出异常不会破坏拥有它的对象。只有当它被删除或超出范围时（在这种情况下，在 main() 的末尾），它才会被销毁并调用析构函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T10:33:11.847

当您捕获异常时，堆栈在抛出异常的点和捕获异常的点之间“展开”。这意味着这两个点之间范围内的所有自动变量都被破坏了——其中的所有内容都`try`对应于`catch`与异常匹配的内容。

您的对象`obj`是`main`函数中的自动变量，在`try`. 因此，当堆栈展开时，它不会被破坏。你的代码依赖于这个事实——在你第一次`catch`调用`doDivide`它之后，它最好不要被破坏。

如果您根本没有捕获异常，那么在程序终止之前堆栈是否展开（C++11 中的 15.3/9）是实现定义的。看起来好像在您的第二次测试中，没有任何`catch`子句，它不是。

这意味着如果您希望您的 RAII 对象“工作”，那么您不能在您的程序中允许未捕获的异常。您可以执行以下操作：

```
int main() {
    try {
        do_all_the_work();
    } catch (...) {
        throw; // or just exit
    }
} 
```

现在您可以保证，`do_all_the_work`如果异常转义函数，其中的任何自动变量都将被销毁。缺点是您可能从调试器中获得的信息较少，因为它忘记了未捕获异常的原始抛出位置。

当然，您的程序中的代码仍然可以防止您`obj`被破坏，例如通过调用`abort()`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-13T09:28:54.123

消息打印在 的析构函数中`divisionClass`。您只有一个该类型的对象，该对象在`main`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T10:40:58.997

`catch`当从抛出异常的点开始调用堆栈的某处有匹配的处理程序时，保证会发生堆栈展开。您可以像这样简化和可视化您的堆栈：

```
+-------------------+
| locals            | obj.doDivide()
+-------------------+
|                   | try {}
+-------------------+
| catch { }         |
|                   | main()
| DivisionClass obj |
+-------------------+ 
```

只有下面的堆栈部分（在上面的图片中）被展开并且相应的对象被销毁。带有 divisonClass 对象的堆栈部分保持不变，直到 main() 退出。

试试这段代码，看看有什么不同：

```
void foo()
{
    divisionClass obj;
    obj.doDivide(0);
}

int main()
{
    try {
        foo();
    }
    catch (myExceptionClassA) {
        std::cout << "Check point.\n";
    }
} 
```

# ios - 我表中的单行选择 n 反映回来

> ID：11011898
> 
> 赞同：0
> 
> 时间：2012-06-13T09:24:50.270
> 
> 标签：ios, uitableview, xcode4, uistoryboard

我想在我的表格视图中做一个选择这是我的代码任何帮助将不胜感激谢谢

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

{ // 选择逻辑会到这里在选中的国家旁边打勾

```
currentCategory = [[NSMutableArray alloc] init];

[tableView deselectRowAtIndexPath:indexPath animated:NO];
NSInteger catIndex = [countryList indexOfObject:self.currentCategory];
if (catIndex == indexPath.row) {
    return;
}
NSIndexPath *oldIndexPath = [NSIndexPath indexPathForRow:catIndex inSection:0];

UITableViewCell *newCell = [tableView cellForRowAtIndexPath:indexPath];
if (newCell.accessoryType == UITableViewCellAccessoryNone) {
    newCell.accessoryType = UITableViewCellAccessoryCheckmark;
    self.currentCategory = [countryList objectAtIndex:indexPath.row];
}

UITableViewCell *oldCell = [tableView cellForRowAtIndexPath:oldIndexPath];
if (oldCell.accessoryType == UITableViewCellAccessoryCheckmark) {
    oldCell.accessoryType = UITableViewCellAccessoryNone;
}

NSLog(@"the selected cell is %@",newCell);

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T18:08:02.357

当前类别是字符串而不是数组这里是它的正确代码

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

{

```
[tableView deselectRowAtIndexPath:indexPath animated:NO];

NSInteger genderIndex = [genderList indexOfObject:self.selectedGender];

if (genderIndex == indexPath.row) {
    return;
}

NSIndexPath *oldIndexPath = [NSIndexPath indexPathForRow:genderIndex inSection:0];

UITableViewCell *newCell = [tableView cellForRowAtIndexPath:indexPath];
if (newCell.accessoryType == UITableViewCellAccessoryNone) {
    newCell.accessoryType = UITableViewCellAccessoryCheckmark;
    self.selectedGender = [genderList objectAtIndex:indexPath.row];
}

UITableViewCell *oldCell = [tableView cellForRowAtIndexPath:oldIndexPath];
if (oldCell.accessoryType == UITableViewCellAccessoryCheckmark) {
    oldCell.accessoryType = UITableViewCellAccessoryNone;
}

NSLog(@"the selected cell is %@",selectedGender); 
```

}

# perforce - 在 perforce 中更改更改列表列表的描述

> ID：11011902
> 
> 赞同：1
> 
> 时间：2012-06-13T09:25:03.020
> 
> 标签：perforce

我想在更改列表列表中添加一个通用描述，到目前为止我尝试了这个

```
p4 changelist -o >changelist.txt
notepad changelist.txt 
```

将所需的描述放入 changelist.txt

`p4 changelist -i`附加来自 changelist.txt 的描述

但它只会将 chnagelist.txt 中的文本附加到单个更改列表中，我想做的是将相同的描述附加到更改列表列表中任何想法如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:01:18.920

将您的“changelist -i”命令放入您最喜欢的脚本语言的“for”循环中，遍历您希望更新的所有变更列表编号。

# c# - 在 Facebook C# SDK 示例中未检索到会话

> ID：11011913
> 
> 赞同：1
> 
> 时间：2012-06-13T09:25:33.727
> 
> 标签：c#, asp.net, facebook, facebook-graph-api, facebook-c#-sdk

我是 ASP.net 编程的新手。这是对 Facebook C# SDK 的参考，我已经设法设置了在此 SDK 上进行身份验证所需的所有步骤。但是，我不断从以下代码中获得空值：

（参考：[http](http://csharpsdk.org/docs/web/getting-started#5) ://csharpsdk.org/docs/web/getting-started#5 ）

```
var accessToken = Session["AccessToken"].ToString(); //This line returns null and crashes
var client = new FacebookClient(accessToken);
dynamic result = client.Get("me", new { fields = "name,id" });
string name = result.name;
string id = result.id; 
```

就像在示例中一样，我设置了一个通用处理程序来设置要存储在 HttpContext.Session 对象中的会话变量。

我什至尝试修改违规行以直接访问 HttpContext 并检索访问令牌：

```
var accessToken = HttpContext.Current.Session["AccessToken"].ToString(); 
```

但这产生了相同的结果。

我是否错过了 webconfig 中的某些内容，或者在从处理程序转移到登录页面时是否有其他方法可以存储访问令牌？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T20:37:20.447

确保在您的 Facebook 开发人员设置中，您没有为您的应用选择查询字符串作为身份验证令牌参数！！！

这是默认模式，除非您执行以下操作，否则它将不起作用：

[http://developer.facebook.com](http://developer.facebook.com)

打开您的应用页面。

然后转到 Settings --> Auth Dialog --> Auth Token Parameter 并选择 URI Fragment。

100% 确定这是你的问题。它没有包含在我找到的任何文献中，真是太可惜了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T09:41:16.757

如果它返回 null 那么我会假设 Session 值没有被设置 - 你是否调试过以确保设置会话的代码被命中？

查看链接的文章-它使用 HttpHandler 来执行此操作，但没有提及在 Web.Config 中注册它的任何内容-您这样做了吗？如果看不到这里[http://msdn.microsoft.com/en-us/library/46c5ddfy.aspx](http://msdn.microsoft.com/en-us/library/46c5ddfy.aspx)

# c# - 在 C# 中将 EXIF 信息添加到图像

> ID：11011915
> 
> 赞同：17
> 
> 时间：2012-06-13T09:25:58.523
> 
> 标签：c#, .net, winforms, image, graphics

我想为作者、相机型号、日期等图像添加基本的 exif 信息。有没有办法使用内置类而不使用其他外部库来做到这一点。JPEG、PNG、TIFF、BMP、GIF 等图像格式是否支持所有 EXIF 字段。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-13T09:58:58.520

`System.Drawing``PropertyItems`允许使用/修改图像属性`SetPropertyItem`。可以在[此处](http://social.msdn.microsoft.com/Forums/uk/netfxbcl/thread/71d8de37-f52d-4faa-887a-793f8041110a)找到示例。

但是这种访问是非常基本的，并且周围有很多库（例如，请参见[如何在 .NET 中编辑 EXIF 数据](https://stackoverflow.com/questions/226973/how-to-edit-exif-data-in-net)）。所以我想知道这是否值得麻烦。

毕竟，根据[Wikipedia](http://en.wikipedia.org/wiki/Exchangeable_image_file_format) ，只有 JPEG 和 TIFF 文件支持 EXIF 元数据。

# ios - iOS 应用程序中显示的第一个 Firemonkey 表单未完全绘制

> ID：11011918
> 
> 赞同：3
> 
> 时间：2012-06-13T09:26:03.983
> 
> 标签：ios, delphi, delphi-xe2, firemonkey

![在此处输入图像描述](../Images/ec8545175c96618c09d2b249c6f410ad.png)我正在使用 Firemonkey 创建一个 iOS 应用程序。显示的第一个表单（主菜单）似乎在模拟器和设备上均未完成。例如，我在底部得到一个黑条，而不是背景色。也许表单大小是这里的问题。我在单击按钮时加载的所有其他表单都已完全绘制。

还有其他人遇到这个问题吗？

编辑：附上截图。下部黑色区域应该也是灰色的。

# mysql - MySQL中没有选择数据时如何查看所有数据并用字符串替换

> ID：11011924
> 
> 赞同：0
> 
> 时间：2012-06-13T09:26:20.470
> 
> 标签：mysql, sql

当我为所有组放置创建字符表示时，我无法查看所有数据。我的表中有字段组。该字段有`id`1、2、3、4，我也放了case语句。当我放`id`1时，结果将是`group1`等等。我想要的是当我放置角色时`'A'`。然后将显示组中的所有数据。怎么做？我不知道。

这是我的代码：-

```
select case when a.group='1' then 'group1'
    when a.group='2' then 'group2'
    when a.group='3' then 'group3'
    when a.group='4' then 'group4'
    when a.group='A' then 'ALL GROUP'
    end as group
from kumpulan a
where (a.group = &GROUP or &GROUP = 'A') 
```

如果 Group='A' 然后在 4 行中显示 'Group 1','Group 2','Group 3','Group 4'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T09:32:03.583

如果问题出在“组”列中，您应该将 a.group by &GROUP 更改为：

```
select 
  case when &GROUP='1' then 'group1' 
  when &GROUP='2' then 'group2' 
  when &GROUP='3' then 'group3' 
  when &GROUP='A' then 'ALL GROUP' 
  end as group 
from 
 kumpulan a 
where (a.group = &GROUP or &GROUP = 'A') 
```

我认为这个查询是您真正的大查询的摘要，可能类似于：

```
select 
  case when &GROUP='1' then 'group1' 
  when &GROUP='2' then 'group2' 
  when &GROUP='3' then 'group3' 
  when &GROUP='A' then 'ALL GROUP' 
  end as `group` ,
  sum( some_column ) as total
from 
 kumpulan a 
where (a.group = &GROUP or &GROUP = 'A')
group by `group` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T09:35:32.230

```
 select case 'A' when a.group='1' then 'group1' when a.group='2' then 'group2' when a.group='3' then 'group3' when a.group='A' then 'ALL GROUP' end as group from kumpulan a where (a.group = &GROUP or &GROUP = 'A'); 
```

示例：

```
 SELECT CASE 1 WHEN 1 THEN 'one' WHEN 2 THEN 'two' ELSE 'more' END;
    -> 'one' 
```

# java - 如何在Scala中子类化异常

> ID：11011926
> 
> 赞同：2
> 
> 时间：2012-06-13T09:26:28.307
> 
> 标签：java, scala

> **可能重复：**
> [在 scala 中使用重载的构造函数定义自己的异常](https://stackoverflow.com/questions/10925268/define-your-own-exceptions-with-overloaded-constructors-in-scala)

我想编写一个 Scala 异常类，它是 Java Exception 类的子类，并提供类似的构造函数（每个构造函数都调用相应的 Exception ctor。即，我将如何编写这个 Java 类的 Scala 等价物：

```
public class MyException extends java.lang.Exception {
    public MyException () {
    }

    public MyException (String msg) {
        super(msg);
    }

    public MyException (Throwable e) {
        super(e);
    }

    public MyException (String msg, Throwable cause) {
        super(msg, cause);
    }
} 
```

这似乎与[这个问题](https://stackoverflow.com/questions/2841522/passing-dependent-objects-to-a-parent-constructor-in-scala)有关，但是其中的答案并不令人满意（因为实际上没有定义子类）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T12:26:14.930

使用默认值（null）怎么样？

```
class YourException (msg:String=null, cause:Throwable=null)
  extends java.lang.Exception (msg, cause) {} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T10:26:40.920

这种每个调用超类构造函数的重载构造函数的情况是我所知道的 Scala 无法生成与 Java 等效的字节码的唯一情况。在 Scala 中，必须调用主构造函数。可以定义辅助构造函数，但它们只能调用主构造函数。

我认为 Scala 方式要好得多，但这确实意味着无法定义异常类的精确等价物。这在实践中从来没有给我带来过问题，因为您可以将 null 或其他一些默认值传递给最通用的超类构造函数。

# iphone - iOS 中的资产库问题 - 5

> ID：11011928
> 
> 赞同：1
> 
> 时间：2012-06-13T09:26:33.730
> 
> 标签：iphone, objective-c, ios5, uiimagepickercontroller, alassetslibrary

我正在使用资产库从 url 获取图像，我的代码是

```
ALAssetsLibraryAssetForURLResultBlock resultblock = ^(ALAsset *myasset){     
    ALAssetRepresentation *rep = [myasset defaultRepresentation];
    CGImageRef iref = [rep fullResolutionImage];
    UIImage *largeimage;

    if (iref) {
        largeimage = [UIImage imageWithCGImage:iref];
    }

    [self customeButtonCreated:self];

    NSData* thumbImageData = [[NSData alloc] initWithContentsOfFile:imagePath];
    btn1.frame = CGRectMake(x, y, WIDTH, HEIGHT);
    [btn1 setTag:tag];

    //[media_id addObject:[allKey objectAtIndex:0]];     
    [btnURl addObject:imagePath];

    UIImage *tempImage = [[UIImage alloc]initWithData:thumbImageData];
    [btn1 setImage:largeimage forState:UIControlStateNormal];
    btn1.imageView.contentMode = UIViewContentModeScaleAspectFit;           
    [tempImage release];

    [newView addSubview:btn1];
    [btn1 addTarget:self action:@selector(btnClicked:) forControlEvents:UIControlEventTouchUpInside];
    [thumbImageData release];

    imgcount++;

    NSLog(@"Iamge count ---%d",imgcount);
    tag++;
};

ALAssetsLibraryAccessFailureBlock failureblock  = ^(NSError *myerror){
    NSLog(@"Cannot get image - %@",[myerror localizedDescription]);
};

if ([seprateArr count] == 2) {
    NSURL *url=[NSURL URLWithString:[NSString stringWithFormat:@"assets-library://asset/asset.JPG?id=%@&ext=%@",[seprateArr objectAtIndex:0],[seprateArr objectAtIndex:1]]];
    ALAssetsLibrary* assetslibrary = [[[ALAssetsLibrary alloc] init] autorelease];
    [assetslibrary assetForURL:url resultBlock:resultblock failureBlock:failureblock];
} 
```

它在 ios - 4 或更低版本中工作正常，但在 ios - 5 中它没有进入块并显示错误

> **无法获取图像 - 全局拒绝访问**

有什么解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T09:55:21.873

这适用于我在 ios 4.0 和 ios 5 中。

```
ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];
NSString *photoName;
NSString *photoUrl;

 NSAutoreleasePool *pool = [[NSAutoreleasePool alloc]init];
    void (^assetEnumerator)(ALAsset *, NSUInteger, BOOL *) = ^(ALAsset *result, NSUInteger index, BOOL *stop) 
    {
        if(result != NULL) 
        {
            NSArray *arrKeys = [[result valueForProperty:ALAssetPropertyURLs]allKeys];             
            if([[result valueForProperty:ALAssetPropertyType]isEqualToString:ALAssetTypePhoto])
            {
                if([[UIDevice currentDevice] systemVersion]>=5.0))
                {
                    photoName = [[result defaultRepresentation]UTI];

                }
                else
                {
                    photoName = [[result defaultRepresentation]filename];

                }
                //Your code here
                photoUrl = [[result valueForProperty:ALAssetPropertyURLs]objectForKey:[arrKeys objectAtIndex:0]];

            }
        }
    };

    void (^assetGroupEnumerator)(ALAssetsGroup *, BOOL *) =  ^(ALAssetsGroup *group, BOOL *stop) 
    {
        if(group != nil) 
        {
            [group enumerateAssetsUsingBlock:assetEnumerator];
        }
    };
    [library enumerateGroupsWithTypes:ALAssetsGroupAll usingBlock:assetGroupEnumerator failureBlock:^(NSError *error){
        NSLog(@"%@",error);
    }];

    [pool release]; 
```

# java - JTable：如何在删除完成之前检测列插入？

> ID：11011930
> 
> 赞同：0
> 
> 时间：2012-06-13T09:26:43.830
> 
> 标签：java, swing, drag-and-drop, jtable

我有一个可以删除组件的 JTable。其中一些组件只能作为表中的插入删除（因此不能在已经存在的单元格上）。

我的问题是如何禁止放置这些组件的单元格。我试过类似的东西：

```
JTable table = new JTable();
table.setDropMode(DropMode.ON_OR_INSERT_COLS);
table.setTransferHandler(new ExampleTransferHandler());
boolean onlyColumnInsert = true;

private class ExampleTransferHandler extends TransferHandler{
    public boolean canImport(TransferSupport support){
        if(onlyColumnInsert){
            return table.getDropLocation().isInsertColumn();
        }else{
            return true;
        }
    }
} 
```

但这不起作用，因为 isInsertColumn() 仅在放置完成后设置。有没有其他方法可以检测删除是否会导致从 TransferHandler 中的 canImport() 方法插入列？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T09:49:18.050

通过将 TransferSupport 携带的 DropLocation 转换为 JTable.DropLocation，我找到了解决此问题的方法：

```
private class ExampleTransferHandler extends TransferHandler{
  public boolean canImport(TransferSupport support){
    if(onlyColumnInsert){
        return ((JTable.DropLocation)support.getDropLocation()).isInsertColumn();
    }else{
        return true;
    }
  }
} 
```

# javascript - 响应式画廊

> ID：11011938
> 
> 赞同：7
> 
> 时间：2012-06-13T09:27:29.960
> 
> 标签：javascript, jquery, galleria

我正在尝试在其响应模式下使用此插件[Galleria](http://galleria.io/)，这基本上意味着它将根据其容器大小在窗口重新调整大小时重新绘制自己。我提供的链接上的演示显示了一个非常好的示例。您可以看到，当您调整窗口大小时，整个画廊也会相应调整。现在我的问题是，除非为用作容器的 DOM 元素指定了高度，否则插件不会让我初始化图库。这意味着，我不得不编写大量的 javascript 代码来响应窗口调整大小 - 它相当多地破坏了它具有响应模式的意义 - 但是在上面的网站中，我找不到明确的高度指定。有人可以向我解释我要去哪里错了吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-14T05:57:38.343

我自己想通了。发布我的答案-

初始化图库时 - 以百分比指定您的高度 - 如下所示。我猜在这种情况下它需要 50% 的窗口高度作为它的值。这样，您无需在任何地方明确指定高度，它就可以像宣传的那样工作

```
Galleria.run('#gallery', {responsive:true, height:0.5, debug:false}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-31T10:58:15.570

Galleria 需要一个高度才能正确初始化。您可以通过 CSS 或 JS 执行此操作。

如果您希望它填充屏幕的宽度和高度，我建议您通过 CSS 将宽度和高度设置为 100%。**并且**它的父容器需要是 100%。见下文。

```
**JS:**
Galleria.run('#galleria', {
  responsive:true,
  showCounter:true,
  thumbnails:false,
  trueFullscreen:true,
});

**CSS:**
#galleria{
  width:100%;
  height: 100%;
  position: fixed;
  z-index: 9999;
  top:0px;
  bottom: 0px;
}
body,html{
   height:100%;
   width:100%;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T18:25:20.160

高度选项（如果它 < 2.0）是相对于容器的宽度的。所以`height:0.5`会有一个高度是容器宽度的一半（w = 2，h = 1）。

`height:1.5`将导致 (w=2, h=3)

为了保持响应，您可以使用`max-width`而不是`width`在为容器设置样式时使用。

如果 height 选项设置为 2.0 或更高，则将其解释为像素。所以`height:2.0`只有 2px 高。

# java - java树集抛出非法ArgumentException：键超出范围

> ID：11011939
> 
> 赞同：6
> 
> 时间：2012-06-13T09:27:37.977
> 
> 标签：java, illegalargumentexception, treeset

我已经剥离了代码以重现引发错误的示例：

```
public class Test {
  public static void main(String[] args) {
    NavigableSet<String> set = new TreeSet<String>(
            Arrays.asList("a", "b", "c", "d"));
    NavigableSet<String> set2 = new TreeSet<String>();
    set2 = set.tailSet("c", false);
    set2.addAll(set.headSet("b", true));
    System.out.println(set2);
  }
} 
```

代码的目的是在检索集合的子集时实现某种翻转。例如，在上述情况下，我想要从 c [exclusive] 到 b [inclusive] 的所有元素。我注意到，如果我注释掉 tailSet() 或 headSet() 行，其余代码运行良好。但是，当我有两条线时，我得到

> java.lang.IllegalArgumentException：键超出范围

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T09:32:32.297

尝试这样的事情：

```
 public static void main(String[] args) {
        NavigableSet<String> set = new TreeSet<String>(
                Arrays.asList("a", "b", "c", "d"));
        NavigableSet<String> set2 = new TreeSet<String>();
        set2.addAll(set.tailSet("c", false));
        set2.addAll(set.headSet("b", true));
        System.out.println(set2);
  } 
```

当你这样做

```
set2 = set.tailSet("c", false); 
```

您实际上失去了对`TreeSet`您创建的新的引用并获得返回的`SortedSet`引用。`set.tailSet`

# linux - perl while 循环

> ID：11011940
> 
> 赞同：0
> 
> 时间：2012-06-13T09:27:42.110
> 
> 标签：linux, perl

在此代码中，我解析一个文件（包含来自 的输出`ls -lrt`）以获取日志文件的修改日期。然后我将所有日志文件移动到一个新文件夹中，并将它们的修改日期添加到文件名中，然后对所有这些文件进行 tar。

我遇到的问题是在`while`循环中。因为它正在读取所有文件的数据，所以 while 循环会继续运行 15 次。我知道代码中存在一些问题，但我无法弄清楚。

在 while 循环中，我正在拆分`ls -lrt`记录以查找日志文件的修改日期。是我存储在文本文件中以获取修改日期`$file`的命令的输出。但是循环执行了 15 次，因为文件夹中有 15 个与模式匹配的日志文件。`ls``/scripts/yagya.txt``while`

```
#!/usr/bin/perl
use File::Find;
use strict;

my @field;
my $filenew;
my $date;
my $file = `ls -lrt /scripts/*log*`;
my $directory="/scripts/*.log";
my $current = localtime;
my $current_time = $current;
$current_time = s/\s+//g;
my $freetime = $current_time;
my $daytime = substr($current_time,0,8);
my $seconddir = "/$freetime/";

system ("mkdir $seconddir");

open (MYFILE,">/scripts/yagya.txt");
print MYFILE "$file";
close (MYFILE);

my $data = "/scripts/yagya.txt";
my $datas = "/scripts/";
my %options = (
    wanted => \&wanted,
    untaint => 1
);

find (\%options, $datas);
sub wanted {
    if (/[._]log\d*$/){
        my $files;
        my @fields;
        my $fields;
        chomp;
        $files=$_;

        open (MYFILE,$data);
        while(<MYFILE>){
            chop;
            s/#.*//;
            next unless /\S/;
            @fields = (split)[5,6,7];
            $fields = join('',@fields), "\n";
        }
        close (MYFILE);

        system ("mv  $files $seconddir$fields$files");
    }
}

system ("tar cvf /$daytime/$daytime.tar.gz /$daytime/*log*");
system ("rm $seconddir*log*");

system ("rm $data"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T10:35:24.013

您的代码很难阅读。看起来您在开始测试之前已经将程序编写为一个大块。这种工作方式很常见，但非常错误。您应该首先实现程序的一小部分并对其进行测试，然后再添加更多功能，再次测试，等等。这样一来，您就不会因为在未经测试的大型程序中一次解决许多问题而不知所措。

`use warnings`如果您将其添加到`use strict`程序顶部，它也会对您有很大帮助。它有助于捕获您可能忽略的简单错误。

另外，您是否知道每次遇到文件时`File::Find`都会调用您的回调子例程？`wanted`它不会一次传递所有文件。

`yagya.txt`问题似乎是当您找到与已找到的当前文件匹配的记录时应该停止时，您正在阅读整个文件`File::Find`。您需要做的是检查`ls`输出中的当前记录是否以当前文件的名称结尾。如果你这样写循环

```
while (<MYFILE>) {
  if (/\Q$files\E$/) {
    my @fields = (split)[5,6,7];
    $fields = join('',@fields);
    last;
  }
} 
```

然后`$fields`将以当前文件的修改日期结束，这就是您想要的。

**但是**，如果您使用 Perl 为您读取文件修改日期，这将容易上千倍。

而不是将`ls`列表写入文件并将其读回，您应该执行以下操作

```
use File::stat;

my $mtime = localtime(stat($files)->mtime); 
```

这会给你一个像`Wed Jun 13 11:25:23 2012`. 我`ls`输出的日期仅包括月份名称、月份日期和时间，例如`Jun 8 12:37`. 这不是很具体，您可能至少应该包括一年，但是要从中生成相同的字符串，`$mtime`您可以编写

```
my $fields = join '', (split ' ', $mtime)[1,2,3]; 
```

关于你的程序，我还有很多话要说，但我希望这能让你暂时顺利进行。

* * *

我注意到的另外几件事：

*   该行`$current_time = s/\s+//g`应该是`$current_time =~ s/\s+//g`从当前时间字符串中删除所有空格

*   像这样的值`Sun Jun 3 11:50:54 2012`将被缩减为`SunJun311:53:552012`，然后`$daytime`将取`SunJun31`不正确的值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T13:37:08.257

我通常不建议使用 bash 代替 perl，但有时它要短得多

这个问题有两个部分：

1.  将文件重命名到另一个目录并在文件名中添加时间戳
2.  每隔几分钟或几小时，几天...等存档它们。

为 1。）

```
 find ./scripts -name \*[_.]log\* -type f  -printf "%p\0./logs/%TY%Tm%Td-%TH%Tk%TM-%f\0" | xargs -0 -L 2 mv 
```

上面将找到所有名称中带有 [_.]log 的普通文件，并将它们重命名为`./logs`带有时间戳前缀的目录。例如

```
./scripts/aaa.log12 get renamed into ./logs/20120403-102233-aaa.log12 
```

2.) 归档

```
ls logs | sed 's/\(........-....\).*/\1/' | sort -u | while read groupby
do
    ( cd logs && echo tar cvzf ../$groupby.tgz $groupby* )
done 
```

这将通过时间戳前缀创建 tar 档案。（假设`./logs`仅包含具有有效（时间戳）文件名的文件）

当然，上面的 sed 模式不是很好，但清楚地显示了`seconds`从时间戳中删除 - 所以它是按分钟创建档案。如果想要另一个分组，您可以使用：

```
sed 's/\(........-..\).*/\1/'  - by hours
sed 's/\(........\).*/\1/' - by days 
```

其他：

*   仅在 gnu 版本的`-printf`find 中支持 for find - 在 Linux 中很常见
*   通常不是直接在“/”中工作的好习惯，例如`/scripts`，因此我的示例使用`./`
*   如果在您的 ./scrips 子树中存在具有相同时间戳的相同文件名，则 mv 将覆盖第一个，例如具有相同时间戳的 ./scripts/a/a.log 和 ./scripts/x/a.log 将重命名为 ./logs/TIMESTAMP-a.log

# .net - 使用 linq2xml 订购 xml 文件

> ID：11011941
> 
> 赞同：2
> 
> 时间：2012-06-13T09:27:42.143
> 
> 标签：.net, xpath, linq-to-xml

以下问题[Filter xml with LINQ2XML](https://stackoverflow.com/questions/11006160/filter-xml-with-linq2xml)

从 xml 文件中成功过滤（删除节点）后。我想按节点中的某些属性排序。

xml文件示例：

```
<Root> 
   <Group Price="50"> 
       <Item Price="60"/> 
       <Item Price="50"/> 
       <Item Price="70"/> 
   </Group> 
   <Group Price="55"> 
       <Item Price="62"/> 
       <Item Price="57"/> 
       <Item Price="55"/> 
   </Group> 
   <Group Price="61"> 
       <Item Price="62"/> 
       <Item Price="61"/> 
       <Item Price="65"/> 
    </Group> 
    <!--More Group Nodes-->  
</Root> 
```

我想得到：

```
<Root> 
   <Group Price="61"> 
       <Item Price="65"/> 
       <Item Price="62"/> 
       <Item Price="61"/> 
    </Group> 
    <Group Price="55"> 
       <Item Price="62"/> 
       <Item Price="57"/> 
       <Item Price="55"/> 
   </Group> 
   <Group Price="50"> 
       <Item Price="70"/> 
       <Item Price="60"/> 
       <Item Price="50"/> 
   </Group> 
   <!--More Group Nodes-->  
</Root> 
```

我当前的代码是（混合 LINQ2Xml 和 XPATH）：

```
'First I remove Group nodes with prices higher than 60 (and their sons).

dim filter as String="./Root/Group[not(translate(@Price, ',.', '.')<=60})]"

elements = doc.XPathSelectElements(filter).OrderByDescending((Function(x) CType(x.Attribute("Price"), Decimal)))

'Remove elements what don't fullfill the condition  (prices higher than 60)                   
elements.Remove()

'After I remove Item nodes with prices higher than 60

filter as String="./Root/Group/Item[not(translate(@Price, ',.', '.')<=60})]"

elements = doc.XPathSelectElements(filter).OrderByDescending((Function(x) CType(x.Attribute("Price"), Decimal)))

'Remove elements what don't fullfill the condition  (prices higher than 60)
 elements.Remove() 
```

正如我之前所说，我过滤成功但我无法订购（在这种情况下下降）。有没有办法一步订购组节点和项目节点，或者我必须分两步完成？

有人告诉我使用 XDocument 的 replaceNodes，但我没有得到任何结果。

再次感谢您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T02:05:20.533

如果要对组进行降序排序，则可以使用 LINQ 和 OrderByDescending。

```
XDocument doc = XDocument.Parse("<Root>  <Group Price=\"50\">  <Item Price=\"60\"/>  <Item    Price=\"50\"/>  <Item Price=\"70\"/>  </Group>  <Group Price=\"55\">  <Item Price=\"62\"/>  <Item Price=\"57\"/>  <Item Price=\"55\"/>  </Group>  <Group Price=\"61\">  <Item Price=\"62\"/>  <Item Price=\"61\"/> <Item Price=\"65\"/>  </Group>  <!--More Group Nodes-->   </Root>  ");

IEnumerable<XElement> list = doc.Elements()
                                .Elements("Group")
                                .OrderByDescending(p => Convert.ToInt32(p.Attribute("Price").Value)); 
```

# facebook-graph-api - 如何将 Facebook 的使用限制为仅在博物馆/科学中心信息亭站共享内容

> ID：11011950
> 
> 赞同：3
> 
> 时间：2012-06-13T09:28:17.540
> 
> 标签：facebook-graph-api, login, popup, kiosk, restrictions

所以我们在一个科学中心设置了一些装置，最终结果是图像和视频，它们被上传到一个可以从外部（网络）访问的服务器。用户可以从某个特定的信息亭站浏览他们的资料，并且应该能够直接分享到他们的 Facebook 页面。我们使用当前工作的 API 进行了这项工作，并显示了登录弹出窗口，人们可以登录然后共享它。

我们的问题是登录弹出框也有一些不需要的功能，这使您最终进入 facebook 系统本身。这对中心不利，因为他们不希望这里成为网络浏览站。

所以，我的问题是：我如何才能允许人们登录并分享特定内容，而不允许他们进一步浏览 Facebook 网站？我可以掩盖弹出框中的“关于”链接，或者以其他方式解决这个问题吗？

感谢您的任何建议。

# javascript - 无法从内部关闭 Jquery 对话框

> ID：11011951
> 
> 赞同：0
> 
> 时间：2012-06-13T09:28:21.300
> 
> 标签：javascript, jquery

我试图从内部关闭一个 Jquery 对话框，但它不起作用。

我已经使用了我能找到的所有关闭变体，但没有一个工作。

该对话框是从主页调用的。当我按下对话框上的提交按钮时，会发布一个表单（这一切都很好），但关闭事件不会触发。

```
 $(document).ready(function() {

            $("#eventForm").submit(function(e) {

                alert("HELLO");
                //Cancel the link behavior
                e.preventDefault();

                if(document.eventForm.title.value == ""){
                    alert("<?php echo $lang['titlemissing'] ?>");
                    return;
                }

                if(document.eventForm.activity.value == ""){
                    alert("<?php echo $lang['activitymissing'] ?>");
                    return;
                }

                var url = "calendar/eventsubmit.php<?php echo $qstr ?>";

                 $.post(
                 "calendar/eventsubmit.php<?php echo $qstr ?>",
                 $(this).serialize(),
                    function(data){
                          alert("closing");  
                           }   
                  );   
                  // NONE of the work ???
                  $(this).closest('.ui-dialog').dialog('close'); 
                  $(this).closest('#dialog').dialog('close');
                  $(this).closest('.ui-dialog-content').dialog('close');
                  $(this).dialog('destroy');
                  $(this).dialog('close');
                  $(this).closest('#dialog').close();
          $('#dialog').dialog('close');

            });
        }); 
```

DOM 确实包含 ui-dialog 和 ui-dialog-content 元素。

```
<div tabindex="-1" class="ui-dialog ui-widget ui-widget-content ui-corner-all ui-draggable ui-resizable" role="dialog" aria-labelledby="ui-dialog-title-dialog" style="z-index: 1004; >
<div class="window ui-dialog-content ui-widget-content" id="dialog" style="min-height: 0px; width: auto; display: block; height: 105px;"> 
```

**编辑**

经过大量的调整，它现在可以工作了。重点是，我没有包含 jquery-custom css。相反，我使用了我自己的 css，其中还有一个 ui-dialog 元素。我不确定这是否是解决此问题的方法。但这是我最好的猜测。

这是最终代码。

```
<script>
        // submit the event (add, update)
        $(document).ready(function() {

            $("#eventForm").submit(function(e) {

                //Cancel the link behavior
                e.preventDefault();

                if(document.eventForm.title.value == ""){
                    alert("<?php echo $lang['titlemissing'] ?>");
                    return;
                }

                if(document.eventForm.activity != undefined){

                    if(document.eventForm.activity.value == ""){
                    alert("<?php echo $lang['activitymissing'] ?>");
                    return;
                    }
                }       

                 $.post(
                 "calendar/eventsubmit.php<?php echo $qstr ?>",
                 $(this).serialize()); 

                 //close current dialog
                $(this).closest('.ui-dialog-content').dialog('close');
                // show OK

                $("#dialog").load("calendar/actionsuccess.php", function(){
                        $('#dialog').dialog({
                        title : 'Success',
                        autoResize : true,
                        width: 'auto',
                        close: function(event, ui) { window.location.href = "calendar.php"; }
                        })
                    });

            });
        });
    </script> 
```

谢谢，科恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-12T04:27:34.627

试试这个它会触发对话框标题中的关闭按钮事件。

这对我来说很好，可以关闭对话框

```
function btnClose() {
$(".ui-dialog-titlebar-close").trigger('click');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T09:35:52.013

如果您将对话框关闭代码放在完成回调中：

```
function(data) {
    alert("closing");
    // .dialog('close') here  
} 
```

然后`this`不再引用表单，它将是 jQuery 提供的任何上下文。

您应该创建原件的副本，`this`然后参考：

```
var form = this;
...

$.post(..., function(data) {
    ...
    $(form).closest('.ui-dialog-content').dialog('close');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T09:40:21.693

你试过这个

> $('.ui-dialog').hide();

# c++ - 与锁相比，原子/互锁变量有多快，无论是否存在争用？

> ID：11011953
> 
> 赞同：9
> 
> 时间：2012-06-13T09:28:26.153
> 
> 标签：c++, multithreading, performance, x86-64, thread-synchronization

`std::atomic<T>`与无争议的原子变量（例如C++）操作相比，它快/慢多少。

另外，有争议的原子变量相对于无争议的锁要慢多少？

我正在研究的架构是 x86-64。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-13T09:54:50.350

我碰巧有很多低级速度测试。但是，速度的确切含义是非常不确定的，因为它在很大程度上取决于您到底在做什么（甚至与操作本身无关）。

以下是 AMD 64 位 Phenom II X6 3.2Ghz 的一些数字。我也在英特尔芯片上运行过它，而且时间确实有很大差异（同样，取决于正在做的事情）。

一个 GCC `__sync_fetch_and_add`，这将是一个完全隔离的原子加法，平均为 16ns，最短时间为 4ns。最短时间可能更接近事实（尽管即使在那里我也有一些开销）。

一个无争议的 pthread 互斥体（通过 boost）是 14ns（这也是它的最小值）。请注意，这也有点太低了，因为如果其他东西锁定了互斥体，但它现在不是没有争议的（因为它会导致缓存同步），时间实际上会增加。

失败的 try_lock 为 9ns。

我没有一个普通的旧原子公司，因为在 x86_64 上这只是一个正常的交换操作。可能接近最小可能时间，所以 1-2ns。

在条件变量上调用没有服务员的通知是 25ns（如果有东西在等待大约 304ns）。

然而，由于所有锁都会导致某些 CPU 排序保证，因此您已修改的内存量（无论适合存储缓冲区的内存量）将改变此类操作所需的时间。很明显，如果您曾经对互斥锁发生争用，那是您最糟糕的时刻。即使实际上没有发生线程切换，任何返回到 linux 内核的时间都可能是数百纳秒。这通常是原子锁表现不佳的地方，因为它们不涉及任何内核调用：平均情况下的性能也是最差的情况。如果有等待线程，互斥锁解锁也会产生开销，而原子则不会。

* * *

注意：做这样的测量充满了问题，所以结果总是有问题的。我的测试试图通过固定 CPU 速度、设置线程的 cpu 亲和性、不运行其他进程以及对大型结果集进行平均来最小化变化。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-13T10:56:47.797

GitHub 上有一个[项目，](https://github.com/klmr/guesstimate)目的是在不同平台上进行测量。不幸的是，在我的硕士论文之后，我从来没有真正有时间跟进这个，但至少基本代码在那里。

`__sync_fetch_and_add`与内在相比，它测量 pthread 和 OpenMP 锁。

据我所知，我们预计锁和原子操作之间会有相当大的差异（〜一个数量级），但实际差异却非常小。

然而，现在在我的系统上测量得到的结果反映了我最初的猜测，即（无论使用 pthread 还是 OpenMP）原子操作的速度大约快五倍，单个锁定增量操作大约需要 35ns（这包括获取锁） ，执行增量，并释放锁）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-13T09:48:18.507

取决于锁的实现，也取决于系统。原子变量不能以与锁相同的方式真正受到竞争（即使您使用[的是获取释放语义](http://msdn.microsoft.com/en-us/library/windows/hardware/ff540496%28v=vs.85%29.aspx)），这就是原子性的全部意义，它锁定总线以传播存储（取决于内存屏障模式），但这是一个实现细节。

但是，大多数用户模式锁只是封装了原子操作，请参阅Intel 的[这篇](http://software.intel.com/en-us/articles/implementing-scalable-atomic-locks-for-multi-core-intel-em64t-and-ia32-architectures/)文章，了解有关在 x86 和 x64 下使用原子操作的高性能、可扩展锁的一些数据（`CriticalSection`不幸的是，与 Windows 的锁相比，没有找到[SWR](http://msdn.microsoft.com/en-us/library/windows/desktop/aa904937%28v=vs.85%29.aspx)锁定，但应始终为自己的系统/环境配置文件）。

# clojure - 令人费解的 ClojureScript 错误

> ID：11011959
> 
> 赞同：5
> 
> 时间：2012-06-13T09:28:46.033
> 
> 标签：clojure

## 代码

```
(defn sprintf [& args]
  (with-out-str
    (apply printf args)
    *out*)) 
```

## 错误

```
(Chrome)

Uncaught TypeError: Cannot read property 'cljs$lang$maxFixedArity' of undefined 
```

## 问题：

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-07-24T10:49:25.423

错误：

```
Uncaught TypeError: Cannot read property 'cljs$lang$maxFixedArity' of undefined 
```

...也许是历史上最令人费解的错误信息，实际上意味着：

> 您正在调用`apply`一个不存在（或不需要）的函数。

加油，未来的 Google 员工！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T09:40:39.190

`(def sprintf format)`似乎更容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T07:03:47.910

我没有收到您看到的错误，我收到错误“No *print-fn* fn set for evaluation environment”。

[如果您在https://github.com/clojure/clojurescript/blob/master/src/cljs/cljs/core.cljs](https://github.com/clojure/clojurescript/blob/master/src/cljs/cljs/core.cljs)中挖掘源代码，您会在 *print-fn* 的文档中找到此消息：

“每个运行时环境都提供了一种打印输出的不同方式。无论 *print-fn* 绑定到什么函数，都将传递任何应该打印的字符串。”

所以我建议你使用 *print-fn* - 或者像@amalloy 建议的那样，直接使用'format'。

（顺便说一句，如果您查看[https://github.com/clojure/clojurescript/wiki/Differences-from-Clojure](https://github.com/clojure/clojurescript/wiki/Differences-from-Clojure)它表明“*out* 当前未实现”。）

# jsp - java.rmi.UnmarshalException：解组错误

> ID：11011966
> 
> 赞同：0
> 
> 时间：2012-06-13T09:29:09.030
> 
> 标签：jsp, struts, rmi

当我尝试从 struts 的操作类（即 RMI 客户端）访问 RMI serevr 时，我得到了这个执行（单击 jsp 按钮）

```
java.rmi.UnmarshalException: error unmarshalling return; nested exception is:    
    java.lang.ClassNotFoundException: com.mindcraft.queryExecutor.actionclass.ExecutorInterface (no security manager: RMI class loader disabled) 
```

下面是我的 RMI 客户端片段

```
try{   
        ExecutorInterface p=(ExecutorInterface)Naming.lookup("//localhost:2007/exec1");   
        System.out.println("Inside client.."+ p.toString());   
        int a= p.getJobStatus("2");   
        System.out.println("a..." + a);   
        p.killJob("1");   
            p.executeJob(id, usrname, pswd);   
        System.out.println("Threads started, main ends\n");   
        }   
        catch(Exception e)   
        {   
            System.out.println("Execption in RMI..."+ e);   
            e.printStackTrace();   
        } 
```

当我使用 public static void main() 在单独的文件中尝试上面的代码时很好，但是在 struts 框架的 Action 类中尝试相同的代码时会出现上述异常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T09:47:46.843

发现这个：

设置安全策略文件，例如：

```
grant {  
permission java.security.AllPermission "", "";  
}; 
```

在您的启动命令中：

```
-Djava.security.policy=/Security/policy.all 
```

来源：[链接](http://www.coderanch.com/t/459111/java/java/no-security-manager-rmi-class)

试试看，让我知道它是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T19:48:20.657

请务必注意以下事项以避免此错误：

1.  您必须确保服务器中的接口名称与客户端中的接口实现相同。
2.  确保包名，你在客户端放接口的地方和你在服务端放接口的包名是一样的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-13T08:34:30.420

新的 Java 7 和 Java 6 版本中的验证发生了变化。 **错误 ID 为：6861062 java classes_security 在证书链验证中禁用 MD2**。

在签署 Jara 文件时，我收到了一些警告消息，并且在执行命令时：jarsigner MyTools.jar -verify -verbose -certs

我收到消息：X.509, OU=Class 3 Public Primary Certification Authority, O="VeriSign, Inc.", C=US [证书有效期为 29.01.96 01:00 至 02.08.28 01:59] [ CertPath 未验证：算法约束检查失败：MD2withRSA]

我的解决方案是： - 使用另一个版本的 JDK 来签名和 JRE 插件。- 更新您的证书安全性，以免使用此算法。

# python - python 3.2中使用的bzip2版本

> ID：11011968
> 
> 赞同：0
> 
> 时间：2012-06-13T09:29:13.273
> 
> 标签：python, python-3.x, bzip2

python 3.2中bzip2的版本是多少？

bzip2 目前是 1.0.6。如何找到 python 3.2 中使用的版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T09:46:30.863

根据这个文件： [http://svn.python.org/projects/python/branches/py3k/PC/VC6/bz2.dsp](http://svn.python.org/projects/python/branches/py3k/PC/VC6/bz2.dsp) 它是 1.0.5 但你可以使用这个补丁来升级：

[http://hg.python.org/cpython/rev/db97a8248863](http://hg.python.org/cpython/rev/db97a8248863)

# python - 在字典中添加 for 循环

> ID：11011969
> 
> 赞同：0
> 
> 时间：2012-06-13T09:29:16.650
> 
> 标签：python, list, dictionary, for-loop, python-2.7

我在将 for 循环答案插入列表时遇到问题：

```
 for i in word_list:
        if i in word_dict:
            word_dict[i] +=1
        else:
            word_dict[i] = 1
print word_dict 
```

有了这个，我得到了字数的字典，比如

```
{'red':4,'blue':3}
{'yellow':2,'white':1} 
```

是否有可能以某种方式将这些答案添加到列表中

```
 [{'red':4,'blue':3},{'yellow':2,'white':1}] 
```

基本上我从 for 循环中得到 5 个字典，是否可以将所有这些字典放入一个列表中，而无需更改每个字典。每次我尝试将它们放入一个列表时，它只会给我一些类似的信息：

```
[{{'red':4,'blue':3}]
[{'yellow':2,'white':1}]
[{etc.}] 
```

[http://pastebin.com/60rvcYhb](http://pastebin.com/60rvcYhb)

这是我的程序的副本，没有我用来编码的文本文件，基本上，books.txt 只包含来自 5 个作者的 5 个不同的 txt 文件，而且我在单独的字典中拥有所有这些文件的字数我想将其添加到一个列表中，例如：

```
 [{'red':4,'blue':3},{'yellow':2,'white':1}] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T09:34:15.490

```
word_dict_list = []

for word_list in word_lists:
    word_dict = {}
    for i in word_list:
        if i in word_dict:
            word_dict[i] +=1
        else:
            word_dict[i] = 1
    word_dict_list.append(word_dict) 
```

或者简单地说：

```
from collections import Counter
word_dict_list = [ dict(Counter(word_list)) for word_list in word_lists] 
```

例子：

```
from collections import Counter
word_lists = [['red', 'red', 'blue'], ['yellow', 'yellow', 'white']]
word_dict_list = [ dict(Counter(word_list)) for word_list in word_lists]
# word_dict_list == [{'blue': 1, 'red': 2}, {'white': 1, 'yellow': 2}] 
```

# spring - 将参数传递给 Spring MVC 中的控制器方法

> ID：11011970
> 
> 赞同：2
> 
> 时间：2012-06-13T09:29:18.553
> 
> 标签：spring, controller, code-injection

我有一个用控制器实例化的特殊实体。在请求期间，它应该被传递到处理程序的参数中：

```
@Controller
@Scope("session")
public class HomeController {
    @Autowired
    Context context; // this thing should be passed into request.
    //context field from controller should be passed into request parameter
    //in order to set request attributes properly.
    //The instance of CommonRequest class should have reference to the context during
    //mapping HTTP request into CommonRequest object.
    @RequestMapping(value = "/do_smth", method = RequestMethod.POST)
    public void doSmth(CommonRequest request) {

    }
} 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:32:14.757

```
public void doSmth(CommonRequest request) {
    //context field from controller should be passed into request parameter.
    request.setAttribute("context",context); // if you want to get context back, use Context context = (Context)request.getAttribute("context");
} 
```

# iphone - UIView 背景颜色影响 iOS 5 中的触摸

> ID：11011974
> 
> 赞同：4
> 
> 时间：2012-06-13T09:29:28.507
> 
> 标签：iphone, objective-c, ipad, uiview, uikit

我有一个在 iOS 4 中工作的带有子类触摸响应的自定义视图。在 iOS 5 上，*如果*视图的背景颜色设置为`clearColor`.

我无法追踪到这一点，但有谁知道 iOS 5 是否改变了视图根据透明背景响应触摸的方式？

除了将背景颜色设置为任何不透明颜色之外，我不能对代码进行任何更改，`orangeColor`并且视图会完全响应。

请注意，该问题不会影响视图中其他地方的触摸；仅沿底部边缘，添加到视图的最后一个子视图下方的任何位置；在查看没有内容的视图区域时，可能会为了触摸而将清晰的背景视为视图不存在。更改颜色，视图具有“内容”并且触摸有效！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-13T09:38:09.893

而不是使用`[UIColor clearColor]`，尝试使用这个：

```
[view setBackgroundColor:[UIColor colorWithRed:0 green:0 blue:0 alpha:0.1]]; 
```

**注意**： A`UIView`不响应触摸事件时以下`alpha`任何内容`0.1`。`[UIColor clearColor]`设置一个`alpha`to `0.0`，所以你不会得到触摸事件。按照上述方法，您可以在透明视图上接收触摸事件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-07-24T21:56:00.650

如果其他人遇到这个问题并想要一个比为背景设置部分不透明度更好的解决方案，您可以将视图的`opaque`属性设置为`NO`，然后添加一个空`drawRect:`方法。（在 iOS8 测试版 4 上测试并运行。）

# mercurial - 如何获得当前的变化集修订而不是哈希

> ID：11011981
> 
> 赞同：39
> 
> 时间：2012-06-13T09:30:03.850
> 
> 标签：mercurial

我需要让当前的 mercurial 变更集返回一个**非常简单的 webservice**，只是递增的修订号而不是哈希。我知道我可以使用

```
 hg --cwd C:\repos\MyRepo parent 
```

这将返回我

```
changeset:   730:9d347e4a8d47
tag:         tip
user:        Simon Martin <simon.martin@mydomain.com>
date:        Tue Jun 12 15:39:45 2012 +0100
summary:     Fixed defect #244... 
```

我需要的只是变更集的 730 部分。目标是能够编写一个非常简单的 Web 服务来返回该值 - 然后它将被另一个应用程序获取并显示在页脚中，以便快速参考当前的*本地*修订。然后测试过程可以参考那个“构建”，然后可以用来识别它。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-06-13T11:17:16.767

您可以使用以下方法显示工作副本当前父级的本地修订号：

```
hg identify --num 
```

请注意，`+`当有本地更改时，这会输出一个后缀。添加一个`-r .`选项来避免这种情况。

您也可以使用该`-r`选项获取其他版本的本地版本号。例如，要检索最后标记的祖先的 ID：

```
hg id -n -r "ancestors(.) and tag()" 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-13T10:28:30.560

`hg parent`您可以为命令 使用自定义模板。

这应该得到你想要的：

```
hg parent --template "{rev}" 
```

# ios - 在不使用图像的情况下更改 iOS 控件的色调/背景颜色

> ID：11011982
> 
> 赞同：1
> 
> 时间：2012-06-13T09:30:09.510
> 
> 标签：ios, cocoa-touch, colors

是否可以使用`UIAppearance`代理（在 iOS 5 中）来更改 iOS 元素的背景颜色，特别是标签栏和标题栏而不使用图像？

我想使用深绿色渐变，但不使用图像。是否可以在 iOS 5 及以下版本中这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T11:40:48.487

好吧，您在这里问了两个不同的问题，但是如果您想简单地更改色调，可以这样做...

```
self.navigationController.navigationBar.tintColor = [UIColor colorWithRed:255 green:0 blue:0 alpha:1];
self.tabBarController.tabBar.tintColor = [UIColor colorWithRed:255 green:0 blue:0 alpha:1]; 
```

此外，如果您希望使用渐变，则可以不使用图像，但最好使用平铺图像...

```
self.navigationController.navigationBar.tintColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"myGradient.png"]];
self.tabBarController.tabBar.tintColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"myGradient.png"]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T08:08:56.610

嘿，现在在 iOS6 中，您现在可以将`UIStatusBarTintParameters`密钥添加到`Info.plist`.

来自 iOS6 GM 更新日志：

> 现在可以在您的应用`Info.plist`文件中设置状态栏色调参数。您可以这样做以确保在启动期间状态栏颜色与应用的导航栏颜色相匹配。要设置状态栏色调，请将 UIStatusBarTintParameters 键添加到您的`Info.plist`文件中。此键的值是一个字典，其中包含描述应用程序启动时导航栏的适当值。字典里面应该是`UINavigationBar`键，它的值也是字典。该字典包含初始导航栏的样式（使用`Style`键）并指示它是否是半透明的（使用半透明键）。您还可以指定导航栏的色调颜色（使用`TintColor`键）或其自定义背景图像的名称（使用 BackgroundImage 键）。

# http - 宁静的 HTTP API 模式

> ID：11011986
> 
> 赞同：0
> 
> 时间：2012-06-13T09:30:20.690
> 
> 标签：http, rest

我正在设计一个 Restful HTTP API 并且有一个设计问题。

在我的应用程序中，用户应该能够建议项目创建。

然后我可以批准或不批准它们。

我想知道最好的 VERB+URL 模式是什么。

示例 1：

```
POST|GET|PUT|DELETE /items 
```

用户发布一个新项目，我可以将它从“待定”中放入“已批准”或删除它。

在这里，我必须使用 GET /items?status=approved 来获取所有已批准的项目，并使用 GET /items?status=pending 来获取所有待处理的项目。默认情况下，也许 GET /items 会让我得到所有批准的。

但我不明白如何阻止用户将其置于已批准状态。

或者

示例 2：

```
POST|GET|PUT|DELETE /item_creation_suggestions 
```

用户发布一个新的项目建议，我可以通过 DELETE:ting 批准它并执行 POST /items 或只是删除它。

这里 /items 和 /item_creation_suggestions 是两个独立的集合。我只需要在批准时删除建议并创建项目。

这使得保护我的应用程序免受未经授权的访问变得简单。我可以通过授权保护我的 /items，而 /item_creation_suggestions 可以被任何人使用。

但这似乎不太安宁？

当用户建议项目更新和删除并且我批准或不批准它们时也是如此。

我是 Restful 设计的新手，因此我们将不胜感激所有反馈和建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T09:44:25.290

第一个听起来不错。

`POST /items`应该创建一个新项目并可能返回一个[`202 Accepted`](https://www.rfc-editor.org/rfc/rfc2616#section-10.2.3)状态。
`GET /items`应退回所有批准的项目。
`GET /items?status=pending`应该将待处理的项目返回给具有正确权限的用户。
`PUT /items/[id]`带有指定新状态以更改状态的请求正文。
`DELETE /items/[id]`删除项目。

*最后，您需要决定什么对您的*API最有意义，但以上听起来通常是合理的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T09:48:41.673

我也非常喜欢第一个设置。

> 但我不明白如何阻止用户将其置于已批准状态。

如果用户无权执行此操作，您的应用程序逻辑需要阻止用户发布处于已批准状态的项目。REST 不仅仅是一个“死存储”，您实际上可以处理请求并抛出 403 Forbidden 以防用户做错了什么。

访问控制仍然很重要，并且不违背“宁静”。

# nhibernate - NHibernate Persist 以前“已删除”对象

> ID：11011987
> 
> 赞同：0
> 
> 时间：2012-06-13T09:30:21.307
> 
> 标签：nhibernate

我有一个 NHibernate 对象，它有一个映射为 AsBag、Inverse、Cascade.AllDeleteOrphan 的子集合。

我有需要重新保留已删除对象的情况。

删除父对象很好。父对象和子对象都从数据库中删除。

问题是，我需要重新保存/保留已删除的对象。如果我尝试调用 SaveUpdate，我会收到 StaleObjectStateException，因为父对象和子对象的 Id 字段仍设置为非零值。

当然，我可以在删除时将父级的 ID 强制为零，但随后将子级的 ID 强制为零似乎很麻烦。

有没有更好的策略来处理这个问题？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T10:02:29.637

如果你`Evict`在你之后`Delete`，但在你之前`Flush`，你会没事的；它将滚出您的挂起删除。

```
 // Act
        using (ISession session = _factory.OpenSession())
        using (ITransaction tx = session.BeginTransaction())
        {
            session.Save(expected);
            session.Flush();

            session.Delete(expected);
            session.Evict(expected);

            tx.Commit();
        }

        using (ISession session = _factory.OpenSession())
        using (ITransaction tx = session.BeginTransaction())
        {
            actual = session.Get<Person>(expected.Id);

            var count = actual.Roles.Count;
        }

        // Assert
        expected.ShouldHave().AllProperties().EqualTo(actual); // succeeds; record is not deleted or otherwise molested. 
```

但是，一旦刷新，就没有撤销/重新保存的好方法。首先弄清楚如何避免删除对象，避免在删除和恢复之间刷新，或者回滚事务以撤消删除。另一种选择，如果可以将数据重新保存为新记录（只要保留值），则只需克隆已删除的记录并保存。

# c++ - 新手与 std::cin 斗争

> ID：11011988
> 
> 赞同：2
> 
> 时间：2012-06-13T09:30:29.177
> 
> 标签：c++, cin

我遇到了一个问题，一个简单的函数在到达 std::cin 请求时似乎终止了。编译器不会抛出任何警告或错误，也不会发生运行时错误，程序只是退回到主菜单。

片段：

```
#include <iostream>
#include <math.h>

using namespace std;

void circle()
{
    float radius = 0.0f, diameter = 0.0f, circumference = 0.0f, area = 0.0f;
    const float pi = 3.14f;

    cout << "Enter radius." << endl;
    cin >> radius;
    cout << "Radius: " << radius << endl;
    cout << "Diameter: " << 2*radius << endl;
    cout << "Cirumference: " << 2*pi*radius << endl;
    cout << "Area: " << pi * pow(radius, 2) << endl;
} 
```

该函数从 main() 调用并成功调用，因为屏幕上出现“输入半径”，但没有请求输入，最后 4 条语句被跳过。然后程序简单地返回到 main()。

cin 也没有错误（并且在 main() 函数中播放时继续工作）所以我不认为它只是在读取流中的坏字符。

我只是无法弄清楚为什么 circle() 意外退出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T09:38:16.607

`Visual Studio 2010`当我尝试使用on运行您的代码时，它在我的机器上也是如此`Windows XP`。

我设法通过`getchar();`在调用`circle()`in之后修复它`main`。

不知道为什么会发生这种情况，希望有人可以对此有所了解。

**编辑：

当然它会退出，这是因为它会运行到最后`main`退出应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T09:38:22.857

`cin`不请求输入，而只是从标准输入读取。所以你的程序会打印出来

```
Enter radius. 
```

后跟一个新行。然后你可以输入半径并按回车键。你试过吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T09:38:33.403

嗯，它在我的电脑上运行良好。您是否对其进行了调试，它是否真的跳过了这些行？添加

```
cout << flush; 
```

结束刷新缓冲区并在屏幕上查看结果。

如果您希望它阻止正在执行的程序并等待用户输入，请记住在读取 cin 缓冲区之前也要清理它。

# c# - 默认数据上下文

> ID：11011990
> 
> 赞同：7
> 
> 时间：2012-06-13T09:30:34.200
> 
> 标签：c#, .net, wpf, datacontext

在 MainWindow.xaml 中有以下 xaml：

```
<Window x:Class="TestDependency.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525"
        DataContext="{Binding RelativeSource={RelativeSource Self}}">
    <Grid>
    <Grid.RowDefinitions>
      <RowDefinition></RowDefinition>
      <RowDefinition></RowDefinition>
      <RowDefinition></RowDefinition>
    </Grid.RowDefinitions>
    <Label Name="someLabel" Grid.Row="0"  Content="{Binding Path=LabelText}"></Label>
    <Button Grid.Row="2"  Click="Button_Click">Change</Button>
  </Grid>
</Window> 
```

MainWindow.xaml.cs 后面的代码如下：

```
public static readonly DependencyProperty LabelTextProperty = DependencyProperty.Register("LabelText", typeof(String), typeof(MainWindow));

public int counter = 0;

public String LabelText
{
  get
  {
    return (String)GetValue(LabelTextProperty);
  }

  set
  {
    SetValue(LabelTextProperty, value);
  }
}

private void Button_Click(object sender, RoutedEventArgs e)
{
  LabelText = "Counter " + counter++;
} 
```

我原以为默认`DataContext`是后面的代码。但我被迫指定`DataContext`. **哪个`DataContext`是默认值？** `Null`? 我原以为后面的代码会是（因为是同一个类）。

在这个示例中，我使用后面的代码来修改标签的内容，我可以直接使用：

```
someLabel.Content = "Counter " + counter++; 
```

我希望作为背后的代码，如果`DataContext`它在不同的类中，它不应该有你遇到的 UI 更新问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T09:50:15.657

是的，默认值为，这`DataContext`是`null`它在`FrameworkElement`类中的声明方式 -

```
public static readonly DependencyProperty DataContextProperty = 
    DependencyProperty.Register("DataContext", typeof(object),
    FrameworkElement._typeofThis,
    (PropertyMetadata) new FrameworkPropertyMetadata((object)null,
        FrameworkPropertyMetadataOptions.Inherits,
        new PropertyChangedCallback(FrameworkElement.OnDataContextChanged))); 
```

`FrameworkPropertyMetadata`将第一个参数作为属性的默认值。

因为它被所有子控件继承，除非您指定窗口数据上下文，否则您的标签`DataContext`仍然存在。`null`

您可以`someLabel.Content = "Counter " + counter++;`在代码隐藏中使用来设置标签内容；因此，在后面的代码中访问您的控件是非常好的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T09:35:27.193

由于您正在绑定 a 的属性`Label`，除非您以某种方式指定不同的绑定源，否则绑定引擎会假定这`LabelText`是该类的属性。它不能神奇地确定，因为绑定源`Label`的后代`MainWindow`应该是那个窗口，这就是为什么你需要显式声明它的原因。

需要注意的是，“数据上下文”和“绑定源”的概念是不同的：[`DataContext`](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.datacontext.aspx)是指定绑定源的*一种方式，但*[也有](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.source) [其他](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.relativesource.aspx) [方式](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.elementname)。

# java - 是否可以在 Java 中覆盖同一类中的方法？

> ID：11011992
> 
> 赞同：1
> 
> 时间：2012-06-13T09:30:39.903
> 
> 标签：java, oop, inheritance, overriding

看看下面的代码示例：

```
public class Test{

   public static void main(String[] args){

        System.out.println(new Test());

       System.out.println(new Test(){

        public String toString(){
             return "manual override";
         }

       });

      System.out.println(new Test(){

              public String gm(){
                    return  "manual gm";
               }
        }.gm());
     }  //end of main method

   public String gm(){
     return "gm";
    }
} 
```

可能有人认为该`toString()`方法在匿名内部类中被覆盖，这是一个完全不同的类。
但是覆盖代码仍然驻留在同一个类中。那么，是否有理由得出结论，在某些情况下 [如上所述]，可以覆盖同一类中的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T09:34:39.223

首先，你还没有在你的`Test.java`类中定义 toString 。

其次，当你创建一个匿名类时，它在概念上就像创建一个子类。因此，只要父方法不是最终方法，就允许在匿名类中进行覆盖。

主要是，否则在同一类中无法覆盖。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T09:33:54.853

答案是否定的，你不能在一个类中覆盖相同的方法。匿名内部类是一个不同的类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T09:34:12.247

上面的代码覆盖了**Object**类的**toString()**方法。所以你不能说它在同一个类中覆盖。现在它也覆盖了一个超类方法，这里的超类是**Object**，它是所有类的超类。

 ***** * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T09:37:06.037

不，您只能覆盖子类中的方法。

```
public String toString(){
         return "manual override";
     } 
```

在您的情况下，您正在覆盖`Object's` `toString()`方法而不是`Test`类方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T09:44:32.993

在一个类中，我们不能有具有相同签名的方法。这是因为在同一个类中不需要覆盖方法。

因此在同一个类中覆盖方法是不可能的，如果我们想使用相同的方法名，我们可以通过改变签名来重载方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-17T17:49:26.753

关于“现实世界的用例”，我确实在 Manning 的“JUnit Recipes” 2005 的第 2.5 节中找到了上述程序的实际用法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-05-25T14:56:57.937

```
public class Counter {
private int count;
// a simple integer instance variable
public Counter( ) { }
// default constructor (count is 0)
public Counter(int initial) { count = initial; }
// an alternate constructor
public int getCount( ) { return count; }
// an accessor method
public void increment( ) { count++; }
// an update method
public void increment(int delta) { count += delta; }
// an update method
public void reset( ) { count = 0; }
// an update method
} 
```

这个函数不是在同一个类下覆盖吗？****

# umbraco - 错误：实时编辑已关闭

> ID：11011995
> 
> 赞同：1
> 
> 时间：2012-06-13T09:30:47.500
> 
> 标签：umbraco

尝试在 Umbraco 中使用“在画布中编辑”功能时，我看到以下错误消息：

> Umbraco Canvas 需要 ASP.Net 表单才能正常运行。实时编辑已关闭。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:30:48.030

要启用画布编辑，您必须确保您的页面包含一个设置为`runat=server`

```
<form id="form1" runat="server">
...
</form> 
```

# c# - 如何创建“风格大师”winforms 控件

> ID：11011997
> 
> 赞同：0
> 
> 时间：2012-06-13T09:30:53.810
> 
> 标签：c#, winforms, styles

我有一个包含多个 DataGridView 控件的应用程序。我想创建一个主控件或组件（我不确定要使用哪个），我可以在其中定义基本的颜色和行为。但是，由于所有 DataGridView 控件在应用程序中都有不同的列，因此我想在将新实例放置在窗体上而不是主窗体中之后定义列。

你能建议一种方法吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T09:56:08.083

拥有类似于您自己的 MasterGridView 的东西，您可以在其中定义所有常见的行为、颜色等。然后从这个继承所有相应的数据网格视图。

```
public class MasterDataGridView: System.Windows.Forms.DataGridView
{
    public MasterDataGridView()
    {
        BackColor = Color.Yellow;
        // define other behaviours
    }
}

public class OrdersDataGridView : MasterDataGridView
{
   // data binding, column addition etc can be handle in respective grid views
}

public class ReportsDataGridView : MasterDataGridView
{
} 
```

... ETC。

# java - Java中是否有等效的Vbscript执行语句

> ID：11011998
> 
> 赞同：1
> 
> 时间：2012-06-13T09:30:59.357
> 
> 标签：java, vbscript

首先，我知道 Vbscript 是解释的，Java 是编译的。但是有没有办法在 Java 中完成 vbscript 'execute' 或 'eval' 语句的任务？我想要做的是将一段代码保存在一个变量中，并尝试在运行时执行保存的代码。

例如，在 vbscript 中，

a = "b = 10"

执行（一）

将值 10 分配给变量“b”。如果这在 java 中是可能的，我可以处理一种情况，我已经让自己进入而无需重新设计整个代码。请求您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:34:05.633

不，Java 没有等效于 VBScript 的`execute`.

[您可以使用Java 脚本来](http://java.sun.com/developer/technicalArticles/J2SE/Desktop/scripting/)完成您所概述的工作，但是，您有相当广泛的脚本语言可供选择。

# select - ABAP中SELECT语句中的计算字段

> ID：11011999
> 
> 赞同：0
> 
> 时间：2012-06-13T09:31:00.817
> 
> 标签：select, abap

ABAP 是否支持 SELECT 语句中的计算字段？如：

```
SELECT price quantity price*quantity AS sum
FROM ...
INTO ...
WHERE ... 
```

如果没有，让高级编码人员告诉我他们使用什么解决方案来处理这项任务。不要在 SELECT 循环中提供计算到临时变量的性能降低方式。

```
SELECT.
...
ENDSELECT. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T12:39:23.777

Open SQL 仅支持几个聚合函数。在选择记录并将结果保存到内部表中之后，应在内存中进行计算。
简而言之：

```
select ... into table itab from ...
loop at itab assigning <itab_row>.
  " Perform calculations on row here
endloop. 
```