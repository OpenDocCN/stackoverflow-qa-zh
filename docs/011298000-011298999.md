# StackOverflow 问答 11298000-11298999

# windows - 如何使用 UTF-8 编码 knit2html？

> ID：11298004
> 
> 赞同：6
> 
> 时间：2012-07-02T16:57:40.590
> 
> 标签：windows, r, utf-8, knitr

我的`.Rmd`文件包含多语言文本。当我将生成的 html 页面加载`knit2html`到我的 joomla 站点时，多语言文本已被正方形替换。您是否知道请求`utf-8`编码的 html 页面的方法，或任何其他解决问题的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T07:03:22.133

更新：

RStudio (>= 0.97.x) 和 knitr (>= 1.2) 现在知道如何处理文件编码。RStudio 会将文件编码传递给(eg )的`encoding`参数。总之，升级 RStudio 和 knitr 即可解决问题。`knit()``knit('foo.Rmd', encoding = 'UTF-8')`

请忽略下面的答案；它不再是一个合适的解决方案。

* * *

我是这样做的（使用 RStudio）：

1.  对于`.Rmd`我选择“使用编码保存”，然后我选择了`UTF-8`
2.  在打电话之前，`knit2html()`我给了：`options(encoding = 'UTF-8')`

那成功了

# r - 通过 R 命令行仅安装 64 位软件包

> ID：11298008
> 
> 赞同：5
> 
> 时间：2012-07-02T16:57:50.577
> 
> 标签：r, installation, package

我最近升级到 R 2.15.1 并且无法从命令行安装包。

我尝试使用：

```
R --arch x86_64 CMD INSTALL package_1.0.tar.gz 
```

但是 R 尝试安装 i386 版本 - 然后需要我没有安装的依赖包的 32 位版本。但是，该软件包的 64 位版本*可用*- 然而，整个安装过程失败。

我原以为指定架构会阻止 R 尝试安装 32 位版本。我错过了一些明显的东西吗？（这在 2.14 上不是问题）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T17:05:16.763

什么操作系统？

在我的电脑上，`R CMD INSTALL --help`建议使用该`--no-multiarch`标志。

# emacs - emacs 24 主题和继承属性

> ID：11298016
> 
> 赞同：4
> 
> 时间：2012-07-02T16:58:41.067
> 
> 标签：emacs, elisp, emacs24

我从这里使用 zenburn：

[https://github.com/djcb/elisp/blob/master/themes/zenburn-theme.el](https://github.com/djcb/elisp/blob/master/themes/zenburn-theme.el)

它使用了很多`:inherit`设置。但是，我注意到当我切换到另一个主题 x 然后返回时，x 的前景将与 zenburn 的`:inherit`.

该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T09:37:48.430

:inherit 在 Emacs 24 中的工作很奇怪......目前尚不清楚当前行为是“功能”还是错误。我通常加载主题：

```
(load-theme 'zenburn t)
(load "zenburn-theme") 
```

在我的 init.el 末尾；显式加载应该重置继承。[这是该主题的作者给出的建议](http://emacs-fu.blogspot.com/2011/05/porting-zenburn-theme-to-emacs-24.html)，它也适用于其他主题（例如 solarized）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-28T02:04:02.850

这仅仅是因为 Emacs 自定义主题默认是*累积*的。要将一个主题*替换为另一个主题，仅**启用*第二个主题是不够的。您必须首先*禁用*要替换的那个。否则，效果就是将两者*合并*。

很可能，@ChristopherMonsanto 描述的加载顺序具有这样做的效果：禁用当前主题，然后启用 zenburn 主题。

FWIW，*颜色*主题（来自 library ）与 Emacs*自定义*[`color-theme.el`](http://www.nongnu.org/color-theme)主题的工作方式不同——颜色主题没有这个问题/功能。有关详细信息，请参阅[http://www.emacswiki.org/emacs/ColorTheme](http://www.emacswiki.org/emacs/ColorTheme)。

# c# - “提取”magento 代码，因此我的 C# 应用程序中只显示了网站的特定部分

> ID：11298017
> 
> 赞同：1
> 
> 时间：2012-07-02T16:58:43.293
> 
> 标签：c#, php, html, visual-studio-2010, magento

基本上我想做的是将 Magento 商店与 C# 应用程序集成。关键是，我不想出现完整的 magento 页面，我只希望产品出现在我的应用程序中，而不是带有完整菜单的完整页面。所以我的问题是：有什么办法，我可以以某种方式“提取”magento 代码，所以只有网站的某个部分显示在我的 C# 应用程序上？

提前致谢！PS：抱歉英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T17:44:37.500

基本上绘制一个以您想要的方式显示产品的页面，并加载该页面而不是主页或您正在加载的任何页面。基本上就像一个移动主题。我对管理端不太熟悉，所以我不确定它们是如何启用或设置的，但这几乎就是你想要做的。

# javascript - 谁能告诉我为什么这是一个循环引用？或者至少指出循环引用是什么？

> ID：11298018
> 
> 赞同：0
> 
> 时间：2012-07-02T16:58:45.440
> 
> 标签：javascript, json, circular-reference

我有这个代码片段，它在其他地方工作得很好，但是当我将它移动到不同的部分时会给我一个循环引用错误。我什至在任何地方都找不到关于什么是循环引用的好参考。

```
// Create a new array to hold each of the Properties from the custom search pane
// This array will eventually be converted to JSON and become a List<Property>
propertyTables = [];

// Create new Object to hold a row - we have to construct these 
// Property objects manually for each row
propertyRow = {};

// This needs to be rewritten to include all of hidden input elements from the custom object that is clicked
// For each of the data elements the properties table, add it to the Object
$(this).parent().find('.editablePropertyList .customPropertyPrompt, .editablePropertyList .customPropertyDataType, .editablePropertyList .customPropertyInquirySearchType, .editablePropertyList .customPropertyID, .editablePropertyList .customPropertyText').each(function(index) {
    propertyValue = $(this).val();
    propertyText = $(this).text();
    switch ($(this).attr("class")) {
        case "customPropertyID":
            propertyRow.propertyID = propertyValue;
            break;
        case "customPropertyDataType":
            propertyRow.dataType = propertyValue;
            break;
        case "customPropertyPrompt":
            propertyRow.prompt = propertyText;
            break;
        case "customPropertyInquirySearchType":
            propertyRow.inquirySearchType = propertyValue;
            break;
        case "customPropertyText":
            // Whenever it reaches this data element, this means
            // that the iteration is at the end of a row.  Push the
            // newly filled propertyRow object (typeof Property) on
            // the PropertyTable array.  Then reinstance the propertyRow
            // object and it will start populating with the next row
            // as the next iteration occurs with propertyID
            propertyRow.inquirySearchText = propertyValue;
            if (propertyRow.inquirySearchText !== "") {
                propertyTables.push(propertyRow);
            }
                propertyRow = {};
                break;
            }
    });

    var statusFilter = [];
    var limitAnnotation = [];

    searchCriteria = {}; // Created the object
    searchCriteria.topFolderListBox = topFoldersWithSomeSelected; // Add the List<topLevelFolders> as the first property
    searchCriteria.docTypesListBox = docTypesWithSomeSelected; // Add the List<DocumentType> as the second property
    searchCriteria.propertyTable = propertyTables; // Add the List<Property> as the third property
    searchCriteria.statusFilter = statusFilter; // Add the List<statusFilter> as the fourth property
    searchCriteria.limitAnnotation = limitAnnotation; // Add the List<limitAnnotation> as the fifth property
    searchCriteria.fromDate = ""; // Add the string fromDate as the sixth property
    searchCriteria.toDate = ""; // Add the string toDate as the seventh property
    searchCriteria.dateRangeRelativeToday = false;
    searchCriteria.annotationText = ""; // Add the string annotationText as the eigth and final property

    // Convert to JSON String - craps out here with circular reference error
    textToSend = JSON.stringify(searchCriteria, null, ""); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T17:20:31.257

**循环参考**

简而言之：它是 when`objA`包含对的引用，`objB`而引用又包含对`objA`.. 的引用，依此类推。你会有一个这样的无限系列。

一个最简单的例子：

```
var a = {}
var b = {}
a['x'] = b;
b['y'] = a; 
```

在上述情况下，`a`object 包含一个`x`引用的键`b`。并且以类似的方式，`b`object 包含一个再次`y`引用`a` back 的键。

这是序列化时的经典问题（如本例中的 JSON）：

```
serialise a ->
    serialise value of key x in a ->  # == b
        serialise b ->
            serialise value of key y in b -> # ==a
                serialise a ->
                    ... and so on.. 
```

尝试上述代码时出现的错误（在 Chrome 中）：

```
TypeError: Converting circular structure to JSON 
```

* * *

关于您的问题，如果不查看整个代码，真的很难判断循环引用的确切位置。我会建议一件事。做一个`console.log(searchCriteria)`。如果您的浏览器显示树状结构，请继续扩展节点，直到您遇到以前见过的节点（深度较小）。

当你看到类似下面的东西时，你就知道罪魁祸首是什么了。:) ![循环引用问题](../Images/62e3fb9235b8500a8d8ca405cd983ecd.png)

# mysql - 插入具有来自多个表的多条记录的表

> ID：11298021
> 
> 赞同：1
> 
> 时间：2012-07-02T16:59:09.377
> 
> 标签：mysql, sql

我必须根据来自 2 个不同表的多条记录向表中插入一些记录。

表： **目标**：`player_list_items` **源1**：源`list_items` **2**：`map_details`

玩家应该播放包含项目列表的列表；需要在地图上播放列表。

该地图包含具有特定 X 和 Y 位置的占位符，我需要将 list_items 放在这些占位符后面。为此，我创建了包含随机放置在占位符后面的 list_items 的目标表。

下面是我能够将用户的 list_items 转储到目标表中的查询，但是现在的问题是如何从 source2 表中为每个 list_items 随机获取 X 和 Y 位置。

```
INSERT INTO player_list_items 
(player_list_list_id, player_list_player_id, player_list_item_id, player_list_item_cellX, player_list_item_cellY)

SELECT li.list_item_list_id, 584488596, li.list_item_item_id, 2, 5
FROM list_items li
WHERE li.list_item_list_id = 2 
```

an`insert with multiple selects`或`even another query {update}`after 这对我有用，因为这只会为每个列表的用户运行一次。

**每个列表包含多个项目，因此上述查询返回多个项目并且工作正常，需要考虑的是 map_details 表还包含多个占位符，它们肯定会超过 list_items 的数量。**

**所需的查询应该从 map_details 表中获取所有位置 X 和 Y，然后随机分配给每个单独的项目，每个项目的位置必须是唯一的。**

我已经看到了插入多个选择的示例，但它们用于单行插入，我的问题是来自多个表的多行并且也是随机的。

`I have a Stored Procedure for this case`因为它还有很多其他工作正常的东西，所以，如果这里有人想使用 SP 给出答案，那将是有用的，而不是我使用的问题。

希望以上内容有意义并澄清我的观点。

![在此处输入图像描述](../Images/7957b4393a5236112ae465549b8d9c89.png)

**更新**

我的第二个查询：

插入到 player_list_items（player_list_list_id、player_list_player_id、player_list_item_id、player_list_item_cellX、player_list_item_cellY）

```
SELECT list_item_list_id, 584488596, list_item_item_id,  game_map_details.cellX, game_map_details.cellY
FROM list_items
JOIN (SELECT * FROM game_map_details WHERE map_id = 1 ORDER BY RAND()) AS game_map_details
WHERE list_item_list_id = 2
GROUP BY list_item_item_id 
```

这确实添加了 map_details 表中的数据，但数据不是随机的，实际上它只为 list_items 表中的所有 4 条记录插入了一对记录

![在此处输入图像描述](../Images/0a34623d69d1c029f25fcf80c42e5655.png)

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T07:57:01.280

好的，我得到了答案

使用 map_details 的光标并循环通过它来更新项目列表，这是代码以防万一它帮助某人或某人给我一个更好的主意。

```
UPDATE player_list_items SET player_list_item_cellX = cell_X, player_list_item_cellY = cell_Y
             WHERE player_list_id IN (
                 SELECT player_list_id FROM (
                 SELECT player_list_id FROM player_list_items 
                 WHERE player_list_player_id = playerID AND player_list_list_id = @listID AND player_list_item_cellX IS NULL
                 ORDER BY player_list_id LIMIT 1
                 ) tmp
             ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T17:33:13.850

我不确定我是否在关注，但听起来您需要`list_items`加入`map_details`. 如果两个表都有某种序列字段，它总是从一个开始并单调增加，没有间隙，你可以加入它们。鉴于此数据：

```
Seq  Name
1    Barrel
2    Box
3    Crate

Seq  Position
1    13, 4
2    99, 2
3    8, 11 
```

然后，`SELECT I.Name AS ItemName, M.Position FROM Items AS I INNER JOIN Map AS M ON I.Seq = M.Seq`会给你这个：

```
ItemName Position
Barrel   13, 4
Box      99, 2
Crate    8, 11 
```

尽管您可能有这样一个字段，但由于您需要随机化，因此您需要在子查询中为两个表中的至少一个创建一个新序列；[这里](https://stackoverflow.com/questions/3126972/mysql-row-number)的一个线程讨论了如何在 MySQL 中这样做。在该线程中，行按特定顺序编号，但您可以按 GUID 或其他一些随机元素排序，以随机顺序获取项目。在 MS SQL 中，我会使用`ROW_NUMBER()`，而 Oracle 有`ROWNUM`，但看起来 MySQL 可能不太方便。如果您找到更好的方法，请将其添加到其他问题中，以造福后代。

您需要将您的序列号乘以地图位置与项目数量的比率，以便项目编号跨越地图编号的整个范围。请务必将此比率计算为 a `FLOAT`，但要将结果数字转换为 ，`INT`以便它们正确连接。例如，如果有 4 个项目和 10 个地图位置，您将随机排列项目并为其分配数字 1、2、3 和 4；将这些乘以 2.5（地图位置与项目的比率），然后将它们四舍五入为整数，得到 2（1 x 2.5，向下舍入为 2）、5、7 和 10。这并不完美，因为这意味着某些地图位置会比其他位置更频繁地出现。如果你随机化地图位置“和”项目的顺序，它应该是均匀的。

* * *

这是如何工作的说明。假设您正在使用这些项目：

```
ItemID Name
42     Barrel
79     Box
101    Crate 
```

...并且您正在使用这些地图位置：

```
MapID Location
22    13, 4
38    99, 2
44    8, 11
45    7, 10 
```

首先为这些列表中的每一个分配序列号，如其他线程中所述：

```
ItemID Name    Seq
42     Barrel  1
79     Box     2
101    Crate   3

MapID Location Seq
22    13, 4    1
38    99, 2    2
44    8, 11    3
45    7, 10    4
50    1, 12    5 
```

您现在可以在 Items.Seq = Map.Seq 上将 Items 加入 Map：

```
ItemID Name    Seq Location
42     Barrel  1   13, 4
79     Box     2   99, 2
101    Crate   3   8, 11 
```

但是，您总是将您的项目分配给地图中的第一个元素。要解决此问题，您可以随机化地图元素的顺序，或者将项目的序列号乘以两个计数的比率 (5/3)：

```
ItemID Name    Seq  NewSeq
42     Barrel  1    1 * 1.6667 = 1.6667 = 1
79     Box     2    2 * 1.6667 = 3.3333 = 3
101    Crate   3    3 * 1.6667 = 5.0000 = 5 
```

...现在，项目在地图位置之间均匀分布，分别位于 1、3 和 5，而不是在地图的开始处聚集。请注意，只要项目列表和地图列表未更改，项目每次仍将具有相同的位置，因此您最好为地图位置分配随机序列号。

# android - 当设备屏幕被锁定时，UDP/RTCP 数据包未到达设备/应用程序

> ID：11298039
> 
> 赞同：6
> 
> 时间：2012-07-02T17:00:23.647
> 
> 标签：android, android-ndk, cpu

我的 VOIP Android 应用程序具有 C/Native 库，它执行登录/注销等所有业务逻辑。

问题是当设备屏幕被锁定时，应用程序（c 代码）无法从服务器接收任何数据包。我用 Wireshark 验证了这一点。看起来 CPU 没有运行。

我能够在我的应用程序 INIT 上解决以下问题。

```
WakeLock mWakeLock =  null;
PowerManager pm = (PowerManager) cxt.getSystemService(Context.POWER_SERVICE);
if(mPartialWakeLock == null){
    // lock used to keep the processor awake.
    mPartialWakeLock = pm.newWakeLock(
        PowerManager.PARTIAL_WAKE_LOCK
            | PowerManager.ON_AFTER_RELEASE, TAG);
    mPartialWakeLock.acquire;
} 
```

但这样做会耗尽我的电池。

为什么请求没有到达我的应用程序？当屏幕被锁定并接收来自服务器的请求时，如何让设备 CPU 一直处于启动状态？

注意：使用的已编辑设备：Samsung Rugby Smart i847 操作系统：Android 操作系统，v2.3.6 (Gingerbread.UCLA4)

该应用程序在 Galaxy s2 上运行。（是因为它的双核处理器和 CPU 处于屏幕锁定状态？） SKYPE 和 VIBER 如何将 WRT 设计为睡眠模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:19:36.617

我正在开发一个类似的应用程序，该应用程序运行一个服务，该服务在启动时与服务器建立持久的 TCP 连接，以便能够从服务器接收消息。该服务不获取任何锁。应用程序的这一部分已经实现了一段时间，到目前为止，我还没有遇到任何无法从服务器接收消息的问题。在阅读了您的问题后，我决定测试为什么我没有遇到这个问题。

我想，即使我没有持有任何锁，也许还有其他应用程序持有，因此可以让 CPU 保持活动状态。运行`adb shell dumpsys`时，我注意到情况并非如此：`mLocks.size=0`.

这一定意味着应用程序仍然能够接收数据包，即使设备处于睡眠状态。我找不到任何官方信息，但互联网上的一些帖子似乎同意：

> 虽然我还没有找到一个很好的例子来说明这一点，但似乎即使您的手机处于睡眠状态，如果在连接上接收到数据，您的代码也会被唤醒 [...] ([来源](http://dalelane.co.uk/blog/?p=1599))

* * *

> > 假设设备处于深度睡眠并且网络堆栈接收到传入数据包。这会唤醒设备吗？
> 
> 它应该。（[来源](https://groups.google.com/forum/?fromgroups#!topic/android-platform/xTU1UeckGcM)）

但是，请注意，这两个来源都建议您应该获取唤醒锁来处理数据包，以防止设备在此处理过程中进入睡眠状态。我在我的申请中没有这样做（也许我应该这样做），但我的处理时间真的很短。

当您说您的请求没有到达您的应用程序时，您确定它们没有到达吗？也许他们是，但是您的应用程序在发送回复之前就睡着了？尝试在套接字上接收数据时获取唤醒锁，并在完成处理后释放它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T06:41:48.377

你考虑过使用[**服务**](http://developer.android.com/reference/android/app/Service.html)吗？

> [服务](http://developer.android.com/reference/android/app/Service.html#WhatIsAService)为应用程序提供了一种工具，可以告诉系统它想要在后台执行的操作（即使用户没有直接与应用程序交互）。通过启动它，系统将为服务安排工作，直到服务或其他人明确停止它为止。

我想这可以帮助..干杯

**编辑：** Oki，你之前没有提到服务..我仍然不确定你是否有两个问题（耗尽电池和没有接收数据）或者只是一个你接收数据的问题......？

考虑到电池耗尽，您可以尝试使用不同的[**WAKE_LOCK**](http://developer.android.com/reference/android/os/PowerManager.html)标志。

我注意到的重要一点是，您没有按照链接[的 WAKE_LOCK](http://developer.android.com/reference/android/os/PowerManager.html)页面上的建议**释放**锁定：`mPartialWakeLock.release()`

> 使用此 API 将显着影响设备电池寿命。除非您真的需要，否则不要获取 WakeLock，尽可能使用最低级别，并确保尽快释放它。

此外，根据其他一些[帖子](https://stackoverflow.com/questions/9871860/partial-wake-lock-power-drain-in-android-phones)，电池消耗速度取决于您在服务中所做事情的工作和有效性，所以这是我们在没有看到更多代码的情况下无法提供帮助的地方......：S

顺便说一句..恕我直言，如果你只是等待来电并且你一直保持 WAKE_LOCK，这可能是电池耗电高的原因。想想你需要什么，如果你不需要，尽量减少资源的使用他们..以 WIFI_LOCK 为例，并尽快释放 WAKE_LOCK..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T01:21:38.723

No need for using the wakelocks, as they are unreliable and buggy.

It would be more efficient to use the system's own version of keeping the screen on in a manageable way that is taken care of by Android:

Within the `onCreate` in your activity, do this:

```
getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON | 
                     WindowManager.FLAG_SHOW_WHEN_LOCKED); 
```

This is from the developer's API found [here](http://developer.android.com/reference/android/view/WindowManager.LayoutParams.html#FLAG_SHOW_WHEN_LOCKED):

> public static final int FLAG_SHOW_WHEN_LOCKED
> 
> Since: API Level 5 Window flag: special flag to let windows be shown when the screen is locked. This will let application windows take precedence over key guard or any other lock screens. Can be used with FLAG_KEEP_SCREEN_ON to turn screen on and display windows directly before showing the key guard window. Can be used with FLAG_DISMISS_KEYGUARD to automatically fully dismisss non-secure keyguards. This flag only applies to the top-most full-screen window.
> 
> Constant Value: 524288 (0x00080000)

By combining it with the efficient screen on flag, should get around the screen-lock facility. The only thing is to *make sure that your activity is the top-most on screen*.

To quote, on the usage of `FLAG_KEEP_SCREEN_ON` of [PowerManager](http://developer.android.com/reference/android/os/PowerManager.html)

> public static final int SCREEN_BRIGHT_WAKE_LOCK
> 
> This constant is deprecated. Most applications should use FLAG_KEEP_SCREEN_ON instead of this type of wake lock, as it will be correctly managed by the platform as the user moves between applications and doesn't require a special permission. Wake lock that ensures that the screen is on at full brightness; the keyboard backlight will be allowed to go off.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-09T08:52:21.020

当您的应用程序在后台运行时，无法接收 UDP 数据。因为您的客户端正在以多播的形式发送数据。当您的移动设备屏幕锁定并且应用程序在后台运行时，在这种情况下，移动硬件有 mac 过滤器和 ip 过滤器，它们只能接受指向属于设备的特定 IP 的数据。简单来说就是你需要做单播。例如：有客户端在特定套接字和 ip 上发送数据（在您的情况下，您可能在 255.255.255.255 上发送数据）并且如果有任何设备准备好在该端口上接收数据，则您的数据将在特定端口上广播它就像一个服务器，例如您的应用程序就像一个服务器，如果您的应用程序在前台运行，它会接收数据。并且当您在后台应用程序时应用程序不会。

因此，您要做的就是获取设备 IP 地址，并且必须在设备 IP 地址上发送数据，这意味着您将进行单播。在这种情况下，您的应用程序将接收运行在后台或前台的数据，并且您的手机屏幕被锁定。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-11T09:41:00.730

没有必要创建这样不起作用的代码——为什么不使用现成的软件呢？我们使用 Ozeki Phone System XE PBX 和 Android 手机（有 30 部 Android 手机通过 VoIP 连接到系统），它们可以正常工作。

看看这个：[链接](http://ozekiphone.com/what-is-rtcp-real-time-transport-control-protocol-322.html)

RTCP 协议处理从来没有问题。如果需要，请尝试试用版。

希望我能帮上忙。

# c++ - 可视化源

> ID：11298040
> 
> 赞同：0
> 
> 时间：2012-07-02T17:00:24.113
> 
> 标签：c++, architecture, diagram, flowchart

我正在尝试理解一个应用程序，但它的文档并没有很好地概述它是如何工作的，所以我的问题是：我怎样才能获得基于源代码的图表/流程图/运行时架构图片？它是 C++

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T17:02:17.427

[Doxygen](http://www.doxygen.nl)是解决问题的合理方法。

# c++ - 在多核机器上使用繁忙循环应用程序

> ID：11298042
> 
> 赞同：1
> 
> 时间：2012-07-02T17:00:49.653
> 
> 标签：c++, linux, posix, message-queue

可以在多核机器上使用忙循环应用程序吗？

我有几个应用程序，它们从 POSIX 消息队列中读取消息，进行处理并再次等待新消息。但是，据我了解，mq_timedreceive 是相当昂贵的操作，如果应用程序在 O_NONBLOCK 队列上执行 mq_receive，它的性能会更好（延迟更少）。因此，如果我保留几个 CPU（从 12 个）用于非阻塞消息处理，可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T17:12:32.507

> 所有，可以在多核机器上使用忙循环应用程序吗？

不管设备如何，是的，使用忙碌的等待是可以的。不，不建议这样做，不，很少有必要，但可以肯定的是——这是你的计算机，你的应用程序，去吧！

> 但是，据我了解，mq_timedreceive 是相当昂贵的操作，如果应用程序在 O_NONBLOCK 队列上执行 mq_receive，它的性能会更好（延迟更少）。因此，如果我保留几个 CPU（从 12 个）用于非阻塞消息处理，可以吗？

你有一种只能用数据来解决的疑问。进行测量，看看它是否确实像您认为的那样昂贵。没有什么可以告诉你的价值是它的一半。您的应用程序的性能期限以毫秒、微秒或纳秒（或每秒数百/数千/百万次操作的吞吐量数字）为单位。这与您的目标硬件的能力相结合将决定哪些解决方案是合适的。

# jquery - 像 Stack Overflow 这样的安全 AJAX 投票系统？（SharePoint 实现）

> ID：11298044
> 
> 赞同：0
> 
> 时间：2012-07-02T17:00:53.930
> 
> 标签：jquery, ajax, security, sharepoint-2010

我正在尝试在 C# 中为 SharePoint 构建一个应用程序，该应用程序将包含一个带有 upvote/downvote 系统的小组件。

这似乎有问题。如果我想让它安全，我会使用服务器端代码进行投票，但这听起来像是糟糕的用户体验。

使用 AJAX，用户体验要好得多，但您很容易受到黑客攻击。

我看到的主要漏洞是为用户分配投票。我假设无论接口（让我们假设 Ajax 到 List）这些都是 JavaScript 中设置的变量。

在浏览器中启动任何 JS 控制台并为帖子/问题提交投票似乎非常容易。

除非我想针对 page_load 上的用户名验证每一个投票（很多额外的周期），否则我觉得我仅限于在更新面板中嵌套中继器，并在该函数内部处理投票，生成 SPUser 身份服务器端。

任何使用过嵌套在带有按钮的更新面板中的中继器的人都会证明这是一场噩梦:(

我的替代方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T17:22:44.773

使用客户端变量的漏洞始终是一个问题，因此最好通过服务器端参与来减少利用的可能性。

您可以创建一个函数，该函数使用一个键来创建仅为当前用户创建的投票参数。如果传递的参数以任何方式被修改，即与预期的输出不匹配，则拒绝它。如果需要，您可以构建阻止特定用户投票的功能，如果他们超过了畸形请求的阈值。

然后，您可以在提交时确定当前用户是否已经对相应的项目进行了投票，以防止重复投票，尽管我会阻止用户首先投票以获得更好的用户体验。

# jsf - 为什么可以@Inject 一个@Stateless EJB 到一个@SessionScoped Managed Bean？

> ID：11298047
> 
> 赞同：3
> 
> 时间：2012-07-02T17:00:55.767
> 
> 标签：jsf, jsf-2, ejb, ejb-3.0, cdi

为什么可以将`@Inject`EJB`@Stateless`转换为`@SessionScoped`托管 Bean？

我只是很好奇，因为不可能将`@RequestScoped`托管 Bean 中的`SessionScoped`托管 Bean 用作托管属性。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T18:31:45.603

> 为什么可以@Inject 一个@Stateless EJB 到一个@SessionScoped Managed Bean？

这很有意义。您可能希望从有状态服务（例如购物流程）中访问无状态组件（例如验证服务）。CDI 引用是[代理](http://docs.jboss.org/weld/reference/latest/en-US/html/injection.html#d0e1429)的，因此该分辨率不存在技术问题。

> 我只是很好奇，因为不可能在 SessionScoped Managed Bean 中使用 @RequestScoped Managed Bean 作为托管属性。

您指的是 JSF 范围，而不是 CDI 范围，对吗？我不知道为什么该星座可能被禁止，但两个规范完全不相关，所以没有“*如果 A 在 JSF 中为真，那么 B 在 CDI 中必须为真*”-关系......

# c++ - 在没有项目的情况下使用 Dev c++ 在窗口中绘制文本

> ID：11298052
> 
> 赞同：0
> 
> 时间：2012-07-02T17:01:19.293
> 
> 标签：c++

我想在窗口中绘制文本。当我在项目中使用这个文件时，它运行良好，没有任何错误，当我单独运行它时，它显示以下错误。要求是仅使用 windows.h 和 .cpp 格式编译文件。

```
[Linker error] undefined reference to `TextOutA@20' 
ld returned 1 exit status 
```

我在网上搜索，每个人都说要添加gdi32 lib。但这只是添加到项目中。我想知道是否有人可以帮助解决这个问题。

```
#include <windows.h>
LRESULT CALLBACK WndProc (HWND, UINT, WPARAM, LPARAM) ;
int WINAPI WinMain (HINSTANCE hInstance, HINSTANCE hPrevInstance,LPSTR szCmdLine, int    iCmdShow)
{
static TCHAR szAppName[] = TEXT ("My Window") ;
HWND hwnd ;
MSG msg ;
WNDCLASS wndclass ;
wndclass.style = CS_HREDRAW | CS_VREDRAW ;
wndclass.lpfnWndProc = WndProc ;
wndclass.cbClsExtra = 0 ;
wndclass.cbWndExtra = 0 ;
wndclass.hInstance = hInstance ;
wndclass.hIcon = LoadIcon (NULL, IDI_APPLICATION) ;
wndclass.hCursor = LoadCursor (NULL, IDC_ARROW) ;
//wndclass.hbrBackground = (HBRUSH) GetStockObject (WHITE_BRUSH) ;
wndclass.hbrBackground = (HBRUSH) COLOR_WINDOW+0;//DISPLAYS GREY BACKGROUND OF CLIENT   AREA
wndclass.lpszMenuName = NULL ;
wndclass.lpszClassName = szAppName ;
if (!RegisterClass (&wndclass))
{
MessageBox (NULL, TEXT ("Window not Registered"),
szAppName, MB_ICONERROR) ;
return 0 ;
}
hwnd = CreateWindow (szAppName, // window class name
TEXT ("abcd"), // window caption
WS_BORDER | WS_CAPTION | WS_SYSMENU | WS_MINIMIZEBOX, // window style
CW_USEDEFAULT, // initial x position
CW_USEDEFAULT, // initial y position
400,300,
NULL, // parent window handle
NULL, // window menu handle
hInstance, // program instance handle
NULL) ; // creation parameters
ShowWindow (hwnd, iCmdShow) ;
UpdateWindow (hwnd) ;
while (GetMessage (&msg, NULL, 0, 0))
{
TranslateMessage (&msg) ;
DispatchMessage (&msg) ;
}
return msg.wParam ;
}
LRESULT CALLBACK WndProc (HWND hwnd, UINT message, WPARAM wParam, LPARAM lParam)
{
HDC hdc ;
PAINTSTRUCT ps ;
RECT rect ;
HRGN bgRgn;
HBRUSH hBrush;
HPEN hPen;
switch (message)
{
case WM_PAINT:
hdc = BeginPaint (hwnd, &ps) ;
GetClientRect (hwnd, &rect) ;
TextOut(hdc, 50, 42, "Johnny Carson", 13);
EndPaint (hwnd, &ps) ;
return 0 ;
case WM_DESTROY:
PostQuitMessage (0) ;
return 0 ;
}
return DefWindowProc (hwnd, message, wParam, lParam) ;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T17:05:11.723

> 我在网上搜索，每个人都说要添加gdi32 lib。但这只是添加到项目中。我想知道是否有人可以帮助解决这个问题。

您需要链接到 gdi32.lib，这是您尝试调用的代码所在的位置。它与“项目”无关，“项目”是 IDE 使用的术语，仅用作管理代码的模型。

您要求链接器为函数调用链接代码，但您不想告诉链接器该代码所在的位置。好吧，链接器赢了。

# html - CSS - 为 IE 设置的渐变

> ID：11298053
> 
> 赞同：0
> 
> 时间：2012-07-02T17:01:26.907
> 
> 标签：html, internet-explorer, css

如何为 IE 设置渐变，因为我在尝试但没有任何运气，我让它在 chrome、firefox、opera 上工作，但在 IE 中没有

```
html, body {  
    height: 100%;  
    background-image: -ms-linear-gradient(top, #BDE25E 0%, #8BB31D 100%);  
    background-image: -moz-linear-gradient(top, #BDE25E 0%, #8BB31D 100%);  
    background-image: -o-linear-gradient(top, #BDE25E 0%, #8BB31D 100%);  
    background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, #BDE25E), color-stop(1, #8BB31D));  
    background-image: -webkit-linear-gradient(top, #BDE25E 0%, #8BB31D 100%);  
    background-image: linear-gradient(to bottom, #BDE25E 0%, #8BB31D 100%);  
    background-repeat: no-repeat;  
    background-attachment: fixed;  
    font-family:Tahoma, Geneva, sans-serif;   
    color:#FFFFFF;   
    font-size:11px;   
} 
```

但是当我在 IE 中启动它时，我得到的是白色背景而不是绿色渐变。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T17:04:14.393

那里没有 IE 支持的代码。使用[colorzilla](http://www.colorzilla.com/gradient-editor/)创建跨浏览器渐变：

```
background: #bde25e; /* Old browsers */
background: -moz-linear-gradient(top, #bde25e 2%, #8bb31d 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(2%,#bde25e), color-stop(100%,#8bb31d)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top, #bde25e 2%,#8bb31d 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top, #bde25e 2%,#8bb31d 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top, #bde25e 2%,#8bb31d 100%); /* IE10+ */
background: linear-gradient(to bottom, #bde25e 2%,#8bb31d 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#bde25e', endColorstr='#8bb31d',GradientType=0 ); /* IE6-9 */ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T17:05:07.373

你必须在 IE 中使用它，

```
filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#BDE25E ', endColorstr='#8BB31D '); 
```

# jquery - 单击导航链接时使用 jQuery 为 div 的可见性设置动画

> ID：11298058
> 
> 赞同：0
> 
> 时间：2012-07-02T17:01:47.533
> 
> 标签：jquery, html, css

我是 jQuery 新手，我目前有一个 jQuery 函数，当您单击 div 框时，它会从隐藏位置删除 div。这可以很好地使用 css div 作为参数，但是当我尝试将两个导航链接解析为参数时它不起作用。

有人知道我在做什么错吗？

我想`.logobox`用`<a href>`链接替换。

```
<script type="text/javascript">
$(document).ready(function(){
    $('.logoBox').toggle(function(){
        $('.lowerContainer').slideDown();
    }, function(){
        $('.lowerContainer').slideUp();
    });
});
</script> 
```

这是不起作用的代码片段：

> `<script type="text/javascript"> $(document).ready(function(){ $('<a href="C:\Users\home.html">Home</a>').toggle(function(){ $('.lowerContainer').slideDown(); }, function(){ $('.lowerContainer').slideUp(); }); }); </script>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T19:13:17.467

尝试这个

```
<script type="text/javascript">
 $(document).ready(function(){
  $('.logoBox').mouseenter(function(){
    $('.lowerContainer').slideDown();
  });
  $('.logoBox').mouseleave(function(){
     $('.lowerContainer').slideUp();
  });
 });
</script> 
```

# python - Python 打开 Microsoft SQL Server MDF 文件

> ID：11298061
> 
> 赞同：3
> 
> 时间：2012-07-02T17:02:22.367
> 
> 标签：python, sql-server, database, pyodbc, mdf

如何在 Python 中打开 Microsoft SQL Server MDF 文件？

### 编辑

我试过`pyodbc.connect`了，但这需要一个合法的“服务器连接”——你不能简单地打开 MDF 文件——</p>

```
pyodbc.connect(driver='{SQL Server}', dbq=r'c:\database.mdf') 
```

（就像你对 MDB 文件所做的那样。）

> pyodbc.Error：未提供 DSN 或 SERVER 关键字

好的——</p>

```
pyodbc.connect(driver='{SQL Server}', dsn=r'c:\database.mdf') 
```

> pyodbc.Error：找不到数据源名称

我要做的就是列出它的模式，然后列出它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T18:23:20.970

您使用 Python 的事实与此处无关：.mdf 文件是二进制数据库文件，只能通过[将](http://msdn.microsoft.com/en-us/library/ms190209.aspx)其附加到 SQL Server 并通过服务器实例查询数据库来访问该文件。目前尚不清楚为什么这对您来说是个问题，因为 pyodbc 可以在 SQL Server 上正常工作（至少在 Windows 上）所以如果这不能回答您的问题，您可能需要扩展您正在尝试做的事情以及为什么您不能只连接到 SQL Server。

提及您的操作系统、Python 版本、SQL Server 版本等通常会有所帮助。

# linux - 不可预知的警报__忽略信号

> ID：11298062
> 
> 赞同：0
> 
> 时间：2012-07-02T17:02:23.537
> 
> 标签：linux, perl, signals, centos

`alarm__ignore`执行以下 foreach 循环时，我不断收到“ ”信号。奇怪的是，错误出现在循环的不同迭代中（即，有时是第三次，有时是第 26 次等），我无法确定它何时发生的任何押韵或原因。当我注释掉“ `my @cols = split(/\s+/, $line)`，”时，此脚本运行没有错误，但我无法弄清楚为什么拆分会导致信号。

这是代码：

```
my @forest = ();

foreach (@treeBlobs) {

    my @treeBlob = @{$_};

    my $thisTree = eval {

        my %tree = ();

        foreach my $line (@treeBlob) {
            my @cols = split(/\s+/, $line);
            $tree{id++} = {map{$CLASSIFIER_COLUMNS[$_] => $cols[$_]}(0..scalar @cols-1)};
        }

        return \%tree;

    };

    print "ERROR: $@\n" if $@; 
    push @forest, $thisTree;
    my $sc = scalar @forest;
    print "FOREST: $sc; $thisTree\n";
} 
```

这是一些示例输出：

```
...
FOREST: 19; HASH(0x4668c90)
FOREST: 20; HASH(0x4664e10)
FOREST: 21; HASH(0x4658e30)
FOREST: 22; HASH(0x465ca80)
FOREST: 23; HASH(0x4664860)
FOREST: 24; HASH(0x4664240)
FOREST: 25; HASH(0x46740b0)
FOREST: 26; HASH(0x4667a70)
FOREST: 27; HASH(0x465cf50)
FOREST: 28; HASH(0x465cfd0)
ERROR: __alarm__ignore__(54)

FOREST: 29;
FOREST: 30; HASH(0x465ada0) 
```

同样，错误并不总是（甚至通常）发生在循环的第 29 次迭代中——它可能发生在任何迭代中。

想法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T17:19:00.907

您没有显示引发异常的原因。听起来您正在使用`alarm`与`$SIG{ALRM}`处理程序结合使用将信号转换为异常。

# c++ - 在 SDL_blitsurface 中使用 SDL_Rect 向量时出现 c++ 运行时错误

> ID：11298063
> 
> 赞同：1
> 
> 时间：2012-07-02T17:02:31.377
> 
> 标签：c++, sdl, codeblocks, block

l SDL_BlitSurface(tileSheets.at(sheet), &clip[tile], screen, &tileBox);

工作得很好，我像这样初始化剪辑：

```
clip[ 0 ].x = x;
clip[ 0 ].y = y;
clip[ 0 ].w = 48;
clip[ 0 ].h = 48;
x += 48;
clip[ 1 ].x = x;
clip[ 1 ].y = y;
clip[ 1 ].w = 48;
clip[ 1 ].h = 48; 
```

然而，这根本不起作用

```
SDL_BlitSurface(tileSheets.at(sheet), &clip.at(tile), screen, &tileBox); 
```

我像这样初始化它们：

```
for(int i = 0; i < number; i++)
    {
        SDL_Rect clipBox = {x,y,48,48};
        clip.push_back(clipBox);
    } 
```

这是我得到的错误：http: [//imageshack.us/photo/my-images/836/83468944.png/](http://imageshack.us/photo/my-images/836/83468944.png/)

有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T18:00:58.613

尝试其中之一：

```
 /* 1) */  SDL_Rect clipBox(x,y,48,48);
 /* 2) */  clip.push_back(SDL_Rect(x,y,48,48)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T17:15:44.830

不知道变量剪辑的类型，但可能是您将堆栈中的变量推送到向量，因此一旦您退出 for 循环的范围，它们就会变为无效。

# lwuit - 访问代号一资源编辑器元素

> ID：11298065
> 
> 赞同：1
> 
> 时间：2012-07-02T17:02:48.340
> 
> 标签：lwuit, lwuit-resource-editor, codenameone

我正在尝试使用[CODENAME ONE快速创建一个模拟应用程序](http://www.codenameone.com)

我发现资源编辑器很难理解。

1）我创建一个表单并在其上放置一个按钮。

2）我创建了另一个带有消息“Hellow World”的表单

3) 我使用资源编辑器向 FORM 1 上的按钮添加了一个动作事件，netbeans 打开了一个实现该动作的方法。

4）现在我希望在该方法中编写一些代码来显示 form2 ("Hello World") 。我该怎么做呢？

Q1) 在这种情况下，我如何引用 form2 的对象？

Q2）另外，在 form2 的显示上，我希望在其上添加一个文本框。我如何使用资源编辑器做到这一点？

我的基本问题是我们如何通过 CODE 引用资源编辑器创建的元素？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T19:35:03.327

最简单的事情是将按钮设置为命令，然后在动作中选择目标表单（注意这将有效地禁用动作事件）。

或者，您可以调用：`showForm("formName", null);`从代码。

要将元素添加到现有表单，您需要决定它们应该在哪里。例如，目标表单有一个容器，您想在其中放置 TextArea？

只需`Container`在 GUI 构建器中将其命名为“MyDestContainer”。现在，当您想要添加文本区域时，您可以使用以下方法获取指向容器的指针：

```
 Container dest = findMyDestContainer(Display.getInstance().getCurrent()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-03T20:41:02.770

你可以为这波做

![在此处输入图像描述](../Images/1073ccdd142209595b33ca54abefa1da.png)

```
showForm("Ingreso_Recibo", null); 
```

# symfony - 有没有办法使用 symfony2 实体验证作为教义验证？

> ID：11298066
> 
> 赞同：4
> 
> 时间：2012-07-02T17:02:55.517
> 
> 标签：symfony, doctrine-orm

我正在开发一个使用几种形式的 Symfony2 应用程序。表单中的数据使用 Doctrine2 持久化到 MySQL 数据库中。我使用 Symfony 注释对实体设置了一些约束。现在，当用户未能在表单中输入适当的数据时，他会收到一条错误消息，但是，当我尝试使用 Command 对象操作相同的实体时，我不会收到任何异常或错误。

从我阅读的文档中，Symfony 和 Doctrine 的验证作为单独的机制工作，现在......有没有办法让它们作为一个整体工作？我要避免的是为实体对象编写相同的验证，以便将它们用作前端和后端验证。谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-02T17:12:39.160

表单会在您调用时自动验证，`$form->isValid()`但如果您想验证表单之外的对象，则必须手动调用它。

在您的命令类中，只需`validator`在持久化之前获取服务并验证您的对象。

```
$validator = $this->container->get('validator');
$errors = $validator->validate($myEntity);

if (count($errors) > 0) {
    return new Response(print_r($errors, true));
} else {
    return new Response('The entity is valid!');
} 
```

更多的文档在这里[http://symfony.com/doc/master/book/validation.html#using-the-validator-service](http://symfony.com/doc/master/book/validation.html#using-the-validator-service)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-12-19T05:50:13.520

当然你可以： [http ://symfony.com/doc/current/book/validation.html#constraint-configuration](http://symfony.com/doc/current/book/validation.html#constraint-configuration)

单击示例的“注释”选项卡。您可以在实体中添加带有 ORM 注释的验证条件

# ruby-on-rails - Rails AJAX：既不成功也不失败回调触发

> ID：11298068
> 
> 赞同：0
> 
> 时间：2012-07-02T17:03:18.267
> 
> 标签：ruby-on-rails, ajax

我在一些 JavaScript 中嵌入了以下 AJAX 代码：

```
$.ajax({
  type: 'POST',
  url: '/books',
  data: {'book[author]':tags[i].book.author, 'book[edition]':tags[i].book.edition, 'book[title]':tags[i].book.title, 'book[url]':newBookUrl},
  dataType: 'json',
  async: false,
  success: function(data){
    mapcode+=" href='javascript:lightbox("+data+")' />";
    alert(mapcode);
  },
  fail: function(){mapcode+=" href='' onclick='return false;' />";
    alert(mapcode);}
}); 
```

它调用了这个模型中的 create 方法：

```
 def create
    book = Book.new(params[:book])
    if (Book.find_by_url(book.url))
     book = Book.find_by_url(book.url)
    else
      book.save
    end
    book.users << current_user
    render :json => book.url
  end 
```

由于某种原因，成功和失败回调都没有触发。否则，AJAX 似乎正在工作。新数据上传到数据库，根据 Firebug，我得到了 JSON 返回的 book.url。知道这里发生了什么吗？

# android - 无法让 Jdom 使用 Eclipse 与 android 1.6 或 2.1 一起工作

> ID：11298071
> 
> 赞同：0
> 
> 时间：2012-07-02T17:03:37.997
> 
> 标签：android, xml, eclipse, installation, jdom

我正在尝试将 jdom 安装到 Eclipse 上，以便可以在我的 Android 项目中使用它。我希望它是 Android 1.6，但没有奏效，我也一直试图让它在 android 2.1 上工作，但仍然没有奏效。我已经下载了 jdom 2.0.2 并将 .jar 文件放入构建库中，但仍然

```
 import org.jdom.Document; 
```

或任何 import org.jdom 都不起作用。

有谁知道该怎么做，如果没有，是否有任何其他 xml 解析器在解析它们之前不需要知道标签/元素名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T17:10:59.753

SimpleXML 在 android 上运行良好。[http://simple.sourceforge.net/](http://simple.sourceforge.net/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T17:21:35.557

使用 JDOM 2.0.2，您应该导入 org.jdom2.* 而不是 org.jdom.*

尽管基于此问题/答案，它可能不适用于 Android 2.2 之前的版本： [https ://stackoverflow.com/questions/10992743/using-jdom-2-0-1-with-android-below-api- 2-2 问题与 saxbuilder](https://stackoverflow.com/questions/10992743/using-jdom-2-0-1-with-android-below-api-2-2-problems-with-saxbuilder)

罗尔夫

# c# - 将数据从 ashx 传输到 aspx。使asp图像控件识别要显示的图像 - asp.net c#

> ID：11298072
> 
> 赞同：0
> 
> 时间：2012-07-02T17:04:01.507
> 
> 标签：c#, asp.net, image, handler

page.aspx.cs 代码：

```
HttpContext.Current.Session["id1"] = id1.ToString();
Server.Transfer("Handler.ashx"); //Getting error
Image1.ImageUrl = "~/Handler.ashx?ID=" + id1.ToString();

HttpContext.Current.Session["id2"] = id2.ToString();
Server.Transfer("Handler.ashx"); //Getting error
Image2.ImageUrl = "~/Handler.ashx?ID=" + id2.ToString(); 
```

Handler.ashx 代码：

```
public void ProcessRequest(HttpContext context)
{
    int id = Convert.ToInt32(context.Session["id1"]);
    byte[] IMG = class.ReadImg(id);
    context.Response.ContentType = "image/jpg";
    context.Response.BinaryWrite(IMG);
}
public void ProcessRequest2(HttpContext context2)
{
    int id = Convert.ToInt32(context2.Session["id2"]);
    byte[] IMG2 = class.ReadImg(id);
    context2.Response.ContentType = "image/jpg";
    context2.Response.BinaryWrite(IMG2);
} 
```

page.aspx 代码：

```
<asp:Image ID="Image1" runat="server" />//How to define thats gonna show image of id1
<asp:Image ID="Image2" runat="server" />//How to define thats gonna show image of id2 
```

**问题：**

1.  我无法将数据从 page.aspx 传输到 Handler.ashx
2.  我不知道如何制作`Image`元素来根据 id 来识别它应该显示的图像（也许是一些`request.queryString`我不明白的魔法）

帮助！！谢谢 ：]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T17:12:51.800

Server.Transfer() 执行它所说的 - 在服务器端传输请求，而不向客户端返回 HTTP 301 重定向。

只需读取 ashx 文件中的查询字符串即可解决您的问题：

```
string id = context.Request.Querystring["ID"];
context.Response.ContentType="image/jpeg";
...... 
```

然后在您的 aspx 页面中：

```
Image1.ImageUrl = "/Handler.ashx?ID="+id.ToString(); 
```

# cocoa-touch - 检查各种 CoreData 对象

> ID：11298074
> 
> 赞同：0
> 
> 时间：2012-07-02T17:04:12.100
> 
> 标签：cocoa-touch, core-data

我认为最简单的方法是获取所需实体的所有对象，然后检查我需要的属性。我的问题是：如何获取数据并将其存储在一个`NSArray`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T18:42:02.167

执行此操作的正确方法可能是使用 NSPredicate 和 NSFetchrequest，这是一个涉及检查关系和检查属性的示例，然后将结果作为数组返回。

```
-(NSArray *)pointsInSection:(NSInteger)section{
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription
                               entityForName:@"TourPoint" inManagedObjectContext:self.managedObjectContext];
[fetchRequest setEntity:entity];

NSPredicate *predicate = [NSPredicate predicateWithFormat:@"tour == %@ && section == %i", theTour, section];
[fetchRequest setPredicate:predicate];

NSSortDescriptor *rowSort = [[NSSortDescriptor alloc] initWithKey:@"row" ascending:YES];
[fetchRequest setSortDescriptors:[NSArray arrayWithObjects:rowSort, nil]];
return [self.managedObjectContext executeFetchRequest:fetchRequest error:nil]; 
```

}

# wpf - 绘制 XAML 图像

> ID：11298076
> 
> 赞同：0
> 
> 时间：2012-07-02T17:04:14.783
> 
> 标签：wpf, xaml, 3d

我们的产品目前使用 WPF 绘制零件的 3d 图像，这些零件是使用从 ModelVisualBase 继承的对象在代码中动态创建的。到目前为止，这些零件非常简单，由立方体和圆柱体制成。

我们现在被要求展示更复杂的零件，因此希望使用制造商提供的图像。我发现波前图像 (.obj) 可以导入 Expression Blend 或直接作为 XAML。我还发现了一个关于从一个视口中提取图像并导入另一个[WPF 的先前问题：如何将 3D 对象从 xaml 文件添加到我的 viewport3D？](https://stackoverflow.com/questions/3580153/wpf-how-to-add-3d-object-from-xaml-file-to-my-viewport3d). 但是，此示例未显示如何重复该过程并控制每个零件的位置。

那么，是否可以在 XAML 中拥有各个部分的库图像，然后在正确的位置重复绘制它们？

# php - 如何将 PHPUnit 测试保存为单独的 TAP 结果

> ID：11298077
> 
> 赞同：2
> 
> 时间：2012-07-02T17:04:26.967
> 
> 标签：php, unit-testing, jenkins, phpunit, tap

我有一个使用 PHPUnit 运行一些单元测试的 jenkins 设置。

我希望每个单元测试用例都保存为单独的点击结果文件。

例如 和 的结果`testOneTest.php`将`testTwoTest.php`分别保存为`testOneTest.tap`和`testTwoTest.tap`。这会在 Jenkins UI 中更好地呈现构建结果。

我已经为 PHPUnit 定义了一个[XML 配置文件](http://www.phpunit.de/manual/3.7/en/appendixes.configuration.html)，但是从文档中，我只能看到保存为单击结果文件的选项：

`<log type="tap" target="/tmp/logfile.tap"/>`

是否可以保存多个 TAP 结果？干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T17:15:56.133

如果您使用[XML 配置文件](http://www.phpunit.de/manual/3.7/en/appendixes.configuration.html)，只需创建两个具有不同输出名称的不同配置文件。根据您调用 phpunit 的方式，它可能如下所示：

```
1> phpunit -c /your/xml/configfile1.xml testOneTest.php
2> phpunit -c /your/xml/configfile2.xml testTwoTest.php 
```

您也可以将输出参数提供给 phpunit：

```
1> phpunit --log-tap /tmp/logfile1.tap testOneTest.php
2> phpunit --log-tap /tmp/logfile2.tap testTwoTest.php 
```

# c# - 如何处理 .net Web 应用程序中带有参数的长查询

> ID：11298079
> 
> 赞同：0
> 
> 时间：2012-07-02T17:04:37.950
> 
> 标签：c#, web-applications, .net-4.0, sql-server-2008-r2

假设您有一个长而复杂的查询来提取需要一些参数的所需结果。任何都可以，但为了举例：

```
SELECT
    q.PROD_ID, q.NAME, q.STANDARD_PROD, q.DESCRIPTION, q.PART_NUMBER,
    q.COMMENTS, q.DESCRIPTION_URL,
    PROD_CATEGORY.DESCRIPTION AS CATEGORY_DESCRIPTION,
    PROD_TYPES.DESCRIPTION AS PROD_TYPE
FROM
    (SELECT
        PROD.PROD_ID,
        PROD.PROD_TYPE_ID,
        PROD.NAME,
        PROD.STANDARD_PROD,
        PROD.PROD_CATEGORY_ID,
        PROD.DESCRIPTION,
        PROD.PART_NUMBER,
        PROD.COMMENTS,
        PROD.DESCRIPTION_URL
     FROM
        (SELECT
            PROD_ID,
            PROD_TYPE_ID
         FROM
            XREF_PRODSYS
         WHERE
            (PROD_TYPE_ID = (SELECT
                                PROD_TYPE_ID
                             FROM
                                PROD_TYPES
                             WHERE
                                (NAME LIKE @prod_type_name)))) AS p
     LEFT OUTER JOIN PROD ON p.PROD_ID = PROD.PROD_ID
     WHERE
        (PROD.NAME LIKE @prod_name)
        AND (PROD.HIDDEN = 0)) AS q
LEFT OUTER JOIN PROD_CATEGORY ON q.PROD_CATEGORY_ID = PROD_CATEGORY.PROD_CATEGORY_ID
LEFT OUTER JOIN PROD_TYPES ON q.PROD_TYPE_ID = PROD_TYPES.PROD_TYPE_ID 
```

此特定查询采用两个参数，可能通过 GET/POST 传递给 .NET Web 应用程序。

有没有更简洁的方法来存储这么长的查询，而不是把它放在 webapp 页面的 C# 源代码中？我知道下面的“快速而肮脏”的方法效果很好，但它确实使代码扩展了很多并且变得有点难以管理。例如：

```
 //inside Page_Load...
    SqlCommand cmd = new SqlCommand();
    cmd.Connection = con;
    cmd.Parameters.Add("@prod_type_name", SqlDbType.VarChar).Value = _type_name;
    cmd.Parameters.Add("@prod_name", SqlDbType.VarChar).Value = _prod_name;
    cmd.CommandText = @"
    SELECT     q.PROD_ID, q.NAME, q.STANDARD_PROD, q.DESCRIPTION, q.PART_NUMBER, q.COMMENTS, q.DESCRIPTION_URL, 
              PROD_CATEGORY.DESCRIPTION AS CATEGORY_DESCRIPTION, PROD_TYPES.DESCRIPTION AS PROD_TYPE
    FROM         (SELECT     PROD.PROD_ID, PROD.PROD_TYPE_ID, PROD.NAME, PROD.STANDARD_PROD, PROD.PROD_CATEGORY_ID, PROD.DESCRIPTION, 
                                      PROD.PART_NUMBER, PROD.COMMENTS, PROD.DESCRIPTION_URL
               FROM          (SELECT     PROD_ID, PROD_TYPE_ID
                                       FROM          XREF_PRODSYS
                                       WHERE      (PROD_TYPE_ID =
                                                                  (SELECT     PROD_TYPE_ID
                                                                    FROM          PROD_TYPES
                                                                    WHERE      (NAME LIKE @prod_type_name)))) AS p LEFT OUTER JOIN
                                      PROD ON p.PROD_ID = PROD.PROD_ID
               WHERE      (PROD.NAME LIKE @prod_name) AND (PROD.HIDDEN = 0)) AS q LEFT OUTER JOIN
              PROD_CATEGORY ON q.PROD_CATEGORY_ID = PROD_CATEGORY.PROD_CATEGORY_ID LEFT OUTER JOIN
              PROD_TYPES ON q.PROD_TYPE_ID = PROD_TYPES.PROD_TYPE_ID
              ";
              //... do stuff with cmd 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T17:06:30.077

为什么不把这一切都放在一个存储过程中并调用存储过程，适当地传递参数呢？

[如何创建存储过程](http://msdn.microsoft.com/en-us/library/ms345415.aspx)

```
...
cmd.CommandText = "sprocname";
cmd.CommandType = CommandType.StoredProcedure
... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T17:08:08.040

这可能是存储过程有意义的地方。它肯定会清理你的源代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-02T17:06:58.263

把它放到一个存储过程中。或者是一个充满 SQL 语句字符串常量的文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-02T17:21:46.117

另一个注意事项：通过一些思考，您可以将 carpy 查询重写为如下所示：

```
SELECT PROD.PROD_ID, PROD.NAME, PROD.STANDARD_PROD, PROD.DESCRIPTION, 
       PROD.PART_NUMBER, PROD.COMMENTS, PROD.DESCRIPTION_URL, 
       PROD_CATEGORY.DESCRIPTION AS CATEGORY_DESCRIPTION, 
       PROD_TYPES.DESCRIPTION AS PROD_TYPE 
FROM  XREF_PRODSYS
JOIN  PROD_TYPES 
  ON PROD_TYPES.PROD_TYPE_ID = XREF_PRODSYS.PROD_TYPE_ID
LEFT OUTER JOIN PROD 
  ON p.PROD_ID = PROD.PROD_ID AND PROD.NAME LIKE @prod_name AND PROD.HIDDEN = 0
LEFT OUTER JOIN PROD_CATEGORY 
  ON q.PROD_CATEGORY_ID = PROD_CATEGORY.PROD_CATEGORY_ID 
WHERE  PROD_TYPES.NAME LIKE @prod_type_name 
```

您可能会看到改进。（我确信有更好的方法来获取相同的信息，但这无需我猜测/假设您的数据库是如何设计的。但我希望这个查询应该从 PROD 而不是 XREF_PRODSYS 作为第一个表中选择。）

您的查询带有实体框架的味道，对吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-02T17:27:15.457

存储过程是 Justin 列出的一种方式。

通常在构建 Web 应用程序时，我和其他许多人会将数据访问层拆分为另一个项目或类。我通常构建 5 层：数据库 <->（无论哪种方式，你的 SQL 都需要去某个地方；应该去这里 IMO，或者在数据库中，或者至少是另一个类）数据访问层 <-> 业务对象层 <-> 代码隐藏<-> HTML/Razor。这使得代码更易于管理，同样重要的是可重用。

# magento - Magento 网格列排序

> ID：11298081
> 
> 赞同：5
> 
> 时间：2012-07-02T17:05:00.163
> 
> 标签：magento, adminhtml

曾几何时，我尝试创建一些自定义列。我创建了我应该拥有的整个 XML 结构。我创建了控制器。我什至创建了自定义网格控制器。

创建自定义网格后，我认为列会排序。我错了，大错特错。单击列标题什么也不做。

建议？

```
class Company_Googlemerchant_Block_Adminhtml_Products_Grid extends Mage_Adminhtml_Block_Widget_Grid
{
public function __construct()
{
    parent::__construct();
    $this->setId('gm_product_grid');
    $this->setDefaultSort('id');
    $this->setDefaultDir('ASC');
    $this->setSaveParametersInSession(false);
}

protected function _prepareCollection()
{
    $storeId = 1;
    $collection = Mage::getModel('catalog/product')->getCollection()->addStoreFilter($storeId);
    $collection
        ->addAttributeToSelect('enable_googlemerchant')
        ->addAttributeToSelect('name')
        ->addAttributeToSelect('entity_id')
        ->addAttributeToSelect('type_id')
        ->addAttributeToSelect('status')
        ->addFieldToFilter('enable_googlemerchant', array( "eq" => '1') )
        ->addFieldToFilter('status', array( "eq" => '1') )
        ->addAttributeToSort('name', 'asc')
        ;

    $this->setCollection($collection);

    return parent::_prepareCollection();
}

protected function _prepareColumns()
{
    $this->addColumn('id', array(
      'header'    => Mage::helper('googlemerchant')->__('ID'),
      'align'     =>'left',
      'index'     => 'entity_id',
      'width'     => '100px',
    ));

    $this->addColumn('product_name', array(
      'header'    => Mage::helper('googlemerchant')->__('Product Name'),
      'align'     =>'left',
      'index'     => 'name',
      'width'     => '250px',
    ));

    $this->addColumn('type_id', array(
      'header'    => Mage::helper('googlemerchant')->__('Product Type'),
      'align'     =>'left',
      'index'     => 'type_id',
      'width'     => '100px',
    ));

    $this->addColumn('action', array(
        'header'  => Mage::helper('googlemerchant')->__('Action'),
        'width'   => '100px',
        'type'    => 'action',
        'getter'  => 'getId',
        'actions' => array(
            array(
                'caption' => Mage::helper('googlemerchant')->__('Remove from export'),
                'url'     => array( 'base'   => '*/*/removeexport' ),
                'field'   => 'id'
            )
        ),
        'filter'    => false,
        'sortable'  => true,
        'index'     => 'id',
    ));

    return parent::_prepareColumns();
} 
```

}

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-02T21:34:55.730

您应该删除此行：

```
->addAttributeToSort('name', 'asc') 
```

如果要通过某些属性设置默认排序，则需要使用网格块的 setDefaultDir 方法：

```
$this->setDefaultSort('name');
$this->setDefaultDir('asc'); 
```

setId 方法不可能是这个问题的原因。此外，您应该为您的 adminhtml 控制器实现 gridAction，该控制器将返回已排序网格的 html。像这样的东西：

```
class My_Module_Adminhtml_EntityController extends Mage_Adminhtml_Controller_Action {
...................................................
    public function gridAction()
    {
        $this->loadLayout();
        // for AJAX queries
        $this->getResponse()->setBody(
            // it means that you have difened class My_Module_Block_Adminhtml_Entity_Grid
            $this->getLayout()->createBlock('my_module/adminhtml_entity_grid')->toHtml()
        );
    }
} 
```

# coldfusion - 如何包含 ColdFusion 代码但未对其进行处理？

> ID：11298091
> 
> 赞同：2
> 
> 时间：2012-07-02T17:05:33.800
> 
> 标签：coldfusion, coldfusion-8, cffile

我正在使用 ColdFusion 8。

我正在创建一些代码来创建一个文件夹并插入一个文件。该文件稍后将由人工进行调整。

我创建这样的目录：

```
<cfdirectory action="create" directory="#LOCAL.PathToCreate#"> 
```

接下来，我需要创建一个名为 index.cfm 的文件。现在，需要进入 index.cfm 文件的内容在 Test-21-index.txt 中。我创建这样的内容：

```
<cfsavecontent variable="LOCAL.MyContent">
    <cfinclude template="Test-21-index.txt">
</cfsavecontent>
<cffile action="write" file="#NewTreatmentPath##LOCAL.NewFile#" output="#LOCAL.MyContent#" nameconflict="overwrite"> 
```

Test-21-index.txt 的内容中包含 ColdFusion 代码。我遇到的问题是当我包含文件 Test-21-index.txt 时，ColdFusion 代码正在运行。

如何将代码创建为在文件创建期间未运行的文本文件？

更新 ~ 有这么多工具可用于实施我的解决方案，我只需要正确的组合。我没有读取文件，使用 cfsavecontent，然后写入文件，而是复制了文件。啊。那太容易了。

```
<cffile action="copy" source="#CurrentDirectory#\#LOCAL.FileToInclude#" destination="#NewTreatmentPath#\#LOCAL.NewFile#"> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T17:12:31.273

`cfinclude`您可以使用`cffile`读取文件，然后在`cfsavecontent`标签中输出其内容，而不是使用：

```
<cffile action="read" file="test-21-index.txt" variable="fileContent" />

<cfsavecontent variable="LOCAL.MyContent">
   <cfoutput>#filecontent#</cfoutput>
</cfsavecontent>

<!--- or even <cfset LOCAL.MyContent = fileContent /> --->

<cffile action="write" file="#NewTreatmentPath##LOCAL.NewFile#" output="#LOCAL.MyContent#" nameconflict="overwrite"> 
```

代码未经测试，但我认为它应该可以工作。不过，我相信您将需要找到一条与众不同的道路`test-21-index.txt`。

# css - CSS 强制子元素适应父元素

> ID：11298093
> 
> 赞同：3
> 
> 时间：2012-07-02T17:05:59.570
> 
> 标签：css, height, overflow

如何强制子元素适合父元素，即在#content 上显示滚动条？

[http://jsfiddle.net/vzaVc/](http://jsfiddle.net/vzaVc/)

HTML：

```
<div id="parent">
    <div id="header">
        varied-sized header
    </div>
    <div id="content">
        the real content<br>
        this can be so long<br>
        that it doesn't fit into the parent<br>
        so this should get a scroll bar<br>
        so that the user can... scroll it down<br>
    </div>
</div>​ 
```

CSS：

```
#parent {
    background-color: red;
    display: inline-block;
    width: 200px;
    height: 300px;
}
#header {
    background-color: yellow;
    font-size: 32px;
    margin: 20px;
}
#content {
    background-color: green;    
    font-size: 24px;
    margin: 20px;
    overflow: auto;
}​ 
```

**编辑：**

我可以在不指定#content 的高度的情况下离开吗？计算该属性的正确值可能既困难又麻烦（如果其他事情发生变化）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T17:09:26.137

如果你想`#content`有一个滚动条，添加一个 CSS`height`属性和`overflow`，例如

```
height: 160px;
overflow-y: scroll; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T17:07:57.197

将此添加到`#parent`CSS 中：

```
overflow: scroll; 
```

或者如果您希望孩子有滚动条，请将其添加到孩子的 CSS 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T17:13:56.320

如果您*总是*想显示滚动条，答案是——正如另一个回复中提到的——添加`overflow-y: scroll;`到 CSS 中。

但是，如果您只想在内容太大时显示滚动条，答案是设置绝对高度，然后使用`overflow-y:auto;`：

```
height: 180px;
overflow-y: auto; 
```

需要注意的重要一点是，如果 overflow-x 和 overflow-y 不匹配，则应用的默认值是 auto。因此，如果您有`overflow-x: hidden`and `overflow-y: visible`，浏览器会将其解释为`overflow: auto`. 只是要记住的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T17:49:03.247

为了回答编辑，我通常将子对象的高度指定为百分比，这使其成为父元素高度的百分比。

```
height: 80%;
top: 15%; 
```

这将使其始终为父对象高度的 80%，距底部有 5% 的边距，距顶部有 15% 的边距，以适合您的标题。

# objective-c - NSFetchedResultsController 在使用 NSPrivateQueueConcurrencyType 从 NSManagedObjectContext 获取时为空

> ID：11298094
> 
> 赞同：0
> 
> 时间：2012-07-02T17:06:17.717
> 
> 标签：objective-c, ios, core-data

我正在使用 UIDocument 访问核心数据并尝试在后台线程中设置 NSFetchedResultsController 以不阻塞主 UI。如果我使用 uidocument 的 managedobjectcontext 而不是孩子，它会起作用。我在堆栈溢出时从此处的答案之一中获取了其中的一些代码，但无法使其与 fetchedresultscontroller 一起使用。

```
[ZH peopleDocumentusingBlock:^(UIManagedDocument *peopleDoc){
NSManagedObjectContext *context = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];
        context.parentContext = peopleDoc.managedObjectContext;
        [context performBlock:^{
             NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Person"];
           request.sortDescriptors = [NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"key" ascending:YES]];
            [NSFetchedResultsController deleteCacheWithName:nil];
            NSPredicate *predicate = [NSPredicate predicateWithFormat:@"imageurl.length>0"];
            request.predicate = predicate;

            NSError *error = nil;
            if(!self.totalNumberOfPeople) //set total number of people for this fetch used for show more records
            {
                self.totalNumberOfPeople = [context countForFetchRequest:request error:&error]; 
                NSLog(@"total number of people -> %d",self.totalNumberOfPeople);

            }

                self.fetchedResultsController = [[NSFetchedResultsController alloc]initWithFetchRequest:request managedObjectContext:context sectionNameKeyPath:nil cacheName:@"peopleCache"];
dispatch_async(dispatch_get_main_queue(), ^{
                    [self.delegate refreshPeoplelTableview];
                    NSLog(@"fetched objects -> %d",[self.fetchedResultsController.fetchedObjects count]);
                    NSLog(@"total number of people -> %d",self.totalNumberOfPeople);

                });
    }];
}]; 
```

实际上`context countforfetchrequest`会但不是 fetcheresultscontroller。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T23:22:52.723

您正在使用“半永久性”FRC（它是控制器的实例变量），但将其设置为使用“临时”MOC，当没有人再使用它时，它就会消失。

我不遵循您真正想做的事情，但是我认为如果您存储“临时” MOC，它将起作用。但是，您必须首先问为什么要这样做。

在 parentContext 和 performBlock 之间插入代码

```
 context.parentContext = peopleDoc.managedObjectContext;
    // Keep the MOC with the FRC...
    self.myBackgroundFetchingMoc = context;
    [context performBlock:^{ 
```

# python - 使用 Pandas 连接不同长度的 TimeSeries

> ID：11298097
> 
> 赞同：2
> 
> 时间：2012-07-02T17:06:58.057
> 
> 标签：python, dataframe, concat, pandas

我`pandas`在python中使用。我有几个按日期索引的系列，我想将它们连接到一个 DataFrame 中，但是由于缺少日期等，系列的长度不同。我希望匹配的日期匹配，但是缺少数据对其进行插值或仅使用前一个日期或类似的东西。最简单的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:11:33.207

如果 Series 在 dict`data`中，您只需执行以下操作：

`frame = DataFrame(data)`

这会将事情放入 DataFrame 并合并所有日期。如果要向前填充值，可以调用`frame = frame.fillna(method='ffill')`.

# visual-c++ - 我如何在 cpu 中运行程序的某些部分和在 gpu 中运行程序的某些部分？

> ID：11298100
> 
> 赞同：1
> 
> 时间：2012-07-02T17:07:10.867
> 
> 标签：visual-c++, opencl

我想编写一个程序，其中一些代码在 cpu 中运行，而另一些在 gpu 中运行。我想使用opencl。如果可以，我可以怎么做？我想使用Visual Studio。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T11:45:36.087

You can use multiple devices in OpenCL. Use the given APIs to get info on devices and then use the handle to create context on each device. Rest is as easy as a simple OpenCL program. You can also launch a task-parallel kernel. More info is available in AMD/nVIDIA OpenCL Programming Guide.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T03:06:50.767

你绝对可以做到，这就是 CPU+GPU 组合的大型程序。如果您认为您的部分代码可以并行化，例如展开几个循环，或者如果您正在处理断开连接的数据集，那么将这些项目放在 GPU 上。如果它是顺序的并且需要大量同步并且确实在某些循环上忙于等待，则将其放入 CPU 中。

实现这一点的方法很简单，首先在主机部分编写您的算法/逻辑，然后使用 OpenCL API 函数设置 GPU 以执行并行代码，在 GPU 计算单元上运行的函数称为内核，因此您需要编写一个OpenCL (C99) 语言中的核函数。

网络上有很好的指导可以帮助您完成此任务。

1.  AMD APP SDK 2.7 [http://developer.amd.com/sdks/AMDAPPSDK/downloads/Pages/default.aspx](http://developer.amd.com/sdks/AMDAPPSDK/downloads/Pages/default.aspx) 您将获得大量 OpenCL 示例，从简单的 hello world 到以简单方式实现的复杂算法。

2.  AMD APP Profiler 这与 AMD APP SDK 2.7 一起提供，可帮助您分析您编写的内容

3.  AMD gDEBugger [http://developer.amd.com/tools/gDEBugger/Pages/default.aspx](http://developer.amd.com/tools/gDEBugger/Pages/default.aspx)

这有助于您在 GPU 中调试 OpenCL 程序，主机代码调试使用 Visual Studio 调试器。

英特尔还提供了类似的示例，请看这里： http: [//software.intel.com/en-us/articles/vcsource-samples/](http://software.intel.com/en-us/articles/vcsource-samples/)

Nvidia 示例在这里：http: [//developer.download.nvidia.com/compute/cuda/3_0/sdk/website/OpenCL/website/samples.html](http://developer.download.nvidia.com/compute/cuda/3_0/sdk/website/OpenCL/website/samples.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T05:37:05.613

也许您可以尝试使用微软支持的[AMP 。](http://msdn.microsoft.com/en-us/library/hh265137%28v=vs.110%29.aspx)

# node.js - Node.js/express.js/Backbone.js：req.body.keys 未定义？

> ID：11298103
> 
> 赞同：1
> 
> 时间：2012-07-02T17:07:28.920
> 
> 标签：node.js, backbone.js, express, ecmascript-5

我在客户端使用 Backbone.js，在服务器上使用 express.js，我正在尝试通过 Backbone 保存/放置模型更新。我没有对 Backbone.sync 做任何事情，所以它应该只是普通的旧 $.ajax。

在服务器上，我有一个简单的

```
app.put('my-url', function(req, res){
  req.body.keys.forEach( function(key){
    // do stuff with key
  });
}); 
```

每次，我都会收到一条错误消息，说'无法调用未定义的方法'forEach'，果然快速的console.log 显示req.body.keys 是未定义的。另一个快速的console.logs 显示Object.keys 和'forEach' 很好，req.body 的typeof 是对象。

有人看到出了什么问题吗？我尝试了 JSON.parse(req.body) 并得到了著名的 'unexpected token o' 错误......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T17:12:02.897

的语法[`keys`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/keys)不同：

```
Object.keys(req.body).forEach(function(key){ ... }) 
```

# string - 在子字符串（行）中打破字符串而不拆分单词

> ID：11298106
> 
> 赞同：2
> 
> 时间：2012-07-02T17:07:49.927
> 
> 标签：string, actionscript-3, function, string-utils

我正在使用一个小函数，该函数应该打破子字符串中的字符串，以确保不会剪切任何单词。

让我们来看看这个用例：

**“出了点问题，我不知道出了什么问题”**

总字数：63；

**每行的最大字符长度为 15，我会得到这个 substr “something is go”**

**如您所见，当我想获得整个单词时，它正在削减单词。**

line[1]: something is //break the string on the last space bellow the max chars length;

line[2]: 出错 .... // 包括第二行开头第一行缺失的字符

line[3]: .... //依此类推，直到所有字符都被循环。

我想出了这个让我发疯的解决方案。

```
function splitString(obj:Object):Array{

if (obj.hasOwnProperty("d_string"))
{
    var texto:String = obj.d_string;

    var textoStr:Array = texto.split("");
    var textoLen:Number = texto.length;
    trace("textoLen " + textoLen);

    var maxCharPerLine:Number;
    if (obj.hasOwnProperty("d_limit")){
        maxCharPerLine = obj.d_limit;
        trace("maxCharPerLine" + maxCharPerLine);
    }else{
        maxCharPerLine = 20;
    }

    var textLine:Array = [];

    var currentLine:Number = 1;
    var currentIndex:Number = 0;

    var cachedCharsForLine:Array = [];      //all characters between the range
    var lastCachedCharsForLine:Array = [];  //mirror of all characters stoping at the last space found
    var missingChars:Array = [];

    var canCleanData:Boolean = false;

    /*START LOOPING OVER THE STRING*/   
    for (var i:Number = 0; i< textoLen; i++) 
    {   
        //<block1>
        if ( currentIndex == maxCharPerLine || i == textoLen -1 ){ 
            canCleanData = true;
        }
        //<block2> 22
        if ( currentIndex <= maxCharPerLine ){ 
            cachedCharsForLine.push(textoStr[i]);
            //trace(cachedCharsForLine);
        }

            trace(textoStr[i]);
            trace(textoStr[i] == " ");

            /*is the characters a space?*/
            if (textoStr[i] == " ") {
                /*1\. even after the condition above returns false*/
                lastCachedCharsForLine = [];
                lastCachedCharsForLine = cachedCharsForLine;
            }

            /*as you can see from the output this value is being updated every iteration after the first space get found
            when it was suppose to be updated only if the a char of type <space> get found"
            */
            trace("-----------------" + lastCachedCharsForLine)

        //<block4>
        if( currentIndex == maxCharPerLine || i == textoLen -1 ){       

            if (textoStr[i]==" " || textoStr[i+1]==" "){        
                trace("\n A");
                //trace("@@@      " + lastCachedCharsForLine);
                textLine[currentLine] = lastCachedCharsForLine;
                trace("//" + textLine[currentLine]);
            }
            else{
                trace("\n B");
                //trace("@@@      " + lastCachedCharsForLine);
                textLine[currentLine] = lastCachedCharsForLine;
                trace("//" + textLine[currentLine]);
            }

            currentIndex = 0;
            currentLine ++;
        }

        //<block5>
        if (currentLine > 1 && canCleanData){
            trace("DATA CLEANED");
            canCleanData = false;
            cachedCharsForLine = [];
            lastCachedCharsForLine = [];
        }

        currentIndex ++;
    }
    return textLine;
}else{
    return textLine[0] = false;
}

}

var texto:String = "Theres something going wrong and it's driving me crazy.";
var output:Array = []
output = splitString({"d_string":texto,"d_limit":15});

for (var i:Number = 0; i<output.length; i++){
    trace(output[i] + "\n\n");  
} 
```

从这条跟踪线可以看出，lastCachedCharsForLine 的变量正在更新。

```
trace("-----------------" + lastCachedCharsForLine) 
```

即使下面的条件返回 false

```
 if (textoStr[i] == " ") {
                    /*1\. even after the condition above returns false*/
                    lastCachedCharsForLine = [];
                    lastCachedCharsForLine = cachedCharsForLine;
                } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T17:51:24.903

那很有趣。下面的代码输出：

```
|-------------|
something is
going wrong
and i can't
figure out
what's the
problem.
WORDTHATISWAYTOOLONGFORTHEBUFFER.
A quick brown
fox jumped
over the lazy
dog.

package {

    import flash.display.Sprite;

    final public class Test2 extends Sprite {

        public function Test2() {

            splitIntoLines("something is going wrong and i can't figure out what's the problem.  WORDTHATISWAYTOOLONGFORTHEBUFFER. A quick brown fox jumped over the lazy dog.");

        }

        private function splitIntoLines(text:String, maxLineLength:int = 15):void {
            const words:Array   = text.split(/\s+/);
            const output:Array  = [];

            var buffer:String   = '';
            while (words.length) {

                var word:String = words.shift() as String;

                // if buffer has something, add a space
                if (buffer.length) {

                    if (buffer.length + word.length + 1 < maxLineLength) {
                        buffer += ' ' + word;
                    } else {
                        output.push(buffer);
                        buffer = word;
                    }

                // otherwise, it's the first word
                } else {

                    if (buffer.length + word.length < maxLineLength) {
                        buffer += word;
                    } else {
                        output.push(buffer);
                        buffer = word;
                    }
                }
            }

            // something is still in there?
            if (buffer.length) {
                output.push(buffer);
            }

            trace(output.join('\n'));

        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T17:55:40.157

如果您使用 Grant Skinner 的`StringUtils`lib，它可能会让您的生活更轻松：

[http://gskinner.com/blog/archives/2007/04/free_extension.html](http://gskinner.com/blog/archives/2007/04/free_extension.html)

该`truncate`方法是您正在寻找的：

```
var line:String = "Something is going wrong and I can't figure out what's the problem."
var truncatedLine:String = StringUtils.truncate(line, 15, "..."); 
```

# objective-c - UIPopOver 管理和 USE_BLOCK_IN_FRAME 错误

> ID：11298108
> 
> 赞同：0
> 
> 时间：2012-07-02T17:07:52.800
> 
> 标签：objective-c, ios, uipopover

我最近升级到 iOS 6 Beta 并且遇到了一些问题。（我知道这是一个测试版，但我还不相信它实际上与 iOS 6 相关。）

该问题具有以下参数：

1.  自定义`UITableViewCell`生成`UIButton`对象`UIPopOver`的对象，从被点击的框架呈现`UIButton`。
2.  显示`UIPopOver`，然后 iPad 被旋转。
3.  当旋转`UIPopOver`动画完成然后重新显示`UIPopOver`.

相关信息：

1.  第一次旋转进行得很好；被`UIPopOver`解散并正确重新显示。
2.  第二次轮换（每次）会破坏应用程序。
3.  我有一个符号断点集，但我没有得到任何有用的信息。
4.  我对`UIPopOver`从. 我对这些过渡没有任何问题。`UIBarButton``UIToolbar`
5.  这是一个新问题，与很长时间没有更改的代码有关。
6.  我收到的错误是：“警告：尝试使用不在框架中的块创建 USE_BLOCK_IN_FRAME 变量。”

这是与旋转相关的执行代码：

```
- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation {
    if ([self PopOver]) {
        [[self PopOver] dismissPopoverAnimated:YES];
        [self setPopOver:nil];
        [self ButtonPressed:[self TouchedCell]];
    }
    [[self TableView1] reloadData];
    [[self TableView2] reloadData];
}

- (void)ButtonPressed:(Cell *)cell {
    [self setTouchedCell:cell];
    NSString *nibName = @"View";
    if (UI_USER_INTERFACE_IDIOM()==UIUserInterfaceIdiomPad) {
        nibName = @"View-iPad";
    }

    ViewController *vc = [[ViewController alloc] initWithNibName:nibName
                                                          bundle:nil];
    if (UI_USER_INTERFACE_IDIOM()==UIUserInterfaceIdiomPad) {
        UIPopoverController *popOver = [[UIPopoverController alloc]
            initWithContentViewController:vc];
        [self setPopOver:popOver];
        [popOver setDelegate:self];
        [[self PopOver] setPopoverContentSize:CGSizeMake(320, 320)];
        [popOver presentPopoverFromRect:[[cell CheckButton] frame] 
                                 inView:[cell contentView]
               permittedArrowDirections:UIPopoverArrowDirectionAny 
                               animated:YES];
    } else {
        // iPhone doesn't use PopOvers...
    }
} 
```

有人知道我接下来应该做什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T18:52:43.500

这是我的官方回答 - 我认为您的弹出框正试图在屏幕外显示，或者可能来自已经回收的单元格。;)

# jsf - JSF reRender 自定义组件

> ID：11298112
> 
> 赞同：1
> 
> 时间：2012-07-02T17:08:09.340
> 
> 标签：jsf, richfaces, custom-component, ajax4jsf, rerender

我有一个运行良好的 JSF 1.2 自定义组件。这些文件是：Cabecalho.java 和 CabecalhoComponente.java，标签和组件。

我想使用重新渲染它（编辑：使用richfaces a4j：commandButton）但不工作。它有一个属性，EL 以毫秒为单位获取当前时间，输出中的值不会更新，但是当我调试应用程序时，我可以在 restoreState 方法上看到属性的新值设置。

为什么输出没有更新？

谢谢。

# html - 测试 HTML 表格是否用于布局与数据？

> ID：11298113
> 
> 赞同：3
> 
> 时间：2012-07-02T17:08:12.603
> 
> 标签：html, layout, datatable, web-scraping, html-table

这更像是一个网络抓取问题。有哪些公认的方法可以自动确定 a`<table>`是用于布局还是用于您以前从未见过的 HTML 文档中的*数据？*

我希望能够将任何 HTML 文件作为字符串传递到某个函数中，该函数会吐出 HTML 页面中的所有*数据表*，但忽略纯粹用于布局的表。但是像[http://news.ycombinator.com/newcomments](http://news.ycombinator.com/newcomments)这样的网站使用 HTML 表格进行布局，这很棘手。

此函数不应该针对任何特定网站的 DOM 结构进行定制，因此它应该适用于任何 HTML 字符串（或具有尽可能高的成功率）。

多年来人们是否有任何算法/检查可以区分布局和数据表？这应该是可能的，这只是写下所有变量和试错的问题——我想很多人已经在某个地方制定了计划。

我不一定需要这个功能（虽然这很棒，但我想它需要很多微调）。只是在寻找一些尝试过的策略。

**更新**

这是一个好的开始（感谢@JaredFarrish）：

*   [一种基于机器学习的网络表检测方法](http://www2002.org/CDROM/refereed/199/)
*   关键词：表格检测、布局分析、机器学习、决策树、支持向量机、信息检索

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T17:39:48.297

用于布局的表格通常会

*   每行有几行和几个单元格。
*   单元格中的内容长度非常不一致
*   单元格中有很多 HTML
*   可以使用 colspan / rowspan
*   存在于 DOM 顶部附近
*   不使用`<th>`或`<thead>`
*   包含其他表

用于数据的表格通常会

*   每行有更多行和更多单元格
*   单元格中的内容长度合理一致
*   单元格内缺少结构化 HTML（如`<div>`, `<p>`; see `<b>`,`<strong>`等不排除数据）
*   可能不使用 colspan 并且很可能不使用 rowspan
*   不包含其他表

当您抓取表格时，根据这些标准对其进行评估和评分，对它们应用分数和权重，并使用最终分数来决定它是布局还是数据。

# heroku - 带有内联用户/密码的 Heroku 命令

> ID：11298115
> 
> 赞同：1
> 
> 时间：2012-07-02T17:08:37.420
> 
> 标签：heroku

我正在寻找一个 1 行命令来登录我的 heroku 帐户并执行一个操作。

例子：

heroku 应用程序 - 每次都会询问我的用户名和密码

我正在寻找类似的东西

heroku -email myuser@gmail.com -password 秘密应用

这样我就可以内联执行所有内容。

是否存在对此的支持？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T00:37:36.067

如果您使用[Heroku Toolbelt](https://toolbelt.heroku.com/)进行身份验证并登录，您的凭据将持续数小时甚至数天。您可以在运行脚本之前或作为运行脚本的一部分进行身份验证然后使用它吗？然后，您将能够使用`heroku run {your_command_line_here}`.

# iis - 指向另一台计算机上托管的 wordpress 博客的 IIS 虚拟目录

> ID：11298118
> 
> 赞同：0
> 
> 时间：2012-07-02T17:08:48.447
> 
> 标签：iis, iis-7, iis-6, virtual-directory

我有一个 windows 盒子（托管 www.example.com）和一个 linux 盒子（托管 wordpress 博客）。

有没有办法可以在 windows 框上创建一个虚拟目录 - 这样当用户访问 www.example.com/blog 时，它会从 linux 服务器获取内容？（我希望浏览器中的网址保持 www.example.com/blog ）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T17:22:18.830

我没有使用 IIS 的经验，但如果我必须处理这个问题，我会从路由的角度来处理它。假设在 Windows 机器上没有维护任何会话，对您的目录的请求可以只路由到 Linux 机器。

如果您能够使用子域 (blog.example.com) 而不是目录，这将非常容易，但使用目录仍然是完全可能的。您需要通过可以检查 HOST 标头的东西来路由流量，即像 squid 这样的 http 代理。

作为第二个想法，您可以使用 mod_redirect 将用户从 www.example.com/blog 反弹到 blog.example.com，他们仍然可以登陆所需的 url，但会被重定向到子域，不是很漂亮，但它将从那里解决问题变得微不足道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T17:16:06.123

我不确定你问的是否可行。[但是，简单地从您的 windows box 重定向到您的 linux box](https://stackoverflow.com/questions/888325/how-to-redirect-a-url-path-in-iis)可能会容易得多。为什么要把事情复杂化？

另一种选择是在 Windows 上[的 IIS 中托管 wordpress](http://www.microsoft.com/web/wordpress/)。

# javascript - 按下箭头键时在下拉菜单上使用 Jquery livequery？

> ID：11298121
> 
> 赞同：0
> 
> 时间：2012-07-02T17:09:02.743
> 
> 标签：javascript, jquery

我有这样的jquery代码，它可以工作，但是箭头键按下有问题。

```
 $(document).ready(function() {   
  $(function(){
     $("#tasks").hide();
        $("select#categories").livequery("change", function () {
                $("#tasks").show();
                $.getJSON("ajax.php?module=responsables&action=list_tasks",{id: $(this).val()}, function(j){

                        if($("#categories").val()=="-0") 
                        {                               
                                $("#tasks").hide();
                        }
                        //if the div is hidden
                        $("div#form_objectifs").hide();
                        var options = '';
                        for (var i = 0; i < j.length; i++)
                        {
                                options += '<option value="' + j[i].optionValue + '">' + j[i].optionDisplay + '</option>';
                        }
                        $("#tasks").html(options);
                        $('#tasks option:first').attr('selected', 'selected');
                })
        }).livequery("keypress", function() { 
              $(this).trigger("change");    
            });

 });
</script> 
```

我已经尝试过这个：http: [//jsfiddle.net/tW6Su/2/](http://jsfiddle.net/tW6Su/2/)这给了箭头按键过滤器的可能性。

所以我尝试了：

```
<script type="text/javascript" charset="utf-8">
 $(document).ready(function() {   
    $(function(){
         $("#tasks").hide();
            $("select#categories").livequery("change", function () {
                    $("#tasks").show();
                    $.getJSON("ajax.php?module=responsibles&action=list_tasks",{id: $(this).val()}, function(j){

                            if($("#categories").val()=="-0") 
                            {                               
                                    $("#tasks").hide();
                            }
                            //if the div is hidden
                            $("div#form_objectifs").hide();
                            var options = '';
                            for (var i = 0; i < j.length; i++)
                            {
                                    options += '<option value="' + j[i].optionValue + '">' + j[i].optionDisplay + '</option>';
                            }
                            $("#tasks").html(options);
                            $('#tasks option:first').attr('selected', 'selected');
                    })
            }).livequery("keypress", function() { 
           $(this).trigger("change");

 });
</script> 
```

但是我遇到了一个js错误。

```
$("select#categories").livequery is not a function http://localhost/project/index.php?module=responsibles&action=objectivs Line 120 
```

任何人都可以帮助我有什么问题吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T17:19:44.193

运行时似乎 jsFiddle 不包括脚本。当我将它包含在 HTML 中时，它按预期工作。

[http://jsfiddle.net/tW6Su/11/](http://jsfiddle.net/tW6Su/11/)

# apache - Apache Mod_rewrite 更改目录

> ID：11298131
> 
> 赞同：0
> 
> 时间：2012-07-02T17:10:22.523
> 
> 标签：apache, mod-rewrite

我一直在试图弄清楚这一点。如果这是一个重复的问题，我深表歉意，但我似乎找不到合适的解决方案。

我想要完成的是以下内容：

给定 URL `dev-<sub>.example.com/resources/path/to/resource`，如果它产生一个文件或其他（我可以处理 404s）`sub`，则转到。`/var/www/devEx_<sub>/override/resources/path/to/resource``/var/www/devEx_<sub>/main/resources/path/to/resource`

我可以找到一个手动添加每个人的解决方案，`sub`但我无法弄清楚如何使用通配符或反向引用来完成。

我试过弄乱，`VirtualDocumentRoot`但我永远无法让该`devEx_<sub>`部分出现在`DOCUMENT_ROOT`检查资源中。

我尝试使用类似于 [ [mod_rewrite regex (too many redirects)](https://stackoverflow.com/questions/4069898/mod-rewrite-regex-too-many-redirects/4075369#4075369) ] 的解决方案，但它总是与`REQUEST_URI`.

我过去曾尝试过使用类似的东西：

```
RewriteCond $1 (^resources/.*)
RewriteCond %{DOCUMENT_ROOT}/override%{REQUEST_URI} -f
RewriteRule ^(.*)$ %{DOCUMENT_ROOT}/override%{REQUEST_URI} [QSA,L]

RewriteCond $1 (^resources/.*)
RewriteRule ^(.*)$ %{DOCUMENT_ROOT}/main%{REQUEST_URI} [QSA,L] 
```

另外，我真的很想更多地理解使用 Apache / Mod_rewrite，如果你有一个好的技术指南或教程可以帮助我使用这个或一些调试技术（因为我不知道如何调试这些重写规则） ，我将不胜感激，所以请分享！

**编辑**

关于我的试验的更多细节。

在我的`VirtualDocumentRoot`解决方案中，我能够路由到正确的目录，但我无法将该目录设置为文档根目录以执行覆盖规则。

对于此解决方案 [ [mod_rewrite regex (too many redirects)](https://stackoverflow.com/questions/4069898/mod-rewrite-regex-too-many-redirects/4075369#4075369) ]，我将`DocumentRoot`conf 中的设置为`/var/www`并将以下行放在`.htaccess`目录中的文件中

```
RewriteCond %{HTTP_HOST} ^dev-([^.]+)\.example\.com$ [NC]
RewriteCond %{DOCUMENT_ROOT}/devEx_%1 -d
RewriteCond %{ENV:REDIRECT_STATUS}  =""
RewriteRule .* /devEx_%1/$0 [L] 
```

但是，正如您所料，这附加`devEx_<sub>`到。`%{REQUEST_URI}`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T19:02:56.520

> 你为什么不让你的文档根目录 /var/www/

这可能是您要做的最好的事情，具体取决于您提供的不在`devEx`目录中的其他内容，因为需要重新路由这些内容。你想要看起来像这样的东西：

```
RewriteCond $1 (^resources/.*)
RewriteCond %{HTTP_HOST} ^dev-(.*)\.example.com$ [NC]
RewriteCond %{DOCUMENT_ROOT}/devEx_%1/override%{REQUEST_URI} -f
RewriteRule ^(.*)$ /devEx_%1/override%{REQUEST_URI} [QSA,L]

RewriteCond $1 (^resources/.*)
RewriteCond %{HTTP_HOST} ^dev-(.*)\.example.com$ [NC]
RewriteRule ^(.*)$ /devEx_%1/main%{REQUEST_URI} [QSA,L] 
```

或者，您可以用 替换实例`%{DOCUMENT_ROOT}`，`/var/www`尽管它有点难看，尤其是当您将站点移动到其他地方或更改服务器配置时。因此你会得到这样的东西：

```
RewriteCond $1 (^resources/.*)
RewriteCond %{HTTP_HOST} ^dev-(.*)\.example.com$ [NC]
RewriteCond /var/www/devEx_%1/override%{REQUEST_URI} -f
RewriteRule ^(.*)$ /var/www/devEx_%1/override%{REQUEST_URI} [QSA,L]

RewriteCond $1 (^resources/.*)
RewriteCond %{HTTP_HOST} ^dev-(.*)\.example.com$
RewriteRule ^(.*)$ /var/www/devEx_%1/main%{REQUEST_URI} [QSA,L] 
```

# ruby-on-rails - 从 rspec 读取 rails env 变量

> ID：11298132
> 
> 赞同：2
> 
> 时间：2012-07-02T17:10:40.957
> 
> 标签：ruby-on-rails, testing, rspec

我有一个 rspec 测试来验证一个根据 rails 版本工作的函数。所以在我的代码中，我打算使用 Rails::VERSION::String 来获取 rails 版本。

在测试之前，我尝试像这样显式设置 rails 版本

```
Rails::VERSION = "2.x.x" 
```

但是当我运行测试时，rspec 似乎找不到`Rails`变量并给了我错误

```
uninitialized constant Rails (NameError) 
```

那么我在这里可能缺少什么，在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T19:40:10.320

执行此操作的最佳方法是将 Rails 版本检查封装在您控制的代码中，然后存根您要执行的不同测试值。

例如：

```
module MyClass
  def self.rails_compatibility
    Rails.version == '2.3' ? 'old_way' : 'new_way'
  end
end

describe OtherClass do
  context 'with old_way' do
    before { MyClass.stubs(:rails_compatibility => 'old_way') }
    it 'should do this' do
      # expectations...
    end
  end

  context 'with new_way' do
    before { MyClass.stubs(:rails_compatibility => 'new_way') }
    it 'should do this' do
      # expectations...
    end
  end
end 
```

或者，如果您的版本控制逻辑如此复杂，您应该删除一个简单的包装器：

```
module MyClass
  def self.rails_version
    ENV['RAILS_VERSION']
  end

  def self.behavior_mode
    rails_version == '2.3' ? 'old_way' : 'new_way'
  end
end

describe MyClass do
  context 'Rails 2.3' do
    before { MyClass.stubs(:rails_version => '2.3') }
    it 'should use the old way' do
      MyClass.behavior_mode.should == 'old_way'
    end
  end

  context 'Rails 3.1' do
    before { MyClass.stubs(:rails_version => '3.1') }
    it 'should use the new way' do
      MyClass.behavior_mode.should == 'new_way'
    end
  end
end 
```

# nhibernate - nHibernate 和 SQL Server 2012 LocalDB

> ID：11298133
> 
> 赞同：6
> 
> 时间：2012-07-02T17:10:52.350
> 
> 标签：nhibernate, sql-server-2012, localdb

是否可以将 LocalDB 数据库与 NHibernate 一起使用？如果是，应该安装/配置什么？

目前，当我在创建 SessionFactory时尝试使用像*Data Source=(LocalDb)\v11.0;Initial Catalog=tst1;Integrated Security=SSPI这样的连接字符串时*

> System.Data.SqlClient.SqlException ：建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：命名管道提供者，错误：40 - 无法打开与 SQL Server 的连接）----> System.ComponentModel.Win32Exception：找不到网络路径

但是，我可以通过 SQL Server 对象资源管理器连接到*(LocalDb)\v11.0*，并且实体框架可以使用该连接字符串。那么，我在 NH 上做错了什么，或者目前无法将 LocalDB 与 NH 一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T17:31:19.137

您可能必须使用带有 nH 的古老语法，例如：

```
np:\\.\pipe\LOCALDB#ABB78D50\tsql\query 
```

（有关为什么连接字符串有时需要此语法的一些背景知识，请参阅[mssqltips.com 上](http://www.mssqltips.com/sqlservertip/2694/getting-started-with-sql-server-2012-express-localdb/?utm_source=AaronBertrand)针对 SQL Server 2012 的[此提示](https://www.mssqltips.com/sqlservertip/5612/getting-started-with-sql-server-2017-express-localdb/?utm_source=AaronBertrand)，以及有关更现代版本的此提示。）

我意识到这不是一个理想的答案，但是在 nHibernate 更新以正式支持 SqlLocalDb 之前，它可能是您唯一的选择......希望我错了，有人已经找到了一种更优雅的连接方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-05T10:32:04.943

您不需要使用 np:\ 因为这种类型的连接字符串对所有人来说都是一个大麻烦。localdb 命名管道的地址经常更改，因此您必须将其反映在连接字符串上。

要将 NHibernate 与 localDB 一起使用，请获取最新版本的 NHibernate 并使用以下连接字符串：

```
Server=(localdb)\v11.0;Initial Catalog=<dbname>;User ID=<user>;password=<pwd>;Integrated Security=false;AttachDBFilename=<dbfile_path><dbfilename>.mdf 
```

诀窍是 AttachDBFilename。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-13T13:44:04.980

是的，可以连接。转到查看-> 服务器资源管理器-> 展开数据连接，然后右键单击您的并转到属性。您将看到 Identity、Conenction 和 Misc 区域。在连接区域中，您将找到配置 NHibernate 的 .xml 文件所需的连接字符串。在 connection.string 属性下复制该字符串，例如：

```
<property name="connection.connection_string">Data Source=(LocalDb)\v11.0;AttachDbFilename={path}\aspnet-{projectName}-20141201132517.mdf;Initial Catalog=aspnet-{projectName}-20141201132517;Integrated Security=True</property> 
```

[在这篇](http://www.devcurry.com/2013/01/using-nhibernate-in-aspnet-mvc-4.html)文章之后，我已将 NHibernate 添加到我的 MVC 项目中。

希望这有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-25T11:06:02.817

我也在`AttachDBFilename=|DataDirectory|\Database_name.mdf`连接字符串中使用。

```
<configSections>
  <section name="hibernate-configuration" type="NHibernate.Cfg.ConfigurationSectionHandler, NHibernate" />
</configSections>
<hibernate-configuration xmlns="urn:nhibernate-configuration-2.2">
  <session-factory name="">
    <property name="connection.provider">NHibernate.Connection.DriverConnectionProvider</property>
    <property name="connection.driver_class">NHibernate.Driver.SqlClientDriver</property>
    <property name="connection.connection_string_name">LocalDb</property>
    <property name="dialect">NHibernate.Dialect.MsSql2008Dialect</property>
  </session-factory>
</hibernate-configuration>
<connectionStrings>
  <add name="LocalDb" connectionString="Data Source=(LocalDb)\v11.0;Initial Catalog=MyDatabase;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\MyDatabase.mdf" providerName="System.Data.SqlClient" />
</connectionStrings> 
```

并且`MyDatabase.mdf`在`App_Data`应用程序的目录中

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-25T06:56:51.747

确保安装此更新：http: [//support.microsoft.com/kb/2544514](http://support.microsoft.com/kb/2544514)

然后确保创建了数据库：

*   使用 Database Explorer 或 Sql Management Studio 连接到 (localdb)\v11.0
*   跑`CREATE DATABASE [dbname]`
*   必要时创建表

将连接字符串更改为：

`Data Source=(LocalDb)\v11.0;Initial Catalog=dbname;Integrated Security=true`

并运行网络。它应该工作。

# ruby-on-rails - 使用 CanCan 进行用户授权：NoMethodError

> ID：11298134
> 
> 赞同：2
> 
> 时间：2012-07-02T17:10:59.607
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, authorization, cancan

我在我的应用程序中使用 CanCan 进行授权。我目前将所有每个用户的信息都存储在 /users/2 或 users/3 或 /users/4 等等。

我的问题是，当用户登录时，他们可以修改 URL 并查看其他用户的敏感内容。如何使用 CanCan 来防止用户（比如 users/2）看到 (users/3) ？

当我将“load_and_authorize_resource”添加到我的用户控制器时，我收到以下错误：

```
NoMethodError in UsersController#show

undefined method `user_id' for #<User:0x007fee61e90b90> 
```

楷模

```
class Ability
  include CanCan::Ability

  def initialize(user)
    user ||= User.new # guest user (not logged in)
    if user.has_role? :admin
      can :manage, :all
      can :access, :rails_admin
      can :dashboard 
    else
      can :manage, User, :user_id => user.id
    end 
```

控制器

```
 class ApplicationController < ActionController::Base
      protect_from_forgery

      rescue_from CanCan::AccessDenied do |exception|
        redirect_to root_path, :alert => exception.message
      end

class UsersController < ApplicationController
  before_filter :authenticate_user!
  load_and_authorize_resource

   def show
    @user = User.find(params[:id])
    @date = params[:month] ? Date.parse("#{params[:month]}-01") : Date.today
    @occasions = @user.occasions.page(params[:page]).per(5)
  end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T21:40:01.303

我认为你应该使用

```
can :manage, User, :id => user.id 
```

因此，当用户的 id 与当前用户的 Id 相同时，他们可以管理用户的记录 - 那就是他们自己？User 类没有 user_id，这就是它一开始不起作用的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T17:24:40.123

你有没有尝试把你`load_and_authorize_resource`的顶部`UsersController`？

# image - 如何将 cocos2d 游戏的图像缩放到 iPhone/iPad（有和没有 Retina）

> ID：11298138
> 
> 赞同：1
> 
> 时间：2012-07-02T17:11:08.823
> 
> 标签：image, cocos2d-iphone, textures, retina-display, packer

我正在 cocos2d (1.0.1) 中开发游戏，我的艺术家给我发了 psd 项目文件，所有 3200x1800 分辨率 300ppi。我应该为带有和不带有 Retina 显示屏的 iPad 和 iPhone 制作它。我意识到我对图形一无所知。为 iPhone 和 iPad（高清和标清）准备图像的最佳方法是什么。我应该将其缩放到 480x320 吗？我应该使用像 Texture Packer 这样的应用程序吗？怎么做才不会有任何损失？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T17:30:56.613

最简单的方法是为 iPad Retina 显示屏和 iPhone Retina 显示屏制作图形，然后使用 Texture Packer 将它们自动缩放到每种设备的非 Retina 尺寸。

作为 iPhone 的工作流程，这将变为：

1.  为 640x960 显示器创建 Retina 图形。

2.  使用 Texture Packer 为 Retina 版本创建纹理，然后使用 Texture Packer 从那里为低分辨率设备缩小 Retina 纹理。

3.  看看如何在 cocos2d 中使用生成的图像和 plist。

关于#3，这里有一些很好的教程：

[http://www.codeandweb.com/texturepacker/tutorials/#cocos2d](http://www.codeandweb.com/texturepacker/tutorials/#cocos2d)

Cocos2d 非常擅长处理 Retina 和非 Retina 版本游戏之间的所有点转换。一旦您告诉它使用 Retina 图形（如果可用），您就可以使用标准的 320x480 cocos2d 点系统对您的游戏进行编程，所有定位都将在您更大的启用 Retina 显示的版本中工作。（或 768x1024 iPad 版本）。

# google-apps-script - 如何混合使用 jQuery 和 UiInstance 来生成 GUI

> ID：11298141
> 
> 赞同：1
> 
> 时间：2012-07-02T17:11:28.293
> 
> 标签：google-apps-script

我已经使用 GUI 构建器制定了一个相当基本的对话框表单。但是我想在表单中放置一个滑块小部件。（不要问！）

jQuery UI 库有一个滑块，但似乎为了将所有 jQuery 脚本和 css 加载到模板中，我必须切换到 HTML 服务而不是 UI 服务来生成页面。

目前我的 Gui builder 表单工作正常，运行类似这样的东西；

```
function doGet(e) {
  var app = UiApp.createApplication();
  app.add(app.loadComponent("DocEditorGui"));
  return app;
} 
```

我在一个 html 页面中有一个 jQuery 滑块，我可以像这样拉入；

```
function doGet(e) {
  return HtmlService.createHtmlOutputFromFile('mySliderWidget');
} 
```

但是，使用 HTML 文件似乎与 app.createHTML() HTML 类型小部件不兼容，因为如果我传递 HTML 输出内容，则不会显示任何内容。肯定会处理 HTML，因为 Logger.log 显示正确的 jQuery 和 html。

```
var t =  HtmlService.createHtmlOutputFromFile('mySliderWidget'); 
var widgetHTML = container.createHTML(t.getContent());
widgetHTML.setStyleAttribute("background", "green");
Logger.log( t.getContent()  );
vPanel.add(widgetHTML ); 
```

但是大概这也被 caja 捕捉到了，因为效果似乎正在剥离 jQuery 的所有 id 标签。添加了 HTML，它对于 jQuery 来说全都坏了。

有这个用例的例子，还是我太早尝试这样的事情？

作为一个测试用例，这个 jQUery 滑块示例； [http://pastebin.com/bnY7PhCL](http://pastebin.com/bnY7PhCL)

跑在这里的卡哈游乐场； [http://code.google.com/p/google-caja/wiki/CajaPlayground](http://code.google.com/p/google-caja/wiki/CajaPlayground)

但不能在上面的 HTML 小部件下运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T18:57:12.430

app.createHTML 不使用 Caja。它去除了除一小部分之外的所有 HTML。您可以在此处的文档中看到：

[https://developers.google.com/apps-script/class_html](https://developers.google.com/apps-script/class_html)

它去除了所有脚本标签。

HtmlService 不是 app.createHTML 小部件；它是一个全新的 API，需要您以这种方式构建整个应用程序。无法将 HtmlService 对 jQuery 的支持与 UiApp 混合搭配；这是一个或另一个。

# jsp - Spring MVC 和磁贴——如何将非布尔值“真/假”设置为复选框

> ID：11298145
> 
> 赞同：2
> 
> 时间：2012-07-02T17:11:42.053
> 
> 标签：jsp, spring-mvc, tags, jstl, tiles

我有一个带有后端表的 Web 应用程序有一个名为的列`type`和另一个名为`value`. `type`表示组件类型（textfield、combobox、checkbox..etc），`value`是组件的实际值，两列都是VARCHAR2。

挑战在于，当类型为 时`combobox`，`value`组件的 要么是字符串，`true`要么`false`是字符串。而且我没有权限修改数据库属性。

然后当我在前端放一个复选框时：

```
<field:checkbox field="enableEditing.setting" id="systemsetting_${formSettings.enableEditing.name}" z="user-managed"/> 
```

我得到以下异常：

```
Attribute 'value' is required when binding to non-boolean values 
```

即使我`value`在`checkbox.tagx`,

```
<field:checkbox field="enableEditing.setting" id="systemsetting_${formSettings.enableEditing.name}" value="${formSettings.enableEditing.setting}" z="user-managed"/> 
```

我仍然有同样的例外。

似乎如果该字段不是`boolean`类型，则无法使复选框起作用。

但我知道我必须打破一些东西，所以请赐教并提前感谢。

# iphone - 创建自定义对象继承 NSObject 类

> ID：11298146
> 
> 赞同：0
> 
> 时间：2012-07-02T17:11:45.713
> 
> 标签：iphone, objective-c, ios, nsobject

在我的项目中使用不同的框架时，我经常遇到从 NSObject 继承的类创建的自定义元素（如果有问题，请纠正我）。创建此类 UI 元素的主要规则是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T17:16:57.417

`NSObject`是 Cocoa 中非常基础的类。它负责每个类需要的最基本的东西，比如内存管理。（几乎）Cocoa 中的所有类都继承自，如果你想实现一个模型类`NSObject`，你通常是子类。`NSObject`

如果你想创建自己的 GUI 元素，你应该继承`UIView`或`UIControl`. `UIView`将使您能够进行自定义绘图、处理触摸事件等。`UIControl`（它本身是一个`UIView`子类）为用户可以与之交互的控件元素添加功能，例如等。如果您计划实现自定义控件，这就是您应该子类`UITextField`化的内容。`UISlider`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T17:14:36.417

使用自定义对象的主要目的是创建模型类，这有助于存储可在整个应用程序中使用的数据。

例如 -

```
@interface ServerResponse
.....
@property (nonatomic, retain) NSString *responseString;
@property (nonatomic, retain) NSArray *errorCodes;
.....
@end 
```

除此之外`NSObject`是Objective C中的根类。大多数类都继承了`NSObject`Classs的特性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T17:39:24.093

如果您正在创建可以继承自的 UI 元素`NSObject`，但我强烈建议从`UIView`或继承`UIControl`。否则，您将只是重新创建`UIControl`.

此外，如果您只是想向现有 UI 元素添加其他功能，您可以扩展（创建类别）以添加该功能。

# mysql - 这个不寻常的 CREATE TABLE 语法是什么？

> ID：11298149
> 
> 赞同：0
> 
> 时间：2012-07-02T17:12:04.410
> 
> 标签：mysql, sql

我想创建数据库。我有一个这样的脚本文件 .sql ：

```
CREATE TABLE [AlleleFreqBySsPop]
(
[subsnp_id] [int] NOT NULL ,
[pop_id] [int] NOT NULL ,
[allele_id] [int] NOT NULL ,
[source] [varchar](2) NOT NULL ,
[cnt] [real] NULL ,
[freq] [real] NULL ,
[last_updated_time] [datetime] NOT NULL
)
GO 
```

它似乎与mysql或postgresql不同。

这是什么类型的语言？我该如何使用它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T17:15:11.693

从方括号和`GO`关键字来看，我会说这是[T-SQL](http://msdn.microsoft.com/library/ms189826.aspx "Transact-SQL 参考") (MS SQL Server)。要在 MySQL 中使用它，您可能只需删除方括号并从那里解决不兼容问题（即类型或缺少转义）。

我刚刚在[SQL Fiddle](http://sqlfiddle.com/#!2/e6064)中对此进行了测试，在这种情况下，只需删除方括号就足够了。但是，对于其他 DDL 语句，您可能必须替换类型（即`datetime2`MySQL 不支持 from T-SQL），并且您可能会遇到其他问题 - 例如需要转义在一种方言中保留关键字但不支持的列名其他等。通常的 SQL 数据库[不使用 100% 符合标准的 SQL](http://troels.arvin.dk/db/rdbms/ "不同SQL实现的比较")。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-02T17:15:32.753

我猜你指的是`[text]`, 专注于括号？这只是名称的分隔符。

[这是一个 SQLFiddle 来展示这个在 MS SQL Server 中的工作](http://sqlfiddle.com/#!3/e212b)

[这是一个 SQLFiddle 来展示这个在 SqlLite 中的工作](http://sqlfiddle.com/#!5/e1159)（但前提是你`GO`在最后删除了（感谢 Ypercube 指出这一点）......否则，只有 MSSQL 才能工作）

它在 MySQL、PostgreSQL 和 Oracle 中似乎确实出错。希望这有助于澄清问题。SqlFiddle 是一个很好的工具来检查这样的事情:)

[这是关于分隔标识符的 SQL Server 文档](http://msdn.microsoft.com/en-us/library/aa224033%28v=sql.80%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T17:17:53.617

它的 SQL 使用`[`and`]`作为分隔符或“非引用标识符”，可能来自 TSQL 源。

我相信，如果您在平台`[`或`]`设置上替换有效分隔符，或者只是删除它们，那么它应该是完全有效的 SQL。

一般来说，分隔符是个好东西，可以帮助 SQL 引擎解析查询。

# ios - 无法接收生产 apns 的推送消息

> ID：11298150
> 
> 赞同：1
> 
> 时间：2012-07-02T17:12:05.907
> 
> 标签：ios, notifications, push, apple-push-notifications

我可以使用开发证书接收推送消息，但是当我更改为使用生产证书时，收不到消息，也没有发生错误。

我使用的 apns 地址是：ssl://gateway.push.apple.com:2195 我将其作为临时部署进行测试

由于我的应用尚未上传到应用商店，请问这是否会影响应用接收推送消息？

谢谢~

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T12:52:22.667

我现在得到了答案，归档项目时，我需要使用生产分发证书。然后为推送通知生成生产设备令牌。

使用此设备令牌可以通过生产 APNS 向设备发送推送。

# ios - ios如何读取崩溃日志

> ID：11298160
> 
> 赞同：6
> 
> 时间：2012-07-02T17:13:11.377
> 
> 标签：ios, crash-dumps

我以前从来没有读过崩溃日志，所以我承认我在这些水域中是一个 n00b。

我可以说有一个`EXC_BAD_ACCESS`. 我怎样才能知道哪个对象在它应该被释放之前被释放了？

*请注意，在应用程序处于活动状态时唤醒设备后会发生这种情况。它并不总是发生，但经常发生。

** 编辑 **

符号化的崩溃日志：

```
Incident Identifier: 14FFD847-61CB-435B-9E98-C06B3B661429
CrashReporter Key:   7c5fd78cf04b38cfd2aa153f61eb1655ed671274
Hardware Model:      iPhone4,1
Process:         My iPhone App [2599]
Path:            /var/mobile/Applications/ABAB96ED-A203-48A5-8B50-B34BA3A8E4A4/My iPhone App.app/My iPhone App
Identifier:      My iPhone App
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2012-07-01 22:17:43.458 -0600
OS Version:      iPhone OS 5.1 (9B179)
Report Version:  104

Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0xb4f05bbe
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libobjc.A.dylib                 0x35a65f7e objc_msgSend + 22
1   UIKit                           0x33c31042 -[UIImageView isAnimating] + 130
2   UIKit                           0x33c3b100 -[UIImageView stopAnimating] + 96
3   UIKit                           0x33d5d1de -[UIActivityIndicatorView _tearDownAnimation] + 30
4   UIKit                           0x33cdb972 -[UIActivityIndicatorView _applicationDidEnterBackground:] + 34
5   Foundation                      0x37d8f4f8 __57-[NSNotificationCenter addObserver:selector:name:object:]_block_invoke_0 + 12
6   CoreFoundation                  0x37531540 ___CFXNotificationPost_block_invoke_0 + 64
7   CoreFoundation                  0x374bd090 _CFXNotificationPost + 1400
8   Foundation                      0x37d033e4 -[NSNotificationCenter postNotificationName:object:userInfo:] + 60
9   UIKit                           0x33c813f6 -[UIApplication _handleApplicationSuspend:eventInfo:] + 786
10  UIKit                           0x33c120a0 -[UIApplication handleEvent:withNewEvent:] + 2088
11  UIKit                           0x33c11708 -[UIApplication sendEvent:] + 48
12  UIKit                           0x33c110dc _UIApplicationHandleEvent + 5820
13  GraphicsServices                0x323c9224 PurpleEventCallback + 876
14  CoreFoundation                  0x3753951c __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 32
15  CoreFoundation                  0x375394be __CFRunLoopDoSource1 + 134
16  CoreFoundation                  0x3753830c __CFRunLoopRun + 1364
17  CoreFoundation                  0x374bb49e CFRunLoopRunSpecific + 294
18  CoreFoundation                  0x374bb366 CFRunLoopRunInMode + 98
19  GraphicsServices                0x323c8432 GSEventRunModal + 130
20  UIKit                           0x33c3fe76 UIApplicationMain + 1074
21  My iPhone App                   0x000f7ec2 0xdc000 + 114370
22  My iPhone App                   0x000ddc50 0xdc000 + 7248 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T17:27:45.053

它需要被象征化。看看这个帖子，应该会有帮助。

[如何符号化 iPhone\iPad 崩溃日志？](https://stackoverflow.com/questions/8172887/how-to-symbolicate-iphone-ipad-crash-logs)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-11-10T07:49:39.667

您只需几步即可轻松到达。

1.  打开**Xcode**。
2.  从菜单栏中选择**窗口。**
3.  去`Organizer > Crashes`。
4.  从下拉菜单中选择**App Store 。**

`Open in Project`如果你想直接进入代码行，你可以点击按钮。

如果您想详细了解崩溃日志；

[![在此处输入图像描述](../Images/89f8a30c2963329455bf7b0c2bc20a26.png)](https://i.stack.imgur.com/8PMGa.png) [![在此处输入图像描述](../Images/34d5b955aebcf16d1960e79775aaf1e5.png)](https://i.stack.imgur.com/nN5Ei.png)

1.  `Control+Click`关于有问题的坠机事件。
2.  选择在 Finder 中显示。
3.  在 Finder 窗口中，按住 Control 键单击突出显示的`.xccrashpoint`文件。
4.  选择**显示包内容**。
5.  在显示的文件夹中，转到`DistributionInfos > all > Logs`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-31T10:31:08.390

在这种情况下，该进程可能已尝试向已释放对象发送消息，您最好使用 Zombies 工具对应用程序进行分析，以更好地了解此崩溃的情况

[https://developer.apple.com/library/archive/technotes/tn2151/_index.html](https://developer.apple.com/library/archive/technotes/tn2151/_index.html) 这个文档非常好，其中包含有关如何符号化、理解和解释崩溃报告的基本信息。

# c# - 如何使用 C# 获取页面的 html 源代码？

> ID：11298161
> 
> 赞同：0
> 
> 时间：2012-07-02T17:13:12.380
> 
> 标签：c#, html, screen-scraping, web-scraping

我正在用 C# 构建一个应用程序来从我的银行帐户中检索信息。到目前为止，我可以在[https://accesd.desjardins.com](https://accesd.desjardins.com)上连接到我的银行账户。我首先在另一页输入我的卡号和密码。像这样 ：

```
 private void newweb_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
    {
        switch (iStages)
        {
            case 1:
                newweb.Document.GetElementById("card_num").SetAttribute("value", strCardNum);
                newweb.Document.GetElementById("ch_but_logon").InvokeMember("click");
                iStages = 2;
                break;
            case 2:
                newweb.Document.GetElementById("passwd").SetAttribute("value", psswd);
                newweb.Document.GetElementById("ch_but_logon").InvokeMember("click");
                iStages = 3;
                break;
        }

    } 
```

但是一旦我在我的银行账户页面上，我就不能再使用 newweb.Document.GetElementById(..) 来检索任何 html 标记或元素。我想得到我的总金额。但是当我尝试获取页面的任何元素时，我总是得到一个空元素。当我试图在Chrome上获取页面的html源代码时，我得到了一个页面的html源代码，说我没有权限查看该页面的源代码（这是我银行账户的那个） . 我想知道如何使用 C# 以任何方式获取源代码。当然有办法做到这一点，因为浏览器可以显示网页。它必须已经阅读了源代码才能显示它......

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T17:16:54.090

这就是你要找的：

```
mshtml.HTMLDocument htmlDoc = (mshtml.HTMLDocument)wb.Document.DomDocument;
var yourValue = htmlDoc.getElementById("[SomeID"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T22:00:43.197

我以前遇到过类似的事情。您需要确保将 cookie 与每个 Web 请求一起发回。银行存储 cookie 作为您登录的标志。此外，连接使用 SSL，因此请确保您在代码中也考虑到了这一点。

# ruby-on-rails - 带有 Ajax 实现的 Rails 3.2

> ID：11298162
> 
> 赞同：1
> 
> 时间：2012-07-02T17:13:15.823
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3.2

我是 Ruby on Rails 的初学者。在 ROR 的帮助下，我已经能够构建一个小型应用程序。

我想在不加载整个页面的情况下获取并加载我的一些数据。在点击不同的链接时，数据应上传到相应的 div 中。我正在尝试在链接上提供 :remote=>true 属性。但是此属性未正确呈现属性。

在使用 Ajax 跟踪 Rails 上的多个链接后，我发现视图中的链接应为：

```
<%= link_to cateogary.cateogary_name, :controller => "cateogaries", :action => "show_async", :id => cateogary_id, :remote => true %> 
```

这应该转换为：

```
<a href="/cateogaries/12/show_async data-remote=true"> 
```

虽然，这被转换为：

```
<a href="/cateogaries/12/show_async?remote=true"> 
```

可能的原因是什么？请转发一些在 ROR 中提供完整 Ajax 实现的好链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T17:18:35.310

Rails 将其识别`:remote => true`为 URL 的参数。试试这个：

```
<%= link_to cateogary.cateogary_name, { :controller => "cateogaries", :action => "show_async", :id => cateogary_id }, :remote => true %> 
```

或者也许是这样：

```
<%= link_to cateogary.cateogary_name, "/cateogaries/#{cateogary_id}/show_async", :remote => true %> 
```

此外，我建议您阅读[此](http://dharmaprogramming.wordpress.com/2012/06/13/dont-send-javascript-as-an-ajax-response/)内容（并检查链接）。

# java - 景观计算后的android事件

> ID：11298163
> 
> 赞同：1
> 
> 时间：2012-07-02T17:13:19.003
> 
> 标签：java, android

当设备从纵向变为横向时，我启用了 onConfigChanges 事件并正确处理。但是，在 onConfigChanges 之后，当再次计算页面并完成它时，会触发哪个事件？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T17:16:19.567

它在文档中说“某些设备配置可能会在运行时发生变化（例如屏幕方向、键盘可用性和语言）。当发生这种变化时，Android 会重新启动正在运行的 Activity（`onDestroy()`被调用，**然后是`onCreate()`**）。重新启动行为被设计为通过使用与新设备配置匹配的替代资源自动重新加载您的应用程序，帮助您的应用程序适应新配置。” [强调我的]

但是，如果您自己处理更改，则唯一被调用的方法是`onConfigurationChanged()`. 您希望进行的任何更改都必须在此方法中，因为不会调用任何 onX 方法。通过自己处理配置更改，您已经告诉它不要破坏和重新加载您的应用程序 - 因此，页面实际上不会再次被计算。唯一发生的事情是您在`onConfigurationChanged()`方法中定义的事情。

“现在，当这些配置之一发生变化时，MyActivity 不会重新启动。相反，MyActivity 会收到对 . 的调用`onConfigurationChanged()`。”

来源：http: [//developer.android.com/guide/topics/resources/runtime-changes.html](http://developer.android.com/guide/topics/resources/runtime-changes.html)

# iis-7 - 从远程机器访问在 IIS 服务器中运行的网站

> ID：11298166
> 
> 赞同：2
> 
> 时间：2012-07-02T17:13:28.887
> 
> 标签：iis-7, web

请帮我解决这个问题。我在我的 IIS 7 服务器上运行一个网站，我可以从本地访问它。但我无法从远程机器访问它。我已经浏览了一些论坛并在我的 Windows 防火墙中设置了权限。我正在使用公共 IP。同样的事情适用于 tomcat 服务器，但不适用于 IIS 服务器。请帮我。

# java - 使用 Java 过滤器更改语言环境不起作用

> ID：11298168
> 
> 赞同：0
> 
> 时间：2012-07-02T17:13:57.460
> 
> 标签：java, servlet-filters

我正在尝试使用 Java 过滤器更改区域设置，但以下代码不起作用，因为 JSP 页面仍以英语呈现：

```
public class PreferenceFilter implements Filter {

    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain)
        throws IOException, ServletException {

        HttpServletRequest req = (HttpServletRequest) request;
        HttpServletResponse res = (HttpServletResponse) response;

        Locale locale = StringUtils.parseLocaleString("fr"); 

        res.setLocale(locale);
        chain.doFilter(req, res);
    }
} 
```

我也在使用 Spring MVC，我们正在使用自己的翻译系统来获取不同语言环境的翻译：

```
<bean id="messageSource"
    class="com.mycompany.web.translations.DatabaseDrivenMessageSourceImpl" scope="singleton">
    <property name="cacheSeconds" value="3"/>
    <property name="defaultEncoding" value="UTF-8"/>
</bean> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T17:49:19.480

如果您使用 JSTL 来国际化您的 JSP，这很正常：JSTL 不会从响应中获取语言环境，而是从配置的作用域参数中获取，或者，如果没有设置语言环境，则从请求中获取。

利用

```
Config.set(request, Config.FMT_LOCALE, locale); 
```

其中 Config 是类`javax.servlet.jsp.jstl.core.Config.`。

# python - Python Redhat 版本问题

> ID：11298170
> 
> 赞同：1
> 
> 时间：2012-07-02T17:14:01.273
> 
> 标签：python, linux, node.js, redhat

> **可能重复：**
> [在不破坏 yum 的情况下升级 python](https://stackoverflow.com/questions/10624511/upgrade-python-without-breaking-yum)

我正在运行 Redhat VM（2.6.18-274.el5 64 位）。我在 vm 上安装了 nodejs 以使用 browserstack。为了让 nodejs 运行，我必须将 Python 升级到 2.6 或更高版本。我使用 make altinstall 从源代码安装了 2.7。然后我创建了一个从 2.4 指向 2.7 的硬链接。检查 python -V 现在显示 2.7 是默认值。一切都很好，节点现在已经启动并运行。

```
There was a problem importing one of the Python modules
required to run yum. The error leading to this problem was:

   No module named yum

Please install a package which provides this module, or
verify that the module is installed correctly.

It's possible that the above module doesn't match the
current version of Python, which is:
2.7.2 (default, Jul  2 2012, 23:35:52) 
[GCC 4.1.2 20080704 (Red Hat 4.1.2-51)]

If you cannot solve this problem yourself, please go to 
the yum faq at:
  http://wiki.linux.duke.edu/YumFaq 
```

我的问题是百胜。它不再工作，因为它正在寻找 2.4 的旧版本 Python？无论如何，我可以让它们都像在 Yum 和 node 中一样使用不同的版本吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T17:22:53.870

这里有两个问题。一是你破坏了你的系统python。Yum 安装在 python 的站点包中。如果你损坏了 python，yum 就会坏掉。破坏系统python安装是一个愚蠢的想法。也许你做了备份，或者有另一台可以移植原始 2.4 python 的姊妹机器。

另一个问题是在同一台机器上拥有多个 python 没有问题。要安装 Node.js，您必须简单地告诉它使用哪个 python。在运行之前设置`PYTHON=/opt/local/my/path/to/python2.7/bin/python`，可能也是如此。`PYTHONHOME``./configure`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T17:22:11.273

你永远不应该覆盖系统 Python；太多的脚本依赖于了解该解释器的行为。您可以在 中安装更新版本的 Python `/usr/local`，然后`virtualenv`根据需要使用 Python 包进一步隔离您的环境。

# sql-server - hh:mm:ss tt 字符串的正则表达式

> ID：11298172
> 
> 赞同：0
> 
> 时间：2012-07-02T17:14:08.677
> 
> 标签：sql-server, regex, datetime

我查看了一些正则表达式时间问题，但没有找到我需要的问题，而且我对如何编写正则表达式表达式一无所知。

我需要这样的时间值来传递：

*   上午 06:03:05
*   下午 06:03
*   早上 6:3:5

这个正则表达式似乎可以解决这个问题（我在[这里](https://stackoverflow.com/questions/8318236/regex-pattern-for-hhmmss-time-string)找到了， 但我还需要 AM/PM 部分，但它也可以不区分大小写。

```
([0-1]?\d|2[0-3]):([0-5]?\d):([0-5]?\d) 
```

所以总结一下我在这个正则表达式中需要什么：

*   单个数字 h:m:s 可接受
*   两位数 hh:mm:ss 可接受
*   需要 AM/PM 但不区分大小写
*   如果 AM/PM 部分可以输入为 a 或 p 会很好，但不需要
*   秒是可选的
*   不能接受 24 小时制

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T17:19:02.680

您提供的正则表达式支持 24 小时时间，以下我严格按照您的要求

```
(1[012]|0?\d):[0-5]?\d(:[0-5]?\d)?\s+[AaPp][Mm]? 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T17:17:08.470

只需`?`在秒部分之后和`\s+[aApP][mM]`re 的末尾添加：

```
([0-1]?\d|2[0-3]):([0-5]?\d)(:([0-5]?\d))?\s+[aApP][mM] 
```

当您不需要 24h 格式时，请更改第一部分：

```
(1[0-2]|0?\d):([0-5]?\d)(:([0-5]?\d))?\s+[aApP][mM] 
```

# asp.net-mvc - MVCScaffoliding 包抛出 MethodInvocationException

> ID：11298173
> 
> 赞同：6
> 
> 时间：2012-07-02T17:14:16.087
> 
> 标签：asp.net-mvc, nuget, asp.net-mvc-scaffolding

我最近使用 NuGet 2.0 升级了我的 VisualStudio 2010 安装，这似乎破坏了 Hanselman 和 Kirkland 的 MvcScaffolding 包。每当我尝试构建一个新的控制器和带有存储库的视图时，我都会在脚手架期间得到一个 MethodInvocationError。具体来说，System.Management.Automation.MethodInvocationException 用“5”个参数调用“Execute”。你调用的对象是空的。根据堆栈跟踪，这发生在 NuGet.PackageExtensions.GetFiles() 方法中。当然，堆栈转储中的最后一条语句是“您可能需要升级到较新版本的 MvcScaffolding”，但我确定这是附加到所有错误的末尾。我目前正在使用最新的 MvcScaffolding 包的 v1.0.7。任何人都对为什么会发生这种情况有任何想法，更好的是，如何解决它？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T07:09:05.433

情况似乎仍然如此，VS2012 和最新的 mvcscaffolding 包也是如此。但是，正如其他线程中所评论的那样，在包管理器控制台窗口中运行命令确实有效。stevesanderson的[博客](http://blog.stevensanderson.com/2011/01/13/scaffold-your-aspnet-mvc-3-project-with-the-mvcscaffolding-package/)有语法细节

# asp.net - ASP.net 中的标记

> ID：11298179
> 
> 赞同：1
> 
> 时间：2012-07-02T17:14:53.827
> 
> 标签：asp.net

我希望阻止所有非注册用户的访问，

那么，下面的工作不会吗？

```
<authorization>
      <deny users="?" />
</authorization> 
```

但是，我看到许多用户也使用该`<allow>`标签以及拒绝标签。为什么我们需要写`<allow>`，因为我们只是拒绝不需要的用户？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T17:23:43.330

拥有一个允许元素并没有什么*坏处。*但这不会改变任何事情。

来自 MSDN：

> ASP.NET 的默认配置包含一个授权所有用户的元素。（默认情况下，最后应用此规则。）如果没有其他授权规则匹配，则允许请求。如果找到匹配项并且匹配项是拒绝元素，则返回请求并带有 401 HTTP 状态代码。如果允许元素匹配，则模块允许进一步处理请求。

编辑：在下面回答您的问题。你可能想要的是：

```
<authorization>
      <allow role="Admin"/>
      <deny users="*" />
</authorization> 
```

换句话说。允许管理员但拒绝其他所有人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T17:27:27.460

它是您可以在一次性用品中使用的它们的组合。一个好的做法是专门调用你的授权，这样你就可以覆盖你的基地。例如，您可以指定拒绝所有未经授权的用户，然后说允许所有其他用户或子集。顺序确实很重要，就像阿奎那提到的那样。

不知道如何回答您关于允许一个角色但不允许其他管理员与用户的问题：

> 好的。另外，如果我希望只允许访问“管理员”角色而不是“用户”角色，添加会正常工作，对吧？

这会起作用，但不会像您期望的那样。这将拒绝所有具有“用户”角色的人，但随后允许所有其他角色。因此，要解决此问题，您需要添加具有指定管理员角色的允许标记。

# security - 暴力破解 PBKDF2 的速度有多快？

> ID：11298184
> 
> 赞同：12
> 
> 时间：2012-07-02T17:15:14.733
> 
> 标签：security, passwords, hash, cracking, pbkdf2

在linkedin密码散列泄漏之后，我一直在查看我们的密码散列。我们使用 Django 1.4，它使用 PBKDF2，它很棒，比之前的 SHA1 更上一层楼。

但是我很好奇一个人可以很容易地暴力破解它。我正在查看我们的密码复杂性规则，并且想知道执行（例如）8 个长度的小写 ascii 字母需要多快。

这份破解 LinkedIn 密码哈希的指南，有人在 GPU 上每秒执行 4.3 亿次 sha1 哈希。[http://erratasec.blogspot.ie/2012/06/linkedin-vs-password-cracking.html](http://erratasec.blogspot.ie/2012/06/linkedin-vs-password-cracking.html) PBKDF2 你会得到什么样的速度？

有没有人有任何粗略的/粗略的/粗略的数字来说明一个人可以多快地暴力破解 PBKDF2？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-02T21:47:50.950

[从 2 月份开始， agilebits 上](http://support.agilebits.com/discussions/1password-38-for-mac-from-agilebits-website/11784-entropy-and-pbkdf2)有一篇关于餐巾纸计算的文章。精简版：

> 作为一个球场数字，我会说 10,000 次 PBKDF2 迭代导致数十或数百毫秒来测试非常高端的消费者系统的密码。我们用 PBKDF2 做的事情是把每秒一百万次测试减少到几百次。这是考虑到使用多核和多 GPU 的专用软件。

因此，以您在 gpu 上对每秒 4.3 亿次 SHA-1 哈希进行基准测试的 erratasec 文章作为基准——agilebits 文章显示的指标表明，具有 10k 次迭代的 PBKDF2 会将其降低到每秒大约 100k 次测试。

远非科学，但让我们进入球场......

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-29T13:00:23.650

专用硬件，例如用于比特币挖掘的硬件，每秒可以执行超过 500 亿次哈希（截至 2013 年初。随着硬件变得更快，这是一个不断变化的目标）。

如果您对 PBKDF2 进行 1,000 次迭代，那么这会将攻击从每秒 500 亿次减少到每秒 5000 万次。10,000 次迭代将是每秒 500 万次。

然而，典型的 Web 服务器不会那么快。这对你来说会慢*很多。*您需要在自己的生产服务器上进行一些测试，可能会发现 10,000 次迭代太慢了。

所以这并不是关于 PBKDF2 可以被暴力破解多快，而是你的服务器可以快速验证 PBKDF2 密码。你需要决定你认为它应该花费多长时间（半秒？十分之一秒？百分之一秒？），然后调整 PBKDF2 轮数以适应它。

还要考虑客户使用的密码强度。如果他们都有很好的密码，那么你使用什么散列系统真的无关紧要。如果他们都使用糟糕的密码，那么 PBKDF2 不足以保护他们 - 你需要获得更多奇特的东西，比如苹果在 iPhone 中使用的硬件加盐哈希，试图将一个 4 位数字变成至少有一些密码的东西安全性（基本上，它们强制所有哈希由专用硬件芯片执行，这故意很慢。将数据移动到任何其他硬件并且无法解密）。

假设密码不在字典中（大多数密码都在字典中），那么密码强度的计算方法是将字母表中可能的字符数乘以每个字符一个 hibe。因此，如果密码包含字母（26 个字符的字母）和数字（另外 10 个字符），那么您有一个 36 个字符的字母，如果它是 6 个字符长，则将其乘以 6 次。

因此，6 位字母数字密码是 36*36*36*36*36*36，或者如果您愿意：36^6。这给了你大约 21 亿个可能的密码……通常我们假设黑客会在大约一半的时候找到真正的密码，所以称之为 10 亿个。

如果你使用的是 PBKDF2 并且有 1000 次迭代，那么拥有专门硬件的黑客将在大约 20 秒内猜出 10 亿个密码。这根本不是很好的安全性。

您可以通过使用更多轮的 PBKDF2（这会降低您的网站速度）或说服您的用户使用更好的密码来提高安全性。只需切换到 7 位而不是 6 位，或者添加大写字母甚至符号，它们就会显着提高其安全性。

Wolfram Alpha 可用于计算：`((36 ^ 6) / 50 million) seconds`其中 36 是字母的大小，6 是密码的长度，5000 万是黑客每秒可以使用的猜测次数（5000 万是攻击 PBKDF2 的严重攻击者1,000 发）。

您的数据库中有多少个密码？如果破解个人密码需要 20 秒，那是我 30 天的数学还是 30 年？这取决于你有多少客户。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-07T21:08:11.040

PBKDF2 是可调的。您始终可以增加成本值以减少攻击者每秒可能猜测的次数。我的建议是决定你希望它在你的平台上运行多快，并相应地设置成本值。例如，如果您认为 200 哈希/秒是性能/安全性的理想折衷，那么增加成本值并测试哈希几千个测试密码需要多长时间，直到您的平均速度约为 200/秒。

PBKDF2 还使用“盐”，通过强制攻击者分别攻击每个单独的帐户来防止攻击扩展。结合拉伸（即减慢算法），这使得恢复超过少数帐户变得极其困难。攻击者可以专注于一个帐户并希望获得最好的结果，或者为每个帐户花费一定的时间（一小时，一天），然后如果他没有成功，则转移到下一个帐户。

使用 LinkedIn 哈希，人们能够在一天或更短的时间内破解超过一百万个哈希。PBKDF2 以大约 200 次猜测/秒的速度运行，大约需要 9 个小时才能找出 650 万个帐户中的哪些帐户使用“linkedin”作为密码。如果您想针对所有这些哈希运行 1,000 个常用密码的列表，则需要大约一年的时间。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-31T04:05:35.033

请记住，bcrypt、scrypt 和 PBKDF2/PKCS#5/RFC 2898 都支持不同数量的迭代；没有一个天生就“更快”或“更慢”。有些需要更多 RAM（PBKDF2 不需要*太多*RAM），但仅此而已。

就具体的 PBKDF2 迭代而言，一个流行的基于 GPU 的破解程序可以在配备现代桌面 + 8 个 GPU 的情况下以每秒 100 万次的速度处理 WPA2。由于 WPA2 本质上是 PBKDF2（HMAC-SHA1、密码短语、ssid、4096、256），这告诉我们一台机器每秒可以测试超过 40 亿次 HMAC-SHA1 PBKDF2 迭代。当然，十台这样的机器每秒将测试超过 400 亿次这样的迭代。

OWASP 密码备忘单 ( [https://www.owasp.org/index.php/Password_Storage_Cheat_Sheet](https://www.owasp.org/index.php/Password_Storage_Cheat_Sheet) ) 建议在 2012 年至少进行 64,000 次迭代，每两年翻一番，或在 2013 年进行 90,510 次迭代。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-15T20:38:12.690

我在 2015 年写了[一篇关于此](https://www.usenix.org/system/files/conference/woot16/woot16-paper-ruddick.pdf)的论文。在单个消费级 GPU 上，我们每秒获得 160 万次哈希（1000 次迭代）。因此，例如，如果您以 10k 次迭代运行，那将下降 10 到 160,000 倍。

假设一个小写的 ascii 字母和 8 个字符只有 26^8 个候选者。以 160k / 秒的速度开裂需要 15.1 天才能耗尽。所以从统计上看，你平均可以预期在大约 7.6 天或一周内出现裂缝。新硬件要好得多，现在这个数字看起来会更弱。我写的软件是开源的，可以在[这里](https://github.com/OpenCL-Andrew/.NETCracker/)免费获得。

# javascript - 如何使用 Impress.js 获得完整、无缝的旋转？

> ID：11298185
> 
> 赞同：4
> 
> 时间：2012-07-02T17:15:15.063
> 
> 标签：javascript, rotation, impress.js

我正在使用 impress.js 创建一个 3D 效果，在其中您处于四个页面内，就好像它们是一个房间里的四堵墙一样。要查看下一页，使用简单的 -90 度旋转。页面已经使用 impress.js 进行布局，使用：

```
//page 1
<div id="title" class="step" data-x="0" data-y="0" data-z="0">

//page 2
<div id="about" class="step" data-x="2000" data-y="0" data-z="2000" data-rotate-y="-90">

//page 3
<div id="our_work" class="step" data-x="0" data-y="0" data-z="4000" data-rotate-y="-180">

//page 4
<div id="contact" class="step" data-x="-2000" data-y="0" data-z="2000" data-rotate-y="-270"> 
```

这是可行的，只是从第四页到第一页的转换需要“很长的路”。如中，旋转显示为 270 度旋转，而不是其他 -90 度。如果我将第 1 页的旋转更改为 -360 以解决此问题，则从第一页到第二页的转换会中断。我将如何进行完整的转换循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T19:49:52.907

据我所知，这是渲染引擎的限制。令人惊讶的是，即使旋转 > 360 度也会发生这种情况。我知道的唯一解决方法是分三步制作动画：

1.  通过过渡动画到 359.9 度。
2.  移动到 0 度，没有过渡。
3.  用过渡终止动画。

顺便说一句，我不确定这是否可以使用 impress.js 轻松完成。也许试试“隐形”步骤？

# c# - 为什么我在pictureBox中得到带有白色背景的大红色X而不是动画gif？

> ID：11298190
> 
> 赞同：1
> 
> 时间：2012-07-02T17:15:33.300
> 
> 标签：c#

我在硬盘上检查了动画 gif 的创建，并在 Internet Explorer 中打开它，它工作正常。

所以我不明白为什么我得到这个白色的大 x 红色。

我使用了断点，到目前为止没有收到任何错误。

在这个类中真正创建的动画 gif 是第 175 行：

```
unfreez.MakeGIF(myGifList, previewFileName, 8, true); 
```

并且动画 gif 是真实存在和创建的。在第 210 行中，我调用了将动画 gif 加载到图片框的函数：

```
pictureBoxImage(previewFileName); 
```

这是我使用断点的 pictureBoxImage 函数，它没有显示任何错误：

```
public void pictureBoxImage(string pbImage)
{
    Image img2 = null;
    try
    {
        using (img = Image.FromFile(pbImage))
        {
            //get the old image thats loaded from the _memSt memorystream
            //and dispose it
            Image i = this.pictureBox1.Image;
            this.pictureBox1.Image = null;

            if (i != null)
                i.Dispose();

            //grab the old stream
            MemoryStream m = _memSt;

            //save the new image to this stream
            _memSt = new MemoryStream();
            img.Save(_memSt, System.Drawing.Imaging.ImageFormat.Gif);

            if (m != null)
                m.Dispose();

            //create our image to display
            img2 = Image.FromStream(_memSt);
        }

        if (img2 != null)
            pictureBox1.Image = img2;
        //label2.Text = numberOfFiles.ToString();
        //label6.Text = nameOfStartFile.ToString();
        //label4.Text = nameOfEndFile.ToString();
        //File.Delete(pbImage);
    }
    catch (Exception err)
    {
        Logger.Write("Animation Error >>>   " + err);
    }
} 
```

想不通为什么？红色 x 和白色背景。

我没有将整个班级复制到这里，但如果需要，我会复制到这里，但动画 gif 制作得很好，并且可以在 Internet Explorer 上运行，所以班级正在工作，但由于某种原因，pictureBox 上的显示工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-22T21:23:58.320

[肖恩·哈格里夫斯 (Shawn Hargreaves](http://blogs.msdn.com/b/shawnhar/archive/2010/11/22/winforms-and-the-big-red-x-of-doom.aspx) )对“厄运的大红色 X”有出色而简洁的描述。我发现它在处理突然显示红色“X”的 WinForm 组件的一般情况下非常有用。

总之：

*   这是由控件从`OnPaint`事件中抛出异常引起的。
*   一旦被抛出，该控件将继续显示红色 X 并跳过射击`OnPaint.`
*   要进行调试，请将调试器设置为捕获公共语言运行时异常，然后执行您通常执行的任何操作以获取红色 X。调试器将在它发生的地方停止，让您进行调查并希望找到防止它的方法。

# java - Facebook 在墙上发布文本 - 访问令牌始终为 NULL

> ID：11298192
> 
> 赞同：0
> 
> 时间：2012-07-02T17:15:46.683
> 
> 标签：java, facebook-access-token, facebook-java-api, facebook-java-sdk

我正在处理这个问题很长时间。我已经在 facebook 上注册了我的应用程序，但我仍然收到此错误：

{"error":{"message":"必须使用活动访问令牌来查询当前用户的信息。","type":"OAuthException","code":2500}

我的代码：

```
facebook = new Facebook("3************0");
facebook.authorize(this, new String[] { "publish_stream","user_status"}, new FaceDialog());
// dialog will shown and I log in into facebook
String token = facebook.getAccessToken(); // returns null

Bundle parameters = new Bundle();
parameters.putByteArray("message", "Haloooo".getBytes());
parameters.putByteArray("description", "test test test".getBytes());
response = facebook.request("me");
response = facebook.request("me/feed", param, 
                    "POST"); 
```

有人解决了这个问题吗？

# ruby-on-rails - 在一对一关系上创建多个对象

> ID：11298193
> 
> 赞同：0
> 
> 时间：2012-07-02T17:15:51.157
> 
> 标签：ruby-on-rails, ruby-on-rails-3

Helo，我一直遇到这个问题。只是为了简单起见，我会简短地解释一下。

```
Student has_many   :grades
        belongs_to :class

Grade belongs_to   :student
      belongs_to   :rubric

Rubric belongs_to  :course
       has_many    :students, :through => :class 
```

要创建新年级，我们需要找到现有的学生。我们可以打电话给@class.students 这样做。此外，应使用 rubric_id 创建成绩。

我已经知道如何做嵌套表格。但是如何将复数学生证传递给新年级？

如何构建控制器和视图来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T17:34:54.787

（Arg，我无法在评论中正确格式化我的问题，所以我必须使用答案。请耐心等待，因为我认为它还不能回答你的问题。）

我认为您的模型没有正确设置以实现这一目标。在您询问的场景中，学生和年级似乎是多对多关联。即一个学生有很多评分表，但一个评分表有很多学生，都通过年级（这是您的关联模型）。我理解正确吗？

```
Class   has_many   :students
        has_many   :grades
        has_many   :rubrics, :through => :grade

Student has_many   :grades
        has_many   :rubrics, :through => :grade
        belongs_to :class

# A grade is a particular rubric assigned to a student for a particular class
Grade belongs_to   :student 
      belongs_to   :rubric
      belongs_to   :class

Rubric belongs_to  :course
       has_many    :grades
       has_many    :students, :through => :grade 
```

让我知道我上面的解释是否正确，我可以跟进控制器和视图的答案。我最近为另一个项目做了一些非常相似的事情。

编辑：既然我们已经澄清了问题，这是我建议的答案。目标是在特定班级中为多个学生分配一个评分量规。

没有内置的方法可以支持这样的事情，所以我们必须建立记录以及与正确的控制器动作和表单的关联。

在 Grades 模型中，我们添加了这个函数： def self.checked?(class_id, student_id, rubric_id) Grade.find(:all, :conditions => {:class_id => class_id, :student_id => student_id, :rubric_id => rubric_id} ）。展示？结尾

在 form_for :rubric 中，我们创建如下内容：

```
<%= form_for @rubric do |f| %>
  <% for @class.students.each do |student| %>
  <%= fields_for :grades do |builder| %>
    <%= check_box_tag "grades[" + @class.id.to_s + "][]", rubric.id, Grade.checked?(@class.id, student.id, @rubric.id) %>
  <% end %>
  <%= f.submit "Save" %>
<% end %> 
```

现在在 RubricsController 的创建操作中，您应该有一个 params[:grades]，它是一个带有键 [:class] 的哈希，其值应该只是一个学生 ID 数组。现在您可以创建关联这些模型的成绩对象，因为您有一个 rubric id (@rubric.id)、一个类 id (@class.id) 和一个学生 id 数组。

我希望我没有搞砸上面的代码，因为我不得不从我当前的实现中改变它。但是查看rails服务器的控制台日志应该可以让你弄清楚上述表单提交时传递了哪些参数并进行调整。

# javascript - 设置简单倒数计时器时出现问题

> ID：11298194
> 
> 赞同：0
> 
> 时间：2012-07-02T17:15:52.953
> 
> 标签：javascript, jquery, dom

有人可以告诉我我做错了什么吗？我是 jquery 的新手，我想得到一些反馈。基本上我想要的是某种倒数计时器，它会显示距离事件发生还有多少天。该事件是一个固定的日期。

谢谢您的帮助

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

 <html xmlns="http://www.w3.org/1999/xhtml">

 <head>
 <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
 <title>Almost Vacation</title>

 <script type="text/javascript"    src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

 <script>
   $('document').on('ready', calc);
    function calc(){
        var myDate = new Date();
        myDate.setMonth(05, 06);
        var today = new Date();
        today.getDay();
        var x = myDate - today;
        $('#aantal p').text(x);
}

 </script>       

 <style type="text/css">
   p {
      color:red; 
      font-size:1.8em; 
      margin:-90px 10px 5px;
   }

 </style>

 </head>

 <body>

        <img src="http://fed.cmd.hro.nl/upload/files/1011/y1/q4/w3/slapende_student.jpg" width="462" height="275" />

    <p>Vacation starts in<span id="aantal">&nbsp;</span> Days</p>
 </body>

 </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T17:17:19.553

```
$('document').on('ready', calc); 
```

应该：

```
$(document).ready(calc); 
```

或者简单地说：

```
$(calc); 
```

`$('document')`正在寻找类型的元素，`<document>`
同时用 jQuery 对象`$(document)`包装节点。`document`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T17:28:59.413

它需要是：

```
$(function() {
    var myDate = new Date();
    myDate.setMonth(06, 06); //set date forward in time, not backward
    var today = new Date();
    var x = (myDate - today)/86400000;
    $('#aantal').text(x); //append to the span, not the p that does not exists
}); 
```

[小提琴](http://jsfiddle.net/Da8h6/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T17:22:20.447

除了 gdoron 指出的语法更正之外，您还错误地获取了范围。首先，你想减去`myDate`而`today`不是相反。此外，这个减法的结果是日期之间的毫秒数，所以你需要做一些单位转换才能得到天。最后，您的 jQuery 选择器不正确。

```
<script>
    $(document).ready(calc);
    function calc(){
        var myDate = new Date();
        myDate.setMonth(5, 6);
        var today = new Date();
        var x = (today - myDate)/(1000*60*60*24);
        $('#aantal').text(x); // update this selector too!!
    }
</script> 
```

如果您决定要对该数字进行四舍五入，则可以执行以下操作：

```
var x = Math.ceil((today - myDate)/(1000*60*60*24)); 
```

# c++ - 为什么我们只能在类或函数（C++）中使用“静态”？

> ID：11298196
> 
> 赞同：6
> 
> 时间：2012-07-02T17:15:56.450
> 
> 标签：c++, static, keyword, linkage

我最近在阅读 Stroustrups *The C++ Programming Language*并且在第 9 章关于链接的部分中，我遇到了以下段落：

> “在 C 和更早的 C++ 程序中，关键字 static （令人困惑地）用来表示“使用内部链接”。除了函数和类内部之外，不要使用 static。

问题是进一步阅读，作者没有详细说明为什么这是不好的做法。我不时在我的代码中使用静态函数，通常用于一些在编译单元之外不需要的简单计算，但我从来没有意识到这是不受欢迎的，我也不清楚它为什么不好。任何人都可以为我阐明这一点吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T17:20:16.590

我认为这个想法不是对内部链接皱眉，而是为了避免与`static`:的新含义混淆`static`)，因此避免使用不太直观的一种是一件好事。

正因为如此，C++98 标准提供了另一种声明具有内部链接的东西的方法：未命名的[命名空间](https://stackoverflow.com/questions/154469/unnamed-anonymous-namespaces-vs-static-functions)，并且弃用`static`了“在命名空间范围内声明对象时”。

C++11 标准删除了这种弃用（并且还以某种方式改变了未命名命名空间的语义，并不真正需要内部链接），所以现在它实际上是一个风格问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-02T17:19:17.337

因为在 C++ 中应该首选匿名命名空间，它基本上提供相同的功能。

我认为`static`在这种情况下由于双重含义而皱眉，而且这两种含义完全相反 - 如果在 a`class`或 a内部`struct`它代表一个全局状态，而在外部它提供内部链接并提供变量的副本或每个翻译单元的方法。

此外，`static`只能应用于函数和变量，而在匿名命名空间内，您可以有类型声明。

```
namespace  //OK
{
    class X {};
}

static class X //syntactically correct, but does nothing
{
}; 
```

请注意，该标准认为使用`static`来指定 linkeage 为*deprecated*。

# ruby-on-rails - Ruby on Rails - 如何正确映射和链接到新控制器？

> ID：11298197
> 
> 赞同：1
> 
> 时间：2012-07-02T17:15:57.060
> 
> 标签：ruby-on-rails, ruby, haml

我正在尝试创建此控制器：

```
 def calculate
    # Do some calculations here     

    respond_to do |format|
      format.json{head status}
    end
  end 
```

我有一个 HAML 文件，我在其中制作了我的 HTML，并且我想在其中链接到类似这样的内容：

```
=link_to("stats" , controller_path_url) 
```

其中 controller_path 是显示的 rake 路由路径。我的问题是，当我执行 rake 路由时，如何使这种唯一命名的控制器函数被映射并显示其路径？在 routes.rb 中我有什么需要做的吗？我应该在那里改变什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T17:21:06.610

您应该在`routes.rb`文件中执行以下操作：

> 匹配“计算”=>“控制器名称#计算”

然后运行：

> bundle exec rake 路由

看看你的路。

它应该`calculcate_path`用于路径和`calculate_url`完整路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T17:18:46.197

您需要修改您的 routes.rb 文件。我建议您查看[http://guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)，它真的非常有帮助。

# java - 什么功能参数

> ID：11298203
> 
> 赞同：-1
> 
> 时间：2012-07-02T17:16:30.170
> 
> 标签：java

```
class Scroll {
    static boolean up;
    static boolean down;
    public static void scroll(boolean direction) {
        if (/* ... */) {
            System.out.println("UP");
        }
        else {
            System.out.println("DOWN");
    }
}

public class Test2 {
    public static void main(String[] args) {
        Scroll.scroll(Scroll.up);
    }
} 
```

**如何检查哪个字段已使用 - with`Scroll.up`或调用`Scroll.down`？**我知道在上面的代码中我可以通过其他方式获得相同的效果，但它是简化的代码，具有我的问题的本质。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T17:22:47.153

如果唯一的选择是向上或向下，您可以重命名`direction`为`up`然后：

```
if (up) {
    // Up
}
else {
    // Down
} 
```

如果有更多方向（例如左和右），或者即使不是真的，这`enum`也是方便的地方：

```
enum Direction {
    Up,
    Down,
    Left,
    Right
} 
```

然后在您的代码中使用它，可能带有`switch`：

```
switch (direction) {
    case Direction.Up:
        // ...
        break;
    case Direction.Down:
        // ...
        break;
    case Direction.Left:
        // ...
        break;
    case Direction.Right:
        // ...
        break;
} 
```

[更多关于枚举。](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T17:24:21.143

正如评论所建议的，使用枚举：

```
class Scroll {
    public static enum Direction { up, down};
    public static void scroll( Direction direction) {
        if ( direction == Direction.up) {
            System.out.println("UP");
        }
        else {
            System.out.println("DOWN");
        }
    }
}

public class Test2 {
    public static void main(String[] args) {
        Scroll.scroll( Scroll.Direction.up);
    }
} 
```

[您可以在此演示](http://ideone.com/ZU3OY)中看到它的工作原理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T17:22:23.387

if (up) then up 被按下

如果（向下）然后按下向下。

布尔数据类型是 (true/false, 1/0) 所以如果你打电话

```
if (down) 
```

如果 down 为“true”，它将进入。

# ios - 如何从 Chrome for iOS 打开带有后备的应用程序 URL

> ID：11298205
> 
> 赞同：2
> 
> 时间：2012-07-02T17:16:36.387
> 
> 标签：ios, url, google-chrome

如果我的网站是使用 URL 安装的，我的网站可以打开我的应用程序，如果不是，则回退到应用商店链接。不幸的是，在适用于 iOS 的 Chrome 中，这不起作用，因为我被带到显示“Chrome 无法打开此 URL”的页面（错误 -1002 ()：不支持的 URL。）

有谁知道如何解决这个问题，我尝试了 ajax 加载请求和计时器无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-17T04:00:42.140

我制作了 Tweetable，它`app > website`使用超时来处理 twitter 的回退。

> [https://github.com/omarish/tweetable](https://github.com/omarish/tweetable)

它测试应用程序是否存在，如果存在，则加载 twitter:// 深层链接。否则，它会加载网站链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T09:53:43.560

如果有人对此感兴趣，我确实找到了解决方案。Chrome 在 iOS 上的问题是它会在整个页面中而不是在例如 iFrame 中打开错误。

因此，我设法打开了一个新选项卡，尝试加载 URL，然后关闭该选项卡。这很好用，尽管第一次出现关于弹出窗口的安全警告......

# android - Android：访问活动意图父函数

> ID：11298213
> 
> 赞同：0
> 
> 时间：2012-07-02T17:17:41.113
> 
> 标签：android, android-intent, android-activity

Android：访问意图父函数。

我有一个通过意图类打开另一个活动的活动。我必须访问父类函数（为了从子类更改图像）。到目前为止，我有：

（在父母中）

```
public static Activity _activity;

public void onCreate(Bundle savedInstanceState) 
{
    _activity = this;
} 
```

然后在儿童活动中，我得到了：

```
private Activity _getImageActivity;

public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    _getImageActivity = GetImageActivity._activity;
} 
```

这似乎有效，但 _getImageActivity 不访问任何父母公共功能。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T18:46:45.747

解决更改父活动图像的问题的方法是`child`使用`startActivityForResult()`. 完成子活动中的操作后，您的控件将返回到`onActivityResult()`可以更改图像的父活动。

以下是官方链接：

[http://developer.android.com/reference/android/app/Activity.html#startActivityForResult(android.content.Intent,int](http://developer.android.com/reference/android/app/Activity.html#startActivityForResult(android.content.Intent,int) )。

您将在网络中获得许多其实现示例。

# java - JDBC批量插入异常处理

> ID：11298220
> 
> 赞同：21
> 
> 时间：2012-07-02T17:18:25.717
> 
> 标签：java, sql, oracle, jdbc, oracle10g

每次执行我的程序时，我都在执行 JDBC 批量插入（一次大约插入 1000 行）。但我无法正确处理某些记录引发的异常。

假设 1000 条记录中的第 100 条记录由于无效数据或某个值的大小超过列大小而引发异常。一旦发生异常，*剩余的记录就不会被插入*，程序就会在两者之间失败。

我想要的是即使第 100 条记录抛出异常，其余的插入应该在我的程序结束之前像往常一样发生。

我无法理解如何实现这一目标。请建议。

**编辑：**

这是我在我的应用程序中用于批量插入的示例代码。假设结果集有大约 1000 条记录。

```
PreparedStatement ps = null;
while(rs.next()){
  //Retrieve the value and set it to a Prepared statement

  String name = rs.getString("Name");
  int age = rs.getInt("Age");
  ps.setInt(1, age);
  ps.setString(2, name);

  //Finally invoke addBatch
  ps.addBatch();
}

//Finally call the executeBatch method
ps.executeBatch(); 
```

如果第 100 条记录引发异常，那么我只想从第 100 条和第 1000 条记录触发该过程。有什么方法可以做到这一点，以便我可以从引发异常的记录重新启动该过程，**直到**再次结束？如何做到这一点？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-02T17:28:46.680

您声明您正在执行批量 SQL 语句，所以我假设您正在使用`executeBatch`. 当你`executeBatch`做一批语句时，有的语句可能成功，有的语句可能失败。如果一条语句失败，这并不意味着 JDBC 驱动程序会回滚成功的语句。如果一条语句失败，JDBC 驱动程序可能会选择尝试执行批处理中的所有语句，或者一旦语句失败，它可能会选择停止执行批处理中的语句（听起来您正在使用的驱动程序选择停止执行语句为一旦出现故障）。

当批处理中的一个语句失败时，您应该得到一个`BatchUpdateException`. 在您的异常处理程序中，您需要调用`getUpdateCounts`. 这将为您提供一个数组`int`，告诉您语句更新了多少行，`Statement.SUCCESS_NO_INFO`指示语句成功但没有行数可用，或者`Statement.EXECUTE_FAILED`指示语句失败。如果前 99 条语句成功，第 100 条语句产生错误，其余语句未执行，则应返回一个 100 元素数组，其中前 99 个元素表示成功，第 100 个元素表示`Statement.EXECUTE_FAILED`. 然后，您的代码将需要重试那些未执行的语句（在本例中为语句 101-1000）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T17:22:08.207

在没有看到任何代码的情况下，我能给出的最佳建议是在执行插入的代码周围包裹一个 try/catch 块。您可能还需要在每次插入时提交插入（假设事务连接）。这将导致处理速度稍慢，但允许您的程序继续。

我认为更干净的方法是在插入之前尝试预先验证记录。如果我们一次只讨论 1000 条记录，这应该不会造成太大的处理负载。

# php - 交互式shell脚本命令行php

> ID：11298221
> 
> 赞同：1
> 
> 时间：2012-07-02T17:18:31.250
> 
> 标签：php, zend-framework, shell, command-line, interactive

我正在尝试在我的 Web 应用程序上实现一项功能，以使用户能够与服务器上的命令行进行交互。

问题是：是否可以将命令行与 Web 应用程序集成，这样即使进程仍在后台运行，任何生成的结果都可以显示给用户，并且可以获取和处理任何输入，因此它将是像 -a 函数。

我已经尝试了所有 exec() shell_exec() 我试图通过 2> SomeFile.txt 重定向交互式命令的结果，但输出不会是交互式命令的结果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T18:19:44.710

1.With命令返回输出。利用：

[shell_exec](http://php.net/manual/en/function.shell-exec.php) — 通过 shell 执行命令并将完整的输出作为字符串返回

[passthru](http://php.net/manual/en/function.passthru.php) — 执行外部程序并显示原始输出

[system](http://php.net/manual/en/function.system.php) — 执行外部程序并显示输出

2.With命令不返回输出。利用：

system 或 passthru 然后检查 return_var 参数并打印输出

```
system('touch readme.txt', $retval);
if(!$retval){
    print 'Touched file with success';
} 
```

或者

```
if(!touch('readme.txt', time())){
    print 'Whoops, something went wrong...';
} 
```

# c++ - 这是什么 ？在读取用 Unicode 编码的文本文件后控制台输出的开头？

> ID：11298224
> 
> 赞同：2
> 
> 时间：2012-07-02T17:18:47.850
> 
> 标签：c++, c, winapi, unicode

我一直在修改读取文件（以 Unicode 编码的文本文件），出于某种原因，我在输出的开头得到了一个问号。

这是代码。

```
#include <iostream>

#include <Windows.h>
#include <fcntl.h>
#include <io.h>

int main(void)
{
    HANDLE hFile = CreateFile(L"dog.txt",
                              GENERIC_READ,
                              NULL,
                              NULL,
                              OPEN_EXISTING,
                              FILE_ATTRIBUTE_NORMAL,
                              NULL);

    _setmode(_fileno(stdout), _O_U16TEXT); //Making sure the console will 
                                           //display the  wide characters 
                                           //correctly. See below for link

    LARGE_INTEGER li;
    GetFileSizeEx(hFile,&li); 

    WCHAR* pBuf = new WCHAR[li.QuadPart / sizeof(WCHAR)]; //Allocating space for 
                                                          //the file.

    DWORD dwRead = 0;
    BOOL bFinishRead = FALSE;
    do
    {
        bFinishRead = ReadFile(hFile,pBuf,li.QuadPart,&dwRead,NULL);
    } while(!bFinishRead);

    pBuf[li.QuadPart / sizeof(WCHAR)] = 0; //Making sure the end of the output 
                                           //is null-terminated.

    std::wcout << pBuf << std::endl;

    std::cin.get();

    return 1;
} 
```

狗.txt

```
One Two Three 
```

控制台输出

```
?One Two Three 
```

通过确保输出的结尾是空终止的，我已经消除了很多乱码，但是？一开始让我很困惑。

至于

```
_setmode(_fileno(stdout), _O_U16TEXT); 
```

请参阅[在 Windows 控制台应用程序中输出 unicode 字符串](https://stackoverflow.com/questions/2492077/output-unicode-strings-in-windows-console-app)

**注意：**我的代码是面向 Windows 的，如果可能的话，我打算保持这种方式。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T17:20:51.770

它可能是一个[字节顺序标记](http://en.wikipedia.org/wiki/Byte_order_mark)（BOM）。标准做法是在 UTF-16 文本文件的开头插入 BOM，以确保它可以在不同端序系统上正确读取（其中编码 UTF-16 双字节值的各个字节的顺序不同） . 您可以通过检查第一个是否`wchar_t`为代码点（`U+FEFF`即具有值）来剥离它`0xfeff`。

# c++ - 将托管函数指针作为非托管回调传递

> ID：11298225
> 
> 赞同：4
> 
> 时间：2012-07-02T17:18:49.410
> 
> 标签：c++, .net, winapi, c++-cli, unmanaged

我正在尝试将托管函数指针传递`void (*)(void *)`给我的非托管库。我的非托管库使用指向受关键部分保护的数据帧的指针调用此回调。当托管回调正在运行时，由于临界区，没有其他东西可以修改数据帧。但是，仅通过输入回调，我就会遇到访问冲突和堆损坏。

**编辑**：我忘了提。窃取它管理的`StartStreaming()`线程。此外，它创建了一个单独的线程，用于将新数据分派给给定的回调。在这个单独的线程中调用回调。

到目前为止，我已经完成了以下操作：

```
//Start Streaming
streaming_thread_ = gcnew Thread(gcnew ThreadStart(&Form1::WorkerThreadFunc));
streaming_thread_->Start(); 
```

在哪里：

```
extern "C" {
#include "libavcodec\avcodec.h"
#include "libavutil\avutil.h"
}

namespace TEST_OCU {

delegate void myCallbackDelegate(void * usr_data); //Declare a delegate for my unmanaged code

public ref class Form1 : public System::Windows::Forms::Form
{
    public:

    static void WorkerThreadFunc()
    {
        myCallbackDelegate^ del = gcnew myCallbackDelegate(&Form1::frame_callback);

        MessageBox::Show("Starting to Streaming", "Streaming Info");
        if(rtsp_connection_ != NULL)
            rtsp_connection_->StartStreaming();
            //rtsp_connection_->StartStreaming((void (*)(void *)) System::Runtime::InteropServices::Marshal::GetFunctionPointerForDelegate(del).ToPointer() );
        MessageBox::Show("Done Streaming", "Streaming Info");
    }

    static void __cdecl frame_callback(void * frame)
    {
        AVFrame * casted_frame = (AVFrame *)frame;
    }

private: System::Void Form1_Load(System::Object^  sender, System::EventArgs^  e) 
    {
        if(rtsp_connection_ == NULL)
            rtsp_connection_ = new NeyaSystems::RTSPConnection("rtsp://url");
    }

    private: static RTSPConnection * rtsp_connection_ = NULL;
}
} 
```

*   我省略了很多无意义的代码......
*   `StartStreaming`默认为 NULL 指针，在这种情况下我没有损坏
*   `StartStreaming`使用委托函数指针会导致堆损坏
*   `RTSPConnection`在本机 C++ 中实现并且还包含 C 调用（libavcodec）
*   `RTSPConnection`包含两个线程，通信和帧调度线程（调用托管回调）

谁能给我一个面包屑？非常感谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T17:27:40.320

编辑：跨线程调用不是问题。如果非托管调用者希望调用 __cdecl 函数，则必须使用 UnmanagedFunctionPointerAttribute 属性装饰委托类型。

```
using namespace System::Runtime::InteropServices;

[UnmanagedFunctionPointerAttribute(CallingConvention::Cdecl)] 
delegate void myCallbackDelegate(void * usr_data); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T17:54:40.030

```
 myCallbackDelegate^ del = gcnew myCallbackDelegate(&Form1::frame_callback); 
```

这将委托声明为方法中的局部变量。局部变量在使用它们的最后一条语句之后立即进行垃圾回收。您正确使用 Marshal::GetFunctionPointerForDelegate() 但这不足以让垃圾收集器了解委托正在使用中，它无法跟踪本机代码中的引用。因此，在 StartStreaming() 调用期间或之后发生的下一次垃圾收集将销毁委托。你的回调会爆炸。

目前尚不清楚回调何时停止。至少你需要把 GC::KeepAlive(del); 在 StartStreaming() 调用之后。如果在 WorkerThreadFunc() 停止运行后进行回调，可能考虑到方法调用中的“开始”，则必须通过将委托对象作为字段存储在表单类中来保持委托对象的存活时间更长。可能声明为静态以使其保持活动状态直到程序终止。

# wcf - WCF 输入/输出 DataContract 定义指南

> ID：11298227
> 
> 赞同：0
> 
> 时间：2012-07-02T17:18:53.273
> 
> 标签：wcf, datacontracts

我需要一些关于为以下场景定义 DataContracts 的最佳方法的指导： 1\. 我有 2 个 Web 方法，一个用于上传原始数据 2\. 此数据在服务器上用于某些计算。即一个项目有一组计算，3。所以我的实体设计是这样的，项目实体有计算实体的集合。该集合未标记为 DataMember。4\. GetItemDetails 方法返回每个项目及其计算集合。5\. 我最终为 Upload 和 GetItemDetails 操作定义了 2 个不同的 DataContract，因为 Item 是我的主要实体，用于我的所有业务逻辑操作，但它的计算集合是在服务器端生成的数据，必须按需返回（获取项目详细信息）。既然' s 处理数据似乎不适合在上传时公开它，因为在计算集合中不需要输入。6\. 在我的 GetItemDetails 方法中，我使用“项目”实体并分别加载项目集合。计算集合，然后将其转换为我的输出数据合同，其中项目和集合都暴露了。

这种方法的缺点是必须为相同的实体表示维护 2 个数据合约。我试图搜索在 GetItemDetails 方法的 Calculation 集合上动态添加 DataMember 属性的选项，但没有成功。我希望情况很清楚。我的问题是在这种情况下定义数据合同的最佳方式是什么，这样客户端就不必处理 2 个不同的代理类来代表上传和获取的相同实体。如果两者都使用相同的实体，这是否是一个正确的解决方案，以便我的上传合同公开（然后忽略任何输入）计算集合，即使用户不希望将其提供给我的上传操作？

我将不胜感激这方面的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T19:54:30.457

您应该检查 KnownType WCF 属性。这将允许您指定可以接受的其他对象。

[MSDN 上的 KnownType 属性](http://msdn.microsoft.com/en-us/library/ms730167.aspx)

另一种选择是使用继承并拥有一个具有最少属性的基类和一个从基类继承的更健壮的类。虽然这不会绕过重复的实体对象，但至少向上转换/向下转换可以工作。

另一种选择是拥有单独的对象。客户会具体知道需要设置什么。没有猜测工作。只公开你需要的。我最倾向于这个选项或继承选项。

# wcf - 调度单位的 WCF 绑定建议

> ID：11298228
> 
> 赞同：1
> 
> 时间：2012-07-02T17:18:56.467
> 
> 标签：wcf, architecture

我计划构建一个基于 WCF 的应用程序，该应用程序将允许现场用户连接到调度中心，并能够在他们执行呼叫时获取他们呼叫的更新并从系统请求信息。

我正在寻找有关如何将客户端连接到服务器的建议。

我在想我会使用 NetTcpBinding。

但是我是使用回调结构还是只是在两个方向上建立一个 netTcpBiding 连接来维持连接？

任何时候我可能只有大约 100 人在线，并且会有一个调度中心更新或派出现场人员到客户站点。

我们将使用手机数据通过互联网传输数据，并使用名为 Netmotion 的产品让客户端计算机看起来像是设置在家庭网络上。

任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T19:20:32.103

由于客户端不会一直在线，或者可能会出现连接中断（毕竟您使用的是移动数据），因此 TCP/IP 不是很可靠。

您可能会遇到中途连接故障以及各种其他连接问题。最重要的是，您必须对遇到的每种异常情况进行大量错误处理（并且您不会在开发过程中遇到所有这些情况）。

我假设客户端不是某种嵌入式设备，而是笔记本电脑（或从今年秋天开始的平板电脑：））。

因此，出于以下几个原因，我建议使用 WCF over MSMQ（事务性）：

*   可靠的通信和消息传递，0 数据丢失。如果您使队列具有事务性并利用分布式事务，这适用。
*   未送达的消息会返回给您（在死信队列中），您可以进行日志记录、故障排除或将它们发回以进行进一步处理。
*   通讯中断。发送消息时，客户端甚至不必在线。它们只是在本地 MSMQ 中排队，并在客户端联机时转发到它们的目的地。同样适用于服务器。

这将适合您的情况，因为据我所知，您实际上并不需要双向通信。调度中心发送工单，由客户端接收（在线时），客户端对其进行处理，然后将状态发送回服务器。

In any case, you should model your messages in such a way they contain only mandatory metadata, easy to send over the air.

An easy sample of WCF client sending over MSMQ is [here](http://msdn.microsoft.com/en-us/library/ms751490.aspx).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T19:25:03.500

Check out this design pattern for the publish/subscribe model.

[MSDN publish subscribe pattern](http://msdn.microsoft.com/en-us/library/ms752254.aspx)

# x86 - SSE指令需要数据对齐

> ID：11298230
> 
> 赞同：1
> 
> 时间：2012-07-02T17:18:59.737
> 
> 标签：x86, sse, simd

数据必须是 16 字节对齐的，以便 SSE 指令可以在没有分段错误的情况下对其进行处理？我尝试的编译器是带有选项的 gcc `-msse2`。我想`_mm_cmpgt_epi32`用来比较一个大的 int 数组。我发现它不能在数组的任何位置执行，除了下标为4的倍数的位置。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T17:35:57.353

是的，当您向/从 SSE 寄存器加载和存储数据时，它需要 16 字节对齐，*除非*您使用加载/存储指令的未对齐版本，例如`_mm_loadu_si128`/ `_mm_storeu_si128`。然而，使用这些未对齐的加载/存储指令通常会降低性能，因此通常会尝试始终确保正确的数据对齐，并且仅将未对齐的加载/存储用作最后的手段。

# scope - Liferay Scopes：Web 内容显示和页面显示

> ID：11298231
> 
> 赞同：1
> 
> 时间：2012-07-02T17:19:00.340
> 
> 标签：scope, liferay

我开始使用`Liferay CE 6.1 GA1`. 我有一个站点，在这个站点中有两个范围：`S1`和`S2`.

我面临两个问题：

1.  当尝试显示我`S1`通过控制面板添加的 Web 内容时，Web 内容显示 portlet 不显示任何内容。在portlet配置中选择范围时，我可以选择正确的Web内容`S1`，但是当我保存它时，它根本不会显示在页面上。控制台中不会抛出任何错误消息。

2.  当尝试为范围内的 Web 内容（在`S1`或中`S2`）保存显示页面时，这根本不起作用。再一次，没有错误消息被抛出，但页面显示设置根本没有保存。

这是正常的，一个错误，还是我做错了什么？

谢谢大家的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T14:15:49.333

1.  我刚刚在与您相同的 Liferay 版本中尝试过这个，它似乎对我有用。您确定您**批准**了网页内容吗？另外，您是否有足够的权限查看内容？
2.  这似乎是一个错误：http: [//issues.liferay.com/browse/LPS-28556](http://issues.liferay.com/browse/LPS-28556)

# windows-8 - 强制在地铁中显示键盘？

> ID：11298238
> 
> 赞同：2
> 
> 时间：2012-07-02T17:19:18.183
> 
> 标签：windows-8, microsoft-metro

我希望能够强制键盘在我的 Metro 应用程序的屏幕上显示。我的目标是测试不同的布局/控件并了解交互。我的问题是我在 MacBook Pro (Parallels) 上运行 Win8，我不知道如何覆盖物理键盘并将其显示在屏幕上。

同样，如果可能的话，我希望能够强制旋转。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T18:20:11.153

[您可以在Simulator](http://msdn.microsoft.com/en-us/library/windows/apps/hh441475%28v=vs.110%29.aspx)中运行您的应用程序。您可以将模拟器置于“触摸模式”，这会将鼠标点击解释为文本框等屏幕控件中的触摸事件，您也可以选择将模拟器旋转到配置文件中。

# c - 应用程序退出后信号量保持打开状态

> ID：11298242
> 
> 赞同：4
> 
> 时间：2012-07-02T17:19:51.053
> 
> 标签：c, linux, posix, semaphore

我有一个用 C 语言为 Linux 平台编写的第 3 方应用程序。该应用程序使用以下代码创建信号量：

```
union semun {
    int Value;
    struct semid_ds *Buffer;
    unsigned short * Array;
} Arg;

Arg.Value = 0;

SemId = semget(IPC_PRIVATE , ONE_SEMAPHORE, 0666 | IPC_CREAT);

semctl(SemId, 0, SETVAL, Arg); 
```

当应用程序退出时，应用程序使用以下代码删除这些信号量：

```
semctl(SemId, 0, IPC_RMID); 
```

如果应用程序异常停止（例如通过发送多个 SIGINT 信号），这些信号量将保持打开状态。可以使用以下命令打开这些信号量：

```
ipcs -s 
```

必须使用 ipcrm 命令手动从系统中删除这些信号量。

当应用程序最终退出时，如何确保删除应用程序创建的信号量？我已经读过 exit() 调用关闭了所有打开的命名信号量。然而，这些不是命名的信号量。

我提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T17:30:19.067

[[这在程序异常终止的情况下无济于事]](https://stackoverflow.com/questions/11298242/semaphores-remain-open-after-application-exits/11298378#comment14869228_11298378)

您可能希望使用 .注册应用程序定义的退出处理程序`atexit()`。

```
void myexit(void)
{
  semctl(SemId, 0, IPC_RMID);
}

...

int main()
{
  atexit(myexit); /* register exit handler */
  ... 
```

有关详细信息，`atexit()`请参阅`man atexit`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-12T07:20:21.577

为了处理异常终止，我们可以安装信号处理程序

```
/* signal handlers available in signal.h */
#include <signal.h>

void SignalHandler(int iSignalNum)
{
    switch(iSignalNum)
    {
    case SIGINT:
    case SIGSEGV:
    case SIGTSTP:
        {
           /* Add Stuffs if necessary */
           semctl(SemId, 0, IPC_RMID);
        }
     break;
     default:
        break;
    }
   exit(0); 
}        

int main()
{
        ....

        /* Register the signal handlers */
        signal(SIGINT,  SignalHandler);
        signal(SIGSEGV, SignalHandler);
        signal(SIGTSTP, SignalHandler);
        .....
} 
```

# c# - LinqToSql 查询而不是一些 SQL 查询

> ID：11298243
> 
> 赞同：0
> 
> 时间：2012-07-02T17:20:05.023
> 
> 标签：c#, linq-to-sql

```
SELECT * FROM register WHERE user_id LIKE 'a%'

SELECT * FROM register WHERE user_id LIKE '%m'

SELECT * FROM register WHERE user_id LIKE '%andru%'

SELECT R.name,C.country_name,S.state_name 
FROM register R JOIN country C ON R.country_id=C.country_id
JOIN state S  ON R.state_id=S.state_id

SELECT R.name,C.country_name,S.state_name 
FROM register R INNER JOIN country C ON R.country_id=C.country_id       
INNER JOIN state S ON R.state_id=S.state_id 
```

现在我需要**LinqToSql**查询而不是这些查询

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T17:25:03.903

```
var result = context.Registers.Select(x => x.StartsWith(foo)).ToList();

result = context.Registers.Select(x => x.EndsWith(foo)).ToList();

result = context.Registers.Select(x => x.Contains(foo)).ToList();

result = from register in context.Registers
         join state in context.States on register.state_id equals state.state_id
         select new { register.name, state.country_name, state.state_name } 
```

* * *

注意，`inner join`功能`join`相同`SQL`——因此无需复杂化。

# qt - qtableview 文本编辑

> ID：11298245
> 
> 赞同：3
> 
> 时间：2012-07-02T17:20:14.020
> 
> 标签：qt, pyqt, qtableview

我正在用 PyQt 编写一个程序。我使用 QTableView 来显示数据。
问题是当我触发单元格的编辑（例如按 F2）时，默认情况下单元格中的文本全部被选中（突出显示）。这不方便，因为我想修改文本而不是全部重写。
所以我想知道是否有任何功能可以改变行为？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T08:46:26.730

不确定是否有更简单的方法，但您可以编写自己的项目委托来创建 QLineEdit。使用模型数据更新编辑器时，您取消选择文本并可能将光标移动到开头。委托将是这样的（我现在没有可用的 Qt 安装，所以我无法测试它，但这个想法应该可行）：

```
QWidget * MyDelegate::createEditor(QWidget *parent,
        const QStyleOptionViewItem & option,
        const QModelIndex & index) const
{
    // Just creates a plain line edit.
    QLineEdit *editor = new QLineEdit(parent);
    return editor;
}

void MyDelegate::setEditorData(QWidget *editor,
        const QModelIndex &index) const
{
    // Fetch current data from model.
    QString value = index.model()->data(index, Qt::EditRole).toString();

    // Set line edit text to current data.
    QLineEdit * lineEdit = static_cast<QLineEdit*>(editor);
    lineEdit->setText(value);

    // Deselect text.
    lineEdit->deselect();

    // Move the cursor to the beginning.
    lineEdit->setCursorPosition(0);
}

void MyDelegate::setModelData(QWidget *editor,
        QAbstractItemModel *model,
        const QModelIndex &index) const
{
    // Set the model data with the text in line edit.
    QLineEdit * lineEdit = static_cast<QLineEdit*>(editor);
    QString value = lineEdit.text();
    model->setData(index, value, Qt::EditRole);
} 
```

如果您之前没有在 Qt 文档中使用过委托，那么这里有一个有用的[示例](http://qt-project.org/doc/qt-4.8/itemviews-spinboxdelegate.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T08:41:38.510

您需要实现一个委托，以便您可以覆盖用于编辑该字段的小部件以使用自定义编辑器小部件。

QTableView 默认使用 QTextEdit，您可以尝试对其进行子类化并更改其行为。我最好的猜测是您需要操纵编辑器小部件上的焦点策略，可能是 focusInEvent[1]，以更改它在接收焦点时的行为。

[1] [http://doc.qt.nokia.com/4.7/qwidget.html#focusInEvent](http://doc.qt.nokia.com/4.7/qwidget.html#focusInEvent)

# android - 此 XML 布局的替代方法是什么（Lint 警告）

> ID：11298247
> 
> 赞同：0
> 
> 时间：2012-07-02T17:20:23.453
> 
> 标签：android, xml, android-layout, android-lint

好的，这个布局将为您提供**3 个宽度相同的图像，该宽度**与 3 个文本视图上最长的文本一样宽。

它们的宽度相等，因为它们 match_parent 并且父级是 wrap_content 到最大的 TextView。

3 个文本视图以背景为中心，左右两边的空间相等。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#0000FF"
    android:gravity="center" >

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

      <TextView
         android:layout_width="match_parent"
         android:layout_height="wrap_content"
         android:background="#FF0000"
         android:drawableLeft="@drawable/ic_launcher"
         android:text="view 1"/>

      <TextView
         android:layout_width="match_parent"
         android:layout_height="wrap_content"
         android:background="#FF0000"
         android:drawableLeft="@drawable/ic_launcher"
         android:text="view 2"/>

      <TextView
         android:layout_width="match_parent"
         android:layout_height="wrap_content"
         android:background="#FF0000"
         android:drawableLeft="@drawable/ic_launcher" 
         android:text="view 3 longer text"/>

  </LinearLayout>
</LinearLayout> 
```

像这样：

![预览](../Images/09277f5daedd0961e616097489060186.png)

**问题是 Lint 警告说内部的 LinearLayout 是无用的。**（这不是因为它使内部文本视图变得完全相同的宽度。

![皮棉错误](../Images/09101f1d3db7a7c007982f8e3b2ed04b.png)

任何人都可以制作相同的布局但没有 lint 警告吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T17:49:10.383

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_gravity="center"
android:orientation="vertical">

  <TextView
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     android:text="view 1"/>

  <TextView
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     android:text="view 2"/>

  <TextView
     android:layout_width="wrap_content"
     android:layout_height="wrap_content" 
     android:text="view 3 longer text"/>
</LinearLayout> 
```

这给了我类似的结果，而 Lint 没有任何错误。我已经从代码中删除了可绘制标签，因为我没有你的可绘制对象使用。只需添加它们。这里唯一的问题是您不能在 LinearLayout 标签中放置背景。您必须为您的活动创建一个自定义主题，这很容易，因为您可以将现有主题设置为父主题，然后只需更改背景值...更多关于主题的信息[在这里](http://developer.android.com/guide/topics/ui/themes.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T17:27:49.077

经过深思熟虑......这是我的解决方案，即将外部线性布局更改为框架布局

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#0000FF" >

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical|center_horizontal"
        android:orientation="vertical" >

        <TextView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:background="#FF0000"
            android:drawableLeft="@drawable/ic_launcher"
            android:text="view 1" />

        <TextView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:background="#FF0000"
            android:drawableLeft="@drawable/ic_launcher"
            android:text="view 2" />

        <TextView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:background="#FF0000"
            android:drawableLeft="@drawable/ic_launcher"
            android:text="view 3 longer text" />
    </LinearLayout>

</FrameLayout> 
```

您可以将线性布局上的布局重力设置为：

`android:layout_gravity="center_vertical|center_horizontal"`

或在框架布局上设置常规重力。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T17:50:41.897

由于这只是一个警告，并且您知道布局并非无用，因此您可以忽略它。

`android:background="@null"`或者，您可以通过添加到内部 LinearLayout来欺骗 lint 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T17:59:28.910

您是否尝试过在线性布局中使用 RelativeLayout？

# c# - 在 C# 中压缩数组函数

> ID：11298249
> 
> 赞同：1
> 
> 时间：2012-07-02T17:20:43.207
> 
> 标签：c#

如何使用函数来压缩具有重复条目的数组？

例如！

一个函数，它将接受一个排序的整数数组并返回压缩后的数组。即给定一个数组包含：1,2,6,8,8,8,9,10,10，当函数返回时，数组的内容应该是：1,2,6,8,9,10 .

这不是硬件。我正在尝试制作一个可以做到这一点的功能。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T17:22:37.793

怎么样：

```
array = array.Distinct().ToArray(); 
```

或者，作为一个函数：

```
private int[] RemoveDuplicates(int[] array)
{
    return array.Distinct().ToArray();
} 
```

然后调用它：

```
array = RemoveDuplicates(array); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T18:36:22.940

扩展方法：

```
public static T[] RemoveDuplicates<T>(this T[] array)
{
    return array.Distinct().ToArray();
}

public static List<T> RemoveDuplicates<T>(this List<T> list)
{
    return list.Distinct().ToList();
} 
```

用于数组：

```
int[] array = new[] {1, 3, 4, 3};
array = array.RemoveDuplicates(); 
```

用于列表：

```
List<int> list = new List<int> {1, 3, 4, 3};
list = list.RemoveDuplicates(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T17:23:29.010

最直接的方法可能是使用 Linq

```
array = array.Distinct().ToArray() 
```

然而，Linq 并不总是最快的方法。

如果你不想使用 Linq，你可以做这样的事情（未经测试，但关闭）

```
List<int> compacted = new List<int>();

// If array is not a local variable:
// Assign to a variable to avoid re-evaluating the property every loop iteration
// Otherwise use array.Length as the loop termination condition to enable array
// bounds check elimination.  Thanks @Harold for the insight
// http://blogs.msdn.com/b/clrcodegeneration/archive/2009/08/13/array-bounds-check-elimination-in-the-clr.aspx

int max = array.Length; 

int last = 0;
for (int i=0; i < max; i++)
{
    if (i == 0)
    {
        compacted.Add(array[i]);
        last = array[i];
    }
    else
    {
        if (array[i] != last) compacted.Add(array[i]);
        last = array[i];
    }
}

array = compacted.ToArray(); 
```

# php - 用php交换数组值

> ID：11298251
> 
> 赞同：33
> 
> 时间：2012-07-02T17:20:57.723
> 
> 标签：php, arrays

我有一个数组：

```
array(
    0 => 'contact',
    1 => 'home',
    2 => 'projects'
); 
```

我需要将“联系人”与“家”交换，所以数组就像：

```
array(
    0 => 'home',
    1 => 'contact',
    2 => 'projects'
); 
```

我怎么能用 PHP 做到这一点？:)

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2014-04-03T13:19:19.777

我写了一个简单的函数：在位置&`array_swap`之间交换两个元素。`swap_a``swap_b`

```
function array_swap(&$array,$swap_a,$swap_b){
   list($array[$swap_a],$array[$swap_b]) = array($array[$swap_b],$array[$swap_a]);
} 
```

对于 OP 问题（例如）：

```
$items = array(
  0 => 'contact',
  1 => 'home',
  2 => 'projects'
);

array_swap($items,0,1);
var_dump($items);
// OUTPUT

array(3) {
   [0]=> string(4) "home"
   [1]=> string(7) "contact"
   [2]=> string(8) "projects"
 } 
```

**更新** 自 PHP 7.1 以来，可以这样做：

```
$items = [
  0 => 'contact',
  1 => 'home',
  2 => 'projects'
];

[$items[0], $items[1]] = [$items[1], $items[0]];

var_dump($items);
// OUTPUT

array(3) {
   [0]=> string(4) "home"
   [1]=> string(7) "contact"
   [2]=> string(8) "projects"
 } 
```

可以通过[Symmetric array destructuring](http://php.net/manual/en/migration71.new-features.php)来实现。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2012-07-02T17:28:02.843

试试这个：

```
$a = array(
    0 => 'contact',
    1 => 'home',
    2 => 'projects'
);
$temp = $a[0];
$a[0] = $a[1];
$a[1] = $temp; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-02T17:23:48.423

只需在交换另一个值时使用一个临时变量来保存一个值。然后用 temp 变量恢复第一个。对于数字，还有[其他方法](http://en.wikipedia.org/wiki/Swap_%28computer_science%29)不需要使用临时变量，但这是最好的（唯一？）方法。

```
$a = array(
    0 => 'contact',
    1 => 'home',
    2 => 'projects'
);

print_r($a);
Array ( [0] => contact [1] => home [2] => projects )

$tmp = $a[0];
$a[0] = $a[1];
$a[1] = $tmp;

print_r($a);
Array ( [0] => home [1] => contact [2] => projects ) 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-10-17T13:51:38.880

在 PHP 7.1+ 语法中，你可以使用这个

```
[$Array[$a], $Array[$b]] = [$Array[$b], $Array[$a]]; 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-02T17:25:42.067

只需使用一个临时变量来保存它。所以：

```
$temp = $array[0];
$array[0] = $array[1];
$array[1] = $temp; 
```

这样你就不会失去其中一个的价值。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-07-24T09:27:38.513

新答案：（正如其他人所表达的）

在发帖时我不知道对称数组解构，但这是一种无功能的单行交换技术——我会整天使用它。

相关的[博客文章/教程](https://stitcher.io/blog/array-destructuring-with-list-in-php)。冒泡排序的[示例实现](https://stackoverflow.com/a/60012548/2943403)。

代码：（[演示](https://3v4l.org/nDUpG)）

```
$a = ['contact', 'home', 'projects'];

[$a[0], $a[1]] = [$a[1], $a[0]];

var_export($a); 
```

* * *

老答案：

如果您想避免使用临时数据存储，或者喜欢单行使用`array_replace()`.

`array_replace()`将根据指数进行调整：

代码：（[演示](http://sandbox.onlinephpfunctions.com/code/a3e478946c05496d9541a97e6c1f475e5c15d2a1)）

```
$a = array(
    0 => 'contact',
    1 => 'home',
    2 => 'projects'
);

var_export(array_replace($a,[$a[1],$a[0]])); 
```

输出：

```
array (
  0 => 'home',
  1 => 'contact',
  2 => 'projects',
) 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-07-02T17:23:05.990

```
$array = array(
    0 => 'home',
    1 => 'contact',
    2 => 'projects'
);

$t = $array[0];
$array[0] = $array[1];
$array[1] = $t; 
```

将是一个足够简单的方法......</p>

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-06-21T08:44:58.033

我测试了建议的 4 种方法来比较性能：

```
$array=range(0,9999); //First 10000 natural numbers
$time=-microtime(true); //Start time
for($i=0;$i<1000000;++$i){ //1 Millon swaps
    $a=array_rand($array); //Random position: ~60ms
    $b=array_rand($array); //Random position: ~60ms
    //Using a temp variable: ~70ms
    $temp=$array[$a];$array[$a]=$array[$b];$array[$b]=$temp;
    //Using list language construct: ~ 140ms
    list($array[$a],$array[$b])=array($array[$b],$array[$a]);
    //Using PHP 7.1+ syntax: ~ 140ms
    [$array[$a],$array[$b]]=[$array[$b],$array[$a]];
    //Using array_replace function: ~ 28000ms
    array_replace($array,[$array[$a],$array[$b]]);
}
$time+=microtime(true); //Elapsed time
echo "Time: ",sprintf('%f', $time)," seconds"; 
```

Although it is probably not the most comfortable way, using a temporary variable seems to be **2x** faster than the next 2 methods, and **400x** faster than using the *array_replace* function.

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-12-27T08:09:31.320

```
$x = array('a', 'b', 'c', 'd');
array_splice($x, 1, 2, array_reverse(array_slice($x, 1, 2)));
var_dump($x); 
```

array_splice 可以替换一个反转的 array_slice

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-07-02T13:40:19.983

解决方案：

```
$a = array(
    0 => 'contact',
    1 => 'home',
    2 => 'projects'
); 
```

`list($a[0], $a[1]) = [$a[1], $a[0]];`

我已经为它做了功能

```
function swap(&$a, &$b){
    list($a, $b) = [$b, $a];
} 
```

用法：

`swap($a[0], $a[1]);`

# c# - 如何从具有属性“名称”字符串数组（名称对应于每个对象）的对象数组中获取？

> ID：11298255
> 
> 赞同：-3
> 
> 时间：2012-07-02T17:21:28.237
> 
> 标签：c#, .net-3.5

具有属性“名称”的对象数组如何获取字符串数组（名称对应于每个对象）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T17:28:51.400

假设您要从数组中的每个对象中选择特定属性。如果该属性被调用`Name`并且是 type `string`，那么您可以执行以下操作：

```
IEnumerable<string> names = namedObjects.Select(x => x.Name); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T17:28:40.020

```
ObjectWithNameString[] objects = ...?
string[] names = new string[objects.Length];

for (int i = 0; i < objects.Length; i++)
{
    names[i] = objects[i].Name;
} 
```

为了获得更好的答案，请扩展并澄清问题。

# normal-distribution - 为高斯马尔可夫随机场创建精度矩阵

> ID：11298258
> 
> 赞同：3
> 
> 时间：2012-06-30T14:26:18.820
> 
> 标签：normal-distribution

我目前正在尝试为高斯马尔可夫随机场创建一个精度矩阵。假设我在 6x6 的空间网格中有随机变量。然后我将有一个 36x36 的精度矩阵。

现在假设我有一个 3x3 的邻居，那么我的精度矩阵将是

```
Q= nnbs[1] -1      0        0    0     0    -1.......0
   -1      nnbs[2] -1       0    0     0     0 ......0
   0       -1      nnbs[3]  -1   0     0     0 ......0
   ...................................................
   ................................................... 
```

等等。谁能建议我如何编码这个精度矩阵。我的意思是如果我将窗口大小/邻域大小更改为 5x5，那么我将有一个新的精度矩阵。我该如何编码？其中 nnbs 是该元素的邻居数

```
rows=20;
columns=20;

%Random initialization
data=zeros(1000,3);
index=1;
value=-1;

%3x3 neighborhood
%For each element the neighbors are accessible within 1 hop so neighbors=1
neighbors=1;

for i=1:rows
    for j=1:columns

        for k=1:neighbors
            %same row right
            if j+k <= columns
                data(index,1) = (i-1)*columns+j;
                data(index,2) = ((i-1)*columns) + (j+k);
                data(index,3) = value;
                index=index+1;
            end

            %same row left
            if j-k >= 1;
                data(index,1) = (i-1)*columns+j;
                data(index,2) = ((i-1)*columns) + (j-k);
                data(index,3) = value;
                index=index+1;
            end
        end

        %row below -> bottom left right
        for k=i+1:i+neighbors
            if k <= rows
                %bottom
                data(index,1) = (i-1)*columns+j;
                data(index,2) = (k-1)*columns + j;
                data(index,3) = value;
                index=index+1;

                for l=1:neighbors
                    %right
                    if j+l <= columns
                        data(index,1) = (i-1)*columns+j;
                        data(index,2) = ((k-1)*columns) + (j+1);
                        data(index,3) = value;
                        index=index+1;
                    end

                    %left
                    if j-l >= 1;
                        data(index,1) = (i-1)*columns+j;
                        data(index,2) = ((k-1)*columns)+(j-1);
                        data(index,3) = value;
                        index=index+1;
                    end
                end

            end

        end

        %row above top left right
        for k=i-1:i-neighbors
            if k >= 1
                %top
                data(index,1) = (i-1)*columns+j;
                data(index,2) = ((k-1)*columns) +j;
                data(index,3) = value;
                index=index+1;

                for l=1:neighbors
                    %right
                    if j+l <= columns
                        data(index,1) = (i-1)*columns+j;
                        data(index,2) = ((k-1)*columns) + (j+1);
                        data(index,3) = value;
                        index=index+1;
                    end

                    %left
                    if j-k >= 1;
                        data(index,1) = (i-1)*columns+j;
                        data(index,2) = ((k-1)*columns) + (j-1);
                        data(index,3) = value;
                        index=index+1;
                    end
                end
            end
        end  
    end
end

%Get the values for the diagonal elements(which is equal to the number of
%neighbors or absolute sum of the nondiagonal elements of the corresponding
%row)

diagonal_values = zeros(rows*columns,3);
for i=1:rows*columns
    pointer=find(data(:,1) == i);
    diag_value=abs(sum(data(pointer,3)));
    diagonal_values(i,1) = i;
    diagonal_values(i,2) = i;
    diagonal_values(i,3) = diag_value;
end

data(index:index+rows*columns-1,:)=diagonal_values(:,:);

Q = sparse(data(:,1), data(:,2), data(:,3), rows*columns, rows*columns); 
```

我尝试过这样的事情，但我认为这不是最有效的方法。我认为应该有更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-27T14:46:56.743

A bit too late but it may be useful for someone else : Your precision matrix is a linear combination of kronecker product of symmetric Toeplitz matrix : to each neighbour type corresponds a kronecker product of 2 Toeplitz matrix. [More info about toeplitz Matrix](http://en.wikipedia.org/wiki/Toeplitz_matrix)

Example : you want a precision matrix only with the horizontal link for each pixel

Writing `I_n` the identity matrix of size `n` and `H_{n,p}` the Symmetric Toeplitz matrix of dimension `[n n]` filled with 0 everywhere excepts on the p-th diagonals

> H_{4,2} =
> 
> ```
>  0  1  0  0
>       1  0  1  0
>       0  1  0  1
>       0  0  1  0 
> ```

In Matlab :

> H_nonSym_n_p = toeplitz(zeros(n,1), [[zeros(1,p-1) 1] zeros(1,n-p)]) ;
> 
> H_sym_n_p = H_nonSym + H_nonSym' ;

Then, if you have a `[n m]` image and if you want to code the horizontal neighbour of every pixel, you can express it through the kronecker product (hope the LaTeX-like code will work): Q = - I_n \otimes \H_{n,2}. And finally, to get your nnbs : something like `Q = Q - diag(sum(Q,2))`...

Now, if you want other links, for instance 2 horizontal and 2 vertical links : Q = - I_n \otimes \H_{n,2} - I_n \otimes \H_{n,3} - \H_{n,2} \otimes I_{n} - \H_{n,3} \otimes I_{n}. and again `Q = Q - diag(sum(Q,2))`

Note that the diagonal neighbours are a bit more difficult to produce but it is still represented by a kronecker product of toeplitz matrix (maybe non-symmetric this time).

# java - 使用 Java 解析 javascript 生成的内容

> ID：11298260
> 
> 赞同：1
> 
> 时间：2012-07-02T17:21:46.027
> 
> 标签：java, javascript, parsing

[http://support.xbox.com/en-us/contact-us](http://support.xbox.com/en-us/contact-us)使用 javascript 创建一些列表。我希望能够解析这些列表的文本。所以对于上面的页面，我想返回以下内容：

```
Billing and Subscriptions
Xbox 360
Xbox LIVE
Kinect
Apps
Games 
```

在注意到它是使用 javascript 生成之前，我尝试使用 JSoup 一段时间。我不知道如何解析页面以获取其 javascript 生成的内容。

我从哪里开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T17:24:57.520

您始终可以导入整个页面，然后在页面上执行字符串分隔符（使用 return 等）并查找包含信息的字符串，然后返回您想要的字符串并从该字符串中提取部分。那是肮脏的做法，不确定是否有干净的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T17:26:40.497

您需要使用像[Cobra](http://lobobrowser.org/cobra/java-html-parser.jsp)这样的 HTML+JavaScript 库。它将解析 HTML 中的 DOM 元素并应用由 JavaScript 引起的任何 DOM 更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T17:32:56.387

我不认为文本是由 javascript 生成的......如果我禁用 javascript，可以在这个位置的 html 中找到这些选项（一个 jquery 选择器，因为它比在没有启用 javascript 的情况下弄清楚 xpath 更容易手写:))

```
'div#ShellNavigationBar ul.NavigationElements li ul li a' 
```

无论直接回答您的查询，您都必须在文档范围内评估 javascript，我预计这在 Java 中会相当复杂。您会更幸运地识别生成相关内容并直接解析它的 javascript 文件。

# c# - ajax成功时数据未显示在表单上

> ID：11298261
> 
> 赞同：0
> 
> 时间：2012-07-02T17:21:46.910
> 
> 标签：c#, asp.net-mvc, jquery

我正在尝试一项简单的任务，即根据输入的 StudentId 在文本框中显示学生姓名。我能够将学生姓名显示为来自 jQuery - AJAX 调用的警报，但不在文本框中，我在这里缺少什么？

控制器：

```
 [AcceptVerbs(HttpVerbs.Get | HttpVerbs.Post)]
    public ActionResult DisplayStudentName(string id)
    {
        StudentDataContext db = new StudentDataContext();
        var StudentName = (from p in db.vwStudents.Where(a => a.StudentNumber == id)
                         group p by p.StudentName into g
                         select g.Key).FirstOrDefault();

        return Json(new { Name = StudentName }); 

    } 
```

jQuery：

```
$(function () {
    $('#submitButton').click(function () {
        var link = '/StudentForm/DisplayStudentName';        
        $.ajax({
            type: 'POST',
            url: link,
            data: { id: $('#id').val() },
            dataType: 'json',
            success: function (result) {
                $("#StudentName").val(result.Name);
                alert(result.Name);
            },
            error: function (result) {
                alert("Failed")
            }
        });
    });
}); 
```

看法：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<dynamic>" %>

<asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">
    Student Form
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
<div id="Data" style="text-align: left; height: 202px;">
Student Number:<input type="text" name="id" id="id"/><br />                
Student Name:<input type="text" name="StudentName" id="StudentName"/><br />              
<br />
 <div id="Div1">
  <button id="submitButton" name="submitButton" style="width:140px;">Display Short Name</button>
 </div>
</div>

</asp:Content> 
```

同样，我可以在警报窗口中显示学生姓名，但不能在文本框中显示，我错过了什么吗？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T17:25:56.277

您需要**防止**提交按钮的默认行为。您可以使用 jQuery [preventDefault](http://api.jquery.com/event.preventDefault/)函数来执行此操作，

```
$(function () {
    $('#submitButton').click(function (e) {
        e.preventDefault();    //prevent default behaviour
        var link = '/StudentForm/DisplayStudentName';        
        $.ajax({
            type: 'POST',
            url: link,
            data: { id: $('#id').val() },
            dataType: 'json',
            success: function (result) {                  
                $("#StudentName").val(result.Name);
            },
            error: function (result) {
                alert("Failed")
            }
        });
    });
}) 
```

调用方法时`preventDefault`，不会触发事件的默认动作。所以在这种情况下，表单提交不会发生（所以页面不会被重新加载）。

# shell - 在单个文件遍历中提取特定字段

> ID：11298262
> 
> 赞同：0
> 
> 时间：2012-07-02T17:21:47.770
> 
> 标签：shell, awk

我有一个要求。我正在编写 awk 脚本，我的输入文件是

`TIME FIELD : SOME FIELDS SOME FIELDS Some fields Some fields RID ..`

RID 的出现是随机的，它从一条记录到另一条记录有所不同，因此问题是我将无法使用 NR 和 $1 概念，因为不能保证 RID 会在此特定行中发生

我需要同时提取时间字段和 RID。我可以在两个文件遍历中做到这一点，但任何想法如何使用 awk 在单个文件遍历中做到这一点。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T19:10:56.923

在 AWK 中执行此操作（假设时间字段中没有任何空格或冒号）：

```
awk -F '[: ]' '{for (i = 2; i <= NF; i++) {if ($i ~ /^RID/) {rid = $i}}; print $1, rid}' inputfile 
```

仅使用没有显式循环的正则表达式：

```
awk -F ':|RID=' '{split($3, a, " "); print $1, "RID=" a[1]}' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T17:44:32.463

像这样的东西可以工作：

```
sed 's,^\([^:]*\):.*\(RID=[[:alnum:]]*\).*$,\1 : \2,' 
```

它要求 TIME FIELD 不包含任何冒号，所以如果是这种情况，请指定一个具体示例。

我正在玩这个输入：

```
$ echo 'TIME FIELD : SOME RID=62 FIELDS SOME FIELDS Some fields Some fields
TIME FIELD : SOME FIELDS SOME FIELDS Some fields Some fields RID=012
TIME FIELD : SOME FIELDS RID=5672 SOME FIELDS Some fields Some fields
TIME FIELD : SOME RID=62 FIELDS SOME FIELDS Some fields Some fields' | 
    sed 's,^\([^:]*\):.*\(RID=[[:alnum:]]*\).*$,\1 : \2,'
TIME FIELD  : RID=62
TIME FIELD  : RID=012
TIME FIELD  : RID=5672
TIME FIELD  : RID=62 
```

# objective-c - 在objective-c iPhone中的图像上写入文本，模拟器的字体大小与iPhone本身不同

> ID：11298266
> 
> 赞同：0
> 
> 时间：2012-07-02T17:22:15.407
> 
> 标签：objective-c, ios, ios5, uiimage, retina-display

我遇到了一些非常奇怪的事情，我正在为图像添加标题，并且在模拟器上一切正常，但在设备本身上，字体真的很小......

使用此代码时遇到问题：

```
-(UIImage*) drawTextOnPic:(NSString*) bottomText
         inImage:(UIImage*)  image
{

UIFont *font = [UIFont boldSystemFontOfSize:48];
UIGraphicsBeginImageContext(image.size);
[image drawInRect:CGRectMake(0,0,image.size.width,image.size.height)];

CGRect = CGRectMake(10.0f,10.0f,image.size.width-20.0f, image.size.height);

CGContextRef context = UIGraphicsGetCurrentContext();
CGContextSetShadow(context, CGSizeMake(2.5f, 2.5f), 5.0f);

[[UIColor whiteColor] set];
[bottomText drawInRect:CGRectIntegral(rect) withFont:font lineBreakMode:UILineBreakModeClip alignment:UITextAlignmentCenter];
UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

return newImage;
} 
```

有人知道为什么它只适用于我所期望的模拟器吗？顺便说一句，我正在使用适用于 iOS6 的 SDK，它可以在那里吗？与视网膜显示器有关吗？如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T17:46:28.153

当您调用 时`UIGraphicsBeginImageContext`，您应该使用扩展调用来传递屏幕比例，如下所示：

```
UIGraphicsBeginImageContextWithOptions(image.size, YES, [[UIScreen mainScreen] scale]); 
```

这将在您的屏幕范围内创建图像上下文。请注意，此处的第二个参数`YES`是您是否需要图像不透明。如果您的图像中有透明度，请将其设置为`NO`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T21:26:23.347

我选择默认字体大小（在我的情况下是 48），然后根据一些参考尺寸（在我的情况下为 640x480）检查图像大小，我通过 sqrtf(area(a)/area(ref)) 做到这一点，然后乘以这个字体大小的结果。这是它对我有用的唯一方法。

希望对其他人有所帮助...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-30T13:15:58.157

```
//  Drawing text on image
+ (UIImage*) drawText:(NSString*)text withColor:(UIColor *) textColor inImage:(UIImage*)image atPoint:(CGPoint)point {

    UIFont *font = [UIFont boldSystemFontOfSize:12];
    UIGraphicsBeginImageContext(image.size);
    [image drawInRect:CGRectMake(0,0,image.size.width,image.size.height)];
    CGRect rect = CGRectMake(point.x, point.y, image.size.width, image.size.height);
    [textColor set];
    [text drawInRect:CGRectIntegral(rect) withFont:font];
    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return newImage;
} 
```

# c# - 带有 COM 扩展的 Visual Studio 11 Windows 8 Metro 应用程序

> ID：11298273
> 
> 赞同：0
> 
> 时间：2012-07-02T17:22:40.710
> 
> 标签：c#, com, microsoft-metro, visual-studio-2012

我遇到了很烦人的问题，这不能通过谷歌搜索来解决:((

我有一个 Windows Metro App，它必须使用第三方 COM 对象来检查来自远程服务器的答案，但我不能直接在 Metro App 中添加对它的引用。

我想我需要构建某种 Windows 服务，也许是 WCF 服务库（我可以从中添加这个 COM 对象），但我不知道如何将此服务与我的 Metro App 连接起来。MSDN 的文档太累人了，以至于我迷失在这么多深奥的词中……我的上帝！

我想在不使用 IIS 或类似的东西的情况下构建这个应用程序..

只是光秃秃的 Windows 8 和我安装的应用程序 - 它当然必须工作 :)

提前谢谢大家。

祝你今天过得愉快！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T13:15:12.947

是的，你们没事，伙计们。谢谢大家！

我需要做的就是创建一个 WCF 库并将其引用到我的 COM 对象（但要非常确定您的 COM 不是 32 位的，否则您需要修补您的 WCFServiceTest 应用程序）。

然后，您只需将您的应用程序和服务与数据/操作合同进行对话，仅此而已。

简直是天才。

# android - ICS 出现奇怪的 JVM 错误

> ID：11298274
> 
> 赞同：0
> 
> 时间：2012-07-02T17:22:40.717
> 
> 标签：android, java-native-interface, native, android-ndk

我给出了一个奇怪的代码问题。任务很简单，我从本地代码调用一个java函数，它从prefs中获取一个参数，然后返回c++，该方法没有参数并返回一个字符串。

更奇怪的是，它在第​​一次运行时运行良好，但第二次我从 java 调用整个本机过程时，当 c++ 例程尝试联系它崩溃的 java 方法时。这告诉我这是内存损坏，但我不知道为什么会发生。

好的。因此，在 lib 的 onLoad 方法中，我对 javaVM 进行了引用，如下所示：

```
JNIEnv *env;
LOGI("JNI_OnLoad called");
if (vm->GetEnv((void**) &env, JNI_VERSION_1_4) != JNI_OK) {
    LOGE("Failed to get the environment using GetEnv()");
    return -1;
}
MY_NAMESPACE::VMHandler::getInstance()->init(env); 
```

Init 实际上只是将指针保存在正在运行的实例中，并且在以后的运行中不会给我带来任何问题，因为我多次调用它。

接下来，我调用 java 方法 getTime()

```
LOGE("get TIME called");

//getting a pointer to the VM
JNIEnv * env = VMHandler::getInstance()->getJava();
LOGE("1");
if (env==NULL) {
    LOGE("1.0");
}else{
    LOGE("1.0 OK");
}

if (dao==NULL) {
    LOGE("1.1");
}else{
    LOGE("1.1 OK");

}
if (jgetTime==NULL) {
    LOGE("1.2");
}else{
    LOGE("1.2 OK");

}

jstring time = (jstring) env->CallObjectMethod(dao,jgetTime);
LOGE("2"); 
```

有趣的是，我从第一次运行中得到以下日志：

```
E/app-cpp(7121): 1
E/app-cpp(7121): 1.0 OK
E/app-cpp(7121): 1.1 OK
E/app-cpp(7121): 1.2 OK
E/Settings(7121): Java received : getTime()
E/Settings(7121): Java returning : 1341250295 
```

然后第二次运行...

```
E/app-cpp(1941): get TIME called
E/app-cpp(1941): 1
E/app-cpp(1941): 1.0 OK
E/app-cpp(1941): 1.1 OK
E/app-cpp(1941): 1.2 OK
A/libc(1941): Fatal signal 11 (SIGSEGV) at 0x0000008d (code=1) 
```

完整的转储是：

```
07-02 17:08:20.948: E/my-cpp(1941): 1
07-02 17:08:20.958: E/my-cpp(1941): 1.0 OK
07-02 17:08:20.958: E/my-cpp(1941): 1.1 OK
07-02 17:08:20.958: E/my-cpp(1941): 1.2 OK
07-02 17:08:20.958: A/libc(1941): Fatal signal 11 (SIGSEGV) at 0x0000008d (code=1)
07-02 17:08:20.967: D/debug(1941): LoaderCalled!
07-02 17:08:21.298: D/dalvikvm(78): GC_CONCURRENT freed 296K, 13% free 11332K/12935K, paused 4ms+28ms
07-02 17:08:21.407: I/Process(78): Sending signal. PID: 1941 SIG: 3
07-02 17:08:21.407: I/dalvikvm(1941): threadid=3: reacting to signal 3
07-02 17:08:21.417: I/dalvikvm(1941): Wrote stack traces to '/data/anr/traces.txt'
07-02 17:08:21.477: D/debug(1941): mSwitcher:android.widget.TextSwitcher@41495318
07-02 17:08:21.487: I/DEBUG(3844): *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
07-02 17:08:21.487: I/DEBUG(3844): Build fingerprint: 'generic/sdk/generic:4.0.4/MR1/302030:eng/test-keys'
07-02 17:08:21.487: I/DEBUG(3844): pid: 1941, tid: 2162  >>> com.myapp <<<
07-02 17:08:21.487: I/DEBUG(3844): signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 0000008d
07-02 17:08:21.487: I/DEBUG(3844):  r0 00238040  r1 1d200222  r2 00000001  r3 0000008c
07-02 17:08:21.487: I/DEBUG(3844):  r4 4a5db590  r5 004ea2e8  r6 4a5db590  r7 49cc1bc4
07-02 17:08:21.487: I/DEBUG(3844):  r8 49cc1bc4  r9 49ab4f64  10 495f752c  fp 49cc1bdc
07-02 17:08:21.487: I/DEBUG(3844):  ip 40003108  sp 49cc17b8  lr 4a02a79b  pc 4a029fb0  cpsr 00000030
07-02 17:08:21.487: I/DEBUG(3844):  d0  42c8000042b6aa73  d1  3ff0000000b23680
07-02 17:08:21.487: I/DEBUG(3844):  d2  3ff0000000000000  d3  4197d78400000000
07-02 17:08:21.487: I/DEBUG(3844):  d4  3ff0000000000000  d5  4028000000000000
07-02 17:08:21.487: I/DEBUG(3844):  d6  00c31fe000000000  d7  0000005b4e8b3a94
07-02 17:08:21.487: I/DEBUG(3844):  d8  3f8000003f800000  d9  43d2000000000000
07-02 17:08:21.487: I/DEBUG(3844):  d10 000000004479f062  d11 0000000000000000
07-02 17:08:21.487: I/DEBUG(3844):  d12 0000000000000000  d13 0000000000000000
07-02 17:08:21.487: I/DEBUG(3844):  d14 0000000000000000  d15 0000000000000000
07-02 17:08:21.487: I/DEBUG(3844):  scr 20000012
07-02 17:08:21.717: I/ActivityManager(78): Displayed com.myapp/.ui.activities.Loader: +831ms
07-02 17:08:22.437: I/DEBUG(3844):          #00  pc 00367fb0  /data/data/com.myapp/lib/libwrapper.so (_ZN7_JNIEnv16CallObjectMethodEP8_jobjectP10_jmethodIDz)
07-02 17:08:22.437: I/DEBUG(3844):          #01  lr 4a02a79b  /data/data/com.myapp/lib/libwrapper.so
07-02 17:08:22.437: I/DEBUG(3844): code around pc:
07-02 17:08:22.437: I/DEBUG(3844): 4a029f90 1c0347a0 b0041c18 46c0bd10 b510b40c  .G.........F....
07-02 17:08:22.437: I/DEBUG(3844): 4a029fa0 9001b084 ab079100 9b019302 238c681a  .............h.#
07-02 17:08:22.437: I/DEBUG(3844): 4a029fb0 980158d4 9a069900 47a09b02 93031c03  .X.........G....
07-02 17:08:22.437: I/DEBUG(3844): 4a029fc0 1c189b03 bc10b004 b002bc08 46c04718  .............G.F
07-02 17:08:22.437: I/DEBUG(3844): 4a029fd0 b510b40c 9001b084 ab079100 9b019302  ................
07-02 17:08:22.437: I/DEBUG(3844): code around lr:
07-02 17:08:22.437: I/DEBUG(3844): 4a02a778 1c112006 f3e91c1a 4b40fbe7 681a58e3  . ........@K.X.h
07-02 17:08:22.437: I/DEBUG(3844): 4a02a788 58e34b43 9904681b 1c111c08 f7ff1c1a  CK.X.h..........
07-02 17:08:22.437: I/DEBUG(3844): 4a02a798 1c03fc01 4b439305 1c1a447b 447b4b42  ......CK{D..BK{D
07-02 17:08:22.437: I/DEBUG(3844): 4a02a7a8 1c112006 f3e91c1a 9a04fbcf 1c109b05  . ..............
07-02 17:08:22.437: I/DEBUG(3844): 4a02a7b8 22001c19 fbaaf7f5 93061c03 447b4b3b  ..."........;K{D
07-02 17:08:22.437: I/DEBUG(3844): stack:
07-02 17:08:22.437: I/DEBUG(3844):     49cc1778  00000000  
07-02 17:08:22.437: I/DEBUG(3844):     49cc177c  0038d96c  [heap]
07-02 17:08:22.437: I/DEBUG(3844):     49cc1780  0023c108  [heap]
07-02 17:08:22.437: I/DEBUG(3844):     49cc1784  49cc1884  
07-02 17:08:22.437: I/DEBUG(3844):     49cc1788  4a5d28d0  /data/data/com.myapp/lib/libwrapper.so
07-02 17:08:22.437: I/DEBUG(3844):     49cc178c  001a1f20  [heap]
07-02 17:08:22.437: I/DEBUG(3844):     49cc1790  001a1f28  [heap]
07-02 17:08:22.457: I/DEBUG(3844):     49cc1794  001a1f28  [heap]
07-02 17:08:22.457: I/DEBUG(3844):     49cc1798  001c7580  [heap]
07-02 17:08:22.457: I/DEBUG(3844):     49cc179c  001c7588  [heap]
07-02 17:08:22.457: I/DEBUG(3844):     49cc17a0  001c7588  [heap]
07-02 17:08:22.457: I/DEBUG(3844):     49cc17a4  00483ccc  [heap]
07-02 17:08:22.457: I/DEBUG(3844):     49cc17a8  0023c540  [heap]
07-02 17:08:22.457: I/DEBUG(3844):     49cc17ac  4004c4b0  
07-02 17:08:22.457: I/DEBUG(3844):     49cc17b0  df0027ad  
07-02 17:08:22.457: I/DEBUG(3844):     49cc17b4  00000000  
07-02 17:08:22.457: I/DEBUG(3844): #00 49cc17b8  1d200222  
07-02 17:08:22.457: I/DEBUG(3844):     49cc17bc  00238040  [heap]
07-02 17:08:22.457: I/DEBUG(3844):     49cc17c0  49cc17d4  
07-02 17:08:22.457: I/DEBUG(3844):     49cc17c4  4a5db590  /data/data/com.myapp/lib/libwrapper.so
07-02 17:08:22.457: I/DEBUG(3844):     49cc17c8  4a5db590  /data/data/com.myapp/lib/libwrapper.so
07-02 17:08:22.457: I/DEBUG(3844):     49cc17cc  4a02a79b  /data/data/com.myapp/lib/libwrapper.so
07-02 17:08:22.457: I/DEBUG(3844):     49cc17d0  44e313c0  /dev/ashmem/dalvik-LinearAlloc (deleted)
07-02 17:08:22.467: I/DEBUG(3844):     49cc17d4  44e313c0  /dev/ashmem/dalvik-LinearAlloc (deleted)
07-02 17:08:22.467: I/DEBUG(3844):     49cc17d8  49cc1bc4  
07-02 17:08:22.467: I/DEBUG(3844):     49cc17dc  0023c710  [heap]
07-02 17:08:22.467: I/DEBUG(3844):     49cc17e0  495f752c  /data/dalvik-cache/data@app@com.myapp-1.apk@classes.dex
07-02 17:08:22.467: I/DEBUG(3844):     49cc17e4  0023c108  [heap]
07-02 17:08:22.467: I/DEBUG(3844):     49cc17e8  00238040  [heap]
07-02 17:08:22.467: I/DEBUG(3844):     49cc17ec  4a5db590  /data/data/com.myapp/lib/libwrapper.so
07-02 17:08:22.467: I/DEBUG(3844):     49cc17f0  49cc1bc4  
07-02 17:08:22.467: I/DEBUG(3844):     49cc17f4  0023c108  [heap]
07-02 17:08:22.467: I/DEBUG(3844):     49cc17f8  0023c108  [heap]
07-02 17:08:22.467: I/DEBUG(3844):     49cc17fc  4a3c579f  /data/data/com.myapp/lib/libwrapper.so
07-02 17:08:27.908: I/BootReceiver(78): Copying /data/tombstones/tombstone_07 to DropBox (SYSTEM_TOMBSTONE) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T18:39:32.333

所以，问题在于：！！我在 onload 方法中缓存了 javaVM 提供的 JNIEnv 指针。！！

并且这个指针在每个线程上都无效（当我在网络上运行它时，并不完全清楚这意味着什么。）

但是当我在调用该方法之前尝试获取指针时出错时，我开始思考。所以我在每个函数调用上重新缓存 JNIEnv 并重新引用所有方法和类。本质上只是重新调用我的

`MY_NAMESPACE::VMHandler::getInstance()->init(env);`

方法成功了...

关于引用的一个有趣的事情是：

> local 只能在最初交给它的线程中使用，并且在显式调用 DeleteLocalRef() 或更常见的情况下，直到您从本机方法返回之前都是有效的。当本地方法返回时，所有本地引用都会被自动删除。

发现： [这里](http://android-developers.blogspot.fr/2011/11/jni-local-reference-changes-in-ics.html)

但我想在我的情况下 JNIenv 指针无效......

# asp.net-mvc - jQueryMobile Datebox/ASP.NET MVC data-ajax=false 脚本不工作

> ID：11298280
> 
> 赞同：2
> 
> 时间：2012-07-02T17:22:54.743
> 
> 标签：asp.net-mvc, jquery, jquery-mobile, razor, datebox

我有一个小问题：我有一个编辑视图，里面有这个时间选择器

```
<label for="mytimeedit">Time</label>
    <input name="Time" id="mytimeedit" type="text" data-role="datebox" data-options='{"mode": "timebox", "overrideTimeFormat": 24}'>
    @Html.ValidationMessageFor(model => model.Time) 
```

然后（在同一视图中）我有这个脚本来用逗号（“，”）替换在早期描述的文本输入中插入的每个“：”字符：

```
<script type="text/javascript">
$("#mytimeedit").change(function () {
    var val = $("#mytimeedit").val();
    $("#mytimeedit").val(val.replace(':', ','));
});
</script> 
```

一切正常，直到我不得不在调用编辑控制器的链接中插入一个**data-ajax=false**属性（为了我的网站的一致性，我无法删除它）：这样替换就不再起作用了。

我的问题是：有没有办法“翻译”/重写我的脚本以避免 Ajax，它现在被禁用了？

希望得到您的帮助，谢谢！

# php - PayPal API createInvoice 总是返回 errorId 580001

> ID：11298286
> 
> 赞同：0
> 
> 时间：2012-07-02T17:23:11.903
> 
> 标签：php, paypal

调用 PayPal CreateInvoice API 的代码。它总是失败说“无效请求”并得到errorId 580001。我浏览了几次填充请求和API文档的代码。不知道 Request 中的哪些数据是错误的。请求中可能有什么问题？我在这里错过了什么吗？

```
function getInvoiceAPIHeader()
     {
         global $API_Username, $API_Password, $Signature;

         $API_Username = $this->config['username'];
         $API_Password = $this->config['password'];
         $Signature = $this->config['signature'];

         $headers[0] = "Content-Type: text/namevalue";               // either text/namevalue or text/xml
         $headers[1] = "X-PAYPAL-SECURITY-USERID: $API_Username";    //API user
         $headers[2] = "X-PAYPAL-SECURITY-PASSWORD: $API_Password";  //API PWD
         $headers[3] = "X-PAYPAL-SECURITY-SIGNATURE: $Signature";    //API Sig
         $headers[4] = "X-PAYPAL-APPLICATION-ID: {$this->APPLICATION_ID}";   //APP ID        
         $headers[6] = "X-PAYPAL-REQUEST-DATA-FORMAT: ".self::REQUEST_DATA_FORMAT."";   //Set Name Value Request Format
         $headers[7] = "X-PAYPAL-RESPONSE-DATA-FORMAT: ".self::RESPONSE_DATA_FORMAT.""; //Set Name Value Response Format     

         Debugger::dump($headers);
         return $headers;
     }

function curlRequest($str_req)
 {      
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $this->end_url);
    curl_setopt($ch, CURLOPT_VERBOSE, 1);
    curl_setopt($ch, CURLOPT_TIMEOUT, 30);
    curl_setopt($ch, CURLOPT_HTTPHEADER, $this->getInvoiceAPIHeader());     

    curl_setopt($ch, CURLOPT_HEADER, 1); // tells curl to include headers in response, use for testing   
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, FALSE);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_POST, TRUE);

    // setting the NVP $my_api_str as POST FIELD to curl
    $log_req = $aryRresponse = explode("&", $str_req);
    var_dump($log_req);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $str_req);

    // getting response from server
    $httpResponse = curl_exec($ch);
    //var_dump($httpResponse);

    if(!$httpResponse)
    {
        Debugger::dump("no response");
        $response = "{$this->end_url} failed: ".curl_error($ch)."(".curl_errno($ch).")";
        return $response;
    }

    $aryRresponse = explode("&", $httpResponse);
    var_dump($aryRresponse);
    return $httpResponse;
 } 
```

请求转储：

```
array(
    (int) 0 => 'Content-Type: text/namevalue',
    (int) 1 => 'X-PAYPAL-SECURITY-USERID: stest_1339339519_biz_api1.paypal.com',
    (int) 2 => 'X-PAYPAL-SECURITY-PASSWORD: 1339339539',
    (int) 3 => 'X-PAYPAL-SECURITY-SIGNATURE: A2I9zTt-d7IIbjVBlzNeLjVm9UJxAPoaKvgzcIz6c6G1-sLSKn5jcI3b',
    (int) 4 => 'X-PAYPAL-APPLICATION-ID: APP-80W284485P519543T',
    (int) 6 => 'X-PAYPAL-REQUEST-DATA-FORMAT: NV',
    (int) 7 => 'X-PAYPAL-RESPONSE-DATA-FORMAT: NV'
)

array
  0 => string 'invoice.merchantEmail=stest_1339339519_biz%40paypal.com' (length=55)
  1 => string 'invoice.payerEmail=stest_1340973819_per%40paypal.com' (length=52)
  2 => string 'invoice.currencyCode=USD' (length=24)
  3 => string 'invoice.number=PP-99' (length=20)
  4 => string 'invoice.paymentTerms=Net10' (length=26)
  5 => string 'invoice.itemList.item%281%29.name=Coke' (length=38)
  6 => string 'invoice.itemList.item%281%29.description=From+CocaCola' (length=54)
  7 => string 'invoice.itemList.item%281%29.quantity=2' (length=39)
  8 => string 'invoice.itemList.item%281%29.unitPrice=01.65' (length=44)
  9 => string 'invoice.itemList.item%281%29.taxName=Tax1' (length=41)
  10 => string 'invoice.itemList.item%281%29.taxRate=7' (length=38) 
```

响应转储：

```
 array
      0 => string 'HTTP/1.1 200 OK
    Date: Mon, 02 Jul 2012 17:06:05 GMT
    Server: Apache-Coyote/1.1
    CACHE-CONTROL: no-cache
    X-PAYPAL-MESSAGE-PROTOCOL: NONE
    X-PAYPAL-RESPONSE-DATA-FORMAT: NV
    X-EBAY-SOA-REQUEST-ID: 13848a7f-b860-a486-d656-c516ffffc6d8!Invoice!10.72.109.101![]
    X-PAYPAL-OPERATION-NAME: CreateInvoice
    X-PAYPAL-SERVICE-NAME: {http://svcs.paypal.com/types/pt}Invoice
    X-PAYPAL-SERVICE-VERSION: 1.0.0
    X-PAYPAL-ERROR-RESPONSE: TRUE
    Content-Type: text/plain;charset=UTF-8
    Set-Cookie: Apache=10.72.109.11.13412487648'... (length=679)
      1 => string 'responseEnvelope.ack=Failure' (length=28)
      2 => string 'responseEnvelope.correlationId=4cab848d7c2a0' (length=44)
      3 => string 'responseEnvelope.build=2910623' (length=30)
      4 => string 'error(0).errorId=580001' (length=23)
      5 => string 'error(0).domain=PLATFORM' (length=24)
      6 => string 'error(0).subdomain=Application' (length=30)
      7 => string 'error(0).severity=Error' (length=23)
      8 => string 'error(0).category=Application' (length=29)
      9 => string 'error(0).message=Invalid+request%3A+%7B0%7D' (length=43) 
```

请求中可能有什么问题？任何指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:41:48.783

我遇到类似错误的最常见原因是：

未设置`X-PAYPAL-MESSAGE-PROTOCOL`（一次性机会）、设置商家电子邮件/ID 和低交易额。

是否注意到您`X-PAYPAL-MESSAGE-PROTOCOL`的设置为`FALSE`（可能是一个问题）？

它们是我可以从 var 转储中给你的最好的指示。

您可以访问测试网关吗？

# java - 在 Java servlet 中以编程方式使用 keytool 来创建证书/密钥对

> ID：11298291
> 
> 赞同：0
> 
> 时间：2012-07-02T17:23:25.570
> 
> 标签：java, servlets, cryptography, keystore, keytool

我们需要创建一个 HTTP 服务，该服务可以创建并返回由受信任的父证书签名的证书。我们最初的计划是在使用 Runtime.exec 的 Servlet 中使用 jdk 的 bin 目录中的 keytool，但似乎 keytool 命令需要对命令行提示的答案。

例如：`keytool -genkey -alias mydomain -keyalg RSA -keystore keystore.jks -keysize 2048`在命令行上问一些问题。

我们的下一个想法是使用 java.security.KeyStore，但我没有看到导出和持久存储存储的方法，我们希望将所有证书保存在 jks 文件中。如果 Web 容器出现故障，我们肯定需要能够保留所有 PKI 工件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T20:49:49.707

由于这是谷歌的顶级结果之一，我最终确实找到了答案。

```
$ java -version
java version "1.7.0_11"
$ keytool -genkey -keysize 2048 \
  -alias tomcat \
  -keyalg RSA \
  -dname "CN=example.com,OU=MyOrgUnit,O=MyOrg,L=Somewhere,S=State,C=US" \
  -storepass Secret -keypass Secret \
  -keystore keystore.jks 
```

希望这对其他人有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T19:12:36.367

试试[Portecle](http://portecle.sourceforge.net/)。如果 GUI 不能做到这一点，那么只需从源中提取信息。

# sql-server-2008 - Multi-part identifier could not be bound SQL 2008

> ID：11298302
> 
> 赞同：0
> 
> 时间：2012-07-02T17:24:34.377
> 
> 标签：sql-server-2008

I'm trying to do a simple copy of a table from one database to another where a condition is true. However, I am getting a "multi-part identifier could not be bound". My spelling is correct as Intellisense is prompting me through correctly.

Example:

```
USE database2
SELECT * INTO database2.dbo.Table1
FROM database1.dbo.Table1
WHERE database1.dbo.Table1.Column1 = database2.dbo.Table2.Column2 
```

SQL will complain that the "database2.dbo.table2.Column2" multi-part identifier cannot be bound.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T17:28:34.370

In this instance, intellisense doesn't make the statement legitemate.

I think you are wanting to do something along these lines:

```
SELECT d1.* INTO database2.dbo.Table1 
FROM database1.dbo.Table1 d1
INNER JOIN database2.dbo.Table2 d2
WHERE d1.Column1 = d2.Column2 
```

# html - 如何检查任何 Web 应用程序正在使用的 html 版本？

> ID：11298305
> 
> 赞同：9
> 
> 时间：2012-07-02T17:24:44.043
> 
> 标签：html

如何检查我的 Web 应用程序使用的 html 版本？我有完整的代码库，但我不确定在哪里检查 html 版本？在 jsp 中，我看不到任何与 html 版本相关的内容。

**编辑：-**在谷歌上。大多数东西说，做页面源，第一行告诉html版本。当我做同样的事情时

```
 <!doctype html> 
```

现在我不确定，应该从上面的行中提取什么版本的 html？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-02T17:33:09.667

检查 html 文件中的[DOCTYPE](http://www.w3.org/QA/2002/04/valid-dtd-list.html)声明。

HTML5

```
<!DOCTYPE html> 
```

HTML 4.01 严格

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"> 
```

# php - 多个类别中 wp_links 的 SQL 查询

> ID：11298306
> 
> 赞同：0
> 
> 时间：2012-07-02T17:24:44.210
> 
> 标签：php, mysql, sql, wordpress

我可以从 WordPress 数据库中获取特定类别的链接（为了清楚起见，我在 SQL 部分添加了换行符）：

```
$category1 = 'stuff';
$category2 = 'other_stuff';

$q = 'select * from wp_links l
    inner join wp_term_relationships r on l.link_id = r.object_id
    inner join wp_term_taxonomy using (term_taxonomy_id)
    inner join wp_terms using (term_id)
    where taxonomy = "link_category"
    and name = '.$category1;

$results = $wpdb->get_results($q); 
```

我将如何检索同时属于和的链接（我的意思是*两个**类别* ，而不是*任何一个*类别）？`$category1``$category2`

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T17:26:18.823

你试过OR吗？

```
 $q = 'select * from (select * from wp_links l
        inner join wp_term_relationships r on l.link_id = r.object_id
        inner join wp_term_taxonomy using (term_taxonomy_id)
        inner join wp_terms using (term_id)
        where taxonomy = "link_category"
        and name = '.$category1.') as t1 join (select * from wp_links l
        inner join wp_term_relationships r on l.link_id = r.object_id
        inner join wp_term_taxonomy using (term_taxonomy_id)
        inner join wp_terms using (term_id)
        where taxonomy = "link_category"
        and name = '.$category2 .') as t2
        on t1.term_id=t2.term_id; 
```

我不认为这是最好的解决方案，但你没有给我更多关于你的结构的细节，表你有什么

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T17:52:34.017

假设`name`您要搜索的字段在`wp_terms`表中，则有两个主要选项。

第一个只是查找具有第一类的实体，然后使用另一个连接来查找也具有第二类的实体。这涉及在两个不同的连接中使用同一个表，因此使用别名并避免使用`using`关键字。

```
select * from wp_links           l
inner join wp_term_relationships r  on l.link_id          = r.object_id
inner join wp_term_taxonomy      t  on r.term_taxonomy_id = t.term_taxonomy_id
inner join wp_terms              c1 on t.term_id          = c1.term_id
inner join wp_terms              c2 on t.term_id          = c2.term_id
where taxonomy = "link_category"
and c1.name = 'stuff'
and c2.name = 'other_stuff' 
```

替代方案的可扩展性远不止两个类别，而是涉及一个子查询......

```
select
  l.*
from
(
  select l.id from wp_links        l
  inner join wp_term_relationships r on l.link_id          = r.object_id
  inner join wp_term_taxonomy      t on r.term_taxonomy_id = t.term_taxonomy_id
  inner join wp_terms              c on t.term_id          = c.term_id
  where taxonomy = "link_category"
  and c.name IN ('stuff', 'other_stuff')
  group by l.id
  having count(distinct c.name) = 2
)
  subquery
inner join wp_links l ON subquery.id = l.id 
```

内部查询查找所有具有一个类别或另一个类别的内容，但是 having 子句只允许那些在我们的列表中具有两个类别的内容。（换句话说，它们都是。） *[它还假设`wp_links`表作为`id`列用作唯一标识符。]***

# asp.net - ASP.NET 301 重定向

> ID：11298310
> 
> 赞同：1
> 
> 时间：2012-07-02T17:25:17.700
> 
> 标签：asp.net, iis

我有一个旧域，比如*http://siteA.com*，我搬到了*http://siteB.com*，我想将所有请求重定向到*http://siteA.com/myPage.aspx?param=text*到*http ://siteB.com/myPage.aspx?param=text*

是否可以使用运行 IIS 6 和 ASP.net 4 的共享主机帐户来做到这一点？

# java - 在 ListView 中显示图像和文本

> ID：11298313
> 
> 赞同：0
> 
> 时间：2012-07-02T17:25:41.153
> 
> 标签：java, android, xml

我正在开发一个应用程序，它显示一个包含 30 个项目的 ListView。在每一行中，应该有一个文本和一个图像。我搜索不同的教程，但不幸的是，它们都不适合我。所以我请你看一下我的代码并告诉我那里出了什么问题，因为当我启动应用程序时，ListView 是空的。

```
 mainActivity.java:

    setContentView(R.layout.auswertung);
    ListView list = (ListView) findViewById(R.id.listView1);
    list.setAdapter(new MyListAdapter(this, fragen));

    MyListAdapter.java

    import java.util.ArrayList;

    import android.content.Context;
    import android.view.LayoutInflater;
    import android.view.View;
    import android.view.ViewGroup;
    import android.widget.ArrayAdapter;
    import android.widget.ImageView;
    import android.widget.TextView;

    public class MyListAdapter extends ArrayAdapter<Frage>{
        private final Context context;
        private ArrayList<Frage> fragen;

        public MyListAdapter(Context context, ArrayList<Frage> f) {
            super(context, R.layout.reihe);
            this.context = context;
            fragen = f;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            View rowView = convertView;

            if(rowView == null)
            {
                LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                rowView = inflater.inflate(R.layout.reihe, parent, false);
            }

            TextView textView = (TextView) rowView.findViewById(R.id.textView4);
            ImageView imageView = (ImageView) rowView.findViewById(R.id.img1);
            textView.setText("Frage " + (position+1));

            if (fragen.get(position).getRichtig()==true)
            {
                imageView.setImageResource(R.drawable.richtig);
            }
            else
            {
                imageView.setImageResource(R.drawable.falsch);
            }

            return rowView;
        }
    }

    auswertung.xml
    <?xml version="1.0" encoding="utf-8"?>

    <RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="0.96"
        android:background="@drawable/hintergrund"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/textView3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="35dp"
            android:layout_marginTop="19dp"
            android:text="Auswertung"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textColor="#000000" />

            <ListView
            android:id="@+id/listView1"
            android:layout_width="fill_parent"
            android:layout_height="460dp" 
            android:layout_marginTop="60dp">

            </ListView>

    </RelativeLayout>

    reihe.xml
    <?xml version="1.0" encoding="utf-8"?>
<LinearLayout
     xmlns:android="http://schemas.android.com/apk/res/android"
     android:paddingTop="4dip"
     android:paddingBottom="6dip"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     android:orientation="horizontal">

     <TextView android:id="@+id/textView4"
         android:layout_width="0dip"
         android:layout_height="wrap_content"
         android:layout_weight="5"
         android:textSize="16dp"
         android:textColor="#000000" />

     <ImageView
         android:id="@+id/img1"
         android:layout_width="25dp"
         android:layout_height="25dp" />

</LinearLayout> 
```

如您所见，我有一个背景图像，并且还想问您，如何使 ListView 的背景不可见，以便我可以看到文本和图像后面的背景？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T17:35:27.603

您应该通过[ArrayAdapter](http://developer.android.com/reference/android/widget/ArrayAdapter.html#ArrayAdapter%28android.content.Context,%20int,%20T%5B%5D%29)构造您的`Frage`数据集，或者至少是 ovveride `ArrayAdapter.getCount()`，并让它返回其中的项目数`ArrayList<Frage> f`

```
int getCount() {
 return (f == null) ? 0 : f.size();
} 
```

[这里](http://developer.android.com/reference/android/widget/Adapter.html#getCount%28%29)的文档`getCount()`

# perl - Perl搜索特定子目录然后处理

> ID：11298314
> 
> 赞同：1
> 
> 时间：2012-07-02T17:25:41.647
> 
> 标签：perl, subdirectory

所以对于我正在编写的程序，我想做的是搜索目录中的所有子目录。如果子目录名称包含一个单词，比如说“foo”，那么程序将打开这个子目录并对子目录中的文件执行一个功能。有人可以帮我解决这个问题吗？它还需要是递归的。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T17:37:25.000

这可以使用[`File::Find`](https://metacpan.org/module/File::Find)模块来完成，但我相信[`Path::Class`](https://metacpan.org/module/Path::Class)即使它不是核心模块并且可能需要安装，它也很出色。

这个程序找到想要的文件并调用`process`来处理它们。目前，`process`子程序只是打印文件名进行测试。

```
use strict;
use warnings;

use Path::Class;

my $dir = dir '/path/to/root/directory';

$dir->recurse(callback => sub {
  my $node = shift;
  return if $node->is_dir;
  my $parent = $node->parent;
  if ($parent->basename =~ /foo/) {
    process($node);
  }
});

sub process {
  my $file = shift;
  print $file, "\n";
} 
```

* * *

**更新**

如果您愿意，该程序使用`File::Find`.

```
use strict;
use warnings;

use File::Find;
use File::Basename qw/ basename /;

my $dir = '/path/to/root/directory';

find(sub {
  return unless -f;
  if (basename($File::Find::dir) =~ /foo/) {
    process($File::Find::name);
  }
}, $dir);

sub process {
  my $file = shift;
  print $file, "\n";
} 
```

* * *

**更新**

[`Path::Class::Rule`](https://metacpan.org/module/Path::Class::Rule)根据要求，这是用于比较的进一步解决方案。正如[daxim](https://stackoverflow.com/users/46395)建议的那样，代码要短一些。

```
use strict;
use warnings;

use Path::Class::Rule;

my $rule = Path::Class::Rule->new;
$rule->file->and(sub { $_->parent->basename =~ /foo/ });

my $next = $rule->iter('/path/to/root/directory');
while ( my $file = $next->() ) {
  process($file);
}

sub process {
  my $file = shift;
  print $file, "\n";
} 
```

# django - 激活管理员后，mod_wsgi 下的 Django 找不到其他 URL

> ID：11298319
> 
> 赞同：0
> 
> 时间：2012-07-02T17:25:58.627
> 
> 标签：django, mod-wsgi

我正在尝试做 Django 教程。第 1 部分顺利 (i.stack.imgur.com/US5GN.jpg)

但是，一旦我激活了管理站点，我就会得到根 (i.stack.imgur.com/EXfE4.jpg)。**编辑**（因为 SO 还不允许我发布图片；谢谢，cberner）：

```
Page not found (404)
Request Method:     GET
Request URL:        http://dj1.net/
Using the URLconf defined in dj1_net.urls, Django tried these URL patterns, in this order:
^admin/
The current URL, , didn't match any of these. 
```

`dj1.net`是我的测试域（编辑`/etc/hosts`），虽然`dj1.net/admin/`现在按预期工作，但我不知道为什么`dj1.net/`在我取消注释（按照指示）该行时抛出此错误

```
url(r'^admin/', include(admin.site.urls)), 
```

在`mysite/urls.py`（在我的情况下`dj1_net/urls.py`）。在我看来，*除非*GET 请求反对，否则一切都应该像以前一样工作`/admin/`。

我的堆栈：带有 Apache 和 mod_wsgi 的 Debian 6.0 VPS。**我想避免使用 Django 的内置服务器**：如果我不能真正部署它，我宁愿早点知道，也不要晚点知道。事实上，为了方便 PHP 支持，我对基于 Apache 的解决方案非常感兴趣。

为了进一步参考，这是我的`/etc/apache2/sites-available/dj1.net`：

```
<VirtualHost *:80>
    ServerName dj1.net
    DocumentRoot /var/www/dj1_net
    Alias /static/ /var/www/dj1_net/static/
    Alias /media/ /var/www/dj1_net/media/
    ErrorLog ${APACHE_LOG_DIR}/error.log
    LogLevel warn
    CustomLog ${APACHE_LOG_DIR}/access.log combined
    WSGIScriptAlias / /var/www/dj1_net/django.wsgi
    WSGIProcessGroup dj1_net
    WSGIDaemonProcess dj1_net processes=2 threads=16 maximum-requests=1000 display-name=apache-dj1_net-wsgi
</VirtualHost> 
```

最后，这里是`/var/www/dj1_net/django.wsgi`：

```
import sys
import os
import os.path
sys.path.append(os.path.dirname(__file__))
os.environ['DJANGO_SETTINGS_MODULE'] = 'dj1_net.settings'
from django.core.handlers.wsgi import WSGIHandler
application = WSGIHandler() 
```

坦率地说，我对 Apache 服务器配置*和*WSGI 知之甚少。但是，我确实希望在开始使用 Django 之前完成此设置。我遵循了[官方说明](https://docs.djangoproject.com/en/dev/howto/deployment/wsgi/modwsgi/)和[这篇文章](http://mindref.blogspot.com.es/2011/08/debian-django-apache-modwsgi.html)的混合，因为坦率地说，我无法让 Django 逐字应用任一说明。恐怕问题的根源一定在那儿……

任何提示将不胜感激。

干杯!

SP

**第二次编辑**。这是`dj1_net/urls.py`（谢谢，scytale）：

```
from django.conf.urls import patterns, include, url

# Uncomment the next two lines to enable the admin:
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    # Examples:
    # url(r'^$', 'dj1_net.views.home', name='home'),
    # url(r'^dj1_net/', include('dj1_net.foo.urls')),

    # Uncomment the admin/doc line below to enable admin documentation:
    # url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

    # Uncomment the next line to enable the admin:
    url(r'^admin/', include(admin.site.urls)),
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T18:00:01.090

您没有为网站的根目录定义 url。您需要添加一个，例如：

```
url(r'^$', 'dj1_net.views.my_view_function'), 
```

这将在定义管理 URL 的行之后。

# load - 使用 TestNG 进行负载测试

> ID：11298322
> 
> 赞同：1
> 
> 时间：2012-07-02T17:26:24.583
> 
> 标签：load, testng, soapui, performance-testing

在谈到 Java 时，我想以“我是一个完全的菜鸟”作为开头。我已经弄清楚如何使用 Web 服务并使用 TestNG 对该 Web 服务进行一些测试。我现在希望能够进行这些 TestNG 测试并在负载测试中使用它们。有没有办法可以在 SoapUI 中使用这些 TestNG 测试，或者是否有其他工具可以用来执行 Web 服务的负载测试？

我确实发现了使用 @Test(invocationCount = , threadPoolSize = ) 是它的范围，还是可以在 TestNG 中完成更多？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T17:09:17.677

我听从了弗兰克的建议，看了看他提供的链接。

# java - Spring Bean：似乎没有连接起来

> ID：11298323
> 
> 赞同：1
> 
> 时间：2012-07-02T17:26:27.820
> 
> 标签：java, spring

我的`wireup.xml`样子

```
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:util="http://www.springframework.org/schema/util"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd">
    <util:properties id="mongoProperties" location="file:///storage//local.properties" />

    <bean id="mongoService" class="com.business.persist.MongoService" init-method="init"></bean>
</beans> 
```

并且`storage//local.properties`作为

```
### === MongoDB interaction === ###
host="127.0.0.1"
port=27017
database=contract 
```

Bean 类`MongoService`为

```
@Service
public class MongoService {

    @Value("#{mongoProperties['host']}")
    private String host;

    @Value("#{mongoProperties['port']}")
    private int port;

    @Value("#{mongoProperties['database']}")
    private String database;

    private Mongo mongo;

    private static final Logger LOGGER = LoggerFactory.getLogger(MongoService.class);

    public MongoService() {}

    public void init() throws UnknownHostException {
        LOGGER.info("host=" + host + ", port=" + port + ", database=" + database);
        mongo = new Mongo(host, port);
    }

    public void putDocument(@Nonnull final DBObject document) {
        LOGGER.info("inserting document - " + document.toString());
        mongo.getDB(database).getCollection(getCollectionName(document)).insert(document, WriteConcern.SAFE);
    }

    public void putDocuments(@Nonnull final List<DBObject> documents) {
        for (final DBObject document : documents) {
            putDocument(document);
        }
    } 
```

`MongoServiceTest`我测试这个 类

```
public class MongoServiceTest {
    @Autowired
    private MongoService mongoService;

    @Test
    public void testMongoService() {
        final DBObject document = DBContract.getUniqueQuery("001");
        document.put(DBContract.R_VARIABLES, "values");
        document.put(DBContract.P_VARIABLES, "values");

        mongoService.putDocument(document);
    } 
```

当我运行这个时，我遇到了`NullpointerException`

```
10:24:23.956 [main] INFO  c.s.sparrow.business.util.MongoRule -  Setting up Mongo Database
10:24:23.963 [main] INFO  c.s.sparrow.business.util.MongoRule - Shutting down the Mongo Database

java.lang.NullPointerException
    at com.business.persist.MongoServiceTest.testMongoService(MongoServiceTest.java:40)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.rules.ExternalResource$1.evaluate(ExternalResource.java:46)
    at org.junit.rules.RunRules.evaluate(RunRules.java:18)
    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.junit.runner.JUnitCore.run(JUnitCore.java:157)
    at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:76)
    at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:195)
    at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:63)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120) 
```

看起来wireup实际上并没有创建一个bean并调用该`init`方法

**问题**

我该如何解决这个问题并让它工作？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T17:28:05.880

利用`@ContextConfiguration`

```
@ContextConfiguration
public class MongoServiceTest {
    @Resource
    private MongoService mongoService; 
```

完整的测试类应该看起来像

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration
public final class MongoServiceTest {

   @Resource
   private MongoServiceservice;

   @Test
   public void testServiceName() {//...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T18:31:13.280

正如@Jigar 所提到的，这是我添加的内容，它开始起作用了！

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration("/com/business/wireup-spring.xml")
public class MongoServiceTest {

    @Rule
    public final MongoRule mongoRule;
    @Resource
    private MongoService mongoService;

    public MongoServiceTest() throws UnknownHostException {
        mongoRule = new MongoRule();
    }

    @Test
    public void testMongoService() {
        final DBObject document = DBContract.getUniqueQuery("001");
        document.put(DBContract.R_VARIABLES, "values");
        document.put(DBContract.P_VARIABLES, "values");

        mongoService.putDocument(document);
    } 
```

# r - 在 R 中，使用 lubridate 将 hms 对象转换为秒

> ID：11298327
> 
> 赞同：10
> 
> 时间：2012-07-02T17:26:52.197
> 
> 标签：r, lubridate

lubridate 中的一个简单问题——我想将一个 hms 对象转换为自一天开始以来的适当秒数。

例如

```
library(lubridate)
hms("12:34:45") 
```

那么我想知道 12 小时 34 分 45 秒到底有多长，以秒为单位

明显的东西

```
seconds(hms("12:34:45")) 
```

刚回来

```
45s 
```

这不是我想要的。如何将这些 hms 值转换为秒？我想使用润滑脂

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-12-09T19:54:36.637

```
R>lubridate::period_to_seconds(hms("01:00:00")) 
```

从 00:00:00 或在上述情况下，给出预期的 3600 秒作为数字计数：

```
R>period_to_seconds(hms("12:34:45")) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-02T17:41:47.340

您使用哪个包并不重要——它将日期/日期时间对象转换为自纪元以来秒数的 POSIXct 表示。所以你也可以在基础 R 中做它——所以在这里部署`ISOdatetime()`任意一天，使用今天：

```
R> difftime(ISOdatetime(2012,7,2,12,34,45), ISOdatetime(2012,7,2,0,0,0))
Time difference of 12.5792 hours 
```

所以我们想要几秒钟：

```
R> difftime(ISOdatetime(2012,7,2,12,34,45), ISOdatetime(2012,7,2,0,0,0), 
+          unit="secs")
Time difference of 45285 secs 
```

我们可以转换为数字：

```
R> as.numeric(difftime(ISOdatetime(2012,7,2,12,34,45), +
                       ISOdatetime(2012,7,2,0,0,0), unit="secs"))
[1] 45285 
```

*编辑：* 回到 lubridate，这可以说是一个错误：

```
> hms("12:34:45") - hms("00:00:00")
[1] 12 hours, 34 minutes and 45 seconds
R> as.numeric(hms("12:34:45") - hms("00:00:00"))
[1] 45
R> 
```

# android - 非活动类中的 SharedPreference

> ID：11298336
> 
> 赞同：1
> 
> 时间：2012-07-02T17:27:27.107
> 
> 标签：android, android-preferences

我有一个`PreferenceClass`扩展类`PreferenceActivity`。这个类的代码如下：

```
public class Preferenceclass extends PreferenceActivity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // setContentView(R.layout.main2);
    addPreferencesFromResource(R.layout.preferences);

}} 
```

我还有一个`Shakelistener`实现`SensorListener`. 这个类的代码如下：

```
 public class Shakelistener implements SensorListener {
    public void onSensorChanged(int sensor, float[] values) {
    // Some code
    }} 
```

我需要能够从这个非活动类中访问首选项，但我不确定如何执行此操作。

**编辑**

这是我用来访问共享首选项的代码：

```
 String PREF_FILE_NAME = "preferences";

    SharedPreferences pref = mContext.getSharedPreferences(PREF_FILE_NAME , Context.MODE_PRIVATE);
    String myListPreference = pref.getString("listpref", "default choice");
    boolean cb = pref.getBoolean("checkBox", false);
    Toast.makeText(mContext, myListPreference+"-"+cb, Toast.LENGTH_LONG).show(); 
```

此代码没有给出任何错误，但它总是将 toast 评估为“默认选择-false”。

在这种情况下，我应该使用哪个 PREF_FILE_NAME？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T17:29:12.830

在非活动类的构造函数中获取一个[Context](http://developer.android.com/reference/android/content/Context.html)实例，并使用它来调用所有此类方法。

像这样的东西：

```
public class NonActivityClass implements SensorListener{
Context mContext;
public NonActivtiyClass(Context context) {
this.mContext = context;
}
//Rest of your code
} 
```

然后执行此操作以在您的 Activtiy 中创建该类的对象`onCreate()`：

```
NonActivityClass nac = new NonActivityClass(this); 
```

# graphviz - 如何在graphviz中定义节点形状？

> ID：11298339
> 
> 赞同：1
> 
> 时间：2012-07-02T17:27:44.700
> 
> 标签：graphviz, dot

我想画圆作为点中的节点。我正在使用以下应该绘制圆圈的简单代码。但它会画出日食。这是我的代码：

```
digraph G {
node [ shape=circle, width=0.5, height = 0.5, fixedsize=true]
Node1  -> Node1 ;
Node1 -> Node2;
Node2 -> Node1;
Node2 -> Node2;
}; 
```

这就是我得到的：

![在此处输入图像描述](../Images/fc6b52adb9f790072a4978fa8dded205.png)

如何画圆？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T17:31:34.260

您的文件中的一切都是绝对正确的。必须有圈子。

![图片](../Images/a94360e6e6b7e3bb9c0d82e505c8ac15.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T17:32:03.617

使用`shape="circle"`应该工作，例如：

```
digraph G {
0 [color="aqua", label="A", shape="circle", style="filled"];
1 [color="bisque", label="B", shape="circle", style="filled"];
2 [color="blue", label="C", shape="circle", style="filled"];
3 [color="blueviolet", label="E", shape="circle", style="filled"];
4 [color="brown", label="D", shape="circle", style="filled"];
5 [color="burlywood", label="F", shape="circle", style="filled"];
6 [color="cadetblue", label="G", shape="circle", style="filled"];
0->0 ;
0->1;
1->4;
2->2;
2->3;
3->4;
4->4;
4->5;
4->6;
5->0;
6->2;
} 
```

![在此处输入图像描述](../Images/13a1627896705640d8dae884e5a1fedb.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T17:44:02.970

```
digraph G {
node [ shape="circle", width=1, height = 1, fixedsize=true];
s0 -> s0 [label="a -> x = x.a\ny = y.a"];
s0 -> s1 [label="a -> x = x.a\ny = y.a"];
s1 -> s0 [label="a -> x = x.a\ny = y.a"];
s1 -> s1 [label="a -> x = x.a\ny = y.a"];
}; 
```

输出是：

![在此处输入图像描述](../Images/fc083a7370f4cc472a724176e1309b5c.png)

有更好的渲染方式吗？

# php - 向用户帐户发布推文

> ID：11298343
> 
> 赞同：2
> 
> 时间：2012-07-02T17:28:01.137
> 
> 标签：php, oauth, twitter, twitter-oauth

我想使用 OAuth 代表用户发推文，但是当用户使用应用程序时，推文就会消失。

我想在我想要的时候在用户的时间线上发推文。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-07T15:48:01.383

这是我在墙上撞了好几天的问题。但最后我明白了。

推特消费者代币 推特消费者秘密用户代币 用户秘密代币 这些是我们需要代表用户发布推文的东西，在此，推特消费者代币和推特消费者秘密应该由推特应用程序的管理员为谁/这需要代表用户发布的权限。而 USER TOKEN 和 USER SECRET TOKEN 是您需要用户代表他发布推文的东西。您可以使用 OAUTH 的 getRequestToken() 函数来获取此信息。要了解如何使用此功能，请在此处查看 Abraham 编写的 twitteroauth 中的 redirect.php。并且在获得 USER TOKEN 和 USER SECRET TOKEN 后，您可以使用您的 TWITTER CONSUMER TOKEN 和 TWITTER CONSUMER SECRET 以及从 api 收到的用户的用户令牌和用户秘密令牌代表他/她发布。而已！

但用户可以随时通过访问撤销访问权限，

[https://twitter.com/settings/applications](https://twitter.com/settings/applications)并单击您的应用旁边的“撤销访问”按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T17:30:19.213

用 Twitter 是的，你可以。当用户通过 Twitter 登录您的应用程序时，只需确保将他们的令牌和秘密存储在数据库中，例如，以便将来以他们的身份进行身份验证。

```
$twitter->setToken($_GET['oauth_token']);
$token = $twitter->getAccessToken();
$_SESSION['oauth_token'] = $token->oauth_token;
$_SESSION['oauth_secret'] = $token->oauth_token_secret; 
```

现在存储这些 Session 变量，你就可以开始了。请注意，$twitter 只是一个与 Twitter 的 API 一起使用的包装类。

# casting - 使用可分配组件强制转换派生类型数据

> ID：11298345
> 
> 赞同：1
> 
> 时间：2012-07-02T17:28:03.587
> 
> 标签：casting, fortran, transfer, derived-types

我试图找到一种方法将具有可分配组件的派生类型对象传递给 Fortran 过程，而过程不知道类型定义。要了解我为什么要这样做，有关背景的一些信息可能会有用。

考虑一个包含稀疏矩阵向量乘法的通用过程，如 Lanczos 对角化例程。该过程本身不使用矩阵，仅使用向量。该过程唯一需要对矩阵做的就是将它与向量一起传递给矩阵向量乘法例程。稀疏矩阵必须是具有可分配组件的派生类型变量。

在我看来，程序不需要知道稀疏矩阵的数据类型。它只需要将它传递给矩阵向量乘法例程，然后它将对其进行适当的解码。我试图做的是使用`TRANSFER`内部函数将派生类型变量转换为可分配的字节数组，然后将其传输回初始派生类型变量。不幸的是，这不适用于具有可分配组件的派生类型变量，请参阅以下两个链接：[链接 1](https://groups.google.com/forum/?fromgroups#!topic/comp.lang.fortran/txm5uNMpVtE)、 [链接 2](http://gcc.gnu.org/ml/fortran/2011-04/msg00227.html)

因此，如上所述，我的问题如下：是否有一种合理的方法*将具有可分配组件的派生类型对象传递给 Fortran 过程，而过程不知道类型定义？

*注意：我知道我可以使用自定义的内部格式化写入将派生类型变量存储到固有类型数组中，例如字符数组。这在我看来非常奇怪，但也许我错了？

编辑 :: 正如 Vladimir F 在下面所说，调用`TRANSFER`具有可分配组件的派生类型时的行为是非标准的。然而，令人惊讶的是，我发现这适用于最新版本的 PGI 编译器。这是一个测试程序：

```
module Increments

  TYPE :: structure
    real s
    integer q
    real, allocatable :: flt1d(:)
  END TYPE structure

contains

  subroutine IncrementAndPrintReal(data)
    character(len=1) :: data(:)
    real             :: r
    r = transfer(data, r)
    r = r + 1.0 
    print *,r
    data = transfer(r, data)
  end subroutine

  subroutine IncrementAndPrintInteger(data)
    character(len=1) :: data(:) 
    integer          :: i    
    i = transfer(data, i)
    i = i + 1 
    print *,i
    data = transfer(i, data)
  end subroutine

  subroutine IncrementTenTimes(incrFunc, data)
    character(len=1) :: data(:) 
    integer :: i
    interface
      subroutine incrFunc(data)
        character(len=1) :: data(:) 
      end subroutine
    end interface
    do i = 1, 10 
      call incrFunc(data)
    enddo   
  end subroutine

  subroutine IncrementAndPrintStructure(data)
    character(len=1) :: data(:)
    type(structure) :: t0
    t0 = transfer(data, t0)
    print *, t0%flt1d
    t0%flt1d = t0%flt1d(1) + 1
    print*
    data = transfer(t0, data)
  end subroutine

end module

program main
  use Increments
  character(len=1), allocatable :: data(:) 
  integer                       :: lengthData
  real                          :: r = 5.0 
  integer                       :: i = 10
  type(structure)               :: t

  t%s = 1
  t%q = 2
  allocate(t%flt1d(11))
  t%flt1d = 3

  lengthData = size(transfer(r, data))
  allocate(data(lengthData))
  data = transfer(r, data)
  call IncrementTenTimes(IncrementAndPrintReal, data)
  deallocate(data)

  lengthData = size(transfer(i, data))
  allocate(data(lengthData))
  data = transfer(i, data)
  call IncrementTenTimes(IncrementAndPrintInteger, data)
  deallocate(data)

  lengthData = size(transfer(t, data))
  allocate(data(lengthData))
  data = transfer(t, data)
  call IncrementTenTimes(IncrementAndPrintStructure, data)
  deallocate(data)

end program 
```

以下是不同编译器的结果：

```
ifort (v11.1 and v12.1.5):
==============

   6.000000    
   7.000000    
   8.000000    
   9.000000    
   10.00000    
   11.00000    
   12.00000    
   13.00000    
   14.00000    
   15.00000    
          11
          12
          13
          14
          15
          16
          17
          18
          19
          20
   3.000000       3.000000       3.000000       3.000000       3.000000    
   3.000000       3.000000       3.000000       3.000000       3.000000    
   3.000000    

  0.0000000E+00  0.0000000E+00   4.000000       4.000000       4.000000    
   4.000000       4.000000       4.000000       4.000000       4.000000    
   4.000000    

  0.0000000E+00  0.0000000E+00   1.000000       1.000000       1.000000    
   1.000000       1.000000       1.000000       1.000000       1.000000    
   1.000000    

  0.0000000E+00  0.0000000E+00   1.000000       1.000000       1.000000    
   1.000000       1.000000       1.000000       1.000000       1.000000    
   1.000000    

  0.0000000E+00  0.0000000E+00   1.000000       1.000000       1.000000    
   1.000000       1.000000       1.000000       1.000000       1.000000    
   1.000000    

  0.0000000E+00  0.0000000E+00   1.000000       1.000000       1.000000    
   1.000000       1.000000       1.000000       1.000000       1.000000    
   1.000000    

  0.0000000E+00  0.0000000E+00   1.000000       1.000000       1.000000    
   1.000000       1.000000       1.000000       1.000000       1.000000    
   1.000000    

  0.0000000E+00  0.0000000E+00   1.000000       1.000000       1.000000    
   1.000000       1.000000       1.000000       1.000000       1.000000    
   1.000000    

  0.0000000E+00  0.0000000E+00   1.000000       1.000000       1.000000    
   1.000000       1.000000       1.000000       1.000000       1.000000    
   1.000000    

  0.0000000E+00  0.0000000E+00   1.000000       1.000000       1.000000    
   1.000000       1.000000       1.000000       1.000000       1.000000    
   1.000000    

gfortran (gcc version 4.4.3):
=============================

   6.0000000    
   7.0000000    
   8.0000000    
   9.0000000    
   10.000000    
   11.000000    
   12.000000    
   13.000000    
   14.000000    
   15.000000    
          11
          12
          13
          14
          15
          16
          17
          18
          19
          20
   3.0000000       3.0000000       3.0000000       3.0000000       3.0000000       3.0000000       3.0000000       3.0000000       3.0000000       3.0000000       3.0000000    

  1.82795013E-38   0.0000000       4.0000000       4.0000000       4.0000000       4.0000000      1.54142831E-44  1.12103877E-44  2.80259693E-45   4.0000000       4.0000000    

*** glibc detected *** ./tr: double free or corruption (fasttop): 0x0000000000c70b20 ***
======= Backtrace: =========
/lib/libc.so.6(+0x77806)[0x7f9fb0e59806]
/lib/libc.so.6(cfree+0x73)[0x7f9fb0e600d3]
./tr[0x4010af]
./tr[0x401175]
./tr[0x40262e]
./tr[0x4026ea]
/lib/libc.so.6(__libc_start_main+0xfd)[0x7f9fb0e00c4d]
./tr[0x400a59]
======= Memory map: ========
00400000-00403000 r-xp 00000000 00:16 123                                /home/stefanos/Documents/dig/progs/other/transfer/tr
00602000-00603000 r--p 00002000 00:16 123                                /home/stefanos/Documents/dig/progs/other/transfer/tr
00603000-00604000 rw-p 00003000 00:16 123                                /home/stefanos/Documents/dig/progs/other/transfer/tr
00c70000-00c91000 rw-p 00000000 00:00 0                                  [heap]
7f9fac000000-7f9fac021000 rw-p 00000000 00:00 0 
7f9fac021000-7f9fb0000000 ---p 00000000 00:00 0 
7f9fb0de2000-7f9fb0f5c000 r-xp 00000000 08:01 5512795                    /lib/libc-2.11.1.so
7f9fb0f5c000-7f9fb115b000 ---p 0017a000 08:01 5512795                    /lib/libc-2.11.1.so
7f9fb115b000-7f9fb115f000 r--p 00179000 08:01 5512795                    /lib/libc-2.11.1.so
7f9fb115f000-7f9fb1160000 rw-p 0017d000 08:01 5512795                    /lib/libc-2.11.1.so
7f9fb1160000-7f9fb1165000 rw-p 00000000 00:00 0 
7f9fb1165000-7f9fb117b000 r-xp 00000000 08:01 5505258                    /lib/libgcc_s.so.1
7f9fb117b000-7f9fb137a000 ---p 00016000 08:01 5505258                    /lib/libgcc_s.so.1
7f9fb137a000-7f9fb137b000 r--p 00015000 08:01 5505258                    /lib/libgcc_s.so.1
7f9fb137b000-7f9fb137c000 rw-p 00016000 08:01 5505258                    /lib/libgcc_s.so.1
7f9fb137c000-7f9fb13fe000 r-xp 00000000 08:01 5505028                    /lib/libm-2.11.1.so
7f9fb13fe000-7f9fb15fd000 ---p 00082000 08:01 5505028                    /lib/libm-2.11.1.so
7f9fb15fd000-7f9fb15fe000 r--p 00081000 08:01 5505028                    /lib/libm-2.11.1.so
7f9fb15fe000-7f9fb15ff000 rw-p 00082000 08:01 5505028                    /lib/libm-2.11.1.so
7f9fb15ff000-7f9fb16ea000 r-xp 00000000 08:01 787983                     /usr/lib/libgfortran.so.3.0.0
7f9fb16ea000-7f9fb18e9000 ---p 000eb000 08:01 787983                     /usr/lib/libgfortran.so.3.0.0
7f9fb18e9000-7f9fb18ea000 r--p 000ea000 08:01 787983                     /usr/lib/libgfortran.so.3.0.0
7f9fb18ea000-7f9fb18eb000 rw-p 000eb000 08:01 787983                     /usr/lib/libgfortran.so.3.0.0
7f9fb18eb000-7f9fb18ec000 rw-p 00000000 00:00 0 
7f9fb18ec000-7f9fb190c000 r-xp 00000000 08:01 5512780                    /lib/ld-2.11.1.so
7f9fb1ad9000-7f9fb1add000 rw-p 00000000 00:00 0 
7f9fb1b09000-7f9fb1b0b000 rw-p 00000000 00:00 0 
7f9fb1b0b000-7f9fb1b0c000 r--p 0001f000 08:01 5512780                    /lib/ld-2.11.1.so
7f9fb1b0c000-7f9fb1b0d000 rw-p 00020000 08:01 5512780                    /lib/ld-2.11.1.so
7f9fb1b0d000-7f9fb1b0e000 rw-p 00000000 00:00 0 
7fff5e340000-7fff5e356000 rw-p 00000000 00:00 0                          [stack]
7fff5e396000-7fff5e397000 r-xp 00000000 00:00 0                          [vdso]
ffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0                  [vsyscall]
Aborted

pgfortran (v12.5):
==================

    6.000000    
    7.000000    
    8.000000    
    9.000000    
    10.00000    
    11.00000    
    12.00000    
    13.00000    
    14.00000    
    15.00000    
           11
           12
           13
           14
           15
           16
           17
           18
           19
           20
    3.000000        3.000000        3.000000        3.000000     
    3.000000        3.000000        3.000000        3.000000     
    3.000000        3.000000        3.000000    

    4.000000        4.000000        4.000000        4.000000     
    4.000000        4.000000        4.000000        4.000000     
    4.000000        4.000000        4.000000    

    5.000000        5.000000        5.000000        5.000000     
    5.000000        5.000000        5.000000        5.000000     
    5.000000        5.000000        5.000000    

    6.000000        6.000000        6.000000        6.000000     
    6.000000        6.000000        6.000000        6.000000     
    6.000000        6.000000        6.000000    

    7.000000        7.000000        7.000000        7.000000     
    7.000000        7.000000        7.000000        7.000000     
    7.000000        7.000000        7.000000    

    8.000000        8.000000        8.000000        8.000000     
    8.000000        8.000000        8.000000        8.000000     
    8.000000        8.000000        8.000000    

    9.000000        9.000000        9.000000        9.000000     
    9.000000        9.000000        9.000000        9.000000     
    9.000000        9.000000        9.000000    

    10.00000        10.00000        10.00000        10.00000     
    10.00000        10.00000        10.00000        10.00000     
    10.00000        10.00000        10.00000    

    11.00000        11.00000        11.00000        11.00000     
    11.00000        11.00000        11.00000        11.00000     
    11.00000        11.00000        11.00000    

    12.00000        12.00000        12.00000        12.00000     
    12.00000        12.00000        12.00000        12.00000     
    12.00000        12.00000        12.00000 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T05:37:10.087

您不能期望任何可分配组件的标准行为。在任何情况下，它们都不会存储在 d 中。类型结构，它们也不是简单的地址。如果您正在访问描述符或指针，我不清楚没有任何代码。无论如何，对于可靠的泛型编程，您可能应该对多个过程使用标准泛型接口，并且可能使用 INCLUDE 为它们使用公共主体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T13:23:15.610

通过在 PGI 论坛中提出这个问题，我了解了可分配的无限多态对象`CLASS(*), ALLOCATABLE`（感谢 mkcolg）。这似乎是传递派生类型数据的更好方法，因为它允许在数据到达相关模块/过程时进行适当的类型检查。示例可以在 PGInsider 文章[Fortran 2003 第 2 部分中的面向对象编程：数据多态](http://www.pgroup.com/lit/articles/insider/v3n2a2.htm)中找到。

# java - 在不使用字符串函数的情况下在java中反转字符串

> ID：11298346
> 
> 赞同：-2
> 
> 时间：2012-07-02T17:28:03.967
> 
> 标签：java, string, reverse

> **可能的重复：**
> [Java 中的反向“Hello World”](https://stackoverflow.com/questions/2441501/reverse-hello-world-in-java)

如何打印字符串的反面？

```
string s="sivaram"; 
```

不使用字符串处理函数

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T17:31:13.713

在 Java 中访问 String 内容的所有函数都是 String 类的成员，因此都是“字符串函数”。因此，您所写问题的答案是“无法完成”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T17:38:19.787

假设对您的问题进行了严格解释并且您不能使用 String / StringBuilder 类提供的任何方法（我认为这不是本意），您可以使用反射直接访问 char 数组：

```
public static void main(String[] args) throws ParseException, NoSuchFieldException, IllegalArgumentException, IllegalAccessException {
    String s = "abc";
    Field stringValue = String.class.getDeclaredField("value");
    stringValue.setAccessible(true);
    char[] chars = (char[]) stringValue.get(s);

    //now reverse
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T17:32:11.833

`with out using the string handling functions`

当然。获取底层`char[]`，然后使用标准 C 风格的字符反转，然后`String`从反转构建一个新的`char[]`

```
char[] chars = s.toCharArray();
//Now just reverse the chars in the array using C style reversal  
String reversed = new String(chars);//done 
```

我不会对此进行编码，因为这绝对是家庭作业。但这足以让你开始

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-02T17:32:27.560

```
public static void main(String args[]){
    char[] stringArray;
    stringArray = s.toCharArray();

    for(start at end of array and go to beginning)
        System.out.print( s.charAt( i));
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-11-03T16:13:04.923

不可能不使用任何字符串函数，我有一个只使用两个的代码......

```
public String reverseString(String str)
{
    String output = "";
    int len = str.length();
    for(int k = 1; k <= str.length(); k++, len--)
    {
        output += str.substring(len-1,len);
    }
    return output;
} 
```

# java - 方法...必须覆盖超类方法（最新 SDK）

> ID：11298358
> 
> 赞同：3
> 
> 时间：2012-07-02T17:28:44.497
> 
> 标签：java, android

> **可能重复：**
> [为什么我使用@Override 得到“必须覆盖超类方法”？](https://stackoverflow.com/questions/8697513/why-do-i-get-must-override-a-superclass-method-with-override)

我最近在新机器上的新 Eclipse 中安装了最新的 Android SDK。当我在几个地方带来一个旧项目时，我收到一个关于@Override 的语法错误，指出“suchandsuch 类型的方法必须覆盖超类方法”。这些项目是通过删除 @Override 修复的（我认为这是不正确的）。

我刚刚使用我的新设置创建了我的第一个新项目，并且最初未触及的代码给出了这个让我感到困惑的错误。

```
package com.geeksonhugs.whenimclose;

import android.content.Intent;
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.NavUtils;
import android.view.MenuItem;

public class ItemListActivity extends FragmentActivity
        implements ItemListFragment.Callbacks {

    private boolean mTwoPane;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_item_list);

        if (findViewById(R.id.item_detail_container) != null) {
            mTwoPane = true;
            ((ItemListFragment) getSupportFragmentManager()
                    .findFragmentById(R.id.item_list))
                    .setActivateOnItemClick(true);
        }
    }

    @Override
    public void onItemSelected(String id) {
        if (mTwoPane) {
            Bundle arguments = new Bundle();
            arguments.putString(ItemDetailFragment.ARG_ITEM_ID, id);
            ItemDetailFragment fragment = new ItemDetailFragment();
            fragment.setArguments(arguments);
            getSupportFragmentManager().beginTransaction()
                    .replace(R.id.item_detail_container, fragment)
                    .commit();

        } else {
            Intent detailIntent = new Intent(this, ItemDetailActivity.class);
            detailIntent.putExtra(ItemDetailFragment.ARG_ITEM_ID, id);
            startActivity(detailIntent);
        }
    }
} 
```

编译器在 onCreate 之前接受 @Override，但使用 onItemSelected 给出错误。有人可以澄清一下我发生了什么吗？同样，在以前的版本中不会出现此语法错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T17:30:44.973

我认为你正在使用`java compiler 1.5`，制作它`1.6`，因为`@Override of interface's methods is introduced after 1.5.`

在日食中，

> **Window -> Preferences -> Java -> Compiler -> Compiler Compliance Level -> 选择 1.6**

# linux - BASH：如果目录中的文件数为 2 或更大，则需要运行 if 语句

> ID：11298365
> 
> 赞同：-1
> 
> 时间：2012-07-02T17:28:56.773
> 
> 标签：linux, bash, if-statement, count, directory

我有以下 BASH 脚本： http: [//pastebin.com/CX4RN1QW](http://pastebin.com/CX4RN1QW)

仅当目录中的文件数为 2 或更多时，我才想运行脚本中的两个部分。它们由`## Begin file test here`和标记`## End file test.`

我对脚本非常敏感，我不希望有任何其他更改，即使它简化了它。

我努力了：

```
if [ "$(ls -b | wc -l)" -gt 1 ]; 
```

但这没有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T17:59:43.477

`ls`您可以使用 glob 来检查目录中是否存在文件，而不是使用外部命令：

编辑我错过了您正在寻找> 2个文件。更新。

```
shopt -s nullglob # cause unmatched globs to return empty, rather than the glob itself
files=(*) # put all file in the current directory into an array
if (( "${#files[@]}" >= 2 )); then # since we only care about existence, we only need to expand the first element
   ...
fi
shopt -u nullglob # disable null glob (not required) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T17:33:17.900

你需要`ls -1`在那里让它工作，因为 -b 不会让它每行打印一个项目。或者使用`find`, 因为它默认这样做。

# python - Pyserial 2.6 版在 python3 上安装后无法正常工作

> ID：11298368
> 
> 赞同：1
> 
> 时间：2012-07-02T17:29:14.190
> 
> 标签：python, pyserial

这是我在输入 import serial 后得到的错误。我正在运行osx snow leopard，python3.2，安装pyserial时没有错误。

```
 import serial
    Traceback (most recent call last):
    File "<stdin>", line 1, in <module>
    File "serial/__init__.py", line 21, in <module>
    from serial.serialposix import *
    File "serial/serialposix.py", line 64
    50:      0000001,
               ^ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T17:35:04.643

`0000001`在 Python 3 中是一个无效的标记，因为它曾经在 Python 2 中被解析为[八进制](http://en.wikipedia.org/wiki/Octal)文字，并且该行为已被删除以支持`0o`前缀。

`0o0000001`会工作（就像会`0o1`，或者只是`1`）。

我不完全知道为什么您的 pySerial 版本包含这样的文字，但它不能在 Python 3 上正常工作。正如 Martijn 建议的那样，尝试升级。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T18:03:15.277

确保[使用包含的`setup.py`脚本](http://docs.python.org/install/index.html)安装 pyserial ，或者更好的是，使用[`pip`](https://pypi.python.org/pypi/pip/)或[`distribute`](https://pypi.python.org/pypi/distribute)为您安装包。

pyserial 代码库是为 python 2 编写的，但是当使用 python 3 安装时， [2to3 代码翻译器](http://docs.python.org/library/2to3.html)将在代码库上运行。

# notepad++ - 运行命令打开记事本++

> ID：11298370
> 
> 赞同：-3
> 
> 时间：2012-07-02T17:29:38.223
> 
> 标签：notepad++, coded-ui-tests

是否有任何运行命令可以打开 Notepad++？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T17:31:23.943

运行，(windows r) 然后输入 -->`notepad++.exe`

# postgresql - Postgres 存储过程问题 - 我该如何解决？

> ID：11298372
> 
> 赞同：0
> 
> 时间：2012-07-02T17:29:57.333
> 
> 标签：postgresql, stored-procedures

我正在创建一个如下所示的存储过程：

```
CREATE FUNCTION get_components(_given_user_id integer) RETURNS TABLE (id integer, name    varchar, active boolean, parent integer, type smallint, description varchar, email varchar, user_id integer, component_id integer, flag smallint) AS $body$
BEGIN
RETURN QUERY SELECT s.* FROM st_components s LEFT JOIN (SELECT a.* FROM st_users_components_perms a WHERE a.user_id=_given_user_id) ON a.component_id=s.id ORDER BY name;
END;
$body$ LANGUAGE plpgsql; 
```

问题是， ON a.component_id=s.id ORDER BY name 不起作用，因为此时 a.component_id 超出范围。有没有办法在查询之外将“a”声明为 st_users_components_perms？这是如何解决的？非常感谢您的任何见解！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T18:01:07.610

```
SELECT
    s.*
FROM
    st_components s
LEFT JOIN
    (SELECT
        a.*
    FROM
        st_users_components_perms a
  WHERE
      a.user_id = <CONSTANT>
    ) AS x
ON
    x.component_id = s.id
ORDER BY
    name; 
```

尽管查询似乎毫无意义，但让我们假设它是您真实查询的简化版本。

# android - 在不验证银行帐户的情况下发布应用

> ID：11298373
> 
> 赞同：1
> 
> 时间：2012-07-02T17:30:00.037
> 
> 标签：android

我最近设置了一个商家帐户，用于从我开发的付费应用程序中获取收入。但是，我收到了下面的消息。

> 最近，您指定了一个新的银行账户来接收您的付款。但是，在您有资格接收任何付款之前，您必须验证您的银行帐户信息。

现在验证过程需要很长时间，因为谷歌首先将金额存入指定的帐户等。我的问题是 - 我可以在不验证银行帐户的情况下发布我的付费应用程序，还是应该等待？我在网上的任何地方都找不到这个问题的答案，还有什么比 SO 更好的地方。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T17:40:46.200

你不能。谷歌不能仅仅假设你的银行账户将被验证......如果它从未得到验证并且他们已经将你的应用程序投放市场，他们会怎么做？

# windows - SSL 内的 SSH 隧道

> ID：11298375
> 
> 赞同：1
> 
> 时间：2012-07-02T17:30:10.593
> 
> 标签：windows, linux, ssl, ssh, tunnel

有人可以解释一下我必须使用哪些工具以及如何在服务器端和客户端设置封装在 SSL 中的 SSH 隧道？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T17:36:15.227

Stunnel 似乎可以满足您的需求： http: [//www.stunnel.org/ ?page=docs](http://www.stunnel.org/?page=docs)

它创建了一些 SSL 隧道，您可以放置​​任何您想要的协议：HTTP、POP、IMAP、SSH 等。

希望能帮助到你

# java - 自签名小程序在写入文件时抛出 SecurityException

> ID：11298387
> 
> 赞同：2
> 
> 时间：2012-07-02T17:30:49.807
> 
> 标签：java, applet, self-signed, securityexception, appletviewer

我想制作一个能够将文件下载到计算机的Applet，然后在相关的编辑器中打开它们（保存文件后，它应该再次上传回来）。但是，在我花几个小时让它工作之前，我必须确保它实际上是可管理的（已经使用 Java 桌面应用程序而不是 Applet 完成了它）。

所以我写了一个简单的小程序，如果它不存在，它会创建一个文件。该应用程序已**签名**并按原样加载到浏览器中。以下内容被写入屏幕：

> IO 异常：访问被拒绝

我已经标记了不同的错误，所以我知道哪个错误。下面是我的小程序：

```
import javax.swing.*;
import java.security.*;
import java.io.*;

public class DocumentApplet extends JApplet
{
    private static final long serialVersionUID = -2354727776089972258L;

    public void start ()
    {
        add ( new JButton ("Hello, World") );

        AccessControlContext acc = (AccessControlContext) System.getSecurityManager().getSecurityContext();
        try
        {
            acc.checkPermission(new FilePermission("test.txt", "write"));
        }
        catch (SecurityException e)
        {
            add (new JLabel ("Permission Exception: " + e.getMessage()));
            return;
        }

        try
        {
            File f = AccessController.<File>doPrivileged(new PrivilegedAction<File>()
            {
                public File run()
                {
                    return new File ("test.txt");
                }
            });

            if ( ! f.exists())
            {
                f.createNewFile();
            }
        }
        catch (AccessControlException e)
        {
            add (new JLabel ("Access: " + e.getMessage()));
        }
        catch (IOException e)
        {
            add ( new JLabel ("IO Exception: " + e.getMessage()));
        }
    }
} 
```

这是抛出的最后一个异常。请注意，我做的第一件事是检查权限。该检查不会失败。

Applet 是自签名的，但这只是暂时的。***如果小程序失败，我不想花数百美元购买证书***。

当我使用*appletviewer*运行应用程序时，代码可以工作。没关系，但我需要知道当我购买真正的证书时它会起作用。

HTML 代码：

```
<applet code="DocumentApplet" archive="applet.jar" width="300" height="200">
</applet> 
```

环境：Windows7 + JDK 1.7.0_05

PS：最近两天我还阅读了 Stackoverflow 和 Google 搜索。我坚信我已经做了我应该做的一切......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T19:41:43.257

我不知道这是什么原因，但我设法通过在文件名前加上以下前缀成功写入文件：

```
System.getProperty("java.io.tmpdir") 
```

或者

```
System.getProperty("user.home") 
```

这是一个疯狂的镜头，因为由于错误消息告诉我“访问被拒绝”，我认为这是因为安全问题。

所以对于所有其他可能有同样问题的人：

*   请勿将文件写入提供的两个目录之外的任何其他目录。请记住，Windows 通常不允许将文件写入 C:\，即使对于使用 Windows 资源管理器的用户也是如此。

# c++ - 传递成员函数指针

> ID：11298388
> 
> 赞同：0
> 
> 时间：2012-07-02T17:30:49.993
> 
> 标签：c++, function-pointers

我的情况如下，我有两个不同的二等分函数，它们将在我的代码中的某个时刻被调用。基本上，一些函数调用 Bisection2 并且该函数调用传递的函数或将函数指针传递给 Bisection 函数。

在标题中我有

```
std::vector<double> F();
double F1(double m1, double m2);
double F2(double m1, double m2);
typedef double (MyClass::*MyClassFn)(double,double);
double Bisection(MyClassFn fEval,double min, double max,std::vector<double> args);
bool Bisection2(MyClassFn fEval1,MyClassFn fEval2,double xmin, double xmax, double ymin, double ymax,double *ax, double *ay,std::vector<double> args); 
```

我的二分函数看起来像这样。我没有包含所有代码，因为它没有必要。

```
double MyClass::F1(double m1, double m2) {
    m_m1 = m1;
    m_m2 = m2;
    F();
    return m_my;
}

double MyClass::F2(double m1, double m2) {
    m_m1 = m1;
    m_m2 = m2;
    F();
    return m_mx;
}
double MyClass::Bisection(MyClass fEval,double min, double max,std::vector<double> args)
{
    // Setting a lot of stuff here, including auxiliary and leftvalue...

    MyClass *pObj = new MyClass(-1);

    leftvalue = pObj->*fEval(auxiliary, left);
    ightvalue = pObj->*fEval(auxiliary, right);

    // Comparing and setting values here etc.
}
bool MyClass::Bisection2(MyClassFn fEval1,MyClassFn fEval2,double xmin, double xmax, double ymin, double ymax,double *ax, double *ay,std::vector<double> args)
{

    // Setting some values here but these have nothing to do with the problem.
    double yl;
    double leftvalue, rightvalue, middlevalue;

    MyClass *pObj = new MyClass(-1);

    // Setting some values here but these have nothing to do with the problem.
    std::vector <double> arg;
    // pushing some values

    yl = Bisection(fEval2,ymin,ymax,arg); // Here is the first way how I need to pass fEval2 to Bisection function.
    arg.clear();

    if(isnan(yl))
    {
        return M_NAN;
    }
    leftvalue = pObj->fEval1(xl, yl); // And here is the second way how I need to use fEval1.

//.....
} 
```

然后我基本上有一个函数调用

`二等分2(F1,F2, m_m2,0.0, 0.0, m_max2, &m_mu1, &m_mu2,args);

Bisection2(...) 调用目前可能不正确，因为自从上次工作以来我已经更改了很多函数。上次我基本上直接在函数内部调用 F1 和 F2 函数指针而不是 fEval，但我很确定这是不正确的方式，毕竟我什至认为它似乎以某种方式工作。

现在 leftvalue = pObj->*fEval(auxiliary, left); 导致编译错误：

```
error: must use ‘.*’ or ‘->*’ to call pointer-to-member function in ‘fEval (...)’, e.g. ‘(... ->* fEval) (...)’ 
```

我试图从这里查看帮助[http://www.parashift.com/c++-faq-lite/pointers-to-members.html#faq-33.2](http://www.parashift.com/c++-faq-lite/pointers-to-members.html#faq-33.2) 并且还检查了这些论坛中可能解决的不同问题，但仍然可以'不知道我做错了什么。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T17:35:54.517

正如错误消息所说，您需要括号。这是因为函数调用的优先级高于`->*`运算符：

```
leftvalue = (pObj->*fEval)(auxilary, left);
            ^            ^ 
```

此外，您几乎肯定不应该`new`在这里使用；您可以使用自动存储修复内存泄漏：

```
MyClass obj(-1);
leftvalue = (obj.*fEval)(auxiliary, left); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T17:43:23.453

这只是一个优先事项：与其做`pObj->*fEval(aux, left)`，不如做`(pObj->*fEval)(aux, left)`

# c++ - C++ 套接字服务器到 Flash/Adobe AIR？

> ID：11298390
> 
> 赞同：0
> 
> 时间：2012-07-02T17:30:58.630
> 
> 标签：c++, actionscript-3, air, augmented-reality, socketserver

我正在使用 AIR 使用基准标记跟踪来做一些增强现实。我正在使用 FLARToolkit，它工作正常，除了在某些照明条件下帧速率下降到荒谬的低点。这是因为 Flash 仅使用 CPU 进行处理，并且它在每一帧都应用过滤器、调整阈值并分析像素以找到标记模式。如果没有任何硬件加速，它会变得非常慢。

我做了一些搜索，看起来最快和最稳定的跟踪库是 Studierstube ( [http://handheldar.icg.tugraz.at/stbtracker.php](http://handheldar.icg.tugraz.at/stbtracker.php)和[http://studierstube.icg.tugraz.at/download.php](http://studierstube.icg.tugraz.at/download.php) ) . 不幸的是，我不是 C++ 开发人员。但是使用这个跟踪器似乎跟踪速度非常快（特别是因为它不是像 Flash 那样的所有 CPU 处理）。

所以我的计划是构建（或者更确切地说是让某人构建）一个利用这个跟踪器的小型 C++ 程序，然后将每帧的标记位置数据（只需要 30 FPS）发送到我的 Flash 客户端应用程序以显示视频和一些增强的现实经历。我相信这将通过套接字服务器或其他方式完成？对于一个体面的 C++ 开发人员来说，这可能而且相当容易吗？我会问他/她，但我正在寻找这样的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T05:16:44.150

这个链接会有帮助吗？

[http://www.adobe.com/devnet/air/flex/quickstart/articles/interacting_with_native_process.html](http://www.adobe.com/devnet/air/flex/quickstart/articles/interacting_with_native_process.html)

正如这里的一些人所说，它将使用nativeprocess完成......

# opengl - 当片段输出为 vec3 时，glBlitFramebuffer() 呈现空屏幕

> ID：11298391
> 
> 赞同：0
> 
> 时间：2012-07-02T17:31:05.170
> 
> 标签：opengl, fbo, blit

我正在使用 OpenGL 4.0，以前使用的是 3.3 我有一个带有 3 个输出的片段着色器 - 每个都是 vec3。我正在将这些输出写入一些 FBO，然后尝试使用 glBlitFramebuffer() 方法测试内容。我得到的是空的屏幕。现在，我发现将输出设置为 vec4 类型可以正常工作。我不明白为什么！我的 FBO 纹理设置为 RGB32F，因此它们应该能够接受来自片段的 vec3。这是我的 FBO 设置（这是 Java LWJGL 包装器，但在这里没关系）：

```
 _fbo = glGenFramebuffers();
    glBindFramebuffer(GL_DRAW_FRAMEBUFFER, _fbo);

    glGenTextures(m_textures);
    _depthTexture = glGenTextures();

   for (int i = 0; i < GBUFFER_NUM_TEXTURES; i++) {

        glBindTexture(GL_TEXTURE_2D, m_textures.get(i));//
        glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB32F, width, height, 0, GL_RGB, GL_FLOAT, (ByteBuffer) null);
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);

        glFramebufferTexture2D(GL_DRAW_FRAMEBUFFER, GL_COLOR_ATTACHMENT0+i , GL_TEXTURE_2D,m_textures.get(i), 0);//

    }

    // depth
    glBindTexture(GL_TEXTURE_2D, _depthTexture);
    glTexImage2D(GL_TEXTURE_2D, 0, GL_DEPTH_COMPONENT32F, width, height, 0, GL_DEPTH_COMPONENT, GL_FLOAT, (ByteBuffer) null);
    glFramebufferTexture2D(GL_DRAW_FRAMEBUFFER, GL_DEPTH_ATTACHMENT, GL_TEXTURE_2D, _depthTexture, 0);

    DrawBuffers = BufferUtils.createIntBuffer(GBUFFER_NUM_TEXTURES);

      DrawBuffers.put(0, GL_COLOR_ATTACHMENT0);
      DrawBuffers.put(1, GL_COLOR_ATTACHMENT1);
      DrawBuffers.put(2, GL_COLOR_ATTACHMENT2);

     glDrawBuffers(DrawBuffers); 
```

# django - django 模型自动字段的初始值

> ID：11298392
> 
> 赞同：3
> 
> 时间：2012-07-02T17:31:11.007
> 
> 标签：django, django-models, auto-increment

我正在 django 中创建一个应用程序，该应用程序最终将填充其前身的数据。我想让某些模型在 10000 开始他们的自动增量计数器，以提前区分这些数据并保持 pk 会计一致。我怎样才能在模型中做到这一点？AutoField 似乎没有采用让我这样做的参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T18:02:11.703

这不是关于 Django 的问题。AutoField 只是底层数据库的 autoincrement 属性的表示，Django 不控制它。根据您的数据库后端，您可能能够重置自动增量起始值：查看您的数据库文档以获取详细信息。

# eclipse - 如何在 Mac 上安装 FlashBuilder 4.6 Eclipse 插件？

> ID：11298394
> 
> 赞同：1
> 
> 时间：2012-07-02T17:31:14.243
> 
> 标签：eclipse, apache-flex, eclipse-plugin, adobe, flash-builder

**问题**

我们中的一些人在运行 Mac OS X Snow Leopard 或 Lion 并安装 FlashBuilder 4.6 eclipse 插件时遇到了插件根本不显示在 Eclipse 中的问题。安装会在 /dropins 目录下添加一个名为**fb-4_6-plugin-encoded.link**的文件，该文件应该告诉 Eclipse Adob​​e FlashBuilder 的安装位置。

我们遇到的场景如下：

*   插件已注册，但未显示。运行 Eclipse 并`-consoleLog`显示没有错误。
*   使用 -consoleLog 开关运行的 Eclipse 说**fb-4_6-plugin-encoded.link**文件不可访问。对文件执行`chmod 777`操作可解决问题并注册插件。

以下是FlashBuilder 附带的**README中的注释：**

* * *

> Flash Builder 4.6 支持作为插件安装到现有的 Eclipse 实例。
> 
> 为此：
> 
> 1.  如上所述完成安装过程。
> 2.  导航到已安装的 Flash Builder 安装位置并打开实用程序文件夹。
> 3.  运行可执行的 Adob​​e Flash Builder 4.6 Plug-in Utility.app。
> 4.  选择语言并单击确定。
> 5.  如果出现提示，请选择 Flash Builder 安装位置。
> 6.  选择要插入 Flash Builder 4.6 的 eclipse 文件夹，然后单击 Next。（注意：您的 Eclipse 副本必须是 3.6/3.6.1/3.6.2/3.7 版本，32 位 Cocoa，包含一个名为“dropins”的文件夹）。
> 7.  查看安装前摘要并单击安装。
> 8.  安装后，建议您编辑 Eclipse 实例的 eclipse.ini 文件，使其包含以下设置： -vmargs -Xms256m -Xmx512m -XX:MaxPermSize=256m -XX:PermSize=64m

* * *

**问题**

是否可以执行任何 Eclipse 魔法来进一步调查该问题？有没有办法手动注册 FlashBuilder 插件（或者一般是 dropins 样式的插件）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T05:25:07.843

我遇到了同样的问题。

我执行了。

```
/Applications/eclipse/eclipse -consoleLog 
```

错误是这样发生的：

> 1 java.io.FileNotFoundException: /Applications/eclipse/dropins/fb-4_6-plugin-encoded.link (Permission denied)
> 2 在 java.io.FileInputStream.open(Native Method)
> 3 在 java.io.FileInputStream.(FileInputStream .java:120)
> 4 在 org.eclipse.equinox.internal.p2.reconciler.dropins.DropinsRepositoryListener.getLinkedRep ository(DropinsRepositoryListener.java:133)

为了解决问题，我做了两个命令：

```
chown YOUR_LOGIN_ACCOUNT fb-4_6-plugin-encoded.link  
chmod 755 fb-4_6-plugin-encoded.link 
```

插件出现了。

# google-app-engine - Google 应用引擎 100 个 URLMap 条目限制

> ID：11298401
> 
> 赞同：0
> 
> 时间：2012-07-02T17:31:40.573
> 
> 标签：google-app-engine, yaml

我一直在使用谷歌应用引擎来构建我的网站，并且遇到了关于 URLMap 最大数量的问题（我有 101 个 URL，但限制是 100）。这是错误消息：

```
Fatal error when loading application configuration:
Invalid object:
Found more than 100 URLMap entries in application configuration
  in "\AppPest\app.yaml", line 269, column 28 
```

我试图更改`MAX_URL_MAPS = 1000`文件 appinfo.py 中的设置，但它不起作用。谁能给我一些建议？

# 编辑：

另一个问题是我的一些 URL 是相似的，比如 a_input.html、b_input.html、c_input.html。有没有办法简化它以减少 URL 的数量？这是我的 yaml 文件的示例

```
#a
- url: /a_input.html
  script: a/a_input.py

#b
- url: /b_input.html
  script: b/b_input.py

#c
- url: /c_input.html
  script: c/c_input.py 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T21:46:35.303

解决方案将取决于您使用的语言。如果您使用的是 python 2.7，您可以执行以下操作：

1) 使用正则表达式来定义 url，请参阅[此文档](https://developers.google.com/appengine/docs/python/config/appconfig#Script_Handlers)了解更多详细信息

```
handlers:
- url: /(.*?)_input.html
  script: /input/\1.app 
```

2）将一组url指向同一个应用程序，让应用程序处理不同的请求。

```
handlers:
- url: /(.*?)_input.html
  script: /input/input.app

app = webapp2.WSGIApplication([('/a_input.html', AInputPage), ('/b_input.html', BInputPage)]) 
```

根据您提供的信息，我无法判断 a_input.html、b_html 是否是静态的。但如果它们是静态的，你也可以这样做：

3) 使用也接受正则表达式的[静态文件处理程序](https://developers.google.com/appengine/docs/python/config/appconfig#Static_File_Handlers)引用它们。

```
- url: /input
  static_dir: static/input 
```

有关更多详细信息，请参阅[问题 1444 ，特别是与 java 相关的。](http://code.google.com/p/googleappengine/issues/detail?id=1444)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-07T11:31:56.047

我在使用 Java SDK 时遇到了同样的问题。我从欢迎文件列表中删除了 index.html。现在我的入口点是 index.jsp 并重定向到我的 index.html 页面。

在 web.xml 中：

```
<welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
</welcome-file-list> 
```

在 appengine-web.xml 中：

```
<static-files>
    <include path="/fonts/**" />
    <include path="/app/fonts/**" />
    <include path="/**.html" />
    <include path="/**.js" />
    <include path="/**.css" />
    <include path="/**.ico" />
    <include path="/**.png" />
    <include path="/**.jpg" />
    <include path="/**.jpeg" />
    <include path="/**.gif" />
</static-files> 
```

# c# - 连接已重置 ASP.NET

> ID：11298404
> 
> 赞同：6
> 
> 时间：2012-07-02T17:31:47.263
> 
> 标签：c#, asp.net, timeout

我有一些代码从 SQL DB 中提取数据，然后遍历记录以生成一个字符串，最终将其写入文本文件。

代码在我的本地上运行良好，来自 VS，但在实时服务器上，大约一分半钟后，我收到“未收到数据”错误（chrome）。代码在循环数据表的中间停止。托管支持说“连接已重置”错误被抛出。

我不确定这是超时问题还是什么。我在 web.config 中设置了 executionTimeout（使用 debug = false），但它似乎没有帮助。我还检查了 Server.ScriptTimeout 属性，并且它确实与 web.config 中设置的 executionTimeout 值匹配。此外，超时通常会给出“页面不可用”消息。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T17:43:05.880

> 大约一分半钟后

有你的问题。这是一个网络应用程序？对于 Web 应用程序响应请求来说，一分半钟是*很长的时间。*足够长的时间，它不值得参与各种诡计来使它成为一种工作。

您将希望卸载此过程，使其与 Web 应用程序本身更加异步。Web 应用程序的本质是它们应该接收请求并及时响应。您在这里拥有的是一个长期运行的过程，无法及时响应。Web 应用程序可以促进与数据的交互，但不应直接在请求/响应中直接处理其处理。

Web 应用程序如何与流程交互？它只是启动它，还是为启动过程提供信息？我建议该过程本身由 Windows 服务或控制台应用程序之类的东西处理。与 Web 应用程序分离得越多越好。现在，由于我对过程本身一无所知，我正在对其行为做出一些假设......

Web 应用程序可以接收启动流程的请求以及流程所需的任何信息。它可以将其与状态值（待处理、排队等）一起存储在数据库中，然后（及时）响应用户已收到请求并且进程已排队。Web 应用程序可以有一个检查状态的页面，以便用户可以看到进程是如何进行的（如果它已启动，它经过了多少条记录等）。

离线应用程序（Windows 服务等）只会监视该数据库以查找要处理的新排队数据。当它看到它时，它会更新状态（运行、处理等）并通过更新该数据在此过程中提供任何相关反馈（处理的记录数等）。因此，离线应用程序和 Web 应用程序都在与相同的数据进行交互，但不会以阻塞 Web 应用程序的线程并阻止对用户的响应的方式进行交互。

当该过程完成时，再次更新状态。Web 应用程序可以显示它已完成并提供下载结果的链接。离线过程甚至可以在完成后向用户发送电子邮件，或者 Web 应用程序可以具有某种通知系统（我正在描绘 Facebook 中的小通知图标），它会提醒用户注意新活动。

这样线程就不会被阻塞，用户可以继续与应用程序交互（如果有任何可以交互的东西）等等。而且你还可以获得其他额外的好处。例如，过程的结果因此保存在数据库中并自动进行历史跟踪。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T18:09:48.037

听起来是浏览器超时等待响应，而不是在服务器上。您无法控制浏览器为此设置的内容。您可以做的是向浏览器发送某种响应，以便它知道您仍然在附近并且没有以某种方式崩溃。

为此，您不能等到完成整个字符串的构建。您需要重新考虑您的代码，以便将每个添加内容写入输出流，而不是附加到字符串。这具有一个额外的优势，即是一种更有效的方式来创建您的文本文件。为了使浏览器保持活动状态，您可以写出任何内容，只要有一些数据返回供浏览器读取。Html 注释可以解决这个问题。您还需要定期刷新您的响应流，这样您的数据就不会被缓冲在您的 Web 服务器上。否则你可能仍然超时。

当然，这里真正的解决方案是重新考虑您的设计，这样您的操作就不会首先花费 90 秒以上。但在你能做到这一点之前，希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T17:38:57.393

听起来确实像超时，您能否尝试通过视图返回信息，这肯定会加快速度。（如果可能的话）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-17T20:49:39.850

当我遇到此错误时，我可以通过添加 Web.config 文件来解决它：

```
<system.web>
    <httpRuntime executionTimeout="600" maxRequestLength="51200"  />
</system.web> 
```

# c++ - 编译 Qt 项目时出现错误“未声明布局”

> ID：11298406
> 
> 赞同：0
> 
> 时间：2012-07-02T17:31:53.980
> 
> 标签：c++, qt, layout, qmake

我有这个布局的问题。我在 .cpp 文件中编写了这个示例：

```
#include <QApplication>
#include <QHBoxLayout>
#include <QSlider>
#include <QSpinBox>

int main(int argc, char *argv[])
{
  QApplication app(argc, argv);
  QWidget *window = new QWidget;
  window -> setWindowTitle("Enter your age please:");
  QSpinBox *spinBox = new QSpinBox;

  layout -> addWidget(spinBox);
  window -> show();
  return app.exec();
} 
```

我用这些命令编译：

```
qmake -project
qmake
make 
```

我收到此错误：

```
age.cpp: In function ‘int main(int, char**)’:
age.cpp:13:3: error: ‘layout’ was not declared in this scope
make: *** [age.o] Error 1 
```

我已经搜索过这个错误，但找不到任何解决方案。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T17:37:58.963

它显然没有在您的源代码中声明。您应该首先声明一个 QGridLayout 变量，例如，如下所示：

```
QGridLayout * layout = new QGridLayout; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T17:39:06.083

你还没有声明布局。你需要这样的东西

```
 // add this
  QLayout *layout = new QHBoxLayout;
  window->setLayout(layout); 
```

# php - 使用 PEAR 发送带有附件的邮件时出错

> ID：11298407
> 
> 赞同：0
> 
> 时间：2012-07-02T17:31:56.077
> 
> 标签：php, email, pear, attachment

尝试使用 PHP 的 PEAR Mail 扩展程序发送带有附件的电子邮件时，我的页面继续出错（错误 324 - Chrome）。虽然页面错误已经出现 - 我确实收到了大约 800 封电子邮件中的一封。这是我正在使用的：

```
function email_statements($type) {
switch($type) {
    // Determine the type of statement to be e-mailed
    case 'monthly':
        // Array holding all unique AP e-mail addresses
        $ap_email_addresses = array();
        include('../path/to/db/connection/params.php');
        // Grab the unique AP e-mail address set to receive statements
        $stmt = $mysqli->prepare("SELECT email FROM statements GROUP BY email ORDER BY email ASC");
        $stmt->execute();
        $stmt->bind_result($ap_email_address);
        // Add unique e-mail address to AP E-mail Addresses array
        while($row = $stmt->fetch()) $ap_email_addresses[] = $ap_email_address;
        $stmt->close();
        $mysqli->close();
        // Verify we grabbed the e-mail addresses
        if(count($ap_email_addresses) == 0) {
            // Exit and return error code if unable to grab e-mail addresses
            $return_message = 1;
            exit;
        }
        // E-mail addresses grabbed - proceed
        else {
            // PDF formatted date
            date_default_timezone_set('America/New_York');
            $formatted_date = date('m_d_Y');
            // Now we have the unique e-mail addresses - associate those with the account numbers
            include('../path/to/db/connection/params.php');
            foreach($ap_email_addresses as $email_address) {
                $file_names = array();
                $stmt = $mysqli->prepare("SELECT customer_number FROM statements WHERE email = ?");
                $stmt->bind_param("s", $email_address);
                $stmt->execute();
                $stmt->bind_result($ap_account_number);
                // Constructs the name of the statement (PDF) file to be sent
                while($output = $stmt->fetch()) $file_names[] = $ap_account_number . '_' . $formatted_date . '.pdf';
                // Send e-mails
                include('Mail.php');
                include('Mail/mime.php');
                // Include SMTP authentication parameters
                include('../path/to/email/info.php');
                // Set the e-mail recipients
                $recipients = 'example@example.com';
                // Set the e-mail subject
                $subject = 'Monthly Account Statement';
                // Create the e-mail body
                $html = 
                '<html>
                    <body>
                        <p>Test E-mail</p>
                    </body>
                </html>';
                // Construct the message headers
                $headers = array(
                    'From'          => $from,
                    'Subject'       => $subject,
                    'Content-Type'  => 'text/html; charset=UTF-8',
                    'MIME-Version'  => '1.0'
                );
                $mimeparams = array();
                $mimeparams['text_encoding'] = '8bit';
                $mimeparams['text_charset'] = 'UTF-8'; 
                $mimeparams['html_charset'] = 'UTF-8'; 
                $mimeparams['head_charset'] = 'UTF-8';
                // Create a new instance
                $mime = new Mail_mime();
                // Specify the e-mail body
                $mime->setHTMLBody($html);
                // Attach the statements (PDF)
                foreach($file_names as $attached_file) {
                    $file = '../path/to/the/pdf/file/' . $attached_file;
                    $file_name = $attached_file;
                    $content_type = "Application/pdf";
                    $mime->addAttachment ($file, $content_type, $file_name, 1);
                }
                // Create the body
                $body = $mime->get($mimeparams);
                // Add the headers
                $headers = $mime->headers($headers);
                // Create SMTP connect array to be passed
                $smtp = Mail::factory('smtp', array ('host' => $host, 'port' => $port, 'auth' => true, 'username' => $username, 'password' => $password));
                // Send the message
                $mail = $smtp->send($recipients, $headers, $body);
                if(PEAR::isError($mail)) echo 'Error';
                else echo 'Sent';
                // Close this account and cycle through the rest
                $stmt->close();
            }
            $mysqli->close();
        }
        break;
} 
```

}

现在我想也许我没有给脚本足够的时间来执行 - 所以我将它设置得非常高`set_time_limit(99999999)`以确保它有足够的时间，尽管它通常会在 10-15 秒内超时。所以基本上它是这样工作的，我有一个内部数据库来存储客户帐号和电子邮件地址。帐户可以有相同的电子邮件地址（它被发送到他们公司的 AP 部门） - 也就是一个电子邮件地址接收多个分支机构的报表。从他们的每个语句中已经构建了格式为 ACCOUNTNUMBER_MM_DD_YYYY.pdf。

所以我只是想在正文中添加一条短消息，并附上月度报表。同样，不知道为什么它会失败，即使脚本停止，我确实收到了一封电子邮件（我现在将它们全部发送给自己只是为了测试）。谁能看到我可能有问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T18:38:03.103

我发现了这个问题。自 PHP 5.0+ 起，您不能拥有同一个包含文件的多个实例 - 即 Mail.php 在循环时被包含在内。一旦它被移出循环，问题就解决了。

# php - 为什么这段代码在回显之前返回换行符？

> ID：11298415
> 
> 赞同：0
> 
> 时间：2012-07-02T17:32:32.833
> 
> 标签：php, line-breaks

所以我有这个我正在使用的登录 php 脚本，它在一个服务器上运行良好（返回“成功”||“无效登录”），然后另一个服务器中断，因为它返回一个换行符，然后是“成功”或“登录无效”

我的猜测是 php.ini 设置。我只是不确定是哪一个。

```
<?php
include("../config.php");
include("../connect.php");

$adminCheck = mysql_query("SELECT * FROM admins WHERE username = '" . mysql_real_escape_string($_POST['username']) . "' AND password = '" .  mysql_real_escape_string($_POST['password']) . "'");
if (mysql_num_rows($adminCheck) == 1)
{
    $result = mysql_fetch_array($adminCheck);
    $_SESSION['user']['level']    = "admin";
    $_SESSION['user']['userid']   = $result['id'];
    $_SESSION['user']['username'] = $result['username'];
    echo "success"; 
}
else
{
    $clientCheck = mysql_query("SELECT * FROM clients WHERE username = '" . mysql_real_escape_string($_POST['username']) . "' AND password = '" .  mysql_real_escape_string($_POST['password']) . "'");
    if (mysql_num_rows($clientCheck) == 1)
    {
        $result = mysql_fetch_array($clientCheck);
        $_SESSION['user']['level']      = "client";
        $_SESSION['user']['userid']     = $result['id'];
        $_SESSION['user']['username']   = $result['username'];
        $_SESSION['user']['client']     = $result['client'];
        echo "success";
    }
    else
    {
        echo "invalid login";   
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T17:37:58.837

我敢打赌，connect.php 或 config.php 在它们的`<?php ?>`部分之前或之后包含一个 \n（或 \r\n）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T17:35:50.413

这很可能是由于您的包含。您发布的代码没有理由拥有一个，并且我知道没有 php.ini 设置可以添加这样的设置。

发布您的配置并连接（隐藏用户名/密码）以供我们进一步帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T17:39:30.173

显示的代码不表示出现换行符。

附带说明一下，由于您只从布尔值中输出一个值，因此您可以初始化一个变量来保存响应，然后只回显一次响应：

```
<?php
include("../config.php");
include("../connect.php");

$response = 'success';

$adminCheck = mysql_query("SELECT * FROM admins WHERE username = '" . mysql_real_escape_string($_POST['username']) . "' AND password = '" .  mysql_real_escape_string($_POST['password']) . "'");
if (mysql_num_rows($adminCheck) == 1)
{
    $result = mysql_fetch_array($adminCheck);
    $_SESSION['user']['level']    = "admin";
    $_SESSION['user']['userid']   = $result['id'];
    $_SESSION['user']['username'] = $result['username'];
}
else
{
    $clientCheck = mysql_query("SELECT * FROM clients WHERE username = '" . mysql_real_escape_string($_POST['username']) . "' AND password = '" .  mysql_real_escape_string($_POST['password']) . "'");
    if (mysql_num_rows($clientCheck) == 1)
    {
        $result = mysql_fetch_array($clientCheck);
        $_SESSION['user']['level']      = "client";
        $_SESSION['user']['userid']     = $result['id'];
        $_SESSION['user']['username']   = $result['username'];
        $_SESSION['user']['client']     = $result['client'];
    }
    else
    {
        $response = "invalid login";   
    }
}

echo $response;
?> 
```

# bdd - 如何从浏览器运行 specflow 单元测试

> ID：11298417
> 
> 赞同：0
> 
> 时间：2012-07-02T17:32:41.993
> 
> 标签：bdd, specflow

我能够从一个测试项目运行 SpecFlow 场景。现在我希望能够从浏览器运行这些场景。我怎样才能让它发挥作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T20:42:59.773

我认为您需要使用[Selenium](http://seleniumhq.org/)或[Watin](http://watin.org/)之类的东西从 SpecFlow 步骤定义中驱动浏览器。

# c++ - 使用 ffmpeg 库将 .264 转换为 .ts

> ID：11298419
> 
> 赞同：0
> 
> 时间：2012-07-02T17:32:55.710
> 
> 标签：c++, ffmpeg, h.264, libav

我目前正在将 h.264 基本流（带有 postfiix .264 的文件）转换为传输流（带有 postfix .ts 的文件）。我已经使用 ffmpeg 命令行“ffmpeg -i in.264 -an -vcodec copy -f mpegts out.ts”成功完成了转换。

现在我想通过调用 ffmpeg 的库，使用我自己的 C++ 代码来实现这种转换。我已经下载了预编译的 ffmpeg 库（libavcodec、libavformat 等）。我的输入 h.264 是预先录制的文件，而不是实时流，我的输出 .ts 文件也是如此。所以我的问题是我应该调用库中的哪些函数来实现转换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T11:11:46.037

在 Linux 中安装 ffmpeg 后，您将看到一个名为 ffmpeg.c 的示例文件。在此文件中有许多选项可以设置解码参数，例如 opt_audio_codec、opt_video_codec、opt_audio_rate、opt_video_rate、opt_default 等。只需从您的命令中设置必要的参数（-i in.264 -an -vcodec copy -f mpegts out.ts）在从 ffmpeg.c 文件的“main”函数调用“transcode”或“av_encode”函数之前使用适当的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T18:27:12.997

它不像列出库调用那么简单。这是一个旧[教程](http://dranger.com/ffmpeg/)，可帮助您开始阅读输入文件。还有一个名为decode_encoding.c 的示例，它包含在ffmpeg 源代码中。这些应该可以帮助您入门。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T06:58:01.743

您无需在自己的代码中执行此操作。您可以改为以编程方式生成 ffmpeg 进程。`CreateProcess`在 Windows 或`spawn`Linux 上使用。

# java - 适用于 OSX 的 Java 7 的 plugin.jar 在哪里

> ID：11298426
> 
> 赞同：3
> 
> 时间：2012-07-02T17:33:16.033
> 
> 标签：java, maven, applet, jsobject

如果您在 OS X 上使用 Java < 1.7，并且需要使用 JSObject 将小程序连接到 JavaScript，您可以在 $JAVA_HOME/jre/lib/plugin.jar 中找到它。

“plugin.jar”存档似乎不存在于 Java 1.7 for OS X（由 Oracle 打包）。有一个 jfxrt.jar 似乎包含 JSObject，但不幸的是，这意味着您不能使用与几乎任何其他 JDK 上相同的 plugin.jar，包括适用于 Linux 的 7u5，它仍然内置了 plugin.jar .

特别是，如果您尝试将其用作构建工具（例如 Maven）的编译依赖项，这会令人恼火，否则您可以使用[JAVA_HOME-relative path](http://rostislav-matl.blogspot.ca/2011/10/java-applets-building-with-maven.html)来执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T00:08:25.700

Mac OS X 上的 Java 7 不支持 Java 插件。所以，`plugin.jar`根本就不存在。如果您设法在 Oracle 的网站上找到[适用于 Mac OS X 的 Java 7 安装指南](http://docs.oracle.com/javase/7/docs/webnotes/install/mac/mac-jdk.html)（祝您好运），您将看到：

> 请注意，对于 7u4 版本，不支持 Java 插件和 Java Web 启动应用程序。

而且，是的，7u5 已经发布，但它的发行说明说它只是一个错误和安全修复。我假设 Oracle 只是懒得更新他们的安装说明。看起来[7u6 开发者预览版](http://jdk7.java.net/macportpreview/) *确实*包含该插件，所以至少它正在开发中。

该`jfxrt.jar`文件适用于 Java FX，它包含在 Oracle Java 7 Mac OS X 版本中。当然，Java FX 构建在 Java 小程序之上，旨在通过 Java 插件运行，所以不要问我为什么它会包含在 Oracle 的 Mac OS X Java 7 版本中，而 Java 插件本身却没有。（我猜你可以构建 Java FX 应用程序，只是不能运行它们？）

真正的答案似乎是“暂时不要在 Mac OS X 上使用 Java 7”。这可能是 Oracle 将 Java 6 EOL 延长至 11 月的原因之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T14:52:18.790

Plugin.jar 在 Java 7u6 for OS X 上可用，现在可用。

# postgresql - 在 PostgreSQL 中的表上禁用 DELETE？

> ID：11298431
> 
> 赞同：26
> 
> 时间：2012-07-02T17:33:45.750
> 
> 标签：postgresql, triggers, plpgsql, sql-delete, audit

对于安全敏感的设计，我想`DELETEs`在某些表上禁用。

`DELETE`应该只`deleted`在一行上设置一个标志（然后在视图上可见，应用层将使用该标志）。

据我了解，[规则](http://www.postgresql.org/docs/9.1/static/rules.html)会生成额外的查询 - 因此规则无法抑制原始查询。

如图一个带触发器的玩具示例（尚未测试）：

```
-- data in this table should be 'undeletable'
CREATE table article (
    id serial,
    content text not null,
    deleted boolean default false
)

-- some view that would only show articles, that are NOT deleted
...

-- toy trigger (not tested)
CREATE OR REPLACE FUNCTION suppress_article_delete()
RETURNS TRIGGER AS $sad$
BEGIN
    IF (TG_OP = 'DELETE') THEN
        UPDATE article SELECT id, content, TRUE;
        -- NEW or NULL??
        RETURN NEW;
    END IF;
    RETURN NULL;
END;
$sad$ LANGUAGE plpgsql; 
```

什么是抑制 a 的好方法`DELETE`？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-07-02T18:11:32.863

> 据我了解，规则会生成额外的查询 - 因此规则无法抑制原始查询。

不是真的 - 这可能是一个[`INSTEAD`](http://www.postgresql.org/docs/9.1/static/rules-update.html)规则：

```
 CREATE RULE shoe_del_protect AS ON DELETE TO shoe DO INSTEAD NOTHING; 
```

（手册同一页上的示例）。

另一种方法是`REVOKE`删除相关表的权限并创建用于删除的存储过程......以及更新和插入也可能。

# perl - 如果内容匹配，则替换多行标签内容

> ID：11298432
> 
> 赞同：0
> 
> 时间：2012-07-02T17:33:46.277
> 
> 标签：perl, replace, tags, sed, awk

我对 perl、awk 或 sed 不是很精通，而且我已经在网上搜索了一段时间来解决我的问题，但不是很成功。

我想更换

`<math> ... </math>`

和

`<math>\begin{align} ... \end{align}</math>`

**如果** `...`包含`\\`. 我的问题是标签之间的字符串`<math>`可以跨越多行。我设法用 sed 替换了一行中的标签，但无法让它运行多行。

任何使用 perl、awk 或 sed 的简单解决方案都非常受欢迎。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T17:37:19.567

为每个标签使用单独的表达式，脚本将不受多行的影响：

```
sed -e 's,<math>,&\\begin{align},g' -e 's,</math>,&\\end{align},g' 
```

编辑：多行 awk 版本：

```
awk '/<math>/,/<\/math>/ {
  if (index($0, "<math>")) { 
    a=$0
  } else {
    b = b $0
  }
  if (index($0, "</math>")) {
    if (index(b,"\\\\")) {
      sub("<math>","&\\begin{align}", a)
      sub("</math>","\\end{align}&", b)
    }; 
    print a,b
    a=""
    b=""
  } 
}' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T12:51:07.587

这可能对您有用（GNU sed）：

```
sed ':a;$!{N;ba}
/[\x00\x01\x02]/q1
s/<math>/\x00/g
s/<\/math>/\x01/g
s/\\\\/\x02/g
s/\x00\([^\x01\x02]*\)\x01/<math>\1<\/math>/g
s/\x00/<math>\\begin{align}/g
s/\x01/\\end{align}<\/math>/g
s/\x02/\\\\/g' file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T18:04:43.700

尝试下一个`perl`命令。这个怎么运作？它以 slurp 模式读取内容文件，将其保存在`$f`变量中，然后在单一模式下添加正则表达式（将换行符与 匹配`.`）`\begin{regex}`，`\end{regex}`如果在*数学*标签`\\`之间找到。

 *```
perl -e '
    do { 
        $/ = undef; 
        $f = <> 
    }; 
    $f =~ s#(<math>)(.*\\\\.*)(</math>)#$1\\begin{align}$2\\end{align}$3#s; 
    printf qq|%s|, $f
' infile 
```*

# html - 关于浏览器解析 HTML 和 HTML 表单的概念混淆（句法）

> ID：11298433
> 
> 赞同：1
> 
> 时间：2012-07-02T17:33:46.957
> 
> 标签：html

今天有人试图通过挑战我对 HTML 的一般知识来骚扰和贬低我，因为我才刚开始学习它，所以我从未声称拥有这些知识。她问了我以下两个问题：

问题 1\. 如果我创建了一个 html 页面，其中只有一个字符串，而没有在其中编写任何 html 标记（没有正文、没有 html、没有 doctype），那么为什么浏览器仍然呈现它并将字符串显示为一个段落?

对此，我使用了我的最佳猜测，即浏览器仍然设法将其显示为一个段落，因为这是它的最佳猜测，并且它通过假设这是作者想要的并因此“放置”这些标签来弥补缺失的标签，即使我们从未手动编写过它。

问题 2\. 在上面的例子中，如果我在 html 的源代码中在不同的行中写了几个字符串，浏览器仍然将它们显示为单行文本。

同样，我使用了我最好的猜测并得出结论，HTML 是一种自由格式的语言，因此它不会关心源代码中有多少空格或缩进。

然而，她似乎并不高兴。我的回答错了吗？如果是，那么他们是完全错误还是部分错误？这些问题的正确答案是什么？

感谢您阅读并耐心等待描述。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T17:51:56.850

> 问题 1\. 如果我创建了一个 html 页面，其中只有一个字符串，而没有在其中编写任何 html 标记（没有正文、没有 html、没有 doctype），那么为什么浏览器仍然呈现它并将字符串显示为一个段落?
> 
> 对此，我使用了我的最佳猜测，即浏览器仍然设法将其显示为一个段落，因为这是它的最佳猜测，并且它通过假设这是作者想要的并因此“放置”这些标签来弥补缺失的标签，即使我们从未手动编写过它。

由于在这两种情况下都没有使用 ，因此[在 Initial Insertion Mode](http://www.whatwg.org/specs/web-apps/current-work/multipage/tree-construction.html#the-initial-insertion-mode)`<!DOCTYPE ...>`的最后一步中找不到它，因此整个文档都以[Quirks Mode](http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#concept-document-quirks)呈现。

虽然浏览器（至少 Firefox 和 Chrome）不会将其*解析*为段落，但默认情况下，它们*会* **呈现与****Quirks 模式**中的段落相同的简单字符串。这是因为“当 Document 处于 quirks 模式时，body 元素顶部或底部的 HTML 元素的垂直边距预计会折叠为零”（[来源](http://www.whatwg.org/specs/web-apps/current-work/multipage/rendering.html#the-page)，更多关于[折叠边距](http://www.w3.org/TR/CSS2/box.html#collapsing-margins)`margin-top`） ，所以有效`body`消耗`margin-top`. `p`由于简单字符串没有边距，因此没有任何反应。最终结果是文本段落和文本本身都显示相同。

[这就是您的浏览器处理简单字符串的方式](http://software.hixie.ch/utilities/js/live-dom-viewer/?Test)。特别注意**DOM View**，它显示了文档的最终结构。为了进行比较，请查看[段落的外观](http://software.hixie.ch/utilities/js/live-dom-viewer/?%3Cp%3ETest)。虽然它们在渲染中可能*看起来*相同，但结构*并不*相同。

现在，为了说明我关于折叠边距的观点，用 a 包裹内容（文本或段落）`div`以`border`查看未折叠边距。[这是您的浏览器处理纯文本的](http://software.hixie.ch/utilities/js/live-dom-viewer/?%3Cdiv%20style%3D%22border%3A1px%20solid%20red%3B%22%3ETest)方式，而[这也是您的浏览器处理段落的方式](http://software.hixie.ch/utilities/js/live-dom-viewer/?%3Cdiv%20style%3D%22border%3A1px%20solid%20red%3B%22%3E%3Cp%3ETest)。

但是，如果`<!DOCTYPE ...>`包含（以防止浏览器进入 Quirks 模式），[纯文本文档](http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E%0ATest)将*不会*[与带有段落](http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E%0A%3Cp%3ETest)的文档显示相同（元素`margin-top`的`p`不会折叠到元素的`margin-top`中`body`）。

> 问题 2\. 在上面的例子中，如果我在 html 的源代码的不同行中写了几个字符串，浏览器仍然将它们显示为单行文本。
> 
> 同样，我使用了我最好的猜测并得出结论，HTML 是一种自由格式的语言，因此它不会关心源代码中有多少空格或缩进。

HTML 将所有空格（除非[`white-space`](https://developer.mozilla.org/en/CSS/white-space)设置为 以外的其他`normal`内容）视为单个空格（折叠）。因此，[`test\n\ntest`](http://software.hixie.ch/utilities/js/live-dom-viewer/?Test%0A%0ATest)相当于[`test test`](http://software.hixie.ch/utilities/js/live-dom-viewer/?Test%20Test)。

> 然而，她似乎并不高兴。我的回答错了吗？如果是，那么他们是完全错误还是部分错误？这些问题的正确答案是什么？

您的结论有些正确，但不能很好地处理边缘情况（例如，如果浏览器更改了`p`元素的字体/颜色/等）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T17:55:44.347

HTML 和 BODY 标签是可选的，参见[http://www.w3.org/TR/REC-html40/struct/global.html#h-7.3](http://www.w3.org/TR/REC-html40/struct/global.html#h-7.3)。

将它们从文档中删除会被视为 text/html 类型，这会导致空白区域折叠成一个空白；这就是为什么源代码中不同行中的单词会在一行后面呈现的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T17:51:34.437

Q1：

我不认为浏览器会将单个字符串显示为段落。正如您所说，这样做的原因是，单独行上的任何后续字符串都呈现在同一块中。您可以使用 chrome 网络检查器 (CTRL+SHIFT+I) 进行检查。任何不是标签或脚本/样式表（或文档类型）的东西都会被浏览器显示出来。

Q2：

HTML 对换行不敏感。

如果您仍然不满意，请查看规范：http: [//developers.whatwg.org/](http://developers.whatwg.org/)

# android - 从 Android 迁移到 iPhone

> ID：11298434
> 
> 赞同：0
> 
> 时间：2012-07-02T17:33:59.777
> 
> 标签：android, ios, jquery-mobile, cordova

我们使用 PhoneGap 和 Jquery Mobile 开发了一个 Android 应用程序，我们希望它可以在 iPhone 上运行。我想知道如何转换它以及应该使用哪些工具。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T17:36:37.367

获取 Mac，从 App Store 安装 XCode，然后编写代码。如果您的 Android 应用程序主要是用 C/C++ 编写的，您可以在 iOS 上运行该代码而只需很少的更改。但是，如果您使用 Java，则必须在 Objective-C 中重写很多内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T17:37:45.233

大多数人使用 PhoneGap 是因为他们希望能够将他们的应用程序部署到多个操作系统，而不必将其移植到每个平台的本地语言、框架和惯用语。如果这就是您想要做的，只需使用 PhoneGap Build，它可以让您上传您的 HTML、CSS 和 JavaScript，并获取为每个平台量身定制的应用程序。

结果是 Web 应用程序和本机应用程序之间的一种混合，可以降低跨多个平台的维护成本，但可能不会像为每个平台编写自定义本机应用程序那样具有本机感觉。以这种方式使用 PhoneGap 需要在两个方向上进行权衡[。](https://www.google.ca/webhp?q=pros%20cons%20phonegap)

另一种方法是使用 Objective-C、iOS API 和 Xcode 为 iOS 构建本机应用程序。这将为您提供一个可以充分利用 iPhone 平台的原生 iOS 应用程序，但意味着您必须维护两个代码库。如果您想走这条路，我不完全确定您为什么会使用 PhoneGap 而不是 Java 来构建 Android 应用程序。

# c# - 命名空间中不存在来自 WPFToolkit 的控件

> ID：11298435
> 
> 赞同：15
> 
> 时间：2012-07-02T17:34:09.570
> 
> 标签：c#, wpf, .net-3.5

我添加到引用 WPFToolkit.dll 并添加了我的 .xaml 文件以下行：

```
xmlns:toolkit="clr-namespace:Microsoft.Windows.Controls;assembly=WpfToolkit" 
```

在以下行之前：

```
xmlns:toolkit="http://schemas.microsoft.com/wpf/2008/toolkit" 
```

在这两种情况下

```
<toolkit:NumericUpDown Value="10" Increment="1" Maximum="10" Minimum="0" /> 
```

我有错误：

> 错误 1 ​​XML 命名空间“http://schemas.microsoft.com/wpf/2008/toolkit”中不存在标记“NumericUpDown”。第 20 行位置 18\. C:\Users\Diament\Documents\Visual Studio 2008\Projects\MyBasicFlyffKeystroke\MyBasicFlyffKeystroke\Window.xaml 20 18 MyBasicFlyffKeystroke

问题出在哪里？:(

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-12-09T11:05:08.217

我有同样的问题。

如果我*跳过取消阻止步骤并简单地解压缩，则不会加载 xaml 预览窗口，并且 VS 会不断给我“IntegerUpDown 组件在命名空间*[http://schemas.xceed.com/wpf/xaml/toolkit](http://schemas.xceed.com/wpf/xaml/toolkit)中不存在”错误，即使自动完成功能会愉快地列出该命名空间中的所有组件。

但是，如果我先解压缩**zip**文件，然后解压缩，然后在 VS 中引用 dll，则一切正常。

**TL;DR：***完全*按照[安装说明](http://wpftoolkit.codeplex.com/documentation) 进行操作，尤其是首先***解除***对 zip 文件的阻止。

 *** * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-20T17:38:23.077

NumericUpDown 不是[基本 WPF 工具包](http://wpf.codeplex.com/)的一部分，而是[扩展 WPF 工具包的一部分](http://wpftoolkit.codeplex.com/)

使用 IntegerUpDown（或任何[提供的派生类](http://wpftoolkit.codeplex.com/wikipage?title=NumericUpDown-derived%20controls&referringTitle=Documentation)）并确保在您的应用程序中使用适当的 DLL。以下是在您的项目引用扩展 WPF 工具包 DLL ( *Xceed.Wpf.Toolkit.Dll ) 时使用 IntegerUpDown 的示例：*

```
<Window x:Class="WpfApplication4.Window1"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:toolkit="http://schemas.xceed.com/wpf/xaml/toolkit"
        Title="Window1" Height="300" Width="300">
    <Grid>
      <toolkit:IntegerUpDown Value="10" Increment="1" Minimum="0" Maximum="10" />
   </Grid>
</Window> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-02T22:55:53.777

尝试

```
xmlns:toolkit="http://schemas.xceed.com/wpf/xaml/toolkit" 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-04-25T06:28:45.157

我发现了同样的错误。您必须**卸载**当前的安装工具包并**重新安装工具包**，它将解决错误。它不是正确的解决方案，但您可以继续工作。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-10-14T20:11:18.203

[http://wpftoolkit.codeplex.com/documentation](http://wpftoolkit.codeplex.com/documentation)

**安装使用说明**

请注意：扩展的 WPF 工具包依赖于 .NET Framework 4.0。您必须安装 .NET Framework 4.0 才能使用 Toolkit 中的任何功能。

**使用扩展 WPF 工具包二进制文件的说明：**

```
1.Install .NET Framework 4.0\. 
2.Download the ExtendedWPFToolkit_Binaries 
3.Unblock the ZIP file. 1.Right-click ExtendedWPFToolkit_Binaries.zip -> Properties -> Unblock 

4.Unzip the ExtendedWPFToolkit_Binaries.zip 
5.Reference the binaries in your project: 
    1.Reference WPFToolkit.Extended.dll in your project (Xceed.Wpf.DataGrid.dll for the datagrid control) 
    2.Add a using statement ("using Xceed.Wpf.Toolkit;" for most of the controls, "using Xceed.Wpf.DataGrid;" for the datagrid control) to the top of .cs files 
    3.Add a new xmlns (xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit" for most of the controls, xmlns:xcdg="http://schemas.xceed.com/wpf/xaml/datagrid" for the datagrid control) to the top of XAML files 
    4.Remember to use the namespace prefix (in the above example, <xctk: ...> or <xcdg: ...>) in the body of your XAML 
```

**使用 NuGet 安装**

```
1.Install NuGet (can be downloaded for  this link: https://visualstudiogallery.msdn.microsoft.com/27077b70-9dad-4c64-adcf-c7cf6bc9970c). 
2.Open your Visual Studio. 
3.Open your solution/project. 
4.Open Tools menu, select Library Package Manager and select  Package Manager Console 
5.Run the following command Install-Package Extended.Wpf.Toolkit 
    1.Add a using statement ("using Xceed.Wpf.Toolkit;" for most of the controls, "using Xceed.Wpf.DataGrid;" for the datagrid control) to the top of .cs files

    2.Add a new xmlns (xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit" for most of the controls, xmlns:xcdg="http://schemas.xceed.com/wpf/xaml/datagrid" for the datagrid control) to the top of XAML files 
    3.Remember to use the namespace prefix (in the above example, <xctk: ...> or <xcdg: ...>) in the body of your XAML 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-04-23T08:38:01.717

我遵循了@Andrew 的建议（下载、取消阻止、提取、添加），但仍然遇到同样的问题。

相反，通过 NUGET 安装（按照[此处](http://wpftoolkit.codeplex.com/documentation)页面上的说明进行操作）使其无需执行手动步骤即可工作。

去努吉特...

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-02T17:40:41.143

注意：考虑[Extended WPF Toolkit - Numeric Up Down](http://wpftoolkit.codeplex.com/wikipage?title=NumericUpDown)已过时。他们强烈建议使用任何“专业”版本。顺便说一句，这**不应该**生成*Error*，而是*Warning*。

找不到程序集怎么办，请检查您的项目和`Wpf Toolkit`版本的兼容性。**

# jquery - koGrid 清空我们的网格，而不是使用 Asp.Net MVC 3 使用 KnockoutJS 进行更新

> ID：11298437
> 
> 赞同：4
> 
> 时间：2012-07-02T17:34:14.550
> 
> 标签：jquery, asp.net, asp.net-mvc-3, knockout.js

我们正在开发 ASP.Net MVC 3 + knockout-2.1.0，我们正在尝试渲染一个 koGrid，但有一个 Ajax 问题（我们认为）是清空 koGrid 而不是更新它。

在初始状态下，koGrid 的数据源是一个有两行的数组，这是 ViewModel (vm)：

```
var viewModel = function() {
    var self = this;
    self.radioSelectedOptionValue = ko.observable('-1');
    self.AvailableActiveProducts = ko.mapping.fromJS(availableActiveProductsObject);
};
ko.applyBindings(new viewModel()); 
```

AvailableActiveProducts 是网格的数据源。这是html：

```
<div data-bind="koGrid: { data: AvailableActiveProducts }" /> 
```

网格最初渲染得很好：

![IMG](../Images/ecb46ab593d78742298a1ae855405b68.png)

问题从这里开始，当 radioSelectedOptionValue 发生变化时（它与单选按钮控件发生变化），网格应该更新，但它被清空。

![IMG](../Images/1ebd9cfc911794ac328a35565466fd15.png)

我们希望单选按钮通过淘汰订阅函数调用来更新/更改：

```
self.radioSelectedOptionValue.subscribe(function() {
    $.get('/SalesOrderManagement/GetProductsBySelection', { 
        typeCriteria: "g", id: 1, seasonType: "1" }, function(data) {
            self.AvailableActiveProducts(data.AvailableActiveProducts);
        });
    }, this); 
```

在控制器中，响应这个 Ajax 调用的方法是：

```
public JsonResult GetProductsBySelection(string typeCriteria, long id, string seasonType)
{
    var model = _orchestrator.GetProductsByUserCriteria(typeCriteria, id, seasonType);
    return Json(model, JsonRequestBehavior.AllowGet);
} 
```

使用 fiddler 进行调试，json 对象返回（我们期望有 3 行），但调用后网格变为空。

![IMG](../Images/57ff8d1b1d464b2e4b0547347dd6c0b6.png)

**我们的假设是数据如何设置到 observableArray 是问题的一部分。我们如何才能让这个更新正常渲染/工作？**

我们认为我们已经找到其他人遭受同样的问题，但在 KO 列表上没有回应：[https ://groups.google.com/forum/?fromgroups#!topic/knockoutjs/BS4ugQfV14g](https://groups.google.com/forum/?fromgroups#!topic/knockoutjs/BS4ugQfV14g)

这是一个表现相同行为的 jsFiddle：http: [//jsfiddle.net/wabe/H4ZXM/7/](http://jsfiddle.net/wabe/H4ZXM/7/)

**更新：解决了！**

在 Tyrsius 的评论之后，我们注意到网格会在几次单击后刷新。

因此，添加一个 pop 和 push 来强制刷新（每个@Keith）使它一切正常，网格以预期的方式更新。所以javascript更改为：

```
 self.radioSelectedOptionValue.subscribe(function() {
        $.get('/SalesOrderManagement/GetProductsBySelection', { typeCriteria: "gender", id: 1, seasonType: "inseason" }, function(data) {
            self.AvailableActiveProducts(data);
            self.AvailableActiveProducts.push({});
            self.AvailableActiveProducts.pop();
        });

    }, this); 
```

push 和 pop 使最终的 update/koGrid 刷新。这是基思的小提琴：http: [//jsfiddle.net/keith_nicholas/MYYNw/](http://jsfiddle.net/keith_nicholas/MYYNw/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T22:54:52.280

看起来它没有正确更新，如果您单击最上面的列进行排序，则会出现数据....

如果我推送并弹出一个虚拟项目，代码“看起来”可以按您的预期工作

[http://jsfiddle.net/keith_nicholas/MYYNw/](http://jsfiddle.net/keith_nicholas/MYYNw/)

注意，我把映射去掉了，因为你没有映射你的初始数据，要么映射两者，要么都不映射（取决于你是否想观察实际数据元素的变化）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T17:33:38.560

我有这个确切的问题，并通过在 ajax 调用中移动 viewModel 绑定来解决它。

老旧的：

```
 var API_URL = "/api/vendor/";

            window.viewModel = {
                items: ko.observableArray([]),
                item: ko.observableArray([])
            }

            ko.applyBindings(viewModel);

            function getVendors() {
                $.ajax({
                    type: 'GET',
                    url: API_URL,
                    dataType: 'json',
                    success: function (data) {
                        newData = ko.mapping.fromJS(data);
                        viewModel.items(newData);
                    }
                });
            };

            getVendors(); 
```

新热点：

```
 var API_URL = "/api/vendor/";
           $.ajax({
                type: 'GET',
                url: API_URL,
                dataType: 'json',
                success: function (data) {
                    window.viewModel = {
                        items: ko.mapping.fromJS(data),
                        item: ko.observableArray([])
                    }
                    ko.applyBindings(viewModel);
                }
            }); 
```

# php - 致命错误：在非对象 PDO 上调用成员函数 prepare()

> ID：11298438
> 
> 赞同：0
> 
> 时间：2012-07-02T17:34:16.490
> 
> 标签：php, mysql, sql, pdo

我正在尝试将我的 sql 工作移动到 PDO，但它显示以下致命错误：调用 /home/content/58/9508458/html/pa/test 中非对象上的成员函数 prepare()。第 12 行的 php

原始代码

```
<?php
$pdfreq=$_GET['dadi'];
include('config.php');
require('fpdf.php');
$link =mysql_connect($db_host,$username,$password);
mysql_select_db($db_name);

$update = "UPDATE mastertable SET pdfstatus =1 WHERE id_pk = $pdfreq";
mysql_query($update, $link); 
```

替换为

```
<?php
$pdfreq=$_GET['dadi'];
include('config.php');
require('fpdf.php');
$link =mysql_connect($db_host,$username,$password);
mysql_select_db($db_name);

$sql = "UPDATE mastertable SET pdfstatus=?, WHERE id_pk=?";
$q = $link->prepare($sql);
$q->execute(array(1,$pdfreq)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T17:36:42.663

您的`$link`变量不是 PDO 对象。你应该更换：

```
$link = mysql_connect($db_host,$username,$password);
mysql_select_db($db_name); 
```

和：

```
$link = new PDO("mysql:dbname=$db_name;host=$db_host",$username,$password); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T17:47:48.557

您正在使用 MySQL 辅助函数，而不是 PDO 或 MySQLi。

**准备不适用于您正在做的事情**

您需要将语法更改为，注意`i`MySQLi中的尾随

```
<?php
$pdfreq=$_GET['dadi'];
$id = 1;
include('config.php');
require('fpdf.php');
$link = new mysqli($db_host,$username,$password, $db_name);

$sql = "UPDATE mastertable SET pdfstatus=? WHERE id_pk=?";
$q = $link->prepare($sql);

$q->bind_param("is", $id, $pdfreq);
$q->execute(); 
```

由于 MySQL 没有准备方法，因此您的值永远不会设置为 1，并且您将失败`Fatal error: Call to a member function prepare() on a non-object`

如果您想使用[PDO，请参阅 PHP.Net 上的 PDO 文档](http://www.php.net/manual/en/pdo.prepare.php)

# makefile - Clang++ -c 将文件输出到错误的目录

> ID：11298439
> 
> 赞同：0
> 
> 时间：2012-07-02T17:34:17.183
> 
> 标签：makefile, llvm, clang, gnu, llvm-clang

我有这个包含以下步骤的 makefile 目标：

```
...
cd $(GRAPHICS_BUILD_DIR)
clang++ -c -I$(SFML_HEADERS) $(GRAPHICS_DIR)/*.cpp
cd $(BASE_DIR)
... 
```

出于某种原因，Clang 将构建文件输出到`BASE_DIR`，而不是`GRAPHICS_BUILD_DIR`. 一切都编译得很好，当我手动一次执行一行时，它工作正常，`*.o`文件输出到正确的目录中。

为什么不将这些文件放在正确的目录中，我该如何强制它？

我在 ubuntu linux 内核 3.2.0-26 上使用 clang3.1 和当前版本的 GNUMake。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T21:59:29.557

问题在于，在 Make 规则中，每个命令都在自己的子 shell 中执行；从一行到下一行都没有记住任何东西。所以你的第一个命令从 开始`$(BASE_DIR)`，移动到`$(GRAPHICS_BUILD_DIR)`，然后终止。您的第二个命令开始`$(BASE_DIR)`并在那里运行 Clang。

尝试这个：

```
...
cd $(GRAPHICS_BUILD_DIR) ; clang++ -c -I$(SFML_HEADERS) $(GRAPHICS_DIR)/*.cpp
... 
```

# ruby-on-rails - Rails 3 无法从 apache 服务器为生产中的资产提供服务

> ID：11298442
> 
> 赞同：1
> 
> 时间：2012-07-02T17:34:39.933
> 
> 标签：ruby-on-rails, assets, production

使用 Rails 3.2.2 和 ruby​​ 1.9.2，我无法在生产中提供资产。在为 webapps 配置服务器方面没有真正的经验。

我在 applictation.html.erb 中有以下代码，

```
 <a href="/"><img src="/assets/topbar.png" border="0" alt="My LOGO"></a> 
```

我将 topbar.png 放在 app/assets/images/ 中。它在开发模式下按预期工作，当 png 存在时显示，如果我删除 png 则不显示。

它不会出现在生产中。到目前为止，我们已经完成了以下工作。该应用程序确实运行，但它没有显示上述资产。

```
<VirtualHost *:8081>
  ServerName dev.mycompany.com:8081
        DocumentRoot /var/www/vhosts/dev.mycompany.com/webapps/
#        PassengerAppRoot /var/www/vhosts/dev.mycompany.com/webapps/testapp/public
#   PassengerLogLevel 3

        RackBaseURI /myRailsTest
        <Directory /var/www/vhosts/dev.mycompany.com/webapps/myRailsTest>
                AllowOverride all
                Allow from all
                Options -MultiViews
            <IfModule mod_php5.c>
                    php_admin_flag engine on
                    php_admin_flag safe_mode on
             </IfModule>
        </Directory>
</VirtualHost> 
```

我需要做更多的事情来配置 apache 服务器吗？我正在阅读此内容：http: [//guides.rubyonrails.org/asset_pipeline.html](http://guides.rubyonrails.org/asset_pipeline.html)，但发现它对于新手来说非常密集。

我可以尝试什么？我读到的一件事是：“您应该将 app/assets 用于在提供服务之前必须经过一些预处理的文件。在生产中，Rails 默认将这些文件预编译为 public/assets。” 但实际上，我看不出它是为我做的。那是问题吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T17:55:44.010

查看 Rails 指南的这一部分：http: [//guides.rubyonrails.org/asset_pipeline.html#in-production](http://guides.rubyonrails.org/asset_pipeline.html#in-production)

基本上，您有两个选择：

1.  预编译你的资产`bundle exec rake assets:precompile`
2.  现场编译：`config.assets.compile = true`

您应该使用在布局和​​视图`image_tag`中创建`<img>`帮助程序，因为在预编译阶段会从已编译文件的内容生成 MD5，并在将文件写入光盘时插入文件名。

# redirect - 如果有条件基于批量输出？

> ID：11298443
> 
> 赞同：0
> 
> 时间：2012-07-02T17:34:40.833
> 
> 标签：redirect, if-statement, batch-file, for-loop

如果 cmd 窗口输出：“找不到 ref_eng ...”，我想将我的程序重定向到一组特定的命令，我该怎么做？在下面的代码中，包含 For 的第 2 行是 cmd.exe 可以在 !refLogPath 时输出“找不到 ref_eng”的位置！不存在。此时，我想将我的程序重定向到其他地方......

```
<!logPath! (
For /F "tokens=*" %%R in (!refLogPath!) DO (
    if %ERRORLEVEL% NEQ 0 (
        ECHO Check certain lines of code
            )
    set logLine=
        set /p logLine=
    set refLogLine=%%R
    REM Check line by line of log against refLog
    REM assume ALL times have been replaced with: "xx:xx:xx"

    REM if corresponding lines mismatch
    if NOT "!logLine!"=="!refLogLine!" (
        Echo.
        Echo line below is Incorrect:
        set lnCorrect=false
        REM output to command line: can be put into .log/.txt later
        REM output ANY and ALL incorrect line in log file
            ECHO !logLine!
                           )
                       )    
    ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T03:52:44.257

在 for 循环之前检查 refLogPath。

例如：

```
 if !refLogPath!xx == xx (
     REM refLogPath is empty or unset
     goto :SomewhereElse
   ) else (
     if not exist !refLogPath! (
       REM refLogPath is missing
       goto :SomewhereElse
     )
   )
   For /F "tokens=*" %%R in (!refLogPath!) DO (
      ...etc... 
```

# html - 隐藏输入太多会影响页面渲染速度吗？

> ID：11298446
> 
> 赞同：1
> 
> 时间：2012-07-02T17:34:59.340
> 
> 标签：html, asp.net-mvc, asp.net-mvc-3, performance

我现在需要在隐藏字段中保留一些关于我的控件的数据。我正在使用 MVC 3 进行记录。我担心的是我会像穷人的视图那样使用隐藏字段。在这样做时，我觉得我会冒着导致页面渲染缓慢（或更慢）的风险。我正在谈论的一个例子如下。

简而言之，页面上有很多隐藏字段会导致页面运行/渲染缓慢吗？

一行的外观示例：

```
<div>
    <div>1.</div>
    <div>
        Enter the measurements for the bridge legs (record from left to right, top, then bottom):
        (I am one of many rows in this form.)</div>
    <div><input type="text" id="1" name="leg" /><input type="hidden" id="1" name="dataid" value="101" />
        <input type="text" id="2" name="leg" /><input type="hidden" id="2" name="dataid" value="102" />
        <input type="text" id="3" name="leg" /><input type="hidden" id="3" name="dataid" value="103" />
        <input type="text" id="4" name="leg" /><input type="hidden" id="4" name="dataid" value="104" />
        <input type="text" id="5" name="leg" /><input type="hidden" id="5" name="dataid" value="105" />
        <input type="text" id="6" name="leg" /><input type="hidden" id="6" name="dataid" value="106" />
        <input type="text" id="7" name="leg" /><input type="hidden" id="7" name="dataid" value="107" />
        <input type="text" id="8" name="leg" /><input type="hidden" id="8" name="dataid" value="108" />
        <input type="text" id="9" name="leg" /><input type="hidden" id="9" name="dataid" value="109" />
        <input type="text" id="10" name="leg" /><input type="hidden" id="10" name="dataid" value="110" /></div>
    <div><input type="submit" value="Submit" /></div>
</div> 
```

我最终会得到一个有 80 行的页面，每行有多个控件。鉴于这种情况，我是过度担心还是有正当的担忧？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T17:40:26.593

您可以使用可见输入的自定义属性来避免那些额外的隐藏字段

```
<input type="text" id="1" name="leg" data-id="101" /> 
```

使用jquery，你会得到这样的`data-id`属性

```
var id = $('#1').data('id'); 
```

作为旁注，既然您说您有多行，请确保您没有重复输入 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T18:34:12.873

我也强烈建议使用 jQuery-HTML5 `data()`API。

如果这些值是补充数据，您应该使用它。

请参阅我对这个问题的[回答](https://stackoverflow.com/questions/10129613/hidden-text-can-be-selected-in-ie-despite-style-displaynone/10130156#10130156)。

至于将它传递给控制器​​，您可以通过 Ajax 传递它，如果这是您可以尝试的选项。

```
$.ajax({
  url : '/Controller/Action/',
  data : { param1 : 'Hello' }
}); 
```

# qt - 在 QGraphicsView 上使用 OpenGL 着色器

> ID：11298449
> 
> 赞同：2
> 
> 时间：2012-07-02T17:35:08.783
> 
> 标签：qt, opengl, glsl, qgraphicsview

我正在尝试在 QGrapicsView 上使用 OpenGL 着色器。我的显卡是 NVidia GeForce GT 425M。我在带有 NVidia 驱动程序 295.40 的 Ubuntu 12.04 上进行了实验。

我创建了一个包含两个 QGraphicsView 的 QMainWindow，每个图形视图都显示相同的场景。在其中一个图形视图上，我设置了一个 OpenGL 视图端口。OpenGL View Port 是一个 QGLWidget，我在加载顶点和片段着色器程序时已经超载。

看看我的 QMainWindow 构造函数：

```
MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);
    m_scene = new QGraphicsScene(this);
    ui->gvShaded->setScene(m_scene);
    ui->gvUnshaded->setScene(m_scene);
    m_glWidget = new QGLScene();
    ui->gvShaded->setViewport(m_glWidget);
    m_glWidget->updateGL();
    if(m_glWidget->context()->isValid())
    {
        qDebug()<<"GL Context is valid";
    }else
    {
        qWarning()<<"GL Context is not valid";
    }

    qDebug() << "Opengl Version : " << m_glWidget->context()->format().openGLVersionFlags();

    QBrush brush(QLinearGradient(0,0,20,0));
    brush.setColor(Qt::blue);
    QGraphicsRectItem* rect = m_scene->addRect(0,0,20,20,QPen(Qt::black), brush);

    ui->gvShaded->ensureVisible(rect);
    ui->gvUnshaded->ensureVisible(rect);
} 
```

如您所见，我实例化了对象 QGLScene，它是：

```
class QGLScene : public QGLWidget
{
public:
    QGLScene(QWidget* _parent=0);
protected :
    virtual void initializeGL();
}; 
```

我的 GLWidget 构造是：

```
QGLScene::QGLScene(QWidget *_parent)
    :QGLWidget(QGLFormat(QGL::DepthBuffer), _parent)
{
} 
```

initializeGL 的定义是：

```
void QGLScene::initializeGL()
{
    qDebug() << __PRETTY_FUNCTION__;
    QGLShader fragmentShader(QGLShader::Fragment, context(), this);
    QGLShader vertexShader(QGLShader::Vertex, context(), this);
    QGLShaderProgram pgm(context(), this);
    if(vertexShader.compileSourceFile("./vertexShader.glsl"))
    {
        if(fragmentShader.compileSourceFile("./fragmentShader.glsl"))
        {
            pgm.addShader(&fragmentShader);
            pgm.addShader(&vertexShader);
            pgm.link();
            pgm.bind();
            qDebug() << "Shader bien chargé : "<< pgm.log();
        }else
        {
            qDebug() << "Problem when loading fragment shader :";
            qDebug() << fragmentShader.log();
            qDebug() << QString(fragmentShader.sourceCode());
        }
    }else
    {
        qDebug() << "Problem when loading vertex shader :";
        qDebug() << vertexShader.log();
        qDebug() << QString(vertexShader.sourceCode());
    }
} 
```

我的着色器是非常无用的着色器：顶点：

```
 #version 150

uniform mat4 viewMatrix, projMatrix;

in vec4 position;
in vec3 color;

out vec3 Color;

void main()
{
    Color = color;
    gl_Position = projMatrix * viewMatrix * position ;
} 
```

片段：

```
#version 150

in vec3 Color;
out vec4 outputF;

void main()
{
    outputF = vec4(1.0, 0, 0, 1.);
} 
```

所以我尝试将我的着色图形视图设置为一个大红色方块，因为我认为我强制像素为红色（在我的片段着色器中）。

我没有着色器编译错误，但我的两个场景是相同的。当然，程序传递给 initializeGL 函数（我可以阅读**PRETTY_FUNCTION**）。

有人有解释吗？

# javascript - 预计算客户端 Javascript 执行

> ID：11298451
> 
> 赞同：0
> 
> 时间：2012-07-02T17:35:18.190
> 
> 标签：javascript, ajax, phantomjs

假设您要构建一个功能强大的单页客户端应用程序，该应用程序侦听 URL 更改以便在应用程序中导航。

然后假设，当用户（或搜索引擎机器人）通过其 url 加载页面，而不是像往常一样交付静态 javascript 文件并点击 api 时，我们希望预先计算服务器端的所有内容并交付 DOM js 状态。

我想知道是否有现有的工具或技术可以将这种状态执行持久化给客户端。

我知道我可以在 phantom JS 中执行脚本并输出 DOM 元素，但是事件处理程序、控制器和 js 内存状态将无法正确附加。我可以嗅探我们的用户代理，只将预计算的内容发送给机器人，但我担心谷歌会因此而受到惩罚，而且我们也失去了发送所有预计算内容的速度优势。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T18:28:02.123

所以你想在服务器端编译并发送到客户端请求特定 URL 的资源的结果？你的后端是用什么写的？

我们有一个在 Java 的 GAE 上运行的 API。我们的应用程序是单页应用程序，我们使用 HTML5 历史对象，因此我们必须对前端的实际 URL 进行“真实响应”。

为了处理这个问题，我们使用 JSP 在页面中预缓存从服务器加载并发送到客户端的数据。

在前端，我们使用 Backbone，因此我们修改`Backbone.sync`为在页面上本地查找它正在查找的数据的副本，如果不存在，则仅通过 AJAX 调用从服务器请求它。

所以，是的，这几乎是每个网站在你有 ajax 之前所做的。诀窍是编写您的应用程序，以便数据可以在页面中（甚至在 localStorage 中）是本地的，如果不是这样，则可以请求数据。然后确保您的页面是在服务器端“构建”的（因此我们实际上在服务器端的 HTML 元素中填充数据，因此该页面不需要客户端上的 JS）。

如果你去别的地方，数据是动态的，页面不会重新加载。

# windows - 制作通配符目标

> ID：11298455
> 
> 赞同：0
> 
> 时间：2012-07-02T17:35:36.500
> 
> 标签：windows, compilation, makefile

没什么好说的。

```
%.o: %.c
    @echo $< 
```

```
C:\Users\niklas\Desktop>make foo.o
make: *** No rule to create »foo.o«. End. 
```

我希望它打印出来`foo.c`。为什么它不起作用？

*注意：最后一个块的最后一行是从德文翻译成英文的，拼写可能与英文版打印出来的不完全一样。*

* * *

**平台**：Windows 7
**架构**：x86
**制作版本**：gnuwin32 3.81（*2006 年 11 月 25 日*）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T17:39:29.757

`foo.c`存在吗？如果不是，那么 Make 不会考虑这个规则。

# drools - 如何从 drl 文件生成 Excel 工作表

> ID：11298456
> 
> 赞同：1
> 
> 时间：2012-07-02T17:35:40.363
> 
> 标签：drools

我正在寻找drools api来从drl文件生成excel表格，这可能吗？如果是的话，有人可以指点我的API吗？

我在这里先向您的帮助表示感谢。

# wordpress - 如何在wordpress中隐藏自定义字段

> ID：11298458
> 
> 赞同：0
> 
> 时间：2012-07-02T17:35:52.223
> 
> 标签：wordpress, field

我正在我的网站上工作，我正在尝试让自定义字段起作用。我有一个添加了一些自定义字段的页面。当我添加这个 php 代码时

```
<?php the_meta ?> 
```

在我的 single.php 文件中，一个自定义字段“WP-Prosper”会自动显示在我的帖子中，其值如下所示。

```
 WP-Prosper: a:2:{s:12:"remove_thumb";s:0:"";s:11:"video_embed";s:0:"";}
 File Type: .IPA 
```

我没有给这个自定义字段任何价值。如何从我的自定义字段部分中删除它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T17:55:01.610

使用[**删除自定义字段**](http://wordpress.org/extend/plugins/delete-custom-fields/)插件删除不需要的自定义字段。

或者您可以手动将其从`postmeta`WordPress 数据库表中删除。

干杯！！！

**更新**

***从 phpmyadmin 手动删除 postmeta***

**重要提示：在更新之前，请[备份您的数据库](http://codex.wordpress.org/WordPress_Backups)和文件。*

1.  转到数据库的 phpmyadmin。
2.  在左栏中查找“wp_postmeta”</li>
3.  单击页面顶部的浏览。
4.  找到按键排序：下拉菜单并选择“option_name（升序）”或“option_name（降序）”</li>
5.  在“option_name”列下，查找要删除的自定义字段的名称。
6.  单击该行中的红色 X 以删除自定义字段。对您希望删除的特定自定义字段的每个实例重复此操作。
7.  在 WordPress 中，打开一个新帖子并向下滚动到自定义字段。查看下拉菜单以确保自定义字段现已消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T00:30:53.920

`the_meta()`可能是一种过于生硬的工具：它只是显示帖子的*所有*自定义字段。

如果您指定要输出的元键，您将完全控制您的输出。看看[http://codex.wordpress.org/Function_Reference/get_post_meta](http://codex.wordpress.org/Function_Reference/get_post_meta)

例如`<?php echo get_post_meta($post->ID, 'my_meta_key'); ?>`

# jpa - 选择期间缺少记录

> ID：11298459
> 
> 赞同：1
> 
> 时间：2012-07-02T17:35:52.850
> 
> 标签：jpa, jpa-2.0

我正在使用以下 JPQL 查询来获取和排序基于 SSN 的记录。在 DB 中，有 7 个有 SSN，而 4 个没有。我第一次看到所有 11 条记录都被返回，但是当查询再次运行时，我只看到 7 条记录，其中 case 设置为 0 而不是设置为 1 的记录。非常感谢任何帮助。

```
SELECT qd, CASE WHEN qd.ssn IS NULL THEN 1 ELSE 0 END as nullssn 
FROM UiQtrlyRptUnitDtl qd 
WHERE qd.emprAcctId = :emprAcctId 
AND qd.ccyyqId IN (:ccyyqList) 
ORDER BY nullssn desc, qd.ssn, qd.lastNa, qd.firstNa 
```

我将 OpenJPA 与 JPA 2.0 和 Websphere 一起使用。

# java - 用于从 ipaddress 获取地理代码的 Java 库

> ID：11298462
> 
> 赞同：4
> 
> 时间：2012-07-02T17:36:04.407
> 
> 标签：java, geocoding

我的应用程序知道用户的 IP 地址。我们需要识别用户所在的城市、州、国家以及用户的经纬度。

有没有可以做到这一点的java库？

如果没有，用于将 IP 地址转换为地理位置的算法或数据源是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T07:11:26.703

[http://www.maxmind.com/app/developers](http://www.maxmind.com/app/developers)提供了一个本地数据库和 java 类来从 IP 地址计算位置信息。我做了一些测试。结果似乎很好。

```
bbc.co.uk: 212.58.241.131 : 51.283295,-0.23330688;Tadworth,N7,United Kingdom,null
home: 76.126.242.196 : 37.369705,-122.0214;Sunnyvale,CA,United States,94086
google.com: 74.125.224.133 : 37.419205,-122.0574;Mountain View,CA,United States,94043
tcs.in: 202.71.129.225 : 28.666702,77.216705;Delhi,07,India,null
ebay.com: 66.135.205.13 : 37.280304,-121.956696;Campbell,CA,United States,95008
etrade.com: 12.153.224.22 : 34.091797,-84.2209;Alpharetta,GA,United States,30005
whitehouse.gov: 72.247.136.110 : 42.362595,-71.0843;Cambridge,MA,United States,02142 
```

这是我使用的 junit 测试用例[GeoLiteCityTest.java的链接](https://github.com/snambi/GeoIP/blob/master/src/test/java/com/maxmind/geoip/GeoLiteCityTest.java)

MaxMind 提供 java 类，但不提供 jars。因此，我创建了一个可以构建代码并生成 jar 的 maven 项目。这是 GitHub 项目[https://github.com/snambi/GeoIP](https://github.com/snambi/GeoIP)

如果你需要在你的maven项目中使用这个库，添加如下依赖

```
<dependency>
   <groupId>org.geomind</groupId>
   <artifactId>geoip</artifactId>
   <version>1.2.8</version>
</dependency> 
```

在 pom.xml 中的“repositories”下添加以下存储库配置

```
<repository>
   <id>geoip</id>
   <url>http://snambi.github.com/maven/</url>
</repository> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T17:38:46.283

是的：http : [//www.maxmind.com/app/developers](http://www.maxmind.com/app/developers)

他们提供了一个 Java API（等等）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T00:02:56.470

我在 Scala 中编写了一个简单的库，它使用[IPInfoDB](http://ipinfodb.com)来获取地理位置。只要您在类路径中包含 scala-library.jar，这也可以从 Java 中使用。您需要来自 IPInfoDB 的 API 密钥。您可以获得 JSON、原始或 XML 格式的输出。

代码和更多文档在我的[Github](https://github.com/bblaine/GeoIp)上，还有一个[jar](https://github.com/downloads/bblaine/GeoIp/ipgeomap_2.9.1-0.1-SNAPSHOT.jar)供下载。

这是一个 Java 片段，它将获取具有“城市”分辨率的地理信息：

```
GeoIP geoip = new GeoIP("<API Key>");
//Note the $.MODULE$ syntax to refer to the case class in Scala.
System.out.println(geoip.getGeoRaw("<IP Address>", City$.MODULE$)); 
```

此示例输出`OK;;0.0.0.0;US;UNITED STATES;DISTRICT OF COLUMBIA;WASHINGTON;20001;38.9048;-77.0354;-05:00`原始输出，然后可以对其进行解析。

另请参阅此问题[Best way to get geo-location in Java](https://stackoverflow.com/q/1415851/390708)

# shell - Shell 脚本挂在邮件命令上

> ID：11298463
> 
> 赞同：2
> 
> 时间：2012-07-02T17:36:05.933
> 
> 标签：shell, sendmail

我发现对 mail 命令的调用导致脚本挂起而没有错误。要关闭脚本，我必须按 ctrl-c 或在进程 ID 上发出 kill 命令。

脚本的相关部分如下：

```
EMAIL_TO="my@email.com"

if [ -f /www/archives/pdf/pdf_201207021048.tar ]; then
    echo "file exists"
else
    echo "file does not exist"
fi

echo "sending mail next..."

mail -s "pdfbackup" "$EMAIL_TO"

echo "mail sent?" 
```

运行此程序时，我看到文本“下一个发送邮件...”，仅此而已。它永远不会返回提示。

我可以看到脚本仍在内存中 ps -ax | grep myscript.sh。

我试过在主题和电子邮件周围使用引号，但又没有。无论哪种方式都会产生相同的结果。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T17:48:45.200

来自`man mail`：

> **发送邮件**
> 要向一个或多个人发送消息，可以使用参数调用邮件，这些参数是要向其发送邮件的人的姓名。然后，您需要输入您的消息，然后在一行的开头输入 a。回复或发送邮件下面的部分描述了可帮助您撰写信件的一些邮件功能。

它期待消息的正文。用于`<C-d>`换行符并以空行和 . 结束消息`<C-d>`。或者，您可以将主体和管道提供给命令...

```
echo "This is the body" | mail -s "Subject" "recipient@example.com" 
```

或者

```
mail -s "Subject" "recipient@example.com" <<< "This is the body" 
```

或者您可以从文件中读取正文..

```
mail -s "Subject" "recipient@example.com" < body_in_file.txt 
```

# python-2.7 - 如何使用scrapy从css定义中提取背景URL

> ID：11298472
> 
> 赞同：1
> 
> 时间：2012-07-02T17:36:46.547
> 
> 标签：python-2.7, scrapy

我怎样才能`image_1.png`从这样的东西中提取（用scrapy）：

```
<html><body>
<style type="text/css">
img.article_image[class] 
{
    background-image:url('/article_images/image_1.png');
}
</style>    
<img class="article_image">
</body></html> 
```

我想到的唯一想法是正则表达式源 html 代码，还有什么更优雅的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T18:55:43.493

项目加载器是一个很棒的工具，它们内置了 xpath 和 regex 的东西。

```
XPathItemLoader(response).get_xpath(xpath, regex) 
```

[http://doc.scrapy.org/en/latest/topics/loaders.html](http://doc.scrapy.org/en/latest/topics/loaders.html)

```
>>> from scrapy.contrib.loader import XPathItemLoader
>>> response.body
'<html><body>\n<style type="text/css">\nimg.article_image[class] \n{\n...'
>>> from scrapy.contrib.loader import XPathItemLoader
>>> xl = XPathItemLoader(response=response, item={'image': ''})
>>> xl
<scrapy.contrib.loader.XPathItemLoader object at 0x7f5830079f50>
>>> xl.get_xpath('//style', re=r"background-image.*/([^/]+)'")
[u'image_1.png']
>>> xl.add_xpath('image', '//style', re=r"background-image.*/([^/]+)'")
>>> xl.load_item()
{'image': [u'image_1.png']} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T17:56:11.207

您可以通过 xpath 查询找到 css，但您仍然必须使用正则表达式从中提取图像路径。

所以我认为在全身使用正则表达式是一个很好的解决方案。

# iphone - 更改 TableView 标题文本颜色

> ID：11298473
> 
> 赞同：1
> 
> 时间：2012-07-02T17:36:49.457
> 
> 标签：iphone, ios, cocoa-touch

我想在我的 tableView 中做一个简单的改变。我有一个自定义表格视图背景，我想更改页眉和页脚文本颜色，

**只有文本颜色。**

我在互联网上看到，通常我们必须使用委托方法为表格视图提供一个全新的视图，但我只会更改文本颜色（以及，如果可能的话，阴影）......

有没有一种简单的方法**可以避免创建新的整个视图**？

请帮我。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T17:42:51.333

如果您希望以自定义字符串以外的任何方式自定义页眉/页脚，则需要创建一个 UIView。

这记录在[UITableViewDataSource](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDataSource_Protocol/Reference/Reference.html#//apple_ref/occ/intf/UITableViewDataSource)文档中：

> 表视图：titleForHeaderInSection：
> 
> **讨论** 表格视图对节标题使用固定字体样式。如果您想要不同的字体样式，请改为在委托方法 tableView:viewForHeaderInSection: 中返回自定义视图（例如，UILabel 对象）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T19:18:18.267

抱歉，自定义标题字体颜色的唯一方法是在委托方法中创建 UIView

`-(UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section`

如果您查看[此处](https://stackoverflow.com/a/4395765/1138107)发布的答案，那么您会看到一种非常简单的方法来将其实现到您的应用程序中。您所要做的就是将该函数复制并粘贴到表视图的数据源中，然后将 UILabel 属性更改为您想要的任何内容。

这是该帖子中的代码，以方便参考：

```
Originally posted by Harsh:

-(UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
    UIView *tempView=[[UIView alloc]initWithFrame:CGRectMake(0,200,300,244)];
    tempView.backgroundColor=[UIColor clearColor];

    UILabel *tempLabel=[[UILabel alloc]initWithFrame:CGRectMake(15,0,300,44)];
    tempLabel.backgroundColor=[UIColor clearColor]; 
    tempLabel.shadowColor = [UIColor blackColor];
    tempLabel.shadowOffset = CGSizeMake(0,2);
    tempLabel.textColor = [UIColor redColor]; //here u can change the text color of header
    tempLabel.font = [UIFont fontWithName:@"Helvetica" size:fontSizeForHeaders];
    tempLabel.font = [UIFont boldSystemFontOfSize:fontSizeForHeaders];
        tempLabel.text=@"Header Text";

    [tempView addSubview:tempLabel];

    [tempLabel release];
    return tempView;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T17:42:27.963

鉴于如果您在没有`UIView`子类的情况下设置页眉/页脚，则您正在传递 a `NSString`，目前无法在不创建`UIView`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-07T10:07:22.713

```
func tableView(_ tableView: UITableView, willDisplayHeaderView view: UIView, forSection section: Int) {
    let headerView = view as! UITableViewHeaderFooterView
    headerView.textLabel?.textColor = ...
} 
```

我什至可以为这个标签设置属性文本

# javascript - img 上的 width="" 和 "height"" 弄乱了他们的能见度

> ID：11298474
> 
> 赞同：-3
> 
> 时间：2012-07-02T17:36:53.320
> 
> 标签：javascript, html, css, width, image

为什么我需要指定此页面上图像的宽度=“”和高度=“”才能正确显示？此列表中未指定其暗淡的图像不可见。我可以让它不需要指定吗？

谢谢！

[http://www.rollinleonard.com/elements/index-new.php](http://www.rollinleonard.com/elements/index-new.php)

[http://jsfiddle.net/ZTDjf/](http://jsfiddle.net/ZTDjf/) - 删除此图像中突出显示的位：http: [//i.imgur.com/SquKx.png](http://i.imgur.com/SquKx.png) - 看看结果如何隐藏该图像？这是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T18:04:48.380

我认为 jquery.hover_caption.js 依赖于您为图像指定的宽度和高度。

它将采用宽度和高度值并应用于插件动态创建的父 DIV。

如果您不指定图像的宽度和高度，插件将不知道它应该放置到父 div 的高度/宽度。所以父div会有`<div style="width: 0px; height: 0px;">`

这就是图像不显示的原因。

请参阅下面的 html 标记：

```
<div style="width: 0px; height: 0px;"><h3 class="hover_caption_caption" style="padding: 0px; color: white; width: 0px; font-size: 18px; position: absolute; margin: 0px; display: none;">SPR scene 7.1 2011</h3><img title="SPR scene 7.1 2011" src="zzzthumbs/spr-scene7.1.jpg" style="z-index: -1; position: relative; font-weight: bold;"></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T18:09:47.080

我认为您所要做的就是在“加载”处理程序中运行插件而不是“准备好”。

```
<script>
  $(window).load(function() {
    $('img').hover_caption();
  });
</script> 
```

当你在“准备好”运行它时，图像还没有加载，所以插件不会知道它们有多大。

# php - 如何通过 PHP 调用 CITRIX (LogMeIn) API 来注册新的 GotoWebinar 与会者？

> ID：11298477
> 
> 赞同：1
> 
> 时间：2012-07-02T17:37:08.560
> 
> 标签：php, curl, citrix, logmein

我正在使用以下代码将用户注册到网络研讨会：

```
 $headers = array(
 'HTTP/1.1',
  'Accept: application/json',
  'Accept: application/vnd.citrix.g2wapi-v1.1+json',
  'Content-Type: application/json',
  'Authorization: OAuth oauth_token='.$access_token,
  'Name_First:test',
  'Name_Last:ank',
  'Email:ankinfo@yahoo.com',
   );

 $gtw_url = "https://api.citrixonline.com/G2W/rest/organizers/{organizerkey}/webinars/{webinarkey}/registrants";
 $curl = @curl_init();
 @curl_setopt($curl, CURLOPT_HTTPHEADER, $headers); 
     @curl_setopt($curl, CURLOPT_URL, $gtw_url);
      @curl_setopt($curl, CURLOPT_HTTP_VERSION, CURL_HTTP_VERSION_1_0);
     @curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false);
     @curl_exec($curl);
     @curl_close($curl); 
```

我已通过网络研讨会密钥和组织者密钥。我应该得到如下输出：

```
￼HTTP/1.1 201 OK Content-Type: application/json
{
    "registrantKey":5678,
    "joinUrl":"https://www1.gotomeeting.com/join/123456789/5678"
} 
```

问题是当我运行文件时我得到了输出

```
[
    {
        "registrantKey":106660361,
        "firstName":"test",
        "lastName":"1",
        "email":"rohankapoor99@yahoo.com",
        "status":"WAITING",
        "registrationDate":"2012-06-29T21:07:10Z",
        "joinUrl":"https://www1.gotomeeting.com/join/141654337/106660361",
        "timeZone":"America/Denver"
    }
] 
```

我正在使用创建网络研讨会 URL，那么为什么我会获取已注册用户的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-16T17:37:36.730

这个问题已经存在 3 年了，但考虑到 CITRIX（现为 LogMeIn）API 文档目前的惨淡状态，我提供以下代码段作为可能的解决方案：

显然，我们需要帐户的管理器密钥和访问令牌数据......

```
 $organizer_key= '10000000000XXXXXXX';
    $access_token = 'GwsiiPWaJbHIiaIiocxxxxxxxxxx'; 
```

获取网络研讨会所需的最少字段（例如从 HTML 表单中）并 JSON 对数据进行编码...

```
 $newRegFields = (object) array(
        'firstName' => $_POST[ 'FirstName' ],
        'lastName'  => $_POST[ 'LastName'  ],
        'email'     => $_POST[ 'Email'     ],
    );

    $newRegistrantFields = json_encode( $newRegFields );

    //echo '<br><br>' . $newRegistrantFields; 
```

获取网络研讨会...

```
 $webinarID = preg_replace( "/[^0-9]/", "", $_POST[ "WebinarKey" ] ); 
```

将 URL 设置为 LogMeIn API（*不需要 resendConfirmation*选项）...

```
 $gtw_url = "https://api.citrixonline.com/G2W/rest/organizers/" . $organizer_key . "/webinars/" . $webinarID . "/registrants?resendConfirmation=false"; 
```

格式化我们的 POST 标头...

```
 $headers = array(
        "HTTP/1.1",
        "Accept: application/json",
        "Content-Type: application/json",
        "Authorization: OAuth oauth_token=$access_token",
        "Content-Length: " . strlen( $newRegistrantFields )
    ); 
```

设置我们的 cURL 选项，确保我们使用**CURLOPT_POST, 1** ...指定一个 POST

```
 $curl = curl_init();

    curl_setopt( $curl, CURLOPT_URL, $gtw_url                       );
    curl_setopt( $curl, CURLOPT_HTTPHEADER, $headers                );
    curl_setopt( $curl, CURLOPT_HTTP_VERSION, CURL_HTTP_VERSION_1_0 );
    curl_setopt( $curl, CURLOPT_SSL_VERIFYPEER, 0                   );
    curl_setopt( $curl, CURLOPT_RETURNTRANSFER, 1                   );
    curl_setopt( $curl, CURLOPT_POST, 1                             );
    curl_setopt( $curl, CURLOPT_POSTFIELDS, $newRegistrantFields    );

    $newRegistrants = curl_exec( $curl );
    curl_close( $curl ); 
```

我们的 cURL 调用返回了 JSON 编码数据，无论是服务器错误消息还是注册确认。现在让我们把回复变成一个方便的关联数组......

```
 $newRegistrantsArray = json_decode( $newRegistrants, true );

    //echo '<br><br>' . $newRegistrants . '<br><br>';
    //echo '<pre>'; print_r( $newRegistrantsArray ); echo '</pre>'; 
```

如果返回了**errorCode**键，则注册被炸毁。我在这里所做的只是从服务器获取实际的错误描述并加载它以返回到我的调用 HTML 页面，但这完全是可选的......

```
 if( array_key_exists( 'errorCode', $newRegistrantsArray )) {
        $form_data[ 'status' ] = false;
        $form_data[ 'code'   ] = $newRegistrantsArray[ 'description' ];
        $form_data[ 'error'  ] = 'E200';
        //echo json_encode( $form_data );
        //exit;
    } 
```

现在，如果注册成功，服务器将返回类似...

```
(
  [registrantKey] => 2.5022062212198E+18
  [joinUrl] => https://global.gotowebinar.com/join/6552167171182613761/103193261
) 
```

...所以我只是检查这些密钥是否被退回，如果是，我知道注册是好的。

```
 if( array_key_exists( 'registrantKey', $newRegistrantsArray ) && array_key_exists( 'joinUrl', $newRegistrantsArray ) ) {
        $form_data[ 'status' ] = true;
        $form_data[ 'code'   ] = $_POST[ 'Email' ] . ' successfully registered with webinar';
        $form_data[ 'error'  ] = 'E300';
        //echo json_encode( $form_data );
        //exit;
    } 
```

# java - 显示软键盘时无法让 ScrollView 滚动

> ID：11298479
> 
> 赞同：11
> 
> 时间：2012-07-02T17:37:10.087
> 
> 标签：java, android, scrollview

我一直试图让这个滚动视图滚动，但这样做没有任何运气。我尝试了许多类型的修复，但似乎无法让其中一种正常工作。选择编辑框并占用一半的屏幕时，我希望能够滚动我的页面。这样我就可以导航到页面底部的其余编辑框和接受按钮，而不必每次都手动隐藏键盘。

这是我的xml代码：

```
 <?xml version="1.0" encoding="utf-8"?>
     <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
       android:layout_width="match_parent"
       android:layout_height="match_parent"
       android:background="@drawable/asuswallpaper4"
       android:orientation="vertical"
       android:weightSum="1"
      >

        <TextView
          android:id="@+id/textView1"
          android:layout_width="match_parent"
          android:layout_height="wrap_content"
          android:background="#AAA"
          android:text="Input Configuration"
          android:textAppearance="?android:attr/textAppearanceLarge"
          android:textColor="#000" >
         </TextView>

             <ScrollView
               android:id="@+id/input_scroll_view"
               android:layout_width="fill_parent"
               android:layout_height="wrap_content" >

               <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical" >

                      <LinearLayout
                       android:id="@+id/linearLayout10"
                       android:layout_width="match_parent"
                       android:layout_height="wrap_content"
                       android:layout_marginTop="20dp"
                       android:orientation="horizontal" >

                      <TextView
                       android:id="@+id/textView13"
                       android:layout_width="wrap_content"
                       android:layout_height="wrap_content"
                       android:text="TextView"
                       android:textAppearance="?android:attr/textAppearanceMedium"
                       android:textColor="#000"
                       android:textStyle="bold" >
                      </TextView>

            <TextView
                android:id="@+id/textView11"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Enable or Disable"
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:textColor="#FFF" >
            </TextView>
        </LinearLayout>

        <LinearLayout
            android:id="@+id/linearLayout11"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="20dp" >

            <RadioGroup
                android:id="@+id/DisableEnable"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:addStatesFromChildren="true"
                android:orientation="horizontal" >

                <RadioButton
                    android:id="@+id/disableButton"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:checked="true"
                    android:text="Disable"
                    android:textColor="#FFF" >
                </RadioButton>

                <RadioButton
                    android:id="@+id/enableButton"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="100dp"
                    android:text="Enable"
                    android:textColor="#FFF" >
                </RadioButton>
            </RadioGroup>
        </LinearLayout>

        <!-- <LinearLayout -->
        <!-- android:id="@+id/linearLayout3" -->
        <!-- android:layout_width="match_parent" -->
        <!-- android:layout_height="wrap_content" -->
        <!-- android:layout_marginTop="20dp" -->
        <!-- android:orientation="horizontal" > -->

        <!-- <TextView -->
        <!-- android:id="@+id/textView14" -->
        <!-- android:layout_width="wrap_content" -->
        <!-- android:layout_height="wrap_content" -->
        <!-- android:text="TextView" -->
        <!-- android:textAppearance="?android:attr/textAppearanceMedium" -->
        <!-- android:textColor="#000" -->
        <!-- android:textStyle="bold" -->
        <!-- android:visibility="invisible" > -->
        <!-- </TextView> -->

        <!-- <TextView -->
        <!-- android:id="@+id/textView3" -->
        <!-- android:layout_width="wrap_content" -->
        <!-- android:layout_height="wrap_content" -->
        <!-- android:text="Positive/Negative Trigger" -->
        <!-- android:textAppearance="?android:attr/textAppearanceMedium" -->
        <!-- android:textColor="#FFF" -->
        <!-- android:visibility="invisible" > -->
        <!-- </TextView> -->
        <!-- </LinearLayout> -->

        <!-- <LinearLayout -->
        <!-- android:id="@+id/linearLayout4" -->
        <!-- android:layout_width="match_parent" -->
        <!-- android:layout_height="wrap_content" -->
        <!-- android:orientation="vertical" > -->

        <!-- <RadioGroup -->
        <!-- android:id="@+id/PosNeg" -->
        <!-- android:layout_width="wrap_content" -->
        <!-- android:layout_height="wrap_content" -->
        <!-- android:orientation="horizontal" -->
        <!-- android:visibility="invisible" android:clickable="false"> -->

        <!-- <RadioButton -->
        <!-- android:id="@+id/positive_trigger" -->
        <!-- android:layout_width="wrap_content" -->
        <!-- android:layout_height="wrap_content" -->
        <!-- android:checked="true" -->
        <!-- android:text="Positive" -->
        <!-- android:textColor="#FFF" android:clickable="false"> -->
        <!-- </RadioButton> -->

        <!-- <RadioButton -->
        <!-- android:id="@+id/negative_trigger" -->
        <!-- android:layout_width="wrap_content" -->
        <!-- android:layout_height="wrap_content" -->
        <!-- android:layout_marginLeft="100dp" -->
        <!-- android:text="Negative" -->
        <!-- android:textColor="#FFF" android:clickable="false"> -->
        <!-- </RadioButton> -->
        <!-- </RadioGroup> -->
        <!-- </LinearLayout> -->

        <LinearLayout
            android:id="@+id/linearLayout5"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="25dp"
            android:orientation="horizontal" >

            <TextView
                android:id="@+id/textView15"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="TextView"
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:textColor="#000"
                android:textStyle="bold"
                android:visibility="invisible" >
            </TextView>

            <TextView
                android:id="@+id/textView4"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Type of Trigger"
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:textColor="#FFF"
                android:visibility="invisible" >
            </TextView>
        </LinearLayout>

        <LinearLayout
            android:id="@+id/linearLayout6"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <RadioGroup
                android:id="@+id/TypeTrigger"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:visibility="invisible" >

                <RadioButton
                    android:id="@+id/constant_trigger"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:checked="true"
                    android:text="Constant"
                    android:textColor="#FFF"
                    android:visibility="visible" >
                </RadioButton>

                <RadioButton
                    android:id="@+id/pulse_trigger"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="100dp"
                    android:text="Pulse"
                    android:textColor="#FFF" >
                </RadioButton>
            </RadioGroup>
        </LinearLayout>

        <LinearLayout
            android:id="@+id/linearLayout2"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="25dp" >

            <TextView
                android:id="@+id/textView16"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:textStyle="bold"
                android:visibility="invisible" />

            <TextView
                android:id="@+id/textView17"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text=": Continuous or One Time (One Time Only Available for                         Pulsed Input(s))"  
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:visibility="invisible" />
            </LinearLayout>

            <LinearLayout
            android:id="@+id/linearLayout1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <RadioGroup
                android:id="@+id/contOneTime"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:visibility="invisible" >

                <RadioButton
                    android:id="@+id/continuous_trigger"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:checked="true"
                    android:text="Continuous" />

                <RadioButton
                    android:id="@+id/oneTime_trigger"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="80dp"
                    android:text="One Time" />
            </RadioGroup>
           </LinearLayout>

           <LinearLayout
            android:id="@+id/linearLayout7"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="25dp"
            android:orientation="vertical"
            android:visibility="visible" >

            <TextView
                android:id="@+id/textView5"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Timer Configuration For Selected Input"
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:textColor="#FFF"
                android:visibility="invisible" >
            </TextView>
           </LinearLayout>

           <LinearLayout
            android:id="@+id/linearLayout8"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="20dp"
            android:orientation="horizontal" >

            <TextView
                android:id="@+id/textView6"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Number of Pulses"
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:textColor="#FFF"
                android:visibility="invisible" >
            </TextView>

            <EditText
                android:id="@+id/NumberOfPulses"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:hint="0"
                android:inputType="number"
                android:numeric="integer"
                android:visibility="invisible" >

                <requestFocus>
                </requestFocus>
            </EditText>

            <TextView
                android:id="@+id/textView7"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="0.34"
                android:text=" within,"
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:textColor="#FFF"
                android:visibility="invisible" >
            </TextView>
           </LinearLayout>

           <LinearLayout
            android:id="@+id/linearLayout9"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="20dp"
            android:visibility="visible" >

            <EditText
                android:id="@+id/Minutes"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="0.00"
                android:hint="0"
                android:inputType="number"
                android:numeric="integer"
                android:visibility="invisible" >
            </EditText>

            <TextView
                android:id="@+id/textView8"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="0.00"
                android:text="Minutes,"
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:textColor="#FFF"
                android:visibility="invisible" >
            </TextView>

            <EditText
                android:id="@+id/Seconds"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="0.00"
                android:hint="0"
                android:inputType="number"
                android:numeric="integer"
                android:visibility="invisible" >
            </EditText>

            <TextView
                android:id="@+id/textView9"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Seconds,"
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:textColor="#FFF"
                android:visibility="invisible" >
            </TextView>

            <EditText
                android:id="@+id/Milliseconds"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="0.00"
                android:hint="0"
                android:inputType="number"
                android:numeric="integer"
                android:visibility="invisible" >
            </EditText>

            <TextView
                android:id="@+id/textView10"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Milliseconds."
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:textColor="#FFF"
                android:visibility="invisible" >
            </TextView>

            <TextView
                android:id="@+id/textView2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="0.00"
                android:text="Medium Text"
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:visibility="invisible" />
        </LinearLayout>

        <LinearLayout
            android:id="@+id/linearLayout13"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="20dp"
            android:weightSum="1" >

            <Button
                android:id="@+id/inputAccept"
                android:layout_width="159dp"
                android:layout_height="wrap_content"
                android:layout_weight="0.04"
                android:text="Accept" >
            </Button>

            <Button
                android:id="@+id/button3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Button"
                android:visibility="invisible" >
            </Button>

            <Button
                android:id="@+id/inputSave"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="0.06"
                android:text="Save"
                android:visibility="invisible" >
            </Button>

            <Button
                android:id="@+id/button5"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Button"
                android:visibility="invisible" >
            </Button>

            <Button
                android:id="@+id/inputLoad"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="0.05"
                android:text="Load"
                android:visibility="invisible" >
                </Button>
            </LinearLayout>
         </LinearLayout>
       </ScrollView>

    </LinearLayout> 
```

（请有人帮我解决这个问题，它让我发疯！！）。我还想提一下，我已经与遇到类似问题的人尝试了大多数修复，例如填充视口和启用垂直滚动条，但这些都没有帮助我解决问题。我还尝试将它们添加到父布局中，但似乎也不起作用。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-02T17:58:42.493

添加`android:windowSoftInputMode="adjustResize"`到`<activity>` 您的 AndroidManifest.xml 中的标记。这将导致屏幕大小调整为显示软件键盘后剩余的空间。结果，您将能够滚动，因为屏幕不会以任何方式被键盘覆盖。

编辑：

我写了一个最小的例子并测试了它。除非有很大的误解，否则请尝试此代码，然后找出您的代码不起作用的原因：

**xml布局：**

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_height="fill_parent"
    android:layout_width="fill_parent"
    >

    <LinearLayout
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        >

        <TextView
            android:layout_height="2000dp"
            android:layout_width="wrap_content"
            android:gravity="top"
            android:text="Scroll Down!"/>

        <EditText
            android:layout_height="wrap_content"
            android:layout_width="fill_parent"
            android:hint="Enter Text"
            />
    </LinearLayout>
</ScrollView> 
```

**显现：**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
          package="com.example"
          android:versionCode="1"
          android:versionName="1.0">
    <uses-sdk android:minSdkVersion="15"/>
    <application android:label="@string/app_name" android:icon="@drawable/ic_launcher">
        <activity android:name="MyActivity"
                  android:label="@string/app_name"
                android:windowSoftInputMode="adjustResize"
                >
            <intent-filter>
                <action android:name="android.intent.action.MAIN"/>
                <category android:name="android.intent.category.LAUNCHER"/>
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-01-13T04:06:20.987

您好我也遇到了这个问题。我遇到的问题是我在清单中添加了adjustResize，如下所示

它仍然不会滚动。但是在我的 ScrollView 开头的 xml 文件中

```
<ScrollView
    android:id="@+id/scrollView1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_below="@+id/top"
    android:scrollbars="none" > 
```

我删除了 android:scrollbars="none" 并解决了我的问题。仅适用于对清单进行调整不起作用的任何人。

# wpf - DatePicker 子类找不到模板

> ID：11298484
> 
> 赞同：2
> 
> 时间：2012-07-02T17:37:32.137
> 
> 标签：wpf, xaml, datepicker, custom-controls

下面是一段尝试继承 4.0 DatePicker 的代码。我想这样做的原因之一是对水印有更多的控制权。这里发生的是我得到了 DatePickerTextBox 的句柄，但我没有得到 PART_Watermark（它为空）。

ApplyTemplate 是执行此操作的正确位置吗？我必须修复什么才能获得水印？

干杯，
贝里尔

```
public class DatePickerEx : DatePicker
{

    public override void OnApplyTemplate()
    {
        base.OnApplyTemplate();

        var datePickerTextBox = GetTemplateChild("PART_TextBox") as DatePickerTextBox;
        if (datePickerTextBox == null) return;

        var watermarkPart = datePickerTextBox.Template.FindName("PART_Watermark", datePickerTextBox) as ContentControl;
        if (watermarkPart == null) return;

        ...        
     }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T19:17:00.363

我对日期选择器不太了解，但如果`PART_TextBox`有自己的模板并且`PART_Watermark`是该模板的一部分，您应该先调用`ApplyTemplate`文本框，然后才能访问其模板部分。

希望能帮助到你。

# sql - 添加具有变量名称的列

> ID：11298485
> 
> 赞同：1
> 
> 时间：2012-07-02T17:37:33.723
> 
> 标签：sql, sql-server-2008, tsql

如果它们不存在，我正在尝试将 som 列动态添加到 2 个表中。我的问题是，列的名称取决于另一列的值。

但显然以下是不允许的，为什么？

```
declare @inputs int; 
set @inputs = (select inputs from campaigns where id = 102) + 1; 
update campaigns set inputs = @inputs where id = 102; 
if col_length('campaigns', 'input' + @inputs) is null alter table campaigns add input' + @inputs + ' ntext null; 
if col_length('campaigns', 'input' + @inputs + 'text') is null alter table campaigns add input' + @inputs + 'ivocall ntext null; 
if col_length('rapports', 'input' + @inputs) is null alter table rapports add input' + @inputs + ' ntext null; 
if col_length('rapports', 'input' + @inputs + 'values') is null alter table rapports add input' + @inputs + 'values ntext null; 
update campaigns set input' + @inputs + ' = '1||test||||0||0||0||0||0||2||0' where id = 102 
```

我收到以下错误

```
Msg 102, Level 15, State 1, Line 4
Incorrect syntax near ' + @inputs + '.
Msg 102, Level 15, State 1, Line 5
Incorrect syntax near ' + @inputs + '.
Msg 102, Level 15, State 1, Line 6
Incorrect syntax near ' + @inputs + '.
Msg 102, Level 15, State 1, Line 7
Incorrect syntax near ' + @inputs + '.
Msg 102, Level 15, State 1, Line 8
Incorrect syntax near ' + @inputs + '. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T17:54:23.490

看这个：

```
if col_length('campaigns', 'input' + @inputs) is null 
    alter table campaigns 
    add input' + @inputs + ' ntext null; 
```

第三行是不对的，充其量应该是：

```
if col_length('campaigns', 'input' + @inputs) is null 
    alter table campaigns 
    add 'input' + @inputs ntext null; 
```

然而，即使这样也行不通。您最好将整个 DDL 语句创建为字符串，然后执行它。就像是：

```
set @sql = 'alter table campaigns add column input' + @inputs + ' ntext null'
exec (@sql) 
```

# php - 设置 SVN 服务器以在 Apache 2.2.22（64 位 - 已安装）和 Windows 7（64 位）上工作

> ID：11298492
> 
> 赞同：0
> 
> 时间：2012-07-02T17:38:16.800
> 
> 标签：php, apache, svn, 64-bit

我正在尝试在我的开发工作站上设置一个 SVN Server 1.7.5，它已经具有以下**工具**：

*   [Apache Server 2.2.22 **（64 位）** - 来自 Apache Lounge 的 VC10](http://www.apachelounge.com/download/win64/binaries/httpd-2.2.22-win64.zip)
*   [Anindya 博客中的PHP 5.4.3 VC9-TS **（64 位）**](http://www.anindya.com/php-5-4-3-and-php-5-3-13-x64-64-bit-for-windows/)
*   **Xdebug.org 的用于 PHP 5.4.x TS （64 位）**的XDebug 2.2.0 VC9
*   来自 MySQL Dev 的MySQL CE 5.5.24 **（64 位）** MSI 安装程序。网站
*   NetBeans IDE 7.2 RC1 和 JRE 7 更新 5 **（64 位）**来自 NetBeans 网站
*   Windows 7 专业版**（64 位）**

如您所见，所有使用的工具都是 64 位的。

当我尝试将 SVN 服务器包含到工具集中时，我的头痛就开始了。

好吧，在这个论坛发这个帖子之前，我发现了很多非常好的 Windows 64 位 SVN 解决方案，比如 Visual SVN Server、CollabNet 的 Subversion Edge 和 WanDisco 的 uberSVN。但是，它们都安装了嵌入式 Apache 服务器以及 SVN 服务器。

因此，由于我已经有一个 Apache 服务器可以正常工作并很好地配置了我所有的个人需求，我会完全避免仅仅因为 SVN 而拥有两个不同的 Apache 服务器。

我还在网上进行了搜索，以了解是否可以在没有嵌入式 Apache 服务器的情况下安装 VisualSVN 或 Subversion Edge，但这似乎不是一个选项。

在我看来，使用我当前工作的 Apache 服务器的唯一方法是，如果我能找到 Apache 2.2.22 64 位的 SVN 二进制文件。

作为附加信息，也搜索了网络上的许多论坛，似乎没有发布 SVN 64 位库只是因为市场上已经有足够好的免费工具用于此目的，例如上述工具。代价是他们还附带了我真的不想要的 Apache 服务器。

我非常感谢您在这方面的帮助。

此致。

**解决方案更新**
好吧，幸运的是我设法找到了 Apache Haus 网站。他们有可用的 Subversion 64 位二进制文​​件，可以与 Apache 64 位集成。

设置过程非常简单：只需解压缩 zip 文件，将所有内容复制到 Apache 文件夹内的 bin 和 modules 文件夹，然后正确配置 htdocs.conf 即可。

作为附加信息，我还发现为了拥有本地 SVN 设置，我真的根本不需要 SVN 服务器。在这种情况下，我唯一需要的是安装 64 位客户端。

**结束语**
虽然我不需要 SVN 服务器来在我的本地环境中安装 subversion，但我相信通过这种设置吸取教训仍然值得，并且仍然值得在 StackOverflow 上分享，因为其他人可能需要在带有 Apache 64 位的 Windows 64 位环境。

非常感谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-06T12:07:39.493

FWIW - uberSVN 中的 Apache 是自包含的，因此您应该可以使用 uberSVN 并且仍然安装较新版本的 Apache 以满足您的所有其他需求。

# android - 为什么我的 ListView 是黑色的？

> ID：11298495
> 
> 赞同：1
> 
> 时间：2012-07-02T17:38:33.070
> 
> 标签：android, android-layout, android-listview

我的 ListView 有以下代码：

```
<ListView android:id="@android:id/list" xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="match_parent"
    android:scrollbarStyle="insideOverlay"
    android:background="@android:color/white"
    android:cacheColorHint="@android:color/white"
    android:fadingEdgeLength="16dip" /> 
```

我的活动中有主题“Holo.Light.DarkActionBar”。我尝试将 ListView 的样式更改为相同的样式，但我没有得到正确的颜色。在 Eclipse 的布局编辑器中，它显示如下：

![在此处输入图像描述](../Images/73213e7b2fa7e7e1b37d434e7f2caf8f.png)

但在我的手机上，我得到了这个：

![得到](../Images/50be6010ad67f9f4028e1330236b885d.png)

如果我将主题应用于活动，为什么它不会改变颜色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T06:34:32.300

只是一个解决了我不久前遇到的类似问题的想法：

您是否将主题或样式应用于 ListItems，或者只是应用于 ListView？

如果这是问题所在，您可以在此处找到有关如何执行此操作的详细说明：

[http://codehenge.net/blog/2011/05/customizing-android-listview-item-layout/](http://codehenge.net/blog/2011/05/customizing-android-listview-item-layout/)

（我会在评论中询问，但我可能还没有这样做^^）

# java - 设置表格元素的权重

> ID：11298503
> 
> 赞同：1
> 
> 时间：2012-07-02T17:39:40.743
> 
> 标签：java, android, android-layout-weight

我正在尝试以编程方式在表格中设置文本视图和复选框的权重。经过一番研究，我发现 LayoutParams 的第三个参数用于执行此操作。但是，它似乎不起作用。有人可以看看这段代码，看看有什么问题吗？谢谢。（使用 LinearLayout 建议编辑）

```
public LayerSelectorView(Context context) 
{
    super(context);
    this.context = context;
    float density = context.getResources().getDisplayMetrics().density;

    linearLayout = new LinearLayout(context);
    linearLayout.setOrientation(LinearLayout.VERTICAL);
    final LinearLayout.LayoutParams mainParams = new LinearLayout.LayoutParams(
                             LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);
    linearLayout.setLayoutParams(mainParams);

    titleText = new TextView(context);
    titleText.setTextAppearance(context, android.R.style.TextAppearance_Large);
    titleText.setText("Select Layers");
    titleText.setTextColor(Color.WHITE);
    titleText.setId(id);

    final LinearLayout.LayoutParams titleParams = new LinearLayout.LayoutParams(
                             LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT);
    titleParams.setMargins(20, 20, 0, 0);
    titleText.setLayoutParams(titleParams);

    linearLayout.addView(titleText);
}
public void updateView()
{
    overlays = ((MapActivity)context).getMapView().getOverlays();

    loadLayers();

    this.addView(linearLayout);

    linearLayout.setBackgroundColor(0x88000000);
    linearLayout.invalidate();
    this.invalidate();
}
public void loadLayers()
{
    TableLayout table = new TableLayout(context);
    final LinearLayout.LayoutParams tableParams = new LinearLayout.LayoutParams(
                             LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);
    table.setLayoutParams(tableParams);
    int i = id+1;
    for(final MapOverlay mo: overlays)
    {       
        TableRow tblRow = new TableRow(context);

        TextView layer = new TextView(context);
        TableRow.LayoutParams trParams = new TableRow.LayoutParams(0,
                             LayoutParams.FILL_PARENT, 1f);
        layer.setTextAppearance(context, android.R.style.TextAppearance_Large);
        layer.setText(mo.getName());
        layer.setTextColor(Color.WHITE);
        layer.setId(i);
        i++;
        layer.setLayoutParams(trParams);

        final CheckBox chk = new CheckBox(context);
        TableRow.LayoutParams trParams1 = new TableRow.LayoutParams(0, 
                             LayoutParams.FILL_PARENT, .2f);
        chk.setLayoutParams(trParams1);
        chk.setFocusable(false);
        chk.setClickable(false);
        chk.setChecked(true);

        tblRow.addView(layer);  
        tblRow.addView(chk);
        table.addView(tblRow);

        tblRow.setOnClickListener(new OnClickListener(){

            public void onClick(View v) {
                if(mo.isVisible())
                {
                    mo.setVisible(false);
                    chk.setChecked(false);
                }
                else
                {
                    mo.setVisible(true);
                    chk.setChecked(true);
                }
            }
        });
    }
    linearLayout.addView(table);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T17:46:43.613

您不能在 RelativeLayout 中使用权重。您需要使用线性布局。我不知道这是否对你有用，但我希望它对你有所帮助。

# powershell - PowerShell 串联

> ID：11298504
> 
> 赞同：2
> 
> 时间：2012-07-02T17:39:41.433
> 
> 标签：powershell

我正在尝试编写一行简单的代码，用于从 C 盘中为各种服务器删除各种用户文件。如何与 PowerShell 连接以获取到服务器的路径？

例如，这就是我想要做的，但 PowerShell 没有将`+`符号识别为我认为的串联：

```
remove-item "\\$server" + '\C$\Documents and Settings\a409126' -force -recurse -whatif 
```

我收到一条错误消息：

```
Remove-Item : A positional parameter cannot be found that accepts argument '+'. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T17:42:55.530

尝试这个：

`remove-item ("\\$server" + '\C$\Documents and Settings\a409126') -force -recurse -whatif`

您需要了解更多关于[命令模式与表达模式](http://rkeithhill.wordpress.com/2007/11/24/effective-powershell-item-10-understanding-powershell-parsing-modes/)的信息才能在 PoSH 中有效

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T20:39:32.100

一种方法是使用变量扩展：

```
Remove-Item "\\$server\C$\Documents and Settings\a409126" -Force ... 
```

另一种方法是使用`Join-Path`cmdlet：

```
Join-Path -Path \\$server -ChildPath 'C$\Documents and Settings\a409126' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-21T10:23:21.820

你想从你应该加入的路径中删除项目，所以：

```
Join-Path "\\$server" "C$\Documents and Settings\a409126" |Remove-Item -Force -Recurse -Whatif 
```

# android - Android 缺少 Gen 文件

> ID：11298505
> 
> 赞同：0
> 
> 时间：2012-07-02T17:39:41.600
> 
> 标签：android

我的 android gen 文件突然消失了。我曾尝试使用 Clean 重新生成它，但没有任何反应。我也尝试重新启动eclipse。有什么建议么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-02T17:45:27.947

尝试`Project`Tab -> 签`Build Automatically`入 Eclipse。

# sql - ASP.Net MVC3 SQL 可以为空

> ID：11298506
> 
> 赞同：2
> 
> 时间：2012-07-02T17:39:45.467
> 
> 标签：sql, asp.net-mvc-3, null, ef-code-first, data-annotations

我目前正在开发一个 ASP.Net MVC3 项目。我已经设置好了，所以我的 sql 数据库根据我创建的类创建了它的表，我需要知道是否有办法设置它，以便变量可以为空，例如：

```
 public class Cart
   {
       [Key]
       public int RecordId { get; set; }
       public string CartId { get; set; }
       public int VideoId { get; set; }
       public int CandyId { get; set; }
       public int Count { get; set; }
       public System.DateTime DateCreated { get; set; }
       public virtual Video Video { get; set; }
       public virtual Candy Candy { get; set; }
    } 
```

有没有办法设置 VideoId 和 Candy Id 使它们可以为空？他们现在出现的方式是作为其他表的外键。任何和所有的帮助都非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T17:42:07.713

您可以使用符号使`VideoId`和`CandyId`可空：`?`

```
public int? VideoId { get; set; }
public int? CandyId { get; set; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T18:04:54.137

你有两个选择：

1) 使用 int 声明你的属性？

```
 public int? VideoId { get; set; }
 public int? CandyId { get; set; } 
```

2) 使用常规 int 声明您的属性，但处理当您获得空值时应该发生的情况。

```
 VideoId = thisMightBeNull ?? 0; //?? means, if the variable is null then use 0 
```

使用第一个选项的缺点是，如果您想将 VideoId 或 CandyId 分配给一个新变量，它应该是 int?，有时它会变得混乱。使用第二个选项，您不会遇到这个问题，但这意味着您应该处理在那一刻分配的内容（默认值）。

# jquery-mobile - 内容可折叠 jquery mobile

> ID：11298509
> 
> 赞同：0
> 
> 时间：2012-07-02T17:39:54.833
> 
> 标签：jquery-mobile, collapsable

我对 jQuery Mobile 1.1.0 手风琴有疑问（[http://jquerymobile.com/test/docs/content/content-collapsible.html](http://jquerymobile.com/test/docs/content/content-collapsible.html)）

我有一个带有更多手风琴的页面，当我按下打开/关闭该部分时，我回到了页面顶部。

我已经设置了：

```
ajaxEnabled: false;
hashListeningEnabled: false;
linkBindingEnabled: false; 
```

这是我的代码：

```
 <!-- anagrafica -->
                <div data-role="collapsible" data-collapsed="true" data-theme="b" data-content-theme="c">
                    <h3>Scheda cliente</h3>

                   <!-- Dati azienda -->
                    <div data-role="collapsible" data-collapsed="true" data-content-theme="c" class="grid-scheda">
                        <h3>Anagrafica</h3>
                        <form id="dati-azienda">

                            <div data-role="fieldcontain">
                                <label for="ragionesociale">Ragione Sociale:</label>
                                <input type="text" name="ragionesociale" id="ragionesociale" class="required fullsize" />
                            </div>

                            <div data-role="fieldcontain">
                                <label for="indirizzo">Indirizzo:</label>
                                <input type="text" name="indirizzo" id="indirizzo" class="fullsize" />
                            </div>

                            <div data-role="fieldcontain">
                                <label for="localita">Localit&agrave;:</label>
                                <input type="text" name="localita" id="localita" class="large" />
                                <input type="text" name="cap" id="cap" class="small" placeholder="CAP" />
                            </div>

                            <div data-role="fieldcontain">
                                <label for="pi">Partita IVA:</label>
                                <input type="number" name="pi" id="pi" class="fullsize" />
                            </div>

                            <div data-role="fieldcontain">
                                <label for="fisso">Fisso:</label>
                                <input type="number" name="fisso" id="fisso" class="medium" />
                                <input type="number" name="fax" id="fax" class="medium" placeholder="Fax" />
                            </div>

                            <div data-role="fieldcontain">
                                <label for="mobile">Mobile:</label>
                                <input type="number" name="mobile" id="mobile" class="fullsize" />
                            </div>

                            <div data-role="fieldcontain">
                                <label for="mail">Mail:</label>
                                <input type="text" name="mail" id="mail" class="fullsize" />
                            </div>

                            <!--
                            <div data-role="fieldcontain">
                                <fieldset data-role="controlgroup">
                                   <legend>Altre sedi:</legend>
                                    <input type="checkbox" name="checkbox-0" style="margin-top:0px;" id="checkbox-mini-0" data-mini="true" />
                                    <label for="checkbox-mini-0">Si</label>
                                </fieldset>
                            </div>     
                            -->
                            <fieldset class="ui-grid-a">
                                    <label>&nbsp;</label>
                                    <div class="ui-block-b"><button rel="dati-azienda" type="submit" class="submit submitBTN" data-theme="b">Salva</button></div>       
                            </fieldset>
                        </form>
                    </div><!-- /Dati Azienda -->

                   <!-- Dati Referente -->
                    <div data-role="collapsible" data-content-theme="c" class="grid-scheda">
                        <h3>Dati Referente</h3>
                        <form id="dati-referente">
                            <div data-role="fieldcontain">
                                <label for="cognome">Referente:</label>
                                <input type="text" name="cognome" id="cognome" class="small2" placeholder="Cognome" />
                                <input type="text" name="nome" id="nome" class="small2" placeholder="Nome"/>
                                <input type="text" name="dt_nascita" id="dt_nascita" class="small2" placeholder="Data nascita"/>
                            </div>

                           <div data-role="fieldcontain">
                                <label for="posizione">Posizione:</label>
                                <input type="text" name="posizione" id="posizione" class="medium" />
                                <input type="text" name="reperibilita" id="reperibilita" class="medium" placeholder="Reperibilit&agrave;" />
                            </div>

                            <div data-role="fieldcontain">
                                <label for="mobile">Mobile:</label>
                                <input type="number" name="mobile" id="mobile" class="medium" />
                                <input type="number" name="fisso" id="fisso" class="medium" placeholder="Fisso" />
                            </div>

                            <div data-role="fieldcontain">
                                <label for="mail">Mail:</label>
                                <input type="text" name="mail" id="mail" class="fullsize" />
                            </div>

                            <div data-role="fieldcontain">
                                <label for="referente2">Referente alternativo:</label>
                                <input type="text" name="referente2" id="referente2" class="fullsize" />
                            </div>

                            <fieldset class="ui-grid-a">
                                    <label>&nbsp;</label>
                                    <div class="ui-block-b"><button rel="dati-referente" type="submit" class="submit submitBTN" data-theme="b">Salva</button></div>       
                            </fieldset>
                        </form>
                    </div><!-- /Dati referente -->     

                    <!-- caratteristiche -->
                    <div data-role="collapsible" data-content-theme="c" class="grid-scheda">
                        <h3>Caratteristiche</h3>

                            <div data-role="fieldcontain">
                                <label for="x">Consistenza attiva:</label>
                                <input type="text" name="x" id="x" class="small" />
                            </div>

                    </div><!-- /caratteristiche -->

                    <!-- registrazione -->
                    <div data-role="collapsible" data-content-theme="c" class="grid-scheda">
                        <h3>Registrazione 190</h3>
                        <form id="registrazione">
                            <div data-role="fieldcontain">
                                <label for="userid">User ID:</label>
                                <input type="text" name="userid" id="userid" class="small2" />
                                <input type="text" name="passw" id="passw" class="small2" placeholder="Password" />
                                <input type="date" name="dt_registrazione" id="dt_registrazione" class="small2" />
                            </div>

                            <?php for($i=1;$i<=2;$i++) { ?>
                            <div data-role="fieldcontain">
                                <label for="analisi_ft_num">Analisi Fattura:</label>
                                <input type="text" name="analisi_ft_num[]" id="analisi_ft_num" class="medium" placeholder="Nr. Fattura" />
                                <input type="date" name="dt_doc[]" class="medium" />
                            </div>
                            <?php } ?>

                            <div data-role="fieldcontain">
                                <label for="codice_cliente">Codice Cliente:</label>
                                <input type="text" name="codice_cliente" id="codice_cliente" class="medium" />
                                <input type="text" name="ciclo_fatturazione" id="ciclo_fatturazione" class="medium" placeholder="Ciclo Fatturazione" />
                            </div>

                            <fieldset class="ui-grid-a">
                                    <label>&nbsp;</label>
                                    <div class="ui-block-b"><button rel="registrazione" type="submit" class="submit submitBTN" data-theme="b">Salva</button></div>       
                            </fieldset>
                        </form>
                    </div><!-- /registrazione -->                        

                </div>  
                <!-- /anagrafica --> 
```

谢谢指教

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T19:38:51.047

至于界面到底应该是什么样子，还不是很清楚。但是，请查看文档：http: [//jquerymobile.com/demos/1.1.0/docs/content/content-collapsible-set.html](http://jquerymobile.com/demos/1.1.0/docs/content/content-collapsible-set.html)

您粘贴的链接用于测试演示，但从那时起语法似乎发生了变化。

# excel - 调用用户窗体时 Excel 2007 VBA 宏停止

> ID：11298512
> 
> 赞同：0
> 
> 时间：2012-07-02T17:40:20.310
> 
> 标签：excel, vba, show, userform

我已经构建了几个星期的宏，突然部分无法正常工作。当我尝试通过 .Show 调用用户窗体时，由于某种原因，marco 会立即停止运行，并突出显示“.show”行。（即使我跳到用户窗体框，按钮也不起作用。）如果我按 F5，它会再次开始运行，但我显然不希望代码在程序中间停止运行。知道为什么会发生这种情况，尤其是当它过去没有发生的时候？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T19:02:32.330

事实证明，我的代码中有一个错误，它被隐藏了，因为我没有删除以前的“On Error Resume Next”。非常感谢悉达多！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-04T01:15:55.877

OP的结论答案可能与问题无关，而是巧合。

我有同样的事情。代码在 frm.show 上停止，因为 aboluteamente 没有正当理由。就好像那里有一个停靠点。我尝试了所有方法，但毫无疑问，解决方案是重新启动。

我知道这是一级答案，但它确实解决了这里的问题。我希望有人会在谷歌搜索和吐出 100 次不相关的解决方案尝试时省去自己的麻烦，尽管它很愚蠢，但只需重新启动即可修复它。

# objective-c - 合成属性在其类接口中是否需要指针？

> ID：11298513
> 
> 赞同：0
> 
> 时间：2012-07-02T17:40:21.760
> 
> 标签：objective-c, pointers

> **可能重复：**
> [如果您仅在 Objective-C 中使用属性，是否有任何理由声明 ivars？](https://stackoverflow.com/questions/4903651/is-there-any-reason-to-declare-ivars-if-youre-using-properties-exclusively-in-o)

这节课：

```
@interface MyClass
{
    Something* pointer;
}
@property (nonatomic, retain) Something* pointer;
@end

@implementation MyClass
@synthesize pointer
@end 
```

显然运行相同：

```
@interface MyClass
@property (nonatomic, retain) Something* pointer;
@end

@implementation MyClass
@synthesize pointer
@end 
```

创建综合属性时，是否还需要在其类接口中指向它的指针？我注意到无论我是否有指针，我的程序显然运行相同。声明指针是否更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T17:46:44.153

你曾经有过，但现在你没有了。编译器现在会自动为你填充它，所以你只需要声明它`@property`和`@synthesize`它。

# java - JNI 什么时候需要复制原始类型的数组？

> ID：11298518
> 
> 赞同：1
> 
> 时间：2012-07-02T17:40:47.183
> 
> 标签：java, performance, java-native-interface, sse, simd

我主要是一名 C++ 程序员，但我正在考虑将 Java 用于项目。出于性能原因，我将需要使用一些 SSE 内在函数（即使相对于普通 C++，这些函数也可以极大地提高速度）。

据我了解，在 Java 中执行此操作的方法是使用 JNI 并在 C 中调用 SSE 内在函数。但是，我在 JNI 文档中读到的内容让我有点不安，因为它说 JVM 可能会或可能不会创建副本的数组被发送到 C 并返回。

假设一个最先进的实现，比如 OpenJDK 7，当我请求指向 byte[]、short[]、int[] 或 float[] 的指针时，我应该什么时候真正期望复制？

*到目前为止，我发现的只是一些相互矛盾的说法。要被接受，答案必须说服我：例如提供证据或引用来源，而不仅仅是表达意见/猜测。*

**编辑**

1.  链接到[GetPrimitiveArrayCritical](http://docs.oracle.com/javase/1.5.0/docs/guide/jni/spec/functions.html#GetPrimitiveArrayCritical)
2.  正如我所提到的，在回答我的问题时假设 OpenJDK 7 是可以的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T18:21:18.577

我会考虑使用具有本机字节顺序的直接 ByteBuffer 。这样做的好处是它以某种方式使用 C 空间内存，这意味着您无需复制它即可在 Java 中访问它（反之亦然）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T18:01:09.000

> 到目前为止，我发现的只是一些相互矛盾的说法

不，这些声明并不矛盾，因为所说明的是您所要求的是***实现细节***，并且取决于您将使用的 JDK 实现。
您不应该期望所有实现都具有相同的行为，您应该查看哪个实现了您想要的。
为了给您一个实现差异的示例，`SUN`JDK 将代码传递`char[]`给`C`null 终止，而 IBM 没有。
所以你应该深入研究实现和测试。至于您的问题，我不确定为什么不会发生数组副本，因为我相信内存区域完全发生了变化

# sql - 根据表中列的值更新或插入

> ID：11298519
> 
> 赞同：1
> 
> 时间：2012-07-02T17:40:47.790
> 
> 标签：sql, oracle

> **可能重复：**
> [Oracle：如何 UPSERT（更新或插入表？）](https://stackoverflow.com/questions/237327/oracle-how-to-upsert-update-or-insert-into-a-table)

你们能给我一个关于如何在以下情况下进行的建议：

```
Read table 2 column 1 
if value says the record exists in table 1
update table 1 record with table 2 record details
else(value says the record does not exist in table 1)
insert table 1 record with table 2 record details 
```

我是 Oracle SQL 的初学者，如果有更好的方法，请告诉我..我正在考虑使用游标来解决这个问题..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T18:09:15.017

最简单的答案是使用以下[`merge`](http://psoug.org/reference/merge.html)语句：

```
MERGE INTO table1 a
USING ( select column1, column2 
          from table2 ) b
ON ( a.column1 = b.column1 )
WHEN MATCHED THEN 
  update set a.column2 = b.column2
WHEN NOT MATCHED THEN 
  insert (a.column1, a.column2)
  values (b.column1, b.column2) 
```

简单地说，这需要一切`select`。`table2`然后它将这个查询加入到`table1`条件中。如果有“匹配”，则更新，否则插入。

该[文档包含](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_9016.htm#SQLRF01606)有关您当前不需要的各种附加选项的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T17:52:56.120

看看合并语句。

[http://psoug.org/reference/merge.html](http://psoug.org/reference/merge.html)

# c++ - 重新排序可变参数

> ID：11298520
> 
> 赞同：10
> 
> 时间：2012-07-02T17:40:54.063
> 
> 标签：c++, c++11, metaprogramming, variadic-templates, perfect-forwarding

我遇到了重新排序提供给结构构造函数的可变参数列表的需要。根据类型重新排序后，参数将存储为元组。我的问题是如何做到这一点，以便现代 C++ 编译器（例如`g++-4.7`）不会生成不必要的加载或存储指令。也就是说，当使用可变大小的参数列表调用构造函数时，它会根据参数类型的排序有效地将每个参数推送到位。

这是一个具体的例子。假设每个参数的基本类型（没有引用、右值引用、指针或限定符）是`char`、`int`或`float`。我怎样才能使它`char`首先出现所有基本类型的参数，然后是所有基本类型`int`的参数（最后留下基本类型的参数`float`）。在同类基本类型的子列表中，不应违反给定参数的相对顺序。

示例：`foo::foo()`使用 arguments 调用`float a, char&& b, const float& c, int&& d, char e`。元组元组是`std::tuple<char, char, int, float, float>`，它的构造如下`tuple_type{std::move(b), e, std::move(d), a, c}`：

考虑下面定义的结构，并假设元功能`deduce_reordered_tuple_type`已经实现。您将如何编写构造函数以使其按预期工作？如果您认为 , 的代码对`deduce_reodered_tuple_type`您有用，我可以提供；有点长。

```
template <class... Args> struct foo
{
    // Assume that the metafunction deduce_reordered_tuple_type is defined.
    typedef typename deduce_reordered_tuple_type<Args...>::type tuple_type;
    tuple_type t_;

    foo(Args&&... args) : t_{reorder_and_forward_parameters<Args>(args)...} {}
}; 
```

**编辑 1** 我上面描述的技术确实在数学框架中有应用，这些框架大量使用表达式模板、可变参数模板和元编程来执行积极的内联。假设您希望定义一个运算符，该运算符采用多个表达式的乘积，每个表达式都可以通过引用、对 const 的引用或右值引用传递。（在我的例子中，表达式是条件概率表，运算是因子乘积，但矩阵乘法之类的东西也适用。）

您需要访问每个表达式提供的数据才能评估产品。因此，您必须移动作为右值引用传递的表达式，将通过引用传递的表达式复制到 const，并获取通过引用传递的表达式的地址。使用我上面描述的技术现在带来了几个好处。

1.  其他表达式可以使用统一的语法来访问该表达式的数据元素，因为所有繁重的元编程工作都是在类中预先完成的。
2.  我们可以通过将指针组合在一起并将较大的表达式存储在元组末尾来节省堆栈空间。
3.  实现某些类型的查询变得容易得多（例如检查存储在元组中的任何指针是否为给定指针起别名）。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T10:06:54.437

大家7月4日快乐！好的，给你。

事实证明，`g++-4.7`在 iniling 方面非常棒，并根据我的测试创建了相同的机器代码（重现结果的说明在代码下方）。

```
#include <iostream>
#include <tuple>
#include <typeinfo>
#include <type_traits>

template <class... Args>
struct sequence
{
    typedef std::tuple<Args...> tuple_type;
};

template <class U, class V>
struct sequence_cat;

template <class... U, class... V>
struct sequence_cat<sequence<U...>, sequence<V...>>
{
    typedef sequence<U..., V...> type;
};

template <class... V>
struct sequence_cat<void, sequence<V...>>
{
    typedef sequence<V...> type;
};

template <class... U>
struct sequence_cat<sequence<U...>, void>
{
    typedef sequence<U...> type;
};

template <>
struct sequence_cat<void, void>
{
    typedef void type;
};

template <class T>
struct undecorate
{
    typedef typename std::remove_reference<T>::type noref_type;
    typedef typename std::remove_pointer<noref_type>::type noptr_type;
    typedef typename std::remove_cv<noptr_type>::type type;
};

template <class T>
struct deduce_storage_type
{
    typedef T type;
};

template <class T>
struct deduce_storage_type<T&>
{
    typedef T* type;
};

template <class T>
struct deduce_storage_type<const T&>
{
    typedef T type;
};

template <class T>
struct deduce_storage_type<T&&>
{
    typedef T type;
};

template <class T, class... Args>
struct filter_type;

template <class T, class Arg, class... Args>
struct filter_type<T, Arg, Args...>
{
    static constexpr bool pred = 
    std::is_same<typename undecorate<Arg>::type, T>::value;

    typedef typename deduce_storage_type<Arg>::type storage_type;

    typedef typename
    std::conditional<
        pred,
        typename sequence_cat<
            sequence<storage_type>,
            typename filter_type<T, Args...>::type
        >::type,
        typename filter_type<T, Args...>::type
    >::type type;       
};

template <class T, class Arg>
struct filter_type<T, Arg>
{
    static constexpr bool pred =
    std::is_same<typename undecorate<Arg>::type, T>::value;

    typedef typename deduce_storage_type<Arg>::type storage_type;

    typedef typename
    std::conditional<pred, sequence<storage_type>, void>::type
    type;
};

template <class... Args>
struct deduce_sequence_type
{
    typedef typename filter_type<char, Args...>::type char_sequence;
    typedef typename filter_type<int, Args...>::type int_sequence;
    typedef typename filter_type<float, Args...>::type float_sequence;

    typedef typename
    sequence_cat<
        char_sequence,
        typename sequence_cat<
            int_sequence,
            float_sequence
        >::type
    >::type type;
};

template <class T>
struct get_storage_type
{
    static T apply(T t) { return t; }
};

template <class T>
struct get_storage_type<T&>
{
    static T* apply(T& t) { return &t; }
};

template <class T>
struct get_storage_type<const T&>
{
    static T apply(const T& t) { return t; }
};

template <class T>
struct get_storage_type<T&&>
{
    static T&& apply(T&& t) { return std::move(t); }
};

template <class T, class Arg>
struct equals_undecorated_type
{
    static constexpr bool value =
    std::is_same<typename undecorate<Arg>::type, T>::value;
};

template <bool Pred, bool IsNextVoid, class T, class... Args>
struct filter_parameter_impl;

template <class T, class Arg1, class Arg2, class... Args>
struct filter_parameter_impl<false, false, T, Arg1, Arg2, Args...>
{
    typedef typename filter_type<T, Arg2, Args...>::type sequence_type;
    typedef typename sequence_type::tuple_type tuple_type;

    static constexpr bool pred = equals_undecorated_type<T, Arg2>::value;

    static constexpr bool is_next_next_void =
    std::is_same<typename filter_type<T, Args...>::type, void>::value;

    static tuple_type apply(Arg1&&, Arg2&& arg2, Args&&... args)
    {
        return filter_parameter_impl<
            pred, is_next_next_void, T, Arg2, Args...
        >::apply(
            std::forward<Arg2>(arg2),
            std::forward<Args>(args)...
        );
    }
};

template <class T, class Arg1, class Arg2, class... Args>
struct filter_parameter_impl<false, true, T, Arg1, Arg2, Args...>
{
    static void apply(Arg1&&, Arg2&&, Args&&...) {}
};

template <class T, class Arg1, class Arg2, class... Args>
struct filter_parameter_impl<true, false, T, Arg1, Arg2, Args...>
{
    typedef typename
    filter_type<T, Arg1, Arg2, Args...>::type
    sequence_type;

    typedef typename sequence_type::tuple_type tuple_type;

    static constexpr bool pred = equals_undecorated_type<T, Arg2>::value;

    static constexpr bool is_next_next_void =
    std::is_same<typename filter_type<T, Args...>::type, void>::value;

    static tuple_type apply(Arg1&& arg1, Arg2&& arg2, Args&&... args)
    {
        return std::tuple_cat(
            std::make_tuple(get_storage_type<Arg1>::apply(arg1)),
            filter_parameter_impl<
                pred, is_next_next_void, T, Arg2, Args...
            >::apply(
                std::forward<Arg2>(arg2),
                std::forward<Args>(args)...
            )
        );
    }
};

template <class T, class Arg1, class Arg2, class... Args>
struct filter_parameter_impl<true, true, T, Arg1, Arg2, Args...>
{
    typedef typename filter_type<T, Arg1>::type sequence_type;
    typedef typename sequence_type::tuple_type tuple_type;

    static tuple_type apply(Arg1&& arg1, Arg2&&, Args&&...)
    {
        return std::make_tuple(get_storage_type<Arg1>::apply(
            std::forward<Arg1>(arg1)
        ));
    }
};

template <class T, class Arg1, class Arg2>
struct filter_parameter_impl<false, false, T, Arg1, Arg2>
{
    typedef typename filter_type<T, Arg2>::type sequence_type;
    typedef typename sequence_type::tuple_type tuple_type;

    static tuple_type apply(Arg1&&, Arg2&& arg2)
    {
        return std::make_tuple(get_storage_type<Arg2>::apply(
            std::forward<Arg2>(arg2)
        ));
    }
};

template <class T, class Arg1, class Arg2>
struct filter_parameter_impl<false, true, T, Arg1, Arg2>
{
    static void apply(Arg1&&, Arg2&&) {}
};

template <class T, class Arg1, class Arg2>
struct filter_parameter_impl<true, false, T, Arg1, Arg2>
{
    typedef typename filter_type<T, Arg1>::type sequence_type;
    typedef typename sequence_type::tuple_type tuple_type;

    static tuple_type apply(Arg1&& arg1, Arg2&& arg2)
    {
        return std::make_tuple(
            get_storage_type<Arg1>::apply(std::forward<Arg1>(arg1)),
            get_storage_type<Arg2>::apply(std::forward<Arg2>(arg2))
        );
    }
};

template <class T, class Arg1, class Arg2>
struct filter_parameter_impl<true, true, T, Arg1, Arg2>
{
    typedef typename filter_type<T, Arg1, Arg2>::type sequence_type;
    typedef typename sequence_type::tuple_type tuple_type;

    static tuple_type apply(Arg1&& arg1, Arg2&&)
    {
        return std::make_tuple(
            get_storage_type<Arg1>::apply(std::forward<Arg1>(arg1))
        );
    }
};

template <class T, class... Args>
struct filter_parameter;

template <class T, class Arg, class... Args>
struct filter_parameter<T, Arg, Args...>
{
    typedef typename filter_type<T, Arg, Args...>::type sequence_type;

    typedef typename std::conditional<
        std::is_same<sequence_type, void>::value,
        void,
        typename sequence_type::tuple_type
    >::type tuple_type;

    static constexpr bool pred = equals_undecorated_type<T, Arg>::value;

    static constexpr bool is_next_void =
    std::is_same<typename filter_type<T, Args...>::type, void>::value;

    static tuple_type apply(Arg&& arg, Args&&... args)
    {
        return filter_parameter_impl<
            pred, is_next_void, T, Arg, Args...
        >::apply(std::forward<Arg>(arg), std::forward<Args>(args)...);
    }
};

template <bool Is1Void, bool Is2Void, bool Is3Void, class... Args>
struct get_tuple_impl;

template <class... Args>
struct get_tuple_impl<false, false, false, Args...>
{
    typedef typename deduce_sequence_type<Args...>::type sequence_type;
    typedef typename sequence_type::tuple_type tuple_type;

    static tuple_type apply(Args&&... args)
    {
        return std::tuple_cat(
            filter_parameter<char, Args...>::apply(
                std::forward<Args>(args)...
            ),
            filter_parameter<int, Args...>::apply(
                std::forward<Args>(args)...
            ),
            filter_parameter<float, Args...>::apply(
                std::forward<Args>(args)...
            )
        );
    }
};

template <class... Args>
struct get_tuple
{
    typedef typename deduce_sequence_type<Args...>::type sequence_type;

    typedef typename std::conditional<
        std::is_same<sequence_type, void>::value,
        void,
        typename sequence_type::tuple_type
    >::type tuple_type;

    static constexpr bool is1void =
    std::is_same<typename filter_type<char, Args...>::type, void>::value;
    static constexpr bool is2void =
    std::is_same<typename filter_type<int, Args...>::type, void>::value;
    static constexpr bool is3void =
    std::is_same<typename filter_type<float, Args...>::type, void>::value;

    static tuple_type apply(Args&&... args)
    {
        return get_tuple_impl<is1void, is2void, is3void, Args...>::
            apply(std::forward<Args>(args)...);
    }
};

template <class... Args>
struct foo
{
    typedef typename deduce_sequence_type<Args...>::type sequence_type;
    typedef typename sequence_type::tuple_type tuple_type;

    tuple_type t_;

    foo(Args&&... args) : t_{} {}
};

int main()
{
    char a = 5;
    const int b = 6;
    float c = 7;
    int d = 8;
    float e = 9;
    char f = 10;

    auto x = get_tuple<char&, const int&, float&, int&, float&&, char&>::
        apply(a, b, c, d, std::move(e), f);
    //std::tuple<char*, char*, int, int*, float*, float> x{&a, &f, b, &d, &c, std::move(f)};

    std::cout << typeid(x).name() << std::endl;

    return 0;
} 
```

为了重现结果，请执行以下操作（假设您已安装 g++-4.7）。

```
g++ -std=c++11 -Wall -Ofast -march=native variadic_reorder.cpp -S -o with_templates.s
// Comment out the line in main, and comment the line containing auto x, as well as the line below it.
g++ -std=c++11 -Wall -Ofast -march=native variadic_reorder.cpp -S -o without_templates.s
vimdiff with_templates.s without_templates.s 
```

我注意到的唯一区别是标签名称之类的东西。否则，生成的机器代码是相同的。

**编辑 1** 我将接受我自己的答案，直到其他人发布比我所拥有的更优雅的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T07:29:52.023

我没有时间对此进行试验，但是*如果*您的编译器在排列转发参数时生成了太多动作，我建议通过`std::forward_as_tuple`. 元组是具有具体布局的数据结构，构建它会鼓励编译器按照您想要的顺序将所有内容一次全部放入内存。

另一方面，它不太可能将参数提升到寄存器并绕过简单函数的堆栈。只要元组仅用作纯值（不进行引用），就没有任何保证，因为在 as-if 规则下，它的成员不需要任何地址。

> 我们可以通过将指针组合在一起并将较大的表达式存储在元组末尾来节省堆栈空间。

左值引用由 ABI 实现为指针，但您指定将它们分组为数据值。如果要遵守本机传递语义，则应将右值引用视为与左值引用相同。（我假设你只会移动类类型。）所以排序问题比所说的稍微复杂一些，因为你想将参数排序为值和指针类别，然后按基类型对它们进行排序。

至于排序算法本身，我会尝试从输入包中弹出并推送到一组输出元组，队列样式，然后将输出元组与`std::tuple_cat`. 这将是最简单的实现，稳定的，并且应该达到编译器的常见情况优化。不要实现旨在在内存中就地运行的算法，因为 TMP 不能那样工作。

至于将排序结果转换为将参数置换为参数的函数`forward_as_tuple`，我不太确定。您可能必须处理索引。

在承诺所有这些之前，您要非常确定这些好处是值得的。

# powershell - ftp via powershell - 如何指示成功

> ID：11298522
> 
> 赞同：0
> 
> 时间：2012-07-02T17:41:05.907
> 
> 标签：powershell, ftp

我正在使用 Powershell 脚本自动将 .txt 发送到 FTP 站点。当我在 powershell 中执行它时，什么也没有发生。root\prompt 只是出现......没有成功的消息。我如何判断它是否有效？这是我的脚本以防万一。

* * *

```
$localfile = "D:\Export\TESTING.txt"
$remotefile = "/TESTING.txt"
$ftphost = "ftp://ftp.site.com"
$URI = $ftphost + $remotefile
$username="USERNAME"
$password="1234"
function Get-FTPFile 
($URI,$localfile,$username,$password){
$credentials=New-Object System.Net.NetworkCredential
($username,$password)
$ftp=[System.Net.FtpWebRequest]::Create($URI)
$ftp.Credentials=$credentials
$ftp.UseBinary=1
$ftp.KeepAlive=0
$response=$ftp.GetResponse()
$responseStream = $response.GetResponseStream()
$file = New-Object 
IO.FileStream ($localfile,[IO.FileMode]::Create)
[byte[]]$buffer = New-Object byte[] 1024
$read = 0
do{
$read=$responseStream.Read($buffer,0,1024)
$file.Write($buffer,0,$read)
}
while ($read -ne 0)$file.close()
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T20:33:25.390

使用`WebRequestMethods.Ftp.GetFileSize`以下上传完成来确认上传的文件大小与本地文件大小匹配。

您还可以使用 try/catch 块在读/写操作期间检查异常。没有例外会让您确信上传成功（即没有消息就是好消息）。

# html - HTML5 Web SQL 不断重复并破坏旧数据库

> ID：11298523
> 
> 赞同：2
> 
> 时间：2012-07-02T17:41:06.670
> 
> 标签：html, safari, webkit, web-sql

我正在为 Safari 制作一个数据库应用程序。因此，我正在遵循 Apple 制作的本指南：[Link](http://developer.apple.com/library/safari/#documentation/iPhone/Conceptual/SafariJSDatabaseGuide/UsingtheJavascriptDatabase/UsingtheJavascriptDatabase.html)。

到目前为止，我已经制作了这个“类”原型。它可以工作，但它不断复制数据库（它们只是在 Safari Inspector 工具中不断堆积）（我没有从 1.0 更改版本）：

```
function Database() {
    this.DB = null;
    this.shortName = 'gamedb';
    this.version = '1.0';
    this.displayName = 'Database';
    this.maxSize = 5 * 1024 * 1024;

    init: (function() {

    })

    this.initDB = function() {
        try {
            if (!window.openDatabase) {
                alert('Error: Databases are not supported.');
            }
            else {
                this.DB = openDatabase(this.shortName, this.version, this.displayName, this.maxSize);
            }

            return true;
        }
        catch(e) {
            if (e == 2) {
                // Version number mismatch.
                console.log("Error: Invalid database version.");
            }
            else {
                console.log("Error: Unknown, " + e + ".");
            }

            return;
        }
    }

    this.query = function(query) {
        if (query == undefined) {
            query = '';
        }

        query = query + ';'; // Add the ending semi-colon

        this.DB.transaction(
            function (transaction) {
                transaction.executeSql(
                    query,
                    [],
                    this.nullDataHandler,
                    this.errorHandler
                );
            }
        );
    }

    this.nullDataHandler = function() {
        return 0;
    }

    this.errorHandler = function(error) {
        return 0;
    }

} 
```

这是我的 main.js 文件，其中包含我的 jQuery 句柄和数据库原型的实例化：

```
$(document).ready(function() {
    var DB = new Database();
    DB.initDB();
    DB.query('CREATE TABLE IF NOT EXISTS users(id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL)');
    DB.query('INSERT INTO users(name) VALUES ("Jackson")');
}); 
```

即使只是空白地运行这一行也会产生重复：

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>X</title>
    <style>
        html, body {
            background: #202020;
            color: #8d9d6a;
        }
    </style>
    <script type="text/javascript">
        var shortName = 'mydatabase';
        var version = '1.0';
        var displayName = 'My Important Database';
        var maxSize = 65536; // in bytes
        var db = openDatabase(shortName, version, displayName, maxSize);
    </script>
</head>
<body>
    Content
</body>
</html> 
```

笔记：

*   我关闭了扩展程序

*   开发者菜单没有变化（没有被禁用或阻止）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-22T01:40:04.007

我在 chrome 和 safari 中都遇到了这个问题。当我保存一条记录时，它会出现多次，并且检查器会显示 webSQL db 的重复项（50 个或更多！）。对我来说，事实证明我在保存后不久就调用了 SELECT 以更新视图。我将它移到了成功函数中，从而解决了问题。我只能认为浏览器会感到困惑并在检查器中生成多个数据库。这可能不是同一个问题，但它似乎足够接近提及。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-10T15:06:29.470

对于像我这样新手的任何人的辅助信息。

我有一个从多个表中选择的查询，导致我的显示重复。愚蠢的问题，通过明显选择单个表来简单解决

```
var showLearnerSQL = "SELECT * FROM tblLearnerInfo, tblDrive";// Not a great idea
var showLearnerSQL = "SELECT * FROM tblLearnerInfo; // Great idea 
```

# asp.net - 在 ASP.NET 网站中计算帖子排名的位置和频率

> ID：11298524
> 
> 赞同：1
> 
> 时间：2012-07-02T17:41:07.970
> 
> 标签：asp.net, multithreading, ranking

我有一个算法来计算网站上帖子的排名（使用投票、视图、评论和寿命）。我将使用共享主机提供商，所以我想我会在 Global.asax 的 Application_Start 方法中启动一个线程。

这是唯一/最好的方法吗？

我应该多久计算一次排名？（结果将存储在与帖子相同的数据库表中。）

你会使用 Thread.Sleep( *T* ) 让计算经常每*T发生一次吗？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T17:48:23.717

另一种方法是在全局中使用 Application_BeginRequest，并且每 XX 分钟进行一次计算:)。

当然，这完全取决于您的排名数据的存储方式和数据量。当有人打开具有排名内容的页面并将其缓存以供下一个用户使用时，对于较小的站点而言，动态计算评级可能就足够了。

简而言之，这完全取决于您必须处理的数据，您发布的信息越多。我们能提供的帮助越多。自动取款机我们大多可以抛出猜测

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T17:56:27.770

为什么需要计算寿命？）它可以从 UI 的开始或结束日期即时计算。

以防万一。其余的你可以在你的数据库中使用触发器。每个新帖子或视图或其他内容都可能更新相应的计数器。

# javascript - 将屏幕阅读器的焦点设置在 ember 中的模式警报上

> ID：11298525
> 
> 赞同：3
> 
> 时间：2012-07-02T17:41:15.040
> 
> 标签：javascript, accessibility, ember.js, wai-aria

我正在尝试使我的 ember.js 应用程序更易于访问，并且正在通过 Apple 的内置 VoiceOver 实用程序进行测试。我在视图中添加了必要的[ariaRoles](http://docs.emberjs.com/symbols/Ember.View.html#ariaRole)，并在导航目的不明确的地方添加了 aria-label 属性。我在将注意力集中在模态警报上时遇到了问题，因为读者的注意力停留在模态后面的页面项目上。有没有人有处理屏幕阅读器模式警报的经验？我的印象是，在我的视图中声明“ariaRole:'alertDialog'”会为此类对话框设置适当的角色，并且此角色的焦点行为可能在屏幕阅读器之间有所不同。谢谢！！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T19:21:01.147

我对模态的东西没有第一手经验。从本质上讲，您的问题是您正在扮演 ARIA 角色，并希望它能够发挥作用。你需要做的还不止这些。您需要牢记以下几点：

*   按下链接/按钮后，将焦点移至模式窗口/对话框/弹出窗口。大多数模态元素只是一个`<div>`. 您可以赋予 的`<div>`属性`tabindex="-1"`。
*   在模态窗口内捕获焦点。
*   允许用户按退出键关闭
*   关闭时，将焦点移回链接/按钮

**资源**

*   [带灯箱的键盘可访问性](http://www.456bereastreet.com/archive/200910/lightboxes_and_keyboard_accessibility/)
*   [UX StackExchange 上的类似问题](https://ux.stackexchange.com/questions/18050/how-can-one-improve-accessibility-of-modal-windows-in-a-browser)
*   [Demo modal dialog](http://webhipster.com/testing/accessibility/modal-dialog-latest/) - 我认为这仍在开发中（我已经有一段时间没有收到作者的消息了）。
*   [jQuery Google Group 线程](http://groups.google.com/group/jquery-a11y/msg/0f99654f279868e0) （Hans 是这方面的佼佼者或其中之一）

# java - 使用 util.zip 压缩文件 无目录

> ID：11298529
> 
> 赞同：0
> 
> 时间：2012-07-02T17:41:26.060
> 
> 标签：java, zip

我有以下情况：我可以使用以下方法压缩文件：

```
public boolean generateZip(){
    byte[] application = new byte[100000];
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    // These are the files to include in the ZIP file
    String[] filenames = new String[]{"/subdirectory/index.html", "/subdirectory/webindex.html"};

    // Create a buffer for reading the files

    try {
        // Create the ZIP file

        ZipOutputStream out = new ZipOutputStream(baos);

        // Compress the files
        for (int i=0; i<filenames.length; i++) {
            byte[] filedata  = VirtualFile.fromRelativePath(filenames[i]).content();
            ByteArrayInputStream in = new ByteArrayInputStream(filedata);

            // Add ZIP entry to output stream.
            out.putNextEntry(new ZipEntry(filenames[i]));

            // Transfer bytes from the file to the ZIP file
            int len;
            while ((len = in.read(application)) > 0) {
                out.write(application, 0, len);
            }

            // Complete the entry
            out.closeEntry();
            in.close();
        }

        // Complete the ZIP file
        out.close();
    } catch (IOException e) {
        System.out.println("There was an error generating ZIP.");
        e.printStackTrace();
    }
    downloadzip(baos.toByteArray());
} 
```

这很好用，我可以下载包含以下目录和文件结构的 xy.zip：
子目录/
----index.html
----webindex.html

我的目标是完全省略子目录，并且 zip 应该只包含这两个文件。有什么办法可以做到这一点？（我在 Google App Engine 上使用 Java）。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T17:50:09.213

如果您确定`filenames`数组中包含的文件是唯一的（如果您省略了目录），请更改构造`ZipEntry`s 的行：

```
String zipEntryName = new File(filenames[i]).getName();
out.putNextEntry(new ZipEntry(zipEntryName)); 
```

这使用[java.io.File#getName()](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#getName%28%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T17:55:11.720

您可以使用[Apache Commons io](http://commons.apache.org/io/)列出所有文件，然后将它们读取到`InputStream`

替换下面的行

```
String[] filenames = new String[]{"/subdirectory/index.html", "/subdirectory/webindex.html"} 
```

与以下

```
 Collection<File> files = FileUtils.listFiles(new File("/subdirectory"), new String[]{"html"}, true);
    for (File file : files)
    {
        FileInputStream fileStream = new FileInputStream(file);
        byte[] filedata = IOUtils.toByteArray(fileStream);
        //From here you can proceed with your zipping.
    } 
```

如果您有问题，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T17:51:01.443

您可以使用该`isDirectory()`方法`VirtualFile`

# c# - 使用javascript asp.net的网格列总数

> ID：11298536
> 
> 赞同：1
> 
> 时间：2012-07-02T17:41:48.430
> 
> 标签：c#, javascript, asp.net

我想在 javascript 中计算 textchange 的网格列总数。

如何在javascript中循环遍历网格？

我`onblur`为文本框控件的事件添加了一个处理程序。我能够获得列更改的行总数。

如何获取文本框更改的列总数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T21:08:19.190

解决方案：

添加`onblur`属性以控制代码后面和 javascript 解析浮点控件并添加如下值：

```
for(var i=0; i < GridRows; i++)
{
     TotalRH = parseFloat(TotalRH) + 
               parseFloat(document.getElementById('MainContent_gvGT_txtRegularHrs_' + i).value);            
     TotalOH = parseFloat(TotalOH) +
               parseFloat(document.getElementById('MainContent_gvGT_txtOverTimeHrs_' + i).value);
}
document.getElementById('MainContent_gvGT_txtTotalRegularHours').value = TotalRH;
document.getElementById('MainContent_gvGT_txtTotalOverTimeHours').value = TotalOH; 
```

# excel - MS Excel 创建要在公式中使用的虚拟列

> ID：11298537
> 
> 赞同：0
> 
> 时间：2012-07-02T17:41:52.457
> 
> 标签：excel, formula

我想做一些类似于将 1/x 从 1 求和到 100 的事情，而不需要创建额外的列来帮助计算。我希望我的第一列是数字 1 到 100。我希望一个单元格显示 1/x 的总和，其中 x 是第一列中的每个单元格。目前我能想到的唯一方法是创建第二列来为每个单独的单元格做 1/x，然后对第二列求和。是否有任何解决方案可以在不必创建第二列的情况下执行此操作？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T17:47:38.163

您可以使用此“数组公式”

=总和(1/A1:A100)

用 CTRL+SHIFT+ENTER 确认

....或使用 SUMPRODUCT 避免数组条目

=SUMPRODUCT(1/A1:A100)

两个版本都假设您在 A1:A100 中没有零（或空白）

如果您可能有零或空白，请使用此数组公式

=SUM(IF(A1:A100,1/A1:A100))

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T17:46:48.680

如果您的意思是`1 + 1/2 + 1/3 + ... + 1/100`，请使用以下[数组公式](http://office.microsoft.com/en-us/excel-help/introducing-array-formulas-in-excel-HA001087290.aspx)（通过 Ctrl+Shift+Enter 而不是仅 Enter 输入）：

```
=sum(1/row(A1:A100)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T17:48:58.537

您需要使用如下数组公式：

```
{=SUM(1/A1:A100)} 
```

其中 A1:A100 包含 1 到 100

您可以通过键入公式 as`=SUM(1/A1:A100)`然后按 Control-Shift-Enter 创建数组公式。

如果你做对了，那么公式就会显示在大括号 {} 中，但你自己不要输入大括号。

# android - 以编程方式对 Android 模拟器的多点触控支持

> ID：11298541
> 
> 赞同：2
> 
> 时间：2012-07-02T17:42:26.467
> 
> 标签：android, android-emulator, multi-touch

从最新的 SDK 开始，通过系留电话支持多点触控。我想知道是否以编程方式支持它。换句话说，我们可以使用自动化测试套件来测试多点触控触发功能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T17:50:25.090

不，这不对。但是从 sdk-r20 你可以在模拟器中使用连接到计算机的真手机来使用多点触控。看看[这个](http://tools.android.com/tips/hardware-emulation)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-10T18:30:26.757

我正在解决同样的问题。首先，我进行了测试以确保所有系留信号都通过（我必须修改 SDkController 应用程序才能获得连接）。现在我试图弄清楚为什么当我点击屏幕的一侧或任何地方时，它只显示在右上角（而来自模拟器的调试器给出了正确的东西）。错误[在这里解释](https://stackoverflow.com/questions/34209092/input-multi-touch-not-correct-coordinate-for-android-google-emulator)。

但是，我确实想出了如何通过无线方式和通过终端进行操作。如果那是您所要求的，则程序几乎相同。在断开设备连接之前，您需要 root 设备或执行 adb port 命令（连接 USB），它会以无线方式工作。

# database - 获取列表中的相关数据

> ID：11298543
> 
> 赞同：1
> 
> 时间：2012-07-02T17:42:36.123
> 
> 标签：database, performance

我想打印数据库表中的项目列表，以及每个相关子项目的小列表（最多 10 个项目）。

例如，我有这两个表：

```
ITEMS

id: integer
name: string

SUBITEMS

id: integer
name: string
item_id: integer 
```

因此，一个项目可以有许多子项目。

我想打印这样的东西：

```
Item 1
this item has: subitem 1, subitem 2, subitem 3

Item 2
this item has: subitem 4, subitem 5, subitem 6

Item 3
this item has: subitem 2, subitem 4, subitem 7 
```

考虑到性能，我怎么能得到这个？正如我所说，每个项目可以有许多子项目，但我最多显示 10 个。

如果我使用连接进行选择，我认为当分页时，例如每页 25 个项目和 100 个用户查询时，它可能会给数据库带来太大压力。所以，我认为这不是一个好的解决方案。

我想到了一个解决方法，有些脏：向ITEMS表添加一个名为subitems_summary（文本类型）的新字段，每次将子项分配给一个项目时，我都会选择加入两个表，并存储结果在那里，所以我可以稍后格式化该字段中的数据。例如，在上面的清单中，项目 3 的 subitems_summary 字段将是：“subitem 2; subitem 4; subitem 7”。

你怎么看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T17:46:41.690

除非您的项目表确实很大，否则连接将足够快地完成此操作。这是最干净的解决方案，因此您应该首先实施。然后你可以测量性能，看看它是否真的太慢了​​。我想你会发现它会足够快。如果没有，您还可以尝试为在您所做的查询中经常使用的列添加索引。这将为 DBMS 提供更强大的优化选项，使其可以选择进行。

您的 DBMS 通常非常擅长优化此类查询，因此在进行自定义优化之前，您应该先了解查询的速度有多快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T22:27:20.463

由于我没有得到更多答案，我将发表我的意见。

正如 Oleksi 所说，DBMS 足以运行联合查询。这可能适用于访问者数量少的情况。但是要注意缩放，这不是做复杂事情的优化方式。

我认为有一些我很想阅读的有趣技术，但我更倾向于从一开始就优化查询，至少是一点点。在我看来，故意使用连接不是一个好主意。出于这个原因，在专业网站中最好复制字段。

无论如何，为了实现我的要求，我会这样做：[https ://stackoverflow.com/a/11301759/267705](https://stackoverflow.com/a/11301759/267705)

# php - ZipArchive 类 PHP 安全问题

> ID：11298549
> 
> 赞同：0
> 
> 时间：2012-07-02T17:43:17.940
> 
> 标签：php, linux, security

我有以下 PHP 代码

```
// Check if the upload is setted
if
(
    isset($_FILES['file']['name']) && !empty($_FILES['file']['name']) && 
    isset($_FILES['file']['type']) && !empty($_FILES['file']['type']) &&
    isset($_FILES['file']['size']) && !empty($_FILES['file']['size'])
)
{
    $UploadIsSetted = true;
    $UploadIsBad = false;

    $UploadExtension = pathinfo($_FILES['file']['name'], PATHINFO_EXTENSION);

    // Check if the upload is good
    require "../xdata/php/website_config/website.php";
    $RandomFoo = rand(1000999999,9999999999);

    if (($_FILES["file"]["size"] < ($MaxAvatarPictureSize*1000000)))
    {
        if ($_FILES["file"]["error"] > 0)
        {
            $UploadIsBad = true;
            $hrefs->item(0)->setAttribute("Error","true");
            $hrefs->item(0)->setAttribute("SomethingWrong","true");
        }
        else
        {
            move_uploaded_file($_FILES["file"]["tmp_name"],"../upload/tmp/".$RandomFoo.".file");    
        }
    }
    else
    {
        // The file is too big
        $UploadIsBad = true;
        $hrefs->item(0)->setAttribute("Error","true");
        $hrefs->item(0)->setAttribute("UploadTooBig","true");
    }
}
else
{
    $UploadIsSetted = false;
}

$ZipFile = new ZipArchive;
$ZipFile->open('../upload/tmp/'.$LastFilename.'.zip',ZIPARCHIVE::CREATE);
$ZipFile->addFile('../upload/tmp/'.$RandomFoo.'.file',$RandomFoo.".".$UploadExtension);
$ZipFile->close(); 
```

现在我最担心的是用户可以上传任何内容，所以我该如何防止：

*   上传 2GB 3GB 文件
*   装卸
*   上传某种扭曲的漏洞利用，最终会改变我的服务器安全性
*   缓冲区溢出
*   具有任意代码注入的文件名

我的意思是，这个脚本有多安全？

我现在正在运行windows，我将切换到linux

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T18:03:43.187

四个你的其他问题：

> 装卸

那是复杂的部分。让我谷歌你一些想法：

*   [防止PHP脚本被淹没](https://stackoverflow.com/questions/10155339/prevent-php-script-from-being-flooded)
*   [快速简单的防洪？](https://stackoverflow.com/questions/3026640/quick-and-easy-flood-protection)- 使用随机数，时间+将其绑定到会话
*   如果它不会对可用性造成太大影响，请使用验证码。

> 上传某种扭曲的漏洞利用，最终会改变我的服务器安全性

使用命令行病毒扫描程序（`f-prot`或`clamav`）扫描上传的文件。您可能会在 PHP 本身中使用一个简单的正则表达式扫描器（例如，探测图像文件中的 HTMLish 内容），但这不是一个实际的安全功能；不要重新发明轮子。

> 缓冲区溢出

PHP 通常不易受缓冲区溢出的影响。

好吧，开玩笑的。但是你不能在用户空间做任何事情。但是推动字符串并不是什么大问题。这在脚本语言中非常可靠且不可利用，只要您知道如何在哪种情况下转义。

> 具有任意代码注入的文件名

至少，您应该*始终*使用它[`basename()`](http://php.net/basename)来避免路径遍历漏洞。如果您想保留用户指定的文件名，则可以使用正则表达式白名单。`=preg_replace('/[^\w\s.]/', '', $fn)`作为粗略的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T17:51:17.680

您的行`if (($_FILES["file"]["size"] < ($MaxAvatarPictureSize*1000000)))`已经将可接受的文件大小限制为`$MaxAvatarPictureSize`兆字节。虽然`$MaxAvatarPictureSize`您提供的代码中似乎没有设置。我的猜测应该是最大 1 或 2。也未设置`$LastFilename`，可能还有其他一些。

还要`if($UploadIsBad === false) { /* do zipping */ }`在压缩部分周围放置一个，以避免压缩太大或无效的文件。

# wix - 使用 Wix 安装程序卸载应用程序时在 APPDATAFOLDER 目录中保留数据

> ID：11298552
> 
> 赞同：1
> 
> 时间：2012-07-02T17:43:52.323
> 
> 标签：wix, wix3.5, wix3

`APPDATAFOLDER`安装 Wix 应用程序时，我在应用程序数据 ( ) 文件夹中存储了一些文件。Wix 会正确创建子文件夹，`APPDATAFOLDER`但在卸载时，它也会删除该文件夹。

我想`APPDATAFOLDER`通过在用户卸载应用程序时不删除它来保留所有数据。有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T20:07:16.657

据我所知，Windows 安装程序不会删除它未安装的任何内容（除非您明确告诉它使用[RemoveFile](http://wix.sourceforge.net/manual-wix3/wix_xsd_removefile.htm)执行此操作）。因此，如果您担心保留安装后创建的用户数据，您可能无需执行任何操作。

如果您正在谈论已安装的组件，您可以用`Permanent="Yes"`. 这将防止它们被卸载。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-03T05:10:41.467

除了什么都不做之外，您还可以在您的组件、文件和目录上使用标准的 WiX 标志`NOT REMOVE`。这很容易。例如

```
 <Component Id="" Guid="" >NOT REMOVE</Component> 
```

WiX 会将此组件标记为仅安装和修补，而不是卸载。

# ruby-on-rails - Nokogiri osx 10.5.8 libxml 不兼容库版本

> ID：11298553
> 
> 赞同：8
> 
> 时间：2012-07-02T17:43:54.373
> 
> 标签：ruby-on-rails, nokogiri, libxml2

我在这里遇到了一个绊脚石，试图让 Nokogiri 在 osx 10.5.8 上工作。

试过[http://nokogiri.org/tutorials/installing_nokogiri.html](http://nokogiri.org/tutorials/installing_nokogiri.html) 然后[http://martinisoftware.com/2009/07/31/nokogiri-on-leopard.html](http://martinisoftware.com/2009/07/31/nokogiri-on-leopard.html)

一位同事也一直在尝试提供帮助，但无法摆脱此错误消息：

库未加载：/usr/local/lib/libxml2.2.dylib ... 原因：库版本不兼容：nokogiri.bundle 需要 11.0.0 或更高版本，但 libxml2.2.dylib 提供 10.0.0 版本

我们尝试使用新安装的库编译 gem，但仍然遇到此错误。

非常感谢任何帮助或指示！

我得到了 osx 10.6 的副本——这有帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-16T04:14:52.550

实际上，答案在： http: [//nokogiri.org/tutorials/installing_nokogiri.html](http://nokogiri.org/tutorials/installing_nokogiri.html)

```
brew install libxml2 libxslt
brew link libxml2 libxslt 
```

然后从源代码安装 libiconv：

```
wget http://ftp.gnu.org/pub/gnu/libiconv/libiconv-1.13.1.tar.gz
tar xvfz libiconv-1.13.1.tar.gz
cd libiconv-1.13.1
./configure --prefix=/usr/local/Cellar/libiconv/1.13.1
make
sudo make install 
```

然后（最后）安装 nokogiri：

```
gem install nokogiri --
                    --with-xml2-include=/usr/local/Cellar/libxml2/2.7.8/include/libxml2 
                    --with-xml2-lib=/usr/local/Cellar/libxml2/2.7.8/lib 
                    --with-xslt-dir=/usr/local/Cellar/libxslt/1.1.26 
                    --with-iconv-include=/usr/local/Cellar/libiconv/1.13.1/include 
                    --with-iconv-lib=/usr/local/Cellar/libiconv/1.13.1/lib 
```

确保您拥有 libxml2 的版本，因为它们在 /usr/local/Cellar/libxml 中（在我的情况下是 2.8.0）。

快乐编码！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-02-06T23:08:04.150

以下在 OS-X 10.9.1 (Mavericks) 上为我工作：

```
brew install libxml2 libxslt
gem install nokogiri -- --with-xslt-dir=/usr/local/opt/libsxlt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T19:58:14.730

我刚刚跳上我的 10.5 机器并记得在那里获得了 Nokogiri 的工作版本 - 所以查看了命令历史记录，这是我使用 Homebrew 的确切命令的剪切粘贴：

```
brew install libxml2 libxslt
brew install libiconv
sudo gem install nokogiri -- --with-xslt-dir=/usr/local/homebrew/Cellar/libxslt/1.1.26 
```

虽然我仍然会升级到 10.6。

## 较旧的答案：

[这个答案可能会有所帮助](https://stackoverflow.com/a/6337289/123033)。在抵制 OS X 包管理器后，我屈服于 Homebrew，它帮助我解决了类似的问题。这是针对 RVM（我记得经历了类似的过程），但关键是告诉 nokogiri gem 使用新的 libxml2 安装。

顺便说一句（稍微偏离主题但如果您要使用 10.6 则相关）OOI您可以在终端[中检查您的 Mac 是否有 64 位 EFI ：](http://www.macobserver.com/tmo/article/checking_32_or_64-bit_kernel_boot_mode_in_snow_leopard/)

```
ioreg -l -p IODeviceTree | grep firmware-abi 
```

你应该看到（如果是 64 位）：

```
"firmware-abi" = <"EFI64"> 
```

虽然（如对该文章的回复中所详述）这并不意味着一切都一帆风顺......

# cocoa - ALT+ENTER，如何检测 NSString 中的换行符？

> ID：11298557
> 
> 赞同：1
> 
> 时间：2012-07-02T17:44:06.863
> 
> 标签：cocoa, newline, textfield

在我的 Cocoa 应用程序中，我有一个文本字段，用户应该通过按 ALT+ENTER 来插入换行符。没关系......当我将它的值作为 NSString 并执行 NSLog 时，我实际上看到新行正在打印。但是，当我使用 appendString 然后使用 loadHTMLString 将字符串作为 html 页面的一部分附加时，新行在生成的网页中被完全忽略...

您能否给我一个建议或文档链接以供阅读？我真的不知道！

非常感谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T17:50:37.893

浏览器不会呈现普通的换行符。用换行符 ( )
替换换行符( )。`\n``<br>`

```
NSString *newString = [oldString stringByReplacingOccurancesOfString:@"\n" withString:@"<br>"] 
```

标签将`<br>`在网页中显示为换行符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T17:55:18.633

问题是字符串中存在的新行被逐字插入到 html 文档源中。html 源代码中的换行符在呈现 html 文档时不会逐字呈现。（想象一下，如果他们这样做了；由于所有这些新行字符分隔 html 标记，您会显示很多很多额外的新行。）

相反，您应该处理用户输入的原始文本以生成 html 源代码，该源代码将呈现为用户输入的内容。因此，您必须将文本分成段落，然后插入适当的`<p></p>`标签。

您可以将 NSString 方法`enumerateSubstringsInRange:options:usingBlock:`与选项一起使用`NSStringEnumerationByParagraphs`。处理每个段落。

此外，您应该清理用户输入的数据。例如，如果用户输入一些 html 标签，您不希望您的页面混乱。清理数据可能就像用适当的 html 实体替换文本中的所有受限字符一样简单，但这取决于您在做什么。

# javascript - 如何在 jQuery 的 hover() 事件的热点中包含元素的边距？

> ID：11298558
> 
> 赞同：8
> 
> 时间：2012-07-02T17:44:11.283
> 
> 标签：javascript, jquery, css, html

```
 jQuery(".my_container").hover(function(){
    //do code
   }, function(){
    //do code
   });

.my_container { width: 100px; height: 100px; margin: 50px; } 
```

上面的代码对鼠标悬停边距没有反应（边距不是元素的一部分？） - 我该如何更改？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-02T17:46:49.183

您可以改用 50px 透明边框 - 边距实际上不应该是可鼠标的...

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-09-20T14:29:33.267

包括一个[伪元素](https://developer.mozilla.org/en-US/docs/Web/CSS/%3A%3Abefore)，例如

```
.my_container:before {
    content:'';
    position:absolute;
    top:-50px;
    bottom:-50px; 
    left:-50px;
    right:-50px; 
} 
```

这为现有元素的可点击区域增加了 50 像素。

如果您只想在触摸屏设备上添加它，您可以这样做：

```
.touchevents .my_container:before {
    ...
} 
```

这需要像[Modernizer](https://modernizr.com/)这样的东西来插入适当的基于特征的 CSS 类。

* * *

**更新**

根据@Jaladh 的评论，您可能还需要应用于`position:relative`容器元素，因为`position:absolute`上面将相对于具有`position`属性的第一个祖先：

```
.my_container {
    position:relative;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-02T18:07:28.480

也许在外部元素上使用第二个包装元素，在内部元素上使用现有的背景和填充样式：

```
<div class="my_container">
    <div class="my_container_inner">
        <!-- etc. -->
    </div>
</div> 
```

```
jQuery(".my_container").hover(function(){
  //do code
}, function(){
  //do code
}); 
```

```
.my_container { padding: 50px; }
.my_container_inner { width: 100px; height: 100px; /* etc. */ } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-10-22T13:55:45.363

在@Dunc 的解决方案的基础上，您也可以使用伪元素***来模仿您的容器，让实际容器的行为类似于 margins***。这看起来像：

```
.my_container { 
    width: calc(100px + (2 * 50px));
    height: calc(100px + (2* 50px));

    position: relative;
}

.my_container::before {
    content: '';
    position: absolute;
    top: 50px;
    bottom: 50px; 
    left: 50px;
    right: 50px; 
} 
```

还要确保将您拥有的所有其他属性（如背景颜色、边框等）移动`my_container`到其中，`my_container::before`因为`before`这里的行为就像我们的容器一样。

*如果您的容器是网格项目并且您希望它们之间的间隙可以悬停*，这基本上很有帮助，因为否则在这种情况下使用伪元素添加边距将无法正常工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-02T17:50:17.753

将边距更改为填充，它将是可悬停的。

# mysql - MySQL Slave 上的 I/O 错误进行复制

> ID：11298562
> 
> 赞同：1
> 
> 时间：2012-07-02T17:44:46.713
> 
> 标签：mysql, io

运行：Centos 6.2 VM 附加了一个 1Tb 磁盘（称为 sdc1）

在其上安装 MySQL 作为复制的从属。

MySQL 数据文件位于附加的 1Tb 磁盘上。

问题是：奴隶跟不上主人。

“消息”文件列出了 I/O 错误（附在下面）。

有谁知道如何解决这个问题？

错误如下：

```
sd 4:0:0:0: [sdc] Sense Key : Illegal Request [current]
sd 4:0:0:0: [sdc] Add. Sense: Invalid command operation code
sd 4:0:0:0: [sdc] CDB: Write(6): 0a 02 a1 ff 08 00
Buffer I/O error on device sdc1, logical block 21560
lost page write due to I/O error on sdc1
hv_storvsc vmbus_0_7: cmd 0xa scsi status 0x2 srb status 0x86
hv_storvsc vmbus_0_7: stor pkt ffff880086431e00 autosense data valid - len 18
storvsc: Sense Key : Illegal Request [current]
storvsc: Add. Sense: Invalid command operation code
sd 4:0:0:0: [sdc] Result: hostbyte=DID_OK driverbyte=DRIVER_SENSE
sd 4:0:0:0: [sdc] Sense Key : Illegal Request [current]
sd 4:0:0:0: [sdc] Add. Sense: Invalid command operation code
sd 4:0:0:0: [sdc] CDB: Write(6): 0a 02 a1 ff 08 00
Buffer I/O error on device sdc1, logical block 21560
lost page write due to I/O error on sdc1
hv_storvsc vmbus_0_7: cmd 0x2a scsi status 0x2 srb status 0x86
hv_storvsc vmbus_0_7: stor pkt ffff880086431e00 autosense data valid - len 18
storvsc: Sense Key : Illegal Request [current]
storvsc: Add. Sense: Invalid command operation code
sd 4:0:0:0: [sdc] Result: hostbyte=DID_OK driverbyte=DRIVER_SENSE
sd 4:0:0:0: [sdc] Sense Key : Illegal Request [current]
sd 4:0:0:0: [sdc] Add. Sense: Invalid command operation code
sd 4:0:0:0: [sdc] CDB: Write(10): 2a 00 0c e0 10 4f 00 00 08 00
Buffer I/O error on device sdc1, logical block 27001346
lost page write due to I/O error on sdc1
hv_storvsc vmbus_0_7: cmd 0x2a scsi status 0x2 srb status 0x86
hv_storvsc vmbus_0_7: stor pkt ffff880100c72980 autosense data valid - len 18
storvsc: Sense Key : Illegal Request [current]
storvsc: Add. Sense: Invalid command operation code
sd 4:0:0:0: [sdc] Result: hostbyte=DID_OK driverbyte=DRIVER_SENSE
sd 4:0:0:0: [sdc] Sense Key : Illegal Request [current]
sd 4:0:0:0: [sdc] Add. Sense: Invalid command operation code
sd 4:0:0:0: [sdc] CDB: Write(10): 2a 00 0f 2a 08 c7 00 00 10 00
Buffer I/O error on device sdc1, logical block 31801617
lost page write due to I/O error on sdc1
Buffer I/O error on device sdc1, logical block 31801618
lost page write due to I/O error on sdc1
hv_storvsc vmbus_0_7: cmd 0xa scsi status 0x2 srb status 0x86
hv_storvsc vmbus_0_7: stor pkt ffff8803f576b140 autosense data valid - len 18
storvsc: Sense Key : Illegal Request [current]
storvsc: Add. Sense: Invalid command operation code
sd 4:0:0:0: [sdc] Result: hostbyte=DID_OK driverbyte=DRIVER_SENSE
sd 4:0:0:0: [sdc] Sense Key : Illegal Request [current]
sd 4:0:0:0: [sdc] Add. Sense: Invalid command operation code
sd 4:0:0:0: [sdc] CDB: Write(6): 0a 02 a2 3f 08 00
Buffer I/O error on device sdc1, logical block 21568
lost page write due to I/O error on sdc1
hv_storvsc vmbus_0_7: cmd 0xa scsi status 0x2 srb status 0x86
hv_storvsc vmbus_0_7: stor pkt ffff8800ab42e440 autosense data valid - len 18
storvsc: Sense Key : Illegal Request [current]
storvsc: Add. Sense: Invalid command operation code
sd 4:0:0:0: [sdc] Result: hostbyte=DID_OK driverbyte=DRIVER_SENSE
sd 4:0:0:0: [sdc] Sense Key : Illegal Request [current]
sd 4:0:0:0: [sdc] Add. Sense: Invalid command operation code
sd 4:0:0:0: [sdc] CDB: Write(6): 0a 02 a1 ff 08 00
Buffer I/O error on device sdc1, logical block 21560
lost page write due to I/O error on sdc1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T17:52:54.500

您最近是否`fsck`在磁盘上运行以查看它是否可以找到并修复您的错误？

另外，您在从站上有交换驱动器吗？

# java - 谷歌分析安卓示例

> ID：11298566
> 
> 赞同：1
> 
> 时间：2012-07-02T17:45:00.380
> 
> 标签：java, android, google-analytics, google-analytics-api

谷歌有一个关于移动设备分析数据的例子。此处提供了代码。我添加了 jar 文件，一切编译正常，但运行应用程序时出错。出于安全原因，我取出了 UA ID（不确定这是否重要）

LogCat 为我提供了以下信息：E/AndroidRuntime(1175): java.lang.NoClassDefFoundError: com.google.android.apps.analytics.GoogleAnalyticsTracker **AND** E/AndroidRuntime(1130):at com.google.android.apps.analytics。 sample.TestActivity.onCreate(TestActivity.java:19)

从它所说的来看，它找不到 googleAnalyticTracker？但如果它编译得很好，为什么它找不到呢？

```
package com.google.android.apps.analytics.sample;

import com.google.android.apps.analytics.GoogleAnalyticsTracker;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class TestActivity extends Activity {

    GoogleAnalyticsTracker tracker;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        tracker = GoogleAnalyticsTracker.getInstance();

        // Start the tracker in manual dispatch mode...
        // tracker.startNewSession("", this);

        // ...alternatively, the tracker can be started with a dispatch interval
        // (in seconds).
        tracker.startNewSession("", 20, this);

        setContentView(R.layout.main);
        Button createEventButton = (Button) findViewById(R.id.NewEventButton);
        createEventButton.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                tracker.trackEvent("Clicks", // Category
                        "Button", // Action
                        "clicked", // Label
                        77); // Value
            }
        });

        Button createPageButton = (Button) findViewById(R.id.NewPageButton);
        createPageButton.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                // Add a Custom Variable to this pageview, with name of "Medium"
                // and value "MobileApp"
                tracker.setCustomVar(1, "Medium", "Mobile App");
                // Track a page view. This is probably the best way to track
                // which parts of your application
                // are being used.
                // E.g.
                // tracker.trackPageView("/help"); to track someone looking at
                // the help screen.
                // tracker.trackPageView("/level2"); to track someone reaching
                // level 2 in a game.
                // tracker.trackPageView("/uploadScreen"); to track someone
                // using an upload screen.
                tracker.trackPageView("/testApplicationHomeScreen");
            }
        });

        Button quitButton = (Button) findViewById(R.id.QuitButton);
        quitButton.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                finish();
            }
        });

        Button dispatchButton = (Button) findViewById(R.id.DispatchButton);
        dispatchButton.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                // Manually start a dispatch, not needed if the tracker was
                // started with a dispatch
                // interval.
                tracker.dispatch();
            }
        });
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
        // Stop the tracker when it is no longer needed.
        tracker.stopSession();
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-02T18:07:22.303

更新我的 android SDK 后，我也遇到了同样的问题。我通过执行以下操作解决了它：

右键单击您的项目 -> `Build Path`-> `Configure Build Path`-> 选择`Order and Export`选项卡 -> 检查`GoogleAnalyticsJar.jar`-> 按`OK`。

这帮助我解决了问题。希望它也能帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-22T11:48:03.750

在您的布局文件夹中创建 alalytics.xml 并粘贴以下代码。

```
 <?xml version="1.0" encoding="utf-8" ?>
    <resources>

      <!--Replace placeholder ID with your tracking ID-->

      <string name="ga_trackingId">UA-XXXX-Y</string>

      <!--Enable automatic activity tracking-->

      <bool name="ga_autoActivityTracking">true</bool>

      <!--Enable automatic exception tracking-->

      <bool name="ga_reportUncaughtExceptions">true</bool>

    </resources>

Create Helper.java class and paste the following code.

import android.content.Context;
import com.google.analytics.tracking.android.EasyTracker;
import com.google.analytics.tracking.android.Fields;
import com.google.analytics.tracking.android.MapBuilder;
import com.google.analytics.tracking.android.Tracker;
import com.google.tagmanager.DataLayer;
import com.google.tagmanager.TagManager;
public class Helper{

                      /**
                       * Push an "openScreen" event with the given screen name. Tags that match that event will fire.
                       */
                     private static Tracker tracker;
                      public static void pushOpenScreenEvent(Context context, String screenName) {

                          // Instantiate the Tracker
                                           tracker =  EasyTracker.getInstance(context);
                                           tracker.set(Fields.SCREEN_NAME, screenName);
                                         // Send a screenview.
                                           tracker.send(MapBuilder
                                             .createAppView()
                                             .build()
                                           );
                      }

                      /**
                       * Push an "Button clicked" event with the given screen name. Tags that match that event will fire.
                       */
                      public static void pushbtnClickedEvent(Context context, String clickE) {
                                           tracker =  EasyTracker.getInstance(context);
                                         // Values set directly on a tracker apply to all subsequent hits.
                                           tracker.set(Fields.SCREEN_NAME, "Home Screen");

                                           // This screenview hit will include the screen name "Home Screen".
                                           tracker.send(MapBuilder.createAppView().build());

                                           // And so will this event hit.
                                           tracker.send(MapBuilder
                                             .createEvent("UI", "click", "my btn clicked", null)
                                             .build()
                                           );
                      }
                      /**
                       * Push a "closeScreen" event with the given screen name. Tags that match that event will fire.
                       */
                      public static void pushCloseScreenEvent(Context context, String screenName) {

                          // Instantiate the Tracker
                                           tracker =  EasyTracker.getInstance(context);
                                           tracker.set(Fields.SCREEN_NAME, screenName);
                                         // Send a screenview.
                                           tracker.send(MapBuilder
                                             .createAppView()
                                             .build()
                                           );
                      }
} 
```

MainActivity.java

```
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

import com.google.analytics.tracking.android.EasyTracker;

public class MainActivity extends Activity {

 Button btnClickEvent;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        btnClickEvent=(Button)findViewById(R.id.button1);
        btnClickEvent.setOnClickListener(new OnClickListener() {

   @Override
   public void onClick(View v) {
    // TODO Auto-generated method stub

    Helper.pushbtnClickedEvent(MainActivity.this, "Button Clicked");

   }
  });
    }

    @Override
    protected void onStart() {
       super.onStart();
       EasyTracker.getInstance(this).activityStart(this);
       Helper.pushOpenScreenEvent(this, "Main Activity");

    }
 @Override
 protected void onStop() {
                      // TODO Auto-generated method stub

                      super.onStop();
                       EasyTracker.getInstance(this).activityStop(this); // Add this method

 } 
} 
```

现在，您的应用程序已准备就绪，只需按下“按钮”，然后打开您的 Google 分析仪表板。

不要忘记在 manifest.xml 中添加这些权限

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

[参考自： http](http://velmuruganandroidcoding.blogspot.in/2014/08/google-analytics-in-android.html) ://velmuruganandroidcoding.blogspot.in/2014/08/google-analytics-in-android.html

# jquery - 带有 jQ uery 的 jsf

> ID：11298569
> 
> 赞同：0
> 
> 时间：2012-07-02T17:45:19.713
> 
> 标签：jquery, ajax, jsf

我的 jQuery 中有两个动作

```
 <br/> jQuery('#testForm\\:actionButtonA').click();
    <br/>  jQuery('#testForm\\:actionButtonB').click(); 
```

首先使重新加载页面
第二只显示我的对话框面板

如何使第二个动作等待完成重新加载页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T17:59:27.540

您可以只添加一个回调函数并触发按钮 B 点击

```
 jQuery('#testForm\\:actionButtonA').click(function(){
    jQuery.ajax({
    url: 'ajax/test.xhtml',
    success: function(response) {
     jQuery('#testForm\\:actionButtonB').click();
    }
   });
  }); 
```

# android - 如何在 Android 中以编程方式更改方向

> ID：11298570
> 
> 赞同：1
> 
> 时间：2012-07-02T17:45:24.763
> 
> 标签：android, testing, android-emulator

我尝试了以下方法：

```
Activity a = getActivity();
a.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
Thread.sleep(2000);
a.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
Thread.sleep(2000); 
```

在安卓模拟器上。但它的行为方式与按 Ctrl+F11 手动旋转屏幕的方式不同。

那么以编程方式更改方向的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T17:56:52.583

这应该是正确的方法。是你的测试坏了。

首先，不要使用`Thread.sleep`，它会冻结你的整个应用程序并防止任何事情发生（包括方向变化）。尝试改用[处理](http://developer.android.com/reference/android/os/Handler.html)程序。

其次，更改很可能不会立即发生，而只会在您离开之后发生`onCreate()`（并且可能还有其他几个[生命周期方法](http://developer.android.com/guide/components/activities.html#Lifecycle)）。

第三，如果您改变方向，您的 Activity 将被[销毁并重新创建](http://developer.android.com/guide/components/activities.html#ConfigurationChanges)。因此，您不能真正在单个 Activity 实例中来回切换。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T17:55:51.093

Android 模拟器通常不会旋转，除非您手动旋转设备，您实际使用的代码应该可以在真实设备上运行。您是否真的在真实设备中尝试过？

# ruby-on-rails - Nginx，使用 RVM 设置乘客：权限问题和 403 错误

> ID：11298573
> 
> 赞同：1
> 
> 时间：2012-07-02T17:45:49.380
> 
> 标签：ruby-on-rails, ruby, nginx, passenger

我正在尝试将 rails 应用程序部署到运行乘客和 nginx 的 Ubuntu 服务器。该服务器在 ruby​​ 1.8 上运行了大约一年，但我最近升级到 1.9.3（这次使用 RVM），因此不得不重新安装所有东西。我目前遇到两个问题：

### 403禁止错误

我能够启动 nginx 服务器，但是当我尝试访问 rails 应用程序时，我收到一个 403 Forbidden 错误，内容如下：

```
*2177 directory index of "/srv/myapp/public/" is forbidden 
```

我在[nxinx 帮助文档](http://nginxlibrary.com/403-forbidden-error/)中进行了一些查看，并确保该`/srv/myapp/`目录具有适当的权限。它由`deploy`拥有 nginx 工作进程的用户所有，并设置为`chmod 755`.

### Nginx和Passenger安装问题

当我重新启动 nginx 服务器时，我还收到另一个错误，表明我的 phusion 乘客安装有问题：

```
Unable to start the Phusion Passenger watchdog because its executable (/usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.13/agents/ PassengerWatchdog) does not exist. This probably means that your Phusion Passenger installation is broken or incomplete, or that your 'passenger_root' directive is set to the wrong value. Please reinstall Phusion Passenger or fix your 'passenger_root' directive, whichever is applicable. 
```

我从非 root（但启用了 sudo）用户重新安装了乘客 gem，并使用 重新安装了 nginx `rvmsudo passenger-install-nginx-module`，但随后我反复收到此错误：

```
Your RVM wrapper scripts are too old. Please update them first by running 'rvm get head && rvm reload && rvm repair all'. 
```

我执行了 RVM 重新加载（有`rvmsudo`和没有），错误仍然出现。我尝试在没有 的情况下执行 nginx 安装`rvmsudo`，但遇到了权限问题，因为我无法编辑`/opt/nginx/`目录（我安装了 nginx 的位置）。现在我什至没有那么远，因为安装程序未能通过所需的软件检查。

### 背景资料

这是我的 nginx 进程当前的样子：

```
 PID  PPID USER     %CPU    VSZ WCHAN  COMMAND
10174     1 root      0.0  18480 ?      nginx: master process /opt/nginx/sbin/nginx
29418 10174 deploy    0.3  18496 ?      nginx: worker process
29474 12266 1001      0.0   4008 -      egrep (nginx|PID) 
```

### 我的安装过程

我一直在[逐步指南](http://ryat.la/HoHw)中记录我的安装过程，以供进一步参考。请看一下我是如何设置新安装的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-02T20:11:05.320

尝试按照本[指南](https://www.digitalocean.com/community/articles/how-to-install-rails-and-nginx-with-passenger-on-ubuntu)重新安装所有环境，并使用以下权限将 Rails 应用程序放在 /var/rails/your_app_dir 上：

```
sudo chown deployment_user:www-data -R /var/rails/your_app_dir 
```

使用这个 nginx.conf 示例将所有部分放在一起：

```
user  www-data;
worker_processes  1;

#error_log  logs/error.log;
#error_log  logs/error.log  notice;
#error_log  logs/error.log  info;

#pid        logs/nginx.pid;

events {
    worker_connections  1024;
}

http {
    passenger_root /usr/local/rvm/gems/ruby-2.0.0-p195/gems/passenger-4.0.5;
    passenger_ruby /usr/local/rvm/wrappers/ruby-2.0.0-p195/ruby;

    include       mime.types;
    default_type  application/octet-stream;

    #log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
    #                  '$status $body_bytes_sent "$http_referer" '
    #                  '"$http_user_agent" "$http_x_forwarded_for"';

    log_format gzip '$remote_addr - $remote_user [$time_local]  '
                '"$request" $status $bytes_sent '
                '"$http_referer" "$http_user_agent" "$gzip_ratio"';

    access_log  logs/access.log  gzip  buffer=512k;

    server_names_hash_bucket_size  64;
    sendfile        on;
    #tcp_nopush     on;
    #keepalive_timeout  0;
    keepalive_timeout  65;

    #gzip  on;

    ##
    # Virtual Host Configs
    ##
    #include /opt/nginx/conf/*.conf;
    include /opt/nginx/conf/sites-enabled/*;
} 
```

# android - 猴子实用程序如何在 Android 上运行？

> ID：11298592
> 
> 赞同：1
> 
> 时间：2012-07-02T17:47:19.660
> 
> 标签：android, android-emulator, monkey

猴子实用程序如何在 Android 上运行？我们可以以某种方式扩展它以发送特定事件而不是随机生成的事件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T17:53:59.630

如果您想要特定事件，请使用 Monkey Runner 工具：http: [//developer.android.com/tools/help/monkeyrunner_concepts.html](http://developer.android.com/tools/help/monkeyrunner_concepts.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T21:59:07.840

考虑到monkeyrunner非常不稳定，可以直接使用adb shell触发事件。例如：用于触发输入

```
>>adb shell input
usage: input ...
       input text <string>
       input keyevent <key code number or name>
       input tap <x> <y>
       input swipe <x1> <y1> <x2> <y2> 
```

安装使用

```
adb install/uninstall <<apkname>> 
```

开始服务和活动：

```
adb shell am startservice -a <<service name>> 
```

要开始一项活动：

```
adb shell am start -n <<activity name>> 
```

adb 更可靠，因为您可以立即获得反馈，这与monkeyrunner 不同，monkeyrunner 在触发事件失败的情况下不提供可靠的异常。

另一种选择是使用猴子脚本：

我们可以使用 -f 选项为猴子工具提供脚本。例如：猴子-f <>

例如猴子脚本 [https://gist.github.com/3796686](https://gist.github.com/3796686)

**一些附加信息：** MonkeyRunner 内部使用猴子来触发事件。Monkey 在模拟器中运行，监听一个端口，monkeyrunner 打开一个到该端口的套接字并将命令传递给monkey，monkey 反过来执行它。

# html - HTML 资源在调试模式下正确加载，而不是在发布模式下

> ID：11298593
> 
> 赞同：1
> 
> 时间：2012-07-02T17:47:21.517
> 
> 标签：html, objective-c, macos, cocoa, webview

目前，我正在为部分用户界面使用 HTML 文件。*我通过WebView*显示这些文件。这在 Xcode 的调试模式下按预期工作。不幸的是，在归档应用程序后，不再显示 HTML 资源。

这很奇怪，原因有很多：我可以看到文件肯定在应用程序内的正确资源文件夹中，WebView 没有消失或隐藏，它只是显示一个白色背景，就好像它没有加载任何东西一样。

这个观察结果适用于我项目中的**所有**HTML 文件。即使我不将它们用于 UI，而是为了在可共享的 HTML 文件中导出一些数据，它也不起作用（在发布模式下）。

我对这个问题进行了研究，但没有发现任何感兴趣的东西。我现在的想法已经不多了...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T18:14:52.097

哇。那很有意思。我有一个解决方案，但不知道为什么会这样。仅以防万一有人有同样的问题：虽然我没有硬编码 HTML 的路径

```
[[inspectorView mainFrame] loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:[[NSBundle mainBundle] pathForResource:@"inspectorView" ofType:@"html" inDirectory:@"HTML/inspectorView"]]]]; 
```

例如，inspectorView 是*WebView ，当应用程序的名称包含**空格*时它不起作用。意外地，我发现“MyAppsName.app”可以工作，而“MyAppsName 2.2.app”甚至“MyAppsName x.app”都不起作用。

我已经听到有人抱怨版本信息不应该出现在应用程序的标题中。确实如此。它仅用于在之后的测试过程中识别一些构建状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T20:09:30.207

由于您没有在问题中提供代码，因此很难对其进行调试……但是从您自己的回答来看，我很确定我知道问题所在。您将路径字符串和 URL 字符串视为可互换的，但事实并非如此。

您建议这样做：

```
[[inspectorView mainFrame] 
  loadRequest:[NSURLRequest 
        requestWithURL:[NSURL 
                URLWithString:
                   [[NSBundle mainBundle]
                 pathForResource:@"inspectorView" 
                      ofType:@"html"
                     inDirectory:@"HTML/inspectorView"]]]]; 
```

（我添加了一些换行符以使其可读。）

要调用 +[NSURL URLWithString:]，您需要一个表示 URL 的字符串，而不是表示路径的字符串。但是 -[NSBundle pathForResource:ofType:inDirectory:] 返回一个路径。有一个函数可以从路径构建 URL，+[NSURL fileURLWithPath:isDirectory:]，如果这是你想要的。

但是，除非您需要支持 10.5 及更早版本，否则使用 -[NSBundle URLForResource:withExtension:subdirectory:] 而不是 -[NSBundle pathForResource: ofType:inDirectory:]。

所以：

```
[[inspectorView mainFrame] 
  loadRequest:[NSURLRequest 
        requestWithURL:[[NSBundle mainBundle]
                 URLForResource:@"inspectorView" 
                  withExtension:@"html"
                   subdirectory:@"HTML/inspectorView"]]]; 
```

如果您想知道为什么您的代码在某些情况下有效但在其他情况下无效，请考虑“/Applications/MyApp.app/Contents/”（为了简洁起见，我将省略“Resources/HTML/inspectorView/inspectorView.html” ，因为这与此处无关）意味着当作为 URL 读取时。这是一个相对 URL；为了解释它，你取当前的基础，去掉路径部分，然后用字符串替换它。+[NSURL URLWithString:] 恰好使用“file://localhost”作为基础，这意味着你最终得到：

```
file://localhost/Applications/MyApp.app/Contents/ 
```

这恰好是一个有效的 URL，实际上是您想要的文件的有效 URL。这没有记录在案，但它发生了。在这种情况下。但是如果你在里面放一个空格呢？然后你得到：

```
file://localhost/Applications/MyApp X.app/Contents/ 
```

这不是一个有效的 URL；你想要的是这样的：

```
file://localhost/Applications/MyApp%20X.app/Contents/ 
```

当然，如果您调用 +[fileURLWithPath:isDirectory:] 而不是 +[URLWithString:]，这正是您所得到的。

（我在这里有点作弊。实际上，NSURL 在内部分别跟踪相对 URL 和基础，并在您尝试访问 URL 时组合它们。但是您现在可以忽略它。）

# java - 休眠/持久性有哪些常见问题？

> ID：11298594
> 
> 赞同：6
> 
> 时间：2012-07-02T17:47:22.267
> 
> 标签：java, hibernate, testing, persistence

我有一个应用程序，我想针对与 Hibernate 和/或持久性相关的可能问题进行测试证明。

**还有什么问题？我如何复制它们（字面意思）？你如何从他们身上恢复过来？**

*说清楚：我说的是多线程集群环境（最复杂的一个）。*

我的唯一：

`org.hibernate.StaleObjectStateException: Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect)`

复制：

*   加载对象。
*   使用 HQL 更新。
*   尝试更新（保存）加载的对象。

手柄：不确定...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T18:17:03.927

延迟加载是您将遇到的大问题之一，特别是如果您遵循标准 DAO 模式。你最终会得到延迟加载的集合，但是从你的 DAO 层出来后，spring （或者如果你不使用 spring 的话）可能会关闭会话。

```
public class MyDaoImpl implements MyDao {
   @Override
   @Transactional
   public void save(MyObject object) { ... }
} 
```

在这种情况下，当“保存”调用完成时，如果您不在另一个事务中，spring 将关闭您的会话。因此，任何对延迟加载对象的调用都将引发 LazyInitializationException。

处理此问题的典型方法是将会话绑定到当前线程。在 webapps 中，您可以使用 OpenSessionInViewFilter 轻松完成此操作。对于命令行，您可能需要编写一个实用方法来创建会话，绑定到当前线程，然后在完成后取消绑定。你可以在网上找到这方面的例子。

关于集合的主题，如果您使用“更新”方法（同样是您通常使用标准 DAO 模式执行的操作），您必须小心不要替换集合实例，而是应该操作已经存在的集合到位。否则，休眠将很难确定需要添加/删除/更新的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T17:53:48.143

您观察到的问题是数据的并发修改之一。Hibernate 有[许多可能的解决方案](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/transactions.html#transactions-optimistic)来处理这个问题。

本质上，问题在于两个线程（或集群中的两台机器）同时作用于同一条数据。考虑这个例子：

```
machine 1: reads the data and returns it for editing somewhere else
machine 2: also reads the data for modification
machine 1: updates the data and commits.
machine 2: tries to do an update and commit. 
```

当第二台机器尝试提交其更改时会发生什么？当机器 2 处理数据时，Hibernate 将看到数据已更改。也就是说，机器 2 的更新是在**stale data**上。Hibernate 不能总是合并这两个更改（也不是总是需要的行为），所以它通过抛出来拒绝第二次更新`org.hibernate.StaleObjectStateException`

正如我上面提到的，Hibernate 为您提供了许多解决此问题的选项。`@Version`最简单的可能是在您的数据对象上添加一个版本字段。Hibernate 会自动维护数据的“版本”。每当发生更新时，Hibernate 会自动更改版本。*您的工作是检查在读取*数据和*更新*数据之间版本没有发生变化。如果它们不匹配，您可以采取一些措施来处理问题（即告诉用户）。有一些更复杂的技术可以防止并发更新，但这是最简单的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-06T10:06:53.137

当您使用 ORM 工具时，获取过多数据可能是您可能遇到的最大问题，因为它可以很容易地加载比需要更多的数据。如果测试数据量相当小，这个问题在开发/测试场景中不会复制，并且一旦数据开始在生产中积累，数据访问层就会成倍地变慢。

可能会出现很多问题：

*   缺少批量更新
*   缺少语句缓存
*   锁定过多
*   数据库往返次数过多
*   生成低效 SQL 语句的奇异关联

# c++ - C中的油漆桶

> ID：11298596
> 
> 赞同：0
> 
> 时间：2012-07-02T17:47:34.060
> 
> 标签：c++, c, paint, borland-c++

我需要帮助..我正在制作一个模仿油漆桶的功能..当一半的图像被着色时，问题就出现了这个错误发生“NTVM遇到非法指令”

这是我的“桶”代码：

```
void bucket(int x, int y, int fillColor)
{

 if(getpixel(x,y)==getpixel(x,y+1)){
     putpixel(x,y,fillColor);
     bucket(x,y+1,fillColor);
 }

 if(getpixel(x,y)==getpixel(x+1,y)){
     putpixel(x,y,fillColor);
     bucket(x+1,y,fillColor);
 }

 if(getpixel(x,y)==getpixel(x,y-1)){
     putpixel(x,y,fillColor);
     bucket(x,y-1,fillColor);
 }

 if(getpixel(x,y)==getpixel(x-1,y)){
     putpixel(x,y,fillColor);
     bucket(x-1,y,fillColor);
 }

} 
```

据说“填充”算法的问题是您的递归堆栈不支持所有调用......至少有一半的绘图是彩色的......

PS：我在 Borland c++ v3.1 上使用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T17:54:25.900

我猜美元是甜甜圈，你正在炸毁你的筹码。NTVM 是 Windows 的 dos 模拟器。我猜它的堆栈有限。尝试寻址堆栈之外的内存（可寻址范围）会导致非法指令。这也可以解释为什么您只能为大图片获取它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T21:24:57.613

在您运行的代码中，递归永远不会结束......当存储桶到达图像的边界（顶部、底部、左侧或右侧）时，您应该停止递归。

还有一个问题：每次调用函数都会调用另外四个函数。这意味着即使您为图像边框添加特殊 if ，递归也永远不会结束，因为例如像素上的桶 (x,y) 调用桶 (x+1,y) 和像素上的桶 (x+1,y) 调用桶(x-1,y) 实际上又是像素 (x,y)！

我对你的建议是添加特殊的函数参数，如 ,,direction''。考虑四个方向：N、E、W 和 S。第一次调用存储桶调用 4 个存储桶，但这次有方向。方向==N 的函数不会在 S 方向上着色。您可以使用从 0（第一次调用时无方向）到 4 的整数值作为方向符号。

当然，我的想法需要进一步开发来优化代码（条件应该更好地说明，这样我们就不会多次访问相同的像素）。

# sql-server-2008 - 使用 BETWEEN 查找给定日期的数据

> ID：11298599
> 
> 赞同：0
> 
> 时间：2012-07-02T17:47:57.913
> 
> 标签：sql-server-2008

我有一个 MS SQL 2008 DB 表，其列如下：

```
Date

2012-07-02 18:34:44.487
2012-07-02 18:34:44.480
2012-07-02 18:34:44.193
2012-07-02 18:34:44.193 
```

当我做

```
SELECT *
FROM table1
WHERE Date BETWEEN '2012-07-02' AND '2012-07-02' 
```

我什么都得不到。

当它们落在两个日期之间时，我该怎么做才能获得上述所有结果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T17:49:59.300

单程

```
 Select * from table1 where Date >= '2012-07-02' and Date < '2012-07-03' 
```

这也比 between 更安全，因为使用 between 您还将获得第 3 天的午夜值，请参阅[SQL Server 中的 Between 如何处理日期？](http://blogs.lessthandot.com/index.php/DataMgmt/DataDesign/how-does-between-work-with-dates-in-sql-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T17:50:49.487

利用`dateadd`

```
Select * 
from table1 
where Date between '2012-07-02' and dateadd(d,1,'2012-07-02') 
```

MSDN 文档[http://msdn.microsoft.com/en-us/library/ms186819.aspx](http://msdn.microsoft.com/en-us/library/ms186819.aspx)

粗略地说，这样做的原因是 SQL 将字符串日期（如本例）视为给定日期的午夜。所以你真正要问的是`between midnight of 2012-07-02 and midnight of 2012-07-03`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T17:54:47.743

尝试这个 ：

```
Select * from table1 where CONVERT(Date,Date)='2012-07-02' 
```

# mercurial - TortoiseHG 和谷歌代码

> ID：11298600
> 
> 赞同：0
> 
> 时间：2012-07-02T17:48:08.413
> 
> 标签：mercurial, tortoisehg

我使用 TortoiseSVN 已经有一段时间了，我真的很喜欢它。有人告诉我 TortoiseHg 值得一试并且“比 SVN 好得多”，所以我正在尝试开始使用它。

我创建了一个谷歌代码存储库，并设法将一个文件夹上传到其中。但是，当上传另一个文件夹时，我不断收到错误“中止：存储库不相关”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T22:42:14.970

TortoiseHg 和 TortoiseSVN 并不是真正可比的小动物，因为它们只是两个完全不同的版本控制系统的 GUI 前端。SVN 是一个较老的集中式中坚力量，而 Hg 是一个较新的分布式系统。你应该使用 SVN 还是 Hg 真的取决于你的用例，特别是：

*   如果您的开发人员将被切断中央存储库。使用 Google 代码将表明“否”，因为所有开发人员都需要网络连接，但离网开发人员仍然是一个问题。作为 DVCS，Mercurial 将允许离线开发人员在任何地方工作，只需在网络上处理服务器推/拉情况。
*   如果您的开发人员关心文件锁定。SVN 有内置的文件锁定，而 Mercurial 没有。
*   如果您的开发人员在合并方面遇到困难。Mercurial 具有[更完善的合并功能](http://hgbook.red-bean.com/read/a-tour-of-mercurial-merging-work.html)，并且更智能地处理冲突。

如果您最终得到三个不，那么 SVN 可能是您的最佳选择。

# drupal - Drupal 和 JCarousel 视图 - 多行

> ID：11298602
> 
> 赞同：3
> 
> 时间：2012-07-02T17:48:14.327
> 
> 标签：drupal, views, jcarousel, multirow

*首先，我很清楚这个话题，但遗憾的是我似乎无法回答原始答案提供者的问题。似乎 Stack Overflow 只想要这些线程上的答案，所以我被卡住了： [Multiple rows with jcarousel](https://stackoverflow.com/questions/213680/multiple-rows-with-jcarousel)*

无论如何，我的问题与 Drupal 以及对我的视图使用 JCarousel 模块有关。我目前正处于我的主题开发的最后阶段。但是，我对此有一些问题，即获得类似 jcarousel 的视图样式，但有 2 行而不是 1 行。在我的主题文件夹中使用以下 jcarousel-view.tpl.php ，我能够更进一步：

```
<?php
/**
* @file jcarousel-view.tpl.php
* View template to display a list as a carousel.
*/
?>
<ul class="<?php print $jcarousel_classes; ?>">

  <?php $i=0; $rows_number=2; //you can change the number of rows ?>
  <?php foreach ($rows as $id => $row): ?>
    <?php if($i%$rows_number==0) : ?>
      <li class="<?php print $classes[$id]; ?>">
    <?php endif; ?>
    <?php print $row; ?>
    <?php if($i%$rows_number==($rows_number-1)) : ?>
      </li>
    <?php endif; ?>
    <?php $i++; ?>
    <?php endforeach; ?>
    <?php if($i%$rows_number!=0) : ?>
      </li>
    <?php endif; ?>
</ul> 
```

这是最终结果：[http://static.inky.ws/image/2302/image.jpg](http://static.inky.ws/image/2302/image.jpg) 正如您所见，它将每个项目的每组字段分组到一个公共列中。所以我不能为每个单独的项目创建一个完整的边框。（请参阅：[http](http://static.inky.ws/image/2303/image.jpg) ://static.inky.ws/image/2303/image.jpg ，了解我试图以代码方式实现的示例）

我可以获得网格视图，但这意味着将视图的样式更改为使用“网格”，这使我无法使用 jcarousel。有人对我如何改进上面的代码有任何建议吗？我认为无序列表标记可能对我没有任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T05:21:49.420

请查看[http://mywishez.com](http://mywishez.com) 您看到的所有前面的图像都是使用 jcarousel 显示的。你也可以用萤火虫确认。我设置了高度并设置了超过可以连续容纳的项目数！

# iphone - 如何在此 UIPickerView 中放置图像？

> ID：11298603
> 
> 赞同：4
> 
> 时间：2012-07-02T17:48:23.560
> 
> 标签：iphone, objective-c, xcode, image, uipickerview

我不知道如何在文本一侧创建带有图像的自定义 UIPickerView。

我一直在寻找一种方法，我刚刚找到了这个：

```
- (UIView *)pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)row
forComponent:(NSInteger)component reusingView:(UIView *)view 
```

但我不知道如何使用它。

这些是我的数组：
一切都很完美，我只想在每一行中放置一个不同的图像，有 10 种不同的颜色。3 个组件的颜色相同，但每行的颜色不同。像这张图片。[关联！！！](http://www.fv.uan.edu.mx/file.php/77/imagenes/colores_resistencias.jpg)

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    Colores1 = [[NSMutableArray alloc] init];
    [Colores1 addObject:@"Negro"];
    [Colores1 addObject:@"Marrón"];
    [Colores1 addObject:@"Rojo"];
    [Colores1 addObject:@"Naranja"];
    [Colores1 addObject:@"Amarillo"];
    [Colores1 addObject:@"Verde"];
    [Colores1 addObject:@"Azul"];
    [Colores1 addObject:@"Violeta"];
    [Colores1 addObject:@"Gris"];
    [Colores1 addObject:@"Blanco"];

    Colores2 = [[NSMutableArray alloc] init];
    [Colores2 addObject:@"Negro"];
    [Colores2 addObject:@"Marrón"];
    [Colores2 addObject:@"Rojo"];
    [Colores2 addObject:@"Naranja"];
    [Colores2 addObject:@"Amarillo"];
    [Colores2 addObject:@"Verde"];
    [Colores2 addObject:@"Azul"];
    [Colores2 addObject:@"Violeta"];
    [Colores2 addObject:@"Gris"];
    [Colores2 addObject:@"Blanco"];

    Colores3 = [[NSMutableArray alloc] init];
    [Colores3 addObject:@"Negro"];
    [Colores3 addObject:@"Marrón"];
    [Colores3 addObject:@"Rojo"];
    [Colores3 addObject:@"Naranja"];
    [Colores3 addObject:@"Amarillo"];
    [Colores3 addObject:@"Verde"];
    [Colores3 addObject:@"Azul"];
    [Colores3 addObject:@"Violeta"];
    [Colores3 addObject:@"Gris"];
    [Colores3 addObject:@"Blanco"];
} 
```

这是我的 uipickerview：

```
- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView
{
    return 3;
}
- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component{

    if(component == Primbanda)
        return [Colores1 count];
    if(component == Segubanda)
        return [Colores2 count];
    if (component == tercbanda)
        return [Colores3 count];
    return 0;
}
- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component
{
    if(component == Primbanda)
        return [Colores1 objectAtIndex:row];
    if(component == Segubanda)
        return [Colores2 objectAtIndex:row];
    if (component == tercbanda) 
        return [Colores3 objectAtIndex:row];
    return 0;

}
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
{
    NSLog(@"Row is:%d Component is:%d",row,component);

    int a;//entero de componente 1
    int b;//entero de componente 2
    double c;//entero de componente 3
    double resultado;
    int d; //valor de componente 1 y 2
    NSString *a1; //cadena de a y b!

    a = [pickerView selectedRowInComponent:0]; //asigno a las variables segun el numero!! 
    b = [pickerView selectedRowInComponent:1];

    switch ([pickerView selectedRowInComponent:2]) { //asi se le asignan valores propios!
        case 0:
            c=1;
            break;
        case 1:
            c=10;
            break;
        case 2:
            c=100;
            break;
        case 3:
            c=1000;
            break;
        case 4:
            c=10000;
            break;
        case 5:
            c=100000;
            break;
        case 6:
            c=1000000;
            break;
        case 7:
            c=10000000;
            break;
        case 8:
            c=100000000;
            break;
        case 9:
            c=1000000000;
            break;
        default:
            break;
    }
    NSLog(@"El valor de la tercera es ;%f",c);
    a1 = [[NSString alloc]initWithFormat:@"%d%d",a,b]; //junto las variables a y b
    d= [a1 intValue];    //guardo en la variable
    NSLog(@"el valor de C multiplicado es %f",c);

    resultado = d*c; //multiplica ab por el valor de c

    NSLog(@"valor de resistencia es %.0f Ohms",resultado); //awebo! me salio! :D

    labelresultado.text = [[NSString alloc]initWithFormat:@"%.0f",resultado];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T17:57:46.010

来自[UIPickerViewDelegate 文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPickerViewDelegate_Protocol/Reference/UIPickerViewDelegate.html#//apple_ref/occ/intf/UIPickerViewDelegate)

```
pickerView:viewForRow:forComponent:reusingView:

Called by the picker view when it needs the view to use for a given row in a given component.
- (UIView *)pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)row forComponent:(NSInteger)component reusingView:(UIView *)view
Parameters

pickerView

    An object representing the picker view requesting the data.
row

    A zero-indexed number identifying a row of component. Rows are numbered top-to-bottom.
component

    A zero-indexed number identifying a component of pickerView. Components are numbered left-to-right.
view

    A view object that was previously used for this row, but is now hidden and cached by the picker view. 
```

这里重要的是返回的视图，它是用于在选择器视图上显示该行内容的视图，也是您想要添加任何图像的地方。

首先，您必须实现委托方法，并在您的 .h 中声明它，如下所示：

```
MyClass <UIPickerViewDelegate> 
```

在你的 .m

```
myUIPickerObject.delegate = self; 
```

然后实现这样的方法：

```
- (UIView *)pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)row forComponent:(NSInteger)component reusingView:(UIView *)view
{
    UIView *myColorView = [UIView new]; //Set desired frame
    myColorView.backgroundColor = [UIColor redColor]; //Set desired color or add a UIImageView if you want...
    UIImageView *myImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:"myImage.png"]];
    [view addSubview:myImageView];
    [view addSubview:myColorView];

    //Add subview retains view, so OK to release now
    [myImageView release];
    [myColorView release];

    return view;
} 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-15T08:23:09.360

这段代码对我有用：

```
-(void) viewDidLoad{
    [super viewDidLoad];
    // Initialize Data
    _pickerData = @[@"Item 1", @"Informatio", @"AUx2 ", @"Services 061", @"Problems"];

    // Connect data
    self.tipoConsulta.dataSource = self;
    self.tipoConsulta.delegate = self;
}

- (int)numberOfComponentsInPickerView:(UIPickerView *)pickerView
{
    return 1;
}

// The number of rows of data
- (int)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component
{
    return _pickerData.count;
}

// The data to return for the row and component (column) that's being passed in
- (UIView*)pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)row forComponent:(NSInteger)component reusingView:(UIView *)view
{
    UIView *pickerCustomView = [UIView new];

    UILabel *mytext = [[UILabel alloc] init];
    mytext.text = _pickerData[row];
    [mytext setFrame:CGRectMake(60,0,50,50)];
    [pickerCustomView addSubview:mytext];
    UIImageView *myIcon = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"ic_tipo_servicio061_rounded.png"]];
    [myIcon setFrame:CGRectMake(0, 0, 50, 50)];

    [pickerCustomView addSubview:myIcon];
    [pickerCustomView addSubview:mytext];
    return pickerCustomView;
} 
```

# spring - 注入自动装配的依赖项失败

> ID：11298610
> 
> 赞同：1
> 
> 时间：2012-07-02T17:48:55.010
> 
> 标签：spring, spring-transactions, spring-annotations

[在尝试管理共享公共基类的多个类时，](https://stackoverflow.com/questions/5447449/spring-error-when-trying-to-manage-several-classes-that-share-a-common-base-clas)我试图实现与 Spring 错误相同的情况？

但我仍然得到这个例外：

```
Error creating bean with name 'com.example.model.CategoryTest': Injection of
autowired dependencies failed; nested exception is
org.springframework.beans.factory.BeanCreationException: Could not autowire
field: private com.example.model.CategoryService
com.example.model.CategoryTest.service; nested exception is
org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean
of type [com.example.model.CategoryService] found for dependency: expected at
least 1 bean which qualifies as autowire candidate for this dependency.
Dependency annotations:
{@org.springframework.beans.factory.annotation.Autowired(required=true)} 
```

这是我的课程，希望有人能帮助我理解这些自动装配的东西......

```
public abstract class BaseDAO<E>
{
    public abstract void delete( int id );
    public abstract void save( E entity );
    public abstract List<E> list();
}

public abstract class BaseService<E, D extends BaseDAO<E>>
{
    private final D dao;

    protected BaseService( D dao )
    {
        this.dao = dao;
    }

    @Transactional
    public void delete( int id )
    {
        dao.delete( id );
    }

    @Transactional
    public void save( E entity )
    {
        dao.save( entity );
    }

    @Transactional
    public List<E> list()
    {
        return dao.list();
    }
}

@Repository
public class CategoryDAO extends BaseDAO<Category>
{
    @Autowired
    private SessionFactory sessionFactory;

    @Override
    public void delete( int id )
    {
        Category category = ( Category ) sessionFactory.getCurrentSession().load( Category.class, id );

        if ( category != null )
        {
            sessionFactory.getCurrentSession().delete( category );
        }
    }

    @Override
    public void save( Category category )
    {
        sessionFactory.getCurrentSession().save( category );
    }

    @Override
    public List<Category> list()
    {
        return sessionFactory.getCurrentSession().createQuery( "from Category" ).list();
    }
}

@Service
public class CategoryService extends BaseService<Category, CategoryDAO>
{
    @Autowired
    public CategoryService( CategoryDAO dao )
    {
        super( dao );
    }
} 
```

**更新**

Servlet 上下文确实包含这一行：`<context:component-scan base-package="com.example" />` 测试上下文（我正在使用 maven）确实包含这一行：`<context:annotation-config />`

替换为此异常中的结果`<context:annotation-config />`：`<context:component-scan base-package="com.example" />`

```
org.springframework.beans.factory.BeanCreationException: Could not autowire field:
private com.example.model.CategoryService
com.example.controller.ExampleController.categoryService; 
nested exception is
org.springframework.beans.factory.BeanCreationException: Error creating bean
with name 'categoryService' defined in file
[/home/danny/example/target/classes/com/example/model/CategoryService.class]:
Initialization of bean failed; nested exception is
org.springframework.aop.framework.AopConfigException: Could not generate CGLIB
subclass of class [class com.example.model.CategoryService]: Common causes of
this problem include using a final class or a non-visible class; nested exception
is java.lang.IllegalArgumentException: Superclass has no null constructors but no
arguments were given 
```

**更新2**

我仍然收到此异常，这是我的新代码（仅更改了类）：

```
public abstract class BaseService<E, D extends BaseDAO<E>>
{
    private D dao;

    /*protected BaseService( D dao )
    {
        this.dao = dao;
    }*/
    protected BaseService(){}

    protected void setDAO( D dao )
    {
        this.dao = dao;
    }

    @Transactional
    public void delete( int id )
    {
        dao.delete( id );
    }

    @Transactional
    public void save( E entity )
    {
        dao.save( entity );
    }

    @Transactional
    public List<E> list()
    {
        return dao.list();
    }
}

@Service
public class CategoryService extends BaseService<Category, CategoryDAO>
{
    @Autowired
    public CategoryService( CategoryDAO dao )
    {
        setDAO( dao );
    }
} 
```

**更新3**

解决方案：

```
public abstract class BaseService<E, D extends BaseDAO<E>>
{
    protected D dao;

    public BaseService()
    {
    }

    protected D getDao()
    {
        return dao;
    }

    @Autowired
    protected void setDAO( D dao )
    {
        this.dao = dao;
    }

    // ...
}

@Service
public class CategoryService extends BaseService<Category, CategoryDAO>
{
    public CategoryService()
    {
        setDAO( dao );
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T18:00:22.510

它看起来不像 CategoryService 的实例可用于 Spring 将依赖项注入到测试中。您可能缺少服务包中的组件扫描 -`<context:component-scan base-package="..">`

*Update:* Based on your update, and this post - [Error creating bean with name 'org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping#0' defined in ServletContext resource](https://stackoverflow.com/questions/4490022/error-creating-bean-with-name-org-springframework-web-servlet-mvc-annotation-de) , it looks like you will have to change your BaseService, to have a setter for dao rather than set using a constructor. CGLIB with Spring AOP may not work well with a non default constructor

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T02:05:58.577

You should annotate your classes with [@Component](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html#beans-stereotype-annotations) at least, for them to be eligible for autowired injection.

# python - 使用 Django 测试客户端测试 TastyPie API 总是会导致空的 HTTP 200 响应

> ID：11298614
> 
> 赞同：0
> 
> 时间：2012-07-02T17:49:06.167
> 
> 标签：python, django, automated-tests, tastypie

我定义了一个简单的 Django-TastyPie API（它是一个派生自 ModelResource 的基本类；我使用的是 0.9.11，最新的稳定版本）。UserProfileListResource 类获取 JSON 格式的用户列表（因此，内容类型为 application/json）。我没有复制代码，因为它在手动测试时工作正常。

我在 urls.py 中注册如下：

```
v1_api = Api(api_name='v1')
v1_api.register(UserProfileListResource())

urlpatterns += patterns('',
    (r'^api/', include(v1_api.urls))) 
```

当我使用浏览器手动测试它时它工作正常。

但是，当我使用 django.test.client.Client 编写一个简单的测试用例来发送请求时，我收到了一个 HTTP 200 响应，其中包含空响应内容和错误的内容类型（text/html 而不是 application/json）。

我在我的 API 代码中引入了一些日志记录语句，我意识到我的 API 代码根本没有被执行。

据我所知，还有其他人成功了。我有什么明显的遗漏吗？我被困住了！:-(

请在下面找到我的测试代码；我的测试类继承自 django.utils.unittest.TestCase （我也尝试过 django.test.testcases.TestCase；但没有乐趣）：

```
admin_user_profile = self._create_user_profile()

browser_client = Client()
response = browser_client.get(self.LIST_USERS_URL)
self.assertTrue(HttpResponse.status_code, response.status_code)

logging.debug(response._headers) #prints {'content-type': ('Content-Type', 'text/html; charset=utf-8'), 'location': ('Location', 'http://testserver/api/v1/users/?username=user&api_key=1681f96d50ba54b410c91365a678ec07b6375efc')}
logging.debug(response.content) #prints empty string 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T18:26:15.947

我已经弄清楚我做错了什么。我继承自 django.test.testcases.TestCase 而不是 django.test.TestCase （unittests.TestCase 只是不起作用）。当我改变它时，一切都开始起作用了。

我希望这可以帮助其他人解决同样的问题。

# css - 创建大型内联表单

> ID：11298615
> 
> 赞同：1
> 
> 时间：2012-07-02T17:49:07.383
> 
> 标签：css, user-interface, user-experience

我一整天都在试图弄清楚如何创建*大型*表单，同时保持布局的正确设计。

目前我正在使用formee（样式和960网格系统），我试图将其变成内联表单而不是基于行的（默认）。不幸的是，它变得非常混乱，看起来很可怕。

为了直观地理解我想要归档的内容，我创建了一个模型。

我该如何解决问题？

![小样](../Images/1eea5b026adb39671b5827f0914e5e81.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T18:55:16.153

这是一个这样的例子：http: [//jsfiddle.net/PhilippeVay/gaegv/2/](http://jsfiddle.net/PhilippeVay/gaegv/2/)

**HTML：**

```
<fieldset class="group">
    <legend>First logical group of items</legend>
    <div class="col">
        <p class="text">
            <label for="label1">Field label 1</label>
            <input type="text" id="label1" />
        </p>
        <p class="text">
            <label for="label2">Field label 2</label>
            <input type="text" id="label2" />
        </p>
        <p class="text">
            <label for="label3">Field label 3</label>
            <input type="text" id="label3" />
        </p>
    </div>
    <div class="col">
        <p class="text">
            <label for="label4">Field label 4</label>
            <input type="text" id="label4" />
        </p>
        <p class="text">
            <label for="label5">Field label 5</label>
            <input type="text" id="label5" />
        </p>
        <p class="text">
            <label for="label6">Field label 6</label>
            <input type="text" id="label6" />
        </p>
    </div>
</fieldset>

<div class="group fieldset-like">
    <p class="textarea">
        <label for="label7">Field label 7</label>
        <textarea id="label7">some text (test font-size)</textarea>
    </p>
</div>

<div class="group">
    <fieldset class="col">
        <legend>Third legend</legend>
        <p class="text">
            <label for="label8">Field label 8</label>
            <input type="text" id="label8" />
        </p>
        <p class="text">
            <label for="label9">Field label 9</label>
            <input type="text" id="label9" />
        </p>
        <p class="text">
            <label for="label10">Field label 10</label>
            <input type="text" id="label10" />
        </p>
    </fieldset>

    <fieldset class="col">
        <legend>Fourth legend</legend>
        <p class="text">
            <label for="label11">Field label 11</label>
            <input type="text" id="label11" />
        </p>
        <p class="text">
            <label for="label12">Field label 12</label>
            <input type="text" id="label12" />
        </p>
        <p class="text">
            <label for="label13">Field label 13</label>
            <input type="text" id="label13" />
        </p>
    </fieldset>
</div> 
```

**CSS：**

```
.col {
    float: left;
    width: 36%;
    padding: 2%;
    background: #EEE;
}
.col + .col {
    margin-left: 10%;
}
.col:after {
    content: "";
    display: block;
    clear: both;
}

fieldset,
.fieldset-like {
    margin: 0;
    padding: 0;
    border: 1px solid darkgreen;
}

.group {
    margin: 20px 10px; /* must come after .fieldset-like rule */
}

label {
    font-weight: bold;
    cursor: pointer;
}

.text { /* because .radio and .checkbox are SO different! */
    clear: both;
}
.text label,
.textarea label {
    display: inline-block;
    width: 39%;
    margin-right: 1%;
    text-align: right;
    background-color: lightgreen;
}
.text input,
.textarea textarea {
    display: inline-block;
    width: 55%;
    border: 1px solid darkgreen;
    padding: 4px;
}

.textarea {
    width: auto;
    padding: 2% 4% 2% 4%;
}
/* label and textarea: also see above */
.textarea label {
    width: 14.04%; /* 39% of 36% Yeah I know... */
    margin-right: 0.36%; /* 1% of 36% */
    background-color: lightgreen;
    vertical-align: top; /* otherwise label is at the the bottom of a very high neighbor */
}
.textarea textarea {
    width: 74%;
} 
```

*   段落上的类允许根据表单元素的性质设置标签的样式（您不能根据在 DOM、2012 年和 CSS3 中出现在它之后的元素来设置前面的兄弟或父元素的样式;) )。

*   您可以在现代浏览器中使用选择器属性：`input[type="text"]`但在 Fiddle 中编写的时间更长，然后您必须考虑 HTML 4.01 中的文本、密码和选择元素，在 HTML5 中添加电子邮件、号码、电话等，这将增加您的长度选择器。或者，您可以使用父级上的类来区分和分组表单元素。如果您正在为成千上万的同事编写通用重置样式表，则需要前者，如果您也是编写 HTML 代码的人，则后者效率更高。

*   `.group`包含 2 `.col`，它是字段集中的列还是 div 中的字段集都没有关系。

*   将宽度计算为具有宽度的元素意味着乘法。把它画在一张纸上，写下每个宽度。它会让你不会忘记一个;)

*   百分比填充似乎不适用于输入。不确定。

*   `select`如果添加**[box-sizing](https://developer.mozilla.org/En/CSS/Box-sizing)** ，则宽度更容易跨浏览器：

    ```
    select {
    -moz-box-sizing: content-box;   /* Firefox, meet padding ... */
        box-sizing: content-box;    /* IE8+ */
        padding: 4px 6px; /* example */
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T17:10:16.430

从用户体验的角度来看，位于字段左侧的表单标签的用户完成率较低。这样做的原因是用户必须阅读标签，将标签与字段相关联，然后在完成字段填写后再次将视线移回左侧。这会导致轻微的眼睛疲劳和精神分心。

完成率最高的表单是标签位于字段上方时。第二高是标签在字段内时。这也将使您的表单看起来更干净，并给最终用户留下印象，即使它可能很长。这不是一个令人生畏的形式来完成。

# ruby-on-rails - Rails 3 和 ActiveAdmin：获取表单上关联记录的值

> ID：11298618
> 
> 赞同：2
> 
> 时间：2012-07-02T17:49:58.433
> 
> 标签：ruby-on-rails, ruby, activeadmin, formtastic

好的，我认为这在 ActiveAdmin 上会很棘手。

如果为某个客户创建了发票，我需要发出弹出警告（我可能会使用 jQuery）。如果发票表格有一个可供客户选择的菜单，这将很容易，但这不是我的设置。相反，这是它的工作方式：

```
Shipment has_one Invoice
Shipment belongs_to Customer
(the New Shipment form has a select menu for customer)

Invoice belongs_to Shipment 
```

所以在我的新发票表格中，我有一个发货选择菜单。找出发票属于哪个客户，如果`i`包含`invoice`I do的实例`i.shipment.customer`。

```
# this is a snippet of my New Invoice form
form do |f|
f.inputs "Shipment Details" do      
  f.input :shipment_id, :label => "Shipment", :as => :select, :collection => Shipment.find(:all, :order => "file_number", :select => "id, file_number").map{|v| [v.file_number, v.id] }
  f.input :issued_at, :label => "Date", :as => :datepicker
  f.input :accounting_month, :label => "Accounting month", :as => :datepicker
end 
```

**在新发票表单中：如何从货件选择菜单中获取货件所属的客户。**

例如，用户选择 Shipment #1231。如果货件属于 customer_id 5，则显示 jQuery 警报。

（我已经知道如何在 ActiveAdmin 中包含一个 javascript 文件：[Active Admin: Include Javascript](https://stackoverflow.com/questions/10918213/active-admin-adding-a-line-in-the-head-section-of-layout/11297543#11297543)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T15:18:42.337

您可以做什么：使货件选择列表的集合显示“当前”发票所连接的客户。因此，对于集合，您可以加入 Customer 模型，如下所示：

```
f.input :shipment_id, :label => "Shipment", :as => :select, 
        :collection => 
          Shipment.
              joins(:customer).
              order('shipments.file_number').
              select("shipments.id, shipments.file_number || ' ' ||  customers.your_beautiful_customer_attribute as concatted").
              map{|v| [v.concatted, v.id] } 
```

希望能帮助到你。

# node.js - 基于日期的 SOLR 排序：将日期存储为 toISOString()，而 toUTCString 失败

> ID：11298630
> 
> 赞同：0
> 
> 时间：2012-07-02T17:50:29.707
> 
> 标签：node.js, solr, full-text-search

在将日期字段存储到 SOLR 期间，我将 Date() 转换为 toISOString() 并且它接受。我尝试使用 toUTCString 进行存储，但失败了。

现在在搜索时，我根据日期进行排序，我确实得到了结果，但是这些不是按降序排序的，而是按混合顺序排序的。

我尝试使用 [NOW-1YEAR/DAY TO NOW/DAY+1DAY] 指定范围，但结果仍然相同。首先我得到 6 天前的文件，然后是 30 分钟前的文件，然后是 2 个月前的文件。

正确的方法应该是什么？

编辑：这是我在 schema.xml 中添加的日期字段

```
 <field name="message_date" type="date" indexed="true" stored="false" /> 
```

这是我在每次搜索期间发送的参数，

```
query = "*:*";
var options = {
            fq: '{!geofilt}',
            sfield: 'location',
            pt: latitude+','+longitude,
            d: 10,
            sort: ["message_date desc", "geodist() asc"],
            start: 0,
            rows: 10
        }

solrclient.query(query, options, function(err, solrRes){
....
}); 
```

这是服务器端的 javascript，node.js 代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T04:02:41.573

上面的代码很好，它正在工作。问题是，在从 SOLR 检索结果后，我在我的数据库中进行了更精细的搜索以获取更多详细信息，并且没有排序。因此，在从 SOLR 检索结果后，对 Mongodb 的结果进行了排序，这很有效。

使用 nodejs 和 solr 模块是，[https://github.com/gsf/node-solr](https://github.com/gsf/node-solr)

# iphone - 更改目录时，AVAudioRecorder 录制失败

> ID：11298631
> 
> 赞同：2
> 
> 时间：2012-07-02T17:50:37.180
> 
> 标签：iphone, objective-c, ios, avaudiorecorder

我正在录制一些音频，当我使用此代码选择存储音频数据的目录时没问题：

```
NSArray *folders = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
                                                           NSUserDomainMask, YES);
NSString *documentsFolder = [folders objectAtIndex:0];
result = [documentsFolder stringByAppendingPathComponent:@"Recording.m4a"]; 
```

但我需要将音频文件存储在另一个目录中，然后我尝试了这段代码：

```
NSArray *folders = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
                                                           NSUserDomainMask, YES);
NSString *documentsFolder = [folders objectAtIndex:0];
result = [documentsFolder stringByAppendingPathComponent:@"Sounds/Recording.m4a"]; 
```

AVAudioRecorder 实例使用新路径初始化，但是当我调用它`[myAudioRecorer prepareToRecord]`时`[myAudioRecorder record]`它失败并且记录了任何声音。

如何正确更改目录？

PS：我也尝试用 NSFileManager 创建一个新目录，但是没有用。我是这样做的：

```
[[NSFileManager defaultManager] createDirectoryAtPath:pathAsString withIntermediateDirectories:YES attributes:nil error:&error] 
```

编辑：

这是我录制音频的代码：

```
//here is the method that returns the path i want to save the files    
- (NSString *) audioRecordingPath{ 
        NSString *result = nil;
        NSArray *folders = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
                                                           NSUserDomainMask, YES);
        NSString *documentsFolder = [folders objectAtIndex:0];
        result = [documentsFolder stringByAppendingPathComponent:@"Sounds/Recording.m4a"];
        return result;
    }

//just the record settings
    - (NSDictionary *) audioRecordingSettings{ 
        NSDictionary *result = nil;

        NSMutableDictionary *settings = [[NSMutableDictionary alloc] init];
        [settings setValue:[NSNumber numberWithInteger:kAudioFormatAppleLossless] forKey:AVFormatIDKey];
        [settings setValue:[NSNumber numberWithFloat:44100.0f] forKey:AVSampleRateKey];

        [settings setValue:[NSNumber numberWithInteger:1] forKey:AVNumberOfChannelsKey];
        [settings setValue:[NSNumber numberWithInteger:AVAudioQualityLow] forKey:AVEncoderAudioQualityKey];
        result = [NSDictionary dictionaryWithDictionary:settings];
        return result; 

    }

//here is where i record the audio
    - (IBAction)recordAudio{

        NSError *error = nil;

        NSString *pathAsString = [self audioRecordingPath];

        NSURL *audioRecordingURL = [NSURL fileURLWithPath:pathAsString];
        self.audioRecorder = [[AVAudioRecorder alloc] initWithURL:audioRecordingURL settings:[self audioRecordingSettings] error:&error];

        if (self.audioRecorder != nil){
            self.audioRecorder.delegate = self;
            if ([self.audioRecorder prepareToRecord] && [self.audioRecorder record]){ 
                NSLog(@"Successfully started to record.");

            } else {
                NSLog(@"Failed to record.");// the error returned.
                self.audioRecorder = nil; 
            }
        } else {
            NSLog(@"Failed to create an instance of the audio recorder.");
        } 

    } 
```

# c# - System.IndexOutOfRangeException 在初始化一次且长度不变的集合上，如何？

> ID：11298636
> 
> 赞同：1
> 
> 时间：2012-07-02T17:51:00.377
> 
> 标签：c#

我不明白为什么我今天收到了`System.IndexOutOfRangeException`。当程序已经运行了 8 个小时并且发生异常的地方被执行了数百万次时，我已经收到了它。这个地方很简单：

```
for (int i = 0; i < _goldDesiredOrdersBuy.Length; i++)
{
    _goldDesiredOrdersBuy[i] = -1;               // IndexOutOfRangeException! Strategy3.cs:line 666
} 
```

我仅在程序启动时初始化 _goldDesiredOrdersBuy 一次，因此可以保证在发生异常时对其进行初始化：

```
private int[] _goldDesiredOrdersBuy = new int[MaxOrderbookDepth]; 
```

我有另一个地方可以触摸这个数组：

```
 private int GetGoldVolumeBuy(int bidQuotesPos)
    {
        if (_goldDesiredOrdersBuy[bidQuotesPos] > -1)
        {
            return _goldDesiredOrdersBuy[bidQuotesPos];
        }
        int result = GetGoldVolumeBuyNotCached(bidQuotesPos);
        _goldDesiredOrdersBuy[bidQuotesPos] = result;
        return result;
    } 
```

就这样。`_goldDesiredOrdersBuy`应用程序启动时初始化一次，保证被初始化并且数组的长度不会在任何地方修改，所以我不明白我是如何收到`IndexOutOfRangeException`的，有什么想法吗？

```
Unhandled Exception: System.AggregateException: A Task's exception(s) were not observed either by Waiting on the Task or accessing its Exception property. As a result, the unobserved exception was rethrown by the finalizer thread. --->
   System.AggregateException: One or more errors occurred. --->
   System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at MyProj.Strategies.Strategy3.CalculateNewDesiredOrdersBuy() in C:\Oleg\projects\MyProj\MyProj\Strategies\Strategy3.cs:line 666
   at MyProj.Strategies.Strategy3.RecalculateBuyOrders() in C:\Oleg\projects\MyProj\MyProj\Strategies\Strategy3.cs:line 567
   at MyProj.Strategies.Strategy3.OnAllTablesUpdated() in C:\Oleg\projects\MyProj\MyProj\Strategies\Strategy3.cs:line 499
   at MyProj.Strategies.Strategy3.AllTablesUpdated() in C:\Oleg\projects\MyProj\MyProj\Strategies\Strategy3.cs:line 413
   at System.Threading.Tasks.Parallel.<>c__DisplayClassf`1.<ForWorker>b__c()
   at System.Threading.Tasks.Task.InnerInvokeWithArg(Task childTask)
   at System.Threading.Tasks.Task.<>c__DisplayClass7.<ExecuteSelfReplicating>b__6(Object )
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task.Wait(Int32 millisecondsTimeout, CancellationToken cancellationToken)
   at System.Threading.Tasks.Task.Wait()
   at System.Threading.Tasks.Parallel.ForWorker[TLocal](Int32 fromInclusive, Int32 toExclusive, ParallelOptions parallelOptions, Action`1 body, Action`2 bodyWithState, Func`4 bodyWithLocal, Func`1 localInit, Action`1 localFinally)
   at System.Threading.Tasks.Parallel.ForEachWorker[TSource,TLocal](IEnumerable`1 source, ParallelOptions parallelOptions, Action`1 body, Action`2 bodyWithState, Action`3 bodyWithStateAndIndex, Func`4 bodyWithStateAndLocal, Func`5 bodyWithEverything, Func`1 localInit, Action`1 localFinally)
   at System.Threading.Tasks.Parallel.ForEach[TSource](IEnumerable`1 source, Action`1 body)
   at MyProj.Market.FinishUpdatingTables() in C:\Oleg\projects\MyProj\MyProj\Market.cs:line 449
   at Library.Exchange.Gate.DoGateIteration() in C:\Oleg\projects\MyProj\MyProj\Gate.cs:line 143
   at Library.Exchange.Gate.<Connect>b__0() in C:\Oleg\projects\MyProj\MyProj\Gate.cs:line 98
   at System.Threading.Tasks.Task.Execute()
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.TaskExceptionHolder.Finalize() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T18:21:16.307

来自[`System.Array`MSDN](http://msdn.microsoft.com/en-us/library/system.array.aspx)

> 不保证任何实例成员都是线程安全的。

通过在多个线程之间共享此数组实例，您将违反文档。您应该正确锁定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T17:58:13.217

**Imo**的问题是您有几个函数可以接受类似`int index`（或类似的）参数并使用该参数从数组中恢复数据。

数组的大小没有改变，没关系。但是，即使您的数组长度是静态的并且等于（例如）5，如果您尝试使用 访问该数组`index>=5`，您将得到您描述的异常。

**编辑**

考虑到在循环内引发异常的另一种可能性`for(...)`，其边界用数组本身的大小标记，我想说考虑到执行堆栈，你*并行*执行东西。因此，我*认为*此时数组的大小会以某种方式发生变化。

要检查这一点，您可以尝试执行以下操作：

```
int limit = _goldDesiredOrdersBuy.Length; //SET LIMIT BEFORE ITERATION
for (int i = 0; i < limit ; i++)
{
    _goldDesiredOrdersBuy[i] = -1;           
} 
```

并检查错误是否仍然发生。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T17:58:05.770

好吧，这个方法不检查传入的有效索引。
所以我将尝试在这里进行一些安全检查。

```
private int GetGoldVolumeBuy(int bidQuotesPos) 
{ 
    int result = -1;
    if(bidQuotesPos >= 0 && bidQuotesPos < _goldDesiredOrdersBuy.Length)
    {
        if (_goldDesiredOrdersBuy[bidQuotesPos] > -1) 
        { 
            return _goldDesiredOrdersBuy[bidQuotesPos]; 
        } 
        result = GetGoldVolumeBuyNotCached(bidQuotesPos); 
        _goldDesiredOrdersBuy[bidQuotesPos] = result; 
    }
    return result; 
} 
```

我假设这`result=-1`是一个有效的输出

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T17:58:45.167

您没有检查 的值是否`bidQuotesPos`在数组范围内。

```
private int GetGoldVolumeBuy(int bidQuotesPos) 
{ 
    if (bidQuotesPos < 0 || bidQuotesPos >= _goldDesiredOrdersBuy.Length)
    {
        // either throw an exception, or (less desireable) return a value so that the caller
        // knows that an error occurred.
        return HandleInvalidInputValue(bidQuotesPos);
    }

    if (_goldDesiredOrdersBuy[bidQuotesPos] > -1) 
    { 
        return _goldDesiredOrdersBuy[bidQuotesPos]; 
    } 
    int result = GetGoldVolumeBuyNotCached(bidQuotesPos); 
    _goldDesiredOrdersBuy[bidQuotesPos] = result; 
    return result; 
} 
```

# .htaccess - .htaccess RewriteRule 当空字符串

> ID：11298638
> 
> 赞同：1
> 
> 时间：2012-07-02T17:51:04.983
> 
> 标签：.htaccess, mod-rewrite

我正在尝试做这样的事情[http://myweb.com//page](http://myweb.com//page)

如果第一个参数不存在，它只处理第二个参数。第一个是语言，它存储在会话中，但是，它可以更改 throe `?lang=en`..

我正在尝试这样的事情，但它不起作用

```
RewriteRule ^([a-zA-Z_]+)?/([a-zA-Z0-9_-]+)$ index.php?lang=$1&page=$2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T17:56:26.377

尝试将它们设为 2 个单独的规则，因为前导斜杠已被删除。

```
RewriteRule ^([a-zA-Z_]+)/([a-zA-Z0-9_-]+)$ index.php?lang=$1&page=$2 [L,QSA]
RewriteRule ^([a-zA-Z0-9_-]+)$ index.php?page=$1 [L,QSA] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T17:59:42.767

在我之前做过的可切换语言的网站上，我选择始终在 url 中使用该语言，这样更容易全面实施，并且对用户来说看起来更好。

```
RewriteRule ^$ /en/ [L]   #default language
RewriteRule ^([^/]+)/(.+)$ index.php?lang=$1&page=$2 [QSA,NE]   # first "slug" is presumed always language the rest is a page identifier 
```

在这里，您可以将没有设置语言的用户定向到 geoip 脚本或将用户代理字符串分割为语言代码或其他内容以使猜测更准确的脚本，而不是定向到 /en/。

# jsf - 在 PrimeFaces DataTable 中仅扩展一行

> ID：11298641
> 
> 赞同：1
> 
> 时间：2012-07-02T17:51:19.960
> 
> 标签：jsf, datatable, primefaces

我正在实现一个数据表，并希望限制用户一次只能扩展一个数据表行。如果用户在另一行已经展开时去展开第二行，它将先折叠第一行，然后再展开第二行。这可能使用primefaces吗？我目前正在使用 Primefaces 3.0 版

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:22:49.217

PrimeFaces 即将发布一项增强功能，将“rowToggle”事件添加到其行扩展组件中。它应该在 3.3.1 之后的下一个版本中。它将允许您处理行切换事件。一旦您能够处理切换事件，您将能够编写代码来折叠除当前切换行之外的所有行。请参阅此处：[https](https://code.google.com/p/primefaces/issues/detail?id=2277) ://code.google.com/p/primefaces/issues/detail?id= 2277 声明它将包含在下一次部署中。

请注意，他们已经在他们的展示实验室中添加了这个新事件的示例：http: [//www.primefaces.org/showcase-labs/ui/datatableExpandableRows.jsf](http://www.primefaces.org/showcase-labs/ui/datatableExpandableRows.jsf)，所以它应该即将推出。

或者，您可以利用的“onExpandStart”属性`<p:dataTable>`调用客户端代码（Javascript）来折叠处于展开状态的任何行。

# c++ - 没有在数组 C++ 上打印

> ID：11298645
> 
> 赞同：0
> 
> 时间：2012-07-02T17:51:39.663
> 
> 标签：c++, visual-studio-2010

我是 C++ 新手。我通常用 C# 编程，所以我在使用数组和循环时遇到了麻烦。当我尝试使用循环打印动态数组的内容时，它说请求的区域已损坏...例如，我将让它识别与数组内容一起使用的条件，但不打印它的内容：

```
// Array.cpp : Defines the entry point for the console application.
//
#include "stdafx.h"
#include <iostream>
using namespace std;
void main()
{
    int size=3;
    int *p;
    int myarray[10];
    myarray[3]=4;
    p=new int[size];
    p[2]=3;
    if(myarray[3]==4){
        cout << myarray[3] +"/n";
        cout << "Why?";
    }
    else
        cout << "Not equal " << endl;
    cin.get();
    delete [] p;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T17:54:29.840

代码看起来不错，除非它应该是

```
cout << myarray[3]  << "\n"; 
```

不是 +

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T17:58:25.853

问题是`myarray[3] +"\n"`。

“\n”表示字符串“\n”的**内存位置**。您正在尝试将 4 添加到该位置并打印它。如果您正在访问受保护的内存位置，这应该会给您垃圾数据或硬件异常（导致核心转储）。

为了得到（我认为）你要求做的事情，

> cout << myarray[3] << '\n'

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-02T18:19:26.990

虽然给出了解决方案：

```
cout << myarray[3] << "\n" 
```

要得到的一点是 myarray[3] 是一个整数，而 "\n" 是一个字符串，将它们作为字符串“添加”在一起的唯一方法是首先将整数变成一个字符串。<< 运算符将处理将 myarray[3] 转换为字符串的工作，没什么特别的，然后第二个 << 在它之后抽出一个新行。我个人更喜欢这样的代码，并且发现它更灵活，但在这个学习阶段，你可能会寻找更多：

```
printf("%i\n", myarray[3]); 
```

其中[printf](http://www.cplusplus.com/reference/clibrary/cstdio/printf/)搜索标志并将其他参数作为字符串加载并在一个命令中输出。

# r - 格子小提琴图中每个因子值的网格线

> ID：11298647
> 
> 赞同：4
> 
> 时间：2012-07-02T17:51:57.753
> 
> 标签：r, lattice

我使用 R 的 lattice 包制作了点图和小提琴图。点图对每个因子值都有网格线，以便更容易找到相应的点。

是否可以在不显示此类线条的格子小提琴图中产生此类线条？

在我的情况下，数据分布在更广泛的范围内，因此有时更难找到因子的相应值（因为对于因子的某些值，小提琴看起来更像一个点而不是小提琴）。

这是使用内置数据框 mtcars 的点图（具有连接点的垂直线）和小提琴图（其中“小提琴”未以图形方式与因子的值连接）的最小示例：

```
library("lattice")
dotplot( mpg ~ as.factor( cyl ), data=mtcars )
bwplot( mpg ~ as.factor(cyl), data=mtcars, panel = function( ..., box.ratio ) { panel.violin( ..., box.ratio ) } ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T18:46:49.033

这应该在小提琴图后面放置灰线：

```
bwplot( mpg ~ as.factor(cyl), data=mtcars, 
  panel = function(x, y, ..., box.ratio ) {
    panel.abline(v = x, col = "gray")
    panel.violin(x, y, ..., box.ratio ) 
  } ) 
```

![竖线小提琴图](../Images/aeb7502de825108add67a24913f3a4ac.png)

# c# - 使用 itextsharp 检查 pdf 是否受密码保护

> ID：11298651
> 
> 赞同：7
> 
> 时间：2012-07-02T17:52:27.650
> 
> 标签：c#, .net, pdf, itextsharp

我想检查 pdf 文件是否受密码保护以查看。那就是我想知道pdf文件是否有用户密码。

我在一些论坛上找到了一些关于它使用`isencrypted`功能的帮助，但它没有给出正确的答案。

是否可以检查pdf是否受密码保护？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-02T19:43:16.300

使用该`PdfReader.IsEncrypted`方法的问题在于，如果您尝试`PdfReader`在需要密码的 PDF 上实例化 a - 而您没有提供该密码 - 您将获得一个`BadPasswordException`.

记住这一点，您可以编写如下方法：

```
public static bool IsPasswordProtected(string pdfFullname) {
    try {
        PdfReader pdfReader = new PdfReader(pdfFullname);
        return false;
    } catch (BadPasswordException) {
        return true;
    }
} 
```

请注意，如果您提供的密码无效，则`BadPasswordException`在尝试构造`PdfReader`对象时会得到相同的密码。您可以使用它来创建验证 PDF 密码的方法：

```
public static bool IsPasswordValid(string pdfFullname, byte[] password) {
    try {
        PdfReader pdfReader = new PdfReader(pdfFullname, password);
        return false;
    } catch (BadPasswordException) {
        return true;
    }
} 
```

当然它很难看，但据我所知，这是检查 PDF 是否受密码保护的唯一方法。希望有人会提出更好的解决方案。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-01-24T12:52:22.417

```
 private void CheckPdfProtection(string filePath)
        {
            try
            {
                PdfReader reader = new PdfReader(filePath);
                if (!reader.IsEncrypted()) return;
                if (!PdfEncryptor.IsPrintingAllowed(reader.Permissions))
                    throw new InvalidOperationException("the selected file is print protected and cannot be imported");
                if (!PdfEncryptor.IsModifyContentsAllowed(reader.Permissions))
                    throw new InvalidOperationException("the selected file is write protected and cannot be imported");
            }
            catch (BadPasswordException) { throw new InvalidOperationException("the selected file is password protected and cannot be imported"); }
            catch (BadPdfFormatException) { throw new InvalidDataException("the selected file is having invalid format and cannot be imported"); }
        } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-02T18:18:02.803

参考：[检查完全权限](https://stackoverflow.com/a/7257289/1004522)

您应该能够只检查属性 PdfReader.IsOpenedWithFullPermissions。

```
PdfReader r = new PdfReader("YourFile.pdf");
if (r.IsOpenedWithFullPermissions)
{
    //Do something
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-12-23T17:22:41.977

以防万一它最终帮助某人，这是我在 vb.net 中使用的一个简单解决方案。使用完全权限检查的问题（如上所述）是您实际上无法打开具有阻止您打开它的密码的 PDF。在下面的代码中，我还有一些关于检查的事情。itextsharp.text.pdf 有一些您可能会发现实际上有用的例外情况，如果这没有满足您的需要，请检查一下。

```
Dim PDFDoc As PdfReader
Try
    PDFDoc = New PdfReader(PDFToCheck)
If PDFDoc.IsOpenedWithFullPermissions = False Then
   'PDF prevents things but it can still be opened. e.g. printing.
end if
Catch ex As iTextSharp.text.pdf.BadPasswordException
    'this exception means the PDF can't be opened at all. 
Finally 
    'do whatever if things are normal!
End Try 
```

# java - GWT CK EDITOR - 渲染问题

> ID：11298657
> 
> 赞同：2
> 
> 时间：2012-07-02T17:52:54.900
> 
> 标签：java, gwt, ckeditor

我在我的应用程序中使用 gwt-ckeditor。我正在使用**GWT 2.5**，并且在 GWT 中嵌入了**CKEDITOR**。我也有一些包含 CKEditor 的表单字段。当我从一种形式导航到另一种形式时，它不会维持其价值。我不想保存它。但我想至少维持它以使我的验证完成。我怎样才能实现这个功能？请告诉我。每当它脱离时，它就会失去它的价值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T11:46:25.690

是的，我也面临同样的问题。**CKeditor**实际上是从**IFrame**扩展而来的，这就是为什么当它与表单或小部件分离时，它会丢失所有信息。为了维持其价值，您必须手动对其进行编码。

```
private String ckValue ;

CkEditor ckeditor = new CkEditor(new CkConfig());
ckeditor.addAttachHandler(new AttachHandler(){
       public void onAttach(Event value){
             setCkValue(value);
       }
});

public void setCkValue(String ckValue){
      this.ckValue = ckValue;
}

public String getCkValue(){
      return ckValue;
} 
```

# lua - LUA：寻求分配默认参数的高效且无错误的方法

> ID：11298660
> 
> 赞同：6
> 
> 时间：2012-07-02T17:53:06.430
> 
> 标签：lua

而不是在我的函数定义中使用长长的参数列表，我更喜欢传递一些固定参数和一个“附加参数”表，如下所示：

```
function:doit( text, params )
end 
```

这很好，因为它允许我稍后添加新的命名参数而不会破坏旧调用。

当我尝试为某些参数强制使用默认值时，会出现我遇到的问题：

```
function:doit( text, params )
   local font     = params.font or native.systemBold 
   local fontSize = params.fontSize or 24
   local emboss   = params.emboss or true

   -- ...

end 
```

上面的代码在所有情况下都可以正常工作，除非我为浮雕传递了“假”：

```
doit( "Test text", { fontSize = 32, emboss = false } ) 
```

当我真的想要 false 时，上面的代码会导致 emboss 被设置为 true。

需要明确的是，我想要的是将第一个非 NIL 值分配给浮雕，而不是我得到第一个非假和非 NIL。

为了解决这个问题，我编写了一小段代码来查找表中的第一个非 NIL 值并返回：

```
function firstNotNil( ... )
   for i = 1, #arg do
      local theArg = arg[i]
      if(theArg ~= nil) then return theArg end
   end
   return nil
end 
```

使用此功能，我将重写浮雕分配，如下所示：

```
 local emboss   = firstNotNil(params.emboss, true) 
```

现在，这当然有效，但它似乎效率低下且过于夸张。我希望有一种更紧凑的方式来做到这一点。

请注意：我发现这个 ruby​​ 结构看起来很有希望，我希望 lua 有类似的东西：

```
[c,b,a].detect { |i| i > 0 } -- Assign first non-zero in order: c,b,a 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-02T21:50:17.517

Lua 的关系运算符计算为操作数之一的值（即该值不强制为布尔值），因此您可以通过说 来获得与 C 的三元运算符等效的值`a and b or c`。在您的情况下，`a`如果不是`nil`，则要使用，`b`否则`a == nil and b or a`：

```
local emboss = (params.emboss == nil) and true or params.emboss 
```

不像以前那么漂亮，但你只需要为布尔参数做这件事。

* * *

> [剪辑 - Lua 代码]
> 
> 现在，这当然有效，但它似乎效率低下且过于夸张。
> 
> 请注意：我发现这个 ruby​​ 结构看起来很有希望，我希望 lua 有类似的东西：
> 
> [c,b,a].检测 { |i| i > 0 } -- 按顺序分配第一个非零值：c,b,a

你的 Lua 函数不再是多余的或低效的。就源文本而言， Ruby 结构更*简洁*，但语义与`firstNotNil(c,b,a)`. 两种构造最终都创建了一个列表对象，用一组值对其进行初始化，然后通过一个线性搜索列表的函数运行它。

在 Lua 中，您可以使用 vararg 表达式跳过创建列表对象`select`：

```
function firstNotNil(...)
   for i = 1, select('#',...) do
      local theArg = select(i,...)
      if theArg ~= nil then return theArg end
   end
   return nil
end 
```

> 我希望有一种更紧凑的方式来做到这一点。

这样做的唯一方法是缩短函数名称。;)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-02T19:17:18.017

如果您真的想在一行中执行此操作，则需要这样的默认值**true**：

```
local emboss   = params.emboss or (params.emboss == nil) 
```

它不是很可读，但它有效。(params.emboss == nil) 当 params.emboss 未设置时（当您需要默认值时）计算为 true，否则为 false。所以当 params.emboss 为假时，该陈述为假，而当它为真时，该陈述为真（真或假=真）。

对于**false**的默认值，您最初尝试的方法将起作用：

```
local emboss   = params.emboss or false 
```

# c# - 如何在 C# 中解析 XML 表单数据

> ID：11298664
> 
> 赞同：1
> 
> 时间：2012-07-02T17:53:17.207
> 
> 标签：c#, xml, form-data

所以，我有一个将数据发布到 ASP 页面的 SMS 服务。

数据以 HTML 编码的 xml 格式输入。当我直接从 InputStream 读取它时，它看起来像这样：

```
 Content-Disposition: form-data; name="xml"

&lt;POSTBACK&gt;
    &lt;NOTIFICATION id="4254" created="2012-07-02 13:35:46.629214-04"&gt;
    &lt;ORIGIN&gt;SMS_MO&lt;/ORIGIN&gt;
    &lt;CODE&gt;N211&lt;/CODE&gt;
    &lt;BODY&gt;&lt;FROM&gt;+15035555555&lt;/FROM&gt;&lt;TO&gt;60856&lt;/TO&gt;&lt;TEXT&gt;cats are cats&lt;/TEXT&gt;&lt;RECEIVED&gt;2012-07-02 13:35:46.038477-04&lt;/RECEIVED&gt;&lt;/BODY&gt;
    &lt;/NOTIFICATION&gt;
&lt;/POSTBACK&gt;
------------------------------fde0d0d3bf3c-- 
```

我知道我可以手动进入并替换字符代码，然后将其读入 XmlDoc ......这就是我为了时间而做的事情。

我想知道是否有本地数据类型或内置类来处理 XML 表单数据？

试过：

```
string cleanString = HttpUtility.HtmlDecode(strRawtext); 
```

但由于某种原因它看起来一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T17:57:23.957

[HttpUtility.HtmlDecode 方法](http://msdn.microsoft.com/en-us/library/system.web.httputility.htmldecode%28v=vs.71%29.aspx)应该可以处理这个。

这对我来说很好：

```
private static void HtmlDecodeTest()
{
    string html = @"
&lt;POSTBACK&gt;
    &lt;NOTIFICATION id=""4254"" created=""2012-07-02 13:35:46.629214-04""&gt;
    &lt;ORIGIN&gt;SMS_MO&lt;/ORIGIN&gt;
    &lt;CODE&gt;N211&lt;/CODE&gt;
    &lt;BODY&gt;&lt;FROM&gt;+15035555555&lt;/FROM&gt;&lt;TO&gt;60856&lt;/TO&gt;&lt;TEXT&gt;cats are cats&lt;/TEXT&gt;&lt;RECEIVED&gt;2012-07-02 13:35:46.038477-04&lt;/RECEIVED&gt;&lt;/BODY&gt;
    &lt;/NOTIFICATION&gt;
&lt;/POSTBACK&gt;";

    string x = HttpUtility.HtmlDecode(html);
    Console.WriteLine(x);
} 
```

* * *

结果：

```
 <POSTBACK>
            <NOTIFICATION id="4254" created="2012-07-02 13:35:46.629214-04">
            <ORIGIN>SMS_MO</ORIGIN>
            <CODE>N211</CODE>
            <BODY><FROM>+15035555555</FROM><TO>60856</TO><TEXT>cats are cats</TE
XT><RECEIVED>2012-07-02 13:35:46.038477-04</RECEIVED></BODY>
            </NOTIFICATION>
        </POSTBACK> 
```

# css - CSS文件未在Django中加载

> ID：11298665
> 
> 赞同：0
> 
> 时间：2012-07-02T17:53:31.547
> 
> 标签：css, django

我在我的程序中定义了一个 CSS 文件，但由于某种原因它无法正常工作......当我用 firebug 检查时，状态为 200 OK 但没有发生任何变化......不确定我的 CSS 文件是否有任何语法问题. 你能提供你的意见吗

**网址.py**

```
from django.conf.urls.defaults import patterns, include, url
from preview,view import *
import os

site_media = os.path.join(os.path.dirname(__file__),'site_media')

urlpatterns = patterns('',
              (r'^catalog/$','home'),
              (r'^site_media/(?P<path>.*)$,'django.views.static.serve',{'document_root':site_media}),) 
```

**css.css**

```
*{ 
    margin:0; 
    padding:0; 
} 
html{ 
    font-size:medium; 
} 
html,body{ 
    background-color:Silver; 
} 
.cb{ 
    clear:both; 
} 
.fr{ 
    float:right; 
} 
.fl{ 
float:left; 
} 
.bn{ 
    border:none; 
}#main{ 
     margin: 0 auto; 
     width:900px; 
     background-color:White; 
} 
.bannerIEPadder, .sidebarIEPadder, .contentIEPadder{ 
     padding:10px;  
} 
.navIEPadder, .footerIEPadder{ 
     padding:5px; 
} 
#banner{ 
     width:900px; 
     height:75px; 
     background-color:DarkOrange; 
     color:White; 
     font-size:36px; 
     font-weight:bold; 
position:relative; 
} 
div.cart_box{ 
     position:absolute; 
     top:10px; 
     right:10px; 
     font-size:medium; 
} 
div.cart_box a{ 
     color:white; 
} 
#sidebar{ 
     width:200px; 
     float:left;; 
} 
#content{ 
     width:700px; 
     float:left; 
} 
#footer{ 
     clear:both; 
     background-color:#98AC5E; 
     color:White; 
     text-align:center; 
} 
a.skip_link{ 
     position:absolute; 
     left:-1000px; 
     top:-1000px; 
} 
```

**base.html**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "XHTML1-s.dtd" ><html 
xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head> 
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
     <title>{% block title %}{% if page_title %}{{ page_title }} - {% endif %}      
          {{ site_name }}{% endblock %}</title> 
     <meta name="keywords" content="{{ meta_keywords }}" /> 
     <meta name="description" content="{{ meta_description }}" /> 
     <link rel="stylesheet" href="/site_media/css.css"
           type="/text/css"/>

</head> 
<body> 
     {% block site_wrapper %}{% endblock %} 
</body></html> 
```

**目录.html**

```
{% extends "base.html" %} 

{% block site_wrapper %} 
<div id="main"> 
     <a href="#content" class="skip_link">Skip to main content</a> 
     <div id="banner"> 
          <div class="bannerIEPadder"> 
               <div class="cart_box"> 
                [link to cart here] 
                </div>
 Modern Musician 
          </div> 
     </div> 
     <div id="navigation"> 
          <div class="navIEPadder"> 
                [navigation here] 
          </div> 
     </div> 
     <div id="middle"> 
          <div id="sidebar"> 
               <div class="sidebarIEPadder"> 
                [search box here] 
               <br /> 
                [category listing here] 
               </div> 
          </div> 
          <div id="content"> 
               <a name=”content”&gt;</a> 
               <div class="contentIEPadder"> 
                    {% block content %}{% endblock %} 
               </div> 
          </div> 
    </div> 
         </div> 
         <div id="footer"> 
              <div class="footerIEPadder"> 
                   [footer here] 
               </div> 
         </div> 
    </div> 
    {% endblock %} 
```

**索引.html**

```
{% extends "catalog.html" %} 

{% block content %} 
     <h2>Welcome!</h2> 
{% endblock %} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T20:46:03.680

将 base.html 中的链接类型从“/text/css”更改为“text/css”。

# oracle - 在 Oracle 中定义局部变量的最简单方法是什么？

> ID：11298666
> 
> 赞同：8
> 
> 时间：2012-07-02T17:53:35.430
> 
> 标签：oracle, variables, plsql

在 SQL Server 中，我可以像这样定义局部变量。

```
declare @id number := 1000

select * from tbl_A where id = @id;
select * from tbl_B where id = @id; 
```

非常方便。我试图做同样的事情，`PL/SQL`但它不起作用。

```
DECLARE id number;
select 1000 into id from dual; 
```

你知道如何做类似的事情吗？最简单的方法是我的目标。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-02T17:55:54.113

如果要在 PL/SQL 中定义局部变量，则需要一个完整的 PL/SQL 块

```
DECLARE
  id NUMBER;
BEGIN
  SELECT 1000
    INTO id
    FROM dual;
END; 
```

要不就

```
DECLARE
  id NUMBER := 1000;
BEGIN
  <<do something that uses the local variable>>
END; 
```

如果你想在 SQL*Plus 中声明一个变量

```
SQL> variable id number
SQL> begin
       select 1000 into :id from dual;
     end;
     /

SQL> print id

        ID
----------
      1000

SQL> SELECT * FROM tbl_a WHERE id = :id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-21T15:12:07.963

# Oracle SQL 解决方案

```
DEF x = foo
SELECT '&x' FROM dual; 
```

结果将是：`foo`

**注意**：该变量即使在执行后也会保留该值。清除变量运行`UNDEFINE x`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-01T12:54:31.347

DECLARE 块的替代方法是使用 WITH 子句：

```
WITH my_params AS (
    SELECT 123 AS min_id FROM DUAL
) 
SELECT * 
FROM some_table 
WHERE id > (SELECT min_id FROM my_params) 
```

由于许多供应商都支持 WITH 子句，因此它更具可移植性，并且您可以从参数无缝更改为动态值。例如：

```
WITH my_params AS (
    SELECT min(id) AS min_id FROM some_id_table
) 
SELECT * 
FROM some_table 
WHERE id > (SELECT min_id FROM my_params) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-05T08:05:46.513

在 PL/SQL 中声明变量的一般语法是

> var_nm 数据类型 [NOT NULL := var_value ];
> 
> *   var_nn 是变量的名称。
> *   datatype 是有效的 PL/SQL 数据类型。
> *   NOT NULL 是变量的可选规范，该变量不能被分配空值。
> *   var_value 或 DEFAULT value 也是一个可选规范，您可以在其中使用某些特定值初始化变量。
> *   每个变量声明都是一个单独的语句，并且必须以分号结束。

我们可以通过以下两种方式之一为变量赋值 -

1.  直接赋值（例如`var_nm:= var_value;`）
2.  使用`select from`（例如`SELECT col_nm INTO var_nm FROM tbl_nm [WHERE clause];`）

在你的情况下，正如贾斯汀洞穴已经提到的那样

```
DECLARE 
 id number; 
BEGIN
 SELECT 1000 into id from dual;
 dbms_output.put_line('id : '|| id ); 
END; 
/ 
```

或者

```
DECLARE 
 id number := 1000; 
BEGIN
 dbms_output.put_line('id : '|| id ); 
END; 
/ 
```

**注意**：'/' 即 END 关键字后的反斜杠表示执行上述 PL/SQL 块。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-16T22:09:41.197

（刚刚偶然发现这个线程。）从 SQL*Plus 12.2 开始，您可以同时声明和赋值：

SQL> var id 编号 = 1000

SQL> select * from tbl_A where id = :id;

Oracle 称之为输入绑定。

如果一定要在 PL/SQL 中做，答案是别人给出的。

# android - 启动android模拟器并运行测试

> ID：11298672
> 
> 赞同：0
> 
> 时间：2012-07-02T17:53:53.000
> 
> 标签：android, bash, testing, adb

我正在编写一个在 Android 模拟器上执行一系列操作的脚本。我想启动模拟器，并运行一套测试。到目前为止，我有：

```
(emulator-ARM @emuName) & adb wait-for-device; adb shell am instrument -w com.name.name.android.test/android.test.InstrumentationTestRunner 
```

但这所做的只是启动模拟器，并返回一个错误，内容如下：

```
android.util.AndroidException: Can't connect to activity manager; is the system running? 
```

在我看来，等待设备只是等待连接设备，而不是等待设备准备好，这是我认为我需要的

其他人有这个问题，或者有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-09T11:39:13.823

根据文档[Android Debug Bridge / Commands](http://developer.android.com/tools/help/adb.html#commandsummary) / Scripting / wait-for-device ，正如您所说的那样（*在我看来，wait-for-device 只是等待设备连接，而不是设备准备好...*）。不幸的是，没有提到可以满足您需要的命令。

# jquery - 如何在 jQuery 日历中延迟执行

> ID：11298677
> 
> 赞同：0
> 
> 时间：2012-07-02T17:54:14.857
> 
> 标签：jquery, jquery-ui, jquery-plugins

我想在鼠标悬停时延迟执行。

这是我到目前为止所拥有的

```
eventMouseover : function(calEvent, $event) {
    var $dialogContent = $("#event_show");
    resetForm($dialogContent);
    $($dialogContent).dialog({
        modal:true, 
        title: "Details of "+calEvent.title,
        body: "Name of Patitent",
        buttons : {
            cancel : function() {
                $dialogContent.dialog("destroy");
                $dialogContent.hide();
            }
        }
    }).show();

}, 
```

当用户在执行后指向几秒钟时，我该如何延迟。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T18:14:07.450

延迟事件动作的一种简单方法是：

```
var timeout;
$('#example').click(function(){
  clearTimeout(timeout);
  timeout = setTimeout(function(){
    // your jQuery magic
  }, 200);
}); 
```

在本例中，您的 jQuery 魔术将在**200 毫秒**内执行。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-02T19:31:11.983

Try this:

```
eventMouseover : function(calEvent, $event) {
    var timer = setTimeout(function(){

        var $dialogContent = $("#event_show");
        resetForm($dialogContent);

        $($dialogContent).dialog({
            modal:true, 
            title: "Details of "+calEvent.title,
            body: "Name of Patitent",
            buttons : {
                cancel : function() {
                    $dialogContent.dialog("destroy");
                    $dialogContent.hide();
                }
            }
        }).show();
    }, 2000);
} 
```

This will execute the dialog code after 2 seconds. Replace the number 2000 with the number of miliseconds you require for the delay.

# jquery - jQuery- Reposition div onclick to align with a table row

> ID：11298682
> 
> 赞同：-1
> 
> 时间：2012-07-02T17:54:34.167
> 
> 标签：jquery, css, model-view-controller

As another post I've made noted, I don't have much experience with jQuery, and I apologize for that. What I'm trying to do seems fairly simple.

Overview: I have a table wrapped in a div. Within that table, each row represents a distinct element. I have it setup such that when a link is clicked in each row, the corresponding data for that element is displayed in a div next to the table. This part works.

What I'm trying to do: I would like the top of the popup div to display inline with the table row that is selected.

Here's my simplified code:

```
 <div id="container" style="display:inline-block">
       <table>
          <tr id="selected_row">
             <td>
                <a href="/gohere" onclick="updatePos('#param_detail_container');">
                   @Html.DisplayFor(model => item.Name)
                </a>
             </td>
          </tr>
       </table>
    </div>

    <div id="popupDiv" style="display:inline-block; position:absolute; ">
        Contenet in here...
    </div> 
```

Script:

```
 <script type="text/javascript" src="~/Scripts/jquery-1.6.2.min.js"></script>
    <script type="text/javascript">
       $(document).ready(function updatePos(popupDiv) {
          var top = $('#selected_row').offset().top;
             popupDiv.css({ top: top + "px" }).show();
          });
    </script> 
```

I receive the following error:

```
 Microsoft JScript runtime error: Unable to get value of the property 'replace': object is null or undefined 
```

'replace' is located inside of jquery1.6.2.min.js. I'm assuming this has something to do with how I'm trying to set the top attribute of the popupDiv. Any suggestions?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T18:00:19.757

function must be global, so put it outside `ready`:

```
/*$(document).ready(function() {

});*/

function updatePos(popupDiv) {
      var top = $('#selected_row').offset().top;
      $(popupDiv).css({ top: top + "px" }).show();
   } 
```

in your case no need to use `$(document).ready`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T18:01:43.850

Let me know if this helped.

```
<script type="text/javascript" src="~/Scripts/jquery-1.6.2.min.js"></script>
<script type="text/javascript">
   $(document).ready(function(){
      function updatePos(popupDiv) {
         var top = String($('#selected_row').offset().top);
             $(popupDiv).css("top", top + "px").show();
         };
      });
</script> 
```

# excel - 在单元格中查找 8 位数字

> ID：11298684
> 
> 赞同：0
> 
> 时间：2012-07-02T17:54:43.400
> 
> 标签：excel, vba

我有一个单元格，用户在其中输入他们的姓名、序列号和配置号。我想提取该 8 位序列号以在文件名中使用。
单元格看起来像这样：

> 操作员：Jon Doe 日期：07/02/12 S/N:12345678 Cfg:1

我只知道如何解析固定长度（例如`value(mid(A1,5,6)`）的文本，但由于用户名总是在变化，所以文本的长度会发生变化。
我可以使用什么功能来始终保证我只会得到那个 8 位数的序列号？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T17:59:36.957

试试这个 Excel 公式。

```
=MID(A1,SEARCH("S/N:",A1,1)+4,SEARCH("Cfg",A1,1)-(SEARCH("S/N:",A1,1)+4)) 
```

假设该值`Jon Doe Date: 07/02/12 S/N:12345678 Cfg:1`在单元格 A1 中。将上式代入B1

如果你仍然想要 VBA 代码，那么你可以试试这个

```
Sub Sample()
    Debug.Print Application.Evaluate("=MID(A1,SEARCH(""S/N:"",A1,1)+4," & _
    "SEARCH(""Cfg"",A1,1)-(SEARCH(""S/N:"",A1,1)+4))")
End Sub 
```

# c# - 导出 C# dll 的入口点 - 有没有类似 __declspec(dllexport) 的东西？

> ID：11298685
> 
> 赞同：0
> 
> 时间：2012-07-02T17:54:45.263
> 
> 标签：c#

我有一个与大型外部程序的 API 接口的 C# .dll。

该程序需要 dll 中的入口点函数，其形式为：

```
extern void entrypoint(
char * a,
int * b,
int c); 
```

它没有找到这个并抱怨。

我的 dll 的原始/默认入口点只是：

```
public static void Main(string[] args) 
```

我试过创建一个像

```
public static void entrypoint(char a, int b, int c) 
```

但这显然不是那么简单。我已经看到了很多关于如何使用 __declspec(dllexport) 在 C++ 中执行此操作的内容，并且我已经看到了一些针对 C# 的复杂/hacky 解决方案，但似乎应该有一种直接的方法来做到这一点。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T20:03:24.120

如果您的外部系统是基于 COM 的，则有一些方法可以做到这一点，因为 .NET 是一个隐藏的 COM 对象。

埃里克

# playframework - Play Framework + SecureSocial：java.lang.NoSuchMethodError:securesocial.controllers.ReverseLoginPage.authenticate

> ID：11298687
> 
> 赞同：3
> 
> 时间：2012-07-02T17:54:50.707
> 
> 标签：playframework, securesocial

我是使用 Play 框架的新手，我正在尝试使用 Facebook-OAuth2 提供程序将 SecureSocial 插件合并到我的应用程序中。当我向以下位置发送 GET 请求时遇到了这个错误`/login`：

```
! @6apkmf9m3 - Internal server error, for request [GET /login] ->

play.core.ActionInvoker$$anonfun$receive$1$$anon$1: Execution exception [[NoSuchMethodError: securesocial.controllers.ReverseLoginPage.authenticate(Ljava/lang/String;)Lplay/api/mvc/Call;]]
    at play.core.ActionInvoker$$anonfun$receive$1.apply(Invoker.scala:134) [play_2.9.1.jar:2.0.2]
    at play.core.ActionInvoker$$anonfun$receive$1.apply(Invoker.scala:115) [play_2.9.1.jar:2.0.2]
    at akka.actor.Actor$class.apply(Actor.scala:318) [akka-actor.jar:2.0.2]
    at play.core.ActionInvoker.apply(Invoker.scala:113) [play_2.9.1.jar:2.0.2]
    at akka.actor.ActorCell.invoke(ActorCell.scala:626) [akka-actor.jar:2.0.2]
    at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:197) [akka-actor.jar:2.0.2]
Caused by: java.lang.NoSuchMethodError: securesocial.controllers.ReverseLoginPage.authenticate(Ljava/lang/String;)Lplay/api/mvc/Call;
    at securesocial.core.IdentityProvider.authenticationUrl(IdentityProvider.scala:86) ~[classes/:na]
    at securesocial.views.html.login$$anonfun$apply$3$$anonfun$apply$4.apply(login.template.scala:44) ~[classes/:na]
    at securesocial.views.html.login$$anonfun$apply$3$$anonfun$apply$4.apply(login.template.scala:43) ~[classes/:na]
    at play.templates.TemplateMagic$.defining(ScalaTemplates.scala:756) ~[templates_2.9.1.jar:2.0.2]
    at securesocial.views.html.login$$anonfun$apply$3.apply(login.template.scala:43) ~[classes/:na]
    at securesocial.views.html.login$$anonfun$apply$3.apply(login.template.scala:42) ~[classes/:na] 
```

*   有人可以提示我在哪里可以找到有关此错误的更多信息吗？
*   Play 如何工作从`securesocial.controllers.ReverseLoginPage`到`securesocial.controllers.LoginPage`，前者存在于模块中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T18:38:14.147

来自[Play 2 文档](http://www.playframework.org/documentation/2.0.2/ScalaRouting)：

> 对于路由文件中使用的每个控制器，路由器将在路由包中生成一个“反向控制器”，具有相同的操作方法，具有相同的签名，但返回的是 play.api.mvc.Call 而不是 play.api .mvc.动作。

我认为这就是它的`ReverseLoginPage`来源，但我不知道是什么失败了。也许路线中有一些错误，或者仍然存在的旧课程。尝试运行`clean`，以确保不是这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-26T10:15:17.970

即使我是新手玩框架。我现在不知道为什么，但这与您的路线文件有关。这是因为securesocial 正在尝试调用您的配置中未提供路线的操作。试试这个示例路线，可以尝试通过删除您认为不必要的路线来进行调试，以获得您缺少的一条路线。

```
# Routes
# This file defines all application routes (Higher priority routes first)
# ~~~~

# Home page
GET     /                           controllers.Application.index()

# Map static resources from the /public folder to the /assets URL path
GET     /assets/*file               controllers.Assets.at(path="/public", file)

# Login page
GET     /login                      securesocial.controllers.LoginPage.login
GET     /logout                     securesocial.controllers.LoginPage.logout

# User Registration and password handling (only needed if you are using UsernamePasswordProvider)
GET     /signup                     securesocial.controllers.Registration.startSignUp
POST    /signup                     securesocial.controllers.Registration.handleStartSignUp
GET     /signup/:token              securesocial.controllers.Registration.signUp(token)
POST    /signup/:token              securesocial.controllers.Registration.handleSignUp(token)
GET     /reset                      securesocial.controllers.Registration.startResetPassword
POST    /reset                      securesocial.controllers.Registration.handleStartResetPassword
GET     /reset/:token               securesocial.controllers.Registration.resetPassword(token)
POST    /reset/:token               securesocial.controllers.Registration.handleResetPassword(token)
GET     /password                   securesocial.controllers.PasswordChange.page
POST    /password                   securesocial.controllers.PasswordChange.handlePasswordChange

# Providers entry points
GET     /authenticate/:provider     securesocial.controllers.ProviderController.authenticate(provider)
POST    /authenticate/:provider     securesocial.controllers.ProviderController.authenticateByPost(provider)
GET     /not-authorized             securesocial.controllers.ProviderController.notAuthorized 
```

它适用于我的 play 2.2.0 版本，安全社交位于 master-SNAPSHOT。

# ios - NSNotificationCenter 给出的键盘尺寸

> ID：11298688
> 
> 赞同：7
> 
> 时间：2012-07-02T17:54:55.150
> 
> 标签：ios, nsnotificationcenter, uikeyboard, device-orientation

我想在从 UISearchBar 调用的键盘上添加一个附件视图。由于 UISearchBar 没有实现这个属性，我刚刚创建了一个工具栏。根据[Apple](https://developer.apple.com/library/archive/documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html)关于此事的文档，我决定使用通知中心不仅要知道何时调用键盘，还要知道键盘的大小，这取决于方向。

我已经按照文档中的示例进行操作，并且在`keyboardWasShown`方法上，我调用了一个动画，它将在键盘顶部显示工具栏。像这样的东西：

```
-(void)keyboardWasShown:(NSNotification*)aNotification {

    NSDictionary *info=[aNotification userInfo];
    CGSize keyboardSize=[[info objectForKey:UIKeyboardFrameBeginUserInfoKey] CGRectValue].size;

     NSLog(@"width: %.1f; height: %.1f", keyboardSize.width, keyboardSize.height );

    [self showAccessoryView:keyboardSize.height];
} 
```

并且，在动画中，我设置了工具栏的框架，如下所示：

```
 self.auxiliaryKeyboardBar.frame=CGRectMake(0, self.view.frame.size.height-(44+kbh), self.view.frame.size.width, 44); 
```

其中 44 是工具栏的静态高度，kbh 是从上述方法传递的 keyboard.size.heigth。

我观察到的问题是`userInfo`字典给出的键盘大小总是指纵向。所以，纵向的 NSLog 是：

`width: 320.0; heigth: 216.0`, 没关系

但是当我将方向更改为横向并调用键盘时，NSLog 如下：

`width: 162.0; heigth: 480.0`，这会使工具栏超出范围。

所以，我最终在调用动画之前添加了一个条件，例如：

```
if ([self deviceIsPortrait]==YES) {
        [self showAccessoryView:keyboardSize.height];
    }else if ([self deviceIsPortrait]==NO) {
        [self showAccessoryView:keyboardSize.width];
    } 
```

我现在想知道我是否做错了什么，因为我严格按照 Apple 的示例来避免对键盘高度（作为浮点数）的依赖，并且我最终不得不添加一个方向条件。

这里发生了什么？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-02T18:28:52.403

我认为您缺少的是：

```
CGRect keyboardFrameConverted = [mainSubviewOfWindow convertRect:keyboardFrame fromView:window]; 
```

这有点脱离上下文，所以这里是完整的实现：

```
- (void) keyboardDidShow:(NSNotification*)notification {
    CGRect keyboardFrame = [[[notification userInfo] objectForKey:UIKeyboardFrameEndUserInfoKey] CGRectValue];
    NSLog(@"keyboard frame raw %@", NSStringFromCGRect(keyboardFrame));

    UIWindow *window = [[[UIApplication sharedApplication] windows]objectAtIndex:0];
    UIView *mainSubviewOfWindow = window.rootViewController.view;
    CGRect keyboardFrameConverted = [mainSubviewOfWindow convertRect:keyboardFrame fromView:window];
    NSLog(@"keyboard frame converted %@", NSStringFromCGRect(keyboardFrameConverted));
} 
```

# r - R中的离散全局网格

> ID：11298693
> 
> 赞同：9
> 
> 时间：2012-07-02T17:55:02.920
> 
> 标签：r, geospatial, latitude-longitude

我有一个由与某些 Z 值相关的纬度-经度对组成的数据集（例如有关植物植被覆盖程度的数据）。

我想对这些数据的空间分布进行一些分析。

为此，有必要对近端数据点进行分箱。

我想使用离散全局网格来执行此操作，例如二十面体 Snyder 等面积 (ISEA) 网格或[DGGRID](http://webpages.sou.edu/~sahrk/dgg/dggrid/dggrid.html)生成的网格。

关键是数据的经纬度值可以转换为唯一的cell id，cell中心的经纬度是可确定的，cell的大小是可变的（用于不同空间尺度的分析），以及单元格的面积近似相等。

一张描绘这看起来如何的图像：

![离散全球网格](../Images/dbec0193cbff34cbf59984f92e37c426.png)

R中有什么可以做到这一点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-08-03T16:10:44.167

在对完全相同的问题进行高低搜索之后，我最终使用了 DGGRID 本身和 R。顺便说一下，DGGRID 非常出色。所有的辛勤工作都已完成。将它作为一个包实现对 R 社区来说将是一个重大的福音（我希望 Kevin Sahr 正在阅读这篇文章）。

顺便说一句，那个 URL 已经过时了。我犯了同样的错误，最终得到了旧版本的 DGGRID。最新的版本是两个版本，位于：

[http://discreteglobalgrids.org/](http://discreteglobalgrids.org/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-07-12T22:20:48.577

我刚刚完成了一个名为[dggridR](https://github.com/r-barnes/dggridR)的 R 包，它以易于使用的方式包装了 dggrid。

该软件包也[可在 CRAN 上获得](https://github.com/r-barnes/richdem)。

[![dggridR：R 的离散全局网格](../Images/df1fb658a7ddf88efd1da6782cf63647.png)](https://i.stack.imgur.com/diFCE.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T18:48:00.907

为什么不使用 DGGRID 本身，它可以完成您所要求的一切？例如，您可以使用 DGGRID 将 lat/lon/datavalue 记录的文本文件转换为 cellID/datavalue 形式的记录，然后将它们导入 R。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-18T15:33:06.190

对于曲面上的六边形网格，我只发现了另一条线索： hexbin 包的一些未经测试/beta 函数：

[http://ugrad.stat.ubc.ca/R/library/hexbin/html/00Index.html](http://ugrad.stat.ubc.ca/R/library/hexbin/html/00Index.html)

# python - 使用 Python 从许多 CBR 档案中删除第一个文件

> ID：11298694
> 
> 赞同：1
> 
> 时间：2012-07-02T17:55:06.387
> 
> 标签：python, rar

我有超过 400 个`CBR`文件，需要删除每个文件中包含的第一个图像，其文件名的格式与包含 CBR 文件的名称相匹配，`XXX-000a.gif`即. 我将如何在 Python 中执行此操作？我在**OS X Lion**上。`XXX``XXX.cbr`

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T19:56:24.143

看起来 rarfile 库不支持文件删除，所以我最终得到了以下代码：

```
from rarfile import RarFile, NoRarEntry
from glob import glob
import os, subprocess

CBR_DIR = "directoryWithCBRFiles"

for fname in glob(CBR_DIR + os.sep + "*.cbr"):
    toremove = os.path.basename(fname)[:-4] + "-000a.gif"
    try: # to check if the file exists
        RarFile(fname).getinfo(toremove)
    except NoRarEntry:
        print("Wanted file not found in %s." % fname)
        continue

    # rar: http://www.rarlab.com/rar/rarosx-4.2.0.tar.gz
    subprocess.call(["rar", "d", fname, toremove])

print("All done!") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T18:11:28.510

在没有看到您尝试过的情况下，这是我能做的最好的

```
for fname in os.listdir('directoryWithCBRFiles'):
    if fname.endswith('-000a.gif'):
        os.remove(os.path.join('directoryWithCBRFiles', fname)) 
```

希望能帮助到你**

# java - Java Applet 不会在网页上加载

> ID：11298695
> 
> 赞同：1
> 
> 时间：2012-07-02T17:55:08.470
> 
> 标签：java, html, applet, load

我有一个可以在文件夹中找到最近创建的文件的 Java 应用程序。我的最终目标是将该应用程序放在网页上，这样当用户打开网页时，该页面将导致文件夹中的最新文件打开。我从 oracle 阅读了一些关于创建简单小程序的教程，但我遇到的所有内容都涉及制作我的页面不需要的 GUI。

目前，当我在 Firefox 中打开 html 页面时，它会加载除小程序之外的所有 html。它没有给出错误消息，它只是不做任何事情。我认为这是因为它没有将我的 java 应用程序识别为小程序，所以我认为我可能需要做更多工作才能将我的代码转换为小程序。我在我的 java 类名中添加了“扩展 Applet”，并考虑添加一个 init 方法，但这似乎更适合那些想要 GUI 的人。

java应用程序在下面，以防万一。就 HTML 而言，我将 applet 嵌入为 applet code="FirstApplet" width='300' height='300' （带有正确的开始和结束标签），它与 java 应用程序位于同一文件夹中。

```
import java.applet.Applet;
import java.io.File;
import java.io.IOException;

@SuppressWarnings("serial")
public class FirstApplet extends Applet{
    public static File[] getPath(String folderPath){

        File directory = new File(folderPath);
        File[] myarray;
        myarray=directory.listFiles();
        return myarray;
    }
    public static String getMostCurr(File[] fileArray){
        File mostCurrent = null;
        for (int i = 0; i < fileArray.length; i++) {
            if ((mostCurrent==null)||
            (fileArray[i].lastModified()> mostCurrent.lastModified())) 
        {
            mostCurrent = fileArray[i]; 
        }                   }

        //System.out.println(mostCurrent.toString());       
        return mostCurrent.toString();
    }

    public static void main(String[] args) throws IOException{
        //opens file on MACINTOSH
        Runtime.getRuntime().exec(new String[]{"/usr/bin/open", 
                getMostCurr(getPath("/Users/guest/Desktop/lectures/testFileReader"))});
    }
} 
```

编辑**：这是所要求的 HTML 页面。

```
<html>
<head>
<title>My First Java Applet </title>
</head>
<body>
Here's my first java applet:  <br> <br>
<applet code ='FirstApplet.class' width='300' height='300'>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T18:04:24.680

您的小程序是否仅在本地查看页面时运行——即，它是 HTML 只是为了方便？

因为否则，您将在这里遇到高级设计问题。当小程序在浏览器中运行时，它是在客户端运行的。因此它将无法列出服务器上的文件。Applet 沙箱也会阻止您列出客户端文件。您当然不能`Runtime.exec(...)`在小程序内执行 a。

您需要研究服务器端技术。或者，如果您坚持使用 Applets，您将需要以某种方式获取服务器端的所有文件，查看标题以确定每个资源的创建/上次修改时间，然后选择合适的...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T18:58:39.860

> 它是 HTML 只是为了方便。

开发、调试和部署小程序（甚至在一台 PC 上）并不方便或容易。从我这里拿走吧，我在小程序方面有丰富的经验。

> 它只会在拥有所有必要文件的经理的计算机上运行。

对于一台机器，我会使用标准应用程序。带有`main()`, 可能从 shell 脚本启动（例如 OS X 的 .sh）。他们不是“单击链接”来浏览自动打开文件的页面，而是“运行（双击？）执行相同操作的脚本”。在 Windows 中，您甚至可能直接从 HTML 链接到`.bat`文件，但我怀疑 Apple 是否会打开该安全漏洞。

还希望使用`Desktop.open(File)`or`Desktop.edit(File)`代替`Runtime`.

# objective-c - 将核心绘图对象放入 xcode 4.3.3

> ID：11298699
> 
> 赞同：0
> 
> 时间：2012-07-02T17:55:26.163
> 
> 标签：objective-c, ios, xcode, frameworks, core-plot

我正在尝试遵循本教程（[Using-core-plot-in-an-iphone-application](http://www.switchonthecode.com/tutorials/using-core-plot-in-an-iphone-application)）。当我尝试将 CorePlot-CocoaTouch.xcodeproj 文件从 core-plot/framework 目录拖到我的项目中时，我没有出现任何允许我将库放入我的 xcode 项目的内容。与教程版本相比，它是我的版本吗？谁能告诉我如何使用 xcode 4.3.3 版本来做到这一点？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T17:57:54.570

尝试使用本教程开头的说明，它对我有用，我上周刚刚设置了 CorePlot。

[http://www.johnwordsworth.com/2011/10/adding-charts-to-your-iphone-ipad-app-using-core-plot/](http://www.johnwordsworth.com/2011/10/adding-charts-to-your-iphone-ipad-app-using-core-plot/)

此外，您不想拖动 .xcodeproj 文件，您需要一组不同的文件，这些文件在上述教程的开头已注明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T18:24:45.733

将 CorePlot-CocoaTouch.xcodeproj 文件拖到您的项目中

转到当前目标设置的构建阶段部分。

展开 target Dependencies 部分，点击 + 按钮，应该有一个 CorePlot-CocoaTouch 选项，添加它。

展开 Link Binary With Library 部分，点击 +，选择 libCorePlot-CocoaTouch.a

转到构建设置，并在标题搜索路径下添加适当的路径，我使用“${PROJECT_DIR}/../core-plot/Source/framework”

得到其他链接器标志并添加 -ObjC

接下来的 2 条说明不是构建应用程序所必需的，但需要它来构建 App Store 的存档。

现在转到您项目的文件浏览器，选择 core-plot 项目，选择 CorePlot-CococaTouch 目标，在设置中搜索 Skip Install 并将其设置为 yes

转到构建阶段，展开复制标题部分，将所有标题移动到项目部分。

# c++ - 跟虚是非法的吗？

> ID：11298701
> 
> 赞同：1
> 
> 时间：2012-07-02T17:55:35.757
> 
> 标签：c++, class, visual-c++, compiler-errors, void

我有以下 C++ （它还没有真正做任何事情......）

```
#include "stdafx.h"
#include <iostream>

using namespace std;

class Ranker 
{
    int up, down;
  public:
    void set_ranks(int, int);
    int rank(int, int, int, double);
}

void Ranker::set_ranks(int a, int b)
{
    up = a;
    down = b;
}

int _tmain(int argc, _TCHAR* argv[])
{
    return 0;
} 
```

当我运行它时，它会在 MS V C++ 中显示以下错误消息

```
1>------ Build started: Project: rankclass, Configuration: Debug Win32 ------
1>  rankclass.cpp
1>c:\users\student\desktop\solomon w. c++\rankclass\rankclass\rankclass.cpp(17): error C2628: 'Ranker' followed by 'void' is illegal (did you forget a ';'?)
1>c:\users\student\desktop\solomon w. c++\rankclass\rankclass\rankclass.cpp(18): error C2556: 'Ranker Ranker::set_ranks(int,int)' : overloaded function differs only by return type from 'void Ranker::set_ranks(int,int)'
1>          c:\users\student\desktop\solomon w. c++\rankclass\rankclass\rankclass.cpp(13) : see declaration of 'Ranker::set_ranks'
1>c:\users\student\desktop\solomon w. c++\rankclass\rankclass\rankclass.cpp(18): error C2371: 'Ranker::set_ranks' : redefinition; different basic types
1>          c:\users\student\desktop\solomon w. c++\rankclass\rankclass\rankclass.cpp(13) : see declaration of 'Ranker::set_ranks'
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

这是为什么……Ranker后面不跟void？！？！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-02T17:56:17.647

声明后缺少分号`Ranker`。

它应该是：

```
class Ranker 
{
    int up, down;
  public:
    void set_ranks(int, int);
    int rank(int, int, int, double);
};  // <--- Note semicolon 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-02T17:57:50.563

类定义后跟一个分号，在第 12 行加一个。

# mysql - Mysql 选择互惠的记录对，不重复

> ID：11298702
> 
> 赞同：7
> 
> 时间：2012-07-02T17:55:37.067
> 
> 标签：mysql, select

我有一个有两列的表：

1.  person_id
2.  与第一个字段 id 合作的 person_id

我需要选择所有合作对，这很容易，但问题出在哪里：表中的数据如下：`987`- `102`, `103 - 104`, `104 - 103`, `21 - 102`。由于这些数据的结果我应该有 3 个合作对`987 - 102`, `103-104`, `21-102`, 正如你所看到的`103 - 104`，并且`104 - 103`记录具有相同的逻辑，我怎样才能避免它们的重复。任何的想法？

谢谢，最好的问候。安东。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-02T17:59:01.787

您可以使用 MySQL 的[`LEAST()`](http://dev.mysql.com/doc/en/comparison-operators.html#function_least)和[`GREATEST()`](http://dev.mysql.com/doc/en/comparison-operators.html#function_greatest)函数，以及`DISTINCT`：

```
SELECT DISTINCT LEAST(a, b), GREATEST(a, b) FROM mytable 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T18:51:44.387

如果保留每个“对”中元素的顺序**并不**重要，请参阅 eggyal 的答案。该查询返回的结果集与您指定的结果集略有不同，它返回 pair`102-987`而不是`987-102`. 它还消除了表格中出现的任何“重复”对。

如果保留每对中元素的顺序**很**重要，并且当这两个“匹配”对都存在时，您希望返回“更小 - 更大”而不是“更大 - 更小”，则可以使用以下内容：

```
SELECT c.col1, c.col2
  FROM mytable c
  LEFT
  JOIN mytable d ON d.col1 = c.col2 AND d.col2 = c.col1 AND d.col1 <> d.col2
 WHERE (d.col1 IS NULL OR d.col1 > c.col1) 
```

要消除所有重复对和“匹配”对，请添加 GROUP BY 子句或 DISTINCT 关键字，例如

```
SELECT c.col1, c.col2
  FROM mytable c
  LEFT
  JOIN mytable d ON d.col1 = c.col2 AND d.col2 = c.col1 AND d.col1 <> d.col2
 WHERE (d.col1 IS NULL OR d.col1 > c.col1)
 GROUP BY c.col1, c.col2 
```

**笔记：**

SQL 小提琴在这里：[http ://sqlfiddle.com/#!2/1d9e7/1 在这里：](http://sqlfiddle.com/#!2/1d9e7/1) [http](http://sqlfiddle.com/#!2/1d9e7/2) : //sqlfiddle.com/#!2/1d9e7/2

比较运算符不是 null 安全的，当 col1 或 col2 包含 NULL 值时，它们可能不会返回您想要的结果集。（可以修改查询以处理 col1 和/或 col2 的 NULL 值。）如所写，两个查询都将返回，例如，`(1,NULL)`如果`(NULL,1)`这些“匹配”“对”在表中，则返回。（归结为您是否要考虑匹配 NULL 值的问题。）

另请注意，两个查询都将返回行 where `col1=col2`。

请注意，第一个查询不会消除表中存在的“重复”行。也就是说，如果重复的“对”例如`(202,101)`出现在两个不同的行中，则两者都将被返回（除非查询返回至少一个具有“匹配”对的行：`(101,202)`。）

不清楚在这些情况下您希望返回什么结果集，因此第一个查询显示了`(larger,smaller)`当匹配`(smaller,larger)`对位于结果集中时仅消除行的模式。

第二个查询消除了所有重复和“匹配”对。

# ruby-on-rails - Rails 中的 ActiveModel 与 ActionView

> ID：11298704
> 
> 赞同：0
> 
> 时间：2012-07-02T17:55:41.393
> 
> 标签：ruby-on-rails, ruby, view, controller, action

这是一个菜鸟问题！

如何保存模型动作，一旦我尝试保存在控制器中，参数 [:action] 被动作控制器采用..

这是我的控制器：

```
def viewTask()
  @id = params[:id]
  @task = Task.find(@id)
  @status = Status.find(@task.status_id)
  @actions = Action.where("task_id = #{@id}")
  @action = Action.new

  if params[:action]
    @action = Action.new(:message => params[:action], :task_id => @id)
    @action.save
  end
end 
```

这是我的看法：

```
<%= form_for :action do |a| %>
  <%= a.text_area :message, :cols => 10, :rows => 5 %>
  <%= a.submit 'ok', :class=> "btn" %>
<% end %> 
```

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T21:49:12.133

这个答案更像是一个评论，但是很难理解这个问题是关于什么的，所以我决定把这个作为答案。

* * *

拜托，费尔南多，我们怎么知道你想做什么？表单应该提交到什么操作？您能否向我们展示您的 routes.rb，以便我们知道操作表单如何提交给您的控制器操作。也许，为了避免 Rails 中的命名约定问题，您应该将`Action`Model 和 Controller重命名为`Mission`or之类的名称`Activity`。

你的`params`哈希应该是什么样的？因为总会有一个 params[:action]，在表单的情况下通常是`create`or `update`。

此外，请尝试使用内置的 rails 方法，例如：

```
# should be a POST method (am I right?)
# why do you call it viewTask?

def viewTask
  @task = Task.find(params[:id])
  # you'd better avoid extra DB-calls
  # @status = @task.status
  # @activities = @task.actions

  # you can load this with the @task-query by including or joining them
  # if you need the @status and @activities models you could do 
  # @task = Task.find(params[:id], :include => [:task, :activities]) 

  # if you only need the joined objects you should use
  @task = Task.find(params[:id], :joins => [:task, :activities]) 

  @activity = Activity.new

  if params[:activity]
    @activity = @task.activities.build(params[:activity])
    @activity.save
  end
end 
```

在代码中，我假设您的任务模型如下所示：

```
class Task < ActiveRecord::Base
  has_many     :activities
  belongs_to   :status        # so it has a field called :status_id
  .....
end 
```

# android - 添加库时导出android项目时出错

> ID：11298709
> 
> 赞同：3
> 
> 时间：2012-07-02T17:55:47.280
> 
> 标签：android, eclipse, andengine

从几个月前开始，我一直在使用 Eclipse 和 AndEngine 开发 Android。直到几周前，当我尝试导出我的项目时突然出错时，我在导出我的项目时还没有遇到任何问题。只有在项目库中添加了 AndEngine（或其任何扩展）时，才会发生该错误。我现在日夜寻找解决方案，希望有人能帮助我！我不知道它是否只是 AndEngine 或者我不能仅仅因为我在库中添加了一些东西而无法导出。

我已经在两个完全不同的系统中安装了 Eclipse——一个是 Windows，另一个是 Linux Mint——没有一个可以工作！

这就是我的做法：

我创建了一个新的 android 项目，包括一个活动。我尝试导出它 - 它有效。之后，我通过属性>Android>库添加AndEngine。我尝试导出 - 我收到一个错误 - Windows 7 和 Linux Eclipse 崩溃中的“转换为 Dalvik 格式失败并出现错误 1”。

在 Linux Eclipse 中创建一个日志文件，但我不够熟练，无法自己解释它...... :-/

也许它与 Android sdk 的最新更新或类似的东西有关……我不知道。奇怪的是，我似乎是唯一一个得到这个错误的人——在两个不同的系统上！我做错了什么还是这是什么？！

如果有人愿意帮助我会很高兴我不知道该怎么办！约翰

这是我得到的错误日志：

```
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  SIGBUS (0x7) at pc=0x00007f7ab35c053e, pid=2405, tid=140164621686528
#
# JRE version: 6.0_24-b24
# Java VM: OpenJDK 64-Bit Server VM (20.0-b12 mixed mode linux-amd64 compressed oops)
# Derivative: IcedTea6 1.11.1
# Distribution: Ubuntu 12.04 LTS, package 6b24-1.11.1-4ubuntu3
# Problematic frame:
# C  [libzip.so+0x453e]  Java_java_util_zip_ZipEntry_initFields+0xc3e
#
# If you would like to submit a bug report, please include
# instructions how to reproduce the bug and visit:
#   https://bugs.launchpad.net/ubuntu/+source/openjdk-6/
# The crash happened outside the Java Virtual Machine in native code.
# See problematic frame for where to report the bug.
#

---------------  T H R E A D  ---------------

Current thread (0x00007f7ab4a2b800):  JavaThread "ModalContext" [_thread_in_native, id=2683, stack(0x00007f7a9e6c5000,0x00007f7a9e7c6000)]

siginfo:si_signo=SIGBUS: si_errno=0, si_code=2 (BUS_ADRERR), si_addr=0x00007f7a9ddb4124

Registers:
RAX=0x00007f7a34000fa0, RBX=0x00007f7a9ddb4107, RCX=0x00007f7a34000040, RDX=0x00007f7a34000020
RSP=0x00007f7a9e7c3310, RBP=0x00007f7a9e7c3350, RSI=0x00007f7a34000038, RDI=0x0000000000000003
R8 =0x00007f7a34048100, R9 =0x0000000000000000, R10=0x00007f7ab06f9d78, R11=0x00007f7ab9ef44d0
R12=0x00007f7a34000fa0, R13=0x00007f7a9e7c33c0, R14=0x00007f7a34007e50, R15=0x00007f7a340087f8
RIP=0x00007f7ab35c053e, EFLAGS=0x0000000000010202, CSGSFS=0x0000000000000033, ERR=0x0000000000000004
  TRAPNO=0x000000000000000e

Top of Stack: (sp=0x00007f7a9e7c3310)
0x00007f7a9e7c3310:   00007f7a9e7c3330 00007f7ab95b7b71
0x00007f7a9e7c3320:   00007f7a34007e50 00007f7a34007e50
0x00007f7a9e7c3330:   000000008433e918 00007f7a9e7c33c0
0x00007f7a9e7c3340:   0000000000000000 00007f7a340087f8
0x00007f7a9e7c3350:   00007f7a9e7c33a0 00007f7ab35c0dea
0x00007f7a9e7c3360:   00007f7ab4a2b800 00007f7a34004cc0
0x00007f7a9e7c3370:   00007f7ab4a2b800 00007f7ab4a2b9d0
0x00007f7a9e7c3380:   00007f7a9e7c33c0 0000000000000029
0x00007f7a9e7c3390:   00007f7a9e7c3818 00007f7a9e7c33c0
0x00007f7a9e7c33a0:   00007f7a9e7c3800 00007f7ab35bf4a9
0x00007f7a9e7c33b0:   0000002900000000 00007f7a34007e50
0x00007f7a9e7c33c0:   65646e612f67726f 75612f656e69676e
0x00007f7a9e7c33d0:   657361422f6f6964 746e456f69647541
0x00007f7a9e7c33e0:   73616c632e797469 0000000000000073
0x00007f7a9e7c33f0:   00000000f9b29a28 00007f7a9e7c33f8
0x00007f7a9e7c3400:   00000000dc3bf5b2 00007f7a9e7c3450
0x00007f7a9e7c3410:   00000000dc3bfeb8 0000000000000000
0x00007f7a9e7c3420:   00000000dc3bf5d8 0000000000000000
0x00007f7a9e7c3430:   00007f7a9e7c3498 00007f7ab05c1a82
0x00007f7a9e7c3440:   00007f7ab05c1a82 00000000dbd92860
0x00007f7a9e7c3450:   0000000000000002 00007f7a9e7c3458
0x00007f7a9e7c3460:   00000000dc3bf7d3 00007f7a9e7c34c8
0x00007f7a9e7c3470:   00000000dc3bfeb8 0000000000000000
0x00007f7a9e7c3480:   00000000dc3bf830 0000000000000000
0x00007f7a9e7c3490:   00007f7a9e7c34c0 00007f7a9e7c3510
0x00007f7a9e7c34a0:   00007f7ab05c1e8d 00000000f9b29f90
0x00007f7a9e7c34b0:   0000000000000002 0000000000000002
0x00007f7a9e7c34c0:   00007f7a9e7c3530 00007f7ab05c196e
0x00007f7a9e7c34d0:   00007f7a9e7c34d0 00007f7ab05c196e
0x00007f7a9e7c34e0:   00000000f9a860c8 00000000f9ac9b70
0x00007f7a9e7c34f0:   00007f7a9e7c34f0 00000000dc3b1448
0x00007f7a9e7c3500:   00007f7a9e7c3568 00007f7ab05c196e 

Instructions: (pc=0x00007f7ab35c053e)
0x00007f7ab35c051e:   c7 00 00 00 00 00 48 c7 40 30 00 00 00 00 48 c7
0x00007f7ab35c052e:   40 28 00 00 00 00 8b 1b 49 2b 5e 28 49 03 5e 18
0x00007f7ab35c053e:   44 0f b6 7b 1d 0f b6 43 1c 0f b6 53 0c 0f b6 4b
0x00007f7ab35c054e:   0e 44 0f b6 6b 1f 41 c1 e7 08 41 09 c7 0f b6 43 

Register to memory mapping:

RAX=0x00007f7a34000fa0 is an unknown value
RBX=0x00007f7a9ddb4107 is an unknown value
RCX=0x00007f7a34000040 is an unknown value
RDX=0x00007f7a34000020 is an unknown value
RSP=0x00007f7a9e7c3310 is pointing into the stack for thread: 0x00007f7ab4a2b800
RBP=0x00007f7a9e7c3350 is pointing into the stack for thread: 0x00007f7ab4a2b800
RSI=0x00007f7a34000038 is an unknown value
RDI=0x0000000000000003 is an unknown value
R8 =0x00007f7a34048100 is an unknown value
R9 =0x0000000000000000 is an unknown value
R10=0x00007f7ab06f9b90 [CodeBlob (0x00007f7ab06f9b90)]
Framesize: 10
R11=0x00007f7ab9ef44d0: <offset 0x1814d0> in /lib/x86_64-linux-gnu/libc.so.6 at 0x00007f7ab9d73000
R12=0x00007f7a34000fa0 is an unknown value
R13=0x00007f7a9e7c33c0 is pointing into the stack for thread: 0x00007f7ab4a2b800
R14=0x00007f7a34007e50 is an unknown value
R15=0x00007f7a340087f8 is an unknown value

Stack: [0x00007f7a9e6c5000,0x00007f7a9e7c6000],  sp=0x00007f7a9e7c3310,  free space=1016k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
C  [libzip.so+0x453e]  Java_java_util_zip_ZipEntry_initFields+0xc3e
C  [libzip.so+0x4dea]  ZIP_GetEntry+0xba
C  [libzip.so+0x34a9]  Java_java_util_zip_ZipFile_getEntry+0x119
J  java.util.zip.ZipFile.getEntry(JLjava/lang/String;Z)J
j  java.util.zip.ZipFile.getInputStream(Ljava/lang/String;)Ljava/io/InputStream;+34
j  java.util.zip.ZipFile.getInputStream(Ljava/util/zip/ZipEntry;)Ljava/io/InputStream;+5
j  com.android.dx.cf.direct.ClassPathOpener.processArchive(Ljava/io/File;)Z+118
j  com.android.dx.cf.direct.ClassPathOpener.processOne(Ljava/io/File;Z)Z+48
j  com.android.dx.cf.direct.ClassPathOpener.process()Z+15
j  com.android.dx.command.dexer.Main.processOne(Ljava/lang/String;)Z+18
j  com.android.dx.command.dexer.Main.processAllFiles()Z+100
j  com.android.dx.command.dexer.Main.run(Lcom/android/dx/command/dexer/Main$Arguments;)I+76
v  ~StubRoutines::call_stub
V  [libjvm.so+0x4afabf]  JavaCalls::call_helper(JavaValue*, methodHandle*, JavaCallArguments*, Thread*)+0x29f
V  [libjvm.so+0x4aeef5]  JavaCalls::call(JavaValue*, methodHandle, JavaCallArguments*, Thread*)+0x25
V  [libjvm.so+0x6a8cc7]  Reflection::invoke(instanceKlassHandle, methodHandle, Handle, bool, objArrayHandle, BasicType, objArrayHandle, bool, Thread*)+0x667
V  [libjvm.so+0x6ab12b]  Reflection::invoke_method(oopDesc*, Handle, objArrayHandle, Thread*)+0x16b
V  [libjvm.so+0x4f4b08]  JVM_InvokeMethod+0x148
j  sun.reflect.NativeMethodAccessorImpl.invoke0(Ljava/lang/reflect/Method;Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;+0
j  sun.reflect.NativeMethodAccessorImpl.invoke(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;+87
j  sun.reflect.DelegatingMethodAccessorImpl.invoke(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;+6
j  java.lang.reflect.Method.invoke(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;+161
j  com.android.ide.eclipse.adt.internal.build.DexWrapper.run(Ljava/lang/String;Ljava/util/Collection;ZLjava/io/PrintStream;Ljava/io/PrintStream;)I+309
j  com.android.ide.eclipse.adt.internal.build.BuildHelper.executeDx(Lorg/eclipse/jdt/core/IJavaProject;Ljava/util/Collection;Ljava/lang/String;)V+138
j  com.android.ide.eclipse.adt.internal.project.ExportHelper.exportReleaseApk(Lorg/eclipse/core/resources/IProject;Ljava/io/File;Ljava/security/PrivateKey;Ljava/security/cert/X509Certificate;Lorg/eclipse/core/runtime/IProgressMonitor;)V+780
j  com.android.ide.eclipse.adt.internal.wizards.export.ExportWizard.doExport(Lorg/eclipse/core/runtime/IProgressMonitor;)Z+269
j  com.android.ide.eclipse.adt.internal.wizards.export.ExportWizard.access$0(Lcom/android/ide/eclipse/adt/internal/wizards/export/ExportWizard;Lorg/eclipse/core/runtime/IProgressMonitor;)Z+2
j  com.android.ide.eclipse.adt.internal.wizards.export.ExportWizard$1.run(Lorg/eclipse/core/runtime/IProgressMonitor;)V+10
j  org.eclipse.jface.operation.ModalContext$ModalContextThread.run()V+15
v  ~StubRoutines::call_stub
V  [libjvm.so+0x4afabf]  JavaCalls::call_helper(JavaValue*, methodHandle*, JavaCallArguments*, Thread*)+0x29f
V  [libjvm.so+0x4aeef5]  JavaCalls::call(JavaValue*, methodHandle, JavaCallArguments*, Thread*)+0x25
V  [libjvm.so+0x4af3f3]  JavaCalls::call_virtual(JavaValue*, KlassHandle, symbolHandle, symbolHandle, JavaCallArguments*, Thread*)+0x1a3
V  [libjvm.so+0x4af51f]  JavaCalls::call_virtual(JavaValue*, Handle, KlassHandle, symbolHandle, symbolHandle, Thread*)+0x4f
V  [libjvm.so+0x4e4fd6]  thread_entry(JavaThread*, Thread*)+0x86
V  [libjvm.so+0x74c098]  JavaThread::thread_main_inner()+0x58
V  [libjvm.so+0x64bbb2]  java_start(Thread*)+0x112

Java frames: (J=compiled Java code, j=interpreted, Vv=VM code)
J  java.util.zip.ZipFile.getEntry(JLjava/lang/String;Z)J
j  java.util.zip.ZipFile.getInputStream(Ljava/lang/String;)Ljava/io/InputStream;+34
j  java.util.zip.ZipFile.getInputStream(Ljava/util/zip/ZipEntry;)Ljava/io/InputStream;+5
j  com.android.dx.cf.direct.ClassPathOpener.processArchive(Ljava/io/File;)Z+118
j  com.android.dx.cf.direct.ClassPathOpener.processOne(Ljava/io/File;Z)Z+48
j  com.android.dx.cf.direct.ClassPathOpener.process()Z+15
j  com.android.dx.command.dexer.Main.processOne(Ljava/lang/String;)Z+18
j  com.android.dx.command.dexer.Main.processAllFiles()Z+100
j  com.android.dx.command.dexer.Main.run(Lcom/android/dx/command/dexer/Main$Arguments;)I+76
v  ~StubRoutines::call_stub
j  sun.reflect.NativeMethodAccessorImpl.invoke0(Ljava/lang/reflect/Method;Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;+0
j  sun.reflect.NativeMethodAccessorImpl.invoke(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;+87
j  sun.reflect.DelegatingMethodAccessorImpl.invoke(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;+6
j  java.lang.reflect.Method.invoke(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;+161
j  com.android.ide.eclipse.adt.internal.build.DexWrapper.run(Ljava/lang/String;Ljava/util/Collection;ZLjava/io/PrintStream;Ljava/io/PrintStream;)I+309
j  com.android.ide.eclipse.adt.internal.build.BuildHelper.executeDx(Lorg/eclipse/jdt/core/IJavaProject;Ljava/util/Collection;Ljava/lang/String;)V+138
j  com.android.ide.eclipse.adt.internal.project.ExportHelper.exportReleaseApk(Lorg/eclipse/core/resources/IProject;Ljava/io/File;Ljava/security/PrivateKey;Ljava/security/cert/X509Certificate;Lorg/eclipse/core/runtime/IProgressMonitor;)V+780
j  com.android.ide.eclipse.adt.internal.wizards.export.ExportWizard.doExport(Lorg/eclipse/core/runtime/IProgressMonitor;)Z+269
j  com.android.ide.eclipse.adt.internal.wizards.export.ExportWizard.access$0(Lcom/android/ide/eclipse/adt/internal/wizards/export/ExportWizard;Lorg/eclipse/core/runtime/IProgressMonitor;)Z+2
j  com.android.ide.eclipse.adt.internal.wizards.export.ExportWizard$1.run(Lorg/eclipse/core/runtime/IProgressMonitor;)V+10
j  org.eclipse.jface.operation.ModalContext$ModalContextThread.run()V+15
v  ~StubRoutines::call_stub

---------------  P R O C E S S  ---------------

Java Threads: ( => current thread )
  0x00007f7a200d1800 JavaThread "Worker-12" [_thread_blocked, id=2718, stack(0x00007f7a9e298000,0x00007f7a9e399000)]
=>0x00007f7ab4a2b800 JavaThread "ModalContext" [_thread_in_native, id=2683, stack(0x00007f7a9e6c5000,0x00007f7a9e7c6000)]
  0x00007f7a38001000 JavaThread "[ThreadPool Manager] - Idle Thread" daemon [_thread_blocked, id=2448, stack(0x00007f7a97897000,0x00007f7a97998000)]
  0x00007f7ab4761000 JavaThread "Bundle File Closer" daemon [_thread_blocked, id=2447, stack(0x00007f7a9d17a000,0x00007f7a9d27b000)]
  0x00007f7a20001000 JavaThread "Worker-6" [_thread_blocked, id=2441, stack(0x00007f7a9da2a000,0x00007f7a9db2b000)]
  0x00007f7a3008f800 JavaThread "Worker-5" [_thread_blocked, id=2440, stack(0x00007f7a9db2b000,0x00007f7a9dc2c000)]
  0x00007f7a30081800 JavaThread "Worker-4" [_thread_blocked, id=2439, stack(0x00007f7a9dc2c000,0x00007f7a9dd2d000)]
  0x00007f7a44019800 JavaThread "Worker-2" [_thread_in_native, id=2437, stack(0x00007f7a9e399000,0x00007f7a9e49a000)]
  0x00007f7ab443f000 JavaThread "Java indexing" daemon [_thread_blocked, id=2436, stack(0x00007f7a9de20000,0x00007f7a9df21000)]
  0x00007f7a4c040000 JavaThread "Worker-JM" [_thread_blocked, id=2431, stack(0x00007f7a9fafb000,0x00007f7a9fbfc000)]
  0x00007f7a4c03b800 JavaThread "[Timer] - Main Queue Handler" daemon [_thread_blocked, id=2430, stack(0x00007f7a9fbfc000,0x00007f7a9fcfd000)]
  0x00007f7a4c015800 JavaThread "Framework Event Dispatcher" daemon [_thread_blocked, id=2428, stack(0x00007f7a9fdfe000,0x00007f7a9feff000)]
  0x00007f7ab41e4000 JavaThread "Start Level Event Dispatcher" daemon [_thread_blocked, id=2427, stack(0x00007f7a9feff000,0x00007f7aa0000000)]
  0x00007f7ab41fd800 JavaThread "State Data Manager" daemon [_thread_blocked, id=2426, stack(0x00007f7aa4021000,0x00007f7aa4122000)]
  0x00007f7ab41c2800 JavaThread "Framework Active Thread" [_thread_blocked, id=2425, stack(0x00007f7aa4122000,0x00007f7aa4223000)]
  0x00007f7ab40a5800 JavaThread "Low Memory Detector" daemon [_thread_blocked, id=2421, stack(0x00007f7aae3bd000,0x00007f7aae4be000)]
  0x00007f7ab40a3800 JavaThread "C2 CompilerThread1" daemon [_thread_in_native, id=2420, stack(0x00007f7aae4be000,0x00007f7aae5bf000)]
  0x00007f7ab40a0800 JavaThread "C2 CompilerThread0" daemon [_thread_in_native, id=2419, stack(0x00007f7aae5bf000,0x00007f7aae6c0000)]
  0x00007f7ab4092800 JavaThread "Signal Dispatcher" daemon [_thread_blocked, id=2418, stack(0x00007f7aae6c0000,0x00007f7aae7c1000)]
  0x00007f7ab4080000 JavaThread "Finalizer" daemon [_thread_blocked, id=2417, stack(0x00007f7aaeea4000,0x00007f7aaefa5000)]
  0x00007f7ab407e000 JavaThread "Reference Handler" daemon [_thread_blocked, id=2416, stack(0x00007f7aaefa5000,0x00007f7aaf0a6000)]
  0x00007f7ab4008000 JavaThread "main" [_thread_in_native, id=2406, stack(0x00007f7aba858000,0x00007f7aba959000)]

Other Threads:
  0x00007f7ab4077800 VMThread [stack: 0x00007f7aaf0a6000,0x00007f7aaf1a7000] [id=2415]
  0x00007f7ab40a8000 WatcherThread [stack: 0x00007f7aae2bc000,0x00007f7aae3bd000] [id=2422]

VM state:not at safepoint (normal execution)

VM Mutex/Monitor currently owned by a thread: None

Heap
 PSYoungGen      total 54656K, used 5004K [0x00000000f8000000, 0x00000000fc550000, 0x0000000100000000)
  eden space 38720K, 7% used [0x00000000f8000000,0x00000000f82a96f8,0x00000000fa5d0000)
  from space 15936K, 14% used [0x00000000fb5c0000,0x00000000fb7f9c88,0x00000000fc550000)
  to   space 16128K, 0% used [0x00000000fa5d0000,0x00000000fa5d0000,0x00000000fb590000)
 PSOldGen        total 79168K, used 52829K [0x00000000e8000000, 0x00000000ecd50000, 0x00000000f8000000)
  object space 79168K, 66% used [0x00000000e8000000,0x00000000eb3974d0,0x00000000ecd50000)
 PSPermGen       total 130432K, used 71024K [0x00000000d8000000, 0x00000000dff60000, 0x00000000e8000000)
  object space 130432K, 54% used [0x00000000d8000000,0x00000000dc55c010,0x00000000dff60000)

Code Cache  [0x00007f7ab05bc000, 0x00007f7ab0e8c000, 0x00007f7ab35bc000)
 total_blobs=2339 nmethods=1742 adapters=550 free_code_cache=41736384 largest_free_block=59712

Dynamic libraries:
I had to remove this part ... only 30 000 characters allowed

VM Arguments:
jvm_args: -Xms40m -Xmx384m -Dorg.eclipse.equinox.p2.reconciler.dropins.directory=/usr/share/eclipse/dropins -XX:MaxPermSize=256m 
java_command: /usr/lib/eclipse//plugins/org.eclipse.equinox.launcher_1.2.0.dist.jar -os linux -ws gtk -arch x86_64 -showsplash -launcher /usr/lib/eclipse/eclipse -name Eclipse --launcher.library /usr/lib/eclipse//plugins/org.eclipse.equinox.launcher.gtk.linux.x86_64_1.1.100.dist/eclipse_1408.so -startup /usr/lib/eclipse//plugins/org.eclipse.equinox.launcher_1.2.0.dist.jar --launcher.overrideVmargs -exitdata f8005 -vm /usr/bin/java -vmargs -Xms40m -Xmx384m -Dorg.eclipse.equinox.p2.reconciler.dropins.directory=/usr/share/eclipse/dropins -XX:MaxPermSize=256m -jar /usr/lib/eclipse//plugins/org.eclipse.equinox.launcher_1.2.0.dist.jar
Launcher Type: SUN_STANDARD

Environment Variables:
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games
USERNAME=johan
LD_LIBRARY_PATH=/usr/lib/jvm/java-6-openjdk-amd64/jre/lib/amd64/server:/usr/lib/jvm/java-6-openjdk-amd64/jre/lib/amd64:/usr/lib/jvm/java-6-openjdk-amd64/jre/../lib/amd64
SHELL=/bin/bash
DISPLAY=:0.0

Signal Handlers:
SIGSEGV: [libjvm.so+0x7842c0], sa_mask[0]=0x7ffbfeff, sa_flags=0x10000004
SIGBUS: [libjvm.so+0x7842c0], sa_mask[0]=0x7ffbfeff, sa_flags=0x10000004
SIGFPE: [libjvm.so+0x648540], sa_mask[0]=0x7ffbfeff, sa_flags=0x10000004
SIGPIPE: SIG_IGN, sa_mask[0]=0x00001000, sa_flags=0x10000000
SIGXFSZ: [libjvm.so+0x648540], sa_mask[0]=0x7ffbfeff, sa_flags=0x10000004
SIGILL: [libjvm.so+0x648540], sa_mask[0]=0x7ffbfeff, sa_flags=0x10000004
SIGUSR1: SIG_DFL, sa_mask[0]=0x00000000, sa_flags=0x00000000
SIGUSR2: [libjvm.so+0x6486f0], sa_mask[0]=0x00000000, sa_flags=0x10000004
SIGHUP: [libjvm.so+0x64b210], sa_mask[0]=0x7ffbfeff, sa_flags=0x10000004
SIGINT: [libjvm.so+0x64b210], sa_mask[0]=0x7ffbfeff, sa_flags=0x10000004
SIGTERM: [libjvm.so+0x64b210], sa_mask[0]=0x7ffbfeff, sa_flags=0x10000004
SIGQUIT: [libjvm.so+0x64b210], sa_mask[0]=0x7ffbfeff, sa_flags=0x10000004

---------------  S Y S T E M  ---------------

OS:LinuxMint 13 (maya)
uname:Linux 3.2.0-24-generic #39-Ubuntu SMP Mon May 21 16:52:17 UTC 2012 x86_64
libc:glibc 2.15 NPTL 2.15 
rlimit: STACK 8192k, CORE 0k, NPROC 127501, NOFILE 4096, AS infinity
load average:1.69 1.02 0.47

/proc/meminfo:
MemTotal:       16337780 kB
MemFree:        14311524 kB
Buffers:           75920 kB
Cached:           693268 kB
SwapCached:            0 kB
Active:          1111276 kB
Inactive:         608384 kB
Active(anon):     960444 kB
Inactive(anon):   183040 kB
Active(file):     150832 kB
Inactive(file):   425344 kB
Unevictable:          96 kB
Mlocked:              96 kB
SwapTotal:      16678908 kB
SwapFree:       16678908 kB
Dirty:              5948 kB
Writeback:             0 kB
AnonPages:        951204 kB
Mapped:           124272 kB
Shmem:            192228 kB
Slab:              74556 kB
SReclaimable:      43580 kB
SUnreclaim:        30976 kB
KernelStack:        3008 kB
PageTables:        20856 kB
NFS_Unstable:          0 kB
Bounce:                0 kB
WritebackTmp:          0 kB
CommitLimit:    24847796 kB
Committed_AS:    2139640 kB
VmallocTotal:   34359738367 kB
VmallocUsed:      389744 kB
VmallocChunk:   34359345424 kB
HardwareCorrupted:     0 kB
AnonHugePages:         0 kB
HugePages_Total:       0
HugePages_Free:        0
HugePages_Rsvd:        0
HugePages_Surp:        0
Hugepagesize:       2048 kB
DirectMap4k:       71668 kB
DirectMap2M:    16615424 kB

CPU:total 8 (4 cores per cpu, 2 threads per core) family 6 model 42 stepping 7, cmov, cx8, fxsr, mmx, sse, sse2, sse3, ssse3, sse4.1, sse4.2, popcnt, ht

Memory: 4k page, physical 16337780k(14311524k free), swap 16678908k(16678908k free)

vm_info: OpenJDK 64-Bit Server VM (20.0-b12) for linux-amd64 JRE (1.6.0_24-b24), built on Apr 21 2012 01:49:27 by "buildd" with gcc 4.6.3

time: Sun Jun 24 16:12:57 2012
elapsed time: 194 seconds 
```

我只想说清楚一点：

例如，我可以通过 Eclipse 在我的手机上运行该应用程序 - 它是使用密钥库导出的，但它不起作用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-12-06T10:23:04.283

我知道这是一个旧线程，但我似乎找到了另一种解决方案。通常，如果我尝试导出依赖于另一个库项目的项目，我发现 Eclipse 要么完全崩溃，要么只是冻结/挂起。我在我自己的图书馆项目和第 3 方项目中都见过这种情况好几次了。

我找到的简单解决方案是关闭自动构建。也就是说，竞争所有内容，然后在“导出”之前，取消选中“项目”菜单下的“自动构建” - 并照常导出。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-08T15:33:07.970

今天我偶然发现了完全相同的问题，我也无法在任何地方找到解决方案。这很奇怪，因为我以前从未遇到过这个问题，而且我已经与 AndEngine 合作过很多次。我尝试了几种不同的方法，其中一种完全解决了问题，尽管我不知道为什么。

解决方案：

1.  不要将 AndEngine 添加到库列表中（通过属性 -> Android -> 库）
2.  将“libs”目录从 AndEngine 复制到您的应用程序。
3.  将 Andengine.jar 从 AndEngine 的“bin”目录复制到应用程序中的某个目录。
4.  关闭 AndEngine 项目。您不再需要它来进行导出。
5.  右键单击您的项目。转到：“属性 -> 库 -> 添加 JAR”并添加您刚刚复制的 JAR。
6.  转到 Properties -> "Libraries -> Order and Export" 并确保您刚刚添加的 JAR 文件被选中。

如果有人能告诉我们为什么这可以解决问题以及是否有更好的解决方案，那就太好了。

# android - 使用 requestLocationUpdates() 但没有获得一致的更新

> ID：11298710
> 
> 赞同：1
> 
> 时间：2012-07-02T17:55:50.170
> 
> 标签：android, localization, location

我正在尝试以固定的时间间隔定期更新位置。现在，我正在以 2 分钟的间隔进行测试，以确保一切正常。然后我会把它推到更长的时间间隔。

以下是相关代码：

```
 public final int LOCATION_TIMER_RATE=120000;

    locationManager = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);

    locationListener = new LocationListener() {
        public void onLocationChanged(Location location) {
            Log.d("BLAH", "Recorded home location as: (" + location.getLatitude() + "," + location.getLongitude() + ")");
        }
        public void onStatusChanged(String provider, int status, Bundle extras) {}
        public void onProviderEnabled(String provider) {}
        public void onProviderDisabled(String provider) {}
    };

    locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, LOCATION_TIMER_RATE, 0, locationListener); 
```

如果我请求单个更新，如下所示，我*总是*会在 20 秒左右得到回复。但是，在那之后，我仍然没有得到我的定期更新：

```
locationManager.requestSingleUpdate(LocationManager.NETWORK_PROVIDER, locationListener, null); 
```

如果您请求单次更新，是否需要重新安排定期更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T21:18:11.483

如果您请求单个更新，那么是的，您必须重新安排它以进行将来的更新。至于请求期间更新不一致，它在文档中是这样说的。更新可能需要比您选择的时间段更长（甚至可能更短）的时间。

# css - CSS3 获得最后一个 从嵌套的顶级列表中

> ID：11298713
> 
> 赞同：3
> 
> 时间：2012-07-02T17:55:53.873
> 
> 标签：css, css-selectors

我有一个嵌套列表：

```
<ul>
  <li>Item</li>
  <li>Item</li>
  <li>Item</li>
  <li>
     <ul>
       <li>Nested Item</li>
       <li>Nested Item</li>
       <li>Last Nested Item</li>
     </ul>
  </li>
  <li>Item</li>
  <li>Item</li>
  <li>Last Item</li>
</ul> 
```

我只是想使用 CSS3 选择器获得最后一个 LI 'last item'，这没什么大不了的，只是为了在悬停上放置一些圆形边框以防止它溢出容器，因此不需要向后兼容（因为无论如何，容器上的边框在非 CSS3 浏览器上都不会四舍五入）。

`<li>`如果不选择嵌套列表中的最后一个，我似乎无法理解。我正在尝试（除其他外）

```
.container ul:first-of-type li:last-child a 
```

对我来说，上面肯定是说“在第一个 UL 中获取最后一个 LI 中的链接”，但显然，Firefox 的想法不同......（IE 和 Chrome 也是如此，所以一定是我......）

谁能看到我哪里出错了？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-02T17:58:27.080

它说要*在任何嵌套级别*`li`的第一个中获取最后一个链接，这就是为什么您也在嵌套列表中获取该项目。`ul`

 *为防止这种情况，请使用子选择器仅限制立即嵌套的列表项，而不是忽略嵌套级别的后代选择器：

```
.container > ul:first-of-type > li:last-child > a 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T18:04:28.317

```
.container > ul:first-of-type > li:last-child a 
```

这意味着选择 li 的第一级并在最后一个 li 元素中获取第一级链接。除非您也有嵌套链接，否则您不需要最后一个 > a 。

这对我有用：

```
<style>
    .container > ul:first-of-type > li:last-child a {
        background:red;
    }
</style>
<div class="container">
<ul>
  <li>Item</li>
  <li>Item</li>
  <li>Item</li>
  <li>
     <ul>
       <li>Nested Item</li>
       <li>Nested Item</li>
      <li><a href="">Last Nested Item</a></li>
     </ul>
  </li>
  <li>Item</li>
  <li>Item</li>
  <li><a href="blah">Last Item</a></li>
</ul>
<ul>
  <li>Item</li>
  <li>Item</li>
  <li>Item</li>
  <li>
     <ul>
       <li>Nested Item</li>
       <li>Nested Item</li>
       <li>Last Nested Item</li>
     </ul>
  </li>
  <li>Item</li>
  <li>Item</li>
  <li><a href="blah">Last Item</a></li>
</ul>
</div> 
```*

# windows - 有没有办法在浏览器之外实现 OpenAuth 而无需求助于黑客？

> ID：11298724
> 
> 赞同：3
> 
> 时间：2012-07-02T17:56:41.293
> 
> 标签：windows, oauth

我想在 Windows 应用程序中实现 OpenAuth。我目前正在应用程序中嵌入一个浏览器，但这个解决方案很糟糕。

有没有办法使用原始 API 来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-12T16:50:16.670

由于您提到了浏览器，我假设您对实现 OAuth 客户端而不是提供者感兴趣。你可以试试[Scribe 库](https://github.com/fernandezpablo85/scribe-java)。它是用 Java 编写的，具有多个不同提供者的客户端实现，并且很容易为新的提供者扩展。

# excel - 如何对适用条件的过滤行求和？

> ID：11298725
> 
> 赞同：2
> 
> 时间：2012-07-02T17:56:48.360
> 
> 标签：excel, excel-formula

我正在寻找一个 Excel 公式，它会产生一个范围内所有行的总和，其中满足某个条件并且行没有被过滤。

我知道如何单独做每一个：

*   条件适用的总和：`=SUMIF(A1:A10,">=0")`例如，对于所有正数
*   未过滤/可见的所有行的总和：`=SUBTOTAL(9,A1:A10)`

但是，我很难同时做这两件事。有没有办法在一个公式中实现这一点而无需创建额外的列（无 VBA）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T18:03:27.180

试试这个公式

`=SUMPRODUCT(SUBTOTAL(9,OFFSET(A1,ROW(A1:A10)-ROW(A1),0)),(A1:A10>0)+0)`

根据需要更改最后的条件

# c# - c# Gridview - 从 datareader 绑定选定的列

> ID：11298726
> 
> 赞同：0
> 
> 时间：2012-07-02T17:56:49.910
> 
> 标签：c#, gridview, bind

我有一个 sql statemente，但我不想在 gridview (c# webforms) 中显示所有信息。如何在运行时在gridview上绑定特定列？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T18:07:16.490

首先，我会在 Visual Studio Designer 中编辑列，以便获得我想要的确切列。

这取决于您如何将数据提取到 DataGrid 中。如果您使用 SqlDataSource，我建议您关闭`Selecting`事件。在其他情况下（SqlDataReader）我会在阅读时进行绑定。或者你也可以使用 Linq to Entity 来获取你想要的值，就像这样：

```
var name = from names in context.data_table
           select names;
gridview.datasource = name; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T18:10:37.020

您可以自己为 DataGridView 创建列。例子：

```
DataGridView dataGridView1 = new DataGridView();
BindingSource bindingSource1 = new BindingSource();

dataGridView1.ColumnCount = 2;

dataGridView1.Columns[0].Name = "FieldA";
dataGridView1.Columns[0].DataPropertyName = "FieldA";
dataGridView1.Columns[1].Name = "FieldB";
dataGridView1.Columns[1].DataPropertyName = "FieldB";

bindingSource1.DataSource = GetDataTable();
dataGridView1.DataSource = bindingSource1; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-02T20:44:48.137

Be sure to **Data Bind** your grid after you set a Data Source like shown above. Best of luck!

```
Entities entities = ObjectContextManager.GetCurrentContext<AdHocReportingEntities>();
var users = from e in entities.Users  
    where e.State == userState'
    orderby e.Name   
    select new { e.Name, e.State};  
Grid.DataSource = users; 
Grid.DataBind();` 
```

# ios - IOS Facebook apprequests，不使用 Facebook 对话框

> ID：11298731
> 
> 赞同：0
> 
> 时间：2012-07-02T17:57:21.953
> 
> 标签：ios, facebook, dialog, apprequests

我是用户对用户的请求，使用：

```
[facebook dialog:@"apprequests" andParams:params andDelegate:self]; 
```

这是可行的，但是我想解决 Facebook 对话框以显示自定义视图，并发送一个 NSURLRequest，其中包含嵌入在请求中的访问令牌、uid 和其他参数。

我一直在尝试将 sdk 调试为随请求发送的内容，但由于它是通过 UIWebView 发送的，因此我无法调试它。

我还尝试使用网络代理调试器“Charles”来查看 http 调用请求，但它是加密的，如果我通过从 @"http://m.facebook.com/dialog/" 请求而不是https，我得到以下 JSON 响应。

> {"error":{"message":"传递访问令牌时必须使用 https://","type":"OAuthException","code":1}}

有没有办法在不使用对话框的情况下直接发送应用程序请求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T18:39:15.580

> 有没有办法在不使用对话框的情况下直接发送应用程序请求？

只有应用到用户的请求，并且这些请求仅在目标用户已经连接到您的应用时才有效。

# reporting-services - 在 SSRS 中，是否可以将 AutoRefresh 值设置为表达式？

> ID：11298733
> 
> 赞同：0
> 
> 时间：2012-07-02T17:57:26.743
> 
> 标签：reporting-services

我已经使用 SSRS 设置了一个报告，并希望它不断自动刷新，因为数据将不断添加。简单的解决方案是将值设置为一个常数，这很容易。但是，该报告是一个错误日志，因此我希望用户能够在阅读消息时将其关闭或延迟刷新。我尝试将参数 Refresh 添加为 Integer 但我无法将 AutoRefresh 值设置为表达式

```
=Parameters!Refresh.Value 
```

和

```
=[@Refresh] 
```

SSRS 对我大喊“属性值无效。PARAM 不是 Int32 的有效值。”

我很感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T17:12:41.507

是的，AutoRefresh 可以使用 SSRS 2012 中的表达式。

我能够在 SSRS 2012 上正确设置并使其正常工作。参数的数据类型必须是整数。您使用的是什么数据类型？您使用的是什么版本的 SSRS？

编辑：我已经确认它在 SSRS 2008 中不起作用。但是，如果您使用的是 SSRS 2008 R2，请将项目属性 TargetServerVersion 更改为 SQL Server 2008 R2，它将起作用。我让它在测试环境中工作。

# objective-c - Xcode 中的这些编译错误是什么意思？

> ID：11298734
> 
> 赞同：0
> 
> 时间：2012-07-02T17:57:30.747
> 
> 标签：objective-c, ios, xcode

抱歉，我不能更详细地描述，基本上发生的事情是我今天去打开 Xcode（我是一个相当新的用户）并且无法测试我的构建，因为我有这些我不明白的错误。我不明白为什么我会突然得到这些。如果这可以帮助任何人调试它，我可以发布完整的源代码。

![在此处输入图像描述](../Images/3d750b98c299991104aa6fea25c99596.png)

我的 ViewController.h

```
#import <UIKit/UIKit.h>
@interface local405ViewController : UIViewController {
    NSTime *timer;
}

@property (weak,nonatomic) IBOutlet UIWebView *webView;
@property (weak,nonatomic) IBOutlet UIActivityIndicatorView *activityIndicator;
- (IBAction)homeButton:(id)sender;
- (IBAction)payDuesButton:(id)sender; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T18:09:40.157

如果这是您的整个 ViewController.h 文件，那么您似乎缺少一个`@end`指示`@interface`块结束的指令。（其实我希望真正的文件是“local405ViewController.h”。）

# visual-studio-2010 - Visual Studio 2010 - 调试 DLL - 使用 rundll32 的调试命令不起作用

> ID：11298741
> 
> 赞同：3
> 
> 时间：2012-07-02T17:57:54.587
> 
> 标签：visual-studio-2010, debugging, dll, rundll32

我在 Visual Studio 2010 中调试 C++ DLL 项目时遇到问题。在调试时，我希望 DLL 由 rundll32.exe 自动加载。为此，我按照以下步骤操作（如此处[http://msdn.microsoft.com/en-us/library/c91k1xcf.aspx](http://msdn.microsoft.com/en-us/library/c91k1xcf.aspx)）：

1.  在解决方案资源管理器中，我选择创建 DLL 的项目。

2.  从视图菜单中，我选择属性页。

3.  在 Property Pages 对话框中，我打开 Configuration Properties 文件夹并选择 Debugging 类别。

4.  在命令框中，我键入：“C:\Windows\System32\rundll32.exe”

5.  在命令参数框中我输入（main 是要执行的函数）： output.dll, main

6.  在工作目录中，我输入：$(SolutionDir)$(Configuration)

7.  附加 -> 是

执行这些步骤后，我尝试调试 DLL，但出现此错误：

*“无法附加。进程“C:/Windows/System32\rundll32.exe”未在“MY-PC”上运行，请在尝试再次附加之前刷新进程列表。”*

任何人都知道如何调试 DLL，而无需从命令提示符手动启动 rundll32.exe 并手动附加到此进程？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-27T07:40:37.553

你应该设置：

“附加 -> 否”

否则 VS 不会尝试启动新的 rundll32.exe 进程。设置 Attach -> yes 告诉 VS 附加到现有进程。

# c# - C#中的多线程TCP服务器？

> ID：11298745
> 
> 赞同：-3
> 
> 时间：2012-07-02T17:58:11.497
> 
> 标签：c#, networking, tcp

作为概念证明，我需要使用用 C# 实现的 MT TCP 服务器快速启动并运行。我正在寻找 C# 中这种多线程 TCP 服务器的开源实现。

我遇到了这个[链接](http://www.codeproject.com/Articles/2866/Multi-threaded-NET-TCP-Server-Examples)，但它已经快十年了！我似乎找不到任何更新的东西。有人知道 MT TCP 服务器的最新实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T18:02:43.687

[在http://msdn.microsoft.com/en-us/library/system.net.sockets.socketasynceventargs.aspx](http://msdn.microsoft.com/en-us/library/system.net.sockets.socketasynceventargs.aspx)有一个相对完整的高度可扩展的 TCP 服务器示例。

# php - 如何在 cakePHP 中更有效地重用变量？

> ID：11298749
> 
> 赞同：1
> 
> 时间：2012-07-02T17:58:26.193
> 
> 标签：php, cakephp, cakephp-2.0

我有代码：

```
 $getCookieData = $this->Cookie->read('data');
    $getUser = $this->User->find('first', array('conditions' => array('User.username' => $getCookieData['username']))); 
```

基本上我在很多地方都使用它来获取用户信息并显示它，比较它等等。我只是想知道是否有更有效的方法让我在我的网站周围使用变量，而不是重复自己很多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T18:00:38.360

您可以将其包装在一个函数中：

```
public function getUSer()
{
    $getCookieData = $this->Cookie->read('data');
    $getUser = $this->User->find('first', array('conditions' => array('User.username' => $getCookieData['username']))); 
    return $getUser;
} 
```

并称其为`$this->getUSer()`. 你应该把它放在你当前值的上下文中，`$this`例如在这些函数存在的类中。

您也可以制作它`static`（例如`public static function getUSer(){...}`），在这种情况下，您可以使用`className::getUSer()`语法直接调用它。

# php - PHP 倒计时到期按钮或链接

> ID：11298760
> 
> 赞同：0
> 
> 时间：2012-07-02T17:59:19.047
> 
> 标签：php, time, hyperlink

我正在尝试创建一个将在 1 小时后过期的按钮或链接。

我正在设置访问者使用 cookie 访问页面的时间。

我看到的大多数代码示例只给出了已经过去的时间，而不是剩下的时间。

示例：链接将在 0 小时 30 分 34 秒后过期

这只是一些粗略的代码：

```
//Setting cookie example
setcookie('previous_time', time(), time()+3600*1);

$current_time = time();
$previous_time = $_COOKIE['previous_time'];

$time_diff = $current_time-$previous_time; 
```

这就是我卡住的地方，我不知道如何将`$time_diff`时间戳转换为“在 0 小时、30、分钟和 34 秒后过期”之类的格式

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T18:16:55.120

我同意 nickb 的观点，即基于 cookie 的内容是可篡改的，但如果链接过期，您会提前一个小时将首次访问标记为：

```
// set when we are counting down to
setcookie('expires_at', time()+3600, time()+3600);

// we are counting down not up (for "expires in" not "valid since" logic)
$time_diff = $_COOKIE['expires_at'] - time();

$minutes = floor($time_diff / 60);
$seconds = floor($time_diff % 60);

// zero hours since the link will only be valid for one hour max
echo sprintf('expire in 0 hours, %d mins and %d seconds', $minutes, $seconds); 
```

然后你可以这样做：

```
if($time_diff > 0){
    echo '<a href="...">...</a>';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T18:07:29.797

要格式化您的时差，只需做一些数学运算，因为您`$time_diff`只是两次之间的秒数：

```
$hours    = floor( $time_diff / 3600);
$minutes  = floor( ($time_diff / 60) % 60); 
$seconds  = $time_diff % 60;

echo "$hours hours, $minutes minutes, $seconds seconds\n"; 
```

因此， 的值`20712` [将产生](http://viper-7.com/77Dzxa)：

```
5 hours, 45 minutes, 12 seconds 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T18:10:32.587

使用您的公式比较时间戳，差异以秒为单位。

所以， $time_diff / 60 让你得到分钟；除以 60 得到小时数；等等

# c++ - 使用 boost::thread 的分段错误

> ID：11298762
> 
> 赞同：0
> 
> 时间：2012-07-02T17:59:24.497
> 
> 标签：c++, multithreading, boost, boost-thread

我使用 boost::thread 中的线程编写了一个应用程序。它可以在我的本地机器上编译并正常工作。问题出现在其中一台服务器上。我已经发送了 main.cpp 文件并以与我在本地计算机上相同的方式对其进行了编译：

```
g++ -g main.cpp -o rdzen -lboost_thread
ulimit -c unlimited 
```

我正在执行它：

```
./rdzen input.txt dictionary.txt output.txt 
```

然后我得到：

```
Segmentation fault (core dumped) 
```

我用gdb找出原因：

```
gdb rdzen core 
```

回溯是：

```
#0  0x0804c039 in boost::detail::atomic_exchange_and_add (pw=0x53006d76, dv=-1)
at /usr/local/include/boost/smart_ptr/detail/sp_counted_base_gcc_x86.hpp:50
#1  0x0804c11a in boost::detail::sp_counted_base::release (this=0x53006d72)
at /usr/local/include/boost/smart_ptr/detail/sp_counted_base_gcc_x86.hpp:143
#2  0x0804c17c in ~shared_count (this=0xbd928a8c, __in_chrg=<value optimized out>)
at /usr/local/include/boost/smart_ptr/detail/shared_count.hpp:305
#3  0xb2b388e1 in ~shared_ptr (this=0xbd928b3c) at ./boost/smart_ptr/shared_ptr.hpp:169
#4  boost::shared_ptr<boost::detail::thread_data_base>::operator= (this=0xbd928b3c)
at ./boost/smart_ptr/shared_ptr.hpp:305
#5  boost::thread::start_thread (this=0xbd928b3c) at libs/thread/src/pthread/thread.cpp:184
#6  0x0805022c in thread<boost::_bi::bind_t<void, void (*)(int, char*, char*, char*, int), boost::_bi::list5<boost::_bi::value<int>, boost::_bi::value<char*>, boost::_bi::value<char*>, boost::_bi::value<char*>, boost::_bi::value<int> > > > (this=0xbd928b3c, f=...)
at /usr/local/include/boost/thread/detail/thread.hpp:205
#7  0x0804a88a in main (argc=4, argv=0xbd928cb4) at main.cpp:542 
```

main.cpp:542 是：

```
boost::thread watek1(boost::bind(&watek, 0, argv[1], argv[2], argv[3], 0)); 
```

是什么原因以及为什么相同的代码在我的本地机器上运行而不是在服务器上运行？提前感谢您的帮助。

# token - JavaCC 中的标记：确保符号在一行中是单个的

> ID：11298766
> 
> 赞同：0
> 
> 时间：2012-07-02T17:59:31.487
> 
> 标签：token, javacc

我需要“{”将单行。因此，我必须使用识别它的令牌。这是正确的例子：

```
program
{ 
```

或者

```
program

{ 
```

这是不正确的例子：

```
program { 
```

或者

```
program 
{ sentence; 
```

然后我有一个像这样的令牌：

```
TOKEN: { < openKey: "{" >   {System.out.print(image +"\n");}}
SKIP: { < ( " " | "\r" | "\t" | "\n" )+ > } 
```

但我想不出如何使符号“{”恰好在一个或多个“\n”之间。在认识到它之后，我必须准确地写：

```
program
{ 
```

如果我尝试：

```
TOKEN: { < openKey: ( " " | "\r" | "\t" | "\n" )+ "{" ( " " | "\r" | "\t" | "\n" )+ >   {System.out.print(image +"\n");}} 
```

这会运行，但它会写很多“\n”，就像输入中的一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T09:37:46.783

基本问题是您在没有任何解释的情况下打印输入。换句话说，正如你所发现的，进去的就是出来的。

为了使它更容易阅读——并且为了避免在某些方面通过强制它完成整个任务来滥用词法分析器——我建议将你的打印语句向下移动到解析器中（例如，在 Start( ） 功能）。（实际上，我倾向于将所有输出完全移出解析器，除非我正在做一些我永远不会重用的非常小的事情，但这是另一个问题。）

接下来，为了解决实际问题，您需要做一些解释，从一堆换行符变成一个。最简单的方法是基本的 replaceAll。这是我的 Start() 函数，其中 openKey 的定义与您所做的一样，而 WORD 只是字母的串联。

```
void Start() : 
{
  Token t;
}
{
    ( 
      t = <WORD>
      {System.out.print((t.image).replaceAll("(\n)+","\n"));}
    )*
    (
            t = <openKey>
            {System.out.print((t.image).replaceAll("(\n)+","\n"));}
            ( 
              t = <WORD>
              {System.out.print((t.image).replaceAll("(\n)+","\n"));}
            )*
    )*
    <EOF> 
```

}

所以基本上，这需要零个或多个单词，后跟包含 1 个或多个换行符的单元，后跟左花括号，后跟 1 个或多个换行符，后跟零个或多个单词，并输出单词，大括号，每个 1 个或多个换行符集只有 1 个换行符。

如果您可以使用花括号开始文件，而不需要单词，那么它会输出空行、花括号和换行符。我不知道这是否是你想要的，能够以空行开始输出，所以你需要使用输出代码来获得你想要的确切格式，另外，你可以看到你那里有一些非常好的重复代码，可以提取到一个函数中，所以我把它留给读者练习。

无论如何，这个答案的基本前提是——而且我相信这确实是一个古老的格言，适用于生活的各个领域，而不仅仅是编码——“除非你在输出之前改变你所接受的它，这将是你所接受的！”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T14:19:42.240

我做了不同的事情：

```
TOKEN: { < openKey: "\n" (" " | "\t")* "{" (" " | "\t")* ("\r" | "\n") >{System.out.print("{\r\n");}}   
SKIP: { " " | "\r" | "\t" | "\n" } 
```

回车有一些问题，但这种方式效果很好。

# python - 解码 JSON 以在 Python 中为我提供某个变量？

> ID：11298767
> 
> 赞同：3
> 
> 时间：2012-07-02T17:59:33.367
> 
> 标签：python, json, python-2.7, decode

我正在使用 Python 2.7，而我正在尝试做的是：
我有以下 JSON 字符串。

[http://www.ows.newegg.com/Products.egg/N82E16822148992](http://www.ows.newegg.com/Products.egg/N82E16822148992)

在此字符串中，有多个名为 的值`FinalPrice`。我正在尝试获取相关`MAIN FinalPrice`项目的 （这里的项目是`#N82E16822148992`）。这`main FinalPrice`将是指页面上主要项目的那个。此 JSON 页面的对应页面是`http://www.newegg.com/Product/Product.aspx?Item=N82E16822148992`.

那么，有什么方法可以`FinalPrice`从通常大约 10 个中获取我需要的`FinalPrices`（我说通常是因为我只测试了`FinalPrices`3 个链接的数量并且它们都是 10 个）？我想也许我可以通过使用产品名称找到最终价格的位置，但是**产品**名称和`FinalPrice`.

我能做些什么呢？

PS 这是我尝试过的：
我查看了 Python.org 的 JSON 文档，但它对我找到特定的 FinalPrice 并没有多大帮助（或者我可能只是看错了？）
我试过制作整个 JSON 页面一个字符串，并使用一些字符串操作 (s.find, s[a:b]) 来获得我需要的 FinalPrice，但除了第一个之外我找不到任何方法来获得任何 FinalPrice。
我已经在 Google 和 Stack Overflow 上搜索过这个问题的正确答案。

这就是我到目前为止所做的一切。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T18:17:30.097

您链接的 JSON 数据的主要顶级数据结构只有*一个* `FinalPrice`键，因此获取此信息应该很简单：

```
>>> import urllib2, json
>>> data = json.load(urllib2.urlopen('http://www.ows.newegg.com/Products.egg/N82E16822148992'))
>>> print data[u'FinalPrice']
$79.99 
```

您可以使用该[`pprint.pprint`函数](http://docs.python.org/library/pprint.html)快速了解数据结构：

```
>>> from pprint import pprint
>>> pprint(data)
{u'AddToCartButtonText': u'Add to Cart',
 u'AddToCartButtonType': u'AD',
 u'AverageRating': 0,
 u'BrandInfo': None,
 u'CanAddToCart': False,
 u'ComboCount': 5,
 u'CoremetricsInfo': {u'Brand': u'Seagate',
                      u'CategoryID': u'IPS380',
                      u'PageID': u'PRODUCT: NBHD 320G|ST ST320LT014 7K SATA3G %_22-148-992 (22-148-992)',
                      u'ProductName': u'NBHD 320G|ST ST320LT014 7K SATA3G %_22-148-992'},
 u'Discount': u'You Save: $10.00',
 u'ETA': u'/Date(-62135568000000)/',
 u'EmailFriendImageInfo': {u'FullPath': u'http://images17.newegg.com/is/image/newegg/22-148-992-TS?$S35$',
                           u'ItemNumber': None,
                           u'PathSize100': u'http://images17.newegg.com/is/image/newegg/22-148-992-TS?$S100$',
                           u'PathSize125': u'http://images17.newegg.com/is/image/newegg/22-148-992-TS?$S125$',
                           u'PathSize180': u'http://images17.newegg.com/is/image/newegg/22-148-992-TS?$S180$',
                           u'PathSize300': u'http://images17.newegg.com/is/image/newegg/22-148-992-TS?$S300$',
                           u'PathSize35': u'http://images17.newegg.com/is/image/newegg/22-148-992-TS?$S35$',
                           u'PathSize60': u'http://images17.newegg.com/is/image/newegg/22-148-992-TS?$S60$',
                           u'PathSize640': u'http://images17.newegg.com/is/image/newegg/22-148-992-TS?$S640$',
                           u'SmallImagePath': u'http://images17.newegg.com/is/image/newegg/22-148-992-TS?$S125$',
                           u'ThumbnailImagePath': u'http://images17.newegg.com/is/image/newegg/22-148-992-TS?$S60$',
                           u'Title': None},
 u'EnergyStarText': None,
 u'FinalPrice': u'$79.99',
 u'FreeShippingFlag': True,
 u'HasMappingPrice': False,
 u'Image': {u'FullPath': u'http://images17.newegg.com/is/image/newegg/22-148-992-TS?$S180$',
            u'ItemNumber': None,
            u'PathSize100': u'http://images17.newegg.com/is/image/newegg/22-148-992-TS?$S100$',
            u'PathSize125': u'http://images17.newegg.com/is/image/newegg/22-148-992-TS?$S125$',
            u'PathSize180': u'http://images17.newegg.com/is/image/newegg/22-148-992-TS?$S180$',
            u'PathSize300': u'http://images17.newegg.com/is/image/newegg/22-148-992-TS?$S300$',
            u'PathSize35': u'http://images17.newegg.com/is/image/newegg/22-148-992-TS?$S35$',
            u'PathSize60': u'http://images17.newegg.com/is/image/newegg/22-148-992-TS?$S60$',
            u'PathSize640': u'http://images17.newegg.com/is/image/newegg/22-148-992-TS?$S640$',
            u'SmallImagePath': u'http://images17.newegg.com/is/image/newegg/22-148-992-TS?$S100$',
            u'ThumbnailImagePath': u'http://images17.newegg.com/is/image/newegg/22-148-992-TS?$S60$',
            u'Title': None},
 u'InstantSaving': 0,
 u'Instock': True,
 u'InstockForCombo': False,
 u'IronEggDescription': None,
 u'IsActivated': True,
 u'IsCellPhoneItem': False,
 u'IsComboBundle': False,
 u'IsFeaturedItem': False,
 u'IsHot': False,
 u'IsInPMCC': False,
 u'IsPreLaunch': False,
 u'IsShellShockerItem': False,
 u'IsShipByNewegg': True,
 u'IsShowEnergyStarSection': False,
 u'IsShowSoldOutText': False,
 u'ItemGroupID': 0,
 u'ItemMapPriceMarkType': 0,
 u'ItemNumber': u'22-148-992',
 u'ItemOwnerType': 0,
 u'LimitQuantity': -1,
 u'MailInRebateInfo': None,
 u'MailInRebateText': None,
 u'MappingFinalPrice': None,
 u'Model': u'ST320LT014',
 u'NeweggItemNumber': None,
 u'NumberOfReviews': 0,
 u'OriginalPrice': u'$89.99',
 u'ParentItem': None,
 u'ProductProperties': None,
 u'ProductStockType': 0,
 u'PromotionInfo': None,
 u'PromotionText': u'',
 u'ReturnPolicyInfo': {u'HtmlContent': None,
                       u'ID': u'44',
                       u'Name': u'Standard Return Policy'},
 u'ReviewSummary': {u'Rating': 0, u'TotalReviews': u'[]'},
 u'SellerId': None,
 u'SellerItemPropertyList': None,
 u'SellerName': None,
 u'ShipByNewegg': 0,
 u'ShippingInfo': {u'NormalShippingText': u'Free Shipping*',
                   u'RestrictedShippingText': u' Additional fees may apply for shipments to APO/FPO, AK, HI and PR.',
                   u'RestrictedShippingTitle': u'Shipping Restrictions',
                   u'SpecialShippingText': u' Additional fees may apply for shipments to APO/FPO, AK, HI and PR.'},
 u'ShippingPromotionInfo': None,
 u'ShoppingInsight': {u'Description': u'See what other informed Newegg customers purchased after viewing this product',
                      u'PromotionItems': [{u'AfterRebate': None,
                                           u'FinalPrice': u'$149.99',
                                           u'Instock': True,
                                           u'IsCurrentItem': False,
                                           u'IsFreeShipping': True,
                                           u'IsShowOriginalPrice': False,
                                           u'ItemBrand': {u'BrandId': 1305,
                                                          u'BrandImage': u'http://images10.newegg.com/brandimage/Brand1305.gif',
                                                          u'Code': 0,
                                                          u'Description': u'Seagate',
                                                          u'HasManfactoryLogo': True,
                                                          u'ManufactoryWeb': u'http://www.seagate.com',
                                                          u'WebSiteURL': None},
                                           u'ItemImage': {u'FullPath': u'http://images17.newegg.com/is/image/newegg/22-148-591-TS?$S180W$',
                                                          u'ItemNumber': None,
                                                          u'PathSize100': u'http://images17.newegg.com/is/image/newegg/22-148-591-TS?$S100$',
                                                          u'PathSize125': u'http://images17.newegg.com/is/image/newegg/22-148-591-TS?$S125W$',
                                                          u'PathSize180': u'http://images17.newegg.com/is/image/newegg/22-148-591-TS?$S180W$',
                                                          u'PathSize300': u'http://images17.newegg.com/is/image/newegg/22-148-591-TS?$S300W$',
                                                          u'PathSize35': u'http://images17.newegg.com/is/image/newegg/22-148-591-TS?$S35$',
                                                          u'PathSize60': u'http://images17.newegg.com/is/image/newegg/22-148-591-TS?$S60$',
                                                          u'PathSize640': u'http://images17.newegg.com/is/image/newegg/22-148-591-TS?$S640W$',
                                                          u'SmallImagePath': u'http://images17.newegg.com/is/image/newegg/22-148-591-TS?$S125W$',
                                                          u'ThumbnailImagePath': u'http://images17.newegg.com/is/image/newegg/22-148-591-TS?$S60$',
                                                          u'Title': None},
                                           u'ItemMapPriceMarkType': 0,
                                           u'ItemNumber': u'22-148-591',
                                           u'MappingFinalPrice': None,
                                           u'OriginalPrice': u'$149.99',
                                           u'Percentage': u'22',
                                           u'ReviewSummary': {u'Rating': 4,
                                                              u'TotalReviews': u'[829]'},
                                           u'Title': u'Seagate Momentus XT ST95005620AS 500GB 7200 RPM 32MB Cache 2.5" SATA 3.0Gb/s with NCQ Solid State Hybrid Drive -Bare Drive'},
                                          {u'AfterRebate': None,
                                           u'FinalPrice': u'$79.99',
                                           u'Instock': True,
                                           u'IsCurrentItem': True,
                                           u'IsFreeShipping': True,
                                           u'IsShowOriginalPrice': True,
                                           u'ItemBrand': {u'BrandId': 1305,
                                                          u'BrandImage': u'http://images10.newegg.com/brandimage/Brand1305.gif',
                                                          u'Code': 0,
                                                          u'Description': u'Seagate',
                                                          u'HasManfactoryLogo': True,
                                                          u'ManufactoryWeb': u'http://www.seagate.com',
                                                          u'WebSiteURL': None},
                                           u'ItemImage': {u'FullPath': u'http://images17.newegg.com/is/image/newegg/22-148-992-TS?$S180$',
                                                          u'ItemNumber': None,
                                                          u'PathSize100': u'http://images17.newegg.com/is/image/newegg/22-148-992-TS?$S100$',
                                                          u'PathSize125': u'http://images17.newegg.com/is/image/newegg/22-148-992-TS?$S125$',
                                                          u'PathSize180': u'http://images17.newegg.com/is/image/newegg/22-148-992-TS?$S180$',
                                                          u'PathSize300': u'http://images17.newegg.com/is/image/newegg/22-148-992-TS?$S300$',
                                                          u'PathSize35': u'http://images17.newegg.com/is/image/newegg/22-148-992-TS?$S35$',
                                                          u'PathSize60': u'http://images17.newegg.com/is/image/newegg/22-148-992-TS?$S60$',
                                                          u'PathSize640': u'http://images17.newegg.com/is/image/newegg/22-148-992-TS?$S640$',
                                                          u'SmallImagePath': u'http://images17.newegg.com/is/image/newegg/22-148-992-TS?$S125$',
                                                          u'ThumbnailImagePath': u'http://images17.newegg.com/is/image/newegg/22-148-992-TS?$S60$',
                                                          u'Title': None},
                                           u'ItemMapPriceMarkType': 0,
                                           u'ItemNumber': u'22-148-992',
                                           u'MappingFinalPrice': None,
                                           u'OriginalPrice': u'$89.99',
                                           u'Percentage': u'16',
                                           u'ReviewSummary': {u'Rating': 0,
                                                              u'TotalReviews': u'[]'},
                                           u'Title': u'Seagate Momentus Thin ST320LT014 320GB 7200 RPM 16MB Cache 2.5" SATA 3.0Gb/s Internal Notebook Hard Drive -Bare Drive'},
                                          {u'AfterRebate': None,
                                           u'FinalPrice': u'$69.99',
                                           u'Instock': True,
                                           u'IsCurrentItem': False,
                                           u'IsFreeShipping': False,
                                           u'IsShowOriginalPrice': True,
                                           u'ItemBrand': {u'BrandId': 1306,
                                                          u'BrandImage': u'http://images10.newegg.com/brandimage/Brand1306.gif',
                                                          u'Code': 0,
                                                          u'Description': u'Western Digital',
                                                          u'HasManfactoryLogo': True,
                                                          u'ManufactoryWeb': u'http://www.wdc.com/en/',
                                                          u'WebSiteURL': None},
                                           u'ItemImage': {u'FullPath': u'http://images17.newegg.com/is/image/newegg/22-136-280-TS?$S180W$',
                                                          u'ItemNumber': None,
                                                          u'PathSize100': u'http://images17.newegg.com/is/image/newegg/22-136-280-TS?$S100$',
                                                          u'PathSize125': u'http://images17.newegg.com/is/image/newegg/22-136-280-TS?$S125W$',
                                                          u'PathSize180': u'http://images17.newegg.com/is/image/newegg/22-136-280-TS?$S180W$',
                                                          u'PathSize300': u'http://images17.newegg.com/is/image/newegg/22-136-280-TS?$S300W$',
                                                          u'PathSize35': u'http://images17.newegg.com/is/image/newegg/22-136-280-TS?$S35$',
                                                          u'PathSize60': u'http://images17.newegg.com/is/image/newegg/22-136-280-TS?$S60$',
                                                          u'PathSize640': u'http://images17.newegg.com/is/image/newegg/22-136-280-TS?$S640W$',
                                                          u'SmallImagePath': u'http://images17.newegg.com/is/image/newegg/22-136-280-TS?$S125W$',
                                                          u'ThumbnailImagePath': u'http://images17.newegg.com/is/image/newegg/22-136-280-TS?$S60$',
                                                          u'Title': None},
                                           u'ItemMapPriceMarkType': 0,
                                           u'ItemNumber': u'22-136-280',
                                           u'MappingFinalPrice': None,
                                           u'OriginalPrice': u'$89.99',
                                           u'Percentage': u'16',
                                           u'ReviewSummary': {u'Rating': 5,
                                                              u'TotalReviews': u'[1,299]'},
                                           u'Title': u'Western Digital Scorpio Black WD3200BEKT 320GB 7200 RPM 16MB Cache 2.5" SATA 3.0Gb/s Internal Notebook Hard Drive -Bare Drive'},
                                          {u'AfterRebate': None,
                                           u'FinalPrice': u'$59.99',
                                           u'Instock': True,
                                           u'IsCurrentItem': False,
                                           u'IsFreeShipping': True,
                                           u'IsShowOriginalPrice': True,
                                           u'ItemBrand': {u'BrandId': 1305,
                                                          u'BrandImage': u'http://images10.newegg.com/brandimage/Brand1305.gif',
                                                          u'Code': 0,
                                                          u'Description': u'Seagate',
                                                          u'HasManfactoryLogo': True,
                                                          u'ManufactoryWeb': u'http://www.seagate.com',
                                                          u'WebSiteURL': None},
                                           u'ItemImage': {u'FullPath': u'http://images17.newegg.com/is/image/newegg/22-148-906-TS?$S180$',
                                                          u'ItemNumber': None,
                                                          u'PathSize100': u'http://images17.newegg.com/is/image/newegg/22-148-906-TS?$S100$',
                                                          u'PathSize125': u'http://images17.newegg.com/is/image/newegg/22-148-906-TS?$S125$',
                                                          u'PathSize180': u'http://images17.newegg.com/is/image/newegg/22-148-906-TS?$S180$',
                                                          u'PathSize300': u'http://images17.newegg.com/is/image/newegg/22-148-906-TS?$S300$',
                                                          u'PathSize35': u'http://images17.newegg.com/is/image/newegg/22-148-906-TS?$S35$',
                                                          u'PathSize60': u'http://images17.newegg.com/is/image/newegg/22-148-906-TS?$S60$',
                                                          u'PathSize640': u'http://images17.newegg.com/is/image/newegg/22-148-906-TS?$S640$',
                                                          u'SmallImagePath': u'http://images17.newegg.com/is/image/newegg/22-148-906-TS?$S125$',
                                                          u'ThumbnailImagePath': u'http://images17.newegg.com/is/image/newegg/22-148-906-TS?$S60$',
                                                          u'Title': None},
                                           u'ItemMapPriceMarkType': 0,
                                           u'ItemNumber': u'22-148-906',
                                           u'MappingFinalPrice': None,
                                           u'OriginalPrice': u'$69.99',
                                           u'Percentage': u'11',
                                           u'ReviewSummary': {u'Rating': 5,
                                                              u'TotalReviews': u'[1]'},
                                           u'Title': u'Seagate Momentus Thin ST250LT003 250GB 5400 RPM 16MB Cache 2.5" SATA 3.0Gb/s Internal Notebook Hard Drive -Bare Drive'}]},
 u'ShowOriginalPrice': True,
 u'StaticText': None,
 u'StrAddItem': None,
 u'StrAlt': None,
 u'StrCartImg': None,
 u'SubCategoryId': 380,
 u'SubCategoryName': u'Laptop Hard Drives',
 u'Title': u'Seagate Momentus Thin ST320LT014 320GB 7200 RPM 16MB Cache 2.5" SATA 3.0Gb/s Internal Notebook Hard Drive -Bare Drive',
 u'UnitPrice': 0,
 u'Warnings': None,
 u'WarrantyInfo': None,
 u'XmlSpec': None,
 u'imageGallery': [{u'FullPath': u'http://images17.newegg.com/is/image/newegg/22-148-992-Z01?$S640$',
                    u'ItemNumber': None,
                    u'PathSize100': u'http://images17.newegg.com/is/image/newegg/22-148-992-Z01?$S100$',
                    u'PathSize125': u'http://images17.newegg.com/is/image/newegg/22-148-992-Z01?$S125$',
                    u'PathSize180': u'http://images17.newegg.com/is/image/newegg/22-148-992-Z01?$S180$',
                    u'PathSize300': u'http://images17.newegg.com/is/image/newegg/22-148-992-Z01?$S300$',
                    u'PathSize35': u'http://images17.newegg.com/is/image/newegg/22-148-992-Z01?$S35$',
                    u'PathSize60': u'http://images17.newegg.com/is/image/newegg/22-148-992-Z01?$S60$',
                    u'PathSize640': u'http://images17.newegg.com/is/image/newegg/22-148-992-Z01?$S640$',
                    u'SmallImagePath': u'http://images17.newegg.com/is/image/newegg/22-148-992-Z01?$S100$',
                    u'ThumbnailImagePath': u'http://images17.newegg.com/is/image/newegg/22-148-992-Z01?$S60$',
                    u'Title': None},
                   {u'FullPath': u'http://images17.newegg.com/is/image/newegg/22-148-992-Z02?$S640$',
                    u'ItemNumber': None,
                    u'PathSize100': u'http://images17.newegg.com/is/image/newegg/22-148-992-Z02?$S100$',
                    u'PathSize125': u'http://images17.newegg.com/is/image/newegg/22-148-992-Z02?$S125$',
                    u'PathSize180': u'http://images17.newegg.com/is/image/newegg/22-148-992-Z02?$S180$',
                    u'PathSize300': u'http://images17.newegg.com/is/image/newegg/22-148-992-Z02?$S300$',
                    u'PathSize35': u'http://images17.newegg.com/is/image/newegg/22-148-992-Z02?$S35$',
                    u'PathSize60': u'http://images17.newegg.com/is/image/newegg/22-148-992-Z02?$S60$',
                    u'PathSize640': u'http://images17.newegg.com/is/image/newegg/22-148-992-Z02?$S640$',
                    u'SmallImagePath': u'http://images17.newegg.com/is/image/newegg/22-148-992-Z02?$S100$',
                    u'ThumbnailImagePath': u'http://images17.newegg.com/is/image/newegg/22-148-992-Z02?$S60$',
                    u'Title': None},
                   {u'FullPath': u'http://images17.newegg.com/is/image/newegg/22-148-992-Z03?$S640$',
                    u'ItemNumber': None,
                    u'PathSize100': u'http://images17.newegg.com/is/image/newegg/22-148-992-Z03?$S100$',
                    u'PathSize125': u'http://images17.newegg.com/is/image/newegg/22-148-992-Z03?$S125$',
                    u'PathSize180': u'http://images17.newegg.com/is/image/newegg/22-148-992-Z03?$S180$',
                    u'PathSize300': u'http://images17.newegg.com/is/image/newegg/22-148-992-Z03?$S300$',
                    u'PathSize35': u'http://images17.newegg.com/is/image/newegg/22-148-992-Z03?$S35$',
                    u'PathSize60': u'http://images17.newegg.com/is/image/newegg/22-148-992-Z03?$S60$',
                    u'PathSize640': u'http://images17.newegg.com/is/image/newegg/22-148-992-Z03?$S640$',
                    u'SmallImagePath': u'http://images17.newegg.com/is/image/newegg/22-148-992-Z03?$S100$',
                    u'ThumbnailImagePath': u'http://images17.newegg.com/is/image/newegg/22-148-992-Z03?$S60$',
                    u'Title': None},
                   {u'FullPath': u'http://images17.newegg.com/is/image/newegg/22-148-992-Z04?$S640$',
                    u'ItemNumber': None,
                    u'PathSize100': u'http://images17.newegg.com/is/image/newegg/22-148-992-Z04?$S100$',
                    u'PathSize125': u'http://images17.newegg.com/is/image/newegg/22-148-992-Z04?$S125$',
                    u'PathSize180': u'http://images17.newegg.com/is/image/newegg/22-148-992-Z04?$S180$',
                    u'PathSize300': u'http://images17.newegg.com/is/image/newegg/22-148-992-Z04?$S300$',
                    u'PathSize35': u'http://images17.newegg.com/is/image/newegg/22-148-992-Z04?$S35$',
                    u'PathSize60': u'http://images17.newegg.com/is/image/newegg/22-148-992-Z04?$S60$',
                    u'PathSize640': u'http://images17.newegg.com/is/image/newegg/22-148-992-Z04?$S640$',
                    u'SmallImagePath': u'http://images17.newegg.com/is/image/newegg/22-148-992-Z04?$S100$',
                    u'ThumbnailImagePath': u'http://images17.newegg.com/is/image/newegg/22-148-992-Z04?$S60$',
                    u'Title': None}]} 
```

然后您可以看到其他`FinalPrice`条目是`ShoppingInsight`->`PromotionItems`结构的一部分，它是一个列表：

```
>>> print data[u'ShoppingInsight'][u'PromotionItems'][0][u'FinalPrice']
$149.99
>>> print data[u'ShoppingInsight'][u'PromotionItems'][0][u'Title']
Seagate Momentus XT ST95005620AS 500GB 7200 RPM 32MB Cache 2.5" SATA 3.0Gb/s with NCQ Solid State Hybrid Drive -Bare Drive 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T18:10:17.163

使用 json 解析器。例如，如果我将您提供的数据网页保存到一个名为 json_data 的文件中，那么我可以这样做......

```
 import json
  json_data=open('json_data')

  data = json.load(json_data)
  print(data["FinalPrice"])
  json_data.close() 
```

或者，如果您已经在变量中拥有数据，只需在该变量上使用 json.load。

# maven - 如何编写可以包含在其他 web 应用程序中的 Vaadin 主题？

> ID：11298776
> 
> 赞同：2
> 
> 时间：2012-07-02T18:00:08.623
> 
> 标签：maven, vaadin

我正在尝试创建一个简单的主题（使用 Chameleon 和一些自定义 css 和图像等），我已经完成了。

问题是我想将它包装在一个 maven 项目中并作为依赖项从其他 Vaadin 项目中引用，因此我可以以相同的方式为我的所有 Vaadin 应用程序设置主题 - 甚至更好地将其作为父项目的依赖项，以便整个应用程序的样式相同，我可以为不同的客户重新设计它。

我不确定如何打包和部署主题项目，以便它可以从其他项目中使用？我应该把它变成一个战争项目——但是其他项目如何“完成它”？他们将在他们自己的 VAADIN/themes 目录下寻找主题——而不是在那里复制它（不知何故），我怎么能让他们引用一个副本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T20:30:00.910

我想我找到了一种方法 - 不确定这是不是最好的方法，因为它将主题 css 复制到多个战争项目中，而不是创建一个共享实例，但唯一的另一种方法是做一些巧妙的服务器配置以在项目之间共享一个 url或者其他的东西。

[http://www.ensor.cc/2011/06/mavens-war-overlay-what-are-war.html](http://www.ensor.cc/2011/06/mavens-war-overlay-what-are-war.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T07:19:43.297

我有同样的问题。我通过使用战争覆盖解决了它。

我在父项目中有一个基本主题，它在客户的配置项目中进行了扩展。配置项目只是将战争用作运行时依赖项，并且父项目的文件被覆盖，如此[处](http://maven.apache.org/plugins/maven-war-plugin/overlays.html)所述。

只需在客户端项目中添加依赖即可：

```
<dependency>
    <groupId>com.mygroup</groupId>
    <artifactId>my-parent-project</artifactId>
    <version>1.0.0-SNAPSHOT</version>
    <type>war</type>
    <scope>runtime</scope>
</dependency> 
```

并在客户端主题的styles.css文件中导入父项目的样式：

```
@import "../parent-theme/styles.css" 
```

并添加客户的样式。

如果您需要使用父项目的类，您可以`attachClasses`在 maven-war-plugin 配置中设置属性 true ，如果需要调试，也可以使用 maven-source-plugin 附加源：

```
<plugin>
    <artifactId>maven-war-plugin</artifactId>
    <version>2.1.1</version>
    <configuration>
        <attachClasses>true</attachClasses>
    </configuration>
</plugin>

<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-source-plugin</artifactId>
    <version>2.1.2</version>
    <executions>
        <execution>
            <id>attach-sources</id>
            <goals>
                <goal>jar</goal>
            </goals>
        </execution>
    </executions>
    <configuration>
        <attach>true</attach>
    </configuration>
</plugin> 
```

并将它们包含在您客户的项目中：

```
<dependency>
    <groupId>com.mygroup</groupId>
    <artifactId>my-parent-project</artifactId>
    <version>1.0.0-SNAPSHOT</version>
    <classifier>classes</classifier>
    <type>jar</type>
    <scope>compile</scope>
</dependency> 
```

# css - 从 panelgrid 动态传递 CSS 属性

> ID：11298777
> 
> 赞同：0
> 
> 时间：2012-07-02T18:00:10.700
> 
> 标签：css, jsf

我有一个从 ebean 获取的隐藏属性。我如何将该颜色代码属性传递给 css 函数？

```
 <h:panelGrid id="testpanel"
       columns="#{message.no_of_columns}" rows="#{message.no_of_rows}" 
      styleClass="dynamicGrid">
     <c:forEach items="#{bLDashBoardAction.listBondLoc}" var="item">
      <h:panelGroup>                                                 <h:outputText value="#{item.rackTagCode}" />
   <h:hiddenInput value="#{item.colorEBean.colorCode};" />
                                            </h:panelGroup>
</c:forEach>
</h:panelGrid> 
```

这是我的 css 属性，需要从 panelgrid 颜色代码分配背景

```
.dynamicGrid td
{
width: 50px;
height: 50px;
border: 4px solid gray;
    background:

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T05:16:20.150

不要认为你可以从 JSF 传递到 css，你可以创建几个具有预定义背景颜色的类，比如`.dynamicGridRed`和`.dynamicGridYellow`

并有条件地调用它们，其中`styleClass="#{item.colorEBean.colorCode}"` colorCode 可以返回`dynamicGridRed`或`dynamicGridYellow`

或类似的东西

```
styleClass="#{item.colorEBean.useRedCode?'dynamicGridRed':'dynamicGridYellow'}" 
```

另一种选择是使用内联 css，例如：

```
style="width: 50px;height: 50px;border: 4px solid gray;background:#{item.colorEBean.colorCode}" 
```

INMO，你最好不要试图操纵css的内容，只做一堆预定义的css类......

但我不是css pro，所以我可能错了

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T03:13:47.177

由于您受到奇怪设计的限制，最好的办法是直接将样式应用于单元格的内容。

```
<h:outputText value="#{item.rackTagCode}" style="display:block;color:#{item.colorEBean.colorCode};" /> 
```

这`display:block`将使它跨越整个单元格。

# sql - 使用 SSRS 在一列中显示多个值

> ID：11298778
> 
> 赞同：0
> 
> 时间：2012-07-02T18:00:14.147
> 
> 标签：sql, sql-server-2008-r2, reporting-services

我有一份报告，我想在一列中显示 2 名工程师的值。我正在使用多维数据集生成矩阵。

例如

```
 Customer   Engineer     Support
    Citi       ABC           
    Citi       XYZ           EFG 
```

我使用了下面的代码

```
=First(Fields!string.Value)+","+ Last(Fields!string.Value) 
```

然后我得到这样的东西

```
 Customer   Engineer     Support
  Citi      ABC,XYZ       EFG,EFG 
```

但我想这样显示

```
 Customer   Engineer     Support
    Citi       ABC,XYZ      EFG 
```

我怎样才能像上面那样显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T09:47:00.610

```
=IIF(First(Fields!string.Value) = Last(Fields!string.Value), First(Fields!string.Value), First(Fields!string.Value)+","+ Last(Fields!string.Value)) 
```

# foreign-keys - Web2py：id 作为外键

> ID：11298782
> 
> 赞同：0
> 
> 时间：2012-07-02T18:00:23.587
> 
> 标签：foreign-keys, primary-key, web2py

我正在尝试实现一些模仿关系（sqlite）数据库中的继承的表。我的目标是拥有一个包含通用字段的主表，以及一些具有专业字段的子表。**主表中的每条记录都将在其中一个特定表中恰好有一个对应项。**我想要的看起来像这样：

主表：

```
id (PK) #Your average web2py unique auto-incrementing int field
#Some general fields 
```

子表：

```
id (PK, FK referencing the PK of the master table)
#Some specialized fields 
```

为每个子表设置一个默认的“id”PK 对我来说没有用。我只需要一个对主表的 FK 引用，它可以作为子表的 PK。这意味着子表的 PK 将是唯一的，但会包含间隙。这是因为子表只会引用主表的部分记录。

我的印象是这样做（不给子表提供常规的“id”PK）违反了 Web2py 方式。所以我的问题如下：

1.  这是一个坏主意™吗？如果是这样，为什么？
2.  我将如何实现这一点？Web2py 可以处理没有自动递增 int 作为 PK 的表吗？

在编写代码时应用正确的风格和实践对我来说非常重要。我对替代方法持开放态度。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T22:23:59.610

请参阅有关[键控表](http://web2py.com/books/default/chapter/29/6#Legacy-databases-and-keyed-tables)的书籍部分。如果这是一个专门用于 web2py 的数据库，我建议你坚持使用标准的 web2py 方法：

```
db.define_table('master', ...)

db.define_table('child', Field('master', db.master)) 
```

# iphone - 尝试获取 UISegmentedControl 的 selectedSegmentIndex 时的 EXC_BAD_ACCESS

> ID：11298788
> 
> 赞同：0
> 
> 时间：2012-07-02T18:00:59.627
> 
> 标签：iphone, ios, uisegmentedcontrol

我以编程方式将 UISegmentedControl 添加到我的 UINavigationBar 如下

```
UISegmentedControl *toggleSwitch = [[UISegmentedControl alloc] initWithItems:[NSArray arrayWithObjects: @"Bar", @"Scatter", nil]];
toggleSwitch.segmentedControlStyle = UISegmentedControlStyleBar;
[toggleSwitch addTarget:self action:@selector(toggleSwitched:) forControlEvents:UIControlEventValueChanged];

UIBarButtonItem *buttonItem = [[UIBarButtonItem alloc] initWithCustomView:toggleSwitch];
self.navigationItem.rightBarButtonItem = buttonItem;
[toggleSwitch release];
[buttonItem release]; 
```

然后我有一个方法，toggleSwitched 来处理事件：

```
-(void) toggleSwitched:(id) sender {
    if([sender isKindOfClass:[UISegmentedControl class]]) {
        NSLog(@"%@",((UISegmentedControl*)sender).selectedSegmentIndex );
    }
} 
```

根据我对[Apple 文档](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UISegmentedControl_Class/Reference/UISegmentedControl.html)的阅读，这是为触摸事件设置事件处理的正确方法。

但是，当我运行程序（在模拟器中）并点击段时，会发生以下情况：

1.  如果是第一段（索引 0），则将“null”记录到控制台
2.  如果是第二个段（索引 1），程序会因 EXC_BAD_ACCESS 而崩溃

当我查看调试器的变量窗口时，发件人的类型是 UISegmentedControl，并且 _selectedSegment 属性似乎是正确的（0 或 1）。

我不正确地访问了什么以及如何设置我的委托函数以在 UISegmentedController 的两个值之间切换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T18:04:47.087

你`NSLog`错了。`selectedSegmentIndex`返回`NSUInteger`，因此您需要使用`@"%d"`而不是`@"%@"`. `%@`是针对对象的，因此系统试图将数字用作指向对象的内存地址，并为您生成错误。

# css - 列表样式类型不显示

> ID：11298790
> 
> 赞同：1
> 
> 时间：2012-07-02T18:01:02.970
> 
> 标签：css, list

列表样式类型的项目符号未显示。不仅 CSS 没有声明 list-style-type: none，而且我什至声明了 list-style-type: disc 用于描述的部分。即使打开萤火虫和等价物，很明显应该显示子弹。很困惑。发生在所有浏览器中。

我说的是图像旁边的 div #product-list。

PS请不要评论它有多丑陋。需要完全复制他们以前的站点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T18:07:17.437

是因为`display`属性的缘故，它被设置为`block`（甚至`inline`），它需要是， s`list-item`上的默认值`<li>`

# ubuntu - 试图同步两台电脑的时钟时序

> ID：11298803
> 
> 赞同：1
> 
> 时间：2012-07-02T18:02:02.807
> 
> 标签：ubuntu, clock, ntp

我正在尝试同步两台不同计算机的时钟时间。它们都连接到服务器并且彼此相邻。

起初，我去了 /etc/ntp.conf 文件。我在每台计算机的文件中看到以下四行：

服务器 0.ubuntu.pool.ntp.org .... 服务器 3.ubuntu.pool.ntp.org

然后我输入“ntpq -p”，我发现他们正在从不同的服务器获取时间！他们也显示了不同的时钟时间。因此，我键入“sudo vi /etc/ntp.conf”，然后取出 NTP 池项目服务器。现在，两台计算机都使用 Ubuntu 的 ntp 服务器作为后备。它们只有以下行（其他服务器行已注释）：

服务器 ntp.ubuntu.com

然而，它们仍然显示出几秒钟的漂移。我做了正确的步骤吗？

如何对这些计算机进行时间同步？

谢谢，

纳兹穆尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T02:17:50.623

ComputerA (A) 和 ComputerB (B) 显示不同的远程时间服务器，因为 ntp 池项目结合了许多不同的 ntp 服务器。A 和 B 同步到不同的池主机没有任何问题。当您说“时钟时间也不同”时，您会意识到时间差异以毫秒为单位。

你真的需要时间亚毫秒精度吗？

如果不是（我假设不是），您应该使用 ubuntu 池服务器返回初始 ntpd 配置。如果你愿意，你可以改变：

```
server 1.ubuntu.pool.ntp.org 
```

至

```
server 1.CC.pool.ntp.org 
```

其中 CC 是您的国家代码，例如 us,uk,dk,ca。有关国家代码的更多信息，请访问 ntp 池项目网站：[http ://www.pool.ntp.org/en/](http://www.pool.ntp.org/en/)

附言

为了获得更好的结果，请使用 iburst：

```
server 1.CC.pool.ntp.org iburst 
```

# c# - 在 global.asax 中使用 PreSendRequestHeaders 事件

> ID：11298804
> 
> 赞同：9
> 
> 时间：2012-07-02T18:02:09.053
> 
> 标签：c#, asp.net, iis, global-asax

我试图在“Application_Start”方法的 global.asax 文件中分配 PreSendRequestHeaders 事件。但这不起作用。

```
private void Application_Start()
{
    PreSendRequestHeaders += OnPreSendRequestHeaders;           
}

private void OnPreSendRequestHeaders(object sender, EventArgs e)
{
   // this is not called
} 
```

OnPreSendRequestHeaders 没有被调用，为什么？是否可以在 global.asax 中分配 PreSendRequestHeaders 方法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-11T12:52:21.677

只需使用：

```
protected void Application_PreSendRequestHeaders(Object source, EventArgs e)
{

} 
```

或实例化处理程序：

```
protected void Application_Start()
{
    PreSendRequestHeaders += new EventHandler(OnPreSendRequestHeaders);
}

protected void OnPreSendRequestHeaders(object sender, EventArgs e)
{
    // should work now
} 
```

# asp.net - .SHTML 页面中的 ASP 代码

> ID：11298807
> 
> 赞同：0
> 
> 时间：2012-07-02T18:02:23.127
> 
> 标签：asp.net, vb.net, iis, asp-classic, vbscript

我正在管理一个不是在 IIS7 下创建的 ASP 2.0 站点。

我想将一行 VB 代码放在几个`.shtml`文件中。

我试着做这样的事情：

```
<html>
    <body>
        Today is <%= Date() %>
    </body>
</html> 
```

但它实际上呈现：

```
<html>
    <body>
        Today is <%= Date() %>
    </body>
</html> 
```

而不是预期的：

```
<html>
    <body>
        Today is 7/2/2012
    </body>
</html> 
```

我究竟做错了什么？如何`.shtml`在 ASP 2.0 / IIS 7 下运行的文件中运行 VB 代码？

（没有javascript，谢谢）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T18:24:21.297

IIS > 站点 > MySite > 处理程序映射

选择路径为 *.shtml > Edit > IsapiModule 的记录

# javascript - 如何在清单版本 2 中将模板与 Backbone.js 一起用于 Chrome 扩展

> ID：11298808
> 
> 赞同：5
> 
> 时间：2012-07-02T18:02:25.927
> 
> 标签：javascript, google-chrome, backbone.js, google-chrome-extension, handlebars.js

我试图为我的主干视图使用模板。我尝试使用 underscore.template 让它运行。问题在于，由于 chrome 扩展的 manifest_version 2 存在一些安全限制。我认为原因是因为不再允许内联块。在这个小例子中，我加载了一个模板并尝试渲染它。然后我得到错误：

未捕获的错误：此上下文不允许从字符串生成代码。

我也在我的 html 文件中使用 Handlebars.js 和一个模板进行了尝试。它在普通的浏览器窗口中工作。但它不作为 chrome 扩展。

那么如何在带有 manifest_version 2 的 chrome 扩展中使用带有主干.js 的模板呢？

带下划线（不起作用）：

```
define [
  'jquery'
  'backbone'
  'lib/facade'
  'text!templates/loginTemplate.js'
],
($, Backbone, facade, LoginTemplate) ->
  'use strict'
  class LoginView extends Backbone.View
    tagName: 'div'
    events: {

    }

    initialize: (options) ->
      @el = options.el

    render: ->
      console.log 'LoginView: render()'
      $(@el).html(_.template(LoginTemplate, {})) 
```

带车把（不起作用）：

index.html 中的模板：

```
<!-- templates -->
  <script id="loginTemplate" type="text/x-handlebars-template">
    <form class="form-horizontal">
      <fieldset>
        <legend>Login</legend>
        <div class="control-group">
          <label class="control-label" for="email">Email:</label>
          <div class="controls">
            <input type="text" class="input-xlarge" id="email" name="email">
          </div>
        </div>
        <div class="control-group">
          <label class="control-label" for="password">Passwort:</label>
          <div class="controls">
            <input type="password" class="input-xlarge" id="password" name="password">
          </div>
        </div>
        <div class="form-actions">
          <button type="submit" class="btn btn-primary">Login</button>
        </div>
      </fieldset>
    </form>
  </script> 
```

在我看来：

```
define [
  'jquery'
  'backbone'
  'lib/facade'
],
($, Backbone, facade) ->
  'use strict'
  class LoginView extends Backbone.View
    tagName: 'div'    
    events: {

    }

    initialize: (options) ->
      @el = options.el

    render: ->
      console.log 'LoginView: render()', $("#loginTemplate")
      $(@el).html(Handlebars.compile($("#loginTemplate").html())) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T19:08:07.633

Underscore 和 Handlebars 模板都将字符串转换为 JavaScript 函数；例如， [下划线是这样的](https://github.com/documentcloud/underscore/blob/master/underscore.js#L1003)：

```
source = "var __t,__p='',__j=Array.prototype.join," +
  "print=function(){__p+=__j.call(arguments,'')};\n" +
  source + "return __p;\n";

var render = new Function(settings.variable || 'obj', '_', source); 
```

因此它构建了一些 JavaScript 并用于`new Function`构建函数；车把可能会做类似的事情。显然 Chrome 不希望你在扩展程序中做这样的事情。

您可以预编译模板，然后将该函数作为一段简单的 JavaScript 嵌入到您的扩展中。对于下划线模板，您可以[查看`source`属性](http://underscorejs.org/#template)：

> **source**属性在已编译的模板函数上可用，以便于预编译。
> 
> ```
> <script>
>   JST.project = <%= _.template(jstText).source %>;
> </script> 
> ```

因此，您可以`t = _.template(your_template)`在打包扩展时将`t.source`文本作为 JavaScript 函数放入扩展中。

您可以使用 Handlebars 做类似的事情（例如，参见[handlebars_assets ）。](https://github.com/leshill/handlebars_assets)

它们都使您的构建和打包过程复杂化，但如果 Chrome 不希望您在扩展程序中构建功能，那么您无能为力。

# c# - 如何在 C# 中的 Active Directory 中的 UserPrincipal 对象上设置 Manager 属性

> ID：11298811
> 
> 赞同：5
> 
> 时间：2012-07-02T18:02:44.277
> 
> 标签：c#, active-directory

我正在尝试在此处记录`Manager`的类型对象上设置属性`UserPrincipal`：

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms680857(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680857(v=vs.85).aspx)

但不能简单地说

```
UserPrincipal.Manager = "some value" 
```

有人可以向我解释这是如何工作的吗？谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-02T18:07:52.357

`UserPrincipal`S.DS.AM 命名空间中的 basic 没有该属性 - 但您可以扩展用户主体类并添加您需要的其他属性。

在此处阅读更多信息：

[在 .NET Framework 3.5 中管理目录安全主体](http://msdn.microsoft.com/en-us/magazine/cc135979.aspx)
（*文章末尾**有一个关于**可扩展性***的部分）

这是代码：

```
[DirectoryRdnPrefix("CN")]
[DirectoryObjectClass("Person")]
public class UserPrincipalEx : UserPrincipal
{
    // Inplement the constructor using the base class constructor. 
    public UserPrincipalEx(PrincipalContext context) : base(context)
    { }

    // Implement the constructor with initialization parameters.    
    public UserPrincipalEx(PrincipalContext context,
                         string samAccountName,
                         string password,
                         bool enabled) : base(context, samAccountName, password, enabled)
    {} 

    // Create the "Manager" property.    
    [DirectoryProperty("manager")]
    public string Manager
    {
        get
        {
            if (ExtensionGet("manager").Length != 1)
                return string.Empty;

            return (string)ExtensionGet("manager")[0];
        }
        set { ExtensionSet("manager", value); }
    }

    // Implement the overloaded search method FindByIdentity.
    public static new UserPrincipalEx FindByIdentity(PrincipalContext context, string identityValue)
    {
        return (UserPrincipalEx)FindByIdentityWithType(context, typeof(UserPrincipalEx), identityValue);
    }

    // Implement the overloaded search method FindByIdentity. 
    public static new UserPrincipalEx FindByIdentity(PrincipalContext context, IdentityType identityType, string identityValue)
    {
        return (UserPrincipalEx)FindByIdentityWithType(context, typeof(UserPrincipalEx), identityType, identityValue);
    }
} 
```

现在您可以找到并使用具有供您使用`UserPrincipalEx`的属性的类：`.Manager`

```
UserPrincipalEx userEx = UserPrincipalEx.FindByIdentity(ctx, "YourUserName");

// the .Manager property contains the DN (distinguished name) for the manager of this user
var yourManager = userEx.Manager; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-05T21:28:46.767

我喜欢这个例子，但完全了解 RatBoyStl 的来源。有时你只想要一个值而不是一个新类。

如果您有`UserPrinciple`给定用户的对象，那么您可以使用此代码轻松检索 manager 属性。我更进一步，使用 manager 值来查找`UserPrinciple`并显示他们的电子邮件地址。

```
 //set the principal context to the users domain
        PrincipalContext pc = new PrincipalContext(ContextType.Domain, userDomain);

        //lookup the user id on the domain
        UserPrincipal up = UserPrincipal.FindByIdentity(pc, userId);
        if (up == null)
        {
            Console.WriteLine(string.Format("AD USER NOT FOUND {0}", userGc));
            return;

        }

        //grab the info we need from the domain
        Console.WriteLine(up.ToString());

        DirectoryEntry d = up.GetUnderlyingObject() as DirectoryEntry;
        string managerCN = d.Properties["manager"].Value.ToString(); 
        Console.WriteLine(managerCN);

        UserPrincipal manager = UserPrincipal.FindByIdentity(pc, managerCN);
        Console.WriteLine(manager.EmailAddress); 
```

# c++ - 使用 cmake 设置 gsl 的问题

> ID：11298812
> 
> 赞同：2
> 
> 时间：2012-07-02T18:02:46.173
> 
> 标签：c++, installation, cmake, gnu, gsl

我能够成功配置并生成构建文件夹（KinectSLAM6D/build.）。但是，当我尝试使用 make 构建它时，我收到一条错误消息，提示找不到 gsl。我很确定这只是一个配置问题，因为我安装了 gsl（它们在 usr/local 中），但我无法配置它。我尝试将以下几行添加到 CMakeList：

```
include_directories(${GSL_INCLUDE_DIRS} ${GSLCBLAS_INCLUDE_DIRS})
set(LIBS ${LIBS} ${GSL_LIBRARIES} ${GSLCBLAS_LIBRARIES}) 
```

我已经复制了下面的相关输出。我找到了几个使用 gsl 编译的答案（添加 -lgsl）。但是，我不知道将其放在 CMakeLists 或生成的 MakeList 和 MakeList2 文件中的哪个位置。

```
 Here's the generated output.
....
[ 44%] Building CXX object CMakeFiles/Kinect6DSLAM.dir/src/GraphOptimizer_G2O.cpp.o
[ 45%] Building CXX object CMakeFiles/Kinect6DSLAM.dir/src/CKinect2DRawlog.cpp.o
Linking CXX executable Kinect6DSLAM
    /usr/bin/ld: warning: libopencv_core.so.2.3, needed by /usr/lib/gcc/x86_64-linux-gnu/4.6/../../../../lib/libmrpt-base.so, may conflict with libopencv_core.so.2.4
    /usr/bin/ld: warning: libopencv_imgproc.so.2.3, needed by /usr/lib/gcc/x86_64-linux-gnu/4.6/../../../../lib/libmrpt-base.so, may conflict with libopencv_imgproc.so.2.4
    /usr/bin/ld: warning: libopencv_highgui.so.2.3, needed by /usr/lib/gcc/x86_64-linux-gnu/4.6/../../../../lib/libmrpt-base.so, may conflict with libopencv_highgui.so.2.4
    ../gicp/libgicp.a(gicp.o): In function `dgc::gicp::GICPPointSet::ComputeMatrices()':
    gicp.cpp:(.text+0x462): undefined reference to `gsl_vector_alloc'
    gicp.cpp:(.text+0x470): undefined reference to `gsl_vector_alloc'
... a bunch more undefined references to gsl
collect2: ld returned 1 exit status
make[2]: *** [Kinect6DSLAM] Error 1
make[1]: *** [CMakeFiles/Kinect6DSLAM.dir/all] Error 2
make: *** [all] Error 2 
```

这如果是完整的 CMakeList.txt。我正在尝试运行 Miguel Algaba 的 SLAM 项目。

```
PROJECT(KinectSLAM6D)

CMAKE_MINIMUM_REQUIRED(VERSION 2.8 FATAL_ERROR)
if(COMMAND cmake_policy)
      cmake_policy(SET CMP0003 NEW)  # Required by CMake 2.7+
endif(COMMAND cmake_policy)

# Set the output directory for the build executables
SET(CMAKE_RUNTIME_OUTPUT_DIRECTORY ${PROJECT_SOURCE_DIR}/build)

#Add here your project dependencies
FIND_PACKAGE(MRPT REQUIRED hwdrivers maps graphslam) #Add here your project dependencies
FIND_PACKAGE(PCL REQUIRED) 
FIND_PACKAGE(OpenCV REQUIRED )

INCLUDE_DIRECTORIES(${PCL_INCLUDE_DIRS})
LINK_DIRECTORIES(${PCL_LIBRARY_DIRS})
ADD_DEFINITIONS(${PCL_DEFINITIONS})

# Required by StanfordGICP
set(CMAKE_MODULE_PATH ${CMAKE_CURRENT_SOURCE_DIR}/cmake) 
FIND_PACKAGE(GSL REQUIRED)
include_directories(${GSL_INCLUDE_DIRS} ${GSLCBLAS_INCLUDE_DIRS})
set(LIBS ${LIBS} ${GSL_LIBRARIES} ${GSLCBLAS_LIBRARIES})
FIND_PACKAGE(Boost COMPONENTS system program_options REQUIRED)
include_directories(${PROJECT_SOURCE_DIR}/gicp)
include_directories(${PROJECT_SOURCE_DIR}/gicp/ann_1.1.1/include/ANN)
# G2O library

# Set up the top-level include directories
SET( G2O_INCLUDE ${PROJECT_SOURCE_DIR}/EXTERNAL/g2o CACHE PATH "Directory of G2O")
INCLUDE_DIRECTORIES(${PROJECT_SOURCE_DIR} ${G2O_INCLUDE})

# Add g2o lib dir
LINK_DIRECTORIES( ${LINK_DIRECTORIES} "${G2O_INCLUDE}/lib" )

#Generate config.h 
configure_file(g2o/trunk/config.h.in ${PROJECT_BINARY_DIR}/g2o/config.h)
include_directories(${PROJECT_BINARY_DIR})
INSTALL(FILES ${PROJECT_BINARY_DIR}/g2o/config.h DESTINATION ${CMAKE_INSTALL_PREFIX}/include/g2o)

# Include the subdirectories
ADD_SUBDIRECTORY(g2o/trunk)

INCLUDE_DIRECTORIES(${CSPARSE_INCLUDE_DIR}) #You can use CPARSE or CHOLMOD
INCLUDE_DIRECTORIES(${CHOLMOD_INCLUDE_DIR}) 

set(G2O_DIR ${PROJECT_SOURCE_DIR}/g2o/trunk)
include_directories(${G2O_DIR})
link_directories(${G2O_DIR}/lib)

# Declare the target (an executable)
ADD_EXECUTABLE(Kinect6DSLAM kinect6DSLAM.cpp
./include/KinectGrabber.h
./include/KinectGrabber_OpenNI.h
./src/KinectGrabber_OpenNI.cpp
./include/KinectGrabber_Rawlog.h
./src/KinectGrabber_Rawlog.cpp
./include/KinectGrabber_Rawlog2.h
./src/KinectGrabber_Rawlog2.cpp
./include/KinectGrabber_MRPT.h
./src/KinectGrabber_MRPT.cpp
./include/VisualFeatureDescriptorExtractor.h
./include/VisualFeatureDescriptorExtractor_SURF_GPU.h
./include/VisualFeatureDescriptorExtractor_Generic.h
./include/VisualFeatureDescriptorExtractor_ORB.h
./include/VisualFeatureMatcher.h
./include/VisualFeatureMatcher_Generic.h
./include/PointCloudViewer.h
./include/PointCloudViewer_MRPT.h
./src/VisualFeatureDescriptorExtractor_SURF_GPU.cpp
./src/VisualFeatureDescriptorExtractor_Generic.cpp
./src/VisualFeatureDescriptorExtractor_ORB.cpp
./src/VisualFeatureMatcher_Generic.cpp
./src/PointCloudViewer_MRPT.cpp
./include/Visual3DRigidTransformationEstimator.h
./include/Visual3DRigidTransformationEstimator_SVD.h
./src/Visual3DRigidTransformationEstimator_SVD.cpp
./include/Visual3DRigidTransformationEstimator_RANSAC.h
./src/Visual3DRigidTransformationEstimator_RANSAC.cpp
./include/ICPPoseRefiner.h
./include/ICPPoseRefiner_PCL.h
./src/ICPPoseRefiner_PCL.cpp
./include/ICPPoseRefiner_StanfordGICP.h
./src/ICPPoseRefiner_StanfordGICP.cpp
./include/Miscellaneous.h
./src/Miscellaneous.cpp
./include/FrameRGBD.h
./src/FrameRGBD.cpp
./include/PointCloudDownsampler.h
./src/PointCloudDownsampler.cpp
./include/KeyframeLoopDetector.h
./src/KeyframeLoopDetector.cpp
./include/GraphOptimizer.h
./include/GraphOptimizer_MRPT.h
./src/GraphOptimizer_MRPT.cpp
./include/GraphOptimizer_G2O.h
./src/GraphOptimizer_G2O.cpp
./include/CKinect2DRawlog.h
./src/CKinect2DRawlog.cpp
)

TARGET_LINK_LIBRARIES(Kinect6DSLAM ${MRPT_LIBS}
                   ${PCL_LIBRARIES} 
                   ${OpenCV_LIBS}
                       ${Boost_LIBRARIES}
                   #GICP
                                   ${GSL_LIBRARIES} 
                                   ${PROJECT_SOURCE_DIR}/gicp/ann_1.1.1/lib/libANN.a
                                   ${PROJECT_SOURCE_DIR}/gicp/libgicp.a
                   #G2O
                   core  math_groups types_slam3d
                           solver_csparse #You can use CPARSE or CHOLMOD
                           solver_cholmod ${CHOLMOD_LIBRARIES}
                   )

# Declare the target (an executable)
ADD_EXECUTABLE(PairwiseAlignmentSteps PairwiseAlignmentSteps.cpp
./include/KinectGrabber.h
./include/KinectGrabber_OpenNI.h
./src/KinectGrabber_OpenNI.cpp
./include/KinectGrabber_Rawlog.h
./src/KinectGrabber_Rawlog.cpp
./include/KinectGrabber_MRPT.h
./src/KinectGrabber_MRPT.cpp
./include/VisualFeatureDescriptorExtractor.h
./include/VisualFeatureDescriptorExtractor_SURF_GPU.h
./include/VisualFeatureDescriptorExtractor_Generic.h
./include/VisualFeatureDescriptorExtractor_ORB.h
./include/VisualFeatureMatcher.h
./include/VisualFeatureMatcher_Generic.h
./include/PointCloudViewer.h
./include/PointCloudViewer_MRPT.h
./src/VisualFeatureDescriptorExtractor_SURF_GPU.cpp
./src/VisualFeatureDescriptorExtractor_Generic.cpp
./src/VisualFeatureDescriptorExtractor_ORB.cpp
./src/VisualFeatureMatcher_Generic.cpp
./src/PointCloudViewer_MRPT.cpp
./include/Visual3DRigidTransformationEstimator.h
./include/Visual3DRigidTransformationEstimator_SVD.h
./src/Visual3DRigidTransformationEstimator_SVD.cpp
./include/Visual3DRigidTransformationEstimator_RANSAC.h
./src/Visual3DRigidTransformationEstimator_RANSAC.cpp
./include/ICPPoseRefiner.h
./include/ICPPoseRefiner_PCL.h
./src/ICPPoseRefiner_PCL.cpp
./include/ICPPoseRefiner_StanfordGICP.h
./src/ICPPoseRefiner_StanfordGICP.cpp
./include/Miscellaneous.h
./src/Miscellaneous.cpp
./include/FrameRGBD.h
./src/FrameRGBD.cpp
./include/PointCloudDownsampler.h
./src/PointCloudDownsampler.cpp
)

TARGET_LINK_LIBRARIES(PairwiseAlignmentSteps ${MRPT_LIBS}
                   ${PCL_LIBRARIES} 
                   ${OpenCV_LIBS}
                       ${Boost_LIBRARIES}
                   #GICP
                                   ${GSL_LIBRARIES} 
                                   ${PROJECT_SOURCE_DIR}/gicp/ann_1.1.1/lib/libANN.a
                                   ${PROJECT_SOURCE_DIR}/gicp/libgicp.a
                   )

# Set optimized building:
IF(CMAKE_COMPILER_IS_GNUCXX AND NOT CMAKE_BUILD_TYPE MATCHES "Debug")
    SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -O3 -mtune=native")
ENDIF(CMAKE_COMPILER_IS_GNUCXX AND NOT CMAKE_BUILD_TYPE MATCHES "Debug")
target_link_libraries(Kinect6DSLAM ${LIBS}) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T05:59:35.987

有件事告诉我，添加`target_link_libraries(Kinect6DSLAM ${LIBS})`会帮助你。

此外，而不是像这样的结构

```
set(VAR ${VAR} somethingelse) 
```

你可以使用这个：

```
list(APPEND VAR somethingelse) 
```

# knockout.js - 如何在 Knockout 中创建计算的可观察数组

> ID：11298816
> 
> 赞同：44
> 
> 时间：2012-07-02T18:03:15.570
> 
> 标签：knockout.js, ko.observablearray, computed-observable

我想知道如何创建一个计算的可观察数组。

在我的视图模型中，我有 2 个可观察数组，我想要一个计算的可观察数组，它只是两个数组的组合。

```
function ViewModel() {
    var self = this;
    self.listA= ko.observableArray([]);
    self.listB = ko.observableArray([]);
    self.masterList= //combine both list A and B 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-07-02T18:17:05.360

这将组合两个数组并返回组合列表。但是，它不是一个计算的可观察数组（不知道这是否可能），而是一个常规的计算可观察数组。

```
self.masterList = ko.computed(function() {
    return this.listA().concat(this.listB());
}, this); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-04-17T14:54:31.557

```
self.masterList = ko.observableArray();
ko.computed(function () {
    self.masterList(self.listA().concat(self.listB()));
}); 
```

在精神上类似于 Joe Flateau 的回答，但我喜欢认为这种方法更简单。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-05-09T15:01:36.887

我知道这是一个老问题，但我想我会在那里回答：

```
var u = ko.utils.unwrapObservable;

ko.observableArray.fn.filter = function (predicate) {
    var target = this;

    var computed = ko.computed(function () {
        return ko.utils.arrayFilter(target(), predicate);
    });

    var observableArray = new ko.observableArray(u(computed));

    computed.subscribe(function (newValue) { observableArray(newValue); });

    return observableArray;
}; 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-07-02T18:32:00.950

observableArray 只是一个具有更多属性的可观察对象。因此，在闭包中返回数组的计算 observable 将被视为数组。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-01-13T13:57:02.180

我不确定这是否是最有效的选择 - 但它相当简单并且适合我。ko.computed 返回一个 observable 数组，如下所示：

```
self.computedArrayValue = ko.computed(function() {
    var all = ko.observableArray([]);
    ....
    return all(); 
}); 
```

代码的一个工作示例：Html：

```
<div data-bind="foreach: days">
    <button class="btn btn-default btn-lg day" data-bind="text: $data, click: $root.dayPressed"></button>        
</div> 
```

视图模型上的 Javascript 函数：

```
self.days = ko.computed(function() {
    var all = ko.observableArray([]);
    var month = self.selectedMonth();   //observable
    var year = self.selectedYear();     //observable
    for (var i = 1; i < 29; i++) {
        all.push(i);
    }
    if (month == "Feb" && year % 4 == 0) {
        all.push(29);
    } else if (["Jan","Mar","May","Jul","Aug","Oct","Dec"].find((p) => p == month)) {
        [29,30,31].forEach((i) => all.push(i));
    } else if (month != "Feb") {
        [29,30].forEach((i) => all.push(i));                
    }
    return all(); 
}); 
```

# c# - 我怎样才能实例化这个类？

> ID：11298817
> 
> 赞同：4
> 
> 时间：2012-07-02T18:03:18.187
> 
> 标签：c#, instantiation

考虑这个带有泛型的声明：

```
public class BaseNode<TNode> where TNode : BaseNode<TNode>
{
    public class Node : BaseNode<Node>
    {
        public Node() { }
    }
} 
```

有没有办法`Node`从基类外部创建类的实例？我以前使用过这种模式，但总是将派生类放在基类之外。

如何在没有编译器错误的情况下编写以下内容？

```
var obj = new BaseNode<Node>.Node(); 
// error CS0246: The type or namespace name 'Node' could not be found 
```

我是否创建了一个不可实例化的类？可以通过反射初始化吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T18:10:42.333

你可以实例化那个怪物。您所要做的就是创建自己的继承自的类`Node`：

```
public class MyNode : BaseNode<MyNode>.Node
{
} 
```

然后你可以像这样实例化它：

```
BaseNode<MyNode> obj = new BaseNode<MyNode>(); 
```

但是，为什么要这样做完全是另一回事...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T18:10:49.077

添加静态工厂方法：

```
public static Node Create<T>()
{
    return // your new Node
} 
```

并这样称呼它：

```
var foo = BaseNode<Node>.Create<Node>(); 
```

# ios - 移动 Safari - translate3d 像素限制？

> ID：11298821
> 
> 赞同：1
> 
> 时间：2012-07-02T18:03:47.883
> 
> 标签：ios, mobile, css, iphone-web-app, webkit-transform

我有以下 HTML 结构

```
<body>
  <div id="graphic">
   <div id="wrap">
     <svg width="8000px" height="32000px">
      ....
     </svg>
   </div>
  </div> 
```

以下 CSS 应用于它：

```
#graphic {
  width: 768px;
  height: 1004px;
  overflow: hidden;
}

#wrap {
  width: 768px;
  height: 1004px;
  -webkit-transform: scale(1) translate3d(0, 0, 0);
} 
```

使用 CSS3 动画我想平移/缩放一个非常大的 svg 图形。它正在工作......有点。我在 iPad 上发现了一个问题，当将 translate3d 的 y 值设置为低于 ~ 16500px 时，图形不再显示（在 Safari 或 Chrome 中它工作得很好）。我认为在移动 Safari 上渲染 SVG 的高度/宽度可能存在限制，但是从 #graphic 容器中删除溢出：隐藏让我可以一直向下滚动并且它显示的所有内容都正确。

有没有人听说过或经历过类似的限制/我是否必须设置一些 CSS 值才能使整个想法生效？任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T00:45:08.603

是的，你已经达到了极限。Translate3D'd 元素必须适合 GPU 纹理内存，当您“过度或过度翻译”时，这可能会导致整个纹理被转储。请参阅[有关纹理内存限制的 Apple 文档。](http://developer.apple.com/library/ios/#documentation/3DDrawing/Conceptual/OpenGLES_ProgrammingGuide/OpenGLESPlatforms/OpenGLESPlatforms.html#//apple_ref/doc/uid/TP40008793-CH106-SW3)

# xml - WordPress 随机返回 XML（RSS 提要？）而不是网页

> ID：11298823
> 
> 赞同：1
> 
> 时间：2012-07-02T18:03:55.727
> 
> 标签：xml, wordpress, amazon-ec2, http-headers, replication

我们的一个 Wordpress 站点随机返回页面作为 XML 而不是 HTML，可能每 30-100 次左右的页面刷新中就有 1 次返回。似乎我们并不孤单：[http ://wordpress.org/support/topic/wordpress-displaying-rss-feed-instead-of-website?replies=16#post-2951783](http://wordpress.org/support/topic/wordpress-displaying-rss-feed-instead-of-website?replies=16#post-2951783)

我们在 Amazon EC2 中托管并在复制的 Web 服务器上运行该站点。

任何人都可以阐明问题和解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T01:03:14.403

我们最近在工作中遇到了这个问题，尽管这个特定的站点只是在 vanilla Apache 上提供服务：不确定这个建议是否也适用于 EC2。（我们也使用 EC2，我只是没有个人经验。）

为了进行测试，我们直接访问了 RSS 提要并检查了链接。原来 Apache 正在缓存 RSS 提要，覆盖所有 Web 请求`/*`，将它们发送到 RSS 提要。

关闭`mod_cache`似乎已经完全解决了问题。

可能对 EC2 没有帮助——可能超出了大多数人的此类问题的范围——但我会在此处添加我的答案“以防万一”。;)

# sql - SQL Server 表和类型名称相同

> ID：11298825
> 
> 赞同：-1
> 
> 时间：2012-07-02T18:04:03.593
> 
> 标签：sql, sql-server, sql-server-2012

我需要很多对表和具有相同结构的类型（对于表值参数）。在考虑正确的命名约定时，我不小心创建了两个：表和类型，具有相同的名称。即我有表 A(x int) 和类型 A(x int)。

所以……我是不是做错了什么？好像表和类型是可以区分的，T-SQL中没有可以使用“类型或表”的地方，所以代码不会有歧义，但我有点害怕使用一些东西，可能不好练习并需要建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T18:09:06.390

这没有错，但可能会被其他可能利用您的代码或接管架构的人不赞成。对其进行建模，以使它们不完全相同，即使在您的脑海中它们可能是一样的。说的容易，做的容易，但要遵循并与之保持一致。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T18:52:55.247

我希望你不是真的意思`A`。现在已经不是 70 年代了，没有理由创建这样模糊和无意义的名称。我确定这不是您真正所说的类型和表格，但我想提一下以防万一。

如果您需要区分真实表和表示完全相同结构和实体的 TVP，这确实没有问题，但您始终可以将类型重新创建为`dbo.TableName_TVP`or `dbo.TVP_TableName`- 并始终如一地使用此约定。这样，当有人遇到引用其中一个或另一个的代码时，TVP 引用会脱颖而出（因为希望 TVP 引用在您的代码中远不如对基表的引用常见）。

# excel - 如何确定两组数据之间的优化相关性？

> ID：11298827
> 
> 赞同：0
> 
> 时间：2012-07-02T18:04:12.453
> 
> 标签：excel

A列和B列下有2组数据，C1单元格有输入值。假设A列下的数据集是固定的，我们尝试在B列下的数据集上前后移动。如果C1单元格的输入值为0，那么B列上的数据集没有移动。如果 C1 单元格中的输入值为 5，则 B 列上的数据集上移 5 个单元格。如果 C1 单元格中的输入值为 -5，则 B 列上的数据集将向下移动 5 个单元格。随着 B 列的数据集向上或向下移动，两组数据之间的相关性发生了变化。我的目标是确定单元格 C1 中的优化值，因此，它将返回两组数据之间的最大相关性。有人对如何使用 Excel 以这种方式确定两组数据之间的优化相关性有任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T18:11:37.197

一种方法是在 D1 中使用以下公式：

```
=CORREL($A$1:$A$7,OFFSET($B$1,C1,0,7)) 
```

假设您在我的示例中计算了 7 个点的相关性。为了能够使用负移位，您需要从 Bxx 开始，例如 B5，以便能够向上移动多达 4 个单元格。

然后，您可以为各种情况在 C1、C2 等中输入值（例如，从 C1 中的 -5 到 C11 中的 +5），并相应地将公式拖到 D1 中。然后寻找最大值很容易，无论是查看它还是使用`MAX`函数。

# javascript - 如何在剃须刀中转义字符串？

> ID：11298828
> 
> 赞同：0
> 
> 时间：2012-07-02T18:04:12.913
> 
> 标签：javascript, razor, escaping

我有一个使用 foreach 填充的列表框。（详细解释为什么我需要这样做。）我需要转义字符串，因为 fname 和 lname 可以包含特殊字符，如 ' 或 "。

```
foreach (var cust in item.Customers)
{
    var custString = string.Format("{0}%#%{1}%#%{2}", cust.CustID, cust.LName, cust.FName);

    <option value="@custString">@cust.DisplayName</option>
} 
```

有没有办法在设置值后立即对 custString 进行 javascript 转义？或者是否有一种首选的 C# 转义方式可以很好地与 javascript 的 unescape 配合使用，我正在使用它来对这些字符进行转义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T18:18:27.297

这就是`AttributeEncode`助手所做的：

```
<option value="@Html.AttributeEncode(custString)">@cust.DisplayName</option> 
```

但是，嘿，你在做什么？**foreach 循环生成下拉列表？？？**

尝试使用`Html.DropDownListFor`助手并在为时已晚之前止血。这个助手做它的名字所暗示的。并负责编码和转义等。

所以简单地定义一个视图模型：

```
public class MyViewModel
{
    public string CustomerId { get; set; }
    public IEnumerable<SelectListItem> Customers { get; set; }
} 
```

然后继续并让您的控制器操作填充并将此视图模型传递给视图：

```
public ActionResult Index()
{
    IEnumerable<Customer> customers = ... fetch the domain model from your DAL or something
    // map to a view model:
    var viewModel = new MyViewModel
    {
        Customers = customers.Select(x => new SelectListItem
        {
            Value = x.CustID,
            Text = string.Format("{0}%#%{1}%#%{2}", x.CustID, x.LName, x.FName)
        })
    };

    // pass the view model to the view:
    return View(viewModel);
} 
```

在视图内部，当您需要生成下拉列表时，使用 DropDownListFor 助手：

```
@Html.DropDownListFor(x => x.CustomerId, Model.Customers) 
```

# php - 在特定时间后执行 PHP 代码

> ID：11298833
> 
> 赞同：4
> 
> 时间：2012-07-02T18:04:43.373
> 
> 标签：php

假设有两个 PHP 函数。

```
function first()
{

     $keyword = $this->input->post('keyword');

     //search for the result and show it to users.
     $this->search->search($keyword);

     //send the keyword to save it into the db.
     $this->second($keyword);
}

function second($keyword)
{
      //saving a search keyword in the db
} 
```

我想尽快发送结果并将搜索词保存到数据库中。

但是，我想在特定时间之后运行第二个脚本。

因为我想尽快将搜索结果提供给我的客户。

有没有办法在用户运行第一个 PHP 脚本后运行第二个 PHP 脚本？

```
* I don't want to use Cron Job
* I wanna run those two script separatly. 
* don't want to use sleep because it will stop the first script for certain times. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T18:10:09.863

您需要将它路由回您的服务器，但这种异步 php 方法工作得非常好（我已经使用它大约一年来几乎完全按照您的方式做）。

请参阅：[如何异步运行 PHP 代码](https://stackoverflow.com/questions/5905877/how-to-run-the-php-code-asynchronous)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T18:19:15.713

正如 Bob Davies 所建议的那样，我不会从 PHP 发出 Web 请求，而是在页面显示后从 html 页面发起一个新的 HTTP 请求。

例如：

1.  客户端发出 HTTP 请求（搜索）
2.  服务器获取内容并将结果返回给最终用户
3.  结果 HTML 包含一个片段，例如 <img src="empty.gif?searchterm=mysearch"/> 当浏览器呈现 html 时会启动另一个请求
4.  当另一个请求到达您的服务器时，您可以将搜索保存到数据库

当您不希望最终用户不得不等待您的指标资料时，可以使用类似的方法进行例如客户端跟踪。几点：

*   理解、实现和调试非常简单，（在我看来）在服务器端执行 HTTP 请求不是
*   它更具可扩展性
*   它不需要打开 javascript，只需一个呈现 HTML 的浏览器
*   目标可以是任何地方的任何服务器，不必从您的 Web 服务器访问，仅对最终用户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T18:16:35.923

如果您只想使用 PHP，据我所知，您可以使用`sleep()`，但它会延迟代码的执行。

我认为延迟工作的最简单方法是使用 AJAX。只需将第二个函数放在另一个 PHP 文档中并调用`XMLHTTPRequest()`or `$.ajax`（如果您想使用 jQuery），然后将代码延迟几秒钟。您可以使用`setInterval()`或`delay()`(jQuery) 来做到这一点。

简单地写

```
delay(2000).function(){
    //saving a search keyword in the db
} 
```

请记住，在这里您应该使用 AJAX 而不是 PHP 代码。

# objective-c - Objective C - 如何对 id 进行字符串化

> ID：11298840
> 
> 赞同：1
> 
> 时间：2012-07-02T18:05:06.243
> 
> 标签：objective-c, string

我需要将 div 中的关键对象与字符串进行比较。`for`我在循环中访问关键对象：

```
for (id key in _photosDic) {
    ...
} 
```

在循环中，我想将键与字符串进行比较。我必须将密钥转换为字符串吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T18:11:09.207

`id`type 可以是任何东西，所以第一步是检查它是否真的是 a`NSString`或不是。

为此，您可以使用它：

```
if ([idObject isKindOfClass:[NSString class]]) 
{
    //Now do a simple casting
    NSString *myString = (NSString *)idObject;

    //Now compare the strings
    NSComparisonResult result = [myOtherString compare:myString];
} 
```

# php - jQuery JSON 解析 - “对象未定义”

> ID：11298841
> 
> 赞同：0
> 
> 时间：2012-07-02T18:05:06.260
> 
> 标签：php, jquery, json

目前第一次使用 JSON 并且没有 jQuery 经验。我有这个函数在 $.ajax 请求的“成功”时触发：

```
function(data) {

    $.each(data.notifications, function(notifications) {
        alert('New Notification!');
    });

} 
```

但是，我在萤火虫控制台中收到一个错误，指出“对象未定义”“长度 = object.length”。

JSON 响应是：

```
["notifications",[["test would like to connect with you",{"Accept":"\/events\/index.php\/user\/connection?userId=20625101&action=accept","Decline":"\/events\/index.php\/user\/connection?userId=20625101&action=decline"}]]] 
```

我猜这与`[]`s 的数量有关，但 JSON 是由 PHP 使用 json_encode() 编码的

任何帮助，将不胜感激！

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T18:08:12.233

您的 PHP 响应实际上应该是：

```
{
    "notifications": [
       ["test would like to connect with you",
        {
           "Accept":"\/events\/index.php\/user\/connection?userId=20625101&action=accept",
           "Decline":"\/events\/index.php\/user\/connection?userId=20625101&action=decline"
        }
       ]
    ]
} 
```

请注意，上面的，`notification`是字符串表示的对象内部的一个字段。这将允许您以使用`$.each(..)`.

* * *

您正在做的方式是拥有一个数组（注意响应中的初始`[`和最后一个）。`]`错误是因为`$.each`调用`data.notification.length`where `.length`is an operation on undefined。

* * *

PHP 端代码应该如下所示：

```
echo json_encode(array("notifications" => $notifications)); 
```

而不是（我的猜测）：

```
echo json_encode(array("notification", $notifications)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T18:09:28.767

你所拥有的是一个 JSON 数组。我猜你正在寻找这样的东西：

```
{
    "notifications": [
        ["test would like to connect with you",
        {
            "Accept": "\/events\/index.php\/user\/connection?userId=20625101&action=accept",
            "Decline": "\/events\/index.php\/user\/connection?userId=20625101&action=decline"
        }]
    ]
} 
```

虽然我认为更好的结构是：

```
{
    "notifications": [
        {
            "message": "test would like to connect with you",
            "Accept": "\/events\/index.php\/user\/connection?userId=20625101&action=accept",
            "Decline": "\/events\/index.php\/user\/connection?userId=20625101&action=decline"
        }
    ]
} 
```

这种方式`notification`成为对象的属性，这意味着您可以通过`data.notifications`. 否则，您必须通过`data[1]`(`data[0]`将包含基本上变得毫无意义的字符串“通知”) 访问通知。

以下示例应该让您了解如何在 PHP 中设置数据：

```
<?php
  $array = array(
      "notifications" => array(
          array(
              "message" => "Test would like to connect with you",
              "Accept" => "/events/index.php/user/connection?userId=20625101&action=accept",
              "Decline" => "/events/index.php/user/connection?userId=20625101&action=decline"
          )
      )
  );

  echo json_encode($array);
?> 
```

# java - JAVA - 数组越界错误

> ID：11298842
> 
> 赞同：0
> 
> 时间：2012-07-02T18:05:11.413
> 
> 标签：java, arrays, file, exception, text

我的逻辑有问题，我会很感激一些指示。当我尝试遍历目录中的文件数组并将以 .txt 结尾的文件存储在另一个数组中时，我的代码会产生数组越界异常。

我认为我的问题是所有文件的数组都大于 txt 文件的数组，这似乎是错误的最合乎逻辑的原因。问题是我不知道为什么它在第二个循环中找到更多的 txt 文件而不是第一个。

这是代码：

```
public static void ListFiles(String file_dir) {
        String files;
        int txtCounter = 0;

        File folder = new File(file_dir);
        File[] listOfFiles = folder.listFiles(); 

        //Count all txt files
        for (int y = 0; y < listOfFiles.length; y++) {
            if (listOfFiles[y].isFile()) {
                files = listOfFiles[y].getName();
                if (files.endsWith(".txt") || files.endsWith(".TXT")) {
                    txtCounter++;//Add to the count
                }
            }
        }

        //Create array for the list of txt files.
        String txtFiles[] = new String[txtCounter];

        for (int i = 0; i < listOfFiles.length; i++) {
            if (listOfFiles[i].isFile()) {
                files = listOfFiles[i].getName();
                if (files.endsWith(".txt") || files.endsWith(".TXT")) {
                    //Add all txt files to new array txtFiles
                    txtFiles[i] = folder + files;                   
                    System.out.println(txtFiles[i]);
                }
            }
        }

        //Send array back to Main
        //return txtFiles[];
    } 
```

我是否让这变得比它必须的更难？我正在尝试获取文本文件列表，替换文件中的某些单词，并在完成后将它们全部合并到一个文件中。

谢谢！

更新：

```
public static String[] ListManualSections(String file_dir) {
    file_dir = file_dir + "\\manualSections\\";

    String files;

    //Create list of all files in the manualSections directory.
    File folder = new File(file_dir);
    File[] listOfFiles = folder.listFiles(); 

    //Dynamic list of text files
    ArrayList al = new ArrayList();

    //Add each occurrence of a text file to the ArrayList
    for (int i = 0; i < listOfFiles.length; i++) {
        files = listOfFiles[i].getName();
        if (listOfFiles[i].isFile() && files.toLowerCase().endsWith(".txt")) {
            al.add(folder + "\\" + files);
            //System.out.println(al);
        }
    }

    //Send list back to Main
    String[] txtFiles = (String[]) al.toArray(new String[al.size()]);
    return txtFiles;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T18:07:11.477

第二个`for`循环似乎对它是迭代 over`txtFiles`还是 over感到困惑`listOfFiles`，这可能有不同的长度。特别是，您可能不应该写入`txtFiles[i]`when`i`可能大于`txtFiles`.

不过，大多数情况下，如果您只使用`ArrayList`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T18:12:02.253

除了@Louis 的答案之外，您还可以为文件和 txt 文件使用单独的计数器。像这样：

```
int txtidx = 0;
for (int i = 0; i < listOfFiles.length; i++) {
    if (listOfFiles[i].isFile()) {
        files = listOfFiles[i].getName();
        if (files.endsWith(".txt") || files.endsWith(".TXT")) {
            //Add all txt files to new array txtFiles
            txtFiles[txtidx] = folder + files;                   
            System.out.println(txtFiles[txtidx]);
            txtidx++;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T18:10:56.167

而不是使事情复杂化，你可以这样做

使用[Apache Commons io](http://commons.apache.org/io/)列出所有文件

```
 Collection<File> files = FileUtils.listFiles(new File("file_dir"), new String[]{"txt"}, true); 
```

//如果你希望它是递归的，使用true，即搜索file_dir的子目录

```
for (File file : files)
{
    //you can then play with your file object here
} 
```

如果您有问题，请告诉我。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T18:49:48.777

您可以简单地使用 File.listFiles(FileNameFilter) 来获取符合您条件的文件。

```
private File[] getTextFiles(String dir)
{
    File folder = new File(dir);

    return folder.listFiles(new FilenameFilter() {
        @Override
        public boolean accept(File dir, String name) {
            return name.toLowerCase().endsWith(".txt");
        }           
    });
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-02T18:10:42.363

你让这变得比它必须的更难。

您传递一个数组一次以计算有多少文本文件，然后第二次将文本文件添加到另一个数组。

接口的任何实现者[`List<E>`](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)都比数组更合适；然后，您可以即时添加元素。如果你之后*必须*有一个数组。你总是可以`toArray`在最后使用该方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-02T18:12:59.933

那么看看这个场景 -

listOfFiles 的大小为 6，第一次循环找到 5 个 txt 文件，listOfFiles 中的最后一个元素是一个 txt 文件。

然后在第二个循环的最后一次迭代中，您尝试执行 txtFiles[5] = folder+files. 这将引发错误，因为 txtFiles 只有 0-4。

就像 Louis 说的，使用 ArrayList。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-03T19:53:31.973

您的第二个 for 循环遍历所有文件，这意味着 i = 0 .. N 其中 N 是文件总数。但是您的文本文件可能出现在任何 i 此处。因此，即使只有 2 个文本文件，如果在 N 个总文件的第 6 次迭代中找到它们，那也不是您要用于文本文件数组的索引。

我建议您为文本文件数组的索引创建一个计数器，并在添加时递增它，或者使用列表。

```
String txtFiles[] = new String[txtCounter];
int txtIndex = 0;

for (int i = 0; i < listOfFiles.length; i++) {
    if (listOfFiles[i].isFile()) {
        files = listOfFiles[i].getName();
        if (files.endsWith(".txt") || files.endsWith(".TXT")) {
            //Add all txt files to new array txtFiles
            txtFiles[txtIndex] = folder + files;
            txtIndex++;                   
            System.out.println(txtFiles[i]);
        }
    }
} 
```

# ruby-on-rails - Delayed_job 索赔数据库不存在

> ID：11298844
> 
> 赞同：0
> 
> 时间：2012-07-02T18:05:16.487
> 
> 标签：ruby-on-rails, delayed-job

我已经设置了delayed_job，它在开发中运行良好。

但是，每当我尝试在生产环境下运行脚本并运行

```
RAILS_ENV=production script/delayed_job start 
```

我明白了：

```
/Users/simon/.rvm/gems/ruby-1.9.2-p290/gems/activerecord-3.2.1/lib/active_record/connection_adapters/postgresql_adapter.rb:1161:in `initialize': FATAL:  database "myapp_production" does not exist (PG::Error) 
```

感觉就像我在这里遗漏了一些非常基本的东西（从我收集的信息来看，它正在我的本地机器上寻找生产数据库？），但我对在哪里寻找以及可能导致这个问题的原因有点困惑。

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T18:18:04.160

嗯，这很明显——你在生产环境中启动你的 dj，所以它会尝试连接到`config/database.yml`. 看来您还没有创建这个数据库。

在终端中创建这个数据库

```
RAILS_ENV=production bundle exec rake db:create 
```

# .net-4.0 - 在不影响任何参考的情况下将框架 4.0 更改为 2.0

> ID：11298845
> 
> 赞同：0
> 
> 时间：2012-07-02T18:05:20.037
> 
> 标签：.net-4.0, reference, .net-2.0

我在 4.0 框架中开发了一个 Windows 应用程序。部署我的应用程序后，我尝试将它安装在 Windows XP SP2 系统中，但是当我尝试它时，我得到了某种**需求错误**。所以我决定将我的应用程序从 4.0 更改为 2.0 框架，以便它可以安装在任何 Windows 操作系统中。在此之前我尝试使用 3.5 和 3.0，但框架的设置大小超过 200mb，所以我选择了 2.0，因为它已经与 windows xp 或更高版本一起提供。我遇到的问题是在将我的框架从 4.0 更改为 2.0 时，我遇到了参考问题，`system.core`所以`system.linq`现在我无法构建我的项目。需要做什么来修复这些参考错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T18:10:23.367

问题是`System.Linq`，例如，.NET 2 中不存在 .NET。如果您使用任何需要`System.Linq`方法（例如 LINQ 或任何扩展方法），则必须重写该部分代码以使用 .NET 2 唯一的选择。

就个人而言，我只会针对 .NET 3.5sp1 或 .NET 4，并包含 Web 安装程序，因为这是对您的部署的一个小补充（[4.0 Web 安装程序](http://www.microsoft.com/en-us/download/details.aspx?id=17851)小于 1mb - 许多安装程序包含一种仅打包它而不是完整的框架）。大多数系统已经具有 .NET 3.5sp1（并且许多具有 4.0），因此在部署中包含它的工作通常远小于尝试重新设计应用程序以避免它。

# r - 将实际使用的因子组合 (INDICES) 传递给 by 子句的内部函数/访问 by 对象的属性

> ID：11298854
> 
> 赞同：1
> 
> 时间：2012-07-02T18:06:14.273
> 
> 标签：r

如何在`by()`通话中访问实际使用的因子组合？我想绘制 dbscan (fpc-package) 的结果并将相应的因子组合添加到绘图标题中。输出属于“by”类。`attributes(res.lst)`分别使用`attr(res.lst,"dimnames")`给我一个全局列表。我无法将其映射到单独使用的数据子集。那么`by`函数如何“知道”哪个组合实际用于哪个子集。这些信息存储在哪里？

我试图做一个简单的例子（跳过 dbscan）来说明所需的输出应该是什么样子。有什么帮助吗？如果可能的话，我想坚持使用基础 R。

```
dat <- data.frame(x=rnorm(1000), y=rnorm(1000), fac1=rep(c("L1", "L2"), 500), fac2= as.factor(c(rep(1, 5), rep(2, 5) )) ) # dummy data
# dummy plot function
fun.plot <- function(data, factorcomb=NA) { 
  if (is.na(factorcomb)==T) {
    ttl <- "Standard"
  } else { 
    ttl <- paste("factor combination: ", paste(factorcomb, collapse="+"))
  }
  dev.new()
  plot(data$x, data$y, main=ttl) 
}
res.lst <- by(data=dat, INDICES=dat[ ,colnames(dat[ , c(3,4)]) ], function(splt) fun.plot(splt) )

# desired result
for (f1 in levels(dat$fac1) ) {
  for (f2 in levels(dat$fac2) ) {
    fun.plot(dat[ which( dat$fac1==f1 & dat$fac2==f2), 1:2 ], factorcomb=c(f1,f2) )
   }
} 
```

*编辑：*这是我原始函数的调用。

```
 # by(data=adat, INDICES=adat[ ,colnames(adat[ ,c(36,41) ]) ], FUN=fun.dbscan, factornames=colnames(adat[ ,c(36,41) ])) 
```

控制台上的输出如下所示：

```
PeakTemp: 250 # Factor 1 (column number 36) + Level
BGANr: BGA196_01 #Factor 2 (column number 41) + Level
dbscan Pts=1551 MinPts=12 eps=0.015
          0  1
seed      0 17
border 1534  0
total  1534 17
etc... 
```

我想将实际使用的因子组合传递给 fun.dbscan 函数。在这种情况下，它将是具有 250 级和 BGANr BGA196_01 的 PeakTemp

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T18:16:54.090

也许你让这比你需要的更复杂？尝试这样的事情：

```
fun.plot <- function(data) { 
  ttl <- paste("factor combination: ", paste(unique(data$fac1),unique(data$fac2), sep="+"))
  dev.new()
  plot(data$x,data$y,main=ttl) 
}
res.lst <- by(data=dat, INDICES=dat[ ,colnames(dat[ ,c(3,4) ]) ], function(splt) fun.plot(splt) ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T12:55:11.777

这类似于@joran 所做的，但有点不同。

```
fun.plot <- function(data) {
  #change 3:4 if you have more variables
  factorcomb <- as.character(sapply(data[, 3:4], FUN = unique)) 
  ttl <- paste("factor combination: ", paste(factorcomb, collapse="+"))
  dev.new()
  plot(data$x, data$y, main=ttl) 
}
res.lst <- by(data = dat, INDICES = dat[ , 3:4], FUN = fun.plot) 
```

*编辑*

如果您想传递自定义级别名称（例如`nms`），您可以尝试使用`mapply`. 你可以摆弄`ttl`你想要的格式，比如用空格替换点。

```
dat <- data.frame(x=rnorm(1000), y=rnorm(1000), fac1=rep(c("L1", "L2"), 500), fac2= as.factor(c(rep(1, 5), rep(2, 5) )) ) # dummy data
dat.split <- split(dat, dat[, 3:4])
nms <-names(dat.split)

fun.plot <- function(data, custom.names) {
  ttl <- paste("factor combination: ", custom.names)
  dev.new()
  plot(data$x, data$y, main=ttl) 
}
mapply(fun.plot, dat.split, nms) 
```

# macos - 如何解压和打包 pkg 文件？

> ID：11298855
> 
> 赞同：110
> 
> 时间：2012-07-02T18:06:21.617
> 
> 标签：macos, pkg-file

我有一个由 Install Maker for Mac 创建的 pkg 文件。我想替换 pkg 中的一个文件。但我必须在 Linux 系统下这样做，因为这是下载过程的一部分。当用户开始下载文件服务器时，必须替换 pkg 中的一个文件。我有一个解决方案如何解压缩 pkg 并替换文件，但我不知道如何再次打包到 pkg。 [http://emresaglam.com/blog/1035](http://emresaglam.com/blog/1035) [http://ilostmynotes.blogspot.com/2012/06/mac-os-x-pkg-bom-files-package.html](http://ilostmynotes.blogspot.com/2012/06/mac-os-x-pkg-bom-files-package.html)

* * *

## 回答 #1

> 赞同：200
> 
> 时间：2012-07-02T19:23:15.533

包只是具有不同扩展名和指定文件层次结构的 .xar 档案。不幸的是，该文件层次结构的一部分是实际可安装文件的 cpio.gz 存档，通常这就是您要编辑的内容。还有一个 Bom 文件，其中包含有关该 cpio 存档中文件的信息，以及一个 PackageInfo 文件，其中包含摘要信息。

如果您确实只需要编辑其中一个信息文件，那很简单：

```
mkdir Foo
cd Foo
xar -xf ../Foo.pkg
# edit stuff
xar -cf ../Foo-new.pkg * 
```

但如果您需要编辑可安装文件：

```
mkdir Foo
cd Foo
xar -xf ../Foo.pkg
cd foo.pkg
cat Payload | gunzip -dc |cpio -i
# edit Foo.app/*
rm Payload
find ./Foo.app | cpio -o | gzip -c > Payload
mkbom Foo.app Bom # or edit Bom
# edit PackageInfo
rm -rf Foo.app
cd ..
xar -cf ../Foo-new.pkg 
```

我相信您可以获得大多数 linux 发行版的 mkbom（和 lsbom）。（如果你能同上，那会让事情变得更容易，但我不确定这是否几乎无处不在。）

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2014-05-30T09:00:50.353

[这是一个受abarnert 回答](https://stackoverflow.com/a/11299907/191246)启发的 bash 脚本，它将一个名为的包解压缩`MyPackage.pkg`到一个名为的子文件`MyPackage_pkg`夹中，然后在 Finder 中打开该文件夹。

```
 #!/usr/bin/env bash
    filename="$*"
    dirname="${filename/\./_}"
    pkgutil --expand "$filename" "$dirname"
    cd "$dirname"
    tar xvf Payload
    open . 
```

用法：

```
 pkg-upack.sh MyPackage.pkg 
```

> 警告：这并非在所有情况下都有效，并且会因某些文件而失败，例如 OSX 系统安装程序中的 PKG。如果您想窥视 pkg 文件并查看其中的内容，可以尝试[SuspiciousPackage](http://www.mothersruin.com/software/SuspiciousPackage/)（免费应用程序），如果您需要更多选项（例如选择性解压缩特定文件），请查看[Pacifist](https://www.charlessoft.com/)（nagware）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-27T10:02:28.177

除了@abarnert 所说的之外，我今天不得不发现，`cpio`Mountain Lion 上的默认实用程序默认使用不同的存档格式（不确定是哪种），即使手册页说明它将使用旧的 cpio/odc 格式。因此，如果有人`cpio read error: bad file format`在尝试安装他/她操纵的软件包时偶然发现该消息，请确保在重新打包步骤中包含格式：

```
find ./Foo.app | cpio -o --format odc | gzip -c > Payload 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-01-09T15:39:55.837

@shrx 我已经使用“pbzx”命令成功解压了 BSD.pkg（Yosemite 安装程序的一部分）。

`pbzx <pkg> | cpio -idmu`

“pbzx”命令可以从以下链接下载：

*   [pbzx 流解析器](http://www.tonymacx86.com/general-help/135458-pbzx-stream-parser.html "pbzx 流解析器")

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-01-11T18:01:29.417

你可能想看看我在`pbzx`这里的叉子：[https ://github.com/NiklasRosenstein/pbzx](https://github.com/NiklasRosenstein/pbzx)

它允许您流式传输未包装在 XAR 存档中的 pbzx 文件。我在最近的 XCode 命令行工具磁盘映像（例如 10.12 XCode 8）中体验过这一点。

```
pbzx -n Payload | cpio -i 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-02-24T19:00:36.457

如果您在 PKG 安装过程中按照接受的答案遇到错误，我将为您提供另一个对我有用的过程（请注意 xar、cpio 和 mkbom 命令的微小变化）：

```
mkdir Foo
cd Foo
xar -xf ../Foo.pkg
cd foo.pkg
cat Payload | gunzip -dc | cpio -i
# edit Foo.app/*
rm Payload
find ./Foo.app | cpio -o --format odc --owner 0:80 | gzip -c > Payload
mkbom -u 0 -g 80 Foo.app Bom # or edit Bom
# edit PackageInfo
rm -rf Foo.app
cd ..
xar --compression none -cf ../Foo-new.pkg 
```

生成的 PKG 将没有压缩，cpio 现在使用 odc 格式并指定文件的所有者以及 mkbom。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-11-06T22:59:15.997

用于提取 pkg 的 Bash 脚本：（受此答案启发：[https](https://stackoverflow.com/a/23950738/16923394) ://stackoverflow.com/a/23950738/16923394 ）

将以下代码保存到 $HOME/Downloads 文件夹中名为 pkg-upack.sh 的文件中

```
#!/usr/bin/env bash
    filename="$*"
    dirname="${filename/\./_}"
    mkdir "$dirname"
    # pkgutil --expand "$filename" "$dirname"
    xar -xf "$filename" -C "$dirname"
    cd "$dirname"/*.pkg
    pwd
    # tar xvf Payload
    cat Payload | gunzip -dc |cpio -i
    # cd usr/local/bin
    # pwd
    # ls -lt
    # cp -i * $HOME/Downloads/ 
```

如果您使用的是 rudix 包，请取消注释最后四行。

用法：

```
 cd $HOME/Downloads
    chmod +x ./pkg-upack.sh
    ./pkg-upack.sh MyPackage.pkg 
```

这是使用来自 rudix.org ( [https://rudix.org](https://rudix.org) ) 的 ffmpeg 和 mawk 包进行测试的，在此站点上搜索 ffmpeg 和 mawk 包。

来源：我的开源项目：[https ://sourceforge.net/u/nathan-sr/profile/](https://sourceforge.net/u/nathan-sr/profile/)

# java - Java中的语法检查

> ID：11298856
> 
> 赞同：15
> 
> 时间：2012-07-02T18:06:23.817
> 
> 标签：java, syntax-checking

我目前正在开发一个具有嵌入式文本编辑器的程序。用户应该在编辑器中键入 java 代码。然后将输入编辑器的代码变成一个字符串。我只想要一些可以检查缺少括号或尝试没有捕获等的东西。它不需要编译。我环顾四周，但我还是编程新手，无法实现一些更难的东西。

所以为了让它更短：我正在寻找一些 java 包来分析语法错误的代码。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-02T19:01:03.980

从 Java 6 开始，您可以使用[JavaCompiler](http://docs.oracle.com/javase/6/docs/api/javax/tools/JavaCompiler.html)编译文本并返回[诊断](http://docs.oracle.com/javase/6/docs/api/index.html?javax/tools/Diagnostic.html)对象，这些对象会告诉您文件存在哪些问题（如果有）。因此，对于您的示例，您需要获取编辑器的内容并将其传递给 JavaCompiler，运行它并报告任何问题。下面的示例假定将编辑器文本写入文件。

示例代码：

**要检查的文件**

```
public class HelloBuggyWorld {
    String test // missing a semicolon

    public static void main (String [] args) {
        System.out.println('Hello World!');  // should be double quoted
    }
} 
```

**检查器**

```
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Formatter;
import java.util.List;
import java.util.Locale;

import javax.tools.Diagnostic;
import javax.tools.DiagnosticCollector;
import javax.tools.JavaCompiler;
import javax.tools.JavaFileObject;
import javax.tools.StandardJavaFileManager;
import javax.tools.ToolProvider;

public class JavaSyntaxChecker {
    public static void main(String[] args) {
        System.out.println(JavaSyntaxChecker.check("/path/to/HelloBuggyWorld.java"));
    }

    public static List<String> check(String file) {
        JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();

        StandardJavaFileManager fileManager = compiler.getStandardFileManager(null, null, null);
        Iterable<? extends JavaFileObject> compilationUnits =
                fileManager.getJavaFileObjectsFromStrings(Arrays.asList(file));

        DiagnosticCollector<JavaFileObject> diagnostics = new DiagnosticCollector<JavaFileObject>();
        compiler.getTask(null, fileManager, diagnostics, null, null, compilationUnits).call();

        List<String> messages = new ArrayList<String>();
        Formatter formatter = new Formatter();
        for (Diagnostic diagnostic : diagnostics.getDiagnostics()) {
            messages.add(diagnostic.getKind() + ":\t Line [" + diagnostic.getLineNumber() + "] \t Position [" + diagnostic.getPosition() + "]\t" + diagnostic.getMessage(Locale.ROOT) + "\n");
        }

        return messages;
    }
} 
```

**输出**

从运行`main`方法。

```
[ERROR:  Line [5]    Position [124] HelloBuggyWorld.java:5: unclosed character literal
, ERROR:     Line [5]    Position [126] HelloBuggyWorld.java:5: ';' expected
, ERROR:     Line [5]    Position [131] HelloBuggyWorld.java:5: not a statement
, ERROR:     Line [5]    Position [136] HelloBuggyWorld.java:5: ';' expected
, ERROR:     Line [5]    Position [137] HelloBuggyWorld.java:5: unclosed character literal
] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T18:38:41.977

您可以查看[Beanshell](http://www.beanshell.org/)解释器。它可以解释 Java 代码（完整的源文件和代码片段）并报告语法错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T13:00:29.717

您可以使用[JDT](http://www.eclipse.org/jdt/)来解析和分析源代码。

那是斯卡拉的例子。用 java 做同样的事情很容易：

```
val str = "..." // Checking source code
val parser : ASTParser = ASTParser.newParser(org.eclipse.jdt.core.dom.AST.JLS3)    
val options = JavaCore.getOptions.asInstanceOf[java.util.Map[Object, Object]]
options.put(JavaCore.COMPILER_COMPLIANCE, JavaCore.VERSION_1_7)
options.put(JavaCore.COMPILER_CODEGEN_TARGET_PLATFORM, JavaCore.VERSION_1_7)
options.put(JavaCore.COMPILER_SOURCE, JavaCore.VERSION_1_7)
parser.setCompilerOptions(options)
parser.setSource(str.toCharArray)
val cu: CompilationUnit = parser.createAST(null).asInstanceOf[CompilationUnit] 
```

CompilationUnit 有方法 getProblems()。它返回详细问题报告的列表。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-02T18:59:17.823

假设您想验证用户是否输入了语法正确的 java 代码，那么您可以直接从程序中调用 javac 编译器。

```
public int com.sun.tools.javac.Main.compile(String[] args); 
```

您的类路径中需要 tools.jar。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-02T18:14:18.417

[这在Eclipse](http://www.eclipse.org/)和[Netbeans](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=3&sqi=2&ved=0CHAQjBAwAg&url=http%3A%2F%2Fnetbeans.org%2Fcommunity%2Freleases%2F71%2F&ei=5OTxT5a4CsnY2QWJoOCgCg&usg=AFQjCNFoKnmL8q9JeI0GTxyAVZCD4K1zQA)中是相当标准的。

如果你想要一个漂亮、简单的带括号检查的编辑器，我会投票给[Sublime text](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&sqi=2&ved=0CFgQFjAA&url=http%3A%2F%2Fwww.sublimetext.com%2F&ei=zOTxT9q-OYWM2gWlp42-Bw&usg=AFQjCNHeDtH9qLiUebuy99ldU-zJxasqGg)。

# php - 在 PHP Designer 8 中自动包装函数

> ID：11298861
> 
> 赞同：1
> 
> 时间：2012-07-02T18:06:59.360
> 
> 标签：php, phpdesigner

当我开始在 OOP 中工作时，我构建了很多类和函数，我希望自动包装每个函数并在我喜欢的时候进行扩展。

PHP Designer 8 有可能吗？我是 jEdit 用户，PHP Designer 是否支持它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T14:14:08.580

标题中您的问题的答案是`CTRL`+ `R`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T14:59:28.427

您的问题的答案是否定的... PHPDesigner 不支持代码的选择性包装，直到至少 8.1 版...此表将为您提供 PHP 编辑器之间的功能组合

[https://docs.google.com/spreadsheet/ccc?key=0Agccij5yGAXacFY4WHlVU1VPTTdFVDA3cm40bjdOWUE#gid=0](https://docs.google.com/spreadsheet/ccc?key=0Agccij5yGAXacFY4WHlVU1VPTTdFVDA3cm40bjdOWUE#gid=0)

`Ctrl`+让你`R`得到的是自动换行，你甚至可以在记事本中得到它（没有 ++）......

# spring - Spring Tiles 集成错误

> ID：11298863
> 
> 赞同：1
> 
> 时间：2012-07-02T18:07:13.690
> 
> 标签：spring

我正在尝试将 Tiles 3.0.0 与 Spring 3.1 集成，我的 lib 文件夹下有所有 tile jar 文件。当我运行 web 项目时，我得到一个

```
java.lang.ClassNotFoundException: org.apache.tiles.startup.BasicTilesInitializer 
```

错误。我需要一些帮助来理解为什么我会收到这个错误。这是我在 servlet.xml 页面中设置的配置。

```
<bean class="org.springframework.web.servlet.view.tiles2.TilesViewResolver" />

<bean class="org.springframework.web.servlet.view.tiles2.TilesConfigurer">
    <property name="definitions">
        <list>
            <value>/WEB-INF/views/**/views.xml</value>
        </list>
    </property>
</bean> 
```

这是一个很像我的问题[link](https://stackoverflow.com/questions/5003995/spring-3-mvc-and-apache-tiles-2-integration-error)，但我的构建路径中已经有了我的 tiles-core-3.0.0 。所以我只需要一些帮助来理解如何克服这个错误。

摩根

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T20:45:56.257

在撰写本文时，Spring 仍然不支持 Tiles 3。我使用的是 Spring 3.1.2，并且必须将 Tiles 降级回 2.2.2 版本才能运行我的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-19T15:04:42.263

我已经制作了一个使用 Spring Framework 版本 3.2.13.RELEASE 和 Tiles-3（版本 3.0.5）的程序。您需要使用以下配置

```
<bean id="tilesConfigurer"
class="org.springframework.web.servlet.view.tiles3.TilesConfigurer">
        <property name="definitions">
            <list>
                <value>/WEB-INF/tiles/tiles-definitions.xml</value>
            </list>
        </property>
</bean> 
```

有依赖

```
<dependency>
    <groupId>org.apache.tiles</groupId>
    <artifactId>tiles-extras</artifactId>
    <version>3.0.5</version>
</dependency>
<!-- Spring Web MVC -->
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-webmvc</artifactId>
    <version>3.2.13.RELEASE</version>
</dependency> 
```

我认为这就是你想要达到的目标。在我的情况下它工作正常！

# selenium - 将 JUnit 中的类别与参数化测试与 selenium rc 一起使用

> ID：11298867
> 
> 赞同：0
> 
> 时间：2012-07-02T18:07:22.863
> 
> 标签：selenium, junit, categories

我目前有一组单元测试，它们使用 JUnit 中内置的参数化测试工具运行。由于我不想为每个测试用例创建一个新的 Selenium 实例（我宁愿登录、导航到屏幕并运行一组测试），我正在寻找可以自动化测试的其他选项。

我想在不同的类中设置不同的测试，它们都利用相同的测试方法。我发现 JUnit 也提供了类别，但是因为这似乎是设置 TestSuite 的一种方式，我不确定这是否会有所帮助。

我想一个简短的问题是，如果我有一堆硒测试分散到不同的类，有没有办法让这些测试在其他地方指定的一种测试方法中运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T06:44:19.173

您可以在那里在 Junit 中创建测试套件，您可以编写包含您的测试的不同类。在 Junit 4 中，测试服是这样写的。

```
import org.junit.runners.Suite;

@RunWith(Suite.class)
@Suite.SuiteClasses({TestClass1.class, TestClass2.class})
public class TestSuite {
//nothing
} 
```

# ruby-on-rails - 在 Rails 中配置具有多态关联的路由

> ID：11298872
> 
> 赞同：0
> 
> 时间：2012-07-02T18:07:45.523
> 
> 标签：ruby-on-rails, ruby

在我的 Rails 应用程序中，我有用户、学校和课程模型。我已经建立了一个多态关联，以便用户和学校有许多课程可以托管，并且课程属于_to 可托管。我的路线如下所示：

```
 resources :users do
    resources :courses
  end

 resources :schools do
   resources :courses 
 end 
```

我的学校控制器中的节目如下所示：

```
def show
  @school = School.find(params[:id])
  @user = current_user.schools.find_by_user_id(params[:user_id])
  @title = @school.school_name
  @hostable = @school
  @courses = @hostable.courses
  @course = Course.new
end 
```

在学校和用户展示页面中呈现的课程部分如下所示：

```
<div id="courses">
 <% @courses.each do |course| %>
  <div class="course">
<%= simple_format course.title %>
    <%= simple_format course.description %>
  </div>
 <% end %>
</div> 
```

现在我只有学校视图配置为简单地列出课程标题和描述。我想做的是在学校的显示页面上列出学校的所有课程，而不是只显示课程标题的文本，我希望课程标题是一个链接，重定向到课程页面。有什么建议么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T18:48:48.930

您需要定义一个路由`config/routes.rb`才能以这种方式链接到嵌套资源。如果您还没有路线，这将为您提供路线：

```
resources :schools do
  resources :courses
end 
```

您可以运行`rake routes`以获取所有路线的列表。在我的示例中，您将获得一个`school_courses`列表。然后你可以`link_to course.title, school_courses_path(@hostable, course)`像 Wawa Loo 指出的那样做一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T18:22:53.483

```
<%= link_to course.title, school_course_path(@hostable, course) %> 
```

# wordpress - Wordpress 菜单编辑器

> ID：11298879
> 
> 赞同：0
> 
> 时间：2012-07-02T18:08:24.150
> 
> 标签：wordpress, web

是否有插件可以改进 Wordpress 中的标准菜单编辑器？例如，我需要更改菜单项的属性“rel”和“class”，而不仅仅是“title”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T18:34:15.413

它已经存在于 WordPress 中。无需外部插件。

1.  转到仪表板 -> 外观 -> 菜单
2.  单击左上角的屏幕选项按钮以查看高级选项。
3.  现在选择`CSS classes`和`Link Relationship`显示高级菜单属性。![在此处输入图像描述](../Images/c9969ca5c98d912c34c258ec00841f06.png)
4.  现在每个菜单都会出现 2 个新框。只需添加您的自定义类并在那里。

就这样。干杯！！！

# php - 在 PHP 中迭代日期时的效率

> ID：11298883
> 
> 赞同：3
> 
> 时间：2012-07-02T18:08:41.860
> 
> 标签：php, performance

此应用程序的目的是以最有效的方式安排车间中的大量机器。该过程是递归的，组装时间表和测量效率。这可行，但实际上需要几天才能运行。一个重要的时间消耗是下面的代码块：

```
foreach($machines AS $machine) {
# To begin, we analyze the schedule thus far to get this machine's existing schedule.
    $machSched = array();
    foreach($schedule AS $booking) {
        if($booking['mach']==$machine && strtotime($booking['end']) > date('U')) {
            $machSched[] = $booking;
        }
    }
    # We seek the next time the machine can be booked.  We begin by sorting its current bookings.
    aasort($machSched, 'start');
    # Now we construct the list of available times
    $lastEnd = date('U');
    $freeTimes=array();
    foreach($machSched AS $booking) {
        if(strtotime($booking['start']) > $lastEnd) $freeTimes[] = array('start' => $lastEnd, 'end' => strtotime($booking['start']));
        $lastEnd = strtotime($booking['end']);
    }
    $freeTimes[] = array('start' => $lastEnd, 'end' => strtotime('2030-12-31'));
    # Now we go through each available timeslot to see what we can book.
    foreach($freeTimes AS $slot) {
                   // Scheduling stuff here...
    }
} 
```

此块迭代每台机器的现有计划时间，对其进行排序，并创建一个“空闲槽”数组（现有计划项目之间的时间。我已经优化和优化了这个程序，但我似乎无法提出有一个更好的方法来做这件小事。注意 aasort 是一个通过关联数组中的键对关联数组进行排序的函数。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T18:35:44.040

如果您知道日期的存储格式，您可能应该使用[strptime](http://php.net/strptime)而不是[strtotime](http://php.net/strtotime)。使用 strtotime 意味着每次调用都必须独立确定日期的格式，因此您必须在每个循环中考虑该诊断。这可能是一个显着的差异。

我的简单基准测试表明，这`time()`大约比 . 快一个数量级`date('U')`，比 .`strptime()`快 5 倍`strtotime()`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T18:34:21.057

你做了很多时间转换（ date() 和 strftotime() ），但是你可以使用 time() 和 $booking['start'] 和 $booking['end'] 一个简单的数字中的设置来避免所有这些工作。

添加

当然，您可以在临时变量中缓存所有“常量”值：date('U')、strtotime('2030-12-31'))。

# javascript - 选择选项的文本在选择后会有所不同

> ID：11298885
> 
> 赞同：10
> 
> 时间：2012-07-02T18:08:50.337
> 
> 标签：javascript, jquery, html, internet-explorer

# 问题

这很难解释，所以请多多包涵。我今天遇到了一个我解决的奇怪场景，但我不确定我的解决方案为什么有效。

我创建了一组选择并编写了一个脚本，通过从其他选择列表中删除选定的选项来限制您多次选择相同的选项。

但是在**IE（包括 IE9）**中，选项列表显示错误的选项，但一旦选择它就会显示正确的选项。

![在此处输入图像描述](../Images/fc662a941d429d505a6e1022495dc82b.png)

## 重新创建错误

在我的第一个脚本中，您可以通过执行以下操作来达到此状态：

*注意：这只是 IE。在 Chrome 中运行良好*

**脚本：http:** [//jsfiddle.net/s6F4h/37/](http://jsfiddle.net/s6F4h/37/)

1.  在第一个下拉菜单中选择 3
2.  在第二个下拉菜单中选择 1
3.  在第一个下拉菜单中选择 1（不应该是可用选项）
4.  请注意，选定的值为 2！
5.  请注意，在第二个下拉列表中更改您选择的值也会产生与显示的值不同的值。
6.  最后，请注意 DOM 正在显示正确的值 ![在此处输入图像描述](../Images/c14c92776356c220b76d7badca3966f9.png)

## 修复错误（神奇地）

现在对于我通过随机猜测工作找到的修复...

**脚本：http:** [//jsfiddle.net/s6F4h/36/](http://jsfiddle.net/s6F4h/36/)

像这样创建我的选择会导致奇怪的行为：

```
var $S1 = $('<select class="question" />'); 
```

像这样创建我的选择可以纠正这种行为：

```
var $S1 = $('<select />', {'class': 'question'}); 
```

## 跟进

*   以上两个jQuery对象有什么区别？
*   IE 究竟如何在其 DOM 中显示一件事，而在实际页面上显示另一件事（我知道 CSS[内容](http://www.quirksmode.org/css/content.html)可以做到这一点，但不涉及 CSS）？如果这只是一个 IE6-8 的东西，那还不错，但它可以在 IE9 中重现！
*   可能是 IE 错误还是 jQuery 错误？

最后，也许我刚刚做了一些非常愚蠢的事情，并且在我的歇斯底里编造了一些荒谬的结论。如果我这样做了，请*轻轻地告诉我。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T23:05:44.927

两个 DOM 对象的区别不在于数据，而在于创建它们时的操作顺序。

当您使用 的内联时`$('<select class="blah" />')`，将`<select>`使用已经完整的类创建元素，并相应地设置样式。当您使用 $( `<select />`, { 'class': 'blah' })` 时，您执行 2 个操作：1) 创建项目，2) 设置它的类。

这看起来无害，但它实际上迫使浏览器在应用 CSS 类时重新绘制元素。

现在-在您的情况下，这会导致它确实存在的特定问题这一事实显然是一个适用于 IE 的错误-但 IE显然不**应该**表现不佳这一事实绝不会阻止它这样做。

希望这能有所启发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T13:19:20.570

我添加了

```
`$("select.question").val('[what ever selection you want selected');` 
```

让它工作。或者我误解了你的问题。

# php - 在开始阅读之前是否可以知道 php://input 是否包含数据？

> ID：11298887
> 
> 赞同：2
> 
> 时间：2012-07-02T18:08:55.640
> 
> 标签：php, http

根据[文档](http://php.net/manual/en/wrappers.php.php)，`php://input`并不总是包含 HTTP 请求正文。

我有一些代码总是在脚本启动时打开流，以使其对用户应用程序可用：

```
$stream = fopen('php://input', 'rb'); 
```

如果用户应用程序尝试从空流中读取`Content-Length > 0`，我希望我的库抛出异常：

> 请求正文不可用。

我的问题是：

*   如果流为空，则在未调用时`feof()`返回；`false``fread()`
*   那我不能`fread()`1 字节`fseek()`，因为这个流不支持搜索；
*   我无法打开另一个`php://input`并尝试事先从中读取，因为我们不能多次依赖此流可用；
*   出于性能原因，我不想在将手交给用户应用程序之前`php://input`盲目复制。`php://temp`

因此，**是否可以判断是否在 之后但在 any 之前`php://input`包含数据`fopen()``fread()`**？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T09:02:53.857

我找到的解决方案是创建一个代表请求正文的类，并从这个类中读取而不是`php://input`直接读取：

```
class RequestBody
{
    protected $firstByte;

    protected $isEmpty;

    public function __construct($stream)
    {
        $this->firstByte = fread($stream, 1);
        $this->isEmpty = ($this->firstByte === '');

        // ...
    }

    public function isEmpty()
    {
        return $this->isEmpty;
    }

    public function read($length)
    {
        // ...
    }
}

$body = new RequestBody(fopen('php://input', 'rb')); 
```

类构造函数读取流的第一个字节，将其存储以供以后使用，并立即知道流是否为空。

`read()``$length - 1`通过在第一次调用它时返回第一个字节 + 字节来隐藏这种复杂性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T21:57:51.417

> “使用 php://input 打开的流只能读取一次；该流不支持查找操作。”

[http://php.net/manual/en/wrappers.php.php](http://php.net/manual/en/wrappers.php.php)

对我来说，这表明它是一个老式的只读流。您无法寻找和测试它是文件的结尾还是长度。

# c - 以下使用 FILE*、ftell、fwrite 和 fflush 线程的代码是否安全？

> ID：11298889
> 
> 赞同：2
> 
> 时间：2012-07-02T18:09:02.933
> 
> 标签：c, multithreading, thread-safety

在下面的代码中，我的函数将数据条目写入磁盘，并且应该将偏移量返回到记录条目的文件中。但是，当在多个线程中运行代码时，我偶尔会发现这个值并不准确。此代码是否存在任何线程安全问题？

```
// global file descriptor to current data file, shared amongst many threads
FILE* current_fp;
pthread_mutex_t my_mutex;
...

int main()
{
    ...
    pthread_mutex_lock(&my_mutex);

    current_fp = fopen(data_file, "ab");
    if (current_fp == NULL)
    {
       fprintf(stderr, "%s: Unable to open file %s: %s\n", __func__, data_file, strerror_r(errno, ebuf, sizeof(ebuf)));
       pthread_mutex_unlock(&ldb_mutex);
       return -1;
    }

    pthread_mutex_unlock(&my_mutex);  

    return 0;
}

// write a data entry, and return the offset at which it will be stored
// I'm having an issue where it seems like *occasionally* the offset returned is not
// really the offset at which the entry was stored, with multiple threads
long write_log_entry(data_entry_t* entry)
{
   int num_written; 
   long offset; // offset at which entry will be written

   pthread_mutex_lock(&my_mutex);

   // get the next offset in the file, which is where I expect
   // the entry to be stored
   offset = ftell(current_fp);
   if (offset == -1)
   {
      error();
   }

   // an example -- the real code writes a bunch of data members of entry
   int num_written = fwrite(entry, sizeof(data_entry_t), 1, current_fp);
   if (num_written != 1) 
   {
       error();
   }

   fflush(current_fp);

   pthread_mutex_unlock(&my_mutex);

   return offset; 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T20:00:25.327

也许问题与 fopen 手册中描述的行为有关：

'请注意，ANSI C 要求文件定位函数在输出和输入之间进行干预，除非输入操作遇到文件结尾。（如果不满足此条件，则允许读取返回除最近写入之外的写入结果。）因此，放置 fseek(3) 或 fgetpos(3 ) 对此类流的写入和读取操作之间的操作。这个操作可能是一个明显的无操作（如 fseek(..., 0L, SEEK_CUR) 调用它的同步副作用。

ftell 可能被视为读取操作。尝试在 ftell 之前插入 fseek(..., 0L, SEEK_CUR) ，看看它是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T18:11:56.790

由于您在打开文件之前没有锁定文件，因此它不是线程安全的。

任何其他进程都可以打开文件进行 I/O，但结果不可预测。

# c# - C# - 未设置 HttpWebResponse 标头

> ID：11298891
> 
> 赞同：0
> 
> 时间：2012-07-02T18:09:06.683
> 
> 标签：c#, http-headers, content-length, weboperationcontext

我正在尝试设置传出响应标头的内容长度，但我的代码似乎对标头没有影响。

```
 web_op_context.OutgoingResponse.Headers.Set("Content-Type", http_req.content_type);
    web_op_context.OutgoingResponse.Headers.Add("Content-Length", "10");
    web_op_context.OutgoingResponse.Headers.Add("Access-Control-Allow-Origin", "*");
    web_op_context.OutgoingResponse.Headers.Remove("Server");
    web_op_context.OutgoingResponse.Headers.Remove("X-Powered-By"); 
```

添加内容长度和删除“服务器”和“X-Powered-By”的行似乎没有在我的传出响应标头中呈现任何变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T18:51:01.140

服务器和 X-Powered By 消息是由 IIS 发送的，而不是您的代码。您必须在 IIS 中禁用它们以防止它们被发送。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T19:43:06.300

服务器和 Powered by 标头由服务器添加到您的代码之外。我最近不得不删除这些，因为它们在安全扫描中被标记为警告。这是我用来删除它们的链接。[我用的链接](http://www.4guysfromrolla.com/articles/120209-1.aspx)。

# php - 如何获取 JSON 对象

> ID：11298892
> 
> 赞同：2
> 
> 时间：2012-07-02T18:09:08.603
> 
> 标签：php, json, codeigniter

好的，这是一个问题。

我在代码点火器中有两个项目，比如 a 和 b。我在“a”中有一个表格。当用户填写表单并提交时，表单中的所有数据都会被放入一个数组中，然后进行 json 编码。这是它的代码

```
function create(){
$data = array(); //get all the data from the form into an array
$data[] = array('name' => $this->input->post('name'),
    'abbrev' => $this->input->post('abbrev'),
    'long_name' => $this->input->post('long_name'),
    'long_abbrev' => $this->input->post('long_abbrev'),
    'url' => $this->input->post('url'),
    'description' => $this->input->post('description') ); 
    $json_data=json_encode($data);
    $this->output->set_output($json_data)
   } 
```

现在我想将此数据发送到项目“b”，它将存储在数据库中。这是它的代码。$college_details = 数组（）；
$college_details['colleges']= json_decode(file_get_contents('http://localhost:8888/a/colleges'));

但我不知道项目“b”如何知道有数据要采集

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T18:14:55.393

我相信你的意思是你想在一个会话中存储数据，这样你就可以在下一页上访问它。如果是这种情况，请使用 PHP 会话功能（`session_start()`在每个文件的顶部添加）跨页面存储变量（`$_SESSION['data'] = $data;`在第一页和`echo $_SESSION['data'];`第二页上）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-02T19:06:18.983

据我了解，您有这个 senario 项目 a) 位于 ://project_a/ 项目 b) 位于 ://project_b/

在项目 a ://project_a/some_action 中，您正在提交表单并将 json 字符串生成为 $json_data。并且您想投影 b 以保存此数据。

解决方案 $jason_data 是一个字符串，在提交表单时调用 ://project_b/json_save_action 购买 CURL，并将 $json_data 作为变量传递给 ://project_b/json_save_action。让我知道它是否有帮助。:)

# java - 如何使用 Http 客户端在 java 中传递查询参数

> ID：11298897
> 
> 赞同：9
> 
> 时间：2012-07-02T18:09:40.383
> 
> 标签：java, http, rest, get

我正在使用给定代码在 java 中使用 GET REST 调用，但我收到错误代码：404 ie Not Found。但是当我在浏览器中使用相同的 URL 时，我得到了输出并且它工作正常。我是 JAVA 的新手。可能是我错误地传递了查询参数，但我没有得到它。我在 NETBEANS 7.1.2 中工作。请帮忙。

```
 import java.io.IOException;
    import java.io.OutputStreamWriter; 
    import java.net.HttpURLConnection; 
    import java.net.URL; 
       public class Test {
          private static String ENDPOINT ="http://wisekar.iitd.ernet.in/active/api_resources.php/method/mynode?";
          public static void main(String[] args) throws IOException 
          { 
              URL url = new URL(ENDPOINT + "key=" + "mykey"  );
              HttpURLConnection httpCon = (HttpURLConnection) url.openConnection(); 
              httpCon.setDoOutput(true);
              httpCon.setRequestMethod("GET");
             OutputStreamWriter out = new OutputStreamWriter( httpCon.getOutputStream());
             System.out.println(httpCon.getResponseCode());
             System.out.println(httpCon.getResponseMessage());
             out.close(); 
          }
   } 
```

这里 mykey 是网站给我的密钥。

我还想在输出窗口或控制台上打印响应消息。因为我想在将来存储它以进行一些提取。请帮忙。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-03T10:23:17.373

这是您的代码..使用它。它对`401-Unauthorised`我的响应和浏览器 URL 的响应相同，这可能会导致 VPN 出现其他问题。如果你使用

```
private static String ENDPOINT ="http://google.com"; 
```

它会给你`200-OK`。

```
import java.io.IOException;
import java.net.HttpURLConnection;
import java.net.URL;
import java.net.URLEncoder;

       public class Test {
          private static String ENDPOINT ="http://wisekar.iitd.ernet.in/active/api_resources.php/method/mynode";
          public static void main(String[] args) throws IOException 
          { 
              String url = ENDPOINT;
              String charset = "UTF-8";
              String param1 = "mykey";

              String query = String.format("key=%s", 
                   URLEncoder.encode(param1, charset));
              java.net.URLConnection connection = new URL(url + "?" + query).openConnection();
              connection.setRequestProperty("Accept-Charset", charset);
              if ( connection instanceof HttpURLConnection)
              {
                 HttpURLConnection httpConnection = (HttpURLConnection) connection;
                 System.out.println(httpConnection.getResponseCode());
                 System.out.println(httpConnection.getResponseMessage());
              }
              else
              {
                 System.err.println ("error!");
              }
          }
   } 
```

# c++ - BFS 可以在图中找到循环吗？

> ID：11298898
> 
> 赞同：2
> 
> 时间：2012-07-02T18:09:46.380
> 
> 标签：c++, c, graph, breadth-first-search, disjoint-sets

我是图论的新手，到目前为止我只学习了图论中的 BFS 和不相交集。如果给定的无向连通图中存在一个循环，我可以使用 BFS 找到它吗？我的意图是打印循环中的所有顶点。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-11-30T23:07:55.033

是的，如果图是无向的，但与 DFS 相比，它的效率非常低。如果图是有向图，您必须记住您是否访问过该节点，以及您是如何到达那里的。BFS，从原点按“级别”搜索将与这些参数不兼容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T18:20:40.550

在图论中，它被称为循环而不是循环。它将节点标记为已访问，如果再次访问访问的节点，则报告它是一个循环。顺便说一句，使用 DFS 找到循环更好。你可以在这里找到代码 [http://codes-at-igit.weebly.com/uploads/1/2/2/7/12272842/ideone_0sbcx.cpp](http://codes-at-igit.weebly.com/uploads/1/2/2/7/12272842/ideone_0sbcx.cpp)

# eclipse - 如何通过尽可能少的点击让 Eclipse 将每个项目的 1 个 JAR 文件导出到特定目录？

> ID：11298902
> 
> 赞同：0
> 
> 时间：2012-07-02T18:09:51.567
> 
> 标签：eclipse, ant, jar, build-automation

## 设想

假设我有一个 Eclipse 工作区，其中包含项目 A、项目 B 和项目 C。有没有什么方法可以配置 eclipse 在我的工作区下创建一个文件夹（任何地方），名为`build`get `Project A.jar`，`Project B.jar`以及`Project C.jar`何时执行*构建*？（请注意，它不必自动构建，这可以是我点击启动的东西。）

只要满足以下要求，我对包括 Ant 在内的许多解决方案持开放态度。

## 要求

1.  `Project A.jar``/Project A/bin/`必须包含Eclipse 构建时通常会出现的所有类和资源文件。

2.  当我将项目 D 添加到我的工作区时，我不想对项目 D 做任何特别的事情来使它与构建设置很好地配合。也就是说，只需将项目 D 添加到 eclipse 中的工作区，将导致下次运行构建时`Project D.jar`出现在文件夹中。`build`项目 D 也应该满足所有这些要求，只有标准 Eclipse 配置的依赖项等。

3.  在 eclipse 项目中设置的类路径和其他必需的构建设置应该传递到 JAR 文件中。也就是说，如果`Project A.jar`需要`Project B.jar`能够运行，那么`Project B.jar`应该包含在`Project A.jar`.

4.  作为`3`Eclipse 工作区中非项目的第 3 方库的进一步扩展，还必须复制和引用。也就是说，如果`Project A.jar`需要`spring.jar`，`spring.jar`也必须复制到`build`并且必须将引用添加到`Project A.jar`类路径。`/build/lib`如果这些 3rd 方库可以放在一个文件夹中，那就太好了。

5.  它不能依赖 Eclipse Helios 不附带的任何 3rd 方工具或插件。

## 有关的

[在 Eclipse 中自动将项目构建到 JAR 中](https://stackoverflow.com/questions/1062941/build-project-into-a-jar-automatically-in-eclipse)似乎是相关的，它可能符合要求`1`，`5`但我不相信它符合其他 3 个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T14:33:24.637

我最终编写了一个使用[org.apache.tools.ant.Project](http://api.dpml.net/ant/1.7.0/org/apache/tools/ant/Project.html)运行简单 Ant 脚本的 Java 程序。Java 程序解析 .classpath 文件并设置适当的用户属性供 Ant 脚本使用（jar 输出路径、类路径等）。

它可能不是完美的解决方案，但它对我来说是最容易实施的，并且符合我的要求。

如果您愿意为 Eclipse 使用 3rd 方插件，那么看起来[Ant4Eclipse](http://www.ant4eclipse.org/)可能是一个不错的解决方案。这对我来说不是一个选择，所以我没有测试它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T20:03:31.750

对于您所追求的，没有简单的解决方案。如果您删除要求 #5，其他人可能会帮助您找到第三方解决方案。

如果您只有基本的 Eclipse 和 Ant 供您使用，那么您当然可以编写一个完全通用的 Ant 脚本，迭代项目、解析 .classpath 文件、编译、构建 JAR 等。这并不容易，但肯定是可能的。

# c# - 将 Java 泛型转换为 C# 泛型

> ID：11298903
> 
> 赞同：2
> 
> 时间：2012-07-02T18:09:56.020
> 
> 标签：c#, generics

那是我的通用冒泡排序器的 Java 代码：

```
public class BubbleSorter<E extends Comparable<E>> {
    E[] a;
    void swap(int i, int j) {
        E temp;
        temp=a[i];
        a[i]=a[j];
        a[j]=temp;
    }
    void bubbleSort(E[] a) {
        this.a=a;
        for (int i=0 ;i<a.length;i++) {
            for (int j=0;j<a.length;j++) {
                if ( a[i].compareTo(a[j]) > 0) swap(i,j);
            }
        }
    }

}

public interface Comparable<E> {
    public int compareTo(E e);
} 
```

这是一个使用示例：

```
public class Test { 
    public static void main (String arg[]) {
        Rational[] a = new Rational[3];
        a[0]=Rational.rationalFactory(9,2);
        a[1]=Rational.rationalFactory(1,3);
        a[2]=Rational.rationalFactory(10,11);
        Complex[] b = new Complex[3];
        b[0]=new Complex(7,5);
        b[1]=new Complex(3,4);
        b[2]=new Complex(8,9);
        BubbleSorter<Rational> br=new BubbleSorter<Rational>();
        BubbleSorter<Complex> bi=new BubbleSorter<Complex>();
        br.bubbleSort(a);
        bi.bubbleSort(b);
        for (int i=0 ; i < 3 ; i++ ) {
            System.out.print(a[i] + " ");
        }
        System.out.println();
        for (int i=0 ; i < 3 ; i++ ) {
            System.out.print(b[i] + " ");
        }
    }
}

public class Rational implements Comparable<Rational> {
    int mone,mehane;
    private Rational(int n,int m) {
        mone=n;
        mehane=m;
    }
    static public Rational rationalFactory(int n,int m) {
        if (n==0) return null;
        return new Rational(n,m);
    } 
    public String toString() {
        return mone + "/" + mehane;
    }
    public int compareTo(Rational r) {
        return (r.mehane*mone - r.mone*mehane);
    }
}
public class Complex implements Comparable<Complex> {
        int real,img;
        public Complex(int r,int i) {
            real=r;
            img=i;
        }
        public String toString() {
            return real + "+" + img + "i";
        }
        public int compareTo(Complex r) {
            double x=(getLength() - r.getLength());
            if (x>0) return 1;
            if (x==0) return 0;
            return -1;
        }
        public double getLength() {
            return Math.sqrt(real*real+img*img);
        }
} 
```

当我尝试将我的 Java 代码转换为 C# 时，我被困在试图强制泛型类型扩展 Comparable 因为**< E : Comparable >**不起作用。我该如何克服呢？

这就是我尝试过的：

```
abstract class Comparable<E> {

    static bool operator ==( Comparable<E> e1, Comparable<E> e2 );
    static bool operator !=( Comparable<E> e1, Comparable<E> e2 ) {
        return !( e1 == e2 );
    }
    static bool operator >( Comparable<E> e1, Comparable<E> e2 );
    static bool operator >=( Comparable<E> e1, Comparable<E> e2 ) {
        if ( e1 > e2 ) return true;
        if ( e1 == e2 ) return true;
        return false;
    }
    static bool operator <=( Comparable<E> e1, Comparable<E> e2 ) {
        return !( e1 > e2 );
    }
    static bool operator <( Comparable<E> e1, Comparable<E> e2 ) {
        return !( e1 >= e2 );
    }
}

public class BubbleSorter<E : Comparable<E>> {
        E[] a;
        void swap(int i, int j) {
            E temp;
            temp=a[i];
            a[i]=a[j];
            a[j]=temp;
        }
        void bubbleSort(E[] a) {
            this.a=a;
            for (int i=0 ;i<a.length;i++) {
                for (int j=0;j<a.length;j++) {
                    if ( a[i]>a[j] ) swap(i,j);
                }
            }
        }

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T18:13:21.853

您应该使用内置`IComparable<T>`接口，然后将您的类声明为

```
public class BubbleSorter<T> where T : IComparable<T> { ... } 
```

关键字在泛型参数上`where`定义了一个“约束” `T`。编译器将通过确保对于泛型类的任何实例化，类型参数实现`IComparable<T>`接口来强制执行此约束。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T18:13:40.260

C# 中用于泛型约束的关键字是[`where`](http://msdn.microsoft.com/en-us/library/bb384067).

因此，首先声明泛型类型的签名：

```
public class BubbleSorter<E> 
```

然后定义通用约束：

```
 where E : IComparable<E> 
```

**关于编码约定的一句话：**在 C# 中，习惯上调用单个泛型参数`T`（如*type*）而不是`E`（如*element*）。这是所有框架集合类中使用的模式，因此您可能需要调整您的类型名称：

```
public class BubbleSorter<T>
    where T : IComparable<T>
{
    // ...
} 
```

在冒号 ( ) 后面`:`，您可以指定以逗号分隔的接口列表和可能的类名。编译器知道哪个是哪个，因此您不必明确指定是要实现（接口）还是继承（从类）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T18:15:10.003

在 C# 中，实现类型可比性的一种常用惯用方法是使其派生自`IComparable<T>`. 如果您无法更改类型来实现 IComparable，那么您可以实现一个辅助类来实现`IComparer<E>`.

```
public class BubbleSorter<E> 
{
    static void Swap(E[] a, int i, int j) 
    { 
        E temp; 
        temp=a[i]; 
        a[i]=a[j]; 
        a[j]=temp; 
    } 

    public void BubbleSort(E[] a, IComparer<E> comparer) 
    { 
        for (int i=0 ;i<a.length;i++) { 
            for (int j=0;j<a.length;j++) { 
                if ( comparer.Compare(a[i],a[j]) > 0 ) swap(a,i,j); 
            } 
        } 
    } 
 } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-02T18:13:29.537

这是 C# 语法：

```
public class BubbleSorter<E> where E : Comparable<E> 
```

# python - 保存没有边距的 matplotlib/networkx 图

> ID：11298909
> 
> 赞同：16
> 
> 时间：2012-07-02T18:10:14.553
> 
> 标签：python, matplotlib, networkx

`matplotlib`当我使用如何在没有额外边距的情况下保存图形时？通常当我将它保存为

```
plt.savefig("figure.png") # or .pdf 
```

我得到了一些利润：

> ![在此处输入图像描述](../Images/b1d1506f9b6b34b9b977d0238bab52c7.png)

例子：

```
import matplotlib.pyplot as plt
import networkx as nx

G=nx.Graph()

G.add_edge('a','b',weight=1)
G.add_edge('a','c',weight=1)
G.add_edge('a','d',weight=1)
G.add_edge('a','e',weight=1)
G.add_edge('a','f',weight=1)
G.add_edge('a','g',weight=1)

pos=nx.spring_layout(G)
nx.draw_networkx_nodes(G,pos,node_size=1200,node_shape='o',node_color='0.75')

nx.draw_networkx_edges(G,pos,
                width=2,edge_color='b')

plt.axis('off')
plt.savefig("degree.png", bbox_inches="tight")
plt.show() 
```

更新 2：

空间设置在轴内。如果我删除，这很清楚`plt.axis('off')`
所以我认为使用包 Networkx 有一些技巧。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-02T18:11:46.503

试试`plt.savefig("figure.png", bbox_inches="tight")`。

编辑：啊，你没有提到你正在使用networkx（虽然现在我看到它在标签中列出）。 `bbox_inches="tight"`是紧密裁剪图形的方法。我不知道 networkx 在做什么，但我想它正在设置一些绘图参数，这些参数为轴添加了额外的空间。您应该在 networkx 而不是 matplotlib 中寻找解决方案。（例如，可能是 networkx 在*轴*`axis('off')`内添加空间，而不是图形；如果删除该调用，它会是什么样子？）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-02T19:55:32.003

添加以下代码以在保存前控制绘图限制。

尝试不同的值`cut`，例如从 1.05 到 1.50，直到您认为合适。

```
# adjust the plot limits
cut = 1.05
xmax= cut*max(xx for xx,yy in pos.values())
ymax= cut*max(yy for xx,yy in pos.values())
plt.xlim(0,xmax)
plt.ylim(0,ymax) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-02-05T01:17:09.447

使用以下内容：

```
plt.margins(0.0) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-13T09:58:58.550

有点小技巧，但如果你使用 nx.draw，那么它会更紧密。

所以你可以做

```
nx.draw(G,pos,node_size=1200,node_shape='o',node_color='0.75', edgelist = []) 
```

它只绘制节点而没有边缘。然后就可以了

```
nx.draw_networkx_edges(G, pos, width=2, edge_color='b') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-24T20:10:25.847

要将图形置于中心，您可以使用以下命令：

```
cut             = 1.1
xmax            = max(xx for xx,yy in pos.values())
ymax            = max(yy for xx,yy in pos.values())
xmin            = min(xx for xx,yy in pos.values())
ymin            = min(yy for xx,yy in pos.values())

xincrease       = (cut - 1)*xmax
yincrease       = (cut - 1)*ymax

plt.xlim(xmin - xincrease, cut*xmax)
plt.ylim(ymin - yincrease, cut*ymax) 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-03T21:50:41.463

在不知道 networkx 的细节的情况下，我无法确定这是否有效，但是要从 matplotlib 中的轴外部完全删除空格，您可以执行以下操作：

```
import matplotlib.pyplot as plt
ax = plt.axes([0, 0, 1, 1])
plt.plot(range(10)) 
```

# objective-c - 我想做的就是从 iPhone 向 iCloud 发送一个纯文本文档。

> ID：11298914
> 
> 赞同：1
> 
> 时间：2012-07-02T18:10:32.910
> 
> 标签：objective-c, ios, icloud

我整天都在阅读有关这方面的问题和教程，但它们中的每一个似乎都比我的实现所必需的复杂得多。

目标：我想从我的应用程序中获取一些系统信息并将其打包成一个简单的报告（如 .txt 文档）。用户只需单击一个按钮即可将带时间戳的文档发送到他们的 iCloud，以便他们稍后可以在他们的计算机上查看该文件。每次按下按钮都会创建一个新的文档用于当时的统计数据。无需从 iCloud（在手机上）下载，也无需保存更改/更新单个文件。

据我了解， UIDocument 是文件和云之间的“中间人”。但是，我还没有找到可以教 iOS/objective-c 新手的东西，比如我，如何 (1) 从字符串/NSString 创建文件，以及 (2) 从手机将其上传到 iCloud .

我只是想掌握这里的基础知识并让一个简单的原型工作。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T18:21:48.317

也许您可以从这些链接开始：

[保存 .txt 文件](https://stackoverflow.com/questions/2184372/how-do-i-save-an-nsstring-as-a-txt-file-on-my-apps-local-documents-directory)

[icloud-and-uidocument-beyond-the-basics-part-1](http://www.raywenderlich.com/12779/icloud-and-uidocument-beyond-the-basics-part-1)

# objective-c - 创建 CSSymbolicatorRef 失败

> ID：11298922
> 
> 赞同：1
> 
> 时间：2012-07-02T18:10:57.857
> 
> 标签：objective-c

这个错误声明到底是什么意思？我似乎在 Apple 官方方面找不到任何文档，尽管我确实偶然发现了这一点 - [http://www.opensource.apple.com/source/dtrace/dtrace-90/libdtrace/dt_module_apple.c](http://www.opensource.apple.com/source/dtrace/dtrace-90/libdtrace/dt_module_apple.c)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T23:40:27.970

这意味着它无法链接到动态库。最可能的原因是有问题的可执行文件是针对不兼容的 SDK 编译的。也许您在安装了 Xcode 4.5DP 的 Lion 系统上为命令行工具运行了 xcodebuild，并且它与 10.8 SDK 相关联？这让我刚刚从源代码构建appledoc。解决方案是 xcode 选择您的发行版 Xcode，以便它使用 10.7 SDK 进行 xcodebuild，如果这也是您的问题；立即清除了我。

# mysql - Coldfusion ajax html提交

> ID：11298929
> 
> 赞同：0
> 
> 时间：2012-07-02T18:11:37.857
> 
> 标签：mysql, ajax, coldfusion, tinymce, railo

我正在使用 railo 并尝试通过 ajax 提交 tinymce 文本区域。

我的问题是在提交时似乎 html 已被剥离并且 sql 实际上并未更新。

这是我的代码：

```
function UpdateHome() {
  document.getElementById('UpdateProcessing').style.display = '';
  document.getElementById('HomeForm').style.display = 'none';
  ColdFusion.Ajax.submitForm("HomeForm","action.cfm",HomeUpdateReturn);
  }

<form action="action.cfm" method="post" id="HomeForm">
 <input type="hidden" name="action" value="HomeUpdate" />
 <CFLOOP QUERY="FetchHome">
 <textarea id="HomeArea" name="HomeArea" class="tinymce" rows="20" cols="20"
 style="width:100%; height:500px" >#Body#</textarea>
 </CFLOOP>
 <input type="button" class="HomeSubmit" value="Save" onClick="UpdateHome();" /> 
</form>

<CFQUERY NAME="UpdateHome">
 UPDATE Content
 SET Body = '#HomeArea#'
 WHERE ID = 1
</CFQUERY>

<CFSET UdateHome     = ArrayNew(1)>
<CFSET UpdateHome[1]     = true>
<CFCONTENT TYPE="application/json" RESET="true">
<CFOUTPUT>#serializeJSON(UpdateHome)#</CFOUTPUT> 
```

当我在没有 ajax 的情况下提交表单时，sql 工作正常。

有谁知道为什么这不会通过 ajax 提交 html 格式的文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T19:51:12.253

这里有几个问题：

1.  我不相信您可以使用`ColdFusion.Ajax.submitForm()`，除非您使用 cfform 或除非您使用`<cfajaximport ... />`导入 javascript。您是否通过 Firebug 或 Chrome 开发工具确认 Javascript 没有引发错误？我怀疑是这样。`<form ... >`将您的and`</form>`标签更改为`<cfform ...>`and`</cfform>`并重试。

2.  另外，我认为这不会像您期望的那样工作，因为您在同一个文件中同时拥有表单和表单处理程序逻辑。我会把它们分开。

3.  您正在引用一个`HomeUpdateReturn`不存在的返回处理函数。您需要在 Javascript 代码中编写此函数。

您还有其他一些问题，我不能不指出就放过：

1.  您应该确定变量的范围。在您的更新查询中，您有`'#homearea#'`. 这可以引用任何`homearea`变量，并且可能不是您期望的表单范围内的变量。将此更改为`#form.homearea#`. 这将确保仅使用表单范围内的变量。
2.  您**需要**在查询中使用`<cfqueryparam ... />`，否则您将面临 sql 注入攻击。所以更改`'#homearea#'`为`<cfqueryparam cfsqltype="cf_sql_longchar" value="#form.homearea#" />`. （假设在您的数据库中您正在使用一个大文本字段）在不使用参数化查询的情况下，切勿允许未经检查的用户输入直接进入您的查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T09:50:14.063

在提交表单之前，您需要做的就是调用 javascript 行

```
 tinymce.triggerSave() 
```

# postgis - 经纬度线串输出格式

> ID：11298940
> 
> 赞同：1
> 
> 时间：2012-07-02T18:12:21.537
> 
> 标签：postgis

有没有办法以这种格式从我的 postgis 数据库中返回线串？

Line: 1, "Road" 35.62200200, -88.98259200 35.62203500, -88.98240800 35.62202700, -88.98231000 35.62180000, -88.98163400 35.62175700, -88.98149000 35.62172500, -88.97881200 35.62172000, -88.97798500 35.62169800, -88.97752400 35.62170300, -88.97736200 35.62173900, -88.97723200 35.62180600, - 88.97715200 35.62292600, -88.97608000 35.62467700, -88.97441600 35.62482100, -88.97429800 结束：

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T21:39:58.333

你应该连接xy的

LINESTRING('|| s."X" ||' '||s."Y" ||','|| s."X" || ' '||s."Y" || ')'' ,2309)

希望对你也有用:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T04:18:35.203

你有自定义格式，还是已知的？有几个[几何输出函数](http://postgis.refractions.net/docs/reference.html#Geometry_Outputs)，你总是可以将它们的输出解析成新的东西，例如：

```
SELECT 'Line: ' || id || ', ' ||
  trim(translate(ST_AsText(ST_FlipCoordinates(ST_Transform(the_geom, 4326))),
                 'MULTILINESTRINGZM()', '')) || ' End:' AS output
FROM nqatrkl; 
```

或者您可以转储积分并以其他方式修改它们：

```
SELECT id, time, (d).path, (d).path[1] AS part,
       ST_Y((d).geom) AS lat, ST_X((d).geom) AS lon
FROM (SELECT id, time, ST_DumpPoints(ST_Transform(the_geom, 4326)) AS d
      FROM nqatrkl) AS foo
ORDER BY (d).path; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T05:54:37.383

这对我有用，它是一种自定义格式，还是已知的？有几个[几何输出函数](http://postgis.refractions.net/docs/reference.html#Geometry_Outputs)，你总是可以将它们的输出解析成新的东西，例如：

```
SELECT 'Line: ' || id || ', ' ||
  trim(translate(ST_AsText(ST_FlipCoordinates(ST_Transform(the_geom, 4326))),
                 'MULTILINESTRINGZM()', '')) || ' End:' AS output
FROM nqatrkl; 
```

或者您可以转储积分并以其他方式修改它们：

```
SELECT id, time, (d).path, (d).path[1] AS part,
       ST_Y((d).geom) AS lat, ST_X((d).geom) AS lon
FROM (SELECT id, time, ST_DumpPoints(ST_Transform(the_geom, 4326)) AS d
      FROM nqatrkl) AS foo
ORDER BY (d).path; 
```

# android - AudioTrack：在未初始化的 AudioTrack 上调用 play()

> ID：11298949
> 
> 赞同：9
> 
> 时间：2012-07-02T18:13:11.970
> 
> 标签：android, illegalstateexception, audiotrack

我正在尝试使用 AudioTrack 类。基本上，当用户触摸屏幕上的特定对象时，我的应用程序必须产生声音。我已[将此示例](http://marblemice.blogspot.com/2010/04/generate-and-play-tone-in-android.html)用作指南。
我的应用程序似乎可以正常工作，但通常在触摸屏幕大约一分钟后它会崩溃：

```
07-02 20:40:53.459: E/AndroidRuntime(11973): FATAL EXCEPTION: Thread-10
07-02 20:40:53.459: E/AndroidRuntime(11973): java.lang.IllegalStateException: play() called on uninitialized AudioTrack.
07-02 20:40:53.459: E/AndroidRuntime(11973):    at android.media.AudioTrack.play(AudioTrack.java:824)
07-02 20:40:53.459: E/AndroidRuntime(11973):    at com.mysounds_experimental.SoundThread.playSound(SoundThread.java:108)
07-02 20:40:53.459: E/AndroidRuntime(11973):    at com.mysounds_experimental.SoundThread.run(SoundThread.java:69) 
```

生成声音的类中的方法

```
public void initAudioTrack() {
        int bufferSize = AudioTrack.getMinBufferSize(sampleRate
                , AudioFormat.CHANNEL_CONFIGURATION_MONO, AudioFormat.ENCODING_PCM_16BIT);

        audioTrack = new AudioTrack(
                AudioManager.STREAM_MUSIC
                , sampleRate
                , AudioFormat.CHANNEL_CONFIGURATION_MONO
                , AudioFormat.ENCODING_PCM_16BIT
                , bufferSize
                , AudioTrack.MODE_STREAM);
    }

   private void playSound(){
            audioTrack.write(generatedSnd, 0, numSamples);
            audioTrack.play();
        }

public void stopPlaying() {
    audioTrack.flush();
    audioTrack.stop(); 
    audioTrack.release();
}

@Override
    public void run() {
        while (mRun) {
            try{
                Thread.sleep(200);
                while(soundCycle){
                    if(freqOfTone != -1f) {
                        generateTone();
                        playSound();
                        Thread.sleep(200);
                    }
                }
            } catch(InterruptedException e){
                //              soundCycle = false;
                //              soundPool.stop(BEEP);
            }
        }
    } 
```

这是我的线程使用的自定义视图中的一种方法

```
@Override
    public boolean onTouchEvent(final MotionEvent ev) {
        int currentXPosition = (int) ev.getX();
        int currentYPosition = (int) ev.getY();

        if(ev.getX() < smBitmap.getWidth())
            if(ev.getY() < smBitmap.getHeight()){
                tempCol = smBitmap.getPixel(currentXPosition, currentYPosition);
            }

        final int action = ev.getAction();

        switch (action & MotionEvent.ACTION_MASK) {

        case MotionEvent.ACTION_DOWN: {

            sThread.freqOfTone = getFreqPreset(tempCol);
            if(col != tempCol){
//              sThread.initAudioTrack();
                sThread.interrupt();
                if(shouldInit) {
                   shouldInit = false;
                   sThread.initAudioTrack();
                }
                sThread.soundCycle = true;
                col = tempCol; 
                invalidate();
            }
            break;
        }

        case MotionEvent.ACTION_MOVE: {
            sThread.freqOfTone = getFreqPreset(tempCol);

            if (tempCol == -1 || tempCol == 0) {
                sThread.soundCycle = false;
                shouldInit = true;
//              sThread.stopPlaying();
                sThread.interrupt();
                invalidate();
            } else {
                if(col != tempCol){
                    sThread.interrupt();
                    col = tempCol;
                    invalidate();
                }else {
                    sThread.soundCycle = true;
                    col = tempCol;
                    invalidate();
                }
            }
            break;
        }// case ACTION_MOVE

        case MotionEvent.ACTION_UP: {
            sThread.soundCycle = false;
            shouldInit = true;
//          sThread.stopPlaying();
            sThread.interrupt();
            col = -1;
            mActivePointerId = INVALID_POINTER_ID;
            break;
        }// case ACTION_UP

        }   

        return true;
    } 
```

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-15T09:47:23.433

为什么你注释掉了你的 stopPlaying() 方法？

您只能创建 32 个音轨。如果你想要更多，你应该调用 release() 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T02:17:00.773

我认为你需要先打电话`play()`，然后再打电话`write()`。

但我也注意到，当您创建大量`AudioTrack`实例时，即使您认为自己正在清理所有内容，有时也会`play()`无法正常工作，并且轨道未初始化。

你会想尝试...抓住这个`IllegalStateException`，并避免调用`write()`直到`play()`工作而不抛出异常。

# javascript - jQuery this.href 字符串比较不起作用

> ID：11298953
> 
> 赞同：1
> 
> 时间：2012-07-02T18:13:23.683
> 
> 标签：javascript, jquery, this, href

我有一个简单的 jQuery 脚本，我正在尝试构建它，但我无法让 href 字符串比较返回 true：

```
<a class="test" href="/Services/Cloud-Hosting">Click Me</a>​ 
```

我的脚本如下：

```
$('.test').click(function() {
if ($(this).href == "/Services/Cloud-Hosting") {
    alert('hi');
}
else {
    alert('no');
}
});​ 
```

即使hrefs是相同的，我也会不断收到“不”的警报。我错过了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-02T18:14:51.283

改变：

```
if ($(this).href 
```

到：

```
if (this.href 
```

或者`$(this).attr('href')`，但前者更好。

要读取属性，您需要使用`attr`(简写`attribute`)

这是你应该拥有的：

```
if (this.href == "/Services/Cloud-Hosting") {
    alert('hi');
}
else {
    alert('no');
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-02T18:15:43.880

试试这个：

```
if ($(this).attr('href') == "/Services/Cloud-Hosting") { 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T18:15:28.383

请参阅[.attr()](http://api.jquery.com/attr/)并尝试以下操作：

```
$(this).attr('href') == "/Services/Cloud-Hosting" 
```

反而

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-02T18:18:26.777

jQuery 对象没有`href`属性。只需使用[HTMLAnchorElement](https://developer.mozilla.org/en/DOM/HTMLAnchorElement)访问属性，`this.href`而不是使用`$(this)`.

# java - Clojure / Java 中的 Goroutine 等价物

> ID：11298961
> 
> 赞同：18
> 
> 时间：2012-07-02T18:14:00.183
> 
> 标签：java, concurrency, clojure, go, goroutine

我最近很喜欢看[Google IO 关于 Go 并发模式的演讲](http://www.youtube.com/watch?feature=player_embedded&v=f6kdp27TYZs)

尽管 Go 的并发方法（groutines、通过通道的通信）明显不同于 Clojure（不变性、管理引用、STM），但在 Clojure 上下文中的某些情况下，Go 方法似乎仍然有用。

那么对于 Go 的并发原语（可能是一个库），在 Clojure 或 Java 中是否有直接的等价物，特别是：

*   `channel`- 像对象一样阻塞，直到读写器在两端都可用
*   `select`可以在多个通道上等待结果的类似构造

**PS**对 Java 解决方案非常满意，因为它很容易从 Clojure 中使用

**更新**自从最初提出这个问题以来，Clojure 现在有了[core.async](https://github.com/clojure/core.async)，它提供了所有这些功能等等。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-09-26T01:47:29.070

您应该查看[core.async](https://github.com/clojure/core.async)。它是由 Rich Hickey 编写的实现 go 风格通道的库。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T15:27:35.507

> 阻塞直到读写器两端都可用的类似通道的对象

这有点令人困惑。你的意思是“阻塞直到，如果写，一个读者可用，或者，如果阅读，一个作家可用”？我代表线程而不是构造发言，构造不能阻塞只有线程可以。（为避免混淆，构造会指示线程阻塞）。

如果我的假设是正确的，那么您可以有两种选择（在标准 Java 中）。

1.  [同步队列](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/SynchronousQueue.html)
2.  [TransferQueue](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/TransferQueue.html)（虽然这也可以用作缓冲通道）

> 可以在多个通道上等待结果的类 select 构造

据我所知，没有任何真正的`select`类似构造。您可以拥有的最接近的是[ExecutorCompletionService](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ExecutorCompletionService.html)，它将在下一个提交的可用任务完成时返回。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-30T04:12:00.413

我最近编写[了 go-lightly](https://github.com/midpeter444/go-lightly)，这是一个支持使用 Go 并发结构进行编程的 Clojure 库，将一些 Clojure 习语放在这种并发编程风格上。

Go 并发编程的核心结构是：

1.  围棋套路
2.  同步（阻塞）通道
3.  有界的，主要是异步（非阻塞）通道
4.  `select`从多个通道读取下一条可用消息的运算符
5.  通道读/写/选择的超时操作

go-lightly 库具有所有这些功能，构建在 Java 和 Clojure 中可用的功能之上。True Go 例程被多路复用到线程上，而不是在其整个生命周期内完全使用线程。在 go-lightly 中，我在 Clojure 未来宏之上构建了 go 例程，因此这是 JVM 上 Go 模型最薄弱的部分。

我尝试使用 lamina，但它缺少有界通道（在某些情况下您可能需要它，并且是 Go 缓冲通道模型的一部分），据我所知，在将消息放到渠道。这是 Go 并发模型的一个关键特性。

我在 git repo 中包含了一些使用 go-lightly 库的示例。大多数都是基于 Rob Pike 在过去两年的会谈中给出的例子。

在 JCSP 之上构建一个 Clojure 库会很有趣，但我还没有研究过。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-02T18:43:02.397

在不了解 Go 的情况下，看看 Lamina 是否符合您的要求[https://github.com/ztellman/lamina](https://github.com/ztellman/lamina)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-06-13T07:55:46.423

你可能想看看[Quasar/Pulsar](http://blog.paralleluniverse.co/post/49445260575/quasar-pulsar)。它非常新，但正是您正在寻找的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-02T22:31:11.820

看看[Joxa](http://joxa.org)。它是一种类似 Clojure 的 Lisp 方言，针对 Erlang 虚拟机。

[Erlang](http://Erlang.org)以轻量级低于 1000 字节的进程 而闻名。

Erjang[也](http://Erjang.org)有些相关，您可能会感兴趣。它是在 JVM 之上的 Erlang 虚拟机的实现。

所以*理论上*你可以将 Joxa 编译成 BEAM，然后仍然在 JVM 上运行它。并不是说我会推荐它:-)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-05T08:26:18.153

akka[演员](http://doc.akka.io/docs/akka/2.0.2/java/untyped-actors.html)~= goroutine+channel

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-18T22:21:02.457

我强烈推荐[**JCSP**](http://www.cs.kent.ac.uk/projects/ofa/jcsp/)，基于 Occam/transputer 算法。此 API 实现的关键部分已使用形式方法和形式证明者算法检查了正确性，因此尽可能可靠（Alternative 类是这方面的主要成就）。

JCSP 非常好……但是缺点仍然是 JVM 施加的限制，尤其是线程的高成本。在 Go 或 Occam 中，线程的数量可以达到数百万，但在 JVM 中则不然。

# c++ - 如何在 Windows 机器上构建或安装 freeglut

> ID：11298963
> 
> 赞同：2
> 
> 时间：2012-07-02T18:14:15.577
> 
> 标签：c++, opengl, freeglut

我下载[了 freeglut](http://freeglut.sourceforge.net/)。我正在阅读安装[说明](http://freeglut.sourceforge.net/docs/install.php)。我提取了所有文件。我看到一个名为 configure（和 configure.ac）的文件。我打开了 Visual Studio 命令提示符并将目录更改为

`C:\DevStuff\OpenGL\freeglut-2.8.0`

下一步是**配置包**

`./configure`

这看起来像一个 Linux 命令。我应该如何在 Windows 7 机器上完成这种构建？我有视觉工作室 2010 终极版。

**更新**

我找到了 VS2010 目录并成功执行了构建。我需要`freeglut_static.lib`，这不是从这个版本中出来的。输出目录

`..\..\lib\x86\Debug`仅包含一个 lib 文件 freeglut.lib。

我怀疑我需要makefile，但我真的不知道。OpenGL Superbible[示例项目](http://www.starstonesoftware.com/OpenGL/fourthEdition.htm)需要此库。在示例项目中，当我尝试运行它时出现编译错误：

```
error LNK1181: cannot open input file 'freeglut_static.lib' C:\DevStuff\OpenGL\SB-WinwBin\SuperBible4\examples\projects\microsoft\chapt01\block\LINK    block 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T20:27:38.803

*任何试图获取第 4 版 OpenGL的[样本以在 Windows 机器上工作的人的信息。](http://www.starstonesoftware.com/OpenGL/fourthEdition.htm)*

该网站包含您需要的一切。无需单独构建或安装 freeglut。只是项目配置不正确。对于 Visual Studio 2010，这是第一个名为 block 的项目的修复：

1.  右键单击项目 > 属性 > VC++ 目录 >**库目录**（不包括目录） > 添加下载附带的 freeglut_static.lib 的链接。例如`C:\DevStuff\OpenGL\SB-WinwBin\SuperBible4\examples\src\shared;`

2.  如果您现在构建，您将收到一个关于无法链接 LIBC.lib 的新错误。在项目属性仍然打开的情况下，转到链接器 > 输入 > 忽略特定默认库 > 单击下拉箭头 > 单击`<Edit...>`> 键入`LIBC.lib`并单击确定。

现在一切都应该构建得很好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T18:24:01.703

> 我应该如何在 Windows 7 机器上完成这种构建？

[系统](http://www.mingw.org/wiki/msys)。

或者使用`VisualStudio\2010`目录下的VS2010解决方案。

**编辑**：

如果您需要`freeglut_static.lib`使用.`Debug_Static``Release_Static``freeglut.sln`

# c++ - 如何访问模板模板类的 typedef

> ID：11298964
> 
> 赞同：1
> 
> 时间：2012-07-02T18:14:16.673
> 
> 标签：c++, templates, typedef

尝试编译以下代码时：

```
class Object
{
};

template <class OBJECT>
class Manager
{
public:
    typedef OBJECT Object_t;
};

template <class MANAGER>
class Container
{
    MANAGER::Object_t m_obj;
};

Container<Manager<Object> > container; 
```

我收到以下错误：

prog.cpp:15：错误：类型“管理器”不是从类型“容器”派生的</p>

prog.cpp:15: 错误: 预期 ';' 在'm_obj'之前</p>

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T18:18:13.060

您需要`typename`，因为编译器在解析模板时不知道`MANAGER::Object_t`引用类型。

```
typename MANAGER::Object_t m_obj; 
```

第一条错误消息意味着编译器将作用域`MANAGER::`标记视为试图访问`Container`. 第二条错误消息表明编译器不知道它`m_obj`应该是一个数据成员，因为它没有将它之前的标记识别为一种类型。

# c# - ASP.NET 中的多语言网站

> ID：11298969
> 
> 赞同：0
> 
> 时间：2012-07-02T18:14:41.650
> 
> 标签：c#, file, visual-studio-2008, globalization, multilingual

这是我的多语言网站代码的一部分。我收到运行时错误

```
 Thread.CurrentThread.CurrentCulture = new CultureInfo("en-US");
            rm = new ResourceManager("Resources.Default.apsx", System.Reflection.Assembly.Load(System.IO.File.ReadAllBytes("E:\\New folder\\multi_lang\\multi_lang\\App_LocalResources")));
            ci = Thread.CurrentThread.CurrentCulture; 
```

在这里，我在第二行说错误

1.确保您有足够的权限来访问这些资源

1.  如果您尝试访问文件，请确保它不是只读的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T18:18:06.980

确保运行 IIS 的人有权访问：

E:\新建文件夹\multi_lang\multi_lang\App_LocalResources

在 IIS6 下，它很可能是 IUSR，在 IIS7 下，它需要成为您的应用程序池用户：IIS AppPool \ -AppPoolUser-

# jquery - jQuery 验证成功消息未设置样式

> ID：11298970
> 
> 赞同：0
> 
> 时间：2012-07-02T18:14:44.060
> 
> 标签：jquery, css, jquery-validate, message

我将消息设置为红色表示错误，绿色表示成功。但是消息似乎是红色的，表示成功。

这是验证代码：

```
debug: true,
errorElement: "em",             
success: function(label) {
    label.text("ok!").addClass("success");
}, 
```

这是CSS代码片段：

```
em.success
{
    float: none; 
    color: green; 
    padding-left: .5em; 
    font-style: italic;
    font-size: 11px;    
}

em.error 
{ 
    float: none; 
    color: red; 
    padding-left: .5em; 
    font-style: italic;
    font-size: 11px;
} 
```

我的代码到底有什么问题？

请参考[this fiddle](http://jsfiddle.net/K9b9R/7/)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T18:17:19.333

要解决重复确定，请执行以下操作：

```
success: function(label)
{
    label.text("").text("ok!").addClass("success");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T18:46:02.383

我认为您的标签以两个类`success`和结尾`error`，因此按照[规则确定 CSS 属性值](http://www.w3.org/TR/CSS2/cascade.html#cascading-order)，后者获胜并且您的文本为红色（假设 CSS 规则的顺序与您的问题中的顺序相同）。

至于为什么它们两者都有：[文档](http://docs.jquery.com/Plugins/Validation/validate#options)说如果`success`指定，则“显示错误标签以显示有效元素”。我不完全确定这意味着什么。您可能想要深入研究（调试标签，检查 Firebug 或开发工具中的元素，查看[插件的源代码](https://github.com/jzaefferer/jquery-validation/blob/master/jquery.validate.js)）。

在 jsfiddle.net 上的演示中，唯一的问题似乎是多个成功标签。我找到[了另一个答案](https://stackoverflow.com/a/5955284/95033)，指出如果您删除“错误”类，则标签不会被清除。[我`removeClass`从您的示例](http://jsfiddle.net/K9b9R/8/)中删除了它，它似乎可以按照您的意愿工作（只有一个标签，颜色正常）。

# java - 覆盖Object类的equals和toString方法的Java程序？

> ID：11298972
> 
> 赞同：1
> 
> 时间：2012-07-02T18:14:50.183
> 
> 标签：java

我在工作中学习 Java，我们应该做的练习如下：

> 创建一个代表骰子的类。创建一个掷骰子的方法（从 1 到 6 的随机数）
> 
> 还要覆盖 Object 类提供的 equals 和 toString 方法。

直接来自没有 Java 经验的 C++，我认为第一部分相对简单。但是，我不确定如何覆盖 equals 和 toString 方法？

到目前为止，这是我的代码，任何建议将不胜感激：

```
package this;

import java.lang.Object;
public class Die
{
    public static void main(String[] args) 
    {
    int die;
    die = (int)(Math.random()*6 + 1);
    System.out.println (die);
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T18:19:07.987

Die 实例应该*代表*一个骰子。Die 类不应是启动 die 的程序应用程序。

Die 有一个状态，即它的当前面值（1 到 6）。滚动它应该使其从当前面值变为另一个面值。

它的`toString()`方法可以说是骰子，说它现在的面值。我真的不明白重写equals（）的意义，因为我不明白为什么一个骰子应该等于另一个骰子。但是，如果它们的面值相同，您可以选择使两个骰子相等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T18:25:38.927

```
public class Die {
  int value;
  public Die() {
    roll;
  }

  public void roll() {
    value = (int)(Math.random()*5 + 1)
  }

  @Override
  public String toString() {
    return "The current value is: " + value;
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T18:29:05.227

覆盖`equals()`告诉实际上使两个对象相等的原因。如果不覆盖`equals()`，则使用默认的 equals `==`。重写`toString()`使程序员有机会定义打印对象时要打印的内容。如果`toString()`没有被覆盖，则使用默认值，它是一个字符串，由对象作为实例的类的名称、at-sign 字符`@`和对象的哈希码的无符号十六进制表示组成。

假设我有一个对象死了

```
public class Die
{
    private Long id;

    private String face;

/**
 * @return the id
 */
public Long getId() {
    return id;
}

/**
 * @param id the id to set
 */
public void setId(Long id) {
    this.id = id;
}
/**
 * @return the face
 */
public String getFace()
{
    return face;
}

/**
 * @param face the face to set
 */
public void setFace(String face)
{
    this.face = face;
}
//Overriding toString
    /**
     * @see java.lang.Object#toString()
     */
    @Override
    public String toString()
    {
        return "The value of the Die Face is = " + getFace();
    }
    //Overriding equals
    @Override
    public boolean equals(final Object obj)
    {
        if (obj instanceof Die)
        {
            Die val = (Die) obj;
            return (val.getFace().equals(this.face));
        }
        return false;
    }

} 
```

如果您有问题，请告诉我。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-02T18:33:35.303

这是一个不可变的 Die。

```
public class Die {

    private int face;

    private Die(int face) {
       this.face = face;
    } 
    public static Die roll() {
       return new Die(Math.random(5) + 1);
    } 

    private int getFace() {
        return face;
    }

    public String toString() {
        return "Die:" + face;
    }

    public boolean equals(Object obj)   {
       if (obj instanceof Die) {
             return face == ((Die) obj).getFace();
       } else {
             return false;
       }
     }

     public int hashCode() {
         return die;
     }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-02T18:16:39.017

[关于覆盖方法的 Java 教程](http://docs.oracle.com/javase/tutorial/java/IandI/override.html)将是一个很好的起点。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-09T20:11:56.447

```
package this;

import java.lang.Object;
public class Die
{
    public static void main(String[] args) 
    {
    int die;
    die = (int)(Math.random()*6 + 1);
    System.out.println (die);
    }
} 
```

应该看起来更像这样：

```
package com.example;

//don't need to import anything in the java.lang package you get this for free  

public class Die  
{  
      private int value; //defaults to 0  

     public static void main(String[] args)  
     {  
         Die die = new Die();  
         die.roll();
         System.out.println(die.toString());
     }  

     public String toString()  
     {
         return "Value: " + value;  
     }
     public int getValue()  
     {
       return this.value;  
     }
     public void roll()  
     {  
        this.value=(int)(Math.random(5)+1);
     } 

public boolean equals(Object obj)   {
       if (obj instanceof Die) {
             return value== ((Die) obj).getValue();
       } else {
             return false;
       }
     }

     public int hashCode() {
         return die;
     }

} 
```

# vbscript - 我在从 Active Directory 检索信息并尝试插入数据库时 收到

> ID：11298976
> 
> 赞同：0
> 
> 时间：2012-07-02T18:14:56.323
> 
> 标签：vbscript, active-directory

我不确定我在这里做错了什么。

我正在尝试从 Active Directory 中检索一些值并将它们插入到我们的 sql server 数据库中。

我在第 23 行“提供者：未指定的错误”上不断收到错误消息

这是第 23 行 --> 设置 adoRecordset = adoCommand.Execute

以下是我正在使用的代码，谢谢：

```
 '==============
Set adoCommand = CreateObject("ADODB.Command")
Set adoConnection = CreateObject("ADODB.Connection")
adoConnection.Provider = "ADsDSOObject"
adoConnection.Open "Active Directory Provider"
adoCommand.ActiveConnection = adoConnection
 ' Search entire Active Directory domain.
Set objRootDSE = GetObject("LDAP://RootDSE")
strDNSDomain = objRootDSE.Get("defaultNamingContext")
strBase = "<LDAP://" & strDNSDomain & ">"
strFilter = "(&(objectCategory=person)(objectClass=user))"
'strFilter = "(&(objectClass=computer)(cn=" & strComputer & "))"
' Comma delimited list of attribute values to retrieve.
'strAttributes = "sAMAccountName,cn"
strAttributes = "employeeID,name,givenName,sname"
' Construct the LDAP syntax query.
strQuery = strBase & ";" & strFilter & ";" & strAttributes & ";subtree"
adoCommand.CommandText = strQuery
adoCommand.Properties("Page Size") = 100
adoCommand.Properties("Timeout") = 30
adoCommand.Properties("Cache Results") = False
' Run the query.
Set adoRecordset = adoCommand.Execute  **<--Error pointing to this line**
' ********  SET UP DB CONNECTION **********
Set dbConn = createobject("ADODB.Connection")
dbConn.ConnectionString = "driver=Sql Server;server=serverName;uid=myuser;pwd=mypwd;database=myDB"
dbConn.Open
' *****************************************
strDetails = ""
' Enumerate the resulting recordset.
Do Until adoRecordset.EOF
    ' Retrieve values and display.
      strEmpID = adoRecordset.Fields("employeeID").Value
      strName = adoRecordset.Fields("name").Value
      strfname = adoRecordset.Fields("givenName").Value
      strlname = adoRecordset.Fields("sname").Value
' ******* INSERT INTO DB *************
      dbConn.Execute "INSERT INTO myTable Values('" & strEmpID & "','" & strName & "','" & strfname & "','" & strlname & "')"
' ************************************
      ' Move to the next record in the recordset.
    adoRecordset.MoveNext
Loop
' Clean up.
adoRecordset.Close
Set adoRecordset = Nothing
adoConnection.Close 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T18:40:20.030

您与 MS SQL Server 的连接字符串 - `"driver=Sql Server; ..."`- 看起来很可疑。使用[连接字符串的源](http://www.connectionstrings.com/)，我希望得到类似的东西`"Provider= ..."`，但如果没有关于版本和访问策略（odbc、oledb、...）的更多信息，很难说。

我在[这里](https://stackoverflow.com/a/11105750/603855)写过关于使用 .udl 文件在 GUI 中试验连接字符串的文章。

# python - 组合 CSV 中两个不同列的所有值

> ID：11298977
> 
> 赞同：0
> 
> 时间：2012-07-02T18:15:05.387
> 
> 标签：python, list

好的，所以我正在导入 CSV，然后我想将所有迭代值`row[0]`与`row[1]`.

```
csvfile = csv.reader(open(filename, 'rb'), delimiter=',')

for row in csvfile:
    row[0] + row[1] 
```

就像那样，除了我希望所有的值`row[0]`与 的所有值结合`row[1]`，即使它们不在同一行。

所以假设我有两列，一列是：

```
asparagus
beets
corn
cucumbers
tomatoes 
```

另一个是：

```
pineapple
orange
apple
raspberry
blueberry 
```

我想让芦笋与列表 2 中的所有内容结合起来，即：

```
asparagus pineapple
asparagus orange
asparagus apple
asparagus raspberry
asparagus blueberry 
```

然后是甜菜菠萝等

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T18:27:18.893

```
In [1]: import csv

In [2]: from itertools import product

In [3]: csvfile = csv.reader(open('filename', 'rb'), delimiter=',')

In [4]: list(product(*zip(*list(csvfile))))
Out[4]: 
[('asparagus', 'pineapple'),
 ('asparagus', 'orange'),
 ('asparagus', 'apple'),
 ('asparagus', 'raspberry'),
 ('asparagus', 'blueberry'),
 ('beets', 'pineapple'),
 ('beets', 'orange'),
 ('beets', 'apple'),
 ('beets', 'raspberry'),
 ('beets', 'blueberry'),
 ('corn', 'pineapple'),
 ('corn', 'orange'),
 ('corn', 'apple'),
 ('corn', 'raspberry'),
 ('corn', 'blueberry'),
 ('cucumbers', 'pineapple'),
 ('cucumbers', 'orange'),
 ('cucumbers', 'apple'),
 ('cucumbers', 'raspberry'),
 ('cucumbers', 'blueberry'),
 ('tomatoes', 'pineapple'),
 ('tomatoes', 'orange'),
 ('tomatoes', 'apple'),
 ('tomatoes', 'raspberry'),
 ('tomatoes', 'blueberry')] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T18:21:06.603

```
csvfile = csv.reader(open(filename, 'rb'), delimiter=',')

combinations = []

for rowa in csvfile:
    for rowb in csvfile:
        combinations.append(rowa[0] + ' ' + rowb[1]) 
```

# jquery - 增加一个依赖于另一个值的数字？

> ID：11298983
> 
> 赞同：-2
> 
> 时间：2012-07-02T18:15:31.697
> 
> 标签：jquery

我需要的是“数据成本”：

```
<input type="radio" class="selection" data-cost="0" value="One" name="f_1"/> 
```

根据“价值”增加：

```
<input type="number" name="q_1" id="q_1" min="50" value="50" data-quantity="f_1" /> 
```

因此，例如，如果客户有 50-100 件商品，则成本将为 0.53。
所以如果`value="50"`我想要`data-cost="0.53"`

如果客户有 100-200 件商品，则成本将为 0.44。
所以如果`value="120"`我愿意`data-cost="0.44"`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T18:21:21.053

像这样的东西？

```
$('input[type="number"]').blur(function(){
   if ( $(this).val() >= 50 && $(this).val() <= 100 ) {
     $('.selection').attr('data-cost', '0.53')
   }
}) 
```

# linux - 为什么我的 .htaccess 文件在我的本地 MAMP 测试服务器上运行良好，但在我的 Linux 生产服务器上却无法运行？

> ID：11298987
> 
> 赞同：0
> 
> 时间：2012-07-02T18:15:48.713
> 
> 标签：linux, apache, .htaccess, mod-rewrite, mamp

我使用 MAMP 在我的 Mac 上开发了一个 Web 应用程序。该应用程序使用 .htaccess 文件，该文件包含在根目录中。在我的本地 MAMP 环境中进行测试时，一切都很好。但是，当我移动到我的托管服务器（运行 Red Hat Linux 的专用服务器）时，我在 .htaccess 文件中的重写规则无法正常工作。例如，当用户登录到我的站点时，重写规则会将他们带到[http://www.mysite.com/authenticate/login](http://www.mysite.com/authenticate/login)（看起来 .htaccess 中的重写规则有效）。但是，我收到 404 文件未找到错误。任何人都可以看到问题是什么？这是 .htaccess 文件中的代码：

```
ErrorDocument 404 /index.php
DirectoryIndex index.php
<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php?page=$1 [L,QSA]
</IfModule>
Options -indexes 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T01:57:28.687

该`AllowOverride`指令是否在生产服务器上正确设置？

[http://httpd.apache.org/docs/2.0/mod/core.html#allowoverride](http://httpd.apache.org/docs/2.0/mod/core.html#allowoverride)

# visual-c++ - 内联汇编崩溃中的变量

> ID：11298989
> 
> 赞同：1
> 
> 时间：2012-07-02T18:16:08.430
> 
> 标签：visual-c++, inline-assembly

当我在某些代码中使用以下代码时，它可以正常工作

```
MOV ECX,DWORD PTR DS:[0x41154]  //Address 
```

但是当我尝试在我的应用程序中将该地址设置为变量然后执行类似的操作

```
MOV ECX,DWORD PTR DS:[PointerAddress] 
```

执行代码时应用程序崩溃，`PointerAddress`当前初始化为

```
DWORD    PointerAddress = 0x41154; 
```

谁能发现有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T18:20:01.877

这里

```
[PointerAddress] 
```

PointerAddress 被视为指针，而不是 DWORD 值。

就像是

```
*(DWORD*)PointerAddress 
```

不喜欢

```
PointerAddress 
```

您执行双重取消引用，因此崩溃。

尝试使用

```
mov eax, PointerAddress
mov ecx, dword ptr ds:[eax] 
```

# javascript - 在 Phonegap 中加载通知

> ID：11298990
> 
> 赞同：1
> 
> 时间：2012-07-02T18:16:10.183
> 
> 标签：javascript, cordova, notifications, spinner, loading

我想使用显示在我的 phonegap 应用程序中加载图像的微调器，因为它从服务器获取它们，必须通知用户。我在互联网上进行了一些搜索，发现 navigator.notification.loadingStart 和 navigator.notification.loadingStop 不能不再使用。我还查看了 phonegap 文档，但我找不到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T03:47:30.257

[在https://github.com/phonegap/phonegap-plugins/](https://github.com/phonegap/phonegap-plugins/)上查看 phonegap 的插件

NoticationEX 是您的追求：

[https://github.com/phonegap/phonegap-plugins/tree/master/iPhone/NotificationEx](https://github.com/phonegap/phonegap-plugins/tree/master/iPhone/NotificationEx)

# android - 进一步帮助：音量按钮模式

> ID：11298995
> 
> 赞同：0
> 
> 时间：2012-07-02T18:16:46.840
> 
> 标签：android, button, volume

这是对我之前提出的问题的建议。它真的和扩展。因此，当按下音量按钮（向下）时，我制定了此代码以拨打/拨打电话号码。主要代码的其余部分（IE：我的拨号/呼叫意图工作正常）我在以下代码部分遇到问题：

```
 }{
    return super.onKeyLongPress(KeyEvent event);
 }} 
```

术语“KeyEvent”和“Event”以红色突出显示。无论如何我可以解决这个问题吗？当其他一切都没有问题时？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T18:19:29.350

用于：

```
public boolean onKeyLongPress(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_VOLUME_DOWN) {
        Log.w("myApp", "LONG PRESS");
    }
    return super.onKeyLongPress(keyCode, event);
} 
```

看到这里[public boolean onKeyLongPress (int keyCode, KeyEvent event)](http://developer.android.com/reference/android/app/Activity.html)方法需要两个参数，第一`keyCode`和第二`event`