# StackOverflow 问答 11679000-11679999

# c++ - OnLButtonDown() is not fired if I click an item in my dialog (ListBox, CheckBox etc) but it fires ok if I click background or Static Text

> ID：11679000
> 
> 赞同：2
> 
> 时间：2012-07-26T22:31:40.380
> 
> 标签：c++, mfc

If I click anywhere on the dialog window, like in the "background", or on a Static Text, the function OnLButtonDown() is fired. But if I click a ListBox/EditBox/Combo/Calendar/Checkbox etc is not fired. I thought that because these have control variables atached to it, and the Static Text don't. But adding a new Listbox to my Dialog and testing, I see that it doesn't fire either, so now I am confused...

I added OnLButtonDown() with the Class Wizard, it appears in:

```
BEGIN_MESSAGE_MAP(CMFCTesting2Dlg, CDialogEx)
    ON_WM_SYSCOMMAND()
// other handlers, etc
    ON_WM_LBUTTONDOWN()
    ON_WM_LBUTTONUP()
END_MESSAGE_MAP() 
```

My function:

```
void CMFCTesting2Dlg::OnLButtonDown(UINT nFlags, CPoint point)
{
    AfxMessageBox(CString("BUTTON DOWN"));
    CDialogEx::OnLButtonDown(nFlags, point);
} 
```

I tried calling CDialogEx:: ... before AfxMessageBox... but same result.

The CListBox item, has the Notify option set to True, as I seen some advices in other posts.

I suspect that the WM notification message is captured somehow by the ListBox, and not sent "forward" to my CMFCTesting2Dlg, but I understood that this should happen with the Notify option set to True, on the ListBox, no? (well, obviously, not...)

Sorry, I am new to dealing with WM in MFC.

BTW, I use Visual Studio 2010 Ultimate, and this is a Visual C++ - MFC- MFC Application - Dialog Based project.

How can I capture this mouse down event if clicked on a listbox / combo / etc?

On the LONG STORY, I am actually trying to accomplish this issue: I have two listboxes (lets say), and I want to scroll them synchronously, when user scrolls one of them, others must scroll the same (or update in the next moment). And I thought of using on mouse down to track the position of every Listbox (with the GetTopIndex), and on mouse up, to GetTopIndex again and compare with the previous ones. If a change was made, then a listbox was scrolled and then update all listboxes with SetTopIndex. The unfriendly solution for the user, but simpler for me, would be clicking a button that does this verification / update, but its not elegant at all, and it can only set them at the same level, but can't determine which one was scrolled last time. This automatically scrolling of the listboxes should be made just for displaying, it is not important the selections in the listboxes. I tried using the Message Type in the Add Event Handler for the Listbox, but none that are displayed work for my problem, KillFocus and SetFocus, are not fired if the scroll-bar is dragged, only if an item in the listbox is clicked... and I didn't succeed on the others message type either, from the Add Event Handler.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T02:13:38.983

至于让列表控件同步滚动，最好的办法是通过继承 CListCtrl 或 PreTranslateMessage 来拦截 WM_VSCROLL，然后在另一个列表上调用 SetScrollInfo。如果列表中的项目数相同，则应该相当简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T22:46:34.170

一旦一个窗口处理了一条消息，它就会停止发送到它下面的其他窗口。静态窗口不处理鼠标按下，因此它进入对话框。其他控件都以某种方式处理它（至少设置焦点），因此它永远不会进入对话框。

您可以在每个控件中覆盖 OnLButtonDown 处理程序，以便在它们完成基类中的默认处理后执行其他操作。您可能还会在对话框的 PreTranslateMessage 方法中看到消息。

# actionscript-3 - 如何检查一个数组是否包含另一个数组？

> ID：11679013
> 
> 赞同：3
> 
> 时间：2012-07-26T22:33:04.757
> 
> 标签：actionscript-3, flash

乍一看，这很简单，但在不使用大量嵌套循环的情况下，我会遇到一些问题。

例子：

```
var father:Array = new Array(0,1,2,3,4,5);
var son:Array = new Array(3,4,5);

father.contains(son) // returns true or 4(the starting index if the contained array) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T22:50:01.120

ActionScript 3 实际上支持一些有点疯狂的东西，因为在早期，Adobe/Macromedia 试图使其与 Ecmascript 兼容。

所以......你可以这样做：

```
var a1:Array = [1,2,3,4,5,6,7,8,9];
var a2:Array = [3,4,5];

// borrow String's indexOf function, and it magically works on Arrays
// but rename it because Array already has a different indexOf function
a1.indexOf2 = String.prototype.indexOf;

trace(a1.indexOf2(a2) > -1); // true 
```

但是您需要小心一点，因为它会将所有元素转换为字符串以进行相等性测试。对于原语来说，这几乎无关紧要，但它会严重破坏对象，因为它们都将被转换为`"[object Object]"`或任何它们的`toString()`返回值。

此外，如果您想对任何东西使用实际索引，而不仅仅是检查它不是 -1，您必须除以 2，因为该数字是您期望的两倍。我不完全知道这是为什么:)

如果您需要更通用和更可靠的东西，最好编写一个函数来进行显式搜索。这是一个简单的例子，我刚刚写的很容易被错误缠身：

```
 public function find(haystack:Array, needle:Array):int 
    {
        var index:int = -1;
        while(index <= haystack.length - needle.length)
        {
            index++;
            index = haystack.indexOf(needle[0], index);
            for( var i:int = 1; i<needle.length; i++)
            {
                if(haystack[index+i] != needle[i])
                {
                    continue;
                }
            }
            if( i == needle.length)
            {
                return index;
            }
        }
        return -1;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T14:51:16.580

为了简单起见，试试这个：

```
// Determines if an array contains en element (similar to the PHP function with the same name)
public function in_array(needle:*, haystack:Array):Boolean 
{
    for each (var element:* in haystack)
    {
        if (element == needle) {return true;}
    }
    return false;
} 
```

# scala - Java <-> Scala 集合转换，Scala 2.10

> ID：11679016
> 
> 赞同：9
> 
> 时间：2012-07-26T22:33:19.257
> 
> 标签：scala, scala-collections

查看 and 中的代码`JavaConversions`，`JavaConverters`我不确定在 Java 和 Scala 集合（在任一方向）之间转换的“正确”方式（使用 2.10）是。

似乎有很多 @deprecated 注释。

Scala 团队（Typesafe？）的明确答案是否已发布？

谢谢，约翰

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-12-28T17:24:32.850

这是危险的典型例子`import JavaConversions._`：

```
scala> val m = Map(1 -> "one")
m: scala.collection.immutable.Map[Int,String] = Map(1 -> one)

scala> m.contains(1)
res0: Boolean = true

scala> m.contains("")
<console>:9: error: type mismatch;
 found   : String("")
 required: Int
              m.contains("")
                         ^

scala> import collection.JavaConversions._
import collection.JavaConversions._

scala> m.contains("")
res2: Boolean = false 
```

编译器没有发出类型错误，而是将 Scala 转换`Map`为 a `java.util.Map`，它有一个更宽松的签名来接受`Object`.

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-26T22:50:41.973

我不知道有任何这样的声明，但您应该始终使用`JavaConverters`，即要求您使用`.asScala`and指示转换的声明`.asJava`。

据我了解，`JavaConverters`是在 2.8.1 中引入的，因为`JavaConversions`2.8 中的 2.8 很危险，并且很容易意外地转换出你没有预料到的东西。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-27T15:57:20.853

两者以不同的方式工作：

*   使用 JavaConverters，您的对象将被添加到一个支持 asScala 和 asJava 的类中，这使您可以以编程方式转换您的集合。

*   使用 JavaConversions，Java/Scala 集合将在需要时自动转换

后者的风险是获得错误或不必要的转换，从而导致性能故障。另外，至少在 Scala 2.9 中没有隐式转换的缓存，即如果在一个方法中应用了两次相同的转换，则转换代码会被调用两次。

当您显式转换集合时，如果您在“Java”版本中需要它，您将避免在同一方法中调用两次 .asScala。

# r - 使用基本图形重新创建 ggplot2 geom_point()

> ID：11679019
> 
> 赞同：5
> 
> 时间：2012-07-26T22:33:28.537
> 
> 标签：r, plot, ggplot2

我有以下 ggplot2 代码，我想使用基本图形而不是 ggplot2 来生成类似的输出 - 但我似乎无法找到一种方法来区分多个“属性”与正常情节。我错过了什么吗：

ggplot2：

```
ggplot(data.df, aes(x=Axis1, y=Axis2, shape=Plant, color=Type)) +
geom_point() 
```

我的情节尝试（内联帮助让我很了解）：

```
data.ma <- as.matrix(data.df)

plot(range(data.ma[,6]), range(data.ma[,7]),xlab="Axis 1",ylab="Axis 2")
points(data.ma[data.ma[,1] == 'Plant1',6],
   data.ma[data.ma[,1] == 'Plant1',7], pch=2)
points(data.ma[data.ma[,1] == 'Plant2',6],
   data.ma[data.ma[,1] == 'Plant2',7], pch=3)
legend(0,legend=c("Plant1","Plant2")) 
```

这给了我一个情节，其中至少可以在情节中区分“植物”类型，但它看起来确实很复杂，我无法弄清楚如何根据“类型”行更改所有点的颜色。

有什么建议么？

编辑 - 一个带有数据的例子 // 我意识到我第一次尝试 plot 甚至没有给出一个正确的例子:(:

```
library(ggplot2)
data.df <- data.frame(
  Plant=c('Plant1','Plant1','Plant1','Plant2','Plant2','Plant2'),
  Type=c(1,2,3,1,2,3),
  Axis1=c(0.2,-0.4,0.8,-0.2,-0.7,0.1),
  Axis2=c(0.5,0.3,-0.1,-0.3,-0.1,-0.8)
)

ggplot(data.df, aes(x=Axis1, y=Axis2, shape=Plant, color=Type)) +
geom_point()

data.ma <- as.matrix(data.df)
plot(range(data.ma[,3]), range(data.ma[,4]),xlab="Axis 1",ylab="Axis 2")
points(data.ma[data.ma[,1] == 'Plant1',3],
       data.ma[data.ma[,1] == 'Plant1',4], pch=2)
points(data.ma[data.ma[,1] == 'Plant2',3],
       data.ma[data.ma[,1] == 'Plant2',4], pch=3)
legend(0,legend=c("Plant1","Plant2")) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T23:48:42.863

我正要发布这个，然后我看到贾斯汀打败了它。无论如何，这包括一些基本的传说：

```
color_foo <- colorRampPalette(c('lightblue','darkblue'))
colors <- color_foo(3)

plot(range(data.df[,3]), range(data.df[,4]),
        xlab="Axis 1",ylab="Axis 2",type = "n")
points(data.df$Axis1,data.df$Axis2,
        pch=c(3,4)[data.df$Plant],
        col = colors[data.df$Type])
legend("topright",legend=c("Plant1","Plant2"),pch = 3:4)
legend("bottomright",legend=c("Type1","Type2","Type3"),
        pch = 20,col = colors) 
```

![在此处输入图像描述](../Images/02c46d73128853a7fc4a1513defa50c6.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T23:20:35.443

使用基础图和您的数据集：

```
with(data.df, 
     plot(x = Axis1, 
          y = Axis2, 
          col = factor(Type),                 
          pch = as.integer(factor(Plant)))) 
```

这是否符合您的要求？我将把传说留给读者作为练习......

# python - Python/SWIG：输出一个数组

> ID：11679023
> 
> 赞同：7
> 
> 时间：2012-07-26T22:33:37.180
> 
> 标签：python, return-value, swig

我正在尝试从使用 SWIG for Python 包装的 C 函数输出值数组。我尝试做的方式是使用以下类型映射。

伪代码：

```
int oldmain() {
float *output = {0,1};
return output;
} 
```

类型图：

```
%typemap(out) float* { 
   int i; 
  $result = PyList_New($1_dim0); 
   for (i = 0; i < $1_dim0; i++) { 
 PyObject *o = PyFloat_FromDouble((double) $1[i]); 
 PyList_SetItem($result,i,o); 
 } 
} 
```

我的代码编译得很好，但是当我运行访问这个函数时它挂起（没有更多的方法来调试它）。

关于我哪里出错的任何建议？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-27T07:40:27.670

允许长度变化的最简单方法是添加另一个输出参数，该参数也告诉您数组的大小：

```
%module test

%include <stdint.i>

%typemap(in,numinputs=0,noblock=1) size_t *len  {
  size_t templen;
  $1 = &templen;
}

%typemap(out) float* oldmain {
  int i;
  $result = PyList_New(templen);
  for (i = 0; i < templen; i++) {
    PyObject *o = PyFloat_FromDouble((double)$1[i]);
    PyList_SetItem($result,i,o);
  }
}

%inline %{
float *oldmain(size_t *len) {
  static float output[] = {0.f, 1.f, 2, 3, 4};
  *len = sizeof output/sizeof *output;
  return output;
}
%} 
```

这是从[这个答案](https://stackoverflow.com/a/11680521/168175%5D)修改为添加`size_t *len`可用于在运行时返回数组的长度。类型映射完全隐藏了 Python 包装器的输出，而是使用它`%typemap(out)`而不是固定大小来控制返回列表的长度。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-27T02:05:08.000

这应该可以帮助您：

```
/* example.c */

float * oldmain() {
    static float output[] = {0.,1.};
    return output;
} 
```

您在这里返回一个指针，而 swig 不知道它的大小。普通的 $1_dim0 是行不通的，所以你必须硬编码或做一些其他的魔法。像这样的东西：

```
/* example.i */
%module example
%{
 /* Put header files here or function declarations like below */
  extern float * oldmain();
%}

%typemap(out) float* oldmain {
  int i;
  //$1, $1_dim0, $1_dim1
  $result = PyList_New(2);
  for (i = 0; i < 2; i++) {
    PyObject *o = PyFloat_FromDouble((double) $1[i]);
    PyList_SetItem($result,i,o);
  }
}

%include "example.c" 
```

然后在python中你应该得到：

```
>> import example
>> example.oldmain()
[0.0, 1.0] 
```

添加类型映射时，您可能会发现`-debug-tmsearch`非常方便，即

```
swig -python -debug-tmsearch example.i 
```

在为`float *oldmain`. 此外，如果您只是想访问 c 全局变量数组，您可以使用 typemap for`varout`而不是 just来执行相同的技巧`out`。

# java - 为什么我的 TextView 不能正确显示其字符串？

> ID：11679028
> 
> 赞同：0
> 
> 时间：2012-07-26T22:34:07.930
> 
> 标签：java, android

我正在使用我正在阅读的 android 编程书中的一个示例。这个练习的重点是，当我单击“关于”按钮时，应该会启动一个新活动并显示一些文本。由于某种原因，即使文本显示在我的 IDE 的图形布局中，文本也没有显示。我正在使用我的手机作为模拟器，我的手机运行的是 Android 4.0.3。我正在使用日食。这是我的代码：

主要活动：

```
package org.example.sodoku;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;

public class Sudoku extends Activity implements OnClickListener   {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        View continueButton= findViewById(R.id.continue_button);
        continueButton.setOnClickListener(this);
        View newButton= findViewById(R.id.new_button);
        newButton.setOnClickListener(this);
        View aboutButton= findViewById(R.id.about_button);
        aboutButton.setOnClickListener(this);
        View exitButton= findViewById(R.id.exit_button);
        exitButton.setOnClickListener(this);
    }

    public void onClick(View v) {
        // TODO Auto-generated method stub

        switch (v.getId()){
        case R.id.about_button:
            Intent i = new Intent(this, About.class);
            startActivity(i);
            break;
        }

    }
} 
```

主要的xml：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout
   xmlns:android="http://schemas.android.com/apk/res/android"
   android:orientation="vertical"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   android:background="@color/background"
   android:gravity="center"
   android:padding="35dip">
   <TextView
      android:text="@string/main_title"
      android:layout_height="wrap_content"
      android:layout_width="wrap_content"
      android:layout_gravity="center"
      android:layout_marginBottom="20dip"
      android:textSize="24.5sp" />
   <TableLayout
      android:layout_height="wrap_content"
      android:layout_width="wrap_content"
      android:layout_gravity="center"
      android:stretchColumns="*">
      <TableRow>
         <Button
            android:id="@+id/continue_button"
            android:text="@string/continue_label" />
         <Button
            android:id="@+id/new_button"
            android:text="@string/new_game_label" />
      </TableRow>
      <TableRow>
         <Button
            android:id="@+id/about_button"
            android:text="@string/about_label" />
         <Button
            android:id="@+id/exit_button"
            android:text="@string/exit_label" />
      </TableRow>
   </TableLayout>
</LinearLayout> 
```

关于班级：

```
package org.example.sodoku;

import android.app.Activity;
import android.os.Bundle;

public class About extends Activity {
    protected void OnCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.about);

    }

} 
```

关于xml：

```
<?xml version="1.0" encoding="utf-8"?>

<ScrollView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:padding="10dip">

    <TextView
        android:id="@+id/about_content"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/about_text" >
</TextView>

    </ScrollView> 
```

[编辑] 忘记了字符串 xml 和清单：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <string name="hello">Hello World, Sudoku!</string>
    <string name="app_name">Sudoku</string>
    <string name="main_title">Android Sodoku</string>
    <string name="continue_label">Continue</string>
    <string name="new_game_label">New Game</string>
    <string name="about_label">About</string>
    <color name="background">#3500ffff</color>
    <string name="exit_label">Exit</string>
    <string name="about_title">About Android Sudoku</string>
    <string name="about_text">fuck your ethnicity</string>
</resources> 
```

显现：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="org.example.sodoku"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="10" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".Sudoku"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity 
            android:name=".About"
            android:label="@string/about_title">
        </activity>
    </application>

</manifest> 
```

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T23:16:11.300

您在 About 活动中拼错`onCreate()`了方法（比较`OnCreate()`和`onCreate()`），因此您实际上并没有覆盖基类方法。用这个替换你的 onCreate：

```
@Override
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.about);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T22:45:10.863

它可能会帮助你。使用这个作为about.xml。

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/scroller"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:fillViewport="true" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center_horizontal"
        android:orientation="vertical" >

   <TextView
        android:id="@+id/about_content"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/about_text" >
   </TextView>

   </LinearLayout>

</ScrollView> 
```

# php - 为什么不鼓励使用“mysql_connect”？有哪些替代方案？

> ID：11679033
> 
> 赞同：5
> 
> 时间：2012-07-26T22:35:04.793
> 
> 标签：php, mysql, wamp, deprecated

我正在尝试通过 PHP 了解数据库管理和 MySQL。问题是我见过的[所有](http://www.webmonkey.com/2010/02/PHP_and_MySQL_Tutorial_-_Lesson_2) [教程都](http://www.tizag.com/mysqlTutorial/mysqlconnection.php)[在](http://zetcode.com/databases/mysqlphptutorial/) 使用，并且根据[文档](http://php.net/manual/en/function.mysql-connect.php)是不好的。使用函数有什么问题，有什么替代方法？如果有任何免费的在线教程，请发布链接。`mysql_connect``mysql_*`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T19:29:24.047

您可以尝试使用“*改进*`mysqli`”的`i`代表来访问您的数据库，它提供了比连接器更多的功能，或者您也可以使用*PHP 数据对象*的wich 代表，这是我更喜欢的一种，因为它可以让您使用更多只是*MySQL*作为数据库。*`mysql``PDO`*

 ***[PDO 链接](http://www.php.net/manual/en/book.pdo.php)
[mysqli 链接](http://us2.php.net/manual/en/book.mysqli.php)***

# mysql - 具有一个而不是三个唯一字段的成员表

> ID：11679035
> 
> 赞同：0
> 
> 时间：2012-07-26T22:35:20.220
> 
> 标签：mysql, user-registration

在几乎每个通过创建mysql joinUs 表的代码示例中，都有这样的代码：

```
CREATE TABLE `members` (
`id` int(10) unsigned NOT NULL auto_increment,
`username` text, //unique
`email` text, //unique
`pass` text,
PRIMARY KEY  (`id`) 
```

那么，如果用户名和/或电子邮件被设置为唯一，那么 id 字段的用途是什么？
我可以简单地将用户名设置为主键并从表中排除 id 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T22:40:26.733

Id 是一个很好的约定，因为它永远不会改变。这让其他表可以通过他们的 id 引用用户，并使您能够让用户更改他们的用户名和电子邮件。话虽如此，是的，您可以使用用户名作为主键。

# android - replaceContactWithContactId:contactId==0（更新facebook状态失败）

> ID：11679038
> 
> 赞同：1
> 
> 时间：2012-07-26T22:35:34.623
> 
> 标签：android, facebook

嗨，我正在尝试制作一个小应用程序以在 myfacebookwall 上发布。但状态没有更新。奇怪的是，log cat 错误显示就像手机用来连接到 facebook 的邮件 ID 被 gmail 取代，但应用程序没有崩溃。
任何帮助将不胜感激

代码是这样的：

```
package com.ketanoexample.facebooktrial;

import java.io.IOException;
import java.net.MalformedURLException;

import android.app.Activity;
import android.content.Intent;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.Toast;

import com.facebook.android.DialogError;
import com.facebook.android.Facebook;
import com.facebook.android.Facebook.DialogListener;
import com.facebook.android.FacebookError;

public class fbshare extends Activity  {

Facebook facebook = new Facebook("425034397547522");
private SharedPreferences mPrefs;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.bshare_layout);
    Button btn = (Button) findViewById(R.id.btnfb);
    btn.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            compartirconfb();
        }
    });

}

public void updateStatus(String accessToken){
    try {
        Bundle bundle = new Bundle();
        bundle.putString("message", "test status update made by gezn-Automated response app social handler");
        bundle.putString(Facebook.TOKEN,accessToken);
        String response = facebook.request("me/feed",bundle,"POST");
        showToast("Update process complete. Respose:"+response);
        Log.d("UPDATE RESPONSE",""+response);
    } catch (MalformedURLException e) {
        Log.e("MALFORMED URL",""+e.getMessage());
    } catch (IOException e) {
        Log.e("IOEX",""+e.getMessage());
    }
}
private void showToast(String message){
    Toast.makeText(getApplicationContext(), message, Toast.LENGTH_LONG).show();
}

private void compartirconfb() {
    // TODO Auto-generated method stub
    /*
     * Get existing access_token if any
     */
    mPrefs = getPreferences(MODE_PRIVATE);
    String access_token = mPrefs.getString("access_token", null);
    long expires = mPrefs.getLong("access_expires", 0);
    if(access_token != null) {
        facebook.setAccessToken(access_token);
    }
    if(expires != 0) {
        facebook.setAccessExpires(expires);
    }

    /*
     * Only call authorize if the access_token has expired.
     */
    if(!facebook.isSessionValid()) {

    facebook.authorize(this,new String[] { "email", "publish_stream" }, new DialogListener() {
        @Override
        public void onComplete(Bundle values) {
            SharedPreferences.Editor editor = mPrefs.edit();
            editor.putString("access_token", facebook.getAccessToken());
            editor.putLong("access_expires", facebook.getAccessExpires());
            editor.commit();
            updateStatus(values.getString(Facebook.TOKEN));

        }

        @Override
        public void onFacebookError(FacebookError error) {}

        @Override
        public void onError(DialogError e) {}

        @Override
        public void onCancel() {}
    });
}   
}
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    facebook.authorizeCallback(requestCode, resultCode, data);
}

} 
```

日志猫是这样的，注意我在 facebook SDK 的 Util.java 上启用了 log true，因为我之前看不到错误。

```
07-26 18:44:34.399: D/dalvikvm(5676): GC_CONCURRENT freed 405K, 45% free 3765K/6727K, external 0K/0K, paused 4ms+6ms
07-26 18:44:43.049: D/dalvikvm(5676): GC_EXPLICIT freed 85K, 46% free 3680K/6727K, external 0K/0K, paused 83ms
07-26 18:44:54.339: I/wpa_supplicant(1551): CTRL-EVENT-DISCONNECTED - Disconnect event - remove keys
07-26 18:44:54.339: V/WifiMonitor(1428): Event [CTRL-EVENT-DISCONNECTED - Disconnect event - remove keys]
07-26 18:44:54.339: V/WifiStateTracker(1428): New network state is DISCONNECTED
07-26 18:44:54.349: I/wpa_supplicant(1551): CTRL-EVENT-STATE-CHANGE id=12 state=0 BSSID=00:00:00:00:00:00
07-26 18:44:54.349: V/WifiMonitor(1428): Event [CTRL-EVENT-STATE-CHANGE id=12 state=0 BSSID=00:00:00:00:00:00]
07-26 18:44:54.349: V/WifiStateTracker(1428): Changing supplicant state: COMPLETED ==> DISCONNECTED
07-26 18:44:54.439: I/wpa_supplicant(1551): CTRL-EVENT-STATE-CHANGE id=12 state=2 BSSID=00:00:00:00:00:00
07-26 18:44:54.439: V/WifiMonitor(1428): Event [CTRL-EVENT-STATE-CHANGE id=12 state=2 BSSID=00:00:00:00:00:00]
07-26 18:44:54.439: V/WifiStateTracker(1428): Changing supplicant state: DISCONNECTED ==> SCANNING
07-26 18:44:54.909: D/wifi(1428): wifi doCommand: ret=-1
07-26 18:44:55.669: I/wpa_supplicant(1551): Trying to associate with 00:23:cd:1c:b7:e2 (SSID='kawsaytaraj' freq=2432 MHz)
07-26 18:44:55.669: I/wpa_supplicant(1551): CTRL-EVENT-STATE-CHANGE id=12 state=3 BSSID=00:23:cd:1c:b7:e2
07-26 18:44:55.679: V/WifiMonitor(1428): Event [Trying to associate with 00:23:cd:1c:b7:e2 (SSID='kawsaytaraj' freq=2432 MHz)]
07-26 18:44:55.689: V/WifiMonitor(1428): Event [CTRL-EVENT-STATE-CHANGE id=12 state=3 BSSID=00:23:cd:1c:b7:e2]
07-26 18:44:55.689: V/WifiStateTracker(1428): Changing supplicant state: SCANNING ==> ASSOCIATING
07-26 18:44:56.279: I/wpa_supplicant(1551): CTRL-EVENT-STATE-CHANGE id=12 state=4 BSSID=00:23:cd:1c:b7:e2
07-26 18:44:56.279: V/WifiMonitor(1428): Event [CTRL-EVENT-STATE-CHANGE id=12 state=4 BSSID=00:23:cd:1c:b7:e2]
07-26 18:44:56.279: V/WifiStateTracker(1428): Changing supplicant state: ASSOCIATING ==> ASSOCIATED
07-26 18:44:56.289: I/wpa_supplicant(1551): Associated with 00:23:cd:1c:b7:e2
07-26 18:44:56.289: V/WifiMonitor(1428): Event [Associated with 00:23:cd:1c:b7:e2]
07-26 18:44:56.299: I/wpa_supplicant(1551): CTRL-EVENT-STATE-CHANGE id=12 state=5 BSSID=00:00:00:00:00:00
07-26 18:44:56.299: V/WifiMonitor(1428): Event [CTRL-EVENT-STATE-CHANGE id=12 state=5 BSSID=00:00:00:00:00:00]
07-26 18:44:56.309: V/WifiStateTracker(1428): Changing supplicant state: ASSOCIATED ==> FOUR_WAY_HANDSHAKE
07-26 18:44:56.350: I/wpa_supplicant(1551): CTRL-EVENT-STATE-CHANGE id=12 state=5 BSSID=00:00:00:00:00:00
07-26 18:44:56.350: V/WifiMonitor(1428): Event [CTRL-EVENT-STATE-CHANGE id=12 state=5 BSSID=00:00:00:00:00:00]
07-26 18:44:56.359: V/WifiStateTracker(1428): Changing supplicant state: FOUR_WAY_HANDSHAKE ==> FOUR_WAY_HANDSHAKE
07-26 18:44:56.359: I/wpa_supplicant(1551): CTRL-EVENT-STATE-CHANGE id=12 state=6 BSSID=00:00:00:00:00:00
07-26 18:44:56.359: V/WifiMonitor(1428): Event [CTRL-EVENT-STATE-CHANGE id=12 state=6 BSSID=00:00:00:00:00:00]
07-26 18:44:56.369: V/WifiStateTracker(1428): Changing supplicant state: FOUR_WAY_HANDSHAKE ==> GROUP_HANDSHAKE
07-26 18:44:56.369: I/wpa_supplicant(1551): WPA: Key negotiation completed with 00:23:cd:1c:b7:e2 [PTK=CCMP GTK=TKIP]
07-26 18:44:56.369: V/WifiMonitor(1428): Event [WPA: Key negotiation completed with 00:23:cd:1c:b7:e2 [PTK=CCMP GTK=TKIP]]
07-26 18:44:56.369: I/wpa_supplicant(1551): CTRL-EVENT-STATE-CHANGE id=12 state=7 BSSID=00:00:00:00:00:00
07-26 18:44:56.369: V/WifiMonitor(1428): Event [CTRL-EVENT-STATE-CHANGE id=12 state=7 BSSID=00:00:00:00:00:00]
07-26 18:44:56.369: V/WifiStateTracker(1428): Changing supplicant state: GROUP_HANDSHAKE ==> COMPLETED
07-26 18:44:56.369: I/wpa_supplicant(1551): CTRL-EVENT-CONNECTED - Connection to 00:23:cd:1c:b7:e2 completed (reauth) [id=12 id_str=]
07-26 18:44:56.369: V/WifiMonitor(1428): Event [CTRL-EVENT-CONNECTED - Connection to 00:23:cd:1c:b7:e2 completed (reauth) [id=12 id_str=]]
07-26 18:44:56.369: V/WifiStateTracker(1428): New network state is CONNECTED
07-26 18:44:56.379: D/WifiStateTracker(1428): Reset connections and stopping DHCP
07-26 18:44:56.399: W/Smack/Packet(1582): notify conn break (IOEx), close connection
07-26 18:44:56.399: D/Smack(1582): [XMPPConn] close connection, notifyClosed=false
07-26 18:44:56.429: D/dhcpcd(6058): received SIGTERM, stopping
07-26 18:44:56.429: D/dhcpcd(6058): deleting route 0.0.0.0/0 via 192.168.0.1
07-26 18:44:56.429: D/dhcpcd(6058): deleting IP address 192.168.0.102/24
07-26 18:44:56.429: D/dhcpcd(6058): executing `/system/etc/dhcpcd/dhcpcd-run-hooks', reason STOP
07-26 18:44:56.559: D/GTalkService(1582): [GTalkConnection.21] connectionClosed: connId=22690, error=CONNECTION FAILED
07-26 18:44:57.439: D/WifiStateTracker(1428): DHCP request started
07-26 18:44:57.449: D/dhcpcd(6119): dhcpcd 4.0.15 starting
07-26 18:44:57.449: D/dhcpcd(6119): hardware address = 58:17:0c:43:74:29
07-26 18:44:57.449: D/dhcpcd(6119): executing `/system/etc/dhcpcd/dhcpcd-run-hooks', reason PREINIT
07-26 18:44:57.469: D/dhcpcd(6119): host does not support a monotonic clock - timing can skew
07-26 18:44:57.469: D/dhcpcd(6119): broadcasting for a lease
07-26 18:44:57.479: D/dhcpcd(6119): sending DHCP_DISCOVER with xid 0x1c3d4b6a, next in 4.55 seconds
07-26 18:44:57.479: D/dhcpcd(6119): offered 192.168.0.102 from 192.168.0.1
07-26 18:44:57.479: D/dhcpcd(6119): sending DHCP_REQUEST with xid 0x1c3d4b6a, next in 4.76 seconds
07-26 18:44:57.489: D/dhcpcd(6119): acknowledged 192.168.0.102 from 192.168.0.1
07-26 18:44:57.489: D/dhcpcd(6119): checking 192.168.0.102 is available on attached networks
07-26 18:44:57.489: D/dhcpcd(6119): sending ARP probe (1 of 3), next in 1.54 seconds
07-26 18:44:59.039: D/dhcpcd(6119): sending ARP probe (2 of 3), next in 1.47 seconds
07-26 18:44:59.379: W/WifiStateTracker(1428): Skip RssiApprox, not connected...
07-26 18:45:00.516: D/dhcpcd(6119): sending ARP probe (3 of 3), next in 2.00 seconds
07-26 18:45:02.379: W/WifiStateTracker(1428): Skip RssiApprox, not connected...
07-26 18:45:02.516: D/dhcpcd(6119): leased 192.168.0.102 for 7200 seconds
07-26 18:45:02.516: D/dhcpcd(6119): adding IP address 192.168.0.102/24
07-26 18:45:02.519: D/dhcpcd(6119): adding route to 0.0.0.0/0 via 192.168.0.1
07-26 18:45:02.519: D/dhcpcd(6119): executing `/system/etc/dhcpcd/dhcpcd-run-hooks', reason BOUND
07-26 18:45:03.443: D/WifiStateTracker(1428): DHCP succeeded with lease: 7200
07-26 18:45:03.449: V/WifiStateTracker(1428): IP configuration: ipaddr 192.168.0.102 gateway 192.168.0.1 netmask 255.255.255.0 dns1 200.87.100.10 dns2 200.87.100.40 DHCP server 192.168.0.1 lease 7200 seconds
07-26 18:45:03.509: D/WifiWatchdogService(1428): (android.server.ServerThread) kawsaytaraj (00:23:cd:1c:b7:e2) does not require the watchdog
07-26 18:45:03.519: D/GTalkService(1582): ##### Network broadcast (connected=true) type=WIFI, state=CONNECTED
07-26 18:45:03.519: D/GTalkService(1582): [GTalkConnection.1] setInternalNetworkState: type=1, state=CONNECTED
07-26 18:45:03.529: D/CMStats(5741): CONNECTIVITY_ACTION: noConnectivity = false
07-26 18:45:03.529: D/CMStats(5741): CONNECTIVITY_ACTION: starting service
07-26 18:45:03.559: D/CMStats(5741): User has not opted in -- skipping reporting.
07-26 18:45:03.589: D/Tethering(1428): MasterInitialState.processMessage what=3
07-26 18:45:03.639: I/MediaUploader(5758): No need to wake up
07-26 18:45:04.573: D/dhcpcd(6119): sending ARP announce (1 of 2), next in 2.00 seconds
07-26 18:45:05.049: D/dalvikvm(1582): GC_CONCURRENT freed 372K, 44% free 3827K/6791K, external 0K/512K, paused 5ms+10ms
07-26 18:45:06.580: D/dhcpcd(6119): sending ARP announce (2 of 2)
07-26 18:45:06.580: D/dhcpcd(6119): renew in 3596 seconds
07-26 18:45:06.859: D/GTalkService(1582): [RosterListenerImpl] removeTalkPresence for account=1, deleted=18
07-26 18:45:06.869: D/GTalkService(1582): [ContactPresence] removeAllContactsPresence: account=1, set null presence for 4
07-26 18:45:07.379: D/GTalkService(1582): [RosterMgr] roster not modified
07-26 18:45:07.409: E/TalkProvider(1582): replaceContactWithContactId: contactId==0!!! pedro.gezn@gmail.com, acct=1
07-26 18:45:07.409: E/TalkProvider(1582): insert presence failed for account=1 username=pedro.gezn@gmail.com client_type=0 status= cap=8 priority=0 mode=3
07-26 18:45:07.439: D/GTalkService(1582): [OtrMgr] OTR not modified 
```

# python - 使用 gen.task 和 Tornado 来实现一个简单的功能

> ID：11679040
> 
> 赞同：11
> 
> 时间：2012-07-26T22:35:40.120
> 
> 标签：python, asynchronous, web, tornado

只是尝试使用 Tornado 的异步函数——我想从我的处理程序中调用一个方法，但它一直告诉我它“得到了一个意外的关键字参数‘回调’”。

```
class MyHandler(tornado.web.RequestHandler):

    @asynchronous
    @gen.engine
    def get(self):
        response = yield gen.Task(self.dosomething, 'argument')
        self.write(response)
        self.finish()

    def dosomething(self, myargument):
        pass 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-27T07:07:55.007

非阻塞函数需要回调，它传递结果。

```
class MyHandler(tornado.web.RequestHandler):

    @asynchronous
    @gen.engine
    def get(self):
        response = yield gen.Task(self.dosomething, 'argument')
        self.write(response)
        self.finish()

    def dosomething(self, myargument, callback):
        return callback(myargument) 
```

# c - 带有数组和指针的 C 字符串函数 (strcopy,strcat...,strstr)

> ID：11679050
> 
> 赞同：1
> 
> 时间：2012-07-26T22:36:58.963
> 
> 标签：c, arrays, string, pointers

每当我在 dev-C++ 中使用这些功能之一时（我知道它很旧，但由于某种原因仍在我的大学任教。）

```
strcat,strcpy,strcmp,strchr...//And their variants stricmp... 
```

这些函数的第一个参数必须是一个数组（即：

```
char ch[]="hello"; 
```

但由于某种原因，它不能是指向字符串 bc 的指针，这会导致崩溃。事实上，看看这两个代码的例子：

代码1：

```
#include<stdio.h>
#include<string.h>
main()
{char ch[20]="Hello world!";
 char *ch2="Hello Galaxy!";
 strcat(ch,ch2);
 printf("%s",ch);
 scanf("%d")//Just to see the output.
} 
```

此代码工作正常并给出了预期的结果（Hello World！Hello Galaxy！）

但是逆code2崩溃了。

代码2：

```
#include<stdio.h>
#include<string.h>
main()
{char ch[20]="Hello world!";
 char *ch2="Hello Galaxy!";
 strcat(ch2,ch);
 printf("%s",ch2);
 scanf("%d")//Just to see the output.
} 
```

此代码崩溃并导致

```
file.exe has stopped working Error. 
```

这对于几乎所有带有两个参数的字符串函数都是一样的。这个问题的原因是什么。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-26T22:39:11.303

随着`char *ch2 = "Hello Galaxy!";`您获得指向字符串文字的指针。您永远不应尝试修改字符串文字，因为这会调用未定义的行为（在您的情况下已表现为崩溃）。

随着`char ch[20] = "Hello World!";`您使用字符串文字的内容初始化一个数组，因此您最终得到了您自己的可修改的字符串副本`ch`。

另外，请注意 20 个字符不足以`Hello World!Hello Galaxy!`容纳，这也是未定义的行为，称为溢出缓冲区。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T22:40:08.820

```
 char ch[20] = "Hello world!" 
```

`ch`是一个`char`由字符串字面量的元素初始化的数组（并且数组的其余部分用 初始化`0`）。

```
 char *ch2="Hello Galaxy!"; 
```

`ch2`是指向字符串文字的指针。

字符串文字不需要在 C 中可修改。修改字符串文字在 C 中是未定义的行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T22:55:31.357

有两个问题。首先是您的字符串文字不够长，无法容纳连接的字符串`"Hello world!Hello Galaxy!"`。分配的空间只有 13 个字节（12 个字符加上终止字符串的“0”字节的空间）。连接的字符串需要 26 个字节（25 个字符 + 1 个空值字符）。

然而，这不是真正的问题。真正的问题是您正在访问不应该访问的内存，而操作系统通常会保护这些内存。C 的大多数实现都提供了四个存储区域：

1.  堆栈，在其中分配您在函数中声明的变量
2.  堆，调用 malloc/calloc/realloc 分配内存
3.  全局静态存储，其中分配了非常量全局变量（在函数之外声明的变量）。
4.  `const`全局常量存储，其中分配了所有字符串文字和其他声明的全局变量。

前三个区域原则上是可以修改的。第四个区域不是，并且通常存储在操作系统标记为只读的内存中。当您将字符串文字`"Hello Galaxy!" to`char* ch2 `, the variable`ch2` 分配到全局常量存储中时。

为了给你一个更好的主意，下面的代码在我运行它时一般会出现段错误：

```
#include <stdio.h>

int main(int argc, char** argv)
{
  char* s = "Foo bar baz";
  s[0] = 'B';
  printf("%s\n",s);
  return 0;
} 
```

段错误发生在该`s[0] = ...`行中，因为我正在访问操作系统已标记为只读的存储。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T22:49:10.280

这大约是指针数组的大小..溢出问题.. `char *ch2="Hello Galaxy!";`当您自动使用它时， *ch2 的大小为 14 并带有空字符，但是当您将`ch[]`数组移动到 时`*ch2`，您会收到错误消息。你不能将一个大小为 20 的数组移动到另一个大小为 14 的数组中......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-27T01:02:03.467

字符串文字是只读的。这意味着如果您分配：

```
char* str="Hello"; 
```

您不能将 str 作为 strcpy 和 strcat 的第一个参数传递，因为这会导致写入只读内存。相反，如果您以这种方式声明它：

```
char str2[]="Hello"; 
```

然后 str2 数组存储在堆栈中，您可以更改它的值。
您仍然可以将 str 传递给 strcmp 之类的函数（它只是读取 wto 字符串并比较它们），或者作为 strcat 和 strcpy 的第二个参数，因为这不会导致字符串被写入。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-27T04:32:43.933

您收到错误，因为您尝试访问只读进程的代码部分。那是代码中存在的字符串文字以及您在分配给指针变量时使用的字符串文字的地址。所以你可以访问代码，但你不能修改它。

每个可执行文件都包含一些部分，例如...

1.text（您的程序代码以及此处显示的字符串文字）

2.数据未初始化

3.数据初始化

您可以通过命令对此进行验证

```
size <executable-file-neme> 
```

也使用命令

```
objdump -D  <executable-file-neme> 
```

# c++ - Qt：meta.enumeratorCount() 没有元数据用于 Q_OBJECT 中的枚举，为什么？

> ID：11679057
> 
> 赞同：1
> 
> 时间：2012-07-26T22:37:49.567
> 
> 标签：c++, qt, qt4, qobject

我有以下课程，我尝试在其中获取一些元数据`enum MyEnum`。但是，当循环`meta.enumeratorCount()`其计数始终为 0 时。基本上我在[这里遵循这个示例](http://labs.qt.nokia.com/2008/10/09/coding-tip-pretty-printing-enum-values/)。为了找到问题，我也尝试了同样的方法，同样的问题 - 方法计数 0。代码编译，没有错误没有警告。

一定是一个愚蠢的错误....也许你可以帮助我

```
class FsxSimConnectQtfier : public QObject
{
    Q_OBJECT
public:
    explicit FsxSimConnectQtfier(QObject *parent = 0);
    enum MyEnum { G1, G2 };
    static const QString simConnectExceptionToString(const DWORD id);
};

const QString FsxSimConnectQtfier::simConnectExceptionToString(const DWORD id) {
    // int i= FsxSimConnectQtfier::staticMetaObject.indexOfEnumerator("MyEnum");
    // -1 -> not found, why?
    QMetaObject meta = FsxSimConnectQtfier::staticMetaObject;
    for (int i=0; i < meta.enumeratorCount(); ++i) {
        QMetaEnum m = meta.enumerator(i); // never reached, why?
    }
    return "";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T23:43:02.143

[您需要使用宏](http://qt-project.org/doc/qobject.html#Q_ENUMS)[将`Q_ENUMS()`](http://qt-project.org/doc/qobject.html#Q_ENUMS)枚举注册到元数据系统：

```
class FsxSimConnectQtfier : public QObject
{
    Q_OBJECT
    Q_ENUMS(MyEnum)  // <--- 

public:
    explicit FsxSimConnectQtfier(QObject *parent = 0);
    enum MyEnum { G1, G2 };
    static const QString simConnectExceptionToString(const unsigned int id);
}; 
```

# search - 从字典中返回包含 26 个字母的字符串的算法/代码

> ID：11679062
> 
> 赞同：0
> 
> 时间：2012-07-26T22:38:23.253
> 
> 标签：search, dictionary, alphabet

需要以下面试问题的帮助/解决方案：从包含多个文件的文件夹中，这些文件的内容是英语词典，返回一个或多个字符串，它们之间包含所有 26 个字母表。改进这个以提高速度。提供执行此操作的替代方法。

感谢所有帮助！非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T22:39:53.453

```
return 'abcdefghijklmnopqrstuvwxyz'; 
```

他们从来没有说过你必须阅读这些文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T22:50:37.527

我认为问题是关于有效的尝试。寻找三元搜索树。它是原始 trie 的一个有效节省空间的版本，其中每个节点都有 26 个叶子（如字母表）。也可以从数组中创建一个简单的 trie，例如这里[http://phpir.com/tries-and-wildcards/](http://phpir.com/tries-and-wildcards/)

# php - 在 PHP 中验证表单元素的动态数量

> ID：11679063
> 
> 赞同：1
> 
> 时间：2012-07-26T22:38:34.743
> 
> 标签：php, javascript, forms

我需要制作一个表格，管理部门的人员可以在其中添加客户信息。在第一个表单页面上，可以输入客户姓名、地址和联系方式等信息，以及客户是否有孩子。

表单由 PHP 验证。如果客户端没有孩子，则将数据保存到数据库中。如果客户端确实有孩子，表单数据将保存在隐藏的表单字段中，并显示第二个表单页面，其中最多可以添加 10 个孩子。

但是，在初始页面视图中，只有一个文本输入可见。使用 javascript 按钮，可以动态添加更多文本输入字段（直到达到 10 个限制）。

问题是 PHP 中的验证。如果其中一个文本输入包含无效字符串，则应重新显示表单，其中包含正确数量的字段，并且在特殊 HTML 类中包含错误的那些（在 CSS 中，出于可用性原因，我给该类一个红色边框，因此用户可以立即看到错误所在的位置）。但是，由于添加字段是使用 Javascript 进行的，因此表单会重新显示，只有一个字段。

任何关于如何解决这个问题的想法都非常受欢迎。我精通 PHP，但 JavaScript 对我来说很新，所以我无法对我发现的动态添加字段的脚本进行重大更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T22:49:15.630

我过去处理过类似的事情。我想到了几个选项。

既然您有 JS 代码可以在单击按钮时生成新字段，为什么不扩展该 JS 函数以便也可以通过传递一些参数来调用它。如果有参数，它将使用现有数据填充字段。

然后，如果由于错误而重新显示表单，或者从 PHP 进行编辑，则将一些信息传递给 Javascript，以便在页面加载时创建字段并用数据填充它们。

为了说明，我假设你有这样的东西：

```
<a href="#" onclick="addNewFormField(); return false">Add Another Child</a> 
```

你有这个功能：

```
function addNewFormField() {
    // create new HTML element to contain the field
    // create new input, append to element container
    // add container to DOM
} 
```

改变它，使它像这样：

```
function addNewFormField(data) {
    // create new HTML element to contain the field
    // create new input, append to element container
    // add container to DOM

    if (data != undefined) {
        newFormElement.value = data.value;
        newContainerElement.class = 'error';
    }
} 
```

在 PHP 中，添加一些运行 onload 的代码：

```
<script type="text/javascript">
window.onload = function() {  // replace me with jQuery ready() or something proper
    <?php foreach($childInList as $child): ?>
        addNewFormField({ value: '<?php echo $child['name'] ?>' });
    <?php endforeach; ?>
}
</script> 
```

希望对您有所帮助，这是一个高级示例，但不知道您的表单是如何工作的，但我过去曾使用过类似的方法来使用来自服务器端的数据重新填充 JS 创建的字段。

编辑：您可以使用的另一种方法是在 PHP 端创建 HTML 元素并从那里预填充它们，但这可能会导致重复代码、从 JS 生成 HTML 和从 PHP 生成相同内容的 HTML。只要 JS 端足够聪明，可以识别 PHP 添加的初始字段，您就可以使用最容易实现的任何内容。就个人而言，我只是扩展您的 JS 代码来处理可选数据，如上图所示。

# javascript - 如何在 Ajax 错误上引发 404 错误以引导默认的 404 行为？

> ID：11679064
> 
> 赞同：1
> 
> 时间：2012-07-26T22:38:41.723
> 
> 标签：javascript, jquery, asp.net-mvc

工作领域：ASP.NET MVC 3、JavaScript、jQuery。web.config 文件设置为处理 HTTP 404 错误。具体来说，它将在无效 URL 上提供正确的重定向，例如 www.mysite.com/INVALIDURL（即找不到 404 页面）

问题：有没有办法在 Ajax 错误中默认为相同的行为？或者换句话说，我如何在 ajax 错误中抛出 404 'Page not found' 响应。

```
$.ajax ({ ... })
  .error(function (jqXHR, textStatus, errorThrown) {
     // throw 404 Page not found HTTP error
  } 
```

Edit1：我正在寻找的最终结果是在出现 Ajax 错误时提供“找不到页面”显示

Edit2：我已经在 web.config 文件中有一个重定向设置，就像这样

```
 <system.webServer>
    <httpErrors errorMode="Custom">
      <remove statusCode="404" />
      <error statusCode="404" path="/error/404" responseMode="ExecuteURL" />
    </httpErrors>
  </system.webServer> 
```

我希望 ajax.error 默认为该行为，这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T22:44:33.470

所以 - 你想重定向到 ajax 错误的 404 页面？如前所述，您不能抛出 404，但您可以重定向到另一个页面。

```
$.ajax ({ ... })
  .error(function (jqXHR, textStatus, errorThrown) {
     window.location.href = '/My404ErrorPage';
  } 
```

**编辑**

如果您不希望 URL 更改 - 您很可能需要考虑使用模式对话框/警报框/特殊 div 将此信息传达给用户并将您想要使用的消息放入其中。下面假设 NotFound 是页面上某处某个 div 的 id，第一部分利用 jquery UI，第二部分利用普通的 ol' 警报框。

```
$.ajax ({ ... })
  .error(function (jqXHR, textStatus, errorThrown) {
     $('#NotFound').html('Some error message');
     $('#NotFound').Dialog();
     //OR you could do
     alert('Some error message');
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T22:49:49.227

尝试使用“ajaxSetup”设置 js 重定向到错误页面。例如：

```
$.ajaxSetup({
    beforeSend  : function(){showLoader()},
    complete    : function(){hideLoader()},
    error       : function(){redirTo404()}
}); 
```

所以它将使用它作为所有ajax调用的默认值

# php - 使用 Simple Html Dom 删除一些元素

> ID：11679067
> 
> 赞同：1
> 
> 时间：2012-07-26T22:38:58.043
> 
> 标签：php, html, simple-html-dom

[这](http://www.uvm.cl/noticias_mas.shtml)是我尝试使用 Simple Html Dom 解析的页面。我已经完成了 90% 的功能，但是由于我是库的新手，所以我不太确定要这样做。

我想抓取**每个新闻项目**的文本，但由于文本位于`<p>`元素内部，因此使用诸如`->innertext`将所有内容（包括链接）带入内部之类的东西。

这是我尝试过的：

```
<h1>Scraper Noticias</h1>

<?php

include('simple_html_dom.php');

class News {
    var $image;
    var $fechanoticia;
    var $title;
    var $description;
    var $sourceurl;

    function get_image( ) {
        return $this->image;
    }

    function set_image ($new_image) {
        $this->image = $new_image;
    }

    function get_fechanoticia( ) {
        return $this->fechanoticia;
    }

    function set_fechanoticia ($new_fechanoticia) {
        $this->fechanoticia = $new_fechanoticia;
    }

    function get_title( ) {
        return $this->title;
    }

    function set_title ($new_title) {
        $this->title = $new_title;
    }

    function get_description( ) {
        return $this->description;
    }

    function set_description ($new_description) {
        $this->description = $new_description;
    }

    function get_sourceurl( ) {
        return $this->sourceurl;
    }

    function set_sourceurl ($new_sourceurl) {
        $this->sourceurl = $new_sourceurl;
    }
}

// Create DOM from URL or file
$html = file_get_html('http://www.uvm.cl/noticias_mas.shtml');

$parsedNews = array();

// Find all news items.
foreach($html->find('#cont2 p') as $element) {

    $newItem = new News;

    // Parse the news item's thumbnail image.
    foreach ($element->find('img') as $image) {
        $newItem->set_image($image->src);
        //echo $newItem->get_image() . "<br />";
    }

    // Parse the news item's post date.
    foreach ($element->find('span.fechanoticia') as $fecha) {
        $newItem->set_fechanoticia($fecha->innertext);
        //echo $newItem->get_fechanoticia() . "<br />";
    }

    // Parse the news item's title.
    foreach ($element->find('a') as $title) {
        $newItem->set_title($title->innertext);
        //echo $newItem->get_title() . "<br />";
    }

    // Parse the news item's source URL link.
    foreach ($element->find('a') as $sourceurl) {
        $newItem->set_sourceurl("http://www.uvm.cl/" . $sourceurl->href);
    }

    // Parse the news items' description text.
    echo $link; //This is the entire <p> tag. How can I get just the text. Not the link?

} 

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T22:55:49.720

这是我找到的解决方案。尽管如果我可以改进代码，将不胜感激。

```
<h1>Scraper Noticias</h1>

<?php

include('simple_html_dom.php');

class News {
    var $image;
    var $fechanoticia;
    var $title;
    var $description;
    var $sourceurl;

    function get_image( ) {
        return $this->image;
    }

    function set_image ($new_image) {
        $this->image = $new_image;
    }

    function get_fechanoticia( ) {
        return $this->fechanoticia;
    }

    function set_fechanoticia ($new_fechanoticia) {
        $this->fechanoticia = $new_fechanoticia;
    }

    function get_title( ) {
        return $this->title;
    }

    function set_title ($new_title) {
        $this->title = $new_title;
    }

    function get_description( ) {
        return $this->description;
    }

    function set_description ($new_description) {
        $this->description = $new_description;
    }

    function get_sourceurl( ) {
        return $this->sourceurl;
    }

    function set_sourceurl ($new_sourceurl) {
        $this->sourceurl = $new_sourceurl;
    }
}

// Create DOM from URL or file
$html = file_get_html('http://www.uvm.cl/noticias_mas.shtml');

$parsedNews = array();

// Find all news items.
foreach($html->find('#cont2 p') as $element) {

    $newItem = new News;

    // Parse the news item's thumbnail image.
    foreach ($element->find('img') as $image) {
        $newItem->set_image($image->src);
        //echo $newItem->get_image() . "<br />";
    }

    // Parse the news item's post date.
    foreach ($element->find('span.fechanoticia') as $fecha) {
        $newItem->set_fechanoticia($fecha->innertext);
        //echo $newItem->get_fechanoticia() . "<br />";
    }

    // Parse the news item's title.
    foreach ($element->find('a') as $title) {
        $newItem->set_title($title->innertext);
        //echo $newItem->get_title() . "<br />";
    }

    // Parse the news item's source URL link.
    foreach ($element->find('a') as $sourceurl) {
        $newItem->set_sourceurl("http://www.uvm.cl/" . $sourceurl->href);
    }

    // Parse the news items' description text.
    foreach ($element->find('a') as $link) {
        $link->outertext = '';
    }

    foreach ($element->find('span') as $link) {
        $link->outertext = '';
    }

    foreach ($element->find('img') as $link) {
        $link->outertext = '';
    }

    echo $element->innertext;

} 

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T22:58:39.017

使用`innertext`代替`outertext`

```
 foreach ($element->find('a') as $sourceurl) {
    echo $sourceurl->innertext . "<br />";
    } 
```

# image-processing - 使用 ROI 选择和比例将数组绘制为图像的最佳方法

> ID：11679072
> 
> 赞同：2
> 
> 时间：2012-07-26T22:39:23.080
> 
> 标签：image-processing, numpy, plot, pyqt, roi

我有一个 2D numpy 数组，我需要将其绘制为具有一定比例的图像。在该图像中，我需要能够选择 ROI，或者至少能够显示鼠标坐标（图像中包含的特定目标的）。我尝试使用 pyqtgraph 但我似乎无法将图像绘制为数据源而不仅仅是图像（即似乎无法设置轴等）......那么最好的方法是什么？图像浏览器被编译为带有滚动文件帧的滑块的小部件；然后将该小部件嵌入到带有一些表格小部件的主窗口中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T02:42:17.520

我认为matplotlib 中的[imshow](http://matplotlib.sourceforge.net/users/image_tutorial.html)可能对你有用。它易于缩放、平移和缩放，并且可以轻松地与 numpy 一起使用。

（如果这个答案对您不起作用，请您完善您的问题。我不确定您是否正在寻找可以完成这项工作的任何工具，或者在您拥有的 gui 的上下文中工作的东西已经实现了。如果是后者，我认为您可能需要自己进行 ROI，例如，选择要绘制的 numpy 数组的区域，例如 a[xmin:xmax, ymin:ymax]。）

# javascript - Leaflet.js 使用 sencha touch 更改图层

> ID：11679076
> 
> 赞同：0
> 
> 时间：2012-07-26T22:39:58.130
> 
> 标签：javascript, touch, extjs, leaflet

我正在使用 Leaflet 和 Sencha Touch 为移动设备创建应用程序。这将是一张地图，因此游客可以看到餐馆或商店的位置。因为在这样一个小镇上有这么多景点，所以用户可以在“景点”类型之间切换会很好。所以他们可以选择查看所有的餐馆或商店或其他任何东西。

人们是否有可能通过煎茶中的对话框或类似的东西来做到这一点？

我已经创建了具有图层的组，因此餐厅和商店、博物馆等位于不同的图层组中。

对不起我的英语不好，希望你能理解...... :)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T22:02:21.937

Leaflet API 提供 addLayer() 和 removeLayer() 方法，可用于从地图中添加或删除您的 layerGroups ...

您可以使用一个对话框，显示带有复选框的 layerGroups 列表，这些复选框将触发相应图层的这些 addLayer() 和 removeLayer() 方法，类似于 Leaflet 内置图层控件将执行此操作...

问候

艾蒂安

# javascript - 获取 DOM 中属性名称以 some-string 开头的所有 HTML 元素

> ID：11679077
> 
> 赞同：3
> 
> 时间：2012-07-26T22:39:59.850
> 
> 标签：javascript, jquery

我偶然发现了一个棘手的问题，我无法找到任何引用（除了 Stackoverflow 上的一个，它是用普通的旧 Javascript 编写的效率很低 - 我希望它用 jQuery 编写）。

**问题**

我需要检索**属性名称**（注意：**不是***属性值*）以给定字符串开头的所有子元素。

所以如果我有：

```
<a data-prefix-age="22">22</a>
<a data-prefix-weight="82">82</a>
<a href="#">meh</a> 
```

我的查询将返回两个元素的集合，这将是前两个带有**data-prefix-** -prefix

关于如何编写此查询的任何想法？

我打算这样做：

```
$(document).find("[data-prefix-*]") 
```

但这当然是无效的

希望你们中的一个人对如何解决这个问题有更敏锐的眼光。

**解决方案**

（请参阅下面接受的代码示例）

显然**没有直接查询部分属性名称***的* 方法。你应该做的（这只是一种可能的解决方案）是

 **1.  选择尽可能小的元素集合
2.  遍历它们
3.  然后为每个元素迭代元素的属性
4.  找到命中后，将其添加到集合中
5.  然后离开循环并移动到下一个要检查的元素。

您最终应该得到一个包含您需要的元素的数组。

希望能帮助到你 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T22:49:12.737

也许这会奏效-

```
 // retrieve all elements within the `#form_id` container
    var $formElements = $("form#form_id > *");

    var selectedElements = [];
    // iterate over each element
    $formElements.each(function(index,elem){
        // store the JavaScript "attributes" property
        var elementAttr = $(this)[0].attributes;
        // iterate over each attribute
        $(elementAttr).each(function(attIndex,attr){
            // check the "nodeName" for the data prefix
            if (attr.nodeName.search('data-.*') !== -1){
               // we have found a matching element!
               if (selectedElements.length < 2){
                 selectedElements.push(elem);
                 break;
               }else{
                 if (selectedElements.length == 2){
                   break(2);
                 }
               }
            }
        });
    }); 
```

`selectedElements`现在将保存前两个匹配元素。

# [jsFiddle](http://jsfiddle.net/tLbpn/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T22:47:32.097

您可以使用 jquerys filter() 方法让函数处理选择元素。在该功能中，您可以自由地做任何您想做的事情。

所以从选择dom 树中的*所有*元素开始，过滤掉你不喜欢的所有元素。不是特别快，但工作。**

# c# - 当 Decended TextBox 的绑定到 TextProperty 的值发生更改时获取更改事件

> ID：11679078
> 
> 赞同：1
> 
> 时间：2012-07-26T22:40:01.550
> 
> 标签：c#, .net, wpf, binding, wcf-binding

我有自己的自定义 TextBox 类（调用它`MyCustomTextBox`）。它在某种程度上帮助我处理来自条形码阅读器的扫描。

为此，我需要一种方法来捕获绑定到 TextProperty 的值何时更改。

注意：我不是在寻找“TextChanged”事件或任何与按键相关的事件（除非该按键更新源）。

这是一个例子：

我需要一个事件 (in `MyCustomTextBox`)，仅当基础值 (CustomerId) 发生更改时才会触发。

注意：每次按键发生时，实际的 TextProperty 都会发生变化。但是 Source 直到稍后才会更新（取决于您的 UpdateSourceTrigger 设置）。对于我想要做的事情，TextProperty 更改过于频繁。所以依附于它不会帮助我。

有什么方法可以附加到 TextProperty 下的值？

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T23:14:32.100

是的，你需要连接 2 个事件

```
 <TextBox Name="Fred" Text="{Binding Foo, NotifyOnTargetUpdated=True, NotifyOnSourceUpdated=True, UpdateSourceTrigger=LostFocus}" TargetUpdated="Fred_TargetUpdated" SourceUpdated="Fred_SourceUpdated"> 
```

当文本框以外的其他内容更改基础属性（以及首次绑定时）时，TargetUpdated 事件将被触发，例如。你的虚拟机中的一些方法说

当您的文本框更新其绑定时，Sourceupdated 事件将被触发，例如失去焦点

# r - 为 xts 对象填充基于购买的持有

> ID：11679084
> 
> 赞同：3
> 
> 时间：2012-07-26T22:40:34.810
> 
> 标签：r, finance, xts, quantmod

下面的示例在股票 (IBM) 的每日跌幅超过 10% 时创建买入信号 (1)。

然后它会创建一个额外 4 天的保持信号。如果保留天数增加，代码将变得更加不守规矩。有没有办法使用 apply 函数或类似效率的东西（即，不是 for 循环）重写 holdig 代码？

```
library(quantmod)
getSymbols("IBM")
buysig <- Lag(ifelse(dailyReturn(IBM) < -.10,1,0))
holdsig <- ifelse( Lag(sig) == 1 | Lag(sig, k=2) == 1 | Lag(sig, k=3) == 1 | Lag(sig, k=4) == 1, 1, 0) 
```

每次我觉得自己在应用方面变得更好时，我都会后退两步。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T23:03:32.423

首先，请注意`Lag`可以采用`k`值向量：

```
head(Lag(buysig, k=1:4)
#            Lag.1 Lag.2 Lag.3 Lag.4
# 2007-01-03    NA    NA    NA    NA
# 2007-01-04    NA    NA    NA    NA
# 2007-01-05     0    NA    NA    NA
# 2007-01-08     0     0    NA    NA
# 2007-01-09     0     0     0    NA
# 2007-01-10     0     0     0     0 
```

这使事情变得非常简单：然后您可以逐行检查（`apply`with `MARGIN = 1`）如果`any`值等于`1`：

```
apply(Lag(buysig, k=1:4) == 1, 1, any) 
```

`as.numeric`（如果需要将 {TRUE,FALSE} 转换为 {1,0}，可以通过输出）

# jquery - 事件冒泡与jQuery的mouseout，过早隐藏

> ID：11679085
> 
> 赞同：1
> 
> 时间：2012-07-26T22:40:38.430
> 
> 标签：jquery, event-bubbling

我遇到了一个 jQuery 问题，我无法解决问题所在。我怀疑这是媒体冒泡的问题，但我不确定。我已经从 foo、plym-flyout 和 first.. 更改了 mouseout 侦听器，一旦鼠标进入，所有这些似乎都隐藏了。

如果我听一个与菜单分开的课程，它就可以正常工作。此外，我不确定某些绝对定位的 CSS 是否与此有关。

有任何想法吗？[http://jsfiddle.net/vrCKU/](http://jsfiddle.net/vrCKU/)

```
<ul class="plym-flyout" style="display: none;">
    <ul class="foo">
        <li class="first"><a href="">My Entries</a></li>
        <li><a href="">I'm Watching</a></li>
        <li><a href="">Leaderboard</a></li>
        <li><a href="">My Tickets</a></li>
        <li><a href="">My Account</a></li>
        <li class="last"><a href="">Refer Friends</a></li>
    </ul>
    <ul class="plym-dropShadow"></ul>
</ul> 
```

-- JS --

```
$(".hdr-user").click(function () {
    $(".plym-flyout").toggle();
});

$(".foo").mouseout(function () {
    $(".plym-flyout").hide();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T22:42:55.370

使用`mouseleave`代替`mouseout`：

[http://jsfiddle.net/txA8r/](http://jsfiddle.net/txA8r/)

[http://api.jquery.com/mouseleave/](http://api.jquery.com/mouseleave/)

[http://api.jquery.com/mouseout/](http://api.jquery.com/mouseout/)

# github - 发送用户使用预填充的错误数据创建新的 GitHub 问题

> ID：11679087
> 
> 赞同：9
> 
> 时间：2012-07-26T22:40:45.000
> 
> 标签：github

我希望我的程序能够让用户轻松提交错误，其中包含与他们的问题相关的尽可能多的有用信息。

当用户点击“report a bug”菜单时，浏览器将打开，例如，[github.com/noamraph/dreampie/issues/new](https://github.com/noamraph/dreampie/issues/new) ，其中包含预先填写的环境信息。

是否可以通过 GitHub 做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-02-15T01:04:24.530

您可以使用[查询变量](https://github.com/isaacs/github/issues/new?title=foo&body=bar)来执行此操作。

```
https://github.com/isaacs/github/issues/new?title=foo&body=bar 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T21:30:16.153

这是可能的，如果您想使用 GitHub API，您甚至可以让您的用户直接从您的应用程序中提交错误。

与其打开新的选项卡或窗口，不如在您自己的应用程序中打开它并通过它发送它，收集必要的详细信息并生成日志转储。

通过[GitHub API，您可以创建问题](http://developer.github.com/v3/issues/#create-an-issue)并在标题和正文中预先填写您需要知道的内容。

然后，从成功创建中捕获响应并通知自己。或者在创建后照常查看您的存储库上的“问题”选项卡。

# xml - webharvest 不检索数据

> ID：11679089
> 
> 赞同：2
> 
> 时间：2012-07-26T22:41:04.093
> 
> 标签：xml, webharvest

我的 webharvest 运行没有错误，但是当我打开 XML 文件时，它没有正确的数据，它只是打印出来。这是我的代码：

```
<?xml version="1.0" encoding="UTF-8"?>

<config charset="ISO-8859-1"> 
<file action="write" path="c:/Users/Username/Desktop/out.xml" charset="UTF-8">
            <xquery>
                <xq-param name="doc">
                    <html-to-xml>
                        <http url="http://www.realtor.com/realestateandhomes-detail/733-Weston-Park-Dr_Powell_OH_43065_M47208-73179"/>
                    </html-to-xml>
                </xq-param>
                <xq-expression><![CDATA[
                    declare variable $doc as node() external;

                    let $add := data($doc//div[@class="address"])
                    let $est := data($doc//div[@class = "estValue"])
                    let $bed := data($doc//div[@class="beds"])
                    let $bath := data($doc//div[@class="baths"])
                    let $lot := data($doc//div[@class="acres"])
                    let $sqft := data($doc//div[@class="sqft"])
                        return
                            <house>
                                <add>{data($add)}</add>
                                <est>{data($est)}</est>       
                                <bed>{data($bed)}</bed> 
                                <bath>{data($bath)}</bath> 
                                <lot>{data($lot)}</lot>                            
                                <sqft>{data($sqft)}</sqft>
                            </house>
                ]]></xq-expression>
            </xquery>
    <![CDATA[ </realtor> ]]>
    </file>
</config> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T19:52:03.333

如果要打印变量的值，请使用*{$variable}*而不是*~~{data($variable)}~~*

```
 return
        <house>
            <add>{$add}</add>
            <est>{$est}</est>       
            <bed>{$bed}</bed> 
            <bath>{$bath}</bath> 
            <lot>{$lot}</lot>                            
            <sqft>{$sqft}</sqft>
        </house> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T22:46:41.287

检查创建 XML 内容的代码，例如，我没有看到“realtor”开始标记。“xq-expression”中的内容真的正确吗？？？

# php - 我对 MySQL 插入是否成功的测试不起作用

> ID：11679093
> 
> 赞同：2
> 
> 时间：2012-07-26T22:42:13.503
> 
> 标签：php, mysql

全部，

我创建了一个包含三个字段的表 - 一个自动递增的 ID 和 2 个数据字段。这两个数据字段是外键，我错误地将它们设置为`NON NULL`. 然后我运行以下 PHP 代码：

```
$inserted=false;
$insertQuery=$dbConnection->prepare("INSERT INTO $this->table () VALUES ()");
$inserted=$insertQuery->execute(); //Should be true if succesful, False if not.
echo $inserted;
exit; 
```

这显示了`1`- 所以 的`$inserted`值为`true`。我使用这个变量作为控件来确保查询正常。

但是，如果我随后检查数据库，则查询尚未运行。如果我手动输入，我会收到一个错误，因为 2 个数据字段不允许`null`值。

我的问题是：鉴于插入导致错误，为什么我的代码中的值`$inserted`切换到？`true`

PS：要在 phpMyAdmin 中手动运行查询，我会这样做：
`INSERT INTO 'flashcards' () VALUES ()`
我得到了这个：
`#1452 - Cannot add or update a child row: a foreign key constraint fails ('project'.'table1', CONSTRAINT 'table1_ibfk_1' FOREIGN KEY ('data1') REFERENCES 'table2' ('data2') ON DELETE NO ACTION ON UPDATE NO ACTION)`

PPS：如果我添加下面建议的 vardump 代码：

```
var_dump("Result: ", $inserted);
var_dump("Affected: ", $insertQuery->rowCount());
var_dump("Warnings: ", $insertQuery->errorInfo()); 
```

然后我得到以下信息：

```
string 'Result: ' (length=8)
boolean true
string 'Affected: ' (length=10)
int 1
string 'Warnings: ' (length=10)
array
  0 => string '00000' (length=5)
  1 => null
  2 => null 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T23:18:10.717

我进行了测试，这是我发现的：

```
CREATE TABLE `test` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `age` int(11) NOT NULL,
  `email` varchar(45) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 
```

从控制台：

```
INSERT INTO `test` () VALUES ();

// Result:

1 row(s) affected, 2 warning(s):
1364 Field 'name' doesn't have a default value
1364 Field 'email' doesn't have a default value 
```

然后选择：

```
mysql> select * from test;
+----+------+-------+
| id | name | email |
+----+------+-------+
|  1 |    0 |       |
+----+------+-------+
1 row in set (0.00 sec) 
```

另一个插入测试：

```
mysql> INSERT INTO `test` () VALUES(NULL, NULL, NULL);
ERROR 1048 (23000): Column 'name' cannot be null 
```

因此，如果您不绑定任何参数并且不设置任何值，那么由于某种原因 MySQL 不会将缺失值视为`NULL`. 有趣的是，即使没有设置默认值，数据仍然会被插入（因此默认值特定于列类型）。

一些 PHP 代码进一步说明了这一点：

```
$pdo = new PDO('mysql:host=10.1.1.37;dbname=testing', 'user', 'pw');

$query = $pdo->prepare("INSERT INTO `test` () VALUES ()");

$result = $query->execute();

var_dump("Result: ", $result);

var_dump("Affected: ", $query->rowCount());

var_dump("Warnings: ", $query->errorInfo());

/*
string(8) "Result: "
bool(true)
string(10) "Affected: "
int(1)
string(10) "Warnings: "
array(3) {
  [0]=>
  string(5) "00000"
  [1]=>
  NULL
  [2]=>
  NULL
}
*/ 
```

因此，您获得成功结果的原因`execute()`是因为我猜数据正在插入您的表中。你确定你没看到里面有什么？希望这有助于澄清事情。

# javascript - 按标签选择过滤 rallygrid

> ID：11679097
> 
> 赞同：1
> 
> 时间：2012-07-26T22:42:46.543
> 
> 标签：javascript, rally

我创建了一个 rallygrid 对象和一个 rallytagpicker 对象。我想做的是过滤 rallygrid 以仅包含包含**任何**选定标签的项目。我尝试了几种不同的方法来实现这一点，但我似乎无法让它发挥作用。这是我的标签选择器代码：

```
this.tagPicker = this.add({
    xtype: 'rallytagpicker',
    autoExpand: true,
    listeners: {
        select: this._onTagSelect,
        scope: this
    }
}); 
```

所以，我遇到的第一个问题是，当我从下拉列表中选择一个标签时， *select*实际上似乎并没有触发，其次，一旦它触发，我如何刷新网格上的过滤器以包含项目新标签？

就像现在一样，我正在使用如下过滤器对象进行过滤：

```
{ property: 'Tags.Name', operator: 'contains', value: 'My Tag' } 
```

如果我可以将所有要过滤的标签存储在一个数组中并一次传递整个数组，而不是为每个标签设置一个单独的过滤器对象，那就太好了。那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T21:14:23.720

如果你改用 change 事件呢？

要为每个标签构建过滤器，您只需将它们或它们一起构建：

```
Rally.data.QueryFilter.or([
    {
        property: 'Tags.Name',
        operator: '='
        value: 'My Tag'
    },
    {
        property: 'Tags.Name',
        operator: '='
        value: 'My Tag2'
    },
]); 
```

然后刷新网格，你可以使用它的 refresh 方法，传递新的过滤器：

```
grid.refresh({
    filters: [
        //filters here
    ]
}); 
```

# php - 让 fopen/fwrite 写入不同的目录

> ID：11679107
> 
> 赞同：0
> 
> 时间：2012-07-26T22:44:10.373
> 
> 标签：php, file, directory, fopen

我需要编写文本文件，我尝试使用此代码

```
public function ResultsTrackingLogs( $event, $message ) {
$logsDir = dirname( __FILE__ ) . "/logs/Results Tracking/$event/";
$fh = fopen( $logsDir . "$event.txt", 'x' ) or die( "can't open file" );
fwrite( $fh, $message );
fclose( $fh );
} 
```

`$logsDir`转换为`E:\Dropbox\htdocs\Scrapers\this` 超越它，因此`\$event\`每个事件都有自己的子文件夹。

无论如何我调整.. IE `/logs/Results Tracking/`.. 或`\logs\Results Tracking\..`

仍然给我一个错误`fopen(E:\Dropbox\htdocs\Scrapers\this\logs/Results Tracking/event1/event1.txt): failed to open stream: No such file or directory.`

目录在那里，我也在那里创建了一个 .txt 文件，但没有找到它。问题显然在于我如何描述我的目录结构。我该如何解决？我之前不想创建目录结构，我需要它来创建需要的文件夹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T22:52:48.343

检查目标目录是否存在，如果不存在，则创建它。

```
 if(! is_dir($logsDir) ) { mkdir($logsDir, 0777, true); } 
```

`DIRECTORY_SEPARATOR`如果要描述路径，可以使用。

# android - 通过 touchEvent 从类视图中完成 Android 活动

> ID：11679108
> 
> 赞同：3
> 
> 时间：2012-07-26T22:44:18.397
> 
> 标签：android, view, android-activity, touch

我有类 GameActivity 并在那里有一个方法`setContentView(GameView)`。在`GameView`扩展类中，`View`我有一个方法：

```
public class GameView extends View{
...
    public boolean onTouchEvent(MotionEvent event){
         switch(event.getAction()){ 
           case MotionEvent.ACTION_DOWN:    
            Intent intent = new Intent (contexTmp, MainActivity.class); 
            contexTmp.startActivity(intent); 
            //finish(); //->how to finish this activity from class view 
        }
    }
} 
```

正如您`GameView`在方法类中看到的那样，`onTouchEvent()`当我按下按钮时，我将活动更改为`MainActivity`. 我的问题是：如何从班级视图完成活动（首先我必须完成当前活动，然后进入下一个活动），因为方法： `finish()`不起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T22:54:35.797

使用[`getContext()`](http://developer.android.com/reference/android/view/View.html#getContext%28%29)which 返回用于创建视图的活动上下文：

```
public boolean onTouchEvent(MotionEvent event) {
    switch(event.getAction()) { 
       case MotionEvent.ACTION_DOWN: 
          ...   
          ((Activity)getContext()).finish();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T22:55:22.537

只要您的 GameView 是活动中的视图之一，您就可以简单地调用：

```
((Activity)getContext()).finish(); 
```

这将是创建视图的活动的上下文。因此，只需确保这是您想要完成的活动，并且一切顺利！

# command-line - command line extract from SWF?

> ID：11679113
> 
> 赞同：9
> 
> 时间：2012-07-26T22:44:28.037
> 
> 标签：command-line, flash

It appears that most SWF files, if not all are actually swf "archives" containing compressed versions of themselves. I have seen that you can extract the file using a few tools

```
$ flasm -x player.swf
Flasm configuration file flasm.ini not found, using default values
player.swf successfully decompressed, 206239 bytes

$ 7z x player.swf

7-Zip [64] 9.20  Copyright (c) 1999-2010 Igor Pavlov  2010-11-18

Processing archive: player.swf

Extracting  player~.swf

Everything is Ok

Size:       206239
Compressed: 106427 
```

However I was hoping to extract from these using something a little more "conventional", e.g. `tar` or `gzip`

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-27T02:33:54.053

Relevant quote from [http://www.adobe.com/content/dam/Adobe/en/devnet/swf/pdf/swf_file_format_spec_v10.pdf](http://www.adobe.com/content/dam/Adobe/en/devnet/swf/pdf/swf_file_format_spec_v10.pdf)

> The header begins with a three-byte signature of either 0x46, 0x57, 0x53 (“FWS”); or 0x43, 0x57, 0x53 (“CWS”).
> 
> *   An FWS signature indicates an uncompressed SWF file;
> *   CWS indicates that the entire file after the first 8 bytes (that is, after the FileLength field) was compressed by using the ZLIB open standard. The data format that the ZLIB library uses is described by Request for Comments (RFCs) documents 1950 to 1952\. CWS file compression is permitted in SWF 6 or later only.

**Update** In response to the comment, here's a little bash script that is a literal translation of what the above seems to describe:

```
#!/bin/bash
for swf in "$@"
do
    signature=$(dd if="$swf" bs=1 count=3 2> /dev/null)
    case "$signature" in
        FWS)
            echo -e "uncompressed\t$swf"
            ;;
        CWS)
            targetname="$(dirname "$swf")/uncompressed_$(basename "$swf")"
            echo "uncompressing to $targetname"

            dd if="$swf" bs=1 skip=8 2>/dev/null |
                (echo -n 'FWS'; 
                 dd if="$swf" bs=1 skip=3 count=5 2>/dev/null;
                 zlib-flate -uncompress) > "$targetname"
            ;;
        *)
            {
                echo -e "unrecognized\t$swf"
                file "$swf"
            } > /dev/stderr
            ;;
    esac

done 
```

Which you'd then run across a set of `*.swf` files (assume you saved it as `uncompress_swf.sh`):

```
uncompress_swf.sh /some/folder/*.swf 
```

It will say stuff like

```
uncompressed     /some/folder/a.swf
uncompressed     /some/folder/b.swf
uncompressing to /some/folder/uncompressed_c.swf 
```

If something didn't look like a flash file, at all, it will print an error to stderr.

**DISCLAIMER** This is just the way I read the quoted spec. I have just checked that using this script resulted in identical output as when I had used `7z x` on the input swf.

# javascript - 关于 SVG（可缩放矢量图形）的几个问题

> ID：11679115
> 
> 赞同：0
> 
> 时间：2012-07-26T22:44:35.873
> 
> 标签：javascript, pdf, svg, vector-graphics

关于 SVG（Scalable Vector Graphics）有两个问题：

1) 用于创建矢量图形 SVG 的最佳 JavaScript 库是什么？

2）然后我可以接收SVG矢量图形，浏览器，导出为PDF文件吗？如果是这样，如何实现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T23:12:48.227

Stackoverflow 上已经回答了您的两个问题：

1.  [使用 Javascript 创建 SVG 图形？](https://stackoverflow.com/questions/1034712/creating-svg-graphics-using-javascript)
2.  [在 PDF 中嵌入 SVG（使用 JS 将 SVG 导出为 PDF）](https://stackoverflow.com/questions/5913338/embedding-svg-in-pdf-exporting-svg-to-pdf-using-js)或使用 java：[如何在 Windows 上以编程方式将 SVG 转换为 PDF？](https://stackoverflow.com/questions/1048205/how-to-programmatically-convert-svg-to-pdf-on-windows)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T23:12:46.157

关于您的第一个问题，我遇到（并在项目中大量使用）的最佳选择是[Raphaël](http://raphaeljs.com/)。我相信您会很容易找到将 svg 转换为 pdf 的服务器端解决方案，但如果您需要将 Raphaël 画布转换为标准 SVG 数据，那么这里有一个用于导出该数据[的插件。](https://github.com/ElbertF/Raphael.Export)

# javascript - 在 JavaScript 中创建动态绑定

> ID：11679116
> 
> 赞同：0
> 
> 时间：2012-07-26T22:44:38.563
> 
> 标签：javascript, dynamic-binding

我正在实现一项功能，该功能允许我将列动态添加到`JavaScript`表中：

```
for(var i = 0; i < info.length; i++){

        var temp = [];

        temp.push(parseInt(info[i].site_id));
        temp.push(info[i].site);
        temp.push(info[i].site_code);
        temp.push(processArray(info[i].tc10));
        temp.push(processArray(info[i].tc9x_test));
        temp.push(processArray(info[i].tc9x_build));
        temp.push(processArray(info[i].oracle_dev));
        temp.push(processArray(info[i].database));
        temp.push(processArray(info[i].baseline));
        temp.push(processArray(info[i].push_windows));
        temp.push(processArray(info[i].push_unix));
        temp.push(processArray(info[i].license));
        temp.push(processArray(info[i].tcx));
        temp.push(processArray(info[i].eng));
        temp.push(processArray(info[i].perforce_proxy));
        temp.push(processArray(info[i].volume_server));
        temp.push(info[i].windows_ref_unit_location);
        temp.push(info[i].unix_ref_unit_location);
        temp.push(info[i].windows_rte_location);
        temp.push(info[i].unix_rte_location);
        temp.push(info[i].windows_toolbox_location);
        temp.push(info[i].unix_toolbox_location);
        temp.push(info[i].UGII_LICENSE_FILE);
        temp.push(info[i].UGS_LICENSE_SERVER);
        temp.push(info[i].unix_dev_units);
        temp.push(info[i].unix_devop_path);
        temp.push(info[i].perforce_proxy_path);
        temp.push(info[i].primary_contact);
        temp.push(info[i].secondary_contact);
        temp.push(info[i].num_users);
        temp.push(info[i].TC_12);

            // check if new columns got added:
        if(len > 29){
            for(var j = 30; j < len; j++){
                var col = columns[j];
                temp.push(info[i].col);
            }
        }
            rows.push(temp);
    }
    return rows;
} 
```

`var rows = [[]]`保存表数据...`info[[]]`包含`JSON`从数据库查询的对象。这段代码的问题：

```
for(var j = 30; j < len; j++){
    var col = columns[j];
    temp.push(info[i].col);
} 
```

我正在尝试动态`col`绑定`info`. 但我不知道是否可能......我怎么能这样做？假设用户添加了一个新列，`TC_12`。因此，我不知道`TC_12`存在，所以我想动态出价`col`，`info[i]`这样它就可以以某种方式让我出价`info[i].TC_12`。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T22:46:41.143

使用方括号表示法将变量的值或其他表达式的结果用作对象属性。

```
temp.push(info[i][col]); 
```

* * *

`.push()`仅供参考，您可以通过传递多个参数通过一次调用来完成所有这些推送......

```
 temp.push(parseInt(info[i].site_id),
              info[i].site,
              info[i].site_code,
              processArray(info[i].tc10),
              processArray(info[i].tc9x_test),
              // etc...
             ); 
```

# c# - 初始化时不显示依赖属性

> ID：11679120
> 
> 赞同：0
> 
> 时间：2012-07-26T22:45:43.873
> 
> 标签：c#, .net, wpf, data-binding, dependency-properties

我不确定这是否可能，但这是我的设置：

我有一个自定义文本框，仅用于处理热键选择。在这里，我有一个`DependencyProperty`用于`SelectedHotKey`.

然后我有一个自定义控件，它是一个标签、文本框和一个按钮。此控件还公开`DependencyProperty`与 TextBox 同名的 a，它仅通过以下方式与 TextBox 相关联：

```
SelectedHotKey="{Binding ElementName=Main, Path=SelectedHotKey, Mode=TwoWay}" 
```

有了这个依赖属性，我希望设置文本框的 SelectedHotKey，它将`Text`适当地改变。

然后我使用该用户控件并绑定到我的 ViewModel。

除了初始化案例外，我已经完成了所有这些工作。

当我的 ViewModel 已经设置并传递给绑定中的 UserControl 时，该初始设置器甚至不会被命中，因此它不会通过我的控件向下传播。我考虑过放入一个 PropertyMetaData 方法，但这是一个静态方法，我无权访问我的实例文本框。

有任何想法吗？让我知道是否需要进一步澄清。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T22:56:44.033

不要将代码逻辑放在包装依赖属性的 CLR 属性中。`SetValue`正如您已经看到的，由于框架可以直接调用依赖属性，因此无法保证它们会被调用。

你在正确的轨道上：你必须使用依赖属性元数据。使用属性更改回调的第一个参数访问实例。

```
DependencyProperty SomeProperty = DependencyProperty.Register(
    "Some",
    propertyType,
    ownerType,
    new FrameworkPropertyMetadata(defaultValue, OnSomePropertyChanged));

static void OnSomePropertyChanged(DependencyObject d, DependencyPropertyChangedEventArgs e) {
    // "d" is your instance here, cast it to the required type
} 
```

# c++ - 在头文件中搜索#ifdef

> ID：11679124
> 
> 赞同：0
> 
> 时间：2012-07-26T22:45:57.057
> 
> 标签：c++, visual-c++

```
std::string systemStr = "C:\\gcc1\\gccxml.exe ";
    systemStr += "\"" ;
    systemStr += argv[1] ;
    std::cout<<"Header File is:"<<argv[1]<<endl; 
```

在上面的代码片段中，argv[1] 代表头文件的名称。我想打开这个头文件并搜索可能存在的#ifdefs。我该怎么做呢？问题是 argv[1] 是一个字符串。如果我不清楚，我很抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T12:10:40.443

最简单的方法是使用 shell 脚本：

```
 cat header.h | grep -n "^[:space:]*#[:space:]*if[n]*def" 
```

这将显示行号和#ifdef 或#ifndef。

如果您需要在 C 程序中执行此操作，您始终可以执行 shell 脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T22:54:56.640

像这样的东西怎么样...

```
std::cout<<"Header File is:"<<argv[1]<<endl;

std::ifstream file(argv[1]);
int lineNum = 0;
bool hasIfdef = false;

while( file.good() )
{
    std::string line;
    std::getline( file, line );
    lineNum++;

    if( line.find("#ifdef") != std::string::npos ||
        line.find("#ifndef") != std::string::npos )
    {
        std::cout << "Line " << lineNum << ": " << line << std::endl;
        hasIfdef = true;
    }
} 
```

# c++ - 使用 Boost Asio 设置发布队列大小的限制？

> ID：11679125
> 
> 赞同：11
> 
> 时间：2012-07-26T22:46:07.820
> 
> 标签：c++, threadpool, boost-asio

我`boost::asio::io_service`用作基本线程池。一些线程被添加到 io_service，主线程开始发布处理程序，工作线程开始运行处理程序，一切都结束了。到目前为止，一切都很好; 我在单线程代码上得到了很好的加速。

然而，主线程有数以百万计的东西要发布。它只是继续发布它们，比工作线程处理它们的速度要快得多。我没有达到 RAM 限制，但是将这么多东西排入队列仍然有点愚蠢。我想做的是为处理程序队列设置一个固定大小，如果队列已满，则使用 post() 块。

我在 Boost ASIO 文档中没有看到任何选项。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T00:17:35.687

我正在使用信号量来修复处理程序队列的大小。以下代码说明了此解决方案：

```
void Schedule(boost::function<void()> function)
{
    semaphore.wait();
    io_service.post(boost::bind(&TaskWrapper, function));
}

void TaskWrapper(boost::function<void()> &function)
{
    function();
    semaphore.post();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-04T15:42:28.290

您可以将您的 lambda 包装在另一个 lambda 中，该 lambda 将负责计算“进行中”任务，然后在发布之前等待是否有太多正在进行的任务。

例子：

```
#include <atomic>
#include <chrono>
#include <future>
#include <iostream>
#include <mutex>
#include <thread>
#include <vector>
#include <boost/asio.hpp>

class ThreadPool {
  using asio_worker = std::unique_ptr<boost::asio::io_service::work>;
  boost::asio::io_service service;
  asio_worker service_worker;
  std::vector<std::thread> grp;
  std::atomic<int> inProgress = 0;
  std::mutex mtx;
  std::condition_variable busy;
public:
  ThreadPool(int threads) : service(), service_worker(new asio_worker::element_type(service)) {
    for (int i = 0; i < threads; ++i) {
      grp.emplace_back([this] { service.run(); });
    }
  }

  template<typename F>
  void enqueue(F && f) {
    std::unique_lock<std::mutex> lock(mtx);
    // limit queue depth = number of threads
    while (inProgress >= grp.size()) {
      busy.wait(lock);
    }
    inProgress++;
    service.post([this, f = std::forward<F>(f)]{
      try {
        f();
      }
      catch (...) {
        inProgress--;
        busy.notify_one();
        throw;
      }
      inProgress--;
      busy.notify_one();
    });
  }

  ~ThreadPool() {
    service_worker.reset();
    for (auto& t : grp)
      if (t.joinable())
        t.join();
    service.stop();
  }
};

int main() {
  std::unique_ptr<ThreadPool> pool(new ThreadPool(4));
  for (int i = 1; i <= 20; ++i) {
    pool->enqueue([i] {
      std::string s("Hello from task ");
      s += std::to_string(i) + "\n";
      std::cout << s;
      std::this_thread::sleep_for(std::chrono::seconds(1));
    });
  }
  std::cout << "All tasks queued.\n";
  pool.reset(); // wait for all tasks to complete
  std::cout << "Done.\n";
} 
```

输出：

```
Hello from task 3
Hello from task 4
Hello from task 2
Hello from task 1
Hello from task 5
Hello from task 7
Hello from task 6
Hello from task 8
Hello from task 9
Hello from task 10
Hello from task 11
Hello from task 12
Hello from task 13
Hello from task 14
Hello from task 15
Hello from task 16
Hello from task 17
Hello from task 18
All tasks queued.
Hello from task 19
Hello from task 20
Done. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T10:25:26.420

you could use the strand object to put the events and put a delay in your main ? Is your program dropping out after all the work is posted? If so you can use the work object which will give you more control over when your io_service stops.

you could always main check the state of the threads and have it wait untill one becomes free or something like that.

//links

[http://www.boost.org/doc/libs/1_40_0/doc/html/boost_asio/reference/io_service__strand.html](http://www.boost.org/doc/libs/1_40_0/doc/html/boost_asio/reference/io_service__strand.html)

[http://www.boost.org/doc/libs/1_40_0/doc/html/boost_asio/reference/io_service.html](http://www.boost.org/doc/libs/1_40_0/doc/html/boost_asio/reference/io_service.html)

```
//example from the second link
boost::asio::io_service io_service;
boost::asio::io_service::work work(io_service); 
```

hope this helps.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-04T15:50:19.997

也许尝试降低主线程的优先级，以便一旦工作线程忙起来，他们就会饿死主线程和系统自我限制。

# security - 如何在即将推出的 BB10 手机和平台中访问 NFC 安全元件？

> ID：11679126
> 
> 赞同：1
> 
> 时间：2012-07-26T22:46:26.180
> 
> 标签：security, api, nfc, blackberry-10

由于 BB10 不支持直接 Java 开发（对吗？），至少不使用 Android Java Runtime（我不想使用），我想知道是否会有官方支持和来自 RIM 的官方 API，用于访问和写入即将推出的 BB10 手机的安全元件。我是一名开发人员，正在考虑使用 BB10 平台来开发需要在安全元件上进行读/写操作的应用程序。那可能吗？我需要来自 RIM 的特殊权限和/或密钥吗？

非常感谢您的回答！到目前为止，显然没有太多关于该主题的文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T10:07:16.113

他们已经移除了 BB10 上的 SE，只留下了 UICC……我们觉得这是一件好事，因为访问 SIM 的 SE 存在很多问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T15:13:23.753

在其他论坛发了一些帖子后，我了解到在即将推出的 BB10 平台中确实有一个用于访问 SE的[API 。](https://developer.blackberry.com/native/beta/reference/com.qnx.doc.nfc/topic/manual/nfc_lib_nfc_conceptual_overview.html "API")它包含在 BlackBerry 10 Native SDK（Beta 2）中。到目前为止，它似乎符合我的目的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T14:44:25.253

最好的办法是访问 RIM[问题跟踪器站点](https://www.blackberry.com/jira/)，如果您在[BlackBerry Jam Zone](https://bdsc.webapps.blackberry.com/bdsc/home.html)上注册了一个帐户，您就可以获得访问权限。在 BlackBerry 10 项目下提交问题，为您想做的事情制定商业案例。他们可能会告诉你他们的计划是什么，但如果你能提出足够有力的理由，路线图仍然存在一些可变性。

# javascript - Jquery .click 防止默认 onClick

> ID：11679138
> 
> 赞同：0
> 
> 时间：2012-07-26T22:47:44.243
> 
> 标签：javascript, jquery, html, click

我在无序列表中有多个列表项。每个列表项如下所示：

```
<li class="something" onclick="function(somePHPparameter)">somePHPparameter</li> 
```

如果这很重要，该函数将通过 ajax 填充当前为空的 div。我希望它默认情况下，当页面第一次完成加载时，单击 li 将填充 div。如果再次单击相同的 li，则会清空 div。如果点击了另一个 li，只需使用不同的“somePHPparameter”更改内容。我目前的实现是这样的：

```
$('.continent').click(function(){
    if ($(this).hasClass('select')){
        $("#box").empty();
        $('.continent').removeClass('select');
    }
    else{
        $('.continent').removeClass('select');
        $(this).addClass('select');
    }
}); 
```

一，我的代码有什么错误的逻辑吗？有什么额外的吗？二，实际的问题是，即使类被删除，填充 div 的 onclick 仍然发生。e.preventDefault() 和 e.stopPropagation() 不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T00:12:57.977

event.preventDefault() 和 event.stopPropagation() 在这种情况下将无济于事，因为在触发单击时已经调用了两个不同的函数。一个函数称为内联函数，另一个函数使用 jQuery 调用。

为避免这种情况，请从 jquery click 处理程序中删除`onclick`属性`<li>`并调用该函数。

如果它是 PHP 生成的参数，请将其添加为`rel`属性`<li>`并在 jquery 处理程序中使用，如下所示：

```
<li class="something" rel="somePHPparameter">somePHPparameter</li> 
```

--

```
$('.continent').click(function(){
if ($(this).hasClass('select')){
    $("#box").empty();
    $('.continent').removeClass('select');
}
else{
    $('.continent').removeClass('select');
    $(this).addClass('select');

    var PHPparam = $(this).attr('rel');

    functionCallUsing(PHPparam);
}

return false;
}); 
```

只是一个粗略的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T22:51:03.180

你可以简单地做

```
$('.continent').click(function(){
    if ($(this).hasClass('select')){
        $("#box").empty();
        $('.continent').removeClass('select');
    }
    else{
        $('.continent').removeClass('select');
        $(this).addClass('select');
    }

    return false;
}); 
```

# apache - 从 WAN 访问 Apache 虚拟主机

> ID：11679139
> 
> 赞同：0
> 
> 时间：2012-07-26T22:47:50.723
> 
> 标签：apache

我设置了一些 Apache 虚拟主机。我想从外部访问它们。我找到了一篇文章[Port-based Apache virtual hosts](http://www.mikeraynham.co.uk/articles/port-based-apache-vhosts)，它解释了您可以告诉每个人在特定端口上侦听：

```
Listen 10080
<VirtualHost *:80 *:10080>
    DocumentRoot "/Users/.../public_html"
    ServerName www.foo.com
    <Directory "/Users/.../public_html">
        Options Indexes FollowSymLinks MultiViews
        AllowOverride None
        Order deny,allow
        Allow from all
    </Directory>
</VirtualHost> 
```

每个都需要一个`Listen <unique port>`，我必须转发路由器上的每个端口。所以结果是：

*   `http://<my ip address>:10080`
*   `http://<my ip address>:10081`
*   `http://<my ip address>:10082`
*   ETC...

有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T22:49:10.597

您正在寻找“基于名称的虚拟主机”。

# mysql - 如何在两列上使用 WHERE 子句加速 MySQL 查询？

> ID：11679142
> 
> 赞同：2
> 
> 时间：2012-07-26T22:48:21.690
> 
> 标签：mysql, sql

我正在尝试加快对具有两列 WHERE 子句的大表的查询，尽我所能，MySQL 仅使用 ALERT_ID 列。

有没有办法使用两个索引重写这个查询？

SHOW_INDEX 和 EXPLAIN 输出如下。

```
show index from alert_hit;

+-----------+------------+-------------------+--------------+-------------------+-----------+-------------+----------+--------+------+------------+---------+---------------+
| Table     | Non_unique | Key_name          | Seq_in_index | Column_name       | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment | Index_comment |
+-----------+------------+-------------------+--------------+-------------------+-----------+-------------+----------+--------+------+------------+---------+---------------+
| alert_hit |          0 | PRIMARY           |            1 | id                | A         |    15181402 |     NULL | NULL   |      | BTREE      |         |               |
| alert_hit |          1 | alert_id          |            1 | alert_id          | A         |          20 |     NULL | NULL   | YES  | BTREE      |         |               |
| alert_hit |          1 | timestamp         |            1 | timestamp         | A         |      446511 |     NULL | NULL   | YES  | BTREE      |         |               |
| alert_hit |          1 | data_source_id    |            1 | data_source_id    | A         |          20 |     NULL | NULL   | YES  | BTREE      |         |               |
| alert_hit |          1 | filter_syndicated |            1 | filter_syndicated | A         |          20 |     NULL | NULL   | YES  | BTREE      |         |               |
| alert_hit |          1 | unique_id         |            1 | unique_id         | A         |     5060467 |     NULL | NULL   | YES  | BTREE      |         |               |
| alert_hit |          1 | date_created      |            1 | date_created      | A         |      281137 |     NULL | NULL   |      | BTREE      |         |               |
| alert_hit |          1 | language          |            1 | language          | A         |          20 |     NULL | NULL   | YES  | BTREE      |         |               |
| alert_hit |          1 | region            |            1 | region            | A         |       42406 |     NULL | NULL   | YES  | BTREE      |         |               |
| alert_hit |          1 | market_rank       |            1 | market_rank       | A         |          20 |     NULL | NULL   | YES  | BTREE      |         |               |
+-----------+------------+-------------------+--------------+-------------------+-----------+-------------+----------+--------+------+------------+---------+---------------+

explain select count(id) as history FROM alert_hit force index(alert_id, timestamp) where alert_id in (9045,9046,9047,9048,9049,9050,9051,9052,9330,9332)  AND timestamp between DATE_SUB( NOW(), INTERVAL 1*2 day) and DATE_SUB( NOW(), INTERVAL 1 day);
+----+-------------+-----------+-------+--------------------+----------+---------+------+-------+-------------+
| id | select_type | table     | type  | possible_keys      | key      | key_len | ref  | rows  | Extra       |
+----+-------------+-----------+-------+--------------------+----------+---------+------+-------+-------------+
|  1 | SIMPLE      | alert_hit | range | alert_id,timestamp | alert_id | 5       | NULL | 99578 | Using where |
+----+-------------+-----------+-------+--------------------+----------+---------+------+-------+-------------+ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T22:53:21.677

您需要在两个字段上都有一个索引

```
ALTER TABLE alert_hit ADD INDEX `IDX-alert_id-timestamp` (`alert_id`, `timestamp`); 
```

此外，MySQL 将使用多列索引，直到 WHERE 子句中存在范围条件的第一个字段，所以在这种情况下，顺序很重要，`timestamp`应该在索引中的最后一个。

正如@spencer7593 所建议的那样，选择`COUNT(1)`而不是`count(id)`可能会更好。

# launcher - install4j 条件如何检查启动器是 UI 还是控制台应用程序启动器？

> ID：11679146
> 
> 赞同：2
> 
> 时间：2012-07-26T22:48:37.777
> 
> 标签：launcher, install4j

如果我在控制台上或使用 UI（纯文本与 html 文本）运行，我想显示不同的许可证文本。我想我可以通过屏幕上的条件来做到这一点，但我不确定如何确定正在运行哪种启动器。

我想我会使用 LauncherSetup.getType() 并且可以获取 LauncherSetup getLauncherById(java.lang.String id) 如果我可以找出正在运行的启动的 id，但我不确定如何获取正在运行的 Launcher 的 id。

如果您对这种情况有解决方案，请告诉我。如果现在，当我弄清楚如何获取launcherID后，我会发布我的代码

谢谢

彼得

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T07:41:14.517

您可以添加两次“显示许可协议”屏幕。在第一个实例中，使用 HTML 文件并将条件表达式设置为`!context.isConsole()`，在第二个实例中，使用纯文本文件并将条件表达式设置为`!context.isConsole()`。

但是，install4j 可以在控制台模式下自动将 HTML 文本转换为纯文本。这仅适用于您的 HTML 文件以`<html>`.

# c# - 在没有 Flash 的情况下将实时音频流式传输到网站

> ID：11679147
> 
> 赞同：4
> 
> 时间：2012-07-26T22:48:54.130
> 
> 标签：c#, .net, asp.net-mvc-3, html, audio-streaming

我试图找出有哪些库可以将实时音频流式传输到网站。

我想留在的当前技术堆栈是......

MVC3/C# HTML/HTML5

基本上，我想要构建一些东西，让最终用户除了安装他们的（现代）浏览器并流式传输音频之外什么都没有。如果可能的话，我希望相同的最终用户界面也支持以前录制的内容。

至于事物的输入方面，我不在乎它使用什么，只要它是基于 .net/c# 的技术，或者如果不是 .net/c#，我需要它预先构建并能够发送到.net 端点。

*我已经在 SO 上搜索了这个主题，并找到了几篇关于这个主题的帖子，但大多数都非常模糊，不适合我使用的技术堆栈（java/flash/etc），所以请如果你在链接之前设法确定它实际上与问题内联！*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T10:02:40.720

我建议您从[W3Schools - HTML5 音频页面开始，并实现一个 C# 处理程序，该处理程序返回](http://www.w3schools.com/html/html5_audio.asp "W3Schools - HTML5 音频")[源标记](http://www.w3schools.com/tags/tag_source.asp "源标签")的音频内容的字节流。如果做不到这一点，有[一堆](http://buzz.jaysalvat.com/ "嗡嗡声")[JavaScript](http://www.createjs.com/#!/SoundJS "SoundJS") [库](http://joewlarson.com/blog/2011/10/16/introducing-thunder-js/ "迅雷JS")应该能够帮助您正确实现这一点。

[我在ThunderJS](http://joewlarson.com/blog/2011/10/16/introducing-thunder-js/ "迅雷JS")上面链接的最后一个，看起来很有希望只是因为介绍性的行：

> Thunder 通过使用包含 base64 数据 URI 的 src 值创建 HTML5 音频元素来发挥其魔力。

您还可以在 StackOverflow 上查看类似的问题，因为您想在客户端执行此操作，因此选择的语言不是那么大的问题……也许从[这里](https://stackoverflow.com/questions/5305974/html5-audio-streaming)开始，或从[这里](https://stackoverflow.com/questions/6593738/audio-data-streaming-in-html5)开始，或从[这里](https://stackoverflow.com/questions/3809519/streaming-audio-with-html5-audio-tag)开始。

做不到这一点，总是有“谷歌”把我带到了[这些](http://smashinghub.com/10-best-html5-audio-players.htm)，[少数](http://www.catswhocode.com/blog/10-awesome-html5-audio-players)，[列表](http://www.jquery4u.com/media/10-jquery-html5-audio-players/)？

希望这有助于为您指明正确的方向。祝你好运。

# windows-phone-7 - ApplicationService.State 和墓碑

> ID：11679152
> 
> 赞同：0
> 
> 时间：2012-07-26T22:49:16.660
> 
> 标签：windows-phone-7, serialization

当应用程序被墓碑化时，ApplicationService.State 是否会被序列化为闪存？（WP7 和 WP7.5）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T23:21:06.820

PhoneApplicationService.Current.State 是在应用程序被墓碑化的情况下保存临时数据的地方。然后你可以读回这些数据并恢复你的应用程序的状态。

# amazon-ec2 - 如何在我的 Amazon EC2 实例上公开托管文件？

> ID：11679153
> 
> 赞同：0
> 
> 时间：2012-07-26T22:49:18.360
> 
> 标签：amazon-ec2

虽然类似于[Amazon EC2 我如何在我的实例上托管 PDF 文件？](https://stackoverflow.com/questions/6721582/amazon-ec2-how-do-i-host-a-pdf-file-on-my-instance)这不是区分大小写的简单案例。

我目前有我想在 /var/www/html 中公开提供的文件，它是 DocumentRoot （尽管请注意我们也设置了亚马逊 EBS），但仍然去 ourinstance/file.pdf 给出 404 not found .

我想避免使用 S3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T22:55:50.323

您需要设置一个 Web 服务器（apache/nginx）并将其配置为提供文件（来自域）。为此，您需要设置一个虚拟主机（或 nginx 中的等效主机）。

完成后，您启动服务器并假设 DNS 设置正确设置，您的文件应该被提供。

我认为这个问题更适合在 serverfault 而不是 stackoverflow 上提出。

# php - 以标签分隔的分解列表

> ID：11679157
> 
> 赞同：0
> 
> 时间：2012-07-26T22:49:44.100
> 
> 标签：php, list, explode

我有一个像这样分开的列表：

```
<!--start-->
item 1
<!--end-->
<!--start-->
item 2
<!--end--> 
```

我需要创建一个数组，第一个变量是第 1 项，第二个是第 2 项，依此类推...

我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T22:53:04.377

```
$string = .... <your data>
$array = explode('<!--start-->\n', $string);
$final = array();
foreach ($array as $line) {
   $final[] = str_replace('<!--end-->\n', '', $line);
}
echo "<pre>";
print_r($final); 
```

这会给你你正在寻找的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T22:53:38.457

看一下 preg_split() 函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T22:55:34.923

假设列表在`$input`：

```
// remove the start tag and add a newline at the end
$input = str_replace("<!--start-->\n", "", $input . "\n");

// break the list into an array (the last item will be an empty string)
$output = explode("\n<!--end-->\n", $input);

// remove the empty item at the end
unset($output[count($output) - 1]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T22:56:48.493

我的提议：

```
$str = "<!--start-->
item 1
<!--end-->
<!--start-->
item 2
<!--end-->";

$in = explode(PHP_EOL, $str);

function filter($ell) {
    if (strpos($ell, '<!--') !== 0){
        return true;
    }
    return false;
}

$arr = array_filter($in, 'filter');

var_dump($arr); 
```

# delphi - 用于列设置的标题行中的图标

> ID：11679169
> 
> 赞同：1
> 
> 时间：2012-07-26T22:50:51.733
> 
> 标签：delphi, datagrid

我想在我的数据网格的标题中添加一个图标，就像在 Thunderbird 中一样。无论水平滚动条的位置如何，垂直滚动条上方都有一个图标。此图标允许设置列。

在 Delphi 中有很多不同的网格组件，允许自定义并向单元格/标题单元格添加图标。但是我找不到任何在垂直滚动条上方具有固定区域的组件，单击该区域时可以执行某些操作。如果结果证明自定义该组件更容易，我什至可以使用 VirtualTreeView 组件来模拟网格。

我正在寻找一些关于需要做什么来获得该功能的指导。

谢谢，托马斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T07:50:40.630

列表框模式下的 VirtualTreeView 会很好，因为它速度快、文档丰富并且易于在类似 MVC 的模式中使用。Delphi 试图将数据存储在可视化组件本身中，这会导致麻烦。虽然 VTW allwos 相同，但它也允许将数据从 GUI 中分离出来，我喜欢它。

但我对你的说法感到惊讶“*当点击它允许一些行动。* ”。即使是最基本的组件也允许它：

[http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.Grids.TCustomGrid.OnFixedCellClick](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.Grids.TCustomGrid.OnFixedCellClick)

那么您能否详细说明一下，为什么不能使用标准组件？使用屏幕截图和编辑器，你希望它如何呈现，你想点击哪里以及应该发生什么样的动作？

# linux - “ccmath”库是否在 x86-64 linux 上编译？

> ID：11679174
> 
> 赞同：0
> 
> 时间：2012-07-26T22:51:41.563
> 
> 标签：linux, compiler-errors

Ccmath 库： [http ://freecode.com/projects/ccmath](http://freecode.com/projects/ccmath)

它没有`32/64 bit`在描述中指定，但是当我在 Ubuntu 10.10 64 位上编译时，它在 asm 文件编译时吐出错误：

> solv.s:13：错误：“push”的指令后缀无效

代码行：`pushl %ebp`

但是，如果我替换`cc`shell 指令就`gcc -m32`可以了！但是，我可以编译它`x86-64`吗？我必须将此链接到 64 位项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T23:39:35.713

那个 ccmath 包看起来自 2001 年以来就没有更新过。它的汇编程序不支持 64 位。您应该`non_intel.sh`按照安装文件中的说明运行包含的脚本。（就这个包而言，x86-64 是非英特尔的，因为“英特尔”的意思是“x86-32”。）

# android - Android：将数据从服务推送到活动

> ID：11679177
> 
> 赞同：1
> 
> 时间：2012-07-26T22:52:19.480
> 
> 标签：android, service, callback

我正在使用 ICP 来创建活动和服务之间的通信。我可以使用接口从活动中调用服务的方法。

我的问题是，有时我想将数据从服务推送到活动，我想从服务调用活动；s 方法。例如：updateTextView(String msg);

我不想使用广播，因为我读到它的性能不是很好。

我读了一些关于回调的东西，但我不知道如何创建它以及把它放在哪里。

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T23:06:11.543

您可以放置​​一个用于启动服务的捆绑包。在您想要传回活动的服务中填充该捆绑包。然后将包传递回活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T23:24:15.770

你可以通过 Handler 试试这个。你在你的activity中创建一个字段Handler，你的Service和onServiceConnected方法中的其他同一个类调用一个Service的方法setHandler。然后，您可以通过 Service 的 handler 向 Activity 的 handler 字段发送消息。

```
public class mService extends Service{
 private myHandler handler;
.....
  public void setHandler(myHandler activityHandler){
 this.handler=activityHandler;
 }
}

public class Activity extends Activity{
  private myHandler activityHandler;
  ....
  public class myHandler extends Handler{

        @Override
        public void handleMessage(Message msg){

            switch(msg.what){
            //Implement this
          }
      }
}   
      private ServiceConnection mConnection = new ServiceConnection() {

            @Override
            public void onServiceConnected(ComponentName className,
                    IBinder service) {
                    .....
                mService= binder.getService();
                mBound = true;
                mService.setHandler(dHandler);
            }

            @Override
            public void onServiceDisconnected(ComponentName arg0) {
                mBound = false;
            }
        };
} 
```

# graph - Dijkstra 算法：为什么我最终会卡在这个例子中？

> ID：11679189
> 
> 赞同：4
> 
> 时间：2012-07-26T22:53:23.567
> 
> 标签：graph, theory

我一直在尝试为以下无向图跟踪 Dijkstra 的最短路径算法：

```
        (乙)
       / \
      / \
  6 / \ 9
    / \
   / \
  / \
 (A)- 5 -(C)- 1 -(F)----2----(I)
   \ /
    \ /
  4 \ / 2
      \ /
       \ /
        \ /
         (四)

为了澄清：
(N) 代表节点，没有格式的数字代表权重。
A 和 C 之间的边的权重为 5，
C 和 F 之间的边的权重为 1。

```

我将在这里概述我的过程：

由于 A 是我的初始节点，因此算法从这里开始。由于 D 是更便宜的路径，算法会遍历 D。A 现在被标记为已访问，这意味着我们不能再次遍历它。

在 D 处，很容易看出我们将移至 F。

F是我开始遇到麻烦的地方。由于最短路径将引导我到 C，我被困在两个访问节点之间，无法到达 I。有人可以帮助我吗？

编辑：对不起图表家伙，这个问题最初是通过电话提出的。我会尽快修好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T23:17:29.413

你的工作方式是错误的。“在 D 很容易看出我们将移至 F”，这是不正确的。您首先访问 D，然后访问 C，而不是 F。仔细查看算法及其作用。

首先，您访问 A，因此您有以下成本：6 到 B，5 到 C，4 到 D，其余节点为 INFINITE。

您首先前往 D。您现在将成本从 A 更新到 F（通过 D）到 6。您要访问的下一个节点不是 D，而是 C，因为它在**所有未访问的节点中****成本最低**(5)**节点**。从 A 到 F 通过 C 的成本是 6，这已经是您的成本，因此无需更新。

从那里你在 B 和 F 之间有 6 的平局。假设你先去 B，然后什么都没有发生，因为到 F 的最短路径已经是 6，而通过 B 去 F 将花费 15，这更贵比你已经拥有的成本，所以不要更新成本。然后访问 F，因为它在所有未访问的节点中成本最低。从那里你更新你到 I 的路径，它不再是 INFINITE 而是 8。

因此，您从 A 到 I 的最短路径如下： A - D - F - I 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T23:02:20.263

从C你仍然不能回到A，你不能回到F，所以这条路是假的。如果 C 给您带来死胡同，您需要在下一次迭代中从图中删除它，或者忽略最后一步并按照您的预期从 F 移动到 I。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T23:03:49.817

[http://en.wikipedia.org/wiki/Dijkstra](http://en.wikipedia.org/wiki/Dijkstra) 's_algorithm - 你记得它在移动到另一个顶点之前会处理一个顶点的所有邻居，对吧？在转到 D 之前，它会处理 C 和 B（计算它们的距离）。从你的图表来看，D和F之间没有路线..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T23:11:22.890

Dijkstra 算法使用优先级队列。这不是图上的行走，并且可以按不类似于路径的顺序访问顶点。例如，这棵树：

```
A -> B -> C
  \
   > D -> E -> F 
```

所有权重 1 按 A、B、D、C、E、F 的顺序进行探索。每次迭代都以最小的成本访问顶点并将其弹出；最初你弹出 A，B 和 D 的成本更新为 1；你访问 B，C 的成本更新为 2；你访问 D，E 的成本更新为 2；您访问 E；最后是 F。

# c# - ObservableCollection 的问题 在 Silverlight 客户端

> ID：11679192
> 
> 赞同：0
> 
> 时间：2012-07-26T22:53:53.333
> 
> 标签：c#, wcf, data-binding, silverlight-4.0

我有一个带有 WPF 客户端、WCF 服务和 Silverlight 客户端 (SL 4) 的解决方案。

WPF 客户端工作顺利，但 Silverlight 正在发挥作用，我不知道如何处理它。

这些是我在 Silverlight 中的代码片段：

```
using sl_HFClient.svc;

namespace sl_HFClient
{
public partial class MainPage : UserControl
{
    svc.IhfsvcClient dataSrv = new svc.IhfsvcClient();
    ObservableCollection<svc.ReasonData> reasonData;
} 
```

这是设置一切，接下来是对服务的调用：

```
 private void UserControl_Loaded(object sender, RoutedEventArgs e)
    {
        dataSrv.wcGetReasonsCompleted += ReasonsLoaded;
        dataSrv.wcGetReasonsAsync();
    } 
```

最后，获取集合并将其绑定到组合框的代码：

```
 private void ReasonsLoaded(object sender, wcGetReasonsCompletedEventArgs e)
    {
        reasonData = e.Result;
    } 
```

但是，这会返回以下错误：

> 无法将类型“sl_HFClient.svc.ReasonData[]”隐式转换为“System.Collections.ObjectModel.ObservableCollection”

我对 Silverlight 和 C# 很陌生，我之前用 SL4 和 VB.NET 做过一些事情，并且通过将此代码与 VB.NET 项目进行比较，它似乎可以工作。

我究竟做错了什么？？

//JaggenSWE

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T23:10:20.620

尝试以下操作：

```
private void ReasonsLoaded(object sender, wcGetReasonsCompletedEventArgs e)
{
    reasonData = new ObservableCollection<ReasonData>(e.Result);
} 
```

不完全确定这是否适用于 Silverlight，但解决方案仍然是显式创建一个 new`ObservableCollection<ReasonData>`而不是尝试从`ReasonData[]`.

# css - CSS 中心浮动

> ID：11679194
> 
> 赞同：0
> 
> 时间：2012-07-26T22:54:14.033
> 
> 标签：css, html, css-float

只是匆匆忙忙，我可能在这里很傻，但无论如何：

我有一个以边距居中定位的导航，它有一个链接列表，我遇到的问题是因为我的所有`<li>`类都被赋予了 css：`float:left`它们在左侧对齐。

例如：

![导航示例](../Images/3b024d9dab8500df7a3b78a80e8ce9c6.png)

我想知道是否有任何方法可以使这些居中？

谢谢

CSS：

```
section#nav {
    height: 45px;
    margin-bottom:5px;
    text-align:center;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
}
nav {
    max-width: 700px;
    height: 45px;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    margin: 0 auto;
}

nav ul {
    padding:12px 15px;
    margin:0 auto;
    text-align:center;
    overflow:hidden;
}

nav ul li {
    font-size:14px; 
    float:left;
}

nav ul li a {
    color: #FFFFFF;
    margin:0 10px;  
    transition: all 0.5s ease-out !important; 
    -moz-transition: all 0.5s ease-out !important;
    -ms-transition: all 0.5s ease-out !important; 
    -webkit-transition: all 0.5s ease-out !important; 
    -o-transition: all 0.5s ease-out !important;
}

nav ul li a.nav-path-selected {
    border-bottom:1px #ffffff solid;
}

nav ul li a.nav-path-selected {
    border-bottom:1px #ffffff solid;
    color:#FFFFFF !important;
}

nav ul li a:hover {
    color:#CCCCCC !important;
    transition: all 0.5s ease-out !important; 
    -moz-transition: all 0.5s ease-out !important;
    -ms-transition: all 0.5s ease-out !important; 
    -webkit-transition: all 0.5s ease-out !important; 
    -o-transition: all 0.5s ease-out !important;
} 
```

HTML：

```
<section id="nav">
  <nav>
    <ul class="nav">
      <li class="nav-selected nav-path-selected">
        <a class="nav-selected nav-path-selected" href="/">Home</a>
      </li>
      <li>
        <a href="/about/">About Us</a>
      </li>
      <li>
        <a href="/opportunities/">Opportunities</a>
      </li>
      <li>
        <a href="/inspiration/">Inspiration</a>
      </li>
      <li>
        <a href="/members/">Members</a>
      </li>
    </ul>
  </nav>
</section> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T22:57:25.390

你可以这样

```
ul{
    display:block;
    width:100%;
    text-align:center;
}

ul>li{
    display:inline;
} 
```

使用 display:inline 代替 display:inline-block 可能不会影响外观，但允许在 IE 7 上正确显示

在这里查看[jsfiddle.net/kmcYE/2](http://jsfiddle.net/kmcYE/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T22:55:50.547

将您的 < ul > 元素放在 < div > 中，然后在页面上调整 div 的大小并将其居中。只要将 div 设置为明确的宽度值（例如菜单项的宽度），然后将 div 的左右边距设置为自动，它就会自动居中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T22:59:18.883

如果在您的`li`css 上，唯一需要的调整：

请参阅此[工作小提琴](http://jsfiddle.net/97vZg/)示例。

**添加**

```
display:inline-block; 
```

**消除**

```
float:left; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T23:00:53.570

给`nav ul`一个`display: inline-block;`属性。这会将列表缩小到其内容的宽度，并在其包含元素中水平居中。

示例：http: [//jsfiddle.net/VMqUe/](http://jsfiddle.net/VMqUe/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-27T16:41:14.513

谢谢大家，我结合了您的答案来构建解决方案：

```
nav ul {
    padding:12px 15px;
    margin:0 auto;
    text-align:center;
    overflow:hidden;
}

nav ul li {
    font-size:14px; 
    display:inline-block;
    display:inline;
} 
```

# c# - 如何在 c# 中解析 zip 或复合文件中的信息？

> ID：11679207
> 
> 赞同：0
> 
> 时间：2012-07-26T22:55:28.340
> 
> 标签：c#, parsing, zip

我是 c# 和一般编程的新手。我已经开始创建自己的 powerpoint 插件。我已经将它带到了用户可以浏览 zip 文件的位置，但现在我需要知道 - 如何从该 zip 中的文件或 c# 中的复合文件中解析信息？

我必须使用图书馆吗？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T00:00:10.920

正如其他人所提到的，`System.IO.Compression`命名空间具有[`ZipFile`](http://msdn.microsoft.com/en-us/library/system.io.compression.zipfile.aspx)用于创建/提取 zip 文件的类。但是，它们仅在 .NET 4.5 中可用，目前仅作为 Visual Studio 2012 RC 的一部分提供。

参见`System.IO.Compression`：

*   [.NET 4](http://msdn.microsoft.com/en-us/library/3z72378a)
*   [.NET 4.5](http://msdn.microsoft.com/en-us/library/3z72378a%28v=vs.110%29)

到目前为止，在 .NET 中处理 zip 文件的事实标准一直是[DotNetZip 库](http://dotnetzip.codeplex.com/)。它在开源[MS-PL 许可](http://dotnetzip.codeplex.com/license)下可用。

另见：

*   [在 .NET 4.0 中处理没有第三方库的 Zip 文件？](https://stackoverflow.com/questions/5945209/handling-zip-files-without-third-party-lib-in-net-4-0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T23:08:13.867

通常，要使用 ZIP 文件，请使用[`ZipArchive`](http://msdn.microsoft.com/en-us/library/system.io.compression.ziparchive.aspx)代表 ZIP 文件的类，或使用静态[`ZipFile`](http://msdn.microsoft.com/en-us/library/system.io.compression.zipfile.aspx)类的成员来处理 ZIP 文件，并使用[`DeflateStream`](http://msdn.microsoft.com/en-us/library/system.io.compression.deflatestream.aspx)该类来读取压缩文件的内容。

要轻松读取二进制文件的内容，请使用[`BinaryReader`](http://msdn.microsoft.com/en-us/library/system.io.binaryreader.aspx)该类。否则，将[`StreamReader`](http://msdn.microsoft.com/en-us/library/system.io.streamreader.aspx)类用于文本文件。

# javascript - 用css和图片打开新窗口

> ID：11679215
> 
> 赞同：4
> 
> 时间：2012-07-26T22:56:04.323
> 
> 标签：javascript, jquery, html, css, image

我正在做一个简单的打印选项，单击时我会调用打印功能。该函数复制相关（不是全部）html。

```
function print() {

var printWindow = window.open("", "Print", "status=no, toolbar=no, scrollbars=yes", "false" );
var toInsert = $("div.book").html();
$(printWindow.document.body).html(toInsert);

} 
```

我遇到的问题是这个新窗口似乎无法引用我的 css 样式表或文件夹中的图片。有任何想法吗？只关注css问题，是否可以`<link ... />`在新窗口的头部插入a？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T22:57:02.817

这是一个全新的窗口。它必须有自己的 CSS 等。

当您将文档写入其中时，您必须写入`<link>`标签、`<script>`标签和其他类似的东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T23:06:18.740

```
function Print() {
    var printWindow = window.open("", "Print", "status=no, toolbar=no, scrollbars=yes", "false" );
    $("link, style, script").each(function() {
       $(printWindow.document.head).append($(this).clone())
    });
    var toInsert = $("div.book").html();
    $(printWindow.document.body).append(toInsert);​
} 
```

[演示](http://jsfiddle.net/zCdrn/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-19T16:06:35.990

要将指向现有 CSS 样式表的链接动态插入到新窗口的头部，这对我来说效果很好：

```
var cssNode = document.createElement('link');
cssNode.type = 'text/css';
cssNode.rel = 'stylesheet';
cssNode.href = 'http://www.somedomain.com/styles/FireFox.css';
cssNode.media = 'screen';
cssNode.title = 'dynamicLoadedSheet';
printWindow.document.getElementsByTagName("head")[0].appendChild(cssNode); 
```

[来源：Totally Pwn CSS with Javascript](http://www.hunlock.com/blogs/Totally_Pwn_CSS_with_Javascript) - 关于直接操作样式表还有一些其他有趣的技巧

# jquery - Microsoft Azure 翻译 AJAX API 不工作

> ID：11679217
> 
> 赞同：1
> 
> 时间：2012-07-26T22:56:29.117
> 
> 标签：jquery, azure, language-translation, microsoft-translator

我正在尝试从当前版本的 MS Bing Translator 转换为新的 Azure 版本。

我按照新文档中的描述创建了一个访问令牌，尽管 Microsoft 提供的以下示例（针对 Azure）可以正常工作：

```
function translate() {

  var from = "en", to = "es", text = "hello world";
  var s = document.createElement("script");
  s.src = "http://api.microsofttranslator.com/V2/Ajax.svc/Translate" +
            "?appId=" + settings.appID +
            "&from=" + encodeURIComponent(from) +
            "&to=" + encodeURIComponent(to) +
            "&text=" + encodeURIComponent(text) +
            "&oncomplete=mycallback";
  document.body.appendChild(s);
}

function mycallback(response) {
  alert(response); 
} 
```

我想将上面的代码转换为 jQuery 调用。

我从以前的版本中修改了一个类似的 jQuery ajax 调用，它有效，但是`parseerror-jQuery17206897480448242277_1343343577741 was not called`发出了：

```
 function jqueryTranslate() {
    var p = {};
    p.appid = settings.appID;
    p.to = "es";
    p.from = "en";
    p.text = "Goodbye Cruel World";
    p.contentType = 'text/html';
    $.ajax({
      url: 'http://api.microsofttranslator.com/V2/Ajax.svc/Translate',
      data: p,
      dataType: 'jsonp',
      jsonp: 'oncomplete',
      complete: function (request, status) {
      },
      success: function (result, status) {
        alert(result);
      },
      error: function (a, b, c) {
        alert(b + '-' + c);
      }
    });
  } 
```

我非常感谢和理解出了什么问题，所以 TIA 为您提供时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T06:03:33.473

要将 Bing 翻译器与身份验证令牌一起使用，您首先需要一个服务器端脚本，例如这个 PHP 脚本 token.php。它将每 9 分钟从您网页上的 javascript 调用一次。

```
<?php
$ClientID="your client id";
$ClientSecret="your client secret";

$ClientSecret = urlencode ($ClientSecret);
$ClientID = urlencode($ClientID);

// Get a 10-minute access token for Microsoft Translator API.
$url = "https://datamarket.accesscontrol.windows.net/v2/OAuth2-13";
$postParams = "grant_type=client_credentials&client_id=$ClientID&client_secret=$ClientSecret&scope=http://api.microsofttranslator.com";

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url); 
curl_setopt($ch, CURLOPT_POSTFIELDS, $postParams);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);  
$rsp = curl_exec($ch); 

print $rsp;
?> 
```

然后这个 html 页面将显示一个从英语翻译成法语的两框界面。

***注意：这篇文章的早期版本缺少前 5 行，因此无法加载 jQuery。（对不起@db1。）工作脚本在这里在线：***

[http://www.johndimm.com/bingtrans/](http://www.johndimm.com/bingtrans/)

```
<html>

<head>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

  <script language="javascript">
    var g_token = '';

    function onLoad() {
      // Get an access token now.  Good for 10 minutes.
      getToken();
      // Get a new one every 9 minutes.
      setInterval(getToken, 9 * 60 * 1000);
    }

    function getToken() {
      var requestStr = "/bingtrans/token.php";

      $.ajax({
        url: requestStr,
        type: "GET",
        cache: true,
        dataType: 'json',
        success: function (data) {
          g_token = data.access_token;
        }
      });
    }

    function translate(text, from, to) {
      var p = new Object;
      p.text = text;
      p.from = from;
      p.to = to;
      p.oncomplete = 'ajaxTranslateCallback'; // <-- a major puzzle solved.  Who would have guessed you register the jsonp callback as oncomplete?
      p.appId = "Bearer " + g_token; // <-- another major puzzle.  Instead of using the header, we stuff the token into the deprecated appId.
      var requestStr = "http://api.microsofttranslator.com/V2/Ajax.svc/Translate";

      window.ajaxTranslateCallback = function (response) {
        // Display translated text in the right textarea.
        $("#target").text(response);
      }

      $.ajax({
        url: requestStr,
        type: "GET",
        data: p,
        dataType: 'jsonp',
        cache: true
      });
    }

    function translateSourceTarget() {
      // Translate the text typed by the user into the left textarea.
      var src = $("#source").val();
      translate(src, "en", "fr");
    }
  </script>
  <style>
    #source,
    #target {
      float: left;
      width: 400px;
      height: 50px;
      padding: 10px;
      margin: 10px;
      border: 1px solid black;
    }
    #translateButton {
      float: left;
      margin: 10px;
      height: 50px;
    }
  </style>
</head>

<body onload="onLoad();">

  <textarea id="source">Text typed here will be translated.</textarea>
  <button id="translateButton" onclick="translateSourceTarget();">Translate English to French</button>
  <textarea id="target"></textarea>

</body>

</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T14:50:18.083

另一个问题是用于针对翻译器进行身份验证的 Bing AppID 机制已被弃用。

微软有一篇博文详细介绍了在 Windows Azure Marketplace 中访问 Translator 的过程：

[http://blogs.msdn.com/b/translation/p/gettingstarted1.aspx](http://blogs.msdn.com/b/translation/p/gettingstarted1.aspx)

这里有一个 ASP.NET 示例：http: [//blogs.msdn.com/b/translation/p/gettingstarted2.aspx](http://blogs.msdn.com/b/translation/p/gettingstarted2.aspx)

建议（至少）将用于获取令牌服务器端的代码放在 ASP.NET、PHP、Node 或类似的东西中，这样您的客户端 ID 和客户端密码就不会暴露。

获得访问令牌后，需要将其写入服务调用的 HTTP 标头中。ASP.NET 示例表明，它应该相对容易适应 JQuery。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T07:05:42.453

您能否尝试在您的呼叫中添加一个**jsonpCallback**并为其定义一个新函数。当我将您的 jQuery 代码与 Microsoft 的示例进行比较时，这似乎是缺少的。

```
 function jqueryTranslate() {
    var p = {};
    p.appid = settings.appID;
    p.to = "es";
    p.from = "en";
    p.text = "Goodbye Cruel World";
    p.contentType = 'text/html';
    $.ajax({
      url: 'http://api.microsofttranslator.com/V2/Ajax.svc/Translate',
      data: p,
      dataType: 'jsonp',
      jsonp: 'oncomplete',
      jsonpCallback: 'onCompleteCallback',   <------------------ THIS LINE
      complete: function (request, status) {
      },
      success: function (result, status) {
        alert(result);
      },
      error: function (a, b, c) {
        alert(b + '-' + c);
      }
    });
  }

  function onCompleteCallback(response) {    <------------------- THIS FUNCTION
    alert('callback!'); 
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-23T19:54:51.377

尝试了 John Dimm 提交的脚本，但它对我不起作用。返回一个空白框和状态 304 Not Modified。相反，我在这个链接[http://blogs.msdn.com/b/translation/p/phptranslator.aspx](http://blogs.msdn.com/b/translation/p/phptranslator.aspx)的 msdn 博客上使用了 PHP 和 Microsoft 翻译器代码，它运行良好

# xcode - 无效签名 - XCode 4.4，Mac App Store

> ID：11679225
> 
> 赞同：0
> 
> 时间：2012-07-26T22:57:17.450
> 
> 标签：xcode, macos, signature, mac-app-store

当我尝试将我的应用程序上传到 MAS 时，我不断收到此错误。

**签名无效**- 路径 MyApp.app 中的主应用程序包 MyApp 已签名，但签名无效。有关详细信息，请参阅代码签名和应用程序沙盒指南。

我已经删除了所有旧证书并直接从 xcode 4.4 下载了新证书，但没有任何效果。帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T23:28:02.467

显然，删除（多次）并刷新证书并清理构建终于让它工作了。

# jquery - jQuery - 组合元素

> ID：11679227
> 
> 赞同：0
> 
> 时间：2012-07-26T22:57:21.893
> 
> 标签：jquery

我正在尝试将我的 WordPress 主题文件夹的位置与 jQuery 元素结合起来。我以前没怎么用过 jQuery，也做了一些研究，但没有发现任何有价值的东西。

这是我的 JavaScript 变量

```
<script type="text/javascript">var templateDir = "<?php bloginfo('template_directory') ?>"; 
```

我想在其中添加“templateDir”：

```
$next = $('<li><a href="#" class="next" class="controls"><img src="images/right_button.png" border="0" /></a></li>'); 
```

理想情况下，我认为它会是这样的，但它只是错误。

```
$next = $('<li><a href="#" class="next" class="controls"><img src="' + templateDir + 'images/right_button.png" border="0" /></a></li>'); 
```

所以我不太确定它是如何工作的。谢谢。

**更新：**修复了问题。似乎这一切都归结于 jQuery 文件不是第一个。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T23:01:34.323

尝试

```
$next = $('<li><a href="#" class="next controls"><img src="' + templateDir + 'images/right_button.png" border="0" /></a></li>'); 
```

也就是说，使用单个“类”属性。也许这就是导致错误的原因

更新：

在调用参考函数之前，请确保在开头包含 jquery 库文件。

# javascript - Javascript 图像库 - 单击图像以前进到下一个编码

> ID：11679229
> 
> 赞同：0
> 
> 时间：2012-07-26T22:57:34.253
> 
> 标签：javascript, gallery, lytebox

我正在尝试查看此图像库的 javascript 代码是否可以作为单击图像以查看下一步的选项。目前，它仅设置为通过单击下一个/上一个按钮转到下一个图像。有什么想法吗？

来源： [http ://threepointmotors.com/lytebox.js](http://threepointmotors.com/lytebox.js)

示例： [http ://threepointmotors.com/NewsandEvents/CurrentNews/2012/smartElectricDriveCollection/tabid/226/Default.aspx](http://threepointmotors.com/NewsandEvents/CurrentNews/2012/smartElectricDriveCollection/tabid/226/Default.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T23:28:03.450

我看到你的页面已经包含了 jQuery 库，所以这应该是一件容易的事。

```
$('body').on('click', '#lbImage', function() { //when display image is clicked
    if ($('#lbNext2_Off').is(':hidden')) //check if it isn't the last image
        myLytebox.changeContent(myLytebox.activeSlide + 1); //move to next image
}); 
```

# wpf - 相对于边界矩形缩放多个对象

> ID：11679233
> 
> 赞同：2
> 
> 时间：2012-07-26T22:57:40.507
> 
> 标签：wpf, graphics, geometry, diagramming

我试图找出在画布上缩放多个选定对象的算法（类似于 Visio 的行为）。例如，我的应用程序中有以下选定对象：![](../Images/d506733b8099860ddfc1e7da72b45c41.png)

然后我拖动边界框的右下角手柄以增加所选对象的大小，从而产生以下结果：

![在此处输入图像描述](../Images/7bb32d7c630eaf6175537ffa49afe3c8.png)

我的问题如下：

1.  如何获得要应用于每个对象的缩放量？
2.  如何获得要应用于每个对象的翻译量？

我希望这个问题是有道理的。我希望你能提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T02:31:50.823

嗨，我认为没有任何翻译，只有缩放。一种简单的方法是保留对象的宽度和高度，例如（上面的文本框），然后当您想要获取该对象的缩放值时

```
ScaleTransform scale = new ScaleTransform();
        //_text is the scaled object
        scale.ScaleX = text.ActualWidth - _width; //_width is width of the textbox at beginning.
        scale.ScaleY = text.ActualHeight - _height; //_height is the height of textbox at the beginning. 
```

这将为您提供对象在开始时（即窗口初始化时）与 TextBox 的宽度和高度相对应的缩放量。我hyope这会给你一个想法。

# svn - 在 CollabNet Subversion 边缘服务器上手动更新 authz

> ID：11679234
> 
> 赞同：1
> 
> 时间：2012-07-26T22:57:48.073
> 
> 标签：svn, authz, subversion-edge

我在 CollabNet Subversion Edge 3.1.0 上设置了一个存储库。

我想使用具有不同权限的 LDAP 组对我的存储库进行身份验证。

当然，Apache 的 authz 不知道 LDAP 组。我的策略是有一个脚本，它每晚自动更新存储库的 authz，如[Using LDAP Groups With Subversion's Authz File](http://www.thoughtspark.org/node/26)中所述。

但是，CollabNet 的 Web 服务器忽略了 authz，并且似乎有一个文件隐藏在某个地方，只能通过 Collabnet 管理界面进行更新。

有什么方法可以“手动”执行此操作（即查找该文件并设置权限以便系统用户可以运行脚本？）

作为记录，我将要使用的脚本是一个手卷的 Windows PowerShell 脚本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T13:24:02.827

我们建议人们一直使用这个脚本。authz 文件未隐藏。它被命名为 svn_access_file，位于 Subversion Edge 数据文件夹中。只需让您的脚本更新该文件。

# delphi - 哪个是初始化代码的最佳位置？

> ID：11679235
> 
> 赞同：2
> 
> 时间：2012-07-26T22:57:51.960
> 
> 标签：delphi

> **可能重复：**
> [启动画面以编程方式](https://stackoverflow.com/questions/3359638/splash-screen-programatically)
> [在数据库连接（可能需要很长时间）运行时显示启动画面](https://stackoverflow.com/questions/10678503/show-a-splash-screen-while-a-database-connection-that-might-take-a-long-time-r)

初始化代码（例如加载 INI 文件）的最佳位置是哪个？我想首先在屏幕上显示表单，以便用户知道应用程序正在加载，然后才想调用冗长的函数，如 LoadIniFile 或 IsConnectedToInternet（最后一个真的很慢）。

OnCreate 不好，因为表单尚未准备好并且不会显示在屏幕上。

我这样做我 DPR 但并不总是工作：

```
program Test;
begin
  Application.Initialize;
  Application.Title := 'Test app';
  Application.CreateForm(TfrmTest, frmTest);
  frmTest.Show;               <---------------------- won't show
  LateInitialize;
  Application.Run;
end. 
```

在执行 LateInitialize（4-5 秒）之前，表单不会显示。

* * *

```
procedure LateInitialize;
begin
 CursorBussy;
 TRY
  // all this won't work also. the form won't show
  frmTest.Visible:= TRUE;
  Application.ProcessMessages; 
  frmTest.Show;
  Application.ProcessMessages;
  frmTest.BringToFront;
  frmTest.Update;
  Application.ProcessMessages;

  DoSomethingLengthy;     {4-5 seconds}
 FINALLY
  CursorNotBussy;
 END;
end;     <--------- Now the form shows. 
```

是的，frmTest 这是我唯一的形式（主要形式）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T01:24:34.797

调用之后`frmTest.Show`，你可以调用`frmTest.Update`让它呈现在屏幕上，然后再调用`LateInitialize`。但是直到`Application.Run`被调用，主消息循环将不会运行，因此在此之前表单将无法执行任何其他操作。

另一种选择是使用表单的`OnShow`事件通过 将自定义窗口消息发布回表单，然后在稍后收到该消息时`PostMessage()`让表单调用。`LateInitialize`这将允许表单正常处理绘画消息，直到`LateInitialize`被调用。

任何阻塞主线程超过几毫秒/秒的东西真的应该被移到一个单独的工作线程中（尤其是像这样的东西`IsConnectedToInternet`）。主线程应该用于运行 UI。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T08:39:51.677

一个简单的方法是向自己发送消息。我一直这样做

```
const
  MSG_AFTERCREATE = WM_APP + 4711;

...
procedure OnCreate(Sender: TObject);
procedure AfterCreate(var message: TMessage); message MSG_AFTERCREATE;
...

Implementation

procedure OnCreate(Sender: TObject);
begin
  PostMessage(Self.Handle, MSG_AFTERCREATE, 0, 0);
end;

procedure AfterCreate(var message: TMessage);
begin
  //Do initializing here... the form is done creating, and are actually visible now...
end; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T07:44:32.053

变体 1：使用具有 1 秒延迟的 TTimer，从主窗体的 OnShow 运行它 在 TTimer 中进行初始化 这将为大多数组件提供时间来初始化和绘制自己 变体 1.1：在函数中使用消息方法并调用 Win API PostMessage（但不是来自 OnShow 的 SendMessage aka Perform)。这是看似但更便宜和更快的。然而，有时可能会在表单上的某些复杂组件完全绘制自身之前收到“立即执行”消息。

变体 2：使用线程（OmniThreadsLib 甚至普通 TThread）从 MainForm OnCreate 启动它，让它在后台准备所有数据，然后启用所有需要的按钮、菜单等如果你有长的和阻塞的功能，这确实是最好的方法，liek您描述了 IsConnectedToInternet。

变体 3：在显示主窗体之前使用 SplashScreen。这很好，因为用户看到该应用程序尚未读取。正是因为这个原因，这很糟糕——人们开始觉得你的程序很慢。谷歌浏览器被告知在第一时间将它们的主要形式绘制为图片，只是为了看起来“我们已经开始了”，即使实际控制会在稍后准备好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T00:16:27.350

很久以前，在另一个很远的论坛上，有人发了以下内容来记录一个表单的生命周期。我发现它很有用，所以在这里分享它。

```
Create       OnCreate
Show         OnShow
Paint        OnPaint
Activate     OnActivate
ReSize       OnResize
Paint        OnPaint

Close query  OnCloseQuery
Close        OnClose
Deactivate   OnDeactivate
Hide         OnHide
Destroy      OnDestroy 
```

尝试 OnActivate 事件。

# mod-rewrite - 重定向root请求，为所有其他人提供服务

> ID：11679242
> 
> 赞同：0
> 
> 时间：2012-07-26T22:58:34.467
> 
> 标签：mod-rewrite

似乎这与这些问题的大多数问题相反。

这是在一个 htaccess 文件中。

我想重定向我网站根目录的所有请求并正常处理所有其他请求。因此，对`mysite.tld`(or `mysite.tld/index.xxxx`) 的请求将转到`myothersite.tld`并且对`mysite.tld/dir`(or even `mysite.tld/file.xxxx`) 的请求将被正常处理。

如果可能的话，我也想提供自定义错误页面。我尝试了几种方法：

```
#This one wouldn't trap 404s anyway.
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ http://myothersite.tld [L,R=301] 
```

和这个：

```
 RewriteCond %{HTTP_HOST} ^mysite.tld
 RewriteRule ^(.*)$ http://myothersite.tld [L,R=301] 
```

但这些并没有做我想要的。

谢谢！

格雷格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T23:09:32.127

怎么样：

```
RewriteCond %{HTTP_HOST} ^mysite.tld
RewriteRule ^$ http://myothersite.tld [L,R=301]

RewriteCond %{HTTP_HOST} ^mysite.tld
RewriteRule ^index\.(html|php|htm)$ http://myothersite.tld [L,R=301] 
```

如果这是在您的服务器或虚拟主机配置中，请更改正则表达式以包含前导斜杠：`^/$`, `^/index`.

# ruby-on-rails - 如何设置 heroku postgresql 应用程序的路径？

> ID：11679247
> 
> 赞同：10
> 
> 时间：2012-07-26T22:58:58.257
> 
> 标签：ruby-on-rails, postgresql, heroku, osx-mountain-lion, pg

我刚刚安装了 heroku PSQL 应用程序（v1.0），我无法使用 gem pg“0.1.4”连接我的 rails 应用程序。我已经将路径 PATH="/Applications/Postgres.app/Contents/MacOS/bin:$PATH" 添加到我的 .profile 和 .bashrc 文件中，但似乎没有什么能让我通过调用“psql”来运行 psql。我使用“psql -h localhost”成功了。当我选择“psql”时，我得到：

```
Is the server running locally and accepting
connections on Unix domain socket "/var/pgsql_socket/.s.PGSQL.5432"? 
```

我用的是山狮。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-17T02:02:25.330

仍然很确定现有的两个答案都在回答错误的问题。作者在标题中提到他遇到了**PATH**问题，没有连接到他的数据库或配置 rails。这就是我遇到的情况，这就是我的解决方案。

按照 postgress.app 文档中的指示运行 postgres.app 并在我的 .bashrc 文件中设置**PATH -** [http://postgresapp.com/documentation](http://postgresapp.com/documentation)：

```
PATH="/Applications/Postgres.app/Contents/MacOS/bin:$PATH" 
```

问题是这个路径设置在重新启动 terminal.app 后没有生效 - 运行 which psql 正在返回“/usr/bin/psql”中的副本，这是 Lion 和 Mountain Lion 附带的副本，而不是新的安装在“/Applications/”中的版本。它甚至在 Postgres.app 说明中说“运行 which psql 以告知正在加载正确的版本”。

无论如何 - 我发现奇怪的是，在我跑步之后：

```
source .bashrc 
```

然后命令“which psql”将返回位于 /Applications/ 中的正确版本。

在这一点上，我被难住了，不得不得到一些额外的帮助。我点击的人也认为这很奇怪，但是他们很快发现**.bashrc 或 .profile 文件都没有被加载。**这很奇怪，我还没有在我的任何其他 Mac 上看到这个通过狮子运行豹。

**现在终于解决了**-我不确定这是否正确，但它确实永久解决了我的问题。我们发现它们是一个正在加载到终端的配置文件 - **.bash_login**文件。最后的解决方案就是使用 .bash_login 来获取 .bashrc 文件。这是对 .bash_login 的编辑：

```
source $HOME/.bashrc 
```

并且做到了。

无论如何，我不能说这正是 diego 需要/正在寻找的解决方案，但这绝对是我的问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-27T20:12:44.140

您需要添加`host:localhost`到您在开发环境中使用的任何数据库配置（阅读开发/测试/生产/等）：

**配置/数据库.yml**

```
development:
  adapter: postgresql
  encoding: unicode
  database: my_awesome_app_development
  pool: 5
  host: localhost
  username: my_awesome_app_development
  password: 
```

编辑：另见[升级到 OSX 10.7 Lion 后修复 Postgresql](https://stackoverflow.com/questions/6770649/repairing-postgresql-after-upgrading-to-osx-10-7-lion)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-20T01:47:06.577

我知道这是一个老问题，但我也遇到了同样的问题。问题是文档中有错字。该应用程序是 Postgres93.app，而不是 Postgres.app，所以路径应该有 Postgres93.app：

`PATH="/Applications/Postgres93.app/Contents/MacOS/bin:$PATH"`

令人惊讶的是有多少关于此的帖子，而且似乎还没有注意到错字。改变这就是我获得`psql`并`which psql`正确工作所需要的一切。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-29T13:28:02.070

您的 PATH 可能是错误的。要找出 psql 脚本的 PATH（在 mac 上），请从 Applications/Postgres 安装中的 finder 打开 sql shell 脚本。这将为您提供有关其安装位置的提示。这打开了一个窗口，告诉我它位于此处：/Library/PostgreSQL/8.4/scripts/runpsql.sh

然后，我在终端窗口中输入以下内容来设置 PATH 变量：
$ PATH="/Library/PostgreSQL/8.4/bin:$PATH"

# android - 为什么当我添加图像时我的相对布局会填充屏幕而不是包装内容？

> ID：11679251
> 
> 赞同：2
> 
> 时间：2012-07-26T22:59:50.717
> 
> 标签：android, button, imageview, margin, android-relativelayout

我有一个RelativeLayout，我们将其称为“滑块”，当单击“添加人员”时，我想覆盖另一个RelativeLayout（通过切换可见性=“消失”和“可见”），但覆盖应该只需要根据需要增加屏幕的宽度。当单击“取消”时，此布局将被删除。到目前为止一切正常。

![正确关闭](../Images/214ac5432eea34e5010621a2c9dc42cd.png) ![正确打开](../Images/90dbfe64238e96b306a62ac3ab09124b.png)

```
RelativeLayout slider;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_people);
    RelativeLayout add = (RelativeLayout) findViewById(R.id.add_wrapper);
    RelativeLayout cancel = (RelativeLayout) findViewById(R.id.cancel_wrapper);
    slider = (RelativeLayout) findViewById(R.id.add_people_slider);

    add.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            slider.setVisibility(View.VISIBLE);
        }
    });

    cancel.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            slider.setVisibility(View.GONE);
        }
    });
} 
```

当我尝试将另一个图像添加到滑块时出现问题。我在 XML 中的 @id/cancel_wrapper RelativeLayout 上方添加了这个（底部的完整 XML）。

```
<ImageView
        android:id="@+id/transparent_add"
        android:src="@drawable/ic_add_active_256"
        android:layout_height="30dp"
        android:layout_width="30dp"
        android:layout_alignParentTop="true"
        android:layout_alignParentRight="true" /> 
```

![坏的](../Images/1692fbf9b143025cd5be8833aeca68e8.png)

出于某种原因，这使滑块的宽度成为屏幕的整个宽度。

更奇怪的是，如果我添加`android:layout_marginRight="50dp"`到此 ImageView 以将其向左移动一点，它会开始使滑块从左侧变小。我希望这个“transparent_add”图像与旧的“add”图像对齐。

![差的有边距](../Images/3fa7aa0dfc635cb73561a3009f0c0f0e.png)

那么，我的两个问题是，当我添加“transparent_add”图像时，它会出于未知原因更改滑块的宽度，并且当我在图像上添加 marginRight 时，它会使滑块的宽度从左侧变小。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@color/white" >

<TextView
    android:id="@+id/btn_people"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:paddingLeft="10dp"
    android:text="@string/label_people"
    android:textColor="@color/blue"
    android:textSize="16dp" />

<TextView
    android:id="@+id/people_info"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@id/btn_people"
    android:paddingLeft="10dp"
    android:text="@string/label_people_info"
    android:textSize="11dp" />

<RelativeLayout
    android:id="@+id/add_wrapper"
    android:layout_width="65dp"
    android:layout_height="50dp"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:background="@color/blue" >

    <ImageView
        android:id="@+id/plus_sign"
        android:layout_width="25dp"
        android:layout_height="25dp"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:layout_marginRight="19dp"
        android:layout_marginTop="6dp"
        android:src="@drawable/ic_add_256" />

    <TextView
        android:id="@+id/add_people"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:paddingBottom="2dp"
        android:text="@string/label_add_people"
        android:textColor="@color/white"
        android:textSize="11dp" />
</RelativeLayout>

<ListView
    android:id="@+id/contacts_list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_alignParentLeft="true"
    android:layout_below="@id/people_info" />

<!-- switch between visible/gone -->
<RelativeLayout
    android:id="@+id/add_people_slider"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:layout_alignParentRight="true"
    android:background="@color/blue"
    android:visibility="gone" >

    <TextView
        android:id="@+id/label_add_new_contact"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="65dp"
        android:layout_alignParentTop="true"
        android:paddingLeft="10dp"
        android:paddingRight="15dp"
        android:text="@string/label_add_new_contact"
        android:textColor="@color/white"
        android:textSize="16dp" />

    <TextView
        android:id="@+id/label_add_from_phone"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/label_add_new_contact"
        android:paddingLeft="10dp"
        android:paddingRight="15dp"
        android:paddingTop="15dp"
        android:text="@string/label_add_from_phone"
        android:textColor="@color/white"
        android:textSize="16dp" />

    <TextView
        android:id="@+id/label_add_from_facebook"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/label_add_from_phone"
        android:paddingLeft="10dp"
        android:paddingRight="15dp"
        android:paddingTop="15dp"
        android:text="@string/label_add_from_facebook"
        android:textColor="@color/white"
        android:textSize="16dp" />

    <TextView
        android:id="@+id/label_add_from_linkedin"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/label_add_from_facebook"
        android:paddingLeft="10dp"
        android:paddingRight="15dp"
        android:paddingTop="15dp"
        android:text="@string/label_add_from_linkedin"
        android:textColor="@color/white"
        android:textSize="16dp" />

    <!-- insert image here -->

    <RelativeLayout
        android:id="@+id/cancel_wrapper"
        android:layout_width="wrap_content"
        android:layout_height="50dp"
        android:paddingLeft="15dp"
        android:paddingRight="15dp"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:paddingBottom="10dp" >

        <ImageView
            android:id="@+id/image_cancel"
            android:layout_width="25dp"
            android:layout_height="25dp"
            android:layout_alignParentTop="true"
            android:layout_centerHorizontal="true"
            android:layout_marginTop="4dp"
            android:src="@drawable/ic_close_256"/>

        <TextView
            android:id="@+id/label_cancel"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_centerHorizontal="true"
            android:text="@string/label_cancel"
            android:textColor="@color/white"
            android:textSize="8dp" />
    </RelativeLayout>
</RelativeLayout>
</RelativeLayout> 
```

编辑：这发生在 Eclipse 和我的 Android 设备上。

编辑：我尝试将图像放在“添加新联系人”文本上方，然后将文本放在其下方，但同样的事情发生了

# html - 有没有办法推迟 HTML5 清单检查？

> ID：11679252
> 
> 赞同：1
> 
> 时间：2012-07-26T22:59:55.370
> 
> 标签：html, google-chrome, application-cache

鉴于有一种方法可以直接使用 window.applicationCache.update() 调用更新，有没有什么方法可以省略加载页面时浏览器自动执行的更新？

我一直在 Google Chrome 中尝试离线模式，到目前为止，似乎 1）如果指定了清单文件，它将被加载，并且我无法在 JavaScript 中做任何事情来阻止它。2）如果清单文件发生了变化，整个缓存都将被更新，我无法阻止它。

以我的经验，window.applicationCache.abort() 无论何时调用它都不起作用。我尝试在 javascript 的第一行以及检查和下载事件中调用它，但它总是下载所有内容。这可能与时间有关，因为文件很小并且加载速度非常快。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T23:11:57.207

监听[`checking`事件](http://www.whatwg.org/specs/web-apps/current-work/multipage/offline.html#event-appcache-checking)并[取消](https://developer.mozilla.org/en/DOM/event.preventDefault)它。该`abort()`方法直到[应用程序缓存下载过程](http://www.whatwg.org/specs/web-apps/current-work/multipage/offline.html#downloading-or-updating-an-application-cache)的第 17 步才出现，我认为您无法使用它停止该过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-26T10:51:33.197

这是撰写本文时的一个 Chrome 错误：[https](https://code.google.com/p/chromium/issues/detail?id=175063) ://code.google.com/p/chromium/issues/detail?id=175063 （请投票）

刚刚在 iOS Safari 上试过这个：

```
window.applicationCache.addEventListener('checking', function(event) {
   window.applicationCache.abort();
}, false); 
```

有用。在 Safari 调试器控制台中：

> 应用程序缓存下载过程被中止。

Chrome 会忽略相同的代码。

# php - 如何确定某个数组列的最大长度？

> ID：11679254
> 
> 赞同：4
> 
> 时间：2012-07-26T23:00:12.250
> 
> 标签：php, arrays, string

数组如下所示：

```
array(
  array(5, true, 'Foo'),
  array(8, true, 'Bar'),
  array(8, true, 'FooBar'),
) 
```

我可以确定第三列的最长字符串长度，而不必遍历数组吗？

在我的示例中，最长的字符串是“FooBar” - 6 个字符。

如果内部数组只有字符串元素，我可以这样做`max(array_map('strlen', $arr))`，但它有 3 个项目......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T23:13:11.557

添加`array_map('array_pop', $arr)`到混合物中：

```
<?php

$arr = array(
  array(5, true, 'Foo'),
  array(8, true, 'Bar'),
  array(8, true, 'FooBarss')
);

print_r(max(array_map('strlen', array_map('array_pop', $arr))));

?> 
```

[http://codepad.org/tRzHoy7Z](http://codepad.org/tRzHoy7Z)

给出`8`（在我添加了两个`ss`来检查之后）。[`array_pop()`](http://php.net/manual/en/function.array-pop.php)取出最后一个数组元素并返回它，用于[`array_shift()`](http://www.php.net/manual/en/function.array-shift.php)获取第一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T23:16:24.543

首先，我很确定 max 函数会遍历整个数组。但是，如果您可以使用它，那么您可以定义自己的比较函数并传递它。

```
function cmp($a, $b) {
    if (strlen($a[2]) == strlen($b[2])))
        return 0;
    return (strlen($a[2]) < strlen($b[2])) ? -1 : 1;
}

max(array_map('cmp', $arr)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-14T23:57:24.307

简单地对数组数组进行排序然后选择第一个定位的行涉及额外/不必要的算法排序（特别是对于非最长行），并且如果最长的平局也可能会产生误导性结果。

我建议考虑多个最长字符串的可能性，并且只遍历输入数组一次。

代码：（[演示](https://3v4l.org/Jd9jN)）

```
$array = [
  [5, true, 'FooBar'],
  [8, true, 'Bar'],
  [18, true, 'IsTied'],
];

$result = [];
$longest = 0;
foreach ($array as $row) {
    $len = strlen($row[2]);
    if ($len >= $longest) {
        $longest = $len;
        $result[$len][] = $row;
    }
}
var_export($result[$longest] ?? []); 
```

输出：

```
array (
  0 => 
  array (
    0 => 5,
    1 => true,
    2 => 'FooBar',
  ),
  1 => 
  array (
    0 => 18,
    1 => true,
    2 => 'IsTied',
  ),
) 
```

也就是说，如果您只想查看最长的长度而不关心它来自哪里，那么您可以使用它：

```
var_export(max(array_map('strlen', array_column($array, 2)))); 
```

# jquery - 无法让 fadetoggle 工作

> ID：11679256
> 
> 赞同：0
> 
> 时间：2012-07-26T23:00:16.770
> 
> 标签：jquery, shadowbox

我正在尝试在 Shadowbox 中实现“显示/隐藏 EXIF 数据”按钮。这是生成包含 exif 数据的 div 并使用 fadetoggle() 显示和隐藏它的代码：

```
Shadowbox.init({
    onFinish: function (rawr) {
        $("#sb-body-inner").prepend("<div id='sb-exif'>This is some exif data.</div>");
        $("#sb-nav-exif").click(function () {
            $("#sb-exif").fadetoggle(250, "linear");
        });
    }
}); 
```

实际按钮的代码如下（来自 shadowbox.js）：

```
<a id="sb-nav-exif" title="EXIF Data"></a> 
```

谁能建议为什么这可能不起作用？我对 jQuery 很陌生...谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T23:02:29.520

这真的很简单。因为该方法的名称是`fadeToggle`驼峰式，而不是`fadetoggle`.

我猜如果您查看浏览器控制台，您会看到如下错误：

```
Uncaught TypeError: Object [object Object] has no method 'fadetoggle' 
```

**编辑（回应您的评论）**

`fadeToggle`在加载每张照片并且操作堆叠后，您将绑定 click 事件。尝试使用 shadowbox 插件的`onFinish`和`onClose`事件，在图片更改或关闭时解除点击事件的绑定，如下所示：

```
Shadowbox.init({
    onFinish: function (rawr) {
        $("#sb-body-inner").prepend("<div id='sb-exif'>This is some exif data.</div>");
        $("#sb-nav-exif").click(function () {
            $("#sb-exif").fadeToggle(250, "linear");
        });
    },
    onChange: function() {
        $("#sb-nav-exif").unbind('click');
    },
    onClose: function() {
        $("#sb-nav-exif").unbind('click');
    }
}); 
```

您需要两者，因为内容已加载，并且`onFinish`在您打开新图像和使用下一个/上一个控件导航时都会调用该事件。

不过，我建议尝试这种替代方法，以避免一次又一次地绑定和取消绑定单击事件。

```
Shadowbox.init({
    onFinish: function (rawr) {
        $("#sb-body-inner").prepend("<div id='sb-exif'>This is some exif data.</div>");
    }
});

// this way you only bind it once
$('#sb-container').on('click', "#sb-nav-exif", function() {
    $("#sb-exif").fadeToggle(250, "linear");
}); 
```

# c++ - 你可以在c中的同一个语句中对同一个变量有一个增 量器和一个减量器吗

> ID：11679258
> 
> 赞同：1
> 
> 时间：2012-07-26T23:00:28.107
> 
> 标签：c++, c, post-increment, pre-increment

是

```
--foo++; 
```

C 中的有效语句？（它会编译/运行）这有什么实际应用吗？

很抱歉在编辑中更改了问题，但我发现了一些东西。

根据我的 C++ 编译器（Visual Studio 2010）：

```
--++foo; 
```

是一个有效的命令，但

```
foo--++; 
```

不是。这有什么原因吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T23:02:00.043

不，它无效，因为递增/递减运算符的结果不是左值。

**编辑：** OP 通过添加另外两个示例来编辑他的问题。所以我们开始了，出于同样的原因：

```
--++foo;
--foo++;
foo--++; 
```

都是无效的表达式语句，因为递增/递减运算符的结果不是左值。编译器可以扩展语言并接受这些表达式，但严格遵守的程序不能包含任何这些表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T04:55:18.983

由于这是一个 C 表达式，它应该遵循一些级联评估步骤来找出结果。

你的表情是

--++foo;

好的，让我们评估这第一步：-

++富；

必须进行评估才能继续

这是一些预增量，所以 foo 变成 foo+1 。

然后分配发生

这就是评估为 foo=foo+1;

并且 foo 的值返回以分配给变量（如果不存在则忽略）。

所以现在我们的表达如下

--(++foo); 评估为

--(a constant value);//foo+1的结果

该语句再次评估为

a constant value=constant_valu+1;//右边部分可以但左边部分不是变量

因为赋值运算符的左侧不是变量并引发错误。

所以现在没有有效的操作数 -- /decrement 运算符所以需要左值错误

# java - 试图了解我是否需要 WakeLock

> ID：11679259
> 
> 赞同：3
> 
> 时间：2012-07-26T23:00:35.590
> 
> 标签：java, android

免责声明：我的应用程序已经在没有任何唤醒锁的情况下运行了 1 年以上，并且对于*大多数*设备来说一切都很好。

我正在跟踪 GPS，它的工作原理是这样的：

1.  AlarmReceiver 每 5/10/15 分钟启动一次服务（根据用户的意愿）
2.  服务订阅位置更新并等待 MAX 1 分钟以获得良好的 GPS。
3.  结束，将数据发送到服务器并关闭服务。

由于糟糕的连接和糟糕的位置 - 整个过程有时需要 2-3 分钟。它有效。无论手机是否处于睡眠状态。

现在我正在阅读有关 WakeLock 的内容，这对我来说没有意义。我的东西怎么能用？这是巧合吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T00:07:59.990

> 我的东西怎么能用？

各种事物的组合，包括一团运气。:-)

首先，正如 Joel 所指出的，设备会因您的闹钟而短暂唤醒，但操作系统只能保证在 a`WakeLock`的持续时间内保持`onReceive()`a `BroadcastReceiver`。

至少在某些版本的 Android 上，请求 GPS 更新可能会导致操作系统获取自己的`WakeLock`. 这是 AFAIK 的无证行为，我个人从未依赖过它。但是，如果确实如此，并且您在删除位置更新之前正在完成其余的工作（“总结，将数据发送到服务器并关闭服务”），那将解释该行为。

您的方法仍然存在潜在的差距（例如，如果您委派给 a`Service`来完成工作并且没有持有 a`WakeLock`作为将控制权传递给该服务的一部分）。从统计上讲，它可能偶尔会失败，但很多时候都可以工作。

就个人而言，我建议使用`WakeLock`, 以防未记录的行为发生变化。[这就是我在`LocationPoller`](https://github.com/commonsguy/cwac-locpoll).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T23:08:41.917

从[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)文档中阅读得很好..

> 只要警报接收器的 onReceive() 方法正在执行，警报管理器就会持有 CPU 唤醒锁。

更远...

> 注意：警报管理器适用于您希望应用程序代码在特定时间运行的情况，即使您的应用程序当前没有运行。对于正常的计时操作（滴答声、超时等），使用 Handler 更容易、更高效。

因此，基于此.. 我认为它目前有效是有道理的；如我错了请纠正我。

# php - 从php中的日期提取时间并存储在mysql中

> ID：11679264
> 
> 赞同：1
> 
> 时间：2012-07-26T23:01:12.923
> 
> 标签：php, mysql, datetime

我正在向 twitter API 发出请求，我想从 php 中的日期中提取时间并存储在 mysql 中。有人知道该怎么做吗？

我从结果中得到的时间和日期是 ...created_at": "Thu, 26 Jul 2012 22:16:59 +0000"

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T23:02:55.497

## 在数据库中存储时间戳

[`strtotime()`](http://php.net/manual/en/function.strtotime.php)在 PHP 端和[`FROM_UNIXTIME()`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_from-unixtime)MySQL 端使用。

所以基本上你的代码，简而言之，可能看起来像这样：

```
$twitter_timestamp = 'Thu, 26 Jul 2012 22:16:59 +0000';
$php_time = strtotime($twitter_timestamp);
$query = 'INSERT INTO `some_table` VALUES ("' . $php_time . '");'; 
```

以上假设您将时间戳存储在具有正确类型 ( `TIMESTAMP`) 的列中。要阅读有关 之间差异的更多信息，`TIMESTAMP`请参阅此文档页面：[MySQL 文档：DATE、DATETIME 和 TIMESTAMP 类型](http://dev.mysql.com/doc/refman/5.5/en/datetime.html)。`DATE``DATETIME`

## 将时间存储为字符串

如果您想以不支持时区的方式存储时间戳（除`TIMESTAMP`且不包括时区信息之外的任何内容），您将需要在 PHP 端形成表示您的时间戳的字符串：

```
$twitter_timestamp = 'Thu, 26 Jul 2012 22:16:59 +0000';
$php_time = strtotime($twitter_timestamp);
// Optionally set local timezone:
date_default_timezone_set('America/Los_Angeles');
$php_timestamp = strftime('%T', $php_time); // will give "%H:%M:%S" timestamp
$query = 'INSERT INTO `some_table` VALUES ("' . $php_timestamp . '");'; 
```

请注意，该[`date_default_timezone_set()`](http://www.php.net/manual/en/function.date-default-timezone-set.php)调用是可选的 - 如果您想要某个特定时区的时间，与当前不同。以上假设您想要“”形式的时间戳`HH:MM:SS`。

# mysql - phpMyAdmin 中的德语日期？

> ID：11679266
> 
> 赞同：0
> 
> 时间：2012-07-26T23:01:33.783
> 
> 标签：mysql, date, phpmyadmin, date-format, date-formatting

我得到这个代码的日期：

```
<?php $query = "SELECT `news_id`, `headline`, `category`, `body`, `date` FROM `news` ORDER BY `news_id` DESC"; $news_resource = mysql_query($query) or die(mysql_error()); ?> 
```

日期现在看起来像这样（2012-07-24），但我需要它作为 24.07.2012

我已经在寻找解决方案并尝试过这样的事情：

```
$mysql = "SELECT DATE_FORMAT(date, „%d.%m.%Y”) AS date FROM news;"; 
```

我不知道在哪里添加它以及我必须在旧代码中更改什么。希望你能帮忙。

**编辑 #1：**在 phpMyAdmin 中，该行称为“日期”，我使用“日期”作为类型...

**编辑#2：**我试过这个

```
<?php $query = "SELECT `news_id`, `headline`, `category`, `body` FROM `news` ORDER BY `news_id` DESC"; $query = "SELECT DATE_FORMAT(date,\"%d.%M.%Y\") AS `date` FROM `news`"; $news_resource = mysql_query($query) or die(mysql_error()); ?> 
```

日期是正确的，但现在我收到错误：

*   注意：未定义的属性：stdClass::$headline
*   注意：未定义的属性：stdClass::$category
*   注意：未定义的属性：stdClass::$body

**编辑#3：**是的，我自己搞定了！

```
<?php $query = "SELECT `news_id`, `headline`, `category`, `body`, DATE_FORMAT(date,\"%d.%m.%Y\") AS `date` FROM `news` ORDER BY `news_id` DESC"; $news_resource = mysql_query($query) or die(mysql_error()); ?> 
```

再见！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T10:00:55.887

这是我自己得到的解决方案。

**我之前得到的代码（国际日期）：**

```
<?php $query = "SELECT `news_id`, `headline`, `category`, `body`, `date` FROM `news` ORDER BY `news_id` DESC"; $news_resource = mysql_query($query) or die(mysql_error()); ?> 
```

**更改代码（德国日期）：**

```
<?php $query = "SELECT `news_id`, `headline`, `category`, `body`, DATE_FORMAT(date,\"%d.%m.%Y\") AS `date` FROM `news` ORDER BY `news_id` DESC"; $news_resource = mysql_query($query) or die(mysql_error()); ?> 
```

# ios - 当我们的 OpenGL ES 视图初始化时，我们想要一个加载屏幕，但是 UI 被阻塞，直到我们不再需要它？

> ID：11679268
> 
> 赞同：0
> 
> 时间：2012-07-26T23:01:35.120
> 
> 标签：ios, opengl-es

所以我们正在制作一个具有普通 UIView 标题屏幕的游戏，当用户按下“开始游戏”按钮时，我们尝试放置加载屏幕，移除标题视图，我们初始化游戏视图并将其添加到加载屏幕*下方*的超级视图（`window`在我们的例子中） 。

 *不幸的是，最终结果是 UI 在触摸“开始游戏”按钮后被阻塞了几秒钟，并且我们的加载屏幕在屏幕上闪烁了一毫秒，然后才开始加载游戏视图。我们甚至添加了日志，当 UI 被阻止时，日志消息会显示在控制台中。

这是有问题的方法：

```
-(void)switchToGame{
    NSLog(@"adding loading");
    loadingScreen = [[UIImageView alloc] initWithImage:
                 [UIImage imageNamed:@"loading_screen.jpg"]];
    [self.window addSubview:loadingScreen];

NSLog(@"removing titlescreen");
[titleView.view removeFromSuperview];
self.titleView = nil;

if(self.gameView == nil){

    gmViewController *g = [[gmViewController alloc] 
                                 initWithNibName:@"gmViewController"
                                          bundle:nil];
    self.gameView = g;
    [gameView setIsLoading:YES];
    self.gameView.parent = self;
    [g release];
}

NSLog(@"inserting gameview");
[self.window insertSubview:gameView.view belowSubview:loadingScreen];
[self.window setRootViewController:gameView];
[self setGameIsActive:YES];
[gameView startAnimation];

//remove the loading screen
NSLog(@"killing loading");
[loadingScreen removeFromSuperview];
[loadingScreen release];
[gameView setIsLoading:NO];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T01:22:18.420

忘记了这个问题。

我们通过将加载屏幕添加到它自己的功能来解决它​​：

```
- (void)addLoadingScreen
{
    loadingScreen = [[UIImageView alloc] initWithImage:
                 [UIImage imageNamed:@"loading_screen.jpg"]];
    [self.window addSubview:loadingScreen];
} 
```

然后在自己的线程上执行它：

```
[NSThread detachNewThreadSelector:@selector(addLoadingScreen)]; 
```*

# jquery - JQuery将第一个找到的空间更改为 x个字符之后

> ID：11679269
> 
> 赞同：0
> 
> 时间：2012-07-26T23:01:36.417
> 
> 标签：jquery

我有一个无序列表，用作无法直接添加格式的菜单。它在 CSS 中设置为水平菜单，并且要添加新项目。为了提供一个漂亮的视觉结构并最小化每个条目的宽度，以便它仍然适合我想让菜单项/标题读为两行，因为大多数标题有 2/3 个单词。例如

例如，我希望“Cat & Dogs Houses”的格式类似于

猫狗
屋

标题字数和长度是可变的，但仔细查看它们，我认为如果我能遵循“
在 10 个字符后找到的第一个空格中插入”这样的规则，它应该都到位。

该站点已经安装了 jQuery，因此最好使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T23:05:05.237

如果可能的话，最好使用分隔符（例如“Cats & Dogs; Houses”）。编辑任何为您提供标题字符串的内容以包含分隔符，因为您的解决方案不适用于某些标题。例如，如果您将顺序颠倒为“Houses Cats & Dogs”，那么 10 个字符后的第一个空格将解析为

```
Houses Cats
& Dogs 
```

但是，如果您不想听我的建议，您可以使用纯 javascript 执行此操作：

```
var string = "1234567890 Cats & Dogs Houses";
var inArray = string.split(" ");
var outArray = []

while (array.length != 0) {
   var tmp = array.shift();
   while (tmp.length < 9 && array.length != 0)
      tmp += " " + array.shift();
   newArray.push(tmp);
} 
```

# c - 为什么这个断言会失败？

> ID：11679272
> 
> 赞同：-3
> 
> 时间：2012-07-26T23:01:58.460
> 
> 标签：c

我想创建 lirc 命令来停止录制。我有3个文件：

### 文件：record.c

```
...
#include "rec_tech.h"
...
void stop_rec_button_clicked_cb(GtkButton *button, gpointer data)
{
    Recording *recording = data;
    close_status_window();
    recording_stop(recording);
}
... 
```

### 文件：rec_tech.c

```
...
void recording_stop(Recording *recording)
{
    g_assert(recording);

    GstState state;
    gst_element_get_state(recording->pipeline, &state, NULL, GST_CLOCK_TIME_NONE);
    if (state != GST_STATE_PLAYING) {
        GST_DEBUG ("pipeline in wrong state: %s", gst_element_state_get_name (state));
    } else {
        gst_element_set_state(recording->pipeline, GST_STATE_NULL);
    }
    gst_object_unref(GST_OBJECT(recording->pipeline));
    g_free(recording->filename);
    g_free(recording->station);
    g_free(recording);
}   
... 
```

### 文件 rec_tech.h

```
...
#ifndef _REC_TECH_H
#define _REC_TECH_H
#include <gst/gst.h>
....
typedef struct {
    GstElement* pipeline;
    char* filename;
    char* station;
} Recording;

Recording*
recording_start(const char* filename);

void
recording_stop(Recording* recording);
... 
```

### 文件：lirc.c

```
...
#include <lirc/lirc_client.h>
#include "lirc.h"
#include "rec_tech.h"
#include "record.h"

static void execute_lirc_command (char *cmd)
{
        printf("lirc command: %s\n", cmd);

        if (strcasecmp (cmd, "stop recording") == 0) {
            stop_rec_button_clicked_cb(NULL, data);
        }
... 
```

当我尝试编译文件 lirc.c 时出现错误

```
error: 'data' undeclared (first use in this function) 
```

更新

如果在 lirc.c 添加行 Recording *data;

```
...
#include <lirc/lirc_client.h>
#include "lirc.h"
#include "rec_tech.h"
#include "record.h"

Recording *data;    
static void execute_lirc_command (char *cmd)
{
        printf("lirc command: %s\n", cmd);

        if (strcasecmp (cmd, "stop recording") == 0) {
            stop_rec_button_clicked_cb(NULL, data);
        }
... 
```

得到这个运行时错误：

```
ERROR:rec_tech.c:recording_stop: assertion failed: (recording) 
```

为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T00:18:49.593

`g_assert()`in`recording_stop()`检查`recording`不是空指针，但修改后的调用传入`exec_lirc_command()`一个空指针。所以断言失败。

道德——不要将空指针传递给不期望它们的函数。

# php - mysqldump 通过 PHP

> ID：11679275
> 
> 赞同：11
> 
> 时间：2012-07-26T23:02:11.277
> 
> 标签：php, mysqldump

我有一个 PHP 脚本，它通过远程服务器的 MySQL 连接详细信息，我希望它执行`mysqldump`命令。为此，我正在使用 php`exec()`函数：

```
<?php
exec("/usr/bin/mysqldump -u mysql-user -h 123.145.167.189 -pmysql-pass database_name > /path-to-export/file.sql", $output);
?> 
```

当正确的登录详细信息传递给它时，它会工作得很好。但是，我无法检查它*是否*按预期执行以及是否找不到原因。数组返回为空，而`$output`如果我直接在命令行上运行命令，则会打印出一条消息，告诉我登录失败。我想捕获此类错误消息并显示它们。关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-26T23:13:10.533

您应该检查**exec**函数的第三个参数：`&$return_var`.

```
$return_var = NULL;
$output = NULL;
$command = "/usr/bin/mysqldump -u mysql-user -h 123.145.167.189 -pmysql-pass database_name > /path-to-export/file.sql";
exec($command, $output, $return_var); 
```

按照 Unix 中的约定，**当出现问题时，进程会返回 0 以外的任何值**。

所以你可以：

```
if($return_var) { /* there was an error code: $return_var, see the $output */ } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-10-13T10:12:54.260

我找到的解决方案是在子shell中运行命令，然后输出`stderr`到`stdout`（`2>&1`）。这样，`$output`变量将填充错误消息（如果有）。

IE ：

```
exec("(mysqldump -uroot -p123456 my_database table_name > /path/to/dump.sql) 2>&1", $output, $exit_status);

var_dump($exit_status); // (int) The exit status of the command (0 for success, > 0 for errors)
echo "<br />";
var_dump($output); // (array) If exit status != 0 this will handle the error message. 
```

结果 ：

> 整数（6）
> 
> 数组（1）{[0]=>字符串（46）“mysqldump：找不到表：”table_name“”}

希望能帮助到你 ！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-26T23:12:12.503

因为这一行重定向标准输出输出`> /path-to-export/file.sql` 试试这个，

```
<?php 
exec("/usr/bin/mysqldump -u mysql-user -h 123.145.167.189 -pmysql-pass database_name", $output);
/* $output will have sql backup, then save file with these codes */
$h=fopen("/path-to-export/file.sql", "w+");
fputs($h, $output);
fclose($h);
?> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-01-31T14:26:11.940

我一直在寻找完全相同的解决方案，我记得几年前我已经解决了这个问题，但忘记了。

由于这个页面在谷歌中的问题很高，所以我是这样做的：

```
<?php
define("BACKUP_PATH", "/full/path/to/backup/folder/with/trailing/slash/");

$server_name   = "your.server.here";
$username      = "your_username";
$password      = "your_password";
$database_name = "your_database_name";
$date_string   = date("Ymd");

$cmd = "mysqldump --hex-blob --routines --skip-lock-tables --log-error=mysqldump_error.log -h {$server_name} -u {$username} -p{$password} {$database_name} > " . BACKUP_PATH . "{$date_string}_{$database_name}.sql";

$arr_out = array();
unset($return);

exec($cmd, $arr_out, $return);

if($return !== 0) {
    echo "mysqldump for {$server_name} : {$database_name} failed with a return code of {$return}\n\n";
    echo "Error message was:\n";
    $file = escapeshellarg("mysqldump_error.log");
    $message = `tail -n 1 $file`;
    echo "- $message\n\n";
}
?> 
```

这是我总是忘记的 mysqldump的*--log-error=[/path/to/error/log/file]部分！*

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-02-04T12:56:53.970

正如`exec()`获取`stdout`重定向到文件的内容一样，我们在文件中有部分或丢失的结果，我们不知道为什么。我们必须从那里得到消息`stderr`，`exec()`但不能这样做。有几种解决方案，都已经找到了，所以这只是一个总结。

1.  [Jon](https://stackoverflow.com/a/21482379/904846)的解决方案：记录错误`mysqldump`并分别处理它们（不能适用于每个命令）。
2.  将输出重定向到单独的文件，即`mysqldump ... 2> error.log 1> dump.sql`像以前的解决方案一样单独读取错误日志。
3.  [JazZ](https://stackoverflow.com/a/40018165/904846)的解决方案：将转储写入子shell 并将子shell 的stderr 重定向到stdout，它可以php`exec()`放入`$output`变量中。
4.  [Pascal 的解决方案](https://stackoverflow.com/a/2320835/904846)：最好使用`proc_open()`而不是`exec()`因为我们可以单独获取`stdout`和`stderr`（直接从管道）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-28T19:48:17.467

编写以下代码以获取 .sql 文件中的数据库导出。

```
<?php exec('mysqldump --user=name_user --password=password_enter --host=localhost database_name > filenameofsql.sql'); ?> 
```

# javascript - Youtube iFrame API 事件未在 Firefox 14 上触发

> ID：11679278
> 
> 赞同：0
> 
> 时间：2012-07-26T23:02:23.657
> 
> 标签：javascript, youtube-api

我目前正在使用 iframe API 嵌入 youtube 视频，令我烦恼的是事件不仅在 Firefox 上触发（我刚刚尝试了 firefox 14），它们在所有其他浏览器上都有效（显然不使用来自像IE7一样地狱）。

他们文档中的示例也不起作用，如果您在[此页面的](https://developers.google.com/youtube/iframe_api_reference#Getting_Started)**入门**部分获取他们的代码，[这里](http://jsfiddle.net/aldoreyes/22txy/)是 jsfiddle 版本供您快速查看。

播放器显示在页面上，但正如我提到的事件不起作用，我也不能使用 api 中的任何函数，它们都会抛出未定义的错误。

我很感激任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T18:34:36.053

好的，我发现了问题，

这是因为 Firefox 扩展 HTTPS-Everywhere 将请求切换为使用 https，并且由于我的页面是使用 http 请求的，这导致与 youtube iframe 请求发生冲突。

我相信我应该在我的网站上发布关于使用该插件的警告。谢谢大家的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T23:08:04.800

我曾经在将事件传递到 iframe 时遇到问题，而且它也只在 Firefox 中出现。

答案是将 iframe 的`id`and指定`name`为相同的值。试试看——它也可能对你有用。

# c# - 从头开始构建多层 Web 应用程序时，我应该使用 WCF 进行数据访问吗？

> ID：11679279
> 
> 赞同：2
> 
> 时间：2012-07-26T23:02:25.383
> 
> 标签：c#, asp.net-mvc, wcf, design-patterns, ef-code-first

我即将自下而上构建一个相当复杂的 Web 应用程序，并且我想以正确的方式使用适当的设计模式（我过去并不总是使用）和最新的 .Net 技术。

我的目标是从 Web 应用程序开始，但让未来的移动应用程序、第三方应用程序开发和插件成为可能。

这使我遇到了主要难题：对于网站（我将使用 MVC 模式构建），我应该使用 WCF 将我的数据模型公开为 API，还是应该简单地通过 dll 引用我的数据（或Web 应用程序解决方案中的一个单独项目）？

让我支持它并给你一些我的其他设计想法，这样你就知道我想要做什么，如果其中任何一个看起来是错误的方法，请提供输入和建议：

1.  我想使用 EF 和代码优先方法构建我的数据模型，使用工作单元和存储库等设计模式。
2.  我想通过使用 WCF 的 API 公开我的数据模型 (1)。
3.  我想使用 TDD 和 MVC 构建一个 Web 应用程序，从我的数据模型 (1) 中获取我的数据。

因此，鉴于上述情况，当我可以轻松访问数据模型时，让 Web 应用程序使用 WCF API 似乎是一个额外的麻烦，只需在我的 Web 应用程序中引用它即可。此外，后者似乎更容易，因为我可以立即访问我的数据模型中的所有对象。我看不出使用 Web 服务怎么可能？我想使用 WCF API 的原因是我听到了很多赞誉，因为我只通过 API 公开数据，没有例外，以便真正能够为多个平台进行开发。还有哪些其他原因？我可以为 WCF 使用除 Http 消息之外的任何内容吗？我可以公开对象吗？如果可以，如何公开？

我觉得我正在寻找的很多答案都可以在网上找到，但我花了很多时间查看拼图的各个部分，但仍然很难将它们全部连接在一起。我希望你们能提供帮助，这也是一个可以造福他人的问题。

正如我所说，我想以正确的方式做到这一点，因此非常感谢您的意见（在设计阶段的任何阶段）。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T01:28:29.367

我会说使用新的 WebAPI 框架构建数据 API。这样，任何可以通过 HTTP 使用 RESTful 接口的东西都可以连接到它：[http ://www.asp.net/web-api](http://www.asp.net/web-api)

此外，您可以设置您的项目，以便从单独的项目中引用您的数据模型，这样您就不必在主 Web 应用程序中通过网络。WebAPI 项目可以是独立的，但是使用通用模型来确保事情是一致的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T23:40:22.730

看看 WCF 数据服务 (DataService) 和 WCF RIA 服务 (DomainService)....它们可以将您的实体模型公开为服务。

[http://jack.ukleja.com/wcf-data-services-vs-wcf-ria-services/](http://jack.ukleja.com/wcf-data-services-vs-wcf-ria-services/)

本指南可以帮助您决定如何构建您的层/层。

[http://apparchguide.codeplex.com/](http://apparchguide.codeplex.com/)

# ruby-on-rails - 创建下拉菜单并将选择插入数据库

> ID：11679283
> 
> 赞同：0
> 
> 时间：2012-07-26T23:02:52.737
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我有两个表：事件和用户。

事件有一个名为“event_type”的列。

用户有名为“event_type_1”、“event_type_2”、“event_type_3”等的列。

我想创建一个下拉菜单，它将由所有 event_types 填充（通过 users 表的列标题，或者通过 events 表的 event_type 列中已经列出的内容 - 但我不希望它们被重复）。

然后我希望将选择（如果选择 => true）插入到 event_type 列下的用户表中。

我尝试过的所有事情都会出错。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-12T04:23:05.780

`<div class="field"> <%= f.label :ldescriptioncountry, class: 'field-label' %> <div class="field"> <%= collection_select( :legaldescription, :legalcountry_id, Legalcountry.all, :id, :countryname, {}, { :multiple => false } ) %> </div> </div>`

这将创建一个下拉菜单，将根据您的要求填充

# ios - 在 segue 之前更改 UIImageView 上的图像

> ID：11679286
> 
> 赞同：0
> 
> 时间：2012-07-26T23:03:23.077
> 
> 标签：ios, uiimageview, segue

我正在制作一款向用户提出一系列问题的游戏，每次用户做对时，UIImageView 都会更改其图像。我的代码有效，除非当游戏到达最后一个问题时，我要求在另一个视图控制器上进行转场......我仍然希望图像在转场之前改变，但它不会......

# php - PHP SOAP 过程'functionName'不存在

> ID：11679288
> 
> 赞同：9
> 
> 时间：2012-07-26T23:03:41.037
> 
> 标签：php, soap, symfony

我正在 Symfony 中编写一个 SOAP 应用程序，对于我的所有请求，我都收到了一个错误`Procedure 'getClusterName' not present`。

奇怪的是，当我在纯 PHP 中创建一个测试 SOAP 应用程序时，它工作正常，但 Symfony 中的相同代码返回错误。

另一个奇怪的事情是，当我在 SOAP 服务器代码中列出可用的服务函数时`$server->getFunctions()`，它返回服务函数的数组并且`getClusterName`在该数组中。所以该函数是服务器知道的，但它不能调用它。

在 Symfony 中编写服务时，我遵循[了这篇文章](http://symfony.com/doc/current/cookbook/web_services/php_soap_extension.html)，这是我的代码：

**客户**：

```
namespace Prj\SoapBundle\Controller;

class SoapController extends Controller
{
    public function indexAction()
    {
        $client = new \SoapClient('http://localhost/test.wsdl');
        $client->getClusterName(); 
```

**服务器**：

```
namespace Prj\SoapBundle\Controller;

class SoapController extends Controller
{
    public function indexAction()
    {
    ini_set("soap.wsdl_cache_enabled", "0");
    $server = new \SoapServer($this->container->getParameter('wsdl'));
    $server->setClass('SoapBundle\HelloService');
    $server->handle(); 
```

**服务**：

```
namespace Prj\SoapBundle;

class HelloService
{
    public function getClusterName() 
    {
        return '<?xml version="1.0" encoding="utf-8"?><root>Hello!</root>';
    }
} 
```

*.wsdl 文件似乎是正确的，因为它将调用与控制器绑定在一起，并且可以与 vanilla PHP 服务一起正常工作。

`soap.wsdl_cache_enabled`在 Internet 上，此错误通常由缓存的 wsdl 解释，但在服务器代码中通过将参数设置为零来处理此错误。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-26T16:15:13.777

即使设置`soap.wsdl_cache_enabled = 0`，也尝试清空`/tmp`文件夹。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-05T21:07:47.630

清除 wsdl- 前缀文件的 tmp 文件夹对我有用。我还按照我的开发环境中的建议将 PHP 的 wsdl_cache_enabled 选项更改为 0。

# c++ - 二叉树 C++ 基础

> ID：11679290
> 
> 赞同：0
> 
> 时间：2012-07-26T23:03:47.657
> 
> 标签：c++

```
void BinarySearchTree::insert(int d)
{
    tree_node* t = new tree_node;
    tree_node* parent;
    t->data = d;
    t->left = NULL;
    t->right = NULL;
    parent = NULL;

    // is this a new tree?
    if(isEmpty()) root = t;
    else
    {
        //Note: ALL insertions are as leaf nodes
        tree_node* curr;
        curr = root;
        // Find the Node's parent
        while(curr)
        {
            parent = curr;
            if(t->data > curr->data) curr = curr->right;
            else curr = curr->left;
        }

        if(t->data < parent->data)
           parent->left = t;
        else
           parent->right = t;
    }
} 
```

问题：

1.  为什么我需要为**tree_node* t分配内存；**使用 new 但不用于**tree_node* 父级；**?

2.  究竟什么是 tree_node* 它在内存中是什么样子的，它有什么作用？

3.  有人可以向我解释 -> 运算符及其工作原理吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T23:11:01.870

> 为什么我需要为tree_node* t分配内存；使用新的但不用于 tree_node* 父级；？

你**不需要**，但这是逻辑的一部分。`t`表示您要插入的新节点，因此您需要先创建它（由 完成`new`）。您不分配内存，`parent`因为它将引用一个已经存在的节点：

```
 while(curr)
 {
    parent = curr;
    //... 
```

> 究竟什么是 tree_node* 它在内存中是什么样子的，它有什么作用？

没办法说（它应该在某个地方定义），但它可能是这样的结构：

```
struct tree_node
{
    tree_node* left;
    tree_node* right;
    int data;
} 
```

> 有人可以向我解释 -> 运算符及其工作原理吗？

它用于通过指针访问对象成员。如果有`Class* x`，那么`x->a`就相当于`(*x).a`。

# java - 从 zip 内的文件中读取字节数组

> ID：11679292
> 
> 赞同：0
> 
> 时间：2012-07-26T23:03:56.870
> 
> 标签：java, bytearray

在过去的几天里，我一直在创建一个程序，该程序将从我的专用服务器托管游戏服务器。用户输入哪个 WAD/PK3（存储地图信息、音乐等的文件）和其他一些内容，并能够托管服务器。

我有一个朋友创建了一个方法，该方法将遍历 WAD 文件并收集信息，然后调用 getLevelNames() 并返回数组中的关卡名称，然后我将其添加到服务器主机命令行并添加适当的地图。

这是我认为重要的代码部分：

```
public static byte[] getByteArrayFromFile(String filePath) throws IOException {
    return Files.readAllBytes(new File(filePath).toPath());
}

/**
 * Given a path to the file, this will extract the information into a byte array,
 * and then it will read it, index the file locations and pass the appropriate byte
 * data to other objects which will index the data in a useful way that the engine
 * can read/use.
 * Ideally after the data has been passed and indexed, the Wad object should be nullified and
 * set for garbage collection.
 * @param path The full path on the disk to the wad to be read from
 * @throws IOException If the path to the file has an error
 */
public Wad(String path) throws IOException {
    // Load wad data
    wadData = ByteData.getByteArrayFromFile(path);

    // Setup pointers
    headerType = ByteData.bytesToString(Arrays.copyOfRange(wadData, 0, 4));
    headerTotalLumps = ByteData.bytesToInt(wadData[4], wadData[5], wadData[6], wadData[7]);
    headerPointerToDirectory = ByteData.bytesToInt(wadData[8], wadData[9], wadData[10], wadData[11]);
    System.out.println("Wad data: " + headerType + ", " + headerTotalLumps + " total lumps, " + headerPointerToDirectory + " directory offset");

    // Setup offset data
    parseDirectory();
    getLevelNames();
}

public void getLevelNames() {
    String[] temp = new String[lumpName.length]; // Maybe I can divide this by 2, or 5 or something to save space since they all shouldn't be a map...
    Arrays.fill(temp, "");
    int tempIndex = 0;
    List<String> listMapNames = Arrays.asList(lumpMapNames);
    for (int i = 0; i < lumpName.length; i++)
        // Make sure: 1) were not at an end piece, 2) its actually a marker, 3) the next lump contains a map file (like SEGS), 4) The marker itself isn't something like an empty reject table, 5) doesn't contain GL_xyzab
        if (i != lumpName.length - 1 && fileSize[i] == 0 && listMapNames.contains(lumpName[i+1]) && !listMapNames.contains(lumpName[i]) && !lumpName[i].startsWith("GL_")) {
            temp[tempIndex] = lumpName[i];
            tempIndex++;
        }
    // If there's no levels
    if (tempIndex == 0) {
        levelNames = new String[0];
        return;
    }
    levelNames = new String[tempIndex]; // We should be at levels + 1, or at least a proper length
    for (int j = 0; j < tempIndex; j++)
        levelNames[j] = temp[j];
    // Sort the array just to make the server execution cleaner
    Arrays.sort(levelNames);
}

private void parseDirectory() {
    fileOffset = new int[headerTotalLumps];
    fileSize = new int[headerTotalLumps];
    lumpName = new String[headerTotalLumps];
    int c = 0; // Counter for starting at index 0 and going upwards
    System.out.println("Pointer: " + headerPointerToDirectory + ", total length: " + wadData.length + ", difference = " + (wadData.length - headerPointerToDirectory));
    for (int off = headerPointerToDirectory; off < wadData.length; off += 16) {
        fileOffset[c] = ByteData.bytesToInt(wadData[off], wadData[off+1], wadData[off+2], wadData[off+3]);
        fileSize[c] = ByteData.bytesToInt(wadData[off+4], wadData[off+5], wadData[off+6], wadData[off+7]);
        lumpName[c] = new String(Arrays.copyOfRange(wadData, off+8, off+16)).trim();
        c++;
    }
} 
```

然而，我遇到了两难境地。由于 PK3 文件完全不同，因为它们基本上是 .zip 文件，为 maps/ 目录中的每个地图存储单独的 .WAD，我不知道如何访问它们。

以下是文件结构的示例：

1.  等级.pk3：
    *   音乐
    *   地图
        *   d2dm01.wad
            *   地图01
        *   d2dm02.wad
            *   地图02
        *   d2dm03.wad
            *   地图03
    *   额外的

我不知道如何在不逐一提取它们并检查 for 循环中的级别的情况下访问 pk3 内的 wads 内的文件。诚然，我也不知道自己在做什么，所以我想知道的是如何读取 pk3 中的文件并获取地图（map01、map02、map03）。

此外，如果有人知道读取和解析文件中的字节以获取信息的好资源，那将非常有帮助。我现在觉得很无语。

# php - 从 IMDb 获取一个人的身高

> ID：11679295
> 
> 赞同：2
> 
> 时间：2012-07-26T23:04:35.217
> 
> 标签：php, regex, imdb

我正在尝试从 IMDb 获取一个人的身高，但它的行包含一个`#`表示 PHP 中的注释的行（例如`# The comment as follows`）。以下是 IMDb 源代码中的样子：

```
<h4 class="inline">Height:</h4>
5' 7&#34; (1.70 m) 
```

这是我尝试的正则表达式：

`<h4 class="inline">Height:</h4>\n([0-9' &#;(.)m]+)`

我应该怎么做才能防止它在字符之后评论正则表达式的其余部分`#`？

提前致谢！

**编辑**

这是添加`\`到正则表达式的结果： ![在此处输入图像描述](../Images/d405f7b636923bf8b37c2b97d2092b69.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T23:25:21.797

我已经解决了我的问题，这是答案：

`/<h4 class="inline">Height:<\/h4>\n([0-9\' ]+)&#34; ([0-9\. m()]+)/`

# javascript - 应用样式更改后丢失“FormattedID”链接

> ID：11679297
> 
> 赞同：0
> 
> 时间：2012-07-26T23:04:50.373
> 
> 标签：javascript, rally

我用 columnCfgs 的以下设置设置了一个 rallygrid 对象：

```
columnCfgs: [
    'FormattedID',
    'Name',
    'PlanEstimate'
] 
```

这给了我一个很好的格式化链接到“FormattedID”字段中的 UserStory。问题是，我不喜欢列在页面上的布局方式，所以我将 FormattedID 列更改为：

```
{ text: 'ID', dataIndex: 'FormattedID', width: 60 } 
```

这给了我正确的列间距，但字段文本不再直接链接到它引用的用户故事。如何更改列宽，同时保持良好的格式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T14:41:46.033

您可以使用 FormattedIDTemplate 类来正确格式化链接：

```
{
    text: 'ID',
    width: 60,
    xtype: 'templatecolumn',
    tpl: Ext.create('Rally.ui.renderer.template.FormattedIDTemplate')
} 
```

请注意，FormattedIDTemplate 类被标记为私有，它的接口可能会在 sdk 的未来版本中发生变化。

# ruby-on-rails - 设置持续部署环境以实现高效扩展

> ID：11679299
> 
> 赞同：0
> 
> 时间：2012-07-26T23:04:52.040
> 
> 标签：ruby-on-rails, ruby-on-rails-3, continuous-integration, continuous-deployment

我几乎准备好启动我的 rails 应用程序，我一直在使用单个 linode 盒进行测试。我的 git repo 目前也托管在同一个盒子上，其中还包括应用程序和数据库。我想将它们拆分为 3 个实体——一个数据库服务器和一个应用程序服务器（可以选择轻松添加更多），以及一个托管在 bitbucket 上的存储库。

理想情况下，我希望能够将我的代码提交到 bitbucket，然后设置一个提交后挂钩推送 POSTS 到应用服务器，以从存储库中提取新更改并自动开始为它们提供服务。我花了很多时间阅读有关 Puppet、Chef、Passenger 等的信息，但我已经不知所措了。我的设置按原样运行良好，但我知道时机成熟时它不会很好地扩展，所以我需要进行切换。我想要帮助的是确定除了我已经设置的工具之外我应该使用哪些工具，以使过程尽可能顺利。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T10:14:29.843

我要做的第一件事是将 git 存储库移动到 GitHub（或 BitBucket，尽管我觉得它逊色）。

除非您的应用程序会大受欢迎，否则用于生产的 Linode 将为您提供很好的服务。请记住，您可以升级到更大的实例而不会破坏设置中的任何内容。

我不建议您在拥有任何用户之前花时间将应用程序拆分为多个服务器，特别是如果您仍然不精通您提到的基本工具。

您还可以将您的应用程序移至[Heroku](http://www.heroku.com)。将一个实例用作登台服务器，将另一个实例用作生产服务器。它将无限扩展，您无需担心自动配置和安全性。您的应用程序将启动并运行得非常快，这是最重要的。

如果您也在 Linode 上使用非自动化手动程序设置生产服务器，那也不会那么糟糕。在这个过程中你会学到很多东西。这取决于你，虽然我建议默认从 Heroku 开始。如果随着时间的推移，您在 Heroku 上发现某些限制了您的应用程序的东西，那么可能正是您的应用程序成熟并且（希望）有利可图的时候，所以现在是卷起袖子并管理自己的硬件的好时机.

我也不建议在每次推送到存储库时进行部署。您绝对需要至少确保所有测试都通过（您正在编写测试对吗？）。每当您推送到存储库时，持续集成服务器可以为您自动运行它们。为此，我可以推荐[Semaphore 。](https://semaphoreapp.com)

请注意，如果您在 Heroku 上，部署只是从您的终端执行一次 git push。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T00:23:08.983

The chef route would be the best but the learning curve for that is steep. Would you consider using EC2? If so, there's this gem which helps you provision (which is similar to Chef, Puppet) and deploy to EC2\. You can setup different roles and it also uses Capistrano. [https://github.com/wr0ngway/rubber](https://github.com/wr0ngway/rubber)

For me personally, I have vagrant boxes for my development and staging environments. Chef helps me provision/install software on them with one command, including my production servers. From my development environment, I can deploy my code to my staging and production environments using Capistrano from a git repo on bitbucket.

# ios - 使用带有 xib 的教程并更改为情节提要

> ID：11679300
> 
> 赞同：1
> 
> 时间：2012-07-26T23:05:02.350
> 
> 标签：ios, storyboard, xib

我正在做以下教程（这只是一个例子）： [http ://www.raywenderlich.com/1040/ipad-for-iphone-developers-101-uisplitview-tutorial](http://www.raywenderlich.com/1040/ipad-for-iphone-developers-101-uisplitview-tutorial)

我从创建一个名为 MathMonsters 的新项目开始。Xcode 然后为 iPad 和 iPhone 创建文件（不能只为 iPad 创建文件）。然后我继续为 LeftViewController 和 RightViewController 创建文件。然后，我通过选择视图并更改它们对应于上面创建的新类的类来更改 MainStoryboard_iPad.storyboard 中的相关属性。

然后我补充说：

```
@property (nonatomic, retain) IBOutlet UIWindow *window;
@property (nonatomic, retain) IBOutlet UISplitViewController *splitViewController;
@property (nonatomic, retain) IBOutlet LeftViewController *leftViewController;
@property (nonatomic, retain) IBOutlet RightViewController *rightViewController; 
```

在应用程序委托文件中。现在它要求我控制拖动并连接插座。尽管我很努力，但我在故事板中找不到可以将它们连接到的任何地方。我尝试查看不同的文件，例如 LeftViewController.h、RightViewController.h 和 MathMonstersAppDelegate.h。在最后一个文件中，我看到每个插座的左侧都有空圆圈​​，但我无法连接它们。

我是在 Xcode 4.2 发布之后才开始开发应用程序的，而且我对 xib 教程并不熟悉，而且我通常很难查看较旧的教程并使其适应新的编码方式。因此，非常感谢您的帮助！如果发布代码的其他部分有帮助，请告诉我，我会这样做。

感谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T09:44:45.623

首先，您必须在项目中添加一个 Storrboard，然后将标识符分配给 Stordyboard ID。

这是一个可以通过 .xib 调用情节提要的示例。

```
 UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
    YourViewController * yourView = (YourViewController *)[storyboard instantiateViewControllerWithIdentifier:@"identifier ID"]; 
```

希望能帮助到你。

# ruby-on-rails - 没有资产管道的 Rails、Heroku 和资产

> ID：11679302
> 
> 赞同：1
> 
> 时间：2012-07-26T23:05:20.787
> 
> 标签：ruby-on-rails, heroku, asset-pipeline

实际上，我不确定这是 rails 还是 heroku，但我需要知道如何在没有资产管道的情况下提供静态资产。我确实想对我的大部分 javascript 使用资产管道，但我有一些文件我想排除并按照我自己的选择提供服务。我是 Rails 和 Heroku 的新手，所以我有点迷茫。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T01:27:02.363

我在 assets/javascript/exclusive 或类似的地方创建了一个文件夹，并确保它不包含在 application.js 中。然后转到 config/application.rb

```
config.assets.precompile += ['exclusive/*'] 
```

现在您的 javascript 仍然可以利用资产管道，而不必位于主 javascript 文件中。

然后在你想要你的javascript的视图中：

```
<%- content_for :javascript do -%>
  <%= javascript_include_tag 'exclusive/something' %>
<%- end -%> 
```

确保 `<%= yield :javascript %>`在布局文件 (application.html.erb) 之后添加某个位置，`<%= javascript_include_tag "application" %>`以便首先加载专有 javascript 所依赖的任何依赖项，例如 jQuery。

# json - 如何使用 JSON API 插件 1.0.7 解析日期格式？

> ID：11679303
> 
> 赞同：1
> 
> 时间：2012-07-26T23:05:20.840
> 
> 标签：json, wordpress

我正在使用 JSON API 插件在我的移动网站上显示我的博客文章。我已经按照自己的意愿进行了一切工作，但是日期以这种格式显示：

```
 2012-03-21 20:03:30 
```

但是，我希望它像这样显示。或类似的东西。：

```
 March 21, 2012 
```

这是我用来显示博客文章的 Javascript：

```
 var MYBLOG_LIMIT = 7;
    var MYWRAPPER_CLASS = 'homeblog';

    var WP={open:function(b){var a={posts:function(){var d=MYBLOG_LIMIT;var e=0;var c={all:function(g){var f=b+"/api/get_recent_posts/";f+="?count="+d+"&page="+e+"&callback=?";jQuery.getJSON(f,function(l){var k=l.posts;for(var j=0;j<k.length;j++){var h=k[j];h.createComment=function(i,m){i.postId=h.id;a.comments().create(i,m)}}g(k)})},findBySlug:function(f,h){var g=b+"/api/get_post/";g+="?slug="+f+"&callback=?";jQuery.getJSON(g,function(i){h(i.post)})},limit:function(f){d=f;return c},page:function(f){e=f;return c}};return c},pages:function(){var c={findBySlug:function(d,f){var e=b+"/api/get_page/";e+="?slug="+d+"&callback=?";jQuery.getJSON(e,function(g){f(g.page)})}};return c},categories:function(){var c={all:function(e){var d=b+"/api/get_category_index/";d+="?callback=?";jQuery.getJSON(d,function(f){e(f.categories)})}};return c},tags:function(){var c={all:function(e){var d=b+"/api/get_tag_index/";d+="?callback=?";jQuery.getJSON(d,function(f){e(f.tags)})}};return c},comments:function(){var c={create:function(f,e){var d=b+"/api/submit_comment/";d+="?post_id="+f.postId+"&name="+f.name+"&email="+f.email+"&content="+f.content+"&callback=?";jQuery.getJSON(d,function(g){e(g)})}};return c}};return a}};

var blog = WP.open('http://www.endofphotography.com/');

    blog.posts().all(function(posts){
        for(var i = 0; i < posts.length; i++){
            jQuery('.'+MYWRAPPER_CLASS).append(function(){
        return (posts[i].content) ? '<div class="lastpost_title" href="'+posts[i].url+'"><h4>'+posts[i].title+'</h4></div><div href="'+posts[i].url+'">'+posts[i].content+'<br>'+posts[i].date+'</div><br><hr><br>' : '<div href="'+posts[i].url+'"><h4>'+posts[i].date+'</h4></div>';
     });
   }
 }); 
```

我已经在网上搜索了答案和 Stack Overflow，但我相信解决方案将以某种方式“破解”插件。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T19:25:41.563

我有一个类似的问题。[我使用jQuery-DateFormat](http://github.com/phstc/jquery-dateFormat)在桌面上取得了成功 在 移动设备上工作时遇到了问题，但那是用 AJAX 调用的

```
$.getJSON('http://feed_url/?json=get_post&post_id=' + id + '&callback=?', function(data) {
   var output='';
   var date = data.post.date;
   var date = $.format.date(date, "MM/dd/yyyy");
   output += '<em>' + data.post.date + '</em>';
}); 
```

你的看起来像： var date = $.format.date(date, "ddd d, yyyy");

# c# - 获取类别和此类别中的项目列表

> ID：11679305
> 
> 赞同：2
> 
> 时间：2012-07-26T23:05:58.960
> 
> 标签：c#, linq, sql-server-2008, c#-4.0, linq-to-sql

我试图在 Linq 的同一查询中获取类别及其项目的列表。诸如类别项目列表和相关产品列表之类的东西。

例如项目列表，如：

```
Class MyClass {
Category food;
List<Product> products; //here I want to get list of products in this category
} 
```

我有一个连接它们的表，其中包含产品 ID 和类别 ID。

我应该使用哪个查询来获取此结果？

* * *

编辑：表格示例：

表：产品

*   产品编号
*   产品名称
*   产品描述
*   产品内容

表：产品分类

*   产品编号
*   类别 ID

表：类别

*   类别 ID
*   类别标题
*   类别描述

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T14:10:12.797

产品和类别之间存在多对多的关系。在没有显式编码连接的情况下查询此类关系的一种非常方便的方法是：

```
from c in Categories
select new MyClass { 
    Category = c, 
    Products = c.ProductCategories.Select (pc => pc.Product).ToList()
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T23:08:35.060

尝试这样的事情：（未经测试）

```
var q = from pc in ProductsCategories
        from cat in Categories
        where pc.productId == cat.categoryId
        from prod in Products
        where prod.productId == pc.productId
        select new { category = cat, product = prod };
var q2 = from product in q
         group product by product.categoryId into g
         select new { categoryId = g.Key, products = g }; 
```

# ruby-on-rails - 如何使用参数检索存储在 rails 3.1.4 中 hidden_ field_tag 中的值？

> ID：11679307
> 
> 赞同：0
> 
> 时间：2012-07-26T23:06:13.047
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我们在 new.html.erb 中为发票控制器定义一个 hidden_​​field_tag，如下所示：

```
<%= hidden_field_tag :html_content_for_lease_record, '' %> 
```

使用 javascript分配新值后`:html_content_for_lease_record`（我们可以在 html 源页面中看到隐藏字段的新值），我们如何从发票控制器中检索新值？我们试过`params[:html_content_for_lease_record]`了，它返回 nil。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T23:10:32.273

这是如何做到这一点`hidden_field`

```
<--! note: TWO parameters below -->
<%= hidden_field :html_content_for, :lease_record %> 
```

通过 javascript 分配一个值，然后从您的控制器访问它

```
params[:html_content_for][:lease_record] 
```

通过查看运行 Web 服务器的终端的输出，您应该能够看到所有传递给控制器​​的参数。基于此，您可以轻松找到需要使用的参数值。

# ruby-on-rails - Rails Admin - 删除相关对象

> ID：11679309
> 
> 赞同：4
> 
> 时间：2012-07-26T23:06:24.663
> 
> 标签：ruby-on-rails, associations, rails-admin

我在我的一个网站上使用[Rails Admin](https://github.com/sferik/rails_admin)。到目前为止很棒，但我不知道如何从编辑页面中删除相关对象。

示例：我有两个模型 Property 和 PropertyImage。

```
class Property
  has_many :property_images, :dependent => :destroy
end

class PropertyImage
  belongs_to :property
end 
```

我可以转到任一模型的实例的编辑屏幕，并且可以从它们的列表视图中删除 PropertyImages。但是当我编辑一个属性时，我希望能够删除一个与之关联的 PropertyImage。有没有办法在 rails_admin 中打开这个功能？

这是我能看到的。

![rails_admin 界面](../Images/547d0da71c0955eb6b678742fe44fc75.png)

注意：“删除图像”按钮不是我要找的——这只是因为图像字段有一个上传关联。它只编辑 PropertyImage。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-30T08:33:37.347

我有同样的问题，并在阅读您的问题后找到了适合我的答案。

为了从 Property 表单正确设置 PropertyImage 的编辑，您可能希望指定它可以与嵌套表单一起使用：

```
# property.rb
class Property
  has_many :property_images, :dependent => :destroy
  accepts_nested_attributes_for :property_images, :allow_destroy => true
end 
```

包含该`:allow_destroy`选项应该会使嵌套项目的删除选项显示出来。

![带有删除按钮的嵌套表单的屏幕截图](../Images/5ed708600a7411044bfc25524c910dd2.png)

# apache - 阻止 mod_rewrites 更改共享 ssl 地址

> ID：11679311
> 
> 赞同：0
> 
> 时间：2012-07-26T23:06:56.573
> 
> 标签：apache, .htaccess

> **可能重复：**
> [网络解决方案的 https 重定向](https://stackoverflow.com/questions/4686668/https-redirect-for-network-solutions)

我有用于 SEO 和 301 的 .htaccess 文件，但现在我正试图让共享 SSL 工作。我的主机的 ssl url 必须是[https://secure.netsolhost.com/mydomain.com/webpage.html](https://secure.netsolhost.com/mydomain.com/webpage.html)并且当 .htaccess 被删除时它可以工作，但是当它在那里时它将 url 重写为[http://www。 mydomain.com/webpage.html](http://www.mydomain.com/webpage.html)。

```
Options +FollowSymlinks
RewriteEngine on
RewriteCond %{SERVER_PORT} =80
rewritecond %{http_host} ^mydomain.com [nc]
rewriterule ^(.*)$ http://www.mydomain.com/$1 [r=301,nc] 
```

这是我最近的尝试。当我指定特定页面不重定向但无法通过检测 https 或 secure.netsolhost.com 获得 ssl 工作的总体规则时，我让它工作了

我也试过

```
RewriteCond %{SERVER_PORT}!^433$
RewriteCond %{HTTPS} off 
```

还有许多其他的代码，我要么不记得了，要么走错了方向。请帮忙，因为我一直试图让它工作几个小时

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T23:15:24.610

如果您的主机已经将一些服务器变量重写为它们现有的共享 SSL 规则的一部分，我会假设您的 %{HTTP_HOST} 检查不起作用。如果他们知道他们在操纵哪些，可能值得与他们核实。虽然理论上没有理由这不应该工作：

```
RewriteCond %{HTTP_HOST} ^mydomain.com$
RewriteCond %{SERVER_PORT} 80
RewriteCond %{HTTPS} off
RewriteRule ^(.*)$ http://www.mydomain.com/$1 [R=301,NC,L] 
```

# iphone - 当用户向下移动 iphone /ipad 相机以制作全景图片时，如何自动捕获图像？

> ID：11679312
> 
> 赞同：1
> 
> 时间：2012-07-26T23:07:10.863
> 
> 标签：iphone, objective-c, ios4, uiimageview, image-editing

我有一个应用程序，我可以在其中扫描表格，这意味着我会拍照并上传它们。现在如果表格太长以至于iphone / ipad相机无法清楚地拍摄整个表格。在这种情况下，我希望用户慢慢向下移动相机，以便拍摄连续图像，直到查看或扫描整个表单。之后创建一张将所有帧拼接在一起的图片。我知道可以有多种手动执行此操作的方法，例如我可以让用户在将它们合并在一起后选择何时拍摄广告。

但是有什么方法可以自动执行此操作，可能是一些 api 等。我的意思是当用户向下移动相机时自动捕获帧。之后我可以将图像合并在一起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T03:56:41.010

我认为您应该捕获视频（UIImagePickerController 为您提供了一个快速的通用接口），然后使用 MPMoviePlayerController 从捕获的视频中获取图像。

MPMoviePlayerController 提供 requestThumbnailImagesAtTimes:timeOption:。

所以...

1.  记下开始时间 start = [NSDate date];
2.  要求用户平移文档并在完成后按下停止按钮（您可以使用 cameraOverlayView 属性在预览视图上放置一些指令
3.  调出选择器和 startVideoCapture
4.  当 imagePickerController:didFinishPickingMediaWithInfo: 被触发时，记下结束时间。

5.  然后，根据 start 和 end 之间的间隔，为图像选择 N 次

6.  构建一个 MPMoviePlayerController 并调用 requestThumbnailImagesAtTimes:timeOption:

您将有 N 个图像要缝合。

# mysql - 将 Rails ActiveRecord GROUP 查询从 MySQL 转换为 PostgreSQL

> ID：11679313
> 
> 赞同：1
> 
> 时间：2012-07-26T23:07:31.477
> 
> 标签：mysql, ruby-on-rails, database, postgresql, activerecord

我有一个我一直在使用的 ActiveRecord 查询（[这里](https://stackoverflow.com/questions/11406221/how-to-adjust-activerecord-or-straight-sql-query-to-include-zero-count-records)的历史），它在 MySQL 中运行良好，但现在我需要将我的数据库转换为 PostgreSQL，但我遇到了一个错误。这是查询：

```
class Shoe < ActiveRecord::Base
  has_many :purchases

  def self.available_shoes
    #show all shoes that have been purchased less than num_in_stock
    num_in_stock = 3
    Shoe.includes(:purchases)
        .group("purchases.shoe_id")
        .having("COUNT(purchases.shoe_id) < ?", num_in_stock)
  end
end 
```

简单地将 gems 和适配器切换到 postgres 是不够的：我现在收到以下错误：

> ActionView::Template::Error (PG::Error: ERROR: column "shoes.id" 必须出现在 GROUP BY 子句中或用于聚合函数 LINE 1: SELECT "shoes"."id" AS t0_r0, "鞋”。“created_at”AS ...

我试着改变

```
.group("purchases.shoe_id") 
```

至

```
.group("purchases.shoe_id, shoes.id, purchases.id") 
```

虽然这消除了错误，但它也改变了 sql 并破坏了我的一些测试。

我已经阅读了许多有关此错误的 stackoverflow 问题，但我无法找到解决方案。我需要在我的 ActiveRecord 查询中进行哪些更改才能使其在 postgres 中工作？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T08:58:20.580

你找到解决方案了吗？如果不尝试：

```
Shoe.where("not exists ( select 1 from purchases where shoe_id = shoes.id offset ? limit 1)", num_in_stock - 1) 
```

大 num_in_stock 会很慢，你应该在 purchase.shoe_id 列上有索引。

我认为除非您已经计算过购买量，否则大桌子上没有快速的解决方案。

**编辑**

考虑使用 counter_cache 或[counter_culture gem](https://github.com/bestvendor/counter_culture/)

# ios - 键盘出现时弹出视图箭头移动

> ID：11679320
> 
> 赞同：5
> 
> 时间：2012-07-26T23:08:33.067
> 
> 标签：ios, objective-c, xcode, ipad, uipopovercontroller

我有一个带有搜索栏和搜索栏代表的弹出视图。当弹出视图出现时，它会将箭头指向我按下的按钮以按预期将其拉起。当搜索字段被选中并且我的视图被向上推时，箭头一直移动到弹出框的底部，而不是指向它应该锚定到的按钮。如果键盘被关闭，箭头会滑回它应该在弹出框中间的位置。

我可以关闭此弹出框并在正确的位置使用箭头手动调用另一个弹出框，但我觉得这是一个糟糕的解决方案。

按下按钮时，它是这样呈现的

```
[over presentPopoverFromRect:self.addCategoryButton.bounds inView:self.addCategoryButton permittedArrowDirections:UIPopoverArrowDirectionLeft animated:YES]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:21:09.797

假设该按钮是 self.view 的子视图。我的猜测是弹出框应该像这样呈现：

```
[over presentPopoverFromRect:self.addCategoryButton.frame inView:self.view permittedArrowDirections:UIPopoverArrowDirectionLeft animated:YES]; 
```

# windows - 是否有任何支持 CMake 的 Windows IDE？

> ID：11679327
> 
> 赞同：6
> 
> 时间：2012-07-26T23:09:22.617
> 
> 标签：windows, ide, cross-platform, cmake

我正在使用 CMake 和 KDevelop 在 Linux 中开发游戏，我想让它跨平台。

我正在寻找任何具有良好 CMake 支持（如 Kdevelop）的 Windows IDE、自动完成、项目构建和启动应该足以编写一些特定于平台的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T12:44:53.100

可以尝试使用Eclipse CDT，它提倡跨平台，在Windows平台上应该表现良好；然后运行 ​​cmake GUI 以生成 CDT 项目文件，以便您可以使用 Eclipse 打开它们。

另一种选择是生成`sln`可以在 Visual Studio 中打开的 Visual Studio 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-04T09:19:40.240

有几个原生支持 CMake 的 IDE（非详尽列表）：

*   QtCreator
*   KDevelop（你有一个 windows 版本，但是我上次尝试，它比 Linux 版本差很多）...

还有一些 IDE**不**支持 CMake，但是 CMake 对您进行了修改，您可以为它们生成项目：

*   视觉工作室
*   Xcode
*   Eclipse CDT？

# c#-4.0 - DynamoDB 堆栈类型日志记录

> ID：11679329
> 
> 赞同：0
> 
> 时间：2012-07-26T23:09:34.963
> 
> 标签：c#-4.0, amazon-dynamodb

假设我正在尝试将某些程序的输出记录到 DynamoDB 表中，但我需要保留让我们说只有最后 5000 行。实现这一目标的最佳方法是什么？我的意思是，每次我需要在其中放入一些东西并检查是否会超出限制、检索第一行并将其删除时，这听起来有点极端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T05:36:09.670

您将如何在 RAM 中执行此操作？您将使用循环缓冲区。在 DynamoDB 上做同样的事情。每次写入表时，递增主键并将其取模 5000。

# ios5 - 未调用 UIScrollVewDelegate 方法

> ID：11679333
> 
> 赞同：0
> 
> 时间：2012-07-26T23:10:19.823
> 
> 标签：ios5, uiscrollview, uiscrollviewdelegate

我在 UIScrollView 中有一个 UITableview、一个 UITextField 和一些其他元素。在 UITextField 成为第一响应者之前，滚动视图的“scrollEnabled”设置为 NO。我的 Controller 类也设置为 UIScrollView 的委托。

只要将“scrollEnabled”设置为 YES 并更改内容大小，我就可以按预期向上和向下滚动。但是一旦scrollEnabled，就不会调用任何UIScrollViewDelegate 方法。

ScrollView 已启用“用户交互启用”。

是否需要配置其他任何东西来获取委托方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T00:27:32.047

None of my delegate methods were getting invoked. But then I realized that I also had scrolling turned on the tableview that is a subview of the ScrollView. Turning it off adjusted to the expected behavior.

# javascript - 奇怪的函数 valChange 试图找出什么和为什么

> ID：11679335
> 
> 赞同：1
> 
> 时间：2012-07-26T23:10:22.850
> 
> 标签：javascript, jquery

好的，所以我最近有这个项目，所以我还在搞清楚其他的事情。但是今天我需要添加一些新的东西，在这样做的过程中，我遇到了一个障碍，这个障碍似乎是由这个自定义的小功能带来的，这个自定义的小功能有人扩展了 jQuery

```
$.fn.extend({ valChange: function(v) { return this.val(v).change(); } }); 
```

它使用的少数几个地方就像

```
$("input#system_path", $form).valChange(data.system_path ? data.system_path : ''); 
```

现在，这在外行人的术语中所做的一切都让我感到困惑。然而，就我所做的事情而言，我需要在准备好的文档上找到值的元素似乎没有值，尽管实际上在页面上实际上有一个值，我试图在类似的元素上找到值没有通过这种方式获得价值意味着工作正常。所以我总体上试图围绕制作这个的人的想法来思考，然后如果它是什么，我可以改变为其他更好的东西，只要我能让我的最终游戏以我想要的方式工作。

我只需要有人来看看这个并告诉我它是否对他们有意义，如果有意义，是否有替代方案我可以应用，因为这会造成障碍？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T23:11:50.737

这是一个 jQuery 插件，可让您更新元素的值并触发“更改”事件。

当您更新元素的“值”属性时，“更改”事件通常不会触发。这提供了一种相当简单的方法来做到这一点。

# c# - 如何按属性对 XDocument 元素进行数字排序？

> ID：11679341
> 
> 赞同：1
> 
> 时间：2012-07-26T23:11:06.813
> 
> 标签：c#, xml, linq, linq-to-xml

所以我在列表上做一个简单的排序

```
<POSTBACK id="0"></POSTBACK> 
```

```
 XDocument input = XDocument.Load( Server.MapPath("~/App_Data/data.xml"));
        XDocument data =
            new XDocument(
                new XElement("POSTBACK",
                    from node in input.Root.Elements()
                    orderby node.Attribute("id").Value ascending
                    select node)); 
```

但当然，这是按字母顺序排序的，所以这样的事情会发生 89,9,90 等。

如何指定数值比较？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T23:13:30.587

哇。呵呵。没想到这么简单...

```
 XDocument input = XDocument.Load( Server.MapPath("~/App_Data/data.xml"));
    XDocument data =
        new XDocument(
            new XElement("POSTBACK",
                from node in input.Root.Elements()
                orderby Convert.ToInt32( node.Attribute("id").Value)  ascending
                select node)); 
```

# ruby-on-rails - 如何填充Formtastic：选择输入值

> ID：11679352
> 
> 赞同：2
> 
> 时间：2012-07-26T23:12:28.223
> 
> 标签：ruby-on-rails, select, formtastic

我将 Formtastic 与 :as => :selected 输入一起用于数据库中具有固定有效值列表的 FLOAT 字段。这个 Formtastic 输入（DB 中的字段：verticalCDR）的表单视图代码是：

```
<%= clr.input :verticalCDR, :label => "Vertical CDR: ", :as => :select, 
:collection => [0.0, 0.05, 0.1, 0.15, 0.2, 0.25, 0.3, 0.35, 0.4, 0.45, 0.5, 0.55, 0.6, 0.65, 0.7, 0.75, 0.8, 0.85, 0.9, 0.95, 1.0], 
:wrapper_html => { :class => "CRF_Field" }  %> 
```

提交表单时，该值已正确保存到 DB，但如果再次查看相同的记录，则 DB 中的当前值不是 :select 输入中的选定值。它是空白的。

表单中的所有其他输入都按预期工作。

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T15:37:07.970

想我想通了。显然，即使该字段是数字，该集合也应该使用字符串。将集合更改为：

```
<%= clr.input :verticalCDR, :label => "Vertical CDR: ", :as => :select, 
:collection => ["0.0", "0.05", "0.1", "0.15", "0.2", "0.25", "0.3", "0.35", "0.4", "0.45", "0.5", "0.55", "0.6", "0.65", "0.7", "0.75", "0.8", "0.85", "0.9", "0.95", "1.0"], 
:wrapper_html => { :class => "CRF_Field" }  %> 
```

我猜这与字符串类型的转换有关，尽管这对我来说似乎有些不受欢迎。

# jquery - 隐藏绝对定位 div 的溢出会破坏 Javascript

> ID：11679353
> 
> 赞同：1
> 
> 时间：2012-07-26T23:12:37.850
> 
> 标签：jquery, html, responsive-design, css-position

我得到了一些解决方案的帮助，使这个“箭头”在点击时与它上面的对象的中间对齐……它正在工作。

从那时起，我在设计上做了更多的工作，需要将“wrap” div 的溢出设置为 position:relative 以隐藏箭头的 x 轴溢出......这可行，但是：

现在对齐已经消失了。我不知道为什么我不擅长 jQuery :(

一个重要的注意事项：这个站点是响应式的，并且调整浏览器宽度现在对箭头位置做了疯狂的事情（只是因为我已经将换行更改为位置：相对）。

在此处查看代码：http: [//jsfiddle.net/RevConcept/y86RG/5/](http://jsfiddle.net/RevConcept/y86RG/5/)

谢谢你的帮助！

HTML：

```
<div class="container">                        
        <div class="row">

                <ol class="flexslider-nav">
                    <li class="threecol">
                        <img id="discover" class="btn-workflow" src="http://nillabean.com/images/circle-225.png" alt="#" />
                    </li>
                    <li class="threecol">
                        <img id="design" class="btn-workflow" src="http://nillabean.com/images/circle-225.png" alt="#" />
                    </li>
                    <li class="threecol">
                        <img id="develop" class="btn-workflow" src="http://nillabean.com/images/circle-225.png" alt="#" />
                    </li>
                    <li class="threecol last">
                        <img id="deploy" class="btn-workflow" src="http://nillabean.com/images/circle-225.png" alt="#" />
                    </li>                
                </ol>

            </div><!--end row-->

            <!-- WORKFLOW: DESC. SLIDER -->
            <div class="row">

                <div class="twelvecol last">

                     <div class="arrow-wrap">
                        <div class="arrow"></div>
                     </div><!--end arrow-wrap -->

                    <div class="flexslider">
                        <ul class="slides">
                            <li>
                                <p>Test Content</p>
                            </li>
                            <li>
                                <p>Test Content</p>
                            </li>
                            <li>
                                <p>Test Content</p>
                            </li>
                            <li>
                                <p>Test Content</p>
                            </li>
                        </ul>
                    </div><!--end flexslider-->

                </div><!--end col-->

            </div><!--end row--> 
```

​</p>

CSS：

```
 .container p {
       color: #fff;
       line-height: 100px;
       background: #000;
       text-align: center;
       margin: 20px 0 0 0;
    }

    .flexslider p {
        margin-top:0px;
        background:transparent;
        color:#000000;
    }

    .flexslider {
        border-bottom:1px #000 solid;
        border-left:1px #000 solid;
        border-right:1px #000 solid;
    }

    h1, h2, h3 {
        text-align:center;
    }

    .flexslider-nav li img {
        display:block;
        margin:0px auto;
    }

    .arrow {
      position:absolute;
      background:transparent url(http://nillabean.com/images/arrow.png) repeat-x bottom center;
      width:2200px;
      height:40px;
    }

    .arrow-wrap {
        position:relative;       
        height:35px;
        border:1px #C00 solid;
    }

​ 
```

查询：

```
 var start_pos = $("#discover").offset().left + $("#discover").width()/2 - $(".arrow").width()/2;

    $(".arrow").css("left", start_pos);

    $(".btn-workflow").click(function(event){
        var x = $(this).offset().left;

        var img_width = $(this).width();
        var arrow_width = $(".arrow").width();

        var arrow_x = x + img_width/2 - arrow_width/2;

        $(".arrow").animate({
            "left": arrow_x
        }, "slow");
    }); 
```

图片：

这最终是我想要做的......边框和透明度使这比添加简单的箭头更困难。

![完成的 div 和箭头应该是这样的](../Images/2eb76f8efbfb49aa12a69703fa27e154.png) ​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T23:32:26.383

[http://jsfiddle.net/y86RG/13/](http://jsfiddle.net/y86RG/13/) 这行得通吗？这是我所做的更改

```
.arrow {
  position:absolute;
  background:transparent url(http://nillabean.com/images/arrow.png) repeat-x bottom center;
  left: 0;
  top: 0;
  right: 0;
  height:35px;
}

.arrow-wrap {
    position:relative;       
    height:35px;
    border:1px #C00 solid;
} 
```

并在 JS 中，删除了以下行

```
//        $(".arrow").css("left", start_pos); 
```

# ruby-on-rails - 如何在 Rails 中使 has_secure_password（bcrypt 哈希）更快

> ID：11679354
> 
> 赞同：4
> 
> 时间：2012-07-26T23:12:42.513
> 
> 标签：ruby-on-rails, bcrypt

后代的另一个自我答案。:)

`has_secure_password`使用（使用 bcrypt 哈希）创建模型真的很慢。`User.create!`大约需要 0.3 秒。

这减慢了我的测试套件。如何提高性能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T23:12:42.513

Semyon Perepelitsa 慷慨地为 test_helper/spec_helper[发布](https://github.com/rails/rails/pull/285#issuecomment-2482862)了以下代码段：

```
require "bcrypt"
silence_warnings do
  BCrypt::Engine::DEFAULT_COST = BCrypt::Engine::MIN_COST
end 
```

这削弱了哈希函数，使得哈希计算在测试模式下几乎是瞬时的——这正是我们想要的！

# javascript - 有焦点，但无法输入 WebKit

> ID：11679358
> 
> 赞同：9
> 
> 时间：2012-07-26T23:12:48.730
> 
> 标签：javascript, jquery, mobile

我遇到了一个小问题，过去两个小时一直在努力调试它。在决定一个新的大脑可能会提供帮助之后，我决定在这里发帖。

我知道我应该出于遗留目的在此处发布一些代码，但问题涉及大量代码，因此提供链接更容易。

请查看以下页面：[http](http://ben-major.co.uk/labs/phonee/#overlays) ://ben-major.co.uk/labs/phonee/#overlays 。如果您点击`Prompt`（在 Chrome 或 Mobile Safari 中），您会看到一个提示框。这是障碍：

该字段具有焦点（请参见白色背景，而不是`#eee`未聚焦字段的颜色），但是当尝试在该字段中键入任何内容时，尽管该字段具有焦点，但什么也没有发生。我在我的 MBP (Chrome)、iMac (Chrome)、iPad + iPhone 上尝试过，都遇到了同样的问题。

有没有人遇到过类似的问题，因为我真的无法弄清楚为什么这不起作用。keyup 或类似事件没有事件预防措施......

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-26T23:20:57.150

```
-webkit-user-select: none; 
```

删除该样式，它可以工作。您可以在您正在使用的 reset.css 文件中更改它。这`-webkit-user-select: auto;`也有效。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-26T23:22:19.113

在 reset.css 的第 46 行，你有`-webkit-user-select: none;`这个不允许用户在 webkit 浏览器上选择文本框！

# jquery - 在滚动时对齐到 div/元素的顶部

> ID：11679361
> 
> 赞同：4
> 
> 时间：2012-07-26T23:13:01.473
> 
> 标签：jquery, scroll, scrolltop

任何人都可以推荐一种“最佳”方法来在向下滚动页面时将滚动条捕捉到元素的顶部吗？

例如，如果我的布局如下：

```
<div id="section-one" style="width: 100%; height: 600px;">
    Section One
</div>

<div id="section-two" style="width: 100%; height: 600px;">
    Section Two
</div>

<div id="section-three" style="width: 100%; height: 600px;">
    Section Three
</div>

<div id="section-four" style="width: 100%; height: 600px;">
    Section Four
</div> 
```

如果用户正在查看第一部分并开始向下浏览，第二部分开始占据浏览器视口的一部分，我希望浏览器自动捕捉到下一个 div 的顶部。

我熟悉 .scroll() 和 .scrollTop 但有点不确定从这里去哪里。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T23:57:35.973

[您可以使用@Scott Dowding创建的](https://stackoverflow.com/users/41669/scott-dowding)[isScrolledIntoView](https://stackoverflow.com/a/488073/603127)函数检查元素是否在 wiewport 中，

这是一个例子，

```
$(document).scroll(function() {
    $("div:not(.highlight)").each(function() {
        if (isScrolledIntoView(this)) {
           $("div").removeClass("highlight");
           $(this).addClass("highlight");
           $("body").animate({ scrollTop: $(this).offset().top }, 1000)
        }
    });
});

function isScrolledIntoView(elem)
{
    var docViewTop = $(window).scrollTop();
    var docViewBottom = docViewTop + $(window).height();

    var elemTop = $(elem).offset().top;
    var elemBottom = elemTop + $(elem).height();

    return (elemTop <= docViewBottom) && (elemTop > docViewTop);
}​ 
```

[演示](http://jsfiddle.net/RPkLW/30/embedded/result/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T00:00:19.090

你可以做的是设置

```
body {
overflow:hidden
} 
```

并控制用户交互，假设您有一个菜单，如果用户选择菜单中的一个部分，您只需使用 scrollTop 动画以重定向到该部分。

另一种解决方案，因为你有一个定义的高度是 600px，你可以用 scrollTop 计算并滚动用户在文档中的位置，就像这样......

```
$(window).scroll(function () { 
      console.log($(window).scrollTop());
});​ 
```

示例：http: [//jsfiddle.net/3STQN/](http://jsfiddle.net/3STQN/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T12:09:14.613

如果多个 div 可以进入视图，那么您可以将函数 isScrolledIntoView 更改为，比如 isTopInTheView 或类似的东西。在该函数中，您可以检查 div 的顶部是否可见，如果是，则将该 div 捕捉到屏幕顶部。

编辑：当然，一旦你找到满足要求的第一个 div，只需从函数返回，这样它就不能再检查任何 div。

# c++ - 如何在两个排序数组的并集中找到第 k 个最大的元素？

> ID：11679364
> 
> 赞同：2
> 
> 时间：2012-07-26T23:13:10.730
> 
> 标签：c++, algorithm, language-agnostic

我需要`k`在两个排序的数组中找到最大的元素，但要有所不同。

[该](https://stackoverflow.com/questions/4607945/how-to-find-the-kth-smallest-element-in-the-union-of-two-sorted-arrays)算法假设`k<=max(m,n)`当 时索引出错`k>max(m,n)`。在我的问题中，我知道这将永远存在`k>(m+n)/2`，因此`k>min(m,n)`我需要稍微改变 Jules Olléon 的答案......我只是看不出是哪一点:~

我找到了这个[链接](http://www2.myoops.org/cocw/mit//NR/rdonlyres/Electrical-Engineering-and-Computer-Science/6-046JFall-2005/30C68118-E436-4FE3-8C79-6BAFBB07D935/0/ps9sol.pdf)第 3 页，但是那里有错误（实施时，它不会返回正确的答案）

我知道一个快速的解决方法是将两个数组都乘以 -1 并取该联合中最小的 k 并将答案乘以 -1 但这会使代码不可读。

这*不是*家庭作业。

好的，我想我误解了尼尔的回答或其他东西，因为这就是我给“他”的东西

```
#include <algorithm>
#include <fstream>
#include <iostream>
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include <vector>

#include <Eigen/Dense>
using namespace Eigen;
using Eigen::VectorXf;
using Eigen::VectorXi;

float getNth(VectorXf& v1,VectorXf& v2,int& n){
        int step=(n/4),i1=(n/2),i2=(n-i1);
        while(!(v2(i2)>=v1(i1-1) && v1(i1)>v2(i2-1))){                   
            if(v1(i1-1)>=v2(i2-1)){
                i1-=step;
                i2+=step;
            } else {
                i1+=step;
                i2-=step;
            }
            step/=2;
            if(!step) step=1;
        }
        if(v1(i1-1)>=v2(i2-1))
            return v1(i1-1);
            else
            return v2(i2-1);    
}
int main(){  
    int p,q,n,k,l;
    float sol;
    std:: cout << "enter p " << std::endl;
    std::cin >> p; 
    std:: cout << "enter q " << std::endl;
    std::cin >> q;
    n=p+q;
    std:: cout  << " enter k larger than " << std::min(p,q) << " and smaller than " << n-1 << std::endl;
    std::cin >> k;

    k=n-k-1;

    srand(time(NULL));
    VectorXf v1=VectorXf::Random(p);
    srand(time(NULL));
    VectorXf v2=VectorXf::Random(q);
    VectorXf v3(n);
    v3 << v1, v2;
    std::sort(v3.data(),v3.data()+v3.size(),std::greater<float>()); //std::greater<float>()
    std::sort(v1.data(),v1.data()+v1.size(),std::greater<float>());
    std::sort(v2.data(),v2.data()+v2.size(),std::greater<float>());

    sol=getNth(v1,v2,k);
    std::cout << sol << std::endl;
    std::cout << v3(k) <<   std::endl;
    return 0;  
} 
```

这就是我得到的：

```
enter p 
12
enter q 
32
 enter k larger than 12 and smaller than 43
13
nthoftwo: /Desktop/work/p1/geqw4/vi3/out/sp/ccode/eigen/Eigen/src/Core/DenseCoeffsBase.h:409: Eigen::DenseCoeffsBase<Derived, 1>::Scalar& Eigen::DenseCoeffsBase<Derived, 1>::operator()(Eigen::DenseCoeffsBase<Derived, 1>::Index) [with Derived = Eigen::Matrix<float, -0x00000000000000001, 1>, Eigen::DenseCoeffsBase<Derived, 1>::Scalar = float, Eigen::DenseCoeffsBase<Derived, 1>::Index = long int]: Assertion `index >= 0 && index < size()' failed.
Aborted (core dumped) 
```

如果您不熟悉 eigen：该错误是由以下原因引起的索引越界错误`getNth(v1,v2,k)`

# 编辑：

这是对下面 JF Sebastian 简单而优雅的解决方案的一个非常小的修改——所有错误都是我的，但它似乎有效。目的是使用原始索引（即我不确定 Neil 的想法是否不可或缺）。

```
#include <algorithm>
#include <fstream>
#include <iostream>
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include <vector>
#include <cassert>
#include <iterator>

#include <Eigen/Dense>
using namespace Eigen;
using Eigen::VectorXf;
using Eigen::VectorXi;

template<class RandomIterator,class Compare>
typename std::iterator_traits<RandomIterator>::value_type
nsmallest(RandomIterator firsta,RandomIterator lasta,RandomIterator firstb,RandomIterator lastb,size_t n,Compare less) {
  assert(n<static_cast<size_t>((lasta-firsta)+(lastb-firstb)));
  if (firsta==lasta) return *(firstb+n);
  if (firstb==lastb) return *(firsta+n);

  size_t mida=(lasta-firsta)/2;
  size_t midb=(lastb-firstb)/2;
  if ((mida+midb)<n)
    return less(*(firstb+midb),*(firsta+mida))?
      nsmallest(firsta,lasta,firstb+midb+1,lastb,n-(midb+1),less):
      nsmallest(firsta+mida+1,lasta,firstb,lastb,n-(mida+1),less);
  else
    return less(*(firstb+midb),*(firsta+mida))?
      nsmallest(firsta,firsta+mida,firstb,lastb,n,less):
      nsmallest(firsta,lasta,firstb,firstb+midb,n,less);
}
int main(){  
    int p,q,n,k,l;
    float sol;
    std:: cout << "enter p " << std::endl;
    std::cin >> p; 
    std:: cout << "enter q " << std::endl;
    std::cin >> q;
    n=p+q;
    std:: cout  << " enter k larger than " << std::min(p,q) << " and smaller than " << n-1 << std::endl;
    std::cin >> k;

    srand(time(NULL));
    VectorXf v1=VectorXf::Random(p);
    srand(time(NULL));
    VectorXf v2=VectorXf::Random(q);
    VectorXf v3(n);
    v3 << v1, v2;
    std::sort(v3.data(),v3.data()+v3.size()); 
    std::sort(v1.data(),v1.data()+v1.size());
    std::sort(v2.data(),v2.data()+v2.size());

    sol=nsmallest(v1.data(),v1.data()+v1.size(),v2.data(),v2.data()+v2.size(),k,std::less<float>());
//if it works, these two should return the same.
    std::cout << sol << std::endl;  
    std::cout << v3(k) << std::endl;
    return 0;  
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T03:35:25.070

从您的评论中，我了解到您希望找到给定 2 个逆向排序数组的第 k 个最小值，例如，for`a={5,4,3}, b={2,1,0};`和`k=1`预期结果是`0`，即最小值 - 第一个最小值（这意味着`k`从 开始计数`1`）。

给定`nsmallest()`适用于排序数组并接受自定义比较器的函数，您可以：

```
#include <functional> // greater<>
#include <iostream>

#define SIZE(a) (sizeof(a) / sizeof(*a))

int main() {
  int a[] = {5,4,3};
  int b[] = {2,1,0};
  int k = 1; // find minimum value, the 1st smallest value in a,b

  int i = k - 1; // convert to zero-based indexing
  int v = nsmallest(a, a + SIZE(a), b, b + SIZE(b),
            SIZE(a)+SIZE(b)-1-i, std::greater<int>());
  std::cout << v << std::endl; // -> 0
  return v;
} 
```

我使用@Neil[的建议来修复索引](https://stackoverflow.com/a/11679582/4279)和[@lambdapilgrim 对算法的回答](https://stackoverflow.com/a/8935157/4279)：

```
#include <cassert>
#include <iterator>

template<class RandomIterator, class Compare>
typename std::iterator_traits<RandomIterator>::value_type
nsmallest(RandomIterator firsta, RandomIterator lasta,
          RandomIterator firstb, RandomIterator lastb,
          size_t n,
          Compare less) {
  assert(n < static_cast<size_t>((lasta - firsta) + (lastb - firstb)));
  if (firsta == lasta) return *(firstb + n);
  if (firstb == lastb) return *(firsta + n);

  size_t mida = (lasta - firsta) / 2;
  size_t midb = (lastb - firstb) / 2;
  if ((mida + midb) < n)
    return less(*(firstb + midb), *(firsta + mida)) ?
      nsmallest(firsta, lasta, firstb + midb + 1, lastb, n - (midb + 1), less) :
      nsmallest(firsta + mida + 1, lasta, firstb, lastb, n - (mida + 1), less);
  else
    return less(*(firstb + midb), *(firsta + mida)) ?
      nsmallest(firsta, firsta + mida, firstb, lastb, n, less) :
      nsmallest(firsta, lasta, firstb, firstb + midb, n, less);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T23:38:14.647

th 最大的`k`元素也是`m + n + 1 - k`th* 最小的元素，因此您可以尝试以这种方式解决问题。

*从 1 开始计数。如果`k`是从 0 开始计数，请`m + n - 1 - k`改用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T23:29:46.383

我相信您想要类似于 mergesort 的合并步骤的东西，在该步骤中，您逐步比较 m 的第 i 个元素与 n 的第 j 个元素-但不是将值存储在数组中，您只是在寻找第 k 个最小的-所以当您找到它时，返回该值（和/或其索引）并退出该函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T03:34:10.507

我不确定关于 k>max(m,n) 的交易是什么！

一个简单的解决方案：

```
def find(v1, start1, end1, v2, start2, end2, k):
    i = (start1+end1)/2
    j = binsearchrank(v2, start2, end2, v1[i])
    ranki = (i-start1+1) + (j-start2)
    if ranki > k:
        return find(v2, start2, j, v1, start1, i, k)
    elif ranki < k:
        return find(v2, j, end2, v1, i+1, end1, k-ranki)
    else:
        return v1[i] 
```

复杂度为 O(log^2n)

# c# - 并发读写文件

> ID：11679365
> 
> 赞同：0
> 
> 时间：2012-07-26T23:13:11.733
> 
> 标签：c#, concurrency

目前我正在编写 Windows 服务来处理大量 xml 文件并将信息从 xml 文件保存到数据库。有 3 台机器运行指向相同共享位置的相同服务。在这个过程中我总是遇到文件未找到的异常，不知道如何解决这个问题。我试图从目录中获取所有文件并根据机器名称重命名这些文件，并允许每台机器处理它自己的一组文件，但仍然遇到 File Not Found 异常。谁能告诉我处理这个问题的正确方法。

谢谢你。

代码

```
if (Directory.Exists(folder))
{
  string pattern = ".xml";
  string machineName = System.Environment.MachineName;
  string[] files = Directory.GetFiles(folder, pattern, SearchOption.AllDirectories);  
  newExt = string.Format("{0}.{1}", machineName, newExt);
  for (int i = 0; i < files.Length; i++)
  {
      if (files[i].Contains(machineName))
      {
           //replace this new extension
           files[i].Replace(machineName + ".", "");
      }
      else
      {
           files[i] = ChangeExtension(files[i], newExt, true);
      }
  }
  IEnumerable<string> sortedFiles = files.Where(f => !string.IsNullOrEmpty(f) && f.Contains(machineName))
                                         .OrderBy(f => f, Sorter);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T23:19:06.073

如果不查看您的代码，很难看到发生了什么，但我推测这三个单独的服务器会获得一个目录列表，从该列表中选择一个文件来处理，同时另一个服务器已重命名该文件，因为*另一*台服务器决定开始处理该文件。

如果这种情况很少发生，您可以忽略异常（假设我的解释是正确的）。如果这种情况经常发生，您将需要更详细地解释您在做什么。

您可以通过让每台服务器以不同的方式对文件列表进行排序（例如，一个 AZ、第二个 ZA、第三个 LZ、AJ...），然后选择排序顺序中的前一个来最小化同一文件的争用从事于。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T00:49:58.327

您能否解释一下目录中出现的文件名称？

1.  如果文件的名称中已经有目标机器名，那么每台机器只处理那些命名的文件就足够了（或者不处理？？）。
2.  如果文件出现时没有指定任何特殊的机器名，则看起来像是工作服务之间的竞赛，谁先捕获文件。那么您的异常似乎是可以预料的（正如 Eric J. 所说），您只需尝试..catch 它并省略该文件。这是正常的，其他一些服务已经捕获了该文件。或者你可以考虑一些资源共享技术来避免多个服务同时检查目录。至少您可以创建一些子目录来将所有文件分成一些组，并使每个服务与每个子目录一起工作......

PS：当然，如果您觉得我没有发现问题，请您提供一些更准确的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T23:44:39.220

正如 Eric J 提到的，您可以简单地忽略错误：

```
if (Directory.Exists(folder))
{
  string pattern = ".xml";
  string machineName = System.Environment.MachineName;
  string[] files = Directory.GetFiles(folder, pattern, SearchOption.AllDirectories);  
  newExt = string.Format("{0}.{1}", machineName, newExt);

  for (int i = 0; i < files.Length; i++)
  {
      try
      {
          if (files[i].Contains(machineName))
          {
               //replace this new extension
               files[i].Replace(machineName + ".", "");
          }
          else
          {
               files[i] = ChangeExtension(files[i], newExt, true);
          }
     catch(FileNotFoundException ex)
     {   
     } 
  }

  IEnumerable<string> sortedFiles = files.Where(f => !string.IsNullOrEmpty(f) && f.Contains(machineName))
                                         .OrderBy(f => f, Sorter);
} 
```

# asp.net - 动态创建 c# 语句

> ID：11679366
> 
> 赞同：2
> 
> 时间：2012-07-26T23:13:17.487
> 
> 标签：asp.net, asp.net-mvc, c#-4.0

我正在尝试动态完成创建 ac# 语句以避免使用下面显示的 switch 语句。我查看了 CodeSnippetStatement 类，但无法使其工作。

动态应用程序；

```
 switch (entity)
        {
            case "entity_1":
                apps = Xrm.Entity_1Set.SingleOrDefault(a => a.Id.Equals(guid));
                break;
            case "entity_2":
                apps = Xrm.Entity_2Set.SingleOrDefault(a => a.Id.Equals(guid));
                break;
            case "entity_3":
                apps = Xrm.Entity_3Set.SingleOrDefault(a => a.Id.Equals(guid));
                break; 
```

...

我想做这样的事情（将实体动态传递为字符串并将语句转换为在运行时执行）：

apps = CodeSnippetStatement(String.Format("Xrm.{0}Set.SingleOrDefault(a => a.Id.Equals(guid)", entity) );

那可能吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T23:31:56.617

假设`Entity_1Set`是 的公共属性`Xrm`，您可以使用反射：

```
using System.Reflection; // at the top of your code file

var propertyName = "E" + entity.Substring(1) + "Set";
apps = Xrm.GetType().GetProperty(propertyName ).GetValue(Xrm); 
```

这仅适用`Xrm`于类的实例（不是静态类引用）。

请注意，反射比直接访问属性要慢。如果您只是偶尔这样做，那么这个时间成本并不多。但在一个循环中，它可以加起来。

另一种技术是将您的 EntitySet 实例缓存到字典中：

```
private Dictionary<string, EntitySet> entityMappings; // at the top of your class

var xrm = GetXrmFromSomewhere();
entityMappings = new Dictionary<string, EntitySet>
{
    { "entity_1", xrm.Entity_1Set },
    { "entity_2", xrm.Entity_2Set },
    { "entity_3", xrm.Entity_3Set }
}; 
```

然后你只需要这样做：

```
var app = entityMappings[entity].SingleOrDefault(a => a.Id.Equals(guid)); 
```

# php - 使用 curl 从 twitter 流 API 检索数据时写入文件的数据不完整

> ID：11679369
> 
> 赞同：3
> 
> 时间：2012-07-26T23:13:37.123
> 
> 标签：php, curl, twitter

更新：经过一番挖掘，我发现解决方案相当简单。我所要做的就是替换`curl_setopt($ch, CURLOPT_FILE, $fp2);`为`curl_setopt($ch, CURLOPT_WRITEFUNCTION, 'writeCallback');`. 所做的只是打开要写入数据的文件，`WriteCallback`将数据写入文件，然后关闭文件。我相信下面所述的代码没有按预期工作的原因是因为 curl 打开了与 twitter api 的持久连接，因此永远不会`curl_close($ch)`超过`close($fp)`. 希望这可以帮助任何可能面临同样问题的人。

直到最近我才熟悉 curl 库。我目前正在尝试使用 curl 与 Twitter 的[流 api](https://dev.twitter.com/docs/streaming-apis)保持一致的连接。

到目前为止，这是我的代码：

```
$fp2 = fopen('file:///Users/KareemYousrii/dump.txt', "r+");
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_HEADER,0);
curl_setopt($ch, CURLOPT_FILE, $fp2);
curl_setopt($ch, CURLOPT_TIMEOUT, 99999999);
curl_exec($ch);
curl_close($ch);
fclose($fp); 
```

当我删除该`curl_setopt($ch, CURLOPT_FILE, $fp2);`行并从终端运行文件时，我得到了所需的响应。但是，如果我按照示例中所示保留它，我会得到一个包含不一致数据的文本文件。这意味着除非发生另一个事件，否则有关特定事件的数据（即喜欢推文或转发推文）不会完全写入文件，此时第一个事件被完全写入，而第二个事件仅部分写入。

这是最新事件的文件内容示例：

```
{
    "target_object": {
    "retweeted": false,
    "retweet_count": 0,
    "in_reply_to_user_id": 261119681,
    "in_reply_to_status_id": 219191541426688001,
    "in_reply_to_status_id_str": "219191541426688001",
    "truncated": false,
    "user": {
    "id": 99786716,
    "location": "",
    "profile_use_background_image": true,
    "profile_text_color": "333333",
    "following": true,
    "verified": false,
    "id_str": "99786716",
    "default_profile": true,
    "utc_offset": 7200,
    "profile_sidebar_border_color": "C0DEED",
    "friends_count": 231,
    "name": "kareem ahmed",
    "profile_background_image_url_https": "https:\/\/si0.twimg.com\/images\/themes\/theme1\/bg.png",
    "notifications": false,
    "protected": false,
    "listed_count": 0,
    "profile_background_tile": false,
    "screen_name": "KareemYousrii",
    "contributors_enabled": false,
    "profile_sidebar_fill_color": "DDEEF6",
    "profile_image_url": "http:\/\/a0.twimg.com\/profile_images\/1240332836\/40753_10150118794908242_529098241_7875682_6258916_n_normal.jpg",
    "geo_enabled": true,
    "followers_count": 107,
    "description": "",
    "statuses_count": 386,
    "is_translator": false,
    "show_all_inline_media": true,
    "profile_background_color": "C0DEED",
    "url": null,
    "profile_image_url_https": "https:\/\/si0.twimg.com\/profile_images\/1240332836\/40753_10150118794908242_529098241_7875682_6258916_n_normal.jpg",
    "lang": "en",
    "follow_request_sent": false,
    "default_profile_image": false,
    "created_at": "Sun Dec 27 21:29:09 +0000 2009",
    "profile_background_image_url": "http:\/\/a0.twimg.com\/images\/themes\/theme1\/bg.png",
    "time_zone": "Istanbul",
    "favourites_count": 11,
    "profile_link_color": "0084B4"
    },
    "favorited": false,
    "created_at": "Sat Jun 30 22:14:54 +0000 2012",
    "in_reply_to_user_id_str": "261119681",
    "in_reply_to_screen_name": "salmamostafa90",
    "contributors": null,
    "place": null,
    "coordinates": null,
    "geo": null,
    "source": "web",
    "id_str": "219192312905990146",
    "id": 219192312905990146,
    "text": " \u0635\u0648\u0631\u0629 \u0644\u0642\u0641\u0627 .. \u062c\u0627\u0645\u062f\u0629 \u062c\u062f\u0627"
    },
    "tar 
```

任何帮助深表感谢。

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T02:02:25.023

这可能是 PHP 的写入缓冲区的问题，它会等到接收到一定数量的数据后才真正写入文件。您可以使用以下方法解决此问题[`stream_set_write_buffer`](http://www.php.net/manual/en/function.stream-set-write-buffer.php)：

```
$fp2 = fopen('file:///Users/KareemYousrii/dump.txt', "r+");
stream_set_write_buffer($fp2, 0);
$ch = curl_init(); 
```

# android - 选择后Android删除背景？

> ID：11679370
> 
> 赞同：0
> 
> 时间：2012-07-26T23:13:45.837
> 
> 标签：android, background, bitmap, imageview

我想知道在选择图像示例后是否可以删除我的 imageview 背景.. imageview 中写入了背景照片插入图像，当我从图库或相机中选择图像并将其插入 imageview通过“choosenBitmap”，但图像视图背景仍然存在，我想将其删除

我试过“imageView.remove(background);” 和“remove.background”但没有结果

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T23:16:35.460

使用以下方法**之一**：

```
// API 15 or lower
imageView.setBackgroundDrawable(null);

// API 16 or higher
imageView.setBackground(null);

// Any APIs
imageView.setBackgroundResource(0);
imageView.setBackgroundColor(0); 
```

一个或另一个可能工作或不工作取决于您的实施。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-22T22:49:06.180

```
imageView.setBackground(null); 
```

这对我有用。

# objective-c - 如何在 iOS 应用程序中做可通过代码添加或删除的可点击图标？

> ID：11679371
> 
> 赞同：0
> 
> 时间：2012-07-26T23:13:50.130
> 
> 标签：objective-c, ios, xcode, ios5

好吧，基本上我想知道如何在我的应用程序中制作可以用我的代码操作（取出或放入）的图标？我应该研究什么技术？

在“标志”应用程序中提出了类似的想法，其中每个标志都放置在屏幕区域上，一旦用户点击特定标志，它就会将您带到另一个屏幕并要求输入，然后与数据库进行交叉检查。

我本质上想对我的应用程序做同样的事情，但我真的不知道如何制作一个带有特定图标的区域，这些图标可以被点击以执行操作，即将用户带到另一个屏幕。

我将不胜感激这方面的任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T23:16:08.150

我想标准[的 UIButton](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIButton_Class/UIButton/UIButton.html)控件是您需要的，视图控制器中使用的基本示例将是：

```
// ViewDidLoad:
UIButton* flagButton = [[UIButton alloc] initWithFrame: CGRectMake(someX, someY, someWidth, someHeight)];
[tmpMainButton addTarget:self action:@selector(clickButton:) forControlEvents:UIControlEventTouchUpInside];
[tmpMainButton setBackgroundImage:[UIImage imageNamed:@"someFlag.png"]];
[self.view addSubview:flagButton];

...

- (void) clickButton:(id)sender{
   // Display next controller here
   // e.g. if you use UINavigationController, then push it in navigation stack
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T08:26:59.240

您可以`UIImageView`使用您的图标添加一个作为其图像并添加`UITapGestureRecognizer`到它。

```
 //ViewDidLoad
    UIImageView *tempIcon = [[UIImageView alloc] initWithFrame:CGRectMake(350, 100, 80, 80)] ;
    tempIcon.image = [UIImage imageNamed:@"tutorial.png"];
    tempIcon.userInteractionEnabled = YES;

    UITapGestureRecognizer *tapForNextView = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(goToNextView:)];
    [tapForNextView setNumberOfTapsRequired:1];
    [tapForNextView setDelegate:self];
    [tempIcon addGestureRecognizer:tapForNextView];
    [tapForNextView release];

    [self.view addSubview:tempIcon];

-(void)goToNextView:(id)sender
{
    //Code for showing next controller comes here 
} 
```

您还可以添加 `UIPanGestureRecognizer`到您的图标以在屏幕上移动它。您可以做的还有很多，只需参考苹果的 [Gesture Recognizers](http://developer.apple.com/library/ios/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/GestureRecognizers/GestureRecognizers.html)文档即可。

# java - 在不下载的情况下启动 webstart...？

> ID：11679373
> 
> 赞同：5
> 
> 时间：2012-07-26T23:14:01.497
> 
> 标签：java, google-chrome, jnlp, java-web-start

我制作了一个 Java webstart 应用程序，并创建了一个带有启动它的链接的 HTML 页面。问题是，在谷歌浏览器中，没有选项可以“打开”一个文件而不保存它。我想制作一个无需保存即可自动启动 JNLP 文件的 HTML 页面。或者更确切地说，用户不必打开他们的文件资源管理器来启动它）这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-10-23T03:59:56.130

在厌倦了这个问题之后，我围绕扩展编写了自己的工作。

它是在 ubuntu 下编写的，但应该是可移植的（即使是带有一些工作/阅读的 win32）。

单击即可启动 jnlp 文件，无需提示或下载。它只是将 jnlp 文件的 url 直接传递给 javaws。没有杂乱的下载文件夹，没有额外的点击。

它简单、粗暴且有效。我过滤了 URL，所以它只适用于我自己的内部服务器，所以我不会意外启动一些随机的 jnlp 文件。我敢肯定，可以做更多的工作来改进它。按原样使用，无保修等。

文件：

/usr/local/bin/jnlp-launcher

```
#!/usr/bin/env python

import struct
import sys
import threading
import Queue
import json
import os

# On Windows, the default I/O mode is O_TEXT. Set this to O_BINARY
# to avoid unwanted modifications of the input/output streams.
if sys.platform == "win32":
  import os, msvcrt
  msvcrt.setmode(sys.stdin.fileno(), os.O_BINARY)
  msvcrt.setmode(sys.stdout.fileno(), os.O_BINARY)

# Helper function that sends a message to the webapp.
def send_message(message):
   # Write message size.
  sys.stdout.write(struct.pack('I', len(message)))
  # Write the message itself.
  sys.stdout.write(message)
  sys.stdout.flush()

# Thread that reads messages from the webapp.
def read_thread_func(queue):
  message_number = 0
  while 1:
    # Read the message length (first 4 bytes).
    text_length_bytes = sys.stdin.read(4)

    if len(text_length_bytes) == 0:
      if queue:
        queue.put(None)
      sys.exit(0)

    # Unpack message length as 4 byte integer.
    text_length = struct.unpack('i', text_length_bytes)[0]

    # Read the text (JSON object) of the message.
    text = sys.stdin.read(text_length).decode('utf-8')

    decoded = json.loads(text);
    os.system("javaws " + decoded['url']);

def Main():
  read_thread_func(None)
  send_message('"complete"')
  sys.exit(0)

if __name__ == '__main__':
  Main() 
```

chrome 扩展是放置在本地目录中的 2 个文件：

清单.json

```
{
  "manifest_version": 2,

   "background": {
      "persistent": false,
      "scripts": [ "bg.js" ]
   },

  "name": "JNLP Fixer",
  "description": "Handle JNLPs",
  "version": "1.0",

  "permissions": [
    "downloads", "nativeMessaging"
  ]
} 
```

和 bg.js（根据需要编辑主机过滤器）

```
chrome.downloads.onCreated.addListener(function(downloadId) {
    var expr = /\.jnlp$/;
    //this is to limit where we apply the auto-launch.
    //for our use, i only wanted it for internal jnlps.
    var hostExpr = /(http|https):\/\/internal.company.com\//;
    if (hostExpr.test(downloadId.url)) {
        if (downloadId.state == "in_progress") {
            console.log(downloadId.url);
            chrome.downloads.cancel(downloadId.id,function() {
                console.log("cancelled");
            });
            chrome.runtime.sendNativeMessage("com.hcs.jnlplauncher", 
                                             {url:downloadId.url}, 
                                             function(response) 
                                             {
                    console.log(chrome.runtime.lastError);
                    console.log(response);
                    }
                );
        }
    }

}) 
```

将 manifest.json 和 bg.js 放在一个文件夹中，并在 chrome://extensions 下的开发人员模式下将其加载为 chrome 中的 Unpacked 扩展

从 chrome://extensions 页面获取扩展的 ID。

接下来是扩展和 shell 脚本之间的桥梁。

文件：com.hcs.jnlplauncher.json

```
{
  "name": "com.hcs.jnlplauncher",
  "description": "JNLP Launcher",
  "path": "/usr/local/bin/jnlp-launcher",
  "type": "stdio",
  "allowed_origins": [
    "chrome-extension://iacomlhfiphkdfjjjmlgckdkhmkhkibe/"
  ]
} 
```

将它放在“~/.config/google-chrome/NativeMessagingHosts”下（对于 linux）。有关 Windows 位置的信息，请参见谷歌。

将上一步中的扩展 ID 放入该文件中。

确保 javaws 在路径中。（该 chrome 运行）。链接到 /usr/bin 是最简单的确定方法。

单击一个 jnlp 文件并享受！没有提示，没有 ClickToOpen，也没有文件保存在 Downloads 目录中。！

如果有人想将这一切捆绑到一个很好的打包安装程序和/或 chrome 扩展中，请随意。请相信我（Chris Holt -- hobie744@gmail.com）并告诉我。乍一看，我看不出如何将 NativeMessagingHosts 块捆绑到扩展中。也许它必须是2件？这是我在 Chrome 扩展和 NativeMessaging 中的第一次冒险。大部分代码来自 API 文档和示例，并且可能存在一些错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T03:09:05.507

使用使用 web start 部署的嵌入式小程序启动 JNLP。

1.  从接受图像路径（图标）和按钮字符串的基于 Swing 的 JApplet 开始。使用 JWS 部署小程序（嵌入在链接所在的网页中）。
2.  当用户单击按钮时，使用该[`BasicService.showDocument(URL)`](http://docs.oracle.com/javase/7/docs/jre/api/javaws/jnlp/javax/jnlp/BasicService.html#showDocument%28java.net.URL%29)方法启动 JWS（基于框架）应用程序。正如我在[演示中指出的那样。基本服务的](http://pscode.org/jws/api.html#bs)..

    > ..在 Java 6+ 中，显示另一个 web 启动文件的调用（例如`BasiceService.showDocument(another.jnlp))`，将**直接交给 JavaWS，**不会出现浏览器窗口。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-06T10:47:54.343

不幸的是，这是 Google Chrome 中[仍然存在](https://code.google.com/p/chromium/issues/detail?id=10877)的错误（/功能？） ，但它已部分修复：您现在可以自动打开 jnlp 文件，但它们仍保存到下载文件夹中

*   下载jnlp
*   在下载栏中右键单击并选择始终打开此类型的文件
*   点击 jnlp 现在直接启动它

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-15T07:17:29.727

这个示例（在 Swing 中嵌入 JavaFX 2）和文章是一个很好的示例，它们也适用于现代浏览器

示例[http://www.oracle.com/technetwork/java/javase/overview/javafx-samples-2158687.html](http://www.oracle.com/technetwork/java/javase/overview/javafx-samples-2158687.html)

文档：[https ://docs.oracle.com/javase/8/docs/technotes/guides/deploy/deployment_toolkit.html#BABIJEHC](https://docs.oracle.com/javase/8/docs/technotes/guides/deploy/deployment_toolkit.html#BABIJEHC)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-19T20:00:29.337

对于测试或网页抓取（当您无法更改或控制 jnlp 处理时），我通过 Selenium + Python 找到了一种解决方法（但类似的事情在 Java 或其他语言中也应该是可行的）。在 Python 中，我只需以编程方式单击 Chrome 中的通知以允许下载和安装 jnlp 文件（在 win32api 和 win32con 的帮助下，但在代码返工后，类似的方法也可以在 Linux 或 Mac 上工作）。您可以[在此处查看详细信息](https://stackoverflow.com/questions/65798335/selenium-how-to-handle-jnlp-issue-in-chrome-and-python)

# python - 在 Python 中使用 Nmap 时如何跳过 IP？

> ID：11679375
> 
> 赞同：0
> 
> 时间：2012-07-26T23:14:27.043
> 
> 标签：python, try-catch, nmap, network-scan

我在 python 中使用 nmap，并尝试使用文本文件扫描网络。所有扫描范围都在一个文本文件中，如下所示：

192.168.1.1-100 192.168.1.120-200 ...

不过，假设扫描没有找到主机 192.168.1.3，因为它处于脱机状态。程序会崩溃。有没有办法可以解决这个崩溃？我可以使用 Try / Catch 之类的东西吗？

* * *

```
counter = 0
with open('range.txt') as rangefile:
    content = rangefile.readlines()

while counter < len(content):
    nm = nmap.PortScanner()
    #define the nmap scan here
    nm.scan(content[counter], '517', '-sU -sT') 
```

这是代码示例

```
 File "c:\...\nmapscan.py", line 63, in <module> therehost = Host.objects.get(ipv4_address=hosts) va.assessment.models.DoesNotExist: Host matching query does not exist. Lookup parameters were {'ipv4_address': u'134.250.16.103'} 
```

这是错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T23:51:27.010

`nmap`需要两个参数来排除。`--exclude`获取主机名并`--excludefile`获取包含需要排除的主机名的文件。根据需要使用其中之一。有关设置目标的更多信息，请参见[手册](http://nmap.org/book/man-target-specification.html)页。

这是我的测试结果-

```
Python 3.2.3 (default, May  3 2012, 15:54:42) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import nmap
>>> nm=nmap.PortScanner()
>>> nm.scan('134.250.16.103','517', '-sU -sT')
{'nmap': {'scanstats': {'uphosts': '0', 'timestr': 'Sat Jul 28 12:54:27 2012', 'downhosts': '1', 'totalhosts': '1', 'elapsed': '3.06'}, 'scaninfo': {'udp': {'services': '517', 'method': 'udp'}, 'tcp': {'services': '517', 'method': 'connect'}}, 'command_line': 'nmap -oX - -p 517 -sU -sT 134.250.16.103'}, 'scan': {'134.250.16.103': {'status': {'state': 'down', 'reason': 'no-response'}, 'hostname': ''}}}
>>> 
```

您可以使用 try-catch-

```
try:
   nm.scan(content[counter], '517', '-sU -sT')
except:
   #handle exception... 
```

由于您不知道哪些服务器已关闭，因此您可以在继续进行 nmap 扫描之前 ping 服务器。

# uitableview - 我的 UITableView 是如何实例化自己的单元格的？

> ID：11679377
> 
> 赞同：0
> 
> 时间：2012-07-26T23:14:28.730
> 
> 标签：uitableview

`dequeueReusableCellWithIdentifier:`正在实例化笔尖？？

![堆栈跟踪](../Images/f1fcb453c95d8b1a0f941a9fff5ab7c1.png)

我问是因为它似乎实例化了比一次在屏幕上显示的更多的单元格。（虽然*少于*表中的总行数）

我正在使用[FRCTableViewDataSource](https://github.com/freerangecode/FRCTableViewDataSources)将我的表视图绑定到 Core Data 中的一些 Artist 对象。不过我认为这并不重要，它只是充当香草表视图的数据源。

这是他们对 cellForRowAtIndexPath 的实现（我添加了日志语句）

```
- (UITableViewCell *)tableView:(UITableView *)tv cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    NSString *cellIdentifier = nil;
    Class theCellClass = [self cellClassAtIndexPath:indexPath];
    if ([theCellClass isSubclassOfClass:[FRCTableViewCell class]])
        cellIdentifier = [theCellClass reuseIdentifier];
    NSLog(@"%@", cellIdentifier);
    UITableViewCell *cell = [tv dequeueReusableCellWithIdentifier:cellIdentifier];
    NSLog(@"%@", cell);

    ...

    return cell;
} 
```

这是我对 awakeFromNib 的实现

```
- (void)awakeFromNib
{
    NSLog(@"waking");
} 
```

控制台输出如下所示：

```
ArtistTableViewCell
waking
<ArtistTableViewCell: 0xc678ad0; baseClass = UITableViewCell; frame = (0 0; 295 50); opaque = NO; autoresize = RM+BM; layer = <CALayer: 0xc6789f0>> 
```

TL;DR 我的表格视图比您的表格视图更具主动性。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T08:31:35.773

您是否在单元格的笔尖中正确设置了重用标识符？如果没有，您每次都会得到一个新单元格，因为重用 ID 不匹配。

否则，是的，如果没有任何东西可以出队，这个版本的出队将实例化一个笔尖。从那里，它将创建您的单元格实例，从 nib yadyadayada 调用 awake。

# c# - LINQ 哪里在哪里

> ID：11679380
> 
> 赞同：1
> 
> 时间：2012-07-26T23:14:50.287
> 
> 标签：c#, linq, web-services, boolean

所以我有点卡在下面的 linq 语句上，

```
 public void ReturnHire(string carregistration, string hirefromdate, string hiretodate)
        {
            var result = customermembers.Where(c => c.CustomerCarType.Where(n => String.Equals(n.CarRegistration, carregistration)).FirstOrDefault(); // this line
            if (result != null)
            {
                customermembers.ForEach(c => c.CustomerHireDate.RemoveAll(cs => cs.HireFromDate == hirefromdate && cs.HireToDate == hiretodate));
                customermembers.ForEach(c => c.CustomerCarType.RemoveAll(cs => cs.CarRegistration == carregistration));
            }
        } 
```

我的 xml 看起来像这样：

```
<ArrayOfCustomer>
    <Customer>
        <CustomerID>1</CustomerID>
        <FirstName>G</FirstName>
        <LastName>Graam</LastName>
        <Age>27</Age>
        <CustomerHireDate>
            <HireDate>
                <HireFromDate>15.07.2012</HireFromDate>
                <HireToDate>29.07.2012</HireToDate>
            </HireDate>
        </CustomerHireDate>
        <CustomerCarType>
            <CarType>
                <CarRegistration>IAWB-OOTO</CarRegistration>
            </CarType>
        </CustomerCarType>
    </Customer>
</ArrayOfCustomer> 
```

在我的客户端，客户要“归还”车辆，对我来说，这基本上只是从日期和日期中删除租用，并从客户内部删除注册号。但这是我必须只用注册号进行删除的问题，所以我试图在 where 子句中做一个 where 但它说我不能将 CarType 隐式转换为 bool。

我的网络服务有这些列表：

```
 List<Customer> customermembers = new List<Customer>();
        List<HireDate> hiredates = new List<HireDate>();
        List<CarType> cartypes = new List<CarType>(); 
```

我只是觉得`customermembers where customer car type where rehistration number equals mystring`会很好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T23:23:47.523

由于您实际上并未`result`在 if 块中使用，因此您可以这样做：

```
 public void ReturnHire(string carregistration, string hirefromdate, string hiretodate) 
    { 
        if (customermembers.Any(c => c.CustomerCarType.Any(n => String.Equals(n.CarRegistration, carregistration)))
        { 
            customermembers.ForEach(c => c.CustomerHireDate.RemoveAll(cs => cs.HireFromDate == hirefromdate && cs.HireToDate == hiretodate)); 
            customermembers.ForEach(c => c.CustomerCarType.RemoveAll(cs => cs.CarRegistration == carregistration)); 
        } 
    } 
```

`Any`如果至少有一个元素满足谓词，则返回 true。

然而，这并不是非常有效，因为您要迭代列表三次；你应该只迭代一次。我会发布一个示例，但我认为您的代码中有一个错误，我不想重复它。考虑使用相同的hiredfromdate 和hiredtodate 进行单独注册的不同客户。您的代码将删除尚未归还汽车的客户的 CustomerHireDate。

但是，您很可能打算`result`在 if 块中使用，这应该可以修复错误：

```
 public void ReturnHire(string carregistration, string hirefromdate, string hiretodate) 
    { 
        var result = customermembers.Where(c => c.CustomerCarType.Any(n => String.Equals(n.CarRegistration, carregistration));
        foreach (var customermember in result)
        { 
            customermember.CustomerHireDate.RemoveAll(cs => cs.HireFromDate == hirefromdate && cs.HireToDate == hiretodate); 
            customermember.CustomerCarType.RemoveAll(cs => cs.CarRegistration == carregistration); 
        } 
    } 
```

请记住，`Where`这不会更改原始集合，因此您需要迭代`result`以获取过滤后的对象集。

# xcode - MainWindow.xib 添加 ViewControllers

> ID：11679381
> 
> 赞同：0
> 
> 时间：2012-07-26T23:14:57.613
> 
> 标签：xcode, interface-builder

我正在使用 Xcode 3.2。当我通过“新文件”将它们添加到 Interface Builder 中的 MainWindow 面板时，如何添加更多 ViewController。例如，在这张图片中，底部的 2 个方块是默认存在的。如何添加类似的来代表我刚刚添加的新 ViewController。

![在此处输入图像描述](../Images/6c1045064761de0fc9a05dd762114105.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T23:18:52.323

每个笔尖只能有 1 个视图控制器。为它和你想要的任何其他视图控制器创建一个不同的 nib，或者开始使用故事板（这需要你更新 Xcode）。

# entity-framework - 重置实体框架迁移

> ID：11679385
> 
> 赞同：340
> 
> 时间：2012-07-26T23:15:46.583
> 
> 标签：entity-framework, database-migration, entity-framework-migrations

我已经搞砸了我的迁移，我`IgnoreChanges`在初始迁移中使用过，但是现在我想删除我的所有迁移并从具有所有逻辑的初始迁移开始。

当我删除文件夹中的迁移并尝试`Add-Migration`它并没有生成完整文件时（它是空的 - 因为自上次迁移以来我没有进行任何更改，但现在已删除）。

是否有任何*禁用迁移*命令，所以我可以重新运行`Enable-Migrations`？

* * *

## 回答 #1

> 赞同：487
> 
> 时间：2012-07-26T23:15:46.583

你需要 ：

1.  删除状态：删除项目中的迁移文件夹；和
2.  删除`__MigrationHistory`数据库中的表（可能在系统表下）；然后
3.  在包管理器控制台中运行以下命令：

    ```
    Enable-Migrations -EnableAutomaticMigrations -Force 
    ```

    有或没有使用`-EnableAutomaticMigrations`

4.  最后，您可以运行：

    ```
    Add-Migration Initial 
    ```

* * *

## 回答 #2

> 赞同：173
> 
> 时间：2014-03-17T10:26:38.443

问题：你搞砸了你的迁移，你想在不删除现有表的情况下重置它。

问题：您无法使用数据库中的现有表重置迁移，因为 EF 想要从头开始创建表。

该怎么办：

1.  从 Migrations_History 表中删除现有迁移。

2.  从迁移文件夹中删除现有迁移。

3.  运行添加迁移重置。这将在您的 Migration 文件夹中创建一个迁移，其中包括创建表（但它不会运行它，因此不会出错。）

4.  您现在需要在 MigrationHistory 表中创建初始行，以便 EF 拥有当前状态的快照。如果您应用迁移，EF 将执行此操作。但是，您不能应用刚刚进行的迁移，因为数据库中已经存在表。所以进入迁移并注释掉“Up”方法中的所有代码。

5.  现在运行更新数据库。它将应用迁移（而不是实际更改数据库）并在 MigrationHistory 中创建快照行。

您现在已重置迁移，可以继续进行正常迁移。

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2014-04-03T16:39:17.770

怎么样

```
Update-Database –TargetMigration: $InitialDatabase 
```

在包管理器控制台中？它应该将所有更新重置为其早期状态。

参考链接：[Code First Migrations - 迁移到特定版本（包括降级）](http://msdn.microsoft.com/en-us/data/jj591621#specific)

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2017-03-14T09:12:41.870

要解决此问题，您需要：

1.  删除迁移文件夹中的所有 *.cs 文件。

2.  删除数据库中的 _MigrationHistory 表

3.  跑`Enable-Migrations -EnableAutomaticMigrations -Force`

4.  跑`Add-Migration Reset`

然后，在`public partial class Reset : DbMigration`课堂上，您需要注释所有现有的和当前的表：

```
public override void Up()
{
// CreateTable(
// "dbo.<EXISTING TABLE NAME IN DATABASE>
// ...
// }
...
} 
```

**如果你错过了这一点，一切都会失败，你必须重新开始！**

5.  现在运行`Update-Database -verbose`

如果您正确地完成了上述操作，这应该是成功的，现在您可以正常进行了。

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2018-08-05T08:29:45.580

在实体框架核心中。

1.  从迁移文件夹中删除所有文件。

2.  输入控制台

    ```
    dotnet ef database drop -f -v
    dotnet ef migrations add Initial
    dotnet ef database update 
    ```

3.  （或用于包管理器控制台）

    ```
    Drop-Database -Force -Verbose
    Add-Migration Initial
    Update-Database 
    ```

UPD：仅当您不关心当前的持久数据时才这样做。如果你这样做，请[使用 Greg Gum 的答案](https://stackoverflow.com/a/22451879/7313872)

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2018-09-25T22:52:11.377

考虑到当我们在 .NET Core 中搜索 EF 时仍然会出现这种情况，我将在此处发布我的答案（因为它一直困扰着我）。请注意，EF 6 .NET 版本有一些细微之处（没有初始命令，您需要删除“快照”文件）

（在 .NET Core 2.1 中测试）

以下是步骤：

1.  删除 `_efmigrationhistory`表。
2.  在整个解决方案中搜索名称中包含**Snapshot**的文件，例如`ApplicationDbContextSnapshot.cs`，然后将其*删除*。
3.  重建您的解决方案
4.  跑`Add-Migration InitialMigration`

请注意： **您必须删除所有快照文件**。我花了无数个小时来删除数据库......如果你不这样做，这将产生一个空迁移。

此外，在 #3 中，您可以随意命名您的迁移。

这里有一些额外的资源： [asp.net CORE Migrations generated empty](https://stackoverflow.com/questions/45915473/asp-net-core-migrations-generated-empty)

[重置 Entity Framework 7 迁移](https://stackoverflow.com/questions/32009617/reset-entity-framework-7-migrations)

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2020-01-27T04:55:18.920

**删除****`Migrations`**文件夹，然后**`Clean`**删除**`Rebuild`**项目。这对我有用。在清理和重建之前，它说迁移已经存在，因为在它的缓存内存中，它还没有被删除。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2015-10-21T11:17:55.893

在 EntityFramework 6 请尝试：

```
Add-Migration Initial 
```

为了更新初始迁移文件。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-08-24T13:39:01.383

我的问题原来是我手动删除了 Migrations 文件夹。我这样做是因为我想备份内容，所以我只是将文件夹拖出项目。我后来通过将其放回（在制作备份副本后）解决了这个问题，然后通过在解决方案资源管理器中右键单击它并从弹出菜单中选择删除来删除迁移文件夹。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-11-23T11:51:18.990

此方法不需要删除`__MigrationHistory`表，因此您不必在部署时将手放在数据库上。

1.  从 Migrations 文件夹中删除现有的迁移。
2.  在包管理器控制台中运行`Add-Migration ResetMigrations`
3.  清除方法中的迁移历史记录`Up()`：

```
/// <summary>
/// Reset existing migrations by cleaning the __MigrationHistory table
/// and creating a new initial migration with the current model snapshot.
/// </summary>
public partial class ResetMigrations : DbMigration
{
    public override void Up()
    {
        Sql("DELETE FROM [dbo].[__MigrationHistory]");
    }

    public override void Down()
    {
    }
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-11-12T21:53:53.227

在 EF6 中

1.  删除“迁移”文件夹中的所有文件...但不是“初始创建”或“配置”。
2.  删除数据库。
3.  现在运行`Add-Migration Initial`。
4.  现在您可以“更新数据库”，一切都会好起来的。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-03-31T02:02:28.330

2020 年更新 => 重置实体框架迁移

```
Add-Migration Initial -Context ApplicationDbContext 
```

**ApplicationDbContext** => 你的上下文。

但是，如果您只需要更新存在的身份模式，请尝试： [https ://stackoverflow.com/a/59966100/4654957](https://stackoverflow.com/a/59966100/4654957)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-12-02T15:41:49.800

**在 Net Core 3.0 中：**

我无法找到*重置迁移*的方法。

我也遇到了迁移失败的问题，这里提供的答案对我不起作用。我有一个 .Net Core 3.0 Web API，在上个月的某个地方，我直接编辑了数据库。是的，我做了一件坏事，坏事。

此处建议的策略导致包管理器控制台中出现许多错误：

*   该名称的迁移已存在
*   找不到快照
*   “力”不是公认的参数

诚然，我可能错过了一个步骤或错过了清除正确的文件，但我发现有一些方法可以在没有太多蛮力的情况下清理它：

*   按名称从 PMC 中删除迁移，以创建相反的顺序，直到并包括损坏的迁移
*   Add-Migration 创建一个新的迁移，这将是最后一次良好迁移到当前架构之间的增量

现在，当 Web API 以空数据库启动时，它会正确创建所有表和属性以匹配实体模型。

！

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-10-14T11:15:33.050

VSC（Visual Studio 代码）——.Net Core

1.删​​除状态：删除你项目中的migrations文件夹；

2.删除数据库中__MigrationHistory的记录；

3.`dotnet ef database drop -v`那么您确定要删除服务器 '.' 上的数据库 '<your-database' 吗？(y/N) 写“N”

4.dotnet ef migrations add Initial 然后将`20211014110429_initial`类的代码写入__MigrationHistory的

* * *

## 回答 #15

> 赞同：-2
> 
> 时间：2016-08-13T09:50:28.190

```
Enable-Migrations -EnableAutomaticMigrations -Force 
```

# ruby-on-rails - 是否可以查找用户通过我的应用发布的提要帖子？

> ID：11679387
> 
> 赞同：0
> 
> 时间：2012-07-26T23:15:53.667
> 
> 标签：ruby-on-rails, facebook, oauth-2.0, feed

我想使用 Graph API 来确定提要帖子 ID 是否有效。但是，当我尝试正常的 Graph 调用时，它总是返回一个空数组。我是否需要使用应用程序 oauth 令牌或其他东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T23:22:36.867

您需要一个具有**read_stream**权限的访问令牌来检查提要是否真的存在。

但是您只能阅读来自当前用户或与他或他的朋友相关的提要。

# android - 如何修改应用程序崩溃对话框？

> ID：11679391
> 
> 赞同：0
> 
> 时间：2012-07-26T23:16:18.040
> 
> 标签：android

我正在阅读谷歌提供的[写作风格指南](http://developer.android.com/design/style/writing.html)，直到我看到这个：

![来自网站的快照](../Images/a666c86a8e0c02e1b6d4217e89c2aba9.png)

我从这个例子中了解到的是：您可以修改应用程序崩溃时出现的崩溃消息。这是真的？是否可以更改崩溃的对话框文本？或者它只是一个不真实的例子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T23:45:00.493

我认为这是谷歌自己通过各种版本改变的。在 GingerBread 中，我会得到“错误”的强制关闭对话框，而在 ICS 中是“正确”的。

他们现在将其用作其他开发人员的示例——从其他人的“错误”中学习。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T00:02:32.287

> 这是真的？

通过建立一个顶级异常处理程序，是的。见`Thread`和`setDefaultUncaughtExceptionHandler()`。

# java - annotation 表示另一个注释

> ID：11679393
> 
> 赞同：7
> 
> 时间：2012-07-26T23:16:22.730
> 
> 标签：java, annotations

是否可以有一个自定义注释与另一个注释做同样的工作？

例如，如果我写 @MyCustomAnnotation 就像我写 @override 一样！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T23:22:34.957

绝对不支持使用注释进行继承。请参阅：[java 中是否有类似 Annotation Inheritance 的东西？](https://stackoverflow.com/questions/7761513/is-there-something-like-annotation-inheritance-in-java)

因此，如果没有这个，除非某些框架选择围绕其注释处理提供可扩展性，否则实现这样的效果会遇到很多麻烦。

# matlab - 对于具有组合的结构的 for 循环

> ID：11679394
> 
> 赞同：0
> 
> 时间：2012-07-26T23:16:23.337
> 
> 标签：matlab, matrix, combinatorics, cell-array

我想创建一个目标向量。我遇到了一些问题。我想要的是从 T 到 Target 的 18 个对象的 3 的所有组合。但它无法产生这种组合。它单独适用于每个组合，但对我来说“for循环”似乎不起作用。

```
% T is a structure of 18 different sized objects  

% idx is index of size 816*3 double 
idx = combnk(1:18,3);    

% TNames is cell of size 18*1 
TNames = fieldnames(T);  

for i = 1:length(idx) 

  Target(:,:,i) = [T.(TNames{idx(i,1)}) ; 
                   T.(TNames{idx(i,2)}) ; 
                   T.(TNames{idx(i,3)}) ]; 

end 
```

当我从 Target(:,:,i) 中删除 (:,:,i) 并在 T.(TNames{idx( i,1)})..T.(TNames{idx(i,2)}) 和 T.(TNames{idx(i,3)})

我尝试了不同的替代方案，但我无法解决这个问题。我什至能够创建一个目标 <3*859 cell>，但神经网络不能接受它。神经网络需要 <1*859 cell> 才能正常工作。那么，有人可以帮我解决这个问题吗？

我也试过这个：

T 是一个 <1*1 结构>，其中我有 18 个 fints（金融时间序列）对象，每个对象有 859 行，并且列数不同（每个 fints 对象中的列从 1 到 4 列不等）..我已经转换了所有这些 fints 对象通过 fts2mat 命令到矩阵。

现在我有新的矩阵 <32*859 double> 在每列范围内都有可识别的 fints 对象。即我可以确定每列中的前四个条目属于第一个 fints 对象，接下来的 3 个条目属于第二个 fints 对象，依此类推。

我想在一个新矩阵中抓取 3 个 fints 对象（共 18 个）的所有组合（816 个组合），最终可以将其转换为 <859*1 cell> 或 <1*859 cell> （更准确地说) 将其提供给神经网络进行适当的训练......

这个任务必须通过索引来完成，因为 3 的每个组合都应该包含 3 个 fints 对象条目，每个 fints 对象都有不同的编号。的列。而且我每次都必须在我的 816 个组合中对每个 fints 对象的所有列进行装扮，并将这 3 个 fints 对象连接起来。获取每个 fints 对象的所有列并将其放在行中。

简而言之，我应该有 <1*859 cell> 其中有 3 个 fints 对象的 816 种不同组合（在我的 T 结构中），每个组合应该有 3 个 fints 对象，每个组合应该是 <1*859 单元格> 将其提供给神经网络进行适当的训练。由于NN不采用不同维度的单元格..

我提前谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T01:15:02.573

一个例子来说明这个问题：

```
%# structure with 4 "differently sized objects"
T = struct('a',1, 'b',rand(2,2), 'c','string', 'd',{{1 2}})

%# what you are trying to do in the loop is:
[T.a T.b T.c]             %# <---- ERROR! 
```

这会抱怨：

```
Error using horzcat
CAT arguments dimensions are not consistent. 
```

MATLAB 矩阵/向量只能存储相同类型的一致元素。这里一个是标量，另一个是 2×2 矩阵，最后一个是字符串...

您想使用元胞数组：

```
TNames = fieldnames(T);
idx = nchoosek(1:numel(TNames),3);

C = cell(size(idx,1),1);
for i=1:size(idx,1)
    C{i} = {T.(TNames{idx(i,1)}) T.(TNames{idx(i,2)}) T.(TNames{idx(i,3)})};
end 
```

例如，最后一个组合是：

```
>> C{end}
ans = 
    [2x2 double]    'string'    {1x2 cell} 
```

对应于`{T.b T.c T.d}`

# asp.net-mvc - 按规则显示格式

> ID：11679401
> 
> 赞同：2
> 
> 时间：2012-07-26T23:17:11.433
> 
> 标签：asp.net-mvc, razor, dry

我非常相信只针对规则的例外情况进行开发，所以我正在研究如何避免：用 DisplayFormat 属性装饰每个数字；为每个标签添加属性；等等

例如，如果我显示一个表格，我希望每个小数点右对齐，逗号分隔，按规则保留两位小数，如果规则发生变化，这似乎需要同时更改 html 和模型。关于如何攻击这个选项？在检查规则存储库的控制器中生成 HTML？DisplayFor 扩展方法 + 样式表 + 某种覆盖样式表的方法？

```
@foreach ( var item in Model )
{ 
    <tr>
        <td>@Html.DisplayFor(mi => item.ItemName)</td>
        <td align="right">@Html.DisplayFor(mi => item.NewPrice)</td>
        <td>@Html.DisplayFor(mi => item.CurrentPrice, "Decimal")</td>
        <td align="right">@Html.DisplayFor(mi => item.MyPrice)</td>
        <td align="right">@Html.DisplayFor(mi => item.Markup)</td>
    </tr>
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T16:54:46.453

我想你想在这里使用的是 DisplayTemplates。

您将在 Views\Shared\DisplayTemplates 文件夹中保存类似于以下部分视图的内容（对于 VB 语法感到抱歉）：

```
@ModelType Nullable(Of Decimal)
@Code
    Dim value As String

    value = If(ViewData.TemplateInfo.FormattedModelValue Is Nothing, "", ViewData.TemplateInfo.FormattedModelValue)
    value = String.Format("{0:C}", value)

End Code
<div class="displayCurrency">@Html.Encode(value)</div> 
```

然后，此代码将用于呈现您的 DisplayFor。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-09T14:02:13.133

Ben 的 c# 答案的修改版本。如果模型中没有指定“DisplayFormat”，则使用默认货币。我在 Views\Shared\DisplayTemplates 文件夹中创建了 double.cshtml：

```
@model double?
@{
    if (ViewData.ModelMetadata.DisplayFormatString == null)
    {
        <span class="currency">@String.Format("{0:C}", @Model)</span>
    }
    else
    {
        @String.Format(ViewData.ModelMetadata.DisplayFormatString, @Model);
    }
} 
```

# asp.net-mvc - MVC 4 Jquery Ajax 调用返回登录页面 html

> ID：11679404
> 
> 赞同：0
> 
> 时间：2012-07-26T23:17:31.300
> 
> 标签：asp.net-mvc, jquery, authorization

这可能是设计使然，也可能是我正在做或没有做的事情。

我有一个 AccountController 正在使用 Authorize 属性的 MVC 4 应用程序。当用户在登录页面上时，一旦他们登录就会使用一个出纳员发布日期。我试图在名称字段上捕获更改事件，这工作正常，并触发一个 Jquery 函数来获取发行日期。

这是 JQuery Ajax 函数：

```
function update_issue_date() {
var userName = $('#UserName').val();

$.ajax({
    type: 'GET',
    url: '/Account/GetIssueDate',
    async: true,
    data:
    {
        userName: userName
    },
    success: function(data) {
        $('#IssueDate').val(__format_date_for(new Date(data.issueDate)));
    }
}); 
```

在 AccountController 我有以下操作：

```
 [AllowAnonymous]
    public ActionResult GetIssueDate(string userName)
    {
        var issueDate = DateTime.Now.Date;

        if (userName.Length > 0)
        {
            var user = userRepo.GetUser(userName);
            //var user = user_repository.get_all().FirstOrDefault(x => x.user_name == userName);
            var currentDate = DateTime.Now.Date;

            issueDate = (user == null || user.IssueDate < currentDate) ? currentDate : user.IssueDate;
        }

        return Json(new { issueDate = issueDate.ToShortDateString() }, JsonRequestBehavior.AllowGet);
    } 
```

这就是发生的情况，如果我在 web.config 中禁用了 Authorize 内容，则此功能按原样工作，应返回正确的发布日期。但是，如果我启用了 Authorize things，那么 GetIssueDate Action 似乎不会被触发。我得到了登录页面的 HTML。

我认为即使我在此操作上具有 [AllowAnonymous] 属性，应用程序在从 Jquery 函数调用时似乎忽略了这一点，并且不允许它触发。

有没有办法解决这个问题，或者可能有另一种方法来做我想做的事情？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T05:52:51.583

您似乎正在使用您的 web.config 来控制授权。这不是您应该在 ASP.NET MVC 应用程序中执行的操作。在 ASP.NET MVC 中，您使用该`[Authorize]`属性来装饰需要授权的控制器/操作。及其对应物：`[AllowAnonymous]`属性。

因此，从您的 web.config 中删除所有`<authorization><deny users="?" /></authorization>`内容，然后如果您希望网站中的所有操作都需要身份验证，除了那些用 装饰的操作，`[AllowAnonymous]`您可以将该`[Authorize]`属性注册为全局操作过滤器。这是在`~/App_Start/FilterConfig.cs`文件中完成的：

```
public class FilterConfig
{
    public static void RegisterGlobalFilters(GlobalFilterCollection filters)
    {
        filters.Add(new AuthorizeAttribute());
        filters.Add(new HandleErrorAttribute());
    }
} 
```

当然，在 web.config 中，您需要保留`authentication`指示 ASP.NET 您正在使用表单身份验证的部分：

```
<authentication mode="Forms">
    <forms loginUrl="~/Account/Login" timeout="2880" />
</authentication> 
```

# iphone - 响应 UIGestureRecognizer 的可滑动 UIView 菜单

> ID：11679405
> 
> 赞同：0
> 
> 时间：2012-07-26T23:17:37.943
> 
> 标签：iphone, ios, uiview, uiswipegesturerecognizer

所以我试图用这个视图做的就是让它让我可以上下滑动 UIView (menuView) 进出屏幕。所以在 storyboard/IB 中我放置了一个 UIView 并将它连接到文件所有者和所有爵士乐。然后我进入程序下面的代码。问题是，当笔尖加载时，它没有将 UIView 放在它应该放在首位的位置，然后滑动不起作用。我尝试了这种用按钮编程的方法，效果很好。提前感谢您在该主题上可能获得的任何帮助。

.h 文件

```
UIView *menuView;
}
@property (strong, nonatomic) IBOutlet UIView *menuView; 
```

.m 文件

```
@synthesize menuView;

- (void)viewDidLoad
{
[super viewDidLoad];

// Do any additional setup after loading the view.

UISwipeGestureRecognizer *swipeGesture = [[UISwipeGestureRecognizer alloc]     initWithTarget:self action:@selector(swipe:)];
[swipeGesture setDirection:UISwipeGestureRecognizerDirectionDown];
[self.view addGestureRecognizer:swipeGesture];

menuView = [[UIView alloc] initWithFrame:CGRectMake(0, -80, 320, 80)];
[menuView setFrame:CGRectMake(0, -80, 320, 80)];

[self.view addSubview:menuView];
}

-(void)swipe:(UISwipeGestureRecognizer*)sender {
[UIView animateWithDuration:0.5 animations:^{
    [menuView setFrame:CGRectMake(0, 0, 320, 80)];
}];
    }

 - (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    // Custom initialization
}
return self;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T23:43:22.930

您已将 menuView 设置为 storyBoard/IB 插座。这意味着 xib/nib/storyboard 正在执行 alloc-init 和初始框架。所以你应该删除这一行：

```
menuView = [[UIView alloc] initWithFrame:CGRectMake(0, -80, 320, 80)]; 
```

您还可以从中删除下一行`viewdidLoad`：

```
[menuView setFrame:CGRectMake(0, -80, 320, 80)]; 
```

那里是多余的。它已经由“initWithFrame”完成——它已经由 nib 完成。

另一方面，在笔尖中定位屏幕外的东西可能很困难。因此，您实际上可能会恢复该`setFrame:`行——但在**`viewWillAppear`**而不是`viewDidLoad`. *在 nib 完成它的工作后*`viewWillAppear`调用，所以 nib 不会妨碍您的重构，不会干扰您的重构。

 *进行这些更改，如果“所有爵士乐”包括将 menuView 连接到参考插座，那么您应该很高兴。*

# django - Django、模板、for 循环和循环

> ID：11679411
> 
> 赞同：5
> 
> 时间：2012-07-26T23:18:36.727
> 
> 标签：django, django-templates

（tl；底部的博士）

让我试着解释一下我想要完成的事情：我有一个二维数组，我想以某种方式显示它的内容。我想要“行”，每行最多可以显示三个“对象”，因为没有更好的词。所以我想遍历数组并在这个过程中创建我的 HTML。我的想法是：数组中的每个“三个”元素都应该打开“行”。每“三个中的三分之一”元素都应该关闭“行”。但是，如果 [inner] 数组中的最后一个元素不是“三之三”，它仍应关闭该行。因此，例如，如果我们有类似的东西`L=[ [0,1,2,3,4], [5,6,7] ]`，我想像这样显示它：

```
0  1  2
3  4

5  6  7 
```

这可能被标记为：

```
<div>0 1 2</div>
<div>3 4</div>
<div>5 6 7</div> 
```

我的第一个想法是简单地使用模运算符并查看每次迭代是否是连续的“第一个”、“第二个”或“第三个”，但 Django 模板不直接支持模数（稍后会详细介绍）。

所以我想出了这样的模板代码：

```
{% for x in L %}
 {% for y in x %}
  {% cycle '<div>' '' '' %}
   {{ y }}
  {% cycle '' '' '</div>' %}
 {% endfor %}<br/>
{% endfor %} 
```

这是一个好的开始。以上面的例子为例，`0`我们会打开一个 div，`1`什么都不做，`2`关闭 div，`3`打开它，然后`4`......好吧，它不会关闭，因为`4`不是“3 中的第三个” . 所以，虽然 Django 模板没有模数，但它们确实有一个 divisibleby 检查，所以我想出了额外的逻辑来说，如果我们点击 [inner] for 循环的最后一个元素，它也不能被 3 整除（所以我们没有重复关闭），然后关闭 div：

```
{% for x in z %}
 {% for y in x %}
  {% cycle '<div>' '' '' %}
   {{ y }}
  {% cycle '' '' '</div>' %}

  {% if forloop.last %}
  {% if forloop.counter|divisibleby:"3" %}
    <!-- Row Already Closed -->
  {% else %}
    </div>
  {% endif %}
  {% endif %}

 {% endfor %}<br/>
{% endfor %} 
```

这效果更好！现在，我用正确的标记完成了整个第一个内部数组。我的问题是：显然，当您超出内部 for 循环的范围时，Django 的循环功能不会重置。这意味着，我`5`在上面的例子中的号码没有像它应该的那样打开一个 div，它没有被识别为循环中的第一个。事实上，它实际上被识别为第三个，所以它正在关闭一个 div！

所以我不确定从这里去哪里。这似乎是[Django 中一个已知且未修复的问题](https://code.djangoproject.com/ticket/5908)。有人可以帮忙吗？

**tl;博士**我想取一个二维数组，例如`L=[ [0,1,2,3,4], [5,6,7] ]`并正确标记它一次不超过 3 个分组，并且不将多个数组中的任何元素组合在一起，如下所示：

```
0  1  2
3  4

5  6  7 
```

什么是模板代码，为什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-27T00:13:28.973

您应该能够使用`{% if forloop.counter0|divisibleby:"3" %}`来确定何时打开`<div>`标签，并`{% if forloop.last or forloop.counter|divisibleby:"3" %}`确定何时关闭`</div>`标签。

```
{% for x in z %}
 {% for y in x %}
  {% if forloop.counter0|divisibleby:"3" %}<div>{% endif %}
   {{ y }}
  {% if forloop.last or forloop.counter|divisibleby:"3" %}</div>{% endif %}
 {% endfor %}<br/>
{% endfor %} 
```

# iphone - iOS 6 发布后继续支持 iOS 4.x 是否值得？

> ID：11679412
> 
> 赞同：1
> 
> 时间：2012-07-26T23:18:49.577
> 
> 标签：iphone, ios

我正在为我的应用程序进行主要功能更新，并希望包含 iCloud、Core Data、ARC 和故事板等功能。 **问题是我没有关于有多少用户仍在运行 4.x 的数据。** 我意识到理想的解决方案是同时支持两者，并且只根据特定设备的版本选择可用的功能，但我的升级将非常大，这将非常困难。 **还有其他人有关于旧版本用户百分比的可靠数据吗？此外，是否建议将我的应用程序的 iOS 5+ 版本作为“应用程序 2.0”单独发布？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T00:31:39.817

...我公司的应用程序仍然支持 ios 3.x，虽然在 ios 3.x 及以下版本上只有 2%...但我们可以使用 3.x 及以下 API 完成绝大多数 ios4.0+ 效果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T23:40:18.957

这里有一篇文章供参考。

[iOS5 上 80%](http://news.cnet.com/8301-13579_3-57450474-37/apple-365-million-ios-devices-sold-80-percent-running-ios-5/)

通过 OTA 更新，Apple 设备的升级速度通常非常快。今年年初创建一个仅限 iOS5 的应用程序的决定并不难，现在更是如此。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-26T23:32:01.397

我相信当有新的更新时，iOS 用户是升级最快的用户。另外我不知道是否可以接受为不同版本的 iOS 提供 2 个不同的应用程序。您可以做的是让应用程序检查应用程序正在运行的 iOS 版本，并排除较低版本不支持的功能。

找不到任何真正可靠的来源，但您可以查看一些更新统计信息。

[关联](http://www.gsmarena.com/developer_stats_show_quick_adoption_of_ios_51_by_users-news-4014.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T12:16:23.633

**ios 6 和 Xcode 4.5.x 的更改**

1.  Xcode 4.5.x（及更高版本）不**支持**生成 armv6 二进制文件。
2.  现在包括**iPhone 5/armv7s**支持。
3.  Xcode 4.5.x 或更高版本支持的最低部署目标是**iOS 4.3**。
4.  对 iPhone 的最低支持是**iPhone 3GS**或更高版本，因为早期版本使用 armv6。

# objective-c - 即使我不使用 ARC，我是否应该使用“强”？

> ID：11679420
> 
> 赞同：0
> 
> 时间：2012-07-26T23:19:43.373
> 
> 标签：objective-c

我知道这个问题有很多，但我发现的主要与它的揭幕有关，而且现在对它的了解更多。所以我想再问：

由于引入了 strong 关键字，有时当我让 XCode 为我生成属性代码时，它会使用“strong”，有时会使用“retain”。

我个人还没有采用 ARC，并且暂时不会用于学习目的。是否有理由在手动内存管理环境中使用任一关键字？我意识到，如果我这样做的话，使用 strong 可以更容易地移植到 ARC。据我了解，它们在功能上是相同的。

另外，您的答案是否也适用于弱与分配（但我知道它们并不完全相同）？

# php - 美元逃跑？付给我$$欠款

> ID：11679423
> 
> 赞同：1
> 
> 时间：2012-07-26T23:20:07.710
> 
> 标签：php, escaping

我遇到了一段代码，它在参数周围使用双引号执行打印。该参数包含一个似乎被美元符号转义的变量。这就是在php中的双引号内调用变量的方式吗？

`print("$$owed");`

这是源代码的完整块：

```
<html>

 <head>

 <title>Loans</title>

 </head>

 <body>

 <?php

 $interest_rate = .14;

 function YouOweMe($cost, $interest_rate) {

 $weekly_payment = ($cost*$interest_rate);

 print "You better pay me $$weekly_payment every week, or else!";

 }

<font color="#000000">YouOweMe($cost, $interest_rate);

 ?>

 </body>

 </html> 
```

我不得不去掉这些数字。很烦人。

无论如何，......对我来说没有意义的`$$owed`是应该这样做，什么？从包含字符串的单独变量创建一个新变量`'owed'`？这在任何情况下似乎都不实用。不`$$owed`只是在金额前得到一个美元符号吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T23:24:05.510

这是理解变量变量的示例：

```
<?php
   $var = "test";
   $test = "hey !";
   echo "$$var";   //$test
   echo "${$var}"; //hey !
   echo '$$var';   //$$var
?> 
```

根据评论编辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T23:23:10.610

在 PHP 中，变量`$`在用双引号定义的字符串中时会被转义。这不适用于单引号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T23:24:05.400

```
$string = "world"; 

echo "Hello ${string}"; 
#### outputs "Hello World" 
```

这就是您将变量放入字符串的方式（您需要双引号）。

你所拥有的是可变变量。`$foo`您可以通过在其中使用字符串来调用变量`foo`。

```
$string = 'foo';
$foo = 'hello world';
echo "I say, ${$string}"; 
```

将输出“你好世界。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T23:27:06.243

有几种方法可以在双引号内使用变量，一些常见的方法是

1.  `print("$owed")`将打印的值`$owed`

2.  `print("$$owed")`被称为“变量变量”（如前所述）

    ```
     $owed = "test";
     $test = 16;
     print("$$owed"); 
    ```

    将打印出“$test”。

3.  另一种用法是 的形式`print("${$owed}")`，它采用 的值`$test`并将其用作变量名。

我强烈建议您使用单引号并连接所需的变量，因为它可以节省评估变量的时间，例如：

```
$owed = 42;
print('The value is: ' . $owed); 
```

lg,

弗洛

# html - 在 HTML5 中，无论语言环境如何，日期和日期时间字段的值都会以规范格式返回吗？

> ID：11679424
> 
> 赞同：1
> 
> 时间：2012-07-26T23:20:08.180
> 
> 标签：html

如果我要访问`value`a `date`or`datetime`元素，无论语言环境如何，该值是否会以规范形式（例如：`YYYY-MM-DD`or `YYYY-MM-DD HH:MM:SS`）返回？我想这样的事情是必要的，而不是让开发人员处理不同的特定于语言环境的日期格式。HTML5 规范中是否有提到这一点的部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T23:32:26.910

我想我应该多搜索一点。根据[§4.10.1.5](http://www.whatwg.org/specs/web-apps/current-work/multipage/forms.html#input-author-notes)

> 然而，在某些地区，当呈现给用户时，时间通常以不同的方式表达。例如，在美国，使用带有上午/下午指示符的 12 小时制时钟仍然很常见，如“下午 2 点”。在法国，通常使用“h”字符将小时与分钟分开，例如“14h00”。
> 
> 日期也存在类似的问题，更复杂的是，即使是组件的顺序也不总是一致的——例如，在塞浦路斯，2003 年 2 月 1 日通常写为“1/2/03”，而在日本同一日期通常会写成“2003 年 02 月 01 日”——即使是数字，但语言环境不同，例如，使用什么标点符号作为小数分隔符和千位分隔符。
> 
> 因此，区分 HTML 和表单提交中使用的时间、日期和数字格式非常重要，这些格式始终是本规范中定义的格式（并基于完善的 ISO 8601 计算机可读日期和时间格式标准)，来自浏览器呈现给用户并被浏览器接受为用户输入的时间、日期和数字格式。
> 
> “在线”使用的格式，即在 HTML 标记和表单提交中，旨在实现计算机可读和一致，而与用户的区域设置无关。例如，日期总是以“YYYY-MM-DD”的格式书写，如“2003-02-01”。预计用户永远不会看到这种格式。
> 
> 然后，页面以有线格式给出的时间、日期或数字在显示给用户之前被转换为用户的首选表示形式（基于用户偏好或页面本身的区域设置）。**类似地，在用户使用他们喜欢的格式输入时间、日期或数字后，用户代理在将其放入 DOM 或提交之前将其转换回有线格式**。
> 
> **这允许页面和服务器上的脚本以一致的方式处理时间、日期和数字，而无需支持数十种不同的格式，同时仍然支持用户的需求**。

# java - Java - 试图暂停一个线程

> ID：11679428
> 
> 赞同：-1
> 
> 时间：2012-07-26T23:21:02.890
> 
> 标签：java, multithreading, synchronization

> **可能重复：**
> [Java 等待和通知：IllegalMonitorStateException](https://stackoverflow.com/questions/7126550/java-wait-and-notify-illegalmonitorstateexception)

有什么问题

```
 private final Object lock; 
public synchronized void run() {
    while (numItersCompleted < maxNumIters) {
        while (guiState == GuiState.PAUSED) {
            try {
                lock.wait(); // problematic line 
```

抛出：

```
java.lang.IllegalMonitorStateException
at java.lang.Object.wait(Native Method)
at java.lang.Object.wait(Object.java:502) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T23:23:06.947

你没有`synchronized`绕过锁。

```
public void run() {
    while (numItersCompleted < maxNumIters) {
        while (guiState == GuiState.PAUSED) {
            try {
                synchronized (lock) {
                    lock.wait(); // problematic line
                } 
```

我打算添加一个链接，但加里和我打赌

# ruby - Gitorious：git-poller 不会启动

> ID：11679429
> 
> 赞同：1
> 
> 时间：2012-07-26T23:21:05.823
> 
> 标签：ruby, gem, gitorious

我刚刚在我的服务器上安装了一个新的 gitorious，当我发现 git-poller 没有运行时想要对其进行测试。它也不想开始。

我遵循了本指南：[http://gitorious.org/gitorious/pages/DebianSqueezeInstallation](http://gitorious.org/gitorious/pages/DebianSqueezeInstallation)，我的系统是 Debian Squeeze 和 Ruby -v 说 ruby​​ 1.8.7

到目前为止，该指南中的所有内容都有效。系统已启动并正在运行，但我无法启动轮询器。所有轮询器写入日志的内容如下：

tmp/pids/poller.log

```
*** below you find the most recent exception thrown, this will be likely (but not certainly) the exception that made the application exit abnormally ***
#<MissingSourceFile: no such file to load -- user_auto_completions_helper>
*** below you find all exception objects found in memory, some of them may have been thrown in your application, others may just be in memory because they are standard exceptions ***
#<NoMemoryError: failed to allocate memory>
#<SystemStackError: stack level too deep>
#<fatal: exception reentered>
#<LoadError: no such file to load -- daemons>
#<TypeError: Expected a filter, an endpoint, a callable or a list of any of these.>
#<NameError: uninitialized constant ActiveMessaging>
#<MissingSourceFile: no such file to load -- user_auto_completions_helper> 
```

tmp/pids/poller.output

```
/home/clients/client1/web85/web/vendor/rails/activesupport/lib/active_support/dependencies.rb:443:in `load_missing_constant': uninitialized constant ActiveMessaging (NameError)
        from /home/clients/client1/web85/web/vendor/rails/activesupport/lib/active_support/dependencies.rb:80:in `const_missing'
        from /home/clients/client1/web85/web/vendor/rails/activesupport/lib/active_support/dependencies.rb:92:in `const_missing'
        from /home/clients/client1/web85/web/lib/gitorious/messaging/stomp_poller.rb:13
        from /var/lib/gems/1.8/gems/daemons-1.1.0/lib/daemons/application.rb:203:in `load'
        from /var/lib/gems/1.8/gems/daemons-1.1.0/lib/daemons/application.rb:203:in `start_load'
        from /var/lib/gems/1.8/gems/daemons-1.1.0/lib/daemons/application.rb:292:in `start'
    from /var/lib/gems/1.8/gems/daemons-1.1.0/lib/daemons/controller.rb:70:in `run'
    from /var/lib/gems/1.8/gems/daemons-1.1.0/lib/daemons.rb:143:in `run'
    from /var/lib/gems/1.8/gems/daemons-1.1.0/lib/daemons/cmdline.rb:112:in `call'
    from /var/lib/gems/1.8/gems/daemons-1.1.0/lib/daemons/cmdline.rb:112:in `catch_exceptions'
    from /var/lib/gems/1.8/gems/daemons-1.1.0/lib/daemons.rb:142:in `run'
    from script/poller:30 
```

我使用 ispconfig 作为网络服务器管理工​​具，这就是奇怪路径的来源。我改变了从howto到fit的所有路径。

有人有想法吗？如果需要，我可以提供更多材料，但我只是不知道什么有用。这是我关于 stackoverflow 的第一个问题，所以如果我没有做对所有事情，请不要开枪 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T22:32:28.053

经过大量阅读和反复试验（我从头开始大约 3 次，从源代码和 RVM 尝试 Ruby 1.9.2 和 REE）我尝试了另一个 howto [1]，它与第一个有一个很大的不同：它建议下载并安装 Rubygems 1.4.2 而不是 Rubygems 的 apt 版本。

起初我不想这样做，因为我担心它会破坏我的系统（该服务器上运行了很多其他的东西，包括 Redmine），但是在我重新安装了所有丢失的 gems 之后再次工作。

现在一切（Gitorious 和 Redmine）都在使用 Ruby 1.8.7 的 apt 版本和 Rubygems 1.4.2 的非 apt 版本。

[1] [http://cjohansen.no/en/ruby/setting_up_gitorious_on_your_own_server/](http://cjohansen.no/en/ruby/setting_up_gitorious_on_your_own_server/)

由于我偶然发现了另一个问题，希望是最后一个问题：我为我的标准 Web 用户安装了 gitorious（为了尊重 ISPConfig 的政策）并为存储库创建了一个新的 git-user。为了能够交换数据，我将两者都添加到同一个用户组并修复了权限。

我遇到的问题是 git poller 为他自己添加了新的存储库，这意味着“git:git”而不是“git:sharedgroup”。要解决此问题，您只需为 git 文件夹（在我的情况下为 /var/git）设置默认组 ID：

```
chgrp -R <group_name> /var/git
chmod -R g+s /var/git 
```

看起来上面的两个命令确实有效，但是添加一个新项目再次破坏了一切，因为 git-poller 为项目和存储库添加了一个文件夹，导致存储库文件夹再次拥有错误的所有者。

我（希望）通过更改我的 /etc/init.d/git-poller 脚本来解决这个问题

```
/bin/su - git -c "cd /var/www/git.mydomain.com/web;RAILS_ENV=production script/poller $@" 
```

至

```
/bin/su - git -c "newgrp <group_name> && cd /var/www/git.mydomain.com/web;RAILS_ENV=production script/poller $@" 
```

# c# - C# 发布到不同的服务器

> ID：11679431
> 
> 赞同：2
> 
> 时间：2012-07-26T23:21:26.770
> 
> 标签：c#, httpwebrequest, form-post

我正在使用 c# 并尝试将数据发布到另一台服务器上的表单中，该表单包括一个图像附件以及一些参数，例如：

名字 = 第一个姓氏 = 最后一个图像 = ImageFile.JPG

寻找一个如何构造一个方法来发送这个的例子我一直在研究 HttpWebRequest 但需要一个例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T04:17:03.570

我现在有这个工作 - 我的测试是使用 ASP.NET 托管的网页......但基本技术应该可以在任何地方工作。

手动发布到 Web 服务器可能会有些棘手。我总是从 HttpWatch 之类的好工具开始 - 我在页面上发布一个真实的帖子，然后使用该工具查看它发布的内容，查看发送的标题，并查看发送的 cookie。

在这种情况下，将标头中的内容类型设置为`multipart/form-data`并定义边界。然后查看流，您可以看到字节是如何发送到服务器的。

完成这些步骤后，您只需弄清楚如何从 c# 发送相同的字节。

此示例代码仅显示一个工作示例。显然，生产代码将采取一些措施更进一步：

1）它将首先连接以获得新的 __VIEWSTATE 和 __EVENTVALIDATION 参数，而不是像我在这里那样硬连线它们。

2）它会查看表单参数（fname，lname）并确认它们的名称。

3）它可能会寻找新的参数。

4）它可能`boundry`每次都会生成。不确定这个，但浏览器是这样做的。

5) 文件名不会硬连线。

6）可能有一种更有效的方法来创建最终字节数组。

这是代码：

```
 private void SimulatePost_Click(object sender, EventArgs e)
    {
        WebClient client = new WebClient();

        const string boundry = "---------------------------7dc2a722a12c8";

        string contentType = string.Format("multipart/form-data; boundary={0}", boundry);

        string postData = string.Format(@"--{0}
Content-Disposition: form-data; name=""__VIEWSTATE""

/wEPDwUKLTk2MDkyMzQyMw9kFgJmD2QWAgIDDxYCHgdlbmN0eXBlBRNtdWx0aXBhcnQvZm9ybS1kYXRhZGQLrqV5FQTzi8K9ogSJlS44c0L0Ou3+MaYfFPwjKPwjZQ==
--{0}
Content-Disposition: form-data; name=""__EVENTVALIDATION""

/wEWBAKXx6zsBALa1ffGCwK80PHQDQLurOv8AU7Jo8sYj9+E/zw7RsmFraAotTazyvQc7T2VseLqSwGO
--{0}
Content-Disposition: form-data; name=""ctl00$MainContent$fname""

jim
--{0}
Content-Disposition: form-data; name=""ctl00$MainContent$lname""

bob
--{0}
Content-Disposition: form-data; name=""ctl00$MainContent$picUpload""; filename=""C:\temp\small.JPG""
Content-Type: image/jpeg

", boundry);

        string endData = string.Format(@"
--{0}
Content-Disposition: form-data; name=""ctl00$MainContent$post""

--{0}--
", boundry);

        List<byte> postByteArray = Encoding.UTF8.GetBytes(postData).ToList();

        byte[] file = File.ReadAllBytes(@"C:\temp\small.JPG");

        postByteArray.AddRange(file);

        postByteArray.AddRange(Encoding.UTF8.GetBytes(endData));

        client.Headers.Add("Content-Type", contentType);

        client.UploadData("http://localhost:63247/Default.aspx", "POST", postByteArray.ToArray());
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T23:53:03.503

HttpWebRequest 的一个更简单的替代方法是[WebClient](http://msdn.microsoft.com/en-us/library/system.net.webclient%28v=vs.80%29.aspx)类。上传名称值对：

```
 using (var c = new WebClient())
        {
            var values = new NameValueCollection();
            values.Add("key1", "value1");
            c.UploadValues("http://www.acme.org/", "POST", values);
        } 
```

# php - 如何在 php Soap Client 请求期间处理多个 SOAP 错误？

> ID：11679432
> 
> 赞同：1
> 
> 时间：2012-07-26T23:21:29.907
> 
> 标签：php, soap-client, soapfault, soapexception

我有兴趣通过 php 的 soapClient 向 Web 服务进行肥皂调用，以从监测站获取水位。我想处理执行期间发生的两个肥皂错误。第一个故障如下：

```
SoapFault exception: [soapenv:Server.userException] java.rmi.RemoteException: We are sorry, but no data is available from this station at this time in C:\xampp\htdocs\NOAA\LogWriter.php:214 Stack trace: #0 C:\xampp\htdocs\NOAA\LogWriter.php(214): SoapClient->__soapCall('getWaterLevelRa...', Array, Array) #1 C:\xampp\htdocs\NOAA\LogWriter.php(188): getLevel('8531680', '20120726 15:19') #2 {main} 
```

如果某个时间的数据不可用，则该错误预计会在脚本期间发生多次。我需要捕捉到这个错误，以便告诉脚本重新尝试新的时间。我使用了一个 catch 块来做到这一点。

如果 web 服务未加载 wsdl 文件或服务器超时，我还需要捕获第二个故障。为了测试这一点，给了我的脚本一个错误的位置，以生成我之前收到的相同错误，如下所示：

```
Fatal error: Uncaught SoapFault exception: [WSDL] SOAP-ERROR: Parsing WSDL: Couldn't load from 'http://opendap.co-ops.nos.noaa.gov/axis/services/WaterLevelRawOneMin?wsdl' : Extra content at the end of the document in C:\xampp\htdocs\NOAA\LogWriter.php:210 Stack trace: #0 C:\xampp\htdocs\NOAA\LogWriter.php(210): SoapClient->SoapClient('http://opendap....', Array) #1 C:\xampp\htdocs\NOAA\LogWriter.php(171): getLevel('8531680', '20120726 12:35') #2 {main} thrown in C:\xampp\htdocs\NOAA\LogWriter.php on line 210 
```

第二个错误仍未被捕获并终止我的脚本。但是我需要抓住它并显示一条消息。

我已经发布了我的 php 函数，该函数在下面进行了肥皂调用。

谁能给我关于如何做到这一点的任何想法？

```
function getLevel($id, $date) {

    $client = new SoapClient("http://opendap.co-ops.nos.noaa.gov/axis/services/WaterLevelRawOneMin?wsdl", array('trace' => false));

    $Parameters = array("stationId" => $id, "beginDate" => $date, "endDate" => $date, "datum" => "MLLW",
                        "unit"      => 1, "timeZone" => 1);

    try {
        return $client->__soapCall(
            "getWaterLevelRawOneMin", array('Parameters' => $Parameters),
            array('location' => "http://opendap.co-ops.nos.noaa.gov/axis/services/WaterLevelRawOneMin")
        );
    } catch (SoapFault $e) {
        if (
            $e->faultcode == "soapenv:Server.userException"
            and $e->faultstring == "java.rmi.RemoteException: We are sorry, but no data is available from this station at this time"
        ) {
            return "FAULT";
        } else {
            echo "Could not connect to the server";
        }
    } // end of catch blocK
}// end of function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T00:05:12.977

仅当您调用 SoapClient::constructor 时才会发生有关损坏 WSDL 的异常

```
try {
    $client= new SoapClient($wsdlUrl ,array('trace'=>false));
}catch(Exception $e) {
    // your loging regarding this case 
} 
```

SoapFault 异常可能会在您创建 Web 服务时发生：

```
try {
    $client= new SoapClient($wsdlUrl ,array('trace'=>false));
    try {
       return $client->_call('....');
    } catch (SoapFault $sp) {
        //your logic rearding soap fault 
    }
}catch(Exception $e) {
    // your loging regarding this case 
}
return false; 
```

# qt - qRegisterMetaType 用法

> ID：11679435
> 
> 赞同：12
> 
> 时间：2012-07-26T23:21:52.233
> 
> 标签：qt

```
 #include<QMetaType>

  typedef QList<int> IntList;

  qRegisterMetaType<IntList>("IntList");

error C2909: 'qRegisterMetaType': explicit instantiation of function template requires return type 
```

C2909 说我需要定义

```
 template int qRegisterMetaType<IntList>("IntList"); 
```

如果我像上面提到的那样定义，那么我会收到以下错误

```
 error C2059: syntax error : 'string'
 warning C4667: 'int qRegisterMetaType(void)' : no function template defined that matches forced instantiation 
```

为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-07-23T15:37:51.870

“qRegisterMetaType”是一个函数。它必须出现在代码块中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T09:08:06.787

您需要先添加`Q_DECLARE_METATYPE(IntList)`才能注册。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-27T01:44:58.263

```
int metatype_id = qRegisterMetaType<IntList>("IntList"); 
```

# ios - NSJSONSerialization 行为不端，98% 的时间返回数组，其他 2% 的时间返回 dict

> ID：11679438
> 
> 赞同：1
> 
> 时间：2012-07-26T23:22:06.160
> 
> 标签：ios, json, nsjsonserialization

这真的很奇怪。

我们正在访问一个总是返回一个数组的 json Twitter API。即 [https://twitter.com/statuses/user_timeline/485963081.json](https://twitter.com/statuses/user_timeline/485963081.json)

我们的确是：

```
if([NSJSONSerialization class]) {
        NSError *error = nil;
        jsonResponse = [NSJSONSerialization JSONObjectWithData:responseData options:0 error:&error];    
        DLog(@"JSON Parsing Error: %@", error);

    } else {
        NSString * jsonString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];
        jsonResponse = [jsonString JSONValue];
    }
    if([jsonResponse count] > 0) {
        NSString *jsonText = [[jsonResponse objectAtIndex:0] objectForKey:@"text"];
        twitterText = jsonText;
    } 
```

这在绝大多数情况下都有效。剩下的，我们得到这个：

```
[__NSCFDictionary objectAtIndex:]: unrecognized selector sent to instance 
```

注意，所有错误都在 iOS5 上，所以 SBJSON 库不适用。

有时 NSJSONSerialization 将数组解析为字典。坦率地说，使用来自 twitter 的数据是不可能的。那么这里发生了什么？

# javascript - 使用 javascript 显示字幕

> ID：11679441
> 
> 赞同：0
> 
> 时间：2012-07-26T23:22:19.847
> 
> 标签：javascript, html, subtitle

我目前正在使用[jquery.srt.js](http://v2v.cc/~j/jquery.srt/)来显示我拥有的一些视频的字幕。

我想要完成的是在网页中显示字幕的整个文本文件。

这就是我的 html 文档中的内容。如何获取“data-srt”（本地文件）内容？
谢谢

```
<div id='srt'
     class="srt"
     data-video="video"
     data-srt="sample.srt" />

</div> 
```

**编辑**

```
 $(function()
    {
        $.get($("#srt").data("srt"), function(text) {
            alert(text);
        });
    });

</script> 
```

我尝试了上面的编辑版本，但没有显示它给我的字幕文本：
**[object XMLDocument]**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T23:34:13.110

我假设 sample.srt 是位于网络服务器上的文本文件？您可以尝试对文本文件执行 ajax 调用并使用 javascript 将响应文本显示到 html 元素。使用 jQuery 来执行 AJAX 调用：

```
$.ajax(
{
   url: $("#srt").attr("data-srt"),
   success: function(responseText)
   {
       alert(responseText);
   }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T23:36:57.453

我看到您正在使用 W3C DOM 方法，但您的文件表明您正在使用 jQuery。因此，以下使用 jQuery 会更短：

```
$.get($("#srt").data("srt"), function(text){
  alert(text); // Show the subtitles from the text file.
}); 
```

享受！

# javascript - 在 Google Apps 脚本中应用 DRY 原则

> ID：11679448
> 
> 赞同：1
> 
> 时间：2012-07-26T23:23:03.507
> 
> 标签：javascript, css, google-apps-script, zurb-foundation

尝试在 Google Apps Script 中进行一些干净的编程。有谁知道如何重用经常重复的方法/属性链？例子：

```
var lblDate = app.createLabel("Date")
    .setId('lblDate')
    .setStyleAttribute("fontFamily", "\"Helvetica Neue\", \"HelveticaNeue\", Helvetica,   Arial, \"Lucida Grande\", sans-serif")
    .setStyleAttribute("fontSize", "14px")
    .setStyleAttribute("fontSize", "1.4rem")
    .setStyleAttribute("lineHeight", "1")
    .setStyleAttribute("color", "#222222")
    .setStyleAttribute("position", "relative"); 
```

这个问题对我有很多影响，但手头的任务（上图）是仅使用 GAS Javascript 将 Zurb Foundation 样式应用于各种表单元素。

有接盘侠吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T01:19:53.543

你能做类似的事情：

```
function applyCSS(element, style) {
  for (var key in style) {
    element.setStyleAttribute(key, style[key]);
  }
}

var _zurb1 = 
  {
    "fontFamily": "\"Helvetica Neue\", \"HelveticaNeue\", Helvetica,   Arial, \"Lucida Grande\", sans-serif",
    "fontSize": "14px",
    "fontSize": "1.4rem",
    "lineHeight": "1",
    "color": "#222222",
    "position": "relative"
  } 
```

然后在您的主代码中：

```
var lblDate = app.createLabel("Date").setId('lblDate');
applyCSS(lblDate, _zurb1); 
```

此方法的所有功劳归功于 Google Script（Enterprise Application Essentials）的作者 James Ferreira。

* * *

*编辑（2012 年 4 月 9 日）*

使用新的[setStyleAttributes()](https://developers.google.com/apps-script/class_label#setStyleAttributes)方法，我认为您现在可以取消 applyCSS() 函数，只需使用：

```
var lblDate = app.createLabel("Date").setId('lblDate').setStyleAttributes(_zurb1); 
```

# google-app-engine - 如何将注册域指向 Google App Engine 应用程序？

> ID：11679451
> 
> 赞同：0
> 
> 时间：2012-07-26T23:23:15.613
> 
> 标签：google-app-engine, registration, domain-name

我有一个来自 GoDaddy.com 的注册域名我需要指向我的 Google 应用引擎应用程序以使用该域名来提供静态页面。我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T23:28:47.523

可以在[此处](https://developers.google.com/appengine/docs/domain)找到有关将自定义域与 App Engine 应用程序一起使用的说明。

# html - CSS中的格式问题

> ID：11679456
> 
> 赞同：1
> 
> 时间：2012-07-26T23:23:40.963
> 
> 标签：html, css, web

我正在尝试进入 Web 开发，特别是现在的 CSS，我想做一些实用的事情：一个简单的菜单栏。但是，我在正确格式化子菜单的锚点时遇到问题，因为它们占用两行而不是一行。

这是HTML代码：

```
<!DOCTYPE html>
<html>
    <head>
        <title>Test</title>
        <link rel="stylesheet" type="text/css" href="test.css" />
    </head>
    <body>
        <ul id="menu">
            <li><a href="#">Menu 1</a>
                <ul>
                    <li><a href="#">Submenu 1</a></li>
                    <li><a href="#">Submenu 2</a></li>  
                    <li><a href="#">Submenu 3</a></li>
                    <li><a href="#">Submenu 4</a></li>
                </ul>
            </li>
            <li><a href="#">Menu 2</a></li>
            <li><a href="#">Menu 3</a></li>
            <li><a href="#">Menu 4</a></li>
            <li><a href="#">Menu 5</a></li>
        </ul>
    </body>
</html> 
```

和CSS代码：

```
#menu{ 
    list-style: none;
    padding: 0px;
    margin: 0px;
    }
#menu li{
    float:left;
    padding: 0px 8px 0px 8px;
    position: relative;
}
#menu li ul{
    position: absolute;
    list-style: none;
    right: 0;
    display: none;
}
#menu li li{
    float: none;
}
#menu li:hover ul{
    display: block;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T23:34:36.793

这里有几个选项...

将您的 CSS 更改为以下内容会在其他主菜单项下方提供整个子菜单

```
#menu{ 
    list-style: none;
    padding: 0px;
    margin: 0px;
    }
#menu li{
    float:left;
    padding: 0px 8px 0px 8px;
}
#menu li ul{
    list-style: none;
    right: 0;
    display: none;
    width: 100%;
    position: absolute;
}
#menu li li{
    float: none;
    width: 100%;
    display: block;
}
#menu li:hover ul{
    display: block;
}​ 
```

此选项会将顶部菜单项滑过，这可能并不理想，但嘿，这是一个选项...

```
#menu{ 
    list-style: none;
    padding: 0px;
    margin: 0px;
    }
#menu li{
    float:left;
    padding: 0px 8px 0px 8px;
}
#menu li ul{
    list-style: none;
    right: 0;
    display: none;
    position: relative;
    width: 100%;
}
#menu li li{
    float: none;
    width: 100%;
    display: block;
}
#menu li:hover ul{
    display: block;
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T23:32:25.087

增加 的宽度，`li`使文本适合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T23:33:43.887

只需设置`width`.`#menu li`

```
#menu li{
    float:left;
    padding: 0px 8px 0px 8px;
    position: relative;
    width: 80px;
} 
```

[尝试演示](http://jsfiddle.net/kBJkH/1/)。

# apache-flex - 如何更改图表中的背景线颜色？

> ID：11679458
> 
> 赞同：0
> 
> 时间：2012-07-26T23:23:48.553
> 
> 标签：apache-flex, charts, flex3

我似乎不知道如何更改折线图中的背景水平（和垂直）线条颜色。这是我到目前为止所拥有的：

```
<mx:LineChart width="100%" height="100%" dataProvider="{dataSet}">
    <mx:series>
        <mx:LineSeries showDataEffect="{eff}" yField="x" />
    </mx:series>
</mx:LineChart> 
```

![带白色背景线的折线图](../Images/3a4e1e8a4d6db6b13b147167fd835046.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T23:54:24.637

我想到了。您在图表的背景元素属性中定义一个 GridLines 对象，如下所示：

```
<mx:LineChart width="100%" height="100%" dataProvider="{dataSet}">

    <mx:backgroundElements>
        <mx:GridLines gridDirection="both"/>
    </mx:backgroundElements>

</mx:LineChart> 
```

[http://help.adobe.com/en_US/Flex/4.0/UsingSDK/WS2db454920e96a9e51e63e3d11c0bf69084-7c45.html](http://help.adobe.com/en_US/Flex/4.0/UsingSDK/WS2db454920e96a9e51e63e3d11c0bf69084-7c45.html)

# c++ - C++ STL 列表迭代器

> ID：11679459
> 
> 赞同：1
> 
> 时间：2012-07-26T23:23:50.983
> 
> 标签：c++, list, stl, compiler-errors, iterator

我正在尝试使用以下代码遍历字符串列表：

```
#include<cstdlib>
#include<string>
#include<list>

using namespace std;

list<string> dict = {"aardvark", "ambulance", "canticle", "consumerism"};
list<string> bWords = {"bathos", "balderdash"};
//splice the bWords list into the appropriate spot in dict
auto iterLastB = --(bWords.end());
//find spot in dict
list<string>::iterator it = dict.begin();
while(it != dict.end()){
  if(*it > *iterLastB)
    break;
    ++it;
}
dict.splice(it, bWords); 
```

但是，在构建它时，我收到错误`expected unqualified-id before 'while'` 这是什么意思，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T23:26:59.810

你不能像那样直接编写代码。至少你需要一个`main`函数。您可能应该在函数中添加所有内容（包含除外）`main`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T23:31:06.123

您缺少一个`int main()`功能。C++ 根本不允许将静态变量和声明以外的代码放在函数之外，因为不清楚代码何时应该实际运行。

一些注意事项：不要使用，当它是原始类型`--(container.end())`时，这可能最终成为未定义的行为。`end`使用`std::prev(container.end())`. 也尝试使用 the`begin`和`end`free 函数，例如`end(container)`. `while`不必要时不要使用循环进行迭代。使用`for(auto& x : container)`或`for(auto it = begin(container); it != end(container); ++it)`。更好的是：使用 header 中的算法`algorithm`。

# java - 在列表视图中加载图像时加载错误的图像

> ID：11679460
> 
> 赞同：2
> 
> 时间：2012-07-26T23:23:51.390
> 
> 标签：java, android, multithreading, android-listview, android-asynctask

我见过几个这样的问题，但我似乎遇到了一个稍微不同的问题。所以我想我会在这里问一个人。

我有一个带有 textview 和 imageview 的自定义列表视图。我正在使用异步任务加载图像，然后在我的 post execute 方法中将图像设置为 imageview。我的图像加载正常，但某些图像被其他图像替换。但是在所有图像加载完成后，每个图像视图都有正确的图像。我似乎无法弄清楚为什么我有这个问题。

这是我的适配器和异步任务类。任何和所有的帮助将不胜感激。

**编辑**我现在添加一个标签（标签是进入imageviews各自textview的文本）并且在我的帖子执行中我正在检查标签是否等于来自textview的文本。我仍然遇到和以前一样的问题。

这是我的适配器类：

```
public class CustomListAdapter extends ArrayAdapter<CustomList> {

    Context context;
    int layoutResourceId;
    LinkedList<CustomList> data = null;
    LinkedList<String> title_list = new LinkedList();

    LoadImage l;
    CustomList cl;
    ProgressBar pb;
    HashMap <String, Bitmap> bitmap = new HashMap<String, Bitmap>();

    public CustomListAdapter(Context context, int layoutResourceId, LinkedList<CustomList> data, LinkedList<Bitmap> bitmap_list) {
        super(context, layoutResourceId, data);
        // TODO Auto-generated constructor stub

        this.context = context;
        this.layoutResourceId = layoutResourceId;
        this.data = data;

    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub

        View row = convertView;
        CustomListHolder holder = null;

        if(row == null){
            LayoutInflater inflater = ((Activity)context).getLayoutInflater();
            row = inflater.inflate(layoutResourceId, parent, false);
            holder = new CustomListHolder();

            holder.text = (TextView)row.findViewById(R.id.txtTitle);
            holder.thumbnail = (ImageView)row.findViewById(R.id.imgIcon);
            holder.pb = (ProgressBar)row.findViewById(R.id.progressBar1);

            row.setTag(R.id.id0, holder);

            cl = data.get(position);
            holder.text.setText(cl.title);
            holder.thumbnail.setImageResource(R.drawable.icon);
            holder.pb.setVisibility(View.VISIBLE);

            row.setTag(R.id.id1,new String(cl.title));
            LoadImage li = new LoadImage(context, holder.thumbnail, cl.icon,cl.title, bitmap,holder.pb,row);
            li.execute(cl.icon);        

        }

        else{
            Log.e("Row not null","Inside");
            holder = (CustomListHolder)row.getTag(R.id.id0);
            //row.getK
            cl = data.get(position);        
            holder.text.setText(cl.title);
            holder.thumbnail.setImageResource(R.drawable.icon);
            holder.pb.setVisibility(View.VISIBLE);
            if((Bitmap) bitmap.get(cl.title) == null){
                row.setTag(R.id.id1,new String(cl.title));
              LoadImage li = new LoadImage(context, holder.thumbnail, cl.icon,cl.title, bitmap,holder.pb,row);
                li.execute(cl.icon); 

            }
            else {
                holder.thumbnail.setImageBitmap((Bitmap) bitmap.get(cl.title));
                holder.pb.setVisibility(View.GONE);
            }

        }   

        return row;

    }

    static class CustomListHolder
    {
        ImageView thumbnail;
        TextView text;
        ProgressBar pb;
    }

} 
```

这是我的异步任务类：

公共类 LoadImage 扩展 AsyncTask{

```
Context callingContext = null;
ImageView view;
String bits;
public  ProgressBar pb;
HashMap<String, Bitmap> bitmap; 
String url;
String text;
View row;

public LoadImage(Context c, ImageView view, String bits, String text, HashMap<String, Bitmap> bitmap, ProgressBar pb, View row){

    this.view = view;
    this.bits = bits; // url for image
    this.callingContext = c;
    this.bitmap = bitmap; //hashmap
    this.text = text;// title text
    this.pb = pb;
    this.row = row;

}

public Bitmap getBitmap(String data){

    Bitmap bitmap;
    BitmapFactory.Options bmOptions;
    bmOptions = new BitmapFactory.Options();
    bmOptions.inJustDecodeBounds = true;
    Log.e("getBitmap",text);

    try {
        bitmap=null;
        InputStream is=new URL(data).openStream();
        BitmapFactory.decodeStream(is, null, bmOptions);
        is.close();
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize = 10;
        is = new URL(data).openStream();
        bitmap = BitmapFactory.decodeStream(is, null, o2);

        bitmap = Bitmap.createScaledBitmap(bitmap, 60, 60, true);
        is.close();
        this.bitmap.put(text,bitmap);
        return bitmap;
    } catch (Exception ex){
        Log.e("Debug", ex.getMessage());
       return null;
    }

}

@Override
protected Bitmap doInBackground(String... arg0) {
    // TODO Auto-generated method stub
    Log.e("do In Bg",text);
    Bitmap b = null;    

    if((Bitmap)bitmap.get(text) == null)
      b = getBitmap(bits);
    else 
      b =(Bitmap)bitmap.get(text);

        return b;  
}

@Override
protected void onPostExecute(Bitmap result) {
    // TODO Auto-generated method stub
    super.onPostExecute(result);
        if(row.getTag(R.id.id1).equals(text)){
            view.setImageBitmap((Bitmap)bitmap.get(text));
            pb.setVisibility(View.GONE);
        }

} 
```

}

CustomList 是一个具有 2 个字符串图标和标题的类。icon 是图像的 url，title 是 textview 的文本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T00:08:20.373

我确信@Krylez 会告诉你同样的事情：在 ListView 中，你的行被回收了。这是covertView 给你的，你做一个row==null 检查。如果您的屏幕一次显示 10 行，那么它的内存中可能大约有 11 到 12 行。当您滚动并且一行消失时，它会保存在内存中，并与旧的东西一起返回给您，供您重新填充。

假设您有单元格 1...您要求位图 1。然后用户将其滚动出视图并将其作为位图 12 回收。现在位图 1 任务完成并在其上绘制，因为对象引用仍然完好无损（从未得到销毁）。因此，您会得到出现错误图像的这种效果。

我在 iOS 项目上使用了一个简单的修复方法：使用对象标签。让我解释：

当您启动 LoadImage 任务时，使用唯一 ID 标记您的行，您可以识别位图及其与...的位置关系

```
row.setTag(new Integer(ID_THAT_IDENTIFIES_ROW_AND_BITMAP_RELATIONSHIP)) 
```

在异步任务中执行 onPostExecute() 时，请检查此标识符是否已更改。如果您当前的位图不再匹配，请不要做任何事情，因为可能还有另一个任务等待填充它。

我希望这会有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-10T05:09:31.600

在这种情况下，我的意见总是创建新行。

```
LayoutInflater inflater = ((Activity)context).getLayoutInflater(); 
row = inflater.inflate(layoutResourceId, parent, false); 
```

不需要使用 Holder（虽然这看起来对平滑有好处）。试试看。

谢谢。

# javascript - 按类别从 Wordpress 中提取标题并添加到外部站点

> ID：11679465
> 
> 赞同：0
> 
> 时间：2012-07-26T23:24:11.640
> 
> 标签：javascript, wordpress, rss, feed

我正在尝试从我们的 WordPress 博客中提取基于特定类别的帖子标题，并将它们显示在我们的网站上。

我试过使用 Google Feed API。它在他们的代码游乐场中工作，但在实际站点上却没有。我还在操场上尝试了不同的类别，但没有奏效。

我需要一个 jquery 或 javascript 解决方案，因为它将在 .aspx 页面中实现。

有任何想法吗？

# ruby-on-rails - Rails 路由错误。应用程序不运行

> ID：11679467
> 
> 赞同：0
> 
> 时间：2012-07-26T23:24:55.510
> 
> 标签：ruby-on-rails, ruby, logging, github

嘿，伙计们，请帮助我。我在**Dreamhost**上设置了4 天的**rails**。最后，rails 开始工作，但应用程序没有运行。我刚刚部署了一个只有一个模型产品的演示应用程序，页面没有打开，它说页面不存在。生产日志文件中存在写入路由错误。我是 Rails 的新手，所以无法弄清楚出了什么问题。您可以尝试自己运行[应用程序](http://www.meropati.com/products) **http://meropati.com/products并查看此应用程序的源代码以及我的****[git 存储库](https://github.com/getaasciesh/TestingRailsOnDreamHost)**中的日志文件* *https://github.com/getaasciesh/TestingRailsOnDreamHost* * 我会很感激得到它解决方案。

```
Started GET "/products" for 208.113.229.116 at 2012-07-26 16:05:55 -0700

ActionController::RoutingError (No route matches [GET] "/products"):
  actionpack (3.2.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.6) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.6) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.6) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.6) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.1) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.6) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.1) lib/rack/lock.rb:15:in `call'
  rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
  rack-cache (1.2) lib/rack/cache/context.rb:245:in `fetch'
  rack-cache (1.2) lib/rack/cache/context.rb:185:in `lookup'
  rack-cache (1.2) lib/rack/cache/context.rb:66:in `call!'
  rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
  railties (3.2.6) lib/rails/engine.rb:479:in `call'
  railties (3.2.6) lib/rails/application.rb:220:in `call'
  railties (3.2.6) lib/rails/railtie/configurable.rb:30:in `method_missing'
  /home/getaasciesh3/.passenger/standalone/3.0.14-x86_64-ruby1.9.3-linux-gcc4.4.5-1002/support/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  /home/getaasciesh3/.passenger/standalone/3.0.14-x86_64-ruby1.9.3-linux-gcc4.4.5-1002/support/lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  /home/getaasciesh3/.passenger/standalone/3.0.14-x86_64-ruby1.9.3-linux-gcc4.4.5-1002/support/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  /home/getaasciesh3/.passenger/standalone/3.0.14-x86_64-ruby1.9.3-linux-gcc4.4.5-1002/support/lib/phusion_passenger/rack/application_spawner.rb:206:in `start_request_handler'
  /home/getaasciesh3/.passenger/standalone/3.0.14-x86_64-ruby1.9.3-linux-gcc4.4.5-1002/support/lib/phusion_passenger/rack/application_spawner.rb:171:in `block in handle_spawn_application'
  /home/getaasciesh3/.passenger/standalone/3.0.14-x86_64-ruby1.9.3-linux-gcc4.4.5-1002/support/lib/phusion_passenger/utils.rb:470:in `safe_fork'
  /home/getaasciesh3/.passenger/standalone/3.0.14-x86_64-ruby1.9.3-linux-gcc4.4.5-1002/support/lib/phusion_passenger/rack/application_spawner.rb:166:in `handle_spawn_application'
  /home/getaasciesh3/.passenger/standalone/3.0.14-x86_64-ruby1.9.3-linux-gcc4.4.5-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/getaasciesh3/.passenger/standalone/3.0.14-x86_64-ruby1.9.3-linux-gcc4.4.5-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/getaasciesh3/.passenger/standalone/3.0.14-x86_64-ruby1.9.3-linux-gcc4.4.5-1002/support/lib/phusion_passenger/abstract_server.rb:180:in `start'
  /home/getaasciesh3/.passenger/standalone/3.0.14-x86_64-ruby1.9.3-linux-gcc4.4.5-1002/support/lib/phusion_passenger/rack/application_spawner.rb:129:in `start'
  /home/getaasciesh3/.passenger/standalone/3.0.14-x86_64-ruby1.9.3-linux-gcc4.4.5-1002/support/lib/phusion_passenger/spawn_manager.rb:253:in `block (2 levels) in spawn_rack_application'
  /home/getaasciesh3/.passenger/standalone/3.0.14-x86_64-ruby1.9.3-linux-gcc4.4.5-1002/support/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  /home/getaasciesh3/.passenger/standalone/3.0.14-x86_64-ruby1.9.3-linux-gcc4.4.5-1002/support/lib/phusion_passenger/spawn_manager.rb:246:in `block in spawn_rack_application'
  /home/getaasciesh3/.passenger/standalone/3.0.14-x86_64-ruby1.9.3-linux-gcc4.4.5-1002/support/lib/phusion_passenger/abstract_server_collection.rb:82:in `block in synchronize'
  <internal:prelude>:10:in `synchronize'
  /home/getaasciesh3/.passenger/standalone/3.0.14-x86_64-ruby1.9.3-linux-gcc4.4.5-1002/support/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  /home/getaasciesh3/.passenger/standalone/3.0.14-x86_64-ruby1.9.3-linux-gcc4.4.5-1002/support/lib/phusion_passenger/spawn_manager.rb:244:in `spawn_rack_application'
  /home/getaasciesh3/.passenger/standalone/3.0.14-x86_64-ruby1.9.3-linux-gcc4.4.5-1002/support/lib/phusion_passenger/spawn_manager.rb:137:in `spawn_application'
  /home/getaasciesh3/.passenger/standalone/3.0.14-x86_64-ruby1.9.3-linux-gcc4.4.5-1002/support/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  /home/getaasciesh3/.passenger/standalone/3.0.14-x86_64-ruby1.9.3-linux-gcc4.4.5-1002/support/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  /home/getaasciesh3/.passenger/standalone/3.0.14-x86_64-ruby1.9.3-linux-gcc4.4.5-1002/support/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  /home/getaasciesh3/.passenger/standalone/3.0.14-x86_64-ruby1.9.3-linux-gcc4.4.5-1002/support/helper-scripts/passenger-spawn-server:99:in `<main>' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T23:39:27.397

这可能无关紧要，但你有：

```
gem 'sqlite3'

group :development, :test do
  gem 'sqlite3'
end
...
gem 'mysql2' 
```

尝试删除对 sqlite3 的第一个引用，因为您不希望它在生产中使用。

正如我所说，它可能对这个特定问题没有任何影响，但它会让你以后免于麻烦

**更新**

[Dreamhost wiki](http://wiki.dreamhost.com/Rails_3)建议不要使用乘客和 rvm，因为它们不能很好地结合在一起。阅读标题为“疑难解答”的部分。他们建议切换到 ruby​​ 的系统安装。

如果您要尝试这样做，您可能需要从[environment.rb中删除对 rvm 的引用](https://github.com/getaasciesh/TestingRailsOnDreamHost/blob/master/config/environment.rb)

祝你好运

# mysql - Mysql每日下载计数器

> ID：11679468
> 
> 赞同：0
> 
> 时间：2012-07-26T23:24:56.743
> 
> 标签：mysql, datetime

我失去了一点，不能正确地想到这个 sql

我有

表： userid 、 counter 、 date 和

我需要检查用户在过去 24 小时内下载了多少文件，启动 sql

```
SELECT SUM(counter) FROM download_log WHERE userid = 258 AND date = DATE(NOW()) 
```

但它返回 null ，我下载了最少 40 个文件，
日期表中的日期格式是

```
2012-05-05 01:59:55 
```

我也试过， `date = NOW()`

同样的事情我错过了什么？

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T23:28:11.460

尝试这样的事情：

```
SELECT SUM(counter) FROM download_log WHERE userid = 258 AND date = CURDATE() 
```

那应该行得通。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T23:28:54.880

我猜您将日期和时间存储在名为的列中`date`，因此它应该可以工作：

```
SELECT SUM(counter) FROM download_log WHERE userid = 258 AND 
DATE(`date`)= DATE(NOW()) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T23:41:09.673

会不会是：

```
SELECT SUM(counter) FROM download_log where userid = 258 and date >= DATE_SUB(NOW(), INTERVAL 24 HOUR); 
```

您必须在过去 24 小时内获取所有行。

# string - echo -n $"some string" 与 echo -n "some string" 有何不同

> ID：11679472
> 
> 赞同：2
> 
> 时间：2012-07-26T23:25:25.743
> 
> 标签：string, sh

我正在为我自己的服务创建一个启动脚本，并查看一些现有的服务启动脚本以寻求帮助。在 /etc/init.d/atd 启动脚本中，我看到以下构造：

```
echo -n $"Stopping $prog: " 
```

我找不到任何关于以 $ 开头的字符串的文档。它似乎与不使用 $ 符号完全相同。任何人都知道您为什么要这样做，甚至在记录了这种晦涩用途的地方会做得更好？到目前为止，谷歌并没有提供帮助。

该脚本是 /bin/sh (bourne shell) 方言。

这是 CentOS 6.2 版（最终版）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T23:30:54.960

前面有美元符号的双引号字符串`$"string"`将导致字符串根据当前语言环境进行翻译。如果当前语言环境是 C 或 POSIX，则忽略美元符号。如果字符串被翻译和替换，则替换是双引号。

# android - Android - 在首选项页面中放置一个 ListView

> ID：11679473
> 
> 赞同：1
> 
> 时间：2012-07-26T23:25:29.890
> 
> 标签：android, listview, preferences

我的应用程序中有一个首选项页面。由于没有多项选择 ListPreference（API 级别 11 之后有一个），我想在首选项页面放置一个 ListView。但preferences.xml 不允许我插入线性布局。

**这是我的preferences.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">
        <PreferenceCategory
                android:title="Auto Refresh Settings">
                <CheckBoxPreference
                        android:title="Auto Refresh"
                        android:defaultValue="false"
                        android:summary="Enable / Disable Auto Refresh"
                        android:key="checkboxPref" />
                <ListPreference
                        android:title="Auto Refresh Frequency"
                        android:summary="Select the frequency of Auto Refresh"
                        android:key="listPref"
                        android:defaultValue="20"
                        android:entries="@array/listArray"
                        android:entryValues="@array/listValues" />
        </PreferenceCategory>

        </PreferenceScreen> 
```

**这是它的外观：**

![preferences.xml 图形布局](../Images/52509eeaaf0b76bb2f62f2a0592793c2.png)

**我想要什么**：

![我想要的是](../Images/651953efae2364071833132325cb191e.png)：

**最后是我的 Settings.java（首选项）：**

```
package com.sarkolata.coding;

import android.content.Context;
import android.os.Bundle;
import android.preference.CheckBoxPreference;
import android.preference.Preference;
import android.preference.Preference.OnPreferenceChangeListener;
import android.preference.PreferenceActivity;
import android.preference.PreferenceCategory;
import android.preference.PreferenceManager;
import android.widget.Toast;
public class Settings extends PreferenceActivity
{

     @Override
     protected void onCreate(Bundle savedInstanceState)
     {
          super.onCreate(savedInstanceState);
          addPreferencesFromResource(R.xml.preferences);

          final Preference ListPref = (Preference) findPreference("listPref");
          final Preference CheckPref = (Preference) findPreference("checkboxPref");

          if(PreferenceManager.getDefaultSharedPreferences(getBaseContext()).getBoolean("checkboxPref", false)) {
              ListPref.setEnabled(false);
          }

          ListPref.setOnPreferenceChangeListener(new OnPreferenceChangeListener() {

            public boolean onPreferenceChange(Preference preference, Object newValue) {

                Main.update_tick = Integer.parseInt(newValue.toString()) * 1000;

                return true;
            }
        });

          CheckPref.setOnPreferenceChangeListener(new OnPreferenceChangeListener() {

            public boolean onPreferenceChange(Preference preference, Object newValue) {

                if(newValue.toString() == "true")
                {
                    ListPref.setEnabled(false);
                } else {
                    ListPref.setEnabled(true);
                }

                if(newValue.toString() == "true") {

                Main.refreshAllServers(Main.context, Main.bcontext,"start");

                } else {

                    Main.refreshAllServers(Main.context, Main.bcontext,"stop");

                }

                return true;
            }
        });

     }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T00:14:51.310

我不知道在首选项窗格中添加 ListView 是否明智，因为 PreferenceActivity 已经使用 ListView 来显示许多首选项。也许您想使用[MultiSelectListPreference](http://developer.android.com/reference/android/preference/MultiSelectListPreference.html)，允许您进行多项选择的首选项。[您可以在http://blog.350nice.com/wp/archives/240](http://blog.350nice.com/wp/archives/240)看到一个示例

# php - 使用 jquery 的 ajax 发布是否安全？

> ID：11679474
> 
> 赞同：2
> 
> 时间：2012-07-26T23:25:41.047
> 
> 标签：php, jquery, asp.net, ajax

我想问这个，因为如果不太确定它是安全的。

我计划将我的页面更改为基于 ajax 的注册。所以我的数据将使用 jquery ajax post 插入。

但是，如果有人使用 firebug 并查看我的帖子被发送到哪里，他们可以使用其他形式的 firefox 插件在该 url 上发布数据，并且无需转到我的页面即可轻松注册。

虽然我可以先验证请求的来源，但这将是额外的代码和工作。

我还将为我的表单添加服务器验证，因为有人可以使用他们将在 firebug 上看到的直接 url 注册而无需验证。

我只是想知道在应用基于 ajax 的数据发布时是否已经有标准程序。

但是基于 ajax 的 select / fetch 很酷而且非常有用。

目前，这就是我计划在我的注册页面上做的事情。

1.  验证所有请求必须来自我的注册页面。

    *   可能使用事务/请求代码
    *   可能会使用 cookie
    *   可能会使用会话
    *   可能会使用日期时间比较
2.  如果验证失败，我应该在服务器端进行表单验证，以在插入数据库之前清理我发布的数据

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T23:33:37.120

**永远不要相信 UI。**

无论您是发布 Ajax 帖子还是标准帖子，人们都可以找出您发布的内容并创建他们自己的客户端。即使您使用 https，控制浏览器的人也可以看到发布的内容并破译协议。

您需要创建您的服务，使其不易受到用户手工制作客户端的攻击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T23:35:01.380

如果用户可以使用他们的浏览器通过 Ajax 在您的网站上注册，他们就可以使用其他一些编程语言来欺骗注册。您无能为力，因此他们*只能*通过 Ajax 从您的站点注册。

你可以实施一些技巧，让他们难以弄清楚，但你不能让它变得不可能。他们可以欺骗引用者、加载其他页面以获取所需的 cookie/会话变量、欺骗 Ajax 请求标头等。

# macos - 从 DMG 中提取

> ID：11679475
> 
> 赞同：9
> 
> 时间：2012-07-26T23:25:41.463
> 
> 标签：macos, extract, dmg

如何在不挂载的情况下提取 DMG 的内容？我想将自动更新系统添加到我的应用程序中。它从网站下载 DMG，然后从中提取新版本的应用程序。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-02-21T03:43:22.167

一些`.dmg`文件可以使用[7-zip](http://7-zip.org)解压。

```
$ 7z x your.dmg
$ ls
your.dmg
0.MBR
1.Primary GPT Header
2.Primary GPT Table
3.free
4.hfs
5.free
6.Backup GPT Table
7.Backup GPT Header 
```

...并在提取`4.hfs`文件后：

```
$ 7z x 4.hfs 
```

...您将获得`.dmg`文件的内容。

您还可以使用命令（[Homebrew Cask](http://caskroom.io)`.dmg`也使用该命令）在 Mac OS X 中安装。`hdiutil`

有关 Linux 上的更多用例，请参阅[此 Ask Ubuntu 问题](https://askubuntu.com/questions/38112/how-can-i-open-a-dmg-file)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-18T13:18:33.197

Dmg 只是用于 MacOS 的一种格式。它是一种未压缩的文件格式，例如`zip`或`tar.gz` 您有多种选择来安装它。这里有一些选项。

1.  双击它以安装它。
2.  用于`hdiutil attach your.dmg`挂载 dmg 文件。在它上面挂载之后，操作你的命令行来提取你想要的文件。

* * *

## 回答 #3

> 赞同：-6
> 
> 时间：2012-07-27T23:11:45.150

这样做与 DMG 的设计背道而驰，因此非常痛苦。DMG 设计为可安装的，这就是它们存在的全部*理由*。如果你想做这样的事情，你需要[依赖实验代码。](https://github.com/planetbeing/libdmg-hfsplus)使用非 DMG 存档（如 zip 文件）或让您的自动更新过程下载、安装*和*卸载您提供的 DMG 文件可能会更好地为您服务。

# actionscript-3 - AS3像素完美绘图？

> ID：11679477
> 
> 赞同：4
> 
> 时间：2012-07-26T23:25:56.680
> 
> 标签：actionscript-3, drawing, pixel-perfect

当我使用时：

```
var shape:Shape = new new Shape();
shape.graphics.lineStyle(2,0);
shape.graphics.lineTo(10,10);
addChild(shape); 
```

我得到了我想要的黑线，但我也得到了在它们旁边漂浮的灰色像素。有没有办法关闭任何平滑/抗锯齿添加模糊像素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-12T19:35:28.783

是的，即使启用了抗锯齿，也可以绘制像素完美的形状。像素提示是必须的。等式的另一半是实际发出具有全像素坐标的绘图命令。

例如，您可以使用以下代码绘制一个具有 4px 半径曲线的像素完全对称的圆角矩形。仔细注意代码在做什么，特别是偏移量与边框厚度的关系。

首先，请记住，当您绘制填充形状时，会发生光栅化，但不包括轮廓的右/下边缘。因此，要绘制一个 4x4 像素填充的正方形，您只需调用 drawRect(0,0,4,4)。这涵盖了像素 0、1、2、3、4（5 像素），但由于它没有栅格化右边缘和下边缘，因此最终为 4 像素。另一方面，如果只绘制轮廓（不填充），则需要调用 drawRect(0,0,3,3)，它将覆盖像素 0,1,2,3，即 4像素。所以你实际上需要稍微不同的尺寸来填充和轮廓以获得像素完美的尺寸。

假设您要绘制一个 50px 宽、20px 高的按钮，其圆角边缘的半径为 4px，厚度为 2px。为了确保准确地覆盖 50x20 像素，并且 2px 粗线的外边缘与边缘像素相抵而不会溢出，您必须像这样发出绘图命令。您必须使用像素提示，并且必须在所有边上将矩形向内偏移 1px（不是半个像素，而是正好 1 个像素）。这会将线的中心正好放在像素 0 和 1 之间，这样它最终会通过像素 0 和 1 绘制 2px 宽的线。

这是您可以使用的示例方法：

```
public class GraphicsUtils
{
    public static function drawFilledRoundRect( g:Graphics, x:Number, y:Number, width:Number, height:Number, ellipseWidth:Number = 0, ellipseHeight:Number = 0, fillcolor:Number = 0xFFFFFF, fillalpha:Number = 1, thickness:Number = 0, color:Number = 0, alpha:Number = 1, pixelHinting:Boolean = false, scaleMode:String = "normal", caps:String = null, joints:String = null, miterLimit:Number = 3 )
    {
        if (!isNaN( fillcolor))
        {
            g.beginFill( fillcolor, fillalpha );
            g.drawRoundRect( x, y, width, height, ellipseWidth, ellipseHeight );
            g.endFill();
        }
        if (!isNaN(color))
        {
            g.lineStyle( thickness, color, alpha, pixelHinting, scaleMode, caps, joints, miterLimit );
            g.drawRoundRect( x, y, width, height, ellipseWidth, ellipseHeight );
        }
    }
} 
```

你想这样称呼它：

```
var x:Number = 0;
var y:Number = 0;
var width:Number = 50;
var height:Number = 20;
var pixelHinting:Boolean = true;
var cornerRadius:Number = 4;
var fillColor:Number = 0xffffff; //white
var fillAlpha:Number = 1;
var borderColor:Number = 0x000000; //black
var borderAlpha:Number = 1;
var borderThickness:Number = 2;
GraphicsUtils.drawFilledRoundRect( graphics, x + (borderThickness / 2), y + (borderThickness / 2), width - borderThickness, height - borderThickness, cornerRadius * 2, cornerRadius * 2, fillColor, fillAlpha, borderThickness, borderColor, borderAlpha, pixelHinting ); 
```

这将产生一个像素完全对称的 2px 厚的填充圆角矩形，该矩形恰好覆盖 50x20 像素区域。

非常重要的是要注意，使用零的边界厚度有点无意义，并且会导致矩形过大 1 个像素，因为它仍在绘制一个 1 像素宽的线，但它没有减去宽度（因为它为零)，因此你会得到一个超大的矩形。

总之，使用上面的算法，将一半的边框厚度添加到 x 和 y 坐标，并从宽度和高度中减去整个边框厚度，并且始终使用最小厚度 1。这将始终产生一个矩形具有占据且不溢出与给定宽度和高度等效的像素区域的边框。

如果您想查看它的实际效果，只需将以下代码块复制并粘贴到主时间线上的新 AS3 Flash 项目中并按原样运行它，因为它包含运行所需的所有内容：

```
import flash.display.StageScaleMode;
import flash.display.StageAlign;
import flash.events.Event;
import flash.utils.getTimer;
import flash.display.Sprite;
import flash.display.Graphics;

stage.scaleMode = flash.display.StageScaleMode.NO_SCALE;
stage.align = flash.display.StageAlign.TOP_LEFT;
stage.frameRate = 60;
draw();

function draw():void
{
    var x:Number = 10;
    var y:Number = 10;
    var width:Number = 50;
    var height:Number = 20;
    var pixelHinting:Boolean = true;
    var cornerRadius:Number = 4;
    var fillColor:Number = 0xffffff; //white
    var fillAlpha:Number = 1;
    var borderColor:Number = 0x000000; //black
    var borderAlpha:Number = 1;
    var borderThickness:Number = 2;

    var base:Number = 1.6;
    var squares:int = 10;
    var rows = 4;
    var thicknessSteps:Number = 16;
    var thicknessFactor:Number = 4;

    var offset:Number;
    var maxBlockSize:Number = int(Math.pow( base, squares ));
    var globalOffset:Number = maxBlockSize; //leave room on left for animation
    var totalSize:Number = powerFactorial( base, squares );
    var colors:Array = new Array();
    for (i = 1; i <= squares; i++)
        colors.push( Math.random() * Math.pow( 2, 24 ) );

    for (var j:int = 0; j < thicknessSteps; j++)
    {
        var cycle:Number = int(j / rows);
        var subCycle:Number = j % rows;
        offset = cycle * totalSize;
        y = subCycle * maxBlockSize;
        borderThickness = (j + 1) * thicknessFactor;
        for (var i:int = 0; i < squares; i++)
        {
            cornerRadius = Math.max( 8, borderThickness );
            borderColor = colors[i];
            x = globalOffset + offset + powerFactorial( base, i ); //int(Math.pow( base, i - 1 ));
            width = int(Math.pow( base, i + 1 ));
            height = width;
            if (borderThickness * 2 > width) //don't draw if border is larger than area
                continue;
            drawFilledRoundRect( graphics, x + (borderThickness / 2), y + (borderThickness / 2), width - borderThickness, height - borderThickness, cornerRadius * 2, cornerRadius * 2, fillColor, fillAlpha, borderThickness, borderColor, borderAlpha, pixelHinting );
        }
    }

    var start:uint = flash.utils.getTimer();
    var duration:uint = 5000;
    var sprite:Sprite = new Sprite();
    addChild( sprite );
    var gs:Graphics = sprite.graphics;
    addEventListener( flash.events.Event.ENTER_FRAME,
    function ( e:Event ):void
    {
        var t:uint = (getTimer() - start) % duration;
        if (t > (duration / 2))
            borderThickness = ((duration-t) / (duration/2))  * thicknessSteps * thicknessFactor;
        else
            borderThickness = (t / (duration/2)) * thicknessSteps * thicknessFactor;
        //borderThickness = int(borderThickness);
        cornerRadius = Math.max( 8, borderThickness );
        borderColor = colors[squares - 1];
        x = 0;
        y = 0;
        width = int(Math.pow( base, squares ));
        height = width;
        if (borderThickness * 2 > width) //don't draw if border is larger than area
            return;
        gs.clear();
        drawFilledRoundRect( gs, x + (borderThickness / 2), y + (borderThickness / 2), width - borderThickness, height - borderThickness, cornerRadius * 2, cornerRadius * 2, fillColor, fillAlpha, borderThickness, borderColor, borderAlpha, pixelHinting );
    }, false, 0, true );
}

function powerFactorial( base:Number, i:int ):Number
{
    var result:Number = 0;
    for (var c:int = 0; c < i; c++)
    {
        result += int(Math.pow( base, c + 1 ));
    }
    return result;
}

function drawFilledRoundRect( g:Graphics, x:Number, y:Number, width:Number, height:Number, ellipseWidth:Number = 0, ellipseHeight:Number = 0, fillcolor:Number = 0xFFFFFF, fillalpha:Number = 1, thickness:Number = 0, color:Number = 0, alpha:Number = 1, pixelHinting:Boolean = false, scaleMode:String = "normal", caps:String = null, joints:String = null, miterLimit:Number = 3 )
{
    if (!isNaN( fillcolor))
    {
        g.beginFill( fillcolor, fillalpha );
        g.drawRoundRect( x, y, width, height, ellipseWidth, ellipseHeight );
        g.endFill();
    }
    if (!isNaN(color))
    {
        g.lineStyle( thickness, color, alpha, pixelHinting, scaleMode, caps, joints, miterLimit );
        g.drawRoundRect( x, y, width, height, ellipseWidth, ellipseHeight );
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T23:29:59.037

尝试开启pixelHinting：

`shape.graphics.lineStyle(2, 0, 1, true);`

更多关于 pixelHinting[的信息](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Graphics.html#lineStyle%28%29)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T23:47:48.160

您不能完全关闭抗锯齿。如果您想要一条清晰的像素化线，那么不幸的是，您必须使用 Bitmap 和 setPixel() 逐个像素地绘制

# php - 如何从 php 中的 url 中获取 id 并将其用作数字？

> ID：11679492
> 
> 赞同：1
> 
> 时间：2012-07-26T23:28:16.157
> 
> 标签：php, casting, integer, uri

我有一个如下所示的网址。

```
post/:id 
```

我正在爆炸`$_SERVER['REQUEST_URI']`；

我需要使`$uri[2]`数字成为数字，这样我就可以做类似的事情

`$next = $uri[2]++;`

我试过`is_numeric`了，但当然`request_uri`是一个字符串（分解成一个字符串数组）。

我可以在 php 中将类型转换为整数吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T23:31:06.760

```
$int = (int) $uri[2]; 
```

您只需将字符串转换为整数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T23:31:28.107

您是否尝试过：http `intval()`: [//php.net/manual/en/function.intval.php](http://php.net/manual/en/function.intval.php)？

`int intval(mixed $var [, int $base = 10 ])`

“返回 var 的整数值，使用指定的转换基数（默认为基数 10）。不应在对象上使用 intval()，因为这样做会发出 E_NOTICE 级别错误并返回 1。”

**更新**

`(int) $string`想知道和之间的区别`intval($string)`是什么之后，对以前的 SO 问题有一些有趣的评论；

*   `(int)`速度提高 600%
*   `intval`更容易在其他函数中进行类型转换
*   `intval`有改变基础的好处（虽然这相当模糊）
*   `intval`更具可读性（这显然是非常主观的）

    1.  [intval 和强制转换为 int - `(int) X` 之间有什么特别的区别吗？](https://stackoverflow.com/questions/1912599/is-there-any-particular-difference-between-intval-and-int)
    2.  [什么时候应该使用 intval 什么时候使用 int](https://stackoverflow.com/questions/5339590/when-should-one-use-intval-and-when-int)
    3.  [http://hakre.wordpress.com/2010/05/13/php-casting-vs-intval/](http://hakre.wordpress.com/2010/05/13/php-casting-vs-intval/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T23:46:54.770

只是为了澄清[David](https://stackoverflow.com/a/11679512/881551)和[ChrisW](https://stackoverflow.com/a/11679515/881551)都是正确的。这是[http://www.php.net/manual/en/language.types.integer.php#language.types.integer.casting](http://www.php.net/manual/en/language.types.integer.php#language.types.integer.casting)中描述的[两种](http://php.net/manual/en/function.intval.php) [方法](http://php.net/manual/en/language.types.type-juggling.php)

```
<?php

$str = '100';

var_dump( $str ); // string(3) "100"

// http://php.net/manual/en/function.intval.php
var_dump( intval($str) ); // int(100)

// http://php.net/manual/en/language.types.type-juggling.php
var_dump( (int) $str ); // int(100)

?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-15T04:50:24.653

您可以将其作为来自 url 的数字作为`$_GET`请求传递参数。

`$_POST`或者作为请求传递。

但是在 $_POST 请求的情况下，我们不能将值传递给 url。如果你愿意，你可以使用`$_SERVER['REQUEST_URI']`并转换为`(int) $_GET['pid']`.

# c++ - 为什么 C++ 接受多个前缀但不接受变量的后缀

> ID：11679493
> 
> 赞同：6
> 
> 时间：2012-07-26T23:28:16.773
> 
> 标签：c++, increment, prefix, decrement, postfix-operator

在查看[c 中的同一语句中的同一变量是否可以有一个增量器和一个减量器](https://stackoverflow.com/questions/11679258/can-you-have-a-incrementor-and-a-decrementor-on-the-same-variable-in-the-same-st#comment15483521_11679258)

我发现您可以在一个变量上使用多个前缀递增/递减运算符，但只有一个后缀

前任：

```
++--++foo; // valid
foo++--++; // invalid
--foo++;   // invalid 
```

为什么是这样？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-26T23:32:16.400

这是因为在 C++（但不是 C）中，结果`++x`是 lValue，这意味着它是可赋值的，因此是可链接的。

但是，结果`x++`不是 lValue，而是 prValue，这意味着它不能被分配，因此不能被链接。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-26T23:32:04.657

在 C++ 语言中，前缀递增/递减运算符返回*左*值，而后缀运算符返回*右值*。同时，所有修改运算符都需要左值参数。这意味着前缀递增/递减的结果可以传递给任何其他需要左值参数的附加运算符（包括额外的递增/递减）。

出于同样的原因，在 C++ 中，您可以编写这样的代码

```
int i = 0;
int *p = &++i; 
```

这将增加`i`并`p`指向`i`. 一元`&`需要左值操作数，这就是为什么它将使用前缀的结果`++`（但不适用于后缀之一）。

应用于同一对象的具有多个内置前缀递增/递减的表达式会产生*未定义的行为*，但它们仍然是格式良好的（即“可编译”）。

像这样的表达式`++foo--`是无效的，因为在 C++ 中，后缀运算符的优先级高于前缀运算符。大括号可以改变这一点。例如，`(++foo)--`是一个格式良好的表达式，尽管它再次导致未定义的行为。

# spring - MongoDB Near Query 奇怪的行为

> ID：11679496
> 
> 赞同：2
> 
> 时间：2012-07-26T23:28:50.230
> 
> 标签：spring, mongodb, spring-data, nosql

我有一个使用 Spring Data 的 NearQuery 操作执行的近距离查询。大多数情况下一切正常。但是，我在几台测试机器和一台生产机器上都有我的代码。该查询适用于某些测试机器，但它不会返回生产机器和我的一台测试机器上新创建的对象的结果。当我将 mongodb 集合放在不工作的机器上，然后使用相同的代码插入新文档并重新创建集合时，查询再次开始工作。我的问题是；什么会导致这种行为？向类中添加新变量会导致 mongodb near 查询停止执行吗？如果添加到集合中的文档与已经存在的变量不同，会导致问题吗？在生产中，我不能简单地删除集合来解决这个问题。

mongoTemplate 代码：

```
 Point point = new Point(locationAsDoubleArray[0],locationAsDoubleArray[1]);

    NearQuery query = NearQuery.near(point.getX(),point.getY()).spherical(true).maxDistance(maxDistance,Metrics.MILES).distanceMultiplier(Metrics.MILES).query(regularQuery);//maxDistance(new Distance(radius,Metrics.MILES));

    GeoResults<CalendarEvent> results = ((MongoOperations)mongoTemplate).geoNear(query, CalendarEvent.class); 
```

应以 JSON 格式返回的文档：

```
 { "_class" : "com.eatmyfish.services.custom.CalendarEvent" , "_id" : { "$oid" : "5011c5cf51527fce6c4d2a00"} , "_keywords" : [ "test" , "search" , "function" , "test" , ""] , "address1" : "221 East 5th Street" , "address2" : "" , "allDay" : false , "categories" : [ 14] , "city" : "Saint Paul" , "clientId" : 109 , "clientProductId" : 962 , "color" : "#003666" , "createUser" : "peterson.dean" , "description" : "test" , "end" : "2012-07-26 14:00:00" , "endDate" : { "$date" : "2012-07-26T19:00:00.000Z"} , "externalLink" : "<a href='http://'>More Info</a>" , "geoLocation" : [ -93.0875195 , 44.9490055] , "latitude" : 0.0 , "location" : "221 East 5th Street  Saint Paul,MN 55101 " , "locationManuallyEntered" : false , "locationName" : "My Cubicle" , "longitude" : 0.0 , "moreInfoLink" : "<a href='http://localhost:8080/posts/list/3150.page'>More Info</a>" , "note" : "" , "privateEventIn" : "N" , "restFormattedAddress" : "221+East+5th+Street+Saint+Paul,+MN+55101" , "start" : "2012-07-26 04:00:00" , "startDate" : { "$date" : "2012-07-26T09:00:00.000Z"} , "state" : "MN" , "title" : "Test Search Function" , "topicId" : 3150 , "url" : "http://localhost:8080/posts/list/3150.page" , "zip" : "55101"} 
```

代码的工作方式因它正在运行的机器而异。我确保我的 jar 文件等在每台机器上都是相同的。一旦开始失败，唯一能使查询工作的方法是删除集合并重新开始。但是，我不确定何时或什么原因导致查询停止工作。我不认为代码是问题。可能有一些我不知道的管理任务会清理数据。我已经使用了修复命令，但没有任何运气。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T22:04:57.470

我有一些旧条目的长/纬度顺序颠倒了。这导致我所有的近距离查询都失败了。奇怪的是，以相反的顺序有几个 long/lat 值会导致这种情况。不过，这就是原因。当我反向修复条目的 long/lats 的顺序时，查询再次起作用。为了找出这一点，我必须在 java 中构建和使用直接的 mongodb 命令，而不是使用 Spring 的简洁方法。通过在调试时查看命令的返回值，我实际上可以看到有关纬度值不正确的错误消息。使用 Spring 的近查询操作没有返回此类错误。Spring 不充分的错误消息使这个错误很难追踪。

# amazon-ec2 - 为什么我的系统将我的设备从 /dev/sdj 更改为 /dev/xvdj？

> ID：11679498
> 
> 赞同：3
> 
> 时间：2012-07-26T23:29:03.427
> 
> 标签：amazon-ec2, volume, mount

我有一个 Amazon EC2 实例。我启动了一个卷并将其附加到 /dev/sdj。我编辑了我的 fstab 文件以包含该行

```
/dev/sdj /home/ec2-user/mydirectory xfs noatime 0 0 
```

然后我安装了它（sudo mount /home/ec2-user/mydirectory）

但是，运行“mount”命令会显示以下内容：

```
/dev/xvdj on /home/ec2-user/mydirectory type xfs (rw,noatime) 
```

什么？为什么是 /dev/xvdj 而不是 /dev/sdj？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T23:31:31.927

> 这些设备在 11.04 中被命名为 /dev/xvdX 而不是 sdX。这是内核更改。xen 块设备的内核名称是“xvd”。以前 Ubuntu 带有一个补丁来将这些设备重命名为 sdX。那个补丁变得有问题。

[https://askubuntu.com/a/47909](https://askubuntu.com/a/47909)

# iphone - UIAccessibility VoiceOver 宣布 UIScrollView 的页码错误

> ID：11679504
> 
> 赞同：3
> 
> 时间：2012-07-26T23:30:38.520
> 
> 标签：iphone, objective-c, uiscrollview, accessibility, voiceover

我正在尝试使现有的应用程序尽可能方便地进行配音。

目前，我有一个 uiviewcontroller，它基本上是一个分页照片视图，在 uiscrollView (tourScrollView) 下方有一个 uipagecontrol，指示当前正在查看的图像/页面。

这是计算当前页面的代码：

```
- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView {
    CGFloat pageWidth = scrollView.frame.size.width;
    self.tourScrollView.isAccessibilityElement = NO;
    scrollView.isAccessibilityElement = NO;
    int currentPage = floor((scrollView.contentOffset.x - pageWidth / 2) / pageWidth) + 1;
    pageControl.currentPage = currentPage;
} 
```

页面计算代码完美运行。

一共展示了5张图片。

启用语音后，当滚动视图滚动时，而不是继续

```
page 1 of 5
page 2 of 5
page 3 of 5
page 4 of 5
page 5 of 5 
```

它是这样的。

```
page 1 of 6
page 2 of 6
page 3 of 6
page 5 of 6
page 6 of 6 
```

这是将图像添加到滚动视图的代码

```
-(void)addImagesToScrollview{

    NSArray *welcomeImages = [[NSArray alloc] initWithObjects:[UIImage imageNamed:@"img-01.png"],
                              [UIImage imageNamed:@"img-02.png"],
                              [UIImage imageNamed:@"img-03.png"],
                              [UIImage imageNamed:@"img-04.png"],
                              [UIImage imageNamed:@"img-05.png"],nil];

    CGRect scrollViewFrame = tourScrollView.frame;
    CGFloat scrollViewWidth = scrollViewFrame.size.width;
    CGFloat scrollViewHeight = scrollViewFrame.size.height;
    CGFloat imageX;
    for (int i = 0; i<[welcomeImages count]; i++) {

        int index = i;
        imageX = (scrollViewWidth*index) + (scrollViewWidth - IMAGE_WIDTH)/2.0;

        CGRect boarderViewRect = CGRectMake(imageX, 20.0f, IMAGE_WIDTH, IMAGE_HEIGHT);

        UIView *whiteBorderView = [[UIView alloc] initWithFrame:boarderViewRect];
        whiteBorderView.backgroundColor = [UIColor whiteColor];

        UIImageView *imageView = [[UIImageView alloc]initWithImage:[welcomeImages objectAtIndex:i]];
        CGRect imageRect = CGRectInset(boarderViewRect, IMAGE_INSET, IMAGE_INSET);
        imageView.frame = imageRect;

        CGRect descriptionRect = CGRectMake((scrollViewWidth*index) + 20.0f, imageRect.origin.y + imageRect.size.height+10, 280, 90);
        CGSize maximumLabelSize = CGSizeMake(descriptionRect.size.width,120);
        descriptionRect.size = [[self descriptionForIndex:i] sizeWithFont:[UIFont systemFontOfSize:16.0] constrainedToSize:maximumLabelSize lineBreakMode:UILineBreakModeTailTruncation];
        UILabel *imageDescription = [[UILabel alloc] initWithFrame:descriptionRect];
        imageDescription.text = [NSString stringWithFormat:@"%@",[self descriptionForIndex:i]];
        imageDescription.numberOfLines = 0;
        imageDescription.backgroundColor = [UIColor clearColor];
        imageDescription.font = [UIFont systemFontOfSize:16.0];
        imageDescription.textColor = [UIColor colorWithRed:(119.0/255.0) green:(119.0/255.0) blue:(119.0/255.0) alpha:1.0];
        imageDescription.textAlignment = UITextAlignmentCenter;
        imageDescription.shadowColor = [UIColor whiteColor];
        imageDescription.shadowOffset = CGSizeMake(0,1);

        [tourScrollView addSubview:whiteBorderView];
        [tourScrollView addSubview:imageView];
        [tourScrollView addSubview:imageDescription];

        if (i == [welcomeImages count]-1) {
            tourScrollView.contentSize = CGSizeMake(imageView.frame.origin.x + scrollViewWidth -((scrollViewWidth - IMAGE_WIDTH)/2.0), scrollViewHeight); 
        }
    }
} 
```

如果有人指出我正确的方向以配音说出正确的页码，我将不胜感激。

更新：启用/禁用 pagingEnabled 没有区别。我认为 VoiceOver 会覆盖我根据滚动视图大小所做的分页计算。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T16:47:56.997

这是修复它的方法：

删除了注释代码，并在 for 循环外添加了一行内容大小

```
-(void)addImagesToScrollview{

NSArray *welcomeImages = [[NSArray alloc] initWithObjects:[UIImage imageNamed:@"img-01-welcome.png"],
                          [UIImage imageNamed:@"img-02-welcome.png"],
                          [UIImage imageNamed:@"img-03-welcome.png"],
                          [UIImage imageNamed:@"img-04-welcome.png"],
                          [UIImage imageNamed:@"img-05-welcome.png"],nil];

CGRect scrollViewFrame = tourScrollView.frame;
CGFloat scrollViewWidth = scrollViewFrame.size.width;
CGFloat scrollViewHeight = scrollViewFrame.size.height;
CGFloat imageX;
for (int i = 0; i<[welcomeImages count]; i++) {

    int index = i;
    imageX = (scrollViewWidth*index) + (scrollViewWidth - IMAGE_WIDTH)/2.0;

    CGRect boarderViewRect = CGRectMake(imageX, 20.0f, IMAGE_WIDTH, IMAGE_HEIGHT);

    UIView *whiteBorderView = [[UIView alloc] initWithFrame:boarderViewRect];
    whiteBorderView.backgroundColor = [UIColor whiteColor];

    UIImageView *imageView = [[UIImageView alloc]initWithImage:[welcomeImages objectAtIndex:i]];
    CGRect imageRect = CGRectInset(boarderViewRect, IMAGE_INSET, IMAGE_INSET);
    imageView.frame = imageRect;

    CGRect descriptionRect = CGRectMake((scrollViewWidth*index) + 20.0f, imageRect.origin.y + imageRect.size.height+10, 280, 90);
    CGSize maximumLabelSize = CGSizeMake(descriptionRect.size.width,120);
    descriptionRect.size = [[self descriptionForIndex:i] sizeWithFont:[UIFont systemFontOfSize:16.0] constrainedToSize:maximumLabelSize lineBreakMode:UILineBreakModeTailTruncation];
    UILabel *imageDescription = [[UILabel alloc] initWithFrame:descriptionRect];
    imageDescription.text = [NSString stringWithFormat:@"%@",[self descriptionForIndex:i]];
    imageDescription.numberOfLines = 0;
    imageDescription.backgroundColor = [UIColor clearColor];
    imageDescription.font = [UIFont systemFontOfSize:16.0];
    imageDescription.textColor = [UIColor colorWithRed:(119.0/255.0) green:(119.0/255.0) blue:(119.0/255.0) alpha:1.0];
    imageDescription.textAlignment = UITextAlignmentCenter;
    imageDescription.shadowColor = [UIColor whiteColor];
    imageDescription.shadowOffset = CGSizeMake(0,1);

    [tourScrollView addSubview:whiteBorderView];
    [tourScrollView addSubview:imageView];
    [tourScrollView addSubview:imageDescription];

//        if (i == [welcomeImages count]-1) {
//            tourScrollView.contentSize = CGSizeMake(imageView.frame.origin.x + scrollViewWidth -((scrollViewWidth - IMAGE_WIDTH)/2.0), scrollViewHeight); 
//        }
    }
    tourScrollView.contentSize = CGSizeMake(320.0*[welcomeImages count], scrollViewHeight);
} 
```

我仍然不确定为什么 VO 会弄乱页码。修复前后的滚动视图行为仍然相同（弹跳和分页工作相同）。

如果我了解有关此问题的更多信息，将更新答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-30T08:08:17.287

一个简单的选择是符合您的`UIScrollViewDelegate`to`UIScrollViewAccessibilityDelegate`并返回所需的字符串。

例如：

```
extension MyScrollViewDelegate: UIScrollViewAccessibilityDelegate {
    func accessibilityScrollStatus(for scrollView: UIScrollView) -> String? {
        "\(self.currentPage) of \(self.pageCount)"
    }
} 
```

# c# - 使用 json 和 .net 创建 asana 任务时 - asana api 不会保存其名称、分配或项目信息

> ID：11679505
> 
> 赞同：-1
> 
> 时间：2012-07-26T23:30:40.057
> 
> 标签：c#, .net, asana

我正在尝试使用 asana api 向 asana 添加新任务。我使用 Json.net 和 C#，我发送到服务器的 json ( **https://app.asana.com/api/1.0/workspaces/555/tasks** ) 看起来像这样：

*{"name":"aaaaaaaaaaaa","assignee ":111,"workspace":222,"followers":[333],"project":[444]}*

那么服务器的响应是：

*{"data":{"id":1341474003806,"created_at": "2012-07-26T22:50:40.603Z","modified_at":"2012-07-26T22:50:40.603Z","name":"","notes":"","completed":false, "assignee_status":"later","completed_at":null,"due_on":null,"assignee":null,"workspace":{"id":555,"

所以看起来 asana 并没有保存我发送到服务器的任务名称、关注者、受让人和项目信息。此外，当我尝试使用以下 Uri ( **https://app.asana.com/api/1.0/tasks/1341474003806** ) 和以下 json

*{"name":"aaaaaaaaaaaaa"}*

手动更新任务时， 我收到带有消息的 WebException “远程服务器返回错误：（404）未找到。”。但我仍然可以将此地址粘贴到网络浏览器中并查看任务详细信息：
*{"data":{"id":1341474003806,"assignee":null,"projects":[],"tags":[],"created_at":"2012-07-26T22:50:40.603Z", "modified_at":"2012-07-26T22:50:40.603Z","name":"","notes":"","completed":false,"assignee_status":"later","due_on":null ,"workspace":{"id":222,"name":"工作发展"},"followers":[{"id":333,"name":"username"}],"completed_at":null} }*
这个任务在我使用网络浏览器时也是不可见的。

难道我做错了什么？也许我在 json 中遗漏了一些东西？有人可以提供一个示例，说明如何使用.net 创建附加到工作区/项目的任务。或者提供一个成功创建任务的dump o json。或者只是给我一个解决方案。
如有需要，我可以提供源代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T00:01:15.017

（我在 Asana 工作）。

您的特定字段在创建任务时不被接受的原因是您需要将它们放在`data`您发送的顶级字典中的元素中，就像它在响应中出现的方式一样。由于您的所有字段都出现在该元素之外，因此它们将被忽略。

您的更新请求“未找到”的原因是您可能在应该使用 PUT（更新）时使用 POST（创建）到该 URL。没有 API 端点接受对特定任务 ID 的 POST。

# unit-testing - 如何运行 Guava 的单元测试？

> ID：11679509
> 
> 赞同：1
> 
> 时间：2012-07-26T23:30:57.980
> 
> 标签：unit-testing, maven, guava

我通过以下命令克隆了 Guava 的存储库：

```
git 克隆 https://code.google.com/p/guava-libraries/
```

因为我对 Guava 的结构不是很熟悉，所以尝试了以下命令：

```
cd guava 库
mvn 测试
```

[不幸的是，我收到了以下错误（可在此处](https://gist.github.com/3185180)查看整个输出）。

```
[信息] --------------------------------------------- -------------------------
[INFO] 构建 Guava GWT 兼容库
[INFO] 任务段：[测试]
[信息] --------------------------------------------- -------------------------
下载：https://oss.sonatype.org/content/repositories/snapshots/com/google/guava/guava/13.0-SNAPSHOT/guava-13.0-SNAPSHOT-sources.jar
[信息] 在存储库 sonatype-nexus-snapshots (https://oss.sonatype.org/content/repositories/snapshots) 中找不到资源 'com.google.guava:guava:jar:sources:13.0-SNAPSHOT'
[信息] --------------------------------------------- -------------------------
[错误] 构建错误
[信息] --------------------------------------------- -------------------------
[INFO] 无法解析工件。

失踪：
----------
1) com.google.guava:guava:jar:sources:13.0-SNAPSHOT

  尝试从项目网站手动下载文件。

  然后，使用以下命令安装它：
      mvn install:install-file -DgroupId=com.google.guava -DartifactId=guava -Dversion=13.0-SNAPSHOT -Dclassifier=sources -Dpackaging=jar -Dfile=/path/to/file

  或者，如果您托管自己的存储库，则可以在那里部署文件：
      mvn deploy:deploy-file -DgroupId=com.google.guava -DartifactId=guava -Dversion=13.0-SNAPSHOT -Dclassifier=sources -Dpackaging=jar -Dfile=/path/to/file -Durl=[url] -DrepositoryId= [ID]

  依赖路径：
    1) com.google.guava:guava-gwt:jar:13.0-SNAPSHOT
    2) com.google.guava:guava:jar:sources:13.0-SNAPSHOT

----------
缺少 1 个必需的工件。

对于工件：
  com.google.guava:guava-gwt:jar:13.0-SNAPSHOT

从指定的远程存储库：
  中央（http://repo1.maven.org/maven2），
  sonatype-nexus-snapshots (https://oss.sonatype.org/content/repositories/snapshots)
```

如何运行 Guava 的单元测试？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T07:36:18.670

在完全安装到本地存储库之前，您不能只运行 mvn test。请第一次运行：

```
mvn clean install 
```

然后你只能运行`mvn test`。SNAPSHOT 的库在存储库中尚不可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T09:22:56.640

[当Maven Central](http://search.maven.org/#search%7Cgav%7C1%7Cg%3a%22com.google.guava%22%20AND%20a%3a%22guava%22)提供发布候选版本时，为什么要使用快照修订版？

```
<dependency>
    <groupId>com.google.guava</groupId>
    <artifactId>guava</artifactId>
    <version>13.0-rc2</version>
</dependency> 
```

# visual-studio-2010 - Visual Studio 2010 可以忽略特定的编译指示吗？

> ID：11679513
> 
> 赞同：1
> 
> 时间：2012-07-26T23:31:12.147
> 
> 标签：visual-studio-2010, alignment, pragma

我有许多项目使用的数百个 C++ 源文件。它们是很久以前写的，它们都被包装在编译指示中：

```
#pragma pack(push, 1)
/* Code here ... */
#pragma pack(pop) 
```

我负责移植到 x64。在需要进行的许多更改中，其中之一是需要为 Windows API 调用提供 16 字节对齐的堆栈。在对我们的系统进行了一些分析之后，我们确定 1 字节的结构对齐是*不必要*的，并且不会对系统产生任何不利影响。**我需要摆脱 1 字节的包装。**

我知道我可以快速查找/替换所有文件，然后将它们删除。这是一个好的解决方案；*如果这是唯一的方法，我很乐意这样做。*但是，如果我**可以避免签入涉及对数百个源文件的更改**以及可能与之相关的所有冲突的修订，那么这将是可取的。

# 有没有办法让 Microsoft 编译器忽略 #pragma 包？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T23:44:07.703

据我所知，使用 MSVC 时无法禁用 #pragmas。

我可能会用一种非常适合文本处理的语言编写脚本（我可能会使用 Ruby，但 Python、Perl、sed 应该都可以完成这项工作），然后简单地使用它来注释或删除 #编译指示包行。这应该相对容易，因为#pragmas 将是给定代码行上的唯一语句，并且脚本语言通常包含遍历一组目录的功能。

# c - IFF_UP 和 IFF_RUNNING 有什么区别？

> ID：11679514
> 
> 赞同：22
> 
> 时间：2012-07-26T23:31:22.980
> 
> 标签：c, linux, network-programming

这两个标志通常设置在一起。它们之间有什么区别？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-27T00:30:01.143

从[Linux 设备驱动程序 3](http://www.xml.com/ldd/chapter/book/ch14.html#t3)：

> IFF_UP 该标志对驱动程序是只读的。当接口处于活动状态并准备好传输数据包时，内核将其打开。
> 
> ...
> 
> IFF_RUNNING
> 
> 此标志指示接口已启动并正在运行。它主要用于 BSD 兼容性；内核很少使用它。大多数网络驱动程序不必担心 IFF_RUNNING。

再深入一点，似乎有*一个*显着的区别：

`IFF_RUNNING`应该反映网络接口上的*操作*状态，而不是其管理接口。`UP`举个例子，管理员可能会带来一个以太网接口（例如`ifconfig eth0 up`），但如果未插入电缆，则它不会被认为是可操作的（即`RUNNING`根据 RFC2863）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-10T08:23:35.870

要检查以太网电缆是否真的连接到网络您应该检查 IFF_RUNNIG。IFF_UP 表示系统为接口分配了资源。

[请在此处](https://stackoverflow.com/questions/4231507/how-to-check-ethernet-in-linux/15905276#15905276)找到“ip link show”和“ethtool eth0”如何检查链接的详细代码。

# c# - 制作幻灯片查看器，处理从任意控件触发的事件

> ID：11679528
> 
> 赞同：0
> 
> 时间：2012-07-26T23:32:35.663
> 
> 标签：c#, winforms

我正在扩展图像查看器以支持幻灯片功能。我使用 a`split container`将主窗体分成两个面板。

*   左侧面板将包含缩略图列表
*   右侧的面板将包含全尺寸图像

每个面板都支持拖放。当我将图像文件放入缩略图面板时，它应该创建一个缩略图并将其显示在面板上，从顶部开始并随着更多图像被丢弃而向下工作。默认情况下，第一个可用的图像将显示在右侧的面板上。

当我选择另一个缩略图时，查看器将显示全尺寸图像。

实现此缩略图列表的好方法是什么？我查看了可用的控件列表，但无法确定哪一个最适合于此。

我正在考虑动态创建 PictureBox 对象，但是在我注册 Click 事件之后如何识别事件是从哪个 PictureBox 发送的似乎并不明显。

我正在寻找两种可能的答案之一

*   继续创建 PictureBox 的想法，但了解我应该如何处理 Click 事件以正确显示所需的图像。
*   显示拇指列表的替代建议（如果 PictureBox 想法不可行）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T00:43:33.927

您可以将事件处理程序绑定到多个控件并通过“sender”参数识别它们。它总是指向事件发送者。

```
void OnClick(object sender, KeyEventArgs e) {
    PictureEdit editor = (PictureEdit)sender;
}

Sub OnClick(ByVal sender As Object, ByVal e As KeyEventArgs)
    Dim editor as PictureEdit = CType(sender, PictureEdit)
End Sub 
```

或者，您可以创建自己的（不那么复杂）控件，划分为显示图像的矩形区域。

# php - 未定义的索引：做在

> ID：11679529
> 
> 赞同：0
> 
> 时间：2012-07-26T23:32:39.213
> 
> 标签：php

我正在尝试安装街机脚本并不断收到这些错误，有人可以帮忙吗？

> 注意：未定义索引：在第 34 行的 C:\xampp\htdocs\meggiemoos\arcade\install\new.php 中执行
> 
> 注意：使用未定义的常量 sql - 在第 34 行的 C:\xampp\htdocs\meggiemoos\arcade\install\new.php 中假定为“sql”
> 
> 注意：未定义索引：在第 37 行的 C:\xampp\htdocs\meggiemoos\arcade\install\new.php 中执行
> 
> 注意：使用未定义的常量 sql2 - 在第 37 行的 C:\xampp\htdocs\meggiemoos\arcade\install\new.php 中假定为“sql2”

这是第 34 到 38 行

```
<? if ($_GET['do'] == sql) {
include ('sql1.php');
}
else if ($_GET['do'] == sql2) {
include ('sql2.php'); 
```

我已经尝试过`if isset($_GET`，但我可能在下一行的封闭括号中做错了`{`，我被告知还要添加另一个括号，但从未告诉我在哪里。

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T23:35:18.150

尝试

```
if (isset($_GET['do']) && $_GET['do'] == 'sql') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T23:35:17.367

`sql`本身对 PHP 来说没什么。您需要将其作为字符串或变量，如下所示：

```
<? if ($_GET['do'] == "sql") { 
```

或者

```
$var = "sql";
<? if ($_GET['do'] == $var) { 
```

至于第 37 行错误，服务器找不到名为 'do' 的 GET 变量，所以你需要找出它没有被设置的原因。您可以考虑将其添加到脚本的早期部分：

```
if (!isset($_GET['do'])) {
   exit("do variable was not set!");
}
else {
   $do = $_GET['do'];
} 
```

这样，您就不必一直打字`$_GET['do']`，这可能会很乏味。

# tfs - TFS API 2010：跨所有分支跟踪文件

> ID：11679530
> 
> 赞同：0
> 
> 时间：2012-07-26T23:32:46.467
> 
> 标签：tfs, tfs-sdk

使用 TFS API 我试图近似错误/文件。

错误（正如我定义的那样）源自更改集中的文件，该文件已与类型为 WorkItemType = 'Bug' 的工作项相关联。例如，在 branch-a 中，branch-a/1.txt 和 branch-a/2.txt 被签入并与“Bug”工作项相关联。将此变更集称为 X。branch-a 中现在有两个错误与这两个文件相关联。

如果我将分支-a 合并回其父级（根分支），根也会获得这些错误，因此 root/1.txt 和 root/2.​​txt 也是错误 - 基本上根分支已经获得了它的错误历史孩子。可以通过这种方式继承错误。此属性在重命名时保留。因此，如果将 root/1.txt 重命名为 root/hello.txt 它仍然是一个错误。

我从迭代 TFS 项目中的所有“Bug”工作项开始：在此示例中，有一个工作项，它与变更集 X 相关联，它与 branch-a/1.txt 和 branch-a 上的更改相关联/2.txt（尽管这些文件现在可以重命名）。

现在我想知道 branch-a/1.txt 和 branch-a/2.txt 结束的所有地方（再一次，即使重命名）。

因此，给定一个变更集 cs 和 cs 中的一个变更 c，我想知道每个分支是否 c 进入了该分支以及 c 所在的最新文件名。

思考这个问题的另一种方式是思考在历史中前进。我从特定时间点开始，对单个分支进行更改。现在，这种变化需要一直跟踪到现在。

有任何想法吗？我可以根据需要提供说明。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T01:50:27.257

您是否尝试过跟踪变更集？

查看有更改的文件的历史记录 (1.txt) > 右键单击​​更改集 > 跟踪更改集 > 检查所有可见 > 可视化。

不确定这是否正是您想要的，但它可能是一个不错的起点。

显示它的视频：[YouTube 视频](http://www.youtube.com/watch?v=Vn7hsiuO8b4)

不确定是否可以使用 API。[此链接](http://social.msdn.microsoft.com/Forums/en-US/tfsgeneral/thread/0b89e118-134e-448d-a749-3ac9ae226ea7)似乎表明无法使用 API 调用。[这个链接](http://blogs.msdn.com/b/taylaf/archive/2010/04/26/enable-visualization-and-changeset-tracking-for-branches-through-the-ui-and-programmatically.aspx)似乎表明这是可能的。

# vb.net - Visual Basic 的家庭作业不明确

> ID：11679532
> 
> 赞同：1
> 
> 时间：2012-07-26T23:33:11.953
> 
> 标签：vb.net, events

作业指出

> “编写一个程序，使用事件仅打印 6 到 16 之间的偶数。”

而在课堂上，我们只使用 CL 应用程序，只是有一个按钮是行不通的。所以我考虑使用 if than 语句，如果 CurrentNumber 与 mod 2 相同，则将引发事件，因为当前数字被声明为 6

```
 While CurrentNumber < 17
        If CurrentNumber Mod 2 Then
            RaiseEvent Even()
            CurrentNumber = CurrentNumber + 1
        Else
            CurrentNumber = CurrentNumber + 1
        End If
    End While 
```

但是我将如何将事件处理到 console.writeline(CurrentNumber) 基本上我需要做的是制作一个使用事件打印偶数的程序我试图解决问题的方法是在事件中调用，如果数字是偶数显示当前号码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T23:49:14.057

我认为你在正确的轨道上。如果您要构建一个只有一个目的的类——计算数字并在偶数或奇数出现时引发事件，该怎么办？假设这个类被称为`Counter`.

接下来，如果你的`Program`类有一个类的实例`Counter`并且只有一个事件处理程序`Even`怎么办？`Console.WriteLine()`每次出现偶数时，处理程序都可以执行一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T23:49:37.653

好吧，首先，您正在使用“mod 2”位进行不必要的工作。只需将您的 for 循环限制在您想要的范围内：

```
For Index As Int32 = 6 To 16 Step 2
  RaiseEvent EvenNumber(Index)
Next 
```

然后您的 EvenNumber 事件设置将类似于：

```
Public Event EvenNumber(number)

'  In program startup:
AddHandler Me.EvenNumber, AddressOf EvenNumberHandler

' later...
Private Sub EvenNumberHandler(ByVal number As Int32)
  Console.WriteLine(number)
End Sub 
```

# css - css 显示：表格单元在流体布局中不缩放

> ID：11679540
> 
> 赞同：1
> 
> 时间：2012-07-26T23:34:07.070
> 
> 标签：css, mobile, scalability, fluid-layout

我正在学习流体布局，并且对我的代码中的缩放问题感到困惑。我正在使用无浮动流体布局，其中 div 父尺寸由高度：像素，宽度：百分比形成，而子元素由百分比定​​义。对于移动网站。

我的问题是我的页脚导航。
我的水平列表单元格不平衡地适合父 ul --- 对于空间来说太小（在垂直移动视图中查看时）或太大（在监视器或水平移动视图中）。我需要 li 块适合并位于页脚中心并随着视口变大而缩放。

我确信这是一个简单的解决方法，但对我来说不是。我已经尝试移动测量以使其正常工作。我很想为我重新审视一下这个:)

这是[移动页面的模型](http://www.deadlyvintage.com/m/index.cfm)

CSS

```
footer {
    height:53px;
    width:100%;
    max-width:640px;
    margin:auto
}
#lower-navigation > ul {
    display:table;
    border-spacing:3px
}  
#lower-navigation > ul > li {
    display:table-cell
}
#lower-navigation  ul {
    height:100%;
    width:100%
} 
#lower-navigation  li {
    width:31%;
    height:100% !important;
    margin:auto auto;
    text-align:center
}
img.pic {
    max-width:100%;
    margin:0;
    padding:0
}
#lower-navigation a {
    display:block;
    padding:5%;
    border:thin #000 solid;
    font-size:.8em;
    color:#ccc;
    font-weight:300;
}look at this 
```

HTML

```
<footer>
    <nav id="lower-navigation">
        <ul>
            <li><a href="/m/news.cfm"><img src="/m/img/purple-icon-news.png" class="pic" alt="" width="26" height="25" /> NEWS</a></li>
            <li><a href="sms:phone-number"><img src="/m/img/purple-icon-chat.png" class="pic" alt="" width="26" height="25" /> TEXT D.V.</a></li>
            <li><a href="/m/index.cfm"><img src="/m/img/purple-icon-home.png" class="pic" alt="" width="26" height="25" /> SHOP</a></li>
        </ul>
    </nav>
</footer> 
```

# python - 当我使用 os.system() 在 Python 中打开一个 .py 文件时，它会立即自动关闭它。我该如何解决？

> ID：11679549
> 
> 赞同：1
> 
> 时间：2012-07-26T23:35:06.917
> 
> 标签：python, os.system

我正在编写一个需要打开另一个脚本的脚本，但继续运行主脚本，以便两个脚本同时运行。

我试过`execfile()`了，文件打不开。当我使用`os.system(somefile.py)`它成功通过控制台打开 .py 文件但立即关闭它。是否有替代方案可以让我在主 python 脚本中运行 python 脚本，但同时运行两个进程而不会相互冲突？

这是我测试过的示例代码：

```
import os
file_path = 'C:\\Users\\Tyler\\Documents\\Multitask Bot\\somefile.py'

def main():
    os.system(file_path)

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T00:12:29.787

`execfile()`并将`os.system()`阻塞父进程，直到子进程退出。使用`subprocess.Popen()`，例如

```
import subprocess, time
file_path = 'C:\\Users\\Tyler\\Documents\\Multitask Bot\\somefile.py'

def main():
    child = subprocess.Popen(['python', file_path])
    while child.poll() is None:
        print "parent: child (pid = %d) is still running" % child.pid
        # do parent stuff
        time.sleep(1)
    print "parent: child has terminated, returncode = %d" % child.returncode

if __name__ == '__main__':
    main() 
```

这只是处理它的一种方法。您可能希望从孩子那里收集标准输出和/或标准错误，并可能将数据发送到孩子的标准输入。阅读 subprocess 模块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T23:43:39.407

如果要同时运行另一个脚本，请考虑[subprocess](http://docs.python.org/library/subprocess.html)模块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T00:17:47.183

您的问题可能是该文件未在`C:\\Users\\Tyler\\Documents\\Multitask Bot\\` 其他地方执行。本地导入可能会失败。

你可以尝试`os.chdir('C:\\Users\\Tyler\\Documents\\Multitask Bot\\')`以前执行`os.system`吗？

# c++ - 使用匿名类的公共函子

> ID：11679550
> 
> 赞同：1
> 
> 时间：2012-07-26T23:35:11.047
> 
> 标签：c++, function, anonymous-class

我有一个纯虚拟类`CF`，它表示一维中的任何连续函数，它被定义为一个头文件

```
// tools.h
class CF
{
public:
    virtual double operator()(double x) const=0 ;
}; 
```

我打算做的是使用函子包装几个简单的函数，并在里面定义它们`tools.h`。如果我使用匿名类，例如：

```
// tools.h
class : public CF{
public:
    virtual double operator()(double x) const { return 0.0; }
} zero; 
```

然后我遇到了麻烦，因为类在所有地方`tools.h`都被重新定义。gcc 抱怨：

```
// tools.h included in main.cpp, foo.cpp, and bar.cpp
foo.o:(.bss+0x0): multiple definition of `zero'
main.o:(.bss+0x0): first defined here
bar.o:(.bss+0x0): multiple definition of `zero'
main.o:(.bss+0x0): first defined here 
```

我想我可以通过执行以下操作来解决此问题：

```
// tools.h
class zero_: public CF{
public:
    virtual double operator()(double x) const { return 0.0; }
};

const static zero_ zero; 
```

但我不喜欢它，因为`zero_`它随处可见，我不需要它！我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T23:39:40.283

通过不这样做。只要有

```
struct zero : public CF {
  double operator()(double x) { return 0.; }
}; 
```

并与它一起使用

```
void fun(const CF& cf);
fun(zero()); 
```

拥有函子而不是函数的原因之一是它们能够通过操作携带和公开状态，您的方法会为了简明扼要地获得 2 个括号而将其丢弃。

# android - 为什么地图 URL 的 `sll` 查询参数被（某种程度上）忽略了？

> ID：11679551
> 
> 赞同：15
> 
> 时间：2012-07-26T23:35:14.250
> 
> 标签：android, google-maps, geolocation, geocoding

根据[各种](http://mapki.com/wiki/Google_Map_Parameters) [参考资料](http://seizetruth.com/Tech/GoogleMaps/#Google_Maps_URL_Parameters)，谷歌地图有一个名为的查询参数`sll`，它执行以下操作：

> 应执行业务搜索的点的纬度、经度。您可以使用它来执行偏离中心的业务搜索。谷歌使用它，以便“链接到此页面”可以记录在执行业务搜索后已移动中心的地图。请求路由 `map.getBounds().getSouthWest().toUrlValue()`时返回 maps.google.com 使用的相同值。

因此，例如，如果`(43.464258, -80.52041)`恰好在安大略省的滑铁卢，并且 `(42.24370, -82.98320)`恰好在安大略省的温莎（数百公里之外），那么我对上述文档的解释将是以下查询：

```
https://maps.google.ca/maps?saddr=43.464258,-80.52041&daddr=mcdonalds&sll=42.24370,-82.98320 
```

将搜索**从**滑铁卢**到**温莎的一些麦当劳的“麦当劳”。

不幸的是，事实并非如此（[点击](https://maps.google.ca/maps?saddr=43.464258,-80.52041&daddr=mcdonalds&sll=42.24370,-82.98320)查看！）。它最终从该点搜索到离该*点*`saddr`最近的麦当劳。的值根本不考虑它。*`sll`*

 *但这就是奇怪的地方！如果我完全**[忽略](https://maps.google.ca/maps?saddr=43.464258,-80.52041&daddr=mcdonalds)**这个`sll`参数，那么 Maps 会做一些完全出乎意料的事情：它会随机选择多伦多的一些麦当劳（距离滑铁卢*或*温莎很多公里的城市）。我需要添加一些`sll`参数（对于任何值）以使 Maps 返回滑铁卢的结果（即使我要求的是温莎的结果）。

我是否误解了有关此参数的所有各种文档来源？这是地图端的错误吗？而且，最重要的是，是否有任何可行的方法来做我想做的事情，即使它根本不涉及`sll`参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T10:26:21.397

我可以通过一个简单的查询让它工作：

> [从：43.464258,-80.52041 到：42.24370,-82.98320 附近的麦当劳](https://maps.google.com/maps?q=from:43.464258,-80.52041%20to%3amcdonalds%20near%2042.24370,%20-82.98320)

这给出了预期的结果。`near`如果没有which 是关键字，它将无法工作。

[`from:43.464258,-80.52041 to:mcdonalds, Windsor`](https://maps.google.com/maps?q=from:43.464258,-80.52041%20to%3amcdonalds,%20Windsor)如果您有城市名称，您也可以搜索。

关于`sll`(and `sspn`) 参数，它不适用于方向 AFAIK。它仅适用于搜索单个位置。*

# linq - 为什么用创建 lambda 的函数替换 IQueryable.Sum 选择器中的 lambda 失败？（错误 1025）

> ID：11679553
> 
> 赞同：1
> 
> 时间：2012-07-26T23:35:15.083
> 
> 标签：linq, lambda, linq-to-entities

我想抽象出一个我拥有的 lambda 函数，它根据它们的状态总结我的数据库中的记录。问题是，当我针对 LINQ to Entities 运行生成的 lambda 时，我收到“Internal .NET Framework Data Provider error 1025”。（仅供参考，它适用于 LINQ to Objects）。

这是代码：

```
 <Extension()> _
    Public Function Summarize(ByVal auditsToSummarize As IQueryable(Of HvacAudit)) As IQueryable(Of HvacAuditSummary)
        Return From audit In auditsToSummarize
               Group By month = audit.DateCreated.Value.Month Into g = Group
               Select New HvacAuditSummary With {
                    .GroupingKey = month,
                    .Pending = g.Sum(Function(audit) If(audit.AuditStatusInt = CType(AuditStatus.Pending, Integer), 1, 0)),
                    .Issued = g.Sum(Function(audit) If(audit.AuditStatusInt = CType(AuditStatus.Issued, Integer), 1, 0)),
                    .Closed = g.Sum(Function(audit) If(audit.AuditStatusInt = CType(AuditStatus.Closed, Integer), 1, 0)),
                    .Cancelled = g.Sum(Function(audit) If(audit.AuditStatusInt = CType(AuditStatus.Cancelled, Integer), 1, 0))
                }
    End Function 
```

这是我如何尝试使用 lambda 生成器的示例：

```
 Select New HvacAuditSummary() With {
        .Cancelled = g.Sum(AuditsWithStatus(AuditStatus.Cancelled))
    }

    Private Function AuditsWithStatus(auditStatus As AuditStatus) As Func(Of HvacAudit, Integer)
        Return Function(audit) If(audit.AuditStatusInt = CType(auditStatus, Integer), 1, 0)
    End Function 
```

注意：我已经查看了有关此错误的其他问题，他们似乎都专注于使用错误的 LINQ，因为使用 lambda (Func) 代替表达式。在 sum 方法中，所有的候选人似乎都拿了一个 Func，所以我不知道我还能改变什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T22:50:07.590

实体框架查询提供程序不知道您的功能`AuditsWithStatus`。EF 尝试将您的 linq 语句中的*所有内容*转换为 sql，并且它只能处理一组受限的 .Net 函数，它知道这些函数的等效 sql。其余的 linq 语句中的所有内容都必须是表达式 ( `Expression<Func<...>>`)。

这意味着：您可以使用您的函数，但只能*在*使用`ToList()`or之后使用`ToArray()`，这会将其转换为 linq-to-objects。或者你必须把你的函数变成一个表达式。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-27T18:10:20.487

查看您的匿名函数。

.Sum 期待在 C# 中我们称之为 Func<bool> 的内容。您返回 1 或 0，它们是整数或双精度数（我忘记了，但在您的问题的上下文中并不重要。）

长话短说 - 真或假，不是 1 或 0！

# matlab - 循环遍历 MATLAB 中的一系列 .mat 文件

> ID：11679557
> 
> 赞同：0
> 
> 时间：2012-07-26T23:35:25.967
> 
> 标签：matlab, loops, file-io, mat-file

我有 12 个 mat 文件（每个月一个）需要单独用于计算。它们太大了，无法一次加载所有十二个。因此，我想调用第 1 个月，进行计算，调用第 2 个月，...#12。

我过去曾使用 .asc 文件完成此操作，但遇到了麻烦。垫文件。

我正在尝试以下操作：

```
matObj = matfile('tempOR_norm.mat')

matObj = 

  matlab.io.MatFile

  Properties:
      Properties.Source: 'C:\GIS_DATA\SNOW\Programs\SNOW\tempOR_norm.mat'
    Properties.Writable: false                                           
         tempOR_01_norm: [1424x1817 double]                              
         tempOR_02_norm: [1424x1817 double]                              
         tempOR_03_norm: [1424x1817 double]                              
         tempOR_04_norm: [1424x1817 double]                              
         tempOR_05_norm: [1424x1817 double]                              
         tempOR_06_norm: [1424x1817 double]                              
         tempOR_07_norm: [1424x1817 double]                              
         tempOR_08_norm: [1424x1817 double]                              
         tempOR_09_norm: [1424x1817 double]                              
         tempOR_10_norm: [1424x1817 double]                              
         tempOR_11_norm: [1424x1817 double]                              
         tempOR_12_norm: [1424x1817 double] 
```

但是我如何遍历这个列表呢？

我需要一些类似的东西

```
input = load(matObj(i)) 
```

但这给了我：

> MatFile 对象是标量的。使用语法 objName.varName(indices) 访问变量。

任何见解将不胜感激！

-谢谢-

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T23:45:18.847

明白了（在[Loop 的帮助下加载和保存 .mat 文件](https://stackoverflow.com/questions/10600519/loop-for-loading-and-saving-mat-files)）：

它是这样的......

```
 for i = 1:12;
        if (i <= 9)
            filename = ['tempOR_0', int2str(i), '_norm.mat'];
        else    filename = ['tempOR_', int2str(i), '_norm.mat'];
        end
 end

load(filename); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T02:01:43.507

如果您甚至不知道文件名 try`dir()`命令，如果我没记错的话，您可以指定要返回的文件扩展名`dir(./*.mat)`. [您可以从http://www.mathworks.com.au/help/techdoc/ref/dir.html](http://www.mathworks.com.au/help/techdoc/ref/dir.html)找到更多内容

# qt - Qt：每次 QTableWidget 更改其几何形状时执行一个槽？

> ID：11679558
> 
> 赞同：0
> 
> 时间：2012-07-26T23:35:27.493
> 
> 标签：qt, qtablewidget, slot

我制作了一个从 QTableWidget 派生的小部件，并且每次调整列或行的大小以及每次调整小部件的大小时，我都想执行一个插槽。由于没有信号，该怎么做？

非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T23:52:30.287

要调整小部件本身的大小：继承自`QTableView`，添加信号重新实现[resizeEvent](http://qt-project.org/doc/qt-4.8/qwidget.html#resizeEvent)。在您`resizeEvent` `emmit`的新信号中并调用基本实现`resizeEvent`来实际调整大小。

调整列的大小：使用[来自相关 QHeaderView 的信号](http://qt-project.org/doc/qt-4.8/qheaderview.html#signals)，您可以通过Horizo [​​ntalHeader获得](http://qt-project.org/doc/qt-4.8/qtableview.html#horizontalHeader)

# python - 使用 PIL 复制 ImageMagicks“使用光照效果的徽章”

> ID：11679563
> 
> 赞同：1
> 
> 时间：2012-07-26T23:35:52.253
> 
> 标签：python, imagemagick, thumbnails, python-imaging-library

ImageMagick 有一种很酷的技术，可以将图像“包裹”到灰度“蒙版”上。它为缩略图创建了一个很酷的按钮效果。我希望帮助我将使用 ImageMagick 完成的方法转换为 PIL。我不想对 ImageMagick 使用任何包装器。我需要在 PIL 中重新创建它。我不想使用传统的面具。PIL 是否有足够的能力来重现这种效果？

**ImageMagick 中的原文：** [http ://www.imagemagick.org/Usage/thumbnails/#badge_lighting](http://www.imagemagick.org/Usage/thumbnails/#badge_lighting)

我对基本的 ImageMagick 和 PIL 非常熟悉，例如缩放和线条绘制，但是这个例子比较*复杂*。有没有太平船务专家可以提供帮助？

**ImageMagick 源代码**

```
# merge "mask 'n' paint" images with a gray image,
# to create a "lighting mask"
convert -size 90x90 xc:gray50 -alpha set \
      badge_mask.png -compose DstIn -composite \
      badge_shading.png -compose Over -composite \
      badge_lighting.png

# Apply the single "lighting mask"
convert thumbnail.gif -alpha set -gravity center -extent 90x90 \
      badge_lighting.png \
      \( -clone 0,1 -alpha Opaque -compose Hardlight -composite \) \
      -delete 0 -compose In -composite \
      badge_final.png 
```

输入 RGB imageA（可能是 jpg）

输入 RGBA imageB（png 文件 - 灰度或通道将被转换为）

输出 RGBA 结果图像（png 文件）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:12:04.400

这可能不完全是 imagemagick 所做的，但结果非常相似。我使用函数`transparent_when_gray`（然后我使用这个 alpha-mask 来合成徽章模板和源图像。

```
import Image, ImageChops, ImageOps

def transparent_when_gray(x):
    return 255 if x == 127 else 255 - 2 * abs(127 - x)

def mk_badge(img, template):
    templ = template.convert('RGBA')
    r, g, b, alpha = templ.split()
    gray = ImageOps.grayscale(Image.merge('RGB', (r, g, b)))
    amask = gray.point(transparent_when_gray)

    res = ImageChops.composite(img, templ, amask)
    res.putalpha(alpha)
    return res

if __name__ == '__main__':
    image    = Image.open('thumbnail.gif')
    template = Image.open('badge_lighting.png')

    image_cropped = ImageOps.fit(image, template.size)

    badge = mk_badge(image_cropped, template)
    badge.save('badge.png') 
```

# c# - 哪里可以安全保存我的重要文件？

> ID：11679564
> 
> 赞同：-4
> 
> 时间：2012-07-26T23:35:54.473
> 
> 标签：c#, sql, sql-server-2008, application-data

我从事 C# 项目。

在我的应用程序的第一次运行中，SQL Server 2008 想要创建一个数据库，我希望 SQL Server 2008 在 Programs Files 中创建 MDF 文件。但是 Windows(XP) 不允许我（或 SQL）创建文件并显示“访问被拒绝”错误。

在哪里可以安全地保存 My MDF 文件？“应用程序数据”文件夹是安全的地方吗？我是否有权在此文件夹中创建文件？还是有更好的地方来保存我的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T01:51:13.833

我有一个解决你的问题的方法。如果您要为特定的目标环境进行开发，则必须对环境进行一定程度的控制，或者与组织中这样做的人保持联系。就是这么简单。您必须以一种或另一种方式实现这一点。您应该在项目的早期分析和设计阶段就已经确定了这一点。有人应该说，我们在哪里部署代码？我们在哪里部署数据库？我们有权限这样做吗？如果不是，我们应该和谁交谈呢？我们需要多长时间才能提出请求，以便 XYZ 集团能够及时交付？需要什么样的管理层来批准？是否需要创建新的全局组。不断地。Stack Overflow 社区无法为您回答这些问题，因为我们不了解您的组织，和环境。你这样做，或者至少你应该这样做。或者至少你应该知道该问谁，这样你才能知道。这是什么样的开发，你，开发者不能在某个地方复制文件？您的部署计划在哪里？为什么您没有与您的帮助台或系统管理员交谈？如果没有，请授予您对相关 PC 的管理员权限，然后按照您的意愿行事。它在哪里并不重要，只要不引起过多的审查（比如在根中）。您必须拥有它，或者从那些控制谁可以访问哪些目录的人那里获得支持。希望你不会把这当我跳到你的案子上，而只是想给你一个真实的观点。我在很多公司工作过，总有小领地，某些人控制某些资源，您必须在迷宫中导航。但只要做到这一点，就可以完成工作。这就是为什么你得到这么多反对票的原因。你忽略了一些非常明显的东西——而不是向外看 Stack Overflow，这是你应该在你试图交付的空间内询问人们的东西。我希望这有帮助。

所有其他方法都失败了，安装 SSMS Express 并以这种方式设置数据库，并在连接字符串中使用 (local)\SQLExpress，并终止 mdf 选项，然后卸载 SSMS。很多工作，但它会给你带来结果。让路。祝你好运。

# ruby - 任何人都可以让 ruby -tk 在 Mountain Lion 上工作吗？

> ID：11679565
> 
> 赞同：0
> 
> 时间：2012-07-26T23:35:57.213
> 
> 标签：ruby, xcode4, macports, tk, osx-mountain-lion

```
sudo port install ruby19 +mactk 
```

使用命令行工具新安装的 Xcode 4.4 和安装了 Mountain Lion 的 macports 包，在 Mountain Lion 上运行愉快，没有错误，但是以前工作的 ruby​​-tk 脚本会引发此错误：

```
./foot.rb:6:in `require': no such file to load -- tk (LoadError) 
```

有任何想法吗？许多TIA。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T23:39:55.883

对不起，我是个白痴。忘了替换原生的红宝石，唉

```
$ sudo mv /usr/bin/ruby /usr/bin/ruby.ORIG
$ sudo ln -s /opt/local/bin/ruby1.9 /usr/bin/ruby 
```

# spring - 缓慢的弹簧上下文初始化

> ID：11679566
> 
> 赞同：1
> 
> 时间：2012-07-26T23:36:23.297
> 
> 标签：spring

我们的上下文初始化从 60 秒跳到了大约 15 分钟。在慢速和快速情况下，它最终都会成功启动。无论哪种方式都没有致命错误。是否有特定的日志记录设置甚至建议的类来设置断点（或添加断点日志记录）？

我已经找到了该行为开始的修订版，但尚不清楚是什么导致它花费了这么长时间。我在 DefaultListableBeanFactory 中设置了断点。这是一个大型应用程序，因此在获取和创建 bean 时调用堆栈有时有数百个深度，但将其与先前的修订版（快速完成）进行比较显示出相似的性质。在慢速修订和快速修订之间，没有任何异常之处。

我已经通过“慢速部分”在随机点暂停了执行，堆栈跟踪看起来很合理，根据需要实例化新的 bean，在可能的情况下设置属性（这可能会导致更多的递归 doCreateBean 调用等）。

我还没有费心设置分析器，但怀疑它是否有用。慢版本花费所有时间的代码（bean factory，context init）当然也是快版本花费最多时间的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T01:18:30.363

您可能想要检查详细的 GC 日志。可能是它以某种方式创建了很多对象，您会看到 1）堆不断增长，表示“额外”bean 或 2）很多 Nursery GC 表示创建了很多对象，但没有太多停留（通过添加根据上下文）。

对于 #1，[Eclipse MAT](http://www.eclipse.org/mat/)之类的工具将帮助您分析占用最多内存的对象的堆转储。

对于＃2，分析器仍然会有所帮助。查看拨打的电话数量，而不是花费的时间。您可能希望找到被大量调用的构造函数或其他创建/初始化方法。从那里您可以追溯找到有问题的 bean。

# css - 使用 CSS 实现页面加载的淡入效果

> ID：11679567
> 
> 赞同：507
> 
> 时间：2012-07-26T23:36:49.423
> 
> 标签：css, css-transitions, opacity

可以使用 CSS 过渡来允许文本段落在页面加载时淡入吗？

我真的很喜欢它在[http://dotmailapp.com/](http://web.archive.org/web/20120728071954/http://www.dotmailapp.com/)上的样子，并且很想使用 CSS 来使用类似的效果。该域名已被购买，不再具有上述效果。存档副本可以[在 Wayback Machine 上](http://web.archive.org/web/20120728071954/http://www.dotmailapp.com/)查看。

### 插图

有这个标记：

```
<div id="test">
    <p>​This is a test</p>
</div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

使用以下 CSS 规则：

```
#test p {
    opacity: 0;
    margin-top: 25px;
    font-size: 21px;
    text-align: center;
    -webkit-transition: opacity 2s ease-in;
    -moz-transition: opacity 2s ease-in;
    -o-transition: opacity 2s ease-in;
    -ms-transition: opacity 2s ease-in;
    transition: opacity 2s ease-in;
}​ 
```

如何在加载时触发转换？

* * *

## 回答 #1

> 赞同：1061
> 
> 时间：2012-07-27T04:10:40.120

## 方法一：

如果您正在寻找自调用过渡，那么您应该使用[CSS 3 Animations](https://developer.mozilla.org/en-US/docs/Web/CSS/animation)。它们也不受支持，但这正是它们的用途。

### CSS

```
#test p {
    margin-top: 25px;
    font-size: 21px;
    text-align: center;

    -webkit-animation: fadein 2s; /* Safari, Chrome and Opera > 12.1 */
       -moz-animation: fadein 2s; /* Firefox < 16 */
        -ms-animation: fadein 2s; /* Internet Explorer */
         -o-animation: fadein 2s; /* Opera < 12.1 */
            animation: fadein 2s;
}

@keyframes fadein {
    from { opacity: 0; }
    to   { opacity: 1; }
}

/* Firefox < 16 */
@-moz-keyframes fadein {
    from { opacity: 0; }
    to   { opacity: 1; }
}

/* Safari, Chrome and Opera > 12.1 */
@-webkit-keyframes fadein {
    from { opacity: 0; }
    to   { opacity: 1; }
}

/* Internet Explorer */
@-ms-keyframes fadein {
    from { opacity: 0; }
    to   { opacity: 1; }
}

/* Opera < 12.1 */
@-o-keyframes fadein {
    from { opacity: 0; }
    to   { opacity: 1; }
} 
```

### 演示

*   [http://jsfiddle.net/SO_AMK/VV2ek/](http://jsfiddle.net/SO_AMK/VV2ek/)

### 浏览器支持

所有现代浏览器和 Internet Explorer 10（及更高版本）：[http ://caniuse.com/#feat=css-animation](http://caniuse.com/#feat=css-animation)

## 方法二：

或者，您可以使用 jQuery（或纯 JavaScript；参见第三个代码块）在加载时更改类：

### jQuery

```
$("#test p").addClass("load");​ 
```

### CSS

```
#test p {
    opacity: 0;
    font-size: 21px;
    margin-top: 25px;
    text-align: center;

    -webkit-transition: opacity 2s ease-in;
       -moz-transition: opacity 2s ease-in;
        -ms-transition: opacity 2s ease-in;
         -o-transition: opacity 2s ease-in;
            transition: opacity 2s ease-in;
}

#test p.load {
    opacity: 1;
} 
```

### 纯 JavaScript（不在演示中）

```
document.getElementById("test").children[0].className += " load"; 
```

### 演示

*   [http://jsfiddle.net/SO_AMK/a9dnW/](http://jsfiddle.net/SO_AMK/a9dnW/)

### 浏览器支持

所有现代浏览器和 Internet Explorer 10（及更高版本）：[http ://caniuse.com/#feat=css-transitions](http://caniuse.com/#feat=css-transitions)

## 方法三：

或者，您可以使用*.Mail*使用的方法：

### jQuery

```
$("#test p").delay(1000).animate({ opacity: 1 }, 700);​ 
```

### CSS

```
#test p {
    opacity: 0;
    font-size: 21px;
    margin-top: 25px;
    text-align: center;
} 
```

### 演示

*   [http://jsfiddle.net/SO_AMK/a9dnW/3/](http://jsfiddle.net/SO_AMK/a9dnW/3/)

### 浏览器支持

**jQuery 1.x**：所有现代浏览器和 Internet Explorer 6（及更高版本）：http: [//jquery.com/browser-support/](http://jquery.com/browser-support/)
**jQuery 2.x**：所有现代浏览器和 Internet Explorer 9（及更高版本）：[http:// jquery.com/browser-support/](http://jquery.com/browser-support/)

这种方法是最交叉兼容的，因为目标浏览器不需要支持 CSS 3 过渡*或*动画。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-04-24T09:36:33.537

您可以使用`onload=""`HTML 属性并使用 JavaScript 来调整元素的不透明度样式。

按照您的建议保留您的 CSS。将您的 HTML 代码编辑为：

```
<body onload="document.getElementById(test).style.opacity='1'">
    <div id="test">
        <p>​This is a test</p>
    </div>
</body> 
```

**这也适用于在完成加载时淡入整个页面：**

HTML：

```
<body onload="document.body.style.opacity='1'">
</body> 
```

CSS：

```
body{ 
    opacity: 0;
    transition: opacity 2s;
    -webkit-transition: opacity 2s; /* Safari */
} 
```

查看[W3Schools](http://en.wikipedia.org/wiki/W3Schools)网站：[transitions](http://www.w3schools.com/css/css3_transitions.asp)和一篇关于[使用 JavaScript 更改样式](http://www.w3schools.com/js/js_htmldom_css.asp)的文章。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-27T13:38:57.693

回应@AMK 关于如何在没有 jQuery 的情况下进行转换的问题。我放在一起的一个非常简单的例子。如果我有时间再考虑一下，我也许可以完全消除 JavaScript 代码：

```
<style>
    body {
        background-color: red;
        transition: background-color 2s ease-in;
    }
</style>

<script>
    window.onload = function() {
        document.body.style.backgroundColor = '#00f';
    }
</script>

<body>
    <p>test</p>
</body> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-22T06:28:07.867

期待2020年的[网络动画](https://developer.mozilla.org/en-US/docs/Web/API/Web_Animations_API)。

```
async function moveToPosition(el, durationInMs) {
  return new Promise((resolve) => {
    const animation = el.animate([{
        opacity: '0'
      },
      {
        transform: `translateY(${el.getBoundingClientRect().top}px)`
      },
    ], {
      duration: durationInMs,
      easing: 'ease-in',
      iterations: 1,
      direction: 'normal',
      fill: 'forwards',
      delay: 0,
      endDelay: 0
    });
    animation.onfinish = () => resolve();
  });
}

async function fadeIn(el, durationInMs) {
  return new Promise((resolve) => {
    const animation = el.animate([{
        opacity: '0'
      },
      {
        opacity: '0.5',
        offset: 0.5
      },
      {
        opacity: '1',
        offset: 1
      }
    ], {
      duration: durationInMs,
      easing: 'linear',
      iterations: 1,
      direction: 'normal',
      fill: 'forwards',
      delay: 0,
      endDelay: 0
    });
    animation.onfinish = () => resolve();
  });
}

async function fadeInSections() {
  for (const section of document.getElementsByTagName('section')) {
    await fadeIn(section, 200);
  }
}

window.addEventListener('load', async() => {
  await moveToPosition(document.getElementById('headerContent'), 500);
  await fadeInSections();
  await fadeIn(document.getElementsByTagName('footer')[0], 200);
});
```

```
body,
html {
  height: 100vh;
}

header {
  height: 20%;
}

.text-center {
  text-align: center;
}

.leading-none {
  line-height: 1;
}

.leading-3 {
  line-height: .75rem;
}

.leading-2 {
  line-height: .25rem;
}

.bg-black {
  background-color: rgba(0, 0, 0, 1);
}

.bg-gray-50 {
  background-color: rgba(249, 250, 251, 1);
}

.pt-12 {
  padding-top: 3rem;
}

.pt-2 {
  padding-top: 0.5rem;
}

.text-lightGray {
  color: lightGray;
}

.container {
  display: flex;
  /* or inline-flex */
  justify-content: space-between;
}

.container section {
  padding: 0.5rem;
}

.opacity-0 {
  opacity: 0;
}
```

```
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <link rel="icon" href="/favicon.ico" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Web site created using create-snowpack-app" />
  <link rel="stylesheet" type="text/css" href="./assets/syles/index.css" />
</head>

<body>
  <header class="bg-gray-50">
    <div id="headerContent">
      <h1 class="text-center leading-none pt-2 leading-2">Hello</h1>
      <p class="text-center leading-2"><i>Ipsum lipmsum emus tiris mism</i></p>
    </div>
  </header>
  <div class="container">
    <section class="opacity-0">
      <h2 class="text-center"><i>ipsum 1</i></h2>
      <p>Cras purus ante, dictum non ultricies eu, dapibus non tellus. Nam et ipsum nec nunc vestibulum efficitur nec nec magna. Proin sodales ex et finibus congue</p>
    </section>
    <section class="opacity-0">
      <h2 class="text-center"><i>ipsum 2</i></h2>
      <p>Cras purus ante, dictum non ultricies eu, dapibus non tellus. Nam et ipsum nec nunc vestibulum efficitur nec nec magna. Proin sodales ex et finibus congue</p>
    </section>

    <section class="opacity-0">
      <h2 class="text-center"><i>ipsum 3</i></h2>
      <p>Cras purus ante, dictum non ultricies eu, dapibus non tellus. Nam et ipsum nec nunc vestibulum efficitur nec nec magna. Proin sodales ex et finibus congue</p>
    </section>
  </div>
  <footer class="opacity-0">
    <h1 class="text-center leading-3 text-lightGray"><i>dictum non ultricies eu, dapibus non tellus</i></h1>
    <p class="text-center leading-3"><i>Ipsum lipmsum emus tiris mism</i></p>
  </footer>
</body>

</html>
```

# c - Linux 中多线程的信号处理

> ID：11679568
> 
> 赞同：136
> 
> 时间：2012-07-26T23:36:49.960
> 
> 标签：c, linux, multithreading, signals, ipc

在 Linux 中，当一个程序（可能有多个线程）接收到一个信号（如 SIGTERM 或 SIGHUP）时会发生什么？

哪个线程拦截信号？多个线程可以得到相同的信号吗？是否有专门用于处理信号的特殊线程？如果不是，处理信号的线程内部会发生什么？信号处理程序完成后如何恢复执行？

* * *

## 回答 #1

> 赞同：155
> 
> 时间：2012-07-27T00:05:39.480

[`pthreads(7)`](http://man7.org/linux/man-pages/man7/pthreads.7.html)描述了 POSIX.1 要求一个进程中的所有线程共享属性，包括：

*   信号处置

POSIX.1 还要求每个线程的某些属性是*不同的，包括：*

*   信号掩码 ( [`pthread_sigmask(3)`](http://man7.org/linux/man-pages/man3/pthread_sigmask.3.html))

*   交替信号栈 ( [`sigaltstack(2)`](http://man7.org/linux/man-pages/man2/sigaltstack.2.html))

Linux 内核的[`complete_signal`](https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git/tree/kernel/signal.c?h=v4.18.15#n898)例程有以下代码块——注释非常有用：

```
/*
 * Now find a thread we can wake up to take the signal off the queue.
 *
 * If the main thread wants the signal, it gets first crack.
 * Probably the least surprising to the average bear.
 */
if (wants_signal(sig, p))
        t = p;
else if (!group || thread_group_empty(p))
        /*
         * There is just one thread and it does not need to be woken.
         * It will dequeue unblocked signals before it runs again.
         */
        return;
else {
        /*
         * Otherwise try to find a suitable thread.
         */
        t = signal->curr_target;
        while (!wants_signal(sig, t)) {
                t = next_thread(t);
                if (t == signal->curr_target)
                        /*
                         * No thread needs to be woken.
                         * Any eligible threads will see
                         * the signal in the queue soon.
                         */
                        return;
        }
        signal->curr_target = t;
}

/*
 * Found a killable thread.  If the signal will be fatal,
 * then start taking the whole group down immediately.
 */
if (sig_fatal(p, sig) &&
    !(signal->flags & SIGNAL_GROUP_EXIT) &&
    !sigismember(&t->real_blocked, sig) &&
    (sig == SIGKILL || !p->ptrace)) {
        /*
         * This signal will be fatal to the whole group.
         */ 
```

因此，您会看到*您*负责信号的传递位置：

如果您的进程已将信号的处置设置为`SIG_IGN`or `SIG_DFL`，则所有线程都会忽略该信号（或默认值——kill、core 或 ignore）。

如果您的进程已将信号的处置设置为特定的处理程序例程，那么您可以通过使用[`pthread_sigmask(3)`](http://man7.org/linux/man-pages/man3/pthread_sigmask.3.html). 您可以指定一个线程来管理所有这些，或者为每个信号创建一个线程，或者这些选项的任意组合用于特定信号，或者您依赖 Linux 内核当前将信号传递到主线程的默认行为。

但是，根据[`signal(7)`](http://man7.org/linux/man-pages/man7/signal.7.html)手册页，有些信号是特殊的：

> 可以为整个进程（例如，当使用[kill(2)](http://man7.org/linux/man-pages/man2/kill.2.html)发送时）或为特定线程（例如，作为执行结果生成的某些信号，例如 SIGSEGV 和 SIGFPE特定的机器语言指令是线程导向的，使用 [pthread_kill(3)](http://man7.org/linux/man-pages/man3/pthread_kill.3.html)的特定线程的信号也是如此）。进程导向的信号可以被传递到当前没有阻塞信号的任何一个线程。如果多个线程的信号被解除阻塞，那么内核选择一个任意线程来传递信号。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-07-26T23:42:39.250

这略有细微差别，具体取决于您使用的 Linux 内核版本。

假设 2.6 posix 线程，如果你在谈论操作系统发送 SIGTERM 或 SIGHUP，信号被发送到进程，由根线程接收和处理。使用 POSIX 线程，您也可以将 SIGTERM 发送到单个线程，但我怀疑您是在询问操​​作系统向进程发送信号时会发生什么。

在 2.6 中，SIGTERM 将导致子线程“干净地”退出，而在 2.4 中，子线程处于不确定状态。

# qt - 从 QT Creator 加载构建的 exe 与从文件系统加载 exe 不同吗？[网络套件问题]

> ID：11679571
> 
> 赞同：2
> 
> 时间：2012-07-26T23:37:08.913
> 
> 标签：qt, qt-creator, qwebview, qnetworkaccessmanager

我正在编写一个连接到我公司内部网的桌面应用程序。我尝试加载的页面是 HTTP，但它会重定向到使用 HTTPS 的登录站点。该应用程序从 QT Creator 启动时可以很好地加载页面（重定向和身份验证都成功，并且页面显示正确），但是当我从文件系统运行应用程序时（所有 DLL 都正确放入文件夹中），加载失败（ QWebView 的 loadFinished(bool) 信号以 false 发出，这是我在网上了解到的罕见情况）。我可以从 QNetworkManager 的 SIGNAL(finished(QNetworkReply*)) 中捕获第一个 302 重定向状态，但是当第二次捕获信号时，状态变为无效。从 QNetworkReply 的文档中，我读到“如果连接不是基于 HTTP 的，则此属性将不存在。” 我不 不知道为什么。此外，不会发出 SSL 错误信号。由于该应用程序在 QT Creator 中运行良好。我相信这应该是由于启动时环境的一些差异。有人有线索吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T23:53:42.320

没有使用 QTCreator 的经验，但检查权限问题？

# linux - 查看linux下当前设置的JAVA_OPTS

> ID：11679572
> 
> 赞同：0
> 
> 时间：2012-07-26T23:37:09.257
> 
> 标签：linux, jvm

好的新手 linux 问题在这里，但我不能为我的生活找到它的答案

我可以为 tomcat 设置新的 JAVA_OPTS 设置，但无法弄清楚如何查看 JAVA_OPTS 的当前设置。服务器是 CentOS，jdk 是 OpenJDK 1.6.0_24

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T13:58:24.183

如果你有 XWindow，你可以运行 jconsole，并附加到你的目标进程。然后，您可以在“VM Summary”选项卡的“VM arguments”行中看到 JAVA_OPTS。

# android - 应用程序设计：通过 Intent 传递日期还是使用 Singletons？

> ID：11679574
> 
> 赞同：0
> 
> 时间：2012-07-26T23:37:21.963
> 
> 标签：android, singleton

我正在创建一个应用程序，我需要在几个`Activity`s 和`Service`s 之间传递相对复杂的类。让我们这样说：

```
public class A implements Serializable{

    int myInt;
    String myString;
    B myB;
}

public class B implements Serializable{
    ArrayList<String> myStrings;
} 
```

现在这可以通过 来完成`Intent.putExtra(String, Serializable)`，但我也可以创建一个包含实例的单例类`A`。使用单例可以轻松访问我的实例`A`，但对我来说似乎有点“hacky”。

使用这两种方法的优点和缺点是什么？为什么我不应该使用其中一种方法有什么严格的理由吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T23:59:56.897

您可以尝试[在活动之间共享数据](https://stackoverflow.com/questions/4878159/android-whats-the-best-way-to-share-data-between-activities)。

您可以使用意图、Singleton 类、公共静态字段/方法、对象的 WeakReferences HashMap、应用程序首选项、文件、contentProviders、SQLite DB。

看这里[Android 常见问题](http://developer.android.com/guide/faq/framework.html#3)

# javascript - IE8中JQuery AJAX文件下载，显示黄色安全栏

> ID：11679576
> 
> 赞同：2
> 
> 时间：2012-07-26T23:37:32.423
> 
> 标签：javascript, jquery, ajax

我有一个页面，用户可以在表单上选择一些选项，表单提交事件通过 .AJAX 将此数据发布到 PHP 页面并将文件写入服务器，然后 PHP 页面返回文件名，我使用 jquery。下载以提示用户保存文件。

这在 FF 和 Chrome 中完美运行，但我在 IE 中收到可怕的黄色信息栏。更糟糕的是，如果我的用户从信息栏中选择“仍然下载”，则页面只会刷新，而不会实际提示用户下载文件。

我在 Stackoverflow 上进行了一些搜索，但似乎没有回答这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T23:46:39.847

您看到这一点是因为用户启动的浏览器事件和以编程方式启动的浏览器事件之间的定义不同。通常，由于 jQuery 将事件绑定到操作而触发的事件被认为是以编程方式启动的，即

```
$("#myElement").click(
    function() {
        $.ajax(...);
    }
); 
```

`.click()`当您尝试通过将 jQuery事件绑定到您的可点击链接等来打开新选项卡时，您将看到同样的症状。

一个可能解决您的问题的方法是在您的 HTML 代码中使用一个事件属性，该属性调用一个 JS 函数，您的 AJAX 调用是在其中进行的，即

```
<script type="text/javascript"> 

function submitAndDownload() {
    $.ajax(...); //form submit
    $.ajax(...); //download file
}

</script>

<button onClick="submitAndDownload();"></button> 
```

这样浏览器就认为事件是用户发起的。您当然可以将下载 ajax 请求嵌套在表单提交 ajax 请求的正文中。这将取决于您需要做什么。但是，如果您有其他 ajax 调用混合在一起，则如果一个嵌套在另一个中，您可能会在套接字闭包中看到一些不一致。

# git - Git：将完整的文件树添加到主服务器

> ID：11679577
> 
> 赞同：1
> 
> 时间：2012-07-26T23:37:52.750
> 
> 标签：git, branch

我有一个现有文件夹，其中包含许多没有源代码控制的文件和文件夹。

我在它的根文件夹中创建了一个 git 存储库：

```
 git init 
```

然而，没有“主人”

```
git branch 
```

什么都不返回。

如何创建`master`分支并将其设置为包含现有文件和文件夹的文件夹中的初始分支和唯一分支？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T23:38:47.197

分支是提交第一个文件后自动创建的`master`默认分支：

```
git add .
git commit -m "initial commit" 
```

# eclipse - TestNG：Eclipse 插件中的测试名称

> ID：11679580
> 
> 赞同：0
> 
> 时间：2012-07-26T23:38:05.300
> 
> 标签：eclipse, testng

假设我有一个像这样的简单测试：

```
public class SimpleTestFactory {
    private int instanceNumber;

    @Factory(dataProvider="provideTestData")
    public SimpleTestFactory(int instanceNumber) {
        this.instanceNumber = instanceNumber;
    }

    @DataProvider
    public static Object[][] provideTestData() { return new Object[][] {{1},{2}}; }

    @Test
    public void testOne() { System.out.printf("Test 1, Instance %d%n", instanceNumber); }
} 
```

当我在 Eclipse 中运行它时，我在“所有测试”选项卡中只得到一个条目而不是两个条目；`SimpleTestFactory`两个测试实例都在->下“组合在一起” `testOne()`。此外，假设有一个 if-block`testOne()`实例 2 失败。然后，“所有测试”选项卡中的结果可能会显示（取决于实例 1 还是实例 2 是第一个）通过堆栈跟踪的测试或者没有堆栈跟踪的测试失败，就好像一个实例的结果正在覆盖另一个实例。

我怎样才能得到它，以便两个实例分别显示？也就是说，我得到类似`SimpleTestFactory[1]`->`testOne()`和`SimpleTestFactory[2]`->的东西`testOne()`？如果我添加第二个测试`testTwo()`怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T06:47:55.980

让您的测试实现`org.testng.ITest`并覆盖`getName()`以返回实例的名称。

# eclipse - 如何在 Eclipse 插件中以编程方式获取透视列表

> ID：11679587
> 
> 赞同：0
> 
> 时间：2012-07-26T23:38:56.740
> 
> 标签：eclipse, eclipse-plugin

我正在开发一个 Eclipse 插件，用户可以在其中从头开始创建透视图。用户必须输入透视的名称以及其他内容，我需要检查该名称是否已经存在，因此我需要阅读有关透视的信息。我还需要以编程方式将透视图添加到列表中。

你知道哪个类与透视图（不是 UI）相关吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T07:22:45.243

```
IPerspectiveRegistry perspectives = PlatformUI.getWorkbench ().getPerspectiveRegistry ();
if (perspectives.findPerspectiveWithLabel (name) != null){
    //Error
} 
```

# navision - 无法使用 Web 服务在 Dynamics Nav 中设置县

> ID：11679592
> 
> 赞同：0
> 
> 时间：2012-07-26T23:39:29.210
> 
> 标签：navision, dynamics-nav

我正在努力将我们的电子商务系统与后端的动态导航集成。如果客户还不存在，我会创建它。除了“县”之外，所有字段似乎都粘在一起。当我对现有客户进行读取时，County 会填写正确的数据。

奇怪的是，当我创建销售订单时，Ship_To_County、Bill_To_County 和 Sell_To_County 似乎都没有停留在那里。

**编辑**

我将销售订单页面公开为 Web 服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T11:09:49.910

检查基础表对象。OnInsert 或 OnModify（针对该字段）中可能有代码覆盖您传入的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T00:20:22.613

原来这是由于输入系统的数据不完整造成的。输入邮政编码会触发在邮政编码表中的查找。只有此表有县的空白条目。一旦用户退出该字段，这将导致城市和州都被覆盖。

答案是禁用此功能。邮政编码不尊重城市边界（即，一个邮政编码中可以有多个城市），它​​们也不必尊重州边界。让系统覆盖用户输入的内容是没有意义的。

# google-maps - 所有使用 mode=transit 的谷歌地图 Directions Web 服务 API 请求都返回 INVALID_REQUEST

> ID：11679594
> 
> 赞同：4
> 
> 时间：2012-07-26T23:39:37.723
> 
> 标签：google-maps, google-maps-api-3

以下是一些返回步行或驾驶结果但不包括公交结果的 URL（即，将模式更改为步行或驾驶，您将看到结果）

[http://maps.googleapis.com/maps/api/directions/json?origin=EC3N4AB&destination=EC4M8AD&sensor=false&mode=transit](http://maps.googleapis.com/maps/api/directions/json?origin=EC3N4AB&destination=EC4M8AD&sensor=false&mode=transit)

[http://maps.googleapis.com/maps/api/directions/json?origin=Toledo&destination=Madrid®ion=es&sensor=false&mode=transit](http://maps.googleapis.com/maps/api/directions/json?origin=Toledo&destination=Madrid&region=es&sensor=false&mode=transit)

我无法通过 mode=transit 获得单一响应。请注意，第二个 URL 直接来自 API 文档

还有其他人注意到同样的事情吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-27T08:36:03.087

对不起。它不是全球性的事情

例如，这不起作用： [http ://maps.googleapis.com/maps/api/directions/json?origin=san+francisco&destination=seattle&sensor=false&mode=transit](http://maps.googleapis.com/maps/api/directions/json?origin=san+francisco&destination=seattle&sensor=false&mode=transit)

但是，这又发生了： http://maps.googleapis.com/maps/api/directions/json?origin=san+francisco&destination=seattle&sensor=false&mode=transit&departure_time= [1343376768](http://maps.googleapis.com/maps/api/directions/json?origin=san+francisco&destination=seattle&sensor=false&mode=transit&departure_time=1343376768)

它不是全球性问题。谷歌将离开时间或到达时间作为必填字段。这是他们 API 的最新更改。

感谢你的帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T04:16:56.753

公交路线在全球范围内不起作用。例如，此请求有效：

```
http://maps.googleapis.com/maps/api/directions/json?origin=san+francisco&destination=seattle&sensor=false 
```

另一方面，如果您访问 maps.google.com 并尝试通过 UI 获取从托莱多到马德里的公交路线，它会指出该请求超出了覆盖范围。API 返回此信息的方式是通过 INVALID_REQUEST 状态。

# c# - 动态编译 C# 代码而不在内存中堆积程序集

> ID：11679596
> 
> 赞同：3
> 
> 时间：2012-07-26T23:39:40.907
> 
> 标签：c#, compilation

问题（以及一些不必要的信息）：我正在用 C#（不是 chatterbot）创建一个聊天机器人，并希望用户能够在机器人上运行自定义代码。基本上，您通过网络发送字符串消息，然后机器人运行其中包含的代码。

我已经研究并实际实现/使用了 CSharpCodeProvider，但是，每次编译自定义代码时都会出现问题，它会向 AppDomain 添加另一个程序集（这是不可能删除的）。当您考虑到在一个生命周期中可能会发生数十或数百个单独的自定义代码调用时，这就会成为一个问题。

我的想法是可能有一种解释语言或某种可以从 C# 调用的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T23:42:46.437

如果您删除整个 appdomain，则可以删除程序集。所以你可以创建一个新的 appdomain，在那里加载程序集（或从那里编译它）并在使用后处理它。

您可以每 100 条左右的语句回收一次 appdomain，以便摊销循环一条语句所需的（小）时间。

# trigger.io - 错误：无法检索设备列表

> ID：11679597
> 
> 赞同：4
> 
> 时间：2012-07-26T23:39:41.113
> 
> 标签：trigger.io

当我尝试使用 Target IO 运行我的应用程序时，出现以下错误。我使用的是 64 位的 Windows 7。

```
[INFO] Installing app on device: is it connected?
[INFO] connect: No error
[INFO] usbmuxd_get_device_list: error opening socket!
[INFO] ERROR: Unable to retrieve device list!
I get the following messages when I try to install my application.
[ERROR] Failed when running C:\...win-ios-install.exe: connect: No error

usbmuxd_get_device_list: error opening socket!
ERROR: Unable to retrieve device list! 
```

有人有这个错误吗？任何想法如何解决它？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T15:21:06.927

问题是我没有安装 iTunes。文档在这里：[http ://docs.trigger.io/en/v1.4/tools/ios-windows.html#setting-up-forge-to-run-ios-apps](http://docs.trigger.io/en/v1.4/tools/ios-windows.html#setting-up-forge-to-run-ios-apps)

我从 mib_9fc0ff 的 tigger.io IRC 得到了答案。感谢 mib_9fc0ff 和阿米尔。

# variables - 车把中的变量

> ID：11679599
> 
> 赞同：5
> 
> 时间：2012-07-26T23:39:55.860
> 
> 标签：variables, handlebars.js

我将模型传递给车把模板并将一些属性放在一行中。我想为每一行设置某种位置变量。具体来说，我想知道已经创建了多少行，并且每行都有一个位置。

例如

```
{{#each row}}
<span class = (indexHere)>
  <tr>
     <td> <{{this.property}}>
  </tr>
</span>
{{/each}} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-06-12T09:37:10.357

这是一个老问题，也许当时 Handlebars 不包括该`@index`属性，但根据当前（1.3.0）文档：

循环访问 中的项目时`each`，您可以选择通过以下方式引用当前循环索引`{{@index}}`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-26T23:43:46.367

你自己做帮手:-)

这是你可以偷的一个： [https ://gist.github.com/1048968](https://gist.github.com/1048968)

# php - 如何在 jQuery 中的页面之间保留从 PHP 登录检索到的数据

> ID：11679602
> 
> 赞同：2
> 
> 时间：2012-07-26T23:40:13.700
> 
> 标签：php, javascript, jquery, html, json

我在 jQuery mobile 和 php 中制作了一个登录脚本。php 文件设置一个创建会话并设置 $_SESSION['myusername']。我可以从 login.html 页面的会话变量中检索用户名还是必须执行 'var myusername = data.username;' 然后在登录页面上以某种方式将此 var 传递给 loggedin.html 页面。

```
<?php
header('Access-Control-Allow-Origin: *');
header('Content-type: application/json');

$host="localhost"; // Host name 
$dbusername="root"; // Mysql username 
$password=""; // Mysql password 
$db_name="testDB"; // Database name 

// Connect to server and select databse.
mysql_connect("$host", "$dbusername", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

// username and password sent from form 
$myusername=$_POST['username']; 
$mypassword=$_POST['password']; 

$sql="SELECT * FROM members WHERE username='$myusername' and password='$mypassword'";
$result=mysql_query($sql);

// Mysql_num_row is counting table row
$count=mysql_num_rows($result);
// If result matched $myusername and $mypassword, table row must be 1 row
if($count==1){
    while($row = mysql_fetch_array($sql)){

// Register $myusername, $mypassword and redirect to file "login_success.php"
    session_register("session_username");
    session_register("session_password"); 

    $id = $row["id"];   
    session_register('id'); 
    $_SESSION['id'] = $id;

    session_register('username'); 
    $_SESSION['username'] = $myusername;

    mysql_query("UPDATE members SET last_log_date=now() WHERE id='$id' LIMIT 1");
    }
$json = array('boolean' => true, 'jsonUser' => $_SESSION['username']);
echo json_encode($json);
}
else {
echo "Wrong Username or Password";
}
?> 
```

编辑：

```
var user="<?php echo $myusername; ?>";
$(document).ready(function(e) {

$('#usernamediv').html(user); 
```

});

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T23:42:39.587

你可以这样：

```
<script language="javascript">
var username="<?php echo $_SESSION['username']; ?>";
</script> 
```

没有理由不能将 echo PHP 变量放入 Javascript 中！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T03:44:59.043

再会！如我所见，您不使用任何 PHP 框架。尝试使用任何，例如[Codeigniter](http://codeigniter.com)，这样您就可以将所有 $_SESSION 放入常规变量中的视图中。所以你不需要任何@session_start 语句。

# html - 属性的html标签无效

> ID：11679605
> 
> 赞同：0
> 
> 时间：2012-07-26T23:40:19.927
> 
> 标签：html

我正在尝试改进此联系表单：[链接已删除] 我想添加正确的标签，以便在单击名称时设置输入焦点。因此，我在 name 字段中添加了一个 id，在我的标签中添加了 for="name" 属性。在只有该标签和输入的干净页面中，它按预期工作..但在该页面中它不起作用。

有没有人暗示为什么这不起作用？

编辑：我知道其他标签和字段不能工作..我刚刚更改了第一个输入来尝试一下；）

```
<li><label for="name">Name</label><span class="wpcf7-form-control-wrap name"><input type="text" name="name" value="" id="name" class="wpcf7-form-control wpcf7-text wpcf7-validates-as-required" size="40"></span></li> 
```

编辑：使用的表单插件似乎很乱，我会尝试切换到 wordpress jetpack 表单..所以问题解决了

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T23:44:37.267

仔细检查您的代码。看这个：

```
<li><label for="Name">Strasse </label> <span class="wpcf7-form-control-wrap Strasse"><input type="text" name="Strasse" value="" class="wpcf7-form-control wpcf7-text" size="40" /></span></li>
<li><label for="Name">PLZ </label> <span class="wpcf7-form-control-wrap PLZ"><input type="text" name="PLZ" value="" class="wpcf7-form-control wpcf7-text" size="40" /></span></li>
<li><label for="Name">Ort </label> <span class="wpcf7-form-control-wrap Ort"><input type="text" name="Ort" value="" class="wpcf7-form-control wpcf7-text" size="40" /></span></li> 
```

您多次使用 for="Name" 。

# c# - Windows 8 中的家庭安全网络过滤器

> ID：11679607
> 
> 赞同：1
> 
> 时间：2012-07-26T23:40:26.587
> 
> 标签：c#, wmi, windows-8

我正在尝试编写一些 C# 代码以编程方式读/写 Windows 8 中的家庭安全控件，特别是 Web 和应用程序筛选器列表。

WMI 可以使用以下命令公开这些值：

```
PS C:\Windows\system32> Get-WmiObject -Class WpcURLOverride -Namespace root/CIMV2/Applications/WindowsParentalControls

__GENUS          : 2
__CLASS          : WpcURLOverride
__SUPERCLASS     :
__DYNASTY        : WpcURLOverride
__RELPATH        : WpcURLOverride.SID="S-1-5-21-4241459202-2635765079-3956675256-1002",URL="http://block.com"
__PROPERTY_COUNT : 3
__DERIVATION     : {}
__SERVER         : TEST-BOX
__NAMESPACE      : root\CIMV2\Applications\WindowsParentalControls
__PATH           : \\TEST-BOX\root\CIMV2\Applications\WindowsParentalControls:WpcURLOverride.SID="S-1-5-21-4241459202-2
                   635765079-3956675256-1002",URL="http://block.com"
Allowed          : 2
SID              : S-1-5-21-4241459202-2635765079-3956675256-1002
URL              : http://block.com
PSComputerName   : TEST-BOX

__GENUS          : 2
__CLASS          : WpcURLOverride
__SUPERCLASS     :
__DYNASTY        : WpcURLOverride
__RELPATH        : WpcURLOverride.SID="S-1-5-21-4241459202-2635765079-3956675256-1002",URL="http://allow.com"
__PROPERTY_COUNT : 3
__DERIVATION     : {}
__SERVER         : TEST-BOX
__NAMESPACE      : root\CIMV2\Applications\WindowsParentalControls
__PATH           : \\TEST-BOX\root\CIMV2\Applications\WindowsParentalControls:WpcURLOverride.SID="S-1-5-21-4241459202-2
                   635765079-3956675256-1002",URL="http://allow.com"
Allowed          : 1
SID              : S-1-5-21-4241459202-2635765079-3956675256-1002
URL              : http://allow.com
PSComputerName   : TEST-BOX 
```

[这个问题](https://stackoverflow.com/questions/4442672/how-to-create-insert-wmi-object)提到了复制现有对象，但我还没有找到使用通用或这些特定 WMI 对象的方法。

如何插入或删除条目？感谢您的输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T18:12:28.080

发布一个可行的（如果不是理想的）完整的答案。这些片段特别适用于我的用例，但希望它们可以帮助某人

```
 private static SecurityIdentifier UserSID(string username)
  {
     var f = new NTAccount(username);
     return (SecurityIdentifier)f.Translate(typeof(SecurityIdentifier));
  }

  private string PsCmdAddSite(Uri url, bool allow)
  {
     return string.Format(
@"$o = ([WMIClass] ""root\CIMV2\Applications\WindowsParentalControls:WpcURLOverride"").CreateInstance()
$o.Allowed = {0}
$o.URL = ""{1}""
$o.SID = ""{2}""
$o.Put()", (allow ? "1" : "2"), url, UserSID('TargetUsername'));
  }

  private static string PsCmdRemoveAllSites()
  {
     return
@"$allSites = Get-WmiObject -Class WpcURLOverride -Namespace root/CIMV2/Applications/WindowsParentalControls;
foreach ($site in $allSites){Remove-WmiObject -InputObject $site;}";
  }

  private static void RunPsScript( string scriptText )
  {
     // create Powershell runspace, logically a single PS session
     Runspace runspace = RunspaceFactory.CreateRunspace();
     runspace.Open();

     // create a pipeline and feed the script text
     Pipeline pipeline = runspace.CreatePipeline();
     pipeline.Commands.AddScript(scriptText);

     pipeline.Commands.Add("Out-String");

     // execute the script
     pipeline.Invoke();
     runspace.Close();
  } 
```

# oracle - db 表锁定行和 entityManager 状态

> ID：11679610
> 
> 赞同：0
> 
> 时间：2012-07-26T23:41:29.947
> 
> 标签：oracle, hibernate, seam, entitymanager, seam2

我有一个会话范围类，其中包含一个用于管理用户统计信息的对象。当用户（通过 SSO）登录时，应用程序范围的方法会检查表中的活动会话 - 如果发现任何会话，则使用表中的会话 ID 使会话无效。

在会话范围类中的 userStats 表中添加了一行：

```
/**
     * get all the info needed for collecting user stats, add userStats to the users session and save to userStats table
     * this happens after session is created
     * @param request
     */
    private void createUserStats(HttpServletRequest request){
        if (!this.sessionExists) {
            this.userStats = new UserStats(this.user, request.getSession(true)
                    .getId(), System.getProperty("atcots_host_name"));
            request.getSession().setAttribute("userstats", this.userStats);
            Events.instance().raiseEvent("userBoundToSession", this.userStats);
            this.sessionExists = true;
            log.info("user " + this.user + " is now logged on");

            // add this to the db
            try {
                this.saveUserStatsToDb();
            } catch (Exception e) {
                log.error("could not save " + this.userStats.getId().getPeoplesoftId() + " information to db");
                e.printStackTrace();
            }           

        }

    } 
```

当用户的会话被销毁时，该行会更新一个注销时间。

由于我无法解释或重复的原因，过去 2 周内有 2 个用户登录并锁定了该行。当这种情况发生时，该用户的任何数据库调用都不再可能，并且该应用程序对于该用户实际上是不可用的。

```
 [org.hibernate.util.JDBCExceptionReporter] (http-127.0.0.1-8180-3) SQL Error: 0, SQLState: null
2012-07-26 18:45:53,427 ERROR [org.hibernate.util.JDBCExceptionReporter] (http-127.0.0.1-8180-3) Transaction is not active: tx=TransactionImple < ac, BasicAction: -75805e7d:3300:5011c807:6a status: ActionStatus.ABORT_ONLY >; - nested throwable: (javax.resource.ResourceException: Transaction is not active: tx=TransactionImple < ac, BasicAction: -75805e7d:3300:5011c807:6a status: ActionStatus.ABORT_ONLY >) 
```

这些统计数据的收集很重要，但不是生死攸关，如果我无法获得我想放弃并继续前进的信息。但这并没有发生。发生的事情是 entityManager 将事务标记为回滚，之后的任何数据库调用都会返回上述错误。我最初将用户统计信息保存在应用程序范围内 - 因此，当行锁定时，它锁定了整个应用程序的 entityManager（这并没有很好地解决）。当我将该方法移动到会话范围时，它只会锁定有问题的用户。

```
I tried setting the entityManger to a lesser scope(I tried EVENT and METHOD):
        ((EntityManager) Component.getInstance("entityManager", ScopeType.EVENT)).persist(this.userStats);
        ((EntityManager) Component.getInstance("entityManager", ScopeType.EVENT)).flush(); 
```

这根本不会进行 db 调用。我试过手动回滚交易，但没有任何乐趣。

当我锁定表中包含在对话范围级别使用的数据的行时，结果几乎没有灾难性 - 没有数据被保存但它恢复了。

**预计到达时间：**

我尝试引发一个 AsynchronousEvent - 它在本地工作，但部署到我们的远程测试服务器 - 这很奇怪 - 我得到：

```
 DEBUG [org.quartz.core.JobRunShell] (qtz_Worker-1) Calling execute on job DEFAULT.2d0badb3:139030aec6e:-7f34
    INFO  [com.mypkg.myapp.criteria.SessionCriteria] (qtz_Worker-1) observing predestroy for seam
    DEBUG [com.mypkg.myapp.criteria.SessionCriteria] (qtz_Worker-1) destroy destroy destroy sessionCriteria
    ERROR [org.jboss.seam.async.AsynchronousExceptionHandler] (qtz_Worker-1) Exeception thrown whilst executing asynchronous call
    java.lang.IllegalArgumentException: attempt to create create event with null entity
            at org.hibernate.event.PersistEvent.<init>(PersistEvent.java:45)
            at org.hibernate.event.PersistEvent.<init>(PersistEvent.java:38)
            at org.hibernate.impl.SessionImpl.persist(SessionImpl.java:619)
            at org.hibernate.impl.SessionImpl.persist(SessionImpl.java:623)
... 
```

奇怪的是，它似乎正在通过 Quartz 处理程序。

**再次预计到达时间：**

所以，并不奇怪，我将 Quartz 设置为异步处理程序——我认为它只是用于调度作业。此外，异步方法无法访问会话上下文，因此我必须向我的观察方法添加一个参数才能真正拥有一个要持久的对象：

```
@Observer("saveUserStatsEvent")
@Transactional
public void saveUserStatsToDb(UserStats userstats) throws Exception {
    if(userstats != null){
        log.debug("persisting userstats to db");
        this.getEntityManager().persist(userstats);
        this.getEntityManager().flush();
    }
} 
```

我该如何从中恢复？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T17:32:39.457

首先，在指定范围内`Component.getInstance()`并没有在指定范围内创建组件的结果。`EntityManager`实例始终存在于对话上下文中（无论是临时的还是长期运行的）。`scope`参数的`getInstance()`唯一目的是提示组件应该位于的上下文，以避免在所有上下文中进行昂贵的搜索（如果您没有指定上下文或指定错误的上下文，就会发生这种情况）。

由于先前的错误，事务被标记为回滚。如果 entityManager 无论如何都要提交，则它不会是事务性的（事务实际上保证如果发生错误，则不会保留任何内容）。如果要将登录事务与统计信息收集隔离开来，最简单的解决方案是`saveUserStatsToDb`在异步事件中执行该方法（事务绑定到线程，因此使用不同的线程可以保证事件在单独的事务中处理）。

像这样的东西：

```
@Observer("saveUserStatsEvent")
@Transactional
public void saveUserStatsToDb(UserStats stats) {
    ((EntityManager)Component.getInstance("entityManager")).persist(stats);
} 
```

在你的`createUserStats`方法中：

```
Events.instance().raiseAsynchronousEvent("saveUserStatsEvent", this.userStats); 
```

然而，这只是通过将交易一分为二来规避问题。您**真正要解决**的是问题根源的锁定条件。

# httpwebrequest - 使用 fiddler 从 msiexec 捕获 http 请求

> ID：11679614
> 
> 赞同：0
> 
> 时间：2012-07-26T23:42:01.740
> 
> 标签：httpwebrequest, windows-installer, fiddler

我将如何捕获在安装期间在 msi 包下发出的提琴手请求？

我有一个应用程序，它在安装过程中发出几个 http 请求，通过覆盖 windows msi 包中的安装方法。

我希望能够使用 fiddler 捕获这些请求，但不能。MS Network Monitor 3.4 捕获了请求，所以我知道活动正在发生。

我可以启动 fiddler 并捕获在浏览器中发出的请求，因此 fiddler 本身正在工作，我没有设置它或我的安装程序使用任何非标准端口。

我现在只是创建一个请求并尝试获得响应：

```
var httpRequest = (HttpWebRequest)WebRequest.Create(url);
        try
        {
            using (var httpResponse = (HttpWebResponse)httpRequest.GetResponse())
            {
                using (var responseStream = httpResponse.GetResponseStream())
                {
                    if (responseStream != null)
                        responseStream.Close();
                } 
```

我做了一些研究，得出的结论是提琴手应该能够捕捉到这一点，所以我不确定我做错了什么。任何建议将不胜感激，谢谢。

更新：我采用了在安装程序方法中使用的代码，并将其放入独立的控制台应用程序中。Fiddler 在该场景中捕获请求。所以我看到的是，安装程序以某种方式掩盖了请求，所以提琴手看不到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T11:42:27.730

我没有与 Fiddler 合作过，所以我不知道你如何告诉它观看什么，但大多数自定义操作在与原始 msiexec 进程不同的进程中执行。非模拟操作通常在完全不同的上下文中执行（通常是管理用户）。

# windows - 在 Windows 批处理文件中生成 0-9 的随机数

> ID：11679616
> 
> 赞同：0
> 
> 时间：2012-07-26T23:42:05.710
> 
> 标签：windows, batch-file, cmd

我正在尝试编写一个 Windows 批处理文件，该文件将生成一个从 0 到 9 的随机数，然后根据随机数在我们的游戏服务器中加载不同的地图列表。

我试图修改此论坛上用于生成随机字符的类似文件，但是当我将 maxchars 变量的长度减少到 1 时。

我有时会得到`@echo is off`回应，有时会得到一个数字。

这是我所拥有的：

```
@echo off & setlocal EnableDelayedExpansion
REM Random.bat
REM
REM Change these values to whatever you want, or change the code to take them
REM as command-line arguments.  You must set CHARS_LEN to the string length
REM of the string in the CHARS variable.
REM 
REM This script generates a string of these characters at least
REM MIN_CHARS_IN_LINE chars long and at most MAX_CHARS_IN_LINE chars long.

SET CHARS=0123456789
SET /A CHARS_LEN=10 + 10 + 10
SET /A MIN_CHARS_IN_LINE=1
SET /A MAX_CHARS_IN_LINE=2

REM Pick a random line length and output a random character until we reach that
REM length.

call:rand %MIN_CHARS_IN_LINE% %MAX_CHARS_IN_LINE%
SET /A LINE_LENGTH=%RAND_NUM%

SET LINE=
    for /L %%a in (1 1 %LINE_LENGTH%) do (
    call:rand 1 %CHARS_LEN%
    SET /A CHAR_INDEX=!RAND_NUM! - 1
    CALL SET EXTRACTED_CHAR=%%CHARS:~!CHAR_INDEX!,1%%
    SET LINE=!LINE!!EXTRACTED_CHAR!    
)
echo !LINE!

goto:EOF

REM The script ends at the above goto:EOF.  The following are functions.

REM rand()
REM Input: %1 is min, %2 is max.
REM Output: RAND_NUM is set to a random number from min through max.
:rand
SET /A RAND_NUM=%RANDOM% * (%2 - %1 + 1) / 32768 + %1
goto:EOF

:eof 
```

一旦我能够可靠地选择字符，我只需在最后添加一个选择过程，该过程将为每个地图列表使用不同的命令行调用服务器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T01:42:07.347

LastStar007 方法适用于 0 到 9 之间的值。对于返回 0 到*n*之间的伪随机数的更通用的解决方案，只需使用 SET /A 获得 %random% 模数 (n+1)。

例如，要在命令行上获取 0 到 9 之间的随机数，请使用

```
set /a "rand=%random% % 10" 
```

如果在批处理文件中使用，则模运算符必须加倍

```
set /a "rand=%random% %% 10" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T00:14:12.920

使用随机字符串，`SET`然后删除除最后一个字符之外的所有内容。

```
 SET RAND=%RANDOM:~-1% 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-15T11:46:26.447

如果您的问题仍然存在，请尝试以下操作。它生成一个介于`a`和之间的数字`b`。根据您的需要进行调整：

```
@echo off   
color 02  
echo enter value of A  
set  /p a=  
echo.  
echo  enter value of B  
set /p b=  
:main  
set no=%random%  
if  %no% GEQ %a% goto sub  
if not %no% GEQ %a% goto  main  
:sub  
if %no% LEQ  %b% goto end  
if not %no% LEQ  %b% goto  main  
:end      
echo %no%  
goto main 
```

# mysql - 语句列表中具有多列的 MySQL CASE 语句

> ID：11679620
> 
> 赞同：0
> 
> 时间：2012-07-26T23:42:47.067
> 
> 标签：mysql, sql

我有这个查询，我知道它不起作用，但我把它保留为伪代码，以帮助解释我在做什么。我正在尝试按过去一周的星期几从预订表中获取“预订”和“销售”总计。因此，Mon1B = 星期一的预订，Mon1S = 星期一的销售额。

```
SELECT  
   CASE WEEKDAY(b.created)
   WHEN 0 THEN (SELECT COUNT(uuid) as Mon1B, SUM(amount) as Mon1S)
   WHEN 1 THEN (SELECT COUNT(uuid) as Tue1B, SUM(amount) as Tue1S)
   WHEN 2 THEN (SELECT COUNT(uuid) as Wed1B, SUM(amount) as Wed1S)
   WHEN 3 THEN (SELECT COUNT(uuid) as Thu1B, SUM(amount) as Thu1S)
   WHEN 4 THEN (SELECT COUNT(uuid) as Wed1B, SUM(amount) as Wed1S)
   WHEN 5 THEN (SELECT COUNT(uuid) as Wed1B, SUM(amount) as Wed1S)
   WHEN 6 THEN (SELECT COUNT(uuid) as Wed1B, SUM(amount) as Wed1S)
END CASE
FROM Bookings b
WHERE b.created > '#week1Start#' and b.created <= '#week1End#' 
```

如何在 MySQL 中完成这样的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T23:50:59.023

是的，但是 case 只能返回一个值。你可以这样做：

```
SELECT sum(CASE when WEEKDAY(b.created) = 0 then 1 else 0 end) as Mon1b,
       sum(case when weekday(b.created) = 0 then amount else 0 end) as Mon1S,
       ...
FROM Bookings b
WHERE b.created > '#week1Start#' and b.created <= '#week1End#' 
```

不过，您可能会发现 7 行更容易：

```
select WEEKDAY(b.created), count(*) as cnt, sum(amount) as amt
from Bookings b
WHERE b.created > '#week1Start#' and b.created <= '#week1End#'
group by WEEKDAY(b.created)
order by 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T23:54:40.190

我想你想要这样的东西：

```
SELECT COUNT(IF(WEEKDAY(b.created)=0,uuid,NULL)) AS Mon1B
     , SUM(IF(WEEKDAY(b.created)=0,amount,NULL)) AS Mon1S
     , COUNT(IF(WEEKDAY(b.created)=1,uuid,NULL)) AS Tue1B
     , SUM(IF(WEEKDAY(b.created)=1,amount,NULL)) AS Tue1S 
```

或者，如果您更喜欢等效（但更长）的 CASE 表达式：

```
SELECT COUNT(CASE WEEKDAY(b.created) WHEN 0 THEN uuid END) AS Mon1B
     , SUM(CASE WEEKDAY(b.created) WHEN 0 THEN amount END) AS Mon1S
     , COUNT(CASE WEEKDAY(b.created) WHEN 1 THEN uuid END) AS Tue1B
     , SUM(CASE WEEKDAY(b.created) WHEN 1 THEN amount END) AS Tue1S 
```

CASE 表达式的结果是一个标量；它不能返回多个值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T04:26:19.127

```
SELECT  WEEKDAY(b.created),
   CASE 
   WHEN b.weekday='Monday' THEN (SELECT COUNT(b.uuid) as Mon1B, SUM(s.amount) as Mon1S from bookings b,sales s      where b.day='Monday' and s.day='Monday')
   WHEN b.weekday='Tuesday' THEN (SELECT COUNT(b.uuid) as Tue1B, SUM(s.amount) as Tue1 from bookings b,sales s      where b.day='Tuesday' and s.day='tuesday')
   WHEN b.weekday='Wednesday' THEN (SELECT COUNT(b.uuid) as Wed1B, SUM(s.amount) as Wed1S from bookings b,sales s      where b.day='wednesday' and s.day='wednesday')
   WHEN b.weekday='Thursday' THEN (SELECT COUNT(b.uuid) as Thu1B, SUM(s.amount) as Thu1S from bookings b,sales s      where b.day='Thursday' and s.day='Thursday')
   WHEN b.weekday='Friday' THEN (SELECT COUNT(b.uuid) as Fri1B, SUM(s.amount) as Fri1S from bookings b,sales s      where b.day='Friday' and s.day='Friday')
   WHEN b.weekday='saturaday' THEN (SELECT COUNT(b.uuid) as Sat1B, SUM(s.amount) as sat1S from bookings b,sales s      where b.day='Saturaday' and s.day='Saturaday')
   WHEN b.weekday='Sunday' THEN (SELECT COUNT(b.uuid) as sun1B, SUM(s.amount) as sun1S from bookings b,sales s      where b.day='Sunday' and s.day='Sunday')
END CASE
FROM Bookings b
WHERE b.created > '#week1Start#' and b.created <= '#week1End#' 
```

# networking - 客户端与服务器术语

> ID：11679625
> 
> 赞同：11
> 
> 时间：2012-07-26T23:43:26.820
> 
> 标签：networking

我总是把这两个词弄混。您如何确定哪一侧是服务器，哪一侧是客户端？它是由它是发送数据还是接收数据决定的？（假设连接是单向的）

谢谢，

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-26T23:45:20.440

在[TCP](https://en.wikipedia.org/wiki/Transmission_Control_Protocol)中，它由发起连接的一方确定。客户端发起连接，服务器监听并接受连接。连接后，数据可以双向流动。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-26T23:58:34.370

定义：

[服务器端](http://en.wikipedia.org/wiki/Server-side)是指在计算机网络中由服务器以客户端-服务器关系执行的操作。通常，服务器是运行在远程服务器上的软件程序，例如 Web 服务器，可从用户的本地计算机或工作站访问。

[客户端](http://en.wikipedia.org/wiki/Client-side)是指客户端在计算机网络中以客户端-服务器关系执行的操作。通常，客户端是一种计算机应用程序，例如 Web 浏览器，它在用户的本地计算机或工作站上运行并在必要时连接到服务器。

![在此处输入图像描述](../Images/38e115fa6f742aab3ffe4ca0a57cb67b.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T23:45:57.910

如果连接的一侧的实例比另一侧的实例多得多，则具有更多实例的实例就是客户端。

如果一侧的运行时间比另一侧长很多，那么运行时间更长的就是服务器。

# deployment - Orchard cms 多部署环境

> ID：11679630
> 
> 赞同：9
> 
> 时间：2012-07-26T23:44:02.993
> 
> 标签：deployment, orchardcms, appharbor

我最近开始使用 orchard 开发一些网站，到目前为止这很好，但是我对如何正确设置我的部署环境有点困惑。

通常我会设置本地开发站点、测试、登台和直播。使用 web.config 转换来更改连接字符串和其他应用程序设置

我最近一直在使用[AppHarbor](https://appharbor.com/)进行托管，我认为它们很棒。

[这里](http://support.appharbor.com/kb/tips-and-tricks/running-orchard-on-appharbor)有在 AppHarbor 上设置 Orchard 的指南

虽然我必须同意[这里](http://www.longcloudtech.com/Blogs/Yankiwi/post/2011/03/13/Working-with-Orchard-from-a-Hard-Programmers-Prospective-e28093-Part-I.aspx)关于我读过的所有帖子的评论，希望我想要使用和喜欢 Web Matrix！

尽管 Orchard 中的大多数开发都是通过创建模块来完成的。我认为对于至少一个站点，他们至少需要临时和实时环境。

设置和从一种环境迁移到另一种环境的最佳方法是什么？

我看过多租户项目，但这似乎解决了一个不同的问题

我很想知道其他人做了什么。以及对模块化 Orchard 开发和内部源代码控制的任何建议 - 仅针对这些模块。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T12:02:24.613

我使用 import-export 模块在我的 DTAP 环境中导出和导入内容。确保在您的驱动程序中实现/覆盖导入和导出（请参阅：导出 Orchard 1.6 /plug[中缺少自定义部件属性；））](https://stackoverflow.com/questions/14891326/custom-part-properties-missing-in-export-orchard-1-6)

然而，小部件应该手动完成 AFAIK。他们不能很好地使用该模块导出和导入。

至于模块和主题：只需复制文件夹即可。媒体也是如此。

# css - 如何在 CSS 中使用“双色调”字体变体？

> ID：11679651
> 
> 赞同：12
> 
> 时间：2012-07-26T23:47:25.383
> 
> 标签：css, html, webfonts

某些字体有轮廓和填充的变体，如果您在重叠的文本上使用它们，它会在填充的文本上绘制轮廓或阴影笔划。这与像 -webkit-text-stroke-color 这样的文本的描边不同，因为有时填充的字体包含阴影或其他细节。

以下是一些旨在以这种方式使用的字体示例。

[http://www.myfonts.com/fonts/matchandkerosene/duotone/](http://www.myfonts.com/fonts/matchandkerosene/duotone/)

[http://www.myfonts.com/fonts/scrowleyfonts/stomp/](http://www.myfonts.com/fonts/scrowleyfonts/stomp/)

我有点能够使用这样的CSS来让它工作：

[http://jsfiddle.net/6SakC/2/](http://jsfiddle.net/6SakC/2/)

这将创建两个 H1 跨度，并使用上边距将轮廓移到填充轮廓的顶部。

但是，这对我来说似乎并不理想。两个问题：

*   我不想复制 html 中的文本。
*   我必须通过反复试验来猜测最高利润。
*   如果文本换行，这将不再起作用。

有一个更好的方法吗？我可以忍受必须复制文本，但我真的想要一种更自动的方式来进行定位。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T00:09:49.843

您可以将大纲文本放在 h1 内并使用绝对定位而不是估计边距，就像在这个 jsFiddle 中一样：http: [//jsfiddle.net/6SakC/4/](http://jsfiddle.net/6SakC/4/)

这也解决了文本换行的问题。

为避免重复标记中的文本，您可以使用 JavaScript 创建重复的文本，如在此 jsFiddle 中：http: [//jsfiddle.net/6SakC/5/](http://jsfiddle.net/6SakC/5/)（但这可能不是最好的主意，因为文本可能会在没有轮廓的情况下显示一段时间，并且浏览器设置中偶尔会禁用 JS。）

# c# - Linq-to-Entities 返回列表以及每个项目的平均评分

> ID：11679656
> 
> 赞同：0
> 
> 时间：2012-07-26T23:47:53.010
> 
> 标签：c#, asp.net, linq-to-entities, aggregate-functions

我正在返回从 RESTAURANT、CUISINE、CITY 和 STARRATING 表中提取信息的餐馆列表。我想获取每家餐厅及其相关城市和美食的列表，以及 STARRATING 表中的平均评分。到目前为止，这就是我所拥有的……在此先感谢。

```
 RestaurantsEntities db = new RestaurantsEntities();
public List<RESTAURANT> getRestaurantsWRating(string cuisineName, string cityName, string priceName, string ratingName)
{
    var cuisineID = db.CUISINEs.First(s => s.CUISINE_NAME == cuisineName).CUISINE_ID;
    List<RESTAURANT> result = (from RESTAURANT in db.RESTAURANTs.Include("CITY").Include("CUISINE").Include("STARRATING")
                               where RESTAURANT.CUISINE_ID == cuisineID
                               orderby RESTAURANT.REST_NAME ascending
                               select RESTAURANT).ToList();

    return result;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T07:32:39.853

从你所拥有的看起来`Restaurant`有一个`STARRATING`集合。如果是这样，您可以这样做：

```
from r in db.Restaurants
where r.CUISINE_ID == cuisineID
orderby r.REST_NAME ascending
select new { 
    Restaurant = r, 
    City = r.CITY,
    Cuisine = r.CUISINE,
    AvgRating = r.STARRATING.Average(rt => rt.Rating) 
} 
```

如果这不正确，您需要提供有关您的类和关联的更多信息（最好是类图）。

（顺便说一句，对类和属性名称使用大写字母是不习惯的）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-27T02:47:54.253

首先，我会将上面的整个代码块包装在 using 语句中：

```
using(RestaurantEntities db = new RestaurantEntities())
{
    ...
} 
```

这将有助于清理 EF 上下文。

我通常会这样做的方式是，如果您可以控制您的数据库，我会在数据库中创建一个执行此工作的视图，将视图添加到您的实体模型并查询该视图。这简化了整个过程并将聚合的工作卸载到数据库中。

如果您无法控制数据库或不喜欢视图技术，那么我会像您所做的那样使用包含技术进行查询，然后将部分类添加到 RESTAURANT（如果使用模型优先）以添加AverageRating 属性，然后手动计算每个相关 STARRATING 组相关行的平均值，并将结果值应用于添加的属性。获得所有数据后，您可以通过 linq to objects 执行此操作。除非您确信只返回一个或几个 RESTAURANT 实例，否则此技术不会随着更多数据的累积而很好地扩展。你可以使用类似的东西：

```
//query data as you have done above...
foreach(RESTAURANT r in result)
{
    if(r.STARRATING.Count() > 0)
    {
        r.AverageRating = r.STARRATING.Average(rating => rating.Value); //.Value is your field name
    }
    else
    {
        r.AverageRating = 0; // or whatever default you prefer...
    }
} 
```

希望这可以帮助。

# api - 如何从 Google Apps 脚本在 Google 日历 ACL 中插入规则

> ID：11679658
> 
> 赞同：1
> 
> 时间：2012-07-26T23:48:20.787
> 
> 标签：api, insert, calendar, google-apps-script, acl

如何将新用户添加到 Google 日历的 ACL？我正在尝试发送一个 POST HTTP 请求。也许 XML 有问题？下面的代码会生成服务器错误 (400)。（编辑：显示 oAuth）。

```
//---------------------------------------------------------------
// Add a rule to the Access Control List for 'Fake Calendar 1.0'
//---------------------------------------------------------------
function addRule() {
  // Get Calendar ID, script user's email, and the API Key for access to Calendar API
  var calId = '12345calendar.google.com';
  var userEmail = Session.getActiveUser().getEmail();
  var API_KEY = 'ABC123';
  var newUserEmail = 'person@example.net';

  // Get authorization to access the Google Calendar API
  var apiName = 'calendar';
  var scope = 'https://www.googleapis.com/auth/calendar';
  var fetchArgs = googleOAuth_(apiName, scope);

  fetchArgs.method = 'POST';
  var rawXML = "<entry xmlns='http://www.w3.org/2005/Atom' " +
               "xmlns:gAcl='http://schemas.google.com/acl/2007'>" +
               "<category scheme='http://schemas.google.com/g/2005#kind' " +
               "term='http://schemas.google.com/acl/2007#accessRule'/>" +
               "<gAcl:role value='owner'/>" +
               "<gAcl:scope type='user' value='"+userEmail+"'/>" +
               "</entry>";

  fetchArgs.payload = rawXML;
  fetchArgs.contentType = 'application/atom+xml';

  // Get the requested content (the ACL for the calendar)
  var base = 'https://www.googleapis.com/calendar/v3/calendars/';
  var url = base + calId + '/acl?key=' + API_KEY;
  var content = UrlFetchApp.fetch(url, fetchArgs).getContentText();
  Logger.log(content);
}

//--------------------------------------------------------------
// Google OAuth 
//--------------------------------------------------------------
function googleOAuth_(name,scope) {
  var oAuthConfig = UrlFetchApp.addOAuthService(name);
  oAuthConfig.setRequestTokenUrl("https://www.google.com/accounts/OAuthGetRequestToken?scope="+scope);
  oAuthConfig.setAuthorizationUrl("https://www.google.com/accounts/OAuthAuthorizeToken");
  oAuthConfig.setAccessTokenUrl("https://www.google.com/accounts/OAuthGetAccessToken");
  oAuthConfig.setConsumerKey("anonymous");
  oAuthConfig.setConsumerSecret("anonymous");
  return {oAuthServiceName:name, oAuthUseToken:"always"};
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T03:11:05.037

在执行这段代码之前，您是否经过了 oAuth 授权过程。您的应用必须先获得明确授权，然后才能使用 Calendar API 执行任何重要操作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T05:57:44.197

斯里克是对的。您需要在 UrlFetchApp 中使用 oAuth 参数。给定的参考 URL 显示了一些在 Apps 脚本中使用 oAuth 以使用 Google 的 REST API 的示例 [https://sites.google.com/site/appsscripttutorial/urlfetch-and-oauth](https://sites.google.com/site/appsscripttutorial/urlfetch-and-oauth)

# solr - 多核搜索，统一结果

> ID：11679665
> 
> 赞同：1
> 
> 时间：2012-07-26T23:49:18.410
> 
> 标签：solr

我在一个 solr 实例上有 2 个内核。两个核心的模式共享相同的主键。我想合并来自两个核心的查询结果。可以使用solr吗？

我关注了[Solr:Distributed Search](http://wiki.apache.org/solr/DistributedSearch) ，但是该示例对我不起作用（我确实得到了结果，但它不统一）。我使用以下方法查询了 solr 核心：

> localhost:8983/solr/core1/select/?shards=localhost:8983/solr/core1,localhost:8983/solr/core0&q=123_456。

有没有人尝试过这种方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T03:18:36.933

统一结果是什么意思？
您应该能够从单个结果集中的两个核心获得组合结果。[但是，限制](http://wiki.apache.org/solr/DistributedSearch#Distributed_Searching_Limitations)
很少。 两个核心的架构需要相同或已同步，以便搜索发生在相同的字段上并相应地返回。

核心共享相同的主键是什么意思？
Id 在内核中必须是唯一的。

> 唯一键字段在所有分片中必须是唯一的。如果遇到具有重复唯一键的文档，Solr 将尝试返回有效结果，但行为可能是不确定的。

# javascript - 编辑推荐人数据

> ID：11679670
> 
> 赞同：-2
> 
> 时间：2012-07-26T23:50:33.463
> 
> 标签：javascript, jquery, http

我将如何更改 HTTP Referrer 数据？

例如

```
 header("Location: http://www.google.com/; Referrer: http://www.google.com/admins.php"); 
```

这似乎没有指定工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T23:53:50.030

我假设你想用 Ajax 做这个？如果是这样的话，那么...

使用普通香草`XMLHttpRequest`，您可以使用`setRequestHeader`：

```
request.setRequestHeader('Referer', 'http://whatever.you/want-it/to?be'); 
```

使用`jQuery.ajax`，您将指定`headers`选项：

```
headers: {
    'Referer': 'http://whatever.you/want-it/to?be'
} 
```

# hibernate - Hibernate HQL 新构造函数 VarArgs

> ID：11679671
> 
> 赞同：-2
> 
> 时间：2012-07-26T23:50:36.367
> 
> 标签：hibernate, variadic-functions

我正在使用休眠版本 3.2.5 我有这样的 HQL：

```
select new org.com.Utilities.Inventario.ReporteInventario(P.Id,P.Name,DP.Rotacion,LongResult,IntegerResult,IntegerResult,IntegerResult,IntegerResult,IntegerResult,IntegerResult,) 
```

我有一个这样的构造函数：

```
public ReporteInventario(
        String CodPro,
        String NomProd,
        String RotProd,
        Long TotalStock,
        Integer Val1,
        Integer Val2,
        Integer Val3,
        Integer Val4,
        Integer Val5,
        Integer Val6) 
```

工作正常。但我尝试了以下方法：

```
public ReporteInventario(
    String CodPro,
    String NomProd,
    String RotProd,
    Long TotalStock,
    Integer.. Array) 
```

但我收到不符合要求的构造函数。我不喜欢冗长。我的问题是我可以在我的 Hibernate 可以填充的构造函数中使用 Varargs。多谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T01:58:05.293

是Java吗？（这似乎不是您的编码约定）。

如果是这样，尽管我没有尝试过，但我相信您需要将 Integer 数组传递给 vararg 参数。因为在 Java 中，vararg 实际上是一个数组，而这只是编译器帮助将“参数”更改为数组的语法糖。

但是我认为没有任何方法可以在 HQL 中创建数组

因此，请坚持您的第一个方法签名。

# variables - Lua 变量中的特殊字符

> ID：11679672
> 
> 赞同：2
> 
> 时间：2012-07-26T23:50:37.077
> 
> 标签：variables, lua, character, native

我正在使用 Lua，我想使用一个所谓的“本机变量”，它将是只读的，并且它们将被识别为在它们前面带有“$”标记，例如 $variable。但在我发现 Lua 只接受普通字母字符和下划线作为变量名。有什么方法可以修改 Lua 代码来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T13:46:08.550

考虑预处理您的 lua 源以使用简单的解析器替换`$identifier`，`__NATIVE.identifier`然后将修改后的源发送到常规 lua 解释器。然后将 __NATIVE 实现为具有适当元表的全局表，以实现您想要的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T23:56:59.980

您可以使用元表来防止变量被更改。Lua 源在 MIT 下是免费的，它几乎可以用于任何用途，但我没有关于如何修改它以允许`$`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T23:54:32.093

Lua 语言中不允许使用特殊字符：

见这里： http: [//lua.gts-stolberg.de/en/Variablen.php](http://lua.gts-stolberg.de/en/Variablen.php)

# javascript - 使用 getElementById 使用 javascript 更改 CSS

> ID：11679679
> 
> 赞同：9
> 
> 时间：2012-07-26T23:52:52.970
> 
> 标签：javascript, html, css, getelementbyid

我不知道如何使用 javascript 访问特定的 CSS。

让我们说，

```
#menu { color: red; } 
```

可以通过

```
document.getElementById('menu').style.color = "blue"; 
```

但我想访问

```
#menu li a { height: 10%; } 
```

如何使用 document.getElementById() 访问它？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-26T23:55:54.023

### 纯 JavaScript 解决方案：

您不能`getElementById()`在这种情况下使用，因为它的目的只是查询 id 属性，但您可以[`getElementsByTagName()`](https://developer.mozilla.org/en/DOM/element.getElementsByTagName)在以下情况下使用`#menu`：

```
var m = document.getElementById('menu');
// Get all <li> children of #menu
var lis = m.getElementsByTagName('li');
// Loop over them
for (var i=0; i<lis.length; i++) {
  // Get all <a> children of each <li>
  var atags = lis[i].getElementsByTagName('a');
  for (var a = 0; a<atags.length; a++) {
    // And set their color in a loop.
    atags[a].style.color = 'blue';
    // or change some other property
    atags[a].style.height = '25%'; 
  }
} 
```

### jQuery解决方案：

如果您能够使用 jQuery，这将变得非常简单：

```
$('#menu li a').css('color', 'blue'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T23:54:09.327

你没有；您必须找到`<a>`符合该条件的所有标签。

该`.getElementById()`函数是关于通过唯一的“id”字符串获取元素。如果您需要获取其他元素，还有其他 API 可以使用：`.getElementsByTagName()`、`.getElementsByClass()`、`.querySelectorAll()`等。浏览器支持各不相同，甚至`.getElementById()`在 IE 和其他浏览器之间也有所不同。

# java - 加载 Factual Instance 时出现 Java 错误 java.lang.NoClassDefFoundError

> ID：11679680
> 
> 赞同：0
> 
> 时间：2012-07-26T23:52:54.000
> 
> 标签：java

我很简单地尝试像这样实例化 Factual 类的实例：

```
Factual factual = new Factual(key, secret); 
```

每次我开始加载我都会得到错误：

`Exception in thread "AWT-EventQueue-0" java.lang.NoClassDefFoundError: com/google/api/client/http/HttpResponseException`

我已经加载了所有正确的 jar 文件并重新检查了所有代码以确保我没有遗漏任何内容。我所有的导入都是正确的，并且依赖关系很好。

堆：

```
 Exception in thread "AWT-EventQueue-0" java.lang.NoClassDefFoundError: com/google/api/client/http/HttpResponseException
    at mygasfeedquery.FactualHelper.<init>(FactualHelper.java:19)
    at mygasfeedquery.mainGUI.jButton1ActionPerformed(mainGUI.java:320)
    at mygasfeedquery.mainGUI.access$200(mainGUI.java:18)
    at mygasfeedquery.mainGUI$3.actionPerformed(mainGUI.java:188)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
    at java.awt.Component.processMouseEvent(Component.java:6505)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
    at java.awt.Component.processEvent(Component.java:6270)
    at java.awt.Container.processEvent(Container.java:2229)
    at java.awt.Component.dispatchEventImpl(Component.java:4861)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
    at java.awt.Container.dispatchEventImpl(Container.java:2273)
    at java.awt.Window.dispatchEventImpl(Window.java:2713)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:707)
    at java.awt.EventQueue.access$000(EventQueue.java:101)
    at java.awt.EventQueue$3.run(EventQueue.java:666)
    at java.awt.EventQueue$3.run(EventQueue.java:664)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    at java.awt.EventQueue$4.run(EventQueue.java:680)
    at java.awt.EventQueue$4.run(EventQueue.java:678)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:677)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:90)
Caused by: java.lang.ClassNotFoundException: com.google.api.client.http.HttpResponseException
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356) 
```

*   番石榴-r09
*   google-api-client-1.10.3-beta
*   杰克逊核心asl-1.9.1
*   杰克逊核心lgpl-1.9.1
*   杰克逊-映射器-asl-1.9.1
*   commons-io-2.1
*   json-20090211
*   junit-4.4
*   事实-java-driver-1.5.0
*   json-simple-1.1.1
*   mysql-connector-java-5.1.21-bin

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T15:20:58.720

此错误是依赖于[http://mvnrepository.com/artifact/com.google.http-client/google-http-client/1.7.0-beta](http://mvnrepository.com/artifact/com.google.http-client/google-http-client/1.7.0-beta)

一旦我加载了 google-api-client jar，它就给了我一个新错误。但是后来有人提到依赖关系可能依赖于其他依赖关系。因此，我查看了存储库，并在此基础上找到了我需要的存储库。

基本上，我没有每个所需的所有 jar，而且我不知道依赖关系可以相互依赖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-04T19:26:31.073

当任何库 jar 文件丢失或无法找到时，可能会发生此错误，如果您使用的是 netbeans 框架并且左侧栏中的项目名称以红色字体显示，则表明项目需要一些修复。要解决此问题，请右键单击您的项目名称，然后单击解决项目问题，它会告诉您那里的确切问题以及哪些文件丢失或无法找到，然后您可以将丢失的文件设置到您的框架。

# c++ - 在 OSX 中将 MouseEvents 发布到应用程序

> ID：11679685
> 
> 赞同：0
> 
> 时间：2012-07-26T23:53:10.707
> 
> 标签：c++, macos, macos-carbon

我正在尝试将鼠标事件发送到不支持游戏手柄的（我认为是 SDL/OpenGL）游戏。我知道我可以只使用众多可用的游戏手柄到键盘/鼠标应用程序之一，但我认为自己编写会很有趣。以下代码可以正常工作，除非游戏正在运行：

```
// point is a CGPoint that is set earlier on...
CGEventRef event = CGEventCreateMouseEvent(NULL,kCGEventMouseMoved , point,  0);
CGEventSetType(event, kCGEventMouseMoved);// apparently there is a apple bug that requires this...
CGEventPost(kCGHIDEventTap, event);
CFRelease(event); 
```

有了这个，我可以在我的桌面上移动光标，甚至在游戏菜单中，但是在实际游戏中游戏唯一一次得到它是当我移动我的物理鼠标时。发送键盘事件在游戏中可以正常工作，所以我不知道问题是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T02:10:44.750

我发现了问题所在，我不得不使用：

```
CGEventSetIntegerValueField(event, kCGMouseEventDeltaX, dX);
CGEventSetIntegerValueField(event, kCGMouseEventDeltaY, dY); 
```

设置鼠标移动的相对坐标。我认为这是因为游戏将鼠标扭曲到游戏窗口的中心，而我的应用程序没有从中获取鼠标移动事件。

# java - 类型与@helper 不匹配

> ID：11679693
> 
> 赞同：2
> 
> 时间：2012-07-26T23:54:35.217
> 
> 标签：java, playframework, playframework-2.0

我正在尝试显示带有值的表单，但它不起作用。

我的行动：

```
public static Result login() {
    User user = new User();
    user.name = "Murilo";

    Form<User> userForm = form(User.class);

    return ok(login.render(userForm.fill(user)));
} 
```

和我的html：

```
@(myForm : play.data.Form[models.User])

<!DOCTYPE html>
<html>
<head>
</head>
<body>
     @helper.inputText(myForm("name"))
</body>
</html> 
```

但是当我访问它时，会抛出以下错误：

```
type mismatch; found : play.data.Form.Field required: play.api.data.Field 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T05:58:23.387

在您的模板中，它应该是：

```
@(myForm : Form[User])

<!DOCTYPE html>
<html>
<head>
</head>
<body>
     @helper.inputText(myForm("name"))
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T15:53:05.780

作为对**nico_ekito**的好答案的补充：我通常不使用`@helper..`它，因为如果您的表单开始增长（更多字段），它很长并且不可读/不可读。所以我做了以下事情：

```
@(editForm:Form[User]

@*** IMPORTS ****@
@import helper._

@form(routes.Tasks.save(), 'class -> "form-horizontal") {
     @inputText(editForm:Form("description()").....)
     @inputArea(editForm:Form("description()").....)
} 
```

# php - 投票系统，简单 VS 有用

> ID：11679697
> 
> 赞同：0
> 
> 时间：2012-07-26T23:54:58.343
> 
> 标签：php, web, client-side, voting

我正在制作一个带有投票系统的网站，

*对于一些背景信息，该网站将保存来自各种人的所有类型的信息。人们会上传新闻、他们今天所做的事情、他们喜欢和发现的事情！*

现在我被困在这两个投票系统之间......

`+ & -` 这在 StackOverflow 上效果很好，因为它很简单，并且发布的所有内容都是问题/答案，所以除了它有多大帮助之外，没有太多可以判断的地方。但即使它在这里效果很好，在一个有着所有不同的网站上在我看来，这将变得更加低效。

但我的想法是， `More People Should Know about this / Important`这就像投票按钮将内容推送给更多人......

然后有像 `Sad, Funny, Interesting, Clever, Beautiful... etc..` 现在这样的反应与描述性的反应，我认为优势在于更具描述性的搜索，并了解人们对某个事件/新闻/图片的感受。

否决投票就像`report, spam, misleading`等

**这将收集更多关于社区对帖子的看法的信息。**

然而，使用描述性的对于一个全方位的网站来说会很好，我看到的唯一缺点是用户会认为它太多了。

*不问如何构建它，只是想知道您更喜欢哪个。*

你怎么看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T00:38:35.537

我没有得到反对票，这是一个好问题。我必须构建几个需要评级的应用程序，这是需要考虑的事情。

**单选**- 最容易实施，如 Facebook 的 Like、Favoriting 或 Google 的 Plus One。这是最容易编码的，因为您只需要识别每个用户并添加到项目的评分计数。问题是它限制了用户的反馈并且经常误导。由于没有拒绝投票的选项，一个项目纯粹是根据它获得的点击量来评级的。 *例如：*一篇糟糕的帖子获得了 4000 次浏览并获得了 400 次赞，而另一个帖子获得了 300 次浏览并获得了 250 次赞。基于评级/投票系统，人们可能认为前者是更好的项目。

**两种选择**- Up-Down，Like-Dislike：虽然不像单选那么容易，但实现起来也不是很难。它基本上创建了一个用于评分的百分比。这是我在小型项目中最喜欢的，因为它不难编码并且比单个具有更高的准确性。

**多项选择**- 最难实施。虽然编码可能需要更多的工作，但有回报。它为每个项目提供标签，这有助于组织/分组项目它还吸引视图/访问，因为用户关注感兴趣主题的标签。然而，这不是一个完全有效的投票系统，因为两个项目不能公平地相互权衡。正如您所说的那样“*有帮助*”，而不是实际的投票方法

因此，在做出选择时，问问自己你拥有什么样的物品，是否愿意比较它们来描述它们；因此投票或*有帮助*

我个人会使用两者（两个选择和多个），因为它们不是相互排斥的。

**注意：**在构建投票系统时，不要纯粹依赖用户投票，还要考虑其他因素：查看次数、访问者地理位置（针对用户特定的评分）、项目的年龄。

我去写了整篇文章！smh.. 虽然这可能无法涵盖所有​​问题，但这是我在我构建的系统上实施投票的方式。玩转选项，看看哪些适用于特定系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T00:03:16.373

尝试 CMS 系统，例如[http://en.wikipedia.org/wiki/Joomla](http://en.wikipedia.org/wiki/Joomla)或[http://en.wikipedia.org/wiki/Drupal](http://en.wikipedia.org/wiki/Drupal)。

这个 CMS 系统通常有一个文章投票系统。

# jquery - text/html 类型的 HTML 脚本 - 模板

> ID：11679699
> 
> 赞同：4
> 
> 时间：2012-07-26T23:55:17.150
> 
> 标签：jquery, if-statement, syntax, template-engine

我在我正在维护的网站中遇到了这段代码：

```
<script type="text/html" id="searchList">
<li class="listing ${ $data.EvenOdd }">
  {{if $data.DisplaySaleTag }}
{<span class="price">${ $data.Price }</span>}
  {{/if}}
</li>
</script> 
```

我在另一篇文章中读到，`type="text/html"`浏览器无法识别脚本标签，因此它们被忽略，并且它可能被 javascript 模板引擎使用。我很确定它正在使用[这个](http://api.jquery.com/jquery.tmpl/)模板 API（如果我错了，请纠正）。

无论如何，我需要将此代码修改为（比如 C# 语法）`if(!$data.DisplaySaleTag)`，但`{{if !$data.DisplaySaleTag }}`无法正常工作。如何将 a 编码`not`到此`if`语句中？此模板 API 代码是否有任何文档？好像很陌生。。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T23:58:51.680

您将不得不使用`else`：

```
{{if condition}}

{{else}}

{{/if}} 
```

[http://api.jquery.com/template-tag-else/](http://api.jquery.com/template-tag-else/)

# emacs - Emacs：尝试超出文档末尾时禁用哔声

> ID：11679700
> 
> 赞同：23
> 
> 时间：2012-07-26T23:55:22.920
> 
> 标签：emacs, scroll, beep

当试图将光标移动到文档的开头或结尾之外时，有没有办法在 Emacs 中禁用哔声？我通常不会介意，但触控板上滚动的动量使得每当我滚动到文档的顶部或底部时它都会发出十几次哔哔声。

如果可能的话，我宁愿不要为其他事情禁用铃铛。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-07-26T23:57:11.873

放

```
(setq ring-bell-function 'ignore) 
```

在你的`.emacs`. 这将完全禁用铃声，这可能不是您想要的。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-07-27T00:04:39.343

这非常适合我在滚动到限制时禁用铃铛*（*将以下内容添加到您的 .emacs 或其他初始化文件中）：

```
(defun my-bell-function ()
  (unless (memq this-command
        '(isearch-abort abort-recursive-edit exit-minibuffer
              keyboard-quit mwheel-scroll down up next-line previous-line
              backward-char forward-char))
    (ding)))
(setq ring-bell-function 'my-bell-function) 
```

[来源](https://stackoverflow.com/questions/324457/disable-carbon-emacs-scroll-beep)

# c# - C#动态列表字典

> ID：11679703
> 
> 赞同：0
> 
> 时间：2012-07-26T23:55:45.850
> 
> 标签：c#, dynamic, data-structures

我是 C-sharp 的新手。在避免不安全代码的同时尝试解决以下问题。对不起，如果我的描述似乎过分；只是想尽可能清楚。

我正在阅读具有以下格式的文件：

```
Column1  Column2 Column3
1          a        q
1          a        w
2          a        b
1          e        v
3          w        q
3          q        x
...        ...      ... 
```

我正在尝试创建一个数据结构，以便“column1”中的每个唯一项目都链接到 { column2 , column3} 对。像这样的东西：

```
{1} => {a, q}, {a,w} , {e,v}
{2} => {a,b}
{3} => {w,q} , {q,x} 
```

这里的问题是您事先不知道“column1”将有多少不同的独特项目。到目前为止，我已经提前创建了 listdictionary 变量，这样我就可以“.add()”这些对了。如果我在 C++ 中执行此操作，我会有某种数组保存指向包含 {column2, column 3} 对的结构的指针。我承认这可能不是最好的解决方案，但这是我遵循的思路C＃。

简而言之，我正在寻求有关如何动态创建 listdictionary 的建议，或者是否有更好的方法来解决该问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T23:57:56.223

假设您在数组上有行内容，您可以使用以下内容：

```
 Dictionary<string, List<string[]>> allPairs = new Dictionary<string, List<string[]>>();

        foreach (string currentLine in allLines)
        {
            string[] lineContent = currentLine.Split(" "); //or something like it. Maybe it should be a TAB
            string[] newPair = new string[2];
            newPair[0] = lineContent[1];
            newPair[1] = lineContent[2];

            if (allPairs[lineContent[0]] == null)
            {
                allPairs[lineContent[0]] = new List<string[]>();
            }

            allPairs[lineContent[0]].Add(newPair);
        } 
```

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T00:14:02.573

如果您已经将数组加载到内存中，则可以使用 LINQ ToLookup 方法：

```
overallArray.ToLookup(x => x.Column1, x => new{x.Column2, x.Column3}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T00:21:23.247

```
foreach (DictionaryEntry de in myListDictionary)
{
    //...
} 
```

我为您做了一些研究，并提出了这篇代码文章。看看这个。

[http://msdn.microsoft.com/en-us/library/system.collections.specialized.listdictionary.aspx](http://msdn.microsoft.com/en-us/library/system.collections.specialized.listdictionary.aspx)

# c++ - 从我的文件中删除“000”组？

> ID：11679704
> 
> 赞同：3
> 
> 时间：2012-07-26T23:55:52.250
> 
> 标签：c++, binary, ifstream, decompiler, ofstream

在 C++ 中，我制作了一个导出为二进制的程序，现在我正在制作一个阅读器。它读取正确，但只有 1 个问题。我的文件是一个包含一组数字的文件，当它被读取并打印到您看到的屏幕上时，1470009300047000199。3“000”的集合不应该在那里。我使用 ifstream 加载了这个文件，并计划保持这种状态。有人可以告诉我如何删除文件中的“000”集吗？如果我必须编写另一个 C++ 程序来做这件事，我对它很好，我只需要删除“000”并用空格替换它。

```
#include <iostream>
#include <fstream>
#include <string>

using namespace std;

int main(int argc, char* argv[])
{
    if (argc < 2)
    {
        cout << "Error 1";
        return 0;
    }
    else
    {
        int FileLength;
        ifstream InputFile(argv[1], ios::binary);
        ofstream OutputFile("DECOMPILED_FILE.txt");
        InputFile.seekg(0, ios::end);
        FileLength = InputFile.tellg();
        InputFile.seekg(0, ios::beg);
        for (int i = 0; i < FileLength; i++)
        {
            cout << InputFile.get();
        }

        cin.get();
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T00:08:27.713

**正则表达式**怎么样？尝试`'000'`在文件中查找子字符串，如果找到，将其替换为“”。伪代码：

```
for each line in the file do:
     if line.strstr("000") then
           line.replace("000", " ")

      cout << line << endl; 
```

# actionscript-3 - Adobe Air iOS 捕捉应用程序的首次使用

> ID：11679706
> 
> 赞同：0
> 
> 时间：2012-07-26T23:56:07.970
> 
> 标签：actionscript-3, air

我想在第一次打开该应用程序时为其创建一个快速教程。

有没有办法可以真正做到这一点？您是否会在 appIDfolder 下创建一个文本文件并在第一次打开时更新该值。所以如果第一次使用它会有所不同吗？或任何更好的想法或建议。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T00:14:03.167

这就是我所做的——`File.applicationStorageDirectory`是你的朋友。只需在那里写一个小文件。您可以在此处存储版本号、上次访问权限等，以便您有一些选项（“欢迎回来，已经很久了”、“这是新版本中的功能”等）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T00:18:35.833

它可以像我一样

*   1.) 创建 2 个文件 1 非常简短。另一个有更多的东西。
*   2.) 测试文件是否存在 tutorialShort.txt。
*   3.) 将此文件显示为快速图。
*   4.) 看完之后。询问用户，下次应用启动时 => 他们想再次查看本教程。
*   5.) Answ:否 => 只删除或重命名 tutorialShort.txt

# c# - ulong和long之间不可能的比较突然可能

> ID：11679708
> 
> 赞同：6
> 
> 时间：2012-07-26T23:56:37.337
> 
> 标签：c#, casting, long-integer, comparison-operators

我知道为什么不允许这样做：

```
ulong x = 0xFEDCBA9876543210;
long y = Int64.MaxValue;
Console.WriteLine(x < y); 
```

显然，运行时无法将操作数隐式转换为其他类型或更大的类型以进行比较。

> 运算符“<”不能应用于“ulong”和“long”类型的操作数。

因此，这也是不允许的（使用`MinValue`and `const`）：

```
ulong x = 0xFEDCBA9876543210;
const long y = Int64.MinValue;
Console.WriteLine(x < y); 
```

然而，这是允许的（`MaxValue`而不是）：

```
ulong x = 0xFEDCBA9876543210;
const long y = Int64.MaxValue;
Console.WriteLine(x < y); 
```

`<`接受 a`ulong`并没有过载`long`，但我在 Reflector 中看到它会默默地转换`Int64.MaxValue`为 a `ulong`。但这并不总是发生。它是如何工作的，这种不一致的原因是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T00:10:50.047

`long y = Int64.MaxValue; if (x < y)...`和之间的一个很大区别`if (x < Int64.MaxValue)`是，在后一种情况下，编译器实际上可以根据需要查看常量值。可以看到实际的常量值在 ulong 范围内，因此可以进行隐式转换。

对于普通变量`long y`，编译器无法对 y 的运行时值做出任何假设。没关系，赋值语句只是一个语句；编译器不会跟踪分配给变量的值。

正如 DarkGray 所指出的，一个 const var 表现为一个常量，因为您已经告诉编译器它的值永远不会改变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T00:06:23.040

具有 ulong 范围内的值的 const long 静默转换为 const ulong。

这是允许的：

```
ulong x = 0xFEDCBA9876543210; 
const long y = Int64.MaxValue; 
Console.WriteLine(x < y); 

const ulong z = y; 
```

# python - 创建字典并为每个类别分配值 0

> ID：11679709
> 
> 赞同：0
> 
> 时间：2012-07-26T23:56:38.263
> 
> 标签：python, dictionary

我正在尝试创建一个字典并为每个值分配一个值 0

这是我到目前为止所拥有的：

```
c.execute("""SELECT category from wordtest order by category""")
catnum = c.fetchall()
catnum = [list(x) for x in catnum]
catnum = sum(catnum, [])
catnums = defaultdict(list)
for key in catnum:
        catnums[key].append(0) 
```

但是我得到的输出是`{"key": [0]}`，我不想要列表中的值。

数据库中的类别只是一个单词列表。

我将如何使`catnums`每个键的值为 0？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T00:06:00.007

您可以使用`fromkeys`dict 方法

```
>>> dict.fromkeys(range(5), 0)
{0: 0, 1: 0, 2: 0, 3: 0, 4: 0} 
```

所以你的代码将是：

```
catnums = dict.fromkeys(catnum, 0) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T00:03:03.697

我错过了什么吗？以下不是你想要的吗？：

```
catnums={}
for key in catnum:
    catnums[key]=0 
```

为什么在这里需要一个默认字典？

请注意，如果您想要一个默认值为 0 的 defaultdict，您可以执行以下操作：

```
zerodict=defaultdict(int) 
```

因为`int()`回报`0`。

# django - 如何将模型字段设置为当前计数？

> ID：11679712
> 
> 赞同：0
> 
> 时间：2012-07-26T23:57:22.733
> 
> 标签：django, django-models

假设我有一些包含一些项目的组。我希望项目在组中具有唯一索引：

```
class Item(models.Model):
    group = models.ForeignKey(Group, null=True)
    index = models.IntegerField(default=0)

    class Meta:
        unique_together=('group','index')

    def save(self):
        if self.pk is None and self.group_id is not None:
            self.thread_index = Item.objects.filter(group_id=group_id).count()+1
        return super(Item, self).save() 
```

但这是有问题的，因为更新不是原子的，即另一个事务可能在我计算 thread_index 之后和我写入数据库之前添加了另一行。

我知道我可以通过捕获 IntegrityError 并重试来让它工作。但我想知道是否有一种好方法可以将它作为插入命令的一部分原子地填充，使用 SQL 类似：

```
insert into app_item (group, index) 
select 25, count(*) from app_item where group_id=25 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T00:22:24.917

Since you're using django models, what does adding an index field give you over the [primary key](https://docs.djangoproject.com/en/dev/topics/db/models/#automatic-primary-key-fields) added to all models unless you specify otherwise? Unless you need items to have sequential indices, which would still be problematic upon deleting objects, the id field would certainly appear to satisfy the requirement as you outlined it.

If you have to have this field, then an option could be to take advantage of [signals](https://docs.djangoproject.com/en/dev/topics/signals/). Write a receiver for the object's post_save signal and it could conceivably handle it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T06:46:46.410

一种可能的解决方案是，如果您对信号或自定义保存方法有疑问，请在运行时通过创建`index`一个[属性字段来计算它](https://docs.djangoproject.com/en/dev/topics/db/models/#model-methods)

```
class Item(models.Model):
  group = models.ForeignKey(Group, null=True)

def _get_index(self):
  "Returns the index of groups"
   return Item.objects.filter(group_id=group_id).count()+1
index = property(_get_index) 
```

现在`index`用作模型的字段`Item`。

# opengl - JOGL-2.0 NSAutoreleaseNoPool 错误

> ID：11679714
> 
> 赞同：2
> 
> 时间：2012-07-26T23:57:34.277
> 
> 标签：opengl, jogl, nsautoreleasepool

我从 JOGL 1.1 切换到 JOGL 2，出于某种原因，我遇到了奇怪的错误。

我已将问题隔离到创建 GLCanvas。

```
public class Main {
    public static void main(String[] args) {
        GLCanvas canvas = new GLCanvas(new GLCapabilities(GLProfile.getDefault()));
    }
} 
```

当我运行它时，我得到了这个奇怪的错误。

```
2012-07-26 16:50:23.688 java[903:1303] *** __NSAutoreleaseNoPool(): Object 0x10014cf00 of class NSCFNumber autoreleased with no pool in place - just leaking
2012-07-26 16:50:23.690 java[903:1303] *** __NSAutoreleaseNoPool(): Object 0x1001512b0 of class NSConcreteValue autoreleased with no pool in place - just leaking
2012-07-26 16:50:23.690 java[903:1303] *** __NSAutoreleaseNoPool(): Object 0x100123e50 of class NSCFNumber autoreleased with no pool in place - just leaking
2012-07-26 16:50:23.690 java[903:1303] *** __NSAutoreleaseNoPool(): Object 0x100151310 of class NSConcreteValue autoreleased with no pool in place - just leaking
2012-07-26 16:50:23.690 java[903:1303] *** __NSAutoreleaseNoPool(): Object 0x100151340 of class NSCFDictionary autoreleased with no pool in place - just leaking
2012-07-26 16:50:24.170 java[903:1303] *** __NSAutoreleaseNoPool(): Object 0x10204a690 of class NSCFNumber autoreleased with no pool in place - just leaking
2012-07-26 16:50:24.171 java[903:1303] *** __NSAutoreleaseNoPool(): Object 0x102056390 of class NSConcreteValue autoreleased with no pool in place - just leaking
2012-07-26 16:50:24.171 java[903:1303] *** __NSAutoreleaseNoPool(): Object 0x100123e50 of class NSCFNumber autoreleased with no pool in place - just leaking
2012-07-26 16:50:24.171 java[903:1303] *** __NSAutoreleaseNoPool(): Object 0x102055c70 of class NSConcreteValue autoreleased with no pool in place - just leaking
2012-07-26 16:50:24.171 java[903:1303] *** __NSAutoreleaseNoPool(): Object 0x10206b4a0 of class NSCFDictionary autoreleased with no pool in place - just leaking 
```

我见过另一个人有类似的问题，但我没有参考 swt.jar

多一点背景：

我正在使用eclipse，导入jogl.all.jar 和gluegen-rt.jar 并将它们的本机设置为macosx 文件夹。

该程序运行良好，但每次运行时看到这些错误弹出真的很烦人。

这是来自网站上 jogamp-all-plaforms 的新副本。

任何人都知道如何解决此错误？

我正在运行 Snow Leopard 10.6.8

# python - 比较 Pandas 中的 DateOffsets

> ID：11679716
> 
> 赞同：3
> 
> 时间：2012-07-26T23:57:40.510
> 
> 标签：python, datetime, pandas

有没有办法比较两个`DateOffset`物体的大小？

```
>>> from pandas.core.datetools import *
>>> Hour(24) > Minute(5)
False 
```

这适用于`timedelta`，所以我假设 pandas 会继承这种行为 - 还是时间系统是从头开始制作的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T08:22:32.877

pandas DateOffsets 不继承自 timedelta。可以比较某些 DateOffsets，但对于 MonthEnd、MonthStart 等偏移量，到下一个偏移量的时间跨度是不一致的，并且取决于开始日期。

请随时在[https://github.com/pydata/pandas](https://github.com/pydata/pandas)上开始一个 github 问题，我们可以在那里继续讨论，它将作为提醒。

谢谢。

# python - python模无穷大

> ID：11679718
> 
> 赞同：1
> 
> 时间：2012-07-26T23:58:05.113
> 
> 标签：python, modulo, infinity

我有一个代码，包括涉及无穷大的模运算，例如`a%numpy.inf`.

我期望得到零，代码在我的旧电脑上运行良好。但是，我现在在我的新计算机上安装了 python、numpy 并且操作给出了`NaN`

你知道如何`a%numpy.inf`归零吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-09T13:04:58.793

一个很好的问题，尽管它很少受到关注。从数学上讲，评论者是对的：`x mod inf`应该让步，正如[我之前在 Math SE 上的问题的答案中](https://math.stackexchange.com/a/1920338)`x`所看到的那样。所以 Python 是正确的。如果您想返回零，则必须在进行计算之前使用简单的 - 语句测试无穷大。`if`

# php - Stream_Copy_To_Stream() php 的替代方案

> ID：11679723
> 
> 赞同：7
> 
> 时间：2012-07-26T23:58:36.500
> 
> 标签：php, memory, upload, stream, copy

我现在在一个文件共享网站上工作，我遇到了一个小问题。我正在使用上传脚本uploadify，它工作得很好，但如果用户想要我希望上传的文件被加密。现在我有如下所示的工作代码，但我的服务器只有 1GB 或内存，使用 stream_copy_to_stream 似乎占用了内存中实际文件的大小，我的最大上传大小为 256，所以我知道一个事实是坏的当网站上线并且多人同时上传大文件时，就会发生这种情况。根据我下面的代码，是否有任何替代方案几乎不使用内存或根本没有，我什至不在乎它是否需要更长的时间，我只需要它来工作。我有这个工作的下载版本，因为我将文件直接解密并立即传递给浏览器，因此它在下载时解密，虽然我非常有效，但这个上传问题看起来不太好。任何帮助表示赞赏。

```
$temp_file = $_FILES['Filedata']['tmp_name'];
    $ext = pathinfo($_FILES['Filedata']['name'], PATHINFO_EXTENSION);
    $new_file_name = md5(uniqid(rand(), true));
    $target_file = rtrim(enc_target_path, '/') . '/' . $new_file_name . '.enc.' . $ext;

    $iv_size = mcrypt_get_iv_size(MCRYPT_RIJNDAEL_128, MCRYPT_MODE_CBC);
    $iv = mcrypt_create_iv($iv_size, MCRYPT_RAND);
    $key = substr(md5('some_salt' . $password, true) . md5($password . 'more_salt', true), 0, 24);
    $opts = array('iv' => $iv, 'key' => $key);

    $my_file = fopen($temp_file, 'rb');

    $encrypted_file_name = $target_file;
    $encrypted_file = fopen($encrypted_file_name, 'wb');

    stream_filter_append($encrypted_file, 'mcrypt.rijndael_128', STREAM_FILTER_WRITE, $opts);
    stream_copy_to_stream($my_file, $encrypted_file);

    fclose($encrypted_file);
    fclose($my_file);
    unlink($temp_file); 
```

temp_file 是我可以看到的上传文件的第一个实例

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T00:09:36.980

如果您尝试像这样以块的形式读取文件，您会得到更好的结果吗？：

```
$my_file = fopen($temp_file, 'rb');

$encrypted_file_name = $target_file;
$encrypted_file = fopen($encrypted_file_name, 'wb');

stream_filter_append($encrypted_file, 'mcrypt.rijndael_128', STREAM_FILTER_WRITE, $opts);
//stream_copy_to_stream($my_file, $encrypted_file);

rewind($my_file);

while (!feof($my_file)) {
    fwrite($encrypted_file, fread($my_file, 4096));
} 
```

您也可以尝试在调用[`stream_set_chunk_size`](http://php.net/stream_set_chunk_size)之前调用`stream_copy_to_stream`以设置它在复制到目标时用于从源流中读取的缓冲区的大小。

希望有帮助。

编辑：我使用此代码进行了测试，上传 700MB 电影文件时，PHP 的峰值内存使用量为 524,288 字节。看起来`stream_copy_to_stream`会尝试将整个源文件读入内存，除非您通过长度和偏移量参数以块的形式读取它。

```
$encrypted_file_name = $target_file;
$encrypted_file = fopen($encrypted_file_name, 'wb');

stream_filter_append($encrypted_file, 'mcrypt.rijndael_128', STREAM_FILTER_WRITE, $opts);

$size = 16777216;  // buffer size of copy
$pos  = 0;         // initial file position

fseek($my_file, 0, SEEK_END);
$length = ftell($my_file);    // get file size

while ($pos < $length) {
    $writ = stream_copy_to_stream($my_file, $encrypted_file, $size, $pos);
    $pos += $writ;
}

fclose($encrypted_file);
fclose($my_file);
unlink($temp_file); 
```

# mercurial - 如何强制 hg merge 进行交互？

> ID：11679725
> 
> 赞同：2
> 
> 时间：2012-07-26T23:58:56.440
> 
> 标签：mercurial, msbuild, merge, cruisecontrol.net, interactive

作为 MSBuild 作业的一部分，我正在 CruiseControl.NET 下运行自动 hg 合并。由于某种原因，即使我没有`-y`在命令中指定，合并也会在非交互模式下运行。这会导致意外的结果，因为它在提示冲突时采用第一个选项，我宁愿它只是超时并失败，所以我们知道我们需要手动查看它。

所以两个问题：

1）为什么当我没有给它 a 时它会非迭代地运行`-y`？
2）有没有办法强制 hg 合并是交互式的，所以作业会超时并失败？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T19:10:35.047

根据[另一个问题的答案](https://stackoverflow.com/a/12187000/125356)，Mercurial 似乎会自动检测它是在 TTY 下运行还是无头，因此不会提示您。您可以通过提供`ui.interactive`配置选项来覆盖它：

```
hg --config ui.interactive=yes 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T16:44:50.580

我认为更好的主意是使用`hg merge --tool internal:merge`. Mercurial 将尝试进行自动合并，但如果有任何冲突将失败。这里还有[其他](http://www.selenic.com/mercurial/hg.1.html#id4)可能的选择。

从外部 ClearCase 存储库自动提取后，我每天都在使用它，并且效果很好。如果有任何冲突，我的 CI 工作就会立即失败。

# php - 安卓应用的用户认证

> ID：11679726
> 
> 赞同：2
> 
> 时间：2012-07-26T23:59:01.810
> 
> 标签：php, android, mysql

提前原谅我，但我已经阅读了与此相关的所有主题，这个新手仍然很困惑。让我开始简要介绍一下我正在努力实现的目标……我创建了一个测验。由于我要添加排行榜，因此我要求用户创建用户名和密码或电子邮件地址，以便唯一。我已经设法使用 phpmysql 创建了注册和登录功能，这一切都在我的应用程序中运行良好。但是，我不希望用户每次打开应用程序时都必须登录，而是记住用户详细信息。我是否使用android sdk中的帐户管理器功能并废弃mysql？还是我应该只修改我已经拥有的？我什至需要使用 phpmysql 登录吗？我意识到我将不得不将它用于排行榜。任何帮助我指出正确方向的帮助将不胜感激。

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T00:30:25.560

我们是一个会话系统，类似于您使用 cookie 的方式。

当android设备连接时，在PHP中：

*   创建一个简单的“会话”变量。
*   根据数据库中的会话变量记录电话签名
*   将会话变量返回给 android。

在安卓中：

*   将会话变量存储在手机的本地数据文件中。

对于后续调用：

*   Android 将会话变量（来自本地文件存储）与手机 ID 一起发送到 PHP
*   PHP 检查会话变量是否有效，检查电话签名是否匹配。如果他们这样做，你有相同的会话。如果它们不匹配，请创建一个新会话（并发送回手机）。

当用户“登录”时

*   在 PHP 中存储 user_id 和他们已经登录会话变量的事实。
*   然后，当从手机发送会话变量时，您无需交互即可知道 user_id。
*   如果用户注销，只需将其记录在数据库中（从会话中取消链接 user_id）

由于文件存储是持久的，即使应用程序关闭，手机 ID 也不会改变，PHP 将始终知道连接中的用户是谁，即使在应用程序关闭后也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T02:22:16.027

尽管 Robbies 的回答很棒，但至少在短期内，这听起来对您的应用程序来说有点矫枉过正。一个更简单的解决方案是在每个会话中使用 Shared Preferences 保存一个布尔值：

[http://developer.android.com/guide/topics/data/data-storage.html#pref](http://developer.android.com/guide/topics/data/data-storage.html#pref)

Shared Preferences 存储会话之间的变量并且易于获取。在您的情况下，如果登录成功，您将保存一个布尔值 true。下次启动应用程序时，获取布尔值，如果为真，则不需要登录。如果没有这个变量或者设置为false（之前登录失败/用户注销），要求登录！

祝你好运

# java - 从 API 中检索艺术家 ID——将它们处理为 long 还是 int？

> ID：11679730
> 
> 赞同：0
> 
> 时间：2012-07-27T00:00:00.997
> 
> 标签：java, json, long-integer

初学者在这里，所以请多多包涵！

我正在尝试从音乐网站的 API 中检索一些艺术家 ID。这是我的代码片段：

```
JSONObject jsonItem = (JSONObject) jsonResults.get(i);
System.out.println(jsonItem.get("id")); // Prints 22989
int currID = (Integer) jsonItem.get("id"); 
```

我正在尝试将多个 ID 添加到一个 int 数组中，以便稍后处理它们（因此是 get(i)）。

但是，当我运行上述代码时出现以下错误：

> java.lang.Long 不能转换为 java.lang.Integer

处理此类事情的最佳方法是什么？我应该尝试将所有内容都转换为 int 吗？也许可以处理不同类型的 ID，例如 long 的？以前从未真正遇到过这样的问题。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T00:07:11.917

```
int currID = (Integer) jsonItem.get("id"); 
```

大概应该读

```
long currID = (Long) jsonItem.get("id"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T00:07:55.623

根据您的错误，我假设 jsonItem.get("id") 的返回值是 java.lang.Long

两种方式

1）首选：将id存储在您身边。

```
long currId = jsonItem.get("id"); 
```

2）我不建议跟随，你最终可能会得到不适合'int'的ID

```
int currId = jsonItem.get("id").intValue(); // DO NOT do this.. 
```

我刚刚提到了第二个选项，让您知道 API 的可用性。

# html - 使 div 不自动拉伸到容器宽度

> ID：11679733
> 
> 赞同：18
> 
> 时间：2012-07-27T00:00:37.223
> 
> 标签：html, css

我的问题很简单：

你能阻止一个 div 自动拉伸到其包含元素的宽度，并让它只水平拉伸它内部的内容所强制的程度吗？

有点像 div 的默认垂直行为，但水平应用。这可能吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-27T00:01:43.620

您必须将`display`属性设置为`inline-block`

```
<div style="display: inline-block">Text</div> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-27T00:05:58.500

实际上，`display:inline`会有更好的浏览器支持，但可能达不到你想要的结果，它会让 div 与内容保持一致，a la `<span>`。

有两种类型的元素：块和内联。块元素拉伸到宽度并断开线条。内联延伸到内容并保持内联。（！）

`display:inline-block`正在获得更好的支持，但较旧的浏览器不会这样做。

# spring - 无法通过 Junit 加载 applicationContext 以测试类

> ID：11679740
> 
> 赞同：2
> 
> 时间：2012-07-27T00:02:08.750
> 
> 标签：spring, unit-testing, maven, junit

找不到解决方案！尝试使用 applicationContext 测试我的 dao

```
@RunWith(SpringJUnit4ClassRunner.class)

@ContextConfiguration(locations={"root-context.xml", "database.xml"})

@Transactional

public class BaseDaoTest {

@Autowired

private EmployeesDAO emplDao; 
```

...

Root-context.xml 和 database.xml 与测试类位于同一个包中。我从 WEB-INF/spring 复制了这些 xml-s。
我得到下一个错误：

```
 Testsuite: org.company.employees.dao.BaseDaoTest
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:186)
    at org.apache.log4j.helpers.Loader.loadClass(Loader.java:179)
    at org.apache.log4j.xml.DOMConfigurator.parseLayout(DOMConfigurator.java:534)
    at org.apache.log4j.xml.DOMConfigurator.parseAppender(DOMConfigurator.java:259)
    at org.apache.log4j.xml.DOMConfigurator.findAppenderByName(DOMConfigurator.java:171)
    at org.apache.log4j.xml.DOMConfigurator.findAppenderByReference(DOMConfigurator.java:184)
    at org.apache.log4j.xml.DOMConfigurator.parseChildrenOfLoggerElement(DOMConfigurator.java:502)
    at org.apache.log4j.xml.DOMConfigurator.parseCategory(DOMConfigurator.java:415)
    at org.apache.log4j.xml.DOMConfigurator.parse(DOMConfigurator.java:919)
    at org.apache.log4j.xml.DOMConfigurator.doConfigure(DOMConfigurator.java:790)
    at org.apache.log4j.xml.DOMConfigurator.doConfigure(DOMConfigurator.java:696)
    at org.apache.log4j.helpers.OptionConverter.selectAndConfigure(OptionConverter.java:471)
    at org.apache.log4j.LogManager.<clinit>(LogManager.java:125)
    at org.slf4j.impl.Log4jLoggerFactory.getLogger(Log4jLoggerFactory.java:73)
    at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:249)
    at org.apache.commons.logging.impl.SLF4JLogFactory.getInstance(SLF4JLogFactory.java:155)
    at org.apache.commons.logging.impl.SLF4JLogFactory.getInstance(SLF4JLogFactory.java:131)
    at org.apache.commons.logging.LogFactory.getLog(LogFactory.java:351)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.<clinit>(SpringJUnit4ClassRunner.java:91)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at org.junit.internal.builders.AnnotatedBuilder.buildRunner(AnnotatedBuilder.java:31)
    at org.junit.internal.builders.AnnotatedBuilder.runnerForClass(AnnotatedBuilder.java:24)
    at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:57)
    at org.junit.internal.builders.AllDefaultPossibilitiesBuilder.runnerForClass(AllDefaultPossibilitiesBuilder.java:29)
    at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:57)
    at org.junit.internal.requests.ClassRequest.getRunner(ClassRequest.java:24)
    at junit.framework.JUnit4TestAdapter.<init>(JUnit4TestAdapter.java:31)
    at junit.framework.JUnit4TestAdapter.<init>(JUnit4TestAdapter.java:24)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:474)
    at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1060)
    at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:911)
log4j:ERROR No layout set for the appender named [consoleAppender].
Tests run: 1, Failures: 0, Errors: 1, Time elapsed: 1,108 sec

------------- Standard Error -----------------
log4j:ERROR Could not create the Layout. Reported error follows.
java.lang.ClassNotFoundException: org.apache.log4j.EnhancedPatternLayout
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:186)
    at org.apache.log4j.helpers.Loader.loadClass(Loader.java:179)
    at org.apache.log4j.xml.DOMConfigurator.parseLayout(DOMConfigurator.java:534)
    at org.apache.log4j.xml.DOMConfigurator.parseAppender(DOMConfigurator.java:259)
    at org.apache.log4j.xml.DOMConfigurator.findAppenderByName(DOMConfigurator.java:171)
    at org.apache.log4j.xml.DOMConfigurator.findAppenderByReference(DOMConfigurator.java:184)
    at org.apache.log4j.xml.DOMConfigurator.parseChildrenOfLoggerElement(DOMConfigurator.java:502)
    at org.apache.log4j.xml.DOMConfigurator.parseCategory(DOMConfigurator.java:415)
    at org.apache.log4j.xml.DOMConfigurator.parse(DOMConfigurator.java:919)
    at org.apache.log4j.xml.DOMConfigurator.doConfigure(DOMConfigurator.java:790)
    at org.apache.log4j.xml.DOMConfigurator.doConfigure(DOMConfigurator.java:696)
    at org.apache.log4j.helpers.OptionConverter.selectAndConfigure(OptionConverter.java:471)
    at org.apache.log4j.LogManager.<clinit>(LogManager.java:125)
    at org.slf4j.impl.Log4jLoggerFactory.getLogger(Log4jLoggerFactory.java:73)
    at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:249)
    at org.apache.commons.logging.impl.SLF4JLogFactory.getInstance(SLF4JLogFactory.java:155)
    at org.apache.commons.logging.impl.SLF4JLogFactory.getInstance(SLF4JLogFactory.java:131)
    at org.apache.commons.logging.LogFactory.getLog(LogFactory.java:351)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.<clinit>(SpringJUnit4ClassRunner.java:91)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at org.junit.internal.builders.AnnotatedBuilder.buildRunner(AnnotatedBuilder.java:31)
    at org.junit.internal.builders.AnnotatedBuilder.runnerForClass(AnnotatedBuilder.java:24)
    at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:57)
    at org.junit.internal.builders.AllDefaultPossibilitiesBuilder.runnerForClass(AllDefaultPossibilitiesBuilder.java:29)
    at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:57)
    at org.junit.internal.requests.ClassRequest.getRunner(ClassRequest.java:24)
    at junit.framework.JUnit4TestAdapter.<init>(JUnit4TestAdapter.java:31)
    at junit.framework.JUnit4TestAdapter.<init>(JUnit4TestAdapter.java:24)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:474)
    at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1060)
    at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:911)
log4j:ERROR No layout set for the appender named [consoleAppender].
------------- ---------------- ---------------
Testcase: testCreateEmployee(org.company.employees.dao.BaseDaoTest):    Caused an ERROR
Failed to load ApplicationContext
java.lang.IllegalStateException: Failed to load ApplicationContext
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:308)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:321)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:211)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:287)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:289)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
Caused by: org.springframework.beans.factory.BeanInitializationException: Could not load properties; nested exception is java.io.FileNotFoundException: class path resource [WEB-INF/spring/jdbc.properties] cannot be opened because it does not exist
    at org.springframework.beans.factory.config.PropertyResourceConfigurer.postProcessBeanFactory(PropertyResourceConfigurer.java:78)
    at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:663)
    at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:638)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:407)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:84)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:1)
    at org.springframework.test.context.TestContext.loadApplicationContext(TestContext.java:280)
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:304)
Caused by: java.io.FileNotFoundException: class path resource [WEB-INF/spring/jdbc.properties] cannot be opened because it does not exist
    at org.springframework.core.io.ClassPathResource.getInputStream(ClassPathResource.java:158)
    at org.springframework.core.io.support.PropertiesLoaderSupport.loadProperties(PropertiesLoaderSupport.java:181)
    at org.springframework.core.io.support.PropertiesLoaderSupport.mergeProperties(PropertiesLoaderSupport.java:161)
    at org.springframework.beans.factory.config.PropertyResourceConfigurer.postProcessBeanFactory(PropertyResourceConfigurer.java:69) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T00:12:09.163

看起来您的上下文文件之一依赖于 jdbc.properties 文件。您将必须修复对该文件的引用 - 将其放在类路径中的某个位置并使用`classpath:/mypath/jdbc.properties`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T05:06:22.590

```
 package au.com.flexcontacts.test.common;

import org.junit.runner.RunWith;
import org.springframework.beans.BeansException;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.config.ConfigurableBeanFactory;
import org.springframework.context.ApplicationContext;
import org.springframework.context.ApplicationContextAware;
import org.springframework.mock.web.MockHttpServletRequest;
import org.springframework.orm.hibernate3.HibernateTemplate;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;
import org.springframework.web.context.request.RequestContextHolder;
import org.springframework.web.context.request.RequestScope;
import org.springframework.web.context.request.ServletRequestAttributes;
import org.springframework.web.context.request.SessionScope;

@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration({"classpath:/controllers.xml"})
public class SpringTest implements ApplicationContextAware {

    protected ApplicationContext applicationContext;
    protected MockHttpServletRequest request;
    protected ServletRequestAttributes attributes;

    public void setApplicationContext(ApplicationContext applicationContext1)
            throws BeansException {
        applicationContext = applicationContext1;
    }

    protected void scopedBeansConfig() {        
        ConfigurableBeanFactory configurableBeanFactory = (ConfigurableBeanFactory) applicationContext.getAutowireCapableBeanFactory();
        configurableBeanFactory.registerScope("session", new SessionScope());
        configurableBeanFactory.registerScope("request", new RequestScope());
        request = new MockHttpServletRequest();
        attributes = new ServletRequestAttributes(request);
        RequestContextHolder.setRequestAttributes(attributes);
    }

} 
```

这就是我所做的。我所有的春季测试都将扩展这个类。

# c++ - __mm128 的向量不会 push_back()

> ID：11679741
> 
> 赞同：9
> 
> 时间：2012-07-27T00:02:17.177
> 
> 标签：c++, visual-c++, sse

这个简单的 SSE 代码：

```
#include <vector>
#include <emmintrin.h>

int main() {
    std::vector<__m128> blah;
    blah.push_back(__m128());
} 
```

在 MSVC 10 上崩溃，在`0xffffffff`.

可能出了什么问题？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-27T00:25:50.643

A `std::vector` does not allocate specially aligned memory, which `__m128` needs to store it's data. You will have to either swap out the allocator, or replace it with an array of 4 floats and then perform an unaligned load or copy out to an aligned location every time you access the vector.

# jquery - jQuery，wav文件，autostart false，如何再次触发？

> ID：11679743
> 
> 赞同：0
> 
> 时间：2012-07-27T00:02:23.667
> 
> 标签：jquery, wav, autostart

我有这样的事情：

```
<embed id="wavfile" src='wavfile.wav' hidden="true" autostart="false" loop="false" height="0" width="0"> 
```

我不希望它立即启动，我希望它在单击某个按钮时启动，所以在单击按钮时我尝试将 autostart 参数更改为 true 但没有任何反应，仍然没有启动。

```
$('#wavfile').attr("autostart","true"); 
```

任何想法如何触发它？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T00:07:47.800

[http://www.schillmania.com/projects/soundmanager2/](http://www.schillmania.com/projects/soundmanager2/)

来自——除其他外，它是一个非常标准和知名的项目——在这里：[使用 Javascript 播放声音通知？](https://stackoverflow.com/questions/450033/playing-sound-notifications-using-javascript)

# ios - 如何使用静态和动态单元格实现 UITableView - IOS

> ID：11679745
> 
> 赞同：1
> 
> 时间：2012-07-27T00:02:34.727
> 
> 标签：ios, dynamic, uitableview

我创建了一个完全由四个不同分组组成的 UITableView。每个部分/组具有不同数量的行。我已经为底部的三组静态添加了必要数量的行和文本字段。但是，我不知道顶部/组需要多少行。我已将顶部组设置为在 .xib 中只有一个单元格，但每次加载视图时，我都必须检查需要多少个单元格，然后将必要的行数动态添加到顶部。

我环顾了 StackOverflow，看到人们在讨论 insertRowsAtIndexPaths 方法，但我无法让它工作。

```
[settingsPageTableView beginUpdates];
[settingsPageTableView insertRowsAtIndexPaths:tempArray withRowAnimation:UITableViewRowAnimationAutomatic];
[settingsPageTableView endUpdates]; 
```

我是否需要在 insertRowsAtIndexPaths 方法中添加一些特定的代码？我这样传递了一个 NSMutableArray：

```
 NSIndexPath *indexPath0 = [NSIndexPath indexPathForRow:1 inSection:0];
    NSMutableArray *tempArray=[NSMutableArray array];
   [tempArray addObject:indexPath0]; 
```

如果有人知道如何在一个 UITableView 中组合静态和动态单元格，将不胜感激！对于熟悉 iPhone 常规设置中的蓝牙页面的任何人来说，这正是我想要做的。它显示了可变数量的设备以及顶部包含 UISwitch 的静态单元格。有谁知道如何做到这一点？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T00:08:45.267

我认为你应该动态地做这一切，仅仅因为你在蓝牙页面上描述的单元格总是在那里并不意味着它是一个静态单元格，只是总是动态创建的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T00:27:11.307

So here's the workaround I just figured out. I know for sure there will never be more than 7 cells that I would ever need for that top portion of the UITable View. So then, I am able to just set up those 7 statically in the .xib file. From there I am able to only show the specific number that I need using this:

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

    switch(section) {
        case 0:  
            //Do a bunch of checking here on how many i actually need. Then, I will just return the required amount. As long as it is less than the number of cells I have statically placed in my .xib, everything works good.
            return 4;
        case 1:
            return 3;
        case 2:
            return 1;
        case 3:
            return 2;
        case 4:
            return 3;
        default:
            return 0;
        }
//Every case but the first always needs the same amount of cells, so those are no problem.
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-04T05:35:05.683

最好和最简单的方法：

1）将容器视图放在动态表视图的标题中 2）将静态表视图分配给此容器并取消勾选“启用滚动”

# entity-framework - 我应该使用 Table-per-hierarchy 吗？

> ID：11679747
> 
> 赞同：0
> 
> 时间：2012-07-27T00:02:55.693
> 
> 标签：entity-framework, database-design

**已更新，底部有图片**

我有三个实体——公司、项目、员工。

公司有一名或多名公司经理。项目只有一个 ProjectManager。员工只有一个 EmployeeManager

我想创建一个数据库设计，然后为此创建 EF Code First 模型。

我应该创建单独的表来存储 CompanyManagers、ProjectManagers 和 EmployeeManagers

或者

我应该创建一个存储各种管理器的表吗？这样的表可能如下所示：ManagerID

EntityType（公司、项目、员工）

EntityID (CompanyID, ProjectID, EmployeeID)

**更新** 这里是到目前为止的设计：

![在此处输入图像描述](../Images/781c40df2eae770462ab2dc3d8b77d53.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T08:04:54.883

我们不知道——这取决于您的应用要求。无论如何，即使使用 TPH，您仍然会有单独`CompanyID`的 , `ProjectID`,`EmployeeID`列，因为映射到派生类型的特定属性的列不能被重用，并且您不能在列上建立条件关系。

# php - 如何在 RE 中匹配这个特定的字符串？

> ID：11679748
> 
> 赞同：2
> 
> 时间：2012-07-27T00:02:56.487
> 
> 标签：php, regex

我再次陷入正则表达式。没有任何好的材料可以学习更高级的用法。

我正在尝试匹配`[image width="740" height="249" parameters=""]51lca7dn56.jpg[/image]` **到** `$cache->image_tag("$4", $1, $2, "$3")`.

**如果所有[image]**参数都在那里，一切都很好，但我需要它匹配，即使**缺少某些东西**。所以例如`[image width="740"]51lca7dn56.jpg[/image]`。

**当前代码是：**

```
$text = preg_replace('#\[image width=\"(.*?)\" height=\"(.*?)\" parameters=\"(.*?)\"\](.*?)\[/image\]#e', '$cache->image_tag("$4", $1, $2, "$3")', $text); 
```

正则表达式是唯一总是让我卡住的东西，所以如果有人也可以参考一些好的资源，这样我就可以自己管理这些类型的问题，我将不胜感激。

**我正在尝试做的虚拟版本是这样的：**

```
// match only [image]
$text = preg_replace('#\[image\](.*?)\[/image\]#si', '$cache->image_tag("$1", 0, 0, "")', $text);
// match only width
$text = preg_replace('#\[image width=\"(.*?)\"\](.*?)\[/image\]#si', '$cache->image_tag("$2", $1, 0, "")', $text);
// match only width and height
$text = preg_replace('#\[image width=\"(.*?)\" height=\"(.*?)\"\](.*?)\[/image\]#si', '$cache->image_tag("$3", $1, $2, "")', $text);
// match only all
$text = preg_replace('#\[image width=\"(.*?)\" height=\"(.*?)\" parameters=\"(.*?)\"\](.*?)\[/image\]#si', '$cache->image_tag("$4", $1, $2, $3)', $text); 
```

（这段代码实际上并没有按预期工作，但你会更好地理解我的观点。）我希望基本上把所有这些可怕的混乱都放在一个 RE 调用中。

**根据 Ωmega 的回答测试并运行的最终代码：**

```
// Match: [image width="740" height="249" parameters="bw"]51lca7dn56.jpg[/image]
$text = preg_replace('#\[image\b(?=(?:[^\]]*\bwidth="(\d+)"|))(?=(?:[^\]]*\bheight="(\d+)"|))(?=(?:[^\]]*\bparameters="([^"]+)"|))[^\]]*\]([^\[]*)\[\/image\]#si', '$cache->image_tag("$4", $1, $2, "$3")', $text); // the end is #si, so it would be eaiser to debug, in reality its #e 
```

但是，因为如果宽度或高度可能不存在，它将返回空而不是**NULL**。所以我采用了绘制的想法`preg_replace_callback()`：

```
$text = preg_replace_callback('#\[image\b(?=(?:[^\]]*\bwidth="(\d+)"|))(?=(?:[^\]]*\bheight="(\d+)"|))(?=(?:[^\]]*\bparameters="([^"]+)"|))[^\]]*\]([^\[]*)\[\/image\]#', create_function(
'$matches',
'global $cache; return $cache->image_tag($matches[4], ($matches[1] ? $matches[1] : 0), ($matches[2] ? $matches[2] : 0), $matches[3]);'), $text); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T00:36:46.250

也许尝试像这样的正则表达式来尝试在图像标签中获取额外的参数（如果有的话）。这样，参数可以按任何顺序排列，包含和省略参数的任意组合：

```
$string = 'this is some code and it has bbcode in it like [image width="740" height="249" parameters=""]51lca7dn56.jpg[/image] for example.';

if (preg_match('/\[image([^\]]*)\](.*?)\[\/image\]/i', $string, $match)) {
    var_dump($match);
} 
```

结果匹配：

```
array(3) {
  [0]=>
  string(68) "[image width="740" height="249" parameters=""]51lca7dn56.jpg[/image]"
  [1]=>
  string(39) " width="740" height="249" parameters="""
  [2]=>
  string(14) "51lca7dn56.jpg"
} 
```

因此，您可以检查`$match[1]`并解析出参数。您可能需要使用[`preg_replace_callback`](http://php.net/preg_replace_callback)来实现回调内部的逻辑。

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T00:40:54.767

我建议你使用正则表达式

```
\[image\b(?=(?:[^\]]*\bwidth="(\d+)"|))(?=(?:[^\]]*\bheight="(\d+)"|))(?=(?:[^\]]*\bparameters="([^"]+)"|))[^\]]*\]([^\[]*)\[\/image\] 
```

* * *

***编辑：***

```
$string = 'this is some code and it has bbcode in it like [image width="740" height="249" parameters=""]51lca7dn56.jpg[/image] for example and [image parameters="" height="123" width="456"]12345.jpg[/image].';

if (preg_match_all('/\[image\b(?=(?:[^\]]*\bwidth="(\d+)"|))(?=(?:[^\]]*\bheight="(\d+)"|))(?=(?:[^\]]*\bparameters="([^"]+)"|))[^\]]*\]([^\[]*)\[\/image\]/i', $string, $match) > 0) {
    var_dump($match);
} 
```

*输出：*

```
array(5) {
  [0]=>
  array(2) {
    [0]=>
    string(68) "[image width="740" height="249" parameters=""]51lca7dn56.jpg[/image]"
    [1]=>
    string(63) "[image parameters="" height="123" width="456"]12345.jpg[/image]"
  }
  [1]=>
  array(2) {
    [0]=>
    string(3) "740"
    [1]=>
    string(3) "456"
  }
  [2]=>
  array(2) {
    [0]=>
    string(3) "249"
    [1]=>
    string(3) "123"
  }
  [3]=>
  array(2) {
    [0]=>
    string(0) ""
    [1]=>
    string(0) ""
  }
  [4]=>
  array(2) {
    [0]=>
    string(14) "51lca7dn56.jpg"
    [1]=>
    string(9) "12345.jpg"
  }
} 
```

# regex - notepad++ 正则表达式删除大括号之间的所有文本

> ID：11679753
> 
> 赞同：3
> 
> 时间：2012-07-27T00:03:27.870
> 
> 标签：regex, notepad++, replace

```
function get_last_word($sentance){
    $wordArr = explode(' ', $sentance);
    $last_word = trim($wordArr[count($wordArr) - 1]);
    runDebug( __FILE__, __FUNCTION__, __LINE__, "Sentance: $sentance. Last word:$last_word",4);
    return $last_word;
} 
```

我想删除 {} 结果之间的所有文本应该是：

```
function get_last_word($sentance){} 
```

我试过了

```
{+.*} 
```

并且仅当大括号在同一行时才有效

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-27T02:28:53.677

较新版本的 Notepad++ 支持多行匹配（我现在使用的是 6.1.3）

在查找/替换对话框中，在“正则表达式”单选按钮旁边，有一个名为“.matches newline”的复选框，表示多行匹配。

然后，使用`\{.*?\}`（这是一个不贪婪的匹配）来实现你想要的。

请注意，它与您的大括号不匹配。例如

```
foo {
  bar {
    blabalbla
  }
  xxx {
    yyy
  }
} 
```

会给你

```
foo {}
  xxx {
    yyy
  }
} 
```

（我相信SO中还有其他关于正则表达式中大括号匹配的问题，你可以看看，虽然我想知道它们是否可以在记事本++中工作）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-27T14:40:09.973

You should be fine when you just replace `\{[^{}]+\}` with `{}`, repeatedly...

![Regular expression visualization](../Images/90af02e5029eb3592ca5b9319ee211ba.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-27T00:10:11.753

尝试

```
(?<=\{)[^}]+(?=\}) 
```

这将匹配介于 { 和 } 之间的任何内容

# image - 将图像添加到 PrimeFaces 中 PanelGrid 的页脚

> ID：11679755
> 
> 赞同：1
> 
> 时间：2012-07-27T00:03:43.227
> 
> 标签：image, primefaces, footer

我正在尝试将图像添加到 Primefaces 的 panelGrid 内的页脚。我使用这个[http://www.primefaces.org/showcase-labs/ui/panelGrid.jsf](http://www.primefaces.org/showcase-labs/ui/panelGrid.jsf)作为参考，但我得到这个错误：

```
SEVERE: Error Rendering View[/bizSim.xhtml]
java.lang.IllegalStateException: Component ID frmMain:bossMeeting:j_id2 has already been found in the view.  
    at com.sun.faces.util.Util.checkIdUniqueness(Util.java:846)
    at com.sun.faces.util.Util.checkIdUniqueness(Util.java:830)
    at com.sun.faces.util.Util.checkIdUniqueness(Util.java:830)
    at com.sun.faces.util.Util.checkIdUniqueness(Util.java:830)
    at com.sun.faces.util.Util.checkIdUniqueness(Util.java:830)
    at com.sun.faces.util.Util.checkIdUniqueness(Util.java:830)
    at com.sun.faces.util.Util.checkIdUniqueness(Util.java:830)
    at com.sun.faces.util.Util.checkIdUniqueness(Util.java:830)
    at com.sun.faces.util.Util.checkIdUniqueness(Util.java:830)
    at com.sun.faces.util.Util.checkIdUniqueness(Util.java:830)
    at com.sun.faces.application.view.StateManagementStrategyImpl.saveView(StateManagementStrategyImpl.java:144)
    at com.sun.faces.application.StateManagerImpl.saveView(StateManagerImpl.java:133)
    at com.sun.faces.application.view.WriteBehindStateWriter.flushToWriter(WriteBehindStateWriter.java:225)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:419)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at com.pdinh.bizsim.presentation.filter.RestrictPageFilter.doFilter(RestrictPageFilter.java:53)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at com.pdinh.bizsim.presentation.filter.CustomCharacterEncodingFilter.doFilter(CustomCharacterEncodingFilter.java:20)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:662)

INFO: Exception when handling error trying to reset the response.
java.lang.IllegalStateException: Component ID frmMain:bossMeeting:j_id2 has already been found in the view.  
    at com.sun.faces.util.Util.checkIdUniqueness(Util.java:846)
    at com.sun.faces.util.Util.checkIdUniqueness(Util.java:830)
    at com.sun.faces.util.Util.checkIdUniqueness(Util.java:830)
    at com.sun.faces.util.Util.checkIdUniqueness(Util.java:830)
    at com.sun.faces.util.Util.checkIdUniqueness(Util.java:830)
    at com.sun.faces.util.Util.checkIdUniqueness(Util.java:830)
    at com.sun.faces.util.Util.checkIdUniqueness(Util.java:830)
    at com.sun.faces.util.Util.checkIdUniqueness(Util.java:830)
    at com.sun.faces.util.Util.checkIdUniqueness(Util.java:830)
    at com.sun.faces.util.Util.checkIdUniqueness(Util.java:830)
    at com.sun.faces.application.view.StateManagementStrategyImpl.saveView(StateManagementStrategyImpl.java:144)
    at com.sun.faces.application.StateManagerImpl.saveView(StateManagerImpl.java:133)
    at com.sun.faces.application.view.WriteBehindStateWriter.flushToWriter(WriteBehindStateWriter.java:225)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:419)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at com.pdinh.bizsim.presentation.filter.RestrictPageFilter.doFilter(RestrictPageFilter.java:53)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at com.pdinh.bizsim.presentation.filter.CustomCharacterEncodingFilter.doFilter(CustomCharacterEncodingFilter.java:20)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:662)

WARNING: StandardWrapperValve[Faces Servlet]: PWC1406: Servlet.service() for servlet Faces Servlet threw exception
java.lang.IllegalStateException: Component ID frmMain:bossMeeting:j_id2 has already been found in the view.  
    at com.sun.faces.util.Util.checkIdUniqueness(Util.java:846)
    at com.sun.faces.util.Util.checkIdUniqueness(Util.java:830)
    at com.sun.faces.util.Util.checkIdUniqueness(Util.java:830)
    at com.sun.faces.util.Util.checkIdUniqueness(Util.java:830)
    at com.sun.faces.util.Util.checkIdUniqueness(Util.java:830)
    at com.sun.faces.util.Util.checkIdUniqueness(Util.java:830)
    at com.sun.faces.util.Util.checkIdUniqueness(Util.java:830)
    at com.sun.faces.util.Util.checkIdUniqueness(Util.java:830)
    at com.sun.faces.util.Util.checkIdUniqueness(Util.java:830)
    at com.sun.faces.util.Util.checkIdUniqueness(Util.java:830)
    at com.sun.faces.application.view.StateManagementStrategyImpl.saveView(StateManagementStrategyImpl.java:144)
    at com.sun.faces.application.StateManagerImpl.saveView(StateManagerImpl.java:133)
    at com.sun.faces.application.view.WriteBehindStateWriter.flushToWriter(WriteBehindStateWriter.java:225)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:419)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at com.pdinh.bizsim.presentation.filter.RestrictPageFilter.doFilter(RestrictPageFilter.java:53)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at com.pdinh.bizsim.presentation.filter.CustomCharacterEncodingFilter.doFilter(CustomCharacterEncodingFilter.java:20)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:662) 
```

代码：我正在尝试将 ah:graphicImage 标签添加到 f:facets 页脚标签，但出现错误

```
<p:panelGrid columns="1">
            <f:facet
                name="header"
                style="right:0px">
                <h:outputText value="#{bossMeetingViewBean.currentSlide.title}" />
            </f:facet>
            <pdinh:editor
                value="#{bossMeetingViewBean.currentSlide.body}"
                width="800"
                height="300"
                id="slideBody" />
            <f:facet name="footer">
                <h:graphicImage value="#{resource['images/icons/exclamation_16x16.png']}" />
                <h:outputText value="Footer Text" />
            </f:facet>
        </p:panelGrid> 
```

# git - Git：显示用户在当前分支中添加的每一行

> ID：11679759
> 
> 赞同：2
> 
> 时间：2012-07-27T00:04:40.900
> 
> 标签：git, github, github-for-windows

当我在某个 github 项目上工作时，我希望某个“非技术”人员能够更好地了解我实际在做什么。我想用我添加到这个项目的主分支的所有代码创建一个文本文件。我想把它放在一个文本编辑器中并向下滚动它，不管有多少屏幕。这基本上就是我想要的，因此，“行数”或“字符数”统计数据不会产生相同的影响。

具体来说，我想展示的是：（首选）我添加的所有行，即使它们后来被删除。

（第二选择）我在最新版本中贡献的所有行（我们只有一个分支）

有没有办法做到这一点，或者至少打印出当前分支中的所有行？（反正我写了 90% 以上）

我知道这本身并不是非常有用，但我觉得这是一个远离更有用的脚本，例如行数。

背景 -> 我对 Git 比较陌生，我在 Windows 的命令行中使用它。我有一些 linux 经验，所以这不会太困扰我。我也在为这个项目使用 Github，并且我可以访问 Windows 客户端的 github（尽管我并没有真正使用它）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T00:19:53.273

尝试这个：

```
git show $(git rev-list --author="Your Name" HEAD) 
```

这显示了差异，而不是“添加的行”，但差异更有意义。没有任何自动化程序可以决定是否应将被不同行替换的行视为添加或仅修改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T12:43:49.843

您可以尝试以下方法来获得所有更改的“最小”（零行上下文而不是三行）补丁：

```
for h in $(git --no-pager log --author='name' --format='%H' HEAD); do git --no-pager diff-tree -U0 $h; done >mychanges.txt 
```

`mychanges.txt`应该让“非技术”人员对您所做的事情有所了解；他们真正需要了解的是，以开头`+`的行是您添加的行，以开头`-`的行是您删除的行。浏览一些文件的一些差异，他们会掌握它的窍门，并且应该能够自己读取文件的其余部分。

# vb.net - 链接被截断，任何想法为什么？

> ID：11679761
> 
> 赞同：0
> 
> 时间：2012-07-27T00:04:58.777
> 
> 标签：vb.net

我在这方面取得了一些进展，但仍有一些问题需要解决。

希望这个不会那么难。

我有这个：

```
For Each item In Request.QueryString("doc").Split(","c)
    sb.Append("http://default.html?k=")
    sb.Append(item)
    sb.Append("&p=2&o=m</p>")
Next 
```

当我测试这段代码时：

```
Response.Write(sb.ToString()) 
```

我得到：

```
http://default.html?k=122&p=2&o=m

http://default.html?k=123&p=2&o=m 
```

这正是我们正在寻找的

当我们将其分配给如下变量时：

```
Dim linkList As String = sb.ToString() 
```

但是，当我遍历链接列表并将其写入屏幕时，它只会吐出字母 h。

任何想法我做错了什么以及如果可能的话如何解决它？

```
Dim link As String

For Each link I linkList

    'let me know if I am still getting the links
    response.write link

    'we will save all the links later
Next 
```

一如既往，非常感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T00:09:22.723

看起来你没有关闭你的`<a>`标签

```
&p=2&o=m</p> 
```

注意用`</p>`关闭没有结束`<a>`标签的段落`</a>`。

尝试*查看源代码*，您可能会看到 HTML 格式错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T01:19:11.693

您不能遍历一个字符串并获取另一个字符串（注意：**linkList 是一个字符串**- `Dim linkList As String = sb.ToString()`）。这就是为什么你得到 h 它试图在字符串中选择字符。将字符串放在数组中，然后循环遍历数组。尝试这个：

```
Dim linkArray() As String

For Each item In Request.QueryString("doc").Split(","c)
    Dim stb As New StringBuilder
    stb.Append("http://default.html?k=")
    stb.Append(item)
    stb.Append("&p=2&o=m</p>")
    linkArray.add(stb.toString())
Next

For Each link As String In linkArray
    response.write link
Next 
```

# magento - 如何使用按钮删除配置数据？

> ID：11679762
> 
> 赞同：0
> 
> 时间：2012-07-27T00:04:59.373
> 
> 标签：magento

所以在用户保存配置后，假设他们现在想删除配置数据。我想我应该在模型中运行删除方法，但我不确定如何将它附加到按钮上。我尝试让按钮转到使用 getModel 并运行其删除方法的控制器操作，然后它重定向回配置页面但它没有工作，我如何设置成功消息以便它在重定向后显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T00:39:16.193

按照惯例，Magento 配置数据不会从数据库中删除，除非它可以在比被删除范围更高的范围内写入 - ref [`Mage_Adminhtml_Model_Config_Data::save()`](https://github.com/LokeyCoding/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Adminhtml/Model/Config/Data.php#L195)。将空字段视为“未设置值”更为合适。

如果作为模块版本更改的一部分要删除字段，则可以通过[`Mage_Core_Model_Resource_Setup::deleteConfigData()`](https://github.com/LokeyCoding/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Core/Model/Resource/Setup.php#L915).

# c++ - const_cast 比普通演员更安全吗？

> ID：11679763
> 
> 赞同：3
> 
> 时间：2012-07-27T00:05:04.850
> 
> 标签：c++

**使用哪个更安全？**

```
int main()
{
    const int i=5;
    int *ptr;
    ptr=(int*)&i; <------------------- first

    ptr=const_cast<int*>(&i); <-------------------Second
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-27T00:09:55.180

从某种意义上说，它更安全，因为您不会得到除了删除之外的其他东西`const`：

```
int main()
{
    const char i=5;
    int *ptr;
    ptr=(int*)&i;  // the compiler won't complain

    ptr=const_cast<int*>(&i); // will fail, since `i` isn't an int
    return 0;
} 
```

这并不一定意味着`const_cast<>`安全：

```
const int i=5;

int main()
{
    int const& cri(i);

    int& ri = const_cast<int&>(cri);  // unsafe

    ri = 0; // will likely crash;

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T00:08:52.260

它们是完全等价的，只是 C 风格的转换比`const_cast`. 如果代码及时冻结，它们将是相同的。标准说，C 风格的演员表可能会演变为`static`、`reinterpret`、`const`演员表或三者的组合，或者出于某种原因可以访问私人基地的奇怪时髦演员表。关键是，在这个用例中，它完全等同于`const_cast`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T00:07:00.887

我不确定安全性——我敢肯定有人比我更精通这一点——但是 C++ 风格的强制转换是语言标准的一部分，应该总是优先于 C 风格的强制转换（作为一个问题风格和可读性）。

~~为了修改我的答案，编译器似乎检查了 C++ 风格的转换，而 C 风格的转换在运行时失败；在这方面，C++ 风格的强制转换肯定更安全。~~

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-27T00:09:06.217

两者都不比另一个更安全。在这两种情况下，如果您通过已转换的指针之一修改值，都会发生未定义的行为。`const_cast`这样做的好处是只做**你**想做的事情并清楚地表达出来，而 C 风格的转换可以是一切，并且对其参数的实际类型不敏感。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-27T00:20:15.167

它更安全，但方式与您想象的不同。

它更安全，因为**您明确声明您正在抛弃`const`ness**。

当有人看到你的代码时，他们会想——“好吧，这里是一个`const_cast`，这个参数一定是 const。让我们仔细看看这个”，而在阅读大块代码时，常规演员只会迷失在脑海中.

# xml - 可以使用“角色”属性对 DocBook 元素进行子类化吗？如果是这样，怎么做？

> ID：11679769
> 
> 赞同：2
> 
> 时间：2012-07-27T00:05:37.843
> 
> 标签：xml, xsd, polymorphism, reusability, docbook

我正在尝试对 DocBook 进行细微的定制，我怀疑这很容易通过子类化`<informaltable>`元素来解决。有几个语句暗示使用该`role`属性对 DocBook 元素进行子类化是可能的。

### 暗示使用角色进行子类化的文档是可能的

示例 1 - 来自 DocBook 5.1：权威指南 - 自定义 DocBook

> 在 DocBook 的几乎所有元素上都可以找到角色属性，它是一个文本属性，可用于子类化元素。

示例 2 - 来自 DocBook 5.1：权威指南 - DocBook 元素参考

> 虽然角色在所有 DocBook 元素上都出现的意义上是一个公共属性，但定制者会发现它不是任何“公共属性”模式的一部分。它的参数化方式不同，因为能够在不同元素上独立地对角色进行子类化很有用。

示例 3 - CERN - 使用 DocBook 编写文档

> 大多数 DocBook 标记包含一组通用属性。最常用的此类通用属性是 lang，它指定元素内部数据的语言，id 标记元素以便它可以被其他元素引用，以及角色，它允许一个元素的子类，以使其信息方面更具体。

### 一般谷歌调查结果。

谷歌搜索“扩展 docbook 元素角色属性”的组合会出现有关处理新元素的模板的页面，但似乎没有出现除了下面的自定义示例之外的任何页面，甚至考虑使用`role`属性对元素进行子类化。

### 确实存在的自定义示例

存在自定义现有 DocBook 元素格式的[示例](http://www.sagehill.net/docbookxsl/TitleFontSizes.html "Sagehill - DocBook 打印定制")，但这些是 XSLT 自定义，不涉及扩展 DocBook 模式。

还有一个添加元素[的示例](http://www.docbook.org/tdg51/en/html/ch05.html#ch05-classrole.2 "DocBook 5.1：权威指南 - 添加元素")`<sect6>`，但它似乎过于冗长而无法成为有效的子类化方法，我怀疑从技术上讲该示例根本不是子类化。此外，该示例似乎没有对该`role`属性进行任何特殊使用。

### 使用`role`属性进行子类化真的可以实现吗？

从上面的例子中可以看出，DocBook 模式是专门为使用`role`属性来促进元素的子类化而设计的，但是，似乎没有公布具体的例子。

我是 XML 和 DocBook 的新手。对 DocBook 元素进行子类化是否如此微不足道以至于未被注意到？如果是这样，有人可以展示它是如何实现的吗？

`role`使用一个不起作用的好主意对DocBook 元素进行子类化吗？如果是这样，为什么它不起作用？

***注1：*** 子类化是否`<informaltable>`是解决我原来问题的正确方法完全是另一个问题。

***注 2：*** 我的问题中有更多超链接，但显然我的声誉不允许我发布超过 2 个 :(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T07:51:07.487

> *从上面的例子看来，DocBook 模式是专门为使用角色属性来促进元素的子类化而设计的，但是，似乎没有公布具体的例子。*

[TDG 的示例 5.14](http://docbook.org/tdg5/en/html/ch05.html#ch05-classrole.2)是一个非常具体的示例，它显示了如何约束元素`role`上的属性，`<procedure>`以便只允许两个值（默认情况下，允许任何值）。这种定制需要修改模式。`<informaltable>`如果你愿意，你可以做类似的事情。

没有什么能阻止你使用类似的东西

```
<informaltable role="myspecialtable">
 ...
</informaltable> 
```

这是最简单的“子类化”；无需更改架构。应该如何`role="myspecialtable"`解释或处理完全取决于您。

> *还有一个添加`<sect6>`元素的示例，但它似乎过于冗长而无法成为有效的子类化方法，我怀疑从技术上讲该示例根本不是子类化。此外，该示例似乎没有对角色属性进行任何特殊使用。*

那么你对子类化的想法是什么？

也许“子类化”这个词可能有点误导。DocBook 是一种标记系统，而不是一种编程语言。对 DocBook 元素进行子类化（定制）与在 Java 或 C++ 中创建子类之间的类比不应太过分。

没有什么神奇的`role`。它只是一个没有预定义语义的属性。为了创建 DocBook 定制，您不必对它做任何特别的事情。

> *对 DocBook 元素进行子类化是否如此微不足道以至于未被注意到？*

你为什么这么说？整个[“定制 DocBook”](http://docbook.org/tdg5/en/html/ch05.html)一章都是关于定制 DocBook 元素的。这不是被忽视的事情。

> *使用角色对 DocBook 元素进行子类化是一个好主意，但它不起作用吗？*

它确实有效，但可能不是您期望的那样。

如上所述，只需确定`role`元素属性的特定值并在文档中使用它，您实际上就是在创建该元素的子类（自定义、变体）。而已。

如何*使用*自定义元素——如何对其进行转换、过滤、可视化等等——是另一回事。

# objective-c - UITableView 中每行一个部分

> ID：11679772
> 
> 赞同：0
> 
> 时间：2012-07-27T00:05:43.447
> 
> 标签：objective-c, uitableview, row, tableview

我正在尝试创建一个 UITableView，每个部分有一行，以呈现消息聊天表的外观。一个人将如何实现这一目标？使用 [array count] 在下面的两个委托方法中的不同组合中，要么返回同一单元格的单独部分，要么返回每个部分中的多行。

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
return [array count];}    

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
return 1;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T00:13:15.643

看起来它应该做你想做的事。然后，在`cellForRowAtIndexPath:`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-11T23:25:58.177

要解决这个问题：

```
[Array objectAtIndex:indexPath.section]; 
```

使用“节”而不是“行”。

# css - 为什么直接定义的 CSS 类不适用？

> ID：11679777
> 
> 赞同：0
> 
> 时间：2012-07-27T00:06:32.067
> 
> 标签：css, css-selectors

如果我有[这个清单](http://jsfiddle.net/RxBU8/)：

```
<ul class="parent">
    <li class="child">li1</li>
    <li>li2</li>
    <li>li3</li>
</ul> 
```

现在如果我申请

```
.parent li {
    background-color: blue;
}
.child {
    background-color: red;
} 
```

然后红色背景被忽略。不想让它变得重要，但要理解为什么类不起作用。如果我将这些选择器更改为`ul li`& `.child`，或将它们扩展为`.parent li`& `.parent .child`，则背景适用。所以也许很简单的问题：有什么规则，为什么这个选择器必须用“完整路径”定义？为什么仅使用类名直接定义时它不起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T00:08:37.797

答案在于[CSS 选择器的特殊性](http://www.w3.org/TR/css3-selectors/#specificity)。短版：最具体的选择器获胜。

# php - 组织这些表+行的最有效方法是什么？- MySQL

> ID：11679778
> 
> 赞同：3
> 
> 时间：2012-07-27T00:06:39.043
> 
> 标签：php, mysql, database-design, rows, database-performance

我将在我的网站上运行彩票，因此需要有一个地方来存储彩票和号码。我肯定会有一个表，调用`tickets`其中每一行都有自己的票号、相关联的彩票 ID 和所有其他信息（如它所属的用户的 ID）。

然而，我的问题是我是否应该在另一个字段中`tickets`保存票上选择的数字。不能创建多个字段，例如`number1`,`number2`等，因为每张彩票都有不同类型的彩票（即`lottery1`可能要求您选择 4 个号码，也`lottery2`可能要求您选择 6 个号码）。

所以我可以创建一个 VARCHAR 或 TEXT 的新字段来接受逗号分隔的票号，即：`1,2,3,4,5,6`或创建另一个名为的新表`numbers`，其中每行都有票号和与之关联的票号。但是我不确定这种方法是否非常有效，因为只有一张 6 个号码的票，表中需要 1 行，`tickets`表中需要 6 行`numbers`。

这些选项中哪个最有效？或者有比这更好的方法吗？请记住，在彩票结束时，代码将需要循环检查每张彩票以检查他们是否中奖 - 所以选项 2 可能过于占用资源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T00:33:14.037

在下文中，“Ticket[Number]”应该被理解为“Selected *Set* of Lottery Numbers”。记住`Set(a,b,c)`等于`Set(c,b,a)`。

* * *

我会这样：

```
Purchase
  -PersonID // associate Person (one person can have many purchases)
  -TicketID // associate Ticket (a purchase is for one "ticket",
            //                   which can be purchased many times)
  -DisplayTicketNumber // for Human Display

Ticket
  -TicketNumber 
```

那是，`Purchase:M-1:Ticket`

是用户选择的`DisplayTicketNumber`数字，例如“3,1,2”，而另一方面，`TicketNumber`是标准化的票号，其中小值放在首位。最终形式因此`min,..,max`或相似。也就是说`DisplayTicketNumbers`，具有相同值集（以任何顺序）的任意数量将具有相同的`TicketNumber`:

```
DisplayTicketNumber  TicketNumber
1,2,3                1,2,3
2,3,1                1,2,3
3,2,1                1,2,3
3,2,1,4              1,2,3,4 .. and etc 
```

然后放一个索引，`TicketNumber`这样一个简单的索引`WHERE TicketNumber = @normalizedTicketNumber`将是一个非常快的索引。

我实际上认为这是一个*可以接受*的规范化设计，TicketNumber（连同一个抽奖号码）形成一个密钥。因此，我对此的论点是：

1.  TicketNumber 是一个*不透明的值*，它唯一地标识一张票（每个抽奖）。无需了解数据库模型内部的“细节”。（在某些情况下可能需要，但这里不是。）

2.  DisplayTicketNumber 是用户输入的产物；然而多个 DisplayTicketNumber 可以代表同一个 TicketNumber。虽然这*确实*代表了可能的“重复”，但重要的是要意识到这是一个*友好显示*值，它代表一个*列表*（比一*组*信息更多）选择的数字。

    1.  在这种情况下，我会使用触发器使`DisplayTicketNumber`(and `TicketNumber`) 不可变，以便在创建后不会在此处引入数据库不一致。

    2.  如果可以计算 FK，则可以强制执行 DisplayTicketNumber 和 TicketNumber 之间的约束而不会保持不变。

（我省略了各种细节，例如为不同的莱佛士设置不同的 TicketNumbers 等。我还`TicketId`为 FK 显示了一个，但我也暗示这`RaffleId,TicketNumber`是一个可接受的 [非代理] 键。）

此外，Ticket 表*可以*被删除：因为很少有彩票号码集将被共享，所以如果没有额外的关联 Ticket 信息，那么删除它可能是一种*可接受*的非规范化。这样做的一个优点是`TicketNumber`可以将其移动到`Purchase`表中，然后转换为标准化 Ticket 值的*计算列*（仍被索引）。

And, *if* MySQL allows using a computed column in a FK then using the relationship `PK(Ticket.TicketNumber)` -> `FK(Purchase.TicketNumber)`, where `Purchase.TicketNumber` is computed, *could* be used to increase model integrity without eliminating the Ticket table. (I do not use MySQL, however, so I cannot say if this is viable or not.)

Happy coding.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T00:13:51.657

我将使用第二个选项，您可以在其中创建新表，称为数字，并且您有与之关联的数字。

但我还要在门票表中添加一个字段，在其中指示可以选择的数字数量，以及检查使用该门票插入的数字数量（在查询中使用 COUNT）是否小于可以选择的数字数量，然后插入。

# java - Java Error: Could not find or load main class. (Eclipse Juno) with package

> ID：11679791
> 
> 赞同：0
> 
> 时间：2012-07-27T00:07:50.587
> 
> 标签：java, eclipse, classpath, package

So I made a project with packages in Eclipse. I have a few classes all in same package com.example.parser. In Eclipse everything works fine. So I wanted to run one of the class from command line. The java/javac PATHs are set correctly and work normally if no packages are there. The file structure looks like this:

```
~Project/bin/com/example/parser/*.class (all class files)
~Project/src/com/example/parser/*.java (all source files) 
```

So in command line I go to ~Project/bin/com/example/parser To mention OS: Windows 7 Pro The command java ClassToRun gives

```
Exception in thread "main" java.lang.NoClassDefFoundError: ClassToRun (wrong name:
com/example/parser/ClassToRun) at ... (stack trace) 
```

So I googled a bit and got to conclusion this is the correct command: java -cp .;~Project/bin ClassToRun Now I get this:

```
Error: Could not find or load main class ~Project/bin 
```

So I could not solve this... any one can help a bit? PS: Forgot to mention the "/" should be "\" and the "~" stands for the abs path infront. Oh yeah and I just update to jdk 1.7...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T00:18:58.563

Did you type the fully-qualified class name at the command prompt?

i.e.

```
java -cp .;~Project\bin name.of.package.Class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-02T06:23:43.453

`.metadata` is corrupted.

Steps:

```
Stop eclipse, delete .metadata in workspace and restart eclipse

Import Project

Run again 
```

([Details](https://stackoverflow.com/questions/10356854/eclipse-cant-find-load-main-class))

# java - 如何将所有 url 映射到单个 .html 页面

> ID：11679794
> 
> 赞同：0
> 
> 时间：2012-07-27T00:08:14.467
> 
> 标签：java, javascript, html, url, tomcat

我是 Tomcat 的新手，并且了解 servlet 映射，但希望我可以对驻留在 webapp/ 文件夹中的 html 文件进行一些映射。

我有一个简单的 javascript Web 应用程序，它位于 webapp/index.html 中。由于我在 javascript 中弄乱了 url，我想让映射 /console/* 以点击 webapp/index.html 成为可能。例如 /console/hi 和 /console/bye 都应该加载 webapp/index.html。

这可能吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T06:28:39.350

您可以将 index.html 文件更改为相同的 index.jsp 文件，然后在 web.xml 中使用此映射

```
<servlet>
    <servlet-name>index</servlet-name>
    <jsp-file>index.jsp</jsp-file>
</servlet>
<servlet-mapping>
    <servlet-name>index</servlet-name>
    <url-pattern>/console/*</url-pattern>
</servlet-mapping> 
```

我认为这是最简单的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T00:34:17.060

就像@Pointy 说的那样，您需要一个过滤器，它将接收所有请求并重定向到您想要的 .hmtl 页面......

这是一个简单过滤器实现的[链接](http://viralpatel.net/blogs/tutorial-java-servlet-filter-example-using-eclipse-apache-tomcat/)。

希望能帮助到你

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-10T21:08:17.650

我已经发布了一个 Java servlet 过滤器实现，它可以满足您对 Github 的需求。代码非常简单，我希望您可能希望根据自己的需要对其进行自定义。

[https://github.com/lookfirst/history-api-fallback](https://github.com/lookfirst/history-api-fallback)

# php - 为什么我的 php 代码绕过了一些 if 语句？

> ID：11679798
> 
> 赞同：1
> 
> 时间：2012-07-27T00:08:40.133
> 
> 标签：php, if-statement

当我使用我的程序时，我遇到了一个未知错误。发生的事情是我的代码绕过了两个`if`语句。这是我的代码：

```
<?
session_start();
if ($_POST){
  $ao = trim($_POST['amountof']);
  $continue = true;
  if (strlen($ao) < 1){  ####First If-Statement Bypassed####
    $continue = false;
    $_SESSION['error'] = "Please enter in a value!";
  }
  if (strlen($ao) > 20){  ####Second If-Statement Bypassed####
    $continue = false;
    $_SESSION['error'] = "Your value has exceeded 20!";
  }
  if (!is_numeric($ao)){
    $continue = false;
    $_SESSION['error'] = "Value is not numeric!";
  }
}

?>
<form method="post">
<?
if (isset($_SESSION['error'])){
  print "<span style=\"color: red; font-weight: bold;\">" . $_SESSION['error'] . "                </span><br />";
}
?>
How many letters are you planning to process?<br />
<span style="font-size:.8em; color: grey;">You may not exceed 20</span><br />
<input type="text" name="amountof" style="width:25px;" maxlength="2"/>
<input type="submit" value="Continue" />
</form>

<? unset($_SESSION['error']); ?> 
```

被绕过的 if 语句在代码中被标记。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T00:33:15.040

试试看：

```
<?php

 session_start();
 $_SESSION['error']='';

  if (isset($_POST['amountof'])){
  $ao = trim($_POST['amountof']);
  $continue = true;
  if (strlen($ao) < 1){ 
    $continue = false;
    $_SESSION['error'].= "Please enter in a value!<br/>";
  }

  if (!is_numeric($ao)){
    $continue = false;
    $_SESSION['error'].= "Value is not numeric!<br/>";
  }
  elseif ($ao > 20){ 
    $continue = false;
    $_SESSION['error'].= "Your value has exceeded 20!";
  }
}
?>
<form method="post">
<?php
 if (!empty($_SESSION['error'])){

 //...... 
```

或简化（请注意，用户可以键入负值或 0 当前将通过测试的值）

```
if (!is_numeric($ao) || $ao<1 || $ao>20){
        $continue = false;
        $_SESSION['error']= "Please enter in a numeric value between 1 and 20";
      } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T00:34:54.697

在没有看到一些示例数据的情况下，我相信您只是在覆盖错误变量，而不是绕过 if 语句。让我们以没有输入任何内容的情况来运行代码。

第一个 if 语句中的代码运行，因为 strlen($ao) 将小于一个。$_SESSION['error'] 将是“请输入一个值！”

现在第二个 if 语句中的代码没有运行，因为 strlen($ao) 显然没有超过 20。

第三个 if 语句中的代码运行，因为空字符串不是数字。由于您正在覆盖 $_SESSION['error']，因此变量将只是“值不是数字！”。因此它会出现第一个 if 语句被绕过。

尝试连接错误字符串而不是覆盖。

编辑：通过使用 Molle 博士在我回答之前发布的代码片段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T00:11:40.453

你需要使用

```
if(isset($_POST)) { 
```

在第二行，而不是你正在使用的，因为`$_POST`它的行为就像一个数组。

# database - 将用户放在数据库模式中的什么位置？

> ID：11679802
> 
> 赞同：0
> 
> 时间：2012-07-27T00:09:12.270
> 
> 标签：database, schema

这可能已经被问过了，但我没有在另一个问题中看到它。

我是数据库模式的新手，我正在寻求关于如何在模式中设置用户的意见。最好是为用户分配一个全新的数据库，还是为用户创建一个新表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T00:49:10.023

数据存储在表中，因此您关于是否创建新表的问题没有实际意义……您将不得不创建一个新表。这是一个问题——*在*应用程序使用的同一个数据库中，还是在不同的数据库中。

如果要在自己使用不同数据库的应用程序之间共享用户，则将它们放在一个单独的数据库中，每个人都可以“看到”它们。否则，只需在数据库中创建另一个表。

# c# - Json.net 重命名属性

> ID：11679804
> 
> 赞同：11
> 
> 时间：2012-07-27T00:09:17.837
> 
> 标签：c#, .net, json, json.net, rename

我有一个表示 JSON 的字符串，我想使用 JSON.NET 重命名一些属性。我需要一个通用函数来用于任何 JSON。就像是：

```
public static void Rename(JContainer container, Dictiontionary<string, string> mapping)
{
  foreach (JToken el in container.Children())
  {
    JProperty p = el as JProperty;
    if(el != null && mapping.ContainsKey(p.Name))
    {
      // **RENAME THIS NODE!!**
    }

    // recursively rename nodes
    JContainer pcont = el as JContainer;
    if(pcont != null)
    {
      Rename(pcont, mapping);
    }
  }
} 
```

怎么做？？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-27T04:28:23.963

我建议使用重命名的属性重建您的 JSON。我认为您不应该担心速度处罚，因为这通常不是问题。这是你如何做到的。

```
public static JToken Rename(JToken json, Dictionary<string, string> map)
{
    return Rename(json, name => map.ContainsKey(name) ? map[name] : name);
}

public static JToken Rename(JToken json, Func<string, string> map)
{
    JProperty prop = json as JProperty;
    if (prop != null) 
    {
        return new JProperty(map(prop.Name), Rename(prop.Value, map));
    }

    JArray arr = json as JArray;
    if (arr != null)
    {
        var cont = arr.Select(el => Rename(el, map));
        return new JArray(cont);
    }

    JObject o = json as JObject;
    if (o != null)
    {
        var cont = o.Properties().Select(el => Rename(el, map));
        return new JObject(cont);
    }

    return json;
} 
```

这是一个使用示例：

```
var s = @"{ ""A"": { ""B"": 1, ""Test"": ""123"", ""C"": { ""Test"": [ ""1"", ""2"", ""3"" ] } } }";
var json = JObject.Parse(s);

var renamed = Rename(json, name => name == "Test" ? "TestRenamed" : name);
renamed.ToString().Dump();  // LINQPad output

var dict = new Dictionary<string, string> { { "Test", "TestRenamed"} };
var renamedDict = Rename(json, dict);
renamedDict.ToString().Dump();  // LINQPad output 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-06-16T03:49:03.327

我们使用这种方法。您可以使用 JObject 的 SelectToken() 找到所需的属性。是的，它确实支持 JsonPath。

```
public static class NewtonsoftExtensions
{
    public static void Rename(this JToken token, string newName)
    {
        var parent = token.Parent;
        if (parent == null)
            throw new InvalidOperationException("The parent is missing.");
        var newToken = new JProperty(newName, token);
        parent.Replace(newToken);
    }
} 
```

# google-chrome-extension - 如何在 Chrome 扩展程序中运行 SSE（服务器发送事件）？

> ID：11679809
> 
> 赞同：1
> 
> 时间：2012-07-27T00:09:43.727
> 
> 标签：google-chrome-extension, server-sent-events

我将脚本（background.js）设置为背景`manifest.json`。

并将代码写入 background.js：

```
var source = new EventSource('http://localhost:8086/test/');
source.addEventListener('ping', function (e) {
    var notification = webkitNotifications.createNotification(
      'test.png',
      'testTitle',
      'testContent'
    );
    notification.show();
}, false); 
```

这些代码可以像正常的 html 页面`http://localhost:8086/`一样在 .

我已经放入`http://localhost:8086/`manifest.json 的“权限”。

# macos - 如何在执行之前获取新进程的 PID？

> ID：11679813
> 
> 赞同：1
> 
> 时间：2012-07-27T00:10:11.043
> 
> 标签：macos, pid, function-interposition, interposing, library-interposition

[为了让我可以使用inject_and_interpose](https://github.com/comex/inject_and_interpose)代码进行一些注入和插入，我需要在新启动的进程*（典型的闭源用户应用程序）*实际执行之前获取它的 PID。

To be clear, I need to do better than just "notice it quickly"--I can't be polling, or receiving some asynchronous notification that means that the process has already been executing for a few milliseconds by the time I take action.

**I need to have a chance to do my injecting and interposing before a single statement executes.**

I'm open to writing a background process that gets synchronously notified when a process by a particular name comes into existence. I'm also open to writing a launcher application that in turn fires up the target application.

Any solution needs to support 64-bit code, at a minimum, under 10.5 (Leopard) through 10.8 (Mountain Lion).

*In case this proves to be painfully simple, I'll go ahead and admit that I'm new to OS X :) Thanks!*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T00:16:48.047

我知道如何在 Linux 上执行此操作，所以在 OSX 上可能是相同的（-ish）。

您首先调用[`fork()`](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/Manpages/man2/fork.2.html)以复制您的过程。的返回值`fork()`指示您是父母还是孩子。父进程得到子进程的pid，子进程得到零。

因此，子调用[`exec()`](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man3/exec.3.html)实际开始执行新的可执行文件。通过使用在调用 fork 之前创建的管道，子进程可以在执行新的可执行文件之前等待父进程执行所需的任何操作。

```
pid_t pid = fork();
if (pid == -1) {
    perror("fork");
    exit(1);
}
if (pid > 0) {
    // I am the parent, and pid is the PID of the child process.

    //TODO: If desired, somehow notify child to proceed with exec
}
else {
    // I am the child.

    //TODO: If desired, wait no notification from parent to continue

    execl("path/to/executable", "executable", "arg1", NULL);

    // Should never get here.
    fprintf(stderr, "ERROR: execl failed!\n");  
} 
```

# linux - How can configure linux routing to send packets out one interface, over a bridge and into another interface on the same box

> ID：11679814
> 
> 赞同：3
> 
> 时间：2012-07-27T00:10:48.390
> 
> 标签：linux, networking, routing

I'm trying to test a ethernet bridging device. I have multiple ethernet ports on a linux box. I would like to send packets out one interface, say eth0 with IP 192.168.1.1, to another interface, say eth1 with IP 192.168.1.2, on the same subnet.

I realize that normally you don't configure two interfaces on the same subnet, and if you do the kernel routes directly to each interface, rather than over the wire. How can I override this behavior, so that traffic to 192.168.1.2 goes out the 192.168.1.1 interface, and visa-versa?

Thanks in advance!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T00:41:31.337

这是一个猜测，但我希望它朝着正确的方向发展。

按照以下方式制作更具体的路由表条目：

```
route add -host 192.168.1.2 dev eth0
route add -host 192.168.1.1 dev eth1 
```

[您可能还需要调整两个接口的`accept_local`配置](http://www.gremwell.com/linux-routing-quirks)——或`all`设置。（打开它可能会使您的机器更容易受到 IP 源欺骗攻击；请确保您在其他地方有良好的入口防火墙规则以防止出现问题。）（请参阅`sysctl -a | grep accept_local`我在说什么。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T00:40:42.663

我认为你的 Linux 中需要类似 Mac-Vlan 的东西。这不能仅通过 NAT 完成。阅读：[http](http://www.linuxjournal.com/article/7268) ://www.linuxjournal.com/article/7268 。

# android - Android：相机应用程序崩溃，因为相机被访问太多次

> ID：11679816
> 
> 赞同：0
> 
> 时间：2012-07-27T00:10:52.407
> 
> 标签：android, multithreading, camera

我有一个相机应用程序，当用户单击按钮时会拍照。每次用户单击按钮时，我都会禁用该按钮，然后在将图片保存到手机后启用该按钮。

这种启用和禁用的东西是为了防止用户疯狂地点击按钮并破坏应用程序。但是，它似乎没有像我预期的那样工作。任何建议为什么会发生这种情况？我猜多个线程正在尝试同时启用和禁用按钮，但我不是 100% 确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T20:03:14.333

事实证明这是一个并发问题。我通过使用 ReaderWriterLockSlim 启用和禁用已解决问题的按钮解决了这个问题（我在 Monodroid 中开发）。

# android - 在运行 Osmdroid 时交换和加载 Tiles

> ID：11679823
> 
> 赞同：1
> 
> 时间：2012-07-27T00:11:55.613
> 
> 标签：android, osmdroid

我目前正在使用 osmdroid 和 zip 格式的离线地图，我想在我的应用程序运行时将已加载的图块交换为新图块。但是，我不知道如何在不退出应用程序的情况下加载新图块。

当我已经为该区域加载了切片时，如何强制 osmdroid 从磁盘检索和加载切片？

如果这里有帮助的话，我最初用来加载图块的代码是：

```
File osmDir = new File("/mnt/sdcard/osmdroid");
File[] mapZips = osmDir.listFiles(new ZipFileFilter());

List<MapTileModuleProviderBase> overlayFileProvider = new ArrayList<MapTileModuleProviderBase>(mapZips.length);
myTileSource overlayFileTileSource = null;
IArchiveFile[] overlayFileArchive = new IArchiveFile[1];
for (File zip : mapZips)
{
overlayFileArchive[0] = ArchiveFileFactory.getArchiveFile(zip);
overlayFileTileSource = new myTileSource("MapquestOSM", null, 18, 18, 256, ".png");
overlayFileProvider.add(new MapTileFileArchiveProvider(new SimpleRegisterReceiver(getApplicationContext()), overlayFileTileSource, overlayFileArchive));
}

MapTileModuleProviderBase[] overlayFileProvider2 = new MapTileModuleProviderBase[overlayFileProvider.size()];
MapTileProviderArray overlayFileProviderArray1 = new MapTileProviderArray(overlayFileTileSource, null, overlayFileProvider.toArray(overlayFileProvider2));
        overlayFileProviderArray1.setTileRequestCompleteHandler(mapView.getTileRequestCompleteHandler());
    myTilesOverlay = new TilesOverlay(overlayFileProviderArray1, getApplicationContext()); 
```

老实说，我还不完全理解这段代码发生了什么，如果有人知道解释在哪里，那也将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T10:19:49.200

当我的应用更改地图图块时，它只是重新开始`Activity`显示地图。它效率低下，但至少它有效。

这也是一个关于下载地图的帖子，也许它有帮助。 [https://groups.google.com/d/msg/osmdroid/-0wc7xfJfvA/nK9NZPtS7IIJ](https://groups.google.com/d/msg/osmdroid/-0wc7xfJfvA/nK9NZPtS7IIJ)

# c# - 使用 C# 检测 2D 空间中的光投影

> ID：11679828
> 
> 赞同：0
> 
> 时间：2012-07-27T00:12:12.133
> 
> 标签：c#, .net, geometry, 2d, raytracing

光源是二维空间中位于单个坐标中的实体。

在不同的位置周围有多个光源，每个光源发出8个方向的光线`N, S, E, W, NW, NE, SW, SE`。所有灯光的坐标都是已知的。

给定一个随机点`(x, y)`，我需要确定它是否被光线击中。

```
int width = 10000;
int height = 10000;
List<Point> lights = a bunch of randomly placed light sources.
Point position = new Point(8888, 5555); 
```

现在我需要迭代`lights' collection and determine if my location (`位置`）被每个人击中。

一个简单的检查`lights[n].X == position.X`可以告诉我水平撞击和类似的垂直撞击。如何以最有效的方式检测对角线命中？由于对角线总是 45 度角，我可以避免昂贵的浮点计算吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T00:21:29.873

为什么不直接使用：

```
Math.abs(lights[n].X - position.X) == Math.abs(lights[n].Y - position.Y) 
```

使用角度（三角函数）几乎肯定会更慢更复杂。

# jquery - 将内容固定到页面顶部 Jquery mobile

> ID：11679829
> 
> 赞同：0
> 
> 时间：2012-07-27T00:12:28.117
> 
> 标签：jquery, css, jquery-mobile

我有一个带有列表视图的页面和列表顶部的一些信息。我想修复此信息，以便当用户滚动列表时，信息仍然可见。

这是我[尝试过的](http://jsfiddle.net/kPLK4/1/)

如您所见，`div`with`id: #fixed-info`是固定的，但显示在页面底部。我需要它显示在标题（也是固定的）和列表视图之间。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T00:19:45.150

您是否尝试过实施 position:static; ? 我读到这是想要使用 position:fixed; 的人的解决方法。在一个元素上

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T00:32:16.813

您可以将以下 css 样式添加到 info div：

```
 top:20px;
 z-index:10; 
```

您的顶部 css 的值将是您的标题的高度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T08:08:02.307

我更新了你的小提琴：http: [//jsfiddle.net/kPLK4/19/](http://jsfiddle.net/kPLK4/19/)

希望这就是你要找的。

注意：我给固定 div 一个 'fixed' 的 id 和一个 'fixed top' 的数据位置，然后我还添加了一些简单的样式让它看起来更正常一点。更改红色背景以匹配列表的背景，您应该一切顺利。

# events - ember 中的事件冒泡/捕获/委托

> ID：11679832
> 
> 赞同：1
> 
> 时间：2012-07-27T00:13:01.810
> 
> 标签：events, event-handling, ember.js, delegation

很难解释实际的代码，因为我不完全知道问题出在哪里，但是如果有人能帮助解释事件是如何被委托/冒泡的，那就太好了`Ember`。

我有一种情况，其中`mouse move`on`document`没有在 one 内部触发`view`。`view`当使用动态插入时会发生这种情况`outlets`。

鼠标移动绑定代码：

```
 MOVE_EVENT = touch ? 'touchmove' : 'mousemove',   
 $(document).on(MOVE_EVENT, function (e) {
        console.log('move event move=true');
    if (move) {
        e.preventDefault();
        stop = getY(e);
        //console.log('move event move=true');
        var val = pos + (start - stop) / h;
        val = val > (max + 1) ? (max + 1) : val;
        val = val < (min - 1) ? (min - 1) : val;
        inst.scroll(target, val);
    }
}); 
```

如果我使用默认情况下在插座中显示视图的路由器 URL 加载页面，则鼠标在视图内移动会触发 body 上的 mousemove。当我通过更改状态进入视图时，它不会发生：这是导致行为的状态变化的日志。

```
mouse move in repeat view
move event move=true
mouse move in repeat view
move event move=true
STATEMANAGER: Sending event 'chooseSkipTime' to state root.ote.
STATEMANAGER: Entering null
STATEMANAGER: Entering root
STATEMANAGER: Entering root.ote
STATEMANAGER: Entering root.ote.repeat
STATEMANAGER: Entering root.ote.repeat.skiptimes
STATEMANAGER: Entering root.ote.repeat.skiptimes.index
skiptimes view Inserted 
```

skiptimes 被插入到 oulet 上`RepeatView`。在这样的状态改变之后，鼠标内部的移动`repeat view`没有​​被触发，或者它没有触发 mousemove on `document`。**与此同时，当我将鼠标移到 parentview( `RepatView`) 区域之外时，鼠标移动会显示日志。**

简而言之，不会触发视图内的 mousemove。我放了：

```
mouseMove : function(e){
    console.log('Mouse Move in Blah Blah View');
    } 
```

在`RepeatView`包括 在内的每个视图中`RepeatView`，都没有触发。但是当显示日志时，鼠标在父级上的`RepeatView`移动会触发。

很难解释实际的代码，因为我不完全知道问题出在哪里，但是如果有人可以帮助解释事件是如何在 Ember 中被委托/冒泡的，那就太好了。

**更新**

经过进一步调查，似乎 ember-latest 中的以下 stopPropogation 导致了这种情况，但尚无法理解为什么会发生这种情况。

```
 setupHandler: function(rootElement, event, eventName) {
    var self = this;

    rootElement.delegate('.ember-view', event + '.ember', function(evt, triggeringManager) {

      var view = Ember.View.views[this.id],
          result = true, manager = null;

      manager = self._findNearestEventManager(view,eventName);

      if (manager && manager !== triggeringManager) {
        result = self._dispatchEvent(manager, evt, eventName, view);
      } else if (view) {
        result = self._bubbleEvent(view,evt,eventName);
      } else {
        //evt.stopPropagation();
      }

      return result;
    }); 
```

# iphone - 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序

> ID：11679835
> 
> 赞同：-1
> 
> 时间：2012-07-27T00:13:45.173
> 
> 标签：iphone, objective-c, ios, ios5, ios4

我现在没有收到错误，但我的代表没有工作。我正在制作一个自定义键盘，所以我有 UIViewController 和 UIView。我希望 UIView 调用 UIViewController 中的 sendKeyboardShortCut 方法。未调用 sendKeyboardShortCut 方法。谢谢你

//视图控制器.h

```
#import "KeyboardExtension.h"
@interface PageViewController : UIViewController <UITextViewDelegate,sendKeyboardShortCutDelegate> {
   KeyboardExtension *inputAccView;
}
-(void)sendKeyboardShortCut:(NSString*)shortCut;
@property (nonatomic, assign) IBOutlet UITextView *tv;
@end 
```

//视图控制器.m

```
@implementation PageViewController
@synthesize tv;
- (void)viewWillAppear:(BOOL)animated
{
    tv.delegate = self;
}
-(void)createInputAccessoryView{
    inputAccView = [[[KeyboardExtension alloc] init]autorelease];
    inputAccView.delegate = self;
    NSArray *nibObjects = [[NSBundle mainBundle] loadNibNamed:@"KeyboardExtension" owner:self options:nil];
   inputAccView = [nibObjects objectAtIndex:0];
}
-(void)textViewDidBeginEditing:(UITextView *)textView{
    [self createInputAccessoryView];
    [textView setInputAccessoryView:inputAccView];
}

  -(void)sendKeyboardShortCut:(NSString*)shortCut{
    if ([shortCut isEqualToString:@"dash"] ) {

        NSRange range = tv.selectedRange;
        if((range.location+range.length)<=tv.text.length)
        {
            NSString * before = [tv.text substringToIndex:range.location];
            NSString * after = [tv.text substringFromIndex:range.location+range.length];
            tv.text = [NSString stringWithFormat:@"%@-%@",before,after];
        }

    }
}

@end 
```

//键盘视图.h

```
#import <UIKit/UIKit.h>
@protocol sendKeyboardShortCutDelegate <NSObject>
-(void)sendKeyboardShortCut:(NSString*)shortCut;
@end
@interface KeyboardExtension : UIView
-(IBAction)dash:(id)sender;
@property(nonatomic,assign) id<sendKeyboardShortCutDelegate>delegate;
@end 
```

//键盘视图.m

```
#import "KeyboardExtension.h"

@implementation KeyboardExtension
@synthesize delegate;
-(IBAction)dash:(id)sender{[delegate sendKeyboardShortCut:@"dash"];}
@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T01:46:09.103

我怀疑：

1）您的按钮的目标是笔尖的文件所有者，而不是 KeyboardExtension

2）您的操作设置为不发送发件人，因此 UIKit 调用 -comma 而不是 -comma：

此外，以下代码非常可疑：

```
inputAccView = [[[KeyboardExtension alloc] init]autorelease];
inputAccView.delegate = self;
NSArray *nibObjects = [[NSBundle mainBundle] loadNibNamed:@"KeyboardExtension" owner:self options:nil];
inputAccView = [nibObjects objectAtIndex:0]; 
```

A）您分配一个几乎不使用的对象，因为您立即用笔尖的对象替换它

B) 从 nib ( `[nibObjects objectAtIndex:0]`) 中提取对象的方法确实不可靠。您应该在其中创建一个 IBOutlet`PageViewController`并将其链接到 nib

我认为你应该重新审视你在这里使用笔尖的方式。

最后一点（不相关）：你为什么使用`[NSString stringWithFormat:@"..."]`而不是 just `@"..."`？

# codeigniter - Codeigniter 黑色菱形字符

> ID：11679839
> 
> 赞同：0
> 
> 时间：2012-07-27T00:14:12.343
> 
> 标签：codeigniter, utf-8, character-encoding

这更像是一个好奇而不是实际问题，因为有一个简单且可能更可取的解决方法。当使用 Codeigniters 表单验证和显示错误消息时，CI 用户指南提供了两种设置自己的验证消息的方法：通过`set_message-method`和编辑位于系统文件夹中的语言文件。

但是，当编辑语言文件以包含我的母语中的错误消息（其中包含特殊字符，如“Ä”和“Ö”）时，特殊字符被替换为黑色菱形。使用`set_message-method`from时，`form_validation`它可以正常工作，并且字符已正确使用 UTF-8 编码。

我想知道使用文件而不是方法时问题出在哪里以及如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T00:18:16.653

听起来您的编辑器没有将文件保存为 UTF-8。确保它是。

# tridion - 如何获取在 SDL Tridion C# TBB 中发起发布操作的用户

> ID：11679843
> 
> 赞同：9
> 
> 时间：2012-07-27T00:14:44.400
> 
> 标签：tridion, tridion-2011

从 SDL Tridion 2011 中模块化页面模板使用的 C# TBB 中，是否可以访问启动发布操作的用户对象？

查看*TOM.NET 6 Programmers Reference Guide*，似乎我需要的`Creator`属性是`PublicationTransaction`对象的属性，但我找不到从 C# TBB 访问它的方法，我没有看到明显的方法`PublicationTransaction`从`engine`or对象中获取电流`package`，我只能找到一种`PublicationTransaction`使用`PublishEngine`对象获取对象列表的方法。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-27T00:48:06.247

看看 Mihai Cadaru 的这两篇博客文章：

*   [如何查找当前的 Publish Transaction](http://yatb.mitza.net/2012/03/get-current-publish-transaction.html)（基于 Chris Summers 的技巧）
*   [基于现有交易创建新的发布交易](http://yatb.mitza.net/2012/05/publishing-from-template-code-using.html)

有了这两个，你应该能够找到你需要的东西。

您在 TBB 中需要的基本功能是：

```
public PublishTransaction GetPublishTransaction(Engine engine)
{
    String binaryPath = engine.PublishingContext.PublishInstruction.
                                         RenderInstruction.BinaryStoragePath;
    Regex tcmRegex = new Regex(@"tcm_\d+-\d+-66560");
    Match match = tcmRegex.Match(binaryPath);

    if (match.Success)
    {
        String transactionId = match.Value.Replace('_', ':');
        TcmUri transactionUri = new TcmUri(transactionId);
        return new PublishTransaction(transactionUri, engine.GetSession());
    }

    return null;
} 
```

还可能值得注意的是，与`engine.PublishingContext.PublishInstruction.RenderInstruction.BinaryStoragePath`在 Publisher 中运行代码时相比，在 PreviewMode 或从模板生成器呈现编码器时，该属性将返回不同的东西。要查看 BinaryStoragePath 中的 PublishTransaction URI，您必须将 Visual Studio TBB 调试项目附加到`TcmPublisher.exe`进程，以便实际存在 PublishTransaction 对象，否则 BinaryStoragePath 将仅包含通用路径，如 ../preview。

# objective-c - 我可以合并 2 个 UIImages 吗？

> ID：11679844
> 
> 赞同：0
> 
> 时间：2012-07-27T00:14:48.130
> 
> 标签：objective-c, ios5

我很难修复我的代码。如何在不使用该`addSubview`方法的情况下添加和组合 2 个 UIImages？是否有任何可能的解决方案来组合 2 UIImages？。这是我的代码

```
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{ 
    if (CGRectIntersectsRect(piece1.frame, piece2.frame))
    { 
        if (piece1.center.x < piece2.center.x) 
        { 
            NSLog(@"ok"); 
        }
    } 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T01:15:07.123

类似的东西。（我没有检查代码，请注意）。并且有多种混合模式可用。

```
CGRect drawRect = CGRectMake(0, 0, imageWidth, imageHeight);

UIGraphicsBeginImageContext(CGSizeMake(imageWidth, imageHeight));

[piece1 drawInRect: drawRect blendMode:kCGBlendModeNormal alpha:1];
[piece2 drawInRect: drawRect blendMode:kCGBlendModeScreen alpha:1];
UIImage *resultingImage = UIGraphicsGetImageFromCurrentImageContext();  

UIGraphicsEndImageContext(); 
```

# php - 在字符串中插入空格

> ID：11679846
> 
> 赞同：2
> 
> 时间：2012-07-27T00:14:58.333
> 
> 标签：php

谁能告诉我如何使用 PHP 在字符串中的字符之间插入空格，具体取决于英国邮政编码的长度？

例如，如果字符串是 5 个租船人，在第二个字符后插入一个空格？如果在第三个等之后插入 6 个字符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T00:19:51.063

使用正则表达式： `$formatted = preg_replace('/([a-Z0-9]{3})$/', ' \1', $postalCode);`
请注意，这仅适用于字母数字字符，但我假设这就是输入的范围。

# entity-framework - DB for Entity Framework 中的迁移状态表在哪里？

> ID：11679848
> 
> 赞同：0
> 
> 时间：2012-07-27T00:15:42.873
> 
> 标签：entity-framework, database-migration

我在我的数据库中的表列表中看不到该表。我在我的项目中找不到任何配置文件来存储数据库版本状态。它如何知道我的数据库在哪个版本上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T00:15:42.873

根据我目前的经验，它已进入 SSMS 中的两个位置之一：

1.  常规表节点
2.  系统表节点 - 常规表列表中的子文件夹

该表称为`__MigrationHistory`

# python - 在 python 中的 DNA 字符串中引入突变

> ID：11679855
> 
> 赞同：3
> 
> 时间：2012-07-27T00:16:33.317
> 
> 标签：python

例如，给定一个 DNA 字符串`AGC`。我正在尝试生成所有可能的 uniq 字符串，允许给定字符串中最多 #n （用户定义的数字）不匹配。

我可以通过以下方式对一个不匹配执行此操作，但无法实现递归解决方案以基于#n 不匹配、DNA 字符串和突变集（AGCTN）生成所有可能的组合

```
temp_dict = {}
sequence = 'AGC'

    for x in xrange(len(sequence)):
        prefix = sequence[:x]
        suffix = sequence[x+1:]
        temp_dict.update([ (prefix+base+suffix,1) for base in 'ACGTN'])
    print temp_dict 
```

**一个例子：**

对于给定的示例字符串：**ACG**，以下是 13 个 uniq 序列，最多允许一个不匹配

```
{'ACC': 1, 'ATG': 1, 'AAG': 1, 'ANG': 1, 'ACG': 1, 'GCG': 1, 'AGG': 1, 
'ACA': 1, 'ACN': 1, 'ACT': 1, 'TCG': 1, 'CCG': 1, 'NCG': 1} 
```

我想概括这一点，以便程序可以采用 100 个字符长的 DNA 字符串并返回允许用户定义的 #mismatches 的 uniq 字符串列表/字典

谢谢！-阿比

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T00:33:52.933

假设我了解您，我认为您可以使用该`itertools`模块。基本思想是使用 选择不匹配的位置，`combinations`然后使用 构造所有令人满意的列表`product`：

```
import itertools

def mismatch(word, letters, num_mismatches):
    for locs in itertools.combinations(range(len(word)), num_mismatches):
        this_word = [[char] for char in word]
        for loc in locs:
            orig_char = word[loc]
            this_word[loc] = [l for l in letters if l != orig_char]
        for poss in itertools.product(*this_word):
            yield ''.join(poss) 
```

对于您的示例案例：

```
>>> mismatch("ACG", "ACGTN", 0)
<generator object mismatch at 0x1004bfaa0>
>>> list(mismatch("ACG", "ACGTN", 0))
['ACG']
>>> list(mismatch("ACG", "ACGTN", 1))
['CCG', 'GCG', 'TCG', 'NCG', 'AAG', 'AGG', 'ATG', 'ANG', 'ACA', 'ACC', 'ACT', 'ACN'] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-10T14:36:01.593

我相信接受的答案只会给出*N*不匹配，而不是*最多 N*。我认为对接受的答案稍作修改应该可以纠正这个问题：

```
from itertools import combinations,product

def mismatch(word, i = 2):
  for d in range(i+1):
    for locs in combinations(range(len(word)), d):
      thisWord = [[char] for char in word]
      for loc in locs:
        origChar = word[loc]
        thisWord[loc] = [l for l in "ACGT" if l != origChar]
      for poss in product(*thisWord):
        yield "".join(poss)    

kMerList = list(mismatch("AAAA",3))

print kMerList 
```

我对编程完全陌生，所以如果我错了，请纠正我。

# asp.net-mvc - Azure 部署

> ID：11679858
> 
> 赞同：1
> 
> 时间：2012-07-27T00:17:00.173
> 
> 标签：asp.net-mvc, azure

直到最近，我才能够成功地将我的应用程序部署到 azure。在我最近的部署之前，我在项目中添加了一些 .less。当我使用添加的文件部署项目时，它们没有显示在远程站点的 Contents 目录中，而所有其他 udpate 都已完成。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-24T01:44:10.107

只需右键单击 .less 文件并转到其属性。将构建操作更改为内容。希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-10T19:27:42.047

你是怎么添加文件的？如果我理解正确，您正在使用 Visual Studio，并且只是将文件复制到您的目录中。

在某些情况下，VS 无法识别此类添加的文件。在这种情况下，您可以：

1.  Got To You Project -> RightClick -> Add Exists Item -> 选择您的文件或
2.  转到解决方案资源管理器 -> 选择显示所有文件 -> 选择您的文件 -> 右键单击​​ -> 包含在项目中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-19T13:46:48.993

右键单击您添加的文件并将“复制到输出目录”设置为“始终复制”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-27T00:43:28.450

没关系。

这是 .csproj 文件中的差异：

```
-    <None Include="Content\less_file1.less" />
-    <None Include="Content\less_file2.less" />
+    <Content Include="Content\less_file1.less" />
+    <Content Include="Content\less_file2.less" /> 
```

不知道为什么将现有文件添加到内容目录不会自动进行上述更改。我在这里以错误的方式添加文件吗？为什么它会说 None 而不是 Content？我不认为这发生在我以前。我不想将来手动进行此类更改！

# javascript - 使用 Javascript 从多个 Dropbox 获取值时遇到问题

> ID：11679859
> 
> 赞同：0
> 
> 时间：2012-07-27T00:17:30.267
> 
> 标签：javascript, html, symfony

我是 HTML 和 javascript 的新手。正在玩它并面临这个问题。我有一个表，该表的每一行都有一个下拉框和一个按钮。当我单击按钮时，我尝试从相应的下拉框中提取值..但我总是从第一个下拉框中获取值，这不是我想要的。

```
<tr>
<td><?php $version=$row->getVersionNumbers() ?>
 <select id="drop1" name="version" class="temp"> 
<?php foreach($version as $ver): ?>

      <option value="<?php echo $ver?>"><?php echo $ver?></option>

<?php endforeach; ?> </td>
</select>
<td style="text-align:center;">

<a class="btn" href="<?php echo  
 $view['router']->generate('ProjectMonstroTameBundle_view', array('versi'=>1 )) ?>"  
 onclick="viewSchema(this,pullVersion(document.getElementById('drop1')))">View Schema</a>

 </td>>

 </tr>

 <script>
 function pullVersion(dropdown)
 {
    return dropdown.options[dropdown.selectedIndex].value;
 }
 </script> 
```

对于 onclick pullVersion 总是从第一个下拉框中获取版本号...谁能帮我解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T01:40:58.547

对于所有选项都有值的单个选择，您可以简单地使用选择元素的 value 属性：

```
document.getElementById('drop1').value; 
```

如果元素是多选，则需要遍历选项并获取被选中的选项的值：

```
var sel = document.getElementById('drop1');
var values = [];

for (var i=0, iLen = sel.options.length; i<iLen; i++) {

  if (sel.options[i].selected) {
    values.push(sel.options[i].value);
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T00:24:05.377

这

```
document.getElementById("drop1").options[document.getElementById("drop1").selectedIndex].value 
```

应该做

# cuda - 在 pthread 中使用 cublasSetMatrix

> ID：11679860
> 
> 赞同：1
> 
> 时间：2012-07-27T00:17:36.837
> 
> 标签：cuda, pthreads

如果在单独的 pthread 中使用，cublasSetMatrix 是否工作？

我想将 CPU 上的任务与 CPU->GPU 数据传输重叠。但是，由于数据非常大，我试图避免分配大的固定内存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T07:27:37.420

不，不会的。GPU 上下文与创建它们的线程相关联。如果您尝试运行`cublasSetMatrix`或`cudaMemcpy`在另一个线程中不做任何其他事情，它将创建另一个上下文。内存分配在上下文之间不可移植，实际上每个上下文都有自己的虚拟地址空间。结果将是您以两个 GPU 上下文结束，并且复制将失败。

固定内存的要求来自 CUDA 驱动程序。对于重叠复制和执行，复制所涉及的主机内存必须位于 GPU 可以通过 PCI-e 总线通过 DMA 访问的物理地址范围内。这就是需要固定的原因，否则主机内存可能位于交换空间或其他虚拟内存中，并且 DMA 事务将失败。

如果您担心大型问题所需的固定主机内存量，请尝试使用一两个较小的固定缓冲区并执行多个传输，将固定内存用作暂存缓冲区。性能不如使用单个大固定缓冲区和大传输，但您仍然可以实现有用的内核/副本重叠并在此过程中隐藏大量 PCI-e 延迟。

# html - 404页面应该保留URL还是被重定向？

> ID：11679864
> 
> 赞同：2
> 
> 时间：2012-07-27T00:18:19.073
> 
> 标签：html, http, url, error-handling

某些网站在访问未找到的路径以及加载页面时保留 URL 路径，它们只是显示错误标题、消息并将 HTTP 状态代码设置为 404。

其他页面将其重定向到一个固定的 404 URL 路径，该路径同时显示内容和标题。

我的问题是：

*   URL 是否应该不更改，以便在 http 响应过期之前将 URL 路径归类为 404？
*   应该总是有 404 状态码吗？
*   即使发生重定向，结果页面是否应该包含 404 状态代码？

还是返回 404 响应并包含指向专用 404 URL 的位置标头更好（我不确定是否可以混合重定向和 400 系列状态代码）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T01:25:29.427

如果您的服务器返回的页面是“找不到文件”，它应该返回 404 错误。添加重定向对于网络爬虫和其他人来说似乎毫无意义且令人困惑。

使用 Apache，您可以保留原始 URL、返回 404 并在您将其添加到您的网络服务器根目录中的 .htaccess 文件时获得自定义错误消息：

```
ErrorDocument 404 /notfound.html 
```

notfound.html 是您的自定义错误页面。

# ruby-on-rails - 在rails中优化对json的大型选择查询

> ID：11679871
> 
> 赞同：0
> 
> 时间：2012-07-27T00:19:03.023
> 
> 标签：ruby-on-rails, database, ruby-on-rails-3, json, postgresql

我需要从多个数据库表中获取**大量**数据，将数据格式化为嵌套的 JSON，然后将其吐出到浏览器中，并且速度非常快。我一直在分析不同的技术来优化流程。到目前为止，我尝试过的两种技术是：

1）运行查询并将结果返回给rails。在 rails 中构造 json 并发送到浏览器。

2）运行查询并使用字符串连接，在数据库中构建json，将单个字符串返回到rails。Rails 将内容类型设置为 application/json 并将字符串发送到浏览器。

后一种技术比前者快得多。我可以推测这是因为将数据库对象转换为 ruby​​ 对象存在开销，并且对象的绝对数量是压倒性的。

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T01:08:08.273

是否可以选择将其分解为分页或类似内容？通常，提高性能的最简单方法是减少需要完成的工作量。

# image - 缺少图像时 Apache 提供默认图像

> ID：11679877
> 
> 赞同：0
> 
> 时间：2012-07-27T00:19:55.157
> 
> 标签：image, apache, mod-rewrite

我们有几种不同尺寸的产品图片。每当缺少产品图像时，我们都希望返回正确尺寸的默认图像。

每个产品的图像路径都不同。path /www/docroot/images/brand/product/product1_l.jpg path /www/docroot/images/differentbrand/differentproduct/someotherproduct1_l.jpg 图像的大小看起来像左边的项目。我们希望在右侧选择相应的默认图像。

```
product1_l.jpg large    noimage_l.jpg
product1_m.jpg medium   noimage_m.jpg
product1_s.jpg small    noimage_s.jpg 
```

我已经看到一些使用 mod_rewrite 实现类似目标的示例。任何人都可以就我如何使用它来适应我的场景提供任何指导吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T00:22:57.260

You need an intelligent 404 handler. If Apache throws a 404 (File not found) error the intelligent handler should try to salvage the event by looking at the pattern of the URL, and locating a known resource to serve instead. You should also handle the possibility that the fall back image might also not be there.

This page can show you how to check if a file is present, but the logic will need to be in the last line.

[http://www.phpriot.com/articles/search-engine-urls/5](http://www.phpriot.com/articles/search-engine-urls/5)

```
RewriteEngine On
RewriteCond %{SCRIPT_FILENAME} !-f
RewriteCond %{SCRIPT_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 
```

Or you can go the .htaccess route (I think that's cleaner)

[http://httpd.apache.org/docs/2.2/mod/core.html#errordocument](http://httpd.apache.org/docs/2.2/mod/core.html#errordocument)

Assuming you could use .htaccess and PHP here is one solution:

Add this line to your .htaccess:

```
ErrorDocument 404 /error.php 
```

Then add this code to you error.php like this

```
<?php
 if(preg_match("/^/images/thumbnail/", $_SERVER['REQUEST_URI'])) {
   //do a 302 redirect
   header( 'Location: /images/defualtImage.jpg' ) ;
 } else {
   //You need to go somewhere to handle actual 404 errors
   header( 'Location: /static/404.html' ) ;
 }
?> 
```

[302 redirect directs](http://en.wikipedia.org/wiki/HTTP_302) would work best here.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T17:34:48.257

谢谢你们的评论。我们最终采用了不同的解决方案。我们使用 onerror js 标记指向适当的 noimg 位置。这对我们的环境来说更清洁、更容易

# api - 使用新的 Bing API (nodejs)

> ID：11679883
> 
> 赞同：2
> 
> 时间：2012-07-27T00:20:16.410
> 
> 标签：api, node.js

我正在尝试切换到现在托管在 azure 上的新 bing 搜索 api，并且由于大多数人都知道该`Appid`参数已被删除以进行身份​​验证，因此我无法找到一种简单的方法来获取查询结果。

我正在使用`http`nodejs 模块，当前代码用于`http.get`查询`api.bing.net` .

有人可以告诉我正确使用新代码的代码吗？

我试过这个，但网址无法返回任何内容 [http://gavinmhackeling.com/blog/2012/05/using-the-bing-search-api-in-python/](http://gavinmhackeling.com/blog/2012/05/using-the-bing-search-api-in-python/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T23:36:53.080

抱歉，我的博文中有错字。

确保您使用的是来自[https://datamarket.azure.com/account/keys](https://datamarket.azure.com/account/keys)的默认帐户密钥。

要使用基本身份验证，请替换`<YourDefaultAccountKey>`. `https://user:<YourDefaultAccountKey>@api.datamarket.azure.com/Bing/SearchWeb/Web?Query=%27leo%20fender%27&Market=%27en-US%27&$top=50&$format=JSON`您将以 JSON 格式返回结果。

您还可以使用[https://datamarket.azure.com/dataset/explore/5BA839F1-12CE-4CCE-BF57-A49D98D29A44](https://datamarket.azure.com/dataset/explore/5BA839F1-12CE-4CCE-BF57-A49D98D29A44)来测试查询参数和格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-09T20:05:27.967

你可以使用[这个封装请求的模块](https://www.npmjs.com/package/node-bing-api)，所以你可以像这样使用它：

```
var Bing = require('node-bing-api')({ accKey: "your-account-key" });

Bing.web("stack overflow", function(error, res, body){
    console.log(body);
  },
  {
    top: 50,
    market: 'en-US'
  }); 
```

它适用于 Azure 版本。您只需更换您的帐户密钥。

# objective-c - Xcode 现在生成一个空类别。为什么？

> ID：11679885
> 
> 赞同：8
> 
> 时间：2012-07-27T00:21:15.550
> 
> 标签：objective-c, xcode4.5

我在使用 iOS6 beta 3 时注意到了这一点

当我创建 UIViewContoller 的新子类时（没有其他父类生成我注意到的这种行为），.m 文件现在在文件顶部有一个空类别。过去在学习类别时，我注意到有些人会使用相同的技术来表示私有方法（尽管不是真正的私有方法）。

这就是这里的意图吗？现在将事情真正私有化有什么变化吗？我也注意到了@private 指令。

关于私有变量和方法，您的个人编码风格是什么？

更新：由于 XCode 推动我们使用类扩展，我继续将它们用于该项目的私有方法/ivar。不过我发现了一个缺点。我看到我可以重用我的一个子类 UIViewController 以及它的所有 UIButton、UILabels 等......我有这个继承：UIViewController <- FirstViewController <- SecondViewController。

好吧，当我在 SecondViewController 中编码时，我放在 FirstViewController 的类扩展中的所有私有方法都不会在自动完成中弹出。轻微的烦恼......

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-27T00:30:39.237

你指的是这个接口定义：

```
@interface MYViewController ()
@end 
```

这在技术上是一个类扩展而不是一个类别。类别在括号内有一个字符串。类扩展在编译时添加到类中，因此可以添加 ivars（通常以属性的形式）。类别是在运行时添加的，不能添加 ivars。

说了这么多，你的观点是正确的。这用于定义私有方法和属性。

在 ObjC 的世界里，“私人”是一个“禁止侵入”的标志，而不是铁丝网。虽然有一个`@private`关键字（增加了编译器强制执行），但它仅适用于 ivars，通常不是必需的。这种基于警告的隐私在 ObjC 中运行得非常好，并且已经足够了。

将您的私有属性放在此类扩展中，如果外部调用者尝试访问它们，他们将收到“可能无法响应选择器”警告（就像调用任何未定义的方法一样）。您不应该允许警告存在于 ObjC 项目中，因此这会强制执行数据封装。

* * *

编辑

如果它们是私有的，那么它们不应该出现在您的子类中。你想要的东西是受保护的。ObjC 中的受保护方法没有很好的方案，但一种常见的技术是将它们放入 .h 文件中的一个类别中，例如 MYViewController+Protected.h。我发现这在实践中很少出现，因为很多好的 ObjC 设计都没有子类化。它改为使用组合和委托。

关于“为什么只查看控制器”。首先，它不仅仅是视图控制器。它只是 iOS 上的视图控制器（嗯，VC、TableViewController 和 GLKViewController）。在 Mac 上，它也是窗口控制器和聚光灯导入器。在看：

```
.../Developer/Platforms/iPhoneOS.platform/Developer/Library/Xcode/Templates
.../Library/Xcode/Templates 
```

但为什么是那些？好吧，这些都是控制器，控制器需要私有属性是非常普遍的。事实上，如果你在控制器中没有私有属性，你可能会公开太多。这不像模型和视图类那样普遍。我怀疑这影响了他们的决定。也可能是拥有模板的不同人，或者他们在不同时间更新。有时，您会看到随着时间的推移而逐渐消除的小不一致。

您也可以制作自己的模板。请参阅[创建自定义 Xcode 4 文件模板](http://www.bobmccune.com/2012/03/04/creating-custom-xcode-4-file-templates/)。

# drupal - Drupal hook_search_execute() is not function is not able to get customised result created from 3rd party API

> ID：11679888
> 
> 赞同：0
> 
> 时间：2012-07-27T00:21:31.113
> 
> 标签：drupal, search, hook

I have the search result coming from a thrid party website and storing the results in array. I am trying to supply this search result to hook_search_execute() where it is not executing and giving me the results back. The hook_search_execute is to be used at a tab created with hook_search_info(). I need to have the new results shown when a user clicks on the tab created with hook_search_info().

Can anybody guide me what is wrong here, or has anybody landed in similar situation ans how they have dealt with this problem.

Env: Drupal 7

# objective-c - Xcode 4.4 - Unable to add compiler flags to compile sources

> ID：11679889
> 
> 赞同：2
> 
> 时间：2012-07-27T00:22:10.433
> 
> 标签：objective-c, xcode, automatic-ref-counting, compiler-flags

In Xcode 4.4 it seems I am unable to add compiler flags to individual source files. I am trying to [remove ARC from a single file](https://stackoverflow.com/questions/6646052/how-can-i-disable-arc-for-a-single-file-in-a-project) but I can not get the pop up to add flags. Double clicking or selecting the item and pressing enter does not work, also tried selecting multiple and pushing enter which does not work. I have tried with two separate projects, one of which I created with Xcode 4.4\. Is there another way to manually add compiler flags to a source file? (I do not have an older version of Xcode to see how it stores the value [likely in the pbxproj]).

Note: *MacBook Pro w/ Retina Display - OSX 10.8*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T00:51:34.137

我找到了窗户藏在哪里。当弹出窗口出现在右侧时，我不得不将 Xcode 拖到屏幕的左下角很远。这使它在全屏时完全隐藏。

![截屏](../Images/c5a043e4a5a6d1eb8a04e6650e4e091e.png)

已提交错误报告[rdar://11970271](http://openradar.appspot.com/11970271)

# jquery - 如果在初始页面加载后加载 HTML 元素，如何使用它们作为触发器？

> ID：11679894
> 
> 赞同：1
> 
> 时间：2012-07-27T00:23:09.183
> 
> 标签：jquery, ajax

好的，所以我做了一些研究，我有点卡在这个 ajax 事情上。

我有两个 A HREF，分类为“测试”，发送 ajax 调用，然后是“.page”，类似于实际的分页下一步按钮。当我单击页面按钮时，它应该将隐藏的输入字段值更改为第 2 页，这将作为转到第 2 页但通过 ajax。现在我只是硬编码更改为 page-2 和 console.log 输入隐藏字段。

当前的 AJAX 调用不发送任何发布数据，它只是用于测试，它所做的只是回显一个分页按钮的 href。

我正在尝试制作 AJAX 分页。

当我单击测试时，它基本上将当前的 Asdasd 链接（类似于分页按钮）替换为具有分页作为文本而不是 asdasd 的相同链接。这个链接应该会改变隐藏的输入值，但是目前因为分页链接是由 AJAX 生成的，并且是在页面加载后加载的，所以初始的 jQuery 不起作用，它什么也不做。如果我用 ajax 调用回显相同的 jquery，它可以工作，但问题是，我不想每次调用 ajax 时都重新加载 jquery 脚本。

我认为我可以像这样使用 .ready ：

```
$('.page').ready(function(){
     $('.asdasd, .page').on("click", function(e){

     e.preventDefault();

     if($(this).hasClass('page')){
          console.log(true);
     }

     $('.new-page').val('page-2');

     console.log($('.new-page').val());
}); 
```

我认为总是会尝试查看页面是否准备好或其他东西，但这甚至没有意义。

几乎我所知道的唯一有效的是，我必须发送 jquery 脚本并在每个 jquery 调用中再次回显它，以便重新加载 HTML DOM 元素并且 jquery 识别它。

我的问题是，有没有什么方法可以只加载一次 jquery 脚本，并让它总是选择那个分页按钮，即使它是在页面加载后加载的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T00:26:25.223

使用 jQuerys 的[`delegate`](http://api.jquery.com/delegate/)方法：

> 描述：基于一组特定的根元素，将处理程序附加到与选择器匹配的所有元素的一个或多个事件，*现在或将来。*

```
$(document.body).delegate('.asdasd, .page', 'click', function(e) {
    e.preventDefault();

    if ($(this).hasClass('page')) {
        console.log(true);
    }

    $('.new-page').val('page-2');

    console.log($('.new-page').val());
});​ 
```

# android - How to implement admob ads with Phonegap?

> ID：11679896
> 
> 赞同：5
> 
> 时间：2012-07-27T00:23:29.873
> 
> 标签：android, html, cordova, admob

I want to implement admob ads with phonegap for Android... Is there any guide on how to do this? I've looked around and could only find guides for IOS. Any help would be greatly appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T14:48:26.073

此处有特定于使用`AdMod/Android`Phonegap 的说明：

只需检查下面给出的链接。

[https://github.com/phonegap/phonegap/wiki/In-App-Advertisements](https://github.com/phonegap/phonegap/wiki/In-App-Advertisements)

您还可以在`generic AdMod SDK/Android setup`此处找到更多详细信息：

[https://developers.google.com/mobile-ads-sdk/docs/admob/fundamentals](https://developers.google.com/mobile-ads-sdk/docs/admob/fundamentals)

这将帮助您了解 SDK 以及您正在设置的具体内容。

确保单击 Android 选项卡。

# java - 将动作侦听器添加到字符串

> ID：11679898
> 
> 赞同：0
> 
> 时间：2012-07-27T00:23:43.930
> 
> 标签：java

我正在尝试将动作侦听器添加到添加到 JMenu 的字符串中...不知道如何执行此操作，JavaDoc 并没有使查找方法变得更容易。这是我的代码：

```
import javax.swing.*;
import java.awt.event.*;

public class GUI extends JFrame implements ActionListener{

private static final long serialVersionUID = 234614L;

private static final JMenuBar menbar = new JMenuBar();

private static final JMenu blocks = new JMenu("name");
private static final JMenu items = new JMenu("name2");

private static final JMenu edit = new JMenu("Edit");

    public GUI(){

        this.setSize(300, 200);
        this.setTitle("");

        this.setJMenuBar(menbar);

        menbar.add(blocks);
        menbar.add(items);
        menbar.add(edit);

        blocks.add("Stone");

        blocks.addActionListener(this);

    }

    public void actionPerformed(ActionEvent e) {

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T13:13:38.447

`.add(String s)`返回 a `JMenuItem`，您需要获取该引用，并且您将能够添加一个动作侦听器。

```
JMenuItem stoneMenuItem = blocks.add("Stone");
stoneMenuItem.addActionListener(new ActionListener() {
    // My stuff!
}); 
```

# python - D/B 'self' and to bind a function inside the class itself. (singleton in python)

> ID：11679900
> 
> 赞同：0
> 
> 时间：2012-07-27T00:23:54.613
> 
> 标签：python, variables, singleton, global-variables

This question may look silly(since I am new to python), but can you guys tell me what is the difference between self and classname when Binding?

```
class OnlyOne(object):

  class __OnlyOne:
    def __init__(self):
       self.val = None

    def __str__(self):
       return ´self´ + self.val

 instance = None

 def __new__(cls): # __new__ always a classmethod
    if not OnlyOne.instance:
      OnlyOne.instance = OnlyOne.__OnlyOne()
            return OnlyOne.instance

 def __getattr__(self, name):
     return getattr(self.instance, name)

 def __setattr__(self, name):
      return setattr(self.instance, name) 
```

Here, I usually use Instance as self... What is the difference between using self and Only one... my intuition tells me that, it is a global variable.... if it is a global variable, it does not make sense at all(I will edit this, if its a global variable). Thanks!!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T00:31:25.667

好的，我想我已经掌握了您的代码......它的工作方式是在调用构造函数时：

```
a = OnlyOne()  #call constructor.  This implicitly calls __new__ 
```

此时，`__new__`检查类以查看是否已创建实例（实例不是无）。如果尚未创建，它会创建一个实例并将其放入`instance`类属性中。然后`instance`返回类属性，然后将其作为`self`.

我认为，如果你真的需要一个单例，那么你的程序设计就有些可疑（懒惰）。单例允许信息以奇怪的方式在整个程序中传播（想象一下创建 . 实例的函数`foo`和`bar`两者都在调用时显示`OnlyOne`您所做的更改）——这有点类似于猴子补丁。`foo``bar`

如果在重新考虑你的设计几个月后，你决定你真的需要一个单例，你可以创建某种更透明的工厂类......

# css - Computed CSS font family defies me

> ID：11679902
> 
> 赞同：2
> 
> 时间：2012-07-27T00:24:19.723
> 
> 标签：css, ruby-on-rails, sass, compass-sass

I have a rails project I am using bootstrap+compass on.

The default font family is:

> "Helvetica Neue", Helvetica, Arial, sans-serif

However my fonts are displaying in **Times**.

If you look at this screenshot taken from the "computed style" section in Chrome you can see that *yes*, it sees that as my font-family but is rendering *Times* anyways. Which isn't even a san-serif font, so the only way I can possibly imagine in which this would be the case is if I had no sans-serif fonts in my computer at all. *Which is not the case!*

![enter image description here](../Images/6b05a9e4ed93083ea7ff204461244e46.png)

Any ideas what is going on?

# asp.net - How to persist connections during code update in ASP.NET MVC

> ID：11679903
> 
> 赞同：2
> 
> 时间：2012-07-27T00:24:27.530
> 
> 标签：asp.net, asp.net-mvc, iis

When one updates an ASP.NET MVC app in IIS the framework keeps the connections open. All responses to the connections are sent once IIS has caught up. Unfortunately this can take some time (eg. 15 seconds). Is there any way to update part of the app without affecting connections to another part.

An example use case: if you have a web chat app and you want to make a minor change to one section of the website, can it be done without 'pausing' the connections to the chat app.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T11:25:15.473

如果您可以将代码物理分离到它自己的文件夹 IE（c:/inetpub/wwwroot/myapp 然后是 c:/inetpub/wwwroot/myapp/chatapp），您可以在 IIS 网站中将“chatapp”定义为它自己的应用程序，然后仅为该应用程序创建一个新的应用程序池。我之前必须这样做，因为由于性能问题，我正在运行的项目需要使 IIS 站点的一部分处于不同的回收计划中，而且它崩溃了很多，所以它有自己的进程是有利的，所以它没有不要把其他所有东西都拿下来:)

# r - Removing records from a data frame based on comparison to other records

> ID：11679904
> 
> 赞同：1
> 
> 时间：2012-07-27T00:24:35.610
> 
> 标签：r

I have a data frame that looks like this:

```
Reach Chem HQ 
a Mercury 1.12
a Nickel  1.65
b Mercury 1.54
b Nickel 2.34
b Cadmium 3.12
c Mercury 2.12
c Nickel 2.34 
```

I would like to strip down the data frame by only keeping the record for each `Reach` with the highest `HQ`, resulting in this:

```
 Reach Chem HQ 
 a Nickel  1.65
 b Cadmium 3.12
 c Nickel 2.34 
```

What is the best way to do this?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T06:21:36.537

这是基础 R 中的一种（或接近）方法。

获取数据：

```
test <- read.table(textConnection("Reach Chem HQ 
a Mercury 1.12
a Nickel  1.65
b Mercury 1.54
b Nickel 2.34
b Cadmium 3.12
c Mercury 2.12
c Nickel 2.34"),header=TRUE) 
```

返回每个`Reach`组中使用率最高`HQ`的行`by`，然后`which.max` 将`do.call(rbind...`标识的行连接到一个数据集中。

```
do.call(rbind,by(test,test$Reach,function(x) x[which.max(x$HQ),])) 
```

结果：

```
 Reach    Chem   HQ
a     a  Nickel 1.65
b     b Cadmium 3.12
c     c  Nickel 2.34 
```

编辑-解决mindless.panda和joran下面关于最大值是否存在联系的讨论，这将起作用：

```
do.call(rbind,by(test,test$Reach,function(x) x[x$HQ==max(x$HQ),])) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T01:34:46.430

如果你喜欢`plyr`方法：

```
data <- read.table(text="Reach Chem HQ 
a Mercury 1.12
a Nickel  1.65
b Mercury 1.54
b Nickel 2.34
b Cadmium 3.12
c Mercury 2.12
c Nickel 2.34", header=TRUE)

require(plyr)
ddply(data, .(Reach), summarize, Chem=Chem[which.max(HQ)], MaxHQ=max(HQ))

  Reach    Chem  MaxHQ
1     a  Nickel   1.65
2     b Cadmium   3.12
3     c  Nickel   2.34 
```

**编辑：**

部分出于这个[类似问题](https://stackoverflow.com/questions/9874471/selecting-specific-rows-etc-using-ddply)的动机，并考虑了不止一种`Chem`类型列（列不是子集）并且`Chem=Chem[which.max(HQ)]`为每个列复制会变得冗长的情况，我想出了这个。`plyr`如果有更好的方法可以做到这一点，我很好奇向导是否可以权衡：

```
# add the within-group max HQ as a column
df <- ddply(data, .(Reach), transform, MaxHQByReach=max(HQ))

# now select the rows where the HQ equals the Max HQ, dropping the above column
subset(df, df$HQ==df$MaxHQByReach)[,1:(ncol(df)-1)] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-27T00:41:43.223

也许您可以尝试像这样使用 ?order 和 ?duplicated ：

```
my_df = data.frame(
    Reach = c("a","a","b","b","b","c","c"), 
    Chem = c("Mercury","Nickel","Mercury","Nickel","Cadmium","Mercury","Nickel"),
    HQ = c(1.12,1.65,1.54,2.34,3.12,2.12,2.34)
    )

my_df = my_df[order(my_df$HQ,decreasing=TRUE),]
my_df = my_df[!duplicated(my_df$Reach),]
my_df = my_df[order(my_df$Reach),] 
```

编辑：为清楚起见，结果如下所示。

```
 Reach    Chem   HQ
2     a  Nickel 1.65
5     b Cadmium 3.12
7     c  Nickel 2.34 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-27T05:22:38.943

嗨，您也可以像这样使用 max 和 lapply ：

```
Reach <- unique(my_df$Reach)
        HQ <- unlist(lapply(1:length(unique(my_df$Reach)),function(x) max(my_df$HQ[which(my_df$Reach == unique(my_df$Reach)[x])])))

        Chem <- my_df$Chem[match(lapply(1:length(unique(my_df$Reach)),function(x) max(my_df$HQ[which(my_df$Reach == unique(my_df$Reach)[x])])),my_df$HQ)]

            new.df <- data.frame(Reach,Chem,HQ)
        new.df

          Reach    Chem   HQ
        1     a  Nickel 1.65
        2     b Cadmium 3.12
        3     c  Nickel 2.34 
```

# php - Browser displaying PHP code

> ID：11679905
> 
> 赞同：1
> 
> 时间：2012-07-27T00:24:38.250
> 
> 标签：php, xampp

I am running XAMPP in order to use PHP on my local computer. I put all of my scripts inside of the htdocs folder (the default location). Everything used to work great until recently. For example, if I click on an HTML file in htdocs, the file opens up in a browser(like it should). But, if I click submit on a form with an action set to "some-script.php" It goes to the php page and displays the php code. Now, if I type into my browser "localhost/some-html.html" then it works? Why is that? What could I be doing wrong??

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T00:29:21.673

当您通过在地址栏中键入“localhost/some-html.html”来访问它时，您使用 XAMPP 的服务器和 PHP 引擎来访问该页面，当您只需双击文件夹中的文件时，您只是使用默认打开文件程序（恰好是您的浏览器）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T08:08:55.970

定义一个基本 url 变量，如 $baseurl = "http://localhost/foldername/"，并在您的操作中使用此变量，如 action = "example.php"。

# vba - extract fields from a huge csv file and write them to a table, text or csv file

> ID：11679906
> 
> 赞同：1
> 
> 时间：2012-07-27T00:24:38.163
> 
> 标签：vba, ms-access, csv, vbscript

i have this huge csv file, it's 4GB, don't know how many rows but 320 columns.

since it can't be open in any program (except using 3rd party programs to split the file into multiple pieces) i'm trying to fins a way to extract the data i need. i only need about 10-15 columns from it.

i saw many solutions on the net (most in vbs) but i couldn't get any of them to work. i'd get errors and i don't know vbs to be able to troubleshoot them.

can anyone help please?

thank you

PS here's one example of the vbs code i found and tried using that i had no luck with.

the original error was "800a01f4 variable is undefined", on the net it was suggested to take out OPTION EXPLICIT. once i do that the next error is "800a01fa class not defined".

in both cases the line giving the error is "Set adoJetCommand = New ADODB.Command"

```
Option Explicit

Dim adoCSVConnection, adoCSVRecordSet, strPathToTextfile
Dim strCSVFile, adoJetConnection,adoJetCommand, strDBPath

Const adCmdText = &H0001

' Specify path to CSV file.
strPathToTextFile = "C:\Users\natalie.rynda\Documents\Temp\RemailMatch\"

' Specify CSV file name.
strCSVFile = "NPIOld.csv"

' Specify Access database file.
strDBPath = "C:\Users\natalie.rynda\Documents\Temp\RemailMatch\NPIs.mdb"

' Open connection to the CSV file.
Set adoCSVConnection = CreateObject("ADODB.Connection")
Set adoCSVRecordSet = CreateObject("ADODB.Recordset")

' Open CSV file with header line.
adoCSVConnection.Open "Provider=Microsoft.Jet.OLEDB.4.0;" & _
    "Data Source=" & strPathtoTextFile & ";" & _
    "Extended Properties=""text;HDR=YES;FMT=Delimited"""

adoCSVRecordset.Open "SELECT * FROM " & strCSVFile, adoCSVConnection

' Open connection to MS Access database.
Set adoJetConnection = CreateObject("ADODB.Connection")
adoJetConnection.ConnectionString = "DRIVER=Microsoft Access Driver (*.mdb);" _
    & "FIL=MS Access;DriverId=25;DBQ=" & strDBPath & ";"
adoJetConnection.Open

' ADO command object to insert rows into Access database.
Set adoJetCommand = New ADODB.Command

Set adoJetCommand.ActiveConnection = adoJetConnection
adoJetCommand.CommandType = adCmdText

' Read the CSV file.
Do Until adoCSVRecordset.EOF
    ' Insert a row into the Access database.
    adoJetCommand.CommandText = "INSERT INTO NPIs " _
        & "(NPI, EntityTypeCode, ReplacementNPI, EIN, MAddress1, MAddress2, MCity, MState, MZIP, SAddress1, SAddress2, SCity, SState, SZIP, ProviderEnumerationDate, LastUpdateDate, NPIDeactivationReasonCode, NPIDeactivationDate, NPIReactivationDate) " _
        & "VALUES (" _
            & "'" & adoCSVRecordset.Fields("NPI").Value & "', " _
            & "'" & adoCSVRecordset.Fields("Entity Type Code").Value & "', " _
            & "'" & adoCSVRecordset.Fields("Replacement NPI").Value & "', " _
            & "'" & adoCSVRecordset.Fields("Employer Identification Number (EIN)").Value & "', " _
            & "'" & adoCSVRecordset.Fields("Provider First Line Business Mailing Address").Value & "', " _
            & "'" & adoCSVRecordset.Fields("Provider Second Line Business Mailing Address").Value & "', " _
            & "'" & adoCSVRecordset.Fields("Provider Business Mailing Address City Name").Value & "', " _
            & "'" & adoCSVRecordset.Fields("Provider Business Mailing Address State Name").Value & "', " _
            & "'" & adoCSVRecordset.Fields("Provider Business Mailing Address Postal Code").Value & "', " _
            & "'" & adoCSVRecordset.Fields("Provider First Line Business Practice Location Address").Value & "', " _
            & "'" & adoCSVRecordset.Fields("Provider Second Line Business Practice Location Address").Value & "', " _
            & "'" & adoCSVRecordset.Fields("Provider Business Practice Location Address City Name").Value & "', " _
            & "'" & adoCSVRecordset.Fields("Provider Business Practice Location Address State Name").Value & "', " _
            & "'" & adoCSVRecordset.Fields("Provider Business Practice Location Address Postal Code").Value & "', " _
            & "'" & adoCSVRecordset.Fields("Provider Enumeration Date").Value & "', " _
            & "'" & adoCSVRecordset.Fields("Last Update Date").Value & "', " _
            & "'" & adoCSVRecordset.Fields("NPI Deactivation Reason Code").Value & "', " _
            & "'" & adoCSVRecordset.Fields("NPI Deactivation Date").Value & "', " _
            & "'" & adoCSVRecordset.Fields("NPI Reactivation Date").Value & "')"
    adoJetCommand.Execute
    adoCSVRecordset.MoveNext
Loop

' Clean up.
adoCSVRecordset.Close
adoCSVConnection.Close
adoJetConnection.Close 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T01:05:21.133

如果您的 CSV 文件简单明了，在意想不到的地方没有换行符或逗号，那么标准的 *nix 工具[`awk`](http://en.wikipedia.org/wiki/AWK)会很有用。它可以让您轻松地将您正在寻找的 15 列提取到一个新的 CSV 文件中。[这篇博文](http://www.joeldare.com/wiki/using_awk_on_csv_files)解释了如何在 CSV 文件上使用它。

假设您想从中提取第 1、3 和 7 列`file.csv`，那么您可以使用命令执行此操作

```
awk -F, '{print $1","$3","$7;}' file.csv 
```

您的 Windows 机器可能尚未`awk`安装。有几个选项：

*   你可以在 [MSYS](http://mingw.org/faq/How_do_I_install_MSYS)中找到它，它基本上在 Windows 中为你提供了一个类 Unix 的 shell 环境。对我来说，这似乎是最简单的方法。

*   另一种选择似乎是[Gawk for Windows](http://gnuwin32.sourceforge.net/packages/gawk.htm)，但我没有这方面的经验，所以不能保证。

*   您可以尝试使用 Windows PowerShell 获得相同的结果，如[本博](http://windows-powershell-scripts.blogspot.ca/2009/06/awk-equivalent-in-windows-powershell.html)文中所述 - 如果您有可用的。同样，我没有尝试过的经验。

*   最后但同样重要的是，您可以切换到 Linux，例如在虚拟机中。`awk`通常在 *nix 环境中可用。

如果您正在解析更尴尬的 CSV 文件，请查看[使用 gawk 解析 csv 文件以](https://stackoverflow.com/q/314384/1380680)获取大量建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T19:56:07.967

在 VBE 编辑器中

![在此处输入图像描述](../Images/2729421236e771bcc484454e37381501.png)

然后在列表中找到 Microsoft Activex 数据对象库。不确定哪个版本可能合适，但可能是 6

![在此处输入图像描述](../Images/bd5e5822a3590c47ddd88ae473c705a6.png)

您的代码似乎不知道 ADODB.COMMAND 是什么，这应该可以解决这个问题。我只知道在设置引用时我能够复制您的代码，并且能够成功地单步执行它。希望这有助于解释

# php - Authorize.net DPM, How To?

> ID：11679908
> 
> 赞同：0
> 
> 时间：2012-07-27T00:24:42.773
> 
> 标签：php, phpunit, authorize.net

I found the DPM PHP SDK on authorize.net at [http://developer.authorize.net/api/dpm/](http://developer.authorize.net/api/dpm/), and tried to test but it's not working, the page displays the error: Warning: require_once(PHPUnit/Framework.php). Does someone know how to resolve this, or can provide me with step by step tutorial?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T00:37:38.280

似乎忘记了以下语句的要求

PHP SDK 包含一个帮助函数，该函数在一行代码中实现了 Direct Post 方法的演示。将下面的代码复制并粘贴到一个名为“direct_post.php”的新文件**中，并填写所有不完整的变量**。确保您的**服务器可以公开访问**，并且**$url 变量指向这个新文件**。

*看一个简短的教程*

[教程“15 分钟或更少”](https://developer.authorize.net/integration/fifteenminutes/#directpost)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T01:10:49.633

我只需要创建一个 php 文件并输入以下代码：

```
require_once 'anet_php_sdk/AuthorizeNet.php'; // The SDK
$url = "http://YOUR_DOMAIN.com/file_I_created.php";
$api_login_id = 'YOUR_API_LOGIN_ID';
$transaction_key = 'YOUR_TRANSACTION_KEY';
$md5_setting = 'YOUR_API_LOGIN_ID'; // Your MD5 Setting
$amount = "5.99";
AuthorizeNetDPM::directPostDemo($url, $api_login_id, $transaction_key, $amount, $md5_setting); 
```

# android - 在Android中将任何应用程序置于后台

> ID：11679915
> 
> 赞同：0
> 
> 时间：2012-07-27T00:26:37.247
> 
> 标签：android, background

我知道如何将任何应用程序放在前台，但我现在会将任何应用程序放在后台。即，我想要的每个应用程序。我在谷歌上搜索了很多，但我没有找到解决方案。你知道怎么做吗？我试图显示家，但它不起作用：

```
Intent i = new Intent(Intent.ACTION_MAIN);
i.addCategory(Intent.CATEGORY_HOME);
startActivity(i); 
```

非常感谢您提前。

这是我的所有代码（它是一个测试代码），我启动了地图应用程序，然后我想要把它放在背景中：

```
 List<ResolveInfo> pkgAppsList =  retreivedAllApplicationsInstalled();      

    ActivityManager actMngr = (ActivityManager) getSystemService(ACTIVITY_SERVICE);
    List<RunningAppProcessInfo> runningAppProcesses = actMngr.getRunningAppProcesses();
    for (RunningAppProcessInfo pi : runningAppProcesses) {

        String[] testPklist = pi.pkgList;

        if(pi.importance == RunningAppProcessInfo.IMPORTANCE_BACKGROUND){
            for(String tp : testPklist){
                if(tp.equals("com.google.android.apps.maps")){

                       //launch map application
                       Intent i = new Intent(Intent.ACTION_MAIN);
                       PackageManager manager = getPackageManager();
                       i = manager.getLaunchIntentForPackage("com.google.android.apps.maps");
                       i.addCategory(Intent.CATEGORY_LAUNCHER);
                       startActivity(i);

                }
            }

        }

    }
    //try to put back all applications on displaying home
    Intent back = new Intent(Intent.ACTION_MAIN);
    back.addCategory(Intent.CATEGORY_HOME);
    startActivity(back); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T00:33:12.570

如果您希望您的应用程序在后台运行，您应该使用称为[Service](http://developer.android.com/guide/components/services.html)的东西。您可以在链接上找到更多信息。但请记住，后台进程会消耗电池电量，因此请小心使用。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T01:18:43.083

我想我理解我的代码中的问题：我运行一个活动“地图”，它执行然后我下面的代码（放入后台）永远不会启动......

# python - Django + form for resetting the password

> ID：11679918
> 
> 赞同：5
> 
> 时间：2012-07-27T00:27:18.043
> 
> 标签：python, django

I wanted to create a form for resetting the user's password. It should take the `current_password`, and then the `new_password` and `confirm_new_password`. I'm able to do the validation to check the new passwords are matching. How would I be able to validate the `current_password`? Is there a way to pass in the `User` object into the form?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T00:42:21.567

Django 带有一个内置`PasswordChangeForm`功能，您可以在视图中导入和使用它。

```
from django.contrib.auth.forms import PasswordChangeForm 
```

但是您甚至不必编写自己的密码重置视图。有一对视图[`django.contrib.with.views.password_change`](https://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.views.password_change)和`django.contrib.auth.views.password_change_done`，您可以直接挂接到您的 URL 配置中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T00:32:06.167

找到了一个很好的例子：[http ://djangosnippets.org/snippets/158/](http://djangosnippets.org/snippets/158/)

**[编辑]**

我使用了上面的链接并进行了一些更改。它们在下面：

```
class PasswordForm(forms.Form):
    password = forms.CharField(widget=forms.PasswordInput, required=False)
    confirm_password = forms.CharField(widget=forms.PasswordInput, required=False)
    current_password = forms.CharField(widget=forms.PasswordInput, required=False)

    def __init__(self, user, *args, **kwargs):
        self.user = user
        super(PasswordForm, self).__init__(*args, **kwargs)

    def clean_current_password(self):
        # If the user entered the current password, make sure it's right
        if self.cleaned_data['current_password'] and not self.user.check_password(self.cleaned_data['current_password']):
            raise ValidationError('This is not your current password. Please try again.')

        # If the user entered the current password, make sure they entered the new passwords as well
        if self.cleaned_data['current_password'] and not (self.cleaned_data['password'] or self.cleaned_data['confirm_password']):
            raise ValidationError('Please enter a new password and a confirmation to update.')

        return self.cleaned_data['current_password']

    def clean_confirm_password(self):
        # Make sure the new password and confirmation match
        password1 = self.cleaned_data.get('password')
        password2 = self.cleaned_data.get('confirm_password')

        if password1 != password2:
            raise forms.ValidationError("Your passwords didn't match. Please try again.")

        return self.cleaned_data.get('confirm_password') 
```

# memory - 获取和更改 NSMutableArray 对象的问题

> ID：11679922
> 
> 赞同：0
> 
> 时间：2012-07-27T00:27:44.237
> 
> 标签：memory, object, nsmutablearray, nscopying, copywithzone

我有一个名为**organizations**的 NSMutableArray ，它是我从 NSObject 子类化的一个类的自定义对象数组，这个子类称为**NSXOrganisation**。这个子类确实像这样实现**NSCopy**：

```
@interface NSXOrganisation : NSObject <NSCopying>

...

- (id)copyWithZone:(NSZone *)zone
{
    id copy = [[[self class] alloc] init];

    if (copy) 
    {
        [copy setPropertyOne:[[[self getPropertyOne] copyWithZone:zone] autorelease]];           
    }

    return copy;
} 
```

现在，我像这样分配和初始化数组：

```
organisations = [[NSMutableArray alloc] initWithArray:organisationsArray copyItems:YES]; 
```

这一切都很好。为了测试**，数组中有 2 个对象**。

接下来，当调用一个方法时，我会像这样更新数组中的一个对象：

```
- (void)updateOrganisation
{
    [[organisations objectAtIndex:0] setConsumerKey:[tfPropertyOne stringValue]];
} 
```

其中*tfPropertyOne* * 是显示屏上的 NSTextField（正确绑定等）。这也很好用，因为我已经用 NSLog 进行了测试，它输出了正确的结果。然后我在数组中的不同索引上调用显示方法以查看其相关详细信息：

```
- (void)displayOrganisation:
{
    [tfPropertyOne setStringValue:[[organisations objectAtIndex:index] getPropertyOne]];
} 
```

**index**是一个本地的 NSInteger 并且不是问题。然后我在这个对象上调用相同的更新方法，这显然也可以正常工作（使用 NSLog 进行测试）。

最后，当我调用返回并显示数组**[self displayOrganisation:0]**中的第一个对象时，调用成功，但调用**getPropertyOne**时我的应用程序崩溃。

这是 Mac 控制台中的错误：

```
...: Invalid memory access of location 0x3bcfd069 eip=0x90c1cd5c 
```

这是来自崩溃报告：

```
Thread 0 Crashed:: Dispatch queue: com.apple.main-thread
0   libobjc.A.dylib                 0x90c1cd4b objc_msgSend + 27
1   com.apple.Foundation            0x943da945 _NSDescriptionWithLocaleFunc + 57
2   com.apple.CoreFoundation        0x906503ae __CFStringAppendFormatCore + 12238
3   com.apple.CoreFoundation        0x906a70dc _CFStringCreateWithFormatAndArgumentsAux + 108
4   com.apple.CoreFoundation        0x9072821c _CFLogvEx + 124
5   com.apple.Foundation            0x9445d221 NSLogv + 136
6   com.apple.Foundation            0x9445d194 NSLog + 27
7   co.nz.fdl.XeroConnect           0x1b5b4872 -[PrefsController displayOrganisation:] + 194 (PrefsController.mm:229) 
```

任何人都可以帮忙吗？我是否错误地访问/创建/存储对象到数组中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T02:48:42.027

我设法通过更改自定义对象的头文件来解决此问题。

原来的：

```
@property (nonatomic, retain) NSString *propertyOne; 
```

在职的：

```
@property (copy) NSString *propertyOne; 
```

整个问题通常归结为我缺乏 Objective-C 知识（因此我仍在学习！）。多谢你们

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T00:38:37.777

看起来您正试图访问一个已经被释放的对象。检查您的自动释放调用。

# linux - fedora 17 中的 yum 更新非常缓慢

> ID：11679923
> 
> 赞同：6
> 
> 时间：2012-07-27T00:28:03.593
> 
> 标签：linux, fedora, yum

我刚刚安装了 Fedora 17 并进行了初始更新：

```
yum update 
```

yum update 下载速度太慢了。下载速度为**5 kbps**。

有没有办法告诉 yum 不要选择这么慢的存储库？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-27T00:29:47.353

有人写了一个 yum 插件来解决这个问题，告诉 yum 使用最快的可用镜像，这里是你如何安装它：

```
su
enter password
yum install yum-plugin-fastestmirror 
```

然后我做了：

```
yum update 
```

现在 yum 更新正在利用我的下载速度的全部带宽。

# javascript - 用javascript剖析一个id？

> ID：11679924
> 
> 赞同：0
> 
> 时间：2012-07-27T00:28:03.977
> 
> 标签：javascript, jquery, regex, variables

我将如何去剖析一个 id，把它`id="type=2owner=6page=1"`变成这样：

```
var type = "2"; // or what ever is after type= but before owner=
var owner = "6"; // or what ever is after owner= but before page=
var page = "1"; // or what ever is after page= 
```

这些数字并不总是相同或单个数字。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T00:31:22.623

您*可以*完成您正在尝试做的事情，但您几乎肯定应该使用数据属性。

不要将数据打包到您的`id`属性中，而是使用单独的`data-`属性：

```
<div id="my-div" data-type="2" data-owner="6" data-page="1" /> 
```

jQuery 为您提供了一种非常简单的语法来访问元素的数据属性：

```
$('#my-div').data('type');  // "2"
$('#my-div').data('owner'); // "6"
$('#my-div').data('page');  // "1" 
```

或者，对于更改/添加新数据属性：

```
$('#my-div').data("name", "bob"); // <div .... data-name="bob" /> 
```

* * *

如果您无法将数据属性添加到您的标记（例如，如果您只使用 HTML 而不是生成它），您可以使用正则表达式将`id`属性分开：

```
var id = "type=2owner=6page=1";

id.match(/type=(\d+)/);  // ["type=1", "1"]
id.match(/owner=(\d+)/); // ["owner=6", "6"]
id.match(/page=(\d+)/);  // ["page=2", "2"] 
```

以上任何一个都将返回一个双元素数组，其中第二个元素是有问题的数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T00:32:30.283

```
var id = document.getElementById(...).getAttribute("id").split(/=/g);
var type = id[1];
var owner = id[3];
var page = id[5]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T00:47:53.250

你可以尝试一些更具扩展性的东西。这将创建一个包含所有关键字或术语及其值的漂亮对象，并且可以使用更多术语轻松扩展。

```
var id = 'type=2owner=6page=1'
var terms = ['type', 'owner', 'page']
var results = {}

for (var i = 0, n = terms.length, m, re; i < n; i++) {
  m = terms[i]
  re = new RegExp(m + '=(\\d+)', 'i')
  results[m] = re.exec(id)[1]
}

console.log(results) // { type: 2, owner: 6, page: 1 } 
```

# svn - 如何使用 svndumpfilter 排除某个版本

> ID：11679926
> 
> 赞同：2
> 
> 时间：2012-07-27T00:28:40.557
> 
> 标签：svn, version-control, svnadmin, svndumpfilter

我有一个或两个错误版本的 SVN 存储库。我需要摆脱他们！我打算使用 svndumpfilter 工具，它有一个`exclude`命令。但是，我无法弄清楚如何使用它来排除修订。每次我使用它时，我都会遇到`Malformed dumpfile header`错误。请参阅下面的命令；我想排除修订版 23，代码是包含存储库的目录。

```
>svndumpfilter exclude 23 code
Excluding prefixes:
   '/23'
   '/code'

SVN-fs-dump-format-version: 2

<waits for me to type something and press enter>

'vndumpfilter: E140001: Malformed dumpfile header ' 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-28T13:00:44.990

`svndumpfilter`工具使用标准输入作为输入并**仅**在某些路径上过滤，因此您不能排除特定修订。但是，您可以尝试将存储库从 rev 0 转储到 rev。22 并从 rev 24 继续到 HEAD，但是，这只有在 rev 23 中没有更改的文件在 rev 23 之后再次更改时才有效。

这是一个小脚本：

```
svnadmin dump my -r0:22 code > /path/to/dumpfile_1.dmp
svnadmin dump --incremental -r24:HEAD code > /path/to/dumpfile_2.dmp 
```

如果要使用转储文件创建新存储库：

```
svnadmin create code_correct
svnadmin load code_correct <  /path/to/dumpfile_1.dmp 
svnadmin load code_correct <  /path/to/dumpfile_2.dmp 
```

# tomcat - 在 Apache Tomcat 6 集群中，当 TomcatA 收到请求时，为什么在会话 (S1) 上调用 invalidate？

> ID：11679928
> 
> 赞同：0
> 
> 时间：2012-07-27T00:29:04.373
> 
> 标签：tomcat, tomcat6

参考“工作原理”部分中的[Apache Tomcat 6 集群文档：](http://tomcat.apache.org/tomcat-6.0-doc/cluster-howto.html)

> -7。TomcatA收到请求，在会话（S1）上调用invalidate
> 
> 无效调用被拦截，并且会话与无效会话一起排队。当请求完成时，它不会发送已更改的会话，而是向 TomcatB 发送“过期”消息，并且 TomcatB 也会使会话无效。
> 
> -8。TomcatB 收到新会话的请求 (S2)
> 
> 与步骤 3 相同的场景）
> 
> -9。TomcatA 会话 S2 由于不活动而过期。
> 
> 无效调用被拦截，就像用户使会话无效时一样，并且会话与无效会话一起排队。此时，在另一个请求通过系统并检查无效队列之前，将不会复制无效会话。

为什么在第 7 步中，Tomcat A 会使会话 S1 无效？无论如何，新会话 S2 是否与会话 S1 相关？为什么会话 S2 在步骤 9 中过期？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T00:41:16.720

这些是不同的场景。这不是按顺序发生的步骤的编号列表。这解决了您的两个问题，第三个问题的回答是会话之间没有关系。

# jquery - 在 jQuery 中单击时显示 UL

> ID：11679930
> 
> 赞同：0
> 
> 时间：2012-07-27T00:29:07.853
> 
> 标签：jquery

我有一些问题，希望你能帮忙。

我有以下 HTML 代码

```
<h4><a class="trigger">Click </a></h4>

<ul class="panel">
<li>List items bla bla bla </li>
<li>List items bla bla bla </li>
<li>List items bla bla bla </li>
</ul>

<h4><a class="trigger">Click </a></h4>

<ul class="panel">
<li>List items bla bla bla </li>
<li>List items bla bla bla </li>
<li>List items bla bla bla </li>
</ul> 
```

我希望点击它会切换。我在 jQuery 中有以下代码：

```
$(function(){

    $('ul.panel').hide();
    $("a.trigger").click(function(){
        $("ul.panel").slideToggle("fast");
        $(this).toggleClass("active");
        return false;
    });
}); 
```

现在我知道它不起作用，因为它正在选择所有项目。我怎样才能使用它，以便它只切换被点击的实际触发器而不切换所有触发器？我曾尝试使用 FIND、SIBLINGS、NEXT 等，但我不能。

任何帮助，不胜感激。

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T00:31:13.287

```
$('a.trigger').click(function() {
    $(this).closest('h4').next('.panel').slideToggle();
}); 
```

[工作示例](http://jsfiddle.net/edelman/nQCJk/)

这里的概念是您遍历 DOM 以到达一个可以概括您的命令的共同点。在我的示例中，我向外导航到一个共同的祖先 ( `h4`)，然后找到与*该父元素相关*的下一个列表。如果您有模板化布局，这是一种非常常见的 DOM 遍历技术。

# bash - 为什么我的 shell 脚本在后台处于待机状态，直到我把它带回前台？

> ID：11679931
> 
> 赞同：2
> 
> 时间：2012-07-27T00:29:08.797
> 
> 标签：bash, background-process, detach

我有一个 shell 脚本，它正在执行一个 php 脚本（beantalkd 的工作人员）。

这是脚本：

```
#!/bin/bash

if [ $# -eq 0 ]
then
   echo "You need to specify an argument"
   exit 0;
fi

CMD="/var/webserver/user/bin/console $@";
echo "$CMD";
nice $CMD;
ERR=$?

## Possibilities
# 97    - planned pause/restart
# 98    - planned restart
# 99    - planned stop, exit.
# 0     - unplanned restart (as returned by "exit;")
#        - Anything else is also unplanned paused/restart

if [ $ERR -eq 97 ]
then
   # a planned pause, then restart
   echo "97: PLANNED_PAUSE - wait 1";
   sleep 1;
   exec $0 $@;
fi

if [ $ERR -eq 98 ]
then
   # a planned restart - instantly
   echo "98: PLANNED_RESTART";
   exec $0 $@;
fi

if [ $ERR -eq 99 ]
then
   # planned complete exit
   echo "99: PLANNED_SHUTDOWN";
   exit 0;
fi 
```

如果我手动执行脚本，如下所示：

```
[user@host]$ ./workers.sh 
```

它运行良好，我可以看到我的 PHP 脚本的输出。但是，如果我将进程与控制台分离，如下所示：

```
[user@host]$ ./workers.sh & 
```

它不再工作了。但是我可以在后台看到该过程。

```
[user@host]$ jobs
[1]+  Stopped                 ./workers.sh email 
```

队列作业服务器正在填充作业，并且在我将分离的脚本带到前台之前，它们都没有被处理，如下所示：

```
[user@host]$ fg 
```

此刻，我看到我的 PHP 脚本正在处理所有工作。我不知道为什么会这样。你能帮忙吗？

谢谢，马克西姆

**编辑：**

我已经创建了一个 shell 脚本来运行 x worker，我在这里分享它。不确定这是不是最好的方法，但目前运行良好：

```
#!/bin/bash

WORKER_PATH="/var/webserver/user/workers.sh"
declare -A Queue
Queue[email]=2
Queue[process-images]=5

for key in "${!Queue[@]}"
do
  echo "Launching ${Queue[$key]} instance(s) of $key Worker..."
  CMD="$WORKER_PATH $key"
  for (( l=1; l<=${Queue[$key]}; l++ ))
    do
        INSTANCE="$CMD $l"
        echo "lnch instance $INSTANCE"
        nice $INSTANCE > /dev/null 2> /dev/null &
    done
done 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T00:53:51.670

后台进程不允许写入终端，您的脚本会尝试对`echo`语句执行此操作。当您将标准输出放到后台时，您只需要将其重定向到文件。

```
[user@host]$ ./workers.sh > workers.output 2> workers.error & 
```

（为了安全起见，我也重定向了标准错误。）

# php - 使用 CSV 和 php 进行数组搜索

> ID：11679932
> 
> 赞同：0
> 
> 时间：2012-07-27T00:29:13.360
> 
> 标签：php, csv, fopen

嘿，我正在尝试使用以下代码搜索 CSV 文件：

```
$fh = fopen($myFile, "r");
$os = array(fgetcsv($fh));

if (in_array("12.56.102.44", $os)) {
    echo "Got it!";
} 
```

CSV 格式如下：

```
"132.89.14.110","41.98.365.111","12.56.102.44","77.295.10.111", 
```

但是，这不起作用，所以我确定我使用不正确......

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T00:34:14.433

[`fgetcsv()`](http://php.net/fgetcsv)已经返回一个数组。你应该像这样调用函数：

```
$os = fgetcsv($fh); 
```

将返回值放入一个数组中将产生以下值`$os`：

```
array(array("132.89.14.110","41.98.365.111","12.56.102.44","77.295.10.111")) 
```

如果文件中有多行需要检查，则必须使用循环，例如：

```
$fh = fopen($myFile, "r");
while(($os = fgetcsv($fh)) !== false) {
    if (in_array("12.56.102.44", $os)) {
        echo "Got it!";
        break; // stop the loop, we're done
    }
} 
```

# python - Python 子进程参数

> ID：11679936
> 
> 赞同：16
> 
> 时间：2012-07-27T00:29:38.087
> 
> 标签：python, subprocess, command-line-arguments

例如我正在使用`ffplay`并想运行这个命令`-bufsize[:stream_specifier] integer (output,audio,video)`

目前我有这个：

```
subprocess.call(["ffplay", "-vn", "-nodisp","-bufsize 4096", "%s" % url]) 
```

但这表示它是无效的。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-27T02:03:08.033

正如 JBernardo 在评论中提到的那样，将`"-bufsize 4096"`论点分成两部分，`"-bufsize", "4096"`. `subprocess.call`与`shell=False`（默认）一起使用时，每个参数都需要分开。您还可以`shell=True`将整个命令指定为单个字符串，但由于潜在的安全漏洞，不建议这样做。

您不需要在拥有`"%s" % url`. 如果`url`是字符串，则直接传递，否则调用`str(url)`获取字符串表示。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-27T09:12:54.887

这是要走的路：

```
url = 'http://www.whatever.com'
cmd = 'ffplay -vn -nodisp -bufsize 4096 '.split()
subprocess.call(cmd + [str(url)], shell=False) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-11-12T20:54:44.877

虽然 using`shlex.split()`对于您的用例来说是多余的，但许多评论似乎都在询问在 CLI 允许您传递包含空格（即`git commit -m "Commit message here"`）的带引号的字符串的情况下在参数中使用空格。

这是一个快速的 Python 函数，可用于运行命令，包括带空格的参数：

```
import shlex, subprocess

def run_command( command ):
    subprocess.call(shlex.split(command)) 
```

# symfony - Symfony 2 将请求转发到另一个内容更改的控制器

> ID：11679937
> 
> 赞同：0
> 
> 时间：2012-07-27T00:29:41.830
> 
> 标签：symfony

我想使用以下方式将请求转发给另一个控制器：

```
$controller_response = $this->forward( 'MyBundle:Clients:getClients' ); 
```

这工作正常，但我需要更新请求以具有不同的内容，我无法确定我应该使用什么方法，以下不起作用：

```
$request->content->set('new content');
$request->set('content', 'new content');
$request->setContent('new content'); 
```

甚至有可能做到这一点吗？如果不是，我可以创建一个全新的请求并将其作为参数添加，但如果可能的话，我宁愿避免这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T09:03:39.153

`setContent`您可以使用该方法更改响应内容。

```
$response->setContent('<html>Hello</html>'); 
```

您还可以更改请求

```
$request->request->set('key', 'value');
$request->query->set('key', 'value'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-10T17:52:05.883

```
$request = Request::createFromGlobals();
$newContent = json_decode($request->getContent(), true);
$request->initialize($request->query->all(), $request->request->all(), $request->attributes->all(), $request->cookies->all(), $request->files->all(), $request->server->all(),  $newContent); 
```

不幸的是，似乎没有一个很好的方法，但这对我有用。

# r - 在 R 中停止计算；到那时我会失去结果吗？

> ID：11679940
> 
> 赞同：2
> 
> 时间：2012-07-27T00:30:17.960
> 
> 标签：r

我正在一个大型数据集上运行一些矩阵代数。最外层循环的每次迭代都会填充一行，其中包含分配给 64,797 行的两个不同向量。我正在为外部循环打印一个计数器来检查进度。这可能并不理想。根据任务管理器的说法，R 仍在工作，并且使用了大量的内存和处理器。但是，R 控制台没有响应，我只能在最后读到我至少到第 31,000 行（有滚动空间，但我无法向下滚动查看打印的最后一个数字）。我不知道程序是否“挂起”（不再迭代外循环）并且我在浪费时间等待，或者我是否应该坚持下去。机器已经运行了几天。鉴于程序的结构，我可以结束进程并从填充的最后一行重新开始。然而，如果我结束该过程，我会丢失我正在填充的向量中先前分配的数据吗？那会很糟糕，因为我必须从头开始。这是下面的代码。最终目标是称为：save.trace 和 save.trace2 的向量。

```
for (i in 1:nrow(coor.cal)){
print(i)
   for (j in 1:nrow(coor.cal)){
      dist<-( (coor.cal[i,1]-coor.cal[j,1])^2 + (coor.cal[i,2]-coor.cal[j,2])^2)^.5        
      #finding distances between observations
      w[j]<-exp(-0.5*((dist/bw)^2))#computing weight matrix for observation i
      if (dist>bw){w[j]<-0}

   }

   for (k in 1:27){
      xv<-xmat[ ,k]
      xtw[k, ]<-xv*w
   }
   xtwx<-xtw%*%xmat
   xtwx.inv<-ginv(xtwx)
   xtwx.inv.xtw<-xtwx.inv%*%xtw

   xrow<-xmat[i, ]
   temp<-xrow%*%xtwx.inv.xtw
   save.trace[i]<-temp[i]
   save.trace2[i]<-sum(temp*temp)
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T12:06:45.510

这是一个更好的例子。

```
saved <- 0
for(i in 1:100)
{
  saved <- i
  Sys.sleep(0.1)
} 
```

运行此代码，并在接下来的 10 秒内（循环完成之前）的某个时间按 Escape。

看看 的值`saved`。应该大于`0`，说明你的进度已经被存储了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T00:37:42.340

我没有记忆冒险进行实验来回答我的问题。我刚刚借了另一台机器，试了一下，确实你可以结束一个进程并仍然保留以前存储的信息。我以前没有遇到过这个问题。我试图删除我的问题，但不能。我会留下这个，以防它帮助别人。

# c# - 获得最大金额 50 的倍数，没有美分

> ID：11679943
> 
> 赞同：0
> 
> 时间：2012-07-27T00:30:35.790
> 
> 标签：c#, asp.net, textbox, floating-point

我正在尝试用可以除以 50 且没有美分的金额填充文本框。

示例：金额 -> 52353.85 应显示 -> 52350

金额-> 1229.68 应该显示-> 1200

如何修改值？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T00:32:27.603

```
int newValue = (int)(oldValue / 50) * 50; 
```

如果您希望数字可以四舍五入，请将 25 添加到旧值

```
int newValue = (int)((oldValue + 25) / 50) * 50; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T00:34:59.080

这给出了正确舍入的结果：

```
return Math.Round(x / 50.0) * 50; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T00:51:21.663

```
return (int)x - ((int)x % 50); 
```

# android - Eclipse 说我的 SDK 工具已经过时了

> ID：11679951
> 
> 赞同：2
> 
> 时间：2012-07-27T00:31:46.407
> 
> 标签：android, windows, eclipse

当我打开 Eclipse 时，它​​告诉我我的 SDK 工具已经过时了。Eclipse 说我当前的版本是 17，我可以将它更新到 20。这是谎言；当我打开 SDK Manager 时，我的 SDK 工具是 20.0.1。***但是当我通过Eclipse***打开 SDK Manager 时，SDK 工具更改为 17 版。我已经看过[Eclipse: won't let me use Android SDK, wrongly claim my ADT is out of date](https://stackoverflow.com/questions/7852823/eclipse-wont-let-me-use-android-sdk-wrongly-claims-my-adt-is-out-of-date)但它仍然行不通。我删除了 Eclipse 并通过下载 Eclipse 并将 Android 存储库 (ADT) 安装到 Eclipse 来重新开始。不走运，仍然告诉我 SDK 工具是 17。所以我决定继续玩，并在 Eclipse 中单击“打开 SDK 管理器”窗口。管理器弹出并单击“安装 1 包”（SDK 工具）。中途，它停下来，说 android-sdk/tools 目录被 java.exe 和 cmd.exe 锁定，所以我打开 Windows 任务管理器并结束“java.exe”进程。你知道什么？我的 Android SDK Manager Windows 刚刚关闭。**如果 SDK 管理器会干扰自己**，我到底应该如何更新 SDK 工具？对不起，我现在真的很生气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T01:38:23.830

有类似的问题。我的回答是为 Eclipse 更新 ADT 插件（帮助->检查更新）。重新启动 Eclipse。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-04T21:44:51.987

以上都不适合我。我不得不“删除”SDK Build 工具包，然后重新安装这些包。之后，我现在可以创建一个新的 android 项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-03T04:44:11.737

对于大多数人来说，将构建工具简单更新到所需版本就足够了。通常情况下，没有安装兼容版本的 Android SDK Build-tools。

# php - PHP 页面作为函数/进程模块

> ID：11679953
> 
> 赞同：2
> 
> 时间：2012-07-27T00:31:57.017
> 
> 标签：php, process, module

首先，这是我在 Stack Overflow 上的第一篇文章，我正在尝试为我正在从事的个人项目学习 PHP/MySql。我想我会花很多时间在这里问一堆问题，所以如果我问了太多你可能觉得微不足道的问题，请原谅我。

**继续这个问题。**

我正在使用 ajax 和 PHP 的组合来处理服务器端脚本。我想要做的是有一个 PHP 模块，它将接受输入、处理某些内容并提供输出。很像一个函数。

我想弄清楚的是如何使 PHP 像一个黑盒进程模块，像一个函数，而不是一个页面。

例如，我有一个 login.html 页面，它使用 AJAX 向 login.php 页面发送请求。login.php 接受输入，处理输入，并输出一个 json 对象，该对象告诉调用页面是否成功，如果不成功，将列出它在此过程中遇到的错误。

问题就在这里。我不希望用户能够直接访问 login.php。事实上，我什至不希望 login.php 对公众可见。login.php只是一个进程，所以如果你去它，它将是空白的。让用户看到空白页似乎不是一个好习惯。

我考虑将 login.php 放在公用文件夹之外，但这意味着 ajax 也无法向它发出请求。

为了解决这个问题，我将 login.html 放在 login.php 中。它将向自己发出请求，然后根据请求的类型，php 将执行不同的操作。这将解决“空白页”问题。但我不禁想知道是否有一种方法可以制作一个独立的 PHP 模块，而不必让它像页面一样工作。

对此的任何想法将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T00:42:44.177

根据 AJAX 的性质，您发送 AJAX 请求的任何内容也可以直接导航到。您所能做的就是不向用户提供该页面存在的任何指示。

您可以选择通过[include](http://php.net/manual/en/function.include.php)让一个 PHP 文件调用另一个文件。这样，您可以请求 login.php 根据请求更改行为，但登录处理实际上由不可公开访问的文件处理：

```
if($_POST) {include '../login-handler.php'; die();} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T00:39:11.100

如果 AJAX 可以请求该页面，那么任何用户都可以使用他们的浏览器导航到该页面。你真的不应该关心这个，因为除非他们窥探，否则他们不会发生在 PHP 页面上。如果你想要一点点验证请求是由 AJAX 发出的，你可以[查找`X-Requested-With`header](http://davidwalsh.name/detect-ajax)，但这并不总是有效，因为每个浏览器都不会发送这个：

```
if(isset($_SERVER['HTTP_X_REQUESTED_WITH']) && $_SERVER['HTTP_X_REQUESTED_WITH'] == 'XMLHttpRequest') {
    // Ajax Request
} else {
    // Not AJAX, redirect to login page
    header('Location: login.html');
    exit();
} 
```

为了使这项工作在每个浏览器上可靠地工作，您需要在客户端设置此标头：

```
xhr.setRequestHeader("X-Requested-With", "XMLHttpRequest"); 
```

然而，这仍然不是完全证明，因为任何人都可以使用 Tamperdata 之类的程序发送标头，但这应该足以防止懒惰的窥探。不过，再次允许用户查看此页面（如果他们窥探）不会是一个大问题。它不会造成安全漏洞，如果用户偶然发现该`login.php`页面，他们将被重定向回`login.html`.

# ubuntu - 在 Ubuntu 中安装 Meteor 时出错

> ID：11679961
> 
> 赞同：2
> 
> 时间：2012-07-27T00:33:02.127
> 
> 标签：ubuntu, ssl, meteor

因此，我搜索了一段时间，但似乎找不到与我的情况相关的任何内容。我正在尝试在 Ubuntu 上安装 Meteor（对 Ubuntu 来说相当新），但是当我运行 curl 命令时，我收到以下错误消息。

```
curl: (35) error:14077410:SSL routines:SSL23_GET_SERVER_HELLO:sslv3 alert handshake failure Installation failed. 
```

我正在运行 Ubuntu 12.04 并尝试了许多命令来安装 Meteor，包括以下命令。

```
curl https://install.meteor.com | /bin/sh

curl install.meteor.com 
```

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-27T22:33:32.780

所以，我遇到了同样的问题并`sudo apt-get update && sudo apt-get upgrade`提供了帮助。不知道可能是什么原因。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T00:54:05.023

运行`openssl s_client -connect install.meteor.com:443`，您将看到证书链。我的 OpenSSL 拒绝验证该证书，因为`verify error:num=20:unable to get local issuer certificate`：

```
$ openssl s_client -connect install.meteor.com:443
CONNECTED(00000003)
depth=1 C = GB, ST = Greater Manchester, L = Salford, O = COMODO CA Limited, CN = PositiveSSL CA 2
verify error:num=20:unable to get local issuer certificate
verify return:0
---
Certificate chain
 0 s:/OU=Domain Control Validated/OU=PositiveSSL Wildcard/CN=*.meteor.com
   i:/C=GB/ST=Greater Manchester/L=Salford/O=COMODO CA Limited/CN=PositiveSSL CA 2
 1 s:/C=GB/ST=Greater Manchester/L=Salford/O=COMODO CA Limited/CN=PositiveSSL CA 2
   i:/C=SE/O=AddTrust AB/OU=AddTrust External TTP Network/CN=AddTrust External CA Root
--- 
```

大概我没有`AddTrust External CA Root`安装，如果您遇到同样的问题，我不会感到惊讶。

`wget(1)`没有对我提出任何投诉就下载了脚本。（这本身就令人担忧。如果不知道 CA ，它*应该抱怨。）*

# bash - 使用 bash 读取矩阵对角线上的元素并将其重定向到另一个文件

> ID：11679966
> 
> 赞同：3
> 
> 时间：2012-07-27T00:33:29.663
> 
> 标签：bash, awk

所以，目前我已经创建了一个代码来执行此操作，如下所示。在我回显变量后，此代码可以正常工作并执行它应该做的事情：

```
a=`awk 'NR==2 {print $1}' $coor`

b=`awk 'NR==3 {print $2}' $coor`

c=`awK 'NR==4 {print $3}' $coor` 
```

....但我必须为更多行执行此操作，并且我想要更一般的表达。所以我试图创建一个如下所示的循环。语法方面我认为代码没有任何问题，但它没有向文件“Cmain”输出任何内容。

我想知道是否有人可以帮助我，我在脚本方面有点新。

如果有帮助，我也可以发布我正在尝试阅读的内容。

```
for (( i=1; i <= 4 ; i++ )); do
  for (( j=0; j <= 3 ; j++ )); do
    B="`grep -n "cell" "$coor" | awk 'NR=="$i" {print $j}'`"
  done
done

echo "$B" >> Cmain 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T00:44:04.207

你可以用这个替换你的行`awk`：

```
awk '{ for (i=1; i<=NF; i++) if (NR >= 2 && NR == i) print $(i - 1) }' file.txt 
```

测试输入：

```
1 2 3 4 5 6 7 8 9 10
11 12 13 14 15 16 17 18 19 20
21 22 23 24 25 26 27 28 29 30
31 32 33 34 35 36 37 38 39 40
41 42 43 44 45 46 47 48 49 50
51 52 53 54 55 56 57 58 59 60
61 62 63 64 65 66 67 68 69 70
71 72 73 74 75 76 77 78 79 80 
```

输出：

```
11
22
33
44
55
66
77 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T00:53:04.220

`awk 'BEGIN {f=1} {print $f; f=f+1}' infile > outfile`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T00:55:10.413

另一种使用`sed`and的方法`coreutils`，假设空格分隔的输入位于`infile`：

```
n=$(wc -l infile | cut -d' ' -f1)
for i in $(seq 1 $n); do
  sed -n "${i} {p; q}" infile | cut -d' ' -f$i
done 
```

# javascript - 记住带有 localstorage onclick 的复选框

> ID：11679967
> 
> 赞同：3
> 
> 时间：2012-07-27T00:33:50.343
> 
> 标签：javascript, html, local-storage

我正在尝试为 Chrome 扩展创建一个选项页面。第一部分将值设置为本地存储。检查是否为真，取消检查是否为假。如果用户在其他时间回来，第二部分应该更新复选框，并且设置将应用于复选框。

我的问题是，当用户刷新或关闭窗口并返回时，复选框永远不会选中，但本地存储会更改为 true 或 false。如何使用户可以选中该框，并且当用户稍后返回或刷新页面时它将保留。

```
 setStatus = document.getElementById('stat');
    setStatus.onclick = function() {
        if(document.getElementById('stat').checked) {
            localStorage.setItem('stat', "true");
        } else {
            localStorage.setItem('stat', "false");
        }
    }

getStstus = localStorage.getItem('stat');
    if (getStstus == "true") {
        console.log("its checked");
        document.getElementById("stat").checked;
    } else {
        console.log("its not checked");
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T00:40:12.307

改变：

```
document.getElementById("stat").checked; 
```

至：

```
document.getElementById("stat").setAttribute('checked','checked'); 
```

会解决这个问题。由于添加`.checked`时，实际上只是检查复选框是否选中。

你也可以这样做：

```
document.getElementById("stat").checked=true; 
```

哪个做同样的事情。

* * *

请注意，您需要更改**第二个** `document.getElementById("stat").checked`.

```
getStstus = localStorage.getItem('stat');
    if (getStstus == "true") {
        console.log("its checked");
        document.getElementById("stat").setAttribute('checked','checked');
    } else {
        console.log("its not checked");
    }​ 
```

[JsFiddle 示例](http://jsfiddle.net/shawn31313/7X9Ff/1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T00:39:46.283

您需要在 JavaScript中将[checked 属性实际设置为 true。](https://developer.mozilla.org/en/HTML/Element/Input#attr-checked)

利用：

```
document.getElementById("stat").checked = true; 
```

代替：

```
document.getElementById("stat").checked; 
```

[**试试看！**](http://jsfiddle.net/adamzr/C5zZu/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-27T00:39:30.603

我假设您说您的存储正在工作，但您需要使用 Javascript 选中该框。在这种情况下，请使用：

```
document.getElementById("stat").checked=true; 
```

代替

```
document.getElementById("stat").checked; 
```

**参考：** [http ://www.w3schools.com/jsref/prop_checkbox_checked.asp](http://www.w3schools.com/jsref/prop_checkbox_checked.asp)

# wpf - 多线程图像合成

> ID：11679972
> 
> 赞同：1
> 
> 时间：2012-07-27T00:34:55.337
> 
> 标签：wpf, multithreading, rendertargetbitmap, drawingcontext, drawingvisual

我正在使用 WPF 成像来使用 DrawingVisual 将文本、3d 图形和图像合成在一起。然后将结果呈现为 RenderTargetBitmap 并以 jpeg 格式保存到磁盘。所有这些都发生在没有可视窗口的代码中。

只要我一次只尝试做一件事，它就可以很好地工作。但是，我想看看是否可以通过使用多个线程进行渲染来加快速度。每个线程都使用一个创建自己的 DrawingContext、DrawingVisual 等的对象。但是，当我尝试并行访问它们时，显然在某处存在一些共享状态，因为我得到了虚假错误。有时它是“调用线程无法访问此对象，因为另一个线程创建了它”。其他时候，当我添加指向 3D 几何图形时，从 WPF 的内部冒出的 NullReferenceExceptions 看起来更邪恶。

有没有办法确保每个线程与 WPF 保持隔离？还是共享状态是不可避免的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T01:27:45.780

您是否可能不小心跨线程使用了相同的资源？您的处理代码中是否涉及任何 lamda 表达式或匿名方法？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T07:45:54.463

尤里卡。我在线程池线程中创建我的对象，[这在使用 WPF 时显然是一个禁忌](https://connect.microsoft.com/VisualStudio/feedback/details/648683/memory-leak-in-wpf-of-dispatcher-and-mediacontext-objects-resulting-in-win32exceptions)。相反，所有对象都需要从调度程序线程中创建。顺便说一句，这也清除了我没有发现的可怕的内存泄漏。

我原来的类定义是这样的：

```
public class Compositor
{
    private int _width;
    private int _height;
    private DrawingVisual _drawingVisual;
    private DrawingContext _drawingContext;
    private bool _isReady = false;
    public void Reset(int width, int height)
    {
        _width = width;
        _height = height;
        _drawingVisual = new DrawingVisual();
        _drawingContext = _drawingVisual.RenderOpen();
        _isReady = true;
    }
    // ... compositing methods below
} 
```

为了纠正，我让我的类继承自`DispatcherObject`，然后使用该`Dispatcher`属性来实例化我的对象。

```
public class Compositor : DispatcherObject
{
    private int _width;
    private int _height;
    private DrawingVisual _drawingVisual;
    private DrawingContext _drawingContext;
    private bool _isReady = false;
    public void Reset(int width, int height)
    {
        Dispatcher.Invoke(
            new Action(
                () =>
                    {
                        _width = width;
                        _height = height;
                        _drawingVisual = new DrawingVisual();
                        _drawingContext = _drawingVisual.RenderOpen();
                        _isReady = true;
                    }));
    }
    // ... compositing methods below
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-14T06:01:29.127

来自[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcherobject.aspx)：

> 从 DispatcherObject 派生的对象具有线程亲和性。
> 
> 从 Freezable 派生的对象在冻结时是自由线程的。有关详细信息，请参阅可冻结对象概述。

在处理应该在 UI 线程上真正使用（不仅是创建）的位图、画笔和其他类时，我也遇到过类似的问题。

这很烦人，因为人们想利用 WPF 渲染的力量来并行处理领域，但这似乎是不可能的（除了一些场景，比如`WriteableBitmap`使用指针更新）。

# php - 如何为用户设置多个身份验证器

> ID：11679976
> 
> 赞同：0
> 
> 时间：2012-07-27T00:35:10.350
> 
> 标签：php, mysql, yii

我正在使用 Yii 在 PHP 中编写应用程序。我正在尝试为用户添加能够以不同方式进行身份验证的能力。

我的主要问题是最好的方法是什么。

例如，我正在考虑做这样的事情：

在与类相关的数据库中有一个 Authenticators 表。

在 users 表中，有一个与身份验证器相关的身份验证器 ID 列。

这就是我卡住的地方。我想在这里尽可能地成为一个 Yii 并使用 ActiveRecord。每个身份验证器都需要知道用户 ID，因此我必须将其传递给身份验证器模型（存储类名），然后找到一种方法来提取实际类，同时还将用户传递给该类。

这一切似乎有点……过度杀戮。

任何指导将不胜感激。

谢谢！凯尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T04:31:26.757

只需创建您自己的实现工厂模式的 CUserIdentity 后代。听起来很难，但我认为根本没有简短的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T19:41:34.500

我建议您使用 rbac 方法，最简单的方法是使用[正确的](http://www.yiiframework.com/extension/rights)模块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T19:25:50.923

您在本主题中获得了所有答案：[身份验证和授权](http://www.yiiframework.com/doc/guide/1.1/en/topics.auth)。

# c# - 如何关闭未知的子窗口？

> ID：11679979
> 
> 赞同：0
> 
> 时间：2012-07-27T00:35:53.257
> 
> 标签：c#, silverlight-4.0

我在 Silverlight 应用程序中有一些会话管理代码。作为该会话管理的一部分，如果用户空闲时间过长，我会自动将其注销。当用户再次登录时，之前会话中打开的任何 ChildWindow 仍将打开。但是，所有其他会话数据都被重置，因此 ChildWindow 被有效地孤立了。任何尝试使用它都会引发错误。注销时如何杀死任何 ChildWindows？

如何找到可能存在的任何子窗口并将其杀死以便注销可以正常工作？我的第一个想法是`this.GetVisualDescendants().OfType<ChildWindow>();`从外壳开始寻找。但是，在测试中，即使我打开了子窗口，它也是空的。

该应用程序是使用 Prism 和 MEF 的 silvelight C# 应用程序。

编辑 - 添加更多细节/另一种表达问题的方式：

所以程序流程是这样的：

1.  用户登录到 silverlight 应用程序。
2.  用户在应用程序中导航并打开一个 ChildWindow。
3.  用户放弃他们的计算机来补充咖啡并结束了 20 分钟的对话。
4.  用户的 Silverlight“会话”超时。所有特定于用户的信息都将被丢弃，并显示登录窗口（另一个 ChildWindow）。
5.  用户返回计算机并看到登录提示，登录。
6.  用户在出去喝咖啡之前看到了他们打开的 ChildWindow。
7.  用户尝试单击 ChildWindow 中的某些内容并收到错误，因为 ChildWindow 的所有上下文在他们的“会话”结束时都被丢弃了。

我想在我的会话超时代码（甚至登录后代码）中添加一些可以找到任何打开的 ChildWindow 并关闭它的东西，以防止这种导致错误的情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T20:30:14.983

所以，我显然难倒了所有人，或者更有可能没有让我的问题足够有趣。

我确实找到了解决这个问题的方法。我为应用程序中的所有子窗口创建了一个自定义基类。在该基类中，ChildWindows 自己从静态列表中注册/注销（在 Loaded/Unloaded 事件处理程序中），该静态列表可用于获取对任何活动 ChildWindows 的引用。

# function - Magento 是否提供在视图中使用的实用功能？

> ID：11679981
> 
> 赞同：0
> 
> 时间：2012-07-27T00:36:06.390
> 
> 标签：function, magento, views

我正在为 Magento 模块开发一些视图，我想知道是否有快捷功能可用于生成 HTML 标签，而不是通常的 printf/sprintf。例如，一些框架提供`Anchor()`诸如*标记，或`TextBox()`，它打印一个完整的*标签。**

 **Magento 有类似的东西，还是我必须坚持“ *printf* ”方法？提前感谢您的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T00:40:37.667

不，Magento 的 Blocks（我假设你问的是关于 re: Views 的问题）不提供 HTML 生成方法。您需要在 PHP 中手动生成 HTML 代码**或**使用模板块，这允许您在模板文件中编写自己的 html 代码`phtml`，然后将该代码与调用

```
<a href="<?php echo $link; ?>"><?php echo $label; ?></a> 
```

或者

```
<a href="<?=$link;?>"><?= $label; ?></a> 
```

取决于你的角色**

# silverlight - WCF RIA - 连接两个表

> ID：11679982
> 
> 赞同：0
> 
> 时间：2012-07-27T00:36:40.773
> 
> 标签：silverlight, ria

我找到了很多关于这个问题的解释，但没有什么真正帮助我。事情很简单。我的dataModel上有两个表：Events和TimeStamps，都有字段EntryID，这是它们之间的关系（这些表实际上是视图，我不能对数据库执行更改，我只能查询它们）。在我的domainService，我已经创建了从每个表中获取数据的方法。到目前为止，我只能用其中一个表中的数据填充 dataGrid，但我真正需要的是从两个表中显示。在 T-SQL 中它会是这样的：

```
 Select e.EntryID,t.closed_time
  from Events e inner join TimeStamps t
  on e.EntryID=t.EntryID 
```

所以我想在我的 dataGrid 上显示 Entry_ID 和 closed_time。感谢您帮助解决我的问题

我尝试了一个新的自定义类

```
 public class CustomTable
    {
        public string EntryId { get; set; }
        public int closed_time { get; set; }
    }

    public IQueryable<CustomTable> GetJoined()
    {
        return (from i in this.ObjectContext.Events                   
                join p in this.ObjectContext.TimeStamps p
                on i.Entry_ID equals p.Entry_ID
                select new CustomTable
                {
                    EntryId = i.Entry_ID,
                    closed_Time = p.Closed_TIME
                });
    } 
```

这是我自己添加的附加代码，我很确定缺少某些东西，此方法和类本身已添加到我的 service.cs

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T08:32:36.080

这是完成的最终代码和程序，不要忘记在每一步之后构建项目：

1- 在 Myproject.Web 下打开一个新类（添加-->新项目-->类）

```
namespace Myproject.Web
{

    public class CustomTable
    {
        [Key]
        public string EntryId { get; set; }
        public int closed_Time { get; set; }
    }
} 
```

2-在 IncidentService.cs 上添加：

```
public IQueryable<CustomTable> GetJoined()
{
    return (from i in this.ObjectContext.Events                   
            join p in this.ObjectContext.TimeStamps p
            on i.Entry_ID equals p.Entry_ID
            select new CustomTable
            {
                EntryId = i.Entry_ID,
                closed_Time = p.Closed_TIME
            });
} 
```

3-添加到 Mypage.xaml.cs

```
public MyPage()
{
    InitializeComponent();

    this.dataGrid1.ItemsSource = _IncidentContext.CustomTables;
    _IncidentContext.Load(_IncidentContext.GetJoinedQuery());

    DataGridTextColumn entry = new DataGridTextColumn();
    entry.Binding = new System.Windows.Data.Binding("EntryId");
    entry.Header = "Entry Id";

    DataGridTextColumn closed = new DataGridTextColumn();
    closed.Binding = new System.Windows.Data.Binding("closed_Time");
    closed.Header = "Closed Time";

    dataGrid1.Columns.Add(entry);
    dataGrid1.Columns.Add(closed);

} 
```

我希望这能帮助其他有同样问题的人，我花了 3 天时间来解决这个问题！！

# c# - 类型的代表，或如何给笨拙的类型起一个更好的名字

> ID：11679983
> 
> 赞同：1
> 
> 时间：2012-07-27T00:36:44.987
> 
> 标签：c#, types

在我正在进行的一个项目中，我经常使用复杂`Dictionary`的对象。通常，有很多声明，例如：

```
var d1 = new Dictionary<string, Dictionary<int, List<string>>>();
var d2 = new Dictionary<Tuple<string, string>, List<object>>(); 
```

在类型转换和传递参数之间，这很烦人。我想做的是这样的，使用虚构的关键字“typedel”：

```
typedel ListDict = Dictionary<string, Dictionary<int, List<string>>>();
typedel PolyDict = Dictionary<Tuple<string, string>, List<object>>();

var d1 = new ListDict();
var d2 = new PolyDict(); 
```

这样我就不需要`Dictionary`每次都输入长声明 - 所以我想要的是为类型名称定义速记缩写。我怎样才能以最简单的方式（使用最少的代码行）做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T00:37:59.557

```
class MyData : Dictionary<string, Dictionary<int, List<string>>>
{

} 
```

您也可以这样做，但您必须在每个使用 的文件中都这样做，这`MyData`可能不是最理想的。

```
using MyData = Dictionary<string, Dictionary<int, List<string>>>; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-27T00:41:43.397

对于您想经常使用的“typedef”，您可以创建一个派生自适当基类的类，如@Ed S 的回答：

```
class MyData : Dictionary<string, Dictionary<int, List<string>>>
{   
} 
```

但是，这与大多数人认为的 typedef 不同：您正在引入一种新类型，它对反射、运算符等具有影响`typeof`。`is`区别对您来说可能很重要，也可能无关紧要，但它就在那里.

但是，在单个源文件中，您可以使用`using`子句的第二种形式来执行真正的 typedef：

```
using ListDict = Dictionary<string, Dictionary<int, List<string>>>();
using PolyDict = Dictionary<Tuple<string, string>, List<object>>(); 
```

在任何一种情况下，虽然使用“typedef”肯定会节省你的打字时间，但不要忽视在代码中明确说明类型的好处。[这与这篇博文等文章](http://blogs.msdn.com/b/ericgu/archive/2004/08/17/215740.aspx)推荐使用`List<Foo>`自定义版本的原因相同`FooCollection : List<Foo>`——使用显式泛型版本，您可以*知道*它是什么类型的集合，以及它公开了什么方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T01:00:13.357

而且，只是为了笑...

```
 static Func<T> Magic<T>(Func<T> f) { return f; }
    static Func<T> Creator<T>() where T : new() { return () => new T(); }
    ...
    var ListDict = Magic(() => new Dictionary<string, Dictionary<int, List<string>>>());
    var PolyDict = Creator<Dictionary<Tuple<string, string>, List<object>>>();
    var d1 = ListDict();
    var d2 = PolyDict(); 
```

# java - 我需要另一种方法来使用 ColorFactory 类吗？

> ID：11679985
> 
> 赞同：2
> 
> 时间：2012-07-27T00:36:49.633
> 
> 标签：java, swing, methods

[`ColorFactory`](http://www.java2s.com/Code/Java/2D-Graphics-GUI/ColorFactory.htm)我刚刚发现在我的第一个 Swing 项目中使用的这个非常棒的类。这真的很酷：我现在可以将主类中的命名颜色（例如“深红色”或“中型海蓝宝石”）传递给该`createContentPane` `Container`方法。

代码：

```
frame.setContentPane(ContentPaneCreator.createContentPane("darkorange"));` 
```

问题：

我需要这个`public final void setBackground(Color color, JPanel contentPane)`方法吗？一切都可以在`createContentPane()`方法内部完成吗？谢谢您的帮助。

```
import java.awt.Color;
import java.awt.Container;
import javax.swing.JPanel;

public final class ContentPaneCreator extends JPanel {

    private static final long serialVersionUID = 1L;

    public static Container createContentPane(String color) {

        JPanel contentPane = new JPanel();

        // awesome txt to Color conversions using the ColorFactory().getColor();
        // written by The Lobo Project
        new ContentPaneCreator().setBackground(
                new ColorFactory().getColor(color), contentPane);

        contentPane.setOpaque(true);
        return contentPane;
    }

    public final void setBackground(Color color, JPanel contentPane) {
        contentPane.setBackground(color);
    }
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T00:59:29.417

回答你的问题 - 我不明白为什么（或者你为什么需要开始，但是干草）。

扩展答案：

应该是：（如果我们正在查看同一段代码）

```
ColorFactory.getInstance().getColor(colorName); 
```

否则，您会在每次实例化时创建颜色图，这只是一种浪费。

我也不确定为什么需要扩展 JPanel，但这不是我的代码：P

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T05:26:30.360

有几件事可能需要更仔细的审查：

*   当您计划扩展`JPanel`时，通过构造函数提供 a`String colorName`并将名称存储在字段中以供以后参考；面板`backgroundColor`是绑定属性。

*   [静态工厂](http://en.wikipedia.org/wiki/Factory_method_pattern),`ColorFactory.getInstance()`应重构为使用按需[*初始化持有者习惯用法*](http://en.wikipedia.org/wiki/Initialization-on-demand_holder_idiom)。

*   代码摘自[Lobo 项目](http://lobobrowser.org/)，可能已经更新。

*   这些[名称](http://www.w3schools.com/cssref/css_colornames.asp)似乎是[标准](http://www.w3.org/TR/css3-color/)的。

# validation - 有条件地验证 cakephp 中的密码更新

> ID：11679986
> 
> 赞同：1
> 
> 时间：2012-07-27T00:36:57.643
> 
> 标签：validation, cakephp, passwords

在用户注册表单中，我有密码和密码2，因此用户必须输入密码 2x，并且在他/她注册之前它们必须彼此相等。在这种情况下，验证规则可以正常工作。在更新用户信息表单中。我将密码和密码 2 都设置为空白，这样如果用户没有在第一个密码字段或密码 2 字段中输入值，那么系统只会将当前密码保存在我的用户模型中的临时变量中。到目前为止，一切都很好。我想要的是触发与注册时相同的所有验证规则，但前提是用户在第一个密码字段中输入了一个值，否则留空并忽略。所以我想这是某种条件验证。

在用户模型中：

```
$validate = array(
'password' =>  array(                           
'password_notempty'=>array(
'rule' => 'notEmpty',
 'message' => 'Required field',
 'on' => 'create')
 ,
 'password_between'=>array(
 'rule' => array('between', 5, 15),
 'message' => 'Between 5 to 15 characters',
 'on' => 'create')
 ,
'password_alphanumeric'=>array(
'rule' => 'alphaNumeric',
'message' => 'Characters and numbers only',
'on' => 'create')
),
'password2' => array(
'password2_isequal' =>array(
'rule' => array('comparePasswords','password'),
'message' => 'Must be same value as password.')
)
); 
```

有人对如何实现这一点有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T00:51:35.150

这应该有助于您入门： http: [//www.dereuromark.de/2011/08/25/working-with-passwords-in-cakephp/](http://www.dereuromark.de/2011/08/25/working-with-passwords-in-cakephp/)

您还可以查看代码以获取有关如何创建所需验证的示例。

基本上，您总是使用不同的字段，并且仅在实际输入某些内容时才将其映射到真实字段。也不要忘记包含一个确认字段（重新输入并确认正确输入的密码）

本文描述了如何在 3-4 行代码中实现所有行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T04:06:03.467

```
read below url :-

http://book.cakephp.org/1.3/view/1143/Data-Validation

http://book.cakephp.org/1.3/view/1152/Core-Validation-Rules 
```

//或者试试这个：-

```
$validate = array(
'new_password' => array(
    'between' => array(
            'rule' => array('between', 5, 20),
            'allowEmpty' => false,
            'message' => 'You password must be between 7 and 20 characters long')),
'password' => array(
    'between' => array(
            'rule' => array('between', 5, 20),
            'allowEmpty' => false,
            'message' => 'You password must be between 7 and 20 characters long')),
 'retype_password'=>array(
    'rule'=>array('equalTo','password'),
    'message'=>'Password does not match'),
'repeat_password'=>array(
    'rule'=>array('equalTo','new_password'),
    'message'=>'Password does not match'),           
); 
```

# ruby - Rspec any_instance 存根导致错误未定义方法__rspec_original_dup

> ID：11679987
> 
> 赞同：3
> 
> 时间：2012-07-27T00:37:23.273
> 
> 标签：ruby, rspec, stub

我正在尝试为类的任何实例（通过 any_instance）存根类方法。我的测试成功运行，但在测试结束时，当 rspec 尝试重置 any_instance 存根时，它会引发错误（无法从回溯中找到匹配的行）。这是明显的罪魁祸首代码行（删除它会消除错误）：

```
Confetti::Config.any_instance.stub(:write_info) 
```

完整的错误如下。似乎存根应该（但未能）创建 __rspec_original_dup 方法，并且当重置发生时，它找不到预期的方法。

```
 Failure/Error: Unable to find matching line from backtrace
 NameError:
   undefined method `__rspec_original_dup' for class `Confetti::Config'
 # /Library/Ruby/Gems/1.8/gems/rspec-mocks-2.11.1/lib/rspec/mocks/any_instance.rb:73:in `alias_method'
 # /Library/Ruby/Gems/1.8/gems/rspec-mocks-2.11.1/lib/rspec/mocks/any_instance.rb:73:in `restore_dup'
 # /Library/Ruby/Gems/1.8/gems/rspec-mocks-2.11.1/lib/rspec/mocks/any_instance.rb:72:in `class_eval'
 # /Library/Ruby/Gems/1.8/gems/rspec-mocks-2.11.1/lib/rspec/mocks/any_instance.rb:72:in `restore_dup'
 # /Library/Ruby/Gems/1.8/gems/rspec-mocks-2.11.1/lib/rspec/mocks/any_instance.rb:46:in `rspec_reset'
 # /Library/Ruby/Gems/1.8/gems/rspec-mocks-2.11.1/lib/rspec/mocks/space.rb:17:in `reset_all'
 # /Library/Ruby/Gems/1.8/gems/rspec-mocks-2.11.1/lib/rspec/mocks/space.rb:16:in `each'
 # /Library/Ruby/Gems/1.8/gems/rspec-mocks-2.11.1/lib/rspec/mocks/space.rb:16:in `reset_all'
 # /Library/Ruby/Gems/1.8/gems/rspec-mocks-2.11.1/lib/rspec/mocks.rb:23:in `teardown'
 # /Library/Ruby/Gems/1.8/gems/rspec-core-2.11.1/lib/rspec/core/mocking/with_rspec.rb:18:in `teardown_mocks_for_rspec'
 # /Library/Ruby/Gems/1.8/gems/rspec-core-2.11.1/lib/rspec/core/example.rb:308:in `run_after_each'
 # /Library/Ruby/Gems/1.8/gems/rspec-core-2.11.1/lib/rspec/core/example.rb:119:in `run'
 # /Library/Ruby/Gems/1.8/gems/rspec-core-2.11.1/lib/rspec/core/example.rb:253:in `with_around_each_hooks'
 # /Library/Ruby/Gems/1.8/gems/rspec-core-2.11.1/lib/rspec/core/example.rb:110:in `run'
 # /Library/Ruby/Gems/1.8/gems/rspec-core-2.11.1/lib/rspec/core/example_group.rb:378:in `run_examples'
 # /Library/Ruby/Gems/1.8/gems/rspec-core-2.11.1/lib/rspec/core/example_group.rb:374:in `map'
 # /Library/Ruby/Gems/1.8/gems/rspec-core-2.11.1/lib/rspec/core/example_group.rb:374:in `run_examples'
 # /Library/Ruby/Gems/1.8/gems/rspec-core-2.11.1/lib/rspec/core/example_group.rb:360:in `run'
 # /Library/Ruby/Gems/1.8/gems/rspec-core-2.11.1/lib/rspec/core/example_group.rb:361:in `run'
 # /Library/Ruby/Gems/1.8/gems/rspec-core-2.11.1/lib/rspec/core/example_group.rb:361:in `map'
 # /Library/Ruby/Gems/1.8/gems/rspec-core-2.11.1/lib/rspec/core/example_group.rb:361:in `run'
 # /Library/Ruby/Gems/1.8/gems/rspec-core-2.11.1/lib/rspec/core/command_line.rb:28:in `run'
 # /Library/Ruby/Gems/1.8/gems/rspec-core-2.11.1/lib/rspec/core/command_line.rb:28:in `map'
 # /Library/Ruby/Gems/1.8/gems/rspec-core-2.11.1/lib/rspec/core/command_line.rb:28:in `run'
 # /Library/Ruby/Gems/1.8/gems/rspec-core-2.11.1/lib/rspec/core/reporter.rb:34:in `report'
 # /Library/Ruby/Gems/1.8/gems/rspec-core-2.11.1/lib/rspec/core/command_line.rb:25:in `run'
 # /Library/Ruby/Gems/1.8/gems/rspec-core-2.11.1/lib/rspec/core/runner.rb:69:in `run'
 # /Library/Ruby/Gems/1.8/gems/rspec-core-2.11.1/lib/rspec/core/runner.rb:8:in `autorun'
 # /usr/bin/rspec:19 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T22:25:46.333

我通过简单地使用 Rspec v2.10.0 而不是 v2.11.0 解决了这个问题：

```
gem 'rspec', '~> 2.10.0' 
```

从 Henrik 提供的链接中，听起来他们可能会发布 Rspec 的错误修复。观看[此问题](https://github.com/rspec/rspec-mocks/issues/168)以获取更多信息。与此同时，降级为我解决了这个问题。

（感谢您帮助我解决这个问题，Henrik。）

# php - 第一个 MySQL UPDATE 在 PHP 中不起作用

> ID：11679988
> 
> 赞同：0
> 
> 时间：2012-07-27T00:37:32.270
> 
> 标签：php, mysql

想不出来这个：

```
$try1 = mysql_query("UPDATE com_users SET `choice_one` = 'president'");
$try2 = mysql_query("UPDATE com_users SET `choice_two` = 'president'");

echo mysql_error($try1);
echo mysql_error($try2); 
```

该 PHP 代码没有回显任何内容并正确更改了choice_two，而不更改choice_one。

```
$try2 = mysql_query("UPDATE com_users SET `choice_two` = 'president'");
$try1 = mysql_query("UPDATE com_users SET `choice_one` = 'president'");

echo mysql_error($try1);
echo mysql_error($try2); 
```

该 PHP 代码没有回显任何内容并正确更改了choice_one，而没有更改choice_two。

这些更新命令的顺序怎么可能导致一个根本不工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T00:40:09.647

查询的顺序无关紧要。如果您没有显示其他代码，请发布...

[`mysql_error()`](http://php.net/manual/en/function.mysql-error.php)的第一个参数不是结果资源，而是连接资源。所以要得到第一个错误，你需要在第一个查询之后立即调用它。

```
$try1 = mysql_query("UPDATE com_users SET `choice_one` = 'president'");
// Call with no parameter right after the query it relates to.
echo mysql_error();

$try2 = mysql_query("UPDATE com_users SET `choice_two` = 'president'");
echo mysql_error(); 
```

请注意，您没有使用`WHERE`子句，所有行都将在第一次更新。第二次尝试运行这些查询（除非您已重置数据），将没有需要更新的行并且查询将无效（`mysql_affected_rows() == 0`）。

# matlab - 如何绘制在 Matlab 中定义的两个变量的函数

> ID：11679992
> 
> 赞同：0
> 
> 时间：2012-07-27T00:37:46.957
> 
> 标签：matlab, plot, matlab-figure

如何在 Matlab 中绘制两个变量的用户定义函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T02:08:09.847

ezsurf 是一个简单的解决方案，或者 ezmesh，或者 ezcontour，或者 ezsurfc，或者 ezmeshc。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T00:42:35.293

```
X, Y = meshgrid(xs, ys); % values of x and y at which we want to evaluate
Z = my_func(X,Y);
surf(X,Y,Z); 
```

或者，如果您的函数未矢量化，

```
X, Y = meshgrid(xs, ys); % values of x and y at which we want to evaluate
for x = 1:length(xs)
  for y = 1:length(ys)
    Z(x,y) = my_func(X(x,y), Y(x,y));
  end
end
Z = my_func(X,Y);
surf(X,Y,Z); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T10:29:04.767

它有很多类型。

您可以去绘图库并选择您的变量，然后选择网格、3D、曲面等类型。

# iphone - 内存管理环境中的objective-c初始化程序

> ID：11679995
> 
> 赞同：0
> 
> 时间：2012-07-27T00:38:09.513
> 
> 标签：iphone

所以我正在尝试为 NSOperation 的子类编写一个初始化程序。这是我第一次使用 NSOperation。我的 NSOperation 子类如下所示：

```
.h
@property (nonatomic, copy) NSString *fileName;

.m
@synthesize fileName = _fileName;

- (id)initWitFileName:(NSString *)fileName  {
    if (self = [super init]) {
        _fileName = fileName;
    }
    return self;
}

- (void)dealloc {
    [_fileName release];
    [super dealloc];
}

- (void)main {
  // do long task
} 
```

所以我想当我创建自己的初始化程序时，我应该自己设置 ivar，因为对象的状态在 init 方法中是不确定的。所以我不在初始化程序中使用访问器。当我的主要方法运行时，我得到一个内存错误访问和崩溃。但是，在我的 init 方法中，如果我这样做：

```
- (id)initWitFileName:(NSString *)fileName  {
        if (self = [super init]) {
            _fileName = [fileName retain];
        }
        return self;
    } 
```

我没有崩溃。什么是正确的？我认为在第二种情况下我不会释放内存，因为访问器是（复制）。或者是因为我不使用访问器，所以我的 fileName 对象基本上只是因为 initWithFileName 方法中没有 +1 而被释放？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T01:12:33.277

第二个很接近，但是：

```
- (id)initWitFileName:(NSString *)fileName  
{
    if (self = [super init]) {
        _fileName = [fileName copy];
    }
    return self;
} 
```

更常见，因为`NSString*`属性通常用`(nonatomic, copy)`.

`NSMutableString`这样做是为了避免调用者实际传递 a并随后更改值时出现问题或意外后果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T01:21:25.557

当您`@synthesize`具有一组属性时，您正在为对象生成 getter 和 setter。这允许您使用类似的方法

```
[self setFilename:@"MyFile.txt"] 
```

或者

```
self.filename = @"MyFile.txt" 
```

上面两行的功能完全相同，并且可以这样实现：

```
- (void)setFilename:(NSString *)string {
    _filename = [string copy];
    // Or, for a retained property:
    // _filename = [string retain];
} 
```

这个实现被过度简化了。请参阅下面 idz 的评论，以更好地理解真正的 setter 将使用的逻辑。

* * *

在上面的示例中，您只是使用`=`运算符，而不是生成的函数。

```
_fileName = fileName; 
```

因此，您只需将地址设置为`_fileName`to `fileName`。您的所有`synthesize`属性都无关紧要，在这里也没有什么不同。

你的解释：

> 是不是因为我不使用访问器，所以我的 fileName 对象基本上只是因为 initWithFileName 方法中没有 +1 而被释放？

完全正确。要正确复制`copy`合成器使用的属性，请使用以下命令：

```
_fileName = [fileName copy]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T23:56:00.120

想法 1：使用 ARC。在 ARC 中，您需要声明您的 ivar strong，然后使用合成的 setter 或直接分配 ivar。将为您添加保留，一切都会好起来的。

想法2：使用保留。如果由于某种原因您无法使用 ARC，为什么不将 NSString 声明为保留，而不是复制？保持不变事物的同一个实例是可以的。（共享一个可变的东西也是有用的，只要两个类都明白他们正在这样做）。

思路3：如果一定要用非arc，而且一定要用copy，把ivar设置成copy。这将通过复制来修复您的崩溃。就像现在一样，代码将句柄复制到传递的字符串，但不是它的内容。传递的字符串是dealloc'd，你的班级被僵尸卡住了。你可以说 _filename = [string copy]; 正如其他人所建议的那样。

作为旁注，调用 self = [super init]; 在重写的 init 方法中是正确的。由于您正在制作自己的 init 变体，我认为调用 self = [self init]; 更合适

# android - 使用 Intent.ACTION_GET_CONTENT 选择一个文件

> ID：11679996
> 
> 赞同：0
> 
> 时间：2012-07-27T00:38:09.157
> 
> 标签：android, android-intent, android-file

我正在关注本[教程](http://android-er.blogspot.com/2011/03/pick-file-using-intentactiongetcontent.html)，我正在模拟器上对其进行测试，当我运行这个项目并单击它崩溃的按钮并给我以下错误时

```
07-27 06:33:30.324: E/AndroidRuntime(10972): FATAL EXCEPTION: main
07-27 06:33:30.324: E/AndroidRuntime(10972): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.GET_CONTENT typ=file/ * }
07-27 06:33:30.324: E/AndroidRuntime(10972):    at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1408)
07-27 06:33:30.324: E/AndroidRuntime(10972):    at android.app.Instrumentation.execStartActivity(Instrumentation.java:1378)
07-27 06:33:30.324: E/AndroidRuntime(10972):    at android.app.Activity.startActivityForResult(Activity.java:2817)
07-27 06:33:30.324: E/AndroidRuntime(10972):    at com.exercise.AndroidPick_a_File.AndroidPick_a_File$1.onClick(AndroidPick_a_File.java:35)
07-27 06:33:30.324: E/AndroidRuntime(10972):    at android.view.View.performClick(View.java:2408)
07-27 06:33:30.324: E/AndroidRuntime(10972):    at android.view.View$PerformClick.run(View.java:8816)
07-27 06:33:30.324: E/AndroidRuntime(10972):    at android.os.Handler.handleCallback(Handler.java:587)
07-27 06:33:30.324: E/AndroidRuntime(10972):    at android.os.Handler.dispatchMessage(Handler.java:92)
07-27 06:33:30.324: E/AndroidRuntime(10972):    at android.os.Looper.loop(Looper.java:123)
07-27 06:33:30.324: E/AndroidRuntime(10972):    at android.app.ActivityThread.main(ActivityThread.java:4627)
07-27 06:33:30.324: E/AndroidRuntime(10972):    at java.lang.reflect.Method.invokeNative(Native Method)
07-27 06:33:30.324: E/AndroidRuntime(10972):    at java.lang.reflect.Method.invoke(Method.java:521)
07-27 06:33:30.324: E/AndroidRuntime(10972):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
07-27 06:33:30.324: E/AndroidRuntime(10972):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
07-27 06:33:30.324: E/AndroidRuntime(10972):    at dalvik.system.NativeStart.main(Native Method) 
```

我想处理这个错误，请帮助我处理这个错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T00:53:30.610

你有这个错误，因为你没有在模拟器上文件资源管理器应用程序。

如果要测试是否安装了文件资源管理器：

```
final PackageManager packageManager = getActivity().getPackageManager();
final Intent intent = new Intent(Intent.ACTION_GET_CONTENT); 
intent.setType("file/*");
List<ResolveInfo> list = packageManager.queryIntentActivities(intent,
                                PackageManager.GET_ACTIVITIES);

if (list.size() > 0) {
    //app installed
} else {
    //no app
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-14T00:16:34.657

如在类似问题中所见（[https://stackoverflow.com/a/34181925/4098711](https://stackoverflow.com/a/34181925/4098711)）。假设您在一个活动中（否则用返回当前活动的方法替换它）：

```
final PackageManager packageManager = this.getPackageManager();
final Intent intent = new Intent(Intent.ACTION_GET_CONTENT);
intent.setType("file/*");
ComponentName testedActivity = intent.resolveActivity(getPackageManager());
if (testedActivity != null) {
    startActivityForResult(intent,IMPORT_FILE_REQ_CODE);
} else {
    Toast.makeText(this,"No file explorer available",Toast.LENGTH_LONG).show();
} 
```

# php - 路径“OperationC->columns->relations”中名为“User”的无效架构元素

> ID：11679999
> 
> 赞同：0
> 
> 时间：2012-07-27T00:38:45.897
> 
> 标签：php, doctrine, symfony-1.4

当我尝试构建模型时，出现此错误：

> 路径“OperationC->columns->relations”中名为“User”的无效架构元素

这是我的 schema.yml ：

```
Contact:
  connection: doctrine
  tableName: contact
  columns:

    id_contact:
      type: integer(2)
      fixed: false
      unsigned: false
      primary: true
      autoincrement: true
    nom:
      type: string(30)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    fonction_organisme:
      type: string(1000)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    categorie:
      type: string(300)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    region:
      type: string(1000)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    province:
      type: string(500)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    adresse:
      type: string(1000)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    tel1:
      type: string(30)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    tel2:
      type: string(30)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    tel3:
      type: string(30)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    tel4:
      type: string(30)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    email:
      type: string(30)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    fax:
      type: string(30)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    ville:
      type: string(50)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    journal:
      type: string(2000)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    commentaire:
      type: string(2000)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    fix:
      type: string(30)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    image:
      type: string(30)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    owner:
      type: string(30)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
  relations:
    Evenement:
      local: id_contact
      foreign: id_contact_event
      type: many
    Users : 
      class :   User
      refclass : Operation_contact
      foreignAlias : Contact  
Courrier:
  connection: doctrine
  tableName: courrier
  columns:
    num_serie:
      type: integer(2)
      fixed: false
      unsigned: false
      primary: true
      autoincrement: false
    annee:
      type: integer(2)
      fixed: false
      unsigned: false
      primary: true
      autoincrement: false
    num_c:
      type: integer(2)
      fixed: false
      unsigned: false
      primary: false
      notnull: true
      autoincrement: false
    exp:
      type: string(500)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    dest:
      type: string(500)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    state:
      type: string(10)
      fixed: false
      unsigned: false
      primary: false
      notnull: true
      autoincrement: false
    objet:
      type: string(1000)
      fixed: false
      unsigned: false
      primary: false
      notnull: true
      autoincrement: false
    image_c:
      type: string(500)
      fixed: false
      unsigned: false
      primary: false
      notnull: true
      autoincrement: false
    date_recep:
      type: date(25)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    date_env:
      type: date(25)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    owner_c:
      type: string(30)
      fixed: false
      unsigned: false
      primary: false
      notnull: true
      autoincrement: false
    user_c:
      type: string(30)
      fixed: false
      unsigned: false
      primary: false
      notnull: true
      autoincrement: false
    type_c:
      type: string(500)
      fixed: false
      unsigned: false
      primary: false
      notnull: true
      autoincrement: false
  relations : 
    Users : 
      class : User
      refclass : Operation_c
      foreignAlias : Courriers
Evenement:
  connection: doctrine
  tableName: evenement
  columns:
    id_event:
      type: integer(2)
      fixed: false
      unsigned: false
      primary: true
      autoincrement: true
    date:
      type: date(25)
      fixed: false
      unsigned: false
      primary: false
      notnull: true
      autoincrement: false
    action:
      type: string(2000)
      fixed: false
      unsigned: false
      primary: false
      notnull: true
      autoincrement: false
    id_contact_event:
      type: integer(2)
      fixed: false
      unsigned: false
      primary: false
      notnull: true
      autoincrement: false
  relations:
    Contact:
      local: id_contact_event
      foreign: id_contact
      type: one
OperationC:
  connection: doctrine
  tableName: operation_c
  columns:
    id_user:
      type: integer(2)
      fixed: false
      unsigned: false
      primary: true
      autoincrement: false
    num_serie:
      type: integer(2)
      fixed: false
      unsigned: false
      primary: true
      autoincrement: false
    operation_c:
      type: string(2000)
      fixed: false
      unsigned: false
      primary: false
      notnull: true
      autoincrement: false
    date_op_c:
      type: date(25)
      fixed: false
      unsigned: false
      primary: false
      notnull: true
      autoincrement: false
    relations : 
      User : { onDelete : CASCADE }
      Courrier : { onDelete : CASCADE }
OperationContact:
  connection: doctrine
  tableName: operation_contact
  columns:
    id_contact:
      type: integer(2)
      fixed: false
      unsigned: false
      primary: true
      autoincrement: false
    id_user:
      type: integer(2)
      fixed: false
      unsigned: false
      primary: true
      autoincrement: false
    operation:
      type: string(2000)
      fixed: false
      unsigned: false
      primary: false
      notnull: true
      autoincrement: false
    date_op:
      type: date(25)
      fixed: false
      unsigned: false
      primary: false
      notnull: true
      autoincrement: false
  relations : 
      User : { onDelete : CASCADE }
      Courrier : { onDelete : CASCADE }
User:
  connection: doctrine
  tableName: user
  columns:
    id_user:
      type: integer(2)
      fixed: false
      unsigned: false
      primary: true
      autoincrement: true
    nom_user:
      type: string(30)
      fixed: false
      unsigned: false
      primary: false
      notnull: true
      autoincrement: false
    adresse_user:
      type: string(2000)
      fixed: false
      unsigned: false
      primary: false
      notnull: true
      autoincrement: false
    tel_user:
      type: string(30)
      fixed: false
      unsigned: false
      primary: false
      notnull: true
      autoincrement: false
    login:
      type: string(30)
      fixed: false
      unsigned: false
      primary: false
      notnull: true
      autoincrement: false
    password:
      type: string(30)
      fixed: false
      unsigned: false
      primary: false
      notnull: true
      autoincrement: false 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T07:37:24.473

你有很多错误`schema.yml`：

*   `reclass`应该是`refClass`。
*   你对一些人做了一些不好的缩进`relations`（这是你描述的错误）
*   命名表/关系有一些错误（for `Operation_contact`and `Operation_c`）

这是您的工作和固定`schema.yml`：

```
Contact:
  connection: doctrine
  tableName: contact
  columns:

    id_contact:
      type: integer(2)
      fixed: false
      unsigned: false
      primary: true
      autoincrement: true
    nom:
      type: string(30)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    fonction_organisme:
      type: string(1000)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    categorie:
      type: string(300)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    region:
      type: string(1000)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    province:
      type: string(500)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    adresse:
      type: string(1000)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    tel1:
      type: string(30)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    tel2:
      type: string(30)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    tel3:
      type: string(30)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    tel4:
      type: string(30)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    email:
      type: string(30)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    fax:
      type: string(30)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    ville:
      type: string(50)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    journal:
      type: string(2000)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    commentaire:
      type: string(2000)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    fix:
      type: string(30)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    image:
      type: string(30)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    owner:
      type: string(30)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
  relations:
    Evenement:
      local: id_contact
      foreign: id_contact_event
      type: many
    Users :
      class :   User
      refClass : OperationContact
      foreignAlias : Contact
Courrier:
  connection: doctrine
  tableName: courrier
  columns:
    num_serie:
      type: integer(2)
      fixed: false
      unsigned: false
      primary: true
      autoincrement: false
    annee:
      type: integer(2)
      fixed: false
      unsigned: false
      primary: true
      autoincrement: false
    num_c:
      type: integer(2)
      fixed: false
      unsigned: false
      primary: false
      notnull: true
      autoincrement: false
    exp:
      type: string(500)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    dest:
      type: string(500)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    state:
      type: string(10)
      fixed: false
      unsigned: false
      primary: false
      notnull: true
      autoincrement: false
    objet:
      type: string(1000)
      fixed: false
      unsigned: false
      primary: false
      notnull: true
      autoincrement: false
    image_c:
      type: string(500)
      fixed: false
      unsigned: false
      primary: false
      notnull: true
      autoincrement: false
    date_recep:
      type: date(25)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    date_env:
      type: date(25)
      fixed: false
      unsigned: false
      primary: false
      notnull: false
      autoincrement: false
    owner_c:
      type: string(30)
      fixed: false
      unsigned: false
      primary: false
      notnull: true
      autoincrement: false
    user_c:
      type: string(30)
      fixed: false
      unsigned: false
      primary: false
      notnull: true
      autoincrement: false
    type_c:
      type: string(500)
      fixed: false
      unsigned: false
      primary: false
      notnull: true
      autoincrement: false
  relations :
    Users :
      class : User
      refClass : OperationC
      foreignAlias : Courriers
Evenement:
  connection: doctrine
  tableName: evenement
  columns:
    id_event:
      type: integer(2)
      fixed: false
      unsigned: false
      primary: true
      autoincrement: true
    date:
      type: date(25)
      fixed: false
      unsigned: false
      primary: false
      notnull: true
      autoincrement: false
    action:
      type: string(2000)
      fixed: false
      unsigned: false
      primary: false
      notnull: true
      autoincrement: false
    id_contact_event:
      type: integer(2)
      fixed: false
      unsigned: false
      primary: false
      notnull: true
      autoincrement: false
  relations:
    Contact:
      local: id_contact_event
      foreign: id_contact
      type: one
OperationC:
  connection: doctrine
  tableName: OperationC
  columns:
    id_user:
      type: integer(2)
      fixed: false
      unsigned: false
      primary: true
      autoincrement: false
    num_serie:
      type: integer(2)
      fixed: false
      unsigned: false
      primary: true
      autoincrement: false
    OperationC:
      type: string(2000)
      fixed: false
      unsigned: false
      primary: false
      notnull: true
      autoincrement: false
    date_op_c:
      type: date(25)
      fixed: false
      unsigned: false
      primary: false
      notnull: true
      autoincrement: false
  relations :
    User : { onDelete : CASCADE }
    Courrier : { onDelete : CASCADE }
OperationContact:
  connection: doctrine
  tableName: OperationContact
  columns:
    id_contact:
      type: integer(2)
      fixed: false
      unsigned: false
      primary: true
      autoincrement: false
    id_user:
      type: integer(2)
      fixed: false
      unsigned: false
      primary: true
      autoincrement: false
    operation:
      type: string(2000)
      fixed: false
      unsigned: false
      primary: false
      notnull: true
      autoincrement: false
    date_op:
      type: date(25)
      fixed: false
      unsigned: false
      primary: false
      notnull: true
      autoincrement: false
  relations :
    User : { onDelete : CASCADE }
    Courrier : { onDelete : CASCADE }
User:
  connection: doctrine
  tableName: user
  columns:
    id_user:
      type: integer(2)
      fixed: false
      unsigned: false
      primary: true
      autoincrement: true
    nom_user:
      type: string(30)
      fixed: false
      unsigned: false
      primary: false
      notnull: true
      autoincrement: false
    adresse_user:
      type: string(2000)
      fixed: false
      unsigned: false
      primary: false
      notnull: true
      autoincrement: false
    tel_user:
      type: string(30)
      fixed: false
      unsigned: false
      primary: false
      notnull: true
      autoincrement: false
    login:
      type: string(30)
      fixed: false
      unsigned: false
      primary: false
      notnull: true
      autoincrement: false
    password:
      type: string(30)
      fixed: false
      unsigned: false
      primary: false
      notnull: true
      autoincrement: false 
```