# StackOverflow 问答 12240000-12240999

# c++ - 如何在 C++ 中逐个字符地读取文本文件

> ID：12240010
> 
> 赞同：23
> 
> 时间：2012-09-02T21:50:34.490
> 
> 标签：c++, file, text, character

我想知道是否有人可以帮助我弄清楚如何逐个字符地读取 C++ 中的文本文件。这样，我可以有一个 while 循环（虽然还剩下文本），我将文本文档中的下一个字符存储在一个临时变量中，这样我就可以用它做一些事情，然后用下一个字符重复这个过程。我知道如何打开文件和所有内容，但`temp = textFile.getchar()`似乎不起作用。提前致谢。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-09-02T21:54:33.303

您可以尝试以下方法：

```
char ch;
fstream fin("file", fstream::in);
while (fin >> noskipws >> ch) {
    cout << ch; // Or whatever
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-02T22:42:53.487

@cnicutar 和@Pete Becker 已经指出了使用`noskipws`/unsetting`skipws`一次读取一个字符而不跳过输入中的空白字符的可能性。

另一种可能性是使用 an`istreambuf_iterator`来读取数据。除此之外，我通常会使用标准算法`std::transform`来进行读取和处理。

举个例子，假设我们想做一个类似凯撒的密码，从标准输入复制到标准输出，但是每个大写字符加 3，所以`A`会变成`D`，`B`可能变成`E`，等等（最后，它会环绕所以`XYZ`转换为`ABC`.

如果我们要在 C 中这样做，我们通常会使用这样的循环：

```
int ch;
while (EOF != (ch = getchar())) {
    if (isupper(ch)) 
        ch = ((ch - 'A') +3) % 26 + 'A';
    putchar(ch);
} 
```

要在 C++ 中做同样的事情，我可能会编写更像这样的代码：

```
std::transform(std::istreambuf_iterator<char>(std::cin),
               std::istreambuf_iterator<char>(),
               std::ostreambuf_iterator<char>(std::cout),
               [](int ch) { return isupper(ch) ? ((ch - 'A') + 3) % 26 + 'A' : ch;}); 
```

以这种方式完成这项工作，您会收到连续字符作为传递给（在这种情况下）lambda 函数的参数值（尽管如果您愿意，可以使用显式仿函数而不是 lambda）。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-09-02T22:06:12.883

引用 Bjarne Stroustrup 的话：“>> 运算符用于格式化输入；也就是说，读取预期类型和格式的对象。如果不希望这样做并且我们希望将字符读取为字符然后检查它们，我们使用 get （） 功能。”

```
char c;
while (input.get(c))
{
    // do something with c
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-08T06:23:23.847

```
 //Variables
    char END_OF_FILE = '#';
    char singleCharacter;

    //Get a character from the input file
    inFile.get(singleCharacter);

    //Read the file until it reaches #
    //When read pointer reads the # it will exit loop
    //This requires that you have a # sign as last character in your text file

    while (singleCharacter != END_OF_FILE)
    {
         cout << singleCharacter;
         inFile.get(singleCharacter);
    }

   //If you need to store each character, declare a variable and store it
   //in the while loop. 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-12-02T10:40:39.583

这是一个 c++ 时尚的函数，您可以使用它来逐个字符地读取文件。

```
void readCharFile(string &filePath) {
    ifstream in(filePath);
    char c;

    if(in.is_open()) {
        while(in.good()) {
            in.get(c);
            // Play with the data
        }
    }

    if(!in.eof() && in.fail())
        cout << "error reading " << filePath << endl;

    in.close();
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-09-02T21:54:00.347

回复：`textFile.getch()`，你是自己编的，还是有参考资料说它应该有效？如果是后者，请摆脱它。如果是前者，请不要这样做。得到一个很好的参考。

```
char ch;
textFile.unsetf(ios_base::skipws);
textFile >> ch; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-02T21:55:15.747

假设它`temp`是一个`char` 并且`textFile`是一个`std::fstream`导数......

您正在寻找的语法是

```
textFile.get( temp ); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-09-02T21:56:32.260

没有理由不在`<stdio.h>`C++ 中使用 C，事实上它通常是最佳选择。

```
#include <stdio.h>

int
main()  // (void) not necessary in C++
{
    int c;
    while ((c = getchar()) != EOF) {
        // do something with 'c' here
    }
    return 0; // technically not necessary in C++ but still good style
} 
```

# forms - onfocus 表单不起作用

> ID：12240011
> 
> 赞同：0
> 
> 时间：2012-09-02T21:50:41.330
> 
> 标签：forms, onfocus

我今天只是在检查我最新的网站创建，并确保表单没有问题，由于某种原因，街道地址的 onfocus 不起作用，onblur 工作正常，所有其他文本输入都与 onfocus 和 onblur 一起工作。我已经查看了 30 分钟的代码，但我终其一生都无法弄清楚出了什么问题。我需要一双新的眼睛来检查我做错了什么。下面是代码，街道地址是行不通的。（聚焦）

```
<h2>Contact Form</h2>

<label for="name"></label><input type="text" name="name" size="26" value="Name" style="color: #775594;" onblur="if(this.value==''){this.value='Name'}" onfocus="if(this.value=='Name'){this.value=''}" /><br /> 
<label for="email"></label><input type="text" name="email" size="26" value="Email" style="color: #775594;" onblur="if(this.value==''){this.value='Email'}" onfocus="if(this.value=='Email'){this.value=''}" /><br /> 
<label for="phone"></label><input type="text" name="phone" maxlength="13" size="26" value="Phone" style="color: #775594;" onblur="if(this.value==''){this.value='Phone'}" onfocus="if(this.value=='Phone'){this.value=''}" /><br /> 
<label for="street"></label><input type="text" name="street" size="26" value="Street Address" style="color: #775594;" onblur="if(this.value==''){this.value='Street Address'}" onfocus="if(this.value=='Street Adress'){this.value=''}" /><br /> 
<label for="city"></label><input type="text" name="city" size="10" value="City" style="color: #775594;" onblur="if(this.value==''){this.value='City'}" onfocus="if(this.value=='City'){this.value=''}" /> 
<label for="zip"></label><input type="text" name="zip" maxlength="5" size="10" value="Zip Code" style="color: #775594;" onblur="if(this.value==''){this.value='Zip Code'}" onfocus="if(this.value=='Zip Code'){this.value=''}" /><br />

<p class="center"><input type="submit" value="Send" /></p>
</fieldset></form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T22:06:27.437

我看到一个错字：

```
onfocus="if(this.value=='Street Adress') 
```

地址缺少 d。

# java - 通过设置静态字段禁用一个静态方法调用的 if-Condition

> ID：12240017
> 
> 赞同：3
> 
> 时间：2012-09-02T21:51:33.943
> 
> 标签：java, coding-style, static-methods, static-members

我们有一个类，在我们的项目中将其命名为 AttributeUpdater，用于处理将值从一个实体复制到另一个实体。核心方法遍历一个实体的属性并将它们按指定复制到第二个中。在该循环期间，AttributeUpdater 将所有报告（其中包含有关在复制期间被覆盖的值的信息）收集到一个很好的列表中，以用于最终记录目的。如果值被覆盖的旧实体从未保存到数据库中，则删除此列表，因为在这种情况下，您只会覆盖默认值和被认为是多余的日志记录。在伪 Java 代码中：

```
public class AttributeUpdater {
  public static CopyResult updateAttributes(Entity source, Entity target, String[] attributes) {
    List<CopyReport> reports = new ArrayList<CopyReport>();
    for(String attribute : attributes) {
          reports.add(copy(source, target, attribute));
    }
    if(target.isNotPersisted()) {
      reports.clear();
    }
    return new CopyResult(reports);
  }
} 
```

现在有人顿悟了，在这种情况下，即使实体尚未持久化，报告实际上也很重要。如果我可以在方法签名中添加另一个参数，这不会有什么大不了的，但由于类的实际结构和所需的折射量，这在某种程度上是不可选择的。由于该方法是静态的，我想出的唯一其他解决方案是将标志添加为静态字段并在函数调用之前设置它。

```
public class AttributeUpdater {

  public static final ThreadLocal<Boolean> isDeletionEnabled = new ThreadLocal<Boolean> {
      @Override protected Boolean initialValue() {
             return Boolean.TRUE;
      }      

  public static Boolean getDeletionEnabled() { return isDeletionEnabled.get(); }
  public static void setDeletionEnabled(Boolean b) { isDeletionEnabled.set(b); }

  public static CopyResult updateAttributes(Entity source, Entity target, String[] attributes) {
    List<CopyReport> reports = new ArrayList<CopyReport>();
    for(String attribute : attributes) {
          reports.add(copy(source, target, attribute));
    }
    if(isDeletionEnabled.get() && target.isNotPersisted()) {
      reports.clear();
    }
    return new CopyResult(reports);
  }
} 
```

ThreadLocal 是一个用于线程安全的容器。这个解决方案虽然可以完成工作，但至少对我来说有一个主要缺点：对于所有其他假设报告已删除的方法，现在无法保证这些报告将按预期删除。再次折射不是一种选择。所以我想出了这个：

公共类 AttributeUpdater {

```
 private static final ThreadLocal<Boolean> isDeletionEnabled = new ThreadLocal<Boolean> {
      @Override protected Boolean initialValue() {
             return Boolean.TRUE;
      }      

  public static Boolean getDeletionEnabled() { return isDeletionEnabled.get(); }
  public static void disableDeletionForNextCall() { isDeletionEnabled.set(Boolean.FALSE); }

  public static CopyResult updateAttributes(Entity source, Entity target, String[] attributes) {
    List<CopyReport> reports = new ArrayList<CopyReport>();
    for(String attribute : attributes) {
          reports.add(copy(source, target, attribute));
    }
    if(isDeletionEnabled.get() && target.isNotPersisted()) {
      reports.clear();
    }
    isDeletionEnabled.set(Boolean.TRUE);
    return new CopyResult(reports);
  }
} 
```

这样，我可以保证对于旧代码，该函数将始终像更改前一样工作。这个解决方案的缺点是，特别是对于嵌套实体，我将经常访问 ThreadLocal-Container - 迭代其中一个意味着为每个嵌套元素调用 disableDeletionForNextCall()。此外，由于该方法被大量调用，因此存在有效的性能问题。

TL;DR：查看伪 Java 源代码。第一个是旧代码，第二个和第三个是允许删除禁用的不同尝试。参数不能添加到方法签名中。

是否有可能确定哪种解决方案更好，或者这仅仅是一个哲学问题？还是有更好的解决方案来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T22:33:27.790

决定哪种解决方案在性能方面更好的明显方法是对此进行基准测试。由于两种解决方案都访问线程局部变量至少是为了读取，我怀疑它们会相差太大。你也许可以像这样组合它们：

```
if(!isDeletionEnabled.get())
  isDeletionEnabled.set(Boolean.TRUE);
else if (target.isNotPersisted())
  reports.clear(); 
```

在这种情况下，您将受益于第二种解决方案（保证重置标志）而无需进行不必要的写入。

我怀疑会有很大的实际差异。运气好的话，HotSpot JVM 会将线程局部变量编译成一些不错的本机代码，虽然我没有实际经验，但它在工作时不会有太多的性能损失。

# android - 在 netbeans 中将 playN android 应用程序部署到手机的问题

> ID：12240018
> 
> 赞同：0
> 
> 时间：2012-09-02T21:51:45.760
> 
> 标签：android, netbeans, playn

我一直在为这个设置苦苦挣扎一段时间。我一直在尝试使用[此处](http://www.gamefromscratch.com/post/2012/05/24/Using-Netbeans-712-with-PlayN-13.aspx)的教程在 netbeans 上设置带有 playN 库的项目。

该项目构建良好，并将作为桌面 Java 应用程序和 Web 应用程序运行。我可以将项目构建为一个 android 应用程序，但它不会部署到我的手机（我有 Galaxy Nexus）或 AVD。

日志看起来不错...

```
------------------------------------------------------------------------
Building playndemo Android 1.3
------------------------------------------------------------------------

[android:deploy]
C:\android\platform-tools\aapt.exe [dump, xmltree,     C:\Users\Kyle\Documents\NetBeansProjects\playndemo\android\target\playndemo-android-    1.3.apk, AndroidManifest.xml]
N: android=http://schemas.android.com/apk/res/android
E: manifest (line=2)
A: android:screenOrientation(0x0101001e)=(type 0x10)0x0
A: android:versionCode(0x0101021b)=(type 0x10)0x1
A: android:versionName(0x0101021c)="1.0" (Raw: "1.0")
A: package="com.kashank.demo.playndemo.android" (Raw: "com.kashank.demo.playndemo.android")
E: uses-sdk (line=7)
  A: android:minSdkVersion(0x0101020c)=(type 0x10)0x6
  A: android:targetSdkVersion(0x01010270)=(type 0x10)0xb
E: application (line=8)
  A: android:label(0x01010001)=@0x7f030000
  A: android:icon(0x01010002)=@0x7f020000
  A: android:debuggable(0x0101000f)=(type 0x12)0xffffffff
  E: activity (line=9)
    A: android:theme(0x01010000)=@0x1030007
    A: android:label(0x01010001)=@0x7f030000
    A: android:name(0x01010003)="playndemoActivity" (Raw: "playndemoActivity")
    A: android:configChanges(0x0101001f)=(type 0x11)0xa0
    E: intent-filter (line=13)
      E: action (line=14)
        A: android:name(0x01010003)="android.intent.action.MAIN" (Raw: "android.intent.action.MAIN")
      E: category (line=15)
        A: android:name(0x01010003)="android.intent.category.LAUNCHER" (Raw: "android.intent.category.LAUNCHER")
Waiting for initial device list from the Android Debug Bridge
Found 1 devices connected with the Android Debug Bridge
android.device parameter set to usb
Device 0A3C0D3C02008015_samsung_GalaxyNexus found.
Successfully uninstalled com.kashank.demo.playndemo.android from     0A3C0D3C02008015_samsung_GalaxyNexus
Found 1 devices connected with the Android Debug Bridge
android.device parameter set to usb
Device 0A3C0D3C02008015_samsung_GalaxyNexus found.
Successfully installed     C:\Users\Kyle\Documents\NetBeansProjects\playndemo\android\target\playndemo-android-1.3.apk    to 0A3C0D3C02008015_samsung_GalaxyNexus

------------------------------------------------------------------------
Building playndemo Android 1.3
------------------------------------------------------------------------

[android:run]
Found 1 devices connected with the Android Debug Bridge
android.device parameter set to usb
Device 0A3C0D3C02008015_samsung_GalaxyNexus found.
Attempting to start com.kashank.demo.playndemo.androidplayndemoActivity on device     0A3C0D3C02008015 (avdName = null)
------------------------------------------------------------------------
BUILD SUCCESS
------------------------------------------------------------------------
Total time: 5.695s
Finished at: Sun Sep 02 17:15:58 EDT 2012
Final Memory: 6M/15M
------------------------------------------------------------------------ 
```

另一个奇怪的是，netbeans 实际上确实看到了我的手机，我可以从手机主屏幕的 netbeans 中启动屏幕截图。

# python - Python xml 字符串操作 - 添加标签

> ID：12240021
> 
> 赞同：0
> 
> 时间：2012-09-02T21:52:07.793
> 
> 标签：python, xml, django, string, xml-parsing

我正在对 xml 文件进行字符串操作。我打开文件，使用我通过查询 for 循环收到的字符串进行操作，然后保存文件。我必须添加两个括号，例如`<document>`xml 文件的开头和文件`</document>`的结尾一次。下面是我的代码。任何想法 ？

```
def xml(request):
    filename = "/usr/..../...."  
    programs = x.objects.all()
    categories = y.objects.all()

    with open(filename,'r+') as f:  

        old = f.read()
        for m,k in itertools.product(categories,programs):
            if k.name_tr == m.name_tr:
                s = old.replace ('titlesss',k.name_tr,1) 
                j= k.introduction_tr
                decoded = BeautifulStoneSoup(j, convertEntities=BeautifulStoneSoup.HTML_ENTITIES)
                x =str(decoded)
                x = unicode(x,"utf-8")
                s = s.replace ("infosss",x,1)
                if  m.id == 310:
                        s = s.replace('idsss',"231",1)
                elif m.id == 308:
                        s = s.replace ('idsss',"230",1)
                elif m.id == 159:
                        s = s.replace ('idsss',"203",1)
                elif m.id == 163:
                        s = s.replace ('idsss',"204",1)
                elif m.id == 280:
                        s = s.replace ('idsss',"212",1)
                elif m.id == 157:
                        s = s.replace ('idsss',"202",1)
                elif m.id == 282:
                        s = s.replace ('idsss',"211",1)
                s = smart_str(s)
                w.write(s)
        return HttpResponseRedirect("asd.xml") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T22:09:10.683

我建议您使用[etree 模块](http://docs.python.org/library/xml.etree.elementtree.html)进行 xml 操作。只需让它解析树，对其进行操作，然后将其写回文件。

# c# - 如何使用全尺寸网格制作水平风格的地铁应用程序？

> ID：12240022
> 
> 赞同：0
> 
> 时间：2012-09-02T21:52:19.440
> 
> 标签：c#, windows-8, microsoft-metro, visual-studio-2012

![在此处输入图像描述](../Images/4b6387e02e1d30e625e394e1c868968e.png)

您将如何使滚动查看器包含两个屏幕大小的网格？

我想到的一件事是以编程方式将网格大小设置为屏幕大小，但我想 MS 有更好的解决方案。

我想出的分组：

```
<SematicZoom.ZoomedIn>
  <ScrollViewer //Horizontal>
    <StackPanel //Orientation is Horizontal>
       <Grid Height = "{Binding ScreenHeight}" Width = "{Binding ScreenWidth}">
          //Content
       </Grid>
       <Grid Height = "{Binding ScreenHeight}" Width = "{Binding ScreenWidth}">
          //Content
       </Grid>

    </StackPanel>
  </ScrollViewer>
</SematicZoom.ZoomedIn> 
```

# php - 如何在不使用 PHP 目录的情况下创建 URL 路径？

> ID：12240024
> 
> 赞同：3
> 
> 时间：2012-09-02T21:52:24.060
> 
> 标签：php, apache, url-rewriting

我正在尝试在 PHP 中创建 URL 并在**if 语句中使用路径 (** ***$path*** ) 。

 **在工作中，我们使用 ASP Classic 并有一些文件允许我们执行以下操作：

```
<%
 if path = "checkout" then

 <!--#include file="ViewCheckout.asp"-->

 elseif path = "billing" then

 <!--#include file="ViewBilling.asp"-->

 end if
%> 
```

我们几乎可以在我们网站的任何地方使用' **if path = "checkout" '。**奇怪的是，“ **http://myworksite.com/checkout/** ”是**结帐**页面的 URL，但我们的服务器上没有名为“**结帐**”的目录……以上只是其中的几个列表' **if path = "blah"** ' 包括出现在我们的 'start.asp' （包含页面基本模板的文件）中的内容。

我见过像 ParseURL.asp 和其他文件（在工作中）以某种方式创建这些 URL 并允许我们在全球范围内使用它们。我正在尝试了解这是如何在 PHP 中完成的（在工作中，我们运行 Windows Server，我有一个 Linux 机器）。

**我想要做的是为他们各自的页面创建以下 URL：**

*   [http://mysite.com/browse/](http://mysite.com/browse/) -browse.php
*   [http://mysite.com/contact/](http://mysite.com/contact/) -contact.php
*   [http://mysite.com/top100/](http://mysite.com/top100/) - top100.php

*再一次，我想创建这些 URL**而不**为路径创建目录。*

我已经阅读了***http_build_url***和***parse_url***，但是我很难确定以上述方式创建 URL 的方式。

**我发现的 http_build_url 教程显示了这一点：**

```
<?php
echo http_build_url("http://user@www.example.com/pub/index.php?a=b#files",
    array(
        "scheme" => "ftp",
        "host" => "ftp.example.com",
        "path" => "files/current/",
        "query" => "a=c"
    ),
    HTTP_URL_STRIP_AUTH | HTTP_URL_JOIN_PATH | HTTP_URL_JOIN_QUERY | HTTP_URL_STRIP_FRAGMENT
);
?> 
```

问题是，我不知道这是否只是将**ftp://ftp.example.com/pub/files/current/?a=b&a=c**输出为文本，或者它是否是一种创建有效 URL 的方法。 ..（这显然是一个 FTP 地址...） - PHP.net

**注意：** 在工作中，我们还可以使用**if path = "contact"**来包含某些片段，如下所示：

```
<%
 if path = "contact" or path = "chat" or path = "checkout" then

 <div id="communication-nav">
  <ul>
   <li>Some link 1</li>
   <li>Some link 2</li>
   <li>Some link 3</li>
  </ul>
 </div>

 end if
%> 
```

如果有人能给我一些关于如何使用 PHP 重新创建它的指示，我将非常感激！

我在研究正确的功能吗？我需要使用某种 URL 重写功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T22:02:56.237

尝试使用此内容在您的 index / document_root 文件夹中创建 .htaccess 文件

```
 RewriteEngine on

  # If your site is running in a VirtualDocumentRoot at http://example.com/,
  # uncomment the following line:
  # RewriteBase /

  # Rewrite URLs of the form 'x' to the form 'index.php?q=x'.
  # -- only if not a file
  RewriteCond %{REQUEST_FILENAME} !-f
  # -- only if not a directory
  RewriteCond %{REQUEST_FILENAME} !-d
  # -- never for favicon
  RewriteCond %{REQUEST_URI} !=/favicon.ico
  # -- rewrite if all above remains true
  # -- e.g. /perma-links/this-is-it  becomes index.php?q=perma-links/this-is-it
  RewriteRule ^(.*)$ index.php?q=$1 [L,QSA] 
```

对于不允许或不可用覆盖重写模块的兼容性设置，请使用以下内容包装代码块：

```
<IfModule mod_rewrite.c>
     #rewrite rules
</IfModule> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T22:12:03.973

如果您安装了 mod_rewrite，请尝试以下 .htaccess 文件。

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^/([^/]*) $1.php 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T05:43:36.213

经过大量研究，我想出了如何以我需要的方式执行此操作...首先，我插入了一些使 index.php 文件“动态”的代码。我把它放在要显示每个页面的“内容”的地方......

```
<?
    $p = $_GET['page'];

$page = "pages/".$p.".php";

if(file_exists($page))
    include($page);
elseif($p=="")
    include 'pages/home.php';
elseif($p=="about")
    include 'pages/about.php';
elseif($p=="contact")
    include 'pages/contact.php';
elseif($p=="disclaimer")
    include 'pages/disclaimer.php';
else
    include '404.html';
?> 
```

这样做是包括我想要显示的适当“内容”文件，具体取决于某人试图查看的页面。我将不同的页面存储在`/pages/`我的网站目录中。您可以将其更改为您想要的任何内容。

接下来，（如果您正在运行 APACHE 服务器并且正在运行 mod_rewrite 模块（大多数托管服务和 APACHE 盒子都启用了此模块）我们要打开（或者如果您的站点目录中不存在则创建）.htaccess 文件。这可以使用记事本或dreamweaver 完成。只需将文件命名为“.htaccess”并确保不要将其保存为“.txt”。

.htaccess 文件需要包含以下内容才能实现我需要的...

```
RewriteEngine on
RewriteRule ^(.*)/$ index.php?page=$1 
```

`^`标记字符串的开始，基本上`(.*)`指定任何东西都可以在这里，`/`是/about `/`（还有更多），`$`我相信标记字符串的结尾。

注意**$**之后的空格 ...在空格之后，您说明当前的 URL 是什么（这是我的答案开头的代码块生成的内容）...在我的情况下，它是**index.php?page=about** . **$1**不是 PHP 变量，它代表第**一个变量的值，**即**about**（或您正在查看的任何页面）。

现在我强烈建议在深入研究之前先查看“mod_rewrite”教程。这对我来说是新的，而且很混乱。该视频对我很有帮助（[http://www.practicalecommerce.com/articles/394-Video-Tutorial-Eliminating-Dynamic-URLs-with-Mod-Rewrite](http://www.practicalecommerce.com/articles/394-Video-Tutorial-Eliminating-Dynamic-URLs-with-Mod-Rewrite)）。

在此感谢大家的帮助！一如既往，非常感谢！:)

**注意**一旦我完成了这个配置，我的 CSS 就完全损坏了，我的图像都没有出现。我玩弄了hrefs并拨通了它。显然，这些虚假的“目录”会影响 href，就好像它们存在一样？无论如何，如果您遇到这种情况，请不要惊慌:)**

# hibernate - Java EE6/EJB3/JPA2：如何将现有（但分离的）实体添加到 ManyToOne 中的新实体？

> ID：12240026
> 
> 赞同：0
> 
> 时间：2012-09-02T21:52:39.083
> 
> 标签：hibernate, jpa-2.0, ejb-3.0

我在将现有但分离的实体设置为 ManyToOne 关系时遇到问题，Hibernate 抛出一个`PersistentObjectException`说法：“分离的实体传递给持久化：model.persons.Customer”。

我的用例如下：

我打开一个 JSF2 视图，它允许我通过命名 bean 和对无状态 OrderDAO EJB 的调用创建订单。在该视图中，我可以从下拉列表中选择一个客户。下拉列表使用另一个无状态 CustomerDAO EJB 填充，该 EJB 从数据库中获取客户列表。我选择客户并将客户设置为订单。当我使用无状态 OrderDAO EJB 保存订单时，会引发上述异常。

我的实体如下所示：

```
@Entity
public class Order extends AbstractEntity implements Serializable {

    private static final long serialVersionUID = -8061887078955032972L;

    @ManyToOne(cascade={CascadeType.MERGE, CascadeType.REFRESH, CascadeType.PERSIST}, optional = false)
    private Customer customer = null;

    ... 
}

@Entity
@DiscriminatorValue("customer")
public class Customer extends Person implements Serializable {

    private static final long serialVersionUID = 2788107135840578322L;

    @OneToMany(cascade=CascadeType.ALL, mappedBy="customer")
    private List<Order> orders = null;

    ...
} 
```

涉及的代码如下所示：

```
@Named
@ConversationScoped
public class OrderController implements Serializable {

    private static final long serialVersionUID = -4868506512979135651L;

    @EJB
    private OrderEJB orderBean;
    private Order order;
    ...
    public Order getOrder() {
        if (order == null) {
            if (id == null) {
                order = orderBean.create();
            } else {
                order = orderBean.findById(id);
            }
        }
        return order;
    }

    public String saveOrder() {
        order = orderBean.save(order);
        return "savedOrder";
    }
}

@Stateless
public class OrderEJB extends GenericDAO<Order> {
}

public class GenericDAO<T extends AbstractEntity> {

    public T create() {
        try {
            return getClassType().newInstance();
        } catch (Exception e) {
            logger.log(Level.SEVERE, "Error creating new instance of "+getClassType(), e);
        }
        return null;
    }

    public T save(T entity) {
        if (entity.getId() == null) {
            saveNew(entity);
        } else {
            entity = update(entity);
        }
        return entity;
    }

    private void saveNew(T entity) {
        em.persist(entity);
    }

    private T update(T entity) {
        return em.merge(entity);
    }

} 
```

我使用两种不同的 EJB，一种用于订单，一种用于客户，这一事实是否存在问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T08:33:54.613

问题是您保存（持久）一个新实体，该实体引用一个分离的实体，并启用了级联以在该关系上持久（通过全部级联）。

这是不受支持的组合。

JPA 希望这种关系中的整个链都是新对象。如果一个人已经有一个持久的身份（附加的或分离的），它就行不通了。

有两种解决方案：

删除从 Customer 到 Order 的关系上的级联。客户仍将获得对现有订单的引用，但 JPA 不会尝试保留订单本身。您将失去一次性为新客户保留新订单的能力，但如果这种情况永远不会发生，那么这可能是一个很好的解决方案。

第二种解决方案有点反直觉，但确实有效；为具有现有订单的新客户调用 em.merge() 而不是 em.persist()。

Merge 实际上具有“saveOrUpdate”语义，因此无需关心对象是否为新对象即可进行保存。

# android - 用自定义应用替换 phone.apk

> ID：12240027
> 
> 赞同：1
> 
> 时间：2012-09-02T21:52:46.737
> 
> 标签：android

我需要知道在 android 上修改 phone.apk 应用程序的步骤是什么，该应用程序允许拨打和接听电话（以及在电话上通话时显示的内容）。

我需要做什么（当然我有一个根设备）？是否可以先在模拟器上进行测试？

我的猜测是，我首先需要以某种方式获取其来源，使用某种系统签名，进行更改并将其强制放入设备中，也许还要重新启动它。

然而，我从来没有做过这样的事情，我在 xda 论坛和这里找不到太多帮助，也许是因为它是非常核心的事情，而且它在某些设备上可能无法正常工作。

我注意到唯一能证明这一点的是通话记录器补丁，它本身就非常酷。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T23:17:54.450

首先是你需要源代码。手机应用程序在很大程度上依赖于无线电接口层，而无线电接口层是他们使用的通信处理器所专有的。

我相信除非您正在使用 nexus 系列设备，否则您无法在模拟器上进行测试。此外，电话应用程序在特定的 shareduserid 上运行，这可能会破坏使用相同共享用户 ID 运行的其他应用程序。因此，您将需要平台证书进行签名，这对于手机软件的发布版本来说几乎是不可能的。

您可以做的一件事是为您的手机下载 cyanogenmod 代码，进行更改，构建和下载手机上的整个软件，而不仅仅是手机 apk。

# jquery - html + css + jquery：切换显示更多/更少文本

> ID：12240030
> 
> 赞同：3
> 
> 时间：2012-09-02T21:53:12.263
> 
> 标签：jquery, toggle, show

我正在做一个个人项目，但遇到了一个小问题：

这是我的代码，目前有效： http: [//jsfiddle.net/gvM3b/](http://jsfiddle.net/gvM3b/)：

```
$(".show-more").click(function () {
    $(this).text("(Show Less)");
$(".text").toggleClass("show-more-height");
});​ 
```

问题是“（显示更多）”文本更改为“（显示更少）”，但在需要时不会切换回来。

^这是一回事，另外一件事是，如果您知道如何在显示更多但在文本上时添加 [...]。一直试图弄清楚但不得不寻求一点帮助，我是 jquery 的新手。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-02T21:58:38.290

更新你的 jQuery：

```
$(".show-more").click(function () {
    if($(".text").hasClass("show-more-height")) {
        $(this).text("(Show Less)");
    } else {
        $(this).text("(Show More)");
    }

    $(".text").toggleClass("show-more-height");
}); 
```

见[http://jsfiddle.net/gvM3b/1/](http://jsfiddle.net/gvM3b/1/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-02T21:57:15.510

使用三元运算符，例如：

```
$(".show-more").click(function () {
  var $this = $(this);
  $this.text($this.text() == "(Show Less)" ? "(Show More)" : "(Show Less)");
  $(".text").toggleClass("show-more-height");
});​ 
```

或[`.text()`](http://api.jquery.com/text/#text2)与函数一起使用：

```
$(".show-more").click(function () {
  $(this).text(function (i, oldText) {            
    return oldText == "(Show Less)" ? "(Show More)" : "(Show Less)";      
  });
  $(".text").toggleClass("show-more-height");
});​ 
```

**[演示](http://jsfiddle.net/hn4Aq/)**。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-02T22:01:30.947

像这样：

```
$(".show-more").click(function () {        
    $(".text").toggleClass("show-more-height");
    if(!$(".text").hasClass("show-more-height")){
        $(this).text("Show Less");
    }else{
        $(this).text("Show More");
    }
}); 
```

更新 [的小提琴](http://jsfiddle.net/gvM3b/3/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-02T22:22:00.140

这是另一种解决方案：

```
var i = 0;   

$(".show-more").on('click', function() {
    $(this).text( ++i % 2 ? "(Show Less)" : "(Show More)" );
    $('.text').toggleClass("show-more-height");
}); 
```

小提琴：http: [//jsfiddle.net/gvM3b/6/](http://jsfiddle.net/gvM3b/6/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-11T16:25:49.540

我想推荐[Jquery more less 库](http://shakenandstirredweb.com/playground/jquery-more-less-text/)，它可以解决“显示更多”“显示更少”问题。

另一种选择：[cmtextconstrain](http://coxmediagroup.github.io/jquery-textconstrain/)

# android - 显示多个加载程序的进度对话框？

> ID：12240034
> 
> 赞同：0
> 
> 时间：2012-09-02T21:54:20.997
> 
> 标签：android

我的活动中有 3 个 CursorLoader，我想在第一个加载器启动时启动进度对话框，我想在最后一个加载器完成时关闭对话框。

是否存在标准解决方案来做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T21:56:47.610

为什么不在每个标志启动时升起标志（使用布尔值）并在完成时将其删除..当每个标志完成时，它会检查其他两个标志..当所有标志都关闭时，进度对话框将被关闭

# python - 无法在终端上打开 Python 脚本

> ID：12240036
> 
> 赞同：0
> 
> 时间：2012-09-02T21:54:52.980
> 
> 标签：python, linux, flask, ubuntu-12.04

我不断收到这个错误。我只是无法在终端上打开脚本。我的空闲和我的 python 控制台工作。我不想将行复制并粘贴到我的空闲中。我认为 python 在错误的路径中搜索...

我有ubuntu，请看下面我复制粘贴的终端

```
judy@ubuntu:~$ cd anotherproject
judy@ubuntu:~/anotherproject$ python hello.py 
python: can't open file 'hello.py': [Errno 2] No such file or directory
judy@ubuntu:~/anotherproject$ cd
judy@ubuntu:~$ cd Scripts
bash: cd: Scripts: No such file or directory
judy@ubuntu:~$ cd Desktop
judy@ubuntu:~/Desktop$ cd Scripts
judy@ubuntu:~/Desktop/Scripts$ python passwordgenerator.py 
python: can't open file 'passwordgenerator.py': [Errno 2] No such file or directory
judy@ubuntu:~/Desktop/Scripts$ ls
gemail.py   hello.py   passwordgenerator.py 
judy@ubuntu:~/Desktop/Scripts$ 
```

这是我的 hello.py 文件

```
#!/usr/bin/env python

from flask import Flask
app = Flask(__name__) 

@app.route('/') 
def hello_world():
    return 'Hello World!'

if __name__ == '__main__':
    app.run() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T22:03:14.443

1.  hello.py 在 中`~/Desktop/Scripts/`，而不是在`~/anotherproject`. 尝试`python ~/Desktop/Scripts/hello.py`
2.  您可能没有设置正确的权限。python 以您当前的 shell 用户身份运行，该用户可能无法读取该文件，因为它由另一个用户拥有。尝试输入`ls -alh`并向我们展示输出。

# wordpress - 将 PHP 应用程序迁移到 Wordpress

> ID：12240040
> 
> 赞同：0
> 
> 时间：2012-09-02T21:55:11.853
> 
> 标签：wordpress, wordpress-theming

我有一个独立的 PHP 应用程序。这是一个简单的食物搜索。有一个文本框和搜索按钮。用户输入食物名称并点击搜索，我会返回一个项目列表给他们。

我想将此与 wordpress 网站集成。我正在使用 genesis 主题/子主题。我该如何处理？

我应该通过嵌入此 PHP 应用程序代码来创建新的页面模板吗？然后用这个模板创建一个页面？还是有更好的方法？任何有用资源的链接表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T05:10:36.220

是的，据我所知，这是正确的做法。

首先在主题文件夹中创建一个模板文件。在那里你可以放置你的 php 代码。然后从管理面板创建页面并分配该模板并运行。

这会很有帮助，因为当您创建模板时，您也可以使用 wordpress 内置函数。

谢谢

# c++ - 适用于 x86 和 x64 的 NtQueryInformationThread

> ID：12240042
> 
> 赞同：0
> 
> 时间：2012-09-02T21:55:25.180
> 
> 标签：c++, winapi

对于大小和指针变量，似乎 NtQueryInformationThread 需要 x86 的 DWORD 和 x64 的 DWORD64 ？

我怎样才能使它通用在 x86 和 x64 中编译？LPVOID 似乎没有帮助，因为它只是给了我不正确的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T22:09:59.603

好的，刚刚发现使它成为 LPVOID 使它可以跨架构编译。

`DWORD ntStatus = NtQueryInformationThread(hTemporaryHandle, ThreadQuerySetWin32StartAddress, dwStartAddress, sizeof(LPVOID), NULL);`

where`dwStartAddress`也是`LPVOID`根据目标环境指向 DWORD 或 DWORD64 变量。

# performance - 增加速度/速度，cocos2D

> ID：12240043
> 
> 赞同：0
> 
> 时间：2012-09-02T21:55:31.920
> 
> 标签：performance, cocos2d-iphone, game-physics, acceleration

我正在关注本教程： [http ://www.raywenderlich.com/475/how-to-create-a-simple-breakout-game-with-box2d-and-cocos2d-tutorial-part-12](http://www.raywenderlich.com/475/how-to-create-a-simple-breakout-game-with-box2d-and-cocos2d-tutorial-part-12)

但在最后一部分，它展示了我们如何通过对物体施加阻尼来降低速度

```
 if (speed > maxSpeed) {
                b->SetLinearDamping(0.5);
            } 
```

其中“b”是世界对象上的一个实体。

我正在寻找一种通过设置线性加速度来提高速度的方法（也许通过施加力？我真的不知道该怎么做）

任何人都可以帮助我吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T06:51:32.630

您可以使用 ：

```
b2Vec2 force;
force.Set(10.0f, 0.0f);

b->ApplyForce(force, b->GetWorldCenter()); 
```

这将在您的身体上设置一个正 x 方向的力，为您的身体提供恒定的加速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T14:14:05.823

如果也通过施加力找到了方法

```
b2Vec2 velocity = b->GetLinearVelocity();
if (speed <minSpeed) {
   b->ApplyForceToCenter(velocity);
} 
```

# javascript - 使用 JAVAScript 将 CSV 解析为数组

> ID：12240044
> 
> 赞同：0
> 
> 时间：2012-09-02T21:56:01.800
> 
> 标签：javascript, arrays, parsing, csv

> **可能重复：**
> [用于解析 CSV 数据的 Javascript 代码](https://stackoverflow.com/questions/1293147/javascript-code-to-parse-csv-data)

我从具有以下属性的 Excel 工作表生成了一个 CSV。

1.img # 2.fabric 3.Description 4.web item 5.copy 6.price 7.STYLE #8.DEPT 9.NUMBER 10.SIZES 11.COLOR1 12.COLOR2 13.COLOR3 14.LINK

某些行具有空属性。例如，CSV 中的一行包含所有属性的数据。

20,有机棉婴儿肋骨,100%有机棉,Y,汤匙领长款修身背心,,F2ORB-U0839,"P,W",山金车,白蜡,月见草,/EileenFisher/collection/ShopByCategory/Tanks_and_Camis/PRD_SBORB-U0839M/ Scoop+Neck+Long+Slim+Tank+in+Organic+Cotton+Baby+Rib.jsp?bmLocale=en_US

但是我在 CSV 中有数据（行或行），其中某些属性没有任何值，例如。

img url,WASHABLE STRETCH CREPE,"70% VISCOSE, 24% NYLON, 6% LYCRA",,带轭的阔腿九分裤,,F2TK-P0123,,黑色,,,

我想在我的网站中使用 javascript 中的 2D 解析。请帮我解释一下。

# java - 如何从 zip 文件中获取数据并将其放入另一个 zip 文件中？

> ID：12240046
> 
> 赞同：0
> 
> 时间：2012-09-02T21:56:12.373
> 
> 标签：java, zip

我有一系列 zip 文件，我想将它们的内容添加到另一个 zip 文件中。我怎么能在不提取的情况下做到这一点？我无法在其中一个 zip 中提取文件，因为它称为 aux.class，不能在 Windows 上制作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T22:10:40.470

问题是，Zip 文件并非设计为附加到的。

我会尝试做的是

*   创建一个新的 zip 文件
*   读取每个现有文件的内容，将流的内容写入新的 zip 文件
*   重命名/删除旧的 zip（你试图“附加”的那个）
*   重命名我们 zip in 的地方

您可以查看[Compressing and Decompressing Data Using Java APIs](http://java.sun.com/developer/technicalArticles/Programming/compression/)了解一些想法

# android - 直接启动给定的活动

> ID：12240047
> 
> 赞同：0
> 
> 时间：2012-09-02T21:56:18.337
> 
> 标签：android, breadth-first-search

我想在 Eclipse 中创建运行配置以直接启动给定的 Android 活动，这样我就不必运行整个应用程序来获得它。在我的清单中，我已经像这样声明了活动：

```
<activity
    android:name=".AlternativeActivity"
    android:label="@string/title_alternative_activity"
    android:exported="true">
    <meta-data
        android:name="android.support.PARENT_ACTIVITY"
        android:value="com.mysite.AlternativeActivity" />
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />               
    </intent-filter>
</activity 
```

但是，在 Eclipse 中，我看到以下警告：

```
Exported activity does not require permission. 
```

如何解决此警告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T22:24:54.147

> 导出的活动（设置exported=true 或包含intent-filter 且未指定exported=false 的活动）应定义实体必须具有的权限才能启动活动或绑定到它。没有这个，任何应用程序都可以使用这个活动。

提示：将光标放在警告上，按 CTRL + 1 并选择“解释问题”。

# c++ - 更好的说法 x == Foo::A || x == Foo::B || x == Foo::C || ...？

> ID：12240050
> 
> 赞同：20
> 
> 时间：2012-09-02T21:56:45.550
> 
> 标签：c++, c++03

假设我有一堆众所周知的值，就像这样（但这`const char *`只是一个例子，它可能更复杂）：

```
const char *A = "A", *B = "B", *C = "C", *D = "D", *E = "E", *F = "F", *G = "G"; 
```

现在假设如果某个表达式的结果在其中的一个子集中，我想以一种特定的方式表现：

```
if (some_complicated_expression_with_ugly_return_type == A ||
    some_complicated_expression_with_ugly_return_type == C ||
    some_complicated_expression_with_ugly_return_type == E ||
    some_complicated_expression_with_ugly_return_type == G)
{
    ...
} 
```

我发现自己经常输入这种东西，以至于我想要一个速记。

如果语言是 Python，我可以很容易地说：

```
if some_complicated_expression_with_ugly_return_type in [A, C, E, G]:
    ... 
```

是否有一种众所周知的可移植方式让我在 C++03 中类似地表达这一点？

请注意，返回类型本身是丑陋的（几乎和[lambda 表达式](http://www.boost.org/doc/libs/1_51_0/doc/html/typeof.html#typeof.moti)的返回类型一样丑陋），所以我当然不想将它存储在局部变量中。

但是返回类型不必**与**常量匹配——例如，如果返回类型是`std::string`，它*不会*隐式转换为`const char *`，但`operator ==`对于比较来说是完全可以的。

到目前为止，我最好的解决方案是这样说：

```
const char *items[] = { A, C, E, G };
if (std::find(items, items + sizeof(items) / sizeof(*items),
              some_complicated_expression_with_ugly_return_type)
    != items + sizeof(items) / sizeof(*items))
{
    ...
} 
```

但它非常丑陋。有没有更好的方法，也适用于非 POD？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-02T22:05:25.393

如果你有 C++11：

```
auto res = some_complicated_expression_with_ugly_return_type;
if (res == A
    || res == C
    || res == E
    || res == G) {
} 
```

如果没有，您仍然可以使用模板函数消除类型声明：

```
template <class T>
bool matches(T t) {
    return t == A || t == C || t == E || t == G;
}

if (matches(some_complicated_expression_with_ugly_return_type)) {
} 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-09-02T22:14:01.947

您可以将当前最佳解决方案纳入模板：

```
template<class A, class B, size_t n>
inline bool is_in(const A &a, B (&bs)[n]) {
  return std::find(bs, bs + n, a) != bs + n;
} 
```

你可以像这样使用

```
X items[] = { A, C, E, G };
if (is_in(some_complicated_expression_with_ugly_return_type, items))
  … 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-09-02T22:04:25.280

您可以使用`switch`：

```
switch (some_complicated_expression_with_ugly_return_type) {
  case A: case C: case E: case G:
    // do something
  default:
    // no-op
} 
```

注意，这只适用于整数和枚举类型。

对于更复杂的类型，您可以使用 C++11's `auto`，或者对于 C++03，[boost's`BOOST_AUTO`](http://www.boost.org/doc/libs/1_35_0/doc/html/typeof/refe.html#typeof.auto)：

```
auto tmp = some_complicated_expression_with_ugly_return_type;
// or
BOOST_AUTO(tmp, some_complicated_expression_with_ugly_return_type);

if (tmp == A || tmp == C || tmp == E || tmp == G) {
  // ...
} 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-09-03T03:11:59.240

（编辑：原来我原来的假人技巧不起作用，我在测试中被一次幸运的事故误导了。让我们再试一次......）

使用几个帮助模板，您可以为这种情况编写通用解决方案：

```
template <typename T1> class Matcher {
public:
    explicit Matcher(T1 t1): val(t1), flag(false) {}
    template <typename T2> Matcher& operator()(T2 t2)
        { flag |= val == t2; return *this; }
    operator bool() const { return flag; }
private:
    T1 val;
    bool flag;
};
template <typename T1> Matcher<T1> match(T1 t1) { return Matcher<T1>(t1); }

// example...
string s = whatever;
if (match(s)("foo")("bar")("zap")) { do_something(); } 
```

您可以根据需要匹配任意数量的参数。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-09-03T08:42:51.213

类型的表达式

```
if (some_complicated_expression_with_ugly_return_type == A ||
    some_complicated_expression_with_ugly_return_type == C ||
    some_complicated_expression_with_ugly_return_type == E ||
    some_complicated_expression_with_ugly_return_type == G)
{
    ...
} 
```

在代码中很常见（好吧，无论如何都是预先计算的表达式）。我认为你可以为可读性做的最好的事情是预先计算表达式并**保持原样**。

```
ugly_return_type x = some_complicated_expression_with_ugly_return_type;
if (x == A ||
    x == C ||
    x == E ||
    x == G)
{
    ...
} 
```

开发人员习惯于这种类型的语法。这使得当其他人在阅读您的代码时更容易理解

**它也完美地**表达了你想要的东西。这种类型的语法在现有代码中如此广泛使用是有原因的——因为其他替代方案的可读性更差。

当然，您可以将条件包装在一个函数中，但前提是它是可重用的并且在逻辑上是有意义的（除了 IMO 一点）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-02T22:14:18.810

这可以使用 c++03 中的可变参数函数来完成，如下所示：

```
template <typename T>
bool MatchesOne( T _lhs, int _count, ...)
{
    va_list vl;
    va_start(vl,_count);
    for (int i=0;i<_count;i++)
    {
        int rhs=va_arg(vl,int);
        cout << "rhs = " << rhs << endl;
        if (_lhs == rhs) return true;
    }
    va_end(vl);
    return false;
}

int main(){
    float ff = 3.0;
    if (MatchesOne(ff, 5, 1, 2, 4, 5, 3))
    {
        cout << "Matches" << endl;
    }
    return 0;
} 
```

如果您知道所有表达式的类型将与_lhs 具有相同的类型，则可以更改`int rhs=va_arg(vl,int);`为`T rhs=va_arg(vl,T);`

您也可以使用 c++11 中的可变参数模板优雅地做到这一点：

```
template<typename T, typename T2>
bool one_equal(const T & _v1, const T2 & _v2)
{
    return _v1 == _v2;
}

template<typename T, typename T2, typename... Args>
bool one_equal(const T & _v1, const T2 & _v2, Args... args)
{
    return _v1 == _v2 || one_equal(_v1, args...);
}

...

if (one_equal(some_complicated_expression, v1, v2, v3, v4))
{

} 
```

好的，最后一个 hack-ish 解决方案。它可以工作，但是让这个函数的实现者做了很多重复的工作。

```
template <typename T1, typename T2>
bool match_one(T1 _v1, T2 _v2)
{
    return _v1 == _v2;
}

template <typename T1, typename T2, typename T3>
bool match_one(T1 _v1, T2 _v2, T3 _v3)
{
    return _v1 == _v3 || match_one(_v1, _v2);
}

template <typename T1, typename T2, typename T3, typename T4>
bool match_one(T1 _v1, T2 _v2, T3 _v3, T4 _v4)
{
    return _v1 == _v4 || match_one(_v1, _v2, _v3);
}

template <typename T1, typename T2, typename T3, typename T4, typename T5>
bool match_one(T1 _v1, T2 _v2, T3 _v3, T4 _v4, T5 _v5)
{
    return _v1 == _v5 || match_one(_v1, _v2, _v3, _v4);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-02T22:16:16.703

如果不切换，可能是这样的，我没有使用它，但可能是工作的草稿？

```
template <class ReturnType>
bool average(ReturnType expression, int count, ...)
{
  va_list ap;
  va_start(ap, count); //Requires the last fixed parameter (to get the address)
  for(int j=0; j<count; j++)
    if(expression==va_arg(ap, ReturnType))
      return true;
    return false
  va_end(ap);
} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-09-02T22:16:41.913

C++11：

```
template<typename T1, typename T2>
bool equalsOneOf (T1&& value, T2&& candidate) {
   return std::forward<T1>(value) == std::forward<T2>(candidate);
}

template<typename T1, typename T2, typename ...T>
bool equalsOneOf (T1&& value, T2&& firstCandidate, T&&...otherCandidates) {
   return (std::forward<T1>(value) == std::forward<T2>(firstCandidate))
     || equalsOneOf (std::forward<T1> (value), std::forward<T>(otherCandidates)...);
}

if (equalsOneOf (complexExpression, A, D, E)) { ... } 
```

C++03：

```
template<typename T, typename C>
bool equalsOneOf (const T& value, const C& c) { return value == c; }

template<typename T, typename C1, typename C2>
bool equalsOneOf (const T& value, const C1& c1, const C2& c2) {
    return (value == c2) || equalsOneOf (value, c1);
}

template<typename T, typename C1, typename C2, typename C3>
bool equalsOneOf (const T& value, const C1& c1, const C2& c2, const C3& c3) {
    return (value == c3) || equalsOneOf (value, c1, c2);
}

template<typename T, typename C1, typename C2, typename C3, typename C4>
bool equalsOneOf (const T& value, const C1& c1, const C2& c2, const C3& c3, const C4& c4) {
    return (value == c4) || equalsOneOf (value, c1, c2, c3);
}

template<typename T, typename C1, typename C2, typename C3, typename C4, typename C5>
bool equalsOneOf (const T& value, const C1& c1, const C2& c2, const C3& c3, const C4& c4, const C5& c5) {
    return (value == c5) || equalsOneOf (value, c1, c2, c3, c4);
}

// and so on, as many as you need 
```

# c# - 是否可以通过对 Web API 的 URL 调用获取实时数据？

> ID：12240053
> 
> 赞同：3
> 
> 时间：2012-09-02T21:56:50.887
> 
> 标签：c#, asp.net-mvc, json, asp.net-web-api

假设您有一个 ASP.NET MVC 4 Web API 项目。您的资源之一，当您通过 URL 调用它时，会在获取性能监控数据的同时等待指定的时间量，然后在完成后以 JSON 形式将其全部返回。但是，在输入 URL 和过程完成之间，是否有一种方法可以动态返回数据，即。每秒检索性能数据并将其显示在浏览器中。

这就是问题所在：据我所知和任何人似乎都知道，通过 URL 调用 API 资源是静态的。这意味着，在资源检索到其所有信息之前，JSON 不会出现，这不是我想要的。我希望能够在 API 资源检索数据时不断更新浏览器中的 JSON。

由于我在存储库类和控制器类中工作，因此不能选择 Javascript。我试过使用 SignalR，但显然这在这种情况下不起作用，特别是因为我无法使用 Javascript。

有没有可能通过对 API 的 URL 调用来获取实时数据的方法？

例如：谷歌地图。您可以通过 URL 调用 Google Maps API 的唯一方法是，如果您想要显示特定位置的单个图像的“静态”地图。没有任何形式的互动。如果您想要一个动态的“实时”地图，您需要构建一个 Web 应用程序并在视图页面中使用 Javascript 使用应用程序中的 API 资源。无法通过 URL 调用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T22:21:53.723

我认为您要的是一种基于 HTTP 的流式传输机制。当然，这样做需要发送一个内容长度未知的响应。

[这个问题](https://stackoverflow.com/questions/2395192/http-headers-for-unknown-content-length)涉及那种可能是解决方案的一部分的分块传输编码。不知道客户端是什么，我不能说它将如何处理您想要推送的 JSON。

好问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T22:22:57.110

您当然可以根据需要立即开始将响应流式传输回浏览器。它通常是缓冲的，但不是必须的。我以前用过这个技巧。事实上，SignalR 在某些操作模式下做了类似的事情，尽管我应该补充（现在我已经重新阅读了你的问题）虽然 HTTP 支持这一点，但默认情况下它不会从 Web API 控制器中显而易见。我认为你需要在响应处理中降低一点，这样你就可以刷新缓冲区，而不是简单地从你的 web 方法返回一个 POCO，如果这就是你的意思的话。

从本质上讲，在收集了每条信息之后，您会想要写入和刷新缓冲区，所以我认为您无法使用典型模型来做到这一点。我认为您需要一个自定义消息处理程序[http://www.asp.net/web-api/overview/working-with-http/http-message-handlers](http://www.asp.net/web-api/overview/working-with-http/http-message-handlers)来获取有效负载才能做到这一点。

不过我很好奇，你说你想发回 JSON 但你不允许使用 JavaScript？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T11:16:05.783

无论 MVC 控制器和路由管道如何，您都可以组合一个老式的 ASP.Net IHttpHandler 实现。[http://support.microsoft.com/kb/308001](http://support.microsoft.com/kb/308001)。然后，您将可以完全访问响应流，并且可以根据需要缓冲或不缓冲。您必须考虑是否要长时间占用工作线程，并且如果您计划或多或少地连续流式传输，那么您肯定希望在等待存储库的进一步响应时使用 IAsyncHttpHandler。

话虽如此，Web API 也支持异步，但它更复杂一些。如果您计划按时发回数据，那么我强烈建议您再看看 SignalR，如果您计划最终拥有一些 JavaScript 客户端，它可以立即完成所有这些工作。这要容易得多。

如果你真的想在 Web API 中编写异步的东西，这里有一些资源可以帮助你；

[http://blogs.msdn.com/b/henrikn/archive/2012/02/24/async-actions-in-asp-net-web-api.aspx](http://blogs.msdn.com/b/henrikn/archive/2012/02/24/async-actions-in-asp-net-web-api.aspx)

而这个看起来正是你所需要的； [http://blogs.msdn.com/b/henrikn/archive/2012/04/23/using-cookies-with-asp-net-web-api.aspx](http://blogs.msdn.com/b/henrikn/archive/2012/04/23/using-cookies-with-asp-net-web-api.aspx)

但是，为了在示例中使用 PushStreamContent() 类，您不会在 System.Net.Http.dll 中找到它，您需要从[http://的 Web API 堆栈夜间构建中获取它aspnetwebstack.codeplex.com/SourceControl/list/changesets](http://aspnetwebstack.codeplex.com/SourceControl/list/changesets)

YMMV - 祝你好运！

# c - 将数组作为指针传递

> ID：12240055
> 
> 赞同：0
> 
> 时间：2012-09-02T21:57:29.193
> 
> 标签：c, arrays, pointers, parameters

我有一个函数需要一个固定大小的数组。数组的内容将在此函数中修改，因此我想将数组作为指针传递。

这是我的数组的定义：

```
int u[] = {1, 0 , a};   //a is an integer
int v[] = {1, 0 , a};   //a is an integer 
```

这是我的原型：

```
void New_Values(int* u[3], int* v[3], const int q); 
```

这是我的函数调用：

```
New_Values(&u, &v, q);   //q is an integer 
```

我得到编译器错误：

> 从不兼容的指针类型传递“New_Values”的参数 1

和

> 从不兼容的指针类型传递“New_Values”的参数 2

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T22:06:20.430

只有在特殊情况下，您才需要将指向数组的指针传递给函数；您很可能会按照其他人的建议进行操作：

```
void New_Values(int u[], int v[], int q);
void New_Values(int *u,  int *v,  int q); 
```

（这些声明是等价的；编译器将前者视为像后者一样编写，因此您通常会看到简单的指针表示法而不是数组表示法。）

和电话：

```
New_Values(u, v, q); 
```

如果你真的想使用指向数组的指针，你必须使用正确的符号——你试图指定的是一个整数指针数组，而不是一个指向整数数组的指针。

```
void New_Values(int (*v)[], int (*v)[], int q); 
```

和电话：

```
New_Values(&u, &v, q); 
```

在里面`New_Values()`，你会使用：

```
(*v)[i] = (*u)[j] + q; 
```

这是 C 的“使用时声明语法匹配语法”的说明。

请注意，我`const`从`int`参数中删除了。这并非完全没有意义，但是如果调用函数确实修改了参数，则调用函数不会修改调用函数中的值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-02T21:59:06.533

只需让函数获取指针：

```
void New_Values(int *u, int *v, const int q); 
```

并且像数组一样使用它们。在这种情况下，数组衰减为指向第一个元素的指针。此外，您应该从函数调用中删除，`&`然后说：`New_Values(u, v, q);`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T22:00:16.867

只需将数组名称传递为数组衰减为指针。

传递为：

```
New_Values(u, v, q); 
```

和函数原型：

```
void New_Values(int* u, int* v, const int q); 
```

# c - clock_t、time_t 和 struct tm 有什么区别？

> ID：12240059
> 
> 赞同：21
> 
> 时间：2012-09-02T21:58:03.280
> 
> 标签：c, time, struct, time-t, time.h

clock_t、time_t 和 struct tm 有什么区别？

**结构 tm**看起来像这样：

```
struct tm{
int tm_sec;
int tm_min;
int tm_hour;
int tm_mday;
int tm_mon;
int tm_year;
int tm_wday;
int tm_yday;
int tm_isdst;
}; 
```

但是**clock_t**和**time_t**长什么样子呢？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-02T22:01:58.853

`time_t`是一个绝对时间，表示为自 UNIX 纪元（格林威治标准时间午夜，1970 年 1 月 1 日）以来的整数秒数。它作为一个时间点的明确、易于使用的表示非常有用。

`clock_t`是时间的相对度量，由某个时间点以来的整数时钟滴答数表示（可能是计算机的启动，但不能保证，因为它可能会经常翻转）。`CLOCKS_PER_SEC`每秒有时钟滴答；这个常数的值在不同的操作系统之间可能会有所不同，但通常在100左右。有时用于计时目的，但由于分辨率相对较低，因此不太擅长。`gettimeofday`'s`struct timeval`对于计时目的要好得多。

`struct tm`是日历日期和时间。它可能不代表任何真实的时间点（例如，您可以有一个`struct tm`说它是 2 月 31 日或 12 月 0 日）。它不包括时区，因此不是绝对的。它通常在转换为日期和时间的人类可读表示或从其转换时使用。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-02T22:04:55.423

`time_t`表示当前时间——通常是自某个时期以来的秒数（例如，1970 年 1 月 1 日午夜）。它旨在表示日历/挂钟时间，但仍然易于作为单一的简单算术类型进行操作（例如，`difftime`可以找到两个指定时间之间的差异）。

`clock_t`表示自进程启动以来使用的 CPU 时间量。它可以通过除以 CLOCKS_PER_SEC 转换为秒。它的真正意图是表示使用的 CPU 时间，而不是日历/挂钟时间。

`struct tm`是一个结构（具有指定的成员），表示分解为组件的日历/挂钟时间 - 年、月、日、小时、分钟、秒等。它（主要）用作外部接口，而 a`time_t`用于主要用于内部使用——即，典型用途是当您从外部世界获取日期/时间时，您将组件放入 a`struct tm`并将其转换为 a`time_t`用于内部存储。然后，当您需要执行诸如显示时间/日期之类的操作时，您可以`time_t`将`struct tm`. 进行这种操作的例程包括相当多的智能来执行诸如标准化日期之类的事情，因此日期 like`30 February`将被转换为`2 March`（或闰年`1 March`）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-02T22:00:44.447

C只是说：

> (C99, 7.23.1p3) “clock_t 和 time_t 是能够表示时间的算术类型”

在 中`glibc`，类型`time_t`是 的别名`long`。

> 在 GNU C 库中，time_t 等价于 long int

来自[http://www.gnu.org/software/libc/manual/html_node/Simple-Calendar-Time.html](http://www.gnu.org/software/libc/manual/html_node/Simple-Calendar-Time.html)

# ruby - Ruby：NoMethodError，我在调用它之前定义了方法

> ID：12240062
> 
> 赞同：1
> 
> 时间：2012-09-02T21:58:17.957
> 
> 标签：ruby, nomethoderror

```
class AiClassGame
    def calculate_cpuNum(sum)
        if sum <= 79
            cpuNum = 80 - sum
        elsif sum <= 88
            cpuNum = 89 - sum
        else
            cpuNum = 100 - sum
        end
        #puts 'calculate method'
    end 
```

* * *

calculate_cpuNum 是我得到调用错误的方法

```
if sum >= 71
        calculate_cpuNum(sum)
    else
        sum += cpuNum
        checkPlayer = false
        puts 'sum = ' + sum.to_s
        break if sum >= 100
    end
    puts 'Computer has choosen : ' + cpuNum.to_s, 'sum = ' + sum.to_s
end 
```

我得到错误

```
ai_class_game.rb:39 in <class:AiClassGame>: undefined methodcalculate_cpuNum` for AiClassGame:Class (NoMethodError)from ai_class_game.rb:7:in `<main>` 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T22:40:14.120

您定义`calculate_cpuNum`为`AiClassGame`类的实例方法。但是，调用该方法的代码直接写在类主体中，而不是在实例方法中。

您可以从类体内调用（没有显式接收器）的唯一方法是类方法。实例方法只能从同一类的其他方法调用，或者通过使用给定类的对象调用它们`my_ai_class_game_object.calculate_cpuNum`。

我还应该指出，像这样直接在类体内编写代码是非常不寻常的。

您在代码中遇到的另一个不相关的错误是您在方法`cpuNum`之外使用了变量`calculate_cpuNum`。`cpuNum`是一个局部变量，不能在定义它的方法之外使用。

# javascript - jQuery UI 奇怪的按钮问题

> ID：12240077
> 
> 赞同：0
> 
> 时间：2012-09-02T22:01:28.027
> 
> 标签：javascript, jquery, html, css, jquery-ui

我正在尝试实现这样的目标

![在此处输入图像描述](../Images/bc257932d0e9876e037bd3434566b03b.png)

[http://jqueryui.com/demos/button/#icons](http://jqueryui.com/demos/button/#icons)

得到

[http://jsfiddle.net/p5PzU/1/](http://jsfiddle.net/p5PzU/1/)

为什么它的高度这么小？它的形状必须像正方形，但我得到的是矩形。我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T22:08:42.413

您需要在按钮元素内添加一些文本。即使a`&nbsp;`也可以。然后将其与`text:false`选项结合起来。[http://jsfiddle.net/p5PzU/2/](http://jsfiddle.net/p5PzU/2/)

# javascript - 如何在 Google 图表中将图像设置为图例

> ID：12240079
> 
> 赞同：3
> 
> 时间：2012-09-02T22:01:28.237
> 
> 标签：javascript, google-visualization

我正在尝试将图像用作 Google 图表中的图例。这是它目前的样子：

[![](../Images/c8603ecaf1fbb295e5cb7f95c19cc0a6.png)](https://i.stack.imgur.com/52Ulw.png)

这就是它的样子：

[![](../Images/3d4e4faf2f25deea2859c54d40fed855.png)](https://i.stack.imgur.com/27OVG.png)

这是我绘制图表的 JavaScript 代码：

```
 function drawChart() {
        var data = google.visualization.arrayToDataTable([
          ['Champions', 'Games', 'Wins', 'Loses'],
          ['Ezreal',  21830,        12172,      9658],
          ['Taric',  17835,      9658,      8177],
          ['Graves',  13567,       6558,        7009],
          ['Lee Sin',  12738,      6349,        6389],
          ['Blitzcrank',  11965,       6132,        5833],
          ['Nunu',  10946,       5407,      5539],
          ['Sona',  9660,       5226,       4434],
          ['Corki',  9457,       4389,      5068],
          ['Jax',  8669,       4358,        4311],
          ['Amumu',  8396,       4743,      3653]
        ]);

        var options = {
          title: 'Most played',
          backgroundColor: '#EEEEEE',
          hAxis: {title: 'Champions',  titleTextStyle: {color: 'red'}}
        };

        var chart = new google.visualization.ColumnChart(document.getElementById('most-popular'));
        chart.draw(data, options);
      } 
```

我已经尝试将`<img>`标签嵌入到数组中，如下所示：

```
['<img src="img/ezreal.png">'Ezreal',  21830,       12172,      9658] 
```

不幸的是，Google Charts 对该字符串进行了某种转义，以便显示整个 HTML 代码。

所以我正在寻找一种将这些图像包含在 Google Charts 中的方法。如果那不可能，我正在寻找其他可以完成这项工作的 JavaScript 库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T22:35:55.280

这不可能！（简短回答，在手机上）

# c++ - numeric_limits 是 min/max constexpr 吗？

> ID：12240085
> 
> 赞同：5
> 
> 时间：2012-09-02T22:01:57.593
> 
> 标签：c++, c++11, standards-compliance, constexpr

C++11 标准是否指定`numeric_limits<T>::min`and`max`必须是可以在模板中使用的常量表达式或`static_assert`?

更一般地，如何根据标准找到常量表达式的函数列表？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-02T22:15:29.013

`std::numeric_limits`事实上，标准（或我最新的工作草案）列出了第 18.3.2.3章**[numeric.limits]**中的所有成员（在`constexpr`此处实际引用这些定义并没有任何好处），对于通用模板版本以及所有内置专业化（**18.3.2.7 [numeric.special]**）。所以是的，它们保证是常量表达式（`constexpr`当然，对于符合实际支持的实现）。

至于您的第二个更笼统的问题，除了向您推荐 C++ 标准本身之外，我无法为您提供太多帮助，它的最新草案与实际标准没有真正的不同，是免费提供的。或者您可能会查看更方便但绑定更少的[cppreference.com](http://en.cppreference.com/w/Main_Page)。

# cherrypy - 在同一台机器上运行 2 个 CherryPy 实例

> ID：12240091
> 
> 赞同：0
> 
> 时间：2012-09-02T22:02:29.540
> 
> 标签：cherrypy

我在远程 Linux 机器上运行 CherryPy 作为网络服务器。最终用户通过互联网访问 CherryPy 实例所服务的网站。到目前为止，一切都很好。

现在，我想要一个开发版本的网站，在同一台机器上运行，但在不同的端口上，这样我就可以开发和测试而不会干扰产品网站。我需要在同一台机器上进行开发，因为它包含大量数据，移动到不同的机器上是不切实际的。

当然，开发实例的代码位于不同的目录中，因此当我编辑开发代码时，它不会触发产品实例的重新加载或以任何方式影响产品实例。

但是，如果我将 dev 实例配置为在与 prod 实例不同的端口上运行并尝试启动 dev 实例，我会得到：

```
Traceback (most recent call last):
  File "/usr/lib/python2.7/dist-packages/cherrypy/process/wspbus.py", line 197, in publish
    output.append(listener(*args, **kwargs))
  File "/usr/lib/python2.7/dist-packages/cherrypy/_cpserver.py", line 151, in start
    ServerAdapter.start(self)
  File "/usr/lib/python2.7/dist-packages/cherrypy/process/servers.py", line 167, in start
    wait_for_free_port(*self.bind_addr)
  File "/usr/lib/python2.7/dist-packages/cherrypy/process/servers.py", line 410, in wait_for_free_port
    raise IOError("Port %r not free on %r" % (port, host))
IOError: Port 8080 not free on '127.0.0.1' 
```

dev 和 prod 实例都没有在端口 8080 上运行。prod 实例在 SSL (443) 上，而我可以将 dev 实例放在任意端口上（假设它在 98765 上）。我没有在任何配置文件的任何地方指定 8080。所以我没想到会发生端口冲突，但是，例如，CherryPy 产生了 2 个进程——我猜有某种父子关系——其中一个进程以某种方式正在侦听`localhost:8080`。因为我尝试启动的两个实例都会发生这种情况，所以第二个实例无法启动，因为最终在 8080 上出现了这种冲突。

我已经尝试了几件事，例如关闭自动重新加载和超时监控，希望 CherryPy 不会启动与 8080 相关的进程，但到目前为止还没有运气。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-19T15:05:55.207

我有同样的问题，修复这个添加到每个cherrypy

```
cherrypy.config.update({'server.socket_host': '127.0.0.1',
                        'server.socket_port': 9023
                        }) 
```

# php - 如果名称超过 1 个单词，mysql 查询将失败

> ID：12240092
> 
> 赞同：0
> 
> 时间：2012-09-02T22:02:39.170
> 
> 标签：php, mysql

我开始为我的小型房地产企业创建一个网站。我玩了一下[http://www.php.net](http://www.php.net) mysql 函数，我设法制作了一个通过 AJAX 访问的页面，并为搜索引擎返回了 html 内容。

我有一个已经包含公寓和房屋的数据库

问题是，如果公寓名称是“公寓”，如果“有 3 个房间的公寓”它不再写任何东西，我会返回 html 内容。

我不明白我错在哪里：

```
<?php
    $search = $_GET['selected'];

    $link = mysql_connect('localhost', 'root', '');
    mysql_select_db('houses', $link);

    function searchHouse($search, $link){
        $query = "select * from houses where name=$search limit 1";
        $result = mysql_query($query);
        $row = mysql_fetch_assoc($result);

        $query2 = "select * from houses_info where house_id=$row[id]";
        $result2 = mysql_query($query2);
        $row = mysql_fetch_assoc($result2);
        return $row;
    }

    $result = searchHouse($search, $link);

    echo $result['house_sq'];
    echo "<br>";
    echo $result['house_rooms'];
    echo "<br>";
    echo $result['house_bathrooms'];
    echo "<br>";
    echo $result['house_address'];

    ?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T22:06:56.563

*   您应该知道您是否“玩过” [php.net](http://www.php.net)，这些`mysql_*`功能已被弃用且不再维护。它是页面顶部的一个红色框，通知您这一点。
*   你那里有一个大的注射孔，你根本`MySQL`没有逃跑`$string`
*   您的问题是您没有添加引号来`$string`喜欢：`'$string'`
*   您应该统计使用`PDO`来摆脱不良代码和 SQL 注入漏洞。
*   您可以将这两个选择包装成一个选择：

    ```
    <?php
        function searchHouse($search, $link){
            $search = mysql_real_escape_string($search);
            $query = "select * from houses_info where house_id IN (select * from houses where name='".$search."' limit 1)";
            $result = mysql_query($query);
            $row = mysql_fetch_assoc($result);
            return $row;
        }
    ?> 
    ```

*   由于您已经在构建您可以开始迁移到的网站`PDO`，请阅读本[教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)，您的代码将更像这样：

    ```
    <?php
        $db = new PDO('mysql:host=localhost;dbname=houses;charset=UTF-8', 'root', '', array(PDO::ATTR_EMULATE_PREPARES => false, PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION));
        $search = $_GET['selected'];

        function searchHouse($search){
            global $db;

            $query = $db->prepare("select * from houses_info where house_id IN (select * from houses where name=:search limit 1)");
            $query->execute(array(':search' => $search));
            $row = $query->fetch(PDO::FETCH_ASSOC);
            return $row;
        }

        $result = searchHouse($search);
    ?> 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T22:06:06.847

尝试：

```
$query = "select * from houses where name='".mysql_real_escape_string($search)."' limit 1"; 
```

并记住在将用户输入传递给 sql 之前始终对其进行清理，以避免 sql 注入。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-02T22:04:23.020

字符串需要在查询中引用。此外，这很容易受到 MySQL 注入的影响，请确保使用[mysql_real_escape_string](http://www.php.net/manual/en/function.mysql-real-escape-string.php)转义 $search 。或者更好的是使用[MySQLi](http://www.php.net/manual/en/book.mysqli.php)或[PDO](http://www.php.net/manual/en/ref.pdo-mysql.php)代替旧的 mysql_ 函数。

```
$query = "select * from houses where name=$search limit 1"; 
```

应该：

```
$query = "select * from houses where name='$search' limit 1"; 
```

尽管您确实需要转义 $search 因为它来自用户，即使它们不是恶意的，但任何带有单引号的搜索查询都会中断；

```
$search = $_GET['selected']; 
```

应该：

```
$search = mysql_real_escape_string($_GET['selected']); 
```

（任何人都可以方便地复制粘贴到 MySQLi/PDO 等教程的链接吗？）

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-09-02T22:07:56.557

您的第一个查询应该是：

$query = "select * from house where name like $search% limit 1";

# c# - MVC4 - 当优化设置为 true 时捆绑不起作用

> ID：12240097
> 
> 赞同：44
> 
> 时间：2012-09-02T22:03:43.943
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4, asp.net-optimization

我想知道我在这里做的不对。我正在使用 ASP.NET C# MVC4，我想使用新的 css/js 优化功能。

这是我的 HTML 部分

```
@Styles.Render("~/content/css") 
```

这是我的`BunduleConfig.cs`部分

```
bundles.Add(new StyleBundle("~/content/css").Include(
                        "~/content/css/reset.css",
                        "~/content/css/bla.css"));

// BundleTable.EnableOptimizations = true; 
```

输出（作品）：

```
<link href="/content/css/reset.css" rel="stylesheet"/>
<link href="/content/css/bla.css" rel="stylesheet"/> 
```

但是，当我取消注释`BundleTable.EnableOptimizations = true;`html 输出看起来像这样

```
<link href="/content/css?v=5LoJebKvQJIN-fKjKYCg_ccvmBC_LF91jBasIpwtUcY1" rel="stylesheet"/> 
```

这当然是 404。我不知道我在哪里做错了，请帮助，第一次使用 MVC4。

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-09-03T00:53:55.897

我想问题是你把包放在一个实际存在的虚拟 URL 上，但它是一个目录。

MVC 正在从您的捆绑包中创建一个虚拟文件，并从您指定为捆绑包路径的路径提供它。

该问题的正确解决方案是使用不直接映射到现有目录的捆绑路径，而是在该目录中使用虚拟文件名（也不会映射到真实文件名）。

例子：

如果您的站点有一个名为 /content/css 的文件夹，请按如下方式制作您的 css 包：

在 BundleConfig.cs 中：

```
bundles.Add(new StyleBundle("~/content/css/AllMyCss.css").Include(
                        "~/content/css/reset.css",
                        "~/content/css/bla.css")); 
```

在页面上：

```
@Styles.Render("~/content/css/AllMyCss.css") 
```

请注意，这假设您的 css 文件夹中没有名为 AllMyCss.css 的文件。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-01-31T22:55:33.583

我不确定是 Web 优化还是 WebGrease 如此挑剔，但其中一个（或两个）是，你需要非常小心。

首先，您的代码没有任何问题：

```
bundles.Add(new StyleBundle("~/content/css").Include(
                        "~/content/css/reset.css",
                        "~/content/css/bla.css")); 
```

事实上，这正是微软所做的。*他们不*用于css的主要原因`~/bundles`是图像的相对路径被搞砸了。考虑一下您的浏览器如何看待捆绑包 - 与它看待任何其他 URL 的方式完全相同，并且所有正常的路径相关规则仍然适用于相对路径。想象一下你的 CSS 有一个图像路径到`../images/bullet.png`. 如果您使用`~/bundles`的是浏览器，则会在上面`bundles`实际不存在的目录中查找。它可能最终会`~/images`在你可能拥有它的地方寻找`~/content/images`。

我发现了一些可以真正破坏它并导致 404 错误的事情：

*   仅供参考：我的目录结构是`Content/CSS`包含`images`CSS 图像的文件夹。
*   我必须`EnableOptimizations=true`在测试时强制使用捆绑包
*   您应该做的第一件事是“查看源代码”，然后单击 css 链接以查看它们是否有效

假设我们正在开发一个关于猫的网站。你可能有这个

```
 @Styles.Render("~/Content/css/cats.css")    // dont do this - see below why

 bundles.Add(new StyleBundle("~/content/css/cats.css").Include(
                    "~/content/css/reset.css",
                    "~/content/css/bla.css")); 
```

这会在您的 HTML 中生成指向此路径的 CSS 链接：

```
/Content/css/cats.css?v=JMoJspikowDah2auGQBfQAWj1OShXxqAlXxhv_ZFVfQ1 
```

但是，这将给出 404，因为我放置了扩展名 .css 并且 IIS（我认为）会感到困惑。

如果我将其更改为此，则它可以正常工作：

```
 @Styles.Render("~/Content/css/cats")

 bundles.Add(new StyleBundle("~/content/css/cats").Include(
                    "~/content/css/reset.css",
                    "~/content/css/bla.css")); 
```

别人已经指出的另一个问题是你不能做

```
 @Styles.Render("~/Content/css") 
```

如果您的目录中有一个 css 目录或文件（不太可能有一个`css`没有扩展名的文件） `Content`。

另一个技巧是您需要确保生成的 HTML 具有版本号

```
<link href="/Content/css/cats?v=6GDW6wAXIN5DJCxVtIkkxLGpojoP-tBQiKgBTQMSlWw1" rel="stylesheet"/> 
```

如果它没有并且看起来像这样，那么您的 Bundle 表和您的 cshtml 文件中的包名称可能不完全匹配。

```
<link href="/Content/css/cats" rel="stylesheet"/> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-01-14T16:26:25.180

不要忘记确保捆绑的 HttpModule 在那里。

```
<modules>  
  <remove name="BundleModule" />  
  <add name="BundleModule" type="System.Web.Optimization.BundleModule" />  
</modules> 
```

这让我第一次感到刺痛。不确定 NuGet 包是否应该添加必要的配置，但在我的情况下不是。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-02T22:18:20.853

这在我看来是正确的。启用优化后，您将只有一个 ref，它将是您在 StyleBundle (/content/css) 中指定的名称。在调试模式下（或者更具体地说，在您的 web 配置中使用 debug=false），您将正常获得未优化的文件。如果你看，你会发现它们只是你输入的纯文本。但是，当打开优化时（通常是在发布模式下运行时），您会得到一个看起来很奇怪的 URL。

如果您查看它的输出，它将被缩小。查询字符串 ?v=5KLoJ.... 基于捆绑包中文件的哈希值。这样就可以安全地对引用进行 HTTP 缓存，只要您愿意。如果你喜欢的话，永远，但我*认为*默认是一年。但是，如果您修改任何样式表，它将生成一个新的散列，这就是“缓存清除”，因此您将在浏览器上获得一个新副本。

说了这么多，我不确定您为什么会收到 404。我怀疑这与您的路由配置或 IIS 设置有关。您是否使用 IISExpress 在 Visual Studio 中运行？

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-05-26T10:48:44.883

我刚刚解决了一个类似的问题。问题如下，我通过`NuGet`. 在`BundleConfig`类中，包含该`CSS`文件的行如下所示：

```
bundles.Add(new StyleBundle("~/Content/css").Include("~/Content/site.css",)); 
bundles.Add(new StyleBundle("~/Content/css").Include("~/Content/chosen.css")); 
```

在那个班级的一些地方，我有这行：

```
BundleTable.EnableOptimizations = true; 
```

解决方法是`bundles.Add()`像这样组合 2：

```
bundles.Add(new StyleBundle("~/Content/css").Include(
                            "~/Content/site.css", 
                            "~/Content/chosen.css"
                        )); 
```

这为我解决了问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-12-03T22:36:03.670

也可能是因为某些原因您没有将 bundleconfig.json 部署到服务器。

# sql - SQL 和 iReport - Where 子句和参数中的聚合函数

> ID：12240098
> 
> 赞同：0
> 
> 时间：2012-09-02T22:04:18.780
> 
> 标签：sql, sql-server-2008, jasper-reports, ireport

好吧，基本上我希望能够在*iReport*上使用带有聚合函数的参数。如果键入“yes”，它将显示大于 0 的值，如果键入“no”，它将显示小于 0 的值。但是，聚合函数首先将与 id 相关的所有值相加，然后它从另一个值中减去结果，结果就是我要显示的结果。

我怎么能做到这一点？我一无所知，因为我不知道如何将它与*HAVING*一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T17:04:08.223

我不明白“我不知道如何将它与 HAVING 一起使用”中的“它”指的是什么。使用一些 SQL，这个问题会更清楚。但我猜你正在寻找这个：

```
SELECT id, sum(values) as the_agg
FROM table1
GROUP BY id
HAVING sum(values) $P!{BiggerOrSmaller} 0 
```

BiggerOrSmaller 参数的默认值应该是这样的：

```
$P{MyParam}.equals("yes") ? ">" : "<" 
```

这假设您有一个名为`MyParam`“yes”的参数。基于该值，它`BiggerOrSmaller`适当地设置参数。

# ruby-on-rails - 将 Oauth 集成到现有的用户模型 Rails

> ID：12240099
> 
> 赞同：0
> 
> 时间：2012-09-02T22:04:19.543
> 
> 标签：ruby-on-rails, authentication, oauth

我的 rails 应用程序有一个现有的用户登录和身份验证系统。

如果添加另一个提供商，例如 google，我是否可以将来自 google 用户的凭据添加到我现有的 User 模型中，还是需要创建一个单独的表？我可以查看哪些资源来查看此内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T22:12:09.797

查看 ryan bates 的精彩 railscasts

这一集特别关注将其集成到现有应用程序中

[http://railscasts.com/episodes/235-omniauth-part-1](http://railscasts.com/episodes/235-omniauth-part-1)

[http://railscasts.com/episodes/236-omniauth-part-2](http://railscasts.com/episodes/236-omniauth-part-2)

[https://github.com/intridea/omniauth](https://github.com/intridea/omniauth)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T22:14:13.893

railscasts.com 有几个关于如何集成 OmniAuth 的很好的演练。

[http://railscasts.com/episodes/304-omniauth-identity](http://railscasts.com/episodes/304-omniauth-identity)

希望有帮助...

# jquery - jQuery 可拖动和鼠标滚轮

> ID：12240104
> 
> 赞同：3
> 
> 时间：2012-09-02T22:04:58.203
> 
> 标签：jquery, jquery-ui, mousewheel

更新

找到另一个，但不是我想要的 [jQuery 可拖动：可拖动框越过容器 - 错误？](https://stackoverflow.com/questions/8656653/jquery-draggable-the-draggable-box-go-over-the-container-bug)

我想用鼠标滚轮滚动框，

[http://jsfiddle.net/QhVNr/2/](http://jsfiddle.net/QhVNr/2/)

可以用鼠标滚轮移动那个盒子吗？我找不到任何 attr 可以使用或选项。

希望有人可以帮助我。

非常感谢

# css - 如何防止 div 侧边栏重叠内容？

> ID：12240105
> 
> 赞同：0
> 
> 时间：2012-09-02T22:04:57.657
> 
> 标签：css, html, sidebar, overlapping

我有一个 div 侧边栏，它与我网站上的页面一起滚动。每次调整窗口大小时，侧边栏都会与页面内容重叠。

这是显示问题的演示页面： [http ://wrasa.org/memberpage_demo.html](http://wrasa.org/memberpage_demo.html)

这是我用于页面的菜单栏的 CSS 代码

```
.menubar {width: 200px;position: fixed;left: 20px;down: 200px;} 
```

欢迎任何有关解决问题或使用不同代码的建议，

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T07:19:55.453

因为，您使用的是固定定位；div 将相对于浏览器保持固定，并且如果该区域中的其他内容发生变化，则会重叠。发生这种情况是因为浏览器没有为此类 div 分配任何空间。在您的问题中，您可以通过指定主要内容左侧的最小边距来解决，这实际上可以通过 min-width css 属性来实现。只需在主要内容的左侧再放置一个最小宽度即可。

您可以从此链接了解更多信息

[在 CSS 中使用百分比边距但想要以像素为单位的最小边距？](https://stackoverflow.com/questions/6350645/using-a-percentage-margin-in-css-but-want-a-minimum-margin-in-pixels)

# xcode - Xcode：在设计静态单元格时，如何在设计器中“滚动”表格视图以到达屏幕外的单元格？

> ID：12240106
> 
> 赞同：0
> 
> 时间：2012-09-02T22:05:11.650
> 
> 标签：xcode, uitableview, designer

可能是您今天看到的最愚蠢的问题，但我不知道如何才能到达屏幕外的单元格，所以我可以自定义它们（在设计器中）

如何自定义第 2 节中的第 4 个单元格（或以下任何内容，不可见）：

![有效的 XHTML](../Images/a654ec8f33b2b56ee2b20ada45c93e5f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T22:41:22.727

您可以简单地选择表格视图，然后使用滚轮或触摸板滚动。

# android - 安卓学习曲线

> ID：12240121
> 
> 赞同：0
> 
> 时间：2012-09-02T22:06:50.880
> 
> 标签：android

我有 Java 方面的经验并且对 OOP 有很好的理解。2-3 周前，我决定学习为 Android 制作应用程序。问题是我读过的所有书对我来说都不够广泛。大多数书籍大约有 300-400 页长，无法正确涵盖理解所有基础知识所需的大量方面。我目前正在阅读 Reto Meier 的“pro Andorid 4”，它是 Internet 上最详细的资源之一，但还不够。我发现 Android 框架非常复杂。有活动、意图、服务和其他 API。官方页面上的 Android 开发指南非常简短，无法详细介绍主要组件。而且我发现其他资源也不够详细。Intents的用法和属性是' t 解释得很好，特别是对于 Intent 常量和 Uri 对象作为 Intens 构造函数中的第二个参数的隐式变量等。此外，我找不到其他方面的信息以及 Context、Cursor 的用法以及某些操作之后返回的内容onActivityResult() 方法的执行等等。在此期间，我获得了一些基本和琐碎的知识，但是当我必须实现一些不那么常见的功能（例如拍照、使用广播接收器和服务）时，我感到非常困惑

所以我的问题是——我在哪里可以找到对 Android 内部组件的更全面和深入的解释？还有你花了多少时间才能流畅地制作 Android 应用程序并完全理解开发所涉及的一切？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T22:19:32.943

> 我在哪里可以找到对 Android 内部组件更全面、更深入的解释？

Android 官方文档非常好。[http://developer.android.com/guide/components/index.html](http://developer.android.com/guide/components/index.html)

> 还有你流利制作安卓应用花了多少时间……

取决于你对“流利”的理解。假设在不复制 Hello World 的情况下，查看 Activity 的全部内容等大约 2 周。

> ...并完全了解开发所涉及的一切？

现在没有必要*完全*理解*一切*。不用担心。稍后您将了解大部分有用的概念。一开始只是尝试制作一些应用程序并一直使用谷歌。大多数时候，你或多或少地知道如何做 90%，而你只是阅读了这些持久的 10%，其中你还不知道。

# android - Android媒体播放器空指针异常

> ID：12240127
> 
> 赞同：0
> 
> 时间：2012-09-02T22:07:31.570
> 
> 标签：android, nullpointerexception, android-mediaplayer

我想用 mediaplayer 播放声音文件。我在播放音频文件时收到错误消息。（“不幸的是，horizo​​ntalviewpaging 进程已停止”）请帮助我，谢谢。

代码是；

```
package ro.ovidiuconeac.horizontalviewswiping;
import ro.ovidiuconeac.horizontalviewswiping.R;
import android.app.Activity;
import android.media.MediaPlayer;
import android.support.v4.view.ViewPager.OnPageChangeListener;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.Toast;

public class CustomPageChangeListener extends Activity implements OnPageChangeListener,     OnClickListener {

MediaPlayer soundplay;
private Button buttonBlue   =   null;
private Button buttonYellow =   null;
private Button buttonRed    =   null;
private Activity context    =   null;

/**
 * Constructor
 */ 

public CustomPageChangeListener(Activity context) {
this.context = context;

}

public void onPageScrollStateChanged(int arg0) {
// TODO Auto-generated method stub

}

public void onPageScrolled(int arg0, float arg1, int arg2) {
// TODO Auto-generated method stub

}

public void onPageSelected(int position) {

switch (position) {
    case 0 : {
        buttonBlue = (Button)    context.findViewById(R.id.buttonBlue);
        buttonBlue.setOnClickListener(this);

        break;
    }
    case 1 : {
        buttonYellow = (Button) context.findViewById(R.id.buttonYellow);
        buttonYellow.setOnClickListener(this);
        break;
    }
    case 2 : {
        buttonRed = (Button) context.findViewById(R.id.buttonRed);
        buttonRed.setOnClickListener(this);

        break;
    }
    }   
}

public void onClick(View v) {

// Click button blue
if (buttonBlue != null && v.getId() == buttonBlue.getId()) {
    Toast.makeText(context, "Blue screen", Toast.LENGTH_SHORT).show();

}

// Click button yellow
if (buttonYellow != null && v.getId() == buttonYellow.getId()) {

    //  Toast.makeText(context, "Yellow screen",   Toast.LENGTH_SHORT).show();
    playMusic();
}

// Click button red
if (buttonRed != null && v.getId() == buttonRed.getId()) {
    Toast.makeText(context, "Red screen", Toast.LENGTH_SHORT).show();

}   
}

public void playMusic () {
soundplay = new MediaPlayer();
    try {   
    soundplay = MediaPlayer.create(getApplicationContext(), R.raw.bangyeni);
    soundplay.setVolume(1, 1);
    soundplay.start();

}
catch (Exception e){
Toast.makeText(context, "Error", Toast.LENGTH_SHORT).show();
}   
} 
```

日志猫；

```
> 09-01 08:38:04.964: E/AndroidRuntime(631): FATAL EXCEPTION: main
> 09-01 08:38:04.964: E/AndroidRuntime(631): java.lang.NullPointerException
> 09-01 08:38:04.964: E/AndroidRuntime(631): at     android.content.ContextWrapper.getApplicationContext(ContextWrapper.java:101)
> 09-01 08:38:04.964: E/AndroidRuntime(631): at     ro.ovidiuconeac.horizontalviewswiping.CustomPageChangeListener.onClick(CustomPageChangeList    ener.java:80)
> 09-01 08:38:04.964: E/AndroidRuntime(631): at         android.view.View.performClick(View.java:4084)
> 09-01 08:38:04.964: E/AndroidRuntime(631): at     android.view.View$PerformClick.run(View.java:16966)
> 09-01 08:38:04.964: E/AndroidRuntime(631): at     android.os.Handler.handleCallback(Handler.java:615)
> 09-01 08:38:04.964: E/AndroidRuntime(631): at     android.os.Handler.dispatchMessage(Handler.java:92)
> 09-01 08:38:04.964: E/AndroidRuntime(631): at android.os.Looper.loop(Looper.java:137)
> 09-01 08:38:04.964: E/AndroidRuntime(631): at     android.app.ActivityThread.main(ActivityThread.java:4745)
> 09-01 08:38:04.964: E/AndroidRuntime(631): at     java.lang.reflect.Method.invokeNative(Native Method)
> 09-01 08:38:04.964: E/AndroidRuntime(631): at     java.lang.reflect.Method.invoke(Method.java:511)
> 09-01 08:38:04.964: E/AndroidRuntime(631): at     com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
> 09-01 08:38:04.964: E/AndroidRuntime(631): at     com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
> 09-01 08:38:04.964: E/AndroidRuntime(631): at dalvik.system.NativeStart.main(Native     Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T22:14:12.773

```
MediaPlayer.create(getApplicationContext() 
```

有空指针

如果忘记在哪里，但在某些课程中，Android 文档是错误的！它是在问一个上下文，但我给出的并不好。

尝试这个：

```
MediaPlayer.create(this 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T01:12:57.747

首先松开线 soundplay = new MediaPlayer(); 并将 playMusic 更改如下。我假设您的资源的原始文件夹中有 bangyeni。

```
public void playMusic () {
//soundplay = new MediaPlayer();  <--- not needed
    try {   
    soundplay = MediaPlayer.create(this, R.raw.bangyeni);
    soundplay.setVolume(1, 1);
    soundplay.start();

} 
```

# python - 如何在 Python 中获取已安装模块的帮助？

> ID：12240132
> 
> 赞同：-1
> 
> 时间：2012-09-02T22:08:35.720
> 
> 标签：python

如何在 Python 中获得有关已安装模块的函数或方法的帮助？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T22:09:14.030

你总是可以`help(your_function)`在 Python shell 中尝试。这将打印`docstring`您感兴趣的相应函数/类/包/...的文档（用 Python 术语）。

如果您使用的是[IPython](http://ipython.org/)，您也可以使用`your_function?`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T23:24:51.003

您可以使用[bpython](http://bpython-interpreter.org)，它具有这样的内联帮助：

![内联帮助](../Images/8953a7c67b6e6700d6473f0b7db00092.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T05:20:39.877

要查找模块中的功能列表，您可以使用

```
dir()
EX:
 import os
 dir(os) 
```

要访问模块的文档，您可以执行

```
 os.__doc__ 
```

# c# - 为 C# 制作的数据库设置 SQL Server

> ID：12240135
> 
> 赞同：0
> 
> 时间：2012-09-02T22:09:00.413
> 
> 标签：c#, sql, database

我有一个问题，我在 C# 中使用 SQL 数据库制作了一个不错的应用程序，现在我想将该应用程序安装在另一台电脑上，但它没有连接到数据库文件。有没有一种很好的方法可以安装该数据库并仅通过更改程序中的连接字符串来连接它。有什么方法可以通过网络访问数据库吗？我试图找到一些教程，但没有运气..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T22:13:41.473

我建议您将数据库文件（无论它是什么）附加到您的项目中。所以它将位于项目的文件夹中。但在发布应用程序之前，更改连接字符串，而不是使用完整路径 |DataDirectory| . 这是一个例子：

```
//from
@"....Database=C:\MyProject\MyDataBase.mdf;...";
//change to to:
@"....Database=|DataDirectory|\MyDataBase.mdf;..."; 
```

这样您就不会遇到连接字符串的问题。但是不要忘记将数据库文件添加到您的项目中（将其包含在其中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T23:14:38.183

您需要 SQL Server Express 才能连接到数据库文件。您已经使用 Visual Studio 自动安装了它，但另一台计算机可能没有它。确保另一台计算机安装了 SQL Server。

# ruby - 带差分的字符串压缩

> ID：12240142
> 
> 赞同：3
> 
> 时间：2012-09-02T22:09:32.973
> 
> 标签：ruby, string, compression, diff

我正在研究在将它们插入数据库 blob 字段之前在 Ruby 中压缩一些非常大的字符串（文本字段）。压缩本身很容易，我可以使用 Zlib。

但是，我也在研究可能有类似字符串副本的情况。例如。我可能已经在数据库中存储了一些东西 - stringA。修改给了我stringB。我想存储 stringA 和 stringB 之间差异的压缩版本，这样如果我有 stringA 和压缩的差异，我可以取回 stringB。

有合适的图书馆吗？

理想情况下，这将是单步二进制差异压缩。我真的不想要人类可读的文本差异（这可能会浪费更多空间）。它只需要机器可读。因此，请不要建议我使用`diff -u oldFile newFile > mods.diff`and进行压缩`patch < mods.diff`。

## 回答

编辑：感谢[Mark Adler](https://stackoverflow.com/users/1180620/mark-adler)提供部分答案（不知道有什么`set_dictionary`方法）。我想在 Ruby 中执行此操作，因此相关的方法名称是`set_dictionary`. 然而，试图完成这件事比没有字典要困难得多。

不使用字典，我们可以这样做：

```
A = "My super string to be compressed. Compress me now to " \
    "save the space used to store this super string."
cA = Zlib::Deflate.deflate(A)
# => "x\234U\214\301\r\200 \020\004[\331\nh\302\267E n\224\a\034\271;4v..."

Zlib::Inflate.inflate(cA)
# => "My super string to be compressed. Compress me now to save the..." 
```

但是要使用字典，您需要确保传递`Zlib::FINISH`给 deflate 以刷新输出，并`Zlib::NeedDict`在充气时添加字典之前允许异常：

```
B = "A super string with differences, let's see how much " \
    "extra space the differences will take in this super string!"
zlib_deflate = Zlib::Deflate.new
zlib_deflate .set_dictionary(A)
dB = zlib_deflate .deflate(B, Zlib::FINISH)
# => "x\2733\324$\230sD\265\242<\263$C!%3--\265(5/9\265XG!'\265D\035\250..."

zlib_inflate = Zlib::Inflate.new
zlib_inflate.inflate(dB) # Exception thrown
# => Exception: Zlib::NeedDict: need dictionary
zlib_inflate.set_dictionary(A)
zlib_inflate.inflate(dB)
# => "A super string with differences, let's see how much extra space the..." 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T18:25:13.580

[你也可以用zlib](http://zlib.net/)做到这一点。压缩 stringB 时，使用该`deflateSetDictionary()`函数提供 stringA 作为字典。另一方面，在解压 stringB 时已经有了 stringA，所以`inflateSetDictonary()`在解压 stringB 之前与 stringA 一起使用。

然后 zlib 将找到与 stringA 匹配的部分 stringB 并指向 stringA 中的那些部分。

在压缩 stringC 时，您可以通过将 stringA 和 stringB 连接为字典来做得更好。等等。字典最多可达 32K 字节。

# css - 缩放 Chrome 时 CSS 图像翻转无法正确显示

> ID：12240148
> 
> 赞同：4
> 
> 时间：2012-09-02T22:10:24.760
> 
> 标签：css, imagebutton, rollover

**目标**：创建一个带有 CSS 翻转的可点击按钮。该按钮应为蓝色，当鼠标悬停在其上时，颜色变为橙色。

**问题**：我的技术适用于主流浏览器（Chrome、Firefox、IE）。但是当我缩放页面时（默认情况下我在 Chrome 中这样做），当鼠标悬停在按钮的顶部时，会出现一条小的水平蓝线

这是有问题的图像：

[http://hostpicture.eu/?di=JZ05](http://hostpicture.eu/?di=JZ05)

关于如何解决这个问题的任何想法？

缩放设置为 100% 时没有问题。但是一旦我在 Chrome 中将缩放设置为 110% 或 120%，它就会出现。我在 Firefox 中使用不同的缩放值测试了该页面，完全没有问题。我也在IE9中测试过。100%、125%、200% 的缩放没有问题，但 150% 的缩放会出现同样的问题。

**我使用的代码：**

HTML：

```
<div class="ExerciseButtons">
    <a href="#">Check solution</a>
    <a href="#">Next exercise</a>
</div> 
```

CSS：

```
.ExerciseButtons{
margin-top:40px;
padding-left:30px;
}

.ExerciseButtons a{
margin-right:20px;
width:135px;
height:33px;
display:block;
color:white;
background-image: url("images/EmptyNextExerciseButton.png");
background-position: top left;
background-repeat: no-repeat;
text-align: center;
line-height:33px;
font-weight: bold;
text-decoration: none;
vertical-align: middle;
float:left;
font-family: Arial, Helvetica, sans-serif;
}

.ExerciseButtons a:hover {
    background-position: bottom left;
    color:white;
} 
```

我使用的图像（每个按钮为 135px X 33px。整个图像为 135px X 66px）：

[http://hostpicture.eu/?di=1GL1](http://hostpicture.eu/?di=1GL1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T09:44:50.643

在您的图像中，按钮相互接触 - 将图像中的按钮分开几个像素，这应该可以解决问题。

# java - 我将什么设置为 JAVA_HOME？

> ID：12240149
> 
> 赞同：1
> 
> 时间：2012-09-02T22:10:27.530
> 
> 标签：java, linux, ubuntu, ant, java-home

我刚刚安装了 Ubuntu 桌面 12.04 并通过以下方式安装了 Java 6 JDK：

> sudo apt-get install openjdk-6-jre

当我发出 `java -version 命令时，我得到：

> OpenJDK 运行时环境 (IcedTea6 1.11.3) (6b24-1.11.3-1ubuntu0.12.04.1) OpenJDK 64 位服务器 VM（构建 20.0-b12，混合模式）

当我发出“which java”命令时，我得到：

> /usr/bin/java

但是当我去的时候`/usr/bin/`，我没有看到一个名为 的目录`java`，所以我认为它甚至不存在！？！

当我去 时`/usr/lib/jvm/`，我看到：

```
-rw-r--r--   1 root root  2387 Jun 27 05:21 .java-1.6.0-openjdk-amd64.jinfo
drwxr-xr-x   5 root root  4096 Aug 31 19:28 java-6-openjdk-amd64
drwxr-xr-x   3 root root  4096 Aug 31 19:28 java-6-openjdk-common
drwxr-xr-x   5 root root  4096 Aug 31 19:28 java-7-openjdk-amd64 
```

我现在正在尝试将其添加`JAVA_HOME`为环境变量，`~/.bashrc`以便可以从基于 shell 的 Ant 构建中访问它：

> 导出 JAVA_HOME=???

我不确定要设置什么值`JAVA_HOME`：

*   `/usr/bin/java`?
*   `/usr/lib/jvm`?
*   还有什么？

“ `JAVA_HOME`”是指我系统上安装的 JDK 6 的顶级目录，无论它在哪里......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T22:13:30.360

让系统为你配置

```
sudo update-alternatives --config java 
```

如需进一步参考，请参阅[选择默认 Java 以使用](https://help.ubuntu.com/community/Java#Choosing_the_default_Java_to_use)Ubuntu 文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T22:18:24.923

我没有在我的 Linux 机器上配置 $JAVA_HOME - 我不记得曾经需要这样做。

当您查看时`/usr/bin`，您正在查看二进制文件 - 因此是**bin**。快速查看文件是什么会发现它是一个符号链接，它指向一个符号链接，该链接指向您的 Java 安装所在的任何位置。

```
$ file `which java`
/usr/bin/java: symbolic link to `/etc/alternatives/java' 
```

让系统为您配置它是一个更好的选择 - 通过使用[update-alternatives](http://linux.die.net/man/8/update-alternatives)或[update-java-alternatives](http://www.linuxcertif.com/man/8/update-java-alternatives/) - 后者更适合完全切换整个 Java 版本。

# c# - 为什么有时richTextBox 会闪烁？

> ID：12240151
> 
> 赞同：1
> 
> 时间：2012-09-02T22:10:38.660
> 
> 标签：c#

我在richTextBox 中更新了两个变量，因为我不希望每次我对richTextbox 执行Clear() 时它都移动到新行。但是在richextBox中每隔几秒钟清除它时就像闪烁一样。在 Clear() 之前我使用过：richTextBox1.Text = ""; 但它给出了相同的结果。

有什么办法可以避免吗？

```
private void timer1_Tick(object sender, EventArgs e)
        {
            richTextBox1.Clear();
            memUsage = theMemCounter.NextValue();
            label1.Text = memUsage.ToString();
            Logger.Write("Memory Usage   " + memUsage.ToString());
            AppendText(richTextBox1, "Memory Usage   " + memUsage.ToString() + Environment.NewLine, Color.Red);
            cpuUsage = this.theCPUCounter.NextValue();
            label2.Text = cpuUsage.ToString();
            Logger.Write("Cpu Usage   " + this.cpuUsage.ToString());
            AppendText(richTextBox1, "Cpu Usage   " + cpuUsage.ToString() + Environment.NewLine, Color.Blue);
            Values.Add(cpuUsage);
            isProcessRunning();
            if (alreadyRun == true)
            {
                processValues.Add(cpuUsage);
            }

        } 
```

也许我应该使用其他东西然后 richTextBox ？我使用richTextBox 为里面的文本着色。

这是 AppendText 函数：

```
public  void AppendText( RichTextBox box, string text, Color color)
        {
            box.SelectionStart = box.TextLength;
            box.SelectionLength = 0;

            box.SelectionColor = color;
            box.AppendText(text);
            box.SelectionColor = box.ForeColor;
        } 
```

# git - git am 和 git apply 有什么区别？

> ID：12240154
> 
> 赞同：176
> 
> 时间：2012-09-02T22:10:53.653
> 
> 标签：git, patch

两者`git am`都`git apply`可以用于应用补丁。我看不出有什么区别。我现在看到了一个不同之处：`git am`自动提交，而`git apply`只触及文件但不创建提交。这是唯一的区别吗？

* * *

## 回答 #1

> 赞同：192
> 
> 时间：2012-09-02T22:23:10.293

输入和输出都不一样：

*   [`git apply`](https://git-scm.com/docs/git-apply)获取一个补丁（例如 的输出[`git diff`](https://git-scm.com/docs/git-diff)）并将其应用于工作目录（或索引，如果使用`--index`或`--cached`）。
*   [`git am`](https://git-scm.com/docs/git-am)接受格式化为电子邮件消息的提交邮箱（例如 的输出[`git format-patch`](https://git-scm.com/docs/format-patch)）并将它们应用于当前分支。

[`git am``git apply`在幕后使用](https://github.com/git/git/blob/bbcefff/git-am.sh#L151)，但在之前（读取`Maildir`or`mbox`和解析电子邮件）和之后（创建提交）做更多的工作。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-09-02T22:21:01.753

`git apply`用于应用直接差异（例如 from `git diff`），而`git am`用于从电子邮件应用补丁和补丁序列，mbox 或 Maildir 格式，并且是`git format-patch`. `git am`尝试从电子邮件中提取提交消息和作者详细信息，这就是它可以进行提交的原因。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-09-02T22:20:31.413

随着`git am`您应用补丁，因此当您运行时`git status`您不会看到任何本地更改，但`git log`会显示补丁已提交到源代码。

但是，`git apply`您在源文件中进行更改，就好像您自己编写代码一样，因此`git status`将`git diff`输出您应用的补丁中出现的更改。因此，`git apply`您可以修复/添加更多更改，并将`git add`它们一起作为一个新补丁。

# javascript - 为什么我们要在 tearDown 中删除 [object].[property]（单元测试）

> ID：12240155
> 
> 赞同：1
> 
> 时间：2012-09-02T22:11:17.240
> 
> 标签：javascript, unit-testing, buster.js

**代码：**

```
var buster = require('buster'),
    NumberCruncher = require('../src/NumberCruncher');

buster.testCase('Number Cruncher', {
    setUp: function() {
        this.numberCruncher = new NumberCruncher();
    },
    tearDown: function() {
        delete this.numberCruncher;
    },
    'constructor returns numberCruncher': function() {
        assert(this.numberCruncher instanceof NumberCruncher);
    },
    'object constructor correct': function() {
        assert.equals(this.numberCruncher.constructor, NumberCruncher);
    },
    'can add numbers': function() {
        buster.assert.equals(this.numberCruncher.add(5,3), 8, 'NumberCruncher cannot add');
    }
}); 
```

**背景：**

在`setUp`中，我们正在创建一个对象并将其设置为`this`（测试用例）的属性。在`tearDown`我们正在删除所述属性。

**问题：**

如果非要解释在方法中删除对象属性的做法背后的想法或原因`tearDown`，你会说什么？为什么这是一件好事？它有好处吗？它只有在扩展到非常大的对象时才有好处吗？

**我的想法：**

我的推理（可能是错误的）是我们保证在每次测试运行后进行垃圾收集。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T22:19:41.680

垃圾收集是否得到保证是无关紧要的。更重要的是将该值重置为已知状态（在本例中为未定义状态），这样就没有机会通过使用最后一个脏数据来创建误报或误报测试用例。

# objective-c - 如何使用此方法将多个文本字段添加到 PDF？

> ID：12240156
> 
> 赞同：0
> 
> 时间：2012-09-02T22:11:20.777
> 
> 标签：objective-c, pdf, uitextfield, nsuserdefaults

我正在使用 NSUserDefaults 将输入的文本保存到多个 UITextField 中。我想在 PDF 上显示文本。我可以使用以下方法处理每个字段并将其添加到 PDF 中吗？现在在我的示例中，您可以看到我是如何添加“名称”字段的。任何提示表示赞赏！

```
 +(void)drawText
{
   NSUserDefaults * prefs = [NSUserDefaults standardUserDefaults];
   NSString * nameString = [prefs stringForKey:@"name"];

   CFStringRef stringRef = (CFStringRef)nameString;

   // Prepare the text using a Core Text Framesetter
   CFAttributedStringRef currentText = CFAttributedStringCreate(NULL, stringRef, NULL);
   CTFramesetterRef framesetter = CTFramesetterCreateWithAttributedString(currentText);

   CGRect frameRect = CGRectMake(30, 0, 300, 60);
   CGMutablePathRef framePath = CGPathCreateMutable();
   CGPathAddRect(framePath, NULL, frameRect);

   // Get the frame that will do the rendering.
   CFRange currentRange = CFRangeMake(0, 0);
   CTFrameRef frameRef = CTFramesetterCreateFrame(framesetter, currentRange, framePath, NULL);
   CGPathRelease(framePath);

   // Get the graphics context.
   CGContextRef currentContext = UIGraphicsGetCurrentContext();

   // Put the text matrix into a known state. This ensures
   // that no old scaling factors are left in place.
   CGContextSetTextMatrix(currentContext, CGAffineTransformIdentity);

   // Core Text draws from the bottom-left corner up, so flip
   // the current transform prior to drawing.
   CGContextTranslateCTM(currentContext, 0, 100);
   CGContextScaleCTM(currentContext, 1.0, -1.0);

   // Draw the frame.
   CTFrameDraw(frameRef, currentContext);

   CFRelease(frameRef);
   CFRelease(stringRef);
   CFRelease(framesetter);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T05:10:29.647

为 textField 中的动态文本更改如下所示的方法：

```
+(void)drawText:(NSString *)value index:(int)index
{
   //NSUserDefaults * prefs = [NSUserDefaults standardUserDefaults];
   //NSString * nameString = [prefs stringForKey:@"name"];

   CFStringRef stringRef = value; //(CFStringRef)nameString;

   // Prepare the text using a Core Text Framesetter
   CFAttributedStringRef currentText = CFAttributedStringCreate(NULL, stringRef, NULL);
   CTFramesetterRef framesetter = CTFramesetterCreateWithAttributedString(currentText);

   CGRect frameRect = CGRectMake(30, (index*70), 300, 60); //for horizontal textfields
   CGMutablePathRef framePath = CGPathCreateMutable();
   CGPathAddRect(framePath, NULL, frameRect);

   // Get the frame that will do the rendering.
   CFRange currentRange = CFRangeMake(0, 0);
   CTFrameRef frameRef = CTFramesetterCreateFrame(framesetter, currentRange, framePath, NULL);
   CGPathRelease(framePath);

   // Get the graphics context.
   CGContextRef currentContext = UIGraphicsGetCurrentContext();

   // Put the text matrix into a known state. This ensures
   // that no old scaling factors are left in place.
   CGContextSetTextMatrix(currentContext, CGAffineTransformIdentity);

   // Core Text draws from the bottom-left corner up, so flip
   // the current transform prior to drawing.
   CGContextTranslateCTM(currentContext, 0, 100);
   CGContextScaleCTM(currentContext, 1.0, -1.0);

   // Draw the frame.
   CTFrameDraw(frameRef, currentContext);

   CFRelease(frameRef);
   CFRelease(stringRef);
   CFRelease(framesetter);
} 
```

像这样使用，因为我假设你有用于添加文本字段的值数组：

```
for(int i=0;i>[arrOfValues count];i++)
{
   [YourControllerName drawText:[arrOfValues objectAtIndex:i] index:i];
} 
```

# c++ - 使用模板重载 C++ 中的运算符

> ID：12240157
> 
> 赞同：0
> 
> 时间：2012-09-02T22:11:32.520
> 
> 标签：c++, templates, casting, operators, overloading

我对 C++ 中的运算符重载有疑问。

我定义了以下类：

```
template <class T>
class Array
{
public:
//! Default constructor
Array(int ArraySize = 10);

////! Defualt destructor
Array<T>::~Array();

//! Redefinition of the subscript operator
T& Array<T>::operator[] (int index);

//! Redefinition of the assignment operator
const Array<T>& Array<T>::operator=(const Array<T>&);

//! Redefinition of the unary operator -
Array<T>& operator-(Array<T>& a);

//! Array length
int size;

private:
//! Array pointer
T *ptr;
}; 
```

一元运算符 - 定义如下：

```
//! Redefinition of the unary operator -
template<class T> 
 Array<T>& operator-(Array<T>& a){
    static Array<T> myNewArray(a.size);

    for( int i = 0; i < a.size; i++){
    myNewArray[i]=-a[i];    
    }
    return myNewArray;
} 
```

如何避免“myNewArray”记忆中的持久性？当函数结束并且像 VectorA=-VectorB 这样的赋值失败时，Whitout“静态”声明 myNewArray 会消失。

第二个问题是关于强制转换运算符的重载；我以这种方式重载了铸造运算符：

```
//!CASTING
template <class B>
operator Array<B>(){
    static Array<B> myNewArray(size);

.... a function makes the conversion and returns myNewArray populated...

return myNewArray;
} 
```

但它不起作用！在使用静态声明执行函数后，对象 myNewArray 似乎也消失了。任何像 VectorA=(Array<'anytype'>)VectorB 这样的赋值都会失败。

错误在哪里？请大家提出解决方案好吗？先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T22:17:34.690

对于您的运营商，不要返回参考。返回 myNewArray 的副本。大多数编译器可以省略复制并使用返回值优化来使性能可以接受。

您还应该将这些方法标记为 const，因为它们不会更改状态。

```
template<class T> 
 Array<T> operator-(const Array<T>& a) {
    Array<T> myNewArray(a.size);

    for( int i = 0; i < a.size; i++){
    myNewArray[i]=-a[i];    
    }
    return myNewArray;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T22:17:00.710

> 如果没有“静态”声明，myNewArray 会在函数结束时消失，并且任何赋值失败，例如 VectorA=-VectorB。

不，它没有。编译器确保它挂起足够长的时间以被复制。

此外，如果将 myNewArray 初始化为原始的副本，则代码会更简洁：

```
Array<T> myNewArray(a);
for (int i = 0; i < myNewArray.size(); ++i)
    myNewArray[i] *= -1; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-02T22:21:07.977

嗯，既然这两个问题都涉及到正确分配新值的神秘失败，那么赋值运算符有什么问题吗？

# linux - 用于阻止和解除阻止端口的脚本

> ID：12240166
> 
> 赞同：2
> 
> 时间：2012-09-02T22:12:14.800
> 
> 标签：linux, port, block, iptables

```
root@node2:~# iptables --list
Chain INPUT (policy ACCEPT)
target     prot opt source               destination
DROP       tcp  --  anywhere             anywhere             multiport dports iscsi-target

Chain FORWARD (policy ACCEPT)
target     prot opt source               destination

Chain OUTPUT (policy ACCEPT)
target     prot opt source               destination 
```

如何编写脚本来删除阻止 iscsi-target 端口 (3260) 的规则？我试过做：

```
iptables -A INPUT -p tcp --dport 3260 -j ACCEPT 
```

但我所做的只是插入一个新规则，它不会解除对端口的阻塞。

使用：

```
portblock::tcp::3260::unblock, from /etc/ha.d/haresources, does not remove the block to port 3260. 
```

现在，我正在使用`iptables --flush`after`portblock::tcp::3260::block`来解锁端口 3260。

最终，我想建立一个防火墙，这意味着我只想暂时阻止端口 3260，然后取消阻止它。

有人可以帮我编写一个脚本，然后我可以调用它来阻止端口 3260，然后用另一个脚本取消阻止它吗？

谢谢，

JC

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T22:17:45.957

如果您使用`-A`，则您将附加到链中，因此，在此之前的链中匹配的任何规则都将优先。您需要使用`-I`在第一个位置插入。

```
iptables -I INPUT -p tcp --dport 3260 -j ACCEPT 
```

事实上，您的默认策略是 ACCEPT，但您的链中的第一条规则是将任何来源的任何内容 DROP 到任何目的地，这将始终匹配 INPUT 链中的任何内容。

您应该删除该规则

```
iptables -D INPUT 1 
```

然后您可以附加要添加的规则。

总之，您可以通过简单地将规则插入到 INPUT 链中的位置 0 来解锁端口 2360：

```
iptables -I INPUT -p tcp --dport 3260 -j ACCEPT 
```

并通过删除相同的规则再次阻止它`iptables -D INPUT 0`

默认情况下，我认为这是一套很好[的规则](http://wiki.centos.org/HowTos/Network/IPTables)：

```
# iptables -P INPUT ACCEPT
# iptables -F
# iptables -A INPUT -i lo -j ACCEPT
# iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT
# iptables -A INPUT -p tcp --dport 22 -j ACCEPT
# iptables -P INPUT DROP
# iptables -P FORWARD DROP
# iptables -P OUTPUT ACCEPT 
```

你应该检查[这个链接](http://wiki.centos.org/HowTos/Network/IPTables)。底部有一个完整的脚本，您可以使用它来设置带有一组好的规则的 IPTables，您可以根据自己的需要进行修改。

# jquery - jquery动画UL/li

> ID：12240179
> 
> 赞同：0
> 
> 时间：2012-09-02T22:16:00.460
> 
> 标签：jquery, html-lists, slide, animated

在这个网站上寻找简单的脚本来为我的 UL 设置动画（幻灯片，上旧 LI，下新 li） [http://static.livedemo00.template-help.com/wt_40268/](http://static.livedemo00.template-help.com/wt_40268/)

我试过：http: [//jsfiddle.net/kndd9/1/](http://jsfiddle.net/kndd9/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T22:34:39.497

使用 jQuery slideDown/slideUp 而不是动画。

[http://api.jquery.com/slideDown/](http://api.jquery.com/slideDown/)

[http://api.jquery.com/slideUp/](http://api.jquery.com/slideUp/)

# ios - Xcode 中的 Getter 和 Setter 没有问题

> ID：12240182
> 
> 赞同：3
> 
> 时间：2012-09-02T22:16:21.970
> 
> 标签：ios, xcode

当我查看 iOS 5 开发人员库时，它说我必须为我创建的每个变量包含访问器方法。但是，当我输入

```
@property (weak, nonatomic) NSString *userName; 
```

但是，我没有看到任何错误说我需要“getter”和“setter”。难道我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T22:21:02.897

Xcode 4.4 中的一个新功能是，如果您自己不这样做，它会自动合成属性，如下[所述](https://developer.apple.com/library/ios/#documentation/DeveloperTools/Conceptual/WhatsNewXcode/00-Introduction/Introduction.html)：

> 对于未实现的@properties，编译器默认自动调用@synthesize。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T02:24:24.050

您不会收到有关需要“getter”和“setter”的消息，因为当编译器“合成”该属性时，会为您创建这些访问器方法。您不必担心它们。当编译器遇到`@synthesize`指令时（在 Xcode 4.4 中，甚至不再需要），您的访问器方法将为您创建。

[这在 Apple 的The Objective-C Programming Language](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html)的声明属性部分进行了讨论。

顺便说一句，当您说您看到“必须为每个变量包含访问器方法”这一事实时，我假设您是在谈论在特定上下文中需要这样做。这当然不是 iOS 应用程序中所有变量的一般要求。有时它们很有用。并且有一些 iOS 功能需要它们。但这不是一揽子规则。

# c# - 将图像加载到 writeablebitmap

> ID：12240184
> 
> 赞同：5
> 
> 时间：2012-09-02T22:16:38.860
> 
> 标签：c#, silverlight, writeablebitmap

所以我试图将图像加载到 WriteableBitmap 中，但我得到了 NullReferenceException。不知道为什么，因为我认为这以前可以工作

`BitmapImage b = new BitmapImage(new Uri(@"images/Car.jpg", Urikind.Relative));` `WriteableBitmap wb = new WriteableBitmap(b);`

就是这样。我将汽车图像作为项目中的资源。它工作正常，因为我可以创建一个 Image 控件并将其源设置为 BitmapImage 并显示它。谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-03T00:37:39.100

从其他 SO 问题中可以看出，您获得空引用异常的原因似乎是[BitmapImage.CreateOptions 属性](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapimage.createoptions%28v=vs.95%29.aspx)默认值为`BitmapCreateOptions.DelayCreation`. 您可以将其设置为并在加载图像后`BitmapCreateOptions.None`创建：`WriteableBitmap`

```
BitmapImage img = new BitmapImage(new Uri("somepath",UriKind.Relative));
img.CreateOptions = BitmapCreateOptions.None;
img.ImageOpened += (s, e) =>
   {
       WriteableBitmap wbm = new WriteableBitmap((BitmapImage)s);
   }; 
```

使用该代码，`WritableBitmap`将等到`BitmapImage`加载，然后将能够分配给`WritableBitmap`.

# php - SQL 选择两小时之间的记录

> ID：12240189
> 
> 赞同：1
> 
> 时间：2012-09-02T22:17:26.437
> 
> 标签：php, sql, cakephp, date, time

我有一个表格，其中包含两个字段，描述了每家商店的营业时间——“从”和“到”以 24 小时格式整数表示。我创建了一个搜索页面，允许用户查找在给定时间营业的商店。

我真的不知道如何创建 SQL 查询，主要问题是有两种情况。

一种情况是 from 值大于 to 值，例如从 23 到 5，它给出两个区间 23 到 24 和 1 到 5。

第二种情况是当值大于值（比如从 8 到 22）时，我得到一个区间。

知道如何创建在这两种情况下都可以使用的查询吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T22:22:35.490

让我们假设这个表模式：

```
store
id  fromH  toH
 1     23   5
 2      8  22 
```

和一个参数@T（你正在寻找的时间）

然后选择是：

```
select *
from store
where 
  ( fromH < toH and @t between fromH and toH ) or
  ( fromH > toH and 
         (@t between fromH and 24 OR
         (@t between 1 and toH )
  ) 
```

**解释**

从以下商店中选择所有字段：

*   开始营业时间 > 关闭营业时间，您的营业时间介于两者之间。
*   或者
*   开始营业时间 < 关闭营业时间，您的营业时间介于营业时间和 24 小时或 1 小时和关闭时间之间。

# yahoo - 雅虎！管道 - 更新所有子项目？

> ID：12240192
> 
> 赞同：0
> 
> 时间：2012-09-02T22:17:50.650
> 
> 标签：yahoo, yahoo-pipes

我已经尝试了几个小时，但没有找到解决这个问题的方法。

[我正在设计](http://pipes.yahoo.com/pipes/pipe.info?_id=2c572f1db5e815682f5f8bc21b122a8d)一个管道，可以从不同的 RSS 提要中提取数据。这些提要的 URL 位于 CSV 文件中，因此我可以在将来对这个管道进行参数化。

一切正常，但是当我尝试**将原始提要的 URL 添加到****Fetch Feed 循环**返回的每个帖子中时，我只能将其添加到第一个中。我在第二个循环中将此信息添加为*item.feed.feedUrl 。*

我需要一个解决方案，以便我可以将这些信息添加到所有帖子中，以便以后确定它们的来源。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T21:58:26.200

虽然我不能完全回答这个问题，但我开发了一个解决方案，允许我返回每个第一个帖子的提要数据以及原始提要的 URL。

要了解我做了什么，欢迎您访问最终的[FeedMerge Pipe](http://pipes.yahoo.com/pipes/pipe.info?_id=2c572f1db5e815682f5f8bc21b122a8d)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T10:18:07.800

可能有更简单的解决方案，但以下解决方案应该可以解决您的问题。

**短版：**在第一个循环中使用子管道

**长版：**

***1)***使用唯一参数（“feedurl”）构建另一个管道（其名称可能是“FeedMergeSub”）

在这个子管道中：

*   获取 feedurl 参数的页面
*   添加带有 feedurl 信息的字段“originalfeed”

***2)***在主管道“FeedMerge”中使用子管道“FeedMergeSub”

在第一个循环中，将“Fetch feed”运算符替换为您的子管道（“FeedMergeSub”）并将其“item.link”作为“feedurl”参数传递

# jquery - CoffeeScript：将来自 jQuery Ajax 调用的数据存储在变量中

> ID：12240193
> 
> 赞同：1
> 
> 时间：2012-09-02T22:17:52.423
> 
> 标签：jquery, ajax, coffeescript

我正在使用 CoffeeScript 和 jQuery，试图从存储在局部变量中的 ajax 调用中获取数据，以便可以在我的其余方法中使用它。这是我现有的代码：

```
response = null
$.ajax
  url: '/polygons'
  dataType: 'json'
  success: (data, textStatus, jqHXR) ->
    response = data

console.log response 
```

使用此代码，响应始终保持为空。我想做的就是将数据变量从成功函数中取出并放入调用方法中，但我似乎无法将其从该范围中取出。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T22:20:44.857

Ajax 是异步的，所以调用时不会设置`console.log response`响应，在回调函数中使用响应。

```
response = null
$.ajax
  url: '/polygons'
  dataType: 'json'
  success: (data, textStatus, jqHXR) ->
    response = data
    console.log response 
```

* * *

> 如何确保脚本在此之后等待，直到 ajax 调用完成，因此它不会继续使用空响应对象？

您应该只在回调函数中进行所有处理，如果您不想这样做，您可以通过在 ajax 选项中将 async 更改为 false 来使 ajax 调用同步

# ubuntu - Cloud-init 每次启动脚本什么都不做

> ID：12240194
> 
> 赞同：4
> 
> 时间：2012-09-02T22:17:57.043
> 
> 标签：ubuntu, amazon-ec2, cloud-init

我是 cloud-init 的新手，我的最终目标是每次 EC2 Spot 实例激活时运行一个 R 脚本，但为了测试它，我创建了一个按需 Ubuntu 12.04 实例并创建了一个简单的脚本，但之后没有任何反应重启。以下是我采取的步骤：

*   启动了新的 Ubunut 12.04 实例
*   导航`/var/lib/cloud/scripts/per-boot`
*   `sudo vi script.sh`
*   添加了以下代码：

> #!/bin/sh
> 回显“测试”

*   `sudo reboot`

在这一点上，我想当实例重新启动时我应该看到一个“测试”打印，但那里什么也没有。我去看看，`/var/log/cloud-init.log`但没有错误或任何异常。

我显然错过了一些东西，所以任何正确方向的提示都将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2020-10-22T04:18:50.770

看了[源码](https://github.com/canonical/cloud-init/blob/93cebe009d116230850c770227e9ead5c490c0d0/cloudinit/subp.py#L375)，脚本一定是可执行的。这会让它工作

`sudo chmod 744 script.sh`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T22:10:44.183

除非脚本用户设置为始终运行，否则它不会运行。有关更多详细信息，请参阅[此答案](https://stackoverflow.com/a/10455027/877115)（以及有关如何让脚本在重新启动时运行的说明）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-10-30T15:17:54.737

如果我们想调试 cloud-init 中的用户数据，我们可以尝试以下步骤：

1.  rm -rf /var/lib/cloud/*
2.  云初始化初始化
3.  cloud-init 模块 -m final

使用上述命令，重新运行 cloud-init。并且我们可以查看/var/log/cloud-init.log下的cloud-init.log，看看是否执行成功。

# python - PyQt Webkit 和 html 表单：获取输出和关闭窗口

> ID：12240195
> 
> 赞同：4
> 
> 时间：2012-09-02T22:18:02.133
> 
> 标签：python, webkit, pyqt4, forms

我正在尝试获得一个无边框的 python PyQt webkit 窗口来显示单个网站 html 表单。单击发送时，表单值应保存在字典中并关闭窗口。

到目前为止（在[SO](https://stackoverflow.com/a/10237534/289572)的帮助下）我有无边界窗口并且可以获取输入。但是，缺少两件事：

1.  按下发送后关闭窗口。
2.  获取字典中的输入`elements`（注意 的键`elements`对应于 html 表单名称）。

（可能反过来会更好，但 1 似乎更难）

到目前为止，我的代码是：

```
import sys

from PyQt4.QtCore import *
from PyQt4.QtGui import *
from PyQt4.QtWebKit import *

elements = {"like":"", "text": ""}

class MyWebPage(QWebPage):
    def acceptNavigationRequest(self, frame, req, nav_type):
        if nav_type == QWebPage.NavigationTypeFormSubmitted:
            text = "<br/>\n".join(["%s: %s" % pair for pair in req.url().queryItems()])
            print(text)
            return True
        else:
            return super(MyWebPage, self).acceptNavigationRequest(frame, req, nav_type)

class Window(QWidget):
    def __init__(self, html):
        super(Window, self).__init__()
        self.setWindowFlags(Qt.FramelessWindowHint)
        view = QWebView(self)
        layout = QVBoxLayout(self)
        layout.addWidget(view)
        view.setPage(MyWebPage())
        view.setHtml(html)

# setup the html form
html = """
<form action="" method="get">
Like it?
<input type="radio" name="like" value="yes"/> Yes
<input type="radio" name="like" value="no" /> No
<br/><input type="text" name="text" value="Hello" />
<input type="submit" name="submit" value="Send"/>
</form>
"""

def main():
    app = QApplication(sys.argv)

    window = Window(html)
    window.show()
    app.exec_()

if __name__ == "__main__":
    main() 
```

一个完美的答案不仅会显示如何**(a) 保存输入**和**(b) 关闭窗口**，而且**(c) 还会删除 html 页面周围剩余的灰色小边框**。

**更新**：我使用 Python 2。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T00:15:30.423

要将表单数据放入 a`dict`中，最好使用[`unquote_plus`](http://docs.python.org/py3k/library/urllib.parse.html#urllib.parse.unquote_plus)python 标准库，因为（与 不同`QUrl`）它可以处理加号和百分比编码。

`formSubmitted`要关闭窗口，您可以从网页发出信号，并将其连接到主窗口上的处理程序。然后这个处理程序可以调用`close()`主窗口，对表单数据进行所有处理，最后`quit()`是应用程序。

要删除页面周围的边框，请将[`contentsMargins`](http://doc-snapshot.qt-project.org/4.8/qlayout.html#contentsMargins)主布局的 设置为零。

这是实现上述想法的脚本的修订版本：

```
import sys
from urllib import unquote_plus

from PyQt4.QtCore import *
from PyQt4.QtGui import *
from PyQt4.QtWebKit import *

class MyWebPage(QWebPage):
    formSubmitted = pyqtSignal(QUrl)

    def acceptNavigationRequest(self, frame, req, nav_type):
        if nav_type == QWebPage.NavigationTypeFormSubmitted:
            self.formSubmitted.emit(req.url())
        return super(MyWebPage, self).acceptNavigationRequest(frame, req, nav_type)

class Window(QWidget):
    def __init__(self, html):
        super(Window, self).__init__()
        self.setWindowFlags(Qt.FramelessWindowHint)
        view = QWebView(self)
        layout = QVBoxLayout(self)
        layout.addWidget(view)
        layout.setContentsMargins(0, 0, 0, 0)
        view.setPage(MyWebPage())
        view.setHtml(html)
        view.page().formSubmitted.connect(self.handleFormSubmitted)

    def handleFormSubmitted(self, url):
        self.close()
        elements = {}
        for key, value in url.encodedQueryItems():
            key = unquote_plus(bytes(key)).decode('utf8')
            value = unquote_plus(bytes(value)).decode('utf8')
            elements[key] = value
        # do stuff with elements...
        for item in elements.iteritems():
            print '"%s" = "%s"' % item
        qApp.quit()

# setup the html form
html = """
<form action="" method="get">
Like it?
<input type="radio" name="like" value="yes"/> Yes
<input type="radio" name="like" value="no" /> No
<br/><input type="text" name="text" value="" />
<input type="submit" name="submit" value="Send"/>
</form>
"""

def main():
    app = QApplication(sys.argv)

    window = Window(html)
    window.show()
    app.exec_()

if __name__ == "__main__":
    main() 
```

# jquery - 如果孩子：包含x，jquery会添加到父母

> ID：12240197
> 
> 赞同：2
> 
> 时间：2012-09-02T22:18:04.050
> 
> 标签：jquery, jquery-selectors, conditional, parent-child

如果孩子包含“组”这个词，我想在它的父母前面加上一些东西。如何将其设置为有条件的？

```
$("#breadcrumbs ul li:nth-child(4):contains('Group')").css("display","block");
$("#breadcrumbs").prepend("<p>relevant note about Groups</p>"); 
```

为了

```
<nav id="breadcrumbs" role="navigation">
<ul>
<li>Home</li>
<li>Section</li>
<li>People</li>
<li>Group 1</li>
</ul>
</nav> 
```

[小提琴](http://jsfiddle.net/FqzGs/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T22:21:50.457

这是您要查找的内容吗：http: [//jsfiddle.net/NLfmU/1/](http://jsfiddle.net/NLfmU/1/) *或* [http://jsfiddle.net/anWRa/](http://jsfiddle.net/anWRa/)

使用`.parent`api 附加到当前孩子的父母

希望它符合需要`:)`，如果我错过了什么，请告诉我！

[http://jsfiddle.net/NLfmU/](http://jsfiddle.net/NLfmU/)

**代码**

```
$("#breadcrumbs ul li:nth-child(4):contains('Group')").css("display","block").parent().prepend("<p>relevant note about Groups</p>");
​ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-02T22:23:17.033

尝试这个：

```
var $elem = $("#breadcrumbs ul li:contains('Group')");
if ($elem.length) {
    $elem.css('display', 'block').parent().prepend("<p>relevant note about Groups</p>")
} 
```

[http://jsfiddle.net/FqzGs/5/](http://jsfiddle.net/FqzGs/5/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-02T22:24:25.357

我建议使用不同的方法：

```
$('ul li:eq(3):contains("group")').closest('nav')
    .css('display','block')
    .prepend('<p>relevant note about Groups</p>'); 
```

这不是明确的条件，但需要`li`包含单词“组”的存在才能执行任何操作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-02T22:22:02.017

你离得太近了！`append`是你所追求的，而不是`prepend`.

Prepend 会将信息放在您的选择之前，然后`append`将其放在后面。

我猜你想把它放在符合你要求的那个之后，而不是在所有列表之前？如果是这样，请查看 jsfiddle :)。

我为您创建了一个[jsfiddle](http://jsfiddle.net/wigster/WwjAZ/)，向您展示如何操作。

**代码**

```
$("#breadcrumbs ul li:nth-child(4):contains('Group')").css("display","block")
   .append("<p>relevant note about Groups</p>"); 
```

​</p>

# php - Mysql 限制仅针对某一列的空行

> ID：12240200
> 
> 赞同：2
> 
> 时间：2012-09-02T22:18:32.790
> 
> 标签：php, mysql, sql

我有类似的东西，`$SQL = "SELECT * FROM profile_comments WHERE name = '$username' LIMIT $offset, $rowsperpage";`但我想知道是否可以仅针对某一列的空行限制结果？

示例

```
$SQL = "SELECT * FROM profile_comments WHERE name = '$username' LIMIT table is NULL 5, 10"; 
```

profile_comments

```
id | parent_id |  name |    text    | datetime
-------------------------------------------------
 1 |   null    | Netra |  Bla bla   | 00.00.0000
 2 |    1      | Netra |  Bla bla   | 00.00.0000
 3 |    1      | Netra |  Bla bla   | 00.00.0000
 4 |   null    | Netra |  Bla bla   | 00.00.0000
 5 |    4      | Netra |  Bla bla   | 00.00.0000 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T22:20:16.153

您需要在`WHERE`子句中添加该条件，而不是在限制子句之后。这个怎么样？

```
$SQL = "SELECT * 
        FROM profile_comments 
        WHERE name = '$username' AND  
              `table` is NULL 
        LIMIT 5, 10"; 
```

答案：

`SELECT * FROM profile_comments WHERE PARENT_ID IS NOT NULL UNION SELECT * FROM profile_comments WHERE PARENT_ID IS NULL GROUP BY PARENT_ID;`

# android - 处理上下文动作

> ID：12240202
> 
> 赞同：0
> 
> 时间：2012-09-02T22:18:44.187
> 
> 标签：android

默认情况下，在启用上下文操作时，我们可以在左侧看到操作 DONE。

1）如何添加另一个动作取消？

2) 在点击动作完成上下文动作模式被禁用。如何在单击完成之前添加一些验证，如果需要，取消此操作（单击时不要禁用操作模式）？

3) 我可以隐藏动作 DONE 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T22:28:46.467

> How I can add another action CANCEL?

That is not necessary, as the user can just click the BACK button to dismiss the action mode.

> How I can add some verify before click DONE and if need, cancel this action (on click do not disable action mode)?

That is not supported, sorry.

> Can I hide action DONE?

That is not supported, sorry.

It really sounds like an action mode is not the right approach for whatever it is you are attempting to accomplish. You could consider making a separate activity for this particular operation and using the "done" or "done/discard" custom action views that [Roman Nurik wrote about](https://plus.google.com/113735310430199015092/posts/R49wVvcDoEW).

# eclipse - 在 Emacs 中搜索目录

> ID：12240204
> 
> 赞同：1
> 
> 时间：2012-09-02T22:19:09.193
> 
> 标签：eclipse, search, emacs, grep

我最近从 Eclipse 切换到 Emacs，我真正怀念的一个特性是 Eclipse 文件搜索。它允许您非常准确地（尽管速度很慢）搜索整个项目的特定搜索词。在我一直在使用的 Emacs 中，`M-x rgrep`但它似乎没有给出可靠的结果。例如，如果我搜索 0.1，它将不会返回包含 '0.1' 的代码行的结果（用引号括起来的匹配项）。

任何人都可以提出更准确的替代方案`rgrep`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T10:56:58.057

我推荐[ack](http://www.emacswiki.org/emacs/Ack)。它可以智能地忽略您不想搜索的文件（例如版本控制目录）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T09:52:10.503

我推荐使用“igrep”库来搜索文件，你可以在[这里](http://www.emacswiki.org/cgi-bin/wiki/igrep.el)找到它。要开始使用将此行添加到您的 .emacs 文件（不要忘记将 igrep.el 添加到 emacs-path，它可以是 ~/.emacs.d/ 例如）：

```
(require 'igrep)
(global-set-key "\C-cf" 'igrep-find) 
```

因此，您可以使用 [C-cf] 开始搜索，它在搜索中询问文件名的模式，并在查询中进行搜索。希望能帮助到你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T14:55:25.820

如果您正在处理 linux 内核或 android 等大型项目，我建议您使用 beagrep。

它需要桌面搜索引擎 beagle 和 grep 一起使用，因此可以非常快速地完成常见的编程 grep 任务。例如，在 android 源代码中对 readlink 进行 grepping 可能需要半个多小时，而使用 beagrep 只需要半秒。

查看我的[github 页面](http://baohaojun.github.com/beagrep.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T13:41:01.843

`M-x multi-occur-in-matching-buffers`使用一个正则表达式来选择您要搜索的缓冲区，并使用第二个正则表达式来搜索您要查找的项目。

使用 emacs 的一个常见工作流程是在处理该项目时从不（或很少）关闭该项目中的缓冲区，因此在您研究了一段时间之后，您可能仍然会打开大多数文件。当然，如果你不这样工作，那么使用就没有多大`multi-occur...`用处了。

# c# - C# SerialPort DataReceived 事件未更新主 UI

> ID：12240205
> 
> 赞同：1
> 
> 时间：2012-09-02T22:19:14.567
> 
> 标签：c#, delegates, serial-port, multithreading

我目前正在研究一个完全用 c# 编写的防盗报警解决方案。该程序与基于 USB 串行端口的 IO 板通信，该 IO 板具有硬连线到其中的警报传感器。我遇到了一个问题，即 DataReceived 事件无法更新主 UI，除非我从 DataReceived 事件中调用一个名为 TextLog 的子（见末尾）。奇怪的是，来自查询区域 1 的 DataReceived 事件能够更新主 UI，但不能更新区域 2 或 3。此外，如果我在执行串行端口写入的行插入断点，它会按预期工作。

值得一提的是这些全局变量：

```
string ioCardRxString = "";

bool[] arrGlobalZoneStatus = new bool[4]; 
```

通过从设置文件中读取设置来打开串行端口（一切正常）。

```
private void OpenIOComPort()
    {
        bool error = false;

        else
        {
            // Set the port's settings
            spIOCard.PortName = Settings1.Default.ioComPort;
            spIOCard.BaudRate = int.Parse(Settings1.Default.ioBaudRate);
            spIOCard.DataBits = int.Parse(Settings1.Default.ioDataBits);
            spIOCard.StopBits = (System.IO.Ports.StopBits)Enum.Parse(typeof(System.IO.Ports.StopBits), Settings1.Default.ioStopBits);
            spIOCard.Parity = (System.IO.Ports.Parity)Enum.Parse(typeof(System.IO.Ports.Parity), Settings1.Default.ioParity);
            spIOCard.Handshake = (System.IO.Ports.Handshake)Enum.Parse(typeof(System.IO.Ports.Handshake), Settings1.Default.ioHandshake);

            try
            {
                // Open the port
                spIOCard.Open();
            }
            catch (UnauthorizedAccessException) { error = true; }
            catch (System.IO.IOException) { error = true; }
            catch (ArgumentException) { error = true; }

            //On error, advise the user
            if (error)
            {
                MessageBox.Show("Could not open the I/O Board COM port.");                    
                globalIOCardError = true;
            }

            if (!error)
            {
                globalIOCardError = false;
                // Do Nothing
            }

        }
    } 
```

定时器每 500 毫秒运行一次，它向串行端口写入 3 个命令，每个命令相隔 25 毫秒（硬件限制）。这些命令查询 IO 板以确定每个警报传感器的状态。

```
private void tmrAuditSensors_Tick(object sender, EventArgs e) 
    {
        try
        {
            if (globalIOCardError == false && Settings1.Default.disableSensorAudit == false)
            {
                if (Settings1.Default.zone1Armed == true)
                {
                    spIOCard.Write("~in01~");
                    System.Threading.Thread.Sleep(25);;
                }

                if (Settings1.Default.zone2Armed == true)
                {
                    spIOCard.Write("~in02~");
                    System.Threading.Thread.Sleep(25);;
                }

                if (Settings1.Default.zone3Armed == true)
                {
                    spIOCard.Write("~in03~");
                    System.Threading.Thread.Sleep(25);;
                }

                //Applicable results will appear on serial data received event
            }
        }
        catch
        {
            textLog("There was a problem writing to the serial port, check and restart app");
            emergencyHalt();
        }
    } 
```

Serial Port DataReceived 事件读取返回的字符串并写入全局布尔数组。如果该区域打开 (=1)，则为 True，如果该区域关闭 (=0)，则为 False。注意：星号线。

```
private void spIO_DataReceived(object sender, System.IO.Ports.SerialDataReceivedEventArgs e)
    {
        ioCardRxString = spIOCard.ReadExisting();
        textLog(ioCardRxString); //*Cannot make it work without this

        if (ioCardRxString.Contains("in05=1") == true)
        {
            arrGlobalZoneStatus[1] = true;
        }

        if (ioCardRxString.Contains("in05=0") == true)
        {
            arrGlobalZoneStatus[1] = false;
        }

        if (ioCardRxString.Contains("in01=1") == true)
        {
            arrGlobalZoneStatus[2] = true;
        }

        if (ioCardRxString.Contains("in01=0") == true)
        {
            arrGlobalZoneStatus[2] = false;
        }

        if (ioCardRxString.Contains("in17=1") == true)
        {
            arrGlobalZoneStatus[3] = true;
        }

        if (ioCardRxString.Contains("in17=0") == true)
        {
            arrGlobalZoneStatus[3] = false;
        }

    } 
```

另外，另一个计时器会定期（每 250 毫秒）检查每个数组成员的内容，然后相应地通过一些颜色更改和文本更新来更新主 UI。

```
 private void tmrCheckZoneStatus_Tick(object sender, EventArgs e)
    {
        if (arrGlobalZoneStatus[1] == true)
        {
            button10.BackColor = System.Drawing.Color.Red;
            textLog(button10.Text + " was activated");

            if (globalFullAlarmSet || globalNightAlarmSet || globalDoorsAlarmSet)
            {
                this.BeginInvoke(new EventHandler(delegate { checkAndActivateRelays(1); }));
            }
        }

        if (arrGlobalZoneStatus[1] == false)
        {
            button10.BackColor = System.Drawing.Color.Gray;
        }

        if (arrGlobalZoneStatus[2] == true)
        {
            button11.BackColor = System.Drawing.Color.Red;
            textLog(button11.Text + " was activated"); ;

            if (globalFullAlarmSet || globalNightAlarmSet || globalDoorsAlarmSet)
            {
                this.BeginInvoke(new EventHandler(delegate { checkAndActivateRelays(2); }));
            }
        }

        if (arrGlobalZoneStatus[2] == false)
        {
            button11.BackColor = System.Drawing.Color.Gray;
        }

        if (arrGlobalZoneStatus[3] == true)
        {
            button12.BackColor = System.Drawing.Color.Red;
            textLog(button12.Text + " was activated");

            if (globalFullAlarmSet || globalNightAlarmSet || globalDoorsAlarmSet)
            {
                this.BeginInvoke(new EventHandler(delegate { checkAndActivateRelays(3); }));
            }
        }

        if (arrGlobalZoneStatus[3] == false)
        {
            button12.BackColor = System.Drawing.Color.Gray;
        }

    } 
```

文本日志子：

```
public void textLog(string logEntry)
    {
        textLines++;
        try
        {
            if (this.txtLog.InvokeRequired)
            {
                ChangeTextCallback MethodCallback = new ChangeTextCallback(textLog);
                this.Invoke(MethodCallback, new object[] { logEntry });
            }
            else
            {
                if (!logEntry.Contains("?"))
                {
                    txtLog.Text = txtLog.Text + DateTime.Now + " >: " + logEntry + "\r\n";
                    txtLog.SelectionStart = txtLog.Text.Length;
                    txtLog.ScrollToCaret();

                    if (textLines > 3000)
                    {
                        txtLog.Clear();
                        textLines = 0;
                        textLog("Text log cleared");
                    }

                    System.IO.StreamWriter sw = new System.IO.StreamWriter(logFile, true);
                    try
                    {
                        sw.WriteLine(DateTime.Now + " >: " + logEntry);
                    }
                    catch (Exception ex)
                    {
                        //
                    }

                    sw.Close();
                }
            }
        }
        catch
        {
            //
        }

    } 
```

我想我需要在某个地方合并调用/委托，但作为一个菜鸟，我有点摸不着头脑。您的帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T22:27:02.543

我没有通读所有内容，但这应该会让您走上正确的道路：

该[`SerialPort.DataReceived`](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.datareceived.aspx)事件在单独的线程上引发。如果您需要异步处理数据的接收，并在其上使用 GUI 执行某些操作，您可以执行以下操作：

```
private void DataReceivedHandler(object sender, SerialDataReceivedEventArgs e) {
    var port = (SerialPort)sender;
    string data = port.ReadExisting();

    UpdateGui(data);
}

private void UpdateGui(string data) {
    if (this.InvokeRequired) {
        this.Invoke(new Action( d => UpdateGui(d) ));
        return;
    }

    this.txtBox1.Text = data;
} 
```

现在，这就是说....*你真的想使用`DataReceived`吗？* 听起来您（主机）正在启动与外部板的所有通信。如果是这种情况，那么我建议您改用同步（阻塞）读取：

```
1\. Write the request out the port
2\. Call read() with the expected number of bytes
3\. Process the reply. 
```

# linux - 如何在 nginix.conf 中将 GitLab 配置为子域

> ID：12240217
> 
> 赞同：7
> 
> 时间：2012-09-02T22:21:07.610
> 
> 标签：linux, configuration, nginx, webserver, gitlab

在我的 VPS 上安装 GitLab 之前，我使用的是 Apache2。我只想让 GitLab 成为我网站 (git.example.com) 的子域，并让我的主网站 (www.example.com) 查看 /var/www/html/index.html

这是我现在的 nginx.conf 文件：

```
user www-data;
worker_processes  1;

error_log  /var/log/nginx/error.log;
pid        /var/run/nginx.pid;

events {
    worker_connections  1024;
    # multi_accept on;
}

http {
    include       /etc/nginx/mime.types;

    access_log  /var/log/nginx/access.log;

    sendfile        on;
    #tcp_nopush     on;

    #keepalive_timeout  0;
    keepalive_timeout  65;
    tcp_nodelay        on;

    gzip  on;
    gzip_disable "MSIE [1-6]\.(?!.*SV1)";

    include /etc/nginx/conf.d/*.conf;
    include /etc/nginx/sites-enabled/*;

upstream gitlab {

    server unix:/home/gitlab/gitlab/tmp/sockets/gitlab.socket; }

    server {

        listen 80;
        server_name www.example.com;
        root /home/gitlab/gitlab/public;

        # individual nginx logs for this gitlab vhost
        access_log  /var/log/nginx/gitlab_access.log;
        error_log   /var/log/nginx/gitlab_error.log;

        location / {
            # serve static files from defined root folder;.
            # @gitlab is a named location for the upstream fallback, see below
            try_files $uri $uri/index.html $uri.html @gitlab;
        }

        # if a file, which is not found in the root folder is requested,
        # then the proxy pass the request to the upsteam (gitlab unicorn)
        location @gitlab {
            proxy_redirect     off;

            # you need to change this to "https", if you set "ssl" directive to "on"
            proxy_set_header   X-FORWARDED_PROTO http;
            proxy_set_header   Host              $http_host;
            proxy_set_header   X-Real-IP         $remote_addr;

            proxy_pass http://gitlab;
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-06T03:38:58.790

这是我在子域上工作的设置。

```
server {
  listen 80;
  server_name gitlab.example.com;
  root /home/gitlab/gitlab/public;

  # individual nginx logs for this gitlab vhost
  access_log  /var/log/nginx/gitlab_access.log;
  error_log   /var/log/nginx/gitlab_error.log;

  location / {
    # serve static files from defined root folder;.
    # @gitlab is a named location for the upstream fallback, see below
    try_files $uri $uri/index.html $uri.html @gitlab;
  }

  # if a file, which is not found in the root folder is requested, 
  # then the proxy pass the request to the upsteam (gitlab unicorn)
  location @gitlab {
    proxy_redirect     off;
    # you need to change this to "https", if you set "ssl" directive to "on"
    proxy_set_header   X-FORWARDED_PROTO http;
    proxy_set_header   Host              gitlab.example.com:80;
    proxy_set_header   X-Real-IP         $remote_addr;
    proxy_pass http://gitlab;
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-14T17:59:26.053

这就是我所做的，我不知道它是否是最佳的，但它有效。

`nginx.conf`：

```
events {
    worker_connections 1024;
}
http {
    include /etc/nginx/mime.types;
    root .;
    server {
          listen 80;
          server_name www.whatever.com whatever.com;
    }
    server {
          listen 80;
          server_name gitlab.whatever.com;
          location / {
               proxy_pass http://127.0.0.1:8000;
          }
     }
} 
```

在`gitlab.rb`，取消注释/编辑这一行：

```
nginx['listen_port'] = 8000 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-08T17:37:48.553

您需要为每个项目（Gitlab 和您的主站点）创建两个不同的 vhost 文件。

在您的 Gitlab vhost 文件中，您可以使用默认文件，更改一些字段：

```
# GITLAB repository

upstream gitlab {
  server unix:/home/git/gitlab/tmp/sockets/gitlab.socket;
}

server {
    listen 80;                   # In most cases *:80 is a good idea
    server_name git.example.com; # E.g., server_name source.example.com;
    server_tokens off;           # don't show the version number, a security best practice

    root /home/git/gitlab/public;         # Where your repository is located
    index index.php index.html index.htm; # Extensions to look for

    # Logs for this gitlab vhost. If something goes wrong, check these files to figure out what is missing
    access_log /var/log/nginx/gitlab_access.log;
    error_log  /var/log/nginx/gitlab_error.log;

    location / {
        # serve static files from defined root folder;.
        # @gitlab is a named location for the upstream fallback, see below
        try_files $uri $uri/index.html $uri.html @gitlab;
    }

    # if is a file that could not be found in the root folder is requested,
    # then the proxy pass the request to the upsteam (gitlab unicorn)
    location @gitlab {
        proxy_read_timeout 300;    # https://github.com/gitlabhq/gitlabhq/issues/694
        proxy_connect_timeout 300; # https://github.com/gitlabhq/gitlabhq/issues/694
        proxy_redirect     off;

        proxy_set_header X-Forwared-Proto $scheme;
        proxy_set_header X-Real-IP        $remote_addr;
        proxy_set_header X-Forwarded-For  $remote_addr;
        proxy_set_header Host             git.example.org:80; # Host name for your Gitlab Project

        proxy_pass  http://gitlab; # Alias
    }
} 
```

然后，在您的 /sites-enabled/ 文件夹中创建一个新的符号链接：

```
$ sudo rm /etc/nginx/sites-enabled/example
$ sudo ln -s /etc/nginx/sites-available/example /etc/nginx/sites-enabled/example 
```

重启 Nginx `service nginx restart`。

如果仍然无法正常工作，请使用 . 检查您的错误日志`tail -f /var/log/nginx/gitlab_error.log`。这可以帮助您弄清楚您还缺少什么。

**注意：** 对于这个答案，我使用的 PHP 版本是 5.3.10，Nginx 版本是 1.1.19。

**参考**

如何将 Nginx 配置为 Apache 的反向代理 - [https://www.digitalocean.com/community/tutorials/how-to-configure-nginx-as-a-reverse-proxy-for-apache](https://www.digitalocean.com/community/tutorials/how-to-configure-nginx-as-a-reverse-proxy-for-apache)

尾部命令 - [http://en.wikipedia.org/wiki/Tail_%28Unix%29](http://en.wikipedia.org/wiki/Tail_%28Unix%29)

# c# - 有没有办法将 ConcurrentDictionary.TryUpdate 与 lambda 表达式一起使用？

> ID：12240219
> 
> 赞同：11
> 
> 时间：2012-09-02T22:21:11.777
> 
> 标签：c#, .net, concurrency

我有一个简单的场景，我想更新现有项目的值。只有[AddOrUpdate](http://msdn.microsoft.com/en-us/library/ee378664.aspx)方法提供了一个委托，我可以在其中更新旧值。但是，如果密钥不存在，我不想添加任何内容。TryUpdate方法也没有我可以获得旧值的重载[。](http://msdn.microsoft.com/en-us/library/dd287117.aspx)有没有办法用当前的 API 做到这一点？

这是我正在寻找的签名：

```
bool TryUpdate(TKey key, Func<TValue,TValue> updateValueFactory) 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-02T23:43:32.440

您必须准备好循环并且可能`Func`不止一次调用（与`GetOrAdd`使用 one 的重载相同）。这意味着如果它`Func`有副作用，它不会从外部看起来是原子的。真的，`Func`s 不应该有副作用，但它们总是有一些成本，所以重复调用的可能性不容忽视：

```
public static bool TryUpdate<TKey, TValue>(
  this ConcurrentDictionary<TKey, TValue> dict,
  TKey key,
  Func<TValue, TValue> updateFactory)
{
    TValue curValue;
    while(dict.TryGetValue(key, out curValue))
    {
        if(dict.TryUpdate(key, updateFactory(curValue), curValue))
            return true;
        // if we're looping either the key was removed by another thread,
        // or another thread changed the value, so we start again.
    }
    return false;
} 
```

如前所述，因为它可以循环，所以如果`Func`.

（编辑：删除一个潜在的捷径，该捷径确实太令人担忧而无法普遍使用，并且可能会咬到尝试过的人）。

# css - 集成 twitter bootstrap 并使用“Base CSS/form/Validation states”

> ID：12240220
> 
> 赞同：1
> 
> 时间：2012-09-02T22:21:29.280
> 
> 标签：css, twitter-bootstrap

我正在尝试将 twitter bootstrap 集成到我的应用程序中。但是我注意到我的应用程序的行为与 twitter bootstrap 展示不同......

我指的是该**`Base CSS/ form/ Validation states`**部分。

例如，以下

```
<div class="control-group">
            <label class="control-label" for="email">Email</label>
            <div class="controls">
                <div class="input-prepend">
                    <span class="add-on">@</span> <input type="text" name="member.email" value="" id="email" autofocus="autofocus" />

                </div>
            </div>
        </div> 
```

不呈现内联，而是如下所示：

![屏幕截图](../Images/c5bb0b1624a6ba278d9f52441187e4b8.png)

我不确定我做错了什么。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T04:28:42.167

您给出的示例来自[“预附加和附加输入”](http://twitter.github.com/bootstrap/base-css.html#forms)部分，示例中不包含标签。但是，假设“ *render inline* ”是指标签与输入控件相邻，这可以使用`form-horizontal`表单本身的类来实现。

# git - 如何搜索特定文件名的所有提交？

> ID：12240221
> 
> 赞同：2
> 
> 时间：2012-09-02T22:21:34.217
> 
> 标签：git

> **可能重复：**
> [列出特定文件的所有提交](https://stackoverflow.com/questions/3701404/list-all-commits-for-a-specific-file)

我有一个非常深的 git 存储库，在其中使用我的眼睛来定位**特定文件**的所有提交不是很实用。

我试图看看我是否可以 grep 的输出，`git log --all`但那里没有任何文件名的痕迹......

如何找到特定文件实际更改的所有提交？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T22:29:11.817

You can pass a path to [`git log`](http://www.kernel.org/pub/software/scm/git/docs/v1.7.3/git-log.html):

```
git log -- path/to/file 
```

# php - 日期和 strtotime 的日期格式错误？

> ID：12240222
> 
> 赞同：0
> 
> 时间：2012-09-02T22:21:43.750
> 
> 标签：php, date, strtotime

我对日期和 strtotime 有一个恼人的问题。

```
echo date('Y-m-d H:i', strtotime('1970-01-01 00:00:00')); 
```

回报：

```
1970-01-01 01:00:00 
```

我究竟做错了什么？`1970-01-01 02:00:00`输出正确`1970-01-01 02:00`，但我正在尝试将（外国）格式化日期转换为时间戳，然后输出新的日期格式。

如果不是这样，正确的做法是什么？

**已解决：**该示例有效，因为我的问题是返回 1970-01-01 01:00 (GMT+1) 的无效日期字符串（布尔值 false）。结案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T22:40:49.353

好像您在 Windows 下，不支持`date`.

因此`strtotime('1970-01-01 00:00:00')`返回负值并由 -negative 格式化`date()`，`0`因此您获得的偏移量等于您的 TZ 偏移量。

对于is`1970-01-01 02:00:00`的结果（距 UTC 时间为 1 小时 + 1 小时），并且该值为正值，因此可以正常工作。`strtotime``3600`

PS：正如@Mark Ba​​ker 指出的那样 - 它很久以前就已经修复了，但它出现在 Windows 版本中，这是对该案例的唯一解释

PPS：根据问题中的评论 - 似乎一切正常（不确定 OP 如何得到错误的值）

# c - C整数除法和下限

> ID：12240228
> 
> 赞同：20
> 
> 时间：2012-09-02T22:22:01.657
> 
> 标签：c, integer, division, integer-division, floor

在 C 中，整数除法 a/b 和 floor(a/b) 之间是否有区别，其中 a 和 b 都是整数？更具体地说，在这两个过程中会发生什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-02T22:26:59.440

`a/b`进行整数除法。如果其中一个`a`或`b`为负数，则结果取决于编译器（在 C99 之前的版本中，舍入可以趋向零或负无穷大；在 C99+ 中，舍入趋向 0）。结果有类型`int`。`floor(a/b)`执行相同的除法，将结果转换为双精度，丢弃（不存在的）小数部分，并将结果作为双精度返回。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-02T22:26:07.793

`floor`返回一段`double`时间`a / b`，其中`a`和`b`都是整数产生一个整数值。

使用正确的演员，价值是相同的。

如果`typeof`运算符存在于 C 中（它不存在），我们将有：

```
(typeof (a /b)) floor(a / b) == a / b 
```

**编辑：**现在如果问题是：有什么区别：

```
(double) (a / b) 
```

和

```
floor(a / (double) b) 
```

答案是肯定的。负值的结果不同。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-02T23:28:34.683

从整数到浮点的转换可能会丢失信息。不太可能使用 int 和 double，但有轻微的变化：

```
#include <stdio.h>
#include <math.h>

int main(void)
{
    unsigned long long a = 9000000000000000003;
    unsigned long long b = 3;
    printf("a/b = %llu\n", a/b);
    printf("floor(a/b) = %f\n", floor(a/b));
    return 0;
} 
```

结果：

```
a/b = 3000000000000000001
floor(a/b) = 3000000000000000000.000000 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-06-27T11:01:46.943

一般来说，假设整数在整数和浮点类型中都可以表示，没有区别，但证明并不明显。问题在于，在浮点数中，除法 a/b 会发生舍入，因此底函数不适用于精确的有理值，而是适用于近似值。我写了一篇关于这个主题的论文：[https ://www.vinc17.net/research/publi.html#Lef2005b](https://www.vinc17.net/research/publi.html#Lef2005b)

简而言之，我得到的结果是，如果 a - b 在浮点系统中是完全可表示的，那么 floor(a/b)，其中 a 和 b 是浮点数（具有整数值），给出与整数除法 a/b 的结果相同。

# c - 具有双向链表的歌曲名称数据库

> ID：12240230
> 
> 赞同：1
> 
> 时间：2012-09-02T22:22:30.550
> 
> 标签：c, linked-list, doubly-linked-list

我是该站点的新手，我正在寻找有关存储 Mp3 与艺术家姓名、歌曲名称、专辑名称、日期和运行时间的双向链接列表的帮助。如果您能帮助我，我将不胜感激。根据 GDB，我在 add 函数中遇到了段错误。

警告也如下：

```
Description Resource    Path    Location    Type
'data' is used uninitialized in this function [-Wuninitialized] Mp3.c   /OperatingSystemsLab1   
line 7  C/C++ Problem
assignment makes pointer from integer without a cast [enabled by default]   Mp3.c   /OperatingSystemsLab1   
line 7  C/C++ Problem
implicit declaration of function 'malloc' [-Wimplicit-function-declaration] Mp3.c   /OperatingSystemsLab1   
line 21 C/C++ Problem
assignment makes pointer from integer without a cast [enabled by default]   Mp3.c   /OperatingSystemsLab1   
line 8  C/C++ Problem
implicit declaration of function 'free' [-Wimplicit-function-declaration]   Mp3.c   /OperatingSystemsLab1   
line 40 C/C++ Problem
incompatible implicit declaration of built-in function 'malloc' [enabled by default]    Mp3.c   /OperatingSystemsLab1   
line 21 C/C++ Problem
incompatible implicit declaration of built-in function 'malloc' [enabled by default]    Mp3.c   /OperatingSystemsLab1   
line 57 C/C++ Problem
incompatible implicit declaration of built-in function 'free' [enabled by default]  Mp3.c   /OperatingSystemsLab1   
line 40 C/C++ Problem 
```

我的代码如下

```
#include <stdio.h>
#include "Mp3.h"

void add(struct MP3 *pointer, char artistname, char albumname, char songname, int date, int runtime){
    /*make structure for new data*/
struct MP3 *data;
data->artistName = artistname;
data->albumName = albumname;
data->date=date;
data->runTime=runtime;
data->next=NULL;
data->prev=NULL;

if(pointer->next==NULL) {
    pointer->next = data;
}
else {
        while(pointer->next != NULL){
        pointer = pointer->next;
    }
    pointer->next = (struct MP3*)malloc(sizeof(struct MP3));
    pointer->next = data;
    struct MP3 *temp = pointer;
    pointer = pointer->next;
    pointer->prev = temp;
}
};

void delete(struct MP3 *pointer, char *artistname){
while(pointer->next!=NULL && (pointer->next)->artistName!=artistname){
    pointer = pointer->next;
}
if(pointer->next==NULL){
    return;
}
struct MP3 *temp;
temp = pointer->next;
pointer->next = temp->next;
pointer->next->prev = pointer;
free(temp);
};

void print(struct MP3 *pointer){
if(pointer==NULL){
    return;
}
printf("Artist name: %s \n", pointer->artistName);
printf("Album name: %s \n", pointer->albumName);
printf("Title: %s \n", pointer->songName);
printf("Date: %d \n", pointer->date);
printf("Runtime: %d\n", pointer->runTime);

print(pointer->next);
};

int main(){
struct MP3 *start,*current;
start = (struct MP3 *)malloc(sizeof(struct MP3));
current = start;
current->next = NULL;
current->prev = NULL;

printf("1\. Add\n");
printf("2\. Delete\n");
printf("3\. Print\n");
while(1)
{
    int query;
    scanf("%d",&query);
    if(query==1)
    {
        int rt,d;
        char artn,albn,sn;
        scanf("%c %c %c %d %d",&artn,&albn,&sn,&d,&rt);
        add(start,artn,albn,sn,d,rt);
    }
    else if(query==2)
    {
        char artn;
        scanf("%c",&artn);
        delete(start,&artn);
    }
    else if(query==3)
    {
        printf("The list is ");
        print(start->next);
        printf("\n");
    }
}
}; 
```

和头文件

```
#ifndef MP3_H_
#define MP3_H_

struct MP3{
char *artistName;
char *albumName;
char *songName;
int date;
int runTime;
struct MP3 *next;
struct MP3 *prev;

};

#endif /* MP3_H_ */ 
```

就像我说的，我是新人，所以请怜悯我。任何帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T22:30:05.033

You have a problem here

```
struct MP3 *data;
data->artistName = artistname; 
```

you declare a pointer to `MP3` but you do not allocate memory for it. Use `malloc` to allocate the space or just use a plain instance instead.

You also have a problem here

```
 pointer->next = (struct MP3*)malloc(sizeof(struct MP3)); 
```

this allocates memory and sets `pointer->next` to point to it. Then in the next line

```
 pointer->next = data; 
```

you reassign `pointer->next` and so that allocated memory in the previous line no longer has its address stored by any variable - the result of this is a memory leak.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T22:29:10.950

struct MP3 *data;

declares a pointer to a data structure, but it doesn't create the structure. So when you try to access it, you are accessing unallocated memory, which causes a segmentation fault. You need to allocate the memory using malloc:

```
struct MP3 *data; /* declares a pointer to a MP3 structure */
data = malloc(sizeof(MP3)); /* creates a new MP3 structure and makes the pointer point to it */
data->artistName = artistname; /* the structure can now be used */ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T22:31:00.287

正如错误消息所说 -`"'data' is uninitialized in this function"`这显然是正确的。您*声明*了一个*指向*名为“data”的 MP3 结构的指针。您永远不会通过分配内存和*初始化*指向该内存的指针来初始化指针。

# http - 带有嵌套参数的 POST 请求

> ID：12240238
> 
> 赞同：4
> 
> 时间：2012-09-02T22:23:20.340
> 
> 标签：http, go

我对 Go 很陌生，所以如果这是一个微不足道的问题，我深表歉意。

我目前正在尝试编写一个函数来创建一个带有嵌套参数哈希的 POST 请求。因此，动态语言（如 javascript）中的等效调用将是：

```
$.post('http://example.com', {level1: {level2: 'foo'}}); 
```

在我的 Go 代码中，我目前有以下方式嵌套的哈希：

```
func (runner *Runner) post(args... interface{}) interface{} {
    form_url := getString(args[0])
    form_data := ???

    http.PostForm(form_url, form_data) 
```

表单数据（interface{}）的实际类型由第三方库提供，因此我无法真正更改它。

问题是 PostForm 需要一个 url.Values 类型的表单数据，它被定义为

```
type Values map[string][]string 
```

处理这个最好的方法是什么？到目前为止，我的结论是我需要编写一个函数来对嵌套哈希进行 HTTP 编码并具有以下签名：

```
func httpEncodeNestedMap(data interface{}) map[string][]string {...} 
```

这在 Go 中的惯用实现是什么？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T10:16:08.560

基本上，在 HTTP 中，参数本身没有“嵌套”。一些系统提供了以模拟维度的方式解析查询字符串的工具。

例如，PHP 支持`[]`-notation。在 PHP 中，你可以有一个查询字符串`foo[bar]=baz&foo[zar]=boo`，它可以转换成这样的`$_REQUEST`结构：

```
 array(
     'foo' => array(
         'bar' => 'baz',
         'zar' => 'boo'
      )
 ) 
```

出于正当理由，标准 Go 库不提供此类功能。你可以自己实现它。

Go 支持而 PHP 不支持（至少不是*“本机”*）是查询参数的多个值。

```
type Values map[string][]string 
```

请注意任何参数名称（字符串索引）如何可以具有多个值（字符串切片）。当您的查询字符串看起来像时会发生这种情况`foo=bar&foo=zar`，然后您会得到：

```
map[string][]string {
    "foo": {
        "bar",
        "zar"
    }
} 
```

我希望这能解决问题。

# ruby-on-rails - 设计退出而不退出

> ID：12240240
> 
> 赞同：0
> 
> 时间：2012-09-02T22:24:19.963
> 
> 标签：ruby-on-rails, devise, omniauth

我在使用 devise 退出时遇到问题。我正在创建我的注销链接，如下所示：

```
<%= link_to "Sign out", destroy_user_session_path %> 
```

这导致了问题，因为找不到路由，所以我将它添加到我的 routes.rb 中：

```
get 'sign_out', :to => 'users/sessions#destroy', :as => :destroy_user_session 
```

不会导致任何错误但也不会退出，`user_signed_in?`仍然返回 true。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T07:07:18.923

尝试 `delete "logout" => "devise/sessions#destroy", :as => "logout"`并

`<%= link_to "Sign out", logout_path, :method => :delete %>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-27T16:33:08.293

It should be a DELETE request, which can be accomplished like this,

```
<%= link_to("Sign Out", destroy_user_session_path, :method => :delete) %> 
```

This won't require you to add anything to your routes (assuming you have already added devise routes).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-20T07:39:06.747

试试这个退出链接，它对我有用

将您的退出链接更改为

```
<%= link_to('Logout', destroy_user_session_path, :method => :delete) %> 
```

# c++ - 英特尔 C++ 编译器错误？（指针别名）

> ID：12240246
> 
> 赞同：8
> 
> 时间：2012-09-02T22:25:20.107
> 
> 标签：c++, compiler-construction, intel

我正在使用英特尔 C++ 编译器 12.0，并且正在编写类似于以下的程序，该程序非常简单明了。while 循环应该在第一次运行时停止。但是，当我使用英特尔编译器的 /O2 标志构建代码时，while 循环永远不会停止。如果我禁用优化，或使用 Visual C++，循环正常退出。如果我将 pt->flag 更改为 p.flag，我想这也是一样的，循环也会正常退出。我认为这与英特尔的优化有关。这是英特尔编译器中的错误吗？或者我在这里错过了什么？

```
#include <iostream>

using namespace std;

struct para {
    int i;  
    int flag;
};

int main(int argc, char **argv)
{
    para p;
    p.i = 0;
    p.flag = 1;

    para * pt = &p;
    cout << "loop started" << endl;

    int i;
    while (p.flag) {
        if (p.i == 0) {
            for (i=0; i<1; i++) {
                if (p.flag != 1)
                    break;
            }
            if (i==1) {
                pt->flag = 0;
            }
        }
    }
    cout << "loop stopped" << endl;
    return 1;
} 
```

更新：感谢大家的回答。我对“指针别名”的解释感到困惑。如果 p 在寄存器中并且 pt 无法访问它，为什么下面的代码会用 intel 编译器中断 while 循环？首先“pt->flag = 0;” 应该永远不会生效，因为 i=0。其次，即使它有效，“指针别名”不应该阻止 p 被修改吗？

顺便说一句：谁能让我知道如何使用英特尔编译器在 Visual Studio 中打开/关闭指针别名？谢谢！

```
#include <iostream>
using namespace std;
struct para {
    int i;  
    int flag;
};

int main(int argc, char **argv)
{
    para p;
    p.i = 0;
    p.flag = 1;

    para * pt = &p;
    cout << "loop started" << endl;

    int i=0;
    while (p.flag) {
        if (p.i == 0) {
            //for (i=0; i<1; i++) {
            //  if (p.flag != 1)
            //      break;
            //}
            if (i==1) {
                pt->flag = 0;
            }
        }
    }
    cout << "loop stopped" << endl;
    return 1;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-02T22:30:08.323

This is a situation known as [pointer aliasing](https://en.wikipedia.org/wiki/Pointer_aliasing). You have a variable `p` and a pointer `pt` that points to the same thing as `p`. Many optimisations can be used if the compiler can assume that there is only one "name" for a given variable, and `/O2` for your compiler may enable this assumption. For example, the compiler could keep all the member variables for `p` in registers during the loop, which obviously can't be accessed through a memory pointer.

Check your compiler documentation to find out how to tell it to not assume there are no pointer aliases. This could be a compiler switch or a `#pragma`.

# css - 链接图像悬停 - 需要帮助定位图像

> ID：12240247
> 
> 赞同：3
> 
> 时间：2012-09-02T22:25:37.967
> 
> 标签：css

**问题：** 我有一个响应式设计和一个 2 列的链接集。每组链接都是一个列表。它们居中对齐。当您悬停时，应该在文本旁边出现一个箭头，但我无法流畅地定位它。我想出的最好的方法是将箭头绝对定位在悬停上，这样它就可以与我的所有列表项“工作”。虽然看起来很垃圾。我希望它位于每个列表中每个 h3 的左侧。我只是还没有想出一个聪明的方法来做到这一点。

```
<div class="contentLeft">
        <ul class="ca-menu">
            <li>
                <a href="#">
                    <div class="ca-content">
                        <h3 class="ca-main"><img src="<?php bloginfo('template_url') ?>/images/arrow-hover.jpg" class="arrow" width="61" height="29" alt="Arrow Hover">This is the link</h3>
                        <p class="ca-sub">This is the subheading</p>
                    </div>  
                </a>
            </li>
            <li>
                <a href="#">
                    <div class="ca-content">
                        <h3 class="ca-main"><img src="<?php bloginfo('template_url') ?>/images/arrow-hover.jpg" class="arrow" width="61" height="29" alt="Arrow Hover">This is the link</h3>
                        <p class="ca-sub">This is the subheading</p>
                    </div>
                </a>
            </li>
            <li>
                <a href="#">
                    <div class="ca-content">
                        <h3 class="ca-main"><img src="<?php bloginfo('template_url') ?>/images/arrow-hover.jpg" class="arrow" width="61" height="29" alt="Arrow Hover">This is the link</h3>
                        <p class="ca-sub">This is the subheading</p>
                    </div>
                </a>
            </li>
            <li>
                <a href="#">
                    <div class="ca-content">
                        <h3 class="ca-main"><img src="<?php bloginfo('template_url') ?>/images/arrow-hover.jpg" class="arrow" width="61" height="29" alt="Arrow Hover">This is the link</h3>
                        <p class="ca-sub">This is the subheading</p>
                    </div>
                </a>
            </li>
        </ul>
    </div>
    <div class="contentRight">
        <ul class="ca-menu">
            <li>
                <a href="#">
                    <div class="ca-content">
                        <h3 class="ca-main"><img src="<?php bloginfo('template_url') ?>/images/arrow-hover.jpg" class="arrow" width="61" height="29" alt="Arrow Hover">This is the link</h3>
                        <p class="ca-sub">This is the subheading</p>
                    </div>  
                </a>
            </li>
            <li>
                <a href="#">
                    <div class="ca-content">
                        <h3 class="ca-main"><img src="<?php bloginfo('template_url') ?>/images/arrow-hover.jpg" class="arrow" width="61" height="29" alt="Arrow Hover">This is the link</h3>
                        <p class="ca-sub">This is the subheading</p>
                    </div>
                </a>
            </li>
            <li>
                <a href="#">
                    <div class="ca-content">
                        <h3 class="ca-main"><img src="<?php bloginfo('template_url') ?>/images/arrow-hover.jpg" class="arrow" width="61" height="29" alt="Arrow Hover">This is the link</h3>
                        <p class="ca-sub">This is the subheading</p>
                    </div>
                </a>
            </li>
            <li>
                <a href="#">
                    <div class="ca-content">
                        <h3 class="ca-main"><img src="<?php bloginfo('template_url') ?>/images/arrow-hover.jpg" class="arrow" width="61" height="29" alt="Arrow Hover">This is the link</h3>
                        <p class="ca-sub">This is the subheading</p>
                    </div>
                </a>
            </li>
        </ul>
        </div> 
```

**这是我的CSS：**

```
 .arrow {
  display: none;
  width: 61px;
     }
.ca-menu li:hover .arrow {
  display: inline;
  width: 61px;
  position: absolute;
  top: 10px;

}
.ca-menu {
  margin-left: 0;
  padding-left: 0;
  z-index: 1;
}
.ca-menu li {
  height: 100px;
  overflow: hidden;
  position: relative;
  display: block;
  margin-bottom: 4px;
  -webkit-transition: all 300ms linear;
  -moz-transition: all 300ms linear;
  -o-transition: all 300ms linear;
  -ms-transition: all 300ms linear;
  transition: all 300ms linear;
}
.ca-menu li:last-child {
  margin-bottom: 0px;
}
.ca-menu li a {
  text-align: center;
  width: 100%;
  height: 100%;
  display: block;
  color: #333;
  position: relative;
  text-decoration: none;
}
.ca-content {
  height: 60px;
}
.ca-main {
  font-size: 26px;
  color: #666;
  margin-bottom: 10px;
  text-decoration: none;
  line-height: 29px;
  -webkit-transition: all 300ms linear;
  -moz-transition: all 300ms linear;
  -o-transition: all 300ms linear;
  -ms-transition: all 300ms linear;
  transition: all 300ms linear;
}
.ca-sub {
  color: #999 !important;
  -webkit-transition: all 300ms linear;
  -moz-transition: all 300ms linear;
  -o-transition: all 300ms linear;
  -ms-transition: all 300ms linear;
  transition: all 300ms linear;
}
.ca-menu li:hover .ca-icon {
  color: #e3721e;
  opacity: 0.8;
  text-shadow: 0px 0px 13px #fff;
}
.ca-menu li:hover .ca-main {
  opacity: 1;
  color: #e3721e;
  -webkit-animation: moveFromTop 300ms ease-in-out;
  -moz-animation: moveFromTop 300ms ease-in-out;
  -ms-animation: moveFromTop 300ms ease-in-out;
}
.ca-menu li:hover .ca-sub {
  opacity: 1;
  -webkit-animation: moveFromBottom 300ms ease-in-out;
  -moz-animation: moveFromBottom 300ms ease-in-out;
  -ms-animation: moveFromBottom 300ms ease-in-out;
  color: #333 !important;
} 
```

任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T03:33:47.033

开始了一个 jsfiddle 来开始这方面的工作，因为它绝对值得关注。现在我不确定我是否得到了你想要的东西，但我很肯定这需要更多的工作。我得到了起始格式和箭头外观，但是要激活两者，您需要将鼠标特别悬停在链接中的“the”一词上并将鼠标向上滑动一点。我将继续解决这个问题，以便您可以实际使用我提供的内容，但如果您还有其他想要的不同之处，请告诉我。

这是小提琴：[在这里链接的jsfiddle :)](http://jsfiddle.net/gwSaC/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T04:00:34.480

对此的快速解决方法是 -ve 边距。***[这](http://jsfiddle.net/blasteralfred/x2qE9/1/)***是一个有效的现场演示。但是你必须考虑一些事情。如果您为图像分配高度和宽度，如果它没有改变，并且如果您已经在 CSS 中设置了它，则不需要将它与`<img>`. 只需在 CSS 中定义图像宽度和高度。

# android - 比较 LogCat 中的“ZoneInfo*”

> ID：12240248
> 
> 赞同：0
> 
> 时间：2012-09-02T22:26:01.590
> 
> 标签：android, logcat

我在我的 LogCat（数千个）中收到很多消息，这些消息显示为错误消息，并且都以`comparing 'ZoneInfo*'`. 我的应用程序没有崩溃并且没有问题，但是这些消息是什么意思，为什么我会收到它们？

这些是我得到的：

```
09-03 01:03:56.535: E/jdwp(294): >>> comparing 'ZoneInfo*' to 's/Message'
09-03 01:03:56.535: E/jdwp(294): >>> comparing 'ZoneInfo*' to 'os/Looper'
09-03 01:03:57.055: E/jdwp(294): >>> comparing 'ZoneInfo*' to 's/Handler' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T11:12:49.917

## 谁打印的

它由 Dalvik Java Debug Wire Protocol 实现打印，即允许您调试应用程序、设置断点和检查变量等的代码。考虑打印上方的[注释：](https://github.com/android/platform_dalvik/blob/6bcf5d200bc9d1be6c3d766005c19694a325da61/vm/jdwp/JdwpEvent.cpp#L425)

```
 // TODO: remove printf when we find a test case to verify this
    LOGE(">>> comparing '%s' to '%s'",
        pattern+1, target + (targetLen-patLen)); 
```

我想说你可以放心地忽略它们，因为它们显然是暂时的。

## 你的情况可能的原因

创建这些打印的一种方法是在 Eclipse 中添加一个 Step Filter：

*窗口 -> 首选项 -> Java -> 调试 -> 步骤过滤*

如果你添加并激活一个`*ZoneInfo*`过滤器，当你进入某个班级时，你会得到这个输出。请注意，logcat 打印会删除第一个“*”。如果您没有这样的 Step Filter，那么您可能在 Eclipse 中的某个地方有一些其他的 Debug 过滤器，其中包含一个`*ZoneInfo*`字符串。

# javascript - Struts2 - 迭代器内的选择框 - 单击选择框外的链接时如何传递值

> ID：12240252
> 
> 赞同：1
> 
> 时间：2012-09-02T22:26:34.273
> 
> 标签：javascript, struts2

我有一个创建数据行的迭代器。一列包含指向操作的链接。另一列是选择框。当单击链接时，我无法终生获取选择框中选择的值作为参数传递。我已经尝试过javascript，并且在函数内部得到了正确的值，但是单击链接时它没有作为参数传递。我错过了一些东西，但我不知道是什么。

```
<s:iterator var="permit" value="permitsList" status="status" >
    <tr class="<s:if test="#status.even">even</s:if><s:else>odd</s:else>">
        <td style="text-align: center"> 
            <s:url var="dataEntryURL" action="processPermitSelectedSuccess">
                <s:param name="permitInfo.mepdesNumber" value="permitsList[#status.index].mepdesNumber" />
                <s:param name="permitInfo.facilityName" value="permitsList[#status.index].permitHistoryList[0].facilityName" />
NOTE: If permitInfo.outfallNumber is set to a value; the parameter and value are tacked onto the URL.  Using the following code, there is no parameter or value for permitList.outfallNumber included on the URL.
                <s:param name="permitInfo.outfallNumber" value="permitsList[%{#status.index}].selectedOutfall}" />
            </s:url>
            <s:a href="%{dataEntryURL}">
                <s:property value="permitsList[#status.index].mepdesNumber" />
            </s:a>
        </td>
        <td style="text-align: left">
            <s:property value="permitsList[#status.index].permitHistoryList[0].facilityName" />
        </td>
        <td style="text-align: center; white-space: nowrap" >
            <s:if test="permitsList[#status.index].outfallsList.size() > 1">
                <s:if test="permitsList[#status.index].selectedOutfall == null" >
                    <s:set var="permitsList[#status.index].selectedOutfall" value="permitsList[#status.index].defaultOutfall" />
                </s:if>
                <s:select theme="simple" 
                    name="permitsList[#status.index]selectedOutfall"
                    id="permitsList[#status.index]selectedOutfall"
                    list="permitsList[#status.index].outfallsList"
                    listKey="outfallsPK.outfallNumber" 
                    listValue="outfallsPK.outfallNumber"
                   value="permitsList[#status.index].selectedOutfall"
                    onchange="javascript: setOutfall(this.value)">
                </s:select>
            </s:if>
            <s:else>
                <s:property value="permitsList[#status.index].defaultOutfall" />
            </s:else>
        </td>
    </tr>
</s:iterator> 
```

我正在使用的javascript：

```
function setOutfall(selectedValue)
{
    // Using setTimeout() in this way forces IE to use a separate thread
    // for the .focus() function instead of processing at the same time
    // as it's own browser behaviour.
    alert("inside setOutfall() - selectedValue: " + selectedValue);

    setTimeout
    (function()
    {
        try
        {
            document.getElementsByName('permitsList[#status.index].selectedOutfall').value = selectedValue;
            alert("correctValue: " +     document.getElementsByName('permitsList[#status.index].selectedOutfall').value);           
        }
        catch(err)
        {
            txt="There was an error on this page.\n\n";
            txt+="Error description: " + err.message + "\n\n";
            txt+="Click OK to continue.\n\n";
            alert(txt);
        }
    }   
    , 50);
} 
```

请帮忙！谢谢

# html - 使用绝对定位和溢出在边界框外创建元素

> ID：12240253
> 
> 赞同：1
> 
> 时间：2012-09-02T22:26:45.343
> 
> 标签：html, css, overflow, css-position

我创建了一个气泡作为绝对定位的元素，我希望它位于它的包装之外。

我已经设法将 div 放置在正确的位置，但是 div 之外的内容被剪裁了。

我曾经`overflow:visible`尝试让它显示，但它似乎不正确？

**CSS**

```
#bubble{
width:201px;
height:189px;
position:absolute;
left:-87px; 
bottom:0; 
z-index: 99;
overflow:visible;
} 
```

**HTML**

```
 <!-- Speech bubble-->
<div id="bubble"><img src="images/hire_me_bubble.png" 
                 alt="Hire me" />
</div> 
```

[现场直播](http://www.jamesperrett.co.uk/testsite)- 有问题的气泡可以在下部接触部分看到

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T22:44:34.527

剪辑的原因似乎是`div`包含它的 s 之一：`#contactwrapper`. 它已`overflow`设置为`hidden`。将其设置为`visible`，会使它变得完全可见，但由于重新调整其父容器而移动它。

一旦它可见，您可以重新定位它`absolute`（我不推荐），或者尝试调整父母的大小并浮动。

我希望这有帮助！:)

# entity-framework - 使用模板为带有子模型的 EF 模型创建控制器

> ID：12240257
> 
> 赞同：0
> 
> 时间：2012-09-02T22:27:10.200
> 
> 标签：entity-framework, model, controller, asp.net-mvc-4

我的标题可能令人困惑，但这是我的问题。我是来自 ASP.net 和 Linq to Sql 的 EF 和 MVC4 新手

所以我首先创建了我的代码模型，数据库看起来很棒，就像我写的一样。

```
//namespace Article.Models

public class ArticleContext : DbContext
{
    public DbSet<Article> Articles { get; set; }
    public DbSet<Group> Groups { get; set; }
    public DbSet<Category> Categories { get; set; }
    public DbSet<Dimension> Dimensions { get; set; }
}

public class Article
{
    public int ArticleId { get; set; }
    public string Name { get; set; }
    public int CategoryId { get; set; }
    public virtual Category Category { get; set; }
    public double Comission { get; set; }
    public string Link { get; set; }
    public virtual List<Group> Topics { get; set; }
}

public class Group
{
    public int GroupId { get; set; }
    public int ArticleId { get; set; }
    public virtual Article Article { get; set; }
    public string CategoryId { get; set; }
    public int AdTypeId { get; set; }
    public virtual Dimension Dimension { get; set; }
}

public class Category
{
    public int CategoryId { get; set; }
    public string Name { get; set; }

    public virtual List<Article> Articles { get; set; }
}

public class Dimension
{
    public int DimensionId { get; set; }
    public string Name { get; set; }
    public int Width { get; set; }
    public int Height { get; set; }
} 
```

创建数据库后，我将连接字符串添加到 Web 配置中。

当我尝试制作控制器时，我可以使用 EF 模板为具有读/写操作和视图的类别和组制作它们，这没问题。

但是对于文章模型和组模型，我得到了同样的错误

![尝试将广告模型添加到新控制器](../Images/c39cd3dca7d5a15a8ca11e379b81781e.png)

但我每次都会收到以下错误

![无法从程序集中加载类型](../Images/3f7cdb3d07699f8462270f51706ffecb.png)

是我做错了什么还是在这种情况下无法使用读/写模板？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T23:56:17.540

看看这个问题及其答案。这可能会有所帮助。[stackoverflow.com/questions/7859611/could-not-load-file-or-assembly-publickeytoken-null](https://stackoverflow.com/questions/7859611/could-not-load-file-or-assembly-publickeytoken-null)

# android - 从 ImageButtons 开始新的活动

> ID：12240259
> 
> 赞同：0
> 
> 时间：2012-09-02T22:27:30.757
> 
> 标签：android, android-activity, imagebutton

我有主菜单。有 3 个不同的 ImageButtons 用于开始新的活动。一切正常，但我想知道是否有另一种编码方式。我从带有一个按钮的示例代码中获取了这个，我认为它看起来不太好：为每个按钮设置**新的 OnClickListener() 。**

```
public class MainMenu extends Activity implements OnClickListener{

ImageButton firstModule;
ImageButton secondModule;
ImageButton thirdModule;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main_menu);

    //init buttons
    firstModule =  (ImageButton) findViewById(R.id.imageButton1);
    secondModule = (ImageButton) findViewById(R.id.imageButton2);
    thirdModule =  (ImageButton) findViewById(R.id.imageButton3);

    firstModule.setOnClickListener(this);
    secondModule.setOnClickListener(this);
    thirdModule.setOnClickListener(this);
}
public void onClick(View v) {

    switch(v.getId()){
    case R.id.imageButton1:
        startActivity(new Intent(MainMenu.this, BasicFunctions.class));
        break;
    case R.id.imageButton2:
        startActivity(new Intent(MainMenu.this, GpsModule.class));
        break;
    case R.id.imageButton3:
        startActivity(new Intent(MainMenu.this, Graphic3D.class));
        break;
    }

} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T22:33:34.913

更优雅的方法是`View.OnClickListener`在你的内部实现`Activity`，然后在你的`onClick()`方法内部处理点击`Activity`。它为您提供了一个`View`对象作为参数，您可以使用该`view.getId()`方法检索视图的 id，然后您可以使用该块为布局中`switch`的每个执行操作。`Button`希望这可以帮助。

# python - 正则表达式匹配中的变音符号（通过语言环境？）

> ID：12240260
> 
> 赞同：10
> 
> 时间：2012-09-02T22:27:35.220
> 
> 标签：python, regex, locale

我很惊讶我无法在正则表达式中匹配德语变音符号。我尝试了几种方法，大多数涉及设置语言环境，但到目前为止无济于事。

```
locale.setlocale(locale.LC_ALL, 'de_DE.UTF-8')
re.findall(r'\w+', 'abc def g\xfci jkl', re.L)
re.findall(r'\w+', 'abc def g\xc3\xbci jkl', re.L)
re.findall(r'\w+', 'abc def güi jkl', re.L)
re.findall(r'\w+', u'abc def güi jkl', re.L) 
```

这些版本都没有正确匹配 umlaut-u (ü) 和`\w+`. 同样删除`re.L`标志或在模式字符串前面加上`u`（使其成为unicode）对我没有帮助。

有任何想法吗？如何`re.L`正确使用标志？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-02T22:30:09.313

您是否尝试过使用该`re.UNICODE`标志，如[文档](http://docs.python.org/library/re.html)中所述？

```
>>> re.findall(r'\w+', 'abc def güi jkl', re.UNICODE)
['abc', 'def', 'g\xc3\xbci', 'jkl'] 
```

快速搜索指向该[线程](http://www.gossamer-threads.com/lists/python/python/850772)，该线程给出了一些解释：

> re.LOCALE 只是将字符传递给底层 C 库。它实际上只适用于每个字符有 1 个字节的字节串。UTF-8 将 ASCII 范围之外的代码点编码为每个代码点的多个字节，并且 re 模块会将这些字节中的每一个视为一个单独的字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T15:40:35.620

在我的情况下，`\S`给了我比 更好的结果`\w`，加上将文件保存为 utf-8，加上使用`re.UNICODE`

# android - 在不修改纵横比的情况下更改位图尺寸

> ID：12240261
> 
> 赞同：1
> 
> 时间：2012-09-02T22:27:35.460
> 
> 标签：android, bitmap, image-resizing

有什么方法可以增加位图的宽度（或高度）而不拉伸它？基本上，我有一个 200x100 位图，我想通过在左侧附加 50 个（白色/透明）像素和在右侧附加 50 个像素来使其成为正方形（200x200）。

我不想在屏幕上绘制这个位图，所以理想情况下，我应该以“智能”方式或类似的方式使用转换矩阵，但我就是想不通......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T04:32:52.083

你可以尝试这样的事情：

```
 // creating a dummy bitmap
        Bitmap source = Bitmap.createBitmap(100, 200, Bitmap.Config.ARGB_8888);
        Bitmap background;
        Canvas canvas;

        if(source.getHeight() == source.getWidth()) // do nothing
            return;

        // create a new Bitmap with the bigger side (to get a square)
        if(source.getHeight() > source.getWidth()) {
            background = Bitmap.createBitmap(source.getHeight(), source.getHeight(), Bitmap.Config.ARGB_8888);
            canvas = new Canvas(background);
            // draw the source image centered
            canvas.drawBitmap(source, source.getHeight()/4, 0, new Paint());
        } else {
            background = Bitmap.createBitmap(source.getWidth(), source.getWidth(), Bitmap.Config.ARGB_8888);
            canvas = new Canvas(background);
            // draw the source image centered
            canvas.drawBitmap(source, 0, source.getWidth()/4, new Paint());
        }

        source.recycle();
        canvas.setBitmap(null);
        // update the source image
        source = background; 
```

注意：黑色边框不是图像的一部分。我选择深红色作为背景颜色，以查看图像的实际大小并将其与黑色和源图像的颜色（始终居中绘制）区分开来。

通过在 Canvas 上绘制它，它在屏幕上不可见。我使用 ImageView 只是为了测试代码。

这是我在 w=200,h=100 时得到的输出：

![在此处输入图像描述](../Images/c1112e44255c93201042d1f36e08d3a9.png)

这是我在 w=100,h=200 时得到的输出：

![在此处输入图像描述](../Images/395a9cd28585066fc0c18b8ca35bd8e1.png)

# xml - XQUERY：使用 xquery 从不同标签中重新获取值

> ID：12240266
> 
> 赞同：1
> 
> 时间：2012-09-02T22:28:02.247
> 
> 标签：xml, xquery

我开始使用 xquery，我想知道如何从 2 种不同类型的标签中获取值。例如：

xml

```
<elementType>value</elementType>
<otherElementType>value</elementType>
<elementType>value</elementType>
<elementType>value</elementType> 
```

查询

```
"for $b in $doc//elementType return stringg($b)" 
"for $b in $doc//otherElementType return stringg($b)" 
```

我想要这个，但只使用一个查询，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T23:09:35.767

**使用可能是最短的表达式**：

```
//*[self::elementType or self::otherElementType]/string() 
```

# python - Uploading multiple files via single form field via Python CGI

> ID：12240267
> 
> 赞同：3
> 
> 时间：2012-09-02T22:28:05.540
> 
> 标签：python, cgi

I would like to upload multiple files using a single form field via Python CGI script using the code [here](http://webpython.codepoint.net/cgi_file_upload). Newer browsers seem to support this feature per [here](http://davidwalsh.name/multiple-file-upload) and [here](http://rakaz.nl/2009/08/uploading-multiple-files-using-html5.html). The HTML form seems straightforward:

`<input name="file" type="file" multiple="" />`

Using this form to select two files name `file0` and `file1` will result in the following per [HTML5 input multiple attribute](http://www.w3schools.com/html5/tryit.asp?filename=tryhtml5_input_multiple):

`file=file0&file=file1`

I initially assumed it would be an array of sort but it seems to use an ampersand for separation.

My attempt to modify the code and add a `for` statement to iterate through each file specified in the form field using the following code has been unsuccessful (see error below). I am up for other ideas that may also work using Python if using a `for` statement is not the best route.

```
#!/usr/bin/python
import cgi, os

form = cgi.FieldStorage()

# Generator to buffer file chunks
def fbuffer(f, chunk_size=10000):
   while True:
      chunk = f.read(chunk_size)
      if not chunk: break
      yield chunk

for fileitem in form['file']:

   # A nested FieldStorage instance holds the file
   fileitem = form['file']

   # Test if the file was uploaded
   if fileitem.filename:

      # strip leading path from file name to avoid directory traversal attacks
      fn = os.path.basename(fileitem.filename)
      f = open('/var/www/domain.com/files' + fn, 'wb', 10000)

      # Read the file in chunks
      for chunk in fbuffer(fileitem.file):
         f.write(chunk)
      f.close()
      message = 'The file "' + fn + '" was uploaded successfully'

   else:
      message = 'No file was uploaded'

   print """\
   Content-Type: text/html\n
   <html><body>
   <p>%s</p>
   </body></html>
   """ % (message,) 
```

Single file selected error:

```
 Traceback (most recent call last):, referer: https://www.domain.com/files/upload.htm
   File "/usr/lib/cgi-bin/test.py", line 13, in <module>, referer: https://www.domain.com/files/upload.htm
     for fileitem in form['file']:, referer: https://www.domain.com/files/upload.htm
   File "/usr/lib/python2.6/cgi.py", line 518, in __iter__, referer: https://www.domain.com/files/upload.htm
     return iter(self.keys()), referer: https://www.domain.com/files/upload.htm
   File "/usr/lib/python2.6/cgi.py", line 583, in keys, referer: https://www.domain.com/files/upload.htm
     raise TypeError, "not indexable", referer: https://www.domain.com/files/upload.htm
 TypeError: not indexable, referer: https://www.domain.com/files/upload.htm
 Premature end of script headers: test.py, referer: https://www.domain.com/files/upload.htm 
```

Two files selected error:

```
 Traceback (most recent call last):, referer: https://www.domain.com/files/upload.htm
   File "/usr/lib/cgi-bin/test.py", line 19, in <module>, referer: https://www.domain.com/files/upload.htm
     if fileitem.filename:, referer: https://www.domain.com/files/upload.htm
 AttributeError: 'list' object has no attribute 'filename', referer: https://www.domain.com/files/upload.htm
 Premature end of script headers: test.py, referer: https://www.domain.com/files/upload.htm 
```

If the `.filename` references are removed, a third error is produced, same for single or two files being selected:

```
Traceback (most recent call last):, referer: https://www.domain.com/files/upload.htm
   File "/usr/lib/cgi-bin/test.py", line 24, in <module>, referer: https://www.domain.com/files/upload.htm
     fn = os.path.basename(fileitem), referer: https://www.domain.com/files/upload.htm
   File "/usr/lib/python2.6/posixpath.py", line 111, in basename, referer: https://www.domain.com/files/upload.htm
     i = p.rfind('/') + 1, referer: https://www.domain.com/files/upload.htm
 AttributeError: 'list' object has no attribute 'rfind', referer: https://www.domain.com/files/upload.htm
 Premature end of script headers: test.py, referer: https://www.domain.com/files/upload.htm 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T00:28:14.260

删除`for file in form`. 该错误意味着这`form['file']`是一个列表。

添加到 html 表单：`method=post enctype=multipart/form-data`.

```
import shutil

if 'file' in form:
   filefield = form['file']
   if not isinstance(filefield, list):
      filefield = [filefield]

   for fileitem in filefield:
       if fileitem.filename:
          fn = secure_filename(fileitem.filename)
          # save file
          with open('/var/www/domain.com/files/' + fn, 'wb') as f:
              shutil.copyfileobj(fileitem.file, f) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T22:32:41.483

我不知道 cgi 库是否支持上传多个文件，但你的错误很简单：你`file[]`在 HTML 中调用了你的字段，但在 Python 中你指的是简单的`file`. 他们不一样。我建议简单地放弃 PHP-ism 并调用该字段`file`。

# entity-framework - What's the best way to give myself easy access to the UserProfile object in a controller in MVC4?

> ID：12240269
> 
> 赞同：2
> 
> 时间：2012-09-02T22:28:10.977
> 
> 标签：entity-framework, asp.net-mvc-4, visual-studio-2012

## Considerations

I created a new MVC4 internet application. Out of the box, it comes with this class in the account models:

```
[Table("UserProfile")]
public class UserProfile
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int UserId { get; set; }
    public string UserName { get; set; }
} 
```

It looks like a good place to add all my other user information and to link my tables to. The fact that it's called a "Profile" seems a bit odd to me, as this appears to be the "base" user class.

I see a table in the database called `webpages_Membership`, but I don't know where the model for that is. When using OpenID to create an account, it doesn't look like a record even gets inserted in there. I believe that's just for local accounts, thus "UserProfile" seems to be the only thing a user is guaranteed to have.

Anyway, the base `Controller` class appears to have a `Profile` property defined as a `ProfileBase` but when I inspect using the debugger, it's a `System.Web.Profile.DefaultProfile`, and it doesn't seem to be "filled in". i.e., `IsAnonymous` is true, and `UserName` is `null`, even when I'm logged in.

I'm guessing this is intentional? Am I expected to override that by defining my own base controller?

I see [this question](https://stackoverflow.com/a/2889309/65387) and [this article](http://dotnetnsqlcorner.blogspot.ca/2012/05/implementing-custom-profile-in-aspnet.html) which talk about extending `ProfileBase`, but that approach seems a bit messy to me.

## Question

With all the aforementioned considerations, it seems best to me to just add all my extra properties to the `UserProfile` class that's already been created for me, then add a new `BaseController` class that extends `Controller`, and override/new the `Profile` property to return a `UserProfile` instead. **(1) Is this a good approach?**

It took me awhile, but I eventually figured out how to get the `UserProfile` object for the currently logged in user:

```
udb.UserProfiles.Single(p => p.UserName == User.Identity.Name); 
```

**(2) Is that the best way to get it?** The `UserProfile` has a `UserId` property, but I can't figure out how to retrieve it. **(3) How can I get the UserId for the currently logged in user?**

I was thinking I could have the property lazy-load the profile so it only hits the database the first time you access that property. I read some other articles that talk about json-serializing the entire user class so it doesn't have to hit the DB every page load, but that sounds even messier, and you risk the data getting out of sync.

## Implementation

Just tried this:

```
public class BaseController : Controller
{
    private UsersContext _udb = new UsersContext();
    private UserProfile _profile = null;

    public new UserProfile Profile
    {
        get
        {
            if(_profile == null && User.Identity.IsAuthenticated)
            {
                _profile = _udb.UserProfiles.Single(p => p.UserName == User.Identity.Name);
            }
            return _profile;
        }
    }
} 
```

Seems to work flawlessly.

# python - taking the log of every element in a sparse matrix

> ID：12240270
> 
> 赞同：1
> 
> 时间：2012-09-02T22:28:44.933
> 
> 标签：python, numpy, scipy, sparse-matrix, logarithm

How can you take the log base 10 of every element in a sparse matrix (COO)?

```
>>print type(X)
<class 'scipy.sparse.coo.coo_matrix'> 
```

I've tried this but it doesn't work:

```
import math
X.data = math.log(X.data,10) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T22:33:20.080

使用`np.log10`而不是`math.log10`：

```
import numpy as np
X.data = np.log10(X.data) 
```

# c++ - using an if statement to choose type to declare a variable C++

> ID：12240271
> 
> 赞同：1
> 
> 时间：2012-09-02T22:28:45.197
> 
> 标签：c++

I am referencing a variable for use in a function and there are times it might be an int and times it might be a float. I have figured out a way to automatically tell which type I want the variable to be (either an int or a float) but I want a way to declare that variable so that when it is referenced later it will be the correct type. I know that you can cast one type of variable into another but it seems that it requires a new variable to be introduced.

Any thoughts?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T22:31:14.593

这就是[union](http://en.wikipedia.org/wiki/Union_%28computer_science%29#C.2FC.2B.2B)的用途。这是一个例子：

```
union int_or_float
{
    int i;
    float f;
}; 
```

在你的功能中：

```
void function(int_or_float param, bool is_int)
{
    if (is_int)
        do_something_with_int(param.i);
    else
        do_something_with_float(param.f);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T22:34:23.293

**不要使用`union`.**

`double`在所有情况下都将该变量设为 a 。

典型的 64 位`double`可以准确地表示所有 32 位`int`值。

记住 Donald Knuth 的格言，“过早的优化是万恶之源”

另外，请记住 Alexandrescu 和 Sutter，“不要为小事出汗！”。

另外，请记住 KISS 原则，“保持简单，愚蠢”。

在 Reddit 人群开始因为被认为是负面的回答而开始投票之前，我最好链接到一个百科全书，上面说同样的内容，嘿，[维基百科中的 KISS](http://en.wikipedia.org/wiki/KISS_principle)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T22:31:32.863

使用工会。它感觉有点像一个结构，但它只包含一个成员。例如，参见：[http](http://www.go4expert.com/forums/showthread.php?t=15) ://www.go4expert.com/forums/showthread.php?t=15 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-02T22:43:51.423

这是一个复杂的替代方案：

```
class Base { virtual ~Base() { } };
class Int : public Base { int a; };
class Float : public Base { float a; };
class Both {
public:
   Base &choose(int i) { 
     switch(i) {
     case 0: return my_int;
     case 1: return my_float;
     };
   }
private:
   Int my_int;
   Float my_float;
}; 
```

然后是虚函数或 dynamic_cast 对 Base 引用做任何事情。

另一个好技巧是在它们之间添加转换：

```
void calc_int() {
  my_int.a = (int)my_float.a;
}
void calc_float() {
  my_float.a = (float)my_int.a;
} 
```

然后这只是二传手的问题：

```
void set(int a) {
  my_int.a = a;
  calc_float();
}
void set(float a) {
  my_float.a = a;
  calc_int();
} 
```

# c++ - C++ Templates and Classes

> ID：12240273
> 
> 赞同：0
> 
> 时间：2012-09-02T22:28:49.520
> 
> 标签：c++, templates, compiler-errors

I would like to sort different types of numbers in different files as a learning exercise. I've managed to get doubles and ints to sort correctly, but cannot get my own type (to sort a deck of cards) to format correctly. I've managed to get it narrowed down to my **sort function in the Reader Class**. I'm getting all sorts of errors. What exactly am I doing wrong? Or am I missing something? Thanks everyone, I hope I explained my problems clearly.

My file I created for Cards looks something like...

```
1 11 (meaning Jack of Diamonds)

2 8 (meaning 8 of hearts) 
```

etc...

errors:

> error: no match for 'operator<' in '((Reader*)this)->Reader::array[compareIndex] < ((Reader*)this)->Reader::array[smallestIndex]'
> 
> error: cannot convert 'Card' to 'int' in initialization
> 
> error: no match for 'operator=' in '((Reader*)this)->Reader::array[smallestIndex] = temp'

**My Code**

Lastly, Main

```
#include <iostream>
#include "Reader.h"
#include "Card.h"

using namespace std;

int main() {

    Reader<int> nums;
    Reader<double> dubs;
    Reader<Card> cards;
    int number;

    do {

        cout << "Enter 1 if your file contains integers\n"
           << "Enter 2 if your file contains doubles\n"
           << "Enter 3 if your file contains Cards:\n"
           << "Enter a number: ";
        cin >> number;

        if (number == 1){
            nums.open_IO();
            nums.read_array();
            nums.sort();
            nums.write_array();
            nums.close_IO();
        } else if (number == 2){
            dubs.open_IO();
            dubs.read_array();
            dubs.sort();
            dubs.write_array();
            dubs.close_IO();
        } else if (number == 3){
            cards.open_IO();
            cards.read_array();
            cards.sort();
            cards.write_array();
            cards.close_IO();
        }

    } while ((number != 1) && (number != 2) && (number != 3));

} 
```

Reader.h

```
#ifndef READER_H
#define READER_H
#include <string>
#include <fstream>
using namespace std;

template <class rList>
class Reader {
 public:
    static const int SIZE = 50;

      Reader();

      bool open_IO();

      void close_IO();

      bool read_array();

      bool write_array();

      void sort();

 private:
      // Ask for the files
      void ask_filenames();

      rList array[SIZE];
      int readSize;

      // input file names and stream to get the data
      string readFileName;
      ifstream inFile;

      // output file names and stream to get the data
      string writeFileName;
      ofstream outFile;
      bool askedFileNames;
    };

#endif

#include "Reader.cpp" 
```

My Reader.Cpp file

```
// File: Reader.cpp
#ifndef READER_CPP
#define READER_CPP
#include "Reader.h"
#include <iostream>
using namespace std;

/***************************************************************************
 * Contructors and modifying functions defined in "Reader.h"
***************************************************************************/

template <class rList>
Reader<rList>::Reader() {
  askedFileNames = false;
  readFileName = "";
  writeFileName = "";
  readSize = 0;
  rList empty;
  for( int i = 0; i<SIZE; i++ ) array[i]=empty;
}

template <class rList>
bool Reader<rList>::open_IO(){
    if(!askedFileNames) ask_filenames();

    inFile.open(readFileName.c_str()); //we can't pass a string, we need a char array
    if(!inFile.is_open()) {
        return false;
    }
    outFile.open(writeFileName.c_str());
    if(!outFile.is_open()) {
        inFile.close(); //inFile opened successfully so it needs to be closed now
        return false;
    }
    return true;
}

template <class rList>
void Reader<rList>::close_IO() {
    inFile.close();
    outFile.close();
}

template <class rList>
bool Reader<rList>::read_array() {
    if(inFile.is_open()) {
        inFile >> readSize;
        int index = 0;
        while(!inFile.eof() && index < readSize) {
            inFile >> array[index++]; //increments index after assigning value
        }
        readSize = index; //the input file could have had fewer numbers so set readSize
        return true;
    }
    return false;
}

template <class rList>
bool Reader<rList>::write_array() {
    if(outFile.is_open()) {
        outFile << readSize << endl;
       //don't forget the number indicating the element co
        int index = 0;
        while(index < readSize) {
            outFile << array[index++] << endl;
        }
        return true;
    }
    return false;
}

template <class rList>
void Reader<rList>::sort() {
    int startIndex = 0;
    int compareIndex;
    int smallestIndex;
    bool smallerFound;
    while(startIndex < readSize) {
        smallestIndex = startIndex;
        compareIndex = startIndex + 1;
        smallerFound = false;
        while(compareIndex < readSize) { //find the smallest value from the starting index
            if(array[compareIndex] < array[smallestIndex]) {
                smallestIndex = compareIndex;
                smallerFound = true;
            }
            compareIndex++;
        }
        if(smallerFound) { //only swap the values if a smaller value is found
            int temp = array[startIndex];
            array[startIndex] = array[smallestIndex];
            array[smallestIndex] = temp;
        }
        startIndex++;
    }
}

/*--------------------------------------------------------------
  This function asks the user for the filenames. This operation
  is placed in a separate function because it is called multiple
  times.
  --------------------------------------------------------------*/
template <class rList>
void Reader<rList>::ask_filenames() {
  cout << "Welcome. Please type in the name of the file to read the numbers.\n";
  cin >> readFileName;
  cout << "Thank you. Please type in the name of the file to write the numbers.\n";
  cin >> writeFileName;
  askedFileNames = true;
}

#endif 
```

Card.h

```
#include <ostream>
#include <string>
#include "Reader.h"

using namespace std;

class Card{
 public:
    static const int SIZE = 50;
    enum SUIT {clubs, diams, hears, spads };
    enum RANK {ace=1, two, thr, fou, fiv, six, sev, eig, nin, ten, jac, que, kin};

    Card();

    Card(int newSuit, int newRank);

    void change(int newSuit, int newRank);

    friend ostream& operator << ( ostream& out, Card theCard );
    friend istream& operator >> ( istream& in, Card theCard );

 private:
    void change_rank(int newRank);

    void change_suit(int newSuit);

    string get_rank() const;

    string get_suit() const;

    SUIT suit;
    RANK rank;

}; 
```

Card.cpp

```
 #include <iostream>
#include <string>
#include "Card.h"

using namespace std;

Card::Card() { suit = spads; rank = ace; }

Card::Card(int newSuit, int newRank) {
    change(newSuit, newRank);
}

void Card::change( int newSuit, int newRank ) {
    change_suit( newSuit );
    change_rank( newRank );
}

ostream& operator << ( ostream& out, Card theCard ) {
  out << theCard.get_rank() << " of " << theCard.get_suit();
  return out;
}

istream& operator >> ( istream& in, Card theCard ) {
    int aSuit;
    int aRank;

    in >> aSuit >> aRank;
    return in;
}

// private member functions to set the private variables with their
// corresponding values: integer input -> enumerated type;
void Card::change_rank( int newRank ) {
    if( newRank == ace ) rank = ace;
    else if( newRank == two ) rank = two;
    else if( newRank == thr ) rank = thr;
    else if( newRank == fou ) rank = fou;
    else if( newRank == fiv ) rank = fiv;
    else if( newRank == six ) rank = six;
    else if( newRank == sev ) rank = sev;
    else if( newRank == eig ) rank = eig;
    else if( newRank == nin ) rank = nin;
    else if( newRank == ten ) rank = ten;
    else if( newRank == jac ) rank = jac;
    else if( newRank == que ) rank = que;
    else if( newRank == kin ) rank = kin;
}

void Card::change_suit( int newSuit ) {
    if( newSuit == clubs ) suit = clubs;
    else if( newSuit == spads ) suit = spads;
    else if( newSuit == diams ) suit = diams;
    else if( newSuit == hears ) suit = hears;
}

  // Private member functions to extract the information from the card
  // class.
string Card::get_rank() const {
    if( rank == ace ) return "ace";
    if( rank == two ) return "two";
    if( rank == thr ) return "three";
    if( rank == fou ) return "four";
    if( rank == fiv ) return "five";
    if( rank == six ) return "six";
    if( rank == sev ) return "seven";
    if( rank == eig ) return "eight";
    if( rank == nin ) return "nine";
    if( rank == ten ) return "ten";
    if( rank == jac ) return "jack";
    if( rank == que ) return "queen";
    if( rank == kin ) return "king";
    return "get_rank: error";
}

string Card::get_suit() const {
    if( suit == diams ) return "D";
    if( suit == hears ) return "H";
    if( suit == spads ) return "S";
    if( suit == clubs ) return "C";
    return "get_suit: error";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T22:52:05.160

如果您使用 a`std::vector<Card>`而不是 C 数组，并且重载`operator<`了 for `Card`，则可以让标准库为您洗牌和排序。

`vector<T>`是标准库自带的**容器**。它是一个类模板，可以存储 type 的元素`T`。`T`可以是数字类型，a`std::string`甚至是 a `struct`or `class`。

以下是您如何重载小于运算符的方法`Card`：

```
bool Card::operator<(const Card& other)
{
    return true if this card is smaller than the other card;
    // You may want to order by rank, then by suit, or vice-versa.
} 
```

定义此运算符后，标准库容器和算法现在将“知道”如何订购您的`Cards`.

这是您如何使用 a `vector`of `Card`s 的方法。

```
std::vector<Card> deck(52); // Initially sized to 52 elements
// Populate deck just like you would an array
deck[0] = Card(diams, ace);
etc...

// Sort the deck
std::sort(deck.begin(), deck.end());

// Shuffle the deck
std::random_shuffle(deck.begin(), deck.end());

// Get the 5th card in the deck
Card fifth = deck[4]; 
```

`std::sort`使用快速排序算法，它比您编写的冒泡排序要快得多（无意冒犯:-)。很难编写可以超越标准库提供的手工数据结构和算法。编译器编写者花费数年时间来完善和调整他们的标准库实现。

当您使用标准库容器时，您可以使用大量标准库算法。这使您可以专注于解决问题，而不是一遍又一遍地重写相同的基本算法和数据结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T22:48:04.373

您需要为`Card`

```
class Card{
 public:
  friend bool operator< ( const Card &left, const Card &right ) {
     ... 
  } 
```

你有一个错字。

```
 if(smallerFound) { //only swap the values if a smaller value is found
        int temp = array[startIndex];
        array[startIndex] = array[smallestIndex];
        array[smallestIndex] = temp;
    } 
```

应该

```
 if(smallerFound) { //only swap the values if a smaller value is found
        rList temp = array[startIndex];
        array[startIndex] = array[smallestIndex];
        array[smallestIndex] = temp;
    } 
```

或更简单地说

```
 if(smallerFound) { //only swap the values if a smaller value is found
        std::swap( array[startIndex], array[smallestIndex] );
    } 
```

# javascript - Set a cookie value in Node.js

> ID：12240274
> 
> 赞同：30
> 
> 时间：2012-09-02T22:28:52.550
> 
> 标签：javascript, node.js, express, cookies

I'm developing a website with node.js and express. How can I set a cookie value?

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-09-02T22:48:11.037

由于 Express 是基于[Connect](http://www.senchalabs.org/connect/)构建的，您可以使用[`cookieParser`中间件](http://www.senchalabs.org/connect/cookieParser.html)[`req.cookies`](http://expressjs.com/api.html#req.cookies)来读取和写入[`res.cookie()`](http://expressjs.com/api.html#res.cookie)cookie：

```
// configuration
app.use(express.cookieParser());
// or  `express.cookieParser('secret')` for signed cookies

// routing
app.get('/foo', function (req, res) {
    res.cookie('bar', 'baz');
    // ...
});

app.get('/bar', function (req, res) {
    res.send(req.cookies.bar);
}); 
```

* * *

[更新]

从 Express 4.0 开始，[Connect 将不再包含在 Express](https://github.com/visionmedia/express/wiki/Migrating-from-3.x-to-4.x#overview)中，并且默认中间件[已移至它们自己的包](https://github.com/senchalabs/connect#middleware)中，包括[`cookie-parser`](https://www.npmjs.org/package/cookie-parser).

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-02T22:53:18.343

您可以只使用 express 提供的响应对象来设置您的 cookie。

您可以在以下位置找到有关如何执行此操作的详细信息：http: [//expressjs.com/en/api.html#res.cookie](http://expressjs.com/en/api.html#res.cookie)

# php - 什么是mysql中的复合外键？

> ID：12240280
> 
> 赞同：5
> 
> 时间：2012-09-02T22:29:31.203
> 
> 标签：php, mysql, html, sql, yii

在我正在使用的框架的文档中看到这个术语（复合外键）（yii）。什么是复合外键（在 mySql 数据库中）？

（*我的猜测是，鉴于两个表之间的关系，一个表的列与另一个表的 id 具有完全相同的名称。*）

*免责声明：我进行了尽职调查，并在谷歌上搜索了整整两分钟，但没有找到该术语的确切定义。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-02T23:38:28.130

假设我们有一个用户表：

```
+---------+----------+------------+------------+-- --------------+
| 姓氏 | 姓名 | 邮编 | 出生日期 | 电子邮件 |
+---------+----------+------------+------------+-- --------------+
| 琼斯 | 约翰 | 60612-0344 | 1970-02-14 | john@jones.com |
| 琼斯 | 简 | 60612-0344 | 1971-05-26 | jane@jones.com |
| 史密斯 | 萨拉 | 19002-0052 | 1982-06-21 | sara@smith.com |
+---------+----------+------------+------------+-- --------------+

```

因为我们的应用程序要求每个用户都有自己不同的电子邮件地址，所以我们可以通过`Email`列中的值来唯一标识表中的记录：它构成了表中的*键*。这样的键（在单个列上定义）据说是*simple*。

在某些情况下，人们可能知道没有两个用户可以有相同的姓名、出生日期和邮政编码：那么另一个可能的键是`(Surname, Forename, ZIP, DOB)`. 这样的键（定义在多列上）被称为*复合*键。

由于每条记录的键（根据定义）必须是唯一的，因此可以`UNIQUE`通过在相关列上定义索引（表`PRIMARY KEY`是一种特殊类型的`UNIQUE`索引）来告诉 MySQL 强制执行这种唯一性约束：尝试创建（或更新）一个与现有记录具有相同键的记录将失败。

现在假设有一张订单表：

```
+--------------+------------+---------+----------+
| 订单号 | 状态 | 总计 | 客户 |
+--------------+------------+---------+----------+
| 12345 | 已完成 | 1234.99 | ? |
| 12346 | 待定 | 345.00 | ? |
| 12347 | 取消 | 9876.50 | ? |
+--------------+------------+---------+----------+

```

我们希望将订单与用户表中的相关记录相关联。但是怎么做呢？我们在`Customer`列中放什么？

显然，我们希望在 users 表中标识一条唯一记录，因此我们需要使用其中的一个键（`Email`例如上面的第一个示例）。以这种方式使用一个表的键从另一个表中引用其记录在关系数据库中非常普遍：在这种情况下，我们将引用列称为*外键*（因为它将键保存到外表中）。

如果我们使用复合键作为参考，我们将有一个*复合外键*。在上面的第二个示例中，我们的 orders 表可能有列`Customer_Surname`, `Customer_Forename`,`Customer_ZIP`和`Customer_DOB`它们一起形成 users 表的外键（在这种情况下，我不推荐这样的模式）。

MySQL 不仅可以强制执行[外键约束](http://dev.mysql.com/doc/en/innodb-foreign-key-constraints.html)（确保被引用的记录存在于外表中），而且如果被引用的记录本身被更新或删除，也可以自动更新或删除引用（订单）表。例如，如果 John 从 users 表中删除，他的所有订单都可以自动从 orders 表中清除（同样，在这种情况下可能不是人们想要的）；或者，如果他的电子邮件地址发生了变化，该`Customer`列可以自动更新。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-02T22:32:43.767

A`composite key`由***多个属性组成，以唯一标识实体***出现。这与复合键的不同之处在于组成键的一个或多个属性本身不是简单键。

例如，您有一个保存您的 CD 收藏的数据库。其中一个实体称为轨道，它包含 CD 上轨道的详细信息。这有一个 CD 名称、曲目编号的组合键。

![在此处输入图像描述](../Images/2e02693bd1704f5dcd680bbe052fecce.png)

曲目实体中的 CD 名称是一个简单的键，链接到 CD 实体，但曲目编号本身并不是一个简单的键。

# android - Saving an actual state of the application

> ID：12240281
> 
> 赞同：0
> 
> 时间：2012-09-02T22:29:45.403
> 
> 标签：android, android-preferences, android-sqlite

I'm developing an application in which one of the function is a voice recording. User can choose among of 4 categories. Each category consists of strings populated from an array. One string / word is displayed at the time on the screen. Once it's recorded he or she can swipe a screen to see the next word. The next word is of course next item from an array. During the runtime I keep track of the actual position by saving it in the variables. However when a user quits an application of course all the variables are reseted and when come back, he or she has to start over again from the first word. I know that I have to persist the current position in the file or db to be able to remember the last state. My question is what is the best choice in this case of saving it? Besides of the current position each user will also have assign a number (kind of feedback on ebay or reputation in stackoverflow) that I would also have to keep track of. Is shared preferences a good choice or maybe it's better to create a SQLite db? Please advise. Thank you.

# python - PyDev, NumPy and __init__.py

> ID：12240282
> 
> 赞同：1
> 
> 时间：2012-09-02T22:29:46.320
> 
> 标签：python, numpy, pydev

When using PyDev to edit code using NumPy, I have found the following problem:

PyDev recognizes that the numpy library exists, so it does not mark its import statement as an error. What it does mark as an error is calling any function in the module.

The interesting bit, though, is that if instead of doing

> import numpy as np

i do

> import numpy.__init__ as np

then everything works fine, it does not mark functions as errors and the autocomplete feature works correctly.

So, it seems that although it finds the library in the path, for some reason it does not try to import __init__.py by default.

Any ideas?

# python - How to share data between requests in Tornado Web

> ID：12240285
> 
> 赞同：12
> 
> 时间：2012-09-02T22:30:08.190
> 
> 标签：python, tornado

I have the following use case for my Tornado web server:

Upon POST requests entries can be made to the server, entries which will not be persisted to a file or database. Upon GET requests a process can be started or terminated.

Hence I need to share data between different requests in my `RequestHandler` implementation. What is the normal way to do so?

I had difficulties saving data to `self`, for instance `self.entry = "..."`. In another request the data was not present anymore.

The only working solution I've found is to store that in the application object:

```
 application = web.Application([
            (r'.*', MainHandler,
            ]) 
```

and

```
 def get(self):
         # ...
         self.application.entry = "..." 
```

Is that the proper way? Also what about synchronization here, I mean this means access to shared data.

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-03T11:32:58.583

我建议如下：而不是数据库访问对象传递一个存储您的数据的对象，例如：

```
data = DataStore()

application = web.Application([
        (r'.*', MainHandler, dict(data = data),
        ]) 
```

使用以下`RequestHandler`初始化方法。

```
def initialize(self, data):
     self.data = data 
```

您必须在之前创建对象并传递它，否则每次处理请求时都会重新创建它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-03T07:20:12.827

该[文档](http://www.tornadoweb.org/documentation/overview.html#overriding-requesthandler-methods)提供了一种方法来做到这一点：

```
class MyHandler(RequestHandler):
    def initialize(self, database):
        self.database = database

    def get(self, username):
        ...

mydatabase = dict()

app = Application([
    (r'/user/(.*)', MyHandler, dict(database=mydatabase)),
    ]) 
```

然后，您可以将对象保存`mydatabase`到文件中。

但我不确定这是实现请求之间同步的正确方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T05:31:38.860

你可以使用`memcached`这样的东西。但是，您需要设置 memcached 服务器。

[http://pypi.python.org/pypi/python-memcached/](http://pypi.python.org/pypi/python-memcached/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-03T06:43:25.027

应用程序是存储（半）持久数据的正确对象。但是，正如其他 anwser 所建议的那样，您应该考虑使用某种数据库来存储这些数据。

但是，您应该注意如果会话（或事务）没有正确完成（例如，您得到一个 POST 但没有 GET 来触发该操作），您应该删除会话数据，以免您的网络服务器泄漏内存。

根据我的经验，我建议使用[Redis](http://redis.io)，因为它易于使用并支持[密钥过期](http://redis.io/commands/expire)，当您需要管理会话数据时，这种机制会派上用场。

# macos - mountainlion apr compile lacking 'cc'

> ID：12240289
> 
> 赞同：10
> 
> 时间：2012-09-02T22:30:26.710
> 
> 标签：macos, osx-mountain-lion, xcode4.4, apr

Trying to build mod_auth_openid on MountainLion with XCode Version 4.4.1 (4F1003), I get a complaint about a missing 'cc' command, as follows:

```
/usr/share/apr-1/build-1/libtool --silent --mode=link /Applications/Xcode.app/Contents/Developer/Toolchains/OSX10.8.xctoolchain/usr/bin/cc -o mod_auth_openid.la  -rpath /usr/libexec/apache2 -module -avoid-version    libmodauthopenid.la -I/usr/include/apache2 -I/usr/include/apr-1 -I/usr/local/include -L/usr/local/lib -lopkele -lcurl -lexpat -ltidy -lssl -lcrypto -lz -L/usr/lib -lpcre -lcurl
/usr/share/apr-1/build-1/libtool: line 4574: /Applications/Xcode.app/Contents/Developer/Toolchains/OSX10.8.xctoolchain/usr/bin/cc: No such file or directory
apxs:Error: Command failed with rc=8323072 
```

What to do?

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-11T09:10:14.813

我在 Mac（Mountain Lion）上尝试使用自制软件安装 mod_wsgi 时遇到了类似的问题。尽管 bmargulies 通过指向 github 链接在他的评论中发布了答案。但仍然在此处发布解决方案以确保完整性。

运行以下命令。

```
sudo ln -s /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain /Applications/Xcode.app/Contents/Developer/Toolchains/OSX10.8.xctoolchain 
```

然后重新运行安装命令

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-20T17:44:20.933

Mountain Lion/Homebrew/mod_wsgi 恰好遇到了这个问题。在我的情况下，工具链符号链接没有解决问题。回到另一台 Mac 上，我使用 MacPorts 毫无问题地执行此操作，并查看了 mod_wsgi 的 Portfile。他们在配置步骤中有一个 --disable-framework 标志。添加了这个标志，一切都很好。此处的要点中提供了详细信息[https://gist.github.com/talonsensei/6284446](https://gist.github.com/talonsensei/6284446)

# php - Displaying images in rss description tag with php

> ID：12240290
> 
> 赞同：0
> 
> 时间：2012-09-02T22:30:46.170
> 
> 标签：php, html, xml, image, rss

I'm trying to display an image beside or before my description tag in my rss, I have tried on my localhost it worked like this:

```
<description><![CDATA[<img src="<?php echo $img; ?>">test test test test testtest test test test]]></description> 
```

but on my website it's some kind different like this:

```
echo '
       <item>
          <title>'.$article[title].'</title>
          <description><![CDATA[<img src="$img_path">
          '.$shortdesc.'  
          ]]></description>
      </item>'; 
```

it's not working like this what is wrong in this ode? it's returnes blank iamge, here it's the page source from browser:

```
<description><![CDATA[<img src="$img_path">test test test</description> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T22:33:23.570

不会解析单引号内的 PHP 代码。

```
echo '
       <item>
          <title>'.$article['title']."</title>
          <description><![CDATA[<img src='{$img_path}'>
          ".$shortdesc.'  
          ]]></description>
      </item>'; 
```

或者

```
echo '
       <item>
          <title>'.$article['title'].'</title>
          <description><![CDATA[<img src="'.$img_path.'">
          '.$shortdesc.'  
          ]]></description>
      </item>'; 
```

# c - stat() giving wrong directory size in c

> ID：12240291
> 
> 赞同：3
> 
> 时间：2012-09-02T22:30:52.100
> 
> 标签：c, struct, message, stat, reply

I need to find the size of a file or a directory whatever given in the commandline using stat(). It works fine for the files (both relative and absolute paths) but when I give a directory, it always returns the size as 512 or 1024\.

If I print the files in the directory it goes as follows :

```
 Name : .
 Name : ..
 Name : new
 Name : new.c 
```

but only the new and new.c files are actually in there. For this, the size is returned as 512 even if I place more files in the directory. Here s my code fragment:

```
if (stat(request.data,&st)>=0){
        request.msgType = (short)0xfe21;
        printf("\n Size : %ld\n",st.st_size);
        sprintf(reply.data,"%ld",st.st_size);
        reply.dataLen = strlen(reply.data);
    }
    else{
        perror("\n Stat()");
    }
} 
```

Where did I go wrong???

here is my request, reply structure:

```
 struct message{
        unsigned short msgType;
        unsigned int offset;
        unsigned int serverDelay;
        unsigned int dataLen;
        char data[100];
    };
struct message request,reply; 
```

I run it in gcc compiler in unix os.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-02T22:43:29.230

`stat()`在目录上不会返回其中文件大小的总和。大小字段表示目录条目占用了多少空间，它取决于几个因素。如果您想知道特定目录下的所有文件占用了多少空间，则必须沿树递归，将所有文件占用的空间相加。这就是工具之类的`du`工作方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T01:29:23.687

是的。readdir()/stat() 上的 opendir() + 循环将为您提供文件/目录大小，您可以将其相加得到总数。如果您有子目录，您还必须循环访问这些子目录和其中的文件。

要使用 du 你可以使用 system() 函数。这只会将结果代码返回给调用程序，因此您可以将结果保存到文件中，然后读取该文件。代码会是这样的，

```
system("du -sb dirname > du_res_file"); 
```

然后你可以阅读文件 du_res_file （假设它已经创建成功）来得到你的答案。这将一次性给出目录+子目录+文件的大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T22:38:59.433

对不起，我第一次错过了，stat只给出文件的大小，而不是目录：

> 这些函数返回有关文件的信息。文件本身不需要权限，但在 stat() 和 lstat() 的情况下 - 需要对指向文件的路径中的所有目录具有执行（搜索）权限。
> 
> st_size 字段以字节为单位给出文件的大小（如果它是常规文件或符号链接）。符号链接的大小是它包含的路径名的长度，没有终止的空字节。

[查看fstat/stat](http://linux.die.net/man/2/fstat)上的手册页

# javascript - Noob web 开发者想要添加网页设计和交互

> ID：12240293
> 
> 赞同：0
> 
> 时间：2012-09-02T22:31:02.630
> 
> 标签：javascript, html, css, ajax, django

我确定已经问过这个问题，但是很难专门针对我正在寻找的内容进行谷歌搜索。

所以，基本上我已经对大学材料中的 OOP 和计算机科学感到满意。现在，我正在尝试学习 Web 开发，并且已经具备 HTML、CSS 和一些 django 的基础知识（这是我用来制作网站的工具）。

现在，我知道 CSS 是用来设计网站外观的。javascript 可以帮助添加动画和额外的东西。然后我听说了更多的东西，比如 AJAX 和 javascript（也许有人可以帮我列出所有用于设计的工具：AJAX、javascript、javascript 库等）。

基本上，我的主要问题是：**有人对我应该如何学习这些材料有任何建议吗？**

（比如，我应该尝试学习 javascript 并学习一些经常使用的库吗？或者......也许我对 javascript 的作用有错误的想法）

编辑：所以自从我从事网络开发工作以来已经一年多了。我学习了基础知识，我标记为答案的那篇文章肯定很有帮助。但现在，我觉得在制作网络方面学习任何东西的最佳方式是将你的想法全部投入脑海，然后谷歌了解你可以寻找和使用哪些工具来实现这些想法。例如，我的帖子是关于“网页设计和交互”的。作为一名网络开发人员，这不是我的工作，所以很明显像 twitter bootstrap 这样的东西会有所帮助。但也有其他前端插件和工具，它帮助我只是谷歌并查找它们以找到我想要做的事情。我觉得这是接近“学习这种材料”的最佳方式

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T22:38:35.053

查看[http://w3schools.com/](http://w3schools.com/)他们为您提到的领域的初学者提供了很棒的教程等等。

Code Academy 上的交互式教程非常棒 HTML/CSS： http: [//www.codecademy.com/tracks/web](http://www.codecademy.com/tracks/web) JavaScript： http: [//www.codecademy.com/tracks/javascript-upgraded](http://www.codecademy.com/tracks/javascript-upgraded)

希望这些帮助。

祝你好运进入 Web 开发。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T22:35:05.630

对于学习 Javascript（和其他一些语言），我建议[Codeacademy](http://www.codecademy.com/#!/exercises/0)。

AJAX 只是一种使用 JavaScript 加载内容或动态更改的方式。

[jQuery](http://www.jquery.com)是最流行的 JavaScript 库，如果您已经了解 CSS 选择器，那么很容易掌握它，因为它们有一个非常有用的[api](http://api.jquery.com/)库。

关注诸如[Smashing Magazine](http://www.smashingmagazine.com/)和[CSS-Tricks](http://css-tricks.com/)之类的网络博客非常有用，因为它们提供了技巧和解决方案，并且通常会使网络行业令人兴奋。

编辑：

建立网站的标准起点是：

[HTML5 Boilerplate](http://html5boilerplate.com/) - 一个很棒的空白起始板，提供非常优化的蓝图，修复了许多已知的浏览器错误和提示。

[Twitter Bootstrap](http://twitter.github.com/bootstrap/) - 类似于 HTML5 样板，大多数人同时使用两者，这个引导程序是快速将网站组合在一起的好方法，并且可以选择使其具有[响应](http://en.wikipedia.org/wiki/Responsive_Web_Design)性。

这真的取决于你如何找到最好的学习方式，我个人喜欢通过视频教程学习所有基础知识，然后用我自己的项目推动自己，当我遇到困难时就进行研究。

我想说[TutsPlus](https://tutsplus.com/)有一些非常好的教程，特别是：
[30 天学习 jQuery](https://tutsplus.com/course/30-days-to-learn-jquery/)
[PHP Fundamentals](https://tutsplus.com/course/php-fundamentals/)
[一般来说他们的任何课程都是诚实的](https://tutsplus.com/courses/)

如果您喜欢多合一的解决方案 - [TeamTreehouse](https://teamtreehouse.com/)很棒。

# c++ - C++/CLI 中重复的析构函数调用和跟踪句柄

> ID：12240297
> 
> 赞同：16
> 
> 时间：2012-09-02T22:31:27.613
> 
> 标签：c++, garbage-collection, c++-cli

我正在使用 C++/CLI，使用 MSDN 文档和[ECMA 标准](http://www.ecma-international.org/publications/standards/Ecma-372.htm)，以及 Visual C++ Express 2010。令我印象深刻的是以下与 C++ 的不同：

> 对于 ref 类，必须编写终结器和析构函数，以便它们可以在尚未完全构造的对象上多次执行。

我编造了一个小例子：

```
#include <iostream>

ref struct Foo
{
    Foo()  { std::wcout << L"Foo()\n"; }
    ~Foo() { std::wcout << L"~Foo()\n"; this->!Foo(); }
    !Foo() { std::wcout << L"!Foo()\n"; }
};

int main()
{
    Foo ^ r;

    {
        Foo x;
        r = %x;
    }              // #1

    delete r;      // #2
} 
```

在 at 块的末尾`#1`，自动变量`x`消失，析构函数被调用（它反过来显式调用终结器，就像通常的习语一样）。这一切都很好。但是后来我通过引用再次删除了对象`r`！输出是这样的：

```
Foo()
~Foo()
!Foo()
~Foo()
!Foo() 
```

**问题：**

1.  `delete r`在线调用是未定义的行为，还是完全可以接受的`#2`？

2.  如果我们删除 line `#2`，`r`是否仍然是一个对象的跟踪句柄（在 C++ 的意义上）不再存在？它是一个“悬垂的把手”吗？它的引用计数是否意味着将尝试双重删除？

    我知道没有*实际*的双重删除，因为输出变成了这样：

    ```
    Foo()
    ~Foo()
    !Foo() 
    ```

    但是，我不确定这是否是一个愉快的事故或保证是明确定义的行为。

3.  在哪些其他情况下可以多次调用托管对象的*析构函数？*

4.  `x.~Foo();`在之前或之后立即插入可以`r = %x;`吗？

换句话说，托管对象是否“永远存在”并且可以一遍又一遍地调用它们的析构函数和终结函数？

* * *

为了响应@Hans 对非平凡类的需求，您还可以考虑这个版本（使用析构函数和终结器以符合多次调用要求）：

```
ref struct Foo
{
    Foo()
    : p(new int[10])
    , a(gcnew cli::array<int>(10))
    {
        std::wcout << L"Foo()\n";
    }

    ~Foo()
    {
        delete a;
        a = nullptr;

        std::wcout << L"~Foo()\n";
        this->!Foo();
    }

    !Foo()
    {
        delete [] p;
        p = nullptr;

        std::wcout << L"!Foo()\n";
    }

private:
    int             * p;
    cli::array<int> ^ a;
}; 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-09T15:56:52.390

我将尝试按顺序解决您提出的问题：

> 对于 ref 类，必须编写终结器和析构函数，以便它们可以在尚未完全构造的对象上多次执行。

析构函数`~Foo()`简单地自动生成两个方法，一个是 IDisposable::Dispose() 方法的实现，一个是受保护的 Foo::Dispose(bool) 方法，它实现了一次性模式。这些是普通方法，因此可能会被多次调用。在 C++/CLI 中允许直接调用终结器，`this->!Foo()`并且通常这样做，就像您所做的那样。垃圾收集器只调用一次终结器，它在内部跟踪是否完成。鉴于允许直接调用终结器并且允许多次调用 Dispose()，因此可以多次运行终结器代码。这是特定于 C++/CLI 的，其他托管语言不允许这样做。您可以轻松地阻止它，nullptr 检查通常可以完成工作。

> 在第 2 行调用 delete r 是未定义的行为，还是完全可以接受？

它不是 UB 并且完全可以接受。`delete`操作员只需调用 IDisposable::Dispose() 方法，从而运行您的析构函数。您在其中所做的，通常是调用非托管类的析构函数，很可能会调用 UB。

> 如果我们删除第 2 行，r 仍然是一个跟踪句柄是否重要

不。调用析构函数是完全可选的，没有一个好的方法来强制它。没有任何问题，终结器最终将始终运行。在给定的示例中，当 CLR 在关闭之前最后一次运行终结器线程时会发生这种情况。唯一的副作用是程序运行“繁重”，占用资源的时间超过了必要的时间。

> 在哪些其他情况下可以多次调用托管对象的析构函数？

这很常见，一个过分热心的 C# 程序员可能会多次调用您的 Dispose() 方法。同时提供 Close 和 Dispose 方法的类在框架中非常常见。有一些模式几乎是不可避免的，例如另一个类假定一个对象的所有权。标准示例是这段 C# 代码：

```
using (var fs = new FileStream(...))
using (var sw = new StreamWriter(fs)) {
    // Write file...
} 
```

StreamWriter 对象将获取其基本流的所有权，并在最后一个大括号处调用其 Dispose() 方法。FileStream 对象上的*using*语句第二次调用 Dispose()。编写此代码以使这种情况不会发生并且仍然提供异常保证太困难了。指定可以多次调用 Dispose() 可以解决问题。

> 插入 x.~Foo(); 可以吗？紧接在 r = %x; 之前或之后

没关系。结果不太可能令人愉快，NullReferenceException 将是最可能的结果。这是您应该测试的东西，引发 ObjectDisposedException 为程序员提供更好的诊断。所有标准 .NET 框架类都这样做。

> 换句话说，托管对象是否“永远存在”

不，当垃圾收集器无法再找到对该对象的任何引用时，它会声明该对象已死并收集它。这是一种安全的内存管理方式，没有办法意外引用已删除的对象。因为这样做需要一个引用，一个 GC 将始终看到的引用。循环引用等常见的内存管理问题也不是问题。

> 代码片段

删除`a`对象是不必要的并且没有任何效果。您只删除实现 IDisposable 的对象，数组不会这样做。通用规则是 .NET 类仅在管理内存以外的资源时才实现 IDisposable。或者，如果它具有本身实现 IDisposable 的类类型的字段。

在这种情况下是否应该实现析构函数也是值得怀疑的。您的示例类持有一个相当适中的非托管资源。通过实现析构函数，您可以将使用它的负担强加给客户端代码。这在很大程度上取决于类的使用情况，客户端程序员这样做的难易程度，如果对象被期望存活很长时间，超出方法体以致于*using*语句不可用，这绝对不是. 您可以让垃圾收集器知道它无法跟踪的内存消耗，调用 GC::AddMemoryPressure()。这也处理了客户端程序员根本不使用 Dispose() 的情况，因为它太难了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T21:14:58.727

标准 C++ 的指南仍然适用：

1.  调用`delete`一个自动变量，或者一个已经被清理的变量，仍然是一个坏主意。

2.  它是一个指向已处置对象的跟踪指针。取消引用是一个坏主意。使用垃圾收集，只要存在任何非弱引用，内存就会一直存在，因此您不会意外访问错误的对象，但您仍然不能以任何有用的方式使用这个已处置的对象，因为它的不变量可能不再持有。

3.  只有当您的代码以标准 C++ 中的 UB 的非常糟糕的风格编写时，托管对象才会发生多重破坏（参见上面的 1 和下面的 4）。

4.  在自动变量上显式调用析构函数，然后不在其位置创建新的析构函数以供自动析构调用查找，这仍然是一个坏主意。

通常，您认为对象生命周期与内存分配是分开的（就像标准 C++ 一样）。垃圾收集用于管理释放——因此内存仍然存在——但对象已死。与标准 C++ 不同，您不能将内存重新用于原始字节存储，因为 .NET 运行时的某些部分可能会假定元数据仍然有效。

垃圾收集器和“堆栈语义”（自动变量语法）都没有使用引用计数。

（丑陋的细节：处理一个对象不会破坏 .NET 运行时自身关于该对象的不变量，因此您甚至可能仍将其用作线程监视器。但这只会使设计难看难懂，所以请不要不。）

# c - 在 C 中将字节转换为 Int / uint

> ID：12240299
> 
> 赞同：20
> 
> 时间：2012-09-02T22:31:54.093
> 
> 标签：c, arrays, serialization, int, byte

我有一个无符号字符数组[248]；用字节填充。就像 2F AF FF 00 EB AB CD EF ..... 这个数组是我的字节流，我将来自 UART（RS232）的数据存储为缓冲区。

现在我想将字节转换回我的 uint16 和 int32。

在 C# 中，我使用了 BitConverter 类来执行此操作。例如：

```
byte[] Array = { 0A, AB, CD, 25 };
int myint1 = BitConverter.ToInt32(bytes, 0);
int myint2 = BitConverter.ToInt32(bytes, 4);
int myint3 = BitConverter.ToInt32(bytes, 8);
int myint4 = BitConverter.ToInt32(bytes, 12);
//...
enter code here
Console.WriteLine("int: {0}", myint1); //output Data... 
```

C中是否有类似的功能？（没有 .net ，我使用 KEIL 编译器，因为代码在微控制器上运行）

问候山姆

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-09-02T22:36:07.537

在 C 中没有标准函数可以为您执行此操作。您必须自己将字节组装回 16 位和 32 位整数。小心字节序！

这是一个简单的小端示例：

```
extern uint8_t *bytes;
uint32_t myInt1 = bytes[0] + (bytes[1] << 8) + (bytes[2] << 16) + (bytes[3] << 24); 
```

对于大端系统，它只是相反的顺序：

```
uint32_t myInt1 = (bytes[0] << 24) + (bytes[1] << 16) + (bytes[2] << 8) + bytes[3]; 
```

你也许可以逃脱：

```
uint32_t myInt1 = *(uint32_t *)bytes; 
```

如果您注意对齐问题。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-09-02T22:36:59.890

就在这里。假设您的字节位于：

```
uint8_t bytes[N] = { /* whatever */ }; 
```

我们知道，一个 16 位整数只是串联的两个 8 位整数，即一个整数是 256 的倍数，或者移位 8：

```
uint16_t sixteen[N/2];

for (i = 0; i < N; i += 2)
    sixteen[i/2] = bytes[i] | (uint16_t)bytes[i+1] << 8;
             // assuming you have read your bytes little-endian 
```

同样对于 32 位：

```
uint32_t thirty_two[N/4];

for (i = 0; i < N; i += 4)
    thirty_two[i/4] = bytes[i] | (uint32_t)bytes[i+1] << 8
        | (uint32_t)bytes[i+2] << 16 | (uint32_t)bytes[i+3] << 24;
             // same assumption 
```

* * *

如果字节是大端读取的，当然你可以颠倒顺序：

```
bytes[i+1] | (uint16_t)bytes[i] << 8 
```

和

```
bytes[i+3] | (uint32_t)bytes[i+2] << 8
    | (uint32_t)bytes[i+1] << 16 | (uint32_t)bytes[i] << 24 
```

请注意，存储整数中的字节序和运行架构的字节序之间存在差异。这个答案中提到的字节序是存储的整数，即 的内容`bytes`。解决方案独立于运行架构的[字节序，因为在 shift 时会处理字节序](https://stackoverflow.com/q/1041554/912144)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-07-03T08:47:45.110

在小端的情况下，你不能只使用 memcpy 吗？

```
memcpy((char*)&myint1, aesData.inputData[startindex], length); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-10T13:00:04.883

```
 char letter = 'A';
            size_t filter = letter;
            filter = (filter <<  8 | filter);
            filter = (filter << 16 | filter);
            filter = (filter << 32 | filter);
            printf("filter: %#I64x \n", filter); 
```

结果：“过滤器：0x4141414141414141”

# json - 在backbone.js 中查看模型绑定

> ID：12240313
> 
> 赞同：0
> 
> 时间：2012-09-02T22:34:20.633
> 
> 标签：json, web-services, backbone.js

这不是一个特定的基于代码的问题。我在这里寻找一些关于主干中的视图模型绑定的直觉。

想象一下，我有一个简单的人物模型，其属性为 id、First 和 Last name。然后我有一组从 JSON Web 服务返回的所述模型。我了解如何使用主干通过同步来检索和更新给定项目。我觉得草率的地方在于我对视图和模型的绑定——这是我需要一个好的解释和一些关于最佳实践的帮助的地方。

当我为人员列表创建视图时，我在 div 中显示每个人，其中 div 的类包含两个类名：一个名为“personclass”，另一个具有该人的 id。为“personclass”注册点击事件让我可以获取“其他”类——即 id——然后在散列中使用它来操作特定的人（该人的底层模型）。

我通过引用类名手动绑定视图模型感觉非常草率，我感觉我缺少关于骨干的一些基本知识。那里的示例质量各不相同，因此我将不胜感激这里有一个简洁明了的解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T23:07:57.987

这种方法不一定有错。例如，当您有一个内存受限的环境时，它会非常有用。

不过，另一种方法是为集合中的每个项目呈现一个新的 Backbone.View。然后每个视图实例都可以特别关注它正在显示的一个项目。您也不必担心将模型的 id 添加到呈现的 HTML 中。

不久前我写了一篇文章，解释了这两种情况，展示了如何完成每一种情况，并给出了它们的优缺点：

[http://lostechies.com/derickbailey/2011/10/11/backbone-js-getting-the-model-for-a-clicked-element/](http://lostechies.com/derickbailey/2011/10/11/backbone-js-getting-the-model-for-a-clicked-element/)

# android - 对 ArrayAdapter 进行排序 - 忽略大小写

> ID：12240318
> 
> 赞同：0
> 
> 时间：2012-09-02T22:34:57.673
> 
> 标签：android, sorting, android-arrayadapter, case-insensitive

我正在使用以下代码按字母顺序对 ArrayAdapter 进行排序：

```
adapter.sort(new Comparator<String>() {
    public int compare(String object1, String object2) {
        return object2.compareTo(object1);
    };
}); 
```

麻烦的是，它将所有大写条目排列在小写条目之前。

如何强制它忽略大小写？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T22:37:36.360

您可以使用[String.compareToIgnoreCase()](http://developer.android.com/reference/java/lang/String.html#compareToIgnoreCase%28java.lang.String%29)

```
return object2.compareToIgnoreCase(object1); 
```

或[String.toLowerCase()](http://developer.android.com/reference/java/lang/String.html#toLowerCase%28%29)方法：

```
return object2.toLowerCase().compareTo(object1.toLowerCase()); 
```

# r - R 在经过一定时间后结束重复语句

> ID：12240320
> 
> 赞同：2
> 
> 时间：2012-09-02T22:35:14.417
> 
> 标签：r, loops, time

我有一个可能需要很长时间的功能。

我想知道是否有一种更简洁的方法来停止该功能，而不是像这样：

```
repeat{

  time1 <- Sys.time()
  myfunction(x,y,z,...)
  time2 <- Sys.time()
  if(time2 - time1 > my.time.limit) {
   break
  }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-02T22:55:59.210

**R.utils**包中有一个`evalWithTimeout`函数。你可以像这样使用它：

 **```
require("R.utils")
evalWithTimeout({
  repeat{
    myfunction(x,y,z,...)
  }
}, timeout=my.time.limit, onTimeout="warning") 
```

运行`example(evalWithTimeout)`以查看其他使用方法。**

# javascript - 使用jquery根据数组对表行进行排序？

> ID：12240321
> 
> 赞同：4
> 
> 时间：2012-09-02T22:35:16.570
> 
> 标签：javascript, jquery, html-table

我有一个看起来像这样的表：

```
<table>
      <tr id="1">
          <td>bla</td>
      </tr>

      <tr id="2">
          <td>bla</td>
      </tr>

       <tr id="3">
          <td>bla</td>
      </tr>

      <tr id="4">
          <td>bla</td>
      </tr>
</table> 
```

我也得到了一个数组，我应该根据它对这个表的行进行排序，比如说数组类似于

数组= [3, 4, 1, 2];

任何提示或想法如何使用 jquery/javascript 重新排列行以匹配数组？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T22:44:27.467

按照您需要它们的顺序再次附加它们。当您调用`.append`并且元素已经可见时，它将从其当前位置删除。

```
var order = [3,2,1,4];

$.each(order, function(){
  $("table").append($("#" + this));
}) 
```

[http://jsfiddle.net/nZ6HJ/](http://jsfiddle.net/nZ6HJ/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T22:45:52.957

## *[jsBin 演示](http://jsbin.com/akiqex/1/edit)*

```
for(i=0; i<array.length; i++){
  $('#'+array[i]).appendTo('table');
} 
```

# php - 用户名和密码正确时无法登录

> ID：12240326
> 
> 赞同：2
> 
> 时间：2012-09-02T22:36:13.897
> 
> 标签：php, login, registration

您好，我正在 php 学院做这个教程，用于 php 和 mysql 登录和注册表单。一切顺利.. 他正在展示如何识别正确的表达方式，但要创建功能来回显错误.. 是的，听起来不错。因此，前几个错误正确回显，但实际验证 user_id 和 whatknot 的错误不起作用。即使我提交了正确的信息，它也会显示我在用户名和密码组合不正确时创建的错误。我创建了一些虚拟用户，但没有一个可以通过。

这是我的代码..

```
include 'core/init.php';
include 'includes/overall/header.php';

if (empty($_POST) === false) {
$username = $_POST['username'];
$password = $_POST['password'];

if (empty($username) === true || empty($password) === true) {
$errors[] = 'Uh oh! You forgot to enter your username and password';

} else if (user_exists($username) === false) {
$errors[] = 'Who is that? Have you registered?';

} else if (user_active($username) === false) {
$errors[] = 'Account is not activated.';

} else {

$login = login($username, $password);
if ($login === false) {
$errors[] = 'That username and password combination is incorrect';

} else {
    $_SESSION['user_id'] = $login;
    header('Location:index.php');
    exit();
    }
}
print_r($errors);
}

include 'includes/overall/footer.php'; 
```

和

```
function logged_in() {
return (isset($_SESSION['user_id'])) ? true : false;
}

function user_exists($username) {
$username = sanitize($username);
$query = mysql_query("SELECT COUNT(`user_id`) FROM `users` WHERE `username` = '$username'");
return (mysql_result($query, 0) == 1) ? true : false;
}

function user_active($username) {
$username = sanitize($username);
$query = mysql_query("SELECT COUNT(`user_id`) FROM `users` WHERE `username` = '$username' AND `active` = 1");
return  (mysql_result($query, 0) == 1) ? true : false;
}

function user_id_from_username($username) {
$username = sanitize($username);
return mysql_result(mysql_query("SELECT `user_id` FROM `users` WHERE `username` = '$username'"), 0, 'user_id');
}

function login($username, $password) {
$user_id = user_id_from_username($username);

$username = sanitize($username);
$password = md5($password);

$query = mysql_query("SELECT COUNT(`user_id`) FROM `users` WHERE `username` = '$username' AND `password` = '$password'");
return (mysql_result($query, 0) == 1) ? $user_id : false;
} 
```

有谁知道我做错了什么？我已经尝试了一些东西，但没有任何效果。例如，在视频中，他的做法有点不同，并将他的查询排成一行，但这给了我错误，所以我按照他最初的方式做了，并制作了查询变量（我只知道我是什么实际上是在说哈哈）..但这解决了错误。我尝试对其他功能（未显示）这样做，但这导致了很多错误:(

这真的很愚蠢吗？之前我也遇到过类似的问题，后来我发现是因为缺少分号，但我盯着这个愚蠢的代码看了这么久，什么也没找到。我重新观看了教程系列中解释所有内容的视频这就像每个 10 次.. 我的眼睛感觉他们要流血或爆炸。一些评论表明其他人也有类似的问题..帮助？

我对所有这些 php mysql 东西都很陌生，所以.. 如果你像孩子一样对我说话，我不会被冒犯.. 事实上它很感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-09T07:38:48.487

这是我的代码：

```
function user_exists($username) {
  $username = sanitize($username); 
  return (mysql_result(mysql_query("SELECT * FROM `users` WHERE `username` = '$username' "),0) ==1) ? true : false; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T00:03:07.583

我是否正确理解您现在无法登录？

我过去也遇到过类似的问题。我没有看到你的错误，但我会分享一种让我发现错误的方法。

1.  将 MySQL 查询作为字符串和从表单输入的数据存储在变量中
2.  回显该变量
3.  在 phpMyAdmin 中测试输出的字符串 - 如果查询错误，它会提示您它有什么问题。

此外，使用“LIKE”而不是“=”来测试查询可能是值得的

例如。

```
.....FROM `users` WHERE `username` LIKE '$username'..... 
```

# c++ - 带有 C++ 的 iPhone 上的 OpenGL ES？

> ID：12240327
> 
> 赞同：5
> 
> 时间：2012-09-02T22:36:24.277
> 
> 标签：c++, ios, opengl-es

我正在尝试在 iPhone 上运行一些有效的 C++ OpenGL 代码。到目前为止，我设法在 iPhone 上运行了一个 Objective-C/OpenGL ES 示例，以及一些 Objective-C->plain C++ 文件（“hello world”输出到控制台）。

但我不能使用任何 C++ OpenGL 代码。确切的问题是在 C++ 文件中包含 OpenGL 库：

如果我使用 Objective-C 的导入：

```
#import <UIKit/UIKit.h>
#import <GLKit/GLKit.h> 
```

它会说所有 gl* 调用“使用未声明的标识符 'gl*'”。

如果我使用仅在 C++ 中使用的导入：

```
#include <OpenGL/OpenGL.h>
#include <GLUT/glut.h> 
```

它说未找到 OpenGL/OpenGL.h 文件（这是我所预料的，因为 OpenGL 是完整的 OpenGL 库，而不是 OpenGL ES）。

那么如何使用这个 C++ 文件呢？

已经搜索：

[http://www.hackint0sh.org/iphone-developer-exchange-9/iphone-sdk-can-i-use-c-opengl-38638.htm](http://www.hackint0sh.org/iphone-developer-exchange-9/iphone-sdk-can-i-use-c-opengl-38638.htm)

[iPhone - OpenGL 使用 C++ 教程/片段](https://stackoverflow.com/questions/2451548/iphone-opengl-using-c-tutorial-snippet)

[https://developer.apple.com/library/ios/#documentation/3DDrawing/Conceptual/OpenGLES_ProgrammingGuide/WorkingwithEAGLContexts/WorkingwithEAGLContexts.html#//apple_ref/doc/uid/TP40008793-CH103-SW1](https://developer.apple.com/library/ios/#documentation/3DDrawing/Conceptual/OpenGLES_ProgrammingGuide/WorkingwithEAGLContexts/WorkingwithEAGLContexts.html#//apple_ref/doc/uid/TP40008793-CH103-SW1)

但我没有找到如何使用 C++ 文件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-02T22:54:24.873

尝试：-

```
#include <OpenGLES/AEGL.h> 
```

# ruby - 如何使用array#each将数组的元素相乘？

> ID：12240340
> 
> 赞同：4
> 
> 时间：2012-09-02T22:39:57.560
> 
> 标签：ruby, arrays

我正在尝试编写一个方法，该方法将整数数组作为输入并返回它们的乘积。例如：

```
product([1,2,3])    # returns 6 
```

我需要使用`Array#each`而不是注入方法来执行此操作。这是我想出的，但似乎不正确：

```
def product(array)
  final = 0.0
  array.each do |i|
    final *= i
  end
  return final
end 
```

另外，我怎么能修改这个方法来返回数组中所有奇数的乘积，这样

```
product([1,2,3])     # returns 3, because 2 is even

product([0,-1,-10])  # returns -1, because 0 and -10 are even 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-02T22:43:40.710

正如 Ramon 所说，只需将 final 初始化为 1.0：

```
def product(array)
  final = 1.0
  array.each { |i| final *= i }
  final
end 
```

但是，在惯用的 Ruby 中：

```
[1, 2, 3].inject(:*) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-03-17T16:54:04.883

```
def find_product(x)
  return x.inject(&:*)
end

x = [5, 6, 7, 10, 15, 18, 32]

find_product(x) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-16T14:31:04.573

```
arr = [1,2,3,4,5] 
```

**第一的**

```
for i in arr
 a=i
  for j in arr
   a *=j
  end
 p a
end 
```

**第二**

```
for i in arr
  p product = arr.inject(i , :*)
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-02T22:43:56.933

```
def product(array)
  final = 1.0
  array.each do |i|
    final *= i
  end
  final
end 
```

# php - Facebook Like 按钮突然停止工作

> ID：12240348
> 
> 赞同：0
> 
> 时间：2012-09-02T22:41:59.117
> 
> 标签：php, facebook, facebook-like, facebook-opengraph

我的报价混搭花哨的 OpenGraph Facebook 按钮突然决定停止工作。现在它说我提供了一个无效的网址。url 基本上是 quote?q=123 ，其中 123 是当前显示的报价。它们通常是在有人到达页面时随机生成的。

一切都很好，现在似乎暗示我不能拥有这样的 URL，我必须对它们进行编码吗？或者我有 OpenGraph 需要错误或在错误位置的元标记。奇怪的是它突然开始工作了，即使是[来自 Facebook](https://developers.facebook.com/docs/opengraphprotocol/)的示例也显示了错误：

无效的 URL 请求的 URL “/plugins/like.php?

脸书坏了吗？

我使用了他们提供的一些开发工具来获取更多信息，这似乎让我更加困惑，因为我的元标签位于 head 标签内。

[来自 Facebook 的调试信息](https://developers.facebook.com/tools/debug/og/object?q=%3Cdiv%20class=%22fb-like%22%20data-href=%22http://www.muschamp.ca/Muskie/favouriteQuotationsMashup.php?q=216%22%20data-send=%22true%22%20data-width=%22500%22%20data-show-faces=%22false%22%3E%3C/div%3E)

想法，只是等着看Facebook是否会自我修复？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T17:57:54.627

母舰一定有问题，因为一天后或需要几个小时，我的网页（应用程序）带有最精美的“喜欢”按钮再次按预期工作。

[报价混搭](http://www.muschamp.ca/Muskie/favouriteQuotationsMashup.php)

# html - 在不可预测的背景上具有折叠角和框阴影的框

> ID：12240350
> 
> 赞同：1
> 
> 时间：2012-09-02T22:42:03.847
> 
> 标签：html, css

我正在尝试做这样的事情：

![在此处输入图像描述](../Images/7c4359adcae04822a236856025aaed5b.png)

盒子有阴影，角落的背景必须是透明的，因为它们在图像上（不可预测的背景）。

在谷歌搜索后，我找到了使用伪选择器的解决方案`:before`以及`:after`使用额外标记的解决方案，但它们都使用固定的颜色背景。这些是我的结果：

![在此处输入图像描述](../Images/37859072948587a8ce27ebed5a39a060.png)

我正在尝试使用盒子阴影和角落的小图像，而不是大的完整背景。

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T22:48:22.987

使用两个伪元素，一个用于上框，另一个用于白色三角形：

```
h1 {
    background: #F0B032;
    box-shadow: 1px 1px 4px #362708;
    line-height: 30px;
    position: relative;
}
h1:before, h1:after {
    content: '';
    position: absolute;
    left: 100%;
}
​h1:before {
    background: #F0B032;
    box-shadow: 1px 1px 2px #362708;
    width: 15px;
    height: 16px;
    top: 0;
}
h1:after {
    border: 7px solid transparent;
    border-left-color: #fff;
    border-top-color: #fff;
    bottom: 0;
} 
```

这是小提琴：http: [//jsfiddle.net/Kjp6v/](http://jsfiddle.net/Kjp6v/)

* * *

这不会在折叠下添加阴影，但看起来足够逼真。

# c# - 验证分离的签名（*.p7s 文件）和 X509Certificate2

> ID：12240355
> 
> 赞同：5
> 
> 时间：2012-09-02T22:42:57.313
> 
> 标签：c#, cryptography, digital-signature

我在我的方法中收到一个 XML 文档作为字符串参数。XML 文档是：   

```
<Document>
    <ZipContainer> Zip_File_In_Base64 </ZipContainer>
    <X509Certificate> Certificate_In_Base64 </X509Certificate>
</Document> 
```

从这个字符串中，我提取 base64 格式的 ZIP 文件和 base64 格式的 X509Certificate2 证书。ZIP 文件包含：

*   将 ZIP 文件的内容描述为 XML 的文件（文件`packageDescription.xml`）；

*   包含传输文件内容的文件（例如`*.doc`文件）；

*   具有分离数字签名内容的文件（`*.p7s`文件 - 分离数字签名）；

应从存档中提取签名文件的签名（分离的数字签名可能不止一个）。分离的数字签名存储在带有`.p7s`扩展名的文件中。必须完成每个签名以检查其与用户登录到门户的数字签名的协议。

必须包括两个步骤：

1.  参见方法`certificateValidator()`（参见下面的这个方法）：这是一个分离的签名，包含在`.p7s`与它们对应的文件被签名的文件中，这些 *. P7s 文件。
    例如：一对相关文件：`ZayavUL_3594c921f545406d9b8734bbe28bf894.doc_1.p7s`和
    `ZayavUL_3594c921f545406d9b8734bbe28bf894.doc`.

2.  请参阅方法：这将使用从 XML 文档输入字符串中提取的证书`certificateValidator()`验证来自文件的证书。`.p7s`

## 问题

1.  该方法`signatureValidator`（请参阅下面的此方法）当前未使用文件的分离签名`.p7s`。我确实尝试过，但没有成功。如何正确验证`.p7s`其对应文件的文件分离签名？

2.  在方法`certificateValidator`中（请参阅下面的此方法）如何验证从`.p7s`文件中提取的证书的一致性，以及从 Base64 格式的输入字符串中提取的证书？

3.  代码行`foreach (X509Certificate2 x509 in signCms.Certificates) { }`---> Certificates Collection 始终为空。为什么？

## 输入参数

*   `Dictionary <string, byte[]> dictP7SFiles`（key - 文件名 *.p7s，value - 字节数组，代表 *.p7s 文件）

*   `Dictionary <string, byte[]> dictNotP7SFiles`（key - 使用 *.p7s 文件中的分离签名签名的文件的名称，value - 字节数组，代表文件）

*   `X509Certificate2 userCertX509`- 证书对象，从输入 xml 文档中提取（格式为 Base64）

## 代码

下面是验证步骤的测试实现（见上面这两个步骤）：

```
private bool certificateValidator(Dictionary<string, byte[]> dictP7SFiles, 
    Dictionary<string, byte[]> dictNotP7SFiles, X509Certificate2 userCertX509)
{
  bool isValid = false;           
  try
  {               
    foreach (KeyValuePair<string, byte[]> pair in dictP7SFiles)
    {
      ContentInfo contentInfo = new ContentInfo(pair.Value);
      SignedCms signCms = new SignedCms(contentInfo, true);                   

      if (signCms.Certificates.Count != 0)
      {
        //Certificates Collection always is empty. Why?
        foreach (X509Certificate2 x509 in signCms.Certificates)
        {
          if ((x509.SerialNumber != userCertX509.SerialNumber) 
              || (x509.Thumbprint != userCertX509.Thumbprint))
          {
            isValid = false;
            return isValid;
          }
        }

        isValid = true;
        return isValid;
      }
    }
  }
  catch (Exception ex)  
  {
    //here process exception code
  }           

  return isValid;
}

private bool signatureValidator(Dictionary<string, byte[]> dictP7SFiles, 
    Dictionary<string, byte[]> dictNotP7SFiles, X509Certificate2 userCertX509)
{
  bool isValid = false;
  try
  {              
    byte[] data = dictP7SFiles["ZayavUL_3594c921f545406d9b8734bbe28bf894.doc"];
    byte[] publicKey;
    byte[] signature;
    object hasher = SHA1.Create(); // Our chosen hashing algorithm.
    // Generate a new key pair, then sign the data with it:
    using (var publicPrivate = new RSACryptoServiceProvider())
    {
      signature = publicPrivate.SignData(data, hasher);
      publicKey = publicPrivate.ExportCspBlob(false); // get public key
    }
    // Create a fresh RSA using just the public key, then test the signature.
    using (var publicOnly = new RSACryptoServiceProvider())
    {
      publicOnly.ImportCspBlob(publicKey);

      isValid = publicOnly.VerifyData(data, hasher, signature); // Return True

      //isValid = ByteArrayCompare(dictP7SStreams["ZayavUL_3594c921f545406d9b8734bbe28bf894.doc_1.p7s"], signature);

      byte[] p7sDetachedSignature = File.ReadAllBytes(@"D:\ZayavUL_3594c921f545406d9b8734bbe28bf894.doc_1.p7s");
      isValid = ByteArrayCompare(p7sDetachedSignature, signature);
    }                
  }
  catch (Exception)
  {
    //here process exception code
  }

  return isValid;    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-02T09:42:29.127

您做错的主要事情是*重新生成*CMS 和签名。您应该*解析*CMS 消息，然后在验证期间指示外部内容。

> 1.  如何正确验证其对应文件的 .p7s 文件的分离签名？

在 SO 上查看[以下 Java 代码](https://stackoverflow.com/q/8243566/589259)，了解如何验证签名；C# 应该使用相同的架构，因此应该类似地工作。

> 2.  在方法certificateValidator（请参阅下面的此方法）中，如何验证从.p7s 文件中提取的证书与从Base64 格式的输入字符串中提取的证书的一致性？

解码base 64证书并进行证书的链式验证和验证。您想要执行多少验证（例如检查*生效日期*）取决于您。

> 3.  foreach 的代码行（signCms.Certificates 中的 X509Certificate2 x509）{ } ---> 证书集合始终为空。为什么？

在构建新的 CMS 结构时，您根本没有放入其中。

* * *

您当然也不应该重新生成签名。通常在验证期间您不会拥有私钥，并且该算法可能与 CMS 文档中使用的算法不匹配。此外，即使可以，签名生成也不总是确定性的（您可能会得到不同的签名值）。

# c - 从c中的IP地址控件中检索文本

> ID：12240363
> 
> 赞同：0
> 
> 时间：2012-09-02T22:44:06.837
> 
> 标签：c, winapi, ip-address

```
 SendMessage(hIpControl, IPM_GETADDRESS, 0, (LPARAM)lpIPAddress);
    TextOut(hdc, 10, 10, (LPCWSTR)lpIPAddress , 20);
//where static LPDWORD lpIPAddress = (LPDWORD)malloc(sizeof(LPDWORD)); 
```

hIpControl 是 IP 控件的句柄。当我运行它时，Text Out 只显示随机的中文符号和东西。如何安全地检索 IP 地址并将其存储在字符串中。我需要将它放在一个字符串中，例如：“192.168.1.4”才能让我的应用程序正常工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T23:15:57.310

`IPM_GETADDRESS`返回地址为 a `DWORD`，而不是字符串。

```
DWORD dwAddr;
int iCount = (int)SendMessage(hwndCtl, IPM_GETADDRESS, 0, (LPARAM)&dwAddr);
wchar_t wchAddr[20];
StringCchPrintf(wchAddr, _countof(wchAddr), L"%ld.%ld.%ld.%ld",
    FIRST_IPADDRESS(dwAddr),
    SECOND_IPADDRESS(dwAddr),
    THIRD_IPADDRESS(dwAddr),
    FOURTH_IPADDRESS(dwAddr)); 
```

请注意，用户输入的四边形可能少于所有四个（`iCount`在上面的示例中包含返回的四边形的数量），因此您需要在现实生活中考虑这一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-02T23:19:50.713

这将使您将所有 4 个字段转换为字符串。

```
DWORD lpIPAddress;

LRESULT SM = SendMessage(hWndIPAddress, IPM_GETADDRESS, 0, (LPARAM)(LPDWORD)&lpIPAddress);

BYTE IPPart1 = FIRST_IPADDRESS((LPARAM)lpIPAddress);
BYTE IPPart2 = SECOND_IPADDRESS((LPARAM)lpIPAddress);
BYTE IPPart3 = THIRD_IPADDRESS((LPARAM)lpIPAddress);
BYTE IPPart4 = FOURTH_IPADDRESS((LPARAM)lpIPAddress);

AnsiString ip = AnsiString(IPPart1) + AnsiString(".") +
                AnsiString(IPPart2) + AnsiString(".") +
                AnsiString(IPPart3) + AnsiString(".") +
                AnsiString(IPPart4);

ShowMessage("IP Address " + ip); 
```

参考：[http ://www.functionx.com/cppbuilder/controls/ipaddress.htm](http://www.functionx.com/cppbuilder/controls/ipaddress.htm)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-02T23:31:49.330

```
DWORD IPAddress;
SendMessage(hIpControl, IPM_GETADDRESS, 0, (LPARAM)&IPAddress);
WCHAR Buff[500];
sprintf(Buff, "%d.%d.%d.%d", (int)FIRST_IPADDRESS(IPAddress), (int)SECOND_IPADDRESS(IPAddress), (int)THIRD_IPADDRESS(IPAddress), (int)FOURTH_IPADDRESS(IPAddress));
TextOut(hdc, 10, 10, Buff , 20); 
```

或者，也许您必须将 FIRST 的 oder 更改为 FOURTH - 不确切知道:-) 请参见此处：http: [//msdn.microsoft.com/en-us/library/windows/desktop/bb761378%28v=vs.85% 29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb761378%28v=vs.85%29.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-24T15:08:12.793

这是一个应该可以正常工作的简单函数（就像它对我所做的那样）：

```
void getIpAddress(HWND hDlg)
{
    int len = GetWindowTextLength(GetDlgItem(hDlg, IDC_IPADDRESS_INPUT));
    if (len > 0)
    {
        char *buffer;
        buffer = (char*)GlobalAlloc(GPTR, len + 1);
        GetDlgItemTextA(hDlg, IDC_IPADDRESS_INPUT, buffer, len + 1);
        MessageBoxA(0, buffer, "Ip Address", MB_OK);
    }
    else
    {
        // Error handling here
    }
} 
```

# c# - Windows Store Project - 尝试从 VS2012 中的 C# 文件运行 cmd 命令时出现程序集引用错误

> ID：12240364
> 
> 赞同：0
> 
> 时间：2012-09-02T22:44:22.503
> 
> 标签：c#, command, cmd, visual-studio-2012

我在 VS 2012 的试用版中使用 C# 做一些练习。我想从 CS 文件执行 cmd 命令。为此，我尝试了 Process.Start 以及这些帖子中提到的 System.Diagnostics.Process：

[运行命令提示符命令](https://stackoverflow.com/questions/1469764/run-command-prompt-commands)

[从代码执行 CMD 命令](https://stackoverflow.com/questions/1255909/execute-cmd-command-from-code)

但是，尽管我添加了“使用 System.Diagnostics”和“使用 System.ComponentModel”，但我仍然收到“名称空间 'System.Diagnostics' 中不存在类型或名称空间名称 'Process'，缺少程序集引用”错误. ¿ 有什么建议可以让我摆脱这个错误吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T22:56:48.563

这通常发生在您拥有 Target framework = .NET Framework Client Profile，但您引用的 DLL 来自 .NET Framework（完整）时。确保您在来自有效框架的引用中有 System.dll。

我只是做了同样的事情 - 使用以下代码创建了空的控制台应用程序：

```
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.ComponentModel;
using System.Linq;
using System.Text;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            var prc = Process.Start("explorer.exe");
        }
    }
} 
```

对我来说非常好。

另外要检查的是 Intellisense - 当您开始输入“System.Diagnostics.Proc”时... - 它是否显示带有“Process”的下拉菜单？

**更新：** Windows 商店项目基于不同版本的目标 .NET Framework - **.NET for Windows Store 应用程序**，不支持您需要的功能。

有关更多详细信息，请进行网络搜索：“.NET for Windows Store apps”。有用的网址：

[http://msdn.microsoft.com/en-us/library/windows/apps/br230302.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/br230302.aspx)

[http://msdn.microsoft.com/en-us/library/windows/apps/br230232.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/br230232.aspx)

# generics - C#中的协变/逆变

> ID：12240365
> 
> 赞同：0
> 
> 时间：2012-09-02T22:44:24.920
> 
> 标签：generics, interface, covariance, contravariance

我有以下代码：

```
public interface IParameter
{ 
   ParameterName Name { get; set; }
}

public interface IParameter<T> : IParameter
{
    T Value  { get; set; }
    T LLimit { get; }
    T RLimit { get; }
}

public class IntegerParameter : IParameter<int>
{
    public ParameterName Name { get; set; }

    public int Value  { get; set; }
    public int LLimit { get; private set; }
    public int RLimit { get; private set;}

    public IntegerParameter(ParameterName name, int value, int llimit, int rlimit)
    {
        Name   = name;
        Value  = value;
        LLimit = llimit;
        RLimit = rlimit;
    }
}

public class DoubleParameter : IParameter<double>
{
    public ParameterName Name { get; set; }

    public double Value  { get; set; }
    public double LLimit { get; private set; }
    public double RLimit { get; private set; }

    public DoubleParameter(ParameterName name, double value, double llimit, double rlimit)
    {
        Name   = name;
        Value  = value;
        LLimit = llimit;
        RLimit = rlimit;
    }
}

// ... 
```

该代码是我正在整理的物理项目的一部分。现在这是我的问题。我希望能够根据 ParameterName 在字典中添加参数，但仍然能够调用 Value。

```
var A   = new IntegerParameter(ParameterName.X1, 10, 0, 100);
var B   = new DoubleParameter(ParameterName.X2, 56.4, 0, 78.6);
var set = new Dictionary<ParameterName,IParameter>();     

set.Add(A.Name, A);
set.Add(B.Name, B);

set[A.Name].Value; // I cannot do it since the Value is expressed only in the IParameter<T> part 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T10:01:30.123

如果不改变你的架构，（顺便说一下，这应该是一个抽象的基类）你不能在同一个列表中混合 int 和 doubles 并希望得到一个 int 或 double。

你可以**使用反射**，或者

你可以这样加点（我认为这是一个非常糟糕的设计，但这只是为了示例），在`IParameter`界面中添加更多信息

带有基础抽象类

```
public interface IParameter
    {
        ParameterName Name { get; set; }
        object GetValue();
        Type Type { get; }
    }

public interface IParameter<T> : IParameter where T : IConvertible
{
    T Value { get; set; }
    T LLimit { get; }
    T RLimit { get; }
}
public abstract class BaseParameter<T> : IParameter<T> where T : IConvertible
{
    protected BaseParameter(ParameterName name, T value, T llimit, T rlimit)
    {
        Name = name;
        Value = value;
        LLimit = llimit;
        RLimit = rlimit;
    }
    public ParameterName Name { get; set; }
    public object GetValue(){return Value;}
    public Type Type{get { return typeof(T); }}
    public T Value { get; set; }
    public T LLimit { get; private set; }
    public T RLimit { get; private set; }
}

public class IntegerParameter : BaseParameter<int>
{
    public IntegerParameter(ParameterName name, int value, int llimit, int rlimit)
        : base(name, value, llimit, rlimit)
    {
    }
}

public class DoubleParameter : BaseParameter<double>
{
    public DoubleParameter(ParameterName name, double value, double llimit, double rlimit)
        : base(name, value, llimit, rlimit)
    {
    }
} 
```

用法 ：

```
var a = new IntegerParameter(ParameterName.X1, 10, 0, 100);
var b = new DoubleParameter(ParameterName.X2, 56.4, 0, 78.6);
var set = new Dictionary<ParameterName, IParameter>();

set.Add(a.Name, a);
set.Add(b.Name, b);

//ouch, ugly, isn't it ?
var test = Convert.ChangeType(set[a.Name].GetValue(), set[a.Name].Type);
var k = test.GetType();//I'm an int
test = Convert.ChangeType(set[b.Name].GetValue(), set[b.Name].Type);
k = test.GetType();//I'm a double 
```

# sql - SQL - 更新记录并保留更改的审计跟踪

> ID：12240367
> 
> 赞同：1
> 
> 时间：2012-09-02T22:44:27.637
> 
> 标签：sql, sql-server, temp-tables, updates

我有一个表，其中 2 列将根据其他几个表中记录的存在进行更新。此外，需要为此目的使用临时表。并且，最后需要对更改进行审计跟踪。我在正确的道路上吗？

我尝试了以下方法：

```
SELECT t1.ref_no, t1.closr_date, t1.ext_key INTO #temp100

FROM [dbo].[Table1] t1
WHERE 
 ( t1.[CLOSR_DATE] IS NULL ) 
```

.....以及在同一张表中要满足的其他一些条件

```
SELECT ref_no INTO #temp200

FROM  [dbo].[Table2] t2

INNER JOIN [dbo].[Table3] t3
ON t3.[RFVAL_NO] = t2.[SCT_NO] )        
WHERE (( t2.[START_DTTM] > GETDATE() OR t2.[START_DTTM] IS NULL ) )
        UNION ALL
SELECT ref_no FROM  [dbo].[Table3] t4
WHERE ( [A_DTTM] > GETDATE() OR [A_DTTM] IS NULL )
        UNION ALL
SELECT ref_no FROM  [dbo].[Table5] t5
WHERE ( [AS_DTTM] > GETDATE() OR [AS_DTTM] IS NULL ) 
```

.....等等

/ *****删除#temp100 中的所有记录（匹配#temp200 中的条目）* **** /

```
DELETE FROM #temp100 WHERE EXISTS (SELECT NULL FROM #temp200 WHERE #temp200.ref_refno = #temp100.ref_refno);
PRINT 'Records from table t1 (that match records in table #temp100 have been deleted!)' 
```

/ *****更新 [dbo].[Table1] 中保留在表 #t100 中的记录 ** *** /

```
UPDATE [dbo].[Table1] t1 
SET [dbo].[t1].[CLOSR_DATE] = CAST('01-JAN-2011' AS DATE), [dbo].[t1].[EXT_KEY] = 'some string' 
WHERE [dbo].[t1].[CLOSR_DATE] IN ( SELECT ref_no FROM #temp100 INNER JOIN [dbo].[Table1] t1 ON #temp100.ref_no = t1.[REF_NO] )
PRINT 'Records in table Table1 have been updated!' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T07:24:33.917

您应该为此任务使用触发器，它将为您节省大量编码。试试这个[将简单的基于触发器的审核添加到您的 SQL Server 数据库](http://weblogs.asp.net/jgalloway/archive/2008/01/27/adding-simple-trigger-based-auditing-to-your-sql-server-database.aspx)

# linux - 如何在命令行中接受jdk的许可协议？

> ID：12240369
> 
> 赞同：7
> 
> 时间：2012-09-02T22:44:51.160
> 
> 标签：linux, amazon-ec2, wget, java-7

我尝试将 jdk7 (Linux x64 rpm) 安装到我的 Amazon EC2 实例上。我使用 wget 和 curl -o 这样做，但它没有成功下载。相反，它下载了一个错误的 html 文件，其中告诉它在下载之前接受许可协议。我使用此链接[http://www.oracle.com/technetwork/java/javase/downloads/jdk7u7-downloads-1836413.html](http://www.oracle.com/technetwork/java/javase/downloads/jdk7u7-downloads-1836413.html)接受协议，然后我右键单击包并复制链接并尝试通过下载命令行，但它不起作用。我将它下载到我的本地机器并使用 scp 将它移动到我在 EC2 中的本地目录。但是当我尝试执行它时，它抛出了这些错误：

```
sudo rpm -i jdk-7u7-linux-x64.rpm
Unpacking JAR files...
rt.jar...
Error: Could not open input file: /usr/java/jdk1.7.0_07/jre/lib/rt.pack
jsse.jar...
Error: Could not open input file: /usr/java/jdk1.7.0_07/jre/lib/jsse.pack
charsets.jar...
Error: Could not open input file: /usr/java/jdk1.7.0_07/jre/lib/charsets.pack
tools.jar...
Error: Could not open input file: /usr/java/jdk1.7.0_07/lib/tools.pack
localedata.jar...
Error: Could not open input file: /usr/java/jdk1.7.0_07/jre/lib/ext/localedata.pack 
```

我搜索了一个解决方案并找到了这个链接：[http ://docs.oracle.com/javase/7/docs/webnotes/install/linux/linux-jdk.html](http://docs.oracle.com/javase/7/docs/webnotes/install/linux/linux-jdk.html)

即使它说：“1.下载文件。在下载文件之前，您必须接受许可协议。” 有没有办法通过命令行接受许可证？

谢谢！

我不认为这个问题是由接受许可协议（即只是下载）的问题引起的，我认为这与一个有问题的 rpm 包有关。发布这个 rpm -i install，java 工作吗？你能导航到 /usr/java/jdk1.7.0_07/jre/bin 并运行 java 吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-03-16T18:28:12.503

对我来说，它的工作如下

```
wget --no-check-certificate --no-cookies --header "Cookie: oraclelicense=accept-securebackup-cookie;" http://download.oracle.com/otn-pub/java/jdk/8u40-b26/jdk-8u40-linux-x64.rpm 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-05T20:36:59.447

不是您，而是 Oracle 站点。他们改变了许可策略。

阅读这篇[博文](http://blog.kdecherf.com/2012/04/12/oracle-i-download-your-jdk-by-eating-magic-cookies/)了解更多信息，以及一些关于自动化的提示。

帖子底部有一个有趣的花絮：

> 根据 Java SE 的 OTN BCL 文档：
> 
> 通过选择“接受许可协议”（或等效的）按钮 **和/或通过使用该软件，**您承认您已阅读并同意这些条款。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-15T13:55:47.893

有一个简单的方法：

```
wget --no-check-certificate --no-cookies --header "Cookie: gpw_e24=yippi ka yei madafaka;" http://download.oracle.com/blahblah.... 
```

你可以发送任何你想要的作为“gpw_e24”的cookie值

PD：请原谅我糟糕的英语，尽力而为；-)

# sml - 在函数中列出数字 1 到 n - SML

> ID：12240371
> 
> 赞同：2
> 
> 时间：2012-09-02T22:45:14.923
> 
> 标签：sml, ml

我需要在 sml 中创建一个函数，该函数接受一个数字并返回其下方所有素数的列表。我可以这样做，但我不知道如何创建一个列表，所以我可以用来查看 1 是否是素数，然后是 2，然后是 3，然后是 4，然后是 5，依此类推。

基本上我需要一种在 SML 函数内生成列表的方法，并且该列表的数字从 2 到 n。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T22:54:15.640

List.tabulate函数将为您填充一个列表[。](http://www.standardml.org/Basis/list.html#SIG%3aLIST.tabulate%3aVAL)这是一个例子，给你数字`[2..n]`：

```
List.tabulate(n-1, fn x => x+2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T22:22:12.700

我发现我们不能为此使用外部库，所以我实际上能够提出自己的解决方案。它的数字从`start`到最多，但不包括，`ending`

```
fun createList(start:int, ending:int) = if(start = ending) then
                       []
                    else
                       start::createList(start + 1, ending); 
```

# xml - 设计一个数据结构来比较两个 XML 文档

> ID：12240373
> 
> 赞同：1
> 
> 时间：2012-09-02T22:45:58.027
> 
> 标签：xml, algorithm, data-structures, recursion, tree

给定两个 XML 文档。想出一个数据结构和代码来比较两个文档并打印文档之间的差异。（就像标签存在于一个而不是另一个或标签相同但数据可能不同等）

`My approach`: 使用 N 叉树。N 取决于 XML 文件中的属性数量。Now 函数将类似于：

```
Bool IsIdentical(tree1,tree2)
{
   if(tree1 == NULL && tree2 == NULL)return true;
   if(tree1 || tree2) return false;
    if(tree1->data == tree2->data )return true;
   else return (Isindentical(tree1->firstchild,tree2->firstchild) &&  Isindentical(tree1->secondchild,tree2->secondchild) && ........ Isindentical(tree1->nthchild,tree2->nthchild) )

} 
```

你能告诉我的方法是正确的还是有其他数据结构可以比较？如果我的方法是正确的，那么请告诉我如何产生差异。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T22:49:23.733

你的方法是合理的。不需要将两个 xml 文档同时保存在内存中的另一种方法是为每个文档构建[Merkle 树并比较它们。](http://en.wikipedia.org/wiki/Hash_tree)

比较差异是一个更开放的问题，取决于您如何定义文档之间的“差异”。例如`<tag 1><tag 2><tag 3>...`vs `<tag 1><tag 3>`，可以说这`<tag 1>`是唯一的共同元素，或者两者`<tag 1> & <tag 3>`都是共同的。

最保守（因此也很简单）的方法是在节点的任何子节点不同时声明差异并在此时停止递归，即生成两棵树的交集。一个实现可能看起来像这样：

```
class Tree:
    def __init__(self, value, children):
        self.value = value
        self.children = children

def intersect(a, b):
    if a.value != b.value:
        return None
    children = [x for x in itertools.imap(intersect, a.children, b.children) if x is not None]
    return Tree(a.value, children) 
```

请注意，此解决方案可能过于保守，具体取决于您的目标。

# ruby-on-rails-3 - 如何将块而不是变量传递给需要变量的ruby方法

> ID：12240375
> 
> 赞同：3
> 
> 时间：2012-09-02T22:46:54.950
> 
> 标签：ruby-on-rails-3, factory-bot

使用 Rails3，令人敬畏的 FactoryGirl gem 有一个方法 create_list，它接受一个策略、多次，然后是一个值的哈希值传递到策略中。[（从https://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md](https://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md)复制）

```
twenty_year_olds = FactoryGirl.create_list(:user, 25, date_of_birth: 20.years.ago) 
```

假设我不想传递“20.years.ago”，而是传递一个 lambda（或 Proc），每次读取该变量时都会执行一次。这在 Ruby 或 FactoryGirl 中是否可行，或者 FactoryGirl 是否必须检查每个参数以查看它是否是 lambda。

```
dob_dynamic = -> { random_dob some_param }
twenty_year_olds = FactoryGirl.create_list(:user, 25, date_of_birth: dob_dynamic ) 
```

当我做这样的事情时，我得到了：

```
 raise ActiveRecord::AssociationTypeMismatch, message, Object expected, got Proc 
```

我通过执行以下操作解决了这个问题：

```
 # pass i, b/c times always passes index to proc
  # dob_dynamic.() invokes dob_dynamic
  create_user = -> i { create :user, date_of_birth: dob_dynamic.() }
  25.times &create_user 
```

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T05:36:47.000

根据我对您的了解，您应该能够创建一个新工厂（可能使用工厂继承或特征）并将随机代码放入该工厂。如果您在工厂中使用块，每次都会重新评估它，因此您可以轻松使用 create_list。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T20:35:58.983

我发布了 create_list 的功能请求以支持获取 proc。暂时 after(:create) 的钩子非常适合这样的代码，如原始发布的那样：

```
# pass i, b/c times always passes index to proc
# dob_dynamic.() invokes dob_dynamic
create_user = -> i { create :user, date_of_birth: dob_dynamic.() }
25.times &create_user 
```

# javascript - Javascript 用 + 添加对象

> ID：12240384
> 
> 赞同：0
> 
> 时间：2012-09-02T22:48:51.233
> 
> 标签：javascript, arrays

> **可能重复：**
> [在 JavaScript 中重载算术运算符？](https://stackoverflow.com/questions/1634341/overloading-arithmetic-operators-in-javascript)

是否可以以自定义方式添加 Javascript 对象？Javascript 允许您使用`+`符号来合并`Strings`和相加`Numbers`。

我想知道您是否可以为要合并的事物定义新的方法，例如添加数组。我正在寻找的是这样的：

```
var output = [0,1,2] + [3,4,5];
console.log(output);
//I want this to log [3,5,7] 
```

我知道我可以使用某些`addArray()`功能轻松完成此操作，但我想知道是否可以通过使用`+`符号来完成。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T22:51:18.447

不，Javascript 不支持运算符重载，并且没有内置功能可以做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T00:05:17.957

> 是否可以以自定义方式添加 Javascript 对象？

是的，您可以编写自己的*addObject*函数。

> Javascript 允许您使用 + 符号来 [连接] 字符串以及将数字相加。

ECMA-262 定义在表达式中是否将“+”标点符号视为一[元运算](http://ecma-international.org/ecma-262/5.1/#sec-11.4.6)符或[加法](http://ecma-international.org/ecma-262/5.1/#sec-11.6.1)运算符。正如马特所说，你不能超载它。即使你可以，改变它的行为似乎也不是一个好主意，因为它已经用于 3 种不同的东西，并且具有“添加”数组的指定行为，如`[1,2] + [3,4]`.

# php - 改组之前或之后没有相同值的php数组

> ID：12240388
> 
> 赞同：1
> 
> 时间：2012-09-02T22:49:51.560
> 
> 标签：php, arrays, shuffle

在 php 中对数组进行洗牌很容易，但我的问题是当我尝试洗牌而不在该键之前或之后得到相同的结果时。

例子：

```
Array ( 0 => 1, 1 => 2, 2 => 3, 3 => 3 ) 
```

我必须有一个没有 3 的结果。

我想要的一些数组的例子：

```
Array ( 0 => 2, 1 => 3, 2 => 1, 3 => 3 ) 
```

我试图检查数组的每个项目，如果发生这种情况，我会再次对其进行洗牌，然后再检查一次。但这似乎在时间和过程上都是浪费。

**编辑：** 这是我使用的代码：

```
do
{
    $not_valid=false;
    for($i=0;$i<sizeof($arr_times)-1;$i++){
        if($arr_times[$i]==$arr_times[$i+1])
            $not_valid=true;
    }
    if($not_valid)
        shuffle($arr_times);
}while ($not_valid); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T22:59:03.127

尽管 php 确实有很多奇怪的功能 - 它没有任何用于描述的情况。

所以你必须手动完成。

PS：检查是否有可能以预期的方式对输入数组进行洗牌也是一个好主意，这样你就不会陷入无限循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T23:10:31.510

从[随机播放列表中，确保没有项目保持在同一位置](https://stackoverflow.com/questions/7279895/shuffle-list-ensuring-that-no-item-remains-in-same-position)

```
<?php
$foo = array(
    0,
    1,
    2,
    3,
    4,
);

for ($i = 0, $c = sizeof($foo); $i < $c - 1; $i++) {
    $new_i = rand($i + 1, $c - 1);
    list($foo[$i], $foo[$new_i]) = array($foo[$new_i], $foo[$i]);
}

var_export($foo); // Derangement 
```

# facebook - Facebook API 在帖子中分享 Facebook 视频

> ID：12240389
> 
> 赞同：1
> 
> 时间：2012-09-02T22:49:57.947
> 
> 标签：facebook, facebook-graph-api, video

我正在尝试通过 Facebook Opengraph API 和 PHP SDK 在用户的墙上发帖。

一切正常 - 除了我试图包含在帖子中的视频（托管在 Facebook 视频上）未能显示在被发布到的用户的墙上/时间线上。

我将视频的 URL 设置为发送到 /me/feed 的 $attachment 数据中的“源”值。还将“类型”设置为视频。在墙上，我得到一个占位符缩略图和指定的帖子的其余部分。

有任何想法吗？

谢谢，史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T11:28:04.840

您应该能够以链接的形式链接到视频。对于其他类型的共享内容，您应该查看：[https](https://developers.facebook.com/docs/guides/attachments/) ://developers.facebook.com/docs/guides/attachments/ 。如果这不是你想要做的，请告诉我。

# wordpress - 根目录中的索引，子目录中的 wordpress

> ID：12240391
> 
> 赞同：0
> 
> 时间：2012-09-02T22:50:20.957
> 
> 标签：wordpress, .htaccess, indexing, directory, external

好的，我已经用谷歌搜索了几个小时...我将 wordpress 作为内容管理系统安装到子目录中，但我希望我的主 index.php 以及其他文件保留在根目录中。

我需要使用什么 .htaccess 代码或 wordpress 设置，以便主 url [http://foo.com/index.php](http://foo.com/index.php)不查找 wordpress/index.php （这当然会导致错误“警告：需要（./wp-blog-header.php）[function.require]：无法打开流：/home/中没有这样的文件或目录...”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T22:57:54.347

您是否碰巧看到这些[说明](http://codex.wordpress.org/Giving_WordPress_Its_Own_Directory)？

除了对`.htaccess`（Wordpress 说它将尝试执行）进行更改之外，您还需要将`require('./wp-blog-header.php');`内部更改`index.php`为`require('./wordpress/wp-blog-header.php')`.

如果这些说明对您来说很清楚，我建议您查看并遵循这些说明。

更新：

您需要进行这些更改（根据说明）：

1.  转到常规面板。
2.  在 WordPress 地址 (URL) 框中：将地址更改为主要 WordPress 核心文件的新位置。示例： [http ://example.com/wordpress](http://example.com/wordpress)
3.  在站点地址 (URL) 框中：将地址更改为根目录的 URL。示例：[http ://example.com](http://example.com)
4.  单击保存更改。（不要担心错误消息，此时不要尝试查看您的博客！您可能会收到有关未找到文件的消息。）

# django - Django模块化可编辑表

> ID：12240392
> 
> 赞同：1
> 
> 时间：2012-09-02T22:50:48.680
> 
> 标签：django

[http://nextgensim.info/grids](http://nextgensim.info/grids) 刚看到这个demo，我需要用django创建模块化的可编辑表格，在网上搜索过，即使是标准的模块化表格似乎也很难。有没有人建议一种使用 django 获取这些表格的方法？它必须是模块化和可编辑的。

假设我有一个类似 Facebook 的页面，用户应该能够在表格上编辑他的朋友昵称，表格将更新数据库。

# ajax - 当父窗口离开时触发 iframe 中的音频停止 (hashbang)

> ID：12240393
> 
> 赞同：1
> 
> 时间：2012-09-02T22:51:10.473
> 
> 标签：ajax, facebook, iframe, internet-explorer-9, hashbang

我在网页 (Facebook) 上的 iframe (Facebook Tab App) 中有一个网络应用程序。

Web 应用程序播放音频，当用户离开时，通常通过单击另一个 Facebook 链接，页面加载另一个 Facebook 页面并且音频停止。

**这适用于除 Internet Explorer (IE9) 以外的所有浏览器。当我导航到另一个 Facebook 页面时，音频继续播放。**

Facebook 似乎使用了显示许多页面的方法（使用 hashbang #! 方法）而无需标准页面重新加载。对我来说：这意味着网络应用程序的音频继续播放（iframe 在某种程度上是孤立的？）。

当您导航到另一个不使用 #! 的站点时，音频停止播放。URL 语法和浏览器正确地重新加载这些页面。

**当我导航到另一个 Facebook 页面时，我可以做些什么来确保我的网络应用程序（Facebook 选项卡应用程序）中的音频停止？**我正在研究如何：

*   在父项中检测适当的事件
*   明确关闭我的网络应用程序中的音频

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T19:47:20.663

我设法通过挂钩`unload`窗口上的事件来解决这个问题，比如

```
$(window).unload(function() {
  var a = $("#audio");
    a.get(0).pause();
}); 
```

# jquery - 标题中的 CSS 水平控件

> ID：12240396
> 
> 赞同：0
> 
> 时间：2012-09-02T22:51:32.650
> 
> 标签：jquery, html, css, jquery-mobile

我很难水平对齐两个元素，这让我感到很愚蠢，我尝试过我曾经做过的事情，但没有一个起作用。

如何将提交按钮水平放置在文本字段旁边而不破坏任何内容？

**[小提琴](http://jsfiddle.net/vv57k/2/)**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T23:18:55.200

您可以使用以下内容：

```
#searchField {
   width: 70%;
   float:left;   
}
#searchButton {
   width: 25%;
   float:right;   
} 
```

可能不是最好的方法，但它有效。您可能还想添加一些填充，只是为了调整它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T05:22:01.950

检查这个小提琴[http://jsfiddle.net/vv57k/3/](http://jsfiddle.net/vv57k/3/)

如果您确定您在哪里以及如何使用它，您可能必须以 px 为单位固定宽度。我添加了百分比

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T05:34:20.663

你可能想要这样的东西[http://jsfiddle.net/vv57k/6/](http://jsfiddle.net/vv57k/6/)

要将它们内联放置，您必须将文本输入包装在另一个 div 中，data-inline 不适用于输入文本，因为它创建了一个容器（如 select ..）

# eclipse - 如何使用来自 Maven 的 Eclipse p2 存储库？

> ID：12240401
> 
> 赞同：3
> 
> 时间：2012-09-02T22:52:28.327
> 
> 标签：eclipse, maven, p2, tycho

我正在尝试创建一个基于 Eclipse 的设置，其中 Eclipse 项目基于 Maven。因此，无论是否使用 Eclipse，它都应该与 Maven 一起工作。

我对各种 Eclipse 项目库有依赖关系，还有更多需要添加。我想使用 p2 存储库，并且我已经成功地提取了一个 Eclipse EMF 库并将其转换为一个 jar，遵循以下示例：[在常规 Maven 构建中使用来自 Eclipse p2 存储库的依赖项？](https://stackoverflow.com/questions/6682028/use-dependencies-from-eclipse-p2-repository-in-a-regular-maven-build)

问题是，我找不到简化流程的方法。我需要从上面给出的问题手动安装重新打包的依赖项到本地 Maven 存储库，以便我可以在其他项目中引用它。我想将 p2 存储库中的人工制品无缝集成到我的基于 Maven 的设置中。m4e 看起来不像我正在寻找的顺利解决方案：理想情况下，我想分发一组目录，这些目录可以响应简单的 mvn clean install 执行所有操作：从 p2 存储库中提取库，从 Maven 存储库中提取其他库ETC..

这可以通过 Maven 和 Tycho 集成实现吗？

更新：首先，澄清问题：仅能够引用 P2 存储库无助于需要从另一个项目中使用此引用的场景。从 P2 存储库引用的库（或多个库）必须重新打包为 jar，以便其他 Maven 项目可以引用它。引用的问题进行包装。但是，它没有解释如何从其他项目中使用这种重新打包的输出（程序集）。在我的例子中，结果证明这是从聚合 POM 中引用程序集，并为所有想要使用 P2 存储库来源的库的项目继承该 POM 的形式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T08:17:27.013

Tycho 项目可以从 p2 存储库和 Maven 存储库中提取它们的依赖项（请参阅此[相关答案](https://stackoverflow.com/a/11951980/1523648)）。这可能是一个适合您的解决方案，即使您不是为 OSGi 运行时构建：大多数 OSGi 包也可以作为类路径上的“普通”JAR 工作。

限制：从 Maven 存储库引用的工件也必须是 OSGi 包，以便 Tycho 将它们视为依赖关系解析。如果不是这种情况（并且您找不到作为 OSGi 捆绑包的替代品），您可以将 Tycho 的依赖关系解析与普通的 Maven 插件结合起来：

*   使用 Tycho 的一种打包类型（例如`eclipse-feature`）并以打包类型的文件格式指定对 p2 工件的依赖关系（例如 a `feature.xml`）
*   另外在你的 POM 中配置简单的 Maven 目标。Tycho 在运行时将 OSGi/p2 依赖项注入到 Maven 模型中，因此例如`maven-compiler-plugin:compile`调用会同时看到 Maven 依赖项和 p2 依赖项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T10:42:00.457

解决方案是使用 Maven 创建一个多模块设置，并声明对 EMF 库重新打包输出的依赖（来自我引用的问题）所有项目的父 pom 都有这个：

```
 <dependencies>
    <dependency>
        <groupId>com.mymodule</groupId>
        <artifactId>myartifact</artifactId>
        <version>0.0.1</version>
        <classifier>repackaged</classifier>                 
    </dependency>
  </dependencies>
      <modules>
            <module>../mymodule</module>
     </modules> 
```

这让所有将此模块作为父模块的模块都可以访问重新打包的 P2 工件。

# php - 使用 HTTP POST 方法通过 php 更新 mysql 数据库

> ID：12240403
> 
> 赞同：-1
> 
> 时间：2012-09-02T22:52:41.143
> 
> 标签：php, mysql

它完美地在应用程序上执行我仔细检查了它。它正确发送所有参数，问题出在 php 脚本中，它没有执行查询（更新、删除）它正确执行插入查询。php 脚本与 html 表单完美配合，但我不知道问题出在哪里。

这是我的 php 脚本：

```
    $mysql_host = "本地主机";
    $mysql_database = "定位器";
    $mysql_user = "根";
    $mysql_password = "";
    mysql_connect($mysql_host,$mysql_user,$mysql_password) 或死(mysql_error());
    mysql_select_db($mysql_database);
    $uMail = $_POST['u_mail'];
    $uIMEI = $_POST['u_IMEI'];
    $uName = $_POST['u_name'];
    $uPass = $_POST['u_pass'];
    $tName = $_POST['t_names'];
    $tIMEI = $_POST['t_IMEIs'];
    $tDesc = $_POST['t_desc'];
    mysql_query("UPDATE user_master SET t_names='$tName',t_IMEIs='$tIMEI',t_desc='$tDesc' WHERE u_mail = '$uMail' AND u_IMEI = '$uIMEI'");
    mysql_close();
    ?>
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T22:57:45.447

也许你应该用`mysql_real_escape_string()`

```
$uMail = mysql_real_escape_string($_POST['u_mail']);
$uIMEI = mysql_real_escape_string($_POST['u_IMEI']);
$uName = mysql_real_escape_string($_POST['u_name']);
$uPass = mysql_real_escape_string($_POST['u_pass']);
$tName = mysql_real_escape_string($_POST['t_names']);
$tIMEI = mysql_real_escape_string($_POST['t_IMEIs']);
$tDesc = mysql_real_escape_string($_POST['t_desc']);
mysql_query("UPDATE user_master SET t_names='$tName',t_IMEIs='$tIMEI',t_desc= '$tDesc'      WHERE u_mail = '$uMail' AND u_IMEI = '$uIMEI'"); 
```

并确保`$uMail`和`$uIMEI`设置正确

# android - 将项目动态添加到 ListView

> ID：12240405
> 
> 赞同：0
> 
> 时间：2012-09-02T22:53:00.480
> 
> 标签：android, listview

我正在使用`ListView`安卓系统。`ListView`我知道如何使用常用方式填写 android 。但是假设我们有一个像下面这样的类，它包含两个`TextView`，a`Button`和 a `ProgressBar`。我已经声明`RelativeLayout`并成功在此布局中添加了所有视图。（经测试使用`setContentView(new ListViewItem(this).getLayout());`基本没问题）。

```
public class ListViewItem {
    public ListViewItem(Context context) {
        this.M_speedTextView = new TextView(context);
        this.M_nameTextView = new TextView(context);
        this.M_progressBar = new ProgressBar(context, null,
                android.R.attr.progressBarStyleHorizontal);
        this.M_activityButton = new Button(context);
        this.M_layout = new RelativeLayout(context);

        this.M_speedTextView.setId(new Random().nextInt());
        this.M_nameTextView.setId(new Random().nextInt());
        this.M_progressBar.setId(new Random().nextInt());
        this.M_activityButton.setId(new Random().nextInt());

        this.M_layout.setId(new Random().nextInt());
    }

    public void setSpeed(int speed) {
        this.M_speedTextView.setText(Integer.toString(speed));
    }

    public void setName(String name) {
        this.M_nameTextView.setText(name);
    }

    public void setProgress(int progress) {
        this.M_progressBar.setProgress(progress);
    }

    public void setButtonText(String text) {
        this.M_activityButton.setText(text);
    }

    public RelativeLayout getLayout() {
        // Layout setting
        this.M_layout.setLayoutParams(new LayoutParams(
                LayoutParams.FILL_PARENT, 50));
        this.M_layout.setBackgroundResource(android.R.color.transparent);

        // Name Text setting
        LayoutParams nameTextParams = new LayoutParams(
                LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);

        nameTextParams.setMargins(5, 10, 0, 0);
        nameTextParams.addRule(RelativeLayout.ALIGN_PARENT_LEFT, 1);
        nameTextParams.addRule(RelativeLayout.LEFT_OF,
                this.M_speedTextView.getId());

        this.M_nameTextView.setTextSize(15);
        this.M_nameTextView.setText("TextView");
        this.M_nameTextView.setSingleLine();
        this.M_nameTextView.setEllipsize(TruncateAt.END);

        this.M_layout.addView(this.M_nameTextView, nameTextParams);

        // Activity Button setting
        LayoutParams activityParams = new LayoutParams(
                LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);

        activityParams.setMargins(0, 5, 5, 0);
        activityParams.addRule(RelativeLayout.ALIGN_PARENT_RIGHT, 1);
        activityParams.addRule(RelativeLayout.ALIGN_PARENT_TOP, 1);

        this.M_activityButton.setText("Start");

        this.M_layout.addView(this.M_activityButton, activityParams);

        // ProgressBar setting
        LayoutParams progressParams = new LayoutParams(
                LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);

        progressParams.addRule(RelativeLayout.ALIGN_BOTTOM,
                this.M_activityButton.getId());
        progressParams.addRule(RelativeLayout.ALIGN_LEFT,
                this.M_nameTextView.getId());
        progressParams.addRule(RelativeLayout.BELOW,
                this.M_nameTextView.getId());
        progressParams.addRule(RelativeLayout.LEFT_OF,
                this.M_activityButton.getId());

        this.M_layout.addView(this.M_progressBar, progressParams);

        // Speed TextView setting
        LayoutParams speedParam = new LayoutParams(LayoutParams.WRAP_CONTENT,
                LayoutParams.WRAP_CONTENT);
        speedParam.addRule(RelativeLayout.ALIGN_BASELINE,
                this.M_nameTextView.getId());
        speedParam.addRule(RelativeLayout.ALIGN_BOTTOM,
                this.M_nameTextView.getId());
        speedParam.addRule(RelativeLayout.LEFT_OF,
                this.M_activityButton.getId());

        this.M_speedTextView.setText("0 KiB/s");
        this.M_speedTextView.setTextSize(15);

        this.M_layout.addView(this.M_speedTextView, speedParam);

        return this.M_layout;
    }

    TextView M_speedTextView;
    TextView M_nameTextView;
    ProgressBar M_progressBar;
    Button M_activityButton;
    RelativeLayout M_layout;
} 
```

现在，我创建了一个数组，`ListViewItem`并且我想将这些数组项添加到 ListView。`getLayout()`（我们可以使用ListViewItem 类的方法获取包含所有这些 View 的 Layout ）。

请注意，我想动态添加这些视图。不使用常用方式填写。谁能指导我如何做到这一点？

**编辑**常用方法：将xml文件声明为listViewItem，膨胀并使用它的子项目并在`getView`方法中返回它。

**编辑**我当前使用的适配器类和 LogCat 错误：

```
public class ListViewAdapter extends BaseAdapter {
    private ArrayList<ListViewItem> M_items;

    public ListViewAdapter(ArrayList<ListViewItem> items) {
        this.M_items = items;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        return this.M_items.get(position).getLayout();
    }

    @Override
    public int getCount() {
        return this.M_items.size();
    }

    @Override
    public ListViewItem getItem(int position) {
        return this.M_items.get(position);
    }

    @Override
    public long getItemId(int position) {
        return this.M_items.get(position).getId();
    }
} 
```

LogCat 错误：

```
09-03 03:56:23.359: E/AndroidRuntime(9415): FATAL EXCEPTION: main
09-03 03:56:23.359: E/AndroidRuntime(9415): java.lang.ClassCastException: android.widget.RelativeLayout$LayoutParams
09-03 03:56:23.359: E/AndroidRuntime(9415):     at android.widget.ListView.measureScrapChild(ListView.java:1189)
09-03 03:56:23.359: E/AndroidRuntime(9415):     at android.widget.ListView.measureHeightOfChildren(ListView.java:1272)
09-03 03:56:23.359: E/AndroidRuntime(9415):     at android.widget.ListView.onMeasure(ListView.java:1181)
09-03 03:56:23.359: E/AndroidRuntime(9415):     at android.view.View.measure(View.java:8313)
09-03 03:56:23.359: E/AndroidRuntime(9415):     at android.widget.RelativeLayout.measureChild(RelativeLayout.java:566)
09-03 03:56:23.359: E/AndroidRuntime(9415):     at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:381)
09-03 03:56:23.359: E/AndroidRuntime(9415):     at android.view.View.measure(View.java:8313)
09-03 03:56:23.359: E/AndroidRuntime(9415):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
09-03 03:56:23.359: E/AndroidRuntime(9415):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
09-03 03:56:23.359: E/AndroidRuntime(9415):     at android.view.View.measure(View.java:8313)
09-03 03:56:23.359: E/AndroidRuntime(9415):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:531)
09-03 03:56:23.359: E/AndroidRuntime(9415):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
09-03 03:56:23.359: E/AndroidRuntime(9415):     at android.view.View.measure(View.java:8313)
09-03 03:56:23.359: E/AndroidRuntime(9415):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
09-03 03:56:23.359: E/AndroidRuntime(9415):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
09-03 03:56:23.359: E/AndroidRuntime(9415):     at android.view.View.measure(View.java:8313)
09-03 03:56:23.359: E/AndroidRuntime(9415):     at android.view.ViewRoot.performTraversals(ViewRoot.java:845)
09-03 03:56:23.359: E/AndroidRuntime(9415):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1866)
09-03 03:56:23.359: E/AndroidRuntime(9415):     at android.os.Handler.dispatchMessage(Handler.java:99)
09-03 03:56:23.359: E/AndroidRuntime(9415):     at android.os.Looper.loop(Looper.java:130)
09-03 03:56:23.359: E/AndroidRuntime(9415):     at android.app.ActivityThread.main(ActivityThread.java:3687)
09-03 03:56:23.359: E/AndroidRuntime(9415):     at java.lang.reflect.Method.invokeNative(Native Method)
09-03 03:56:23.359: E/AndroidRuntime(9415):     at java.lang.reflect.Method.invoke(Method.java:507)
09-03 03:56:23.359: E/AndroidRuntime(9415):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
09-03 03:56:23.359: E/AndroidRuntime(9415):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
09-03 03:56:23.359: E/AndroidRuntime(9415):     at dalvik.system.NativeStart.main(Native Method) 
```

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T23:53:17.433

如果我不知道我在说什么，请原谅我。我不久前在尝试学习这些东西时遇到了这个问题。也许这与您的困境有关。

[http://p-xr.com/android-tutorial-dynamicaly-load-more-items-to-the-listview-never-ending-list/](http://p-xr.com/android-tutorial-dynamicaly-load-more-items-to-the-listview-never-ending-list/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T03:51:20.260

通常，您的列表适配器使用某种数据结构或容器来存储其对象。如果需要添加新元素，请先将其添加到容器中，然后调用

```
adapter.notifyDataSetChanged(); 
```

让它知道其数据已更改并需要更新。

这只是一个小例子，可以引导您朝着正确的方向前进。我希望你会发现它有用。

**定义您的 ListActivity：**

```
package com.myapp.listviewexample;

import android.app.ListActivity;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;

public class ListViewExampleActivity extends ListActivity {

    static final String[] COUNTRIES = new String[] {
        "Afghanistan", "Albania", "Algeria", "American Samoa", "Andorra",
        "Angola", "Anguilla", "Antarctica", "Antigua and Barbuda", "Argentina",
        "Armenia", "Aruba", "Australia", "Austria", "Azerbaijan"
      };

    @Override
    public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);

      //setListAdapter(new ArrayAdapter<String>(this, R.layout.list_item, COUNTRIES));
      final MyListAdapter adapter = new MyListAdapter(this, COUNTRIES);
      setListAdapter(adapter);

      ListView lv = getListView();
      //lv.setTextFilterEnabled(true);

      lv.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view,
            int position, long id) {

            adapter.removeItem(position);
            adapter.notifyDataSetChanged();
          // When clicked, show a toast with the TextView text
          Toast.makeText(getApplicationContext(), ((TextView) view).getText() + " removed",
              Toast.LENGTH_SHORT).show();
        }
      });
    }

} 
```

**定义您的列表适配器：**

```
package com.myapp.listviewexample;

import java.util.ArrayList;
import java.util.Arrays;

import android.content.Context;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.TextView;

public class MyListAdapter extends BaseAdapter {

    private ArrayList<String> items;
    private Context mContext;

    public MyListAdapter(Context c, String[] countries) {
        items = new ArrayList<String>(Arrays.asList(countries));
        mContext = c;
        Log.i("MyListAdapter", "countries.length == items.size() " + (countries.length == items.size()));
    }

    public int getCount() {
        return items.size();
    }

    public Object getItem(int position) {
        return items.get(position);
    }

    public long getItemId(int position) { 
        return position;
    }

    public void removeItem(int position) {
        items.remove(position);
    }

    // create a new ImageView for each item referenced by the Adapter
    public View getView(int position, View convertView, ViewGroup parent) {
        View view;
        if (convertView == null) {  // if it's not recycled, initialize some attributes
            LayoutInflater li = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            view = li.inflate(R.layout.list_item, null);
        } else {
            view = convertView;
        }

        TextView tv = (TextView) view;//.findViewById(R.id.text_view_item);
        tv.setText(items.get(position));

        return view;
    }

} 
```

**考虑为适配器使用 ViewHolder 模式，以避免不必要的视图膨胀。这篇文章可能会有所帮助：** [如何使我的 ArrayAdapter 遵循 ViewHolder 模式？](https://stackoverflow.com/q/3832254/1082933)

**定义你的 list_item.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/text_view_item"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="10dp"
    android:textSize="16sp" >
</TextView> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T00:24:07.467

尝试使用此类而不是发布的 ListViewItem 类：

```
public class ListViewItem extends RelativeLayout {
    @SuppressWarnings("deprecation")
    public ListViewItem(Context context) {
        super(context);

        this.M_speedTextView = new TextView(context);
        this.M_nameTextView = new TextView(context);
        this.M_progressBar = new ProgressBar(context, null,
                android.R.attr.progressBarStyleHorizontal);
        this.M_activityButton = new Button(context);

        this.M_speedTextView.setId(new Random().nextInt());
        this.M_nameTextView.setId(new Random().nextInt());
        this.M_progressBar.setId(new Random().nextInt());
        this.M_activityButton.setId(new Random().nextInt());

        this.setId(new Random().nextInt());

        /***************************************************************/
        this.setLayoutParams(new AbsListView.LayoutParams(
                LayoutParams.FILL_PARENT, 50));
        this.setBackgroundResource(android.R.color.transparent);

        // Name Text setting
        LayoutParams nameTextParams = new LayoutParams(
                LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);

        nameTextParams.setMargins(5, 10, 0, 0);
        nameTextParams.addRule(RelativeLayout.ALIGN_PARENT_LEFT, 1);
        nameTextParams.addRule(RelativeLayout.LEFT_OF,
                this.M_speedTextView.getId());

        this.M_nameTextView.setTextSize(15);
        this.M_nameTextView.setText("TextView");
        this.M_nameTextView.setSingleLine();
        this.M_nameTextView.setEllipsize(TruncateAt.END);

        this.addView(this.M_nameTextView, nameTextParams);

        // Activity Button setting
        LayoutParams activityParams = new LayoutParams(
                LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);

        activityParams.setMargins(0, 5, 5, 0);
        activityParams.addRule(RelativeLayout.ALIGN_PARENT_RIGHT, 1);
        activityParams.addRule(RelativeLayout.ALIGN_PARENT_TOP, 1);

        this.M_activityButton.setText("Start");

        this.addView(this.M_activityButton, activityParams);

        // ProgressBar setting
        LayoutParams progressParams = new LayoutParams(
                LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);

        progressParams.addRule(RelativeLayout.ALIGN_BOTTOM,
                this.M_activityButton.getId());
        progressParams.addRule(RelativeLayout.ALIGN_LEFT,
                this.M_nameTextView.getId());
        progressParams.addRule(RelativeLayout.BELOW,
                this.M_nameTextView.getId());
        progressParams.addRule(RelativeLayout.LEFT_OF,
                this.M_activityButton.getId());

        this.addView(this.M_progressBar, progressParams);

        // Speed TextView setting
        LayoutParams speedParam = new LayoutParams(LayoutParams.WRAP_CONTENT,
                LayoutParams.WRAP_CONTENT);
        speedParam.addRule(RelativeLayout.ALIGN_BASELINE,
                this.M_nameTextView.getId());
        speedParam.addRule(RelativeLayout.ALIGN_BOTTOM,
                this.M_nameTextView.getId());
        speedParam.addRule(RelativeLayout.LEFT_OF,
                this.M_activityButton.getId());

        this.M_speedTextView.setText("0 KiB/s");
        this.M_speedTextView.setTextSize(15);

        this.addView(this.M_speedTextView, speedParam);
    }

    public void setSpeed(int speed) {
        this.M_speedTextView.setText(Integer.toString(speed));
    }

    public void setName(String name) {
        this.M_nameTextView.setText(name);
    }

    public void setProgress(int progress) {
        this.M_progressBar.setProgress(progress);
    }

    public void setButtonText(String text) {
        this.M_activityButton.setText(text);
    }

    TextView M_speedTextView;
    TextView M_nameTextView;
    ProgressBar M_progressBar;
    Button M_activityButton;
} 
```

并在`getView`适配器方法中：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    return this.M_items.get(position);
} 
```

# java - 将 System.out.print 方法中的数据存储到字符串（Java）中？

> ID：12240406
> 
> 赞同：2
> 
> 时间：2012-09-02T22:53:05.687
> 
> 标签：java, input

我正在制作密码生成器和管理器。我通过从 for 循环一次生成一个字符来创建密码。在每次 for 循环迭代结束时，它会打印出所选的随机字符。我一直在尝试将密码 char 逐个字符存储到与 for 循环中 i 的值相关的数组的索引中。那不仅仅是打印，我什么也做不了。因此我有两个问题，我的主要问题是：是否可以捕获我打印的字符然后将它们存储在字符串中？或者，就像下面的代码一样，我可以避免运行时（通过我的数组）出现的空指针异常吗？当我尝试在索引 i 处将字符串分配给我的密码字符串时，会发生空指针异常。我的代码可能会更好地解释它。谢谢你的帮助 ：）

```
package pass.gen;

public class PassGen {

    public static void main(String[] args) {
        PassGen passGen = new PassGen();
        passGen.generate();
    }

    String lAlpha = "abcdefghijklmnopqrstuvwxyz"; //used to generate lowercase pass chars
    String uAlpha = "ABCDEFGHIJKLMNOPQRSTUVWXYZ"; //used to generate uppercase pass chars
    int minNum = 0; //the mininum number that a integer value can be in the password
    int maxNum = 9; //the max number "" ...........................................""
    int randomNumber; 
    int minString = 0;
    int maxString = 25;
    int randomLNum;
    int randomUNum;
    int low1 = 1;
    int high3 = 3;
    int ran3;
    char randomLChar;
    char randomUChar;
    char randomNumChar;
    String randomLString;
    String randomUString;
    String randomNumString;
    String passString []; //should this be an array of chars? 
    boolean case1; //if the case is true (case1 is for random numbers) then a random number is added to the passString
    boolean case2; //if the case is true (case2 is for random lowercase letters) then a random lowercase letter is added to the passString
    boolean case3; //if the case is true (case3 is for random uppercase letters) then a random uppercase letter is added to the passString

    void generate(){
        for(int i = 0; i < 4; i++){
            ran3 = low1 + (int)(Math.random() * ((high3 - low1) + 1));
            switch(ran3){
            case 1:genNumber(0,9);
            break;
            case 2:genLAlpha();
            break;
            case 3:genUAlpha();
            break;
            default:System.out.println("Unable to Generate a Password.");
            }
            if(case1 == true){
                passString[i] = randomNumString;

            }if(case2 == true){
                passString[i] = randomLString;

            }if(case3 == true){
                passString[i] = randomUString;
            }
        }
        System.out.println(passString);
    }

    void genNumber(int min, int max){
        randomNumber = min + (int)(Math.random() * ((max - min) + 1));
        randomNumChar = Character.forDigit(randomNumber,5);
        case1 = true;
    }

    void genLAlpha(){
        randomLNum = minString + (int)(Math.random() * ((maxString - minString) + 1));
        randomLChar = lAlpha.charAt(randomLNum);
        randomLString = Character.toString(randomLChar);
        case2 = true;
    }

    void genUAlpha(){
        randomUNum = minString + (int)(Math.random() * ((maxString - minString) + 1));
        randomUChar = uAlpha.charAt(randomUNum);
        randomUString = Character.toString(randomUChar);
        case3 = true;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T23:52:18.237

*   `passString`未初始化，因此您的原因`NullPointerException`
*   genNumber 没有设置 的值`randomNumString`，因此它将始终为 null

您的“生成”方法应该返回它们生成的值。这将消除对成员变量的依赖，减少可能出现问题的区域的数量。这也意味着您可以添加新的生成方法而无需更改大量代码......

即使您选择不这样做，您也应该有一个变量来保存每个计算的结果......

试试这个...

```
public class PassGen {

    public static void main(String[] args) {
        PassGen passGen = new PassGen();

        String generate = passGen.generate();
        System.out.println(generate);

    }
    String lAlpha = "abcdefghijklmnopqrstuvwxyz"; //used to generate lowercase pass chars
    String uAlpha = "ABCDEFGHIJKLMNOPQRSTUVWXYZ"; //used to generate uppercase pass chars
    int minNum = 0; //the mininum number that a integer value can be in the password
    int maxNum = 9; //the max number "" ...........................................""
    int minString = 0;
    int maxString = 25;
    int low1 = 1;
    int high3 = 3;

    public String generate() {
        StringBuilder sb = new StringBuilder(4);

        for (int i = 0; i < 4; i++) {
            sb.append(generateCharacter());
        }
        return sb.toString();
    }

    protected char generateCharacter() {
        char result = '-';
        int ran3 = low1 + (int) (Math.random() * ((high3 - low1)));
        switch (ran3) {
            case 0:
                result = genNumber(0, 9);
                break;
            case 1:
                result = genLAlpha();
                break;
            case 2:
                result = genUAlpha();
                break;
        }

        return result;

    }

    protected char genNumber(int min, int max) {
        int randomNumber = min + (int) (Math.random() * ((max - min) + 1));
        char randomNumChar = Character.forDigit(randomNumber, 5);
        return randomNumChar;
    }

    protected char genLAlpha() {
        int randomLNum = minString + (int) (Math.random() * ((maxString - minString) + 1));
        char randomLChar = lAlpha.charAt(randomLNum);
        return randomLChar;
    }

    protected char genUAlpha() {
        int randomUNum = minString + (int) (Math.random() * ((maxString - minString) + 1));
        char randomUChar = uAlpha.charAt(randomUNum);
        return randomUChar;
    }
} 
```

另外，我强烈建议您花一些时间来学习如何使用 IDE 的调试器。如果你不使用和IDE，我强烈建议你开始。我花了 30 秒来添加一个断点并找到你的`NullPointerException`

# c# - Type.GetType 不适用于泛型类？

> ID：12240407
> 
> 赞同：7
> 
> 时间：2012-09-02T22:53:12.470
> 
> 标签：c#, reflection, types

```
Type t = Type.GetType("BLL.MyLayers.TestLayer,BLL"); 
```

对于泛型类，t 始终为 null。

当我尝试获取普通类的类型时，t 不为空。

为什么会这样或者我有什么问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-02T22:59:52.307

泛型类型是使用一个小技巧编译的：

```
class A<T>
{
}

var aa = Type.GetType("ConsoleApplication1.A`1"); 
```

请注意，撇号不是引号，而是 1 键左侧的键（在大多数键盘上）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-02T22:57:54.680

你可以试试：

```
Type t = Type.GetType("BLL.MyLayers.TestLayer`1,BLL"); 
```

# node.js - Mongoose findOne 函数未执行

> ID：12240410
> 
> 赞同：8
> 
> 时间：2012-09-02T22:53:43.017
> 
> 标签：node.js, mongodb, mongoose

```
 ... (... = some unrelated code)

  var mongoose = require('mongoose');
  var db = mongoose.connect('mongodb://localhost/test');

  ...

  dataSchema = new Schema({
     'url': { type: String, index: true },
     'user_id': { type: Schema.ObjectId, index:true }
   });
  var Website = mongoose.model('websites', dataSchema);

  ...

  Website.findOne({url: "someurl.com"},function (err, docs) {
    console.log(docs._id);
  });

  ... 
```

由于某种原因，console.log 没有执行。有没有办法告诉我是否正确设置了我的架构，或者查看我的查找功能是否失败或任何类型的问题可能出在哪里的迹象？目前，当我运行我的脚本时，没有发生错误，但也没有打印任何内容。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T23:11:16.330

您可以通过将连接上的错误事件挂钩来检查连接和架构错误：

```
mongoose.connection.on('error', function(err) {
    console.error('MongoDB error: %s', err);
}); 
```

# wsgi - 'pserve' 是否不适合在 nginx 后面为我的 Pyramid 应用程序提供生产用途？

> ID：12240417
> 
> 赞同：4
> 
> 时间：2012-09-02T22:55:58.277
> 
> 标签：wsgi, pyramid

我得到的印象是，尽管在任何地方都没有明确说明，但`pserve`在我的 Pyramid 应用程序部署到生产环境时使用它并不是最好的主意。例如，我不知道它处理并发性——我怀疑它根本不处理。也不知道`paster`对不对。

对于上下文：我有一个带有 PasteDeploy 配置文件的 Pyramid 应用程序，我可以使用类似`pserve config.ini`. 那么，在生产中，我是否会将该命令作为守护进程运行并通过反向代理它`nginx`？

这里的最佳做法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-03T01:43:43.887

`pserve`只是一个应用程序加载器和服务器运行器。它能够启动许多不同的 WSGI 服务器（您需要选择其中一个进行部署）。很少有 WSGI 服务器无法运行`pserve`（主要想到的是 Apache 的 mod_wsgi）。

就生产而言，您想要的主要是可靠性，主管可以提供很大帮助。您会想查看[nginx 部署秘诀](http://docs.pylonsproject.org/projects/pyramid_cookbook/en/latest/deployment/nginx.html)，但该食谱实际上包含几个不同部署场景的秘诀，您需要根据您当前的基础架构对其进行评估。

# c# - 什么是上下文？

> ID：12240420
> 
> 赞同：45
> 
> 时间：2012-09-02T22:56:11.100
> 
> 标签：c#

在我看来，Context 类是一个控制台，其对象可以调用任何包含的函数，例如 WCF Ria 服务中的 Datacontext 和 DomainContext。我是否正确理解了这个概念？如果是这样，在什么情况下我需要在自己的类层次结构中创建上下文类？

除了 DataContext，.net 框架还有哪些知名的 Context 类？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-09-03T00:38:24.817

您可以将上下文视为相关“事物”的包装器，例如 HttpContext、DbContext、ObjectContext。即： HttpContext 包含您可以访问的与 HTTP 相关的操作的任何信息。

DbContext 包含用于数据库通信的方法和属性。对象上下文也是如此。

我会说它是相关事物的占位符或容器。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-09-02T23:22:02.203

对我来说，上下文对象定义了一组绑定到当前执行路径的值和/或函数。换句话说，就像在工作面试的*上下文*中谈论技术主题与在书呆子晚宴上谈论同一主题不同一样，上下文会根据影响使用代码的运行时环境的因素而变化。这似乎很抽象，但我现在想不出更好的方式来描述它！

.NET 中另一个著名的上下文是`HttpContext`对象。哪些值会根据正在处理的 Http 操作而改变。例如，网址将更改为`HttpContext.Current.Request.Uri`. 希望能为您提供上下文:)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-03T00:20:17.920

上下文通常是一组动作的存储机制。 `HttpContext`，[例如](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.aspx)

> 封装有关单个 HTTP 请求的所有 HTTP 特定信息。

对于您的 WCF 示例，“上下文”是服务。不同的服务有不同的上下文。上下文可以根据需要细化。有些是宽泛的，例如`DomainContext`，有些是颗粒状的，例如`HttpContext`。

上下文无处不在，当您需要访问或将志同道合的数据或功能设置为可以解耦的事物时，请创建上下文。

所有的上下文都是这样的，它们只是封装了特定动作集的逻辑。

[这](https://stackoverflow.com/questions/986865/can-you-explain-the-context-design-pattern-a-bit)是另一篇描述上下文设计模式的文章。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-14T10:15:06.540

[根据微软官方解释：](https://docs.microsoft.com/en-us/dotnet/api/system.runtime.remoting.contexts.context?view=netframework-4.8)

上下文是一个有序的属性序列，它为驻留在其中的对象定义了一个环境。在激活过程中为配置为需要某些自动服务（例如同步、事务、即时激活、安全性等）的对象创建上下文。多个对象可以存在于一个上下文中。

通常根据类的元数据属性选择新对象的上下文。一些重要的上下文类型是：

**执行上下文：**

这是父上下文，所有其他上下文都是它的一部分。它是 .NET 功能（如 Task）用来捕获和传播上下文的系统，但没有自己的行为。

**安全上下文：**

在这里，我们可以找到通常仅限于当前线程的任何安全信息。如果您的代码需要以特定用户身份运行，您可能正在模拟该用户，或者 ASP.NET 可能正在为您进行模拟。在这种情况下，模拟存储在 SecurityContext

**调用上下文：**

这允许程序员存储在逻辑线程的生命周期内应该可用的自定义数据。尽管在很多情况下被认为是不好的做法，但它可以避免过多的方法参数，因为在程序中传递了各种上下文。LogicalCallContext 是一个跨 AppDomain 工作的相关系统。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-21T16:28:31.110

在一些 OOP 设计模式中使用了 Context 类，例如： - 状态模式 - 策略模式

# windows-8 - 如何防止/禁用 Windows 8 Metro UI 应用程序的快照视图

> ID：12240421
> 
> 赞同：2
> 
> 时间：2012-09-02T22:56:13.993
> 
> 标签：windows-8, microsoft-metro, winjs, snapping

我有一个对快照视图真的没有意义的应用程序，因为内容通常代表 A4 页面的信息和数据收集。

有没有办法禁用应用程序的捕捉视图，或者推荐的方法是在捕捉模式下仅显示应用程序图标？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-02T22:58:57.210

您不能禁用捕捉视图。

如果发生快照事件，只需创建一个新页面并导航到该页面。您可以简单地显示图像。

```
Window.Current.SizeChanged += (object sender, Windows.UI.Core.WindowSizeChangedEventArgs e) =>
                {
                    ApplicationViewState myViewState = ApplicationView.Value;

                    if (myViewState == ApplicationViewState.Snapped)
                    {
                        //await SaveAssets();
                        this.Frame.Navigate(typeof(Snapped));
                        Snapped = true;
                    }
                    else if (myViewState != ApplicationViewState.Snapped)
                    {
                        if (Snapped)
                        {
                            this.Frame.Navigate(typeof(MainPage));
                            Snapped = false;
                        }
                    }
                }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-22T22:45:00.763

我真的很喜欢罗伯特的解决方案。基于此，您可以模拟禁用快照视图：

```
Window.Current.SizeChanged += async (object sender, WindowSizeChangedEventArgs e) =>
        {
            ApplicationViewState myViewState = ApplicationView.Value;
            if (myViewState == ApplicationViewState.Snapped)
            {
                if (!ApplicationView.TryUnsnap())
                {
                    MessageDialog dialog = new MessageDialog("Sorry, this App is unusable in snapped mode.");
                    await dialog.ShowAsync();
                }
            }
        }; 
```

# c - 是否有另一个进程接收到对 UDP 数据报的响应？

> ID：12240424
> 
> 赞同：1
> 
> 时间：2012-09-02T22:57:04.680
> 
> 标签：c, sockets, udp

我正在尝试实现一个基本的 UDP 协议，其中发送方将 UDP 数据报发送到服务，然后使用传入数据报中的源地址和源端口发回响应数据报。

通常，您会让 Sender 也监听该端口上的响应。但我希望响应由也在该主机上运行的单独程序（侦听器）接收。所以：

1.  在主机 A 上，侦听器启动并绑定到端口 12345，并阻止`recvfrom`.
2.  在主机 A 上，Sender 向主机 B 上运行的 Service 发送数据报，将源地址和端口设置为主机 A，端口 12345。
3.  主机 B 上的服务向主机 A 的端口 12345 发送响应。
4.  响应由侦听器拾取。

设置源地址和端口是通过绑定到它们来完成的。所以我需要 Sender 和 Listener 绑定到同一个端口。在两者中设置 SO_REUSEADDR 允许这样做。请注意，我在这里没有使用多播。

但是侦听器并不能可靠地接收到响应。我观察到有两个例外：

我发现如果 Sender 在发送第一个数据报后立即关闭套接字，那么响应将到达 Listener。

或者，如果 Sender 首先启动并在 Listener 之前绑定，则响应将被 Listener 拾取。

我一直在研究互联网上的示例，但没有找到清楚描述应该发生什么的文档。但是我见过的一些地方暗示，对于单播，只有最近绑定到端口的进程才会接收发送给它的数据报。

我的问题是，我可以发送 UDP 数据报，以便另一个进程接收响应（使用源地址和端口发送）吗？如果上述过程无法工作，有没有办法在传出数据报上设置源信息而不绑定到该端口？

其他几点：

*   每个进程都应该独立启动，并且能够在不干扰其他进程的情况下重新启动。所以我不认为我可以让一个打开套接字并产生另一个。
*   我不需要从两个进程接收数据包。一个进程只发送，另一个只接收。
*   理想情况下，该解决方案将具有足够的便携性，可以在常见的 Unix 和 Windows 上运行。
*   最后，如果根本不可能，那么我将退回到使用单个进程来执行这两个功能。我对此并没有太大压力，但如果可以的话，我有兴趣这样*做*。:-)

网络代码如下...

**发件人代码**

```
void run(Options *options)
{
    struct sockaddr_in si_me, si_other;
    int s;
    socklen_t slen = sizeof(si_other);
    int reuse = 1;
    struct hostent *he;

    if ((s = socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP)) == -1)
        die("socket");

    if (setsockopt(s, SOL_SOCKET, SO_REUSEADDR, &reuse, sizeof(reuse)) != 0)
        die("setsockopt");

    // Bind to the "listen port", so that outgoing datagrams have the correct source information
    memset((char *) &si_me, 0, sizeof(si_me));
    si_me.sin_family = AF_INET;
    si_me.sin_port = htons(options->listen_port);
    si_me.sin_addr.s_addr = htonl(INADDR_ANY);
    if (bind(s, (struct sockaddr *) &si_me, sizeof(si_me)) != 0)
        die("bind");

    memset((char *) &si_other, 0, sizeof(si_other));
    si_other.sin_family = AF_INET;
    si_other.sin_port = htons(options->service_port);

    if (!(he = gethostbyname2(options->service_host, AF_INET)))
        die("gethostbyname2");

    memmove(&si_other.sin_addr.s_addr, he->h_addr, he->h_length);

    while (1)
    {
        int len;
        char *buf;

        // Create outgoing message in buf
        ...

        if (sendto(s, buf, len, 0, (struct sockaddr *) &si_other, slen) == -1)
            die("sendto");
    }
    close(s);
} 
```

**监听器代码**

```
static void run(Options *options)
{
    struct sockaddr_in si_me, si_other;
    int s;
    socklen_t slen = sizeof(si_other);
    char buf[BUFLEN];
    int reuse = 1;

    if ((s = socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP)) == -1)
        die("socket");

    if (setsockopt(s, SOL_SOCKET, SO_REUSEADDR, &reuse, sizeof(reuse)) != 0)
        die("setsockopt");

    // Bind to the same "listen port" to pick up responses to datagrams sent by Sender
    memset((char *) &si_me, 0, sizeof(si_me));
    si_me.sin_family = AF_INET;
    si_me.sin_port = htons(options->listen_port);
    si_me.sin_addr.s_addr = htonl(INADDR_ANY);
    if (bind(s, (struct sockaddr *) &si_me, sizeof(si_me)) == -1)
        die("bind");

    while (1)
    {
        int nr;

        nr = recvfrom(s, buf, BUFLEN, 0, (struct sockaddr *) &si_other, &slen);
        if (nr == -1)
            die("recvfrom");

        // Process the received message
        ...
    }

    close(s);
} 
```

一个相关的问题是[Using netcat to send a UDP packet without binding](https://stackoverflow.com/questions/11387067/using-netcat-to-send-a-udp-packet-without-binding)，其中一个答案似乎表明应该可以使用 SO_SOCKADDR，但并没有完全解释它在我的情况下是如何工作的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-02T06:42:55.880

> 有没有办法在传出数据报上设置源信息而不绑定到该端口？

没有便携的方式。Linux 的一个解决方案，使用，是[如何在 Linux 中重新绑定 udp 套接字的](https://stackoverflow.com/a/12771043/2413201)`IP_PKTINFO`答案。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-02T23:08:19.593

1：您可以从B上的不同端口发送

```
A binds 12345 sends to B:12345

B:12345 - process 1 - recv 
B:12346 - process 2 - send to A:12345 
```

2：您可以使用原始套接字构造具有虚假返回地址的数据包

第一个解决方案更好

# asp.net-mvc-3 - 添加多个参数时，mvc 路由出现网络 500 错误

> ID：12240425
> 
> 赞同：0
> 
> 时间：2012-09-02T22:57:13.970
> 
> 标签：asp.net-mvc-3, routing

我正在尝试为博客实现一些路由我希望使用多个参数显示 url，但是我不断收到 500 个网络错误的负载，并且当我获得所需的路由时，它似乎开始在不同的地方寻找 jquery 和图像我想。

这里是路线

```
routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
routes.MapRoute(
    "Events",
    "Post/{action}/{id}/{categoryName}/{blogTitle}",
    new { controller = "Post", action = "Detail", id = "", 
          categoryName = "", blogTitle = "" }
); 
```

这是控制器

```
public ActionResult Details(int id, string categoryName, string blogTitle)
{
    SitePosts posts = new SitePosts();
    Post post = posts.GetPost(id);

    ViewBag.IsAdmin = IsAdmin;
    return View(post);
} 
```

这是我在 cshtml 剃须刀助手中使用的链接

```
<a href="@Href("~/Post/Details/" + post.ID + "/" + post.Category.CategoryName + "/" + post.Title)"> 
```

如果我重定向到操作返回 RedirectToAction("Details", "Post", new { id = uid, categoryName = post.Category.CategoryName, blogTitle = UrlEncoder.ToFriendlyUrl(post.Title) });

请，我不知道为什么会这样

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T23:14:43.493

尝试使用 Html ActionLink 帮助程序，而不是自己创建它。此外，您可以调整路由表并省略您传递的值，您不需要使用 = "" 语法在路由中声明这些值，只需将它们留在路由表达式中即可。

**路由表**

```
routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
routes.MapRoute(
    "Events",
    "Post/Detail/{id}/{categoryName}/{blogTitle}",
    new { controller = "Post", action = "Detail" }
); 
```

**查看 - 创建链接**

```
 @Html.ActionLink("DisplayText", "Detail", new{controller="Post", id = post.ID,
 categoryName=post.Category.CategoryName, blogTitle = post.Title}) 
```

# c# - 从未知的xml制作匿名对象

> ID：12240426
> 
> 赞同：4
> 
> 时间：2012-09-02T22:57:33.783
> 
> 标签：c#, xml, anonymous-types

我想尝试从我编写的 XML 阅读器返回一个对象，以处理具有部分未知结构的文件。

这是 XML 的示例。

```
<xml>
  <strings>
    <Home>
      <Index>
        <PreWrapper>
          <Left>
            <Title>Blah</Title>
            <Body>Lorem ipsum dolor sit amet, consec tetuer adipiscing elit. Praesent vestibulum molestie lacus. Aenean nonummy hendrerit mauris. Phasellus porta. Fusce suscipit</Body>
            <LinkText>read more</LinkText>
            <LinkUrl>#</LinkUrl>
          </Left>
          <Center>
            <Title>Exploit your ideas</Title>
            <Body>Lorem ipsum dolor sit amet, consec tetuer adipiscing elit. Praesent vestibulum molestie lacus. Aenean nonummy hendrerit mauris. Phasellus porta. Fusce suscipit</Body>
            <LinkText>read more</LinkText>
            <LinkUrl>#</LinkUrl>
          </Center>
          <Right>
            <Title>Grow your business</Title>
            <Body>Lorem ipsum dolor sit amet, consec tetuer adipiscing elit. Praesent vestibulum molestie lacus. Aenean nonummy hendrerit mauris. Phasellus porta. Fusce suscipit</Body>
            <LinkText>read more</LinkText>
            <LinkUrl>#</LinkUrl>
          </Right>
        </PreWrapper>
      </Index>
    </Home>
  </strings>
  <config>
    <Home>
      <Index>
        <ShowPreWrapper>True</ShowPreWrapper>
      </Index>
    </Home>
  </config>
</xml> 
```

我希望能够与我的读者通话

```
var left = reader.GetObject("xml/strings/Home/Index/PreWrapper/Left"); 
```

我希望它返回一个看起来像的匿名对象（或动态对象，但我不太了解）

```
left.Title
left.Body
left.LinkText
left.LinkUrl 
```

或者

```
var xml = reader.GetObjcet("xml"); 
```

并且能够像

```
xml.strings.Home.Index.... 
```

但我只是不知道如何创建这个对象。这甚至可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-02T23:14:52.377

我认为你可以使用[`ExpandoObject`](http://msdn.microsoft.com/en-us/library/system.dynamic.expandoobject.aspx)类来近似这个，但很可能有更好的方法来做到这一点（比如使用更松散类型的语言、使用字典等）

.NET BCL 中当然没有内置任何内容来执行此操作。

**编辑**：我最近发现了这个，它可能适用于这种情况：[`ElasticObject`](https://github.com/amazedsaint/ElasticObject#readme)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T23:03:02.267

你不能这样做，因为 C# 是一种强类型语言。也许以某种方式使用动态 C# 是可能的，但我对此知之甚少。但作为一种解决方案，您可以将 XML 解析为字典。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T20:35:36.290

如果您确定某个元素或属性名称，则可以使用 LINQ to XML 来完成。对于这个例子，你知道会有`Left`元素。

使用此 LINQ 语句

```
XDocument document = XDocument.Load("c:\\tmp\\test.xml");
var left = from i in document.Descendants("Left") 
           select new { Title = i.Element("Title").Value, 
                        Body = i.Element("Body").Value,
                        LinkText = i.Element("LinkText").Value, 
                        LinkUrl = i.Element("LinkUrl").Value
                      }; 
```

现在您可以这样做，如您的问题中所述：

```
Left.Title
Left.Body
Left.LinkText
Left.LinkUrl 
```

如果你不知道有多少元素是元素的后代`Left`，你可以这样做：

```
XDocument document = XDocument.Load("c:\\tmp\\test.xml");
var left = from i in document.Descendants("Left")
           select new { values = i.Elements().ToList() }; 
```

这给出了一个名为 的列表的可枚举`values`。列表中的每个项目都有一个`Name`and`Value`属性，因此您可以检查它是什么。

打印枚举中第一项的所有值的示例：

```
foreach (var s in left.First().values)
{
    Console.WriteLine(string.Format("{0} has a value of {1}", s.Name, s.Value));            
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T21:25:28.940

一个月前建立了类似的东西，看看并告诉我你的想法：

[对象到 XML 并返回到 Dynamics](https://gist.github.com/esskar/5358547)

（我希望我添加了所有内容）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-14T00:57:31.020

如果您使用 C# 4.0，您可以使用动态类型来实现这一点。

要实现您自己的动态行为，只需编写一个继承[`DynamicObject`](http://msdn.microsoft.com/library/dd487439.aspx)并覆盖[TryGetMember](http://msdn.microsoft.com/library/system.dynamic.dynamicobject.trygetmember.aspx)的类：

```
public sealed class DynamicXml : DynamicObject
{
    private XElement _xml;

    private DynamicXml(XElement xml)
    {
        _xml = xml;
    }

    public override bool TryGetMember(GetMemberBinder binder, out object result)
    {
        XElement xml = _xml.Element(binder.Name);
        if (xml == null)
        {
            result = null;
            return false;
        }

        result = new DynamicXml(xml);

        return true;
    }

    public static implicit operator XElement(DynamicXml xml)
    {
        return xml._xml;
    }

    public static explicit operator DynamicXml(XElement xml)
    {
        return new DynamicXml(xml);
    }
} 
```

我添加了从 to 的隐式转换和从`DynamicXml`to`XElement`的显式`XElement`转换`DynamicXml`。这样您就可以轻松地在动态和静态之间切换：

```
XElement root = XDocument.Load("Test.xml").Element("xml");

dynamic xml = (DynamicXml)root;
XElement indexElement = xml.strings.Home.Index; 
```

* * *

更新：

如果要访问属性，可以将其实现为索引属性：

```
public override bool TryGetIndex(GetIndexBinder binder, object[] indexes, out object result)
{
    if (indexes.Length != 1 || !(indexes[0] is string))
    {
        result = null;
        return false;
    }

    result = _xml.Attribute(indexes[0] as string);

    return result != null;
} 
```

`var attr = xml.strings.Home.Index["id"]`现在返回第一个元素的`id`属性。`Index`

您还可以使用不带参数的方法调用的语法来返回所有元素，而不仅仅是第一个元素：

```
public override bool TryInvokeMember(InvokeMemberBinder binder, object[] args, out object result)
{
    if (args.Length != 0)
    {
        result = null;
        return false;
    }

    result = _xml.Elements(binder.Name);

    return true;
} 
```

`var indexes = xml.strings.Home.Index()`返回一个`IEnumerable<XElement>`. 由于您不能在 LINQ 表达式或 lambda 中使用 dynamic ，因此 return 没有多大意义`IEnumerable<DynamicXml>`。

# git - 使用 git 的 Magento 工作流程

> ID：12240434
> 
> 赞同：3
> 
> 时间：2012-09-02T22:59:33.830
> 
> 标签：git, magento, workflow, dvcs, repository

我一直在使用 cron 作业对**Magento**站点进行编码来处理备份，但是在尝试恢复到该站点的先前版本时它变得有点笨拙。我基本上必须挖掘备份并手动恢复。我已经阅读了 git，我喜欢能够在整个开发周期中记录我的更改并恢复到我通过一些命令更改的特定内容的想法。

目前我在本地仓库中有两个分支（master，develop）。我基本上在开发分支中进行所有开发，并在完成一组特定任务后将所有内容合并到主分支，并将内容推送到我的 gitbucket 存储库以用于备份目的，只是为了养成使用的习惯远程回购。

我是 git 新手，所以这对于我的场景来说是否足够，或者任何人都可以为使用 git 和 Magento 的单人店推荐一个好的工作流程？谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-03T00:36:30.430

我们使用[GitFlow](http://nvie.com/posts/a-successful-git-branching-model/)模型进行 Magento 开发。它与您的相似，但有一个用于临时站点的额外分支。更大的开发任务/修复也在单独的分支中完成，以确保开发始终相当稳定。我们的暂存站点是一个 git repo，其中已签出暂存分支，而生产站点已签出主分支。当我们准备好将更改部署到 staging 时，我们将它们合并到本地机器上的 staging 中，然后推送到中央 git 存储库，然后拉到服务器上。效果很好，但你需要小心 app/etc/local.xml 因为这在每个环境中应该是不同的。您还需要确保媒体和 var 文件夹等内容不会出现在您的 git 存储库中。

[Github](https://github.com/github/gitignore/blob/master/Magento.gitignore)为 Magento 发布了 .gitignore，但我遇到的问题是它排除了所有 Magento 核心文件。您最终会得到一个干净整洁的存储库，其中仅包含您的更改，但不包含可部署的内容。我们使用了一个更简单的 .gitignore，它基本上只排除了 media var 和 app/etc/local.xml。我们通常使用单个远程（例如 Github）并从那里进行部署。

在我们要部署到的服务器上，我们通常具有 shell 访问权限并安装了 git，因此部署只是从普通远程 ssh 进入并运行 git pull（或 fetch & merge）的问题。

我们在 git 中将临时站点维护为一个单独的分支，并以相同的方式部署它们。所以我们的过程看起来像在特性分支中开发并在完成后合并到“开发”中。集成测试完成后，将“开发”（或精选更改）合并到“暂存”并部署。当准备好生产时，将“暂存”（或挑选个别更改）合并到“主”分支。这基本上是[GitFlow](http://nvie.com/posts/a-successful-git-branching-model/)，但“准备发布”分支是长期存在的。

正如评论中链接的[Sonassi 教程](http://www.sonassi.com/knowledge-base/our-magento-git-guide-and-work-flow/#git-create-staging-environment)所指出的，符号链接媒体的问题是，如果您从生产中删除媒体文件，您会在登台中获得断开的链接，反之亦然。我们没有将两者联系起来，而是从 git 更新暂存代码，但另外分别运行暂存和生产站点。如果我们在暂存中需要新数据，出于任何原因，我们将获取生产媒体和数据库的副本并将其恢复到暂存站点。

Gitflow 模型使用版本号作为发布标签，如果您有团队同意发布的版本号，请使用它们。否则，如果你有某种里程碑计划，或者你正在努力的 sprint 系统，并且可以通过这种方式确定一个版本，那也可以。如果一切都失败了，我们将使用部署发生的日期/时间。例如

```
git tag -a deployed-`date +%Y%m%d-%H%M` -m "Code release at `date`" 
```

# android - 安卓Java模拟器。. 警告：数据分区已在使用中。更改不会持续

> ID：12240436
> 
> 赞同：4
> 
> 时间：2012-09-02T22:59:39.430
> 
> 标签：android, eclipse

我正在尝试在 Eclipse 中运行一个 Android 项目（Android 2.3.3，在 Windows 7 64 位机器上），但我遇到了以下错误（在控制台窗口上）。这在几个小时前有效，但现在没有，我认为我没有改变任何重大的东西。非常感谢我能解决这个问题的任何帮助

```
[2012-09-02 17:38:33 - mapviewballoons.Main] Starting incremental Pre Compiler: Checking resource changes.
[2012-09-02 17:38:33 - mapviewballoons.Main] Nothing to pre compile!
[2012-09-02 17:38:33 - samplemap] Refreshing resource folders.
[2012-09-02 17:38:35 - Emulator] WARNING: Data partition already in use. Changes will not persist!
[2012-09-02 17:38:35 - Emulator] WARNING: SD Card image already in use: C:\Users\MACHINEOVA\.android\avd\MAPAPP1.avd/sdcard.img
[2012-09-02 17:38:35 - Emulator] WARNING: Cache partition already in use. Changes will not persist! 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T17:10:32.787

我也面临同样的问题。

我删除了我的模拟器并创建了一个新的模拟器。

它对我来说很好。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-06-27T17:15:29.497

如果之前的答案均无效，请尝试导航到错误消息中提到的文件夹（在您的情况下为 C:\Users\MACHINEOVA.android\avd\MAPAPP1.avd/）并且（在 Windows 上）会有几个文件夹的名称以 .lock 结尾，删除它们并重新启动您的模拟器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-02T23:05:34.437

请尝试检查 AVD 中的“擦除用户数据”并运行它。如果这无助于结束 adb 进程（ alt-ctrl-del --> 启动任务管理器并在进程选项卡中找到 adb.exe 以将其关闭）。重新启动eclipse，然后它应该可以工作了。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-06-07T07:39:28.850

我首先确保没有 adb.exe 进程在任务管理器的进程选项卡中运行，从而解决了同样的问题。

然后确保 AVD（Windows 上的 avd.exe）没有作为 GUI 或从任何终端调用。（avd.exe -avd）。

注意 - 检查“清除用户数据”不会以任何方式帮助解决此问题。同样删除您的 avd 也不是解决此问题的明智解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T11:27:34.770

只需删除您现在拥有的所有已配置的模拟器。使用 Eclipse 工具栏中的 AVD（android 虚拟设备）管理器创建一个新的，尝试使用正常的程序，这对我来说可以正常工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-01T11:50:56.633

杀死 adb 进程，然后重新启动你的 Eclipse

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-09-30T07:16:40.760

删除 .android\avd\your.avd\ 的 *.lock 目录，重启模拟器

这发生在我不正确关闭模拟器后。我没有关闭它，而是关闭了运行模拟器的计算机。直接退出模拟器会有所帮助。

# assembly - 如何从 x86 中的中断处理程序中获取中断号？

> ID：12240437
> 
> 赞同：4
> 
> 时间：2012-09-02T22:59:46.930
> 
> 标签：assembly, x86, interrupt, irq

在 x86 上以保护模式触发中断时，是否可以确定触发的中断号是多少？例如，假设我调用了 int 0xFF。在处理程序中，我可以发现调用了 int 0xFF 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T01:40:00.483

如果您有唯一的中断处理程序（或者，至少有唯一的入口点和序言代码），那么当然，您可以`int 0xFF`区别于`int 0x30`. ISR 地址存储在 中`IDT`，因此，这就是区分开始的地方。

除了独特的 ISR，没有很好的替代方案。这就是为什么...

在 ISR 中，您可以检查调用者的堆栈、查看返回地址并检查返回地址之前的代码，以查看它是否是 2 字节`int n`指令（编码为字节：0xCD，n）或其他内容。`int 3`问题是，还有`into`1 字节指令（分别编码为 0xCC 和 0xCE）。您如何区分 0xCD+0xCC ( `int 0xCC`) 或 0xCD+0xCE ( `int 0xCE`) 以及简单的 0xCC ( `int 3`) 或 0xCE ( `into`)？在 0xCC 或 0xCE 之前可能有任何东西。指令的可变长度不允许我们轻松可靠地向后分析/反汇编代码。

其他触发中断/异常的方式呢，比如`ud2`？还是触发#GP、#PF 的指令？这些可以是任意指令。

此外，您应该记住，异常不是以完全相同的方式处理的。其中一些带有CPU在进入ISR之前在堆栈上保存的额外信息，它是错误代码。其他人没有此错误代码，您的 ISR 需要在执行之前将其删除`iret`。确定异常向量的错误会导致代码崩溃或挂起。

现在，关于硬件中断......您可能能够确定正在服务的硬件中断。有`PIC`( )，其中位设置为 1 (AFAIR) 表示`in-service register`，但是如果您让较高优先级的中断抢占 ISR 处理较低优先级的中断（通过启用 ISR 内部的中断），那么中断识别很快就会变得更加复杂比必要的。`ISR``IRQ`

因此，只需为所有 IRQ、异常和系统调用使用唯一的 ISR。或者使用一个常见的 ISR，但具有多个唯一入口点，每个入口点在堆栈上保存一个唯一编号（=向量编号）。之后的通用代码将提取此数字并执行该中断向量所需的操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-09T12:31:49.607

制作将值推送到堆栈的存根是处理此问题的一种巧妙方法，并且在[James Molloy 教程](https://github.com/cirosantilli/jamesmolloy-kernel-development-tutorials/blob/3e15384b06726951d21cb6a6173020d4765b4799/5_irq/interrupt.asm#L8)中使用：

```
%macro ISR_NOERRCODE 1
  global isr%1
  isr%1:
    cli                         ; Disable interrupts firstly.
    push byte 0                 ; Push a dummy error code.
    push byte %1                ; Push the interrupt number.
    jmp isr_common_stub         ; Go to our common handler code.
%endmacro

%macro ISR_ERRCODE 1
  global isr%1
  isr%1:
    cli                         ; Disable interrupts.
    push byte %1                ; Push the interrupt number
    jmp isr_common_stub
%endmacro

ISR_NOERRCODE 0
ISR_NOERRCODE 1
ISR_NOERRCODE 2
ISR_NOERRCODE 3
ISR_NOERRCODE 4
ISR_NOERRCODE 5
ISR_NOERRCODE 6
ISR_NOERRCODE 7
ISR_ERRCODE   8
ISR_NOERRCODE 9
ISR_ERRCODE   10
ISR_ERRCODE   11
ISR_ERRCODE   12
ISR_ERRCODE   13
ISR_ERRCODE   14
ISR_NOERRCODE 15
/* More entries */ 
```

这也[处理错误代码](https://stackoverflow.com/questions/10581224/why-does-iret-from-a-page-fault-handler-generate-interrupt-13-general-protectio/33398064#33398064)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T23:28:48.537

我不是中断处理程序方面的专家，但它们必须在某个地方有一个返回地址，以便原始代码可以恢复执行。如果您可以使用旧地址，那么您可以检查以前的地址，该地址可能包含中断号。

# clojure - 项目级 Leiningen 插件

> ID：12240439
> 
> 赞同：11
> 
> 时间：2012-09-02T22:59:58.733
> 
> 标签：clojure, leiningen

在 Leiningen 版本 1.xx 中，我可以`lein foo`通过在该项目中添加以下内容来定义仅在单个项目中有效的任务`project.clj`：

```
(defproject tester "0.1.0-SNAPSHOT"
  :description "FIXME: write description"
  :url "http://example.com/FIXME"
  :license {:name "Eclipse Public License"
            :url "http://www.eclipse.org/legal/epl-v10.html"}
  :dependencies [[org.clojure/clojure "1.4.0"]])

;; Create a task, "foo"

(ns leiningen.foo
  (:require (leiningen [uberjar :as uberjar])))

(defn foo [project & args]
  (println "Do something here first, then make the uberjar.")
  (uberjar/uberjar project)) 
```

您可以在此处获得有关此的更多信息：

[http://nakkaya.com/2010/02/25/writing-leiningen-plugins-101/](http://nakkaya.com/2010/02/25/writing-leiningen-plugins-101/)

在 2.xx 中，我无法再执行此操作（即，我得到了`'foo' is not a task.` 似乎方式，对我来说必须为此任务启动一个单独的项目有点过分了。 **是否仍然可以在 project.clj 中定义一个任务对于 leiningen 2.xx？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T23:49:00.447

简短的回答是“否”，但定义项目级任务仍然相当容易：添加`:eval-in-leiningen true`到您的`defproject`定义并将任务定义移动到`src/leiningen/foo.clj`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-07T02:28:11.077

您可以通过使用`.lein-classpath`指向`src`包含任务之外的目录来执行此操作。例如，如果您有插件`src/leiningen/foo.clj`，您可以在项目根目录中执行以下操作：

```
$ mkdir tasks
$ mv src/leiningen tasks/
$ echo tasks > .lein-classpath 
```

您可能要避免的原因`:eval-in-leiningen true`是，当您尝试为`main`类进行 AOT 编译时，它会出现一些有趣的行为。具体来说，你会得到：

```
Compilation failed: java.io.IOException: No such file or directory, compiling:(testproj/core.clj:1) 
```

当尝试编译/运行一个简单的测试示例时。更多信息请访问：

[https://github.com/technomancy/leiningen/issues/769](https://github.com/technomancy/leiningen/issues/769)

# javascript - 使用 jquery 或 javascript 延迟无限滚动

> ID：12240444
> 
> 赞同：0
> 
> 时间：2012-09-02T23:00:47.537
> 
> 标签：javascript, jquery, infinite-scroll

我有一个 jquery 脚本可以正确加载新页面以进行无限滚动设置。我想做的是拥有它，这样当您说距离底部 300 像素时，它会加载更多。我现在可以做到这一点，但不幸的是，滚动注册了多次，而 ajax 加载了页面的其余部分。我试过 setTimeout 无济于事。

```
 (function(){

            //inner functions will be aware of this
            var currentPage = 1;

                $(window).scroll(function() {

                if($(window).scrollTop() + $(window).height() > $(document).height() - 300) {

                    $.ajax({
                        type: "GET",
                        url: "posts/page/" + currentPage,
                        data: "",
                        success: function(results){
                            $(".container").append(results).masonry('reload');
                        }
                    })
                    setTimeout(currentPage++,3000);

                }

            });

        })(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-02T23:05:26.740

如果前一个尚未完成，则通过此修改，您不会执行另一个 ajax 请求：

```
(function(){

    //inner functions will be aware of this
    var currentPage = 1,
        currentXHR;

        $(window).scroll(function() {

        if($(window).scrollTop() + $(window).height() > $(document).height() - 300) {

            if (currentXHR) {
                return;
            }

            currentXHR = $.ajax({
                type: "GET",
                url: "posts/page/" + currentPage++,
                data: "",
                success: function(results){
                    $(".container").append(results).masonry('reload');
                },
                complete: function() {
                    currentXHR = null;
                }
            })

        }

    });

})(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T23:06:02.810

这里有一个优秀的 RailsCast [（](http://railscasts.com/episodes/114-endless-page-revised)如果你不在 Ruby 中，别担心，反正你只是在获取 JSON 数据。）

# php - 如何从给定用户和给定标签中获取所有推文？

> ID：12240447
> 
> 赞同：1
> 
> 时间：2012-09-02T23:00:57.717
> 
> 标签：php, javascript, twitter

我需要从包含某个主题标签的特定用户那里获取/输出所有推文。搜索 API 有效，但只能让我获取最新的此类推文，而且我需要所有这些推文。这可以使用 PHP 或 JavaScript 完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T23:25:01.283

据我所知，Twitter 从过去 7 天左右返回推文。topsy.com 和 analytics.topsy.com 等其他服务可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T23:11:30.643

您需要意识到的第一件事是 twitter 的服务器是否允许您提取所有内容？

这是一些信息。 [https://dev.twitter.com/docs/using-search](https://dev.twitter.com/docs/using-search)

# c# - 如何使用 Linq、Lambda 和 EF 进行更新

> ID：12240452
> 
> 赞同：0
> 
> 时间：2012-09-02T23:02:24.580
> 
> 标签：c#, linq, entity-framework, lambda

我得到了用于用户创建的代码。

```
 public static void CreateUser(User user)
    {

            Save<User>(u => u.AddObject(user));

     }

    Save<T>(Action<ObjectSet<T>> func)
       where T : class
    {

        ...

        func(entitySet);

        entitiesContext.SaveChanges();
    } 
```

现在我正在尝试编写一个更新方法，但它无法编译 `u = user`

```
public static void UpdateUser(User user)
{
        Save<User>(u => u = user);
} 
```

如何更新对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T00:36:29.743

如果实体与上下文分离，您可以按如下方式对其进行更新。

```
public static void UpdateUser(User user)
{
      Save<User>(u => { 
         u.Attach(user); 
         u.Context.ObjectStateManager
              .ChangeObjectState(user, System.Data.EntityState.Modified);
         });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T23:41:47.210

如果你想用 linq 来做，那么你可以实现应该有 ref 参数的自定义泛型委托。例如。

```
public delegate void MyDelegate<T>(ref T x);

 public static void CreateUser(User user)
 {
        Save<User>((ref User u) => u = user));
 }

Save<T>(MyDelegate<ObjectSet<T>> func)
   where T : class
{

    ...

    func(entitySet);

    entitiesContext.SaveChanges();
} 
```

# c++ - 从文本文件 C++ 中跳过非整数

> ID：12240453
> 
> 赞同：1
> 
> 时间：2012-09-02T23:02:52.877
> 
> 标签：c++

我有一个程序从文本文件中读取整数并跳过非整数和奇怪的符号。然后文本文件看起来像：

```
# Matrix A   // this line should be skipped because it contains # symbol
1 1 2
1 1$ 2.1      // this line should be skipped because it contains 2.1 and $
3 4 5 
```

我必须打印出没有奇怪符号和非整数行的矩阵。那就是输出应该是：

```
1 1 2
3 4 5 
```

我的代码

```
ifstream matrixAFile("a.txt", ios::in); // open file a.txt
if (!matrixAFile)
{
      cerr << "Error: File could not be opened !!!" << endl;
      exit(1);
}

int i, j, k;
while (matrixAFile >> i >> j >> k)
{
      cout << i << ' ' << j << ' ' << k;
      cout << endl;
} 
```

但是当它获得第一个 # 符号时它会失败。有人帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T23:22:24.497

如果您设置为每行三个整数，我建议这种模式：

```
#include <fstream>
#include <sstream>
#include <string>

std::ifstream infile("matrix.txt");

for (std::string line; std::getline(infile, line); )
{
    int a, b, c;

    if (!(std::istringstream(line) >> a >> b >> c))
    {
        std::cerr << "Skipping unparsable line '" << line << "'\n";
        continue;
    }

    std::cout << a << ' ' << b << ' ' << c << std::endl;
} 
```

如果每行的数字数量是可变的，您可以使用这样的跳过条件：

```
line.find_first_not_of(" 0123456789") != std::string::npos 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T23:10:21.937

您的问题出在此代码上。

```
int i, j, k;
while (matrixAFile >> i >> j >> k) 
```

**分配**是*“找出该行是否包含整数*”

 *但是您的**代码**说*“我已经知道该行包含整数”*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T23:06:53.143

由于这是一项任务，我没有给出完整的答案。

```
Read the data line by line to a string(call it str),
Split str into substrings,
In each substring, check if it's convertible to integer value. 
```

另一个技巧是读取一行，然后检查每个字符是否在 0-9 之间。如果您不需要考虑负数，它会起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-02T23:11:15.853

当然，这在`#`字符处失败： The `#`is not an integer，因此，将其作为整数读取失败。你可以做的是尝试读取三个整数。如果这失败并且您还没有达到 EOF（即`matrixAFile.eof()`yield `false`，您可以`clear()`使用错误标志，并且`ignore()`所有内容都可以换行。错误恢复看起来像这样：

```
matrixAFile.clear();
matrixAFile.ignore(std::numeric_limits<std::streamsize>::max(), '\n'); 
```

请注意，如果您失败了，您需要退出，因为`eof()`is `true`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-03T00:09:14.037

我想我一次只读一行作为字符串。只要字符串仅包含数字、空格和 (可能) ，我就会将其复制到输出中`-`。*

# c++ - inotify 多次错误地通知新文件

> ID：12240456
> 
> 赞同：2
> 
> 时间：2012-09-02T23:03:16.967
> 
> 标签：c++, c, linux, boost-thread, inotify

使用 inotify 通过在目录上添加监视来监视目录中创建的任何新文件

```
 fd = inotify_init();
    wd = inotify_add_watch(fd, "filename_with_path", IN_CLOSE_WRITE);
    inotify_add_watch(fd, directory_name, IN_CLOSE_WRITE);

    const int event_size = sizeof(struct inotify_event);
    const int buf_len = 1024 * (event_size + FILENAME_MAX);
    while(true) {
        char buf[buf_len];
        int no_of_events, count = 0;
        no_of_events = read(fd, buf, buf_len);
        while(count < no_of_events) {
            struct inotify_event *event = (struct inotify_event *) &buf[count];
            if (event->len) {
                if (event->mask & IN_CLOSE_WRITE) {
                    if (!(event->mask & IN_ISDIR)) {
                         //It's here multiple times 
                    }
                }
            }
            count += event_size + event->len;
        } 
```

当我将文件 scp 到目录时，它会无限循环。这段代码有什么问题？它也显示相同的事件名称和事件掩码。因此，它表明该事件是相同的，无限次的。

**没有中断语句**。如果我找到一个事件，我只需打印它并继续等待 read() 上的另一个事件，这应该是一个阻塞调用。相反，它开始无限循环。这意味着， read 不会阻止它，而是无限地为一个文件返回相同的值。

**整个操作在单独的 boost::thread 上运行。**

**编辑：** 对不起。我得到的错误不是因为 inotify 而是因为 sqlite 一开始很难检测到。我想我在这里开枪了。经过进一步调查，我确实发现 inotify 运行良好。但错误实际上来自 sqlite 命令：`ATTACH`

该命令不是应有的现成命令。它正在将一些元数据写入文件。因此 inotify 一次又一次地收到通知。由于它们发生得如此之快，它搞砸了应用程序。我最终不得不分解代码以了解原因。

谢谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T13:09:23.733

我看不出您的代码有任何问题...我运行的基本相同，并且运行良好。我想知道测试是否有问题，或者代码的某些部分被省略了。如果您不介意，让我们看看我们是否可以消除任何歧义。

你能试试这个（我知道这几乎是一样的，但只是幽默我），让我知道确切的测试结果？

1）将以下代码放入test.c

```
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <string.h>
#include <stdio.h>
#include <errno.h>
#include <sys/inotify.h>

int main (int argc, char *argv[])
{
   char target[FILENAME_MAX];
   int result;
   int fd;
   int wd;   /* watch descriptor */
   const int event_size = sizeof(struct inotify_event);
   const int buf_len = 1024 * (event_size + FILENAME_MAX);

   strcpy (target, ".");

   fd = inotify_init();
   if (fd < 0) {
      printf ("Error: %s\n", strerror(errno));
      return 1;
   }

   wd = inotify_add_watch (fd, target, IN_CLOSE_WRITE);
   if (wd < 0) {
      printf ("Error: %s\n", strerror(errno));
      return 1;
   }

   while (1) {
     char buff[buf_len];
     int no_of_events, count = 0;

     no_of_events = read (fd, buff, buf_len);

     while (count < no_of_events) {
       struct inotify_event *event = (struct inotify_event *)&buff[count];

       if (event->len){
         if (event->mask & IN_CLOSE_WRITE)
           if(!(event->mask & IN_ISDIR)){
              printf("%s opened for writing was closed\n", target);
              fflush(stdout);
           }
       }
       count += event_size + event->len;
     }
   }

   return 0;
} 
```

2）用gcc编译：

```
gcc test.c 
```

3）在一个窗口中启动它：

```
./a.out 
```

4）在同一目录的第二个窗口中试试这个：

```
echo "hi" > blah.txt 
```

让我知道每次写入文件时是否可以正常显示输出并且不会像您的代码那样循环。如果是这样，那么您在代码中省略了一些重要的东西。如果不是，那么系统中存在一些差异。

很抱歉把它放在“答案”部分，但评论太多了。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-05T17:00:39.630

我的猜测是 read 返回 -1 并且由于您从未尝试修复错误，因此在下一次调用 read 时会出现另一个错误，该错误也返回 -1。

# php - PHP date() 不起作用？

> ID：12240459
> 
> 赞同：0
> 
> 时间：2012-09-02T23:05:15.390
> 
> 标签：php, date, time

我正在尝试将 1 分钟添加到当前时间：

```
echo date("Y-m-d H:m:s", strtotime("+60 seconds"));
echo '<br />';
echo date("Y-m-d H:m:s"); 
```

输出在这两种情况下：

```
2012-09-02 17:09:02
2012-09-02 17:09:02 
```

这显然是错误的（在这两种情况下 - 当前时间在我的国家是凌晨 1 点）。

我做错了什么？我已将值保存到日期时间列中`2012-09-02 17:09:38`，现在我尝试将 60 秒添加到当前时间，然后如果存储的日期时间和当前日期时间之间的差异小于 60 秒，那么我想在数据库中插入另一行.. .

但问题是，该`date()`函数显示奇怪的输出。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-02T23:08:53.157

```
("Y-m-d H:i:s"); 
```

不是

```
("Y-m-d H:m:s"); 
```

m 是月份，也不能是分钟

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-02T23:09:39.137

`date("m")`将以数字形式显示当前*月份*。所以这就是为什么你的 +60 秒不起作用的原因。采用`date("Y-m-d H:i:s")`

为什么当前时间是错误的可能有几个原因。可能是您服务器上的时间或时区设置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T23:23:41.597

就时区而言，这可能会对您有所帮助：[date_default_timezone_set](http://www.php.net/manual/en/function.date-default-timezone-set.php)

# .net - 控制台.NET中的SetInterval（timespan，func）？

> ID：12240463
> 
> 赞同：0
> 
> 时间：2012-09-02T23:06:21.503
> 
> 标签：.net, multithreading

我有一个 .NET 控制台应用程序，每 5 分钟当我的代码阻塞时（console.readline()）我想在旁边运行一个任务。我还有其他线程，如果它们被阻塞，可能需要在 X 分钟后运行任务。`SetInterval(timespan, func)`.NET中有类似的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T23:11:06.497

当然有。 [System.Timers.Timer](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)或[System.Threading.Timer](http://msdn.microsoft.com/en-us/library/system.threading.timer.aspx)，具体取决于您的需要。有关各种计时器的比较，请参阅[此页面](http://msdn.microsoft.com/en-us/magazine/cc164015.aspx)。

正如史蒂夫在评论中提到的那样，唯一明显不合适的是 System.Windows.Forms.Timer （因为它需要一个消息泵，而您（通常）在控制台应用程序中没有）。

# android - 使用 2 个应用程序 android

> ID：12240464
> 
> 赞同：0
> 
> 时间：2012-09-02T23:06:29.070
> 
> 标签：android, android-intent, qr-code, zxing

我正在使用android，我有一个问题。如果我正在做一个需要另一个应用程序的应用程序，我该怎么办。例如，我的一个选项需要一个读取代码 QR (2D) 的应用程序，我该如何同时使用这两者？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T02:19:52.900

您应该通过意图进行整合。有关详细信息，请参见此处：[https](https://code.google.com/p/zxing/wiki/ScanningViaIntent) ://code.google.com/p/zxing/wiki/ScanningViaIntent 。

通过这种方式，您无需尝试将条形码扫描仪应用程序复制到您自己的应用程序中，我认为您会发现这有些困难（更不用说您不会负责尝试维护一个不是你的操作系统的新版本发布）。您还将为您的用户节省*另一个*条形码扫描仪应用程序副本的空间。

通过意图集成是条形码扫描仪的作者打算让您将其与您自己的应用程序一起使用的方式。

# wordpress - 如何将 php 文件添加到 wordpress 主题添加标准文件？

> ID：12240471
> 
> 赞同：0
> 
> 时间：2012-09-02T23:08:14.453
> 
> 标签：wordpress, wordpress-theming

Wordpress 主题有标准文件，如 header.php、footer.php、index.php、functions.php、style.css、... 如何将 php 文件添加到 wordpress 主题添加标准文件？例如，我想添加一个 news.php 来显示其中的特定帖子，请帮帮我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T23:21:37.840

只需添加一个新文件（例如`news.php`），并将模板注释放在最开始：

```
<?php
/*
Template Name: News Template
*/ 
```

然后，转到您的 Wordpress 后端，创建一个新页面，然后选择您创建的模板：

![在此处输入图像描述](../Images/2e59adeec81ba171ac1a0cb01f96ebf2.png)

# java - 为什么在 this 方法中添加 If 语句会大大减慢它的速度？

> ID：12240472
> 
> 赞同：13
> 
> 时间：2012-09-02T23:08:14.967
> 
> 标签：java, android, performance

[我在回答另一个问题](https://stackoverflow.com/questions/12233594/faster-way-to-apply-alpha-to-a-jpeg-in-an-android-app)时遇到了这个问题。我试图诊断哪些代码更改对速度的影响更大。[我在 for 循环中使用了一个布尔标志来在使用辅助方法构造Color](http://developer.android.com/reference/android/graphics/Color.html)之间切换。

有趣的行为是，当我决定哪一个更快并删除时，如果代码的速度放大了 10 倍。之前用了 140 毫秒，之后只用了 13 毫秒。我应该只从循环中删除大约 7 个计算中的一个。为什么速度有如此大幅度的提升？

~~**慢代码：（**`helperMethods`当为假时在 141 毫秒内运行~~） *见编辑 2

```
public static void applyAlphaGetPixels(Bitmap b, Bitmap bAlpha, boolean helperMethods) {
    int w = b.getWidth();
    int h = b.getHeight();
    int[] colorPixels = new int[w*h];
    int[] alphaPixels = new int[w*h];
    b.getPixels(colorPixels, 0, w, 0, 0, w, h);
    bAlpha.getPixels(alphaPixels, 0, w, 0, 0, w, h);
    for(int j = 0; j < colorPixels.length;j++){
        if(helperMethods){
            colorPixels[j] = Color.argb(Color.alpha(alphaPixels[j]), Color.red(colorPixels[j]), Color.green(colorPixels[j]), Color.blue(colorPixels[j]));
        } else colorPixels[j] = alphaPixels[j] | (0x00FFFFFF & colorPixels[j]);
    }
    b.setPixels(colorPixels, 0, w, 0, 0, w, h);
} 
```

**快速代码：（**在 13 毫秒内运行）

```
public static void applyAlphaGetPixels(Bitmap b, Bitmap bAlpha) {
    int w = b.getWidth();
    int h = b.getHeight();
    int[] colorPixels = new int[w*h];
    int[] alphaPixels = new int[w*h];
    b.getPixels(colorPixels, 0, w, 0, 0, w, h);
    bAlpha.getPixels(alphaPixels, 0, w, 0, 0, w, h);
    for(int j = 0; j < colorPixels.length;j++){
        colorPixels[j] = alphaPixels[j] | (0x00FFFFFF & colorPixels[j]);
    }
    b.setPixels(colorPixels, 0, w, 0, 0, w, h);
} 
```

**编辑：**似乎问题不在于 if 在循环内。如果我提升`if`循环的外部。代码运行速度稍快，但仍以 131 毫秒的速度运行：

```
public static void applyAlphaGetPixels(Bitmap b, Bitmap bAlpha, boolean helperMethods) {
    int w = b.getWidth();
    int h = b.getHeight();
    int[] colorPixels = new int[w*h];
    int[] alphaPixels = new int[w*h];
    b.getPixels(colorPixels, 0, w, 0, 0, w, h);
    bAlpha.getPixels(alphaPixels, 0, w, 0, 0, w, h);
    if (helperMethods) {
        for (int j = 0; j < colorPixels.length;j++) {
            colorPixels[j] = Color.argb(Color.alpha(alphaPixels[j]),
                                        Color.red(colorPixels[j]),
                                        Color.green(colorPixels[j]),
                                        Color.blue(colorPixels[j]));
        }
    } else {
        for (int j = 0; j < colorPixels.length;j++) {
             colorPixels[j] = alphaPixels[j] | (0x00FFFFFF & colorPixels[j]);
        }
    }

    b.setPixels(colorPixels, 0, w, 0, 0, w, h);
} 
```

**编辑2：**我很笨。真的真的很笨。在调用堆栈的前面，我使用了另一个布尔标志在使用此方法和使用另一个使用`getPixel`而不是`getPixels`. 我为所有具有该`helperMethod`参数的调用设置了错误的标志。`helperMethod`当我在没有正确的情况下对版本进行新调用时。性能提升是因为`getPixels`不是 if 语句。

**实际慢代码：**

```
public static void applyAlphaGetPixel(Bitmap b, Bitmap bAlpha, boolean helperMethods) {
    int w = b.getWidth();
    int h = b.getHeight();
    for(int y=0; y < h; ++y) {
        for(int x=0; x < w; ++x) {
            int pixel = b.getPixel(x,y);
            int finalPixel;
            if(helperMethods){
                finalPixel = Color.argb(Color.alpha(bAlpha.getPixel(x,y)), Color.red(pixel), Color.green(pixel), Color.blue(pixel));
            } else{
                finalPixel = bAlpha.getPixel(x,y) | (0x00FFFFFF & pixel);
            }
            b.setPixel(x,y,finalPixel);
        }
    }
} 
```

*注意：所有速度均为 100 次运行的平均值。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T23:21:24.033

尝试将条件提升到循环之外：

```
if (helperMethods) {
    for (int j = 0; j < colorPixels.length;j++) {
        colorPixels[j] = Color.argb(Color.alpha(alphaPixels[j]),
                                    Color.red(colorPixels[j]),
                                    Color.green(colorPixels[j]),
                                    Color.blue(colorPixels[j]));
    }
} else {
    for (int j = 0; j < colorPixels.length;j++) {
         colorPixels[j] = alphaPixels[j] | (0x00FFFFFF & colorPixels[j]);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T23:17:50.747

在“快速代码”中，您永远不会运行该语句

```
colorPixels[j] = Color.argb(Color.alpha(alphaPixels[j]), Color.red(colorPixels[j]), Color.green(colorPixels[j]), Color.blue(colorPixels[j])); 
```

但是在“慢代码”中，如果布尔值设置为 true，则至少在您运行这个使时间更长的附加语句时。如果您的条件始终为假，则在循环的每次迭代中检查 if 语句大约 7 次。尝试将 if 放在循环之外。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-03T11:53:10.523

可能是您的分析代码让您感到困惑。尝试隔离您要分析的代码部分并仅测量该部分，避免在您的案例中创建位图等 GCable 操作。

如果我用

```
testing.loadDrawable(this, false, true, false) 
```

它运行缓慢。但是如果我用

```
testing.loadDrawable(this, true, true, false) 
```

这是一个类似（更糟）的数字。所以 useGetPixels 让一切变得不同。我猜想将位图数据放入本地缓冲区并稍后设置结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T13:18:17.597

在您的快速代码中，您根本不使用 Color 类。我假设这个类的初始化需要一些时间，它有很多静态方法和静态代码。

您可以尝试执行以下操作：在进行测试之前确保 Color 类已完全加载并初始化（您可以在调用 applyAlphaGetPixels() 方法之前从 Color 类中调用任何静态方法）。然后运行您的测试并比较结果。

# r - EC2 启动脚本卡在 wget 上

> ID：12240477
> 
> 赞同：2
> 
> 时间：2012-09-02T23:09:32.820
> 
> 标签：r, bash, shell, amazon-ec2, wget

我有以下脚本用于一些数字运算

```
#!/bin/bash
sudo apt-get update -y
sudo apt-get upgrade -y
sudo apt-get install -y r-base r-base-dev htop s3cmd p7zip-full
wget https://s3.amazonaws.com/#######/###.7z
7z e ###.7z
sudo R CMD BATCH --slave --no-timing --vanilla "--args 0 1 100 200 500 2" SOME-ROUTINE.R
s3cmd put *.results s3://#########/ 
```

在 EC2 上。我将脚本作为文件上传到 Launch Instance->Instance Details->User Data

机器启动、更新和升级，但随后它不执行 wget 并且不下载文件。当我在实例中进行 SSH 并运行完全相同的命令时，该过程将毫无问题地完成。

任何想法为什么 wget 不起作用？

还有其他选择吗？

欧共体

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T06:17:20.980

总是有点猜测，但这是我调试的方法：

我的第一个建议是检查 S3 URL 中的特殊字符。这可能会导致 wget 调用失败。

`-O`其次，我将使用该选项为 wget 提供一个明确的输出路径。在编辑命令时，您还可以添加`-o`输出日志信息。

最后一步是检查您对 S3 存储桶的访问权限。也许您可以尝试将文件放在另一个网络空间中以查看该命令是否执行。

# vb.net - 在 VB 2010 中运行 AutoIt3 脚本

> ID：12240480
> 
> 赞同：0
> 
> 时间：2012-09-02T23:09:44.693
> 
> 标签：vb.net, scripting, automation, autoit

我对此很陌生，所以如果我问一个愚蠢的问题，请原谅我。

我在 2006 年创建了一个计算井底压力的应用程序。基本上，它接受用户输入，调用名为 REFPROP 的辅助应用程序，并将 REFPROP 结果传递回我的应用程序以继续计算。使用 AutoIt，我创建了一个带有用户输入的临时文件和另一个带有 REFPROP 输出的临时文件。由于 REFPROP 是一个 cmd 提示应用程序，因此该过程相当简单。

现在，我合并到我的应用程序中的 REFPROP 已经过时了，新版本的 GUI 需要的不仅仅是 cmd 提示。我想再次使用 AutoIt3，但这次是为用户输入创建一个临时 Excel 文件，运行 REFPROP，创建一个临时输出文件，然后返回到我的应用程序。

我有点迷茫，因为我现在无法在我的 VB 2010 环境中运行 AutoIt 脚本。我目前的计划是创建和编译 AutoIt 脚本以使用用户输入打开和运行 REFPROP，但我不确定该怎么做……有没有人知道最好的方法？

对此的任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T00:02:37.610

这实际上很容易。查看 AutoIt 脚本论坛和手册中的参考资料。从处理录音开始，然后从那里开始。

使用`regsvr32 AutoItX3.dll`并注册 DLL。

然后在解决方案中添加项目引用

然后运行一些这样的代码（这是在 C# 中，但概念是一样的）

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using AutoItX3Lib;

namespace ConsoleApplication2 {
    class Program {
        static void Main(string[] args) {
            AutoItX3Class au3 = new AutoItX3Class();
            while( true ) {
                Console.WriteLine("({0}, {1})" , au3.MouseGetPosX() , au3.MouseGetPosY());

            }
        }
    }
} 
```

# javascript - Javascript：历史记录未加载页面

> ID：12240495
> 
> 赞同：0
> 
> 时间：2012-09-02T23:12:30.613
> 
> 标签：javascript, google-chrome, back-button, browser-history

我有一个在 div 中加载新 html 文件的菜单。加载是通过附加到菜单`<a>`标签的点击事件完成的。加载效果很好，我通过构造带有哈希标记的新 href 将新加载添加到历史记录中。

但是当我使用后退按钮时，浏览器地址字段中的 URL 更新正确，但页面从未加载。如果我关注地址字段并按回车键，它会加载。

这是位于 mypage.html 标头中的 javascript。

```
<script type="text/javascript">
  $(document).ready(function() {

    // replace menu link click
    $(".right-menu a").live('click', function(ev) {
      ev.preventDefault();
      ev.stopPropagation();
      window.location.href = $(this).attr('href');
      $("#content-right").load('mypage'+window.location.hash.substring(1)+'.html');
      return false;
    });

    // If page loads, load the content area according to the hash.
    var hrtag = window.location.hash.substring(1);
    if(hrtag=="")
      hrtag='about';
    $("#content-right").load('mypage'+hrtag+'.html');
    window.location.hash = hrtag;
  });
</script> 
```

这是菜单

```
<ul class="right-menu">
  <li><a href="mypage.html#about">About</a></li>
  <li><a href="mypage.html#screens">Screens</a></li>
  <li><a href="mypage.html#license">License</a></li>
  <li><a href="mypage.html#download">Download</a></li>
  <li><a href="mypage.html#donate">Donate</a></li>
</ul> 
```

如果我将页面加载为`mypage.html`，则 javascript 将附加哈希`#about`并加载 div id`"content-right"``mypageabout.html`

如果我单击菜单，例如*download*，它将加载 div `"content-right"`id`mypagedownload.html`

在这两种情况下，`window.location`都会将页面设置为*哈希*版本，`mypage.html#about`并将`mypage.html#download`它们注册到历史记录中。

如果我按以下顺序单击菜单；*license* , *about* ,*屏幕*然后点击浏览器的返回按钮，地址栏将显示；`mypage.html#about`，`mypage.html#license`但它不会加载页面！？！

这些 URL 显然在历史记录中，但它们不会加载。有什么线索可以说明这里可能有什么问题吗？

// 谢谢

**编辑 - 解决方案**

感谢 Andres Gallo 的文章，我想出了这个解决方案：

```
<script type="text/javascript">
  $(document).ready(function() {

    // Make sure the page always load #about
    LoadIDWithURL('#content-right','myPageAbout.html');

    window.addEventListener('hashchange',function() {

      if (window.location.hash != "") {
        // We have a hash, use it!
        LoadIDWithURL('#content-right','MyPage'+window.location.hash.substring(1)+'.html');
      } else {
        // We do not have a hash, force page reload!
        window.history.go(0);
      }

    });

  });

  // Load the targetID with the URL loadURL.
  function LoadIDWithURL(targetID,loadURL) {
    $(targetID).load(loadURL);
  }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T23:15:56.890

这是在仅散列不同的页面之间导航时的正常行为。你有两个选择：

1.  使用[hashchange](https://developer.mozilla.org/en-US/docs/Mozilla_event_reference/hashchange)事件或它的模拟来检测用户何时通过向后或向前导航更改哈希并适当地更新页面
2.  使用 HTML5[历史](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history)API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T23:16:15.283

你可以试试[hashchange](http://benalman.com/news/2010/07/jquery-hashchange-event-v13/)

```
$(function(){
    $(window).hashchange(function(){
       // some event
    })
}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T23:19:47.273

我写了一篇关于这个确切主题的非常详细的文章。它解释了如何准确地构建您正在尝试做的事情。

此外，我的文章还解释了如何在链接中传递参数以让 javascript 做一些特殊的事情

这是文章的链接[http://andresgallo.com/2012/06/08/ajaxifying-the-web-the-easy-way/](http://andresgallo.com/2012/06/08/ajaxifying-the-web-the-easy-way/)

最好的方法是将您的功能附加到您的 hashchanges 而不是单击事件。这允许对历史记录的任何更改来利用您的 javascript 功能。

# asp.net - 一个 IIS 应用程序中的多个 Web/WCF 项目

> ID：12240497
> 
> 赞同：2
> 
> 时间：2012-09-02T23:13:16.617
> 
> 标签：asp.net, wcf, iis, web-config, iis-7.5

用于 ASP.NET 或 WCF 的 Visual Studio 项目通常与 IIS 应用程序一对一地分配。但是，例如，如果我希望将两个 WCF 项目托管在 IIS 的同一个 appdomain 中，该怎么办？这意味着我将有两个 Visual Studio WCF 项目分配给一个 IIS 应用程序。

我开始尝试这个，并遇到了[第一条错误消息](http://scottonwriting.net/sowblog/archive/2010/02/17/163375.aspx)。我已经[看到](https://stackoverflow.com/a/5278089/284758)建议如何“不要这样做”的评论。但就我而言，我实际上*想*这样做。我不介意这是否意味着 IIS 应用程序具有三个 Web 配置（一个位于 IIS 应用程序的根目录，另外两个位于它包含的“项目”文件夹中），或者这是否意味着 IIS 应用程序只有一个 Web 配置.

因此，对于我的两个 Visual Studio WCF 项目，我以多种方式调整了 web.config 内容：

*   一个 IIS 应用程序，指向找到我的 Visual Studio 解决方案文件的物理目录。这两个 WCF 项目分别位于两个子文件夹中
*   一个 IIS 应用程序，指向任意物理位置，包含两个虚拟目录，分别指向两个 WCF 项目物理目录。我在这里有三个 Web 配置文件：一个用于 IIS 应用程序根目录，另外两个在虚拟目录中。

上面第二个选项的变体几乎奏效了。我收到的最后一条错误消息是：

> > 找不到类型“Sample.ServiceGroupAlpha.ServiceAlpha”，作为 ServiceHost 指令中的服务属性值提供，或在配置元素 system.serviceModel/serviceHostingEnvironment/serviceActivations 中提供。
> > **说明**：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> > **异常详细信息**：System.InvalidOperationException：类型“Sample.ServiceGroupAlpha.ServiceAlpha”，作为 ServiceHost 指令中的服务属性值提供，或在配置元素 system.serviceModel/serviceHostingEnvironment/serviceActivations 中提供。

这促使我查看 ServiceHost 指令，并（狡猾地）修改它：

```
<%@ ServiceHost Language="C#" Debug="true" Service="Sample.ServiceGroupAlpha.ServiceAlpha" CodeBehind="AlphaServices/ServiceAlpha.svc.cs" %> 
```

...注意该`CodeBehind`属性有一个我添加的相对路径（虚拟目录的名称）。好吧，这没有用，但我不禁认为我已经接近完成这项工作。我想知道是否有人有修复，或者可以传递“正确”的方式来完成这整个事情。

最终的答案可能是，在同一个 IIS 应用程序中没有两个单独的 Web/WCF 项目。如果是这样的话，我会感到惊讶。另一个答案可能是“将两个 WCF 项目组合成一个 Visual Studio 项目/二进制文件”。请假设我也不想要那个答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T18:42:57.230

专注于WCF，此时我认为最接近的答案是使用并且有多个VS [“WCF服务库”项目](http://www.codeproject.com/Articles/154870/WCF-Service-Library-A-Good-Approach-for-WCF-Servic)都参与一个VS“WCF服务应用程序”。

如果我在问题中概述的方法是“按原样”工作，我怀疑上述链接可能再次有答案。而不是这个...

```
<%@ ServiceHost Language="C#" Debug="true" Service="WcfWebService.Service1" 
    CodeBehind="Service1.svc.cs" %> 
```

我会用这样的东西......

```
<%@ ServiceHost Language="C#" Debug="true" Service="WcfServiceLibrary.Service1" %>
<%@ Assembly Name="WcfServiceLibrary" %> 
```

我不再有时间或需要尝试这个，但似乎上述调整将处理我在问题中提出的最后一个问题。

# haskell - 如何在列表推导中计算依赖范围？

> ID：12240501
> 
> 赞同：5
> 
> 时间：2012-09-02T23:13:41.290
> 
> 标签：haskell, list-comprehension, evaluation

我目前正在通过[*Learn You a Haskell for Great Good！*](http://learnyouahaskell.com/chapters)，我对[第 2 章](http://learnyouahaskell.com/starting-out)中的倒数第二个例子感到困惑。

作为一种生成三元组的方法，所有直角三角形的所有边都是小于或等于 10 的整数，他给出了以下定义：

```
rightTriangles = [ (a,b,c) | c <- [1..10], b <- [1..c], a <- [1..b], a^2 + b^2 == c^2] 
```

我特别困惑的`b`是绑定到范围从 1 到 的列表的事实`c`，并且与`a`. 如果我的理解是正确的，`c`将评估它绑定到的列表中的所有值，但我仍然看不到该`c`范围内正在使用哪个值（例如 的所有值`c`，只有第一个`c`等）

如果不是太多，逐步解释如何评估会很棒。:)

提前致谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-03T00:18:42.370

让我们考虑两个更简单的列表推导：

```
ex1 = [(a,b) | a <- [1..3], b <- [1..3]]

ex2 = [(a,b) | a <- [1..3], b <- [1..a]] 
```

它们几乎相同，但在第二种情况下，`b`范围从`1`to `a`，不是`1`to `3`。让我们考虑一下它们等于什么；我已经对它们的值进行了格式化，以便说明问题。

```
ex1 = [ (1,1), (1,2), (1,3)
      , (2,1), (2,2), (2,3)
      , (3,1), (3,2), (3,3) ]

ex2 = [ (1,1),
      , (2,1), (2,2),
      , (3,1), (3,2), (3,3) ] 
```

在第一个示例中，列表推导式从`[1..3]`和中提取所有可能的元素组合`[1..3]`。但是由于我们谈论的是列表，而不是集合，所以它执行的*顺序*很重要。因此，更详细地说，`ex1` *真正*的意思是：

*   让`a`等于其列表中的每个可能值。
    *   对于 的每个值`a`，`b`令其为列表中的每个可能值。
        *   `(a,b)`是输出列表的一个元素

或者，改写为：“对于 的每个可能值`a`，计算`(a,b)`的每个可能值`b`。” 如果您查看结果的顺序，会发生以下情况：

1.  对于前三个元素，`a`等于`1`，我们看到它与 的每个值配对`b`。
2.  对于接下来的三个元素，`a`等于`2`，我们看到 的每个值`b`。
3.  最后，对于最后三个元素，`a`等于`3`，我们看到 的每个值`b`。

在第二种情况下，同样的事情也会发生。但因为`a`是*先*选的，`b`所以可以依赖它。因此：

1.  首先，`a`等于`1`，我们看到它与 的每个可能值配对`b`。因为`b <- [1..a]`, 这意味着`b <- [1..1]`, 所以只有一个选项。
2.  然后，在一个元素之后`a`等于`2`，我们看到它与 的每个可能值配对`b`。现在这意味着`b <- [1..2]`，所以我们得到两个结果。
3.  最后，`a`等于`3`，所以我们选择`b <- [1..3]`; 这给了我们完整的三个结果集。

换句话说，因为列表推导依赖于排序，所以您可以利用它。看到这一点的一种方法是想象将这些列表推导转换为*嵌套*列表推导：

```
ex1 = concat [ [(a,b) | b <- [1..3]] | a <- [1..3] ]

ex2 = concat [ [(a,b) | b <- [1..a]] | a <- [1..3] ] 
```

要想得到正确的行为，`a <- [1..3]`必须走在外面；这确保了`b`s 的变化比`a`s 快。它希望能清楚地说明如何`b`依赖`a`. 另一种翻译（基本上是[Haskell 2010 报告中使用的](http://www.haskell.org/onlinereport/haskell2010/haskellch3.html#x8-420003.11)翻译）是：

```
ex1 = concatMap (\a -> [(a,b) | b <- [1..3]]) [1..3]
    = concatMap (\a -> concatMap (\b -> [(a,b)]) [1..3]) [1..3]

ex2 = concatMap (\a -> [(a,b) | b <- [1..a]]) [1..3]
    = concatMap (\a -> concatMap (\b -> [(a,b)]) [1..a]) [1..3] 
```

同样，这使得嵌套非常明确，即使很难遵循。需要记住的是，如果`a`要首先选择 of，它必须位于已翻译表达式的*外部*，即使它位于列表推导式的*内部*。完整的，正式的翻译`rightTriangles`将是

```
rightTriangles =
  concatMap (\c ->
    concatMap (\b ->
      concatMap (\a ->
        if a^2 + b^2 == c^2
          then [(a,b,c)]
          else []
      ) [1..b]
    ) [1..c]
  ) [1..10] 
```

* * *

作为旁注，另一种写法`rightTriangles`如下：

```
import Control.Monad (guard)

rightTriangles = do c <- [1..10]
                    b <- [1..c]
                    a <- [1..b]
                    guard $ a^2 + b^2 == c^2
                    return (a,b,c) 
```

你可能还没有使用`do`符号，当然除了 之外什么都没有`IO`，所以我并不是说你一定要理解这一点。但是您可以将这些`x <- list`行读为“for each `x`in `list`”，因此将其读为嵌套循环：

```
rightTriangles = do
  c <- [1..10]             -- For each `c` from `1` to `10`, ...
  b <- [1..c]              -- For each `b` from `1` to `c`, ...
  a <- [1..b]              -- For each `a` from `1` to `b`, ...
  guard $ a^2 + b^2 == c^2 -- If `a^2 + b^2 /= c^2`, then `continue` (as in C);
  return (a,b,c)           -- `(a,b,c)` is the next element of the output list. 
```

请注意，在此解释中，`continue`唯一会跳到*最内层循环的下一次迭代。*你也可以写成

```
rightTriangles = do c <- [1..10]
                    b <- [1..c]
                    a <- [1..b]
                    if a^2 + b^2 == c^2
                      then return (a,b,c)
                      else [] -- or `mzero` 
```

最后几行说“如果`a^2 + b^2 == c^2`，添加`(a,b,c)`到输出列表；否则，不添加任何内容。” 我之所以提到这一点，是因为我认为以这种方式编写它可能有助于使“嵌套循环”类型的结构变得清晰，而不是因为您在阅读*Learn You A Haskell*`do`的第 2 章时应该完全理解 -notation :-)

 ** * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-02T23:35:06.980

看到你有命令式编程的经验，一个简短的回答是：类似于这个`for`嵌套（伪代码）：

```
for(c = 1; c <= 10; c++) {
    for(b = 1; b <= c; b++) {
        for(a = 1; a <= b; a++) {
            if(a ^ 2 + b ^ 2 == c ^ 2) {
                list.append((a, b, c));
            }
        }
    }
} 
```*

# php - 如何将表单中的部分输入提交到另一个域？

> ID：12240502
> 
> 赞同：0
> 
> 时间：2012-09-02T23:13:43.367
> 
> 标签：php, forms

当用户创建帖子时，在帖子表单中，我想提供一个按钮。当用户单击该按钮时，它将启动一个 iframe 并提交一些 post 表单的输入。当嵌套表单无效时，如何将这些输入提交到其他网站？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T00:23:30.657

两种方法，Javascript 和 PHP

**Javascript：**

您可以使用[jQuery Post](http://api.jquery.com/jQuery.post/) 通过 javascript 执行此操作。

基本步骤：

1.  对表单使用“onsubmit”处理程序
2.  在处理提交的函数中，用您要提交的数据构建一个数据数组并发送到第二个表单。
3.  如果需要，要么返回 true（以允许编程的提交继续）或构建辅助提交。

这一个允许您构建您引用客户端的验证（即在提交处理程序中）。

**PHP**

接收 php 表单中的数据，然后在接收 PHP 脚本中使用[CURL](https://www.google.com/search?q=use+cult+post+data)根据需要将数据传递给第二个表单。

# clojure - Clojure 给出了“错误数量的 args”，但 arg 出现在上一行

> ID：12240503
> 
> 赞同：1
> 
> 时间：2012-09-02T23:13:46.680
> 
> 标签：clojure

> **可能重复：**
> [线程上的 Clojure 错误：java.lang.IllegalArgumentException：键必须是整数](https://stackoverflow.com/questions/12233992/clojure-error-on-thread-java-lang-illegalargumentexception-key-must-be-integer)

这段代码很简单，我很困惑它怎么会出错。我有：

```
(defn create-server [port]
  (let [ss (new ServerSocket port)]
    (start-thread (fn [ss]
                    (while (not (. ss (isClosed)))
                      (try (listen-and-respond ss)
                          (catch SocketException e))))))) 

(defn -main [& args]
  (println "Server is starting")
  (let [port (Integer/parseInt (first args))]
    (println "port: " port)
    (create-server port))) 
```

我编译它，然后 uberjar 它，然后在命令行上启动它。这些行：

```
(println "Server is starting")

(println "port: " port) 
```

打印出来：

服务器正在启动端口：3457

在下一行，create-server 被调用，我得到这个错误：

```
Exception in thread "Thread-1" clojure.lang.ArityException: Wrong number of args (0) passed to:     core$create-server$fn
    at clojure.lang.AFn.throwArity(AFn.java:437)
    at clojure.lang.AFn.invoke(AFn.java:35)
    at clojure.lang.AFn.run(AFn.java:24)
    at java.lang.Thread.run(Thread.java:680) 
```

显然，-main 中的行不会有问题，因为我知道“端口”在第一次调用 create-server 之前的行的值为 3457。我还注意到这个错误在 Thread-1 中，所以我认为这段代码以某种我不理解的方式重复出现。

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T00:03:46.680

如果`start-thread`最终调用，`new Thread(Runnable)`那么错误实际上是因为`public void run()`没有`Runnable`任何参数。

因为`ss`是在封闭`let`表达式中声明的，所以它对您传递给的匿名函数是可见的`start-thread`。

*编辑*使用 Java 互操作在 REPL 重现您的确切问题（`*1`在 REPL 中表示“从先前评估返回的值）：

```
user=> (doto (new Thread (fn run [s] (println "blah"))))
#<Thread Thread[Thread-14,5,main]>
user=> (.start *1)
Exception in thread "Thread-14" nil
clojure.lang.ArityException: Wrong number of args (0) passed to: user$eval318$run
at clojure.lang.AFn.throwArity(AFn.java:437)
at clojure.lang.AFn.invoke(AFn.java:35)
at clojure.lang.AFn.run(AFn.java:24)
at java.lang.Thread.run(Thread.java:679)

user=> (doto (new Thread (fn run [] (println "blah"))))
#<Thread Thread[Thread-15,5,main]>
user=> (.start *1)
nilblah 
```

# php - 将 stdObject 转换为数组 - 调用函数

> ID：12240512
> 
> 赞同：4
> 
> 时间：2012-09-02T23:15:25.843
> 
> 标签：php, oop, object, web, amazon-web-services

我对这个类有疑问，尤其是最后两个函数`callApi($query)`和`objectToArray($d)`. 其目标是从 Amazon API 返回的对象中返回一个数组。

我认为问题在于在这里从另一个函数调用一个函数：

```
$arrayResponse=$this->objectToArray($response); 
```

即使我在 var_dump 时这样做，`$arrayResponse`我仍然将它作为一个对象获取并且无法执行特定于数组的操作（duh！;)）。我`objectToArray()`在[这个网站](http://www.if-not-true-then-false.com/2009/php-tip-convert-stdclass-object-to-multidimensional-array-and-convert-multidimensi%2aonal-array-to-stdclass-object/)和[亚马逊图书馆](http://github.com/Exeu/Amazon-ECS-PHP-Library%20Source)找到了。

当我单独对其进行测试时，它工作正常，但在将其放入项目后，我仍然得到了该对象。

是我只是以错误的方式调用函数，所以它不会转换它吗？

先感谢您，

亚当

```
class Amazon extends Source implements ICallsApi{
    function __construct(){
        $this->impact = 55;
        $this->side = "supply";
        echo "<p>I am Amazon</p>";
        echo "<p>and my impact = ". $this->impact."</p>";

    }

    private function FormulateQuery($query){
                echo "Formulate query for Amazon API and return it";
    }

    //Returns the array records from amazon of a given keyword      
    public function callApi($query)
            {
            $client = new AmazonECS('dataRemoved', 'dataRemoved', 'co.uk', 'dataRemoved');

            $response  = $client->category('Books')->search($query);
            //var_dump($response);
            //echo "<pre>";
            //print_r($response);
            //echo "</pre>";

            $arrayResponse=$this->objectToArray($response);
            var_dump($arrayResponse);
            //echo "<pre>";
            //print_r($arrayResponse);
            //echo "</pre>";
                echo "code returns an array of results";
            //  return $arrayResponse;
            }  //objectToArray($d) found online

        public  function objectToArray($d) {
                if (is_object($d)) {
                    // Gets the properties of the given object
                    // with get_object_vars function
                    $this->d = get_object_vars($d);
                }

                if (is_array($d)) {
                    /*
                    * Return array converted to object
                    * Using __FUNCTION__ (Magic constant)
                    * for recursive call
                    */
                    return array_map(__FUNCTION__, $d);
                }
                else {
                    // Return array
                    return $d;
                }
            }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T15:22:52.500

好的，修好了。

供将来参考：

将整个 std Object 转换为数组的工作函数如下所示：

```
public function objectToArray($d) {
                if (is_object($d)) {
                    // Gets the properties of the given object
                    // with get_object_vars function
                    $d = get_object_vars($d);
                }

                if (is_array($d)) {
                    /*
                    * Return array converted to object
                    * Using __FUNCTION__ (Magic constant)
                    * for recursive call
                    */
                    return array_map(array($this, 'objectToArray'), $d);
                //$this->d = get_object_vars($d);
                }
                else {
                    // Return array
                    return $d;
                }
            } 
```

感谢所有贡献者，

亚当

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-02T23:45:50.583

Try a code below. Suppose problem is because of this line: `$this->d = get_object_vars($d);`. You put `get_object_vars()` result into $this->d and return unchanged $d;

```
public  function objectToArray($d) {
                if (is_object($d)) {
                    // Gets the properties of the given object
                    // with get_object_vars function
                    $d = get_object_vars($d);
                }

                if (is_array($d)) {
                    /*
                    * Return array converted to object
                    * Using __FUNCTION__ (Magic constant)
                    * for recursive call
                    */
                    return array_map(__FUNCTION__, $d);
                }
                else {
                    // Return array
                    return $d;
                }
            } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-03T04:59:54.817

我也无法解决这个问题，但在这个线程中找到了一个替代解决方案： [将多维对象转换为数组](https://stackoverflow.com/questions/13567939/convert-multidimensional-objects-to-array)。

它更短，并且类内没有冲突。讨论在上面，这是代码：

```
$array = json_decode(json_encode($object), true); 
```

# r - 打印时保持 R Markdown 语法高亮

> ID：12240513
> 
> 赞同：11
> 
> 时间：2012-09-02T23:15:32.853
> 
> 标签：r, markdown, knitr, rstudio

恐怕回答会是：“Markdown 本来就是简单的，但它不会那样做”，但问它（几乎）永远不会有坏处。

在编写 R Markdown 文档时，我可以在浏览器中查看 HTML 文件，它看起来很棒。当我尝试在纸上或 PDF 上打印它时，会打印图中的颜色，但不会突出显示语法。有没有办法在打印时保持语法突出显示？

例子：

```
Minimal Example
=====

This text looks great in the file and the plot prints in color, but see commented code     below.

```{r}
# this commented line will be green in the HTML file, but will be black when I print it
z <- cor(mtcars) 
require(lattice) # 'require' will be blue in the HTML file, but will be black when I print it
levelplot(z)
``` 
```

我在 RStudio 中按下“Knit HTML”按钮并在 Chrome 或 Safari 中打开 HTML，没有任何问题。如果我从浏览器中的 HTML 打印，所有语法突出显示都会丢失。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-03T00:26:57.647

在对原始 example.Rmd 进行“编织”之后，您的工作路径中将有一个 example.md，然后使用[pandoc](http://johnmacfarlane.net/pandoc/) ...

```
# for pdf (you need to have latex installed)
system( "pandoc example.md -o example.pdf")

# for syntax-highlight persistant html
system("pandoc example.md -o example.html -s -S") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-10T20:53:27.110

我还发现的一种解决方案是编织成 HTML，在浏览器中预览 html 文件，然后突出显示所有内容并将其粘贴到 MS Word 文档中。从那里您可以导出为 PDF 或打印。不幸的是，它不会将所有图像复制到 Word 文档中。但是，如果您只需要语法突出显示，而不是太担心图像或绘图，那么这个解决方案相当简单。它实际上比 pandoc 解决方案更好地复制代码框，但缺点是没有图像。

# bluetooth - 规范、标准、协议——它们之间有什么区别？

> ID：12240519
> 
> 赞同：0
> 
> 时间：2012-09-02T23:16:20.690
> 
> 标签：bluetooth, standards, protocols, specifications, zigbee

我想从计算机科学/电子工程的角度谈谈。例如，我们有蓝牙、zigbee、TCP/IP、WiFi、GSM 等我们日常使用的东西。

在这种情况下，规范、标准、协议之间有什么区别？例如，WiFi 是标准还是协议？GSM是一种规范等等...

您能否详细说明一下？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T01:04:15.907

规范定义了您在实现中应该做的事情，并且更具启发性。我在你的领域找不到合适的例子。但是在编程中，我们可以说一种编程语言有一个语言规范，例如C++语言规范、Java语言规范等。

协议定义了两个或多个不同系统之间的通信规则。它定义事件以驱动通信和任何一方收到事件时采取的行动。

我没有一个清晰的概念`standard`，但认为它可能描述了一些比规范更一般的概念。

您的示例，[WiFi](http://en.wikipedia.org/wiki/Wi-Fi)与规范或标准无关。但是，有一些与之相关的协议，例如 802.11a/b/g 等（来自维基百科，它们被归类为[802.11](http://en.wikipedia.org/wiki/IEEE_802.11)标准，这超出了我的知识范围）。

# ruby-on-rails-3 - 从 3.2.2 升级到 3.2.8 会破坏 jquery-tooltip

> ID：12240521
> 
> 赞同：0
> 
> 时间：2012-09-02T23:17:17.033
> 
> 标签：ruby-on-rails-3, jquery-ui, ruby-on-rails-plugins, jquery-tooltip

我刚刚将我的应用程序从 3.2.2 升级到 3.2.8。

我使用 jquery 工具提示。

升级后，工具提示会改变行为。在升级之前，工具提示会弹出相对于包含标题的元素，调用如下：

```
$("[title]").tooltip(); 
```

升级后，工具提示现在不同了。当它正常工作时，我从未查看过生成的 HTML，但是现在，当我在标题元素上调用工具提示时，它会在我的 HTML 末尾为工具提示创建一个 DIV，因此工具提示出现在我的页面底部。

我注意到 jquery-ui 刚刚升级到 2.0.0，所以我假设当我在我的 app/assets/javascripts/application.js 中执行此操作时：

```
//= require jquery-ui
//= require jquery-tooltip.min 
```

我现在正在获取更新的版本，它不再与 jquery-tooltip 兼容。

有人确定吗？

有什么快速解决办法吗？

我没有与 jquery-tooltip 结婚，有人有针对 rails 3.2.8 的经过验证的 jquery 工具提示方法吗？（jquery-ui 工具提示将在即将发布的 1.9 版本中发布？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T19:44:55.757

解决了

我在 app/assets/javascripts 中有 jquery.ui javascript 文件的副本

一旦我添加，它们就应该被删除：

```
//= require jquery_ui 
```

到我的 app/assets/javascripts/application.js 清单。

当我升级到 2.3.8 时，它引入了对 jquery-ui 的依赖，比我很久以前复制的版本晚。

只需删除它们即可解决我的问题

# html - 如何在灵活的布局中创建等间距的 div 网格？

> ID：12240522
> 
> 赞同：2
> 
> 时间：2012-09-02T23:17:26.390
> 
> 标签：html, css, layout

我正在尝试创建这样的布局：

![在此处输入图像描述](../Images/239820c1c088e7efb49fc17df8c747c4.png)

我的问题特别集中在五个盒子上。我努力使用 CSS 让它工作。你们有这样的布局的简单设置吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T23:24:55.133

我看到你有固定的宽度，所以这是一个例子。宽度并不适合您的宽度，但您可以轻松设置所需的值。这里的主要内容是`float:left`在 small_bottom 类中，它使 div 显示在一行中。`overflow:hidden`在底层使该 div 环绕浮动 div（没有它会显示为内部没有任何内容）。如果您希望这取决于浏览器窗口宽度 - 尝试使用 small_bottom 的宽度百分比。

HTML：

```
<div class="main">
    <div class="top"></div>
    <div class="bottom">
        <div class="small_bottom"></div>
        <div class="small_bottom"></div>
        <div class="small_bottom"></div>
        <div class="small_bottom"></div>
        <div class="small_bottom"></div>
    </div>
</div>​ 
```

CSS：

```
div{border:solid 1px;}
.main{width:350px; border:solid 1px;}
.top{ height:40px;margin:5px;}
.small_bottom{
    float:left;
    height:50px;
    width:50px;
    margin:5px;
}
.bottom{margin:5px; overflow:hidden;}

​ 
```

[这](http://jsfiddle.net/S4STr/2/)是一个外观示例

# css - IE8 CSS 问题，图像真正透明时的灰色背景

> ID：12240527
> 
> 赞同：0
> 
> 时间：2012-09-02T23:18:25.507
> 
> 标签：css, internet-explorer-8

好的，看看你能不能帮我解决这个问题：

1）去这里：[http](http://thepredatorial.com/DHS/index.php) ://thepredatorial.com/DHS/index.php在谷歌浏览器/火狐/IE9

2) 一切看起来都很棒

3）在IE8中访问相同的网址

4）幻灯片的幻灯片后面有灰色背景（与外角相匹配），我似乎无法找出原因或摆脱...

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T06:08:55.710

好的，我最终自己修复了它。

因为 IE8 有非常糟糕的 PNG 透明度问题，所以我最终在透明 gif 的上方和下方制作了整个块的 png，将其绝对定位在所有内容之上，然后对所有内容进行 z 索引，但横幅滑动到绝对定位的元素上方。

原油？也许。但是，现在它在 Firefox、Chrome、IE9、IE8 中运行良好，而且天知道 IE7 的原因是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T02:56:40.987

IE8 及更低版本在对已经透明的图像应用透明效果时存在问题。看来您的 jQuery“循环”效果导致了这个：删除闪烁的透明度，删除灰色背景。

由于 IE 的开发工具相当糟糕，我无法轻松测试您在实际网站上提出的任何解决方法，但希望有一个对您有用：[IE8 上的 JQuery 循环问题](https://stackoverflow.com/questions/6010092/problem-with-jquery-cycle-on-ie8)

# pycharm - PyCharm - 如何设置 mysql 数据库连接

> ID：12240530
> 
> 赞同：8
> 
> 时间：2012-09-02T23:18:47.777
> 
> 标签：pycharm

我刚刚开始在 PyCharm 编辑器中编写 Django。我想在 Internet 上建立与 mysql-server 的连接。所以我点击`Data Sources`> `DB Data Source`。

这就是恐怖开始的地方。我必须选择一个`JDBC Driver File`，我不知道我需要选择哪个，我想`MySQL Connector`。之后我需要选择一个`JDBC Driver Class`，只是猜测，但我会选择`com.mysql.jdbc.Driver`。此外，我必须指定一个`Database URL`以`jdbc://`. 我从未听说过*JDBC*和所有这些东西。

如果你能在这里帮助我，那就太好了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-11-21T23:04:00.070

转到*数据源和驱动程序*，然后按**+**按钮。

从*驱动程序*列表中选择 MySQL。

如果您是第一次这样做，窗口底部会出现“*下载缺少的驱动程序文件”。*如果单击它，它将下载此连接的最新驱动程序。
您还可以单击*驱动程序：MySQL*链接 >*转到驱动程序*并转到驱动程序配置页面。*JDBC Driver Class*应`com.mysql.cj.jdbc.Driver`默认设置为。**您可以通过单击+**按钮安装旧版本的驱动程序。

在项目数据源页面填写*主机*（IP 或主机名）、*端口*（默认为 3306）、*用户*和*密码*。填充*数据库*是可选的。

连接的 URL 应该是`jdbc:mysql://localhost:3306`或者`jdbc:mysql://localhost:3306/dbname`如果您指定了数据库名称。

文档：[https ://www.jetbrains.com/help/pycharm/data-sources-and-drivers-dialog.html](https://www.jetbrains.com/help/pycharm/data-sources-and-drivers-dialog.html)

这是*PyCharm 2019.2中的**数据源和驱动程序*窗口。

 *[![数据源和驱动程序](../Images/621a1d72c8fe453002fad4e2cb0e1295.png)](https://i.stack.imgur.com/SCHox.png)*

# compilation - 当我们可以手动完成时，让服务器编译和缩小资产有什么意义？

> ID：12240533
> 
> 赞同：0
> 
> 时间：2012-09-02T23:19:18.960
> 
> 标签：compilation, webserver, minify

*免责声明：我对服务器几乎一无所知。对不起，如果这个问题首先没有意义。*

我正在使用 CoffeeScript 和 Stylus 以及其他一些编译的东西在 Node.js 中构建我的项目。到目前为止，我已经编写了一个脚本来将我的代码编译成常规的 JavaScript 和 CSS，然后运行它。我计划将编译后的资产上传到生产服务器，因此之后任何地方都没有 CoffeeScript 或 Stylus 的踪迹。

但我知道可以直接运行服务器端 CoffeeScript ( `coffee app.coffee`)，并且 Node 中有中间件可以即时编译和缩小客户端 CoffeeScript 和 Stylus。

我的问题是，为什么让服务器每次都做，而不是自己编译代码？第一个选项不会无缘无故地增加服务器的压力吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T00:41:04.513

它不会增加服务器的压力。有根据的猜测会告诉我，它会编译并缩小您的 CoffeeScript，它会为每个后续请求缓存结果。

手动流程会带来风险和错误概率。

# css - 简单的 CSS 边框，动态改变高度到父元素的高度

> ID：12240537
> 
> 赞同：0
> 
> 时间：2012-09-02T23:19:50.333
> 
> 标签：css, border

我有一个并排放置`div`两个浮动的 s 。`div`我希望这两个浮动`div`s 有一个`1px solid #e7e7e7;`边框将它们分开。我尝试穿上`border-right: ...`第一个 child `div`，但是当第二个`div`更高时，边框不会延伸到整个高度（它保持在其局部高度）。两个`div`s 中的内容都是动态的，因此它需要调整到 parent`div`的高度或者在它自己和它的兄弟之间取最大高度。

有什么简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T00:16:25.727

如果您不想使用 JavaScript，我知道的唯一另一种方法是使用表格，其中一个单元格带有边框。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-02T23:36:43.450

你试过使用 jQuery 吗？您可以使用这样的简单查询来执行您想要执行的操作：

```
$(document).ready(function() {
    var leftDivHeight = $(".leftDiv").height();
    var rightDivHeight = $(".rightDiv").height();

    if(leftDivHeight < rightDivHeight){
        $(".leftDiv").height(rightDivHeight);
    }
    else {
        $(".rightDiv").height(leftDivHeight);
    }
}); 
```

# django - Web API 的目的是什么

> ID：12240538
> 
> 赞同：3
> 
> 时间：2012-09-02T23:19:56.473
> 
> 标签：django, web-services, api, rest

我正在开发应用程序和网站。他们有用户、合约等相关信息。设计一个API而不直接连接数据库的原因是什么？

编辑：我刚刚开始开发并且没有使用 Web 服务的经验。请尽可能彻底。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T23:26:03.343

Facebook、Google 和 Twitter 等网站永远不能让第三方应用程序直接连接到他们的数据库：这是一个巨大的安全风险。（如果 Facebook 允许任何人访问他们的数据库，包括私人用户信息和消息，你会感到舒服吗？）

API 充当了第三方应用程序可以获取他们被允许访问的信息种类的大门。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-02T23:27:33.950

使用 API 而不是直接访问的原因有很多。

想到的前2个：

1.  使用 API 可以让您在不知道具体实现的任何细节的情况下编写客户端代码，因此，例如，如果您更改数据库结构或位置，您只需要重写 API 包装器代码，而不是在所有引用它的地方。
2.  它允许您拥有不同级别的身份验证。正如另一个答案中提到的那样，应用程序的所有用户都可以访问所有其他用户的数据并不理想。

# php - Yii：如何使一个活动记录表现得像一个 CTypedList 与其他活动记录作为列表元素？

> ID：12240540
> 
> 赞同：1
> 
> 时间：2012-09-02T23:20:33.180
> 
> 标签：php, activerecord, data-structures, yii, sortedlist

假设我有两个 AR 类：`Deck`和`Card`. 每个套牌记录应该是卡片记录的排序列表。当我获取甲板记录时，我希望能够将其视为 CTypedList：

```
$Deck = Deck::model()->findByPk(1); // Retrieve the deck
$Card = $Deck->removeAt(0); // draw the first card (and remove it from the deck)
$Deck->shuffle(); // shuffle the deck
$n = $Deck->count(); // get the number of remaining cards in the deck
$Deck->save(); 
```

之后`$Deck->save()`，数据库记录应该反映牌组的新状态，即新的牌顺序和一张牌已被移除。

**编辑：**我的解决方案称为 ListBehavior，这是一种使 AR 表现得像 CLists 的 ActiveRecordBehavior。该代码是开源的，可作为[gist](https://gist.github.com/3615203)获得。随意使用它并根据需要进行编辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-15T07:18:11.670

```
$Deck = Deck::model()->findByPk(1); // Retrieve the deck

$Card = $Deck->removeAt(0); // draw the first card (and remove it from the deck)

shuffle($Deck); // shuffle the deck

$n = $Deck->count(); // get the number of remaining cards in the deck

$Deck->save(); 
```

# sql - 针对两个用户服务使用 Spring 安全性对用户进行身份验证

> ID：12240544
> 
> 赞同：0
> 
> 时间：2012-09-02T23:21:26.703
> 
> 标签：sql, authentication, spring-security

我对 Spring 安全性非常陌生，我的问题如下：

我有一个**成员**mysql 表，其中包含有关网站成员的信息，包括他们的用户名、密码和角色。到目前为止一切顺利：我可以使用此表来配置`<jdbc-user-service`.

但是，我也希望有一个不会出现在**成员**表中的超级用户。

1.  是否可以并建议将此超级用户放在内存用户存储库中，从而将 jdbc 用户服务与内存用户服务混合使用？如果有怎么办？
2.  如果**1.**不可能，也许我可以有第二个 mysql 表，例如**moderator**。那么我需要对这两个表进行身份验证时需要什么样的 sql 查询呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T21:27:26.017

# 碰撞

多个存储库的问题是您需要确保区分哪个用户是哪个用户。例如假设您的数据如下所示

**成员表**

```
username
----------------------
member 
```

**主持人表**

```
username
----------------------
moderator 
```

然后你有一些与你的用户相关的数据

**数据表**

```
username          value
----------------------------------------
moderator         secret 
```

如果发生碰撞，现在会发生什么？例如，用户注册，您的成员表现在如下所示：

**成员表**

```
username
----------------------
member
moderator 
```

哪个版主拥有数据？没有办法区分这两个用户。

# 替代方法

另一种方法是使用用户到角色的映射。这将是使用这样的东西：

**成员表**

```
username           is_moderator
----------------------
member             false
moderator          true 
```

然后，当用户尝试使用现有用户名注册时，就会违反约束，因此您无需区分两者。当然，您可以使用另一个表映射角色。这是 Spring Security 通常使用[权限](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/appendix-schema.html)表所做的。

# 使用多个 UserDetailsS​​ervice

如果你真的想使用多个用户存储库，你可以简单地在你的配置中声明多个 UserDetailsS​​ervice 条目。内存配置示例如下所示：

```
 <authentication-manager>
    <authentication-provider>
      <jdbc-user-service .. />
    </authentication-provider>
    <authentication-provider>
      <user-service>
        <user username="moderator" 
            password="password"
            authorities="ROLE_MODERATOR"/>
      </user-service>
    </authentication-provider>
  </authentication-manager> 
```

如果您想在数据库中同时执行这两项操作，则需要确定每个表的 SQL 查询是什么，然后添加两个元素。例如：

```
 <authentication-manager>
    <authentication-provider>
      <jdbc-user-service .. />
    </authentication-provider>
    <authentication-provider>
      <jdbc-user-service .. />
    </authentication-provider>
  </authentication-manager> 
```

使用属性来控制您的 sql 查询。您可以参考[Spring Security 附录](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/appendix-namespace.html#nsa-jdbc-user-service)中的示例查询。

# ruby - 传递给脚本的 RSpec 和测试命令行参数

> ID：12240553
> 
> 赞同：4
> 
> 时间：2012-09-02T23:22:42.240
> 
> 标签：ruby, rspec

我是基于命令行 ruby​​ 的应用程序的一些 rspec 测试。我正在尝试构建我的测试套件以测试缺少的命令行参数。具体来说，我想删除 ARGV[0]..ARGV[N] 将出现在应用程序中的内容。我看过类似的帖子提到 ENV.stub；但是，我看不到如何模拟“无名”参数和给定顺序。

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T20:49:29.000

我只是在位于以下位置的测试用例中做到了这一点`spec`：

```
it "does something" do
  arg = "/tmp"
  exe = File.expand_path('../bin/site_checker', File.dirname(__FILE__))
  stdin, stdout, stderr = Open3.popen3("#{exe} -Ilib #{arg}")
  stdout.readlines.should be_empty
end 
```

# ruby-on-rails - Rails 创建失败

> ID：12240555
> 
> 赞同：0
> 
> 时间：2012-09-02T23:23:13.763
> 
> 标签：ruby-on-rails, ruby

所以看来我一定做错了。

```
Task.create :name => 'apples'
   (0.2ms)  begin transaction
   (0.2ms)  rollback transaction
 => #<Task id: nil, name: "apples", task: nil, created_at: nil, updated_at: nil> 
```

然后我想，也许我的控制器错了：

```
 def create
    Task.create(params[:task])
    redirect_to tasks_path, :flash => {:success => 'We have created the task.'}
  end 
```

因为似乎我使用水豚的测试失败了-因为它们无法创建任务.....

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T23:37:58.523

`before_save`如果 Rails 模型验证失败或回调返回 false ，则无法将 Rails 模型保存到数据库

# performance - phpstorm 和 aptana 构建或同步文件通过网络共享变慢

> ID：12240556
> 
> 赞同：0
> 
> 时间：2012-09-02T23:23:22.967
> 
> 标签：performance, magento, ide, aptana, phpstorm

我一直在使用 Aptana 和 PHPStorm 通过网络共享进行一些 Magento 开发，并且同步或项目构建非常缓慢。

我尝试了一些不同的方法来提高速度，但没有结果。PHPStorm 需要几分钟来同步项目，而 Aptana 需要更长的时间来重建项目。我已经在本地复制了这个项目，一切都很好。

在本地处理大型项目是否更有效率？我不喜欢在本地运行 xampp 或 wamp。我更喜欢拥有专用服务器并将驱动器映射到文件。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T02:45:08.607

是的。本地。尝试版本控制。我推荐 git。

# jquery - jQuery自动完成在下拉菜单中显示提示文本

> ID：12240563
> 
> 赞同：2
> 
> 时间：2012-09-02T23:24:55.437
> 
> 标签：jquery, jquery-ui, jquery-ui-autocomplete

分词器：

[http://loopj.com/jquery-tokeninput/](http://loopj.com/jquery-tokeninput/)

当用户专注于输入时，会显示提示“输入搜索词”。是否可以使用 jQuery UI 的自动完成功能来做到这一点？[http://jqueryui.com/demos/autocomplete/](http://jqueryui.com/demos/autocomplete/)

我正在为我的数据使用远程源，但我想可能会分配一个长度为 1 的临时源（[“输入搜索词”，“”]）来自动完成，直到启动搜索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T23:28:03.167

这是您要查找的内容吗：**更新演示** [http://jsfiddle.net/vWJdT/](http://jsfiddle.net/vWJdT/) *older => ***工作演示** [http://jsfiddle.net/MQfEL/](http://jsfiddle.net/MQfEL/)

我认为您正在寻找的是： http: [//loopj.com/jquery-tokeninput/](http://loopj.com/jquery-tokeninput/)

希望它适合你的事业`:)`

**脚本**

```
 <script type='text/javascript' src="https://raw.github.com/loopj/jquery-tokeninput/master/src/jquery.tokeninput.js"></script>

  <link rel="stylesheet" type="text/css" href="http://loopj.com/jquery-tokeninput/styles/token-input.css">

  <link rel="stylesheet" type="text/css" href="http://loopj.com/jquery-tokeninput/styles/token-input-facebook.css"> 
```

**代码**

```
 $(document).ready(function() {
            $("#demo-input-local-custom-formatters").tokenInput([{
                "first_name": "Tats_innit",
                "last_name": "Godfrey",
                "email": "Tats_innit@mit.whatwhatwuthulk.edu",
                "url": "https://si0.twimg.com/sticky/default_profile_images/default_profile_2_normal.png"
            },
            {
                "first_name": "Andre",
                "last_name": "Jackson",
                "email": "andre.jackson@yahoo.com",
                "url": "https://si0.twimg.com/sticky/default_profile_images/default_profile_2_normal.png"
            },
            {
                "first_name": "Andre",
                "last_name": "Jolly",
                "email": "andre.jolly@uol.com.br",
                "url": "https://si0.twimg.com/sticky/default_profile_images/default_profile_2_normal.png"
            },
            {
                "first_name": "Andre",
                "last_name": "Henderson",
                "email": "andre.henderson@globo.com",
                "url": "https://si0.twimg.com/sticky/default_profile_images/default_profile_2_normal.png"
            }
          ], {
              propertyToSearch: "first_name",
              resultsFormatter: function(item){ return "<li>" + "<img src='" + item.url + "' title='" + item.first_name + " " + item.last_name + "' height='25px' width='25px' />" + "<div style='display: inline-block; padding-left: 10px;'><div class='full_name'>" + item.first_name + " " + item.last_name + "</div><div class='email'>" + item.email + "</div></div></li>" },
              tokenFormatter: function(item) { return "<li><p>" + item.first_name + " <b style='color: red'>" + item.last_name + "</b></p></li>" },
          });
        });​ 
```

**工作形象**

顺便说一句，我不是戈弗雷。

![在此处输入图像描述](../Images/9acfae685423047976c0532e0e0aba7f.png)

![在这里输入代码](../Images/626aa10d85f7e0cf891c0a2dc4be0f41.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T14:13:58.120

您在这里要做的是更新您的`source`论点，以便您可以自己发出 AJAX 请求。在等待 AJAX 请求返回时，您将向小部件传递一个“加载”项（就像您在问题中建议的那样）：

```
$("#auto").autocomplete({
    source: function (request, response) {
        // Populate the list with temporary loading item:
        response([loadingItem]);

        $.ajax({
            url: "my_remote_source",
            data: request
        }).success(response).error(function () {
            response([]);
        });
    },
    select: function (event, ui) {
        if (ui.item.loading) {
            event.preventDefault();
        }
    },
    focus: function (event, ui) {
        if (ui.item.loading) {
            event.preventDefault();
        }
    }
}); 
```

和事件处理程序用于防止“加载”项被单击或聚焦`select`。`focus`不幸的是，当您单击加载项时它会消失，但如果它很重要，可以很容易地修复它。

**示例：http:** [//jsfiddle.net/andrewwhitaker/WP29E/1/](http://jsfiddle.net/andrewwhitaker/WP29E/1/)

# text - 自然语言生成 - 如何测试它是否听起来自然

> ID：12240566
> 
> 赞同：4
> 
> 时间：2012-09-02T23:26:03.047
> 
> 标签：text, nlp

我只有一组句子，是我根据绘画分析生成的。但是我需要测试它们听起来有多自然。是否有任何 api 或应用程序可以做到这一点？

我正在使用[Standford Parser](http://nlp.stanford.edu:8080/parser/index.jsp)进行细分，但这并不能完全完成我想要的工作！

也可以测试一下句子的相似程度吗？当我随机生成部分句子并想检查生成的句子的种类时。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T07:35:55.177

许多 NLP 的东西都使用称为[“语言模型”的](http://en.wikipedia.org/wiki/Language_model)东西。

语言模型是可以接收一些文本并返回概率的东西。该概率通常应指示给定文本的“可能性”程度。

您通常通过获取大量文本（我们称之为“训练语料库”）并从中计算一些统计数据（代表您的“模型”）来构建语言模型，然后使用这些统计数据来获取新的、以前的看不见的句子和它们的返回概率。
您可能应该在 Google 上搜索“语言模型”、“unigram 模型”、“n-gram 模型”，然后单击一些结果来查找有助于您理解前一句的文章或演示文稿。（我很难为你推荐一个合适的教程，因为我不知道你现有的背景是什么）

无论如何，考虑语言模型的一种方法是，它们是接收新文本并告诉你新文本与语言模型所用的训练语料库有多相似的系统。因此，如果您构建 2 种语言模型，一种来自莎士比亚的所有戏剧，另一种来自大量法律文件，那么第二种语言模型应该会给您一个更高的概率来为刚刚获得的一些新法律文件提供句子已发布（与第一个模型相比），而第一个模型应该为您提供其他一些古英语戏剧（由其他作者撰写）的更高概率，因为该戏剧可能更类似于莎士比亚（就单词的种类而言使用、句子长度、语法等），而不是现代法律语言。

你看到斯坦福解析器为你给出的句子返回的所有东西都是使用语言模型生成的。思考这些特征是如何构建的一种方法是假设计算机尝试了所有可能的标签组合和每个可能的解析树来分析你给它的句子，并使用一些聪明的语言模型来识别最可能的标签序列和最可能的解析树，并将它们返回给您。

回到您的问题，您需要根据您认为听起来自然的文本构建一个语言模型，然后使用该语言模型来评估您想要衡量其自然度的句子。为此，您必须确定一个好的训练语料库并决定要构建哪种类型的语言模型。

如果您想不出更好的方法，维基百科文章的集合可能会成为一个很好的训练语料库，代表自然发音的英语是什么样的。
至于模型类型，“n-gram 模型”可能足以满足您的任务。更复杂的模型，如“隐马尔可夫模型”和“PCFG”（为您链接到的斯坦福页面提供动力的东西）肯定会让事情变得更好，但 n-gram 绝对是您可以开始的最简单的东西。

# php - 用于保存基于 XML 的嵌套数据的数据结构

> ID：12240569
> 
> 赞同：0
> 
> 时间：2012-09-02T23:26:37.883
> 
> 标签：php, xml, data-structures, recursion

我通过以下方式获得这种类型的响应`curl`：

```
<ArrayOfServerFile>
    <ServerFile>
        ...
        <FileType>Folder</FileType>
        <Identifier>x123</Identifier>
        <Name>Client Templates</Name>
        ...
    </ServerFile>
    <ServerFile>
        ...
        <FileType>XpressDox Template</FileType>
        <Identifier>y456</Identifier>
        <Name>contact-information.xdtpl</Name>
        ...
    </ServerFile>
    ...
</ArrayOfServerFile> 
```

我想将此信息保存在树状`data structure`.

我尝试过这样的事情：

```
// Pseudo-code:
function run_procedure()
{
    get XML data via curl

    if FileType == 'Folder'

        save name and other useful data into $tree_like_data_structure
        run_procedure() // recursive call

    else if FileType == 'XpressDox Template'

        save name and other useful data into $tree_like_data_structure
}

var_dump($tree_like_data_structure); 
```

这个想法是像这样表示保存的数据：

```
[0][0] -> data
        [1][0] -> data
        [1][1] -> data
        [1][2] -> [2][0] -> data
                  [2][1] -> data
        [1][3] -> data 
```

我很确定这并不难实现，但我已经浪费了很多时间而没有成功。任何提示都非常受欢迎。谢谢。-

**编辑 1**

我主要关心的是如何获取 [depth][element] 索引~~以及如何级别数据（类型、名称、内容等）~~。

**编辑 2**

基本上这是一个递归编程问题。**也许它可以通过`while`语句比递归函数更容易地完成？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T02:20:17.117

尝试将[SimpleXML 与 DOM](http://php.net/manual/en/function.simplexml-import-dom.php)一起使用来创建您的数组。

```
$dom = new DOMDocument;
$dom->loadXML('
<ArrayOfServerFile>
    <ServerFile>
        <FileType>Folder</FileType>
        <Identifier>x123</Identifier>
        <Name>Client Templates</Name>
    </ServerFile>
</ArrayOfServerFile>');

if (!$dom) {
    echo 'Error while parsing the document';
    exit;
}
$s = simplexml_import_dom($dom);
echo $s->ServerFile[0]->FileType; 
```

# android - Android 开发假设有哪些先验知识？

> ID：12240570
> 
> 赞同：11
> 
> 时间：2012-09-02T23:26:39.910
> 
> 标签：android

我正在考虑做一些 Android 应用程序开发，只是为了我自己的乐趣。我查看了一些开发人员文章、基础知识等，听起来确实有一个隐藏的基本假设是关于一个人在应用程序开发方面的先验知识。

很多被谈论的东西，即使是基础知识，似乎都超出了我的想象。我对编程比较陌生，我主要做过 C++ 和一点 Java。我还没有完全进入面向对象，仍然只是做基本的编程。

老实说，我有点不知所措，因为我需要去哪里才能完成这项工作。那么，就先学什么而言，你能给我什么方向。我知道 Java 将是其中的重要组成部分，但是还有什么可以帮助的吗？

谢谢，

安迪。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-02T23:32:07.100

就背景而言，您需要的三件大事是：

*   Java 编程
*   XML
*   具有基于小部件的 UI 模型的经验（即，几乎除了低级 HTML/CSS/JS 之外的任何东西）

您需要的 Java 中特定类型的东西包括：

*   语言基础（流控制等）
*   类和对象
*   方法和数据成员
*   公共、私有和受保护
*   静态和实例范围
*   例外
*   线程和并发控制
*   收藏品
*   泛型
*   文件输入/输出
*   反射
*   接口

这些都将包含在友好的 Vulcan 的任何体面的 Java 书籍/课程/思想融合中。这些资源也可能会用于其他通常与 Android 无关的东西（Swing、servlet 等）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-02T23:33:29.420

你应该从头开始。

在此处逐步按照[“我的第一个应用程序”教程进行操作，如果您不理解某个单词或术语或代码，请在 Google 上搜索。](http://developer.android.com/training/basics/firstapp/creating-project.html)我什至建议你重新输入代码而不是复制粘贴，这样你才能真正思考每一行在做什么，并练习调试你做错了什么。

您还应该至少阅读和理解[活动](http://developer.android.com/guide/components/activities.html)，但“应用程序组件”下的所有标题都非常相关。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-02T23:30:47.797

首先，您应该对 java 足够熟悉，以便您可以轻松理解示例代码。OOP 发挥着重要作用，我相信如果您不熟练使用它，您将会遇到困难，因为它将成为 Android 编程的基石。

然后当你进入 Android 部分时，拿一本像样的书，把它当作你的圣经。不要只是跳过理论并从编码开始，因为您需要清楚基础知识。只要您从事 Android 开发，[文档](http://developer.android.com/index.html)就会成为您的朋友，因此请确保您毫不犹豫地查看那里的内容。当您下载 SDK 时，那里提供了很多示例项目，它们也会为您提供很多帮助。

一旦你开始开发，你会发现网上有很多通用代码，甚至 Stack Overflow 也有很多关于 Android 的问题。

我对你的建议是打好 Java 基础，然后开始制作你自己的应用程序，因为动手学习是**最好**的方法。从小而简单的开始，最好是那些在你将要遵循的书中解释的那些。尝试使用应用程序，如果遇到困难，请在此处发布，我们将随时提供帮助。

注意： [这](http://www.youtube.com/playlist?list=PL58DA894967E58C4E)是一系列很棒的视频教程。从最基本的开始，带你到更高的层次，解释正在发生的一切。非常有帮助。

祝安卓好运！愿机器人与你同在！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-02T23:39:46.393

There are few tutorials which start with basic. probably you want to have look into it. Before going through these tutorials read about the Android architecture and you are good to go.

## Some of the Android basic tutorial.

1.  [developer.android.com](http://developer.android.com/training/index.html)
2.  [Vogella.com](http://www.vogella.com/categories/android/androiddevelopmentstartertutorials.html)
3.  [myong.com](http://www.mkyong.com/tutorials/android-tutorial/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-02T23:32:50.540

[一个答案在这里](https://stackoverflow.com/questions/3496191/should-i-learn-java-before-learning-android)
你怎么知道你是否会用你目前的知识理解android？： [Android Training](http://developer.android.com/training/index.html)通过那里的代码浏览一下，如果你能够理解它，这意味着你需要的只是java和一些xml布局的东西。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-09-02T23:32:57.147

您可以从这些教程开始，在这个问题中：

[在线 Android 开发教程/初学者指南？](https://stackoverflow.com/questions/6893556/online-android-development-tutorial-beginners-guide)

然后，随着您变得更加舒适和熟悉，开始查看示例程序。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-09-02T23:31:21.017

基本上都是关于 java + 某种特定的 xmlish 声明性语言。我想以 java 为基础就足够了，因为其他一切都更特定于 android。

# php - Symfony2 DoctrineMongoDBBundle 一对多双向引用

> ID：12240571
> 
> 赞同：2
> 
> 时间：2012-09-02T23:26:43.353
> 
> 标签：php, mongodb, symfony, doctrine, dbref

我正在尝试使用 MongoDB 中的关系，使用 Symfony2 和 DoctrineMongoDBBundle 根据[Doctrine MongoDB Object Document Mapper 演示文稿](http://www.slideshare.net/jwage/doctrine-mongodb-object-document-mapper)`$User->setOrganization($Organization)`的幻灯片 49，分配，以`$Organization::users[0]`引用用户对象就足够了。在[文档](http://docs.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/reference/bidirectional-references.html#one-to-many)中说我必须使用 inversedBy 和 mappedBy 选项。我有类似的方案（用户属于组），但我无法同时进行更新工作：

```
$Group = new \MyVendor\MongoBundle\Document\Group();
$User = new \MyVendor\MongoBundle\Document\User();
$User->setGroup($Group);
/** @var \Doctrine\ODM\MongoDB\DocumentManager $dm */
$dm = $this->get('doctrine_mongodb')->getManager();
$dm->persist($Group);
$dm->persist($User);
$dm->flush(); 
```

MongoDB 中的结果：

**团体**

```
{
   "_id": ObjectId("5043e24acdc2929a0500000d"),
} 
```

**用户**

```
{
   "_id": ObjectId("5043e24acdc2929a0500000c"),
   "group": {
     "$ref": "Group",
     "$id": ObjectId("5043e24acdc2929a0500000d"),
     "$db": "my_db" 
  }
} 
```

src/MyVendor/MongoBundle/Document/User.php

```
<?php
namespace MyVendor\MongoBundle\Document;

use Doctrine\ODM\MongoDB\Mapping\Annotations as MongoDB;

/**
 * @MongoDB\Document(repositoryClass="MyVendor\MongoBundle\Repository\UserRepository")
 */
class User
{
    /**
    * @MongoDB\Id
    */
    private $id;

    /**
     * @var
     * @MongoDB\ReferenceOne(targetDocument="Group", inversedBy="users")
     */
    private $group;

    /**
     * Set group
     *
     * @param MyVendor\MongoBundle\Document\Group $group
     * @return User
     */
    public function setGroup(\MyVendor\MongoBundle\Document\Group $group)
    {
        $this->group = $group;
        return $this;
    }
} 
```

src/MyVendor/MongoBundle/Document/Group.php

```
<?php
namespace MyVendor\MongoBundle\Document;

use Doctrine\ODM\MongoDB\Mapping\Annotations as MongoDB;

/**
 * @MongoDB\Document
 */
class Group
{

    /**
    * @MongoDB\Id
    */
    private $id;

    /**
     * @MongoDB\ReferenceMany(targetDocument="User", mappedBy="group")
     * @var User[]
     */
    private $users;

    public function __construct()
    {
        $this->users = new \Doctrine\Common\Collections\ArrayCollection();
    }

    /**
     * Add users
     *
     * @param MyVendor\MongoBundle\Document\User $users
     */
    public function addUsers(\MyVendor\MongoBundle\Document\User $users)
    {
        $this->users[] = $users;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T02:49:47.147

问题是为什么在两个文档中都需要 $refs？这不是一种有效的方法，因为您需要分别维护两个对象。如果你真的需要它，那么你需要在两端设置引用。

```
public function setGroup(\MyVendor\MongoBundle\Document\Group $group)
{
    $this->group = $group;
    $group->addUsers($this);
    return $this;
} 
```

第二种选择是仅将 $ref 保留在其中一个文档上。Doctrine 将为您处理所有工作。为此，您只需要设置反向和拥有方（不需要使用`$group->addUsers($this);`）。

对于用户：

```
* @MongoDB\ReferenceOne(targetDocument="Group", inversedBy="users") 
```

对于组：

```
* @MongoDB\ReferenceMany(targetDocument="User", mappedBy="group") 
```

[使用文档](http://docs.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/reference/bidirectional-references.html#owning-and-inverse-sides)总是比使用演示文稿更好。

*ps：OP根据这个答案改变了问题。在否决正确答案之前检查历史记录。*

# php - Mysql没有选择行

> ID：12240573
> 
> 赞同：-1
> 
> 时间：2012-09-02T23:27:00.720
> 
> 标签：php, mysql

好的，所以我开始使用 PDO，因为这里的一些人告诉我不要再使用 mysql_query，现在我遇到了另一个问题。

我开始更改其他功能，因为我的某些页面不再显示任何文本，我已修改为 PDO，这不会产生任何文本：

```
$house_sq = $_GET['house_sq'];
$query = $db->prepare("select house_sq, house_address, house_po, house_city_id from houses_info where house_sq=$house_sq");
$query->execute(array($house_sq => $house_sq));
$rows = $query->fetchAll(PDO::FETCH_ASSOC);
print_r($rows); 
```

不管有什么数字，现在显示任何东西，它适用于 mysql_query ...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T23:27:52.140

那是因为你必须绑定值`:house_sq`

```
$query = $db->prepare("select house_sq, house_address, house_po, house_city_id from houses_info where house_sq=:house_sq");
$query->execute(array(':house_sq' => $house_sq)); 
```

# jquery - 无法通过 $.ajax 加载远程 XML 文件

> ID：12240580
> 
> 赞同：0
> 
> 时间：2012-09-02T23:28:03.683
> 
> 标签：jquery, ajax, wikipedia

我正在尝试加载位于 wikipedia 上的 xml 文件，但在浏览器控制台中出现此错误：

```
XMLHttpRequest cannot load (file url here) Origin http://localhost is not allowed by Access-Control-Allow-Origin. 
```

编码：

```
jQuery(document).ready(function(){
  jQuery.ajax({
    type: 'GET',
    url: 'http://upload.wikimedia.org/some_file.svg',
    dataType: 'xml',
    success: function(xml) {

    }
  });
}); 
```

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T23:29:39.300

正如错误未明确说明的那样，您不能使用 AJAX 从另一个域读取内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T00:42:09.227

这是为了减少一些安全风险。如果资源所在的服务器这么说（坦率地说，就安全方面而言，这有点倒退，但我没有t设计机制，所以不要怪我）。

最灵活的方法是绕过这个在你自己的服务器上使用传递，所以你点击`http://localhost/passThrough/?uri=http%3A%2F%2Fupload.wikimedia.org%2Fsome_file.svg`和你的处理程序（在 ASP.NET、PHP 或其他中）然后从查询中获取 uri，访问它，然后直接返回响应（理想情况下，根据收到的响应发送缓存标头，因此如果目标说它可以缓存一年，你的服务器也会这么说，如果目标说它可以缓存五分钟......）

这消除了技术问题，而不是法律问题 - 例如，如果您不遵守资源的相关许可，那么您现在就是盗版。

# flexslider - 编辑 Flexslider HTML

> ID：12240582
> 
> 赞同：0
> 
> 时间：2012-09-02T23:28:28.693
> 
> 标签：flexslider

我对编码还是很陌生。我下载了 flex 滑块，它在我的网站上运行良好并且工作正常。但是，我无法对滑块的 html 进行任何编辑。它在我的画廊中有“下一个”和“上一个”图像链接，我想替换它们。当我在 firebug 中检查它时，它会显示在 html 中，但是当我通过我的文本编辑器运行我的 html 时（我使用文本伴侣），它根本不显示！

任何想法为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T12:04:08.897

我认为您正在谈论图像左侧和右侧的导航箭头。这可以是“flexslider.css”文件中的更改。如果您使用的是 textmate，则行号为 52。

可能最简单的方法是在 images/bg_direction_nav.png 中找到图像。右键单击图像并使用图像编辑软件打开，例如。Photoshop。然后，一旦您更改了图像，只需将其保存，它将保存在同一文件夹位置。如果您保持图像大小相同，那么您将不必乱用其他任何东西..

# jquery - 使用多个变量调用自定义 Jquery 函数 onClick

> ID：12240590
> 
> 赞同：-3
> 
> 时间：2012-09-02T23:30:14.730
> 
> 标签：jquery, smarty

在 smarty 模板中，当单击 2 个单选按钮中的任何一个时，我需要调用一个函数。这就是我所拥有的，但它不起作用。我知道函数本身的代码确实按预期工作，但是我无法调用该函数。

```
{literal}
    <script type="text/javascript">
        $(function(){
            var shippingnotreqcheck = $("#shipping_notrequired");
            var shippingnotreqcheck2 = $("#shipping_notrequired2");

            shippingnotreqcheck.bind('click',
                $shippingisnotrequired);

            shippingnotreqcheck2.bind('click',
                $shippingisnotrequired);

            shippingisnotrequired = function() 
            {           
                    var billingcheck = 'checked';
                    $("#{/literal}{$Form->GetFieldInputName('shipping_matches_billing')}{literal}").attr('checked', 'checked');
                    $("#{/literal}{$Form->GetFieldInputName('shipping_matches_billing')}{literal}").addClass('disabled');
                    $("#{/literal}{$Form->GetFieldInputName('shipping_matches_billing')}{literal}").attr('disabled', 'disabled');
            }       
        });
    </script>
{/literal} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T23:33:30.547

`$.shippingisnotrequired`不参考`jQuery.fn.shippingisnotrequired`。

* * *

尽管我建议您不要这样做，但如果您想在 jQuery 命名空间中声明您的函数，请使用以下命令：

```
jQuery.shippingisnotrequired = function() 
{
    // The code here...
}; 
```

* * *

不过，这没有理由在 jQuery 命名空间中。只需使用独立功能：

```
shippingnotreqcheck.bind('click', shippingisnotrequired);
shippingnotreqcheck2.bind('click', shippingisnotrequired);

function shippingisnotrequired () 
{
    // Code goes here...
} 
```

# javascript - Google 闭包和生成的 getter/setter

> ID：12240591
> 
> 赞同：3
> 
> 时间：2012-09-02T23:30:45.503
> 
> 标签：javascript, google-closure-compiler, google-closure, kineticjs

我正在尝试让 KineticJS 与 Google Closure Compiler 一起使用。然而，KineticJS 根据变量的名称生成它的 getter 和 setter。

像这样的东西：

```
// add getter and setter methods
Kinetic.Node.addSetters = function(constructor, arr) {
    for(var n = 0; n < arr.length; n++) {
        var attr = arr[n];
        this._addSetter(constructor, attr);
    }
};
Kinetic.Node.addGetters = function(constructor, arr) {
    for(var n = 0; n < arr.length; n++) {
        var attr = arr[n];
        this._addGetter(constructor, attr);
    }
};
Kinetic.Node.addGettersSetters = function(constructor, arr) {
    this.addSetters(constructor, arr);
    this.addGetters(constructor, arr);
};
Kinetic.Node._addSetter = function(constructor, attr) {
    var that = this;
    var method = 'set' + attr.charAt(0).toUpperCase() + attr.slice(1);
    constructor.prototype[method] = function() {
        var arg;
        if(arguments.length == 1) {
            arg = arguments[0];
        }
        else {
            arg = Array.prototype.slice.call(arguments);
        }
        var obj = {};
        obj[attr] = arg;
        this.setAttrs(obj);
    };
};
Kinetic.Node._addGetter = function(constructor, attr) {
    var that = this;
    var method = 'get' + attr.charAt(0).toUpperCase() + attr.slice(1);
    constructor.prototype[method] = function(arg) {
        return this.attrs[attr];
    };
};
// add getters setters
Kinetic.Node.addGettersSetters(Kinetic.Node, ['x', 'y', 'scale', 'rotation', 'opacity', 'name', 'id', 'offset', 'draggable', 'dragConstraint', 'dragBounds', 'listening']); 
```

因此，使用 addGettersSetters 方法，您可以根据变量的名称生成 getter 和 setter。

然而，谷歌关闭无法解释这一点，并给出警告（不是错误，只是警告，但仍然......）：警告 - 属性 setImage 从未在 Kinetic.Image 上定义

我可以为每个 getter 和 setter 添加外部变量。或者，我可以重写所有 getter/setter 的东西，手动使其成为实际的方法（非生成的方法）。最后一部分似乎是最好的，从那时起 Closure 可以优化它们并用它做一些魔法（我希望。）虽然这将是相当多的工作，所以我想知道，是否可以运行我的程序，所以它生成getter 和 setter，然后提取它们？或者，如果有人有更好的主意，那也欢迎。

谢谢！-巴勃罗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T05:20:35.637

哪个答案最好取决于您使用的编译模式以及您是如何使用库的。

如果您使用 ADVANCED 模式并使用其他源编译库，则重写可能是最好的（我假设这是您当前正在尝试做的事情）。但是，如果您要单独加载库或将库源连接到 ADVANCED 编译源，则外部定义是一个不错的选择（如果库维护者不支持 Closure Compiler ADVANCED 编译，这是一个好方法）。

人们创建了各种工具来帮助为库自动生成外部，但通常最好有人创建外部并与库一起维护它们。一些库 externs 托管在 Closure Compiler 源存储库中并由社区维护，因此这始终是一种选择。

# java - 如何在 JAVA 中打印参考内容？

> ID：12240593
> 
> 赞同：0
> 
> 时间：2012-09-02T23:30:50.153
> 
> 标签：java, string, sorting, reference

新手问题来了。试图让我的头脑围绕 JAVA。

我如何打印出参考的内容而不仅仅是他们的位置？我的程序是从用户那里获取一些文本，然后以相反的顺序打印出来。

这是我的程序（到目前为止）：

```
package myProgram;
import javax.swing.JOptionPane;
public class someRandomClass {
public static void main(String[] args) {
    String word = JOptionPane.showInputDialog("Write som text here");
    StringBuilder outPut = new StringBuilder();
    for (int i = word.length()-1; i>=0; i--){
        outPut.append(i);
    }
    System.out.println(outPut.toString());
  }
} 
```

我很高兴获得任何帮助和提示！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T23:33:59.863

在行

```
 outPut.append(i); 
```

您正在附加循环计数器的值。你肯定是说

```
 outPut.append(word.charAt(i)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T23:34:07.207

您似乎附加了整数而不是适当的字符。试试这个：

`outPut.append(word.substring(i, i + 1))`

这样， 的各个字符`word`将附加到您的`StringBuilder`. 请注意，该`append`方法也可以将 a`char`作为参数，因此您也可以使用`word.charAt(i)`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T23:41:24.707

那么，您想在该位置发射角色吗？尝试使用[`String.charAt`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#charAt%28int%29).

```
outPut.append(word.charAt(i)); 
```

不过，我可能会避免这种情况，而只是索引`char[]`from [`String.toCharArray`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#toCharArray%28%29)。

老实说，我会避免手动执行反转循环...尝试如下操作：

```
final String word = JOptionPane.showInputDialog("Enter text below");
System.out.println(new StringBuilder(word).reverse()); 
```

[`StringBuilder.reverse`](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html#reverse%28%29)应该为您完成工作（也可能以更有效的方式）。您也不需要`toString`手动调用，因为`println`将为您这样做。

# ruby - 理解 Ruby 类实例变量

> ID：12240597
> 
> 赞同：8
> 
> 时间：2012-09-02T23:31:39.167
> 
> 标签：ruby

> **可能重复：**
> [为什么 Ruby setter 需要“self”。班级内的资格？](https://stackoverflow.com/questions/44715/why-do-ruby-setters-need-self-qualification-within-the-class)

有人可以解释以下之间的区别，以及为什么它不像人们所期望的那样：

```
# version #1
class User
  def initialize(name, age)
    @name = name
    @age = age
  end
end

#version #2
class User
  attr_accessor :name, :age
  def initialize(name, age)
    @name = name
    @age = age
  end
end

#version #3
class User
  attr_accessor :name, :age
  def initialize(name, age)
    self.name = name
    self.age = age
  end
end 
```

据我了解，在方法中，分配时必须使用`self`关键字。为什么不能在`initialize`方法中使用它？或者你可以吗？我尝试使用它，但它似乎没有按预期工作，我只是对使用哪种技术以及何时使用以及更重要的*是为什么*感到困惑。

**我真的希望有人可以一劳永逸地为我解决这个问题:)**

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-02T23:47:15.123

Version 1: The constructor creates two instance variables, `@name` and `@age`. These two variables are private (as are all Ruby instance variables), so you can't access them outside of the class.

Version 2: Exact same thing as #1 except that you're also defining a getter and setter method for the two variables. What `attr_accessor` does is create two methods for each parameter that allow you to get/set the value of the instance variable with the same name.

Version 3: Exact same as #2 except that in your constructor you're not setting the instance variables directly, instead you're calling the `User#name=` and `User#age=` methods to set the value of your instance variables instead of setting them directly.

To clarify the difference between setting the instance variable directly and calling a setter method, consider this example:

```
user = User.new "Rob", 26
user.name = "Joe" 
```

Here you are not actually setting the `@name` variable of `user` directly, instead you are calling a method called `name=` on `user` which sets the value of `@name` for you. When you did the call to `attr_accessor` in versions #2 and #3, it defined that method for you. However in version #1 you did not call `attr_accessor`, so the example above would be invalid since there is no `name=` method.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T23:39:02.100

您不需要在方法中使用 self ；对于实例变量，您应该直接使用@ 进行赋值，就像在版本 1 或 2 中一样。self 不像在 Python 中那样；例如，它用于声明类方法（如 C++ 中的静态函数）。

# html - SlidesJS 显示：没有一个不能正常工作

> ID：12240598
> 
> 赞同：0
> 
> 时间：2012-09-02T23:31:48.893
> 
> 标签：html, css, slideshow

我最近开始为一个朋友编写一个网站，他问我是否可以在网站上添加幻灯片来显示图像。所以因为我不懂 Javascript，所以我找到了一个可以使用的开源免费幻灯片，名为 SlidesJS。我已经设法自定义了所有内容，但是现在当图像显示在幻灯片上而不是滑过并显示在幻灯片上时，它们会在整个屏幕上滑动，覆盖其他内容，因此变得非常烦人。我曾尝试 display:none 尝试在图像滑入到位时隐藏图像，但它似乎不起作用！这是我的代码：

HTML：

```
<div id="ss">

    <div id="slides">
        <div class="slides_container">
            <div class="slide">
                <a href="http://www.flickr.com/photos/jliba/4665625073/" title="145.365 - Happy Bokeh Thursday! | Flickr - Photo Sharing!" target="_blank"><img src="img/slide-1.jpg" width="692" height="395" alt="Slide 1"></a>
            </div>
            <div class="slide">
                <a href="http://www.flickr.com/photos/stephangeyer/3020487807/" title="Taxi | Flickr - Photo Sharing!" target="_blank"><img src="img/slide-2.jpg" width="690" height="395" alt="Slide 2"></a>
            </div>
            <div class="slide">
                <a href="http://www.flickr.com/photos/childofwar/2984345060/" title="Happy Bokeh raining Day | Flickr - Photo Sharing!" target="_blank"><img src="img/slide-3.jpg" width="690" height="395" alt="Slide 3"></a>
            </div>
            <div class="slide">
                <a href="http://www.flickr.com/photos/b-tal/117037943/" title="We Eat Light | Flickr - Photo Sharing!" target="_blank"><img src="img/slide-4.jpg" width="690" height="395" alt="Slide 4"></a>
            </div>
            <div class="slide">
                <a href="http://www.flickr.com/photos/bu7amd/3447416780/" title="&ldquo;I must go down to the sea again, to the lonely sea and the sky; and all I ask is a tall ship and a star to steer her by.&rdquo; | Flickr - Photo Sharing!" target="_blank"><img src="img/slide-5.jpg" width="690" height="395" alt="Slide 5"></a>
            </div>
            <div class="slide">
                <a href="http://www.flickr.com/photos/streetpreacher/2078765853/" title="twelve.inch | Flickr - Photo Sharing!" target="_blank"><img src="img/slide-6.jpg" width="690" height="395" alt="Slide 6"></a>
            </div>
            <div class="slide">
                <a href="http://www.flickr.com/photos/aftab/3152515428/" title="Save my love for loneliness | Flickr - Photo Sharing!" target="_blank"><img src="img/slide-7.jpg" width="690" height="395" alt="Slide 7"></a>
            </div>
        </div>
        <a href="#" class="prev"><img src="img/arrow-prev.png" width="24" height="43" alt="Arrow Prev"></a>
        <a href="#" class="next"><img src="img/arrow-next.png" width="24" height="43" alt="Arrow Next"></a>
    </div>
    <img src="img/example-frame.png" alt="Example Frame" name="frame" width="739" height="341" id="frame">
</div>
<div class="clear"></div>
</div> 
```

CSS：

```
#ss {
width:900px;
height:500px;
position:relative;
margin-left:30px;
}

#frame {
position:absolute;
z-index:0;
width:900px;
height:500px;
top:-3px;
left:-80px;

}

/*
Slideshow
*/

#slides {
position:absolute;
top:24px;
left:24px;
z-index:100;
}

/* 
Slides container
Important:
Set the width of your slides container
Set to display none, prevents content flash
*/ 

.slides_container {
width:900px;
overflow:hidden;
position:relative;
display:none;
}

/*
Each slide
Important:
Set the width of your slides
If height not specified height will be set by the slide content
Set to display block
*/

.slides_container div.slide {
width:692px;
height:395px;
display:none;
}

/*
Next/prev buttons
*/

#slides .next,#slides .prev {
position:absolute;
top:165px;
left:-44px;
width:24px;
height:43px;
display:block;
z-index:101;
}

#slides .next {
left:710px;
}

/*
Pagination
*/

.pagination {
margin:26px auto 0;
width:100px;
margin-left:260px;
}

.pagination li {
float:left;
margin:0 1px;
list-style:none;
}

.pagination li a {
display:block;
width:12px;
height:0;
padding-top:12px;
background-image:url(../img/pagination.png);
background-position:0 0;
float:left;
overflow:hidden;
}

.pagination li.current a {
background-position:0 -12px;
}

ThankYou in Advance. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T03:32:28.397

尝试将整个事物放在具有给定宽度和高度的 div 中，并添加 css 属性`overflow:hidden;`

# ffmpeg - 从 mpeg 中提取 DCT 系数

> ID：12240605
> 
> 赞同：0
> 
> 时间：2012-09-02T23:33:23.893
> 
> 标签：ffmpeg

我是 FFMPEG 的新手。我知道如何提取关键帧，但现在我想提取那些 I 帧的 DC 系数。

您能否帮助编写 FFMPEG 命令的正确语法以获取 DC 系数？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T05:47:00.630

FFmpeg 命令不会给你直流系数。它并非旨在为您提供视频的句法元素。您将必须下载 ffmpeg 源代码。更改您选择的解码器的源代码以写入元素 [I 帧中的 DC 系数] 并将其转储到文件中。

# sql - 检查更改历史记录中的值是否连续 y 个月期间大于 x

> ID：12240612
> 
> 赞同：5
> 
> 时间：2012-09-02T23:35:29.760
> 
> 标签：sql, tsql

我有成员级别更改的表格。它具有所有成员级别的历史变化和发生变化的日期。例如，我可以列出成员编号 5 的更改：

```
select * from memberlevelhistory where member = 5 
```

结果：

```
member  changedate  level
5       2012-04-01  2
5       2012-03-01  3
5       2012-02-01  2
5       2011-02-01  6
5       2011-02-01  6
5       2010-03-15  6
5       2010-02-01  5
5       2010-01-01  5
5       2009-10-01  4
5       2009-08-27  2
5       2009-08-01  1 
```

历史表中的最后一个条目是当前级别。

问题：如何列出所有在3个月或更长时间内等级高于或等于3的成员？

这是问题的简化版本。为了让它更有趣，我只需要在这 3 个月期间没有低于起始水平的成员。因此，如果成员在 3 个月期间以 4 级开始，并且在上个月仅为 3 级，则该成员将被排除在列表之外。

任何帮助，即使是简化的问题，也非常感谢。

扩大的视野：

我还需要在过去 6 个月的窗口内发生 >=3 个月的水平 >=3 的时期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T10:07:15.357

这可能是`not exists`. 如果在接下来的三个月内没有其他条目的级别低于当前选择的记录，则该条目有效。这解决了这两个要求。在级别合适但跨度未知的情况下，每个成员的最后一个条目可能存在问题。我已决定删除这些记录，但您可能有其他想法。

[带有示例的 Sql Fiddle 在这里](http://sqlfiddle.com/#!3/d22bd/1)。

```
select distinct mlh.member
  from memberlevelhistory mlh
 where mlh.level >= 3
   and not exists
       (
         select null
           from memberlevelhistory mlh2
          where mlh2.member = mlh.member
            and mlh2.changedate >= mlh.changedate
            and mlh2.changedate < dateadd(month, 3, mlh.changedate)
            and mlh2.level < mlh.level
       )
    -- The last entry might have appropriate level
    -- But we cannot tell how long it lasted,
    -- So we are going to remove it.
   and exists
       (
         select null
           from memberlevelhistory mlh3
          where mlh3.member = mlh.member
            and mlh3.changedate > mlh.changedate
       ) 
```

编辑：

我已将 not exists() 重写为左连接并添加了“最后一个条目持续到今天”标准。

[带有示例的 Sql Fiddle 在这里。](http://sqlfiddle.com/#!3/44bea/1)

```
select distinct mlh.member
  from memberlevelhistory mlh
  left join memberlevelhistory mlh2
    on mlh2.member = mlh.member
   and mlh2.changedate >= mlh.changedate
   and mlh2.changedate < dateadd(month, 3, mlh.changedate)
   and mlh2.level < mlh.level
 where mlh.level >= 3
   and mlh2.member is null
   and datediff(month, mlh.changedate, getdate()) >= 3 
```

**查询重写：**

```
; with ranges as 
(
  select mlh.member, mlh.changedate StartRange, min(isnull(mlh2.changedate, getdate())) EndDate
    from memberlevelhistory mlh
    left join memberlevelhistory mlh2
      on mlh2.member = mlh.member
     and mlh2.changedate >= mlh.changedate
     and mlh2.level < mlh.level
   where mlh.level >= 3
  group by mlh.member, mlh.changedate
 having datediff (month, min(isnull(mlh2.changedate, getdate())), getdate()) <= 6
    and datediff (month, mlh.changedate, min(isnull(mlh2.changedate, getdate()))) >= 3
)
select distinct member
  from ranges 
```

[而 Sql Fiddle 就在这里](http://sqlfiddle.com/#!3/31f91/15)。

我认为应该包括 100 和 101，因为两者都在 3 个月内运行良好，而这发生在 3 月，也就是在这一刻之前的 6 个月。

我所做的是在某人运行良好时生成范围，然后在 3 个月或更长时间的持续时间和过去六个月的结束日期测试此范围。

**更新**：如果我最终做对了，您需要在过去六个月中*持续*三个月。计算一个可能会将更改日期截断为当前日期 - 六个月。使用它作为起点，并找到一个范围的终点，首先`mlh`以较低级别和较高日期作为终点，有足够的信息来计算持续时间。

```
; with ranges as 
(
  select mlh.member, 
  -- If good range starts more than six months before today
  -- truncate it to today - 6 months
         case when datediff (month, mlh.changedate, getdate()) > 6
              then dateadd(month, -6, getdate())
              else mlh.changedate 
              end StartRange,
  -- First bad mlh after current changedate
         min(isnull(mlh2.changedate, getdate())) EndRange
    from memberlevelhistory mlh
    left join memberlevelhistory mlh2
      on mlh2.member = mlh.member
     and mlh2.changedate >= mlh.changedate
     and mlh2.level < mlh.level
   where mlh.level >= 3
  group by mlh.member, mlh.changedate
  -- As above, limit good range to max six months before today
  -- And only get those lasting at least three months
 having datediff (month, case when datediff(month, mlh.changedate, getdate()) > 6
                              then dateadd(month, -6, getdate())
                              else mlh.changedate 
                          end, 
                         min(isnull(mlh2.changedate, getdate()))) >= 3
)
select distinct member
  from ranges 
```

[带有示例的 Sql Fiddle 在这里](http://sqlfiddle.com/#!3/31f91/43)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T02:22:40.513

```
SELECT * FROM (
  SELECT MEMBER, CHANGEDATE, LEVEL, COUNT(LEVEL) AS COUNT
  FROM MEMBERLEVELHISTORY
  GROUP BY MEMBER, CHANGEDATE, LEVEL)
WHERE LEVEL >= 3
AND COUNT >= 3; 
```

这应该对您的简化版本有所帮助，但是为了连续分组结果超出了我的范围！

# python - 模块重载的python 3.2中的错误实现接口

> ID：12240614
> 
> 赞同：0
> 
> 时间：2012-09-02T23:36:32.700
> 
> 标签：python, interface, python-3.x

我正在尝试使用模块“重载” [http://www.python.org/dev/peps/pep-3124/#interfaces-and-adaptation在python中实现一个接口](http://www.python.org/dev/peps/pep-3124/#interfaces-and-adaptation)

问题是尝试使用python3.2运行时没有发现模块重载

```
 from overloading import abstract
 from overloading import Interface 
```

```
 ImportError: No module named overloading 
```

如何解决我的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T01:33:16.553

PEP 是 Python 增强提案。并非所有 PEP 都被接受。由于实施方面存在一些不确定性，**PEP 3124的作者** [决定推迟该提案](http://mail.python.org/pipermail/python-3000/2007-July/008784.html)。但是，请注意，这是在**2007 年**，从那以后没有任何进展，所以我不会屏住呼吸等待这个。

如果您正在使用接口检查机制，则可以使用标准库中的模块，该模块大致涵盖了**PEP 3124**提出`abc`的相同接口和适配基础。

 **对于更全功能的解决方案，我强烈推荐[`zope.interface`](http://docs.zope.org/zope.interface/). 如果你对 zope 命名空间感到厌烦（你不应该这样，它是完全独立的），还有其他轻量级接口解决方案，例如[`visage`](https://github.com/jwp/py-visage).**

# iphone - AVCaptureSession 设置 Low、Medium 和 High，它们各自代表什么 res？

> ID：12240625
> 
> 赞同：12
> 
> 时间：2012-09-02T23:39:20.483
> 
> 标签：iphone, objective-c, ios, ipad

我的应用程序录制视频，我使用设置来设置录制质量。我想知道是否有人知道它们各自代表什么分辨率？

低似乎很小而且很不值钱。

虽然高似乎是真正的高分辨率，并且这些录音的文件大小非常高。

```
if (appDelegate.vidRes == 1)
{
    NSLog(@"******   >>>>> SETTING VIDEO RES TO LOW <<<<<   *******");
    [session setSessionPreset: AVCaptureSessionPresetLow];
}
else if (appDelegate.vidRes == 2)
{
    NSLog(@"******   >>>>> SETTING VIDEO RES TO MED <<<<<   *******");
    [session setSessionPreset: AVCaptureSessionPresetMedium];
}
else
{
    NSLog(@"******   >>>>> SETTING VIDEO RES TO HIGH <<<<<   *******");
    [session setSessionPreset: AVCaptureSessionPresetHigh];
} 
```

我想找到一些不错的替代 Low，它的质量太低了。和高质量太高。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-02T23:47:35.467

```
Preset                          3G       3GS    4 back      4 front

AVCaptureSessionPresetHigh    400x304  640x480  1280x720    640x480
AVCaptureSessionPresetMedium  400x304  480x360  480x360     480x360
AVCaptureSessionPresetLow     400x306  192x144  192x144     192x144
AVCaptureSessionPreset640x480   NA     640x480  640x480     640x480
AVCaptureSessionPreset1280x720  NA       NA     1280x720    NA
AVCaptureSessionPresetPhoto     NA       NA     NA          NA 
```

资料来源：[http ://cmgresearch.blogspot.com/2010/10/augmented-reality-on-iphone-with-ios40.html](http://cmgresearch.blogspot.com/2010/10/augmented-reality-on-iphone-with-ios40.html)

下表包含较新的设备，来源是[Method to find device's camera resolution iOS](https://stackoverflow.com/questions/19422322/method-to-find-devices-camera-resolution-ios#31964333)

```
+-----------------------+--------------+---------------------------------+---------------+
|        Device         |    Camera    |     AVCaptureSessionPreset      |  Resolution   |
+-----------------------+--------------+---------------------------------+---------------+
| iPhone 4S             | FRONT        |                                 |               |
|                       |              | AVCaptureSessionPresetPhoto     | 640x480       |
|                       |              | AVCaptureSessionPresetHigh      | 640x480       |
|                       |              | AVCaptureSessionPresetMedium    | 480x360       |
|                       |              | AVCaptureSessionPresetLow       | 192x144       |
|                       |              | AVCaptureSessionPreset640x480   | 640x480       |
|                       |              | AVCaptureSessionPreset1280x720  | not supported |
|                       |              | AVCaptureSessionPreset1920x1080 | not supported |
|                       | BACK         |                                 |               |
|                       |              | AVCaptureSessionPresetPhoto     | 3264x2448     |
|                       |              | AVCaptureSessionPresetHigh      | 1920x1080     |
|                       |              | AVCaptureSessionPresetMedium    | 480x360       |
|                       |              | AVCaptureSessionPresetLow       | 192x144       |
|                       |              | AVCaptureSessionPreset640x480   | 640x480       |
|                       |              | AVCaptureSessionPreset1280x720  | 1280x720      |
|                       |              | AVCaptureSessionPreset1920x1080 | 1920x1080     |
+-----------------------+--------------+---------------------------------+---------------+
| iPhone 5/5C/5S/6/6+   |              |                                 |               |
|                       | FRONT        |                                 |               |
|                       |              | AVCaptureSessionPresetPhoto     | 1280x960      |
|                       |              | AVCaptureSessionPresetHigh      | 1280x720      |
|                       |              | AVCaptureSessionPresetMedium    | 480x360       |
|                       |              | AVCaptureSessionPresetLow       | 192x144       |
|                       |              | AVCaptureSessionPreset640x480   | 640x480       |
|                       |              | AVCaptureSessionPreset1280x720  | 1280x720      |
|                       |              | AVCaptureSessionPreset1920x1080 | not supported |
|                       | BACK         |                                 |               |
|                       |              | AVCaptureSessionPresetPhoto     | 3264x2448     |
|                       |              | AVCaptureSessionPresetHigh      | 1920x1080     |
|                       |              | AVCaptureSessionPresetMedium    | 480x360       |
|                       |              | AVCaptureSessionPresetLow       | 192x144       |
|                       |              | AVCaptureSessionPreset640x480   | 640x480       |
|                       |              | AVCaptureSessionPreset1280x720  | 1280x720      |
|                       |              | AVCaptureSessionPreset1920x1080 | 1920x1080     |
+-----------------------+--------------+---------------------------------+---------------+
| iPhone 6S/6S          |              |                                 |               |
|                       | FRONT camera |                                 |               |
|                       |              | AVCaptureSessionPresetPhoto     | 1280x960      |
|                       |              | AVCaptureSessionPresetHigh      | 1280x720      |
|                       |              | AVCaptureSessionPresetMedium    | 480x360       |
|                       |              | AVCaptureSessionPresetLow       | 192x144       |
|                       |              | AVCaptureSessionPreset640x480   | 640x480       |
|                       |              | AVCaptureSessionPreset1280x720  | 1280x720      |
|                       |              | AVCaptureSessionPreset1920x1080 | not supported |
|                       | BACK camera  |                                 |               |
|                       |              | AVCaptureSessionPresetPhoto     | 4032x3024     |
|                       |              | AVCaptureSessionPresetHigh      | 1920x1080     |
|                       |              | AVCaptureSessionPresetMedium    | 480x360       |
|                       |              | AVCaptureSessionPresetLow       | 192x144       |
|                       |              | AVCaptureSessionPreset640x480   | 640x480       |
|                       |              | AVCaptureSessionPreset1280x720  | 1280x720      |
|                       |              | AVCaptureSessionPreset1920x1080 | 1920x1080     |
+-----------------------+--------------+---------------------------------+---------------+
| iPad 2                |              |                                 |               |
|                       | FRONT        |                                 |               |
|                       |              | AVCaptureSessionPresetPhoto     | 640x480       |
|                       |              | AVCaptureSessionPresetHigh      | 640x480       |
|                       |              | AVCaptureSessionPresetMedium    | 480x360       |
|                       |              | AVCaptureSessionPresetLow       | 192x144       |
|                       |              | AVCaptureSessionPreset640x480   | 640x480       |
|                       |              | AVCaptureSessionPreset1280x720  | not supported |
|                       |              | AVCaptureSessionPreset1920x1080 | not supported |
|                       | BACK         |                                 |               |
|                       |              | AVCaptureSessionPresetPhoto     | 960x720       |
|                       |              | AVCaptureSessionPresetHigh      | 1280x720      |
|                       |              | AVCaptureSessionPresetMedium    | 480x360       |
|                       |              | AVCaptureSessionPresetLow       | 192x144       |
|                       |              | AVCaptureSessionPreset640x480   | 640x480       |
|                       |              | AVCaptureSessionPreset1280x720  | 1280x720      |
|                       |              | AVCaptureSessionPreset1920x1080 | not supported |
+-----------------------+--------------+---------------------------------+---------------+
| iPad 3                |              |                                 |               |
|                       | FRONT        |                                 |               |
|                       |              | AVCaptureSessionPresetPhoto     | 640x480       |
|                       |              | AVCaptureSessionPresetHigh      | 640x480       |
|                       |              | AVCaptureSessionPresetMedium    | 480x360       |
|                       |              | AVCaptureSessionPresetLow       | 192x144       |
|                       |              | AVCaptureSessionPreset640x480   | 640x480       |
|                       |              | AVCaptureSessionPreset1280x720  | not supported |
|                       |              | AVCaptureSessionPreset1920x1080 | not supported |
|                       | BACK         |                                 |               |
|                       |              | AVCaptureSessionPresetPhoto     | 2592x1936     |
|                       |              | AVCaptureSessionPresetHigh      | 1920x1080     |
|                       |              | AVCaptureSessionPresetMedium    | 480x360       |
|                       |              | AVCaptureSessionPresetLow       | 192x144       |
|                       |              | AVCaptureSessionPreset640x480   | 640x480       |
|                       |              | AVCaptureSessionPreset1280x720  | 1280x720      |
|                       |              | AVCaptureSessionPreset1920x1080 | 1920x1080     |
+-----------------------+--------------+---------------------------------+---------------+
| iPad 4/Air            |              |                                 |               |
| iPad Mini 1/2/3       |              |                                 |               |
| iPod 5G               |              |                                 |               |
|                       | FRONT        |                                 |               |
|                       |              | AVCaptureSessionPresetPhoto     | 1280x960      |
|                       |              | AVCaptureSessionPresetHigh      | 1280x720      |
|                       |              | AVCaptureSessionPresetMedium    | 480x360       |
|                       |              | AVCaptureSessionPresetLow       | 192x144       |
|                       |              | AVCaptureSessionPreset640x480   | 640x480       |
|                       |              | AVCaptureSessionPreset1280x720  | 1280x720      |
|                       |              | AVCaptureSessionPreset1920x1080 | not supported |
|                       | BACK         |                                 |               |
|                       |              | AVCaptureSessionPresetPhoto     | 2592x1936     |
|                       |              | AVCaptureSessionPresetHigh      | 1920x1080     |
|                       |              | AVCaptureSessionPresetMedium    | 480x360       |
|                       |              | AVCaptureSessionPresetLow       | 192x144       |
|                       |              | AVCaptureSessionPreset640x480   | 640x480       |
|                       |              | AVCaptureSessionPreset1280x720  | 1280x720      |
|                       |              | AVCaptureSessionPreset1920x1080 | 1920x1080     |
+-----------------------+--------------+---------------------------------+---------------+
| iPad Air 2            |              |                                 |               |
| iPad Mini 4           |              |                                 |               |
| iPad Pro              |              |                                 |               |
|                       | FRONT        |                                 |               |
|                       |              | AVCaptureSessionPresetPhoto     | 1280x960      |
|                       |              | AVCaptureSessionPresetHigh      | 1280x720      |
|                       |              | AVCaptureSessionPresetMedium    | 480x360       |
|                       |              | AVCaptureSessionPresetLow       | 192x144       |
|                       |              | AVCaptureSessionPreset640x480   | 640x480       |
|                       |              | AVCaptureSessionPreset1280x720  | 1280x720      |
|                       |              | AVCaptureSessionPreset1920x1080 | not supported |
|                       | BACK         |                                 |               |
|                       |              | AVCaptureSessionPresetPhoto     | 3264x2448     |
|                       |              | AVCaptureSessionPresetHigh      | 1920x1080     |
|                       |              | AVCaptureSessionPresetMedium    | 480x360       |
|                       |              | AVCaptureSessionPresetLow       | 192x144       |
|                       |              | AVCaptureSessionPreset640x480   | 640x480       |
|                       |              | AVCaptureSessionPreset1280x720  | 1280x720      |
|                       |              | AVCaptureSessionPreset1920x1080 | 1920x1080     |
+-----------------------+--------------+---------------------------------+---------------+
| iPod Touch 5          |              |                                 |               |
|                       | FRONT        |                                 |               |
|                       |              | AVCaptureSessionPresetPhoto     | 1280x960      |
|                       |              | AVCaptureSessionPresetHigh      | 1280x720      |
|                       |              | AVCaptureSessionPresetMedium    | 480x360       |
|                       |              | AVCaptureSessionPresetLow       | 192x144       |
|                       |              | AVCaptureSessionPreset640x480   | 640x480       |
|                       |              | AVCaptureSessionPreset1280x720  | 1280x720      |
|                       |              | AVCaptureSessionPreset1920x1080 | not supported |
|                       | BACK         |                                 |               |
|                       |              | AVCaptureSessionPresetPhoto     | 2592x1936     |
|                       |              | AVCaptureSessionPresetHigh      | 1920x1080     |
|                       |              | AVCaptureSessionPresetMedium    | 480x360       |
|                       |              | AVCaptureSessionPresetLow       | 192x144       |
|                       |              | AVCaptureSessionPreset640x480   | 640x480       |
|                       |              | AVCaptureSessionPreset1280x720  | 1280x720      |
|                       |              | AVCaptureSessionPreset1920x1080 | 1920x1080     |
+-----------------------+--------------+---------------------------------+---------------+
| iPod Touch 6          |              |                                 |               |
|                       | FRONT        |                                 |               |
|                       |              | AVCaptureSessionPresetPhoto     | 1280x960      |
|                       |              | AVCaptureSessionPresetHigh      | 1280x720      |
|                       |              | AVCaptureSessionPresetMedium    | 480x360       |
|                       |              | AVCaptureSessionPresetLow       | 192x144       |
|                       |              | AVCaptureSessionPreset640x480   | 640x480       |
|                       |              | AVCaptureSessionPreset1280x720  | 1280x720      |
|                       |              | AVCaptureSessionPreset1920x1080 | not supported |
|                       | BACK         |                                 |               |
|                       |              | AVCaptureSessionPresetPhoto     | 3264x2448     |
|                       |              | AVCaptureSessionPresetHigh      | 1920x1080     |
|                       |              | AVCaptureSessionPresetMedium    | 480x360       |
|                       |              | AVCaptureSessionPresetLow       | 192x144       |
|                       |              | AVCaptureSessionPreset640x480   | 640x480       |
|                       |              | AVCaptureSessionPreset1280x720  | 1280x720      |
|                       |              | AVCaptureSessionPreset1920x1080 | 1920x1080     |
+-----------------------+--------------+---------------------------------+---------------+ 
```

要设置自己的分辨率，您必须在 AVCaptureSessionPreset 中记录数据，检查它是什么类型的类以及如何模拟此类数据，然后自己输入数据。

# php - Shorten a URL with HREF link

> ID：12240628
> 
> 赞同：1
> 
> 时间：2012-09-02T23:39:53.930
> 
> 标签：php, url

ok i'm trying to shorten a url but keep the actual link intact.

I'm using this code at the moment, can't find a simple working solution...

```
$description = preg_replace('/https?:\/\/[^\s<]+/i', '<a href="\0">\0</a>', $description); 
```

example of what i want to achieve.

input [http://www.example.com/839283ur9283ru2938u2389ru23irj3.html](http://www.example.com/839283ur9283ru2938u2389ru23irj3.html)

output [http://www.example.com/839283u](http://www.example.com/839283u)...

```
<a href="http://www.example.com/839283ur9283ru2938u2389ru23irj3.html">http://www.example.com/839283u...</a> 
```

i need it to automatically find url links in a description and make them active? while cutting them down to a given length.

ty

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T23:45:10.510

try with [parse_url()](http://uk.php.net/parse_url) and [substr()](http://uk.php.net/substr)

```
$url = parse_url('http://www.example.com/839283ur9283ru2938u2389ru23irj3.html');
$newUrl = $url['scheme'].'://'.$url['host'].substr($url['path'], 0, 8);
echo '<a href="'.$url.'">'.$newUrl.'...</a>'; 
```

# tsql - T-SQL substring() 行为

> ID：12240629
> 
> 赞同：0
> 
> 时间：2012-09-02T23:40:24.843
> 
> 标签：tsql, substring

我在阅读的书中遇到了一些代码，这些代码让我质疑`SUBSTRING()`函数的行为。该代码应该搜索 NYSIIS 替换表（语音编码示例）并根据表中的位置“结束”“中间”或“开始”替换输入字符串的中间“N-gram”。摘录如下：

NYSIIS 替换表：

```
位置 NGram 更换

中AA
中 AW AA
中 EA
中 EV 自动对焦
中 EW AA
中IA

```

```
USE [AdventureWorks]

DECLARE @Result NVARCHAR(100) = N'NEVADA';

DECLARE @Replacement NVARCHAR(10);

DECLARE @i INT;

SET @i = 1;

WHILE @i <= LEN (@Result)

BEGIN

    SET @Replacement = NULL;

    -- Grab the middle-of-name replacement n-gram

    SELECT TOP(1)  @Replacement = Replacement                   
    FROM dbo.NYSIIS_Replacements                         
    WHERE Location = N'Mid'
        AND SUBSTRING(@Result, @i, LEN(NGram)) = NGram
    ORDER BY LEN(NGram) DESC;

    SET @Replacement = COALESCE(@Replacement, SUBSTRING(@Result, @i, 1));   

    -- If we found a replacement, apply it

    SET @Result = STUFF(@Result, @i, LEN(@Replacement), @Replacement) 

    -- Move on to the next n-gram

    SET @i = @i + COALESCE(LEN(@Replacement), 1);

END;

SELECT @Result; 
```

当`SUBSTRING()`函数遇到 2 个可能的匹配时，以“NEVADA”为例（表中的“E”和“EV”）它如何“知道”使用 2 个字母的字符串而不是一个？这是预期的行为`SUBSTRING()`吗？

我假设该`@Replacement`变量将同时包含“A”和“AF”，但在调试时它似乎只在第一次迭代中包含“N”，在第二次迭代中包含“AF”。

我也无法理解为什么`TOP`并且`ORDER BY`被包含在这个例子中。将它们注释掉会产生相同的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T01:19:45.213

该`ORDER BY`子句使用模式的长度并按降序排序，因此最长的匹配将首先出现。该`TOP`子句将结果限制在第一行。删除该`ORDER BY`子句会使结果不可预测。

`COALESCE`用于设置`@Replacement`替换模式，或者如果没有找到模式匹配，则设置为字符串中位置`@i`的字符。`@Result`

# ios - Short IAP Receipt

> ID：12240630
> 
> 赞同：0
> 
> 时间：2012-09-02T23:40:31.307
> 
> 标签：ios, in-app-purchase

We have an app in production right now that sends IAP receipts to our server that are obviously too short and not verified by apple by our server. The long receipts that get properly verified by Apple are 3192 in length. The short receipts are all 28 in length.

Does anyone have any idea why this might happen?

--

The short receipts are like: "Y29tLnVydXMuaWFwLjM4Nzg..."

The long receipts are like: "ewoJInNpZ25hdHVyZSIgPSAiQXNBcUNJZ05hVmhEeDNtV1AwU0dDWGd0WUlPRmh4\r\nWEp1SStJaVNtWit6c3owZEVnTk42b2MvTjhTREIrNjhuR0FKYmF5Y0dsWHlvdjE0\r\nQUZSS2pibUp1bVBqZFdYOFFpN2IrelE2MTQxREV1WVA0cml2eUk1ZTVVNHNuS0Fn\r\naUJkWWF1UnFiZ1VlTVZ3bUFvOXkybDV6YVB0TDFJSDZYS0FGRUZnZWhtYjdnNEFB\r\nQURWekNDQTFNd2dnSTdvQU1DQVFJQ0NHVVVrVTNaV0FTMU1BMEdDU3FHU0liM0RR\r\nRUJCUVVBTUg4eEN6QUpCZ05WQkFZVEFsVlRNUk13RVFZRFZRUUtEQXBCY0hCc1pT\r\nQkpibU11TVNZd0pBWURWUVFMREIxQmNIQnNaU0JEWlhKMGFXWnBZMkYwYVc5dUlF\r\nRjFkR2h2Y21sMGVURXpNREVHQTFVRUF3d3FRWEJ3YkdVZ2FWUjFibVZ6SUZOMGIz\r\nSmxJRU5sY25ScFptbGpZWFJwYjI0Z1FYVjBhRzl5YVhSNU1CNFhEVEE1TURZeE5U\r\nSXlNRFUxTmxvWERURTBNRFl4TkRJeU1EVTFObG93WkRFak1DRUdBMVVFQXd3YVVI\r\nVnlZMmhoYzJWU1pXTmxhWEIwUTJWeWRHbG1hV05oZEdVeEd6QVpCZ05WQkFzTUVr\r\nRndjR3hsSUdsVWRXNWxjeUJUZEc5eVpURVRNQkVHQTFVRUNnd0tRWEJ3YkdVZ1NX\r\nNWpMakVMTUFrR0ExVUVCaE1DVlZNd2daOHdEUVlKS29aSWh2Y05BUUVCQlFBRGdZ\r\nMEFNSUdKQW9HQkFNclJqRjJjdDRJclNkaVRDaGFJMGc4cHd2L2NtSHM4cC9Sd1Yv\r\ncnQvOTFYS1ZoTmw0WElCaW1LalFRTmZnSHNEczZ5anUrK0RyS0pFN3VLc3BoTWRk\r\nS1lmRkU1ckdYc0FkQkVqQndSSXhleFRldngzSExFRkdBdDFtb0t4NTA5ZGh4dGlJ\r\nZERnSnYyWWFWczQ5QjB1SnZOZHk2U01xTk5MSHNETHpEUzlvWkhBZ01CQUFHamNq\r\nQndNQXdHQTFVZEV3RUIvd1FDTUFBd0h3WURWUjBqQkJnd0ZvQVVOaDNvNHAyQzBn\r\nRVl0VEpyRHRkREM1RllRem93RGdZRFZSMFBBUUgvQkFRREFnZUFNQjBHQTFVZERn\r\nUVdCQlNwZzRQeUdVakZQaEpYQ0JUTXphTittVjhrOVRBUUJnb3Foa2lHOTJOa0Jn\r\nVUJCQUlGQURBTkJna3Foa2lHOXcwQkFRVUZBQU9DQVFFQUVhU2JQanRtTjRDL0lC\r\nM1FFcEszMlJ4YWNDRFhkVlhBZVZSZVM1RmFaeGMrdDg4cFFQOTNCaUF4dmRXLzNl\r\nVFNNR1k1RmJlQVlMM2V0cVA1Z204d3JGb2pYMGlreVZSU3RRKy9BUTBLRWp0cUIw\r\nN2tMczlRVWU4Y3pSOFVHZmRNMUV1bVYvVWd2RGQ0TndOWXhMUU1nNFdUUWZna1FR\r\nVnk4R1had1ZIZ2JFL1VDNlk3MDUzcEdYQms1MU5QTTN3b3hoZDNnU1JMdlhqK2xv\r\nSHNTdGNURXFlOXBCRHBtRzUrc2s0dHcrR0szR01lRU41LytlMVFUOW5wL0tsMW5q\r\nK2FCdzdDMHhzeTBiRm5hQWQxY1NTNnhkb3J5L0NVdk02Z3RLc21uT09kcVRlc2Jw\r\nMGJzOHNuNldxczBDOWRnY3hSSHVPTVoydG04bnBMVW03YXJnT1N6UT09IjsKCSJw\r\ndXJjaGFzZS1pbmZvIiA9ICJld29KSW05eWFXZHBibUZzTFhCMWNtTm9ZWE5sTFdS\r\naGRHVXRjSE4wSWlBOUlDSXlNREV5TFRBNUxUQXlJREUyT2pJeE9qUXhJRUZ0WlhK\r\ncFkyRXZURzl6WDBGdVoyVnNaWE1pT3dvSkluQjFjbU5vWVhObExXUmhkR1V0YlhN\r\naUlEMGdJakV6TkRZMk1qZ3hNREV4TXpBaU93b0pJblZ1YVhGMVpTMXBaR1Z1ZEds\r\nbWFXVnlJaUE5SUNJMVl6Sm1OVE0wT0RZeU1EWmlaRGxtWXpaaVptSTBNek0yWldW\r\naE9ERXlaR0V4TkRObE4yWXpJanNLQ1NKdmNtbG5hVzVoYkMxMGNtRnVjMkZqZEds\r\ndmJpMXBaQ0lnUFNBaU5ESXdNREF3TURFME1qUTRPRFk1SWpzS0NTSmlkbkp6SWlB\r\nOUlDSXhNRGdpT3dvSkltRndjQzFwZEdWdExXbGtJaUE5SUNJMU..."

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T07:53:08.103

这是 urus 使用 iAP Cracker 进行的“虚假”付款的收据（可在越狱设备上使用）。您可以通过base64解码查看收据内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T03:25:36.077

应用内购买中没有短收据。你可能正在做某事。例如，使用错误的 HTTP 方法将收据发送到服务器，即使用 GET 方法（而不是 POST 方法）

[此](https://stackoverflow.com/questions/1298998/verify-receipt-for-in-app-purchase)线程中的进一步说明。

# cakephp - CakePHP 复杂的查找条件

> ID：12240632
> 
> 赞同：1
> 
> 时间：2012-09-02T23:41:27.643
> 
> 标签：cakephp, cakephp-1.3, cakephp-2.0, cakephp-2.1, cakephp-1.2

例如，我有一个包含 fromH 和 toH 字段的 Store 模型，我想从数据库中检索在给定时间 (@t) 开放的商店。

SQL 查询看起来像这样

```
select *
from store 
where 
( fromH < toH and @t between fromH and toH ) or
( fromH > toH and 
     (@t between fromH and 24 OR
     (@t between 1 and toH )
) 
```

如何在 cakephp 中实现此查询，条件数组的外观如何？我想做蛋糕风格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T04:30:51.247

您可以使用以下 CakePHP 等效选择查询来尝试它：

```
<?php $this->Store->find('all', array(
    'conditions' => array(
        'OR' => array(
            'AND' => array(
                'fromH < ' => 'toH',
                $t.' BETWEEN ? AND ?' => array('fromH', 'toH')
            )
        ),
    'AND' => array(
            'fromH > ' => 'toH',
            'OR' => array(
                $t.' BETWEEN ? AND ?' => array('fromH', '24'),
                $t.' BETWEEN ? AND ?' => array('1', 'toH')
            )
        ),
    )
)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T12:31:41.937

@Arun Jain 给出的答案非常接近解决方案，但因为 OR 状态的规则必须每个都是它们自己的数组，因为它们的键值是相同的。如果你

```
print_r($conditions); 
```

你会发现你的一些规则丢失了。

我认为以下解决方案对您有用。

```
$conditions = array(
    'conditions' => array(
        'OR' => array(
            array(
                'AND' => array(
                    'fromH <' => 'toH',
                    @t.' BETWEEN ? AND ?' => array('fromH','toH')
                 )
            ),
            array(
                'AND' => array(
                    'fromH >' => 'toH',
                    'OR' => array(
                        @t.' BETWEEN ? AND ?' => array('fromH','24'),
                        @t.' BETWEEN ? AND ?' => array('1','toH')
                    )
                )
            )
        )
    )
);

$this->Strore->find('all',$conditions); 
```

# python - 如果我想要空插值（分段常数），numpy.interp 的最佳替代品是什么？

> ID：12240634
> 
> 赞同：6
> 
> 时间：2012-09-02T23:41:57.800
> 
> 标签：python, numpy, interpolation

`numpy.interp`很方便，也比较快。在某些情况下，我想将其输出与传播稀疏值（在“更密集”输出中）的非插值变体进行比较，结果在稀疏输入之间是分段常数。我想要的函数也可以称为“稀疏 - > 密集”转换器，它复制最新的稀疏值，直到找到后面的值（一种空插值，就好像从早期的值过去了零时间/距离）。

不幸的是，调整源代码并不容易，`numpy.interp`因为它只是一个编译函数的包装器。我可以使用 Python 循环自己编写此代码，但希望找到一种 C 速度的方法来解决问题。

**更新：**下面的解决方案（`scipy.interpolate.interp1d`with `kind='zero'`）非常慢，每次调用需要超过 10 秒（例如输入 500k 的长度，填充了 50%）。它`kind='zero'`使用零阶样条实现，调用`spleval`速度非常慢。但是，（即默认插值）的源代码为`kind='linear'`使用直接 numpy 解决问题提供了一个很好的模板（最小的变化是 set `slope=0`）。该代码显示了如何使用`numpy.searchsorted`来解决问题，并且运行时类似于调用`numpy.interp`，因此通过调整`scipy.interpolate.interp1d`线性插值的实现以跳过插值步骤（斜率！= 0 混合相邻值）来解决问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T00:25:48.493

可以做各种`scipy.interpolate.interp1d`插值：'linear'，'nearest'，'zero'，'slinear'，'quadratic，'cubic'。

请查看文档：[http ://docs.scipy.org/doc/scipy-0.10.1/reference/generated/scipy.interpolate.interp1d.html#scipy.interpolate.interp1d](http://docs.scipy.org/doc/scipy-0.10.1/reference/generated/scipy.interpolate.interp1d.html#scipy.interpolate.interp1d)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-08T06:25:34.857

只是为了完成：问题的解决方案是以下代码，我可以在更新答案中给出的提示的帮助下编写该代码：

```
def interpolate_constant(x, xp, yp):
    indices = np.searchsorted(xp, x, side='right')
    y = np.concatenate(([0], yp))
    return y[indices] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-03T03:38:25.340

我完全同意 kind='zero' 非常慢；对于数百万行的大型数据集，它可能比“线性”方法慢 1000 倍。对于“左常数”插值 - 使用最新值 - 以下代码有效：

```
def approx(x, y, xout, yleft=np.nan, yright=np.nan): 
    xoutIdx     = np.searchsorted(x, xout, side='right')-1
    return (np.where(xout<x[0], yleft, np.where(xout>x[-1], yright, y[xoutIdx]))) 
```

来自 R 背景，这相当于 f=0 时的 R 近似值。我还没有找到一种干净的方法来执行“右常数”插值，因为如果 xout 值与 x 中的值完全匹配，python 的 np.searchsorted with side='right' 会将一个索引推回......

# ember.js - Ember.js 不清楚的错误消息：“TypeError：无法重新定义不可配置的属性'__ember1346625712617'”

> ID：12240637
> 
> 赞同：2
> 
> 时间：2012-09-02T23:42:40.047
> 
> 标签：ember.js

我怀疑这个问题可能与我的路由或我的观点有关。以下是两者：

```
App.router = Ember.Router.create({
    enableLogging: true,
    location: 'history',
    root: Ember.Route.extend({
        index: Ember.Route.extend({
            route: '/admin/',
            redirectsTo: 'login'
        }),
        login: Ember.Route.extend({
            route: '/admin/login/',
            doLogin: function(router, context) {
                "use strict";
                router.transitionTo('dashboard', context);
            },
            connectOutlets: function (router, context) {
                "use strict";
                router.get('applicationController').connectOutlet('login', "login");
            }
        }),
        dashboard: Ember.Route.extend({
            route: '/admin/dashboard/',
            doLogout: function(router, context) {
                "use strict";
                router.transitionTo('login', context);
            },
            connectOutlets: function (router, context) {
                "use strict";
                router.get('applicationController').connectOutlet('sidebar', 'sidebar');
                router.get('applicationController').connectOutlet('toolbar', 'toolbar');
                router.get('applicationController').connectOutlet('dashboard', 'dashboard');
            }
        }),
        articles: Ember.Route.extend({
            route: '/admin/articles/',
            connectOutlets: function (router, context) {
                "use strict";
                console.log("here");
                router.get('applicationController').connectOutlet('sidebar', 'sidebar');
                router.get('applicationController').connectOutlet('toolbar', 'toolbar');
                router.get('applicationController').connectOutlet('articles', 'articles');
            }
        })
    })
}); 
```

我的观点有问题：

```
<script type="text/x-handlebars" data-template-name="sidebar">
    <div class="logo">
        <img src="http://boxed.hu/static/boxed.hu/images/sitebuild/logo.png">
    </div>
    <ul>
        <li>
            <a id="dashboardMenu" href="" data-module="dashboard" class="selected" {{action dashboard}}>
                Dashboard
                <span class="icon-home"></span>
            </a>
        </li>
        <li>
            <a id="articlesMenu" href="" data-module="articles" class="" {{action articles}}>
                Articles
                <span class="icon-copy"></span>
            </a>
        </li>
        <li>
            <a id="mediaMenu" href="" data-module="media" class="" {{action media}}>
                Media
                <span class="icon-picture"></span>
            </a>
        </li>
        <li>
            <a id="pagesMenu" href="" data-module="pages" class="" {{action pages}}>
                Pages
                <span class="icon-file"></span>
            </a>
        </li>
        <li>
            <a id="commentsMenu" href="" data-module="comments" class="" {{action comments}}>
                Comments
                <span class="icon-comments"></span>
            </a>
        </li>
        <li>
            <a id="usersMenu" href="" data-module="users" class="" {{action users}}>
                Users
                <span class="icon-user"></span>
            </a>
        </li>
        <li>
            <a id="rolesMenu" href="" data-module="roles" class="" {{action roles}}>
                Roles
                <span class="icon-unlock"></span>
            </a>
        </li>
    </ul>
</script> 
```

当我单击列表中的一个元素时，我得到以下控制台输出：

```
STATEMANAGER: Sending event 'articles' to state root.

TypeError: can't redefine non-configurable property '__ember1346625712617'
[Break On This Error]   

o_defineProperty(this, GUID_KEY, undefinedDescriptor); 
```

我正计划调试代码，但我认为这里的帖子可能会比我的调试带来更快的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T00:33:19.740

这不是具体的 Ember 错误，而是浏览器[错误：访问器属性错误：无法重新定义不可配置的属性 'status'](https://stackoverflow.com/questions/6924250/error-in-accessor-property-cant-redefine-non-configurable-property-status)。

我怀疑您将其视为将操作 ( `{{action articles}}`) 命名为与状态相同的结果。

# jquery - How can I run a directive after the dom has finished rendering?

> ID：12240639
> 
> 赞同：115
> 
> 时间：2012-09-02T23:43:22.360
> 
> 标签：jquery, dom, callback, angularjs, document-ready

I've got a seemingly simple problem with no apparent *(by reading the Angular JS docs)* solution.

I have got an Angular JS directive that does some calculations based on other DOM elements' height to define the height of a container in the DOM.

Something similar to this is going on inside the directive:

```
return function(scope, element, attrs) {
    $('.main').height( $('.site-header').height() -  $('.site-footer').height() );
} 
```

The issue is that when the directive runs, `$('site-header')` cannot be found, returning an empty array instead of the jQuery wrapped DOM element I need.

Is there a callback that I can use within my directive that only runs after the DOM has been loaded and I can access other DOM elements via the normal jQuery selector style queries?

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2012-09-03T06:41:58.090

这取决于您的 $('site-header') 是如何构造的。

您可以尝试使用0 延迟的[$timeout 。](http://docs.angularjs.org/api/ng.$timeout)就像是：

```
return function(scope, element, attrs) {
    $timeout(function(){
        $('.main').height( $('.site-header').height() -  $('.site-footer').height() );
    });        
} 
```

解释它是如何工作的：[一](http://ejohn.org/blog/how-javascript-timers-work/)，[二](https://stackoverflow.com/questions/779379/why-does-settimeoutfn-0-sometimes-help#comment14183689_779785)。

不要忘记注入`$timeout`你的指令：

```
.directive('sticky', function($timeout) 
```

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2014-05-06T21:55:14.290

这是我的做法：

```
app.directive('example', function() {

    return function(scope, element, attrs) {
        angular.element(document).ready(function() {
                //MANIPULATE THE DOM
        });
    };

}); 
```

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2014-01-07T05:54:03.630

可能作者不再需要我的答案了。尽管如此，为了完整起见，我觉得其他用户可能会觉得它很有用。最好和最简单的解决方案是`$(window).load()`在返回函数的主体内部使用。（或者您可以使用`document.ready`。这真的取决于您是否需要所有图像）。

以`$timeout`我的拙见，使用是一个非常薄弱的​​选择，在某些情况下可能会失败。

这是我要使用的完整代码：

```
.directive('directiveExample', function(){
   return {
       restrict: 'A',
       link: function($scope, $elem, attrs){

           $(window).load(function() {
               //...JS here...
           });
       }
   }
}); 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-01-29T02:33:15.347

有一个`ngcontentloaded`事件，我想你可以使用它

```
.directive('directiveExample', function(){
   return {
       restrict: 'A',
       link: function(scope, elem, attrs){

                $$window = $ $window

                init = function(){
                    contentHeight = elem.outerHeight()
                    //do the things
                }

                $$window.on('ngcontentloaded',init)

       }
   }
}); 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-05-15T21:52:43.927

如果由于外部资源而无法使用 $timeout 并且由于特定的时间问题而无法使用指令，请使用广播。

`$scope.$broadcast("variable_name_here");`在所需的外部资源或长时间运行的控制器/指令完成后添加。

然后在加载外部资源后添加以下内容。

```
$scope.$on("variable_name_here", function(){ 
   // DOM manipulation here
   jQuery('selector').height(); 
} 
```

例如在延迟 HTTP 请求的承诺中。

```
MyHttpService.then(function(data){
   $scope.MyHttpReturnedImage = data.image;
   $scope.$broadcast("imageLoaded");
});

$scope.$on("imageLoaded", function(){ 
   jQuery('img').height(80).width(80); 
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-09-17T20:16:41.967

我遇到了类似的问题，想在这里分享我的解决方案。

我有以下 HTML：

```
<div data-my-directive>
  <div id='sub' ng-include='includedFile.htm'></div>
</div> 
```

问题：在父 div 指令的链接函数中，我想对子 div#sub 进行 jquery。但它只是给了我一个空对象，因为当指令的链接功能运行时 ng-include 还没有完成。所以首先我用 $timeout 做了一个肮脏的解决方法，它有效，但延迟参数取决于客户端速度（没有人喜欢这样）。

工作但很脏：

```
app.directive('myDirective', [function () {
    var directive = {};
    directive.link = function (scope, element, attrs) {
        $timeout(function() {
            //very dirty cause of client-depending varying delay time 
            $('#sub').css(/*whatever*/);
        }, 350);
    };
    return directive;
}]); 
```

这是干净的解决方案：

```
app.directive('myDirective', [function () {
    var directive = {};
    directive.link = function (scope, element, attrs) {
        scope.$on('$includeContentLoaded', function() {
            //just happens in the moment when ng-included finished
            $('#sub').css(/*whatever*/);
        };
    };
    return directive;
}]); 
```

也许它可以帮助某人。

# macos - 在 OS X 上构建 OpenSSH：配置：警告：sandbox.h：存在但无法编译

> ID：12240644
> 
> 赞同：3
> 
> 时间：2012-09-02T23:45:36.637
> 
> 标签：macos, openssh

我正在尝试在 OS X 上构建最新的 openssh Portable。但是，当我运行 ./confgure 时，会出现以下情况：

```
configure: WARNING: sandbox.h: present but cannot be compiled
configure: WARNING: sandbox.h:     check for missing prerequisite headers?
configure: WARNING: sandbox.h: see the Autoconf documentation
configure: WARNING: sandbox.h:     section "Present But Cannot Be Compiled"
configure: WARNING: sandbox.h: proceeding with the preprocessor's result
configure: WARNING: sandbox.h: in the future, the compiler will take precedence
configure: WARNING:     ## ------------------------------------------- ##
configure: WARNING:     ## Report this to openssh-unix-dev@mindrot.org ##
configure: WARNING:     ## ------------------------------------------- ##
checking for sandbox.h... yes 
```

当我尝试构建它时：

```
In file included from sandbox-darwin.c:23:
/usr/include/sandbox.h:98:29: error: sandbox/private.h: No such file or directory
make: *** [sandbox-darwin.o] Error 1 
```

不用说，这是一个问题。我搜索了谷歌并查看了“可能已经有你答案的问题”，但似乎没有什么相关的。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-28T13:33:35.427

可以通过在构建命令中添加 #define 来解决此问题（如建议的[here](https://lists.mindrot.org/pipermail/openssh-unix-dev/2012-December/030895.html)）：

```
gcc -D__APPLE_API_STRICT_CONFORMANCE -I . -c sandbox-darwin.c -o sandbox-darwin.o 
```

注意：这是一个关于如何编译 sandbox-darwin.c 的最小示例，您可能需要根据您的平台添加适当的其他命令行参数 - 只需复制构建命令并添加 -D__APPLE_API_STRICT_CONFORMANCE 或将其添加到 Makefile。

这是我最近遇到的问题（使用 openssh-6.8p1 和 6.9p1），我不清楚为什么这个“修复”没有包含在 openssh 或 Macports 中......？这可能是因为这个问题似乎只影响 OSX Lion 10.7，尽管我没有在其他版本上测试过......

# php - PHP not passing the data array?

> ID：12240645
> 
> 赞同：1
> 
> 时间：2012-09-02T23:45:48.227
> 
> 标签：php, arrays, codeigniter

I'm working on a site with CodeIgniter and can't figure out why my function is not returning the array, this should be simple.

I did a dump in the model before returning just to see if it was formatted and had the data (which is does). The issue seems to be in the controller the function is not returning the data and in the view properties is null.

What is happening with CI or PHP that might cause this?

```
Controller: 
function galleryManagement()
{
    if (! $this->session->userdata('is_admin'))
    {
        redirect('admin/index');
    }
    else
    {
        /*
        $selectedProperty = $this->input->post('selectedProperty');
        switch ($selectedProperty)
        {
            case "westgate":
                $selectedID = '1';
                break;
            case "prospector436":
                $selectedID = '2';
                break;
            case "prospector437":
                $selectedID = '3';
                break;
            case "prospectorcombo":
                $selectedID = '4';
                break;
            default:
                $selectedID = '-1';
        }
        if ($selectedID != '-1')
        {
        */
            $this->load->model('admin_model');
            $propertyObj = $this->admin_model->getProperties();
            $data['properties'] = $propertyObj;
            $data['propertyID'] = $selectedID;
            $data['galleryObj'] = $this->admin_model->getGallery($selectedProperty);
            //$data['textarea'] = array ( 'name' => 'altText', 'style' => "width: 320px; height: 36px;" );
            $this->load->view('db_site/admin_gallery_view', $data);
        /*
        }
        else
        {
            $this->load->model('admin_model');
            $data['propertiesObj'] = $this->admin_model->getProperties();
            $data['propertyID'] = $selectedID;
            $this->load->view('db_site/admin_gallery_view', $data);
        }
        */
    }
}

Model:
function getProperties()
{
    $this->db->select('property_id, name');
    $this->db->from('property');
    $q = $this->db->get();

    if ($q->num_rows != 0)
    {
        $propertiesObj = $q->result();
        foreach ($propertiesObj as $property)
        {
            $properties[$property->name] = $property->property_id;
        }
        echo "Model Dump: ";
        var_dump($properties);
        return $properties;
    }
    else
    {
        return false;
    }
}

View:
<?php
    var_dump($properties);
    echo form_open('admin/galleryManagement');
    echo "<p>Property: " . form_dropdown('selectedProperty', $properties) . "</p>";        
    echo form_submit('select', 'Select');
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T01:54:11.550

在您看来，您使用`$properties`的不是`$data`控制器的 else 块数组中传递的。如果您如下更改控制器的 else 块，它将起作用。

```
 else
    {
        $this->load->model('admin_model');
        $data['properties'] = $this->admin_model->getProperties();
        $data['propertyID'] = $selectedID;
        $this->load->view('db_site/admin_gallery_view', $data);
    } 
```

**编辑**

从您最近的编辑来看，您似乎已经评论了`else`我正在谈论的块。你还有问题吗？？

# php - Textarea content is not included in $_POST array sometimes, but is at other times.

> ID：12240649
> 
> 赞同：0
> 
> 时间：2012-09-02T23:46:04.263
> 
> 标签：php, jquery, textarea

I have been developing my own CMS for my own website. Just to test out PHP. Anyway, everything was working fine and then all of a sudden I had this problem entering content for articles.

I am using the JQuery markItUp plugin for text editing purposes. It was working and then all of a sudden the main article wouldn't enter into the database.

Here is the form :

```
 <form action="" method="post" name="action">
                    <tr>
                        <td><label for="title" >Article Title </label></td>
                        <td><input type="text" name="title" class="admintableinput"></td>
                    </tr>
                    <tr>
                        <td><label for="author" > Author </label></td>
                        <td><input type="text" name="author" class="admintableinput"></td>
                    </tr>
                    <tr>
                        <td><label for="summary" > Summary </label></td>
                        <td><textarea name="summary" class="admintableinput"></textarea></td>
                    </tr>
                    <tr>
                        <td><label for="content" >Article Content </label></td>
                        <td><textarea name="content" id="default" class="admintableinput"></textarea></td>
                    </tr>
                    <tr>
                        <td><label for="Category1" > Category </label></td>
                        <td><select name="Category1" id="category1" class="admintableinput">
                            <?php $categories = getCategoryNames();
                            foreach($categories as $category){  ?>
                                <option value="<?php echo "" . $category['id'] . "" ; ?>"><?php echo "" . $category['category'] . "" ; ?></option>
                            <?php } ?>
                        </select></td>
                    </tr>
                    <tr>
                        <td><label for="image" > Image </label></td>
                        <td><input type="text" name="image" class="admintableinput"></td>
                    </tr>
                    <tr>                    
                        <td><input type="submit" name="action" value="Save Article" class="adminbutton" /></td>
                        <td><input type="reset" formnovalidate name="action" value="Reset" class="adminbutton"  /></td>
                    </tr>   
                </table>
            </form> 
```

I have used var_dump($_POST) with and without the plugin. With the plugin var_dump doesn't register the article content and without it it does. It always contains values in every other field.

Does anybody have any idea why this could happen?

I've tried completely removing and adding the plugin again.

Could this be an issue with the textarea?

Any help is appreciated. I don't think this is a PHP issue.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T01:08:06.563

看来，您的 javascript 在提交表单时没有将内容填充到 textarea 中。

您应该安装一个名为[Fiddler](http://www.fiddler2.com/fiddler2/)的 HTTP 调试代理，以查看已提交给 PHP 脚本的内容。

# android - populating a ListView from separate sql tables

> ID：12240650
> 
> 赞同：0
> 
> 时间：2012-09-02T23:46:11.287
> 
> 标签：android, sql, listview

What I am trying to do is populate one listview, from two different tables in my database. The tables that I am using are:

```
--------------------------
|UNIT_TABLE|SHOVEL_TABLE |
|ID        |ID           |
|SITE_NAME |SITE_NAME    |
|UNIT_NAME |SHOVEL_NAME  |
-------------------------- 
```

The id is used in all my tables, as a basic autoincrement not null, the SITE_NAME is the name of the where the UNIT_TABLE and SHOVEL_TABLE are being completed at.

After some research on the best option I decided to use the following code to create a join on the two tables using the SITE_NAME to determine which ones I need.

```
SQLiteQueryBuilder qb = new SQLiteQueryBuilder();
    String[] queries=new String[]{"select "+ID+", "+SHOVEL_NAME+" from "+SHOVEL_TABLE+" where "+SITE_NAME+"='"+Site+"'",
            "select "+ID+", "+ UNIT_NAME+" from "+UNIT_TABLE+" where "+SITE_NAME+"='"+Site+"'"};
    String SQL= qb.buildUnionQuery(queries, null, null); 
```

This allowed me to combine all the data into one table, and populate my listview using a SimpleCursorAdapter. However, when I click on a list item, it takes me to the same activity. What I need it to do is if the item came from the SHOVEL_TABLE to go one Shovel.class, and if it came from the UNIT_TABLE I need it to go Unit.class.

Looking for any suggestions.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T23:53:51.653

我假设您在填充列表视图时使用了适配器，对吗？我猜在您的适配器中，您可以为您的 listitemlistener 添加添加的信息以记录下来。

# c++ - C++ char array pointer confusion

> ID：12240653
> 
> 赞同：2
> 
> 时间：2012-09-02T23:47:16.507
> 
> 标签：c++, pointers

I need some help understanding pointers:

**Basic Pointers:**

```
int i = 3;           
cout << i << endl;   //prints 3
cout << &i << endl;  //prints address of i

int * p = &i;
cout << p << endl;   //prints the address p points to
cout << &p << endl;  //prints the address of p
cout << *p << endl;  //prints the value stored at the address p points to 
```

**Now the confusion:**

```
char *buf = "12345"; 
cout << &buf[2] << endl;  //prints 345
cout << buf+2 << endl;    //prints 345
cout << *buf << endl;     //prints 1
cout << *(buf+2) << endl; //prints 3
cout << buf << endl;      //prints 12345
cout << &buf << endl;     //prints 001CFA6C 
```

**How do I print the address of buf[3]?**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T23:50:17.430

`char`指针在某种意义上有点特殊，因为它们在历史上一直被用作 C 中的字符串。C++ 大多向后兼容 C，因此它支持 C 字符串。所以如果你打印一个`char`指针，而不是打印地址，它会打印字符串中的每个字符，直到它到达一个 NULL 字符，就像在 C 中一样。

要打印实际地址，请将指针转换为`void*`.

`cout << static_cast<void*>(&buf[3]) << endl;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T23:49:44.983

iostream 对 char 指针有一个特殊的重载（将它们视为指向以 null 结尾的数组的指针并打印整个数组）。通过将指针转换为 void 指针来绕过重载，该指针打印为数值：

```
std::cout << static_cast<void*>(buf + 3) << std::endl; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T23:50:12.823

您的问题是您尝试使用`char`. 不过，`char`很特别。特别`char const*`是不被视为任何其他指针，但它被视为 C 字符串。这`&buf[2]`确实是第三个字符的地址，但这个地址被认为是一个以空字符结尾的字符序列的开始，打印这个指针不会导致指针被打印，而是从这个地址开始的字符串。尝试使用`int`s 来避免这种交互。

# python - Retrieve an item from a DynamoDB table that has a range key by only specifying the index key

> ID：12240655
> 
> 赞同：5
> 
> 时间：2012-09-02T23:47:36.897
> 
> 标签：python, boto, amazon-dynamodb

I have a table with a primary key and range key set:

```
user_id
timestamp_joined 
```

Using the boto api layer, is there a way I can retrieve the item just by specifying the user_id (without the range key)? Every time I perform a getItem() query without specifying the range key it fails. I can only get it to work by specifying the range key (timestamp_joined).

The error message when fetching just by user_id is below:

```
boto.exception.DynamoDBResponseError: DynamoDBResponseError: 400 Bad Request 
{'message': 'One or more parameter values were invalid: The provided 
key size does ot match with that of the schema', '__type':
'com.amazon.coral.validate#ValidationException'} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T01:05:25.597

听起来您想执行查询。您可以查询仅指定 user_id（哈希键）的表，查询将返回与该 user_id 匹配的所有项目，而不管范围值如何。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-14T18:02:11.257

```
result = table.scan(Attr('user_id').eq(/number here/),
                    Limit=1,
                    ConsistentRead=True) 
```

如果每个 user_id 有超过 1 个项目，则可以将结果限制为更大数量，每次扫描或查询最多 1M 个结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-29T19:18:18.007

这在日期范围内对我有用

我的桌子上有日期： [![在此处输入图像描述](../Images/0c7b59b0d5ee551beee180e33bd1b725.png)](https://i.stack.imgur.com/eJzfe.png)

我做了这样的查询：

```
import requests, json 
import boto3
from boto3.dynamodb.conditions import Key, Attr

def lambda_handler(event, context):
    dynamodb = boto3.resource('dynamodb', region_name='us-east-1', aws_access_key_id='your_access',aws_secret_access_key='your_secret')
    table = dynamodb.Table('Table_name')

    date_i = '2013-11-18'
    date_f = '2013-11-19'

    try:
        fe = Key('Date').between(date_i,date_f);
        response = table.scan(
            FilterExpression=fe
        )
        print(response['Items'])
    except Exception as e:
        print(e)
        raise e 
```

我在该范围内有 2 个结果。

# php - PHP Abstract Method versus Default Method

> ID：12240656
> 
> 赞同：5
> 
> 时间：2012-09-02T23:47:42.273
> 
> 标签：php, oop, ooad

I notice that when I define a method as abstract, the signature of child classes needs to be compatible with it. This robs me of an opportunity to use the type checking in the child class' signature.

If I define the parent method as a concrete method with a default implementation, I can then override the parent method without complying with its interface.

In cases where a suitable default implementation exists, I am inclined to use the second approach. But am I letting myself in for trouble?

It just seems odd to me that the use of 'abstract' can be so limiting, so I want to know if I'm missing something...

Note - I see that similar questions have been asked in relation to other languages, but not so much PHP.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-02T23:53:39.030

这是一个非常广泛的问题，但简而言之：

如果您不尊重接口 - 它会创建脆弱的设计，因为即使根据定义每个孩子都应该支持所有祖先接口 - 您会破坏它，但定义不兼容的接口。

有一个很好的法律：[http ://en.wikipedia.org/wiki/Liskov_substitution_principle](http://en.wikipedia.org/wiki/Liskov_substitution_principle)

此外，这通常是一个迹象，表明您应该更喜欢委托而不是继承。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-02T23:54:49.117

接口（或抽象类）强制与您的类保持一致。这是你和你继承的类之间的契约。当几个人编写代码并且您希望可靠地交换类时，这种一致性是关键。

# python - Write list of comma separate strings to csv file in Python

> ID：12240662
> 
> 赞同：6
> 
> 时间：2012-09-02T23:49:32.757
> 
> 标签：python, list, csv

If I have a list of strings as follows:

```
data = ['a,x', 'b,y', 'c,z']
f = open('data.csv', 'wb')
w = csv.writer(f, delimiter = ',')
w.writerow(data)
f.close() 
```

The problem is that they are saved in 3 cells on a single line like this: (" " is one Excel cell)

"a,x" "b,y" "c,z"

What I really want is the following:

"a" "x"

"b" "y"

"c" "z"

so that they are in separate cells and separate lines. Does anyone know how to do this correctly?

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-02T23:50:57.620

您可以创建列表列表（行）并使用[writerows](http://docs.python.org/library/csv.html#csv.csvwriter.writerows)将它们全部写入。或将它们全部单独编写。重要的部分是一行是一个 python 列表，而不是一个逗号分隔值的字符串。

```
data = ['a,x', 'b,y', 'c,z']
f = open('data.csv', 'wb')
w = csv.writer(f, delimiter = ',')
w.writerows([x.split(',') for x in data])
f.close() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-11T16:38:58.523

以下适用于字符串。

```
 import csv
   data = ["Apparels,Clothings,Materials,Bazaar,Saree,Salwars"]
   f = open('data.csv', 'w')
   w = csv.writer(f, delimiter = ',')
   w.writerows([x.split(',') for x in data])
   f.close() 
```

# ruby - How does the reduce method work here?

> ID：12240663
> 
> 赞同：3
> 
> 时间：2012-09-02T23:49:40.270
> 
> 标签：ruby

I read through the ruby docs examples but I'm still not sure what is happening in this code:

```
sentence = "How are you?"
sentence.chars.reduce do |memo, char|
    %w[a e i o u y].include?(char) ? memo + char * 5 : memo + char
end 
```

What is the memo when the block of code is first executed? What do the subsequent 5 steps look like?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-02T23:56:47.747

由于您没有为 提供默认值`reduce`，因此它将设置`memo`为 中的第一个值`sentence.chars`，即`"H"`.

迭代#1：

*   `memo`是`"H"`
*   `char`是`"o"`
*   块的结果是`"Hooooo"`

然后将第一次迭代的结果作为第一个参数传递到块中。所以在第 2 次迭代中：

*   `memo`是`"Hooooo"`
*   `char`是`"w"`
*   块的结果是`"Hooooow"`

这将针对数组的每个元素继续进行，最终结果将是块应用于最后一个元素后的结果。

一个简单的方法来查看它的实际效果是执行以下代码：

```
sentence = "How are you?"
sentence.chars.reduce do |memo, char|
  puts "Memo = #{memo}, char = #{char}"
  %w[a e i o u y].include?(char) ? memo + char * 5 : memo + char
end 
```

# javascript - 使用 jenkins 从各种文件夹中的文件构建一个 javascript 文件

> ID：12240669
> 
> 赞同：1
> 
> 时间：2012-09-02T23:51:29.033
> 
> 标签：javascript, build, jenkins, build-automation

我有这样的文件夹结构：

```
js_uncompressed
  > lib
    > libraries which all js files should include.
  > common
    > files which some js files should include
  > folder1
    > screenA.js
    > screenB.js
  > folder2
    > screenC.js 
```

我想为每个屏幕 [-something].js 构建 javascript 文件。

例如，

screenA.js 应该在“lib”文件夹中包含文件，fileA.js 在“common”文件夹中。

screenB.js 应该在“lib”文件夹中包含文件，fileB.js 在“common”文件夹中。

screenC.js 应该包含“lib”文件夹中的文件，“common”文件夹中的 fileA.js 和 fileB.js。

如果没有一些复杂的 shell 脚本，这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T03:07:15.960

如果您可以使用 Ant，您可以使用[Google Closure Compiler](https://developers.google.com/closure/compiler/)轻松构建它。这只是您可以开始的示例。

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="Foo" default="default" basedir=".">
    <description>Bar.</description>

    <target name="-pre-dist">

        <property name="closureCompiler" value="${build.classes.dir}/../lib/compiler.jar"/>
        <property name="jsRootFolder" value="${build.web.dir}/javascript"/>
        <property name="compiledJsFolder" value="${build.web.dir}/javascript"/>
        <property name="compiledJsFileApp" value="${compiledJsFolder}/application.min.js"/>

        <echo>Bulding JavaScript...</echo>

        <java jar="${closureCompiler}"
                args="--compilation_level SIMPLE_OPTIMIZATIONS
                --js ${jsRootFolder}/screenA.js
                --js ${jsRootFolder}/screenB.js
                --js ${jsRootFolder}/screenC.js
                --js ${jsRootFolder}/screenN.js
                --js_output_file ${compiledJsFileApp}"/>

        <echo>Done!</echo>

    </target>

</project> 
```

我从我维护的一个项目中获取了这个代码片段。它是在 NetBeans 中创建的，但您可以轻松修改它以满足您的需要。类似的值`${build.classes.dir}`是特定于 NetBeans 构建文件的。这个构建文件creta一些引用（闭包编译器jar，文件夹等）并执行通过`java`任务调用编译器的“编译”。

# xaml - ScrollView Frame.Navigate Null

> ID：12240682
> 
> 赞同：0
> 
> 时间：2012-09-02T23:54:49.597
> 
> 标签：xaml, windows-8, microsoft-metro

我正在尝试从 ScrollViewer 控件导航到页面：

```
 <Button x:Name="btnViewMenu" Content="View Menu" Click="btnViewMenu_Click" Margin="0,20,0,0" CommandParameter="{Binding}" Grid.Row="3" />

 private void btnViewMenu_Click(object sender, RoutedEventArgs e)
    {
        Button btn = (Button)sender;
        RestaurantLocation loc = btn.CommandParameter as RestaurantLocation;
        App.CurrentRestaurantLocation = loc;
        this.Frame.Navigate(typeof(SearchFormPage));
    } 
```

在搜索表单页面上，我收到此错误：

_pageKey 不能为空：

```
 /// <summary>
    /// Invoked when this page will no longer be displayed in a Frame.
    /// </summary>
    /// <param name="e">Event data that describes how this page was reached.  The Parameter
    /// property provides the group to be displayed.</param>
    protected override void OnNavigatedFrom(NavigationEventArgs e)
    {
        var frameState = SuspensionManager.SessionStateForFrame(this.Frame);
        var pageState = new Dictionary<String, Object>();
        this.SaveState(pageState);
        frameState[_pageKey] = pageState;
    } 
```

我导航不正确吗？这只发生在滚动查看器内部。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T23:23:35.690

谢谢。我不得不调用基本方法：

```
 protected override void OnNavigatedTo(NavigationEventArgs e)
    {
        base.OnNavigatedTo(e);
        List<string> theResults = e.Parameter as List<string>;
        city = theResults[0];
        state = theResults[1];
        category = theResults[2];
        BindData();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T06:19:17.817

确保您调用 base.OnNavigatedTo(e) 和 base.OnNavigatedFrom(e)

在执行逻辑后覆盖的方法中

# homebrew - brew update 破坏了什么？

> ID：12240683
> 
> 赞同：8
> 
> 时间：2012-09-02T23:54:54.447
> 
> 标签：homebrew

Homebrew 工作正常，直到我做了一个`brew update`（几个月没有更新）。brew update 完成后，每个`brew`命令都会导致相同/相似的错误消息：

```
/usr/local/Library/Homebrew/global.rb:6:in `require': no such file to load -- set (LoadError)
from /usr/local/Library/Homebrew/global.rb:6 
    from /usr/local/bin/brew:17:in `require'
    from /usr/local/bin/brew:17 
```

我检查了目录，似乎自制文件在那里。由于某种原因，它只是没有加载文件。我使用 git 进行了重新安装，因为`brew`命令不起作用。但仍然得到同样的错误。

非常感谢有关如何解决此问题的任何帮助。如果我无法弄清楚任何事情，我可能不得不重新安装操作系统。

更新：我对操作系统进行了全新安装。不重新安装找不到解决方案。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-10-14T21:52:46.257

我遇到了同样的问题。以下解决了它：

```
sudo chown -R $USER:admin /usr/local
cd /usr/local
git reset --hard origin/master
brew update 
```

见[https://github.com/mxcl/homebrew/issues/19140](https://github.com/mxcl/homebrew/issues/19140)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T00:12:25.257

做`brew doctor`

检查输出并遵循给出的任何建议。

# android - “位图大小超出 VM 预算”虽然功能在 Android 中进行了优化

> ID：12240686
> 
> 赞同：1
> 
> 时间：2012-09-02T23:55:22.447
> 
> 标签：android, memory, bitmap

我知道，你可以找到数百个关于这个特殊主题的问题，但我已经阅读了大部分问题，但它们没有帮助。这是堆栈跟踪：

```
java.lang.OutOfMemoryError: bitmap size exceeds VM budget
at android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:573)
at PACKAGE.MyApp.getPhoto(MyApp.java:191)
at PACKAGE.MyApp.getEntries(MyApp.java:149)
at PACKAGE.AlarmSetup.createNotifications(AlarmSetup.java:48)
at PACKAGE.AlarmSetup.onHandleIntent(AlarmSetup.java:30)
at android.app.IntentService$ServiceHandler.handleMessage(IntentService.java:59)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:130)
at android.os.HandlerThread.run(HandlerThread.java:60) 
```

尽管在 Stack Overflow 上阅读了很多问题后，我已经优化了我的 Java 函数（至少我是这么认为的），但还是抛出了这个异常。这是我的代码：

```
public Bitmap getContactPhoto(String lookup_key) {
    Uri lookUpUri = Uri.withAppendedPath(ContactsContract.Contacts.CONTENT_LOOKUP_URI, lookup_key);
    Uri contentUri = ContactsContract.Contacts.lookupContact(ctx.getContentResolver(), lookUpUri);
    try {
        final int REQUIRED_SIZE = 144;
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true; // first get only the size of the image
        BitmapFactory.decodeStream(ContactsContract.Contacts.openContactPhotoInputStream(ctx.getContentResolver(), contentUri), null, o);
        int scale = 1;
        while ((o.outWidth/scale/2) >= REQUIRED_SIZE && (o.outHeight/scale/2) >= REQUIRED_SIZE) {
            scale *= 2;
        }
        BitmapFactory.Options oScaled = new BitmapFactory.Options();
        oScaled.inSampleSize = scale; // decode with calculated sample size now
        oScaled.inPurgeable = true; // prevent OutOfMemory
        oScaled.inInputShareable = true; // prevent OutOfMemory
        return BitmapFactory.decodeStream(ContactsContract.Contacts.openContactPhotoInputStream(ctx.getContentResolver(), contentUri), null, oScaled);
    }
    catch (Exception e) {
        return null;
    }
} 
```

你能帮助我吗？我变得绝望，尝试了很多改进。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T03:12:43.977

问题可能不在此代码段中。也许您创建了很多无法进行垃圾收集的位图实例。尝试使用 MAT（[Android 应用程序的内存分析](http://android-developers.blogspot.tw/2011/03/memory-analysis-for-android.html)）来检查是否存在此类实例。

# android - 将多个字符串传递给其他 Activity

> ID：12240687
> 
> 赞同：3
> 
> 时间：2012-09-02T23:55:25.403
> 
> 标签：android, android-activity

我有

```
EditText editTextSignUpUserName = (EditText) findViewById(R.id.sign_up_user_name);
EditText editTextSignUpPassword = (EditText) findViewById(R.id.sign_up_password);
EditText editTextSignUpEmailAddress = (EditText) findViewById(R.id.sign_up_email_address); 
```

和

```
 String messageUserName = intent.getStringExtra(SignUp.EXTRA_MESSAGE);
 String messagePassword = intent.getStringExtra(SignUp.EXTRA_MESSAGE);
 String messageEmailAddress = intent.getStringExtra(SignUp.EXTRA_MESSAGE); 
```

当然，所有三个字符串都显示为 messageEmailAddress。

我如何将每个字符串分别传递给下一个活动（并因此传递给数据库）？谢谢，麻烦您了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T23:58:46.293

可以有多种方法来做到这一点。

*   使用**意图**

在您的 Activity 中，创建一个 Intent：

```
Intent i = new Intent(getApplicationContext(), MainActivity.class);
i.putExtra("password",editTextSignUpPassword.getText().toString());
i.putExtra("username",editTextSignUpUserName.getText().toString());
startActivity(i); 
```

然后在另一个活动中，您可以获得这些值，例如：

```
Bundle extras = getIntent().getExtras();
if (extras != null) {
    String messageUserName = extras.getString("username");
    String messagePassword = extras.getString("password");
} 
```

* * *

*   您可以将它们声明为**`static`**变量，然后在您的其他类中您可以像访问它们一样访问它们 `Activity1.messageUserName`，`Actvity1.messagePassword`然后将它们插入数据库或做任何您想做的事情。

    公共静态字符串消息密码；公共静态字符串消息用户名；

    messagePassword = editTextSignUpPassword.getText().toString();

然后，在所有其他活动中，您可以将它们作为**`YourMainActivty.messagePassword`**.

***编辑：***代码的实现：

```
 EditText editTextSignUpUserName;
  EditText editTextSignUpPassword;
  @Override 
   public void onCreate(Bundle savedInstanceState) 
   { super.onCreate(savedInstanceState);
  setContentView(R.layout.sign_up);
  editTextSignUpUserName = (EditText) findViewById(R.id.sign_up_user_name);
  editTextSignUpPassword = (EditText)findViewById(R.id.sign_up_password); 
   }

   public void onClickSignUp(View view)
  { Intent intent = new Intent(this, SignIn.class); 
  String signUpUserName = editTextSignUpUserName.getText().toString();
  String signUpPassword = editTextSignUpPassword.getText().toString();
  intent.putExtra("username", signUpUserName); 
  intent.putExtra("password", signUpPassword);
  startActivity(intent);
  } 
```

然后在**`SignIn.class`**,

```
Bundle extras = getIntent().getExtras();
if (extras != null) {
    String messageUserName = extras.getString("username");
    String messagePassword = extras.getString("password");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T06:51:40.157

最好的方法是通过意图将这些值传递给下一个活动，您可以在单击按钮或移动到下一个活动的事件时执行此操作，

```
String username = sign_up_user_name.getText().toString();
String password = editTextSignUpPassword.getText().toString();
String email = editTextSignUpEmailAddress.getText().toString();
Intent i = new Intent(getApplicationContext(), NextActivity.class);
i.putExtra("username",username);
i.putExtra("password",password);
i.putExtra("email",email);
this.getContext.startActivity(i); 
```

然后在下一个Activity

```
String username = this.getIntent.getStringExtra("username");
String password = this.getIntent.getStringExtra("password");
String email = this.getIntent.getStringExtra("email"); 
```

# php - 仅通过电子邮件发送 HTML 输出纯文本的 PHP 脚本

> ID：12240692
> 
> 赞同：0
> 
> 时间：2012-09-02T23:56:31.400
> 
> 标签：php, html, email

这是在 bluehost 上 - 我尝试向 gmail 以外的其他客户发送邮件，但我仍然遇到同样的问题：我所有的 html 都显示为纯文本/标签。没有被渲染成 html。

```
 $to = '###@gmail.com';

    $headers  = 'MIME-Version: 1.0' . "\r\n";
    $headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
    $headers .= "From: $from \r\n";

    $headers = array(

    'From' => "###@####.com",

    'Cc' => "####@gmail.com",

    'Subject' => "Your Reminder From Remindmeto.org",

    );

    $body = '<html><body>';
    $body .= '<h1>From the mists of memory I speak...</h1>';
    $body .= "$image";
    $body .= '</body></html>';

    $mail = Mail::factory("mail");

    $mail->send($to, $headers, $body); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T01:36:33.410

您正在设置标题两次。改成这样：

```
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
$headers .= "From: $from \r\n";
$headers .= "Cc: ####@gmail.com \r\n";
$headers .= "Subject: Your Reminder From Remindmeto.org \r\n"; 
```

并摆脱数组部分:)

# javascript - 使用 Javascript/jQuery 以编程方式将当前锚点/哈希/片段附加到任何表单操作 url

> ID：12240696
> 
> 赞同：1
> 
> 时间：2012-09-02T23:57:25.843
> 
> 标签：javascript, jquery, url, anchor

我有一个处理 URL 的`JSP`外部 API 自定义（我知道服务器端本身不处理它们）。`taglibs``hash`

我正在尝试这样的事情

```
$(document).ready(function(){
    $('form').prop('action').append(window.locator.anchor)
}); 
```

但我做错了，我不确定这是否是最好的方法。你可以帮帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T00:01:42.807

没有理由这样做，因为哈希永远不会发送到服务器。但你*可以*这样做：

```
$('form').prop('action', function(i, val) {
    return val + window.location.hash;
}); 
```

您的代码中有几处不正确：

*   [`.prop(name)` *^([docs])*](http://api.jquery.com/prop/) *返回*该属性的值，该值通常是一个字符串。

*   [`.append` *^([docs])*](http://api.jquery.com/append/)是一种将*DOM 元素*到另一个元素的 jQuery 方法。它*不是*字符串方法，不能用于连接字符串。

*   `window.locator.anchor`不存在。[`window.location` *^([MDN])*](https://developer.mozilla.org/en-US/docs/DOM/window.location)保存有关当前 URL 的信息，并且它具有`hash`引用 URL 的片段标识符的属性。

我建议看一下[jQuery 文档](http://docs.jquery.com/Main_Page)。它对每种方法都有示例。您还必须[学习一些元素 JavaScript](https://developer.mozilla.org/en/JavaScript/Guide)才能执行简单的操作，例如字符串连接。

# html - 定心 水平下拉菜单

> ID：12240700
> 
> 赞同：1
> 
> 时间：2012-09-02T23:59:44.287
> 
> 标签：html, css, drop-down-menu, megamenu, horizontallist

我一直无法将这个水平列表下拉菜单居中。我是否必须重新设计所有的 CSS，因为我使用的是左侧浮动？

这是与列表位置有关的所有代码。或者单击此处实时查看

```
.megamenu {
margin:auto;
position:absolute;
margin:0;
width:100%;
font-size:1.182em;
list-style:none;
padding:0px;
line-height:38px;
font-weight: bold;
display:block;
list-style:none;
border-right: none;
top: -1px;
list-style-type:none;
list-style-position:inside;

.megamenu > li {

    display:inline;
    border:none;
    margin:0;
    float:left;
    padding: 0px 0 0px 30px;
    -webkit-transition: background-color 0.4s ease-out;
    -moz-transition: background-color 0.4s ease-out;
    -o-transition: background-color 0.4s ease-out;
    -ms-transition: background-color 0.4s ease-out; 
    border-right: none;
    transition: background-color 0.4s ease-out;

} 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T00:06:49.467

我遇到了很多问题，但有一天我终于找到了解决方案。这是使用表格和 css 自动边距。这是我的把戏。只需更改中心 td 的宽度并添加导航。

```
<table>
<td style="margin:0 auto;">
</td>
<td width="800"> <----Change this to the width of your nav bar.

PUT THE NAVIGATION HERE

</td>
<td style="margin:0 auto;">
</td>
</table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T00:21:49.137

据我了解，您不应该将块级元素嵌套在内联元素中。话虽如此，我已经通过简化您的 HTML 并将包含“内容”的内容替换为子无序列表来创建[此 JSFiddle 解决方案。](http://jsfiddle.net/BAsS4/)（理论上，如果您愿意`<div>`，这个只有一个`<li>`的子列表应该能够与内容一起保存。）`<div>`

因此，HTML 是：

```
<ul id="menu">
    <li>Home
        <ul>
            <li>Content</li>
        </ul>
    </li>
    <li>One day
        <ul>
            <li>Content</li>
        </ul>
    </li>
    <li>I wish to
        <ul>
            <li>Content</li>
        </ul>
    </li>
    <li>Be in the
        <ul>
            <li>Content</li>
        </ul>
    </li>
    <li>Centre of this page
        <ul>
            <li>Content</li>
        </ul>
    </li>
</ul>​ 
```

CSS 是这样设置的：

```
#menu {
    text-align: center;
    height: 30px;
}

#menu li {
    list-style: none;
    display:inline-block;
    margin: 5px 15px;
}

#menu li ul {
    display: none;
}

#menu li:hover ul {
    display: block;
    position: absolute;
    top: 30px; /* height of menu */
    left: 25px;
    right: 25px;
} 
```

在 JSFiddle 中，我添加了一些颜色以使元素在哪里变得一目了然。我还删除了您在实际示例中的动画 CSS，但这应该很容易重新插入。

这种方法依赖于给菜单一个绝对高度——在这个例子中`30px`——然后绝对定位`<div>`出现在它下面的悬停的“内容” `top: 30px`（或者菜单高度恰好是什么）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T00:30:01.980

有很多不同的方法可以做到这一点——不过，你需要给它一个宽度，而不是 100%。那样可以么？

然后有了适当的宽度，您可以`display:inline`在 ul 和`text-align:center`父 div 上使用，或者使用`margin:auto`.

如果这没有帮助，请告诉我，我会为你做一个小提琴:)

# azure - 托管在 Windows Azure 上的 Team Foundation 服务

> ID：12240701
> 
> 赞同：2
> 
> 时间：2012-09-02T23:59:58.217
> 
> 标签：azure, tfs, azure-devops

是否可以将 Team Foundation Server 用作 Windows Azure 订阅上的服务？我知道 tfs.visualstudio.com 存在，并且我一直在我工作的公司内对其进行评估，但我正在考虑我在家工作的个人项目。这可以作为服务吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T00:41:14.867

[免责声明 - 我在 tfs.visualstudio.com 工作]

tfs.visualstudio.com 以 TFS 即服务的形式提供。它非常适合您在 @home 处理项目的场景，因为它位于云中并且可以从任何地方使用。对于希望在连接或偶尔连接的场景中一起工作的人来说，它也非常有用。它将部署和维护您自己的实例的高可用性和管理的负担从您身上转移到 Microsoft 的运营中 - 它让您和您的团队专注于您想要做的事情 - 编写代码和创建产品。

您询问它是否在 Windows azure 订阅中。需要明确的是，您没有在您的 azure 订阅上部署 TFS - tfs.visualstudio.com 是 TFS 的多租户实例，您可以注册它部署在 Microsoft 的 azure 订阅上。邀请码最近也被取消了，所以请继续，注册并尝试一下。

但是，您可以获取自己的 azure 订阅并在您自己的 azure 订阅中的 VM 上部署 TFS（基本或快速）。

优点和缺点是：

*   tfs.visualstudio.com 目前是免费的，它为您提供核心 TFS，几乎没有摩擦。
*   在您自己的 Azure 订阅中拥有自己的实例可为您提供更多控制 - 自定义工作项类型等...
*   目前 tfs.visualstudio.com 提供核心功能 - 源代码控制和内置工作项类型，如果您想要共享点或报告服务（@home 项目可能不需要），那么您需要在 azure vm 上部署自己的实例。
*   如果您部署自己的虚拟机，那么您必须维护 TFS（升级、补丁等）。有了 tfs.visualstudio.com，它就会发生在你身上。
*   在 tfs.visualstudio.com 上，您可以更快地访问更新的功能（我们每三周发送一次）。

因此，总而言之，如果在 VM 上部署 TFS，则可以 (1) 在 Azure 上将 TFS 部署为服务。或者，您可以 (2) 成为多租户 tfspreview.com 产品的一部分。您不能做的是在您的 azure 订阅上部署您自己的云实例（azure web 角色、jobagent 工作人员角色和 sql azure DB）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T00:05:44.340

是的，您所要做的就是在上面设置一个个人帐户（使用唯一的命名空间再次注册），*请注意，它仍处于预览状态，因此它是免费的，当它发布时会产生费用，但我希望会有一个免费的供个人使用/社区（如 GIT）使用的层，我认为他们提到了类似的东西，5 个用户以下免费使用，我认为这是在本地，但希望它应该遵循 TFS 即服务。

Brian Harry 的博客是了解 TFS（本地）和 TFS 即服务的最新和最伟大的资源的绝佳资源。

[http://blogs.msdn.com/b/bharry/](http://blogs.msdn.com/b/bharry/)

*注意我目前正在运行两个 TFS 即服务帐户，一个用于我的公司（评估），一个用于我的游戏项目的个人帐户。

# iphone - Facebook SDK Login 启动一个新的 ViewController

> ID：12240702
> 
> 赞同：0
> 
> 时间：2012-09-03T00:00:17.113
> 
> 标签：iphone, ios, xcode, facebook

我一直在关注 Facebook SDK 中的登录教程之一。我已正确编码以使用相同的 ViewController 和 Button 登录和注销。我想知道登录到 Facebook 后如何激活另一个 ViewController，任何建议都会很棒......

我有一个 LoginViewController，一旦登录，我想启动 MainViewController

代码：

AppDelegate.h

```
#import <UIKit/UIKit.h>
#import <FacebookSDK/FacebookSDK.h>

@interface AppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) UIWindow *window;

extern NSString *const FBSessionStateChangedNotification;
extern NSString *const SCSessionStateChangedNotification;

- (BOOL)openSessionWithAllowLoginUI:(BOOL)allowLoginUI;

- (void) closeSession;

@end 
```

AppDelegate.m

```
#import "AppDelegate.h"

@implementation AppDelegate

NSString *const FBSessionStateChangedNotification =
@"com.example.Login:FBSessionStateChangedNotification";

NSString *const SCSessionStateChangedNotification =
@"com.nathancleary.Login:SCSessionStateChangedNotification";

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:  (NSDictionary *)launchOptions
{
// Override point for customization after application launch.
return YES;
}

/*
* If we have a valid session at the time of openURL call, we handle
* Facebook transitions by passing the url argument to handleOpenURL
*/
- (BOOL)application:(UIApplication *)application
        openURL:(NSURL *)url
sourceApplication:(NSString *)sourceApplication
     annotation:(id)annotation {
// attempt to extract a token from the url
return [FBSession.activeSession handleOpenURL:url];
}

- (void)applicationWillResignActive:(UIApplication *)application
{
// Sent when the application is about to move from active to inactive state. This can    occur for certain types of temporary interruptions (such as an incoming phone call or SMS    message) or when the user quits the application and it begins the transition to the background   state.
// Use this method to pause ongoing tasks, disable timers, and throttle down OpenGL ES  frame rates. Games should use this method to pause the game.
}

- (void)applicationDidEnterBackground:(UIApplication *)application
{
// Use this method to release shared resources, save user data, invalidate timers, and  store enough application state information to restore your application to its current state in  case it is terminated later. 
// If your application supports background execution, this method is called instead of  applicationWillTerminate: when the user quits.
}

- (void)applicationWillEnterForeground:(UIApplication *)application
{
// Called as part of the transition from the background to the inactive state; here you  can undo many of the changes made on entering the background.
}

- (void)applicationDidBecomeActive:(UIApplication *)application
{
// Restart any tasks that were paused (or not yet started) while the application was     inactive. If the application was previously in the background, optionally refresh the user    interface.

// this means the user switched back to this app without completing
// a login in Safari/Facebook App
if (FBSession.activeSession.state == FBSessionStateCreatedOpening) {
    [FBSession.activeSession close]; // so we close our session and start over
}
}

- (void)applicationWillTerminate:(UIApplication *)application
{
// Called when the application is about to terminate. Save data if appropriate. See also   applicationDidEnterBackground:.

[FBSession.activeSession close];
}

/*
* Callback for session changes.
*/
- (void)sessionStateChanged:(FBSession *)session
                  state:(FBSessionState) state
                  error:(NSError *)error
{
switch (state) {
    case FBSessionStateOpen:
        if (!error) {
            // We have a valid session
            NSLog(@"User session found");
        }
        break;
    case FBSessionStateClosed:
    case FBSessionStateClosedLoginFailed:
        [FBSession.activeSession closeAndClearTokenInformation];
        break;
    default:
        break;
}

[[NSNotificationCenter defaultCenter]
 postNotificationName:FBSessionStateChangedNotification
 object:session];

if (error) {
    UIAlertView *alertView = [[UIAlertView alloc]
                              initWithTitle:@"Error"
                              message:error.localizedDescription
                              delegate:nil
                              cancelButtonTitle:@"OK"
                              otherButtonTitles:nil];
    [alertView show];
}
}

/*
* Opens a Facebook session and optionally shows the login UX.
*/
- (BOOL)openSessionWithAllowLoginUI:(BOOL)allowLoginUI {
NSArray *permissions = [[NSArray alloc] initWithObjects:
                        @"user_likes",
                        @"read_stream",
                        nil];
return [FBSession openActiveSessionWithPermissions:permissions
                                      allowLoginUI:allowLoginUI
                                 completionHandler:^(FBSession *session,
                                                     FBSessionState state,
                                                     NSError *error) {
                                     [self sessionStateChanged:session
                                                         state:state
                                                         error:error];
                                 }];
}

- (void) closeSession {
[FBSession.activeSession closeAndClearTokenInformation];
}

@end 
```

登录视图控制器.h

```
#import <UIKit/UIKit.h>

@interface LoginViewController : UIViewController

- (IBAction)authButtonAction:(id)sender;

@property (strong, nonatomic) IBOutlet UIButton *authButton;

@end 
```

登录视图控制器.m

```
#import "LoginViewController.h"
#import "AppDelegate.h"

@interface LoginViewController ()

@end

@implementation LoginViewController
@synthesize authButton;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    // Custom initialization
}
return self;
}

- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view.

[[NSNotificationCenter defaultCenter]
 addObserver:self
 selector:@selector(sessionStateChanged:)
 name:FBSessionStateChangedNotification
 object:nil];

// Check the session for a cached token to show the proper authenticated
// UI. However, since this is not user intitiated, do not show the login UX.
AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
[appDelegate openSessionWithAllowLoginUI:NO];
}

- (void)viewDidUnload
{
[self setAuthButton:nil];
[super viewDidUnload];
// Release any retained subviews of the main view.

[[NSNotificationCenter defaultCenter] removeObserver:self];
}

- (void)sessionStateChanged:(NSNotification*)notification {
if (FBSession.activeSession.isOpen) {
    [self.authButton setTitle:@"Logout" forState:UIControlStateNormal];
} else {
    [self.authButton setTitle:@"Login" forState:UIControlStateNormal];
}
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (IBAction)authButtonAction:(id)sender {

AppDelegate *appDelegate =
[[UIApplication sharedApplication] delegate];

// If the user is authenticated, log out when the button is clicked.
// If the user is not authenticated, log in when the button is clicked.
if (FBSession.activeSession.isOpen) {
    [appDelegate closeSession];
} else {
    // The user has initiated a login, so call the openSession method
    // and show the login UX if necessary.
    [appDelegate openSessionWithAllowLoginUI:YES];
}

}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T00:14:24.533

如果您使用的是 Facebook 的 sdk 3，您可以将其放在由完成处理程序调用的方法中：

```
- (void)openFacebookSession
{
    NSArray *permissions = [[NSArray alloc] initWithObjects:
                            @"user_photos",
                            nil];
    [FBSession openActiveSessionWithPermissions:permissions
                                   allowLoginUI:YES
                              completionHandler: ^(FBSession *session, FBSessionState state, NSError *error){
                                  [self sessionStateChanged:session state:state error:error];
                              }];
} 
```

这是主视图控制器的启动位置：

```
- (void)sessionStateChanged:(FBSession *)session
                      state:(FBSessionState) state
                      error:(NSError *)error
{
    switch (state) {
        case FBSessionStateOpen:
        {
            NSLog(@"FBSessionStateOpen");

            //[activityIndicator startAnimating];
            // initialize the viewcontroller with a little delay, so that the UI displays the changes made above
            double delayInSeconds = 0.1;
            dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
            dispatch_after(popTime, dispatch_get_main_queue(), ^(void){

                UIStoryboard *mainStoryboard = [UIStoryboard storyboardWithName:@"MainStoryboard"
                                                                         bundle: nil];

                UIViewController *controller = [mainStoryboard instantiateViewControllerWithIdentifier: @"MainViewController"];

                [self presentViewController:controller animated:YES completion:nil];

                //[activityIndicator stopAnimating];
            });

            break;
        }

        case FBSessionStateClosed:
        {
            NSLog(@"FBSessionStateClosed");
            break;
        }

        case FBSessionStateClosedLoginFailed:
        {
             [FBSession.activeSession closeAndClearTokenInformation];
             NSLog(@"Facebook State Closed or Failed");

             break;
        }
        default:
        {
             break;
        }
    }

    if (error) {
        UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Error"
                                                            message:error.localizedDescription
                                                           delegate:nil
                                                  cancelButtonTitle:@"OK"
                                                  otherButtonTitles:nil];
        [alertView show];
    }
} 
```

此方法专门用于当您必须加载重型主控制器时（这就是您可以激活加载指示器的原因）。您可以轻松地对其进行修改以加载一个可以在同一线程中启动的简单程序。

# jquery - 如何将动画效果与点击功能混合？

> ID：12240703
> 
> 赞同：0
> 
> 时间：2012-09-03T00:00:42.990
> 
> 标签：jquery, timeout

我制作了一个垂直的 jQuery 幻灯片，如果您单击 3 个不同的图像，表格就会滑动。这很完美，但我还需要它在定时功能上滑动。我曾尝试使用超时功能进行循环，但我的点击代码不起作用，计时功能甚至不起作用。如果它可能只是一个小错误或其他东西，那么在某个时间上的尝试是最底层的。

原创点击功能（作品）

```
$(document).ready(function() {

    $("#slide1-1").click(function() {
        $("#slide1_images").css("top","0");
        $(".imagetab").css("opacity","1.0");
        $(".imagetab").css("filter",'alpha(opacity="100")');
        $(".imagetab2").css("opacity",".4");
        $(".imagetab2").css("filter",'alpha(opacity="40")');
        $(".imagetab3").css("opacity",".4");
        $(".imagetab3").css("filter",'alpha(opacity="40")');

    });
    $("#slide1-2").click(function() {
        $("#slide1_images").css("top","-430px");
        $(".imagetab2").css("opacity","1.0");
        $(".imagetab2").css("filter",'alpha(opacity="100")');
        $(".imagetab").css("opacity",".4");
        $(".imagetab").css("filter",'alpha(opacity="40")');
        $(".imagetab3").css("opacity",".4");
        $(".imagetab3").css("filter",'alpha(opacity="40")');

    });
    $("#slide1-3").click(function() {
        $("#slide1_images").css("top","-860px");
        $(".imagetab3").css("opacity","1.0");
        $(".imagetab3").css("filter",'alpha(opacity="100")');
        $(".imagetab2").css("opacity",".4");
        $(".imagetab2").css("filter",'alpha(opacity="40")');
        $(".imagetab").css("opacity",".4");
        $(".imagetab").css("filter",'alpha(opacity="40")');

    });

}); 
```

计时尝试（不起作用）

```
 $(document).ready(function() {

    var slide = function() {
    $("#slide1_images").css("top","0");
    }

    var slide2 = function() {
    $("#slide1_images").css("top","-430px");
    }

    var slide3 = function() {
    $("#slide1_images").css("top","-860px");
    }

    var i;

    for(i = 0; i < element.length; ++i) {
    if (i=="1")
     {
      setTimeout(slide, 2000);
     }
    if (i=="2")
     {
      setTimeout(slide2, 2000);
     }
    if (i=="3")
     {
      setTimeout(slide3, 2000);
     }
    if (i=="4")
     {
      var i = "0";
     }

    }

 *INSERT CODE FROM ABOVE HERE.*

        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T01:26:58.757

您应该能够概括您的解决方案，而不是复制这么多代码，因为您对每个选项卡执行或多或少相同的事情。这个解决方案减少了很多冗余：

```
function slide() {
    $("#slide1_images").css("top", "0");
}

function slide2() {
    $("#slide1_images").css("top", "-430px");
}

function slide3() {
    $("#slide1_images").css("top", "-860px");
}

$(document).ready(function() {
    setTimeout(slide, 2000);
    setTimeout(slide2, 4000);
    setTimeout(slide3, 6000);
    $("#slide1-1, #slide1-2, #slide1-3").click(function() {
        var index = $(this).index("#slide1-1, #slide1-2, #slide1-3");
        var tab = ['.imagetab', '.imagetab2', '.imagetab3'];

        $( tab[index] ).css("opacity", "1.0");
        $( tab[index] ).css("filter", 'alpha(opacity="100")');
        $( tab[(index+1) % 3] ).css("opacity", ".4");
        $( tab[(index+1) % 3] ).css("filter", 'alpha(opacity="40")');
        $( tab[(index+2) % 3] ).css("opacity", ".4");
        $( tab[(index+2) % 3] ).css("filter", 'alpha(opacity="40")');
    });
    $("#slide1-1").click(slide);
    $("#slide1-2").click(slide2);
    $("#slide1-3").click(slide3);
});​ 
```

另外，应该注意的是，您甚至不需要`setTimeout`这些动画；jQuery 有一个内置[`.animate()`](http://api.jquery.com/animate/)函数，可以通过更平滑的过渡来修改 css 属性：

```
$("#slide1_images").animate({ top: "-860px" }, 2000 );​ 
```

# java - Java/Android：处理程序继承和覆盖

> ID：12240705
> 
> 赞同：1
> 
> 时间：2012-09-03T00:00:45.783
> 
> 标签：java, android

我有一个使用扩展 Activity 类的类的 Android 应用程序，我们称之为 MyActivity。在那个类中，我有一个处理各种事情的处理程序。现在扩展 MyActivity 类的 Activity 应该能够扩展这些东西，即它必须能够处理除 MyActivity 之外的其他东西。

这是我想要的一个例子：

这是我修改过的 Activity 类，它有一个处理程序：

```
class MyActivity extends Activity {
    protected Hander myActivityHandler = new Handler()
    {
        @Override
        public void handleMessage(Message msg) {
            switch(msg.what)
            {
            case CASE_1:
                // do stuff
                break;
            case CASE_2:
                // do other stuff
                break;
            }
        }
    }
} 
```

这是扩展该类的类，我想向处理程序添加更多案例：

```
class MySuperSpecialActivity extends MyActivity {
    // add/override cases of inherited myActivityHandler handler
} 
```

我不知道这是否可能，可能有更好的方法来实现这个功能，但这就是我开始我的代码的方式，并且 MyActivity 类是必要的，因为它被使用了很多。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T02:55:00.780

您可以考虑在 Activity 中实现[Handler.Callback](http://developer.android.com/reference/android/os/Handler.Callback.html)：

```
public class MainActivity extends Activity implements Handler.Callback {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Handler handler = new Handler(this);
    }

    @Override
    public boolean handleMessage(Message msg) {
        // Handle your message here
        return false;
    }    
} 
```

从此 Activity 继承新的 Activity 并覆盖“handleMessage”：

```
public class AnotherActivity extends MainActivity {
    @Override
    public boolean handleMessage(Message msg) {
        super.handleMessage(msg);
        return super.handleMessage(msg);
    }

} 
```

# python - Python 和 MySQL 打印结果

> ID：12240706
> 
> 赞同：10
> 
> 时间：2012-09-03T00:00:55.923
> 
> 标签：python, mysql

我正在尝试自学 Python，但我遇到了障碍。我需要从 MySQL 中获取一个字段，但是当我从数据库中检索数据时，它会变得很奇怪。这就是我使用的下面的代码。

```
cursor1 = db.cursor()
cursor1.execute("select djname from jerryins_djleaderboard.leaderboard where djname = %s", dj)
result = cursor1.fetchall()
print result 
```

它打印出来是这样的：

```
(('cutecrazygirl88\r\n',) 
```

但是我希望它像在数据库中一样可爱。任何帮助，将不胜感激。先感谢您！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-03T00:04:23.170

`fetchall()`返回游标中的*所有*字段和*所有*行。您将需要遍历行并访问字段才能获取数据。

```
for row in result:
  print row[0] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-19T11:44:22.877

要使用 beautifultable 打印表格中包含的所有内容：

```
from beautifultable import BeautifulTable
def function_name(result):
     table=BeautifulTable()
     table.column_headers["DJ Name"]
     for row in result:
          table.append_row(row)
     print(table) 
```

# asp.net - 在 .NET 中通过数据库初始化派生类

> ID：12240708
> 
> 赞同：0
> 
> 时间：2012-09-03T00:01:34.790
> 
> 标签：asp.net, .net, sql

假设我有一个具有一个属性的对象车：模型

我将使用数据库填充对象，如下所示：

```
Public Class Car

    Public Property Model() As String
        Get
            Return _Model
        End Get
        Set(ByVal value As String)
            _Model = value
        End Set
    End Property
    Private _Model As String

    Private Sub SetObjectData(ByVal theObjReader As System.Data.SqlClient.SqlDataReader)
        Try
            Me._Model = theObjReader("Model").ToString()
        Catch ex As Exception
            Throw New Exception("Unable to Initialize Car.")
        End Try
    End Sub

    Public Sub New(ByVal Car_ID As Integer)
        Dim connection As New SqlConnection(DBTool.DataConnectionString)
        Try
            Dim cmd As SqlCommand
            cmd = New SqlCommand("getCarByCar_ID", connection)
            cmd.CommandType = CommandType.StoredProcedure

            cmd.Parameters.AddWithValue("@Car_ID ", Car_ID)

            connection.Open()
            Dim objReader As SqlDataReader = cmd.ExecuteReader()

            Do While objReader.Read()
                SetObjectData(objReader)
            Loop

            objReader.Close()
            connection.Close()
        Catch ex As Exception
            connection.Close()
        End Try
    End Sub

End Class 
```

现在，让我们假设这个类被包装在一个 DLL 中。

我想做的是继承它，同时消耗我的财产。例如，假设我们想要一个具有新属性“Price”的新对象“Expensive_Car”。

如何利用之前的 Car 对象并以最“有条理”的方式初始化这个派生类，而无需编写两次代码？“价格”字段与“型号”字段保存在同一个 SQL 表中。当然我们需要从数据库中获取“价格”，就像我们拉模型一样。

我的目标是利用现有的类并使用新的派生类来扩展它们，而根本不改变父类。SQL 数据库结构可以根据需要使用其他字段进行更改。

谢谢！

缺口

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T02:19:30.800

您可能需要考虑使用众多 ORM 之一，例如 Entity Framework 或 NHibernate。

如果您真的想要一种自己动手的方法，那么从这里开始最简单的方法可能是向 `protected overridable`基类添加两种方法，一种是使用正确的存储过程名称创建 SqlCommand 对象，另一种是加载特定于派生类的属性。

您可能还应该将连接、命令和数据读取器对象的创建包装在`Using`语句中，以确保正确清理所有内容。

这是 ac# 示例，因为我的 VB.Net 真的很生锈：

```
public class Car
{
  public Car(int carId) {
    CarId = carId;
    LoadProperties();
  }

  public int CarId { get; set; }
  public string Model { get; set; }

  protected virtual SqlCommand CreateCommand() {
    // Override this method in derived classes to call a different procedure.
    return new SqlCommand("getCarByCar_ID");
  }

  protected virtual void LoadMoreProperties(SqlDataReader reader)
  {
    // Override this method in derived classes to load additional properties.
  }

  private void LoadProperties() {
    using( var connection = new SqlConnection(DBTool.ConnectionString) ) {

      using( cmd = CreateCommand() ) {
        using( var reader = cmd.ExecuteReader() ) {
          // Read Car specific properties

          Model = // get model from reader.

          LoadMoreProperties(reader);
        }
      }
    }
  }
}

public class ExpensiveCar : Car {

  public decimal Price { get; set; }

  protected override SqlCommand CreateCommand() {
    return new SqlCommand("getExpensiveCarByCar_ID");
  }

  protected override void LoadMoreProperties(SqlDataReader reader) {
    Price = // get price from reader.
  }
} 
```

它不会编译，但应该给你这个想法。您只想使可以更改的部分成为可覆盖的 - 调用不同的存储过程并加载特定于派生类的属性。

# c# - 将内容放在 HttpResponseMessage 对象中？

> ID：12240713
> 
> 赞同：207
> 
> 时间：2012-09-03T00:02:05.517
> 
> 标签：c#, asp.net-mvc, asp.net-web-api

几个月前，Microsoft 决定更改 HttpResponseMessage 类。以前，您可以简单地将数据类型传递给构造函数，然后返回带有该数据的消息，但现在不行了。

现在，您需要使用 Content 属性来设置消息的内容。问题是它是 HttpContent 类型的，我似乎找不到将字符串转换为 HttpContent 的方法。

有谁知道如何处理这个问题？非常感谢。

* * *

## 回答 #1

> 赞同：250
> 
> 时间：2012-09-03T01:04:37.477

对于字符串，最快的方法是使用[StringContent](http://msdn.microsoft.com/en-us/library/system.net.http.stringcontent)构造函数

```
response.Content = new StringContent("Your response text"); 
```

对于其他常见场景，还有许多附加的[HttpContent 类后代。](http://msdn.microsoft.com/en-us/library/system.net.http.httpcontent)

* * *

## 回答 #2

> 赞同：143
> 
> 时间：2013-05-21T19:33:18.010

[您应该使用Request.CreateResponse](https://docs.microsoft.com/en-us/previous-versions/aspnet/hh969056(v=vs.108))创建响应：

```
HttpResponseMessage response =  Request.CreateResponse(HttpStatusCode.BadRequest, "Error message"); 
```

您不仅可以将对象传递给 CreateResponse 字符串，而且它会根据请求的 Accept 标头对它们进行序列化。这使您免于手动选择格式化程序。

* * *

## 回答 #3

> 赞同：71
> 
> 时间：2012-09-03T00:09:50.490

显然，这里详细介绍了新的方法：

[http://aspnetwebstack.codeplex.com/discussions/350492](http://aspnetwebstack.codeplex.com/discussions/350492)

引用亨利克的话，

```
HttpResponseMessage response = new HttpResponseMessage();

response.Content = new ObjectContent<T>(T, myFormatter, "application/some-format"); 
```

所以基本上，必须创建一个 ObjectContent 类型，它显然可以作为 HttpContent 对象返回。

* * *

## 回答 #4

> 赞同：64
> 
> 时间：2016-12-10T13:52:30.307

最简单的单行解决方案是使用

```
return new HttpResponseMessage( HttpStatusCode.OK ) {Content =  new StringContent( "Your message here" ) }; 
```

对于序列化的 JSON 内容：

```
return new HttpResponseMessage( HttpStatusCode.OK ) {Content =  new StringContent( SerializedString, System.Text.Encoding.UTF8, "application/json" ) }; 
```

* * *

## 回答 #5

> 赞同：42
> 
> 时间：2014-02-21T13:42:25.070

对于任何 T 对象，您可以执行以下操作：

```
return Request.CreateResponse<T>(HttpStatusCode.OK, Tobject); 
```

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2016-01-13T16:51:45.403

您可以创建自己的专业内容类型。例如，一个用于 Json 内容，一个用于 Xml 内容（然后只需将它们分配给 HttpResponseMessage.Content）：

```
public class JsonContent : StringContent
{
    public JsonContent(string content)
        : this(content, Encoding.UTF8)
    {
    }

    public JsonContent(string content, Encoding encoding)
        : base(content, encoding, "application/json")
    {
    }
}

public class XmlContent : StringContent
{
    public XmlContent(string content) 
        : this(content, Encoding.UTF8)
    {
    }

    public XmlContent(string content, Encoding encoding)
        : base(content, encoding, "application/xml")
    {
    }
} 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2017-04-03T15:38:06.360

受 Simon Mattes 回答的启发，我需要满足 IHttpActionResult 所需的 ResponseMessageResult 返回类型。还使用了 nashawn 的 JsonContent，我最终得到了......

```
 return new System.Web.Http.Results.ResponseMessageResult(
            new System.Net.Http.HttpResponseMessage(System.Net.HttpStatusCode.OK)
            {
                Content = new JsonContent(JsonConvert.SerializeObject(contact, Formatting.Indented))
            }); 
```

请参阅 nashawn 对 JsonContent 的回答。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2017-06-07T20:04:23.770

毫无疑问，你是正确的弗洛林。我在做这个项目，发现这段代码：

```
product = await response.Content.ReadAsAsync<Product>(); 
```

可以替换为：

```
response.Content = new StringContent(string product); 
```

# postgresql - ec2实例重启后无法启动postgresql

> ID：12240722
> 
> 赞同：1
> 
> 时间：2012-09-03T00:04:56.977
> 
> 标签：postgresql, amazon-ec2

我是postgresql的新手。我的一个朋友正在 Amazon EC2 实例上托管一个带有 postgresql db 的 php 脚本。他停止了实例，并在两个月后启动了它。默认情况下，EC2 实例没有运行 Postgresql，所以我尝试了：

```
sudo /etc/init.d/postgresql start 
```

并得到

```
Starting postgresql service:                               [FAILED] 
```

关于如何启动和运行它的任何猜测？该实例在默认的 Amazon Linux 实例上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T07:51:00.677

可以通过减少共享缓冲区或增加内核的 shmem max 设置来修复日志中提到的错误。此外，正如您所指出的，PostgreSQL 需要安全文件权限才能启动。我的建议是从较小的共享缓冲区开始，然后弄清楚你需要什么。

# javascript - 根据下拉选择向表单添加和删除输入标签

> ID：12240723
> 
> 赞同：1
> 
> 时间：2012-09-03T00:05:08.637
> 
> 标签：javascript, forms

因此，正如标题所说，我正在尝试将输入标签添加到基于下拉选择的表单中。这是我到目前为止所拥有的：

HTML表格：

```
<form action="/next" method="POST" > 
    <select name="category" id="category" onchange="javascript: dropdownlist(this.options[this.selectedIndex].value);">
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
    </select>
    <div id="count">
        <p>
            <div id="something">
                <input type="text" name="text" value="" >
                <input type="text" name="othertext" value="" >
            </div>
        </p>
        <span id="Room"></span>
    </div>
    <input type="submit" value="Next" >
</form> 
```

然后是做我想做的Javascript：

```
function dropdownlist(listindex) {

    document.Room = 0;
    switch (listindex) {

    case "1":

        var check = document.getElementById('added');
        if (check != null) {

            element = document.getElementById('added');
            element.parentNode.removeChild(element);

            element = document.getElementById('added');
            element.parentNode.removeChild(element);

            element = document.getElementById('added');
            element.parentNode.removeChild(element);

        }

        break;

    case "2":

        var check = document.getElementById('added');
        if (check == null) {

            var counter = 1;

            var newFields = document.getElementById('something').cloneNode(true);
            newFields.id = 'added';
            var newField = newFields.childNodes;
            for (var i = 0; i < newField.length; i++) {

                var theName = newField[i].name
                if (theName) newField[i].name = theName + counter;
            }
            var insertHere = document.getElementById('Room');
            insertHere.parentNode.insertBefore(newFields, insertHere);

        }

        else {
            var id = document.getElementById('count');
            var countid = id.getElementsByTagName('p')
            var number = countid.length;

            if (number == 3) {
                element = document.getElementById('added');
                element.parentNode.removeChild(element);
            }​

    }​ 
```

现在这一切都工作得很好，可能有更好的方法来做到这一点，但由于我对 javascript 的经验真的很少，这是我能做到的最好的。现在的问题是：如果用户添加了 3 个元素，然后决定返回到 2，我必须检查添加了多少标签，我想出的解决方案需要我添加一个 <p> 标签围绕在 div 顶部创建的每个元素，因此我可以选择 div 中的所有 < p> 标签，然后删除所需数量的标签。

这个解决方案很好，但后来我注意到这与我的代码的早期部分混淆了，我将每个输入标签的名称更改为唯一的名称，这是我需要将信息存储在表单中的东西。

那么任何人都可以建议我使用不同的解决方法来实现此功能吗？根据用户选择添加和删除输入标签，同时为所有标签保留唯一名称？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T01:03:21.153

您的输入元素的最大数量是否很小？如果是这样，您可以考虑将它们*全部*合并到页面上，然后根据需要启用它们或设置它们的可见性：

```
document.form1.text1.disabled = true;              // or false

document.form1.text1.style.visibility = "hidden";  // or "visible" 
```

这需要首先命名您的表单和输入元素：

```
<form name="form1" ... >

<input type="text" name="text1" ... >
<input type="text" name="text2" ... > 
```

`insertBefore()`这种方法比通过,`removeChild()`等操作 DOM 简单得多。

# java - Actionlistener/JComboBox 冲突

> ID：12240729
> 
> 赞同：0
> 
> 时间：2012-09-03T00:07:34.657
> 
> 标签：java, swing, awt, actionlistener, jcombobox

我正在尝试编写一个程序，该程序将从一个下拉框中获取输入，并使用它来计算另一个字段的下拉框，但我一直遇到问题。为了使它工作，我必须从 JComboBox 上删除所有项目，然后再重新填充它，但这会导致程序抛出异常。

```
jbox1.addActionListener(new ActionListener()
    {
    public void actionPerformed(ActionEvent e)
    {
    autoCalc();

    String s = jbox1.getSelectedItem().toString();
     workS.set1(s);  
    jbox2.removeAllItems();
     for(int i = 0; i <= workS.jbox1.getSelectedItem; i++)
         {
         String temp = ("" + i);
         jbox2.addItem(temp);
         } 
        autoCalc();
     }
});

jbox2.addActionListener(new ActionListener()
    {
    public void actionPerformed(ActionEvent e)
    {
    autoCalc();      
    String s = jbox2.getSelectedItem().toString();
     workS.set2(s);  
        autoCalc();
     }
}); 
```

据我所知，从 jbox2 中删除所有项目调用 jbox2 actionlistener，它意识到该字段为空并引发异常。有没有人有办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T05:58:21.417

保留`ActionListener`添加到 jbox2 的引用。在删除项目并填充新列表之前，删除`ActionListener`模型填充新项目后的读取。

# c# - IsAjaxRequest 似乎不适用于 Internet Explorer

> ID：12240734
> 
> 赞同：1
> 
> 时间：2012-09-03T00:08:42.553
> 
> 标签：c#, asp.net-mvc, jquery

我`HttpContext.Request.IsAjaxRequest()`用来检查传入请求是否来自 ajax 调用。

（实际上来自 Valums FileUploader 脚本）

这适用于 Chrome，但不适用于 IE？

是什么赋予了？还有另一种方法可以在所有浏览器中准确检查吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T01:31:47.700

`IsAjaxRequest()`只是检查`"X-Requested-With"`HTTP 请求中是否存在标头。如果它不存在或具有错误的值，则检查将返回 false。

我的猜测是，如果 AJAX 请求不存在，Chrome 和 FF 可能会为您添加此请求，但 IE 不存在。

这意味着脚本中很可能存在错误，并且它没有添加标题。[使用Fiddler](http://www.fiddler2.com/fiddler2/)或 IE 开发人员工具检查这一点应该很容易。

要解决此问题，您有两个选项之一。

1.  修复脚本，以便将标头添加到 XHR 请求。
2.  使用没有错误的其他脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-04T14:26:13.260

如果像我一样，您对 ajax 和“普通”页面使用了相同的 URL。那么 IE 就可以使用缓存的版本了。如果是这种情况，它将以 302 响应响应（我认为）。

修复

```
 $.ajax({
                    method: "GET",
                    cache:false, 
```

将缓存标志添加到您的 ajax。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T02:02:57.053

`IsAjaxRequest`测试当您使用它们的 AJAX 帮助程序时，像 jQuery 这样的库设置的某个 HTTP 标头是否存在。您正在使用的上传脚本[回退到 IE 中隐藏的 iframe](https://github.com/valums/file-uploader#summary)。由于 jQuery 的 AJAX 助手没有在 iframe 回退中使用，因此 MVC 查找的标头没有在请求中设置。

我对那个上传库不够熟悉，不知道它是否通过它`action`的`/controller/upload/?IsAjaxRequest=true`. 然后，您可以检查`Request.QueryString["IsAjaxRequest"] == "true"`，无论客户端实现如何，它都应该工作（假设上传者确实通过了该查询字符串）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T06:16:56.907

它实际上是一个 Jquery 1.7.2 错误，因为它没有添加“X-Requested-With”标头。他们在版本 1.8.2 中修复了它。PS：我自己测试过

# php - 持久连接：MySQL FOUND_ROWS() 结果

> ID：12240735
> 
> 赞同：4
> 
> 时间：2012-09-03T00:08:51.073
> 
> 标签：php, mysql, pdo, persistent

作为背景词，在 MySQL 中，使用 SQL_CALC_FOUND_ROWS 标志和 FOUND_ROWS() 函数，MySQL 允许您检索如果 SELECT 不使用 LIMIT 将返回的总行数，而无需发出第二次重载询问：

```
$query =  "SELECT SQL_CALC_FOUND_ROWS * from movies
            WHERE....
            LIMIT 20";
$res1 = $db->query($query);
$numrows = $db->query('SELECT FOUND_ROWS()')->fetchColumn(); 
```

这对于分页很有用。假设您正在使用持久连接：

```
try{
  $db = new PDO('mysql:host=localhost;dbname=' . $dbname, $user, $pass,
        array( PDO::ATTR_PERSISTENT => true )
               );
etc. 
```

如果两个用户几乎同时点击，有什么方法可以使请求交叉路径并且一个可以获取另一个请求的数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T00:37:10.763

不，这不是问题。

就您的 PHP 页面而言，它在页面期间有其自己的、唯一的连接。持久连接与非持久连接的唯一区别是，在页面退出后，连接不会被拆除，而是放回池中以交给其他页面。换句话说，它不是*共享*连接，而是*重用*连接。如果有 35 个页面同时为一个页面请求提供服务，那么仍然会有 35 个同时连接到您的数据库。

但是，您必须小心传播连接状态（例如不完整的事务），但这是一个单独的问题。

# c++ - 模板元编程和浮点常数系数

> ID：12240739
> 
> 赞同：3
> 
> 时间：2012-09-03T00:10:25.683
> 
> 标签：c++, template-meta-programming

我想知道在 C++ 模板元编程的世界中是否有方法/技术可以替代硬编码的浮点系数。为了更清楚，我将尝试举一个例子：

考虑一下我想制作一种求解线性方程组的方法：

```
y = a * x + b 
```

一种方法是在运行时提供,`a`作为参数。这是我想避免的。考虑一下我知道然后我可以写类似的东西：`x``b``a``b`

```
double linear(double x) {
    return 2.0 * x + 3.0;
} 
```

所以我知道`a = 2.0`，`b= 3.0`。我想做的是从模板中提取`a`和提取`b`，所以它们在编译时就在那里，就像被硬编码一样。一个示例方法可能看起来像（这是我想在我的代码中写的）：

```
template <class coefs>
double linear(double x) {
    return coefs::a * x  +  coefs::b;
} 
```

这有可能吗？也不确定我的问题是否足够清楚，所以如果我需要改写，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T00:27:21.393

由于`float`和`double`类型不能是模板参数，因此您不能通过模板参数设置系数，但您可以简单地对值进行硬编码。

例如，这将不起作用：

```
template<float a_in, float b_in>
struct coeff
{
    static const float a = a_in;
    static const float b = b_in;
};

linear<coeff<2.0, 3.0>>(4.0); 
```

但这将：

```
struct coeff
{
    static const float a = 2.0;
    static const float b = 3.0;
};

linear<coeff>(4.0); 
```

# javascript - 元素过多的 HTML 内存使用情况

> ID：12240741
> 
> 赞同：0
> 
> 时间：2012-09-03T00:10:32.483
> 
> 标签：javascript, memory

当您使用[`Node.removeChild()`](https://developer.mozilla.org/en-US/docs/DOM/Node.removeChild)它时，将删除的节点返回给您。然后，如果需要，您可以再次将其附加到您的 DOM 上。因此，从逻辑上讲，它保留在内存中以使其成为可能。您可以在[http://jsfiddle.net/6QtjD/](http://jsfiddle.net/6QtjD/)上查看。

**我的疑问是**：如果我删除了太多节点，将删除的节点设置为本地 var，它会一直保留在内存中，直到页面更改或范围结束？

例如：如果我创建 1000 个节点并删除所有节点，每 0.1 秒。在 10 秒内，我的页面将使用 100.000 个节点的内存空间吗？

```
function create1000() {
    var div, i;

    for(i=0; i<1000; i++) {
        div = document.createElement("div");
        div.innerText = i;
        document.body.appendChild(div);
        document.body.removeChild(div); 
    }
}

for(var i=0; i<10000; i+=100)
    setTimeout(create1000, i); 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T01:03:51.893

没有理由它应该，因为你没有抓住它，所以它应该是可收藏的。

多年来，不同浏览器的 js 实现中肯定存在各种泄漏，但除非我看到明确的证据，否则我不会担心这种情况（并且获得明确的证据，我会自己尝试）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T01:11:32.497

当您甚至没有捕获 document.body.removeChild() 的返回值时，您可以 99.9% 确定 javascript 实现将丢弃它并且不会将其保存在内存中，即使无法保证无法访问它。0.1% 的怀疑是因为这是浏览器 javascript 引擎的内部细节，你不能确定地球上不存在在这种情况下泄漏内存的浏览器。

# ios - 检测不存在 URL 的最佳方法

> ID：12240742
> 
> 赞同：0
> 
> 时间：2012-09-03T00:10:51.117
> 
> 标签：ios, dns

我想要一些关于如何在发出 NSURLConnection 调用之前检测“坏” URL 的建议。坏，我的意思是一个不存在的主机（例如，www.no_such_host.com）。我需要首先解析 URL 以获取主机（欢迎提出建议！），然后想查看主机是否实际已注册。

是否有使用 iOS 库中可用的 DNS 解析器查找的简单方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T00:28:00.803

如果我是你，我会选择连接，然后在`NSURLConnectionDelegate`'s`– connection:didFailWithError:`方法中捕获错误。`NSURLConnection`仍会去解析您输入的 URL。`NSURLConnection`可以在[Foundation Constants Reference](http://developer.apple.com/library/ios/#documentation/cocoa/reference/foundation/Miscellaneous/Foundation_Constants/Reference/reference.html)中找到将引发的错误（查找`NSURLErrorDomain`）。如果我没记错的话，将抛出的错误是`NSURLErrorCannotFindHost`.

# grails - 带有自定义 id 字段的 Grails 2 GORM 在显示操作中抱怨“为类提供了错误类型的 id”

> ID：12240743
> 
> 赞同：0
> 
> 时间：2012-09-03T00:11:02.870
> 
> 标签：grails, grails-orm, grails-2.0

我正在使用 Grails 2 在带有自定义 id 字段的旧数据库上提供接口。

我有一个域类，如下所示：

```
class StorageFile {

static mapping = {
  table 'storage_file'
  // version is set to false, because this column isn't normally present in legacy databases
  version false

  id generator:'identity', name:'fileId', column:'file_id'
  objectIdStorageObject column:'object_id'
}

Integer fileId
StorageObject objectIdStorageObject

static constraints = {
  fileId(max: 2147483647)
  objectIdStorageObject()
}

String toString() {
  return "${fileId}" 
} 
```

我用脚手架生成了控制器和视图。由于以下项目，生成的视图中的链接不起作用：

`<td><g:link action="show" id="${storageFileInstance.id}">${fieldValue(bean: storageFileInstance, field: "fileId")}</g:link></td>`

`id=${storageFileInstance.id}`虽然我可以通过用替换来解决这个问题`id=${storageFileInstance.fileId}`。

然后出现了另一个问题，即使我只是手动转到 /TestTmm/StorageFile/show/362 之类的 url，也很明显。Grails 会产生如下错误：

```
Error 500: Internal Server Error
URI /TestTmm/storageFile/show/362
Class org.hibernate.TypeMismatchException
Message Provided id of the wrong type for class tmmweb.StorageFile. 
  Expected: class java.lang.Integer, got class java.lang.Long` 
```

提供给控制器的 params.id 本身显示以下操作：

```
def show() {
  def storageFileInstance = StorageFile.get(params.id) 
```

是一个字符串，我可以用它来检查`println "${params.id.getClass()}`，但不知何故，这在 Hibernate 中以 Long 形式结束，而不是 Integer。很不清楚为什么？

id 字段名为“id”的类似类没有这个问题。

```
class Role {

  static mapping = {
    table 'role'
    version false

    usersList column:'rid',joinTable:'users_roles'
    id generator:'identity', column:'rid'
  }

  Integer id
  String name

  static hasMany = [ usersList : User ]
  static belongsTo = [User]

  static constraints = {
    id(max: 2147483647)
    name(size: 1..64, blank: false)
    usersList()
  }

  String toString() {
    return "${name}" 
  }

} 
```

关于如何解决正在发生的休眠映射问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T06:07:20.890

我认为您不应该将 id 的名称定义为“id”以外的任何内容。如果你真的想用另一个名字访问它，你可以为 id 属性添加一个别名。

```
class StorageFile {
static mapping = {
  table 'storage_file'
  // version is set to false, because this column isn't normally present in legacy databases
  version false

  id generator:'identity', column:'file_id'
  objectIdStorageObject column:'object_id'
}

Integer id
StorageObject objectIdStorageObject

// if you want to add an alias for "id"
static transients = ['fileId']

public Integer getFileId() { id } 
```

# c# - 带有对象的组合框 selectedItem... 似乎不起作用

> ID：12240747
> 
> 赞同：0
> 
> 时间：2012-09-03T00:12:59.610
> 
> 标签：c#, winforms, combobox

我已经使用此代码大约 3 个小时，但我无法使其工作。我用对象列表 (clsMarcas) 填充 ComboBox，当我使用 SelectedItem 属性并为其分配相同类型的对象以使其显示 DisplayMember 时，什么也没有发生。你能指导我吗？

```
public class clsMarcas
{
    public int IdMarca {get; set;}
    public string NombreMarca {get; set;}
    public clsMarcas()
    {

    }
    public clsMarcas(string strMarca)
    {
        this.NombreMarca = strMarca;
    }

}

public class clsAuto
{
    public string Dominio {get; set;}
    public clsMarcas Marca {get; set;}        

    public clsAuto()
    {

    }

    public clsAuto(string Dominio, clsMarcas Marca)
    {
        this.Dominio = Dominio;
        this.Marca = Marca;
    }
}

public partial class frmAutosAE
{
    public frmAutosAE()
    {
        InitializeComponent();
    }
    private clsAuto oAuto;
    private clsMarcas defaultMarca;

    protected override void OnLoad(System.EventArgs e)
    {
        base.OnLoad(e);
        CargarMarcas();

        if (oAuto != null)
        {
            this.txtDominio.Text = oAuto.Dominio;
            SeleccionarMarca(oAuto.Marca);

        }
    }

    private void SeleccionarMarca(clsMarcas Marca)
    {
        cboMarcas.SelectedItem = Marca;

    }
    public void SetAuto(clsAuto oAuto)
    {
        this.oAuto = oAuto;
    }

    public clsAuto GetAuto()
    {
        return oAuto;
    }

    private void CargarMarcas()
    {
        List<clsMarcas> ListaMarcas = GestorDeRepositorio.GetInstancia().Repositorio.GetMarcas();
        this.cboMarcas.DisplayMember = "NombreMarca";
        defaultMarca = new clsMarcas { NombreMarca = "<Seleccione una marca>" };
        cboMarcas.Items.Add(defaultMarca);
        cboMarcas.SelectedIndex = 0;

        foreach (clsMarcas elemento in ListaMarcas)
        {
            this.cboMarcas.Items.Add(elemento);
        }
    }

    public void btnGuardar_Click(System.Object sender, System.EventArgs e)
    {
        if (validarDatos())
        {
            if (oAuto == null)
            {
                oAuto = new clsAuto();
            }

            oAuto.Dominio = this.txtDominio.Text;
            oAuto.Marca=GetMarcaSeleccionada();

            this.DialogResult = System.Windows.Forms.DialogResult.OK;
        }
    }

    private clsMarcas GetMarcaSeleccionada()
    {
        clsMarcas marca=(clsMarcas)cboMarcas.SelectedItem;
        if (marca==defaultMarca)
        {
            return null;
        }
        return marca;
    }

    public void btnCancelar_Click(System.Object sender, System.EventArgs e)
    {
        this.DialogResult = System.Windows.Forms.DialogResult.Cancel;
    }

    public List<clsMarcas> GetMarcas()
    {
        Marcas.Clear();
        try
        {

            using (OleDbConnection cnn = new OleDbConnection(ConnectionString.ToString()))
            {
                cnn.Open();
                OleDbTransaction tran = cnn.BeginTransaction();
                string strSQL = "SELECT * FROM Marcas";
                OleDbCommand comando = new OleDbCommand(strSQL, cnn, tran);

                using (OleDbDataReader oReader = comando.ExecuteReader())
                {
                    while (oReader.Read())
                    {
                        clsMarcas oMarca = new clsMarcas();
                        oMarca.IdMarca = oReader.GetInt32(0);
                        oMarca.NombreMarca = oReader.GetString(1);
                        Marcas.Add(oMarca);
                    }

                }

                tran.Commit();

            }

        }
        catch (Exception ex)
        {

            throw (ex);
        }
        return Marcas;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T04:36:03.020

在 Load 事件和之后设置 SelectedItem。不要在表单的构造函数中设置 SelectedItem

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T01:20:59.323

# 首先，清理你的代码

不要覆盖 OnLoad，而是添加一个[事件处理程序](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.load.aspx)。

```
protected override void OnLoad(System.EventArgs e)
{
    // your code
} 
```

应改为

```
public frmAutosAE()
{
    InitializeComponent();
    Load += FormLoaded;
}

public void FormLoaded(object sender, EventArgs e)
{
    // your code
} 
```

使用[属性](http://msdn.microsoft.com/en-us/library/x9fsa0sw.aspx)而不是 setter/getter 方法：

```
public void SetAuto(clsAuto oAuto)
{
    this.oAuto = oAuto;
}

public clsAuto GetAuto()
{
    return oAuto;
} 
```

应该

```
public clsAuto Auto { get; set; } 
```

使用`using`指令而不是完全限定名称：

```
this.DialogResult = System.Windows.Forms.DialogResult.Cancel; 
```

应该

```
DialogResult = DialogResult.Cancel; 
// add using System.Windows.Forms to the top of the file 
```

最后，请学习 C# 命名约定并使用它们。类以大写字母开头，局部变量不是。

# 然后解决你的问题

```
protected override void OnLoad(System.EventArgs e)
{
    base.OnLoad(e);
    CargarMarcas();

    if (oAuto != null)
    {
        this.txtDominio.Text = oAuto.Dominio;
        SeleccionarMarca(oAuto.Marca);

    }
} 
```

这是您唯一可以打电话的地方`SeleccionarMarca`。在这里，`oAuto`将*始终*为空，因此*永远**不会**调用*选择代码。初始化`oAuto`解决问题。

但是，正如 Xavier Poinas 在他的回答中指出的那样，您很可能还需要`Equals`在 clsMarcas 中覆盖，例如：

```
public override bool Equals(object obj)
{
    var marcas = obj as clsMarcas;
    if (marcas != null)
    {
        return IdMarca == marcas.IdMarca;
    }
    return false;
} 
```

该解决方案已在我的机器上进行了测试，并且可以正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T00:34:34.390

我尚未测试完整的代码，但这可能不起作用，因为当您将对象分配给 DisplayMember 时，它可能与您使用列表加载的对象（在内存中）不同。（除非您的存储库重用对象实例，这不太可能）。

因此，当组合框在列表中查找您正在分配的对象时，它不会找到它。

尝试覆盖 clsMarcas 的 Equals 方法以提供基于 ID 的相等性（例如）。

否则，尝试按索引选择，或者自己在列表中定位对象（根据 ID），然后将 DisplayMember 分配给列表中对象的实例。

# java - 是什么导致我的 Java `.matches()` 正则表达式返回 False？

> ID：12240749
> 
> 赞同：1
> 
> 时间：2012-09-03T00:14:54.333
> 
> 标签：java, regex

我试图`{`在字符串中找到该字符的出现。

给定字符串`String a = " {";`，为什么`a.matches("\\{")`返回 False？

我正在尝试遵循此处的指南：[http](http://www.zytrax.com/tech/web/regex.htm) ://www.zytrax.com/tech/web/regex.htm 。看起来简单匹配部分应该可以满足我的需要。但它的行为似乎并不像预期的那样。我似乎无法检测到`tab`或`{`字符。

我已经尝试过`.matches("\\s*\\{")`尝试解释卷曲之前的标签，但它仍然失败；甚至试图只匹配制表符，它是字符串中的第一个字符，用表达式报告 false `.matches("\\s")`。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T04:13:12.300

试试这个方法............

```
String s = "{1,23,abc{{ { {abc";

Pattern pat = Pattern.compile("[^(a-zA-Z0-9)\\s]*?\\{[^(a-zA-Z0-9)\\s]*?");

Matcher mat = pat.matcher(s);

String datu = new String();

    while(mat.find()){

        System.out.println(mat.group());
    } 
```

# jquery-ui - 如何隐藏空标签

> ID：12240750
> 
> 赞同：1
> 
> 时间：2012-09-03T00:15:12.887
> 
> 标签：jquery-ui, jquery-ui-tabs

我正在使用 jquery_ui 选项卡，我的选项卡看起来像这样：

```
<div id="mytabs">
  <ul>
    <li class="tab-one"><a href="#onepane">apples</a></li>
    <li class="tab-two"><a href="#twopane">berries</a></li>
    <li class="tab-three"><a href="#threepane">citrus</a></li>
  </ul>
  <div id="onepane">green apples, red apples</div>
  <div id="twopane">blueberries, raspberries </div>
  <div id="threepane"></div>
</div> 
```

我的问题：

随着标签内容的变化，我想动态隐藏任何空标签。在上面的示例中，我想隐藏第三个选项卡“柑橘”，因为它对应的选项卡窗格不包含任何内容。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T00:33:07.643

您必须首先选择`Tabs`属于的`mytabs`然后浏览所有面板，选择那些为空的并禁用它们。

重复 - [jQuery UI 选项卡 - 如果相应的内容面板为空，如何删除选项卡列表项？](https://stackoverflow.com/questions/5383755/jquery-ui-tabs-how-can-i-remove-tab-list-item-if-corresponding-content-panel-i)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T20:13:32.523

[Nate 建议的这种](https://stackoverflow.com/questions/5383755/jquery-ui-tabs-how-can-i-remove-tab-list-item-if-corresponding-content-panel-i)方法并不能完全满足我的需求，我最终实施了以下解决方案。当用户执行更改某些选项卡内容的操作时，将触发以下代码。代码检查任何选项卡现在是否为空，如果是，则隐藏空选项卡。此外，它还会检查所选选项卡现在是否隐藏，如果是，则将所选选项卡更改为第一个可见选项卡。

```
var mytabs = $('div#mytabs');
var selected = mytabs.tabs('option', 'selected'); // index of selected tab
mytabs.children('ul').children('li').children('a').each(function(index, elem) {
    if (mytabs.children($(elem).attr('href')).html().trim() === ''){
        $(elem).parent().hide(); // hide the 'li' tab-element
    } else {
        $(elem).parent().show(); // show the 'li' tab-element
    }
}); 
// if selected tab is now hidden, select the first visible tab
if (mytabs.children('ul').children('li').eq(selected).is(':hidden')){
    mytabs.children('ul').children('li').each(function(index, elem) {
        if ($(elem).is(':visible')){
            mytabs.tabs('select', index); // select this tab
            return false; // break
        }
    }); 
} 
```

# node.js - Node.js DNS 响应延迟

> ID：12240752
> 
> 赞同：3
> 
> 时间：2012-09-03T00:15:42.013
> 
> 标签：node.js, asynchronous, dns, callback

我只是想连接一个包含作为 DNS 解析结果的域的数组。

这是我的代码：

```
 var ipList = [];
        for(var j=0; j < addressList.length; j++) {
            dns.resolve(addressList[j], function(error, ipRange) {
                if(error !== null) {
                    console.log('The DNS request failed.');
                }
                console.log('--1--');
                console.log(ipRange);
                console.log('--2--');
                ipList.concat(ipRange);
            });
        }

        console.log(ipList); 
```

我得到的结果是这样的：

```
[]
--1--
[ '173.194.35.144',
  '173.194.35.145',
  '173.194.35.146',
  '173.194.35.147',
  '173.194.35.148' ]
--2-- 
```

看起来 DNS 解析响应在 之后到达`concat()`，就像它被延迟了一样。这意味着 ipList 是一个空数组。

谁可以帮我这个事 ？提前致谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T00:18:26.910

resolve 是异步的，因此在您进行最终打印时并未完成。使用同步 DNS（无法立即为 node.js 找到此内容），或正确安排回调。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T00:54:52.040

您可以执行类似的操作，跟踪仍然未完成的 DNS 查询的数量，以便您可以判断完整集何时可用：

```
var ipList = [], count = addressList.length;
for(var j=0; j < addressList.length; j++) {
    dns.resolve(addressList[j], function(error, ipRange) {
        if(error !== null) {
            console.log('The DNS request failed.');
        } else {
            ipList.push(ipRange);
        }
        if (--count === 0) {
            // All DNS queries are complete.
            console.log(ipList);
        }
    });
} 
```

# cakephp - 我可以自定义 CakePHP 配置文件夹的位置吗？

> ID：12240763
> 
> 赞同：1
> 
> 时间：2012-09-03T00:19:24.407
> 
> 标签：cakephp, cakephp-2.0, bootstrapping

我希望在单个服务器上部署应用程序的多个实例，并且我希望每个实例都有自定义的数据库配置文件。

关于如何通过某种 Configure:: 变量或通过 webroot/index.php 或引导文件更改 CakePHP 配置文件夹的路径的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T02:38:48.683

从 cakephp 2.0 开始，您可以为控制器、配置等提供后备路径

因此您可以先给出本地公共目录的路径，然后再给出应用程序的配置目录路径。

[http://book.cakephp.org/2.0/en/core-utility-libraries/app.html#App::build](http://book.cakephp.org/2.0/en/core-utility-libraries/app.html#App::build)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T02:08:35.290

您可以在同一个 Cake 核心上部署多个应用程序。这在手册的部署部分中有介绍。有关更多信息，请参阅[使用相同内核](http://book.cakephp.org/2.0/en/deployment.html)的多个 CakePHP 应用程序。

# ios - 我如何从我的应用程序中发布消息 Facebook 墙

> ID：12240765
> 
> 赞同：-2
> 
> 时间：2012-09-03T00:19:40.470
> 
> 标签：ios, xcode, facebook

从头到尾有没有详细解释我如何将 facebook sdk 集成到我的应用程序中。我只想用我的应用程序将文本正文发送到 facebook 墙上。我使用故事板，我的应用程序具有三个视图。我将使用我的第三视图内容进行发送。请帮助我，我很困惑，有很多解释，但每个解释都不同。谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T00:25:12.393

我使用 Facebook SDK 3.0 将我的应用程序与 Facebook 集成。

您可以从[https://developers.facebook.com/ios/](https://developers.facebook.com/ios/)获取 SDK 。SDK 已经包含了几个示例。您可以构建它们以查看它们是如何工作的。

# android - RAW 文件夹中适用于 Android 的 TTS

> ID：12240766
> 
> 赞同：0
> 
> 时间：2012-09-03T00:19:52.447
> 
> 标签：android, text-to-speech

是否可以在我的 android 应用程序（原始文件夹）上直接安装 TTS（英语），而不是依赖于将它们安装在默认系统位置（平板电脑）上然后使用它们，或者它会自动安装在平板电脑和手机中吗？无需担心再次安装它们以使文本到语音正常工作吗？

让我知道

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T03:21:30.917

A TTS engine is a separate app and you cannot silently install it from your own app. You can only check if it is there and prompt the user to install it if it is not available.

# objective-c - Objective-C 中的 for loop/if 语句（简单）

> ID：12240773
> 
> 赞同：0
> 
> 时间：2012-09-03T00:21:29.573
> 
> 标签：objective-c, loops, if-statement, for-loop

以下程序确定主要变量。对于大于 1 且小于 p 的所有 d 值返回余数 (p%d) 的值将 isPrime 的值设置为“1”。

```
- (int)someMethod
{
    @autoreleasepool {

        int isPrime;
        for (int p = 2; p <= 50; ++p) {
            isPrime = 1;

            for (int d = 2; d < p; ++d) {

                if ( p % d == 0)
                    isPrime = 0;

                if ( isPrime != 0)
                    NSLog (@"%i ", p);
            }
        }
    }

    return 0;
} 
```

我的问题是，为什么第一个“for”语句在递增“1”后立即进行，而在第二个“for”语句中，循环继续进行，直到 d 的值不再小于 p，然后再进入最后一个“if”语句和 NSLog。

如果这个问题不清楚，例如，如果 p 的值为 14，则程序执行如下：

1.  p 将增加 1 变为 15
2.  变量 isPrime 将被设置为 1
3.  d 的值将设置为 2
4.  p%d 将被计算，
5.  结果将不等于 0，因此将跳过 for 语句
6.  那么由于某种我不明白的原因，d 的值将增加到 3，并且循环将继续直到 d 等于 15，而不是简单地转到 if 语句和 NSLog，它将显示“15 ”。为什么第二个“for”循环继续在“if”语句中循环，增加 d，而第一个循环增加一次 p 然后继续？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T03:01:42.330

他理解*for*循环。其他答案似乎无法理解这个问题。这个循环根本不能正确确定素数。例如，当它们不是素数时，它会打印出 15 和 49 作为素数。因为它在内部循环中打印，所以它也会多次打印素数。它应该打印出 15，你的逻辑是合理的。我不知道为什么它不适合你，但它适合我。正确的实现应该是：

```
- (int)someMethod {
    int isPrime;
    for (int p = 2; p <= 50; ++p) {
        isPrime = 1;
        for (int d = 2; d < p; ++d) {
            if ( p % d == 0)
                isPrime = 0;
        }
        if (isPrime)
            NSLog (@"%i ", p);
    }
    return 0;
} 
```

我会解释为什么它不起作用。

要确定一个数是否为素数，该程序应查看是否有任何数均分`p`。一旦找到一个，这个数字就不再是素数，它应该设置`isPrime`为`0`。一旦它检查了每个小于 的数字`p`，并因此确定`isPrime`，它应该检查`isPrime`它是否应该打印出这个数字。但是，它`isPrime`每次检查一个数字是否均分到`p`. 由于`isPrime`在开始时对于 的每个值都设置为 1，因此`p`打印出任何不能被 2 整除的数字。它检查 2 是否均分，它没有，它立即检查`isPrime`这是 1，并立即将其打印出来，就好像它是素数一样；但是，如果 AFTER 2 之后的数字均分为该数字怎么办？这就是为什么 15 和 49 当它们是合数时被打印为素数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T00:48:20.067

我不明白你不清楚的地方。

**问题：找出如果`p`是素数**。

`p`是素数，如果它没有任何因素`d <= p`，`p%d == 0`除了`1`和`p`本身。内部 for 必须遍历所有小于 的数字`p`，以确保其中没有一个是 的因数`p`。

请注意，这个实现是微不足道的，而且效率低下，它做了素数的隐含定义。

唯一可能让您感到困惑的是，当找到一个因素时，内部循环不会中断，例如。

```
if ( p % d == 0)
{
  isPrime = 0;
  NSLog("number is not prime!);
  break;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T00:53:21.000

“我的问题是，为什么第一个“for”语句在递增“1”后立即进行，而在第二个“for”语句中，循环继续进行，直到 d 的值不再小于 p，然后再继续最终的“if”语句和 NSLog。”

您似乎对 for 循环的工作原理有点困惑。

```
// Outer loop will run 1 time
for (int i = 0; i < 1; i++) {
    NSLog(@"Outer loop = %d", i);

    // Innter loop will run 10 times
    for (int j = 0; j < 10; j++) {
        NSLog(@"Inner loop = %d", j);
    }
} 
```

上面的循环打印出以下输出：

```
Outer loop = 0
Inner loop = 0
Inner loop = 1
Inner loop = 2
Inner loop = 3
Inner loop = 4
Inner loop = 5
Inner loop = 6
Inner loop = 7
Inner loop = 8
Inner loop = 9 
```

编辑：

```
- (int)isPrime
{
    @autoreleasepool {

        // Outer loop will run once to check if 15 is prime
        for (int p = 15; p <= 15; ++p) {

            // You set isPrime to 1
            int isPrime = 1;

            // Inner loop will start at 2 and run until 14, there is no
            // need to check if 15 % 1 or 15 % 15 because a prime number is
            // divisible by itself or 1
            for (int d = 2; d < p; ++d) {

                NSLog(@"%d mod %d", p, d);

                // The first run through of the inner loop, you check if
                // 15 % 2, this is not true, so you skip to the next loop.
                if (p % d == 0) {
                    isPrime = 0;
                    //break;  // This is optional because at this point, you know p is not prime
                }

                // Remember you set isPrime to 1, so the loop checks if isPrime != 0
                // This statement is true, so you print p which at this point is 15.
                if (isPrime != 0) {
                    NSLog (@"%i ", p);
                }

                // On the next run through of the inner loop, 15 % 3 is equal to
                // 0, so you set isPrime to 0, and for the rest of the inner loop
                // isPrime is equal to 0, it can not change, this is why p is never
                // printed out again
            }
        }
    }

    return 0;
} 
```

我在内循环中添加了一条日志语句。继续运行我的代码，这样你就可以看到发生了什么。我会这么说，你的代码看起来不错。如果 isPrime 等于 0，您知道 p 是否为素数，因此添加一个 break 语句将是一个好主意。检查代码以查看放置它的位置。

# javascript - 通过 javascript/jquery 从 html 表中获取值并进行计算

> ID：12240779
> 
> 赞同：0
> 
> 时间：2012-09-03T00:23:24.760
> 
> 标签：javascript, jquery, html

问题：我有一个包含 4 列（名称、价格、数量、价值）的 html 表。数量字段有一个输入标签。基本上有人在数量字段中写了一个数字，然后点击一个按钮，脚本应该将每行中的价格和数量单元格相乘并将其写入相应的值单元格中。然后它应该最终添加所有值，然后将其写在表格之后。

看起来很简单，但我无法从 javascript / jquery 文档中弄清楚。

这是我的html代码：

```
<form>
<table border="0" cellspacing="0" cellpadding="2" width="400" id="mineraltable">
<tbody>
<tr>
<td valign="top" width="154">Ore</td>
<td valign="top" width="53">Price Per Unit</td>
<td valign="top" width="93">Quantity</td>
<td valign="top" width="100">Value</td></tr>
<tr>
<td valign="top" width="154"><strong>Arkonor</strong></td>
<td id="11" valign="top" width="53">1</td>
<td valign="top" width="93"><input name="12"></td>
<td id="13" valign="top" width="100">&nbsp;</td></tr>
//Lots more of these rows... all Price rows have an ID with a 1 at the end, i.e. 21, 31, 41,. ...., 
//all the text inputs have a 2 at the end of the name, and all Values have a 3 at the end.
</tbody></table></form>
<p id="result">Your value is: </p>
<button type="button">Calculate</button> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T01:02:29.053

我在 jsfildde [here](http://jsfiddle.net/BLYBx/)上为您完成了一个基本的解决方案。

注意我清理了你的html。

而且您将不得不做额外的工作来检查无效输入等，但您应该明白这一点。

html:

```
 <table border="0" cellspacing="0" cellpadding="2" width="400" id="mineraltable">
    <thead>

<tr>
<td valign="top" width="154">Ore</td>
<td valign="top" width="53">Price Per Unit</td>
<td valign="top" width="93">Quantity</td>
<td valign="top" width="100">Value</td></tr>
<tr>
        </thead>
<tbody>
<td valign="top" width="154"><strong>Arkonor</strong></td>
<td class="price" id="11" valign="top" width="53">1</td>
<td class="quantity" valign="top" width="93"><input name="12" value="1"></td>
<td class="value" id="13" valign="top" width="100">&nbsp;</td>
    </tr> 
</tbody>
    </table>
<p id="result">Your value is: </p>
<button type="button">Calculate</button>​ 
```

Javascript：

```
 $('button').click(function() {
    var total = 0;

    $('#mineraltable tbody tr').each(function(index) { 

        var price = parseInt($(this).find('.price').text()); 
        var quantity = parseInt($(this).find('.quantity input').val()); 
        var value = $(this).find('.value');
        var subTotal = price * quantity;

        value.text(subTotal);
        total = total + subTotal;

    });

    $('#result').text('Your value is: '+total);
});​ 
```

# javascript - 用于显示 onclick 事件计数的可调跨度标签

> ID：12240783
> 
> 赞同：0
> 
> 时间：2012-09-03T00:23:46.290
> 
> 标签：javascript, html, button, onclick

我目前有一个跨度标签，它显示按钮的点击次数。现在，如果数字超过三位数，它将不适合 span 标签。我可以调整 span 标签还是调整其宽度，以便它始终包含 onclick 计数？

我可以更改宽度以容纳更多数字，但我希望它可以调整，因为我无法预测实际会发生多少 onclick 事件。

```
var counts = {
  'Apples': 0,
  'Oranges': 0,
  'total': 0
};

   function countFruit(type) {
   document.getElementById('fruitCount').innerHTML = ++counts['total'];
   document.getElementById(type + 'Count').innerHTML = ++counts[type];
}

#OrangesCount{
z-index: 20;
position:absolute;
top:70px;
left:45%;
background-color:black;
width:80px;
border:2px solid green;
font-family: 'BPdotsUnicaseSquareBold';
font-size:25px;
color:yellow;
padding-right:4px;
padding-left:4px;
 }

#ApplesCount{
z-index: 20;
position:absolute;
color:yellow;
top:70px;
right:45%;
background-color:black;
width:80px;
border:2px solid green;
font-family: 'BPdotsUnicaseSquareBold';
font-size:25px;
   }

   <a id="buttonright" href="#" onclick="countFruit('Apples'); return false;">
   <a id="buttonleft" href="#" onclick="countFruit('Oranges'); return false;">

   <span id="ApplesCount"></span>
   <span id="OrangesCount"></span> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T00:48:04.320

如果你需要让一个元素自动调整它的宽度，不要让它的宽度固定。您可以指定一个最小宽度，例如下面的示例 CSS。

```
#OrangesCount{
z-index: 20;
position:absolute;
top:70px;
left:45%;
background-color:black;

/*removed
width:80px;
*/
min-width:80px;

border:2px solid #001855;
font-family: 'BPdotsUnicaseSquareBold';
font-size:25px;
color:yellow;
padding-right:4px;
padding-left:4px;
}

#ApplesCount{
z-index: 20;
position:absolute;
color:yellow;
top:70px;
right:45%;
background-color:black;

/*removed
width:80px;
*/
min-width:80px;

border:2px solid #550010;
font-family: 'BPdotsUnicaseSquareBold';
font-size:25px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T00:37:44.713

您只需`width`要从两个 css 中删除：

```
#ApplesCount{
    z-index: 20;
    position:absolute;
    color:yellow;
    top:70px;
    right:45%;
    background-color:black;
    border:2px solid #550010;
    font-family: 'BPdotsUnicaseSquareBold';
    font-size:25px;
} 
```

这是[JSFiddle](http://jsfiddle.net/fPdA7/)

# jquery - 在 jquery 中验证内容是否大于 0 后更改 tr 的样式

> ID：12240784
> 
> 赞同：1
> 
> 时间：2012-09-03T00:23:57.683
> 
> 标签：jquery, html

我有这个工作正常的代码：

```
<script type="text/javascript">
    var $j = jQuery.noConflict();
    $j(document).ready(function()
    {
            $j('.Grid tr.myid').each(function()
            {
                    var test = $j(this).html().indexOf("0");
                     if (test !=-1) {
                            $j(this).addClass("RowRed");
                     }
            });
    });     

</script> 
```

html中的示例：

```
<table>
    <tr class='myid'><td>value1</td><td>0</td></tr>
    <tr class='myid'><td>value2</td><td>150</td></tr>
</table> 
```

但我需要检查列的值`tr`是否<0，然后更改它的背景颜色。使用此代码我不能，因为它正在寻找一个静态值，例如 JMG。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T00:30:45.980

似乎您想获取第二个`td`元素的文本内容，而不是`html`可以使用`text`返回元素文本内容的方法。

```
$j('.Grid tr.myid').each(function() {
      if ($j('td:eq(1)', this).text() < 0) {
          $j(this).addClass('background')      
      }
}); 
```

*   [文本（）](http://api.jquery.com/text/)
*   [当量（）](http://api.jquery.com/eq/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T00:34:12.240

尝试使用选择器`:last`并将文本值解析（`parseInt`）为 int：

```
 var $j = jQuery.noConflict();
    $j(document).ready(function()
    {
            $j('.Grid tr.myid').each(function()
            {
                    var 
                       value = $j(this).find('td:last').text(),
                       number = parseInt(value);
                    if (!isNaN(number) && number < 0) {
                        $(this).addClass('background')    
                    }
            });
    }); 
```

# cocoa - 改变 NSbox Objective C 的可见性

> ID：12240788
> 
> 赞同：0
> 
> 时间：2012-09-03T00:25:19.867
> 
> 标签：cocoa, nsbox

如何`NSBox`以`isHidden:YES|NO`编程方式将 a 更改为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T00:29:29.013

NSView 的任何子类都会响应该[`setHidden:`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSView_Class/Reference/NSView.html#//apple_ref/occ/cl/NSView)方法，因此要更改它只需调用

```
[box setHidden:YES]; 
```

# linux - jboss linux访问windows共享

> ID：12240789
> 
> 赞同：0
> 
> 时间：2012-09-03T00:25:38.650
> 
> 标签：linux, jboss, samba

我有一个运行 jboss webservice 的 linux (ubuntu) 服务器。我需要网络服务才能访问 Windows 共享。

我配置了一个 cifs 共享，并且能够从命令行读取/写入 Windows 共享。我遇到的问题是我被迫 sudo 才能访问共享。

我创建了一个与具有相同凭据的 Windows 机器上的用户名匹配的用户。接下来，我修改了 samba 密码配置文件，将 jboss 用户映射到具有正确凭据的 windows (linux) 用户以访问共享。

问题：如果我使用最近创建的帐户（与 windows 登录匹配的帐户）登录我的服务器，我无法访问共享。

任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T21:13:33.933

我发现我创建了一个组并将应该有权访问该共享的用户添加到该组。

# mysql - Rails 3：对 Belong_To 的对象进行排序

> ID：12240791
> 
> 赞同：0
> 
> 时间：2012-09-03T00:26:32.050
> 
> 标签：mysql, ruby-on-rails-3

在我的网站上，每个帖子都有很多评论。用户可以通过多种方式对评论进行排序，虽然我可以使用 sort! 来实现这一点，但我确信有一种方法可以使用 MySQL 查询来做到这一点。不幸的是，当我尝试以下方法时，评论返回未排序：

```
@post.comments.order('created_at DESC') 
```

我也试过：

```
Comment.where("post_id = ?", @post.id).order('created_at DESC') 
```

虽然我得到了相同的未排序结果。我还能如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T00:54:25.707

你可以试试这个，看看它是否有效！..我相信可能有更有效的方法来做到这一点，但无论如何这都会成功

```
@post= @post.comments.sort_by(&:created_at)
@post = @post.reverse 
```

希望这对你有用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T06:04:29.693

使用 mysql`date`或`time`函数可能会有所帮助。我没有尝试以下代码段，但它会有点像这样`date`：

```
Comment.where("post_id = ?", @post.id, :order => 'date(created_at) DESC') 
```

**编辑：**

尝试过`sqlite`，以下对我有用

```
Comment.where("post_id = ?", @post.id, :order => 'time(created_at) DESC') 
```

同样的方法也适用于 mysql。我建议创建一个`scope`赞

```
class Comment < AR::Base
     scope :latest_first, :order => 'time(created_at) DESC'
end 
```

并像使用它一样

```
Comment.where("post_id = ?", @post.id).latest_first #OR
Comment.latest_first.where("post_id = ?", @post.id) 
```

哪个对你来说听起来更好:)

# javascript - 如何创建可以向下滚动的导航

> ID：12240797
> 
> 赞同：0
> 
> 时间：2012-09-03T00:27:22.237
> 
> 标签：javascript, html, css

我想重建这个网站[http://tranquangvinh.com/alexey-brodovitch/](http://tranquangvinh.com/alexey-brodovitch/)作为 HTML 和 CSS 的良好实践。

你能帮我解释一下他是如何创建动画导航按钮的（当用户点击按钮时，按钮会向下滚动）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T00:33:13.927

您需要浏览一下该站点，阅读 JavaScript。他已经加载了 jQuery 库，看起来他正在使用另一个名为“slider.js”的 JS 文件来制作动画。您是否在 Firefox 或 Chrome 中安装了开发人员工具？用它们来查看链接的 JS 文件，你会看到有什么用一点点戳 :)

# django - Heroku 如何处理 Django 设置？

> ID：12240801
> 
> 赞同：1
> 
> 时间：2012-09-03T00:28:41.620
> 
> 标签：django, heroku

[我正在尝试为遵循 Heroku 推荐结构的 Django 应用程序创建目录结构，如本页](http://www.deploydjango.com/django_project_structure/index.html#building-a-perfect-django-settings-module)底部所示。如您所见，他们创建了一个“设置”目录，其中包含各个设置文件（例如 dev.py），这些文件的读取取决于项目部署到的层。

现在我本来希望会有一个与设置目录相同级别的“settings.py”文件，该文件将从设置目录中的设置文件之一导入。但是，他们的图表没有显示任何这样的“settings.py”文件，只是目录。他们如何在没有顶级 settings.py 文件的情况下执行适当的设置文件？

作为一个实验，我创建了一个与设置目录位于同一级别的 settings.py 文件。问题是，当我执行“runserver”时，设置目录中的**init** .py 文件会导致错误：“'Settings' 对象没有 'ROOT_URLCONF'” 我猜会有某种名称冲突，因为如果我更改将设置目录的名称设置为“conf”我没有收到此错误。

Heroku 的人是否会假设用户正在某处设置 DJANGO_SETTINGS_MODULE？如果不是，他们如何读取正确的设置文件？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T03:45:39.797

当 python 被调用导入模块`settings`时，它会查找被调用的文件或被调用并包含在其中`settings.py`的目录（python 模块）。这就是 python 模块系统的工作原理。`settings``__init__.py`

从那里，您可以决定在您的初始化文件中导入哪个设置文件，从内部导入东西，如`prod`或`dev`. 我想这应该在那个页面的某个地方进行解释，但我一目了然。

至于 Heroku，它不假设任何东西，并且使用 django 默认值。所以模块`settings`正在被导入。

另外，我不会反对在你的项目仓库中使用 dev/prod 设置，但是 heroku 为你提供了一种非常好的方法来使用 ENV 变量动态更改配置。[您可以在他们的（非常好的） django 教程](https://devcenter.heroku.com/articles/django)中找到更多信息。

# ruby-on-rails - 为什么 JRuby 给我一个“不兼容的字符编码：ASCII-8BIT 和 UTF-8”错误？

> ID：12240802
> 
> 赞同：2
> 
> 时间：2012-09-03T00:28:56.900
> 
> 标签：ruby-on-rails, encoding, jruby

我有一个 Rails 3.2.8 应用程序。它在 Ruby 1.9.3 和 JRuby 1.6.7.2 下以 1.9 兼容模式运行。在 JRuby 下插入数据库有时会崩溃。

这是我的 en.yml 文件：

```
en:
  moo: "you’re"
  meep: "you"
  bar: "\"Booón\""
  baz: "Booón" 
```

假设我有一个 Message 对象，它有两个属性，发送者和主题。以下是发件人和主题的几种可能组合

```
msg = Message.new(subject: "sblah", sender: I18n.t("bar"))
msg.save

msg = Message.new(subject: "sblah", sender: I18n.t("baz"))
msg.save

msg = Message.new(subject: I18n.t("moo"), sender: I18n.t("baz"))
msg.save

msg = Message.new(subject: I18n.t("moo"), sender: "temp")
msg.save

msg = Message.new(subject: I18n.t("meep"), sender: I18n.t("bar"))
msg.save

# Mystery crash
msg = Message.new(subject: I18n.t("moo"), sender: I18n.t("bar"))
msg.save 
```

在 JRuby 1.6.7.2（兼容 1.9）下运行时，最后一个会导致崩溃。MRI 1.9.3p194*不会发生*崩溃。

似乎需要结合（重音字符和引号）和（卷曲撇号）来触发崩溃。拿走这些东西中的任何一件。没有崩溃。

```
Encoding::CompatibilityError: incompatible character encodings: ASCII-8BIT and UTF-8
    from org/jruby/RubyString.java:2926:in `gsub'
    from /Users/paul/.rbenv/versions/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/activerecord-jdbc-adapter-1.2.2/lib/arjdbc/mysql/adapter.rb:485:in `exec_insert'
    from /Users/paul/.rbenv/versions/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/database_statements.rb:90:in `insert'
    from /Users/paul/.rbenv/versions/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/query_cache.rb:19:in `insert'
    from /Users/paul/.rbenv/versions/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/activerecord-3.2.8/lib/active_record/relation.rb:66:in `insert'
    from /Users/paul/.rbenv/versions/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/activerecord-3.2.8/lib/active_record/persistence.rb:366:in `create'
    from /Users/paul/.rbenv/versions/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/activerecord-3.2.8/lib/active_record/timestamp.rb:57:in `create'
    from /Users/paul/.rbenv/versions/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/activerecord-3.2.8/lib/active_record/callbacks.rb:268:in `create'
    from /Users/paul/.rbenv/versions/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:406:in `_run__142677804__create__486269792__callbacks'
    from org/jruby/RubyBasicObject.java:1698:in `__send__'
    from org/jruby/RubyKernel.java:2097:in `send'
    from /Users/paul/.rbenv/versions/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
    from /Users/paul/.rbenv/versions/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:390:in `_run_create_callbacks'
    from org/jruby/RubyBasicObject.java:1698:in `__send__'
    from org/jruby/RubyKernel.java:2097:in `send'
    from /Users/paul/.rbenv/versions/jruby-1.6.7.2/lib/ruby/gems/1.8/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
... 17 levels... 
```

这是崩溃的代码：

```
480       def exec_insert(sql, name, binds)
481         binds = binds.dup
482 
483         # Pretend to support bind parameters
484         unless binds.empty?
485           sql = sql.gsub('?') { quote(*binds.shift.reverse) }                                       
486         end
487         execute sql, name
488       end 
```

# svg - SVG 路径，这是三次贝塞尔曲线吗？

> ID：12240809
> 
> 赞同：1
> 
> 时间：2012-09-03T00:30:12.750
> 
> 标签：svg

**这是一个两部分的问题：**

1.  下面的第一个代码部分（由 Adob​​e Illustrator 生成）是否表示 SVG 文件中的三次贝塞尔曲线？
2.  如果是这样，在第一个（Adobe Illustrator）示例中，小写 Cs 后面的每个数字代表什么？

    **Adobe Illustrator 示例：**

> `<path style="fill:none;stroke:#00FF00;stroke-width:0.5102;stroke-linecap:round; stroke-linejoin:round;" d="M223.827,404.942 c-6.741,6.32-7.083,16.908-0.762,23.649l0,0c0.184,0.201,0.561,0.577,0.762,0.762" />`

**[以下是w3](http://www.w3.org/TR/SVG/paths.html#PathDataCubicBezierCommands)**示例的一部分**：**

```
<path class="SamplePath" d="M100,200 C100,100 250,100 250,200
                                       S400,300 400,200" /> 
```

在第二个 W3 示例中，我理解“M”后面的数字指的是起始 x、y 坐标，而大写的“C”表示绝对定位。在关于 XY 分组*的 W3 示例中*，这种模式似乎相当明显。但是，我不知道如何处理 Adob​​e Illustrator 示例，其中的组由负号和没有逗号分隔，例如：`16.908-0.762`. **Adobe Illustrator 示例中小写 C 之后的编号序列是如何解析和分组的，这些数字在第一个（Adobe Illustrator）示例中代表什么？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T05:55:57.293

1 的答案是肯定的。

至于2...

在路径语法中，空格和逗号是可选的。16.908-0.762 一次解析一个字符，因此解析器必须知道，当它到达 - 符号时，16.908 是一个数字，但 16.908- 不是，因此 - 符号必须是下一个数字的开头，即 -0.762

插图示例中有三对数字。添加可选空格使其更清晰......

c -6.741,6.32 -7.083,16.908 -0.762,23.649

语法在[这里](http://www.w3.org/TR/SVG/paths.html#PathDataBNF)

# javascript - 如何使整个列表项可点击？

> ID：12240814
> 
> 赞同：0
> 
> 时间：2012-09-03T00:31:03.047
> 
> 标签：javascript, html

我有一个包含列表项的列表，这些列表项看起来像表格中的一行（实际上它模仿了 iPhone 上的表格视图），并且希望使列表的每一行都是可选的，所以当用户点击它时我可以改变它的颜色，而且添加一个监听器来执行一些事件。

```
 <ul>
   <li>
    <img id = "image" src="image.jpg" />
    <h1 id = "Title">Title</h1>
        etc.
    </li> 
```

我尝试添加 # 的 href 属性，`<li>`但没有奏效。我也试过这个：

```
 <ul>
       <li>
        <a  href="#" onclick="action();">
        <img id = "image" src="image.jpg" />
        <h1 id = "Title">Title</h1>
            etc.
        </li> 
```

但这会将列表项中的每个单独项目变成一个可点击的链接，我怎样才能将每个列表项变成一个整体可点击的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T01:48:41.333

你也可以试试这个（纯javascript）

```
window.onload=function(){
    var lis=document.getElementById('target_ul').getElementsByTagName('li');
    for(i=0;i<lis.length;i++) { 
        lis[i].onclick=myFunction;
    }
}

function myFunction()
{
    alert('This list item contains "'+this.innerHTML+'"');
} 
```

[**演示**](http://jsfiddle.net/f2nN2/4/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T01:21:32.140

## 纯 JavaScript

第一个答案特别依赖于 jQuery，我建议使用它，因为它大大减少了您必须编写的面向浏览器的 JavaScript 的数量*（对于移动设备，您可以使用 jQuery mobile）*。但是，由于您没有在问题中声明 jQuery，因此这是在纯 JavaScript 中执行此操作的最佳方法*（避免内联事件处理程序）*：

```
<script type="text/javascript">
  /// wrap all our code in our own scope so to keep things local
  (function(){
    /// store any previous handler on the window.onload
    var previousOnload = window.onload;
    /// create our ready function
    var fullyLoaded = function(){
      /// grab the UL element
      var li, ul = document.getElementById('target_ul');
      /// grab the LI elements
      var lis = ul.getElementsByTagName('li'), i = lis.length;
      /// loop each LI and apply a click handler
      while( i-- ){
        if ( !(li = lis[i]) ){ continue };
        /// internet explorer version
        if ( li.attachEvent ) {
          li.attachEvent('onclick', clickEvent);
        }
        /// pretty much everything else
        else if ( li.addEventListener ) {
          li.addEventListener('click', clickEvent);
        }
      }
    }
    /// create our click event listener
    var clickEvent = function( e ){
      /// fallback support for IE events
      if ( !e ){ e = window.Event };
      /// fallback support for IE .srcElement
      alert( 'Clicked! ' + ( e.target ? e.target : e.srcElement ) );
    }
    /// override/set the window.onload with our own listener for window load
    window.onload = function(){
      /// trigger the our onload function
      fullyLoaded();
      /// once we've triggered our code 'onload', fire anyone elses.
      if ( previousOnload ) {
        previousOnload();
      }
    }
  })();
</script>
<ul id="target_ul">
  <li>test</li>
  <li>test2</li>
</ul> 
```

## 内联事件处理程序

显然，更简单的方法是将 LI 元素放置`onclick`在 LI 元素上，但是出于多种原因应避免使用内联事件侦听器：

1.  您应该始终努力使您的设计/标记与您的代码分开 - 这有助于您的工作面向未来，并且意味着可以编辑标记而不必担心破坏脚本。

2.  您只能为每个内联事件侦听器应用一个函数 - 这意味着与可能在相同元素上运行的其他插件或库一起运行您的代码变得更加困难......甚至使用额外的交互功能扩展您的代码。

3.  由于通过内联事件侦听器绑定的 javascript 方法，在许多情况下都可能发生内存泄漏。*（在手机上，内存使用可能是一件需要注意的大事，特别是如果您的页面要加载多次或有许多内联事件侦听器）*。

4.  内联事件侦听器需要访问全局函数，这意味着您的所有事件函数都必须是全局范围的一部分，这会污染全局命名空间*（与其他代码发生命名冲突的可能性更大）*，这也常常导致代码管理起来很尴尬.

## 结论

必须实现上面冗长的纯 JavaScript 的绝对复杂性正是我推荐使用 jQuery mobile 的原因；）尽管它确实消除了所有的乐趣。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T00:35:13.730

你可以用 jQuery 做到这一点：

```
$('ul li').click(function(){
   .......
}) 
```

# java - android httpclient.execute 异常

> ID：12240821
> 
> 赞同：6
> 
> 时间：2012-09-03T00:33:57.180
> 
> 标签：java, android, galaxy, samsung-mobile

当我在模拟器上测试时，它可以工作，但是当我用我的设备（galaxy s3）测试时，它在以下代码期间不断抛出错误：

```
HttpResponse response;
        response = httpclient.execute(httppost); 
```

例外情况：

```
09-03 08:16:49.018: E/AndroidRuntime(24254): java.lang.RuntimeException: Unable to start activity ComponentInfo{sg.dianping/sg.dianping.activity.ItemListActivity}: android.os.NetworkOnMainThreadException
09-03 08:16:49.018: E/AndroidRuntime(24254):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1970)
09-03 08:16:49.018: E/AndroidRuntime(24254):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1995)
09-03 08:16:49.018: E/AndroidRuntime(24254):    at android.app.ActivityThread.access$600(ActivityThread.java:128)
09-03 08:16:49.018: E/AndroidRuntime(24254):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1161)
09-03 08:16:49.018: E/AndroidRuntime(24254):    at android.os.Handler.dispatchMessage(Handler.java:99)
09-03 08:16:49.018: E/AndroidRuntime(24254):    at android.os.Looper.loop(Looper.java:137)
09-03 08:16:49.018: E/AndroidRuntime(24254):    at android.app.ActivityThread.main(ActivityThread.java:4517)
09-03 08:16:49.018: E/AndroidRuntime(24254):    at java.lang.reflect.Method.invokeNative(Native Method)
09-03 08:16:49.018: E/AndroidRuntime(24254):    at java.lang.reflect.Method.invoke(Method.java:511)
09-03 08:16:49.018: E/AndroidRuntime(24254):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:993)
09-03 08:16:49.018: E/AndroidRuntime(24254):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:760)
09-03 08:16:49.018: E/AndroidRuntime(24254):    at dalvik.system.NativeStart.main(Native Method)
09-03 08:16:49.018: E/AndroidRuntime(24254): Caused by: android.os.NetworkOnMainThreadException
09-03 08:16:49.018: E/AndroidRuntime(24254):    at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
09-03 08:16:49.018: E/AndroidRuntime(24254):    at java.net.InetAddress.lookupHostByName(InetAddress.java:391) 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-03T00:42:21.267

`NetworkingOnMainThread`当您在 UI 线程上执行网络活动时，将引发此异常。它有可能阻塞主线程，因为它会等到网络连接完成后再恢复，从而阻塞线程。

您有 2 个选项。

1 - 将您的所有网络移动到不同的线程。最常见和最简单的解决方案是[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html) 但还有其他选项，例如[Handlers](http://developer.android.com/reference/android/os/Handler.html)。这是推荐的选项。

2-您可以更改策略以允许在 UI 线程上联网。

只需添加此代码

```
StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
StrictMode.setThreadPolicy(policy); 
```

不推荐使用此选项，因为它只是绕过异常。抛出异常是有原因的。我会选择第一个选项。有很多关于如何实现的教程`AsyncTask`。

祝你好运

# c# - 通过 pinvoke memcmp 结合多线程比较 byte[]

> ID：12240822
> 
> 赞同：0
> 
> 时间：2012-09-03T00:34:00.467
> 
> 标签：c#, comparison, pinvoke, bytearray, memcmp

我想尝试将使用`memcmp`与多线程结合起来

到目前为止，这个基准测试的代码似乎是我最快的..但我想检查是否可以进一步加快比较过程。

我的想法：

1）通过多线程它。

2）另一个想法，

是否有可能`byte[]` 检查它是否 80% 到 100% 相同（如果可能的话..）给出这个选项会减少计算时间吗？

第一个问题的优先级更高……如果我必须选择……

```
 public static bool ByteArrayCompare(byte[] b1, byte[] b2)
    {
        return b1.Length == b2.Length && memcmp(b1, b2, b1.Length) == 0;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T01:10:40.543

您可能会通过多线程来加速它。只需启动多个 N 线程，每个线程将比较数组的 1/N。然而，这只在多核机器上才有意义。还要记住，产生新线程并收集它们的结果会给您的操作带来固定的时间损失，这实际上可能比仅在单个线程上执行更大。要考虑的另一件事是，您的代码将与最慢的线程一样慢，因此如果您生成许多线程，则必须等到最后一个线程完成。

当您可以检测到其中一个线程发现数据不一样时，您可能会变得更加聪明并考虑更狡猾的方案。然后，该线程可以向主线程发出信号，您可以安全地提前终止其余正在运行的线程。

实际的加速取决于您比较的数据有多大（我假设它非常大，因为您正在考虑这个）。以及这些数据相同或完全不同的频率。如果您的数据经常不同，您将获得相当大的加速。

至于你的第二个想法。是的，您可以提出一个更快的方案，您可以随机抽样两个数组，一旦找到至少一个不同的字节，您可以声明两个数据集不同并提前终止。但是，您应该再次注意如何实现这一点。首先，您应该在块中进行样本比较，而不仅仅是单个字节。查看您的硬件架构缓存/预取行为以确定最佳块大小。此外，如果您对数据有所了解，您应该首先尝试对更有可能不同的区域进行抽样。通过不进行随机抽样，但通过以可预测的模式进行抽样，您可能会获得更好的结果。因此，如果您无法使用随机抽样找到差异，

# ruby-on-rails - 尝试运行服务器时出现 Ruby on Rails postgres 适配器错误

> ID：12240828
> 
> 赞同：0
> 
> 时间：2012-09-03T00:34:36.000
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, gem

我已经安装了我在[如何处理 Ruby on Rails 错误中列出的所有 gem：“请安装 postgresql 适配器：`gem install activerecord-postgresql-adapter'”](https://stackoverflow.com/questions/1664364/how-to-handle-ruby-on-rails-error-please-install-the-postgresql-adapter-gem) ——它们都不起作用。我的 databases.yml 文件中是否有 postgres 或 postgresql 并不重要。

我不知道我做错了什么（我还安装了错误中提到的驱动程序。我不断收到该错误。

```
/var/lib/gems/1.8/gems/bundler-1.1.5/lib/bundler/rubygems_integration.rb:147:in `gem': Please install the postgresql adapter: `gem install activerecord-postgresql-adapter` (pg is not part of the bundle. Add it to Gemfile.) 
```

我正在尝试运行“rails server webrick -p 80 -e production”

```
production:
  adapter: postgresql
  encoding: unicode
  database: imentor
  pool: 5
  username: postgres
  password: 
  host: localhost
  port: 5432 
```

* * *

我的问题是我实际上不知道在哪里编辑 gemfile（（最初查看了错误的 gem 文件）

将“gem 'pg'”添加到 Gemfile 修复它。感谢“亩太短”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T03:13:46.310

在ubuntu上我只是做

```
apt-get install libpgsql-ruby 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T01:40:21.143

我的问题是我实际上并不知道在哪里编辑 gemfile（最初查看了错误的 gem 文件）

将“gem 'pg'”添加到 Gemfile 修复它。感谢“亩太短”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T00:49:02.260

几周前我遇到了这样的问题。我认为您应该首先尝试将此代码添加到 boot.rb 文件中。

```
require 'yaml'
YAML::ENGINE.yamler = 'syck' 
```

您还应该尝试将其添加到 grmfile 并在之后立即运行捆绑安装

```
gem 'pg' 
```

如果它也有帮助，这是我的 database.yml 文件的示例。希望它有效！

```
production:
  adapter: postgresql
  encoding: unicode
  database: dezirus
  username: postgres
  password: 
```

# php - 允许撇号的正则表达式

> ID：12240830
> 
> 赞同：0
> 
> 时间：2012-09-03T00:34:53.463
> 
> 标签：php, regex

我一直在查看有关此主题的所有其他帖子，但我仍然无法让我的正则表达式允许撇号。我认为以下应该有效，但它不断给出错误。它确实允许所有其他字符、数字和字母，只是不允许 ' （我需要它用于像 Mike's 这样的词）

```
/^([-a-zA-Z\/\-\&\\\?\!\,\.\'\"\s0-9@:=_]{1,1000})$/ 
```

验证表单和以下部分需要正则表达式：

```
public $regex = array ('char' => "/^[a-zA-Z.\s]{0,50}$/", 
                       'misc' => "/^([-a-zA-Z\/\-\&\\\?\!\,\.\'\"\s0-9@:=_]{1,1000})$/");

if(preg_match($this->regex[$validation],$this->filteredValue[$fieldName])) { 
    $this->messageArray[$fieldName] = '<span class="cheers"> &nbsp; Thank You</span>';   
} 
```

谁能告诉我哪里出错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T05:52:28.713

`\'`应该工作。我不能说为什么它没有。但是，我可以提供一种解决方法。您可以尝试将 替换为`'`相同字符的十六进制表示。而不是使用`\'`尝试使用`\x1b`.

此外，您应该将`\-`a移到`-`末尾`[]`

```
/^([-a-zA-Z\/\&\\\?\!\,\.\x1b\"\s0-9@:=_-]{1,1000})$/ 
```

而且我不明白`-`开头是什么...

* * *

编辑：在看到你关于你得到的错误的最后评论后，我只能假设你错误地识别了你遇到的问题。对于我所看到的假设您的正则表达式一切都很好，但是您的 SQL 语句存在问题，因为您没有转义数据。

您应该熟悉[`mysql_real_escape_string`](http://php.net/manual/en/function.mysql-real-escape-string.php)并确保在所有查询中都使用它。例如：

```
<?php
// Query
$query = sprintf("SELECT * FROM users WHERE user='%s' AND password='%s'",
            mysql_real_escape_string($user),
            mysql_real_escape_string($password));
mysql_query($query);

?> 
```

# grails - 指定一个控制器到 main.gsp 布局

> ID：12240843
> 
> 赞同：0
> 
> 时间：2012-09-03T00:38:10.573
> 
> 标签：grails

我知道我可以`"/"(controller: "default")`在 UrlMappings.groovy 中使用为根页面指定一个控制器，但是我想让我的主布局页面（在这种情况下是 main.gsp）访问至少一个已定义的控制器。我试过`"/layouts/main.gsp"(controller: "default")`但没有用。我怎样才能实现它？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T06:18:16.410

`main.gsp`是布局而不是页面。布局由控制器呈现的页面使用。您不应该有让控制器呈现布局的设计。它破坏了 Grails 的美丽结构。
如果要访问该布局中的对象，则将对象传递给使用该布局的页面。
告诉我们您的用例，我们可能会为您提供更多帮助。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-03T20:13:25.847

我找到了另一种方法来解决我的问题。现在我可以为每个操作传递来自会话的用户实例。因此，无论何时何地，我的布局标题都会显示用户信息（当然，如果用户已登录）。

我的步骤：

1.  首先，创建一个 grails 过滤器；
2.  从创建的过滤器修改您的“之后”clousure 以获取当前用户并将其传递给每个控制器的操作，它假设是这样的：

    ```
    after = { Map model ->

        def user = null

        if (!session.isNew()) {
            user = session["user"]

            if (user) {
                if (!model)
                    model = [:]

                model["user"] = user
            }
        }

    } 
    ```

希望对您有所帮助，谢谢！

# extjs - Ext JS 4：网格 - itemclick 上的一些操作和单击操作列时的不同操作

> ID：12240846
> 
> 赞同：3
> 
> 时间：2012-09-03T00:40:04.013
> 
> 标签：extjs, extjs4

我有一个网格，我需要可点击的行 - 单击一行时应该打开一个新窗口。但我想添加一个带有删除图标的操作列，它会在单击时删除该行。问题是当点击动作列中的图标时，与该行相关的动作也会被触发并打开新窗口。我需要找到一种方法，如何在单击操作列时触发一个操作，并在单击该行的其余部分时触发另一个操作。请问有什么想法吗？

也许类似于以下伪代码：

```
grid.on('itemclick', function(grid, rowIndex, columnIndex, e) {
    if (action column clicked) { // do something }
    else { // do something else }
}, this); 
```

...但是我如何检测到操作列被点击了？谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-03T10:42:36.347

而不是这个：

```
grid.on('itemclick', function(grid, rowIndex, columnIndex, e) {
    if (action column clicked) { // do something }
    else { // do something else }
}, this); 
```

用这个：

```
grid.getView().on('cellmousedown',function(view, cell, cellIdx, record, row, rowIdx, eOpts){
    //itemclick logic
}); 
```

如果是 actioncolumn，则不会触发此事件。所以你不需要一个`if - else`

[看起来这个事件没有记录，但这里](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.view.Table-method-onCellMouseDown)的文档中有一个私有方法

参考：[ExtJS 4 - Grid - 禁用特定列的行选择](https://stackoverflow.com/questions/9534077/extjs-4-grid-disable-rowselection-for-specific-column/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-01T12:11:32.503

无需更改事件类型即可更直接地回答您的问题：

```
grid.on('itemclick', function(grid, rowIndex, columnIndex, e) {
  var columnType = grid.panel.columns[columnIndex].xtype;
  if (columnType === 'actioncolumn') {
    // it's action column!
  } else {
    // it's NOT action column!
  }
}, this); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T05:37:40.180

你试过了吗[`Ext.EventObject#stopPropagation()`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.EventObject-method-stopPropagation)？[`Ext.EventObject#stopEvent()`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.EventObject-method-stopEvent)

您可以将其添加到您的**操作列处理程序**中：

`e.stopPropagation();`

这样网格的`itemclick`事件就不会触发。

# css - 尝试使用自动边距左/右：自动将图像放在左侧

> ID：12240848
> 
> 赞同：0
> 
> 时间：2012-09-03T00:40:38.590
> 
> 标签：css

使用 left: 明确定位我的图像正确放置它，但是当我删除 left: 并用 margin-left: auto 和 margin-right: auto 替换它时，它被定位在左侧。我做错了什么？

```
<body>
    <div id = "main_header" href="http://xxx" >
        <img id = "logo" src="logo.png"/>
        <h1 id = "main_title">Title</h1>
    </div>

    body {
        position:relative;
        background-image: url("large_background.png");
        font-family: Helvetica; 
        margin: 0;              /* Amount of negative space around the outside of the body */
        padding: 0;             /* Amount of negative space around the inside of the body */
    }

    #main_header {
        position: relative;
    }

    #logo {
        position:absolute;
        top: 5px;
        left: 140px;
        height: 50px;
        width: 50px;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T00:51:35.690

您的图像将 css 设置为绝对位置。使用此属性，您的“logo”将相对于 div“main_header”定位，因为它设置为 position:relative。这就是边距不起作用的原因。使用 position:absolute 只有 "left"、"top" 和其他的会起作用。

要使用 Margin，您应该删除 position 属性。

# python - 我无法正确比较用户输入与预填充的字典值

> ID：12240852
> 
> 赞同：0
> 
> 时间：2012-09-03T00:41:10.460
> 
> 标签：python

我正在尝试在 python 中制作任意用户名和密码程序我有一个字典，其中填充了一系列用户名和值我无法将用户输入与字典用户名和值进行比较。它们似乎不相等。

```
textFile = open('names.txt','r')
dictionary = {}
for lines in textFile:
    splatLine=lines.split('\t')
    dictionary[splatLine[3]]= splatLine[4]
print dictionary

userName= raw_input("what is your UserName:")
password= raw_input("what is your Password:") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T01:48:04.543

最好使用*with*语句自动关闭打开的文件，否则不要忘记在读取文件后关闭文件。此外，文件的*readline*方法将返回带有**尾随换行符**的行，您需要在与用户输入进行比较之前将其剥离。

```
with open('names.txt','r') as f:
    pwd_dict=dict([line.strip().split('\t')[3:5] for line in f])    
userName= raw_input("what is your UserName:")
password= raw_input("what is your UserName:")
if not (username in pwd_dict and password == pwd_dict[username]):
    ... ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T01:12:20.697

假设您正确阅读了文本，这将起作用。

```
dictionary = {"foo":"bar","Johnny":"Appleseed"}
uname = "foo"
pw = "nobar"
     for i in dictionary:
          if uname == i:
              if dictionary[i] == pw:
                   print "You're in"
              else:
                   print "all your base are belong to us" 
```

# android - TextToSpeech setSpeechRate 不工作/改变

> ID：12240855
> 
> 赞同：1
> 
> 时间：2012-09-03T00:41:29.600
> 
> 标签：android, text-to-speech

我正在设置 TextToSpeech.setSpeechRate() 并且它正在返回 TextToSpeech.SUCCESS 但速度没有改变。

它在运行 ICS 的 Galaxy Nexus 上运行良好，但不适用于运行 Gingerbread 的 Thunderbolt。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T00:41:29.600

我发现 Thunderbolt 有一个“始终使用我的设置”的全局设置，它覆盖了应用程序对 TextToSpeech 的任何更改。

它在设备的设置中，然后是“语音输入和输出”，然后是“文本到语音设置”。

您可以通过调用[textToSpeech.areDefaultsEnforced()来检查这一点](http://developer.android.com/reference/android/speech/tts/TextToSpeech.html#areDefaultsEnforced%28%29)

这在 ICS 中运行良好的原因是：

> 从冰淇淋三明治版本开始，用户设置永远不会强行覆盖应用程序的设置。

# c# - 如何从此 URL 从文件中获取内容？

> ID：12240857
> 
> 赞同：33
> 
> 时间：2012-09-03T00:41:51.950
> 
> 标签：c#, url

我有这个网址：[来自 Google 的网址](https://www.google.com.vn/s?hl=vi&gs_nf=1&tok=i-GIkt7KnVMbpwUBAkCCdA&cp=5&gs_id=n&xhr=t&q=thanh&pf=p&safe=off&output=search&sclient=psy-ab&oq=&gs_l=&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&fp=be3c25b6da637b79&biw=1366&bih=362&tch=1&ech=5&psi=8_pDUNWHFsbYrQeF5IDIDg.1346632409892.1)

在新标签中打开链接时，浏览器会强制我下载它。下载后，我得到一个名为“s”的文本文件。但我想使用 C# 访问这个 URL 并获取它的文本，不要将它作为文件保存到计算机。有什么办法吗？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-09-03T00:52:38.033

```
var webRequest = WebRequest.Create(@"http://yourUrl");

using (var response = webRequest.GetResponse())
using(var content = response.GetResponseStream())
using(var reader = new StreamReader(content)){
    var strContent = reader.ReadToEnd();
} 
```

这会将请求的内容放入 strContent。

或者像下面提到的[adrianbanks](https://stackoverflow.com/users/116923/adrianbanks)那样简单地使用[WebClient.DownloadString()](http://msdn.microsoft.com/en-us/library/fhd1f0sw.aspx)

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2012-09-03T01:04:46.160

尝试这个：

```
var url = "https://www.google.com.vn/s?hl=vi&gs_nf=1&tok=i-GIkt7KnVMbpwUBAkCCdA&cp=5&gs_id=n&xhr=t&q=thanh&pf=p&safe=off&output=search&sclient=psy-ab&oq=&gs_l=&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&fp=be3c25b6da637b79&biw=1366&bih=362&tch=1&ech=5&psi=8_pDUNWHFsbYrQeF5IDIDg.1346632409892.1";

var textFromFile = (new WebClient()).DownloadString(url); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2018-12-04T22:22:49.890

由于这个问题和我之前的答案现在已经相当老了，一个更现代的答案是使用`HttpClient`from`System.Net.Http`

```
using System.Net.Http;

namespace ConsoleApp2
{
    class Program
    {
        async static void Main(string[] args)
        {
            HttpClient client = new HttpClient();
            string result = await client.GetStringAsync("https://example.com/test.txt");
        }
    }
} 
```

如果不在异步函数中，则：

```
string result = client.GetStringAsync("https://example.com/test.txt").Result; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-10-09T11:26:22.777

对于 asp.net core / .Net 5+，您应该在您的服务中注入 HttpClient。您不应手动创建新实例。

```
public class MySerivice {
   private readonly HttpClient _httpClient;
   public MyService(HttpClient httpClient) {
       _httpClient = httpClient;
   }

   public async Task Foo() {
       var myString = await _httpClient.GetStringAsync("https://my-url/file.txt");
   }
} 
```

注入 HttpClient 将在幕后使用 IHttpClientFactory。文档：[https ://docs.microsoft.com/en-us/dotnet/architecture/microservices/implement-resilient-applications/use-httpclientfactory-to-implement-resilient-http-requests](https://docs.microsoft.com/en-us/dotnet/architecture/microservices/implement-resilient-applications/use-httpclientfactory-to-implement-resilient-http-requests)

# mongodb - 从源代码复制 MongoDB 数据库

> ID：12240860
> 
> 赞同：1
> 
> 时间：2012-09-03T00:42:36.233
> 
> 标签：mongodb

我正在尝试将 Mongo 数据库从我的本地计算机移动到公共网络 Mongo 服务器。db.copydatabase 说它需要在目标服务器上运行，但在我的情况下，我的计算机没有设置外部 IP，因此目标服务器无法通过 Internet 连接到我的计算机。有没有办法从我的计算机到公共服务器，比如从源而不是目标运行？我还可以使用备份或任何有效的技术吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T00:48:49.607

如果您没有对源计算机的外部访问权限，则复制数据库的最简单方法如下：

1.  用于`mongodump`导出数据。

2.  （可选）如果您正在处理大量数据，您可能希望将生成的 *.bson 文件靠近（从网络的角度）到目标 MongoDB。这样做的原因是，如果您要移动超过 1Gb 的数据，导入操作（下面的第 3 步）有时会因网络连接不佳而失败。如果您控制目标数据库机器，请使用您喜欢的任何机制将它们放在那里，例如，安全复制 ( `scp`)。如果您不控制目标机器，例如，如果您使用的是 MongoHQ 或 MongoLab 托管，请将它们放在与您的 MongoDB 实例节点相同的可用区中的 EC2 节点上。

3.  用于`mongorestore`加载数据。

请参阅 MongoDB 的有关[导入/导出工具](http://www.mongodb.org/display/DOCS/Import+Export+Tools)的文档。

# android - 在 Android 应用程序中安全下载数据

> ID：12240861
> 
> 赞同：1
> 
> 时间：2012-09-03T00:42:36.537
> 
> 标签：android, security

我有一个用我的数据返回 JSON 字符串的 URL。现在，我想保密这些数据，所以只有我的 Android 应用程序可以显示它。

我的第一个想法是使用私钥（在服务器端）对数据进行编码，并将相同的私钥存储在应用程序中，这样它就可以解码消息。但是，攻击者（用户）可以反编译 .apk 并获取私钥。

1.  你知道如何保护它吗？
2.  反编译 Java 很[简单](https://stackoverflow.com/questions/272535/how-do-i-decompile-java-class-files)。Android .apk 怎么样？我听说有一种叫做 ProGuard 的东西——Android 默认使用它吗？它是否保护代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T03:00:00.143

这通常是做不到的：如果用户需要查看数据，他们必须能够对其进行解密等。您可以通过不将数据存储在磁盘等上来使其更难，但是确定的用户/攻击者可以转储内存，使用调试器等查看数据。首先考虑您要保护的威胁，然后决定采取的行动方案。

如果您只希望您的应用程序能够下载数据，则需要使用某种身份验证 + SSL。如果您在应用程序中对密钥或密码进行硬编码，则很容易将其提取出来，因此不会给您带来太多收益。如果您让用户每次使用该应用程序时都输入密码，他们会很快感到沮丧并留下一堆 1 星评级。中间立场是使用某种基于令牌的身份验证，例如 OAuth（或 ClientLogin，如果你真的需要，但它已被弃用）并让用户使用他们现有的帐户进行身份验证，这样他们就不会必须注册并记住另一个密码。大多数 Android 设备已经设置了 Google 帐户，因此您可以使用它，但这需要额外的权限和用户同意（确认对话框）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T02:42:59.630

一些混淆器比其他混淆器要好得多，但它可以保护代码不被逆向工程，而不是数据不被看到，它可以保护你免受没有动机的黑客的攻击，但仅此而已。

如果您试图保护数据免受成功反编译/重新编译您的代码的人的影响，那么除非用户使用未存储在设备上并用于加密/解密的密码授权数据，否则数据永远不应该是明文的即时数据。

我认为最简单的方法是使用密码保护的 HTTPS 会话进行数据传输，然后使用相同的永不存储密码即时加密/解密它，或者使用相同的永不存储密码将其[加密存储在 SQL](https://stackoverflow.com/questions/6043984/sqlite-encryption-for-android)中。

这可能会变得非常复杂，具体取决于您真正想要做的事情、它真正需要的安全性以及您在服务器端拥有多少控制权等等。网络上有很多更详细的东西，[这是一本有趣的读物例如](http://reports-archive.adm.cs.cmu.edu/anon/2011/CMU-CS-11-115.pdf)

如果你确实想定制，那么 Android 几乎有安全的密钥交换协议、私钥/公钥支持，以及很多通用的加密支持，所以这一切都是可行的，但我不确定我会尝试自己动手，除非你很漂亮对所有协议和正确使用感到满意。

人们通常不需要他们认为的那样多的安全性，但是如果您愿意投入基础设施并花时间对其进行审查，那么您可以获得非常安全的保障。

# grails - 将自定义库添加到 Grails 项目

> ID：12240864
> 
> 赞同：0
> 
> 时间：2012-09-03T00:43:07.410
> 
> 标签：grails

我在尝试添加到我的 Grails 项目中的自定义库时遇到问题。我有 tagoup-1.2.jar 库，我将其放入 Grails 项目下的“lib”文件夹中。但是，当我运行我的项目时，我收到以下错误：

> @ 第 135 行，第 24 列。 def tagsoupParser = new org.ccil.cowan.tagsoup.Parser() ^ 1 错误

现在我通过 Eclipse 中的“构建路径”选项将库添加到类路径，但这没有帮助。

请问谁能告诉我把图书馆放在哪里？和/或为什么我会出错？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T01:49:04.627

通过以下链接找到我的答案：[未找到 lib 目录中的 Grails JAR 文件](https://stackoverflow.com/questions/8784720/grails-jar-file-in-lib-directory-not-found)

我需要通过以下方式清理项目：

> 圣杯清洁

完成后，我再次运行它，一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-11T22:06:41.120

与上面类似，我将 grails 运行干净。那仍然没有用。然后我确实刷新了依赖项并修复了。它。

# mysql - 如何有条件地逐行选择哪个表和列？

> ID：12240865
> 
> 赞同：4
> 
> 时间：2012-09-03T00:43:39.303
> 
> 标签：mysql, sql, join, conditional

在对“链接”表的查询返回的结果中，我还想添加一个额外的列，该列显示从`JOIN`每行“toTable”值的条件中选择的“DisplayName”值。此外，有时“DisplayName”值是列连接的结果。

我的问题是我该怎么做？

我可以编写单独的查询并结合起来，`UNION ALL`但我想知道是否有条件的方法来做到这一点

“链接”表中的每个条目都描述了两个表（可能的 3 个或更多表）中的一对条目之间的链接。

**链接表：**

```
| LinkID | fromTable | fromID | toTable | toID |
|      1 |        A  |      1 |      B  |    1 |
|      2 |        A  |      1 |      C  |    2 |
|      3 |        B  |      1 |      C  |    1 |
|      4 |        C  |      1 |      A  |    1 | 
```

**我想要的查询结果：** 例如 WHERE Links.fromTable = 'A' OR Links.fromTable = 'C'

```
| LinkID | fromTable | fromID | toTable | toID | DisplayName      |
|      1 |        A  |      1 |      B  |    1 |  Some Title      |
|      2 |        A  |      1 |      C  |    2 |  Loud-Quack      |
|      4 |        C  |      1 |      A  |    1 |  Linus           | 
```

**3个不同列的表：**

```
Table A:    
| ID  | Name  |
| 1   | Linus | 
```

-

```
Table B:    
| ID  | Title      |
|  1  | some title | 
```

-

```
Table C:    
| ID  | CategoryA | CategoryB |
| 1   |   Bark    |    Softly |
| 2   |   Quack   |    Loud   | 
```

- 这就是我这样做的方式`UNION ALL`，这不是很灵活：编辑：实际上我认为下面是错误的，我现在正在看这个：

```
SELECT Links.*, A.Name AS DisplayName
FROM Links 
JOIN A ON Links.toID = A.ID 
WHERE Links.fromType IN ('A') AND Links.toType IN ('B')

UNION ALL

SELECT Links.*, CONCAT(C.CategoryB,'-',C.CategoryA) AS DisplayName
FROM Links 
JOIN C ON Links.toID = C.ID 
WHERE Links.fromType IN ('A') AND Links.toType IN ('C') 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T00:55:33.327

我觉得你需要`inline CASE`声明

```
SELECT  a.*,
        CASE toTable
            WHEN 'A' THEN b.Name
            WHEN 'B' THEN c.Title
            WHEN 'C' THEN CONCAT(d.CategoryB , '-',d.CategoryA )
        END AS DisplayName
FROM    `links` a
            LEFT JOIN tableA b
                ON a.toID = b.ID
            LEFT JOIN tableB c
                ON a.toID = c.ID
            LEFT JOIN tableC d
                ON a.toID = d.ID
WHERE   fromtable IN ('A', 'C') 
```

# [*SQLFiddle 演示*](http://sqlfiddle.com/#!2/56d21/1 "点击重定向")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T00:52:36.240

好吧，使用您的示例查询，您可以这样做：

```
SELECT Links.*, COALESCE(A.Name,CONCAT(C.CategoryB,'-',C.CategoryA)) AS DisplayName
FROM Links 
LEFT OUTER JOIN A ON Links.toID = A.ID 
    AND Links.fromType IN ('A') AND Links.toType IN ('B')
LEFT OUTER JOIN C ON Links.toID = C.ID 
    AND Links.fromType IN ('A') AND Links.toType IN ('C') 
```

只要您始终从连接的表中获得最多一个匹配项（即，您没有两个具有相同和标准的*不同连接），此方法就可以工作。*`Links.fromType IN ...``Links.toType IN ...`

# css - 使用 CSS 过渡平滑 div 重新定位

> ID：12240866
> 
> 赞同：3
> 
> 时间：2012-09-03T00:43:56.740
> 
> 标签：css, css-transitions

我有 3 个 div。前两个在第三个之上。

顶部的 div 具有不同的高度，一次只能看到一个：它们切换其可见性。因为它们的高度不同，所以当这两个 div 切换时，它们会导致下方第三个 div 的顶部位置发生变化。我想知道是否有办法使用 CSS 过渡来使第三个 div 的移动平滑。

这是 HTML：

```
<div id="Toggle">click here</div>

<div id="InnerDiv1"></div>
<div id="InnerDiv2"></div>

​&lt;div id="BottomDiv"></div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

这是CSS：

```
#InnerDiv1{
    height:30px;
    width:200px;
    background:red;
    margin:10px 10px;   
    clear:both;}

#InnerDiv2{
    height:60px;
    width:200px;
    background:blue;
    margin:10px 10px;
    clear:both;    
    display:none;}

#BottomDiv{
    height:60px;
    width:200px;
    background:yellow;
    margin:10px 10px;
    transition:all 2s ease;} 
```

还有一些用于切换的快速 jquery：

```
$('#Toggle').click(function() {
    $('#InnerDiv1').toggle();
    $('#InnerDiv2').toggle();
});​ 
```

**为了清楚起见，这里是[jsfiddle](http://jsfiddle.net/gfv5t/)。**

目标是让黄色 div 平滑移动。我可以用 jquery 做到这一点，但我想知道是否有办法让它只用 CSS 工作。

感谢您的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T01:13:17.170

好吧，如果我知道这段代码的用途，我可以举一个更好的例子。所以我只是猜测。

[http://jsfiddle.net/35USv/1/](http://jsfiddle.net/35USv/1/)

这是一种设置不当的切换。不过也有好东西。您可以使用 -webkit-transition 或 -moz 或 -o 来制作动画。你现在也只需要考虑一个元素，就可以改变那个 div 的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-21T12:49:54.190

当您将鼠标悬停在 innerDv1 上时，这将使其工作。希望这可以帮助。

```
#InnerDiv1{
   height:30px; 
    height:30px;
    width:200px;
    background:red;
    margin:10px 10px;   
    clear:both;
-webkit-transition:width 2s, height 2s, background-color 2s, -webkit-transform 2s;
    transition:width 2s, height 2s, background-color 2s, transform 2s;}
#InnerDiv1:hover {
   height:60px; 
    height:60px;
    background:blue;
} 
```

# android - 如何通过在android中连接的wifi网络检查Internet是否处于活动状态

> ID：12240867
> 
> 赞同：2
> 
> 时间：2012-09-03T00:44:07.090
> 
> 标签：android, wifi

如何在android中连接的WiFi网络上自动检查互联网是否处于活动状态？我可以检查是否启用了 wifi 或是否连接了 wifi 网络，但我不确定如何检查互联网是否已连接？这可能吗？

```
private boolean connectionAvailable() 
{
    boolean connected = false;
    ConnectivityManager connectivityManager = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    if (connectivityManager.getNetworkInfo(ConnectivityManager.TYPE_WIFI).getState() == NetworkInfo.State.CONNECTED) {
        //we are connected to a network
        connected = true;
    }
    return connected;
} 
```

上面检查是否启用了 wifi/wifi 连接但不是互联网。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T00:48:12.670

```
public boolean isOnline() {
    ConnectivityManager cm =
        (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo netInfo = cm.getActiveNetworkInfo();
    if (netInfo != null && netInfo.isConnectedOrConnecting()) {
        return true;
    }
    return false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-08T07:17:45.833

如果您想检查您的设备是否与 wifi 连接，请使用此方法。

```
 public static boolean isInternetConnected(Context context) {
    ConnectivityManager connManager = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo mnetwork = connManager.getActiveNetworkInfo();
    return mnetwork != null && mnetwork.isConnected();
} 
```

如果您想检查您的设备是否与移动网络互联网连接，请使用此方法。

```
public static boolean isMobileInternetConnected(Context context) {
        ConnectivityManager connManager = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo mNetwork = connManager.getActiveNetworkInfo();
        return mNetwork != null && mNetwork.isConnected() && mNetwork.getType() == ConnectivityManager.TYPE_MOBILE;
    } 
```

**注意**：不要忘记添加权限

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

# ruby-on-rails - 未定义的局部变量或方法 `root_path' Hartl's Tutorial Chapter 5.3.2

> ID：12240868
> 
> 赞同：14
> 
> 时间：2012-09-03T00:44:16.890
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec

所以我关于 Stackoverflow 的第一个问题..... =]

[我在Michael Hartl 的 RoR 教程](http://ruby.railstutorial.org/chapters/filling-in-the-layout#sec-rails_routes)第 5.3.2 章中的测试都失败了，当教程说它应该通过时（教程说“关于”、“联系”和“帮助”应该通过......但我的都失败了） . 到目前为止一切正常，但我改变了

```
get 'static_pages/help' 
```

到

```
match '/help', to: 'static_pages#help' 
```

这样我的

## **配置/路由.rb**

```
SampleApp::Application.routes.draw do

  root to: 'static_pages#home'

  match '/help', to: 'static_pages#help'
  match '/about', to: 'static_pages#about'
  match '/contact', to: 'static_pages#contact' 
```

然后一切都下地狱了。我所有的测试都因未定义的局部变量或方法“root_path”或“about_path”等而失败（见下文，终端输出）。但这里是我的相关文件……以防万一有人好奇，所有文件都是 Hartl 所拥有的。我基本上复制并粘贴了每个文件的内容。

有人能帮我吗？？？？？？谢谢！

## **规范/static_pages_spec.rb**

```
require 'spec_helper'

describe "Static pages" do

  describe "Home page" do

    it "should have the h1 'Sample App'" do
      visit root_path
      page.should have_selector('h1', text: 'Sample App')
    end

    it "should have the base title" do
      visit root_path
      page.should have_selector('title',
                        text: "Ruby on Rails Tutorial Sample App")
    end

    it "should not have a custom page title" do
      visit root_path
      page.should_not have_selector('title', text: '| Home')
    end
  end

  describe "Help page" do

    it "should have the h1 'Help'" do
      visit help_path
      page.should have_selector('h1', text: 'Help')
    end

    it "should have the title 'Help'" do
      visit help_path
      page.should have_selector('title',
                        text: "Ruby on Rails Tutorial Sample App | Help")
    end
  end

  describe "About page" do

    it "should have the h1 'About'" do
      visit about_path
      page.should have_selector('h1', text: 'About Us')
    end

    it "should have the title 'About Us'" do
      visit about_path
      page.should have_selector('title',
                    text: "Ruby on Rails Tutorial Sample App | About Us")
    end
  end

  describe "Contact page" do

    it "should have the h1 'Contact'" do
      visit contact_path
      page.should have_selector('h1', text: 'Contact')
    end

    it "should have the title 'Contact'" do
      visit contact_path
      page.should have_selector('title',
                    text: "Ruby on Rails Tutorial Sample App | Contact")
    end
  end
end 
```

## **带有输入“rspec spec/”的终端输出**

```
FFFFFFFFF

Failures:

  1) Static pages Contact page should have the h1 'Contact'
     Failure/Error: visit contact_path
     NameError:
       undefined local variable or method `contact_path' for #<RSpec::Core::ExampleGroup::Nested_1::Nested_4:0x007fd2093855f8>
     # ./spec/requests/static_pages_spec.rb:55:in `block (3 levels) in <top (required)>'

  2) Static pages Contact page should have the title 'Contact'
     Failure/Error: visit contact_path
     NameError:
       undefined local variable or method `contact_path' for #<RSpec::Core::ExampleGroup::Nested_1::Nested_4:0x007fd208cbeb20>
     # ./spec/requests/static_pages_spec.rb:60:in `block (3 levels) in <top (required)>'

  3) Static pages Help page should have the h1 'Help'
     Failure/Error: visit help_path
     NameError:
       undefined local variable or method `help_path' for #<RSpec::Core::ExampleGroup::Nested_1::Nested_2:0x007fd2094c02b0>
     # ./spec/requests/static_pages_spec.rb:27:in `block (3 levels) in <top (required)>'

  4) Static pages Help page should have the title 'Help'
     Failure/Error: visit help_path
     NameError:
       undefined local variable or method `help_path' for #<RSpec::Core::ExampleGroup::Nested_1::Nested_2:0x007fd209649208>
     # ./spec/requests/static_pages_spec.rb:32:in `block (3 levels) in <top (required)>'

  5) Static pages About page should have the h1 'About'
     Failure/Error: visit about_path
     NameError:
       undefined local variable or method `about_path' for #<RSpec::Core::ExampleGroup::Nested_1::Nested_3:0x007fd208f16d00>
     # ./spec/requests/static_pages_spec.rb:41:in `block (3 levels) in <top (required)>'

  6) Static pages About page should have the title 'About Us'
     Failure/Error: visit about_path
     NameError:
       undefined local variable or method `about_path' for #<RSpec::Core::ExampleGroup::Nested_1::Nested_3:0x007fd2094f7990>
     # ./spec/requests/static_pages_spec.rb:46:in `block (3 levels) in <top (required)>'

  7) Static pages Home page should not have a custom page title
     Failure/Error: visit root_path
     NameError:
       undefined local variable or method `root_path' for #<RSpec::Core::ExampleGroup::Nested_1::Nested_1:0x007fd208d30b08>
     # ./spec/requests/static_pages_spec.rb:19:in `block (3 levels) in <top (required)>'

  8) Static pages Home page should have the base title
     Failure/Error: visit root_path
     NameError:
       undefined local variable or method `root_path' for #<RSpec::Core::ExampleGroup::Nested_1::Nested_1:0x007fd208e0cb80>
     # ./spec/requests/static_pages_spec.rb:13:in `block (3 levels) in <top (required)>'

  9) Static pages Home page should have the h1 'Sample App'
     Failure/Error: visit root_path
     NameError:
       undefined local variable or method `root_path' for #<RSpec::Core::ExampleGroup::Nested_1::Nested_1:0x007fd209607268>
     # ./spec/requests/static_pages_spec.rb:8:in `block (3 levels) in <top (required)>'

Finished in 0.30216 seconds
9 examples, 9 failures

Failed examples:

rspec ./spec/requests/static_pages_spec.rb:54 # Static pages Contact page should have the h1 'Contact'
rspec ./spec/requests/static_pages_spec.rb:59 # Static pages Contact page should have the title 'Contact'
rspec ./spec/requests/static_pages_spec.rb:26 # Static pages Help page should have the h1 'Help'
rspec ./spec/requests/static_pages_spec.rb:31 # Static pages Help page should have the title 'Help'
rspec ./spec/requests/static_pages_spec.rb:40 # Static pages About page should have the h1 'About'
rspec ./spec/requests/static_pages_spec.rb:45 # Static pages About page should have the title 'About Us'
rspec ./spec/requests/static_pages_spec.rb:18 # Static pages Home page should not have a custom page title
rspec ./spec/requests/static_pages_spec.rb:12 # Static pages Home page should have the base title
rspec ./spec/requests/static_pages_spec.rb:7 # Static pages Home page should have the h1 'Sample App' 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-05-04T15:17:21.220

我将其作为答案，因为解决方案（来自@mischa）隐藏在[@marflar 答案下的评论中：尝试重新启动Spork 以解决此问题](https://stackoverflow.com/questions/12240868/undefined-local-variable-or-method-root-path-hartls-tutorial-chapter-5-3-2/16375807#comment16406832_12240937)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T01:02:39.373

Mischa 的回答有望解决大部分问题，但您的测试可能仍会在 root_path 问题上失败。

您是否像这样删除了 index.html：`git rm public/index.html`

并且不要忘记通过以下方式提交您的更改：`git commit -am "Message"`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-20T16:57:47.127

我在本章中遇到了同样的问题，只需将 config/routes.rb *root 更改为：'static_pages#home'* **到** *root :to => 'static_pages#home'*，它就可以开始工作了。您还可以使用*rake routes*检查所有路由。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-18T19:32:56.573

在您的 Gemfile 中，将 rspec-rails 行更改为： gem 'rspec-rails', '2.12.0'

这个版本的 rspec 支持 Hartl 在书中使用的方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-10-07T21:21:11.797

```
 root :to => 'static_pages#home' 
  match '/help',    to: 'static_pages#help',    via: 'get'
  match '/about',   to: 'static_pages#about',   via: 'get'
  match '/contact', to: 'static_pages#contact', via: 'get' 
```

为我工作

测试结果：9 例 0 次失败

网址现在似乎已经改变了：

```
http://localhost:3000/about 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-18T22:43:13.663

我正在使用相同的教程并遇到了完全相同的问题！您可能认为是 spork 解决了这个问题，但事实并非如此。它起作用的原因是因为您在下一节中继续升级了 Rspec。它仅适用于升级后的 rspec - 旧的 rspec 是您的测试未通过的原因。该站点是错误的，因为它告诉用户测试将在更改 Rspec 之前通过

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-09-10T03:02:07.597

我有一个类似的问题。我的解决方法是在 spec_helper.rb 中包含以下行

```
config.infer_spec_type_from_file_location! 
```

顺便说一句，宝石是：

```
gem 'rails', '4.1.5'
gem 'rspec-rails', '~> 3.0' 
```

我还删除了所有 Guard 和 Spork 的东西。

# macos - Cocoa：在 OSX 上动画后运行块

> ID：12240870
> 
> 赞同：6
> 
> 时间：2012-09-03T00:45:31.613
> 
> 标签：macos, cocoa

我正在使用动画师来实现动画，比如

```
[[self.view animator] setFrame:newFrame]; 
```

但我想在动画完成后运行一个方法或块，如下所示：

```
[[self.view animator] setFrame:newFrame onComplete:^{
    NSLog(@"****");
}]; 
```

有没有办法实现它？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-03T05:43:39.147

你应该使用`NSAnimationContext`它`completionHandler`：

```
[NSAnimationContext beginGrouping];
[[NSAnimationContext currentContext] setCompletionHandler:^{
    NSLog(@"****");
}];
[[self.view animator] setFrame:newFrame];
[NSAnimationContext endGrouping]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T03:29:38.917

我从 WWDC 视频中找到了另一个解决方案，希望下面的代码对其他人有帮助

![在此处输入图像描述](../Images/f44e27847c9fa1eb0106a64b075add79.png)

# python - 将位串转换为字节（霍夫曼编码）

> ID：12240875
> 
> 赞同：1
> 
> 时间：2012-09-03T00:46:19.323
> 
> 标签：python, performance, algorithm, compression, huffman-code

在用于解压缩的霍夫曼编码中，您必须将比特流与多个值进行比较（无前缀）。我正在尝试在 python 中实现一个霍夫曼编码器解码器，这是我将比特流转换为 ascii 值的代码。

```
c = ''
l = 0
x = 1
stime = time.time()
while l<len(string):
    if string[l:l+x] in table:
        c+=table[string[l:l+x]]
        l+=x
        x = 1
    else:
        x+=1 
```

我能做些什么来使这个循环更有效率？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T04:57:15.270

如果您准备花更多时间建表，则可以加快解码速度，因为您可以构建一组表，以便一次处理一个字节的比特流，而不必移动或屏蔽输入流挑选出个别位。

您想构建一组表，以便解码字节流如下所示：

```
state = 0
for (input in inputBytes)
  output += outputTable[state][input]
  state = stateTable[state][input] 
```

这里的输出将是一个可变长度的 ascii 值字符串。状态必须记住来自前一个字节或尚未转换为输出数据的字节的所有信息。构建这些表的一种方法是将状态 0 设为初始状态 - 当您即将读取输入数据的第一个字节时。然后，对于每个字节，尽可能多地解码并使用它来生成 outputTable[0][byte]。现在查看字节末尾的所有未使用位的字符串。对于这些字符串中的每一个，您都需要分配一个新状态，并且您需要为每个状态、所有可能的字节进行相同类型的表构建。当你这样做时，你也会在解码后得到一串未使用的位串。如果这些是位串，您已经分配了状态，您可以忽略它们并继续。如果不，你需要分配更多的状态。最终，您将构建表来处理所有可能的状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T17:46:05.627

*快速地：*

首先，确保您已经构建了一个规范的霍夫曼代码，其中较短的代码在数字上位于较长的代码之前。这很容易通过首先将您的霍夫曼代码描述为每个符号的位数来轻松完成。然后将霍夫曼代码分配给符号顺序中的最短代码，然后按符号顺序分配下一个最短代码，依此类推。例如

```
Symbol   Bits
  A        2
  B        4
  C        3
  D        3
  E        2
  F        3
  G        4 
```

按位排序，保留按符号排序：

```
Symbol   Bits
  A        2
  E        2
  C        3
  D        3
  F        3
  B        4
  G        4 
```

分配霍夫曼码，从零开始：

```
Symbol   Bits    Code
  A        2     00
  E        2     01
  C        3     100
  D        3     101
  F        3     110
  B        4     1110
  G        4     1111 
```

这种规范的方法提供了一种将霍夫曼代码从压缩器传输到解压缩器的紧凑方法，因为您不必发送实际代码或树——只需发送每个符号的代码长度。然后可以在另一端像上面那样构建代码。

现在我们创建解码表、符号表`Symbol[] = "AECDFBG"`和代码索引表：

```
Bits    Start     Index
  2    0000 (0)     0
  3    1000 (8)     2
  4    1110 (14)    5 
```

现在要解码，您可以从 2 位循环到 4 位，并查看您的代码是否小于下一位大小的起始代码。我们从流中提取四个位并调用它`nyb`（如果流中没有四个位，只需附加零位以填充它）。`if`在使用's 而不是循环的伪代码中，`>>`意味着向下移位：

```
if nyb < Start[Bits are 3] (= 8) then
    output Symbol[Index[Bits are 2] (= 0) + (nyb - Start[Bits are 2] (= 0)) >> 2]
    remove top two bits from bitstream
else if nyb < Start[Bits are 4] (= 14) then
    output Symbol[Index[Bits are 3] (= 2) + (nyb - Start[Bits are 3] (= 8)) >> 1]
    remove top three bits from bitstream
else (must be four bits)
    output Symbol[Index[Bits are 4] (= 5) + (nyb - Start[Bits are 4] (= 14))]
    remove top four bits from bitstream 
```

应该很容易看出如何把它变成一个循环，从最短的代码长度到第二长的代码长度，如果你没有找到它，它一定是最长的代码长度。

*快点：*

建立一个长度为2**（最长代码长度）的查找表。表中的每个条目都包含代码中的位数和结果符号。您将比特流的那么多位用作索引。同样，如果比特流没有剩下那么多比特，则用零填充。然后您只需从该索引条目中输出符号并从比特流中删除该索引条目中的位数（这可能小于您为索引提取的位数 - 确保将未使用的位留在比特流）。重复，现在您从剩余的比特流中提取第一个未使用的比特。

在下一个复杂级别，您可以做[zlib](http://zlib.net/)所做的事情。如果最长的代码比较长（在zlib中最多可以达到15位），与下面的方法相比，您制作表格所花费的时间可能无法支付解码节省的时间。有一个两级表，其中第一级表最多包含小于最长代码的`n`位。`n`（在 zlib 中，最佳选择`n == 9`是 15 位代码。）然后，如果代码是`n`位或更少，则表条目提供符号和位数，然后按上述方法进行操作。如果代码多于`n`位，那么您将转到一个子表`n`-处理剩余位的位值，同样如上。该表条目指示要为子表提取多少位，并定义该子表的大小，称为它`k`。您从流中删除最高`n`位并提取下一位`k`并将其用作子表的索引。然后你得到代码中的符号和剩余位数，并像在单级表中一样继续。请注意，这`n+k`不一定是每个子表的最长代码的长度，因为该子表可能只涵盖较短的代码。只有最后一个或几个子表`n+k`的长度等于最长代码的长度。

这可能非常快，因为通过构建霍夫曼代码，更短的代码更有可能。大多数时候你会在第一级获得符号，只是偶尔需要进入第二级。主表和所有子表中要填写的表项总数可能远小于覆盖整个代码长度的大表中的表项数。然后减少了准备解码所花费的时间。

如果您有更长的霍夫曼代码（例如 32 位），您可以有更多级别的子表。确定子表的最佳断点需要进行一些实验，这取决于发送新代码的频率以及必须构建表的频率。

# javascript - JavaScript“编译器”

> ID：12240878
> 
> 赞同：11
> 
> 时间：2012-09-03T00:47:39.630
> 
> 标签：javascript, optimization, compiler-construction, compression, google-closure-compiler

[最近我发现了Google Closure Compiler](https://developers.google.com/closure/compiler/)这样很酷的东西。是否有替代方案可以提供从编译的静态类型语言中获益的机会？

***更新***

它不是关于真正的编译器，而是关于 JavaScript-JavaScript 翻译器，它提供类型验证等、优化，也许还有压缩。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T01:32:04.863

从您的评论中：

> 我对类型检查、接口检查、私有字段检查等感兴趣，所有东西都可以让你编写安全代码，而不仅仅是最小化程序。

JavaScript 是一种动态类型语言，没有对类、接口或访问修饰符的内置支持。Closure Compiler 通过使用嵌入在 JSDoc 注释中的信息来支持各种语言外功能，例如接口和访问修饰符。一些 IDE 还使用 JSDoc 标记信息提供静态分析，例如，请参阅**WebStorm 和 PhpStorm 博客：[5.0 中的新功能：Google Closure Compiler JSDoc annotations](http://blog.jetbrains.com/webide/2012/08/closure-syntax/)**。

在 JavaScript 缩小器领域有许多选项，例如[YUI Compressor](http://developer.yahoo.com/yui/compressor/)、[UglifyJS](https://github.com/mishoo/UglifyJS)、[dojo shrinksafe](http://shrinksafe.dojotoolkit.org/)、[Microsoft Ajax Minifier](http://ajaxmin.codeplex.com/)和[JSMIN](http://www.crockford.com/javascript/jsmin.html)。但是，这些工具中没有一个为基于 JSDoc 的分析提供与 Closure Compiler 相同级别的支持。

相关堆栈溢出问题：

1.  [哪个 Javascript minifier (cruncher) 与 Google 用于其 JS API 的功能相同？](https://stackoverflow.com/q/489847/1164465)
2.  [生产代码有哪些好的 css 和 js 最小化器？](https://stackoverflow.com/q/702907/1164465)
3.  [JavaScript 的类型检查器？](https://stackoverflow.com/q/4929880/1164465)
4.  [有没有好的 JavaScript 最小化器？](https://stackoverflow.com/q/3520285/1164465)
5.  [JavaScript 和 CSS 最小化器](https://stackoverflow.com/q/4843871/1164465)
6.  [JavaScript 压缩](https://stackoverflow.com/q/1417635/1164465)
7.  [JavaScript 静态类型检查的当前状态是什么？](https://stackoverflow.com/q/6672629/1164465)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-07T18:51:00.933

Closure compiler (Google) 是一个真正的 javascript 编译器。替代方案包括 typescript (Microsoft) 和 Flow (facebook)。闭包编译器使用 jsdoc 注释来注释类型。Typescript 使用与 es3/es5 不同的语法来提供编译为纯 javascript 的类型注释。Flow 搭载 OCaml 语言（擅长类型推断）以推断尽可能多的类型信息，但也可以使用注释语法中的注释。闭包编译器也在致力于更好的类型推断，但它还没有准备好投入生产。

回应@EASI：闭包编译器是一个真正的编译器，而不仅仅是一个缩小器。它的工作原理是：

1.  将一组输入 .js 文件和一组外部文件（为 ecma 3、5、6 和常见浏览器对象（如 Window 等）定义接口）解析为抽象语法树 (AST)。

2.  运行一系列编译器通过 AST 来重写、转换、消除死代码等。

3.  将 AST 发送回 js 源代码。它要么将文件与删除的注释连接在一起 (WHITESPACE_ONLY)，重命名和缩小函数定义中的符号 (SIMPLE)，要么将所有符号重命名并重写为缩小和混淆的形式 (ADVANCED)。

这是编译器通行证的列表，供感兴趣的人使用。如您所见，发生了很多事情：

`AliasExternals.java AliasStrings.java AmbiguateProperties.java AnalyzeNameReferences.java AnalyzePrototypeProperties.java AstValidator.java CallGraph.java ChainCalls.java CheckConformance.java CheckDebuggerStatement.java CheckEventfulObjectDisposal.java CheckGlobalNames.java CheckMissingGetCssName.java CheckRegExp.java CheckSideEffects.java ClosureCodeRemoval.java ClosureOptimizePrimitives.java CollapseAnonymousFunctions.java CollapseProperties.java CollapseVariableDeclarations.java ConstCheck.java ConstParamCheck.java ConvertDeclaredTypesToJSDoc.java ConvertToDottedProperties.java ConvertToTypedES6.java CoverageInstrumentationPass.java CreateSyntheticBlocks.java CrossModuleCodeMotion.java CrossModuleMethodMotion.java DeclaredGlobalExternsOnWindow.java DefaultPassConfig.java Denormalize.java DisambiguateProperties.java ErrorPass.java Es6ToEs3ClassSideInheritance.java ExpandJqueryAliases.java ExportTestFunctions.java ExternExportsPass.java ExtractPrototypeMemberDeclarations.java FlowSensitiveInlineVariables.java FunctionNames.java FunctionRewriter.java GatherExternProperties.java GatherRawExports.java GenerateExports.java GlobalNamespace.java GlobalTypeInfo.java GroupVariableDeclarations.java ImplicitNullabilityCheck.java InferConsts.java InjectEs6RuntimeLibrary.java InlineFunctions.java InlineObjectLiterals.java InlineProperties.java InlineVariables.java InstrumentFunctions.java JsMessageVisitor.java MarkNoSideEffectCalls.java MethodCompilerPass.java MinimizeExitPoints.java NameAnalyzer.java NameAnonymousFunctions.java NameAnonymousFunctionsMapped.java NameReferenceGraphConstruction.java NewTypeInference.java Normalize.java ObjectPropertyStringPostprocess.java ObjectPropertyStringPreprocess.java OptimizeArgumentsArray.java OptimizeCalls.java OptimizeParameters.java PeepholeOptimizationsPass.java PhaseOptimizer.java PrepareAst.java ProcessCommonJSModules.java ProcessDefines.java ProcessTweaks.java PureFunctionIdentifier.java RecordFunctionInformation.java RemoveUnusedClassProperties.java RemoveUnusedNames.java RemoveUnusedPrototypeProperties.java RemoveUnusedVars.java RenameLabels.java RenameProperties.java RenamePrototypes.java RenameVars.java ReplaceCssNames.java ReplaceIdGenerators.java ReplaceStrings.java RescopeGlobalSymbols.java RuntimeTypeCheck.java SanityCheck.java ShadowVariables.java SideEffectsAnalysis.java SimpleDefinitionFinder.java StrictModeCheck.java StripCode.java SymbolTable.java TransformAMDToCJSModule.java TypeInferencePass.java TypedScopeCreator.java UnreachableCodeElimination.java VariableVisibilityAnalysis.java`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T01:05:14.757

是的，

有 Java、JS、PHP、CSS 和 HTML“**缩小器**”。例如，当您使用 Google GWT Java 进行编程时，代码会生成为 JS 的最小化。

* * *

他们使用术语编译器，但它是不正确的。编译器将一种人类可读的语言代码转换为只有解释器或机器才能读取的目标代码。这个谷歌工具的作用是优化您的代码，以便解释器可以更快地读取它。脚本语言需要解释器才能执行。编译成机器语言的程序的执行速度比任何解释器都快。但是当然，任何程序的速度都取决于它的执行流程项目和开发团队的经验。

* * *

**新的：**

您是否尝试过在专门的 IDE 中编写 JavaScript 代码？如果您正在寻找类型检查，您可以尝试以下方法之一：

*   NuSphere PhpED Professional v7（最佳）
*   phpDesigner 8
*   阿普塔纳工作室
*   禅德工作室
*   DreamWeaver CS6

他们现在有了更大的支持，不仅对 PHP，而且对 JavaScript，代码自动完成、类型验证、动态语法突出显示、多语言语法突出显示和面向对象分析以及键入时自动完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-02T21:05:19.640

我认为[furiascript.com](http://furiascript.com)可能是一个有趣的选择。

# asp.net-mvc - 从 ApiController 获取数据并将其传递给另一个视图的最佳方法？

> ID：12240883
> 
> 赞同：0
> 
> 时间：2012-09-03T00:48:11.927
> 
> 标签：asp.net-mvc, asp.net-web-api

所以我设置了一个 ApiController 来接受搜索查询，并在这种情况下返回 JSON。

我的 _Layout.cshtml 页面上也有一个搜索表单。当用户搜索任何内容时，我有成功命中我的 ApiController 方法并返回 JSON 的 ajax，但我不确定如何处理它。我想重定向到 /SearchResults/ 并显示结果，但我不禁觉得我正在使用 WebApi 的方式，我应该把它删掉。

从我的搜索按钮中点击 ApiController，然后将结果发送到另一个视图是否有意义？如何重定向到其他视图？

```
$('#btnSearch').click(function () {
            var query = $('#searchQuery').val();
            $.ajax({
                url: "/api/search",
                data: {query : query},
                type: 'GET',
                dataType: 'application/json',
                statusCode: {
                    200: function (queryResult) {
                        //I want to send queryResult to another view
                    },
                    404: function () {
                        alert("failure");
                    }
                }
            });
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:45:46.847

你在问这个问题，并且有充分的理由，你所描述的感觉很尴尬，事实上确实如此。使用 WebAPI 是一种很好的做法，因为您将搜索的有效负载保持在非常小的范围内（仅传递数据而不传递 HTML）。您真正想要做的不是请求另一个视图，即当 statusCode 为 200 时，您想要做的是在当前视图内的客户端呈现 HTML。这当然很容易在 JQuery 中完成，从您的代码片段看起来您已经在使用它。

**是的，从我的搜索按钮中点击 ApiController 确实有意义”**

在您的搜索页面中添加一些 JavaScript，该 JavaScript 会使用您希望从 WebAPI 返回的搜索结果数据中显示的搜索结果动态更新页面部分。 **不要触发另一个网络请求来获取另一个视图/页面。**

# c# - 在 C# 中生成唯一的 *and* 随机 URL

> ID：12240885
> 
> 赞同：11
> 
> 时间：2012-09-03T00:48:24.600
> 
> 标签：c#, security, authentication, cryptography, guid

我的最终目标是创建一个唯一且无法猜测/预测的 URL。此 URL 的目的是允许用户执行验证其电子邮件地址和重置密码等操作。这些 URL 将在设定的时间（当前设置为 24 小时）内过期。

我最初是`Guid`为此目的使用 a 的，但我现在理解这介于“还好”和“非常不安全”之间，具体取决于您听哪位专家。所以，我想我会稍微加强一下我的代码，以防万一。起初我以为我会坚持使用 a `Guid`，但从随机字节而不是`Guid.NewGuid()`工厂方法生成它。这是我想出的方法：

```
public static Guid GetRandomGuid()
{
    var bytes = new byte[16];
    var generator = new RNGCryptoServiceProvider();
    generator.GetBytes(bytes);
    return new Guid(bytes);
} 
```

我不太清楚当你使用`new Guid(bytes)`instead of时究竟会发生什么`Guid.NewGuid()`，但我认为这个方法所做的只是生成一个随机字节数组并将其*存储*在`Guid`数据结构中。换句话说，它不再保证是唯一的，它只保证是随机的。

由于我的 URL 需要是唯一的*和*随机的，这似乎不是一个可靠的解决方案。我现在在想，我应该将我的 URL 建立在一个唯一 ID（可以是一个`Guid`，或者，如果有的话，一个数据库自动递增的 id）和从`RNGCryptoServiceProvider`.

**问题**

生成既保证唯一又极难/不可能预测/猜测的验证/密码重置 URL 的最佳方法是什么？

*   我是否应该通过将唯一字符串与随机字符串连接来简单地构造我的 URL？

*   .NET Framework 是否有一种内置方法可以轻松生成可用于 URL的唯一*且随机（不可预测的）序列？*

*   如果没有，是否有一个好的开源解决方案？

**更新**

如果有人有类似的要求，我目前正在使用以下方法：

```
public static string GenerateUniqueRandomToken(int uniqueId)
    // generates a unique, random, and alphanumeric token
{
    const string availableChars =
        "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";
    using (var generator = new RNGCryptoServiceProvider())
    {
        var bytes = new byte[16];
        generator.GetBytes(bytes);
        var chars = bytes
            .Select(b => availableChars[b % availableChars.Length]);
        var token = new string(chars.ToArray());
        return uniqueId + token;
    }
} 
```

如果您对此有任何问题，请发表评论。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T01:08:17.267

Guid 并不意味着是一项安全功能。创建 Guid 的标准[没有声明它的安全性](https://stackoverflow.com/questions/3652944/how-securely-unguessable-are-guids?rq=1)，或者猜测的难易程度。**它只是声称它的独特性。**

如果您尝试使用 Guid 来保护您的系统，那么您将没有一个安全的系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T05:46:44.493

您可以通过使用随机密钥键入的 AES 计数器运行计数器来生成 128 位“随机”唯一数字。只要使用相同的键，就不会重复任何输出。

```
static byte[] AESCounter(byte[] key, ulong counter) {
    byte[] InputBlock = new byte[16];
    InputBlock[0] = (byte)(counter & 0xffL);
    InputBlock[1] = (byte)((counter & 0xff00L) >> 8);
    InputBlock[2] = (byte)((counter & 0xff0000L) >> 16);
    InputBlock[3] = (byte)((counter & 0xff000000L) >> 24);
    InputBlock[4] = (byte)((counter & 0xff00000000L) >> 32);
    InputBlock[5] = (byte)((counter & 0xff0000000000L) >> 40);
    InputBlock[6] = (byte)((counter & 0xff000000000000L) >> 48);
    InputBlock[7] = (byte)((counter & 0xff00000000000000L) >> 54);
    using (AesCryptoServiceProvider AES = new AesCryptoServiceProvider())
    {
        AES.Key = key;
        AES.Mode = CipherMode.ECB;
        AES.Padding = PaddingMode.None;
        using (ICryptoTransform Encryptor = AES.CreateEncryptor())
        {
            return Encryptor.TransformFinalBlock(InputBlock, 0, 16);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T20:01:58.300

获取所有用户登录凭据的 md5 并将其与 Guid.NewGuid().ToString() 生成的 guid 连接并在您的 url 中使用它，它应该可以正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T03:26:26.987

[编辑：我错过了上面对 RNGCryptoServiceProvider 的调用。对此表示歉意。]

对于您的案例，RNG 生成器（如 RNGCryptoServiceProvider）的问题在于它们不能保证唯一性。如您所知，Guid 在[统计上不太可能](http://blogs.msdn.com/b/ericlippert/archive/2012/04/30/guid-guide-part-two.aspx)是唯一的，但不能保证它是唯一的。保证唯一性和随机性的唯一真正方法是生成 GUID，就像您将它放在可搜索的存储中一样，例如数据库表。每当您生成一个新值时，请检查它是否已经存在。如果是，则丢弃它并生成一个新值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-05T17:34:55.620

在数据库中创建一个带有 linkID 和 Datesent 列的表，在生成链接时发送插入`DateTime.Now`到表中并返回 linkId，将 linkID 设置为activationLink 上的查询字符串参数。

在加载激活页面时检索linkId并使用它来调用一个存储过程，该过程将在将相应的linkId作为参数传递时返回日期，当您获取日期时，您可以添加您希望链接保持活动多长时间使用`.AddDays()`/ `.AddMonths`（这是日期时间的 C# 方法）。然后将您返回的日期与今天的日期进行比较。如果它已经过了几天或几个月的长度，则给出错误消息，否则继续并显示页面内容。

我建议您将页面内容保留在面板中并设置它，`visible = "false"`然后仅`visible="true"`在日期仍在范围内时才制作面板。

# forms - 在 Model 的 beforeSave 方法中从 Form 中获取数据

> ID：12240889
> 
> 赞同：3
> 
> 时间：2012-09-03T00:49:08.067
> 
> 标签：forms, cakephp, before-save

我已经创建了一个注册表单。我有 3 个选择框。日月年。在我的数据库中，我有一列名为“生日”，格式为“日期”。现在我想将所有三个放在一起并将结果插入数据库。

```
public function beforeSave($options = array()){
    $this->data['User']['Birthday'] = $this->data['User']['Year'] . '-' . $this->data['User']['Month'] .'-' . $this->data['User']['Day'];
    return true;
} 
```

但这不起作用:(

这些字段（日、月、年、生日）都没有验证规则。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T04:39:14.173

您可以在模型中尝试以下代码：

```
public function beforeSave($options = array()){
   if(!empty($this->data)){
       //pr($this->data);die;
       $this->data['User']['Birthday'] = date('Y-m-d', strtotime($this->data['User']['Year'] . '-' . $this->data['User']['Month'] .'-' . $this->data['User']['Day']));
      unset($this->data['User']['Year']);
      unset($this->data['User']['Month']);
      unset($this->data['User']['Day']);
   }
   return true;   
} 
```

您的表单中必须有以下表单字段：

```
<?php echo $this->Form->create('User', array('url' => $this->params));
      echo $this->Form->input('Year', array('options' => $year_options, 'type' => 'select'));
      echo $this->Form->input('Month', array('options' => $month_options, 'type' => 'select'));
      echo $this->Form->input('Day', array('options' => $day_options, 'type' => 'select')); 
```

# design-patterns - 动态提要还是手动提要？（用户活动）

> ID：12240891
> 
> 赞同：2
> 
> 时间：2012-09-03T00:50:16.447
> 
> 标签：design-patterns, feed

如果一个正在开发的网站应该在未来增长很多（比如数百万用户），我应该如何管理提要（用户的活动）？

1.  对于每个用户活动，我在一些 Feeds 表中手动创建一个 Feed 记录
2.  推断当下的提要

一个具体的例子如下：
用户可以被其他用户关注（比如 twitter），他们可以创建东西。如果我创建一个东西，这个东西就会有 CreationDate 和其他东西。我可以只使用连接或通过更新 Feeds 表来为我的追随者提供信息，以防有人停止关注我。

显然（1）难以维护但速度更快，（2）更容易，但我不确定它是否能处理这么多用户为可见性而加入等等......

Facebook是如何做到的？还是推特？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-25T10:39:07.260

我是 Feedly 的作者之一，这是一个帮助您构建提要系统的 Python 框架。

Feedly 可用于使用全推方式或推拉混合方式；在我们的文档中，我们提供了大量关于此的参考和解释。

[您可以在github](https://github.com/tschellenbach/Feedly)上找到该项目，并在[此处](https://github.com/tschellenbach/Feedly#background-articles)找到背景文章

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-08T00:22:38.287

我会推荐以下结构：

**具有 feed_id、feed_type_id、creator_id、created_date、display_date、status 等字段的feed 表**，其中 status 是活动的、隐藏的或停用的，您可以结合更新 display_date 字段来处理取消关注和重新关注，而无需创建附加记录

**带有字段 feed_type_id、feed_type_name 的**feed_type 表****

 ****跟随**带有字段 follow_id、feed_id、user_id 的表

**带有字段 post_id、feed_id、文本**的发布表****

 **...对于每个 feed_type 以此类推

虽然在 db 端设置需要更长的时间，但从长远来看，这将节省您的时间，因为每种提要类型都可以轻松继承所有常见字段，例如 creator_id、created_date、status 和 display_date，它们很好地对应于面向对象代码中的类，并且将更容易查找。例如，如果您每个用户都有一堵墙，那么您只需通过 creator_id 从 feed 表中选择，对于关注者活动的活动 feed，只需选择 creator_id 在用户的关注者中的 feed。

虽然您最终会得到更多表，但要管理的总字段和要编写的代码更少。这一切都是基于亚里士多德的按属种对事物进行分类的理论，即事物的共同点（属）和它们的具体差异（种）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-19T02:17:10.410

如果您正在寻找为您处理此问题的服务，Collabinate ( [http://www.collabinate.com](http://www.collabinate.com) ) 可能就是您要找的。它提供了一个 API 来为每个实体创建活动流，让用户关注实体，然后为用户检索实时提要。它可以根据您正在查看的大小进行缩放。完全披露：我是 Collabinate 的创建者。****

# java - 使用 JDBC 的内存泄漏应用程序

> ID：12240899
> 
> 赞同：4
> 
> 时间：2012-09-03T00:52:16.827
> 
> 标签：java, mysql, jdbc, memory-leaks

我正在使用**mysql-connector-java-5.1.21**并且我遇到了内存泄漏，Memory Analyzer 怀疑 java.lang.Class 和**mysql.jdbc**出现的最大实例之一。我已经浏览了代码并确保所有连接、结果和语句都正确关闭，但我仍然有泄漏。

```
1,529 instances of "java.lang.Class", loaded by "<system class loader>" occupy 711,632 (41.68%) bytes. 

Biggest instances:
•class com.mysql.jdbc.NonRegisteringDriver @ 0x381323f8 - 97,400 (5.70%) bytes. 
•class java.io.ObjectStreamClass$Caches @ 0x3d070568 - 91,872 (5.38%) bytes. 
•class java.lang.System @ 0x3d03da20 - 67,224 (3.94%) bytes. 
•class com.mysql.jdbc.SingleByteCharsetConverter @ 0x382a7438 - 66,032 (3.87%) bytes. 
•class java.lang.ref.Finalizer @ 0x3d03e260 - 65,888 (3.86%) bytes. 
•class com.sun.org.apache.xerces.internal.util.XMLChar @ 0x380bc528 - 65,592 (3.84%) bytes. 
•class com.mysql.jdbc.ConnectionPropertiesImpl @ 0x381ab5f8 - 32,456 (1.90%) bytes. 
```

代码在一个有延迟的循环中运行。目前，代码在每个间隔打开一个连接。我应该只打开一个连接并将其传递给我的方法吗？无论哪种方式，我都不确定为什么会导致泄漏。任何帮助表示赞赏。

这是一些代码，它应该让您对我如何使用 jdbc 和 mysql 有一个很好的了解。

```
 try {

        url+=database+"?zeroDateTimeBehavior=convertToNull"; 
        // LatestTime in SQL table defaults 0000-00-00 00:00:00 which java can't handle. zeroDateTimeBehaviour=convertToNull cause JDBC to null for a zero date.

        Class.forName("com.mysql.jdbc.Driver").newInstance();
        conn = DriverManager.getConnection(url,user,password);
        System.out.println(CurrentTime()+": "+"Connected to "+database);
    }
    catch (Exception e)     
    {

            System.err.println(CurrentTime()+": "+e.getMessage());
            System.err.println(CurrentTime()+": "+"Unable to Connect");
    }
    finally
    {
        if (conn!=null)
        {
            try {
                // Create Statements for SQL queries
                Statement query= conn.createStatement();

                // Get all records from phonelog which have yet to be processed
                query.executeQuery("SELECT * from phonelog where Recordnum>"+Recordnum);
                ResultSet rs = query.getResultSet();

                // Process each row from query result
                while (rs.next()) {
                }
                JDBCHelper.close(rs);

                String plupdate="update Counters set value='"+Recordnum+"' where name='plposition'";
                submit.executeUpdate(plupdate);
                JDBCHelper.close(query);
            }
            catch (SQLException SQLe) {
                System.err.println(CurrentTime()+": "+SQLe.getMessage());
            }

                JDBCHelper.close(conn);

                System.out.println (CurrentTime()+": "+"Disconnected");
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T03:56:30.800

Java 将创建对象并增加内存，直到其接近 -Xmx 最大堆大小设置，然后它将运行垃圾收集以释放空间。您应该使用 -Xmx 设置启动以控制 JVM 可以使用多少内存。您还应该知道，Connector/J JDBC 驱动程序默认将整个结果缓冲在内存中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T03:17:29.637

> 如果我使用 jconsole 执行垃圾收集，堆内存使用量会回落

那么它似乎没有泄漏; 也许您可以使用 -Xmx 标志来限制最大值来启动 JVM。分配给 JVM 的内存量。这可能会更频繁地触发 GC。

或者可能在您的循环中执行完整的 GC：System.gc() - 通常根本不推荐，但如果您的小型应用程序可能会成功。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T12:42:55.077

虽然我确实看到了一些等待垃圾收集的释放资源，但事实证明它主要是 JDBC 连接。重复打开和关闭连接会造成内存泄漏。我切换了代码，使其仅使用一个连接，而 jconsole 现在没有显示内存泄漏的迹象。应该**感谢 user1443778**建议我只需要一个连接。PreparedStatments 建议也很好，因为我重写了代码以使用它们。

也感谢您提出使用 ConnectionPool 的建议。这是一个很好的建议，但在我们使用 Tomcat 或 JBOSS 迁移到 VPS 之前，我可能不会为此烦恼。

# apache - URL重写并使用htaccess获取两个不同vars的查询字符串

> ID：12240903
> 
> 赞同：1
> 
> 时间：2012-09-03T00:52:39.470
> 
> 标签：apache, .htaccess

我想要做的是使用具有不同查询字符串的相同 URL 来访问两个不同的页面。

我现在拥有的是一个看起来像这样的 URL

`http://mysite.com/embed?a=somestring`和`http://mysite.com/embed?b=somestring`

我需要获得一个重写规则，该规则将根据查询变量是 a 还是 b 将两者都重定向到两个不同的 URL

下面的工作，但它匹配两个 URL 并将其发送到一个链接

```
RewriteRule ^embed$ index.php?page=embeda [QSA] 
```

如果我做这两个它不起作用，并且总是匹配第一个。

```
RewriteRule ^embed$ index.php?page=embeda [QSA]
RewriteRule ^embed$ index.php?page=embedb [QSA] 
```

不知道如何为此做两个不同的重写。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T01:19:43.563

使用[RewriteCond 指令](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritecond)并检查`%{QUERY_STRING}`.

```
RewriteCond %{QUERY_STRING} \ba=
RewriteRule ^embed$ index.php?page=embeda [QSA]

RewriteCond %{QUERY_STRING} \bb=
RewriteRule ^embed$ index.php?page=embedb [QSA] 
```

RewriteCond 实际上只是一个条件语句，一个 if 语句。注意`\b`模式中的位，它是一个[字边界](http://www.regular-expressions.info/wordboundaries.html)。我把它放在那里是为了确保即使在“b”之前还有其他查询字符串参数也能正常工作。

# java - 将整数添加到 HashMap

> ID：12240904
> 
> 赞同：0
> 
> 时间：2012-09-03T00:52:42.787
> 
> 标签：java, iterator, hashmap

我有一个`HashMap`我正在向其中添加数组中的整数。键是整数，值是整数的重复数。当我遍历`HashMap`以获取其中的键时，`HashMap`它们似乎是随机顺序的。添加这些键是否有任何特定顺序？这就是我迭代的方式。

```
 Set<String> a = names.keySet();
        Iterator i = a.iterator();

        while(i.hasNext())
            String t = (String) i.next(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T00:56:14.850

实际上，`HashMap`以不确定（不可预测/不可靠）的顺序返回条目。如果您希望条目按键顺序显示（so, `2`before `3`），请使用`TreeMap`( [javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/TreeMap.html) )。如果您希望条目按初始插入的顺序显示，请使用`LinkedHashMap`( [javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashMap.html) )。

* * *

**编辑添加：**您说“关键是整数”，但随后您`String`到处使用。请注意，字符串`"123"`排序*在*字符串之前`"23"`，就像`"abc"`排序之前一样`"bc"`。如果您希望您的键被视为数字，例如按数字顺序排序，那么您应该使用数字类型，例如`Integer`，而不是`String`。（从技术上讲，可以通过检查它们的内容并进行整数比较来为您`TreeMap`提供`Comparator<String>`比较字符串值键的 a，但我认为您不想这样做。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T00:57:02.347

来自[JavaDocs](http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html)

> 这个类（HashMap）不保证地图的顺序；特别是，它不保证订单会随着时间的推移保持不变

如果您希望它们以“自然顺序”排列，则可以使用[SortedMap 。](http://docs.oracle.com/javase/7/docs/api/java/util/SortedMap.html)

如果您希望按`Iterator`添加的顺序返回键，您可以改为[LinkedHashMap](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashMap.html)

> 这个链表定义了迭代顺序，通常是键插入映射的顺序（插入顺序）

# php - 将套接字资源转换为流套接字

> ID：12240905
> 
> 赞同：31
> 
> 时间：2012-09-03T00:53:18.580
> 
> 标签：php, sockets, stream

PHP 有两种不同的 API 用于与套接字交互。有基本包装了 C 套接字 API 的低级套接字 API。还有高级流套接字 API，它实现了 PHP 流接口。

不幸的是，流套接字 API 不支持设置低级套接字选项。然而，这是我必须做的事情。同样，套接字 API 不支持使用标准函数调用，如`fread`,`fwrite`和`fclose`，使其与我的其余代码不兼容。

PHP 5.4 引入了[socket_import_stream](http://php.net/socket_import_stream)函数。这允许您获取流套接字并获取底层套接字资源。我的计划是使用它来创建流套接字，获取套接字，在其上设置一些选项，然后继续使用原始流套接字。

这对我不起作用的原因是我需要在绑定之前设置选项。绑定流套接字的唯一方法是使用已经执行绑定的[stream_socket_server 。](http://php.net/stream_socket_server)这就是为什么我不能使用它。

我现在正在寻找 , 的倒数`socket_import_stream`，以便我可以将我的套接字资源转换为流套接字。我一直没能找到这样的功能，但我希望一些非常聪明的人可以帮助我。或者向执行此操作的 PHP 源提交补丁。或者给我一些关于编写这样一个补丁的提示。

编辑：我有一些代码作用于 PHP 流以从中解析 DNS 数据包。我想通过启用多播的套接字重新使用该代码。我无法在流套接字上启用多播，也无法在原始套接字上使用流函数。

EDIT2：我想将此流与 一起使用`stream_select`，因此不幸的是，自定义流包装器不是一种选择。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T17:13:05.120

您可以结合使用[stream_wrapper_register](http://php.net/manual/en/function.stream-wrapper-register.php)函数和实现[streamWrapper](http://php.net/manual/en/class.streamwrapper.php)模板的类来创建多播套接字流。这将允许您利用所有内置的流函数，尽管它不如 socket_export_stream 方便。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-10T15:01:46.857

> 这对我不起作用的原因是我需要在绑定之前设置选项。绑定流套接字的唯一方法是使用已执行绑定的 stream_socket_server。这就是为什么我不能使用它。

[`stream_socket_server()`](http://php.net/manual/en/function.stream-socket-server.php)is的第四个参数`$flags`，默认为[`STREAM_SERVER_BIND | STREAM_SERVER_LISTEN`](http://php.net/manual/en/stream.constants.php)，所以不要省略，给`0`（或其他标志）。

完成所有设置后，您仍然可以使用`socket_bind()`&手动绑定（& 监听）该套接字`socket_listen()`。

我没试过，只是一个想法。

# android - Android OpenGL deltaTime Measure问题

> ID：12240912
> 
> 赞同：0
> 
> 时间：2012-09-03T00:55:14.837
> 
> 标签：android, opengl-es

我正在像这样测量 deltaTime：

```
deltaTime = (System.nanoTime()-startTime) / 1000000000.0f;
            startTime = System.nanoTime(); 
```

但是我总是得到不同的浮点值，因此我的游戏口吃。这可能是什么问题？

```
09-03 03:51:59.219: D/a(21807): 0.017184043
09-03 03:51:59.234: D/a(21807): 0.016405167
09-03 03:51:59.249: D/a(21807): 0.018071748
09-03 03:51:59.269: D/a(21807): 0.015293334
09-03 03:51:59.284: D/a(21807): 0.016080335
09-03 03:51:59.299: D/a(21807): 0.018669458
09-03 03:51:59.314: D/a(21807): 0.014720625
09-03 03:51:59.334: D/a(21807): 0.01605596
09-03 03:51:59.349: D/a(21807): 0.017086169 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T01:24:12.063

如果您每帧都执行此代码，这意味着这是渲染 1 帧所需的时间。

您应该根据 进行计算`( x distance per second ) * deltaTime`，因此您将获得基于每秒帧数的平滑动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T03:34:35.793

这是来自“Beginning Android Games”的伪代码片段：

```
float lastFrameTime = currentTime();
while(!userQuit()) {
    float deltaTime = currentTime() – lastFrameTime;
    lastFrameTime = currentTime();
    currentScreen.updateState(input, deltaTime);
    currentScreen.present(graphics, audio, deltaTime);
} 
```

不确定这是否会有所帮助...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T16:55:55.327

开始 Android 游戏不是一本好书。

如果您在每一帧测量增量，您的计算每次都将使用不同的值。这对抛射体运动和非平凡的物理产生了非常糟糕的结果。为获得最佳结果，请将 delta 固定为一个合理的值（即 1/60），如果自开始以来小于 1/60，则让线程在所有绘图结束时等待。

# jquery - 砌体浮动：左和最大宽度

> ID：12240917
> 
> 赞同：2
> 
> 时间：2012-09-03T00:56:21.927
> 
> 标签：jquery, html, css, jquery-masonry

```
<style>

#container {
  float: left;
  max-width: 900px;
}

.item {
 float: left;
 width: 300px;
}

</style>

<div id="container">

  <div class="item">Much of Text</div>
  <div class="item">Much of Text</div>
  <div class="item">Much of Text</div>
  <div class="item">Much of Text</div>
  <div class="item">Much of Text</div>
  <div class="item">Much of Text</div>
  <div class="item">Much of Text</div>

</div> 
```

我让 Mansory 在所有情况下都工作得很好：

*   仅适用于`#container` `max-width`财产
*   并且`float: left`独自一人

`float: left`但遗憾的是，如果同时应用&的组合，它就不起作用`max-width`。

1.  如何使它以这种方式工作以及为什么在应用两个 CSS 属性后它无法工作？
2.  我需要向左浮动`#container`，同时需要`max-width`在它上面。有没有可能以某种方式做到这一点？我尝试使用 float: left on container's parents 但没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T06:20:52.370

Masonry *#container*必须相对定位，*.masonry-brick*元素由布局引擎绝对定位 - 这就是 Masonry 自动计算元素定位的重点。如果您自己更改*.masonry-brick*元素的位置，您就是在使用扳手。请参阅[文档](http://masonry.desandro.com/)和那里的许多示例。要更改*#container*的位置，只需使用 Chrome 的 devtools 观察其他示例，以了解如何使用前面的元素、边距和填充将其放置在您想要的位置。

# javascript - HEAD 中 LINK 和 STYLE 元素的求值顺序

> ID：12240920
> 
> 赞同：4
> 
> 时间：2012-09-03T00:57:32.710
> 
> 标签：javascript, html, css, dom, stylesheet

在我看来，所有现代浏览器，包括最新版本的 Chrome、Safari 和 FireFox（可能从一开始）都尊重 ; 中的元素的顺序`style`和`link`元素`head`。即使在运行时使用 JavaScript 动态创建和添加时也是如此。

比如这里`red.css`和`green.css`都指定body背景颜色；第一个将主体背景设置为红色，第二个将其设置为绿色：

```
<head>
    <!-- other code -->
    <link rel="stylesheet" href="red.css" type="text/css">
    <link rel="stylesheet" href="green.css" type="text/css">
</head> 
```

结果是主体的背景颜色为绿色，因为`green.css`它被放置在之后`red.css`并在之后进行评估。

即使`link`元素是动态创建并插入到头部的，元素的顺序似乎也是正确的。例如，动态创建一个`link`加载的元素`green.css`只会将主体背景颜色设置为绿色，如果它插入到`red.css`.

然而，唯一似乎不尊重这一点的浏览器是 Internet Explorer（至少 IE 7-9 不这样做）。看来，对于 IE，最近添加的元素`link`或`style`元素是在已经评估的所有内容之上评估的；在运行时添加时，它不尊重树顺序。

是否尊重订单非标准行为，或者这是 Internet Explorer 错误？如何为 Internet Explorer 解决此问题？

我提出的一个想法（可行）是动态删除所有现有元素`link`并`style`以相同的树顺序将它们添加回来——这是我希望它们被评估的顺序。

任何见解将不胜感激。

**更新**

这是根据要求提供的更详细的代码示例：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="red.css" type="text/css"> <!-- sets red -->
</head>
<body>

<script type="text/javascript">

    setTimeout(function() {

        // IE7-8 does not support referencing document.head
        var head = document.getElementsByTagName("head")[0];

        var link = document.createElement("link");
        link.setAttribute("href", "green.css");
        link.setAttribute("rel", "stylesheet");
        link.setAttribute("type", "text/css");

        // All modern browesers will leave the background
        // color red, except IE will set it green.
        head.insertBefore(link, head.firstChild);

        // Now comment out the above line and try adding the link
        // using this instead. All modern browsers (including IE)
        // will set the body background color green after two seconds.
        // IE seems to always evaluate the last dynamically added link.

        // head.appendChild(link);

    }, 2000);

</script>

</body>
</html> 
```

内容`red.css`：

```
body { background-color: red; } 
```

内容`green.css`：

```
body { background-color: green; } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T02:02:58.983

如果您不是重新附加样式表，而是切换他们的一个属性来强制重新渲染怎么办？例如，您可以尝试遍历所有`link`/`style`元素，将它们的`media`属性设置为`none`，然后将其重新设置回原来的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T06:24:29.340

您没有告诉我们您真正试图通过插入样式表来解决什么问题的详细信息，但很可能有更好的方法来解决实际问题，而不是按特定顺序动态插入样式表列表。

例如，您可以同时拥有两个样式表（稍微修改以关闭另一个类），并通过向`<body>`标签添加或删除单个类，您可以触发从绿色到红色的更改，反之亦然。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T01:13:29.477

您指的是 CASCADING - CASCADING 样式表 (CSS) 工作方式的一个非常重要的功能。所有浏览器都以这种方式工作，包括 IE。如果他们没有级联，那将是一个大问题。

但是，有些样式在某些版本的 IE 中不起作用 - 也许您正在查看的是样式不能正常工作，而不是级联不能正常工作。你想发布一个具体的例子吗？

# html - 如何为列表中的图像启动链接？

> ID：12240921
> 
> 赞同：0
> 
> 时间：2012-09-03T00:58:18.590
> 
> 标签：html

我的清单项目如下：

```
<ul>
<li onclick="myAction();">
<h1>stuff</h1>
<img src="image.gif"/> 
```

我想向 img 添加一个 rul，我尝试添加一个 href 作为 img 的属性，但是当我单击图像时 myAction() 被调用而不是加载链接。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T01:02:42.843

如果要使图像成为链接，则必须将其包装在锚标记中

```
<ul>
    <li onclick="myAction();">
        <h1>stuff</h1>
        <a href="http://website.com"><img src="image.gif" alt="" /></a>
    </li>
</ul> 
```

# php - PHP 会话 ID 字符串的长度是多少？

> ID：12240922
> 
> 赞同：42
> 
> 时间：2012-09-03T00:59:11.323
> 
> 标签：php, mysql, session, sessionid

我正在 MySQL 数据库中创建一个表来保存一些会话数据，包括`session_id`. `VARCHAR`存储`session_id`字符串的长度应该是多少？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-09-03T01:02:36.340

取决于[session.hash_function](http://php.net/manual/en/session.configuration.php#ini.session.hash-function)和[session.hash_bits_per_character](http://php.net/manual/en/session.configuration.php#ini.session.hash-bits-per-character)。

查看[session_id](http://php.net/manual/en/function.session-id.php)页面了解更多信息。

> 您设置的 session.hash_bits_per_character 越高，您的 session_id 就越短，因为每个字符使用更多位。可能的值为 4、5 或 6。
> 
> 当使用 sha-1 进行散列时（通过设置 ini_set('session.hash_function', 1)，以下会话字符串长度由三个 session.hash_bits_per_character 设置产生：
> 
> 4 - 40 个字符的字符串
> 
> 5 - 32 个字符的字符串
> 
> 6 - 27 个字符的字符串

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2014-03-14T09:26:19.123

@sachleen 答案不完整。[此处](http://forums.devnetwork.net/viewtopic.php?f=34&t=88685)
描述了有关会话 ID 长度的更多详细信息。

概括：

```
128-bit digest (MD5)  
4 bits/char: 32 char SID    
5 bits/char: 26 char SID    
6 bits/char: 22 char SID

160-bit digest (SHA-1)
4 bits/char: 40 char SID    
5 bits/char: 32 char SID    
6 bits/char: 27 char SID 
```

和示例正则表达式来检查会话 id：

```
preg_match('/^[a-zA-Z0-9,-]{22,40}$/', $sessionId) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-03T01:01:51.207

这取决于这些配置设置： **[session.hash_function](http://php.net/manual/en/session.configuration.php#ini.session.hash-function)**和**[session.hash_bits_per_character](http://php.net/manual/en/session.configuration.php#ini.session.hash-bits-per-character)**

较短的会话 ID 长度具有较高的冲突机会，但这也很大程度上取决于 ID 生成算法。给定默认设置，会话 ID 的长度应该适合大多数应用程序。对于更高安全性的实现，您可以考虑查看 PHP 如何生成其会话 ID 并检查它是否在密码学上是安全的。如果不是，那么您应该使用加密安全的随机源来滚动您自己的算法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-10T12:12:48.117

我不知道我的应用程序将用于何处，然后我将其设置为：VARCHAR(127) 并希望它对未知的 MySQL 用户有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-18T06:59:23.177

通过常规 php 安装长度始终为 26 (exmp: psprdaccghmmre1oo2eg0tnpe6)

# ruby-on-rails - Rails2 - 未初始化的常量 My::User::ApplicationHelper

> ID：12240923
> 
> 赞同：0
> 
> 时间：2012-09-03T01:00:00.420
> 
> 标签：ruby-on-rails, ruby

我有一个包含在插件中的类，其中包含以下行

用户.rb

```
class My::User < My::AbstractModel
  delegate :message_t, :to => ApplicationHelper

  #omited
end 
```

所以我需要在这个模型中调用application_helper.rb中定义的*'message_t'*函数，

但是，Jenkins 未能对其进行测试，并给出错误*“未初始化的常量 My::User::ApplicationHelper”*，所以我想用户模型是在 application_helper.rb 之前加载的。我该如何解决？有没有其他方法可以调用 *'message_t'* 或者我可以更改文件加载顺序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T03:54:07.950

您无法从模型层访问 rails 助手。帮助器旨在协助呈现，并由视图（有时是控制器）层使用。

此外，`delegate`用于将消息传输到直接关联的模型 - 而不是任意类。

我建议将该`message_t`方法从 ApplicationHelper 中移出到您的模型可能需要的某个库文件中。然后使用代理对象来调用它，而不是使用`delegate`. 或者你可以为此目的关联一个代理对象，`delegate`如果你喜欢它的声音就使用它:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T04:09:32.967

你可以`require 'application_helper'`在你的模型中。它将确保 application_helper 在您的模型之前加载。

# c - 符号扩展1位2的补码？

> ID：12240925
> 
> 赞同：1
> 
> 时间：2012-09-03T01:00:25.840
> 
> 标签：c, binary, twos-complement

我是一名学生，我正在用 C 语言编写一个函数来对给定的位域进行符号扩展。我正在使用 32 位。

我在谷歌上查找了这个答案，但没有找到我要找的东西。

我正在编写一个函数，它返回从 32 个整数中提取的一个或多个连续位的二进制补码表示。最左边的位是符号位。

如果我拉一点点，我会返回什么？您如何将单个位表示为带符号的二进制补码数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T01:25:05.780

据我了解，您想从 32 位变量中的位流中提取 N 个任意位（N >= 1 & <=32），并将它们表示为 2 的补数（大概将该数字作为有符号 int 32 返回）。

这就是说，您获取选定的位，将它们放在工作变量的低位（即右）端，然后通过向左传播（复制）剩余的位来“扩展”最左侧的选定位工作变量中的（以前未定义）位。这可以作为一个单一的一致算法来完成，不需要对 N 的任何特定值进行特殊处理。

对于两个位，它将产生可能的值 1、0、-1 和 -2（分别用于位模式 01、00、11 和 10）。对于一位，它将产生可能的值 0 和 -1（分别用于位模式 0 和 1）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T01:07:51.590

谈论 1 位二进制补码数没有多大意义。如果您只有 1 位，则为 0 或 1。

一般来说，如果你有一个 N 位的二进制补码数，可表示的最大值是`2^(N-1)-1`，最小值是`-2^(N-1)`。如果我们想傻，我们可以将它应用于 N=1，我们发现 1 位二进制补码的范围可以从 -1 到 0。

**编辑：** 您写道：

> 我正在编写一个函数，它返回从 32 个整数中提取的一个或多个连续位的二进制补码表示。最左边的位是符号位。

我不认为这是很好定义的。 *二进制补码*是一种编码，可让您将数学整数表示为一系列位。给定一个整数，它会告诉您要存储哪些位。我不知道一系列位的二进制补码表示是什么。这就像你要我给你一系列任意字节的 ASCII 编码，或者你要我把葛底斯堡地址从法语翻译成英语。

# c - 为什么我会收到“使用未声明的标识符‘malloc’”？

> ID：12240926
> 
> 赞同：8
> 
> 时间：2012-09-03T01:00:33.327
> 
> 标签：c, xcode

我正在试验 XCode 并试图编译别人的 Windows 代码。

有这个：

```
inline GMVariable(const char* a) {
    unsigned int len = strlen(a);
    char *data = (char*)(malloc(len+13));
    if(data==NULL) {
    }
    // Apparently the first two bytes are the code page (0xfde9 = UTF8)
    // and the next two bytes are the number of bytes per character (1).
    // But it also works if you just set it to 0, apparently.
    // This is little-endian, so the two first bytes actually go last.
    *(unsigned int*)(data) = 0x0001fde9;
    // This is the reference count. I just set it to a high value
    // so GM doesn't try to free the memory.
    *(unsigned int*)(data+4) = 1000;
    // Finally, the length of the string.
    *(unsigned int*)(data+8) = len;
    memcpy(data+12, a, len+1);
    type = 1;
    real = 0.0;
    string = data+12;
    padding = 0;
} 
```

这是在头文件中。

它呼唤我

> 使用未声明的标识符“malloc”

也适用于 strlen、memcpy 和 free。

这是怎么回事？抱歉，如果这非常简单，我是 C 和 C++ 的新手

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-03T01:10:17.157

XCode 告诉您您正在使用称为 malloc 的东西，但它不知道 malloc 是什么。最好的方法是将以下内容添加到您的代码中：

```
#include <stdlib.h> // pulls in declaration of malloc, free
#include <string.h> // pulls in declaration for strlen. 
```

在 C 和 C++ 中以 # 开头的行是预处理器的命令。在此示例中，命令 #include 提取另一个文件的完整内容。就好像您自己输入了 stdlib.h 的内容一样。如果右键单击#include 行并选择“转到定义”，XCode 将打开 stdlib.h。如果您通过 stdlib.h 搜索，您会发现：

```
void    *malloc(size_t); 
```

它告诉编译器 malloc 是一个可以使用单个 size_t 参数调用的函数。

您可以使用“man”命令来查找要包含哪些头文件以用于其他功能。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-03T01:09:26.210

在使用这些函数之前，您应该包含提供其原型的头文件。

对于 malloc & free 它是：

```
#include <stdlib.h> 
```

对于 strlen 和 memcpy 它是：

```
#include <string.h> 
```

您还提到了 C++。这些函数来自 C 标准库。要从 C++ 代码中使用它们，包含行将是：

```
#include <cstdlib>
#include <cstring> 
```

但是，您很可能在 C++ 中做不同的事情，而不是使用这些。

# javascript - 图像阵列预加载显示沙漏光标，同时预加载

> ID：12240927
> 
> 赞同：1
> 
> 时间：2012-09-03T01:01:03.123
> 
> 标签：javascript, preload

我正在使用以下脚本预加载图像；想知道如何在等待完成预加载时显示沙漏光标。

```
function preload_images() {

            var i;
            for (i = 1; i < sl; i++) {
                images[i] = new Image();
                $('#selector').css('cursor', 'wait');
                var name = impath.toString() + imStart.toString() + i + ext;
                images[i].src = 'ImageHandler.ashx?img=' + name + '&window=50&level=50 &slice=0';
                $('#selector').css('cursor', 'default');
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T01:09:38.610

使用图像的`load`和`error`（以防任何图像未加载）事件来计算已加载的图像数量，以及当所有加载时移除光标。

```
 function preload_images() {
        var i, count = 0;
        $('#selector').css('cursor', 'wait');
        for (i = 0; i < sl; i++) {
            images[i] = new Image();
            var name = impath.toString() + imStart.toString() + i + ext;
            image[i].onload = image[i].onerror = function(){
                count++;
                if (count == sl){
                    $('#selector').css('cursor', 'default');
                }
            }                
            images[i].src = 'ImageHandler.ashx?img=' + name + '&window=50&level=50 &slice=0';
        }
    } 
```

# php - 使用ffmpeg直接上传到s3？

> ID：12240931
> 
> 赞同：3
> 
> 时间：2012-09-03T01:02:01.120
> 
> 标签：php, amazon-s3, ffmpeg

我有用于将文件转换为 mp3 扩展名的 PHP 脚本。首先，用户将文件上传到 EC2 服务器。从那里，我可以使用 ffmpeg 处理文件并将其直接上传到 S3 吗？

如何上传文件，使用 ffmpeg 处理/转换并上传到 s3 存储桶？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T11:03:07.657

您可以将 s3 挂载到 ec2 实例上，然后提供 s3 挂载文件夹的路径。[至少在 Linux 上]。s3fs 和其他实用程序允许您执行此操作。所以是可行的。但是您的写入速度可能会受到限制。但是，如果您不是在做非常大的文件，或者没有受到性能影响的影响，这很好。

# erlang - 尖括号之间的内容被 Erlang 的 common_test 框架默默丢弃

> ID：12240932
> 
> 赞同：2
> 
> 时间：2012-09-03T01:02:01.370
> 
> 标签：erlang

当我使用 io:format/2 打印一些信息时，我发现尖括号之间的内容被无声地扔掉了。

请看下面的例子： 1) 测试套件

```
-module(ioformat_SUITE).
-compile(export_all).
all() ->
    [test_ioformat].

test_ioformat(_) ->
    Expected = 
        [
         <<"NoMethod <ATestMessage>\r\n">>
        ],
    io:format("ExpectedASCII:~n~p~n",[Expected]),
    io:format("ExpectedBINARY:~n~w~n",[Expected]). 
```

2) 运行测试套件
ct_run -suite ioformat_SUITE

3）检查测试用例的日志

预期ASCII：

[<<"NoMethod \r\n">>]

预期二进制：[<<78,111,77,101,116,104,111,100,32,60,65,84,101,115,116,77,101,115,115,97,103,101,62,13,10>>]

=== 结束于 2012-09-03 08:48:04

4）我们可以看到日志中不存在“ATestMessage”。此内容被 common_test 默默丢弃。

这是 common_test 中的错误吗？有什么解决方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T07:27:23.130

我很确定 Common Test 没有吃掉你的信息。如果您在浏览器中打开日志，请查看页面源代码。我敢打赌你的 HTML 标签就在那里，只是浏览器没有呈现。关于什么：

```
Expected = 
    [
     <<"NoMethod &lt;ATestMessage&gt;\r\n">>
    ], 
```

# php - 声明php类成员变量

> ID：12240935
> 
> 赞同：4
> 
> 时间：2012-09-03T01:02:35.287
> 
> 标签：php

我试图以如此简单的方式编写一个类

```
class piklu
{
   private $x=5;
   public function display()
   {
      echo $this->$x;
   }
} 
```

但是在创建此类的对象后，我正在调用函数 display 它显示错误未知变量 $x。任何人都可以建议我在 php.ini 中声明一个私有成员变量究竟需要做什么。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-03T01:08:19.360

您的 echo 语句不正确，这是您的问题。它应该是：

```
public function display()
{
    echo $this->x;
} 
```

请注意，这里只有一个`$`：就在关键字之前`this`。你错误地有两个美元符号。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-03T01:09:51.030

你在调用变量时犯了一个小错误。您可以通过调用类成员变量

```
$this->x 
```

# bash - 在 Bash 中将波浪号回显到文件而不扩展它

> ID：12240940
> 
> 赞同：7
> 
> 时间：2012-09-03T01:02:52.993
> 
> 标签：bash, escaping, tilde

我需要在 Bash 脚本中向文件写入参数，所以我正在做这样的事情，

```
echo "Argument is: $1" >> file 
```

问题是，如果参数中有波浪号 (~)，我不希望它扩展到主目录。因此，如果用户将 ~/bin 作为参数传递给脚本，它将被写为 ~/bin 而不是 /home/user/bin。我该怎么做呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T01:29:59.987

我假设您的程序启动为：

```
$ your_prog ~/foo 
```

该参数甚至在您的程序启动之前就被翻译了，因此除了教育用户在不需要扩展时适当地引用之外，您无法采取任何措施来阻止它：

```
$ your_prog "~/foo" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-03T01:13:17.030

您可以使用`read`命令来接受用户输入。

```
read var
echo "$var" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-03T02:53:51.267

[查尔斯达菲](https://stackoverflow.com/a/12241064/368630)有正确的答案。您的程序的行为完全符合预期。试试这些：

```
$ echo The HOME directory is ~
$ echo "The HOME directory is ~" 
```

您会看到，仅将波浪号放在引号中就可以防止扩展。

尽管您引用了引号，但您看不到波浪号的原因是，shell 在您的程序甚至将波浪号作为参数获取之前扩展了波浪号。

Unix 中的 shell 本身就是一个非常强大的生物。它处理变量和特殊字符的扩展，例如`~`and `*`，因此您的程序不必这样做。

正如一位老教授曾经告诉我的那样，“这很好，除非它不是”。在这种特殊情况下，“不是”。Unix shell 阻止你看到你想要的东西。

解决这个问题的唯一方法是摆脱外壳。您可以通过使用该`read`语句来做到这一点。

# email - 詹金斯发送相同的电子邮件所有构建状态

> ID：12240941
> 
> 赞同：2
> 
> 时间：2012-09-03T01:02:53.257
> 
> 标签：email, jenkins, jenkins-plugins

我设法在 Jenkins 中克隆了 GIT hub repo，现在尝试在 Jenkins 中构建获取的 maven 项目。我从 GITHUB 获取了 7 个项目，它们相互依赖，即一些项目在其 POM 中为其他项目定义了依赖项。我有一项使用根级别 pom.xml 定义的作业，指定所有子项目都将构建为 multi-module 。一切顺利，jenkins 很好地构建了子项目和父项目。但是，无论子项目的构建状态如何，即构建成功或构建失败..jenkins 总是发送带有**“Jenkins build is back to normal”的电子邮件**一旦父项目完成构建并触发子项目的构建 - 这根本没有意义。我已经配置了子级项目，即用于电子邮件通知的模块，但它被我父项目的电子邮件设置覆盖，并且总是触发相同的电子邮件。以前有人遇到过同样的问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T04:49:47.567

试试[email-ext 插件](http://wiki.hudson-ci.org/display/HUDSON/Email-ext+plugin)。虽然这不是你问题的直接解决方案，但这个插件比默认插件好得多；当您在此处使用选项时，它还将为您提供诊断功能，`Pre-send Script`您可以设置/取消设置或打印变量以查看控制是否到达正确的位置。

# url - 使用 URL Nonce（使用 MD5 哈希）将两个页面强链接在一起。还有其他方法可以做到这一点吗？

> ID：12240942
> 
> 赞同：0
> 
> 时间：2012-09-03T01:03:10.637
> 
> 标签：url, hash, linked-list, md5, nonce

因此，我正在做一个项目，其中有两个页面 page_1 和 page_2，其中 page_2 仅在引荐来源为 page_1 时才会加载。

我最终使用来自：http://fullthrottledevelopment.com/php-nonce-library 的 URL Nonce[来](http://fullthrottledevelopment.com/php-nonce-library)构建它：[http ://chrisbrittain.com/strong_links/page_1.php](http://chrisbrittain.com/strong_links/page_1.php)

这是我的帖子解释它：[http ://chrisbrittain.com/strongly-linking-pages-together-via-url-nonces/](http://chrisbrittain.com/strongly-linking-pages-together-via-url-nonces/)

这里的总体目标是两个页面都在网络上面向公众。第 2 页有我希望其他人看到的“秘密”数据，但我不想让那个人登录任何东西。

因此，相反，我只想通过电子邮件向他发送一个链接，该链接会将他带到“秘密页面”......除了我通过电子邮件发送链接的人之外，没有其他人可以访问该页面。

该解决方案基本上使用两个页面之间的随机数握手。nonce 作为 GET 变量传递，在第 2 页上，使用 GET 传递的 nonce 和第 1 页和第 2 页上相同的秘密字符串计算 MD5 哈希。

问题！！！（对不起，我啰嗦了这么多。）

1.  有没有更好的行业标准方法来做到这一点？

2.  我在这个实现中看到的唯一真正的弱点是暴力 URL 检查（我相信它可以被 fail2ban 或其他方法阻止。）....还有其他 obvi 设计缺陷吗？

3.  我知道 MD5 哈希现在被认为是坏的，但在这个实现中我认为它是安全的，因为我的假设是在这里击败系统的唯一方法是暴力 URL 检查（如所说可以作为 DDoS 攻击停止） .

无论如何...感谢您的阅读，任何评论/批评都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T01:14:22.103

除非您信任此人，否则无法安全地控制对第 2 页的访问。您需要的访问控制量取决于您信任的人或您信任他们不会执行的操作。

如果您不能信任您授予访问权限的人，那么如果他们共享链接，那么任何人都可以访问该页面。

如果您可以信任您授予访问权限的人，那么一个秘密网址就足够了。也就是说，如果您将 page2 命名为某个秘密文件名，那么除了确保您的网络服务器没有列出所有页面的 index.html 页面外，几乎没有其他事情可做。

如果 page2 是动态的，和/或它必须位于该文件名，您可以简单地使用秘密查询字符串，例如：`page2.html?secret=assdfadg`. 在这种情况下，秘密就像密码一样。

显然，上述两种情况意味着该人可以非常轻松地共享链接。如果您给他们一个密码，人们可能不太愿意分享链接。

您可以通过简单地共享链接（意外）来阻止公众访问 page2 的方法是：

*   使用密码
*   检查 HTTP_REFERER（确保它来自 page1）

但是，如果您确保 HTTP_REFERER 来自 page1，则共享到 page1 的链接将同样容易地允许公共访问 page2。此外，HTTP_REFERER 很容易被欺骗。

* * *

## 概括

除非您信任您授予访问权限的人，否则您无法确保访问安全。如果您信任他们，那么一个非常简单的解决方案就足够了。

# javascript - 尝试在 Magento 中调用 OneStepCheckout 更新返回 url 错误？

> ID：12240952
> 
> 赞同：2
> 
> 时间：2012-09-03T01:05:42.633
> 
> 标签：javascript, jquery, magento

我正在使用以下代码尝试在 magento 中更新 OneStepCheckout 的付款方式，但它似乎不起作用，查看 firebug 中的问题显示 url 为红色。

```
jQuery(document).ready(get_separate_save_methods_function('/onestepcheckout/ajax/set_methods_separate', true)); 
```

关于我可能做错了什么的任何想法？

# mysql - 将文本文件数据导入 MySQL 中的行

> ID：12240953
> 
> 赞同：3
> 
> 时间：2012-09-03T01:05:52.400
> 
> 标签：mysql, sql

我有一个文本文件，其中包含这种格式的行：

com1,System Access,MinimumPasswordAge,1
com1,System Access,MaximumPasswordAge,42
com1,System Access,MinimumPasswordLength,7

我希望以以下格式将这些数据导入 3 个单独的行：

列中的“com1”，`ID`列中的
“系统访问权限”，`Audit_Type`列中的
“MinimumPasswordAge”，`System_Setting`列中的
“1” `Actual_Value`。

我在 Windows 7 SP1 中使用 MySQL 查询浏览器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T01:09:27.033

1.  创建表来保存您的数据。

2.  创建 CSV 文件。不要包括字段标题。

3.  打开 MySQL 查询浏览器并运行 SQL：

* * *

```
load data local infile 'fullpath.csv' into table tableName
fields terminated by ','
lines terminated by '\n'
(ID, Audit_Type, System_Setting, Actual_Value); 
```

**注意：** 如果您在 Windows 系统上生成了文本文件，则可能必须使用`LINES TERMINATED BY '\r\n'`才能正确读取文件，因为 Windows 程序通常使用两个字符作为行终止符。

* * *

**更新 1**

如您所见，`3 out of 81`仅插入记录

com1,System Access,MinimumPasswordAge,1
com2,System Access,MinimumPasswordAge,1
com3,System Access,MinimumPasswordAge,1

其他人失败

com1,Event Audit,AuditSystemEvents,0
com2,Kerberos Policy,MaxTicketAge,10
com3,系统访问,NewAdministratorNameAdministrator,1

这是因为您将列设置`ID`为主键。`com1, com2, com3`已经存在于桌子上了。*根据定义*，**主键是**唯一**的**。能够插入所有行的最佳方法是创建另一个自动递增的列并将其设置为主键。

 ***```
Create Table system_settings
(
    RecordID int NOT NULL AUTO_INCREMENT,
    ID VARCHAR(30),
    Audit_Type VARCHAR(30), 
    System_Setting VARCHAR(30), 
    Actual_Value int,
    CONSTRAINT table_PK PRIMARY KEY (RecordID) 
) 
```***

# ruby-on-rails - 急切的加载未加载到导轨中

> ID：12240955
> 
> 赞同：0
> 
> 时间：2012-09-03T01:06:37.377
> 
> 标签：ruby-on-rails, eager-loading

嗨，我在这里错过了什么吗？我阅读了有关在加载时包含连接的文档，并尝试了以下操作。您可以看到，当我使用“包含”时，包含的连接不会输出所需的数据，但是当我在事后显式调用连接模型时，您可以看到有所需的数据。以下是我在 IRB 中的模型和行为：

```
class Appearance < ActiveRecord::Base
  belongs_to :photo
  belongs_to :person
end

class Photo < ActiveRecord::Base
  belongs_to :event
  has_many :appearances, order: 'position'
  has_many :people, :through => :appearances
end

class PhotosController < ApplicationController
  def index
    @event            = Event.find(params[:event])
    @photos           = @event.photos.includes(:people, :appearances)
    # this does not show any appearance records, however this does
    # @photos           = @event.photos.first.people
  end
end

#IN IRB
 Photo.find(51941, :include => [:people, :appearances])
  Photo Load (0.4ms)  SELECT `photos`.* FROM `photos` WHERE `photos`.`id` = 51941 LIMIT 1
  Appearance Load (0.3ms)  SELECT `appearances`.* FROM `appearances` WHERE `appearances`.`photo_id` IN (51941) ORDER BY position
  Person Load (0.2ms)  SELECT `people`.* FROM `people` WHERE `people`.`id` IN (12103)

 => #<Photo id: 51941, time_created: "165732-0500", copyright_notice: "", country_primary_location_name: "", date_created: "20110119", created_at: "2011-01-20 07:33:24", updated_at: "2011-01-20 21:17:41", event_id: 602, position: 102, visible: nil, filename: "RAS_4824.JPG", folder: "", image: nil, image_file_name: nil, image_content_type: nil, image_file_size: nil, image_updated_at: nil> 

1.9.3p194 :036 > Photo.find(51941).appearances
  Photo Load (0.4ms)  SELECT `photos`.* FROM `photos` WHERE `photos`.`id` = 51941 LIMIT 1
  Appearance Load (0.4ms)  SELECT `appearances`.* FROM `appearances` WHERE `appearances`.`photo_id` = 51941 ORDER BY position
 => [#<Appearance id: 73654, photo_id: 51941, person_id: 12103, created_at: "2011-01-20 07:33:24", updated_at: "2011-01-20 07:33:24", position: 1>] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T02:36:55.427

I think you're misunderstanding the point of `includes`. Using `includes` (or the `include` option to find) tells rails to load the association from the DB at the same time that it loads the parent. This is happening in your IRB session, as you can see from the two lines:

```
Appearance Load (0.3ms)  SELECT `appearances`.* FROM `appearances` WHERE `appearances`.`photo_id` IN (51941) ORDER BY position
Person Load (0.2ms)  SELECT `people`.* FROM `people` WHERE `people`.`id` IN (12103) 
```

The fact that you don't *see* the associated records when you output the result of `find` to the console is just a result of the [`inspect`](http://apidock.com/rails/ActiveRecord/Base/inspect) method, which does not (by default) show you data for all associations (which in general would be a huge amount of data).

When you input `Photo.find(51941).appearances` you are inspecting not a photo but the appearances association (an array), which is why you can see result in the IRB console.

If you want to test that `include` is working, first assign the photo to a variable:

```
photo = Photo.find(51941, :include => [:people, :appearances])
Photo Load (0.4ms)  SELECT `photos`.* FROM `photos` WHERE `photos`.`id` = 51941 LIMIT 1
Appearance Load (0.3ms)  SELECT `appearances`.* FROM `appearances` WHERE `appearances`.`photo_id` IN (51941) ORDER BY position
Person Load (0.2ms)  SELECT `people`.* FROM `people` WHERE `people`.`id` IN (12103) 
```

You should see SQL statements not only for photos, but also for associated people and appearances. This is a sign that rails has eager-loaded these associations.

If you then get the associations with `photo.appearances` and you should *not* see any SQL queries, because the association is already loaded from the DB:

```
1.9.3p194 :036 > photo.appearances
=> [#<Appearance id: 73654, photo_id: 51941, person_id: 12103, created_at: "2011-01-20 07:33:24", updated_at: "2011-01-20 07:33:24", position: 1>] 
```

If you had *not* used `include`, you would have seen an SQL query before the result:

```
1.9.3p194 :036 > photo.appearances
Appearance Load (0.3ms)  SELECT `appearances`.* FROM `appearances` WHERE `appearances`.`photo_id` IN (51941) ORDER BY position
=> [#<Appearance id: 73654, photo_id: 51941, person_id: 12103, created_at: "2011-01-20 07:33:24", updated_at: "2011-01-20 07:33:24", position: 1>] 
```

# ruby-on-rails - rails 星级评分系统 - ajaxful-rating

> ID：12240956
> 
> 赞同：1
> 
> 时间：2012-09-03T01:07:13.363
> 
> 标签：ruby-on-rails, ajax, rating

我正在尝试在我的 rails 应用程序中实现星级评分系统。为此，我选择使用[ajaxful-rating](https://github.com/edgarjs/ajaxful-rating) gem。

*   我已经安装了宝石
*   我已经运行了脚本
*   我已将 ajaxful_rateable 添加到我的齿轮模型中以启用对它们的评级。
*   我已将 ajaxful_rater 添加到我的用户模型中以启用对其他项目的评分。

我没有完全完成安装，因为我遇到了路线错误。我需要知道我在路线或数据库上做错了什么。从 gem 上的说明来看，除了缓存平均评分之外，我似乎不需要扩充数据库。但是当我尝试访问视图时出现以下错误

```
Mysql2::Error: Table 'equiptme.rates' doesn't exist: SHOW FULL FIELDS FROM `rates` 
```

请帮忙。我的代码如下。

**路线**

```
 resources :gears, :member => {:rate => :post} do
    resources :calendars, :only => [:create, :destroy, :edit] 
    resources :comments, :only => [:create, :destroy] 
  end 
```

**看法**

```
 <% @comments.each do |comment| %>
            <div style="width: 99%; min-height: 190px; margin-bottom: 30px; border-bottom: 1px dotted #DAD9D9;">
                  <div style="width: 17%; float: left; overflow: hidden; margin-left: 10px; text-align: center; font-size: 14px; ">
                    <div class="gearcomments_userpic_container"><%= image_tag comment.user.userimage.url(:comments), :class => "gearcomments_userpic" %></div></br>
                    <%= comment.user.name %> 
                  </div>
                  <div style="width: 55%; float: left; margin-left: 10px; font-size: 13px;">
                    <%= comment.body %> 
                  </div> 
                  <div style="width: 15%; float: left; text-align: center;">
                     <h4>Overall Rating</h4></br>
                     <%= ratings_for @gear, :show_user_rating => true %>
                     <div></div></br>
                     <% # display delete link only for comments written by this particular user %>
                     <% if user_signed_in? and comment.user_id == current_user.id %>
                         <span><%= link_to 'delete', gear_comment_path(@gear, comment), :confirm => 'Are you sure?', :method => :delete, :class => "" %></span>
                     <% end %>          
                  </div>
            </div>       
        <% end %> 
```

**齿轮型号**

```
class Gear < ActiveRecord::Base
  ...
  ajaxful_rateable :stars => 6, :allow_update => true
end 
```

**用户模型**

```
class User < ActiveRecord::Base 
 ...
  ajaxful_rater
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T01:17:43.540

您的数据库中缺少一个表（gem 可能需要）。你确定你已经迁移了你的数据库？

您必须运行可能会生成迁移的脚本，但您还必须：

```
rake db:migrate 
```

或者`bundle exec rake db:migrate`如果需要。

* * *

确保您已运行生成脚本（来自自述文件）：

> ```
> script/generate ajaxful_rating UserModelName 
> ```
> 
> 生成器有一个参数：UserModelName，它是您当前用户模型的名称。这对于链接费率模型和用户模型是必要的。
> 
> 此生成器还复制必要的图像、样式等。
> 
> 示例：我假设您已经生成了一个经过身份验证的模型……</p>
> 
> ```
> script/generate authenticated user sessions
> script/generate ajaxful_rating user 
> ```
> 
> 因此，此调用将创建一个 Rate 模型并将其链接到您的 User 模型。

自述文件中的这一部分肯定意味着生成了迁移。

# asp.net - 我需要创建一个按钮，在按钮单击事件上将表单信息发送到电子邮件

> ID：12240966
> 
> 赞同：2
> 
> 时间：2012-09-03T01:08:34.223
> 
> 标签：asp.net, forms, email, button, submission

我是所有编程的新手，我正在为我的个人业务创建一个网络表单，只需单击按钮即可将表单详细信息提交到电子邮件。我已经进行了搜索，但我还没有完全找到我正在寻找的东西。我不确定提交 Web 表单时的通用协议是什么。我宁愿没有关于数据库的信息，因为它只是临时的。尽管在单击按钮时将姓名和电话号码提交到我的数据库可能会很方便。

实际的电子邮件不需要很好的格式，我只需要来自几个文本框的信息。我正在使用 TextBox1 - TextBox6，如果有帮助的话。

非常感谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T01:31:58.207

您需要使用`System.Net.Mail`该类在 C# 中发送电子邮件。邮件服务器设置`web.config`在该部分下的文件中设置`system.net` `mailsettings`。例如，通过 GMail 帐户发送的电子邮件将使用以下设置：

```
<system.net>
    <mailSettings>
      <smtp from="[email_address_here]">
        <network host="smtp.gmail.com" port="587" userName="[username]" password="[password]" enableSsl="true" />
      </smtp>
    </mailSettings>
</system.net> 
```

然后，在按钮单击事件上，您可以在 Visual Studio 中按钮属性的“事件”部分访问该事件，您将放置代码来收集表单信息并发送电子邮件，如下所示：

```
//Initiate the mail client.
SmtpClient mail = new SmtpClient();

//You would probably get the to email from your form using TextBox1.Text or something similar, or use your own to email.
MailMessage mm = new MailMessage("from_email", "to_email");

//Set the message properties, using your TextBox values to format the body of the email.
//You can use string format to insert multiple values into a string based on the order of {0}, {1}, {2} etc.
mm.Body = string.Format("Hi {0}, thanks for emailing me.", TextBox2.Text);
mm.IsBodyHtml = true; //Or false if it isn't a HTML email.
mm.Subject = "Your Subject Here";

//Send the email.
mail.Send(mm); 
```

您还需要`using System.Net.Mail;`在代码文件的顶部添加一行以使用`SMTPClient`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T01:14:22.960

你用什么语言工作？

在 php 中，它会是这样的：

```
<form action="post.php" method="post">
... your form inputs
</form> 
```

然后在 post.php 中：

```
mail($_POST['email'],$_POST['subject'],$_POST['body']); 
```

分享您正在使用的代码，我可以更具体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T01:14:29.960

任何应用程序服务器都应该能够做到这一点。听起来您只需要一个简单的脚本（PHP 或 Ruby 都可以）来处理 Web 请求、提取数据并将其发送到电子邮件中。也许我遗漏了问题的一部分，但如果你的意思是你想知道协议，答案是 HTTP。

# eclipse - SVN: '0x00400039: 收集资源'

> ID：12240978
> 
> 赞同：6
> 
> 时间：2012-09-03T01:10:49.843
> 
> 标签：eclipse, svn, svnkit

我在 Eclipse IDE 中将静态项目转换为 javascript 项目。

`*.js`现在无法提交某些文件并抛出以下错误：

```
SVN: '0x00400039: Collecting Resources' operation finished with error: null java.lang.NullPointerException 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-17T15:39:08.790

Eclipse 有一个 svn 的 java 实现，它可能与 eclipse 核心或您的命令行 svn 客户端存在兼容性问题。

我建议你从命令行提交这些文件，然后从 svn 重新创建你的项目。或者备份不可提交的文件，从您的项目中删除它们，执行完整的更新提交，将文件复制回来，然后再次更新提交。

Eclipse 有更多的 svn 包（纯 java 实现和 C 中 svn 库的包装器），对于长期解决方案，我建议您切换到另一个。

您还应该检查 Eclipse 中 svn 的元数据格式是否与命令行 svn 兼容。它经常变安静。

# spring - Spring 的 ReloadableResourceBundleMessageSource 找不到属性文件

> ID：12240982
> 
> 赞同：4
> 
> 时间：2012-09-03T01:12:00.037
> 
> 标签：spring, spring-mvc, spring-roo, resourcebundle, properties-file

我在 WEB-INF/i18n 目录下有两个文件：

*   应用程序属性
*   消息属性

我已经正确配置了我的 ReloadableResourceBundleMessageSource bean，如下所示（spring mvc）：

```
<bean class="org.springframework.context.support.ReloadableResourceBundleMessageSource" id="messageSource" p:basenames="WEB-INF/i18n/messages,WEB-INF/i18n/application"
        p:fallbackToSystemLocale="false"/> 
```

然而我从 Spring mvc 得到这个：

```
2012-09-03 02:59:45,911 [http-bio-8080-exec-4] DEBUG org.springframework.context.support.ReloadableResourceBundleMessageSource - Loading properties [application.properties]
2012-09-03 02:59:45,912 [http-bio-8080-exec-4] DEBUG org.springframework.context.support.ReloadableResourceBundleMessageSource - No properties file found for [WEB-INF/i18n/application_fr] - neither plain properties nor XML
2012-09-03 02:59:45,912 [http-bio-8080-exec-4] DEBUG org.springframework.context.support.ReloadableResourceBundleMessageSource - Loading properties [messages.properties]
2012-09-03 02:59:45,912 [http-bio-8080-exec-4] DEBUG org.springframework.context.support.ReloadableResourceBundleMessageSource - No properties file found for [WEB-INF/i18n/messages_fr] - neither plain properties nor XML 
```

有人可以请教吗？我可以将属性文件移动到类路径并相应地更改我的配置，但我宁愿了解发生了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T20:21:06.633

在日志消息中它说：application_fr

注意_fr。这意味着它试图寻找 application.properties (application_fr.properties) 的法语版本。如果它找不到法国属性，它应该回退到默认值（application.properties），所以你的道具应该仍然可以找到。它寻找法语道具的原因与您应用程序中某处的语言环境设置有关。可能来自浏览器、JVM、应用程序。

您可以尝试添加以下内容，以强制语言环境为英语：

```
<bean class="org.springframework.web.servlet.i18n.FixedLocaleResolver" p:defaultLocale="en"/> 
```

# posix - 如何在 lex 中捕获未定义的规则

> ID：12240990
> 
> 赞同：1
> 
> 时间：2012-09-03T01:13:33.300
> 
> 标签：posix, lex

说我有一些规则和行动，就像这样

```
,                   { do something; }
\.                  { do_something; }
\(                  { do_someting; }
\)                  { do_something); }
:                   { do_something; }
... 
```

每当我匹配左边的规则时，右边的动作就会被调用。但是，如果我想匹配其他所有内容怎么办？我怎么能这样做？

使用类似的东西

```
.*          { do_something; } 
```

不起作用，因为它也适用于上述规则。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T01:27:50.930

根据[lex 规范](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/lex.html#tag_20_65_13)：

> 在模式匹配期间，lex 将搜索模式集以寻找最长的可能匹配项。在匹配相同字符数的规则中，应选择最先给出的规则。

所以我会选择：

```
.  { do_something; } 
```

...并将其作为最后一条规则。

这将匹配单个字符，但换行符除外（“<newline> 不应与句点运算符匹配”）。如果您还想匹配换行符：

```
.|\n  { do_something } 
```

最后，如果您实际上不想使用该字符，则需要一个与空字符串匹配的扩展正则表达式 (ERE)。你可以试试：

```
.{0}  { do_something } 
```

当我阅读 lex 和 ERE 的规范时，我相信这应该有效，但如果它在某处引起了一些错误，我不会感到惊讶 :-)

# algorithm - 在 O(n) 运行时间内对数组进行排序

> ID：12240997
> 
> 赞同：3
> 
> 时间：2012-09-03T01:15:09.220
> 
> 标签：algorithm, sorting

如果您对内存没有任何限制，是否有任何算法可以对 O(n) 中具有重复项的给定数组进行排序？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-03T01:20:26.690

这取决于。如果您可以以某种方式将输入与下限和上限（以及最大精度/值长度）绑定，那么您可以使用[基数排序](http://en.wikipedia.org/wiki/Radix_sort)，即`O(n)`. 类似地，[桶排序](http://en.wikipedia.org/wiki/Bucket_sort)在最好的情况下可能具有`O(n)`复杂性，但会`O(n^2)`因输入错误而降级。

但是，一般而言，如果您无法限制输入并需要使用基于比较的排序，则可以证明这`O(n log n)`是最佳的。

在对固定精度整数或浮点数（通常最多 64 位）进行排序时，这些值是有效有界的，并且可以进行基数排序。

即使值的最大位长是有界的，位长越长，常数越大。实际上，如果有 n 个值要排序，并且每个值的长度或精度可达 m 位，则算法复杂度为 O(nm)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-04T08:49:13.277

是的。如果您对空间复杂度没有任何限制，那么您可以使用 o(n) 时间复杂度对数组进行排序。

*   假设您有一个由 k（让 k =10）个元素组成的数组。
*   并且（让）您的数组是： N[2,6,4,4,1,1,9,5,2,2]

*   现在，作为我们的考虑，我们对空间没有任何限制。

*   假设我们有一个大小为 p 的二维数组 (temp_number[i][j])（理论上，认为 p 是无限的），使得索引 i 包含一些标志，索引 j 包含一个链接列表。

现在，填充 temp_number[ ][ ]，使得数组 N 的每个元素都放入 temp_number[ ][ ] 的索引中，并使 flag=1**否则**保持 flag=0。

```
temp_number[0][1] = [1][1->1->null]
 temp_number[1][1] = [1][2->2->2->null]
 temp_number[2][1] = [0][3->null]
 temp_number[3][1] = [1][4->4->null]
 temp_number[4][1] = [1][5->null]
temp_number[5][1] = [1][6->null]
temp_number[6][1] = [0][null]
temp_number[7][1] = [0][null]
temp_number[8][1] = [1][9->null] & so on... 
```

*   现在，您可以在一个**循环**中获取所有具有**flag=1**的元素。
***   注意，这里这样，我们不是在做like

    if(number1 > number2) { //排序逻辑... }

    所以，在这里你可以得到复杂度 0(n)，因为那里**只有一个循环**。**

# jquery - 我怎样才能得到一个向下两行的表格行？

> ID：12240998
> 
> 赞同：0
> 
> 时间：2012-09-03T01:15:40.447
> 
> 标签：jquery

我有一个表格行的参考；如何使用 jQuery 定位距这一行更远的两行的行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T01:19:14.773

如果我们正在处理`<tr>`：

```
$(row).next().next(); 
```

# javascript - 如何从超大全屏幻灯片中获取 100 像素？

> ID：12240999
> 
> 赞同：0
> 
> 时间：2012-09-03T01:15:54.163
> 
> 标签：javascript, jquery, css

[超大幻灯片](http://buildinternet.com/project/supersized/slideshow/3.2/fade.html)会拉伸幻灯片图像以填满屏幕。然而，我想在幻灯片之前有一个 100px 的标题（而不是在它上面）。我能怎么做？

[常见问题解答解释说幻灯片不需要是全屏](http://buildinternet.com/project/supersized/faq.html#q-3)的，但我仍然希望它是全屏的，期望距离顶部 100 像素。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T03:54:44.490

我知道距离您提出要求已经有一段时间了，但我用它来缩小 Supersized 占用的空间。

```
function portfolioSize () {
    $('#supersized').height( $(window).height() - 71 );
}
$(window).load(function() { portfolioSize(); });
$(window).resize(function() { portfolioSize(); }); 
```

这会拉动窗口高度并减去必要的像素数量。下面的两行用于确保在初始加载和调整浏览器窗口大小时应用该函数。

编辑：作为旁注，我相信以下CSS可能也是必需的（自从我在需要这个的网站上工作以来已经有一段时间了，所以这些可能是出于其他原因）：

```
#supersized {position: relative !important;}

#supersized li {position: absolute !important; height: 100% !important;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T03:47:47.443

您可以创建一个容器或`div`使用`display: block`and`margin-top: 100px`并在其中设置您的幻灯片。或者您可以简单地尝试将`margin-top: 100px`或分配`top: 100px`给您的幻灯片父选择器。（也就是说，`ul`如果您使用`li`幻灯片或某些父容器，您可以将其提供给）。

您甚至可以尝试使用`padding-top`or`border-top`并为它们分配 100 像素。你有很多选择。

我建议您使用流体布局。***[这](http://jsfiddle.net/blasteralfred/kvHWm/)***是一个现场演示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T03:36:10.487

简单 - 只需将其添加到 CSS 中：

```
#supersized li {top:100px !important} 
```

然后使用绝对定位将标题添加到屏幕顶部:)