# StackOverflow 问答 11810000-11810999

# javascript - 使用 Greasemonkey 删除表格

> ID：11810000
> 
> 赞同：0
> 
> 时间：2012-08-04T15:59:57.610
> 
> 标签：javascript, greasemonkey

我正在尝试从简单的 html 页面中删除 2 个表。该页面仅包含 2 个表格，这是页面代码：

```
<html>
<body>
<h3>Table 1</h3>

<table class="details" border="1" cellpadding="0" cellspacing="0">
<tbody><tr>
<th>1</th>
<td>2</td>
</tr>
</tbody></table>

<h3>Table 2</h3>

<table class="details" border="1">
<tbody><tr>
<th>1</th>
<td>2</td>
</tr><tr>
<th>3</th> 
<td>4</td>
</tr>
</tbody></table>

</body>
</html> 
```

我可以使用以下方法删除其中一个表：

```
var elmDeleted = document.getElementsByClassName('details').item(0);
elmDeleted.parentNode.removeChild(elmDeleted); 
```

或者

```
var elmDeleted = document.getElementsByClassName('details').item(1);
elmDeleted.parentNode.removeChild(elmDeleted); 
```

但是我无法在我的用户脚本中连续使用这些命令删除两个表：

```
var elmDeleted = document.getElementsByClassName('details').item(0);
elmDeleted.parentNode.removeChild(elmDeleted);
var elmDeleted = document.getElementsByClassName('details').item(1);
elmDeleted.parentNode.removeChild(elmDeleted); 
```

请指教

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T21:03:22.147

塞巴斯蒂安的答案确实是您要寻找的答案，但为了清楚起见，我将展示您如何做到这一点：您可以

```
var elmDeleted = document.getElementsByClassName('details').item(0);
elmDeleted.parentNode.removeChild(elmDeleted);
var elmDeleted = document.getElementsByClassName('details').item(0);
elmDeleted.parentNode.removeChild(elmDeleted); 
```

注意我`.item[0]`两次都删除的事实；它将两次删除页面上的第一个。否则，这个：

```
var elmDeleted = document.getElementsByClassName('details').item(1);
elmDeleted.parentNode.removeChild(elmDeleted);
var elmDeleted = document.getElementsByClassName('details').item(0);
elmDeleted.parentNode.removeChild(elmDeleted); 
```

...这将删除第二个，然后是第一个。

要（我称之为）整洁：（==更紧凑）

```
for(i=0;i<2;i++)(temp=document.getElementsByClassName('details').item(0)).parentNode.removeChild(temp); 
```

作为旁注，由于您说页面上只有 2 个表，您可以将每个表替换`document.getElementsByClassName('details')`为`document.getElementsByTagName('table')`.

此外，在我的紧凑版本中，您可以替换`i<2`以`i<document.getElementsByClassName('details').length`删除**所有**“详细信息”表，而不仅仅是前两个。

希望这有帮助:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T16:05:08.810

删除旧表 #0 后，旧表 #1 将成为新表 #0。因此，如果您尝试获取表 #1，它将失败。

# file - 使用 Umbracos 媒体节点“类型”字段创建下载图标

> ID：11810004
> 
> 赞同：0
> 
> 时间：2012-08-04T16:00:29.253
> 
> 标签：file, download, umbraco

我有一个名为“下载”的数据类型。组成它的属性之一是媒体选择器，用于关联媒体库中的文件。我需要使用 razor 列出这些“下载”，每个文件都需要一个图标来标识它是什么文件格式。

现在我可以创建“下载”列表，甚至可以创建文件链接，但我想知道 Umbraco 是否有一个属性可以让我显示正确的文件格式图标。我注意到在查看媒体项目时，每个项目都有“类型”属性。如果我能得到那个输出，我可以为每种可能性创建一个 css 类。但是我如何到达那个属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T18:09:10.783

媒体类型就像文档类型一样。它们的属性在设置部分进行配置。如果您查看“文件”或“图像”媒体类型，您可以看到它们用于属性的别名。在这种情况下，“类型”属性的别名为`umbracoExtension`。如何使用 Razor 访问属性的示例如下：

```
var file = Library.MediaById(1066);
@file.umbracoExtension 
```

根据返回的扩展名，您可以通过执行以下操作将类添加到下载文件的链接：

```
int folderId = 1000;
var files = Library.MediaById(folderId);

<ul>
@foreach (var file in files)
{
    string attr = "";

    if (file.umbracoExtension != "")
    {
        attr = " class=\"" + file.umbracoExtension + "\"";
    }

    <li@attr><a href="@file.umbracoFile">@file.Name</a></li>
}
</ul> 
```

然后您可以通过 CSS 添加适当的图像图标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T19:31:34.127

dludlow 的回答在技术上是您所要求的，但我想发布一个替代建议，即您可以在纯 CSS3 中做您所要求的事情，而无需在 Razor 中做任何不同的事情。

这只是我抓取的部分示例，以说明我的意思：

```
#sample-div a {
 display:inline-block;
 padding-left:20px;
 line-height:18px;
}
#sample-div a[href$='.jpg'],
#sample-div a[href$='.jpeg'],
#sample-div a[href$='.gif'],
#sample-div a[href$='.psd'] {
 background:transparent url(/images/icon_image.png) center left no-repeat;
}
#sample-div a[href$='.csv'],
#sample-div a[href$='.xls'],
#sample-div a[href$='.xlsx'],
#sample-div a[href$='.xlw'] {
 background:transparent url(/images/icon_excel.png) center left no-repeat;
}
#sample-div a[href$='.pdf'] {
 background:transparent url(/images/icon_acrobat.png) center left no-repeat;
}
#sample-div a[href$='.ppt'],
#sample-div a[href$='.pps'] {
 background:transparent url(/images/icon_powerpoint.png) center left no-repeat;
}
#sample-div a[href$='.doc'],
#sample-div a[href$='.docx'],
#sample-div a[href$='.rtf'],
#sample-div a[href$='.txt'],
#sample-div a[href$='.wps'] {
 background:transparent url(/images/icon_word.png) center left no-repeat;
} 
```

当然，还有其他方法可以改善这一点，例如添加更多扩展，使用 spritemap 而不是单个图像（我建议），将`background`速记规则简化为 just`background-image`等......

祝你好运！祝你好运！

# c++ - RTSP c++ 直播示例源码？

> ID：11810006
> 
> 赞同：1
> 
> 时间：2012-08-04T16:00:50.107
> 
> 标签：c++, webcam, live-streaming

我想知道使用 RTSP 直播摄像机的最佳方式是什么？我一直在寻找几个小时，但找不到任何允许在 C++ 中进行网络摄像头直播的服务器源代码会有很大帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T02:25:39.670

[有许多指向各种服务器 RTSP 实现的链接，一些在wikipedia](http://en.wikipedia.org/wiki/Real_Time_Streaming_Protocol)上是开源和免费的。

像这个开源 C++[之一](http://www.live555.com/liveMedia/)。

# iis - 是否可以在 IIS 7.5 Url Rewrite Module Rules 中获取当前机器名称？

> ID：11810007
> 
> 赞同：3
> 
> 时间：2012-08-04T16:00:53.830
> 
> 标签：iis, url-rewriting, iis-7.5

HTTP_HOST 和 SERVER_NAME 服务器变量为我提供了来自 HTTP 请求的主机名（可以是 IP 地址或基于请求方式的负载平衡 DNS）。我找不到可以提供实际机器名称的服务器变量（即 COMPUTERNAME 环境变量的值）。

我正在尝试在服务器场上设置一些重定向规则，并且有一些基于当前机器名称的规则（例如，内部机器`int`的名称中有）。我不想为每台机器创建单独的规则，而是希望有一些基于当前机器名称的条件逻辑。我似乎无法找到获取机器名称的方法。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T00:52:07.050

在 IIS7 中，计算机名称不是内置服务器变量之一。但是，一切都不会丢失，通过使用自定义 UrlRewrite 提供程序进行一些工作，您可以在重写规则中显示您的机器名称。

Scott Forsyth 实际上已经构建了类似的东西，并写了一篇描述其使用的博客文章，并提供了源代码和预构建的二进制 + 安装程序：

> [URLRewrite ServerNameVariable 提供程序](http://weblogs.asp.net/owscott/archive/2011/04/02/urlrewrite-servernamevariable-provider.aspx)

为了在该文章消失的情况下保留此信息，此处松散地执行以下步骤：

首先在 Visual Studio 中创建一个新的类库项目。您可以在此处找到执行此操作的步骤：

> [为 URL 重写模块 (IIS.NET) 开发自定义重写提供程序](http://learn.iis.net/page.aspx/804/developing-a-custom-rewrite-provider-for-url-rewrite-module/)

它们本质上是（以防链接失效）：

1.  创建一个类库项目并将其命名为`ServerNameProvider`. *您需要确保项目是 .NET 2.0 或 3.5 项目。IIS7.5 托管代码支持仍然针对 2.0 运行时。*

2.  将默认`Class1.cs`文件重命名为反映提供者目的的名称，例如：`ServerName.cs`- 并确保源中的类名也反映这一点。

3.  添加对： 的引用 `%ProgramFiles%\Reference Assemblies\Microsoft\IIS\Microsoft.Web.Iis.Rewrite.dll`。

4.  在项目属性中创建一个强名称密钥（在签名选项卡上）

5.  添加构建后事件以在您的开发 PC GAC 中安装提供程序程序集（仅用于测试）：

    ```
    CALL "%VS90COMNTOOLS%\vsvars32.bat" > NULL 
    gacutil.exe /if "$(TargetPath)" 
    ```

    请注意，如果使用 Visual Studio 2010，则环境变量`%VS90COMNTOOLS%`应更改为`%VS100COMNTOOLS%`.

6.  打开`ServerName.cs`文件并确保你的类实现了`Microsoft.Web.Iis.Rewrite.IRewriteProvider`接口：

    ```
    using System.Collections.Generic;
    using Microsoft.Web.Iis.Rewrite;

    namespace ServerNameVariable
    {
      public class ServerName : IRewriteProvider
      {
        public void Initialize(IDictionary<string, string> settings, 
                           IRewriteContext rewriteContext)
        {
        }

        public string Rewrite(string value)
        {
          return  System.Environment.MachineName;
        }
      }
    } 
    ```

7.  构建项目。在您的本地 PC 上，程序集将安装到 GAC 中。

8.  向 IIS 注册提供程序：

```
appcmd.exe set config -section:system.webServer/rewrite/providers /+"[name='ServerNameVariable',type='ServerNameVariable.ServerName, ServerNameVariable, Version=1.0.0.0, Culture=neutral, PublicKeyToken=5854ff76fb5c07af']" /提交：应用程序主机

```

确保`PublicKeyToken`上面命令行中的值与程序集的公钥令牌匹配。您可以通过执行提取该值`sn.exe -T <assemblyfile.dll>`，例如：

```
e:\AppDev\..bin\Debug> sn.exe -T ServerNameVariable.dll
Microsoft (R) .NET Framework 强名称实用程序版本 4.0.30319.1
版权所有 (c) 微软公司。版权所有。

公钥令牌是 5854ff76fb5c07af

```

接下来要做的是在重写规则中使用您的新提供程序，例如，这是 Scott 给出的出站规则示例：

```
<outboundRules>
    <rule name="Set Custom Header" enabled="true">
        <match serverVariable="RESPONSE_X_Machine_Name" pattern=".*" />
         <action type="Rewrite" value="{ServerNameVariable:}" />
    </rule>
</outboundRules> 
```

这是一个简单的入站规则，如果机器名称是，则重定向到 google.com `BOB`：

```
<rewrite>
    <rules>
        <rule name="TestServerVariableProvider" 
              enabled="true" 
              stopProcessing="true">
            <match url=".*" />
            <conditions>
                <add input="{ServerNameVariable:}" pattern="BOB" />
            </conditions>
            <action type="Redirect" 
                    url="http://google.com" 
                    appendQueryString="false" 
                    redirectType="Found" />
        </rule>
    </rules>
</rewrite> 
```

# python - Reportlab - 将两个段落添加到一个表格单元格中

> ID：11810008
> 
> 赞同：2
> 
> 时间：2012-08-04T16:00:55.450
> 
> 标签：python, django, reportlab

我有一个表，其构建如下：

```
styleN = styles["Normal"]

data = []
table_row = ['ID', 'Some Information']
data.append(table_row)

table_row = []
table_row.append(Paragraph(object.ID, styleN))
table_row.append(Paragraph(object.some_information1, styleN))

data.append(table_row)
t = Table(data, (6*cm,6*cm,2*cm,2*cm,2*cm), row_heights, style=ts) 
```

现在我想实现我可以在第二个单元格中添加包含 object.some_information2 的第二个段落。

一些或多或少的伪代码来说明我想要实现的目标：

```
table_row = []
table_row.append(Paragraph(object.ID, styleN))
info1 = Paragraph(object.some_information1, styleN)
info2 = Paragraph(object.some_information2, styleN)
info_paragraphs = info1 + info2 
table_row.append(info_paragraphs)

data.append(table_row)
t = Table(data, (6*cm,6*cm,2*cm,2*cm,2*cm), row_heights, style=ts) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T08:31:51.810

在 reportlab google group 中得到反馈，实际上很容易实现。仅将段落列表添加到单元格中。

```
styleN = styles["Normal"]
data = []
table_row = ['ID', 'Some Information']
data.append(table_row)
table_row = []
table_row.append(Paragraph(object.ID, styleN))
paragraphs = []
info1 = Paragraph(object.some_information1, styleN)
info2 = Paragraph(object.some_information2, styleN)
paragraphs.append(info1)
paragraphs.append(info2)
table_row.append(paragraphs)
data.append(table_row)
t = Table(data, (6*cm,6*cm,2*cm,2*cm,2*cm), None, style=ts) 
```

# php - php 二维数组搜索

> ID：11810012
> 
> 赞同：-1
> 
> 时间：2012-08-04T16:01:31.367
> 
> 标签：php, search, associative-array

我有一个数组

```
$user['123'][]= 2/2/2012;
$user['123'][]= 2/3/2012;
$user['123'][]= 2/4/2012;
  ['123'] => Array
    (
        [0] => 2/2/2012
        [1] => 2/3/2012
        [2] => 2/4/2012
    ) 
```

我想做的是检查 $var=2/3/2012 是否在数组中，

我尝试使用 in_array ，它没有工作任何解决方案将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T16:06:53.977

像这样的东西

```
<?php

$user['123'][]= '2/2/2012';
$user['123'][]= '2/3/2012';
$user['123'][]= '2/4/2012';

function dateIn2DArray($date, $haystack) {
  foreach($haystack as $dates) {
    if (in_array($date, $dates)) {
      return true;
    }
  }

  return false;
}

var_dump(dateIn2DArray('2/2/2012', $user)); // true
var_dump(dateIn2DArray('2/2/2013', $user)); // false 
```

该函数循环遍历数组中的元素，在其子元素中搜索日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T16:07:53.070

```
$is_in_array = false;
foreach ($user as $sub_array){
    if (in_array("2/3/2012", $sub_array)){
        $is_in_array = true;
        break;
    }
} 
```

关键是`in_array`适用于一维数组，因此您必须分别检查每个子数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T16:08:12.210

检查链接 `http://php.net/manual/en/function.in-array.php`

`$user['123'][]= '2/2/2012';`

`$user['123'][]= '2/3/2012';`

`$user['123'][]= '2/4/2012';`

`$var='2/3/2012';`

`echo in_array($var, $user['123']);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T16:31:34.007

这是我编写的用于深入搜索值的递归 PHP 函数：

```
function in_array_recursive($needle, $haystack){
    if (in_array($needle, $haystack)) return true;
    else{
          foreach ($haystack as $key=>$value){
            if (is_array($haystack[$key])) {
                return in_array_recursive($needle, $haystack[$key]);
                }
          }
          return false;
    }
} 
```

来电：

```
 echo in_array_recursive($item, $arr); 
```

# objective-c - 如何使用自我模型创建单独的 sqlite 文件

> ID：11810019
> 
> 赞同：0
> 
> 时间：2012-08-04T16:02:56.883
> 
> 标签：objective-c, ios, core-data, nsmanagedobjectcontext, nspersistentstore

我已经阅读了这篇[包含多个 sqlite 文件](https://stackoverflow.com/questions/6323203/core-data-with-mutiple-sqlite-files)和其他内容的 Core Data 文章。

但是，找不到任何有关创建分隔的 sqlite 文件的可理解信息（例如，为不同用户存储一些数据）。这就是我正在做的事情：

```
- (NSPersistentStoreCoordinator *)persistentStoreCoordinator
{
    if (__persistentStoreCoordinator != nil)
    {
        return __persistentStoreCoordinator;
    }
    NSURL *storeURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:[NSString stringWithFormat:@"%@.sqlite", _userID]];

    __persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];
    NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys: [NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption, [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption, nil];

    NSError *error = nil;
    if (![__persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:options error:&error]) {
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }
    return __persistentStoreCoordinator;
}

- (NSManagedObjectModel *)managedObjectModel {
    if (__managedObjectModel != nil) {
        return __managedObjectModel;
    }

    NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"DataBase" withExtension:@"momd"];
    __managedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL];
    return __managedObjectModel;
}

- (NSManagedObjectContext *)managedObjectContext
{
    if (__managedObjectContext != nil)
    {
        return __managedObjectContext;
    }

    NSPersistentStoreCoordinator *coordinator = [self persistentStoreCoordinator];

    if (coordinator != nil)
    {
            __managedObjectContext = [[NSManagedObjectContext alloc] init];
            [__managedObjectContext setPersistentStoreCoordinator:coordinator];   
    }
    return __managedObjectContext;
} 
```

如果您更改用户也会更改`NSPersistentStoreCoordinator`，`NSManagedObjectContext`但`NSManagedObjectModel`- 不是（那里`NSFetchRequest`）。那么如何在不创建额外实体（如用户）的情况下为不同用户分离核心数据（带有自身数据和“获取请求”）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T20:11:04.657

也许您可以将多个上下文与他们自己的商店一起使用，但基于相同的数据模型。通过这种方式，您可以为不同的商店使用相同的实体。

# session - 如何处理基于redis的会话过期？

> ID：11810020
> 
> 赞同：14
> 
> 时间：2012-08-04T16:02:57.420
> 
> 标签：session, redis, store

我想实现一个基于 Redis 的会话存储。我想将会话数据放入 Redis。但我不知道如何处理会话过期。我可以遍历所有 redis 键（sessionid）并评估最后一次访问时间和最大空闲时间，因此我需要将所有键加载到客户端，并且可能有 1000m 会话键并且可能导致非常糟糕的 I/O表演。
想让redis管理过期，但是key过期时没有监听和回调，所以无法触发HttpSessionListener。有什么建议吗？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-08-05T10:12:52.267

因此，您需要在 Redis 中的会话到期时通知您的应用程序。

虽然 Redis 不支持此功能，但您可以使用许多技巧来实现它。

**更新：从 2.8.0 版本开始，Redis 确实支持这个[http://redis.io/topics/notifications](http://redis.io/topics/notifications)**

首先，人们正在考虑它：这仍在讨论中，但它可能会添加到 Redis 的未来版本中。请参阅以下问题：

*   [https://github.com/antirez/redis/issues/83](https://github.com/antirez/redis/issues/83)
*   [https://github.com/antirez/redis/issues/594](https://github.com/antirez/redis/issues/594)

现在，这里有一些可以用于当前 Redis 版本的解决方案。

**解决方案1：修补Redis**

实际上，在 Redis 执行密钥过期时添加一个简单的通知并不难。可以通过在Redis源码的db.c文件中增加10行来实现。这是一个例子：

[https://gist.github.com/3258233](https://gist.github.com/3258233)

如果密钥已过期并以“@”字符开头（任意选择），则此简短补丁会将密钥发布到 #expired 列表。它可以很容易地适应您的需求。

然后使用 EXPIRE 或 SETEX 命令为会话对象设置过期时间，并编写一个在 BRPOP 上循环的小守护程序以从“#expired”列表中出列，并在应用程序中传播通知。

重要的一点是要了解 Redis 中的过期机制是如何工作的。实际上有两种不同的过期路径，都同时激活：

*   惰性（被动）机制。每次访问密钥时都可能发生过期。

*   主动机制。一个内部作业定期（随机）对一些设置了过期时间的键进行采样，试图找到那些过期的。

请注意，上述补丁适用于两种路径。

结果就是 Redis 过期时间不准确。如果所有的key都过期了，但是只有一个即将过期，并且没有被访问，活跃的过期作业可能需要几分钟才能找到key并过期。如果您需要通知的准确性，这不是要走的路。

**解决方案 2：使用 zset 模拟过期**

这里的想法是不依赖 Redis 密钥过期机制，而是通过使用额外的索引和轮询守护进程来模拟它。它可以与未经修改的 Redis 2.6 版本一起使用。

每次将会话添加到 Redis 时，您可以运行：

```
MULTI
SET <session id> <session content>
ZADD to_be_expired <current timestamp + session timeout> <session id>
EXEC 
```

to_be_expired 排序集只是访问应该过期的第一个键的有效方法。守护进程可以使用以下 Lua 服务器端脚本轮询 to_be_expired：

```
local res = redis.call('ZRANGEBYSCORE',KEYS[1], 0, ARGV[1], 'LIMIT', 0, 10 )
if #res > 0 then
   redis.call( 'ZREMRANGEBYRANK', KEYS[1], 0, #res-1 )
   return res
else
   return false
end 
```

启动脚本的命令是：

```
EVAL <script> 1 to_be_expired <current timestamp> 
```

守护程序最多将获得 10 个项目。对于它们中的每一个，它必须使用 DEL 命令来删除会话，并通知应用程序。如果实际处理了一项（即 Lua 脚本的返回不为空），则守护程序应立即循环，否则可引入 1 秒等待状态。

多亏了 Lua 脚本，可以并行启动多个轮询守护进程（该脚本保证给定会话只会被处理一次，因为 Lua 脚本本身从 to_be_expired 中删除了密钥）。

**解决方案3：使用外部分布式定时器**

另一种解决方案是依赖外部分布式定时器。beanstalk[轻量级排队系统](http://kr.github.com/beanstalkd/)是一个很好的可能性

每次在系统中添加会话时，应用程序都会将会话 ID 发布到 beanstalk 队列，延迟时间对应于会话超时。一个守护进程正在监听队列。当它可以使一个项目出队时，这意味着一个会话已经过期。它只需要清理 Redis 中的会话，并通知应用程序。

# vb.net - 根据长度移动标签以适应vb.net

> ID：11810021
> 
> 赞同：0
> 
> 时间：2012-08-04T16:03:08.637
> 
> 标签：vb.net, label

嗨，我有一个按钮，可以将字符串添加到标签中。（这可以多次完成。）由于用户可以添加多个字符串，每个字符串的长度都不同，无论如何我可以找到标签的长度及其周围的长度，以便正确间隔？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T17:06:25.103

Label.Width 将返回标签控件的当前宽度，但听起来您已经知道这一点。由于标签可能比它试图显示的文本更窄，因此您需要使用图形对象测量全文。此方法将返回标签中文本的宽度：

```
Private Function getFullTextWidth(lbl As Label)
    Using g As Graphics = Label1.CreateGraphics()
        Return g.MeasureText(Label1.Text, Label1.Font).Width
    End Using
End Function 
```

或者，您可以将标签的`AutoSize`属性设置为 true，然后`Width`在设置`Text`.

# c++ - c++ 指向向量内浮动的指针

> ID：11810023
> 
> 赞同：0
> 
> 时间：2012-08-04T16:04:10.387
> 
> 标签：c++, pointers, vector

我有一个 C++ 向量：

```
 vector<float> floats; 
```

稍后，这个向量被初始化。我不知道向量容器的内部内容是什么，但我想知道是否可以返回指向浮点数组所在位置的指针。具体来说，我正在使用 CUDA，我需要将指针传递给浮点数组。我不能给它传递一个向量。有没有办法我可以做类似的事情

```
float *dapointer = &vector[0]; 
```

或类似的东西？我也希望能够写信给它，比如

```
dapointer[some index] = 4; 
```

我意识到这违反了向量的要点，但是该向量在程序的许多其他地方用于“向量目的”，但我也需要 CUDA 能够访问数据。我不想更改所有其他代码以使用数组而不是向量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T16:08:24.150

```
float *dapointer = &floats[0]; 
```

都很好。

（请注意有趣的运算符重载如何混淆 C 的指针语法......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T16:08:00.317

该方法应该有效，**但要小心**。对向量进行修改后，您可能会留下悬空指针。在向量上执行的非`const`操作会使迭代器、指针和对其管理的内存的引用无效。使这个安全的方法是标记向量`const`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T16:08:13.193

正如评论所述，您的第一行是这样做的一种方式。但是如果向量的大小不是至少为 1，则该行是未定义的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-05T22:55:06.233

```
float *dapointer = floats.data(); 
```

参考：[http ://en.cppreference.com/w/cpp/container/vector/data](http://en.cppreference.com/w/cpp/container/vector/data)

# c# - 如何使用 C# 将 int 转换为仅使用低 4 位的字节？

> ID：11810027
> 
> 赞同：0
> 
> 时间：2012-08-04T16:04:38.097
> 
> 标签：c#

我在 C# 中有一个转换问题。基本上，我正在尝试将整数转换为字节，以便我们只使用低 4 位。示例`255 = 0F 0F`或：

```
0xpqrs = 0p 0q 0r 0s

5*16*16*16 + 1*16*16 + 15*16 + 1  = 05 01 0f 01 
```

如何在 C# 中实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T16:08:36.127

int => 字节：

```
int value = 0x51f1;
byte s = (byte)(value & 0xf);
byte r = (byte)(value>>4 & 0xf);
byte q = (byte)(value>>8 & 0xf);
byte p = (byte)(value>>12 & 0xf); 
```

字节 => 整数：

```
int value = p<<12 | q<<8 | r<<4 | s; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T18:14:42.680

Lucero 的答案修改为在具有更长整数的循环中工作。

```
 public static byte[] intToBytesV2(ulong l)
    {
        byte[] theBytes = new byte[8];
        for (int i = 0; i < 8; i++) {
            theBytes[i] = (byte)(l >> (i * 4) & 0xf);
        }
        return theBytes;
    } 
```

pom =)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-04T16:14:38.577

byte[] bArray=System.BitConverter.GetBytes(i);

# javascript - 在javascript中将普通对象转换为类实例

> ID：11810028
> 
> 赞同：18
> 
> 时间：2012-08-04T16:04:42.567
> 
> 标签：javascript, casting

```
function Person() {
      var self = this;

      self.personName="";
      self.animals=[];
}

function Animal(){
     var self=this;

     self.animalName="";
     self.run=function(meters){
         .....
     }
} 
```

服务器响应：

```
 [{personName:John,animals:[{animalName:cheetah},{animalName:giraffe}]} , {personName:Smith,animals:[{animalName:cat},{animalName:dog}]} ] 
```

我正在从服务器获取 Person 数组。我想将泛型 Person 数组转换为类型化的 Person 数组。所以我可以使用

```
 persons[0].Animals[2].Run(); 
```

我创立了 Javascript 的

```
 Object.create(Person,person1); 
```

但我想要它的跨浏览器版本，支持数组

```
 ObjectArray.create(Person,persons); 
```

或者

```
 Object.create(Person[],persons); 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-04T18:04:27.003

在 JavaScript 中创建对象需要调用其构造函数。因此，首先您需要找到正确的参数，而这些参数可能并不总是只是属性。之后，您可以将 JSON 解析对象中的所有公共属性重新分配给创建的实例。

一个通用的解决方案是每个构造函数都接受任何看起来像实例（包括真实实例）的对象并克隆它们。然后，创建正确实例所需的所有内部逻辑都将位于正确的位置。

甚至比重载构造函数更好的方法可能是在您的类上创建一个静态方法，该方法接受对象并从中创建实例：

```
Person.fromJSON = function(obj) {
    // custom code, as appropriate for Person instances
    // might invoke `new Person`
    return …;
}; 
```

* * *

您的案例非常简单，因为您没有任何参数，只有公共属性。要更改`{personName:John,animals:[]}`为对象实例，请使用以下命令：

```
var personLiteral = ... // JSON.parse("...");
var personInstance = new Person();
for (var prop in personLiteral)
    personInstance[prop] = personLiteral[prop]; 
```

您还可以为此使用`Object.assign`功能（或例如`jQuery.extend`pre-ES6）：

```
var personInstance = Object.assign(new Person(), personLiteral); 
```

`Animal`实例的创建过程类似。

由于 JSON 不传输有关类的任何信息，因此您必须先了解其结构。在您的情况下，它将是：

```
var persons = JSON.parse(serverResponse);
for (var i=0; i<persons.length; i++) {
    persons[i] = $.extend(new Person, persons[i]);
    for (var j=0; j<persons[i].animals; j++) {
        persons[i].animals[j] = $.extend(new Animal, persons[i].animals[j]);
    }
} 
```

顺便说一句，您的`run`方法似乎可能被添加到`Animal.prototype`对象而不是每个实例上。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-04T17:49:35.497

似乎您的类具有一些原型方法，并且您希望能够使您的对象使用这些方法。[http://jsfiddle.net/6CrQL/3/](http://jsfiddle.net/6CrQL/3/)

```
function Person() {}

Person.prototype.speak = function() {
   console.log("I am " + this.personName);
};

Person.prototype.runAnimals = function() {
    this.animals.each(function(animal){
       animal.run();
    })
};

function Animal() {}

Animal.prototype.run = function() {
    console.log("My Animal " + this.animalName+ "  is running");
}

var untypedPersons =  [{personName:"John",animals:[{animalName:"cheetah"},{animalName:"giraffe"}]} , {personName:"Smith",animals:[{animalName:"cat"},{animalName:"dog"}]} ];   

function fromArray(arr, constructor) {
   return arr.map(function(obj){
       var typed = Object.create(constructor.prototype);
       // Now copy properties from the given object
       for (var prop in obj)  {
           typed[prop] = obj[prop];
       }
       return typed;
   });
}

var persons = fromArray(untypedPersons, Person);
// Attach prototype to each animals list in person
persons.each(function(person){
    person.animals = fromArray(person.animals, Animal);
});

persons.each(function(person){
    person.speak();
    person.runAnimals();  
}); 
```

`__proto__`​如果每个人都支持该属性[http://jsfiddle.net/6CrQL/2/](http://jsfiddle.net/6CrQL/2/)，这一切都会容易得多（我们可以避免所有的复制）

```
persons.each(function(person){
  person.__proto__ = Person.prototype;
  person.animals.each(function(animal){
    animal.__proto__ = Animal.prototype;
  });
});

persons.each(function(person){
  person.speak();
  person.runAnimals();  
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T16:51:55.690

首先：在 JavaScript 中，没有 C++、Java 或 C# 中的类。所以你不能真正拥有一个类型化的数组。

您所做的基本上应该适用于变量，但不适用于函数。所以你必须先添加功能。看看下面的代码以获得一个想法。

```
<script type="text/javascript">

function Person() {
      var self = this;

      self.personName="";
      self.animals=[];
}

function Animal(){
     var self=this;

     self.animalName="";
     self.run=function(meters){
         7/... do something
     }
}

var persons = [{personName:"John",animals:[{animalName:"cheetah"},{animalName:"giraffe"}]} , {personName:"Smith",animals:[{animalName:"cat"},{animalName:"dog"}]} ];

//use this to assign run-function
var a = new Animal();

//assign run-function to received data
persons[0].animals[0].run = a.run;

//now this works
persons[0].animals[0].run();

</script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-04T16:59:47.530

如何在 Person 类上创建一个静态方法，它将接受您的服务器响应并创建所需的变量。

这只是一个想法。请看看这是否适合您的问题。

```
//Static method
Person.createObjects = function( response ) {
    var persons = [];
    for ( var p = 0; p < response.length; p++ ) {
        //Create Person
        var person = new Person( response[p].personName );
        //Create Animals
        for ( var a = 0; a < response[p].animals.length; a++ ) {
           var animal = new Animal( response[p].animals[a].animalName );
           //Push this animal into Person
           person.animals.push ( animal );
        }
        //Push this person in persons
        persons.push ( person );
    }
    //Return persons
    return persons;
}

//Now Create required persons by passing the server response
var persons = Person.createObjects ( response ); 
```

# html - iframe 在验证时显示错误？

> ID：11810034
> 
> 赞同：5
> 
> 时间：2012-08-04T16:05:39.690
> 
> 标签：html, css, validation, iframe

在我的网站（HTML5）中，我有类似 facebook 的选项。

但是通过**w3c validation**进行验证，它显示的错误如下：

> 元素上的 frameborder 属性`<iframe>`已过时。改用 CSS。

如果我使用 css`style='border:none; overflow:hidden; width:75px; height:27px;` 则它显示

“`<iframe>`元素上的滚动属性已过时。改用 CSS。”

```
<div style='float:left; padding:6px 0 0 0px'>
<iframe allowTransparency='true' frameborder='0' scrolling='no' src='http://www.facebook.com/plugins/like.php?href=' style='border:none; overflow:hidden; width:75px; height:27px;'></iframe></div>
</div> 
```

如果我要删除每个内联样式并提供 css，那么除了 allowTransparency 之外，它不会显示任何错误。

为什么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T16:11:53.600

根据[W3 HTML5 规范](http://www.w3.org/TR/html5/the-iframe-element.html#the-iframe-element)，iframe 元素没有 allowTransparency、frameborder 或 scrolling 属性。因此，当您尝试包含任何此类属性时，您的页面将永远不会验证。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T16:12:07.923

应该删除这些属性，而不是内联样式。

1.  允许透明度属性
2.  边框属性
3.  滚动属性

# java - XML 文件中的 Java 错误：正在中止构建

> ID：11810036
> 
> 赞同：0
> 
> 时间：2012-08-04T16:06:00.150
> 
> 标签：java, android, google-maps

我下载了一个安卓应用程序，以便学习如何构建地图应用程序，我需要一些帮助才能让它运行良好。我已经添加了必要的库，并配置了 AVD。现在我需要让它运行，但我一直遇到下面的错误，需要一些帮助来解决这个问题。做项目清理并没有帮助解决这个问题。

在这种情况下，我在哪里寻找问题？我删除了 main.xml.out 文件，运行它，它被重新创建，然后出现同样的错误。我该怎么做才能解决主要问题？它会是什么？

```
 ---this is the content of my main.xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >
    <FrameLayout 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
        <com.google.android.maps.MapView
        android:id="@+id/mapView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:clickable="true"
        android:apiKey="0yNvLwdK_rMeMIYkMdOTNTttBcxQ0O_rgNLE_Mw"/>
    </FrameLayout>
</LinearLayout> 
```

这是错误日志

```
 [2012-08-04 10:07:43 - SDK Manager] Created AVD 'MAPAPP1' based on Android 2.1, ARM (armeabi) processor,
[2012-08-04 10:07:43 - SDK Manager] with the following hardware config:
[2012-08-04 10:07:43 - SDK Manager] hw.lcd.density=240
[2012-08-04 10:07:43 - SDK Manager] vm.heapSize=24
[2012-08-04 10:07:58 - SDK Manager] SD Card already present with same size, was not changed.
[2012-08-04 10:07:58 - SDK Manager] Updated AVD 'MapApp' based on Google APIs (Google Inc.), ARM (armeabi) processor,
[2012-08-04 10:07:58 - SDK Manager] with the following hardware config:
[2012-08-04 10:07:58 - SDK Manager] hw.lcd.density=240
[2012-08-04 10:07:58 - SDK Manager] vm.heapSize=24
[2012-08-04 10:47:07 - com.shawnbe.mallfinder.MallFinderActivity] Error in an XML file: aborting build.
[2012-08-04 10:47:40 - com.shawnbe.mallfinder.MallFinderActivity] res\layout\main.xml:0: error: Resource entry main is already defined.
[2012-08-04 10:47:40 - com.shawnbe.mallfinder.MallFinderActivity] res\layout\main.out.xml:0: Originally defined here.
[2012-08-04 10:47:40 - com.shawnbe.mallfinder.MallFinderActivity] C:\Development\JAVAWorkSpace\com.shawnbe.mallfinder.MallFinderActivity\res\layout\main.out.xml:1: error: Error parsing XML: no element found
[2012-08-04 10:48:16 - com.shawnbe.mallfinder.MallFinderActivity] Error in an XML file: aborting build.
[2012-08-04 10:49:25 - SDK Manager] Deleting file C:\Users\Ogechineke\.android\avd\MapApp.ini
[2012-08-04 10:49:25 - SDK Manager] Deleting folder C:\Users\Ogechineke\.android\avd\MapApp.avd
[2012-08-04 10:49:25 - SDK Manager] AVD 'MapApp' deleted.
[2012-08-04 10:49:35 - com.shawnbe.mallfinder.MallFinderActivity] Error in an XML file: aborting build. 
```

有没有办法配置它，以便在错误/退出时删除生成的 xml.out 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T16:11:10.480

使用 Eclipse 和 Android XML 文件构建时有时会出错。

*   删除所有 .xml.out 文件
*   保存并清理一切
*   关闭所有 XML 文件
*   在包资源管理器中单击并突出显示您的项目
*   然后尝试运行

当我打开并选择 XML 文件并尝试运行 Android 项目时出现此错误。我希望我能更多地了解 Eclipse 生成这些 .out 文件的原因。让我们知道这是否能解决您的问题。

# java - 如何使用 Java 在 XML 文件中添加换行符？

> ID：11810040
> 
> 赞同：5
> 
> 时间：2012-08-04T16:06:48.597
> 
> 标签：java, xml, newline

如何在“请勿编辑此文件”注释后添加换行符？我尝试添加带有换行符的文本节点，但它不起作用。

代码：

```
import java.io.File;

import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.transform.OutputKeys;
import javax.xml.transform.Transformer;
import javax.xml.transform.TransformerFactory;
import javax.xml.transform.dom.DOMSource;
import javax.xml.transform.stream.StreamResult;

import org.w3c.dom.Document;
import org.w3c.dom.Element;

public class Main {
    public static void main(String[] args) {
        try {
            final Document doc = DocumentBuilderFactory.newInstance().
                    newDocumentBuilder().newDocument();

            doc.appendChild(doc.createComment(" DO NOT EDIT THIS FILE "));

            final Element rootElement = doc.createElement("projects");
            doc.appendChild(rootElement);

            final Transformer transformer = TransformerFactory.newInstance().newTransformer();
            transformer.setOutputProperty(OutputKeys.INDENT, "yes");
            transformer.setOutputProperty("{http://xml.apache.org/xslt}indent-amount", "2");
            transformer.transform(new DOMSource(doc), new StreamResult(new File("C:/abc.xml")));
        } catch ( Exception e ) {
            e.printStackTrace();
        }
    }
} 
```

输出：

```
<!-- DO NOT EDIT THIS FILE --><projects/> 
```

![](../Images/d70d720f7e9525c83375e62cabc1af5b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T17:27:41.780

注释后没有 newLine，因为即使您激活了缩进，注释和后续节点的深度也是 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T17:05:37.173

当我运行你的代码时，我也有一个空行。您是在编辑器中查看文件，还是解析并显示它？我问是因为 xml:space="preserve" 设置在您的解析器代码中可能会出现问题，如果是这样的话。

另一种选择是将注释放在 XML 根元素本身中：

```
 final Element rootElement = doc.createElement("projects");
        doc.appendChild(rootElement);
        rootElement.appendChild(doc.createComment(" DO NOT EDIT THIS FILE ")); 
```

在几个方面，这更具互操作性。例如，假设您使用 xinclude 将 then 嵌入到文件的最终版本中。您在问题中的方式不会包含不编辑文件的通知。如果你把它放在根元素中，它会（你可能应该改变它来说明不编辑这个项目元素的内容，而不是出于同样的原因说文件）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-08T19:22:57.380

您可以使用以下命令在 XML 文件中添加换行符：\n 或：

```
<string name="yourString">new line starts now \n this is a new line</string> 
```

此外，您应该重新考虑不使用尖括号的文本格式。

# javascript - javascript变量中的简单iframe

> ID：11810042
> 
> 赞同：0
> 
> 时间：2012-08-04T16:06:51.867
> 
> 标签：javascript, html, variables, iframe

我正在尝试 iframe google.com 我已经尝试了几十种组合，但页面一直空白。

```
<script type="text/javascript">

var urlPath=http://google.com;
document.write('<iframe scrolling="yes" height="350" width ="350" src="'+urlPath+'"><\/iframe>');

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T16:10:30.827

```
var urlPath='http://google.com'; 
```

只需修复变量值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T16:23:01.397

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T16:17:45.660

您的代码中有错误。看到这个 jsFiddle [http://jsfiddle.net/davew9999/JqHG9/](http://jsfiddle.net/davew9999/JqHG9/)

```
var urlPath = "http://www.google.com";
document.write('<iframe scrolling="yes" height="350" width ="350" src="' + urlPath + '"></iframe>');​ 
```

不知道你为什么在 JavaScript 中做你可以做

```
<iframe scrolling="yes" height="350" width ="350" src="http://www.google.com"></iframe> 
```

需要注意的一点是，[http://www.google.com](http://www.google.com)不会加载到 iFrame 中，正如 Greg Rozmarynowycz 的评论中提到的那样，Google 不允许您将其加载到非 Google 托管的 iFrame 中. 将 src 更改为[http://www.amazon.com](http://www.amazon.com)以查看代码是否有效。

# wmi-query - PNPDeviceID 是否唯一

> ID：11810046
> 
> 赞同：4
> 
> 时间：2012-08-04T16:07:16.283
> 
> 标签：wmi-query

我想知道 USB 驱动器的 PNPDeviceID 是否唯一（至少对于相同设备的充电）以及 ID 是否不变。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T12:17:43.190

据我所知 - 不。例如，“USBSTOR\DISK&VEN_LG&PROD_USB_DRIVE&REV_1100\AA04012700014149 **&0** ” - 是 USB 记忆棒的设备 ID。对于所有这些给定的 USB 棒设备 ID 将是相同的。但是 Windows 添加了一个设备的实例 ID（“ **&0** ”），所以它可以区分它们。如果您插入两个相同的 U 盘，则每个 U 盘的设备 ID 将不同，例如：USBSTOR\DISK&VEN_LG&PROD_USB_DRIVE&REV_1100\AA04012700014149 **&0** USBSTOR\DISK&VEN_LG&PROD_USB_DRIVE&REV_1100\AA04012700014149 **&1**

PS 有时，如果没有插入另一个相同的设备，Windows 不会添加设备的实例。（我不知道为什么）

# windows-phone-7 - 如何将 LongListSelector 的当前组名保持在顶部

> ID：11810049
> 
> 赞同：0
> 
> 时间：2012-08-04T16:07:54.083
> 
> 标签：windows-phone-7, windows-phone-8, listbox, longlistselector

我确定以前有人问过，但我找不到答案。是否可以使用 LongListSelector 控件始终显示当前组的名称？就像它在人员中心工作一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-25T09:46:42.820

这只是一个片段。请根据需要进行修改。

```
var transform = llstItems.TransformToVisual(Application.Current.RootVisual);
Point pointTarget = transform.Transform(new Point(0, 0));
pointTarget.X += 5;
pointTarget.Y += 6;
List<UIElement> elements = (List<UIElement>)VisualTreeHelper.FindElementsInHostCoordinates(pointTarget, Application.Current.RootVisual);
if (elements != null && elements.Count > 0)
{
    TextBlock textGroupedHeader = elements[0] as TextBlock;
    if (textGroupedHeader != null)
    {
        Main.GroupTitle = textGroupedHeader.Text;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T12:06:12.703

您可以将控件作为 Windows Phone 工具包的一部分获取

[https://nuget.org/packages/WPtoolkit](https://nuget.org/packages/WPtoolkit)

# .net - 汽车.net平台

> ID：11810053
> 
> 赞同：0
> 
> 时间：2012-08-04T16:08:14.743
> 
> 标签：.net, .net-micro-framework

我希望在.net 平台上编写我自己的软件，我可以在我的车上运行。

*   Beed 以我可以安装在仪表板中或看不见的方式包装外形尺寸
*   需要支持液晶面板
*   停在家里时需要支持 wifi 连接到我的家庭网络
*   支持汽车熄火时低电量使用
*   支持外置存储，可能是ssd
*   我想利用现有软件进行媒体播放——主要是音频，视频对我来说不是问题。

我会寻找一个可以运行 .net 嵌入式或完整 .net 的平台吗？对硬件平台有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T18:33:07.877

我建议使用任何一个 iOS 设备（iTouch、iPhone 或 iPad）或使用[Xamarin](http://xamarin.com/features)应用程序之一（用于 .Net 的 Monotouch 或用于 Android 的 Monodroid）编程的 Android 设备（手机或平板电脑）。

这些应用程序支持一组良好的 .Net 框架，我们使用 Monotouch 在很短的时间内成功地将一个非常大的 .Net windows 平板电脑应用程序移植到 iPad。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T15:46:53.687

我会研究一个专为汽车使用而设计的带有 12vDC 电源的微型 ITX 机箱。这里列出了一堆这样的东西：http: [//www.mini-box.com/s.nl/sc.8/category.101/.f](http://www.mini-box.com/s.nl/sc.8/category.101/.f)

专为汽车设计的电源很好，因为它们会监控汽车的点火状态，并在您关闭汽车时向主板发送睡眠或关机信号。

从那里，您可以运行普通的 Win XP 或带有 Mono 的 Linux，并使用常规的 .NET 框架，而不是弄乱微框架。

当然，在里面放一个 SSD，因为旋转的机械驱动器在崎岖不平的道路上不会持续很长时间 :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T15:23:41.510

如果您想使用 .NET 框架（如您所提到的），那么 Micro Framework 或 Compact 框架（使用 Windows CE 6 或 Compact 7）就可以完成这项工作。微框架功能较弱，尤其是当您想要获得一些显示丰富的应用程序时。它通常在 ARM7 上运行，而很少在 ARM9 上运行，但您将需要做更多的工作。此外，许多板的成本更低，并且可以通过附加板轻松满足您的需求。

第二个选择是 Windows Compact7 或具有 Compact 框架的 Embedded CE。比MF更强大但对硬件要求更高。

您可以尝试使用 x86 并使用桌面 Windows（或 Windows Embedded Standard）并拥有完整的 .NET 框架。

对于微框架，我会推荐 tinyclr.com，因为他们周围有相当大且非常有帮助的社区。

如果紧凑的框架是硬件的选择，那么它实际上取决于您需要什么样的外围设备。例如显示分辨率、触摸界面、键盘/小键盘等。

# django - 美味派：PUT 不起作用：从请求的数据流中读取后，错误无法访问正文

> ID：11810054
> 
> 赞同：1
> 
> 时间：2012-08-04T16:08:22.913
> 
> 标签：django, tastypie

我正在浏览器中使用 REST 客户端尝试 django-tastypie（邮递员）

GET 效果很好：

```
GET http://127.0.0.1:8000/api/v1/entry/
GET http://127.0.0.1:8000/api/v1/entry/1/ 
```

但我无法让 PUT 与条目一起使用：

```
PUT GET http://127.0.0.1:8000/api/v1/entry/1/ 
```

我收到此错误：

```
{
    "error_message": "You cannot access body after reading from request's data stream",
    ...
} 
```

我允许资源中的方法。它可以从哪里来？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-05T06:58:23.957

好的，我找到了解决方案。

在邮递员上，选择“原始”选项并输入 json 数据。然后通过单击右上角的“标题”按钮添加 Content-Type 标题。键入“应用程序/json”。

# django - Nginx 不提供 Django 静态文件

> ID：11810061
> 
> 赞同：0
> 
> 时间：2012-08-04T16:08:59.470
> 
> 标签：django, file, static, nginx

我刚刚为一个非常基本的 django 网站配置了我的第一个 django 服务器。我正在使用带有主管和 gunicorn 的 Django 1.4 和 Nginx 1.0.14。

问题是 Nginx 没有像假设的那样提供静态文件，但我不知道为什么，因为这是我第一次使用它。

这是我的静态文件真正存在的路径：

```
/home/cristian/envs/santalupe.com/santalupe/santalupe/static 
```

这是我在 nginx 配置文件中的设置：

```
# Django admin media.
location /media/ {
autoindex on;
    alias /home/cristian/envs/santalupe.com/lib/python2.7/site-packages/django/contrib/admin/static/;
}

# Site media
location /static/ {
autoindex on;
    alias /home/cristian/envs/santalupe.com/santalupe/santalupe/static/;
} 
```

请让我知道在这种情况下我需要做什么，因为我不知道真正的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T12:12:31.023

您不是从 Nginx 提供管理媒体，而是提供普通媒体。尝试类似：

```
location /admin/media/ {
    # this changes depending on your python version
    root /home/cristian/envs/santalupe.com/lib/python2.7/site-packages/django/contrib;
} 
```

请注意如何没有尾部斜杠，并且路径以 contrib 结尾。我在生产中几乎完全成功地使用了这段代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T16:19:44.283

也许服务器上的[manage.py collectstatic](https://docs.djangoproject.com/en/1.4/ref/django-admin/#collectstatic)对您有帮助？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-18T21:26:34.527

这是正确解决方案的良好描述[https://docs.djangoproject.com/en/dev/howto/static-files/#serving-static-files-in-production](https://docs.djangoproject.com/en/dev/howto/static-files/#serving-static-files-in-production)

# .htaccess - 在不破坏真实文件的情况下重写 URL

> ID：11810062
> 
> 赞同：0
> 
> 时间：2012-08-04T16:08:59.220
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

所以我在`RewriteRule`and方面非常糟糕`.htaccess`，我一直在尝试创建一个 RewriteRule，它允许我通过 index.php 重定向目录中不存在的任何请求。

目前看起来是这样的：

```
RewriteEngine On 
RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteRule ^(.*)$ index.php?name=$0 [L] 
```

但是，一旦我开始尝试从重定向的 url 运行 ajax 请求，它就会中断并返回整个重定向页面，而不是目录中任何脚本的返回数据。我很困惑如何才能完成这项工作。\

我想要做的是能够通过 index.php 路由每个非真实请求以及正常的所有其他请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T22:23:58.113

您的 htaccess 代码是正确的。“-f”检查有效文件，“-d”检查有效目录。

*我的猜测是，您从像/some-dir/another-path/*这样的 url 发出相对 ajax 请求，它在内部被重写为*index.php?name=/some-dir/another-path/*。*对my-ajax-data.php*的相对 ajax 请求将发送到*/some-dir/another-path/my-ajax-data.php*，而不是您可能认为的*/my-ajax-data.php 。*尝试在 ajax 请求中使用绝对 URL。好吧，这只是在黑暗中拍摄。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T16:16:42.953

`RewriteCond`您可以使用 RegEx潜入另一个，以防您可以为您的*正常*请求找到一个（或多个）。就像是

```
RewriteEngine On 
RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteCond %{REQUEST_FILENAME} !^*your* *RegEx* *for* *normal* *request*
RewriteRule ^(.*)$ index.php?name=$0 [L] 
```

# css - 意外的格式 - CSS 在

> ID：11810068
> 
> 赞同：1
> 
> 时间：2012-08-04T16:11:09.377
> 
> 标签：css

我有一个 div 说

```
<div id='abc' style='overflow:auto;width:20px'>aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa</div> 
```

这里的滚动效果很好，我可以看到一个滚动条（水平）

但是，当我用图像替换文本 aaaaa... 时，相同的图像被重复多次，它实际上延伸到下一行，并且没有给我一个启用的滚动条

为什么会这样？

我真的很感激这方面的任何帮助

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T16:15:56.047

将 div 的 white-space 属性设置为`white-space:nowrap`

**[jsFiddle 示例](http://jsfiddle.net/j08691/5EpXD/)**

```
div{
  white-space:nowrap;
}​ 
```

# php - 从 fullcalendar 事件打开一个花式框 - 单击该事件会打开先前选择的事件的 url

> ID：11810073
> 
> 赞同：1
> 
> 时间：2012-08-04T16:11:26.340
> 
> 标签：php, jquery, fancybox, fullcalendar

第一次在这里提问。我在这里使用了几个不同的线程来构建一个完整的日历，它在一个花式框中打开事件信息。更具体地说，每一天都有一个链接（结构为一个事件），它在一个花式框中打开该天事件的列表。

我使用以下代码构建了日历和花式框链接：

```
$('#calendar').fullCalendar({
  height: 550,
  eventClick: function(event) {
    if (event.url) {
      $("a").fancybox({
        'href'  : event.url,
        'width' : '6',
        'height'        : '100%',
        'transitionIn'  : 'elastic',
        'transitionOut' : 'elastic',
        'type'          : 'iframe'
      });
      return false;
    }
  },

  eventSources: [
    {
      events: [
      <?php
      $query = "SELECT date, COUNT(*) AS num_events FROM events GROUP BY date ORDER BY date";
      $result = mysql_query($query);
      $numRows = mysql_num_rows($result);
      $count = 0;
      while ($row = mysql_fetch_assoc($result))
      {
        $count++;
        $num_events = $row['num_events'];
        if ($num_events == '1') {$num_events .= ' event';}
        else {$num_events .= ' events';}
        $url = 'dayEvents.php?d='.$row['date'];
        $date = $row['date'];
        ?>
        {
        title   : '<?php echo $num_events; ?>',
        start   : '<?php echo $date; ?>',
        url : '<?php echo $url; ?> '
        }<?php if ($count < $numRows) { echo ","; } ?>
      <?php }?>                             
      ],
      color: 'white',
      textColor: '#2287c4'
    }
  ]
})

}); 
```

这是我正在经历的场景：

我点击链接A，没有任何反应。
我再次单击链接 A，fancybox 打开链接 A 的 url。我退出了fancybox。我点击链接 B，fancybox 再次打开链接 A 的 url。我退出了fancybox。我点击链接 C，fancybox 打开链接 B 的 url。此外，如果我点击日历外的任何链接，它会打开一个带有链接 C 的 URL 的花式框（这在我点击日历中的事件之前不会发生）。

本质上，链接是通过单击延迟，fancybox 正在为页面上的任何链接创建一个事件处理程序。有谁知道可能导致此问题的原因以及我可以做些什么来解决它？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T17:56:54.543

当前，每次您的用户单击事件时，您的代码都会在整个页面上的每个“a”元素上放置一个花哨的框，从而导致您看到的奇怪行为。

不要使用“eventClick”回调，而是将您的fancybox初始化代码放在“eventAfterRender”回调中。顾名思义，这个回调在每个日历事件被绘制之后被调用。这样，精美的盒子将在日历加载时初始化，并在用户单击事件时准备就绪。

此外，您需要将 jquery 选择器从 $("a").fancybox(.... 修改为 $("a",element).fancybox(... 其中 'element' 是提供给 eventAfterRender 回调的参数通过 fullcalendar（请参阅 eventAfterRender 函数上的 fullcalendar 文档）。这会将选择器限制为刚刚呈现的单个日历事件的 div。

**编辑** 在阅读了有关 fancybox 的更多信息后，我发现您可以直接打开它，而无需先将其附加到 <a> 元素。这可能是比我上面建议的更好的解决方案，因为除非用户实际单击日历事件，否则您不会初始化任何花式框。因此，在您的完整日历初始化中，只需将您的 eventClick 替换为以下内容：

```
eventClick: function(event) {
    if (event.url) {
      $.fancybox({
        'href' : event.url,
        'type' : 'iframe',
         other options as you like...
      });
      return false;
    }
  }, 
```

# php - 从 URL 中提取图像 - 仅限 jpeg - 一种不同的方法

> ID：11810075
> 
> 赞同：0
> 
> 时间：2012-08-04T16:11:47.120
> 
> 标签：php, dom

我正在尝试从网页中提取图像。

我正在使用以下代码，但它没有输出，尽管我知道那里有一些（以 ebay 页面为例）

```
$html = "http://www.ebay.co.uk/itm/190706137456?_trkparms=clkid%3D1088812801530482649&_qi=RTM944765";
$dom = new domDocument;
@$dom->loadHTML($html);
$dom->preserveWhiteSpace = false;
$images = $dom->getElementsByTagName('img');
foreach ($images as $image) {
echo $image->getAttribute('src');
} 
```

除此之外，是否可以仅提取 jpg 图像，然后仅提取高于特定高度/宽度尺寸的图像？

我最近一直在使用 simple_html_dom，但它很多时候都失败了，而且我发现它很慢。

有没有办法，例如，而不是寻找 'img' 和 'src' 来找到以 '.jpg' 结尾的任何内容，而在 'http://...etc etc..' 之前删除所有内容

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T16:47:14.697

尝试使用 $dom->loadHTMLFile() 而不是 $dom->loadHTML。所以...

```
$html = "http://www.ebay.co.uk/itm/190706137456?_trkparms=clkid%3D1088812801530482649&_qi=RTM944765";
$dom = new domDocument();
$dom->loadHTMLFile($html); 
```

您可以在 foreach() 循环中过滤图像类型（并仅获取文件名）。尝试这样的事情：

```
$images = $dom->getElementsByTagName('img');
foreach ($images as $image) {
  $filename = basename($image->getAttribute('src'));
  $ext = pathinfo($filename, PATHINFO_EXTENSION);
  if ($ext == 'jpg') {
     echo $filename . '<br>';
  }
} 
```

您还可以按图像宽度和高度进行过滤，但它如何找到宽度和高度似乎很奇怪。你会想象通过使用这些属性......

```
$width = $image->getAttribute('width');
$height = $image->getAttribute('height'); 
```

...它会吐出 width="xxx" 和 height="yyy" ...但它不会。看起来它取而代之的是样式属性。所以记住这一点。话虽如此，您也可以对宽度和高度使用类似的解决方案。像这样：

```
$images = $dom->getElementsByTagName('img');
foreach ($images as $image) {
   $filename = basename($image->getAttribute('src'));
   $width = $image->getAttribute('width');
   $height = $image->getAttribute('height');
   $ext = pathinfo($filename, PATHINFO_EXTENSION);
   if ($ext == 'jpg' && ($width > 20 && $height > 10)) {
      echo $filename . "($width x $height)" . '<br>';
   }
} 
```

希望这对你有用。一切都在这里，以备不时之需：

```
$html = "http://www.ebay.co.uk/itm/190706137456?_trkparms=clkid%3D1088812801530482649&_qi=RTM944765";
$dom = new domDocument();
$dom->loadHTMLFile($html);
$dom->preserveWhiteSpace = false;
$images = $dom->getElementsByTagName('img');
foreach ($images as $image) {
   $filename = basename($image->getAttribute('src'));
   $width = $image->getAttribute('width');
   $height = $image->getAttribute('height');
   $ext = pathinfo($filename, PATHINFO_EXTENSION);
   if ($ext == 'jpg' && ($width > 20 && $height > 10)) {
      echo $filename . "($width x $height)" . '<br>';
   }
} 
```

# javascript - 如何从 pls 文件（在线流）中获取曲目名称？(jPlayer, jquery)

> ID：11810076
> 
> 赞同：2
> 
> 时间：2012-08-04T16:11:49.013
> 
> 标签：javascript, jquery, stream, radio, jplayer

是否有任何解决方案可以从 pls 文件中获取曲目名称？（或流）

我使用jPlayer，但找不到信息，如何获取曲目名称...我想查看曲目名称，例如winamp或其他音乐播放器程序。也许我必须对流进行编码？（我对这个问题没有任何想法......）

```
 $("#jquery_jplayer_1").jPlayer({
    ready: function () {
        $(this).jPlayer("setMedia", {
            mp3:"http://87.117.193.10:8000/;stream1"
        }).jPlayer("play");
    },
    swfPath: "js",
    supplied: "mp3",
    //wmode: "window"
}).jPlayer("play"); 
```

# node.js - Node.js：在请求生命周期内从任何函数访问正确/当前的请求对象

> ID：11810078
> 
> 赞同：4
> 
> 时间：2012-08-04T16:11:54.370
> 
> 标签：node.js

我已经收集到，由于 node.js 的事件队列设计和 JavaScript 引用的工作方式，没有一种有效的方法来确定哪个活动请求对象（如果有）产生了当前执行的函数。

如果我实际上弄错了，我该如何维护某种可用于请求生命周期的静态可访问上下文对象，而不是在事件/回调链中的每个函数周围手动传递它？

如果没有办法做到这一点，有没有办法以某种方式包装每个事件调用，以便当它产生时，它会从产生它的事件中复制上下文数据？

我实际上想要实现的是让每条日志消息还包含与日志消息相关的人的用户名。因为回调事件链会变得相当复杂，我想说尝试在应用程序中的每个函数周围传递请求对象对我来说有点混乱，所以希望有另一种方法。

# android - 在路径/预定运动上跟踪 2D 对象

> ID：11810080
> 
> 赞同：-1
> 
> 时间：2012-08-04T16:12:15.160
> 
> 标签：android, opengl-es, 2d, game-physics

我正在制作一个 openGL 自上而下的太空射击游戏来学习如何创建游戏。我有很多基础知识（游戏循环、逻辑隔离等）。

我遇到的一个问题是如何创建更复杂的对象运动。我目前有一些敌人在屏幕上以正弦波移动。我想让他们执行更复杂的动作，例如向下移动屏幕，停止，然后重新开始，也许在这个过程中做一些循环。

我已经将我的移动逻辑分解成它自己的 EnemyMovement 接口，我可以将它附加到任何类型的敌人身上。这是我的正弦波运动课程：

```
package com.zombor.shooter.movement;

import com.zombor.game.framework.math.Vector2;

public class Sine implements EnemyMovement
{
  private int direction;
  private float totalTime = 0;
  private float deltaTime;

  private int originalX;
  private int originalY;

  private float yVelocity = -4f;
  private float xVelocity = 0;

  public Sine(int x, int y)
  {
    direction = Math.random() > 0.5 ? 1 : -1;
    originalX = x;
    originalY = y;
  }

  public void setDeltaTime(float deltaTime)
  {
    this.deltaTime = deltaTime;
    totalTime+=deltaTime;
  }

  private float xVal()
  {
    return originalX + (float) Math.sin(Math.PI+totalTime)*2*direction;
  }

  public void setPosition(Vector2 position)
  {
    position.add(xVelocity * deltaTime, yVelocity * deltaTime);
    position.x = xVal();
  }
} 
```

我的对象有位置、速度和加速度矢量。

是否有一种普遍接受的方式来进行脚本运动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T00:36:58.117

我正在寻找贝塞尔曲线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T17:58:25.817

对于脚本运动，仅使用速度和位置而不使用加速度可能会更容易。另外，你用的是游戏引擎吗？我会推荐像[AndEngine](http://www.andengine.org/)这样的东西，而不是重新发明轮子。

# youtube - 搜索 youtube 视频

> ID：11810081
> 
> 赞同：0
> 
> 时间：2012-08-04T16:12:17.283
> 
> 标签：youtube

如何在 youtube 上搜索“python 教程”视频？我得到了很多不相关的搜索结果。我需要知道的是上传了超过 20 分钟的 Python 相关视频的用户列表。

更新：

换句话说，我需要废弃以下 URL 并找到唯一用户，例如 PythonItalia

[http://www.youtube.com/results?search_type=videos&search_category=28&search_duration=long&search_query=title%3Apython&page=10](http://www.youtube.com/results?search_type=videos&search_category=28&search_duration=long&search_query=title%3Apython&page=10)

它是否支持 NOT 运算符？这样我就可以排除用户或类别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T20:28:59.787

用你的 API_KEY 和 YOUR_REGION 尝试这样的事情：

[https://www.googleapis.com/youtube/v3/search?part=id,snippet&key=API_KEY&type=video®ionCode=YOUR_REGION&q=python+tutorial&maxResults=2](https://www.googleapis.com/youtube/v3/search?part=id,snippet&key=API_KEY&type=video&regionCode=YOUR_REGION&q=python+tutorial&maxResults=2)

至于 {API_KEY}，它在此处启用， 如果您注册了您的应用程序，则在[API 控制台中。](https://code.google.com/apis/console/)如果不是这样，你必须这样做。

至于{YOUR_REGION}，请[在此处查看并选择](http://www.iso.org/iso/country_codes/iso_3166_code_lists/country_names_and_code_elements.htm)

一般来说，[这里描述的一切](https://developers.google.com/youtube/v3/docs/search/list)

我也在做这个:-)

# javascript - getElementById() 空错误

> ID：11810083
> 
> 赞同：1
> 
> 时间：2012-08-04T16:12:19.483
> 
> 标签：javascript, alert, getelementbyid, textinput

对于那些在问题之前想要解决方案的人：

1) 在真正创建之前不要使用 getElementById() 读取元素：参见 windows.onload。

2 ) 如果你使用 XMLHTTPRequest 和 AJAX 的东西，调用你 getElementById() ，或者解锁这个函数，在回调中，（xhr_object.readyState == 4 部分你的请求）。

在我的情况下，我调用我的页面而不使用所需的回调（noobish Ctrl-C Ctrl-V 样式）。

这是问题：

我在 HTML/Javascript 代码中遇到了一个奇怪的情况。此代码的目的是通过 JS 函数获取 HTML 输入（输入文本）的值。

上下文是一个主 HTML 页面加载我所有的 JS 函数，并通过 HTTPRequest 在子 div 中按需加载 HTML 内容。

加载 div 后调用所选代码。

这是我必须阅读的 PHP 生成的输入字段：

```
 <input id="listejf" type="text" value="6|7|"> 
```

这是我的 JavaScript 调用：

```
 listejf=document.getElementById('listejf').value;
    alert(listejf); 
```

此代码不起作用。Firebug 发给我：

> 类型错误：document.getElementById("listejf") 为空

`getElementById`奇怪的是，如果我这样调用它，我可以让它工作`alert`：

```
 alert(document.getElementById("listejf"));
    listejf=document.getElementById('listejf').value;
    alert(listejf); 
```

第一个`alert`显示`null`，但第二个显示“6|7|”，如预期的那样。

现在，2个问题：

*   为什么警报使它起作用？
*   如何在不到处发出警报的情况下使其工作？

重新编辑，代码不见了：

这是主要的 HTML 页面：main.html

```
<head>
    <script type="application/javascript" src="./preload.js"></script>
</head>
<body>
    <a href="#" onCLick="CallPagen()">Link</a>
    <div id="targetid"></div>
</body> 
```

preload.js 看起来像这样：

```
function CallPagen() {
    envoieRequete('./PageN.php', 'targetid');
}

function mytestfunction() {
    listejf = document.getElementById('listejf').value;
    alert(listejf);
}

function envoieRequete(url, id) {
    var xhr_object = null;
    if (window.XMLHttpRequest) xhr_object = new XMLHttpRequest();
    else if (window.ActiveXObject) xhr_object = new ActiveXObject("Microsoft.XMLHTTP");
    xhr_object.open("GET", url, true);
    xhr_object.onreadystatechange = function () {
        if (xhr_object.readyState == 4) {
            if (!document.getElementById(id)) {
                alert("id pas trouvé " + id);
            }
            document.getElementById(id).innerHTML = xhr_object.responseText;
            mytestfunction();
        }
    };
    xhr_object.send(null);
} 
```

PageN.php 只是用填充的值回显 inputtext 字段。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T16:30:42.063

> *“......如果我通过这样的方式调用getelement，我可以让它工作`alert`......”*

这几乎总是意味着您正在发出***异步***AJAX 请求。

> *“为什么 alert 让它起作用？”*

发生的情况是`alert`下一行代码的处理延迟了足够长的时间以使响应返回。

如果没有`alert`，下一行代码将立即运行，并且该元素尚不可用。

> *“我怎样才能让它在不到处发出警报的情况下工作？”*

这是一个*非常*普遍的问题。解决方案是您需要将任何*依赖*于 XMLHttpRequest 请求响应的代码放入请求***的回调***中。

因此，如果您通过本机 API 发出请求，您将添加一个`onreadystatechange`回调......

```
xhrRequest.onreadystatechange = function() {
    if (xhrRequest.readyState === 4) {
        // append the response text to the DOM

        listejf=document.getElementById('listejf').value;
        alert(listejf);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T16:18:29.597

您应该在 DOM 准备好之后运行代码，当`alert()`被调用时，文档正在加载并且浏览器有时间创建 DOM 对象，请尝试以下操作：

> load 事件在文档加载过程结束时触发。至此，文档中的所有对象都在 DOM 中，所有图片和子帧都加载完毕。

```
window.onload = function() {
    var listejf = document.getElementById('listejf').value;
    alert(listejf);
}; 
```

# macos - IA-32 汇编 cpuid 使用 printf

> ID：11810085
> 
> 赞同：0
> 
> 时间：2012-08-04T16:12:47.213
> 
> 标签：macos, assembly, x86

我正在尝试遵循 Mac OS X Monttain Lion 上的 Professional Asssembly Language 一书。在谷歌上，我在以下网址找到了 Mac OS X 的端口：[MacOS X 上的组装](http://fabiensanglard.net/macosxassembly/index.php)

使用 Vim 创建文件并使用 GAS 编译： as -g -arch i386 -o cpuid.o cpuid.s 使用 gcc 链接代码： gcc -m32 -arch i386 -o cpuid cpuid.o

生成的可执行 cpuid 运行没有错误，但如果我尝试在最后使用 gdb 调试它，它会显示 Program exited with code 044 而不是 Program exited normal.

试图找到一种让它正确退出的方法我在 C 中创建了一个 hello world 示例并生成了汇编代码： gcc -Wall -03 -m32 -fno-PIC hello_pf.c -S -o hello_pf.s 结果汇编代码如下：

```
 .section        __TEXT,__text,regular,pure_instructions
        .globl  _main
        .align  4, 0x90
_main:  
        pushl   %ebp 
        movl    %esp, %ebp
        subl    $24, %esp
        leal    L_.str, %eax
        movl    %eax, (%esp)
        call    _puts
        movl    $0, -8(%ebp)
        movl    -8(%ebp), %eax
        movl    %eax, -4(%ebp)
        movl    -4(%ebp), %eax
        addl    $24, %esp
        popl    %ebp
        ret

        .section        __TEXT,__cstring,cstring_literals
L_.str: 
        .asciz   "Hello world!\n"

.subsections_via_symbols 
```

*   有人可以就这个问题提供任何帮助吗？
*   如何使用 IA-32 mac ox s 程序集从上面提供的链接制作 cpuid 的工作版本？
*   我在哪里可以找到有关 Mac OS X 中堆栈对齐问题的详细说明？我已经阅读了 Apple 网站上的内容，但对于初学者来说并不是很有帮助。
*   上述示例代码中调用 _puts 后的指令是什么？
*   从程序集中调用 libc 函数如何真正起作用？关于这个主题的任何好的详细文章？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T16:37:42.693

首先，您需要了解调用约定中的寄存器用法，这是一个很好的地方

[http://www.agner.org/optimize/calling_conventions.pdf](http://www.agner.org/optimize/calling_conventions.pdf)

您会发现在 Mac OS X 64 位上，返回“int”的函数（例如 main()）的返回值在 %rax 中。您似乎想使用 32 位可执行文件，在这种情况下，返回值在 %eax 中。将寄存器归零的一种方便方法是将其与自身进行异或，因此您应该将其添加到例程的末尾：

```
xorl  %eax,%eax 
```

这会将 %eax 设置为零，这将是您的退出代码。

# eclipse - Eclipse Juno 启动错误日志文件

> ID：11810102
> 
> 赞同：35
> 
> 时间：2012-08-04T16:14:54.333
> 
> 标签：eclipse

我一直在使用 Eclipse Juno 非常好，直到最近我启动它时收到以下错误：

发生了错误。查看日志文件 C:\Users\Quinn\workspace.metadata.log

我对编程比较陌生，因此非常感谢外行的任何帮助。谢谢！

.log 文件非常长，所以我只添加最后一部分。如果您需要更多信息。请不要害怕问。谢谢！

```
!SESSION 2012-08-04 12:08:30.616 -----------------------------------------------
eclipse.buildId=I20120608-1400
java.version=1.6.0_33
java.vendor=Sun Microsystems Inc.
BootLoader constants: OS=win32, ARCH=x86_64, WS=win32, NL=en_US
Framework arguments:  -product org.eclipse.epp.package.java.product
Command-line arguments:  -os win32 -ws win32 -arch x86_64 -product org.eclipse.epp.package.java.product

!ENTRY org.eclipse.core.resources 2 10035 2012-08-04 12:08:32.307
!MESSAGE The workspace exited with unsaved changes in the previous session; refreshing workspace to recover changes.

!ENTRY org.eclipse.equinox.preferences 4 2 2012-08-04 12:08:34.434
!MESSAGE Problems occurred when invoking code from plug-in: "org.eclipse.equinox.preferences".
!STACK 0
java.lang.ExceptionInInitializerError
    at org.eclipse.wb.internal.core.preferences.PreferenceInitializer.initializeDefaultPreferences(PreferenceInitializer.java:50)
    at org.eclipse.core.internal.preferences.PreferenceServiceRegistryHelper$1.run(PreferenceServiceRegistryHelper.java:300)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.core.internal.preferences.PreferenceServiceRegistryHelper.runInitializer(PreferenceServiceRegistryHelper.java:303)
    at org.eclipse.core.internal.preferences.PreferenceServiceRegistryHelper.applyRuntimeDefaults(PreferenceServiceRegistryHelper.java:131)
    at org.eclipse.core.internal.preferences.PreferencesService.applyRuntimeDefaults(PreferencesService.java:368)
    at org.eclipse.core.internal.preferences.DefaultPreferences.applyRuntimeDefaults(DefaultPreferences.java:166)
    at org.eclipse.core.internal.preferences.DefaultPreferences.load(DefaultPreferences.java:237)
    at org.eclipse.core.internal.preferences.EclipsePreferences.create(EclipsePreferences.java:410)
    at org.eclipse.core.internal.preferences.EclipsePreferences.internalNode(EclipsePreferences.java:663)
    at org.eclipse.core.internal.preferences.EclipsePreferences.node(EclipsePreferences.java:805)
    at org.eclipse.core.internal.preferences.AbstractScope.getNode(AbstractScope.java:38)
    at org.eclipse.core.runtime.preferences.DefaultScope.getNode(DefaultScope.java:76)
    at org.eclipse.ui.preferences.ScopedPreferenceStore.getDefaultPreferences(ScopedPreferenceStore.java:250)
    at org.eclipse.ui.preferences.ScopedPreferenceStore.getPreferenceNodes(ScopedPreferenceStore.java:285)
    at org.eclipse.ui.preferences.ScopedPreferenceStore.internalGet(ScopedPreferenceStore.java:475)
    at org.eclipse.ui.preferences.ScopedPreferenceStore.getBoolean(ScopedPreferenceStore.java:387)
    at org.eclipse.wb.internal.core.editor.describer.JavaSourceUiDescriber.isGUISource(JavaSourceUiDescriber.java:65)
    at org.eclipse.wb.internal.core.editor.describer.JavaSourceUiDescriber.describe(JavaSourceUiDescriber.java:52)
    at org.eclipse.core.internal.content.ContentTypeCatalog.describe(ContentTypeCatalog.java:218)
    at org.eclipse.core.internal.content.ContentTypeCatalog.collectMatchingByContents(ContentTypeCatalog.java:190)
    at org.eclipse.core.internal.content.ContentTypeCatalog.internalFindContentTypesFor(ContentTypeCatalog.java:403)
    at org.eclipse.core.internal.content.ContentTypeCatalog.internalFindContentTypesFor(ContentTypeCatalog.java:450)
    at org.eclipse.core.internal.content.ContentTypeCatalog.getDescriptionFor(ContentTypeCatalog.java:346)
    at org.eclipse.core.internal.content.ContentTypeCatalog.getDescriptionFor(ContentTypeCatalog.java:360)
    at org.eclipse.core.internal.content.ContentTypeMatcher.getDescriptionFor(ContentTypeMatcher.java:86)
    at org.eclipse.core.internal.resources.ContentDescriptionManager.readDescription(ContentDescriptionManager.java:445)
    at org.eclipse.core.internal.resources.ContentDescriptionManager.getDescriptionFor(ContentDescriptionManager.java:355)
    at org.eclipse.core.internal.resources.File.internalGetCharset(File.java:246)
    at org.eclipse.core.internal.resources.File.getCharset(File.java:207)
    at org.eclipse.core.internal.resources.File.getCharset(File.java:194)
    at org.eclipse.jdt.internal.core.util.Util.getResourceContentsAsCharArray(Util.java:1156)
    at org.eclipse.jdt.internal.core.builder.SourceFile.getContents(SourceFile.java:79)
    at org.eclipse.jdt.internal.compiler.ReadManager.run(ReadManager.java:173)
    at java.lang.Thread.run(Unknown Source)
Caused by: org.eclipse.swt.SWTException: Invalid thread access
    at org.eclipse.swt.SWT.error(SWT.java:4361)
    at org.eclipse.swt.SWT.error(SWT.java:4276)
    at org.eclipse.swt.SWT.error(SWT.java:4247)
    at org.eclipse.swt.widgets.Display.error(Display.java:1258)
    at org.eclipse.swt.widgets.Display.checkDevice(Display.java:764)
    at org.eclipse.swt.widgets.Display.getSystemFont(Display.java:2459)
    at org.eclipse.jface.preference.PreferenceConverter.<clinit>(PreferenceConverter.java:84)
    ... 35 more

!ENTRY org.eclipse.osgi 4 0 2012-08-04 12:08:35.102
!MESSAGE Application error
!STACK 1
java.lang.NoClassDefFoundError: Could not initialize class org.eclipse.jface.preference.PreferenceConverter
    at org.eclipse.ui.internal.themes.ThemeElementHelper.installFont(ThemeElementHelper.java:103)
    at org.eclipse.ui.internal.themes.ThemeElementHelper.populateRegistry(ThemeElementHelper.java:59)
    at org.eclipse.ui.internal.Workbench$27.runWithException(Workbench.java:1550)
    at org.eclipse.ui.internal.StartupThreading$StartupRunnable.run(StartupThreading.java:31)
    at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)
    at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:135)
    at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:4144)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3761)
    at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2478)
    at org.eclipse.ui.internal.Workbench.access$7(Workbench.java:2386)
    at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:583)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:540)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:619)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:574)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1407)

!ENTRY com.android.ide.eclipse.adt 4 0 2012-08-04 12:08:36.083
!MESSAGE parseSdkContent failed
!STACK 0
java.lang.NullPointerException
    at com.android.ide.eclipse.adt.AdtPlugin.getDisplay(AdtPlugin.java:334)
    at com.android.ide.eclipse.adt.AdtPlugin$7.run(AdtPlugin.java:1422)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)
!SESSION 2012-08-04 12:25:48.967 -----------------------------------------------
eclipse.buildId=I20120608-1400
java.version=1.6.0_33
java.vendor=Sun Microsystems Inc.
BootLoader constants: OS=win32, ARCH=x86_64, WS=win32, NL=en_US
Framework arguments:  -product org.eclipse.epp.package.java.product
Command-line arguments:  -os win32 -ws win32 -arch x86_64 -product org.eclipse.epp.package.java.product

!ENTRY org.eclipse.core.resources 2 10035 2012-08-04 12:25:50.607
!MESSAGE The workspace exited with unsaved changes in the previous session; refreshing workspace to recover changes.

!ENTRY org.eclipse.equinox.preferences 4 2 2012-08-04 12:25:52.846
!MESSAGE Problems occurred when invoking code from plug-in: "org.eclipse.equinox.preferences".
!STACK 0
java.lang.ExceptionInInitializerError
    at org.eclipse.wb.internal.core.preferences.PreferenceInitializer.initializeDefaultPreferences(PreferenceInitializer.java:50)
    at org.eclipse.core.internal.preferences.PreferenceServiceRegistryHelper$1.run(PreferenceServiceRegistryHelper.java:300)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.core.internal.preferences.PreferenceServiceRegistryHelper.runInitializer(PreferenceServiceRegistryHelper.java:303)
    at org.eclipse.core.internal.preferences.PreferenceServiceRegistryHelper.applyRuntimeDefaults(PreferenceServiceRegistryHelper.java:131)
    at org.eclipse.core.internal.preferences.PreferencesService.applyRuntimeDefaults(PreferencesService.java:368)
    at org.eclipse.core.internal.preferences.DefaultPreferences.applyRuntimeDefaults(DefaultPreferences.java:166)
    at org.eclipse.core.internal.preferences.DefaultPreferences.load(DefaultPreferences.java:237)
    at org.eclipse.core.internal.preferences.EclipsePreferences.create(EclipsePreferences.java:410)
    at org.eclipse.core.internal.preferences.EclipsePreferences.internalNode(EclipsePreferences.java:663)
    at org.eclipse.core.internal.preferences.EclipsePreferences.node(EclipsePreferences.java:805)
    at org.eclipse.core.internal.preferences.AbstractScope.getNode(AbstractScope.java:38)
    at org.eclipse.core.runtime.preferences.DefaultScope.getNode(DefaultScope.java:76)
    at org.eclipse.ui.preferences.ScopedPreferenceStore.getDefaultPreferences(ScopedPreferenceStore.java:250)
    at org.eclipse.ui.preferences.ScopedPreferenceStore.getPreferenceNodes(ScopedPreferenceStore.java:285)
    at org.eclipse.ui.preferences.ScopedPreferenceStore.internalGet(ScopedPreferenceStore.java:475)
    at org.eclipse.ui.preferences.ScopedPreferenceStore.getBoolean(ScopedPreferenceStore.java:387)
    at org.eclipse.wb.internal.core.editor.describer.JavaSourceUiDescriber.isGUISource(JavaSourceUiDescriber.java:65)
    at org.eclipse.wb.internal.core.editor.describer.JavaSourceUiDescriber.describe(JavaSourceUiDescriber.java:52)
    at org.eclipse.core.internal.content.ContentTypeCatalog.describe(ContentTypeCatalog.java:218)
    at org.eclipse.core.internal.content.ContentTypeCatalog.collectMatchingByContents(ContentTypeCatalog.java:190)
    at org.eclipse.core.internal.content.ContentTypeCatalog.internalFindContentTypesFor(ContentTypeCatalog.java:403)
    at org.eclipse.core.internal.content.ContentTypeCatalog.internalFindContentTypesFor(ContentTypeCatalog.java:450)
    at org.eclipse.core.internal.content.ContentTypeCatalog.getDescriptionFor(ContentTypeCatalog.java:346)
    at org.eclipse.core.internal.content.ContentTypeCatalog.getDescriptionFor(ContentTypeCatalog.java:360)
    at org.eclipse.core.internal.content.ContentTypeMatcher.getDescriptionFor(ContentTypeMatcher.java:86)
    at org.eclipse.core.internal.resources.ContentDescriptionManager.readDescription(ContentDescriptionManager.java:445)
    at org.eclipse.core.internal.resources.ContentDescriptionManager.getDescriptionFor(ContentDescriptionManager.java:355)
    at org.eclipse.core.internal.resources.File.internalGetCharset(File.java:246)
    at org.eclipse.core.internal.resources.File.getCharset(File.java:207)
    at org.eclipse.core.internal.resources.File.getCharset(File.java:194)
    at org.eclipse.jdt.internal.core.util.Util.getResourceContentsAsCharArray(Util.java:1156)
    at org.eclipse.jdt.internal.core.builder.SourceFile.getContents(SourceFile.java:79)
    at org.eclipse.jdt.internal.compiler.ReadManager.run(ReadManager.java:173)
    at java.lang.Thread.run(Unknown Source)
Caused by: org.eclipse.swt.SWTException: Invalid thread access
    at org.eclipse.swt.SWT.error(SWT.java:4361)
    at org.eclipse.swt.SWT.error(SWT.java:4276)
    at org.eclipse.swt.SWT.error(SWT.java:4247)
    at org.eclipse.swt.widgets.Display.error(Display.java:1258)
    at org.eclipse.swt.widgets.Display.checkDevice(Display.java:764)
    at org.eclipse.swt.widgets.Display.getSystemFont(Display.java:2459)
    at org.eclipse.jface.preference.PreferenceConverter.<clinit>(PreferenceConverter.java:84)
    ... 35 more

!ENTRY org.eclipse.osgi 4 0 2012-08-04 12:25:53.650
!MESSAGE Application error
!STACK 1
java.lang.NoClassDefFoundError: Could not initialize class org.eclipse.jface.preference.PreferenceConverter
    at org.eclipse.ui.internal.themes.ThemeElementHelper.installFont(ThemeElementHelper.java:103)
    at org.eclipse.ui.internal.themes.ThemeElementHelper.populateRegistry(ThemeElementHelper.java:59)
    at org.eclipse.ui.internal.Workbench$27.runWithException(Workbench.java:1550)
    at org.eclipse.ui.internal.StartupThreading$StartupRunnable.run(StartupThreading.java:31)
    at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)
    at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:135)
    at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:4144)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3761)
    at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2478)
    at org.eclipse.ui.internal.Workbench.access$7(Workbench.java:2386)
    at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:583)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:540)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:619)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:574)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1407)

!ENTRY com.android.ide.eclipse.adt 4 0 2012-08-04 12:25:54.453
!MESSAGE parseSdkContent failed
!STACK 0
java.lang.NullPointerException
    at com.android.ide.eclipse.adt.AdtPlugin.getDisplay(AdtPlugin.java:334)
    at com.android.ide.eclipse.adt.AdtPlugin$7.run(AdtPlugin.java:1422)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54) 
```

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-08-07T12:58:10.897

我在用于 Android 开发的 Eclipse Juno 上遇到了同样的问题。

作为 Windows 的解决方法，我从控制台启动它，如下所示：

```
C:\path\to\eclipse\eclipse -clean 
```

[正如这里](https://stackoverflow.com/questions/11310970/eclipse-juno-doesnt-start)所暗示的，您还可以尝试删除文件 YOUR_WORKSPACE/.metadata/.plugins/org.eclipse.core.resources/.snap

这也对我有用，并且（到目前为止）似乎永久解决了这个问题，这与第一个选项不同。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-11-26T11:49:33.583

我通过删除重新开始我的工作区

> org.eclipse.e4.workbench

从 .plugins 文件夹中。然后从`-clean`国旗开始。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-12-03T22:39:51.607

在 Mac 中，您需要删除工作区的此文件

```
.metadata/.plugins/org.eclipse.core.resources/.snap 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-14T02:57:12.330

**删除**：`/[PATH TO WORKSPACE]/.metadata/.plugins/org.eclipse.core.resources` 它将让 eclipse 恢复工作

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-07-17T12:05:16.810

转到您的 Eclipse 工作区并在给定路径中找到 .snap 文件

```
.metadata/.plugins/org.eclipse.core.resources/.snap 
```

删除快照文件应该有魔力，什么是.snap文件好AFAIK

.snap 文件包含运行时 IDE 工作区状态的所有变化，用于 Eclipse 崩溃恢复计划。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-11-19T21:38:08.503

将插件文件夹 org.eclipse.core.resources [可能到桌面] 剪掉，然后启动 eclipse。现在，您将看到没有项目的 Eclipse 打开。现在关闭 Eclipse 并再次将插件文件夹复制回来并启动 Eclipse。现在你应该看到你所有的 Eclipse 项目都打开了。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-08-14T10:29:05.083

在 Windows 8 上出现同样的错误。以管理员身份运行 eclipse 解决了这个问题。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-03-05T05:53:43.470

我已删除元数据文件夹并重新启动 eclipse 并从同一工作区文件夹导入所有项目。问题解决了。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-12-16T04:27:38.113

只需删除 Workspace.metadata.plugins 中的 org.eclipse.core.resources 文件夹即可。但是您必须再次将所有项目导入到 eclipse 中，因此我们删除了 eclipse 的资源处理文件夹。希望这可以帮助

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-02-23T10:28:47.660

删除：/YOUR PATH TO WORKSPACE/.metadata/.plugins/org.eclipse.core.resources

这对我有用

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-11-24T04:41:31.327

简单地删除工作空间中的 .metadata 文件，然后使用相同的路径再次创建工作空间。它对我有用。

# ios - Salesforce 移动 SDK iOS：WebKit 错误：[UIDevice macaddress]

> ID：11810103
> 
> 赞同：0
> 
> 时间：2012-08-04T16:14:56.017
> 
> 标签：ios, webkit, salesforce

输入凭据并授予访问权限后，我在 iPhone 模拟器的输出窗口中收到以下错误：

" *** WebKit 在 webView:decidePolicyForNavigationAction:request:frame:decisionListener:delegate: -[UIDevice macaddress]: unrecognized selector..."

任何建议为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T16:34:20.063

在您的 WebViewDidFinish 方法中，删除您作为子视图添加到视图的 Web 视图。

# php - php json_encode 选项强制非顺序

> ID：11810104
> 
> 赞同：0
> 
> 时间：2012-08-04T16:14:56.877
> 
> 标签：php, json

有没有强制的选项

```
json_encode(array("a", 2, 5)); 
```

生产

```
{"0":"a", "1":2, "2":5}; 
```

我认为做

```
$a =  array("dummy","a", 2, 5);
unset($a[0]);
echo json_encode($a); 
```

有效，但有没有更清洁的方法

**编辑**：

对不起，我实际上需要

```
$a =  array (array("a"), array(2,3), array(5,6,7));
echo json_encode($a, JSON_FORCE_OBJECT); 
```

给：

```
{"0":["a"],"1":[2 , 3],"2":[5, 6, 7]} 
```

代替

```
{"0":{"0":"a"},"1":{"0":2,"1":3},"2":{"0":5,"1":6,"2":7}} 
```

任何想法？

似乎

```
$a =  array ("", array("a"), array(2,3), array(5,6,7));
unset($a[0]);
echo json_encode($a); 
```

是唯一的办法。。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T16:18:37.010

尝试这个：

```
json_encode( (object) array(

  array( "a" ), array( 2, 3 ), array( 5, 6, 7 )

) ); 
```

# python - 如何检查时间值？

> ID：11810106
> 
> 赞同：1
> 
> 时间：2012-08-04T16:15:08.377
> 
> 标签：python, django, time

我想知道给定时间是早上还是下午。我不确定这是否是在 python 中创建 Time 对象并进行比较的正确方法。或者，还有更好的方法？

```
def part_of_day_statistics(x):
    if x > time.strptime('6:00 am') and x < time.strptime('11:59 am'):
        return 'Morning' 
    if x > time.strptime('12:00 pm') and x < time.strptime('5:59 pm'):
        return 'Afternoon' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-04T16:20:05.723

Django[`TimeField`条目](https://docs.djangoproject.com/en/stable/ref/models/fields/#timefield)是[`datetime.time`实例](http://docs.python.org/library/datetime.html#time-objects)，它有一个`.hour`属性（范围从 0 到 23）：

```
def part_of_day_statistics(x):
    if x.hour >= 6 and x.hour < 12:
        return 'Morning'
    if x.hour >= 12 and x.hour < 18:
        return 'Afternoon' 
```

# html - 标签后边距不显示

> ID：11810107
> 
> 赞同：2
> 
> 时间：2012-08-04T16:15:09.610
> 
> 标签：html, css, margin, line-breaks

我有以下（摘录）html：

```
<span id="version">Version 1 <small>Last modified 04/August/2012</small><br>unfinished</span> 
```

以及以下（摘录）CSS：

```
#version {
  font-size: xx-large;
  color: Black;
  text-align: left;
  margin-left: 35px;
}

#version small {
  font-size: 50%;
} 
```

一切都正确显示，直到 <br> 之后，文本未针对边距进行调整。为什么<br>之后没有调整？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T16:19:35.747

因为 span 是一个内联元素。完成您想要的，将跨度上的显示属性设置为块或内联块，或者将跨度更改为 div。

**[jsFiddle 示例](http://jsfiddle.net/j08691/FJqPk/)**

# c - 多线程密码破解器

> ID：11810108
> 
> 赞同：1
> 
> 时间：2012-08-04T16:15:13.570
> 
> 标签：c, multithreading, passwords, cracking

我正在尝试多线程，密码破解器似乎是最简单（比 opengl 更容易）的密集型任务。

是否值得花时间编写多线程密码破解程序？它会提高超线程决斗核心（4 核）的效率吗？

让 1 个线程生成哈希，而另一个线程比较它或在多个线程之间划分生成会更快吗？

我知道很多问题，回答其中任何一个都会很棒，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T16:39:06.240

实际上有很多方法可以做到这一点。为简单起见，您应该划分大部分工作。在这种情况下，很明显大部分工作都是在计算散列时完成的。在不明显的情况下，您将需要分析您的应用程序并找出大部分时间都花在了哪里。但也要记住，许多线程创建/加入都会产生开销，因此最好在开始工作之前为每个线程分配一个工作子集（如果有人找到解决方案，也许检查一些受保护的共享变量）。

但是请注意，根据您将尝试破解的哈希类型（我假设您将是暴力破解），不能保证您的程序会完成。大多数（我指的是任何实用/有效的）散列算法都是在计算不可行的概念下运行的。如果您要生成随机字符串来破解，请注意破解者需要做的就是找到一个碰撞。例如，考虑“cat”和“dog”映射到相同的哈希值并且真正的密码是“dog”的情况。如果您的破解者发现“猫”作为解决方案，那么该解决方案同样可行。然而，这仍然是一个非常困难的问题，也不能保证完成。

另一种选择是字典攻击（因为这是教育性的——这应该是可行的）。如果你正在做一个简单的字典攻击并且这个词不在字典中，你将完全不走运。但是，这保证在您的字典末尾完成。要实现这一点，最好拆分您的字典。如果你有 4 个线程和 1000 个单词的字典，那么每个线程应该得到字典的不同子集（每个都有 250 个条目要处理）。然而，在实践中，大多数受保护的密码可能也有某种形式的盐（只是需要考虑的事情）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T17:09:23.257

最快的多线程设计通常是每个内核一个线程。为什么要线程交换？要做的工作量保持不变。在某些情况下，许多线程可能有助于缓解设计问题，但如果您想要完整的性能，则必须满足设计问题，以便每个内核可以使用一个线程。

我通常所说的核心是指单个非超线程逻辑核心。当然，存在设计技巧，问题可能在于超线程工作正常或可取。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T13:00:14.400

经过广泛的研究，我可以说多线程密码破解器并不是最好的时间利用方式。

多线程虽然能够提高资源效率，但在服务器/客户端交互中也很有用。

在下面的示例中，多线程用于允许服务器同时接受多个客户端并与之交互。

```
while (1) {

    listen(sd,10);
    cliLen=sizeof(cliAddr);
    printf("[LISTINING %u][%u]\n",SERVER_PORT,i);

    //Accept Connection

    newSd = accept(sd, (struct sockaddr *) &cliAddr, &cliLen);
    if(newSd < 0)
    {
        perror("cannot accept connection");
        exit(3);
    }

    pthread_create(&pth, NULL, &connectionManager, (void*)newSd);

    i++;         
} 
```

…………

```
int connectionManager(newSd,data){

send(newSd,"[Connection Created on New Thread]\n\r",strlen("[Connection Created on New Thread]\n\r"), 0);
//pthread_create(&pthsend,NULL, &dataSender, (void*)newSd);
pthread_create(&pthget, NULL, &dataGetter, (void*)newSd);
pthread_join(pthsend, NULL);
pthread_join(pthget, NULL);
close(newSd);
pthread_exit; 

} 
```

可以进行进一步的研究以确定效率“最佳点”。对于所有 Box，这可能会有所不同。

# python - Python 中的位运算是如何工作的？

> ID：11810113
> 
> 赞同：7
> 
> 时间：2012-08-04T16:16:00.170
> 
> 标签：python, bit-manipulation

我今天一直在学习按位运算，我了解到 Not (~) 反转所有位，例如：

```
01010
to
10101 
```

这意味着〜10应该是-5，但我看到它是-11（根据python命令行），它是

```
01010
to
11011 
```

只有两个位被反转。谁能解释为什么不是10101？

编辑：看了我的计算器后，我对它的理解更好了，但是我自己确定二进制和整数的代码仍然很困惑。输入（以字节模式）11110101 给我 -11 但在我的代码中输入的相同给我 -117：

```
def binaryToInt(biNum, bUnsigned = False):
    iNum = 0
    bSign = int(biNum[0]) if not (bUnsigned or biNum[-1] == "u") else 0
    biNum = biNum[(1 if not (bUnsigned or biNum[-1] == "u") else 0):(len(biNum) if biNum[-1] != "u" else -1)]
    for i in xrange(len(biNum)):
        iNum += int(biNum[i]) * 2**(len(biNum) - 1 - i)
    return (iNum if not bSign else -iNum)

def intToBinary(iNum, bUnsigned = False):
    bSign = "1" if iNum < 0 else "0"
    iLoopNum = int((iNum ** 2) ** 0.5) #make positive!
    biNum = ""
    while iLoopNum:
        biNum += str(iLoopNum%2)
        iLoopNum /= 2
    return bSign + biNum[::-1] if not bUnsigned else biNum[::-1] + "u" 
```

你们中的一个可以解释一下吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-04T16:29:57.753

假设值是 32 位，则 10 是

```
00000000000000000000000000001010 
```

如果你反转所有这些位，你会得到

```
11111111111111111111111111110101 
```

或-11。因为它是一个[2的补码系统](http://en.wikipedia.org/wiki/Two's_complement)！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-04T16:21:56.787

`11011`不是*-11*。您对负数的编码方案有误解。

在二进制补码中，-11 是`10101`正确的位反转。

要对二进制补码取反，请反转所有位并加一：

```
01011 eleven
10100 invert
10101 add one gives negative eleven 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-04T06:28:18.020

10101 是 -11，因为在二进制中，-X = ~X + 1。

所以〜X = -X - 1 = -（X + 1）。

# php - 多次调用通配符加载器函数 (_load)

> ID：11810114
> 
> 赞同：2
> 
> 时间：2012-08-04T16:16:06.847
> 
> 标签：php, callback, drupal-7, drupal-modules, drupal-hooks

我有一个加载器函数，每当用户访问页面时都会过度调用它。自然，我只需要它在每个页面请求运行一次，而是多次调用它。早些时候，_load() 只用 MENU_CALLBACK 运行了两次，然后我用默认的 MENU_NORMAL_ITEM 对其进行了测试，它增加到了四次。虽然我已经将它改回来，并清除了我的缓存，但它现在仍然运行了四次，我只希望它运行一次。

我的问题是，为什么我的加载器函数被多次调用？任何见解将不胜感激。

```
$items['daycare/%isValid/home'] = array(
    'title' => 'Daycare Admin Home',
    'page callback' => 'daycares_home_page',
    'load arguments' => array(0),//Passes 1st part of url 'daycare' as 2nd arg
    'page arguments' => array(0),
    'access arguments' => array('access content'),
    'type' => MENU_CALLBACK,
);

function isValid_load($pageID, $pageType){
    /*Do stuff to validate wildcard part of URL. Will throw 404/403 if invalid*/
    return $pageId;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T03:58:24.953

您可以使用[devel](http://drupal.org/project/devel)的[`ddebug_backtrace()`](http://ratatosk.net/drupal/tutorials/debugging-drupal.html)函数来查看调用加载函数的方式/内容。

```
function isValid_load($pageID, $pageType){
    ddebug_backtrace();
    ...
} 
```

当您这样做时，请注意这两个调用可以追溯到[`index.php`](http://api.drupal.org/api/drupal/index.php/7). 第一个引导 Drupal 并初始化主题，而第二个调用实际上完成了呈现页面的工作。虽然这两个动作似乎调用相同[`_menu_translate()`](http://api.drupal.org/api/drupal/includes!menu.inc/function/_menu_translate/7)的结果导致调用你的函数。

附带说明一下，如果您关心性能，您可能[会对这篇关于缓存的 Lullabot 文章](http://www.lullabot.com/articles/beginners-guide-caching-data-drupal-7)感兴趣。

我意识到这是一个部分答案，因为我自己仍然熟悉 Drupal 最深层的工作原理。我欢迎相互竞争的答案，这些答案可以提供更清晰和更完整的解释，解释为什么 Drupal 框架的结构会多次调用 _load 函数。

# ibm-mq - IBM Websphere MQ 集群通道异常结束并频繁恢复

> ID：11810119
> 
> 赞同：1
> 
> 时间：2012-08-04T16:16:58.623
> 
> 标签：ibm-mq

在集群环境中，我看到特定服务器的通道异常结束并在一天内频繁恢复。
例如：QMGR A 有几个 QMGRS(B,C,D,E,F) 连接到它。（每个在不同的服务器中）
来自 QMGR B、C、D、E、F 的集群接收器通道在 QMGR A 上异常结束并恢复一天之内相当频繁。

**QMGR A 日志**

```
    -------------------------------------------------- -----------------------------------------  
2012 年 8 月 4 日 08:44:41 - 进程（1720412.1165）用户（mqad）程序（amqrmppa）  
AMQ9209：与主机“HOST.B (139.120.210.19)”的连接已关闭。  

解释：  
通过 TCP/IP 从“HOST.B (139.120.210.19)”接收数据时出错。  
 与远程主机的连接意外终止。  
行动：  
告诉系统管理员。  
----- amqccita.c : 3094 ---------------------------------------- ---------------  
2012 年 8 月 4 日 08:44:41 - 进程（1720412.1165）用户（mqad）程序（amqrmppa）  
AMQ9999：通道程序异常结束。  

解释：  
频道节目“CHANNEL.TO.B”异常结束。  
行动：  
查看之前的通道程序“CHANNEL.TO.B”的错误消息  
错误文件以确定失败的原因。  
----- amqrccca.c : 777 ---------------------------------------- ----------------  
2012 年 8 月 4 日 08:44:41 - 进程（1720412.1175）用户（mqad）程序（amqrmppa）  
AMQ9209：与主机“HOST.C (155.10.186.20)”的连接已关闭。  

解释：  
通过 TCP/IP 从“HOST.C (155.10.186.20)”接收数据时出错。  
与远程主机的连接意外终止。  
行动：  
告诉系统管理员。  
----- amqccita.c : 3094 ---------------------------------------- ---------------  
2012 年 8 月 4 日 08:44:41 - 进程（1720412.1175）用户（mqad）程序（amqrmppa）  
AMQ9999：通道程序异常结束。  

解释：  
频道节目“CHANNEL.TO.C”异常结束。  
行动：  
查看之前通道程序“CHANNEL.TO.C”的错误消息  
错误文件以确定失败的原因。  
    -------------------------------------------------- -----------------------------------------  

```

**主机 B 上的 QMGR 日志**

```
08/04/2012 08:44:09 AM - 进程（17174.16023）用户（mqad）程序（amqrmppa）
AMQ9259：主机“HOST.A”的连接超时。

解释：
通过 TCP/IP 来自主机“HOST.A”的连接超时。
行动：
检查以查看未在预期时间内收到数据的原因。纠正
问题。重新连接通道，或等待重试通道重新连接
本身。
----- amqccita.c : 3546 ---------------------------------------- ---------------
08/04/2012 08:44:09 AM - 进程（17174.16023）用户（mqad）程序（amqrmppa）
AMQ9999：通道程序异常结束。

解释：
频道节目“CHANNEL.TO.B”异常结束。
行动：
查看之前的通道程序“CHANNEL.TO.B”的错误消息
错误文件以确定失败的原因。

```

**主机 C 上的 QMGR 日志**

```
-------------------------------------------------- -----------------------------------------
2012 年 8 月 4 日 08:44:35 - 进程（462890.4658）用户（mqad）程序（amqrmppa）
AMQ9259：主机“HOST.A”的连接超时。

解释：
通过 TCP/IP 来自主机“HOST.A”的连接超时。
行动：
检查以查看未在预期时间内收到数据的原因。纠正
问题。重新连接通道，或等待重试通道重新连接
本身。
----- amqccita.c : 3341 ---------------------------------------- ---------------
2012 年 8 月 4 日 08:44:35 - 进程（462890.4658）用户（mqad）程序（amqrmppa）
AMQ9999：通道程序异常结束。

解释：
频道节目“CHANNEL.TO.C”异常结束。
行动：
查看之前通道程序“CHANNEL.TO.C”的错误消息
错误文件以确定失败的原因。
----- amqrmrsa.c : 468 ---------------------------------------- ----------------

```

我试图了解是什么原因造成的？如果队列管理器 A 有尽可能多的连接超载，是否会导致？我没有在 qmgr 日志中看到任何 TCP/IP 错误代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-15T12:36:23.183

看起来您正在运行 MQ 的 V7.1 之前的版本？在 MQ V7.1 中，错误消息从以下位置更新：-

```
AMQ9259: Connection timed out from host 'HOST.A'.

EXPLANATION:
A connection from host 'HOST.A' over TCP/IP timed out.
ACTION:
Check to see why data was not received in the expected time. Correct the
problem. Reconnect the channel, or wait for a retrying channel to reconnect
itself. 
```

至

```
AMQ9259: Connection timed out from host 'HOST.A'.

EXPLANATION:
A connection from host 'HOST.A' over TCP/IP timed out.
ACTION:
The select() [TIMEOUT] 60 seconds call timed out. Check to see why data was
not received in the expected time. Correct the problem. Reconnect the channel,
or wait for a retrying channel to reconnect itself. 
```

举个例子。AMQ9259 错误消息的最可能原因是您的接收超时设置导致通道弹出其接收并关闭通道。建议您查看 qm.ini 文件中的接收超时设置，以查看它们是否设置为比您的心跳间隔更短的设置。

通道会自动重新启动，因为您在它们上定义了重试间隔。这很好！

# c# - 通过使用 linq 到实体的结果外键引用 EF4 模型

> ID：11810120
> 
> 赞同：1
> 
> 时间：2012-08-04T16:17:12.463
> 
> 标签：c#, entity-framework-4, linq-to-entities

使用一个大的 EF4 模型，我正在尝试做一些相同的事情，这可以在 linq2sql 中使用单独的 dbml 完成。我遇到的一个基本问题，很可能代表我对 linq 到实体的基本知识缺乏，你如何使用结果引用在被引用的表中查找对象？

例如，我有 4 个表，它们都通过外键链接在一起。

从概念上讲，我可以在结果引用上使用 foreach 遍历所有表，但是看起来很笨拙，如何使用 linq 来编写下面的代码？

```
 //Get book
            var book= db.books.SingleOrDefault(d => d.bookId == 286);

            //If no book, return
            if (book == null) return null;

            //Get the shelf associated with this book
            List<shelf> slist = new List<shelf>();

            foreach (reading r in book.readings)
            { 
                foreach (event re in r.events)
                {
                    slist.Add(re);
                }
            }
            List<event> bookevents = slist.Distinct().ToList();

            //Get the customers associated with the events
            List<int> clist = new List<int>();

            foreach (event eb in bookevents)
            {
                var cust = db.customers.Where(c => c.customerID == eb.inID || c.customerID == eb.outID).ToList();
                clist.AddRange(cust.Select(c => c.customerID));
            }

            //Return the list of customers
            return clist; 
```

编辑：我把它简化为 3 个步骤，发布这个以防其他人遇到类似问题。我欢迎任何关于如何更优雅地做到这一点的评论

```
 //Get book
        var book= db.books.SingleOrDefault(d => d.bookId == 286);

        //If no book, return
        if (book == null) return null;

        //Get the bookevents associated with this book
        var bookevents = (from reading in book.readings
                   select reading.events).SelectMany(e => e).Distinct();

        //Get the customers associated with the events
        var clist = (from be in bookevents
                    from c in db.customers
                    where c.customerID == be.inID || c.customerID == be.outID
                    select c.customerID).ToList();

        //Return the list of customers
        return clist; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T18:25:18.233

尝试这个：

```
var distinctEvents = (from event in db.events
               join reading in db.readings on event.readingID equals reading.readingID
               where reading.bookID == 286
               select event).Distinct();
               // if you want to see this bookID is present in Book table, you should add a join statement like "join book in db.books on reading.bookID == book.bookID"
var custIdList = from c in db.customers
                 from event in distinctsEvents
                 where c.customerID == event.inID || c.customerID == be.outID
                 select c.customerID;

return custIdList.ToList(); 
```

# mysql - MySQL - 父 + 子类别的总数

> ID：11810125
> 
> 赞同：0
> 
> 时间：2012-08-04T16:18:16.740
> 
> 标签：mysql, parent-child

我有两张桌子：

父子“类别”：

```
id    name         parent_id
1     Food         NULL
2     Pizza        1
3     Pasta        2 
```

“交易”：

```
id     amount      category_id
1      100         1
2      50          2
3      25          2 
```

我想返回所有类别以及两个总列：

**total** = 具有此 category_id 的所有交易的金额总和

**parentTotal** = total + 其所有子类别的总和

示例（使用上表）：

```
id    name         parent_id    total    parentTotal
1     Food         NULL         100      175
2     Pizza        1            0        0
3     Pasta        2            75       0 
```

编辑：

代码已更新（基于下面 Nedret Recep 的代码）并且工作正常...

```
SELECT 
    tmp1.id, tmp1.name, tmp1.parent_id, tmp1.total, IFNULL(tmp1.total, 0) + IFNULL(tmp2.s, 0)  AS parenttotal
   FROM
        (SELECT
                ca.id, ca.name, ca.parent_id, SUM(tr.amount) as total
        FROM
            categories ca

        LEFT JOIN
                transactions tr
        ON
                tr.category_id = ca.id 
        GROUP BY
                ca.id)
    AS tmp1     

LEFT JOIN 
        (SELECT
            c.id, c.parent_id as categoryid, SUM(t.amount) AS s  
        FROM
            transactions t
        RIGHT JOIN
            categories c
        ON
            t.category_id = c.id
        GROUP BY 
            c.parent_id)
    AS tmp2

ON tmp2.categoryid = tmp1.id 

order by coalesce(tmp1.parent_id, tmp1.id), tmp1.parent_id 
```

我真的很感激一些帮助 - 谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T17:04:53.790

通过一个内连接，我们计算标准类别中的总数。然后使用另一个内部连接，我们计算总和，但这次按 parent_id 分组。然后我们将两个结果表连接起来，将两个总和放在一行中。对于大型表，此查询会很慢，因此应用程序级别的替代方法会做得更好。

```
 SELECT 
        tmp1.id, tmp1.name, tmp1.parent_id, tmp1.total, tmp1.total + tmp2.s AS parenttotal
   FROM
   (SELECT
        ca.id, ca.name, ca.parent_id, SUM(tr.amount) as total
   FROM
        transactions tr
   INNER JOIN
        categories ca
   ON
        tr.categoru_id = ca.id 
   GROUP BY
        ca.id)AS tmp1     
   LEFT OUTER JOIN 
   (
   SELECT
     c.parent_id as categoryid, SUM(t.amount) AS s  
   FROM
      transactions t
   INNER JOIN
      categories c
   ON
      t.category_id = c.i
   GROUP 
       BY c.id ) AS tmp2
   ON
       tmp2.categoryid = tmp.id 
```

# php - 用于数据库插入的 PHP 批处理事件中的事件记录系统

> ID：11810132
> 
> 赞同：0
> 
> 时间：2012-08-04T16:19:17.317
> 
> 标签：php, apache

我目前正在开发一个事件记录系统，该系统将构成实时分析系统的一部分。单个事件通过 rpc 从主应用程序发送到另一台服务器，在该服务器上运行在 apache 下的单独的 php 脚本处理事件数据。

当前，接收服务器 PHP 脚本将事件数据移交给 AMQP 交换/队列，Java 应用程序从该队列中弹出队列中的事件，对它们进行批处理并执行批处理数据库插入。

这将提供很好的可扩展性，但是我认为成本是复杂性。

我现在希望简化一些事情，所以我的问题是：

是否可以从接收服务器上的 PHP 脚本中删除 AMQP 队列并直接将事件批处理和插入到数据库中？

如果是这样，是否需要某种中间数据库来对事件进行批处理，或者是否可以在 PHP 中进行批处理？

提前致谢

**编辑：**

感谢您花时间回复，更具体。是否可以将在 Apache 下运行的 PHP 脚本配置为处理多个 http 请求？

那么，当 Apache 产生子进程时，这些进程中的每一个都将被配置为接受 1000 个 http 请求，处理它们然后关闭？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T16:28:36.553

我看到您的问题的三个潜在答案：

1.  是的
2.  不
3.  大概

如果您分享替代实现的指标（因为您所询问的所有问题在技术上都是可行的，所以请先做，然后获得硬性结果），我们可以提供更好的建议。但只要你不提供一些肉，把它放在烤架上给我们看结果，就没什么好说的了。

# sql-server - 本地访问 SQL Server 的 ADO 错误 16389，使用无线网卡时数据库连接失败

> ID：11810133
> 
> 赞同：1
> 
> 时间：2012-08-04T16:19:22.927
> 
> 标签：sql-server, sql-server-2008, database-connection, ado

我们有时会看到使用 ADO 访问 Microsoft SQL Express Server 2008 数据库的 C++ 销售点应用程序存在数据库基础引擎连接问题。我们从 ADO 得到的错误代码是 16389。这个问题似乎与在终端中使用无线蜂窝卡有关，并且当使用标准 LAN 电缆连接时，没有看到该问题。

销售点应用程序正在尝试连接到数据库引擎，以便访问作为交易数据一部分的项目的总计（货币和计数）的简单数据库。

根据我能找到的文档，这个错误意味着对数据库引擎的连接请求没有被兑现，可能是因为数据库引擎已关闭。 [失去连接错误 16389](http://www.sqlmonster.com/Uwe/Forum.aspx/sql-server-connect/3915/Losing-connections-with-SQL-2005)

在另一个应用程序（库存应用程序，它使用相同的数据库引擎实例）使用起始库存更新其自己的数据库之后，我们看到了这个问题。从测试看来，如果跳过库存导入步骤，销售点应用程序能够访问数据库并且看不到错误 16389。

库存应用程序和销售点应用程序各有其自己的数据库，这些数据库不共享。但是，两个应用程序使用相同的数据库引擎实例。

测试团队目前正在调查在进行库存导入后重新启动数据库引擎是否会清除问题。*编辑 - 测试团队报告说，在进行库存导入后重新启动数据库引擎似乎可以解决问题。*

这些应用程序可以在使用标准 LAN 电缆连接到终端的操作环境中正常工作。然而，当使用无线蜂窝卡时，测试团队发现了这个问题。从其他文档和测试中可以看出，我们必须通过 ADO 接口强制使用共享内存。库存应用程序尚未更改，但销售点应用程序已更改。

我的问题是： - ADO 错误代码 16389 是什么意思？- 应用程序可以做些什么来从这个错误中恢复？

# mysql - 显示父表中子记录少于 4 的记录

> ID：11810140
> 
> 赞同：0
> 
> 时间：2012-08-04T16:20:10.213
> 
> 标签：mysql, sql

我需要从父表中显示我的 sql 中子记录少于 4 的记录（根本没有子记录也可以），请需要 SQL 查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T16:34:01.227

这是查询：

```
SELECT
  pt.id, pt.somefield, COUNT(pt.id) as c
FROM
  parenttable pt
LEFT OUTER JOIN
  chiledtable ct
ON
  ct.parenttable_id = pt.id
GROUP BY
  pt.id
HAVING
  c <= 4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T16:27:52.243

您可以使用子查询来计算子行数：

```
select  *
from    ParentTable as p
left join
        (
        select  parentid
        ,       count(*) as cnt
        from    ChildTable
        group by
                parentid
        ) as c
on      c.parentid = p.id
where   c.cnt <= 3 
```

# vba - 如何将默认数据添加到新的 Excel 工作表？

> ID：11810141
> 
> 赞同：0
> 
> 时间：2012-08-04T16:20:23.900
> 
> 标签：vba, excel, excel-2010, worksheet-function

我在 MS Excel 文件的第一个工作表上有一个表格。如果我创建一个新工作表，我想用第一个工作表中的表中的某些行和列填充它。

具体来说，如果我在第一个工作表中有下表：

```
________________________________________________________
| Header 1 | Header 2 | Header 3 | Header 4 | Header 5 |
-------------------------------------------------------
|   Data   |   Data   |   Data   |   Data   |   Data   |
--------------------------------------------------------
|   Data   |   Data   |   Data   |   Data   |   Data   |
--------------------------------------------------------
|   Data   |   Data   |   Data   |   Data   |   Data   |
--------------------------------------------------------
|   Data   |   Data   |   Data   |   Data   |   Data   |
--------------------------------------------------------
|   Data   |   Data   |   Data   |   Data   |   Data   |
-------------------------------------------------------- 
```

然后我点击一个新的工作表，我应该会自动出现以下内容：

```
__________________________________
| Header 1 | Header 4 | Header 5 |
----------------------------------
|   Data   |   Data   |   Data   |
----------------------------------
|   Data   |   Data   |   Data   |
----------------------------------
|   Data   |   Data   |   Data   |
----------------------------------
|   Data   |   Data   |   Data   |
----------------------------------
|   Data   |   Data   |   Data   |
---------------------------------- 
```

关于我应该如何实现这一目标的任何指示？我想避免创建宏，因为我不熟悉 VB 编程。但如果这是唯一的选择，我愿意探索它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T18:00:49.893

您将不得不使用宏。在`ThisWorkbook`（见快照）中，粘贴此代码

```
Private Sub Workbook_NewSheet(ByVal Sh As Object)
    Dim ws As Worksheet

    '~~> This is where you set the input sheet
    Set ws = Sheet1

    '~~> the range that you need to replicate
    ws.Range("A1:A5,D1:E5").Copy

    '~~> I am doing paste special values
    '~~> Change it to `xlPasteAll` if you need formats to be copied as well
    Sh.Range("A1").PasteSpecial xlPasteValues

    Application.CutCopyMode = False
End Sub 
```

**快照**

假设您在 Sheet1 中有这些数据。

![enter image description here](../Images/4faab1361b61da3a6032f620de88b03f.png)

现在每次添加工作表时，数据都会被复制到新工作表中。

![enter image description here](../Images/27a707667729726c902208c745601380.png)

The Code has to be pasted here

![enter image description here](../Images/ea4cdfa90a552a18b31ffc6765ff850e.png)

**NOTE**:

The biggest drawback of this method is that you will loose your undo list.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T11:43:45.047

If you want to avoid macros you will find a solution in the combination of Index, Match and Row functions.

```
=Match(ColumHeader2,ColumHeaders1,0) 
```

will give you the column in the Sheet1

```
=Index(Sheet1!A1,Row(Sheet2!CellRef),Match(ColumHeader2,ColumHeaders1,0)) 
```

gives you the value to be transposed to Sheet 2

`CellRef = address` of the cell where you want the data to be transposed.

The formula in `sheet2!A2` then looks like:

```
=INDEX(Sheet1!$A$1:$F$11,ROW(Sheet2!A2),MATCH(A$1,Sheet1!$A$1:$F$1;0)) 
```

`Sheet1!$A$1:$F$11` = data range including headers in sheet1

`Sheet1!$A$1:$F$1` = headers range in sheet1

Just copy the formula to all cells in sheet2 that might contain transposed values.

# python - 将文件排序到新文件夹时出现奇怪的循环行为Python

> ID：11810145
> 
> 赞同：0
> 
> 时间：2012-08-04T16:21:24.737
> 
> 标签：python, loops

我有一个包含许多文件的文件夹，我想将这些文件移入（要创建的）子文件夹（dump_1、dump_2、...），这样每个子文件夹都包含 100 个文件（或最后一个文件夹的剩余文件）。为了测试，我创建了像这样的小文本文件：

```
rootdir='d:/t2/'
for i in range(1000):
    f=open(rootdir+"file_"+str(i)+".txt","w")
    f.write("This is file "+str(i))
    f.close() 
```

现在创建子文件夹和移动文件的代码是

```
import random
files=os.listdir(rootdir)
random.shuffle(files)
count=1
while files:
    newdir=(rootdir+"dump_"+str(count).zfill(2)+"/")
    os.mkdir(newdir)
    for a,b in enumerate(files):
            os.rename(rootdir+b,newdir+b)
            files.remove(b)
            if a==99:
                break
    count+=1 
```

结果真的很奇怪：前 9 个文件夹包含所需的 100 个文件。但接下来的子文件夹包含 50、25、13、6、3、2 和 1 个文件。有谁知道为什么会这样以及我该如何解决？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T19:29:17.353

Isn't it better to just iterate through the files and create new directory when necessary:

```
import random
files = os.listdir(rootdir)
random.shuffle(files)
count = 1
newdir = None
for filename in files:
    if count % 100 == 1 or newdir is None:
        newdir = rootdir + "dump_" + str(count).zfill(2) + "/"
        os.mkdir(newdir)
    os.rename(rootdir + filename, newdir + filename)
    count += 1 
```

It saves cycles and makes the logic clear. Also, from the original I have not understood if batches should be 99 or 100 files. But it's easy to change 100 to 99\. Also, there is no need to remove files from the list.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T16:43:52.597

可能它与在其上方枚举的循环中更改变量“文件”有关。例如：

```
>>> l = [1,2,3,4,5,6,7,8,9]
>>> for a, b in enumerate(l):
...     l.remove(b)    
...     print a
... 
0
1
2
3
4 
```

您可以在枚举中创建文件列表的副本（或拼接），例如

```
for a, b in enumerate(files[:100]): 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T19:22:23.487

非常感谢所有的帮助！我试图在下面的代码中组合所有这些，它运行起来就像一个魅力！

```
rootdir='d:/t2/'
import random
files = os.listdir(rootdir)
random.shuffle(files)
newdir = None
for n,filename in enumerate(files):
    if n%100 == 0 or newdir is None:
        newdir = rootdir + "dump_" + str(divmod(n,100)[0]).zfill(2) +"/"
        os.mkdir(newdir)
    os.rename(rootdir + filename, newdir + filename) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T16:49:17.337

`enumerate`迭代列表的元素。作为生成器，它会在需要时进行每次迭代。现在在您的循环中，您正在从列表中删除项目，因为您仍在对其进行迭代。

这样，当您删除*当前*元素时，生成器在生成下一次迭代之前已经指向下一个元素。因此，它会跳过每一秒的条目：

```
>>> myList = [i for i in range(10)]
>>> for i, j in enumerate(myList):
        print(i, j)
        myList.remove(j)

0 0
1 2
2 4
3 6
4 8 
```

现在您可以做的是为您的迭代创建一个副本，以便枚举本身不受删除的影响。另一种方法是改进整个循环，因此您实际上不需要从列表中删除元素。

# jquery - 面板消失在垂直滚动条后面

> ID：11810151
> 
> 赞同：0
> 
> 时间：2012-08-04T16:22:11.703
> 
> 标签：jquery, panel

我有一个面板，它消失在滚动条后面，看截图

![在此处输入图像描述](../Images/1d9b0ab6717874ee8989cfd63aa8cc9d.png)

这是CSS

```
 #menu {
    list-style:none;
    width:350px;
    height:30px;
    padding:0px 10px 0px 10px;
    margin-top: 10px;
}

#menu li {
    float:left;
    display:block;
    text-align:center;
    position:relative;
    padding: 4px 10px 4px 10px;
    margin-right:30px;
    margin-top:7px;
    border:none;
}

#menu li:hover {
    border: 1px solid #777777;
    padding: 4px 9px 4px 9px;

    /* Background color and gradients */

    background: #F4F4F4;
    background: -moz-linear-gradient(top, #F4F4F4, #EEEEEE);
    background: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#F4F4F4), to(#EEEEEE));

    /* Rounded corners */

    -moz-border-radius: 5px 5px 0px 0px;
    -webkit-border-radius: 5px 5px 0px 0px;
    border-radius: 5px 5px 0px 0px;
}

#menu li a {
    font-family:Arial, Helvetica, sans-serif;
    font-size:14px; 
    color: #EEEEEE;
    display:block;
    outline:0;
    text-decoration:none;
    text-shadow: 1px 1px 1px #000;
}

#menu li:hover a {
    color:#161616;
    text-shadow: 1px 1px 1px #ffffff;
}
#menu li .drop {
    padding-right:21px;
    background:url("../images/arrow.gif") no-repeat right 8px;
}
#menu li:hover .drop {
    background:url("../images/arrow.gif") no-repeat right 7px;
}

.dropdown_1column, 
.dropdown_2columns, 
.dropdown_3columns, 
.dropdown_4columns,
.dropdown_5columns {
    margin:4px auto;
    float:left;
    position:absolute;
    left:-999em; /* Hides the drop down */
    z-index: 9999;
    text-align:left;
    padding:10px 5px 10px 5px;
    border:1px solid #777777;
    border-top:none;

    /* Gradient background */
    background:#F4F4F4;
    background: -moz-linear-gradient(top, #EEEEEE, #BBBBBB);
    background: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#EEEEEE), to(#BBBBBB));

    /* Rounded Corners */
    -moz-border-radius: 0px 5px 5px 5px;
    -webkit-border-radius: 0px 5px 5px 5px;
    border-radius: 0px 5px 5px 5px;
}

.dropdown_2columns {width: 450px; min-height: 300px;}

#menu li:hover .dropdown_1column, 
#menu li:hover .dropdown_2columns, 
#menu li:hover .dropdown_3columns,
#menu li:hover .dropdown_4columns,
#menu li:hover .dropdown_5columns {
    left:-1px;
    top:auto;
}

.col_1,
.col_2,
.col_3,
.col_4,
.col_5 {
    display:inline;
    float: left;
    position: relative;
    margin-left: 5px;
    margin-right: 5px;
}
.col_1 {width:130px;}
.col_2 {width:270px;}
.col_3 {width:410px;}
.col_4 {width:550px;}
.col_5 {width:690px;}

#menu .menu_right {
    float:right;
    margin-right:0px;
}
#menu li .align_right {
    /* Rounded Corners */
    -moz-border-radius: 5px 0px 5px 5px;
    -webkit-border-radius: 5px 0px 5px 5px;
    border-radius: 5px 0px 5px 5px;
}

#menu li:hover .align_right {
    left:auto;
    right:-1px;
    top:auto;
}

#menu li:hover div a {
    font-size:12px;
    color:#015b86;
}
#menu li:hover div a:hover {
    color:#029feb;
} 
```

和html

```
 <ul id="menu">

    <li><a href="index.php/extensions" class="drop">Extensions</a>

        <div class="dropdown_2columns">

        </div>

    </li>

    <li><a href="index.php/forum/index" class="drop">Forum</a>

        <div class="dropdown_2columns">

        </div>

    </li>   

    <li><a href="#" class="drop">Blog</a>

        <div class="dropdown_2columns">

        </div>

    </li>

</ul> 
```

我怎样才能防止这种情况发生？我可以以某种方式从右到左显示面板吗？

为奇怪的标题和描述道歉，这一次我真的不知道如何更好地解释自己。

请提供帮助，

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T19:12:27.170

[决定和这个一起去](http://aext.net/example/twitterlogin/#)

看起来不错，效果很好

# sql - 如何使用分组依据

> ID：11810152
> 
> 赞同：0
> 
> 时间：2012-08-04T16:22:20.757
> 
> 标签：sql, oracle

我有一个关于 oracle 的问题分组，我试图将所有服务费超过 2500 英镑的病房组合在一起。我有两张桌子 Ward 和 Bed，两张桌子上都有 wardno。这是我所拥有的以及我不断收到的错误：

```
SELECT HospitalCode, Ward.WardNo, Bed.WardNo, BedNo, TotalServiceCosts,  
FROM WARD, BED  
GROUP BY TotalServiceCosts >= 2500  

ORA-00936: missing expression 
```

有人可以帮我解决缺少的表情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T16:26:39.903

### 错误！去掉后面的逗号`TotalServiceCosts`！

您需要将查询更改为：

```
SELECT HospitalCode, Ward.WardNo, Bed.WardNo, BedNo, SUM(TotalServiceCosts)
FROM WARD, BED
GROUP BY HospitalCode, Ward.WardNo, Bed.WardNo, BedNo
HAVING SUM(TotalServiceCosts) >= 2500 
```

去掉后面的逗号`TotalServiceCosts`！您不能`WHERE`在此处使用子句。是 的情况下`HAVING`的替代品。`WHERE``GROUP BY`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T16:24:58.690

也许你正在寻找这个？

```
SELECT HospitalCode, Ward.WardNo, Bed.WardNo, BedNo, SUM(TotalServiceCosts) AS TotalServiceCosts
FROM WARD, BED  
GROUP BY HospitalCode, Ward.WardNo, Bed.WardNo, BedNo
HAVING SUM(TotalServiceCosts) >= 2500 
```

注意：我认为您缺少 WARD 和 BED 的连接条件。

# java - 如何在 Eclipse 中访问创建的 swt viewpart 插件？

> ID：11810153
> 
> 赞同：0
> 
> 时间：2012-08-04T16:22:23.393
> 
> 标签：java, eclipse, eclipse-plugin

我是 eclipse 插件创建的新手，我正在尝试为 eclipse 4.2 创建一个 viewpart ui。我完成了编码，现在我想看看它在 eclipse 中的样子。

但是我似乎找不到可以访问新创建的视图部分的地方。

我知道所有视图的位置，但我似乎无法找到在创建视图部分的位置我应该指定视图部分将出现在哪个类别下。

我在哪里定义视图将出现的类别？

还是有其他方法可以访问它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T08:59:09.367

需要使用插件扩展点注册视图。请参阅[日食文档](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Fguide%2Fworkbench_basicext_views.htm)。基本上双击您的 plugin.xml（或者，如果还没有，则为 MANIFEST.MF）文件，选择“扩展”选项卡并为 org.eclipse.ui.views 扩展点添加一个新扩展。在此您可以为您的视图创建一个条目。视图条目有一个位置来指定归档视图的类别。org.eclipse.ui.views 扩展允许您定义自己的类别。

# android - 如何在 OpenGL ES 2.0 着色器中处理 NaN 或 inf

> ID：11810158
> 
> 赞同：3
> 
> 时间：2012-08-04T16:23:29.160
> 
> 标签：android, iphone, opengl-es, opengl-es-2.0, gpgpu

这是基于以下问题：[在 OpenGL 着色器中检测 NaN 的最佳方法](https://stackoverflow.com/questions/9446888/best-way-to-detect-nans-in-opengl-shaders)

标准 GLSL 定义了 isnan() 和 isinf() 函数进行检测。OpenGL ES 2.0 着色语言没有。尽管如此，我该如何处理 NaN 和 Infs 呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T22:28:24.850

您可以通过仅适用于 NaN 的条件检查 NaN：

```
bool isNan(float val)
{
  return (val <= 0.0 || 0.0 <= val) ? false : true;
} 
```

`isinf`有点困难。没有将浮点数转换为其整数表示并使用位的机制。因此，您必须将其与适当大的数字进行比较。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-14T20:30:25.157

WebGL 也有同样的问题。Nicol Bolas 的答案适用于大多数 GPU，但不适用于某些 nVidias。此版本适用于我有机会尝试的所有 GPU：

```
bool isNan( float val )
{
  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;
  // important: some nVidias failed to cope with version below.
  // Probably wrong optimization.
  /*return ( val <= 0.0 || 0.0 <= val ) ? false : true;*/
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-08T08:52:35.277

未经测试，所以不确定这是否有效（由于优化），但它应该适用于 Inf 和 -Inf。

```
 bool isinf(float val) {
    return (val != 0.0 && val * 2.0 == val) ? true : false;
  } 
```

# objective-c - How to convert NSString to NSDate with this format : "2012-08-01T12:43:35+02:00"?

> ID：11810159
> 
> 赞同：2
> 
> 时间：2012-08-04T16:23:38.720
> 
> 标签：objective-c, ios, date

I need to convert NSString like this : "2012-08-01T12:43:35+02:00" to NSDate, but i don't find the good format...

I use this category code to convert NSString to NSDate :

```
[NSDate dateFromString:@"2012-08-01T12:43:35+02:00" withFormat:@"yyyy-MM-dd'T'HH:mm:ssZZZZ"]; 
```

```
+ (NSDate*) dateFromString:(NSString*)dateString withFormat:(NSString*)format 
{
    return [self dateFromString:dateString withFormat:format andLocaleIdentifier:@"fr"];
}

+ (NSDate*) dateFromString:(NSString*)dateString withFormat:(NSString*)format andLocaleIdentifier:(NSString*)localeIdentifier
{
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];    
    [dateFormatter setDateFormat:format];
    [dateFormatter setTimeZone:[NSTimeZone localTimeZone]];

    NSLocale *locale = [[NSLocale alloc] initWithLocaleIdentifier:localeIdentifier];
    [dateFormatter setLocale:locale];
    [locale release];

    NSDate *returnDate = [dateFormatter dateFromString:dateString];
    [dateFormatter release];

    return returnDate;
} 
```

I tried all the format i can, but no one is correct...

**yyyy-MM-dd'T'HH:mm:ss** >> 2012-08-04T18:05:14
**yyyy-MM-dd'T'HH:mm:ssv** >> 2012-08-04T18:05:14France Time
**yyyy-MM-dd'T'HH:mm:ssvv** >> 2012-08-04T18:05:14GMT+02:00
**yyyy-MM-dd'T'HH:mm:ssvvv** >> 2012-08-04T18:05:14GMT+02:00
**yyyy-MM-dd'T'HH:mm:ssV** >> 2012-08-04T18:05:14CEST
**yyyy-MM-dd'T'HH:mm:ssVV** >> 2012-08-04T18:05:14GMT+02:00
**yyyy-MM-dd'T'HH:mm:ssVVV** >> 2012-08-04T18:05:14GMT+02:00
**yyyy-MM-dd'T'HH:mm:ssVVVV** >> 2012-08-04T18:05:14France Time
**yyyy-MM-dd'T'HH:mm:ssz** >> 2012-08-04T18:05:14GMT+02:00
**yyyy-MM-dd'T'HH:mm:sszz** >> 2012-08-04T18:05:14GMT+02:00
**yyyy-MM-dd'T'HH:mm:sszzz** >> 2012-08-04T18:05:14GMT+02:00
**yyyy-MM-dd'T'HH:mm:sszzzz** >> 2012-08-04T18:05:14Central European Summer Time
**yyyy-MM-dd'T'HH:mm:ssZ** >> 2012-08-04T18:05:14+0200
**yyyy-MM-dd'T'HH:mm:ssZZ** >> 2012-08-04T18:05:14+0200
**yyyy-MM-dd'T'HH:mm:ssZZZ** >> 2012-08-04T18:05:14+0200
**yyyy-MM-dd'T'HH:mm:ssZZZZ** >> 2012-08-04T18:05:14GMT+02:00

How can i do ?

* * *

# [Edit] First ugly solution :

1.  Delete the last colon with a regex
2.  Convert the string with this format "yyyy-MM-dd'T'HH:mm:ssZZZ"

There is the regex

```
 NSString* dateString = @"2012-08-01T12:43:35+02:00";
    NSMutableString* dateWithoutColonString = [dateString mutableCopy];

    NSRegularExpression* lastColonRegex = [NSRegularExpression
                                           regularExpressionWithPattern:@"([\\+\\-][0-9][0-9]):"
                                           options:NSRegularExpressionCaseInsensitive
                                           error:nil];

    [lastColonRegex replaceMatchesInString:dateWithoutColonString
                              options:NSRegularExpressionCaseInsensitive
                                range:NSMakeRange(0, [dateString  length])
                         withTemplate:@"$1"]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-09T07:34:00.573

使用 [格式化程序 setDateFormat:@"yyyy-MM-dd'T'HH:mm:ssZZZZZ"];

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T16:42:10.977

Apple 讨论了[解析 Internet 样式的日期](http://developer.apple.com/library/ios/#qa/qa2010/qa1480.html)，这与您的代码类似，但有一些更改。它始终使用`en_US_POSIX`语言环境，并且它使用`[NSTimeZone timeZoneForSecondsFromGMT:0]`而不是您的本地时区进行解析。试试看，看看结果是否更适合你。

# html - AudioElement 恢复播放口吃一秒钟然后停止

> ID：11810166
> 
> 赞同：2
> 
> 时间：2012-08-04T16:24:49.830
> 
> 标签：html, google-chrome, html5-audio, dart

我正在尝试将 html5 音频与 Dart 和 Chrome 一起使用，并且我将尽可能地使用 AudioElement 的简单方法。我希望能够暂停声音并稍后恢复。我有：

```
startSound() {
  audioElement.src = "foo";
  audioElement.load();
  audioElement.play();
}

pause() {
  this.time = audioElement.currentTime;
  audioElement.pause();
}

unpause() {
  audioElement.currentTime = this.time;
  audioElement.play();
} 
```

这些连接到事件处理程序，因此当有人单击“暂停”按钮时，播放停止。然而，当他们按下“恢复”按钮时，播放只恢复了大约半秒钟，然后再次停止。

如何让音频正常恢复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T16:24:49.830

Chrome 中似乎存在时间问题。您需要告诉 Chrome 播放，然后再次暂停，然后再次播放，两者之间有短暂的延迟。

该方法的工作版本`unpause`是：

```
unpause() {
  var fn = () {
    audioElement.currentTime = this.time;
    audioElement.play();
  };
  fn();
  window.setTimeout(() => audioElement.pause(), 25);
  window.setTimeout(fn, 50);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T21:34:39.907

我对 Chrome 也有类似的问题。当我“恢复”音频元素时，它在播放前出现口吃，我在 Safari 中没有遇到同样的问题。然而事实证明，Chrome 不知何故对我的 mp3 格式不满意。将文件的 ogg 版本添加到我的标签中的源解决了这个问题。

# operating-system - 虚拟内存空间

> ID：11810171
> 
> 赞同：4
> 
> 时间：2012-08-04T16:25:23.887
> 
> 标签：operating-system, virtual-memory

虚拟内存空间大小取决于什么？它是否取决于 RAM 或架构或其他东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T12:58:27.650

基本上它取决于架构（32bit 64bit 等等......）。这是对事物的**非常**简单的解释，但所谓的“架构”限制了虚拟地址空间的大小。例如，32 位架构将能够寻址 2^31 个内存地址。

RAM 的大小将限制可以使用的物理内存量，但不会限制虚拟地址空间。（可能硬盘驱动器可用于扩展可用物理内存）

无论如何，我建议阅读有关[虚拟内存的 wiki 页面](http://en.wikipedia.org/wiki/Virtual_memory)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T06:32:20.120

很简单，虚拟内存只是让您的软件使用比实际物理内存更多的内存地址的一种方式，这样当正在访问的数据尚未托管在物理内存中时，它会透明地从磁盘读取，当更多需要物理内存来执行诸如将物理内存的某些当前内容临时写入或“交换”到磁盘（例如，最近最少使用的内存）的事情。换句话说，一些物理内存变成了一种缓存，用于更大的虚拟内存空间，包括硬盘。

# php - wp-login.php wordpress 上的错误，它正在回显站点名称和博客标题？

> ID：11810172
> 
> 赞同：0
> 
> 时间：2012-08-04T16:25:38.270
> 
> 标签：php, wordpress, .htaccess

这是一个链接 hxxp://deleted.com/wp-login.php 我最近删除了 www。由于一些重定向循环，站点 url 和 wordpress 地址下的博客设置中的前缀。但是现在 wordpress 在登录页面上有这个。htaccess 现在回到标准安装：

```
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L] 
```

任何人都看到可能导致此输出的原因吗？

# java - 消息android中的可点击链接

> ID：11810173
> 
> 赞同：0
> 
> 时间：2012-08-04T16:25:57.007
> 
> 标签：java, android, sms

我是android新手，我需要你的帮助。我试图在警报对话框上显示新的传入消息？并使 Clickable 成为消息中的内容“链接”

这是我的消息活动

```
 public class SecureMessagesActivity extends Activity implements OnClickListener,    OnItemClickListener
 {
  public void onCreate(Bundle savedInstanceState) 
   {
      super.onCreate(savedInstanceState);

    setTheme( android.R.style.Theme_Light );
     setContentView(R.layout.main);

    /**
     * You can also register your intent filter here.
     * And here is example how to do this.
     *
     * IntentFilter filter = new IntentFilter(    "android.provider.Telephony.SMS_RECEIVED" );
     * filter.setPriority( IntentFilter.SYSTEM_HIGH_PRIORITY );
     * registerReceiver( new SmsReceiver(), filter );
    **/

    this.findViewById( R.id.UpdateList ).setOnClickListener( this );
   }

    ArrayList<String> smsList = new ArrayList<String>();

  public void onItemClick( AdapterView<?> parent, View view, int pos, long id ) 
{
    try 
    {
        String[] splitted = smsList.get( pos ).split("\n"); 
        String sender = splitted[0];
        String encryptedData = "";
        for ( int i = 1; i < splitted.length; ++i )
        {
            encryptedData += splitted[i];
        }
        String data = sender + "\n" + StringCryptor.decrypt( new String(SmsReceiver.PASSWORD), encryptedData );
        Toast.makeText( this, data, Toast.LENGTH_SHORT ).show();
     } 
    catch (Exception e) 
    {
        e.printStackTrace();
    }
    }

   public void onClick( View v ) 
  {

    ContentResolver contentResolver = getContentResolver();
    Cursor cursor = contentResolver.query( Uri.parse( "content://sms/inbox" ), null, null, null, null);

    int indexBody = cursor.getColumnIndex( SmsReceiver.BODY );
    int indexAddr = cursor.getColumnIndex( SmsReceiver.ADDRESS );
    //int indexCont = cursor.getColumnIndex(SmsReceiver.READ);

    if ( indexBody < 0 || !cursor.moveToFirst() ) return;

    Builder builder = new AlertDialog.Builder(this); 
     builder.setTitle("Simple Alert");  
     builder.setMessage("This is simple alert box");
     builder.setPositiveButton("OK", new DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int which) {
            // TODO Auto-generated method stub
            dialog.dismiss();  
        }

     });
    smsList.clear();

    do
    {
        String str = "Sender: " + cursor.getString( indexAddr ) + "\n" + cursor.getString( indexBody );
        smsList.add( str );
    }
    while( cursor.moveToNext() );

    ListView smsListView = (ListView) findViewById( R.id.SMSList );
    smsListView.setAdapter( new ArrayAdapter<String>( this, android.R.layout.simple_list_item_1, smsList) );
    smsListView.setOnItemClickListener( this );
 }

 public void DisplayAlert() {

    AlertDialog.Builder builder = new AlertDialog.Builder(this);
     builder.setTitle("Simple Alert");  
     builder.setMessage(R.string.app_name);
     builder.setPositiveButton("OK", new DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int which) {
            // TODO Auto-generated method stub
            dialog.dismiss();  

        }
         });
     AlertDialog alert = builder.create();  
     alert.show();          
} 
```

我的 smsReceive.java

```
 public class SmsReceiver extends BroadcastReceiver 
    {
// All available column names in SMS table
     // [_id, thread_id, address, 
// person, date, protocol, read, 
// status, type, reply_path_present, 
// subject, body, service_center, 
// locked, error_code, seen]

public static final String SMS_EXTRA_NAME = "pdus";
public static final String SMS_URI = "content://sms";

public static final String ADDRESS = "address";
     public static final String PERSON = "person";
   public static final String DATE = "date";
   public static final String READ = "read";
   public static final String STATUS = "status";
   public static final String TYPE = "type";
   public static final String BODY = "body";
   public static final String SEEN = "seen";

   public static final int MESSAGE_TYPE_INBOX = 1;
    public static final int MESSAGE_TYPE_SENT = 2;

    public static final int MESSAGE_IS_NOT_READ = 0;
  public static final int MESSAGE_IS_READ = 1;

   public static final int MESSAGE_IS_NOT_SEEN = 0;
   public static final int MESSAGE_IS_SEEN = 1;

  // Change the password here or give a user possibility to change it
   public static final byte[] PASSWORD = new byte[]{ 0x20, 0x32, 0x34, 0x47, (byte) 0x84, 0x33, 0x58 };

 public void onReceive( Context context, Intent intent ) 
{
    // Get SMS map from Intent
     Bundle extras = intent.getExtras();

    String messages = "";

    if ( extras != null )
    {
        // Get received SMS array
        Object[] smsExtra = (Object[]) extras.get( SMS_EXTRA_NAME );

        // Get ContentResolver object for pushing encrypted SMS to incoming folder
        ContentResolver contentResolver = context.getContentResolver();

        for ( int i = 0; i < smsExtra.length; ++i )
        {
            SmsMessage sms = SmsMessage.createFromPdu((byte[])smsExtra[i]);

            String body = sms.getMessageBody().toString();
            String address = sms.getOriginatingAddress();

            messages += "SMS from " + address + " :\n";                    
            messages += body + "\n";

            // Here you can add any your code to work with incoming SMS
            // I added encrypting of all received SMS 

            putSmsToDatabase( contentResolver, sms );
        }

        // Display SMS message
      //  Toast.makeText( context, messages, Toast.LENGTH_SHORT ).show();
      }

}

private void putSmsToDatabase( ContentResolver contentResolver, SmsMessage sms )
{
    // Create SMS row
    ContentValues values = new ContentValues();
    values.put( ADDRESS, sms.getOriginatingAddress() );
    values.put( DATE, sms.getTimestampMillis() );
    values.put( READ, MESSAGE_IS_NOT_READ );
    values.put( STATUS, sms.getStatus() );
    values.put( TYPE, MESSAGE_TYPE_INBOX );
    values.put( SEEN, MESSAGE_IS_NOT_SEEN );
    try
    {
        String encryptedPassword = StringCryptor.encrypt( new String(PASSWORD), sms.getMessageBody().toString() ); 
        values.put( BODY, encryptedPassword );
    }
    catch ( Exception e ) 
    { 
        e.printStackTrace(); 
    }

    // Push row into the SMS table
    contentResolver.insert( Uri.parse( SMS_URI ), values );
}
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T17:31:14.180

如果您尝试打开 SMS 收件箱，这应该会有所帮助：

[如何从字符串资源中获取 AlertDialog 中的可点击超链接？](https://stackoverflow.com/questions/1997328/android-clickable-hyperlinks-in-alertdialog)

[有意图地启动短信应用程序](https://stackoverflow.com/questions/2372248/launch-sms-application-with-an-intent)

使用[Linkify](http://developer.android.com/reference/android/text/util/Linkify.html)建立链接。

# jquery - 标签（链接）在重新排序后被破坏 选项卡元素

> ID：11810176
> 
> 赞同：0
> 
> 时间：2012-08-04T16:26:18.130
> 
> 标签：jquery, jquery-ui

我正在使用 jquery-ui 选项卡（）。Evertihng 工作得很好。
然后我通过 jquery 对 DOM 中的标签重新排序。

前：

```
<li id="L1">Tab 1</li>
<li id="L2">Tab 2</li> 
```

后：

```
<li id="L2">Tab 2</li>
<li id="L1">Tab 1</li> 
```

当我将标签悬停时，它们会显示指向内容 div 的正确链接。但是通过单击选项卡没有任何反应。

任何人都知道我的错是什么？

**编辑：**我的重新排序 li 元素的代码：

```
$(document).ready(function() {
  var elems = $('#tabsUl').children('li').remove();

  elems.sort(function(a,b){
    return parseInt($(a).attr("data-order")) > parseInt($(b).attr("data-order"));
  });

  $('#tabsUl').append(elems);
});​ 
```

和标记示例：

```
<ul id="tabsUl">
  <li data-order="4">Item 4</li>
  <li data-order="2">Item 2</li>
  <li data-order="3">Item 3</li>
  <li data-order="1">Item 1</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T16:55:09.540

使用[`.detach()`](http://api.jquery.com/detach/)而不是`.remove()`.

```
var elems = $('#tabsUl').children('li').detach(); 
```

文档：

> **`.detach()`**
> 
> 该**`.detach()`**方法与 相同**`.remove()`**，除了**`.detach()`**保留与已删除元素关联的所有 jQuery 数据。当移除的元素稍后要重新插入到 DOM 中时，此方法很有用。

# c# - 用asp、AJAX上传文件

> ID：11810182
> 
> 赞同：1
> 
> 时间：2012-08-04T16:26:42.840
> 
> 标签：c#, asp.net

哪里出错了？如果我不使用 ajax，那么表单是有效的，并且文件正在上传，但是现在页面重新加载并且...文件没有加载到路径中，为什么？

```
 <asp:UpdatePanel ID="UpdatePanel1" runat="server">
    <ContentTemplate>
    <p>

       <asp:FileUpload ID="FileUpload1" runat="server" />
        &nbsp;<asp:Button ID="Button1" runat="server" onclick="Upload" Text="downdoad..." 
        BackColor="#0099CC" Font-Size="Small" />
    </p>
    </ContentTemplate>
    </asp:UpdatePanel>
    <asp:UpdateProgress ID="UpdateProgress1" runat="server">
        <ProgressTemplate>
            downdoad...
        </ProgressTemplate>
    </asp:UpdateProgress> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T16:40:26.887

Fileupload 在更新面板中不起作用，您可以在此 url [http://www.codeproject.com/useritems/simpleajaxupload.asp上找到解决方法](http://www.codeproject.com/useritems/simpleajaxupload.asp)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-02-07T04:38:56.903

```
protected void Button1_Click(object sender, EventArgs e)
    {
        if (FileUpload1.HasFile)
        {
            FileUpload1.SaveAs(Server.MapPath("~/Uploads" + FileUpload1.FileName));
            Label1.Text = "Saved Successfully";
        }
        else 
        {
            Label1.Text = "File Not found";
        }
    } 
```

在上面的代码文件中没有添加上传文件夹

# c++ - 从 xml 文件输入并使用 rapidxml 解析

> ID：11810187
> 
> 赞同：1
> 
> 时间：2012-08-04T16:27:16.380
> 
> 标签：c++, eclipse, rapidxml

我正在尝试使用 rapidxml 使用 c++ 来做这样的事情

```
xml_document<> doc; 
ifstream myfile("map.osm"); 
doc.parse<0>(myfile); 
```

并收到以下错误

此行有多个标记 - 无效参数 ' 候选者是：void parse(char *) ' - 符号 'parse' 无法解析

文件大小可达几兆字节。

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T16:46:12.177

您必须首先按照官方文档中的此处指定将文件加载到以空字符结尾的字符缓冲区中。

[http://rapidxml.sourceforge.net/manual.html#classrapidxml_1_1xml__document_8338ce6042e7b04d5a42144fb446b69c_18338ce6042e7b04d5a42144fb446b69c](http://rapidxml.sourceforge.net/manual.html#classrapidxml_1_1xml__document_8338ce6042e7b04d5a42144fb446b69c_18338ce6042e7b04d5a42144fb446b69c)

只需将文件的内容读入 char 数组并使用该数组传递给`xml_document::parse()`函数。

如果您正在使用`ifstream`，则可以使用以下内容将整个文件内容读取到缓冲区

```
 ifstream file ("test.xml");
 if (file.is_open())
 {
    file.seekg(0,ios::end);
    int size = file.tellg();
    file.seekg(0,ios::beg);

    char* buffer = new char [size];

    file.read (buffer, size);
    file.close();

    // your file should now be in the char buffer - 
    // use this to parse your xml     

    delete[] buffer;
 } 
```

请注意我没有编译上面的代码，只是从内存中写出来的，但这是一个粗略的想法。`ifstream`有关详细信息，请查看文档。无论如何，这应该可以帮助您入门。

# eclipse-plugin - Eclipse 插件：java 编辑器

> ID：11810188
> 
> 赞同：0
> 
> 时间：2012-08-04T16:27:20.210
> 
> 标签：eclipse-plugin

我想扩展 java 编辑器的功能。我不想创建自定义编辑器，而只想扩展 Java 编辑器的功能。

我从哪里开始？

请对此提供一些见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T03:28:09.247

要查看的两个示例是 AspectJ 编辑器（用于 AJDT）和 Groovy 编辑器（用于 Groovy-Eclipse）。两者都做到了；你所描述的。它们提供专门针对其语言的 Java 编辑器的子类。这不是一项简单的任务，在开始之前，您应该深入了解 Eclipse 插件架构的工作原理。

AJDT 的源代码可在此处获得：http: [//git.eclipse.org/c/ajdt/org.eclipse.ajdt.git/tree/org.eclipse.ajdt.ui/src/org/eclipse/ajdt/internal /ui](http://git.eclipse.org/c/ajdt/org.eclipse.ajdt.git/tree/org.eclipse.ajdt.ui/src/org/eclipse/ajdt/internal/ui)

groovy-eclipse 的源代码在这里： [https ://github.com/groovy/groovy-eclipse](https://github.com/groovy/groovy-eclipse)

最后，您应该好好阅读这篇关于 Eclipse 编辑器框架的文章： [http ://www.vogella.com/articles/EclipseEditors/article.html](http://www.vogella.com/articles/EclipseEditors/article.html)

# linux - 在 bash 中操作字符串

> ID：11810191
> 
> 赞同：-1
> 
> 时间：2012-08-04T16:27:32.500
> 
> 标签：linux, string, bash, shell

我有一个文件，其中包含搜索后得到的谷歌页面。我用了

```
w3m -no-cookie $search > google 
```

制作页面

之后我需要获取该页面中包含的所有网站，所以基本上所有以“www”开头并以“/”结尾的字符串

我试过了 ：

```
grep -Fw "www" google | awk -F "/" '{ print $1";" }' 
```

但它给了我在 www 之前上线的一切

我该如何删除它？

我应该使用 sed 吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T17:19:30.623

假设所有网站都以开头`www`有点奇怪，但这里是：

您的问题是 grep 将返回整行。使用`-o`它只会返回匹配的部分：

```
grep -wo "www.*" google | awk -F "/" '{ print $1";" }' 
```

或者简单地说：

```
grep -wo "www[^/]*" google 
```

# java - 处理选中和未选中的复选框

> ID：11810196
> 
> 赞同：0
> 
> 时间：2012-08-04T16:28:15.350
> 
> 标签：java, portlet, checkbox, websphere-portal

我在这里有一个非常混乱的情况。

```
<tr>
    <td>
        <input type="checkbox" id="box1" name="box1" <% if (renderRequest.getPreferences().getValue("box1", null).equals("on")) { %> checked="checked"  <% } %> >
    </td>
    <td><label>Box</label></td>
</tr> 
```

在 portlet.xml 中，我将 box1 的值默认设置为“on”。因此，当我加载 edit.jsp 页面时，我看到该值已选中。现在，我想处理我感到困惑的未选中复选框的情况。当我取消选中该框时，提交的值为空，我很困惑处理这种情况。如果未选中复选框，如何提交默认值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-27T10:28:01.077

虽然这个问题是 3 年前提出的，但我正在为未来的观众添加一个答案。

如果未选中复选框，则不会发送。因此，如果未检查[devang将其值设置为“开/关”的答案将无济于事-它将始终返回 NULL。](https://stackoverflow.com/users/1226605/gotuskar)

我发现的最简单的解决方案是添加一个具有相同**名称**的隐藏字段，如果未选中复选框，将使用该字段。

例如，在您的代码中，解决方案可能是

```
<tr>
    <td>
        <input type="checkbox" id="box1" name="box1" value="1" <% if (renderRequest.getPreferences().getValue("box1", null).equals("on")) { %> checked="checked"  <% } %> >
    </td>
    <td>
        <input type="checkbox" id="box1_hidden" name="box1" value="0" >
    </td>
</tr> 
```

上面的代码取决于服务器对参数的处理，因为浏览器将发送这两个参数。如果未选中该复选框，则隐藏字段的值将按原样使用（因为浏览器不发送 null 参数）。但是，如果选中该复选框，事情就会变得很麻烦，因为现在浏览器会看到两个值对应于相同的**名称**字段。

例如，Java 仅提供具有特定名称的字段的第一个值。另一方面，PHP 将最后一个值作为要使用的值。

因此，您需要执行一个额外的步骤并调用 JavaScript。这个想法是根据检查的条件禁用隐藏的输入。

```
if(document.getElementById("box1").checked) {
     document.getElementById('box1_hidden').disabled = true;
} 
```

无论服务器处理如何，这构成了完整的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T11:15:22.160

使用剃刀语法：

```
<input type="checkbox" name="xxx" value="xxx" @if(condition == true) {<text>checked="checked"</Text>}> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T16:33:17.687

据我记得，添加 value 属性并将其设置为您想要的值应该可以工作。下面，`value="on"`补充。

```
<input type="checkbox" id="box1" name="box1" value="on" 
  <% if (renderRequest.getPreferences().getValue("box1", null).equals("on")) { %>    
    checked="checked"  
  <% } %> > 
```

# neo4j - 在图形数据库中保留节点和关系历史

> ID：11810200
> 
> 赞同：7
> 
> 时间：2012-08-04T16:28:46.830
> 
> 标签：neo4j, graph-databases

我正在尝试使用带有节点和关系的 Graph DB 来实现解决方案。用户可能希望对节点的历史数据运行报告（查询），或检查历史关系。

Graph DB 是否支持开箱即用的此功能？或者，如果可以实现一些替代机制来持久化为图形数据库中的节点/关系更改启用的历史审计日志记录？

我们可以考虑一些想法......？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T22:09:43.887

您可以使用事务事件侦听器在节点和关系更新时创建它们的历史副本。

如果您的图表中只有树结构，我建议您查看具有稀疏复制和结构共享的持久数据结构。

对于 Neo4j，有一个带有版本控制的[Github 示例项目。](https://github.com/dmontag/neo4j-versioning)

# core-data - 多个相似子对象的核心数据设置反向关系？

> ID：11810201
> 
> 赞同：3
> 
> 时间：2012-08-04T16:29:19.457
> 
> 标签：core-data

我的核心数据模型遇到了问题。我想让一个名为 TherapySession 的实体有两个 Mood 事件——开始和结束。为此，我定义了两个与子对象的关系：

![在此处输入图像描述](../Images/1302992f5557339f0435ff9f4506bfeb.png)

但是，我还想创建一个反向关系，其中每个 Mood 对象都会知道它的父母治疗会话。**当定义了多个相同类型的关系时，我不确定如何正确创建子对象和父对象之间的反向关系。**在我的例子中，反向关系指向治疗会话的“startMood”属性：

![在此处输入图像描述](../Images/68abed2414c41e11c65d6a73f614bd26.png)

似乎我做错了什么，但我无法解决如何解决这个问题。如果我在治疗中添加结束情绪，并且核心数据会尝试创建反向关系，它会覆盖 startMood 关系吗？

感谢您的任何澄清！我知道可以通过添加一组对象，然后按日期对集合进行排序来避免这种情况，但我想避免对每个对象都这样做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T21:11:03.153

一种解决方案是坚持简单的多对一关系和实体中指示开始或结束`mood`的附加属性。`Mood`

这也更加灵活——将来在不同的治疗点等处引入更多的情绪将是微不足道的，而无需更改数据模型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T16:33:57.750

我不确定这是否是正确的方法，但我总是最终创建两个反向关系，例如`startMoodInverse`和`endMoodInverse`。（然后，您可以在代码中添加一个属性，该属性将其中任何一个非零返回为`therapySession`.）

# json - 用 json 和 servlet extjs4 问题填充网格

> ID：11810202
> 
> 赞同：0
> 
> 时间：2012-08-04T16:29:46.277
> 
> 标签：json, servlets, post, extjs4

嗨，我需要在网格中显示数据，使用 servlet 并在 POST 中将数据传递给 servlet，服务器将有效的 Json 发送回 extjs，但 gridd 保持为空，这是我的代码：

```
Ext.onReady(function() {
//Ext.direct.Manager.addProvider(Ext.app.REMOTING_API);

//added model inside onready
Ext.define('PvInfo', {
    extend: 'Ext.data.Model',
    fields: ['potenziale','fax','cliente','titolare','pv_id','mail','sito','cod_mmas', 'ragione_sociale', 'indirizzo', 'cap','comune','provincia','telefono','codice_fiscale']
        });

//separated store into unique var for guaranteeRange
var store = Ext.create('Ext.data.Store', {
    pageSize: 50,
    model: 'PvInfo',
    autoLoad: true,
    listeners :

    {   
        load : function(store)
        {
            Ext.getCmp('numRow').setText("Numero Anagrafiche: "+store.getCount());
            console.debug("store");
            console.debug(store);
        }
    },
    proxy: {
        idProperty: 'pv_id',
        type: 'ajax',
        url: 'http://localhost:8080/MyFirstServlet/GreetingServlet',
        reader:
        {
            type: 'json',
            root: 'selections',
            successProperty: 'success'
        },
        actionMethods: {
            create: 'POST', read: 'POST', update: 'POST', destroy: 'POST'      
        },

        extraParams: {selections:selection_string, task: 'pv_list'}
    }
});
console.debug(store);
//funzione per recuperare i parametri get

//create the grid
var grid = Ext.create('Ext.grid.Panel', {
//  height: 450,
//  width: 700,
    layout:'fit',
    title: 'Elenco Anagrafiche ',
    store: store,
    emptyText:'nessun record presente',
    columns: [
        {dataIndex:'pv_id',
        flex:1.1,
        text:"id",
        hidden:true
        },

        {
        dataIndex: 'cod_mmas',
        flex: 1,
        text: 'codice MMAS'
    },
    {
        dataIndex:'potenziale',
        flex: 1.5,
        text:'potenziale mmas'
    },
    {
        dataIndex: 'ragione_sociale',
        flex: 2.5,
        text: 'Ragione Sociale'
    }, {
        dataIndex: 'indirizzo',
        flex: 3,
        text: 'Indirizzo'
    }, {
        dataIndex: 'cap',
        flex: 1.3,
        text: 'Cap'
    },{
        dataIndex: 'comune',
        flex:1.3,
        text: 'Comune'
    },{
        dataIndex:'provincia',
        flex:1.1,
        text:'Provincia'
    },{
        dataIndex:'telefono',
        flex:1.1,
        text:'Telefono'
    },{
        dataIndex:'codice_fiscale',
        flex:1.1,
        text: 'Codice Fiscale/Partita IVA'
    },
    {
        dataIndex:'titolare',
        flex:1,
        text:'Titolare',
        hidden:true 
    },
    {
        dataIndex:'fax',
        flex:1,
        text:'Fax',
        hidden:true
    },
    {
        dataIndex:'cliente',
        flex:0.3,
        text:'cliente',
        hidden:true
    }
    //'codice mmas', 'ragione sociale', 'indirizzo', 'cap','comune','provincia','telefono','cf/piva'
    ],

    // toolbar
tbar: {    
        items: [{    
        xtype: 'label',    
        x:100,    
        id:'numRow',   
        text: 'Numero Anagrafiche:'    
   }    
   ]    
}    
,    

listeners:
    {
        itemdblclick: function(dv, record, item, index, e)
        {   console.log(record);
            //alert('working'+record.data.pv_id);
            menuContext.showAt(e.xy);
        },
        itemclick: function(view, record, item, index, e, options)
        {
            menuContext.showAt(e.xy);
        }

    },

    renderTo: Ext.getBody()    
});    

menuContext = new Ext.menu.Menu({
items: [{
    id: 'do-something',
    text: 'Visualizza anagrafica',
handler: function()
{
                var selection = grid.getView().getSelectionModel().getSelection()[0];
        console.log("selection.data");
        console.debug(selection.data);
        var f=   Ext.create('Ext.form.Panel',
        {
            frame: true,
            width: 640,
            bodyPadding: 5,
            //renderTo: 'form-example',
            fieldDefaults:
            {
                labelAlign: 'left',
                labelWidth: 90,
                anchor: '100%'
            },
            items:
            [
                {
                xtype: 'hiddenfield', //1
                name: 'id',
                },
                {
                xtype: 'displayfield', //2
                name: 'codice_mmas',
                fieldLabel: 'Codice MMAS',
                value: selection.data.cod_mmas
                },
                {
                xtype: 'textfield', //3
                name: 'cod_cliente',
                fieldLabel: 'Codice Cliente',
                },
                {
                xtype: 'textfield', //4
                name: 'ragione_sociale',
                fieldLabel: 'Ragione Sociale',
                value:selection.data.ragione_sociale
                },
                {
                xtype: 'textfield', //5
                name: 'titolare',
                fieldLabel: 'Titolare',
                value: selection.data.titolare

                },
                {
                xtype: 'textfield', //8
                name: 'codice_fiscale',
                fieldLabel: 'Cod. Fis./P. IVA',
                value: selection.data.codice_fiscale
                },
                {xtype:'textfield',
                 name:'potenziale_mmas',
                 fieldLabel:"Potenziale MMAS",
                 value: selection.data.potenziale
                },
                {
                xtype: 'checkboxfield', //11
                name: 'cliente',
                fieldLabel: 'cliente',
                //boxLabel: 'box label'
                value: selection.data.cliente
                },
                {
                xtype:'textfield',
                name:'indirizzo',
                fieldLabel:'indirizzo',
                value:selection.data.indirizzo},
            {xtype:'textfield',
            name:'mail',
            fieldLabel:'mail',
            value:selection.data.mail
            },
                {
                xtype: 'textfield', //12
                name: 'provincia',
                fieldLabel: 'Provincia',
                value:selection.data.provincia
                },
                {
                xtype: 'textfield', //13
                name: 'comune',
                fieldLabel: 'comune',
                value: selection.data.comune
                },
                {
                xtype: 'textfield', //14
                fieldLabel: 'cap',
                name:'cap',
                value:selection.data.cap
                },
                {
                xtype:'textfield',
                fieldLabel:'telefono',
                name:'telefono',
                value: selection.data.telefono
                },
                {
                xtype: 'textfield', //15
                fieldLabel: 'fax',
                name:'fax',
                value:selection.data.fax
                },
                {
                xtype:'textfield',
                fieldLabel:'sito',
                name:'sito',
                value:selection.data.sito
                }
            ]
        });
    var w = new Ext.Window(
        {
            height: 470, width: 650,
            title:"scheda Anagrafica di "+selection.data.ragione_sociale,
            items:[f]
        });
    w.show();
    w.center();
}//end function di handler
}],    

});
}); 
```

这是 servlet 生成的 json：

```
{
   "results":[
      {
         "potenziale":"59",
         "cap":"11100",
         "indirizzo":"x",
         "pv_id":"35",
         "telefono":"x",
         "provincia":"AO",
         "ragione_sociale":"x",
         "cod_mmas":"35",
         "cliente":"0",
         "titolare":"x",
         "comune":"AOSTA"
      },
      {
         "potenziale":"26",
         "cap":"11100",
         "indirizzo":"x",
         "pv_id":"50",
         "telefono":"016532590",
         "provincia":"AO",
         "ragione_sociale":"x",
         "cod_mmas":"50",
         "cliente":"0",
         "titolare":"x",
         "comune":"AOSTA"
      },
      {
         "potenziale":"68.75",
         "cap":"11100",
         "indirizzo":"x",
         "pv_id":"56",
         "telefono":"x",
         "provincia":"AO",
         "ragione_sociale":"x",
         "cod_mmas":"56",
         "codice_fiscale":"x",
         "cliente":"0",
         "titolare":"x",
         "comune":"AOSTA"
      },
      {
         "potenziale":"39",
         "cap":"11100",
         "indirizzo":"x68",
         "pv_id":"63",
         "telefono":"x",
         "provincia":"AO",
         "ragione_sociale":"xSRL",
         "cod_mmas":"63",
         "cliente":"0",
         "titolare":"x",
         "comune":"AOSTA"
      },
      {
         "potenziale":"26",
         "cap":"11027",
         "indirizzo":"x",
         "pv_id":"68",
         "telefono":"x",
         "provincia":"AO",
         "ragione_sociale":"xPATRIZIA",
         "cod_mmas":"68",
         "cliente":"0",
         "titolare":"xPATRIZIA",
         "comune":"SAINT VINCENT"
      },
      {
         "potenziale":"42",
         "cap":"11013",
         "indirizzo":"x 75",
         "pv_id":"2819",
         "telefono":"x",
         "provincia":"AO",
         "ragione_sociale":"x",
         "cod_mmas":"2819",
         "codice_fiscale":"x3",
         "cliente":"0",
         "titolare":"x",
         "comune":"COURMAYEUR"
      },
      {
         "potenziale":"valore non disponibile",
         "cap":"11020",
         "indirizzo":"LOC.LA PLACE,23",
         "pv_id":"3427",
         "telefono":"x",
         "provincia":"AO",
         "ragione_sociale":"x",
         "cod_mmas":"3427",
         "codice_fiscale":"x",
         "cliente":"0",
         "comune":"ISSOGNE"
      },
      {
         "potenziale":"valore non disponibile",
         "cap":"11026",
         "indirizzo":"x2",
         "pv_id":"3994",
         "telefono":"x",
         "provincia":"AO",
         "ragione_sociale":"x",
         "cod_mmas":"3994",
         "codice_fiscale":"x",
         "cliente":"0",
         "comune":"x"
      }
   ]
} 
```

我是 extjs 的新手，所以我不知道我做错了什么，你能指出我的错误吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T02:03:08.013

您代理的阅读器将数据根定义为`selections`：

```
 reader:
    {
        type: 'json',
        root: 'selections',
        successProperty: 'success'
    }, 
```

虽然您的 json 没有这样的节点，但它有`results`。

将根更改为`results`，它应该可以工作。

# visual-c++ - VC++ 2010 express：编译时如何让图片文件输出到Debug目录？

> ID：11810207
> 
> 赞同：0
> 
> 时间：2012-08-04T16:30:58.017
> 
> 标签：visual-c++, build, resources

我正在创建一个简单的“hello world”vc++/opencv 项目。

在我的代码中，我想读取并显示一个名为“opencv.png”的图像：

```
int _tmain(int argc, _TCHAR* argv[])
{
    namedWindow( "show_image", WINDOW_AUTOSIZE );
    Mat src = imread( "opencv.png" );
    imshow( "show_image", src );
    char c = waitKey(0);
    return 0;
} 
```

然后我把“opencv.png”放在项目根路径下。但是我在编译项目时发现，“opencv.png”不会显示。

在“helloworld/Debug”目录下，只有3个文件：

```
helloworld.exe
helloworld.ilk
helloworld.pdb 
```

我必须手动将“opencv.png”复制到“调试”。如何配置项目以使其在编译时将“opencv.png”复制到输出目录？

* * *

根据詹姆斯的回答，我认为这有点复杂。有没有更简单的方法，例如在最终的 exe 文件中嵌入“opencv.png”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T16:47:08.390

您可以创建[自定义构建步骤](http://msdn.microsoft.com/en-us/library/e85wte0k%28v=vs.110%29.aspx)来执行复制。

或者，考虑将图像放在某个已知位置，这样就不需要复制它（例如在 TestData 目录中），或者通过命令行传递图像的路径（您可以在 Debugging 中向命令行添加参数项目属性页面）。

# c# - .appref-ms 文件在单击一次部署中的位置

> ID：11810208
> 
> 赞同：1
> 
> 时间：2012-08-04T16:31:11.290
> 
> 标签：c#, deployment, clickonce

我有一个可以在线或离线使用的 clickonce 应用程序。我想知道如何准确地确定 .appref-ms 文件的位置。它总是在同一个位置吗？谢谢，如果这似乎是一个菜鸟问题，我深表歉意，我是单击一次部署的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T07:32:09.290

快捷方式始终位于开始菜单上。在选项对话框中，您将出版公司设置为用于开始菜单上的文件夹。无论您将产品名称设置为什么，都将用于开始菜单上的 hte 图标名称。只要您不更改这两件事，ClickOnce 应用程序的快捷方式将始终显示在同一个位置。

试试这个来设置快捷方式的路径：

> string.Concat(Environment.GetFolderPath(Environment.SpecialFolder.Programs), "\", 公司, "\", 描述, ".appref-ms");

其中公司是选项对话框中的出版公司，描述是产品名称。

# android - (AChartEngine) 如何设置默认缩放率？如何设置自定义字体样式？

> ID：11810209
> 
> 赞同：2
> 
> 时间：2012-08-04T16:31:18.187
> 
> 标签：android, bar-chart, achartengine

我在我的 android 项目中使用 AChartEngine。

我在实现条形图时有 2 个问题。

**第一个问题** 这是我刚在模拟器上运行时的条形图。

第一张照片

![交流](../Images/c82ae7f65da7ba0349c9cbe16c5bd90c.png)

它似乎工作得很好，但是当我按下右按钮缩放窗格中的降低缩放率按钮时，它的视图看起来更好。

第二张图片

![gjj](../Images/8d07fbe0a3f16b48c90640ebad97b0a2.png)

我希望图表像这样显示，但我不想每次显示图表时都单击缩放率按钮。我可以设置默认缩放率吗？所以当我在模拟器上运行时，图表会立即显示为第二张图片。

这是我的代码

```
 XYSeries series1 = new XYSeries("Product Name1");
series1.add(1,15);

XYSeries series2 = new XYSeries("Product Name2");
series2.add(2,35);

XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();          
dataset.addSeries(series1);
dataset.addSeries(series2);

XYSeriesRenderer renderer1 = new XYSeriesRenderer();
renderer1.setColor(Color.GREEN);
renderer1.setDisplayChartValues(true);
renderer1.setChartValuesTextSize(20);

XYSeriesRenderer renderer2 = new XYSeriesRenderer();
renderer2.setColor(Color.BLUE);
renderer2.setDisplayChartValues(true);
renderer2.setChartValuesTextSize(20);

XYMultipleSeriesRenderer mRenderer = new XYMultipleSeriesRenderer();
mRenderer.addSeriesRenderer(renderer1);
mRenderer.addSeriesRenderer(renderer2);

    mRenderer.setAxisTitleTextSize(16);
    mRenderer.setChartTitle(chartTitle);
    mRenderer.setChartTitleTextSize(20);
    mRenderer.setLabelsTextSize(15);
    mRenderer.setLegendTextSize(15);
    mRenderer.setAxesColor(Color.WHITE);
    mRenderer.setApplyBackgroundColor(true);
    mRenderer.setBackgroundColor(Color.BLACK);

    mRenderer.setBarSpacing(-0.7);   
    mRenderer.setZoomButtonsVisible(true);

    mRenderer.setXTitle("Product");
    mRenderer.setXLabels(0);
    mRenderer.setXAxisMin(0);
    mRenderer.setXAxisMax(3);

    mRenderer.setYTitle("Calorie (kCal)"); 
```

**第二个问题** 如何在图表中实现我的自定义字体样式（字体样式文件保存在资产文件夹中）？我只找到了这种方法，但它不起作用。

```
mRenderer.setTextTypeface(typefaceName, style); 
```

提前致谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T17:58:43.770

对于第一个问题，AChartEngine 尝试以最佳方式拟合您的数据。但是，您可以调整此行为：

```
mRenderer.setXAxisMin(min);
mRenderer.setXAxisMax(max);
mRenderer.setYAxisMin(0);
mRenderer.setYAxisMax(40); 
```

对于第二个问题，我认为您应该首先研究如何将自定义字体添加到常规 Android 应用程序中，然后它也可以在 AChartEngine 中工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-01T09:37:41.197

你的第二个问题的答案是

首先从网上下载你需要的字体的ttf文件，然后创建一个名为“assets”的文件夹，在它下面还有一个文件夹“fonts”，将.ttf文件放在fonts文件夹中。

然后在您的活动中编写以下代码：

```
Typeface type=Typeface.createFromAssest(getAssets(),"fonts/yourttffile.ttf"); 
```

并设置你想要的地方，比如 textview

```
textview.setTypeface(type); 
```

# javascript - 下载一个 使用 JS 到 .doc 或 .docx

> ID：11810212
> 
> 赞同：2
> 
> 时间：2012-08-04T16:31:36.270
> 
> 标签：javascript, jquery, .doc

假设我有 div 的动态内容：

```
//a button to click, or something
<button type="button">Download Content as a .doc</button>

//Div to be downloads as .div
<div class="gc"> //Generated content
   <h1>A Header</h1>
   <p>A Paragraph</p>
   <ul><li>A</li><li>List</li><li>Here</li></ul>
</div> 
```

您可以建议哪些方法在不使用服务器端帮助的情况下解决此问题？我对 JS 持开放态度，因为我目前正在学习这个，并且可以使用 Jquery 访问 div，只是寻找一个简单的答案或提示正确的学习方向。

希望它与在 div 中显示 pdf 一样简单，例如[this](https://stackoverflow.com/questions/2740297/display-adobe-pdf-inside-a-div)，但我不知道。

对于我的特殊情况，内容可以格式化或不格式化，作为对象放置在 word 或其他一些古怪的解决方法中，或者可能使用常见的浏览器扩展。最终，我只想能够为用户提供内容的 .doc（可能是 .docx）版本。

如果我必须使用服务器端功能，是否有任何好的链接可以帮助我了解解决方案？因为我不知道 AJAX 或 PHP，但我愿意学习！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T16:37:58.620

如果没有某种可以发送正确标头的服务器端事物，这是不可能的。

您可以将 .html 文件重命名为 .doc，word 会吃掉它，但您仍然需要一些 PHP，或者任何服务器端语言是您选择的药物来发送内容处置下载标签和内容类型 application/vnd -ms-word 标题。

由于明显的安全风险，这对于纯 JavaScript 是不可能的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T16:56:55.470

使用 blob 构建器和对象 URL 的 HTML5 可以部分实现。困难的部分是生成一个与单词兼容的文件，作为练习留给读者：

```
// normalize vendor extensions
window.BlobBuilder = window.MozBlobBuilder || window.WebKitBlobBuilder || window.BlobBuilder;
window.URL = window.URL || window.webkitURL;

// create the file and append contents to it
var blobthebuilder = new BlobBuilder();
blobthebuilder.append("some text");

// create a URL for the newly created file with a mime
// type and make the anchor point to it
anchor.href = window.URL.createObjectURL(blobthebuilder.getBlob("text/html"));​ 
```

Webkit 还支持`a[download]`自动下载文件而不需要左键单击 → 另存为...

[jsFiddle](http://jsfiddle.net/NRGfM/1/)上的演示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T16:39:47.393

我认为如果没有通过 AJAX 编写的一些服务器端脚本，你就无法做到这一点。

如果您使用 php，则通过 AJAX 发送并作为文本文件发送回下载会很简单。然后您只需要找到一个可以将其转换为 .doc 文件的脚本，因为这是一种复杂的格式。

但是我不确定 HTML5 有很多新功能。

编辑：好的，我可以看到 SchizoDuckie 以 1 分钟的优势击败了我，哈哈 :o)

# python - 如何在网格布局中扩展 QTreeView？

> ID：11810216
> 
> 赞同：0
> 
> 时间：2012-08-04T16:31:59.547
> 
> 标签：python, qt4, pyqt4

我正在尝试创建一个带有树视图和 Web 视图的对话框。两个视图都设置为网格布局。问题是一旦应用程序启动，树视图就无法扩展。它会随着整个对话框中的更改而更改大小，但是当我专门尝试在不更改对话框窗口大小的情况下扩展树视图时，它没有为我提供该选项。我正在使用 PyQt4 来设计对话框。这是代码：

```
class Ui_Dialog(object):
    def setupUi(self, Dialog):
        Dialog.setObjectName(_fromUtf8("Dialog"))
        Dialog.resize(511, 393)
        sizePolicy = QtGui.QSizePolicy(QtGui.QSizePolicy.Expanding, QtGui.QSizePolicy.Expanding)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(Dialog.sizePolicy().hasHeightForWidth())
        Dialog.setSizePolicy(sizePolicy)
        Dialog.setWindowTitle(QtGui.QApplication.translate("Dialog", "Dialog", None, QtGui.QApplication.UnicodeUTF8))
        self.gridLayout = QtGui.QGridLayout(Dialog)
        self.gridLayout.setObjectName(_fromUtf8("gridLayout"))
        self.verticalLayout = QtGui.QVBoxLayout()
        self.verticalLayout.setObjectName(_fromUtf8("verticalLayout"))
        self.listView = QtGui.QListView(Dialog)
        self.listView.setObjectName(_fromUtf8("listView"))
        self.verticalLayout.addWidget(self.listView)
        self.gridLayout.addLayout(self.verticalLayout, 0, 0, 1, 1)
        self.verticalLayout_2 = QtGui.QVBoxLayout()
        self.verticalLayout_2.setObjectName(_fromUtf8("verticalLayout_2"))
        self.webView = QtWebKit.QWebView(Dialog)
        self.webView.setUrl(QtCore.QUrl(_fromUtf8("about:blank")))
        self.webView.setObjectName(_fromUtf8("webView"))
        self.verticalLayout_2.addWidget(self.webView)
        self.gridLayout.addLayout(self.verticalLayout_2, 0, 1, 1, 1)

        self.retranslateUi(Dialog)
        QtCore.QMetaObject.connectSlotsByName(Dialog)

    def retranslateUi(self, Dialog):
        pass

from PyQt4 import QtWebKit

if __name__ == "__main__":
    import sys
    app = QtGui.QApplication(sys.argv)
    Dialog = QtGui.QDialog()
    ui = Ui_Dialog()
    ui.setupUi(Dialog)
    Dialog.show()
    sys.exit(app.exec_()) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T01:35:55.883

一旦小部件位于布局内，通常布局决定小部件的大小。您可以通过在小部件上设置大小策略或拉伸因子来影响这一点。请参阅：[http ://doc.qt.nokia.com/4.7-snapshot/layout.html](http://doc.qt.nokia.com/4.7-snapshot/layout.html)

如果要强制小部件具有特定大小，请使用 QWidget.setFixedSize。

# javascript - 是否可以在 html 正文中引用外部样式表？

> ID：11810217
> 
> 赞同：2
> 
> 时间：2012-08-04T16:32:13.723
> 
> 标签：javascript, html, css

我想将外部 CSS 文件与正文中的 html 代码并排。

为什么？

我正在开发一些包含在页面中的模板，但是从这些模板中我无法修改头部或将 JS/CSS 引用添加到 html 头部部分。

我目前拥有的是：

```
<html>
<head>
<!-- this i cannot edit -->
</head>
<body>
<!-- some html code -->
<!-- now comes what i can edit --> 
    <style>
    #mywidget {
     color: red;
    }
    </style>
    <div id="mywidget">
    hello
    </div>

<!-- end of section i can edit -->
<!-- other html code -->
</body>
</html> 
```

我想把它变成类似的东西：

```
<html>
<head>
<!-- this i cannot edit -->
</head>
<body>
<!-- some html code -->
<!-- now comes what i can edit --> 

    <!-- LINK TO AN EXTERNAL CSS FILE -->

    <div id="mywidget">
    hello
    </div>

<!-- end of section i can edit -->
<!-- other html code -->
</body>
</html> 
```

但是我不希望每次加载页面时都加载所有 css 的开销，所以我想把它放到一个外部文件中。

我想过使用javascript加载外部css（它将托管在同一个域中），然后创建一个元素并以某种方式插入内容......

我认为这应该可行，但是如果不是，我认为我可以使用 jquery 一起破解一些样式解析器，它至少将样式应用于基本定义。

但我相信一定有更好的方法！

任何提示都适用！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T16:34:59.177

您可以使用 CSS 的[@import 规则](http://www.w3.org/TR/CSS21/cascade.html#at-import)

```
<style type="text/css">
  @import url("external.css");
</style> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-04T20:02:55.990

根据 html 标准，将样式标签放在正文中确实是无效的（尽管它可能在某些浏览器中有效）

你可以把脚本放在正文中，你可以让脚本在你的脑海中插入样式链接。jquery 伪代码看起来像这样

```
<body>
  ...
  <script type="text/javascript">
    $(document).ready(function() {
      $('head').append('<link rel="stylesheet" type="text/css" href="style.css">');
    });
  </script>
  ...
</body> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T16:53:33.363

`<link rel="stylesheet" type="text/css" href="style.css">`-- 你也可以把它放在`<body>`标签里；它在 chrome 中工作得很好。

# struct - 如何在struct的方法中设置和获取字段

> ID：11810218
> 
> 赞同：65
> 
> 时间：2012-08-04T16:32:19.483
> 
> 标签：struct, get, set, go

创建这样的结构后：

```
type Foo struct {
    name string
}

func (f Foo) SetName(name string) {
    f.name = name
}

func (f Foo) GetName() string {
    return f.name
} 
```

如何创建 Foo 的新实例并设置和获取名称？我尝试了以下方法：

```
p := new(Foo)
p.SetName("Abc")
name := p.GetName()

fmt.Println(name) 
```

什么都没有打印出来，因为 name 是空的。那么如何在结构中设置和获取字段呢？

[工作游乐场](https://play.golang.org/p/_xkIc-n6Wbk)

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2012-08-04T16:55:16.913

评论（和工作）示例：

```
package main

import "fmt"

type Foo struct {
    name string
}

// SetName receives a pointer to Foo so it can modify it.
func (f *Foo) SetName(name string) {
    f.name = name
}

// Name receives a copy of Foo since it doesn't need to modify it.
func (f Foo) Name() string {
    return f.name
}

func main() {
    // Notice the Foo{}. The new(Foo) was just a syntactic sugar for &Foo{}
    // and we don't need a pointer to the Foo, so I replaced it.
    // Not relevant to the problem, though.
    p := Foo{}
    p.SetName("Abc")
    name := p.Name()
    fmt.Println(name)
} 
```

[测试它](http://play.golang.org/p/Pw9f20zwja)并参加[A Tour of Go](http://tour.golang.org)以了解有关方法和指针的更多信息，以及 Go 的基础知识。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-08-07T08:58:29.310

Setter 和 getter 对于 Go 来说并不是**那么**地道。特别是字段 x 的 getter 不命名为 GetX 而只是 X。请参阅[http://golang.org/doc/effective_go.html#Getters](http://golang.org/doc/effective_go.html#Getters)

如果 setter 不提供特殊逻辑，例如验证逻辑，则导出字段并且既不提供 setter 也不提供 getter 方法没有任何问题。（对于具有 Java 背景的人来说，这只是感觉不对。但事实并非如此。）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-04T17:00:28.803

例如，

```
package main

import "fmt"

type Foo struct {
    name string
}

func (f *Foo) SetName(name string) {
    f.name = name
}

func (f *Foo) Name() string {
    return f.name
}

func main() {
    p := new(Foo)
    p.SetName("Abc")
    name := p.Name()
    fmt.Println(name)
} 
```

输出：

```
Abc 
```

# java - JSF 1.2 startElement 和 writeAttribute 解释

> ID：11810219
> 
> 赞同：4
> 
> 时间：2012-08-04T16:32:50.103
> 
> 标签：java, jsf, jsf-1.2

我有机会为我的项目编写一些自定义渲染器，并且效果很好。但是，我对 ResponseWriter 方法中的一些参数感到有些困惑。文档没有很好地解释这一点，所以我希望一位常驻 JSF 专家能更好地解释这一点。具体来说：

```
public abstract void startElement(java.lang.String name,
                              javax.faces.component.UIComponent component)
                       throws java.io.IOException

Parameters:
    name - Name of the element to be started
    component - The UIComponent (if any) to which this element corresponds 
```

第二个参数实际上是做什么的？无论我在渲染器中传递“null”还是“this”似乎都可以正常工作？

同样对于 writeAttribute：

```
public abstract void writeAttribute(java.lang.String name,
                                java.lang.Object value,
                                java.lang.String property)
                         throws java.io.IOException

Parameters:
    name - Attribute name to be added
    value - Attribute value to be added
    property - Name of the property or attribute (if any) of the UIComponent associated with the containing element, to which this generated attribute corresponds 
```

为什么 ResponseWriter 需要知道支持属性？同样，如果我在编写类属性时传递 null 或“styleClass”，它似乎工作正常。

好奇的人想知道，而我的 google-fu 在这方面失败了……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T03:01:09.040

标准的 Mojarra 实现对它们没有*任何*作用。的`component`论点`startElement()`和`property`论点是`writeAttribute()`完全被忽略的。

但是，可以提供自定义响应编写器。对于某些现实世界的实现，了解响应编写器内部的原始`UIComponent`和/或相关属性是完全有意义的。`UIComponent`

尽管 JSF 2.0 是针对的，但[`Html5ResponseWriter`OmniFaces](http://showcase.omnifaces.org/renderkits/Html5RenderKit)将是一个很好的例子。在允许/编写某些特定的 HTML5 属性之前，通过几次检查`startElement()`来确定类型。`UIComponent``instanceof`

# c# - c# - AutoMapper：如何将字段从 2 个不同的源复制到 1 个目标

> ID：11810220
> 
> 赞同：1
> 
> 时间：2012-08-04T16:32:52.653
> 
> 标签：c#, mapping, automapper

我有一个包含一堆记录的平面文件，假设它是 2 种记录类型的序列

--- 记录 1：ID；姓名；
姓氏 --- 记录 2：年龄；性别；

让我们将 R1 称为表示 Record1 的类，将 R2 称为表示 Record2 的类
在这一刻，我有一个 R1 数组和另一个 R2 数组
如果我有一个名为 Subject 的 POCO，它有 5 个字段，完全命名为 R1 和R2，我如何配置 AutoMapper 为我做魔法？

现在我正在尝试这个：

`var subjects = Mapper.Map<IEnumerable<R1>, List<Subject>>(arrayOfR1s); Mapper.Map<IEnumerable<R2>, List<Subject>>(arrayOfR2s, subjects);`

在第一次映射之后，我得到了一个主题数组，在数组的每个元素中，字段 ID、SURNAME、NAME 都正确填充了值。AGE 和 SEX 按预期保留为 NULL。
但是在第二次映射之后，来自 R1 的所有字段（ID、NAME、SURNAME）都被初始化为 NULL，而我只从 R2 获取字段（AGE 和 SEX）。

如何获得字段的完整联合？
有人可以指出正确的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T12:18:34.177

*连接*（匿名类型）对象的直接动态映射怎么样？

```
Record1[] firstRecords = new[]
    {
        new Record1
            {
                ID = Guid.NewGuid(),
                Name = "John", Surname = "Doe"
            },
        new Record1
            {
                ID = Guid.NewGuid(),
                Name = "Jane", Surname = "Roe"
            }
    };

Record2[] secondRecords = new[]
    {
        new Record2 { Age = 20, Sex = Sex.Male },
        new Record2 { Age = 20, Sex = Sex.Female }
    };

var subjects = firstRecords
    .Select((first, index) =>
        {
            var second = secondRecords[index];
            var r = new
                {
                    ID = first.ID,
                    Name = first.Name,
                    Surname = first.Surname,
                    Age = second.Age,
                    Sex = second.Sex
                };
            return Mapper.DynamicMap<Subject>(r);
        })
    .ToArray(); 
```

顺便说一句，您可以不使用 AutoMapper 而是使用 LINQ 来映射这些对象`Select()`。

```
var subjects = firstRecords
    .Select((first, index) =>
        {
            var second = secondRecords[index];
            var r = new Subject
                {
                    ID = first.ID,
                    Name = first.Name,
                    Surname = first.Surname,
                    Age = second.Age,
                    Sex = second.Sex
                };
            return r;
        })
    .ToArray(); 
```

## 更新

如果你需要复制很多属性，请看一下[Value Injecter](http://valueinjecter.codeplex.com/)。`InjectFrom()`FTW！

```
var subjects = firstRecords
.Select((first, index) =>
    {
        var second = secondRecords[index];
        var r = new Subject();
        r.InjectFrom(first).InjectFrom(second);
        return r;
    })
.ToArray(); 
```

# regex - 正则表达式匹配 _ 或字符串结尾

> ID：11810229
> 
> 赞同：3
> 
> 时间：2012-08-04T16:34:43.700
> 
> 标签：regex, matlab, match

我正在使用 MATLAB `regexp()`，我正在尝试找到一个正则表达式，它只匹配包含`Cyto`但不包含`CytoBlue`. 我的问题是文件名看起来像`Texture_Variance_Cyto_4_90`and `Texture_Variance_CytoBlue_4_90`，或者`HIST_9BinsHistBin7_Cyto`and `HIST_9BinsHistBin7_CytoBlue`。

如果我只是尝试匹配`Cyto`，我还会捕获所有包含`CytoBlue`. 如果我尝试匹配`Cyto_`，我会错过`Cyto`最后一个元素所在的文件名。我想我需要一些“匹配 _ 或字符串结尾”的东西。我试过`Cyto[_\Z]`了，但这不起作用，我再次错过了所有以 . 结尾的元素`Cyto`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T16:37:26.190

```
Cyto(?=$|_) 
```

这匹配`Cyto`, 后跟 ( `"(?=...)"`) 字符串的结尾 ( `"$"`) 或`_`. 请注意，下划线不会作为匹配的一部分返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T16:36:43.723

使用这个正则表达式：`Cyto(_.*?(?= ))?\b`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T17:55:26.557

MATLAB 支持正面和负面的前瞻，所以这应该可以工作：

```
Cytp(?!Blue) 
```

...意思是“Cyto”而不是“Blue”。

# c# - ToolStripComboBoxItem 箭头未绘制所需的颜色（VS.Net 2010，WinForms）

> ID：11810231
> 
> 赞同：0
> 
> 时间：2012-08-04T16:34:53.540
> 
> 标签：c#, .net, vb.net, visual-studio-2010

我正在使用继承自 ToolStripProfessionalRenderer 的 CustomRenderer 渲染工具条。这个概念是我希望工具条项目的箭头颜色在所有情况下都是白色的，除了选择。当它被选中时，颜色应该是黑色的。在我下面的代码中，所有箭头都相应地绘制，除了 ToolStripComboBox 箭头的颜色始终保持不变；默认的。如何整理？

希望我不需要写整个课程，只需要写相关的片段。所以我只上传了 OnRenderArrow 方法。

```
Friend Class CustomRenderer
    Inherits ToolStripProfessionalRenderer

    Sub New()

    End Sub

    Protected Overrides Sub OnRenderArrow(ByVal e As System.Windows.Forms.ToolStripArrowRenderEventArgs)
        If e.Item.Pressed Then
            e.ArrowColor = Color.White
        ElseIf e.Item.Selected Then
            e.ArrowColor = SystemColors.ControlText
        Else
            e.ArrowColor = Color.White
        End If

        MyBase.OnRenderArrow(e)
    End Sub
End Class 
```

要使用相关类呈现工具条：

```
MyToolStrip.Renderer = New CustomRenderer 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T16:24:25.877

ToolStripComboBox 是托管在 ToolStripControlHost 中的常规组合框。ToolStripItem 箭头是提到的菜单子指示器，与此无关。您可以在此处使用代码自定义绘制 ComboBox：[在 ToolStripComboBox 中绘制右箭头](http://social.msdn.microsoft.com/forums/en-US/winforms/thread/d846c71b-d405-495f-9b6d-8d0b361a0aac/)

# php - 会话和 cookie，如果我销毁会话，cookie 会消失吗？(PHP)

> ID：11810233
> 
> 赞同：0
> 
> 时间：2012-08-04T16:34:59.247
> 
> 标签：php, session, cookies, destroy

我使用 PHP`Session`变量让用户登录并编辑他们的网站。当他们注销时，我调用该`session_destroy();`函数来终止会话。

在登录屏幕上，我可以选择“记住这台计算机”，而不是使用`$_SESSION[]`变量，我设置了一个像这样的 cookie：

`setcookie("admin", true, $expire);`

cookie 已设置，但当我注销时，cookie 会取消设置。有什么办法可以防止这种情况？我希望会话结束，但我希望网站也能记住计算机。

感谢您的时间。

编辑：这是我用来启动和销毁会话的两种方法（我调用的会话方法在另一个类上）

```
 public function loginCheck() {

    //check if the remember me is set

    if (isset($_POST['remember'])) {
        $expire = time() + 60 * 60 * 24 * 30;
        setcookie("admin", true, $expire);
    }
    else{
        setcookie("admin", "", time()-3600);
    }

    $sth = $this->db->prepare("SELECT uid FROM philllwareusers WHERE 
            usr = :login AND pasw = :password");

    $sth->execute(array(
        ':login' => $_POST['user'],
        ':password' => $_POST['pswrd']
    ));

    $data = $sth->fetch();

    $count = $sth->rowCount();

    if ($count > 0) {

        //check if user has permision to edit this website

        $sth = $this->db->prepare("SELECT web_id FROM website_spine WHERE 
            admin_id = :uid ");
        $sth->execute(array(
            ':uid' => $data['uid']
        ));

        $datas = $sth->fetch();

        $counts = $sth->rowCount();
        if ($counts > 0) {

            if ($datas['web_id'] == WEB_ID) {

                Session::init();
                Session::set('uid', $data['uid']);
                Session::set('loggedIn', true);
                header('location: ../index');
            } else {
                header('location: ../Adminlogisn');
            }
        }

        // login
    } else {
        header('location: ../Adminlogin');
    }
}

function logout() {
    Session::init();
    Session::destroy();
    header('location: '.URL.'/Adminlogin');
} 
```

这就是管理员登录的样子（将检查 cookie 是否应该设置，应该保持设置或销毁它的部分。），

```
 <?php
        if(!isset($_COOKIE['admin']) || $_COOKIE['admin'] == ''){?>
    Remember this computer as an admin computer <div style="display: inline;cursor: pointer;" onclick="alert('By selecting this option, your website will remember this computer and present the login option on the menu bar when you are not logged in.')">[?]</div>
    <input type="checkbox" name="remember" style="width: 20px;"/> 
    <?php

    }
    else{
        ?>
          Un-check  to forget this computer as an admin computer. <div style="display: inline;cursor: pointer;" onclick="alert('This computer is currently rememberd as and admin computer, making the login link on the menu bar visible for easy access. Uncheck this box to forget this computer as admin computer.')">[?]</div>
    <input type="checkbox" name="remember" checked="checked" style="width: 20px;"/>
    <?php
    }
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T16:38:15.607

*无需检查您的代码。*

您必须检查用户是否有 cookie（不是会话！）。如果他使用 cookie 进入网站但没有会话，则您在后台将他登录（并设置会话）。

如果您有适当的过期时间，则不应取消设置 cookie。然而，会话 cookie 将在浏览器关闭后消失。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-04T17:09:47.627

这是您可以在其中找到问题答案的链接：

[http://www.codeflask.com/2012/08/why-session-destroy-when-remove-my.html](http://www.codeflask.com/2012/08/why-session-destroy-when-remove-my.html)

实际答案（引用自链接）是：

> 删除 cookie 时会话会自动销毁，原因是每当创建会话时，它也会将其 id 存储在 cookie 中，这就是会话自动销毁的原因。

# android - BackupAgentHelper 从未在 Android 2.2 中调用过

> ID：11810235
> 
> 赞同：2
> 
> 时间：2012-08-04T16:35:30.567
> 
> 标签：android, sharedpreferences, database-backups, android-backup-service

我正在尝试在我的应用程序中实施数据备份。我构建了 Android 2.2 项目，并在 Galaxy s2 4.0.3 中运行。

我尝试使用：[BackupManagerTest](https://github.com/luciofm/BackupManagerTest)将首选项保存到云端

这是我的代码：

AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="net.amdroid.backuptest"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-permission android:name="android.permission.INTERNET" />

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="8" />

    <application
        android:allowBackup="true"
        android:backupAgent="net.amdroid.backuptest.MyBackupAgent"
        android:icon="@drawable/icon"
        android:label="@string/app_name" >
        <activity
            android:name=".BackupManagerTestActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <meta-data
            android:name="com.google.android.backup.api_key"
            android:value="AEdPqrEAAAAI7_yf1xqlpltWZPZiKMHVlDgn3nMfgotjUweSUg" />
    </application>

</manifest> 
```

MyBackupAgent.java

```
public class MyBackupAgent extends BackupAgentHelper {
    // The names of the SharedPreferences groups that the application maintains.  These
    // are the same strings that are passed to getSharedPreferences(String, int).
    static final String PREFS_TEST = "testprefs"; 

    // An arbitrary string used within the BackupAgentHelper implementation to
    // identify the SharedPreferenceBackupHelper's data.
    static final String MY_PREFS_BACKUP_KEY = "myprefs"; 

    // Simply allocate a helper and install it
    @Override
    public void onCreate() {
        SharedPreferencesBackupHelper helper =
                new SharedPreferencesBackupHelper(this, PREFS_TEST);
        addHelper(MY_PREFS_BACKUP_KEY, helper);
        Log.d("Test", "Adding backupagent...");
    }
} 
```

我的活动

```
public class BackupManagerTestActivity extends Activity {

    private SharedPreferences prefs;
    private Editor edit;
    private BackupManager backupManager;
    private EditText text;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        backupManager = new BackupManager(getBaseContext());
        prefs = getSharedPreferences(MyBackupAgent.PREFS_TEST, Context.MODE_PRIVATE);
        edit = prefs.edit();

        text = (EditText) findViewById(R.id.editName);
        String nome = prefs.getString("KEY_NAME", "");
        text.setText(nome);

        Button button = (Button) findViewById(R.id.buttonSave);
        button.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                edit.putString("KEY_NAME", text.getText().toString());
                edit.commit();
                Log.d("Test", "Calling backup...");
                backupManager.dataChanged();
            }
        });
    }
} 
```

所以`MyBackupAgent`从来没有打电话。我不知道原因。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-07T14:57:53.893

当您调用时`backupManager.dataChanged()`，它只是*安排*您的应用程序进行备份。这并不意味着您的备份助手会立即被调用。

从[http://developer.android.com/guide/topics/data/backup.html](http://developer.android.com/guide/topics/data/backup.html)：

> 您可以随时通过调用请求备份操作`dataChanged()`。此方法通知备份管理器您要使用备份代理备份数据。然后，备份管理器会在将来的适当时间调用备份代理的 onBackup() 方法。通常，您应该在每次数据更改时请求备份（例如，当用户更改您想要备份的应用程序首选项时）。如果您连续多次调用 dataChanged()，在备份管理器向您的代理请求备份之前，您的代理仍然只收到一次 onBackup() 调用。
> 
> 注意：在开发应用程序时，您可以请求备份并使用 bmgr 工具立即启动备份操作。

bmgr 工具的说明可以在以下位置找到：http: [//developer.android.com/tools/help/bmgr.html](http://developer.android.com/tools/help/bmgr.html)

要强制所有挂起的备份操作立即运行，请使用：

```
adb shell bmgr run 
```

# php - Javascript-Ajax 无法发送任何数据

> ID：11810236
> 
> 赞同：1
> 
> 时间：2012-08-04T16:35:39.207
> 
> 标签：php, javascript, ajax

我无法使这部分代码正常工作，基本上我想调用这个函数，它将变量发送到 php 页面。我已经测试了该变量是否存在，并且还测试了我的 php 页面是否接受了应有的信息，但是我无法使这个 Ajax 工作正常。

```
function ajaxRequest(myname) {
var AJAX = null; // Initialize the AJAX variable.
if (window.XMLHttpRequest) 
{ // Does this browser have an XMLHttpRequest object?
    AJAX=new XMLHttpRequest(); // Yes -- initialize it.
} else 
{ // No, try to initialize it IE style
    AJAX=new ActiveXObject("Microsoft.XMLHTTP"); // Wheee, ActiveX, how do we format c: again?
} // End setup Ajax.

if (AJAX==null) 
{ // If we couldn't initialize Ajax...
    alert("Your browser doesn't support AJAX."); // Sorry msg.
return false // Return false, couldn't set up ajax
}
AJAX.onreadystatechange = function() 
{ // When the browser has the request info..
    if (AJAX.readyState==4 || AJAX.readyState=="complete") 
    { // see if the complete flag is set.
        callback(AJAX.responseText, AJAX.status); // Pass the response to our processing function
    } // End Ajax readystate check.
}

alert("Alert1");
var url='http://localhost/main.php?Name=myname';    
AJAX.open("POST", url, true); // Open the url this object was set-up with.
alert("Alert2");
AJAX.send(); // Send the request. 
```

}

这是我的 php 部分，它应该接受变量

```
<?php
$var=$_GET['Name'];

echo $var;
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T16:44:50.683

好的，首先您需要将您的请求从 POST 更改为 GET

```
AJAX.open("GET", url, true); // Open the url this object was set-up with. 
```

你还需要从

```
var url='http://localhost/main.php?Name=myname'; 
```

到

```
var url='http://localhost/main.php?Name='+myname; 
```

我的完整脚本是：

```
<script type="text/javascript">
    function ajaxRequest(myname) {
        var AJAX = null; // Initialize the AJAX variable.
        if (window.XMLHttpRequest) 
        { // Does this browser have an XMLHttpRequest object?
            AJAX=new XMLHttpRequest(); // Yes -- initialize it.
        } else { // No, try to initialize it IE style
            AJAX=new ActiveXObject("Microsoft.XMLHTTP"); // Wheee, ActiveX, how do we format c: again?
        } // End setup Ajax.

        if (AJAX==null) 
        { // If we couldn't initialize Ajax...
            alert("Your browser doesn't support AJAX."); // Sorry msg.
            return false // Return false, couldn't set up ajax
        }

        AJAX.onreadystatechange = function() 
        { // When the browser has the request info..
            if (AJAX.readyState==4 || AJAX.readyState=="complete") 
            { // see if the complete flag is set.
                callback(AJAX.responseText, AJAX.status); // Pass the response to our processing function
            } // End Ajax readystate check.
        }

        alert("Alert1");
        var url='http://localhost/main.php?Name='+myname;    
        AJAX.open("GET", url, true); // Open the url this object was set-up with.
        alert("Alert2");
        AJAX.send(); // Send the request.
    }
</script> 
```

您可能还缺少回调函数，因此请添加它，使其看起来像这样

```
function callback(x, y) {
    alert(x);
} 
```

并通过调用您的 AJAX 函数

```
ajaxRequest("ashley"); 
```

这是您需要的 main.php 代码（尽管这不是您应该使用 AJAX

```
<?php 
session_start();
if(isset($_GET["Name"])) {
   $_SESSION["Name"] = $_GET["Name"];
}
if(isset($_SESSION["Name"])) {
   echo $_SESSION["Name"];
} else {
   echo "The AJAX has not been run!";
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T17:00:01.753

有两种方式向服务器发送 ajax 请求 GET 或 POST

**1\. 获取方法：**

```
var url='http://localhost/main.php?Name='+myname; // you can add any numner of vars here
AJAX.open("GET", url, true); 
AJAX.send(); 
```

main.php 中的代码

```
 if(!empty($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest') {
        echo $_GET['Name'];
    } 
```

**2.POST方法：**

```
AJAX.open("POST","ajax_test.asp",true);
AJAX.setRequestHeader("Content-type","application/x-www-form-urlencoded");
AJAX.send("Name="+myname); 
```

main.php 中的代码

```
if(!empty($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest') {
    echo $_POST['Name'];
} 
```

# php - 如何在正则表达式中转义斜杠？

> ID：11810241
> 
> 赞同：2
> 
> 时间：2012-08-04T16:36:49.193
> 
> 标签：php, regex

我制作了一些正则表达式来测试 YouTube 嵌入式视频：

```
/^(http:\/\/www\.youtube\.com\/embed\/)[^\/\s\\]+$/ 
```

它适用于我测试它时的期望，但问题是我需要将该正则表达式作为字符串传递给某个函数。特别是我正在使用 htmlawed，我将以下字符串传递给函数：

```
func('iframe=-*,src(match="/^(http:\/\/www\.youtube\.com\/embed\/)[^\/\s\\]+$/")'); 
```

问题是上面的正则表达式可以工作，但它只是忽略斜杠，并接受任何东西来代替它们。

这就是为什么我怀疑转义有问题。

如果您能建议一些替代方法来逃避这些斜杠和反斜杠，我将不胜感激......一定有什么方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T16:40:59.370

如果您有一个字符串，则需要转义字符串文字的反斜杠（和引号）。或者，根据函数如何从字符串构建正则表达式，您可能根本不需要转义斜杠（我不这么认为）。

```
"iframe=-*,src(match=\"/^(http:\\/\\/www\\.youtube\\.com\\/embed\\/)[^\\/\\s\\\\]+$/\")" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T16:58:15.857

在 PHP 中，您还可以使用不同的正则表达式分隔符：

```
~^(http://www\.youtube\.com/embed/)[^/\s\\\\]+$~ 
```

# .htaccess - CodeIgniter 重写 URL：捕获 404 但忽略特定文件夹和文件类型

> ID：11810242
> 
> 赞同：0
> 
> 时间：2012-08-04T16:36:54.050
> 
> 标签：.htaccess, codeigniter, mod-rewrite

在我的 CodeIgniter 应用程序中，我使用特定的过程来捕获和处理 404。这就是我想要的样子。我想出了这个 .htaccess 文件来满足我的需求：

```
<IfModule mod_rewrite.c>
    RewriteEngine On

    RewriteCond %{REQUEST_URI} ^system.*
    RewriteRule ^(.*)$ index.php?/$1 [L]

    RewriteCond %{REQUEST_URI} ^application.*
    RewriteRule ^(.*)$ index.php?/$1 [L]

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php?/$1 [L]
</IfModule>

<IfModule !mod_rewrite.c>
    ErrorDocument 404 index.php
</IfModule> 
```

Wich 效果很好，除了一个主要问题。**它重定向**了一种..**一切**。例如，假设我的最终输出引用了一个不存在的 .css 或 .js 文件。这将导致我的**应用程序**在实际上不需要时再次重新**运行所有内容。**

我对此的解决方案是**忽略`static`文件夹**（我的项目的根目录 - 与 相同的文件夹`index.php`）和**每个`.css/.js`文件**. 但是，我真的不知道如何实现这一点，因此任何可以为我指明正确方向的方向或建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T19:16:22.300

添加另一个条件：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond $1 !^(static|(.*)\.css|(.*)\.js)

RewriteRule ^(.*)$ index.php?/$1 [L] 
```

添加此行告诉 .htaccess**不**处理静态目录内容。

# sql-server - 选择至少存在 N 个连接实体的位置

> ID：11810245
> 
> 赞同：1
> 
> 时间：2012-08-04T16:37:01.523
> 
> 标签：sql-server, performance, entity-framework

想象一下选择至少有两个订单的客户。如何以高性能的方式使用实体框架来表达这一点？

```
context.Customers.Where(c => c.Orders.Count() > 1) 
```

这个看似无辜的表达式导致 SQL 类似：

```
SELECT 
[Project1].[Id] AS [Id]
FROM ( SELECT 
    [Extent1].[Id] AS [Id], 
    (SELECT 
        COUNT(1) AS [A1]
        FROM [dbo].[Orders] AS [Extent2]
        WHERE [Extent1].[Id] = [Extent2].[UserId]) AS [C1]
    FROM [dbo].[Customers] AS [Extent1]
)  AS [Project1]
WHERE [Project1].[C1] > 1 
```

SQL Server 是否足够聪明，可以避免计算每个实体的连接的完整计数，还是应该使用不同的方法？

除了简单地运行查询和测试响应时间之外，我将如何对此进行测试？

以下是我考虑过的其他一些查询表达式。简单的测试显示它们之间的性能差异很小。

```
context.Customers.Where(c => c.Orders.Take(2).Count() > 1)

context.Customers.Where(c => c.Orders.OrderBy(o => o.Id).Skip(1).Any())

context.Orders.GroupBy(l => l.Customer).Where(g => g.Count() > 1).Select(g => g.Key) 
```

# php - 反序列化给出错误

> ID：11810254
> 
> 赞同：0
> 
> 时间：2012-08-04T16:39:00.113
> 
> 标签：php, serialization, curl

一直在这几个星期！无法反序列化此文件： [文件](http://www.4shared.com/office/SgSrUm0Y/unserialize_test.html)

使用`serialize`then `base64_encode`，然后通过 curl 调用传输数据。收货时使用`base64_decode`，则

```
$out = preg_replace('!s:(\d+):"(.*?)";!se', "'s:'.strlen('$2').':\"$2\";'", base64_decode($_POST["data"]) ); 
```

然后`$x=unserialize($out)`

没有输出，错误日志中没有可见的错误！！！

文件就是上面的输出数据`preg_replace` 谢谢

# objective-c - 从 Objective-C/C 向系统事件发送请求？

> ID：11810257
> 
> 赞同：3
> 
> 时间：2012-08-04T16:39:11.047
> 
> 标签：objective-c, c, macos, applescript

有什么方法可以将以下 applescript 转换为 Objective-C/C？

```
tell application "System Events" to set visible of process "Safari" to false 
```

我知道我可以使用`NSAppleScript`类或调用在Objective-C中执行这个applescript `system("osascript -e '...'")`，但是没有其他方法吗？

applescript 如何做到这一点？

或者，我可以从 Objective-C/C 的另一个应用程序中隐藏一个窗口吗？

**更新：**

我发现你可以使用`SBApplication`类来做到这一点：

```
SBApplication *SystemEvents = [SBApplication applicationWithBundleIdentifier:@"com.apple.systemevents"];
/*SystemEventsApplicationProcess*/ id Safari = [[SystemEvents performSelector:@selector(applicationProcesses)] objectWithName:@"Safari"];
[Safari setVisible:NO]; // Doesn't work! 
```

然而，这不起作用，因为`setVisible`可能不符合我的想法。

这是 的类层次结构`SystemEventsApplicationProcess`：

```
SystemEventsApplicationProcess : SystemEventsProcess : SystemEventsUIElement : SystemEventsItem : SBObject : NSObject 
```

`SystemEventsXXX`以下是这些类可用的方法：

```
SystemEventsApplicationProcess
    applicationFile

SystemEventsProcess
    setVisible:
    visible
    unixId
    totalPartitionSize
    shortName
    partitionSpaceUsed
    name
    id
    hasScriptingTerminology
    setFrontmost:
    frontmost
    fileType
    file
    displayedName
    creatorType
    Classic
    bundleIdentifier
    backgroundOnly
    architecture
    acceptsRemoteEvents
    acceptsHighLevelEvents
    windows
    menuBars

SystemEventsUIElement
    select
    clickAt:
    setValue:
    value
    title
    subrole
    setSize:
    size
    setSelected:
    selected
    roleDescription
    role
    setPosition:
    position
    orientation
    name
    minimumValue
    maximumValue
    help
    setFocused:
    focused
    entireContents
    enabled
    objectDescription
    objectClass
    accessibilityDescription
    windows
    valueIndicators
    UIElements
    toolBars
    textFields
    textAreas
    tables
    tabGroups
    staticTexts
    splitterGroups
    splitters
    sliders
    sheets
    scrollBars
    scrollAreas
    rows
    relevanceIndicators
    radioGroups
    radioButtons
    progressIndicators
    popUpButtons
    popOvers
    outlines
    menuItems
    menuButtons
    menuBarItems
    menuBars
    menus
    lists
    incrementors
    images
    growAreas
    groups
    drawers
    comboBoxes
    columns
    colorWells
    checkboxes
    buttons
    busyIndicators
    browsers
    attributes
    actions

SystemEventsItem
    setName:
    name
    id
    removeActionFromUsingActionName:usingActionNumber:
    pick
    keyUp
    keyDown
    increment
    editActionOfUsingActionName:usingActionNumber:
    doScript
    doFolderActionFolderActionCode:withItemList:withWindowSize:
    decrement
    confirm
    cancel
    attachedScripts
    attachActionToUsing:
    stop
    start
    saveAs:in:
    moveTo:
    exists
    duplicateTo:withProperties:
    delete
    closeSaving:savingIn:
    setProperties:
    properties
    objectClass

SBObject
    // ...
NSObject
    // ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T19:50:25.690

您可以使用[`NSRunningApplication`](http://developer.apple.com/library/mac/#documentation/AppKit/Reference/NSRunningApplication_Class/Reference/Reference.html%23//apple_ref/occ/clm/NSRunningApplication/runningApplicationsWithBundleIdentifier%3a)，它代表（顾名思义）一个正在运行的应用程序，并且有一个`-hide`方法。

`NSWorkspace`将为您提供所有正在运行的应用程序的列表：`[[NSWorkspace sharedWorkspace] runningApplications]`您可以对其进行过滤，或者您可以使用其捆绑标识符获取表示 Safari 的对象：（[`+[NSRunningApplication runningApplicationsWithBundleIdentifier:]`](http://developer.apple.com/library/mac/documentation/AppKit/Reference/NSRunningApplication_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40008799-CH1-SW11)请注意，如果同一应用程序有多个运行实例，则实际上返回一个数组）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T19:52:09.287

除非您将脚本桥接框架添加到您的项目和其他一些东西，否则代码将无法工作。你有没有这样做...我不知道。[如果您需要说明，此链接](http://robnapier.net/blog/scripting-bridge-265)似乎很好地解释了所需内容。

顺便说一句，“设置可见”意味着隐藏应用程序，就像从应用程序菜单中隐藏它一样。但是，如果您想隐藏一个应用程序，我确信有一个 NSWorkspace 方法。

最后一点建议......对于只有几行 applescript 代码 NSApplescript 将是您的最佳选择。如果您打算使用大量 applescript 脚本代码，那么脚本桥是更好的选择，尽管我自己经常只是在我的项目中放置一个已编译的脚本，然后使用 NSApplescript 从该脚本启动处理程序。您也可以使用 ApplescriptObjC 语言。你有很多选择。

# ios - UIWebView 禁用双击以使单击响应更快

> ID：11810268
> 
> 赞同：0
> 
> 时间：2012-08-04T16:41:25.297
> 
> 标签：ios, html, uiwebview

我正在尝试使用 UIWebView 构建一个 html5 应用程序。当单击 html 的按钮时，系统需要 300 毫秒才能知道它是单击还是双击。我可以禁用双击，这样我可以节省时间让我的应用程序响应更快吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T16:44:50.580

请参阅为Google[的移动 Web 应用程序创建快速按钮。](https://developers.google.com/mobile/articles/fast_buttons?hl=de-DE)

# php - 如何在PHP中的一定数量的字符后拆分字符串

> ID：11810270
> 
> 赞同：2
> 
> 时间：2012-08-04T16:41:52.997
> 
> 标签：php, string

我正在使用 PHP 返回用户的浏览器用户代理问题是我想在哪里打印它：我不希望长度超过每行大约 30 个字符。有没有办法将返回的变量（从我调用以获取字符串的函数）分解为一定长度的子字符串？而且由于 UA 字符串的长度不同，我不确定会发生什么。

这是我返回用户代理的 PHP 代码：

```
function __toString() {
    return "Browser Name:
    return "Browser Name:             {$this->getBrowser()}  \n" .
           "    Browser Version:          {$this->getVersion()} \n" .
             "  Browser User Agent String:           {$this->getUserAgent()} \n" .
           "    Platform:                 {$this->getPlatform()} ";
} 
```

特别是这个电话`$this->getUserAgent`。我使用这个输出：

```
<?php require_once('browser.php'); $browser =  new Browser(); echo $browser . "\n"; ?> 
```

现在，名称、版本和平台调用输出就像我想要的那样（因为在 UA 字符串中没有任何地方接近）。

简而言之，如何拆分返回的用户字符串，使其每行不超过一定数量的字符？理想情况下，我想将它们存储到临时变量中，因为我必须在单词之间添加空格。例如，在它说“平台”的地方，它前面有空格，所以它与浏览器版本垂直对齐，然后是空格，以便函数返回的所有字符串的结果对齐。

如果有人想要上面的 Github 代码看看我在做什么，函数调用在第[339-243](https://github.com/chriscct7/jigoshop/blob/dev/admin/browser.php)行，回显结果[在](https://github.com/chriscct7/jigoshop/blob/dev/admin/jigoshop-admin.php)第 152 行。

# 在这一点上我非常非常接近

## 只需要帮助在包装文本之前添加空格（请参阅下面的答案）

这就是我现在所拥有的：

```
$text1   = $this->getUserAgent();
$UAline1 = substr($text1, 0, 26);

$text2       = $this->getUserAgent();
$towrapUA    = str_replace($UAline1, '', $text2);
$wordwrapped = chunk_split($towrapUA, 26, "\n\r"); 
```

此时唯一的问题是如何在每个包装代码之前获得恒定数量的空格？我需要（比如说）在所有换行之前留出 20 个空格来进行格式化。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-04T16:54:32.143

尝试这个：

```
$str = chunk_split($string, 30, "\n\r");
// Splits a string after X chars (in this case 30) and adds a line break 
```

您也可以使用正则表达式进行尝试：

```
$str = preg_replace("/(.{30})/", "$1\n\r", $string); 
```

或者，正如上面评论中所建议的，这做同样的事情：

```
$str = wordwrap($string, 30, "<br />\n"); 
```

更多信息：

[http://php.net/manual/en/function.chunk-split.php](http://php.net/manual/en/function.chunk-split.php)

[http://us2.php.net/wordwrap](http://us2.php.net/wordwrap)

**编辑：**

根据您编辑的问题，看起来这就是您要查找的内容：

```
$text1    = $this->getUserAgent();
$UAline1  = substr($text1, 0, 26);
$towrapUA = str_replace($UAline1, '', $text1);

$space = str_repeat('&nbsp;', 20);

$wordwrapped = wordwrap($towrapUA, 26, "\n");
$wordwrapped = explode("\n", $wordwrapped); // Split at '\n'

$numlines = count($wordwrapped) - 1;
$string   = '';
$i = 0;

foreach($wordwrapped as $line) {
    if($i < $numlines) {
        $string .= $space . $line . "\n\r"; // Add \n\r back in if not last line
    } else {
        $string .= $space . $line; // If it's the last line, leave off \n\r
    }

    $i++;
}

echo $string; 
```

# sql - 使用外键时在同一个表中包含 parent_id 的表

> ID：11810273
> 
> 赞同：0
> 
> 时间：2012-08-04T16:42:56.483
> 
> 标签：sql, rdbms, foreign-key-relationship

我有一个包含各种类别的表格。下面是一个缩小的表结构：

```
tb_categories
  category_id
  category_name
  category_parent_id 
```

我在 category_id 上的 category_parent_id 上创建了一个外键约束，因此数据完整性可以保存在同一个表中。

第一个问题是，在同一张表上有一个外键是一种好习惯吗？从我的思维方式来看，我认为在这种情况下是的，这是一个很好的做法。

第二个问题是，如何存储全局父实体的最佳方法是什么？

我想出了以下方法：

方法一：category_parent_id可以存储null，唯一的null就是全局父类All

方法2：category_parent_id 不能存储空值，全局parrent ALL 将包含相同的category_id。因此，仅对于这个类别，category_id 和 category_parent_id 都是相同的。没有空值，我不能将此 category_parent_id 插入为 0，因为 0 不作为 category_id 存在

方法3：没有全局父级，会有不同的“父级”。例如，Audio、Visual 作为父级，MP3、WMA 作为 Audio 的子级，MPEG、AVI 作为 Visual 的子级。在整个方法中，方法 1 和 2 的相同原理适用。

方法 4：这是我最喜欢的方法，其中包括没有此外键约束，因此可以将全局父级设置为 0，这在任何其他类别中都不存在。

有什么建议么？因为我正在寻找最佳实践，而不是“行之有效”的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T16:48:08.353

有一个表引用自己是正常的。有很多现实世界的场景需要这种情况（Employee -> Manager 是一个著名的教科书示例）。

而且，您最终将拥有一个“全局”父级，无论它是单个全局父级还是多个全局父级。所以你需要想出一个方法。

我更喜欢方法 1 - 没有父元素的元素根本没有父元素，因为它完全实现了您的业务规则。

当您有复杂的查询时，拥有`0`或引用自己作为父母会产生问题

# python - 如何在python中组合数组列表？

> ID：11810274
> 
> 赞同：0
> 
> 时间：2012-08-04T16:43:19.937
> 
> 标签：python, django, arrays, list

嘿伙计们，我觉得这是一个简单的问题，但我不知道这些代码行叫什么，所以我很难搜索它:(希望你能帮助我！

对于上下文，我从 Django 中的 FQL 查询中获取数据，此代码位于 Views.py 中。我想知道是否有任何方法可以将这三行合并或简化。谢谢！

```
edu = result[0]['education']
educa = edu[0]['school']
education = educa['name'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T16:45:18.890

只需将引用替换最后一个表达式中的变量名：

```
education = result[0]['education'][0]['school']['name'] 
```

不确定这是否更具可读性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T16:59:52.147

保持在 3 行。它的可读性很强，而且真的不需要更长的时间来运行。

当你试图从那个街区追踪一个`KeyError`或时，你会感谢我的。`IndexError`

也许你可以改进变量名。这是我的建议

```
education = result[0]['education']
school = education[0]['school']
school_name = school['name'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T16:52:05.623

Martijn 是对的-我不确定可读性-如果您发现自己经常这样做，那么我会很想使用辅助功能...它使事情变得更清楚。

```
def get_education(edu, main_idx=0, edu_idx=0):
    "Get the name of the school where education was received"
    return edu[main_idx]['education'][edu_idx]['school']['name'] 
```

然后只需使用：

```
education = get_education(result) 
```

# java - 如何让 upd 服务器监听多个端口？

> ID：11810279
> 
> 赞同：0
> 
> 时间：2012-08-04T16:44:29.640
> 
> 标签：java, ports, datagram

我有一个**`upd client/server`**聊天系统（文本、语音），我会在端口**收听****语音聊天**，在另一个端口收听**文本聊天**

# jquery - 我的 ajax 加载程序给我带来了问题

> ID：11810284
> 
> 赞同：0
> 
> 时间：2012-08-04T16:44:53.203
> 
> 标签：jquery, ajax, loader

请帮助我的人。我已经实现了这个 ajax 加载器 gif 图像并且它可以工作，但是当我第二次单击链接时，它只会加载而不会消失。我应该补充一点，链接的设置方式是，如果在我再次单击同一个链接时加载一次，则不会发生任何事情（对我自己而言，加载已经获取的文件有点毫无意义）。这是我的代码片段：

```
$('.loadtitles').click(function() {
   $("#myDiv").append('<img src="loader.gif" alt="Currently Loading" id="loading" />');
   window.location.hash = $(this).attr("href");
  var href = $(this).attr('href');
  $('#SearchFrame').css('display','none');
  $('#myDiv').css('display','block');

return false;
}); 
```

我尝试添加这样的内容：

```
$('#loading').fadeOut(1000, function() {$(this).remove();}); 
```

但它并没有完成我所需要的。我一直在玩代码一段时间，但我设法做的任何事情都不适合我所追求的修复。任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T17:03:29.853

因为你在使用`append`，所以每次点击都会创建一个新的加载img。我建议将图像放在 html 中，并根据需要让 jQuery 显示/隐藏它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T17:18:05.217

感谢您对所有人的帮助，但我通过在整个代码的必要部分添加 jqery（停止）来修复它。但我仍然希望看到其他人会以任何其他方式来解决这个问题。

# .net - 尝试运行最简单的 WCF 服务 - 不起作用

> ID：11810285
> 
> 赞同：0
> 
> 时间：2012-08-04T16:44:54.037
> 
> 标签：.net, wcf

我正在尝试运行托管在控制台应用程序中的简单 WCF 服务。这是我的代码：

```
class Program
{
    static void Main(string[] args)
    {
        var serviceHost = new ServiceHost(
          typeof (MyService), new Uri("http://localhost:3000"));
        serviceHost.AddServiceEndpoint(
          typeof (IMyService), new WebHttpBinding(), "");

        serviceHost.Open();
        Console.ReadKey();
        serviceHost.Close();
    }
}

[ServiceContract]
public interface IMyService
{
    [WebGet]
    [OperationContract]
    string Hello(String s);
}

public class MyService : IMyService
{
    public string Hello(String s)
    {
        return "hello " + s;
    }
} 
```

当我去的时候`http://localhost:3000`，它说

> 服务
> 
> 这是 Windows© Communication Foundation 服务。
> 
> 此服务的元数据发布当前已禁用。
> 
> 如果您有权访问该服务，则可以通过完成以下步骤来修改您的 Web 或应用程序配置文件来启用元数据发布：
> 
> [更多文字在这里]

然后，当我去 时`http://localhost:3000/Hello?s=John`，它说：

> 由于 EndpointDispatcher 的 AddressFilter 不匹配，接收方无法处理带有 To 'http://localhost:3000/Hello?s=John' 的消息。检查发送方和接收方的 EndpointAddresses 是否一致。

我想知道我是否做错了。目标平台是 .NET 4。我没有`app.config`.

将不胜感激任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T03:12:01.370

在 .NET 4 或更高版本中，如果您定义基地址，WCF 将为您生成默认终结点。换句话说，只需：

```
var serviceHost = new ServiceHost(
      typeof (MyService), new Uri("http://localhost:3000")); 
serviceHost.Open(); 
```

阅读[开发人员对 Windows Communication Foundation 4 的介绍中的](http://msdn.microsoft.com/en-us/library/ee354381.aspx)**默认端点**部分

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T17:37:20.690

像这样固定：

```
var serviceHost = new ServiceHost(
  typeof(MyService), new Uri("http://localhost:3000"));
var serviceContractDescription = ContractDescription.GetContract(
  typeof (IMyService));
var serviceEndpoint = new WebHttpEndpoint(
  serviceContractDescription, new EndpointAddress("http://localhost:3000"));
serviceHost.AddServiceEndpoint(serviceEndpoint); 
```

现在工作。

# c# - Asp.net 页面生命周期特定的全局变量？

> ID：11810289
> 
> 赞同：5
> 
> 时间：2012-08-04T16:45:55.420
> 
> 标签：c#, asp.net, vb.net

当然，这一定是一个常见问题，但我找不到一个简单的方法来做到这一点。

有没有办法在 asp.net webform 的生命周期中共享一个全局变量（比如一个实例化成本很高的类），而不必将句柄传递给页面的每个组件？

如果我只是创建一个静态变量，应用程序域中的所有线程都可以访问它（问题：我的类不是线程安全的），并且很难确保每个页面都在最近的副本上工作（我想缓存该类通过页面生命周期的每一步，但每次调用新页面时我都想要一个新实例）。

另一种方法是通过页面中的每个控件传递一个句柄，但是在母版页、页面本身和所有用户控件之间，它使代码变得非常麻烦。

我想知道是否没有一个优雅的解决方案可以将一个类存储在某个地方，只有执行这个特定页面的线程才能访问（包括所有子用户控件）？

欢迎任何建议！谢谢查尔斯

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-04T17:02:52.743

有一个简单的答案：Items 容器。它在单个请求的生命周期内可用，然后自动销毁。您可以将其包装在一个属性中以获得您想要的：

```
 public class Foo {

   const string SOMEKEY = "_somekey";

   public static string SingleRequestVariable
   {
      get
      {
          return (string)HttpContext.Current.Items[SOMEKEY];   
      }
      set
      {
          HttpContext.Current.Items.Add( SOMEKEY, value );
      }
   }
 } 
```

进而

```
Foo.SingleRequestVariable = "bar"; // somewhere
...
string val = Foo.SingleRequestVariable; // yet somewhere else 
```

# iphone - 在AVPlayer中播放完第一首歌曲后如何继续播放第二首歌曲

> ID：11810293
> 
> 赞同：2
> 
> 时间：2012-08-04T16:46:37.497
> 
> 标签：iphone, objective-c, ios, xcode, avplayer

如何使用 AVPlayer 立即开始下一首歌曲？我有从 MPMediaItemCollection 中的 iPod 库中选择的歌曲集合，显示在我的 UITableView **[myPlaylistTable]**中。我知道我必须使用 NSNotification 来检查歌曲是否已经完成，但我不知道如何在当前歌曲播放完毕后立即播放第二首或下一首歌曲。我在下面发布了我的代码

如果有人可以帮助我解决问题，将不胜感激。谢谢

```
 in viewDidLoad i have initialized 

- (void)viewDidLoad
{
    [super viewDidLoad];

    //[[UIApplication sharedApplication] beginReceivingRemoteControlEvents];
    [self.myPlaylistTable deselectRowAtIndexPath:[self.myPlaylistTable indexPathForSelectedRow] animated:NO];

    [[AVAudioSession sharedInstance] setCategory: AVAudioSessionCategoryPlayback error: nil];

    UInt32 doSetProperty = 0;
    AudioSessionSetProperty (
                             kAudioSessionProperty_OverrideCategoryMixWithOthers,
                             sizeof (doSetProperty),
                             &doSetProperty
                             );

    [self becomeFirstResponder];

    myPlaylistTable.hidden=YES;

    playlistSongsArray =[[NSMutableArray alloc]init];

[[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(nextSongPlaying:)
                                                     name:AVPlayerItemDidPlayToEndTimeNotification
                                                   object:[myPlayer currentItem]];

}      

-(void) mediaPicker:(MPMediaPickerController *)mediaPicker didPickMediaItems:(MPMediaItemCollection *)mediaItemCollection {

    // Dismiss selection view
    [self dismissViewControllerAnimated:YES completion:nil];

    // Get AVAsset
    NSURL* assetUrl = [mediaItemCollection.representativeItem valueForProperty:MPMediaItemPropertyAssetURL];
    AVURLAsset* asset = [AVURLAsset URLAssetWithURL:assetUrl options:nil];

    AVPlayerItem* playerItem = [AVPlayerItem playerItemWithAsset:asset];

    myPlayer = [AVPlayer playerWithPlayerItem:playerItem];

    [playlistSongsArray addObjectsFromArray:mediaItemCollection.items];

    NSLog(@" Playlist songs  %@",playlistSongsArray);

    [self.myPlaylistTable reloadData];

    [myPlayer play];

}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];

    [[UIApplication sharedApplication] beginReceivingRemoteControlEvents];
    [self becomeFirstResponder];
}

- (BOOL)canBecomeFirstResponder 
{
    return YES;
}

- (UITableViewCell *) tableView: (UITableView *)tableView cellForRowAtIndexPath: (NSIndexPath *) indexPath {

    NSInteger row = [indexPath row];
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier: kCellIdentifier];

    if (cell == nil) {

        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:kCellIdentifier];

            UILabel *playbackDurationLabel =[[UILabel alloc]initWithFrame:CGRectMake(205, 88, 103, 18)];
            playbackDurationLabel.tag = 100;
            playbackDurationLabel.backgroundColor = [UIColor clearColor];
            playbackDurationLabel.textColor = [UIColor orangeColor];

            playbackDurationLabel.font = [UIFont fontWithName:@"Helvetica" size:14];

            [cell.contentView addSubview:playbackDurationLabel];

    }   

    if (tableView == myPlaylistTable)
    {
        MPMediaItem *mediaItem = (MPMediaItem *)[playlistSongsArray objectAtIndex:row]; 
        MPMediaItemArtwork *artwork = [mediaItem valueForProperty:MPMediaItemPropertyArtwork];

        if (mediaItem) 
        {
            cell.textLabel.text = [mediaItem valueForProperty:MPMediaItemPropertyTitle];
            cell.textLabel.textColor = [UIColor redColor];
            cell.textLabel.font = [UIFont fontWithName:@"Helvetica" size:15];
            cell.textLabel.numberOfLines=0;

            cell.detailTextLabel.text = [mediaItem valueForProperty:MPMediaItemPropertyArtist];
            cell.detailTextLabel.textColor = [UIColor blueColor];
            cell.detailTextLabel.font = [UIFont fontWithName:@"Helvetica" size:14];
            cell.detailTextLabel.numberOfLines=0;

            UILabel *songDurationLabel = (UILabel *) [cell.contentView viewWithTag:100];
            songDurationLabel.text=[self secondsFormatted:[[mediaItem valueForProperty:MPMediaItemPropertyPlaybackDuration] intValue]];

            NSLog(@"song duration - %@",[[mediaItem valueForProperty:MPMediaItemPropertyPlaybackDuration] stringValue]);

            if (artwork != nil) 
            {
                cell.imageView.image = [artwork imageWithSize:CGSizeMake(60, 60)];
            }
            else
            {
                cell.imageView.image = [UIImage imageNamed:@"noArtworkImage.png"];
            }
        }   

        [tableView deselectRowAtIndexPath: indexPath animated: YES];
    }

    return cell;
}

    -(void)nextSongPlaying:(NSNotification *)notification
    {
         //What stuff to do 
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T11:58:05.990

DShah我是这样做的..你能在我的viewDidLoad中检查它是否正确..

```
 [[NSNotificationCenter defaultCenter] addObserver:self 
selector:@selector(nextSongPlaying:) 
name:AVPlayerItemDidPlayToEndTimeNotification 
object:[myPlayer currentItem]];

- (void)nextSongPlaying:(NSNotification *)notification 
{ 

AVPlayerItem *playerItem = [notification object];
[playerItem seekToTime:kCMTimeZero];
[myPlayer play];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T18:07:40.370

请参阅 Apple 的链接以获取帮助：http: [//developer.apple.com/library/ios/#documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/02_Playback.html](http://developer.apple.com/library/ios/#documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/02_Playback.html)

这个链接解释了**Playing Multiple Items**。您可以使用`AVQueuePlayer`which 的子类来`AVPlayer`对多首歌曲进行排队。

**编辑**

请查看 GitHub 链接：[https](https://github.com/crocodella/AVPlayerSample) ://github.com/crocodella/AVPlayerSample 解释：[http ://www.crocodella.com.br/2011/01/using-avplayer-to-play-background-music-from-图书馆/](http://www.crocodella.com.br/2011/01/using-avplayer-to-play-background-music-from-library/)

此链接具有您想要的相同内容。

# xml - csproj 文件中项目的顺序是否重要？

> ID：11810294
> 
> 赞同：5
> 
> 时间：2012-08-04T16:46:49.210
> 
> 标签：xml, visual-studio-2008, build, csproj

我想在整个团队的解决方案中以编程方式管理 VS2008 csproj 文件。我们偶尔会遇到合并问题（在 Hg 中），仅仅是因为两个开发人员在一个项目中添加了不同的新文件，但他们最终在 csproj 文件中的“相同位置”并触发了“解决冲突”的需要。有时，一个标签会丢失并触发构建错误。

*   我可以合并`<ItemGroup>`似乎只是列表或标签的 s 吗？
*   我可以重新排序`<Content>`或`<Compile>`标记吗？或者，它们是否处于某种“智能”顺序？
*   如果这在 VS2008 项目中没问题，我是否能够将其带到 VS2010/2012，或者与此相关的任何变化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T16:52:13.857

是的，你可以合并它。顺序没有区别。将持续到 2010/2012 年。

# mysql - 如何从两个没有 1:1 关系的关系表中获取数据？- MySQL

> ID：11810298
> 
> 赞同：0
> 
> 时间：2012-08-04T16:47:03.793
> 
> 标签：mysql, optimization, inner-join

我有两个关系表，`core`并且`domains`. 它们都由 和 相关`core.id`联`domains.cid`。我想形成一个查询，该查询可以返回表中的一行，以及`core`表中的所有相关行`domains`。目前，我运行了两个查询；一个从表中获取所需的单行`core`，另一个从表中获取所有相关行，`domains`但我正在尝试优化我的查询。

我试过类似的东西：

```
SELECT a.domain,b.* FROM domains a WHERE a.cid=1 INNER JOIN core b ON a.cid=b.id 
```

现在这工作正常，除了它返回多行都带有冗余数据。例如，如果 in 中的一行`core`有 5 个相关行`domains`，则返回 5 行，并且`b.*`每个结果中显然是相同的。有没有办法返回一行，全部`a.domain`返回单行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T16:53:09.420

```
SELECT
  GROUP_CONCAT(d.domain) AS domains,
  c.*
FROM core c
JOIN domains d
  ON d.cid = c.id
WHERE c.id = 1
GROUP BY c.id 
```

# android - 安卓动态图片

> ID：11810301
> 
> 赞同：1
> 
> 时间：2012-08-04T16:47:29.543
> 
> 标签：android, imageview, dynamic-data

我有 10 个图像视图：

```
ImageView Card0=(ImageView)findViewById(R.id.Card0);
.....
ImageView Card9=(ImageView)findViewById(R.id.Card9); 
```

所有图像都在我的可绘制文件夹中，但我正在从远程数据库中选择卡片。一个 php 脚本生成 10 张随机卡片。

我有包含文件名的数组：

```
Cards = deal.split(":"); 
```

现在我想设置图像：

```
Card0.setImageResource(R.drawable.Cards[0]); 
```

我已经尝试并搜索了很多，但无法设置任何变量`setImageResource(R.drawable.*Variable*);`

有人请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T17:36:19.820

无法使用 R.id.drawable.* 动态加载。

**解决方案1：**

我将假设您的卡片图像的名称是：card0.png、card1.png ... card9.png 我建议您创建一个`assets`目录（在`res`目录内）。将卡片图像复制到`assets`目录中。

```
import android.app.Activity;
import android.content.res.AssetManager;
import android.graphics.drawable.Drawable;

import java.io.InputStream;
import java.io.IOException;

public class YourActivity extends Activity {

//...

    public Drawable loadAssetImage(String fileName) {
        AssetManager assetMgr = this.getAssets();

        try {
            InputStream is = assetMgr.open(fileName);
            Drawable d = Drawable.createFromStream(is, null);
            return d;
        }catch( IOException e ) {
            // error...
            return null;
        }       
    }
} 
```

该方法从目录`loadAssetImage()`加载图像。`assets`因此，现在您可以动态加载图像，因为它接受字符串参数。

请注意，目录名称必须是`assets`。Android 允许直接（原始）访问`assets`目录中的内部资源。

**解决方案 2**

```
public Drawable loadCardImage(int index) {
    switch( index ) {
    case 0:
        return android.R.Card0;

    case 1:
        return android.R.Card1;

    ..
    case 9:
        return android.R.Card9;         
    }
    return null;
} 
```

您将从服务器收到卡片的索引。此函数将返回适当的资源。

# r - 替换数据框中多个单元格的内容

> ID：11810303
> 
> 赞同：-1
> 
> 时间：2012-08-04T16:48:03.767
> 
> 标签：r

我需要替换数据框中多个单元格的内容。举个例子，我将`mtcars`如何替换 vs 列中包含`1`的*任何*单元`one`格？

 ** * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T16:57:23.177

```
mtcars$vs[mtcars$vs == 1] <- "one" 
```

或者

```
mtcars[mtcars$vs == 1, "vs"] <- "one" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T16:54:49.370

像这样的东西：

```
mtcars$vs[mtcars$vs == 1] <- "one" 
```*

# c# - 注册已使用的热键

> ID：11810305
> 
> 赞同：7
> 
> 时间：2012-08-04T16:48:06.830
> 
> 标签：c#, hook, registerhotkey

**背景：**

我想在全球范围内收听热键序列（`Ctrl+Alt+Left`），所以我正在使用：

```
[DllImport("user32.dll")]
private static extern bool RegisterHotKey(IntPtr hWnd, int id, uint fsModifiers, uint vk); 
```

这适用于许多其他热键序列，例如`Ctrl+Alt+PageUp`,`Ctrl+Alt+PageDown`等...但是特别是会出现问题`Ctrl+Alt+Left`。

* * *

**问题：**

在一台计算机上，它工作得很好，就像任何其他热键序列一样，但在另一台`Ctrl+Alt+Arrow`用于旋转屏幕的计算机上，它无法注册热键（即返回零并且没有回调到窗口的处理）。

MSDN 说：*如果为热键指定的击键已被另一个热键注册，则 RegisterHotKey 失败。*

无论如何，我都希望能够注册该热键序列，并且如果需要，覆盖它。我当然希望屏幕保持不旋转，至少只要我的程序正在运行。

更改热键序列并不是一个真正的选择，因为其他计算机可能有其他热键序列也可能导致故障。

* * *

**问题：**

`Ctrl+Alt+Left`作为屏幕旋转热键和作为保存热键有什么区别`Ctrl+S`，导致一个失败而另一个失败？（也许是因为一个是全局热键，第二个是上下文？）

是否可以完全覆盖热键？这是一个好主意吗？

最重要的是，我如何确保我的热键会被注册？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-04T19:10:11.403

我刚刚将我的方法从热键更改为挂钩。我正在收听任何低级键盘按下事件，并在使用 winAPI 触发时获取修饰符的状态。然后我有关于当前按下序列的完整信息。

完成这一切的代码非常长且丑陋，但最终它很容易使用。

```
/// <summary>
/// A class that manages a global low level keyboard hook
/// </summary>
class GlobalKeyboardHook
{
    #region Constant, Structure and Delegate Definitions

    /// <summary>
    /// defines the callback type for the hook
    /// </summary>
    public delegate int KeyboardHookProc(int code, int wParam, ref KeyboardHookStruct lParam);

    public struct KeyboardHookStruct
    {
        public int vkCode;
        public int scanCode;
        public int flags;
        public int time;
        public int dwExtraInfo;
    }

    private const int WH_KEYBOARD_LL = 13;
    private const int WM_KEYDOWN = 0x100;
    private const int WM_KEYUP = 0x101;
    private const int WM_SYSKEYDOWN = 0x104;
    private const int WM_SYSKEYUP = 0x105;

    #endregion

    /// <summary>
    /// The collections of keys to watch for
    /// </summary>
    public List<Keys> HookedKeys = new List<Keys>();

    /// <summary>
    /// Handle to the hook, need this to unhook and call the next hook
    /// </summary>
    private IntPtr _hhook = IntPtr.Zero;

    /// <summary>
    /// Initializes a new instance of the <see cref="GlobalKeyboardHook"/> class and installs the keyboard hook.
    /// </summary>
    public GlobalKeyboardHook()
    {
        this.Hook();
    }

    /// <summary>
    /// Releases unmanaged resources and performs other cleanup operations before the
    /// <see cref="GlobalKeyboardHook"/> is reclaimed by garbage collection and uninstalls the keyboard hook.
    /// </summary>
    ~GlobalKeyboardHook()
    {
        this.Unhook();
    }

    /// <summary>
    /// Installs the global hook
    /// </summary>
    public void Hook()
    {
        IntPtr hInstance = LoadLibrary("User32");
        this._hhook = SetWindowsHookEx(WH_KEYBOARD_LL, this.HookProc, hInstance, 0);
    }

    /// <summary>
    /// Uninstalls the global hook
    /// </summary>
    public void Unhook()
    {
        UnhookWindowsHookEx(this._hhook);
    }

    /// <summary>
    /// The callback for the keyboard hook
    /// </summary>
    /// <param name="code">The hook code, if it isn't >= 0, the function shouldn't do anyting</param>
    /// <param name="wParam">The event type</param>
    /// <param name="lParam">The keyhook event information</param>
    /// <returns></returns>
    private int HookProc(int code, int wParam, ref KeyboardHookStruct lParam)
    {
        if (code >= 0)
        {
            var key = (Keys) lParam.vkCode;

            if (this.HookedKeys.Contains(key))
            {
                var handler = this.KeyPressed;

                if ((wParam == WM_KEYDOWN || wParam == WM_SYSKEYDOWN) && (handler != null))
                {
                    ModifierKeys mods = 0;

                    if (Keyboard.IsKeyDown(Keys.Control) || Keyboard.IsKeyDown(Keys.ControlKey) ||
                        Keyboard.IsKeyDown(Keys.LControlKey) || Keyboard.IsKeyDown(Keys.RControlKey))
                    {
                        mods |= ModifierKeys.Control;
                    }

                    if (Keyboard.IsKeyDown(Keys.Shift) || Keyboard.IsKeyDown(Keys.ShiftKey) ||
                        Keyboard.IsKeyDown(Keys.LShiftKey) || Keyboard.IsKeyDown(Keys.RShiftKey))
                    {
                        mods |= ModifierKeys.Shift;
                    }

                    if (Keyboard.IsKeyDown(Keys.LWin) || Keyboard.IsKeyDown(Keys.RWin))
                    {
                        mods |= ModifierKeys.Win;
                    }

                    if (Keyboard.IsKeyDown(Keys.Alt))
                    {
                        mods |= ModifierKeys.Alt;
                    }

                    handler(this, new KeyPressedEventArgs(mods, key));
                }
            }
        }

        return CallNextHookEx(this._hhook, code, wParam, ref lParam);
    }

    public event EventHandler<KeyPressedEventArgs> KeyPressed;

    #region DLL imports

    /// <summary>
    /// Sets the windows hook, do the desired event, one of hInstance or threadId must be non-null
    /// </summary>
    /// <param name="idHook">The id of the event you want to hook</param>
    /// <param name="callback">The callback.</param>
    /// <param name="hInstance">The handle you want to attach the event to, can be null</param>
    /// <param name="threadId">The thread you want to attach the event to, can be null</param>
    /// <returns>a handle to the desired hook</returns>
    [DllImport("user32.dll")]
    private static extern IntPtr SetWindowsHookEx(int idHook, KeyboardHookProc callback, IntPtr hInstance, uint threadId);

    /// <summary>
    /// Unhooks the windows hook.
    /// </summary>
    /// <param name="hInstance">The hook handle that was returned from SetWindowsHookEx</param>
    /// <returns>True if successful, false otherwise</returns>
    [DllImport("user32.dll")]
    private static extern bool UnhookWindowsHookEx(IntPtr hInstance);

    /// <summary>
    /// Calls the next hook.
    /// </summary>
    /// <param name="idHook">The hook id</param>
    /// <param name="nCode">The hook code</param>
    /// <param name="wParam">The wparam.</param>
    /// <param name="lParam">The lparam.</param>
    /// <returns></returns>
    [DllImport("user32.dll")]
    private static extern int CallNextHookEx(IntPtr idHook, int nCode, int wParam, ref KeyboardHookStruct lParam);

    /// <summary>
    /// Loads the library.
    /// </summary>
    /// <param name="lpFileName">Name of the library</param>
    /// <returns>A handle to the library</returns>
    [DllImport("kernel32.dll")]
    private static extern IntPtr LoadLibrary(string lpFileName);

    #endregion
}

static class Keyboard
{
    [Flags]
    private enum KeyStates
    {
        None = 0,
        Down = 1,
        Toggled = 2
    }

    [DllImport("user32.dll", CharSet = CharSet.Auto, ExactSpelling = true)]
    private static extern short GetKeyState(int keyCode);

    private static KeyStates GetKeyState(Keys key)
    {
        KeyStates state = KeyStates.None;

        short retVal = GetKeyState((int)key);

        //If the high-order bit is 1, the key is down
        //otherwise, it is up.
        if ((retVal & 0x8000) == 0x8000)
            state |= KeyStates.Down;

        //If the low-order bit is 1, the key is toggled.
        if ((retVal & 1) == 1)
            state |= KeyStates.Toggled;

        return state;
    }

    public static bool IsKeyDown(Keys key)
    {
        return KeyStates.Down == (GetKeyState(key) & KeyStates.Down);
    }

    public static bool IsKeyToggled(Keys key)
    {
        return KeyStates.Toggled == (GetKeyState(key) & KeyStates.Toggled);
    }
}

/// <summary>
/// Event Args for the event that is fired after the hot key has been pressed.
/// </summary>
class KeyPressedEventArgs : EventArgs
{
    internal KeyPressedEventArgs(ModifierKeys modifier, Keys key)
    {
        this.Modifier = modifier;
        this.Key = key;

        this.Ctrl = (modifier & ModifierKeys.Control) != 0;
        this.Shift = (modifier & ModifierKeys.Shift) != 0;
        this.Win = (modifier & ModifierKeys.Win) != 0;
        this.Alt = (modifier & ModifierKeys.Alt) != 0;
    }

    public ModifierKeys Modifier { get; private set; }
    public Keys Key { get; private set; }
    public readonly bool Ctrl;
    public readonly bool Shift;
    public readonly bool Win;
    public readonly bool Alt;
}

/// <summary>
/// The enumeration of possible modifiers.
/// </summary>
[Flags]
public enum ModifierKeys : uint
{
    Alt = 1,
    Control = 2,
    Shift = 4,
    Win = 8
} 
```

# c++ - 重载需要 chrono::duration 的函数

> ID：11810307
> 
> 赞同：1
> 
> 时间：2012-08-04T16:48:36.647
> 
> 标签：c++, visual-c++, c++11, visual-studio-2012, chrono

```
typedef std::chrono::duration<int, std::ratio_multiply<std::ratio<12, 34>, std::ratio<9>>> irrelevant;

void func(irrelevant){} //  comment this out to make it work
void func(std::chrono::seconds){}
void func(std::chrono::minutes){}

int main()
{
    func(std::chrono::seconds(43));
} 
```

上面，包含一个接受 an 的重载会`irrelevant`导致一堆错误，例如：

> 'std::ratio_divide<_R1,_R2>::type' 不是 'std::ratio_divide<_R1,_R2>' 基类的成员

真的有什么问题，还是应该归咎于VS2012？我该如何解决它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T17:07:53.020

我无权访问 VS2012，但看看这是否有效：

```
typedef std::chrono::duration<int, std::ratio_multiply<std::ratio<12, 34>, std::ratio<9> >::type> irrelevant; 
```

您的代码在 C++11 模式下为我编译，但不是在 C++03 模式下（clang/libc++）。我的理论是 VS2012 还没有实现模板别名，或者如果有，它还`<chrono>`没有对模板别名的可用性做出反应。作为后备，`ratio_multiply`有一个嵌套类型`type`应该可以完成这项工作。

# android - 为 android 4.0 实现 SIP 服务器

> ID：11810314
> 
> 赞同：5
> 
> 时间：2012-08-04T16:49:58.013
> 
> 标签：android, sip

我想为 android 4.0 实现 SIP 服务器和 SIP 客户端程序。在android示例中已经提供了“SIPdemo”的SIP客户端程序。它使用 android.net.sip 包。

我可以使用 android.net.sip 包来实现 SIP 服务器吗？是否有任何适用于 android 的示例 SIP 服务器程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T20:43:59.453

我觉得有可能，我在usipserver市场上发现这个产品是免费的。所以可以让你在 Android 中拥有自己的 sip 服务器，但我不认为只有 android.sip，你必须为服务器编写所有代码，直接使用本机代码（套接字等）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T12:00:02.137

不，如果你想要一个 sip 服务器，你可以使用[Asterisk](http://www.asterisk.org/)。在服务器机器上安装并运行它，并将 SipDemo 注册到其中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T22:38:29.820

我认为[http://www.linphone.org](http://www.linphone.org)可能是您正在寻找的。

我认为 android sip api 需要一个服务器。

# entity-framework - 具有多个上下文的 EF 5 代码优先迁移？

> ID：11810315
> 
> 赞同：4
> 
> 时间：2012-08-04T16:50:16.843
> 
> 标签：entity-framework, entity-framework-5, database-migration, entity-framework-migrations

我们的应用程序在同一个应用程序数据库中有两个上下文。每个上下文在它们的关注点分离中被清晰地划分。

现在看来，如果我有两个上下文，Context1 和 Context2，并且如果我只更改 Context2 的类，EF 5.0 甚至认为 Context1 也发生了变化。这似乎使 EF 5.0 感到困惑，并且似乎触发了***两者***的迁移。在那次错误检测之后，产生的迁移也不一致。由于这一点以及我们自己的疏忽，我们处于一个奇怪的死胡同，很可能不得不重新重建整个数据库:(（上下路径不一致）

所以，***问题：***

1.  EF 5.0 是否支持多个上下文的模型更改检测和迁移？在考虑在这里提问之前，我阅读[了这个 EF 4.3 stackoverflow 问题](https://stackoverflow.com/questions/9110536/ef-4-3-auto-migrations-with-multiple-dbcontexts-in-one-database "这个 EF 4.3 stackoverflow 问题")以及[Rowan 的这篇 MSFT 帖子。](http://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/7980871d-0271-47dc-8185-43fdcbeea57f "这个帖子")我不认为这是重复，因为 EF 4.3 => EF 5.0 改进的目标是代码优先和迁移。
2.  如果没有，你们什么时候（MSFT/Rowan！）计划支持它？

谢谢

*背景故事详情（可略过）：*

我们通过代码优先的 fluent api 仔细设置了两个“模式”，添加了测试数据，对其进行了测试，然后添加了“实时”（alpha 阶段）数据。Context1 包含关键的“实时”信息，因此我们保持不变，然后我`context2`通过向代码第一类添加一个新成员（以 db 术语表中的新列）修改了第二个上下文（此处）。当我运行该应用程序时，它似乎检测到两者都已更改！最后，考虑到不会调用未更改的 Context1，我们没有注释掉 `Database.SetInitializer<Context1>(new DropCreateDatabaseIfModelChanges<Context1>());`我们在启动期间添加的内容。所以它消灭了我们现在重要的桌子！是的，我们应该把它去掉，因为简单地锁定类定义还不够好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T22:05:50.257

单个数据库的多个上下文还不能很好地工作，但应该有一个简单的解决方法。再创建一个上下文，除了迁移之外，它永远不会在您的应用程序逻辑中使用。将来自其他上下文的所有实体的实体映射添加到用于数据库创建/迁移的中央上下文。

顺便提一句。[EF 是开源的](http://entityframework.codeplex.com)，因此您可以自己贡献和添加对多个上下文的支持。

# javascript - Kinetic JS：我可以为形状添加多个名称吗？

> ID：11810317
> 
> 赞同：0
> 
> 时间：2012-08-04T16:50:29.457
> 
> 标签：javascript, html, canvas, kineticjs

例如，我有以下创建多边形：

```
 var poly = new Kinetic.Polygon({
                x: coorx,
                y: coory,
                points: coords,
                alpha: 0,
                fill: colors[Math.floor(Math.random() * colors.length)],
                name: myname
            }); 
```

我想做的是有两个类名，例如“rect-1”和“rect-2”。我希望某些形状具有其中一个类，有些则两者兼有。

这样做的目的是能够使用`get()`语法以一种方式转换某些形状，例如不透明度，并以另一种方式转换其他形状，例如偏移：

是否可以像我在这里描述的那样为形状提供多个“类”名称以进行高级选择？

谢谢！

```
 var shapes = stage.get(".rect-1");

    for(var n = 0; n < shapes.length; n++) {
        var shape = shapes[n];

        shape.transitionTo({
            alpha: (opacities[Math.floor(Math.random() * opacities.length)] * 1.5) + .7,
            duration: 2
        });                 
    }

    var shapes = stage.get(".rect-2");

    for(var n = 0; n < shapes.length; n++) {
        var shape = shapes[n];

        shape.transitionTo({
            offset: {
                x: 10,
                y: 10
            },
            duration: 2
        });                 
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-11T03:34:26.370

有趣的用例！我会把它添加到我的待办事项列表中。也许是这样的：

```
var rect = new Kinetic.Rect({
   name: 'foo bar test'
}); 
```

将分配三个不同的名称（类似于 DOM 类名称字符串）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-07T00:47:07.563

此对象过滤尚未内置，但一个简单的实现可能是使用该`getChildren()`方法遍历阶段子级并在此循环中测试条件，例如

`if shape.get('classList') && shape.get('classList').indexOf('rect1') !== -1`

使用单继承的另一种解决方案可能是使用该方法对 Kinetic.Rect 类进行子类化`extend()`并重载`shapeType`属性，这将成为您过滤的关键。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-09T03:53:53.613

Kinetic 函数可公开访问，因此您可以轻松地用自己的版本覆盖它。这是我修复它的方法。

```
Kinetic._addName = function(node, name) {
    if(name !== undefined) {
        var names = name.split(/\W+/g);
        for(var n = 0; n < names.length; n++) {
            if (names[n]) {
                if(this.names[names[n]] === undefined) {
                    this.names[names[n]] = [];
                }
                this.names[names[n]].push(node);
            }
        }
    }
}; 
```

Eric，如果你喜欢它，请随时将它添加到 Kinetic。我可能会很快提交一个拉取请求。

# wordpress - node.js 提供一个 wordpress 博客

> ID：11810323
> 
> 赞同：10
> 
> 时间：2012-08-04T16:52:24.080
> 
> 标签：wordpress, node.js, webserver

我在我的机架空间服务器上使用 node.js 来为我的各种应用程序提供服务。（使用 node-http-proxy）。

但是，我想创建一个 wordpress 博客。为博客提供服务的唯一方法是通过 apache（或 nginx）。

有没有办法从 node.js 应用程序本身为我的 wordpress 博客提供服务？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T20:40:41.983

您需要运行一些服务器来执行 PHP。节点是 JavaScript。

无论是 apache，还是 nginx/php-fpm 或只是 php-fpm，您都需要一些东西来实际运行 wordpress 代码，然后使用您现在使用的相同代理系统。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-03T09:03:15.637

一种选择是像往常一样继续使用 Wordpress，但不是编写模板来输出 HTML，而是让它们输出 JSON。通过这个小技巧，您突然创建了自己的 API 来输出您的 wordpress 内容。与公开 wordpress 完整方法集的模块相比，这将创建您非常具体的输出，根据您的需要量身定制。

要使用 JSON 输出，您需要设置一个小型 nodejs 服务器，将每个调用直接转发到您的 Wordpress 解决方案，获取响应 (JSON) 并使用您喜欢的任何 javascript 模板引擎将其与您的 html 合并。您还可以提高速度，因为您可以很容易地在节点端缓存 JSON 结果并进行控制。

如果您想阅读更多内容，我已经写了一篇关于此的博文，并且还创建了一个 nodejs express 中间件来帮助设置节点端。

[http://www.1001.io/improve-wordpress-with-nodejs/](http://www.1001.io/improve-wordpress-with-nodejs/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-23T16:27:25.703

你可以试试[express-php-fpm](https://www.npmjs.com/package/express-php-fpm)包。

它结合了 Express（Node.js 服务器）和 FastCGI 网关来服务 php 请求。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-08T22:01:34.003

I found this node module while searching for Wordpress + Node:

[https://github.com/scottgonzalez/node-wordpress](https://github.com/scottgonzalez/node-wordpress)

I haven't tried it, though, but if you know what you're doing you might want to give it a go.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-28T20:21:22.677

WordPress 现在有一种“官方”（准确地说：开源，在 Automattic 的 github 存储库下）的方式来执行此操作：[wpcom.js](https://github.com/Automattic/wpcom.js)。从那个github页面：

> 用于 WordPress.com REST API 的官方 JavaScript 库。与 Node.js 和 Web 浏览器兼容。

本质是从JS调用[WordPress REST API 。](https://developer.wordpress.com/docs/api/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-19T05:33:40.060

我最近需要在电子应用程序中安装一个服务器来服务 PHP。我从Sindre Sorhus的[grunt-php开始。](https://github.com/sindresorhus/grunt-php)我所做的主要更改是删除在 grunt 完成时杀死服务器进程的代码，而是从 JS 实例化 PHP 类并根据需要调用该进程。最终，调整 grunt-php 以在 node.js 服务器上启用 PHP 非常容易。

# parsing - 使用 .bat 文件从文本文件的最后一行中提取某些字符

> ID：11810324
> 
> 赞同：1
> 
> 时间：2012-08-04T16:52:29.933
> 
> 标签：parsing, batch-file, text-extraction

我在这里要完成的是从该文件[ftp://ftp.nhc.noaa.gov/atcf/tcweb/invest_al902012.invest](ftp://ftp.nhc.noaa.gov/atcf/tcweb/invest_al902012.invest)的最后一行中提取数据。我已经设法下载它并通过 .bat 文件将其保存为 script.txt 文件。我现在想从文件的最后一行提取纬度（13.5N）和经度（27.2W）以及压力（1009）并将其写入一个新文件。然后我使用这段代码来完成我的部分工作想：

```
@echo off
setlocal EnableDelayedExpansion
for /f "delims=" %%x in (script.txt) do (
    set "previous=!last!"
    set "last=%%x"
) 
echo !previous!>> "test3.txt"
for /f "delims=*" %%x in (test3.txt) do (
set line=%%x
set chars=!line:~35,-125!
echo !chars!>> "test.txt"
) 
```

在批量编码方面，我是文盲。这可能效率极低，只提取我想要的代码的纬度部分。该文件将始终在最后一行包含相同数量的字符，所以我想我只是没有掌握代码的 !line 部分的概念。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T18:17:23.217

该文件以逗号分隔，因此让 FOR /F 将行解析为标记并只保留您想要的标记可能更容易。

这个非常简单的解决方案为每一行解析和设置值，但只记住最后一行。只要文件永远不会变得很大，性能就应该很好。

```
@echo off
for /f "tokens=7,8,10 delims=," %%A in (script.txt) do (
  set lat=%%A
  set long=%%B
  set pres=%%C
)
echo latitude=%lat%, longitude=%long%, pressure=%pres% 
```

如果你想去掉空格，那么你可以简单地使用搜索和替换。

```
echo latitude=%lat: =%, longitude=%long: =%, pressure=%pres: =% 
```

我并没有简单地将空格作为分隔符包含在 FOR /F 语句中，因为当值有时为空白有时不是时，这会导致记号计数失效。

# xml - xpath 从孩子那里获得价值

> ID：11810325
> 
> 赞同：2
> 
> 时间：2012-08-04T16:52:51.343
> 
> 标签：xml, xpath, xml-parsing

从一个名字我如何得到兄弟姐妹？我不喜欢嵌套的。只有同一级别的。这怎么可能？

```
<root available-locales="en_US" default-locale="en_US">
    <dynamic-element instance-id="qk6m4eST" name="image" type="image" index-type="">
        <dynamic-element instance-id="fHkE2dfT" name="subimage" type="image" index-type="">
            <dynamic-element instance-id="jbthDbC4" name="x" type="text" index-type="">
               <dynamic-content>23</dynamic-content>
            </dynamic-element>
            <dynamic-element instance-id="Rb3qRF6N" name="y" type="text" index-type="">
                <dynamic-content>32</dynamic-content>
            </dynamic-element>
            <dynamic-content><![CDATA[C:\fakepath\images (1).jpeg]]></dynamic-content>
        </dynamic-element>
        <dynamic-content><![CDATA[C:\fakepath\images (1).jpeg]]></dynamic-content>
    </dynamic-element>
    <dynamic-element instance-id="MFrJW4OR" name="image" type="image" index-type="">
        <dynamic-element instance-id="hjKEtVB6" name="subimage" type="image" index-type="">
            <dynamic-element instance-id="NrY9iZ4K" name="x" type="text" index-type="">
                <dynamic-content>23</dynamic-content>
            </dynamic-element>
            <dynamic-element instance-id="7lG7RuAC" name="y" type="text" index-type="">
                <dynamic-content>32</dynamic-content>
            </dynamic-element>
            <dynamic-content><![CDATA[C:\fakepath\grillat.jpeg]]></dynamic-content>
        </dynamic-element>
        <dynamic-content><![CDATA[C:\fakepath\images (1).jpeg]]></dynamic-content>
    </dynamic-element>
</root> 
```

到目前为止，这是我的代码。它打印

测试...... 23

这就是第一个嵌套孩子的价值。23

```
public List<PopupImage> getImageNodes(Document document) {
    List<Node> nodes = document.selectNodes("/root/dynamic-element[@name='" + IMAGE_NODE_NAME + "']");

    List<PopupImage> popupImages = new ArrayList<PopupImage>();
    for (Node node : nodes) {
        // node.selectSingleNode("//following-sibling::dynamic-content[1]").getText();
        System.out.println("test...... " + node.selectSingleNode("//following-sibling::dynamic-content").getText());
        createPopupImage(node);
        popupImages.add(createPopupImage(node));
    }
    return popupImages;
} 
```

编辑：我需要每个图像节点和其中的动态值的值。

```
<root>
    <dynamic-element name=image>
         <dynamic-element name=subimage/>
         <dynamic-content>content1</dynamic-content> 
    </dynamic-element>  

     <dynamic-element name=image>
         <dynamic-element name=subimage/>
         <dynamic-content>content2</dynamic-content>  
    </dynamic-element> 
</root> 
```

编辑2：

澄清更多。我需要将每个图像节点与其中的动态内容配对。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T18:12:12.703

**使用**：

```
/*/dynamic-element[@name='image'][1]/dynamic-content 
```

这将选择任何`dynamic-content`作为顶部元素`dynamic-element`的第一`dynamic-element`个子元素的子元素，并且其`name`属性的字符串值为 string `"image"`。

**而这个 XPath 表达式**：

```
/*/dynamic-element[@name='image']/dynamic-content 
```

**选择**：

```
<dynamic-content>C:\fakepath\images (1).jpeg</dynamic-content>
<dynamic-content>C:\fakepath\images (1).jpeg</dynamic-content> 
```

**如果您只想要文本节点，请使用**：

```
/*/dynamic-element[@name='image']/dynamic-content/text() 
```

这将选择前面表达式选择的元素的以下两个文本节点子节点：

```
C:\fakepath\images (1).jpeg
C:\fakepath\images (1).jpeg 
```

`XmlNodeList`您可以通过迭代返回并获取其中包含的每个`XmlNode`对象的值来获取所选节点的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T17:36:52.010

目前，在选择一个`<dynamic-element>`元素后，您运行以下 XPath：

```
//following-sibling::dynamic-content 
```

让我们看看这意味着什么：

*   `//`：移回文档根并考虑嵌套在任何级别的所有节点。
*   `following-sibling::`: 查找与前一个节点同级的节点（即在相同的嵌套级别和相同的父节点）。
*   `dynamic-content`: 这个兄弟节点必须是一个`<dynamic-content>`元素。

如您的文本中所述，这不是您想要的。

相反，您希望找到当前节点的下一个兄弟节点。该兄弟姐妹将是一个`<dynamic-element>`元素。在那个兄弟节点中，您想要找到一个子节点，即一个`<dynamic-content>`元素。

`node.selectSingleNode`因此，请在您的通话中尝试此 XPath ：

```
following-sibling::dynamic-element/dynamic-content 
```

# firefox - silverlight 示例在 Firefox 中不起作用

> ID：11810326
> 
> 赞同：0
> 
> 时间：2012-08-04T16:52:58.693
> 
> 标签：firefox, silverlight-5.0

我想再给一次silverlight 机会，所以我开始阅读silverlight.net 网站上的教程。不幸的是，我找到了一个示例，它适用于 IE9、Chrome、Opera 和 Safari，但不适用于 Firefox 14。链接到示例：[链接](http://www.silverlight.net/learn/overview/what-is-silverlight/xaml-%28silverlight-quickstart%29)（带有蓝色矩形的示例）

插件不是完全跨浏览器吗？

在 Channel9 中，Silverlight 播放器在 Firefox 中也存在问题。我可以开始播放截屏视频，但无法停止或滚动（岸边的第一个链接：[链接](http://channel9.msdn.com/Shows/Cloud+Cover/Episode-85-Windows-Azure-Sample-Content-Review)）。要在那里看东西，我必须使用 IE。

是否有任何资源显示，为什么在 Firefox 中有这样的问题？

[编辑] 现在我明白了，带有红色/黄色矩形的示例在 Firefox 上也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T19:23:11.670

好的，我找到了。要在 firefox 浏览器中正确使用 silverlight，在 about:config 中，位置 dom.ipc.plugins.enabled.npctrl.dll 必须设置为 true（我默认为 false）。现在这些样本有效:)

# sql - 使用 Sysdate 进行选择

> ID：11810329
> 
> 赞同：-1
> 
> 时间：2012-08-04T16:53:15.487
> 
> 标签：sql, oracle

我正在尝试显示由于在 30 天内过生日的员工的姓名和薪水，但我不断收到错误消息；`ORA-00933: SQL command not properly ended`

```
SELECT Name, Salary  
FROM STAFF  
WHERE DOB > trunc(SYSDATE) + DAYS '30'; 
```

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T16:55:48.460

查询可以写成如下 -

```
SELECT Name, Salary  
FROM STAFF  
WHERE to_date(to_char(sysdate,'YYYY')||to_char(DOB,'MMDD'),'YYYYMMDD')  > trunc(sysdate+30); 
```

要获取生日在未来三十天内的员工的工资，请使用 -

```
SELECT Name, Salary  
FROM STAFF  
WHERE to_date(to_char(sysdate,'YYYY')||to_char(DOB,'MMDD'),'YYYYMMDD') BETWEEN trunc(sysdate) AND trunc(sysdate+30); 
```

`+30`默认情况下将三十天添加到日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T17:05:09.263

也许是这样的：

```
SELECT Name, Salary
  FROM STAFF
  WHERE TO_DATE( TO_CHAR(SYSDATE, 'YYYY') || TO_CHAR(DOB, 'MMDD'), 'YYYYMMDD' )
          BETWEEN (TRUNC(SYDATE) AND TRUNC(SYSDATE) + 30); 
```

两个假设：出生日期不是今年，你想要在接下来的 30 天内得到任何东西，而不仅仅是 30 天内。TRUNC 删除日期上的时间分量（如果存在）。

添加间隔的语法是：

```
dob + interval '1' days 
```

# c# - 执行两个不同的命令，但只有一个表正在影响

> ID：11810331
> 
> 赞同：-3
> 
> 时间：2012-08-04T16:53:36.343
> 
> 标签：c#, sql-server

我有一张桌子，`materials`和另一个，`stock_refund`。我在单击一次按钮时执行这两个命令以同时更新两个表，但两个记录都进入同一个表。以下是我的代码：

```
SqlConnection con = new SqlConnection(@"Data Source=ANONYMOUS\SQLSERVER;Initial Catalog=IndoStar;Integrated Security=SSPI;");
con.Open();
SqlCommand cmd = new SqlCommand("Insert into stock_refund values('"+refund_stockname.Text + "','"+refund_sitename.Text + "','"+refund_day.Text + refund_month.Text + refund_year.Text + "','"+refund_quantity.Text + "','"+ refund_unit.Text+"')",con);
SqlCommand cmd1 = new SqlCommand("Insert into materials values('" + refund_stockname.Text + "','" + refund_day.Text + refund_month.Text + refund_year.Text + "','" + refund_quantity.Text + "','" + refund_unit.Text + "', 'refund','"+ refund_sitename.Text +"')", con);
int i = cmd.ExecuteNonQuery();
int j = cmd.ExecuteNonQuery();
if ((i > 0)&& (j>0))
{
    MessageBox.Show("Stock refunded successfully","Information",MessageBoxButtons.OK,MessageBoxIcon.Information);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T16:54:40.690

看来你这里有一个错字：

```
int i = cmd.ExecuteNonQuery();
int j = cmd.ExecuteNonQuery(); 
```

应该

```
int i = cmd.ExecuteNonQuery();
int j = cmd1.ExecuteNonQuery(); 
```

* * *

您正在执行第一个命令两次。

# jsf - Java EE 项目中的 FileNotFound 异常

> ID：11810335
> 
> 赞同：0
> 
> 时间：2012-08-04T16:53:49.820
> 
> 标签：jsf, jakarta-ee, glassfish, ejb

部署应用程序时出现错误：

```
java.io.FileNotFoundException
at org.apache.naming.resources.DirContextURLConnection.getInputStream(DirContextURLConnection.java:403)
at com.sun.faces.facelets.impl.DefaultFaceletCache._getLastModified(DefaultFaceletCache.java:172)
at com.sun.faces.facelets.impl.DefaultFaceletCache.access$000(DefaultFaceletCache.java:62)
at com.sun.faces.facelets.impl.DefaultFaceletCache$1.newInstance(DefaultFaceletCache.java:82)
at com.sun.faces.facelets.impl.DefaultFaceletCache$1.newInstance(DefaultFaceletCache.java:78)
at com.sun.faces.util.ExpiringConcurrentCache$1.call(ExpiringConcurrentCache.java:99)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
at java.util.concurrent.FutureTask.run(FutureTask.java:166)
at com.sun.faces.util.ExpiringConcurrentCache.get(ExpiringConcurrentCache.java:114)
at com.sun.faces.facelets.impl.DefaultFaceletCache.getFacelet(DefaultFaceletCache.java:121)
at com.sun.faces.facelets.impl.DefaultFaceletCache.getFacelet(DefaultFaceletCache.java:62)
at com.sun.faces.facelets.impl.DefaultFaceletFactory.getFacelet(DefaultFaceletFactory.java:256)
at com.sun.faces.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:366)
at com.sun.faces.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:346)
at com.sun.faces.facelets.impl.DefaultFaceletContext.includeFacelet(DefaultFaceletContext.java:199)
at com.sun.faces.facelets.tag.ui.CompositionHandler.apply(CompositionHandler.java:155)
at com.sun.faces.facelets.compiler.NamespaceHandler.apply(NamespaceHandler.java:93)
at com.sun.faces.facelets.compiler.EncodingHandler.apply(EncodingHandler.java:86)
at com.sun.faces.facelets.impl.DefaultFacelet.apply(DefaultFacelet.java:152)
at com.sun.faces.application.view.FaceletViewHandlingStrategy.buildView(FaceletViewHandlingStrategy.java:774)
at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:100)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
at java.lang.Thread.run(Thread.java:722) 
```

我使用 Netbeans 7.1.2、Glassfish 3.1.2。我的 webxml 文件的一部分：

```
<servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.xhtml</url-pattern>
</servlet-mapping>
<welcome-file-list>
    <welcome-file>/share/wstep.xhtml</welcome-file>
</welcome-file-list> 
```

我已经看到了[这种](https://stackoverflow.com/questions/11477862/java-io-filenotfoundexception-when-file-is-in-folder)威胁，但它对我没有帮助。我是 Java EE 的新手，所以请理解。感谢所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T20:18:52.093

您正在提取的页面（基于某些 *.xhtml 文件？）正在引用 JSF 运行时无法找到的另一个资源。检查任何形式（、、、其他）的引用`template`是否`include`正确。

# javascript - 在 div 中显示 .doc

> ID：11810336
> 
> 赞同：5
> 
> 时间：2012-08-04T16:54:04.450
> 
> 标签：javascript, html, .doc

可以使用以下方法在 div 中显示 pdf：

```
<div>
    <object data="test.pdf" type="application/pdf" width="300" height="200">
    PDF : <a href="test.pdf">test.pdf</a>
    </object>
</div> 
```

是否可以为 .doc 或 .docx 做类似的事情？（没有服务器端）

*   我假设浏览器或计算机有读取数据的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T17:37:30.333

我可能会建议使用 Google Doc Viewer，它可以让您在通常会提示下载的地方显示几种类型的文件：

[https://docs.google.com/viewer/](https://docs.google.com/viewer/)

您还可以使用 iframe 在您自己的网站中使用此内联。

以下是支持的文件类型列表：

*   Microsoft Word（.DOC 和 .DOCX）
*   Microsoft Excel（.XLS 和 .XLSX）
*   Microsoft PowerPoint（.PPT 和 .PPTX）
*   Adobe 可移植文档格式 (.PDF)
*   苹果页面 (.PAGES)
*   Adobe Illustrator (.AI)
*   Adobe Photoshop (.PSD)
*   标记图像文件格式 (.TIFF)
*   欧特克 AutoCad (.DXF)
*   可缩放矢量图形 (.SVG)
*   PostScript (.EPS, .PS)
*   TrueType (.TTF)
*   XML 纸张规范 (.XPS)
*   存档文件类型（.ZIP 和 .RAR）

我为 PDF 的移动输出搞砸了这个，但移动版本有一个错误，导致无法使用。不确定该产品的开发进展如何，但桌面版本始终运行良好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T16:59:26.953

您可以通过 div 内的 iframe 将源链接到服务器上文件的路径来执行此操作。

```
<div>
<iframe src="mydoc.docx">myDocument</iframe>
</div>

<div>
<iframe src="mydoc.xslx">myDocument</iframe>
</div>

<div>
<iframe src="mydoc.pdf">myDocument</iframe>
</div> 
```

# ios - 用于从 TableView 进行编辑的 iOS HIG

> ID：11810343
> 
> 赞同：0
> 
> 时间：2012-08-04T16:55:30.750
> 
> 标签：ios, tableview, human-interface

我有一个 TableView，“事件”，它与另一个 TableView，“与会者”相连接。每个都有一个 +（新）按钮，效果很好。但我使用了一个披露三角形来表示还有更多。在“参加者”的情况下，它是有关参加者的详细信息。在“事件”的情况下，它是与会者列表。

我的问题是，Apple 推荐（或您推荐）编辑“事件”表中的条目的方式是什么，因为这种触摸会影响与会者。我考虑过使用细节披露，但这似乎有点笨拙。

有什么想到的，或者有没有一个好地方可以进一步阅读像这样的多层次层次结构？注意：向左滑动编辑对我的用户来说是不够的提示。他们只是无法可靠地找到它。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T17:32:08.600

我认为第二个表的范围在逻辑上可以扩展到“事件详细信息”，而不仅仅是“与会者”。在该模型中，我会设想两个部分：一个用于活动信息，另一个用于与会者。在这里，我松散地使用“部分”——您可以使用同一个 UITableView 的两个部分，或两个表，甚至是其他一些 UI 元素排列，用于位于现有与会者表上方的事件信息。

如果您想允许编辑事件详细信息，您可以将 segue 添加到“编辑事件”视图控制器，甚至可以就地编辑（例如，使用 UITextFields）。可以保留任何现有的查看/编辑/添加与会者的功能。

这绝对是一种情况，其中有不止一种“正确”的方法可以做到这一点，因此请找到一种看起来不错且在您的特定应用程序上下文中有意义的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-10T04:20:35.787

在这种情况下，我会向您推荐 Safari 允许您编辑和关注书签的方式。Apple 教导您的用户的范例是期望看到整个列表的单个编辑按钮。现在，您的用户是否知道这一点还不确定，因为人们觉得有必要制作 YouTube 视频来解释它是如何工作的。你所做的任何事情都不会让每个人都满意。但是，当您可以说“我完全按照 Apple 在他们的......应用程序中所做的那样做”时，您几乎可以摆脱任何不当行为。

您可以[在此处查看书签/编辑](http://www.youtube.com/watch?feature=player_detailpage&v=jV6fTcQl3xU#t=50)。

# php - PayPal IPN 错误请求 400 错误

> ID：11810344
> 
> 赞同：22
> 
> 时间：2012-08-04T16:55:38.827
> 
> 标签：php, paypal, paypal-ipn

使用 PayPal IPN，我不断收到错误 400。

我一直在让脚本向我发送电子邮件，以查看循环`$res`内的响应是什么。`while (!feof($fp)) {}`我总是最终得到错误：`HTTP/1.0 400 Bad Request`

总的来说，我回来了：

```
HTTP/1.0 400 Bad Request
​Connection: close
Server: BigIP
Content-Length: 19
​Invalid Host Header 
```

​这之后的最后一行是空白的。这是我的代码，我尝试过改变很多东西，但没有任何效果。

```
$req = 'cmd=_notify-validate';
foreach ($_POST as $key => $value) {
$value = urlencode(stripslashes($value));
$value = preg_replace('/(.*[^%^0^D])(%0A)(.*)/i','${1}%0D%0A${3}', $value);// IPN fix
$req .= "&$key=$value";
}

// post back to PayPal system to validate
$header = "POST /cgi-bin/webscr HTTP/1.0\r\n";
$header .= "Content-Type: application/x-www-form-urlencoded\r\n";
$header .= "Content-Length: " . strlen($req) . "\r\n\r\n";

$fp = fsockopen('ssl://www.sandbox.paypal.com', 443, $errno, $errstr, 30);

if (!$fp) {
// HTTP ERROR
} else {
   fputs($fp, $header . $req);
   while (!feof($fp)) {
       $res = fgets ($fp, 1024);
       if (strcmp ($res, "VERIFIED") == 0) {
           //ADD TO DB
       } else if (strcmp ($res, "INVALID") == 0) {
           // PAYMENT INVALID & INVESTIGATE MANUALY!
           // E-mail admin or alert user
       }
   }
   fclose ($fp);
} 
```

我添加了一行，这是发送前的标题：

```
 Host: www.sandbox.paypal.com
 POST /cgi-bin/webscr HTTP/1.0
 Content-Type: application/x-www-form-urlencoded
 Content-Length: 1096 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-08-04T18:53:43.103

由于您自己打开套接字，而不是使用诸如 curl 之类的 HTTP 库，因此您需要设置正确的 HTTP 协议版本并自己在 POST 行下方添加[HTTP Host 标头。](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.23)

```
$header = "POST /cgi-bin/webscr HTTP/1.1\r\n";
$header .= "Host: www.sandbox.paypal.com\r\n"; 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-10-02T00:15:36.380

我遇到了同样的问题，这些是必需的更改。上面的一些答案并不能解决所有问题。

标题的新格式：

```
$header = "POST /cgi-bin/webscr HTTP/1.1\r\n";
$header .= "Content-Type: application/x-www-form-urlencoded\r\n";
$header .= "Host: www.sandbox.paypal.com\r\n";  // www.paypal.com for a live site
$header .= "Content-Length: " . strlen($req) . "\r\n";
$header .= "Connection: close\r\n\r\n"; 
```

请注意仅在最后一行额外的 \r\n 集。此外，字符串比较不再有效，因为在服务器的响应中插入了换行符，因此请更改此：

```
if (strcmp ($res, "VERIFIED") == 0) 
```

对此：

```
if (stripos($res, "VERIFIED") !== false)  // do the same for the check for INVALID 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-05T09:48:52.200

[https://www.x.com/content/bulletin-ipn-and-pdt-scripts-and-http-1-1](https://www.x.com/content/bulletin-ipn-and-pdt-scripts-and-http-1-1)

```
// post back to PayPal system to validate
$header .="POST /cgi-bin/webscr HTTP/1.1\r\n";
$header .="Content-Type: application/x-www-form-urlencoded\r\n";
$header .="Host: www.paypal.com\r\n";
$header .="Connection: close\r\n"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T09:40:42.347

我发现使用 fsockopen 的 PayPal 示例代码无法正常工作。

为了使 IPN 与 PHP 一起工作，我使用了 Aireff 从 8 月 5 日开始提出的建议，并在 x.com 网站上使用 curl 技术查看了代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-05T11:09:13.863

我有同样的问题，最好的办法是使用贝宝示例代码......然后它完美地工作：[https ://www.x.com/developers/PayPal/documentation-tools/code-sample/216623](https://www.x.com/developers/PayPal/documentation-tools/code-sample/216623)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-08T09:07:38.717

另一种解决方案是在比较之前修剪 $res ..

```
$res = fgets ($fp, 1024);

$res = trim($res); //NEW & IMPORTANT 
```

# android - 为什么在Android中使用“AlertDialog.Builder”而不是“AlertDialogBu ilder”的奇怪命名约定

> ID：11810345
> 
> 赞同：12
> 
> 时间：2012-08-04T16:55:42.763
> 
> 标签：android, android-alertdialog

为什么不

```
AlertDialogBuilder builder = new  AlertDialogBuilder(this);
builder.setTitle("foo"); 
```

代替

```
AlertDialog.Builder builder = new  AlertDialog.Builder(this);
builder.setTitle("foo"); 
```

**更新：我想知道这种写作/组织背后的原因**

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-10T05:54:15.300

根据[Javadocs](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)，嵌套类（在本例中为静态嵌套类）通常用于三件事：

1.  对只会一起使用的类进行逻辑分组。
2.  增加封装。
3.  提高代码的可读性和可维护性。

第 3 点是许多开发人员使用静态嵌套类的原因之一。让我们以 Android 开发中的[`ViewHolder`模式](http://xjaphx.wordpress.com/2011/06/16/viewholder-pattern-caching-view-efficiently/)为例。在 a中，我们可以通过管理 a （或类似命名的内部类）`ListAdapter`中每个列表元素的内容来轻松缓存列表。`ViewHolder`在这种情况下，很容易注意到这个特定`ViewHolder`的只是这个类，当我们改变这个时，我们不会改变每一个。这意味着我们不需要`List1ViewHolder`, `List2ViewHolder`, ..., `ListNViewHolder`。每个`List`-type 元素都可以有自己的`ViewHolder`.

第 2 点与这一点不太相关，因为我们正在处理静态内部类（就是这样`Builder`）。但在这种情况下，它会阻止内部类的元素被外部类访问。

第 1 点是这里的重点，这就是为什么我把它留到最后。想一想您将在哪些情况下使用`AlertDialog.Builder`. 我可以 100% 确定地保证，您每次使用`AlertDialog.Builder`. 时，都会在`AlertDialog`. 因此，这意味着每次使用`AlertDialog.Builder`都与`AlertDialog`工作方式相关。（这在某种程度上与第 3 点有关；在一个文件中维护两个类比将它们分开更容易。）

与第 1 点和第 3 点类似，但也有其自身的特点，即通过保持`Builder`within `AlertDialog`，我们不会污染`android.app`包命名空间。我们仍然保持`AlertDialog`在其中；但`Builder`隐藏在其中。

Android 并不是唯一这样做的系统。MotiveWave [SDK](http://support.motivewave.com/sdk/)也这样做，Adobe Access 和 eBay SDK（我缺少链接）也是如此。我也相信[Java EE](http://www.oracle.com/technetwork/java/javaee/downloads/index.html)也使用这种方法。您还会[在 Enum types 中经常看到它](https://stackoverflow.com/questions/253226/nested-java-enum-definition-does-declaring-as-static-make-a-difference)，这反过来又是由于第 1 点所涵盖的原因。

现在，您问我们为什么使用`AlertDialog.Builder`而不是`new AlertDialog()`，并从对象而不是从构建器构建它。这里的答案与Java 和其他面向对象编程语言中常见的[工厂方法模式](http://en.wikipedia.org/wiki/Factory_method_pattern)相同。值得注意的是（来自维基百科），这有三个原因：

1.  对象的创建排除了它的重用，而没有大量的代码重复。
2.  对象的创建需要访问不应包含在组合类中的信息或资源。
3.  生成对象的生命周期管理必须集中，以确保应用程序内的行为一致。

这些很好地解释了自己；他们反对代码重复（能够在一个类中处理所有创建功能）、未经授权的访问（糟糕的封装实践）和一致的构造行为。此处未列出的还有[代码可读性](https://stackoverflow.com/a/929193/1438733)。

我怀疑——凭直觉——这`AlertDialog`是一个非常耗费资源的过程。它会暂停部分操作系统，保持其他部分运行，必须加载系统资源等等。正如[这个答案](https://stackoverflow.com/a/929045/1438733)的详细信息，我们不想提供对外部类的直接访问（`AlertDialog`在这种情况下）。这允许`Builder`正确处理所有资源密集型操作。它还使我们不必处理操作系统开发人员考虑过的深奥情况，但我们没有。

因此，总而言之，这实际上是一种相当常见的设计模式，但不是具有真正明确定义的含义。相反，它是为了易于使用、理解和可维护性。您提到了对上述设计考虑的担忧；我不会太担心这一点。请记住，静态内部类应该*始终*只与它们的外部类相关，你应该没问题。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-04T16:57:15.283

**Builder是****AlertDialog**类中的静态内部类。因此，要创建**Builder**类对象，您需要调用**AlertDialog.Builder**。

由于没有像**AlertDialogBu​​ilder**这样的类，所以你不能这样做。

如果你愿意，你也可以像下面这样使用。

```
Builder builder = new Builder(this);
builder.setTitle("foo"); 
```

但是要像这样使用，您需要将**Builder**类导入到您的类中，例如

```
import android.app.AlertDialog.Builder; 
```

而不仅仅是

```
import android.app.AlertDialog; 
```

一个简单的例子

```
class A{
     static class B{}
} 
```

你不能使用

```
AB obj = new AB(); 
```

你必须使用

```
A.B obj = new A.B(); 
```

希望你现在清楚了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T19:37:50.870

我会试着清理你在这种组织背后的真相。

首先，Builder是AlertDialog类里面的一个类。为什么要在另一个类中创建一个类？如果我想向现有类添加更多功能并且不认为从设计的角度来看应该扩展类，我个人只创建嵌套类。我敢肯定有人会对此争论不休，因为有很多不同的方法可以为类添加更多功能。然而嵌套类可能比其他类更受欢迎（对于某些人来说）。

这是关于嵌套类的[Oracle](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)观点。

如果我发现它使代码更易于维护和直观，我只会使用嵌套类。

在这种情况下，我相信谷歌的人发现，与 AlertDialog.Builder 相比，不是创建一个名为 AlertDialogBu​​ilder 的新类，而是因为两者产生相同的结果；一个对话框，在屏幕上显示一些信息，带有一些按钮。两者之间的唯一区别（我认为）是您可以在 AlertDialog.Builder 上设置正面、中性和负面按钮（这为类提供了更多功能，但没有必要更多地扩展类，再次个人意见）。

最后，重要的是代码有效（希望没有任何错误）、可维护、可读且直观。你的问题没有明确的答案，因为人们对这个话题有不同的看法。

我希望这有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-27T16:30:32.613

用于构造`AlertDialog`Object 的方法称为 Builder Pattern 以增强可读性。当你想构造一个新对象但这个对象需要很多属性来创建它时，就像传递给构造函数的参数太多（超过 4 个）一样，你会感到困惑。如果您想了解有关构建器模式的更多信息，我认为此[答案](https://stackoverflow.com/a/1953567/1304187)将满足您的需求。AlertDialog 构造与链接中的示例非常相似：

```
@Override 
public Dialog onCreateDialog(Bundle savedInstanceState) {
return new AlertDialog.Builder(getActivity())
           .setMessage("Do you really want to exit?")
           .setCancelable(false)
           .setNegativeButton("No", 
                    new DaialogInterface.onClickListener() {
                            public void onClick(DialogInterface dialog, 
                            int id) {
                                    ((AlertDialogActivity) getActivity())
                                                .continueShutdown(false);
                                }

                        })
           .setPositibeButton("Yes", 
                    new DialogInterface.onClickListener()) {
                        public void onClick(
                                final DialogInterface dialog, int id) {
                                    ((AlertDialogActivity) getActivity())
                                                .continueShutdown(true);
                                }
                    }).onCreate();
} 
```

此方法返回 Dialog 对象，询问用户是否要退出应用程序，正如您所见，通过调用具有太多参数的构造函数来创建 AlertDialog 对象没有任何意义。想象一下，如果`AlertDialog`有这样的构造函数：

```
AlertDialog ad = new AlertDialog(getActivity(), "Do you really want to exit?", 
                                 false, "No", .... )//and the list goes on 
```

将这种方法与`onCreateDialog`我认为`onCreateDialog`方法获胜的方法进行比较，对吗？

# javascript - 日期选择器没有方法？

> ID：11810357
> 
> 赞同：1
> 
> 时间：2012-08-04T16:57:10.007
> 
> 标签：javascript, jquery, html, jquery-ui

我已经尝试了所有我能想到的来解决这个问题。我的网站上有一个内联日期选择器，带有一个替代输入字段。这是我的代码：

```
$(function() {
$( "#datepicker" ).datepicker({
            altField: "#dt",
        });
    }); 
```

我在 chrome 开发人员工具中收到此错误...哦，它根本没有出现。

```
Uncaught TypeError: Object [object Object] has no method 'datepicker' 
```

![在此处输入图像描述](../Images/2186650b0f6f6f103961f2b063d9d6ac.png)

这是备用字段：

```
 <center><img class="board" id="header3" src="http://codtelevision.com/wpimages/CODherePART3.png"></img></center>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.9/jquery-ui.min.js"></script>
<link rel="stylesheet" href="http://www.codtelevision.com/date.css" type="text/css" media="screen">
<div id="datepicker"></div><br>
    <input id="dt" style="outline:none;" readonly type="text"></input><br> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T21:30:23.787

**此问题可能是由于您的文件中多次包含 jQuery。**

[在遇到此线程](https://forum.jquery.com/topic/jquery-datepicker-typeerror-object-object-object-has-no-method-datepicker)之前，我一直在遇到这个确切的问题。我发现我的一个 ASP 包含语句稍后在我的代码中引入了第二个版本的主 jQuery 库。删除多余的包含使其完美运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T17:09:12.467

好吧，您没有包含 jQuery 库，只有 jQuery UI 库。

除此之外，您需要一个 jQuery CSS 文件来制作 Datepicker，因为 .datepicker() 将必要的类添加到它制作的对象中。

您可以在此处动态创建自己的 UI CSS 文件：http: [//jqueryui.com/themeroller/](http://jqueryui.com/themeroller/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T17:11:37.580

您实际上是否也在主 jquery 库中进行了链接？此外，您没有设置脚本文件的脚本类型（这可能没有太大影响）。

```
<script type="text/javascript" 
    src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.9/jquery-ui.min.js">
</script> 
```

我为您的代码创建了一个 jsfiddle，它似乎工作得很好。我认为还有其他问题。从您粘贴的内容来看，我仍然想知道您是否包含了 jquery 库。

[现场演示](http://jsfiddle.net/BpuZR/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T04:33:41.803

您可能遇到了 jQuery 冲突。在 noConflict 模式下试一试，如下所示：

```
<script type="text/javascript">
    (function($) {
        $(document).ready(function(){
            $("#datepicker").datepicker();
        });
    })(jQuery);
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T20:26:23.873

我们包含 js 文件的顺序很重要。

[http://www.irisclasson.com/2012/02/21/the-order-of-thingsobject-has-no-method-datepicker/](http://www.irisclasson.com/2012/02/21/the-order-of-thingsobject-has-no-method-datepicker/)

上面的链接解决了我的问题。

# java - 如何在 Java 中扩展不可变类型

> ID：11810359
> 
> 赞同：9
> 
> 时间：2012-08-04T16:57:15.320
> 
> 标签：java, oop, immutability

在开发游戏项目时，我已经开始使用 Java 中的不可变值对象，遵循“公共最终字段”方法：

```
public class Team {
    public final String name, flag;

    public Team(String name, String flag) {
        this.name = name;
        this.flag = flag;
    }
} 
```

到目前为止，这对我来说效果很好，但是在不同的情况下我需要关于团队的不同的额外信息集。例如，一支球队在比赛期间有一个固定的颜色。问题是，处理这些扩展信息集的最佳方法是什么？我知道这是一个相当普遍的问题，但我想继续使用不可变对象，这可能会影响解决方案。

这是我想出的选项。它们中的大多数可能“足够好”，但我想了解一些支持和反对它们的论据，以供将来参考。

**选项 1：一堂课**

```
public class Team {
    public final String name, flag, colorName;
    public final int colorRgb;

    public Team(String name, String flag, String colorName, int colorRgb) {
        this.name = name;
        this.flag = flag;
        this.colorName = colorName;
        this.colorRgb = colorRgb;
    }
} 
```

对于所有用途，这只需要一个类，但没有基于类型的指示来指示预期/提供哪些额外数据。

**选项 2：子类化**

```
public class TeamWithColor extends Team {
    public final String colorName;
    public final int colorRgb;

    public Team(String name, String flag, String colorName, int colorRgb) {
        super(name, flag);
        this.colorName = colorName;
        this.colorRgb = colorRgb;
    }
} 
```

这可能会使基于内容的 equals() 实现变得不可能。

**选项 3：作文**

```
public class TeamWithColor {
    public final Team team;
    public final String colorName;
    public final int colorRgb;

    public Team(Team team, String colorName, int colorRgb) {
        this.team = team;
        this.colorName = colorName;
        this.colorRgb = colorRgb;
    }
} 
```

如果团队数据和额外数据经常独立更改，则减少复制/样板代码。

**选项 4：Pair/Tuple（使用不可变的 Pair 类）**

```
public class TeamColor {
    public final String colorName;
    public final int colorRgb;

    public Team(String colorName, int colorRgb) {
        this.colorName = colorName;
        this.colorRgb = colorRgb;
    }
}

Pair<Team, TeamColor> teamWithColor = Pair.create(team, teamColor); 
```

...或使用将 Team 和 TeamColor 联系在一起的自定义类。

我倾向于选项 3 或 4，但我对您的意见、论点和直觉很感兴趣 :)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-04T17:24:45.020

如你所说。团队可以在不同的情况下出现。这些情况是赋予团队额外属性的背景。

因此，我建议对添加数据的每个不同上下文使用组合。

```
public class TeamWithColor {
    public final Team team;
    public final TeamColor teamColor;

    public Team(Team team, TeamColor teamColor) {
        this.team = team;
        this.teamColor = teamColor;
    }
} 
```

也许你会有：

```
public class TeamDuringOlimpics{
    public final Team team;
    public final TeamColor teamColor;
    public final TeamFlag teamFlag;

    public Team(Team team, TeamColor teamColor, TeamFlag teamFlagTeamFlag teamFlag) {
        this.team = team;
        this.teamColor = teamColor;
        this.teamFlag = teamFlag;
    }    
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T17:23:51.297

组合听起来像是添加需要可变的上下文数据的好选择。

在 Java 中，不可变类通常被标记`final`并且不能被扩展。以[字符串](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html)为例。这排除了选项 2。

对使用 Pairs 感到厌烦。没有将 Pair 类型添加到 Java 中有很多很好的理由。在这种情况下，您的数据可以通过创建新的数据类型（即通过组合）更好地建模。

创建不可变类的推荐最佳实践：[http ://www.javapractices.com/topic/TopicAction.do?Id=29](http://www.javapractices.com/topic/TopicAction.do?Id=29)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T17:17:08.790

如果一个不可变的类是可继承的，或者如果包含的方面的类型可能是可变的，那么它就没有防止恶作剧的安全性。“不可变”接口同样没有安全性。同样，如果一个对象具有任何可扩展类型的成员，并且对象被认为包含这些成员所引用的对象中的任何信息。由您决定这是否是一个问题。不可变接口和可扩展的可变类可能比深度密封的接口更加通用；如果一个类不会被深度密封，那么将其部分地密封起来几乎没有安全优势。

*请注意，如果字段的语义指定它标识*而不是*包含有*问题的对象，则深度不可变对象可能具有可变类型的字段。例如，拥有一个“快照”对象可能很有用，它包含对一些可变对象的引用，并且对于每个对象，它的当前状态的不可变副本；然后，“快照”对象将公开一种将每个对象恢复到生成快照时的状态的方法。尽管快照对象引用了可变对象，但快照对象将是“深度不可变的”，因为快照对可变对象的引用纯粹是为了识别它们而存在，并且这些对象的*身份不会*

我在 .net 中喜欢的一种模式，它也应该在 Java 中工作，是具有类似`IReadableFoo`and的接口`IImmutableFoo`；后者将继承前者但不添加任何新成员。`IReadableFoo`除了要读取其属性的成员之外，该接口还应包含一个`AsImmutable()`返回`IImmutableFoo`. 这种方法允许代码在方便时使用可变类型，同时最小化冗余的防御性复制（想要持久化某些东西的代码必须调用`AsImmutable()`它；如果有问题的对象是可变的，那么该操作将创建一个不可变的副本，但如果对象已经不可变的，不需要新的副本）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-05T08:04:04.670

您可以考虑将这条信息保留在 Team 对象之外。例如，你可以有一个 Map 或 Map

这样，您可以使用许多附加值来丰富您的对象，而无需引入新类或修改现有类。此外，它将保留其他对象的不可变属性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T17:46:51.220

我推荐装饰者模式。

```
public class TeamWithColor extends Team {
    public final Team team;
    public final String colorName;
    public final int colorRgb;

    public Team(Team team, String colorName, int colorRgb) {
        this.team = team;
        this.colorName = colorName;
        this.colorRgb = colorRgb;
    }
} 
```

[http://en.wikipedia.org/wiki/Decorator_pattern](http://en.wikipedia.org/wiki/Decorator_pattern)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-25T18:23:41.857

我通常会尽量避免将所有东西都放在一个类中（选项 1），这给我们留下了 4 个选项

*   如果我需要类是线程安全的，我喜欢使用不可变元组的 volatile/AtomicReference（选项 4）而不是使用锁和其他阻塞同步（我们称之为选项 5）
*   如果线程安全不是问题，那么我会选择组合（选项 3）而不是继承（选项 2），除非 IS-A 关系自然存在

有色团队毕竟是一个团队，所以我很乐意利用这种关系。如果我是你，我会这样编码：

```
public final class ColoredTeam extends AbstractTeam implements Team {
    // the rest comes along intuitively
} 
```

因为“AbstractTeam”是抽象的，所以基于内容的 equals() 实现非常好，只要“ColoredTeam”本身没有子类，我将 ColoredTeam 设为 final 来实现这一点，但我可以将承包商设为私有，引发异常等。

# android - Android - 向 Spinners 动态添加值

> ID：11810361
> 
> 赞同：1
> 
> 时间：2012-08-04T16:57:31.037
> 
> 标签：android, spinner

我是 Android 开发的新手，所以查询可能看起来很新手。

我试图制作一个有几个微调器的应用程序，在用户选择一个微调器后，另一个微调器会根据 spinner1 中的选择填充数据。

IE。第一个用户选择国家。根据国家，微调器 2 填满州，根据州，微调器 3 填满城市。

我在 strings.xml 中将所有国家/地区创建为字符串数组，例如-

```
<string-array name="Country">
    <item >USA</item> etc... 
```

类似地，在 string.xml 中创建的州为 - （每个国家/地区都是一个单独的条目，命名约定为（国家名称）_（州）

```
<string-array name="USA_state">
    <item >New York</item> etc... 
```

现在我希望根据国家/地区选择填充第二个微调器。因此，我使用的公式是让第二个微调器是 -

```
String getstate = country[index]+"_"+"state";
state=getResources()
.getStringArray(getResources().
getIdentifier(getstate,null,getPackageName())); 
```

当我运行这个应用程序时，Manactivity 只显示一个空白屏幕，我没有得到任何调试信息并得到一个错误“jar 文件 android.jar 没有附加源”。

请帮忙。完整的 mainActivity 如下 -

```
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.MenuItem;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.ArrayAdapter;
import android.widget.Spinner;
import android.widget.Toast;
import android.support.v4.app.NavUtils;
import android.view.View; 

public class MainActivity extends Activity {
String[] country;
String[] state;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    country = getResources().getStringArray(R.array.country); 
    Spinner country_spinner =(Spinner) findViewById(R.id.country); 
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, country);
    country_spinner.setAdapter(adapter); 
    country_spinner.setOnItemSelectedListener(new OnItemSelectedListener(){
        public void onItemSelected (AdapterView<?> arg0, View arg1, int arg2, long arg3){
            int index = arg0.getSelectedItemPosition();
            Toast.makeText(getBaseContext(), "You have Selected"+country[index]+"country", Toast.LENGTH_SHORT).show();
            Fill (index);
        }
        public void onNothingSelected(AdapterView<?> arg0) {}
    });

}

protected void Fill(int index) {
    // TODO Auto-generated method stub
    //Field resField=R.array.getField(country[index]);
    //int getstate = resField.getInt(null);
    String getstate = country[index]+"_"+"state";
    state=getResources().getStringArray(getResources().getIdentifier(getstate,null,getPackageName()));
    Spinner state_spinner = (Spinner) findViewById(R.id.state);
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, state);
    state_spinner.setAdapter(adapter);
    state_spinner.setOnItemSelectedListener(new OnItemSelectedListener(){
        public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2, long arg3){
            int index2 = arg0.getSelectedItemPosition();
            Toast.makeText(getBaseContext(),"You Have Selected "+state[index2] + " statet",Toast.LENGTH_SHORT).show();
        }
        public void onNothingSelected(AdapterView<?> arg0){}
    });

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T09:32:45.270

我能够解决这个问题。最终代码如下。这是一种嵌套方法，所以如果有 3 个微调器（比如一个又一个城市），我们是否再次嵌套该微调器的代码？有没有更简单的方法？

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, country);
    country_spinner.setAdapter(adapter); 
    country_spinner.setOnItemSelectedListener(new OnItemSelectedListener(){

        public void onItemSelected (AdapterView<?> arg0, View arg1, int arg2, long arg3){
            int index = arg0.getSelectedItemPosition();
            Toast.makeText(getBaseContext(), "You have Selected"+country[index]+" County", Toast.LENGTH_SHORT).show();

            final CharSequence[] state_array = state.getTextArray(index);
            final Spinner state_spinner =(Spinner) findViewById(R.id.state); 
            ArrayAdapter<CharSequence> adapter1 = new ArrayAdapter<CharSequence>(MainActivity.this, android.R.layout.simple_spinner_item, state_array);
            state_spinner.setAdapter(adapter1); 
            state_spinner.setOnItemSelectedListener(new OnItemSelectedListener(){

                public void onItemSelected (AdapterView<?> arg0, View arg1, int arg2, long arg3){
                    final int index = arg0.getSelectedItemPosition();
                    Toast.makeText(getBaseContext(), "You have Selected"+state_array[index]+" State", Toast.LENGTH_SHORT).show();

        });

                }
                public void onNothingSelected(AdapterView<?> arg0) {
                    state_spinner.setAdapter(null);
                }
            }); 
```

# jquery - 根据鼠标位置滚动--jQuery

> ID：11810363
> 
> 赞同：-1
> 
> 时间：2012-08-04T16:57:37.263
> 
> 标签：jquery, jquery-ui

我想根据鼠标位置滚动页面任何想法如何使用 jquery 做到这一点？要添加我有鼠标的坐标。

添加实际功能。你能帮我滚动一下吗？

```
function createDraggables(){
        $j( ".card" ).draggable({
            revert: "invalid",
            containment: "#cardwall",
            drag: function(event,ui) {
                    var viewportHeight = $j(window).height();
                    var documentHeight = $j(document).height();
                    var y = event.pageY - $j('html, body').scrollTop();
                    console.log('==>',this);
                    $j('html, body').scrollTop ( (y / viewportHeight) * documentHeight );
                }
        });
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T17:16:33.533

看起来 Vanga Sasidhar 有你要找的东西。但是，正如您所说，您拥有可以使用它的坐标，它将从顶部平滑滚动到给定位置。

```
$(document).ready(function(){
    $('html, body').animate({
        scrollTop: 200 // Replace this value with your coordinates
    }, 1000);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T17:22:08.783

是的，您可以根据当前鼠标位置执行此操作。

```
var viewportHeight = $(window).height();
var documentHeight = $(document).height();

//Lets listen for mousemove event on body tag
$('body').mousemove ( function(e) {
    //Get current y position
    var y = e.pageY - $(this).scrollTop();

    //Based on current proportion, update the document's scrollTop.
    $(this).scrollTop ( (y / viewportHeight) * documentHeight );
});​ 
```

工作演示可以在这里找到：http: [//jsfiddle.net/codebombs/GfX3L/](http://jsfiddle.net/codebombs/GfX3L/)

# java - 从清单中注册并启动 BroadcastReceiver

> ID：11810368
> 
> 赞同：-1
> 
> 时间：2012-08-04T16:58:30.637
> 
> 标签：java, android, broadcastreceiver

我试图在我的清单中注册一个 BroadcastReceiver，但它没有发生。在尝试手动编写 xml（但失败）后，我只需单击 Eclipse 的工具并像这样从 Eclipse 的 GUI 添加我的接收器（我没有手动编写任何代码）：

```
<receiver android:name="MyReceiver" android:enabled="true">
    <intent-filter>
        <action android:name="android.intent.action.BATTERY_CHANGED"/>
    </intent-filter>
</receiver> 
```

我尝试做的是捕获系统发出的所有 BATTERY_CHANGED 意图。但它根本没有开始接收。

现在请告诉我，我是否应该在清单/接收器/活动代码中添加任何内容，以使系统实例化并启动此接收器工作？

**我不想使用该`registerReceiver()`功能，因为我希望此接收器与任何活动分开运行。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T17:07:27.160

[文档](http://developer.android.com/reference/android/content/Intent.html#ACTION_BATTERY_CHANGED)指出`ACTION_BATTERY_CHANGED` **无法**在清单中注册，您必须从 Java 代码中的有效上下文中注册。

好消息是，上下文不仅仅存在于活动中，如果您愿意，可以在服务中或任何其他您拥有有效上下文的地方使用 registerReceiver()。

# php - PHP：测试 Base64 编码的 POST 数据是否为空

> ID：11810369
> 
> 赞同：0
> 
> 时间：2012-08-04T16:58:31.647
> 
> 标签：php

PHP 空函数是否会为有效的 base64 编码数据返回 true？也许我应该使用除空之外的另一个功能。前端应用程序，内置 flex，测试以确保转换为 base64 的位图在 POST 之前不为空。

```
//codeigniter
$ImageData = $this->input->post('ImageData'); //ImageData encoded in base64 format

if (empty($ImageData))
    {
     //echo json error 
     return;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T17:08:29.823

如果未设置发布数据，则 CodeIgniter 函数返回 false：

```
 $ImageData = $this->input->post('ImageData'); //ImageData encoded in base64 format

if ($ImageData) 
```

足以检查 $_POST['ImageData']

# java - 图像与 BufferedImage

> ID：11810370
> 
> 赞同：19
> 
> 时间：2012-08-04T16:58:32.643
> 
> 标签：java, image, bufferedimage

每当在 Java 中处理图像的加载和渲染时，我以前总是使用`BufferedImage`s 来存储和操作内存中的图像。

但是，我最近遇到了[一些](http://zetcode.com/tutorials/javagamestutorial/movingsprites/) 使用该类而不是使用该类的[不同](http://www.exampledepot.com/egs/java.awt.image/CropImage.html) [站点](http://home.cogeco.ca/~ve3ll/jatutorg.htm)，这让我想知道-有什么区别？`Image``BufferedImage`

我知道 a`BufferedImage`有一个更大/优化的工具集，但不惜一切代价吗？如果是这样，这个成本什么时候会变得明显？在什么情况下你会使用`Image`over a `BufferedImage`，反之亦然？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-04T17:00:05.617

`BufferedImage extends Image`. `Image`只是一个基本的抽象类，你不能实例化它。在您使用的引擎盖下`BufferedImage`或其他实现肯定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T17:03:30.903

直接创建 BufferedImage 和 Toolkit 图像（java.awt.Toolkit 或 Image#getScaledInstance）之间不应该有任何真正的性能差异。您永远不会拥有 Image 的实际实例，因为它是一个抽象类；您将只处理它的子类（例如 BufferedImage）。

# joomla2.5 - 可以使用管理员插件扩展 Joomla jConfig 吗？

> ID：11810372
> 
> 赞同：1
> 
> 时间：2012-08-04T16:59:04.047
> 
> 标签：joomla2.5

我正在尝试将一些外部配置参数添加到一个新的 J2.5 站点，在我求助于黑客之前，我想知道是否可以编写一个插件来实际集成或扩展 jConfig 对象。

我一直在谷歌搜索，找不到任何讨论或这样的例子 - 只有组件或模块配置，所以想知道是否有人尝试过这个，或者知道实现它的“本地”方式。

注意 - 我们在早期版本中通过设置全局变量以使信息可用的系统插件实现了这一点，但我们希望将其包含在 Joomla 全局配置中，以便能够使用本机 Joomla 配置逻辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:36:58.823

简短的回答是不，你不能。使用插件只能覆盖一些次要类，当插件文件首次加载时（这将是我们自定义代码的第一个挂钩）JConfig 已经与另外 40 个类一起加载。

但是，您可以在加载后对其进行扩展，添加参数，保存，当用户从后端保存时，这些参数应该被保留，并在以下请求中可用。如果您没有保存太多，它可以正常工作。

否则，只需将您的参数放入组件中（这将是标准的 Joomla 方式）。

# jsf - 是否有必要使用 EL 来获取 JSF 中的“当前”bean？

> ID：11810374
> 
> 赞同：2
> 
> 时间：2012-08-04T16:59:20.730
> 
> 标签：jsf

我正在尝试修复 JSF 应用程序中的一些错误，其中包括在“faces-config.xml”中声明的类“UserBean”的会话范围 bean“userBean”。其中一种方法有一行代码，如下所示：

```
public void doSomething() {
    ...
    UserBean userBean = (UserBean) facesContext.getApplication().evaluateExpressionGet(facesContext, "#{userBean}", UserBean.class);
    ...
} 
```

有什么理由使用那个长表达式而不仅仅是“this”吗？或者，如果所有内容都正确声明，我是否可以确信正在执行该方法的实例实际上是与会话关联的 bean？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T19:00:18.277

您可以测试它是否是同一个 bean，只需比较引用并触发方法的执行以查看会发生什么：

```
public void doSomething() {
    UserBean userBean = (UserBean) facesContext.getApplication().
      evaluateExpressionGet(facesContext, "#{userBean}", UserBean.class);
    if (this == userBean){
        System.out.println("\nIt is the same bean, time for some cleanup!");
    } else {
        System.out.println("\nThere is something very weird going on here...");
    }
} 
```

请记住，`this`并且`userBean`只是引用，指向内存中的一个区域。如果它们始终相同，您可以安全地将表达式替换为`this`.

如果有人首先在另一个地方编写代码，然后有人重构它，将这段代码移动到同一个 bean 并忘记更改此引用，我可以看到这种情况发生。

# mysql - JOIN 的 MySQL 语法取决于条件

> ID：11810375
> 
> 赞同：0
> 
> 时间：2012-08-04T16:59:23.603
> 
> 标签：mysql, join, if-statement

以下查询的语法是什么：

如果存在匹配引用（Table1ID），则从 Table1 和 JOIN Table2 中获取所有列，否则 JOIN Table3。

简化的数据库结构或多或少如下

```
 Table1
 ID     Type
 1      std

 Table2
 ID     Table1ID    Title    Language
 1      1           Test     en

 Table3
 ID     Table1ID    Title    Language     Flag
 1      1           Other    en           1 
```

另外，我现在意识到 Table3 将有多个条目引用单个 Table1.id。如何限制它只返回每个结果的最新条目（具有最高 id）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T17:59:13.873

如果您不希望每个连接都有一组单独的列，那么这可能就是您要查找的内容：

```
SELECT   *
FROM     (     
         SELECT    a.ID AS Table1ID, a.Type, b.ID, b.Title, b.Language, NULL AS Flag
         FROM      Table1 a
         JOIN      Table2 b ON a.ID = b.Table1ID

         UNION ALL

         SELECT    a.ID, a.Type, c.ID, c.Title, c.Language, c.Flag
         FROM      Table1 a
         LEFT JOIN Table2 b ON a.ID = b.Table1ID
         JOIN      Table3 c ON a.ID = c.Table1ID
         JOIN      (
                   SELECT   MAX(id) AS maxid
                   FROM     Table3
                   GROUP BY Table1ID
                   ) d ON c.ID = d.maxid
         WHERE     b.ID IS NULL
         ) a
ORDER BY a.Table1ID 
```

* * *

[*SQLFiddle 演示*](http://www.sqlfiddle.com/#!2/52f1d/5/0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T17:03:45.557

这是一种方法。

```
select table1.id, table1.type, ifnull(table2.title, table3.title)
from table1
left join table2 on table1.id = table2.table1ID
left join table3 on table1.id = table3.table1ID 
```

# php - 用真正的随机数播种 mt_rand 是否也会使 mt_rand 的结果也真正随机？

> ID：11810378
> 
> 赞同：1
> 
> 时间：2012-08-04T16:59:38.073
> 
> 标签：php, math

如果我有一个真正的随机数，并且在使用 mt_rand 之前使用 mt_srand 用真正的随机数播种 mt_rand，这是否意味着 mt_rand 的结果现在也是真正随机的而不是伪随机的？

换句话说，下面的代码是否会在给定的最小值和最大值之间产生一个真正的随机整数

```
function RandomInteger($min, $max)
{
    $trueRandomNumber = GetTrueRandomNumber();

    mt_srand($trueRandomNumber);
    return mt_rand($min, $max);
} 
```

其次，用于播种 mt_srand 的真正随机数应该是 32 个整数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T15:24:01.023

查看您的代码，我的猜测是您从 GetTrueRandomNumber() 获得了一些值（缺少代码），但是您希望该数字处于特定的值范围内。因此，您正在获取该输出并将其输入到 mt_rand() 中，因为它具有在特定范围内生成数字的方法。

虽然不是直接回答您的问题，但更好的解决方案是首先找出您想要的值的范围（即，如果输入 $min 是 0 并且 $max 是 $max - $min）。然后，找出获得该范围内的值所需的最大位数。然后，从 GetTrueRandomNumber() 的输出中提取该位数。如果值在范围内，则返回数字 + 原始 $min 值。如果该值不在范围内，则获取更多位数据。关键是扔掉比特，直到你得到一些在所需范围内。

如果需要示例源代码，请尝试：

[http://barebonescms.com/documentation/csprng/](http://barebonescms.com/documentation/csprng/)

你应该能够把类似的东西放在一起。我会警惕将 mt_rand() 用于类似的事情，但在这个非常具体的情况下可能没问题。这取决于你打算用它做什么。它还很大程度上取决于 Mersenne Twister 的第一个数字的实际分布情况。我认为没有人在这方面做过任何工作。MT 旨在被播种一次 - 谁知道重复播种它的分布模式是什么。此外，如果其他代码使用 mt_rand()，您可能会根据以后的 mt_rand() 调用可能生成的值来暴露函数的状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T17:07:26.283

不，[梅森捻线](http://en.wikipedia.org/wiki/Mersenne_twister)机*总是*伪随机的。种子仅确定它在序列中的哪个位置开始。

# android - 如何从 Android 上传到 Alfresco？

> ID：11810380
> 
> 赞同：0
> 
> 时间：2012-08-04T16:59:39.557
> 
> 标签：android, rest, upload, alfresco

我想通过我的 Android 应用上传到 Alfresco。我发现了这个api：

```
 The following web script uploads file content and metadata into the repository.
POST /alfresco/service/api/upload
The web script uses the following HTML form data:
filedata - (mandatory) HTML type file
siteid
containerid
uploaddirectory
updatenoderef
filename
description
contenttype
majorversion
overwrite
thumbnails
The returned content is:
nodeRef
It returns a status: STATUS_OK (200).
The web script description document specifies the following options:
Value   Description
user    The authentication access
required    The transaction level
any The format style
json    The default response format 
```

但我不知道

1.  我的文件路径在哪里？

2.  `filedata - (mandatory) HTML type file`: HTML 类型文件的格式是什么，这是什么？

3.  那么其他参数呢？

感谢您的阅读

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T08:24:11.957

首先，我假设您正在使用 HTTP 客户端库进行 POST 调用，并且该库能够以`multipart/form-data`格式对 POST 正文进行编码，简称为“Multipart”。

该`filedata`参数应包含正在上传的文件的内容和名称（在您的文件系统上）。这是多部分编码的优点，如果您只是将一个对文件的引用传递给它并告诉它使用`multipart/form-data`格式，那么您的 HTTP 库应该知道如何对参数进行编码。

其他参数只是字符串值，所以应该更容易设置。这方面的文档不是很好，但是从参数名称中应该很明显它们的作用。

您可以尝试使用 Curl 在本地计算机上进行上传过程，然后研究如何在您的应用程序中应用类似的过程，例如

```
curl -H "Content-type: application/json" --data '{ "username": "admin", "password": "admin" }' http://localhost:8080/alfresco/service/api/login 
```

从输出中获取登录票据，然后将名为 test.png 的测试文件从本地文件系统上传到 URL 名称为 的站点`willtest`，

```
curl -F 'filedata=@test.png' -F 'siteid=willtest' -F 'containerid=documentLibrary' http://localhost:8080/alfresco/service/api/upload?alf_ticket=TICKET_blah 
```

然后最后注销

```
curl -X DELETE 'http://localhost:8080/alfresco/service/api/login/ticket/TICKET_blah?alf_ticket=blah' 
```

最后但重要的一点是：Alfresco 正在开发适用于 Android 的完整移动 SDK，并于今年晚些时候发布。如果您打算做一些比简单上传文件更复杂的事情，您可能希望在文件可用时查看它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T13:58:43.897

为了能够从 Android 应用程序上传文件并使用 Multipart 内容类型，我需要向我的应用程序添加一些额外的 jar 文件。

```
apache-mime4j, httpclient, httpcore and httpmime 
```

并使用 HttpPost 发布参数

# google-maps-api-3 - 谷歌地图信息窗口问题

> ID：11810386
> 
> 赞同：0
> 
> 时间：2012-08-04T17:00:12.297
> 
> 标签：google-maps-api-3

嗨，我已经修改了示例和其他网站的代码以适合自己，我需要信息窗口显示四个属性，“姓名”“地址”“电话”和“品种”。一旦我删除`var type = markers[i].getAttribute("type");`（这是谷歌地图示例代码中的现有属性）

并将其替换为：

```
var phone = markers[i].getAttribute("phone");
var breeds = markers[i].getAttribute("breeds"); 
```

地图不显示任何标记。我对javascript没有那么高，所以它可能是我缺少的一些简单的东西。该地图可在此处找到：[http](http://connormccarra.com/test/) ://connormccarra.com/test/ 。

信息取自此 xml 文件：[http ://connormccarra.com/test/phpsqlajax_genxml3.php](http://connormccarra.com/test/phpsqlajax_genxml3.php)

```
function load() {
    var map = new google.maps.Map(document.getElementById("map"), {
        center: new google.maps.LatLng(53.5076512854544, -7.701416015625),
        zoom: 7,
        mapTypeId: 'roadmap'
    });
    var infoWindow = new google.maps.InfoWindow;

    // Change this depending on the name of your PHP file
    downloadUrl("phpsqlajax_genxml3.php", function(data) {
        var xml = data.responseXML;
        var markers = xml.documentElement.getElementsByTagName("marker");
        for (var i = 0; i < markers.length; i++) {
            var name = markers[i].getAttribute("name");
            var address = markers[i].getAttribute("address");
            var type = markers[i].getAttribute("type");
            var point = new google.maps.LatLng(
                parseFloat(markers[i].getAttribute("lat")),
                parseFloat(markers[i].getAttribute("lng")));
            var html = "<b>" + name + "</b> <br/>" + address;
            var icon = customIcons[type] || {};
            var marker = new google.maps.Marker({
                map: map,
                position: point,
                icon: icon.icon,
                shadow: icon.shadow
            });
            bindInfoWindow(marker, map, infoWindow, html);
        }
    });
} 
```

干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T17:22:30.597

这看起来像问题：

```
 var icon = customIcons[type] || {}; 
```

您复制的代码设置为根据“类型”更改图标。如果删除该行：

```
 var type = markers[i].getAttribute("type"); 
```

应该有一个明确的 javascript 错误。如果您不想要自定义图标，请将该行更改为 var icon = {}; 或删除它并将您的标记更改为：

```
 var marker = new google.maps.Marker({
        map: map,
        position: point
      }); 
```

# vb.net - 动态创建文本框并将它们添加到 TabControl

> ID：11810387
> 
> 赞同：0
> 
> 时间：2012-08-04T17:00:22.913
> 
> 标签：vb.net, tabcontrol

我正在使用以下代码在运行时创建文本框，并且运行良好：

```
 MarginTextbox.Name = "mid" & id
  MarginLabel.Name = "ML" & id
  MarginTextbox.Font = New System.Drawing.Font("Verdana", 10, Drawing.FontStyle.Regular)
  MarginLabel.Location = New Point(15, (80 + (counter * 24)))
  MarginTextbox.Location = New Point(110, (80 + (counter * 24)))
  MarginLabel.BackColor = Me.BackColor
  MarginTextbox.Size = New Size(56, 20)
  MarginLabel.Size = New Size(150, 20)
  MarginTextbox.AutoSize = False
  MarginLabel.Text = "Supplier " & id
  Controls.Add(MarginTextbox)
  Controls.Add(MarginLabel) 
```

我不想将它们放在表单上，​​而是放在 TabControl 选项卡中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T17:04:46.377

一个 TabControl 包含一个或多个 TabPage。
TabPage 有一个 Controls 对象集合，可用于添加您的文本框。

所以（假设您添加了一个名为 tabControl1 的 TabControl）：

```
Dim tp as TabPage = tabControl1.TabPages(0) ' 0 is the index of the page required'
tp.Controls.Add(MarginTextbox)
tp.Controls.Add(MarginLabel) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T17:04:17.207

不要将控件添加到您`Form`的 's`Controls`中，而是将其添加到您`TabPage`的 's中`Controls`：

```
~~Controls.Add(MarginTextbox)
Controls.Add(MarginLabel)~~
Me.TabPageWhatever.Controls.Add(MarginTextbox)
Me.TabPageWhatever.Controls.Add(MarginLabel)
```

# java - 关于java中的HashMap实现

> ID：11810394
> 
> 赞同：5
> 
> 时间：2012-08-04T17:01:44.180
> 
> 标签：java, collections, hashmap

我试图对 hashmap 进行研究并提出以下分析：

[https://stackoverflow.com/questions/11596549/how-does-javas-hashmap-work-internally/18492835#18492835](https://stackoverflow.com/questions/11596549/how-does-javas-hashmap-work-internally/18492835#18492835)

Q1 你们可以给我看一个简单的地图，你可以在其中显示过程..如何使用这个公式详细计算给定键的哈希码..计算位置哈希 % (arrayLength-1)) 元素应该放置的位置（桶号），假设我有这个 hashMap

```
HashMap map=new HashMap();//HashMap key random order.
         map.put("Amit","Java");
         map.put("Saral","J2EE"); 
```

Q2 有时可能会发生 2 个不同对象的 hashCode 相同的情况。在这种情况下，2 个对象将保存在一个存储桶中，并将显示为 LinkedList。入口点是最近添加的对象。该对象引用具有下一个字段的其他对象，等等。最后一个条目是指空值。你们能用真实的例子告诉我这个吗..!!

.

“Amit”将被分配到第 10 个桶，因为比特旋转。如果没有一点玩弄，它会转到第 7 个桶，因为 2044535 & 15 = 7。这怎么可能请详细解释整个计算..？

快照已更新...

![在此处输入图像描述](../Images/b254cc72a50a7df70fa0ba97db9ab591.png)

另一个图像是......

![在此处输入图像描述](../Images/79882ae44ffd40d05324ff1a23eed11e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T19:07:40.673

> 使用此公式如何详细计算给定键的哈希码

在`String`这种情况下，计算方式`String#hashCode();`如下：

```
 public int hashCode() {
    int h = hash;
        int len = count;
    if (h == 0 && len > 0) {
        int off = offset;
        char val[] = value;

            for (int i = 0; i < len; i++) {
                h = 31*h + val[off++];
            }
            hash = h;
        }
        return h;
    } 
```

基本上遵循java doc中的等式

```
 hashcode = s[0]*31^(n-1) + s[1]*31^(n-2) + ... + s[n-1] 
```

关于这个实现的一个有趣的事情是它`String`实际上缓存了它的哈希码。它可以做到这一点，因为`String`它是不可变的。

如果我计算`String`“Amit”的哈希码，它将产生这个整数：

```
System.out.println("Amit".hashCode());
>     2044535 
```

让我们通过一个简单的 put to a map，但首先我们必须确定地图是如何构建的。关于 Java 最有趣的事实`HashMap`是它总是有 2^n 个桶。所以如果你调用它，默认的桶数是16，显然是2^4。

在这个map上做put操作，首先会得到key的hashcode。在这个哈希码上发生了一些花哨的比特旋转，以确保糟糕的哈希函数（尤其是那些在低位上没有差异的函数）不会“过载”单个存储桶。

实际负责将密钥分发到存储桶的真正功能如下：

```
 h & (length-1); // length is the current number of buckets, h the hashcode of the key 
```

这仅适用于两个存储桶大小的幂，因为它使用 & 将密钥映射到存储桶而不是模数。

“Amit”将被分配到第 10 个桶，因为比特旋转。如果没有一点玩弄，它会进入第 7 个桶，因为`2044535 & 15 = 7`.

现在我们有了它的索引，我们可以找到存储桶。如果桶包含元素，我们必须遍历它们并在找到时替换相等的条目。如果在链表中没有找到任何项目，我们将把它添加到链表的开头。

下一个重要的事情`HashMap`是调整大小，所以如果地图的实际大小超过阈值（由当前的桶数和负载因子确定，在我们的例子中为 16*0.75=12），它将调整后备数组的大小。调整大小始终为 2 * 当前存储桶数，保证为 2 的幂，以不破坏查找存储桶的功能。

由于桶的数量发生了变化，我们必须重新散列表中的所有当前条目。这是相当昂贵的，所以如果你知道有多少项目，你应该`HashMap`用那个计数来初始化它，这样它就不必一直调整大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T19:22:33.810

Understand that there are two basic requirements for a hash code:

1.  When the hash code is recalculated for a given object (that has not been changed internally in a way that would alter its identity) it must produce the same value as the previous calculation. Similarly, two "identical" objects must produce the same hash codes.
2.  When the hash code is calculated for two different objects (which are not considered "identical" from the standpoint of their internal content) there should be a high probability that the two hash codes would be different.

How these goals are accomplished is the subject of much interest to the math nerds who work on such things, but understanding the details is not at all important to understanding how hash tables work.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T18:11:59.757

Q1：查看对象的`hashCode()`方法实现`String`

Q2：创建简单的类并将其`hashCode()`方法实现为`return 1`. 这意味着具有该类的每个对象都将具有相同的 hashCode，因此将保存在 HashMap 的同一个存储桶中。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-12-12T16:09:40.303

```
import java.util.Arrays;
public class Test2 {
public static void main(String[] args) {
    Map<Integer, String> map = new Map<Integer, String>();
    map.put(1, "A");
    map.put(2, "B");
    map.put(3, "C");
    map.put(4, "D");
    map.put(5, "E");

    System.out.println("Iterate");
    for (int i = 0; i < map.size(); i++) {

        System.out.println(map.values()[i].getKey() + " : " + map.values()[i].getValue());
    }

    System.out.println("Get-> 3");
    System.out.println(map.get(3));

    System.out.println("Delete-> 3");
    map.delete(3);

    System.out.println("Iterate again");
    for (int i = 0; i < map.size(); i++) {

        System.out.println(map.values()[i].getKey() + " : " + map.values()[i].getValue());
    }
}

}

class Map<K, V> {

private int size;
private Entry<K, V>[] entries = new Entry[16];

public void put(K key, V value) {

    boolean flag = true;
    for (int i = 0; i < size; i++) {

        if (entries[i].getKey().equals(key)) {
            entries[i].setValue(value);
            flag = false;
            break;
        }
    }

    if (flag) {
        this.ensureCapacity();
        entries[size++] = new Entry<K, V>(key, value);
    }
}

public V get(K key) {

    V value = null;

    for (int i = 0; i < size; i++) {

        if (entries[i].getKey().equals(key)) {
            value = entries[i].getValue();
            break;
        }
    }
    return value;
}

public boolean delete(K key) {
    boolean flag = false;
    Entry<K, V>[] entry = new Entry[size];
    int j = 0;
    int total = size;
    for (int i = 0; i < total; i++) {

        if (!entries[i].getKey().equals(key)) {
            entry[j++] = entries[i];
        } else {
            flag = true;
            size--;
        }
    }

    entries = flag ? entry : entries;
    return flag;
}

public int size() {
    return size;
}

public Entry<K, V>[] values() {
    return entries;
}

private void ensureCapacity() {

    if (size == entries.length) {
        entries = Arrays.copyOf(entries, size * 2);
    }
}

@SuppressWarnings("hiding")
public class Entry<K, V> {

    private K key;
    private V value;

    public K getKey() {
        return key;
    }

    public V getValue() {
        return value;
    }

    public void setValue(V value) {
        this.value = value;
    }

    public Entry(K key, V value) {
        super();
        this.key = key;
        this.value = value;
    }

}
} 
```

# python - 使用与朋友一起运行 fb 应用程序的图片属性格式

> ID：11810397
> 
> 赞同：1
> 
> 时间：2012-08-04T17:02:49.230
> 
> 标签：python, facebook, facebook-apps

我正在编辑 Runwithfriends FB 示例应用程序来构建我自己的一个。它工作正常，我在这里和那里做了一些改变。我休息了大约两周，但现在当我尝试访问该应用程序时，我收到了一个奇怪的 python 错误：

C:\Program Files\Apache Software Foundation\Tomcat 7.0\webapps\ROOT\app\main.py in init_facebook(self=< **main** .RecentRunsHandler object>) 316 user_id=facebook.user_id, friends=friends, 317 access_token=facebook。 access_token, name=me[u'name'], => 318 email=me.get(u'email'), picture=me[u'picture']) 319 user.put() 320 KeyError除外，例如：

<..一些部分被剪掉了..>

class 'google.appengine.api.datastore_errors.BadValueError'>: 属性图片必须是 str 或 unicode 实例，而不是 dict args = ('属性图片必须是 str 或 unicode 实例，而不是 dict',) message = '属性图片必须是 str 或 unicode 实例，而不是 dict'"

我知道这是一个非常通用的错误，但它指向以下代码。该代码一直存在，我从未接触过它。我真的不知道现在还能去哪里找 - 我已经彻底搜索但找不到线索。抱歉，如果这仍然太宽泛，但如果您能告诉我我可以提供哪些其他信息来调试它，我会很高兴:-(

```
def init_facebook(self):
    """Sets up the request specific Facebook and User instance"""
    facebook = Facebook()
    user = None

    # initial facebook request comes in as a POST with a signed_request
    if u'signed_request' in self.request.POST:
        facebook.load_signed_request(self.request.get('signed_request'))
        # we reset the method to GET because a request from facebook with a
        # signed_request uses POST for security reasons, despite it
        # actually being a GET. in webapp causes loss of request.POST data.
        self.request.method = u'GET'
        self.set_cookie(
            'u', facebook.user_cookie, datetime.timedelta(minutes=1440))
    elif 'u' in self.request.cookies:
        facebook.load_signed_request(self.request.cookies.get('u'))

    # try to load or create a user object
    if facebook.user_id:
        user = User.get_by_key_name(facebook.user_id)
        if user:
            # update stored access_token
            if facebook.access_token and \
                    facebook.access_token != user.access_token:
                user.access_token = facebook.access_token
                user.put()
            # refresh data if we failed in doing so after a realtime ping
            if user.dirty:
                user.refresh_data()
            # restore stored access_token if necessary
            if not facebook.access_token:
                facebook.access_token = user.access_token

        if not user and facebook.access_token:
            me = facebook.api(u'/me', {u'fields': _USER_FIELDS})
            try:
                friends = [user[u'id'] for user in me[u'friends'][u'data']]
                user = User(key_name=facebook.user_id,
                    user_id=facebook.user_id, friends=friends,
                    access_token=facebook.access_token, name=me[u'name'],
                    email=me.get(u'email'), picture=me[u'picture'])
                user.put()
            except KeyError, ex:
                pass # ignore if can't get the minimum fields

    self.facebook = facebook
    self.user = user 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T17:15:53.330

可能与[2012 年 10 月的重大变更](https://developers.facebook.com/roadmap/)有关，引用：

> /picture 连接将在指定回调时返回字典
> 
> 当访问对象的 /picture 连接并指定回调属性时，我们将开始返回包含字段 url、height、width 和 is_silhouette 的字典。目前我们只是将图片 URL 作为字符串返回。

因此，在您当前正在使用的代码中，此时请`picture=me[u'picture']`尝试访问字典的`url`属性。`picture`（如果有的话；我不能确定这是否适用，因为我不知道您的代码是否会被视为*指定了回调属性*。）

如果我的假设是正确的，您还可以按照路线图中的说明启用迁移；但这只会使您的应用程序在 10 月 3 日之前以旧方式运行，因此最好立即尝试修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T14:19:18.260

这是获取图片的方法：

```
picture=me[u'picture'][u'data'][u'url'] 
```

# java - 如何用Java中的特殊字符替换替换元音？

> ID：11810406
> 
> 赞同：5
> 
> 时间：2012-08-04T17:03:32.680
> 
> 标签：java

```
public class ReplaceVowels {

    public static void main(String args[]) throws IOException {
        BufferedReader bf = new BufferedReader(new InputStreamReader(System.in));
        System.out.println("Enter the String:");
        String str = bf.readLine();

        char[] c = new char[str.length()];
        for (int i = 0; i < str.length(); i++) {

            if (c[i] == 'a' || c[i] == 'e' || c[i] == 'i' || c[i] == 'o'
                    || c[i] == 'u') {

                System.out.println(str.replace(c[i], '?'));

            }

        }

    }
} 
```

为什么该`str.replace`方法不起作用？我应该怎么做才能让它工作？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-04T17:07:26.070

在您的代码中，您正在创建一个新的字符数组，其长度与您的字符串相同，但您没有使用任何值初始化该数组。

相反，请尝试：

```
char[] c = str.toCharArray(); 
```

但是，这不是做你想做的事情的最佳方式。您不需要字符数组或 if 语句来替换字符串中的字符：

```
String str = bf.readLine();
str.replace( 'a', '?' );
str.replace( 'e', '?' );
str.replace( 'i', '?' );
str.replace( 'o', '?' );
str.replace( 'u', '?' );
System.out.println( str ); 
```

该`replace`函数将替换它找到的任何（和所有）字符，或者如果字符串中不存在该字符，它将不执行任何操作。

您可能还想研究使用[正则表达式](http://www.regular-expressions.info/)（如 edwga 的回答中所指出的那样），以便您可以将这 5 个函数调用缩短为一个：

```
str.replaceAll( "[aeiou]", "?" ); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-04T17:09:34.317

老实说，这种解决方案相对不切实际。您应该改用 str.replaceAll() 方法。

```
(read in the String str);
str = str.replaceAll("[aeiou]", "?");
System.out.println(str); 
```

它的作用是使用正则表达式“[aeiou]”并将其替换为特殊字符（“？”）。正则表达式是一个复杂的主题，但这个主题只检测元音的每个实例。[您可以在http://docs.oracle.com/javase/1.5.0/docs/api/java/util/regex/Pattern.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/regex/Pattern.html)阅读有关 Regex 的更多信息

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-14T11:04:33.827

以上所有答案都有效。只需添加一些区分大小写以捕获大写元音（使用扫描仪类）

```
 String str1, str2;
       Scanner scan = new Scanner(System.in);

       System.out.print("Enter a String : ");
       str1 = scan.nextLine();
       str2 = str1.replaceAll("[aeiouAEIOU]", "?");
       // adding AEIOU to capture Vowels in uppercase.
       System.out.println("All Vowels Removed Successfully");

       System.out.println(str2); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-04-04T12:51:09.330

这是用“X”替换字符串中所有元音的一种方法。(?i) 是使它不区分大小写。

```
String str = "hEllo";
str = str.replaceAll( "(?i)[aeiou]", "X" ); 
```

也可以更明确的情况下，如：

```
String str = "hEllo";
str = str.replaceAll( "[aeiouAEIOU]", "X" ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-13T20:05:03.070

```
/***
 * Replace all vowels in an input string with
 * the corresponding numbers replace with 1,2,3,4,5
 * @author Kishore Diyyana
 */
public class ReplaceVowels {
    public static void main(String args[]) {
        ReplaceVowels rv = new ReplaceVowels();
        System.out.println(rv.replaceVowels("Kishore Babu Diyyana"));
    }
    public String replaceVowels(String inputStr) {
        return inputStr.replaceAll("[aA]","1").
                        replaceAll("[eE]","2").
                        replaceAll("[iI]","3").
                        replaceAll("[oO]","4").
                        replaceAll("[uU]","5");
    }
} 
```

# scala - 从 trait 自动生成 Scala 类

> ID：11810414
> 
> 赞同：2
> 
> 时间：2012-08-04T17:04:53.523
> 
> 标签：scala

我想创建一个生成特征实现的方法。例如：

```
trait Foo {
  def a
  def b(i:Int):String
}

object Processor {
  def exec(instance: AnyRef, method: String, params: AnyRef*) = {
    //whatever
  }
}

class Bar {
  def wrap[T] = {
    // Here create a new instance of the implementing class, i.e. if T is Foo,
    // generate a new FooImpl(this)
  }
} 
```

我想像这样动态生成`FooImpl`类：

```
class FooImpl(val wrapped:AnyRef) extends Foo {
  def a = Processor.exec(wrapped, "a")
  def b(i:Int) = Processor.exec(wrapped, "b", i)
} 
```

手动实现每个特征不是我们想要的（很多样板文件），所以我希望能够在编译时生成 Impl 类。我正在考虑对类进行注释，并且可能编写一个编译器插件，但也许有更简单的方法？任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T21:13:29.423

您可以编写一个宏（宏从 2.10.0-M3 开始正式成为 Scala 的一部分），类似于[Mixing in a trait dynamic](https://stackoverflow.com/questions/10373318/mixing-in-a-trait-dynamically/10387200#10387200)。不幸的是，现在我没有时间为您编写示例，但请随时在我们的邮件列表中提问，网址为[http://groups.google.com/group/scala-internals](http://groups.google.com/group/scala-internals)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T18:10:54.497

`java.lang.reflect.Proxy`可以做一些非常接近你想要的事情：

```
import java.lang.reflect.{InvocationHandler, Method, Proxy}

class Bar {
  def wrap[T : ClassManifest] : T = { 
    val theClass = classManifest[T].erasure.asInstanceOf[Class[T]]
    theClass.cast(
      Proxy.newProxyInstance(
        theClass.getClassLoader(), 
        Array(theClass), 
        new InvocationHandler {
          def invoke(target: AnyRef, method: Method, params: Array[AnyRef])
            = Processor.exec(this, method.getName, params: _*)
        }))
    }
  } 
```

有了它，您无需生成`FooImpl`.

一个限制是它只适用于没有实现方法的特征。更准确地说，如果在 trait 中实现了一个方法，调用它仍然会路由到处理器，并忽略该实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T10:04:49.877

您可以在[ScalaMock](http://scalamock.org/)中看到三种不同的方法。

ScalaMock 2（当前版本，支持 Scala 2.8.x 和 2.9.x）用于`java.lang.reflect.Proxy`支持动态类型的模拟和一个编译器插件来生成静态类型的模拟。

ScalaMock 3（目前作为 Scala 2.10.x 的[预览版](http://www.paulbutcher.com/2012/06/scalamock-3-0-preview-release/)提供）使用宏来支持静态类型的模拟。

假设您可以使用 Scala 2.10.x，我强烈推荐基于宏的方法而不是编译器插件。您当然可以使编译器插件工作（正如 ScalaMock 演示的那样），但这并不容易，而且宏是一种非常优越的方法。

# php - 无法使用 Ajax/PHP 发送电子邮件

> ID：11810417
> 
> 赞同：0
> 
> 时间：2012-08-04T17:05:17.437
> 
> 标签：php, jquery, ajax

我正在尝试使用 php 表单和 AJAX 发送一封简单的电子邮件。但是，每次我这样做时，代码都会引发`email could not be sent, please try again`错误。为什么会这样？

我也尝试过`alert`警报序列中的变量，但没有奏效。我检查了变量，它们似乎有效，但似乎我忽略了一些东西。

**Javascript/jQuery**（`<head>`块中）

```
<script type="text/javascript" src="js2/jquery-1.7.2.min.js"></script> 
<script>
$("#form2").submit(function(e){
    $(".error").remove();    
    $('#cancel2').click(function(){          
        return;
    });    

    var hasError = false;
    var emailReg = /^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;

    var nameVal = $("#name").val();

    if (nameVal == '') {
        $("#name").after('<span class="error">You forgot to enter the name.</span>');
        hasError = true;
    }

    var emailToVal = $("#emailTo").val();

    if (emailToVal == '') {
        $("#emailTo").after('<span class="error">You forgot to enter the email address to send to.</span>');
        hasError = true;
    } else if(!emailReg.test(emailToVal)) {
        $("#emailTo").after('<span class="error">Enter a valid email address to send to.</span>');
        hasError = true;
    }

    var emailFromVal = $("#emailFrom").val();

    if(emailFromVal == '') {
        $("#emailFrom").after('<span class="error">You forgot to enter the email address to send from.</span>');
        hasError = true;
    } else if (!emailReg.test(emailFromVal)) {
        $("#emailFrom").after('<span class="error">Enter a valid email address to send from.</span>');
        hasError = true;
    }

    if (hasError == false){
        $('.navLinks').hide();
        $('.navLinks:before').hide();
        $('.navLinks:after').hide();                 
        s                       
        $.ajax({
            "type":"POST",
            "url":"sendemail.php",
            "data": { name: nameVal, emailTo: emailToVal, emailFrom: emailFromVal },
            "dataType":'json',
            "success":function(){
                //$('#sumbit1').after('<img src="/img/wait.gif" alt="wait" />');    
                alert('Your email has been sent! For faster answer please call us at: (403) 454-5526');
                $('.navLinks').hide();    
             },          
             "error": function (){
                 alert('Your email could not be sent, please try again.');
             }    
        });
    }          

    e.preventDefault();
    return;
});
</script> 
```

**HTML**

```
<form name="send-to-friend" id="form2" class="form" method="post" action="sendemail.php">
    <label for="name" class="blockItem">Your Name</label>
    <input type="text" id="name" class="blockItem" name="your name" maxlength="60" size="35"/>
    <label for="emailFrom" class="blockItem">Your Email Address</label>
    <input type="text" id="emailFrom" class="blockItem" name="your email" maxlength="60" size="35" />
    <label for="emailTo" class="blockItem">Your Friend's E-mail Address</label>
    <input  type="text" id="emailTo" class="blockItem" name="your friends email" maxlength="60" size="35"  />
    <input class="button" id="submitt2" type="submit" value="SUBMIT" />                               
</form> 
```

**PHP**

```
<?php

$mailTo = $_POST['emailToVal'];
$mailFrom = $_POST['emailFromVal'];
$name = $_POST['nameVal'];
$message = 'I found this company recommended for residential and office cleaning in Calgary. Their website is FineMaid "dot" com (replace "dot", of course in browser\s address bar). Cheers!';  

$subject = $name . ' recommends Fine Maid';

$send = @mail($mailTo, $subject, $message, "From: ".$mailFrom);    

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T17:40:33.947

你在PHP中访问的参数不存在，应该是：

```
$mailTo = $_POST['emailTo'];
$mailFrom = $_POST['emailFrom'];
$name = $_POST['name']; 
```

但是，当您使用 JSON 作为数据类型时，您应该返回一个 JSON。

此外：没有任何检查邮件是否已发送，当前 jQuery 将报告成功，当 PHP 脚本返回一个有效的 JSON 时（它没有，因为响应至少是一个空格，或者通知对于缺少 POST 变量，而不是 JSON）

把它放在脚本的末尾：

```
if(!$send)
{
  header("HTTP/1.0 500 Internal Server Error");
}
else
{
 die(json_encode(array('msg'=>'Your email has been sent! 
                               For faster answer please call us at: (403) 454-5526')));
} 
```

...当 $send 为真（邮件已发送）时，脚本将返回一个 JSON，否则响应将有一个 HTTP-status-code 500，什么会触发错误回调

# php - 未检测到 PHP 登录全名

> ID：11810418
> 
> 赞同：0
> 
> 时间：2012-08-04T17:05:28.147
> 
> 标签：php, login

我正在本地运行脚本。

我用自己的全名创建了两个不同的用户名。
**例子：**

*   第一个用户名**User1**，全名名为**User One**，和
*   第二个名为**User2**的用户名，全名名为**User Two**。

因此，当我使用用户名**User1**登录时，系统检测到名为**User One**的真实全名，但是当我使用用户名**User2**登录时，为什么系统仍然检测为**User One**。

就像系统无法从数据库中读取其他人的全名一样。

我的代码如下：

像往常一样，它有一个会话：

```
if (!isset($_SESSION)) {
  session_start();
} 
```

这是我连接到数据库的声明代码：

```
<?php
mysql_select_db($database_kiki, $kiki);
$query_Recordset1 = "SELECT name FROM `ahli`";
$Recordset1 = mysql_query($query_Recordset1, $kiki) or die(mysql_error());
$row_Recordset1 = mysql_fetch_assoc($Recordset1);
$totalRows_Recordset1 = mysql_num_rows($Recordset1);
?> 
```

这是我登录后打印全名的代码。

```
Welcome, <?php echo $row_Recordset1['name']; ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T17:13:57.310

您的查询应该是：

```
$query_Recordset1 = "SELECT name FROM `ahli` where `username`= 'User2'"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T17:20:48.060

您没有在查询中选择正确的名称。您需要添加：

```
$query_Recordset1 = "SELECT name FROM `ahli` where `username`= ".$_SESSION['username']; 
```

假设您已将用户用户名与会话一起存储。

现在发生的事情是您获取所有用户，并且只显示一次名称。因为用户一是返回数组中的第一个，所以它将始终显示用户一。

# ruby - 地址/邮编/城市和州的正则表达式

> ID：11810423
> 
> 赞同：0
> 
> 时间：2012-08-04T17:06:14.337
> 
> 标签：ruby, regex, search

有人有匹配地址、邮编或 [城市、州] 的正则表达式示例吗？

**更新：** 诚然，这是一个弱问题，因为此时我没有足够的关于用户行为的信息来真正限定问题的参数。这是我正在尝试做的事情：

创建一个搜索功能，根据输入的信息选择两个不同路径之一，第一个是地址邻近搜索，第二个是组织名称搜索。

事实证明这是一个难以解决的问题，因此除了 .* （好吧，好吧，我应得的）之外的任何输入，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T08:19:58.637

查看地理编码器 (http://www.rubygeocoder.com/)。它将从文本输入中获取纬度/经度。您可以对搜索执行的操作是首先尝试匹配组织名称，然后尝试匹配位置。

幸运的是，谷歌不久前弄清楚了如何进行邻近搜索

# php - Facebook开图，过滤好友列表数组

> ID：11810426
> 
> 赞同：1
> 
> 时间：2012-08-04T17:06:25.677
> 
> 标签：php, facebook-graph-api

我希望我的应用程序过滤我使用开放图获得的朋友列表。登录到我的网站的人只能看到他们也使用我的应用程序的朋友。我在 Quora、Thumb 等许多应用程序上都注意到了这一点。如何使用 php 来完成？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T17:22:47.007

[`user`](https://developers.facebook.com/docs/reference/fql/user/)当您使用 FQL 查询表（与表一起）时可以轻松完成[`friend`](https://developers.facebook.com/docs/reference/fql/friend/)- 有一个字段`is_app_user`，所以查询像

```
SELECT uid, name FROM user
WHERE uid IN (SELECT uid1 FROM friend WHERE uid2 = me())
AND is_app_user 
```

将仅返回当前用户同时也是您的应用用户的那些朋友。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T17:23:11.523

您可以通过graph api访问friendslist连接来访问用户列表

例如： http: [//developers.facebook.com/tools/explorer/ ?method=GET&path=me%2Ffriendlists](http://developers.facebook.com/tools/explorer/?method=GET&path=me%2Ffriendlists)

```
/me/friendlists?access_token='.$access_token.' 
```

# sql-server-2008 - 将 mdf 文件从 661 降级到 655

> ID：11810429
> 
> 赞同：2
> 
> 时间：2012-08-04T17:07:03.653
> 
> 标签：sql-server-2008, entity-framework, c#-4.0

我在 sql server 2008 中创建了数据库。我将 mdf 和 ldf 文件带到了 Visual Studio 2010 项目中，并尝试使用实体框架连接到该数据库。并收到以下消息：

![在此处输入图像描述](../Images/6002d3021f1b65777793e795f2a876ac.png)

我无法在特定计算机上重新安装或升级软件。那么有没有办法降级mdf和ldf文件的版本呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T17:19:18.503

不，您不能降级，如果您无法安装正确的版本，则需要以另一种方式移动架构和数据。最近的这个问题基本上是一样的：

[将 SQL Server 2008 数据库附加到 SQL Server 2005 失败](https://stackoverflow.com/questions/11778220/failure-attaching-sql-server-2008-database-to-sql-server-2005/)

本质上，您可以使用 Generate Scripts 工具或 Export Data 向导使您的目标数据库看起来像源数据库。您将无法附加 MDF 文件。

这篇博文展示了一些可以帮助解决此问题的 3rd 方工具：

[http://bertrandaaron.wordpress.com/2012/04/20/re-blog-the-cost-of-reinventing-the-wheel/](http://bertrandaaron.wordpress.com/2012/04/20/re-blog-the-cost-of-reinventing-the-wheel/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T17:10:49.763

不，您需要安装相同或更新版本的 SqlServer。
没有已知的方法可以降级 MDF 文件。

链接

[http://blog.sqlauthority.com/2008/10/16/sql-server-downgrade-database-to-previous-version/](http://blog.sqlauthority.com/2008/10/16/sql-server-downgrade-database-to-previous-version/)

也许，如果您可以访问 SqlServer 2008，您可以使用命令“任务”->“创建脚本”来启动向导以创建包含架构和数据的脚本。
在选项页面上有“高级”按钮，您可以在其中选择 SqlServer 的语法版本

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-16T10:56:02.163

我发现可行的方法是从原始数据库中导出数据库和存储过程。然后将它们上传到第二个数据库（第二台计算机）。

首先导出数据库内容（数据）——我使用了 SQL Server 导出数据向导。在您希望从右键单击导出的数据库上，然后选择任务，然后导出数据。按照说明以最适合您的格式保存 - 我使用 excel 作为数据。

然后导出存储过程再次右键单击数据库名称。选择任务，这次选择生成脚本。再次按照向导的说明进行操作。

要导入数据，只需转到第二台计算机并右键单击要导入数据的数据库。再次任务>导入数据。按照说明从数据库中导入所有数据。

最后为了导入存储过程，我打开了一个新的存储过程命令并将之前保存的脚本文件拖放到这个窗口中。新的存储过程窗口充满了我的存储过程的整个列表。最后更改将由 SP 使用的数据库名称（如果这与原始数据库名称不同）。（这是第一行 USE [DBName]。然后简单地执行，SP 将完全恢复。

这帮助我快速启动并再次运行整个数据库。希望这可以帮助。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2020-04-02T14:44:11.230

您可以在另一张图片上打开它，然后将其发布到带有或不带有数据的 sql 脚本，然后使用 sqlcmd 或任何东西在目标 PC 上创建数据库。然后运行sql脚本...

# asp.net - 用于验证文本框数据的正则表达式

> ID：11810431
> 
> 赞同：0
> 
> 时间：2012-08-04T17:07:10.480
> 
> 标签：asp.net, regex

验证器应仅允许字母字符（az 和 AZ）、点 (.)、逗号 (,)、斜杠 (/) 和连字符 (-)。请帮忙找出一个。或者告诉我如何根据我的规格创建一个定制的。

我已经尝试过`[a-zA-Z,-/.]`并且它有效，但我的要求只允许我指定的每个非字母字符最多 1 个（.,/-）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-06T23:15:24.440

尝试：`^[A-Za-z]*[-a-zA-Z,/.]{1}[A-Za-z]*$`

# 解释

*   `^`锚点到字符串的开头

*   `[A-Za-z]*`可能被多个字母包围

*   `[-a-zA-Z,/.]{1}`只有一个封闭的字符

*   `[A-Za-z]*`可能被多个字母包围

*   `$`锚定到字符串的末尾

# c++ - c、指针错误？Word a() 将始终评估为真

> ID：11810432
> 
> 赞同：1
> 
> 时间：2012-08-04T17:07:24.957
> 
> 标签：c++

我有这个 Word.cc，它类似于用于操作单词的字符串类。我将运算符 << 重载为友元函数，但是当我不断收到此“Word a() 的地址将评估为真”时。你能评论我可能错的地方吗？我在 main 中使用的代码如下。

```
int main()
{
    Word a();
    cout<<a;
    return 0;
}

Word::Word()
{
    init("");
}

void Word::init(char *c,char *stoppers)
{
    char *temp="\0";

    if(c==NULL)
        c=temp;

    size=strlen(c)==0 ? DEFAULT_SIZE :(strlen(c)+1+DEFAULT_SIZE)/DEFAULT_SIZE*DEFAULT_SIZE;
    wd=new char[size+1];
    delimiters=new char[strlen(stoppers)+1];

    strcpy(wd,c);
    strcpy(delimiters,stoppers);
    count=strlen(wd);
}
ostream & operator<<(ostream &out,const Word &b)
{
    out<<b.wd;   
    return out;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T17:10:25.443

最烦人的解析：

```
Word a(); 
```

应该

```
Word a; 
```

# jquery - jQuery 或 DOM 性能

> ID：11810436
> 
> 赞同：0
> 
> 时间：2012-08-04T17:07:30.860
> 
> 标签：jquery, performance, dom

在我的一个网页上，我需要一个单词列表，单击时每个单词都应该有一个边框。单击另一个单词时，前一个单词会失去边框，而新单词会得到一个。我还需要为单击的单词显示一个带有一些选项的 div。

为了实现目标，我使用了 jQuery。这个想法很简单：从前一个元素中删除一个没有边框的类，并将一个有边框的类添加到一个新元素中。但是，当此类单词的数量达到数百个时，这会非常缓慢。我该如何改进呢？顺便说一句，它也渲染得很慢。

这是我使用的代码（没有 CSS）

HTML

```
`...

```
<div class="wrapper">
    <div class='invis'>
        <span word="24">YOu are a cool programmer</span>
    </div>
</div> 
```

...` 
```

`jQuery Javascript：`

 ````
`var currentElement = null;
$('.invis').click(function() {
    if (currentElement != null) {
        currentElement.removeClass("bordered");
        currentElement.addClass("invis");
    }
    $(this).removeClass("invis");
    $(this).addClass("bordered");
    currentElement = $(this);
});` 
```

* * *

 `## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T08:10:34.457

事实证明，罪魁祸首是 CSS 中 .invis 和 .bordered 的“float:left”。没有它，它开始工作得更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T17:52:08.337

尝试在没有库的情况下以老式方式进行操作，例如：

```
var invis = document.getElementsByClassName('invis'), last=false;

for (var i=0; i<invis.length; i++) {
    invis[i].addEventListener("click", function(e) {
        if (last) last.className = 'invis';
        this.className = 'bordered';
        last=this;
    });
} 
```

​</p>

[**小提琴**](http://jsfiddle.net/dXZzY/1/)``

# php - 未定义的偏移量和数组比较 PHP

> ID：11810438
> 
> 赞同：0
> 
> 时间：2012-08-04T17:07:37.047
> 
> 标签：php, arrays, comparison, undefined, equality

嘿，每个人都完成了我的研究，我发现我仍然坚持很多人说要在变量前加上 @ 符号，但它似乎不起作用，所以我的代码给了我这个错误

```
 Notice: Undefined index: 2 in login.php on line 20 
```

我的代码是

```
 if( isset($_REQUEST['email']) || isset($_REQUEST['pwd']) || $_REQUEST['email'] != "" || $_REQUEST['pwd'] != "" )
                    {

                          $inputFile = fopen("members.txt", "r");  
                          $found = false;
                          $i =0;
                          //read the read.txt until the end of file
                          while(!feof($inputFile) && $found == false)  
                          {

                            $line = fgets($inputFile);  
                            // replace the special charater within the lines by there proper entity code
                            $lineArray = preg_split("/\,/", (string)$line);

                            if ($_REQUEST['email'] === $lineArray['2'] && $_REQUEST['pwd'] === $lineArray['4']) 
                            {
                                        session_start();
                                        $found = true;
                                        $useremail=$_REQUEST['email'];
                                        $password= $_REQUEST['pwd'];
                                        //time to set sessions and stuff
                                        $_SESSION['useremail'] = $useremail;
                                        $_SESSION['password'] = $password;
                                        //send the redirect header
                                        header('Location: index.php');
                                        exit();
                            }
                          }
                          fclose($inputFile);

                    } 
```

所以它所指的线是

```
 if ($_REQUEST['email'] === $lineArray['2'] && $_REQUEST['pwd'] === $lineArray['4']) 
```

我尝试了许多其他变体，例如删除单引号在 $lineArray 前面添加 @ 并同时执行这两种操作，任何人都可以帮我找出当我打印它们时的值，但是当它到达这个 if 语句时它不会转动相等，它给了我这个错误。

如果也尝试过

```
 if ($_REQUEST['email'] === $lineArray[2] && $_REQUEST['pwd'] === $lineArray[4]) 
```

和

```
 if ($_REQUEST['email'] === @$lineArray[2] && $_REQUEST['pwd'] === @$lineArray[4]) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T17:12:15.223

你需要`$lineArray[2]`. 数组的索引是整数，而不是字符串。并且还要确保同一个数组是否至少有 3 个元素。

* * *

该行是问题：

```
$lineArray = preg_split("/\,/", (string)$line); 
```

它应该是（因为你似乎正在分裂`,`）：

```
$lineArray = preg_split("/,/", (string)$line); 
```

* * *

PS：考虑使用更简单的[`$array = explode(",",$yourString)`](http://php.net/manual/en/function.explode.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T17:24:33.950

您需要为数组键使用数字（不带引号），但您还需要`isset()`在比较它们之前检查这些数组值是否存在。

```
if (isset($lineArray[2]) && $_REQUEST['email'] === $lineArray[2] ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T00:28:35.443

该错误意味着您的代码中使用了未定义的 var。在你的情况下，它正在谈论`$lineArray['2']`. 这不是一个严重的错误，因此您可以偷懒并更改错误设置以摆脱它：

```
error_reporting(E_ERROR | E_WARNING | E_PARSE); 
```

但你真的应该修复它。

正如 Devnate 建议的那样，您需要使用 int 来指定数组的索引键，而不是字符串（所以 this`$lineArray[2]`而不是 this `$lineArray['2']`）。为什么？因为您之前使用的密钥 ('2') 从未设置，这导致了错误。

当您尝试上述操作时，您说比较失败。在我看到`print_r($lineArray);`.

这是您上一个问题的代码。很遗憾你没有接受我的建议并使用我的代码。如果你这样做了，你就不会遇到这个问题。但那是另一回事。发布，`print_r($lineArray);`以便我可以看到比较的问题所在。

# google-apps-script - 如何格式化此日期字符串以便谷歌脚本识别它？

> ID：11810441
> 
> 赞同：13
> 
> 时间：2012-08-04T17:08:01.920
> 
> 标签：google-apps-script

我得到一个带有日期字符串的 json 提要，格式如下：

//2012-08-03T23:00:26-05:00

我原以为我可以把它传递给一个新的日期

```
var dt = new Date("2012-08-03T23:00:26-05:00"); 
```

这适用于 jsfiddle，但不适用于谷歌脚本。它返回一个无效的日期。读完[这篇文章后](https://stackoverflow.com/questions/6683872/why-does-my-date-object-in-google-apps-script-return-nan)，我意识到这可能是 GAS 解释日期字符串的方式，所以现在我不确定如何重新格式化日期以使其正常工作。

有没有最好的方法来重新格式化该日期字符串，以便 GAS 可以将其识别为日期？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-05T21:43:04.653

Google Apps 脚本使用特定版本的 JavaScript（[ECMA-262 3rd Edition](http://productforums.google.com/forum/#!msg/apps-script/poDhzsvZWHU/OjlCw4KrqYg)），并且您发现无法解析 ISO 8601 格式的日期/时间。以下是我在许多应用程序脚本中使用的修改后的函数

```
var dt = new Date(getDateFromIso("2012-08-03T23:00:26-05:00"));

// http://delete.me.uk/2005/03/iso8601.html
function getDateFromIso(string) {
  try{
    var aDate = new Date();
    var regexp = "([0-9]{4})(-([0-9]{2})(-([0-9]{2})" +
        "(T([0-9]{2}):([0-9]{2})(:([0-9]{2})(\\.([0-9]+))?)?" +
        "(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?";
    var d = string.match(new RegExp(regexp));

    var offset = 0;
    var date = new Date(d[1], 0, 1);

    if (d[3]) { date.setMonth(d[3] - 1); }
    if (d[5]) { date.setDate(d[5]); }
    if (d[7]) { date.setHours(d[7]); }
    if (d[8]) { date.setMinutes(d[8]); }
    if (d[10]) { date.setSeconds(d[10]); }
    if (d[12]) { date.setMilliseconds(Number("0." + d[12]) * 1000); }
    if (d[14]) {
      offset = (Number(d[16]) * 60) + Number(d[17]);
      offset *= ((d[15] == '-') ? 1 : -1);
    }

    offset -= date.getTimezoneOffset();
    time = (Number(date) + (offset * 60 * 1000));
    return aDate.setTime(Number(time));
  } catch(e){
    return;
  }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-06-22T16:49:13.620

发现这个似乎也可以完成这项工作的其他可能且非常简单的代码：

```
function test(){
  Logger.log(isoToDate("2013-06-15T14:25:58Z"));
  Logger.log(isoToDate("2012-08-03T23:00:26-05:00"));
  Logger.log(isoToDate("2012-08-03T23:00:26+05:00"));
}

function isoToDate(dateStr){// argument = date string iso format
  var str = dateStr.replace(/-/,'/').replace(/-/,'/').replace(/T/,' ').replace(/\+/,' \+').replace(/Z/,' +00');
  return new Date(str);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T18:24:03.550

如果事先知道格式，那么让它工作的艰难而可靠的方法是解析它。

```
var dtString = "2012-08-03T23:00:26-05:00";
var date = dtString.split('T')[0]; 
var time = dtString.split('T')[1].split('-')[0]; 
var tz = dtString.split('T')[1].split('-')[1]; 
var dt = new Date(date.split('-')[0] , date.split('-')[1] - 1,  // month is special
                  date.split('-')[2], time.split(':')[0],
                  time.split(':')[1], time.split(':')[2] , 0); 
```

我没有测试过这段确切的代码，但使用了类似的代码。因此，这使您对如何进行有一个公平的想法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-11-02T23:30:33.097

截至目前`new Date()`似乎工作：

```
var dT = new Date("2012-08-03T23:00:26-05:00");
console.info("dT: %s or %d", dT, dT.getTime()); 
```

`dT: Sat Aug 04 06:00:26 GMT+02:00 2012 or 1.344052826E12`在 Google Apps 脚本中返回

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-01-01T20:09:12.197

**在 Google Script 中将 date-string 转换为 date-object**时，这对我有用。

日期字符串是通过 getValue **s** () 方法从 Google 表格单元格中获取的。

从：`01.01.2017 22:43:34`到：`2017/01/01 22:43:34`完成了工作。然后`new Date()`.

```
var dateTimeObj = new Date(stringDate.replace(/^(\d{1,2})[-.](\d{1,2})[-.](\d{4})/g,"$3/$2/$1")); 
```

# c# - 访问控制的单元测试方法

> ID：11810446
> 
> 赞同：4
> 
> 时间：2012-08-04T17:09:01.340
> 
> 标签：c#, winforms, unit-testing, c#-4.0, moq

是否可以测试访问 winform 控件的任何方法？以下方法访问表单上一系列控件中的 Enabled 属性。不幸的是，我不知道如何对此进行单元测试/如果它甚至可能的话。

我真的很感激一些指示。

```
 public void AccessToCsvFileVerificationInputs(bool access)
    {
        btnSelectCSVFilePath.Enabled = access;
        nudNumberOfColumns.Enabled = access;
        cbCurrencyPair.Enabled = access;

        foreach (Control input in tlpColumnDataTypes.Controls)
        {
            input.Enabled = access;
        }

        foreach (Control input in tlpColumnNames.Controls)
        {
            input.Enabled = access;
        }

        nudInitialRow.Enabled = access;
        nudFinalRow.Enabled = access;

        btnSelectErrorLogFilePath.Enabled = access;
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-04T17:36:49.927

我发现最好的方法是将应用程序的设计转换为某种形式的 Model-View-* 模式，对于 Winforms，[Model-View-Presenter](http://www.martinfowler.com/eaaDev/ModelViewPresenter.html) ¹通常很合适。

这样，您就有了一个负责所有逻辑的演示者/控制器类，并且您拥有保存 UI 代码的视图。在 Winforms 中，您通常通过让表单类实现一个 IView 接口来实现这一点，该接口定义了它可以做的所有事情。

然后，您将表单（以声明为接口的形式传递）提供给演示者 - 构造函数依赖注入是传递它的典型方式。

* * *

因此，在您的示例中，您将`AccessToCsvFileVerificationInputs`方法移动到演示者类中，并向演示者传递一个实现正确接口的表单实例，说明该表单可以执行的所有操作。

像这样的东西：

```
public class CsvFilePresenter
{
    private ICsvFileView view_;
    public CsvFilePresenter(ICsvFileView view)
    {
        view_ = view;
    }

    public void AccessToCsvFileVerificationInputs(bool access)
    {
        // Code omitted for brevity
    }
} 
```

现在，在该方法中，在您直接引用控件等 UI 功能的任何地方，您都引用了界面：

```
public void AccessToCsvFileVerificationInputs(bool access)
{
    view_.EnableSelectCSVFilePath = access;
    view_.EnableNumberOfColumns = access;
    view_.EnableCurrencyPair = access;

    // And so on...
} 
```

我故意将控件集合排除在外 - 您如何处理这些将取决于具体情况。

例如，您有这个 ICsvFileView 接口：

```
public interface ICsvFileView 
{
    bool EnableSelectCSVFilePath { get; set; }
    bool EnableNumberOfColumns { get; set; }
    bool EnableCurrencyPair { get; set; }        
} 
```

此 ICsvFileView 的具体实现可能如下所示：

```
public partial class Form3 : Form, ICsvFileView
{
    public Form3()
    {
        InitializeComponent();
    }

    bool ICsvFileView.EnableSelectCSVFilePath
    {
        get
        {
            return btnSelectCsvFilePath.Enabled;
        }
        set
        {
            btnSelectCsvFilePath.Enabled = value;
        }
    }

    bool ICsvFileView.EnableNumberOfColumns
    {
        get
        {
            return nudNumberOfColumns.Enabled;
        }
        set
        {
            nudNumberOfColumns.Enabled = value;
        }
    }

    bool ICsvFileView.EnableCurrencyPair
    {
        get
        {
            return cbCurrencyPair.Enabled;
        }
        set
        {
            cbCurrencyPair.Enabled = value;
        }
    }
} 
```

* * *

现在您已经完成了这项工作，您可以通过传入接口的模拟实例并在该模拟上设置期望来测试逻辑的行为（由演示者表示）及其与视图的交互。

* * *

**请注意**，如果这一切看起来有点复杂和令人费解，那是因为它是！Winforms 的设计并没有真正考虑到这种事情 - 其他框架，如 WPF，并且使这一切变得更加容易。如果你能改变，我建议你考虑一下。

* * *

¹我链接到的网页上的 Martin Fowler 已经放弃了这种模式，将其移动到两个更不同的模式中——我会保留这个术语，因为它是众所周知的。他的新[被动视图](http://www.martinfowler.com/eaaDev/PassiveScreen.html)与我一直以来对 MVP 的看法非常接近。

# android - HttpURLConnection 在 Android 2.x 中运行良好，但在 4.1 中运行良好：未发现身份验证挑战

> ID：11810447
> 
> 赞同：30
> 
> 时间：2012-08-04T17:09:03.310
> 
> 标签：android, authentication, httpurlconnection

我有一些典型的代码，它们使用 HttpURLConnection 来获取带有 URL 的文件。他们在 android 1.x 和 2.x 中运行良好。但在 Android 4.1 中失败了！

我在网上搜索，但几乎没有找到类似的信息。有人可以帮忙调查这个问题吗？

```
private String mURLStr; 
private HttpURLConnection mHttpConnection;

...

url = new URL(mURLStr);

...

mHttpConnection = (HttpURLConnection) url.openConnection();
mHttpConnection.setDoOutput(true);
mHttpConnection.setRequestMethod("GET");

...

InputStream is = mHttpConnection.getInputStream(); 
```

getInputStream 方法抛出异常：

```
08-01 15:56:48.856: W/System.err(13613): java.io.IOException: No authentication challenges found
08-01 15:56:48.856: W/System.err(13613):      at libcore.net.http.HttpURLConnectionImpl.getAuthorizationCredentials(HttpURLConnectionImpl.java:427)
08-01 15:56:48.866: W/System.err(13613):      at libcore.net.http.HttpURLConnectionImpl.processAuthHeader(HttpURLConnectionImpl.java:407)
08-01 15:56:48.866: W/System.err(13613):      at libcore.net.http.HttpURLConnectionImpl.processResponseHeaders(HttpURLConnectionImpl.java:356)
08-01 15:56:48.866: W/System.err(13613):      at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:292)
08-01 15:56:48.866: W/System.err(13613):      at libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:168)
... 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-28T16:15:46.343

我目前面临同样的问题。在 4.1 Jelly Bean 上，我在 HttpURLConnection 上调用 getResponseCode() 时收到 IOException“未找到身份验证挑战”。

我在网上搜索了Android源代码的变化，发现如下：4.0.4（工作）：[https ://bitbucket.org/seandroid/libcore/src/7ecbe081ec95/luni/src/main/java/ libcore/net/http/HttpURLConnectionImpl.java](https://bitbucket.org/seandroid/libcore/src/7ecbe081ec95/luni/src/main/java/libcore/net/http/HttpURLConnectionImpl.java) 4.1.1（不工作）：[https ://bitbucket.org/seandroid/libcore/src/6b27266a2856/luni/src/main/java/libcore/net/http/HttpURLConnectionImpl.java](https://bitbucket.org/seandroid/libcore/src/6b27266a2856/luni/src/main/java/libcore/net/http/HttpURLConnectionImpl.java)

正如在 4.1 JB 中可以看到的，getAuthorizationCredentials() 方法会抛出 IOException。如果响应代码是 401 或 407，它会使用 HeaderParser.parseChallenges(..) 解析在响应中找到的质询标头。如果返回的 List 为空，则抛出异常。

[https://bitbucket.org/seandroid/libcore/src/6b27266a2856/luni/src/main/java/libcore/net/http/HeaderParser.java](https://bitbucket.org/seandroid/libcore/src/6b27266a2856/luni/src/main/java/libcore/net/http/HeaderParser.java)

我们目前正在调查究竟是什么导致该 List 为空，但怀疑我们的服务器可能在质询标头中使用 realm=... 而不是 realm="..." 。缺少引号可能是导致此问题的原因。我们必须进一步调查是否确实如此，如果我们可以让它发挥作用。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-02-26T01:24:40.320

根据[RFC2617](http://www.ietf.org/rfc/rfc2617.txt)：

> 源服务器使用 401（未授权）响应消息来挑战用户代理的授权。该响应必须包含一个 WWW-Authenticate 头域，该域包含至少一个适用于所请求资源的质询。

在 Android 中，当服务器返回没​​有 WWW-Authenticate 标头集的a或状态码时， [HttpURLConnection getResponseCode()](http://developer.android.com/reference/java/net/HttpURLConnection.html#getResponseCode%28%29)方法会抛出。`java.io.IOException: No authentication challenges found``401 Unauthorized``407 Proxy Authentication Required`

如果您拥有服务器端 API，则可以通过在返回 401 或 407 时添加所需的 WWW-Authenticate 标头来修复它。在我的例子中，我在 PHP 中修复它如下：

```
header('WWW-Authenticate: OAuth realm="users"');
header('HTTP/1.1 401 Unauthorized'); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-29T11:21:58.857

我也有同样的问题。我找到了这个解决方法，但它不适用于 Android 2。在 Jelly Bean 上，它运行良好。只需使用 getErrorStream() 而不是 getInputStream()。

```
try
{
    responseStream = new BufferedInputStream(connection.getInputStream());
}
catch(IOException e)
{
    responseStream = new BufferedInputStream(connection.getErrorStream());
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T06:34:28.390

标题

我已经解决了果冻豆的问题。请在上述情况下使用以下代码

```
DefaultHttpClient client = new DefaultHttpClient();
client.getCredentialsProvider().setCredentials(new AuthScope(null, -1), new UsernamePasswordCredentials(userName,userPass));
HttpGet request = new HttpGet();
request.addHeader("Accept", "application/xml");
request.setURI(new URI(service));
HttpResponse response = client.execute(request); 
```

你得到了你需要的正确回应。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-04T22:21:55.833

我在需要 cookie 才能正确运行的 Web 服务中遇到了类似的问题。显然，果冻豆默认情况下不会自动创建 cookie 存储（与以前的版本不同），因此该服务无法找到我的会话，并且每次我尝试访问它时都会抛出 401。将以下代码行添加到我的应用程序初始化解决了该问题：

```
// enable VM-wide cookie support for HttpUrlConnection
// see http://developer.android.com/reference/java/net/HttpURLConnection.html for details
CookieManager cookieManager = new CookieManager();
CookieHandler.setDefault(cookieManager); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-27T20:00:02.403

当使用基本身份验证而不调用 setDoOutput(true) 时，我们仍然遇到这个问题：

这是解决方案：

[使用 HttpURLConnection 的 Android Jelly Bean 4.1 上的 HTTP 基本身份验证问题](https://stackoverflow.com/questions/14550131/http-basic-authentication-issue-on-android-jelly-bean-4-1-using-httpurlconnectio/14551482#14551482)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-07T10:55:20.200

检查您的服务器是否返回`Error 401 - Not Authorised`. 我相信 Android 代码会看到该响应，并认为它旨在提供身份验证详细信息。就我而言，我只是向我的服务器提供了错误的令牌。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-07-16T07:51:27.180

有一个解决方案

在您的代码中删除此

## HttpConnection.setDoOutput(true);

它将起作用`ICS`或`Jelly Bean`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-08-16T22:59:02.873

我为此使用的一个解决方案（我正在使用 Android 的 Volley 库）是使用 [Square 的 OkHttp 库](http://square.github.io/okhttp/)。他们的实现正确地处理了这个问题，并将按预期返回 401。

# node.js - 为 NodeJS 使用 Express 时出错：对象的“引擎”# 不是函数

> ID：11810451
> 
> 赞同：4
> 
> 时间：2012-08-04T17:09:39.650
> 
> 标签：node.js, express, pug

我是 nodejs 的新手，想知道是否有人知道如何调试此错误：

```
TypeError: Property 'engine' of object #<View> is not a function 
```

在 ubuntu 机器上安装 node/npm 后，我刚刚安装了一个 express 实例。有任何想法吗？这是我的堆栈跟踪：

```
500 TypeError: Property 'engine' of object #<View> is not a function
at View.render (/var/www/node_modules/express/lib/view.js:75:8)
at Function.app.render (/var/www/node_modules/express/lib/application.js:504:10)
at ServerResponse.res.render (/var/www/node_modules/express/lib/response.js:676:7)
at exports.index (/var/www/routes/index.js:7:7)
at callbacks (/var/www/node_modules/express/lib/router/index.js:165:11)
at param (/var/www/node_modules/express/lib/router/index.js:139:11)
at pass (/var/www/node_modules/express/lib/router/index.js:146:5)
at Router._dispatch (/var/www/node_modules/express/lib/router/index.js:173:5)
at Object.router (/var/www/node_modules/express/lib/router/index.js:33:10)
at next (/var/www/node_modules/express/node_modules/connect/lib/proto.js:190:15) 
```

这是路线/index.js 7:7：

```
res.render('index', { title: 'Express' }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T19:39:28.140

我想通了。问题是我没有正确安装依赖项。我运行此命令后它起作用了：

```
cd . && sudo npm install 
```

在此之前让应用程序运行的命令是参考本教程的第一部分：

[http://shapeshed.com/creating-a-basic-site-with-node-and-express/](http://shapeshed.com/creating-a-basic-site-with-node-and-express/)

谢谢您的帮助！

# php - php数组从1到200有什么快速的方法吗？

> ID：11810454
> 
> 赞同：0
> 
> 时间：2012-08-04T17:10:00.610
> 
> 标签：php, arrays, range

> **可能重复：**
> [在 php 中用没有循环的值填充数组](https://stackoverflow.com/questions/3506773/fill-array-with-values-without-loop-in-php)

我已经购买了一个 php 联系表，我正在尝试制作一个验证器。所以不要像这样输入：

```
$amount->addValidator('identical', array( 
'token' => array('1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '20', '21', '22', '23', '24', '25', '26', '27', '28', '29', '30', '31', '32', '33', '34', '35') 
```

));

有没有什么快速的方法可以让它从 1 到 200 的范围内作为有效答案？我已经输入了 35 并且累了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-04T17:11:33.680

```
$array = range(1, 200); 
```

[http://us2.php.net/manual/en/function.range.php](http://us2.php.net/manual/en/function.range.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T17:24:05.900

您可以使用 range 函数生成包含 1 到 200 个元素的数组

```
$arr = range(1,200); 
```

# python - 如何在 Python 中使用 Flask 执行周期性任务

> ID：11810461
> 
> 赞同：24
> 
> 时间：2012-08-04T17:10:49.890
> 
> 标签：python, web-services, api, flask, wsgi

我一直在使用[Flask](http://flask.pocoo.org/)为我的[k8055](http://www.velleman.eu/products/view/?country=be&lang=en&id=351346) USB 接口板提供一个简单的 Web API；相当标准的吸气剂和推杆，Flask 真的让我的生活变得轻松多了。

但是我希望能够在乳清发生时将状态更改注册为/附近。

例如，如果我有一个连接到电路板的按钮，我可以轮询该特定端口的 api。但是如果我想让输出直接反映输出，无论是否有人在与 api 交谈，我都会有这样的东西。

```
while True:
    board.read()
    board.digital_outputs = board.digital_inputs
    board.read()
    time.sleep(1) 
```

每一秒，输出都会更新以匹配输入。

Flask下有没有办法做这种事情？我以前在 Twisted 中做过类似的事情，但是 Flask 太方便了，这个特殊的应用程序还不能放弃它......

谢谢。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2018-01-03T08:34:21.187

对于我的 Flask 应用程序，我考虑使用 Pashka 在他的[回答](https://stackoverflow.com/a/19027802/3559967)、[调度](https://github.com/dbader/schedule)库和[APScheduler](https://apscheduler.readthedocs.io/en/latest/)中描述的 cron 方法。

我发现 APScheduler 很简单，可以满足定期任务运行的目的，所以继续使用 APScheduler。

示例代码：

```
from flask import Flask

from apscheduler.schedulers.background import BackgroundScheduler

app = Flask(__name__)

def test_job():
    print('I am working...')

scheduler = BackgroundScheduler()
job = scheduler.add_job(test_job, 'interval', minutes=1)
scheduler.start() 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-09-26T12:06:07.787

您可以将 cron 用于简单的任务。

为您的任务创建一个烧瓶视图。

```
# a separate view for periodic task
@app.route('/task')
def task():
    board.read()
    board.digital_outputs = board.digital_inputs 
```

然后使用 cron，定期从该 url 下载

```
# cron task to run each minute
0-59 * * * * run_task.sh 
```

run_task.sh 内容在哪里

```
wget http://localhost/task 
```

Cron 的运行频率不能超过每分钟一次。如果您需要更高的频率，（例如，每 5 秒 = 每分钟 12 次），您必须按以下方式在 tun_task.sh 中进行

```
# loop 12 times with a delay
for i in 1 2 3 4 5 6 7 8 9 10 11 12
do
    # download url in background for not to affect delay interval much
    wget -b http://localhost/task
    sleep 5s
done 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T17:19:41.207

不，Flask 中不支持任务，但您可以使用[flask-celery](https://github.com/ask/flask-celery/)或简单地在单独的线程（greenlet）中运行您的函数。

# java - this的返回值，进一步解释

> ID：11810462
> 
> 赞同：0
> 
> 时间：2012-08-04T17:10:54.193
> 
> 标签：java, this

我写了以下代码：

```
class samplethis {

    int a = 6;
    int b = 7;
    String c = "i am";

    public void sample() {
        System.out.println(this);
    }
}

public class thiss {

    public static void main(String[] args) {
        samplethis cal = new samplethis();
        cal.sample();// return samplethis@1718c21
    }
} 
```

有谁知道它为什么返回`samplethis@1718c21`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-04T17:15:02.130

您的代码不会*返回*任何内容 - 它会*打印*调用的结果`this.toString()`。

除非您已覆盖`Object.toString()`，否则您将获得[默认实现](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#toString%28%29)：

> Object 类的 toString 方法返回一个字符串，该字符串由对象作为其实例的类的名称、at 符号字符“@”和对象哈希码的无符号十六进制表示形式组成。换句话说，此方法返回一个等于以下值的字符串：
> 
> ```
> getClass().getName() + '@' + Integer.toHexString(hashCode()) 
> ```

将哈希码放在那里可以更容易地发现对同一对象的*可能相等引用。*如果你写：

```
Foo foo1 = getFooFromSomewhere();
Foo foo2 = getFooFromSomewhere();
System.out.println("foo1 = " + foo1);
System.out.println("foo2 = " + foo2); 
```

和结果是​​一样的，那么`foo1`和`foo2`可能指的是同一个对象。不能保证，但它至少是一个很好的指标——无论如何，这种字符串形式实际上*只*对诊断有用。

如果你想让你的代码打印出更有用的东西，你需要覆盖`toString`，例如 (in `samplethis`)

```
@Override
public String toString() {
    return String.format("samplethis {a=%d; b=%d; c=%s}", a, b, c);
} 
```

# c# - 更新后如何滑动更新面板内容

> ID：11810465
> 
> 赞同：0
> 
> 时间：2012-08-04T17:11:08.323
> 
> 标签：c#, jquery, asp.net, ajax

我有一个包含图像和按钮的更新面板。单击“下一个图像”按钮时，图像控件一次显示一个图像，单击“上一个图像”按钮时显示上一个图像。代码示例是这样的

```
protected void btnNext_Click(..)
{
    Image1.ImageUrl=getNextImageFromDatabase();
    UpdatePanel1.Update();
}
protected void btnPrevious_Click(..)
{
    Image1.ImageUrl=getPreviousImageFromDatabase();
    UpdatePanel1.Update();
} 
```

现在我想知道的是，有什么方法可以在单击“下一个图像”时将图像或更新面板中的任何内容滑动到左侧，单击“上一个图像”时与右侧类似？有没有使用 AjaxToolKit 或 JQuery 的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T17:45:57.450

您可以使用看起来像幻灯片效果的 jquery fadeIn fadeOut 方法

请参阅此处的示例[http://api.jquery.com/promise/#example-1](http://api.jquery.com/promise/#example-1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T17:53:52.753

使用 Jquery，您可以简单地将左边距设置为负值，这样 Image 就会消失。我个人使用这个解决方案：

*   用户点击下一个/上一个按钮
*   显示加载图像（gif）
*   `var img = new Image()`在 javascript 中创建图像 ( )
*   为该图像设置 onload 操作以将旧图像向左/向右移动并附加新图像等。
*   获取下一个/上一个图像 url
*   分配创建图像的 src ，因此在加载时执行 onload 操作。

在这种情况下，AjaxToolkit 可能不是最干净的解决方案。您可能需要创建一些返回 nex/prev 图像 url 的简单服务，但这只是几行代码......

# iphone - Xcode：更新时无法启动应用程序

> ID：11810470
> 
> 赞同：1
> 
> 时间：2012-08-04T17:11:53.837
> 
> 标签：iphone, ios, xcode, cocoa-touch

各位码农，

我的 iPhone 应用程序 1.0 版已经在 App Store 中，所以在那个版本中一切正常。

目前我正在处理更新，版本 2.0。好吧，如果我将此版本作为一个全新的应用程序安装在 iPhone 上，它会运行得非常好。应用程序启动时没有问题或运行时出现任何其他错误。

但现在的问题是：如果我已经安装了 1.0 版，然后尝试使用 2.0 版更新应用程序（在 Xcode 中以调试模式构建和运行），应用程序会在启动时立即崩溃。这非常令人困惑，因为如果将它们构建为独立的应用程序，这两个版本都可以很好地工作。另一个有趣的方面是该更新适用于 iOS 模拟器，但不适用于设备。

在设备上运行更新，我收到以下错误之一（错误并不总是相同）：

*   无法获取进程 xxxx 的任务
*   等待应用程序启动超时

我的开发环境的附加信息：我在 OS X Mountain Lion 10.8 上使用 Xcode 4.4。我的 iPhone 上的操作系统是 iOS 5.1.1。

我发现崩溃是在调用 application:didFinishLaunchingWithOptions: 之前引起的，所以我的实际源代码不会导致问题。

对于那些仍然对该`didFinishLaunchingWithOptions`方法感兴趣的人：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    //Navigation bar

    UIImage *navigationBackground = [[UIImage imageNamed:@"EMSNavigationBarBackground.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 20, 0, 20)];
    [[UINavigationBar appearance] setBackgroundImage:navigationBackground forBarMetrics:UIBarMetricsDefault];

    [[UINavigationBar appearance] setTitleVerticalPositionAdjustment:-3.f forBarMetrics:UIBarMetricsDefault];

    //Normal button

    UIImage *button30 = [[UIImage imageNamed:@"EMSBarButtonItemNormal"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 5, 0, 5)];
    UIImage *buttonHighlighted30 = [[UIImage imageNamed:@"EMSBarButtonItemPressed"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 5, 0, 5)];
    [[UIBarButtonItem appearance] setBackgroundImage:button30 forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
    [[UIBarButtonItem appearance] setBackgroundImage:buttonHighlighted30 forState:UIControlStateHighlighted barMetrics:UIBarMetricsDefault];
    [[UIBarButtonItem appearance] setBackgroundVerticalPositionAdjustment:-3.f forBarMetrics:UIBarMetricsDefault];

    //Back button

    UIImage *buttonBack30 = [[UIImage imageNamed:@"EMSBarButtonItemBackNormal"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 13, 0, 5)];
    UIImage *buttonBackHighlighted30 = [[UIImage imageNamed:@"EMSBarButtonItemBackPressed"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 13, 0, 5)];

    [[UIBarButtonItem appearance] setBackButtonBackgroundImage:buttonBack30 forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];

    [[UIBarButtonItem appearance] setBackButtonBackgroundImage:buttonBackHighlighted30 forState:UIControlStateHighlighted barMetrics:UIBarMetricsDefault];
    [[UIBarButtonItem appearance] setBackButtonBackgroundVerticalPositionAdjustment:-3.f forBarMetrics:UIBarMetricsDefault];

    return YES;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T11:29:29.247

我有同样的问题。问题原来是我为同一个应用程序的新版本创建了一个具有不同名称的新项目。将项目名称改回以前版本中的名称，问题就解决了！也许您的项目也是如此？您可以按如下方式编辑项目的名称：

1.  在您的新项目中，选择您的目标
2.  在右侧的实用程序窗格中，选择“文件检查器”选项卡
3.  在标识窗格中更改项目名称，这将打开一个新窗口，这将帮助您重构项目

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T17:44:17.787

我有一些类似的问题。当我在安装以前的版本时第一次运行我的应用程序时，出现“等待应用程序启动超时”错误，但 Xcode 第二次启动应用程序时没有问题。事实证明，原因是我更改了目标的产品名称（选择目标，然后在构建设置选项卡上为产品名称设置值）。但是，当我将应用程序存档并使用 iTunes 安装在设备上时，它以新名称正常启动，因此问题似乎出在 Xcode 中。

# android - 如果其中没有项目，则不会显示 ListViews 背景？

> ID：11810471
> 
> 赞同：1
> 
> 时间：2012-08-04T17:12:09.230
> 
> 标签：android, xml, listview, background

[http://tinypic.com/view.php?pic=dextsh&s=6](http://tinypic.com/view.php?pic=dextsh&s=6)

我创建了一个白色背景的 listView。我的问题如下：只有当列表视图充满项目时才会显示白色背景。即使其中没​​有任何项目，如何使 listView 的背景显示？我错过了什么？

```
<?xml version="1.0" encoding="utf-8"?>

<ScrollView 
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_height="fill_parent"
android:layout_width="fill_parent"
android:fillViewport="true">

<TableLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/layout_search_task"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center|top"
        android:orientation="horizontal"
        android:stretchColumns="1"
        android:weightSum="1.0" 
        android:scaleType="matrix"
        android:background="@drawable/orginalbild">

<TableRow
    android:paddingTop="3dp">
           <TextView
                android:layout_width="0dip"
                android:layout_height="fill_parent" 
                android:layout_weight="0.04">
            </TextView>

            <EditText

                android:id="@+id/search_task_field"
                android:layout_width="0dip"
                android:layout_height="fill_parent"
                android:layout_weight="0.7"
                android:hint="@string/SearchTaskHint" 
                />

            <ImageButton
                android:id="@+id/search_task_button"
                android:layout_width="0dip"
                android:layout_height="50dp"
                android:layout_gravity="center"
                android:layout_weight="0.22"

                android:src="@drawable/find3" />

            <TextView
                android:layout_width="0dip"
                android:layout_height="fill_parent" 
                android:layout_weight="0.04"
                android:visibility="invisible"
                >
            </TextView>

        </TableRow>

 <TableRow
 android:paddingTop="3dp"
 android:paddingLeft="14dp"
 android:paddingRight="14dp"
 >
            <TextView
                android:background="#90767878"
                android:layout_width="0dip"
                android:layout_height="0.9dp"
                android:layout_weight="1" >
            </TextView>

        </TableRow>

  <TableRow
     android:paddingBottom="20dp"
     android:background="#ffffff"
     >

          <TextView
                android:layout_width="0dip"
                android:layout_height="fill_parent"
                android:layout_weight="0.04" >
            </TextView>
           <TextView
                 android:background="#90767878"
                android:layout_width="0dip"
                android:layout_height="fill_parent"
                android:layout_weight="0.006" >
            </TextView>

          <ListView
                android:background="#ffffff"
                android:id="@+id/search_task_list"
                android:layout_width="0dip"
                android:layout_height="fill_parent"
                android:gravity="left"
                android:layout_weight="0.9"
                android:layout_marginBottom="0.5dp"
            android:layout_marginRight="0.5dp"
            android:layout_marginLeft="0.5dp"
                 />

           <TextView
                 android:background="#90767878"
                android:layout_width="0dip"
                android:layout_height="fill_parent"
                android:layout_weight="0.006" >
            </TextView>

            <TextView
                android:layout_width="0dip"
                android:layout_height="fill_parent"
                android:layout_weight="0.04" >
            </TextView>

         </TableRow>

     <TableRow>
           <TextView
                android:layout_width="0dip"
                android:layout_height="fill_parent"
                android:layout_weight="0.04" >
            </TextView>

           <TextView
                android:background="#90767878"
                android:layout_width="0dip"
                android:layout_height="0.9dp"
                android:layout_weight="0.92" >
            </TextView>

           <TextView

                android:layout_width="0dip"
                android:layout_height="fill_parent"
                android:layout_weight="0.04" >
            </TextView>

       </TableRow> 

    </TableLayout>
    </ScrollView> 
```

# python - Scrapy：如何构建一个从多个 URL 收集信息的项目？

> ID：11810476
> 
> 赞同：4
> 
> 时间：2012-08-04T17:13:19.983
> 
> 标签：python, web-scraping, scrapy, pipeline

经过多年不情愿地将刮板编码为正则表达式和 BeautifulSoup 等的混合体后，我找到[了 Scrapy](http://scrapy.org)，我几乎把它当作今年送给自己的圣诞礼物！它使用起来很自然，而且它似乎是为了让几乎所有东西都变得优雅和可重复使用而构建的。

但是我处于一种我不知道如何解决的情况：我的蜘蛛抓取并抓取了一个列表页面 A，我从中生成了一组项目。但是对于每个项目，我需要获取一个独特的补充链接（由一些抓取的信息构成，但不是明确的 Scrapy 可以遵循的页面上的链接）以获得额外的信息。

我的问题分为两部分：在抓取过程之外获取 URL 的协议是什么？如何以优雅的方式从多个来源构建项目？

在 StackOverflow 上的[上一个问题](https://stackoverflow.com/questions/4640804/python-scrapy-how-to-fetch-an-url-not-via-following-links-inside-a-spider)中已经部分地询问（并回答了）这个问题。但我更感兴趣的是在这个用例中 Scrapy 的哲学应该是什么——肯定不是不可预见的可能性？我想知道这是否是管道注定要用于的事情之一（从主要信息推导出的辅助来源添加信息是“后处理”实例），但是最好的方法是什么？不是完全打乱了 Scrapy 高效的异步组织吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T14:33:00.130

> 在抓取过程之外获取 URL 的协议是什么？

当你创建一个`Request`给它一个 url 时，你从哪里下载 url 并不重要。您可以从页面中提取它，或以其他方式构建。

> 如何以优雅的方式从多个来源构建项目？

采用[`Request.meta`](https://stackoverflow.com/questions/9334522/scrapy-follow-link-to-get-additional-item-data)

# java - 第一个 tomcat 应用程序 - 'ant install' 错误“NoClassDefFound”

> ID：11810477
> 
> 赞同：1
> 
> 时间：2012-08-04T17:13:25.130
> 
> 标签：java, jsp, tomcat, ant

JSP/servlet 是我想学习的东西，所以我着手创建我的第一个 tomcat 应用程序。

我已经完成了[这里](http://tomcat.apache.org/tomcat-7.0-doc/appdev/index.html)的 apache 教程，并继续尝试在 tomcat 中安装我的应用程序（具有适当 dir 结构的简单测试 html 文件）。[现在，我意识到希望使用教程提供的库存](http://tomcat.apache.org/tomcat-7.0-doc/appdev/build.xml.txt)build.xml是非常一厢情愿的想法，但我需要从某个地方开始，我还不确定如何自己编写一个。我已经寻找示例，但它们似乎没有“安装”目标，也许它们不是 Web 应用程序。

我的项目构建，但没有通过 ant 安装到 tomcat 上。当我尝试“安装”我的控制台输出时......

```
 ant install
Buildfile: /home/mark/svn/tomcatapp/build.xml
Trying to override old definition of datatype resources

prepare:

compile:
    [javac] /home/mark/svn/tomcatapp/build.xml:299: warning: 'includeantruntime' was not set, defaulting to build.sysclasspath=last; set to false for repeatable builds

install:

BUILD FAILED
/home/mark/svn/tomcatapp/build.xml:375: java.lang.NoClassDefFoundError: org/apache/tomcat/util/buf/B2CConverter
    at org.apache.catalina.util.Base64.encode(Base64.java:173)
    at org.apache.catalina.ant.AbstractCatalinaTask.execute(AbstractCatalinaTask.java:204)
    at org.apache.catalina.ant.DeployTask.execute(DeployTask.java:211)
    at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
    at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
    at org.apache.tools.ant.Task.perform(Task.java:348)
    at org.apache.tools.ant.Target.execute(Target.java:392)
    at org.apache.tools.ant.Target.performTasks(Target.java:413)
    at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)
    at org.apache.tools.ant.Project.executeTarget(Project.java:1368)
    at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
    at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
    at org.apache.tools.ant.Main.runBuild(Main.java:811)
    at org.apache.tools.ant.Main.startAnt(Main.java:217)
    at org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)
    at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109)
Caused by: java.lang.ClassNotFoundException: org.apache.tomcat.util.buf.B2CConverter
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    ... 19 more

Total time: 0 seconds 
```

为什么找不到一个类，它不会包含在 tomcat 安装中吗？有一个类似的问题，但我没有尝试使用管理器应用程序，而且我不确定如何编辑类路径 - 我需要编译一个 .java 类来为项目创建一个吗？

我确信一个更简单的构建文件就足够了，但我不确定哪些组件是相关的。对于可能非常愚蠢的问题，我们深表歉意。

这是我的 build.xml 文件中的安装目标。

```
 <target name="install" depends="compile"
   description="Install application to servlet container">

    <deploy url="${manager.url}"
       username="${manager.username}"
       password="${manager.password}"
           path="${app.path}"
       localWar="file://${build.home}"/>

  </target> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T11:55:02.587

如果您使用的是示例 build.xml ，请更改

```
localWar="file://${build.home}" 
```

至

```
war="${dist.home}/${app.name}-${app.version}.war" 
```

如果你在 ANT_HOME/lib 中有 catalina-ant.jar。尝试从该位置删除它。

重启tomcat。

这对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-09T18:35:11.980

**简短的回答：**

*   将文件 tomcat-util.jar 从复制`CATALINA_HOME/lib`到`ANT_HOME/lib` **或**
*   发出 ant 命令时，添加`-lib`带有该文件路径的选项，例如
    `ant -lib C:\Tomcat8\lib\tomcat-util.jar install`
    （提供`CATALINA_HOME`指向`C:\Tomcat8`）

**解释：**

我在 Tomcat 8.0.36 上遇到过类似的问题。根据错误信息`org.apache.tomcat.util.codec.binary.Base64`找不到类。*教程中的ant install*命令执行*部署*任务，这不是 Ant 中的标准任务，而是 Tomcat 提供的自定义任务。部署任务由`DeployTask`类（类全称`org.apache.catalina.ant.DeployTask`）实现，放在`CATALINA_HOME/lib/catalina-ant.jar`. 自定义任务（如`DeployTask`）通常依赖于外部库，因此您需要将这些库添加到 Ant 的类路径中。有关更多信息，请参阅[Ant 中的可选任务](http://ant.apache.org/manual/install.html#optionalTasks)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T20:17:26.150

我也在运行新版本的 Tomcat (7.0.32) 并在尝试遵循教程时遇到了同样的错误。我知道这不是最好的解决方案，但也许它对您的调试会有所帮助：当我使用该`-lib`选项时，`ant`我能够使其包含所需类的 jar 文件：（ `ant -lib /usr/local/apache-tomcat-7.0.32/lib/ -lib /usr/local/apache-tomcat-7.0.32/bin/ install`在我的情况下`/usr/local/apache-tomcat-7.0.32`是`$CATALINA_HOME`）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-05T19:27:48.873

您已点击[https://issues.apache.org/bugzilla/show_bug.cgi?id=52148](https://issues.apache.org/bugzilla/show_bug.cgi?id=52148)

升级到最新的 Tomcat 7 版本，问题就会消失。

# architecture - 多媒体数据内容管理系统架构需求建议

> ID：11810479
> 
> 赞同：1
> 
> 时间：2012-08-04T17:13:35.797
> 
> 标签：architecture, content-management-system, liferay, multimedia

我需要设计“多媒体数据内容管理系统”。我正在考虑不同的架构。根据我的要求，如果你能帮助我决定架构，我会有所帮助。

* * *

## 系统要求：

*   系统中的 3 类用户：创建者、审批者和查看者
*   Creator 将创建多媒体内容，主要是视频，但有时也会创建静态图像。
*   审批者将批准多媒体内容。
*   Viewer 应该能够在基于 adobe flash 的视频播放器中查看多媒体数据。（这将是不同的应用程序，名为 Viewer App）。
*   Viewer App 将提交统计数据，例如特定视频的播放次数。
*   创建者应上传任何格式的视频文件，但应用程序应将其转换为与查看器应用程序兼容的适当格式。
*   用户还可以为每个视频配置一些特定于 Viewer App 的参数。
*   创建者和审批者应该能够看到不同的报告。
*   不同的用户可以具有不同的权限来执行操作，并且用户可以具有对不同部分的基于角色的访问权限。
*   此应用程序可以拥有数千个用户池。

* * *

## 问题：

*   这样的系统是否已经存在，可以很容易地参考？
*   我听说过很多关于liferay的事情。它是否适合此类应用程序的架构？
*   如果 liferay 是正确的架构，我可以从哪里开始开发这种应用程序？
*   如果它可以帮助我快速实施系统，我也准备购买商用现成组件。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T07:05:25.960

Liferay 有一个良好/细粒度的权限系统（角色和权限可以应用于数据级别，即对于上传的特定文件，您可以授予用户可以查看、谁可以更新、谁可以删除或谁可以上传的权限）并且还可以与 jBPM 和 kaleo 等工作流引擎集成，以批准、拒绝用户添加或更新的内容。

Liferay 没有您提到的完整的查看器应用程序，但它提供了上传文档和媒体的 API。它提供与不同的预览软件的集成，如openOffice（用于查看`.doc`等`.docx`格式）、imageMagick（用于`pdf`在浏览器中查看）和Xuggler（用于多媒体文件）。

Liferay 中有一个`Documents & Media portlet`(D&M)，您可以检查其中的功能，例如`read-count`上传的特定文档和媒体文件、对文档和媒体文件的评论等。如果您可以继续使用 liferay 构建您的应用程序，这将给出一个公平的想法。

您可以基于 Liferay 的 D&M portlet 构建 portlet 应用程序或自定义 D&M portlet（*注意！自定义 liferay 的内置功能在升级方面会带来很多开销*）。

# javascript - 嵌套 JavaScript 对象

> ID：11810483
> 
> 赞同：0
> 
> 时间：2012-08-04T17:14:26.560
> 
> 标签：javascript

我正在编写一个简单的 JavaScript 应用程序。该代码包括创建一个`deck`可以包含许多嵌套对象的`card`对象。

基本上，我希望能够像这样访问卡片组实例中的每张卡片：

```
deck1.card2.method(); 
```

我使用以下函数来创建我的甲板原型：

```
function Deck(){
var cardStack = []
//deck properties & methods
}

function card(){
//card properties methods
} 
```

我一直在将每张卡片添加到卡片组并将它们存储在`cardStack`数组中，使用JavaScript 数组的`push`和`pop`方法。

但是，这不允许我按照我的意愿访问我的卡：

```
deck1.card2.method(); 
```

谁能指出我实现这一目标的正确方法？在 JavaScript 中可能吗？先感谢您 ：-）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T17:16:17.300

您需要使用以下方法将对象和函数定义为父对象的属性`this`：

```
function Deck() {
  this.cardStack = [];
  this.card = function() {
    console.log('Hullo');
  }
} 
```

现在调用该方法有效：

```
var deck = new Deck();
deck.card();   // Prints 'Hullo' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T17:19:26.417

要访问单卡对象，您需要将您`cardStack`的公共财产设为公共财产。在构造函数内部，[`this`关键字](https://developer.mozilla.org/en/JavaScript/Reference/Operators/this)是对当前`Deck`对象的引用，因此您可以使用：

```
function Deck(){
   this.cards = [];
   // deck properties & methods
} 
```

然后，访问`var deck = new Deck(…)`via的单张卡片`deck.cards[2]`，并调用它的方法。

或者您对`cardStack`数组使用访问器函数。扩展示例：

```
var Deck = (function() {
    function Deck() {
        var cardStack = [];
        this.getCard = function(i) { return cardStack[i]; };

        for (var i=0; i<5; i++)
            cardStack.push(new Card(i));
    }
    function Card(i) {
        this.method = function() {
            alert("Hi, I'm card №"+i);
        };
    }
    return Deck;
})();

var deck = new Deck();
deck.getCard(2).method(); // alerts "Hi, I'm card №2" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T17:44:00.853

您可以通过在运行时将您的卡片或套牌推入数组的方法中将属性添加到您的对象来动态地实现这样的方法。

例如：

```
var DeckStack = {
    initialize: function() {
        this.deckStack = [];
    },

    addDeck: function (name) {
        this.deckStack.push(name);
        this['deck' + this.deckStack.length] = name;    // <-- We add a method or property to the object dynamically
    }
};

DeckStack.initialize();
DeckStack.addDeck('test');
console.log(DeckStack.deck1);  // Writes 'test' to console

// This will show our new method/property as part of the object
for (var meth in DeckStack) {
    console.log(meth);
} 
```

也许您正在创建一个 Card 对象。如果是这样，您将使用：

```
var card = new Card(name); // For example
this['deck' + this.deckStack.length] = card; 
```

它可以作为您的甲板对象上的属性使用。

# c++ - 是否依赖于 C++ 平台？

> ID：11810484
> 
> 赞同：34
> 
> 时间：2012-08-04T17:14:40.147
> 
> 标签：c++, compiler-construction

我们可以说 C++ 依赖于平台吗？

我知道 C++ 使用编译器，并且这些编译器对于不同的平台是不同的。当我们使用编译器编译 C++ 代码时，例如：在 Windows 上，会创建**.EXE**格式的文件。

为什么**.EXE**文件依赖于操作系统/平台？

**.EXE 文件**中的格式是什么？

为什么我们不能在其他平台上运行它？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-08-04T17:19:13.927

这其实是一个比较广泛的话题。为简单起见，它归结为两件事：操作系统和 CPU 架构。

首先，*.exe 通常只有 Windows，因为它是Windows 操作系统知道如何执行的*二进制代码。*此外，操作系统知道如何将其转换为适合体系结构的代码（这就是为什么 Windows“只是兼容”的原因）。请注意，还有很多事情正在发生，但这是对正在发生的事情的（*非常*）高级抽象。

现在，编译器将采用 C++ 代码并为体系结构（即 x86、MIPS 等）生成其相应的汇编代码。通常编译器也有一个汇编器（或者它可以依赖的一个）。汇编器链接代码并生成硬件可以执行的二进制代码。有关此主题的更多信息，请查找有关热电联产的更多信息。

**附加说明**

考虑不依赖于平台的Java。Java 编译器生成在 Java 虚拟机 (JVM) 上运行的 Java 字节码。请务必注意，任何时候您希望运行 Java 应用程序都必须运行 Java 虚拟机。由于预编译的 JVM 知道如何在您的操作系统和 CPU 架构上运行，它可以运行其 Java 字节码并有效地为您的特定系统运行相应的操作。

在已编译的二进制文件（即来自 C++ 代码的文件）中，您拥有系统字节码。因此，Java 为您模拟的那种指令直接硬编码到 .exe 或您正在使用的任何二进制格式中。考虑以下示例：

请注意，此 java 代码最终必须在 JVM 中运行，并且不能独立运行。

```
Java Code:
System.out.println("hello") (To be compiled)

Compiled Java bytecode:
Print "hello" (To be run in JVM)

JVM:
(... some translation, maybe to architecture code - I forget exactly ...)
system_print_code "hello" (JVM translation to CPU specific) 
```

与 C++（可以在独立模式下运行）相比：

```
C++ Code:
cout<< "hello";

Architecture Code:
some_assembly_routine "hello"

Binary output:
system_print_code "hello" 
```

## 一个真实的例子

如果你对这在现实生活中的例子感到好奇，我在下面提供了一个。

**C++ Source** 我把它放在一个名为 hello.cpp 的文件中

```
#include <iostream>

int main() {
  using namespace std;
  cout << "Hello world!" << endl;
  return 0;
} 
```

**程序集（从 C++ 源代码** 生成）通过生成`g++ -S hello.cpp`

```
 .file   "test.c"
    .section    .rodata
    .type   _ZStL19piecewise_construct, @object
    .size   _ZStL19piecewise_construct, 1
_ZStL19piecewise_construct:
    .zero   1
    .local  _ZStL8__ioinit
    .comm   _ZStL8__ioinit,1,1
.LC0:
    .string "Hello world!"
    .text
    .globl  main
    .type   main, @function
main:
.LFB1493:
    .cfi_startproc
    pushq   %rbp
    .cfi_def_cfa_offset 16
    .cfi_offset 6, -16
    movq    %rsp, %rbp
    .cfi_def_cfa_register 6
    leaq    .LC0(%rip), %rsi
    leaq    _ZSt4cout(%rip), %rdi
    call    _ZStlsISt11char_traitsIcEERSt13basic_ostreamIcT_ES5_PKc@PLT
    movq    %rax, %rdx
    movq    _ZSt4endlIcSt11char_traitsIcEERSt13basic_ostreamIT_T0_ES6_@GOTPCREL(%rip), %rax
    movq    %rax, %rsi
    movq    %rdx, %rdi
    call    _ZNSolsEPFRSoS_E@PLT
    movl    $0, %eax
    popq    %rbp
    .cfi_def_cfa 7, 8
    ret
    .cfi_endproc
.LFE1493:
    .size   main, .-main
    .type   _Z41__static_initialization_and_destruction_0ii, @function
_Z41__static_initialization_and_destruction_0ii:
.LFB1982:
    .cfi_startproc
    pushq   %rbp
    .cfi_def_cfa_offset 16
    .cfi_offset 6, -16
    movq    %rsp, %rbp
    .cfi_def_cfa_register 6
    subq    $16, %rsp
    movl    %edi, -4(%rbp)
    movl    %esi, -8(%rbp)
    cmpl    $1, -4(%rbp)
    jne .L5
    cmpl    $65535, -8(%rbp)
    jne .L5
    leaq    _ZStL8__ioinit(%rip), %rdi
    call    _ZNSt8ios_base4InitC1Ev@PLT
    leaq    __dso_handle(%rip), %rdx
    leaq    _ZStL8__ioinit(%rip), %rsi
    movq    _ZNSt8ios_base4InitD1Ev@GOTPCREL(%rip), %rax
    movq    %rax, %rdi
    call    __cxa_atexit@PLT
.L5:
    nop
    leave
    .cfi_def_cfa 7, 8
    ret
    .cfi_endproc
.LFE1982:
    .size   _Z41__static_initialization_and_destruction_0ii, .-_Z41__static_initialization_and_destruction_0ii
    .type   _GLOBAL__sub_I_main, @function
_GLOBAL__sub_I_main:
.LFB1983:
    .cfi_startproc
    pushq   %rbp
    .cfi_def_cfa_offset 16
    .cfi_offset 6, -16
    movq    %rsp, %rbp
    .cfi_def_cfa_register 6
    movl    $65535, %esi
    movl    $1, %edi
    call    _Z41__static_initialization_and_destruction_0ii
    popq    %rbp
    .cfi_def_cfa 7, 8
    ret
    .cfi_endproc
.LFE1983:
    .size   _GLOBAL__sub_I_main, .-_GLOBAL__sub_I_main
    .section    .init_array,"aw"
    .align 8
    .quad   _GLOBAL__sub_I_main
    .hidden __dso_handle
    .ident  "GCC: (GNU) 7.2.1 20171128"
    .section    .note.GNU-stack,"",@progbits 
```

**二进制输出（从程序集生成）**`g++ -c`这是十六进制形式 生成的二进制输出的未链接形式（即尚未完全填充符号位置） 。我使用`xxd`.

```
00000000: 7f45 4c46 0201 0100 0000 0000 0000 0000  .ELF............
00000010: 0100 3e00 0100 0000 0000 0000 0000 0000  ..>.............
00000020: 0000 0000 0000 0000 0807 0000 0000 0000  ................
00000030: 0000 0000 4000 0000 0000 4000 0f00 0e00  ....@.....@.....
00000040: 5548 89e5 488d 3500 0000 0048 8d3d 0000  UH..H.5....H.=..
00000050: 0000 e800 0000 0048 89c2 488b 0500 0000  .......H..H.....
00000060: 0048 89c6 4889 d7e8 0000 0000 b800 0000  .H..H...........
00000070: 005d c355 4889 e548 83ec 1089 7dfc 8975  .].UH..H....}..u
00000080: f883 7dfc 0175 3281 7df8 ffff 0000 7529  ..}..u2.}.....u)
00000090: 488d 3d00 0000 00e8 0000 0000 488d 1500  H.=.........H...
000000a0: 0000 0048 8d35 0000 0000 488b 0500 0000  ...H.5....H.....
000000b0: 0048 89c7 e800 0000 0090 c9c3 5548 89e5  .H..........UH..
000000c0: beff ff00 00bf 0100 0000 e8a4 ffff ff5d  ...............]
000000d0: c300 4865 6c6c 6f20 776f 726c 6421 0000  ..Hello world!..
000000e0: 0000 0000 0000 0000 0047 4343 3a20 2847  .........GCC: (G
000000f0: 4e55 2920 372e 322e 3120 3230 3137 3131  NU) 7.2.1 201711
00000100: 3238 0000 0000 0000 1400 0000 0000 0000  28..............
00000110: 017a 5200 0178 1001 1b0c 0708 9001 0000  .zR..x..........
00000120: 1c00 0000 1c00 0000 0000 0000 3300 0000  ............3...
00000130: 0041 0e10 8602 430d 066e 0c07 0800 0000  .A....C..n......
00000140: 1c00 0000 3c00 0000 0000 0000 4900 0000  ....<.......I...
00000150: 0041 0e10 8602 430d 0602 440c 0708 0000  .A....C...D.....
00000160: 1c00 0000 5c00 0000 0000 0000 1500 0000  ....\...........
00000170: 0041 0e10 8602 430d 0650 0c07 0800 0000  .A....C..P......
00000180: 0000 0000 0000 0000 0000 0000 0000 0000  ................
00000190: 0000 0000 0000 0000 0100 0000 0400 f1ff  ................
000001a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
000001b0: 0000 0000 0300 0100 0000 0000 0000 0000  ................
000001c0: 0000 0000 0000 0000 0000 0000 0300 0300  ................
000001d0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
000001e0: 0000 0000 0300 0400 0000 0000 0000 0000  ................
000001f0: 0000 0000 0000 0000 0000 0000 0300 0500  ................
00000200: 0000 0000 0000 0000 0000 0000 0000 0000  ................
00000210: 0800 0000 0100 0500 0000 0000 0000 0000  ................
00000220: 0100 0000 0000 0000 2300 0000 0100 0400  ........#.......
00000230: 0000 0000 0000 0000 0100 0000 0000 0000  ................
00000240: 3200 0000 0200 0100 3300 0000 0000 0000  2.......3.......
00000250: 4900 0000 0000 0000 6200 0000 0200 0100  I.......b.......
00000260: 7c00 0000 0000 0000 1500 0000 0000 0000  |...............
00000270: 0000 0000 0300 0600 0000 0000 0000 0000  ................
00000280: 0000 0000 0000 0000 0000 0000 0300 0900  ................
00000290: 0000 0000 0000 0000 0000 0000 0000 0000  ................
000002a0: 0000 0000 0300 0a00 0000 0000 0000 0000  ................
000002b0: 0000 0000 0000 0000 0000 0000 0300 0800  ................
000002c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
000002d0: 7100 0000 1200 0100 0000 0000 0000 0000  q...............
000002e0: 3300 0000 0000 0000 7600 0000 1000 0000  3.......v.......
000002f0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
00000300: 8000 0000 1000 0000 0000 0000 0000 0000  ................
00000310: 0000 0000 0000 0000 9600 0000 1000 0000  ................
00000320: 0000 0000 0000 0000 0000 0000 0000 0000  ................
00000330: ce00 0000 1000 0000 0000 0000 0000 0000  ................
00000340: 0000 0000 0000 0000 0901 0000 1000 0000  ................
00000350: 0000 0000 0000 0000 0000 0000 0000 0000  ................
00000360: 1a01 0000 1000 0000 0000 0000 0000 0000  ................
00000370: 0000 0000 0000 0000 3201 0000 1002 0000  ........2.......
00000380: 0000 0000 0000 0000 0000 0000 0000 0000  ................
00000390: 3f01 0000 1000 0000 0000 0000 0000 0000  ?...............
000003a0: 0000 0000 0000 0000 5701 0000 1000 0000  ........W.......
000003b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
000003c0: 0074 6573 742e 6300 5f5a 5374 4c31 3970  .test.c._ZStL19p
000003d0: 6965 6365 7769 7365 5f63 6f6e 7374 7275  iecewise_constru
000003e0: 6374 005f 5a53 744c 385f 5f69 6f69 6e69  ct._ZStL8__ioini
000003f0: 7400 5f5a 3431 5f5f 7374 6174 6963 5f69  t._Z41__static_i
00000400: 6e69 7469 616c 697a 6174 696f 6e5f 616e  nitialization_an
00000410: 645f 6465 7374 7275 6374 696f 6e5f 3069  d_destruction_0i
00000420: 6900 5f47 4c4f 4241 4c5f 5f73 7562 5f49  i._GLOBAL__sub_I
00000430: 5f6d 6169 6e00 5f5a 5374 3463 6f75 7400  _main._ZSt4cout.
00000440: 5f47 4c4f 4241 4c5f 4f46 4653 4554 5f54  _GLOBAL_OFFSET_T
00000450: 4142 4c45 5f00 5f5a 5374 6c73 4953 7431  ABLE_._ZStlsISt1
00000460: 3163 6861 725f 7472 6169 7473 4963 4545  1char_traitsIcEE
00000470: 5253 7431 3362 6173 6963 5f6f 7374 7265  RSt13basic_ostre
00000480: 616d 4963 545f 4553 355f 504b 6300 5f5a  amIcT_ES5_PKc._Z
00000490: 5374 3465 6e64 6c49 6353 7431 3163 6861  St4endlIcSt11cha
000004a0: 725f 7472 6169 7473 4963 4545 5253 7431  r_traitsIcEERSt1
000004b0: 3362 6173 6963 5f6f 7374 7265 616d 4954  3basic_ostreamIT
000004c0: 5f54 305f 4553 365f 005f 5a4e 536f 6c73  _T0_ES6_._ZNSols
000004d0: 4550 4652 536f 535f 4500 5f5a 4e53 7438  EPFRSoS_E._ZNSt8
000004e0: 696f 735f 6261 7365 3449 6e69 7443 3145  ios_base4InitC1E
000004f0: 7600 5f5f 6473 6f5f 6861 6e64 6c65 005f  v.__dso_handle._
00000500: 5a4e 5374 3869 6f73 5f62 6173 6534 496e  ZNSt8ios_base4In
00000510: 6974 4431 4576 005f 5f63 7861 5f61 7465  itD1Ev.__cxa_ate
00000520: 7869 7400 0000 0000 0700 0000 0000 0000  xit.............
00000530: 0200 0000 0500 0000 fdff ffff ffff ffff  ................
00000540: 0e00 0000 0000 0000 0200 0000 0f00 0000  ................
00000550: fcff ffff ffff ffff 1300 0000 0000 0000  ................
00000560: 0400 0000 1100 0000 fcff ffff ffff ffff  ................
00000570: 1d00 0000 0000 0000 2a00 0000 1200 0000  ........*.......
00000580: fcff ffff ffff ffff 2800 0000 0000 0000  ........(.......
00000590: 0400 0000 1300 0000 fcff ffff ffff ffff  ................
000005a0: 5300 0000 0000 0000 0200 0000 0400 0000  S...............
000005b0: fcff ffff ffff ffff 5800 0000 0000 0000  ........X.......
000005c0: 0400 0000 1400 0000 fcff ffff ffff ffff  ................
000005d0: 5f00 0000 0000 0000 0200 0000 1500 0000  _...............
000005e0: fcff ffff ffff ffff 6600 0000 0000 0000  ........f.......
000005f0: 0200 0000 0400 0000 fcff ffff ffff ffff  ................
00000600: 6d00 0000 0000 0000 2a00 0000 1600 0000  m.......*.......
00000610: fcff ffff ffff ffff 7500 0000 0000 0000  ........u.......
00000620: 0400 0000 1700 0000 fcff ffff ffff ffff  ................
00000630: 0000 0000 0000 0000 0100 0000 0200 0000  ................
00000640: 7c00 0000 0000 0000 2000 0000 0000 0000  |....... .......
00000650: 0200 0000 0200 0000 0000 0000 0000 0000  ................
00000660: 4000 0000 0000 0000 0200 0000 0200 0000  @...............
00000670: 3300 0000 0000 0000 6000 0000 0000 0000  3.......`.......
00000680: 0200 0000 0200 0000 7c00 0000 0000 0000  ........|.......
00000690: 002e 7379 6d74 6162 002e 7374 7274 6162  ..symtab..strtab
000006a0: 002e 7368 7374 7274 6162 002e 7265 6c61  ..shstrtab..rela
000006b0: 2e74 6578 7400 2e64 6174 6100 2e62 7373  .text..data..bss
000006c0: 002e 726f 6461 7461 002e 7265 6c61 2e69  ..rodata..rela.i
000006d0: 6e69 745f 6172 7261 7900 2e63 6f6d 6d65  nit_array..comme
000006e0: 6e74 002e 6e6f 7465 2e47 4e55 2d73 7461  nt..note.GNU-sta
000006f0: 636b 002e 7265 6c61 2e65 685f 6672 616d  ck..rela.eh_fram
00000700: 6500 0000 0000 0000 0000 0000 0000 0000  e...............
00000710: 0000 0000 0000 0000 0000 0000 0000 0000  ................
00000720: 0000 0000 0000 0000 0000 0000 0000 0000  ................
00000730: 0000 0000 0000 0000 0000 0000 0000 0000  ................
00000740: 0000 0000 0000 0000 2000 0000 0100 0000  ........ .......
00000750: 0600 0000 0000 0000 0000 0000 0000 0000  ................
00000760: 4000 0000 0000 0000 9100 0000 0000 0000  @...............
00000770: 0000 0000 0000 0000 0100 0000 0000 0000  ................
00000780: 0000 0000 0000 0000 1b00 0000 0400 0000  ................
00000790: 4000 0000 0000 0000 0000 0000 0000 0000  @...............
000007a0: 2805 0000 0000 0000 0801 0000 0000 0000  (...............
000007b0: 0c00 0000 0100 0000 0800 0000 0000 0000  ................
000007c0: 1800 0000 0000 0000 2600 0000 0100 0000  ........&.......
000007d0: 0300 0000 0000 0000 0000 0000 0000 0000  ................
000007e0: d100 0000 0000 0000 0000 0000 0000 0000  ................
000007f0: 0000 0000 0000 0000 0100 0000 0000 0000  ................
00000800: 0000 0000 0000 0000 2c00 0000 0800 0000  ........,.......
00000810: 0300 0000 0000 0000 0000 0000 0000 0000  ................
00000820: d100 0000 0000 0000 0100 0000 0000 0000  ................
00000830: 0000 0000 0000 0000 0100 0000 0000 0000  ................
00000840: 0000 0000 0000 0000 3100 0000 0100 0000  ........1.......
00000850: 0200 0000 0000 0000 0000 0000 0000 0000  ................
00000860: d100 0000 0000 0000 0e00 0000 0000 0000  ................
00000870: 0000 0000 0000 0000 0100 0000 0000 0000  ................
00000880: 0000 0000 0000 0000 3e00 0000 0e00 0000  ........>.......
00000890: 0300 0000 0000 0000 0000 0000 0000 0000  ................
000008a0: e000 0000 0000 0000 0800 0000 0000 0000  ................
000008b0: 0000 0000 0000 0000 0800 0000 0000 0000  ................
000008c0: 0800 0000 0000 0000 3900 0000 0400 0000  ........9.......
000008d0: 4000 0000 0000 0000 0000 0000 0000 0000  @...............
000008e0: 3006 0000 0000 0000 1800 0000 0000 0000  0...............
000008f0: 0c00 0000 0600 0000 0800 0000 0000 0000  ................
00000900: 1800 0000 0000 0000 4a00 0000 0100 0000  ........J.......
00000910: 3000 0000 0000 0000 0000 0000 0000 0000  0...............
00000920: e800 0000 0000 0000 1b00 0000 0000 0000  ................
00000930: 0000 0000 0000 0000 0100 0000 0000 0000  ................
00000940: 0100 0000 0000 0000 5300 0000 0100 0000  ........S.......
00000950: 0000 0000 0000 0000 0000 0000 0000 0000  ................
00000960: 0301 0000 0000 0000 0000 0000 0000 0000  ................
00000970: 0000 0000 0000 0000 0100 0000 0000 0000  ................
00000980: 0000 0000 0000 0000 6800 0000 0100 0000  ........h.......
00000990: 0200 0000 0000 0000 0000 0000 0000 0000  ................
000009a0: 0801 0000 0000 0000 7800 0000 0000 0000  ........x.......
000009b0: 0000 0000 0000 0000 0800 0000 0000 0000  ................
000009c0: 0000 0000 0000 0000 6300 0000 0400 0000  ........c.......
000009d0: 4000 0000 0000 0000 0000 0000 0000 0000  @...............
000009e0: 4806 0000 0000 0000 4800 0000 0000 0000  H.......H.......
000009f0: 0c00 0000 0a00 0000 0800 0000 0000 0000  ................
00000a00: 1800 0000 0000 0000 0100 0000 0200 0000  ................
00000a10: 0000 0000 0000 0000 0000 0000 0000 0000  ................
00000a20: 8001 0000 0000 0000 4002 0000 0000 0000  ........@.......
00000a30: 0d00 0000 0e00 0000 0800 0000 0000 0000  ................
00000a40: 1800 0000 0000 0000 0900 0000 0300 0000  ................
00000a50: 0000 0000 0000 0000 0000 0000 0000 0000  ................
00000a60: c003 0000 0000 0000 6401 0000 0000 0000  ........d.......
00000a70: 0000 0000 0000 0000 0100 0000 0000 0000  ................
00000a80: 0000 0000 0000 0000 1100 0000 0300 0000  ................
00000a90: 0000 0000 0000 0000 0000 0000 0000 0000  ................
00000aa0: 9006 0000 0000 0000 7200 0000 0000 0000  ........r.......
00000ab0: 0000 0000 0000 0000 0100 0000 0000 0000  ................
00000ac0: 0000 0000 0000 0000                      ........ 
```

这些指令对应于 x86_64 机器。如果您有兴趣跟随和匹配操作码，您可以[查看此参考资料](http://ref.x86asm.net/geek64.html)或[下载英特尔手册](https://software.intel.com/en-us/articles/intel-sdm)以了解完整性。同样，它是一个[ELF](https://en.wikipedia.org/wiki/Executable_and_Linkable_Format)文件，因此您可以观察到我们看到了我们期望的东西（即 的起始幻数`0x7f`等）。

在任何情况下，一旦与系统链接（即 run`g++ test.cpp`或`g++ test.s`or `g++ test.o`），这个可执行文件就会直接在您的操作系统之上运行。这和操作系统之间没有额外的翻译层。即便如此，操作系统仍然在做操作系统的事情，比如抽象硬件接口、管理系统资源等。

将其与原始问题联系起来，输出二进制文件在 Windows 机器上看起来会非常不同（对于相同的 C++ 代码）。至少，在 Windows 机器上，您会希望看到明显不是 ELF的[可移植可执行 (PE) 格式的文件。](https://en.wikipedia.org/wiki/Portable_Executable)

这与以下需要 JVM 运行的 Java 示例不同：

**Java Source File** 这被放置在一个名为`Test.java`

```
package mytest;

public class Test {
  public static void main(String[] args) {
    System.out.println("Hello world!");
  }
} 
```

**Java Byte Code (Generated from Java Source)** 这是通过运行`javac -d . Test.java`和运行输出文件（即`mytest/Test.class`）生成的`xxd`

```
00000000: cafe babe 0000 0034 001d 0a00 0600 0f09  .......4........
00000010: 0010 0011 0800 120a 0013 0014 0700 1507  ................
00000020: 0016 0100 063c 696e 6974 3e01 0003 2829  .....<init>...()
00000030: 5601 0004 436f 6465 0100 0f4c 696e 654e  V...Code...LineN
00000040: 756d 6265 7254 6162 6c65 0100 046d 6169  umberTable...mai
00000050: 6e01 0016 285b 4c6a 6176 612f 6c61 6e67  n...([Ljava/lang
00000060: 2f53 7472 696e 673b 2956 0100 0a53 6f75  /String;)V...Sou
00000070: 7263 6546 696c 6501 0009 5465 7374 2e6a  rceFile...Test.j
00000080: 6176 610c 0007 0008 0700 170c 0018 0019  ava.............
00000090: 0100 0c48 656c 6c6f 2077 6f72 6c64 2107  ...Hello world!.
000000a0: 001a 0c00 1b00 1c01 000b 6d79 7465 7374  ..........mytest
000000b0: 2f54 6573 7401 0010 6a61 7661 2f6c 616e  /Test...java/lan
000000c0: 672f 4f62 6a65 6374 0100 106a 6176 612f  g/Object...java/
000000d0: 6c61 6e67 2f53 7973 7465 6d01 0003 6f75  lang/System...ou
000000e0: 7401 0015 4c6a 6176 612f 696f 2f50 7269  t...Ljava/io/Pri
000000f0: 6e74 5374 7265 616d 3b01 0013 6a61 7661  ntStream;...java
00000100: 2f69 6f2f 5072 696e 7453 7472 6561 6d01  /io/PrintStream.
00000110: 0007 7072 696e 746c 6e01 0015 284c 6a61  ..println...(Lja
00000120: 7661 2f6c 616e 672f 5374 7269 6e67 3b29  va/lang/String;)
00000130: 5600 2100 0500 0600 0000 0000 0200 0100  V.!.............
00000140: 0700 0800 0100 0900 0000 1d00 0100 0100  ................
00000150: 0000 052a b700 01b1 0000 0001 000a 0000  ...*............
00000160: 0006 0001 0000 0003 0009 000b 000c 0001  ................
00000170: 0009 0000 0025 0002 0001 0000 0009 b200  .....%..........
00000180: 0212 03b6 0004 b100 0000 0100 0a00 0000  ................
00000190: 0a00 0200 0000 0500 0800 0600 0100 0d00  ................
000001a0: 0000 0200 0e                             ..... 
```

正如所料，字节码输出[以 0xCAFEBABE 开头](https://en.wikipedia.org/wiki/Java_class_file#File_layout_and_structure)。

然而，这里的关键区别是该代码不能直接运行。它仍然是二进制输出，但不打算由操作系统直接执行。如果您尝试在系统上没有 JVM 的情况下运行它，您只会得到一个错误。但是，此代码可以在包含*兼容*JVM的*任何*操作系统上运行。兼容的 JVM 集取决于您如何[设置 source 和 target](https://docs.oracle.com/javase/8/docs/technotes/tools/windows/javac.html)。默认情况下，它等同于您用于编译的 Java 版本。在这种情况下，我使用了 Java 8。

 *其工作方式是专门为每个系统编译 JVM（类似于上面的 C++ 示例），*并将*其二进制 Java 字节码转换为您的系统现在可以执行的内容。

归根结底，没有免费的午餐——正如 DanielKO 在评论中提到的，JVM 仍然是一个“平台”，但它比操作系统高一级，因此它看起来更便携。最终，在此过程中，代码必须转换为对您的特定操作系统系列和 CPU 架构有效的指令。但是，在 Java 和 JVM 的情况下，您只需为所有系统风格编译**一个应用程序**（即 JVM 本身）。那时，可以说，在 JVM 之上编写的所有内容都具有“免费”的系统支持（只要您的应用程序完全用 Java 编写并且不使用本机接口等）。

正如我之前提到的，这些信息有很多警告:) 这是一个非常简单的示例，旨在说明您可能实际观察到的内容。也就是说，我们没有涉及调用本机代码、使用自定义 JVM 代理或其他任何可能稍微影响这个答案的东西。然而，总的来说，这些更经常属于“特殊情况”的类别，除非您了解原因以及（希望）它们对可移植性的影响，否则您不会经常使用这些东西。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-08-04T17:22:37.943

C++ 不依赖于平台——事实上，所有供应商都试图实现一个标准。您的意思是生成的 EXECUTABLE 是平台相关的。这是因为每个操作系统对有效可执行文件的构成都有不同的定义和要求。此外，每个操作系统都有一组不同的 API，用于实现需要由 C++ 链接器和编译器链接的核心服务。但这与 C++ 作为一种语言无关。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-04T17:22:29.893

使诸如 C++ 之类的语言“独立于平台”的原因在于，它不依赖于给定 CPU 体系结构所青睐的语言结构。例如，汇编语言相对于 CPU 架构和指令集来说是非常特定的。对于它所针对的任何计算平台，C++ 编译器的前端（解析和语义分析）可以相同或基本相同。然而，仍然需要一个特定于平台或 CPU 的代码生成器（例如，用于 x86、ARM 等）。

EXE 是专门为 DOS/Windows 平台编译和代码生成的二进制文件。它的结构是 DOS/Windows 系统已知的，它包含有关如何在内存中定位可执行文件的信息以及特定于 CPU/平台以使其运行的所有指令代码。正如 Oleksandr 所指出的，它的具体格式可以在例如维基百科上找到。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-08-12T03:49:24.750

实际上 C++ 不依赖于平台，但它产生的输出是 .exe 或其他格式，这取决于您使用的平台。所以简单地说C++的代码是独立于平台的，只是编译后的输出是依赖的。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-08-04T17:22:54.120

C++ 本身不依赖于平台，但可以通过调用仅 Windows 和/或 Linux 的 API 来使用 C++ 编写依赖于平台的代码。如果您使用仅限 Microsoft 的 C++ 扩展等，也可能被锁定到特定平台。

给定平台的可执行格式是完全不同的联盟。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-12-11T14:41:32.197

这个问题涉及的任何编程语言（例如 C++）都有两个重要方面：

1.  你如何告诉计算机做你想做的事。
2.  计算机如何执行您告诉它的操作。

第二个方面*总是*依赖于平台的，因为计算机必须使用在该计算机的特定处理器架构和操作系统上工作的机器代码、系统库等。

第一个方面可能依赖于平台，也可能不依赖于平台，具体取决于语言和您使用它的方式。

所以 *.exe 文件是一个依赖于平台的东西，因为它准确地说明了计算机将如何做你告诉它做的事情。但是 *.exe 文件不是 C++；它可能是从其他一些编程语言编译而来的。

C++ 程序可能依赖于平台，也可能不依赖于平台。如果您在 Windows 上调用编译器提供的函数而不是在其他操作系统中提供的函数，那么您的 C++ 程序将仅在 Windows 上编译。那是平台依赖。但是如果你避免调用那些依赖于平台的函数，你可以在任何地方编译 C++ 程序。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-08-04T18:19:03.707

C++ 不依赖于平台。

除了 Windows，还有其他平台。

除了运行 Windows 的 X86 或 Pentium 之外，还有其他处理器。

这是一个称为“嵌入式系统”的领域，它在许多其他种类和品牌的操作系统和处理器上使用 C++ 语言。例如，有 DSP、老式的 8051 和 ARM 系列。

发明高级语言的原因是程序可以编写一次，但可以编译（翻译）到其他平台。例如，可以为 PDP 机器、Windows、Mac、Unix、Vrtx、Windriver、ARM 处理器编译独立于平台的 C++ 程序，所有这些都无需更改程序。

一般来说，可执行文件是平台相关的。*

# ruby-on-rails - 如何使用设计：可记忆？

> ID：11810486
> 
> 赞同：17
> 
> 时间：2012-08-04T17:14:58.533
> 
> 标签：ruby-on-rails, devise, remember-me

我正在制作一个 Rails 应用程序。
我想实现一个复选框“记住我”，以便用户下次使用 Devise:rememberable 跳过输入密码。但我不知道如何实现。
如果您对此有任何想法，请向我展示一些示例代码。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-04T17:28:28.240

`:rememberable`在您的用户模型中添加选项

```
class User < ActiveRecord::Base

  devise :database_authenticatable, :registerable, :recoverable, :rememberable, :trackable,
         :validatable, :token_authenticatable, :lockable, :omniauthable

  # ...

end 
```

创建迁移以`remember_created_at`在用户表中添加列

```
class AddRememberCreatedAtToUsers < ActiveRecord::Migration
  def change
    add_column :users, :remember_created_at, :datetime
  end
end 
```

如果您不使用设计默认视图，请将复选框添加到您的视图中：

```
<%= f.check_box :remember_me %> <%= f.label :remember_me %> 
```

我想这就是你所需要的...

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-02-26T20:33:41.427

如果您编写自己的身份验证策略，您可能会遇到可记忆的问题。您的身份验证返回的资源对象（例如`User`）！方法需要负责设置`resource.remember_me`来自表单的数据。这通常由父 Authenticable 的[validate](https://github.com/plataformatec/devise/blob/master/lib/devise/strategies/authenticatable.rb#L28-L45)方法处理。如果您不使用此方法，则必须自己设置。

# package - 我在哪里可以下载原始 java 包并添加到我的项目中？

> ID：11810488
> 
> 赞同：0
> 
> 时间：2012-08-04T17:15:23.100
> 
> 标签：package, java

考虑以下情况，我在受限的 java 环境中工作，在这种情况下我没有 javax 包。但是我的项目严格需要这些包。

此外，该环境允许我在自己的项目空间中添加新库。

那么有什么方法可以下载 javax 包并将其添加到我的项目中吗？如果可能，请列出执行此操作的步骤。

编辑：这个问题更相关。**Google App Engine**有自己的可供使用**的 Java 类白名单。**实际上，它错过了某些项目所需的一些课程。在这些情况下，是否可以将**特定类作为库添加到我们的项目中**？如果是这样，我们如何获取类文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T17:24:45.463

好的，你去吧，所有的java**包**都在一个`jar`名为`rt.jar`的目录`jdk_install/jre/lib/rt.jar`中，它在包含**所有****包**的目录中，`javax`也是的..为了你的`import`工作`jar`

为此`import`，`jar`创建一个具有**名称** `lib`的文件夹并将其`rt.jar`和所有`api`内容放在其中，然后将该文件夹**与您的 jar 存档一起**放置，您就可以运行了。

# c++ - C++/AS3 winsock send() 不会在 else if 语句中写入

> ID：11810489
> 
> 赞同：0
> 
> 时间：2012-08-04T17:15:34.077
> 
> 标签：c++, actionscript-3, network-programming, winsock2

所以，我有一个服务器/客户端应用程序，在客户端需要登录到服务器的代码中的特定点，所以服务器从客户端请求用户名和密码（然后检查它并等等等等）

这是我的代码，客户端（AS3）

```
function hwndLogKeyboard(evt:KeyboardEvent):void
{
    if (evt.keyCode == 13)
    {
        var allow:Boolean = false;
        var prompt:String;

        socket.writeMultiByte("002", "us-ascii");
        socket.writeByte(0);
        socket.flush();

        while (socket.bytesAvailable == 0)
        {
            trace("waiting for bytes to read");
        }

        prompt = socket.readMultiByte(2, "us-ascii"); //YOU WERE MISSING ); here originally updated as I was formatting, probably just copy paste error
        trace(prompt);
        if (prompt == "UN")//server has prompted for username information, time to send it
          {  
            socket.writeMultiByte(inputname.text, "us-ascii");
            socket.flush();

            prompt = socket.readMultiByte(2, "us-ascii");

            if (prompt == "PW")//server has prompted for password information, time to send it
              {
                 socket.writeMultiByte(inputpass.text, "us-ascii");
                 socket.writeByte(0);
                 socket.flush();
             }
         }

        //more code in here that i have commented out until this issue is resolved

    } 
```

和服务器端（我肯定问题正在发生，用 C++ 编写）

```
if(testr >= 0)
{
    string dataR = string(buffer);
    //data was recived from a client - analize the data to find out what it means
    //signals are in the format "xxx" where 'x' is an int between 0-9

    if(dataR == "001")
    {
        cout << "A new client has connected" << endl;
    }
    else if(dataR == "002")//002 is a client attempting to log-on to the server
    {
        cout << "Client requesting log-on" << endl;
        char recvUsername[16];
        const char requestUsername[3] = "UN";
        char recvPassword[16];
        const char requestPassword[3] = "PW";

        send(Client,requestUsername,3,0);//request username from client

        recv(Client,recvUsername,16,0);//got username, now time to request password

        send(Client,requestPassword,16,0);//request password from client

        recv(Client,recvPassword,3,0);//got password, now time to compare them against current records

        cout << recvUsername << endl << recPassword << endl;
    }
    else if(dataR == "003")
    {
        cout << "A client has used chat" << endl;
    }
}
else
{
    cout << "error" << endl << testr << endl << WSAGetLastError << endl;
} 
```

起初我认为这是一个时间问题，也许客户端在服务器可以写入之前从缓冲区读取，因为 AS3 崩溃是因为读取缓冲区是空的！

但是，这是诀窍，我可以将我的移动`send(Client,requestUsername,3,0)`到`if(dataR == "001")`块内，它工作正常。闪存在寻找数据时可以读取数据。事实上，在客户端的套接字创建之后，我几乎可以将该发送语句放在我的服务器中的任何位置，并且它可以工作，只是不是我需要它的地方。

这就是为什么我添加了

```
while (socket.bytesAvailable == 0)
{                                   
    trace("waiting for bytes to read");
} 
```

在客户端中，这样它就会一直循环，直到有数据要读取，如果这是问题所在，我会重新编写一些东西来避免那个讨厌的`while`循环必须在那里。我不明白的是它进入了一个无限循环，用跟踪语句淹没了我。服务器不会将数据写入套接字，而是从代码中的其他任何地方写入数据。我没有收到任何错误，没有编译器投诉，它没有超出范围或类似的东西，这里有些奇怪。

非常感谢您的帮助-泰勒

仍然有这个问题，它在代码中的其他任何地方都可以使用，除了“else if”块内，我完全被难住了。

# c# - 防止复制文本框值

> ID：11810494
> 
> 赞同：0
> 
> 时间：2012-08-04T17:15:57.247
> 
> 标签：c#, winforms

我有 2 个问题。首先，我想做一些类似下面的代码来阻止（CTRL + C）在文本框中但它不起作用。它不会在消息框中显示任何内容。

第二个问题是当用户按下（ CTRL + C ）时我怎么能做某事，什么都不会保存在剪贴板或按下后自动删除值（ CTRL + C ）

这是代码：

```
 private void textBox1_KeyDown(object sender, KeyEventArgs e)
    {
        if (e.KeyCode == Keys.C && e.KeyCode == Keys.LControlKey)
        {
            MessageBox.Show("NOT ALLOWED");
        }

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T17:17:49.303

您正在将`KeyCode`for 相等性与两个不同的值进行比较，并且永远不会两者兼而有之。我认为您的意思是检查`Control`：

```
if(e.KeyCode == Keys.C && e.Control) {
    MessageBox.Show("NOT ALLOWED");
} 
```

至于停止复制操作，应该很简单：

```
e.SuppressKeyPress = true; 
```

您可以随时使用以下命令清除剪贴板：

```
Clipboard.Clear(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T17:22:51.320

您可以使用系统级键盘挂钩来拦截键盘敲击的任何组合。

键盘挂钩函数是用 .net 中的 VC++ 编写的。但是对于在 c# 中使用，有基于 pinvoke 的包装器库。

在 .net 中搜索键盘挂钩。

有两种类型的钩子：应用程序级别和系统级别。根据您的要求，您可以做出正确的选择。

我希望这可以帮助您进一步进行。

# c# - 嵌套的 foreach 循环停止重复

> ID：11810501
> 
> 赞同：0
> 
> 时间：2012-08-04T17:17:00.047
> 
> 标签：c#, asp.net-mvc, razor, foreach

看看下面的代码。我在另一个循环中有一个 foreach 循环，但是当我运行页面行时重复。有没有办法停止重复行。这是代码和结果：

```
![<div class="itemContent">
<table cellspacing="0" cellpadding="0" class="productspecstable" style="float: right">
    <tbody>
        <!-- B:07L -->
        @foreach(var row in select)
        {
            foreach(var rows in selects)
            {
                <tr>
                    <td>@rows.Specifications</td>
                    <th>@row.LaptopOptions</th>
                </tr>
            } 
        }
   </tbody>
</table>
</div> 
```

![在此处输入图像描述](../Images/c421074baf6e51b7916c01f8af42439c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T17:36:26.713

我不完全确定您要通过最终布局实现什么，但从您的图像来看，我认为您正在寻找类似于显示规范标题的内容，然后是所有笔记本电脑选项。如果是这种情况，那么您将需要类似的东西：

```
@foreach(var row in select){

    <tr>
        <th>@row.LaptopOptions</th>
    </tr>

    foreach(var rows in selects){

        <tr>
            <td>@rows.Specifications</td>
        </tr>

    } 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T17:32:25.953

对于外循环的每次迭代，重复内循环。但是，您不能在两个列表上同步迭代，因为 foreach 只关心一个，并且在该循环中，您并不真正知道您在列表中的哪个位置（因此您无法与第二个列表同步）。

可能的解决方案：

1) 如果可以使用索引访问 select[s]，请使用一个 for 循环来遍历两者（前提是它们的排序方式相同）：

```
for(int idx=0;idx<select.Count;idx++)
{
  ...
  @select[idx].Specifications
  ...
  @selects[idx].LaptopOptions
  ...
} 
```

2）尝试减少到​​一个选择有几个值（在发布代码之前的代码中），那么你只需要一个foreach循环：

```
foreach (var row in select)
{
  ...
  @row.Specifications
  ...
  @row.LaptopOptions
  ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T17:35:52.563

内循环必须是您的外循环，因为笔记本电脑选项可以有多个规格

```
 foreach(var rows in selects){
foreach(var row in select){ 
```

# android - 是否可以调试基于 NativeActivity 的应用程序？

> ID：11810502
> 
> 赞同：1
> 
> 时间：2012-08-04T17:17:27.550
> 
> 标签：android, android-ndk

要使用 gdb 在 android 应用程序中调试本机代码，首先我需要启动我的基于 sdk 的应用程序并在使用本机代码加载库之前在断点处停止它，之后我需要启动 gdb，等等...但是怎么样基于 NativeActivity 的应用程序没有任何 java 代码和库加载点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T17:54:53.440

您可以为此使用[DS-5 调试器](http://ds.arm.com/ds-5/)。我用了很长时间，它工作正常。

# algorithm - 排序中的运行时间复杂度与空间复杂度

> ID：11810503
> 
> 赞同：1
> 
> 时间：2012-08-04T17:17:33.427
> 
> 标签：algorithm, asymptotic-complexity

我对算法很陌生，我有一些问题。假设我有一个排序算法，它以 O(n^2) 对数据进行排序，运行时间复杂度很高。例如，这可能是选择排序。现在，假设我没有使用选择排序，而是使用 HashTable，它将运行时间减少到 O(n)。

*   **额外的空间复杂度对运行时间分析有影响吗？**
*   **在陈述答案时，我如何定义这两者之间的关系？**
*   **还是它们完全不同？**

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T18:02:59.497

如果您的分析重点是算法的**时间复杂度**，您应该只关注每个操作的**时间**成本。

如果您的分析侧重于算法的**时间和空间复杂性**，那么您应该关注每个操作的**时间成本以及数据结构的****空间**成本。

由于**时间和空间是不同的资源**，时间和空间分析应该分开进行。

* * *

也就是说，存在**[时空权衡](http://en.wikipedia.org/wiki/Space%E2%80%93time_tradeoff)的关键概念。** 简而言之，可以用空间修改给定的算法交易时间，反之亦然。

**例如，您可以通过引入一些复杂且占用空间但速度快的数据结构来降低时间复杂度**。这将是时间 -> 空间权衡的一个示例，因为我们以增加内存使用为代价来加速我们的算法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T18:14:06.273

如果是理论算法理论中的运行时间分析，空间复杂度对运行时间复杂度没有影响。因为当我们谈论时间复杂度时，我们谈论的是 **[图灵机](http://www.cs.odu.edu/~toida/nerzic/390teched/tm/definitions.html)上程序的时间复杂度，它具有无限的内存**。

空间和时间的权衡仅适用于应用程序。请参阅@Haile 的帖子以供参考。

# php - XML 属性和 PHP

> ID：11810505
> 
> 赞同：0
> 
> 时间：2012-08-04T17:17:55.750
> 
> 标签：php, xml, xml-parsing, simplexml

> **可能重复：**
> [使用 SimpleXML 使用命名空间解析 XML](https://stackoverflow.com/questions/595946/parse-xml-with-namespace-using-simplexml)

如何从下面的 XML 代码中获取秒的属性值：

```
<yt:duration seconds='12445'/> 
```

是否可以使用simplexml。

谢谢

# php - 使用 cUrl 获取 html 源代码的特定部分 - 检索正确内容的 cUrl 问题 curl_setopt($ch, CURLOPT_URL,$url);

> ID：11810506
> 
> 赞同：-1
> 
> 时间：2012-08-04T17:17:58.567
> 
> 标签：php, html, curl, get

> **可能重复：**
> [如何使用 PHP 解析和处理 HTML？](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php)

我正在用不同产品的演示文稿构建我的网站，我在使用 curl 时遇到了一些问题，基本上我需要做的是从不同的网站获取 html 的某些部分并显示在我的网站上，例如：标题、型号、描述、用户评论等....我设法完成了一些代码，但是在更改源网址时停止工作...即使源代码与我的代码相同：

```
$url = "http://www.tigerdirect.com/applications/SearchTools/item-details.asp?EdpNo=2819129&CatId=4938";

//$url = "http://www.tigerdirect.com/applications/SearchTools/item-details.asp?EdpNo=1808177&csid=_61"; //this one is not working....

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL,$url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 1);

$source = curl_exec ($ch);

$start_description1 = "</tr>
</tbody>
</table>

<p>";
$end_description1 = "</div>
</div>
<div id=\"Videos\" style=\"display:inline;\">";
$description1_start_pos = strpos($source, $start_description1) + strlen($start_description1);
$description1_end_pos = strpos($source, $end_description1) - $description1_start_pos;
$description1 = substr($source, $description1_start_pos, $description1_end_pos);
echo $description1; 
```

它完美无缺，但如果我更改网址，它将无法正常工作......问题是 start_description html 代码......在其他页面上，html 代码不同......

代替：

```
</tr>
</tbody>
</table>

<p> 
```

新页面有：

```
</tr>
</tbody>
</table>

<p> 
```

或者：

```
</tr>
</tbody>
</table>

<p> 
```

我怎样才能避免这个错误？或者如何避免 cUrl 错误，并检索我想要的内容？

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T18:16:08.887

而不是使用`strpos`，您应该解析 html 并从 html 中获取描述。

对于这个应用程序，我推荐使用[PHP Simple HTML DOM Parser](http://simplehtmldom.sourceforge.net/)。

这是它如何工作的示例：

```
$html = file_get_html('http://www.tigerdirect.com/applications/SearchTools/item-details.asp?EdpNo=1808177&csid=_61');
//fetches html content from the url
$p = $html->find('p', 0);
//fetches the content of the first <p> element.

echo $p-> plaintext; 
```

希望这可以帮助。

# c - 此方法如何计算二进制表示中 1 的数量？

> ID：11810507
> 
> 赞同：6
> 
> 时间：2012-08-04T17:18:03.853
> 
> 标签：c, algorithm, bit-manipulation

> **可能重复：**
> [n & (n-1) 这个表达式有什么作用？](https://stackoverflow.com/questions/4678333/n-n-1-what-does-this-expression-do)

考虑以下算法：

```
int count(int num)
{
  int ones = 0;
  while(num)
  {
    ++ones; 
    num &= num - 1;
  }

  return ones;
} 
```

有什么意义`num & (num-1)`？它是如何工作的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-04T17:35:45.763

这是一个更详细（但写得不是很好！）的答案。

有两种情况：要么设置最低有效位，然后“num-1”取消设置它。或者未设置，则 num-1 将所有尾随零变为 1，将最低有效位 1 变为 0，其余位不变。当您“与”时，所有未更改的位都是相同的，与 0 相加的最低有效 1 变为 0，其他剩余位为零。这在此处进行了说明：

```
num             =      1000110111[1]0000
num - 1         =      1000110111[0]1111
num & (num - 1) =      1000110111[0]0000 
```

我要指出的是，通常有一个组装操作来计算单个循环中的数量。该操作称为“popcount”，例如在 GCC 中，可以使用“__builtin_popcount”访问它，有关详细信息，请参阅[此链接](http://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-04T17:25:57.140

```
num &= num - 1; 
```

清除 num 中设置的最低有效位。

该算法通过清除它们并增加计数器直到它们全部消失来计算设置的位。

要了解为什么它会清除最低有效位，您需要考虑递减对位的作用，当然还要了解`&`操作的作用。

二进制减法就像我们小时候都用十进制教过的过程一样。您从右（最不重要）向左工作，尽可能简单地减去单个数字，并在必要时从下一个数字“借用”。

当从以一组零结尾的二进制数中减去 1 时，这种“借用”和减法会将比最右边的 1 更低位置的所有零变为 1，并将最右边的 1 变为零（因为它是借用的）。

然后应用`&`运算符将​​所有较小的数字保留为零，因为它们在 中为零`num`，并将 的最低有效位设置`num`为零，因为它在 中为零`num-1`。

这两种操作都使较高的有效数字保持不变。

这是一个很好的[小技巧](http://graphics.stanford.edu/~seander/bithacks.html)列表，包括这个，这是由[Brian Kernighan](http://en.wikipedia.org/wiki/Brian_Kernighan)提供的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-04T17:42:55.877

该算法像泵一样运行，有效地将“num”变量中的位移动到右侧。线

```
num &= num - 1; 
```

是完成工作的地方，同时进行赋值和布尔 AND 操作。这都是关于位算术的。

绒球

# php - 将“modal”更改为 Jquery“toggle”之类的东西？

> ID：11810510
> 
> 赞同：1
> 
> 时间：2012-08-04T17:18:20.843
> 
> 标签：php, javascript, jquery, html

我有一个模式，点击时会弹出一些信息，它的外观如下：

```
<a rel="moodalbox 850 300 nofollow" href="<?php echo $infolink;?>" 
```

其中**$infolink**给出了某个页面的链接。

所以我想问的是，是否有可能以某种方式打开它而不是像现在这样在模态框中，而只是出现在网站某处的信息（没有页面重新加载）......？请问有人可以给我一个提示吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T17:22:07.150

您可以使用`preventDefault()`方法：

```
$('a[rel*="moodalbox"]').click(function(event){
   event.preventDefault()
   var href = $(this).attr('href');
   $('#info').text(href)
}) 
```

[演示](http://jsfiddle.net/9Z6XF/)

# iphone - ffmpeg 自动检测人像然后做必要的翻转

> ID：11810512
> 
> 赞同：0
> 
> 时间：2012-08-04T17:18:42.223
> 
> 标签：iphone, rotation, ffmpeg

是否可以让 ffmpeg 检测视频大小，如果它不是横向的，是否可以顺时针旋转 90 度？我在这里找到了一篇文章，但不确定它是否可以自动检测到：[Rotating videos with FFmpeg](https://stackoverflow.com/questions/3937387/rotating-videos-with-ffmpeg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T09:02:47.683

如果您的决定是基于高度和宽度，一个非常简单的 ffmpeg 脚本可以为您执行此操作

ffprobe yourfile

在输出中，您将获得可用于流的高度和宽度参数。对其运行正则表达式。

根据高度和宽度在脚本中决定是否旋转

使用正确的参数调用 ffmpeg。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-18T12:20:08.433

```
-autorotate 
```

> 根据文件元数据自动旋转视频。默认启用，使用`-noautorotate`禁用。

# android - Android：状态栏上的数据

> ID：11810513
> 
> 赞同：0
> 
> 时间：2012-08-04T17:18:42.967
> 
> 标签：android, statusbar

我想开发一个在状态栏中显示数据的应用程序，例如当前的互联网速度。我想每秒更新一次。

我试图使用通知，但我找不到一种方法来显示没有图标的数字并对其进行更新。

有可能做我想做的事吗？我怎样才能实现它？我应该使用哪个类？你有源代码示例吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T17:35:53.040

> 有可能做我想做的事吗？

不是来自 Android SDK 应用程序。定制的 Android 操作系统构建可以做到这一点。SDK 应用程序可以影响状态栏或系统栏的唯一方法是通过`Notification`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T11:27:46.967

这是可能的。我一直在这样做。从 android 市场免费使用 updown 仪表。但是该软件的问题在于它会耗尽您的电池电量。

# ruby - 数组嵌套在 WP API 的哈希中？

> ID：11810514
> 
> 赞同：0
> 
> 时间：2012-08-04T17:18:45.143
> 
> 标签：ruby, wordpress, xml-rpc

这是我的电话：

```
 result = blog.call('wp.newPost',
                   1,
                   'user',
                   'pw',
                   { 
                     'post_type' => 'post', 
                     'post_content' => entry[3], 
                     'post_name' => entry[2].downcase.split(" ").join("-"),
                     'comment_status' => 'closed',
                     'pinged' => 'closed',
                     'post_status' => 'publish',
                     'post_title' => entry[2],
                     'terms' => ['category' => 9]
                   }) 
```

这将返回一个错误，即此帖子类型`post`不支持给定的分类法之一`category`- 好吧，每个帖子都应该有一个类别，所以我认为我的 ruby​​ 格式不正确。API 要求一个数组，其中分类法作为键，其 ID 作为值，我想我已经在这里完成了。

这适用于 v3.4 -[这是 wp.newPost 上的文档](http://codex.wordpress.org/XML-RPC_WordPress_API/Posts#wp.newPost)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T18:23:01.293

有趣的是，以下代码有效：

```
 blogcontent = {
        :post_type => 'post',
        :post_content => entry[3],
        :post_name => entry[2].downcase.split(" ").join("-"), 
        :comment_status => 'closed', 
        :pinged => 'closed',
        :post_status => 'publish',
        :post_title => entry[2],
        :terms =>
            {
                :category => [9]
            }
  } 
```

这将（通过 XMLRPC 编写器）转换为适当的 XML 并在 WordPress 中注册帖子。打开 XML-RPC 调试信息显示，除非变量`9`被括在括号中，否则不会传递结构，即使它是单值数组。

# c - 将 Dijkstra 算法修改为 A* 实现

> ID：11810516
> 
> 赞同：0
> 
> 时间：2012-08-04T17:19:16.207
> 
> 标签：c, implementation, graph-algorithm, dijkstra, a-star

我正在创建一个迷宫模拟老鼠穿过迷宫的过程。Dijkstra 的算法很棒，但在涉及猫时并没有受到特别影响，这就是为什么我试图将现有的 Dijkstra 实现修改为 A* 搜索，并采用启发式方法来避免猫在迷宫中移动。

我在查看一些伪代码时遇到的问题是我不确定哪些结构是等效的，或者我需要引入什么才能使其正常工作。任何人都可以在正确的方向上提供任何提示或推动吗？

```
struct path_node *shortestPath(float A[GsizeSqr][GsizeSqr], int xi, int yi, int xf, int yf)
{
    /*
    Solves for the shortest path between grid point (xi,yi) and (xf,yf)
    on the graph encoded by A using Dijkstra's shortest path method.

    The shortest path is returned as a linked list of nodes to be visited.

    Keep track of visited nodes, and the predecessor
    for each node that has been explored while computing the shortest path.*/

    if (xi<0||xi>=Gsize&&yi<0&&yi>=Gsize||xf<0||xf>=Gsize||yf<0||yf>=Gsize)
    {
        fprintf(stderr,"shortestPath(): Endpoint(s) outside of the graph!\n");
        return(NULL);
    }

    int i, j, pCount, findN, row, col, icnt, stNode, finNode, xcnt, ycnt;
    finNode = yf * ceil(sqrt(GsizeSqr)) + xf; //index of start node given its row and col value
    stNode = yi * ceil(sqrt(GsizeSqr)) + xi; //index of finish node given its row and col value

    int p[GsizeSqr]; //predecessors
    int d[GsizeSqr]; //distance from source
    int flags[GsizeSqr]; //(0, 1) for unvisited, visited)

    int g_score[GsizeSqr];
    int f_score[GsizeSqr];

    PriorityQueue Q; //Initialize priority queue that stores (priority, key) values
    Q = init_heap(GsizeSqr);    

    path_node *start; //Maintain a pointer to the starting node
    start = newPathNode(xi, yi);
    start->next = NULL;

    //Initialize p and d with infinity and NULL values (note: -1 means null and 1000000 means inf)
    for(i=0; i < GsizeSqr; i++){
        p[i] = -1;
        d[i] = 10000000;
        flags[i] = 0;
    }

    for(i=0; i < GsizeSqr; i++){
        node in;
        in = create_node(10000000, i);
        enqueue(Q, in);
    }

    //(Note: PQ uses 0 as a sentinel node to make calculating left, right, and parents easier, elements begin at 1)
    decrease_priority(Q, stNode+1, 0); //setting start node in PQ.
    d[stNode] = 0;

    g_score[stNode] = 0;
    //For my heuristic, I'm thinking just using manhattan distances between mouse and cat agents
    f_score[stNode] = g_score[stNode] + heuristic(xi, yi, xf, yf);

    while(Q->heap_size != 1){ //while Q not empty
        node u;
        u = dequeue(Q);
        flags[u.key] = 1;

        //For each adjacent node A[u.key][i]
        for(i=0; i < GsizeSqr; i++){
            if(A[u.key][i] != 0){
                findN = find_node(Q, i);
                if(flags[i] == 0){ //If it is unvisited and new path distance is shorter
                    if(findN != 0 && (d[i] >= A[u.key][i] + d[u.key])){ //reset values and update PQ and mark visited
                        d[i] = A[u.key][i] + d[u.key];
                        p[i] = u.key;                       
                        flags[i] = 1;
                        decrease_priority(Q, findN, d[i]);
                    }
                }
            }
        }
    }

    // Begin selectively filling our LL with values from p[]
    icnt = finNode;
    appendLL(start, xf, yf);
    while(icnt != stNode){
        icnt = p[icnt];
        xcnt = icnt % (int)ceil(sqrt(GsizeSqr));
        ycnt = icnt / (int)ceil(sqrt(GsizeSqr));
        appendLL(start, xcnt, ycnt);
    }

    clean_heap(Q);
    return reverseLL(start);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T08:55:15.007

您可能已经知道这一点，但 A* 和 Dijkstra 算法在最佳优先搜索方面的唯一理论区别是成本函数 f(n)。Dijkstra 的算法是`f(n) = g(n)`而 A* 是`f(n) = g(n) + h(n)`。阅读[AIMA](http://aima.cs.berkeley.edu/)了解详情。

就您的代码而言，它当前存储`g(n) = A[u.key][i] + d[u.key]`在 中`d[i]`，因此您需要将其更改为存储 g(n) + h(n)。您不需要那些新变量`g_score`和`f_score`变量，只需将启发式添加到该行的末尾并初始化`d[stNode]`.

# c++ - 防止链接器排除未引用的静态

> ID：11810521
> 
> 赞同：0
> 
> 时间：2012-08-04T17:19:37.583
> 
> 标签：c++, visual-studio, visual-studio-2008

我需要将编译时类型信息（名称、字段...）存储在一个可以在运行时迭代的列表中。我想出了一些看起来像这样的东西：

```
#include <stdio.h>

struct Type
{
    const char *m_szName;
    Type *m_pNext;
};

struct TypeList
{
    static Type *ms_pHead;

    static Type *Push(Type *pHead)
    {
        Type *pNext(ms_pHead);
        ms_pHead = pHead;
        return pNext;
    }
};

Type *TypeList::ms_pHead = 0;

template <typename T>
struct TypeHolder
{
    static Type ms_kType;
};

#define _DECLARE_TYPE(_Name) \
    template <> Type TypeHolder<_Name>::ms_kType = {#_Name, TypeList::Push(&ms_kType)};

struct A
{
    float m_fField;
};

_DECLARE_TYPE(unsigned int);
_DECLARE_TYPE(float);
_DECLARE_TYPE(A);

int main()
{
    Type *pType(TypeList::ms_pHead);
    while (pType != 0)
    {
        printf("%s\n", pType->m_szName);
        pType = pType->m_pNext;
    }
    return 0;
} 
```

这样，我需要做的就是声明一个新类型并同时静态注册它是在我的代码中的任何地方使用宏_DECLARE_TYPE。上面的示例将输出：

```
A
float
unsigned int 
```

在 MSVC9 上，一切正常，我得到输出，直到我打开优化，其中包括“消除未引用的数据 (/OPT:REF)”。如果我这样做，上面的程序没有输出。现在我看到代码中没有直接引用 TypeHolder、TypeHolder、TypeHolder，所以我想链接器正在删除它们，而不管它们的初始化可能有什么副作用。我使用静态初始化的原因是它允许我在代码中的任何位置声明和注册一个类型，而无需创建一个我手动调用的大函数

```
TypeList::Push(TypeHolder<unsigned int>::ms_kType);
TypeList::Push(TypeHolder<float>::ms_kType);
TypeList::Push(TypeHolder<A>::ms_kType); 
```

对于每种类型。

另外，我希望我的解决方案能够在各种编译器上工作，因此使用仅适用于 MSVC 甚至关闭优化的非标准 #pragma 指令不是一种选择。

我有什么办法可以避免不得不在一个单独的地方（除了宏内部）手动列出所有类型的麻烦吗？

# c - 为什么当外部 if 不正确时它进入 else 块？

> ID：11810525
> 
> 赞同：-1
> 
> 时间：2012-08-04T17:20:04.980
> 
> 标签：c

这是我的代码：当我的数组输入输入为 10001 时。然后它也进入输入 [1]=0 的 else 块，因为我已经将条件放在外部 if(input[j]==1 ）。任何机构都可以告诉我为什么会这样吗？

```
#include<stdio.h>
int main()
{
        unsigned int tcase=0,build=0,i=0,j=0,k=0,count=0;
        unsigned int input[1000];
        scanf("%d",&tcase);
        while(tcase--)
        {
                scanf("%d",&build);
                for(i=0;i<build;i++)
                        scanf("%d",&input[i]);

                for(j=0;j<build;j++)
                {
                        if(input[j]==1)
                        {
                                if(j==0)
                                {       input[j+1]=1;

                                        printf("fddf");
                                }
                                else if(j==(build-1))
                                {
                                        input[j-1]=1;

                                        printf("Gfgf");
                                }
                                else
                                {
                                        input[j+1]=1;
                                        input[j-1]=1;
                                        printf("awGfgf");
                                }
                        }
                }
                for(k=0;k<build;k++)

               {
                        if(input[k]==0)
                                ++count;
                }
                printf("%d\n",count);
        }
        return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T17:22:21.080

那是因为您正在检查超出数组边界末尾的值，并使用不确定的值测试内存。

您的数组定义为

```
unsigned int input[1000]; 
```

该声明

```
if(input[j]==1) 
```

当 j 为 10001 时，测试超出数组边界末尾的内存*方式。*该内存的价值是不确定的，实际上取决于许多因素。那个内存地址的值是 1 是非常不可能的（事实上，如果内存是真正随机初始化的，机会是 2^32 中的 1）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T19:16:23.307

我将根据您对 Eric J 的回答的评论回答您的问题：

```
J.no u got it wrong by i/p 10001 i mean for input[0]=1,input[1]=0 and so on... so it only occupies 5 array spaces 
```

答案的要点是，您输入的第一个输入 1 会导致条件第一次成功。稍后在每次迭代中，您不断更改输入数组的值，这会导致后续迭代进入条件。

正如您提到的，您的输入是

```
input[0] = 1
input[1] = 0
input[2] = 0
input[3] = 0
input[4] = 1 
```

现在，查看以下代码中的行为：

```
for(j=0;j< build;j++)
{
    if(input[j]==1) /* First for input[0], this condition succeeds */
    {
         if(j==0)
         {
            input[j+1]=1; /* This line changes input[1] to 1, so next time in the loop the condition if(input[j] == 1 will succeed */
            printf("fddf");
         }
         else if(j==(build-1)) /* This condition will cause input[4] to be set to 1 and will cause if(input[j] == 1) to succeed for the last iteration of the loop */
         {
           input[j-1]=1;

           printf("Gfgf");
         }
        else /** This condition will cause input[2] & input[3] to be set to 1 and will again cause if(input[j] == 1) to succeed in successive loop iterations **/
        {
           input[j+1]=1;
           input[j-1]=1;
           printf("awGfgf");
        }
    }
  } 
```

# android - 带有行分隔符的 Android gridview

> ID：11810531
> 
> 赞同：1
> 
> 时间：2012-08-04T17:21:18.550
> 
> 标签：android, gridview

我想使用带有 CursorAdapter 的许多图像的 gridView 以获得最佳性能。有些项目应该彼此分开。最后它应该看起来像[http://code.google.com/p/android-section-list/](http://code.google.com/p/android-section-list/)？但有网格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T17:53:20.293

我认为你可以做到，但你必须实现 Jeff Shrkey 的[分离列表适配器](http://jsharkey.org/blog/2008/08/18/separating-lists-with-headers-in-android-09/)

创建这些分离的列表没有简单的方法，所以我将分离列表适配器放在一起，它可以快速完成。总而言之，我们正在创建一个新的 BaseAdapter，它可以包含其他几个适配器，每个适配器都有自己的节标题。

# java - 记录/记录数据库更新、访问、修改等的最后日期/时间的简单方法

> ID：11810533
> 
> 赞同：0
> 
> 时间：2012-08-04T17:21:30.297
> 
> 标签：java, database, jdbc

我编写了对数据库执行简单/基本操作的 Java/JDBC 代码。我想添加代码，帮助我跟踪该程序何时访问、更新、修改特定数据库等。我正在考虑在我的 DBMS 中创建另一个数据库，其中将为所涉及的每个数据库存储这些详细信息或日志。
这是最好的方法吗？有没有其他方法（最好是简单的）来做到这一点？

编辑-

```
For now, I am using MySQL. But, I also want my code to work with at least 
Oracle SQL and MS-SQL as well. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T17:26:05.277

将“last_modified”列添加到表中然后在表上添加更新触发器以将其设置为数据库当前时间是非常标准的。那么您的应用程序就无需担心了。此外，还经常使用“create_time”，由插入触发器填充。

评论后更新：

似乎您正在寻找审核日志。有些编写应用程序，其中数据操作仅通过存储过程发生，而不是通过插入和更新发生。一个固定的api。所以你想向表中添加一个项目，你调用存储过程：

```
addItem(itemName, itemDescription) 
```

然后 proc 插入到 item 表中并执行必要的日志记录。

另一种技术，如果您使用某种框架进行 jdbc 访问（例如 Spring），则可能是在该层进行拦截。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T18:06:20.053

在几乎所有表格中，我都有以下列：

*   由...制作
*   创建时间

这些列分别具有当前用户和当前时间的默认值。添加行时会填充它们。

这只能解决您的部分问题。您可以开始添加触发器，但这会变得复杂。另一种方法是通过存储过程强制修改访问数据库，然后记录存储过程。在控制用户可以做什么方面，这还有其他优势。但是，您可能需要更大的灵活性。

第三种可能性是审计工具，它跟踪数据库上运行的所有查询。我认为大多数数据库都有开启内部审计的方法，尽管这些都是针对数据库的。还有第三方工具可让您查看发生了什么。但请注意，如果您的数据库正在进行大量事务，这些方法将影响性能。

有关更多信息，您应该修改您的问题以指定您正在使用或计划使用的数据库。

# android - Android ADB 看不到设备

> ID：11810537
> 
> 赞同：44
> 
> 时间：2012-08-04T17:22:07.600
> 
> 标签：android, adb, tablet

我正在尝试在 OMEGA T107 平板电脑上运行我的应用程序。但`adb`没有看到我的设备。我几乎尝试了一切。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2016-04-01T04:50:50.023

其中一些答案已经很老了，所以最近可能发生了变化，但是我遇到了类似的问题，我通过以下方式解决了它：

1.  加载设备的 USB 驱动程序 - 三星 S6
2.  在手机上启用开发者工具。
3.  在设备上，转到设置 - 应用程序 - 开发 - 检查 USB 调试
4.  重启操作系统（Windows 7 - 64 位）
5.  打开 Visual Studio

我认为是第 3 步让我难倒了一段时间。我启用了开发人员工具，但我没有专门启用“USB 调试”但是。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-03-29T09:31:07.953

我尝试了一整天在网上列出的所有方法，但我没有得到任何解决方案。然后，我点击了一个链接，在短短两分钟内我的问题就解决了！

顺便说一句，它是为 Windows 用户准备的！

从设备管理器中找出设备的供应商 ID。
为此，请将 OTG 端口连接到计算机的 USB 端口。
转到开始菜单并右键单击“我的电脑”并选择“属性”。
选择“设备”选项，这将打开“设备管理器”。
选择您的设备（主要在 USB 设备或其他设备中）并右键单击并选择“属性”。
选择“详细信息”选项卡，然后从属性下拉列表中选择“硬件 ID”，您可以看到硬件 ID，在我的例子中是 x2207。
打开 android_winusb.inf 并添加以下行：

```
;<Device name>   in our case I gave MK808
%SingleAdbInterface%        = USB_INSTALL, USB\VID_2207&PID_0010&MI_01
%CompositeAdbInterface%     = USB_INSTALL, USB\VID_2207&PID_0010&REV_0222&MI_01 
```

打开 C:\Users\.android\adb_usb.ini 并添加以下条目

```
0x<device id>  .. in our case it is 0x2207 
```

重启亚行

```
adb kill-server
adb start-server 
```

现在 ADB 应该可以识别该设备。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2018-07-15T17:58:32.363

我有同样的问题，没有一个解决方案对我有用。

打开设置菜单 -> 开发人员选项 -> USB 调试应该打开

## 安卓 11

设置->系统->开发者选项->USB调试

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2015-10-20T10:34:44.753

解决此问题的正常方法确实是重新启动 adb 服务器：

```
adb kill-server
adb start-server 
```

然后

```
adb devices -l 
```

应该列出连接的设备

但它可能无法解决问题。它附在我身上。

我不得不`disable/enable`在设备上的调试模式，然后重新启动 adb 服务器。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-05-13T11:03:52.950

在 Windows 上，很可能是设备驱动程序没有正确安装。

首先，`Google USB Driver`从 Android SDK Manager 安装。

然后，转到`Start`，右键单击`My Computer`，选择`Properties`并转到`Device Manager`左侧。`Other Devices`在( `Unknown devices`, `USB Devices`)下找到您的设备。右键单击它并选择`Properties`。导航到`Driver`选项卡。选择`Update Driver`然后`Browse my computer for driver software`。选择`%ANDROID_SDK_HOME%\extras\google\usb_driver`目录。Windows 应该在那里找到并安装驱动程序。然后运行`adb kill-server`。下次您执行此操作时，`adb devices`该设备应该在列表中。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-08-04T17:27:38.760

你在什么操作系统上？如果您运行 Windows，则需要确保您拥有驱动程序。您还应该确保您的 Android SDK Manager 不仅已安装，而且还包含一些针对不同设备的附加内容。不确定你的是否在里面。

确保您的手机已启用调试。我发现自己不得不跑

> adb 杀死服务器
> 
> 亚行设备

经常。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-08-04T17:55:36.340

在 Windows 上，您需要为设备安装驱动程序以便 adb 识别它。要查看是否安装了驱动程序，请检查设备管理器。如果设备管理器中有任何“无法识别的设备”，则驱动程序未安装。您通常可以从制造商处获得 adb 驱动程序。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-10-03T21:41:48.223

对于带有 Nexus 10 设备的 Windows 8 64 位，这对我有用：

[https://github.com/koush/UniversalAdbDriver](https://github.com/koush/UniversalAdbDriver)

它在底部有一个链接：

[http://download.clockworkmod.com/test/UniversalAdbDriverSetup.msi](http://download.clockworkmod.com/test/UniversalAdbDriverSetup.msi)

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2020-11-22T15:34:19.827

**并非所有 USB 电缆都可以传输数据**。如果您的设备正在充电，但未与您的机器建立连接，请尝试使用不同的 USB 数据线。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-07-12T21:16:13.940

它在我的 Astro Tab A737 中对我有用 从[http://pdanet.co/a/](http://pdanet.co/a/)下载并安装 PdaNet+在您的计算机中。

安装时按照向导中的所有步骤操作。安装驱动程序后，Android Studio 应该可以识别平板电脑。

此外，请确保设备处于 PTP 模式。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2018-12-28T14:38:55.950

卸载之前安装的所有旧的“Android ADB Interface”驱动程序，然后安装新的驱动程序对我有用。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-03-06T12:16:18.303

需要在目标设备上[启用](https://wiki.lineageos.org/adb_fastboot_guide.html)`adb`调试才能看到它。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-12-14T16:11:14.620

英特尔对此有一篇精彩的文章。都是同一个司机。这只是可以编辑的 Inf 文件中的设备 ID 不匹配，或者 Windows 强制安装我们指向的驱动程序。英特尔的文章非常透彻，解决了您遇到的每一个障碍。链接 - [https://software.intel.com/en-us/xdk/docs/installing-android-debug-bridge-adb-usb-driver-on-windows](https://software.intel.com/en-us/xdk/docs/installing-android-debug-bridge-adb-usb-driver-on-windows)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-11-28T20:47:55.133

连接设备时请记住，Android 建议选择一种可能的连接选项。就我而言：

1.  文件传输
2.  充电
3.  媒体

并非所有类型的连接都适用于 ADB。在我的情况下，需要选择电源充电才能连接到 ADB

# android - CallLog.Calls 中的 RuntimeException

> ID：11810547
> 
> 赞同：2
> 
> 时间：2012-08-04T17:23:03.090
> 
> 标签：android, android-contentresolver

如果我尝试查询`CallLog.Calls`. 我查询`CallLog.Calls`with`contentProvider`以获取最后一个电话。

谁能帮助我为什么有时会收到此错误？我认为，这是一个系统错误/问题？

```
Caused by: android.database.sqlite.SQLiteException: no such column: sdn_alpha_id: ,
while compiling: SELECT sns_receiver_count, numberlabel, service_type, matched_number, 
type, contactid, lookup_uri, mime_type, sdn_alpha_id, sp_type, messageid, fname, 
imnum, lname, sns_pkey, account_id, formatted_number, call_out_duration, number,     
geocoded_location, account_name, is_read, raw_contact_id, source_data, cdnip_number,    
state, _subject, date, real_phone_number, source_package, _id, sns_tid, name, 
normalized_number, name_reversed, _data, photo_id, logtype, reject_flag, has_content, 
m_content, country_code, frequent, cityid, bname, countryiso, numbertype, new, 
duration, cnap_name, address, e164_number, voicemail_uri FROM logs WHERE 
(logs.logtype=100 OR logs.logtype=110 OR logs.logtype=500 OR logs.logtype=800 OR 
logs.logtype=900 OR logs.logtype=1000 OR (logs.logtype=200 AND number NOT IN (SELECT 
number FROM logs WHERE number LIKE '%@%')) OR logs.logtype=300) AND ((((type != '4')))) 
ORDER BY date DESC
at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:180)
at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:136)
at android.content.ContentProviderProxy.query(ContentProviderNative.java:358)
at android.content.ContentResolver.query(ContentResolver.java:317) 
```

我查询 CallLog 的代码是：

```
// get last entry in callLog
Cursor c = context.getContentResolver().query(Calls.CONTENT_URI, null, null, 
null, Calls.DATE + " DESC"); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T09:25:26.640

更新后我的 GS2 也有同样的问题。我通过在投影中添加我需要的字段而不是 null 来解决它。

例如。

```
String[] projection = new String[] {CallLog.Calls._ID, CallLog.Calls.CACHED_NAME, CallLog.Calls.DATE, CallLog.Calls.DURATION, CallLog.Calls.NUMBER, CallLog.Calls.TYPE };

Cursor c = context.getContentResolver().query(Calls.CONTENT_URI, projection , null, 
null, Calls.DATE + " DESC"); 
```

# django - 正确的 Django URL 配置以读取 JSON

> ID：11810549
> 
> 赞同：0
> 
> 时间：2012-08-04T17:23:12.667
> 
> 标签：django, json, url, rest

我正在尝试学习一些 REST。我已经向现有的 Django 应用程序添加了几个视图，以尝试使用 REST 和 JSON 做各种事情。我可以让我的应用程序通过多个视图发送请求的数据，但我似乎无法让它接受 JSON 作为 URL 的一部分。

我创建了一个看起来像这样的视图：

def restCreateEvent(request, key, jsonString): 错误 = checkKey(key)

```
if errors == None:
    eventJson = json.loads(jsonString)

    eventInfo = eventJson['event']
    title = eventInfo['title']
    description = eventInfo['description']

    locationInfo = eventInfo['location']

    place = locationInfo['place_name']
    street = locationInfo['street_address']
    city = locationInfo['city']
    state = locationInfo['state']
    zip = locationInfo['zip']

    event = models.Event()
    event.title = title
    event.description = description
    event.street_address = street
    event.place_name = place
    event.city = city
    event.state = state
    event.zip = zip
    event.save()

else:
    return errors 
```

但是，我似乎无法正确获取 URL，这就是我现在所拥有的：

```
(r'^events/rest/create/(?P<key>\d+)/(?P<jsonString>.+)', 'events.views.restCreateEvent') 
```

当我尝试访问以下 url 时，Django debug 抱怨我的 url 都不匹配它。

```
http://127.0.0.1:8000/events/rest/33456/create/{"title":"test","description":"this is a    test","location":{"place_name":"somewhere","street_address":"123   main","city":"pittsburgh","state":"pa","zip":"11111"}} 
```

现在视图永远不会被调用，所以显然我的 url 是错误的。那么，我的方法在这里完全错误吗？如果不是，我该如何修复网址？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T17:39:02.453

你为什么要这样做？与任何有效负载一样，发送 JSON 的方式是将其放入 POST 数据中，而不是 URL。

# android - 动态下载图像以在 Android 中离线使用

> ID：11810553
> 
> 赞同：0
> 
> 时间：2012-08-04T17:23:35.650
> 
> 标签：android, networking

我需要一种方法来动态下载大约 500 张图像，并使其可供离线使用。在其他应用程序中没有使用图像，所以我希望它们对用户隐藏。我希望它们位于`drawable`文件夹中，但我希望应用程序将它们放在那里。

这可能吗？如果没有，有什么更好的选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T17:46:47.310

> 我希望它们位于`drawable`文件夹中，但我希望应用程序将它们放在那里。这可能吗？

假设您的意思是希望它们成为可绘制资源，那是不可能的。资源是在编译时设置的，不能在运行时修改。

> 如果没有，有什么更好的选择？

如果这些图像都非常小——比如说，加起来不到 1MB——将它们下载到内部存储中（例如，`getFilesDir()`）。否则，请将它们下载到外部存储（例如`getExternalFilesDir()`），特别是在 Android 1.x/2.x 设备上，这样您就不会消耗过多的内部存储。

# css - 无法让 CSS 将区域向右对齐

> ID：11810554
> 
> 赞同：0
> 
> 时间：2012-08-04T17:23:42.670
> 
> 标签：css, alignment

请看这里：http: [//jsfiddle.net/gFTeG/](http://jsfiddle.net/gFTeG/)

我无法找到必要的 CSS 以使其与右侧对齐（我可以`text-align:right;`为容器内的文本执行此操作，但容器保持与操作按钮的左侧对齐）。

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T17:25:56.163

你必须在你的css`right: 0;`的`.ILdropdown .ILdropdown_content`类上使用，你会让它向右对齐：

```
.ILdropdown .ILdropdown_content {
    display: none;
    position: absolute;
    border: 1px solid #777;
    padding: 0px;
    background: white;
    top: 100%;
    right: 0;
} 
```

[**检查此演示**](http://jsfiddle.net/luissanchezm86/gFTeG/6/)

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T17:43:34.237

对不起，我误会了。

添加`right: 0;`到您的下拉列表中，使其与操作按钮的右侧对齐。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T17:56:45.043

如果我理解正确，您希望下拉菜单出现在按钮的右侧。正如您所拥有的那样`.ILdropdown .ILdropdown_content`，`position: absolute`您可以添加`position: absolute`到父类并添加/更改`left: 100%`和`top: 0%`到内容类，如下所示。

```
.ILdropdown .ILdropdown_button img {
    ...
    position: absolute;            
} 
```

和

```
.ILdropdown .ILdropdown_content {
    ...
    top: 0%;
    left: 100%;
} 
```

这应该会产生正确的对齐效果，如[**本演示**](http://jsfiddle.net/gFTeG/8/)所示。`position: relative`如果您希望父类水平对齐，您可能需要添加一个。如果我对下拉菜单的位置有误解，只需调整`top`and `left`or`right`属性即可将其放置在您想要的任何位置。

A List Apart 中的这篇文章可能对`position`属性层有所帮助。[http://www.alistapart.com/articles/css-positioning-101/](http://www.alistapart.com/articles/css-positioning-101/)

# java - 关于列表和地图

> ID：11810556
> 
> 赞同：-1
> 
> 时间：2012-08-04T17:24:02.470
> 
> 标签：java, list, collections, hashmap

我正在做一项研究，假设我有以下数组列表

```
 List list=new ArrayList();
      list.add(1);
      list.add(1);
      list.add(2);
      list.add(3);
      list.add(3); 
```

现在我可以看到列表中重复的元素是 1 和 3 ，现在我想创建 hashMap

```
Map hm = new HashMap(); 
```

现在在这个 HashMap 中，我希望键应该是 1 和 3，值应该是 2 和 2，即键 1 应该有值 2，键 3 应该有值 2，即重复的次数应该是值和重复的元素将被存储为键请告知如何实现这一点..！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T17:27:43.793

您可以简单地遍历列表并：

*   如果该项目不在地图中，则使用 value = 1 创建它
*   如果该项目已经在地图中，则获取该值，将其递增并将其放回地图中

ps：使用泛型是个好习惯：

```
List<Integer> list = new ArrayList<Integer> (); 
```

和

```
Map<Integer, Integer> hm = new HashMap<Integer, Integer> (); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T17:38:21.473

听起来你想要一个[`Multiset`](http://en.wikipedia.org/wiki/Multiset)，比如[Guava](http://guava-libraries.googlecode.com)中的那个。例如：

```
Multiset<Integer> multiset = HashMultiset.create(list); 
```

然后你可以打电话`count`：

```
System.out.println(multiset.count(1)); // 2
System.out.println(multiset.count(2)); // 1
System.out.println(multiset.count(3)); // 2 
```

诚然，这并没有实现`Map`- 但我怀疑它可以满足您的所有需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T17:30:39.227

像这样的东西：

```
Map<Integer, Integer> hm = new HashMap<Integer, Integer>();

for (int i = 0; i < list.size(); ++i)
{
    // get a number from the list
    int number = list.get(i);

    // get the value linked to the key
    Integer mapval = hm.get(number);
    if (mapval == null)
    {
        // the value returned is null, which means that the key isn't in the map
        // the key wasn't found yet, so the number is zero times in it
        mapval = 0;
    }
    // increase the number of times the number occurs.
    hm.put(number, mapval + 1);
} 
```

# c# - MVC 3 - 异常详细信息：System.InvalidOperationException

> ID：11810558
> 
> 赞同：0
> 
> 时间：2012-08-04T17:24:10.393
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, entity-framework, razor

我试图从我的两个表中获取所有数据，但我有很多编译问题。你知道问题出在哪里吗？另外我想在这里声明两个表 return "View(repository.Towar);" 现在是可见的，但我不知道我应该怎么做这个“se.Towar_zakupiony”。

**我自己找到了解决方案：**

代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using SportsStore.Abstract;
using SportsStore.Entities;

namespace SportsStore.WebUI.Controllers
{
    public class ProductController : Controller
    {
        //
        // GET: /Product/
            public ITowarRepository repository;
            public IKategorieRepository re;

            public ProductController(ITowarRepository productRepository, IKategorieRepository kategorie) 
            {
            repository = productRepository;
            re = kategorie;
            }

            public ViewResult List()
            {
                SomeViewModel viewModel = new SomeViewModel
                {
                    Towar = repository.Towar
                    .OrderBy(p => p.Id_tow),
                    Kategorie = re.Kategorie
                    .OrderBy(p => p.Id_kat)

                };

                return View(viewModel);
            }

    }
} 
```

代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace SportsStore.Entities
{
    public class SomeViewModel
    {
        public IEnumerable<SportsStore.Entities.Towar> Towar { get; set; }
        public IEnumerable<SportsStore.Entities.Kategorie> Kategorie { get; set; }
        public IEnumerable<SportsStore.Entities.Zdjecie> Zdjecie { get; set; }
        public IEnumerable<SportsStore.Entities.Typ_zdjecia> Typ_zdjecia { get; set; }
        public IEnumerable<SportsStore.Entities.Zakup> Zakup { get; set; }
        public IEnumerable<SportsStore.Entities.Adres> Adres { get; set; }
        public IEnumerable<SportsStore.Entities.Status> Status { get; set; }
        public IEnumerable<SportsStore.Entities.Towar_Zakupiony> Towar_zakupiony { get; set; }

    }
} 
```

代码：

```
@model SportsStore.Entities.SomeViewModel

@{
    ViewBag.Title = "List";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>List</h2>

@foreach (var p in Model.Towar)
{
<div class="item">
<h3>@p.Nazwa</h3>
@p.Opis
<h4>@p.Cena.ToString("c")</h4>
</div>
}

<h2>List</h2>

@foreach (var b in Model.Kategorie)
{
<div class="item">
<h3>@b.Nazwa</h3>
</div>
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T17:29:19.790

您的视图期望控制器作为模型：

```
@model SportsStore.WebUI.Controllers.ProductController 
```

将其更改为

```
@model <WhateverTypeYourRepo(repository.Towar)IsReturning> 
```

似乎是一个 DbSet，那么您需要相应地更新您的视图。

也许您应该考虑使用视图模型，有关更多详细信息，请参阅这篇相关[的 Stack Overflow 帖子](https://stackoverflow.com/questions/664205/viewmodel-best-practices)。不建议您将整个控制器传递给视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T17:53:23.630

看起来您的`repositary.Towar`属性返回了一个 Towar 对象的集合。所以你的观点应该仅限于此

```
@model IEnumerable<Towar>    
@{
    ViewBag.Title = "List";
}

<h2>List</h2>

@foreach (var p in Model)
{
 <div class="item">
   <h3>@p.Nazwa</h3>
   @p.Opis
   <h4>@p.Cena.ToString("c")</h4>
 </div>
} 
```

假设`Naszwa`和`Cena`是您`Towar`班级的两个属性

**建议：**我个人觉得你的代码可读性更好。

1）我会在存储库中编写一个方法，它返回一个像这样`Collection`的对象`Towar`

```
public IList<Towar> GetAllTowars(); 
```

您可以在您的实现类中实现它以返回一个 Towar 对象列表。实施（获取数据由您决定）

在我的控制器中，我会这样称呼它

```
var towerList=repo.GetAllTowars();
retuen View(towerList); 
```

# xml - 要在 Scala 中列出的 XML 数据

> ID：11810559
> 
> 赞同：3
> 
> 时间：2012-08-04T17:24:26.813
> 
> 标签：xml, scala, xml-parsing

我遇到了一个似乎相当普遍的问题，但我真的找不到解决它的有效方法。我有一个大的 xml 文档并将对其进行解析。文件结构如下：

```
<response>
<result>
    <doc>
        <float name="xxx">0.0</float>
        <int name="yyy">123</int>
        <str name="zzz">hello</str>
        <str name="xyz">world</str>
    </doc>
</result></response> 
```

我想将此信息解析为一个哈希映射，例如“Map[String, Int](yyy, 123)”（One Map for revery Datatype）。

到目前为止，我发现的所有示例都在解释如果我查找“str”标签或如何在“str”标签中找到“name”属性，我如何获得类似“zzzhelloxyzworld”的结果，但我知道name 属性，并希望在“str”标签中包含信息。

```
(xmldoc \\ "str").map(n => (n \ "@name").text) 
```

例如给了我所有属性值的映射。但我不知道获取数据的方法。

我希望有人可以在这里帮助我，因为在我看来这是一项常见的任务，我不知道为什么我找不到任何解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T17:35:04.043

```
(xmldoc \\ "str").map(n => (n \ "@name").text -> n.text).toMap 
```

给

```
scala.collection.immutable.Map[String,String] = Map(zzz -> hello, xyz -> world) 
```

# android-layout - android中是否有这样的布局选项占用父容器中的剩余空间？

> ID：11810560
> 
> 赞同：-1
> 
> 时间：2012-08-04T17:24:30.310
> 
> 标签：android-layout

我想在android中做这样的布局，我想不通。

顶部一个按钮，底部一个按钮，一个listview占据休息中心区域，如何让listview占据休息区域？如果父容器是垂直的LinearLayout，这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T17:36:17.867

我在我的项目中所做的是

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/task_title"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:text="@string/tasks" />

    <ListView
        android:id="@id/android:list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/task_title" 
        android:layout_above="@+id/add_button">
        <!-- Preview: listitem=@layout/task_list_item -->
    </ListView>

    <TextView
        android:id="@id/android:empty"
        android:text="@string/no_tasks"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center_vertical|center_horizontal"
        android:layout_below="@id/task_title" 
        android:layout_above="@id/add_button"/>

    <Button
        android:id="@id/add_button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:text="@string/plus_sign" />

    <Button
        android:id="@+id/remove_button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_toRightOf="@id/add_button"
        android:text="@string/remove_task" />

</RelativeLayout> 
```

使用相对布局，您可以简单地做到这一点，关键布局属性是`android:layout_alignParentBottom="true"`，`android:layout_alignParentTop="true"`

# visual-studio-2010 - 在 XNA 4.0 中以给定点周围的半径为地形模型着色

> ID：11810562
> 
> 赞同：4
> 
> 时间：2012-08-04T17:24:38.847
> 
> 标签：visual-studio-2010, 3d, xna, xna-4.0, 3d-model

我正在使用 XNA 4.0 框架在 Visual Studio 2010 中编写游戏。我有一个从高度图生成的 3D 地形模型。我想要完成的是在某个点周围的给定半径内为这个模型着色，最终目标是向玩家显示一个单位可以在给定转弯中移动的半径。我现在用来绘制模型的方法是这样的：

```
void DrawModel(Model model, Matrix worldMatrix)
    {
        Matrix[] boneTransforms = new Matrix[model.Bones.Count];
        model.CopyAbsoluteBoneTransformsTo(boneTransforms);

        foreach (ModelMesh mesh in model.Meshes)
        {
            foreach (BasicEffect effect in mesh.Effects)
            {
                effect.World = boneTransforms[mesh.ParentBone.Index] * worldMatrix;
                effect.View = camera.viewMatrix;
                effect.Projection = camera.projectionMatrix;

                effect.EnableDefaultLighting();
                effect.EmissiveColor = Color.Green.ToVector3();
                effect.PreferPerPixelLighting = true;

                // Set the fog to match the black background color
                effect.FogEnabled = true;
                effect.FogColor = Color.CornflowerBlue.ToVector3();
                effect.FogStart = 1000;
                effect.FogEnd = 3200;
            }

            mesh.Draw();
        }
    } 
```

此外，如果它是相关的，我按照本教程[http://create.msdn.com/en-US/education/catalog/sample/collision_3d_heightmap](http://create.msdn.com/en-US/education/catalog/sample/collision_3d_heightmap)创建我的高度图和地形。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T23:38:36.347

您可以使用着色器来实现...

您只需将中心的世界位置和半径作为参数传递，并让像素着色器接收从顶点着色器插值的像素世界位置作为纹理坐标...然后只需检查像素的距离如果像素位置在范围内，则将其定位到中心并用颜色着色...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T21:17:03.170

您正在寻找的技术称为贴花。

您必须提取要绘制圆圈的地形部分，将适当的纹理应用到该部分并将其与地形混合绘制。

对于基于统一网格的地形，如下所示：

你有贴花的中心位置和它的半径。然后您可以确定网格中的最小和最大行/列，以便单元格包括每个绘制的区域。从这些顶点创建一个新的顶点缓冲区。可以从高度图中读取位置。您必须更改纹理坐标，以便将纹理放置在正确的位置。假设中心位置有坐标`(0.5, 0.5)`，中心位置+（半径，半径）有坐标`(1, 1)`等等。有了它，您应该能够找到每个顶点的纹理坐标的方程。

![提取的网格](../Images/788a5197d07899ef621ea7b3a080e0c1.png)

在上面的例子中，左上角的红色顶点的纹理坐标约为`(-0.12, -0.05)`

然后你有地形的子网格。将贴花纹理应用到它。设置适当的深度偏差（您必须尝试一些值）。在大多数情况下，负的 SlopeScaleDepthBias 会起作用。关闭采样器中的纹理坐标环绕。绘制子网格。

这是我为此目的编写的一些 VB SlimDX 代码：

```
Public Sub Init()
    Verts = (Math.Ceiling(2 * Radius / TriAngleWidth) + 2) ^ 2
    Tris = (Math.Ceiling(2 * Radius / TriAngleWidth) + 1) ^ 2 * 2

    Dim Indices(Tris * 3 - 1) As Integer
    Dim curN As Integer
    Dim w As Integer
    w = (Math.Ceiling(2 * Radius / TriAngleWidth) + 2)
    For y As Integer = 0 To w - 2
        For x As Integer = 0 To w - 2
            Indices(curN) = x + y * w : curN += 1
            Indices(curN) = x + (y + 1) * w : curN += 1
            Indices(curN) = (x + 1) + (y) * w : curN += 1
            Indices(curN) = x + (y + 1) * w : curN += 1
            Indices(curN) = (x + 1) + (y + 1) * w : curN += 1
            Indices(curN) = (x + 1) + y * w : curN += 1
        Next
    Next

    VB = New Buffer(D3DDevice, New BufferDescription(Verts * VertexPosTexColor.Struct.SizeOfBytes, ResourceUsage.Dynamic, BindFlags.VertexBuffer, CpuAccessFlags.Write, ResourceOptionFlags.None, VertexPosTexColor.Struct.SizeOfBytes))
    IB = New Buffer(D3DDevice, New DataStream(Indices, False, False), New BufferDescription(4 * Tris * 3, ResourceUsage.Default, BindFlags.IndexBuffer, CpuAccessFlags.None, ResourceOptionFlags.None, 4))
End Sub

Public Sub Update()
    Dim Vertex(Verts - 1) As VertexPosTexColor.Struct
    Dim curN As Integer
    Dim rad As Single 'The decal radius
    Dim height As Single
    Dim p As Vector2
    Dim yx, yz As Integer
    Dim t As Vector2 'texture coordinates
    Dim center As Vector2 'decal center
    For y As Integer = Math.Floor((center.Y - rad) / TriAngleWidth) To Math.Floor((center.Y - rad) / TriAngleWidth) + Math.Ceiling(2 * rad / TriAngleWidth) + 1
        For x As Integer = Math.Floor((center.X - rad) / TriAngleWidth) To Math.Floor((center.X - rad) / TriAngleWidth) + Math.Ceiling(2 * rad / TriAngleWidth) + 1
            p.X = x * TriAngleWidth
            p.Y = y * TriAngleWidth

            yx = x : yz = y
            If yx < 0 Then yx = 0
            If yx > HeightMap.GetUpperBound(0) Then yx = HeightMap.GetUpperBound(0)
            If yz < 0 Then yz = 0
            If yz > HeightMap.GetUpperBound(1) Then yz = HeightMap.GetUpperBound(1)
            height = HeightMap(yx, yz)
            t.X = (p.X - center.X) / (2 * rad)  + 0.5
            t.Y = (p.Y - center.Y) / (2 * rad) + 0.5
            Vertex(curN) = New VertexPosTexColor.Struct With {.Position = New Vector3(p.X, hoehe, p.Y), .TexCoord = t, .Color = New Color4(1, 1, 1, 1)} : curN += 1
        Next
    Next
    Dim data = D3DContext.MapSubresource(VB, MapMode.WriteDiscard, MapFlags.None)
    data.Data.WriteRange(Vertex)
    D3DContext.UnmapSubresource(VB, 0)
End Sub 
```

这是相应的 C# 代码。

```
public void Init()
{
    Verts = Math.Pow(Math.Ceiling(2 * Radius / TriAngleWidth) + 2, 2);
    Tris = Math.Pow(Math.Ceiling(2 * Radius / TriAngleWidth) + 1, 2) * 2;

    int[] Indices = new int[Tris * 3];
    int curN;
    int w;
    w = (Math.Ceiling(2 * Radius / TriAngleWidth) + 2);
    for(int y = 0; y <= w - 2; ++y)
    {
        for(int x = 0; x <= w - 2; ++x)
        {
            Indices[curN] = x + y * w ; curN += 1;
            Indices[curN] = x + (y + 1) * w ; curN += 1;
            Indices[curN] = (x + 1) + (y) * w ; curN += 1;
            Indices[curN] = x + (y + 1) * w ; curN += 1;
            Indices[curN] = (x + 1) + (y + 1) * w ; curN += 1;
            Indices[curN] = (x + 1) + y * w ; curN += 1;
        }
    }

    VB = new Buffer(D3DDevice, new BufferDescription(Verts * VertexPosTexColor.Struct.SizeOfBytes, ResourceUsage.Dynamic, BindFlags.VertexBuffer, CpuAccessFlags.Write, ResourceOptionFlags.None, VertexPosTexColor.Struct.SizeOfBytes));
    IB = new Buffer(D3DDevice, new DataStream(Indices, False, False), new BufferDescription(4 * Tris * 3, ResourceUsage.Default, BindFlags.IndexBuffer, CpuAccessFlags.None, ResourceOptionFlags.None, 4));
}

public void Update()
{
    VertexPosTexColor.Struct[] Vertex = new VertexPosTexColor.Struct[Verts] ;
    int curN;
    float rad; //The decal radius
    float height;
    Vector2 p;
    int yx, yz;
    Vector2 t; //texture coordinates
    Vector2 center; //decal center
    for(int y = Math.Floor((center.Y - rad) / TriAngleWidth); y <= Math.Floor((center.Y - rad) / TriAngleWidth) + Math.Ceiling(2 * rad / TriAngleWidth) + 1; ++y)
        for(int x = Math.Floor((center.X - rad) / TriAngleWidth); x <= Math.Floor((center.X - rad) / TriAngleWidth) + Math.Ceiling(2 * rad / TriAngleWidth) + 1; ++x)
        {
            p.X = x * TriAngleWidth;
            p.Y = y * TriAngleWidth;

            yx = x ; yz = y;
            if( yx < 0)
                yx = 0;
            if (yx > HeightMap.GetUpperBound(0))
                yx = HeightMap.GetUpperBound(0);
            if (yz < 0)
                yz = 0;
            if (yz > HeightMap.GetUpperBound(1))
                yz = HeightMap.GetUpperBound(1);
            height = HeightMap[yx, yz];
            t.X = (p.X - center.X) / (2 * rad)  + 0.5;
            t.Y = (p.Y - center.Y) / (2 * rad) + 0.5;
            Vertex[curN] = new VertexPosTexColor.Struct() {Position = new Vector3(p.X, hoehe, p.Y), TexCoord = t, Color = New Color4(1, 1, 1, 1)}; curN += 1;
        }
    }
    var data = D3DContext.MapSubresource(VB, MapMode.WriteDiscard, MapFlags.None);
    data.Data.WriteRange(Vertex);
    D3DContext.UnmapSubresource(VB, 0);
} 
```

# php - php中需要简单的for循环帮助

> ID：11810566
> 
> 赞同：0
> 
> 时间：2012-08-04T17:24:56.867
> 
> 标签：php

我的 csv 文件中有 568 行，我的 for 循环看起来像这样

```
$csv = array();
$file = fopen('names.csv', 'r');

while (($result = fgetcsv($file)) !== false)
{
    $csv[] = $result;
}

fclose($file);

for ($row = 0; $row < 568; $row++)
{
echo "Serial no:<br/>";
echo "Name:".$csv[$row][1]."";
} 
```

我想要这样的输出......

```
Serial no: 1
Name: Blah blah 1
Serial no: 2
Name: Blah blah 2
............
............
Serial no: 10
Name: Blah blah 10 
```

对于每 10 行，我想要连续 1 到 10 .. 一旦完成 10 行，我想要一条水平线..

我的意思是我想打印

```
echo "<hr>"; 
```

每10行..

谁能帮我？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T17:30:43.413

This should work :

```
for ($row = 0; $row < 568; $row++) {
    echo "Serial no:<br/>";
    echo "Name:".$csv[$row][1];
    echo (($row+1)%10 == 0) ? '<hr>' : '<br />';
} 
```

Explanation :

*   You don't need that ."" at the end of your "Name" line.
*   $row + 1 : instead of $row to avoid printing an <hr> after the first element (pos 0)
*   echo (condition) ? res1 : res 2; is like if (condition) echo res1; else echo res2;

But the real good way to do this would be :

```
$file = fopen('names.csv', 'r');
$i = 1;

while (($result = fgetcsv($file)) !== false) {
    echo "Serial no:" .$i. "<br/>";
    echo "Name:".$result[1];
    echo ($i == 1) ? '<hr>' : '<br />';
    $i = ($i%10)+1;
}

fclose($file); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T17:29:02.160

```
$csv = array();
$file = fopen('names.csv', 'r');

while (($result = fgetcsv($file)) !== false)
{
    $csv[] = $result;
}

fclose($file);

for ($row = 0; $row < 568; $row++)
{
echo "Serial no:<br/>";
echo "Name:".$csv[$row][1]."";
   if ((int) $row % 10 === 0)
    {
        echo '<hr>';
    } 
} 
```

应该做的伎俩:)

# android - 如何在android中获得互联网速度？

> ID：11810568
> 
> 赞同：-5
> 
> 时间：2012-08-04T17:25:02.243
> 
> 标签：android

我在我的程序中使用 SOAP Parser。但有时互联网非常慢。所以我需要检查互联网速度。请给我一些代码。即使我也在使用 2G 和 3G 和 wifi。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T17:35:54.477

2G/3G

要确定网络类型，请使用：

```
TelephonyManager.getNetworkType(); 
```

例如

```
bool is3G = (manager.getNetworkType() == TelephonyManager.NETWORK_TYPE_UMTS); 
```

该课程的文档可以在以下位置找到：[TelephonyManager](http://developer.android.com/reference/android/telephony/TelephonyManager.html)

# javascript - 如何用空格替换下划线？

> ID：11810569
> 
> 赞同：52
> 
> 时间：2012-08-04T17:25:38.317
> 
> 标签：javascript, jquery, html

我有一个包含对象的数组，其中一些对象在字符串中包含下划线。

例子：

```
{"name": "My_name"} 
```

但是我在多个地方调用了 name 函数，一个这样的地方是在图像标签中需要下划线的地方，使用 JavaScript 我想选择一个带有名字的 div 并用空格替换下划线。

例子：

```
<div>
 <div class="name">
  My_name
 </div>
 <img src="My_name.jpg"/>
</div> 
```

在`div.name`我想要它说`My name`而不是`My_name`.

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2012-08-04T17:26:54.107

您可以用空格替换字符串中的所有下划线，如下所示：

```
str.replace(/_/g, ' '); 
```

因此，只需在放入内容之前执行此操作。如果您需要在之后执行替换，请使用循环`each`：

```
$('.name').each(function () {
    this.textContent = this.textContent.replace(/_/g, ' ');
}); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2020-09-16T15:08:08.533

ES2021 引入了漂亮的[replaceAll()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replaceAll)函数，这意味着它可以写成：

```
str.replaceAll('_', ' ') 
```

如果你想做多个元素，只需循环它们并使用[forEach()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach)：

```
const elements = document.querySelectorAll('.name')   
elements.forEach(e => e.innerText = e.innerText.replaceAll('_', ' ')) 
```

# php - PHP“兄弟”类？它是如何工作的？

> ID：11810574
> 
> 赞同：0
> 
> 时间：2012-08-04T17:26:09.953
> 
> 标签：php, oop, class, interface

我知道这是一直在做的，但出于某种原因，这对我来说没有一点意义。[插入@#$%！这里]我不知道这个（假设）明显的解决方案的正确 OOP 过程是什么。我已经简要阅读了 Abstract 和 Interface 类型类，但对任何符合我要求的示例都无济于事。

所以这里的设置...

在此示例中，我有两个类，一个将从我的脚本中调用，另外两个可以从我的脚本中调用，也可以从我调用的第一个类中调用。伪代码：

```
<?php

    // Some code here

    $timer = new timer();
    $doSomethingCool = new doSomethingCool();

    $doSomethingCool->doIt();
    print $timer->length();

    class timer {
        private $startTime;
        private $stopTime;
        private $length;

        public function start() {
            // Start running the timer
        }
        public function end() {
            // End the timer
        }
        public function length() {
            // Return the length of the timer
            return $this->length;
        }
    }

    class doSomethingCool {
        public function doIt() {

            $timer->start();

            // Some code here

            $timer->end();

        }
    }

?> 
```

我已经能够让它“运行”（见下文），但这种解决方法很混乱，我 100% 确定这不是正确的面向对象建模：

```
<?php
    // Start by declaring all classes and pass all classes to themselves...

    $doSomethingCool = new doSomethingCool();
    $timer = new timer();
    $class = array(
        'doSomethingCool'=>$doSomethingCool,
        'timer'=>$timer
    );

    $doSomethingCool->class = $class;
    $timer->class = $class;

    // Some code here
    $class['doSomethingCool']->doIt();
    print $timer->length();

    class timer {
        // In each class we now declare a public variable
        // 'class' that we had passed all class instances to...
        public $class;

        private $startTime;
        private $stopTime;
        private $length;

        public function start() {
            // Start running the timer
        }
        public function end() {
            // End the timer
        }
        public function length() {
            // Return the length of the timer
            return $this->length;
        }
    }

    class doSomethingCool {
        public $class;

        public function doIt() {

            $this->class['timer']->start();

            // Some code here

            $this->class['timer']->end();

        }
    }

?> 
```

由于 E_STRICT，我不想使用`$timer::start();`.

那么，女士们先生们，有什么解决办法呢？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T17:53:06.367

我认为您想将其他类注入某个类。如果是这样：

```
class Database {}
class Timer {}

class Foo
{
    protected $database;
    protected $timer;

    public function __construct(Database $database, Timer $timer)
    {
         $this->database = $database;
         $this->timer = $timer;
    }

    public function doSomething()
    {
        $this->timer->start();
    }

}

$database = new Database();
$timer = new Timer();
$foo = new Foo($database, $timer); 
```

请注意，您当然应该添加您的真实课程（我使用过的地方`Database`和`Timer`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T17:59:07.327

# 多态方式：

```
class SomeClass {
    protected $db;
    function __construct(Database $database) {
        $this->db = $database;
    }
    function doIt() {
        // . . .
    }
}

class TimedSomeClass extends SomeClass {
    protected $timer;
    function __construct(Database $db, Timer $timer) {
        $this->timer = $timer;
        parent::__construct($db);
    }

    function doIt() {
        $this->timer->start();
        parent::doIt();
        $this->timer->stop();
    }
} 
```

多态性可能不是这种情况的最佳工具，但听起来你想在你的问题中多态地做它，所以就在这里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T17:47:29.667

如果您希望A 类的对象**a**访问 B 类的对象**b** ，那么如果**b**在某种意义上不是全局的，则必须将其传递给**a 。**在你的情况下，你可以这样做：

 ***   通过将其添加到构造函数`new doSomethingCool($timer)`或
*   通过创建和使用 set 方法并将对象句柄存储为私有属性，例如。`$doSomethingCool->setTimer( $timer );`或者
*   通过作为参数传入`doIt()`

另一种选择是对计时器类使用单例模板——这实际上使计时器成为一个 glbal 对象，但现在通常不推荐使用此类模板。**

# c++ - 直接访问成员变量还是作为参数传递？

> ID：11810580
> 
> 赞同：12
> 
> 时间：2012-08-04T17:26:51.673
> 
> 标签：c++, oop, readability

我注意到，即使尊重 OOD 的单一职责原则，有时类仍然会变大。有时直接在方法中访问成员变量感觉就像拥有全局状态，并且很多东西都存在于当前范围内。仅通过查看当前正在使用的方法，就无法确定当前范围内可访问的单个变量来自何处。

最近和朋友一起工作时，我意识到我写的代码比他详细得多，因为我仍然将成员变量作为参数传递给每个方法。

这是不好的做法吗？

编辑：示例：

```
class AddNumbers {
public:
    int a, b;
    // ...
    int addNumbers {
        // I could have called this without arguments like this:
        // return internalAlgorithmAddNumbers();
        // because the data needed to compute the result is in members.
        return internalAlgorithmAddNumbers(a,b);
    }

private:
    int internalAlgorithmAddNumbers(int sum1, int sum2) { return sum1+sum2; }
}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-04T17:35:39.537

如果一个类有成员变量，请使用它们。如果要显式传递参数，请将其设为自由函数。传递成员变量不仅使代码更加冗长，而且还违背了人们的期望，使代码难以理解。

类的全部目的是创建一组具有隐式传递的共享状态的函数。如果这不是您想要做的，请不要使用课程。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-04T17:38:25.197

是的，绝对是一种不好的做法。从我的角度来看，将成员变量传递给成员函数根本没有意义。它有几个缺点：

1.  降低代码可读性
2.  将参数复制到堆栈上的性能成本

最终将方法转换为简单的函数，可能有意义。事实上，从性能的角度来看，对非成员函数的调用实际上更快（不需要取消引用这个指针）。

编辑：

回答您的评论。如果函数可以仅使用几个显式传递的参数来执行其工作，并且不需要任何内部状态，那么可能没有理由声明它具有成员函数。使用简单的 C 风格函数调用并将参数传递给它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-12T15:20:23.373

我理解这个问题，不得不在我最初没有编写的代码中维护大型类。在 C++ 中，我们有关键字 const 来帮助识别不改变状态的方法：

```
void methodA() const; 
```

使用它有助于可维护性，因为我们可以看到一个方法是否可以改变一个对象的状态。

在其他没有这个概念的语言中，我更愿意通过引用传递或返回更改来明确我是否正在更改实例变量的状态

```
this->mMemberVariable = this->someMethod(); 
```

而不是

```
void someMethod()
{
   this->mMemberVariable = 1; // change object state but do so in non transparent way
} 
```

多年来我发现这使得代码更容易维护。

# jquery - 单击jQuery中动态分配的变量

> ID：11810584
> 
> 赞同：0
> 
> 时间：2012-08-04T17:27:00.610
> 
> 标签：jquery, hyperlink, onclick

我对 js 和 jquery 还很陌生，并且已经在一些代码上苦苦挣扎了一段时间。我看到发布了一些类似的问题，但是当我尝试实施解决方案时，我仍然没有得到我想要的行为。
推文已加载，有些有网址，有些则没有。如果用户单击推文中的 url，我希望它在新窗口中打开。我很确定 onclick 函数发生了什么事（可能没有正确分配给变量？）因为如果我删除 onclick 会为每个引入的 url 打开一个新窗口。
首先，我创建链接变量并拉出其余的文本，以便我可以将 url 作为超链接附加。如果用户单击 url，我想在新窗口中打开变量 link1（我直接从 api 中提取）。

```
 var link="";
           if(tweet.entities.urls[0]!=null){
            if(tweet.entities.urls[0].url!=null){
                var link1=tweet.entities.urls[0].url;
                link=replaceLinks(link1);
                $('link').live('click', function(){
                    window.open(link1);
                });
        }
        }
           if(tweet.geo==null){
                $("#geo").append('<p><img src="'+tweet.profile_image_url+'" widt="48" height="48" />'+tweet.text+link+'</p>');
          } 
```

该`$('link').live('click', function(){`行是我尝试的最后一种方法，尽管我尝试了许多其他 onclick 分配。我一直在 Firefox 中对此进行测试，并使用 aptana 以防万一。我会包含更多代码，但经过大量测试后，我真的认为问题出现在我所包含的行中，但如果这不足以确定问题，我很乐意包含更多代码。这是我的第一个网络应用程序，所以如果我做的事情很明显是错误的，请告诉我它是什么？！非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T17:31:00.603

I am confused about what is the id of your link. You have quotes around your link variable, if it is supposed to contain the link id then it should be like this:

```
$(link).live('click', function(){
    window.open(link1);
}); 
```

If link is the actual id or a class of your link then it should be like this:

```
$('#link').live('click', function(){ // id
$('.link').live('click', function(){ // class 
```

**Edit**:

Also to note, depending on the version of jQuery you are using, [live()](http://api.jquery.com/live/) is deprecated and should be replace by [on()](http://api.jquery.com/on/)

```
$(selector).on('click', function(){
    window.open(link1);
}); 
```

# php - 在 PHP 中从 csv 文件中动态获取表名和字段并导入到 MYSQL

> ID：11810599
> 
> 赞同：0
> 
> 时间：2012-08-04T17:29:19.403
> 
> 标签：php, phpmyadmin

我在 Mysql 中创建了一个带有表名（CSV 文件名）和字段名（CSV 列名）的数据结构。

现在我正在成功地将数据从 csv 导入到 Mysql 表中，因为我在脚本中硬编码 csv 文件名和字段名。如何动态获取因为我有许多 csv 文件要导入 mysql。

```
<?php
include "db.php";
$filename = "C:\REQ\Status.csv";
if (($handle = fopen($filename, 'r')) !== FALSE)
     while (($data = fgetcsv($handle, 1000, ",")) !== FALSE)
     {
       print_r($data);
       $import="INSERT into status(status) values('$data[1]')";
       mysql_query($import) or die(mysql_error());

     }
 fclose($handle);

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T17:57:43.477

我已经实现了这段代码，它是经过测试的代码。我认为这是非常充分的

您必须遵循一些规则：-

1.你的csv文件根据数据库表名（例如：db表名是users然后csv应该是users.csv）

2.您的 csv 文件的第一行应该是 db 表字段名称（例如：ID、名称等），然后开始您的数据输入

3.您可以从以下位置下载数据源类：- [http://code.google.com/p/php-csv-parser/](http://code.google.com/p/php-csv-parser/) 因为我在代码下面有要求：require_once 'CSV/DataSource.php';

```
<?php
ini_set('memory_limit','512M');
$dbhost = "localhost";
$dbname = "excel_import";
$dbuser = "root";
$dbpass = "";

$conn=mysql_connect ($dbhost, $dbuser, $dbpass) or die ("I cannot connect to the database because: " . mysql_error());
mysql_select_db($dbname) or die("Unable to select database because: " . mysql_error());

require_once 'CSV/DataSource.php';

$filename = "users.csv";
$ext = explode(".",$filename);
$path = "uploads/".$filename;

$dbtable = $ext[0];

import_csv($dbtable, $path);

function import_csv($dbtable, $csv_file_name_with_path)
{
    $csv = new File_CSV_DataSource;
    $csv->load($csv_file_name_with_path);

    $csvData = $csv->connect();

    $res='';
    foreach($csvData  as $key)
    {
        $myKey ='';
        $myVal='';
        foreach($key as $k=>$v)
        {
            $myKey .=$k.',';
            $myVal .="'".$v."',";
          }

        $myKey = substr($myKey, 0, -1);
        $myVal = substr($myVal, 0, -1); 
        $query="insert into ".$dbtable." ($myKey)values($myVal)";
        $res=  mysql_query($query);

    }

    if($res ==1)
    {

                echo "record successfully Import.";

    }else{

                echo "record not successfully Import.";
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T17:32:52.060

像这样的东西：

```
function integrate($filename)
{
if (($handle = fopen($filename, 'r')) !== FALSE)
     while (($data = fgetcsv($handle, 1000, ",")) !== FALSE)
     {
       print_r($data);
       $import="INSERT into status(status) values('$data[1]')";
       mysql_query($import) or die(mysql_error());

     }
 fclose($handle);
}

$files = scandir('folder/');
foreach($files as $file) {
  //pre-checking (if already integrated, if CSV etc..)
  integrate($file);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T17:36:00.333

如果您将其作为 PHP 脚本运行，则可以将文件名作为参数获取，但`$argv[1]`您需要检查文件是否存在。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T17:37:44.833

如果文件名和表名匹配，那么无论您在哪里输入或检索文件名，都可以在查询中使用相同的值：

```
$filename = "Status";

$table_name = strtolower( $filename );

$filename = "C:\REQ\{$filename}.csv";

if (($handle = fopen($filename, 'r')) !== FALSE)
     while (($data = fgetcsv($handle, 1000, ",")) !== FALSE)
     {
       print_r($data);
       $import="INSERT into {$table_name}(status) values('$data[1]')"; 
```

对于列名，我建议将它们放在 CSV 文件的第一行并从那里解析它们，例如：

```
if (($handle = fopen($filename, 'r')) !== FALSE)

    $columns = fgets($handle, 1000);

     while (($data = fgetcsv($handle, 1000, ",")) !== FALSE)
     {
       print_r($data);
       $import="INSERT into {$table_name}({$columns}) values('{$data[1]}')"; 
```

我还建议考虑为多行 INSERT 构建单个 SQL 查询字符串。例如

```
$values = array();

     while (($data = fgetcsv($handle, 1000, ",")) !== FALSE)
     {
       print_r($data);
       $values[] = "('{$data[1]}')";
       ...
     }

     $values = join( ",\n\n", $values );

     $insert = "INSERT into {$table_name}({$columns}) values {$values}"; 
```

# jsf - 如何在 JSF 中创建指向资源的 EL 引用

> ID：11810600
> 
> 赞同：0
> 
> 时间：2012-08-04T17:29:25.707
> 
> 标签：jsf

我目前在复合组件中使用类似的东西来创建对资源的 EL 引用：

```
<composite:implementation>

    <ui:param name="resourceName" value="images:#{cc.resourceName}" />

    <h:commandButton id="button" image="#{resource[resourceName]}" />

</composite:implementation> 
```

如您所见，`ui:param`指的是`getResourceName()`在组件类中命名的方法。此方法确定要加载的资源。

我想有一个解决方案，整个`ui:param`事情都是不必要的，比如：

```
<composite:implementation>

    <h:commandButton id="button" image="#{cc.resource}" />

</composite:implementation> 
```

目前我什至不知道这是否可能。

有任何想法吗？

谢谢，DS

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T17:59:18.880

如果您不想使用 JSF 提供的资源 API，那么您可以将上下文相关 url 传递给图像，

例如：

如果这是您的自定义组件：

```
<util:mbt actionMethod="#{bean.show}" resourceName="#{bean.img}" /> 
```

将其更改为：

```
<util:mbt actionMethod="#{bean.show}" resource="#{bean.img}" /> 
```

其中 bean.getImg() 返回一个字符串`"/resources/images/test.jpg"`

或者，在添加组件时使用资源 API，如下所示：

```
<ui:param name="resourceName" value="images:#{bean.img}" />
<util:mbt actionMethod="#{bean.show}" resource="#{resource[resourceName]}" /> 
```

并像这样使用它：

```
<composite:implementation>

  .....

  <h:commandButton id="button" action="#{cc.attrs.actionMethod}" image="#{cc.attrs.resource}" />

  .....
</composite:implementation> 
```

这个问题仍然在我的脑海中。“但为什么？”

# excel - 如何在Excel中自动删除行

> ID：11810602
> 
> 赞同：1
> 
> 时间：2012-08-04T17:29:46.617
> 
> 标签：excel

考虑以下（部分）Excel 工作表：

```
A  |   B         |  C    |  D
---+-------------+-------+-------
id |  date       | var_a | var_b
1  |  2011-03-12 | 200   | 34.22
1  |  2011-03-13 | 203   | 35.13
1  |  2011-03-14 | 205   | 34.14
1  |  2011-03-15 | 207   | 54.88
1  |  2011-03-16 | 208   | 12.01
1  |  2011-03-18 | 203   | 76.10
1  |  2011-03-19 | 210   | 14.86
1  |  2011-03-20 | 200   | 25.45
.  |  .          |  .    |  .
.  |  .          |  .    |  .
2  |  2011-03-12 | 200   | 34.22
2  |  2011-03-13 | 203   | 35.13
2  |  2011-03-14 | 205   | 34.14
2  |  2011-03-15 | 207   | 54.88
2  |  2011-03-16 | 208   | 12.01
2  |  2011-03-18 | 203   | 76.10
2  |  2011-03-19 | 210   | 14.86
2  |  2011-03-20 | 200   | 25.45
.  |  .          |  .    |  .
.  |  .          |  .    |  . 
```

实际上，有超过 5.000 行。我需要删除日期在星期六或星期日的所有行。在示例中，3 月 12 日和 13 日`(2011-03-12/13)`以及 3 月 19 日和 20 日是星期六和星期日。我不能只删除每第 n 行，因为列表中可能缺少几天（就像这里的情况一样`2011-03-17`）。

这可能与公式或VBScript有关吗？我以前从未编写过 VBScript 宏（我从未使用过它），因此我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T21:47:12.130

诀窍是您不需要删除这些行，您需要将 C 和 D 的值替换为 0。这最容易在两个新列 C' 和 D' 引用 C 中使用 IF() 和 WEEKDAY() 完成和 D. 随意删除 C 和 D。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T21:58:42.963

如果你只需要这样做一次，这就是我会做的。这应该保留顺序，但如果您真的担心它，请阅读帖子的最后：

1.  添加一个新列，将其命名为“Is Weekend”。在里面，放`=if(WEEKDAY(B2, 2) > 5, 1, 0)`。向下拖动整个表格的公式。

2.  过滤列。为此，请选择整个表格（单击任何表格单元格，然后按 Ctrl-A），然后

    *   在 Excel 2007+ 上，转到数据-> 单击“过滤器”
    *   在 Excel 2003 上，转到数据->过滤器->自动过滤器。
3.  按最后一列（是周末）以降序对所有内容进行排序。这应该将所有周末行放在一起，而不会改变其他行之间的顺序。

4.  删除“Is Weeked”列中所有带 1 的行。删除该列。

如果你真的很担心维护秩序，在你做上述之前，你可以做以下事情：

1.  添加一个名为“位置”的新列。将 1 放在第一行，将 2 放在第二行，选择它们并将其向下拖动到底部，这样每一行都有自己的位置编号，按递增顺序排列。
2.  执行如上过滤。
3.  完成后，按“位置”列按升序对所有内容进行排序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T02:00:56.613

您可以使用[数组公式](http://office.microsoft.com/en-us/excel-help/introducing-array-formulas-in-excel-HA001087290.aspx)一次性完成此操作。在单元格`E2`中，输入以下公式（一行），并用`Ctrl`- `Shift`-确认`Enter`（与常规相反`Enter`）

```
=INDEX($A$2:$D$5000, SMALL(IF(WEEKDAY($B$2:$B$5000,2)>5, "",
    ROW($B$2:$B$5000)-MIN(ROW($B$2:$B$5000))+1), ROW(A1)),COLUMN(A1)) 
```

5000 表示电子表格中的行数。在此之后，公式周围应该有花括号，以表明它是一个数组公式。`E2`应该有价值`1`。然后选择单元格并将单元格`E2`的右下角向右拖动，直到覆盖4个单元格。然后将 4-cell-selection 的右下角一直向下拖动。在底部，您将看到包含 的行`#NUM!`，每个删除的行对应一个。您可以以常规方式删除它们。

`E2`您可以从新工作表的单元格开始，而不是从单元格开始`A2`。在这种情况下，您需要将原始工作表名称添加到公式中的每个引用，如`OriginalSheet!$A$2`

此公式是对 Excel 中给出的公式的改编[：删除空白单元格](http://www.get-digital-help.com/2007/09/16/excel-remove-blank-cells/#array)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-05T17:50:06.347

如果您决定删除行，请确保从最后一行到第一行运行 VBA 代码。这是一段刚刚从内存中编写的代码，向您展示了从下到上运行的想法。

```
For i = Selection.Rows.Count To 1 Step -1
    If WEEKDAY(Cells(r, 2),2) > 5 Then
        Selection.Rows(i).EntireRow.Delete
    End If
Next i 
```

# jquery - JQuery UI 在年份日期选择器中的特定月份之间进行选择

> ID：11810604
> 
> 赞同：1
> 
> 时间：2012-08-04T17:29:51.330
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

我是 JQuery 的新手，我想看看我是否可以使用 JQuery UI datepicker 来做这样的事情。

我想从每年的 1 月 1 日到 3 月 30 日或特定年份显示 .. 并禁用其他日期。第一个选择的日期应该是从今天起的 5 个工作日。

是否可以。我确实在 JQuery UI 上看到了一些范围等，但我不太明白。

谢谢

**更新**

我可以做类似下面的事情，让用户从今天起只选择 5 天。

```
minDate: +5, maxDate: "+3M +10D", 
```

**更新**

```
 showButtonPanel: true,
                      minDate: new Date(2012, 1, 2),
                      maxDate: new Date(2012, 3,30),
                      minDate: + 5 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T17:59:00.657

您可以指定最小和最大日期。

**HTML**

```
<p>Date: <input type="text" id="datepicker"></p>

<p>New Date: <input type="text" id="test"></p>

</div> 
```

**JavaScript（两个不同的示例。第一个硬设置日期。第二个获取当前日期 + 5 天。**

```
 $(function() {
        $( "#datepicker" ).datepicker({
           minDate: new Date(2012, 0, 1),
           maxDate: new Date(2012, 2, 31)}
        );

        var today= new Date();
        var numberofDays = 5;
        var newDate = new Date().setDate(today.getDate()+numberofDays);
        $( "#test" ).datepicker({
           minDate: newDate,
           maxDate: 5}//number of days from the start date
        );
    }); 
```

以下是 jsfiddle 的一些示例

[http://jsfiddle.net/rpNXZ/1/](http://jsfiddle.net/rpNXZ/1/)

​</p>

​</p>

# r - Replace contents of factor column in R dataframe

> ID：11810605
> 
> 赞同：49
> 
> 时间：2012-08-04T17:30:38.503
> 
> 标签：r

I need to replace the levels of a factor column in a dataframe. Using the `iris` dataset as an example, how would I replace any cells which contain `virginica` with `setosa` in the *Species* column?

I expected the following to work, but it generates a warning message and simply inserts NAs:

```
iris$Species[iris$Species == 'virginica'] <- 'setosa' 
```

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2012-08-04T17:51:03.063

我敢打赌，问题在于当您尝试用新值替换值时，该值当前不属于现有因素的水平：

```
levels(iris$Species)
# [1] "setosa"     "versicolor" "virginica" 
```

你的例子很糟糕，这有效：

```
iris$Species[iris$Species == 'virginica'] <- 'setosa' 
```

这更有可能造成您在使用自己的数据时看到的问题：

```
iris$Species[iris$Species == 'virginica'] <- 'new.species'
# Warning message:
# In `[<-.factor`(`*tmp*`, iris$Species == "virginica", value = c(1L,  :
#   invalid factor level, NAs generated 
```

如果您首先增加因子水平，它将起作用：

```
levels(iris$Species) <- c(levels(iris$Species), "new.species")
iris$Species[iris$Species == 'virginica'] <- 'new.species' 
```

* * *

如果你想用“species B”替换“species A”，你最好用

```
levels(iris$Species)[match("oldspecies",levels(iris$Species))] <- "newspecies" 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-08-04T22:10:47.243

对于您建议的事情，您可以使用以下方法更改级别`levels`：

```
levels(iris$Species)[3] <- 'new' 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-01-28T19:29:04.353

您可以使用`revalue`包中的函数`plyr`来替换因子向量中的值。

在您的示例中，将因子替换`virginica`为`setosa`：

```
 data(iris)
 library(plyr)
 revalue(iris$Species, c("virginica" = "setosa")) -> iris$Species 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-03-23T13:13:54.413

我有同样的问题。这效果更好：

确定要修改的级别：`levels(iris$Species)`

```
 "setosa" "versicolor" "virginica" 
```

所以，`setosa`是第一个。

然后，这样写：

```
 levels(iris$Species)[1] <-"new name" 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-03-09T14:00:05.403

使用`dlpyr::mutate`和`forcats::fct_recode`：

```
library(dplyr)
library(forcats)

iris <- iris %>%  
  mutate(Species = fct_recode(Species,
    "Virginica" = "virginica",
    "Versicolor" = "versicolor"
  )) 

iris %>% 
  count(Species)

# A tibble: 3 x 2
     Species     n
      <fctr> <int>
1     setosa    50
2 Versicolor    50
3  Virginica    50 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-01-12T15:32:09.430

一个更通用的解决方案可以同时处理所有数据框并且您不必添加新的因子水平是：

```
data.mtx <- as.matrix(data.df)
data.mtx[which(data.mtx == "old.value.to.replace")] <- "new.value"
data.df <- as.data.frame(data.mtx) 
```

此代码的一个不错的功能是您可以一次分配与原始数据框中的值一样多的值，而不仅仅是一个`"new.value"`，并且新值可以是随机值。因此，您可以创建一个与原始大小相同的全新随机数据框。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-01-29T23:04:50.557

您想替换数据集列中的值，但收到如下错误：

> 无效因子水平，NA 生成

试试这个：

`levels(dataframe$column)[levels(dataframe$column)=='old_value'] <- 'new_value'`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-03-20T14:15:39.020

如果您必须替换多个值，并且您不介意使用 as.factor(as.character(...)) “重构”您的变量，您可以尝试以下操作：

```
replace.values <- function(search, replace, x){
  stopifnot(length(search) == length(replace))
  xnew <- replace[ match(x, search) ]
  takeOld <- is.na(xnew) & !is.na(x)
  xnew[takeOld] <- x[takeOld]
  return(xnew)
}

iris$Species <- as.factor(search=c("oldValue1","oldValue2"),
                          replace=c("newValue1","newValue2"),
                          x=as.character(iris$Species)) 
```

# c++ - Is the default value of an int* NULL?

> ID：11810609
> 
> 赞同：6
> 
> 时间：2012-08-04T17:30:50.803
> 
> 标签：c++, templates

I have written the following source

```
#include <iostream>
using namespace std;

template <class T>
class AAA
{
public:
    void f() { cout << T() << " "; }
};

int main ( void )
{
    AAA<int*> a;
    AAA<int> b;

    a.f(); /// in this case, T() == NULL??
    b.f(); 

    return 0;
} 
```

and console print is 00000000 0\. ( in visual studio 2010 )

if T is int*, T() == NULL? and is it always true?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-04T17:33:59.510

这称为**值初始化**，您是有保证的`0`。

另外，您不需要如此复杂的示例来演示：

```
typedef int* T;
int main()
{
   T x = T();
   std::cout << x;
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-04T17:32:45.640

是的。值初始化的指针始终为空。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T17:33:54.937

是的。它是空指针。以及为什么要打印：

```
00000000 
```

因为它使用 4 字节来表示空地址（以十六进制格式）。

在 64 位机器上，它*可能会*打印这个（十六进制格式）：

```
0000000000000000 
```

# regex - 如何在不知道正则表达式是否匹配的情况下使用正则表达式提取子字符串（组）？

> ID：11810615
> 
> 赞同：20
> 
> 时间：2012-08-04T17:31:46.230
> 
> 标签：regex, scala

我想用这个

```
val r = """^myprefix:(.*)""".r
val r(suffix) = line
println(suffix) 
```

但是当字符串不匹配时会出错。如何在匹配是可选的情况下使用类似的构造？

编辑：为了清楚起见，我需要该组`(.*)`

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-08-04T18:05:58.110

您可以通过模式匹配提取匹配组。

```
val r = """^myprefix:(.*)""".r
line match {
  case r(group) => group
  case _ => ""
} 
```

另一种使用方式`Option`：

```
Option(line) collect { case r(group) => group } 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-08-05T01:51:33.693

```
"""^myprefix:(.*)""".r        // Regex
  .findFirstMatchIn(line)     // Option[Match]
  .map(_ group 1)             // Option[String] 
```

这样做的好处是您可以将其编写为单行，而无需将正则表达式分配给中间值`r`。

如果您想知道，组 0 是匹配的字符串，而组 1 等是捕获组。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-04T17:48:45.357

尝试

```
r.findFirstIn(line) 
```

升级版：

```
scala> val rgx = """^myprefix:(.*)""".r
rgx: scala.util.matching.Regex = ^myprefix:(.*)

scala> val line = "myprefix:value"
line: java.lang.String = myprefix:value

scala> for (rgx(group) <- rgx.findFirstIn(line)) yield group
res0: Option[String] = Some(value) 
```

# c++ - Mac 上 xcode 的 C++ 布尔逻辑语法

> ID：11810619
> 
> 赞同：0
> 
> 时间：2012-08-04T17:32:13.560
> 
> 标签：c++, xcode, boolean-logic

上周我刚刚学会了如何使用 C++ 编程，并且我使用 Microsoft Visual Studios 2010 express 编写了我的第一个程序。我家里的电脑是 Mac，没有 MS Visual Studio，所以我决定使用 xcode 并将我的代码从 MS Visual Studio 复制到 xcode。大多数情况下没有任何错误，只是 xcode 的布尔逻辑语法有问题。以下是我的代码中存在问题的一些示例：

```
if(place == 1)
{

cout<< name << " 'IS NOW THE FASTEST JUNIOR IN THE UNITED STATES!!!\n";

cout<< "ABSOLUTLY INCREDIBLE!!!!! WHAT AN AMAZING RACE\n"
    << endl
    << endl;

cout<< "You did it! You won the race and are now the fastest Junior skier in the USA!\n";

cout<< "All that hard work really paid off for you!\n";

    <<endl;
}
else (place >1)
{
cout << "You skied a great race, but unfortunately you did not beat Ben.\n";

cout<< "You can always race again next year and shoot for gold.\n"
    <<endl;
} 
```

出现的错误是“未使用表达式结果”。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T17:42:11.037

如果我们从代码片段的第一行开始（正确格式化后更容易阅读和理解）：

```
else(place >1); 
```

这是`if`语句的最后一部分，表示如果 中的条件`if`不成立，则执行 之后的语句`else`。`place`在您的情况下，它是一个检查是否大于一个然后丢弃结果的表达式，所以它实际上什么都不做。您可能的意思是使用`else if`而不是仅`else`.

然后看下一行：

```
else (restStopDecision == 2); 
```

在这里，您再次犯了同样的错误，但现在出现了一个`else`不应该出现的地方，这本身就是一个错误。你可能`else if`也是这里的意思。

# jquery - css使固定高度下拉可滚动

> ID：11810624
> 
> 赞同：0
> 
> 时间：2012-08-04T17:33:07.863
> 
> 标签：jquery, css, drop-down-menu, keyboard, scroll

```
<div>
    <ul>
        <li>item1</li>
        <li>item2</li>
        <li>item3</li> 
```

是固定高度，如果高度大于它`div`的高度，则可以滚动。`ul`我写了一些代码，所以我可以使用 arrowup 和 arrowdown 来导航`li`. 问题是当我使用键盘选择超出高度的项目时，div 不会自动滚动到该位置。

有没有办法实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T17:39:55.183

你可以说`obj.scrollTop = selectedChildObj.offsetTop`自动设置高度。

# java - 是否可以从不同的 JVM 调用 Java 应用程序中的方法？

> ID：11810627
> 
> 赞同：6
> 
> 时间：2012-08-04T17:33:54.153
> 
> 标签：java, jvm, init, ubuntu-12.04

当我第一次使用 Apache daemon 为 Windows 开发 Java 服务时，我使用了`JVM`我非常喜欢的模式。您指定您的类和 start\stop （静态）方法。但是对于 Linux，Jsvc 看起来并没有相同的选项。我真的很想知道为什么？！

无论如何，如果我要使用 Linux 的 init 系统，我正在尝试找到一种类似的方法来完成相同的行为，即无论如何启动应用程序但要停止它，我将不得不调用一个类中的方法.

我的问题是，在 jar 启动后，我如何使用 JVM 库或其他任何东西来调用我的应用程序中的方法（这将尝试**优雅地**停止我的应用程序）。

另一个问题，如果应用程序启动并且该应用程序具有静态方法，如果我使用`java`命令行在其中运行一个`main`方法，如果那是应用程序类，并且该`main`方法`static`将在我所在的类中调用另一个静态方法想要发出终止信号，是否会在同一个 JVM 中调用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-04T17:57:30.717

为什么不`ShutdownHook`向您的应用程序添加一个？

> 关闭挂钩只是一个已初始化但未启动的线程。当虚拟机开始其关闭序列时，它将以某种未指定的顺序启动所有已注册的关闭挂钩并让它们同时运行。当所有钩子都完成后，如果 finalization-on-exit 已启用，它将运行所有未调用的终结器。最后，虚拟机将停止。请注意，在关闭序列期间，守护线程将继续运行，如果通过调用 exit 方法启动关闭，非守护线程也将继续运行。

这将允许您的 jar 在关闭之前正常终止：

```
public class ShutdownHookDemo {
    public void start() {
        System.out.println("Demo");
        ShutdownHook shutdownHook = new ShutdownHook();
        Runtime.getRuntime().addShutdownHook(shutdownHook);
    }

    public static void main(String[] args) {
        ShutdownHookDemo demo = new ShutdownHookDemo();
        demo.start();
        try {
            System.in.read();
        }
        catch(Exception e) {
        }
    }
}

class ShutdownHook extends Thread {
    public void run() {
        System.out.println("Shutting down");
        //terminate all other stuff for the application before it exits
    }

} 
```

重要的是要注意

**关闭挂钩在以下情况下运行：**

*   程序正常存在。例如，调用 System.exit()，或者最后一个非守护线程退出。
*   虚拟机被终止。例如 CTRL-C。这对应于 kill -SIGTERM pid 或
*   在 Unix 系统上杀死 -15 pid。

**在以下情况下，关闭挂钩将不会运行：**

*   虚拟机中止
*   SIGKILL 信号被发送到 Unix 系统上的虚拟机进程。例如 kill -SIGKILL pid 或 kill -9 pid
*   TerminateProcess 调用被发送到 Windows 系统上的进程。

或者，如果您必须使用它来调用类中的方法：

```
public class ReflectionDemo {

  public void print(String str, int value) {
    System.out.println(str);
    System.out.println(value);
  }

  public static int getNumber() { return 42; }

  public static void main(String[] args) throws Exception {
    Class<?> clazz = ReflectionDemo.class;//class name goes here
    // static call
    Method getNumber = clazz.getMethod("getNumber");
    int i = (Integer) getNumber.invoke(null /* static */);
    // instance call
    Constructor<?> ctor = clazz.getConstructor();
    Object instance = ctor.newInstance();
    Method print = clazz.getMethod("print", String.class, Integer.TYPE);
    print.invoke(instance, "Hello, World!", i);
  }
} 
```

并动态加载一个类：

```
ClassLoader loader = URLClassLoader.newInstance(
    new URL[] { yourURL },
    getClass().getClassLoader()
);
Class<?> clazz = Class.forName("mypackage.MyClass", true, loader);
Class<? extends Runnable> runClass = clazz.asSubclass(Runnable.class); 
```

**参考：**

*   [http://onjava.com/onjava/2003/03/26/shutdownhook.html](http://onjava.com/onjava/2003/03/26/shutdownhook.html)
*   [http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Runtime.html#addShutdownHook(java.lang.Thread)](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Runtime.html#addShutdownHook(java.lang.Thread))
*   [如何从 C# 1 正确关闭 Java 应用程序](https://stackoverflow.com/questions/11310530/how-to-shutdown-java-application-correctly-from-c-sharp-one/11311498#11311498)
*   [如何在运行时从外部 jar 访问方法？](https://stackoverflow.com/questions/1319661/how-does-one-access-a-method-from-an-external-jar-at-runtime)
*   [如何在运行时加载 jar 文件](https://stackoverflow.com/questions/194698/how-to-load-a-jar-file-at-runtime)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T20:58:39.203

基本上，在 JVM 之间调用的唯一方法是通过使用`Sockets`，直接或通过基于它的实现，例如`RMI`

您可能会撒谎以查看[http://www.javaworld.com/javaqa/2000-03/03-qa-0324-ipc.html](http://www.javaworld.com/javaqa/2000-03/03-qa-0324-ipc.html)以获取更多信息

# jquery - Virtuemart 日期选择器在 chrome 中不起作用

> ID：11810645
> 
> 赞同：0
> 
> 时间：2012-08-04T17:36:45.930
> 
> 标签：jquery, joomla2.5, virtuemart

我已经安装了最新版本的 joomla 2.5 和最新版本的 meadowmart 2.0.8e。但是，当我去编辑我输入的产品的产品状态并更改可用日期时，在 chrome 中它不会工作，但在 Firefox 中它会。当我说它不起作用时，我的意思是当我点击日期字段时，日期选择器打开，但是当我单击日期时，它不会在字段中返回它。这似乎是一个已知问题，但还没有解决方案。我一直在互联网上搜索，我也试图自己解决这个问题，但没有成功。这是我单击日期时使用的代码：它似乎正在使用来自 ajax.googleapis.com/ajax/libs/jquery/1.6.4 的 jquery 1.6.4 中的 datepicker

```
jQuery(document).ready( function($) {
        $(".datepicker").live( "focus", function() {                
            $("#product_available_date_text").datepicker({              
                changeMonth: true,
                changeYear: true,
                '.$yearRange.'
                dateFormat:"'.strtolower($jsDateFormat).'",
                altField: $("#product_available_date_text").prev(),
                altFormat: "yy-mm-dd"
            });
        });
        $(".js-date-reset").click(function() {              
            $(this).prev("input").val("'.JText::_('COM_VIRTUEMART_NEVER').'").prev("input").val("0");
        });
    }); 
```

我已在第 1238 行的管理员/组件/com_virtuemart/helpers/config.php 中找到此代码。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T09:04:41.640

所以我想答案是

找到 administrator/components/com_virtuemart/helpers/config.php 下的文件并将第 1242 行更改为：

```
$display .= '<input id="'.$id.'_text" class="datepicker" type="date" value="'.$formatedDate.'" />'; 
```

并更换

```
type="date" to type="text". 
```

# objective-c - CIFilter - 无法更改名称

> ID：11810649
> 
> 赞同：0
> 
> 时间：2012-08-04T17:37:06.387
> 
> 标签：objective-c, ios, cocoa, core-animation, core-image

来自 Apple 的[核心动画编程指南](http://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Conceptual/CoreAnimation_guide/Articles/AnimatingLayers.html#//apple_ref/doc/uid/TP40006085-SW1)，清单 4：

```
...
// create the filter and set its default values
CIFilter *filter = [CIFilter filterWithName:@"CIBloom"];
[filter setDefaults];
[filter setValue:[NSNumber numberWithFloat:5.0] forKey:@"inputRadius"];

// name the filter so we can use the keypath to animate the inputIntensity
// attribute of the filter
[filter setName:@"pulseFilter"];
... 
```

在 [filter setName... 行我得到一个“'CIFilter' 没有可见的@interface 声明选择器'setName：'

我看到过滤器是使用 filterWithName 初始化程序创建的，所以我怀疑它的名称是只读的。但是，为什么这个示例出现在 Apple 的代码中，以及我发现的许多其他示例中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T21:12:18.870

writeable`name`属性是通过仅在 Mac 上存在的[核心动画添加类别添加的。](http://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CIFilter_CA_Additions/Introduction/Introduction.html)请参阅[CIFilter 动画属性小节](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreAnimation_guide/Articles/AnimProps.html)：

> Core Animation 将以下动画属性添加到 Core Image 的 CIFilter 类。有关更多信息，请参阅 CIFilter 核心动画添加。这些属性仅在 OS X 上可用。
> 
> *   姓名
> *   启用

iOS 上的 CIFilter 确实有一个`-name`方法，但它仅用于对过滤器名称的只读访问，并且没有匹配的 setter。

That section of the Core Animation Programming Guide that you link to above was copied and pasted from the original Mac version of the guide, and should be altered because it doesn't entirely apply to iOS.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T17:53:39.803

坦率地说，我从未见过尝试更改 CIFilter 名称的示例 - 您从 filterWithName 得到的是一个高度专业化的对象。如果您查看类文档，它会显示一个返回名称的方法“名称”，但没有可读写的属性。

如果您需要对象的键路径，则将其存储在类的属性中，然后您可以通过 setValue:... forKeyPath:@"myClass.myIvar" 访问它。

编辑：只是为了完全清楚：

```
Core Image was added in iOS 5\. Also the statement in the answer is not correct. Look in the CIFilter class description "name
The name of the filter.

- (NSString *)name
Return Value
A string that holds the name of the filter.

Availability
Available in iOS 5.0 and later.
Declared In
CIFilter.h 
```

在 CIFilter.h 中查找 iOS5.1：

```
 "- (NSString*)name __OSX_AVAILABLE_STARTING(__MAC_NA, __IPHONE_5_0); 
```

"

# android - 在一个轴上缩放并在另一个轴上平铺的 Android 资源

> ID：11810656
> 
> 赞同：1
> 
> 时间：2012-08-04T17:37:58.833
> 
> 标签：android, drawable, nine-patch

我们正在开发一款游戏的 Android 版本，但我们遇到了背景图片问题。在 iOS 上，将图像缩小到适当的宽度并将其配置为垂直拉伸非常容易。

但是，在 Android 上，我们无法找到一种方法来做到这一点。基本上，由于有无数的屏幕尺寸和分辨率，我们希望我们的背景图像（构成游戏区域的框架）按比例缩小以适应屏幕的宽度。然后，图像的底部和顶部应具有正确的纵横比，但中间部分应平铺（或拉伸）以填充其余区域。

我们用九个补丁文件尝试了这个，但九个补丁不会缩小。我们已经使用 LayerDrawables 进行了尝试，效果很好，只是它不会随着布局大小的变化而平铺中间；它只是拉伸整个图像。

有没有办法让一个drawable缩放以适应水平然后平铺一个部分以垂直增长？

# android - 在android中创建一个On-touch展开ListView

> ID：11810659
> 
> 赞同：2
> 
> 时间：2012-08-04T17:38:18.023
> 
> 标签：android, listview, expand

如何在android中创建一个列表视图，以便当我想单击列表项时，它会展开以显示更多详细信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-01T13:47:31.880

您可以使用可扩展列表方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-23T03:11:22.710

只需覆盖以下方法

```
 setOnChildClickListener(ExpandableListView.OnChildClickListener onChildClickListener)
 setOnGroupClickListener(ExpandableListView.OnGroupClickListener onGroupClickListener) 
```

这里面，当您单击子项或组项时，您可以根据需要进行任何操作

# jqgrid - 缺少 jqgrid 行列表下拉菜单

> ID：11810663
> 
> 赞同：1
> 
> 时间：2012-08-04T17:38:36.853
> 
> 标签：jqgrid

缺少 jqgrid 行列表下拉菜单。

[缺少 jqgrid rolwist 下拉菜单 http://www.managementlevelreview.com/images/MissingRowlist.jpg](http://www.managementlevelreview.com/images/MissingRowlist.jpg)

我的代码：

```
jQuery("#gridsavedAfterHours").jqGrid({
    url:'/AfterHours/GetsavedAfterHours?userid=${thisuserid}&&orgcode=${thisorgcode}',
    datatype: 'json',
    colNames:['ID','Name','Branch','Start','End'],
    colModel:[
        {name:'AfterHoursId', index:'AfterHoursId', width:25, sortable:true, search:false, key: true},
        {name:'UserFullName', index:'UserFullName', width:150, sortable:true, search:false},
        {name:'UserOrgLongName', index:'UserOrgLongName', width:150, sortable:true, search:false},
        {name:'enteredStartDate', index:'enteredStartDate', width:100, sortable:true, search:false},
        {name:'enteredEndDate', index:'enteredEndDate', width:100, sortable:true, search:false}
    ],
    rowNum:${DefaultRowNumber ?? 10},
    rowList:[10,25,50,100],
    pager: jQuery('#savedAfterHoursPager'),
    onSelectRow: function(id){},
    sortname: 'Start',
    viewrecords: true,
    sortorder: 'desc',
    multiselect: false,
    imgpath: '/Content/images',
    caption: 'After Hours',
    height: 'auto',
    width: '800px',
    emptyrecords: 'No After Hours data found.'
}).navGrid('#savedAfterHoursPager',
    {edit:false,add:false,del:false},
    {}, // use default settings for edit
    {}, // use default settings for add
    {}, // delete instead that del:false we need this
    {   //search options
    closeOnEscape:true /* allow the view dialog to be closed when user press ESC key*/
    }
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T19:20:01.340

我想您为`input`具有大`width`属性和可能其他一些属性的字段定义了一些 CSS 样式。我建议您在页面上包含以下附加 CSS

```
input.ui-pg-input { width: auto; } 
```

另请参阅有关关闭主题的[另一个答案。](https://stackoverflow.com/a/6284008/315935)

# ember.js - Emberjs 在视图中重定向

> ID：11810667
> 
> 赞同：1
> 
> 时间：2012-08-04T17:39:01.807
> 
> 标签：ember.js, ember-old-router

我正在 Ember 中构建一个登录表单。

App.Router = Ember.Router.extend( // 这里的状态);

然后我有以下观点

```
App.SignInView = Ember.View.extend
templateName: 'signin'

submitLogin: (event) ->
    login = @getPath('email.value')
    password = @getPath('password.value')
    console.log "Login: " + login + " Password: " + password
    // how do I redirect to a different state? I.e. "loggedIn" 
```

使用 {{action "submitLogin"}} 从模板触发 submitLogin

正如您从这段代码中看到的，我想在显示 Web 应用程序的“私人”区域之前检查用户名/密码。这里的最佳做法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T19:47:34.637

您应该`submitLogin`在当前路由中实现您的处理程序，并从处理程序中实现转换路由，如下所示：

```
submitLogin: (router, event) ->
  login = event.context.email // e.g
  password = event.context.password // e.g

  // do ajax call here...
    // and from reply handlers:
    router.transitionTo('loggedIn'); 
```

您必须在操作助手中传递电子邮件和密码容器，例如：`{{action submitLogin this}}`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T06:10:12.720

这个讨论[Ember.js 在路由器中获取视图触发事件](https://stackoverflow.com/questions/11865099/ember-js-get-view-triggering-event-in-the-router/11872383)导致我进行以下设计：

1.  让视图处理事件
2.  使用 smth 将事件转发到路由器。像这样在视图中

    ```
    App.router.send('signUp',context) 
    ```

这里的关键是我不需要在路由器之外改变路由器的状态，而是发送上下文由路由器的*当前*状态来处理。

# ruby - 鞋子有数字输入吗？

> ID：11810669
> 
> 赞同：0
> 
> 时间：2012-08-04T17:39:26.557
> 
> 标签：ruby, user-interface, listbox, shoes

我正在用鞋子试试运气，并想创建一个数字输入。我知道有 list_box 但这是一个简单的下拉选择，需要一组已知数字。但是我不知道该数组将容纳多少个数字。它可以是 1 到 1000 或更多之间的任何值。用户必须做出决定。它的方法（在鞋子手册网站上）似乎也不能帮助我实现我的愿望。

为了澄清我对“数字输入”的意思：在 HTML5 中，我们有[`<input type=number>`](http://i.stack.imgur.com/cyTu2.png)并且 OS X 有[日期选择器](http://i.stack.imgur.com/4eyeW.png)（或步进器 + 文本字段，据我了解，基本上是相同的东西，但由 2 个对象组成）。

有什么方法可以用鞋子创建这样的数字输入吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:52:23.527

您正在寻找[EditLine](http://shoesrb.com/manual/EditLine.html)元素。它可以接受任何文本，并且您可以将自己的检查算法连接到它的*更改*事件（可以处理非数字）。

# django - Django：为什么这个输出是 HTML 转义的

> ID：11810677
> 
> 赞同：12
> 
> 时间：2012-08-04T17:41:32.417
> 
> 标签：django, templates

在我的模板中，我正在写：

```
<div class="content video">{{ each.text }}</div> 
```

我得到：

```
<iframe width="300" height="200" src="http://www.youtube.com/embed/1C1HLH-hOZU" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowfullscreen></iframe> 
```

我希望该文本成为标记的一部分，而不是作为文本。说什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-04T18:16:23.727

您的意思`each.text`是转义了的输出并且您在浏览器中看到了文本而不是呈现的标记？

这是因为出于安全原因，Django 的模板引擎默认自动转义输出。您可能希望`safe`像这样使用内置过滤器：

```
<div class="content video">{{ each.text|safe }}</div> 
```

或者另一种方式是[`mark_safe`](https://docs.djangoproject.com/en/dev/ref/utils/#django.utils.safestring.mark_safe)在你的视图中使用。

# c - 将文件读入内存？

> ID：11810678
> 
> 赞同：0
> 
> 时间：2012-08-04T17:41:55.660
> 
> 标签：c, pointers, fread

如果我明确声明缓冲区大小，我似乎只能将文件读入内存。这有效

```
#include <stdio.h>
int main(){
  FILE *fp = fopen("test.log", "rb");
  char buffer[37];
  fread(buffer, 1, 36, fp);
  printf("%s", buffer);
} 
```

这会将垃圾添加到输出中

```
#include <stdio.h>
int main(){
  FILE *fp = fopen("test.log", "rb");
  fseek(fp, 0, SEEK_END);
  long siz = ftell(fp);
  rewind(fp);
  char buffer[siz + 1];
  fread(buffer, 1, siz, fp);
  printf("%s", buffer);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-04T17:49:16.530

`buffer[siz]='\0';`在之前插入`printf("%s", buffer);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T17:52:13.080

尝试不同的方法 - 使用“内存映射”。它的作用是允许您像访问内存块一样访问文件。这可以显着提高性能，同时简化您的代码。

[在http://en.wikipedia.org/wiki/Mmap](http://en.wikipedia.org/wiki/Mmap)了解更多信息

# android - 需要适用于 Android 和 iOS 的单一应用解决方案

> ID：11810679
> 
> 赞同：-3
> 
> 时间：2012-08-04T17:42:02.840
> 
> 标签：android, iphone

我敢肯定这是一个愚蠢的问题。但我需要专家的帮助。我想构建一个基于 Web 的应用程序，该应用程序将托管`database(Mysql)`在服务器中，并且可以使用 Internet 从桌面插入、更新、查看等操作。同时我喜欢为两者构建应用程序，`android`以便`iPhone`可以`insert,update`从`android`设备和`iPhone`. `User Interface`并且`Database`对于三个平台是相同的。所以我的问题是

构建此应用程序（`desktop,android and iPhone`）以便我可以为 android 和 iPhone 使用相同的用户界面的最佳方法是什么？需要检查所有三个平台的无效输入。需要为允许的用户登录。

专家建议将帮助我继续前进。我很抱歉问这种非常基本的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T18:10:36.167

最好的选择是构建一个 HTML5 网站，在 android 和 IO 设备中以相同的方式查看，当然在桌面应用程序中也是如此。如果你想与 SQL 进行交互，那么你必须有互联网连接。

如果您想构建应用程序而不是网站，则可以使用这个众所周知的跨平台应用程序构建器 (http://phonegap.com/) 编写 HTML5 代码并将其构建为每个设备中的应用程序。基本上它所做的是将网站移植为应用程序。它还支持一些常见的 javascript 调用，用于与手机功能（如相机等）进行交互，但在您的情况下，这不是必需的。

更多细节可以在我发布的网站上找到

# python - 在 Windows 7 上使用 pyodbc 访问本地 SQL Server 2008 数据库

> ID：11810681
> 
> 赞同：4
> 
> 时间：2012-08-04T17:42:54.400
> 
> 标签：python, sql-server, sql-server-2008, pyodbc

我正在尝试使用 pyodbc 连接到 SQL Server 2008 数据库的本地副本（它可以很好地连接到远程生产数据库）。

但是，当我尝试使用以下命令连接到本地副本时：

```
pyodbc.connect('DRIVER={SQL
Server};SERVER=localhost;DATABASE=mydb;UID=me;PWD=pw') 
```

连接失败并显示以下错误消息：

```
pyodbc.Error: ('08001', '[08001] [Microsoft][ODBC SQL Server
Driver][DBNETLIB]SQL Server does not exist or access denied. (17)
(SQLDriverConnect); [01000] [Microsoft][ODBC SQL Server
Driver][DBNETLIB]ConnectionOpen (Connect()). (5)') 
```

尝试通过 Windows 身份验证（使用`'Trusted_Connection=yes'`）进行连接也会失败。

我可以使用带有 Windows 身份验证和 SQL Server 身份验证的 SQL Server Management Studio 连接到本地数据库。任何想法为什么我无法与 pyodbc 连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T03:41:31.713

重新安装 SQL Server 成功了

# php - 创建一个 PHP 表单来加载 URL

> ID：11810683
> 
> 赞同：-1
> 
> 时间：2012-08-04T17:43:05.347
> 
> 标签：php, html, forms

我希望我的表单能够加载网页。我想把 html 文本框变成地址栏。就像每当我在其中写入 URL 时一样，它会在同一个窗口中加载网页。我当前的 HTML 代码是：

```
<html>
<body>
<title>BlogSoc Browser</title>
<h1 style="font-family:verdana;font-size:50px;color:#000000;text-align:center;">Address Bar</h1>
<center><form method="GET" action="/load.php"><input type="text" name="url" value="http://" /><input type="submit" value="Go" name="submit" /></form></center>
</body>
</html> 
```

它看起来像这样：（无法发布图片）或者您可以打开[http://blogsoc.org/load](http://blogsoc.org/load) 请告诉我相应的 load.php 代码。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T17:45:22.837

```
<?php
    header("Location: " . $_GET['url']);
?> 
```

应该是你需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T18:24:38.647

使用客户端脚本：

```
<!DOCTYPE html>
<html>
<head>
  <script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
  <script type="text/javascript">
    $(document).ready(function(){
        $('#myform').submit(function(){ //when form is submitted..
            window.location = $('#url').val(); //..get url from the textbox and load that url
            return false; // prevent the form from being submitted
        });
    });
  </script>
</head>

<body>
  <form id="myform">
    <input type="text" id="url" value="http://" />
    <input type="submit" id="submit" value="Submit" />
  </form>
</body>

</html> 
```

我使用了 jQuery。供参考：[https ://developer.mozilla.org/en-US/docs/DOM/window.location](https://developer.mozilla.org/en-US/docs/DOM/window.location)

# c++ - pow(x, 0.5f) 的快速实现是否比快速 sqrt(x) 快？

> ID：11810686
> 
> 赞同：9
> 
> 时间：2012-08-04T17:43:58.217
> 
> 标签：c++, c, performance, math

我想知道 pow() 的快速实现，例如[这个](http://martin.ankerl.com/2007/10/04/optimized-pow-approximation-for-java-and-c-c/)，是否是一种比快速 sqrt(x) 更快的获取整数平方根的方法。我们知道

```
sqrt(x) = pow(x, 0.5f) 
```

我无法自己测试速度，因为我没有找到 sqrt 的快速实现。我的问题是：快速实现 pow(x, 0.5f) 是否比快速 sqrt(x) 快？

编辑：我的意思是 powf - pow 需要花车而不是双打。（双打更容易误导）

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-04T17:52:25.637

关于 C 标准库`sqrt`和`pow`，答案是**否定**的。

首先，如果`pow(x, .5f)`比 的实现更快，则被`sqrt(x)`指派维护 sqrt 的工程师将用`pow(x, .5f)`.

其次，商业库中的 sqrt 实现通常专门针对执行该任务进行优化，通常由熟悉编写高性​​能软件并使用或接近汇编语言编写以获得处理器可用性能的人员进行优化。

第三，许多处理器都有执行 sqrt 或帮助计算它的指令。（通常，有一条指令可提供平方根倒数的估计值，以及改进该估计值的指令。）

### 然而

您链接的代码/您提出的问题是关于尝试`sqrt`使用粗略近似的`pow`.

我将问题中提到的 pow 近似例程的最终版本转换为 C，并在计算时测量了它的运行时间`pow(3, .5)`。我还测量了系统 (Mac OS X 10.8) pow 和 sqrt 的运行时间，以及[这里的 sqrt 近似值](http://en.wikipedia.org/wiki/Fast_inverse_square_root)（一次迭代并乘以最后的参数以获得平方根，而不是它的倒数）。

首先，计算结果： pow 近似返回 1.72101。sqrt 近似值返回 1.73054。系统 pow 和 sqrt 返回的正确值是 1.73205。

在MacPro4,1上以64位模式运行，pow近似需要6个周期，系统pow需要29个周期，平方根近似需要10个周期，系统sqrt需要29个周期。这些时间可能包括加载参数和存储结果的一些开销（我使用 volatile 变量来强制编译器不要优化掉否则无用的循环迭代，以便我可以测量它们）。

（这些时间是“有效吞吐量”，实际上是从一个调用开始到另一个调用开始的 CPU 周期数。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-07T20:50:58.323

在 MSVC++ 2013 64 位模式下运行以下代码的结果，完全优化。sqrt() 的性能约为 9 倍；

距离为 2619435809228.278300

Pow() 经过的时间是 18413.000000 毫秒

距离为 2619435809228.278300

Sqrt() 经过的时间是 2002.000000 毫秒

```
#define LOOP_KNT 249000000  // (SHRT_MAX * 1024)

int main(void)    {
    time_t start = clock();

    double distance = 0, result = 0;
    start = clock();
    for(int i=0; i<LOOP_KNT; i++) {
        result = pow(i, 0.50);
        distance += result;
    }
    printf("\nDistance is %f", distance);
   printf("\nPow() elapsed time was %f milliseconds", (double)clock() - (double)(start));

   distance = 0, result = 0;
   start = clock();
    for(int i=0; i<LOOP_KNT; i++) {
        result = sqrt(i);
        distance += result;
    }
    printf("\nDistance is %f", distance);
    printf("\nSqrt() elapsed time was %f milliseconds", (double)clock() - (double)(start));

   printf("\nHit any key to end program.\n");
   getchar();

   return 0;
} 
```

无需绞尽脑汁、理论化或夸夸其谈。只需编写基准并观察结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T17:51:47.217

一般来说，给定相同的误差约束，更具体的问题可以比更一般的问题更优化。

因此，您可以采用该算法，并将 b 替换为常数 0.5，现在您的 sqrt() 至少与 pow() 一样快。现在它是恒定的，编译器（或人类）可以基于它进行优化。

请注意，该 pow() 函数是一个近似值，并且具有（相对）较大的误差，因此不如大多数库 sqrt 函数那样准确。如果您将 sqrt 的实现放宽到相同的近似极限，您确实可以使其至少同样快。

# java - 当 Spring MVC 中使用 HibernateValidator 发生某些事件时，在运行时动态关闭或禁止验证

> ID：11810688
> 
> 赞同：2
> 
> 时间：2012-08-04T17:44:08.590
> 
> 标签：java, spring, validation, jsp, hibernate-validator

我正在使用[`HibernateValidator`](http://sourceforge.net/projects/hibernate/files/hibernate-validator/4.0.2.GA/hibernate-validator-4.0.2.GA-dist.zip/download?use_mirror=nchc)Spring MVC 3.0.2 验证 JSP 中的表单。早些时候，我使用该`Validator`界面来验证表单，当某些事件发生时可能不允许验证。

为了演示，我在 JSP 页面上有一个表单，其中只有两个文本字段和一个提交按钮。当这些字段填充了适当的值并单击提交按钮时，首先执行验证并将值插入到数据库中，如果没有违反任何验证规则。它工作正常。

表单上还有其他提交按钮来执行更新和删除等其他操作。因此，当单击此类按钮时，无需对这些文本字段进行验证，也**不得**执行。当某些此类事件发生时，有没有办法在运行时关闭或禁止验证？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T19:13:10.537

Jsr 303 有验证组的概念。这允许验证仅指定组的验证规则。*我确定我前段时间在so上回答过这样的问题，但目前我只有一部手机，所以搜索这个问题很痛苦*

# ios - Windows 7 和 Openssl：创建 p12 文件

> ID：11810689
> 
> 赞同：3
> 
> 时间：2012-08-04T17:44:10.527
> 
> 标签：ios, windows, flash, openssl

这曾经在我的最后一台计算机上工作，但我创建了一个 CSR 并将其上传到 Apple，它返回了一个有效的分发证书。但是当我运行 OpenSSL 来尝试创建 p12 文件时，我不断收到此错误：

```
"no certificate matches private key". 
```

我的批处理文件如下所示：

```
set OPENSSL_CONF=C:\OpenSSL-Win32\bin\openssl.cfg
set RANDFILE=.rnd
openssl x509 -in ios_distribution.cer -inform DER -out developer_identity.pem -outform PEM
pause
openssl pkcs12 -export -inkey mykey.key -in developer_identity.pem -out myfile.p12
pause 
```

我几乎尝试了所有方法，但我被严重卡住了。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T15:15:23.683

您是否尝试在导出命令中指定 Apple 的 WWDRCA 证书？

```
openssl pkcs12 -export -inkey mykey.key -in developer_identity.pem -certfile AppleWWDRCA.cer.pem -out myfile.p12 
```

或者，您也可以使用[Mobundler等在线工具](http://mobundler.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T21:08:16.407

您正在运行两个命令。第一个将证书从 DER 格式转换为 PEM。第二个接受转换后的证书并将其转换为 PKCS12，同时将私钥添加到证书中。Openssl 正在从您的私钥**mykey.key**生成公钥，并试图告诉您它与您的公钥**developer_identity.pem**不匹配。

您是否有任何其他可能匹配的私钥？否则，您需要根据您的私钥重新创建您的公钥。命令类似于：

```
openssl req -new -key mykey.key -out client.csr -config openssl.conf
openssl x509 -req -in client.csr -out client.crt 
```

# ruby-on-rails - 如何将第一个用户添加到使用 Authlogic、Devise 等的 Rails 应用程序？

> ID：11810693
> 
> 赞同：4
> 
> 时间：2012-08-04T17:44:49.277
> 
> 标签：ruby-on-rails, database, authentication, devise, authlogic

我有一个从 Git 存储库克隆的 Ruby on Rails 应用程序。它需要登录才能执行任何操作，例如注册新用户。目前没有注册用户，所以我认为自己完全被锁定了

我知道用户存储在一个名为`users`但底层数据库是 MySQL 的表中，我不知道如何访问 Ruby on Rails 应用程序的数据库。

有谁知道我将如何添加用户？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-04T17:49:24.343

这是一个非常“经典”的问题，并且直接的想法（“只做 mySQL”）在这里不起作用，因为需要有对输入的密码进行编码的 rails 片段。
所以你需要实际使用rails，像这样（这一切都应该发生在你的本地开发环境中，这是本地工作时的默认设置）：

您需要创建一个用户。

尝试这个：

cd the_root_of_the_project

```
script/rails console

> User.create(:username => 'admin', 
  :password => 'abc123', 
  :password_confirmation => 'abc123') 
  # Add other fields, such as first_name, last_name, etc. 
  # as required by the user model validators.
  # Perhaps :admin => true 
```

这假设了一些事情（因此根据需要进行更改），例如身份验证系统（如 authLogic 或设计、属性和字段名称等），但您应该能够根据自己的需要进行调整。您可以通过查看一些内容来确定这些是什么，特别是 db/migrate 中的数据库迁移文件、user/model/user 中的模型验证、db/seeds.rb 中用户的任何现有“种子”文件以及身份验证系统挂钩。

至于“在哪里”执行此操作-显然控制台可以工作，但您可能还想为此使用种子文件。您在控制台中使用的任何“创建”命令都可以放在此处，然后使用`rake db:seed`. 不利的一面是，如果您将此文件签入源代码管理，则安全性会降低。种子文件*对于*创建参考表、初始类别等其他任务非常有用。

如果您还没有实际创建数据库，则需要了解并使用以下任务：

```
rake db:create 
# as it sounds, creates a database (but no application tables or columns), 
# using the config/database.yml file for the connection info.

rake db:migrate 
# Creates tables and columns using the db/migrate/ files.

rake db:seed 
# Runs commands in db/seeds.rb to create initial records for the application. 
```

# asp.net-mvc-3 - ASP.NET MVC 3 Razor 视图返回 Html.CheckBoxFor 的多个值

> ID：11810695
> 
> 赞同：5
> 
> 时间：2012-08-04T17:44:52.027
> 
> 标签：asp.net-mvc-3, view, razor

我有一个包含以下代码行的视图：

```
//(DaysOfWeek is a bool[])
@Html.CheckBoxFor(m => m.Data.DaysOfWeek[0]) 
```

一开始是假的。当用户“选中”该框并返回时，它会返回一个真假值；

这是作为表单数据的一部分传回的内容

```
Data.DaysOfWeek[0]:true
Data.DaysOfWeek[0]:false 
```

为什么这样做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-04T20:14:58.160

这是因为如果未选中标准 HTML 复选框，则不会返回任何值。为了使这种烦人的行为更直观，该`CheckBoxFor`方法创建了一个复选框和一个具有相同名称的隐藏控件，其值为`false`，如下所示：

```
<input type="checkbox" name="myControl" value="True" /> My control
<input type="hidden" name="myControl" value="False" /> 
```

发布表单时您将看到的内容是：

```
False // checkbox unchecked
True,False // checkbox was checked 
```

因此，要测试该框是否被选中，您应该使用`Contains('True')`：

```
bool checkboxChecked = formCollection["myControl"].Contains("True"); 
```

# javascript - 将函数直接链接到 function(){}

> ID：11810697
> 
> 赞同：0
> 
> 时间：2012-08-04T17:44:55.350
> 
> 标签：javascript, function

所以偶尔，只是为了好玩，我会查看 Facebook 的源代码，寻找各种疯狂的 javascript。

所以在facebook聊天的textarea的keyup中，我发现：

```
Bootloader.loadComponents(["control-textarea"], function () {
    TextAreaControl.getInstance(this)
}.bind(this)); 
```

在我意识到`.bind()`直接添加到该函数之前，这似乎并不让我感兴趣。

我不知道你能做到这一点。

任何功能都可以`function(){}`像这样紧随其后吗？或者有没有一种特殊的方式你需要这样做。

我知道你可以链接类似的东西`"How are you doing!".replace(/\w{3}/g,'').toUpperCase()`，但不认为你直接链接到它`function(){}`本身。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T17:50:09.123

[`.bind`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)是 ES5 环境中的 Function 对象上可用的属性，或者`.bind`已添加到`Function.prototype`. 它就像对象上或通过原型链提供的任何其他属性一样。

该`.bind`方法返回一个新函数，其调用上下文*（和参数，如果提供）*永久绑定到该新函数。新函数调用原始函数的代码体，因此除了绑定的上下文和参数之外，其他行为是相同的。

# javascript - ZeroClipboard 用户脚本添加鼠标悬停，在 Firefox 中工作，但不是 chrome

> ID：11810699
> 
> 赞同：0
> 
> 时间：2012-08-04T17:45:14.767
> 
> 标签：javascript, flash, google-chrome, userscripts, zeroclipboard

我正在使用 zeroclipboard 在用户脚本中为相当大的列表中的每一行添加一个“复制”链接。[为了实现这一点，我使用了与此页](http://www.codelixir.com/zero-clipboard-multi-instance/)上列出的方法类似的方法，其中当用户将鼠标悬停在行上时，将为每一行创建 ZeroClipboard.Client() 元素。这在 FireFox 中效果很好，但在 Chrome 中却不行。

另请注意：我将 ZeroClipboard.js 文件的内容复制到用户脚本本身，而不是将其包含在外部文件中。

这是为每个元素创建复制按钮的标记
`<span style="color:blue; text-decoration:underline; cursor:pointer" id="copy_'+id+'" class="CopyLink" link="'+url+'" onmouseover="clipboard.add(this)">Copy</span>`

这是添加剪贴板客户端对象的代码段：

```
function main(){
    window.clipboard = {
        load: function (){
            if(!clipboard.initialized){
                ZeroClipboard.setMoviePath("http://www.swfcabin.com/swf-files/1343927328.swf");
                clipboard.initialized=true;
                console.log("Clipboard intialized");
            }
        },
        add: function(element){
            clipboard.load();
            var clip = new ZeroClipboard.Client();
            console.log('Clipboard client loaded: ' + element.id);

            clip.glue(element, element.parentNode);
            console.log('Clipboard glued: ' + element.id);

            clip.setText(element.getAttribute('link'));
            console.log('Clipboard text set: ' + element.getAttribute('link'));

            clip.addEventListener('complete',function(client,text) {
                console.log('Clipboard copied: ' + text);//doesn't fire in chrome
            });

            clip.addEventListener('load',function(client) {
                console.log('Clipboard loaded: ' + element.getAttribute('link'));
            });
        }        
    }
    //other code in user script including injecting above markup
    //as well as contents of ZeroClipboard.js
    window.ZeroClipboard = { ... }
}

var script = document.createElement("script");
script.appendChild(document.createTextNode('('+main+')()'));
(document.head || document.body || document.documentElement).appendChild(script); 
```

在此块中，当我将鼠标悬停并单击复制范围时，每个 console.log 都会在 FireFox 中触发，但在 chrome 中，除了“完整”侦听器触发之外的所有内容。[通过使用此页面](http://davidwalsh.name/demo/zero-clipboard.php)上的示例，我能够验证 ZeroClipboard 是否在我的 Chrome 中工作。我还能够验证 Flash 对象是否被添加到页面中的正确位置，但它根本没有响应点击。

[由于该站点](http://code.google.com/p/zeroclipboard/)不再维护 zeroclipboard 代码，因此我希望有人可以帮助我。我认为在鼠标悬停时动态添加 chrome 中的嵌入式 Flash 对象可能存在一些问题，或者 chrome 与 firefox 中的用户脚本与greasemonkey 之间可能存在一些差异？任何帮助将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T22:10:25.933

我不确定它背后的原因，但我也在 Chrome 上遇到了这个问题。我有两个 zeroclipboard 实现，一个在页面加载时可见，一个仅在用户打开对话框时可见。在页面加载时可见的一个按预期工作，但另一个没有。为了“解决”这个问题，我必须渲染 zeroclipboard 链接，将其绝对位置设置为离开屏幕（-500 像素），然后添加一些 javascript 以在对话框打开时将链接移动到位。这是一个丑陋的解决方案，但我认为这是让它在 Chrome 中工作的唯一方法。您的情况特别棘手，因为您的页面上有很多动态零剪贴板，而我只有一个，但在我看来，这没有理由不适合您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:52:17.977

```
<!-- <script type="text/javascript" src="http://davidwalsh.name/demo/ZeroClipboard.js"></script> -->
    function copyText(fieldName,buttonName){
        var fieldNameTemp =fieldName;
        var buttonNameTemp =buttonName;
        var val = "";
        try{
            val = navigator.userAgent.toLowerCase();
        }catch(e){}
        var swfurl = "js/ZeroClipboard.swf";
        setTimeout(function () {
            ZeroClipboard.setMoviePath(swfurl);
            var clip = new ZeroClipboard.Client();
            clip.addEventListener('mousedown', function () {
                clip.setText(document.getElementById(fieldNameTemp).value);
            });
            clip.addEventListener('complete', function (client, text) {
                try{
                    if(val.indexOf("opera") > -1 || val.indexOf("msie") > -1 || val.indexOf("safari") > -1 || val.indexOf("chrome") > -1){
                        alert('Your text has been copied');
                    }
                }catch(e){
                    alert('Please alert not use on fireFox');
                }
            });
            clip.glue(buttonNameTemp);
        }, 2000);
    } 
```

# c - 将目标文件链接到我的项目 Eclipse CDR

> ID：11810701
> 
> 赞同：3
> 
> 时间：2012-08-04T17:45:24.487
> 
> 标签：c, eclipse-cdt, object-files

我正在做一个学校的项目，我们得到了一个 .o 和一个相应的 .h 文件。我们需要在 .c 程序中使用 .o 文件中的几个函数。仅仅将它放在同一个目录中是行不通的。我试图在项目属性中寻找类似的东西，但没有好处。我不断得到`../code_files/Search.c:116: undefined reference to 'reportError'`

我在 Windows 7 下使用 Eclipse (Juno) CDT、gcc MinGW

我知道可以包含 .a 文件，但我找不到任何有关如何将 .o 文件 `#include "ErrorHandle.h"`包含在主 c 文件中的指示。

任何人都知道如何将 .o 文件包含到项目中？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-04T21:43:12.843

我找到了这个答案：

我尝试做类似的事情，只是我没有想到杂项 ![在此处输入图像描述](../Images/ba86144b66a47058063e8f50b5e118a7.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T18:44:14.433

您可以将 .a 简单地`.o`变成 a `.a`，`ar cvs library.a object.o`然后将 .a 添加到您的项目中。

# python - Python Tkinter 中的部分边框

> ID：11810702
> 
> 赞同：2
> 
> 时间：2012-08-04T17:45:56.140
> 
> 标签：python, tkinter, border, styling

是否可以对 Python Tkinter 中的元素应用部分边框（例如，仅在右侧边缘，或仅在顶部和底部的边框）？

编辑：[这](http://i.imgur.com/N5dnd.jpg)是我想要实现的布局 - 如果有人能看到比部分边界更好的实现方式，请随时指出 - 我对 Tkinter 不是很有经验！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T22:52:40.267

您的问题的答案取决于您所说的“边界”是什么意思。单个小部件具有边框（按钮等），对于那些您不能只更改部分边框的小部件。

相反，如果您询问如何布局小部件以便它们之间有分隔线，您可以使用 and 的and`padx`选项`pady`来做到这一点。对于那些你可以在每个边缘有不同数量的填充。`grid``pack`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T19:27:48.613

There is no way to this built in to tkinter, but why do you need this behaviour? There is probably a better way to accomplish what you need. See this [this resource](http://www.daniweb.com/software-development/python/threads/229211/tkinter#) for more help with your problem.

# android - Web 视图不起作用

> ID：11810705
> 
> 赞同：0
> 
> 时间：2012-08-04T17:46:06.687
> 
> 标签：android, android-emulator

我只是 Android 的初学者，我开始处理 webViews。事实上，我已经创建了两个按钮，它们将带我进入两个不同的活动，但是当我运行应用程序时，webview 不会加载 Google.com 页面。我已经插入了互联网许可。

在这里，我将 onClick 方法作为按钮中的一个属性，当我单击它时，它必须转到 Twitter 网站。我把它放在不同的活动课上。

```
 public void listen(View v)
 {
    Intent intent = new Intent(getApplicationContext(), onemore.class);
    startActivity(intent);          
 } 
```

这是活动课

```
package com.example.aboutme;

    import android.app.Activity;
    import android.os.Bundle;
    import android.webkit.WebView;

    public class onemore extends Activity 
    {
          private String uagent = "Mozilla/5.0 (Linux; U; Android 2.0; en-us; 
                                   Droid Build/ESD20) AppleWebKit/530.17 
                                   (KHTML, like Gecko) Version/4.0 Mobile 
                                   Safari/530.17";

        public void onCreate(Bundle savedInstanceState) 
        {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.twomore);
            displayTweets();
        }

        private void displayTweets() 
        {
            WebView mWebView = (WebView) findViewById(R.id.webView1);
            mWebView.getSettings().setJavaScriptEnabled(true);

            mWebView.getSettings().setUserAgentString(uagent); 

            mWebView.loadUrl("http://mobile.twitter.com/");
        }

    } 
```

xml布局

```
<?xml version="1.0" encoding="utf-8"?>
    <WebView xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:id="@+id/webView1" 

    /> 
```

清单 xml

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.aboutme"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >

        <activity
            android:name=".WebViewActivity"
            android:label="@string/app_name"
            android:theme="@android:style/Theme.NoTitleBar" />

        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >

            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>

        </activity>
     <activity android:name=".ActivityTwo" android:label="@string/app_name"/>

    </application>

        <uses-permission android:name="android.permission.INTERNET" />

</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T21:06:10.593

你的清单中有这一行吗？我没有看到它，但也许你从 ActivityTwo 更改了 SO 问题的名称。

> 活动 android:name=".onemore">

当我运行它时，您的代码运行良好。您收到的错误信息是什么？

# c++ - 删除动态数组中的 int 值并将其设置为 NULL

> ID：11810707
> 
> 赞同：0
> 
> 时间：2012-08-04T17:46:30.873
> 
> 标签：c++

所以我的代码假设将数字插入动态数组，如果需要更多容量，则向数组添加更多容量，从数组中删除数字，然后确保唯一的 NULLS 出现在数组的末尾。它还告诉用户数组中有多少个数字以及数组的总大小是多少。我的问题是当我从数组中删除一个数字时，它有时会打印出我的数组中有一个数字 -33686019。这不会发生太多，但我根本不希望它发生。

```
#include <stdio.h>
#include <iostream>

int* gArray = NULL;
int gSize = 0;
int gCapacity = 0;
void Insert(int value);
void Remove(int value);
void Resize(int newCapacity);
void Print(void);

void main()
{
int input = 0;

while(input != 3)
{
    printf(">=== Dynamic Array ===\n");
    printf("What do you want to do?\n");
    printf("1\. Insert\n");
    printf("2\. Remove\n");
    printf("3\. Quit\n");
    printf("Your choice: ");
    scanf_s("%d", &input);
    printf("\n\n");

    int value = 0;

    switch(input)
    {
    case 1:
        {
            printf("Enter a number: ");
            scanf_s("%d", &value);
            Insert(value);
            Print();
            break;
        }
    case 2:
        {
            printf("Enter number you wish to delete: ");
            scanf_s("%d", &value);
            Remove(value);
            Print();
            break;
        }
    case 3:
        {
            break;
        }
    default:
        {
            printf("Invalid selection\n");
        }
    }
}
}
void Insert(int value)
{
bool valueSet = false;

while(valueSet == false)
{
    if(gArray == NULL)
    {
        Resize(1);
        gArray[gSize] = value;
        ++gSize;
        valueSet = true;
    }
    else if(gArray[gCapacity] == NULL)
    {
        gArray[gSize] = value;
        ++gSize;
        valueSet = true;
    }
    else if(gArray[gCapacity] != NULL)
    {
        Resize((gCapacity + 1));
        gArray[gSize] = value;
        ++gSize;
        valueSet = true;
    }
}

}
void Resize(int newCapacity)
{
int* tempArray = new int[newCapacity];
std::copy(gArray, gArray+(newCapacity-1), tempArray);
gArray = new int[newCapacity];
std::copy (tempArray, tempArray+(newCapacity-1), gArray);
gCapacity = newCapacity;
}
void Remove(int value)
{
for(int i = 0; i < gCapacity; ++i)
{
    if(gArray[i] == value)
    {
        gArray[i] = NULL;
        --gSize;
    }
}
for(int i = 0; i < gCapacity; ++i)
{
    if(gArray[i] == NULL)
    {
        gArray[i] = gArray[(i + 1)];
        gArray[(i + 1)] = NULL;
    }
}
}
void Print(void)
{
printf("Array contains: ");
for(int i = 0; i < gCapacity; ++i)
{
    if(gArray[i] != NULL)
    {
        printf("%d, ", gArray[i]);
    }
}
printf("size = %d, capacity = %d\n", gSize, gCapacity);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T18:11:06.883

由于您使用的是 c++ 标准库，因此一个选项是删除所有代码，并使用std [::list](http://en.cppreference.com/w/cpp/container/list)及其方法。如果您需要数据位于动态数组中，则使用[std::vector](http://en.cppreference.com/w/cpp/container/vector)和[擦除删除](http://en.wikipedia.org/wiki/Erase-remove_idiom)习惯用法进行删除。`insert``remove`

我必须指出，由于您的问题是“*删除动态数组中的 int 值并将其设置为 NULL* ”，因此将 int 设置`NULL`为本质上是将其设置为 value `0`，因为`NULL`往往是对`0`. 因此，如果您的列表包含零，则此设置`NULL`和检查是否相等`NULL`将完全破坏您的算法逻辑。C++11 有`nullptr`一个不能分配给 int 的实际 null 类型来处理这类问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T18:05:25.803

具体问题是您没有`tempArray`在函数中初始化新数组（resp。）`Resize`。

打电话时

```
int* tempArray = new int[newCapacity]; 
```

数组可以包含任意值。仅从`newCapacity-1`旧数组中复制值，因此最后一个值未定义。它可能是 0，但不一定是。利用

```
std::fill(tempArray, tempArray+newCapacity, 0); 
```

用零初始化你的数组。

除此之外，还有一些其他问题：

*   在分配新数组之前不要删除旧数组。为此使用`delete[] gArray`。也不`tempArray`删！
*   您不需要复制值两次。只是到一个`gArray = tempArray`（删除旧的后`gArray`，见上文）
*   您假设它`newCapacity`比（您从旧数组`gCapacity`复制值）大一。`newCapacity-1`最好是复制`gCapacity`值。
*   只增长一的动态数组效率低下，因为添加一个值需要线性时间（插入一个值时必须复制所有旧值）。通常，每次空间不足时，数组的大小都会增加一倍，这平均会产生恒定的插入时间。
*   NULL 通常只用于指针。对于整数，它等于零，这意味着您不能存储`0`在数组中（根据您的要求）
*   在生产代码中，我 *强烈*建议使用`std::vector`而不是任何本地解决方案。

**编辑**

请参阅@StackUnderflows 答案以了解可能是错误的真正原因。如果你在 Debug 模式下运行，一些编译器会自动为你初始化数组，这可能是这里的 ccase。

另一方面，`gArray[i]=gArray[i+1]`您的函数中的行肯定是错误的，因为它访问的值超出了数组的限制。`Remove`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T18:07:18.353

问题发生在`Remove`when you do的第二个循环的最后一次迭代中`gArray[i] = gArray[i + 1]`。在最后一次迭代中，`gArray[i + 1]`实际上是数组末尾的一个，因此您现在处于未定义的行为领域。您正在将此未定义的值分配给最后一个元素`gArray[i]`。

* * *

我建议`std::vector<int>`改用。它在引擎盖下操纵一个数组，当您添加更多元素时，该数组会为您增长/调整大小。

# javascript - mouseenter/mouseout 使 div 闪烁

> ID：11810710
> 
> 赞同：0
> 
> 时间：2012-08-04T17:46:50.053
> 
> 标签：javascript, jquery, tooltip, mouseenter, mouseout

我有一个在 mouseenter 事件上显示并在 mouseout 事件上隐藏的工具提示。有时，并非总是如此，当鼠标在工具提示的图像内移动时，工具提示会闪烁。我怎样才能防止这种情况发生？有一个更好的方法吗？

这是我的代码：

```
$('#home_pic').mouseenter(function() {
    $('#home_tip').show();
});
$('#home_pic').mouseout(function() {
    $('#home_tip').hide();
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-04T17:50:45.360

使用 mouseleave 代替 mouseout()

```
$('#home_pic').mouseleave(function() {
    $('#home_tip').hide();
}); 
```

或使用 .hover

```
 $('#home_pic').hover(function() {
        $('#home_tip').hide();
    },function() {
        $('#home_tip').show();
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T18:09:07.307

您可以为此使用该`toggle()`函数，它接受一个布尔值来设置状态，例如：

```
$('#home_pic').on('mouseenter mouseleave', function(e) {
    $('#home_tip').toggle(e.type==='mouseenter');
}); 
```

[**小提琴**](http://jsfiddle.net/Tz7pw/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T17:49:43.180

尝试 mouseleave 而不是 mouseout 像这样：http: [//jsfiddle.net/tncbbthositg/dWKfX/](http://jsfiddle.net/tncbbthositg/dWKfX/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T17:53:39.927

您需要以正确的方式编写 mouseenter 和 mouseleave 函数，如下所示：

```
$('#home_pic').mouseenter(function() {
    $("#home_pic").show();
},mouseleave(function() {
    $("#home_pic").hide();
})); 
```

注意：代码未经测试可以工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-05T21:04:06.617

you can also try something like this if the tooltip runs over the home pic - I've used very similar code to pop up bubbles on a image map

```
$('#research_area').mouseover(function() {
$('img#research').css('display', 'block');
runthis();
});

function runthis () {
if ( $('img#research').css('display') == 'block')  {
$('img#research').mouseleave(function() {
    $(this).css('display', 'none');
    });
} 
```

[http://www.karpresources.com/](http://www.karpresources.com/)

# php - 如何从网站检索数据

> ID：11810714
> 
> 赞同：1
> 
> 时间：2012-08-04T17:47:34.017
> 
> 标签：php, login, extract

我想从几个不同的网站（即我所有不同的流收入）中检索一些数据，并将它们显示在我网站的单个页面上。请注意，为了读取当前收入，我必须登录所有这些网站，而不是浏览一些页面并最终检索数据。知道如何做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T17:50:40.243

您可能需要并使用[cURL](http://php.net/manual/fr/book.curl.php) / [file_get_contents](http://www.php.net/manual/fr/function.file-get-contents.php)然后[preg_replace](http://php.net/manual/fr/function.preg-replace.php)来获得您想要的。
现在，编码部分是你的工作。

# java - 何时调用构造函数之外的初始化？

> ID：11810716
> 
> 赞同：4
> 
> 时间：2012-08-04T17:47:45.687
> 
> 标签：java, constructor

假设我有

```
class MyObject
{
    Object object1 = new Object();
    Object object2;

    public MyObject()
    {
        object2 = new Object();
    }

    public MyObject(Object object2)
    {
        this.object2 = object2;
    }

    public MyObject(Object object1, Object object2)
    {
        this.object1 = object1;
        this.object2 = object2;
    }
} 
```

什么时候`object1`初始化？之前`object2`，之后`object2`，取决于？

如果我的构造函数与 的全局定义冲突`object1`，例如在上面的第三个构造函数中，会发生什么情况。取哪个值`object`？

这不会给我带来任何问题，但我只是想更好地理解这门语言。我喜欢了解这些小东西，以便我以后可以利用它们。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-04T17:50:22.660

*   变量被初始化为其类型的默认值（0、null 等）

*   首先调用超类构造函数。如果超类构造函数调用在此类中重写的任何虚方法，则重写将看到默认值，而不管构造函数主体中的任何变量初始化器或初始化。

*   然后执行变量初始化器。

*   然后执行构造函数体。

因此，如果您在构造函数主体中更改变量的值，则变量初始化器设置的任何值都将被覆盖。（当然，先前的值可能已用于其他链式构造函数等。）

有关详细信息，请参阅JLS 的[第 12.5 节。](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T17:59:47.320

如果要确认行为，请使用[javap](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/javap.html)或类似工具检查字节码。尽管[Jon 是正确](https://stackoverflow.com/a/11810737/304)的，但将规范称为第一个调用端口。

```
Compiled from "MyObject.java"
class MyObject {
  java.lang.Object object1;

  java.lang.Object object2;

  public MyObject();
    Code:
       0: aload_0
       1: invokespecial #11               // Method java/lang/Object."<init>":()V
       4: aload_0
       5: new           #3                // class java/lang/Object
       8: dup
       9: invokespecial #11               // Method java/lang/Object."<init>":()V
      12: putfield      #13               // Field object1:Ljava/lang/Object;
      15: aload_0
      16: new           #3                // class java/lang/Object
      19: dup
      20: invokespecial #11               // Method java/lang/Object."<init>":()V
      23: putfield      #15               // Field object2:Ljava/lang/Object;
      26: return 
```

# jquery - 了解 jQuery Facebook 登录插件语法

> ID：11810723
> 
> 赞同：1
> 
> 时间：2012-08-04T17:48:57.150
> 
> 标签：jquery, facebook, plugins, syntax

有人可以解释一下我试图破译的这段代码吗？在我看来它仍然很有趣。

因为我需要 Facebook 登录逻辑……也因为我喜欢了解代码的作用……范围等……

哪个函数先运行，外部函数还是内部函数？这是另一种编写插件代码的方式吗？

```
var openid = {

 },doJsFacebookLogin: function (a) {
        window.FB.login(function (b) {
            b.authResponse && (b = "/users/oauth/facebook/js?accessToken=" + encodeURI(b.authResponse.accessToken),
            a && (b += "&returnUrl=" + encodeURI(a)), window.location = b)
        }, openid.facebook_login_params)
    }, 
```

此外，逗号在正文中代表什么？

```
 facebookLogin: function (a, b, c) {
        c || ($("." + b).css("cursor", "wait"), openid.facebook_app_id ? openid.doJsFacebookLogin() : (this.setOAuthInfo(a.oauth_version, a.oauth_server), c || $("#openid_form").submit()))
    },
etc... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T18:12:42.003

> 哪个函数先运行，外部函数还是内部函数

当外层运行时，它会调用内层。

这基本上没有什么不同，比方说

```
function foo() {
  alert("bar");
} 
```

- 你自己会`foo()`在你的代码中调用某个地方，然后那个函数调用`alert`窗口对象的方法来显示一条小消息，说“bar”。

> 逗号在正文中代表什么？

这只是一种实际上没有单个*语句*并用分号分隔它们的方法——而是使用*表达式*，并用逗号分隔它们。（它本身是 JavaScript 中的运算符，但它仅表示一系列表达式，它不以任何方式在逻辑上连接它们。）

只要一个语句也构成一个有效的表达式，你就可以这样做；尽管在这种情况下我看不出这样做有什么实际好处——如果单个表达式的结果通过其他逻辑运算符如 fe && 或 || 逻辑连接在一起，那么整个表达式的值会有所不同用作该函数的返回值，以便调用它的其他函数/代码部分可以以这种方式确定函数的成功或失败。

如果您不熟悉 JavaScript 中表达式的实际构成，请在此处查看示例[http://lib.ru/JAVA/javascr/expr.html#expr](http://lib.ru/JAVA/javascr/expr.html#expr)（或查看您选择的 JS 书籍）。

# iis - 如何使启动任务具有幂等性？

> ID：11810724
> 
> 赞同：8
> 
> 时间：2012-08-04T17:48:58.057
> 
> 标签：iis, azure, dos, appcmd

我在批处理文件中有许多启动任务。特别是我调用 IIS`appcmd.exe`来配置 IIS。Azure 中的启动任务应该是幂等的（即，能够以相同的结果重复运行），以防角色因某种原因重新启动。不幸的是，我的许多 IIS 配置命令第二次都会失败，例如，因为它们第一次删除了一个配置节点，而该节点在随后的运行中不存在。

我的问题是，如何使这些启动任务具有幂等性？有没有办法让 appcmd.exe 不抛出错误？有没有办法让 shell 捕获错误？有没有办法让 Azure 框架忽略错误？

这是我的启动任务的示例。这都包含在一个命令文件中，`configiis.cmd`.

```
@REM Enable IIS compression for application/json MIME type
%windir%\system32\inetsrv\appcmd.exe set config -section:system.webServer/httpCompression /+"dynamicTypes.[mimeType='application/json',enabled='True']" /commit:apphost
%windir%\system32\inetsrv\appcmd.exe set config -section:system.webServer/httpCompression /+"dynamicTypes.[mimeType='application/json; charset=utf-8',enabled='True']" /commit:apphost

@REM Set IIS to automatically start AppPools
%windir%\system32\inetsrv\appcmd.exe set config -section:applicationPools -applicationPoolDefaults.startMode:AlwaysRunning /commit:apphost

@REM Set IIS to not shut down idle AppPools
%windir%\system32\inetsrv\appcmd set config -section:applicationPools -applicationPoolDefaults.processModel.idleTimeout:00:00:00 /commit:apphost

@REM But don't automatically start the AppPools that we don't use, and do shut them down when idle
%windir%\system32\inetsrv\appcmd.exe set config  -section:system.applicationHost/applicationPools "/[name='Classic .NET AppPool'].startMode:OnDemand" "/[name='Classic .NET AppPool'].autoStart:False" "/[name='Classic .NET AppPool'].processModel.idleTimeout:00:01:00" /commit:apphost
%windir%\system32\inetsrv\appcmd.exe set config  -section:system.applicationHost/applicationPools "/[name='ASP.NET v4.0'].startMode:OnDemand" "/[name='ASP.NET v4.0'].autoStart:False" "/[name='ASP.NET v4.0'].processModel.idleTimeout:00:01:00" /commit:apphost
%windir%\system32\inetsrv\appcmd.exe set config  -section:system.applicationHost/applicationPools "/[name='ASP.NET v4.0 Classic'].startMode:OnDemand" "/[name='ASP.NET v4.0 Classic'].autoStart:False" "/[name='ASP.NET v4.0 Classic'].processModel.idleTimeout:00:01:00" /commit:apphost

@REM remove IIS response headers
%windir%\system32\inetsrv\appcmd.exe set config /section:httpProtocol /-customHeaders.[name='X-Powered-By'] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T19:07:02.023

除了@Syntaxc4 的回答：考虑在本地使用面包屑（文件）。在您的脚本中，检查是否存在已知文件（您创建的）。如果它不存在，请检查您的启动脚本，同时创建一个面包屑文件。下次启动 vm 时，它会再次检查面包屑文件是否存在，如果存在，则退出 cmd 文件。如果面包屑文件消失，这通常意味着您的 vm 已在其他地方重建（新实例或重新生成的实例可能在不同的硬件上）并且需要 IIS 配置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-04T18:10:02.437

在尝试删除它之前，您必须检查配置设置是否存在（添加条件逻辑）。这可以通过以下方式实现：

'appcmd.exe 列表配置-详细信息'

捕获返回值会给你一些比较的东西，无论是输出长度还是实际值。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-17T00:11:00.977

MSDN 现在包含一个很好的指南，通过处理来自 APPCMD 的错误代码来执行此操作。

[http://msdn.microsoft.com/en-us/library/windowsazure/hh974418.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/hh974418.aspx)

基本上在任何 appcmd 操作之后，您可以执行以下操作：

```
IF %ERRORLEVEL% EQU 183 DO VERIFY > NUL 
```

并忽略任何可接受的错误代码。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-06T17:39:35.667

根据 David Makogon 的建议，我在每个 .cmd 文件的顶部添加了以下内容。这似乎可以解决问题。它将在与执行脚本相同的目录中创建一个标志文件（David 称之为面包屑文件），然后在后续运行中检查它。

```
@REM A file to flag that this script has already run
@REM because if we run it twice, it errors out and prevents the Azure role from starting properly
@REM %~n0 expands to the name of the currently executing file, without the extension
SET FLAGFILE=c:\%~n0-flag.txt

IF EXIST "%FLAGFILE%" (
  ECHO %FLAGFILE% exists, exiting startup script
  exit /B
) ELSE (
  date /t > %FLAGFILE%
) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-27T17:29:03.580

我强烈建议`/config:* /xml`在命令的末尾使用`list`。有关我如何使 iis 幂等的更多信息，请查看：[https ://github.com/opscode-cookbooks/iis](https://github.com/opscode-cookbooks/iis)

Chef 是多个配置管理平台之一，我只是建议通过列出当前设置并将它们与请求更改的设置进行比较来查看具有幂等性的代码（在 ruby​​ 中）。

# c# - 如何验证 DataGridView 输入？

> ID：11810730
> 
> 赞同：3
> 
> 时间：2012-08-04T17:49:56.980
> 
> 标签：c#, sql-server, entity-framework, data-binding, datagridview

*我对DataGridView*输入验证有一些严重的问题：

我正在使用 Entity Framework 开发一个项目，并且已将*DataGridView*元素绑定到数据库。

如果用户将一些数据插入到不可为空的列中，然后清除数据以将该列留空，然后单击另一个*DataGridView*单元格，则会发生异常并出现运行时错误。

或者，如果用户尝试将字符串插入整数列，他们会收到一条非常长的错误消息，这根本不利于用户。

*验证DataGridView*单元格是否有任何简单的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T20:50:03.680

我相信您正在寻找`DataGridView.DataError`活动。如果您想对数据进行自定义验证，您应该处理此事件。像这样的东西：

```
 private void Form1_Load(object sender, EventArgs e)
    {
        dataGridView1.DataSource = entities;
        dataGridView1.DataError += new DataGridViewDataErrorEventHandler(dataGridView1_DataError);
    }

    void dataGridView1_DataError(object sender, DataGridViewDataErrorEventArgs e)
    {
        // you can obtain current editing value like this:
        string value = null;
        var ctl = dataGridView1.EditingControl as DataGridViewTextBoxEditingControl;

        if (ctl != null)
            value = ctl.Text;

        // you can obtain the current commited value
        object current = dataGridView1.Rows[e.RowIndex].Cells[e.ColumnIndex].Value;
        string message;
        switch (e.ColumnIndex)
        {
            case 0:
                // bound to integer field
                message = "the value should be a number";
                break;
            case 1:
                // bound to date time field
                message = "the value should be in date time format yyyy/MM/dd hh:mm:ss";
                break;
            // other columns
            default:
                message = "Invalid data";
                break;
        }

        MessageBox.Show(message);
    } 
```

您可以检查输入数据的值并显示该值的相应错误消息。例如，如果 value 为 null 或为空并且该字段不可为 null，则可以显示一条消息，指示 value 不能为空。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-20T23:33:44.650

将以下代码用于处理[`DataError`](http://msdn.microsoft.com/en-gb/library/system.windows.forms.datagridview.dataerror.aspx)事件：

```
switch (e.ColumnIndex)
        {
            case 0:
                // bound to integer field
                message = "the value should be a number";
                break;
            case 1:
                // bound to date time field
                message = "the value should be in date time format yyyy/MM/dd hh:mm:ss";
                break;
            // other columns
            default:
                message = "Invalid data";
                break;
        }

        MessageBox.Show(message); 
```

# c# - Windows Phone HtmlAgilityPack 无法从指定类获取节点

> ID：11810731
> 
> 赞同：0
> 
> 时间：2012-08-04T17:49:59.007
> 
> 标签：c#, windows-phone, html-agility-pack

我已经在这个问题上停留了很长时间。我有这个 HTML：

```
<a href="http://www.sample.com/samplepath/" class="sample_model">Test</a> 
```

我正在使用以下 C# 代码来检索节点

```
var imagediv = (from imgnode in document.DocumentNode.Descendants()
                                where imgnode.Name == "a" &&
                                imgnode.Attributes["class"].Value == "sample_model"
                                select imgnode).FirstOrDefault(); 
```

当我调试并进入此代码时，它超出了范围。我没有得到我想要的，也没有得到错误。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T17:55:06.523

这应该工作

```
var imagediv = (from imgnode in document.DocumentNode.Descendants("a")
                where imgnode.Attributes["class"].Value == "sample_model"
                select imgnode).FirstOrDefault(); 
```

或者干脆

```
var imagediv = document.DocumentNode.SelectSingleNode("//a[@class='sample_model']"); 
```

# java - 如何在 Integer.parseInt(str) 的返回值中计算 int 表达式

> ID：11810735
> 
> 赞同：0
> 
> 时间：2012-08-04T17:50:14.517
> 
> 标签：java, string, int

Java代码...

如果我有

```
int num = 10 + 5;
System.out.println(num); 
```

结果是 15

如果我有

```
String str = "10";
int number = Integer.parseInt(str);
System.out.println(number); 
```

结果是 10

但如果我有

```
String str = "10 + 5"; //here the problem.
int number = Integer.parseInt(str);
System.out.println(number); 
```

结果是错误消息。

如何正确地做到这一点。我想要实现的是从字符串中获取表达式并计算它。我被迫从字符串中获取它，因为我从 JTextfield 中获取它，所以我想对返回的字符串表达式进行计算。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T17:54:52.977

没有简单的方法可以直接完成，因为您需要某种“表达式评估器”。一种方法是使用脚本库中的 javascript 引擎：

```
public static void main(String[] args) throws Exception {
    ScriptEngineManager factory = new ScriptEngineManager();
    ScriptEngine engine = factory.getEngineByName("JavaScript");

    String s = "10 + 5";
    int  result = ((Double) engine.eval(s)).intValue();
    System.out.println(result); // 15
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T17:56:14.200

看起来已经回答了一个类似的问题：[Java 中有 eval() 函数吗？](https://stackoverflow.com/questions/2605032/using-eval-in-java)

但是，您可以通过将字符串拆分为数组并编写算法来处理操作来编写一个非常简单的解析器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T17:56:15.307

您将不得不编写一个表达式解析器来分离操作数和运算符，然后相应地执行操作。您不能传递`10 + 5`并`Integer.parseInt()`期望评估结果。

# x86 - x86 实模式下的 USB 控制

> ID：11810736
> 
> 赞同：5
> 
> 时间：2012-08-04T17:50:17.780
> 
> 标签：x86, usb, real-mode

我正在开发一个原始的 x86 实模式 USB 访问项目。这涉及自定义引导扇区、第二阶段引导加载程序和一些琐碎的硬件驱动程序。

最终目标是提供一种可以启动、通过 USB 接口发送数据、通过 USB 接口接收数据并将结果值打印到屏幕的产品。除了 USB 访问之外，我已经完成了一切。

我已经发现 BIOS 不提供对板载 USB 的访问。从 osdevver 到breakthorn，我已经浏览了几十个站点。我什至看过 USB 2.0 规范。

没有人提供任何有关在 x86 实模式下使用 x86 程序集直接访问 USB 根集线器的相关或有用信息，而无需通过某些预先存在的操作系统。

没有为 USB 根集线器设置标准输入/输出端口吗？如果有，文档究竟在哪里指定允许软件告诉集线器要发送什么数据以及将该数据发送到哪个连接设备的标准通信？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-02T19:58:49.453

在实模式下不可能有 USB 接口。[您可以在PrettyOS](http://sourceforge.net/p/prettyos/code/HEAD/tree/trunk/)中所示的保护模式下实现它。如果我们与我们的 PS/2 接口相比，实现起来并不容易。

# objective-c - 在 Objective-C 中使用最大公约数作为比率？

> ID：11810744
> 
> 赞同：-1
> 
> 时间：2012-08-04T17:50:58.930
> 
> 标签：objective-c, ios, greatest-common-divisor

我想在 Objective-C 中编写一个方法，它会产生一个文本字符串'a:b:c:d'。我有四个 UISteppers（它们的值分别显示在一个标签中）。我希望这四个数字的比率以它们的最低整数形式显示，包括如果有些是 0。

例如。a=6, b=4, c=0, d=0 文本字符串 = 3:2:0:0

我找到了各种查找最大公约数的方法，包括[http://macscripter.net/viewtopic.php?id=35759](http://macscripter.net/viewtopic.php?id=35759)。然而，我对iOS真的很陌生，这是我在Hello World之后的第一个应用程序，数学函数甚至声明一个方法，定义它和调用它仍然是一个谜。

你能帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T09:44:24.823

我选择了一种采用标签值并更改比率标签的方法：

```
- (void)CalculateRatio {
   int temp;
   int PRBCs = [self.labelPRBCs.text integerValue];
   int FFP = [self.labelFFP.text integerValue];
   int u = PRBCs;
   int v = FFP;
   while (v != 0) {
       temp = u % v;
       u = v;
       v = temp;
   }
   int PRBCratio = PRBCs / u;
   int FFPratio = FFP / u;
   double Plateletratio = [self.labelPlatelets.text doubleValue] / u;
   double Cryoratio = [self.labelCryo.text doubleValue] / u;
   NSString *returnValue = [NSString stringWithFormat:@"%d : %d : %.1lf : %.1lf", PRBCratio, FFPratio, Plateletratio, Cryoratio];
   self.calculatedRatio.text = returnValue;
} 
```

如果您能看到一些语法错误以及改进方法，我会很高兴听到它们。干杯。

# c# - SQl服务器TVF CLR函数返回行索引？

> ID：11810747
> 
> 赞同：0
> 
> 时间：2012-08-04T17:51:09.200
> 
> 标签：c#, .net, sql-server, sql-server-2008, sqlclr

我有这个简单的 C# 代码，Sql Server 使用它来返回`TVF`：

```
[SqlFunction(FillRowMethodName = "FillRow3")]
public static IEnumerable GetCsv(string csv)
{
    string[] arr = csv.Split(',');
    return arr;
}

public static void FillRow3(Object obj, out int val, out int index)
{
    val = int.Parse((string)obj) ;
    index =  ??? <----------?
} 
```

但是-我想返回一个包含 2 列的表： `( val,index)`

如何根据每行返回其索引（从 0 开始）`arr`

（`obj`是来自的*行*`arr`。）

*`MyItem`ps - 我可以在方法中创建一个包含 [value,index]的数组`GetCsv`。
然后 - obj 行 (val+index) 将对`FillRow3`方法可见。但我不想那样做。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T18:41:20.023

我解决了。

我想在以下位置制作一个计数器：

```
public static void FillRow3(Object obj, out int val, out int index)
{

} 
```

但它必须是静态的。

所以我尝试创建一个静态字段：

```
public static   int g = 0;
public static void FillRow2(Object obj, out int val, out int index)
{
    val = (int.Parse((string) obj)*2);
    int h = g;
   index = h++;
} 
```

但随后 SQL 喊道：

> CREATE ASSEMBLY 失败，因为安全程序集“MyDll2”中的类型“Class1”具有静态字段“g”。安全程序集中静态字段的属性必须在 Visual C# 中标记为只读，在 Visual Basic 中标记为只读，在 Visual C++ 和中间语言中标记为 initonly。

但如果我有一个`readonly int`- 我*将无法*改变它。

所以我为它创建了一个包装器引用对象`int`。

*引用*不会改变，Int*会*...... :)

所以我的最终解决方案是：

```
 public class MyCounter
    {
        public  int cnt;
    }  

    public static readonly MyCounter mc = new MyCounter();

    public static void FillRow2(Object obj, out int val, out int index)
    {
        val = (int.Parse((string) obj)*2);

        index = mc.cnt++;
    } 
```

和..................

![在此处输入图像描述](../Images/8fe97d7310b11ccffcf33fee1ea39067.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T22:15:20.760

它应该如下所示：

```
[SqlFunction(FillRowMethodName = "FillRow3")]
public static IEnumerable GetCsv(string csv)
{
    string[] arr = csv.Split(',');
    return arr.Select((x, i) => Tuple.Create(x, i));
}

public static void FillRow3(Object obj, out string val, out int index)
{
    var input = (Tuple<string, int>)obj;
    val = input.Item1;
    index = input.Item2;
} 
```

请注意，不需要静态变量。如果您认为 SQL Server 内部的静态不是问题，请研究此问题。

# php - 如何在 Symfony 中使用 FosUserBundle 访问用户管理器作为服务？

> ID：11810751
> 
> 赞同：2
> 
> 时间：2012-08-04T17:51:59.980
> 
> 标签：php, symfony, fosuserbundle

所以通常我可以通过执行以下操作来访问控制器中的用户管理器：

```
$this->get('fos_user.user_manager'); 
```

但是我需要在服务中访问它。所以这就是我所做的：

在我的 config.yml 文件中：

```
fos_user:
    db_driver: orm
    firewall_name: main
    user_class: Main\UserBundle\Entity\User

services:
    userbundle_service:
        class:        Main\UserBundle\Controller\UserBundleService
        arguments: [@fos_user] 
```

在我的 UserBundleService.php 中：

```
<?php
namespace Main\UserBundle\Controller;

use FOS\UserBundle\Entity\User;
use Symfony\Component\Security\Core\SecurityContextInterface;
use Symfony\Bridge\Monolog\Logger;

class UserBundleService
{

     protected $securityContext;

    public function __construct(User $user)
    {
        $this->user = $user;
    }

    public function validateRequest(){    
   $userManager = $this->container->get('fos_user.user_manager');
  $this ->logger->warn("user is : ".$userManager);
  exit;

    }

} 
```

我得到的错误是：

```
ServiceNotFoundException: The service "userbundle_service" has a dependency on a non-existent service "fos_user". 
```

所以我接下来要做的就是将 fos_user 作为服务移入 config.yml ：

```
services:
    userbundle_service:
        class:        Main\UserBundle\Controller\UserBundleService
        arguments: [@fos_user2]

    fos_user2:
        user_class: Main\UserBundle\Entity\User 
```

我得到错误：

```
RuntimeException: The definition for "fos_user2" has no class. If you intend to inject this service dynamically at runtime, please mark it as synthetic=true. If this is an abstract definition solely used by child definitions, please add abstract=true, otherwise specify a class to get rid of this error. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T05:59:13.720

您必须注入与通常使用服务容器在控制器中获取它的名称完全相同的服务：

```
services:
    userbundle_service:
        class:        Main\UserBundle\Controller\UserBundleService
        arguments: [@fos_user.user_manager] 
```

* * *

您还可以调用控制台`app/console container:debug`并检查您拥有哪些容器

# sql - 想要通过 SQL/TSQL 获得与我通过 LINQ 查询获得的相同的输出

> ID：11810752
> 
> 赞同：0
> 
> 时间：2012-08-04T17:52:02.907
> 
> 标签：sql, sql-server, linq, tsql

使用 LINQ 我正在查询数据进行排序，我得到了正确的答案。

这是我的数据和 linq 查询......请看看。

```
void Main()
{
List<SearchResult> list = new List<SearchResult>() {
    new SearchResult(){ID=1,Title="Geo Prism GEO 1995 GEO* - ABS #16213899"},
    new SearchResult(){ID=2,Title="Excavator JCB - ECU P/N: 728/35700"},
    new SearchResult(){ID=3,Title="Geo Prism GEO 1995 - ABS #16213899"},
    new SearchResult(){ID=4,Title="JCB Excavator JCB- ECU P/N: 728/35700"},
    new SearchResult(){ID=5,Title="Geo Prism GEO,GEO 1995 - ABS #16213899 GEO"},
    new SearchResult(){ID=6,Title="dog"},
};

var to_search = new[] { "Geo", "JCB" }.Select(x => x.ToLower()).ToArray();

var result = from searchResult in list
let title = searchResult.Title.ToLower()
let key_string = to_search.FirstOrDefault(ts =>  title.Contains(ts))
orderby key_string == null ? -1 :  title.Split(new[]  { key_string },  StringSplitOptions.None).Length descending 
group searchResult by key_string into Group
    orderby Group.Count() descending
select Group;

result.Dump();

}

public class SearchResult
{
public int ID { get; set; }
public string Title { get; set; }
} 
```

![在此处输入图像描述](../Images/117379c2710bbf660232a87043d839a5.png)

我的问题是我需要写什么 sql 查询，结果我将在 sql server 2000 中得到相同的输出。假设我的数据以这种方式存储在 sql server 表中

```
Table : MyTable
------------------
ID  Title
-----------
1   Geo Prism GEO 1995 GEO* - ABS #16213899
2   Excavator JCB - ECU P/N: 728/35700
3   Geo Prism GEO 1995 - ABS #16213899
4   JCB Excavator JCB- ECU P/N: 728/35700
5   Geo Prism GEO,GEO 1995 - ABS #16213899 GEO
6   Maruti gear box #ABS 4587 
```

## 我的编辑

我在你的 sql 中修复了一些语法问题....看看

```
CREATE FUNCTION [dbo].[Split] (@String varchar(8000), @Delimiter char(1))     
returns @temptable TABLE (items varchar(8000))       
as       
begin       
   declare @idx int       
    declare @slice varchar(8000)       

    select @idx = 1       
        if len(@String)<1 or @String is null  return       

   while @idx!= 0       
   begin       
       set @idx = charindex(@Delimiter,@String)       
       if @idx!=0       
           set @slice = left(@String,@idx - 1)       
       else       
          set @slice = @String       

       if(len(@slice)>0)  
           insert into @temptable(Items) values(@slice)       

       set @String = right(@String,len(@String) - @idx)       
       if len(@String) = 0 break       
   end   
return       
end

DECLARE @Sterm varchar(MAX) 
SET @Sterm ='GEO JCB'
;WITH SearchResult (rnum, title)
as 
(   
(select 1 as rnum,'Geo Prism GEO 1995 GEO* - ABS #16213899' as title)
union all
(select 2 as rnum,'Excavator JCB - ECU P/N: 728/35700' as title)
union all
(select 3 as rnum,'Geo Prism GEO 1995 - ABS #16213899' as title)
union all
(select 4 as rnum,'JCB Excavator JCB- ECU P/N: 728/35700' as title)
union all
(select 5 as rnum,'Geo Prism GEO,GEO 1995 - ABS #16213899 GEO' as title)
union all
(select 6 as rnum,'dog' as title)
) 

select rnum, title from SearchResult
join 
( select lower(Items) as term 
  from dbo.Split(@Sterm , ' ')
) as search_terms
on lower(SearchResult.title) like '%' + search_terms.term +'%'
order by 
search_terms.term,
(select count(*)
from dbo.Split(lower(SearchResult.title),' ')
where Items = search_terms.term
) desc 
```

但这并不能完全满足我的要求。

1）查询应该返回搜索词以及那些与搜索词无关的行。

2）第二类应该在那里，就像那些行将首先出现在搜索词找到最大时间的地方，如 GEO 和 JCB。

您会根据搜索词的出现按降序错过第二个订单。如果你看到图像非常正确，那么你可以看到我在这里问的是什么类型的输出。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T17:53:15.280

使用[SQL Server Profiler](http://msdn.microsoft.com/en-us/library/ms181091.aspx)获取正在运行的查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T18:54:37.600

仅使用 SQL 是无法做到的。您将需要一个存储例程将标题字符串拆分为子字符串，然后 SQL 可以计算与您的搜索匹配的子字符串。

```
CREATE FUNCTION [dbo].[Split] (@String varchar(8000), @Delimiter char(1))     
returns @temptable TABLE (items varchar(8000))       
as       
begin       
  declare @idx int       
  declare @slice varchar(8000)       

  select @idx = 1       
    if len(@String)<1 or @String is null  return       

  while @idx!= 0       
  begin       
    set @idx = charindex(@Delimiter,@String)       
    if @idx!=0       
       set @slice = left(@String,@idx - 1)       
    else       
       set @slice = @String       

    if(len(@slice)>0)  
      insert into @temptable(Items) values(@slice)       

      set @String = right(@String,len(@String) - @idx)       
      if len(@String) = 0 break       
    end   
  return       
end

DECLARE @Sterm varchar(MAX) 
SET @Sterm ='GEO JCB'
;WITH SearchResult (rnum, title)
as 
(   
    (select 1 as rnum,'Geo Prism GEO 1995 GEO* - ABS #16213899' as title)
    union all
    (select 2 as rnum,'Excavator JCB - ECU P/N: 728/35700' as title)
    union all
    (select 3 as rnum,'Geo Prism GEO 1995 - ABS #16213899' as title)
    union all
    (select 4 as rnum,'JCB Excavator JCB- ECU P/N: 728/35700' as title)
    union all
    (select 5 as rnum,'Geo Prism GEO,GEO 1995 - ABS #16213899 GEO' as title)
    union all
    (select 6 as rnum,'dog' as title)
) 
select term,rnum, title
  from SearchResult
  left join 
     ( select lower(Items) as term 
         from dbo.Split(@Sterm,' ')
  ) as search_terms
  on lower(SearchResult.title) like '%' + search_terms.term +'%'
order by 
  isnull(search_terms.term,'ZZZZZZZZZZZZZ'),
  (select count(*)
     from dbo.Split(lower(SearchResult.title),search_terms.term)
  ) desc, 
  rnum desc 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T20:10:25.157

您可以使用 LINQ 功能来获取 SQL 查询：

```
var ctx = new SomeDbDataContext();
var sw = new StringWriter();
ctx.Log = sw;

var items = from item in ctx.INVENTTABLEs
            where item.ITEMID.Length < 10
            select item;

foreach (var item in items)
{
   Console.WriteLine("{0}", item.ITEMID);
}

Console.WriteLine(sw.GetStringBuilder().ToString());
Console.ReadLine(); 
```

# iphone - SKProductRequest 委托未被调用

> ID：11810756
> 
> 赞同：0
> 
> 时间：2012-08-04T17:52:18.803
> 
> 标签：iphone, objective-c, ios, in-app-purchase, storekit

我知道这一定是一个相当普遍的问题，但我确实在互联网上搜索并尝试了数十种解决方案，到目前为止都无济于事......我对此束手无策：P

所以，我正在 iOS 上实现 InApp 购买，我遇到了最奇怪的问题。我没有任何大惊小怪地完成了 SKProduct 检索的所有设置和早期测试，但后来整个事情停止了工作，我不知道为什么。

我遵循了几个教程，所以这段代码一定很熟悉。首先是 InAppPurchaseManager.h：

```
#import <Foundation/Foundation.h>
#import <StoreKit/StoreKit.h>

#define kInAppPurchaseManagerProductsFetchedNotification @"kInAppPurchaseManagerProductsFetchedNotification"

@interface InAppPurchaseManager : NSObject <SKProductsRequestDelegate>
{

} 

-(void) requestWalterLevelPackData;

+(SKProduct *) WalterLevelPack;
+(NSArray *) productCatalog;

@property (strong,nonatomic) SKProductsRequest *request;

@end 
```

到目前为止没有什么太奇怪的。我将 SKProductRequest 放在一个属性上以保留该值并设置两个“类变量”以供外部访问值。

前进到 InAppPurchaseManager.mm 文件：

```
#import "InAppPurchaseManager.h"

SKProduct* _walterLevelPack=nil;
NSArray* _productCatalog=nil;

@implementation InAppPurchaseManager

@synthesize request;

+(NSArray *) productCatalog
{
    return _productCatalog;
}

+(SKProduct *) WalterLevelPack
{
    return _walterLevelPack;
}

-(void)requestWalterLevelPackData
{

    NSSet *productIdentifiers = [NSSet setWithObject:@"MR_WALTER_LEVEL_PACK01" ];

    self.request = [[SKProductsRequest alloc] initWithProductIdentifiers:productIdentifiers];
    self.request.delegate = self;
    [self.request start];

}

#pragma -
#pragma SKProductsRequestDelegate methods

- (void)request:(SKRequest *)request didFailWithError:(NSError *)error
{
    printf("got an error");
    NSLog(@"request failed: %@,  %@", request, error);

   [request release];

}

-(void)productsRequest:(SKProductsRequest *)request didReceiveResponse:(SKProductsResponse *)response
{
    printf("delegate called");

    [_productCatalog release];

    _productCatalog = [response.products retain];

    [_walterLevelPack release];

    _walterLevelPack=[[_productCatalog firstObject] retain];

   //_walterLevelPack=[[self.products count] == 1 ? [[self.products firstObject] retain] : nil retain];

        NSLog(@"Product title: %@" , _walterLevelPack.localizedTitle);
        NSLog(@"Product description: %@" , _walterLevelPack.localizedDescription);
        NSLog(@"Product price: %@" , _walterLevelPack.price);
        NSLog(@"Product id: %@" , _walterLevelPack.productIdentifier);

    for (NSString *invalidProductId in response.invalidProductIdentifiers)
    {
        NSLog(@"Invalid product id: %@" , invalidProductId);
    }

    [request release];

    [[NSNotificationCenter defaultCenter] postNotificationName:kInAppPurchaseManagerProductsFetchedNotification object:self userInfo:nil];

}

- (void)dealloc
{

    request.delegate = nil;
    [request cancel];
    request = nil;
    [super dealloc];
}

@end

SKProduct* StoreItem=nil;
NSArray* productCatalog=nil;

extern "C"
{

    NSString * RequestLevelPackData()
    {

        InAppPurchaseManager* purchaseManager=[[InAppPurchaseManager alloc] init];

        [purchaseManager requestWalterLevelPackData];

        productCatalog=[InAppPurchaseManager productCatalog];

        if(productCatalog==nil)
        {
            printf("empty!");
        }

        StoreItem=[InAppPurchaseManager WalterLevelPack];

        printf("%s", [StoreItem.localizedTitle UTF8String]);
        printf("%s", [StoreItem.localizedDescription UTF8String]);
        // printf("%s", [StoreItem.price UTF8String]);
        printf("%s", [StoreItem.productIdentifier UTF8String]);

        NSString *ProductData=@"Empty";

        return ProductData;
    }
} 
```

在这里，我初始化我的“类变量”，设置 productsRequest 委托并启动整个事情。在“Ext C”部分，我创建了一个 InAppPurchaseManager 类的实例并调用“requestWalterLevelPackData()”函数。之后，我尝试访问我的“类变量”以查看它们是否具有值。

预期的行为将是：

-NSLog 在 productsRequest 委托中打印和 printf 以显示在控制台上 -Class 变量将具有值。

我所拥有的是：

- 控制台上没有打印 - 类变量为空

经过一些痛苦的断点和检查后，我得出的结论是 productsRequest 委托方法没有被调用。我在方法中放置的断点没有到达，也没有设置变量值。所发生的一切都是在通过 self.request 和 @synthetize 的操作之间的 RequestWalterLevelPack() 内部进行的大量跳转。

现在有趣的是，这段代码实际上曾经可以工作。我打印出了 productRequest 中的所有 Nlog，断点会很好地命中，然后......不再。我所做的唯一显着变化是一些来回更改名称，添加“类变量”和一些测试。

我在没有注意到的情况下刹车了吗？有人可以帮我吗？

我正在运行 Xcode 4.2，目标 iOS 版本是 5.0，开发设备是 iphone 3GS。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T17:30:56.920

Store Kit 的故障排除可能很棘手。如果您没有更改代码，我会很想考虑环境。配置文件有问题吗？您是在设备上而不是模拟器上测试吗？您是否使用了测试商店/沙盒帐户（而不是无意中使用您的正确帐户登录。）现在我写这个，我记得我有这种“沉默”的情况，使用新创建的测试帐户是解决问题的关键它。

# java - 在 Eclipse 中开发 App Engine Java 应用程序时出现 java.lang.OutOfMemoryError

> ID：11810757
> 
> 赞同：1
> 
> 时间：2012-08-04T17:52:19.693
> 
> 标签：java, google-app-engine, out-of-memory

我正在 Eclipse 中编写 App Engine Java 应用程序。到目前为止，它只是在玩数据存储和 JDO，应用程序并没有做任何严重的事情。然而，经过大约一个小时的开发，我最终遇到了 java.lang.OutOfMemoryError 错误。

我读过这个错误很可能是由某种内存泄漏引起的。为了进行测试，我尝试稍微加快速度并强制出现错误。使用 wget，我向与 Eclipse 开发期间相同的 url 发出了大约 3000 个请求。但是什么也没发生。我假设如果真的存在内存泄漏，我会这样看......

是否有可能这个错误真的是由开发过程引起的？我使用*触摸*appengine-web.xml的技巧，所以每次我更改并保存文件时，服务器都会再次加载所有文件并运行DataNucleus增强器......所以它经常发生，这可能是原因吗？

另一件事是，它*可能*是在我实施以下解决方案（[如何使用 JDO 持久性管理器？](https://stackoverflow.com/questions/4185382/how-to-use-jdo-persistence-manager)）与 Persistence Manager 一起工作之后开始的。我在请求期间将对 PM 的引用存储在多个位置，但是在请求完成后应该将其全部处理掉，对吗？再说一次，如果是由这个引起的，在3000个请求之后不会出现错误吗？（这比一个小时的开发要求更多）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T11:58:46.457

我不想让这个问题悬而未决，所以这是从问题下面的评论中提取的：

**是的，PermGen 错误可能是由于在开发过程中频繁重新部署造成的。**所以应用程序不必有内存泄漏。

# c# - WinForms DataGridView - 最后一行数据未显示

> ID：11810759
> 
> 赞同：1
> 
> 时间：2012-08-04T17:52:34.990
> 
> 标签：c#, winforms, datagridview

我有一个将 VirtualMode 设置为 true 的 DataGridView，并且通过 CellValueNeeded 事件提供了数据。一切正常，但是……最后一行没有数据。我在设计器中设置了列，其中几个是链接列，这些列只显示没有数据。我验证了数据在我的源对象中（我正在绑定到 IEnumerable）并且 RowCount 设置正确。

如果我在源中添加另一行，它将不会显示，但会显示之前不可见的行。

这*不是*AllowUserToAddRows 的问题 - 它设置为 false。该行只是空白，并且似乎从未为 IEnumerable 中的该项目调用 CellValueNeeded 事件。

我在这里拉头发。请帮忙。

```
gvPilots.VirtualMode = true;
gvPilots.AutoGenerateColumns = false;
gvPilots.AllowUserToAddRows = false;

IEnumerable<pilot> _pilotData = jamboree.pilots.Where(p => p.sync_state != (byte)SyncState.IsDeleted);
gvPilots.RowCount = _pilotData.Count();

private void gvPilots_CellValueNeeded(object sender, DataGridViewCellValueEventArgs e)
{
        if (e.RowIndex == this.gvPilots.RowCount - 1) return;

        pilot thisPilot = null;

        thisPilot = this._pilotData.ElementAt(e.RowIndex);

        switch (this.gvPilots.Columns[e.ColumnIndex].Name)
        {
            case "columnId":
                e.Value = thisPilot.id;
                break;
            /* Bunch of case statements... */
            case "columnType":
                e.Value = Enum.GetName(typeof(PilotType), thisPilot.pilot_type);
                break;
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T17:54:26.877

我刚刚回答了我自己的问题……我的 CellValueNeeded 事件的第一行就是阻止数据显示。复制并粘贴 FTW。

# php - Prestashop 中类似制造商的功能的代码结构选择

> ID：11810760
> 
> 赞同：0
> 
> 时间：2012-08-04T17:52:40.257
> 
> 标签：php, prestashop

我目前正在为一家在线销售艺术品的美术馆开发网站。我需要开发一些代码来收集和显示有关艺术家的信息（简历、邮件、电子邮件、展览日期……）。我首先尝试使用制造商功能并且只调整翻译，将“制造商”替换为“艺术家”，但我很快意识到我是有限的。我不需要将艺术家与其地址相关联，我需要更多信息。问题是我不知道实现这一点的最佳方法是什么，同时保持我的代码干净并使 prestashop 升级变得容易。

我想我需要制作新的数据库表，如下（展览日期，尚未实施）：

```
CREATE TABLE `artist` (
  `id_artist` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(64) NOT NULL,
  `date_add` datetime NOT NULL,
  `date_upd` datetime NOT NULL,
  `active` tinyint(4) NOT NULL DEFAULT '0',
  `email` varchar(255) DEFAULT NULL,
  `phone` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`id_artist`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

CREATE TABLE `artist_lang` (
  `id_artist` int(11) NOT NULL,
  `id_lang` int(11) NOT NULL,
  `name` varchar(255) NOT NULL,
  `description` text NOT NULL,
  `short_description` text NOT NULL,
  `meta_title` varchar(128) NOT NULL,
  `meta_keywords` varchar(255) NOT NULL,
  `meta_description` varchar(255) NOT NULL,
  PRIMARY KEY (`id_artist`,`id_lang`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8; 
```

我应该把它变成一个模块，还是直接在核心类中添加一个艺术家模块和控制器？如果这样做，我将不得不覆盖产品类。既然我不需要制造商，我应该覆盖制造商类吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T17:02:48.170

[我在Prestashop 论坛](http://www.prestashop.com/forums/topic/181185-code-structure-choice-for-a-manufacturer-like-function-for-artists-in-art-shop/page__p__895409)上问了同样的问题，并得到了很好的建议，如果有人遇到同样的问题，我会在这里总结。

没有办法修改核心类，但应尽可能使用覆盖。

* * *

## 后台功能

*   如问题中所述，创建数据库表。
*   通过复制粘贴类并替换提及by以及将附加字段指定为实例变量来创建一个`Artist`类。`overrides/classes``ManufacturerCore``manufacturer``artist`
*   在by中创建一个`ArtistController`类`overrides/controllers`并替换提及`manufacturer``artist`
*   覆盖`Product`类并添加`id_artist`和`artist_name`作为实例变量。修改以下函数，使产品与其艺术家链接`__construct`：`getFields`和`getProducts`
*   创建 in 的子`ArtistsAdmin`类，以便后台可用于添加新/编辑艺术家`AdminTab``admin/tabs`
*   在后台启用选项卡（员工->选项卡->添加新）
*   修改`admin/ajax.php`以便艺术家可以从后台查询
*   修改`ProductsAdmin`in`admin/tabs`以便用户在添加/编辑产品时可以选择艺术家
*   为艺术家选项卡创建一个徽标并将其复制`img/admin/artist.gif`到`img/admin/artists.gif`
*   处理中的图像文件夹`config/defines.inc.php`：

    定义（'_ARTI_DIR_'，_PS_IMG_.'ar/'）；定义（'_PS_ARTI_IMG_DIR_'，_PS_IMG_DIR_.'ar/'）；

*   将`ar`文件夹放入`img`并为每个人设置写入权限

## 前台功能（尚未测试，可能缺少一些信息）：

*   用一个名为的函数覆盖链接，该函数`getDistributorLink`模拟`getSupplierLink`
*   覆盖工具以更新 generateHtaccess 函数以包括为供应商重定向建模的艺术家的重定向。我使用了 3 个下划线 ( `___`)，其中制造商使用 1 个下划线 ( `_`)，供应商使用 2 个下划线 ( `__`)。
*   支持新核心文件的主题文件（模板、css）。
*   如果您想在产品页面上显示艺术家，您还可以创建一个挂钩 extraRight 的模块，或者一个或多个产品页面挂钩。

# java - 我的布尔值返回 false 等于或大于 1000，为什么？

> ID：11810764
> 
> 赞同：0
> 
> 时间：2012-08-04T17:53:16.590
> 
> 标签：java, boolean

这是我遇到问题的代码片段：

```
 int inputIsInt = Integer.valueOf(JTextFieldName.getText());
            String format = NumberFormat.getInstance().format(inputIsInt);
            boolean isSame = format.equals(JTextFieldName.getText());
            if (isSame == true) {... 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-04T17:55:08.697

那么诊断的下一步显然是打印两个格式化的字符串。我*怀疑*你会发现这是“1,000”和“1000”之间的区别——但这取决于你的语言环境。

*从这种体验中*带走的重要一点与字符串格式无关——它与调试和诊断有关：

*   您可以记录两个字符串以确定差异
*   您可以编写一个简短但完整的程序来显示这两个值
*   您可以在程序执行时使用调试器检查值
*   你可以写一个单元测试

确保您了解所有这些选项，并确定何时使用哪些选项 - 这将使您成为更好的开发人员，并让您自己解决未来的问题。（我不介意帮助任何人，但如果你能帮助自己，通常会更快:)

# javascript - 如果在 OnClick() 中执行第一个 javascript 函数，则不执行下一个 javascript 函数

> ID：11810776
> 
> 赞同：0
> 
> 时间：2012-08-04T17:53:59.647
> 
> 标签：javascript, forms, onclick

我的 JavaScript 很弱。实际上我使用两个函数作为onclick：

```
onClick="check('owfy_email','owfy_email2'); return checkval() ;" 
```

`check(a,b)`功能是检查电子邮件地址和验证电子邮件地址字段是否具有相同`checkval()`的值，同时功能查找其他错误

对于函数`check(a,b)`，我使用如下代码：

```
<script type="text/javascript">
function check(a,b) {
var obja = document.getElementById(a)
var objb = document.getElementById(b)
if (obja.value==objb.value) {}
else {alert("The e-mail fields aren't the same!!")}
}
</script> 
```

如果字段值不匹配，则弹出错误消息。

但是会发生什么，在弹出消息之后执行下一个函数并将流程形成到下一页。而我希望如果弹出消息出现，那么用户可能有机会再次输入电子邮件，并且表单可能仅在两个电子邮件字段相同时处理

**注意：**我无法访问`checkval()`功能，但可以轻松更新`check(a,,b)`功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T18:00:15.180

你需要从你的 checkval() 函数中返回 false 或者像这样在最后返回它：

```
onClick="check('owfy_email','owfy_email2'); return checkval(); return false;" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-31T07:04:41.843

当验证失败时，使第一个函数（检查）返回 false。在 onclick 事件中，执行此操作，

```
onclick="if(check('owfy_email','owfy_email2')){checkVal()};" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T18:15:01.653

作为 Troys ans 的替代品。我认为你应该`check()`稍微修改你的函数
并在`checkval()`函数内调用`check()`函数

```
function check(a,b) {
var obja = document.getElementById(a)
var objb = document.getElementById(b)

//so modify the function so that
if(some_value)
{
//call the checkval() function
var r = checkval();
//check the return type of the checkval() function
if(r){return true;}
else
return false;
}

if (obja.value==objb.value) {}
else {
alert("The e-mail fields aren't the same!!");
}
} 
```

# asp.net - Visual Studio 2010 调试速度慢，有很多 ascx 控件，加载我不需要的符号？

> ID：11810782
> 
> 赞同：2
> 
> 时间：2012-08-04T17:54:45.153
> 
> 标签：asp.net, visual-studio-2010, debugging

我有一个带有大量用户控件 (*.ascx) 的 webforms ASP.NET 应用程序。当我开始调试时，它似乎为每个控件重新加载符号，每个符号都需要一两秒钟；因此，每当代码更改时，应用程序都需要大约一分半钟的时间才能启动。（只要没有代码更改，我随后可以非常快速地停止和开始调试。）

在输出窗口中，我有几十行这样的：

```
'WebDev.WebServer40.EXE' (Managed (v4.0.30319)): Loaded 'C:\Users\Herb Caudill\AppData\Local\Temp\Temporary ASP.NET Files\root\1f256061\12a5d99\App_Web_hcj5xynv.dll', Symbols loaded.
'WebDev.WebServer40.EXE' (Managed (v4.0.30319)): Loaded 'C:\Users\Herb Caudill\AppData\Local\Temp\Temporary ASP.NET Files\root\1f256061\12a5d99\App_Web_facettextboxfilter.ascx.b3b3f5d8.obkscoie.dll', Symbols loaded.
'WebDev.WebServer40.EXE' (Managed (v4.0.30319)): Loaded 'C:\Users\Herb Caudill\AppData\Local\Temp\Temporary ASP.NET Files\root\1f256061\12a5d99\App_Web_editgridcolumnchooser.ascx.b3b3f5d8.o1vmswte.dll', Symbols loaded.
'WebDev.WebServer40.EXE' (Managed (v4.0.30319)): Loaded 'C:\Users\Herb Caudill\AppData\Local\Temp\Temporary ASP.NET Files\root\1f256061\12a5d99\App_Web_editgridimporttools.ascx.b3b3f5d8.mslzoqjj.dll', Symbols loaded.
'WebDev.WebServer40.EXE' (Managed (v4.0.30319)): Loaded 'C:\Users\Herb Caudill\AppData\Local\Temp\Temporary ASP.NET Files\root\1f256061\12a5d99\App_Web_facetsearchpager.ascx.b3b3f5d8.b-mkmweb.dll', Symbols loaded.
'WebDev.WebServer40.EXE' (Managed (v4.0.30319)): Loaded 'C:\Users\Herb Caudill\AppData\Local\Temp\Temporary ASP.NET Files\root\1f256061\12a5d99\App_Web_photogallery.ascx.b3b3f5d8.0mzg-l3y.dll', Symbols loaded.
'WebDev.WebServer40.EXE' (Managed (v4.0.30319)): Loaded 'C:\Users\Herb Caudill\AppData\Local\Temp\Temporary ASP.NET Files\root\1f256061\12a5d99\App_Web_facetcheckboxfilter.ascx.b3b3f5d8.krw3yihh.dll', Symbols loaded. 
```

这些控件几乎都与我正在调试的页面无关。有没有办法通过不加载所有这些我不需要的符号来加快调试过程？

**注意：**有许多类似的问题通过“删除所有断点”和/或与通过网络加载 Microsoft 符号有关的问题得到解答。这些都不是这里的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T20:46:13.667

起初我认为您加载许多 dll 的问题可能是因为您没有关闭编译器批处理，所以每次更改时，Visual Studio 都会编译多个页面。

所以我建议尝试这个答案[https://stackoverflow.com/a/9199027/159270](https://stackoverflow.com/a/9199027/159270)并且它有效。

所以设置`optimizeCompilations`为真，`batch`假

```
<compilation batch="false" optimizeCompilations="true" ... > 
```

对于 asp.net 3.5 版，必须使用此补丁才能使用此优化开关。 [http://support.microsoft.com/kb/961884](http://support.microsoft.com/kb/961884)

不要在在线服务器上做同样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T18:48:28.670

在 msdn 论坛上有一个已接受的答案 - 此处为原始链接

[http://social.msdn.microsoft.com/Forums/pl-PL/vsdebug/thread/a76c4fbe-93de-4875-b111-43a472876271](http://social.msdn.microsoft.com/Forums/pl-PL/vsdebug/thread/a76c4fbe-93de-4875-b111-43a472876271)

为了方便起见，下面的答案是从那里剪切和粘贴的。

在 Visual Studio 中，您可以通过“模块窗口”影响符号加载行为（在中断模式下通过“调试->Windows->模块进行调试时可访问”，将“自动符号加载设置”设置为“始终手动加载”。

如何：使用模块窗口 [http://msdn.microsoft.com/en-us/library/4c8f14c9.aspx](http://msdn.microsoft.com/en-us/library/4c8f14c9.aspx)

您也可以使用“符号设置”对话框，您可以在其中指定要自动加载的符号如何：指定符号位置和加载行为 [http://msdn.microsoft.com/en-us/library/x54fht41.aspx](http://msdn.microsoft.com/en-us/library/x54fht41.aspx)

符号、调试、选项对话框 [http://msdn.microsoft.com/en-us/library/b13s79c0.aspx](http://msdn.microsoft.com/en-us/library/b13s79c0.aspx)

# android - 使用 PHP 向 Android 应用程序发送通知

> ID：11810783
> 
> 赞同：0
> 
> 时间：2012-08-04T17:54:50.863
> 
> 标签：android

我正在制作一个可以通过 PHP 远程管理的 android 应用程序。

我的意思是，例如，我想向 android 应用程序发送通知。然后，我的 android 应用程序将获取并处理它。

我有一个想法，我的 PHP 程序只会将此通知保存到“待处理通知表”，然后我的 android 应用程序将获取它。但是我的 android 应用程序总是会例如每 5 秒获取一次，获取待处理的通知，即使没有待处理的通知，它也会每 5 秒获取一次，我认为这不是一个更好的解决方案。

我想要做的是，当我使用 PHP 向 android 应用程序发送通知时，它会自动被处理。

有什么更好的解决方案吗？

谢谢你。

PS。我所说的通知不是推送通知。这就像我将发送到 android 应用程序的命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T17:57:17.980

我相信你正在寻找这个：http: [//developer.android.com/guide/google/gcm/index.html](http://developer.android.com/guide/google/gcm/index.html)

> “......它应该用来告诉应用程序服务器上有新数据，以便应用程序可以获取它。”

“GCM 还为客户端和服务器开发提供帮助库。”

# c# - 如何从 foreach 循环中修改 foreach 迭代变量？

> ID：11810794
> 
> 赞同：17
> 
> 时间：2012-08-04T17:55:37.993
> 
> 标签：c#, foreach, iteration, variable-assignment

当我尝试这样做时...

```
Item[,] array = new Item[w, h];  // Two dimensional array of class Item, 
                                 //   w, h are unknown at compile time.
foreach(var item in array)
{
    item = new Item();
} 
```

...我明白了`Cannot assign to 'item' because it is a 'foreach iteration variable'`。

尽管如此，我还是愿意这样做。

这个想法是将默认`Item`类值分配给现有项目。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-04T18:03:06.353

好的，既然我们知道您的*目标*而不是您尝试实现它的方式，那么回答您的问题要容易得多：您不应该使用`foreach`循环。`foreach`是关于从集合中*读取*项目 - 不更改集合的内容。C# 编译器将迭代变量设置为只读是一项很好的工作，否则它会让您更改*变量*的值而不实际更改集合。（必须进行更重大的更改才能反映更改...）

我怀疑你只是想要：

```
for (int i = 0; i < array.GetLength(0); i++)
{
    for (int j = 0; j < array.GetLength(1); j++)
    {
        array[i, j] = new Item();
    }
} 
```

假设它是一个矩形阵列（an `Item[,]`）。如果它是一个，`Item[][]`那么它是一个数组数组，你的处理方式会略有不同——很可能是用 a`foreach`进行外部迭代：

```
foreach (var subarray in array)
{
    for (int i = 0; i < subarray.Length; i++)
    {
        subarray[i] = new Item();
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-04T18:00:51.433

不知道大小不是问题：

```
for (int i = 0; i < twoDimArray.GetLength(0); i++)
{
    for (int j = 0; j < twoDimArray.GetLength(1); j++)
    {
        twoDimArray[i, j] = ...
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-04T18:01:07.573

看起来您正在尝试初始化数组。*你不能那样做*。相反，您需要按索引遍历数组。

要初始化给定二维数组的元素，请尝试以下操作：

```
for (int d = 0; d < array.GetLength(0); d++)
{
    for (int i = 0; i < array.GetLength(1); i++)
    {
        array[d, i] = new Item();
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-04T17:57:14.683

您可以为此使用普通的 for 循环。

# c# - MonoTouch：FinishedLaunching 中的 CIContext 似乎使应用程序崩溃？

> ID：11810795
> 
> 赞同：1
> 
> 时间：2012-08-04T17:55:43.387
> 
> 标签：c#, ios, mono, xamarin.ios, core-image

作为我使用外观设置的一部分，我正在更改 FinishedLaunching () 中的图像色调。当我尝试获取 CIContext 时，应用程序被拆除而没有任何崩溃信息。

这是代码：

```
 var hueAdjust = new CIHueAdjust() {
            Image = CIImage.FromCGImage(originalImage.CGImage),
            Angle = hue * (float)Math.PI / 180f // angles to radians
        };

        var output = hueAdjust.OutputImage;

        UIImage retVal = null;

        UIGraphics.BeginImageContextWithOptions(originalImage.Size, false, 0);
        using (var c = UIGraphics.GetCurrentContext ())
        {
            //****This next line causes the crash*******
            var context = CIContext.FromContext(c);
            var cgimage = context.CreateCGImage(output, output.Extent);
            retVal = UIImage.FromImage(cgimage);
        }
        UIGraphics.EndImageContext();

        return retVal; 
```

我已经测试在应用程序生命周期的不同时间设置它，但它似乎总是立即被拆除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:55:03.783

感谢您填写[错误报告](https://bugzilla.xamarin.com/show_bug.cgi?id=6401)。[崩溃是由于FromContext](https://github.com/mono/maccore/commit/ab15a52c3d7c1206eb041d56985cdb38b03aa70a#L0L58)中的无限递归造成的。但是，这不会解决您[原来的问题](https://stackoverflow.com/q/11805628/220643)，因为暴露的 API 在 iOS 中不存在（它是特定于 OSX 的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T13:29:43.647

不知道我是否理解你想要做什么，但这里有一些代码可以改变图像的色调： [https ://stackoverflow.com/a/11762982/1560797](https://stackoverflow.com/a/11762982/1560797)

我猜你使用的方法是 Monotouch 中的一个错误。我自己在演示应用程序中尝试过它，它会在我的设备上生成崩溃报告。（我对阅读崩溃日志不是很熟悉，所以不知道到底发生了什么）请在 xamarin 报告

# database - 处理生产数据时应采取哪些预防措施？

> ID：11810796
> 
> 赞同：0
> 
> 时间：2012-08-04T17:55:59.027
> 
> 标签：database, ruby-on-rails-3, heroku, production-environment

我一直在开发不同的基于 Java Web 的应用程序。作为一名初级中级开发人员，我大部分时间都花在处理开发数据上，其中擦除数据、添加测试数据等并不是什么大问题。但现在，我正在自己做一个使用 Ruby on Rails 的副项目，负责每个开发阶段和数据（即开发、生产和测试）。即使在这个阶段，我有时也会删除产品数据（在 Heroku 上）并使用 Rails 框架提供的“db:populate”重新填充它。但是，系统会在一个月后上线（听取用户的反馈），我知道如果从现在开始出现问题，我将无法删除数据。

根据您的经验，当实际生产数据出现问题时，我应该采取哪些预防措施？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T18:07:31.847

1.  编写一个可以检查数据的 Aspect X 并找出哪些数据不正确的类。
2.  编写一个可以修复不良 Aspect X 数据的类。
3.  为创建坏数据的类编写测试，并断言在运行修复程序后数据是好的。
4.  创建生产数据库的副本，并将应用程序的副本指向生产数据库的副本（在 Heroku 上这很容易）。
5.  在生产数据库的副本上运行 fixer 类，然后使用 checker 类验证数据是否良好。还要手动验证数据是否正确。您可以通过控制台会话执行此操作`heroku run console`。
6.  在生产数据库的 Live Copy 上运行 fixer 类，再次验证数据是否良好。

有时，您可以使用一个也是 ActiveRecord 迁移的类。但这并不总是奏效，有时您必须简单地使用自己从头开始编写的普通类。

# java - 应用无法在模拟器上运行

> ID：11810801
> 
> 赞同：0
> 
> 时间：2012-08-04T17:56:45.830
> 
> 标签：java, android, emulation

当我在手机上运行这段代码时，一切正常，但是当我在模拟器上运行它时，模拟器的屏幕变黑，并且在该语句工作（被执行）之后什么也没有：

```
manager = (SensorManager) this.game.getSystemService(Context.SENSOR_SERVICE); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T18:01:39.870

您可能还想看看这篇文章。它直接来自 Android 的 Xav。 [http://tools.android.com/recent/sensoremulation](http://tools.android.com/recent/sensoremulation)

它应该包含您正在寻找的所有信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T18:04:05.390

正如@Frank 建议的那样，使用传感器模拟器。我不认为内置模拟器可以处理传感器 API：[如何在 Android 的模拟器上测试传感器管理器？](https://stackoverflow.com/questions/5867172/how-to-test-sensormanager-on-emulator-in-android)

如果它适用于您的设备，那么当您想运行模拟器时只需将其注释掉。或者不要使用模拟器。它更慢，更不可靠（显然）。只需使用实际设备即可。无论如何，您都必须在多台设备上进行测试，因为模拟器根本不具备所有设备的全部功能和架构。

希望这能引导你朝着正确的方向前进。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T18:06:55.013

有可能，您可以查看 我为使用传感器模拟器测试程序而必须进行的代码[更改](https://stackoverflow.com/questions/10099084/vintage-thermometer-custom-ui-component-sensorsimulator-steps-to-test-the-com)。

# c# - 在 Javascript document.getElementById('name') 上出现错误。返回 NULL

> ID：11810802
> 
> 赞同：0
> 
> 时间：2012-08-04T17:56:46.677
> 
> 标签：c#, javascript, asp.net

我需要在 ASP.NET 上执行一个 javascript 函数，但我遇到了一个似乎无法修复的错误...

我已经尝试了一个可行的小例子......在这里......

.aspx 文件

```
<title>Untitled Page</title>
<script type="text/javascript" language="javascript">
    function ExecuteConfirm() {
    debugger
        var returnValue = confirm('Do you want to proceed further?');
        if (returnValue) {
            document.getElementById('hdnExecuteAfterConfirm').value = "1";
            document.getElementById('btnClickMe').click();
        }

    }
</script>

<body>
<form id="form1" runat="server">
<asp:Label runat="server" ID="lblMessage">
</asp:Label>

<div>
    <asp:Button ID="btnClickMe" runat="server" Text="Click me" 
        onclick="btnClickMe_Click" />
</div>
<asp:HiddenField runat="server" ID="hdnExecuteAfterConfirm" />
</form>
</body> 
```

CS文件

```
protected void btnClickMe_Click(object sender, EventArgs e)
    {
        //Do server side processing before confirmation
        if (hdnExecuteAfterConfirm.Value != "1")
        {
            lblMessage.Text = "You clicked the button";
            ClientScript.RegisterStartupScript(this.Page.GetType(), btnClickMe.ID, "ExecuteConfirm()", true);

        }
        //Do server side processing after confirmation
        else
        {
            //Proceed further with server side processing

            //Reset the value of hidden field
            hdnExecuteAfterConfirm.Value = "";
            //Notify the user that processing is complete.
            ClientScript.RegisterStartupScript(this.Page.GetType(), btnClickMe.ID, "alert('Processing is complete.')", true);
        }
    } 
```

这里的目标是在您第一次单击按钮时显示确认消息（如果），一旦您在确认消息上单击“是”，它将重复按钮功能，但是，它会做一些不同的事情（否则）......

我正在尝试在我的项目中重新创建此功能，但遇到错误...

这就是我所拥有的...

请注意，我不是在复制我的整个项目，这些只是我必须更改的部分......

Site.Master

```
<script type="text/javascript" language="javascript">
        function ConfirmarRegistroFecha(strAdvertencia) {
            debugger
            var returnValue = strAdvertencia;

            if (returnValue) {
                try{
                document.getElementById('hdnExecuteAfterConfirm').value = "1";  
                document.getElementById('btnGuardarEvento').click();
                }

                catch(error){
                    alert(error);
                }
            }
        }
    </script> 
```

Agenda.aspx （我知道这太多了，但是，我将其全部复制，因为错误可能就在此处的某个地方。关键是，至少，里面是一个 HiddenField 和一个按钮）

```
<asp:View ID="ViewOperacionesAgenda2" runat="server">
            <asp:HiddenField runat="server" ID="hdnExecuteAfterConfirm" />
            <br />

            <asp:Panel ID="pnlRegistrarEvento" runat="server" DefaultButton="btnGuardarEvento">
                <table>
                    <tr>
                        <td align="left">
                            Seleccione Vendedor:
                            <br />

                            <asp:DropDownList ID="dpdLstVendedoresAgenda" runat="server" Width="150px">
                            </asp:DropDownList>
                        </td>

                        <td align="left" rowspan="3">
                            Descripcion:
                            <br />

                            <asp:TextBox ID="tbxAlAgendaDescripcion" runat="server" Height="150px" TextMode="MultiLine" ValidationGroup="gpAgendaAlta" Width="150px">
                            </asp:TextBox>
                        </td>

                        <td align="left" rowspan="3">
                            Fecha:
                            <br />

                            <asp:Calendar ID="Calendar1" runat="server" BackColor="White" 
                                BorderColor="#3366CC" BorderWidth="1px" CellPadding="1" 
                                DayNameFormat="Shortest" Font-Names="Verdana" Font-Size="7pt" 
                                ForeColor="#003399" Height="150px" Width="150px">
                                <DayHeaderStyle BackColor="#99CCCC" ForeColor="#336666" Height="1px" />
                                <NextPrevStyle Font-Size="8pt" ForeColor="#CCCCFF" />
                                <OtherMonthDayStyle ForeColor="#999999" />
                                <SelectedDayStyle BackColor="#009999" Font-Bold="True" ForeColor="#CCFF99" />
                                <SelectorStyle BackColor="#99CCCC" ForeColor="#336666" />
                                <TitleStyle BackColor="#003399" BorderColor="#3366CC" BorderWidth="1px" Font-Bold="True" Font-Size="10pt" ForeColor="#CCCCFF" Height="25px" />
                                <TodayDayStyle BackColor="#99CCCC" ForeColor="White" />
                                <WeekendDayStyle BackColor="#CCCCFF" />
                            </asp:Calendar>
                        </td>

                        <td rowspan="3">
                            <table>
                                <tr>
                                    <td align="left">
                                        Hora Inicio:
                                        <br />

                                        <asp:TextBox ID="tbxAlAgendaHoraInicio" runat="server" ValidationGroup="gpAgendaAlta" Width="130px">0:00 am</asp:TextBox>

                                        <br />

                                        <asp:RegularExpressionValidator ID="RegularExpressionValidator3" runat="server" 
                                            ControlToValidate="tbxAlAgendaHoraInicio" 
                                            ErrorMessage="Hora Invalida: use 00:00 pm" 
                                            ValidationExpression="^((0?[1-9]|1[012])(:[0-5]\d)((\ )?[ap](.)?m(.)?))" 
                                            ValidationGroup="vgpRegistrarEvento" Font-Bold="True" ForeColor="Red">
                                        </asp:RegularExpressionValidator>

                                        <br />

                                        <asp:RequiredFieldValidator ID="RequiredFieldValidator8" runat="server" 
                                            ControlToValidate="tbxAlAgendaHoraInicio" ErrorMessage="Campo Requerido" 
                                            ValidationGroup="vgpRegistrarEvento" Font-Bold="True" ForeColor="Red">
                                        </asp:RequiredFieldValidator>
                                    </td>
                                </tr>

                                <tr>
                                    <td align="left">
                                        Hora Final:
                                        <br/>

                                        <asp:TextBox ID="tbxAlAgendaHoraFinal" runat="server" ValidationGroup="gpAgendaAlta" Width="130px">0:00 am</asp:TextBox>

                                        <br />

                                        <asp:RegularExpressionValidator ID="RegularExpressionValidator4" runat="server" 
                                            ControlToValidate="tbxAlAgendaHoraFinal" 
                                            ErrorMessage="Hora Invalida: use 00:00 pm" 
                                            ValidationExpression="^((0?[1-9]|1[012])(:[0-5]\d)((\ )?[ap](.)?m(.)?))" 
                                            ValidationGroup="vgpRegistrarEvento" Font-Bold="True" ForeColor="Red">
                                        </asp:RegularExpressionValidator>

                                        <br />

                                        <asp:RequiredFieldValidator ID="RequiredFieldValidator9" runat="server" 
                                            ControlToValidate="tbxAlAgendaHoraFinal" ErrorMessage="Campo Requerido" 
                                            ValidationGroup="vgpRegistrarEvento" Font-Bold="True" ForeColor="Red">
                                        </asp:RequiredFieldValidator>
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>

                    <tr>
                        <td align="left">
                            Seleccione Cliente:
                            <br />

                            <asp:DropDownList ID="dpdLstClientesAgenda" runat="server" AutoPostBack="True" onselectedindexchanged="dpdLstClientesAgenda_SelectedIndexChanged" Width="150px">
                            </asp:DropDownList>
                        </td>
                    </tr>

                    <tr>
                        <td align="left">
                            Tipo:
                            <br />

                            <asp:DropDownList ID="dpdLstAlAgendaTipo" runat="server" Width="150px">
                                <asp:ListItem>Reunion</asp:ListItem>
                                <asp:ListItem>Entrevista</asp:ListItem>
                                <asp:ListItem>Venta</asp:ListItem>
                                <asp:ListItem>Soporte</asp:ListItem>
                                <asp:ListItem>Instalacion</asp:ListItem>
                            </asp:DropDownList>
                        </td>
                    </tr>
                </table>

                <br />
                <asp:Button ID="btnCancelarEvento" runat="server" CausesValidation="False" onclick="btnCancelarEvento_Click" Text="Cancelar" Width="90px" />
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <asp:Button ID="btnGuardarEvento" runat="server" onclick="btnGuardarEvento_Click" Text="Guardar" ValidationGroup="vgpRegistrarEvento" Width="90px" />
            </asp:Panel> 
```

议程.aspx.cs

```
protected void btnGuardarEvento_Click(object sender, EventArgs e)
    {

            if (hdnExecuteAfterConfirm.Value != "1")
            {
                strAdvertencia = "MESSAGE I WANT TO DISPLAY";
                ClientScript.RegisterStartupScript(this.Page.GetType(), btnGuardarEvento.ID, "ConfirmarRegistroFecha(" + strAdvertencia + ")", true);

            }

            else
            {
                hdnExecuteAfterConfirm.Value = "";
                //Rest of process
            }
    } 
```

使用带有 Firebug 的调试器，当它到达时，我可以在 Site.Master 上清楚地看到它。

```
document.getElementById('hdnExecuteAfterConfirm').value = "1"; 
```

它显示以下异常：

```
TypeError: document.getElementById("hdnExecuteAfterConfirm") is null 
```

我已经尝试在 Agenda.aspx 而不是 Site.Master 上复制 javascript...但它仍然无法正常工作...

有谁知道这里的错误是什么......我是javascript新手，所以我仍然相信这是一个语法错误......

预先感谢，我希望你能帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T18:19:26.657

问题是因为控件嵌入在一个容器控件中，所以它的ID在客户端被修改了。

我不确定 Firefox 中的等价物是什么，但在 Internet Explorer（至少是 v9）中，您可以按 F12 打开开发人员工具并浏览 DOM 结构以找出实际名称是什么。

有多种方法可以解决这个问题，包括硬编码完整的 ID，这是一个脆弱的解决方案，或者更新 web.config 以使用提供的 ID，这可能导致 ID 冲突。

我们解决此问题的方法是使用客户端 ID 在代码中创建一个 javascript 变量。这样，如果控件移动到不同的容器控件或被重命名，您将无需调整代码来解决此问题。

为此，我们使用 Page.ClientScript.PageClient.RegisterStartupScript。例如：

```
this.ClientScript.RegisterStartupScript(this.GetType(), "LocalVars", "var m_hdnExecuteAfterConfirmId = '" + hdnExecuteAfterConfirm.ClientID + "';" + Environment.NewLine, true); 
```

然后将javascript更改为：

```
document.getElementById('m_hdnExecuteAfterConfirmId').value = "1"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T19:24:05.973

使用这个脚本：

```
document.getElementById('<%= hdnExecuteAfterConfirm.ClientID %>').value = "1";  
document.getElementById('<%= btnGuardarEvento.ClientID %>').click(); 
```

当您使用母版页时，客户端 ID`hdnExecuteAfterConfirm`与服务器 ID 不同。

# google-maps-api-3 - 谷歌地方自动完成 - 位置和半径不起作用

> ID：11810810
> 
> 赞同：6
> 
> 时间：2012-08-04T17:57:21.580
> 
> 标签：google-maps-api-3, autocomplete, google-places-api

我试图设置谷歌地点自动完成以从最近的点对结果进行排序。我有这样的代码...

```
var defaultPlace = new google.maps.LatLng(49.227463, 16.546097);

var optionsAuto = {
    location: defaultPlace,
    radius: 20000,
    types: ['geocode'],
    componentRestrictions: {
        country: 'cz'
    }
};

var autocomplete = new google.maps.places.Autocomplete( inputStart, optionsAuto ); 
```

types 和 componentRestrictions 效果很好，但位置和半径似乎不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-04T19:23:43.800

看[文档](https://developers.google.com/places/documentation/)

它指出：

> 半径 | 定义返回 Place 结果的距离（以米为单位）。最大允许半径为 50 000 米。请注意，如果指定了 rankby=distance（在下面的可选参数中描述），则不得包含半径。

听起来你想要可选参数：rankby=distance：

> 排名比 | 距离。此选项按结果与指定位置的距离升序排序。距离排名结果将设置一个固定的搜索半径50公里。关键字、名称或类型中的一种或多种是必需的。

这也可以在[javascript 服务中使用](https://developers.google.com/maps/documentation/javascript/places)

[工作示例](http://www.geocodezip.com/v3_GoogleEx_place-search.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-04T20:54:48.977

要返回半径范围内的地方，您需要将*strictbounds*设置 为 true。

我现在的主要问题是自动完成没有rankBy。看[这里](https://developers.google.com/places/web-service/autocomplete)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-19T06:27:11.237

有人可能不同意我的观点，但在我的情况下，我定义了不带引号的半径，如下所示

```
 var request = {
    location: pyrmont,
        bounds: map.getBounds(),
    radius: 2000,
    zoom: 15,
    types: ['restaurant']
  }; 
```

所以它对半径没有任何影响，并且显示了独立于半径的结果但是当我在它上面应用引号时，半径参数似乎正在工作

```
 var request = {
    location: pyrmont,
        bounds: map.getBounds(),
    radius: '2000',
    zoom: 15,
    types: ['restaurant']
  }; 
```

# python - QMutexLocker() 导致 UI 冻结

> ID：11810812
> 
> 赞同：1
> 
> 时间：2012-08-04T17:57:26.323
> 
> 标签：python, multithreading, pyqt, mutex, robot

我有一个控制机器人的控制器类（通过串行接口连接）。此控制器附加到视图。除此之外，我还有一个派生的线程，`QThread`它会定期读出机器人的状态。

读取状态不得与从用户界面触发的机器人命令发生冲突。因此，我使用互斥锁锁定了每个机器人的访问权限，`QMutexLocker`但是如果执行了这样的互斥锁块，这会导致我的用户界面冻结。

```
class RobotControl(QObject):
    def __init__(self, view):
        super(RobotControl, self).__init__()
        self.view = view
        self.updatethread = UpdatePositionAndStatus(self.robot)
        self.mutex = QMutex()
        self.connect(self.updatethread, SIGNAL("updateStatus( QString ) "), self.print_error)
        self.updatethread.start()

@pyqtSlot()  
def init_robot(self):
    """
    Initializes the serial interface to the robot interface and checks if
    there is really a robot interface available.
    """
    with QMutexLocker(self.mutex):
        # Open interface
        try:
            index = self.view.robotcontrolui.get_selected_interface_index()
            interface = self.interfaces.item(index).text()
            self.robot = RobotController(interface)
        except DeviceError:
            self.view.error_dlg(self.tr("Couldn't open interface {0}!".format(interface)))
            self.robot = None
            return

        # Check if there is really a robot interface on the selected serial
        # interface with trying to read status byte
        try:
            self.robot.status()
        except DeviceError:
            # In case of failure release interface
            self.close_robot()
            self.view.error_dlg(self.tr("Couldn't initialize robot interface!"))
            return

        self.view.robotcontrolui.bt_open_interface.setEnabled(False)
        self.view.robotcontrolui.bt_close_interface.setEnabled(True)

class UpdatePositionAndStatus(QThread):
    def __init__(self, robot, parent=None):
        QThread.__init__(self, parent) 
        self.robot = robot
        self.mutex = QMutex()
    def run(self):
        """ 
        This function continously reads out the position and the status to for 
        updating it on the userinterface.
        """
        try:
            while True:
                if self.robot is not None:
                    # Do robot communication under a lock
                    self.mutex.lock()
                    (_, rel_pos) = self.robot.read_position()
                    status = self.robot.status()
                    self.mutex.unlock()

                    # Display position and status on userinterface
                    self.view.robotcontrolui.update_position_and_status(rel_pos, status)

                # Wait 1 seccond for next update
                QThread.sleep(1.0)
        except DeviceError:
            # Release lock on robot
            self.mutex.unlock()
            self.emit(SIGNAL("updateStatus( QString )"), self.tr("Error while updating current position and status!")) 
```

触发 init 方法后，用户界面冻结，程序崩溃：为什么会这样？我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T22:19:06.760

很难说，因为您的代码示例不完整，但我发现此代码存在两个基本问题：

1.  您正在锁定两个不同的 QMutex 对象。为了使互斥正常工作，两个线程必须锁定*同一个*互斥对象。

2.  您似乎在此行的更新线程中直接与 GUI 交互：

    ```
    self.view.robotcontrolui.update_position_and_status(rel_pos, status) 
    ```

    *只能*从 Qt 中的 GUI 线程执行 GUI 操作。可以肯定的是，这会导致您的崩溃。见：http: [//qt-project.org/doc/qt-4.8/threads.html](http://qt-project.org/doc/qt-4.8/threads.html)

# vb.net - vb.net 循环通过控件和 my.settings 变量

> ID：11810814
> 
> 赞同：2
> 
> 时间：2012-08-04T17:57:41.003
> 
> 标签：vb.net

我有 20 个文本框和 20 个 my.settings 变量

textboxes 和 my.settings 变量具有相同的名称 textbox name: mid0 并且它的值是 my.settings.mid0

文本框是在运行时创建的，我有一个保存按钮，它将文本框的值保存在 my.settings 变量中

这是代码

```
Dim Ctl As Control
    Dim MyTextbox As TextBox
    For i As Integer = 0 To 20
        Ctl = tabc.TabPages(6).Controls.Item("mid" & i.ToString)
        If Ctl IsNot Nothing Then
            MyTextbox = CType(Ctl, TextBox)
            My.Settings.("mid" & i.ToString) = MyTextbox.Text 'this line is the problem
        End If
    Next 
```

那么我如何遍历 my.settings 变量？从 mid0 到 mid20

我试过

```
CallByName(My.Settings, "mid" & i.ToString, CallType.Set) = MyTextbox.Text 
```

但我收到一个错误“表达式是一个值，因此不能成为赋值的目标。”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T18:06:09.630

将 My.Settings 行更改为

```
My.Settings("mid" & i.ToString) = MyTextbox.Text 
```

这实际上相当于删除期间:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T19:08:52.523

你不能写 CallByName(...)=smtg。因为 CallByName 是一个函数，而不是属性。
但是 CallByName 的第 4 个参数让你做你想做的一切。
这是您需要的代码，无需更改所有代码即可工作：

```
CallByName(My.Settings, "mid" & i.ToString, CallType.Set, MyTextbox.Text) 
```

我认为这会对你有很大帮助。祝你好运 ！

# java - JFrame中的JPopupMenu使用AWTUtilities.setWindowOpaque（window，false）使用合成器L＆F没有出现

> ID：11810817
> 
> 赞同：1
> 
> 时间：2012-08-04T17:58:01.440
> 
> 标签：java, swing, jpopupmenu, synth

这让我很不解。基本上，我正在使用自定义 Synth L&F 使用透明形状的窗口开发多窗口应用程序。应用程序的部分调用`JFrame`/`JDialog`来自父框架的组件。在这些组件中，我有弹出菜单和组合框，问题是某些使用应用程序的人在调用时遇到弹出菜单不出现的问题。没有例外，代码执行良好，包括弹出菜单的“显示”方法。

除了在 mac OSX 上似乎没有问题之外，我试图将其确定为操作系统细节，但并没有太多乐趣。像我这样的一些 Windows 用户没有遇到任何问题，而其他人则......

我还追踪了设置窗口不透明度的违规代码行：

```
AWTUtilities.setWindowOpaque(window, false) 
```

如果我删除了这个 LOC，那么弹出窗口会很好。除了用以下内容替换此 LOC：

```
window.setBackground(new Color(0.0f, 0.0f, 0.0f, 0.0f)); 
```

产生同样的问题。另一件事是，如果我使用默认的 L&F，弹出窗口呈现正常。

只是为了确认两个组件的问题是相同的，`JFrame`并且`JDialog`只是想知道是否有其他人遇到过这个问题或者可以指出我可能的原因。

干杯

测试源重现：

```
import com.sun.awt.AWTUtilities;

import javax.swing.*;
import javax.swing.plaf.synth.SynthLookAndFeel;
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

public class TestFrame extends JFrame{

    public TestFrame(){
        super.setTitle("Test Frame");

        JButton btnDialog = new JButton("Open Dialog");
        btnDialog.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                TestDialog dialog = new TestDialog(TestFrame.this, true);
                dialog.setVisible(true);
            }
        });

        super.add(btnDialog, BorderLayout.CENTER);
        super.pack();
        super.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        super.setVisible(true);
    }

    public static void main(String[] args){
        initLookAndFeel();
        new TestFrame();
    }

    public static void initLookAndFeel() {
        SynthLookAndFeel lookAndFeel = new SynthLookAndFeel();
        try {
            lookAndFeel.load(TestFrame.class.getResourceAsStream("/testskin.xml"), TestFrame.class);
            UIManager.setLookAndFeel(lookAndFeel);
        }
        catch (Exception e) {
           e.printStackTrace();
        }
    }

    public static class TestDialog extends JDialog{

        public TestDialog(Frame owner, boolean modal) {
            super(owner, modal);

            JComboBox petList = new JComboBox(new String[] { "Bird", "Cat", "Dog", "Rabbit", "Pig" });
            super.add(petList, BorderLayout.CENTER);

            super.setUndecorated(true);
            AWTUtilities.setWindowOpaque(this, false);
            super.pack();
        }
    }
} 
```

和testskin.xml：

```
<synth>

    <style id="backingStyle">
        <opaque value="true"/>
        <font name="Dialog" size="14"/>
    </style>
    <bind style="backingStyle" type="region" key=".*"/>

    <style id="ComboBox List Renderer">
        <opaque value="true"/>
        <state value="ENABLED">
            <color type="TEXT_FOREGROUND" value="#000000"/>
        </state>
        <state value="DISABLED">
            <color type="TEXT_FOREGROUND" value="#999999"/>
        </state>
        <state value="SELECTED">
            <color type="TEXT_FOREGROUND" value="#CC6600"/>
            <color type="TEXT_BACKGROUND" value="#FFEEDD"/>
        </state>
    </style>
    <bind style="ComboBox List Renderer" type="name" key="ComboBox.listRenderer" />

    <style id="Combo Box">
        <property key="ComboBox.showPopupOnNavigation" type="boolean" value="true"/>
        <state>
            <color value="#D8D987" type="BACKGROUND"/>
        </state>
    </style>
    <bind style="Combo Box" type="region" key="ComboBox" />

</synth> 
```

如前所述，删除：

```
AWTUtilities.setWindowOpaque(window, false) 
```

使组合框弹出菜单渲染正常，此外为所有样式（在 style="backingStyle" 下）添加默认背景，例如：

```
<state>
   <color value="#D8D987" type="BACKGROUND"/>
</state> 
```

至少会使弹出菜单出现，但仍无法正确呈现。我在三个单独的 windows xp 虚拟机上试过这个，都遇到同样的问题。此外，我认为我没有提到这一点，但它是基于 JDK 7 构建的，并且在所有情况下都在等效的 JRE 上运行。我自己在 Windows 7 Ultimate 64 位上没有遇到任何问题，另一位使用 Windows 7 Premium 64 位的用户确实遇到了同样的问题。

* * *

一些进展，如果出现以下情况，弹出菜单组件的绘制方法无法调用：

```
AWTUtilities.setWindowOpaque(window, false) 
```

已设置。在调用 'show' 方法后手动调用 repaint、updateUI、revalidate 将使弹出菜单渲染正常。对于设置自定义 UI 并覆盖“createPopup”方法的组合框元素，使用扩展 javax.swing.plaf.basic.BasicComboPopup 的类，该类在显示时调用 repaint/updateUI/revalidate，例如：

```
 public class ComboPopup extends BasicComboPopup {

    public ComboPopup( JComboBox combo ) {
        super(combo);
    }

    @Override
    public void show(Component invoker, int x, int y) {
        super.show(invoker, x, y);
        this.updateUI();
    }
} 
```

将使组合框菜单呈现正常。但是，由于弹出窗口是在私有方法中创建的，因此我还没有找到弹出窗口的 submneu (JMenu) 项目的解决方法。这似乎是一个错误，但如果我做错了什么，有人可以告诉我:)

干杯

乔纳森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-22T19:30:31.713

[我在这里](https://stackoverflow.com/questions/18265085/setting-the-jframe-background-transparent-making-popupmenu-blank)回答了一个类似的问题。希望它对找到此线程的其他人有所帮助，我也会将我的解决方法放在这里。

基本上，每当您需要 HeavyWeightPopup 时，您的问题就会出现 - 一个不适合目标窗口的弹出窗口。解决方法是在任何弹出窗口显示后调用重绘。启动应用程序时只需调用以下代码。

```
PopupFactory.setSharedInstance(new PopupFactory() 
{
    @Override
    public Popup getPopup(Component owner, final Component contents, int x, int y) throws IllegalArgumentException
    {
        Popup popup = super.getPopup(owner, contents, x, y);
        SwingUtilities.invokeLater(new Runnable()
        {
            @Override
            public void run()
            {
                contents.repaint();
            }
        });
        return popup;
    }
}); 
```

# python - pycharm中的Django新syncdb超级用户崩溃

> ID：11810826
> 
> 赞同：1
> 
> 时间：2012-08-04T17:59:11.970
> 
> 标签：python, django, pycharm, django-syncdb, syncdb

我在 Django 中创建新数据库时遇到问题：

```
bash -cl "/Library/Frameworks/Python.framework/Versions/2.7/bin/python /Applications/PyCharm.app/helpers/pycharm/django_manage.py syncdb /Users/hollywoord/PycharmProjects/Gizeh"
Creating tables ...
Creating table auth_permission
Creating table auth_group_permissions
Creating table auth_group
Creating table auth_user_user_permissions
Creating table auth_user_groups
Creating table auth_user
Creating table django_content_type
Creating table django_session
Creating table django_site
Creating table django_admin_log
Creating table Raketa_poll
Creating table Raketa_choice

You just installed Django's auth system, which means you don't have any superusers defined.
Would you like to create one now? (yes/no): yes
Traceback (most recent call last):
  File "/Applications/PyCharm.app/helpers/pycharm/django_manage.py", line 20, in <module>
    run_module(manage_file, None, '__main__', True)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/runpy.py", line 176, in run_module
    fname, loader, pkg_name)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/runpy.py", line 82, in _run_module_code
    mod_name, mod_fname, mod_loader, pkg_name)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/runpy.py", line 72, in _run_code
    exec code in run_globals
  File "/Users/hollywoord/PycharmProjects/Gizeh/manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/core/management/__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/core/management/base.py", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/core/management/base.py", line 371, in handle
    return self.handle_noargs(**options)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/core/management/commands/syncdb.py", line 110, in handle_noargs
    emit_post_sync_signal(created_models, verbosity, interactive, db)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/core/management/sql.py", line 189, in emit_post_sync_signal
    interactive=interactive, db=db)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/dispatch/dispatcher.py", line 172, in send
    response = receiver(signal=self, sender=sender, **named)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/contrib/auth/management/__init__.py", line 73, in create_superuser
    call_command("createsuperuser", interactive=True, database=db)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/core/management/__init__.py", line 150, in call_command
    return klass.execute(*args, **defaults)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/contrib/auth/management/commands/createsuperuser.py", line 70, in handle
    default_username = get_default_username()
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/contrib/auth/management/__init__.py", line 105, in get_default_username
    default_username = get_system_username()
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/contrib/auth/management/__init__.py", line 85, in get_system_username
    return getpass.getuser().decode(locale.getdefaultlocale()[1])
TypeError: decode() argument 1 must be string, not None

Process finished with exit code 1 
```

我在那里读了很多消息，人们说它的语言环境有问题，但我检查了我的语言环境并且没问题：en_US.UTF-8

还能是什么？

Mac OS 10.8、Python 2.7.3、Django 1.4.1

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T20:48:04.717

这是已知的 django 错误[#16017](https://code.djangoproject.com/ticket/16017)，这是因为您的环境没有默认语言环境。

在您的环境中执行此操作：

```
export LC_ALL=en_US.UTF-8
export LANG=en_US.UTF-8 
```

然后该命令将正常工作。

# coldfusion - CFWheels - 为什么 allErrors() 返回一个空数组？

> ID：11810828
> 
> 赞同：0
> 
> 时间：2012-08-04T17:59:16.800
> 
> 标签：coldfusion, railo, cfwheels

是的......（我......再次！）

我正在尝试解决一些错误，当我在我的控制器中转储 allErrors() 时，它只是一个空数组，当我知道它不应该是一个事实时。

**链接.cfc（模型）**

```
<cffunction name="init">

<cfset validate(property='linkURL', method="validateUniqueUrl", when="onCreate") />

</cffunction>

<cffunction name="validateUniqueUrl" access="public">
        <cfif this.exists(where="linkURL='#this.linkURL#'")>
            <cfset this.addError(property="linkURL", name="linkExists", message="The link you entered already exists.") />
        </cfif>
    </cffunction> 
```

如果链接存在，我会在我的视图中正确地得到错误：

```
<cfoutput>#errorMessagesFor("link")#</cfoutput> 
```

但是，在我的控制器中，我想通过以下方式转储模型上的所有错误：

```
<cfdump var="#link.allErrors()#" abort /> 
```

只是一个空白数组！怎么回事？！

即使我然后尝试：

```
<cfdump var="#link.errorsOn("link")#" abort /> 
```

...再次，一个 EMPTY 数组。

这里到底发生了什么？我是白痴还是什么？

谢谢。迈克尔。

**更新：**

好的，所以它似乎`<cfdump var="#link.allErrors()#" abort />`在我看来是有效的，但不是在控制器中？为什么不？我需要在控制器中使用它，以便我可以进行重定向！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T18:25:23.297

好的，我自己想通了。典型的是，这总是在我发布问题后几分钟发生。横向思维？？

我必须在`errorsOn()`方法之后调用该`link.save()`方法。

我在 link.save() 方法之前将其声明为一个变量...所以我猜 CFWheels 那时从来不知道有错误...因为显然您在知道错误之前没有尝试保存对吗？

呸！逻辑。

# android - 使用 ViewPager#setCurrentItem() 时出现“java.lang.IllegalStateException: Can't change tag of fragment”错误

> ID：11810833
> 
> 赞同：5
> 
> 时间：2012-08-04T18:00:00.070
> 
> 标签：android, android-viewpager, fragment

我正在尝试使用`ViewPager + FragmentPagerAdapter.` 我目前正在使用最新的 Android 支持包 v4切换片段

我的应用中有 5 个标签。当我选择第 4 个选项卡时，应用程序突然退出并显示“无法更改片段的标签 ~~”。

我没有尝试替换布局 xml 文件中包含的 Fragment，所以我无法找出原因。

**这是发生错误的代码：**

```
@Override
public void onTabSelected(ActionBar.Tab tab,
        FragmentTransaction fragmentTransaction) {
    // When the given tab is selected, switch to the corresponding page in
    // the ViewPager.
    mViewPager.setCurrentItem(tab.getPosition());
} 
```

下面是我正在使用的 FragmentPagerAdapter 的片段

```
@Override
    public Fragment getItem(int i) {
        if (fragment_list.get(i) == null) {
            fragment_list.add(i, getFragment(i));
        }

        return fragment_list.get(i);
    }

    private Fragment getFragment(int index) {
        switch (index) {
        case TOP:
            return UseCaseListWithOptionFragment.newInstance(
                    URLHelper.USE_CASES_TOP_URL, R.array.comment);
        case FEED:
            int user_id = UserHelper.getCurrentUser(MainActivity.this).id;
            return UseCaseListFragment.newInstance(
                    URLHelper.getMyFeedsURL(user_id), true);
        case RECENT:
            return UseCaseListFragment.newInstance(
                    URLHelper.USE_CASES_RECENT_URL, true);
        case CATEOGORY:
            return UseCaseGroupListFragment.newInstance(
                    URLHelper.USE_CASE_GROUPS_URL, R.array.use_case);
        case MY:
            return UserProfileFragment.newInstance(UserHelper
                    .getCurrentUser(MainActivity.this));
        default:
            throw new IllegalStateException("Tab index out of bound.");
        }
    }

    @Override
    public int getCount() {
        return TAB_COUNT;
    } 
```

**以下是我遇到的错误日志：**

```
08-04 17:51:55.983: E/AndroidRuntime(1112): FATAL EXCEPTION: main
08-04 17:51:55.983: E/AndroidRuntime(1112): java.lang.IllegalStateException: Can't change tag of fragment UseCaseGroupListFragment{4055f558 id=0x7f050034 android:switcher:2131034164:3}: was android:switcher:2131034164:3 now android:switcher:2131034164:4
08-04 17:51:55.983: E/AndroidRuntime(1112):     at android.support.v4.app.BackStackRecord.doAddOp(BackStackRecord.java:356)
08-04 17:51:55.983: E/AndroidRuntime(1112):     at android.support.v4.app.BackStackRecord.add(BackStackRecord.java:347)
08-04 17:51:55.983: E/AndroidRuntime(1112):     at android.support.v4.app.FragmentPagerAdapter.instantiateItem(FragmentPagerAdapter.java:99)
08-04 17:51:55.983: E/AndroidRuntime(1112):     at android.support.v4.view.ViewPager.addNewItem(ViewPager.java:692)
08-04 17:51:55.983: E/AndroidRuntime(1112):     at android.support.v4.view.ViewPager.populate(ViewPager.java:875)
08-04 17:51:55.983: E/AndroidRuntime(1112):     at android.support.v4.view.ViewPager.setCurrentItemInternal(ViewPager.java:469)
08-04 17:51:55.983: E/AndroidRuntime(1112):     at android.support.v4.view.ViewPager.setCurrentItemInternal(ViewPager.java:441)
08-04 17:51:55.983: E/AndroidRuntime(1112):     at android.support.v4.view.ViewPager.setCurrentItem(ViewPager.java:422)
08-04 17:51:55.983: E/AndroidRuntime(1112):     at org.everyuse.android.activity.MainActivity.onTabSelected(MainActivity.java:176)
08-04 17:51:55.983: E/AndroidRuntime(1112):     at com.actionbarsherlock.internal.app.ActionBarImpl.selectTab(ActionBarImpl.java:526)
08-04 17:51:55.983: E/AndroidRuntime(1112):     at com.actionbarsherlock.internal.app.ActionBarImpl$TabImpl.select(ActionBarImpl.java:907)
08-04 17:51:55.983: E/AndroidRuntime(1112):     at com.actionbarsherlock.internal.widget.ScrollingTabContainerView$TabClickListener.onClick(ScrollingTabContainerView.java:503)
08-04 17:51:55.983: E/AndroidRuntime(1112):     at android.view.View.performClick(View.java:2485)
08-04 17:51:55.983: E/AndroidRuntime(1112):     at android.view.View$PerformClick.run(View.java:9080)
08-04 17:51:55.983: E/AndroidRuntime(1112):     at android.os.Handler.handleCallback(Handler.java:587)
08-04 17:51:55.983: E/AndroidRuntime(1112):     at android.os.Handler.dispatchMessage(Handler.java:92)
08-04 17:51:55.983: E/AndroidRuntime(1112):     at android.os.Looper.loop(Looper.java:123)
08-04 17:51:55.983: E/AndroidRuntime(1112):     at android.app.ActivityThread.main(ActivityThread.java:3683)
08-04 17:51:55.983: E/AndroidRuntime(1112):     at java.lang.reflect.Method.invokeNative(Native Method)
08-04 17:51:55.983: E/AndroidRuntime(1112):     at java.lang.reflect.Method.invoke(Method.java:507)
08-04 17:51:55.983: E/AndroidRuntime(1112):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
08-04 17:51:55.983: E/AndroidRuntime(1112):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
08-04 17:51:55.983: E/AndroidRuntime(1112):     at dalvik.system.NativeStart.main(Native Method) 
```

提前致谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T13:29:17.887

错误地实现 getCount 方法时，我遇到了同样的异常。您是否检查过是否返回了正确的尺寸？

```
@Override
public int getCount() {
    return 5;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-13T08:35:53.183

我看到你问这个问题已经有一段时间了，但对于未来可能面临这个问题的用户来说......

我在某些设备上遇到了完全相同的错误，在看到@mkasberg 的评论之前我找不到任何理由……不知何故，getItem 方法可能被不按顺序调用，可能是因为某些设备处理速度更快或者我不知道，但是使用 sparseArray 而不是 arrayList 解决了我的问题。谢谢！

在这里你怎么能做到：

```
public Fragment getItem(int i) {
    if (sparseArray.get(i) == null) {
        sparseArray.put(i, getFragment(i));
    }

    return sparseArray.get(i);
} 
```

# php - PHP中的搜索查询功能

> ID：11810835
> 
> 赞同：-2
> 
> 时间：2012-08-04T18:00:22.057
> 
> 标签：php, facebook, string, api

我遇到了一些障碍。我正忙于为我的社交网络隐私意识网站构建搜索功能。搜索将查询 Facebook Graph API，您可以使用[https://graph.facebook.com/search?q=i](https://graph.facebook.com/search?q=i) hat my boss&type=post&limit=100&locale=en_GB 我的问题是我想在查询周围加上引号所以当用户在文本字段中键入并点击搜索按钮时，php 代码会完成其余的工作并查询 API，但同时会像[https://graph.facebook.com/search?q=](https://graph.facebook.com/search?q=) “我讨厌我的老板”。

问题是我该怎么做？我的代码只是部分地保持它的位置：

```
$str = $_REQUEST['query'];
$str = urlencode($str);
$fbquery = "https://graph.facebook.com/search?q={$str}&type=post&limit=100&locale=en_GB"; 
```

显然我在问我将在哪里或如何将引号放在那里的问题？

任何可以帮助我的人，我都会非常感激！我尝试过其他方法，例如：

```
$str = '".$str."'; 
```

或者

```
$str = '"$q"'; 
```

但没有一个奏效。请帮忙！

提前致谢 ：-）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T18:07:43.523

由于您在 url 中通过 GET 传递查询字符串，因此在将查询传递到 url 之前，您应该需要对查询进行编码。

php [urlencode](http://php.net/manual/en/function.urlencode.php)函数执行此操作。

所以而不是：

```
y = "https://graph.facebook.com/search?q={$str}"; 
```

你需要

```
$encoded_str = urlencode($str);
y = "https://graph.facebook.com/search?q={$encoded_str}"; 
```

例子：

> [https://graph.facebook.com/search?q=](https://graph.facebook.com/search?q=good)好酒

对比

> [https://graph.facebook.com/search?q=good%20wine](https://graph.facebook.com/search?q=good%20wine)

在第二个例子中， `被翻译成`%20``

 `* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T18:10:20.770

尝试这个。这很简单。

$str = '"'.$str.'"';

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T18:08:28.617

我认为在应该工作**之前添加引号。**`urlencode`还可以考虑使用[http_build_query](http://php.net/manual/en/function.http-build-query.php)函数，它应该为您提供有效的查询字符串结果，并且更具可读性。

```
$params = http_build_query(array(
    'q' => '"'.$str.'"',
    'type' => 'post',
    'limit' => 1000,
    'local' => 'en_GB',
));

print 'https://graph.facebook.com/search?'.$params; 
```

在我的测试中，添加引号不会改变从 Facebook 艰难返回的结果。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-04T18:07:10.803

这个怎么样：

`$fbquery = "https://graph.facebook.com/search?q=\"{$str}\"&type=post&limit=100&locale=en_GB";``

# sql - 如何在 Microsoft Access 中通过 VBA 设置 INSERT SQL 查询的参数值？

> ID：11810843
> 
> 赞同：5
> 
> 时间：2012-08-04T18:01:39.087
> 
> 标签：sql, ms-access, vba, ms-access-2010

我是 Access 新手，我来自 C#、SQL Server 和 .Net。我遇到了一个项目，我必须完成一些部分。

场景可以描述为：

1.  带有子表单的 Access 表单
2.  作为上述子表单的数据源的 Access 查询，带有两个参数，显示为：`Parametername1 String(255),Parametername2 String(255)`。
3.  VBA 代码模块

我的计划是在我的 VBA 代码模块的过程中设置上述查询参数的值。我相信这应该刷新我的子表单，因为查询是子表单的数据源。

问题是我不知道如何实施这个计划。

我想使用查询，因为我不想用内联 SQL 弄乱我的 VBA 代码。

我正在使用 Access 2010。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T04:18:54.780

我正好有这个问题，我想使用相同的“存储”更新查询，但从两种不同的形式执行它，所以想在运行时将参数传递给查询。这就是我发现的（在另一个论坛中），它完全符合我的要求：

```
With CurrentDb.QueryDefs("qry_YourQuery")
   .Parameters("yourParam") = yourVBAvar
   .Execute
End With 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T19:49:01.623

子表单的全部意义在于它由记录源以及链接子字段和主字段控制。假设表单是公司，子表单是员工，子表单的记录源可能是：

```
SELECT EmployeeID, CompanyID, Position, Etc FROM Employees 
```

链接子字段和主字段将为 CompanyID。当您在主表单中移动时，只会显示与当前公司相关的那些记录。假设您只想显示那些技术职位的员工，您可以在运行时更改记录源：

```
SELECT EmployeeID, CompanyID, Position, Etc FROM Employees
WHERE Position = "Technical" 
```

或者，如果这始终是表单上的过滤器，请在主表单中添加一个组合框，并将其用作第二个链接主字段，这样您就有：

```
Link Master Fields:  CompanyID; cboPosition
Link Child Fields :  CompanyID; Position 
```

最后，您可以简单地从主窗体设置过滤器属性：

```
Me.Employees_subform.Form.Filter = "Position=""Tecnical"""
Me.Employees_subform.Form.FilterOn = True 
```

如果这不是您的想法，请在您的问题中添加一些注释。

**编辑**

您可以通过引用表单上的控件来为查询提供参数：

```
SELECT EmployeeID, CompanyID, Position, Etc FROM Employees
WHERE Position = Forms!MyMainForm!cboPosition 
```

您可以完全更改查询的 SQL，并且可以使用 ADO，但是，更改 SQL 类似于设置记录源，因为 SQL 是在代码中更改的，并且使用 ADO 通常不是表单的最佳选择。

您不能做的是更改参数并将其“粘”在表单或子表单中。

例如：

```
DoCmd.SetParameter "@SomeID", "1"
' This works
DoCmd.OpenQuery ("Queryx")

' This will give a prompt for @SomeID and then run
Me.SomeSubform.Form.RecordSource = "Queryx" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T15:55:46.427

您可以创建一个函数并在表单的记录源查询中使用该函数（而不是常规参数）。

```
Public Function PositionParam(Optional ByVal P1 As Variant) As Variant
    Static varP As Variant

    If Not IsMissing(P1) Then
        If IsNull(P1) Then
            varP = Null
        Else
            varP = CStr(P1)
        End If
    ElseIf VarType(varP) = vbEmpty Then
        varP = Null
    End If
    PositionParam = varP
End Function 
```

记录来源查询：

```
SELECT y.id_fld, y.another_fld, y.position_fld
FROM YourTable AS y
WHERE
       y.position_fld = PositionParam()
    OR PositionParam() Is Null
ORDER BY y.id_fld, y.another_fld; 
```

稍后当您想在子表单中显示一组不同的行时，更改分配给子表单的`PositionParam()`值`Requery`。

```
PositionParam "technician"
Forms("YourForm").Requery 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-13T21:55:05.867

子表单绑定到一个查询，该查询根本不应该有任何参数。

您当然可以将子表单的 SQL 存储在查询中，这样就消除了内联 sql，但是然后转身编写 WHACKS 代码来解决这个问题完全没有意义，不是吗？

如前所述，子表单重新编码的过滤和显示是自动的，并且如果您从控件设置子的主链接和子设置，则无需代码即可发生。您可能在这里不需要任何代码。

但是，如果出于某种真正原因您需要编写代码或想要更多的计费时间，那么您可以使用以下代码：

```
Dim strSql     As String

strSql = Split(CurrentDb.QueryDefs("name of query").SQL, ";")(0)

strSql = strSql & "where Field1 = " & "'your p1 value'" & _
                  " and Field2 = " & "' your p2 value'"

Me.custChild.Form.RecordSource = strSql 
```

因此，您不需要 sql 中的任何参数，而只需使用子表单所基于的 CURRENT 和 SAME 查询。此外，如果您添加参数，那么您将在查询中对 2 个值进行硬编码，然后该查询不能用于其他代码和任务，除非您提供 2 个 SAME 硬编码参数（因此，在其他地方使用该查询时，这几乎没有灵活性有不同的选择）。

因此，将参数排除在查询之外，并保留相同的金钱和时间以及计费时间。

按照上面的方法提取查询 SQL 并向 SQL 添加条件是一件简单的事情。但是，如果您希望将数据插入子表单，那么您可以直接使用子表单数据源和 reocrdset。例如：

```
 Dim rst     As DAO.Recordset

  Set rst = Me.custChild.Form.RecordsetClone

  rst.AddNew
  rst!SomeField = "some valjue"
  rst!SomeField2 = "some value"
  rst.Update

  Me.custChild.Requery 
```

# android - 更改设备方向时调用的方法的顺序是什么

> ID：11810846
> 
> 赞同：1
> 
> 时间：2012-08-04T18:02:07.420
> 
> 标签：android, screen-orientation

有人可以解释一下吗。我试着分析了很多。但没有运气。以下是当我在运行我的应用程序时将设备模式更改为横向到纵向时会调用哪些方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T18:07:54.360

您的活动实际上正在被破坏和重新创建。查看[活动生命周期](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)

假设你的活动正在运行，你会去的。

*   暂停（）
*   停止()
*   onDestory()
*   onCreate()
*   开始（）
*   onResume()

此外，您还将获得 onSaveInstanceState 和 onRestoreInstanceState 调用。在这里，您可以保存 Activity 中要恢复的任何内容，例如光标位置、视图焦点等...

我同意@While-E 查看这篇文章。有很多好资料[Activity restart on rotation Android](https://stackoverflow.com/questions/456211/activity-restart-on-rotation-android)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T14:21:17.523

这取决于您是否尝试扩展 Activity 或 Application 类。Activity 类将像@Frank 所说的那样直接完成整个生命周期。但是，如果您使用 Application 类：

> application 类中的 onCreate 仅在创建整个应用程序时调用，因此 Activity 在方向或键盘可见性更改时重新启动不会触发它。

我决定将其作为答案，因为我最初的评论似乎具有误导性。

参考：[Android 上的 Activity 轮换重启](https://stackoverflow.com/questions/456211/activity-restart-on-rotation-android)

# jquery - 使用 jQuery .val() 设置 div 的内容

> ID：11810848
> 
> 赞同：1
> 
> 时间：2012-08-04T18:02:14.197
> 
> 标签：jquery

在我的 HTML 中：

```
< div id="textarea" style="overflow: scroll;"> < /div> 
```

我正在尝试将一段在 var 中设置的 javascript 文本`X`放入 textarea 但每当我这样做时

```
$("#textarea").val(X); 
```

什么都没有发生，而如果我这样做

```
$("#textarea").text(X); 
```

的文本版本`X`显示，但不显示格式，如`\n`.

我怎样才能`X`在我的文本区域中正确显示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T18:05:17.970

`val()`用于设置/获取`textarea`and`input`元素的值，对于`div`应该使用的元素`text()`or `html()`。如果你想添加 HTML 标记，你应该使用[`html()`](http://api.jquery.com/html/)方法：

> 获取/设置匹配元素集中第一个元素的 HTML 内容。

```
$("#textarea").html(X); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T18:04:45.053

命名`div`textarea 不会使其成为`textarea`. 尝试这个。

```
$("#textarea").html(X); 
```

`val`用于输入，文本区域等...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T18:05:20.887

利用`.html()`

```
$("#textarea").html(X); 
```

# java - 使用 mysql for heroku 的 Roo 项目

> ID：11810849
> 
> 赞同：1
> 
> 时间：2012-08-04T18:02:16.260
> 
> 标签：java, mysql, heroku, spring-roo

任何人都面临与 mysql for heroku 连接的 roo 项目的问题？我想使用 mysql 数据库部署我的 roo 项目，我按照 heroku 提供的一些教程进行操作，但这一切似乎都不起作用。我成功推送了所有文件，它没有给我任何错误，但是当我打开网站时，它显示我的应用程序错误......任何有这个问题的人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T09:54:41.713

您需要彻底阅读这篇文章： [https ://devcenter.heroku.com/articles/java-webapp-runner](https://devcenter.heroku.com/articles/java-webapp-runner)

# django - Django重定向失败

> ID：11810853
> 
> 赞同：0
> 
> 时间：2012-08-04T18:03:38.793
> 
> 标签：django

我重定向到新页面失败并出现错误，

登录.html,

```
<html>
    <head>
        <title>Django Bookmarks -User Login</title>
    </head>
    <body>
        <h1>User Login</h1>
        {% if form.errors %}
            <p>Your username and password didn't match</p>
        {% endif %}
        <form method="post" action=".">
            <p><label for="id_username">Username:</label>
                {{ form.username }}</p>
            <p><label for="id_password">Password</label>
                {{ form.password }}</p>
            <input type="hidden" name="text" value="/" />
            <input type="submit" value="login" />
        </form>
    </body>
</html> 
```

网址.py

```
from django.conf.urls.defaults import patterns, include, url
from bookmarks.views import *

urlpatterns = patterns('',
    (r'^$',main_page),
    (r'^user/(\w+)/$',user_page),
    (r'^login/$','django.contrib.auth.views.login'),

) 
```

错误

```
Error:

Forbidden (403)

CSRF verification failed. Request aborted.
Help

Reason given for failure:
    CSRF cookie not set.

 In general, this can occur when there is a genuine Cross Site Request Forgery, or when Django's CSRF mechanism has not been used correctly. For POST forms, you need to ensure:
•The view function uses RequestContext for the template, instead of Context.
•In the template, there is a {% csrf_token %} template tag inside each POST form that targets an internal URL.
•If you are not using CsrfViewMiddleware, then you must use csrf_protect on any views that use the csrf_token template tag, as well as those that accept the POST data. 
```

设置.py 文件

```
LOGIN_URL ='/login/'

LOGIN_REDIRECT_URL = '/login/' 
```

新错误：

```
Page not found (404)

Request Method:

POST

Request URL:

http://127.0.0.1:8000/login/=%22.%22

 Using the URLconf defined in django_bookmarks.urls, Django tried these URL patterns, in this order: 
1\. ^$ 
2\. ^user/(\w+)/$ 
3\. ^login/$ 

The current URL, login/=".", didn't match any of these 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T18:19:03.287

我认为这很清楚：

> 失败原因：未设置 CSRF cookie。
> 
> 在模板中，每个针对内部 URL 的 POST 表单内都有一个 {% csrf_token %} 模板标签。

您需要在表单中包含一个`CSRF`令牌：

[https://docs.djangoproject.com/en/dev/ref/contrib/csrf/](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/)

```
<form method="post" action=".">{% csrf_token %} 
```

# c# - OpenGL/DirectX Hook - 类似于 FRAPS

> ID：11810854
> 
> 赞同：14
> 
> 时间：2012-08-04T18:03:39.500
> 
> 标签：c#, c++, winapi, opengl, directx

是否可以检测到哪些应用程序正在使用类似于 FRAPS 的 OpenGL 或 DirectX？（可能使用某种形式的钩子）？我可能不需要实际绘制到窗口，我只需要知道哪些进程目前正在执行某种形式的 3D 渲染。

（编辑：）如果您不熟悉它，FRAPS 是一个可用于在 3D 应用程序上绘制“每秒帧数”计数器的程序。FRAPS 会自行查找所有正在运行的 3D 应用程序，而无需您指定进程名称。

绘制到外部游戏的“每秒帧数”计数器示例： ![在此处输入图像描述](../Images/8fe25d78875d81e11af944249a52a361.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-07T11:16:23.907

可能最简单的方法是检查 OpenGL 和 DirectX 核心库的存在，也可能是添加驱动程序 OGL dll 的好主意（例如 nvogl），这可以通过[`EnumProcesses`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682629%28v=vs.85%29.aspx)&[`EnumProcessModulesEx`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682633%28v=vs.85%29.aspx)使用 p/invoke 来完成，这至少会为您提供一组可能使用 OGL 或 DX 的初始流程。

当然，有些应用程序同时加载两个 API 并仅使用一个，或者仅有条件地使用 GFX API 之一（尽管后者仅使用专用工具等发生），为此，IMO，最好的检查方法是执行某种形式的注入或像调试器一样附加到进程，然后挂钩`Present`DX 或`wglSwapBuffers`OGL。

您可能会通过枚举 GDI 句柄并查找 DXGI 或 OGL 渲染上下文来避免不使用钩子，我不知道这有多可行。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-12T05:08:21.067

据我了解，FRAPS 使用相对蛮力的方法来确定在哪里开店。该进程从 SetWindowsHookEx 开始，以请求操作系统将 FRAPS 挂钩 DLL 加载到它可以 [和未来进程] 的每个正在运行的进程中。DLL 中的神奇之处在于使用 GetModuleHandleA 运行一组程序测试，以观察它所连接的进程是否已加载任何 OpenGL/DirectX 模块。如果所有调用都返回 NULL，则挂钩会尝试将自身从进程中删除。

另一方面，如果进程已加载它们，它只需通过移除保护并注入 JMP 挂钩来从该库中挂钩适当的渲染函数。wglSwapBuffers 通常是 OpenGL 中唯一相关的。当进程调用此函数时，它最终调用 FRAPS 模块，然后 FRAPS 将后台缓冲区捕获到其队列中以编码为 AVI 并呈现其少量指示。然后它处理对 wglSwapBuffers 的原始请求并将执行返回给程序。

至于在 C# 中查询...查看 EasyHook (http://easyhook.codeplex.com/)，看看它是否不适合您。我个人对这个 API 没有经验。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T14:49:10.507

您应该看看[如何在 Windows 游戏上叠加图形？](https://stackoverflow.com/questions/3266346/how-to-overlay-graphics-on-windows-games)和链接的文章[http://www.ring3circus.com/gameprogramming/case-study-fraps/](http://www.ring3circus.com/gameprogramming/case-study-fraps/)。

第二个链接有一些概念代码应该做实际的钩子部分。它还详细介绍了我想复制和粘贴到这个答案中的方式和原因。

# nginx - ngnix 重定向

> ID：11810856
> 
> 赞同：0
> 
> 时间：2012-08-04T18:03:42.417
> 
> 标签：nginx

我想在 nginx 中设置代理：

```
location ~ ^/m/([^/]*)/([^/]*)/([^/]*)$ {
  proxy_pass http://127.0.0.1:8080/redir/m/$1/$2/$3;
  proxy_redirect off;
  proxy_set_header Host $host;
  proxy_set_header X-Real-IP $remote_addr;
  proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
} 
```

它有效，但这个地址

```
http:// myhost/m/test//ss 
```

被翻译成

```
http:// 127.0.0.1:8080/redir/m/test/ss; 
```

我怎样才能得到我的第二个斜线？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T08:35:13.580

```
语法：merge_slashes on | 离开;
默认值：merge_slashes on；
上下文：http，服务器
```

启用或禁用将 URI 中的两个或多个相邻斜杠压缩为单个斜杠。

# svn - 如何在服务器上创建 SVN 存储库？

> ID：11810858
> 
> 赞同：29
> 
> 时间：2012-08-04T18:04:01.653
> 
> 标签：svn, webserver

如何在服务器上创建 SVN 存储库？尽管我找到了有关此的各种文章，但在我的网站上创建存储库时仍然面临问题。现在我正在使用[assembla](http://www.assembla.com)作为我的 SVN 存储库，但想在我的主机上创建自己的。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-04T18:18:05.383

1.  **创建存储库：**

    `svnadmin create /svnrepos`

2.  **创建一个 SVN 用户**

    `vi /svnrepos/conf/svnserve.conf`

    > 匿名访问 = 无
    > 
    > 授权访问 = 写入
    > 
    > 密码-db = passwd

    **并按以下格式添加用户：** `user = password`

    例如：`tony = mypassword`

3.  **导入您的项目**

    （假设您已将项目文件放入`/projects/myrailsproject`）

    `svn import /projects/myrailsproject file:///svnrepos/myrailsproject`

4.  **将 SVN 服务器作为守护进程启动**

    `svnserve -d`

    **完毕！**您现在应该有一个运行着一个名为 myrailsproject 的项目的 Apache Subversion 服务器。

    尝试从存储库中检查它：

    `svn co svn://192.168.0.2/svnrepos/myyrailsproject`

    由于我们将 anon-access 设置为 none，因此应该提示您输入您在文件中创建的用户名和密码`/svnrepos/conf/passwd`。

# django-cms - 是否有 django-CMS 插件可以链接到具有 URL 的对象？

> ID：11810862
> 
> 赞同：3
> 
> 时间：2012-08-04T18:04:35.100
> 
> 标签：django-cms

我正在使用 Django 1.4 和 django-CMS 2.3。

我有几个带有 apphooks 的应用程序，我希望在 django-CMS 中能够引用应用程序的对象。

为了建立可持续的链接，我正在尝试使用 django-CMS 菜单或通用外键找到一个插件。

如果不存在这样的东西，那么最好的通用外键应用程序是什么？我刚刚使用 django.contrib.contenttypes 制作了一个小插件，它限制了对具有`get_absolute_url`方法的模型的选择，但这太糟糕了。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T23:39:56.413

我刚刚碰到你的问题。我最近为几个项目实现了类似的东西，这是我根据 Adam Alton 在这里描述的工作所做的：http: [//adamalton.co.uk/blog/displaying-django-genericforeignkey-as-single-form -场地/](http://adamalton.co.uk/blog/displaying-django-genericforeignkey-as-single-form-field/)

~~然而，这**不是**一个 CMSPlugin，所以，我知道这并不能直接回答这个问题，但它是我所拥有的，我希望它可以帮助其他人寻找类似的解决方案。~~

作为概述，我在我的模型中定义了一个“横幅”类型，它代表了我客户网站首页上的横幅。每个横幅都可以链接到其他内容。在这些情况下，链接目标可能是 Django-CMS 页面，或许多其他类型中的一种。所有人都定义了 get_absolute_url 方法，尽管我不使用自省来确定这一点，我只是在此处出现的所有类型上实现了 get_absolute_url。无论如何，这里是：

首先，这是 Banner 的简单模型：

```
class Banner(models.Model):
  short_name       = models.CharField(max_length=64, unique=True)
  html             = models.TextField()
  link_text        = models.CharField(max_length=128, default='Learn more')
  destination_type = models.ForeignKey(ContentType, null=True, blank=True,
    limit_choices_to={"model__in": ("Page", "Project", "Person", "Client")}
  )
  destination_id   = models.PositiveIntegerField(null=True, blank=True)
  destination      = generic.GenericForeignKey('destination_type', 'destination_id')
  published        = models.BooleanField(blank=True, default=False)

  def __unicode__(self):
    return self.short_name 
```

这是我的forms.py：

```
import re
from django.forms import ModelForm, ChoiceField
from cms.models import Page
from django.contrib.contenttypes.models import ContentType

from apps.your_application.models import Project, Person, Client

class BannerAdminForm(ModelForm):
  class Meta:
    model = Banner
    fields = ("short_name", "html", "link_text", "destination", "link_hash", "published",)

  # GenericForeignKey form field, will hold combined object_type and object_id
  destination = ChoiceField(required=False)  # Note the 'required=False' here.

  def __init__(self, *args, **kwargs):
    super(BannerAdminForm, self).__init__(*args, **kwargs)

    # Combine object_type and object_id into a single 'destination' field
    # Get all the objects that we want the user to be able to choose from

    # Note: The user is going to locate these by name, so we should
    # alphabetize all of these

    available_objects  = list(Page.objects.all().order_by('title_set__title'))
    available_objects += list(Project.objects.all().order_by('title'))
    available_objects += list(Person.objects.all().order_by('name'))
    available_objects += list(Client.objects.all().order_by('name'))

    # Now create our list of choices for the <select> field
    object_choices = []
    object_choices.append(["", "--"])
    for obj in available_objects:
      type_class = ContentType.objects.get_for_model(obj.__class__)
      type_id = type_class.id
      obj_id = obj.id
      form_value = "type:%s-id:%s" % (type_id, obj_id)  # e.g."type:12-id:3"
      display_text = "%s : %s" % (str(type_class), str(obj))  # E.g. "Client : Apple, Inc."
      object_choices.append([form_value, display_text])

    self.fields['destination'].choices = object_choices

    # If there is an existing value, pre-select it
    if self.instance.destination:
      type_class = ContentType.objects.get_for_model(self.instance.destination.__class__)
      type_id = type_class.id
      obj_id = self.instance.destination.id
      current_value = "type:%s-id:%s" % (type_id, obj_id)
      self.fields['destination'].initial = current_value

  def save(self, *args, **kwargs):
    try:
      #get object_type and object_id values from combined destination field
      object_string = self.cleaned_data['destination']
      matches = re.match("type:(\d+)-id:(\d+)", object_string).groups()
      object_type_id = matches[0]  # get 45 from "type:45-id:38"
      object_id = matches[1]       # get 38 from "type:45-id:38"
      object_type = ContentType.objects.get(id=object_type_id)
      self.cleaned_data['destination_type'] = object_type_id
      self.cleaned_data['destination_id'] = object_id
      self.instance.destination_id = object_id
      self.instance.destination_type = object_type
    except:
      # If anything goes wrong, leave it blank,
      # This is also the case for when '--' is chosen
      # In the drop-down (tsk, tsk, bad code style =/)
      self.cleaned_data['destination_type'] = None
      self.cleaned_data['destination_id'] = None
      self.instance.destination_id = None
      self.instance.destination_type = None

    return super(BannerAdminForm, self).save(*args, **kwargs) 
```

然后，您可以通过调用 `{% if banner.destination %}{{ banner.destination.get_absolute_url }}{% endif %}` 模板来获取目标对象的 URL。

效果很好，在 CMSPlugin 中使用应该不会太难。

![这就是 Django Admin 中的样子](../Images/d0eb25dfd612765b2c00fc2fcd661982.png)

编辑：实际上，我刚刚实现了与 CMSPlugin 表单完全相同的东西。存在本质上的**零**差异。只需记住将表单添加到您的 cms_plugins.py 文件中的插件类中，如下所示：

```
class CMSBannerPlugin(CMSPluginBase):
  form = BannerAdminForm  #   <==== Don't forget this part
  model = Banner
  name = _("Banner Plugin")
  render_template = "apps/your_application/_banner.html"

  def render(self, context, instance, placeholder):
    ...
    return context

plugin_pool.register_plugin(CMSBannerPlugin) 
```

# android - 图像处理：“dalvikvm：此进程的外部分配太大”错误

> ID：11810865
> 
> 赞同：1
> 
> 时间：2012-08-04T18:05:07.270
> 
> 标签：android, memory, bitmap

我有一个照片编辑应用程序。当我导入图像时，它可以正常工作，但是打开图像进行编辑会导致它崩溃。

这是 logcat 输出：

```
 08-04 20:56:16.973: E/dalvikvm-heap(336): 810000-byte external allocation too large for this process.
08-04 20:56:17.073: I/dalvikvm-heap(336): Clamp target GC heap from 25.289MB to 24.000MB
08-04 20:56:17.073: E/GraphicsJNI(336): VM won't let us allocate 810000 bytes 
```

更新：：

```
 @Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    if (requestCode == RESULT_LOAD_IMAGE && resultCode == RESULT_OK
            && null != data) {
        Uri selectedImage = data.getData();
        String[] filePathColumn = { MediaStore.Images.Media.DATA };

        Cursor cursor = getContentResolver().query(selectedImage,
                filePathColumn, null, null, null);
        cursor.moveToFirst();

        int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
        String picturePath = cursor.getString(columnIndex);
        cursor.close();

        ImageView imageView = (ImageView) findViewById(R.id.ivPhoto);
        chosenBitmap = superDecodeFile(new File(picturePath));
        imageView.setBackgroundColor(0);
        Bitmap bMap =   Bitmap.createScaledBitmap(chosenBitmap, 500, 500, true);
        imageView.setImageBitmap(bMap);
    }

} 
```

这是我的 onResult 代码.. 所以我需要使用 .recycle(); 所以我通过回收已经存在的 imageView 来释放一些内存 .. 我在哪里使用 .recycle(); ? 我试图改变 .setBackgroundColor(0); 回收利用（）; 但它不起作用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T18:34:06.443

这是内存泄漏错误。

你的应用被分配了一个大小约为 24MB 的堆。但是您尝试编辑的图像大于堆大小。

发生这种情况是因为您没有释放内存。Android 的 Dalvik VM 不处理`GC`应用程序使用的本机内存。因此，在 Android 中处理图像时，需要显式使用`recycle()`. 这释放了本机内存。

更多细节：[更改 ImageView 内容会导致 OutOfMemoryError](https://stackoverflow.com/questions/2191407/changing-imageview-content-causes-outofmemoryerror)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T18:32:31.053

您的图像太大而无法加载到内存中。不幸的是，您无法更改应用程序使用的最大内存量。有关加载和显示位图的详细信息，请参阅[显示位图。](http://developer.android.com/training/displaying-bitmaps/index.html)

# javascript - 如何在 JavaScript 中获取输入文本值

> ID：11810874
> 
> 赞同：66
> 
> 时间：2012-08-04T18:06:16.550
> 
> 标签：javascript, text, input, get

如何在 JavaScript 中获取输入文本值？

```
<script language="javascript" type="text/javascript">
    lol = document.getElementById('lolz').value;
    function kk(){
    alert(lol);
    }
</script>

<body>
    <input type="text" name="enter" class="enter" value="" id="lolz"/>
    <input type="button" value="click" OnClick="kk()"/>
</body> 
```

当我把它放在`lol = document.getElementById('lolz').value;`函数外面时`kk()`，如上所示，它不起作用，但当我把它放在里面时，它就起作用了。谁能告诉我为什么？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-08-04T18:32:45.463

`lol`当在它之外定义时，你的函数不起作用的原因是，当 JavaScript 首次运行时， [DOM](https://developer.mozilla.org/en-US/docs/Using_the_W3C_DOM_Level_1_Core)尚未加载。因此，`getElementById`将返回`null`（[参见 MDN](https://developer.mozilla.org/en-US/docs/DOM/document.getElementById)）。

您已经找到了最明显的解决方案：通过`getElementById`在函数内部调用，DOM 将在函数被调用时被加载并准备好，并且会像您期望的那样找到元素。

还有一些其他的解决方案。一种是等到整个文档加载完毕，如下所示：

```
<script type="text/javascript">
    var lolz;
    function onload() { 
        lolz = document.getElementById('lolz');
    }
    function kk(){
        alert(lolz.value);
    }
</script>

<body onload="onload();">
    <input type="text" name="enter" class="enter" value="" id="lolz"/>
    <input type="button" value="click" onclick="kk();"/>
</body> 
```

注意标签的`onload`属性。*（附带说明：标签的**属性**已弃用。不要使用它。）*`<body>`*`language``<script>`*

但是，有一个问题`onload`：它一直等到**所有内容**（包括图像等）都加载完毕。

另一种选择是等到 DOM 准备好（通常比`onload`. 这可以使用“普通”JavaScript 来完成，但使用[jQuery](http://jquery.com/)之类的 DOM 库要容易得多。

例如：

```
<script type="text/javascript">
    $(document).ready(function() {
        var lolz = $('#lolz');
        var kk = $('#kk');
        kk.click(function() {
            alert(lolz.val());
        });
    });
</script>

<body>
    <input type="text" name="enter" class="enter" value="" id="lolz"/>
    <input type="button" value="click" id="kk" />
</body> 
```

jQuery 的[.ready()](http://api.jquery.com/ready/)将函数作为参数。该函数将在 DOM 准备好后立即运行。第二个示例还使用[.click()](http://api.jquery.com/click/)来绑定 kk 的`onclick`处理程序，而不是在 HTML 中内联。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-08-04T18:15:44.810

不要以这种方式使用全局变量。即使这可行，这也是糟糕的编程风格。您可以通过这种方式无意中覆盖重要数据。改为这样做：

```
<script type="text/javascript">
   function kk(){
       var lol = document.getElementById('lolz').value;
       alert(lol);
   }
</script> 
```

如果你坚持`var lol`要设置在函数kk之外，那么我提出这个解决方案：

```
<body>
    <input type="text" name="enter" class="enter" value="" id="lolz"/>
    <input type="button" value="click" OnClick="kk()"/>
    <script type="text/javascript">
       var lol = document.getElementById('lolz');
       function kk() {
           alert(lol.value);
       }
    </script>
</body> 
```

请注意，`script`元素必须跟在`input`它所引用的元素之后，因为元素只有`getElementById`在它们已经被解析和创建的情况下才能被查询。

这两个示例都有效，在 jsfiddler 中进行了测试。

**编辑**：我删除了该`language="javascript"`属性，因为它已被弃用。请参阅[W3 HTML4 规范，SCRIPT 元素](http://www.w3.org/TR/html401/interact/scripts.html#edef-SCRIPT)：

> **语言**= [cdata](http://www.w3.org/TR/html401/types.html#type-cdata) [ [CI](http://www.w3.org/TR/html401/types.html#case-insensitive) ]
> 
> > [已弃用](http://www.w3.org/TR/html401/conform.html#deprecated)。此属性指定此元素内容的脚本语言。它的值是语言的标识符，但由于这些标识符不是标准的，因此该属性已被[弃用](http://www.w3.org/TR/html401/conform.html#deprecated)，取而代之的是类型。

和

> 不推荐使用的元素或属性是已被较新的构造过时的元素或属性。[…] 不推荐使用的元素可能会在 HTML 的未来版本中过时。[…] 本规范包括说明如何避免使用已弃用元素的示例。[…]

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-09-19T18:40:15.753

```
<script type="text/javascript">
function kk(){
    var lol = document.getElementById('lolz').value;
    alert(lol);
}

</script>

<body onload="onload();">
    <input type="text" name="enter" class="enter" id="lolz" value=""/>
    <input type="button" value="click" onclick="kk();"/>
</body> 
```

用这个

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-08-04T18:08:29.917

**编辑：**

1.  将您的 javascript 移动到页面末尾，以确保在访问它们之前加载 DOM（html 元素）（javascript 结束以进行快速加载）。
2.  使用**var textInputVal = document.getElementById('textInputId').value;**
3.  对输入和元素使用描述性名称（更容易理解您自己的代码以及其他人正在查看它时）。
4.  要了解有关 getElementById 的更多信息，请参阅：[http ://www.tizag.com/javascriptT/javascript-getelementbyid.php](http://www.tizag.com/javascriptT/javascript-getelementbyid.php)
5.  使用诸如 jQuery 之类的库使使用 javascript 变得容易上百倍，要了解更多信息：http://docs.jquery.com/Tutorials: [Getting_Started_with_jQuery](http://docs.jquery.com/Tutorials:Getting_Started_with_jQuery)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-08-04T18:19:16.267

请注意这一行：

```
lol = document.getElementById('lolz').value; 
```

`<input>`在标记上的实际元素之前：

```
<input type="text" name="enter" class="enter" value="" id="lolz"/> 
```

**您的代码被逐行解析，并且`lol = ...`在浏览器知道存在带有 id 的输入之前评估该行`lolz`。因此，`document.getElementById('lolz')`将返回`null`，并且`document.getElementById('lolz').value`应该导致错误。**

将该行移到函数内，它应该可以工作。这样，该行将仅在调用该函数时运行。并`var`按照其他人的建议使用，以避免使其成为全局变量：

```
function kk(){
    var lol = document.getElementById('lolz').value;
    alert(lol);
} 
```

您还可以将脚本移动到页面末尾。将所有脚本块移动到 HTML 的末尾`<body>`是当今避免此类引用问题的标准做法。它还倾向于加快页面加载，因为加载和解析需要很长时间的脚本是在 HTML （大部分）显示之后处理的。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-04-10T04:07:59.523

> 如何在 JavaScript 中获取输入文本值

```
 var textbox;
    function onload() { 
        //Get value.
        textbox = document.getElementById('textbox');
    }

    function showMessage() { 
        //Show message in alert()
        alert("The message is: " + textbox.value);
    }
```

```
<body onload="onload();">
<div>
<input type="text" name="enter" class="enter" placeholder="Write something here!" value="It´s a wonderful day!" id="textbox"/>
<input type="button" value="Show this message!" onClick="showMessage()" />
</div>
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-08-04T18:16:06.883

由于您的大声笑现在是局部变量，因此使用 var 关键字声明任何变量的好习惯。

这可能对你有用：

```
function kk(){
  var lol = document.getElementById('lolz').value;
  alert(lol);
} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-06-05T06:51:30.267

上述所有解决方案都很有用。他们用这条线

```
lol = document.getElementById('lolz').value; 
```

函数里面`function kk()`。

我的建议是，您可以从另一个函数中调用该变量`fun_inside()`

```
function fun_inside() {    
    lol = document.getElementById('lolz').value;
}
function kk() {
    fun_inside();
    alert(lol);
} 
```

当您构建复杂的项目时，它会很有用。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2014-09-10T09:55:48.250

```
<script>
function subadd(){
subadd= parseFloat(document.forms[0][0].value) + parseFloat(document.forms[0][1].value) 
window.alert(subadd)  
}
</script>

<body>
<form>
<input type="text" >+
<input type="text" >
<input type="button" value="add" onclick="subadd()">
</form>
</body> 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2016-12-18T14:31:11.620

```
<input type="password"id="har">
<input type="submit"value="get password"onclick="har()">
<script>
    function har() {
        var txt_val;
        txt_val = document.getElementById("har").value;
        alert(txt_val);
    }
</script> 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-05-01T07:14:39.953

document.getElementById('id').value

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-09-05T17:56:53.523

这不起作用的原因是变量不会随文本框而改变。当它最初运行代码时，它会获取文本框的值，但之后不再调用它。但是，当您在函数中定义变量时，每次调用函数时变量都会更新。然后它会提醒现在等于文本框输入的变量。

# django - 通过proxy_pass的django url

> ID：11810882
> 
> 赞同：0
> 
> 时间：2012-08-04T18:07:00.660
> 
> 标签：django, url, nginx

我想在 beta 测试中向我的客户公开一个 django 应用程序。我们的 SSL 证书仅适用于[http://www.domain.com/](http://www.domain.com/)（无子域）。所以我想映射：

http://192.168.0.9:8080/ 到[http://www.domain.com/beta/](http://www.domain.com/beta/)

我已将此添加到我的 nginx.conf

```
 location /beta {
            rewrite            ^([^.]*[^/])$ $1/       permanent;
   }

   location /beta / {
            proxy_set_header        X-Url-Prefix            http://www.domain.com/beta/;
            proxy_set_header        X-Real-IP               $remote_addr;
            proxy_set_header        Host                    $host;
            proxy_pass              http:// 192.168.0.9:8080/;
   } 
```

第一页看起来不错，但所有链接都不起作用。链接由 {% url ... %} 模板标签创建。

PS：http://和IP之间的空间-> stackoverflow拒绝保存我的问题，无法访问

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T22:29:26.867

Django 需要知道它不在域的根目录中，默认情况下所有内容都与 / 相关。有多种方法可以处理此问题，但最简单的可能是将“www.domain.com/beta”添加到默认 SITE_ID 下的站点框架（您必须在 INSTALLED_APPS 中添加它）。在管理界面中公开其模型并使用正确的后缀进行设置。

查看[django 站点框架](https://docs.djangoproject.com/en/dev/ref/contrib/sites/)以将您的 URL 根添加到 FQDN。

# javascript - 是否可以在 web worker 中安全地使用 eval 来执行任意用户代码？

> ID：11810883
> 
> 赞同：6
> 
> 时间：2012-08-04T18:07:07.800
> 
> 标签：javascript, eval, web-worker

是否可以以安全的方式卸载将评估为 Web Worker 的自定义用户代码？

Web Workers 的“仅与字符串通信”功能看起来很有希望，但评估用户代码几乎总是以有趣的方式危险。

我在网上找不到太多关于它的信息。是否有一种好方法可以在客户端或通过一些服务器端清理或其他方式来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T18:12:00.770

Web 工作者无法更改 DOM，因此他们无法通过这种方式创建新元素并创建 XSS 攻击。但是，他们可以创建 XMLHttpRequest，因此他们可以访问并请求来自任何遵循同源策略的数据。

只要您清理与工人之间的消息，您就应该是安全的。只允许特定的字符串、对象或整数并阻止其他类型的消息。

此外，如果 Web Worker 仅针对每个用户而不是在用户之间分发，它们将不允许您的用户做任何他们在开发者控制台中无法做到的事情。

也可以看看：

*   MDN：[使用 Web Workers](https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-04T18:21:40.367

这取决于两个因素：

*   哪个用户创建了代码？*无论如何，每个用户都可以在自己的*浏览器中执行自定义代码，您不能阻止他们。您可以“授予”当前用户输入的代码“完全权限”。

    如果代码是由其他可能是恶意用户创建的，您需要小心。WebWorkers 可以执行 Ajax 请求，由于凭据，这可能是一个安全漏洞。并且任何无限循环和合作都不会很好。

*   您的 GUI 与 WebWorker 通信，并响应来自它的事件。WebWorkers 消息会对您的应用程序造成多少伤害？你需要限制它。

# java - JavaOS / 更快地运行 java 字节码

> ID：11810884
> 
> 赞同：2
> 
> 时间：2012-08-04T18:07:09.413
> 
> 标签：java, operating-system, boot

我想知道是否有一个操作系统可以在没有安装 Java 的情况下运行 java 字节码，比如 JavaOS（我知道有一种叫做 JavaOS 的东西，但我不认为我想要那个）。我想做的只是在我的笔记本电脑上运行一个java程序，而运行所有以linux启动的进程似乎很浪费。我在想笔记本电脑会启动它，然后立即启动 java 代码。

这样的事情存在吗？

编辑：

我正在寻找性能提升。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T18:11:33.040

您可以使用 linux 并删除所有您不想要的东西。

然而，操作系统非常擅长将不做太多的程序的影响降至最低。

# haskell - 用作应用函子 (Haskell / LYAH)

> ID：11810889
> 
> 赞同：46
> 
> 时间：2012-08-04T18:07:34.440
> 
> 标签：haskell, applicative

*Learn You a Haskell*的第 11 章介绍了以下定义：

```
instance Applicative ((->) r) where
    pure x = (\_ -> x)
    f <*> g = \x -> f x (g x) 
```

在这里，作者进行了一些不寻常的挥手（“<*> 的实例实现有点神秘，所以最好只是[在实际中展示它而不解释它]”）。我希望这里有人可以帮我弄清楚。

根据应用类定义，`(<*>) :: f (a -> b) -> f a -> f b`

在本例中，替换`((->)r)`为`f`：`r->(a->b)->(r->a)->(r->b)`

所以第一个问题是，我如何从那种类型变为`f <*> g = \x -> f x (g x)`？

但即使我认为最后一个公式是理所当然的，我也很难让它与我给 GHCi 的例子一致。例如：

```
Prelude Control.Applicative> (pure (+5)) <*> (*3) $ 4
17 
```

这个表达式反而看起来与`f <*> g = \x -> f (g x)`（注意在这个版本`x`中没有出现在`f`.

我意识到这很混乱，所以感谢您对我的包容。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-08-04T18:28:24.653

首先，记住如何`fmap`为应用程序定义：

```
fmap f x = pure f <*> x 
```

这意味着您的示例与`(fmap (+ 5) (* 3)) 4`. 函数的`fmap`函数只是组合，因此您的确切表达式与`((+ 5) . (* 3)) 4`.

现在，让我们考虑一下为什么要这样编写实例。本质上是`<*>`将函子中的函数应用于函子中的值。专门用于`(->) r`，这意味着它将函数 from 返回的函数应用于函数 from`r`的返回值`r`。返回函数的函数只是两个参数的函数。所以真正的问题是：你如何将一个有两个参数（`r`和`a`，返回`b`）的函数应用到一个函数`a`返回的值 from `r`？

首先要注意的是，您必须返回一个类型的值，`(->) r`这意味着结果也必须是来自`r`. 作为参考，这里是`<*>`函数：

```
f <*> g = \x -> f x (g x) 
```

由于我们要返回一个具有类型值的函数`r`，`x :: r`. 我们返回的函数必须有一个 type `r -> b`。我们如何获得 type 的值`b`？好吧，我们有一个函数`f :: r -> a -> b`。由于`r`将成为结果函数的参数，我们免费获得它。所以现在我们有一个函数 from `a -> b`。所以，只要我们有一些 type`a`的值，我们就可以得到一个 type 的值`b`。但是我们如何获得 type 的值`a`呢？好吧，我们还有另一个功能`g :: r -> a`。所以我们可以获取 type 的值`r`（参数`x`）并使用它来获取 type 的值`a`。

所以最终的想法很简单：我们使用参数首先`a`通过将其插入到`g`. 参数有类型`r`，`g`有类型`r -> a`，所以我们有一个`a`. 然后，我们将参数和新值都插入`f`. 我们需要两者，因为`f`有一个 type `r -> a -> b`。一旦我们同时插入 an`r`和 an `a`in，我们就有一个`b1`. 由于参数在 lambda 中，因此结果有一个 type `r -> b`，这就是我们想要的。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2015-06-14T08:16:29.497

通过您最初的问题，我认为您可能错过了一个微妙但非常关键的点。使用 LYAH 的原始示例：

```
(+) <$> (+3) <*> (*100) $ 5 
```

这与以下内容相同：

```
pure (+) <*> (+3) <*> (*100) $ 5 
```

这里的关键是`pure`before `(+)`，它具有拳击`(+)`作为 Applicative 的效果。如果您查看如何`pure`定义，您会发现要拆箱，您需要提供一个额外的参数，它可以是任何东西。申请`<*>`，`(+) <$> (+3)`我们得到

```
\x -> (pure (+)) x ((+3) x) 
```

注意`(pure (+)) x`，我们正在`x`申请`pure`拆箱`(+)`。所以我们现在有

```
\x -> (+) ((+3) x) 
```

添加`(*100)`到获取`(+) <$> (+3) <*> (*100)`并`<*>`再次应用，我们得到

```
\y -> (\x -> (+) ((+3) x)) y ((*100) y) {Since f <*> g = f x (g x)}

5  -> (\x -> (+) ((+3) x)) 5 ((*100) 5)

(\x -> (+) ((+3) x)) 5 (500)

5 -> (+) ((+3) 5) (500)

(+) 8 500

508 
```

所以总而言之，`x`after`f`不是我们二元运算符的第一个参数，它用于 UNBOX 内部的运算符`pure`。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-08-04T18:23:40.443

> “在这种情况下，`((->)r)`代替`f`：`r->(a->b)->(r->a)->(r->b)`”

为什么，这是不对的。它实际上是`(r->(a->b)) -> (r->a) -> (r->b)`，并且与 相同`(r->a->b) -> (r->a) -> r -> b`。即，我们将一个中缀和一个返回中缀'右手参数的函数映射到一个只接受中缀'LHS并返回其结果的函数。例如，

```
Prelude Control.Applicative> (:) <*> (\x -> [x]) $ 2
[2,2] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-02-27T08:31:20.983

### 如何理解`Function as Functor`和`Function as Applicative`？

首先，如何理解函数作为函子？

我们可以将函子视为一个空盒子，例如：

```
instance Functor Maybe where 
    fmap :: (a -> b) -> f a -> f b
    fmap f (Just x) = Just (f x) 
    fmap f Nothing = Nothing 
```

在那里，`Maybe`type 可以看作是一个**带有一个插槽的空框，**它采用 type 来生成具体的 type `Maybe a`。在`fmap`函数中：

*   第一个参数是一个函数，从a映射到b；
*   **第二个参数是槽填充的类型的值（具体类型），这个具体类型由类型构造函数生成，类型为*fa*（*f* is `Maybe`，所以*fa* is `Maybe a`）。**

当我们实现函数函子时，因为函子函子必须有两个参数才能构成一个类型`a -> b`，如果我们想让函数函子只有一个槽，我们应该先填一个槽，所以函数函子的类型构造函数是 ((->) r ):

```
instance Functor ((->) r) where 
    fmap f g = (\x -> f (g x)) 
```

`fmap`和 Functor 中的函数一样`Maybe`，我们应该把第二个参数*g看作是由**f* ( *f*等于)生成的一个具体类型的值`(->) r`，所以*fa*可以`(->) r a`看作是`r -> a`。最后，不难理解，函数中的gx*不能*`fmap`看成是，它只是一个函数应用，也`r -> x`可以看成是。`(r -> a) x``(x -> a)`

最后，不难理解Applicative函数中的<*>函数`(->) r` 可以实现如下：

```
<*> :: f (a -> b) -> f a -> f b
<*> :: (r -> a -> b) -> (r -> a) -> (r -> b)
<&> :: (a -> b) -> (r -> a) -> (r -> b)
f <*> g = \r -> f r (g r) 
```

因为*gr*将*r*映射到*a*，*fra*将*r, a*映射到*b*，所以整个 lambda 函数也可以看作`r -> b`, `f b`。例如：

```
((+) <*> (+3)) 5 
```

结果是 5 + (5 + 3) = 13。

### 如何理解函数作为应用程序，`(+) <$> (+3) <*> (*100) $ 5`= 508？

我们知道`(+)`有类型：`Num a, a -> a -> a`;

我们也知道`(+3)`并且`(*100)`有类型`Num r, a, r -> a`：

`(+) <$> (+3)`等于`pure (+) <*> (+3)`, 其中`:t pure (+)`等于`Num _, a, _ -> a -> a -> a`

换句话说，`pure (+)`只是简单地接受一个`_`参数并返回`+`运算符，参数`_`对最终返回值没有影响。`pure (+)`还将函数的返回值映射`(+3)`到函数。现在为

```
f <*> g = \r -> f r (g r) 
```

我们可以应用运算符并获得：

```
pure (+) <*> (+3) = 
    \r -> f r (gr) =
    \r -> + (gr) =
    \r -> + (r + 3) =
    \r x -> x + (r + 3) 
```

它有类型`r -> x -> a`。然后我们使用<*>的定义进行计算`pure (+) <*> (+3) <*> (*100)`，得到：

```
pure (+) <*> (+3) <*> (*100) = 
    \r -> f r (gr) =
    \r -> (r + 3) + (gr)
    \r -> (r + 3) + (r * 100) 
```

然后我们用参数 5 应用这个函数，我们得到：

```
(5 + 3) + (5 * 100) = 508 
```

我们可以简单地将这种应用风格视为 first 计算 after 的值`<$>`并与 operator before 相加`<$>`。在上一个例子中，这个运算符是一个二元运算符 equals `(+)`，我们可以将它替换为一个三元运算符`(\x y z -> [x,y,z])`，所以下面的等式成立：

```
(\x y z -> [x,y,z]) <$> (+3) <*> (*2) <*> (/2) $ 5 = [8.0,10.0,2.5] 
```

# mysql - 将 MySQL 查询移植到 PostgreSQL

> ID：11810898
> 
> 赞同：0
> 
> 时间：2012-08-04T18:08:13.343
> 
> 标签：mysql, sql, postgresql, null, coalesce

我正在将我的 MySQL 数据库迁移到 PostgreSQL。在将数据库连接到我的 Python 脚本时，我遇到了一些语法错误。那么您能否将此 MySQL 查询转换为 PostgreSQL：

```
select ifnull((select ifnull(run_id,0) from searchbank order by run_id desc limit 0,1),0) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T18:12:49.347

Postgres 不支持 ifnull：

```
select coalesce((select coalesce(run_id,0)
                 from searchbank
                 order by run_id desc limit 0,1),0
               ) 
```

你可能会发现这个版本稍微干净一些：

```
select coalesce(max(run_id), 0)
from searchbank 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T01:44:12.717

更简单：

```
SELECT COALESCE((SELECT max(run_id) FROM searchbank), 0); 
```

像这样的查询的唯一要点是如果**没有行**则返回`0`而不是没有行。**`searchbank`**

 **移除外部`SELECT`- 就像@Gordon 演示的那样 - 取消了这种效果并且是完全错误的。**

# git - 如何自动将 master 分支推送到 gh-pages？

> ID：11810901
> 
> 赞同：1
> 
> 时间：2012-08-04T18:08:46.810
> 
> 标签：git, github

前段时间我发现了 GitHub，我很喜欢它。它有一个很棒的用户界面，让我可以从任何地方编码，是免费的，等等等等。

然而，现在我经常使用 GitHub，我开始在移动设备（iPod Touch、Kindle Fire）上编写代码。但是，如果没有仅适用于 Kindle Fire 的繁琐下载过程，我将无法测试我正在开发的网站。

我已经看到其他方法涉及我必须在 shell 中输入内容或修改 Git 配置。虽然在桌面上很好，但这不适用于在线文件编辑 - 只需在 GitHub.com 上打开文件并按编辑并输入提交消息。

当我使用移动设备时，如何自动将 master 分支推送到 gh-pages - 没有文件系统访问权限或 shell？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T16:06:36.983

好吧，这是我找到的一个解决方案 - 它不是**自动**的，但对我来说已经足够了。

1.  在 GitHub 上找到您要编辑的文件。单击它，然后单击编辑。编辑它，添加提交摘要等。
2.  将该提交合并到主分支中。GitHub 会自动将您带到该屏幕。
3.  转到项目的主页。点击中间顶部的“拉取请求”按钮。
4.  GitHub 会告诉你“Master”已经与“Master”保持同步。在第一个框中选择 gh-pages 分支。输入您之前输入的相同提交消息和标题。
5.  单击“发送拉取请求”。GitHub 将带您进入一个屏幕，您可以通过单击屏幕左中区域的蓝色按钮来合并拉取请求（如果我没记错的话）。
6.  当您填写完所有这些表格并单击所有按钮后，GitHub 会将您的 Master 分支合并到 gh-pages 中。gh-pages 会在 0 秒到 10 分钟之间更新——对我来说通常是 45 秒左右。

我希望这行得通——它并不完美，也不是自动的，但*它只*使用 GitHub 并且不会花费很长时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T18:16:46.470

一种可能是使用 Code9 IDE（http://www.c9.io - 免费），它为您提供了一个可以访问 shell 的在线 IDE 界面，并且可以与您的 GitHub 帐户集成。他们托管您的代码，因此您可以轻松地在他们的服务器上进行测试，然后可以从控制台执行简单的 git push 以推送回您的存储库。

注意：YMMV 因为我过去在使用 Code9 时遇到过一些问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-26T21:38:31.663

使用像 Travis CI 这样的 CI 系统，这可以通过脚本自动化。

*   特拉维斯 CI：[https ://docs.travis-ci.com/user/deployment/pages/](https://docs.travis-ci.com/user/deployment/pages/)
*   CircleCI：[https ://www.andreagrandi.it/2019/02/24/how-to-deploy-static-website-github-pages-circleci/](https://www.andreagrandi.it/2019/02/24/how-to-deploy-static-website-github-pages-circleci/)
*   另一个教程：[https ://blog.seangransee.com/2018/02/auto-deploy-blog-to-github-pages-with-static-site-generator-and-ci/](https://blog.seangransee.com/2018/02/auto-deploy-blog-to-github-pages-with-static-site-generator-and-ci/)

# php - PHP cUrl ssl 超时

> ID：11810902
> 
> 赞同：3
> 
> 时间：2012-08-04T18:08:59.057
> 
> 标签：php, ssl, curl

我正在使用 cUrl 和 Php（最新的稳定 Ubuntu 版本）来获取远程 https 页面，并且 curl_exec 在超时后返回 false。显然我正在使用这些设置：

```
curl_setopt($soap_do, CURLOPT_SSL_VERIFYPEER,   0);
curl_setopt($soap_do, CURLOPT_SSL_VERIFYHOST,   0); 
```

使用wireshark，似乎服务器在“Client Hello”之后没有应答。一些奇怪的事实：

1.  用 perl 编写的相同脚本由 CLI 在同一台机器上运行
2.  运行旧机器的完全相同的代码可以正常工作

提示？有人建议重新编译 curl 和 openssl ......我可以在开发机器上做，但生产服务器有同样的问题，为了便于维护，我想只保留原始数据包......谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T20:03:10.813

解决了：

`curl_setopt($soap_do, CURLOPT_SSLVERSION, 3);`

# linux - backuppc 方法 tar 没有为共享而转储的文件

> ID：11810904
> 
> 赞同：1
> 
> 时间：2012-08-04T18:09:10.810
> 
> 标签：linux, backup, tar

1.  Ubuntu 11.10 服务器；备份PC 3.2.1
2.  运行 cgi-bin 版本
3.  作为用户 www-data 安装以避免使用用户 backuppc 的 perl 和 apache2 问题
4.  ssh 对正在备份的 LAN 上的服务器工作正常
5.  失败日志中报告了以下命令行：

    /usr/bin/ssh -q -x -n -l root 192.168.1.70 env LC_ALL=C /bin/tar -c -v -f - -C / --totals 。

日志显示：完全备份目录 / Xfer PID 现在是 26168,26167 Tar exited with error 65280 () status tarExtract: Done: 0 errors, 0 filesExist, 0 sizeExist, 0 sizeExistComp, 0 filesTotal, 0 sizeTotal 在期间出现致命错误xfer（没有为共享转储文件/）备份中止（没有为共享转储文件/）不将此保存为部分备​​份，因为它的文件比前一个少（得到 0 和 0 文件与 0）

运行 /usr/bin/ssh -q -x -n -l root 192.168.1.70 env LC_ALL=C /bin/tar -c -v -f - -C / --totals 。在服务器命令行（backuppc 的服务器）我得到一个连接并在 tty 上看到一堆 tar 输出。

错误 65280 似乎很奇怪。

日志中没有进一步的提示。

有没有专家愿意就此交换一些智慧？令人沮丧:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T18:34:27.287

您的 tar 命令将标准输出作为文件输出 (-f -) 这真的是您想要做的吗？我认为您宁愿备份到真实文件或通过管道传输命令

# mysql - 本地连接到 MySql 时出错

> ID：11810905
> 
> 赞同：0
> 
> 时间：2012-08-04T18:09:14.553
> 
> 标签：mysql, mysql-error-1130

今天当我想连接到本地 MySQL 服务器时，我从服务器收到一条错误消息：

> 不允许主机 '192.168.1.100' 连接到此 MySQL 服务器。

这是什么意思？我的机器是一台装有 OSX Lion 的 MacBook Pro。昨天一切都很好，但是今天当我想用 Eclipse 连接 mysql 时，我得到了这个错误。在 Navicat 中一切正常，我可以打开 shemas 并编写选择。

# objective-c - 如何禁用 XCode 调试器中的日期？

> ID：11810907
> 
> 赞同：0
> 
> 时间：2012-08-04T18:09:22.740
> 
> 标签：objective-c, xcode, debugging

在 Xcode 中，调试器会在每个输出行旁边列出日期。我真的想减少调试器中视觉“噪音”的数量，那么如何禁用日期显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T07:57:54.253

您可以使用`printf()`代替`NSLog()`，但它有点棘手。取自[此处](https://stackoverflow.com/questions/3487226/is-it-possible-to-nslog-without-the-time-and-date-stamps-and-the-automatic-ne)，您可以在其中找到更多信息。

# android - 设备仍然有旧的 apk

> ID：11810909
> 
> 赞同：2
> 
> 时间：2012-08-04T18:09:42.953
> 
> 标签：android, apk

我将我的应用程序 apk 安装到我的设备中，现在每当我尝试安装新的 apk 时，不知何故又安装了旧的 apk。我从存储卡中删除了apk文件并卸载了应用程序并清除了数据和缓存，但不知何故，一些旧的apk数据保存在存储卡中，我无法清除并且每次安装新apk时都会出现。因此，当我进入并删除所有旧文件并打开新文件时，它仍然提示我它将保存用户数据，这意味着它仍在存储某些内容。

我真的很困惑这个问题，请帮助我找到解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T18:13:42.543

我相信您的问题源于 Eclipse 的一些问题。转到`Project > clean`顶部栏并重试。虽然这是一个猜测，但如果不是问题，请告诉我。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-04T18:14:58.207

这可能是由于病毒。

请尝试以下选项：1）卸载应用程序 2）格式化 SD 卡 3）将手机恢复到原始设置 4）安装防病毒应用程序 5）重新启动手机

这肯定会删除该应用程序。

在您的开发机器上，删除在 .bin 目录中生成的所有 .apk 文件。在 Eclipse 中，确保您执行一个项目 -> 清理

# redmine - Redmine 500错误-内部错误查看问题/查看所有问题时发生错误

> ID：11810910
> 
> 赞同：1
> 
> 时间：2012-08-04T18:09:44.993
> 
> 标签：redmine

我最近将 redmine 0.8 升级到 1.4.4 。但是升级后当我要访问/查看问题 Redmine 500 错误 - 内部错误发生错误。这是redmine生产的日志文件-

> /usr/lib/ruby/1.8/webrick/server.rb:173:in start' /usr/lib/ruby/1.8/webrick/server.rb:162:in start' /usr/lib/ruby/1.8/webrick /server.rb:92:in start' /usr/lib/ruby/1.8/webrick/server.rb:23:in start' `start_thread'
> /usr/lib/ruby/1.8/webrick/server.rb:162:in`
> `start_thread'
> /usr/lib/ruby/1.8/webrick/server.rb:95:in`
> `each'
> /usr/lib/ruby/1.8/webrick/server.rb:92:in`
> `start'
> /usr/lib/ruby/1.8/webrick/server.rb:82:in`

渲染 /home/www/support.dokeos.com/www/public/500.html（500 内部服务器错误）

我的设置：

*   Ruby 实现和版本：1.8.7

*   导轨版本：2.3.5

*   宝石版本：1.3.7
*   操作系统：Debian 2.6.32-5-686 i686
*   使用的数据库及其版本：mysql 5.1.61
*   使用的 Ruby 感知服务器：Apache2

**更新：**

错误日志

```
/log# tail -f domain.com.error.log      
[Sun Aug 05 14:16:27 2012] [debug] proxy_util.c(1934): proxy: initialized single connection worker 1 in child 21737 for (localhost)    
[Sun Aug 05 14:16:27 2012] [debug] proxy_util.c(1803): proxy: worker proxy:forward already initialized     
[Sun Aug 05 14:16:27 2012] [debug] proxy_util.c(1818): proxy: grabbed scoreboard slot 1 in child 21736 for worker http://localhost:3000/     
[Sun Aug 05 14:16:27 2012] [debug] proxy_util.c(1837): proxy: worker http://localhost:3000/ already initialized    
[Sun Aug 05 14:16:27 2012] [debug] proxy_util.c(1934): proxy: initialized single connection worker 1 in child 21736 for (localhost)     
[Sun Aug 05 14:16:27 2012] [debug] proxy_util.c(1803): proxy: worker proxy:forward already initialized        
[Sun Aug 05 14:16:45 2012] [debug] proxy_util.c(1818): proxy: grabbed scoreboard slot 1 in child 21738 for worker http://localhost:3000/        
[Sun Aug 05 14:16:45 2012] [debug] proxy_util.c(1837): proxy: worker http://localhost:3000/ already initialized       
[Sun Aug 05 14:16:45 2012] [debug] proxy_util.c(1934): proxy: initialized single connection worker 1 in child 21738 for (localhost)       
[Sun Aug 05 14:16:45 2012] [debug] proxy_util.c(1803): proxy: worker proxy:forward already initialized 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T19:53:19.447

尝试升级 Rails 和 Ruby Gems。根据1.4.x的[Redmine 安装说明，需要 Rails 2.3.14](http://www.redmine.org/projects/redmine/wiki/RedmineInstall)

# mongodb - MongoDB - 物化视图/OLAP 样式聚合和性能

> ID：11810911
> 
> 赞同：6
> 
> 时间：2012-08-04T18:09:55.270
> 
> 标签：mongodb, nosql

我一直在阅读 MongoDB。我对聚合框架的能力特别感兴趣。我正在考虑采用每月至少包含 10+ 百万行的多个数据集，并根据这些数据创建聚合。这是时间序列数据。

例子。使用 Oracle OLAP，您可以在秒/分钟级别加载数据，并将此汇总到小时、天、周、月、季度、年等...只需定义您的维度并从那里开始。这工作得很好。

到目前为止，我已经读到 MongoDB 可以使用它的 map reduce 功能来处理上述问题。可以实现 Map reduce 功能，以便增量更新结果。这是有道理的，因为我会每周或每月加载新数据，并且我希望只需要处理正在加载的新数据。

我还读过 MongoDB 中的 map reduce 可能很慢。为了克服这个问题，我们的想法是使用廉价的商品硬件并将负载分散到多台机器上。

所以这是我的问题。

1.  就性能而言，MongoDB 处理 map 的效果如何？您真的需要很多机器才能获得可接受的性能吗？
2.  在工作流方面，map reduce 生成的增量结果是否比较容易存储和合并？
3.  聚合框架提供了多少性能改进？
4.  聚合框架是否提供了以类似于已经存在的 map/reduce 功能的方式增量存储结果的能力。

我提前感谢您的回复！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-06T04:06:50.010

> 就性能而言，MongoDB 处理 map 的效果如何？您真的需要很多机器才能获得可接受的性能吗？

MongoDB 的 Map/Reduce 实现（从 2.0.x 开始）受到其对单线程[SpiderMonkey JavaScript 引擎](https://developer.mozilla.org/en-US/docs/SpiderMonkey)的依赖的限制。已经对[v8 JavaScript 引擎](http://www.mongodb.org/display/DOCS/Building+with+V8)进行了一些实验，提高并发性和性能是总体设计目标。

新的[聚合框架](http://docs.mongodb.org/manual/applications/aggregation/)是用 C++ 编写的，具有更可扩展的实现，包括“管道”方法。每个管道当前都是单线程的，但您可以并行运行不同的管道。聚合框架目前不会取代所有可以在 Map/Reduce 中完成的作业，但确实简化了许多常见用例。

[第三种选择是通过MongoDB Hadoop Connector](http://www.mongodb.org/display/DOCS/Hadoop+Quick+Start)结合 Hadoop 使用 MongoDB 进行存储。Hadoop 目前有一个更具可扩展性的 Map/Reduce 实现，并且可以通过 Hadoop 连接器访问 MongoDB 集合以进行输入和输出。

> 在工作流方面，map reduce 生成的增量结果是否比较容易存储和合并？

Map/Reduce 有几个[输出选项](http://www.mongodb.org/display/DOCS/MapReduce#MapReduce-Outputoptions)，包括将增量输出合并到以前的输出集合或内联（在内存中）返回结果。

> 聚合框架提供了多少性能改进？

这实际上取决于您的 Map/Reduce 的复杂性。总体而言，聚合框架更快（在某些情况下，速度更快）。您最好对自己的用例进行比较。

MongoDB 2.2 尚未正式发布，但[2.2rc0 候选版本](http://www.mongodb.org/downloads)已于 7 月中旬推出。

> 聚合框架是否提供了以类似于已经存在的 map/reduce 功能的方式增量存储结果的能力。

聚合框架目前仅限于返回内联结果，因此您必须在返回结果时处理/显示结果。结果文档也被限制为 MongoDB 中的最大文档大小（当前为 16MB）。

有一个建议的`$out`管道命令 ( [SERVER-3253](https://jira.mongodb.org/browse/SERVER-3253) )，将来可能会添加它以提供更多输出选项。

一些可能感兴趣的进一步阅读：

*   MongoDC 2011 上关于[MongoDB 中时间序列数据存储的演讲](http://www.10gen.com/presentations/mongodc-2011/time-series-data-storage-mongodb)
*   在 MongoSF 2012 上关于[MongoDB 的新聚合框架的演示文稿](http://www.10gen.com/presentations/mongosf-2012/mongodb-new-aggregation-framework)
*   [capped collections](http://www.mongodb.org/display/DOCS/Capped+Collections) , 可以像 RRD 一样使用

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T21:23:56.757

Couchbase map reduce 旨在构建增量索引，然后可以动态查询您正在寻找的汇总级别（很像您在问题中给出的 Oracle 示例）。

以下是如何使用 Couchbase 完成此操作的文章：http: [//www.couchbase.com/docs/couchbase-manual-2.0/couchbase-views-sample-patterns-timestamp.html](http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-views-sample-patterns-timestamp.html)

# android - 单击按钮时转到 DetailView

> ID：11810917
> 
> 赞同：-1
> 
> 时间：2012-08-04T18:10:30.457
> 
> 标签：android, button, detailsview, detailview

有人可以帮我吗？：我有两个不同的按钮，当我按下按钮 1 时，我想用 Information1 打开 DetailView。当我按下按钮 2 时，我想用 Information2 打开 DetailView 这是我为 ListView 和 DetailView 选择的教程： [http ://www.raywenderlich.com/5527/getting-started-with-android-development](http://www.raywenderlich.com/5527/getting-started-with-android-development)

使用 ListView 它可以完美运行，但是如何使用两个按钮来做到这一点？

感谢帮助 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T18:40:10.727

好的，在这种情况下这样做：

```
Button1.setOnClickListener(new OnClickListener() {

    public void onClick(View v) {

    Intent i = new Intent(YourActivity.this,DetailActivity.class);
    i.putExtra("text","Some String for this one");

    startActivity(i);  

    }
});

Button2.setOnClickListener(new OnClickListener() {

    public void onClick(View v) {

    Intent i = new Intent(YourActivity.this,DetailActivity.class);
    i.putExtra("text","Some other String for this one");
    startActivity(i);  

    }
}); 
```

如您所见，方法`putStringExtra()`表单`Intent`允许您发送一些信息。所以在你的`DetailActivity`课堂上你可以像这样得到它：

```
Intent intent = getIntent();
String text = intent.getStringExtra("text");
//and now you have the text you sent in when you created the Activity 
```

因此，您可以使您`DetailActivity`的内容显示与意图的附加内容一起发送的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T18:20:36.833

只需单击按钮即可进行该活动

```
Button1.setOnClickListener(new OnClickListener() {

public void onClick(View v) {

 Intent i = new Intent(MainActivity.this,DetailActivity.class);
 i.putExtra("Detail1","Detail 1");
 startActivity(i);  

   }
});

   Button2.setOnClickListener(new OnClickListener() {

    public void onClick(View v) {

     Intent i = new Intent(MainActivity.this,DetailActivity.class);
     i.putExtra("Detail2","Detail 2");
     startActivity(i);  

       }
    }); 
```

# c# - C# - 使用 Internet 上的大量图像填充 ImageList

> ID：11810919
> 
> 赞同：3
> 
> 时间：2012-08-04T18:10:40.003
> 
> 标签：c#, image, foreach, imagelist

背景：我正在构建一个使用 Facebook API 的 C# Forms 应用程序。我的程序已经可以成功验证并检索朋友 ID 和姓名的完整列表。我了解如何将这些添加到 ListView 控件中，这部分是成功的。当我的程序请求并接收一个小的 JSON 文件时，这个过程需要几秒钟。

通过一组朋友 ID，我可以从[https://graph.facebook.com/USER_ID/picture](https://graph.facebook.com/USER_ID/picture)获取每个朋友的个人资料图片。

有没有人知道如何在添加图像键的同时将这些来自互联网的图像添加到我的 ImageList 中，以便我可以将它们链接到具有用户 ID 的 ListViewItem ？

```
private void populate_Click(object sender, EventArgs e)
{
    var fb = new FacebookClient(_aT);
    dynamic friends = fb.Get("/me/friends");

    // Populate the ImageList
    ImageList avatars = new ImageList();

    foreach (dynamic item in friends.data)
    {
        var src = "https://graph.facebook.com/" + item.id + "/picture";

        // Add Image from src to avatars ImageList

    }

} 
```

请记住，我有一组非常大的图像要处理。每张图片应为 50 x 50 的 JPG，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T18:30:41.580

```
// Download the bitmap data using an instance of WebClient class.
using (WebClient webClient = new WebClient())
{
    foreach (var url in urls)
    {
        byte[] bitmapData;
        bitmapData = webClient.DownloadData(url);

        // Bitmap data => bitmap => resized bitmap.            
        using (MemoryStream memoryStream = new MemoryStream(bitmapData))
        using (Bitmap bitmap = new Bitmap(memoryStream))
        using (Bitmap resizedBitmap = new Bitmap(bitmap, 50, 50))
        {
            // NOTE:
            // Resized bitmap must be disposed because the imageList.Images.Add() method
            // makes a copy (!) of the source bitmap!
            // For details, see https://stackoverflow.com/questions/9515759/                
            imageList.Images.Add(resizedBitmap);
        }
    }
} 
```

要增加`WebClient`类实例的超时时间，请查看[此答案](https://stackoverflow.com/a/6994391/490018)。

# javascript - 在 $.load(content) 之后元素在 jQuery 中不可访问

> ID：11810920
> 
> 赞同：0
> 
> 时间：2012-08-04T18:10:43.093
> 
> 标签：javascript, jquery, html

我使用带有`$.load()`功能的 jQuery 在我的主 html 文件中包含标记（来自单独的文件），`index.html`

例如，我加载`contact.html`：

```
<div id="bloc_load"></div> in 'index.html' 
```

这工作正常。

问题是，在`contact.html`我有：

```
<input type="button" id="button_of_contact"> 
```

此元素已加载，`index.html`但我无法通过以下方式访问它：

```
$('#button_of_contact').click(function(){
    alert('Click');
}); 
```

`index.html`如果我在加载后查看源代码`contact.html`，我会看到：

```
<div id="bloc_load"></div> 
```

是空的`div`，所以我认为 jQuery 无法访问。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T18:12:32.047

### 描述

您需要 jQuery`.live()`或`.on()`方法将事件绑定到动态创建的 html。

选择`.live()`或`.on()`取决于您使用的 jQuery 版本。

> **.live()**从 jQuery 1.3 开始可用。为现在和将来匹配当前选择器的所有元素附加一个事件处理程序。
> 
> **.on()**从 jQuery 1.7 开始可用。将一个或多个事件的事件处理函数附加到选定元素。

查看我的示例和这个[jsFiddle 演示](http://jsfiddle.net/3MR43/5/)

### 样本

**... 对于 jQuery.live()**

```
$('#button_of_contact').live("click", function(e) {   
    e.preventDefault();  
    // do something;        
}); 
```

**... 对于 jQuery.on()**

```
$('#button_of_contact').on("click", function(e) {   
    e.preventDefault();  
    // do something;       
}); 
```

### 更多信息

*   [jsFiddle 演示](http://jsfiddle.net/3MR43/5/)
*   [jQuery.live()](http://api.jquery.com/live/)
*   [jQuery.on()](http://api.jquery.com/on/)

## 更新

> **jQuery Docs - 从 jQuery 1.7 开始，.delegate() 已被 .on() 方法取代。然而，对于早期版本，它仍然是使用事件委托的最有效方法。有关事件绑定和委托的更多信息在 .on() 方法中。**

### 样本

```
$("#button_of_contact").delegate("input", "click", function() {
    e.preventDefault();  
    // do something; 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T18:26:49.300

假设内容已加载：

```
$("#bloc_load").on('click', '#button_of_contact', function() {
    console.log('click');
}); 
```

您必须检查控制台以查看已加载内容的更改代码，只需右键单击并查看源代码将不会显示添加的内容。

# java - 有没有办法找到给定的进程是空闲的？

> ID：11810922
> 
> 赞同：1
> 
> 时间：2012-08-04T18:10:49.567
> 
> 标签：java

我正在一个 java 应用程序中工作，我想确保计算机中的给定进程处于空闲状态，例如：- 如果我们在计算机中启动下载进程，我的应用程序应该能够监视它（进程）并告诉它何时是超过，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T18:12:41.900

如果您从另一个进程启动该进程，您可以使用 Process.waitFor() 检测它何时完成，您甚至可以使用它的退出代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T18:14:55.757

大多数操作系统都提供用户命令来监视进程的活动，例如 CPU 或 I/O。或者，在更高级别上，您可以通过进程标识符获取进程的状态（运行与否）。您可以`exec`从 Java 中获得这些工具，但核心 Java 中没有任何东西可以做到这一点，我也不知道有任何用于此目的的库。

但是，如果您正在考虑杀死一个进程，因为它是“空闲的”，那通常是不安全的。您必须对所讨论的进程有足够的了解，以确保可以杀死它，如果您对它了解得这么多，您可能会发现有一种方法可以让它自己干净地关闭。

# android - InApp 计费：来电者 uid 不同

> ID：11810926
> 
> 赞同：0
> 
> 时间：2012-08-04T18:11:25.463
> 
> 标签：android, in-app-purchase

我正在尝试实施 InApp 计费。当我在运行（自定义 rom，root）GB 的 HTC Desire 上打开 Play 商店时，我收到一条消息“发生错误，请重试”。在 logcat 中，它说：

```
08-04 19:58:59.920: I/ActivityManager(178): Starting: Intent { act=android.intent.action.VIEW cmp=com.android.vending/com.google.android.finsky.activities.IabActivity (has extras) } from pid -1
08-04 19:58:59.940: I/dalvikvm(1274): Could not find method android.accounts.AccountManager.newChooseAccountIntent, referenced from method com.google.android.finsky.activities.AuthenticatedActivity.chooseAccount
08-04 19:58:59.940: W/dalvikvm(1274): VFY: unable to resolve static method 7: Landroid/accounts/AccountManager;.newChooseAccountIntent (Landroid/accounts/Account;Ljava/util/ArrayList;[Ljava/lang/String;ZLjava/lang/String;Ljava/lang/String;[Ljava/lang/String;Landroid/os/Bundle;)Landroid/content/Intent;
08-04 19:58:59.940: D/dalvikvm(1274): VFY: replacing opcode 0x77 at 0x0021
08-04 19:58:59.940: D/dalvikvm(1274): VFY: dead code 0x0024-0029 in Lcom/google/android/finsky/activities/AuthenticatedActivity;.chooseAccount (Z)V
08-04 19:58:59.950: I/dalvikvm(1274): Could not find method com.google.android.finsky.activities.AuthenticatedActivity.recreate, referenced from method com.google.android.finsky.activities.AuthenticatedActivity.restart
08-04 19:58:59.950: W/dalvikvm(1274): VFY: unable to resolve virtual method 2843: Lcom/google/android/finsky/activities/AuthenticatedActivity;.recreate ()V
08-04 19:58:59.950: D/dalvikvm(1274): VFY: replacing opcode 0x6e at 0x0009
08-04 19:59:00.090: D/ResourceType(1274): calling getConfigurations
08-04 19:59:00.090: D/ResourceType(1274): called getConfigurations size=321
08-04 19:59:00.251: I/ActivityManager(178): Displayed com.android.vending/com.google.android.finsky.activities.IabActivity: +318ms
08-04 19:59:00.271: D/Finsky(1274): [1] DownloadImpl.setState: self-update-download from null to UNQUEUED.
08-04 19:59:00.271: D/Finsky(1274): [1] DownloadQueueImpl.add: Download self-update-download added to DownloadQueue
08-04 19:59:00.281: D/Finsky(1274): [1] DownloadImpl.setState: self-update-download from UNQUEUED to QUEUED.
08-04 19:59:00.341: I/installd(136): free_cache(0) avail 249487360
08-04 19:59:00.421: D/dalvikvm(1274): GC_CONCURRENT freed 909K, 50% free 3393K/6727K, external 2025K/2118K, paused 4ms+3ms
08-04 19:59:00.531: D/Finsky(1274): [1] DownloadQueueImpl.startDownload: Download self-update-download starting
08-04 19:59:00.651: D/Finsky(1274): [1] GetBillingCountriesAction.run: Skip getting fresh list of billing countries.
08-04 19:59:00.651: D/Finsky(1274): [1] DownloadImpl.setState: self-update-download from QUEUED to DOWNLOADING.
08-04 19:59:00.651: D/Finsky(1274): [1] DownloadQueueImpl.notifyProgress: self-update-download: onProgress 0/-1 Status: 190.
08-04 19:59:00.681: D/Finsky(1274): [1] DownloadQueueImpl.onStart: self-update-download: onStart
08-04 19:59:00.691: W/Finsky(1274): [1] CarrierParamsAction.run: Saving carrier billing params failed.
08-04 19:59:00.701: D/Finsky(1274): [1] CarrierProvisioningAction.shouldFetchProvisioning: Required CarrierBillingParams missing. Shouldn't fetch provisioning.
08-04 19:59:00.711: D/Finsky(1274): [1] CarrierProvisioningAction.run: No need to fetch provisioning from carrier.
08-04 19:59:00.721: W/AccountManagerService(178): caller uid 10005 is different than the authenticator's uid
08-04 19:59:00.721: E/Volley(1274): [32] 1.run: Caught SecurityException: caller uid 10005 is different than the authenticator's uid
08-04 19:59:00.771: D/Finsky(1274): [1] CheckoutPurchase.onErrorReceived: Could not retrieve Checkout auth token: caller uid 10005 is different than the authenticator's uid
08-04 19:59:00.771: E/Finsky(1274): [1] CheckoutPurchase.setError: type=UNKNOWN, code=-1, message=An error occurred. Please try again.
08-04 19:59:00.861: D/Finsky(1274): [1] MarketBillingService.sendResponseCode: Sending response RESULT_DEVELOPER_ERROR for request 8575012147884887212 to com.haarman.inapptest.
08-04 19:59:00.901: D/Finsky(1274): [1] DownloadQueueImpl.notifyProgress: self-update-download: onProgress 0/-1 Status: 192. 
```

在我运行（自定义 rom，root）ICS 的华硕 TF101 上，它**确实**有效。
在 HTC One V 运行库存 ICS 上，它**确实**有效。
在运行（自定义 rom，root）GB 的 HTC Legend 上，它**确实**有效。

所以只有在我的 HTC Desire 上它不起作用，坦率地说，它是我的主要设备。我尝试将设备重置为出厂默认设置，但这没有帮助。

这里发生了什么事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T10:38:47.473

显然，我的 Desire 上的 Play 商店没有自动更新。它运行的是 3.5.x，我必须手动推送 3.5.17 才能让它工作。

# java - Java 安装错误：INSTALL_FAILED_MISSING_SHARED_LIBRARY 映射

> ID：11810939
> 
> 赞同：0
> 
> 时间：2012-08-04T18:12:35.990
> 
> 标签：java, android, google-maps

我下载了一个安卓地图应用程序并试图成功运行该应用程序。但是，当我构建并运行时，我在这里遇到了错误。

```
--my manifest file
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.shawnbe.mallfinder"
    android:versionCode="1"
    android:versionName="1.0" >
    <uses-sdk android:minSdkVersion="7" />
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" 
        android:theme="@android:style/Theme.NoTitleBar">
        <activity
            android:label="@string/app_name"
            android:name=".MallFinderActivity" >
            <intent-filter >
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <uses-library android:required="true" android:name="com.google.android.maps" />
    </application>
    <uses-feature android:name="android.hardware.location.gps"/>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
    <uses-permission android:name="android.permission.INTERNET"/>
</manifest>

//logcat error
08-04 16:55:34.492: E/PackageManager(59): Package com.shawnbe.mallfinder requires unavailable shared library com.google.android.maps; failing!
08-04 16:55:34.492: W/PackageManager(59): Package couldn't be installed in /data/app/com.shawnbe.mallfinder.apk

[2012-08-04 12:00:34 - com.shawnbe.mallfinder.MallFinderActivity] ------------------------------
[2012-08-04 12:00:34 - com.shawnbe.mallfinder.MallFinderActivity] Android Launch!
[2012-08-04 12:00:34 - com.shawnbe.mallfinder.MallFinderActivity] adb is running normally.
[2012-08-04 12:00:34 - com.shawnbe.mallfinder.MallFinderActivity] Performing com.shawnbe.mallfinder.MallFinderActivity activity launch
[2012-08-04 12:00:34 - com.shawnbe.mallfinder.MallFinderActivity] Automatic Target Mode: using existing emulator 'emulator-5554' running compatible AVD 'MAPAPP1'
[2012-08-04 12:00:34 - com.shawnbe.mallfinder.MallFinderActivity] Uploading com.shawnbe.mallfinder.MallFinderActivity.apk onto device 'emulator-5554'
[2012-08-04 12:00:35 - com.shawnbe.mallfinder.MallFinderActivity] Installing com.shawnbe.mallfinder.MallFinderActivity.apk...
[2012-08-04 12:00:37 - com.shawnbe.mallfinder.MallFinderActivity] Installation error: INSTALL_FAILED_MISSING_SHARED_LIBRARY
[2012-08-04 12:00:37 - com.shawnbe.mallfinder.MallFinderActivity] Please check logcat output for more details.
[2012-08-04 12:00:37 - com.shawnbe.mallfinder.MallFinderActivity] Launch canceled! 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T19:46:54.180

您的模拟器 AVD 没有 Google 地图。使用名称中包含“Google APIs (Google Inc.)”的“目标”创建一个模拟器 AVD。

# java - 如何在java中将阿拉伯字符转换为十六进制字符串

> ID：11810942
> 
> 赞同：1
> 
> 时间：2012-08-04T18:12:45.180
> 
> 标签：java, string, character-encoding, char, arabic

以下代码`??????`作为输出返回，当`str`有阿拉伯字符串时：

```
String str="مرحبا",str2="";
for (int i = 0; i < str.length(); ++i) {
                str2 += displayChar(str.charAt(reorder[i]));
                System.out.print(reorder[i]);
            }
   System.out.println(str2); // output is : ????? 
```

和 ：

```
String displayChar(char c) {
        if (c < '\u0010') {
            return "0x0" + Integer.toHexString(c);
        } else if (c < '\u0020' || c >= '\u007f') {
            return "0x" + Integer.toHexString(c);
        } else {
            return c+"";
        }
    } 
```

For `reorder`is`integer`数组只携带给定字符的新索引（顺序）`str`

```
Here is the complete code, .. hope it will help you to understand the problem :
/*
 * (C) Copyright IBM Corp. 1999, All Rights Reserved
 *
 * version 1.0
 */

import java.io.*;

/**
 * A simple command-line interface to the BidiReference class.
 * <p>
 * This prompts the user for an ASCII string, runs the reference
 * algorithm on the string, and displays the results to the terminal.
 * An empty return to the prompt exits the program.
 * <p>
 * ASCII characters are preassigned various bidi direction types. 
 * These types can be displayed by the user for reference by
 * typing <code>-display</code> at the prompt.  More help can be
 * obtained by typing <code>-help</code> at the prompt.
 */
public class BidiReferenceTest {
    BufferedReader reader = new BufferedReader(new InputStreamReader(System.in));
    PrintWriter writer = new PrintWriter(new BufferedOutputStream(System.out));
    BidiReferenceTestCharmap charmap = BidiReferenceTestCharmap.TEST_ARABIC;
    byte baseDirection = -1;

    /**
     * Run the interactive test.
     */
    public static void main(String args[]) {
        new BidiReferenceTest().run();
    }

    void run() {
        //printHelp();

        while (true) {
            writer.print("> ");
            writer.flush();
            String input;
            try {
                input = reader.readLine();
            }
            catch (Exception e) {
                writer.println(e);
                continue;
            }

            if (input.length() == 0) {
                writer.println("Bye!");
                writer.flush();
                return;
            }

            if (input.charAt(0) == '-') { // command
                int limit = input.indexOf(' ');
                if (limit == -1) {
                    limit = input.length();
                }
                String cmd = input.substring(0, limit);
                if (cmd.equals("-display")) {
                    charmap.dumpInfo(writer);
                } else if (cmd.equals("-english")) {
                    charmap = BidiReferenceTestCharmap.TEST_ENGLISH;
                    charmap.dumpInfo(writer);
                } else if (cmd.equals("-hebrew")) {
                    charmap = BidiReferenceTestCharmap.TEST_HEBREW;
                    charmap.dumpInfo(writer);
                } else if (cmd.equals("-arabic")) {
                    charmap = BidiReferenceTestCharmap.TEST_ARABIC;
                    charmap.dumpInfo(writer);
                } else if (cmd.equals("-mixed")) {
                    charmap = BidiReferenceTestCharmap.TEST_MIXED;
                    charmap.dumpInfo(writer);
                } else if (cmd.equals("-baseLTR")) {
                    baseDirection = 0;
                } else if (cmd.equals("-baseRTL")) {
                    baseDirection = 1;
                } else if (cmd.equals("-baseDefault")) {
                    baseDirection = -1;
                } else {
                }
            } else {

                String ss= runSample(input);
                System.out.println(ss);
                Character.UnicodeBlock block =  Character.UnicodeBlock.of(Character.codePointAt(ss, 0));

            }
        }
    }

    String runSample(String str) {
        String str2 = "";
        try {
            charmap = BidiReferenceTestCharmap.TEST_ARABIC;

            byte[] codes = charmap.getCodes(str);
            baseDirection = 1;
            BidiReference bidi = new BidiReference(codes, baseDirection); // baseDirection = 1
            int[] reorder = bidi.getReordering(new int[] { codes.length });
            /*
            writer.println("base level: " + bidi.getBaseLevel() + (baseDirection != -1 ? " (forced)" : ""));

            // output original text
            for (int i = 0; i < str.length(); ++i) {
                displayChar(str.charAt(i));
            }
            writer.println();
             */
            // output visually ordered text
            for (int i = 0; i < str.length(); ++i) {
                str2 += displayChar(str.charAt(reorder[i]));
                System.out.print(reorder[i]);
            }
            return str2;
        }
        catch (Exception e) {
            return "";
        }
    }

    String displayChar(char c) {
        if (c < '\u0010') {
            return "0x0" + Integer.toHexString(c);
        } else if (c < '\u0020' || c >= '\u007f') {
            return "0x" + Integer.toHexString(c);
        } else {
            return c+"";
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T18:32:16.277

一个问题是您的终端可能不正确支持 Unicode 字符（这可能不是*唯一*的问题）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T18:34:27.480

如果我猜的话，我会说您在 Windows 下使用默认控制台设置（即光栅字体）运行，并且您从控制台而不是在 Eclipse 中运行 Java 程序。

如果是这种情况，那么只需将控制台设置更改为使用 TrueType 字体（Lucida Console 或 Consolas），您应该会看到方框而不是问号。这些看起来也不对，但至少它是实际文本而不是问号。

旁注：如果某些东西*确实*支持 Unicode，但在某处将其转换为另一种编码，例如拉丁语 1，问号是很常见的。

# objective-c - 使用 CocoaAsyncSocket 通过 UDP 将数据包发送到 Objective-C 中的 torrent 跟踪器

> ID：11810946
> 
> 赞同：0
> 
> 时间：2012-08-04T18:13:11.920
> 
> 标签：objective-c, sockets, udp, bittorrent

我正在尝试在objective-c中创建一个torrent scraper，我正在使用[CocoaAsyncSocket](https://github.com/robbiehanson/CocoaAsyncSocket/)通过UDP发送数据包。遵循[BitTorrent UDP 跟踪器协议](http://www.bittorrent.org/beps/bep_0015.html)。我已经使用 Wireshark 验证了数据包已经发送，但是跟踪器没有发回任何东西。我假设我在将发送的数据放在一起时做错了，因为我对数据操作的经验很少。现在我只是想成功完成[协议](http://www.bittorrent.org/beps/bep_0015.html)的连接请求。这是代码

```
-(void)connect {

     NSString *host = @"tracker.publicbt.com";
     GCDAsyncUdpSocket *socket = [[GCDAsyncUdpSocket alloc]initWithDelegate:self delegateQueue:dispatch_get_main_queue()];
     [socket connectToHost:host onPort:80 error:nil];

}

-(void)udpSocket:(GCDAsyncUdpSocket *)sock didConnectToAddress:(NSData *)address {
    uint64_t connection_id = htonl(0x41727101980);
    uint32_t action = htonl(0);
    uint32_t transaction_id = htonl(122);
    NSMutableData *data = [NSMutableData data];
    [data appendBytes:&connection_id length:sizeof(connection_id)];
    [data appendBytes:&action length:sizeof(action)];
    [data appendBytes:&transaction_id length:sizeof(transaction_id)];
    [sock sendData:data toAddress:address withTimeout:-1 tag:1];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T21:36:46.967

我认为您需要调用一个方法才能真正让套接字开始接收：

```
- (BOOL)beginReceiving:(NSError **)errPtr; 
```

这将确保每次数据包进来时都会调用委托方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T22:32:43.787

现在我想我知道问题所在了。

由于必须将连接 ID 初始化为该确切值，因此您需要确保它是完整的。你犯了一个错误，因为 htonl() 返回一个 uint32_t，这不是你想要的。您需要将连接 ID 分成两部分，并独立地将它们转换为网络字节顺序。

```
uint64_t wholeConnectionID = 0x41727101980LLU;

uint32_t connectionID[2];
connectionID[0] = htonl(wholeConnectionID >> 32);
connectionID[1] = htonl(wholeConnectionID & 0xffffffff);

// ...

[data appendBytes:connectionID length:sizeof(connectionID)]; 
```

如果这不能解决您的问题，那么无论如何它至少是达到这一点的必要步骤。

# string - 在 Go 中将 bigint 转换为字符串

> ID：11810948
> 
> 赞同：14
> 
> 时间：2012-08-04T18:13:16.620
> 
> 标签：string, int, go, bigint

如何在 Golang 中将大整数转换为字符串（或整数）？

```
bigint := big.NewInt(123) //This is what I have
bigstr = "123" //This is what I want 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-04T18:19:26.410

只需使用`String`方法： http: [//golang.org/pkg/math/big/#Int.String](http://golang.org/pkg/math/big/#Int.String)

```
bigint := big.NewInt(123)
bigstr := bigint.String() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-20T03:05:12.887

我使用了以下内容：

```
bigint := big.NewInt(1231231231231)
bigstr := fmt.Sprint(bigint) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-25T06:09:23.040

您询问如何将 bigInt 转换为字符串或 int，接受的答案仅说明如何转换为字符串。

所以你有你的`bigint := big.NewInt(123)`

* * *

您可以通过两种可能的方式将 bigInt 转换为整数：

*   使用[.Int64()](http://golang.org/pkg/math/big/#Int.Int64)。和`yourInt := bigint.Int64()`
*   使用[.Uint64()](http://golang.org/pkg/math/big/#Int.Uint64)。和`yourUint := bigint.Uint64()`

使用两种方法的原因是 uint 拥有 2 倍大的数字，有时您知道答案是肯定的。请注意，如果数字大于 int64/uint64 可能的最大值：

> 如果 x 不能用 int64 表示，则结果未定义。

* * *

为了完整起见，要转换为字符串，只需使用[.String()](http://golang.org/pkg/math/big/#Int.String) `bigstr := bigint.String()`

# machine-learning - 回归树和模型树的区别

> ID：11810949
> 
> 赞同：5
> 
> 时间：2012-08-04T18:13:22.860
> 
> 标签：machine-learning, statistics

我需要一些帮助来理解回归树和线性模型树之间的区别。

问候

沙赫扎德

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-04T21:12:31.633

线性模型树是在每个叶中具有线性函数模型的决策树，而在经典回归树（例如，CART）中，它是每个叶中统计单元的响应变量的样本平均值（因此是常数），即正在考虑。线性模型树可以看作是局部加权回归的一种形式，而回归树是分段常数回归。

有关线性模型树的更多信息，您可以咨询

> Torgo, L.[回归树叶的功能模型](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.54.1587)。在*第 14 届机器学习国际会议论文集上*，第 385-393 页。摩根考夫曼，1997 年。

# javascript - LinkedIn Javascript API：将 id 多个 ID 传递给 IN.API.Profile 时遇到问题

> ID：11810952
> 
> 赞同：0
> 
> 时间：2012-08-04T18:13:29.660
> 
> 标签：javascript, api, linkedin

以下工作完美：

```
IN.API.Profile("me", "ID1", "ID2")
.fields(["id", "firstName", "lastName", "interests"])
.result(function(result) {

  //Do something

}); 
```

但如果我用文本变量替换 ID，我将一无所获：

```
var textVar = ("me", "ID1", "ID2");

 IN.API.Profile(textVar)
   .fields(["id", "firstName", "lastName", "interests"])
   .result(function(result) {

     //Do something

  }); 
```

建议赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T18:22:15.940

终于意识到“var testText”需要是一个数组，而不是文本。

感谢大家。

# zend-framework - Zend 中有一个默认控制器

> ID：11810959
> 
> 赞同：1
> 
> 时间：2012-08-04T18:13:53.920
> 
> 标签：zend-framework, module, routing

我在 Zend Framework 1.11 (site.com/module/controller/action) 中有一个基于模块的架构。

我已将我的站点设置为具有默认模块，因此，如果我将`site`模块设置为默认模块，并且您转到`site.com/something1/something2`，它实际上会带您到`site.com/site/something1/something2`.

我想进一步实现同样的事情 1 级：说如果你去`site.com/something`，它应该带你去`site.com/site/index/something`。我不是在谈论重定向，只是重新路由。

这样的事情可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T19:13:55.877

如果我理解正确，这是可能的，这是您可以放入 Bootstrap 的示例：

```
protected function _initControllerDefaults()
{
    $this->bootstrap('frontcontroller');
    $front = Zend_Controller_Front::getInstance();

    // set default action in controllers to "something" instead of index
    $front->setDefaultAction('something');

    // You can also override the default controller from "index" to something else
    $front->setDefaultControllerName('default');
} 
```

如果您需要基于访问的 URL 动态默认操作名称，那么我认为您正在寻找自定义路由。在这种情况下尝试：

```
protected function _initRoutes()
{
    $router = Zend_Controller_Front::getInstance()->getRouter();

    // Custom route:
    // - Matches  : site.com/foo or site.com/foo/
    // - Routes to: site.com/site/index/foo

    $route = new Zend_Controller_Router_Route_Regex(
            '^(\w+)\/?$',
            array(
                'module'     => 'site',
                'controller' => 'index',
            ),
            array(1 => 'action')
    );
    $router->addRoute('actions', $route);
} 
```

# javascript - 适配混淆的javascript（定位漂亮的画布动画）

> ID：11810964
> 
> 赞同：0
> 
> 时间：2012-08-04T18:14:33.843
> 
> 标签：javascript, jquery, canvas, positioning

在 Codepen 上，我发现了一个使用 Javascript、jQuery 和 canvas 元素的简洁的交互式图形使用。

[http://codepen.io/altescape/pen/tbdao](http://codepen.io/altescape/pen/tbdao)

> 注意：阅读下面的评论后，我删除了我上传的演示，甚至钢笔的作者也承认他“只是想玩”它并没有创建它。因此，我链接到它只是因为它很整洁，但未经许可使用它是一个禁忌。感谢您引起我的注意。

我想要的是把它插入到那个（我的）网站的主页上，代替前面和中心的“建设中的消息”。我对 JS 很陌生，但我对 HTML 和 CSS 很熟悉，并且了解 DOM 的基础知识......当我插入代码时，我想我能够弄清楚如何适当地调整它，但没有运气就好像它是一个 div 中的 HTML，它就像现在一样漂浮在屏幕中间。

大约90%到[JS文件](http://adaminfinitum.com/js/dazzlecms_1.js)的底部有几行代码：

```
$(function () {
function n(d) {
    var b = "";
    for (jj = 0; jj < d.length; jj++) b += d.charCodeAt(jj).toString(16);
    return b
}
function p() {
    j.attr({
        height: $(window).height(),
        width: $(window).width()
    });
    k = j.width();
    l = j.height();
    q()
} 
```

整个高度和宽度看起来很有希望，但制作和调整完全打破了它。任何人都可以向我解释如何理解或成功操作此代码，以便我可以定位它......甚至可能以允许它在不同大小的浏览器窗口中适当显示的方式（我正在使用 CSS 媒体查询）？

我在这里阅读了似乎相关的每一篇文章，但老实说，我什至可能没有使用相关的查询短语，因为我不确定我是否使用了正确的术语。我完全迷失了这个，有点不合群，谢谢你的耐心。

# playframework - 在java的play2.0框架中访问选中的复选框值

> ID：11810967
> 
> 赞同：1
> 
> 时间：2012-08-04T18:14:56.520
> 
> 标签：playframework, playframework-2.0, checkbox

我正在使用以下代码生成多个复选框：

```
@if(ctagList.isEmpty()){
<b>no tags</b>
} else {
@repeat(inputForm("ctags"), min=1 ){ctags =>
@for(getIn <- ctagList) {
@checkbox(ctags, '_label-> getIn.get(0))
} } } 
```

访问检查值`List<String>`如下：

```
getCheckedCTags checkedCTags=filledCtagsForm.get();
List<String> iHaveTags=getCheckedCTags.getMeCTagsList(checkedCTags); 
```

并将其渲染为：`return ok(index.render(iHaveTags));`在渲染页面上，我有代码喜欢`@create.get(0)`查看选中的复选框值。运行代码并选择复选框选项后，我只能看到**True**而不是获取所有选中复选框值的列表。

我一直在指[http://www.playframework.org/documentation/2.0/JavaFormHelpers](http://www.playframework.org/documentation/2.0/JavaFormHelpers)和[https://groups.google.com/forum/?fromgroups#!topic/play-framework/6mdGjuaYGaI](https://groups.google.com/forum/?fromgroups#!topic/play-framework/6mdGjuaYGaI)

伙计们，你能告诉我我做错了什么吗？谢谢

# multithreading - Common Lisp 中的 Actor 模型是否有任何好的资源，以及关于 Actor 模型的一般文档？

> ID：11810970
> 
> 赞同：7
> 
> 时间：2012-08-04T18:15:25.477
> 
> 标签：multithreading, concurrency, lisp, common-lisp, actor

Common Lisp 中的 Actor 式并发库有什么好的实现、文档等吗？CLiki 在这个问题上相当模糊。

不，我没有使用 Clojure，也不会为此使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T02:44:04.273

zeromq (www.zeromq.org) 有 Common Lisp 的绑定。它不太支持演员模型（命名管道而不是命名演员），但它可能是您正在寻找的。

Cliki 建议使用 cl-actors (http://www.cliki.net/cl-actors)，但我没有这方面的经验。

# facebook - 总是得到“验证验证码错误”。请求 access_token 时

> ID：11810972
> 
> 赞同：0
> 
> 时间：2012-08-04T18:15:40.370
> 
> 标签：facebook, oauth, facebook-oauth

好吧，我已经尽我所能来尝试解决这个问题，但是，它仍然太烦人了。

我决定将 OAuth 与服务器端身份验证一起使用。因此，我遵循了 Facebook 文档，并完成了以下步骤。

1.  创建一个链接，将人们重定向到通过以下方式登录 Facebook`https://www.facebook.com/dialog/oauth?client_id={APP_ID}&redirect_uri=http://abc.com/nextStep.php`
2.  在 nextStep.php 中，将人们重定向到`https://graph.facebook.com/oauth/access_token?code={CODE GENERATED BY FACEBOOK}&client_id={APP_ID}&redirect_uri=http://abc.com/thirdStep.php&client_secret={APP_SECRET}`

进行步骤 2 时存在问题。页面显示：

```
{
   "error": {
      "message": "Error validating verification code.",
      "type": "OAuthException",
      "code": 100
   }
} 
```

我已经用谷歌搜索了很多时间。有些人建议在redirect_uri 中添加一个斜杠，但它不起作用。我应该怎么办？以及获取access_token后如何获取用户信息？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T19:54:35.643

两件事情：

首先，我会说你`state`在你的第一个 URL 中缺少参数......你必须组成一个文档描述为 SOME_ARBITRARY_BUT_UNIQUE_STRING 的值——一些唯一的 id/hash/whatever，外界没有人能够猜到. （是的，该参数是*可选*的——但无论如何你*都应该*使用它，因为正如文档所说，它有助于防止 CSRF，因此是一项*重要*的安全措施。如果你不知道 CSRF 是什么意思，请查一下。）

其次，在您的第二步中，您不应**将用户的客户端** *重定向*到该地址，而应改为对该端点进行*服务器端调用。*您正在将您的应用程序密码放入此 URL（这不是错误，您必须这样做）——因此，如果您在浏览器中调用该 URL，用户将很容易获得它……！

我建议您再次从[https://developers.facebook.com/docs/authentication/server-side/](https://developers.facebook.com/docs/authentication/server-side/)开始，从顶部仔细阅读 - 如果您真的按照那里给出的说明进行操作，几乎不会出错-一个……</p>

# html - 在页面部分中合并css3列数不起作用

> ID：11810980
> 
> 赞同：0
> 
> 时间：2012-08-04T18:16:22.823
> 
> 标签：html, css, xhtml

大家好，我已经测试并尝试了 css 和代码，但仍然无法在此页面上运行：

[http://www.beauty-courses-distance-learning.co.uk/aromatherapy-self-use-wellbeing.html](http://www.beauty-courses-distance-learning.co.uk/aromatherapy-self-use-wellbeing.html)

我正在尝试在“您可能感兴趣的其他课程”底部的链接列表中添加一个 css3 列计数，但尽管添加了列计数，但它没有显示/工作，并且列表仍然像往常一样在页面下方。

任何帮助将非常感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T18:34:20.517

> 在 CSS2 中，标识符（包括选择器中的元素名称、类和 ID）只能包含字符 [A-Za-z0-9] 和 ISO 10646 字符 161 及更高，加上连字符 (-)；它们不能以连字符或数字开头。它们还可以包含转义字符和任何 ISO 10646 字符作为数字代码（参见下一项）。例如，标识符“B&W?” 可以写成“B\&W\?” 或“B\26 W\3F”。

您的`.2coltext`课程以数字开头，因此没有被选中。尝试从班级中删除号码，它应该可以正常工作。

```
.coltext {
  -moz-column-count:2; /* Firefox */
  -webkit-column-count:2; /* Safari and Chrome */
   column-count:2;
} 
```

# java - 处理文件的 Web 应用程序 -upload 下载

> ID：11810983
> 
> 赞同：6
> 
> 时间：2012-08-04T18:16:38.573
> 
> 标签：java, web-applications

我有一个现有的 Swing 桌面应用程序，我希望将其转换为 Web 应用程序。停止这样做的第一件事是桌面应用程序处理 PDF 文件的写入和读取。用户还填写了应用程序需要阅读的 PDF 表格。

现在桌面应用程序中的一个典型用例是，用户登录打开一个 PDF 表单并填写它。Swing 应用程序管理文件的存储位置，因此它转到文件并读取表单，提取数据并将数据存储在数据库中。用户可能不会一次性填写表格。他可能会保存它，稍后再回来继续。

所有这些现在都需要由 Web 应用程序来完成。我的问题是我不希望用户多次下载并上传表单到服务器。这会占用带宽，并且还要求用户在本地保存文件并在他完成填写表格后将其上传回来对我没有吸引力，因为桌面应用程序也很好地用于管理这些文件的位置。

我是否需要实现诸如保管箱之类的东西？一个持续运行的小守护进程检查哪些文件已更新并将其上传到服务器？这会很困难，因为在服务器上我不知道文件是否是最新的。以前有人可能做过类似的事情吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T05:35:16.530

我有另一个建议：为什么不向用户显示具有相同字段的表单并在用户提交后将它们传输到 PDF。这样，Pdf 就不会离开服务器，您只需传输最少量的数据。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T09:18:59.300

切换到应用程序的 Web 版本可能会迫使您重新考虑您做事的某些方式。当然，浏览器有意限制对本地文件系统的访问，这为您当前的操作模式引入了主要障碍。

即使您可以在浏览器中显示 PDF，检测编辑的完成并将其从浏览器代码中发送回服务器（这可能是可能的），您也会受到不同浏览器的影响pdf插件已安装。

正如 Vitaliy 已经提到的，切换能够在浏览器中填充（网络）表单意味着整个下载上传问题都消失了。但是，您必须将用户在网页中所做的事情以某种方式输入 PDF。如果您不必从 PDF 开始，但可以收集数据并在最后生成 PDF，那么您可能有更多选择。例如，如果您没有太多样式的文档可供使用，您可以使用 iText 直接创建 PDF。你可以使用像 Docmosis 这样的东西，你可以给它模板，然后让它在以后填充和渲染 PDF。使用 Docmosis 选项，您还可以向 Docmosis 询问模板中的字段列表，以便可以基于所选模板构建 Web 表单，让用户填写，然后将该数据推送到 Docmosis 以生成文件。

希望那里有一些对您有用的选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T20:45:59.757

几年前我曾研究过类似的问题，尽管我没有处理签名表格。签名肯定会使它变得更加困难。但是，我能够使用 iText 创建带有字段的 PDF 表单，并且只将字段数据提交回服务器。顺便说一句，不幸的是，我不记得我们到底是什么/如何做到的，但可以确认它是可行的（有限制/警告）。例如：用户必须安装 PDF 阅读器插件，并且用户每次都被迫删除 pdf。

基本上，我所做的是使用 iText 从 PDF 创建 FDF（带有表单现有表单字段）。FDF 中的提交按钮实际上将表单数据提交到您选择的 URL（与 HTML 表单不同）。一旦你有了这些数据，我相信我使用 iText 在服务器端将表单字段（来自 FDF）与 PDF 合并。

一旦您使用服务器来维护所有表单数据，您用来确保单个用户更新最新和最好的表单数据的同步/锁定过程取决于您。

您在 jowierun 下的评论表明您也想处理 word/excel/etc 文档，所以我不完全确定我是否理解您的需求。您最初的帖子讨论了在本地填写 PDF 表单的需求，但之后听起来您正在寻找文件共享系统。

您能否准确说明您要完成的工作？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T00:35:05.090

Adobe[在此处记录了如何执行此操作](http://helpx.adobe.com/acrobat/kb/acrobat-forms-form-data-web.html)。永远不要低估谷歌设计的力量。我知道这可以工作，因为我已经在线使用了 PDF 表单。

# c++ - 值声明的方法结果，引用实现有效吗？

> ID：11810986
> 
> 赞同：4
> 
> 时间：2012-08-04T18:16:49.970
> 
> 标签：c++

我一直想知道如果我通过引用从方法返回某些东西是否是有效的 C++，而该方法实际上被声明为按值返回：

```
class A {
public:
    int method(){
        int i = 123;
        int& iref = i;
        return iref;
    }
}; 
```

这编译得很好，似乎工作。据我了解，这应该按值返回，如方法签名中所声明的那样。我不想最终返回对局部变量的引用。有谁知道这是否是没有陷阱的“正确的 c++ 代码”？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-04T18:21:33.810

这是一个完全有效的 C++ 代码，并且完全符合您的预期：

*   有一个**局部**变量
*   对该局部变量有一个局部引用
*   复制本地引用所引用的变量
*   将该副本返回给调用者（展开堆栈，销毁局部变量和对它的引用）

不用担心，您最终不会以这种方式返回对局部变量的引用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-04T18:18:13.717

代码很好，它将按值返回一个 int 值`i`。

# android - 如何正确使用 glDiscardFramebufferEXT

> ID：11810988
> 
> 赞同：4
> 
> 时间：2012-08-04T18:17:30.087
> 
> 标签：android, iphone, opengl-es, opengl-es-2.0, gpgpu

这个问题与 OpenGL ES 2.0 Extension [EXT_discard_framebuffer 有关](http://www.khronos.org/registry/gles/extensions/EXT/EXT_discard_framebuffer.txt)。

我不清楚哪些情况证明使用此扩展是合理的。如果我调用 glDiscardFramebufferEXT() 并将指定的可附加图像置于未定义状态，这意味着：
- 我不再关心内容，因为它已经与 glReadPixels() 一起使用，
- 我不在乎内容不再是因为它已经与 glCopyTexSubImage() 一起使用了，
- 我不应该首先进行渲染。

显然，只有前两种情况有意义，或者还有其他情况下 glDiscardFramebufferEXT() 有用吗？如果是，这些是哪些情况？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-29T15:29:57.730

glDiscardFramebufferEXT 是对驱动程序的性能提示。移动 GPU 使用基于切片的延迟渲染。在这种情况下，将任何帧缓冲区设置为丢弃可以节省 gpu 工作和内存带宽，因为它不需要将其写回统一内存。

通常你会丢弃：

*   深度缓冲区，因为它没有显示在屏幕上。它只是在 gpu 上渲染时使用。
*   msaa 缓冲区，因为它被解析为一个较小的缓冲区以呈现到屏幕上。

此外，任何仅用于在 GPU 上渲染的缓冲区都应该被丢弃，这样它就不会被写回统一内存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T03:35:44.957

我看到使用 DiscardFramebuffer 的主要情况是，当您使用 BlitFramebuffer 或 ResolveMultisampleFramebufferAPPLE（在 iOS 上）将多采样渲染缓冲区解析为纹理时，在这种情况下您不再关心原始缓冲区的内容。

# php - CakePHP 嵌套两个选择查询

> ID：11810990
> 
> 赞同：1
> 
> 时间：2012-08-04T18:17:41.330
> 
> 标签：php, mysql, cakephp

我在 cakePHP 中有两个表。

```
competencies
------------
id
name

competenceRatings
-----------------
id
competence_id
user_id
rating 
```

我需要一种以蛋糕方式编写以下查询的方法：

SELECT * FROM 能力，其中 id 不在（从能力等级中选择能力 ID，其中雇员 ID = $userId）

有人请帮助我！

我在使用这个子查询方法之前做了什么：

我尝试了能力->hasMany->competenceRatings，competenceRatings->belongsTo->competencies 关系。

```
$competencies = $this->Competence->CompetenceRating->find('all',array('CompetenceRating.user_id' => $userId,'CompetenceRating.competence_id !=' => 'Competence.id')); 
```

我希望能够获得用户没有对competitionRatings 表进行任何评级的能力名称。即，我需要能力表中的名称列表，其中 comptenceRatings 表中没有条目（对于给定的 user_id）。

**编辑**

我也尝试过表连接：

```
$options['joins'] = array(
            array(
                'table' => 'competence_ratings',
                'alias' => 'CompetenceRating',
                'type' => 'LEFT OUTER',
                'conditions' => array(
                    'Competence.id = CompetenceRating.competence_id'
                )
            )
        );
$options['conditions'] = array( 'CompetenceRating.employee_id' => $employee['Employee']['id'] );

$competencies = $this->Competence->find('all',$options); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T19:44:42.357

您可能必须使用子查询（）：

```
$subqueryOptions = array('fields' => array('competence_id'), 'conditions' => array('employee_id'=>$user_id));
$subquery = $this->Competence->CompetenceRating->subquery('all', $subqueryOptions);

$res = $this->Competence->CompetenceRating->find('all', array(
    'conditions' => array('id NOT IN '. $subquery)
)); 
```

子查询的来源在这里： [https](https://github.com/dereuromark/tools/blob/2.0/Lib/MyModel.php#L405) ://github.com/dereuromark/tools/blob/2.0/Lib/MyModel.php#L405 你需要把它放在你的 AppModel.php

但我认为子查询是没有必要的。您可能可以从中进行一个简单的查询：

```
$this->Competence->CompetenceRating->find('all', array(
    'group' => 'competence_id', 
    'conditions' => array('NOT' => 'employee_id'=>$user_id)),
    'contain' => array('Competence')
)); 
```

如果您将递归设置为-1，请不要忘记通过“包含”包含能力。

# java - 为什么 AbstractList.removeRange 需要二次时间？

> ID：11810997
> 
> 赞同：2
> 
> 时间：2012-08-04T18:18:34.457
> 
> 标签：java, collections, big-o, time-complexity

我可以在文档中看到：

`java.util.AbstractList#removeRange`

它需要二次时间：

> 此实现获取一个位于 fromIndex 之前的列表迭代器，并重复调用 ListIterator.next 后跟 ListIterator.remove，直到删除整个范围。注意：如果 ListIterator.remove 需要线性时间，则此实现需要二次时间。

但为什么？？编码：

```
protected void removeRange(int fromIndex, int toIndex) {
        ListIterator<E> it = listIterator(fromIndex);
        for (int i=0, n=toIndex-fromIndex; i<n; i++) {
            it.next();
            it.remove();
        }
    } 
```

对我来说似乎是线性的......但我必须是错的，因为我是这种算法的新手。请帮助我理解它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T18:21:44.157

重要的部分是“注意：如果 ListIterator.remove 需要线性时间，则此实现需要二次时间。” for 循环需要线性时间，你是对的。但是，如果你在每次迭代中做一个线性时间步长，你会得到`n * n = n^2`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-04T18:22:46.087

原因在于：

```
it.remove(); 
```

这可以是列表上的 O(n) 操作，您可以在 O(n) 循环中调用它。

换句话说，如果是这种情况，您的真实循环将如下所示（我编造了，但您明白了）：

```
protected void removeRange(int fromIndex, int toIndex) {
    ListIterator<E> it = listIterator(fromIndex);
    for (int i = 0, n = toIndex - fromIndex; i < n; i++) {
        E item = it.next();
        //it.remove();
        for (int j = ; j < n; j++) {
            if (list.get(j).equals(e)) {
                list.remove(e);
                break;
            }
        }
    }
} 
```

# html - 在 html 页面上排列项目

> ID：11810999
> 
> 赞同：0
> 
> 时间：2012-08-04T18:18:43.383
> 
> 标签：html

自从我编写html以来已经有很长时间了。我的文档目前有一个包含在 div 标签中的谷歌图表。我希望在我的页面中添加一个组合框和文本框来操作图表后面的 js。以前我使用表格来组织页面上的项目，但今天它是如何完成的？

顺便说一句，我的 div 看起来像这样：

```
<div id="visualization" style="width: 600px; height: 400px;"></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T18:45:06.767

在 HTML 4 中，您可能希望使用 div 元素，然后为它们分配带有 ID 或类的样式：

```
<div id="mainContent>
     <div class="container">
         <!-- Content Here-->
     </div>
     <div class="container">

     </div>
</div> 
```

CSS；这将为您提供 960 像素宽的居中页面，每个容器都有一个边框

```
html, body {text-align: center}
#mainContent {width: 960px; margin: 0 auto;}
.container {margin: 10px; border: 1px #000 solid} 
```

要获得两列，您将使用以下内容`.container`

```
.container {margin: 10px 0 10px 10px; width: 465px; float: left} 
```

每当你浮动某些东西时，你总是想给它一个特定的宽度，如果浮动元素的容器没有特定的高度，你会添加

```
<div style="height: 0; clear: both">&nbsp;</div> 
```

否则容器不会延伸到浮动元素的底部，像[这样](https://stackoverflow.com/questions/563844/how-can-i-use-float-left-in-a-div-without-breaking-the-containing-elements-h)

这是一篇关于花车的文章：[http ://www.alistapart.com/articles/css-floats-101/](http://www.alistapart.com/articles/css-floats-101/)

我将尝试找到更多布局内容并进行编辑。

编辑：使用 HTML 5 的主要区别在于它添加了`header`、`footer`和`section`. 在 HTML 4 中只有`div`.

编辑：

这是另一个关于在布局中使用浮动的不错的教程：

[http://www.ozzu.com/html-tutorials/tutorial-multi-column-layout-using-css-float-part-t85704.html](http://www.ozzu.com/html-tutorials/tutorial-multi-column-layout-using-css-float-part-t85704.html)