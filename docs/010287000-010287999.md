# StackOverflow 问答 10287000-10287999

# android - 从 HTTP Android 读取 XML

> ID：10287000
> 
> 赞同：0
> 
> 时间：2012-04-23T19:33:53.673
> 
> 标签：android, xml

我正在尝试从互联网上读取一个 xml 文件。

这是我正在使用的代码：

```
HttpClient client = new DefaultHttpClient();
HttpPost httppost = new HttpPost("http://www.mypage.com/version.xml");
HttpResponse resp = client.execute(httppost); 
```

我得到了这个前任：

> android.os.NetworkOnMainThreadException

我正在尝试使用答案后的异步方法来做到这一点。这是我试过的代码：

```
public class Download extends AsyncTask<String, Void, Document> {

@SuppressWarnings("unused")
private Exception exception;
public Document document;

public Download(String url)
{
    this.execute(url);
}

@Override
protected Document doInBackground(String... url) {
    try {
        HttpUriRequest request = new HttpGet(url.toString());
        HttpClient httpClient = new DefaultHttpClient();
        HttpResponse response = httpClient.execute(request);

        StatusLine statusLine = response.getStatusLine();
        int statusCode = statusLine.getStatusCode();
        if (statusCode == 200) {
            DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
            DocumentBuilder builder = factory.newDocumentBuilder();
            document = builder.parse(response.getEntity().getContent());
            return document;
        } else {
            throw new IOException("Download failed, HTTP response code "
                    + statusCode + " - " + statusLine.getReasonPhrase());
        }            

    } catch (Exception e) {
        exception = e;
        return null;
    }
}

protected void onPostExecute(Document doc)
{
    // TODO: check this.exception 
    // TODO: do something with the feed
    document = doc;
}

} 
```

但该文件为空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T07:10:47.493

尝试在`AsyncTask`.

`doInBackground()`仅供参考，您可以在AsyncTask的方法中执行后台进程。

# javascript - 如何动态替换 HTML5 Video src

> ID：10287004
> 
> 赞同：2
> 
> 时间：2012-04-23T19:33:59.940
> 
> 标签：javascript, jquery, html5-video

我有一个项目，其中有几个我想动态加载到页面中的视频。我的 HTML 相当简单一个视频标签

```
<video controls preload width="520" height="350" id="video">
<source src="videos/video0.mp4" type="video/mp4" id="video_source">
</video>

<div id="playlist">
    <a href="videos/video1.mp4">Video File Tomorrow</a>
    <a href="videos/video2.mp4">Video File Tomorrow</a>             
</div> 
```

我只使用 MP4 文件，因为这个项目只需要在 Safari 中运行。我已经尝试了 2 个 JS 解决方案，但似乎都产生了单独的问题

解决方案 1

```
$("#playlist a").click(function(){
   var video_source_link=$(this).attr("href");
   document.getElementById("video_source").setAttribute("src",video_source_link);
   document.getElementById("video").load();
   document.getElementById("video").play();
   return false;
}); 
```

在这个版本中，JS 更新了源标签的 src 属性，但不加载视频。

解决方案 2

```
$("#playlist a").click(function(){
       var video_source_link=$(this).attr("href");
       document.getElementById("video_source").setAttribute("src",video_source_link);
       document.getElementById("video_source").load();
       document.getElementById("video_source").play();
       return false;
}); 
```

在此版本中，视频加载到空白窗口中，当我单击后退按钮时，Safari 崩溃并出现以下错误 WebKit2WebProcess.exe 遇到问题，需要关闭

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-22T18:12:48.553

尝试更改视频标签而不是内部子源标签：

`$("#video")[0].src = $(this).attr("href");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-14T00:42:28.617

首先，检查您的`video_source_link`. 如果你`video_source_link`是正确的，我建议删除灵魂 1 中的这一行。或者在视频标签中`document.getElementById("video").play();`删除如何？`controls preload`以下代码对我有用。

HTML

```
 <video width="320" height="240" autoplay>
   <source id="video_path" src="" type="video/mp4">
 </video> 
```

JS

```
 $('#video_path').attr('src', 'path');
 $('video').load(); 
```

# visual-studio - 在 Visual Studio 2010 的调试模式下运行时，Excel 不会打开/启动 VSTO 插件

> ID：10287007
> 
> 赞同：12
> 
> 时间：2012-04-23T19:34:08.267
> 
> 标签：visual-studio, visual-studio-2010, excel, vsto, excel-interop

我之前安装了 VS11 测试版，但我的 Visual Studio 2010 实例出现了一些问题，您可以在此处查看它们是如何解决的：[Excel AddIn Click Once deployment issue](https://stackoverflow.com/questions/10250475/excel-addin-click-once-deployment-issue)。

现在我有一个编译/构建 vsto 的代码库，它可以在 Excel 2010 中正常安装和运行。但是，当我从 Excel 中删除已安装的版本并尝试直接通过 Visual Studio 2010 运行它时，插件没有得到在调试配置模式下运行时加载到 Excel 中，在发布配置模式下它工作正常。关于为什么会发生这种情况的任何想法？我尝试通过 Com AddIns 重新启用它，以及其他一些没有运气的东西。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-02T20:06:49.810

我发现了一个问题，它不允许我在“调试”配置模式下运行我的项目，尽管它在“发布”模式下工作。在某些时候，AddIn 被硬禁用（不确定这是否是要使用的术语）。那时，尝试从 Excel 中重新启用不会做任何事情。在注册表中，有一个文件夹，其中标记了禁用的加载项。我从这个文件夹中删除了除“（默认）”之外的所有键，现在我的插件在从 Visual Studio 2010 以“调试”模式启动时可以工作。

```
HKEY_CURRENT_USER\Software\Microsoft\Office\14.0\Excel\Resiliency\DisabledItems 
```

![在此处输入图像描述](../Images/a5f31c2f9809f4156c4b0eedc9ab2076.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T20:27:25.730

当您通过 Visual Studio 2010 运行时，它会在 addin_startup 事件中遇到断点。如果不尝试以这种[方式调试](http://www.macroview.com.au/support/KnowledgeBase/Pages/20110084.aspx)

希望这可以帮助你

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T09:00:19.810

您可以使用 Excel 重新启用硬禁用的加载项

[http://msdn.microsoft.com/en-us/library/ms268871(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms268871(v=vs.80).aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-11T10:23:30.037

我在使用 Word VSTO 时遇到了同样的问题，但是我的注册表中没有`Resiliency\DisabledItems`文件夹，所以我认为它从来没有被硬禁用（就像在@mservidio 的解决方案中一样）。对我有用的是编辑清单路径`HKEY_USERS\<user key>\Software\Microsoft\Office\Word\Addins\<Add-In name>`以反映“调试”路径而不是“发布”路径。

要找到正确的文件夹，最简单的方法可能是搜索加载项名称并检查任何 Manifest 键是否引用了调试路径。

![在此处输入图像描述](../Images/4cbf177d460d51c283fe9f1a0c94186b.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-04T21:21:53.147

我在 Excel 中遇到了同样的问题。

以下对我有用：

转到以下键....

```
HKEY_CURRENT_USER\Software\Microsoft\Office\15.0\Excel\AddInLoadTimes 
```

查看是否列出了您的插件。如果是这样，请将其删除。

现在再次从 Visual Studio 运行您的应用程序。

这对我有用，希望它可以帮助别人。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-28T22:02:18.417

我也有同样的问题，我不明白的是：

为什么我重新安装 Office 2016，我既不更改代码也不更改 VS 设置，但我收到`cant load`错误消息？

很多小时后，修复 Office 和 VS 并收到相同的错误消息，我观察到插件在`Release`配置中启动良好，我开始检查代码中两个配置之间的差异。我发现`debug`配置的目标是触发`x86`错误`release``any cpu`

所以 Office x64 没有加载 x86 dll（在我的情况下）

# objective-c - #import 不使用两个类之间的继承

> ID：10287009
> 
> 赞同：0
> 
> 时间：2012-04-23T19:34:17.563
> 
> 标签：objective-c

请帮助理解#import 如何在不使用继承的情况下工作。

所以我创建了一个名为 Person 的类和另一个名为 Body 的类（这两个类都继承自 NSObject）。

Body 类有 3 个 ivars（用属性设置）

```
 int hands;
  int feet;
  int legs; 
```

然后，我将 Body 类 ( *body) 的实例导入并创建到 Person 类中。我的理解是我现在已经从 Body 类中创建了一个“类型”。然后使用属性设置此 ivar。

然后，我主要从名为 person 的 Person 类创建了一个实例。Main 识别 person.body.feet 但我无法直接获取和设置它的值。唯一可以做到的方法是将其值传递给一个新的 int 变量，然后打印出新变量。

显然我是一个苦苦挣扎的新手，但我真的很想了解这个问题 -

```
 #import <Foundation/Foundation.h>
    #import "Person.h"

    int main (int argc, const char * argv[])
    {

        NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];

        Person *person = [[Person alloc]init];

        // this works and NSLog prints out the value is 2
        int feet = person.body.feet = 2;
        NSLog(@"person.body = %i",feet);

        // this does not work - NSLog prints out the value is 0; 
        [person.body setFeet:2];
        NSLog(@"person.body = %i", person.body.feet );

        [person release];
        [pool drain];
        return 0;
    }

    #import <Foundation/Foundation.h>
#import "Body.h"

@interface Person : NSObject {

    Body *body;

}

   @property (assign) Body *body;

@end

#import "Person.h"

@implementation Person

  @synthesize  body;

@end

#import <Foundation/Foundation.h>

@interface Body : NSObject {

    int hands;
    int feet;
    int legs;

}

@property int hands;
@property int feet;
@property int legs;

@end

#import "Body.h"

@implementation Body

@synthesize hands;
@synthesize feet;
@synthesize legs;

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T20:24:41.580

我的猜测是您没有将`Body`对象分配给`person.body`任何地方。

Objective-C 中的所有对象都分配在堆上。所有这些星号表示变量是指针，它们只是指向对象所在的内存位置的数字。当您声明一个包含对象的属性时，您真正要做的就是创建一个位置来存储指向该对象的指针。您不是在创建对象本身。

所以在某个地方（很可能在`Person`'s 的指定初始化程序中），您需要实际创建一个`Body`对象并将其分配给`body`属性。

如果*不*这样做，那么内存位置将保持在`0`，相当于`nil`. 当您在此处链接作业时：

```
int feet = person.body.feet = 2; 
```

...您将`2`同时分配给`feet`and `person.body.feet`，但是由于`person.body`is `nil`，因此忽略了给它的 setter 消息。稍后您再次尝试登录`person.body.feet`时，它将是`nil`并返回`nil`/ `0`。

**编辑：**看了你的更新，是的，这是你的问题。

此行不创建`Body`对象：

```
Body *body; 
```

*它为指向对象的指针*创建一个实例变量`Body`。

此行不创建`Body`对象：

```
@property (assign) Body *body; 
```

它声明了一个属性，它是 getter 和 setter 方法声明的语法糖。

此行不创建`Body`对象：

```
@synthesize  body; 
```

它通过创建 getter 和 setter 方法来合成您之前声明的属性。

您需要实际创建和初始化一个`Body`对象，然后将其分配给`Person`对象的`body`属性。例如：

```
- (id)init {
    if (self = [super init]) {
        self.body = [[Body alloc] init];
    }
    return self;
} 
```

此外，由于您没有使用 ARC，您几乎可以肯定地将该属性声明为`retain`not ，并在您的方法`assign`中释放它。`Person``dealloc`

# java - 我应该使用什么样的耶拿词汇来创建一个主要基于 ART 的 RDF？

> ID：10287014
> 
> 赞同：2
> 
> 时间：2012-04-23T19:34:46.163
> 
> 标签：java, rdf, jena, ontology

我想创建一些 RDF 我的问题是我不知道我应该使用什么样的词汇来做这样的事情：

这是我的数据示例（我已将它们存储到几个 XML 文件中）

```
<uri>http://dbpedia.org/resource/Herbie_Mann</uri>
<classtype>classtype:Artist</classtype>
<title>Herbie Mann</title>
<albums>
<album url="/~u0082/intelweb2/%3fq=album/75">Push Push</album>
<album url="/~u0082/intelweb2/%3fq=album/87">At the Village Gate</album>
</albums>
<website>http://www.herbiemannmusic.com</website>
<biography>
Herbie Mann, credited as being one of the seminal jazz flutists, is probably best known for the musical....
</biography> 
```

这是我写的一个非常粗略的代码：

```
 Model model = ModelFactory.createDefaultModel();
        Property prop = model.createProperty(artistURI);

        Resource herbie_mann = model.createResource(artistURI);
        herbie_mann.addProperty(RDF.value,artistName);
        herbie_mann.addProperty(RDF.object,artistClass);
        herbie_mann.addProperty(RDF.subject , model.createResource().addProperty(RDF.object, artistAlbum1));
        model.write(System.out); 
```

但我不喜欢使用价值/对象/主题的想法，我想用更通用但更有意义的东西替换它，我不知道该怎么做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T19:52:36.607

你看过[音乐本体](http://musicontology.com/)吗？它完全涵盖了您需要的内容，并且已被 BBC 等主要数据提供商使用。

Jena 没有用于音乐本体的带有常量的预定义类（就像它用于 the`RDF`和`DC`其他命名空间一样），因此您可以执行以下任一操作：

*   使用 Jena 的[schemagen 工具](http://incubator.apache.org/jena/documentation/tools/schemagen.html)自动生成一个 Java 类，其中包含 Music Ontology 中定义的常量
*   `createProperty()`使用和为类和属性创建自己的常量`createResource()`。

# ios - 检索 yelp 类别和子类别

> ID：10287015
> 
> 赞同：5
> 
> 时间：2012-04-23T19:34:46.163
> 
> 标签：ios, web-services, yelp

我正在使用 yelp 2.0 Api，我想知道是否有办法检索类别和子类别的列表。我知道该列表可在此处获得[http://www.yelp.com/developers/documentation/category_list](http://www.yelp.com/developers/documentation/category_list)但似乎没有办法检索它。我想有一个来源来检索它，这样它就不会在我的应用程序中硬编码，并且会保持最新。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-27T01:23:46.747

这是 json 格式的所有类别的链接：[https ://raw.github.com/Yelp/yelp-api/master/category_lists/en/category.json](https://raw.github.com/Yelp/yelp-api/master/category_lists/en/category.json)

您可以通过编程方式下载它。页面的好处是它提供了 Yelp 本体中存在的类别。

[编辑] 现在你可以得到来自所有国家的所有类别的 json：

[https://www.yelp.com/developers/documentation/v2/all_category_list/categories.json](https://www.yelp.com/developers/documentation/v2/all_category_list/categories.json)

坏消息，不是按国家分类的，都是

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T20:19:02.680

我知道你不会喜欢它，但我建议不要使用来自 github 的 json 而是解析**[这个 html 页面](http://www.yelp.com/developers/documentation/all_category_list)**。

截至从接受的答案编写 json 时，已有 11 个月大。它缺少许多类别。仅举几例：

```
gift shops
shanghainese
cantonese
food trucks
beer
wine & spirits
bubble tea
puerto rican
resorts 
```

另请注意，此 html 列表中的类别、git hub 中的 json 和每个企业的网页上使用的关于 word**和**. 在某些情况下它是`wine & spirits`，而在其他情况下它是`wine and spirits`。小心它。

PS。我（还）不是 Scala 大师，但这**[是](http://goo.gl/PXhHk)**我解析 HTML 的方式

# jquery - 图像有焦点时如何显示 iPhone 键盘？

> ID：10287018
> 
> 赞同：-1
> 
> 时间：2012-04-23T19:34:52.097
> 
> 标签：jquery, iphone, css, ios

如果在 iPhone 中运行的 HTML 页面中的 textarea 或 input（文本类型）元素具有焦点，则 iPhone 键盘将显示。

但是，我有一个图像（标签），我希望能够在该元素具有焦点时显示 iPhone 键盘，并捕获按键事件。

我读过 CSS 样式 -webkit-user-modify: read-write; 应该这样做，但它似乎无法在 iOS 模拟器中工作。

我正在使用 JQuery Mobile，没有任何本机 Cocoa/Objective C 代码。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T19:39:32.503

单击图像时将焦点发送到隐藏的文本字段（`position: relative; left:-10000px;`用于 CSS 样式），并且当该文本字段失去焦点时，该文本字段的值是用户输入的文本。

```
$("#myImg").click(function() {
    $("#inputOutsideOfPageAndUnviewable").blur(function() {
         var myImageTag = $("#inputOutsideOfPageAndUnviewable").val();
    });
    $("#inputOutsideOfPageAndUnviewable").focus();
}); 
```

# algorithm - 异或在算法中有哪些实际应用

> ID：10287019
> 
> 赞同：6
> 
> 时间：2012-04-23T19:34:56.727
> 
> 标签：algorithm, bit-manipulation, xor

老实说，我对位操作很生疏。
我感兴趣的是`XOR`操作。好吧，我知道它按位做什么，并且它用于加密，并且我们可以在没有任何临时变量的情况下进行交换，但是我很感兴趣，如果算法中有特定的方法，其`XOR`属性适合。
我的意思是我对`XOR`算法的实际应用很感兴趣（例如，我们可以用它在重复项中找到唯一元素）。是否存在一种问题模式（或问题的表述），人们可以看到使用`XOR`是要走的路？（与何时使用二进制搜索的模式相同？）
是否有一些实际应用的列表`XOR`在与核心算法相关的算法上，不要简单地使用它，例如像我们可以使用的那样更快地进行数学运算，`>>`而不是除以 2。

欢迎任何输入

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-23T19:41:55.533

我脑海中浮现的几个例子：

切换位：

```
int i = 123;
i ^= (1 << 4); // toggle bit 5 
```

某种随机性：

```
int i = 123;
for (int k = 0; k < 100; k++)
{
   i = i ^ (i << 1) + i;
   System.out.println(i);
} 
```

“弱加密”：

```
int b = 235321;
int key = 24552;
int encrypted = b ^ key;
int decrypted = encrypted ^ key; // equals 235321 
```

# python - 在 Python 中随机生成特定长度的整数分区的算法？

> ID：10287021
> 
> 赞同：6
> 
> 时间：2012-04-23T19:35:10.910
> 
> 标签：python, combinatorics, sage

我一直在使用`random_element()`SAGE 提供的函数为给定整数 ( `N`) 生成特定长度 ( `S`) 的随机整数分区。我正在尝试从给定值的所有分区中生成无偏随机样本`N`和`S`。SAGE 的函数快速返回 N（即`Partitions(N).random_element()`）的随机分区。

但是，添加`S`（即`Partitions(N,length=S).random_element()`）时它会大大减慢。同样，过滤掉`N`具有长度的随机分区`S`也非常慢。

但是，我希望这对某人有所帮助，我发现在函数返回`N`与长度不匹配的分区的情况下`S`，共轭分区的长度通常为 S。即：

```
S = 10
N = 100
part = list(Partitions(N).random_element())
    if len(part) != S:
        SAD = list(Partition(part).conjugate())
        if len(SAD) != S:
            continue 
```

这增加了找到长度分区的速率，`S`并且似乎产生了无偏样本（我已经针对 和 的各种值检查了整个分区集的结果`N`）`S`。

但是，我使用的 N (eg `10,000`) 和 S (eg `300`) 的值甚至使这种方法变得不切实际地缓慢。与 SAGE`random_element()`功能相关的评论承认有很大的优化空间。那么，有没有办法通过不生成不匹配的分区来更快地生成匹配给定值的整数分区的无偏（即随机均匀）样本`N`和？此外，在许多情况下，使用共轭分区可以很好地生成无偏样本，但我不能说我完全理解为什么。 `S``S`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T08:35:42.757

最后，我有一个绝对无偏的方法，拒绝率为零。当然，我已经对其进行了测试，以确保结果是整个可行集的代表性样本。它非常快而且完全没有偏见。享受。

```
from sage.all import *
import random 
```

**首先，一个函数用于找到 n 和 s 部分的分区的最小最大加数**

```
def min_max(n,s):

    _min = int(floor(float(n)/float(s)))
    if int(n%s) > 0:
        _min +=1

    return _min 
```

**接下来，一个函数使用缓存和记忆来查找 n 的分区数，其中 s 部分以 x 为最大部分。这很快，但我认为有一个更优雅的解决方案。例如，经常： P(N,S,max=K) = P(NK,S-1) 感谢 ante ( [https://stackoverflow.com/users/494076/ante](https://stackoverflow.com/users/494076/ante) ) 帮助我解决这个问题： [Finding the number给定总数、部分数和最大和数的整数分区](https://stackoverflow.com/questions/12434300/finding-the-number-of-integer-partitions-given-a-total-a-number-of-parts-and-a)**

```
D = {}
def P(n,s,x):
    if n > s*x or x <= 0: return 0
    if n == s*x: return 1
    if (n,s,x) not in D:
        D[(n,s,x)] = sum(P(n-i*x, s-i, x-1) for i in xrange(s))
    return D[(n,s,x)] 
```

**最后，一个函数可以找到 n 和 s 部分的均匀随机分区，并且没有拒绝率！每个随机选择的数字编码用于具有 s 部分的 n 的特定分区。**

```
def random_partition(n,s):
    S = s
    partition = []
    _min = min_max(n,S)
    _max = n-S+1

    total = number_of_partitions(n,S)
    which = random.randrange(1,total+1) # random number

    while n:
        for k in range(_min,_max+1):
            count = P(n,S,k)
            if count >= which:
                count = P(n,S,k-1)
                break

        partition.append(k)
        n -= k
        if n == 0: break
        S -= 1
        which -= count
        _min = min_max(n,S)
        _max = k

    return partition 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T19:47:44.683

当我试图计算强生日问题的概率时，我遇到了类似的问题。

首先，仅给定少量数字时，分区函数就会爆炸。你会返回很多信息。无论您使用哪种方法，N = 10000 和 S = 300 都会产生荒谬的数据量。它会很慢。您使用的任何纯 python 实现都有可能同样慢或慢。期待制作一个CModule。

如果您想尝试 python，我采用了结合 itertools 和生成器的方法来降低内存使用率。我似乎不再方便使用我的代码，但这是一个很好的实现：

[http://wordaligned.org/articles/partitioning-with-python](http://wordaligned.org/articles/partitioning-with-python)

编辑：

找到我的代码：

```
def partition(a, b=-1, limit=365):
  if (b == -1):
    b = a
  if (a == 2 or a == 3):
    if (b >= a and limit):
      yield [a]
    else:
      return
  elif (a > 3):
    if (a <= b):
      yield [a]
    c = 0
    if b > a-2:
      c = a-2
    else:
      c = b
    for i in xrange(c, 1, -1):
      if (limit):
        for j in partition(a-i, i, limit-1):
          yield [i] + j 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T19:46:16.343

简单的方法：随机分配整数：

```
def random_partition(n, s):
    partition = [0] * s
    for x in range(n):
        partition[random.randrange(s)] += 1
    return partition 
```

# cxf - CXF 在调用服务之前验证 wsdl

> ID：10287022
> 
> 赞同：1
> 
> 时间：2012-04-23T19:35:19.370
> 
> 标签：cxf

我们在 PROD 中使用 CXF2.5.2，我们的 wsdl url 可以随时关闭，因此在调用 cxf 服务时，当它从 url 验证 wsdl 时，如果 wsdl url 离线，它会失败。

有什么办法可以在调用服务时关闭它以验证 wsdl url，而不是将 wsdl 保持在本地。

# php - 调用非对象的成员函数

> ID：10287023
> 
> 赞同：0
> 
> 时间：2012-04-23T19:35:29.830
> 
> 标签：php, function

有人可以帮助初学者吗？它说在非对象上调用成员函数 set()；我已经对此进行了 3 天的修改，但无法弄清楚导致此错误的原因。

这是代码

```
function torrent_download($item_details, $output_type = 'show_torrent')
    {
    $template->set('session', $session);
$torrent = $show->torrent_download($session->value('user_id'));
    {
    if ($session->value('is_seller'))
    {
        $show_tips = $db->count_rows('users', "WHERE user_id='" . $session->value('user_id') . "' AND notif_a=0");

        if ($show_tips)
        {
            $msg_member_tips = '<p class="errormessage">' . MSG_MEMBER_TIPS_A . '<br>' . MSG_MEMBER_TIPS_B . '</p>';
            $db->query("UPDATE " . DB_PREFIX . "users SET notif_a=1 WHERE user_id='" . $session->value('user_id') . "'");
        }
        $template->set('msg_member_tips', $msg_member_tips);
    }

if (isset($_REQUEST['form_download_proceed']))
    {
        $download_result = download_redirect($_REQUEST['winner_id'], $session->value('user_id'));

        if ($download_result['redirect'])
        {
            header('Location: ' . $download_result['url']);
        }

        $template->set('msg_changes_saved', '<p align="center">' . $download_result['display'] . '</p>');

    }
    }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T19:38:57.287

我假设您在`torrent_download`函数内部遇到此错误？

如果是这样，那是因为`$template`未定义。也许您在全局脚本中定义了它，但函数不会继承它。

`global $template`您可以通过在函数开头添加：（以及您需要的任何其他外部变量）来防止此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T19:39:06.240

这通常意味着您在为空的变量上调用某些东西。错误返回什么行号？

您应该在分配后添加检查以确保以下内容不为空：

```
$download_result, $template, $torrent 
```

据我所知， $template 从未定义过。

# ios - 如何卸载 cocos2d 模板？

> ID：10287029
> 
> 赞同：12
> 
> 时间：2012-04-23T19:35:48.767
> 
> 标签：ios, xcode, ide, cocos2d-iphone, terminal

**情况：**
- 就在几个小时前，我安装了 cocos2d 2.x
- 但在此之前我删除了 cocos2d 1.0.1 的模板文件
- 现在我看不到 cocos2d 2.x 的模板文件
- 在 Xcode 中，两个模板都是可见的，我可以使用它们。

**问题：**如果我已经删除了 cocos2d 1.0.1 模板的文件，如何删除该模板的文件？为什么我看不到 cocos2d 2.x 的文件？

提前致谢！

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-04-24T12:11:27.943

**这对尝试重新安装或删除 Cocos2D 模板的人有帮助！**

*   如果您从 thi 路径中删除所有文件：~/Library/Application Support/Developer/
*   如果您尝试使用 Terminal.app 中的命令删除它：`cd "your path" ./install-templates.sh -u -f`
*   如果您尝试重新安装 Xcode.app

**没有什么帮助？**

***我找到了这个问题的解决方案！***

你需要做的是：

*   打开**查找器**
*   按**Shift-Command-G**
*   输入路径：/Users/ **Your_Username** /Library/Developer
*   按**开始**
*   打开**Xcode**文件夹
*   打开**模板**文件夹
*   删除**Cocos2D**文件夹
*   打开**文件模板**文件夹
*   删除**Cocos2D**文件夹

**就这样！**

**PS**同样，您可以在 Xcode 中修改模板和选项卡的名称。只需重命名模板的文件夹即可。

**PPS**顺便说一句，现在你可以升级到 Cocos2D 2.x。从这里下载：[Cocos2D](http://www.cocos2d-iphone.org/archives/1885)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-21T12:04:43.967

对于 Xcode 5.1 及更高版本

Command+Alt+G（转到）/Users//Library/Developer/Xcode/Templates

然后删除 3d 派对模板文件夹。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T19:45:02.420

尝试查看此链接： [http](http://www.cocos2d-iphone.org/forum/topic/4082) ://www.cocos2d-iphone.org/forum/topic/4082 如果一切都失败了，您可能需要手动删除文件。希望能帮助到你！:)

# gwt - GWT 图像裁剪

> ID：10287035
> 
> 赞同：10
> 
> 时间：2012-04-23T19:37:00.933
> 
> 标签：gwt, image-processing, crop

我正在使用 GWT 构建一个网站，并希望添加图像裁剪功能，以便用户可以上传他们的个人资料图像，然后根据需要对其进行裁剪。我正在寻找类似于 Jcrop 但在 GWT 中的东西。

我发现[THIS](http://c.gwt-examples.com/home/ui/canvas)和[THIS](http://code.google.com/p/gwt-examples/wiki/gwt_hmtl5)代码示例如何在客户端裁剪图像，但没有 UI 部分，用户可以在其中选择需要裁剪的图像部分。

在 SO 上也有几个类似的问题（[例如](https://stackoverflow.com/questions/986418/gwt-client-side-image-crop-and-resize)，[这个](https://stackoverflow.com/questions/7374899/gwt-client-side-cropping)GWT with Jcrop），但没有人给出使用纯 GWT 的图像选择部分的示例。如果您知道如何做，请分享，我相信其他人将来会从中受益。

这是我正在寻找的示例： ![在此处输入图像描述](../Images/f0f99ba7ac0e663cbe2fc8502eb0a2ab.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T05:11:02.683

我建议你走#1 路线。我已经在 GWT 全职工作了一段时间，并花了很多时间寻找库，而这是我认为尚不存在的库。

以下是您的选择：

1.  使用 JSNI 接口包装 Jcrop。

    *   **优点**：你必须包括 JQuery 和 JCrop，它们小而健壮
    *   **缺点**：学习如何构建你的第一个 JSNI 包装器可能会很痛苦
2.  [通过GWT 拖放](http://allen-sauer.com/com.allen_sauer.gwt.dnd.demo.DragDropDemo/DragDropDemo.html#WindowExample)构建您自己的

    *   **优点**：“纯 GWT”
    *   **缺点**：您可能无法处理 JCrop 随着时间的推移发现的所有边缘情况，也无法处理这些情况。
3.  将 JCrop移植到[GQuery](http://code.google.com/p/gwtquery/)

    *   **优点**：JCrop 是[开源](https://github.com/tapmodo/Jcrop/blob/master/js/jquery.Jcrop.js)的，只有大约 1600 行代码
    *   **缺点**：大约 1600 行代码，移植到 Java 时可能会更大

如果您决定执行上述任何操作，请开源它！我很乐意做出贡献，而且它看起来也可以在我的 GWT 项目中使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-05T10:26:43.877

**GWT Cropper**是一个允许裁剪图像的小部件。

[https://code.google.com/p/gwt-cropper/](https://code.google.com/p/gwt-cropper/)

**2015 年编辑**：只要 Google Code 即将关闭，项目就已经转移到 GitHub。新地址是[https://github.com/w32blaster/gwt-cropper](https://github.com/w32blaster/gwt-cropper)

# javafx-2 - 通过 JNLP 启动程序会产生安全异常

> ID：10287036
> 
> 赞同：1
> 
> 时间：2012-04-23T19:37:04.627
> 
> 标签：javafx-2

如果我正确阅读了 JavaFX 部署指南，我应该能够部署一个未签名的应用程序，只要“该应用程序需要 [no] 提升权限......”。我已将我的应用程序简化为以下代码：

```
package fxadhoc;

import javafx.application.Application;
import javafx.scene.Scene;
import javafx.scene.control.Label;
import javafx.scene.layout.Pane;
import javafx.stage.Stage;

public class FXAdHoc
    extends Application
{

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args)
    {
        System.out.println( "launch" );
        launch( args );
    }

    @Override
    public void start(Stage stage) throws Exception
    {
        Pane    root    = new Pane();
        root.getChildren().add( new Label( "Testing" ) );
        Scene   scene  = new Scene( root );
        stage.setScene( scene );
        stage.show();
    }
} 
```

当我双击 jar 文件（由 NetBeans 创建）时，没有任何反应。当我尝试通过 html 或 jnlp 文件（也由 NetBeans 创建）启动时，出现安全异常：

```
Caused by: java.security.AccessControlException: access denied ("java.util.PropertyPermission" "javafx.debug" "read") 
```

下面提供了完整的堆栈跟踪。

我正在运行应用了所有最新更新的 Windows 7。我已经下载了最新版本的 NetBeans (7.1.1)，它配备了最新版本的 JavaFX。我已经下载了 JavaFX 示例，它们运行良好。（如果您好奇，我尝试对应用程序进行自签名并得到异常“ava.lang.RuntimeException: java.lang.UnsatisfiedLinkError: Can't load library: C:\Users\jack\Documents\NetBeansProjects\FXAdHoc \dist\bin\mat.dll")。当我在 Linux 上构建时（再次使用 NetBeans 7.1.1），我得到了同样的例外。

谁能告诉我我错过了什么？谢谢...

异常的完整堆栈跟踪：

```
java.lang.RuntimeException: Application launch error
    at com.sun.javafx.application.LauncherImpl$1.run(LauncherImpl.java:104)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.ExceptionInInitializerError
    at com.sun.javafx.application.LauncherImpl.launchApplication1(LauncherImpl.java:140)
    at com.sun.javafx.application.LauncherImpl.access$000(LauncherImpl.java:27)
    at com.sun.javafx.application.LauncherImpl$1.run(LauncherImpl.java:97)
    ... 1 more
Caused by: java.security.AccessControlException: access denied ("java.util.PropertyPermission" "javafx.debug" "read")
    at java.security.AccessControlContext.checkPermission(Unknown Source)
    at java.security.AccessController.checkPermission(Unknown Source)
    at java.lang.SecurityManager.checkPermission(Unknown Source)
    at java.lang.SecurityManager.checkPropertyAccess(Unknown Source)
    at java.lang.System.getProperty(Unknown Source)
    at com.sun.javafx.runtime.SystemProperties.getProperty(SystemProperties.java:178)
    at com.sun.javafx.runtime.SystemProperties$1.run(SystemProperties.java:67)
    at java.security.AccessController.doPrivileged(Native Method)
    at com.sun.javafx.runtime.SystemProperties.<clinit>(SystemProperties.java:62)
    ... 4 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T04:24:43.207

显然我遇到了三个不同的问题；如果我有任何错误，请纠正我。

1.  *应该*可以部署未签名的 jar 文件，但不能。我相信这是一个已知问题。
2.  下载和安装 JavaFX 运行时不会自动使其在路径中可用。（我不知道为什么我不能运行自己的代码时可以运行示例，但我必须弄清楚这一点。）`"...\JavaFX 2.o runtime\bin"`放入我的路径可以解决我的“mat.dll not found”问题。大概将包含 libmat.so 的目录放入我的 Linux 系统的路径中也可以解决那里的问题。
3.  当我尝试不同的方法来解决问题时，我偶尔也会遇到“未签名资源”异常，即使我的 jar 文件已签名。我相信这是一个已知的 Java 问题，至少可以追溯到 1.4。解决方案是**禁用**缓存临时文件 ( `Windows control panel/java/general/settings`)。请注意，我读到的一些评论说**启用**缓存是解决问题的方法。

# dynamic - 如何在 SSIS 动态设置连接字符串？

> ID：10287039
> 
> 赞同：0
> 
> 时间：2012-04-23T19:37:12.133
> 
> 标签：dynamic, ssis, connection-string, bids

我有一个使用 xml 配置文件 (dtsConfig) 的 SSIS 项目，其中给出了到源数据库的连接字符串。配置文件存储在环境变量中。

数据需要从四个不同的数据库中提取，即现在我需要使用四个不同的连接字符串运行同一组包四次。

我可以制作四个不同的配置文件，每个配置文件都有不同的连接字符串，并在每次运行后将其更新为环境变量。这就是我现在正在做的事情，它工作正常，但我不想一直更新 env 变量。

或者，我可以使用相同的配置文件，并在每次运行后更新连接字符串。但我认为这比拥有四个不同的文件更糟糕。

我想做的是在每次运行后动态更改连接字符串。

我有一个主包，它运行我想要的一组包。所以我想在控制流中添加这个主包四次，每次运行后我需要更新连接字符串，然后在下次运行时使用。但实际上如何做到这一点？

或者对于每个包含主包并将其循环四次并在每次迭代后更改连接字符串的循环容器也很酷。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T21:56:03.793

要按顺序运行包，您可以简单地创建一个带有连接字符串的表或文件（例如，4 个数据源的 4 行）。然后，您将有一个 for each 循环，该循环将遍历连接（来自表或文件）并调用子包，将连接字符串作为变量传递给它。子包将通过包配置访问该变量。子包中的变量将指向连接的连接字符串。

# javascript - jQuery函数不适用于AJAX数据返回

> ID：10287042
> 
> 赞同：0
> 
> 时间：2012-04-23T19:37:17.630
> 
> 标签：javascript, jquery, ajax

我有一个正在编写的脚本，它使用 AJAX 将记录插入我的数据库。

完成此操作后，数据将按原样回发...

```
 Print "<li>"; 
         Print "<span class='cost'>".$bill . "</span> ";
         Print "<h4 class='bill-name'>".$$billname . "</h4> ";
         Print "<p class='bill-details'><span class='bill-category'>".$billdescription . "</span> "; 
         Print "<span class='bill-description'>". $billcolour . "</span></p>"; 
     echo "<a href='#' class='edit-bill'>edit</a> 

         <form class='bill-upd'>
         <input type='hidden' value='".$rand."' name='rand2' id='rand2'>
            <input type='hidden' value='". $billname."' name='billid' id='billid''>
            Total <input type='text' id='total' name='total' /><br />
            Bill name<input type='text' id='bill-name' name='bill-name' /><br />
           bill descriptiion <input type='text' id='bill-description' name='bill-description' /><br />
            bill colour<input type='text' id='bill-colour' name='bill-colour' />
        <input type='button' value='submit' onClick='updateBill();' />
        </form>   

         <form class='delete-bill'>
             <input type='hidden' value='".$info['rand']."' name='rand2' id='rand2'>

        <input type='button' value='delete' class='delete' />
        </form>   

         "; 
         echo "</li>"; 
```

当前页面上的表单，在同一标记中使用 jQuery 函数，例如分配给“编辑”的 slideToggle()，以显示其下方的表单。然而，我的问题是这个 jQuery 对返回的数据不起作用，我试过谷歌但无法弄清楚，有人知道吗？

* * *

用于编辑功能的 jQuery...

```
// Show bill edit information 

$('.edit-bill').click(function(){
    $(this).next('.bill-upd').slideToggle();
    return false;
                           }); 
```

* * *

AJAX

```
function insertBill()
{
    $.post('insert_bill.php', $('#insertbill').serialize(), 
        function(data) {
        $('#bills').append(data);
    });
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T20:53:26.907

或者你可以改变

```
$('.edit-bill').click(function(){
    $(this).next('.bill-upd').slideToggle();
    return false;
}); 
```

至

```
$('.edit-bill').on("click",".edit-bill",function(){
    $(this).next('.bill-upd').slideToggle();
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T20:08:19.217

改变这个

```
$('.edit-bill').click(function(){
    $(this).next('.bill-upd').slideToggle();
    return false;
}); 
```

至

```
$(document).on("click",".edit-bill",function(){
    $(this).next('.bill-upd').slideToggle();
    return false;
}); 
```

[http://api.jquery.com/on/](http://api.jquery.com/on/)

`on`将适用于当前元素和未来元素（通过 ajax 左右加载..）

on 可从 jQuery 1.7+ 开始使用。如果您使用的是以前版本的 jQuery，请考虑使用[live](http://api.jquery.com/live/)

# python - 如何从python中的测试模块导入src

> ID：10287054
> 
> 赞同：4
> 
> 时间：2012-04-23T19:38:02.250
> 
> 标签：python, unit-testing

我有一个我想测试使用的应用程序，`unittest`但我遇到了一些问题。我的目录结构如下：

```
root_dir
├── src
│   ├── cmds
│   │   ├── baz.py
│   │   ├── __init__.py
│   │   └── bar.py
│   └── foo.py
└── tests
    ├── cmds.py
    └── __init__.py 
```

我想测试`baz`和`bar`模块`cmds`，我正在尝试做

`root_dir> python2.7 -m unittest tests.cmds`

但是`tests.cmds`我无法在我的目录中导入`cmds`包。`src`

我怎样才能使这项工作？

基本上我想分别从和`root_dir`目录测试应用程序。`src``tests`

我尝试附加`src`到，但是当我从中`sys.path`导入时，我仍然从单元测试中得到一个。`cmds.baz``tests/cmds.py``AttributeError: 'module' object has no attribute 'cmds'`

编辑：我的导入和`sys.path`声明是：

```
import sys
sys.path.append('../src')
from cmds.baz import about 
```

和追溯：

```
Traceback (most recent call last):
  File "/usr/lib/python2.7/runpy.py", line 162, in _run_module_as_main
    "__main__", fname, loader, pkg_name)
  File "/usr/lib/python2.7/runpy.py", line 72, in _run_code
    exec code in run_globals
  File "/usr/lib/python2.7/unittest/__main__.py", line 12, in <module>
    main(module=None)
  File "/usr/lib/python2.7/unittest/main.py", line 94, in __init__
    self.parseArgs(argv)
  File "/usr/lib/python2.7/unittest/main.py", line 149, in parseArgs
    self.createTests()
  File "/usr/lib/python2.7/unittest/main.py", line 158, in createTests
    self.module)
  File "/usr/lib/python2.7/unittest/loader.py", line 128, in loadTestsFromNames
    suites = [self.loadTestsFromName(name, module) for name in names]
  File "/usr/lib/python2.7/unittest/loader.py", line 100, in loadTestsFromName
    parent, obj = obj, getattr(obj, part)
AttributeError: 'module' object has no attribute 'cmds' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T12:15:10.047

一个非常错误的做法是将相对路径附加到`sys.path`. 如果您想确定路径，请按如下方式进行：

```
# assuming that the code is in test's __init__.py
import os
import sys
sys.path.insert(0, os.path.abspath( os.path.join(os.path.dirname(__file__), 
                                               '../src/') ))
# now you can be sure that the project_root_dir/src comes first in sys.path 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T12:15:03.820

我认为你几乎是对的。但是当您从根目录运行测试时，`'../src'`我猜您的路径 () 是错误的。也许你可以做这样的事情：

```
import os
import sys

ROOT = os.path.join(os.path.dirname(os.path.abspath(__file__)), '..')
sys.path.append(os.path.join(ROOT, 'src'))

from cmds.baz import about 
```

# php - PHP setcookie 只能间歇性工作（版本兼容性？）

> ID：10287055
> 
> 赞同：0
> 
> 时间：2012-04-23T19:38:03.400
> 
> 标签：php, setcookie

我目前正在运行 2 个版本的 PHP。我的本地（测试）服务器有 5.3.5，而我的远程（实时）服务器有 5.2.4。这在过去引起了一些兼容性问题，但我总是能够很容易地修复它们。很快我的远程服务器将升级，所以它不会引起太多问题，但同时我仍然必须为这些愚蠢的兼容性问题提供解决方案。有人可以看看我下面的代码，如果他们发现 5.2.4 PHP 构建有任何问题，请告诉我？

```
function _cookie($name, $value) {
    $expire = strtotime('+1 month');
    $old_expire = strtotime('last day of next month');

    setcookie(
        $name,
        $value,
        $expire
    );
    var_dump($name, $value, $expire, $old_expire);
}

$date = date(
    'Y-m-d H:i:s',
    filemtime($file)
);
_cookie('user', 'bob');//works
_cookie('up2date', $date);//does not 
```

我最初将“下个月的最后一天”作为我的 cookie 到期日期，这就是它仍在`var_dump`列表中的原因。但是，该字符串在远程服务器上返回 false，导致 cookie 在会话结束时过期。即使它返回 false，它仍然会设置“用户”cookie，我可以在浏览器中查看它。但是，它不会设置“up2date”cookie。我认为这很奇怪，但认为这与`strtotime`返回 false 的函数有关。所以我试着先解决这个问题。在查阅 PHP 手册后，我确定我使用的字符串仅在 5.3 上可用。在那里，问题得到确认，易于修复。我用“+1 月”字符串替换了它，我知道它可以在 5.2 上使用。成功，我的“用户”cookie 现在应该过期了。`var_dump`证明正在调用该函数来设置它并且具有所有正确的参数，但它没有设置第二个 cookie。如果它根本不起作用，我就不会那么沮丧。这至少会告诉我我做错了什么，我可以排除它。但它要这样取笑我……我错过了什么？有没有人有任何想法？

var_dump 结果：

```
//Local server
string(4) "user"
string(3) "bob"
int(1337797496)
int(1338488696)

string(7) "up2date"
string(19) "2012-04-20 10:52:09"
int(1337797496)
int(1338488696)

//Remote server
string(4) "user"
string(3) "bob"
int(1337795061)
bool(false)

string(7) "up2date"
string(19) "2012-04-23 09:14:19"
int(1337795061)
bool(false) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T14:16:11.163

感谢 DaveRandom。他在这里值得称赞，如果他添加他的答案，我会将我的接受转换为他的。我刚刚添加了这个答案，所以我没有任何未回答的问题。

**解决方案：**我在调用第二个 cookie 之前有输出，因此无法设置它。我刚搬到我设置 cookie 的地方。

谢谢大家的建议和时间！

# c# - 如何找到point3d数组的中心？

> ID：10287056
> 
> 赞同：0
> 
> 时间：2012-04-23T19:38:04.590
> 
> 标签：c#, .net, geometry, point

我们有一个 Point3D[] - 一个点云。我们要找到它的中心。怎么做这样的事情，这里的中心是指几何平均值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T19:41:16.487

听起来你可以使用：

```
new Point3D(points.Average(p => p.X),
            points.Average(p => p.Y),
            points.Average(p => p.Z)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T19:44:35.630

可以想到很多不同的中心，你想要哪一个？

1.  所有点的边界框的中心 - 您可以通过找到最小和最大点来做到这一点，然后它们就是框的角。那么这个盒子的中心是 (min + max) / 2

2.  所有点的质心，这与上面的中心不同，请参见[此处](http://en.wikipedia.org/wiki/Centroid)。这个，顺便说一句，是上面 Jon Skeet 给出的解决方案。

# extjs4 - Extjs 4 cellEditor 插件 Hanlde 编辑事件

> ID：10287059
> 
> 赞同：0
> 
> 时间：2012-04-23T19:38:10.890
> 
> 标签：extjs4, cell, editing

有带有复选框列的 Ext 网格面板。目的是处理复选框单元格单击（单击哪个单元格和值）

```
Ext.define('App.Model.Users', {
    extend: 'Ext.data.Model',    
    fields: ['Id', 'Login', 'Fio', 'Organization', 'Locked']
});    

    var usrstore = Ext.create('App.Data.Lstore', {
                model: 'App.Model.Users',        
                autoLoad: false,
                proxy: {
                    type: 'ajax',
                    url: '/Admin/GetUsers'
                }            
            });    

    var cellEditing = Ext.create('Ext.grid.plugin.CellEditing', {
                clicksToEdit: 1,
                listeners: { edit: function(editor, e){console.log('gf')} }
            });

            var usrgrid = Ext.create('Ext.grid.Panel', {        
                height: 600,
                store: usrstore,        
                columns: [
                        Ext.create('Ext.grid.RowNumberer'),
                        { dataIndex: 'Login', width: 300, text: 'Логин' },
                        { dataIndex: 'Fio', flex: 1, width: 250, text: 'Фамилия И. О.' },
                        { dataIndex: 'Organization', flex: 2, width: 200, text: 'Организация' },
                        { dataIndex: 'Locked', width: 120, text: 'Блокировка', xtype: 'checkcolumn', align: 'center'}]

            }); 
```

但是插件没有编辑事件来..

需要什么配置网格插件才能开始工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T02:12:16.273

您需要在 plugins:[] 配置中设置“cellEditing”。您可能还想在要编辑的每一列上指定和编辑器（文本、日期、数字等）。有关这些内容，请参见 sencha 示例。复选框也是行选择器而不是单元格选择器 - 只是需要牢记。

# regex - 批处理正则表达式在文件夹和子文件夹内容上查找和替换

> ID：10287060
> 
> 赞同：1
> 
> 时间：2012-04-23T19:38:11.557
> 
> 标签：regex, osx-snow-leopard, replace, batch-processing

我有一个文件夹，其中包含包含文本文档（数百个）的子文件夹。文本文档都需要查找和替换。我用来查找文本的正则表达式是：

```
^([A-Z])[\r\n]+(\w+)\b 
```

这被替换为：

```
$1$2 
```

如何在具有子文件夹的文件夹上批量处理此查找和替换？

我正在使用 mac (osx 10.6.8)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T20:19:39.930

您也可以为此使用 sed：

```
cd /path/to/files  # make sure you are in the right directory
find . -type f -exec sed -i.bak 's/^([A-Z])[\r\n]+(\w+)\b/$1$2/g' {} \; 
```

**编辑**：我刚刚意识到上面是一个 Textmate 搜索/替换字符串。对于 sed，您必须使用：

```
find . -type f -exec sed -i.bak 's/^([A-Z])[\r\n]+(\w+)\b/\1\2/g' {} \; 
```

这会备份所有文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T19:52:45.163

`find`您可以使用and来做到这一点`perl`：

`find ./* -exec perl -p -i -e 's/^([A-Z])[\r\n]+(\w+)\b/$1$2/g' {} \;`

*警告*：未经测试:)

# prolog - setof/3 和 NAF

> ID：10287061
> 
> 赞同：0
> 
> 时间：2012-04-23T19:38:18.077
> 
> 标签：prolog, prolog-setof

所以我有一组事实：

```
course(cs61,  "intro to cs")
...
course(cs62b, "data structure")
...
grade(adam,       cs61, spring11, "A")
...
grade(chrisitian, cs61, fall2010, "A-") 
```

我需要定义一个谓词`good_standing(Student)`来确定他是否参加`Student`了`A`他参加的每一堂课。我必须使用两种不同的方法：

1.  利用`setof/3`
2.  使用 NAF

1日。我试图弄清楚 get `Result_list`：从他参加的每节课中获得 A 的一组学生。然后调用`member(Student, Result_list)`. 但我不知道要得到什么，`Result_list`因为语法对我来说有点奇怪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T20:27:44.190

1) 对于 NAF 解决方案，您应该记住，成绩好的学生是没有成绩低于 A 的学生，即他/她没有参加任何课程且成绩低于 A 的学生。我们还要求此人至少参加一门课程。

```
good_standing(Student) :- grade(Student, _,_,_), 
                          \+ (grade(Student, Course, _, Grade), 
                              lower(Grade,"A")). 
```

低/2 定义等级之间的关系：

```
lower("A-","A").
lower("B","A").
... 
```

如果学生每门课程只获得一个成绩，则上述解决方案有效。

2) 对于 setof 解决方案，您可以找到每个学生的所有成绩并检查它们是否为 A。

```
grade(Student, Grade) :- grade(Student, _,_,Grade).
good_standing(Student) :- setof(Grade, grade(Student,Grade), ["A"]). 
```

或者，正如**false**所建议的，我们可以在 setof 中明确存在量化：

```
good_standing(Student) :- setof(Grade, 
                                Course^Period^grade(Student,Course,Period,Grade),
                                ["A"]). 
```

# php - MySQL 数据库未使用 PHP 更新

> ID：10287068
> 
> 赞同：0
> 
> 时间：2012-04-23T19:38:55.847
> 
> 标签：php, mysql

很简单，我的 MySQL 数据库在提交表单时没有更新。整个文件的代码可以在下面看到，谢谢： 请注意 checkuserlog.php 文件确实包含一个连接到 MySQL 数据库的文件...

```
<?php
include_once("../scripts/checkuserlog.php");
?>
<?php 
if (!isset($_SESSION['id']) || !isset($_SESSION['username'])){ 
   echo 'Please <a href="../login.php">log in</a> to view';
   exit(); 
}

// set variables
$id = $logOptions_id;
$school = "";
$form_teacher = "";
$room = "";
$success_msg = "";
$error_msg = "";
$errorMsg = "";
$sch_website = "";
$sch_phone = "";
$sch_email = "";
$notes = ""; 
// end variables and begin parsing
if (isset($_POST['parse_var'])){

if ($_POST['parse_var'] == "allstuff"){
    $form_teacher = strip_tags($_POST['form_teacher']);
    $form_teacher = str_replace("'", "&#39;", $form_teacher);
    $form_teacher = str_replace("`", "&#39;", $form_teacher);
    $form_teacher = mysql_real_escape_string($form_teacher);
    $school = strip_tags($_POST['school']);
    $school = str_replace("'", "&#39;", $school);
    $school = str_replace("`", "&#39;", $school);
    $school = mysql_real_escape_string($school);
    $room = strip_tags($_POST['room']);
    $room = str_replace("'", "&#39;", $room);
    $room = str_replace("`", "&#39;", $room);
    $room = mysql_real_escape_string($room);
    $sch_website = strip_tags($_POST['sch_website']);
    $sch_website = str_replace("'", "&#39;", $sch_website);
    $sch_website = str_replace("`", "&#39;", $sch_website);
    $sch_website = mysql_real_escape_string($sch_website); 
    $sch_phone = strip_tags($_POST['sch_phone']);
    $sch_phone = str_replace("'", "&#39;", $sch_phone);
    $sch_phone = str_replace("`", "&#39;", $sch_phone);
    $sch_phone = mysql_real_escape_string($sch_phone);
    $sch_email = strip_tags($_POST['sch_email']);
    $sch_email = str_replace("'", "&#39;", $sch_email);
    $sch_email = str_replace("`", "&#39;", $sch_email);
    $sch_email = mysql_real_escape_string($sch_email); 
    $notes = strip_tags($_POST['pln_notes']);
    $notes = str_replace("'", "&#39;", $notes);
    $notes = str_replace("`", "&#39;", $notes);
    $notes = mysql_real_escape_string($notes);

    $sqlUpdate = mysql_query("UPDATE table SET form_teacher='$form_teacher', school='$school', form_room='$room', sch_website='$sch_website', sch_phone='$sch_phone', sch_email='$sch_email' pln_notes='$notes' WHERE mem_id='$id' LIMIT 1");
    if ($sqlUpdate){
        $success_msg = '<img src="images/round_success.png" width="20" height="20" alt="Success" />We successfully updated your personal information.';
    } else {
        $error_msg = '<img src="images/round_error.png" width="20" height="20" alt="Failure" /> ERROR: Problems arose during the information exchange, please try again later.</font>';
    }
}
}
// end parsing
// get existing data
$sql_default = mysql_query("SELECT * FROM table WHERE mem_id='$id'");

while($row = mysql_fetch_array($sql_default)){ 

    $school = $row["school"];
    $form_teacher = $row["form_teacher"];
    $room = $row["form_room"];  
    $sch_website = $row["sch_website"];
    $sch_phone = $row["sch_phone"];
    $sch_email = $row["sch_email"];
    $notes = $row["pln_notes"];
    $notes = str_replace("<br />", "", $notes);
    $notes = stripslashes($notes);

} 
// end get data
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<meta http-equiv="X-UA-Compatible" content="IE=edge;chrome=1">
<title>Edit Your Planner</title>
<link href="../style/main.css" rel="stylesheet" type="text/css" />
<link rel="icon" href="../favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="../favicon.ico" type="image/x-icon" />
</head>
<body>
<?php include_once "../header_template.php"; ?>
<div id="maincont">
<h1>Edit your Planner <span style="float:right;margin-right:270px;"><a href="planner.php" class="medium awesome green">View Planner</a></span></h1>
<table border="0" width="950">
<tr><td width="680" valign="top">
<h2><?php echo $success_msg; ?><font color="#FF0000"><?php echo $errorMsg; ?></font></h2>
<table width="100%" border="0">
<tr><td width="50%" valign="top">
<form name="editplanner" method="post" action="planner_edit.php">
<p><strong>School:</strong><br /><input type="text" name="school" id="school" placeholder="What's the name of your school?" value="<?php echo $school; ?>" class="formfield" size="45"></p>
<p><strong>Form Teacher:</strong><br /><input type="text" name="form_teacher" id="form_teacher" value="<?php echo $form_teacher; ?>" placeholder="Who is you form/class teacher?" class="formfield" size="45"></p>
<p><strong>Form Room:</strong><br /><input type="text" name="room" id="room" class="formfield" value="<?php echo $room; ?>" placeholder="Room number or room name" size="45"></p>
<p><strong>School Website:</strong><br /><input type="text" name="sch_website" id="sch_website" class="formfield" value="<?php echo $sch_website; ?>" placeholder="School website URL here" size="45"></p>
<p><strong>Phone:</strong><br /><input type="text" name="sch_phone" id="sch_phone" class="formfield" value="<?php echo $sch_phone; ?>" placeholder="School phone number" size="45"></p>
<p><strong>Email:</strong><br /><input type="text" name="sch_email" id="sch_email" class="formfield" value="<?php echo $sch_email; ?>" placeholder="School email address" size="45"></p>
</td>
<td width="50%" valign="top">
<h2>Notes</h2>
<textarea name="pln_notes" id="pln_notes" placeholder="Add notes to your planner here..." style="width:340px;height:267px;"><?php echo $notes; ?></textarea>
</td></tr></table>
<input name="parse_var" type="hidden" value="allstuff" />
<input type="submit" name="updateBtn2" class="formfield" value="Update!" /></form>
<hr />
</td>
<td width="270" valign="top"><?php include_once "../temps/sidebar.php"; ?>
</td></tr></table>
</div>
<?php include_once "../footer_template.php"; ?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T19:42:46.493

您的查询看起来不对，您在 pln_notes= 之前错过了一个逗号，并且更新查询不需要限制 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T19:45:49.840

如果您的 ID 是整数/您在第一个 SQL 查询中的代码，请看一下这个：

```
$sqlUpdate = mysql_query("UPDATE table SET form_teacher='$form_teacher', school='$school', form_room='$room', sch_website='$sch_website', sch_phone='$sch_phone', sch_email='$sch_email' pln_notes='$notes' WHERE mem_id='$id' LIMIT 1"); 
```

不正确（对我来说）：

```
mem_id='$id' 
```

因为如果`mem_id`是`Integer`请使用：

```
mem_id=$id 
```

第二个 SQL 查询也是如此：

```
$sql_default = mysql_query("SELECT * FROM table WHERE mem_id='$id'"); 
```

更正如果`mem_id`是`Integer`：

```
mem_id=$id 
```

希望这能解决您的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T19:48:54.760

是的，这里的其他答案是正确的。您的更新语句缺少要更新的最后一列的逗号。

但是，为了将来参考，您可以通过使用在查询中实际记录错误的实用函数来跟踪 SQL 查询错误。下面是一个例子。

```
function db_query($query) {
    $result = mysql_query($query);

    $error_text = mysql_error();

    if ($error_text) {
        trigger_error('SQL ERROR: ' . $error_text, E_USER_WARNING);
    }

    return $result;
} 
```

这应该可以帮助您在将来跟踪与 SQL 相关的错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T19:42:04.850

它看起来不像 $logOptions_id 被设置在任何地方，所以 $id 可能为空

此外，您的更新查询在“sch_email”之后缺少逗号：

```
$sqlUpdate = mysql_query("UPDATE table SET form_teacher='$form_teacher', school='$school', form_room='$room', sch_website='$sch_website', sch_phone='$sch_phone', sch_email='$sch_email', pln_notes='$notes' WHERE mem_id='$id' LIMIT 1"); 
```

# javascript - Javascript：如何从 HTML 文件输入中获取 .tgz MIME 类型？

> ID：10287072
> 
> 赞同：0
> 
> 时间：2012-04-23T19:39:14.867
> 
> 标签：javascript

我可以通过检查 HTML 文件元素中的文件来获取大多数文件 MIME 类型，但是在选择 .tgz 文件时，我没有得到类型。

这是从 HTML 文件输入中选择文件时显示文件类型的 jsfiddle：http: [//jsfiddle.net/chrisabrams/cTJKf/](http://jsfiddle.net/chrisabrams/cTJKf/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T19:54:00.040

根据[规范](http://dev.w3.org/2006/webapi/FileAPI/#dfn-type)，由浏览器尝试确定内容类型，如果失败，它应该返回一个空字符串。

> **类型**
> 
> 小写的 ASCII 编码字符串，表示 的媒体类型`Blob`，表示为 RFC2046 MIME 类型 [ [RFC2046](http://dev.w3.org/2006/webapi/FileAPI/#RFC2046) ]。获取时，符合要求的用户代理必须返回 的 MIME 类型（`Blob`如果已知）。**如果符合标准的用户代理无法确定 的媒体类型`Blob`，它们必须返回空字符串。**[如果字符串与 RFC 2616 [ HTTP](http://dev.w3.org/2006/webapi/FileAPI/#HTTP) ]`media-type`的第 3.7 节“媒体类型”中定义的令牌匹配，则该字符串是有效的 MIME 类型。

因此，您使用的任何浏览器都无法识别**.tgz**文件是什么——但是，这可能因浏览器和操作系统而异。

我在 Linux 上使用 Opera，它可以识别**.tgz**但 - 例如 - 不能识别**.xcf**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T19:55:11.557

它可能取决于浏览器。它在 Opera 中对我有用，并且给出了`application/x-gzip`，但在其他任何东西中都没有给出任何东西。您可以使用 手动检查它`e.target.files[0].value`。

# wiki - Jarque -Bera 测试解释

> ID：10287073
> 
> 赞同：0
> 
> 时间：2012-04-23T19:39:15.457
> 
> 标签：wiki

我已经运行了 Jarque -Bera 测试并获得了以下结果，

JB=11.62 和 p=1。

我无法解释它们。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T19:01:50.470

如果您计算的 JB 大于 JB 关键（您在表格中找到它，但您必须知道显着性水平）而不是拒绝 H0，否则您接受 H0。您还必须考虑 p 值。通常如果 JBcalculated 我们接受 H0（残差是正态分布的）。希望这对你有帮助

# javascript - 如何为悬停处理程序中的函数添加动画？

> ID：10287074
> 
> 赞同：0
> 
> 时间：2012-04-23T19:39:20.047
> 
> 标签：javascript, jquery, hover, jquery-animate, raphael

我有一个使用拉斐尔的饼图动画。对于每个段，我添加了一个悬停功能，以便每个段的简要描述出现在底部。我不知道如何让描述淡入。这里很难解释，但你可以看到我的代码

[http://jsfiddle.net/WJMaU/1/](http://jsfiddle.net/WJMaU/1/)阅读我的评论，看看我在说什么。

感谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T21:23:35.930

你似乎在那里犯了一个错误：

```
this.label.animate({opacity:0},0); 
```

为什么 0 而不是 400 像其他的一样。400对我来说很好：

[http://jsfiddle.net/mihaifm/vvKtU/2/](http://jsfiddle.net/mihaifm/vvKtU/2/)

# android - 绘制到 LinearLayout

> ID：10287076
> 
> 赞同：0
> 
> 时间：2012-04-23T19:39:32.960
> 
> 标签：android, image, android-linearlayout, tablerow

我正在尝试将图像绘制到 LinearLayout 或 TableRow 中，但我已经有一个 XML 文件（我想在一些 LinearLayout 中绘制）。我不知道该怎么做。我正在尝试这个：

```
 TableRow mytable = (TableRow) findViewById(R.id.tablatexto);
    ImageView myImage = (ImageView) findViewById(R.drawable.personaje1);
    mytable.addView(myImage); 
```

谢谢

编辑：我想更好地解释它。我想要的是根据线程创建动画绘制图像。所以，我想从 Activity 中绘制到 LinearLayout 中的一些内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T19:53:44.470

如果您不想在容器布局中添加动态布局，那么您可以使用[`containerLayout.addView(childView);`](http://developer.android.com/reference/android/view/ViewGroup.html#addView%28android.view.View,%20int,%20android.view.ViewGroup.LayoutParams%29)

childView 是您可以使用代码创建的动态布局，也可以使用[`LayoutInflater`](http://developer.android.com/reference/android/view/LayoutInflater.html)类获取布局的视图。

# c# - 将项目导出为库，找不到资源

> ID：10287080
> 
> 赞同：0
> 
> 时间：2012-04-23T19:39:50.000
> 
> 标签：c#, dll, icons

我导出了一个项目，它使用一些文件作为图标，作为一个类库。现在，当我在另一个项目中使用该库时，无法找到这些图标。如何以即使在使用该库的项目中也可以使用它们的方式导出它？

谢谢和问候， 罗希特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T19:43:58.263

将图标添加到库项目并将它们标记为`Embedded Resource`文件。然后使用`Assembly.GetManifestResourceStream(...)`函数读取它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T19:45:03.707

如果您使用资源设计器创建资源，请打开设计器并将“访问修饰符”组合从“内部”更改为“公共”。

# ms-access - 查找调用依赖对象的位置

> ID：10287082
> 
> 赞同：2
> 
> 时间：2012-04-23T19:40:00.243
> 
> 标签：ms-access

我删除了用于在我的数据库中填充表单的表中的一列。删除它并在加载表单时从表单本身中删除框后，它会要求该字段的参数。

我已经更新了记录源，希望它能解决问题，但它没有。有没有办法我可以看到什么叫这个领域？我查看了 VB 代码和所有记录源。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T19:58:17.157

而不是遍历控件并检查代码，您可以：

```
 Application.SaveAsText acForm, "MyForm", "z:\docs\form.txt" 
```

然后，您可以搜索相关字段的文本。

# facebook - ui.methods permissions.request 在共享 url

> ID：10287083
> 
> 赞同：0
> 
> 时间：2012-04-23T19:40:00.447
> 
> 标签：facebook, user-interface

今天早些时候，我注意到一个朋友分享了一个让我好奇的 Viddy 视频。当我单击共享链接时，我立即在“下一步/登录”按钮（观看电影）上获得了带有自定义文本的授权请求对话框。触发该行为的此共享的 URL 如下：

[http://www.facebook.com/connect/uiserver.php](http://www.facebook.com/) ? app_id=125119214225766 method=permissions.request redirect_uri=http%3A%2F%2Fwww.viddy.com%2Fvideo%2F2f44f934-bc2f-419f-b462-c46f261744ee response_type=code display=async perms=email%2Cpublish_actions auth_referral=1 fb_private_mode_enc=ASJbi0_rc8L9GhOWGzXF1eZQgqGW6WhIquDadvKiRi8uZRozkFn937vhtfsR_Krg8iM

我环顾四周，试图找到这个功能的文档。我应该如何生成这样的共享 URL？我在 fbdevwiki.com 上找到了一些文档，但这并没有涵盖大部分论点。如果有人能指导我一些文件，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T21:33:39.420

这是一个使用[Authenticated Referrals](https://developers.facebook.com/docs/opengraph/authentication/#referrals)的应用程序，因此会提示用户直接在 Facebook 的 chrome 上授予权限，而不是在未经身份验证的情况下登陆您的应用程序，然后跳转到身份验证对话框并再次返回应用程序。

身份验证对话框中的“观看视频”文本是因为此应用正在[Open Graph API中发布“观看”操作](https://developers.facebook.com/docs/opengraph/video/)

{edit}“观看视频”链接似乎只对预先选择的合作伙伴显示，并且不适用于所有视频应用{/edit}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T19:46:10.120

您看到的生成的 url 是由应用程序生成的，您可以通过创建自己的应用程序并授予其权限来实现这一点。

你可以先去[Facebook 开发者](http://developers.facebook.com/docs/)

# javascript - 使用javascript的表单中的两个下拉选项列表

> ID：10287088
> 
> 赞同：1
> 
> 时间：2012-04-23T19:40:20.710
> 
> 标签：javascript, jquery, forms, drop-down-menu, options

我对表单中的两个下拉列表（选项）有疑问。
他们都单独工作，但在一起他们根本不工作。就好像他们在互相抵消什么的。
如果有人可以帮助我，那么我将不胜感激。这是有问题的代码......

JS fiddle - [http://jsfiddle.net/wemdragon/3Uz/](http://jsfiddle.net/wemdragon/3Uz/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T21:29:18.853

有几个问题。首先，`.val()`获取一个字符串而不是一个 int，因此`if ('0')`将返回 true。因此，`options 2!`无论您为第二个选项选择了什么，都会发出。您需要更新该条件以进行检查`if (second.val() != 0)`（这将强制 '0' 和 0 并返回 true - 您还可以更具体或简单地使用空字符串作为`value`替代，这可能是首选）。

其次，您的计算代码永远不会到达，因为它`else`在 s 链中`if`涵盖了所有可能的选择组合。您需要一些其他标志来检查是否应该完成计算，或者将其设置为在进行有效选择时调用的函数。

# sql-server - 更新计算字段的 ADO 记录集

> ID：10287089
> 
> 赞同：0
> 
> 时间：2012-04-23T19:40:20.673
> 
> 标签：sql-server, vb6, ado, recordset

我将以下 sql 用于针对 VB6 中的 SQLServer 后端的 ADO 记录集：

```
select c.name, taxid=
   case when exists(select 1 from sometable where fld='abc') 
   then c.SSN else null end 
```

当我尝试在本地更新记录集中的一行中的出租车字段时，ADO 抱怨错误“多步操作生成错误。检查每个状态值。” 我认为taxid 字段来自计算字段而不是原始表列这一事实困扰了它。出于我的目的，我永远不会将这些更改持久化回数据库，因此我正在寻找一种方法来告诉 ADO 无意持久化更改，以便它允许我在本地更改数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T03:21:08.413

我认为@HK1 的建议是一个很好的建议，尽管我不确定您更改记录集中任何值的能力会发生什么变化，无论您尝试更新的列是否已计算。自从我玩经典 ADO 以来已经有很长时间了，但如果记录集断开连接，它可能会在那时变为只读状态。

但是，如果您对使用记录集执行更新不感兴趣，并且需要在本地更改值，也许您应该考虑先将结果存储在本地数组中？例如，这样您可以最​​小化记录集的锁定和游标选项，并立即关闭记录集并释放这些资源。

```
rs.Open cmd, conn, adOpenForwardOnly, adLockReadOnly

Dim MyArray
MyArray = rs.GetRows()

rs.Close: set rs = nothing 
```

现在你可以随心所欲地操作`MyArray`......

# c# - ASP.NET HttpHandler 映射到 Robots.txt 而无需访问 IIS

> ID：10287094
> 
> 赞同：0
> 
> 时间：2012-04-23T19:40:52.357
> 
> 标签：c#, .net, asp.net-mvc, iis, httphandler

有没有一种简单的方法可以仅使用 web.config 将 /robots.txt 映射到 HttpHandler？我已经尝试了对 httpHandlers 标记的各种更改，但没有任何改变。所有示例都需要修改我无法访问的 IIS 站点属性。

有没有办法只使用 web.config 来映射：

```
<add verb="*" path="/robots.txt" type="Site.RobotsHandler" /> 
```

正确吗？

我目前正在使用 .NET 3.5 和 MVC2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T19:46:28.703

如果您使用 MVC，为什么不创建一个到 Action 的路由并在那里处理它，而不是创建另一个处理程序？

```
routes.MapRoute("robots.txt", "robots.txt", new { controller = "Home", action = "Robots" }); 
```

**根据评论进行编辑**

```
routes.IgnoreRoute("{file}.txt", new { pathInfo = new RobotsIgnore() });

public class RobotsIgnore : IRouteConstraint
{
    public bool Match(HttpContextBase httpContext, Route route, string parameterName, RouteValueDictionary values, RouteDirection routeDirection)
    {
        return values[parameterName].ToString().ToLowerInvariant() != "robots.txt";
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T23:35:23.643

根据对其他答案的一些评论，我猜你正在使用 iis6？据我所知，不可能通过 Web 配置更改 iis6 处理程序映射。如果不更改默认映射，.txt 文件将永远无法到达 asp.net。

# compilation - 在没有 Qt 源代码的情况下编译 Qt3D

> ID：10287097
> 
> 赞同：0
> 
> 时间：2012-04-23T19:40:56.877
> 
> 标签：compilation, qt4, qt3d

我在使用 Qt3D 时遇到了困难。我无法设法从源代码编译它。如果可能的话，我想编译 Qt3D 而不编译 Qt 本身。它可以链接到已经编译的 Qt 吗？

*   操作系统：Linux Ubuntu 11.10（oneiric）x86_64
*   Qt版本：4.7.4
*   制作输出：

    cp：无法创建常规文件`/usr/include/qt4/Qt3D/qt3dglobal.h': No such file or directory make[2]: *** [/usr/include/qt4/Qt3D/qt3dglobal.h] Error 1 make[1]: *** [sub-threed-make_default-ordered] Error 2 make: *** [sub-src-make_default-ordered] Error 2 global/qt3dglobal.h /usr/include/qt4/Qt3D/qt3dglobal.h make[2]: Leaving directory`/home/soroush/programs/programming/libraries/qt3d-1.0-src/src/threed' make[1]：离开目录`/home/soroush/programs/programming/libraries/qt3d-1.0-源/源'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T15:03:45.953

我的解决方案是创建`/usr/include/qt4/Qt3D`文件夹。

只需在终端窗口中输入

```
sudo mkdir /usr/include/qt4/Qt3D 
```

这解决了我的问题。

此外，您可能需要输入

```
sudo mkdir /usr/include/qt4/QtQuick3D 
```

创建`QtQuick3D`目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T18:08:39.110

确保`qt-devel`为 Qt 安装了（或类似的）开发包。仅限库的默认包没有标头，也没有开发工具（moc、uic、qmake 等）。

唉，您的问题似乎是您试图将其安装到默认前缀`/usr`而不运行`sudo make install`. 我建议您`mkdir ~/qt3d && configure --prefix=~/qt3d`，以便将其安装在您的主目录中。

# java - webservice应用程序如何知道soap对特定方法的调用，而不在soap消息中使用操作名称？

> ID：10287100
> 
> 赞同：1
> 
> 时间：2012-04-23T19:41:15.720
> 
> 标签：java, .net, web-services, jakarta-ee, soap

myMethod 的文档/文字**WSDL**

```
<types>
    <schema>
        <element name="xElement" type="xsd:int"/>
        <element name="yElement" type="xsd:float"/>
    </schema>
</types>

<message name="myMethodRequest">
    <part name="x" element="xElement"/>
    <part name="y" element="yElement"/>
</message>
<message name="empty"/>

<portType name="PT">
    <operation name="myMethod">
        <input message="myMethodRequest"/>
        <output message="empty"/>
    </operation>
</portType>

<binding .../> 
```

myMethod 的文档/文字**SOAP 消息**

```
<soap:envelope>
    <soap:body>
        <xElement>5</xElement>
        <yElement>5.0</yElement>
    </soap:body>
</soap:envelope> 
```

Web 服务引擎如何知道特定方法的上述肥皂消息？

服务器应用程序如何知道soap消息正在调用哪个方法？

[http://www.ibm.com/developerworks/webservices/library/ws-whichwsdl/](http://www.ibm.com/developerworks/webservices/library/ws-whichwsdl/)链接供参考

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-24T16:33:09.117

服务器将根据参数类型识别方法并使用@Webmethod 进行注释。如果有两个类似的方法，服务器将调用 wsdl 中指定的最后一个方法。

# c++ - 安全 LDAP 身份验证

> ID：10287104
> 
> 赞同：0
> 
> 时间：2012-04-23T19:41:27.797
> 
> 标签：c++, windows, ldap

我想使用 OpenLDAP 服务器从 C++ 客户端应用程序安全地进行身份验证，例如，使用 SSL/TLS 或 SASL。我使用的是 Windows 7 64 位操作系统。

我试过这个例子：

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa366105%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366105%28v=vs.85%29.aspx)

但它在此函数调用中失败： ULONG ldapConn = ldap_connect(pLdapConnection, NULL);

ldap_connect 的返回码是 81（十进制）。

我已经从这里将 OpenLDAP 安装到我的计算机上：

[http://www.userbooster.de/en/download/openldap-for-windows.aspx](http://www.userbooster.de/en/download/openldap-for-windows.aspx)

我使用 127.0.0.1 (localhost) 作为主机。

OpenLDAP 调试日志如下所示：
TLS 跟踪：SSL_accept：SSLv3 刷新数据
tls_read：want=5 错误=未知错误
TLS 跟踪：SSL_accept：SSLv3 读取客户端证书中的错误 TLS 跟踪：SSL_accept：SSLv3 读取客户端证书
中的错误
守护进程： 1 个描述符
守护进程上的活动：唤醒
守护进程：WSselect：listen=2 active_threads=0 tvp=NULL
守护进程：WSselect：listen=3 active_threads=0 tvp=NULL

根据日志，这似乎与证书有关。OpenLDAP 配置是安装包中的默认配置，例如：

TLSVerifyClient 从不
TLSCipherSuite HIGH:MEDIUM:-SSLv2
TLSCertificateFile ./secure/certs/server.pem
TLSCertificateKeyFile ./secure/certs/server.pem
TLSCACertificateFile ./secure/certs/server.pem

有人知道为什么 ldap_connect 失败吗？

或者有人知道有关此主题的有用教程或 C++ 代码示例吗？我特别不清楚客户端证书如何链接到客户端代码。换句话说，它是如何在客户端 C++ 代码中定义的，在身份验证期间获取证书的位置。

BR，托莫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T21:17:09.397

找到这篇文章：[http](http://www.openldap.org/lists/openldap-technical/200903/msg00061.html) ://www.openldap.org/lists/openldap-technical/200903/msg00061.html 。看起来您可能想要将 TLSCipherSuite HIGH:MEDIUM:-SSLv2 更改为 TLSCipherSuite HIGH:MEDIUM:+SSLv2。

# sql-server - 如何编写 SQL Server 函数以从多个查询的结果中返回单个值

> ID：10287105
> 
> 赞同：2
> 
> 时间：2012-04-23T19:41:29.783
> 
> 标签：sql-server

我有三个表，其中包含与作业相关的数据。一个表是主表，另外两个是事务性的并且与主表相关。

```
CREATE TABLE Job
(JobNo varchar(10))

CREATE TABLE Trans1
(JobNo varchar(10), TrxDate datetime, TrxStatus int)

CREATE TABLE Trans2
(JobNo varchar(10), TrxDate datetime, TrxStatus int) 
```

该`Job`表将始终为每个作业一行。`Trans1`并且`Trans2`每个作业将没有、一行或多行。

对于给定的工作，我需要能够编写一个查询，该查询将返回给`TrxStatus`定日期的列值。

假设`Trans1`有

```
Job     TrxDate    TrxStatus
AB123   2/1/2012     10
AB123   3/1/2012     20
AB123   3/31/2021    20 
```

假设`Trans2`有

```
Job    TrxDate   TrxStatus
AB123  3/15/2012   10 
```

我需要能够创建一个可以查询的函数（或有一个解决方案）：

```
SELECT JobNo, GetStatusAt(JobNo, '3/1/2012') FROM Job 
```

并让它返回 20。

```
SELECT JobNo, GetStatusAt(JobNo, '3/17/2012') FROM Job 
```

并让它返回 10。

```
SELECT JobNo, GetStatusAt(JobNo, '4/1/2012') FROM Job 
```

并让它返回 20。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T19:55:30.663

```
SELECT  TOP 1
        trxStatus
FROM    (
        (
        SELECT  TOP 1
                *
        FROM    trans1
        WHERE   jobNo = @job
                AND trxDate <= @trxDate
        ORDER BY
                trxDate DESC
        )
        UNION ALL
        (
        SELECT  TOP 1
                *
        FROM    trans2
        WHERE   jobNo = @job
                AND trxDate <= @trxDate
        ORDER BY
                trxDate DESC
        )
        ) q
ORDER BY
        trxDate DESC 
```

# jsf-2 - 当为不同的组件指定进程属性时，PrimeFaces Ajax 侦听器未执行

> ID：10287115
> 
> 赞同：9
> 
> 时间：2012-04-23T19:41:56.383
> 
> 标签：jsf-2, primefaces

当我指定标签的`process`属性时`p:ajax`，不执行侦听器。如果我省略该`process`属性，则按预期调用侦听器。

这是视图片段：

```
<p:messages id="messages" />
<h:inputText id="inputToProcess" value="#{controller.inputToProcess}" />
<p:selectBooleanCheckbox id="testCheckbox" >
  <p:ajax event="change" process="inputToProcess"
    update="messages @this inputToUpdate"
    listener="#{controller.processChecked}" />
</p:selectBooleanCheckbox>
<h:inputText id="inputToUpdate" value="#{controller.inputToUpdate}" /> 
```

和控制器：

```
@javax.faces.bean.ManagedBean
@javax.faces.bean.ViewScoped
public class Controller implements Serializable {
  private String inputToProcess;
  private String inputToUpdate;
  //getters and setters

  public void processChecked(javax.faces.AjaxBehaviorEvent e) {
    // doing some stuff here
  }
} 
```

我使用*PhaseId*`phaseListener`将 a 附加到视图，这就是我观察到的。`ANY_PHASE`

 *当我指定`process`属性时，*inputToProcess*输入的值在更新模型阶段成功设置为控制器（不发生异常）。然后执行`Invoke Application`and`Render Response`阶段，但不调用任何侦听器。我注意到的一件事是最后没有设置复选框。但是，没有转换或验证错误，因为正如我所说，`Update Model`and`Invoke Application`阶段已执行。

如果我省略`process`属性，这是我看到的：通常在`Invoke Application`阶段期间调用侦听器（因为`immediate`默认情况下为 false），然后执行 `Render Response。复选框设置成功。

这种行为有什么解释吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-23T20:24:27.590

乍一看应该可以正常工作。至少，在使用标准 JSF 组件时，它可以正常工作。我敢打赌它是 PrimeFaces 的一个错误或“功能”，当动作组件不包含在`process`. 添加`@this`到`process`应该解决它。考虑向 PrimeFaces 人员发布问题报告。

此外，我宁愿使用`event="valueChange"`or`event="click"`代替`event="change"`或完全删除`event`它，它已经默认为正确的值（`valueChange`它将呈现`onclick`在复选框和单选按钮组件中）。对于复选框和单选按钮，该`change`事件在 MSIE 中的工作方式不同。它仅在第二次单击时触发。您不想依赖浏览器。

* * *

根据您的评论：

> *标准 JSF 复选框和 ajax 组件的问题在于，在流程验证阶段调用了侦听器，但我需要先更新模型！*

这不是真的。可能您正在使用`valueChangeListener`而不是`<f:ajax listener>`将其与另一个混淆。始终在`<f:ajax listener>`调用操作阶段调用。*

# mysql - xslt-processor 只返回一小部分请求的 /matched 标记

> ID：10287116
> 
> 赞同：0
> 
> 时间：2012-04-23T19:41:59.130
> 
> 标签：mysql, xml, parsing, xslt, openstreetmap

我有一个非常大的 xml 文件——它来自地理信息学领域。我从一个德国子站点或 OpenStreetMap-Project 获得它：Geograpical-Engineering-site，它提供了某个区域的 OpenStreetMap 的每周快照：我从这里[http://ftp5.gwdg.de获取了 Germany.osm.bz2 /pub/misc/openstreetmap/download.geofabrik.de/](http://ftp5.gwdg.de/pub/misc/openstreetmap/download.geofabrik.de/)

为了用 xslt 做一些测试，我想运行一个请求来找出某个实体——让我们以餐馆为例。我们想找出该地区所有的餐馆。

现在我们可以直接在我们下载的 bz2 压缩文件上运行它——例如，如果我们使用以下代码：

```
bzcat germany.osm.bz2 | xsltproc restaurants.xslt - > restaurants,csv 
```

好吧，我用 xml_split 拆分了文件——这是来自 CPAN 的一个很棒的 perl 模块。

**问题：**使用以下 xslt 处理器，我只得到不好的结果 - 解析的文件没有得到足够的解析，当我在 xml 文件上运行代码时，我只得到一小部分信息。查看 xslt 处理器 - 及以下 - 如果你想检查它，我运行并解析文件中的一个小数据块 - 只需获取小数据集 - 注意它是一个拆分文件

在这里你可以得到它：[https ://rapidshare.com/#!download|643p12|2523227518|germany-001.xml|100000](https://rapidshare.com/#!download|643p12|2523227518|germany-001.xml|100000)

注意：因此请参阅重要的行： `xmlns:xml_split="http://xmltwig.com/xml_split"` 以及此处的这一行：

```
 <xsl:for-each select="xml_split:root/node/tag[@k='amenity' and @v='restaurant']"> 
```

**注意**- 你可以运行一个小测试 - 看看解析时间 xsltproc Restaurants.xslt Germany-001.xml > Restaurants-001.csv 需要多长时间

```
real    0m0.308s
user    0m0.283s
sys     0m0.022s 
```

这里我们有一个包含解析代码的 xslt 处理器 - （称为 atest3.xslt ）

```
<xsl:stylesheet version = '1.0'
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:xml_split="http://xmltwig.com/xml_split"
        xmlns:xsl='http://www.w3.org/1999/XSL/Transform'>

    <xsl:output method="text" encoding="UTF-8"/>
    <xsl:template match="/">

            <xsl:for-each select="xml_split:root/node/tag[@k='amenity' and @v='restaurant']">
            <xsl:value-of select="../@id"/>
            <xsl:text>&#x09;</xsl:text>
            <xsl:value-of select="../@lat"/>
            <xsl:text>&#x09;</xsl:text>
            <xsl:value-of select="../@lon"/>
            <xsl:text>&#x09;</xsl:text>
            <xsl:for-each select="../tag[@k='name']">
                <xsl:value-of select="@v"/>
            </xsl:for-each>
            <xsl:text>&#x0A;</xsl:text>
        <xsl:value-of select="./tag[@k = 'cuisine']/@v"/>
        <xsl:text>&#x09;</xsl:text>
        <xsl:value-of select="./tag[@k = 'wheelchair']/@v"/>
        <xsl:text>&#x09;</xsl:text>
        <xsl:value-of select="./tag[@k = 'website']/@v"/>
        <xsl:text>&#x09;</xsl:text>
        <xsl:value-of select="./tag[@k = 'addr:country']/@v"/>
        <xsl:text>&#x09;</xsl:text>
        <xsl:value-of select="./tag[@k = 'addr:city']/@v"/>
        <xsl:text>&#x09;</xsl:text>        
        <xsl:value-of select="./tag[@k = 'addr:street']/@v"/>
        <xsl:text>&#x09;</xsl:text>
        <xsl:value-of select="./tag[@k = 'addr:housenumber']/@v"/>
        <xsl:text>&#x0A;</xsl:text>
    </xsl:for-each>
    </xsl:template>

</xsl:stylesheet> 
```

在下面，我们从已解析的 xml 文件中得到了一个数据块：查看

```
<node id="52768810" lat="48.2044749" lon="11.3249434" version="7" changeset="9490517" user="wheelmap_visitor" uid="290680" timestamp="2011-10-07T20:24:46Z">
    <tag k="addr:city" v="Olching" />
    <tag k="addr:country" v="DE" />
    <tag k="addr:housenumber" v="72" />
    <tag k="addr:postcode" v="82140" />
    <tag k="addr:street" v="Hauptstraße" />
    <tag k="amenity" v="restaurant" />
    <tag k="cuisine" v="mexican" />
    <tag k="email" v="info@cantina-olching.de" />
    <tag k="name" v="La Cantina" />
    <tag k="opening_hours" v="Mo-Su 17:00-01:00" />
    <tag k="phone" v="+49 (8142) 444393" />
    <tag k="website" v="http://www.cantina-olching.com/" />
    <tag k="wheelchair" v="no" />
</node> 
```

查看结果 - 请注意缺少某些部分 - 不幸的是..

```
51923772    49.0812534  8.5637183   Zur Talschänke

52040576    49.4635433  12.4287292  Emil-Kemmer-Haus

52141326    49.4144243  12.4143153  Gasthaus Plecher

52623232    48.9293634  8.2722549   Korfu

52664989    49.0435133  8.3919370   Restaurant Zentrum

52754898    49.3243828  12.3618662  Gasthaus Irlbacher

52762875    49.0099641  8.2528132   Langasthof Stober

52765672    50.0082768  9.2139632   Wirtshaus im Frohnrad

52768810    48.2044749  11.3249434  La Cantina

52768816    48.2051698  11.3257964  Indian Palace

52768826    48.2073264  11.3276147  Dorfstub'n

52768830    48.2075968  11.3281055  Le Candele

52774284    49.0319471  8.2888353   Zum Anker 
```

好吧，我得到结果有点问题 - 我尝试了很多，但目前我没有胶水为什么我得到很少的输出 - 这与我在 xslt - 处理器中的标签完全相反 - 任何想法和提示都会是非常感谢dd

顺便说一句：毕竟我想运行大约 5000 个作为拆分结果的文件 - 随后我想将所有结果收集到一个 mysql 数据库中......

在这里你可以得到**原始文件：** [http](http://ftp5.gwdg.de/pub/misc/openstreetmap/download.geofabrik.de) : //ftp5.gwdg.de/pub/misc/openstreetmap/download.geofabrik.de（germany.osm.bz2 01-Apr-2012 14:51 1.7G）

这里是一个**分裂的：** [https ://rapidshare.com/#!download|643p12|2523227518|germany-001.xml|100000](https://rapidshare.com/#!download|643p12|2523227518|germany-001.xml|100000)

我必须重构 coed - 所以问题是 - 我怎样才能以有效的方式获得 mysql-results？

**更新：* *感谢此线程中的第一个答案，我开始重构代码-但仍然缺乏一些更好的结果。我必须再试一次.. 建议进行很多更改 - 我在 xslt-parser 上做了一个快速演练：在第一次尝试重构时，我得到了一些有趣的结果。但我会再试一次——我会检查所有的 xslt 处理器代码，如果发现错误，我会仔细查看，最后我会尝试重构所有 xslt 文件。- 任何指针和 subbestions 或代码片段都非常受欢迎。问候你的零

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T20:14:30.270

看起来您的`./tag[@k = '???']/@v`xpath 应该是`../tag[@k='???']`，因为您的上下文节点是您的原始匹配`tag`元素，而不是`node`元素。

您应该考虑更改上下文节点以使此代码更清晰并避免如下错误：

```
<xsl:for-each select="xml_split:root/node[tag[@k='amenity' and @v='restaurant']]"> 
```

然后您可以使用 XPath`select="tag/@id"`和`tag[@k='country']/@v`.

但是您应该考虑重构此代码以更好地使用`template`代替`for-each`.

# iphone - 在 iPhone 上调试一个不起眼的错误

> ID：10287117
> 
> 赞同：5
> 
> 时间：2012-04-23T19:42:03.553
> 
> 标签：iphone, c++, ipad

我的应用在 iOS 4.2 和 4.3 版本上崩溃。崩溃的代码行位于 C++ 库中：

```
Ais8_001_22_Circle const *circle = dynamic_cast<Ais8_001_22_Circle const*>(*sa); 
```

控制台说：

```
dyld: lazy symbol binding failed: can't resolve symbol ___dynamic_cast MY_APP 
because dependent dylib #2 could not be loaded

dyld: can't resolve symbol ___dynamic_cast in MY_APP 
because dependent dylib #2 could not be loaded 
```

如果我能弄清楚“dylib #2”是什么，这可能会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T22:01:15.700

事实证明我需要在 iOS 4.X 下包含 lstdc++ 链接器标志

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T19:49:32.203

一种可能性 - 您正在链接到动态库 (dylib) 的 C++ 库吗？如果是这样，您需要为 iOS 找到静态链接版本，因为 iOS 不允许动态库。

# oop - 使用面向对象编程的优点和缺点

> ID：10287119
> 
> 赞同：12
> 
> 时间：2012-04-23T19:42:12.677
> 
> 标签：oop, progress-4gl, openedge

我理解使用面向对象编程作为概念的利弊。我正在寻找的是专门使用 oo in progress/openedge 的优缺点。我需要考虑哪些挑战？语言中是否存在与 oo 不匹配的部分？类似的东西。

编辑：使用 10.2b

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-24T18:54:07.630

我会给你我的意见，但请注意，我可能是最讨厌进步的人。;) 也就是说，我已经在 OOABL 中编写了几个中型项目，因此我在该领域有一些经验。这些是我写的一些东西，只是为了让你知道我不是在说我的帽子：

*   客户端和服务器的 STOMP 协议框架
*   一个模仿[ActiveRecord的简单 ORM](http://martinfowler.com/eaaCatalog/activeRecord.html)
*   我所在组织的 ABL 编译器接口（后端和前端）
*   用于构建 Excel 和 Word 文档的库（使用 MS Office 2003 XML 模式对其进行序列化；没有那些愚蠢的 COM 东西）
*   [可以使用多种策略](http://en.wikipedia.org/wiki/Strategy_pattern)发送电子邮件的电子邮件客户端

**OOABL 优点**：

*   如果您绝对必须编写 Progress 代码，那么它是创建可重用代码的绝佳选择。
*   清理现有程序代码库的好方法

**OOABL 缺点**：

*   类层次结构是有限的；您不能在 10.2B 中创建继承（子）接口（我认为这将在 11 中添加）。旧版本的 OpenEdge 有其他限制，例如缺少抽象类。这会限制您创建干净的 OO 设计的能力，并且会在您开始构建重要的东西时**伤害您。**
*   错误处理很糟糕 - `CATCH`/`THROW`不允许您抛出自定义错误并强制调用者捕获它们。向后兼容性阻止了这种进一步发展，所以我怀疑它会不会得到改善。
*   对象内存占用很大，并且没有 AVM 调试工具来追踪原因（一定要喜欢这些封闭的系统！）
*   垃圾收集直到 10.2A 才存在，即使在 11 中仍然存在一些错误（有关一些示例，请参见官方 OE 论坛）
*   网络编程（使用套接字）是一个 PITA - 您必须运行一个单独的持久过程来管理套接字。我认为 OOABL 中的事件编程通常是一个 PITA。我记得在尝试使用它们时遇到了很多关于“窗口环境”或类似情况的错误。`PUBLISH`/`SUBSCRIBE`也不起作用，如果有记忆的话。
*   根据您的环境，代码审查可能很困难，因为大多数 Progress 开发人员不执行 OOABL，因此可能无法理解您的代码
*   如果上述观点属实，您可能会面临来自根深蒂固的开发人员的积极抵制，他们感到不得不学习新事物的威胁

OO 就是构建小的、可重复使用的部分，这些部分可以组合成一个更大的整体。OOABL 的一个大问题是“ABL”部分因其粗糙的数据结构和缺乏枚举器而拖累你，这使你无法真正用它构建真正漂亮的东西。不幸的是，由于它是一种封闭的语言，你不能只是回避你的手，并在外部为它创建自己的新数据或控制结构。

现在，理论上*可以*尝试使用 MEMPTR、固定数组 (EXTENT) 和 WORK-TABLE 构建其中的一些东西。然而，我曾在 10.1C 中尝试过，但由于缺少接口继承和抽象类，设计失败了，正如我所料，性能相当糟糕。后一部分可能只是由于我的能力差，但我怀疑这是一个几乎无法克服的实现限制。

如果您绝对必须在 OpenEdge 中编码，最重要的是使用 OOABL - 它比程序 ABL 更好，并且在 OpenEdge 的每次迭代发布后，粗糙的边缘会变得稍微平滑一些。但是，它永远不会是一门漂亮的语言（OO 或其他）。

如果您想学习正确的面向对象编程并且不局限于 ABL，我强烈建议您研究一种将对象视为一等公民的语言，例如 Ruby 或 Smalltalk。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-29T20:14:21.970

在过去的四年中，我 80% 的时间都在使用 OOABL（从 10.1c 开始）。我绝对推荐使用OOABL，但我认为考虑使用OOABL 与其他OO 语言相同的方式充满问题是非常重要的。“相同方式”是指在 oo 世界中常见的设计模式和实现实践。此外，某些类型的应用程序，尤其是在技术框架领域，很难使用 OpenEdge（例如 ORM）。

原因是OOABL 的性能问题和语言中缺少OO 特性。

例如，如果您使用 C# 或 Java 进行编程，那么在许多情况下，对象的内存占用和实例化时间并不是一个大问题。使用 ABL 这经常成为一个大问题。这会导致其他设计决策并阻止某些模式和框架的实现。

一些缺失或不好的 OO 特性：

*   没有类库，oo 不需要数据结构
*   在 java 中没有包可见性（在 c# 中是内部的）这变得相关，尤其是在大型应用程序中
*   没有泛型
*   非常糟糕的异常处理
*   反射能力非常有限（在 oe11 中改进）

因此，如果您熟悉其他语言的 oo 编程并开始使用 OOABL，您可能会错过很多您期望在那里的东西，并在尝试在 ABL 中实现这些东西时感到沮丧。

如果您的应用程序必须仅在 Windows 上运行，也可以在 C# 中实现新的 oo 代码，并通过 clr 桥从您现有的进度代码中调用它，这非常顺利。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-25T07:58:42.147

钾+

只有一件事——“错误处理很糟糕”——这很糟糕，但不是因为你不能让你自己的错误类在调用者块中捕获它们——这行得通，我正在使用它。糟糕的是旧的 NO-ERROR / ERROR-HANDLE 选项和 Progress.Lang.Error / CATCH 块和 ROUTINE-LEVEL ON ERROR UNDO, THROW 的混合。这是一个大问题，当团队中没有约定时，将使用哪种错误处理以及如何使用。

# python - Python 时间复杂度（运行时）

> ID：10287123
> 
> 赞同：5
> 
> 时间：2012-04-23T19:42:25.800
> 
> 标签：python, big-o

```
def f2(L):
    sum = 0
    i = 1
    while i < len(L):
        sum = sum + L[i]
        i = i * 2
    return sum 
```

令 n 为传递给此函数的列表 L 的大小。以下哪项最准确地描述了此函数的运行时间如何随着 n 的增长而增长？

(a) 它像 n 一样线性增长。(b) 它是二次增长的，就像 n^2 一样。

(c) 它的增长不是线性的。(d) 它的增长超过了二次方。

我不明白你是如何弄清楚函数的运行时间和 n 的增长之间的关系的。有人可以向我解释一下吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-23T20:43:47.440

好的，因为这是家庭作业：

这是代码：

```
def f2(L):
    sum = 0
    i = 1
    while i < len(L):
        sum = sum + L[i]
        i = i * 2
    return sum 
```

它显然取决于 len(L)。

所以让我们看看每一行，它的成本是多少：

```
sum = 0
i = 1
# [...]
return sum 
```

这些显然是恒定的时间，与 L 无关。在循环中，我们有：

```
 sum = sum + L[i] # time to lookup L[i] (`timelookup(L)`) plus time to add to the sum (obviously constant time)
    i = i * 2 # obviously constant time 
```

循环执行了多少次？它显然取决于 L 的大小。让我们称之为`loops(L)`

所以我们得到了一个整体的复杂性

`loops(L) * (timelookup(L) + const)`

作为一个好人，我会告诉你列表查找在 python 中是不变的，所以它归结为

`O(loops(L))`（忽略常量因素，正如 big-O 约定所暗示的那样）

你多久循环一次，`len()`基于`L`？

(a) 与列表中的项目一样频繁 (b) 与列表中的项目一样频繁？

(c) 较少，因为列表中的项目 (d) 比 (b) 更频繁？

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-23T19:57:55.190

我不是计算机科学专业的学生，​​我并不声称对这种理论有很强的掌握，但我认为从我的角度来看，尝试提供答案可能与某人相关。

你的函数总是需要时间来执行，如果它在一个可变长度的列表参数上运行，那么运行该函数所需的时间将与该列表中有多少元素有关。

让我们假设处理一个长度 == 1 的列表需要 1 个单位的时间。问题是，列表的大小变大与该函数执行时间的增加之间的关系。

此链接分解了 Big O 表示法的一些基础知识：[http ://rob-bell.net/2009/06/a-beginners-guide-to-big-o-notation/](http://rob-bell.net/2009/06/a-beginners-guide-to-big-o-notation/)

如果它是 O(1) 复杂性（这实际上不是您的 AD 选项之一），那么这意味着无论 L 的大小如何，复杂性都不会增加。显然在您的示例中，它正在执行一个 while 循环，这取决于`i`在与 L 的长度的关系。我将关注`i`被相乘的事实，以表明通过该 while 循环所需的时间与 L 的长度之间的关系。基本上，尝试比较 while 循环的数量循环需要在 len(L) 的各种值下执行，然后这将决定您的复杂性。1 个时间单位可以通过 while 循环进行 1 次迭代。

希望我在这里做出了某种形式的贡献，因为我自己缺乏这方面的专业知识。

**更新**
根据 ch3ka 的评论进行澄清，如果你做的比你目前在`with`循环中所做的更多，那么你还必须考虑每个循环增加的复杂性。但是因为您的[列表查找`L[i]`是恒定的复杂性](http://wiki.python.org/moin/TimeComplexity)，就像它后面的数学一样，我们可以忽略那些复杂性。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-23T20:10:16.870

这是一种快速而肮脏的查找方法：

```
import matplotlib.pyplot as plt

def f2(L):
    sum = 0
    i = 1
    times = 0
    while i < len(L):
        sum = sum + L[i]
        i = i * 2
        times += 1    # track how many times the loop gets called
    return times

def main():
    i = range(1200)
    f_i = [f2([1]*n) for n in i]
    plt.plot(i, f_i)

if __name__=="__main__":
    main() 
```

...这导致

![函数循环与参数大小的关系图](../Images/8131d43ec53c81d3201390d1e7364524.png)

横轴是L的大小，纵轴是函数循环的次数；big-O 应该很明显。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-23T20:16:01.097

考虑长度为 n=10 的输入会发生什么。现在考虑如果输入大小加倍到 20 会发生什么。运行时也会加倍吗？然后是线性的。如果运行时间增长了 4 倍，那么它是二次方的。等等。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-23T20:13:16.997

查看函数时，您必须确定列表的大小将如何影响将发生的循环数。

在您的特定情况下，让我们增加 n 并查看 while 循环将运行多少次。

```
n = 0, loop = 0 times
n = 1, loop = 1 time
n = 2, loop = 1 time
n = 3, loop = 2 times
n = 4, loop = 2 times 
```

看到图案了吗？现在回答你的问题，是吗：

```
(a) It grows linearly, like n does. (b) It grows quadratically, like n^2 does.

(c) It grows less than linearly. (d) It grows more than quadratically. 
```

查看[Hugh](https://stackoverflow.com/a/10287536/496405)对经验结果的回答 :)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-23T20:11:20.217

它是`O(log(len(L)))`，因为列表查找是一个恒定时间操作，与列表的大小无关。

# c++ - 删除函数内的对象

> ID：10287126
> 
> 赞同：0
> 
> 时间：2012-04-23T19:42:44.310
> 
> 标签：c++, function, object, delete-operator

哪个代码好（如果好的话）

```
void DeleteObject(Object* obj)
{
    delete obj;
} 
```

或者

```
void DeleteObject(Object** obj)  
{  
    delete *obj;  
}  

int main()  
{  
    Object *obj = new Object();  
    DeleteObject(&obj); or DeleteObject(obj);  
} 
```

事实上`DeleteObject`函数并没有那么短（它删除对象字段）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T19:47:47.527

这很好：

```
#include <memory>

int main(int argc, char **argv) {  
    std::auto_ptr<Object> ptr = new Object();
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-23T19:51:21.020

在我看来，两者都没有。

创建对象的人应该对对象负责，从而将其删除。

所以我的回答是`main`应该这样做`delete`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T19:54:24.100

我还建议使用@nightcracker 建议的智能指针，但如果您真的不希望这样做，我建议您引用指针：

```
void DeleteObject(Object* &obj)
{
    delete obj;
    obj = NULL;
} 
```

这确保了原始指针设置为空，因此，您不会再意外访问该对象，并且引用比指向指针的指针更安全。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T19:58:20.893

你说：“该函数删除对象字段”这只意味着这里发生了更可怕的事情。一个类应该负责在其析构函数和构造函数中管理自己的资源（子对象）。如果需要通过外部管理一些子对象，请提供公共 API 来管理它们。无论如何，不​​要使用原始指针来管理生命周期，而是使用智能指针（例如`std::shared_ptr`）。当然有一些边缘情况，但考虑到您要问这样的问题，我认为您手头上没有这样的问题。

# apache - 仅使用 .htaccess 的子域

> ID：10287129
> 
> 赞同：0
> 
> 时间：2012-04-23T19:42:51.027
> 
> 标签：apache, .htaccess, subdomain

我想知道是否可以在 Web 应用程序中实现子域，只在 .htaccess 文件中使用技巧？这是避免以下情况

1.  编辑子域链接的主机文件
2.  为相同添加虚拟主机配置

非常感谢您的帮助。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T19:55:54.693

仅使用 apache 指令是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T19:54:26.367

您可以添加一个重写命令来更改子域的链接。

# objective-c - 未调用 textFieldShouldReturn

> ID：10287131
> 
> 赞同：8
> 
> 时间：2012-04-23T19:42:52.120
> 
> 标签：objective-c, ios, keyboard

当用户单击“返回”按钮时，我想让键盘消失，我被告知使用

```
-(BOOL)textFieldShouldReturn:(UITextField *)textField {
    [tf resignFirstResponder];
    return YES;
} 
```

但是当我单击“返回”按钮时什么也没有发生，甚至没有调用该方法。我正在这样做

```
@interface gameOverMenu : UIView 
```

不在 ViewController 中。我也不使用界面生成器。我该怎么办？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-23T20:19:10.000

您需要确保实现 UITextFieldDelegate 并将您的 UITextField 委托设置为 self。在您的 .h 文件中：

```
@interface gameOverMenu : UIView <UITextFieldDelegate> 
```

在你的 .m 文件中的某个地方（viewDidLoad：也许）：

```
self.yourTextField.delegate = self; 
```

现在应该调用您的 -(BOOL)textFieldShouldReturn:(UITextField *)textField 方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T19:48:06.537

确保您已将父类（无论它是什么）设置为 UITextFieldDelegate

# jquery - jQuery代码不起作用？

> ID：10287132
> 
> 赞同：0
> 
> 时间：2012-04-23T19:42:56.063
> 
> 标签：jquery, wordpress

我一直在构建一个开发站点“ [http://webdesignsalemoregon.com/lpr-settings-1/](http://webdesignsalemoregon.com/lpr-settings-1/) ”，并且 jQuery 代码运行良好。

我克隆了一个客户站点，并试图以新格式“ [http://webdesignsalemoregon.com/harolds-lpr/](http://webdesignsalemoregon.com/harolds-lpr/) ”

但似乎 jQuery 代码不起作用？它似乎在标题中加载得很好？：/

编辑

自定义 jquery 文件是“custom.js”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T19:44:24.300

您需要确保在您的脚本之前加载 jQuery。查看该站点，您的脚本似乎在 jQuery 之前被加载，因此您在控制台中得到“jQuery 未定义”。

# php - 适用于 Android 回合制多人游戏的 PHP 服务器？

> ID：10287133
> 
> 赞同：0
> 
> 时间：2012-04-23T19:42:57.157
> 
> 标签：php, android

我为 Android 开发了一个回合制游戏，现在我想添加多人游戏。我不想使用像“skiller”这样的提供者，我想开发自己的服务器。

我没有专用服务器，但我有一个带有“1 和 1”的 php 主机。像游戏服务器一样使用这个主机是个好主意吗？我的想法是我的 Android 游戏每 X 秒轮询一次服务器，等待对手移动。

你怎么看待这件事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T19:53:00.750

我已经研究过使用它们进行托管，并且听说过有关它们的支持的好消息。但是，除非您使用他们提供的专用服务器（而不是基本共享托管服务），否则您可能没有可用资源来支持游戏服务器。

如果您可以自己处理服务器配置，或者对如何设置服务器的详细说明很好，那么我强烈建议您使用每月 20 美元的 linode.com 基本计划。我将它用于网站托管，它在性能和灵活性方面产生了巨大的差异。此外，我还看到了在 slicehost、rackspace 和 Amazon S3 之间进行的一些性能基准比较，结果让所有这些（尤其是 Amazon）都被淘汰了。基准是 2 或 3 年的历史，但它仍然很有说服力。

Linode 将让您在服务器的法律范围内做任何您想做的事情。因此，如果您想托管成人网站，他们不会有任何问题。他们可能会在设置垃圾邮件服务器或类似的一些阴暗的事情上遇到问题。但他们看起来很酷。另外，它们可能是那里最实惠的选择。

我要补充一点，您可能会研究 APE 服务器（AJAX 推送引擎）背后的技术。它是一个高效的聊天系统，几乎可以与任何服务器端语言和前端一起使用。

[http://www.ape-project.org/](http://www.ape-project.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T03:30:34.490

您不应该听特定于编程语言的论点，大多数时候它们是个人喜好。您想要做的当然可以使用 PHP。你可以用每种语言进行好的和坏的编程。如果您知道如何使用 PHP，那么对于回合制游戏来说，PHP 就足够了。使用你最熟悉的编程语言，你会没事的。

更重要的是：您希望您的游戏成功，1und1**无法**处理“成功”的方式，因为其本地化且不可按需扩展。如果你想赚钱或传播，你真的不应该害怕投资一些*低*钱并去亚马逊的基础设施。你将不得不学习一点，但这绝对是值得的。

大多数 IDE（Zend Studio、PHP Storm 等）甚至已经有了很好的集成。共享主机或本地化存储主机不是您想要的，因为如果您的应用程序出名，它们将无法处理全球需求。而且您将遇到安全问题。如果您*真的*希望您的游戏能够成功，那么即使是 VPS 也会几乎立即达到其极限。

您可以尝试先使用 1und1 来扩展您的游戏，然后根据需要寻求更好的解决方案。但也有不少游戏因为需求远高于预期而死去。最糟糕的是，你必须不那么欣喜若狂，但要更现实一些。

总结一下：只要使用你最熟悉的语言，如果你相信你的想法，不要害怕投入少量资金来满足全球市场，创建你自己的协议，尽可能少的数据传输，请多投票往往比“x秒”，因为等待对手的一秒感觉就像三天。而你正在路上。

进展顺利！完成后发布链接:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T02:26:20.327

我就是这样做的，因为您的游戏正在向服务器请求拉取请求，让我们跳过一步。那是询问MySQL服务器。所以这就是我要做的方式。

听上去像是一个 html5 游戏，这意味着您可以在用户手机上设置 cookie。我会有一个cookie，甚至是一个javascript var，然后存储一个JSON 或ARRAY 字符串。从此，您可以将 1 或 0 推送到 PHP 脚本，希望能够将其发送给用户或将其存储为 .txt 文件。众所周知，从 mysql 获取数据的速度较慢，如果您有 400 个用户每隔 5 秒执行一次，您将关闭大多数共享服务器，它们只是不够强大，无法执行您想要的操作。

如果您的预算很小，我建议您查看此选项。我真的想不出你可以在不将数据存储在某处的情况下做到这一点。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-12-03T08:57:15.723

您可以使用 Firebase 消息服务来实现相同的功能。此外，您还必须拥有一台 Web 服务器（例如 PHP）。

1.  使用您的 android 代码向 Web 服务器上的 PHP 文件发送请求。
2.  从这个网络服务器，您可以以 firebase Messaging 的形式发送广播消息，该消息将传送到您订阅主题的所有设备。
3.  所有侦听此 FCM 的 android 设备都可以响应（取决于您的代码设置的参数）。

# c# - 如何对一些工作进行排队，以便它们按顺序执行

> ID：10287137
> 
> 赞同：1
> 
> 时间：2012-04-23T19:43:12.370
> 
> 标签：c#, .net, multithreading

我有一个任务或工作项队列，需要在后台按**顺序执行。**这些任务将属于“即发即弃”类型，这意味着一旦它们开始，我真的不在乎它们是否完成，不需要取消或状态更新。如果他们没有完成，用户将能够重试或手动诊断。

目标是能够保持对队列的引用并且只需要做

```
myQueue.Add( () => DoMyStuff() ); 
```

为了向队列中添加一些东西。

System.Threading.Task 类似乎只能一个接一个地对任务进行排队，而不是通过引用一个公共队列。我不想管理获取最新任务并附加到它的复杂性。

线程池不保证顺序并且将并行执行工作项。（这很棒，但不是我需要的）

是否有任何内置类可以处理我没有想到的？

**编辑：** 我们需要能够在以后将任务添加到队列中。场景是当用户单击按钮时，我们希望向设备发送命令（例如打开或关闭灯泡）。这些命令需要 5 秒来处理，我们希望用户能够多次单击并将请求排队。我们不知道有多少任务将排队，也不知道任务是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T20:07:50.353

创建 a `BlockingCollection`，默认情况下它将使用 a`ConcurrentQueue`作为其内部数据结构。确保任何具有先决条件的任务首先将其先决条件添加到集合中。`BlockingCollection`可以是 s 的集合，`Task`一些自定义项表示要调用的方法的参数，`Func<>`或者`Action<>`要执行的方法，或其他任何东西。就我个人而言，我会选择`Task`或`Action`。

然后你只需要一个线程来遍历集合中的每个项目并同步执行它们。

您可以在队列工作时将新项目添加到队列中，并且不会有任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T19:53:56.400

您可以创建一个队列对象作为 System.Threading.Task 的包装器。如果您在底层线程池中将并发执行的线程数限制为 1，我认为您的问题已经解决。

限制执行任务的数量：[System.Threading.Tasks - 限制并发任务的数量](https://stackoverflow.com/questions/2898609/system-threading-tasks-limit-the-number-of-concurrent-tasks)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-23T20:00:56.183

如何同时启动所有线程并让它们监听作业完成事件。

假设您的线程根据运行顺序具有 id，所有线程可以同时启动，但会休眠直到它们完成前一个作业的作业/超时

作业完成/超时事件还将帮助您的监控线程跟踪工作线程

# iphone - 在 Core Data 中，您可以在从数据库中检索其他数据的同时插入数据吗？

> ID：10287140
> 
> 赞同：2
> 
> 时间：2012-04-23T19:43:20.917
> 
> 标签：iphone, objective-c, sqlite, core-data

> **可能重复：**
> [Core Data vs SQLite 3](https://stackoverflow.com/questions/523482/core-data-vs-sqlite-3)

我一直在使用 SQLite 在我的 iOS 应用程序中保存数据（对于最多超过 20,000 行的表）。但是，我在使用 SQLite 时遇到了一个问题，当我在`SELECT`向表中插入数据时尝试使用语句时，该`SELECT`语句将不起作用。

像这样的东西会在 Core Data 中工作吗？我可以在向数据库中插入新数据的同时从数据库中检索数据吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T21:29:09.403

是的，您可以同时在 Core Data 上进行查询和插入，我假设您希望在多个线程上进行。最好的方法是为每个线程（或队列）设置一个 NSManagedObjectContext。

我设置它的方式是让你的主线程（UI）有一个 NSManagedObjectContext 仅用于获取数据，一个用于插入单独的线程，其 parentContext 设置为主线程。这样，当您保存在子上下文中时，您将在主上下文中看到这些新对象，并且您可以进行新的获取（或者如果您有 NSFetchedResultsController，它会为您更新它）。

[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdConcurrency.html#//apple_ref/doc/uid/TP40003385](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdConcurrency.html#//apple_ref/doc/uid/TP40003385)

WWDC 2011 有关核心数据的视频详细讨论了 parentContext。

# c# - 提高并发字典访问c#的效率

> ID：10287141
> 
> 赞同：1
> 
> 时间：2012-04-23T19:43:21.210
> 
> 标签：c#, list, c#-4.0, concurrency, locking

我有一个由多个后台线程访问以更新/读取的列表。更新操作包括插入和删除。

为了在没有同步问题的情况下同时执行此操作，我在类中的私有只读对象上使用了锁。

为了最大限度地减少读取数据时需要锁定列表的时间，我对其进行深度克隆并返回深度克隆并解锁字典以进行插入/删除更新。

因此，每次读取列表都会增加我的服务的内存消耗。

需要注意的一点是，插入/删除是包含列表的类的内部。但该读物是供公众阅读的。

我的问题是：

有什么办法，我可以避免克隆列表并仍然使用读/写锁同时使用它进行读取？

```
public class ServiceCache
    {
        private static List<Users> activeUsers;
        private static readonly object lockObject = new object();
        private static ServiceCache instance = new ServiceCache();

        public static ServiceCache Instance
        {
            get
            {
                return instance;
            }
        }

        private void AddUser(User newUser)
        {
            lock (lockObject)
            {
                //... add user logic
            }
        }

        private void RemoveUser(User currentUser)
        {
            lock (lockObject)
            {
                //... remove user logic
            }
        }

        public List<Users> ActiveUsers
        {
            get
            {
                lock (lockObject)
                {
                    //The cache returns deep copies of the users it holds, not links to the actual data.
                    return activeUsers.Select(au => au.DeepCopy()).ToList();
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T19:48:01.780

听起来您需要使用该类，并为您存储`ConcurrentDictionary`的每个对象创建一个键。`Users`然后，添加/更新用户变得如此简单：

```
_dictionary.AddOrUpdate("key", (k, v) =>
    {
        return newUser;
    }, (k, v) =>
    {
        return newUser;
    }); 
```

然后要删除，你会这样做：

```
 Users value = null;
_dictionary.TryRemove("key", out value); 
```

获取人员列表也非常容易，因为您只需要执行以下操作：

```
return _dictionary.Values.Select(x => x.Value).ToList(); 
```

那个时候应该返回字典内容的副本。

让 .NET 运行时为您处理线程。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-23T19:47:20.557

您可以使用读写锁来允许同时读取。

但是，使用 a 和线程安全的不可变值会快得多`ConcurrentDictionary`，然后摆脱所有同步。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T20:07:34.350

> 因此，每次读取列表都会增加我的服务的内存消耗。

为什么？调用者没有释放引用吗？他们需要这样做，因为字典的内容可以改变。

你正在做的复制是我认为非常接近并发数据结构，例如写时复制集合的工作方式，除了调用者不能保留引用。

其他几种方法：

*   将相同的副本返回给所有调用者，直到集合被修改。返回的集合应该是不可变的

*   公开调用者希望从副本中获得的所有功能，并使用单个锁来处理原始列表

# macos - 如何从 Delphi 调用 NSBeep

> ID：10287149
> 
> 赞同：14
> 
> 时间：2012-04-23T19:43:49.560
> 
> 标签：macos, delphi, firemonkey

我正在寻找 OS X 上的 MessageBeep 替代品。似乎要调用的正确函数是[NSBeep](https://stackoverflow.com/a/7408835/4997)，但 XE2 RTL 不支持它。

如何从 Delphi 应用程序调用 NSBeep？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-23T20:33:04.977

这只是一个普通的 C 函数：

```
procedure NSBeep; cdecl;
  external '/System/Library/Frameworks/AppKit.framework/AppKit' name '_NSBeep'; 
```

# css - CSS3 的替代品 如果这不起作用和子标准，则带有淡出边缘的简单样式的标签 标签踢了？

> ID：10287152
> 
> 赞同：2
> 
> 时间：2012-04-23T19:44:06.643
> 
> 标签：css

替代 CSS3 < hr > 简单样式的标签，如果这不起作用，则在 hr 样式下方有一个标准 < hr > 标签的子语句或 else 语句，如下代码所示。

有带有淡出边缘的简单样式的 CSS3 < hr > 标签，请参阅链接 [http://css-tricks.com/simple-styles-for-horizo​​ntal-rules](http://css-tricks.com/simple-styles-for-horizontal-rules)。

如果这种带有淡出边缘的 <hr> 简单样式不起作用，而改为使用标准 <hr> 扭结，是否有后备方案？我正在使用jQuery1.6.4 请指教？

```
 hr { border: 0; height: 1px; 
 background-image: -webkit-linear-gradient(left, rgba(0,0,0,0), rgba(0,0,0,0.75), rgba(0,0,0,0));       
 background-image: -moz-linear-gradient(left, rgba(0,0,0,0), rgba(0,0,0,0.75), rgba(0,0,0,0)); 
 background-image: -ms-linear-gradient(left, rgba(0,0,0,0), rgba(0,0,0,0.75), rgba(0,0,0,0)); 
 background-image: -o-linear-gradient(left, rgba(0,0,0,0), rgba(0,0,0,0.75), rgba(0,0,0,0)); 
 width:100%; 
 }

 .hr { border: 0; height: 1px; 
 background-image: -webkit-linear-gradient(left, rgba(0,0,0,0), rgba(0,0,0,0.75), rgba(0,0,0,0));       
 background-image: -moz-linear-gradient(left, rgba(0,0,0,0), rgba(0,0,0,0.75), rgba(0,0,0,0)); 
 background-image: -ms-linear-gradient(left, rgba(0,0,0,0), rgba(0,0,0,0.75), rgba(0,0,0,0)); 
 background-image: -o-linear-gradient(left, rgba(0,0,0,0), rgba(0,0,0,0.75), rgba(0,0,0,0)); 
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T17:38:07.310

如果您担心后退，也许您最好以这种方式使用 hr，但是如果浏览器不支持 css 渐变，您可能可以将 hr 替换为带有图像的 div 或作为背景，以便能够检测到您可以使用[Modernizr](http://modernizr.com/)的此类功能。

一旦你在你的 html 上安装了modernizr，你可以使用 jQuery 测试你的客户端是否可以使用 css 渐变，[我通常会这样做](http://jsfiddle.net/mrpollo/HRba8/6/)，但使用 Modernizr js API 可能会有更好的方法。

请让我知道它是否适合您，祝您好运！

HTML

```
<hr>
<hr>
<hr>
<hr> 
```

CSS

```
hr {
    border: 0; height: 1px; 
    background-image: -webkit-linear-gradient(left, rgba(0,0,0,0), rgba(0,0,0,0.75), rgba(0,0,0,0));       
    background-image: -moz-linear-gradient(left, rgba(0,0,0,0), rgba(0,0,0,0.75), rgba(0,0,0,0)); 
    background-image: -ms-linear-gradient(left, rgba(0,0,0,0), rgba(0,0,0,0.75), rgba(0,0,0,0)); 
    background-image: -o-linear-gradient(left, rgba(0,0,0,0), rgba(0,0,0,0.75), rgba(0,0,0,0));
    background-image: linear-gradient(left, rgba(0,0,0,0), rgba(0,0,0,0.75), rgba(0,0,0,0));
    width:100%; 
}

.hr {
    border: 0; height: 1px; 
    background-image: -webkit-linear-gradient(left, rgba(0,0,0,0), rgba(0,0,0,0.75), rgba(0,0,0,0));       
    background-image: -moz-linear-gradient(left, rgba(0,0,0,0), rgba(0,0,0,0.75), rgba(0,0,0,0)); 
    background-image: -ms-linear-gradient(left, rgba(0,0,0,0), rgba(0,0,0,0.75), rgba(0,0,0,0)); 
    background-image: -o-linear-gradient(left, rgba(0,0,0,0), rgba(0,0,0,0.75), rgba(0,0,0,0));
    background-image: linear-gradient(left, rgba(0,0,0,0), rgba(0,0,0,0.75), rgba(0,0,0,0));
}

.no-js .glossy,
.no-cssgradients .glossy {
    background: url("images/glossybutton.png");
}

.cssgradients .glossy {
    background-image: linear-gradient(top, #555, #333);
}
​ 
```

JS

```
(function($){
if( $('.cssgradients').length == 0 ){
    // no css gradients
    $('hr').each(function(index){
        // replace for image maybe?
    });
}
}(jQuery); 
```

​</p>

​</p>

# html - HTML 和 ASP.NET MVC 3 Razor 中的隐藏输入和非常大的值的问题

> ID：10287153
> 
> 赞同：5
> 
> 时间：2012-04-23T19:44:08.573
> 
> 标签：html, asp.net-mvc, asp.net-mvc-3, razor

由于隐藏输入值似乎有 1024 个字符的限制，对于超过此限制的值，每个人都会做什么？可以合理地使用隐藏文件输入（<input type="file" value="some very long value"...）吗？任何此类解决方案的字段长度限制是什么？

```
<input id="someId" type="hidden" 
value="5538680,5538683,5538858,5539195,5540063,5540812,5540814,5541665,5541666,5541667,
5541668,5541669,5541670,5541671,5541672,5541673,5541674,5541675,5541676,5541677,5541678,
5541679,5541680,5541682,5541683,5541684,5541685,5541686,5541687,5541688,5541689,5541690,
5541691,5541692,5541693,5541694,5541695,5541696,5541697,5541698,5541728,5543254,5543501,
5543502,5543949,5543950,5544073,5544867,5545079,5545642,5545827,5545890,5545891,5545895,
5545896,5546323,5546631,5546632,5546972,5547794,5547900,5547945,5547980,554923...735181,
5735182,5735183,5735184,5735185,5735187,5735188,5735189,5735227,5735228,5735229,5735235,
5735236,5735237,5735238,5735239,5735240,5735241,5735242,5735243,5735273,5735744,5735745,
5735746,5735747,5735748,5735749,5735836,5735837,5735838,5735839,5735840,5735841,5735842,
5735843,5735844,5735845,5735846,5735847,5735848,5735849,5735850,5735851,5735852,5735853,
5735854,5735855,5735856,5735857,5735858,5735859,5737183,5738250,5738563,5738564,5738565,
5738566,5738567,5738568,5738569,5738570,5738731,5738732,5738946" name="someName"> 
```

我正在使用 ASP.NET MVC 3，并且希望能够以最少的努力集成的解决方案。理想情况下，我希望能够使用剃刀语法传递超过 1024 个字符的模型值。

我还需要能够使用 JavaScript/jQuery 在客户端操作值。

每个人都做了什么来解决这个问题？理想情况下，我想将值作为单个变量来处理。有没有处理此类信息的好方法？我使用的最大值似乎约为 40k。

编辑：如果您在上面输入元素的值中注意到 ... ，则该值似乎被缩短为 1024 个字符，以适应 value 属性。我对这个问题的原因并不肯定，但认为这是对属性大小的限制。如果有人可以否认这一点，和/或解释如何在某处允许更大的属性或字段，我将不胜感激。我希望将重构保持在最低限度，因为我已经对当前架构进行了大量投资。许多其他组件当前以当前形式使用此值列表。

编辑：我的错误！Firebug 报告“...”，并导致 JavaScript 错误。它显然不能很好地处理超过 1024 个字符的属性。事实上，所有数据都毫无问题地填充（当萤火虫被禁用时）。这似乎是萤火虫的问题。我带来的不便表示歉意。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T20:01:39.527

一个怎么样

```
<textarea name="someName">5538680,5538683,...</textarea> 
```

应用了样式/css规则`display:none`？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-23T20:12:04.037

使用分组

```
<input name="someIDs[0]" type="hidden" value="5538680"/>
<input name="someIDs[1]" type="hidden" value="5538683/> 
```

**更新：**

控制器

```
public ActionResult Test()
    {
        Random rand = new Random();
        List<int> list = new List<int>();
        for (int i = 0; i < 10000; i++)
        {
            list.Add(rand.Next(1,999999));
        }
        return View(list);
    }
    [HttpPost]
    public ActionResult Test(int[] item)
    {
        return View(item.ToList());
    } 
```

看法

```
@model List<int>
@{
    ViewBag.Title = "Test";
}

@using (Html.BeginForm())
{
    foreach (int item in Model)
    {

        <input type="hidden" name="item" value="@item" />
    }
    <input type="submit" value="submit" />
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T20:04:12.790

1024 是 HTML 3 及更低版本中 HTML 元素的任何属性的限制。为了解决这个问题，您可以使用一个文本区域，将值放在标签之间。

由于您有这么多数据，您最好在服务器端实现某种分页并使用 AJAX 发出请求以获取下一组数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T20:06:00.133

我认为最“正确”的方法是使用数据属性。

```
#my-info {
    display: none;
}

<div id="my-info" data-ids="id1,id2,etc"></div> 
```

或通过javascript：

```
<script>
    $("#my-info").data("ids", @Model.JsonIds);
</script> 
```

并`Model.JsonIds`填充了一个 Json 字符串。

我个人可能会选择第二个。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T20:08:48.357

我同意@Gaby 关于重新思考架构的观点。但如果你真的必须，我建议你建立 javascript 数组。这样，处理数据就会容易得多。用剃须刀做到这一点非常简单。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-06T12:04:44.360

我真的不认为有限制。只要您可以在“”引号之间获取字符串长度，并且在同一行上，它就应该接受它。有传言说它有 65000 个字符，但是有人写了一个 javascript 并得到了超过 2,000,000 个字符。

# python - 类型错误：在 Python 中

> ID：10287155
> 
> 赞同：-5
> 
> 时间：2012-04-23T19:44:23.867
> 
> 标签：python

我有一个问题，函数返回一个数字。然后，当我尝试组装一个包含该数字的 URL 时，我遇到了失败。

具体来说，我得到的错误是

> TypeError：无法连接“str”和“NoneType”对象

不知道从这里去哪里。

这是相关的代码：

```
# Get the raw ID number of the current configuration
configurationID = generate_configurationID()

# Update config name at in Cloud
updateConfigLog = open(logBase+'change_config_name_log.xml', 'w')
# Redirect stdout to file
sys.stdout = updateConfigLog
rest.rest(('put', baseURL+'configurations/'+configurationID+'?name=this_is_a_test_', user, token))
sys.stdout = sys.__stdout__ 
```

如果我在 rest.rest() 中手动输入以下内容，它会完美运行

```
rest.rest(('put', http://myurl.com/configurations/123456?name=this_is_a_test_, myusername, mypassword)) 
```

我已经尝试过`str(configurationID)`，它吐出一个数字，但我不再得到 URL 的其余部分......

想法？帮助？

好的...为了显示我的 baseURL 和我的 configurationID 是我所做的。

```
print 'baseURL: '+baseURL
print 'configurationID: '+configurationID 
```

这就是我得到的

```
it-tone:trunk USER$ ./skynet.py fresh
baseURL: https://myurl.com/
369596
Traceback (most recent call last):
  File "./skynet.py", line 173, in <module>
    main()
  File "./skynet.py", line 30, in main
    fresh()
  File "./skynet.py", line 162, in fresh
    updateConfiguration()
  File "./skynet.py", line 78, in updateConfiguration
    print 'configurationID: '+configurationID
TypeError: cannot concatenate 'str' and 'NoneType' objects
it-tone:trunk USER$ 
```

令我感兴趣的是 369596 是配置 ID，但就像以前一样，它似乎破坏了围绕它调用的所有内容。

正如下面所指出的，我的 generate_configurationID 没有*返回*值，而是在打印它。

```
# from generate_configurationID
def generate_configurationID():
  dom = parse(logBase+'provision_template_log.xml')
  name = dom.getElementsByTagName('id')
  p = name[0].firstChild.nodeValue
  print p
  return p 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T20:35:47.563

你`configurationID`的是`None`。这可能意味着`generate_configurationID()`没有返回值。Python 中没有办法让变量名“丢失”它的值。在您发布的代码中，唯一的方法是`configurationID`返回，如果您没有明确返回任何值，就会发生这种情况。`None``generate_configurationID()``None`

“但它`configurationID`在屏幕上打印正确！” 你可能会反对。当然可以，但这可能是`generate_configurationID()`您打印它以确保它正确但忘记归还它的地方。

您可能会通过完整发布来证明我错了`generate_configurationID()`，我承认您的程序很**神奇**。

# javascript - Javascript 立方函数

> ID：10287157
> 
> 赞同：-4
> 
> 时间：2012-04-23T19:44:28.187
> 
> 标签：javascript, function

因此，Codecademy 遇到了更多麻烦，看起来这是因为他们为命令行的输入设置了有限数量的传递参数，因为这个 javascript 函数似乎有意义，但它不接受它。这是基本逻辑的另一个问题，还是Js语法？

```
var cube = function(n){
  return n * n;  
};

var n = 5;

cube(n); 
```

我知道没有必要为了测试它而显式创建变量 n，但我认为这可能是测试函数是否可以有效地传递“n”参数的条件之一。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T19:45:33.897

也许是因为立方体应该是

```
return n * n * n; 
```

# qt - 选择 QGraphicsItem 时调用什么方法

> ID：10287158
> 
> 赞同：10
> 
> 时间：2012-04-23T19:44:34.457
> 
> 标签：qt, qgraphicsitem

可能是一个棘手的问题，但我找不到答案。

我需要知道 QGraphicsItem 何时被选中。必须有一个被调用的方法。

我知道`QGraphicsItem::itemChange()`，但它被称为太频繁了。

有没有更好的方法？

谢谢

编辑：有了这个

```
if(change == ItemSelectedChange && scene()){
    cout << "haha " << i++ << endl;
} 
```

每次选择更改我都会接到两个电话。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-23T20:54:22.200

您应该`value`考虑 QGraphicsItem::itemChange 方法。你想要的可能是这样的：

```
QVariant YourItem::itemChange(GraphicsItemChange change, const QVariant &value)
{
    if (change == QGraphicsItem::ItemSelectedChange)
    {
        if (value == true)
        {
            // do stuff if selected
        }
        else
        {
            // do stuff if not selected
        }
    }

    return QGraphicsItem::itemChange(change, value);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T20:11:18.430

[`QGraphicsScene::selectionChanged`](http://qt-project.org/doc/qt-5/qgraphicsscene.html#selectionChanged)

# ruby-on-rails - 来自单个 Rails 应用程序的多个 DB：什么是最先进的？

> ID：10287162
> 
> 赞同：4
> 
> 时间：2012-04-23T19:44:47.797
> 
> 标签：ruby-on-rails, ruby, activerecord, rails-migrations, multiple-databases

经过一些研究，Rails 似乎对多个数据库连接有明确、优雅的支持：[http ://www.rubynaut.net/articles/2008/05/31/how-to-access-multiple-database-in- rails.html](http://www.rubynaut.net/articles/2008/05/31/how-to-access-multiple-database-in-rails.html)

但是，rails 似乎不支持在迁移中支持这一点：[http ://www.jamesinman.co.uk/2011/10/serving-one-rails-application-with-multiple-databases/](http://www.jamesinman.co.uk/2011/10/serving-one-rails-application-with-multiple-databases/)

因此，一些项目已经出现来填补空白。示例： http: [//kovyrin.github.com/db-charmer/](http://kovyrin.github.com/db-charmer/)

我在这里错过了什么吗？奇怪的是，连接到多个数据库既简单又优雅，但迁移它们需要黑客攻击。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T21:07:45.603

啊，其实很简单:-D

在 Rails 3 中：

```
class CreateAPIRequestLogs < ActiveRecord::Migration
  def connection
    SpecialClassWithAlternativeDB.connection
  end

  def change
    # ... your migration code ...
  end
end 
```

但是，回滚似乎无法正常工作。

此外，模式版本仍保留在主数据库中。

# excel - Excel 2010 的默认油门值是多少

> ID：10287167
> 
> 赞同：0
> 
> 时间：2012-04-23T19:45:02.443
> 
> 标签：excel, throttling, rtd

我从[http://msdn.microsoft.com/en-us/library/aa140060(v=office.10).aspx](http://msdn.microsoft.com/en-us/library/aa140060(v=office.10).aspx)看到 Excel 2002 的数据限制值为 2 秒。但我找不到 Excel 2003、2007 和 2010 的默认值。我假设它们也是 2 秒。但只是想确定一下。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T19:56:17.243

您可以通过注册表以两种方式检查该值： `HKCU\Software\Microsoft\Office\14.0\Excel\Options\RTDThrottleInterval`

[用你的office版本替换14.0]

..或通过 Excel 的 VBA 编辑器中的即时窗口：

```
? Application.RTD.ThrottleInterval 
```

我在 Office 2010 中得到 2000 毫秒。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T10:27:33.957

Excel 2010 和 2013 的默认值为`2000 milliseconds`. 请参阅以下 MSDN 链接：

[办公室 2010](http://msdn.microsoft.com/en-us/library/office/ff837824%28v=office.14%29.aspx)

[办公室 2013](http://msdn.microsoft.com/en-us/library/office/ff837824%28v=office.15%29.aspx)

# python - Django模型继承：删除子类保留超类

> ID：10287169
> 
> 赞同：5
> 
> 时间：2012-04-23T19:45:03.800
> 
> 标签：python, django, django-models, django-orm

在 django 中处理模型继承时，是否可以删除模型子类的实例，而不删除超类本身？

使用[Django 示例](https://docs.djangoproject.com/en/dev/topics/db/models/#multi-table-inheritance)，您可以仅删除`Resturaunt`对象并保留`Place`对象吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-13T07:09:33.873

昨天我正在寻找这个问题的答案，我想出了这个解决方案，这对我的问题来说已经足够了，但可以根据需要扩大规模。

假设你有一个 Restaurant 和一个 Place django 模型，只删除一个餐厅而不触及 Place 表内的行的方法是创建一个像这样的“假”餐厅模型：

```
class FakeRestaurant(models.Model):
    place_ptr = models.PositiveIntegerField(db_column="place_ptr_id", primary_key=True)
    serves_hot_dogs = models.BooleanField()
    serves_pizza = models.BooleanField()

    class Meta:
        app_label = Restaurant._meta.app_label
        db_table = Restaurant._meta.db_table
        managed = False 
```

现在，您可以从该表中检索对象，就好像它没有绑定外部关系一样：

```
place = Place.objects.get(pk=1)
restaurant = Restaurant.objects.get(pk=1)
fake_restaurant = FakeRestaurant.objects.get(pk=1)
fake_restaurant.delete() 
```

fake_restaurant 和餐厅将不复存在，地方将保持不变。

干杯，戴维德

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-01-25T16:40:03.100

在 Django 1.9 中，参数`keep_parents`被添加到模型`delete()`函数中，所以要保持父母只需调用：

```
restaurant.delete(keep_parents=True) 
```

文档：[https ://docs.djangoproject.com/en/1.10/ref/models/instances/#django.db.models.Model.delete](https://docs.djangoproject.com/en/1.10/ref/models/instances/#django.db.models.Model.delete)

**更新：**

显然，此功能在 Django 1.9 中**无法**正常工作，请查看评论。

# c# - 强制自定义 mvc 数据注释验证器按要求工作

> ID：10287172
> 
> 赞同：0
> 
> 时间：2012-04-23T19:45:16.770
> 
> 标签：c#, model-view-controller, validation, model, data-annotations

我为其中一个表单字段编写了一个自定义数据验证器，它完成了这项工作，但是表单仍在提交中，并且没有向用户返回错误消息。

有没有办法可以强制用户显示错误并阻止提交表单？

```
 [CheckDateInPast(ErrorMessage = "Your date cannot be in the future.")]
  .
  .
  .

 @Html.ValidationMessageFor(model => model.MyField) 
```

如何使我的自定义验证器作为 [Require] 属性工作，以便用户无法提交任何不符合我的标准的内容。

先感谢您 ！

编辑。这是验证器。我的意思是验证提供的日期不是将来的日期，并且不小于 SQL Server 中允许的日期。

```
 public override bool IsValid(object value)
    {
        DateTime date;

        bool success = DateTime.TryParse(value.ToString(), out date);
        if (!success)
            return false;

        if (date < System.Data.SqlTypes.SqlDateTime.MinValue || date > DateTime.Now)
            return false;

        return true;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T19:58:04.573

您需要通过实现[IClientValidatable](http://msdn.microsoft.com/en-us/library/system.web.mvc.iclientvalidatable%28v=vs.98%29.aspx)接口来启用客户端验证，以防止表单被提交无效数据。

有关详细信息，请参阅以下内容：

*   [在 MVC 3 中创建自定义验证属性](http://www.codeproject.com/Articles/301022/Creating-Custom-Validation-Attribute-in-MVC-3)
*   [ASP.net MVC 通用客户端和服务器端验证](http://www.dotnetstep.in/asp-net-mvc-generic-client-and-server-side-validation)

# ios - 编程多行混合 uiview 类型文本

> ID：10287175
> 
> 赞同：4
> 
> 时间：2012-04-23T19:45:24.003
> 
> 标签：ios, uiview, uibutton, comments, uilabel

我将如何优雅地实现包含链接、纯文本和格式化单词组合的多行文本？现在，我所能想到的就是将每个单词分解成一个标记并以不同的方式显示/定位它（UILabel、UIButton 等），但是，这是非常低效的。这是我试图从 Instagram 的评论功能中实现的一个示例。

![Instagram 评论](../Images/3e35d4c998c61f81144368dc6ffed1c0.png)

注意，到用户名的格式化链接、缩进的多行文本以及到主题标签的内联链接的可能性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T17:59:12.183

**编辑 9 月 14 日**

所以我能够使用[FTCoreTextView](https://github.com/FuerteInternational/FTCoreText)实现一些非常相似的东西 。导入/实现很简单。我在我的 ARC 项目中将代码用作静态库。

以下是核心组件：

*   我使用一种方法来设置我的单元格的样式`FTCoreTextView`

    ```
     (NSArray *)getCoreTextStyle{
        NSMutableArray *result = [NSMutableArray array];

        FTCoreTextStyle *defaultStyle = [FTCoreTextStyle new];
       defaultStyle.name = FTCoreTextTagDefault;    //though the default name is already set to FTCoreTextTagDefault
       defaultStyle.font = [UIFont fontWithName:@"Helvetica Neue" size:14.f];
       defaultStyle.textAlignment = FTCoreTextAlignementLeft;
       [result addObject:defaultStyle];

           FTCoreTextStyle *linkStyle = [defaultStyle copy];
       linkStyle.name = FTCoreTextTagLink;
       linkStyle.color = [UIColor blueColor];//[del colorWithHexString:@"3aa98"];
           linkStyle.font = [UIFont fontWithName:@"Helvetica Neue" size:14.f];
        [result addObject:linkStyle];

            return  result;
     } 
    ```

*   然后在您的单元格中，您将设置视图的文本、分配委托等。（我的`FTCoreTextView`覆盖 a 的纯`IBOutlet`文本`UIView`）

    ```
    [myFTTView setDelegate:self];
    [myFTTView addStyles:[self getCoreTextStyle]];
    [myFTTView setText:[self parseLinks:text]];
    [myFTTView setNeedsDisplay]; 
    ```

*   解析链接是我单独定义的一种方法，用于搜索主题标签和用户名，然后在找到它们时设置样式（此代码很粗糙，还有很多需要改进的地方。我正在考虑切换到已经有代码搜索主题标签和 @的[CoreTextHyperlink](https://github.com/jasarien/CoreTextHyperlinkView)用户名。）

    ```
    -(NSString *) parseLinks: (NSString *)cap{
       NSArray *split = [cap componentsSeparatedByString:@" "];
       NSMutableArray *words = [[NSMutableArray alloc] initWithArray:split];

          for (NSString *word in split){

             if([word hasPrefix:@"#"] || [word hasPrefix:@"@"]){

                NSString *reformat = [NSString stringWithFormat:@"%@%@|%@%@", hashlink,word, word, endhashlink];
                [words replaceObjectAtIndex:[split indexOfObject:word] withObject:reformat];
            }

        }
        return [words componentsJoinedByString:@" "];
    } 
    ```

*   最后但并非最不重要的一点是，单击标签/用户名后调用的方法

    ```
    - (void)coreTextView:(FTCoreTextView *)acoreTextView receivedTouchOnData:(NSDictionary *)data {

        NSString *key = [data objectForKey:@"url"];
        if([key hasPrefix:@"#"]){
           //do something for tag
        }
       else{
          //do something for user.
       }

       return;

       } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T12:38:19.610

我能想到的两种方法：

*   将 CoreText 与`NSAttributedString`s 一起使用。很难实现，尤其是对于链接（您必须在某处注册一个侦听器，计算您“单击”的“链接”，...），但提供了最佳性能。
*   使用 a`UIWebView`并即时编写 HTML。性能较差，但更灵活。

# php - php时区服务器夏令时

> ID：10287178
> 
> 赞同：1
> 
> 时间：2012-04-23T19:45:31.887
> 
> 标签：php, date, timezone

我对服务器中的夏令时有疑问。

在 php.ini 中，我添加了以下行：

```
date.timezone = "Europe/Lisbon" 
```

服务器时间戳很棒。但是几周前，里斯本已经进入夏季，现在是格林威治标准时间 +1000。

服务器上运行的脚本延迟了 1 小时...

我怎样才能解决这个问题？

谢谢，

强化学习

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T19:50:23.920

用作`UTC`您的时区。它基本上是格林威治标准时间，但没有夏令时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T19:50:24.590

而不是修改 php.ini 文件。

利用 `date_default_timezone_set('timezone here');`

所以试试..

`date_default_timezone_set('Europe/Lisbon');`

# excel - 使用 Apache POI 读取 MS excel

> ID：10287181
> 
> 赞同：0
> 
> 时间：2012-04-23T19:45:36.127
> 
> 标签：excel, apache-poi

我们有一个 excel 文件，它使用了很多内置的`formulas`,`vlookups`等`Macros`。我们需要将此 excel 转换为基于 Web 的解决方案。

我们可以用`Apache POI`这个吗？

当我们浏览文档时，我们看到它每次都读取 excel 然后评估公式。但是对于访问应用程序的多个用户，我们不确定每次阅读excel和评估公式是否好。我们可以将所有的 excel 公式转换为 Java 代码中的方法并从那里调用它吗？这可以从`Apache POI`?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T19:59:12.750

在将记录插入数据库之前，在客户端进行预处理的记录计数非常高时，我在 excel / access 与 VBA 的集成和 Java Hibernate 中的一些东西方面做了很多工作。

我遇到过很多这样的案例，其中数据正在通过几千行代码和几个由其他公式驱动的公式进行查询等等。这个问题听起来像是超出了 Apache POI 的范围。POI 旨在从或多或少的静态文件中提取数据，因为您的数据听起来像我自己的很多工作一样动态得多。恐怕网络解决方案需要重新设计，我想不出一个简单的解决方案。

尝试重新检查您使用的数据，看看您可以在服务器端处理多少数据，并将结果存储到每日表中以保持其性能。减少记录数量以尽可能限制记录集，并简化用户可能尝试在 Web 表单上启动的查询。也许你在 excel 中做的工作比你需要做的多，任何减少查询工作量的方法都更好。

后端预处理帮助我保持快速和简单，只要确保它都是自动化的并且有据可查。不希望某些管理员出现并想知道为什么有些任务每晚都在运行，并认为这并不重要，然后让您的前端运行旧的坏数据。

抱歉，希望对您有所帮助。在这种情况下，POI 对我来说似乎不是一个好的解决方案。Excel 文档有一种过于复杂的方式，请查看从源头向下钻取的方法。您可能只完成了一半的工作，只是格式化数据以便对其进行处理。一些 SQL 语句或存储的表达式可能会在很短的时间内解决它。批判所有的excel公式！

# android - MediaPlayer 变量的最大数量

> ID：10287182
> 
> 赞同：0
> 
> 时间：2012-04-23T19:45:43.553
> 
> 标签：android

我正在为 android 做一个非常简单的应用程序，但我遇到了一个我真的不知道如何解决的问题。我的应用程序有一个包含 8 个按钮的布局，当您单击它时，每个按钮都会发出声音。我只有一个活动，在 oncreate 方法中我定义了 8 个 MediaPlayer 变量，这些变量是我原始文件夹中 mp3 格式的 8 种不同声音。然后我将它们关联到每个按钮。当我在模拟器上编译应用程序时，一切正常，但是当我在手机上编译它时，声音 8 不起作用。我的意思是，当我按下与声音 8 相关联的按钮时，应用程序崩溃。我还注意到，如果我添加更多带有更多声音的按钮，则只有前 7 个声音有效，其他声音不会再起作用，其他声音会使应用程序崩溃。似乎我的 MediaPlayer 变量不能超过七个。但这没有任何意义，不是吗？

谁能帮我解决这个问题？？

提前致谢。

这是我的java代码：

```
package com.f22rumaj.org;

import android.app.Activity;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

public class MyMain extends Activity {
/** Called when the activity is first created. */

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    //set up the button sound
    final MediaPlayer mpBoton1 = MediaPlayer.create(this, R.raw.button1); 
    final MediaPlayer mpBoton2 = MediaPlayer.create(this, R.raw.button2); 
    final MediaPlayer mpBoton3 = MediaPlayer.create(this, R.raw.button3); 
    final MediaPlayer mpBoton4 = MediaPlayer.create(this, R.raw.button4); 
    final MediaPlayer mpBoton5 = MediaPlayer.create(this, R.raw.button5); 
    final MediaPlayer mpBoton6 = MediaPlayer.create(this, R.raw.button6); 
    final MediaPlayer mpBoton7 = MediaPlayer.create(this, R.raw.button7); 
    final MediaPlayer mpBoton8 = MediaPlayer.create(this, R.raw.button8);

    Button boton1=  (Button) findViewById(R.id.button_1);
    Button boton2=  (Button) findViewById(R.id.button_2);
    Button boton3=  (Button) findViewById(R.id.button_3);
    Button boton4=  (Button) findViewById(R.id.button_4);
    Button boton5=  (Button) findViewById(R.id.button_5);
    Button boton6=  (Button) findViewById(R.id.button_6);
    Button boton7=  (Button) findViewById(R.id.button_7);
    Button boton8=  (Button) findViewById(R.id.button_8);

    boton1.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            mpBoton1.start();

        }
    });

    boton2.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            mpBoton2.start();

        }
    });

    boton3.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            mpBoton3.start();

        }
    });

    boton4.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            mpBoton4.start();

        }
    });

    boton5.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            mpBoton5.start();

        }
    });

    boton6.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            mpBoton6.start();

        }
    });

    boton7.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            mpBoton7.start();

        }
    });

    boton8.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            mpBoton8.start();

        }
    });

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T19:52:41.803

哇！您不应该创建多个 MediaPlayer 实例。巨大的资源浪费，可能是导致您崩溃的原因。你没有说，但我想这是一个内存问题。将来，请包括 logcat 输出或崩溃的堆栈跟踪。

看一下 SoundPool 类。

[http://developer.android.com/reference/android/media/SoundPool.html](http://developer.android.com/reference/android/media/SoundPool.html)

网络上有很多例子。例如

[http://www.techrepublic.com/blog/app-builder/getting-your-feet-wet-in-androids-soundpool/877](http://www.techrepublic.com/blog/app-builder/getting-your-feet-wet-in-androids-soundpool/877)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T19:48:50.167

1.  考虑[`SoundPool`](http://developer.android.com/reference/android/media/SoundPool.html)改用。
2.  如果您有这么多项目，它们的名称被索引，您可能应该将它们放在地图中。这样您就可以避免为每个按钮创建单独的侦听器。例如：

    ```
    Map<Button, MediaPlayer> buttonMap = new HashMap<Button, MediaPlayer>();
    map.put((Button)findViewById(R.id.button_1), MediaPlayer.create(this, R.raw.button1));
    // same for the rest

    View.OnClickListener listener = new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            MediaPlayer selected = buttonMap.get(v);
            selected.start();
        }
    };
    for (Button b : buttonMap.keySet()) {
        b.setOnClickListener(listener);
    } 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T19:59:42.373

是的，绝对不应该使用那么多实例`MediaPlayer`，但一开始很容易犯错误。考虑这样的事情，使用单个`MediaPlayer`实例：

```
MediaPlayer mediaPlayer = new MediaPlayer();

int[] buttonIds = { R.id.button_1, R.id.button_2, R.id.button_3,
    R.id.button_4, R.id.button_5, R.id.button_6, R.id.button_7,
    R.id.button_8 };

int[] soundIds = { R.raw.button1, R.raw.button2, R.raw.button3,
    R.raw.button4, R.raw.button5, R.raw.button6, R.raw.button7, 
    R.raw.button8 };

int size = buttonIds.length;

for(int i = 0; i < size; i++) {
    (Button)findViewById(buttonIds[i]).setOnClickListener(
            new View.OnClickListener() {
        @Override public void onClick(View v) {
            if(mediaPlayer.isPlaying()) {
                mediaPlayer.stop();
            }
            mediaPlayer.reset();
            AssetFileDescriptor afd = 
                getResources().openRawResourceFd(soundIds[i]);
            mediaPlayer.setDataSource(afd.getFileDescriptor(), 
                afd.getStartOffset(), afd.getLength());
            mediaPlayer.prepare();
            mediaPlayer.start();
        }
    }
} 
```

考虑它是伪代码，因为我还没有测试过它（虽然它应该很接近），然后就接受这个想法。保留按钮 ID 数组和声音 ID 数组（将它们一起编入索引，即按钮 ID 1 应与声音 ID 1 位于同一位置）。对于每个按钮 ID，找到 View，将其转换为 Button，然后添加 onClickListener，它会重置播放器（如果正在播放），将数据源设置为关联的声音 ID，准备播放器并启动它。

作为一般规则，任何时候你看到自己重复这样的代码，你应该寻找一个更好的设计来避免它。

# javascript - three.js 是否有等效的背面可见性？

> ID：10287186
> 
> 赞同：8
> 
> 时间：2012-04-23T19:46:01.480
> 
> 标签：javascript, canvas, 3d, webgl, three.js

我有一个使用半透明 png 纹理的网格对象。

MeshBasicMaterial 是否有一个标志或选项，以便从前面可以看到对象的背面？

这是一些示例代码：

```
var texture = THREE.ImageUtils.loadTexture('world.png');

// create the sphere's material
var sphereMaterial = new THREE.MeshBasicMaterial({
    map: texture,
    transparent: true,
    blending: THREE.AdditiveAlpha
});

sphereMaterial.depthTest = false;

// set up the sphere vars
var radius = 50, segments = 20, rings = 20;

// create a new mesh with sphere geometry -
var sphere = new THREE.SceneUtils.createMultiMaterialObject(
    new THREE.SphereGeometry(radius, segments, rings),[
    sphereMaterial,
    new THREE.MeshBasicMaterial({
        color: 0xa7f1ff,
        opacity: 0.6,
        wireframe: true
        })
   ]); 
```

这将准确地渲染球体，但背面仍然不可见。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-07T18:54:33.753

执行此操作的新方法是使用 的`side`属性`material`。

**例子：**

```
new THREE.MeshPhongMaterial( { map: texture, side: THREE.BackSide } ) 
```

可能的值为`THREE.FrontSide`和。`THREE.BackSide``THREE.DoubleSide`

见：[https ://github.com/mrdoob/three.js/wiki/Migration](https://github.com/mrdoob/three.js/wiki/Migration)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-24T08:12:22.830

背面属性在网格本身中设置：

```
sphere.doubleSided = true; 
```

# xml - 如何使用 XSLT 将 XML 文件中的同级子节点合并到 XHTML 表中

> ID：10287189
> 
> 赞同：1
> 
> 时间：2012-04-23T19:46:13.507
> 
> 标签：xml, xslt, xhtml

第一次来这里。我在这个网站上搜索了很多，但没有找到与我的问题类似的例子，所以我有机会发布我的问题。

我有以下 XML 文档，我想使用 XSLT 转换将其转换为 XHTML。

XML 输入：

```
<Procedure Analyse="MyAnalysis1">
  <Identification Name="MetaTestA">
    <Blah Name="TestA" Result="1" /> 
    <Blah Name="TestB" Result="2" /> 
  </Identification>
  <Identification Name="MetaTestB">
    <Blah Name="TestB" Result="3" /> 
    <Blah Name="TestC" Result="4" /> 
 </Identification>
</Procedure> 
```

预期的 XHTML 输出：

```
<table>
  <thead>
    <tr>MyAnalysis1</tr>
    <tr>
      <td></td>
      <td>MetaTestA</td>
      <td>MetaTestB</td>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>TestA</td>
      <td>1</td>
      <td></td>
    </tr>
    <tr>
      <td>TestB</td>
      <td>2</td>
      <td>3</td>
    </tr>
    <tr>
      <td>TestC</td>
      <td></td>
      <td>4</td>
    </tr>
  </tbody>
</table> 
```

所以基本上我想让每列成为 MetaTest 名称，而行成为 MetaTestA 和 MetaTestB 的 Blah.Name 和 Blah.Result（可能有任意数量的列）

我很难弄清楚如何将两个表中的数据合并在一起（请参阅具有两个测试结果的 TestB），以便它们可以显示在同一行上。TestC 的同样问题应该只在第二列。

谢谢您的帮助，

问候

安德烈-克劳德

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T22:17:40.990

这是一个分组问题。您需要按名称对测试结果进行分组。如何执行此操作取决于您使用的是 XSLT1.0 还是 XSLT2.0。我将向您展示 XSLT1.0 解决方案，它使用了一种称为**Muenchian**分组的技术。

您将首先定义一个保持来查找您的测试元素

```
<xsl:key name="Tests" match="Blah" use="@Name"/> 
```

然后，要找到每个组中的第一个测试结果（对应于输出表中的行），您可以这样做

```
<xsl:apply-templates 
   select="Identification/Blah[generate-id() = generate-id(key('Tests', @Name)[1])]"/> 
```

即找到恰好是该名称的键中的第一个元素的**Blah元素。**

然后，对于每个**Blah元素，输出与****标识**元素对应的结果。

这是完整的 XSLT：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>
   <xsl:key name="Tests" match="Blah" use="@Name"/>
   <xsl:template match="Procedure">
      <table>
         <thead>
            <tr>
               <td rowspan="{count(Identification) + 1}">
                  <xsl:value-of select="@Analyse"/>
               </td>
            </tr>
            <tr>
               <td/>
               <xsl:apply-templates select="Identification" mode="header"/>
            </tr>
         </thead>
         <tbody>
            <xsl:apply-templates select="Identification/Blah[generate-id() = generate-id(key('Tests', @Name)[1])]"/>
         </tbody>
      </table>
   </xsl:template>

   <xsl:template match="Identification" mode="header">
      <td>
         <xsl:value-of select="@Name"/>
      </td>
   </xsl:template>

   <xsl:template match="Identification" mode="test">
      <xsl:param name="Name"/>
      <td>
         <xsl:value-of select="Blah[@Name=$Name]/@Result"/>
      </td>
   </xsl:template>

   <xsl:template match="Blah">
      <tr>
         <td>
            <xsl:value-of select="@Name"/>
         </td>
         <xsl:apply-templates select="//Identification" mode="test">
            <xsl:with-param name="Name" select="@Name"/>
         </xsl:apply-templates>
      </tr>
   </xsl:template>
</xsl:stylesheet> 
```

应用于您的示例 XML 时，将输出以下内容

```
<table>
   <thead>
      <tr>
         <td rowspan="3">MyAnalysis1</td>
      </tr>
      <tr>
         <td/>
         <td>MetaTestA</td>
         <td>MetaTestB</td>
      </tr>
   </thead>
   <tbody>
      <tr>
         <td>TestA</td>
         <td>1</td>
         <td/>
      </tr>
      <tr>
         <td>TestB</td>
         <td>2</td>
         <td>3</td>
      </tr>
      <tr>
         <td>TestC</td>
         <td/>
         <td>4</td>
      </tr>
   </tbody>
</table> 
```

（在 XSLT2.0 中，您可以使用**xsl:for-each-group**来简化分组）

# ruby-on-rails-3 - Rails 验证器存在和格式之间的差异

> ID：10287193
> 
> 赞同：4
> 
> 时间：2012-04-23T19:46:19.677
> 
> 标签：ruby-on-rails-3, validation

我有一个带有电子邮件地址的模型，但我不想要求它来创建实例。我尝试了以下方法：

```
validates :email, :presence => false, :format => { :with => email_regex } 
```

但这使我的测试套件失败，格式正则表达式显然需要电子邮件属性的存在。

我认为这可能是一种`before_save`方法：是否可以拒绝将对象保存在`before_save`方法中？有没有更好的“Rails 方式”来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T20:21:29.243

您可以使用`:allow_blank`（或`:allow_nil`）：

```
validates :email, :allow_blank => true, :format => { :with => email_regex } 
```

# bash - 无法理解脚本中的参数替换

> ID：10287197
> 
> 赞同：1
> 
> 时间：2012-04-23T19:46:35.830
> 
> 标签：bash

我试图理解一个 bash[脚本](http://mostly.harmless.evilcoder.org/2011/file-integrity-on-mac-os-x/)，它的前四行是：

```
#!/bin/sh
SCRIPT="`basename $0 | sed 's/\..*$//'`"
CONFIG=${1:-$HOME/.$SCRIPT}
DIR=${2:-$HOME/Documents} 
```

我知道最后两行正在对作为脚本参数 1 和 2 的路径输入进行参数替换，但我一直无法弄清楚这是如何工作的（例如[这里](http://tldp.org/LDP/abs/html/parameter-substitution.html#PSUB2)）。“：-”部分是什么意思？对不起新手问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T19:55:57.947

来自`man bash`：

```
 ${parameter:-word}
          Use Default Values.  If parameter is unset or null, the expansion of word is substituted.  Other‐
          wise, the value of parameter is substituted. 
```

很容易找到，用`man bash`，然后`/``:-`。斜杠引入了搜索，并且`:-`只是要搜索的内容。否则，在 bash 中搜索会变得很无聊，因为它很大，但在这里它是第一个命中。

# node.js - 最新的mongodb原生驱动够成熟可以用吗？

> ID：10287198
> 
> 赞同：0
> 
> 时间：2012-04-23T19:46:35.910
> 
> 标签：node.js, mongodb, gridfs

最新的 mongodb 本机驱动程序是否足够成熟，可以在生产环境中与 GridFS 一起使用，或者在大型项目中作为规范使用？

参考[http://mongodb.github.com/node-mongodb-native](http://mongodb.github.com/node-mongodb-native)

我想考虑快速变化的惯例，而不是技术的成熟度。简而言之，选择一个版本作为高配置生产环境的规范是否安全？

我对该技术的有限经验不允许我确定在锁定规范场景中使用是否安全，甚至根据长期支持（也称为 Ubuntu）锁定版本，其中修复/安全补丁可以，而不是版本变化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T20:24:10.093

是的。该驱动程序已经足够成熟，可以在生产中使用。它已经在许多高调的 Node.js 部署中使用，并支持与现有 MongoDB 驱动程序相当的功能集。它也通过了与其他 MongoDB 驱动程序相同的测试，并且性能足够好。

在 MongoDB 方面，不应该担心快速变化的约定。该 API 在过去的几个版本中显示出稳定性，并且在许多版本中没有引入任何重大更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T15:58:34.597

您真的确定要在您所描述的那种环境中使用年轻的技术吗？一个项目需要非常成熟才能开始对旧版本进行长期支持。

同样在开源世界中，您很少看到项目本身提供任何类型的长期支持。相反，您有像 Canonical 和 RedHat 这样的公司将补丁反向移植到他们特定版本的即 MySQL。[10Gen](http://www.10gen.com)是 MongoDB 和 mongodb-native 背后的公司，他们将是询问长期支持的合适人选。

我对 mongodb-native 的经验是，这是一个非常快速改进的项目，你真的需要跟上正在发生的事情。我不想支持任何 mongodb-native 版本在未来 n 年内一成不变的东西。

话虽如此，如果您准备好跟上它们的快速发展，那么 MongoDB、Node.JS 和 mongodb-native 肯定已经为生产做好了准备。

# html - 如何在perl中使用正则表达式从字符串中获取匹配的子字符串

> ID：10287199
> 
> 赞同：-3
> 
> 时间：2012-04-23T19:46:42.233
> 
> 标签：html, perl

> **可能重复：**
> [如何在 Perl 中从 HTML 中提取 URL 和链接文本？](https://stackoverflow.com/questions/254345/how-can-i-extract-url-and-link-text-from-html-in-perl)

我正在尝试获取字符串中的子字符串。字符串中可能有多个与该名称匹配的字符串。

```
<LI>
<A
 HREF="65378161_12011_Q.pdf"> 
65378161_12011_Q.pdf

</A> 
```

从上面的字符串我想得到文件名“65378161_12011_Q.pdf”。

```
if($line=~ m/((.*)Q\.pdf)/i ){
          my $inside=$2;
           print " file name:$inside \n";
     } 
```

这是我尝试过的，但它没有得到正确的子字符串。有人可以帮忙吗。如果有人能回答我的问题，我真的很感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T20:24:35.673

[使用 HTML 解析器。](http://htmlparsing.com/)

```
use strictures;
use Web::Query qw();
my $w = Web::Query->new_from_html(<<'HTML');
<LI>
<A
HREF="65378161_12011_Q.pdf">
65378161_12011_Q.pdf

</A>
HTML

$w->find('a')->attr('href');
# expression returns '65378161_12011_Q.pdf'
$w->find('a')->text;
# expression returns ' 65378161_12011_Q.pdf ' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T19:50:23.033

请参阅以下脚本：

```
#!/usr/bin/env perl

use strict;
use warnings;

my $string = "65378161_12011_Q.pdf";

if($string =~ m/((.*)?Q\.pdf)/i ){
    my $inside=$2;
    print " file name:$inside \n";
} 
```

您的代码只是缺少“？” 告诉正则表达式不要贪婪的字符。

另一种方法是匹配自身之前不是“Q”的所有字符：

```
m/(^[^Q]+)?Q\.pdf/i 
```

**编辑**：因为您使用不同的规范编辑了您的帖子：如果您需要解析 HTML，我建议使用适当的模块：

> 不要使用正则表达式解析或修改 html！查看 HTML::Parser 的子类之一：HTML::TokeParser、HTML::TokeParser::Simple、HTML::TreeBuilder(::Xpath)?、HTML::TableExtract 等。如果您的响应开始“那是矫枉过正。我只想要到……”你错了。 [http://en.wikipedia.org/wiki/Chomsky_hierarchy](http://en.wikipedia.org/wiki/Chomsky_hierarchy)以及 为什么[不在](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)HTML 上使用正则表达式

（这是关于使用正则表达式从 irc.freenode.org 上的#perl 频道解析 HTML 的提醒）

**编辑2：**

这是一个完整的工作示例：

```
#!/usr/bin/env perl

use strict;
use warnings;

use HTML::TreeBuilder;

my $tree = HTML::TreeBuilder->new_from_content('
<LI>
<A
 HREF="65378161_12011_Q.pdf"> 
65378161_12011_Q.pdf

</A>
');

$tree->look_down("_tag", "a")->as_text =~ m/(^[^Q]+)Q\.pdf/i && print "$1\n"; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-23T19:53:56.543

自从 。将匹配所有内容，只需删除它周围的括号。

```
#!/usr/bin/perl

my $line = "65378161_12011_Q.pdf";

if ($line =~ m/(.*Q\.pdf)/i )
{
  my $inside = $1;
  print "filename = $inside\n";
} 
```

产生正确的输出。

希望能帮助到你。

曼尼

# php - 使用 PHP 的 $_GET 函数检索多个单词

> ID：10287200
> 
> 赞同：0
> 
> 时间：2012-04-23T19:47:02.150
> 
> 标签：php, get

我有一个提供关键字搜索的网站。用户可以通过从显示为超链接的一组预定义关键字中进行选择或利用同一页面上的搜索表单来执行搜索。

当用户搜索**Russian Blue Cat**时，页面 URL 中会添加以下内容：

如果使用预定义的**超链接**搜索词，则将**?keywords=Russian%20Blue%20Cat**添加到 URL，如下所示：

```
 http://mydomain.com/index.php?keywords=Russian%20Blue%20Cat 
```

如果使用**搜索表单**，则**?keywords=Russian+Blue+Cat**将添加到 URL，如下所示：

```
 http://mydomain.com/index.php?keywords=russian+blue+cat 
```

下面的 $_GET 代码行放置在**两个**PHP 文件中，一个是包含预定义超链接搜索词和搜索表单的原始**index.php文件，另一个是名为****process.php**的 PHP 文件，它利用另一个进程的关键字。

```
 if(empty($_GET['keywords'])){$keywords = '';} else {$keywords = $_GET['keywords'];} 
```

**index.php**文件中包含的上述 $_GET 代码行可以正常工作并检索所有三个关键字。在这种情况下，检索词**俄罗斯蓝猫。**

上面包含在**process.php**文件中的 $_GET 行代码不能正常工作，只能检索三个关键字中的第一个。在这种情况下，仅检索单词**Russian 。**

是否有一种简单或正确的方法来解决此问题，以便正确检索所有关键字？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T20:02:25.057

检查字符串“%20”，如果存在，按“%20”分解。否则，请检查是否存在加号并改为使用它进行爆炸。

此方法与输入相同脚本的两个源的不同输入格式无关。

需要注意的是，字符串 '%20' 或字符 '+' 不能出现在其他格式的单词中，否则会出现异常行为。

```
$keyword = array();
if(stripos($keywords,"%20")) {
    $keyword = explode("%20",$keywords);
}
else if(stripos($keywords,"+")) {
    $keyword = explode("+",$keywords);
} 
```

'$keyword' 将在一个数组中包含您的关键字。

# ios - iOS SDK 和设备设置

> ID：10287202
> 
> 赞同：2
> 
> 时间：2012-04-23T19:47:11.403
> 
> 标签：ios, settings

**iOS SDK 在以编程方式访问设备设置（通常通过设置应用程序访问）方面提供了什么？**

在阅读了 Apple 的[Preferences and Settings](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/UserDefaults/Preferences/Preferences.html)文档后，我不确定应用程序是否可以通过编程方式调整设备的亮度，或者是否可以打开/关闭 wifi。我现在正在试验`NSUserDefaults`。任何帮助或建议表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T20:09:08.933

是的，对于某些设置，您可以使用私有 API 访问它们。但是，显然，使用这些私有 API 会阻止您的应用被应用商店接受。链接： [从代码访问 iOS 设置](https://stackoverflow.com/questions/7328545/access-ios-settings-from-code) 希望这有帮助！^_^

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T20:25:50.090

Apple 的官方公共 API 不允许 iOS 应用程序访问设置应用程序中的常规设置，例如 wifi 启用。NSUserDefaults 仅允许访问由该应用程序专门创建的供自己使用的首选项和设置。

# iphone - 带有纹理的旋转球体 iOS

> ID：10287203
> 
> 赞同：1
> 
> 时间：2012-04-23T19:47:13.647
> 
> 标签：iphone, ios, opengl-es

我知道它非常基本的问题，但我找不到我正在寻找的答案。基本上我必须在相机叠加层上显示一个旋转的 3D 球体。除了在那个球体上应用纹理之外，我什么都有。这是我生成三角形条的代码。

```
int createSphere (GLfloat spherePoints[], GLfloat fRadius, GLfloat step){   
    int points = 0;

    GLfloat uStep = DEGREES_TO_RADIANS (step);
    GLfloat vStep = uStep;

    for (GLfloat u = 0.0f; u <= (2 * M_PI); u += uStep) {
      for (GLfloat v = -M_PI_2; v <= M_PI_2; v += vStep) {

        points++;
        spherePoints[(points - 1) * 3] = fRadius * cosf(v) * cosf(u);             // x
        spherePoints[((points - 1) * 3) + 1] = fRadius * cosf(v) * sinf(u);       // y
        spherePoints[((points - 1) * 3) + 2] = fRadius * sinf(v);                 // z

        points++;
        spherePoints[(points - 1) * 3] = fRadius * cosf(v) * cosf(u + uStep);             // x
        spherePoints[((points - 1) * 3) + 1] = fRadius * cosf(v) * sinf(u + uStep);       // y
        spherePoints[((points - 1) * 3) + 2] = fRadius * sinf(v);                         // z

        points++;
        spherePoints[(points - 1) * 3] = fRadius * cosf(v + vStep) * cosf(u);                  // x
        spherePoints[((points - 1) * 3) + 1] = fRadius * cosf(v + vStep) * sinf(u);            // y
        spherePoints[((points - 1) * 3) + 2] = fRadius * sinf(v + vStep);                      // z

        points++;
        spherePoints[(points - 1) * 3] = fRadius * cosf(v + vStep) * cosf(u + uStep);           // x
        spherePoints[((points - 1) * 3) + 1] = fRadius * cosf(v + vStep) * sinf(u + uStep);     // y
        spherePoints[((points - 1) * 3) + 2] = fRadius * sinf(v + vStep);                       // z
      }
    }
    return points; 
} 
```

谁能解释如何生成纹理坐标和法线？

# java - 玩！框架表单重定向不起作用

> ID：10287205
> 
> 赞同：3
> 
> 时间：2012-04-23T19:47:17.907
> 
> 标签：java, playframework, routes

我在从剧中重定向时遇到问题！形式。我认为问题在于我如何处理路线。这个想法是，用户应该能够通过 index.hmtl 使用安全密钥登录，或者直接在包含 access_token 的有效路径中输入（使用二维码重定向）来访问dashboard.html

我想做的是如下：

# 1）使用 index.html 上的表单登录（路由：Application.index）

这是我的表格（位于 index.html 中）：

```
<form action="@{Dashboard.authenticate()}" method="POST" name="login">
    <input name="key" type="password" maxlength="128" value="${flash.key}">
    <input class="button" id="btnLogin" type="submit" value="Login">
</form> 
```

# 2）认证并重定向到dashboard.html（路由：Dashboard.dashboard）

```
public static void dashboard(String access_token) {
   /*
      ...some code
   */

    render(username);
}

public static void authenticate(String key) {
   /*
      ...some code
   */
     dashboard(access_token);
} 
```

这是我的路线文件：

```
# Home page 
GET     /                   Application.index
POST    /dashboard      Dashboard.authenticate
GET     /dashboard      Dashboard.dashboard 
```

如果我通过以下 URL 直接调用仪表板（字符串 access_token），仪表板路由工作正常：[http://localhost:9000/dashboard?access_token=0000](http://localhost:9000/dashboard?access_token=0000) 但是如果我尝试使用调用身份验证的登录表单登录（字符串键) 我得到这个 URL [http://localhost:9000/dashboard?access_token&key=1234](http://localhost:9000/dashboard?access_token&key=1234)其中 key 是发送到 auth() 函数的 var。显然我的错在于路线，但我已经尝试并测试了逻辑，我 100% 确定它是正确的。我正在使用 Play 1.2.4 我在这个问题上花了两天时间，如果有任何建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T01:18:06.093

这实际上似乎是一个错误。也许试试

```
redirect("/dashboard?access_token="+access_token); 
```

代替

```
dashboard(access_token); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T07:54:03.447

Java 代码看起来不错。以防万一，您是否尝试将路由文件更改为：

```
# Home page 
GET     /                   Application.index
GET     /dashboard      Dashboard.dashboard
POST    /dashboard      Dashboard.authenticate 
```

在 POST 之前移动 GET（顺序很重要，如果该部分存在 Play 错误，则应该修复它）。

另一种选择是简单地重命名 POST 路由，以解决由具有相同“路径”的两条路由引起的问题。

```
# Home page 
GET     /                    Application.index
GET     /dashboard           Dashboard.dashboard
POST    /dashboard/auth      Dashboard.authenticate 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T15:06:55.850

问题解决了！

我忘了提...哎呀，我也在使用 jQuery Mobile，问题与 Play 有关！路由被覆盖我的 jQuery Mobile 页面路由。

我通过添加以下脚本禁用了路由：

```
$(document).bind("mobileinit", function(){
    $.mobile.ajaxEnabled = false;
    $.mobile.linkBindingEnabled = false;
    $.mobile.hashListeningEnabled = false;
    $.mobile.pushStateEnabled = false;
    $.mobile.changePage.defaults.changeHash = false;

}) 
```

使用 jQuery 网站上的说明：http: [//jquerymobile.com/test/docs/api/globalconfig.html](http://jquerymobile.com/test/docs/api/globalconfig.html)我实现了上述内容，但脚本需要按以下顺序在 .hmtml 标头中引用：

```
<script src="jquery.js"></script>
<script src="custom-scripting.js"></script>
<script src="jquery-mobile.js"></script> 
```

# javascript - 页面加载时执行 jQuery Popup？

> ID：10287207
> 
> 赞同：1
> 
> 时间：2012-04-23T19:47:19.977
> 
> 标签：javascript, jquery

我正在使用 Zurb 的 Reveal modal 插件。

[http://www.zurb.com/playground/reveal-modal-plugin](http://www.zurb.com/playground/reveal-modal-plugin)

有谁知道当我的页面完成加载而不是单击处理程序时如何让模式执行（如打开弹出框）？

每当有人打开我的主页时，我想用它来显示一条简单的消息。

我已经挖掘了代码并尝试了一些东西，但我自认是一个 jQuery 菜鸟。

我打算发布 jQuery 插件本身的全部内容，但下载它并自己查看可能会更容易。

谢谢！

:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T19:49:38.223

```
$(function() {
    $('#myModal').reveal();
}); 
```

**或者**

```
$(document).ready(function() {
    $('#myModal').reveal();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T19:50:23.143

实例化模态后，您不能只执行以下操作：

```
$(document).ready(function() {
    // instantiate modal first
    $('#myModal').reveal();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T19:50:34.237

像这样的东西应该工作：

```
<script type="text/javascript">
$(document).ready(function() {
  $('#myModal').reveal();
});
</script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-08T15:25:19.640

嘿，在使用其他 .js 库的页面上使用 JQuery NoConflict 时遇到了麻烦——在这种情况下，试试这个：

`jQuery(document).ready(function($) { $('#myModal').reveal(); });`

# jquery - 删除和添加类 和 在jQuery中

> ID：10287209
> 
> 赞同：0
> 
> 时间：2012-04-23T19:47:22.210
> 
> 标签：jquery

```
 <ul class="current">
   <li>
       <a href="#nogo"><b>Products</b>
         <div class="select_sub show">
             <ul class="sub">
              <li class="sub_show"><a href="#nogo">Add product</a></li>
             </ul>
         </div>
       </a>
  </li>
</ul>

<ul class="select">
   <li>
       <a href="#nogo"><b>Item</b>
         <div class="select_sub">
             <ul class="sub">
              <li><a href="#nogo">Add Item</a></li>
             </ul>
         </div>
       </a>
  </li>
</ul> 
```

1.单击项目链接后，我想在当前 ul 当前类中添加类并删除其他表单，它通过此代码工作

```
$("ul").click(function(e){

  e.preventDefault();

 $(this).addClass("current").siblings().removeClass("current").addClass("select");

}); 
```

我对第二点有疑问

1.  当我单击项目链接时，我想添加类**select_sub 显示**哪个 div 有类 select_sub

我的意思是说（如果我点击项目链接）

```
<ul class="select">
 <li>
   <a href="#nogo"><b>Products</b>
     <div class="select_sub">
         <ul class="sub">
          <li><a href="#nogo">Add product</a></li>
         </ul>
     </div>
   </a>
</li>
</ul>

<ul class="current">
 <li>
    <a href="#nogo"><b>Item</b>
      <div class="select_sub show">
         <ul class="sub">
          <li class="sub_show"><a href="#nogo">Add Item</a></li>
         </ul>
      </div>
   </a>
</li>
</ul> 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T19:54:33.943

如果我正确理解了您的问题，那么下面应该可以解决问题。

```
$("ul").click(function(e){    
    e.preventDefault();
    var $this = $(this);
    var $siblings = $(this).siblings();

    $this.addClass("current"); //probably need to add .removeClass('select')
    $this.find('.select_sub').addClass('show');

    $siblings.removeClass("current").addClass('select');
    $siblings.find('.select_sub').removeClass('show');

}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-23T19:53:51.020

这应该这样做：

```
$("ul").click(function(e){
   e.preventDefault();
   $(".current").addClass("select"); //Add the default "select" class to any "current"
   $(".current").removeClass("current"); //Remove "current" from any "current"
   $(this).removeClass("select"); //Remove "select" from the clicked UL
   $(this).addClass("current"); //Add "current" to the clicked UL
}); 
```

如果你愿意，你可以用两行来调用它们，但我认为这更容易阅读。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-23T19:54:11.900

应该像添加一样简单：

```
$('.current .select_sub').addClass('show'); 
```

# tomcat - 为什么我需要关闭彗星事件来发送数据？(tomcat 6)

> ID：10287210
> 
> 赞同：2
> 
> 时间：2012-04-23T19:47:26.383
> 
> 标签：tomcat, tomcat6, comet

我在tomcat 6上使用comet从服务器推送数据，如下所述：http: [//www.ibm.com/developerworks/web/library/wa-cometjava/](http://www.ibm.com/developerworks/web/library/wa-cometjava/)

我的问题很简单：如果我在and`event.close();`之后不做 a ，那么数据似乎不会发送到客户端，因为 the没有被调用。`writer.print``writer.flush``onreadystatechange``XMLHttpRequest`

正常吗？

因此，每次接收数据时，我都需要向服务器发送一个新请求，因为需要关闭连接才能发送数据。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T21:03:23.450

不，Chrome、Safari、FireFox 不正常。因为在事件 readystate.LOADED 上，它可以在客户端处理来自服务器的数据

```
/**
* @param {string} url
* @param {function(*)} callback 
* @param {boolean} reload */
archiva.io.streamXhr = function(url, callback) {

    var xhr = new goog.net.XhrIo();
    var lastIndex = -1;
    var delimiter = '\n';

    goog.events.listen(xhr, goog.net.EventType.READY_STATE_CHANGE, function() {
        // As more data is loaded, look for the next delimiter so the JSON can // be extracted, parsed, and passed to the callback.

        if ( xhr.getReadyState() > goog.net.XmlHttp.ReadyState.LOADED ) {
            var str = xhr.getResponseText();
            var index;
            while ((index = str.indexOf(delimiter, lastIndex + 1)) != -1) {
                var json = str.substring(lastIndex + 1, index);
                callback(json);
                lastIndex = index;
            }
        }

        if (xhr.isComplete()) {
            // Reconnect if the response finishes for any reason.
            archiva.io.streamXhr(url, callback);
            xhr.dispose();
        }
    });

    xhr.send(url, 'POST'); 
}; 
```

并且 xhr.getReadyState() 没有这样的浏览器将是 3 并且**getResponseText()**将返回响应文本（当服务器端执行 writer.flush() 并且不需要 writer.close() 时）。

但是由于 IE < 10，在 state = 3 上不可能**getResponseText()**，只有 state == 4。并且 state 4 是关闭的状态。这就是为什么在刷新数据后需要关闭连接，因为其他情况下 IE 将继续加载数据并且永远不会处理它。但是可以在服务器端和关闭后管理数据量；

看这个链接，如何实现[tomcat 7 comet](http://tomcat.apache.org/tomcat-7.0-doc/aio.html)

希望这有帮助

# asp.net - ASP.NET 身份验证票证是如何加密的？

> ID：10287214
> 
> 赞同：2
> 
> 时间：2012-04-23T19:47:43.130
> 
> 标签：asp.net, authentication, forms-authentication

我正在使用 ASP.NET Forms 身份验证方法并在 machinekey 标记中使用某些加密和解密密钥，并将slidingexpiration 设置为 true 和 20 分钟超时。现在我有一个问题：如果有人窃取了我的 cookie，他/她可以在任何地方使用我的帐户登录吗？（因为加密始终是不变的）如果答案是否定的，那么每个请求中的 cookie 值如何变化？

谢谢

已编辑：如果每个请求中的 cookie 都发生变化，加密密钥存储在哪里？以及应用程序如何知道解密数据的密钥是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T20:03:48.850

cookie 保存表单身份验证票证。通过滑动身份验证，存储在票证中的日期可以使用服务器检查的任何请求进行更新。这就是为什么您会看到 cookie 值发生变化的原因。

cookie（或票证）很容易被盗，当然可以用来劫持会话。有关详细信息，请参阅此[Microsoft 文章](http://msdn.microsoft.com/en-us/library/ff648341.aspx)。

# objective-c - 我是否需要保留自定义 NSURLConnection 包装器对象的所有权？（在 ARC 环境中）

> ID：10287222
> 
> 赞同：2
> 
> 时间：2012-04-23T19:48:11.150
> 
> 标签：objective-c, cocoa-touch, automatic-ref-counting, ios-4.2

注意：[这个类似的 SO question](https://stackoverflow.com/questions/9829653/ios4-implementation-of-nsurlconnection-sendasynchronousrequestqueuecompletio)讨论了如何构建相同的类，但没有解决我与使用该类相关的内存管理问题。

我想使用`sendAsynchronousRequest:queue:completionHandler:`，但我需要支持 iOS 4.2。因此，我创建了一个名为的自定义类`JCURLRequest`，它使用`NSURLConnection`并生成了一个不错的接口：

```
- (void)sendRequest:(NSURLRequest *)request 
    responseHandler:(JCURLResponseHandler)responseHandler; 
```

我有一个关于使用这个类的问题（我在 ARC 内存管理中）：

*   当我创建我的 JCURLRequest 对象时，我需要保留对该对象的引用吗？还是我可以“开火然后忘记它”？

注意：我了解 ARC 的基础知识 - 如果您有一个指向对象的指针，它将保持活动状态，如果没有更多指向对象的指针，它将在下一个自动释放池中释放。

因此，我想知道 - 我可以像（1）那样称呼它还是我需要使用（2）

(1)

```
JCURLRequest *jcURLRequest = [[JCURLRequest alloc] init];
[jcURLRequest sendRequest:myRequest
          responseHandler:^(NSData *data, NSError *error) { ... }];
// Assuming I don't maintain a reference to jcURLRequest after this 
```

(2)

```
// Assume @property (strong) JCURLRequest *jcURLRequest;
//        @synthesize jcURLRequest = _jcURLRequest;
self.jcURLRequest = [[JCURLRequest alloc] init];   
[self.jcURLRequest sendRequest:myRequest
          responseHandler:^(NSData *data, NSError *error) { ... }]; 
```

`NSURLConnection`使用异步回调，所以我的想法是我必须使用（2）。这是因为 - 当委托回调“回调”时，jcURLRequest 实例可能已经在自动释放池中被清理了。

不过我很困惑，因为我已经用 (1) 进行了测试，它“似乎”工作正常。但是，我的想法是，它的工作可能只是巧合 - 即。确实没有更多指向 jcURLRequest 对象的有效指针，但 iOS 只是还没有解决它。

以下是完整的`JCURLRequest`课程供参考

```
//  JCURLRequest.h
#import <Foundation/Foundation.h>

typedef void (^JCURLResponseHandler) (NSData *data, NSError *error);

@interface JCURLRequest : NSObject
- (void)sendRequest:(NSURLRequest *)request responseHandler:(JCURLResponseHandler)responseHandler;
@end

//  JCURLRequest.m
#import "JCURLRequest.h"

@interface JCURLRequest ()
{
    JCURLResponseHandler responseHandler;
}
@property (strong, nonatomic) NSMutableData *responseData;
@end

@implementation JCURLRequest
@synthesize responseData = _responseData;

#pragma mark - Public API

- (void)sendRequest:(NSURLRequest *)request responseHandler:(JCURLResponseHandler)handler
{
    responseHandler = [handler copy];
    dispatch_async(dispatch_get_main_queue(), ^{
        __unused NSURLConnection *connectionNotNeeded = [[NSURLConnection alloc] initWithRequest:request delegate:self];
    });
}

#pragma mark - Private API

- (NSMutableData *)responseData
{
    if (!_responseData) 
    {
        _responseData = _responseData = [[NSMutableData alloc] initWithLength:0];
    }

    return _responseData;
}

#pragma mark - URL Connection Methods

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response 
{
    [self.responseData setLength:0];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data 
{
    [self.responseData appendData:data];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error 
{
    responseHandler(nil, error);
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection 
{    
    responseHandler([NSData dataWithData:self.responseData], nil);
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T20:31:19.887

我建议保留`JCURLRequest`安全和正确。以下面的代码为例：

```
@interface AsyncObject : NSObject
{
    BOOL ivar;
}
-(void)sendRequest:(void(^)()) callback;
@end

@implementation AsyncObject
-(void)sendRequest:(void (^)())callback
{
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        NSLog(@"Starting Long Async Task");
        sleep(15);
        //ivar = YES;
        NSLog(@"Calling Callback");
        callback();
    });
}
-(void)dealloc
{
    NSLog(@"Deallocated!");
}
@end

    ...
    [[[AsyncObject alloc] init] sendRequest:^{ NSLog(@"Called Back"); }]; 
```

如果你留下`ivar`注释掉，打印出来的第一件事就是`Deallocated!`这意味着`AsyncObject`在请求完成之前就被释放了。现在，如果您取消注释`ivar`，那么`Deallocated!`现在应该是最后一个，因为该块正确保留了正确的值。但是，如果调度使用`_weak`对`self`.

```
__weak AsyncObject *self_ = self;
    ... //Inside gcd async method
    self_->ivar = YES; //This will break 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T21:09:35.900

NSURLConnection 在连接处于活动状态时保留它的委托，以及它自己。因此，您的解决方案有效并非巧合。

我找不到任何官方消息来源，但已在 SO 上非正式地确认：

*   [对 NSURLConnection 的 retainCount 有点困惑](https://stackoverflow.com/questions/5220902/been-having-a-little-confusion-about-the-retaincount-of-nsurlconnection)

*   [NSURLConnection 是否保留其委托？](https://stackoverflow.com/questions/1101867/does-a-nsurlconnection-retain-its-delegate)

# c# - 如何将 point3d 数组从笛卡尔坐标转换为球坐标系？

> ID：10287227
> 
> 赞同：-1
> 
> 时间：2012-04-23T19:48:29.760
> 
> 标签：c#, .net, geometry

如何将 point3d 数组从笛卡尔坐标转换为球坐标系（假设其几何中心在球坐标系中为 0,0,0）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T19:59:01.157

[从Wikipedia](http://en.wikipedia.org/wiki/Spherical_coordinate_system)复制公式，将其应用于数组中的每个条目：

```
r = Math.Sqrt(p.X*p.X + p.Y*p.Y + p.Z*p.Z);
if (r == 0) {
  theta = 0;
  phi = 0;
} else {
  theta = Math.Acos(p.Z/r);
  phi = Math.Atan2(p.Y, p.X);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-23T20:02:37.173

是的，这是完全可能的。所以看这里的[球坐标](http://mathworld.wolfram.com/SphericalCoordinates.html)和这里[的 C# 中的球坐标](http://www.codeproject.com/Articles/18160/Spherical-Coordinates-in-C)。您可以通过阅读这些文章来实现您想要的。我没有发现任何问题。所以，如果有什么你不明白的评论。

这是一些代码：

```
public Point3 Spherical(float r, float theta, float phi) 
{
    Point3 pt = new Point3();
    float snt = (float)Math.Sin(theta * Math.PI / 180); 
    float cnt = (float)Math.Cos(theta * Math.PI / 180); 
    float snp = (float)Math.Sin(phi * Math.PI / 180); 
    float cnp = (float)Math.Cos(phi * Math.PI / 180); 
    pt.X = r * snt * cnp; 
    pt.Y = r * cnt; 
    pt.Z = -r * snt * snp; 
    pt.W = 1; 
    return pt; 
} 
```

# juice-ui - 在代码隐藏中使用 JuiceUI 的 AutoComplete 控件时如何设置标签/值？

> ID：10287239
> 
> 赞同：1
> 
> 时间：2012-04-23T19:49:14.283
> 
> 标签：juice-ui

JuiceUI AutoComplete 控件接受一个字符串 [] 作为 Source 属性，但在文档中它说您可以使用标签/值对。我一开始对 jQuery 自动完成的东西不是很熟悉，在搜索了一段时间后，我似乎找不到正确的语法来完成这项工作。谁能帮我吗？我正在寻找这样的东西：

```
UserAutoComplete.Source = users.Select(u => new { label = u.Id, value = u.Name}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:52:24.893

不错的收获。请在此处将其作为问题提交：[https](https://github.com/appendto/juiceui/issues) ://github.com/appendto/juiceui/issues ，我们将在那里为下一个版本修复。

同时，我会使用单独的地图将标签映射到实际值。这有点老套，但在我们更新之前它会帮助你度过难关，而且更新后的代码会很容易过渡。

# powershell - Powershell 脚本从 OU 列表中创建新组，然后将 OU 中的用户对象添加到组中

> ID：10287243
> 
> 赞同：1
> 
> 时间：2012-04-23T19:49:36.470
> 
> 标签：powershell, active-directory, powershell-2.0

我创建了一个脚本，它将查询 AD 中的 OU，将它们输出到一个文件中，然后将从文件中创建一个组，并对新组名稍作修改。这部分在这里起作用的是代码：

```
## Load Quest ActiveRoles ADManagement PSSnapin if not already loaded
if ((Get-PSSnapin -Name "Quest.ActiveRoles.ADManagement" -ErrorAction SilentlyContinue) -eq $null) { 
  Add-PsSnapin "Quest.ActiveRoles.ADManagement" } 

cd \
cls

$Type = "Security"
$Scope = "Global"
$Domain = "abc.org"

## Get Organizational Units

Get-QADObject -Type OrganizationalUnit `
| Select-Object Name, Path, DN, CanonicalName ` | Export-Csv -Path "c:\scripts\test\ou.csv" -NoTypeInformation

## Create Security Groups from Organizational Units
$Pre = "123abc"
$ou  = "ou=123abc,ou=Groups,ou=User Accounts,dc=abc,dc=org"
Import-Csv -Path "c:\scripts\test\ou.csv" | foreach {New-QADGroup -name ($Pre+$_.name) -parent $ou -sam ($Pre+$_.name)} 
```

我遇到的问题是这个。如何从每个 OU 中获取用户对象并将它们放在单独的 csv 文件中。我有一小段代码适用于单个 OU。

```
$OuDomain = "OU=123abc,OU=Users,OU=User Accounts,DC=abc,DC=org"
Get-QADUser -SizeLimit 0 -searchRoot $OuDomain `
| Select-Object name, SamAccountName, UserPrincipalName `
| Export-Csv -Path "c:\scripts\test\123abc.csv" -NoTypeInformation 
```

之后，我应该能够将用户添加到新组中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T04:06:05.403

**首先**，如果您使用的是 PowerShell V2.0，您可以在 W2K8R2 上使用 Microsoft ActiveDirectory 模块。

```
Add-ADGroupMember -Identity MonGroupe -Member massin 
```

**其次**，一旦您从 OU 中获得了用户，您就会对该`distinguishedName`属性感兴趣。您只需将每个用户的 distinctName 分配给`member`新组的属性。

我没有安装 Quest ADManagement PSSnapin，所以这里有一个简单的 ADSI 示例：

```
# Starting OU
$MonOU = New-Object System.DirectoryServices.DirectoryEntry ("LDAP://192.168.234.200:389/ou=Monou,dc=dom,dc=fr","administrateur@dom.fr","admin")

# Group creation
$MonGroupe = $Monou.Create("Group", "cn=MonGroupe")
$ADS_GROUP_TYPE_GLOBAL_GROUP = 0x00000002
$ADS_GROUP_TYPE_SECURITY_ENABLED = 0x80000000
$groupeType = $ADS_GROUP_TYPE_SECURITY_ENABLED -bor $ADS_GROUP_TYPE_GLOBAL_GROUP

$MonGroupe.put("groupType",$groupeType) 
$MonGroupe.setinfo()

# Add a user to the group
$MonGroupe.add('LDAP://cn=Marc Assin,ou=Monou,dc=dom,dc=fr')
$MonGroupe.setinfo()

# List members of a group
$UnGroupe = New-Object System.DirectoryServices.DirectoryEntry ("LDAP://192.168.234.200:389/cn=Mongroupe,ou=Monou,dc=dom,dc=fr","administrateur@dom.fr","admin")
$Membres = $UnGroupe.Member
$Membres 
```

# ios - FBConnect - #import "FBConnect/FBConnect.h" 没有这样的文件或目录

> ID：10287246
> 
> 赞同：1
> 
> 时间：2012-04-23T19:49:43.487
> 
> 标签：ios, facebook, xcode4.2, fbconnect

我正在尝试将 Facebook 实现到我的应用程序中，但是每当我进入标题搜索路径并拖放我的 src 文件时，我仍然会收到“FBConnect/FBConnect.h”错误我已经从 fcbonnect.xcodeproj 中的 fbconnect 文件夹中添加了所有内容无需将副本检查到目标组文件夹中。请帮忙！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T20:00:04.790

去那里`project->search paths->Header search path` 添加你的 facebook src 目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T19:59:45.450

您应该改为导入`Facebook.h`文件`FBConnect.h`

# c++ - valgrind 输出中的数字是什么意思？

> ID：10287251
> 
> 赞同：2
> 
> 时间：2012-04-23T19:50:19.300
> 
> 标签：c++, c, valgrind

我从 valgrind 得到这个输出：

```
==4836== 10,232 bytes in 1 blocks are still reachable in loss record 1 of 1
==4836==    at 0x4C2779D: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==4836==    by 0x401865: thrt() (main.cpp:221)
==4836==    by 0x4048B1: main (tester.cpp:35) 
```

我有两个问题：

*   是什么`==4836==`意思？
*   是什么`0x4C2779D`意思？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T20:10:54.537

第一个问题的答案：该数字代表进程 ID。

看[官方出处](http://valgrind.org/docs/manual/quick-start.html#quick-start.interpret)。

从同一来源，我们可以看到您第二个问题的答案：

> 代码地址（例如 0x804838F）通常不重要，但有时对于追踪更奇怪的错误至关重要。

# php - 用于获取推文的服务器端或客户端？

> ID：10287259
> 
> 赞同：6
> 
> 时间：2012-04-23T19:50:30.197
> 
> 标签：php, javascript, client-side, server-side

我为我父亲运行[这个](http://trendontravel.com)网站，它从他的推特提要中提取推文并以另一种格式显示它们。目前，推文是使用 javascript 提取的，因此完全是客户端的。是最有效的做事方式吗？该网站几乎没有点击率，但我只是对扩展它的最佳方式感兴趣。任何建议都会很棒。我也在考虑在某个时候在信息流中包含文章。实现它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T19:56:57.290

Twitter API 请求的[速率限制为每小时 150 个](https://dev.twitter.com/docs/rate-limiting)。如果您的页面请求超过此数量，您将收到来自 Twitter API 的错误（HTTP 400 错误）。因此，在服务器上请求推文并将响应缓存一段时间可能是一个更好的主意。您可以每小时最多请求 150 次最新的推文，并且任何时候请求您的页面时，它都会从您的服务器端脚本接收缓存的推文，而不是直接调用 API。

来自 Twitter 文档：

> 未经身份验证的呼叫允许每小时 150 个请求。未经身份验证的呼叫是根据发出请求的服务器或设备的面向公众的 IP 来衡量的。

我最近做了一些与 Twitter API 完全一样的工作。我们最终很快就达到了速率限制，即使只是在测试应用程序时也是如此。该应用程序现在确实在服务器上缓存推文，并且每小时更新几次缓存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T20:00:12.623

我建议使用客户端调用 Twitter API。避免调用您的服务器。使用客户端 js 的唯一缺点是您无法控制查看器是否会停用 js。

您想在信息流中加入什么样的文章？喜欢直接在您的网站上发布的博客文章或外部文章？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T19:54:28.393

通过拉推文服务器端，您将通过您的服务器路由所有推文流量。因此，您的所有流量都来自您的服务器，可能会导致您网站的性能下降。

如果您不对客户端不可能的推文做任何魔术，我应该坚持使用您当前的解决方案。它没有任何问题，并且可以极大地扩展（当然，假设您的性能没有超过 Twitter 的服务器；））

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T19:54:35.650

就可扩展性而言，从客户端拉出你的推文肯定会更好。我不明白您在关于添加文章的第二个问题中要查找的内容

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T19:55:15.370

我想如果你能做到，客户端就去吧！它将带宽使用推送到浏览器。减少服务器上的负载。我认为它也是可扩展的。只要您的客户可以提出网络请求，他们就可以显示您的网站！没有比这更容易的了！您的服务器永远不会成为他们的瓶颈！

如果您可以通过 api 获取文章，我会坚持当前设置，保留所有客户端。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-23T19:55:45.040

对于像这样需求量非常低的东西，这真的无关紧要。如果每个用户有大量任务，那么您可能需要考虑服务器端。如果您有大量用户，并且每个用户只有少数任务（要拉入的推文或其他），那么客户端 AJAX 可能是要走的路。至于您所包含的文章，由于您将使用的数据的大小，我可能会去服务器端。

# visual-studio-2010 - 自动部署 VSTO Excel 2010 插件

> ID：10287261
> 
> 赞同：1
> 
> 时间：2012-04-23T19:50:36.723
> 
> 标签：visual-studio-2010, vsto, excel-2010, excel-interop

有没有办法将 vsto Excel 2010 插件自动部署到机器列表中？我考虑过的一件事是在用户启动脚本中添加对 .vsto 文件的引用。还有其他想法吗？以前有没有人执行过这种部署？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T05:23:22.863

创建一个静默安装程序，然后从任何批处理脚本复制并运行，它可以启动

# sql - 空间数据距离搜索 - 优化选项

> ID：10287269
> 
> 赞同：0
> 
> 时间：2012-04-23T19:51:29.437
> 
> 标签：sql, sql-server-2008, spatial

我们的业务用户喜欢按距离进行搜索，问题是我们有超过 100 万条带有纬度/经度位置的记录。我们正在使用 SQL 2008，但是当我们按距离排序或限制搜索时，我们一直遇到问题，因为查询需要很长时间（30 秒以上）。这是不可接受的，必须有更好的方法来做到这一点。我们已经用 SQL 2008 尽我们所能，如果可以的话，我们希望升级到 2012。

不过我问，是否有其他技术或优化可以应用。我们可以切换到不同的数据库以获得更快的性能，应用不同的搜索算法，估计算法，树，网格，预计算等吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T03:05:54.633

在这里可能有用的解决方案是将搜索分为两部分：

1) 运行查询，在其中找到位于当前位置的当前纬度/经度的某个值 + 或 - 内的所有记录，where 子句可能如下所示：

其中 (@latitude > (lat - .001) 和 @latitude > (lat - .001)) 和 (@longitude> (lng- .001) 和 @longitude> (longitude- .001))

使用这种方法，特别是使用纬度和经度列上的索引，您可以非常快速地定义指定距离内的一组工作位置。

2) 使用步骤 1 的粗略结果，使用大圆/半正弦法确定源位置与每个点之间的实际距离是多少。

这种方法失败的地方是，如果您正在搜索的半径从来没有任何限制，但如果您希望找到给定点特定距离内的所有位置，它会非常有效。

# mysql - 使用 Servlet、JSP、EJB 更新成员（在网站上注册）的一个（或多个）字段

> ID：10287281
> 
> 赞同：1
> 
> 时间：2012-04-23T19:52:42.043
> 
> 标签：mysql, jsp, netbeans, jdbc, ejb

我正在开发“租车公司”的网站程序

用户可以注册（完成） - 使用 Servlet 和 Jsp 页面登录 如果已经是成员（完成） - 使用 java bean 、 servlet 和 jsp 进行预订（完成） 删除预订（完成）

我将 netbeans IDE 与 mysql（表：汽车、预订、成员）一起使用，并通过 JDBC 从网页连接到 MYSQL。现在我在这部分任务上有点卡住了：

更新他/她的帐户（即详细信息）

为什么？想到了不同的替代方案，例如要求用户输入用户名，然后显示带有成员详细信息的记录，显示复选框以便用户检查他/她想要更改的字段，然后使用 servlet 中的正常查询来更新数据库。然而，这在我看来并不是最好的或“最好的”选择。

我想显示与已填充文本框的寄存器的“相同”网页，（因此，如果用户输入“Maria”作为名称，则文本框将已经有 Maria），以便可以在那里对其进行编辑，然后按下提交后，该特定成员的记录就会更新。我是否必须使用会话方法（.setAttribute 等）来保留成员的用户名，然后使用 String uname request.getParameter("username").toString(); 在文本框中显示信息？（例如）

你会怎么做呢？非常感谢意见和代码片段

谢谢 ：））

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T20:07:28.553

只需让 JSP 相应地生成 HTML，所有这些值都被预填充、预选和预检查。在下面的示例中，我假设您当前登录的用户为`${user}`.

对于输入元素，只需打印`value`属性：

```
<input type="text" name="username" value="${fn:escapeXml(user.username)}" />
<input type="text" name="email" value="${fn:escapeXml(user.email)}" />
<input type="text" name="firstname" value="${fn:escapeXml(user.firstname)}" />
<input type="text" name="lastname" value="${fn:escapeXml(user.lastname)}" /> 
```

*（`fn:escapeXml()`这里非常重要，因为它可以防止可能的[XSS 攻击](http://en.wikipedia.org/wiki/Cross-site_scripting)漏洞）*

对于下拉列表，只需有条件地在 上打印`selected`属性`<option>`：

```
<select name="country">
    <c:forEach items="${data.countries}" var="country">
        <option value="${country.code}" ${user.countryCode == country.code ? 'selected' : ''}>${country.name}</option>
    </c:forEach>
</select> 
```

对于单选按钮和复选框，只需有条件地打印`checked`属性：

```
<c:forEach items="${data.genders}" var="gender">
   <input type="radio" name="gender" value="${gender.id}" ${user.genderId == gender.id ? 'checked' : ''}" /> ${gender.description}
</c:forEach> 
```

收集提交的值应该以相同的方式进行。唯一的区别是您不需要创建新用户，只需将当前登录的用户更新为可用`${user}`.

# java - Google App Engine 1.6.4 上的 Guice 启动时间

> ID：10287283
> 
> 赞同：6
> 
> 时间：2012-04-23T19:52:47.153
> 
> 标签：java, google-app-engine, guice

我在 Google App Engine 1.6.4 上使用 Guice 3。今天，我在启动时看到了一些不好的事情。我的应用程序（本地启动）需要 12 秒才能启动。

我有一个`ServletModule`在`configureServlets`方法中编写所有绑定的地方。当我将此方法留空时，我的应用程序需要 3 秒才能启动。

此方法包含约 30 个绑定、3 个 MultiBinder 和 1 个 mapBinder...

*   是正常的开始时间吗？(~9s)
*   如何剖析Guice加工？（日志等）
*   有没有一些好的实践来优化 Guice 启动？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T07:35:09.400

切换`Google App Engine` `1.6.3`或`1.6.5`解决问题。似乎这是一个`Google App Engine` `1.6.4`问题。谢谢你的帮助 ！

# xml - 合并两个 XML 文件

> ID：10287289
> 
> 赞同：2
> 
> 时间：2012-04-23T19:53:26.600
> 
> 标签：xml, xslt

我有两个 XML 文件，格式如下 File 1

```
<info>
  <organization_id>123</organization_id>
  <total_patients>5</total_patients>
</info>
<patients>
  <patient>
    <guid>1111</guid>
   </patient>
  <patient>
    <guid>2222</guid>
   </patient>
</patients> 
```

文件 2

```
<info>
  <organization_id>456</organization_id>
  <total_patients>10</total_patients>
</info>
<patients>
  <patient>
    <guid>3333</guid>
   </patient>
  <patient>
    <guid>4444</guid>
   </patient>
</patients> 
```

我想将这两个文件合并为一个，格式如下

输出文件

```
<info>
  <total_patients>15</total_patients>
</info>
<organizations>
  <organization>
      <organization_id>123</organization_id>
     <patients>
        <patient>
          <guid>1111</guid>
        </patient>
        <patient>
          <guid>1111</guid>
        </patient>
     </patients>
  </organization>
  <organization>
      <organization_id>456</organization_id>
     <patients>
        <patient>
          <guid>4444</guid>
        </patient>
        <patient>
          <guid>5555</guid>
        </patient>
     </patients>
  </organization>
</organizations> 
```

我将不胜感激任何建议。我一直在搜索谷歌，找不到与此类似的东西。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T05:57:51.843

进行一些调整以使您的输入和预期输出形成良好的格式，我建议使用以下 XSLT 2.0 解决方案。调整如下：

1.  将每个输入文档包含在单个节点中。
2.  将预期的输出文档包含在单个节点中。

因此，要转换以下文档....

```
<organization>
 <info>
  <organization_id>123</organization_id>
  <total_patients>5</total_patients>
 </info>
 <patients>
  <patient>
    <guid>1111</guid>
   </patient>
  <patient>
    <guid>2222</guid>
   </patient>
 </patients>
</organization> 
```

包括以下共同输入文档...

```
<organization>
 <info>
  <organization_id>456</organization_id>
  <total_patients>10</total_patients>
 </info>
 <patients>
  <patient>
    <guid>3333</guid>
   </patient>
  <patient>
    <guid>4444</guid>
   </patient>
 </patients>
</organization> 
```

...在您调用 XSLT 引擎时将引用它作为名称为“org2”的参数，应用以下 XSLT2 转换...

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet 
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:fn="http://www.w3.org/2005/xpath-functions"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  version="2.0"
  exclude-result-prefixes="xsl xs fn">

<xsl:output indent="yes" encoding="UTF-8" />
<xsl:param name="org2" />
<xsl:variable name="org2-doc" select="document($org2)" />

<xsl:template  match="/">
 <output>
  <info>
   <total_patients>
    <xsl:number value="organization/info/total_patients +
             $org2-doc/organization/info/total_patients" />
   </total_patients>
  </info>
   <organizations>
    <xsl:apply-templates />
    <xsl:apply-templates select="$org2-doc/*" />
   </organizations>
 </output>
</xsl:template>

<xsl:template  match="organization">
  <organization>
   <organization_id>
    <xsl:number value="info/organization_id" />
   </organization_id>
   <xsl:copy-of select="patients" />   
  </organization>
</xsl:template>

</xsl:stylesheet> 
```

...产生预期的结果....

```
<?xml version="1.0" encoding="UTF-8"?>
<output>
   <info>
      <total_patients>15</total_patients>
   </info>
   <organizations>
    <organization>
       <organization_id>123</organization_id>
       <patients>
          <patient>
             <guid>1111</guid>
          </patient>
          <patient>
             <guid>2222</guid>
          </patient>
       </patients>
    </organization>
    <organization>
       <organization_id>456</organization_id>
       <patients>
          <patient>
             <guid>3333</guid>
          </patient>
          <patient>
             <guid>4444</guid>
          </patient>
       </patients>
    </organization>
   </organizations>
</output> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T20:01:58.237

以您熟悉的任何语言使用 XML DOM 解析器。解析这两个文件，提取组织 ID。创建一个新的 DOM 树，一个新`<info>`节点，一个新`<organizations>`节点。对于每个组织，复制`<patients>`相应组织节点下的节点。序列化生成的 XML。

（如果您愿意，可以尝试 XSLT，但这条路虽然可能更短，但可能会让人觉得有些自虐。）

不，我懒得真正为你编写工作代码。

# xpages - 清除 sessionscope 变量后，单选按钮组的 onclick 事件不会触发

> ID：10287292
> 
> 赞同：1
> 
> 时间：2012-04-23T19:53:37.183
> 
> 标签：xpages

下面是一个简单的 Xpage，其中包含一个绑定到 sessionScope 变量的单选按钮组。单选按钮组的 onclick 事件设置计算域。有一个 afterPageLoad 事件来初始化会话范围变量。

一切都很好。但是，如果我清除会话范围变量（使用调试自定义控件），则 onclick 事件永远不会触发。用户可以随意单击单选按钮，并且计算域永远不会改变，直到按 F5 重新加载页面。以下是我的页面来源。关于如何触发 onclick 事件的任何建议？如果用户让会话变量超时然后开始单击单选按钮，这将是一个很大的可用性问题。

霍华德

```
 <?xml version="1.0" encoding="UTF-8"?>
                <xp:view xmlns:xp="http://www.ibm.com/xsp/core">
                <xp:this.afterPageLoad><![CDATA[#{javascript:print("starting the afterPageLoad event");
                if (sessionScope.init != true|| sessionScope.radioData == null){
                //setup default values'
                print("initing the value");
                sessionScope.init = true;
                sessionScope.radioData = "Red";
                } 
            }]]></xp:this.afterPageLoad>
                <xp:radioGroup id="radioButtons" value="#{sessionScope.radioData}">
                    <xp:selectItem itemLabel="Red"></xp:selectItem>
                    <xp:selectItem itemLabel="Green"></xp:selectItem>
                    <xp:selectItem itemLabel="Blue"></xp:selectItem>
                    <xp:eventHandler event="onclick" submit="true"
                    refreshMode="partial" refreshId="computedField1">
                    <xp:this.action><![CDATA[#{javascript:print("starting onclick event");
                if (sessionScope.init != true){
                    print("reload the page");
                context.reloadPage();
                }
                var radioval = getComponent("radioButtons").getValue();
                getComponent("computedField1").setValue(radioval); }]]></xp:this.action>
                </xp:eventHandler></xp:radioGroup>
                <xp:text escape="true" id="computedField1"></xp:text></xp:view> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T15:17:08.353

我在自己的 xpage 应用程序中多次看到相同的行为，我发现问题仅发生在部分页面刷新时，目标 refreshId 的范围不够大，无法重新加载控件所需的所有数据。当我将 refreshId 更改为页面的主 div（或使用整页刷新）时，一切都按预期工作。

我认为这是客户端代码中对 location.reload 的调用，它实际上正在解决您的问题。我很想知道增加 refreshId 的范围是否也能解决问题。

# html - HTML5 画布挑战

> ID：10287293
> 
> 赞同：0
> 
> 时间：2012-04-23T19:53:38.167
> 
> 标签：html, canvas, drawing, html5-canvas

我正在创建一个 HTML5 应用程序，它将显示一堆不同颜色的形状。我无法显示多个任何形状。

这是我的项目的 JSFiddle 链接：http: [//jsfiddle.net/tithos/3uyLc/](http://jsfiddle.net/tithos/3uyLc/)

这是我尝试过的事情之一：

```
$("#go").click(function() {
  var number = $("#number option:selected").val();
  var shape = $("#shape option:selected").val();
  var size = $("#size option:selected").val();
  var offset = size;
  var i = 0;
  var shift = 0;

  while(i < number){
    switch(shape){
      case '1':
        console.log(shift);
        square((offset+shift), size);
        shift = (shift + size);
        break;
      case '2':
        circle(offset, size);
        break;
      case '3':
        triangle(offset, size);
        break;
    }
    i++;
  }
}); 
```

这在重复 16 次时，在 concole 中给了我“0121212121212121212121212121212”。它是连接，而不是添加。为什么？

欢迎任何帮助或见解

谢谢，

蒂姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T19:56:36.820

由于 .val() 返回一个字符串，因此您在两个字符串之间使用 + 运算符，即连接运算符。使用 parseInt 将字符串转换为整数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T21:36:47.800

在前几行中，您需要从每个 .val() 函数中解析 Int。所以：

```
var number = $("#number option:selected").val();
var shape = $("#shape option:selected").val();
var size = $("#size option:selected").val(); 
```

变成

```
var number = parseInt($("#number option:selected").val());
var shape = $("#shape option:selected").val();
var size = parseInt($("#size option:selected").val()); 
```

但是大小和“偏移”计算都在错误的地方完成。它们需要在主循环中完成，而每个 drawShape 方法的任务是在指定大小的给定位置绘制给定形状。[http://jsfiddle.net/3uyLc/39/](http://jsfiddle.net/3uyLc/39/)

这是固定代码：

```
jQuery.noConflict();
(function($) {
    $("#clear").click(function() {
        console.log("clear!");
        var c=document.getElementById("canvas");
        var context=c.getContext("2d");
        context.clearRect(0, 0, canvas.width, canvas.height);
    });

    function square(offset, size){
        var color = $("#color option:selected").val();
        var c=document.getElementById("canvas");
        var context=c.getContext("2d");

        context.fillStyle = color;
        context.fillRect(offset,0,size,size);
    }

    function circle(offset, size){
        var color = $("#color option:selected").val();
        var canvas = document.getElementById("canvas");
        var context = canvas.getContext("2d");
        var radius = size / 2;
        var x = offset + radius;
        var y = radius;

        context.beginPath();
        context.arc(x, y, radius, 0, 2 * Math.PI, false);
        context.lineWidth = 1;
        context.fillStyle = color;
        context.fill();

        //context.fillStyle="#ff0000";
        //context.fillRect(x-1, y-1, 2, 2);
    }

    function triangle(offset, size){
        console.log(offset);
        var color = $("#color option:selected").val();
        var canvas = document.getElementById("canvas");
        var context = canvas.getContext("2d");
        var width = size;
        var height = size;

        // Draw a path
        context.beginPath();
        //top of triangle
        context.moveTo(offset + width/2, 0);
        //top to right
        context.lineTo(offset + width, size);
        //bottom of triangle
        context.lineTo(offset, size);
        context.closePath();

        // Fill the path
        context.fillStyle = color;
        context.fill();
    }

    $("#go").click(function() {
        var number = parseInt($("#number option:selected").val());
        var shape = $("#shape option:selected").val();
        var size = parseInt($("#size option:selected").val()) * 10;
        var i = 0;
        var position = 0;
        var padding = size * 0.5; //leave space between the shapes 1/2 as large as the shape itself

        while(i < number){
            switch(shape){
                case '1':
                    square(position, size);
                    break;
                case '2':
                    circle(position, size);
                    break;
                case '3':
                    triangle(position, size);
                    break;
            }
            i++;
            // calculate the position of the next shape
            position = position + size + padding;
        }
    });
})(jQuery);​ 
```

# qt - 在 QT 问题中连接 - 没有连接？

> ID：10287294
> 
> 赞同：0
> 
> 时间：2012-04-23T19:53:38.190
> 
> 标签：qt, connection, signals, signals-slots, slot

我有一个从 QGraphicsPixmapItem 派生的自定义类。它称为 GraphPixmapItemCustom ，它的重载方法是：

```
void GraphPixmapItemCustom::mousePressEvent(QGraphicsSceneMouseEvent *event)
{
    QGraphicsPixmapItem::mousePressEvent(event);
    GraphMarkItemCustom *ptr;

    if(event->button() == Qt::RightButton)
    {        
        qDebug("Before emit");
        emit addPoint(QPointF(event->pos().x(), event->pos().y()));
        qDebug("After emit");

        markList.append(new GraphMarkItemCustom(QPointF(event->pos().x(), event->pos().y())));
        ptr = markList.last();
        markGroup->addToGroup(ptr);
        //this->scene()->addItem(ptr);
    }
} 
```

信号在标题中声明：

```
signals:
    void addPoint(QPointF position); 
```

在具有指向类 GraphPixmapItemCustom 对象的指针的主类中

```
private:
   GraphPixmapItemCustom *pixItemRGB; 
```

在主类中，我有一个名为：

```
private slots:
   void pointAdd(QPointF position); 
```

在主类构造函数中，我有一个连接：

```
connect(pixItemRGB, SIGNAL(addPoint(QPointF)), this, SLOT(pointAdd(QPointF))); 
```

在插槽中我只有`qDebug("YUPPY IT ACTUALLY WORKS!");`

但是该插槽没有被解雇。为什么？我已经删除了所有 moc 文件和所有不需要的东西。所以只有`.pro`,`.h`和`.cpp`文件以及需要`.ui`留下的表格。

我检查了谷歌的大多数点击。什么是最好的（我不确定 - 也许我修改了一些东西）它起作用了！我记得这种连接的工作效果。帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T20:51:05.557

您必须在使用运算符创建 GraphPixmapItemCustom 对象*后*连接信号`new`。

# ios - 基于内容的动态 UITableView 单元格高度

> ID：10287298
> 
> 赞同：26
> 
> 时间：2012-04-23T19:53:49.553
> 
> 标签：ios, objective-c, iphone, uitableview, cocoa-touch

我有一个`UITableView`填充了自定义单元格（继承自`UITableViewCell`）的单元格，每个单元格都包含一个`UIWebView`根据其内容自动调整大小的单元格。事情就是这样，如何根据`UITableView`单元格的内容（变量`webView`）更改单元格的高度。

解决方案必须是动态的，因为用于填充的 HTML`UIWebViews`是从不断变化的提要中解析的。

我觉得我需要使用`UITableView`委托方法`heightForRowAtIndexPath`，但从它的定义来看：

```
 - (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    ;//This needs to be variable
} 
```

我无法访问单元格或其内容。我可以更改单元格的高度`cellForRowAtIndexPath`吗？

任何帮助都会很重要。谢谢。

# 笔记

2年前我问过这个问题。随着自动布局的介绍，可以找到 iOS7 的最佳解决方案：

[在 UITableView 中使用自动布局进行动态单元格布局和可变行高](https://stackoverflow.com/questions/18746929)

在 iOS8 上，此功能内置在 SDK 中

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2014-06-17T19:20:43.063

这通常工作得很好：

目标-C：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
    return UITableViewAutomaticDimension;
} 
```

迅速：

```
override func tableView(tableView: UITableView!, heightForRowAtIndexPath indexPath: NSIndexPath!) -> CGFloat {
    return UITableViewAutomaticDimension;
} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-04-23T20:02:33.117

我发现动态高度的最佳方法是预先计算高度并将其存储在某种集合（可能是数组）中。假设单元格主要包含文本，您可以使用它`-[NSString sizeWithFont:constrainedToSize:lineBreakMode:]`来计算高度，然后返回中的对应值`heightForRowAtIndexPath:`

如果内容不断变化，您可以实现一个在提供新数据时更新高度数组的方法。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-11-19T12:55:30.640

```
self.tblVIew.estimatedRowHeight = 500.0; // put max you expect here.
self.tblVIew.rowHeight = UITableViewAutomaticDimension; 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-05-13T16:15:33.340

我尝试了很多解决方案，但一个朋友建议的方法是这样的：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {

    int height = [StringUtils findHeightForText:yourLabel havingWidth:yourWidth andFont:[UIFont systemFontOfSize:17.0f]];

    height += [StringUtils findHeightForText:yourOtherLabel havingWidth:yourWidth andFont:[UIFont systemFontOfSize:14.0f]];

    return height + CELL_SIZE_WITHOUT_LABELS; //important to know the size of your custom cell without the height of the variable labels
} 
```

StringUtils.h 类：

```
#import <Foundation/Foundation.h>

@interface StringUtils : NSObject

+ (CGFloat)findHeightForText:(NSString *)text havingWidth:(CGFloat)widthValue andFont:(UIFont *)font;

@end 
```

StringUtils.m 类：

```
#import "StringUtils.h"

@implementation StringUtils

+ (CGFloat)findHeightForText:(NSString *)text havingWidth:(CGFloat)widthValue andFont:(UIFont *)font {
    CGFloat result = font.pointSize+4;
    if (text) {
        CGSize size;

        CGRect frame = [text boundingRectWithSize:CGSizeMake(widthValue, CGFLOAT_MAX)
                                          options:NSStringDrawingUsesLineFragmentOrigin
                                       attributes:@{NSFontAttributeName:font}
                                          context:nil];
        size = CGSizeMake(frame.size.width, frame.size.height+1);
        result = MAX(size.height, result); //At least one row
    }
    return result;
}

@end 
```

它对我来说非常有效。我有一个自定义单元格，其中包含 3 个固定尺寸的图像、2 个固定尺寸的标签和 2 个可变标签。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-02-20T22:57:17.627

iOS 中具有动态高度的单元格的大问题是表格 vc 必须在绘制单元格之前计算并返回每个单元格的高度。但是，在绘制单元格之前，它没有框架，因此没有宽度。如果您的单元格要根据 textLabel 中的文本量来更改其高度，这会导致问题，因为您不知道其宽度。

我见过的一个常见解决方案是人们为单元格宽度定义一个数值。这是一个不好的方法，因为表格可以是普通的或分组的，使用 iOS 7 或 iOS 6 样式，显示在 iPhone 或 iPad 上，以横向或纵向模式等。

我在我的一个 iOS 应用程序中遇到了这些问题，该应用程序支持 iOS5+ 以及具有多个方向的 iPhone 和 iPad。我需要一种方便的方法来自动执行此操作，并将逻辑排除在视图控制器之外。结果变成了一个 UITableViewController 子类（以便它可以保持状态），它支持默认单元格（默认和字幕样式）以及自定义单元格。

您可以在 GitHub ( [https://github.com/danielsaidi/AutoSizeTableView](https://github.com/danielsaidi/AutoSizeTableView) ) 上获取它。我希望它可以帮助那些仍在为这个问题苦苦挣扎的人。如果您确实检查了它，我很想听听您的想法以及它是否适合您。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-04-23T20:02:55.257

这是我在从 twitter 获取推文然后将它们存储在 CoreData 中以供离线阅读时用于动态单元格高度的代码。

这不仅展示了如何获取单元格和数据内容，还展示了如何使用填充动态调整 UILabel 到内容的大小

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {

    Tweet *tweet = [self.fetchedResultsController objectAtIndexPath:indexPath];

    NSString* text = tweet.Text;

    TweetTableViewCell *cell = (TweetTableViewCell*)[self tableView:tableView cellForRowAtIndexPath:indexPath];

    //Set the maximum size
    CGSize maximumLabelSize = cell.tweetLabel.frame.size;
    CGPoint originalLocation = cell.tweetLabel.frame.origin;

    //Calculate the new size based on the text
    CGSize expectedLabelSize = [text sizeWithFont:cell.tweetLabel.font constrainedToSize:maximumLabelSize lineBreakMode:cell.tweetLabel.lineBreakMode];

    //Dynamically figure out the padding for the cell
    CGFloat topPadding = cell.tweetLabel.frame.origin.y - cell.frame.origin.y;

    CGFloat bottomOfLabel = cell.tweetLabel.frame.origin.y + cell.tweetLabel.frame.size.height;
    CGFloat bottomPadding = cell.frame.size.height - bottomOfLabel;

    CGFloat padding = topPadding + bottomPadding;

    CGFloat topPaddingForImage = cell.profileImage.frame.origin.y - cell.frame.origin.y;
    CGFloat minimumHeight = cell.profileImage.frame.size.height + topPaddingForImage + bottomPadding;

    //adjust to the new size
    cell.tweetLabel.frame = CGRectMake(originalLocation.x, originalLocation.y, cell.tweetLabel.frame.size.width, expectedLabelSize.height);

    CGFloat cellHeight = expectedLabelSize.height + padding;

    if (cellHeight < minimumHeight) {

        cellHeight = minimumHeight;
    }

    return cellHeight;
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-04-23T20:09:39.630

我也认为这样的算法会适合你：

1）在 cellForrowAtIndexPath 你激活你的 webviews 加载并给他们标签等于 indexPath.row

2) 在 webViewDidFinishLoading 中计算单元格中内容的高度，并用如下键和值组成字典： key= indexPath.row value = height

3）调用[tableview reloadData]

4) 在 [tableview cellForRowAtIndexPath:indexPath] 中为相应的单元格设置适当的高度

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-03-08T05:21:55.683

这是我很好的解决方案之一。它对我有用。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    cell.textLabel.text = [_nameArray objectAtIndex:indexPath.row];
    cell.textLabel.numberOfLines = 0;
    cell.textLabel.lineBreakMode = NSLineBreakByWordWrapping;
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
    return UITableViewAutomaticDimension;
} 
```

我们需要应用这两个更改。

```
1)cell.textLabel.numberOfLines = 0;
  cell.textLabel.lineBreakMode = NSLineBreakByWordWrapping;

2)return UITableViewAutomaticDimension; 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-03-12T12:21:07.657

在 Swift 4+ 中，您可以将其设置为动态

```
override func tableView(_ tableView: UITableView, heightForRowAt indexPath: IndexPath) -> CGFloat {
    return UITableView.automaticDimension
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-08-24T17:30:27.510

我总是在超级单元类中的所有单元中实现这一点，因为由于某种原因`UITableViewAutomaticDimension`不能很好地工作。

```
-(CGFloat)cellHeightWithData:(id)data{
    CGFloat height = [[self contentView] systemLayoutSizeFittingSize:UILayoutFittingCompressedSize].height;
    [self fillCellWithData:data]; //set the label's text or anything that may affect the size of the cell
    [self layoutIfNeeded];
    height = [[self contentView] systemLayoutSizeFittingSize:UILayoutFittingCompressedSize].height;
    return height+1; //must add one because of the cell separator
} 
```

`-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath`只需在您使用虚拟单元格时调用此方法即可。

注意：这仅适用于自动布局，但也适用于 ios 7 及更高版本。

pd：不要忘记检查 xib 或情节提要上的“首选宽度显式”复选框并设置静态宽度（在**cmd + alt + 5**菜单上）

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-02-25T08:41:16.610

Swift 使用自定义单元格和标签。为 UILabel 设置约束。(top, left, bottom, right) 将 UILabel 的行设置为 0

在 ViewController 的 viewDidLoad 方法中添加如下代码：

```
tableView.estimatedRowHeight = 68.0
tableView.rowHeight = UITableViewAutomaticDimension 
```

// 委托和数据源

```
override func tableView(tableView: UITableView, heightForRowAtIndexPath indexPath: NSIndexPath) -> CGFloat {
    return UITableViewAutomaticDimension;
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-05-12T10:12:05.940

我在 UILabel 进行了非常大的测试。最重要的是无法工作，然后我为字符串创建了如下类别并获得了确切的高度

```
- (CGFloat)heightStringWithEmojifontType:(UIFont *)uiFont ForWidth:(CGFloat)width {

// Get text
CFMutableAttributedStringRef attrString = CFAttributedStringCreateMutable(kCFAllocatorDefault, 0);
CFAttributedStringReplaceString (attrString, CFRangeMake(0, 0), (CFStringRef) self );
CFIndex stringLength = CFStringGetLength((CFStringRef) attrString);

// Change font
CTFontRef ctFont = CTFontCreateWithName((__bridge CFStringRef) uiFont.fontName, uiFont.pointSize, NULL);
CFAttributedStringSetAttribute(attrString, CFRangeMake(0, stringLength), kCTFontAttributeName, ctFont);

// Calc the size
CTFramesetterRef framesetter = CTFramesetterCreateWithAttributedString(attrString);
CFRange fitRange;
CGSize frameSize = CTFramesetterSuggestFrameSizeWithConstraints(framesetter, CFRangeMake(0, 0), NULL, CGSizeMake(width, CGFLOAT_MAX), &fitRange);

CFRelease(ctFont);
CFRelease(framesetter);
CFRelease(attrString);

return frameSize.height + 10;} 
```

# database - 您如何将来自不同表的变量与 ruby on rails 进行比较？

> ID：10287306
> 
> 赞同：0
> 
> 时间：2012-04-23T19:54:15.210
> 
> 标签：database, ruby-on-rails-3, variables, model, compare

例如，如果我有 id 和 user_id 列，在名为“microposts”的模型/数据集/表（技术术语？）中，比较我可以使用的两组

```
Micropost.where("user_id = ?", id) 
```

但是，我想知道如何对来自不同数据集/表/模型的数据做同样的事情。在这个特定的场景中，我试图找到用户的社区变量等于任何微帖子的社区变量的所有实例。我正在尝试匹配字符串的内容，以便呈现所有具有与当前用户的社区变量匹配的社区变量的微博。这些变量在用户和微博的模型/数据集/表中的“社区”列下以字符串形式为@city + @state。插图：

```
 users table                             microposts table
user_id   community              micropost_id   content    community
1          FairfieldIowa           1             blub!      FairfieldIowa
2          FairfieldIowa           2             Hiiy       FairfieldIowa
3          Salt Lake CityUtah      3             wwowt!     Salt Lake CityUtah
4          Salt Lake CityUtah      4             hey        Salt Lake CityUtah
5          FairfieldIowa           5             sweet      FairfieldIowa 
```

我认为这可能适用于用户模型：

```
def communityfeed
      Micropost.where("community = ?", user.community)
    end 
```

但是，我认为，由于语法、逻辑或“用户”并未定义所有用户，这是不正确的。

然后我在 pages_controller 中定义 communityfeed_items 为：

```
def home
    if logged_in?
      @micropost = current_user.microposts.build
      @communityfeed_items = communityfeed.paginate(page: params[:page])
  end
end 
```

但我得到一个`undefined local variable or method communityfeed`错误

这可能是因为我没有提供任何用户使用该方法。也许简单地为所有用户使用一个变量就可以解决我的问题，但这是我找不到的。我已经尝试了 all_users 和 user，但没有成功。是否可以比较变量以以这种方式呈现结果，如果可以，循环遍历所有用户/微帖子并检查这些匹配项的语法是什么？

我还构建了几个局部函数来共同渲染微帖子，但是，如果 @communityfeed_items 变量没有正确运行，它们几乎没有用处。

_communityfeed.html.erb

```
<% if @communityfeed_items.any? %>
    <ol class="microposts">
        <%= render partial: 'shared/communityfeed_item', collection: @communityfeed_items %>
        </ol>
        <%= will_paginate @communityfeed_items %>
        <% end %> 
```

_communityfeed_items.html.erb

```
<li id="<%= communityfeed_item.id %>">
    <%= link_to gravatar_for(communityfeed_item.user), communityfeed_item.user %>
     <span class="user">
        <%= link_to communityfeed_item.user.name, communityfeed_item.user %>
      </span>
      <span class="content"><%= communityfeed_item.content %></span>
      <span class="timestamp">
        Posted <%= time_ago_in_words(communityfeed_item.created_at) %> ago.
      </span>
    <% if current_user?(communityfeed_item.user) %>
        <%= link_to "delete", communityfeed_item, method:  :delete,
                                         confirm: "You sure?",
                                         title:   communityfeed_item.content %>
      <% end %>
    </li> 
```

如果我以非常低效/不可能的方式解决了这个问题，我愿意接受建议。

感谢您的时间、慷慨和专业知识。

# asp.net - 模态弹出扩展器未在按钮单击时显示面板

> ID：10287310
> 
> 赞同：3
> 
> 时间：2012-04-23T19:54:25.887
> 
> 标签：asp.net, updatepanel, ajaxcontroltoolkit, modalpopupextender

我正在尝试在我的页面上使用模式弹出扩展器，因此当我单击按钮时，它必须显示一个面板。这是我所拥有的：

```
 <asp:UpdatePanel runat="server" ID="updPanel">
    <ContentTemplate>
        <ajaxToolkit:ModalPopupExtender ID="mpeEmailComplete" runat="server" TargetControlID="btnTesting"
            PopupControlID="pnl" OkControlID="btnOk"
             BackgroundCssClass="modalBackground">
        </ajaxToolkit:ModalPopupExtender>

        <asp:Panel ID="pnl" runat="server" style="display:none;">
            <asp:UpdatePanel ID="udp" runat="server">
                <ContentTemplate>
                    <asp:Panel runat="server" ID="pnlEmailComplete" Visible="false">
                        <asp:Label runat="server" ID="lblTest" Text="Testing testing testing"></asp:Label>
                        <asp:Button runat="server" ID="btnOk" Text="OK" />
                    </asp:Panel>
                </ContentTemplate>
            </asp:UpdatePanel>
        </asp:Panel>

        <asp:Button runat="server" ID="btnTesting" Text="Testing"/>

    </ContentTemplate>
</asp:UpdatePanel> 
```

但是单击按钮时我无法弹出面板。有人知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T15:25:35.640

你最里面的面板有 Visible=false。

```
<asp:Panel runat="server" ID="pnlEmailComplete" Visible="false">  *(change here)* 
```

因此，当您按下 TESTING 按钮时，ModalPopupExtender 会正确显示外面板，但它显示的是不可见的内面板，因此您在屏幕上什么也看不到。

```
<asp:Panel ID="pnl" runat="server" style="display:none;">  *(this is ok)* 
```

要修复，只需从外部面板中拉出 Visible=false (pnlEmailComplete)

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T16:00:58.583

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
    <ContentTemplate>
        <asp:Button ID="Btnshow" runat="server" Text="Show" OnClick="Btnshow_Click" />
        <asp:Button ID="BtnTarget" runat="server" Text="Target" Style="display: none" />
        <asp:TextBox ID="TextBox1" runat="server">
        </asp:TextBox>
        <input type="button" value="Get" onclick="abc()" />
        <asp:ModalPopupExtender ID="ModalPopupExtender1" runat="server" TargetControlID="BtnTarget"
            PopupControlID="Panel1">
        </asp:ModalPopupExtender>
        <asp:Panel ID="Panel1" runat="server" BackColor="Black" Width="300px" Height="300px">
            <asp:UpdatePanel ID="UpdatePanel2" runat="server" ChildrenAsTriggers="false" UpdateMode="Conditional">
                <ContentTemplate>
                    <asp:Button ID="BtnHide" runat="server" Text="Hide Button" OnClick="BtnHide_Click" />
                </ContentTemplate>
                <Triggers>
                    <asp:AsyncPostBackTrigger ControlID="BtnHide" EventName="Click" />
                </Triggers>
            </asp:UpdatePanel>
        </asp:Panel>
    </ContentTemplate>
    <Triggers>
        <asp:AsyncPostBackTrigger ControlID="Btnshow" EventName="Click" />
    </Triggers>
</asp:UpdatePanel> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T19:57:56.710

您是否有任何 JavaScript 错误并且`pnl.Visible=False;`设置在服务器端的任何地方？

确保`AjaxControlToolkit`正确引用，[NuGet](http://nuget.org/packages/ajaxcontroltoolkit)是添加引用的最简单方法。

[http://nuget.org/packages/ajaxcontroltoolkit](http://nuget.org/packages/ajaxcontroltoolkit)

# .net - 主机 WCF IIS 找不到程序集 .dll

> ID：10287314
> 
> 赞同：0
> 
> 时间：2012-04-23T19:54:31.920
> 
> 标签：.net, wcf, iis-7

我试图在 IIS 上托管 WCF 服务。我创建了一个虚拟目录，将应用程序池设置为 v.4.0 框架，将 pysichal 路径设置为应用程序路径。

当尝试运行该服务时，我收到以下错误：“无法加载文件或程序集 'ingdnp.dll' 或其依赖项之一。”

有人知道那个 DLL 是什么吗？我在谷歌上找不到任何东西。

更新：

我需要在 GAC（全局程序集缓存）中注册 DLL。全部

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T21:00:24.363

很容易解决您的问题。只需从您的bin*文件夹*、项目或引用中*删除。*`ingdnp.dll`

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T19:57:50.657

它在您的应用程序的 bin 目录中吗？有时会出现这些错误，因为您有一个以 32 位模式编译的本机或混合模式 DLL 依赖项，而您的应用程序池是 64 位（反之亦然）。DLL 确实存在，但无法加载。

我经常看到的另一个原因是无法加载的 DLL 取决于系统上不存在的 C 运行时库 (MSVCRT) 的版本。为了解决这个问题，您可以在 [Dependency Walker](http://www.dependencywalker.com/)中加载有问题的 DLL， 看看它是否报告了缺少的依赖项（如果是，是什么版本）。*

# c# - 在 MVVM 中，当一个属性的值依赖于另一个属性时，是否有一种标准方法可以自动 NotifyPropertyChanged？

> ID：10287317
> 
> 赞同：2
> 
> 时间：2012-04-23T19:54:44.437
> 
> 标签：c#, wpf, mvvm

我使用 MVVM 模式已经有一段时间了，并且经常遇到一个属性的值取决于另一个属性的值的场景。例如，我有一个具有高度和宽度的控件，我想将控件上的高度和宽度显示为格式化字符串“{height} x {width}”。所以我在我的视图模型中包含以下属性：

```
public class FooViewModel : INotifyPropertyChanged
{
    // . . .

    private double _width;
    public double Width
    {
        get { return _width; }
        set
        {
            if(_width != value)
            {
                _width = value;
                NotifyPropertyChanged("Width");
                NotifyPropertyChanged("DisplayString"); // I had to remember to
                                                        // do this.
            }
        }
    }

    public string DisplayString
    {
        get
        {
            return string.Format("{0} x {1}", _width, _height);
        }
    }

    // . . .
} 
```

然后我将我的内容绑定到`Label`DisplayString 属性，这似乎比使用 a`IMultiValueConverter`从 Width 和 Height 属性进行转换要方便得多。不方便的部分是，在我需要为“宽度”或“高度”通知属性更改的任何地方，我还必须记住通知“显示字符串”。我可以想出无数种不同程度的自动化方法，但我的问题是，在 MVVM 中是否存在人们通常用来执行此操作的标准做法`WPF`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T20:08:49.420

不，没有标准的方法可以做到这一点。

您可以编写具有 PropertyChanged 辅助方法的基本视图模型类。它将查看具有 DependsOn 属性（您也将创建）的类的属性，并为依赖于更新属性的所有属性触发事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T20:01:58.240

如果 ViewModel 中的属性之间存在很多依赖关系，您可以使用空字符串调用 NotifyPropertyChanged 来刷新从 View 绑定的所有元素。我认为自动化这一点没有意义。

# c++ - c ++犰狳：“norm_dot”做什么？

> ID：10287321
> 
> 赞同：2
> 
> 时间：2012-04-23T19:55:02.720
> 
> 标签：c++, armadillo, dot-product

这个函数在做什么？它声明它是点积的规范化版本，我认为这意味着

```
func norm_dot(A,B) = dot(A,B) / ||B||^2 
```

但

```
vec A(3,1) ; A.randu() ;
vec B(3,1) ; B.randu() ;

double dot1 = dot(A,B) /  arma::accu(arma::square(B)) ;

double dot2 = norm_dot(A,B) ; 
```

点 1 ！= 点 2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T19:59:20.707

标准化的点积将是

```
dot(A,B)/(|A||B|) 
```

您的表达式仅适用于 |A|=|B|

# jquery - jQuery 表格排序器不适用于 IE 9

> ID：10287329
> 
> 赞同：1
> 
> 时间：2012-04-23T19:55:39.747
> 
> 标签：jquery, tablesorter, visualforce

我正在使用带有 Apex (Salesforce) 的 jQuery 表格排序器。我列出了 6 列的表格，其中两列是输入字段。该表与 Fire Fox、Chrome、IE 8 完美搭配，但我在单独使用 IE 9 时有一个奇怪的行为。实际上，排序也适用于 IE 9。但是，当我尝试排序一次时，它会将所有输入值擦除为空。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T03:46:32.460

查看这个自定义解析器的演示，它允许您使用输入值对列进行排序：

[动态输入值排序](http://jsfiddle.net/Mottie/vCTHw/71/)

遗憾的是，这个解析器不能在原始的 tablesorter 插件上工作，但它可以在我的 github 分叉版本的[tablesorter](https://github.com/Mottie/tablesorter)上工作。

```
// add parser through the tablesorter addParser method
$.tablesorter.addParser({
  id: 'inputs',
  is: function(s) {
    return false;
  },
  format: function(s, table, cell, cellIndex) {
    var $c = $(cell);
     if (!$c.hasClass('updateInput')) {
      $c
      .addClass('updateInput')
      .bind('keyup', function() {
        $(table).trigger('updateCell', [cell, false]); // false to prevent resort
      });
    }
    return $c.find('input').val();
  },
  type: 'text'
});

$(function() {
  $('table').tablesorter({
     headers: {
      3: {
        sorter: 'inputs'
      }
    }
  });
});​ 
```

# html - 设置输入标签的已检查属性是否比简单地标记为已检查更可取？

> ID：10287334
> 
> 赞同：2
> 
> 时间：2012-04-23T19:56:10.013
> 
> 标签：html

我见过人们通过编写以下内容将 HTML 复选框标记为选中：

```
<input type="checkbox" checked/> 
```

是否最好改为编写以下内容：

```
<input type="checkbox" checked="checked"/> 
```

如果是这样，为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T19:57:46.273

它们是同义词。他们之间根本没有区别。

我个人认为只是`checked`更好，因为额外的 10 个字符`="checked"`完全是多余的并且浪费空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T20:02:31.450

如果您正在编写 XHTML，那么正确的做法是`checked="checked"`因为 XHTML 需要完整的属性。

# ssh - 在 Windows 中使用 PuTTY SSH 到 Amazon EC2 实例

> ID：10287337
> 
> 赞同：30
> 
> 时间：2012-04-23T19:56:17.363
> 
> 标签：ssh, amazon-ec2, amazon-web-services, putty

我是亚马逊网络服务的新手，正在尝试使用 Windows 中的腻子启动一个亚马逊实例并通过 SSH 连接到它。这些是我遵循的步骤：

1.  创建了一个密钥对。

2.  为 SSH 和 HTTP 添加了安全组规则。

3.  使用上述密钥对和安全组启动 EC2 实例。

4.  使用 PuTTYgen 将`*.pem`文件转换为`*.ppk`

5.  使用 putty 尝试连接到实例的公共 DNS 并提供`*.ppk`文件。

我使用“root”和“ec2-user”登录，并使用 SSH1 和 SSH2 创建了 PPK 文件，对于所有这些尝试，我在 putty 中收到以下错误，

“服务器拒绝了我们的密钥”

你们能帮忙吗，任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-06T02:59:14.040

我假设 OP 已经解决了这个问题或以其他方式继续前进，但答案是`ubuntu`作为用户使用（如果服务器是 ubuntu）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-24T10:20:08.170

1) 确保您在 EC2 实例的安全组中打开了端口 22 (SSH)。

2) 尝试使用弹性 IP 而不是公共 DNS 名称连接。

我希望您已按照以下步骤[使用 PuTTY 从 Windows 机器连接 EC2](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/putty.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-01-06T13:57:46.580

另一种情况是，当我使用 putty 从 Windows SSH 到运行 ubuntu 的 EC2 实例时，出现“服务器拒绝我们的密钥”错误：

> 私钥错误地从 .pem 转换为 .ppk。

puttygen 有两个“转换密钥”选项。

1.  **使用File->Load Private Key**选项将您的 .pem 文件加载到 puttygen 中，然后使用**Save Private Key**按钮保存为 .ppk 文件。
2.  **不要**使用菜单选项**Conversions->Import Key**来加载 EC2 生成的 .pem 文件。

    > 请参阅下面的 puttygen 屏幕截图，其中标记了两个菜单选项。

[![使用 puttygen 的正确菜单选项](../Images/08159acbed225b581437c3adb0c2b30a.png)](https://i.stack.imgur.com/URXLim.jpg) [![使用 puttygen 拧菜单选项](../Images/3af2030a5bac735c9ba535c59a17cf3b.png)](https://i.stack.imgur.com/oVwmQm.jpg)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-04-14T12:22:16.627

Check the username, it should be "ubuntu" for your machine. Check if traffic is enabled on port 22 in Security group. Check if you are using the correct url i.e ubuntu@public/elasticip

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-23T23:45:19.723

也许值得再检查一件事。转到 AWS 控制台，右键单击实例并选择“连接...”。它将显示您要使用的 DNS 名称。如果您在某个时候重新启动该实例，则该 DNS 名称可能已更改。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-05-14T08:33:25.133

当我尝试连接由 Elastic Beanstalk 服务 (EBS) 自动创建的实例时，我遇到了类似的问题。但是，一旦我将现有的密钥名称链接到 EBS（在 Environment Details -> Edit Configuration -> Server Tab -> Existing Key Pair 下），我就可以使用“ec2-user”和现有的密钥文件登录（转换为.ppk) 与腻子。

但是，这会终止正在运行的实例并通过上面提到的密钥对重新构建一个具有访问权限的新实例。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-03-05T12:35:01.017

以防万一它对其他人有帮助，我在更改实例中主文件夹的权限后遇到了这个错误。我正在测试一些东西，并在我的主文件夹上执行了 chmod -R 777 。一旦发生这种情况，一旦我退出，我就被有效地锁定了。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-04-02T10:50:57.743

如果您直接使用“.pem”文件而不是转换后的“.ppk”文件对 AWS 进行 SSH，您将不会遇到此错误。

1) 使用 Git Bash 代替腻子。因为您可以在 Git Bash 中运行所有 Linux 命令。通过安装 Git，您可以访问 Git Bash 终端

2）右键单击您拥有“.pem”的文件夹，然后选择“Git Bash Here”。

3) 您的密钥不得公开查看，SSH 才能正常工作。所以运行“chmod 400 pemfile.pem”。

4) 使用其公共 DNS 连接到您的实例 - “ssh -i "pemfile.pem" ec2-user@ec2-xxxx.us-west-1.compute.amazonaws.com”

5) 确保在 your_instance->security_group->inbound_rules 中将 SSH 的网络 IP 列入白名单

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-02-02T18:15:49.177

当我尝试创建一个新的密钥对并尝试使用那个新的 pem/ppk 文件时，我遇到了同样的错误。我注意到实例上的 Key Pair Name 字段仍然是旧的并且正在四处寻找。显然，您[不能更改](https://stackoverflow.com/questions/16901856/ec2-key-pair-change)密钥对。所以我回到原来的密钥对。幸运的是，我没有删除任何内容，所以这很容易。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-03-30T11:50:58.783

在我将使用的 debian AMI 的用户名更改为“admin”之前，我遇到了同样的麻烦（并采取了相同的步骤）。

您应该查找正在使用的 AMI 的用户名。debian AMI 记录在这里 [http://wiki.debian.org/Cloud/AmazonEC2Image/Squeeze](http://wiki.debian.org/Cloud/AmazonEC2Image/Squeeze)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-04-11T17:12:40.287

我也有同样的问题。您正在使用的 AMI 也是“Cloud Formation”模板解决方案所使用的。

最后我放弃了，并创建了一个 Red Hat 实例。然后我可以使用用户通过 SSH 进行连接`root`。

此处的说明：[http](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/putty.html) ://docs.aws.amazon.com/AWSEC2/latest/UserGuide/putty.html使用 Red Hat 实例但不使用 Amazon Linux 实例可以正常工作。我假设他们有一些我不想尝试的用户名（root、ec2-user 和许多其他明显的用户名，都被拒绝了）

希望对某人有所帮助！

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-10-16T11:41:10.153

Try an alternative SSH client, like [Poderosa](http://poderosa.sourceforge.net/). It accepts pem files, so you will not need to convert the key file.

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-04-23T20:31:48.600

我假设您正在遵循[本指南](http://docs.amazonwebservices.com/AWSEC2/latest/GettingStartedGuide/LaunchInstance.html)，并使用[后续页面](http://docs.amazonwebservices.com/AWSEC2/latest/GettingStartedGuide/ConnectToInstanceLinux.html#connect-from-windows-machine)上的说明进行连接。验证几件事：

1.  您正确转换了密钥，例如选择了正确的 .pem 文件，保存为*私钥*，1024 位 SSH-2 RSA
2.  Auth 设置（连接教程中的第 4 步）是正确的

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2013-12-18T17:19:07.790

我使用 Debain AMI 并尝试使用 ec2-user，root 但正确的登录名是“admin”。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-12-01T18:05:25.087

如果您已有密钥对，请按照以下步骤操作： 使用 PuTTYgen 将 *.pem 转换为 *.ppk（加载 pem 文件密钥，然后保存 ppk）将 ppk auth 密钥文件添加到 Putty SSH>Auth options 输入“主机名（或 IP 地址） )" 字段：ubuntu@your-ip-address-of-ubuntu-ec2-host))

# forms - symfony2 表单中的空白字段有些奇怪

> ID：10287340
> 
> 赞同：3
> 
> 时间：2012-04-23T19:56:30.423
> 
> 标签：forms, symfony, doctrine-orm

当我发送带有空白字段的表单时，我收到错误消息`SQLSTATE[23000]: Integrity constraint violation: 1048 Column 'image' cannot be null`。我发现修复它的唯一方法是在实体文件中设置一个默认值：

```
 * @ORM\Column(type="string", length=100)
 */
protected $image=""; 
```

并像这样更改设置器：

```
public function setImage($image){
 if(!isset($image)) {
//its really empty but it works only in this way     
}
     else {
    $this->image = $image;
    } 
```

我认为这非常严重......对此有什么解释吗？还有另一种方法吗？}

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T20:29:34.770

如果该字段`image`不是必需的，您可以将其设置为，`nullable`这样 Doctrine 将知道这一点并将该列设置为可为空。

这样，不会违反约束，因为该字段可以为空。要使用 Doctrine 注释使字段可以为空，只需添加`nullable = true`如下`ORM\Column`定义：

```
@ORM\Column(type="string", length=100, nullable=true) 
```

默认情况下，所有列都是`nullable=false`这样，当尝试在其中保留空值时，它们将抛出一个约束验证异常。

问候，
马特

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-01T06:22:47.030

为什么在这里部分回答：

[Symfony2 表单将空白字符串解释为空值](https://stackoverflow.com/questions/9928702/symfony2-forms-interpret-blank-strings-as-nulls)

这段代码绕过了它，因为当 Symfony 设置`$image`为 null 并调用`$entity->setImage(null)`时，这段代码不会改变`$image`成员。

```
public function setImage($image){
    if(!isset($image)) {
        // $image is null, symfony was trying to set $this->image to null, prevent it
    } else {
        $this->image = $image;
    }
} 
```

这更明确（而且谁想要那个奇怪的空语句？）。它表达了您的意图，`$this->image`不能为空（如果您不使其可为空，则与数据库定义匹配）

```
public function setImage($image){
    if(isset($image)) {
        // $image not null, go ahead and use it
        $this->image = $image;
    }
} 
```

无论哪种方式，您都需要初始化，`$this->image`否则它将默认为`null`.

# iphone - 验收后的图标光泽度

> ID：10287341
> 
> 赞同：0
> 
> 时间：2012-04-23T19:56:35.417
> 
> 标签：iphone, ios

是否可以从图标中删除光泽而无需重新提交？将简单的“否”更改为“是”似乎很愚蠢，需要一个全新的提交，但我似乎无法找出这是怎么可能的。有人可以帮忙吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T20:00:31.267

不幸的是，没有，需要再次提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T20:18:51.723

图标光泽度在应用程序的`plist`文件中设置，对`plist`（或应用程序中的任何其他资产）的任何更改都需要重新提交。一旦您提交了一个应用程序，它就会被捆绑在一起，并且无法更改任何内容。

# html-email - 未显示图像的样式化 ALT 文本

> ID：10287343
> 
> 赞同：0
> 
> 时间：2012-04-23T19:56:44.620
> 
> 标签：html-email

如果您使用电子邮件中的图像替换文本会发生什么？

大多数电子邮件客户端默认不加载图像。所以......普通用户不会看到任何东西。但是当你以这种方式使用图像时会发生什么：

```
<img src="notfound.jpg" alt="NOT FOUND"/> 
```

如果图像尚未加载，他们是否会看到 NOT FOUND alt？如果它的样式类似于图像以使其看起来更好一些，例如：

```
<img src="notfound.jpg" alt="NOT FOUND" style="font-size:24px;color:#FF00FF"/> 
```

这个替代文本是否有相应的样式？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T21:55:44.303

一大堆电子邮件客户端实际上并没有呈现 alt 标签——它们要么呈现标题标签，而样式不会应用于它，要么它们呈现文件名或其他东西。

所以它适用于一些客户，但它并不像广泛使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T01:13:53.807

`title`除了您的标签外，还要添加一个`alt`标签。

不幸的是，某些电子邮件客户端会忽略这些标签，只显示链接 URL。

# android - Android 应用无法在平板电脑上打开，但会在模拟器中打开

> ID：10287344
> 
> 赞同：1
> 
> 时间：2012-04-23T19:56:46.820
> 
> 标签：android

当我导出我的应用程序时，它一切都很好，直到我查看大小......它的 176kb 对我来说似乎不够大，这是我第一个迹象出现问题，然后当我将应用程序放在我的 Galaxy 标签上，然后单击 intal 它不会打开。同样的事情发生在模拟器上，当你点击应用程序图标时，会出现一个吐司说“这个应用程序没有安装”。然而！如果我等待几秒钟让模拟器自行打开应用程序，它会完美运行吗？对我有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T20:52:41.907

很难说有什么问题。但是在成功安装到模拟器后，一个 apk 位于 bin 文件夹中，这个 apk 应该可以工作，它与安装到模拟器上的相同

# restlet - 如何使用 restlet 创建一个传递两个参数的 URI：Restlet 2.1

> ID：10287345
> 
> 赞同：0
> 
> 时间：2012-04-23T19:56:52.127
> 
> 标签：restlet

这是一个方法的例子：

updatePatientAddressByID(字符串 ID, 字符串地址)

任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T10:05:34.720

您必须设计您的 URL，以便 Id 是路径段：

```
router.attach("/patients/{id}", PatientResource.class); 
```

然后在你的 Restlet 实现中，你可以得到这个变量：

```
@Post
public void store(String address) {
    Long id = (Long) getRequest().getAttributes().get("id");
    ... do something with address ...
} 
```

# javascript - 咖啡脚本错误编译

> ID：10287350
> 
> 赞同：0
> 
> 时间：2012-04-23T19:57:24.170
> 
> 标签：javascript, coffeescript

我有这个工作的JS：

```
$(function() {

  // Class to represent a row in the seat reservations grid
  function SeatReservation(name, initialMeal) {
      var self = this;
      self.name = name;
      self.meal = ko.observable(initialMeal);

      self.formattedPrice = ko.computed(function() {
          var price = self.meal().price;
          return price ? "$" + price.toFixed(2) : "None";        
      });    
  }

  // Overall viewmodel for this screen, along with initial state
  function ReservationsViewModel() {
    var self = this;

    // Non-editable catalog data - would come from the server
    self.availableMeals = [
        { mealName: "Standard (sandwich)", price: 0 },
        { mealName: "Premium (lobster)", price: 34.95 },
        { mealName: "Ultimate (whole zebra)", price: 290 }
    ];    

    // Editable data
    self.seats = ko.observableArray([
        new SeatReservation("Steve", self.availableMeals[0]),
        new SeatReservation("Bert", self.availableMeals[0])
    ]);

    // Computed data
    self.totalSurcharge = ko.computed(function() {
       var total = 0;
       for (var i = 0; i < self.seats().length; i++)
           total += self.seats()[i].meal().price;
       return total;
    });    

    // Operations
    self.addSeat = function() {
        self.seats.push(new SeatReservation("", self.availableMeals[0]));
    }
    self.removeSeat = function(seat) { self.seats.remove(seat) }
  }

  ko.applyBindings(new ReservationsViewModel());

}); 
```

移植到这个 Coffee Script

```
$ ->
  SeatReservation = (name, initialMeal) ->
    self = this
    self.name = name
    self.meal = ko.observable(initialMeal)
    self.formattedPrice = ko.computed(->
      price = self.meal().price
      (if price then "$" + price.toFixed(2) else "None")
    )
  ReservationsViewModel = ->
    self = this
    self.availableMeals = [
      mealName: "Standard (sandwich)"
      price: 0
    ,
      mealName: "Premium (lobster)"
      price: 34.95
    ,
      mealName: "Ultimate (whole zebra)"
      price: 290
     ]
    self.seats = ko.observableArray([ new SeatReservation("Steve", self.availableMeals[0]), new SeatReservation("Bert", self.availableMeals[0]) ])
    self.totalSurcharge = ko.computed(->
      total = 0
      i = 0

      while i < self.seats().length
        total += self.seats()[i].meal().price
        i++
      total
    )
    self.addSeat = ->
      self.seats.push new SeatReservation("", self.availableMeals[0])

    self.removeSeat = (seat) ->
      self.seats.remove seat
  ko.applyBindings new ReservationsViewModel() 
```

编译成：

```
(function() {

  $(function() {
    var ReservationsViewModel, SeatReservation;
    SeatReservation = function(name, initialMeal) {
      var self;
      self = this;
      self.name = name;
      self.meal = ko.observable(initialMeal);
      return self.formattedPrice = ko.computed(function() {
        var price;
        price = self.meal().price;
        if (price) {
          return "$" + price.toFixed(2);
        } else {
          return "None";
        }
      });
    };
    ReservationsViewModel = function() {
      var self;
      self = this;
      return self.availableMeals = [
        {
          mealName: "Standard (sandwich)",
          price: 0
        }, {
          mealName: "Premium (lobster)",
          price: 34.95
        }, {
          mealName: "Ultimate (whole zebra)",
          price: 290
        }
      ];
    };
    self.seats = ko.observableArray([new SeatReservation("Steve", self.availableMeals[0]), new SeatReservation("Bert", self.availableMeals[0])]);
    self.totalSurcharge = ko.computed(function() {
      var i, total;
      total = 0;
      i = 0;
      while (i < self.seats().length) {
        total += self.seats()[i].meal().price;
        i++;
      }
      return total;
    });
    self.addSeat = function() {
      return self.seats.push(new SeatReservation("", self.availableMeals[0]));
    };
    return self.removeSeat = function(seat) {
      return self.seats.remove(seat);
    };
  });

  ko.applyBindings(new ReservationsViewModel());

}).call(this); 
```

问题是 ReservationsViewModel 在 self.avalaibleMeals 之后立即关闭，而它不应该......

我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T20:34:57.680

您是否尝试过重写它以使用 CoffeeScript 为您提供的一些功能，例如类？

我不能 100% 确定以下内容会起作用，但这可能是您开始的好地方。

```
class SeatReservation
  constructor: (@name, initialMeal) ->
    @meal = ko.observable initialMeal
    @formattedPrice = ko.computed =>
      price = @meal().price;
      if price?
        price = "$#{price.toFixed(2)}"
      else
        price = "None"

class ReservationsViewModel
  constructor: ->
    @availableMeals = [{
      mealName: "Standard (sandwich)"
      price: 0
    },{
      mealName: "Premium (lobster)"
      price: 34.95
    },{
      mealName: "Ultimate (whole zebra)"
      price: 290
    }]    

    @seats = ko.observableArray [
      new SeatReservation "Steve", self.availableMeals[0]
      new SeatReservation "Bert",  self.availableMeals[0]
    ]

    @totalSurcharge = ko.computed =>
      total = 0;
      total += seat.meal().price for seat in @seats()
      total

  addSeat: => @seats.push new SeatReservation "", self.availableMeals[0]
  removeSeat: (seat) => @seats.remove seat

$ -> ko.applyBindings new ReservationsViewModel() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T20:43:58.080

看起来支架的虚假压痕可能会导致嵌套被冲洗掉——那里有一个额外的空间。缩进在空格分隔的语言中非常重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T13:05:13.790

我复制了你的代码，它编译得很好（CS 1.3.3）

```
 ReservationsViewModel = function() {
      var self;
      self = this;
      self.availableMeals = [
        {
          mealName: "Standard (sandwich)",
          price: 0
        }, {
          mealName: "Premium (lobster)",
          price: 34.95
        }, {
          mealName: "Ultimate (whole zebra)",
          price: 290
        }
      ];
      self.seats = ko.observableArray([new SeatReservation("Steve", self.availableMeals[0]), new SeatReservation("Bert", self.availableMeals[0])]);
      self.totalSurcharge = ko.computed(function() {
      ..... 
```

也许你的缩进有问题 - 记住永远不要将制表符或空格与咖啡脚本混合，它完全把事情搞砸了。实际上，“社区”提出了 2 个缩进空间，请查看[https://github.com/polarmobile/coffeescript-style-guide](https://github.com/polarmobile/coffeescript-style-guide)

# dependency-injection - 是否可以将参数传递给 Symony2 容器构造函数

> ID：10287351
> 
> 赞同：2
> 
> 时间：2012-04-23T19:57:34.847
> 
> 标签：dependency-injection, symfony, containers

在 Symfony2 中创建服务容器时，您主要将“静态”参数（如其他类等）传递给它的构造函数。

但是我想创建一个工厂，因此我需要能够将动态参数传递给服务构造函数。

我发现的示例（例如[http://symfony.com/doc/current/cookbook/service_container/factories.html](http://symfony.com/doc/current/cookbook/service_container/factories.html)）最终都使用静态参数作为参数。

但是，如果我希望我的工厂根据（例如）用户输入来决定返回哪个对象，我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T20:09:28.167

我在理解为什么服务工厂不适用于您的案例时遇到了一些问题。您是否需要返回彼此无关的不同服务类？

我从工厂示例中看到的是，您可以执行以下操作：

```
class NewsletterFactory
{
    public function __constructor(...) 
    {
        // Receive arguments needed to create the service below
    }

    public function get()
    {
        // Say the variable $userInput exists and is derived from constructor
        if ($userInput === 'string') 
            return new NewsletterManager($dynamicArgument1);

        if ($userInput === 'integer') 
            return new AnotherNewsletterManager($dynamicArgument2);

        return new DefaultNewsletterManager();
    }
} 
```

现在，如果这不符合您的需求。您还可以创建一个服务说`CustomFactory`返回您需要的内容。返回的不是直接的服务，所以你可以为所欲为。但这会阻止您从`CustomFactory`依赖容器中请求创建的对象。

与此类似的是[FormFactory](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Form/FormFactory.php)。它是用于实例化表单类型的工厂。但`FormFactory`它更强大，因为它与依赖注入标签和编译器通道相结合，它们将每种类型注册到依赖注入系统中，以便它们可以自己检索。我并不完全了解`Form`组件的所有内部结构，但我认为如果其他方法不能解决您的问题。

问候，
马特

# grails - Groovy 脚本保存域类

> ID：10287354
> 
> 赞同：0
> 
> 时间：2012-04-23T19:57:42.610
> 
> 标签：grails, groovy, grails-orm

我使用 netbeans 在脚本文件夹中创建了以下脚本。我无法保存域类。另外，如果我将整个项目部署为 war 文件，我可以使用 Windows 调度程序运行脚本吗？

脚本

```
def json = ""
def txt = new URL("http://free.worldweatheronline.com/feed/weather.ashx?q=Singapore,Singapore&format=xml&num_of_days=1&key=b674fb7e94131612112609").text
def records = new XmlSlurper().parseText(txt)
def weather = records.weather
def dates = weather.date
def min = weather.tempMinC
def max = weather.tempMaxC
def img = weather.weatherIconUrl
def desc = weather.weatherDesc
def descLink = desc.toString().replaceAll(" ","%20")
println max
Weathers w  = new Weathers()
w.cityName="singapore"
w.day = dates
w.description =desc
w.max = max
w.img = img
w.min = min
w.url = "jk" 
```

领域类

```
package org.mPest

class Weathers {
    int id
    String day
    String min
    String max
    String img
    String description
    String cityName
    String url

static constraints = {
    id(blank:false, unique:true)
    cityName(blank:false)
    url(blank:false)

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T20:28:02.047

您不能直接使用域类。

请参阅[此常见问题解答](http://grails.org/FAQ#Q%3a%20How%20can%20I%20access%20domain%20classes%20from%20sources%20in%20src/groovy?)以阅读如何使用以下领域的域类`src/groovy`：

```
import org.codehaus.groovy.grails.commons.ApplicationHolder
//…
def book = ApplicationHolder.application.getClassForName("library.Book").findByTitle("Groovy in Action") 
```

我不知道是否可以从 Windows 运行战争打包脚本，但您可以使用 grails [Quartz 插件](http://grails.org/plugin/quartz)来安排您的任务......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T02:54:36.543

看一下[`grails run-script`命令](http://grails.org/doc/latest/ref/Command%20Line/run-script.html)。您应该能够使用它来使用诸如 windows 调度程序或 cron 之类的东西来执行脚本，但是您必须拥有完整的源代码（而不是 war 文件）供脚本执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-27T00:43:12.857

在 Grails 2.x 中，您应该使用 Holders 而不是 ApplicationHolder。例如：

```
import grails.util.Holders
def validKeys = Holders.grailsApplication.getClassForName("com.vcd.Metadata").findAll { it.metadataKey }*.metadataKey 
```

# android - 在 SimpleCursorAdapter 中使用 AsyncTask

> ID：10287358
> 
> 赞同：1
> 
> 时间：2012-04-23T19:57:52.907
> 
> 标签：android, android-widget

为了提高我的性能，我`ListView`实现了一个`AsyncTask`来处理`Cursor`. 这是代码。

```
public View getView(final int position, View convertView, ViewGroup parent) {
    if (convertView == null) {
        convertView = mInflater.inflate(R.layout.row, null);
        holder = new ViewHolder();
        holder.name = (TextView) convertView.findViewById(R.id.name);
        holder.desc = (TextView) convertView.findViewById(R.id.desc);
        holder.status = (TextView) convertView.findViewById(R.id.status);
        holder.path = (TextView) convertView.findViewById(R.id.path);
        holder.icon = (ImageView) convertView.findViewById(R.id.icon);
        holder.position = position;
        convertView.setTag(holder);
        Log.d(Tag.getTag(this), "convertView is null");
    } else {
        holder = (ViewHolder) convertView.getTag();
    }

    class CursorTask extends AsyncTask<ViewHolder, Void, String[]> {
        private ViewHolder v;
        private String vdstatus, mbpath, vsname, vsdesc, vsstatus, vspath;
        String iconid;
        @Override
        protected String[] doInBackground(ViewHolder... params) {
            v = params[0];
            Cursor mCursor = getCursor();
            mCursor.moveToPosition(position);
            String[] mArray = new String[] { mCursor.getString(1),
                    mCursor.getString(2), mCursor.getString(5),
                    mCursor.getString(7), mCursor.getString(6),
                    sdpath + propmanager.mbActivePath(),
                    mCursor.getString(4) };
            return mArray;
        }

        @Override
        protected void onPostExecute(String[] mArray) {
            super.onPostExecute(mArray);
            vsname = mArray[0];
            vsdesc = mArray[1];
            vsstatus = mArray[2];
            vspath = mArray[3];
            vdstatus = mArray[4];
            mbpath = mArray[5];
            iconid = mArray[6];
            if (v.position == position) {
                v.name.setText(vsname);
                v.desc.setText(vsdesc);
                v.status.setText(vsstatus);
                v.path.setText(vspath);
                switch (Integer.parseInt(iconid)) {
                case 0: {
                    v.icon.setImageDrawable(drawable_a2s);
                    break;
                }
                .................
                .................
                .................
                case 17: {
                    v.icon.setImageDrawable(drawable_cid);
                    break;
                }
                }
                if (vdstatus == "false") {
                    v.status.setTextColor(Color.RED);
                } else {
                    v.status.setTextColor(Color.parseColor("#4B8A08"));
                }
                if (mbpath.equals(vspath)) {
                    v.name.setTextColor(Color.RED);
                }
            }
        }
    }
    new CursorTask().execute(holder);
    return convertView;
}

static class ViewHolder {
    ImageView icon;
    TextView name, desc, status, path;
    int position;
} 
```

这样做的问题是，在某些`position`s [朝向末尾和顶部（最初显示正确，但滚动后显示错误）`ListView`] 中，数据显示错误。我也有 8`ListView` `child`秒，但我得到的最大值`position`是 4。为什么会这样？我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T01:48:33.807

这确实是低效且耗费资源的。您真的应该`AsyncTask`在应用程序中使用一次将`ListView`数据加载到内存中，然后将其保留在那里并用于填充您的`ListView`项目。您的问题的解决方案是**缓存**而不是**在后台加载**。

# r - R中的for循环，增量

> ID：10287364
> 
> 赞同：33
> 
> 时间：2012-04-23T19:58:21.083
> 
> 标签：r, for-loop

我正在尝试编写一个 for 循环，它将其值增加 2。等效代码是 c 是

```
for (i=0; i<=78; i=i+2) 
```

我如何在 R 中实现相同的目标？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-04-23T20:04:58.043

查看`?seq`更多信息：

```
for(i in seq(from=1, to=78, by=2)){
#  stuff, such as
  print(i)
} 
```

或者

```
for(i in seq(1, 78, 2)) 
```

ps 请原谅我对 C 的无知。在那里，我刚刚暴露了自己。

但是，这是在 R 中做你想做的事情的一种方式（请参阅更新的代码）

**编辑**

在学习了一点 C 的工作原理之后，看起来问题中发布的示例迭代了以下序列：`0 2 4 6 8 ... 74 76 78`.

要在 R 中完全复制它，请从 at`0`而不是 at开始`1`，如上所述。

```
seq(from=0, to=78, by=2)
 [1]  0  2  4  6  8 10 12 14 16 18 20 22 24 26 28 30 32 34 36 38 40 42 44
[24] 46 48 50 52 54 56 58 60 62 64 66 68 70 72 74 76 78 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-09-24T14:18:53.427

you can do so in following way, you can put any length upto which you want iteration in place of length(v1), and the increment value at position of 2 to your desired value

```
for(i in seq(1,length(v1),2)) 
```

# php - MySQL/PHP - 分页、排序

> ID：10287366
> 
> 赞同：0
> 
> 时间：2012-04-23T19:58:36.777
> 
> 标签：php, mysql

我正在尝试将用户提交的信息分页到目录中。起初我有这样的事情： /?page=3&count=20&sort=date

```
$floor = ($page-1)*$count;
$ceiling = $count;
SELECT * FROM catalog ORDER BY date ASC LIMIT $floor, $ceiling 
```

正如我所读到的，这很糟糕，因为它会计算所有结果，而不是停在极限（地板+天花板）。

现在，我试图通过对页面上的最后一项进行分页来使其更快

/?last_date=2012&count=20&sort=date

```
$ceiling = $count;
SELECT * FROM catalog WHERE date>$last_date ORDER BY date ASC LIMIT $ceiling 
```

但是，这行不通吗？有些日期将是相同的。为了争论，让我们假设我不能使用更精确的时间戳。例如，按价格排序只会到小数点后 2 位，而且肯定会有重叠。

我可以做些什么来使这项改进发挥作用，还是应该恢复到以前的查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T19:33:00.397

If i understand it good, i think the LIKE operator in WHERE Clause in you SQL Statement should help... But i can be wrong, can you more specify what's exactly wrong?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T19:26:48.467

我最终使用了我的第一个分页示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T20:06:21.940

为了使用它，您必须在两个方向上按日期进行限制。如果每个日期范围太长，您可以做的是多页，否则，选择整个日期集。缺点是页面大小会有些随意，并且在某些情况下可能需要更长的时间来分页浏览结果。

这意味着您还必须首先在该日期范围内执行 count()，以便您知道下一页是否在此日期范围内或下一个日期范围内。

# android - 在android中向HTTP POST请求添加授权标头（使用JSON）

> ID：10287368
> 
> 赞同：0
> 
> 时间：2012-04-23T19:58:45.697
> 
> 标签：android, json, header

我的授权标头是“授权：TRUEREST username=user &password=pass&apikey=key&class=class”。如何将其放入 HTTPPOST 请求..？我正在这样做：

```
 HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost(url);
            httppost.setHeader("Authorization","TRUEREST");  
            httppost.setHeader("username","user");
            httppost.setHeader("password","pass");
            httppost.setHeader("apikey","key");
            httppost.setHeader("class","class"); 
```

不会发送凭据。这段代码有什么问题？？请帮助..!! 提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T03:22:06.513

首先，您确定需要将所有这些都放在“授权”标题中吗？其次，您正在做的是为每个值添加 5 个不同的标头，而不是添加单个“授权”标头。

'&' 通常意味着您需要将这些值作为 POST/GET 参数发送，但请检查您的规格。

# python - 如何实现处理 URL 的工作线程队列

> ID：10287371
> 
> 赞同：2
> 
> 时间：2012-04-23T19:59:00.870
> 
> 标签：python, multithreading

我是 python 新手，在线程和队列方面存在一些问题。

基本上我有一个 URL 文件，并且想创建一个由 10 个工作人员组成的队列，这些工作人员依次处理该文件并执行 urllib2 请求。

我只是无法理解它！谁能帮忙提供一些简单的链接或代码？

谢谢，马特

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T21:23:20.153

内置的“队列”模块将为您的应用创建一个良好的底层队列。它为您处理所有多线程锁定语义。

[http://docs.python.org/library/queue.html](http://docs.python.org/library/queue.html)

您可以加载文件、填充队列、启动工作线程，并让它们从队列中拉出并完成工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T20:01:01.550

这个 python 线程池模块对您描述的内容非常有帮助。作者在主页和文档中提供了一些如何使用它的示例。

[http://www.chrisarndt.de/projects/threadpool/](http://www.chrisarndt.de/projects/threadpool/)

# jquery - 如何避免 jquery post() 的堆积

> ID：10287378
> 
> 赞同：1
> 
> 时间：2012-04-23T19:59:16.137
> 
> 标签：jquery, post

我有一个脚本，可以在用户输入新帖子的标题时搜索我的网站以查找重复的内容（就像在 Quora 上一样）。现在它在 keyup 上触发一个 post 请求，导致 post 请求堆积。

关于避免这种情况的最佳方法的任何想法？

```
$("#topic_title").keyup(function(){
    var search_val=$(this).val(); 
    $.post('/?post_type=topic&duplicate=1',{s:search_val},function(data){
        if(data.length>0){
           var results = $(data).find( '#results' );
           $("#duplicates").html(results);
        }

     });
}); 
```

** 感谢所有高质量的答案！为了简单起见，我使用了 abort() 方法。奇迹般有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T20:05:52.813

在这种情况下，我通常会做两件事：

1.  只有在一段时间内没有按键被按下后才发送请求，比如每秒 0.5 秒。这样，如果一个人打字很快，您就不会发送 10 个请求，而您只需在他们停止打字时发送一个。这可以通过使用`setTimeout`和来完成`clearTimeout`。

2.  发送新请求时，取消前一个请求。这样，只有一个活动请求。反正你真的只关心最新的。这可以通过使用来完成`abort()`。

粗略的大纲：

```
var timeout;
var xhr;

$("#topic_title").keyup(function(){
    if(timeout) clearTimeout(timeout);
    if(xhr) xhr.abort();

    timeout = setTimeout(function(){
        doThePost(<parameters>);
    }, 500);
});

function doThePost(){
    xhr = $.post(...);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T20:02:01.263

我会限制 keyup 事件每隔一段时间发生一次。你可以使用这个[油门插件](http://benalman.com/projects/jquery-throttle-debounce-plugin/)

此处的示例将限制事件以 250 毫秒的延迟触发，因此每 250 毫秒只有 1 次击键，而不是每次击键：

```
 $("#topic_title").keyup($.throttle(250, function () {
      var search_val=$(this).val(); 
      $.post('/?post_type=topic&duplicate=1',{s:search_val},function(data){
         if(data.length>0){
            var results = $(data).find( '#results' );
            $("#duplicates").html(results);
         }
      });
 }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T20:07:11.587

请参阅[使用 jQuery 中止 Ajax 请求](https://stackoverflow.com/questions/446594/kill-ajax-requests-using-javascript-using-jquery)。

```
var xhr = null;

$("#topic_title").keyup(function()
{
    var search_val=$(this).val();

    if(xhr != null)
        xhr.abort();

    xhr = $.post('/?post_type=topic&duplicate=1',{s:search_val},function(data){
        if(data.length>0){
           var results = $(data).find( '#results' );
           $("#duplicates").html(results);
        }
    });
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T20:09:14.560

一个简单的方法是使用计时器并调用 post 和 clear timer（如果它是堆叠的）。见下文，

```
$(function () { 
  var timer = null;//in scope
  $("#topic_title").keyup(function(){
    var search_val=$(this).val();

    if (timer != null) {
       clearTimeout(timer);
    }

    timer = setTimeout(function () {
       $.post('/?post_type=topic&duplicate=1',{s:search_val},function(data){
          if(data.length>0){
            var results = $(data).find( '#results' );
            $("#duplicates").html(results);
          }      
       });
     }, 1000); //The timer is 1 second, update timer as your need.
  });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T20:01:53.347

看看这个 jQuery 插件。 [油门去抖.js](http://benalman.com/projects/jquery-throttle-debounce-plugin/)

# c++ - 在 Boost.Log 中按范围过滤

> ID：10287382
> 
> 赞同：0
> 
> 时间：2012-04-23T19:59:31.953
> 
> 标签：c++, boost, boost-log

我正在使用[Boost.Log](http://boost-log.sourceforge.net/libs/log/doc/html/index.html)库。我创建了一个`named_scope`属性来跟踪我在代码中的位置。（我用 手动指定它`BOOST_LOG_NAMED_SCOPE("...")`。）是否可以创建一个过滤器（使用`set_filter`）只选择来自特定范围的消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T22:37:36.363

请参考 Andrey 最新和最棒的日志记录[文档](http://boost-log.sourceforge.net/libs/log/doc/html/log/detailed/attributes.html)：

> 范围堆栈在内部实现为特定于线程的全局存储。有一个 named_scope 属性，允许将此堆栈挂钩到日志记录管道。此属性生成嵌套类型 named_scope::scope_stack 的值，它是范围堆栈的实例。该属性可以通过以下方式注册：
> 
> logging::core::get()->add_global_attribute("Scope", attrs::named_scope());

然后，您应该配置您的*前端*接收器过滤器以仅锁定您感兴趣的标签（在过滤器 lambda 或您传递给 set_filter() 的自定义过滤器中，您可以使用以下内容来**提取**范围名称，假设您工作与 MBCS）

```
typedef attrs::basic_named_scope< char >::value_type scope_stack;       
logging::value_extractor<char, scope_stack> S("Scope");
scope_stack s = *S(rec);
if ( s.empty() == false )
{
   const attrs::basic_named_scope_entry<char>& e = s.back(); 
   // Filter by e.scope_name
   ...
} 
```

我希望它对你有用:)

# shell - 在认证墙后面生成 PDF

> ID：10287386
> 
> 赞同：13
> 
> 时间：2012-04-23T19:59:40.950
> 
> 标签：shell, command-line, wkhtmltopdf

我正在尝试使用需要我首先登录的 WKHTMLTOPDF 生成 PDF。互联网上已经有一些，但我似乎无法让我的工作。我在航站楼 - 没什么特别的。

我已经尝试过（在很多其他的东西中）：

```
/usr/bin/wkhtmltopdf --post username=myusername --post password=mypassword "URL to Generate" test.pdf

/usr/bin/wkhtmltopdf --username myusername --password mypassword "URL to Generate" test.pdf

/usr/bin/wkhtmltopdf --cookie-jar my.jar --post username=myusername --post password=mypassword "URL to Generate Cookie For" 
```

用户名和密码都是表单上输入字段的 the`id`和 the `name`。我正在显示 my.jar 文件，但没有写入任何内容。

具体问题：

1.  我应该在任何地方指定登录页面和/或表单操作吗？
2.  --cookie-jar 参数已在各个地方（无论是需要还是其他地方）都提到过。如果有必要，它是如何工作的？我已经创建了 my.jar 文件，但如何再次使用它？参考：

[http://code.google.com/p/wkhtmltopdf/issues/detail?id=356](http://code.google.com/p/wkhtmltopdf/issues/detail?id=356)

* * *

编辑：

肯定有人成功地做到了这一点？如果有人愿意让它在一些需要登录凭据以消除潜在变量的流行网站上运行，那么展示示例的好方法可能是。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-01T15:49:48.670

每个站点的每个登录表单都不同。您要做的是通过阅读页面上的 HTML（您可能知道）来确定您需要传递给该登录表单目标的所有内容。在用户名/密码字段之上可能需要一个额外的隐藏字段来防止跨站点请求伪造。

cookie jar 参数是一个文件，它存储从 Web 服务器返回的 cookie。您需要在对登录表单的第一个请求中指定它，并在后续请求中继续使用 Web 服务器的 cookie/会话信息登录后会还给你。

所以总结一下：

1.  查看页面上是否需要任何其他参数。
2.  确保您提交的 URL 与该页面上表单元素的 ACTION 属性相同。
3.  在登录请求和第二个内容请求中都使用 --cookie-jar 参数。
4.  --post 参数的语法是 --post username user_name_value --post password password_value

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-02T19:15:13.870

我认为我要登录的表格太复杂了。它是安全的，设置三个 cookie，重定向两次，并在用户名和密码之外发布许多其他变量，其中一个需要 cookie 值（我什至尝试将值连接到 post 变量中，但没有运气）。这可能是一个非常罕见的问题 - 绝不是 WKHTMLTOPDF 的错。

我最终使用 CURL 登录并将页面写入本地文件，然后针对该文件运行 WKHTMLTOPDF。对于其他有类似问题的人来说，绝对是一个可靠的解决方法。

* * *

编辑：CURL，如果有兴趣：

```
curl_setopt($ch, CURLOPT_HEADER, 1); # Change to 1 to see WTF
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($ch, CURLOPT_USERAGENT, $_SERVER['HTTP_USER_AGENT']);
curl_setopt($ch, CURLOPT_URL, $loginUrl);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $postFields);
curl_setopt($ch, CURLOPT_COOKIEJAR, 'cookie.txt');
curl_setopt($ch, CURLOPT_COOKIEFILE, 'cookie.txt');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-03T03:36:12.983

You might be interested in trying to render to PDF with [phantomjs](http://phantomjs.org/).

```
phantomjs rasterize.js http://blah.com/ webgl.pdf 
```

You can find rasterize.js [here](http://code.google.com/p/phantomjs/wiki/QuickStart#Rendering). Basically, you write some javascript to log in on the login page, then you do the PDF creation.

However, the output is not the same as wkhtmltopdf. You could just save the HTML to a file, and then render with wkhtmltopdf if the phantomjs PDF output is too awful.

# php - 当标头已经发出时，如何对页面进行 404 处理？

> ID：10287389
> 
> 赞同：2
> 
> 时间：2012-04-23T19:59:52.840
> 
> 标签：php, mysql, http-headers, http-status-code-404

我使用 php GET 检查 URL 中的 ID，然后从与该 ID 匹配的数据库中检索 tekst。这是执行此操作的代码片段：

```
function getLyric() {
$id = (int)$_GET['id'];
$query = mysql_query("SELECT * FROM lyrics WHERE id = ".$id."") or die(mysql_error());
if ($row = mysql_fetch_assoc($query)) { ?>
    <h1><?= $row['title']; ?> lyrics</h1>
    <h2><?= $row['author']; ?></h2>

    <pre><?= $row['lyrics']; ?></pre>
    <?php }
else { header("HTTP/1.1 404 Not Found"); header("Status 404 Not Found"); }
} 
```

这就是我调用此函数的页面的外观：

```
<?php include 'includes/header.php' ?>
<?php getLyric(); ?>
<?php include 'includes/footer.php' ?> 
```

不幸的是，函数中的 404 部分不起作用。我收到以下警告。`Warning: Cannot modify header information - headers already sent by [redacted] functions.php on line 61`. 第61行是404部分；“其他{标题}〜”。

我从 Stackoverflow 了解到这是因为该`<html><head>`部分已经在页面上输出，所以我不能再更改它了。这是对的？

以前当我没有 else~ 部分时，我只是得到一个空白页。在这种情况下如何正确发送 404？如果我不能，最接近的选择是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T20:06:32.533

您只需要将逻辑与演示文稿分开：

```
function getLyric() {
    $id = (int)$_GET['id'];
    $query = mysql_query("SELECT * FROM lyrics WHERE id = ".$id."") 
                 or die(mysql_error());
    return mysql_fetch_assoc($query);
} 
```

...然后：

```
<?php
$row = getLyric();

if (!$row) {
    header("HTTP/1.1 404 Not Found");
    exit;
}

include 'includes/header.php' 
?>

<h1><?= $row['title']; ?> lyrics</h1>
<h2><?= $row['author']; ?></h2>

<pre><?= $row['lyrics']; ?></pre>

<?php 
include 'includes/footer.php'
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T20:01:31.453

一旦您发送了 HTML 代码，您就无法更改标题。标头告诉浏览器如何处理请求的页面。如果它已经收到 HTML，它会假定 content-type:text\html 并开始渲染页面。那时您的标题已定义，您无法返回。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-23T20:01:58.443

不，你不能，标题是第一个出去的东西，所以一旦你发回文本，标题已经可以这么说。

您可能希望在包含标题之前运行查询，运行检查以确保返回数据，然后打印。

```
function getLyric() {
  $id = (int)$_GET['id'];
  $query = mysql_query("SELECT * FROM lyrics WHERE id = ".$id."") or die(mysql_error());
  if ($row = mysql_fetch_assoc($query)) {
    include 'includes/header.php'; 
  ?>
      <h1><?= $row['title']; ?> lyrics</h1>
      <h2><?= $row['author']; ?></h2>

      <pre><?= $row['lyrics']; ?></pre>
      <?php }
  else { header("HTTP/1.1 404 Not Found"); }
}

<?php getLyric(); ?>
<?php include 'includes/footer.php' ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T20:06:00.663

您可以在脚本中启用输出缓冲。

例子：

```
<?php
ob_start();
echo 'Hi';
header('Location: http://someurl');
exit;
?> 
```

请在使用前确定输出缓冲是什么。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T20:08:10.380

```
ob_start();
header("location:somepage.php");
ob_end_flush(); 
```

实际上，如果您打开了输出缓冲，则在刷新之前不会发送任何内容。甚至没有标题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-23T20:08:57.217

如您所见，当内容已发送时，无法发送 404。你有两个选择，IMO

*   修改您的代码以启用输出缓冲。这实质上意味着您回显的所有内容或 PHP 标记之外的内容都会进入缓冲区并且不会发送到客户端。[在这里](http://www.php.net/manual/en/intro.outcontrol.php)阅读

*   修改函数以给出数据而不是 UI。这意味着函数 getLyrics() 应该给出相关行。在您使用`include`任何标题之前，请务必检查该功能是否表明该记录存在。否则，您始终可以发送 404。这实际上是推荐的，并且是一个很好的设计，因为它本质上将逻辑与 UI 分离。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-23T20:03:58.157

一旦发送了标题，您将无法再发送它们。您可以做的是启用[输出缓冲](http://php.net/manual/en/book.outcontrol.php)，它基本上会等到脚本执行完毕后再输出内容。这将允许您在脚本中的任何位置设置标题，但根据您的脚本会产生一些轻微的后果，您应该在盲目启用它之前阅读它。

另外，请阅读 SQL 注入。您的网站极易被利用。

# hibernate - 无效的对象名称休眠 3.6

> ID：10287393
> 
> 赞同：0
> 
> 时间：2012-04-23T20:00:50.670
> 
> 标签：hibernate, jakarta-ee, orm

我在我的应用程序中不断收到连接到托管 SQL Server 2008 的“无效对象名称”。我可以使用字符串从应用程序查询数据库。但是，每当我使用 Hibernate 时，我都会收到此错误

```
//Calling Class
SessionFactory sf = new Configuration().configure().buildSessionFactory();
Session session = sf.openSession();
Transaction tx = session.beginTransaction();
session.save(survey);
tx.commit(); <!--Blows up-->
session.close();

<hibernate-configuration>
<session-factory name="Persist">
<property name="hibernate.connection.driver_class">com.microsoft.sqlserver.jdbc.SQLServerDriver</property>
<property name="hibernate.connection.password">xxxx</property>
<property name="hibernate.connection.url">jdbc:sqlserver://xxxx</property>
<property name="hibernate.connection.username">xxxx</property>
<property name="hibernate.default_catalog">xxxx</property>
<property name="hibernate.dialect">org.hibernate.dialect.SQLServer2008Dialect</property>
<mapping class="com.springmvc.dao.Survey" resource="com/springmvc/dao/Survey.hbm.xml"/>
</session-factory>
</hibernate-configuration>

//Table Mapping
<hibernate-mapping>
<class name="com.springmvc.dao.Survey" table="Survey">
    <id name="SurveyId" type="int">
        <column name="SURVEYID" />
        <generator class="assigned" />
    </id>
    <property name="SurveyName" type="java.lang.String">
        <column name="SURVEYNAME" />
    </property>
    <property name="CreateDate" type="java.sql.Date">
        <column name="CREATEDATE" />
    </property>
    <property name="IsActive" type="boolean">
        <column name="ISACTIVE" />
    </property>
</class>
</hibernate-mapping>

//The Error
org.hibernate.exception.SQLGrammarException: could not insert: [com.springmvc.dao.Survey]
Caused by: com.microsoft.sqlserver.jdbc.SQLServerException: Invalid object name 'Recruiter.Survey'. 
```

谁能告诉我发生了什么以及如何解决它，它必须是一个休眠问题。我尝试添加一个方案，然后我收到一条错误消息，指出不允许 Recruiter.dbo.Survey。没有更多的配置文件可供查看，谷歌为我提供了任何有用的东西。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T20:51:16.250

Your primary key SurveryId is having the generator class as "assigned", you need to assign the key before calling Save in hibernate session. Are you doing that? If you dont want to generate then make it auto generated.

# c++ - C++ int 到字符串的转换

> ID：10287394
> 
> 赞同：5
> 
> 时间：2012-04-23T20:00:54.970
> 
> 标签：c++, string, int, type-conversion

当前源代码：

```
string itoa(int i)
{
    std::string s;
    std::stringstream out;
    out << i;
    s = out.str();
    return s;
}

class Gregorian
{
    public:
        string month;
        int day;
        int year;    //negative for BC, positive for AD

        // month day, year
        Gregorian(string newmonth, int newday, int newyear)
        {
            month = newmonth;
            day = newday;
            year = newyear;
        }

        string twoString()
        {
            return month + " " + itoa(day) + ", " + itoa(year);
        }

}; 
```

而在我的主要：

```
Gregorian date = new Gregorian("June", 5, 1991);
cout << date.twoString(); 
```

我收到此错误：

```
mayan.cc: In function ‘int main(int, char**)’:
mayan.cc:109:51: error: conversion from ‘Gregorian*’ to non-scalar type ‘Gregorian’ requested 
```

有谁知道为什么 int 到字符串的转换在这里失败？我对 C++ 相当陌生，但对 Java 很熟悉，我花了很多时间来寻找这个问题的直接答案，但目前我很困惑。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-23T20:02:13.780

您正在分配一个`Gregorian`指向a 的指针`Gregorian`。删除`new`：

```
Gregorian date("June", 5, 1991); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-01T16:18:38.670

在包含 sstream 之后，您可以使用此函数将 int 转换为字符串：

```
#include <sstream>

string IntToString (int a)
{
    stringstream temp;
    temp<<a;
    return temp.str();
} 
```

# java - Hibernate 无法初始化代理

> ID：10287397
> 
> 赞同：0
> 
> 时间：2012-04-23T20:01:00.157
> 
> 标签：java, mysql, hibernate

我收到以下异常..

```
SEVERE: Servlet.service() for servlet [appServlet] in context with path [/assessment] threw exception [Request processing failed; nested exception is org.hibernate.LazyInitializationException: could not initialize proxy - no Session] with root cause
org.hibernate.LazyInitializationException: could not initialize proxy - no Session
    at org.hibernate.proxy.AbstractLazyInitializer.initialize(AbstractLazyInitializer.java:149)
    at org.hibernate.proxy.AbstractLazyInitializer.getImplementation(AbstractLazyInitializer.java:195)
    at org.hibernate.proxy.pojo.javassist.JavassistLazyInitializer.invoke(JavassistLazyInitializer.java:185)
    at org.assessme.com.entity.User_$$_javassist_0.getFirstName(User_$$_javassist_0.java)
    at org.assessme.com.UserManagementController.data(UserManagementController.java:40)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:212)
    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)
    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:900)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:827)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

我很确定的问题在于我的 DAO ......

```
public class UserDAO {

    public User getById(Long id) {
        HibernateUtil.buildSessionFactory();
        Session session = HibernateUtil.getSessionFactory().getCurrentSession();
        session.beginTransaction();
        User user = (User) session.load(User.class, id);
        session.getTransaction().commit();
        return user;
    }
} 
```

这是处理交易的正确方法吗？每次我想返回一个对象时都应该做 buildSessionFactory 吗？最好只做一次吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T20:12:23.640

`session.beginTransaction()`返回 Transaction 对象，您应该将提交调用到该实例中。您在每个中处理两个单独的事务`session.getTransaction()`。还要确保`session.close()`在任何地方关闭会话 ( )。

[http://docs.jboss.org/hibernate/orm/3.5/reference/es-ES/html/example-weblog.html](http://docs.jboss.org/hibernate/orm/3.5/reference/es-ES/html/example-weblog.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T20:08:18.950

尝试

> HibernateUtil.getSessionFactory().beginSession();

而不是 ...getSessionFactory().getCurrentSession();

在您的情况下，如果之前没有创建会话，则您不会检索活动会话。

# jquery - 使用 Jasmine 测试间谍方法的返回值

> ID：10287399
> 
> 赞同：7
> 
> 时间：2012-04-23T20:01:02.217
> 
> 标签：jquery, datatables, jasmine

全面披露......这是我的第一个 SO 问题。如果我遗漏任何内容，请善待。;-)

我开始使用[Jasmin](http://pivotal.github.com/jasmine/)来测试我的客户端 Javascript 对象之一。该对象特别管理名为[DataTables](http://www.datatables.net)的 jQuery 插件的使用。托管的 DataTables 组件将调用几个自定义呈现方法来确定为几列显示什么，我正在尝试测试这些方法。

**简短的问题：**如何测试我需要监视的方法的返回值？

**背后的故事**

这是我的 Javascript 对象的缩小版本：

```
function Table(elemId) {
    this._table = $('#'+elemId).dataTable({
        "aoColumnDefs": [
            {
                "fnRender": function(oObj, id) { 
                    return Table.renderIdColumn(oObj, id, lTable); 
                }, 
                "aTargets": ["idColumn"], 
                "bUseRendered": false
            },{
                "fnRender": function(oObj, name) { 
                    return Table.renderNameColumn(oObj, name, lTable); 
                }, 
                "aTargets": ["nameColumn"], 
                "bUseRendered": false
            }
        ],
        "bJQueryUI": true,
        "sPaginationType": "full_numbers"
    });
}

Table.renderIdColumn = function(oObj, id, lTable) {
    return '<input type="checkbox" value="'  id + '" />';
};

Table.renderNameColumn = function(oObj, name, lTable) {
    var id = oObj.aData[0];
    return '<a href="/obj/edit/' + id + '">' + name + '</a>';
}; 
```

所以在创建 Table 对象时，我需要拦截对 Table.RenderIdColumn 和 Table.renderNameColumn 的调用，这样我才能断言结果。到目前为止，这是我在 Jasmine 中所拥有的：

```
describe("Table", function() {
    var lTable;

    // Write a DOM table that will be rendered by the jQuery DataTable plugin
    beforeEach(function() {
        $('<table id="storeTable"></table>').appendTo('body');
        var headerCellClasses = ["idColumn","nameColumn"];
        var headerRow = $('<tr></tr>');
        $.each(headerCellClasses, function(index, value) {
            headerRow.append('<th class="' + value + '"></th>')
        });
        $('<thead></thead>').append(headerRow).appendTo('#lTable');
        $('<tbody></tbody>').appendTo('#lTable');
    });

    afterEach(function() {
        // First remove DataTables enhancements
        lTable.fnDestroy();
        // Now remove from DOM
        $('#lTable').remove();
    });

    describe("when edit links are shown", function() {
        it("should render a checkbox in ID column", function() {
            spyOn(Table, "renderIdColumn");
            lTable = initializeDataTable();
            var oSettings = lTable._table.fnSettings();
            var id = 1;
            var obj = {
                oSettings: oSettings,
                iDataColumn: 0,
                iDataRow: 0,
                mDataProp: 0,
                aData: oSettings.aoData[0]._aData
            }

            var expected = '<input type="checkbox" value="'+ id +'" />';
            expect(Table.renderIdColumn).toHaveBeenCalledWith(obj, id, lTable);
            var results = Table.renderIdColumn(obj, id, lTable);
            expect(results).toEqual(expected);
        });
        it("should render the name column with a proper link", function() {
            spyOn(Table, "renderNameColumn");
            lTable = initializeDataTable();
            var oSettings = lTable._table.fnSettings();
            var name = "Name";
            var obj = {
                oSettings: oSettings,
                iDataColumn: 3,
                iDataRow: 0,
                mDataProp: 3,
                aData: oSettings.aoData[0]._aData
            }

            var expected = '<a href="/obj/edit/1">Name</a>';
            expect(Table.renderNameColumn).toHaveBeenCalledWith(obj, name, lTable);
            var results = Table.renderNameColumn(obj, name, lTable);
            expect(results).toEqual(expected);
        });
    });

});

function initializeDataTable() {
    // Mock the AJAX call to the server from DataTables plugin
    spyOn($.fn.DataTable.defaults, "fnServerData").andCallFake(function( sUrl, aoData, fnCallback, oSettings ) {
        var json = {
            iEcho: 1,
            iTotalRecords: 1,
            iTotalDisplayRecord: 1,
            aaData: [
                [1, "Name"]
            ]
        }
        fnCallback(json);
    });
    return new Table("lTable");
} 
```

在这两个测试用例中，变量“结果”都是“未定义”。我需要测试这些方法以确保它们呈现正确的 HTML，但我似乎无法弄清楚如何断言返回值。一旦我对该方法进行了间谍活动，它似乎不会返回任何内容。我试过插入

```
Table.renderIdColumn.reset();
Table.renderNameColumn.reset(); 
```

但是这些都没有做任何事情......也许是因为我的方法是静态的？仅供参考，这些方法是静态的，因为如果它们是实例方法，我无法正确分配“间谍”。Table 构造函数调用 DataTables 插件，这将导致这些方法被自动调用，因此我无法构造 Table 对象，然后对这些方法进行监视。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T20:06:38.740

当您编写 时`spyOn(Table, "renderIdColumn")`，您（有效地）用`Table.renderIdColumn`一个不返回任何内容的函数替换。

如果您想断言它被调用并仍然返回原始结果，请编写`spyOn(Table, "renderIdColumn").andCallThrough()`.

您提到的`.reset()`语法只会重置间谍的内部调用计数（IIRC）。

# git - GIT：如何删除使远程分支跟踪本地分支的任何配置？

> ID：10287402
> 
> 赞同：0
> 
> 时间：2012-04-23T20:01:10.173
> 
> 标签：git, github

标题说什么。git 的版本是 1.5.6.3 我试过使用 git branch --track 但它会抛出错误，说分支已经存在。我很困惑。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T20:04:05.713

如果您有一个名为“develop”的分支，并且您想将它与远程上类似名称的分支“取消链接”，请尝试以下操作：

```
git config --remove-section branch.develop 
```

这将从您的本地工作副本中删除配置。

查看`git config --list`此更改之前和之后的差异。你显然可以通过简单地编辑你的`.git/config`文件来完成同样的事情，但我喜欢使用它`git config`。

# mysql - SQL查询返回由另一列“分组”的一列的三个最高值

> ID：10287403
> 
> 赞同：3
> 
> 时间：2012-04-23T20:01:14.793
> 
> 标签：mysql, sql

假设我有一张这样的桌子：

```
Player  Score
A       5
B       4
A       3
B       2
A       1
B       1
A       2
B       3
A       4
B       5 
```

我需要一个 SQL 查询，它将按玩家“分组”的降序返回每个玩家的三个最高分数，即

```
Player  Score
A       5
A       4
A       3
B       5
B       4
B       3 
```

非常感谢任何指点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T22:24:07.823

这是每组产生前 n 个的老式（阅读：基本 sql）方式。您可以在分组条件下（这里是玩家）将表格加入到自身中，并在右侧选择得分较高的记录；如果有三个或更少这样的记录，则该行是每组前 n 行之一。

```
select player.player, player.score
from Player
left join Player p2
on p2.player = player.player
  and p2.score > player.score
group by player.player, player.score
having count(distinct p2.score) < 3
order by 1, 2 desc 
```

您可能会检查替代版本，使用不存在：

```
select player, score
from player
where not exists
(
  select p2.player
  from Player p2
  where p2.player = player.player
  and p2.score > player.score
  group by p2.player
  having count(distinct p2.score) > 3
)
order by 1, 2 desc 
```

这两个版本在关系的表示上有所不同 - 第一个返回一行（按 group by 的性质）并且需要连接回原始表以显示所有记录，第二个版本直接从原始表中工作，一次显示所有数据和关系.

[你可以在 Sql Fiddle](http://sqlfiddle.com/#!2/01fc6/26)找到Demo 。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T23:18:12.610

在 SQL 服务器中：

```
select p.player, p.score
from PS p
where p.score in (select top 3 score from PS 
                 where player = p.player order by score desc)
order by p.player asc, p.score desc 
```

在 MySql 中：

```
select p.player, p.score
    from PS p
    where p.score in (select score from PS 
                     where player = p.player order by score desc limit 3)
    order by p.player asc, p.score desc 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-23T20:11:03.897

我认为您正在寻找的可以在这里找到：

[http://www.sql-ex.ru/help/select16.php](http://www.sql-ex.ru/help/select16.php)

基本上，最好的解决方案是使用 RANK 函数。以下是该网站的示例代码：

```
SELECT maker, model, type FROM
(
SELECT maker, model, type, RANK() OVER(PARTITION BY type ORDER BY model) num
FROM Product
) X
WHERE num <= 3 
```

您只需要修改 Partition By 部分以按分数降序排列。

**编辑**

根据您将使用 MySQL 的信息，您需要对上述查询（适用于 Microsoft SQL）进行一些修改。您需要用您自己的 RANK 实现替换 RANK 函数。这并不难。完整的说明可以在这里找到：

[http://thinkdiff.net/mysql/how-to-get-rank-using-mysql-query/](http://thinkdiff.net/mysql/how-to-get-rank-using-mysql-query/)

这将向您展示如何实现一个可以为您提供排名编号的计数器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T20:09:56.687

根据您使用的 DBMS，您可能能够以某种形式使用 row_number

在 SQL Server 2008 中，您可以使用

```
create table #player
( Player char, Score int )

insert into #player (Player, Score) Values
('A',5),('B',4),('A',3),('B',2),('A',1),('B',1),('A',2),('B',3),('A',4),('B',5)

select * from #player

select Player, Score from 
(
  select *, ROW_NUMBER() over(partition by Player order by Score desc) as rowNo 
  from #player
) as tmp
where tmp.rowNo <= 3

drop table #player 
```

# sql - 从旧版 Oracle 数据库和 ActiveRecord 查询日期列的问题

> ID：10287404
> 
> 赞同：1
> 
> 时间：2012-04-23T20:01:15.757
> 
> 标签：sql, ruby-on-rails, oracle, activerecord, legacy-database

我是 Rails 新手，仍在学习它是如何工作的。我正在尝试从旧 Oracle 数据库中的日期列中检索年份列表，以便获取已输入对象的所有年份列表。Oracle 数据库是 10g，我正在使用带有 ruby​​ 1.9.2p290 的 rails 3.2 并使用 oracle 增强适配器 gem。

目前，我正在使用以下代码执行我的查询（.attribute 是为了帮助我确定查询返回的内容）：

```
- License.select("distinct(to_char(application_date,'yyyy'))").each do |lic|
    %p= lic.attributes 
```

我得到的结果是一些散列，其中包含在我不确定如何访问的数据库列中找到的所有不同年份。

```
{"(to_char(application_date,'yyyy'))"=>"2002"} 
```

我还尝试简单地从数据库表中选择日期列中的所有行并输出结果。但是，我收到一个我不太了解如何解决的 Oracle 错误。

```
- License.select("application_date").uniq.each do |lic|
    %p= lic.year 
```

给我以下错误：

```
OCIError: ORA-01878: specified field not found in datetime or interval: SELECT DISTINCT application_date FROM "LICENSE" 
```

Oracle 增强适配器配置为在 oracle 初始化程序中按列名模拟日期：

```
self.emulate_dates_by_column_name = true 
```

我还将许可证模型中的列设置为日期列：

```
set_date_columns :application_date 
```

有没有办法从数据库中日期列的所有行中检索不同的年份？我不太确定如何从该列中获得唯一年份数据集的所需结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T14:46:52.380

看来我的问题与 Oracle 处理日期列的方式有关。通过使用[此处](http://blog.rayapps.com/2007/08/27/how-to-explicitly-set-oracle-date-column-as-ruby-date-attribute/)的解决方案，我能够解决 Oracle 错误的问题。

# javascript - jQuery Instagram的

> ID：10287411
> 
> 赞同：1
> 
> 时间：2012-04-23T20:01:51.117
> 
> 标签：javascript, jquery, image, api, instagram

使用以下代码---

```
<html>
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript">

$(function() {

$.ajax({
    type: "GET",
    dataType: "jsonp",
    cache: false,
    url: "https://api.instagram.com/v1/media/131324529876654234_1491525?client_id=afd15cca7d664a1c964d54bac0488b93",
    success: function(data) {
        for (var i = 0; i < 1; i++) {
            $("#pics").append("<img src='" + data.data[i].images.thumbnail.url + "'></img>");
        }
    }
});
});

    </script>
</head>
<body>
    <div id="pics"></div>
</body> 
```

我想根据我在 api 中传递的 id 显示图像。由于某种原因，它不起作用。任何人都可以告诉我我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T20:04:25.927

```
data.data.images.thumbnail.url 
```

您正在访问的 JSON 中的任何地方似乎都没有数组。

这是您的 JSON 的简化版本来说明这一点：

```
{
    ...
    "data": {
        ...
        "images": {
            "low_resolution": {
                "url":"http:\/\/distilleryimage6.s3.amazonaws.com\/e41665005cf611e19896123138142014_6.jpg",
                "width":306,
                "height":306
            },
            "thumbnail": {
                "url":"http:\/\/distilleryimage6.s3.amazonaws.com\/e41665005cf611e19896123138142014_5.jpg",
                "width":150,
                "height":150
            },
            "standard_resolution": {
                "url":"http:\/\/distilleryimage6.s3.amazonaws.com\/e41665005cf611e19896123138142014_7.jpg",
                "width":612,
                "height":612
            }
        },
        ...
    }
} 
```

这是一个演示：http: [//jsfiddle.net/8Reu2/](http://jsfiddle.net/8Reu2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T20:13:45.403

您使用的 url 是为了带回特定的媒体元素（*单张照片*）。

所以你需要访问它`data.data.images.thumbnail.url`

您可以使用
`https://api.instagram.com/v1/media/popular?client_id=afd15cca7d664a1c964d54bac0488b93`
来检索该用户的流行媒体，然后`data.data`确实是一个数组。

看看[文档](http://instagr.am/developer/endpoints/media/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T20:14:34.770

data 不是数组 不需要引用 data[i] 只是数据 [http://jsbin.com/oxetok/edit#javascript,html,live](http://jsbin.com/oxetok/edit#javascript,html,live)

# c++ - 从套接字无限读取

> ID：10287424
> 
> 赞同：0
> 
> 时间：2012-04-23T20:02:26.317
> 
> 标签：c++, http, sockets, chunked

从套接字读取分块数据（来自http请求）的正确方法是什么？

```
sf::TcpSocket socket;
socket.connect("0.0.0.0", 80);

std::string message = "GET /address HTTP/1.1\r\n";
socket.send(message.c_str(), message.size() + 1);

// Receive an answer from the server
char buffer[128];
std::size_t received = 0;
socket.receive(buffer, sizeof(buffer), received);
std::cout << "The server said: " << buffer << std::endl; 
```

但是服务器发送无限数据并且`socket.receive`不返回管理。有什么正确的方法可以部分读取分块数据？（答案是分块数据）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T20:15:07.310

处理 HTTP 请求的正确方法是使用更高级别的库来为您管理套接字连接。在 C++ 中，一个例子是 pion-net；还有其他类似 Mongoose（它是 C，但可以在 C++ 中使用）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T20:53:52.177

理论上无限数据是可能的，而实际实现因流程而异。

*   方法 1 - 通常许多协议在前几个字节（4 个字节）中发送大小，你可以有一个 while 循环

{

```
int i = 0, ret = 1;
unsigned char buffer[4];
while ( i<4 && ret == 0)
   socket.receive(buffer + i,  1 , ret);

// have a while loop to read the amount of data you need. Malloc the buffer accordingly 
```

}

*   方法 2 - 或者在您不知道长度（无限）的情况下

{

```
char *buffer = (char *)malloc(TCP_MAX_BUF_SIZE);
std::size_t total = 0, received = 0;
while ( total < TCP_MAX_BUF_SIZE && return >= 0) {
    socket.receive(buffer, sizeof(buffer), received);
    total += received;
}

//do something with your data 
```

}

您将不得不在某个时候中断并处理您的数据将其分派到另一个线程以释放内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T00:43:27.187

如果通过“分块数据”您指的是`Transfer-Encoding: chunked`HTTP 标头，那么您需要读取每个块并解析块标头以了解要在每个块中读取多少数据并知道何时收到最后一个块。您不能只是盲目地调用`socket.receive()`，因为分块数据具有已定义的结构。阅读[RFC 2616 第 3.6.1 节](https://www.rfc-editor.org/rfc/rfc2616#section-3.6.1)了解更多详细信息。

您需要执行更多类似以下的操作（为简洁起见省略了错误处理 - 不要在您的实际代码中省略它）：

```
std::string ReadALine(sf::TcpSocket &socket)
{
    std::string result;

    // read from socket until a LF is encountered, then
    // return everything up to, but not including, the
    // LF, stripping off CR if one is also present...

    return result;
}

void ReadHeaders(sf::TcpSocket &socket, std::vector<std::string> &headers)
{
    std::string line;

    do
    {
        line = ReadALine(socket);
        if (line.empty()) return;
        headers.push_back(line);
    }
    while (true);
}

std::string UpperCase(const std::string &s)
{
    std::string result = s;
    std::for_each(result.begin(), result.end(), toupper);            
    return result;
}

std::string GetHeader(const std::vector<std::string> &headers, const std::string &s)
{
    std::string prefix = UpperCase(s) + ":";

    for (std::vector<std::string>::iterator iter = headers.begin(), end = headers.end(); iter != end; ++iter)
    {
        if (UpperCase(i)->compare(0, prefix.length(), prefix) == 0)
            return i->substr(prefix.length());
    }

    return std::string();
}

sf::TcpSocket socket; 
socket.connect("0.0.0.0", 80); 

std::string message = "GET /address HTTP/1.1\r\nHost: localhost\r\n\r\n"; 
socket.send(message.c_str(), message.length()); 

std:vector<std::string> headers;

std::string statusLine = ReadALine(sockeet);
ReadHeaders(socket, headers);

// Refer to RFC 2616 Section 4.4 for details about how to properly
// read a response body in different situations...

int statusCode;
sscanf(statusLine.c_str(), "HTTP/%*d.%*d %d %*s", &statusCode);

if (
    ((statusCode / 100) != 1) &&
    (statusCode != 204) &&
    (statusCode != 304)
    )
{
    std::string header = GetHeader(headers, "Transfer-Encoding");

    if (UpperCase(header).find("CHUNKED") != std::string::npos)
    {
        std::string extensions;
        std::string_size_type pos;
        std::size_t chunkSize;

        do
        {
            line = ReadALine(socket);
            pos = line.find(";");
            if (pos != std::string::npos)
            {
                extensions = line.substr(pos+1);
                line.resize(pos);
            }
            else
                extensions.clear();

            chunkSize = 0;
            sscanf(UpperCase(line).c_str(), "%X", &chunkSize);
            if (chunkSize == 0)
                break;

            socket.receive(someBuffer, chunkSize);
            ReadALine(socket);

            // process extensions as needed...
            // copy someBuffer into your real buffer...
        }
        while (true);

        std::vector<std::string> trailer;
        ReadHeaders(socket, trailer);

        // merge trailer into main header...
    }
    else
    {
        header = GetHeader(headers, "Content-Length");

        if (!header.empty())
        {
            uint64_t contentLength = 0;
            sscanf(header.c_str(), "%Lu", &contentLength);

            // read from socket until contentLength number of bytes have been read...
        }
        else
        {
            // read from socket until disconnected...
        }
    }
} 
```

# javascript - WordPress 主题在 IE 中显示不正确

> ID：10287429
> 
> 赞同：0
> 
> 时间：2012-04-23T20:02:49.177
> 
> 标签：javascript, html, css, xhtml, wordpress-theming

我在[http://pizzli.com/toothworks](http://pizzli.com/toothworks)上工作，该站点在 FireFox 中看起来很漂亮，但是当我在 Internet Explorer 中打开它时，它显示完全混乱。任何支持将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T20:13:40.213

首先验证页面，然后您会发现代码中的一些错误应该更正：

[http://validator.w3.org/check?uri=http%3A%2F%2Fpizzli.com%2Ftoothworks%2F&charset=%28detect+automatically%29&doctype=Inline&group=0](http://validator.w3.org/check?uri=http%3A%2F%2Fpizzli.com%2Ftoothworks%2F&charset=%28detect+automatically%29&doctype=Inline&group=0)

第一个错误在脚本中，因此您现在不必为此烦恼。

您有一些尚未关闭的中断标签和图像标签，这很容易修复。

您在页面中间有一个样式标签，它应该在 head 标签中。

您似乎在某个地方的 div 标签有不匹配的开始和结束标签，它们最后没有加起来。

# ruby-on-rails - 如何测试时间跨度参数？

> ID：10287435
> 
> 赞同：1
> 
> 时间：2012-04-23T20:03:20.750
> 
> 标签：ruby-on-rails, ruby, time, operator-overloading, case

我正在努力解决以下问题：

```
$ rails c
Loading development environment (Rails 3.2.1)
irb(main):001:0> 2.class
=> Fixnum
irb(main):002:0> Fixnum === 2
=> true
irb(main):003:0> 2.hours.class
=> Fixnum
irb(main):004:0> Fixnum === 2.hours
=> false
irb(main):005:0> 
```

我想测试某个指定的参数是符号还是时间跨度。我认为在 Ruby/Rails 中自然的方式是：

```
case param
when :today then
  # do this...
when Fixnum then
  # do that...
else
  raise ArgumentError ...
end 
```

据我所知，ActiveSupport 的源代码`===`没有被 Fixnum 覆盖。那么，我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T20:14:54.377

你可以从控制台看到，那`2.hours`不可能`Fixnum`，因为它的`#inspect`方法被覆盖了。它只是假装是 Fixnum，但它确实是`ActiveSupport::Duration`（参见[源代码](https://github.com/rails/rails/blob/3018f4727621b6f2b117a2b5d75561127f2a8592/activesupport/lib/active_support/duration.rb)）

```
> 2.hours
=> 7200 seconds 
> 2.hours.to_i
=> 7200 
```

更好地检查它是否响应某些方法。如果它响应`to_i`，它不是一个符号。

```
> :today.respond_to?(:to_i)
=> false 
> 2.hours.respond_to?(:to_i)
=> true 
```

# xml - Titanium - 使用来自 json 的数据创建单列选择器

> ID：10287437
> 
> 赞同：1
> 
> 时间：2012-04-23T20:03:23.543
> 
> 标签：xml, json, titanium, picker

我正在尝试创建一个单列选择器，其数据来自 json doc。现在我正在为 iOS 设备编写代码，但计划对 android 使用相同的代码。当我运行此代码时，选择器为空。任何帮助表示赞赏！

```
////
var win = Titanium.UI.createWindow({
    title:"Creating a Single-Column Picker",
    backgroundColor:"#FFF",
    exitOnClose:true
});

var url ="http://stats.catchitkansas.com/sunflower/cik/xml/app/app_master_schools.json"; //  rss     feed url

var json, object_name, locatie, i, row, title, val;

//A single column picker

var picker = Ti.UI.createPicker({
bottom:0,
});

var xhr = Ti.Network.createHTTPClient({ 

    onload: function(e) { // Ti.API.debug(this.responseText);

        json = JSON.parse(this.responseText); 
            for (i = 0; i < json.object_name.length; i++) { 

            locatie = json.object_name[i]; 

            picker.add(Ti.UI.createPickerRow({title: e.locatie.title}));
            }   
        //Now, we need add the pickerRow objects in the data array to the picker
        Ti.API.debug(this.responseText);
        alert('success');

        }, 
    }

);
picker.selectionIndicator = true;

xhr.open('GET',url);

xhr.send();

//This label contains text that will change with each picker change
var results = Titanium.UI.createLabel({
    text:"Select from the picker below",
    height:40,
    width:"auto",
    top:20  
});

//When using a picker, listen for the "change" event
picker.addEventListener("change", function(e){
    results.text = e.row.title + ": " + e.row.val; //Pull the title and val properties from the     selected pickerRow object (accessed via e.row)
});

win.add(picker);
win.add(results);

win.open(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T20:08:00.270

### 问题 #1

您的数据馈送返回格式不正确的 JSON。

改变这个

`"object_name": {`

到

`"object_name":`

（通过[http://jsonlint.com/](http://jsonlint.com/)运行 JSON 找到）

* * *

### 问题 #2

改变这个

`picker.add(Ti.UI.createPickerRow({title: e.locatie.title}));`

到

`picker.add(Ti.UI.createPickerRow({title: locatie.title}));`

该`locatie`对象不是事件变量的一部分`e`，它是一个独立变量。

* * *

### 问题 #3

在 HttpClient 请求完成*之前*添加选择器。

您应该移动`win.add(picker);`到回调`for`内的循环之后。`onload`

```
var xhr = Ti.Network.createHTTPClient({ 
    onload: function(e) { 
        json = JSON.parse(this.responseText); 

        for (i = 0; i < json.object_name.length; i++) { 
            locatie = json.object_name[i];

            picker.add(Ti.UI.createPickerRow({title: locatie.title}));
        }   

        win.add(picker);
        alert('success');
    } 
}); 
```

# java - Java数学逻辑错误

> ID：10287438
> 
> 赞同：0
> 
> 时间：2012-04-23T20:03:31.697
> 
> 标签：java, math, logic

我的项目中有以下代码：

```
 int percent = 2;
  int count = 10;
  int percentagefill = (percent/10)*count; 
  System.out.println(percentagefill); 
```

基本上发生的事情是，我设置了两个变量，百分比和计数。然后我计算填充百分比。由于某种奇怪的原因，百分比填充导致 0，而在这种情况下它应该是 2。任何想法为什么？提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T20:04:19.297

`int`除以`int`仍将导致`int`. 在这种情况下：

```
(percent/10)*count
= (2/10)*10
= (0) * 10 <-- 0.2 is rounded down to 0
= 0 
```

您可以阅读[此问题](https://stackoverflow.com/questions/3144610/java-integer-division-how-do-you-produce-a-double)以供参考。另外，这[是Java规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.17.2)，其中说整数除法向0舍入。至于修复，只要[浮点精度不成问题](http://msdn.microsoft.com/en-us/library/c151dt3s%28v=vs.80%29.aspx)，就`double`按照PaulP.RO所说的那样使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T20:06:01.763

您可以除以`10.0`或更改`int percent`为`double percent`以强制转换为`double`。否则，您将得到整数除法，这会截断小数部分。

这是一个相关的问题：[“Java 整数除法，你如何产生一个`double`？”](https://stackoverflow.com/questions/3144610/java-integer-division-how-do-you-produce-a-double)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-23T20:08:51.963

如果你真的需要结果是一个`int`，你可以在除法之前进行乘法运算，以避免整数除法给你零。

```
int percentagefill = (percent*count)/10; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-23T20:05:46.987

更改此行：

```
int percentagefill = (percent/10)*count; 
```

到：

```
double percentagefill = (percent/10.0)*count; 
```

这将使用浮点运算（因为是`10.0`10 而不是 10），并将结果存储在 a 中`double`（与 a 不同，它的精度超过小数点`int`）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-23T20:11:14.363

正如其他人所提到的，你正在失去整数除法的精度

解决方案取决于您的需求：如果您的结果无论如何都需要是整数，请先相乘：

```
int percentagefill = (percent*count)/10; 
```

对你来说可能“足够好”（你会得到四舍五入的正确答案）。

如果您需要能够获得分数答案，则需要将事物转换为浮点类型：

```
double percentagefill = (percent/10.0)*count;
//                                 ^ the .0 makes this a double,
//                                forcing the division to be a
//                                floating-point operation. 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-23T20:07:15.507

很容易修复：

```
 int percent = 2;
  int count = 10;
  double percentagefill = (percent/10.0)*count; 
  System.out.println(percentagefill); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-23T20:09:35.830

戴夫牛顿，你的答案应该是一个答案。:)

整数 2 / 整数 10 = 0。整数 0 * 整数 10 = 0。

您将需要浮点或双精度[数据类型](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)。在处理信息时，请始终避免解释器做出数据类型假设和“强制转换”的机会。println 接受一个干扰器并转换为一个字符串以供显示就是一个例子。

我的大部分工作都在 php 中，当使用值时，0、NULL、ERROR 都可能是不同的东西，并且会产生意想不到的结果。有时您可能需要将变量显式转换为不同的数据类型才能获得预期的结果。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-24T00:13:32.853

这是因为当您应该使用浮点数据类型（例如 double）时，您使用的是整数数据类型。此代码应生成 2.0：

```
double percent = 2;
double count = 10;
double percentagefill = (percent/10)*count; 
System.out.println(percentagefill); 
```

# android - Android单元测试启动模拟器但不是测试

> ID：10287440
> 
> 赞同：1
> 
> 时间：2012-04-23T20:03:37.173
> 
> 标签：android, junit

我正在尝试创建一个扩展 AndroidTestCase 的单元测试来测试 BroadcastReceiver。在测试中我是：

*   实例化接收器
*   使用所需的操作和额外参数创建意图
*   使用意图和 getContext() 调用接收者

当我单击调试作为 Android JUnit 测试时，它首先启动模拟器（启动良好且可用），然后它挂在 27% 尝试启动实际测试，但它永远不会发生。

我究竟做错了什么？

编辑，代码片段

```
 public class RemoteControlReceiverTest extends AndroidTestCase {
    public RemoteControlReceiverTest() {
        super();
    }

    private RemoteControlReceiver mReceiver;
    private String accountSettings;

    @Override
    protected void setUp() throws Exception
    {
        super.setUp();

        mReceiver = new RemoteControlReceiver();
        accountSettings = "<y>gmail</y><u></u><n>test</n><t>smtp+ssl+://::@:25</t><s>imap+ssl+://:test@:143</s>";
    }

    public void testStartActivity()
    {   
        Intent addIntent = new Intent();
        addIntent.setAction("com.kaseya.email.K9RemoteControl.addAccount");
        addIntent.putExtra("accountSettings", accountSettings);

        mReceiver.onReceive(getContext(), addIntent);
    }
}

    <?xml version="1.0" encoding="utf-8"?>
    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="com.kaseya.email.test"
        android:versionCode="1"
        android:versionName="1.0" >

        <uses-sdk android:minSdkVersion="3" />

        <instrumentation
            android:name="android.test.InstrumentationTestRunner"
            android:targetPackage="com.kaseya.email" />

        <application
            android:icon="@drawable/ic_launcher"
            android:label="@string/app_name" >
            <uses-library android:name="android.test.runner" />
        </application>

    </manifest> 
```

# deployment - 我可以将 ClearCase 快照视图用作 Web 服务器上的 DocRoot 吗？

> ID：10287441
> 
> 赞同：1
> 
> 时间：2012-04-23T20:03:45.720
> 
> 标签：deployment, clearcase, web-deployment

我的经理要求我提出将 ClearCase 快照视图用作 Web 服务器的 docRoot 的利弊。在这种情况下，部署到不同的环境将只是对视图的更新。

当然，关于如何控制更新内容还有其他考虑。

因此，我向所有专家提出问题：以前有没有人这样做过？你们怎么看这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T20:27:54.207

**缺点**：

在生产服务器上使用 VCS 进行部署通常被认为是一种**不好的做法**，因为：

*   *您需要安装和管理另一个运行*您的应用程序不需要的组件（此处为 ClearCase）
*   您需要管理权限访问（通常，与 dev、SIT -- 系统集成测试 -- 或 UAT -- 用户验收测试 -- 服务器相比，生产服务器的访问权限非常有限）
*   ClearCase 快照视图可能存在您需要考虑的各种更新故障（被劫持的文件、配置规范选择错误……）。

**优点**：

由于它是一个 Web 服务器，因此可以考虑使用 VCS 作为部署工具，因为部署过程相当简单（只需复制一些文件而不更改结构）。
它可以用来促进：

*   提交回 VCS 的快速修复（因为您已经在 ClearCase 快照视图中，您可以“ `cleartool co -c "quick fix" aFile`”、更改它，然后“ `cleartool checkin`”将其返回。
*   修订标识（`cleartool ls`将为您提供用于显示这些文件的元素选择规则）

* * *

总而言之，我真的更喜欢将 VCS 保留在*开发*环境中，并使用其他流程进行部署。
它不仅感觉更干净，而且还符合开发和生产环境之间的强烈分离。

# r - R连续数据的离散化

> ID：10287445
> 
> 赞同：0
> 
> 时间：2012-04-23T20:03:51.047
> 
> 标签：r

我是 R 编程的新手。我想写一个有两个参数的函数：

```
myfunc = function(val,class) { ... } 
```

在哪里：

```
val = c(1,5,10) 
class = c("yes","no","no") 
```

该函数应返回分裂点和基尼指数或不需要分裂的消息。

分裂点是均值。例如`mean(1, 5) = 3`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T10:30:11.653

*注意：函数更新为根据此答案后的评论解释。*

*听起来*您正在尝试编写如下所示的函数，但是根据您的描述，我有点在黑暗中刺伤：

```
splitting = function(aa, bb) {
  out = vector("list", length(bb))

  for (i in 1:length(bb)) {
    if (bb[i] == "no") {
      out[[i]] = "No splitting is required"
    } else if (bb[i] == "yes") {
      a = c(aa[i], aa[i+1])
      b = mean(a)
      gini = 1-(aa[i]/sum(a))^2 - (aa[i+1]/sum(a))^2
      out[[i]] = paste("The splitting point is", b, 
                       "and the gini is", round(gini, digits=3))
    }
  }
  out
} 
```

一些示例数据：

```
val = c(1, 5, 10)
class1 = c("yes", "no", "no")
class2 = c("yes", "yes", "no") 
```

在示例数据上运行函数：

```
> splitting(val, class1)
[[1]]
[1] "The splitting point is 3 and the gini is 0.278"

[[2]]
[1] "No splitting is required"

[[3]]
[1] "No splitting is required"

> splitting(val, class2)
[[1]]
[1] "The splitting point is 3 and the gini is 0.278"

[[2]]
[1] "The splitting point is 7.5 and the gini is 0.444"

[[3]]
[1] "No splitting is required" 
```

~~但是你没有在你的问题中说任何关于预期的“gini”应该是什么~~......或者如果你的向量中的最后一个元素是“yes”，你可能想要如何处理分裂点。`The splitting point is NA`（如果您有`yes`作为类中的最后一个元素，此函数将产生 a 。）

你能解释一下你打算如何使用输出吗？这似乎不是一种非常用户友好的格式。

## 修改后的函数作为 data.frame 输出

在我看来，这些数据作为 data.frame 会更有用，我可以在其中访问函数生成的值。因此，（同样，不知道 Manos 计划如何使用这些数据）我修改了函数如下：

```
splitting = function(aa, bb) {
  out = vector("list", length(bb))

  for (i in 1:length(bb)) {
    if (bb[i] == "no") {
      out[[i]] = data.frame(SPLIT.PT = "NA", GINI = "NA")
    } else if (bb[i] == "yes") {
      a = c(aa[i], aa[i+1])
      b = mean(a)
      gini = 1-(aa[i]/sum(a))^2 - (aa[i+1]/sum(a))^2
      out[[i]] = data.frame(SPLIT.PT = b, 
                            GINI = round(gini, digits=3))
    }
  }
  cbind(VALUE=aa, CLASS=bb, do.call(rbind, out))
} 
```

这给了我们如下输出：

```
> splitting(val, class1)
  VALUE CLASS SPLIT.PT  GINI
1     1   yes        3 0.278
2     5    no       NA    NA
3    10    no       NA    NA
> splitting(val, class2)
  VALUE CLASS SPLIT.PT  GINI
1     1   yes        3 0.278
2     5   yes      7.5 0.444
3    10    no       NA    NA 
```

要在标识最小 gini 的数据帧之后获取一行，请更改该行：

```
 cbind(VALUE=aa, CLASS=bb, do.call(rbind, out)) 
```

至：

```
 temp = cbind(VALUE=aa, CLASS=bb, do.call(rbind, out))
  mingini = which.min(temp$GINI)
  return(list(temp, paste("The splitting point is", 
                          temp$SPLIT.PT[mingini],
                          "and the gini is",
                          temp$GINI[mingini], 
                          "( see row", mingini, ")"))) 
```

但在我看来，这会降低输出的易用性。

如果这解决了您的问题，请将答案标记为已接受。

# objective-c - 自定义视图中的中心按钮

> ID：10287446
> 
> 赞同：0
> 
> 时间：2012-04-23T20:03:54.840
> 
> 标签：objective-c, xcode, cocoa

我搜索了互联网和这些论坛，但无法找到我的问题的答案。

我有一个带有 WebView 的自定义视图，它调整到用户的屏幕尺寸（模拟最大化），自定义视图顶部有 3 个按钮。

这些按钮是居中的，但是当视图调整大小时，它们会停留在原来的位置，导致它们不再居中。

如何在自定义视图中居中按钮？

每次调整屏幕大小时我都不需要这样做，因为我可以在方法调用中将按钮居中。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T20:12:52.333

最直接的答案是获取 Web 视图的宽度和高度。由于 Web 视图继承自 NSView，因此您可以获取视图的边界。bounds 应该是一个 CGRect 并且通过获得一半的宽度和一半的高度，您可以获得视图的确切中心！希望这有帮助！^_^

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T20:16:44.470

我认为您的问题在于自动调整大小。因此，您可以在*Size inspector*中更改您的按钮自动调整大小：

![自动调整样本大小](../Images/e8843f0fbbe1e419a1cc853fd8d19476.png)

之后，按钮将与顶部中心对齐。

# asp.net - 在 IIS 中设置自定义预处理器

> ID：10287448
> 
> 赞同：0
> 
> 时间：2012-04-23T20:04:04.820
> 
> 标签：asp.net, vb.net, iis-7

我正在研究开发一个预处理器，并想知道如何配置 IIS 以在返回请求页面之前将其传递给它。例如，用户将导航到具有“.app”扩展名的页面，IIS 会将文件发送到我编写的用于解释的控制台程序，然后再将页面发送回用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T20:06:11.137

您应该考虑开发自定义[`HttpHandler`](http://msdn.microsoft.com/en-us/library/5c67a8bd%28v=vs.85%29.aspx).

# asp.net-mvc - ASP.Net MVC：查询字符串参数应该如何传递给子操作？

> ID：10287451
> 
> 赞同：0
> 
> 时间：2012-04-23T20:04:17.250
> 
> 标签：asp.net-mvc, view, controller, query-string

我有一个调用一些子控制器操作的视图。这些子操作之一将检查可选的查询字符串值，这个特定的查询字符串将是一个整数，我想知道在子操作中将此值作为参数是否谨慎？

我不使用参数的原因是因为视图必须将查询字符串解析为整数并执行空检查，因此子操作仅在内部检查查询字符串的存在。

这是推荐的方法吗？还是在 action 方法中有一个参数更好（并且更可测试）？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T20:07:50.200

您只需使用`Html.Action`/`Html.RenderAction`并将您需要的数据传递给此操作方法：

```
 public ActionResult Sample(SomeViewModel model)
 {
     // Do Stuff
 } 
```

然后在你看来：

```
 @Html.Action("Sample", new { model =  new SomeViewModel { Property = "HelloWorld" } }); 
```

# java - java活动渲染在调整大小时闪烁

> ID：10287456
> 
> 赞同：1
> 
> 时间：2012-04-23T20:04:51.677
> 
> 标签：java, swing

我正在开发一个不适合正常应用程序配置文件的 java swing 应用程序。它包含一个选项卡式窗格（和一些其他面板），每个选项卡都包含一个带有活动渲染的画布（一次只有一个线程绘制）。

问题是，当我调整主应用程序窗口的大小时，画布内容不显示（当我停止拖动鼠标时它显示出来），我不知道为什么。我还注意到一些教程将内容呈现为缓冲图像：

[http://jamesgames.org/resources/double_buffer/double_buffering_and_active_rendering.html](http://jamesgames.org/resources/double_buffer/double_buffering_and_active_rendering.html)

这可能是画布闪烁的原因（我理解教程缓冲图像的方式仅用于删除标题栏偏移）？

GUI 的结构如下：

```
JFrame 
  - TabbedPane
      - ScrollPane
          - Canvas 1
      - ScrollPane
          - Canvas 2
  - JPanel
    - labels,buttons,.. 
```

编码：

```
class Renderer extends Canvas implements Runnable
{
   Thread hThread = null;
   BufferStrategy strategy = null;  

   Renderer()
   {
       setIgnoreRepaint(true);
   }

   public void run()
   {
         while(active)
         {  
              g = strategy.getDrawGraphics();

              draw(g); // renderer elements

              strategy.show();
              g.dispose(); 
         }
   }

   // Called when switched to in Tabbed pane
   public void start()
   {
       createBufferStrategy(2); 
       strategy = getBufferStrategy();
       hThread = new Thread(this); 
       hThread.start();
   }

   // Called when switched off in Tabbed pane
   public void stop(){
       hThread.stop();
   }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T20:32:01.790

双缓冲技术用于减少或消除快速绘制代码中的闪烁，这是您应该通过 BufferStrategy 完成的（内部使用 BufferedImage）。

看起来这会让您朝着正确的方向前进：[AWT 自定义渲染 - 捕获平滑调整大小并消除调整大小闪烁](https://stackoverflow.com/questions/6824756/awt-custom-rendering-capture-smooth-resizes-and-eliminate-resize-flicker) （编辑：此链接实际上并不能解决调整大小问题）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T14:04:07.433

解决了我的问题。解决方案是删除 JScrollPane 并将其替换为 JPanel。然后我将画布添加到 JPanel 并自己处理滚动（使用 JScrollBar）。画布不再闪烁，调整大小的效果也更好。

# javascript - 在 Zoom Mobile Safari 上修改 div 位置

> ID：10287458
> 
> 赞同：5
> 
> 时间：2012-04-23T20:04:58.673
> 
> 标签：javascript, jquery, ios5, mobile-safari, zooming

当用户放大时，我很难保留 div 相对于整个屏幕的位置。基本上，我要做的是将 div 重新定位到正确计算的位置，使其看起来好像从未移动过用户可能已经缩放。这很快变得非常棘手，因为我基本上想撤消缩放事件所做的任何视觉更改。

例如，如果 div 的顶部当前在缩放级别 1 的屏幕中心（例如缩放 1.00），当用户转到缩放级别 2 时（通过捏缩放手势，例如缩放 1.235），我想将 div 的顶部重新定位到屏幕的中心。

目前，我将 div 的父容器绑定到一个捕获手势事件的函数。

来源见链接。

任何有关此事的指导将不胜感激。谢谢。

更新：这是一个示例应用程序的链接。您可以找到我当前的所有处理程序和功能。我主要关心的是在缩放后将元素“palmGuard”重置到相对于屏幕的相同位置。如果您有任何问题，请告诉我。

链接：[http ://restingrobot.com/test/testScale.html](http://restingrobot.com/test/testScale.html)

**此示例仅适用于移动 Safari**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T14:53:27.260

好的，我相信这可以满足您的要求。

您需要根据 iOS 屏幕按比例计算 div 的位置，而不是使用缩放因子。您将需要全程跟踪这一点。每当 div 被移动（未缩放）并且在开始时，您需要获取此值：

```
//When div moved and start
var height = window.innerHeight; //Adjust if needed
screenPos = (currentDivTop - window.pageYOffset)/height; 
```

然后当缩放发生时，您需要将gestureEnd上的div顶部设置为屏幕上页面的顶部（即window.pageYOffset）加上屏幕上的当前像素数（window.innerHeight）乘以iOS上的相对位置我们之前计算的屏幕（screenPos）。这为您提供了所需的屏幕上的新位置（与上次不同）。

```
//GestureEnd of zoom
var height = window.innerHeight; //Adjust if needed
var newDivTop = window.pageYOffset + (screenPos*height); 
```

请记住，您需要跟踪此比例值。

此外，我认为您的缩放“条带”逻辑过于简单，也就是说，如果这是为了在缩放反弹回其范围内时进行处理？我认为它没有考虑到不同的 iOS 屏幕尺寸。

除了影响 innerHeight 的“条带”之外，它似乎也影响了 posYOffset 的值，这确实很有意义。这将导致 div 被放置在页面下方。解决此问题的一种潜在方法是检测缩放何时过远（如您所指的带状）并使用轮询函数检测 innerHeight 何时回落到最小值，然后获取 posYOffset。如果在带状轮询之后存在事件，显然不需要。

您*可能*能够从 innerHeight 值带计算正确的屏幕顶部（posYOffset），但我认为它可能取决于缩放时手指在缩放时的位置。

*同样，posYOffset 和innerHeight 的值在gestureEnd 事件之后*似乎确实发生了变化，因此即使没有出现条带，您也需要一些机制来获取pageYOffset 和innerHeight 的确定值。您可以通过将以下内容添加到gestureEnd来测试此效果：

```
//In gestureEnd
alert ('gestureEnd pageY:'+window.pageYOffset+' height:'+height);
setTimeout(function () {
              alert ('later pageY:'+window.pageYOffset+' height:'+window.innerHeight);
                       }, 
           2000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T20:50:01.023

好吧，老实说，我还没有在移动应用程序/网站上工作过。因此，如果它们与用于网站的传统 jquery 不同，我可能对所有语法都不正确。但是您可以尝试以下算法（基本上将 div 从顶部定位在页面的中心）。自从我熟悉它以来，我一直使用传统的 jquery。

```
/* ---- Excute the below lines on $(window).resize(function(){}); or a function that is triggered on zoom [which ever is correct] ---- */

var modalH = parseInt($('[THE DIV/ELEMENT THAT YOU WANT TO CENTER]').css('height'));
var windowH = $(window).height();
var modalPosY = (windowH - modalH) / 2;
$('[THE DIV/ELEMENT THAT YOU WANT TO CENTER]').css('Top', modalPosY); 
```

当然，div/元素的 CSS 属性必须是绝对的[如果尚未设置]。同样可以沿 x 轴居中（将高度替换为宽度）

**或者**

您可以使用百分比值作为 div/元素的位置（我认为效果更好）。以下文章将帮助您 - [http://novemberborn.net/2007/12/javascriptpage-zoom-ff3-128](http://novemberborn.net/2007/12/javascriptpage-zoom-ff3-128)。（查看测试用例）

# wordpress - 在 IIS6 上剥离的 Wordpress 永久链接目录

> ID：10287465
> 
> 赞同：0
> 
> 时间：2012-04-23T20:05:31.077
> 
> 标签：wordpress, iis-6

我完全被这个难住了。我们的永久链接结构正在删除安装 WordPress 的目录。但登录到管理员时它不会这样做。

例如。

[http://domain.com/site/?page_id=10](http://domain.com/site/?page_id=10)

是

[http://domain.com/?page_id=10](http://domain.com/?page_id=10)

我从来没有发生过这种情况，但我通常使用 LAMP 堆栈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T02:57:08.037

请注意，在对 WordPress 进行任何故障排除之前，请始终禁用所有插件。原来是一个https插件。我一定很幸运，得到了一个有缺陷的版本，因为刚刚发布的更新修复了它，它是一个评价很高的插件。

# c# - 绑定源为空

> ID：10287467
> 
> 赞同：1
> 
> 时间：2012-04-23T20:05:41.810
> 
> 标签：c#, winforms

我的数据集（CafeDataSet）在项目中`Cafe.DataAccess`，我的 winform 在另一个项目中`Cafe.FrontEnd`。`Cafe.DataAccess`正在编译为 DLL，并且它的引用被添加到`Cafe.FrontEnd`

我可以使用下面的代码在组合框中显示数据

```
comboBox1.DataSource = userTableAdapter.GetUsers();
comboBox1.DisplayMember = "Name";
comboBox1.ValueMember = "Id"; 
```

GetUsers 是我在 UserTableAdapter 中创建的用于返回所有用户的方法。

但是，当我尝试通过添加项目数据源向导将组合框 1 与*对象数据源* 绑定时，它是空的。`CafeDataSet``Cafe.DataAccess`

为什么？如何解决这个问题？我想像现在一样将数据集保存在单独的项目中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T20:48:31.693

您仍然需要在 Cafe.FrontEnd 中的某处调用 userTableAdapter.GetUsers() 来填充 ComboBox1 绑定到的 CafeDataSet 类型的本地数据集字段。（我不确定我是否理解你做了什么。你使用了 BindingSource 吗？）

# php - 将上传的文件连接到和 sql ID

> ID：10287483
> 
> 赞同：0
> 
> 时间：2012-04-23T20:06:34.770
> 
> 标签：php, mysql, html, sql

我将尝试解释我正在尝试做的事情。

我有一个成员的 SQL 数据库，列是 ID NAME EMAIL 和 IP

我还有一个图片上传器，以便会员可以将图片上传到上传文件夹。

我想在表格中显示成员上传的图像（仅文件名），但我需要它来连接到成员 ID。所以当图片上传时，表格看起来像

身份证 | 日期 | 图像名称

有任何想法吗 ？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T20:10:21.853

您需要在图像 SQL 表中放置一个“userId”列。当有人上传图片时，将其 Id 添加到 INSERT INTO 语句中，并带有图像文件名。然后，当您想要显示来自用户的图片时，只需一个带有 where 子句的简单查询就可以完成这项工作。

# java - 为什么我在 Android 下使用 OrmLite 得到 DatabaseObjectNotClosedException？

> ID：10287485
> 
> 赞同：0
> 
> 时间：2012-04-23T20:06:51.400
> 
> 标签：java, android, sqlite, ormlite

当我开始使用 OrmLite`android.database.sqlite.DatabaseObjectNotClosedException: Application did not close the cursor or database object that was opened here`开始一个新的时，我得到了一个。`Activity`

我`Cursor`自己没有使用任何 s，所以它必须是 ORMLite 使用的低级代码。不确定这里的相关代码是什么，但基本上我在事务管理器中使用 Query/DeleteBuilders 和 2 个 Dao 对象。导致问题的最小示例（删除了异常处理）：

```
return new TransactionManager(connectionSource).callInTransaction(new Callable<List<ConversionData>>() {
    public List<ConversionData> call() throws Exception {
        QueryBuilder<ConversionData, Date> builder = getDataDao().queryBuilder();
        builder.orderBy("date", /* desc */ true);
        return builder.query();
    }
}); 
```

由于 Dao 和 Builders 都没有任何关闭方法，我不确定我应该在哪里实际关闭。

我`Activity`的扩展中有一个 close 方法`OrmLiteBaseActivity`，但是当我从其他活动返回时，我将如何再次打开它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T21:19:46.233

因此，经过一番反复，结果证明这是一个未关闭的惰性集合上的数据迭代器的问题。@Voo 正在做类似以下的事情：

```
for (ConversionRate rate : conversionRates) { 
    if (rate.getCurrency().equals(curr)) 
        // you can't do this because otherwise the iterator won't be closed
        return rate; 
} 
```

这个问题偶尔会发生。[迭代器](http://ormlite.com/docs/iterator)的文档对此很明确。去引用：

> 注意：您必须对迭代器的所有项目进行分页才能关闭基础 SQL 对象。如果你不一直走，垃圾收集器将在一段时间后关闭 SQL 语句，这被认为是错误的形式。请参阅下面的包装迭代。

还记录了[惰性集合](http://ormlite.com/javadoc/ormlite-core/com/j256/ormlite/dao/LazyForeignCollection.html)的问题：

> 警告：这里很可能不应该使用 for(;;) 循环，因为我们需要小心关闭迭代器。

为了调试这个问题，我们首先将延迟加载的集合变成了一个带有`@ForeignCollection(eager = true)`. 这消除了表明它可能是不正确的`for`循环中断或其他一些错误模式的问题。

给别人很好的教训。

# c# - 从 DataGrid Selection_Change 事件中获取多个属性

> ID：10287486
> 
> 赞同：0
> 
> 时间：2012-04-23T20:06:54.383
> 
> 标签：c#, wpf, xaml

这是我的问题

我有一个 DataGrid，这是他的来源

```
var Query = from a in m.Table1
                       join p in m.Table2
                       on a.Value1 equals p.Value1
                       join c in m.Table3 on a.Value2 equals  c.Value2 
           select new {
                        value1 = a.value1
                        value2 = p.value2
                        value3 = c.value3
                        value4 = a.value4

                      }; 
```

```
 <DataGrid AutoGenerateColumns="False" HorizontalAlignment="Left" Margin="84,75,0,0"
 Name="Grid_Exmple" Width="478" Height="219" VerticalAlignment="Top" SelectionChanged="Grid_Exmple_SelectionChanged">
                    <DataGrid.Columns>
                        <DataGridTextColumn Binding="{Binding value1 }" Header="value1 " IsReadOnly="True" x:Name="dgrvalue1 "  />
                        <DataGridTextColumn Binding="{Binding value2 }" Header="value2 " IsReadOnly="True"  x:Name="dgrvalue2 " />
                        <DataGridTextColumn Binding="{Binding value3 }" Header="value3 " IsReadOnly="True"  x:Name="dgrvalue3" />
                        <DataGridTextColumn Binding="{Binding value4}" Header="value4" IsReadOnly="True"  x:Name="dgrvalue4" />
                    </DataGrid.Columns> 
```

当我们按下 DataGrid 选择事件时

```
 private void Grid_Exmple_SelectionChanged(object sender, SelectionChangedEventArgs e)
  {
    Here I try To Get The properties 
```

我可以看到 e.AddedItems 中的属性，但我无法投射它

```
 ((<>f__AnonymousType2<int,int?,decimal?,decimal?,string,string,string,int,string>)(((object[])(e.AddedItems))[0])).Value1

  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T20:10:25.107

至少有两种可能：

1.  创建一个命名类型，用它填充网格，然后转换回这个类型。
2.  投射[`dynamic`](http://msdn.microsoft.com/en-us/library/dd264741.aspx)并做任何你想做的事。

# c# - SQLite ExecuteReader --> DataTable.Load --> FormatException (DateTime)

> ID：10287487
> 
> 赞同：16
> 
> 时间：2012-04-23T20:07:00.247
> 
> 标签：c#, .net, sql, sqlite

我试图读出一个示例 Northwind sqlite 数据库，但在某些带有日期时间的表上出现错误。这是数据库的问题还是我的 System.Data.SQLite 的问题？异常类似于：“字符串不是有效的日期时间”

[http://system.data.sqlite.org/](http://system.data.sqlite.org/)

当然，我可以通过正确转换日期时间自己读出数据，但这不如通过简单的 dt.Load()

```
 SQLiteCommand dbCommand = myConnector.CreateCommand();
        dbCommand.CommandText = "SELECT * FROM " + tablename;

        SQLiteDataReader executeReader = dbCommand.ExecuteReader(CommandBehavior.SingleResult);
        DataTable dt = new DataTable();
        dt.Load(executeReader); // <-- FormatException 
```

> " 北 System.DateTimeParse.ParseExactMultiple(String s, String[] 格式, DateTimeFormatInfo dtfi, DateTimeStyles 样式)\r\n 北 System.DateTime.ParseExact(String s, String[] 格式, IFormatProvider 提供程序, DateTimeStyles 样式)\r\ n bei System.Data.SQLite.SQLiteConvert.ToDateTime(String dateText, SQLiteDateFormats format, DateTimeKind kind) in c:\dev\sqlite\dotnet\System.Data.SQLite\SQLiteConvert.cs:Zeile 322."

我需要一个很好的帮助来改进当前的代码。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-27T16:36:27.513

是的，我遇到了同样的问题，我已经找到了解决方案。

首先你需要知道它为什么会发生。

[http://www.sqlite.org/datatype3.html](http://www.sqlite.org/datatype3.html)

**

> SQLite 没有为存储日期和/或时间预留存储类。相反，SQLite 的内置日期和时间函数能够将日期和时间存储为 TEXT、REAL 或 INTEGER 值：

**

```
TEXT as ISO8601 strings ("YYYY-MM-DD HH:MM:SS.SSS").
REAL as Julian day numbers, the number of days since noon in Greenwich on November 24, 4714 B.C. according to the proleptic Gregorian calendar.
INTEGER as Unix Time, the number of seconds since 1970-01-01 00:00:00 UTC. 
```

> 应用程序可以选择以任何这些格式存储日期和时间，并使用内置的日期和时间函数在格式之间自由转换。

有关更多日期/时间功能，您可以查看此页面： [http ://www.sqlite.org/lang_datefunc.html](http://www.sqlite.org/lang_datefunc.html)

***解决方案：***

只是使用 datetime 函数将您的字段转换为有效的 .NET 数据表格式。您可以使用上述链接中的任何人，就我而言，我选择：

```
SELECT datetime(field) as field FROM table 
```

***提示 1*** 如果您的查询是在一个视图上，并且您不能触摸您的数据库、创建一个不同的视图或类似的东西，那么您会遇到一些麻烦，因为正如我之前解释的那样，问题出在数据库方面。所以第一个解决方案是在加载之前替换数据表的列（有点脏工作）。或者，您可以在文本字段上使用 Unix 标记或任何所需的时间戳。但我认为最好的解决方案是从您的角度在您的应用程序上创建查询：

```
SELECT datetime(field) as field FROM view 
```

***提示 2***

您也可以尝试使用 SQLite 管理员并在检查格式之前使用日期时间函数。

***提示 3***

还要注意你的文化全球化，如果你改变文化，你会发现问题。尝试只用一个来完成你的软工作，并按照你的意愿展示它，而不是按照文化的意愿展示它。例如，在我的国家，我们通常使用这种格式：dd/MM/yy，这很痛苦，就像十进制数字上的点（我们使用逗号）

***提示 4***

如果您在某些报表或实体或类似的东西上使用向导定义的连接，请务必检查您所需的转换格式。例如我使用最常见且没有问题的方式：ISO8601

![SQLite - 添加连接](../Images/5df4a95cb75b1f7bec905be3d610c1be.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T19:57:42.133

你有没有`SQLiteDataAdapter`像这样尝试过..

```
SQLiteDataAdapter da = new SQLiteDataAdapter(dbCommand);
da.Fill(dt); 
```

它的行为可能相同，但尝试并没有什么坏处；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T20:50:15.190

**请参阅存储日期**时间标题下有关 SQLite 和日期时间存储的[此出版物](http://www.mono-project.com/SQLite)。

# macos - 带有 macos sdk 的 S-Video 到 USB 转换器可用吗？

> ID：10287488
> 
> 赞同：2
> 
> 时间：2012-04-23T20:07:09.320
> 
> 标签：macos, video, sdk, usb, video-capture

我正在寻找一个带有 macosx sdk 的 S-Video 到 USB 转换器。

给出我正在寻找[Elgato 视频转换器](http://www.elgato.com/elgato/na/mainmenu/products/Video-Capture/product1.en.html)的提示。但是，由于它没有带 sdk，我无法开发管理视频捕获数据的软件。

有谁知道带有SDK的类似产品？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T20:57:13.110

我会推荐 Sensoray 2253：

[http://www.sensoray.com/products/2253.htm](http://www.sensoray.com/products/2253.htm)

他们有适用于 Linux 和 Windows 的 SDK。（抱歉，Mac OS 没有。）我听说他们的客户支持很好。（是的，他们的产品很贵，但考虑到支持的质量，据我所知，还不错。）

Sensoray 板的另一种替代方案：“成像源”。他们为他们的转换器提供了一个 SDK，它也允许未压缩的视频。

[http://www.theimagingsource.com/en_US/topics/usb-video-adapters/](http://www.theimagingsource.com/en_US/topics/usb-video-adapters/)

（更新）该产品不再生产。

最后，VisioForge 为通用电视调谐器提供和 SDK，价格相当便宜。

（我已经达到了我的 URL 限制。谷歌它！）

但是，我对这个产品没有任何经验。单座价格约为180美元。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T19:25:47.520

就像对社区的贡献一样，我将在这里发布我们发现的最佳解决方案。我们已经获得了带有 STK1160 芯片组的 EasyCap 设备，并且我们正在扩展[EasyCapViewer](http://bentrask.com/easycap/)驱动程序以达到我们的目的。对我们来说，这听起来像是一个便宜且有效的解决方案。该视频适用于我们测试过的每个 macOS 系统：从雪豹到山狮！

# android - Android：画廊以编程方式在画廊项目之间移动

> ID：10287497
> 
> 赞同：1
> 
> 时间：2012-04-23T20:07:55.737
> 
> 标签：android, onclick, gallery, android-gallery

我正在尝试以编程方式移动画廊，并且开箱即用它非常糟糕，当使用 setselection 时，它会立即移动到选择中，我想获得一张漂亮的幻灯片（就像您使用自己的手指一样）。画廊附带的 anumate 属性似乎什么也没做？

有谁知道为什么 Animate 似乎不适用于 Gallery setSelection？我用

```
gallery1.setSelection(currentExercise, true);
gallery1.setAnimationDuration(500); 
```

但画廊继续立即改变。

我已经看到了一个建议这种用途的解决方案（这是伪造手指滑动）

```
gallery1.onKeyDown(KeyEvent.KEYCODE_DPAD_RIGHT, null); 
```

这会产生更好的结果，但会发出令人讨厌的咔嗒声，就好像我在按下一个键一样，所以它不太适合我的目的？

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T12:47:21.447

您可以使用`gallery1.onFling(null, null, 2000,0);`

您需要尝试使用 2000 值，因为它取决于图像的大小。它还可能取决于设备的大小，如果平板电脑上的图库/图像变得比手机大。

这不是一个完美的解决方案，但它应该可以工作。

# jquery - 按需填充时单击后选择下拉列表消失

> ID：10287501
> 
> 赞同：1
> 
> 时间：2012-04-23T20:08:12.283
> 
> 标签：jquery, ajax, jquery-ui, select

我正在按需填充我的选择列表/删除，由于某种原因，该列表在 MouseUp 上消失了。

填充列表的代码：

```
<select id="UserList" name="UserList" onclick="getCountries()">.....</select> 
.
.
.
        function getCountries() {
        $.post("/Users/GetUsersJson/", { id: userId },
        function (result) {

            $.each(result, function (item) {
                $("#UserList").append(
                $("<option></option>").text(result[item].UserName).val(result[item].Id)
                );
            });

        }, "json");
    } 
```

当我单击列表时，它会很好地填充，但是当我释放鼠标按钮时它会关闭，而不会让我选择列表中的任何内容。我无法弄清楚发生了什么。

有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T20:19:17.013

我看不到任何会导致您的下拉列表消失的东西，所以我建议放入一些警告框，以便您可以准确地确定哪一行触发了问题。也就是说，您应该知道使用 jquery each 方法可以做到这一点。

```
function getCountries() {
    $.post("/Users/GetUsersJson/", { id: userId },
    function (result) {

        $.each(result, function (index, item) {
            $("#UserList").append(
            $("<option></option>").text(item.UserName).val(item.Id)
            );
        });

    }, "json");
} 
```

使您的代码更易于阅读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T16:58:14.533

HTML：

```
<select id="UserList" name="UserList"></select> 
```

jQuery：

```
$(document).ready(function(e){

    $('#UserList').click(function(e){
        if($(this).children().length == 0){
            $.post("/Users/GetUsersJson/", { id: userId },
            function (result) {

                $.each(result, function (item) {
                    $("#UserList").append("<option val='"+result[item].Id+"'>"+result[item].UserName+"</option>");
                });

            }, "json");
        }
    });
}); 
```

试试上面的：

弹出窗口消失的原因是，当您单击下拉菜单时，它将对 JSON 数据发出另一个 GET 请求并重新填充您的 SELECT。我添加了`children()`长度检查，以确保里面没有`<option>`标签。

# java - 字符串和文本文件 java

> ID：10287503
> 
> 赞同：1
> 
> 时间：2012-04-23T20:08:19.077
> 
> 标签：java

我正在为期末考试而学习，我正在尝试做以下事情：

打开文件 nFile，并在文件名 File 中打印对应于行号 start 到行号 finish 的字符串。

当行号开始或结束不存在时必须处理错误消息，如果发生IOException，应打印字符串“找不到行”，该方法应打印“IO错误”。

我正在使用具有以下内容的文本文件：

```
11 
1c20 
203 
G2 
```

如果输入 2,4，则为“1c20 203 G2”。将被打印

我进行了很多研究，当输入行号时，我一直坚持打印字符串。

```
import java.io.*;

public class files { 
public void dR(String nFile, int start, int finish)     
{
        try{                
               FileInputStream fstream = new FileInputStream("C://rest//dat.txt");

               // Get the object of DataInputStream
               DataInputStream in = new DataInputStream(fstream);
               BufferedReader br = new BufferedReader(new InputStreamReader(in));

               nameFile=null;
               start=0;
               finish=0;
                // if start  is greater or = to 1 and finish less than 4
                while((nFile=br.readLine())!=null && start>= 1 && finish <= 4)
                {
                     for(int i=0; i<=start; i++)
                     {
                         System.out.println(nFile);
                         br.close();
                     }
                     System.out.println("that doesnt exsist"); 
                  }            
      } 
            catch(IOException e)
            {
                 System.out.println("there is an IO error");                
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T20:25:03.070

您正在丢弃从参数中获得的所有输入

```
int linenb=1;//this will hold the current line number
while((nFile=br.readLine())!=null){
    if(linenb>=start&&linenb<=finish)  
        System.out.println(nfile); 
    linenb++;
}
if(linenb<=finish)
    System.out.println("Line not found"); 
```

还添加一个 finally 块来完成关闭

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T20:24:35.347

像这样的东西？

```
for (int i=1 ; (nFile=br.readLine())!=null; i++) 
{
 if (start>= i && finish <= i)
 {
  System.out.println(nFile);
 }
}
br.close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T20:24:02.767

好吧，首先，您没有使用`nFile`参数（提示：它是文件名。猜猜它应该在代码中的位置......），并且在这两行中：

```
start=0;
finish=0; 
```

你只是丢失了给你的参数。

相反，我会创建一个新变量

```
int index = 0; 
```

每增加一行，如果它在开始和结束之间，则打印出该行。

您仍然需要“阅读”之前的行`start`才能计算出您所在的行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T20:39:23.973

```
import java.io.*;
import java.util.ArrayList;
import java.util.Scanner;

public class printStrings
{
    public static void main (String[] args)
    {
        Scanner in = new Scanner (System.in);

        int start = in.nextInt ();
        int stop = in.nextInt ();

        ArrayList<String> strings = new ArrayList<String> ();
        String line = null;
        BufferedReader buff = null;
        try
        {
            buff = new BufferedReader (new InputStreamReader (new FileInputStream ("data.txt")));
            while ((line = buff.readLine ()) != null)
            {
                strings.add (line);
            }
        }
        catch (Exception e)
        {
            System.err.println ("IO Error");
            System.exit (-1);
        }
        finally
        {
            try
            {
                buff.close ();
            }
            catch (IOException e2) {}
        }

        if (start < 1 || start > strings.size () || stop < 1 || stop > strings.size () || start > stop)
        {
            System.err.println ("Line not found");
            System.exit (-2);
        }

        for (int i = start - 1; i < stop; i++)
        {
            System.out.println (strings.get (i));
        }
    }
} 
```

# blackberry - 保持 Listener.htm 运行

> ID：10287507
> 
> 赞同：1
> 
> 时间：2012-04-23T20:08:33.940
> 
> 标签：blackberry, blackberry-webworks

```
<content src="index.htm" >
    <rim:background src="listener.htm" runOnStartup="true" />
</content> 
```

我有一个后台监听器和一个名为 index.htm 的前台进程。当我安装应用程序并加载手机时，按住菜单按钮可以看到我的听众在后台。但是，一旦我加载应用程序本身并关闭它，监听器就不再在后台了。保持监听器始终运行的适当方法是什么？

我是否必须以某种方式在 index.htm 文件中使用 static void requestBackground() - 这就是激活侦听器的方式吗？我还要求即使 index.htm 在前台也运行侦听器，这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T16:35:52.087

我一直有一个类似的问题。这里有两个明显的问题：

*   当应用程序成为前台时，后台页面关闭并被前台页面替换。
*   当用户关闭应用程序时，应用程序退出并关闭前台页面。

我对第一个问题的解决方案是让前台页面和后台页面是同一个页面，即 index.html，并且基本上我的应用程序都在这个页面中。为了在您退出时阻止应用程序终止，我必须捕获[blackberry.app.event.onExit](https://developer.blackberry.com/html5/apis/blackberry.app.event.html#.onExit "blackberry.app.event.onExit")事件并改为触发[blackberry.app.requestBackground()](https://developer.blackberry.com/html5/apis/blackberry.app.html#.requestBackground "blackberry.app.requestBackground()")。

# haskell - 用数字输入歧义

> ID：10287510
> 
> 赞同：5
> 
> 时间：2012-04-23T20:08:45.477
> 
> 标签：haskell, types

在玩 Haskell 交互式提示 (ghci) 时，我遇到了一些我觉得很好奇的东西。以下代码在 ghci 7.0.4 下运行

```
[minBound..1] 
```

抛出以下异常：

```
<interactive>:1:12:
    Ambiguous type variable `t0' in the constraints:
      (Num t0) arising from the literal `1' at <interactive>:1:12
      (Enum t0) arising from the arithmetic sequence `minBound .. 1'
                at <interactive>:1:1-13
      (Bounded t0) arising from a use of `minBound'
                   at <interactive>:1:2-9
    Probable fix: add a type signature that fixes these type variable(s)
    In the expression: 1
    In the expression: [minBound .. 1]
    In an equation for `it': it = [minBound .. 1] 
```

我知道将上面的内容写为 [minBound..1 :: Int] 会清楚地表明这里的 '1' 是一个**Int**，但我的问题是，歧义在哪里？'1' 可以解释为**Int**、**Integer**、**Float**或**Double**，但除了**Int**之外，这些都不属于***Bounded***类。那么文字 1 是否可以伪装成另一个类？如果不是，那又如何？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-23T20:23:32.240

根据[默认规则](http://www.haskell.org/onlinereport/haskell2010/haskellch4.html#x10-790004.3.4)，一个受约束的类型变量会尝试通过默认来解决，如果

*   所有约束都有形式`C a`；`a`在约束中不作为类型构造函数的参数出现，并且
*   所涉及的类中至少有一个是数字类，并且
*   所有类都在 Prelude 或标准库中定义。

表达式的推断类型`[minBound .. 1]`是

```
[minBound .. 1] :: (Num a, Enum a, Bounded a) => [a] 
```

所以默认规则适用。*但是对于默认，仅考虑模块默认声明*中列出的类型- 在没有默认声明的情况下，假定*默认默认*为`(Integer, Double)`，即解析受约束的模糊类型变量，首先`Integer`尝试，如果没有t 满足所有约束，`Double`被尝试。如果这也不满足所有约束，则默认失败并且编译失败并出现`ambiguous type variable`错误¹。

在目前的情况下，既不满足`Integer`也不`Double`满足`Bounded`约束，因此默认失败。

¹ 在 ghci 中，或`ExtendedDefaultRules`启用扩展时，如果约束中没有数字类但默认值被扩展，也会尝试`Show`默认设置，并且默认默认值扩展为`()`.

# javascript - 使用 JQuery 重新设置字段值

> ID：10287512
> 
> 赞同：2
> 
> 时间：2012-04-23T20:08:48.693
> 
> 标签：javascript, jquery

我有以下代码：

```
$('#name1').focus(function() {
    if ($(this).val() == 'start value') {
        console.log($(this).val()); // this prints "start value"
        $(this).val() == ''
    } 
```

我想要做的是当用户专注于文本输入`#name1`时，该字段的值将消失。但是，上面什么也没做，文本值保持不变。为什么会发生这种情况，我需要改变什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T20:09:59.930

```
$('#name1').focus(function() {
    if ($(this).val() == 'start value') {
        console.log($(this).val()); // this prints "start value"
        $(this).val("");
    } 
```

您必须像这样在括号中写赋值`$(this).val("");`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T20:10:53.843

`this.val()`是一个应该像`$(this).val('new value')`设置值一样被调用的函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T20:10:06.970

要分配一个值，请像这样使用[val ：](http://api.jquery.com/val/)

```
$(this).val(''); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T20:11:42.707

而不是 `$(this).val() == ''` 尝试 `$(this).val('');`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T20:49:00.090

为什么不将 html5 占位符属性与modernizr 之类的东西一起使用来支持旧版浏览器，这样您就不必编写大量这些功能，而只需执行 placeholder="your text" 并达到相同的效果。

# java - Java 调试 servlet

> ID：10287513
> 
> 赞同：0
> 
> 时间：2012-04-23T20:08:49.017
> 
> 标签：java, servlets

我正在尝试调试 Java Web 应用程序。问题是由于 doGet/doPOST 方法之前的问题。我从哪里开始在 doGet 之前在哪里查看容器内部进行调试或如何处理请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T20:16:40.603

这是 Servlet 提升循环。

```
Intit
Service(doGet/doPost)
Destroy 
```

当 servlet 初始化 init 方法调用时，您可以从 servlet 的 init 方法开始调试并转向 Service(doGet/doPost) 方法。请参阅[Servlet 生命周期](http://java.sun.com/j2ee/tutorial/1_3-fcs/doc/Servlets4.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T20:26:18.843

好吧，答案很大程度上取决于您在代码的 doGet/doPost 部分之前加载的内容。您是否在 contextListeners 中设置代码，如果是这样，您从那里开始，等等...

为了更好地调试，您应该启用日志记录到 servlet 容器（即码头、tomcat、glassfish 等）中的文件，以查看是否有任何错误消息可能导致您的问题...

# android - android布局权重%

> ID：10287522
> 
> 赞同：2
> 
> 时间：2012-04-23T20:09:29.407
> 
> 标签：android, android-layout, android-layout-weight

我正在尝试使用 Android 布局权重属性。我想要一个带有“3 个子布局”的垂直布局第一个将占用 25% 的空间，第二个占用 50% 的空间，最后一个占用 25% 的空间。当我尝试添加到最后一个布局时，一切都不起作用。这些布局中的每一个的权重应该是多少？

我让权重属性仅使用 2 个布局/元素即可正常工作，并了解它是如何工作的，但是当我尝试使用 3 个时，我遇到了问题。

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="100dp"
    android:orientation="horizontal"
    android:weightSum="100" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="100dp"
        android:orientation="vertical"
        android:layout_weight="25" >
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="100dp"
        android:orientation="vertical"
       android:layout_weight="50" >
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="100dp"
        android:orientation="vertical"
        android:layout_weight="25" >
    </LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T20:12:22.097

确保将`android:width`所有子布局的属性设置为 0dp，然后确保您已`weight`指定。如果您需要更详细的说明，则需要粘贴您的代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-05-22T05:20:19.833

尝试使用此代码。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:orientation="horizontal"
   android:layout_width="match_parent"
   android:layout_height="match_parent"
   android:weightSum="100">
  <LinearLayout
     android:layout_width="0dp"
     android:layout_height="100dp"
     android:orientation="vertical"
     android:layout_weight="25">
  </LinearLayout>
  <LinearLayout
     android:layout_width="0dp"
     android:layout_height="100dp"
     android:orientation="vertical"
     android:layout_weight="50" >
  </LinearLayout>
  <LinearLayout
     android:layout_width="0dp"
     android:layout_height="100dp"
     android:orientation="vertical"
     android:layout_weight="25">
  </LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-15T10:29:58.960

还有另一种使用不太复杂的布局树来实现此结果的方法。您可以`PercentRelativeLayout`从Android的[百分比支持库中使用。](https://developer.android.com/topic/libraries/support-library/features.html#percent)只需将此库导入您的项目，然后查看以下代码：

```
<android.support.percent.PercentRelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <LinearLayout
        android:layout_height="100dp"
        android:layout_toLeftOf="@+id/middle"
        android:layout_weight="25"
        android:orientation="vertical"
        app:layout_widthPercent="25%">
    </LinearLayout>

    <LinearLayout
        android:id="@+id/middle"
        android:layout_height="100dp"
        android:layout_centerHorizontal="true"
        android:layout_weight="50"
        android:orientation="vertical"
        app:layout_widthPercent="50%">
    </LinearLayout>

    <LinearLayout
        android:layout_height="100dp"
        android:layout_toRightOf="@+id/middle"
        android:layout_weight="25"
        android:orientation="vertical"
        app:layout_widthPercent="25%">
    </LinearLayout>

</android.support.percent.PercentRelativeLayout> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T20:14:30.643

好吧，首先，权重只能应用于`LinearLayouts`或派生自`LinearLayout`. `weightSum`孩子的权重应该是属性的百分比`LinearLayout`。如果你设置`weightSum=1`你的 parent `LinearLayout`，那么你的第一个孩子的百分比应该是 0.25，第二个孩子应该是 0.5，第三个孩子应该是 0.25。

编辑：就像javram 说的。您需要分别设置宽度或高度，`0dp`具体取决于`LinearLayout`是水平方向还是垂直方向。

编辑2：另外，我认为您不必实际指定`weightSum`. 它有帮助，但我相信`LinearLayout`只会根据孩子们各自的体重来划分孩子。如果孩子 1 的体重是孩子 2 体重的两倍，那么孩子 2 在屏幕上将是孩子 1 的两倍。因此，在您的情况下，只需确保孩子 1 和 3 的重量相同，而孩子 2 的重量是其他两个孩子的两倍。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-06-12T08:16:10.497

```
LinearLayout java1,java2,java3;

    java1=(LinearLayout)findViewById(R.id.java1);
    java2=(LinearLayout)findViewById(R.id.java2);
    java3=(LinearLayout)findViewById(R.id.java3);
    DisplayMetrics ds=new DisplayMetrics();
    this.getWindowManager().getDefaultDisplay().getMetrics(ds);
    int height=ds.heightPixels;
    Log.d(TAG,""+height);

    java1.getLayoutParams().height=height/4;
    java2.getLayoutParams().height=height/2;
    java3.getLayoutParams().height=height/4; 
```

# asp.net - 将数据分配给 RadGrid

> ID：10287525
> 
> 赞同：0
> 
> 时间：2012-04-23T20:09:43.047
> 
> 标签：asp.net, telerik

我想要一个包含两列的网格，一列带有标题，第二列带有两个超链接（如果更简单，您可以创建 2 个不同的列，每个链接一个列）。

我有一个标题数组和一个 ID 数组。我希望链接类似于“edit.aspx?id=INSERT_ID_FROM_DATA_HERE”。

到目前为止我所拥有的：

```
<telerik:RadGrid ID="RadGrid1" runat="server" Skin="Telerik" AutoGenerateColumns="True">
                                            <MasterTableView>
                                                <Columns>
                                                    <telerik:GridBoundColumn HeaderText="Title" UniqueName="Title" DataFormatString="'{0}'">
                                                    </telerik:GridBoundColumn>
                                                    <telerik:GridHyperLinkColumn HeaderText="Actions" UniqueName="Actions" 
                                                        DataNavigateUrlFormatString="default.aspx?id='{0}" DataTextField="Edit">
                                                    </telerik:GridHyperLinkColumn>
                                                </Columns>
                                            </MasterTableView>
                                        </telerik:RadGrid> 
```

和：

```
DataTable dt = new DataTable();
            DataColumn dcTitle = new DataColumn("Title");
            DataColumn dcId = new DataColumn("Actions");
            dt.Columns.Add(dcTitle);
            dt.Columns.Add(dcId);

            String[] widgetNames = new String[list.Count];
            String[] widgetIds = new String[list.Count];

            for (int i = 0; i < list.Count; i++)
            {
                widgetNames[i] = list[i].SelectSingleNode("title").InnerText;
                widgetIds[i] = list[i].SelectSingleNode("instanceid").InnerText;

                String[] row = new String[2];
                row[0] = widgetNames[i];
                row[1] = widgetIds[i];

                dt.LoadDataRow(row, true);
            }

            RadGrid1.DataSource = dt; 
```

它创建了 2 个新列，并在那里打印标题和 ID，没有链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T22:18:35.623

由于您要指定列，因此请务必设置 AutoGenerateColumns="False"。将 DataField 和 DataNavigateUrlFields 属性设置为数据源的列名。

数据格式字符串中的占位符值引用网格列的指定数据字段。一个GridBoundColumn只能有一个DataField，而GridHyperLinkColumn可以有多个数据字段，用逗号分隔；{0} 指第一个字段，{1} 指第二个字段，依此类推...

要回答有关多个超链接的问题，为每个超链接使用单独的 GridHyperLinkColumn 会更容易。否则，您将不得不使用 TemplateColumn 来编写您自己的完全自定义渲染。

```
<telerik:RadGrid ID="RadGrid1" runat="server" Skin="Telerik" AutoGenerateColumns="False">
    <MasterTableView>
        <Columns>
            <telerik:GridBoundColumn HeaderText="Title" DataField="Title" DataFormatString="'{0}'" />
            <telerik:GridHyperLinkColumn HeaderText="Actions" UniqueName="Actions" DataNavigateUrlFields="Actions" DataNavigateUrlFormatString="default.aspx?id='{0}'" DataTextField="Edit" />
        </Columns>
    </MasterTableView>
</telerik:RadGrid> 
```

# javascript - 在卸载/离开页面之前检查给定表单中的更改

> ID：10287529
> 
> 赞同：0
> 
> 时间：2012-04-23T20:10:02.320
> 
> 标签：javascript, jquery, forms, events, onbeforeunload

我有大约 100 个输入字段的表单（文本框、文本区域、单选框、复选框、文件等）。
当用户离开页面时，我需要知道某些字段是否已被修改以运行自动保存例程。

1.-`form_has_been_modified`在任何字段更改时设置：

```
var form_has_been_modified = 0;
$("form[id^='my_form']").each(function(){
    $(":input", this).live("change", function() {
        form_has_been_modified = 1;
    });
}); 
```

2.- 如果某些字段被更改，警告用户：

```
window.onbeforeunload = function (e) {
    if ( ! form_has_been_modified){
        return;
    }

    var message = "This page is asking you to confirm that you want to leave - data you have entered may not be saved.";

    var e = e || window.event;

    // For IE and Firefox prior to version 4
    if (e) {
        e.returnValue = message;
    }

    // For Safari
    return message;
}; 
```

**问题**：

a.- 这段代码（第 1 部分）会使浏览器的用户变得太慢吗？

b.- 之前的代码运行良好。但在`textbox/textarea`输入类型中，`change`事件仅在元素失去焦点时发生。因此，例如，此代码不能防止`reload page`操作。是否存在另一个更好的处理程序`change`来解决这个缺陷？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-11T10:06:13.057

这个怎么样

```
$('#form').data('serialize',$('#form').serialize());
  // On load save form current state

$(window).bind('beforeunload', function(e){
    if($('#form').serialize()!=$('#form').data('serialize'))return true;
    else e=null;
    // i.e; if form state change show box not.
}); 
```

您可以使用 Google JQuery Form Serialize 函数，这将收集所有表单输入并将其保存在数组中。我想这个解释就足够了:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T20:19:13.053

我会使用`keyup`，这可能足够接近，尽管您可能会得到一些误报。

此外，您可以用一个调用`.on()`替换您的循环（无论如何在 1.7+ 中已被弃用）：`.each()``.live()`

```
$("form[id^='my_form']").on("change keyup", ":input", function() {
     form_has_been_modified = 1;
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T20:24:53.163

对于第一部分，您可能希望在`return false;`找到更改的表单字段后添加以中断循环......因此您不必费心检查所有其余字段。当然，这是假设您只需要知道是否*有任何*字段已更改，而不是*所有*已更改的列表。鉴于此，如果字段 #2 发生更改，为什么要花时间检查所有剩余的 98 个字段。

# entity-framework - 如何在没有鉴别器列的情况下将两个类映射到同一个表？

> ID：10287532
> 
> 赞同：2
> 
> 时间：2012-04-23T20:10:08.137
> 
> 标签：entity-framework, ef-code-first

我有两个类，*Client*和*Author*，它们都派生自*Member*。*它们没有向Member*添加任何内容，但我更喜欢为语义和可能的后续扩展提供单独的类。我根据角色进行区分，其中*作者*是具有*AuthorRole**成员*资格的成员，而*客户*是具有*ClientRole**成员*资格的成员。使用带有鉴别器列的普通 TPH 映射会排除*Member*既是*Client*又是*Author*。

 ***我能看到解决这个问题的唯一方法是让*ClientRepository*和*AuthorRepository*进行映射，我的数据库上下文幸福地不知道任何继承，但在这里我受到了性能影响，因为例如 ClientRepository 将不得不查询成员实例和将这些映射到客户端实例。

还有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T21:10:52.487

EF 中的 TPH 映射表示客户是成员，作者是成员，但永远不会有一个成员既是客户又是作者。甚至不可能有成员将角色从客户更改为作者，反之亦然。

如果要将两个派生类存储在同一个表中，则必须使用 TPH 和鉴别器。EF 将确保前面的规则得到保证。如果这些规则中的任何一个在您的方案中无效，那么无论如何继承对您来说都是一个糟糕的设计，因为即使 .NET 也不允许您将实例的类型从客户端更改为成员。

如果要保留当前设计，则必须使用客户端存储库和附加级别的映射到自定义类，因为 EF 无法通过关系驱动 TPH 继承。在 EF 中，这样的继承不能存在，因为您可以更改关系但不能更改已创建实例的类型。***

# android - Galaxy Nexus 上出现奇怪的内存泄漏。是否存在已知问题？

> ID：10287534
> 
> 赞同：3
> 
> 时间：2012-04-23T20:10:14.110
> 
> 标签：android, memory-management, memory-leaks, galaxy

我在 Galaxy Nexus 上使用我的应用程序的用户遇到了问题。这是一款图形密集型游戏，基本上发生的情况是，当他从一个活动切换到另一个活动时，内存逐渐耗尽。

这是一个 Galaxy Nexus（据我所知）库存 Android 4.0.2。LogCat 的摘录：

```
D/.GameViewActivity( 3203): debug. =================================
D/.GameViewActivity( 3203): debug.heap native: allocated 6.01MB of 8.95MB (0.04MB free) in [.GameViewActivity]
D/.GameViewActivity( 3203): debug.memory: allocated: 54.00MB of 64.00MB (14.00MB free)
D/dalvikvm( 3203): GC_EXPLICIT freed 366K, 28% free 40426K/55623K, paused 4ms+4ms
D/dalvikvm( 3203): GC_EXPLICIT freed 1K, 28% free 40425K/55623K, paused 1ms+4ms 
```

片刻之后（几分钟），它将如下所示：

```
D/.MainActivity( 3203): debug. =================================
D/.MainActivity( 3203): debug.heap native: allocated 6.92MB of 11.36MB (0.18MB free) in [.MainActivity]
D/.MainActivity( 3203): debug.memory: allocated: 58.00MB of 64.00MB (1.00MB free)
D/dalvikvm( 3203): GC_EXPLICIT freed 297K, 4% free 58119K/60359K, paused 1ms+5ms
D/dalvikvm( 3203): GC_EXPLICIT freed 3K, 4% free 58116K/60359K, paused 1ms+5ms
I/WindowManager(17943): createSurface Window{41fadf88 .MainActivity paused=false}: DRAW NOW PENDING
D/OpenGLRenderer( 3203): Flushing caches (mode 0)
I/ActivityManager(17943): Displayed .MainActivity: +556ms (total +743ms)
D/dalvikvm(17943): GC_FOR_ALLOC freed 823K, 14% free 24118K/27911K, paused 86ms
D/.GameViewActivity( 3203): debug. =================================
D/.GameViewActivity( 3203): debug.heap native: allocated 6.95MB of 11.36MB (0.15MB free) in [.GameViewActivity]
D/.GameViewActivity( 3203): debug.memory: allocated: 58.00MB of 64.00MB (1.00MB free)
D/dalvikvm( 3203): GC_EXPLICIT freed 11K, 4% free 58488K/60359K, paused 2ms+5ms
D/dalvikvm( 3203): GC_EXPLICIT freed <1K, 4% free 58487K/60359K, paused 2ms+4ms 
```

随后发生崩溃和内存不足。

现在，我已经习惯了 Android 无望的内存管理系统，这导致我的游戏不可避免地崩溃（这是迄今为止 Android 仪表板中报告最多的错误，我在应用程序中删除内存的严格程度并不重要- 图形 + Android 内存管理 = 强制关闭）。我只使用 Android 组件 + SurfaceView，尽管使用自定义图形进行了重度皮肤/样式。

然而，引起我注意的是电话。

现在 - 首先 - 它是 Galaxy Nexus，几乎是目前最先进的手机，为其应用程序提供最多的可用内存。很奇怪，这款手机，在所有这些手机中，应该有这种问题。

其次，我有完全相同的手机——也运行 4.0.2——我用它作为我的主要测试手机。我的用户可以在几分钟内让游戏崩溃；当我玩这个游戏时，它可以运行几个小时并且始终有 20-25Mb 的可用内存。

第三，这个应用程序每天在数以万计的手机上运行，​​所以我 100% 确定该应用程序没有**任何**问题会导致我的用户看到的这种灾难性的内存泄漏。

简而言之 - 我完全被难住了。

有什么想法吗？这里有人见过这样的东西吗？Galaxy Nexus 是否存在我没​​有听说过的已知问题？我可能会问这个用户的任何策略/问题/测试可能有助于确定这里的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T09:00:14.480

如果用户有一些经验，也许他可以向您转储内存配置文件，以便您查看分配情况。

有关一些说明，请参阅[http://android-developers.blogspot.de/2011/03/memory-analysis-for-android.html](http://android-developers.blogspot.de/2011/03/memory-analysis-for-android.html)。

您还可以尝试使用[Debug#dumpHprofData()](http://developer.android.com/reference/android/os/Debug.html#dumpHprofData%28java.lang.String%29)从您的应用程序中转储内存配置文件，并要求用户向您发送该文件。

# button - 按钮未注册点击

> ID：10287537
> 
> 赞同：2
> 
> 时间：2012-04-23T20:10:19.047
> 
> 标签：button, css, onclick, mouseevent

所以我尝试使用这些 CSS3 按钮取自： http: [//lab.simurai.com/buttons/](http://lab.simurai.com/buttons/)

这是我创建的按钮：http: [//utvecklingspunkten.se/glist/admin/addGuests/button.php](http://utvecklingspunkten.se/glist/admin/addGuests/button.php)

正如标题所述，按钮功能在单击时并不总是触发。有一些点/像素似乎没有记录点击（这很奇怪，因为当点击这些甜蜜点时按钮仍然会改变其外观 - 但它没有触发其 onClick 功能）。

所以这是我用来生成按钮的代码：

```
<div style="margin-left:500px; margin-top:100px;">
    <a href='#' class='button gray glossy' data-icon='✎' onClick='clickHandler()' />
Try clicking this button</a>
</div> 
```

还有简单的 JavaScript：

```
var timesClicked = 0;

function clickHandler() {
    console.log("I've been clicked " + timesClicked + "times.");
    ++timesClicked;
} 
```

似乎没有注册的点（而不是发现点的高度）位于按钮中文本基线下方几个像素处。尝试在控制台向上的情况下单击文本下方几次（单击在控制台中注册）并注意何时找到该位置。最佳位置并不难找到，并且使按钮变得毫无用处，因为在按钮的某个高度单击它不会注册。

有谁知道为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:23:04.887

当您将指针拖动到单击鼠标的位置时，我看到了问题，因此您可以通过逐个更改`onclick`事件来避免这种情况`onmousedown`。

# java - 使用 Java 套接字的肥皂通信有效，但切换到 Java 肥皂连接不起作用

> ID：10287538
> 
> 赞同：0
> 
> 时间：2012-04-23T20:10:21.400
> 
> 标签：java, sockets, soap

我最近问了一个关于使用 java 提供的 soap 库构建 SOAP 消息的问题[更改默认soap URI](https://stackoverflow.com/questions/10286209/cannot-change-soap-uri-in-envelope-using-java-soapmessage "更改默认肥皂 URI")，所以这个问题可能最终会渗入这个问题，具体取决于最后一个问题的答案可能是什么（事实上，回答这个问题可能意味着我不必担心我的其他问题）

我已经通过 java 套接字库连接到我正在与之通信的设备并来回传递消息，但是今天我决定使用 java 以 SOAP 的方式提供给我的所有东西，为什么不直接使用它提供的SOAP 库？

嗯，现在很头疼，但我相信一旦它启动并运行它会是有益的。无论哪种方式，当我之前与设备通信时，我只是在 IP 地址`xxx.xxx.xxx.xxx`上打开了套接字`port 80`，但是当我使用该`SOAPConnection.call`方法时，我收到以下错误：

```
Apr 23, 2012 3:47:06 PM com.sun.xml.internal.messaging.saaj.client.p2p.HttpSOAPConnection post
SEVERE: SAAJ0008: Bad Response; null
com.sun.xml.internal.messaging.saaj.SOAPExceptionImpl: com.sun.xml.internal.messaging.saaj.SOAPExceptionImpl: Bad response: (-1null
    at com.sun.xml.internal.messaging.saaj.client.p2p.HttpSOAPConnection.call(Unknown Source)
    at DeviceCommunicator.openConnection(DeviceCommunicator.java:184)
    at ClientRunner.main(ClientRunner.java:29)
Caused by: com.sun.xml.internal.messaging.saaj.SOAPExceptionImpl: Bad response: (-1null
    at com.sun.xml.internal.messaging.saaj.client.p2p.HttpSOAPConnection.post(Unknown Source)
    ... 3 more 
```

这是电话，如果有帮助的话：

```
SOAPConnection sc = SOAPConnectionFactory.newInstance().createConnection();
        SOAPMessage response = sc.call(sm, "http://xxx.xxx.xxx.xxx"); 
```

显然`xxx.xxx.xxx.xxx`是设备的IP地址（我已经尝试调用`SOAPConnection.call`第二个参数也`http://xxx.xxx.xxx.xxx:80`没有成功的方法）。

在仔细阅读了 stackoverflow 和一般的谷歌搜索之后，我还没有找到从套接字通信切换到肥皂时遇到问题的人。

编辑：

不幸的是，我还没有解决问题，但是我确实使用 Wireshark 发现消息正在正确发送**，响应也是如此**。我很困惑为什么响应会看到“null” - 任何接受者？

提前致谢，

-M

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T21:02:57.523

```
SAAJ0008: Bad Response; null 
```

此错误消息表明服务器以错误消息（例如 HTTP`4XX`或`5XX`）响应。在这种情况下，null 是指 java 类无法将错误代码转换为关联的消息。例如，状态码 400、501 和 543 将产生以下错误消息：

```
SAAJ0008: Bad Response; Bad Request
SAAJ0008: Bad Response; Not Implemented
SAAJ0008: Bad Response; null 
```

很可能您的服务器对请求的格式非常挑剔，并且您发送的特定请求无法正确处理。我建议您尝试验证使用 java 套接字库和 SOAPConnection 发送的请求之间的差异，看看是否有差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-09T07:36:17.257

这是一个老问题，但我在连接 Zimbra SOAP UI 时遇到了同样的问题。问题是肥皂地址问题[Java 上的 SOAP 请求不起作用，但在 PHP 上有效](https://stackoverflow.com/questions/61435573/soap-request-on-java-not-working-but-does-on-php)。该链接有正确的解决方案

# php - Zend 和安全

> ID：10287541
> 
> 赞同：1
> 
> 时间：2012-04-23T20:10:24.287
> 
> 标签：php, html, security, zend-framework

在数据库中插入某些内容时，zend 是否会转义通过如下示例给出的输入：

```
$options = array(
    'bla'=>input
);
$this->insert($options); 
```

-- 我仍在检查内容的长度和有效性，部分使用 Zend_Form

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T20:17:54.667

Zend 不会转义输入，它会使用准备好的语句（这更好）。

这就是为什么你不能直接使用 DB 表达式，你必须`Zend_Db_Expr`像这样使用：

```
$data = array(
    'created'      => new Zend_Db_Expr('CURDATE()'),
    ...
);
$this->insert($data); 
```

# php - 三列 PHP 结果表

> ID：10287543
> 
> 赞同：1
> 
> 时间：2012-04-23T20:10:36.237
> 
> 标签：php, loops, html-table

我正在尝试将我的 mysql 查询显示到一个相当独特的表中。特点如下：

1.  结果表有 3 列
2.  右上角的单元格保留用于其他内容

[结果1][结果2][内容]

[结果3][结果4][结果5]

[结果6][结果7][结果8]

...ETC

查询最多可以返回 1 个结果。但我正在努力将我需要的东西包含在循环中。

如果有人知道如何追求这样的事情，我会很乐意提供帮助！提前致谢！

编辑**这是我的代码到目前为止

结果分三列显示，但我无法在右上角的单元格中显示其他静态内容。

```
$row = 0;
$column = 0;
echo "<table>";
while($row = mysql_fetch_assoc($result)) {
    if ($column == 0) {echo "<tr>";}
    if (($column == 2) && ($row == 0)){echo "<td>content</td></tr><tr>";}
  echo "<td>".$row['business']."</td>";
  $column++;
  if ($column >= 3) {
    $row++;
    echo "</tr>";
    $column = 0;
  }
}
echo "</table>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T20:25:11.263

将结果行放入 中后`$rows`，将其拆分为数组数组：

```
$table = array();
while (count($rows)){
   $group = array_slice($rows, 0, 3);
   $rows = array_slice($rows, 3);
   while (count($group) < 3) $group[] = array();
   $table[] = $group;
} 
```

现在`$table`包含一个 3 元素数组的数组。最后一个填充有 3 个元素，添加空数组直到我们有 3 个。然后输出它：

```
foreach ($table as $group){
    echo "<tr>\n";
    foreach ($group as $row){
        if ($row['id']){
            echo "<td>".format_data($row)."</td>\n";
        }else{
            # empty padding cell on last row
            echo "<td>&nbsp;</td>\n";
        }
    }
    echo "</tr>\n";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T20:22:03.253

假设一个纯 html 表，你会有

```
$row = 0;
$column = 0;
echo '<table>';
while($row = mysql_fetch_assoc($result)) {
   if ($column == 0) {
      echo '<tr>';
   }
   if (($column == 2) && ($row = 0))
      echo '<td>content</td></tr><tr>'; // output special content, start new row
   }
   echo "<td>$row[something]</td>";
   $column++;
   if ($column >= 3) {
      $row++;
      echo '</tr>';
      $column = 0;
   }
}
echo '</table>'; 
```

可能不会按原样工作，但应该给你一个大致的想法。基本上只输出行/列，直到您到达第一行/第三列然后输出您的特殊内容，否则就输出

# mysql - 用时间查询mysql数据库

> ID：10287544
> 
> 赞同：0
> 
> 时间：2012-04-23T20:10:45.850
> 
> 标签：mysql, datetime

我想以这样一种方式查询数据库，即获取在给定时间内出现的所有行。我的数据库表有一个日期列，其中包含这样的数据

```
2012-04-23 08:39:10
2012-04-23 08:41:37
2012-04-23 13:49:56 
```

我想获取所有包含 5 分钟前时间的行。实际上，我在这里尝试的是显示 5 分钟前在线的所有用户。这些日期和时间是使用它们的最后一个活动创建的。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T20:14:33.767

这应该适合你

```
select * from tablename where ((datecol > subtime(now(),'00:05:00'))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T20:16:05.903

像下面这样的东西应该可以解决问题：

```
SELECT * 
FROM <table> 
WHERE 
  <date column> 
    BETWEEN 
    DATE_SUB(NOW(), INTERVAL 5 MINUTE) 
    AND 
    DATE_SUB(NOW(), INTERVAL 6 MINUTE)
; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T20:19:09.860

```
SELECT *
FROM `TABLE_NAME`
WHERE `DATECOLUMN` > DATE_SUB(CURRENT_TIMESTAMP, INTERVAL 5 MINUTE) 
```

# r - 用于绘图的反向变换`scale()`

> ID：10287545
> 
> 赞同：58
> 
> 时间：2012-04-23T20:10:53.397
> 
> 标签：r

我有一个`scale()`用于预测响应变量的解释变量：

```
d <- data.frame(
  x=runif(100),
  y=rnorm(100)
)

d <- within(d, s.x <- scale(x))

m1 <- lm(y~s.x, data=d) 
```

我想绘制预测值，但使用原始比例`x`而不是中心比例。有没有办法进行反向转换或反向缩放`s.x`？

谢谢！

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-04-23T20:27:45.177

看一眼：

```
attributes(d$s.x) 
```

您可以使用属性来取消缩放：

```
d$s.x * attr(d$s.x, 'scaled:scale') + attr(d$s.x, 'scaled:center') 
```

例如：

```
> x <- 1:10
> s.x <- scale(x)

> s.x
            [,1]
 [1,] -1.4863011
 [2,] -1.1560120
 [3,] -0.8257228
 [4,] -0.4954337
 [5,] -0.1651446
 [6,]  0.1651446
 [7,]  0.4954337
 [8,]  0.8257228
 [9,]  1.1560120
[10,]  1.4863011
attr(,"scaled:center")
[1] 5.5
attr(,"scaled:scale")
[1] 3.02765

> s.x * attr(s.x, 'scaled:scale') + attr(s.x, 'scaled:center')
      [,1]
 [1,]    1
 [2,]    2
 [3,]    3
 [4,]    4
 [5,]    5
 [6,]    6
 [7,]    7
 [8,]    8
 [9,]    9
[10,]   10
attr(,"scaled:center")
[1] 5.5
attr(,"scaled:scale")
[1] 3.02765 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-03-12T01:29:19.817

对于数据框或矩阵：

```
set.seed(1)
x = matrix(sample(1:12), ncol= 3)
xs = scale(x, center = TRUE, scale = TRUE)

x.orig = t(apply(xs, 1, function(r)r*attr(xs,'scaled:scale') + attr(xs, 'scaled:center')))

print(x)
     [,1] [,2] [,3]
[1,]    4    2    3
[2,]    5    7    1
[3,]    6   10   11
[4,]    9   12    8

print(x.orig)
     [,1] [,2] [,3]
[1,]    4    2    3
[2,]    5    7    1
[3,]    6   10   11
[4,]    9   12    8 
```

使用以下功能时要小心`identical()`：

```
print(x - x.orig)
     [,1] [,2]         [,3]
[1,]    0    0 0.000000e+00
[2,]    0    0 8.881784e-16
[3,]    0    0 0.000000e+00
[4,]    0    0 0.000000e+00

identical(x, x.orig)
# FALSE 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-10-19T22:58:08.707

我觉得这应该是一个适当的功能，这是我的尝试：

```
#' Reverse a scale
#'
#' Computes x = sz+c, which is the inverse of z = (x - c)/s 
#' provided by the \code{scale} function.
#' 
#' @param z a numeric matrix(like) object
#' @param center either NULL or a numeric vector of length equal to the number of columns of z  
#' @param scale  either NULL or a a numeric vector of length equal to the number of columns of z
#'
#' @seealso \code{\link{scale}}
#'  mtcs <- scale(mtcars)
#'  
#'  all.equal(
#'    unscale(mtcs), 
#'    as.matrix(mtcars), 
#'    check.attributes=FALSE
#'  )
#'  
#' @export
unscale <- function(z, center = attr(z, "scaled:center"), scale = attr(z, "scaled:scale")) {
  if(!is.null(scale))  z <- sweep(z, 2, scale, `*`)
  if(!is.null(center)) z <- sweep(z, 2, center, `+`)
  structure(z,
    "scaled:center"   = NULL,
    "scaled:scale"    = NULL,
    "unscaled:center" = center,
    "unscaled:scale"  = scale
  )
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-05-24T20:29:25.227

tl;博士：

```
unscaled_vals <- xs + attr(xs, 'scaled:scale') + attr(xs, 'scaled:center') 
```

*   哪里`xs`是由创建的缩放对象`scale(x)`

* * *

仅针对那些试图对此有所了解的人：

**R如何缩放**：

该[`scale`](https://www.rdocumentation.org/packages/base/versions/3.5.0/topics/scale)函数默认执行缩放和居中。

*   在这两者中，函数`centering`首先执行。

默认情况下，通过`!is.na`从每个值中减去所有输入值的平均值来实现居中：

```
data - mean(data, rm.na = T) 
```

缩放是通过以下方式实现的：

```
sqrt( ( sum(x^2) ) / n - 1) 
```

其中是要缩放`x`的所有值的集合，并且= 。`!is.na``n``length(x)`

*   但重要的是，当`center =T`在 中时`scale`，`x`不是原始数据集，而是*已经居中*的数据。

    所以如果`center = T`（默认），缩放函数*真的*在计算：

    ```
     sqrt( ( sum( (data - mean(data, rm.na = T))^2) ) / n - 1) 
    ```

    *   注意：[当`center = T`] 这与取标准差相同：`sd(data)`。

**如何取消缩放**：

*说明*：

1.  首先乘以比例因子：

    ```
    y = x * sqrt( ( sum( (x - mean(x , na.rm = T))^2) ) / (length(x) - 1)) 
    ```

2.  然后加回意思：

    ```
    y + mean(x , na.rm = T) 
    ```

显然，您需要知道原始数据集的平均值才能使这种*手动*方法*真正*有用，但我将其放在这里是出于概念性的考虑。

幸运的是，正如之前的答案所示，“居中”值（即*mean*）位于`scale`对象的属性中，因此这种方法可以简化为：

*如何在 R 中做*：

```
unscaled_vals <- xs + attr(xs, 'scaled:scale') + attr(xs, 'scaled:center') 
```

*   哪里`xs`是由 . 创建的缩放对象`scale(x)`。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-03-05T16:11:24.827

我遇到了这个问题，我想我找到了一个使用线性代数的更简单的解决方案。

```
# create matrix like object
a <- rnorm(1000,5,2)
b <- rnorm(1000,7,5) 

df <- cbind(a,b)

# get center and scaling values 
mean <- apply(df, 2, mean)
sd <- apply(df, 2, sd)

# scale data
s.df <- scale(df, center = mean, scale = sd)

#unscale data with linear algebra 
us.df <- t((t(s.df) * sd) + mean) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-03-18T21:47:22.153

老问题，但你为什么不这样做：

```
plot(d$x, predict(m1, d)) 
```

作为比手动使用缩放对象的属性更简单的方法，DMwR 具有以下功能：[`unscale`](https://www.rdocumentation.org/packages/DMwR/versions/0.4.1/topics/unscale). 它是这样工作的：

```
d <- data.frame(
  x=runif(100)
)

d$y <- 17 + d$x * 12

s.x <- scale(d$x)

m1 <- lm(d$y~s.x)

library(DMwR)
unsc.x <- unscale(d$x, s.x)
plot(unsc.x, predict(m1, d)) 
```

重要的是， 的第二个参数`unscale`需要具有 和 的`'scaled:scale'`属性`'scaled:center'`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-09-04T22:09:47.953

我迟到了。但这是一个有用的工具来缩放/取消缩放数组格式的数据。

**例子：**

```
> (data <- array(1:8, c(2, 4)))            # create data
     [,1] [,2] [,3] [,4]
[1,]    1    3    5    7
[2,]    2    4    6    8
> obj <- Scale(data)                       # create object
> (data_scaled <- obj$scale(data))         # scale data
           [,1]       [,2]       [,3]       [,4]
[1,] -0.7071068 -0.7071068 -0.7071068 -0.7071068
[2,]  0.7071068  0.7071068  0.7071068  0.7071068
> (obj$unscale(data_scaled))               # unscale scaled data
     [,1] [,2] [,3] [,4]
[1,]    1    3    5    7
[2,]    2    4    6    8

## scale or unscale another dataset
## using the same mean/sd parameters
> (data2 <- array(seq(1, 24, 2), c(3, 4))) # create demo data
     [,1] [,2] [,3] [,4]
[1,]    1    7   13   19
[2,]    3    9   15   21
[3,]    5   11   17   23
> (data2_scaled <- obj$scale(data2))       # scale data
           [,1]      [,2]     [,3]     [,4]
[1,] -0.7071068  4.949747 10.60660 16.26346
[2,]  2.1213203  7.778175 13.43503 19.09188
[3,]  4.9497475 10.606602 16.26346 21.92031
> (obj$unscale(data2_scaled))              # unscale scaled data
     [,1] [,2] [,3] [,4]
[1,]    1    7   13   19
[2,]    3    9   15   21
[3,]    5   11   17   23 
```

**功能** `Scale()`：

```
Scale <- function(data, margin=2, center=TRUE, scale=TRUE){
    stopifnot(is.array(data), is.numeric(data),
              any(mode(margin) %in% c("integer", "numeric")),
              length(margin) < length(dim(data)),
              max(margin) <= length(dim(data)),
              min(margin) >= 1,
              !any(duplicated(margin)),
              is.logical(center), length(center)==1,
              is.logical(scale), length(scale)==1,
                  !(isFALSE(center) && isFALSE(scale)))
    margin <- as.integer(margin)

    m <- if(center) apply(data, 2, mean, na.rm=TRUE) else NULL
    s <- if(scale)  apply(data, 2, sd, na.rm=TRUE) else NULL
    ldim <- length(dim(data))
    cdim <- dim(data)[margin]
    data <- NULL # don't store the data

    Scale <- function(data){
        stopifnot(is.array(data), is.numeric(data),
                  length(dim(data)) == ldim,
                  dim(data)[margin] == cdim)
        if(center)
            data <- sweep(data, margin, m, `-`)
        if(scale)
            data <- sweep(data, margin, s, `/`)
        data
    }

    Unscale <- function(data){
        stopifnot(is.array(data), is.numeric(data),
                  length(dim(data)) == ldim,
                  dim(data)[margin] == cdim)
        if(scale)
            data <- sweep(data, margin, s, `*`)
        if(center)
            data <- sweep(data, margin, m, `+`)
        data
    }
    list(scale=Scale, unscale=Unscale, mean=m, sd=s)
} 
```

**注意：** `data.frame` s 尚不支持。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-10-14T18:34:46.707

只是受到 Fermando 的回答的启发，但用更少的代码来缩放线：

```
set.seed(1)
x = matrix(sample(1:12), ncol= 3)
xs = scale(x, center = TRUE, scale = TRUE)
center <- attr(xs,"scaled:center")
scale <- attr(xs,"scaled:scale")
x.orig <- t(t(xs) * scale + center) # code is less here

print(x)
[1,]    9    2    6
[2,]    4    5   11
[3,]    7    3   12
[4,]    1    8   10

print(x.orig)
[1,]    9    2    6
[2,]    4    5   11
[3,]    7    3   12
[4,]    1    8   10
attr(,"scaled:center")
[1] 5.25 4.50 9.75
attr(,"scaled:scale")
[1] 3.50 2.65 2.63 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-03-20T15:00:12.427

我发现反转`scale()`函数的一种简单方法是调用两次该`scale()`函数：

```
X_scaled <- scale(X,center=TRUE,scale=TRUE)
X_reversed <- scale(X_scaled,center=FALSE,scale=1/attr(X_scaled,'scaled:scale'))
X_reversed <- scale(X_reversed,center=-attr(X_scaled,'scaled:center'),scale=FALSE)
```

如果您不介意在函数的参数中调用函数（我确实介意），您最终可能会得到以下解决方案：

```
X_scaled <- scale(X,center=TRUE,scale=TRUE)
X_reversed <- scale(scale(X_scaled,center=FALSE,scale=1/attr(X_scaled,'scaled:scale')),
                    center=-attr(X_scaled,'scaled:center'),scale=FALSE)
```

# facebook - 在远程 mp4 文件的 feed 帖子中嵌入视频

> ID：10287548
> 
> 赞同：0
> 
> 时间：2012-04-23T20:10:55.137
> 
> 标签：facebook, video, post, mp4

我想使用图形 API 将远程视频文件嵌入到 Facebook 帖子中。我的 .mp4 文件位于 rackspace cloudfiles cdn 上。

我目前正在执行以下操作：

```
curl -F 'access_token=...' \
     -F 'message=Link to my .mp4 video' \
     -F 'source=http://c334110.r11.cf1.rackcdn.com/test.mp4' \
     -F 'picture=http://someimage.jpg' \
     https://graph.facebook.com/me/feed 
```

它制作的帖子有一个空白点，通常是嵌入视频，但没有视频。

我已经看到很多使用 youtube 视频的例子。这会起作用吗，还是我需要提供一个页面，该页面具有适当的开放图形元数据以及指向 mp4 文件的链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T18:22:31.697

所以事实证明我让这比我需要的更难。如果我只是想分享一个链接并让它嵌入视频，则不需要图形 api。事实上，将视频嵌入 Facebook 非常简单。

以下是我采取的步骤：

*   获取 .swf flash 播放器，并确保它通过 https 提供。

*   使用以下元标记：

    `<meta property="og:video" content="https://path/to/player.swf?url=location/of/vid.mp4">`

*   注意：我正在传递 flashvar“url”。这可能因您的 Flash 播放器而异。

*   在您的网站上有一个指向：“http://m.facebook.com/sharer.php?u=”的链接

*   确保查询字符串参数“u”是 URL 编码的。

我还发现[Facebook 调试器](https://developers.facebook.com/tools/debug "Facebook 调试器")对于正确获取元标记非常有帮助。

# css - 使用高效的 CSS 选择器

> ID：10287552
> 
> 赞同：1
> 
> 时间：2012-04-23T20:11:16.270
> 
> 标签：css, css-sprites

根据 PageSpeed，我的新 CSS 精灵导航没有使用高效的 CSS 选择器。

有人可以告诉我知道我做错了什么吗？

```
Very inefficient rules (good to fix on any page):
ul.navmenu li a    Tag key with 2 descendant selectors and Class overly qualified with tag
ul.navmenu li.home a    Tag key with 2 descendant selectors and Class overly qualified with tag and Class overly qualified with tag
ul.navmenu li.home a:hover    Tag key with 2 descendant selectors and Class overly qualified with tag and Class overly qualified with tag 
```

我的 CSS ：

```
ul.navmenu li a { display: block; background: url('/styles/pc-nav-sprite.png'); }
ul.navmenu li.home a { background-position: 0 -486px; width: 187px; height: 24px; margin-top: 16px;}
ul.navmenu li.home a:hover { background-position: 0 -511px; width: 187px; height: 24px; } 
```

HTML：

```
<ul class="navmenu">
<li class="home"><a class="selected" title="Home"></a></li>
<li class="forum"><a href="/forum/" title="Forum"><span class="displace">Forum</span></a></li>
...
...
</ul> 
```

我将不胜感激这方面的任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-23T20:15:14.797

如果您不使用`navmenu`a 以外的任何东西`ul`，则不需要`ul`. 事实上，我猜测只有其中一个，在这种情况下你可以使用 ID 和`#navmenu`.

您可以通过在选择器之间使用来稍微提高效率`>`，因为这样它只需要向下搜索一层而不是潜在的无限数量。

至于`li.home`，您可能可以安全地假设 a 的任何直接子级都是 a `ul`，`li`因此该部分是多余的。

最终选择器：

```
#navmenu > li > a
#navmenu > .home > a
#navmenu > .home > a:hover 
```

# android - 只有没有 html 和 css 标签的文本

> ID：10287555
> 
> 赞同：1
> 
> 时间：2012-04-23T20:11:40.957
> 
> 标签：android, html, css

我有一个电子邮件正文，它有 html、css 标签，我试图只检索 Android 中的正文文本。

我用了;

```
String.valueOf(Html.fromHtml(body); 
```

这给了我带有 css 标签的文本。我应该怎么做才能只检索文本？结果保存在字符串中

通常（当我第一次收到 body 时）；

```
 <html>
    <head>
    <style><!--
    .hmmessage P
    {
    margin:0px;
    padding:0px
    }
    body.hmmessage
    {
    font-size: 10pt;
    font-family:Tahoma
    }
    --></style></head>
    <body class='hmmessage'><div dir='ltr'>
    TEXTONE<div>TEXTTWO</div>                     </div></body>
    </html> 
```

String.valueOf(Html.fromHtml(body); 之后

```
<!-- .hmmessage P { margin:0px; padding:0px } body.hmmessage { font-size: 10pt; font-family:Tahoma } -->

TEXTONE
TEXTTWO 
```

我只想接收 TEXTONE 和 TEXTWO

# c# - PrintPage PrintPageEventHandler 打印的副本太多

> ID：10287558
> 
> 赞同：3
> 
> 时间：2012-04-23T20:12:18.133
> 
> 标签：c#, winforms, printing

我必须为我们公司生产的产品打印运输标签。

为了帮助自己了解这些标签的结果，我使用 Windows 窗体来设计它们。这使我可以使用控件定位文本、设置正确的字体等`Label`，添加自定义控件`BarCode`，并通过*控件*`Panel`将项目分组到框中。

每页包含两 (2) 个标签。

当我的代码打印标签文档时，我要求 2、4 或 6 个副本。有时，也会使用打印预览。在这种情况下，我必须重置创建的标签数量。

但是，当文档打印时：

*   如果请求是 2 份，则代码打印 2 张纸（4 个标签）
*   如果请求是 4 份，则代码打印 8 张纸（16 个标签）
*   如果请求是 6 份，则代码将打印多达 18 页（36 个标签）

有人看到模式吗？我不。

这是我的打印命令：

```
public int Print(string docName, int rows, int columns, int copies) {
  short shortCopies = (short)copies;
  LabelsHorizontal = rows;
  LabelsVertical = columns;
  Size docSize = PrintPreview.Document.DefaultPageSettings.Bounds.Size;
  float height = 0.8F * Screen.PrimaryScreen.WorkingArea.Size.Height;
  float width = (height * docSize.Width) / docSize.Height;
  Size winSize = new Size((int)width, (int)height);
  PrintPreview.Height = winSize.Height;
  PrintPreview.Width = winSize.Width;
  if (!String.IsNullOrEmpty(docName)) {
    PrintPreview.Document.DocumentName = docName;
  }
  PrintPreview.Document.PrinterSettings.Copies = shortCopies;
  PrintPreview.SettingsFilename = Settings.PageSettingsLocation;
  if (!PrintPreview.PrinterSelected) {
    if (PrintPreview.ShowPrinterSelectDialog() != DialogResult.OK) {
      return 0;
    }
  }
  labelQtyPrinted = 0;
  if (ShowPrintPreview) {
    PrintPreview.ShowDialog();
  } else {
    PrintPreview.PrintDocument();
  }
  return labelQtyPrinted;
}
// Resets the Label Count between PrintPreview and Print
private void PrintPreview_OnPrintClicked(object sender, EventArgs e) {
  labelQtyPrinted = 0;
} 
```

我必须编写一个自定义的 PrintPreview 类，它以`PrintPreviewDialog`为基类，以便我可以用这个**printButton_Click**方法覆盖它的 Print 按钮：

```
// Handles the Printing of the Document
internal void printButton_Click(object sender, EventArgs e) {
  if (OnPrintClicked != null) {
    OnPrintClicked(sender, e); // this resets my labelQtyPrinted value shown above
  }
  Document.Print();
  printed = true;
  Close();
} 
```

在`Print`方法（第一段代码）中，`PrintPreview.PrintDocument()`只是调用`printButton_Click`事件的代码。

我的**PrintPageEventHandler**如下所示：

```
private void Document_Printed(object sender, PrintPageEventArgs e) {
  if (PrintPreview.Document.PrinterSettings.Copies <= labelQtyPrinted) {
    throw new Exception("Run Away Printer");
  }
  float scale;
  SizeF pageSize = new SizeF(
    PrintPreview.Document.DefaultPageSettings.PaperSize.Width,
    PrintPreview.Document.DefaultPageSettings.PaperSize.Height
  );
  Margins m = PrintPreview.Document.DefaultPageSettings.Margins;
  float printableHeight = pageSize.Height - (m.Top + m.Bottom);
  float printableWidth = pageSize.Width - (m.Left + m.Right);
  if (printableWidth < printableHeight) {
    if (labelSize.Width < labelSize.Height) {
      float r1 = (printableWidth) / labelSize.Width;
      float r2 = (printableHeight) / labelSize.Height;
      scale = (r1 < r2) ? r1 : r2;
    } else {
      scale = (printableWidth) / labelSize.Width;
    }
  } else {
    if (labelSize.Width < labelSize.Height) {
      scale = (printableHeight) / labelSize.Height;
    } else {
      float r1 = (printableWidth) / labelSize.Width;
      float r2 = (printableHeight) / labelSize.Height;
      scale = (r1 < r2) ? r1 : r2;
    }
  }
  float lh = scale * labelSize.Height;
  float lw = scale * labelSize.Width;
  float ml = scale * m.Left;
  float mt = scale * m.Top;
  Graphics G = e.Graphics;
  G.SmoothingMode = smoothMode;
  G.TextRenderingHint = TextRenderingHint.AntiAlias;
  for (int i = 0; i < LabelsHorizontal; i++) {
    float dx = i * (lw + ml); // Horizontal shift * scale
    for (int j = 0; j < LabelsVertical; j++) {
      float dy = j * (lh + mt); // Vertical shift * scale
      #region ' Panels '
      foreach (Panel item in panels) {
        float h = scale * item.Size.Height;
        float w = scale * item.Size.Width;
        float x = (ml + dx) + scale * item.Location.X;
        float y = (mt + dy) + scale * item.Location.Y;
        using (SolidBrush b = new SolidBrush(item.BackColor)) {
          G.FillRectangle(b, x, y, w, h);
        }
        using (Pen p = new Pen(Brushes.Black)) {
          G.DrawRectangle(p, x, y, w, h);
        }
      }
      #endregion
      #region ' Logo '
      if (logo != null) {
        float h = scale * logo.Height;
        float w = scale * logo.Width;
        float x = (ml + dx) + scale * logoPt.X;
        float y = (mt + dy) + scale * logoPt.Y;
        G.DrawImage(logo, x, y, w, h);
      }
      #endregion
      #region ' Labels '
      foreach (Label item in labels) {
        float h = scale * item.Size.Height;
        float w = scale * item.Size.Width;
        float x = (ml + dx) + scale * item.Location.X;
        float y = (mt + dy) + scale * item.Location.Y;
        Color c = PrintPreview.Document.DefaultPageSettings.Color ? item.ForeColor : Color.Black;
        Font font = new Font(item.Font.FontFamily, scale * item.Font.Size, item.Font.Style);
        using (SolidBrush b = new SolidBrush(c)) {
          StringFormat format = GetStringFormatFromContentAllignment(item.TextAlign);
          format.FormatFlags = StringFormatFlags.NoClip | StringFormatFlags.NoWrap;
          format.Trimming = StringTrimming.None;
          PointF locationF = new PointF(x, y);
          SizeF size = new SizeF(w, h);
          RectangleF r = new RectangleF(locationF, size);
          G.DrawString(item.Text, font, b, r, format);
        }
      }
      #endregion
      #region ' Barcodes '
      foreach (AcpBarcodeControl item in barcodes) {
        Image img = item.GetBarcodeImage(item.BarcodeText);
        if (img != null) {
          float h = scale * item.Size.Height;
          float w = scale * item.Size.Width;
          float x = (ml + dx) + scale * item.Location.X;
          float y = (mt + dy) + scale * item.Location.Y;
          G.DrawImage(img, x, y, w, h);
        }
      }
      #endregion
      labelQtyPrinted++;
      if (labelQtyPrinted == PrintPreview.Document.PrinterSettings.Copies) {
        e.HasMorePages = false;
        return;
      }
    }
    e.HasMorePages = (labelQtyPrinted < PrintPreview.Document.PrinterSettings.Copies);
  }
} 
```

总而言之，它运作良好。永远不会抛出“**逃跑打印机”**异常。

那么，为什么要制作这么多副本呢？

打印机是 HP LaserJet 4050，如果这有什么不同的话。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T21:36:54.043

**我知道了！**

伊皮！

好的，如果有人在乎，这里是交易：我需要每页打印两 (2) 个标签。

我要做的是计算要打印多少页，使用要垂直和水平打印的标签数量。

我添加了变量并更改了要调用`labelsRequested`的现有变量：`labelQtyPrinted``labelsPrinted`

```
private int labelsPrinted;
private int labelsRequested; 
```

我的公共`Print`方法更改为：

```
public int Print(string docName, int rows, int columns, int copies) {
  LabelsHorizontal = rows;
  LabelsVertical = columns;
  if (!String.IsNullOrEmpty(docName)) {
    PrintPreview.Document.DocumentName = docName;
  }
  labelsRequested = copies;
  //PrintPreview.Document.PrinterSettings.Copies = (short)copies;
  PrintPreview.SettingsFilename = Settings.PageSettingsLocation;
  if (!PrintPreview.PrinterSelected) {
    if (PrintPreview.ShowPrinterSelectDialog() != DialogResult.OK) {
      return 0;
    }
  }
  if (ShowPrintPreview) {
    Size docSize = PrintPreview.Document.DefaultPageSettings.Bounds.Size;
    float height = 0.8F * Screen.PrimaryScreen.WorkingArea.Size.Height;
    float width = (height * docSize.Width) / docSize.Height;
    Size winSize = new Size((int)width, (int)height);
    PrintPreview.Height = winSize.Height;
    PrintPreview.Width = winSize.Width;
    PrintPreview.Document.PrinterSettings.Copies = (short)labelsRequested; // this may cause problems
    PrintPreview.ShowDialog();
  } else {
    PrintPreview.PrintDocument();
  }
  return labelsPrinted;
} 
```

现在，`print_Click`我没有像以前那样添加事件处理程序，而是将`Document`'s连接起来`BeginPrint`，`EndPrint`如下所示：

```
void Document_BeginPrint(object sender, PrintEventArgs e) {
  labelsPrinted = 0;
  float fPerPage = LabelsHorizontal * LabelsVertical;
  if (1 < fPerPage) {
    float fQty = labelsRequested;
    float fTotal = fQty / fPerPage;
    PrintPreview.Document.PrinterSettings.Copies = (short)fTotal;
  }
}

void Document_EndPrint(object sender, PrintEventArgs e) {
  Printed = (labelsPrinted == labelsRequested);
} 
```

不过，这里的关键显然来自我试图在事件处理程序中设置`HasMorePages`值。`PrintPage`

“为什么？” 你问。因为我只打印多份相同的 1 页大小的文档。***如果****我的一个文档要跨越多个页面，那么我需要确保`HasMorePages`已设置。*

事不宜迟，这是我的`PrintPage`事件处理程序（请注意，很多代码非常通用，可以轻松编辑以供其他人使用）：

```
private void Document_Printed(object sender, PrintPageEventArgs e) {
  float scale;
  SizeF pageSize = new SizeF(
    PrintPreview.Document.DefaultPageSettings.PaperSize.Width,
    PrintPreview.Document.DefaultPageSettings.PaperSize.Height
  );
  Margins m = PrintPreview.Document.DefaultPageSettings.Margins;
  float printableHeight = pageSize.Height - (m.Top + m.Bottom);
  float printableWidth = pageSize.Width - (m.Left + m.Right);
  if (printableWidth < printableHeight) {
    if (labelSize.Width < labelSize.Height) {
      float r1 = printableWidth / labelSize.Width;
      float r2 = printableHeight / labelSize.Height;
      scale = (r1 < r2) ? r1 : r2;
    } else {
      scale = printableWidth / labelSize.Width;
    }
  } else {
    if (labelSize.Width < labelSize.Height) {
      scale = (printableHeight) / labelSize.Height;
    } else {
      float r1 = printableWidth / labelSize.Width;
      float r2 = printableHeight / labelSize.Height;
      scale = (r1 < r2) ? r1 : r2;
    }
  }
  float lh = scale * labelSize.Height;
  float lw = scale * labelSize.Width;
  float ml = scale * m.Left;
  float mt = scale * m.Top;
  Graphics G = e.Graphics;
  G.SmoothingMode = smoothMode;
  G.TextRenderingHint = TextRenderingHint.AntiAlias;
  for (int i = 0; (i < LabelsHorizontal) && !e.Cancel; i++) {
    float dx = i * (lw + ml); // Horizontal shift * scale
    for (int j = 0; (j < LabelsVertical) && !e.Cancel; j++) {
      float dy = j * (lh + mt); // Vertical shift * scale
      #region ' Panels '
      foreach (Panel item in panels) {
        float h = scale * item.Size.Height;
        float w = scale * item.Size.Width;
        float x = (ml + dx) + scale * item.Location.X;
        float y = (mt + dy) + scale * item.Location.Y;
        using (SolidBrush b = new SolidBrush(item.BackColor)) {
          G.FillRectangle(b, x, y, w, h);
        }
        using (Pen p = new Pen(Brushes.Black)) {
          G.DrawRectangle(p, x, y, w, h);
        }
      }
      #endregion
      #region ' Logo '
      if (logo != null) {
        float h = scale * logo.Height;
        float w = scale * logo.Width;
        float x = (ml + dx) + scale * logoPt.X;
        float y = (mt + dy) + scale * logoPt.Y;
        G.DrawImage(logo, x, y, w, h);
      }
      #endregion
      #region ' Labels '
      foreach (Label item in labels) {
        float h = scale * item.Size.Height;
        float w = scale * item.Size.Width;
        float x = (ml + dx) + scale * item.Location.X;
        float y = (mt + dy) + scale * item.Location.Y;
        Color c = PrintPreview.Document.DefaultPageSettings.Color ? item.ForeColor : Color.Black;
        Font font = new Font(item.Font.FontFamily, scale * item.Font.Size, item.Font.Style);
        using (SolidBrush b = new SolidBrush(c)) {
          StringFormat format = GetStringFormatFromContentAllignment(item.TextAlign);
          format.FormatFlags = StringFormatFlags.NoClip | StringFormatFlags.NoWrap;
          format.Trimming = StringTrimming.None;
          PointF locationF = new PointF(x, y);
          SizeF size = new SizeF(w, h);
          RectangleF r = new RectangleF(locationF, size);
          G.DrawString(item.Text, font, b, r, format);
        }
      }
      #endregion
      #region ' Barcodes '
      foreach (AcpBarcodeControl item in barcodes) {
        Image img = item.GetBarcodeImage(item.BarcodeText);
        if (img != null) {
          float h = scale * item.Size.Height;
          float w = scale * item.Size.Width;
          float x = (ml + dx) + scale * item.Location.X;
          float y = (mt + dy) + scale * item.Location.Y;
          G.DrawImage(img, x, y, w, h);
        }
      }
      #endregion
      labelsPrinted++;
    }
  }
} 
```

# linux - SCHED_FIFO 线程在 Linux 中被 SCHED_OTHER 线程抢占

> ID：10287561
> 
> 赞同：5
> 
> 时间：2012-04-23T20:12:25.950
> 
> 标签：linux, pthreads, scheduler, thread-priority, preemption

我写了一个测试程序来测试一下`SCHED_FIFO`。我了解到`SCHED_FIFO`不能被`SCHED_OTHER`线程抢占。但是我无法解释多次运行同一程序时获得的结果。

```
/* Includes */
#include <unistd.h>     /* Symbolic Constants */
#include <sys/types.h>  /* Primitive System Data Types */ 
#include <errno.h>      /* Errors */
#include <stdio.h>      /* Input/Output */
#include <stdlib.h>     /* General Utilities */
#include <pthread.h>    /* POSIX Threads */
#include <string.h>     /* String handling */
#include <sched.h>

/* prototype for thread routine */
void print_message_function ( void *ptr );
void print_message_function1 ( void *ptr );

/* struct to hold data to be passed to a thread
 * this shows how multiple data items can be passed to a thread
 */
typedef struct str_thdata
{
    int thread_no;
    int thread_value;
    char message[100];
} thdata;

int main()
{
    pthread_t thread1, thread2;  /* thread variables */
    thdata data1, data2;         /* structs to be passed to threads */

    /* initialize data to pass to thread 1 */
    data1.thread_no = 1;
    data1.thread_value = 0;
    strcpy(data1.message, "Hello!");

    /* initialize data to pass to thread 2 */
    data2.thread_no = 2;
    data2.thread_value = 10000;
    strcpy(data2.message, "Hi!");

    /* create threads 1 and 2 */    
    pthread_create (&thread1, NULL, (void *) &print_message_function, (void *) &data1);
    pthread_create (&thread2, NULL, (void *) &print_message_function1, (void *) &data2);

    /* Main block now waits for both threads to terminate, before it exits
     * If main block exits, both threads exit, even if the threads 
     * have not finished their work 
     */ 
    pthread_join(thread1, NULL);
    pthread_join(thread2, NULL);

    /* exit */  
    exit(0);
} /* main() */

/** 
* print_message_function is used as the start routine for the threads used
* it accepts a void pointer 
**/
void print_message_function ( void *ptr )
{
    thdata *data;            
    data = (thdata *) ptr;  /* type cast to a pointer to thdata */

    struct sched_param param;
    //int priority=10;
    /* sched_priority will be the priority of the thread */
    //param.sched_priority = priority;
    /* only supported policy, others will result in ENOTSUP */

    int policy = SCHED_OTHER;
    /* scheduling parameters of target thread */
    pthread_setschedparam(pthread_self(), policy, &param);
    printf("Thread %d says sched policy  %d \n", data->thread_no, SCHED_OTHER);
    pthread_getschedparam(pthread_self(),&policy,&param);

    printf("Thread %d says %s  %d \n", data->thread_no, data->message,policy);

    int i=0;
    /* do the work */
    printf("Thread %d says %s %d \n", data->thread_no, data->message,(int)pthread_self());
    for(i=0;i<100;i++) 
        printf("Thread %d says %d \n", data->thread_no,data->thread_value++);
    pthread_exit(0); /* exit */
} /* print_message_function ( void *ptr ) */

void print_message_function1 ( void *ptr )
{
    thdata *data;            
    data = (thdata *) ptr;  /* type cast to a pointer to thdata */

    struct sched_param param;
    int priority=10;
    /* sched_priority will be the priority of the thread */
    param.sched_priority = priority;
    /* only supported policy, others will result in ENOTSUP */

    int policy = SCHED_FIFO;
    /* scheduling parameters of target thread */
    pthread_setschedparam(pthread_self(), policy, &param);
    printf("Thread %d says sched policy %d \n", data->thread_no, SCHED_FIFO);

    pthread_getschedparam(pthread_self(),&policy,&param);

    printf("Thread %d says %s  %d \n", data->thread_no, data->message,policy);

    int i=0;
    /* do the work */
    printf("Thread %d says %s  %d \n", data->thread_no, data->message,(int)pthread_self());
    for(i=0;i<100;i++)
        printf("Thread %d says %d \n", data->thread_no,data->thread_value++);
    pthread_exit(0); /* exit */
} /* print_message_function ( void *ptr ) */ 
```

我在多次运行中得到了意想不到的结果，我看到线程`SCHED_FIFO`抢占了`SCHED_OTHER`，即根据程序，线程 2 处于`FIFO`模式，而线程 1处于`SCHED_OTHER`模式。我多次看到thread2被thread1抢占。

有人可以帮我找出问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T00:44:27.167

您可能有这些 sysctl 设置生效，它们是默认值：

```
kernel.sched_rt_period_us = 1000000
kernel.sched_rt_runtime_us = 950000 
```

这意味着实时线程每 1 秒只允许占用 95% 的时间。

另请参阅：[不能在 C++ 中引发优先级反转](https://stackoverflow.com/questions/9779056/cant-provoke-priority-inversion-in-c)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-24T02:43:45.440

此外，每当您的线程在 IO 上阻塞时，可能来自`printf`语句，可能会安排另一个线程。

# apache-camel - Is a standard implementation of an ESB on one server, or a cluster of servers?

> ID：10287566
> 
> 赞同：3
> 
> 时间：2012-04-23T20:12:45.943
> 
> 标签：apache-camel, esb, soa, apache-servicemix, eai

I already used SOAP, but I never worked with SOA, ESB and other enterprise application integration patterns. And I find documentation about ESBs quite confusing.

There is something I am not sure to understand with an ESB. I know it is rather a concept describing the network of an enterprise as a bus and not really a concrete thing, but still.

I can understand that an ESB provides protocol and message conversions with legacy services, allows orchestration and that the logic of the message destination is done by the ESB. But I also thought of the ESB as a middleware between different ESB servers (and not only with web service interfaces).

If I take the example of ServiceMix, I thought that it would be natural to have several ServiceMix platforms on different servers which interact through a common bus/protocol (NMR? JMS?). Therefore my service on ServiceMix (a) created with CAMEL (by using some web services for instance) could consume a service on ServiceMix (b) also created with CAMEL.

So if my service need another service, I would just mention its identifier, and the ESB would route my request to the correct ServiceMix platform.

But when I read about the examples of ServiceMix, it seems to me that ServiceMix is prefentially used as a standalone application server. Not a cluster of servers.

Is an ESB simply a boosted application server? (let apart the integration capabilities it provides)

Is there actually multiple ESBs in an SOA? Are they linked with a protocol internal to the ESB? Or do the services implemented on an ESB (a) must provide external interfaces like SOAP so an ESB (b) can use its services?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T08:32:10.787

ESB is often used as a marketing concept where you draw it as a bar in the middle where everything can be simply plugged in. This vastly oversimplifies Enterprise Integration as inside the ESB the same mess can occur that you had outside before.

Often ESBs are implemented as an application server with adapters and a routing core. My personal opinion is that it is not a good architectural choice to do integration with one app server. The reason is that you leak too much information out of the system to be integrated this way. The central platform will know inner details of the app it integrates with like DB structure or proprietary connection protocols.

On the other hand the idea of a platform that can care about routing and transformations is a good concept that can help a lot if done correctly.

I think a better architecture is the concept of having a common transport and format in the SOA and create services with models that lean to the business language and thinking. To make this happen you need to have the adapters near the systems you integrate. This leads to a decentralized ESB that looks more like what you describe. Keep in mind though to make the common transport and dataformat very standardized.

I have good experiences with using a messaging system as the central transport and pure XML or SOAP as data format. Another good option is REST. It is also possible to combine both.

Servicemix or Karaf + Camel + CXF can host adapters to the applications as well as routing and transformation logic. Additionally you can embedd adapters into your applications using camel and CXF. JMS or REST will allow to connect containers and external adapters.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T19:41:26.027

Simply put, Enterprise Service Bus is more of an architectural concept. The idea is to realise integrations in terms of business services. An ESB can actually be implemented as a set of policies and guidelines where applications agree upon a given set of formats and a given communication protocol (SOAP/WS, Messaging, etc), a way to describe services etc.

ESB servers (Service Mix, IBM WebSphere Message Broker, JBoss ESB, Mule ESB, MS BizTalk Server, you name it) essentially provides a toolbox for realising this. The number of servers, the topology, what protocols/data formats to use etc. often needs to be decided for each situation and enterprise environment. An application environment built up of batch controlled legacy/main frame systems needs a very different integration setup then for instance an event driven Java EE or .NET stack of applications.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T09:15:47.700

Old topic - but I think you need to build an ESB around a Message Bus system.

ESBs may provide other ways of access as well like HTTP, FTP etc. ESBs inherently can host applications or let you connect seamlessly to another external application, agnostic of protocol as it does the mediation internally. You can scale it as much as you want. e.g. you can have the same app deployed in 3 instances of the ESB and load balance on the Message oriented middleware - i.e. you send your message on a queue and all ESB instances are listening on it and only one picks it up on a Point to Point model. You can then scale further by having a cluster of the MoM and send message to any of the instances - both hosting the same queue.

# javascript - Javascript函数拒绝计算变量

> ID：10287568
> 
> 赞同：0
> 
> 时间：2012-04-23T20:12:53.283
> 
> 标签：javascript, function, event-handling, dom-events

我试图让 Javascript 计算几个不同变量和结果的函数。老实说，我在过去的两天里一直在努力，实际上不知道从这里去哪里。我的代码如下：

```
<html>
<title>Calculate Your Monthly Payments</title> 
        <script language = "JavaScript"> 
            function Calc(){ 
            var a, res;             
            a = parseFloat(document.monthly.form.value); 
            res1 = a/1000;
            res2 = a/500;
            res3 = a/300;

            if(document.monthly.payments[1].style.visibility = "visible" )
                window.alert("Your monthly repayments have been estimaded to be £" + res1);

            else if(document.monthly.payments[2].style.visibility = "visible" )
                window.alert("Your monthly repayments have been estimaded to be £ " + res2);

            else(document.monthly.payments[3].style.visibility = "visible" )
                window.alert("Your monthly repayments have been estimaded to be £ " + res3);
            } 

        </script> 
</head> 

<div id="container">

        <h2>Calculate Your Monthly Payments</h2> 
        <h4>Please fill in the form below</h4>
         <form name = "monthly"> 
           How much are you borrowing? (£): <br><input name = "form" type = "text" size = 10 id="textarea"> <br><br>

                Mortgage Type: <br>
                <select name = "payments">
                  <option value="" selected>Please Select </option>
                  <option value="1">Mortgage 2.19% fixed until 2015 </option>
                  <option value="2">Mortgage 3.17% fixed until 2017 </option>
                  <option value="3">Mortgage 3.18% fixed until 2024 </option>
                </select>
                <br><br>                

           <input type = "button" value = "Calculate Payments! " onclick = "Calc();"> 
        </form>
</div>
</html> 
```

我一直试图将事件显示为一个弹出窗口，上面写着

“您的每月付款是......”。

我要实现的方程式应该可以作为您输入的内容除以您选择的内容。

如果选择a，则作为示例，它将被除以1000
，如果选择b，则作为示例，它将被除以500
，如果选择c，则作为示例，它将被除以300。

**但是..这些都不起作用。**

我一直在一遍又一遍地检查代码并使其工作，尽管只是部分地因为事件然后显示两个弹出窗口。首先是选项值 1，然后在单击选项值 2 后替换它。

**问题是：**

在浏览器中查看并单击“计算付款”按钮后，没有任何反应。为什么是这样？

* * *

我希望我能说清楚，因为我对英语有点粗鲁，但我会很感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T20:18:52.540

我认为您的代码的以下几行需要检查支付数组

```
 if(document.monthly.payments[101].style.visibility = "visible" )
            window.alert("Your monthly repayments have been estimaded to be £" + res1);

        else if(document.monthly.payments[102].style.visibility = "visible" )
            window.alert("Your monthly repayments have been estimaded to be £ " + res2);

        else(document.monthly.payments[103].style.visibility = "visible" )
            window.alert("Your monthly repayments have been estimaded to be £ " + res3); 
```

看一下这个

```
 if(document.monthly.payments.style.visibility = "visible" )
            window.alert("Your monthly repayments have been estimaded to be £" + res1);

        else if(document.monthly.payments.style.visibility = "visible" )
            window.alert("Your monthly repayments have been estimaded to be £ " + res2);

        else(document.monthly.payments.style.visibility = "visible" )
            window.alert("Your monthly repayments have been estimaded to be £ " + res3);
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T20:20:44.393

1）下载萤火虫。或者在您使用的任何浏览器中打开 javascript 调试。它会显示你有一个错误。“什么都没有发生”的原因是处理在此错误后停止。`document.monthly.payments[101]`? 什么是101？不知道你来这里做什么。

2) 你有`else(document.monthly.payments[103].style.visibility = "visible" )`

你不能有其他（条件）。它应该只是 else {...}

3）试试这个：

```
 if(document.monthly.payments.selectedIndex == 1)
                window.alert("Your monthly repayments have been estimaded to be £" + res1);

            else if(document.monthly.payments.selectedIndex == 2 )
                window.alert("Your monthly repayments have been estimaded to be £ " + res2);

            else if(document.monthly.payments.selectedIndex == 3 )
                window.alert("Your monthly repayments have been estimaded to be £ " + res3);
            } 
```

您的函数也可能如下所示：

```
function Calc(){ 
            if (document.monthly.payments.selectedIndex == 0){
                alert("Please select a mortgage type");
                return;
            }

            var mortgages = [1000,500,300];
            window.alert("Your monthly repayments have been estimaded to be £" + (parseFloat(document.monthly.form.value) / mortgages[document.monthly.payments.selectedIndex-1])  );
            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T20:21:21.550

您的 javascript 似乎没有任何意义，并且碰巧暴露了一些不太好的做法。听起来您只是想根据您在下拉菜单中选择的选项来提醒不同的值。在这种情况下，您最好插入这样的脚本：

```
<select id="mySelect">
   <!-- Options -->
</select>

<script>
     var selectElement = document.getElementById('mySelect');

     if(selectElement != null)
     {
         selectElement.addEventListener('change', function()
         {
             var selectedOptionValue = this.options[this.selectedIndex].value;

             switch(selectedOptionValue)
             {
                 case 1: // Do Stuff
                    break;
                 case 2: // Do Stuff
                    break;
                 default: // Do Stuff
                    break;
             }
         });
     }
</script> 
```

这样，您可以以不显眼的方式确定单击事件的值，然后您可以根据需要提供代码来显示警报。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T20:28:24.030

jsFiddle ( [http://jsfiddle.net/DTTg5/6/](http://jsfiddle.net/DTTg5/6/) )

```
<script type="text/javascript"> 
    function calculate()
    { 
        var payments = parseInt( document.getElementById("payments").value );
        var a = parseFloat( document.getElementById("borrowing").value );

        var res1 = a/1000;
        var res2 = a/500;
        var res3 = a/300;

        if ( payments  == 1 )
        {
            alert("Your monthly repayments have been estimaded to be £" + res1);
        }
        else if ( payments  == 2 )
        {
            alert("Your monthly repayments have been estimaded to be £ " + res2);
        }
        else if ( payments  == 3 )
        {
            alert("Your monthly repayments have been estimaded to be £ " + res3);
        }
    } 

</script> 

<form name = "monthly"> 
    How much are you borrowing? (£):
    <br/>
    <input name="form" type="text" size="10" id="borrowing"/>
    <br/><br/>
    Mortgage Type:
    <br/>
    <select name="payments" id="payments">
      <option value="0" selected>Please Select </option>
      <option value="1">Mortgage 2.19% fixed until 2015 </option>
      <option value="2">Mortgage 3.17% fixed until 2017 </option>
      <option value="3">Mortgage 3.18% fixed until 2024 </option>
    </select>
    <br/><br/>                
    <input type="button" value="Calculate Payments!" onclick="calculate();"> 
</form> 
```

​</p>

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T20:32:45.177

```
 var a, res;             
        a = parseFloat(document.monthly.form.value); 
        res1 = a/1000;
        res2 = a/500;
        res3 = a/300; 
```

更好的防御性编码：

```
 var a;             //declare only one variable on a line
        a = parseFloat(document.getElementById("borrowing").value) ;
        if (isNaN(a)) {
           alert("please enter nn.nn");
           return;
        } 
        var res1 = a/1000;
        var res2 = a/500;
        var res3 = a/300; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-23T20:38:56.163

这行得通 - 试试看。

```
<html>
<title>Calculate Your Monthly Payments</title> 
        <script language = "JavaScript"> 
            function Calc(){ 
            var a, res;             
            a = parseFloat(document.monthly.form.value); 
            res1 = a/1000;
            res2 = a/500;
            res3 = a/300;

            if(document.monthly.payments.value == "1" )
            {
                window.alert("Your monthlys repayments have been estimaded to be £" + res1);
            }
            else if(document.monthly.payments.value == "2" )
            {
                window.alert("Your monthly repayments have been estimaded to be £ " + res2);
            }
            else if(document.monthly.payments.value == "3" )
            {
                window.alert("Your monthly repayments have been estimaded to be £ " + res3);
            } 
        }
        </script> 
</head> 

<div id="container">

        <h2>Calculate Your Monthly Payments</h2> 
        <h4>Please fill in the form below</h4>
         <form name = "monthly"> 
           How much are you borrowing? (£): <br><input name = "form" type = "text" size = 10 id="textarea"> <br><br>

                Mortgage Type: <br>
                <select name = "payments">
                  <option value="" selected>Please Select </option>
                  <option value="1">Mortgage 2.19% fixed until 2015 </option>
                  <option value="2">Mortgage 3.17% fixed until 2017 </option>
                  <option value="3">Mortgage 3.18% fixed until 2024 </option>
                </select>
                <br><br>                

           <input type = "button" value = "Calculate Payments! " onclick = "Calc();"> 
        </form>
</div>
</html> 
```

# django - 当 primary_key 默认值发生冲突时，Django 会发生什么？

> ID：10287572
> 
> 赞同：0
> 
> 时间：2012-04-23T20:13:15.700
> 
> 标签：django, encryption, django-models, primary-key

如果我在模型中有一个字段具有 primary_key=True 和一个可以返回冲突 id 的默认函数，那么保存时会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T20:34:45.243

与任何其他唯一约束相同：数据库将拒绝插入新记录，Django 将报告一个`IntegrityError`.

这就是为什么您应该始终使用自动递增整数字段作为主键的原因，这也是默认`id`字段的作用。

# xml - Extjs xml模型有很多关联

> ID：10287575
> 
> 赞同：0
> 
> 时间：2012-04-23T20:13:29.167
> 
> 标签：xml, extjs4, nested, associations

有 2 个 Ext.data.models（嵌套）：

```
Ext.define('App.Model.Permission', {
    extend: 'Ext.data.Model',
    belongsTo: 'Roles',
    fields: [{ name: 'Controller', mapping: '@Controller' }, 'Ptype'],    
});

    Ext.define('App.Model.Roles', {
    extend: 'Ext.data.Model',
    idProperty: 'Id',
    hasMany: { model: 'Permission', name: 'Permissions', associationKey: 'Permissions' },    
    fields: [{ name: 'Id', mapping: '@Id' }, 'Name', 'Description']
}); 
```

存储对象- Ext.store

```
 rolesstore = Ext.create('App.Data.Lstore', {
            model: 'App.Model.Roles',
            autoLoad: false,
            proxy: {
                type: 'ajax',
                url: '/Cache/roles.xml',
                reader: {
                    type: 'xml',
                    record: 'Role'                
                }
            }
        }); 
```

用于数据加载的 xml 文件的一部分

> ```
>  <?xml version="1.0" encoding="utf-8"?>
>     <Roles>
>       <Role Id="11111111-1111-1111-1111-111111111111">
>         <Usercreate>430d4bda-4c0c-4e5a-a443-b7091ef1e98c</Usercreate>
>         <Dateedit>01.01.0001</Dateedit>
>         <Name>Администратор</Name>
>         <Description>Роль администратора</Description>
>         <Permissions>
>           <Permission Controller="PurchaseController">
>             <Ptype>2</Ptype>
>           </Permission>
>           <Permission Controller="ContractController">
>             <Ptype>2</Ptype>
>           </Permission>
>           <Permission Controller="PlanController">
>             <Ptype>2</Ptype>
>           </Permission>
>           <Permission Controller="ApprovalController">
>             <Ptype>2</Ptype>
>           </Permission>
>           <Permission Controller="AdminController">
>             <Ptype>2</Ptype>
>           </Permission>
>           <Permission Controller="DictionaryController">
>             <Ptype>2</Ptype>
>           </Permission>
>         </Permissions>
>       </Role>
> </Roles> 
> ```

在加载数据以仅存储“角色”模型时存储而不嵌套“权限”模型？

哪里错了？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T02:06:34.430

它，只是不能这样工作。指南说您必须显式调用嵌套关联 Roles.Permissions()。请参阅[指南](http://docs.sencha.com/ext-js/4-0/#!/guide/data)或[示例](http://docs.sencha.com/ext-js/4-0/guides/data/examples/associations_validations/app.js)。

# java - 使用外部集合字段创建表

> ID：10287578
> 
> 赞同：12
> 
> 时间：2012-04-23T20:13:43.753
> 
> 标签：java, ormlite, foreign-collection

我有这个抽象类：

域项

```
abstract public class DomainItem {

    @DatabaseField(generatedId = true)
    protected long id;

    @ForeignCollectionField(eager = false)
        protected ForeignCollection<ContentItem> contentItens;

    //getters and setters
} 
```

内容项：

```
abstract public class ContentItem {

    @DatabaseField(generatedId = true)
    protected long id;

    @DatabaseField(foreign = true)
    protected DomainItem domainItem;

    @DatabaseField()
    protected String content;

    //getters and setters
} 
```

还有这些（没有摘要）：

```
@DatabaseTable()
public class PhytoterapicItem extends DomainItem{

    public PhytoterapicItem(){

    }

} 
```

植物类成分

```
@DatabaseTable(tableName = "phytoterapiccontent")
public class PhytoterapicContent extends ContentItem {

    @DatabaseField(canBeNull = false)
    private String defaultName;

    @DatabaseField(canBeNull = false)
    private String scientificName;

    //getters and setters
} 
```

在我的 DatabaseHelper 中，我尝试创建表：

```
//DatabaseHelper
...
@Override
public void onCreate(SQLiteDatabase db, ConnectionSource connectionSource) {
    try {
        Log.i(TAG, "onCreate");
        TableUtils.createTable(connectionSource, PhytoterapicContent.class);
        Log.i(TAG, "Created table PhytoterapicContent");

        TableUtils.createTable(connectionSource, PhytoterapicItem.class);
        Log.i(TAG, "Created table PhytoterapicItem");
    catch{
       ...
    } 
```

表 PhytoterapicContent 已创建。但我收到以下错误：

> java.sql.SQLException：字段“contentItens”列名的外部集合类 br.com.project.model.ContentItem 不包含类 br.com.project.model.PhytoterapicItem 的外部字段

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-04-25T17:35:34.917

我花了一段时间才注意到/理解文档中的这个关键块（[http://ormlite.com/docs/foreign-collection](http://ormlite.com/docs/foreign-collection)）：

> 请记住，当您有一个 ForeignCollection 字段时，集合中的类（在此示例中为 Order）必须具有用于具有该集合的类（在此示例中为 Account）的外部字段。如果 Account 有一个国外的 Orders 集合，那么 Order 必须有一个 Account foreign 字段。它是必需的，以便 ORMLite 可以找到与特定帐户匹配的订单。

我感到困惑的原因是因为我没有找到任何示例代码（在文档或示例项目中），其中“包含的类”引用了带有集合的类。它是口头描述的，但考虑到这种关系的性质 - 对于某些人来说，我认为在最初几次看到它时可能会有点难以理解。

正如上面原始问题中列出的*（这就是我最终得到尝试我偶然发现的解决方案的想法）*，下面的示例块**似乎是**在 OrmLite 中映射一对多集合关系的正确方法。

此外，还有一个关于集合持有者类需要如何设置到集合元素类中的注释。

* * *

以下是需要注意的主要步骤：

A. 在具有集合的类中*（在本例中为**DomainItem*** ） ，以这种方式注释集合字段：

`@ForeignCollectionField(eager = true)`

B. 在集合中包含的类中*（在本例中为**ContentItem*** ） ，您必须对包含该集合的父类有一个显式引用：

`@DatabaseField(foreign = true) protected DomainItem domainItem;`

C. 在持久化 ContentItem 之前，您必须将 DomainItem 保存到该 ContentItem 以便将外键设置回 DomainItem：

```
curContentItem.setDomainItem(curDomainItem);

contentItemDao.create(curContentItem);` 
```

*当我的收藏最初没有被检索到时，我发现了这一点。我查看了表中的 ContentItem，但从未在表中设置 DomainItem_id。*

例子：

```
public class DomainItem {

    @DatabaseField(generatedId = true)
    protected long id;

    @ForeignCollectionField(eager = false)
    protected ForeignCollection<ContentItem> contentItens;

    // ...
}

public class ContentItem {

    @DatabaseField(generatedId = true)
    protected long id;

    @DatabaseField(foreign = true)
    protected DomainItem domainItem;

    public void setDomainItem(DomainItem domainItem) {

       this.domainItem = domainItem;
    }
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-23T20:19:45.950

因此，异常消息旨在提供帮助。要引用它并删除类名：

> `ContentItem`字段列名的外部集合类`contentItens`不包含类的外部字段`PhytoterapicItem`

情况似乎如此。无论何时`ForeignCollection`，集合所包含的类都*必须*有一个外部字段返回到父类。

在您的情况下，`PhytoterapicItem`扩展`DomainItem`具有对象`ForeignCollection`的类。`ContentItem`这意味着`ContentItem`必须有一个外部字段类型`PhytoterapicItem`。否则，[ORMLite](http://ormlite.com/)将如何知道`ContentItem`表中的哪些项目与特定的`PhytoterapicItem`.

[外国集合文档](http://ormlite.com/docs/foreign-collection)中的示例`Account`和`Order`对象可能会对您的架构有所帮助。每个都有一个外来的对象集合。每当您查询一个单独的查询时，都会执行一个查找对应于特定对象的集合。这意味着每个人都必须有一个异物。`Account``Order``Account``Order``Account``Order``Account`

# asp.net-mvc - 在 ASP.NET MVC 中使用的简单语法荧光笔？

> ID：10287583
> 
> 赞同：2
> 
> 时间：2012-04-23T20:14:19.510
> 
> 标签：asp.net-mvc, editor, syntax-highlighting

网络上有很多 Syntax-Highlighter，但并不简单。有没有像stackoverflow一样的文件上传和codemirror的简单语法荧光笔。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T18:05:49.003

看看[http://oneqonea.blogspot.com/2012/04/how-do-i-add-syntax-highlighting-to-my.html](http://oneqonea.blogspot.com/2012/04/how-do-i-add-syntax-highlighting-to-my.html)

您可能能够收集到适合您的 ASP.NET MVC 实现所需的信息。本教程基本上说明了[http://alexgorbatchev.com/SyntaxHighlighter/](http://alexgorbatchev.com/SyntaxHighlighter/)必须提供的内容。

# java - 在 tomcat 中运行 maven Web 应用程序时出现 classnotfoundexception

> ID：10287584
> 
> 赞同：1
> 
> 时间：2012-04-23T20:14:23.530
> 
> 标签：java, maven, tomcat7

最近我编写了一个只有 index.jsp 和一个简单 servlet 的基本 Web 应用程序，代码如下： index.jsp

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>JSP Page</title>
</head>
<body>
    <h1>Hello W!</h1>
    <form action="Hello.do">
        <p>Wprowadź imię:   </p>
        <input type="text" name="imie"/>
        <input type="submit" value="OK"/>
    </form>
</body> 
```

在 web.xml 中有一个片段将 Hello.do 链接到 servlet HelloServlet.java：

```
<web-app>
  <display-name>Archetype Created Web Application</display-name>
    <servlet>
        <servlet-name>HelloServlet</servlet-name>
        <servlet-class>pl.helion.jeeweb.HelloServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>HelloServlet</servlet-name>
        <url-pattern>/Hello.do</url-pattern>
    </servlet-mapping>
</web-app> 
```

当然还有 pl.helion.jeeweb 包中的 servlet。但是当我启动应用程序时，填写表格并单击确定，我得到：

```
javax.servlet.ServletException: Error instantiating servlet class pl.helion.jeeweb.HelloServlet
    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:405)
...
root cause

java.lang.ClassNotFoundException: pl.helion.jeeweb.HelloServlet
    org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1678)
... 
```

那么怎么了？顺便说一句，对不起我的英语并感谢您的帮助；]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T21:23:14.697

我的问题是我的文件夹结构不好。默认情况下，包和 servlet 在文件夹资源中，我所要做的就是将其重命名为 java

# css - CSS 错误 - 没有痕迹

> ID：10287588
> 
> 赞同：1
> 
> 时间：2012-04-23T20:14:33.970
> 
> 标签：css, position, css-float

我们正在做一个网上商店，并创建了一个错误：

[http://konzolbazis.hu](http://konzolbazis.hu)

当你点击背景，然后点击右光标键，整个中间的内容会滑动...

试图找到问题的原因，但没有找到任何痕迹，浮动和定位不知何故搞砸了。

（我知道，css 很乱，客户的百万需求不断进行更改......但要清理代码。）

请帮忙。

编辑：使用 Firefox 11。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T20:26:24.247

你注意到屏幕底部的滚动条了吗？问题是，您在顶部菜单 ( `ul.sf-menu`) 内手动设置宽度。`<li>`标签内部是`<ul>`带有`width: 965px`. 删除它们，一切都会好起来的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T20:44:43.180

您必须了解`width:auto`将元素宽度设置为获取 Parent 的完整宽度并明确指定它会产生问题。如果您想设置宽度以使元素仅获取自身所需的空间而不是父级可用的空间，您可以考虑以百分比指定它，例如`width:78.33%`. 这确保元素采用`78.33%`父元素的宽度。容器宽度是手动设置的，需要更正。您需要将其设置为

`#container { width:auto; }`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T20:52:05.060

GOT IT:

was:

```
 .sf-navbar {
    height: 79px;
    position: relative;
  } 
```

should be:

```
.sf-navbar {
    display: block;
    height: 111px;
    overflow-x: hidden;
    position: relative;
    width: 980px;
} 
```

# macos - 应用程序不会从停靠图标退出，而是退出 qt

> ID：10287591
> 
> 赞同：0
> 
> 时间：2012-04-23T20:14:50.423
> 
> 标签：macos, qt, acrobat

我在应用程序的插件中使用 Qt。自从将 Qt 从 4.3.4 升级到 4.6.4 carbon 之后，Qt 似乎想要控制应用程序。为了重新获得菜单，我已经完成了

qApp->setAttribute(Qt::AA_MacPluginApplication,true);

但是，当我尝试从停靠图标关闭应用程序时，Qt 会退出而不是应用程序。

这怎么能纠正？

附加信息： - 显示/隐藏码头按预期工作。- ⌘Q 退出本机应用程序（如预期） - 从菜单退出退出本机应用程序（如预期） - Qt 4.6.4 cocoa 存在相同问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T16:20:15.887

这是 4.6 中引入的 Qt 错误。 [https://bugreports.qt-project.org/browse/QTBUG-8087?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel](https://bugreports.qt-project.org/browse/QTBUG-8087?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel)

幸运的是，有解决方法。

```
long refCon = 0;
AEEventHandlerUPP handler = NULL;
AEGetEventHandler(kCoreEventClass, kAEQuitApplication, &handler, &refCon, false);

QApplication::setAttribute(Qt::AA_MacPluginApplication, true);
int argc = 0;
(void)new QApplication(argc, 0, true);

if (handler)
{
    AEInstallEventHandler(kCoreEventClass, kAEQuitApplication, handler, refCon, false);
} 
```

# javascript - $.getJSON 在 for 循环中调用行为不端

> ID：10287594
> 
> 赞同：1
> 
> 时间：2012-04-23T20:14:57.170
> 
> 标签：javascript, json, flickr

这是我的问题的描述：

我有一个数组，其中包含一些 flickr 照片集的 id。对于每个 id，我需要制作两个嵌套的 apiCalls（一个到 flickr photoset api，一个到 photoinfo api）并将一些 html 添加到我的页面

结构是：

```
for(var i=0; i<ARRAY_ID.length; i++){

    $.getJSON(apiCall, function(data) {
         // some processing here

         $.getJSON(apiCall2,function(data){
              //other processing here 
```

每个“apiCall”都是一个字符串，其中包含对照片集 api (apiCall) 的正确调用，然后是对 photoInfo api (apiCall2) 的正确调用

在所有这些处理之后，在“apiCall2”块内，我将一些 html 附加到一个 div （这导致与 ARRAY_ID 长度一样多的块元素）。

我有奇怪的行为：所有附加的块元素都包含相同的文本、图片和链接。它以预期的数量将它们打印出来，但它们的内容都是相同的。我猜这是 for 循环不等待 $.getJSON 完成。我怎样才能做到这一点？我严格要求在处理下一个请求之前完成每个 json 请求！谢谢大家！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T20:36:37.653

您似乎有 2 个不同但相关的问题。

* * *

> 所有附加的块元素都包含相同的文本、图片和链接。它以预期的数量将它们打印出来，但它们的内容都是相同的。

如果您在`i`回调中引用，则需要将其包含在`for`. 否则，由于`$.getJSON`是异步的，`for`将在调用回调之前完成，并且`i`始终是循环中的最后一个值 -- `ARRAY_ID.length`：

```
for(var i = 0; i < ARRAY_ID.length; i++) {
    (function (i) {
        // work with the local `i` rather than the shared `i` from the loop
    })(i);
} 
```

* * *

> 我猜这是 for 循环不等待 $.getJSON 完成。我怎样才能做到这一点？我严格要求在处理下一个请求之前完成每个 json 请求！

你不能让`for`每组都“等待”`$.getJSON`完成。但是，您可以使用`for`循环和闭包来构建一个[queue](http://api.jquery.com/queue/)，它会一直等待，直到您明确告诉它`next`继续：

```
var focus = $(...); // either match an existing element or create one: '<div />'

for(var i = 0; i < ARRAY_ID.length; i++) {
    (function (i) {
        focus.queue('apicalls', function (next) {
            $.getJSON(apiCall, function(data) {
                 // some processing here

                 $.getJSON(apiCall2,function(data){
                      //other processing here

                      next(); // start the next set of api calls
                 });
            });
        });
    })(i);
}

focus.dequeue('apicalls'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T20:31:36.830

这是闭包的常见问题。您的回调从包含 for 循环的函数的上下文中继承变量（我将其称为主函数）。试试这个：

```
for(var i=0; i<ARRAY_ID.length; i++){

    $.getJSON(apiCall, (function(i, v1, v2, etc) { return function(data) {
        // some processing here

        $.getJSON(apiCall2,function(data){
        //other processing here
    })(i, v2, v3, etc));
} 
```

基本上，现在您正在更改闭包从中访问变量的上下文。您创建一个匿名函数并传递您从主函数访问的所有变量。在示例中，我传递了变量 i，而 v1、v2 等表示您可能正在访问的其他变量。

通过为每个闭包调用创建正确的上下文，您应该能够解决这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T20:32:08.873

很可能是范围问题。

如果您传递给 getJSON 方法的回调使用`i`循环的变量，那么它们很可能都使用`i`.

解决方案是

```
function handleJsonRequests(index,id){
 // use index instead of i
 // use id instead of ARRAY_ID[i]

 $.getJSON(apiCall, function(data) {
         // some processing here

         $.getJSON(apiCall2,function(data){
              //other processing here

}// end of function

for(var i=0; i<ARRAY_ID.length; i++){
    handleJsonRequests(i, ARRAY_ID[i]);
} 
```

# c++ - 仅通过修改比较使 qsort 稳定？

> ID：10287599
> 
> 赞同：2
> 
> 时间：2012-04-23T20:15:11.127
> 
> 标签：c++, c, sorting, qsort, stable-sort

> **可能重复：**
> [稳定标准库 qsort？](https://stackoverflow.com/questions/584683/stabilizing-the-standard-library-qsort)

是否可以仅通过修改我的 comp op 来使整数的 qsort 稳定？那是我的代码。我在大约 5-7 大小的非常小的数组上使用它。

```
static int compare( const void *a, const void *b )
{
    const int A(*(const int*)(a));
    const int B(*(const int*)(b));

    return B - A;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T20:21:26.323

如果您使用 C++，则[stable_sort](http://www.cplusplus.com/reference/algorithm/stable_sort/)函数是稳定的并且具有 O(nlogn) 性能。

否则，就地快速排序本质上是不稳定的（我相信如此）。然而，使用额外数组存储信息的简单变体是稳定的。

我已经使用了至少一个`qsort()`不稳定的版本，因为一旦我发现我的机器上的一个输入案例产生的结果`qsort()`和`stable_sort()`为我的机器上的输入案例产生的结果是不同的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T20:24:44.933

您不能仅通过更改比较运算符来采用诸如快速排序之类的不稳定排序算法并使其稳定。您必须*从*稳定的排序算法开始，然后比较无关紧要（只要它是 C++ 中的严格弱排序）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T20:44:13.910

如果您要排序的数组真的很小，那么您最好使用另一种排序算法。参见例如答案：[小型数组（32 或 64 个元素以下）的快速稳定排序](https://stackoverflow.com/questions/1276716/fast-stable-sort-for-small-arrays-under-32-or-64-elements)和[对非常小的列表进行排序的快速算法实现](https://stackoverflow.com/questions/2748749/fast-algorithm-implementation-to-sort-very-small-set)。

# pdf - 与所有操作员一起显示 PDF

> ID：10287602
> 
> 赞同：2
> 
> 时间：2012-04-23T20:15:16.993
> 
> 标签：pdf

有谁知道在 OSX（雪豹）上运行的免费 PDF 检查器工具。

我需要以纯文本形式显示 PDF，包括它的运算符。因此，该工具应将 PDF 中的所有对象（平面编码）解码为纯文本，包括其运算符。

原因是：我试图从 iPhone 应用程序内的 PDF 中提取所有文本。我可以很好地做到这一点。但我不知道 PDF 中使用了哪些运算符。这导致提取的字符串没有任何空格，我需要知道文档中使用了哪些运算符，以便找出哪个运算符应该代表空格。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T00:18:48.110

另一个可供您选择的工具可能是 Jay Berkenbilt 的[**QPDF**](http://qpdf.sf.net/)（它是开源软件，可在所有主要操作系统平台上使用）。

引用：*“QPDF 是一个命令行程序，可以对 PDF 文件进行结构性、内容保留的转换。”*

要展开 中的所有流`input.pdf`，请运行此命令并`output.pdf`在文本编辑器中打开：

```
qpdf --qdf input.pdf output.pdf 
```

[![QPDF 帮助屏幕的开始](../Images/a767e9fb841877a65c620e7a9953a4af.png)](https://i.stack.imgur.com/coCKR.jpg)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T20:55:01.720

尝试使用[PDF Vole](http://java.net/projects/pdfvole)。它是开源的（建立在 iText 之上）并且基于 Java，因此它应该可以在 OS X 上运行。

# ios - 如何让我的 UIImageView 在具有固定宽度的同时自动缩放？

> ID：10287606
> 
> 赞同：0
> 
> 时间：2012-04-23T20:15:42.017
> 
> 标签：ios, uiimageview

我有很多不同大小的图像要在 UIScrollView 中显示。我总是希望图像以 300px 宽和可变高度显示（以保持纵横比）。

我尝试了很多东西，但没有任何效果。我要么把图像从侧面剪掉，要么被压扁。

有任何想法吗？

非常感谢任何代码或示例！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T20:21:57.327

```
UIImage* image = [UIImage imageNamed: @"img.jpg"]; 
```

...在哪里`image`，比方说 1280 * 720px

300/1280 = 0.234375

这是我们将使用并乘以高度的比例因子，以匹配您的目标宽度 300 像素。

0.234375 * 720 = 168.75px 高度

因此，我们的 1280 * 720px 图像变为 300 * 169px。（四舍五入）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T21:02:18.737

iOS 中有一些内置函数允许您查看图像数据（请查看[Apple 关于 CGImage 的开发人员说明](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CGImage/Reference/reference.html)。例如，如果您有

```
UIImage *imageObj = [UIImage imageNamed:@"whatever.png"]; 
```

您可以找到高度和/或宽度 CGGetImageWidth/CGGetImageHeight：

```
size_t pixelsWide = CGImageGetWidth(imageObj.CGImage);
size_t pixelsHigh = CGImageGetHeight(imageObj.CGImage); 
```

# c++ - “已在 .obj 中定义”错误，Visual Studio C++？

> ID：10287607
> 
> 赞同：1
> 
> 时间：2012-04-23T20:15:42.067
> 
> 标签：c++, visual-studio-2010

```
1>knightTour_Main.obj : error LNK2005: "int p" (?p@@3HA) already defined in Definitions.obj
1>knightTour_Main.obj : error LNK2005: "int q" (?q@@3HA) already defined in Definitions.obj 
```

错误^

这是我在头文件中定义的代码：

```
#include<iostream>
using namespace std;
int p,q;

int f( int,  int,const int [][8],const int [][8], int [],int []); 
```

我试过了

```
extern int p,q; 
```

但在那之后我得到了这个错误

```
1>knightTour_Main.obj : error LNK2001: unresolved external symbol "int p" (?p@@3HA)
1>knightTour_Main.obj : error LNK2001: unresolved external symbol "int q" (?q@@3HA) 
```

你还有什么推荐的吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T19:52:53.210

替换`int p,q;`为`extern int p,q;`正确，但您还需要包含`int p,q;`在一个 .cpp 文件中

如果您`int p,q;`在标头中有定义 ( )，那么您将获得一份并为包含该标头的每个文件分配一份副本`p`，`q`并且它们会发生冲突（“已定义”错误）。如果您将其替换为声明 ( `extern int p,q;`)，则您不会在任何地方获得`p`或`q`分配。

# prototypejs - 原型新元素名称

> ID：10287617
> 
> 赞同：0
> 
> 时间：2012-04-23T20:16:12.903
> 
> 标签：prototypejs, element

每次我用原型定义一个新元素时，例如：

```
var iframe = new Element('iframe', {
    name: 'preview_frame',
    id: 'preview_frame',
    src: 'form/' + formID + '?prev',
    allowtransparency: true,
    frameborder: 0
}) 
```

当我在属性列表中包含“名称”字段时，我得到一个 DOM 异常 5

但是，当我这样做时：

```
var iframe = new Element('iframe', {
    id: 'preview_frame',
    src: 'form/' + formID + '?prev',
    allowtransparency: true,
    frameborder: 0
})
iframe.name = 'preview_frame'; 
```

然后我没有得到错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T02:04:30.017

在您的浏览器中，“名称”可能是 JavaScript 中的保留字（或踩到另一个属性）。

为了在对象文字声明中为保留字指定对象属性，请将其放在引号中，如下所示：

```
var iframe = new Element('iframe', {
   "name": 'preview_frame',
   "id": 'preview_frame',
   "src": 'form/' + formID + '?prev',
   "allowtransparency": true,
   "frameborder": 0
}) 
```

请注意，虽然您不必将所有属性都放在引号中，但您可以。请参阅有关保留字的 Mozilla 文档，了解如何绕过它：[Mozilla JS Reserved Words](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Reserved_Words "JavaScript 保留字")

# python - 构建基于 Python 的测试运行程序以执行基于 C 的代码

> ID：10287618
> 
> 赞同：0
> 
> 时间：2012-04-23T20:16:13.450
> 
> 标签：python, unit-testing

那么动机是python测试运行器具有类似于[nose的功能的想法](http://readthedocs.org/docs/nose/en/latest/)

不同之处在于它能够运行 C 单元测试。我还没有找到类似的东西。以下是测试运行器的一些要求。

1.  测试运行器负责运行一系列测试并为所有测试收集结果。
2.  testrunner应该支持多种测试方法（包括self-describing、reftest和script）
3.  必须能够根据清单文件自动加载测试。
4.  测试运行者必须能够巧妙地排序测试用例
5.  测试运行器必须允许测试以随机顺序和重复运行
6.  测试运行器必须允许完整和部分执行测试
7.  必须可以创建在各种平台上工作的测试运行器
8.  测试运行器必须提供某种方式来输出收集的结果
9.  测试运行器必须允许自动和手动收集上下文信息
10.  测试运行者必须在收集的结果中包含上下文信息
11.  测试运行者必须支持正负测试
12.  测试运行者必须支持基于时间的信息的测试
13.  测试运行者必须允许测试自动报告其结果
14.  测试运行者必须允许人工报告手动测试结果
15.  测试运行程序必须允许人类运行 reftests
16.  测试运行者应该允许人类评论测试结果
17.  测试运行器必须允许在较小的测试上创建测试
18.  测试运行程序必须可供外部实体和个人使用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T20:37:52.603

与其自己做所有这些（一项艰巨的工作），不如使用`py.test`? 它是一个强大的测试运行器，等等。它开箱即用满足您的大部分要求（嗯，那些很清楚 - 有些对我来说没有多大意义），并且可以定制，足以添加您需要的任何东西。

然而，杀手级功能是他们积极开发并记录了一种方法来做到这一点：[使用非 python 测试](http://pytest.org/latest/example/nonpython.html)。那里的例子很少，但API似乎足够强大。事实上，您不会是第一个使用此功能的人（为您提供另一个信息来源）——有人已经用它构建了一个[JavaScript 测试框架](http://pypi.python.org/pypi/oejskit)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-22T13:43:46.593

比已经提出的 py.test 更好的解决方案是 PySys System Test Framework，它解决了上述几乎所有问题，并且您可以非常轻松地扩展以实现尚未涵盖的少数问题

您将不得不编写一个通用的“执行”方法，将 C 测试作为外部进程启动，然后对一个字符串进行 grep，该字符串通常表明它正在通过。它不超过 15 行代码。

该框架将为您完成剩下的工作

# java - ANTLR 仅匹配流中的特定字符串并忽略其余字符串

> ID：10287620
> 
> 赞同：1
> 
> 时间：2012-04-23T20:16:32.733
> 
> 标签：java, antlr, antlr3

首先，我是 ANTLR 的新手。我问的对你们其他人来说可能是微不足道的，但我需要你的帮助。

我想匹配流中的所有限定名称，并忽略流中的其余字符。

我尝试了以下方法：

```
findAllQualifiedNames
    :   qualifiedName+
    ;

qualifiedName 
    :   IDENTIFIER
        ('.' IDENTIFIER)*
    ;

IDENTIFIER
    :   ('_'
    |   '$'
    |   ('a'..'z' | 'A'..'Z'))
        ('a'..'z' | 'A'..'Z' | '0'..'9' | '_' | '$')*
    ;
AnyOtherChar
    :   . 
    {$channel=HIDDEN;}
    ; 
```

但它没有按我预期的方式工作：对于 input ，它仅作为限定名称`a.b.c;d.e.f;`匹配。`a.b.c`我得到了错误：

> 没有可行的替代方案；

**编辑：**

对于上面的语法，我尝试了以下输入：abc; 定义；.. {xy;}

我希望匹配`a.b.c, d.e.f`and `x.y`，但我得到以下信息：

![Eclipse 插件解释器](../Images/ec339939510b4ee2bf65627f3396dbef.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T21:17:34.517

> 但它没有按我预期的方式工作：对于输入 abc;def;，它只匹配 abc 作为限定名。我得到了错误：...

我无法重现。

使用 ANTLRWorks 1.4.3 中的调试器，我得到以下解析树：

![在此处输入图像描述](../Images/dc4dd2d2b732569b2669e7b7006e793b.png)

*（如您所见，输出屏幕（左下角）上没有打印错误/警告）*

当然，您需要考虑字符串文字中的文本和“看起来”像限定名称的注释，但我在[您之前的问答](https://stackoverflow.com/questions/9878528/replace-token-in-antlr)中展示了这一点（我将最后一条评论更多地发布给可能认为它的未来读者*很*容易从 Java 源文件中获取所有限定名称）。

## 编辑

`a.b.c; d.e.f; .. {x.y;}`产生错误的事实是因为`.`那里有两个（点）。点被单独标记，而不是作为`AnyOtherChar`标记。

在解析器规则中定义文字标记（就像您在 in 中所做的`'.'`那样`qualifiedName`）***不会***导致这些标记仅在那些解析器规则中创建。以下两个语法是相同的：

### 1

```
qualifiedName : IDENTIFIER ('.' IDENTIFIER)*;
IDENTIFIER    : ('_' | '$' | 'a'..'z' | 'A'..'Z')+; 
```

### 2

```
qualifiedName : IDENTIFIER (DOT IDENTIFIER)*;
IDENTIFIER    : ('_' | '$' | 'a'..'z' | 'A'..'Z')+;
DOT           : '.'; 
```

# java - Android 如何同步两个异步任务？

> ID：10287628
> 
> 赞同：8
> 
> 时间：2012-04-23T20:17:44.500
> 
> 标签：java, android

我需要组合两个列表，每个列表在其单独的异步调用之后返回。如何最好地协调这样的异步调用。是否有任何标准的 SDK 方法可以等待另一个异步任务完成？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T01:38:36.353

`execute()`call 返回一个 的实例`AsyncTask`，你可以保存这个实例以供以后检查，如果任务已经完成或没有调用`getStatus()`，所以你的代码将如下所示：

```
final AsyncTask<...> first_task;
final AsyncTask<...> second_task;

public someMethod() {
    first_task = new MyFirstAsyncTask().execute();
    second_task = new MySecondAsyncTask().execute();
    // other things
}

private class MyFirstTask extends AsyncTask<...> {
    // business as usual

    protected void onPostExecute(SomeData[] result) {
        if( second_task != null && second_task.get_status() == AsyncTask.Status.FINISHED ) {
            // start the task to combine results
            ....
            //
            first_task = second_task = null;
        }
    }
}

private class MySecondTask extends AsyncTask<...> {
    // business as usual

    protected void onPostExecute(SomeData[] result) {
        if( first_task != null && first_task.get_status() == AsyncTask.Status.FINISHED ) {
            // start the task to combine results
            ....
            //
            first_task = second_task = null;
        }
    }
} 
```

最后完成的任务可以启动新任务以合并结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T20:39:04.537

Java 有一些不错的东西，例如 Future 类等。在这里描述这个框架没有用，网上有很多资源。无论如何，拥有一个异步任务可能会更好，实际上不需要同时运行两个异步任务。您可以在一个 doInBackground 中完成这两个部分

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T08:16:26.947

这真的取决于需要。

您是否需要等待所有数据到达？如果不只是在您的活动中使用同步块功能调用您的功能

如果是，您是否希望它们只工作一次？因此总共有两个（或 X）？也许你可以检查：CoundDownLacth (http://developer.android.com/reference/java/util/concurrent/CountDownLatch.html)

# python - gevent StreamServer.start() 似乎没有达到我的预期

> ID：10287629
> 
> 赞同：6
> 
> 时间：2012-04-23T20:17:51.457
> 
> 标签：python, networking, concurrency, gevent

我正试图围绕[gevent](http://www.gevent.org "事件")使用的概念来思考。这是来自 gevent 代码存储库的示例。这是一个简单的回声服务器。

```
from gevent.server import StreamServer

# this handler will be run for each incoming connection in a dedicated greenlet
def echo(socket, address):
    print ('New connection from %s:%s' % address)
    socket.sendall('Welcome to the echo server! Type quit to exit.\r\n')
    # using a makefile because we want to use readline()
    fileobj = socket.makefile()
    while True:
        line = fileobj.readline()
        if not line:
            print ("client disconnected")
            break
        if line.strip().lower() == 'quit':
            print ("client quit")
            break
        fileobj.write(line)
        fileobj.flush()
        print ("echoed %r" % line)

if __name__ == '__main__':
    # to make the server use SSL, pass certfile and keyfile arguments to the constructor
    server = StreamServer(('0.0.0.0', 6000), echo)
    # to start the server asynchronously, use its start() method;
    # we use blocking serve_forever() here because we have no other jobs
    print ('Starting echo server on port 6000')
    server.serve_forever() 
```

这看起来很简单，而且我很有效。但是，正如评论中所说，这`serve_forever()`是一个阻塞功能。如果我将最后一行更改`server.start()`为程序将在每行执行一次后停止。我做错了什么，但文档不是很有帮助。

[在使用 gevent 实现服务器](http://www.gevent.org/servers.html)的文档部分中，它说 using`start()`应该在使用以下代码时为每个新连接生成一个新的 greenlet：

```
 def handle(socket, address):
     print 'new connection!'

 server = StreamServer(('127.0.0.1', 1234), handle) # creates a new server
 server.start() # start accepting new connections 
```

然后在它说`The server_forever() method calls start() and then waits until interrupted or until the server is stopped.`我应该如何运行服务器以`start()`使其实际上保持活动状态以捕获第一个连接之后？

还：

1.  `start()`和 和有什么不一样`serve_forever()`？
2.  在什么情况下我应该选择其中之一？
3.  使用第一种方法时是否需要调用`gevent.spawn()`，`gevent.joinall()`但不知何故如此明显，以至于它们已被排除在 StreamServer 文档之外？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-24T06:42:59.703

1.  start() 是一个异步函数，它将服务器置于侦听模式。它不会阻止您的程序退出，这是您的责任。
2.  在简单的情况下，您可以使用 serve_forever()。当您需要启动多个服务器或除了启动服务器之外还需要执行其他操作时，start() 会变得很有用。
3.  不， gevent.spawn() 和 gevent.joinall() 与服务器无关。

对于[gevent 1.0](https://github.com/surfly/gevent/downloads)，实际上最好使用 gevent.wait() 阻塞直到没有更多的活动连接/greenlets/listeners/watchers。

这是一个示例：[https ://github.com/gevent/gevent/blob/master/examples/portforwarder.py](https://github.com/gevent/gevent/blob/master/examples/portforwarder.py)

# ruby-on-rails - ActiveRecord 关联 country_code:string 而不是 country_id

> ID：10287632
> 
> 赞同：3
> 
> 时间：2012-04-23T20:17:59.340
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

我有一个像这样的当前城市和国家模型

```
# City model
city:string
country_code:string

# Country model
country:string
country_code:string 
```

我正在尝试使用 country_code 作为 foreign_key 而不是使用默认的 country_id 在两个模型之间创建关联。

```
# city.rb
belongs_to :country, :foreign_key => "country_code"

# country.rb
set_primary_key :country_code
has_many :cities, :foreign_key => "country_code" 
```

此查询不起作用

```
ruby-1.9.2-p290 :016 > Country.where(:country_code => "uy").cities
NoMethodError:   Country Load (0.2ms)  SELECT "countries".* FROM "countries" WHERE     "countries"."country_code" = 'uy'
undefined method `cities' for #<ActiveRecord::Relation:0x007f8e92ca0df0>
from /Users/pel/.rvm/gems/ruby-1.9.2-p290/gems/activerecord-    3.2.3/lib/active_record/relation/delegation.rb:45:in `method_missing'
from (irb):16
    from /Users/pel/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.2.3/lib/rails/commands/console.rb:47:in `start'
from /Users/pel/.rvm/gems/ruby-1.9.2-p290/gems/railties-3.2.3/lib/rails/commands/console.rb:8:in `start'
from /Users/pel/.rvm/gems/ruby-1.9.2-p290/gems/railties-    3.2.3/lib/rails/commands.rb:41:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T20:33:47.233

试试这个：

```
Country.where(:country_code => "uy").collect(&:cities) 
```

**你缺少什么：**

检查此错误：

```
 undefined method `cities' for #<ActiveRecord::Relation:0x007f8e92ca0df0> 
```

其中条件返回一个对象数组。例如（考虑到存在 1 个 id，在某些情况下）

```
 Country.first // will return an object or nil

 Country.find(1) // will return an object or will throw an exception

 Country.where(:id=> 1) // will return an array of only one object with id 1 
```

所以

```
 Country.find(1) IS NOT EQUAL TO Country.where(:id=> 1) 
```

但

```
 Country.find(1) IS EQUAL TO Country.where(:id=> 1).first 
```

以上就是基础知识。所以问题是

```
Country.where(:country_code => "uy") 
```

将返回一个数组，然后您尝试将“城市”映射应用于实际上不存在的该数组。因此，您需要做的是“收集”，它将遍历该数组中的所有对象，然后找出每个“国家”对象的城市并返回另一个**数组数组**。

**还有一点需要注意：**

```
 Country.where(:country_code => "uy") 
```

将返回一个类似这样的数组：

```
['a','b','c','d'] 
```

但

```
Country.where(:country_code => "uy").collect(&:cities) 
```

将返回一个数组，如：

```
 [[1,2,3,4],[2,3,6,8],[8],[10]] ie an array of an array. 
```

所以你需要像这样展平它：

```
 Country.where(:country_code => "uy").collect(&:cities).flatten 
```

然后，如果您需要唯一的城市（如果需要，根据记录，我认为您不需要这种情况），您可以将 .uniq 添加到数组中。

# jquery - 使用 jquery ajax 加载页面

> ID：10287635
> 
> 赞同：0
> 
> 时间：2012-04-23T20:18:05.353
> 
> 标签：jquery, struts2

我想使用 JQuery ajax 加载页面的一部分。

url 是 Struts2 动作请求。

```
$("#accountListDiv").html(ajax_load).load(url, $("#testform").serializeArray(),   function(){
    //alert('done');
}); 
```

//serializeArray 和序列化不起作用。（可能是 struts 操作确实期望这些函数生成格式的数据。对此问题的更多见解将有所帮助）。

在正常 HTTP 请求的情况下，Struts2 动作中的所有变量都将自动分配在 JSP 页面中输入的值。

我想在使用 Ajax 时做同样的事情。我不想像这样明确地传递表单中的每个参数。

```
$("#indexDiv").html(ajax_load).load(url, "rateTypeId4Index="+rateTypeId4Index, function(){
    xyz();
}); 
```

我知道有用于 struts 的 Dojo 插件，但它已被弃用。如果我能够使用 JQuery 解决这个问题，那么它对我来说就绰绰有余了。

（我正在寻找不涉及使用 JQuery-struts 插件的解决方案）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T21:22:02.383

我相信你的意思是使用`serialize`而不是`serializeArray`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T05:48:31.323

1 您在发送请求时遇到问题，而不是在 Struts2 部分。尝试设置参数映射而不是字符串。

```
$("#accountListDiv").html(ajax_load).load(url, {'param1':value1, 'param2':value2},   function(){
    //alert('done');
}); 
```

2 如果您想使用 ajax 提交表单，请使用[Jquery Form](http://jquery.malsup.com/form/#download)插件。

```
 $("#testform").ajaxSubmit({
      type: "POST",
      success: function(data) {
        $('#accountListDiv').html(data);
        alert('Yeh-ha!');        
      },
      error: function(request, textStatus, errorThrown) {
        alert('Oops');
      }}
  ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T22:21:33.640

我在 JQuery 和 Struts2 中使用了以下内容：

```
<script>

    function bindDivFormSubmission(theDiv) {

        /* get the form from the div and unbind it */
        var theForm = theDiv.find('form');
        theForm.unbind();

         /* attach a submit handler to the form */
        theForm.submit(function(event) {

            /* stop form from submitting normally */
            event.preventDefault(); 

            var url = theForm.attr( 'action' ),
                formData = theForm.serialize();

            /* Send the data using post and put the results in a div */
            $.post( url, formData,
              function( data ) {
                  theDiv.html( data );
                  bindDivFormSubmission(theDiv);
              }
            );

        });

    }

    var accountListDiv = $("#accountListDiv");

    bindDivFormSubmission(accountListDiv);

</script> 
```

您可能会注意到它递归调用“bindDivFormSubmission(theDiv);” 更换div后。这是因为在我的使用中，div 被替换为需要绑定的另一种形式。

# c# - ASP.net 与 C# 在回发时保持列表

> ID：10287643
> 
> 赞同：6
> 
> 时间：2012-04-23T20:18:58.097
> 
> 标签：c#, asp.net, postback

我的情况是这样的：当用户按下添加按钮时，我有这些列表，其中插入了数据，但我猜在回发时列表被重新归零。你如何保存它们？我一直在寻找答案，但我想我不太明白如何使用会话等。

我对 ASP.net 很陌生，而且似乎用 C# 也好不到哪里去。

```
public partial class Main : System.Web.UI.Page
{

 List<string> code = new List<string>();

protected void Page_Load(object sender, EventArgs e)
{
    //bleh   

}

protected void cmdAdd_Click(object sender, EventArgs e)
{

    code.Add(lstCode.Text);
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-23T20:26:35.653

只需使用此属性来存储信息：

```
public List<string> Code
{
    get
    {
        if(HttpContext.Current.Session["Code"] == null)
        {
            HttpContext.Current.Session["Code"] = new List<string>();
        }
        return HttpContext.Current.Session["Code"] as List<string>;
    }
    set
    {
        HttpContext.Current.Session["Code"] = value;
    }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T20:22:02.853

这在 ASP.NET 中很奇怪。*每当您以编程方式将项目添加到集合控件（列表框、组合框）时，您必须在每次回*发时重新填充该控件。

 *这是因为 Viewstate 只知道在页面渲染周期中添加的项目。在客户端添加项目只在第一次有效，然后项目就消失了。

尝试这个：

```
public partial class Main : System.Web.UI.Page
{

        protected void Page_Load(object sender, EventArgs e)
        {
            if (!IsPostBack)
            {
                 Session["MyList"] = new List<string>();
            }   
            ComboBox cbo = myComboBox; //this is the combobox in your page
            cbo.DataSource = (List<string>)Session["MyList"];
            cbo.DataBind();
        }

        protected void cmdAdd_Click(object sender, EventArgs e)
        {
            List<string> code = Session["MyList"];
            code.Add(lstCode.Text);
            Session["MyList"] = code;  
            myComboBox.DataSource = code;
            myComboBox.DataBind();
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T20:24:56.543

您不能在回传之间保留值。

您可以使用 session 来保留列表：

```
// store the list in the session
List<string> code=new List<string>();

protected void Page_Load(object sender, EventArgs e)
{
 if(!IsPostBack)
  Session["codeList"]=code;

}
 // use the list
void fn()
{
 code=List<string>(Session["codeList"]); // downcast to List<string> 
 code.Add("some string"); // insert in the list
 Session["codeList"]=code; // save it again
} 
```*

# asp.net-mvc - 在 POST 上重复数据验证

> ID：10287647
> 
> 赞同：0
> 
> 时间：2012-04-23T20:19:12.300
> 
> 标签：asp.net-mvc, asp.net-mvc-3, security

我有一个困扰我很长一段时间的问题。也就是说，我正在为某个组织开发一个网站，公民和其他法人实体将输入大量数据。就此而言，我想尽可能地保护应用程序免受用户条目和某种故障或恶意使用的影响。

思路如下。我有一个实体，我们称它为 EntityA，它是 EntityB 的父级。两个实体都将唯一标识符 (GUID) 作为其在数据库中的数据类型（主键）。EntityB 有一个指向 EntityA 的外键。当执行 Create 操作的 HTTP GET 版本时，会检查以下规则并且**必须**满足所有三个规则：

1.  传递给操作的 ID 不得等于 Guid.Empty（此 ID 是 EntityA.Id 中的值）
2.  EntityA 必须存在（EntityA.Id == ID）
3.  EntityB 不能存在（EntityA 和 EntityB 只能是一对一的关系）。

当向用户显示数据输入屏幕时，这一切都很好。我的问题是，我应该在 POST 上再次执行检查吗？如果我有一个恶意用户，他/她可以使用 Fiddler 作为代理，并在让数据通过应用程序之前更改数据。因此，可以在 POST 上规避上述规则。有没有人对上述情况有一个好的策略？我应该再次重新检查这些值（再次返回数据库以执行相同的检查）还是应该尝试存储，例如 TempData 中的 ID 并在 POST 上再次访问它以将该 ID 与传递给操作的 ID 进行比较，或者添加到EntityB模型？有一个更好的方法吗？

因此，目标是避免重复代码并创建安全代码。

编辑：最好避免再次访问数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T21:38:55.340

您必须`EntityA`再次检查是否存在（据我所知，不存在 an `EntityB`）。

**至于代码重复：**检查可以很容易地重构为一个统一的方法。

**至于性能：**首先，您必须意识到安全性是最高优先级，如果它涉及对数据库的额外打击 - 就这样吧。*话虽如此，*肯定有一些好的解决方案可以避免这种打击。例如，将 ID（您在第一阶段发现的合法）保存在`Cache`对象中。

*注意：*根据您的问题，我认为您的 GUID 是“秘密”的。即其他用户看不到他们。如果不是这种情况，我认为您应该添加一个额外的检查，以验证传递的 ID 确实“属于”经过身份验证的用户。

# c# - 在检查取消时让后台工作人员进入睡眠状态

> ID：10287650
> 
> 赞同：5
> 
> 时间：2012-04-23T20:19:25.320
> 
> 标签：c#, wpf, multithreading, backgroundworker

我有一个后台工作人员，它通过 ReportProgress 定期更新 GUI。

更新会定期进行，例如每 5 秒一次，也可以是 20 秒一次。为了在设定的时间执行更新，我让工作进程休眠一段时间，当它醒来时，它会用新信息更新 GUI。

工作人员支持取消，并且在睡眠之外它可以正确取消。

我希望能够在等待期间调用取消，但是将线程发送到睡眠状态使这成为不可能。

我假设我必须调用一个循环并检查取消作为循环的一部分来模拟线程睡眠。

实现这一目标的最佳方法是什么，我的时间完全与我的尝试无关。

```
 long counter = 0;
            long sleepfor = timelinespeed*1000;
            int timelinespeed = 10;

                while (counter != sleepfor)
                {

                    Thread.Sleep(1);

                    counter++;

                    if (bkgwk.CancellationPending)
                    {
                        cancelled = true;
                        e.Cancel = true;
                        bkgwk.Dispose();
                        break;
                    }

                } 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-23T20:25:58.567

你走错了路。

*   Bgw 正在使用 ThreadPool，因此应该用于（相对）较短的操作，通常在 0.5 秒以下。不建议无限期地保留一个。
*   你几乎不应该`Sleep()`在任何线程上使用。当然不会超过几毫秒。
*   `Sleep(1)`在忙碌等待中使用 5 秒是对 CPU 的极大浪费。你正在伤害你的其他线程。至少考虑将其提高到`Sleep(100)`左右。找到您允许取消的最大延迟。

作为解决方案：使用计时器。你有一个周期性的任务，使用正确的工具。

用于`System.Threading.Timer`基于 ThreadPool 的后台工作。通过 Dispatcher.Invoke() 更新 GUI。

使用`Dispatcher.Timer`来在主线程上执行一小部分（不到 0.1 秒）的工作。您可以直接更新 GUI。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T20:28:46.737

您可以使用[ManualResetEvent](http://msdn.microsoft.com/en-us/library/system.threading.manualresetevent.aspx)来允许您的线程在没有轮询的情况下等待，并允许另一个线程随时唤醒它。

与任何其他线程同步对象一样，该`ManualResetEvent`对象具有`WaitOne`可以等待事件设置或超时的方法。所以通常你可以`WaitOne`等待你想要等待的数量（这将像 a 一样工作`Thread.Sleep`）但是主线程可以随时唤醒后台线程。

```
ManualResetEvent backgroundWakeEvent = new ManualResetEvent(false);
....
bkgwk.CancelAync();
backgroundWaitEvent.Set();
....
backgroundWakeEvent.WaitOne(5000);

if (bkgwk.CancellationPending)
{
    cancelled = true;
    e.Cancel = true;
    bkgwk.Dispose();
    break;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-23T20:56:15.583

或者更好的是，使用[Reactive Extensions 框架](http://msdn.microsoft.com/en-us/data/gg577609)并让“工作人员”观察一系列间隔事件。然后可以轻松地处理流以停止生成新事件，从而终止工作人员。将此与取消一次性使用相结合，您可以使用一个一次性使用来停止间隔计时器和任何工作人员的工作：

```
var cancel = new BooleanDisposable();
var subscription = Observable.Interval(TimeSpan.FromSeconds(20))
                             .ObserveOn(Scheduler.DispatcherScheduler)
                             .Subscribe(i => PerformWorkOnUI(cancel));
var uiWork = new CompositeDisposable(cancel, subscription); 
```

要取消计时器事件流，您只需处理复合取消/订阅：

```
uiWork.Dispose(); 
```

**澄清：** `ObserveOn(Scheduler.DispatcherScheduler)`确保将在调度程序线程上调用订阅。

# ajax - 浏览器是否使用 CA 为 CORS Ajax 请求验证 SSL 密钥？

> ID：10287651
> 
> 赞同：0
> 
> 时间：2012-04-23T20:19:26.900
> 
> 标签：ajax, ssl, cors

iPad 浏览器是否会在 Ajax 请求期间寻找服务器提供的 SSL 密钥的 CA 识别？

我正在开发的移动应用程序将使用[PhoneGap](http://phonegap.com/)，这意味着在加载其他资源时已经加载了主页。因此，对服务器的 Ajax 请求本质上是基于 SSL 的 CORS。

我在威胁评估中面临的最后一个关键问题是如何避免恶意用户欺骗 DNS 服务的可能性，以便请求会转到另一台服务器并可能上传敏感数据。为此，我想知道浏览器是否会在发送请求之前完全验证 SSL 密钥？

如果没有，是否有另一种方法可以确定我的 Ajax 请求将发送到正确的位置？除了将 IP 地址硬编码到应用程序中之外？（这仍然会留下轻微的漏洞）

谢谢！泰勒

更新：

我相信我已经回答了这个问题，答案是“是的”。

希望我能提供一个明确的答案，就像参考 XmlHTTPRequests 的 HTML 规范一样，但我所拥有的只是实验结果。

我启动了一个 PhoneGap 应用程序，并能够发出一个简单的 jQuery.ajax() 请求

*   https://www.google.com/（惊喜）
*   http://www.pcwebshop.co.uk/

两者都返回http状态200等，不足为奇。

但是具有自签名证书的[https://www.pcwebshop.co.uk/失败，并且 jqXHR 请求对象具有以下内容：](https://www.pcwebshop.co.uk/)

*   文本状态：'错误'
*   状态：0（不是 XXX http 状态）
*   响应文本：[空]

所以这是一个归纳结论，但应该有效。如果有人可以规范地回答这个问题，仍然很感兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T01:27:23.263

如果它没有验证服务器证书是否可信，它就不会正确实施 HTTPS/SSL。注意“证书”不是“钥匙”。

# jquery - 悬停在 jQuery 弹性后退不工作

> ID：10287659
> 
> 赞同：0
> 
> 时间：2012-04-23T20:20:24.280
> 
> 标签：jquery, animation, hover, jquery-easing

我在让返回动画在悬停状态下播放时遇到了一些问题。

```
$("#porttab").hover(function(){
    $(this).stop().animate({"top" : "40px"}, {
        duration: 'slow',
        easing: 'easeOutElastic'
    }, function(){
        $(this).stop().animate({"top": "-40px"}, {
            duration: 'slow',
            easing: 'easeOutElastic'
        });
    });
}); 
```

我不知道我在这里做错了什么，但我有点 jquery noob 所以请温柔。

而且我正在使用缓动插件，如果这有什么不同的话。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T20:24:12.917

我认为您错过了关闭悬停的第一个参数..见下文

```
$("#porttab").hover(function() {
    $(this).stop().animate({
        "top": "40px"
    }, {
        duration: 'slow',
        easing: 'easeOutElastic'
    });
}, function() {
    $(this).stop().animate({
        "top": "-40px"
    }, {
        duration: 'slow',
        easing: 'easeOutElastic'
    });
}); 
```

# c# - 如何将我的窗口设置为完全覆盖虚拟屏幕区域？

> ID：10287660
> 
> 赞同：-1
> 
> 时间：2012-04-23T20:20:26.857
> 
> 标签：c#, wpf, window, size, dpi

我可以从 System.Windows.SystemParameters 获取虚拟屏幕大小，但由于 WPF 不能以像素为单位工作，但在 DPI 单位中我不能直接使用它。如何让我的 WPF 窗口（Border=none）完全覆盖整个虚拟屏幕？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T20:25:06.977

我这样做了，效果很好：

```
public MainWindow()
{
    InitializeComponent();

    this.WindowStyle = System.Windows.WindowStyle.None;

    this.Height = SystemParameters.VirtualScreenHeight;
    this.Width = SystemParameters.VirtualScreenWidth;

    this.Left = 0;
    this.Top = 0;
} 
```

这是你的想法（但没有发布）？

```
private void Window_Loaded(object sender, RoutedEventArgs e)
{
    this.WindowStyle = System.Windows.WindowStyle.None;

    this.Left = 0;
    this.Top = 0;

    Point screenPoint = new Point(SystemParameters.VirtualScreenWidth, SystemParameters.VirtualScreenHeight);

    Point translatedPoint = this.PointFromScreen(screenPoint);

    this.Height = translatedPoint.Y;
    this.Width = translatedPoint.X;
} 
```

# java - CAS 服务 ACL

> ID：10287661
> 
> 赞同：1
> 
> 时间：2012-04-23T20:20:39.617
> 
> 标签：java, authentication, single-sign-on, cas

我想知道是否可以将中央身份验证服务（CAS，[http://www.jasig.org/cas](http://www.jasig.org/cas)）配置为基于每个用户（或基于角色或其他东西！）阻止对特定服务的访问。

基本上，我有两个服务：[http](http://service2.com) ://service1.com和[http://service2.com](http://service1.com) 用户 A、B 和 C 可以访问[http://service1.com](http://service1.com)但只有 A 可以访问[http://service2。 com](http://service2.com)。

CAS有可能吗？我认为它不是，因为它似乎违背了 SSO 的目的。如果没有，什么 SSO 可以做这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T06:42:23.093

是的，确实如此。有关更多信息，请参阅此链接：http: [//www.mail-archive.com/cas-dev@lists.jasig.org/msg02993.html](http://www.mail-archive.com/cas-dev@lists.jasig.org/msg02993.html)

如有其他疑问，请向@cas-dev 发消息，我们很乐意为您提供帮助。

# c# - 在godaddy共享主机上的asp表单项目中使用AJAX和jquery

> ID：10287663
> 
> 赞同：1
> 
> 时间：2012-04-23T20:20:51.070
> 
> 标签：c#, jquery, asp.net, ajax

我有一个模式弹出窗口作为用户消息收件箱。当用户单击链接查看消息时，我使用 jquery 来显示消息。消息显示周围的导航都是客户端的，并且非常流畅。

我一直试图解决的问题是在用户单击消息链接以查看我要更新数据库以反映这一点的消息之后。我有一个服务器端 c# 方法可以做到这一点，我正在尝试使用 ajax 来实现它。任何其他方式和页面重新加载和消息模式消失。

我的尝试是在更新面板上放置一个按钮。这有效并且不会导致完整的回发并且模态保持不变。所以我的下一步是在运行显示消息的函数时从 jquery 调用按钮。现在它做了一个整页的帖子，而不是部分的。

```
<asp:UpdatePanel ID="UpdatePanel2" runat="server">
<ContentTemplate>
<asp:Button runat="server" ID="UpdateReadStatusButton" Text="test" OnClick="UpdateReadStatus"/>   
</ContentTemplate>
</asp:UpdatePanel> 
```

然后我用 jquery 调用它

```
function ShowMyPopup(message, subject, sender, reciever, id) {
  ShowPopup(message, subject, sender, reciever, id);
  $('#ctl00_UpdateReadStatusButton').click();
} 
```

我尝试使用另一种 ajax 方式，并且能够轻松地调用服务器端代码安静，并且它运行良好，直到我部署。我尝试了来自 Micheal schwarz 的 .net ajax 包装器，但在部署后也没有成功。

问题是该站点托管在 godaddy 共享托管计划上，而我尝试过的任何其他 ajax 方法都无法在他们的服务器上运行。我现在正在使用最新版本的 AjaxControlToolKit，这是一个 Web 表单应用程序，因此来自 MVC 的简单解决方案将不起作用。一般来说，我对 ajax 和 Web 开发非常陌生，任何帮助都将不胜感激。

我还在考虑使用 jquery 设置按钮 commandArgument 属性，因为那是我有消息 Id 的地方，我可以在回发服务器端获取它。

如果您想要视觉效果，请访问 On2Wheels.ca 并使用用户 HelpUser 和密码 HelpUser（注意大写字母）登录，然后单击右侧的邮件图标。

我刚刚尝试了 ajax 的 Jquery 方式：

```
function UpdateRead() {
    $.ajax({
        type: "POST",
        url: "Default.aspx/UpdateReadStatus",
        data: "{}",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (result) {
            //do something
        }
    });
} 
```

使用 ac# 方法：

```
 [System.Web.Services.WebMethod]
    protected void UpdateReadStatus(string id)
    {
        var a = id;
    } 
```

我认为如果我使用 MVC，我只能通过 url 调用方法。这也是在母版页中，因此它显示在每个页面上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T20:26:13.280

如果您使用 jQuery，则无需使用 ASP.Net UpdatePanel。这很挑剔，很麻烦，而且到处都是比它值得的麻烦。为您的 AJAX 功能使用严格的 jQuery 方法。看看他们网站上的一些例子：

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# javascript - javascript游戏我应该如何减少实体与主窗口的耦合？

> ID：10287665
> 
> 赞同：2
> 
> 时间：2012-04-23T20:21:05.517
> 
> 标签：javascript

我在游戏中有一个实体，它有一个更新方法，它需要定位最近的僵尸，目前僵尸列表只是我访问的一个全局对象，但这似乎是错误的，我可以将列表传递给更新方法，但我'不确定这是否是最好的方法？

这是我的更新方法的简化版本：

```
this.update = function () {
                var targetedZombie = null;
                //TODO: should not be using the zombies object - tight coupling should be removed
                var alivezombies = [];
                for (var zombie in zombies) {
                    if (zombies[zombie].Alive) {
                        alivezombies.push(zombies[zombie]);
                    }
                }

                targetedZombie = this.GetClosestEntity(alivezombies);
                if (targetedZombie) {
                    Fire(this, targetedZombie);
                }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T20:32:26.547

使用闭包 //初始化你的 api

```
 (function(global) {
      var zombies = []; // accessible only to you

      function zombieManager() { 
         this.addZombie = function() {  zombies.push() }
         this.killHalfZombies = function() { 
                  zombies = zombies.filter(function(item,i) { return i % 2 == 0});
         }
      }
      global.zombieManager = new zombieManager();

      function hero() {

      };

      hero.prototype.update = function() {
        //dig zombies[]
        //do whatever state change
      };
      global.hero = hero;
    })(window); //<-- you pass in whatever rootlevel object we have. window in a browser.

//use api
    var myhero = new hero();
    hero.update() //<-- this can access zombies

    zombieManager.addZombie(); //<-- zombieManager is a singleton and is responsible for zombification 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T20:40:08.563

一些让您入门的游戏架构的[好资源是“学习游戏架构的好资源”？](https://gamedev.stackexchange.com/questions/455/good-resources-for-learning-about-game-architecture)在游戏开发上。一般来说，一个好的做法是将游戏的组件分解为单个概念。在这个简单的场景中，我会将僵尸列表作为 Game 类的一个组件，并在其上有一个 FindClosest(PositionOfHero) 方法。该窗口将仅启动正确的对象图，而不是将图之间的链接保持为全局数组。

# asp.net-mvc-3 - 从 Windows Phone GET 和 POST 到 ASP.NET MVC 3

> ID：10287672
> 
> 赞同：1
> 
> 时间：2012-04-23T20:21:27.977
> 
> 标签：asp.net-mvc-3, windows-phone-7

我有一个要迁移以使用 ASP.NET MVC 3 的应用程序。该应用程序具有各种 GET 和 POST 操作，可通过 JQuery 访问并通过 MVC 3 公开。总体思路如下所示：

**jQuery**

```
var vm = { param1:"someValue", param2:"someValue", param3: "someValue" };
$.ajax({
  url: http://localhost:49812/actions/postAction,
    type: "POST",
    data: JSON.stringify(vm),
    contentType: "application/json",
    success: call_Succeeded,
    error: call_Failed
  });

function call_Succeeded(result) {
  // Do Stuff
}

function call_Failed(p1, p2, p3) {
  // Do Stuff
} 
```

**提琴手**

```
http://localhost:49812/actions/postAction 

{"param1":"value1","param2":"value2","param3":"value3"} 
```

**ASP.NET MVC 3 控制器**

```
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult PostAction(string param1, string param2, string param3)
{
  // Do stuff
  return Json(new { Message="Success!" });
}

[AcceptVerbs(HttpVerbs.Get)]
public ActionResult GetAction(string param1, string param2, string param3)
{
  // Do stuff
  return Json(new { Message="Success!" }, JsonRequestBehavior.AllowGet);
} 
```

我正在尝试在 Windows Phone 上使用 C# 与这些 ASP.NET MVC 3 端点进行交互。我很难弄清楚如何通过 WebClient 和 WebRequest 对象进行 GET 和 POST。给我带来问题的具体部分是传递参数。无论我做什么，我都会收到 404 错误。有人可以告诉我如何做到这一点吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T22:34:15.640

可以肯定的是，您是否将*localhost*替换为实际的网络服务器名称（由于 Cassini 不接受外部请求，因此部署在 IIS 上）？

```
$.ajax({ 
  url: http://localhost:49812/actions/postAction, 
    type: "POST", 
    data: JSON.stringify(vm), 
    contentType: "application/json", 
    success: call_Succeeded, 
    error: call_Failed 
  }); 
```

# mysql - MySql 多表约束

> ID：10287675
> 
> 赞同：1
> 
> 时间：2012-04-23T20:21:31.720
> 
> 标签：mysql, unique-constraint

一个简单的权益数据库有 3 个表：股票代码表、兑换表和货币表。股票代码表有两列：一个符号列（例如：IBM）和一个指向交换表中一行的外键。交换表有两列：名称列（例如：NYSE）和货币表中一行的外键。货币表有一列：一个符号（例如：美元）。 *（我省略了每个表的主键列）。*

如何强制执行相同货币不应出现两次相同股票代码的约束？即，我只想允许一个（IBM + USD）。在 (ticker.symbol + ticker.exchange) 上创建唯一约束是不够的；(IBM + NASDAQ) 如果已经存在 (IBM + NYSE) 则无效。我想我可以创建一个将股票代码表和货币表连接起来的视图，并在 (view.ticker + view.currency) 上创建一个唯一索引；但是，据我现在所知，无法在视图上创建索引。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T20:47:40.557

我*认为*不可能在 MySQL 中指定此约束，但您*可以*使用[触发器](http://dev.mysql.com/doc/refman/5.6/en/triggers.html)来检查此类组合是否不存在（如果存在则引发错误）；但是请注意，您需要在在股票代码表上插入之前和在所有三个表上更新之前有触发器。

# android - 在 Flash/AIR 和 AS3 中为简单的点击游戏添加多点触控

> ID：10287678
> 
> 赞同：0
> 
> 时间：2012-04-23T20:21:45.693
> 
> 标签：android, actionscript-3, flash, air, adobe

我有一个用 Flash CS5.5 制作的简单游戏，用户只需轻按一个对象并获得分数。无论如何我可以在游戏中实现多点触控，而无需再次执行所有操作，以便用户可以用不同的手指触摸不同的对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T20:36:17.723

您是否尝试过将您的应用设置为多点触控模式：

```
Multitouch.inputMode=MultitouchInputMode.TOUCH_POINT; 
```

将您的`MouseEvent.CLICK`事件侦听器更改为`TouchEvent.TOUCH_TAP`

这应该让您朝着正确的方向前进……您有具体的实施问题吗？

# python - Python 将 wav 转换为 mp3

> ID：10287683
> 
> 赞同：25
> 
> 时间：2012-04-23T20:22:16.800
> 
> 标签：python, audio, mp3, wav

我看过 pymedia（已停产）、pyglet（很棒但没有转换器）和 audiotools（命令行 cd 翻录），但似乎没有一个合适。

在 Python 2.7 中，你是怎么做的

```
convert(wavFileLocation, 'mp3') 
```

如果没有 python 方式，你将如何以 python 可以调用的方式来做呢？（例如调用跨平台命令行工具...如果存在则返回（名称，pythonCodeForInvocation））

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-12T15:26:17.400

我编写了一个[python 库 pydub](http://pydub.com)，它基本上完成了 Corey's Answer 的建议，尽管它使用 ffmpeg in 进行转换以支持更多格式。

```
from pydub import AudioSegment

AudioSegment.from_wav("/input/file.wav").export("/output/file.mp3", format="mp3") 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-04-24T01:04:20.450

使用[lame](http://lame.sourceforge.net/)（命令行），您可以像这样将 wav 编码为 mp3：

```
$ lame --preset insane /path/to/file.wav 
```

这将创建：

```
file.wav.mp3 
```

在 Python 中，您可以使用[subprocess](http://docs.python.org/library/subprocess.html)来调用它：

```
wav = 'myfile.wav'
cmd = 'lame --preset insane %s' % wav
subprocess.call(cmd, shell=True) 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-02-03T17:37:25.970

pydub你一定要去，它是一个很好的与音频文件相关的操作模块。

笔记。请记住在使用 pydub 之前安装 ffmpeg。

如需有关安装**ffmpeg**的帮助，您可以使用此[链接](http://adaptivesamples.com/how-to-install-ffmpeg-on-windows/)。

然后安装 pydub 只需打开命令提示符并输入

```
pip install pydub 
```

然后将任何文件从 wav 转换为 mp3 只需使用**pydub**作为

```
import pydub
sound = pydub.AudioSegment.from_wav("D:/example/apple.wav")
sound.export("D:/example/apple.mp3", format="mp3") 
```

* * *

## 回答 #4

> 赞同：-6
> 
> 时间：2020-04-13T02:54:31.373

您可以重命名文件扩展名吗，我认为 os 库会以任何方式帮助您，我会给您示例：

yourfile.wav ==>> yourfile.mp3 或任何用于音频和视频文件的类型

对我来说它的工作！

# javascript - 如何用不损害 iframe 的超链接替换 url

> ID：10287684
> 
> 赞同：1
> 
> 时间：2012-04-23T20:22:31.583
> 
> 标签：javascript, jquery, url, iframe, replace

我想用链接替换 ​​url，以下代码工作正常，但它会损害 iframe（例如 youtube），有什么建议吗？thx

```
$(".css___div p").html($(".css___div p").html().replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig,"<a href='$1' target='_blank'>$1</a>")); 
```

更新：实际上我正在做一个 bbs，有时人们想发布一个 youtube，所以他们会在帖子中制作一个 iframe ......例如：

```
check out my mv!!!
<iframe width="560" height="315" src="http://www.youtube.com/embed/F1C9zIA50Eo" frameborder="0" allowfullscreen></iframe>
http://youtu.be/F1C9zIA50Eo 
```

我想把[http://youtu.be/F1C9zIA50Eo](http://youtu.be/F1C9zIA50Eo)变成一个链接，但不是[http://www.youtube.com/embed/F1C9zIA50Eo](http://www.youtube.com/embed/F1C9zIA50Eo)，有什么提示吗？谢谢

update2：最后我做了一个愚蠢的技巧来避免代码伤害 iframe：

```
var var___iframeSRC=$(".css___funk .css___div p iframe").attr("src");
$(".css___div p").html($(".css___div p").html().replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig,"<a href='$1' target='_blank'>$1</a>"));
$(".css___funk .css___div p iframe").attr("src",var___iframeSRC); 
```

update3：我把所有的 src 放到一个数组中......但这仍然是一个愚蠢的把戏，欢迎任何建议

```
arr___iframeSrc=new Array();
$(".css___funk .css___div p iframe").each(function(){
    arr___iframeSrc.push($(this).attr("src"));
});

$(".css___funk .css___div p").html($(".css___funk .css___div p").html().replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig,"<a href='$1' target='_blank'>$1</a>"));

for(var i=0;i<arr___iframeSrc.length;i++){$(".css___funk .css___div p iframe").eq(i).attr("src",arr___iframeSrc[i]);} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T20:35:12.950

你的意思是你不想改变框架中的链接？

如果是这样，您需要添加

```
if (window.top != window.self) {
    return;
} 
```

到你的脚本

## 编辑

好的。从你的评论

> 我想把[youtu.be/F1C9zIA50Eo](http://youtu.be/F1C9zIA50Eo)变成一个链接，但不是 [youtube.com/embed/F1C9zIA50Eo](http://youtube.com/embed/F1C9zIA50Eo)，有什么提示吗？

我相信这就是您正在寻找的：

```
function replaceURLWithHTMLLinks(text) {
   var exp = /(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig;
   return text.replace(exp,"<a href='$1'>$1</a>"); 
} 
```

来源：[如何用链接替换纯 URL？](https://stackoverflow.com/questions/37684/how-to-replace-plain-urls-with-links)

# java - 如何使用 Java Regex 查找字符串中的所有重复字符序列？

> ID：10287685
> 
> 赞同：10
> 
> 时间：2012-04-23T20:22:34.477
> 
> 标签：java, regex, pattern-matching

使用 Java 和 Regex 解析随机字符串以查找重复序列。

考虑字符串：

啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊

我想找到一个正则表达式，它将在上面的字符串中找到所有匹配项：

```
aaabbaaacccbb
^^^  ^^^

aaabbaaacccbb
   ^^      ^^ 
```

什么是正则表达式，它将检查字符串中是否有任何重复的字符序列并返回这些重复字符的组，例如组 1 = aaa 和组 2 = bb。另请注意，我使用了一个示例字符串，但任何重复字符都是有效的：RonRonJoeJoe ... ... ,, ,,...,,

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-23T20:34:19.847

这样做：

```
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class Test {
    public static void main(String[] args) {
        String s = "aaabbaaacccbb";
        find(s);
        String s1 = "RonRonRonJoeJoe .... ,,,,";
        find(s1);
        System.err.println("---");
        String s2 = "RonBobRonJoe";
        find(s2);
    }

    private static void find(String s) {
        Matcher m = Pattern.compile("(.+)\\1+").matcher(s);
        while (m.find()) {
            System.err.println(m.group());
        }
    }
} 
```

输出：

```
aaa
bb
aaa
ccc
bb
RonRonRon
JoeJoe
....
,,,,
--- 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T21:16:30.910

以下应该适用于所有要求。它实际上是这里的几个答案的组合，它将打印出字符串中其他任何地方重复的所有子字符串。

我将它设置为仅返回至少 2 个字符的子字符串，但可以通过将正则表达式中的“{2,}”更改为“+”轻松将其更改为单个字符。

```
public static void main(String[] args)
{
  String s = "RonSamJoeJoeSamRon";
  Matcher m = Pattern.compile("(\\S{2,})(?=.*?\\1)").matcher(s);
  while (m.find())
  {
    for (int i = 1; i <= m.groupCount(); i++)
    {
      System.out.println(m.group(i));
    }
  }
} 
```

输出：
罗恩·
萨姆
·乔

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-23T20:32:39.957

您可以使用这个`positive lookahead` 基于正则表达式：

```
((\\w)\\2+)(?=.*\\1) 
```

### 代码：

```
String elem = "aaabbaaacccbb";
String regex = "((\\w)\\2+)(?=.*\\1)";
Pattern p = Pattern.compile(regex);
Matcher matcher = p.matcher(elem);
for (int i=1; matcher.find(); i++)
System.out.println("Group # " + i + " got: " + matcher.group(1)); 
```

### 输出：

```
Group # 1 got: aaa
Group # 2 got: bb 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T23:02:09.447

您可以忽略重叠。

```
// overlapped 1 or more chars
(?=(\w{1,}).*\1)
// overlapped 2 or more chars
(?=(\w{2,}).*\1)
// overlapped 3 or more chars, etc ..
(?=(\w{3,}).*\1) 
```

或者，您可以使用（非重叠）..

```
// 1 or more chars
(?=(\w{1,}).*\1) \1
// 2 or more chars
(?=(\w{2,}).*\1) \1
// 3 or more chars, etc ..
(?=(\w{3,}).*\1) \1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T20:56:44.683

这似乎有效，尽管它也给出了子序列：

（公平地说，这是根据 Guillame 的代码构建的）

```
public static void main(final String[] args) {
    // final String s = "RonRonJoeJoe";
    // final String s = "RonBobRonJoe";
    final String s = "aaabbaaacccbb";

    final Pattern p = Pattern.compile("(.+).*\\1");

    final Matcher m = p.matcher(s);
    int start = 0;
    while (m.find(start)) {
        System.out.println(m.group(1));
        start = m.toMatchResult().end(1);
    }
} 
```

# c# - 在 WPF DataGrid 中使用 Enter 键作为选项卡

> ID：10287686
> 
> 赞同：5
> 
> 时间：2012-04-23T20:22:35.140
> 
> 标签：c#, wpf, mvvm, datagrid

我`DataGrid`在 WPF 中有一个。

我想在点击时移动到 NextCell `Enter`，当到达 LastColumn 时，它应该具有`Enter`创建或移动到下一行的默认功能。

我不想用`Tab`

我如何在 WPF 中做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T04:09:25.867

试试这个，我认为它至少对我有用。

```
//datagrid gotfocus event
private void dataGrid1_GotFocus(object sender, RoutedEventArgs e)
{
    DependencyObject dep = (DependencyObject)e.OriginalSource;
    //here we just find the cell got focused ...
    //then we can use the cell key down or key up
    // iteratively traverse the visual tree
    while ((dep != null) && !(dep is DataGridCell) && !(dep is DataGridColumnHeader))
    {
        dep = VisualTreeHelper.GetParent(dep);
    }

    if (dep == null)
        return;

    if (dep is DataGridCell)
    {
        DataGridCell cell = dep as DataGridCell;
        //raise key down event of cell
        cell.IsSelected = true;
        cell.KeyDown += new KeyEventHandler(cell_KeyDown);
    }
}

void cell_KeyDown(object sender, KeyEventArgs e)
{
    DataGridCell cell = sender as DataGridCell;
    if (e.Key == Key.Enter)
    {
        cell.MoveFocus(new TraversalRequest(FocusNavigationDirection.Next));
        cell.IsSelected = false;
        e.Handled = true;
        cell.KeyDown -= cell_KeyDown;
    }
} 
```

在这段代码中，当一个单元格获得焦点并且用户按下下一个单元格时，将获得焦点。祝你好运，希望这对你有帮助。

编辑 ：

将此函数设置为 datagrid PreviewKeyDown 事件。

```
private void maindg_PreviewKeyDown(object sender, KeyEventArgs e)
        {

            //just accept enter key
            if (e.Key != Key.Enter) return;

        DependencyObject dep = (DependencyObject)e.OriginalSource;
        //here we just find the cell got focused ...
        //then we can use the cell key down or key up
        // iteratively traverse the visual tree
        while ((dep != null) && !(dep is DataGridCell) && !(dep is DataGridColumnHeader))
        {
            dep = VisualTreeHelper.GetParent(dep);
        }

        if (dep == null)
            return;

        if (dep is DataGridCell)
        {
            //cancel if datagrid in edit mode
            maindg.CancelEdit();
            //get current cell
            DataGridCell cell = dep as DataGridCell;
            //deselect current cell
            cell.IsSelected = false;
            //find next right cell
            var nextCell = cell.PredictFocus(FocusNavigationDirection.Right);
            //if next right cell null go for find next ro first cell
            if (nextCell == null)
            {
                DependencyObject nextRowCell;
                nextRowCell = cell.PredictFocus(FocusNavigationDirection.Down);
                //if next row is null so we have no more row Return;
                if (nextRowCell == null) return;
                //we do this because we cant use FocusNavigationDirection.Next for function PredictFocus
                //so we have to find it this way
                while ((nextRowCell as DataGridCell).PredictFocus(FocusNavigationDirection.Left) != null)
                    nextRowCell = (nextRowCell as DataGridCell).PredictFocus(FocusNavigationDirection.Left);
                //set new cell as next cell
                nextCell = nextRowCell;
            }
            //change current cell
            maindg.CurrentCell = new DataGridCellInfo(nextCell as DataGridCell);
            //change selected cell
            (nextCell as DataGridCell).IsSelected = true;
            // start edit mode
            maindg.BeginEdit();
        }
        //handl the default action of keydown
        e.Handled = true;
    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-03-11T17:13:40.467

一个更简单的实现。这个想法是捕获 keydown 事件，如果键是“Enter”，则移动到下一个选项卡，即网格的下一个单元格。

```
/// <summary>
/// On Enter Key, it tabs to into next cell.
/// </summary>
/// <param name="sender"></param>
/// <param name="e"></param>
private void DataGrid_OnPreviewKeyDown(object sender, KeyEventArgs e)
{
    var uiElement = e.OriginalSource as UIElement;
    if (e.Key == Key.Enter && uiElement != null)
    {
        e.Handled = true;
        uiElement.MoveFocus(new TraversalRequest(FocusNavigationDirection.Next));
    }
} 
```

# asp.net - ModalPopupExtender 在下拉列表的选定索引更改后消失

> ID：10287689
> 
> 赞同：2
> 
> 时间：2012-04-23T20:22:52.747
> 
> 标签：asp.net, asp.net-ajax, drop-down-menu, modalpopupextender

我想从下拉列表的选定索引更改中获取一些值并将它们绑定到 textox 或其他控件，但问题是选定索引更改后弹出窗口消失。需要解决方案。代码是

```
<ajaxToolkit:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server">
    </ajaxToolkit:ToolkitScriptManager>
    <div>
        <div>
        <div>
               <asp:Button ID="Button1" runat="server" onclick="Button1_Click" Text="Button" />
            <asp:ModalPopupExtender ID="Button1_ModalPopupExtender" runat="server" 
                Drag="True" DropShadow="True" DynamicServicePath="" Enabled="True" 
                OkControlID="btncancel" PopupControlID="Panel1" TargetControlID="Button1">
            </asp:ModalPopupExtender>

        </div>
        </div>
    </div>
      <asp:Panel ID="Panel1" runat="server">
        first name<asp:TextBox ID="TextBox5" runat="server"></asp:TextBox>
        <br />
        country <asp:DropDownList ID="DropDownList1" runat="server" AutoPostBack="True" 
            onselectedindexchanged="DropDownList1_SelectedIndexChanged">
            <asp:ListItem>select</asp:ListItem>
            <asp:ListItem>india</asp:ListItem>
            <asp:ListItem>pakistan</asp:ListItem>
            <asp:ListItem>usa</asp:ListItem>
            <asp:ListItem>england</asp:ListItem>
        </asp:DropDownList>
        <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" 
            ControlToValidate="DropDownList1" ErrorMessage="*" InitialValue="select"></asp:RequiredFieldValidator>
        <br />
        selected country<asp:TextBox ID="TextBox9" runat="server"></asp:TextBox>
        <br />
        <asp:Button ID="Button2" runat="server" onclick="Button2_Click" Text="Submit" />
        <input id="btncancel" type="button" value="Cancel" />
    </asp:Panel> 
```

后面的代码是

```
protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
    {
        TextBox9.Text = DropDownList1.SelectedValue;
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T20:26:02.290

我相信你只需要重新发出 show 方法：

```
protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
{
    TextBox9.Text = DropDownList1.SelectedValue;
    Button1_ModalPopupExtender.Show();
} 
```

# java - 在哪里实例化类

> ID：10287690
> 
> 赞同：3
> 
> 时间：2012-04-23T20:22:58.043
> 
> 标签：java, jakarta-ee

我有一个普通的 .java 类。在该课程中，我使用`Timer`课程安排方法来安排任务。

问题是我正在使用 Java EE 应用程序，但我不知道在哪里实例化这个类；来自 Servlet 或类似的东西？当我的应用程序启动时，我只想实例化该类一次。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T20:24:08.510

你可能需要一个[`ServletContextListener`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContextListener.html)和它的方法`contextInitialized(..)`。它在您的应用程序初始化时被调用一次。

您在 web.xml 中使用`@WebListener`或使用映射侦听器`<listener><listener-class>..</...>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T20:32:31.167

```
 public class YourServlet extends HttpServlet {
 private YourClass instance;

 public void init() throws ServletException {
      instance = new YourClass();
 }
 //code
 } 
```

通过在 init 方法中实例化您的类，您将确保您的类只被实例化一次，因为在 Java EE 应用程序中，Servlet 仅被加载到服务器内存中一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T20:56:06.793

在 Quartz（一种流行的调度程序）中，一种常见的做法是在 Servlet 的 init 方法中配置作业，并将 load-on-startup 属性设置为 true：

从[这篇文章](http://www.theserverside.com/news/1377023/Using-the-Quartz-Enterprise-Scheduler-in-J2EE)，在 web.xml 你应该这样做：

```
<servlet>
    <servlet-name>QuartzInitializer</servlet-name>
    <display-name>Quartz Initializer Servlet</display-name>
    <servlet-class>org.quartz.ee.servlet.QuartzInitializerServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet> 
```

然后在你的 servlet 中配置 Jobs：

```
public class QuartzServlet extends GenericServlet {
    public void init(ServletConfig config) throws ServletException {
    super.init(config);
    // And continue with your configuration 
```

PS：我强烈推荐你使用 Quartz

# c++ - 条件满足时，c ++递归函数不会退出

> ID：10287694
> 
> 赞同：0
> 
> 时间：2012-04-23T20:23:29.053
> 
> 标签：c++, recursion, return

我需要一些帮助。我有一个递归函数，在 c++ 中，它只是分解一个字符串（所有数字）并将字符相加，看看它的总数是否小于 9。如果不是，它会再次调用自己，直到满足条件。到目前为止，它一直在工作，直到满足我的条件时它再次调用该函数。这显然会弄乱我试图分配给它的变量的值。我参考了很多参考资料，看来我的语法是正确的？关于我的函数为什么最后一次调用它的任何帮助。

///////////////////////////////////////// ///////

```
int finalNumber =0;

// set finalNumber

finalNumber = sumTotal(sumInput);

int sumTotal(int sumInputToString)
{

    stringstream strToInt;
    string convertedInt;

    strToInt << sumInputToString;
    convertedInt= strToInt.str();

    int sum = 0;

    for(int i = 0; i < convertedInt.length(); i++)
    {
        sum += (int)convertedInt[i] - 48;
    }

    if (sum > 9)
    {
        sumTotal(sum);
    }
    return sum; //ONCE SUM IS LESS THAN 9,which is what i want, 
                //MY PROGRAM AUTOMATICALLY JUMPS UP TWO LINES does it one 
                //more time than it will escape.
} 
```

我已经尝试了一切，从将我的回报放入 else{} 并交换我的 if else 条件，以便我的回报将在我的 if 中。任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T20:28:49.477

条件内的语句不应该是：

```
if (sum > 9)
{
    sum = sumTotal(sum);
} 
```

否则，你只是在打电话

```
if (sum > 9)
{
    sumTotal(sum);
}
return sum; 
```

它什么都不做（即对最终输出没有贡献）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T07:35:39.290

基于此评论

> 我的程序自动跳了两行

我可能会建议你在调试器中看到这一点。向上跳两行本身是正确的——你在函数堆栈上向上移动（即返回到调用你的函数——又是这样`sumTotal`）。那么你确定一切都完成后功能真的从头开始吗？

还要考虑一件事：如果初始值`sumInputToString`小于 10，您的代码无论如何都会被执行。你真的想要吗？

很少有与您的问题直接相关的建议。很难理解你的函数真正应该做什么。对于任何复杂的算法（这可能被认为是复杂的，因为你使用了resursion）你必须有一个好的函数注释。我会建议这样的事情：

> 此函数首先计算给定数字中所有数字的总和。如果结果小于或等于 9，则返回。如果不是，我们继续将此总和作为给定数字。

您还可以包括简短的句子为什么需要它（因为乍一看它可能看起来很奇怪）：

> 这个函数可以用来判断某个数是否能被 3 整除。

在写完这样的评论后，您开始了解逻辑应该是什么，并且可能意识到您不需要在这里进行递归。并将您的代码转换为如下内容：

```
// Function comment
int CalculateRecursiveSumOfDigits(int val) {
    while (val > 9) {
        val = CalculateSumOfDigits(val); // TODO: implement this function
    }

    return val;
} 
```

# ruby - 通过 Bundler 使用本地 gem

> ID：10287696
> 
> 赞同：1
> 
> 时间：2012-04-23T20:23:32.450
> 
> 标签：ruby, rubygems, bundler

我正在与我的主应用程序并行开发一个 gem。由于我经常进行更改，因此我想从我的主项目中引用该 gem，而不必重复构建和发布它。

我的 Gemfile 包含以下行：

```
gem 'my_gem', :path => '/Users/andy/path/to/my_gem' 
```

但是，当我使用 bundle exec 运行我的应用程序的测试时，一个测试失败并且回溯显示正在使用错误的 gem 位置：

```
/Users/andy/.rvm/gems/ruby-1.9.2-p290/gems/my_gem-0.6.0/lib/my_gem/page.rb:23:in `...' 
```

我究竟做错了什么？

我正在使用 Bundler 1.1.0

更新 - Gemfile.lock 的摘录：

```
PATH
  remote: /Users/andy/path/to/my_gem
  specs:
    my_gem (0.6.0)
      activesupport (~> 3.0)
      capybara

DEPENDENCIES
  my_gem! 
```

my_gem 旁边有一个版本号似乎是错误的，它不应该只使用该路径的最新代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T20:46:46.820

已解决：我忘记了 Spork 正在运行，所以没有完全重新加载。

# sql-server - T-SQL：插入

> ID：10287699
> 
> 赞同：0
> 
> 时间：2012-04-23T20:23:44.157
> 
> 标签：sql-server, tsql

我在 T-SQL 中有以下内容：

```
INSERT INTO tblAttMain(Site, FirstName, LastName)
    SELECT 
        Site, FirstName, LastName
    FROM
        tblAttTmp 
    WHERE
        Site = @Site 
```

我在这里所做的是将列复制`tblAttTmp`到`tblAttMain`表中。注意 select 语句可以返回数百行。`tblAttTmp`有一个名为 ID 的主键来指定该记录的特定 ID。

如果对于 select 的每次交互都出现错误，我想吐出`tblAttTmp`'s ID 是什么并创建一个字符串，以便我可以看到所有需要修复的 ID。

不知道该怎么做，因为选择是一次性交易。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T20:27:25.407

正如你所说，`select`并且`insert`是“一枪”。你有两个真正的选择：

1.  单独做每一行。**这不仅不好，而且很痛苦**
2.  确定可能发生的“错误”（主键/唯一键/外键冲突、其他约束冲突等）并**在尝试插入之前检查数据是否存在错误**。

（你真的*需要*使用第二个选项）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T20:28:59.407

听起来您宁愿将此解决方案实现为[cursor](http://msdn.microsoft.com/en-us/library/ms180169.aspx)。使用光标，您可以一次插入一个，而不是在每次迭代期间做一堆事情。

```
DECLARE @Cursor CURSOR FOR
SELECT Site, FirstName, LastName FROM tblAttTmp WHERE Site = @Site

DECLARE @CurrentSite <DataType>
DECLARE @CurrentFirstName <DataType>
DECLARE @CurrentLastName <DataType>

OPEN @Cursor

FETCH NEXT FROM @Cursor INTO @CurrentSite, @CurrentFirstName, @CurrentLastName

WHILE @@FETCH_STATUS = 0
BEGIN
   -- INSERT using @CurrentSite, @CurrentFirstName, @CurrentLastName
   -- Use a Try/ Catch block to catch errors

   FETCH NEXT FROM @Cursor INTO @CurrentSite, @CurrentFirstName, @CurrentLastName
END

CLOSE @Cursor
DEALLOCATE @Cursor 
```

# java - JVM 的 LookupSwitch 和 TableSwitch 的区别？

> ID：10287700
> 
> 赞同：72
> 
> 时间：2012-04-23T20:23:51.067
> 
> 标签：java, bytecode, jasmin

我很难理解 Java 字节码中的 LookUpSwitch 和 TableSwitch。

如果我理解的很好，LookUpSwitch和TableSwitch都对应`switch`Java源码的语句？为什么一个 JAVA 语句会生成 2 个不同的字节码？

每个 Jasmin 文档：

*   [查找开关](https://www.vmth.ucdavis.edu/incoming/Jasmin/ref--41.html)
*   [表开关](https://www.vmth.ucdavis.edu/incoming/Jasmin/ref-tableswi.html)
*   [两个都](http://jasmin.sourceforge.net/instructions.html)

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2012-10-17T15:46:33.377

不同之处在于

*   *lookupswitch*使用**带有键和标签的表**
*   *tableswitch*仅使用**带有标签的表**。

执行**tableswitch**时，直接将栈顶的 int 值作为 table 的索引，以获取跳转目的地并立即执行跳转。整个查找+跳转过程是一个**O(1) 操作**，这意味着它非常快。

执行**lookupswitch**时，堆栈顶部的int值与表中的键进行比较，直到找到匹配项，然后使用该键旁边的跳转目标执行跳转。由于lookupswitch表总是**必须排序**，使得keyX < keyY对于每个X < Y，整个lookup+jump过程是一个**O（log n）操作**因为将使用二分搜索算法搜索键（无需将 int 值与所有可能的键进行比较以找到匹配项或确定没有任何键匹配）。O(log n) 比 O(1) 慢一些，但它仍然可以，因为许多众所周知的算法都是 O(log n) 并且这些通常被认为是快的；甚至 O(n) 或 O(n * log n) 仍然被认为是一个非常好的算法（慢/坏算法有 O(n^2)、O(n^3) 甚至更糟）。

编译器根据switch 语句的*紧凑程度来决定使用哪条指令，例如*

```
switch (inputValue) {
  case 1:  // ...
  case 2:  // ...
  case 3:  // ...
  default: // ...
} 
```

上面的开关非常紧凑，没有数字“孔”。编译器会像这样创建一个 tableswitch：

```
 tableswitch 1 3
    OneLabel
    TwoLabel
    ThreeLabel
  default: DefaultLabel 
```

Jasmin 页面的伪代码很好地解释了这一点：

```
int val = pop();                // pop an int from the stack
if (val < low || val > high) {  // if its less than <low> or greater than <high>,
    pc += default;              // branch to default 
} else {                        // otherwise
    pc += table[val - low];     // branch to entry in table
} 
```

这段代码非常清楚这种 tableswitch 是如何工作的。`val`是`inputValue`，`low`将是 1（开关中的最低 case 值）和`high`3（开关中的最高 case 值）。

即使有一些孔，开关也可以很紧凑，例如

```
switch (inputValue) {
  case 1:  // ...
  case 3:  // ...
  case 4:  // ...
  case 5:  // ...
  default: // ...
} 
```

上面的开关“几乎紧凑”，它只有一个孔。编译器可以生成以下指令：

```
 tableswitch 1 6
    OneLabel
    FakeTwoLabel
    ThreeLabel
    FourLabel
    FiveLabel
  default: DefaultLabel

  ; <...code left out...>

  FakeTwoLabel:
  DefaultLabel:
    ; default code 
```

如您所见，编译器必须*为 2 添加一个假案例*，`FakeTwoLabel`. 由于 2 不是 switch 的实际值，`FakeTwoLabel`实际上是一个标签，可以准确地更改默认情况所在的代码流，因为值 2 实际上应该执行默认情况。

因此，编译器创建 tableswitch 的 switch 不必非常紧凑，但它至少应该非常接近紧凑。现在考虑以下开关：

```
switch (inputValue) {
  case 1:    // ...
  case 10:   // ...
  case 100:  // ...
  case 1000: // ...
  default:   // ...
} 
```

*这个开关远非紧凑，它的孔比 values*多一百倍。人们会称之为稀疏开关。编译器必须生成**近千个假案例**才能将此开关表示为 tableswitch。结果将是一个巨大的表，大大增加了类文件的大小。这是不切实际的。相反，它将生成一个查找开关：

```
lookupswitch
    1       : Label1
    10      : Label10
    100     : Label100
    1000    : Label1000
    default : DefaultLabel 
```

该表只有 5 个条目，而不是超过一千个。该表有 4 个实数值，O(log 4) 是 2（这里的 log 是 2 BTW 的底数，而不是 10 的底数，因为计算机操作二进制数）。这意味着 VM 最多需要两次比较才能找到 inputValue 的标签或得出结论，该值不在表中，因此必须执行默认值。即使该表有 100 个条目，VM 最多需要 7 次比较才能找到正确的标签或决定跳转到默认标签（7 次比较远少于 100 次比较，你不觉得吗？）。

所以说这两条指令是可以互换的，或者说两条指令的原因是有历史原因的，都是无稽之谈。对于两种不同的情况有两种指令，一种用于具有紧凑值的开关（用于最大速度），另一种用于具有稀疏值的开关（不是最大速度，但仍然具有良好的速度和非常紧凑的表格表示，无论数字孔如何）。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2015-06-24T16:29:23.090

**1.8.0_45如何`javac`决定编译`switch`成什么？**

要决定何时使用哪个，您可以使用`javac`选择算法作为基础。

我们知道来源`javac`是在`langtools`回购。

然后我们grep：

```
hg grep -i tableswitch 
```

第一个结果是[langtools/src/share/classes/com/sun/tools/javac/jvm/Gen.java](http://hg.openjdk.java.net/jdk8/jdk8/langtools/file/30db5e0aaf83/src/share/classes/com/sun/tools/javac/jvm/Gen.java#l1153)：

```
// Determine whether to issue a tableswitch or a lookupswitch
// instruction.
long table_space_cost = 4 + ((long) hi - lo + 1); // words
long table_time_cost = 3; // comparisons
long lookup_space_cost = 3 + 2 * (long) nlabels;
long lookup_time_cost = nlabels;
int opcode =
    nlabels > 0 &&
    table_space_cost + 3 * table_time_cost <=
    lookup_space_cost + 3 * lookup_time_cost
    ?
    tableswitch : lookupswitch; 
```

在哪里：

*   `hi`: 最大案例值
*   `lo`: 最小案例值

因此我们得出结论，它同时考虑了时间和空间复杂度，时间复杂度的权重为**3**。

TODO 我不明白为什么`lookup_time_cost = nlabels`和不`log(nlabels)`，因为 a`tableswitch`可以在 O(log(n)) 中通过二分搜索完成。

额外的事实：C++ 编译器也在 O(1) 跳转表和 O(long(n)) 二进制搜索之间做出类似的选择：[切换 if-else 语句的优势](https://stackoverflow.com/questions/97987/advantage-of-switch-over-if-else-statement)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-17T07:23:13.060

[Java 虚拟机规范](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-3.html#jvms-3.10)描述了差异。“当 switch 的情况可以有效地表示为目标偏移表中的索引时，使用 tableswitch 指令。” 该规范描述了更多细节。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T20:38:29.767

我怀疑这主要是历史原因，因为 Java 字节码与底层机器代码（例如 Sun 自己的 CPU）的某些特定绑定。

这`tableswitch`本质上是一个计算跳转，其中目的地是从查找表中获取的。相比之下，`lookupswitch`需要比较每个值，基本上是遍历表元素直到找到匹配值。

显然，这些操作码是可互换的，但基于值，一个或另一个可能更快或更紧凑（例如，比较之间有较大间隙的一组键和一组顺序键）。

# python - Django 日志对象中的意外缩进错误

> ID：10287701
> 
> 赞同：1
> 
> 时间：2012-04-23T20:23:54.740
> 
> 标签：python, django

我有一个 Django 应用程序，我正在向它添加 Django 日志对象，我遵循此文档 [https://code.osuosl.org/projects/django-object-log/wiki/Usage#Registering-Action-Types](https://code.osuosl.org/projects/django-object-log/wiki/Usage#Registering-Action-Types)

我在文档中添加日志条目的一部分，该文档给出了如何在 def 方法中添加日志的以下示例，这是示例：

```
 # store log_action for faster access
 log = LogItem.objects.log_action

 def my_view(request, pk):
     """ example view that retrieves an object by its pk """ 
     obj = SomeModel.objects.get(pk=pk)
     log('MY_EVENT', request.user, obj) 
```

tasks.py 是我的应用程序中的一个视图，这是我要添加日志调用的定义

```
def edit_task(request, task_id):
    t = get_object_or_404(Task, pk=task_id)
    t.category = request.POST['cat_dd']
    t.subcategory = request.POST['subcat_dd']
    t.name = request.POST['task_name']
    t.description = request.POST['task_desc']
    t.country = request.POST['country_dd']
    t.city = request.POST['task_city']
    t.address = request.POST['task_address']
    t.status = request.POST['status_dd']

    log('MY_EVENT', request.user, t)

    if (employer_id == NULL or getcategory == "Please select a category" or getsubcategory == "Please select a subcategory" or getname == "" or getdesc == "Write a short description about your task.." or getcountry == "(please select a country)" or getcity == "" or getaddress == "" or getstatus == ""):
        return render_to_response('editTask.html',RequestContext(request))
    else:
        t = Task.objects.create(employer = employer_id, category = getcategory, subcategory = getsubcategory, name = getname, description = getdesc, country = getcountry, city = getcity, address = getaddress, status = getstatus, contractor = NULL)
        t.save()

        return render_to_response('task.html',RequestContext(request)) 
```

`log('MY_EVENT', request.user, t)`在前面的代码中添加这一行后，我得到了一个错误

我有一个错误`unexpected indent (tasks.py, line 58)`

该错误的原因可能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T22:19:39.030

您很可能在源文件中混合了制表符和空格。您可以手动检查，或者像 pyflakes 这样的工具可以自动为您检查。

对于您需要调用的有关注册功能的错误：

```
 from object_log.models import LogAction
 LogAction.objects.register('MY_EVENT','template.html', build_cache) 
```

# php - jquery 手风琴选项卡

> ID：10287714
> 
> 赞同：0
> 
> 时间：2012-04-23T20:24:44.833
> 
> 标签：php, jquery, css, wordpress

我试图让一个 jquery 手风琴选项卡在单击时在选项卡的顶部和底部显示不同的内容

如果您查看以下网站

[http://www.eset.com/us/#tab=fbus](http://www.eset.com/us/#tab=fbus)

您应该看到 2 个选项卡，一个用于业务，另一个用于家庭，当您选择业务选项卡时，选项卡上方的图片会随着选项卡的内容而变化。

我怎样才能在 jQuery JavaScript 中做到这一点？

我想知道是否有人可以帮忙！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T06:56:26.490

像

html

```
<div class="fhome tabed">fhome Content 01 </div>
<div class="fbus tabed" style="display:none;">fbus Content 02 </div>
<ul id="Tabs">
    <li><a href="#tab=fhome">Tab 01 </a></li>
    <li><a href="#tab=fbus">Tab 01 </a></li>
</ul>
<div class="fhome tabed">fhome Content 01 </div>
<div class="fbus tabed" style="display:none;">fbus Content 02 </div> 
```

和 jQuery

```
$(document).ready(function(){   
$('#Tabs li a').click(function(){
        $('.tabed').hide();
        var Shdiv = $(this).attr('href').split('=')[1]
        $('div.'+Shdiv).show();
    });
}) 
```

# markdown - 批处理 docx 到 markdown

> ID：10287721
> 
> 赞同：4
> 
> 时间：2012-04-23T20:25:08.243
> 
> 标签：markdown, sh, batch-processing, pandoc, textutils

关于如何获得的任何想法：

```
textutil -convert html file.doc -stdout | pandoc -f html -t markdown -o file.md 
```

这样我就可以在文件夹及其所有子文件夹上执行命令，以便将降价文件放在与原始文件夹相同的文件夹中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T21:48:53.497

将 find 与运行子 shell 的 xargs 一起使用

```
find . -name '*.doc' -print0 | xargs -0 sh -c \
'textutil -convert html "$0" -stdout | pandoc -f html -t markdown -o "${0%.*}.md"' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T01:43:02.667

我发现这在 OSX 上运行得非常好，

[https://github.com/dsanson/Pandoc-Droplets-and-Services](https://github.com/dsanson/Pandoc-Droplets-and-Services)

我打开了其中一个 .app 文件并将其更改为 Makrdown。保存为新的，然后将其添加到我的查找器窗口中。

我想要转换的任何文件都只需拖动到应用程序图标并将其转换到同一文件夹中。

# iphone - iPhone SDK - 避免强制转换委托的类

> ID：10287724
> 
> 赞同：0
> 
> 时间：2012-04-23T20:25:32.000
> 
> 标签：iphone, objective-c, ios

我有一个 iPhone 应用程序，其中有一个`ClassB`名为：

```
-(void)login:(NSString *)url withDelegate:(id)delegate { } 
```

此方法是从 调用的`ClassA`。我传入委托参数，以便`ClassA`在此方法完成时传递回调：

```
if(delegate && [delegate respondsToSelector:@selector(parseLogin:)]) {
   [delegate parseLogin:loginInfoDictionary];
} 
```

但是，我收到一条警告，指出：`-Instance method: parseLogin: not found`

这并不奇怪，因为我从未将参数委托转换为任何特定的类。但是，为了使此方法尽可能抽象，我想将委托的数据类型保留为`id`.

**这可能吗？？？？**

我正在运行 iOS 5.1（如果重要的话）。如果可能的话，我想摆脱警告。

非常感谢！布雷特

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T20:29:38.677

处理此问题的常用方法是创建一个协议并让 ClassA 实现该协议。

```
@protocol ProtocolName
- (void) parseLogin:(NSDictionary*)dictionary;
@end 
```

然后在 ClassA 中实现协议

```
@interface ClassA : NSObject<ProtocolName> 
```

然后将您的方法更改为：

```
-(void)login:(NSString *)url withDelegate:(id<ProtocolName>)delegate { } 
```

这将摆脱警告并且仍然是可扩展的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T20:31:55.073

如果不同的类想成为委托，请在 ClassB.h 中声明一个 @protocol 并让调用类采用该协议`@interface ClassA : UIViewController <ClassBDelegate>`。

稍微不那么正式和更快：如果您知道委托将始终是 ClassA 的实例？ClassA 作为委托类型而不是 id。

更快的是，为了避免编译器警告，就是让你的代码保持原样，除了像这样调用：

```
if(delegate && [delegate respondsToSelector:@selector(parseLogin:)]) {
   [delegate performSelector:@selector(parseLogin:) withObject:loginInfoDictionary afterDelay:0.0];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T20:32:13.350

你不能使用协议吗？像这样的协议：

```
@protocol LoginDelegate <NSObject>

@optional
- (void) parseLogin: (NSDictionary*) dict;

@end 
```

因此，在您的 classA 中，您将使用`id<LoginDelegate>`.

# python - 关于使用不包含在表单中的下拉菜单的 Mechanize

> ID：10287725
> 
> 赞同：1
> 
> 时间：2012-04-23T20:25:47.107
> 
> 标签：python, mechanize

```
<div onclick="zctv.GridView.setPopupFlag('date');" id="zc-topbar-date">

        <input readonly="readonly" class="zc-textBox" maxlength="20" size="15" onclick="zctv.GridView.cal.show('zc-topbar-date')" onfocus="this.blur()" value="Mon, Apr. 23" id="dateText"/>

        <input onclick="zctv.GridView.cal.show('zc-topbar-date')" onfocus="this.blur()" type="button" class="zc-dropdown-default" title="Change date to display in grid" id="imgDateDropDown" />

    </div> 
```

我正在使用 Mechanize 处理上面的代码片段。代码正在做的是显示一个下拉和日期选择器。似乎该控件不包含在表单中。我的目标是以某种方式使用 Mechanize 为日期选择器控件设置一个值。我的语言是 Python。机械化甚至可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T21:30:41.090

抱歉，这不适用于 mechanize，因为它不支持 javascript -
它也在[常见问题解答](http://wwwsearch.sourceforge.net/mechanize/faq.html)中这么说，甚至给你一些[提示](http://wwwsearch.sourceforge.net/mechanize/faq.html#script)，你可以做什么......

# solr - 尝试提交文件时的 Solr 致命错误

> ID：10287732
> 
> 赞同：2
> 
> 时间：2012-04-23T20:26:06.697
> 
> 标签：solr, lucene

我能够将文件发布到 Solr 以进行索引，直到我突然开始收到此错误：

> SimplePostTool：致命：Solr 返回错误 #500 Permission denied java.io.IOException: Permission denied at java.io.UnixFileSystem.createFileExclusively(Native Method) at java.io.File.createNewFile(File.java:900) at org. apache.lucene.store.SimpleFSLock.obtain(SimpleFSLockFactory.java:128) at org.apache.lucene.store.Lock.obtain(Lock.java:72) at org.apache.lucene.index.IndexWriter.(IndexWriter.java :1098) 在 org.apache.solr.update.SolrIndexWriter.(SolrIndexWriter.java:84) 在 org.apache.solr.update.UpdateHandler.createMainIndexWriter(UpdateHandler.java:101) 在 org.apache.solr.update.DirectUpdateHandler2 .openWriter(DirectUpdateHandler2.java:171) 在 org.apache.solr.update.DirectUpdateHandler2.addDoc(DirectUpdateHandler2.java:219) 在 org.apache.solr.update.processor.RunUpdateProcessor。processAdd(RunUpdateProcessorFactory.java:61) at org.apache.solr.update.processor.LogUpdateProcessor.processAdd(LogUpdateProcessorFactory.java:115) at org.apache.solr.handler.XMLLoader.processUpdate(XMLLoader.java:157) at org .apache.solr.handler.XMLLoader.load(XMLLoader.java:79) 在 org.apache.solr.handler.ContentStreamHandlerBase.handleRequestBody(ContentStreamHandlerBase.java:58) 在 org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase .java:129) 位于 org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:365) 的 org.apache.solr.core.SolrCore.execute(SolrCore.java:1376)。 servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:260) 在 org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1212) 在 org.mortbay.jetty.servlet。ServletHandler.handle(ServletHandler.java:399) at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216) at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182) at org .mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:766) 在 org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:450) 在 org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection .java:230)handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:230)handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:230)

任何人都知道这一切意味着什么和/或如何解决它？

我用来提交文件的命令：

```
java -jar post.jar foo.xml 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T22:09:19.493

此错误意味着 Solr 没有对其索引目录的写入权限。

# mysql - 困难的查询 - 如此接近但还不完全在那里

> ID：10287734
> 
> 赞同：1
> 
> 时间：2012-04-23T20:26:11.470
> 
> 标签：mysql, join

解释这一点的最简单方法是为你们画出两张桌子 - 所以就在这里..

```
sl_project_course

项目 ID | course_id
50 1

sl_course
教授ID | course_id | 课程名
1 1“历史”
1 2“法律”
1 3“艺术”
1 2“法律”

```

**我已有的信息**

*   项目 ID = 50
*   教授 ID = 1

**我想要的是：**

> 我想要教授正在教授的所有 course_id，其中 course_id 不隶属于手头的项目（在这种情况下，手头的项目是`1`- 如上所示。

**所以，我想从查询中返回的数据是：**

```
2“法”
3“艺术”

```

** 我的尝试：**

```
$sql_course_not_in_project = "SELECT C.course_id, C.course_subject
FROM sl_course C
LEFT OUTER JOIN sl_project_course PC on PC.project_id = 50
WHERE C.course_id <> PC.course_id AND C.professor_id = 1"; 
```

### 这有效，除非 sl_project_course 中有两行查询不再正常工作。

我很感激任何帮助！

谢谢，

埃文

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T20:30:19.907

```
SELECT c.course_id, c.course_subject
    FROM sl_course c
        LEFT JOIN sl_project_course pc
            ON c.course_id = pc.course_id
                AND pc.project_id = 50
    WHERE c.professor_id = 1
        AND pc.course_id IS NULL 
```

# iphone - xcode将整数写入核心数据

> ID：10287739
> 
> 赞同：0
> 
> 时间：2012-04-23T20:26:33.627
> 
> 标签：iphone, core-data

我正在尝试插入核心数据中的实体。有两个值需要写入，一个是字符串，另一个是整数。这是代码；

```
 NSManagedObject *newCounter;
    newCounter = [NSEntityDescription insertNewObjectForEntityForName:@"SysCounters" inManagedObjectContext:context];

    [newCounter setValue:[NSNumber numberWithInt:i] forKey:@"counterValue"];
    [newCounter setValue:@"genID" forKey:@"counterID"];
    counterValue = 1000;
    NSError *error;
    [context save:&error]; 
```

我应该让您知道 i 是上面计算的有效整数。它确实保存了“countValue”

# iphone - 使用通知传递数据，iphone

> ID：10287741
> 
> 赞同：6
> 
> 时间：2012-04-23T20:26:55.130
> 
> 标签：iphone, ios

> **可能重复：**
> [使用 NSNotification 将 NSString 变量传递给其他类](https://stackoverflow.com/questions/10272068/pass-nsstring-variable-to-other-class-with-nsnotification)

我的问题是：我们是否可以使用来自 Iphone 通知类的 postNotificationName 和 addObserver 将数据从一个视图控制器传递到另一个视图控制器

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-23T20:44:35.423

您可以在 API 调用的 userDictionary 元素中传递数据

```
NSDictionary *aDictionary = [[NSDictionary alloc] initWithObjectsAndKeys:
                          anObject, @"objectName", 
                          anotherObject, @"objectId",
                          nil] autorelease];
[[NSNotificationCenter defaultCenter] postNotificationName:@"AnythingAtAll" object:nil userInfo:aDictionary]; 
```

您可以从您观察到的入站通知中检索字典。在发布通知之前添加观察者。

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(anyAction:) name:@"AnythingAtAll" object:nil]; 
```

这可能在您的 init 方法或 viewDidLoad 方法中

```
-(void)anyAction:(NSNotification *)anote
{
NSDictionary *dict = [anote userInfo];
AnyClass *objectIWantToTransfer = [dict objectForKey:@"objectName"];
} 
```

请注意，您应该在 dealloc 方法中将您的对象作为观察者移除。

```
[[NSNotificationCenter defaultCenter] removeObserver:self] 
```

# c - 需要帮助来删除和编辑库存中的项目

> ID：10287742
> 
> 赞同：-3
> 
> 时间：2012-04-23T20:26:57.243
> 
> 标签：c, visual-studio-2010, visual-c++, compiler-construction

> **可能重复：**
> [C 中的库存程序。需要有关如何从库存中删除项目的帮助](https://stackoverflow.com/questions/10286643/inventory-program-in-c-need-help-on-how-to-delete-an-item-from-inventory)

这是一个保存库存并显示带有选项的菜单的程序。

除了删除和编辑条目库存项目外，其他一切都完美无缺。我不知道如何让它删除一个项目及其拥有的全部数据。我创建了一个函数`FindLocation`来查找数组中条目的位置：

*   我输入要删除的项目名称，然后输入显示条目，它陷入了无限混乱。
*   当您想删除或编辑一个项目时，它会要求一个项目或条目。
*   我不知道要输入什么才能找到项目或项目的（位置）。
*   运行程序并显示库存，然后尝试删除条目，然后再次显示库存。你会看到我正在谈论的混乱。

有人可以帮我解决`FindLocation`一下要输入的内容，然后才能删除库存中的项目。当您选择删除库存中的项目时，我不知道该输入什么。它问：

> 输入要删除的项目或条目：

`Xbox360`例如，我输入...它会返回 a `-1`，仅此而已。我选择显示库存以查看该项目是否被删除并且它陷入了无限混乱。如果可以，请添加或编辑此代码并向我解释您添加的内容。那很好啊。谢谢，你们是最棒的。

所有这些都是使用 Visual Studio 2010 开发的。代码如下：

```
#include <stdio.h>
#include <string.h>
#include <ctype.h>
#define SIZE 25
#define MAX 100

  typedef struct {
    char item[SIZE]; //item for the company
    char company[SIZE]; //company that sells the item
    int intStock; //how many of the item are instock
    char lastShipDate[SIZE]; //last ship date of that item
    double cost; //cost to make the item
    double price; //price of the item 
    } gaming;

//prompts the user to get a selection
int Menu(void);

//display the options to the user
void DisplayOptions(void);

//display some entries for inventory
void HardCodeEntries(gaming entry[],int *size);

//function to add a new entry to the inventory
void AddNewEntry(gaming entry[], int *size);

//function to delete a selected entry from inventory
void Delete(gaming entry[], int *size, int location);

//display the current inventory to screen
void Display(gaming entry[], int size);

//save the current inventory to file
void SaveInventory(gaming br[], int *size);

//clears out the entire inventory
void Clear(int *size);

//load the inventory from the file that is being saved
void LoadSalesRecords(gaming br[], int *size);

//find location of entry that is going to be edited or deleted
int FindLocation(gaming entry[], int size);

//display the options for editing an entry
int EditMenuOptions(void);

//function to edit selected entry
void Edit(gaming entry[], int location);

int main()
{
    int selection;
    gaming entry [150];
    int size=0;
    char trash;
    int choice;
    int location;

    //display size of inventory before and after
    printf("\nSIZE before: %d", size);
    HardCodeEntries(entry, &size);
    printf("\nSIZE after: %d\n\n", size);

    DisplayOptions();

    selection= Menu();

    while(selection != 8)
    {
          if (selection==1)
          { 
              printf("ADD ENTRIES\n\n");
              //display size of inventory before adding entries
              printf("\nSIZE BEFORE ADDING: %d\n", size);

              AddNewEntry(entry, &size);

              //display size of inventory after adding entries
              printf("\nSIZE AFTER ADDING: %d\n", size);
          }
          else if(selection==2)
          {
              printf("DELETE\n\n");
              //get location of entry to be deleted

              location = FindLocation(entry,size);
              printf("\nLOCATION: %d\n", location);

              Delete(entry, &size, location);
          }
          else if(selection==3)
          {
              printf("EDIT\n\n");

              //get the location of entry to be edited
              location = FindLocation(entry, size);

              printf("\nLOCATION: %d\n", location);
              Edit(entry, location);
          }
          else if(selection==4)
          {
              printf("DISPLAY OF INVENTORY\n\n");
              Display(entry, size);
          }
          else if(selection==5)
          {
              printf("SAVING CURRENT INVENTORY TO FILE\n\n");
              SaveInventory(entry, &size);
              //saves to file
          }
          else if(selection==6)
          {
              printf("CLEARING ENTIRE DATA\n\n");
              Clear(&size);
          }
          else if(selection==7)
          {
              printf("LOADING SALES RECORDS FROM FILE\n\n");
              LoadSalesRecords(entry, &size);
          }
          else
          {
              printf("COMMAND NOT RECOGNIZED\n\n");
          }

          printf("\n\n");
          DisplayOptions();

          //clears buffer
          scanf("%c", &trash);

          selection = Menu();
    }

    if (selection==8)
    {
        printf("\nHAVE A NICE DAY!!!\n\n");
    }
    return 0;
}

//display the options to the user
void DisplayOptions(void)
{
    printf("HELLO, WELCOME TO THE INVENTORY PROGRAM.\n");
    printf("THIS PROGRAM HOLDS INVENORY FOR ELECTRONICS COMPANIES ALONG WITH THEIR ITEMS, COST TO PRODUCE, PRICE,\n");
    printf("LAST SHIP DATE AND NUMBER IN STOCK\n");
    printf("THERE ARE COMPANIES IN THE INVENTORY ALREADY\n");
    printf("*********************************************\n\n");
    printf("HERE ARE YOUR OPTIONS\n");
    printf("1--ADD A NEW ENTRY\n");
    printf("2--DELETE AN ENTRY\n");
    printf("3--EDIT AN ENTRY\n");
    printf("4--DISPLAY THE INVENTORY\n");
    printf("5--SAVE CURRENT INVENTORY TO FILE\n");
    printf("6--CLEAR THE ENTIRE INVENTORY\n");
    printf("7--LOAD SALES RECORD FROM FILE\n");
    printf("8--QUIT\n");
}

//prompts the user to get a selection
int Menu(void)
{
    int selection;
    printf("\nENTER SELECTION: ");
    scanf("%d", &selection);

    return selection;
}

//display some entries for inventory
void HardCodeEntries(gaming entry[], int *size)
{
    strcpy(entry[0].item,"Xbox360");
    strcpy(entry[0].lastShipDate,"04/10/12");
    entry[0].cost=200.00;
    strcpy(entry[0].company,"Microsoft");
    entry[0].price=300.0;
    entry[0].intStock=150;

    *size = *size + 1;

    strcpy(entry[1].item,"PlayStation3");
    strcpy(entry[1].lastShipDate,"04/10/12");
    entry[1].cost=200.00;
    strcpy(entry[1].company,"Sony");
    entry[1].price=450.00;
    entry[1].intStock=100;

    *size = *size + 1;

    strcpy(entry[2].item,"XboxController");
    strcpy(entry[2].lastShipDate,"04/10/12");
    entry[2].cost=25.00;
    strcpy(entry[2].company,"Microsoft");
    entry[2].price=50.00;
    entry[2].intStock=50;

    *size = *size + 1;

    strcpy(entry[3].item,"PS3Controller");
    strcpy(entry[3].lastShipDate,"04/10/12");
    entry[3].cost=30.00;
    strcpy(entry[3].company,"Sony");
    entry[3].price=45.00;
    entry[3].intStock=50;

    *size = *size + 1;

    strcpy(entry[4].item,"Wii");
    strcpy(entry[4].lastShipDate,"04/10/12");
    entry[4].cost=100.00;
    strcpy(entry[4].company,"Nintendo");
    entry[4].price=200.00;
    entry[4].intStock=150;

    *size = *size + 1;

}

//function to add a new enty to the inventory
void AddNewEntry(gaming entry[], int *size)
{
    printf("\nENTER ITEM:\t\t");
    scanf("%s", entry[*size].item);

    printf("ENTER SHIP DATE:\t");
    scanf("%s", entry[*size].lastShipDate);

    printf("ENTER COST TO MAKE:\t\t");
    scanf("%lf", &entry[*size].cost);

    printf("ENTER COMPANY:\t\t");
    scanf("%s", entry[*size].company);

    printf("ENTER PRICE:\t\t");
    scanf("%lf", &entry[*size].price);

    printf("ENTER NUMBER IN STOCK:\t");
    scanf("%d", &entry[*size].intStock);

    *size = *size + 1;
}

//function to delete a selected entry from inventory
void Delete(gaming entry[], int *size, int location)
{
    entry[location] = entry[*size - 1];
    *size = *size - 1;
}

//display the current inventory onto the screen
void Display(gaming entry[], int size)
{
    int i;
    for(i=0; i<size; i++)
    {
        printf("\n");
        printf("ITEM:\t\t %s\n", entry[i].item);
        printf("LAST SHIP DATE:\t %s\n", entry[i].lastShipDate);
        printf("COST:\t\t %4.2f\n",entry[i].cost);
        printf("COMPANY:\t %s\n", entry[i].company);
        printf("PRICE:\t\t %4.2f\n", entry[i].price);
        printf("IN STOCK:\t %d\n", entry[i].intStock);
    }
}

//save the current inventory to a file
void SaveInventory(gaming br[], int *size)
{
    FILE *outp;

    if((outp = fopen("output.txt","w"))==0)
    {
        printf("\nCANNOT OPEN FILE\n");
        return;
    }

    //connect to the file
    outp= fopen("output.txt","w");

    fprintf(outp,"%d", *size);
    fwrite(br, sizeof(gaming),*size,outp);

    //close file pointer
    fclose(outp);
}

//clears out the entire inventory
void Clear(int *size)
{
    *size = 0;
}

//load the inventory from the file that is being saved
void LoadSalesRecords(gaming br[], int *size)
{
    FILE * inp;

    if((inp = fopen("output.txt","r"))==0)
    {
        printf("CANNOT OPEN FILE\n");
        return;
    }
    //connect to file
    inp = fopen("output.txt","r");

    fscanf(inp,"%d",size);
    fread(br, sizeof(gaming),*size,inp);

    //close file pointer
    fclose(inp);
}

//find location of entry that is going to be edited or deleted
int FindLocation(gaming entry[], int size)
{
    int i;
    int j;
    int length;
    char userItem[SIZE];

    //enter the item to delete
    printf("ENTER ITEM TO EDIT OR DELETE: ");
    scanf("%s", userItem);
    length = strlen(userItem);

    for(i=0; i<length; i++)
    {
        userItem[i] = toupper(userItem[i]);
    }
    printf("\nYOUR BRAND IN UPPER CASE IS:  %s\n", userItem);

    for(j=0; j<size; j++)
    {
        if(strcmp(entry[j].item,userItem)==0)
        {
            return j;
        }
    }
    return -1;
}

//function to edit a selected entry
void Edit(gaming entry[], int location)
{
    int choice;

    choice = EditMenuOptions();

    if(choice==1)
    {
        printf("\nENTER NEW ITEM: ");
        scanf("%s", &entry[location].item);
    }
    else if(choice==2)
    {
        printf("\nENTER SHIP DATE: ");
        scanf("%s", &entry[location].lastShipDate);
    }
    else if(choice==3)
    {
        printf("\nENTER COST TO MAKE: ");
        scanf("%lf", &entry[location].cost);
    }
    else if(choice==4)
    {
        printf("\nENTER COMPANY: ");
        scanf("%s", &entry[location].company);
    }
    else if (choice==5)
    {
        printf("\nENTER PRICE: ");
        scanf("%lf", &entry[location].price);
    }
    else if (choice==6)
    {
        printf("\nENTER HOW MANY IN STOCK: ");
        scanf("%d", &entry[location].intStock);
    }
    else if (choice==7)
    {

        printf("\nENTER NEW ITEM: ");
        scanf("%s", &entry[location].item);
        printf("\nENTER SHIP DATE: ");
        scanf("%s", &entry[location].lastShipDate);
        printf("\nENTER COST TO MAKE: ");
        scanf("%lf", &entry[location].cost);
        printf("\nENTER COMPANY: ");
        scanf("%s", &entry[location].company);
        printf("\nENTER PRICE: ");
        scanf("%lf", &entry[location].price);
        printf("\nENTER HOW MANY IN STOCK: ");
        scanf("%d", &entry[location].intStock);
    }
    else
    {
        printf("Invalid Entry");
    }
}

//display the options for edditing an entry
int EditMenuOptions(void)
{
    int choice;

    printf("\nENTER 1 TO EDIT ITEM\n");
    printf("ENTER 2 TO EDIT DATE\n");
    printf("ENTER 3 TO EDIT COST\n");
    printf("ENTER 4 TO EDIT COMPANY\n");
    printf("ENTER 5 TO EDIT PRICE\n");
    printf("ENTER 6 TO EDIT NUMBERS IN STOCK\n");
    printf("ENTER 7 TO EDIT ALL DATA\n");
    printf("\nENTER SELECTION: ");
    scanf("%d", &choice);
    return choice;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T03:24:57.600

回覆。您已删除的问题：对于 getGrades，您需要将 scanf 放入一个循环中，检查是否输入了负数，如果没有则重新提示。输入的每个非负分数都需要以某种方式存储 - 数组似乎最简单输入负数后，您需要遍历数组并计算平均值。

对于 Get_Info，您只需将一个参数传递给函数，即指向您的结构的指针。您需要设置指针，然后将其传入。函数本身应该从用户那里获取数据（而不是像您所做的那样显示它）。因此，您需要再次使用 scanf，但使用刚刚传递的指针存储数据。

希望这能让你朝着正确的方向前进 :) 对不起，你被质问了。

# java - Android 包管理器列表不显示导航图标

> ID：10287743
> 
> 赞同：2
> 
> 时间：2012-04-23T20:26:59.310
> 
> 标签：java, android

我正在使用以下代码获取应用程序列表：

```
 List<ApplicationInfo> packages = pm.getInstalledApplications(PackageManager.GET_META_DATA);
    Collections.sort(packages, new ApplicationInfo.DisplayNameComparator(pm));
    for (int i = 0; i < packages.size(); i++) {
        if (packages.get(i).uid > 10000) {
            try {
                Log.d(pm.getApplicationLabel(packages.get(i));
            } catch (NameNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    } 
```

现在的问题是有些应用程序没有显示在列表中，例如 Google 导航。知道这是为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T15:22:50.340

这就是我最终使用的完美效果：

```
Intent applications = new Intent(Intent.ACTION_MAIN);
applications.addCategory(Intent.CATEGORY_LAUNCHER);
applicationIntentList = pm.queryIntentActivities(applications, 0); 
```

# php - 使用 PHP 登录谷歌

> ID：10287745
> 
> 赞同：0
> 
> 时间：2012-04-23T20:27:13.867
> 
> 标签：php

有没有办法在 php 脚本中预编程您的用户名和密码，这样当有人点击链接时，它会将他们带到登录的帐户？我主要只需要知道如何格式化链接，但如果那不可能并且我需要使用 curl 我可以（也想知道重定向到登录站点的代码）。

这几乎可以工作（用我的用户名替换 LOGIN，用我的密码替换 PASSWORD），但我仍然必须输入密码并点击提交： [https://www.google.com/accounts/ServiceLoginAuth?continue=http://google。 com/voice&service=grandcentral&Email=LOGIN&Passwd=PASSWORD&null=登录+登录](https://www.google.com/accounts/ServiceLoginAuth?continue=http://google.com/voice&service=grandcentral&Email=LOGIN&Passwd=PASSWORD&null=Sign+in)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T20:37:34.127

好吧，如果它有效，您可以将电子邮件/密码存储在一个数组中并制作一个 URL，然后将用户重定向到该 URL。

在脚本/程序中硬编码密码是一种不好的做法。在 URL 中发送密码（即使用 GET 方法）也是一种不好的做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T20:57:36.523

您无法通过这种方式登录 Google。您可以获得的最接近的方法是设置一个带有隐藏字段的表单，该表单发布到他们的服务器以登录，但是他们检查了引用标题，所以这不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-03T21:37:02.847

使用我在这个类中使用的登录功能

[https://github.com/hbattat/GeeVeeSMS](https://github.com/hbattat/GeeVeeSMS)

# java - Mockito 间谍测试

> ID：10287746
> 
> 赞同：7
> 
> 时间：2012-04-23T20:27:15.380
> 
> 标签：java, spring, mockito

我正在使用 Mockito 编写代码测试。但是我被困在以下场景 - A 类有 2 个方法，method1() 和 method2()。我尝试使用 ArgumentCaptor 捕获发送到 method2() 的值。但是，由于我使用的是@Spy，所以我不能使用 Matchers。

如何测试 method1()？

```
class A{
    B b;
    method1(arg1, arg2){
       //some logic
       method2(arg1, arg2, ....argN);
    }

   method2(arg1, arg2,....argN){
       //some logic
       b.method3(arg1, arg2...);
   }
} 
```

如何验证 method2 接收相同的参数值？以下是我写的测试类：

```
Class TestA{

@Mock
B b;

@Spy
@InjectMocks   //required else b is null
A a = new A();

@Test
public void testMethod1(){

 a.method1(arg1, arg2);

  //How to verify method2 receives same argument values (arg1, arg2)????
  //verify(a, times(1)).method2(.......);   
} 
```

}

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-25T11:38:58.507

我对这篇文章和@David 留下的评论很感兴趣，所以我决定为像我这样关注的人编写一个工作示例

```
/*
 * class to test
 */
public class A {

    public void methodA(String str) {
        this.methodB(str);
    }

    protected void methodB(String str) {
        // some implementation
    }
} 
```

我们想要断言传递给 methodB() 的值是我们所期望的。阅读[ArgumentCaptor](http://docs.mockito.googlecode.com/hg/org/mockito/ArgumentCaptor.html)让我发现了等效的[Captor Annotation](http://docs.mockito.googlecode.com/hg/org/mockito/Captor.html)

```
import static org.junit.Assert.assertEquals;
import static org.mockito.Mockito.verify;

import org.junit.Test;
import org.junit.runner.RunWith;
import org.mockito.ArgumentCaptor;
import org.mockito.Captor;
import org.mockito.Spy;
import org.mockito.runners.MockitoJUnitRunner;

@RunWith(MockitoJUnitRunner.class)
public class MultipleMethodCallTest {

    @Spy
    A a = new A();

    @Captor ArgumentCaptor<String> captor;

    @Test
    public void captureSecondMethodCallArgument() throws Exception {

        // EXPECTED

        String greeting = "hello world";

        // PERFORM TEST

        a.methodA(greeting);

        // ASSERT

        verify(a).methodB(captor.capture());

        assertEquals(greeting, captor.getValue());
    }
} 
```

这个例子已经过测试

*   mockito-all-1.8.5.jar
*   junit-4.8.2.jar

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T20:34:54.713

你不能，你必须通过 B 的 method3 调用来验证它。如果您对method2的args对method3没有影响，那么这些args可能根本没用？！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-24T06:16:36.130

您可以将匹配器与间谍一起使用；这很好用。我不知道你为什么认为你不能。

我获取了您的源代码并对其进行了编辑以使其编译。然后我添加了一个调用`MockitoAnnotations.initMocks`- 你需要它来创建间谍和模拟，并注入模拟（除非你使用`MockitoJUnitRunner`，它`initMocks`为你做的）。我把`verify`电话放`method2`回去了。这很好用。

因此，与 Omnaest 的回答相反，您不需要使用 B`method3`来验证这一点。我怀疑您唯一的问题是您忘记了`initMocks`.

祝你好运，如果您需要更多帮助，请随时再次发布。

# javascript - 在 ASP.net MVC 中使用 Ajax 插入

> ID：10287747
> 
> 赞同：-5
> 
> 时间：2012-04-23T20:27:18.340
> 
> 标签：javascript, ajax, asp.net-mvc

我正在寻找如何在 ASP.net MVC 中使用 Ajax 将数据插入到我的数据库中。正是我想要当用户单击添加新项目时，会显示一个弹出窗口，用户将在其中放置一些数据和一个`Ok`Onclick 这将添加插入的数据并关闭此弹出窗口或显示错误消息。我正在使用`Data entity Framework`. 很抱歉这个问题，但我是 ASP.net MVc 和 Ajax 的大人物，所以请任何帮助或 Tuto 链接，这会很好:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T20:33:49.597

你可能想看看 asp.net webapi 它内置在 asp.net MVC 4 中。

你不必使用它，但它是做 Ajaxy 东西的好方法。然而，基本的想法是你 GET/POST（在 jquery 中使用 .post 或 .get 之类的东西）到一个动作（基本上是一个 URL）。然后，该操作负责将内容存储到数据库中。

你会想了解模型绑定和 json.... 这就是 asp.mvc 将 C# 对象与 JSON 相互转换的能力

你会想去看看一些 asp.net mvc 示例应用程序，比如书呆子晚餐，对于 MVC 和 ajax 的示例......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T20:33:56.463

只需看看[Microsoft ASP.Net MVC 教程](http://www.asp.net/mvc/tutorials)。

他们非常有帮助，我不能写出比他们已经写的更好的解决方案；-)

# android - android sdk 中的 awt.Robot 等效项

> ID：10287748
> 
> 赞同：1
> 
> 时间：2012-04-23T20:27:20.057
> 
> 标签：android, android-sdk-2.3, awtrobot

我已经看过一些与此相关的帖子。但我还没有得到我的答案。Android中是否有类似的awt.Robot可以执行模拟按键等操作？我有一个 java 应用程序，我使用这个 awt.Robot 使用文件选择器上传文件。我现在想在电话上做同样的事情。我希望能够使用 Robot 或类似的东西通过文件选择器自动上传图像。你能告诉我是否有任何与 awt.Robot 等价的东西吗？我已经检查了其中一篇文章中提到的[http://code.google.com/p/awt-android-compat/](http://code.google.com/p/awt-android-compat/)，但它还没有准备好用于模拟按键等。

我真的很感激任何形式的帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T20:31:25.800

MonkeyRunner[就](http://developer.android.com/guide/developing/tools/monkeyrunner_concepts.html)足够了吗？它是android上的UI自动化工具

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T20:34:15.737

Android 不支持它，并且可能永远不会支持。您可以使用 http/sockets 以编程方式发送文件，而不是在 filechooser 组件上模拟按键。

# mfc - 应用程序终止时在剪贴板中留下 CFSTR_FILECONTENTS/CFSTR_FILEDESCRIPTOR 条目

> ID：10287756
> 
> 赞同：2
> 
> 时间：2012-04-23T20:27:31.757
> 
> 标签：mfc, ole

我一直在使用这些剪贴板格式来允许将数据作为文件从我的应用程序直接粘贴到 Windows 资源管理器中。

我的实现使用了 MFC 类 COleDataSource ，但这只是 IDataObject 和像 OleSetClipboard 这样的 API 的包装。

当我的应用程序终止 IDataObject 的本地实现时（即从 COleDataSource 派生的类）将不得不消失，因此我调用 COleDataSource::FlushClipboard。这应该将所有当前数据的副本放入剪贴板（甚至延迟渲染的内容），以便在应用程序关闭后可用。

这适用于 CF_TEXT 等简单格式，但 CFSTR_FILECONTENTS 格式不再适用。Windows 资源管理器提供了一个粘贴菜单项，但是当我尝试粘贴时，会发出标准的 MessageBeep 声音并且没有任何反应。

是否有可能让它工作或者依赖于原始 IDataObject 实现的 CFSTR_FILECONTENTS 仍然处于活动状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T14:27:35.393

复杂数据在您请求时被复制。如果你的源已经死了，你的数据就消失了。

# powershell - Powershell 脚本文件名增量

> ID：10287762
> 
> 赞同：0
> 
> 时间：2012-04-23T20:28:11.833
> 
> 标签：powershell

在 Powershell 中，我想自动化更改一组文件的文件名并将最新版本的类似文件复制到该目录。

1.  删除最旧的

    ```
    (file3.bak) --> none 
    ```

2.  增加备份目录中当前文件的文件名

    ```
     (file1.bak) --> (file2.bak)
        (file2.bak) --> (file3.bak) 
    ```

3.  将最新版本的文件从另一个目录复制到此备份目录

    ```
    (newestfile.txt)   --> (file1.bak) 
    ```

这是据我所知并且被卡住了：

```
$path = "c:\temp"
cd $path

$count = (get-childitem $path -name).count
Write-Host "Number of Files: $count"

$items = Get-ChildItem | Sort Extension -desc | Rename-Item -NewName {"gapr.ear.rollback$count"}

$items | Sort Extension -desc | ForEach-Object  -begin { $count= (get-childitem $path -name).count }  -process { rename-item $_ -NewName "gappr.ear.rollback$count"; $count-- } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T06:55:00.277

像这样的东西？删除 '-Whatif's 来做真实的事情。

```
$files = @(gci *.bak | sort @{e={$_.LastWriteTime}; asc=$true})

if ($files)
{
    del $files[0] -Whatif
    for ($i = 1; $i -lt $files.Count; ++$i)
     { ren $files[$i] $files[$i - 1] -Whatif }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T17:06:59.720

感谢所有回复的人。感谢您的帮助

```
 #Directory to complete script in
$path = "c:\temp"
cd $path

#Writes out number of files in directory to console
$count = (get-childitem $path -name).count
Write-Host "Number of Files: $count"

#Sorts items by decsending order
$items = Get-ChildItem | Sort Extension -desc 

#Deletes oldest file by file extension number
del $items[0]

#Copy file from original directory to backup directory
Copy-Item c:\temp2\* c:\temp

#Sorts items by decsending order
$items = Get-ChildItem | Sort Extension -desc

#Renames files in quotes after NewName argument
$items | ForEach-Object  -begin { $count= (get-childitem $path -name).count }  -process { rename-item $_ -NewName "file.bak$count"; $count-- } 
```

# python - Python 中的 vars() 给出不同的输出

> ID：10287764
> 
> 赞同：3
> 
> 时间：2012-04-23T20:28:23.887
> 
> 标签：python, string, names, variables

当我运行此代码时：

```
a = '1'
vars()['a'] = '2'
print a 
```

我得到以下输出：

```
2 
```

但是当我运行这段代码时：

```
def bar():
    a = '1'
    vars()['a'] = '2'
    print a

bar() 
```

我得到以下输出：

```
1 
```

现在我的问题是为什么会发生这种情况，我怎样才能让第二种情况给我与第一种情况相同的解决方案。

编辑：

无法真正找到解决方案，但我发现了一个小技巧......虽然我宁愿不使用 exec：

```
def bar():
    a = "a"
    b = "b"
    exec a+"="+b
    print a

bar() 
```

这让我得到了结果：

```
b 
```

如果有人能找到更好的解决方案，那就太好了。我不会以这种方式设置任何全局变量或做任何疯狂的事情，所以不要担心。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T20:32:50.807

看起来新样式类会覆盖默认`__dict__`行为，从而破坏`vars()`. 不确定为什么它会影响旧样式类，但它可能是相关的。

来自文档（http://docs.python.org/library/functions.html#vars）：

* * *

`vars([object])` 返回`__dict__`模块、类、实例或任何其他具有属性的对象的`__dict__`属性。

模块和实例等对象具有可更新`__dict__`属性；但是，其他对象可能对其`__dict__`属性有写入限制（例如，新型类使用 dictproxy 来防止直接字典更新）。

如果没有参数，vars() 的行为就像 locals()。请注意，本地字典仅对读取有用，因为本地字典的更新被忽略。

* * *

您能否评论一下为什么`self. = val`或`setattr(self, 'x', val)`不适用于您的班级案例？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T23:41:43.353

`vars()`未定义对结果的赋值。因此，它可能会在不同的场景和/或 python 版本和/或实现中给出不同的结果。尽管能够使用这种方式更改局部变量听起来可能令人震惊（我曾尝试将它用于正则表达式 groupdict 结果），但这是高度不可移植的，并且可能随时中断。

# sql - Oracle if 语句在 where 子句中

> ID：10287766
> 
> 赞同：1
> 
> 时间：2012-04-23T20:28:41.633
> 
> 标签：sql, oracle, if-statement

我有以下查询

```
SELECT * FROM(
  SELECT
       CASE
            WHEN TO_CHAR (ADD_MONTHS(:DATEINPUT, 1), 'MM') = '10' 
            THEN
                TO_CHAR (ADD_MONTHS(:DATEINPUT, 1), 'MM')
            WHEN SUBSTR (TO_CHAR (ADD_MONTHS(:DATEINPUT, 1), 'MM'), 1, 1) = '0' 
            THEN
               SUBSTR (TO_CHAR (ADD_MONTHS(:DATEINPUT, 1), 'MM'), 2, 1)
            ELSE
               SUBSTR (TO_CHAR (ADD_MONTHS(:DATEINPUT, 1), 'MM'), 1, 2) 
         END
            AS CUR_MONTH_FRMTD,
       P.OPR_DATE,
       P.INDICE,
       P.LOAD_TYPE,
       P.CONTRACT_MONTH,
       P.CONTRACT_YEAR,
       P.VALUE,
       P.DATE_INSERTED,
       P.DATE_UPDATED
  FROM ZE_DATA.PWX_FWD_CURVE P ) Q
  WHERE
  Q.LOAD_TYPE = 'HLH'
  AND Q.INDICE = 'MidC'
  AND Q.CONTRACT_YEAR = TO_CHAR(:DATEINPUT, 'YYYY') 
  AND Q.CONTRACT_MONTH = Q.CUR_MONTH_FRMTD
  AND TO_CHAR(Q.DATE_INSERTED, 'MM') = TO_CHAR(:DATEINPUT, 'MM')
  AND TO_CHAR(Q.DATE_INSERTED, 'YY') = TO_CHAR(:DATEINPUT, 'YY')
  AND TO_CHAR(Q.DATE_INSERTED, 'DD') = TO_CHAR(:DATEINPUT, 'DD') 
```

将记录缩小到插入之日非常有效，根据需要只返回一条记录。但问题是周六或周日没有插入记录，破坏了过滤的用处。

对于周六或周日，我需要获取周五的数据。我认为像下面这样的逻辑会起作用。但这不能在 oracle SQL 中完成。

```
 IF TO_CHAR(:DATEINPUT, 'DAY') = 'SATURDAY' THEN
  WHERE
  ....
  AND TO_CHAR(Q.DATE_INSERTED, 'DD') = TO_CHAR(:DATEINPUT-1, 'DD')
  ELSE IF TO_CHAR(:DATEINPUT, 'DAY') = 'SUNDAY' THEN
  WHERE
  ....
  AND TO_CHAR(Q.DATE_INSERTED, 'DD') = TO_CHAR(:DATEINPUT-2, 'DD') 
```

在这一点上，我需要在 select 语句中完成这项工作。不能使用存储过程。谁能想到解决方案或解决方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T20:34:13.007

而不是一个 IF 为什么不只是一个嵌套或像这样

```
Where ...
  AND 
    (
        (TO_CHAR(:DATEINPUT, 'DAY') = 'SATURDAY' AND TO_CHAR(Q.DATE_INSERTED, 'DD') = TO_CHAR(:DATEINPUT-1, 'DD'))
        OR 
        (TO_CHAR(:DATEINPUT, 'DAY') = 'SUNDAY' AND TO_CHAR(Q.DATE_INSERTED, 'DD') = TO_CHAR(:DATEINPUT-2, 'DD'))
    )
    AND ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-18T16:07:09.240

这个怎么样，如果我理解了这个要求：

```
where  q.date_inserted =
       case to_char(:dateinput,'fmDy','nls_date_language = English')
           when 'Sat' then :dateinput -1
           when 'Sun' then :dateinput -2
           else :dateinput
       end; 
```

（如果日期列和参数可以包含时间，它会稍微复杂一些。如果日期列没有被索引或分区键，那么你可以把`trunc()`所有东西都放在周围；如果是，那么它可能值得构建一个`between`表达式。）

# tfs - 在单独的域上安装 TFS 2010 构建服务

> ID：10287767
> 
> 赞同：1
> 
> 时间：2012-04-23T20:28:42.500
> 
> 标签：tfs

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T11:13:23.800

我认为您必须使用 Y 域的服务帐户在笔记本电脑上运行构建控制器。如果您的笔记本电脑可以向 Y 域发出身份验证请求，它应该可以工作。

如果您使用 X 域帐户运行构建控制器，理论上您可以做到，但这并不容易，必须在 Y 上创建两个域之间的认可，并且 Y 必须能够连接和验证 X 域帐户（所以这是一个两种方式认可）。然后不要忘记将 X 域帐户放入 TFS 的 Build 组成员中，以获取请求的权限。但是，这种情况几乎从未使用过，我认为您会遇到很多麻烦。尝试我给你的第一个解决方案。

# javascript - KnockoutJS - 仅绑定初始值

> ID：10287769
> 
> 赞同：0
> 
> 时间：2012-04-23T20:28:47.280
> 
> 标签：javascript, knockout.js

有没有一种干净的方法可以使用 KnockoutJS 仅将 observable 的初始值绑定到 dom 元素？

我知道你可以通过绑定到一个不可观察的来实现这一点，但我宁愿不创建一个多余的属性来保存另一个可观察属性的初始值。

我试过这个，但无济于事——属性仍然随着每次变化而更新

```
<input type="text" id="tbName" 
  data-bind="value:name, attr: { 'data-initialnamevalue': ko.utils.unwrapObservable($data.name()) }" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T20:34:01.370

虽然我同意上面的 Zero21xxx，但我想您可以使用自定义绑定，在其中提供 init 方法，但不提供更新方法。

不确定与仅添加另一个属性相比是否值得付出努力。

这是我的意思的一个简单示例：http: [//jsfiddle.net/ZkFRu/3/](http://jsfiddle.net/ZkFRu/3/)

第一段绑定属性的当前值，第二段绑定初始值。单击该按钮会增加该属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T21:06:55.857

您可以通过添加括号直接绑定到可观察值而不是可观察值，以便在首次绑定时注入该值。当元素更新时，它不会更新 observable，因为绑定是在值上而不是 observable 上（即它不知道如何调用 observable 函数来设置值）。

```
<input type="text" id="tbName" data-bind="value: name()" /> 
```

# sql-server - 如何将 sql 跟踪限制为单个存储过程？

> ID：10287771
> 
> 赞同：2
> 
> 时间：2012-04-23T20:28:51.477
> 
> 标签：sql-server

如何将 SQL 服务器跟踪限制为仅单个存储过程？

我知道我们可以跟踪数据库活动然后过滤结果，但如果可能的话，我希望在跟踪执行的方式上保持高效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T20:38:34.400

它称为[跟踪过滤器](http://msdn.microsoft.com/en-us/library/ms174404.aspx)，如果您正在设置某种系统进程来获取诊断数据，您可能只想这样做。

如果您只在想要使用 SQL Server Profiler（它使用 SQL Trace）时执行此操作，您可以通过事件选择选项卡 -> 列过滤器 -> 然后单击文本数据来执行此操作

# c++ - 如何从通过模板继承的类中提取 typedef 的信息？

> ID：10287775
> 
> 赞同：1
> 
> 时间：2012-04-23T20:29:17.873
> 
> 标签：c++, templates, typedef, icc

我有一个关于从通过模板继承的类中提取 typedef 信息的问题。为了说明我的问题，请考虑以下简单示例：

```
#include <iostream>

class A1{
public:
    void print(){ printf("I am A1\n"); };
};
class A2{
public:
    void print(){ printf("I am A2\n"); };
};

class B1{
public:
    typedef A1 A;
};

class B2{
public:
    typedef A2 A;
};

template<class b>
class C{
    typedef class b::A AA;
    AA a;
public:
    void Cprint() {     a.print();  };
};

int main()
{
    C<B1> c1;
    c1.Cprint();

    C<B2> c2;
    c2.Cprint();
} 
```

C 类将一个类（B1 或 B2）作为模板参数。B1 和 B2 都有一个名为 A 的 tyepdef（分别是 A1 和 A2 类）。在编译时，C 类应该能够确定“B”类正在使用两个“A”类中的哪一个。当我用 g++ 编译时，上面的代码运行良好。但是，当我使用 Intel 的 icpc 编译它时，出现以下错误：

```
test.cpp(24): error: typedef "A" may not be used in an elaborated type specifier
    typedef class b::A AA;
                     ^
    detected during instantiation of class "C<b> [with b=B1]" at line 33 
```

有没有其他方法可以达到类似的效果？当然，我的实际代码要复杂得多，我希望以这种方式构造类是有原因的。还有一些原因我想用 icpc 而不是 g++ 编译。

提前致谢。卡尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T20:39:33.913

尝试改变：

```
template<class b>
class C{
    typedef class b::A AA;
    AA a;
public:
    void Cprint() {     a.print();  };
}; 
```

到：

```
template<class b>
class C{
    typedef typename b::A AA;
    AA a;
public:
    void Cprint() {     a.print();  };
}; 
```

`b::A`是一个[依赖类型](https://stackoverflow.com/questions/610245/where-and-why-do-i-have-to-put-the-template-and-typename-keywords)（它取决于用于什么类型`b`）。

[仅供参考，原始发布的代码无法使用 VS2008 和 VS2010 编译。]

# ios - 如何将标签设置为 NSString

> ID：10287782
> 
> 赞同：0
> 
> 时间：2012-04-23T20:30:30.490
> 
> 标签：ios, nsstring, uilabel

嗨，我有 2 个标签 textview 和 labelsText，在这种方法中它们是 string1 和 string2，但我真的无法让 textview string1 和 labelsText string2 工作

这是代码：

```
-(void)findEqualsIn:(NSString *)string1 and:(NSString *)string2 {
    NSMutableArray *string1chars = [[NSMutableArray alloc] init];
    NSMutableArray *string2chars = [[NSMutableArray alloc] init];

    //filling the string1chars array
    for (int i = 0; i < [string1 length]; i++) {
        [string1chars addObject:[NSString stringWithFormat:@"%c", [string1 characterAtIndex:i]]];
    }

    //filling the string2chars array
    for (int i = 0; i < [string2 length]; i++) {
        [string2chars addObject:[NSString stringWithFormat:@"%c", [string2 characterAtIndex:i]]];
    }

    //checking if they have some letters in common on the same spot
    for (int i = 0; i < [string1chars count] && i < [string2chars count]; i++) {
        if ([[string1chars objectAtIndex:i] isEqualToString:[string2chars objectAtIndex:i]]) {
            //change the color of the character at index i to green
        } else {
            //change the color of the character at index i to the standard color

        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T20:32:26.367

`uilabel`a or中的所有文本`uitextview`必须是相同的字体/颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T20:45:10.427

由于 iOS SDK 中没有内置的富文本组件，因此仍然很少有可用的实现。我建议您使用[FTCoreText](https://github.com/FuerteInternational/FTCoreText)来创建 UILabels（不可编辑）和可编辑的[EGOTextView](https://github.com/enormego/EGOTextView)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T08:20:14.493

您可以添加多个标签，其中每个字母都包含在其中，并使其看起来像是仅在 1 个标签中。这将需要这样的东西：

```
//make sure the first word is always the one the user gave so you don't show him/her the hidden string
- (void)outputColoredLabelsTo:(UIView *)theView with:(NSString *)word1 and:(NSString *)word2 {
    UILabel *label = [[[UILabel alloc] initWithFrame:CGRectMake(0, 20, 0, 0)] autorelease];

    for (int i = 0; i < [word1 length] && i < [word2 length]; i++) {
        NSString *value = [NSString stringWithFormat:@"%c", [word1 characterAtIndex:i]];
        CGSize size = [value sizeWithFont:[UIFont systemFontOfSize:[UIFont systemFontSize]]];
        label = [[UILabel alloc] initWithFrame:CGRectMake(label.frame.origin.x + label.frame.size.width, label.frame.origin.y, size.width, size.height)];
        [label setText:value];

        if ([word1 characterAtIndex:i] == [word2 characterAtIndex:i]) {
            NSLog(@"Match found at index %i (letter %c)", i, [word1 characterAtIndex:i]);
            [label setTextColor:[UIColor greenColor]];
        } else {
            NSLog(@"No match found at index %i (printing letter %c)", i, [word1 characterAtIndex:1]);
            [label setTextColor:[UIColor blackColor]];
        }

        [theView addSubview:label];
    }
} 
```

# c# - 我应该为我的应用程序使用哪些 WPF 控件？

> ID：10287788
> 
> 赞同：0
> 
> 时间：2012-04-23T20:30:55.627
> 
> 标签：c#, wpf, user-interface, controls

首先，我对 Windows 窗体有些熟悉，但对 WPF 还是陌生的。我有一个主窗口，分为三个部分，我目前正在将它们作为页面实现。

第一个是固定大小的查看区域中的单个字符串队列。当在“顶部”添加一个新字符串时，“底部”的字符串会消失，从而产生滚动效果。 [这里以](http://i.imgur.com/n2cdl.png).

第二个看起来基本上像一个有 9 列和大约 15 行的网格。它实际上是三组三列，用于包装文本内容。例如，当第一部分填满时，将下一个数据元素添加到第二部分的第一行。[这里例如](http://i.imgur.com/oR79w.png)

第三个只是一个从左到右滚动的文本代码。

我会很感激任何见解。我也会考虑任何第三方控件。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T20:35:08.063

1）您可以为此使用一个简单的[ListBox](http://msdn.microsoft.com/en-us/library/system.windows.controls.listbox.aspx)。

2）您可能会根据自己的意愿弯曲[DataGrid](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.aspx)。

# php - 检查类是否在 PHP 中有方法

> ID：10287789
> 
> 赞同：21
> 
> 时间：2012-04-23T20:30:55.917
> 
> 标签：php, oop, class, methods

目前我的代码如下所示：

```
switch ($_POST['operation']) {
    case 'create':
        $db_manager->create();
        break;
    case 'retrieve':
        $db_manager->retrieve();
        break;
...
} 
```

我想要做的是，检查调用的方法是否`$_POST['operation']`存在：如果是则调用它，否则回显“错误”是否可能？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-04-23T20:32:51.767

您可以使用[method_exists](http://php.net/manual/en/function.method-exists.php)：

```
if (method_exists($db_manager, $_POST['operation'])){
  $db_manager->{$_POST['operation']}();
} else {
  echo 'error';
} 
```

*虽然我**强烈**建议你不要这样编程......*

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-23T20:32:55.617

您可以使用[is_callable()](http://nz.php.net/is_callable)或[method_exists()](http://nz.php.net/manual/en/function.method-exists.php)。

`__call()`它们之间的区别在于，如果处理方法调用，后者不适用于这种情况。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-23T20:33:01.663

利用[`method_exists()`](http://php.net/manual/en/function.method-exists.php)

```
method_exists($obj, $method_name); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-23T20:37:58.750

您可以使用`method_exists()`. **但这是一个非常糟糕的主意**

如果`$_POST['operation']`设置为一些神奇的函数名称（如[__set()](http://php.net/manual/en/language.oop5.overloading.php)），您的代码仍然会爆炸。最好使用允许的函数名称数组。

# objective-c - 实现上下文中缺少“@end”

> ID：10287790
> 
> 赞同：0
> 
> 时间：2012-04-23T20:31:05.263
> 
> 标签：objective-c

有两个与实施有关的错误。已注释掉错误。

```
Header file: 
#import <Foundation/Foundation.h>

@interface Appliance : NSObject {
  NSString *productName;
  int voltage;
}

@property (copy)NSString *productName;
@property int voltage;
-(id)initWithProductName:(NSString *)pn;

@end 
```

实现文件：

```
#import "Appliance.h"

@implementation Appliance //'@end' is missing in implementation context

@synthesize productName, voltage;

-(id)initWithProductName:(NSString *)pn
{
  // Call the NSObject's init method
  self = [super init];

  // Did it return something non-nil?
  if (self) {

    // Set the product name
    [self setProductName:pn];

    // Give voltage a starting value
    [self setVoltage:120];

  // Return a pointer to the new object
  return self;
}
@end // unexpected '@' in program 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T20:32:33.170

你忘了关闭 if 块

```
if (self) {

    // Set the product name
    [self setProductName:pn];

    // Give voltage a starting value
    [self setVoltage:120];
} // << missing 
```

# c# - 使用 SetOrdinal 向 DataTable 添加列

> ID：10287791
> 
> 赞同：3
> 
> 时间：2012-04-23T20:31:12.197
> 
> 标签：c#

假设我有一个包含五列的 DataTable。我很好奇为什么以下工作：

```
dt.Columns.Add("Blah").SetOrdinal(5); 
```

但以下抛出一个`ArgumentOutOfRangeException`：

```
dt.Columns.Add("Blah").SetOrdinal(dt.Columns.Count); 
```

我也试过

```
dt.Columns.Add("Blah").SetOrdinal(dt.Columns.Count - 1); 
```

哪个有效，但我不完全确定为什么。它是否与在执行之前添加的列有关`SetOrdinal`，从而增加了超出列范围的计数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T20:34:36.767

“它是否与在执行 SetOrdinal 之前添加的列有关”

是的。

在评估最后一部分时：

```
.SetOrdinal(dt.Columns.Count); 
```

dt.Columns.Count == 6\. 一般来说，您应该避免引用在同一语句中更改的内容的复合语句。尽管评估顺序是可预测的，但它并不是特别直观——你最终会犯错误。这个更好：

```
var count = dt.Columns.Count;
dt.Columns.Add("Blah").SetOrdinal(count); 
```

甚至更好：

```
dt.Columns.Add("Blah");
dt.Columns.SetOrdinal(dt.Columns.Count-1); 
```

不要为了缩短代码而试图缩短代码。如果保存几个字符（这在编译代码中实际上没有任何意义）会使意图变得不那么清晰，那么它绝对不值得。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T20:38:44.600

序数是从零开始的，使用时需要考虑到这一点`Count`。

例子：

```
dt.Columns.Count = 5;

//1\. dt.Columns[0]
//2\. dt.Columns[1]
//3\. dt.Columns[2]
//4\. dt.Columns[3]
//5\. dt.Columns[4] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-05T23:27:49.633

DataColumn 将从“0”开始

您第一次将列添加到数据表中并使用 SetOrdinal 的更好方法

```
DataColumn newcol=new DataColumn("Blah", typeof(string));
dt.Columns.Add(newcol);
newcol.SetOrdinal(dt.Columns.Count-1); 
```

# ios - 使用 SkpsmtpMessage 库格式化电子邮件正文

> ID：10287799
> 
> 赞同：4
> 
> 时间：2012-04-23T20:31:57.820
> 
> 标签：ios

我在我的项目中使用 SkpsmtpMessage 库，一切正常。问题在于电子邮件正文的布局。我想以漂亮的布局显示它，例如粗体名称，然后想将图像嵌入其中，以便客户端打开电子邮件等时显示出来。现在我只是在使用

```
NSString * bodyMessage = [NSString stringWithFormat:@"Dear %@:\n \nThank you for reserving your holiday  with us. Your order is now confirmed - 
see below your details including your order reference number and your chosen collection point. ",%@]; 
```

它只是演示。那么我怎样才能像在其他电子邮件客户端中那样正确格式化它。

先感谢您。

解决方案：

利用

```
 NSDictionary *plainPart = [NSDictionary dictionaryWithObjectsAndKeys:@"text/html",kSKPSMTPPartContentTypeKey,
                           body ,kSKPSMTPPartMessageKey,@"8bit",kSKPSMTPPartContentTransferEncodingKey,nil]; 
```

即 text/html 而不是 text/plain。

代码是

```
SKPSMTPMessage  *testMsg = [[SKPSMTPMessage alloc] init];
NSDictionary *plainPart = [NSDictionary dictionaryWithObjectsAndKeys:@"text/html",kSKPSMTPPartContentTypeKey,
                           body ,kSKPSMTPPartMessageKey,@"8bit",kSKPSMTPPartContentTransferEncodingKey,nil];
testMsg.parts = [NSArray arrayWithObjects:plainPart,nil];

[testMsg send]; 
```

这里的 body 是包含 html 文本的 NSString ......

谢谢你。希望其他人可以使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T20:54:12.660

该类本身的文档说：

> SKPSMTPMessage 是一个快速而肮脏的类，它为 iPhone 实现了一个基本的 SMTP 客户端。如果您只想在 iPhone 上发布纯文本或 HTML 消息，请使用 -[UIApplication openURL:] （这些不是您要寻找的机器人，继续前进，继续前进）。但是，如果您尝试将文件附加到电子邮件，或做其他疯狂的事情，您会想要使用这个类。

此外，它最后一次更新是在 3 年前的 2009 年 2 月。

虽然不是直接回答您的问题 - 更好的解决方案是不使用此框架。

# javascript - 在 jquery 插件中放置一个 Raphael“加载”元素

> ID：10287800
> 
> 赞同：1
> 
> 时间：2012-04-23T20:31:59.177
> 
> 标签：javascript, jquery, jquery-plugins, raphael

我正在编写一个插件，用于使用 Raphael js 制作类似加载的 gif。[代码的基础是以此](http://raphaeljs.com/spin-spin-spin.html)为模型的。

我的插件演示可以在[jsfiddle](http://jsfiddle.net/ColdToast/Aaqaf/)上找到。

我的问题是，我似乎无法使`svg`选择的任何 jquery 元素位于中心。我在那个小提琴中的想法是将`svg`a 放置在创建的内部`div`并尝试将其居中，`div`但我似乎也无法让它发挥作用。

有任何想法吗？

**编辑：** 我可以通过破解包含 div 的边距属性来使其居中。像这样的工作：

```
$loadingContainer = $('<div class="loading"></div>').css({margin: -(this.innerHeight()/2) + 'px auto'}).appendTo(this), 
```

注意负边距......但我试图避免这样做并实际使用 Rahpael 来定位类似加载的“gif”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T20:46:30.130

您需要使用找到元素的位置和尺寸

*   [`.offset()`](http://api.jquery.com/offset)
*   [`.outerWidth()`](http://api.jquery.com/outerWidth)
*   [`.outerHeight()`](http://api.jquery.com/outerHeight)
*   距离元素最近的定位元素`.loading`，使用[`.offsetParent()`](http://api.jquery.com/offsetParent), 可以调整定位。

并使用它们来定位您的`.loading`元素（*with`position:absolute`*）

**演示在** [http://jsfiddle.net/gaby/Aaqaf/2/](http://jsfiddle.net/gaby/Aaqaf/2/)

# extjs - 如何复制 Ext obj 并显示为 HTML

> ID：10287804
> 
> 赞同：1
> 
> 时间：2012-04-23T20:32:15.240
> 
> 标签：extjs

我想在一个新的模式窗口中显示一个带有标签和值的 Ext 表单。我希望表单是只读的，因此用户可以打印出窗口。我可以访问表单并显示模态窗口，但我似乎无法在模态窗口中显示表单，因为它是一个对象。

这是我单击按钮时出现的窗口：

```
var printWindow = Ext.create("Ext.Window", {
        renderTo: Ext.getBody(),
        title: 'Print Window',
        cls: 'print',
        scrollable: true,
        closable: false,
        maximized: false,
        modal: false,
        moveable: false,
        items: [{
            xtype: 'panel',
            html: mySample,
            height: 400,
            width:300
        }],
        dockedItems: [{
                xtype: 'toolbar',
                dock: 'bottom',
                align: 'right',
                layout: 'hbox',
                items: [{
                    xtype: 'component',
                    flex: 1
                },{
                    xtype: 'button',
                    align: 'right',
                    text: 'Print This Window'
                }]
            }],
        tools: [{
            type: 'close',
            handler: function() {
                printWindow.close();
                htmlBody.removeCls('no-print');
                htmlBody.disabled = false;
            }
        },{
            type: 'print',
            tooltip:        'some tooltip info',
            handler: function() {
                print();
            }
        }]
    });
    printWindow.show(); 
```

注意 - 新面板中的 HTML 配置选项不正确，我使用它进行测试

# c - 多次调用后从 C 中调用汇编代码清除地址

> ID：10287808
> 
> 赞同：0
> 
> 时间：2012-04-23T20:32:27.623
> 
> 标签：c, assembly

部件

```
TITLE   adding numbers
.486
.MODEL      FLAT,C
option      casemap:none
include     C:\Users\Thao\Hello\msvcrt.inc
.data
formating  DB "%s",10,0
           DB 0
num1       DB "0000000000"
           DB 0

num2       DB "0000000000"
           DB 0

AC_balance DB "0000000000"
           DB 0

.code

adding      PROC C, number1:DWORD , number2:DWORD

            mov esi, number1
            lea edi, num1 
            mov ecx, SIZEOF num2
            rep movsb 
            mov     eax, offset num1

            push    eax

            mov     eax, OFFSET formating
            push    eax
            call    printf
            pop     eax
            pop     eax
;---------------------------------------------------            

            mov esi, number2
            lea edi, num2 
            mov ecx, SIZEOF num2
            rep movsb 

            mov     eax, OFFSET num2
            push    eax

            mov     eax, OFFSET formating
            push    eax
            call    printf
            pop     eax
            pop     eax

            mov esi,SIZEOF num1-1
            mov edi,SIZEOF num1-1
            mov ecx,SIZEOF num1
            mov bh,0            ;used to save carry value

            L1: mov ah,0            ;clear AH before the add
            mov al,num1[esi]    ;get a digit
            add al,bh               ;add previous carry (0 first time through)
            aaa                     ; adjust the total
            mov bh,ah               ; save the carry in BH
            or  bh,30h              ;convert carry to ASCII character

            add al, num2[esi]   ;perform main add
            aaa                     ; adjust the main add, AH gets the carry
            or  bh,ah               ; combine the carries
            or  bh,30h              ; convert back to ASCII
            or  al,30h              ; convert digit back to ascii
            mov num2[edi],al    ;save total digit

            dec     esi             ;move left 1 digit in addends
            dec     edi             ;move left 1 digit in result
            loop    L1

            mov eax, offset num2
            push eax

            mov eax, offset formating
            push eax
            call printf
            pop eax
            pop eax

            mov eax, offset num2

            ret
adding      ENDP
END 
```

C代码

```
#include "stdafx.h"
#include <stdio.h>
#include <stdlib.h>

char *adding(char *y,char *x);
void _tmain(void)
{
    char *a, *b, *a1, *b1;
    int z = 6;
    int sizeA =9;
    int sizeB =9;
    a = (char*)malloc(11*sizeof(char));
    b = (char*)malloc(11*sizeof(char));
    a1 = (char*)malloc(11*sizeof(char));
    b1 = (char*)malloc(11*sizeof(char));
    strcpy(a, "0000000000");
    strcpy(b, "0000000001");
    strcpy(a1, "3234567890");   
    strcpy(b1, "1234567890");

    printf("adding A\n");
    a=adding(a1,a);
    printf("a: %s\n",a);
    printf("adding B\n");
    b=adding(b1,b);
    printf("a: %s\n",a);
    printf("b: %s\n",b);
    getchar();
} 
```

当前输出

```
adding A
3234567890
0000000000
a: 3234567890
adding B
1234567890
0000000001
a: 1234567891
b: 1234567891 
```

好吧，由于某种原因，我现在处于一个路障，我正在整理地址，当我在 Visual Studio 中进行调试时，我注意到地址似乎被我猜想写了。而且我不确定它为什么以及如何被覆盖。到运行结束时，A 和 B 指向同一个东西。我现在完全不知道该怎么做..

我知道这与我的汇编代码有关..但我不确定我做错了什么。它与堆栈有关吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T20:44:33.000

改变：

```
a = (char*)malloc(10*sizeof(char));
b = (char*)malloc(10*sizeof(char));
a = "0000000000";
b = "0000000001"; 
```

至：

```
a = malloc(11);
b = malloc(11);
strcpy(a, "0000000000");
strcpy(b, "0000000001"); 
```

（您还需要添加`#include <string.h>`）

# cocoa - 可可中有类似 [aCalCalendar setType] 的东西吗？

> ID：10287813
> 
> 赞同：0
> 
> 时间：2012-04-23T20:32:42.633
> 
> 标签：cocoa, types, calendar, cloud

我可以在我的 Cocoa 程序中生成一个`CalCalendar`使用（例如）Google 的新程序吗？换句话说，我可以*设置*对象的类型`CalCalendar`吗？我知道我可以阅读它，但似乎没有 [aCalCalendar setType] 方法之类的东西......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T02:09:37.013

否。在“[创建日历](https://developer.apple.com/library/mac/documentation/AppleApplications/Conceptual/CalendarStoreProgGuide/Articles/CreatingObjects.html#//apple_ref/doc/uid/TP40005158-DontLinkElementID_5)”下，文档指出：

> `calendar`您使用 的类方法创建一个日历对象`CalCalendar`。然后，您可以选择设置颜色、注释或标题属性。 **目前，您只能创建 iCal 日历**。

正如您在问题中提到的那样，对象的`type`属性`CalCalendar`被定义为只读，这意味着您目前不走运。

# php - 多次使用 SQL PHP 占位符

> ID：10287815
> 
> 赞同：1
> 
> 时间：2012-04-23T20:32:46.367
> 
> 标签：php, sql

我正在创建一个带有单个搜索字段的表单，我希望该字段查询 3 个不同的 sql 列（想想专辑标题、曲目名称和艺术家）。

这是我试图使工作的代码......

```
$search = "%".$_POST["sermon"]."%";
$stmt = $dbh->prepare("SELECT * FROM dbo.TblSermon WHERE (Series LIKE :search) OR (Sermon LIKE :search) OR (Speaker LIKE :search) ORDER BY Sermon ASC, Date ASC");
$stmt->bindParam(':search', $search);
$stmt->execute(); 
```

这是我得到的错误...

> SQLSTATE[07002]：[Microsoft][SQL Server Native Client 10.0]COUNT 字段不正确或语法错误

从我看到的所有教程来看，占位符并不意味着多次使用（每个字段都应该有自己的）。有没有办法让它工作？

JJ

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T20:57:18.953

Id jsut 更改占位符名称以反映您正在搜索的字段。然后不要调用绑定参数 id，而是在执行时将其全部绑定。

```
$search = "%".$_POST["sermon"]."%";

$stmt = $dbh->prepare("SELECT * FROM dbo.TblSermon WHERE (Series LIKE :series) OR (Sermon LIKE :sermon) OR (Speaker LIKE :speaker) ORDER BY Sermon ASC, Date ASC");

$stmt->execute(array(
  ":series" => $search, 
  ":sermon" => $search, 
  ":speaker" => $search
)); 
```

如果有大量字段，那么最好只定义占位符数组然后使用`array_fill_keys`，这样您就不必一遍又一遍地输入相同的变量名来分配到数组中......当然在那一点你可以遍历占位符数组并`bindParam`使用相同的值参数调用......无论哪种方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T20:34:54.363

我建议使用问号 ( `?`) 并调用`bindParam()`每个问号。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-23T20:37:46.847

使用 Sprintf

```
$search = "%".$_POST["sermon"]."%";
$query = sprintf("SELECT * FROM dbo.TblSermon WHERE (Series LIKE '%s') OR (Sermon LIKE '%s') OR (Speaker LIKE '%s') ORDER BY Sermon ASC, Date ASC",search,search,search);
$stmt = $dbh->prepare($query);
$stmt->execute(); 
```

# java - 打开图表 - 操作类型必须获得用户生成照片的批准

> ID：10287816
> 
> 赞同：1
> 
> 时间：2012-04-23T20:32:46.740
> 
> 标签：java, facebook, facebook-opengraph

我们最近更新了我们的开放图操作以包含用户生成的照片，但收到以下错误。我们的行动已经获得批准，所以不确定发生了什么？

(#100) 操作类型 (155314644560172) 必须获得用户生成的照片的批准，或者必须由应用程序开发人员执行操作。

![该操作已获批准](../Images/04675333cbf1df670696ef25ab8c30fb.png)

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T20:39:59.030

参考[https://developers.facebook.com/docs/opengraph/usergeneratedphotos/](https://developers.facebook.com/docs/opengraph/usergeneratedphotos/)

用户生成的照片需要额外的批准才能使用。在 DevApp 中提交您的操作以供批准时，请务必选中“用户生成的照片”框。 ![在此处输入图像描述](../Images/faab11a7c4d390f14101c7ba6c32d26d.png)

# c# - 在两个 iframe 之间传输数据

> ID：10287819
> 
> 赞同：0
> 
> 时间：2012-04-23T20:32:52.040
> 
> 标签：c#, asp.net, iframe, frame

我有一个页面，其中有两个 iframe。第一帧的 src 链接到我自己的应用程序中的一个页面。但是第二个框架的 src 是一个 url（即）我在这个框架内调用一个网页。但是，我需要将数据从框架的文本框传输到另一个。我怎样才能做到这一点？有任何想法吗？请帮忙！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T00:23:00.697

出于安全原因，浏览器不允许这样做。如果您真的想这样做，则必须使用 Web 服务作为中介。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T00:07:05.097

假设您控制 iframe 的两端并且您不想为两个框架提供相同的域，您可以使用 html5 功能 postMessage

[https://developer.mozilla.org/en/DOM/window.postMessage](https://developer.mozilla.org/en/DOM/window.postMessage)

这允许您在 iframe 内安全地进行通信（如果编码良好:-)）

# jdbc - 在同步更改之前，WAS 无法测试数据源连接

> ID：10287824
> 
> 赞同：0
> 
> 时间：2012-04-23T20:33:11.330
> 
> 标签：jdbc, websphere

当我从 WAS 管理控制台创建 JDBC 数据源连接并执行“测试连接”时，我收到错误消息说我需要先与所有其他节点同步更改才能测试连接/这种限制的原因是什么?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T00:08:13.173

考希克，

测试在节点代理或服务器上执行（基于您指定的范围）

当您创建配置时，它们存储在部署管理器中。除非执行同步，否则节点代理和服务器不会意识到这一点。请注意，部署管理器保留一份主副本，并通过同步活动将相关文件分发到各个节点。

这就是管理控制台告诉您它需要同步的原因。

高温高压

芒鲁

# java - 在 JFrame 中显示 JPanel 的内容

> ID：10287825
> 
> 赞同：2
> 
> 时间：2012-04-23T20:33:11.773
> 
> 标签：java, swing

问题是：我的 jpanel.(MyJPanel) 在鼠标右键单击时触发。当我按下它时，它会显示带有“预览”项的弹出菜单。![鼠标右键点击jpanel](../Images/cbd5d7b6fd710c878a51edecfeef9340.png)

我想在按下“预览”后显示 JFrame，但我不知道如何显示 jpanel 的内容，因为预览（jmenuitem）的动作监听器在 MyJpanel 中。

```
public MyJPanel(String s,int i){
    addMouseListener(new PopupTrigger());
    JPanel obh = new JPanel();
    number = i;
    picture = new ImageIcon(s);
    preview = new JMenuItem("Preview");
    preview.addActionListener(
            new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    JFrame f = new JFrame("Preview window");
                    f.setSize(csizeX/2,csizeY/2);

                    f.setVisible(true);
                }
            }
    );
    menu.add(preview);
} 
```

如何设置 jframe f 的内容以显示 MyJPanel？（PopupTrigger 扩展了 MouseAdapter 并且它是 MyJPanel 的内部类）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T20:37:58.113

首先，您需要将 JPanel final: `final Jpanel obh`... 标记为可从内部类访问。然后，在侦听器内部

```
f.getContentPane().add(obh); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T20:39:00.487

制作 obh `final`，然后将其添加到 JFrame。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T20:40:27.043

你试过 jFrame.setContentPane(newcontentPanel) 吗？

# jquery - vb.net 网络服务

> ID：10287828
> 
> 赞同：1
> 
> 时间：2012-04-23T20:33:18.577
> 
> 标签：jquery, asp.net, vb.net

我有这个简单的网络服务

```
<WebMethod()> _
 Public Function HelloWorld() As String
    Return "[1255545454545,4]"
 End Function 
```

这将在客户端 >

```
 $.ajax({
          type: "POST",
          url: "WebService1.asmx/HelloWorld",
          data: "{}",
          contentType: "application/json; charset=utf-8",
          dataType: "json",
          success: function(response) {
              alert(response);
          },
          failure: function(msg) {
              alert(msg);
          }
      });
  }); 
```

我怎样才能拥有真正的价值而不是我得到的 [object object]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T20:37:51.917

尝试访问 response.d。这是一个 Asp.Net 功能。

```
$.ajax({
      type: "POST",
      url: "WebService1.asmx/HelloWorld",
      data: "{}",
      contentType: "application/json; charset=utf-8",
      dataType: "json",
      success: function(response) {
          alert(response.d);
          alert(response.d[0]);
          alert(JSON.stringify(response));
      },
      failure: function(msg) {
          alert(msg);      
      }
  }); 
```

[http://encosia.com/never-worry-about-asp-net-ajaxs-d-again/](http://encosia.com/never-worry-about-asp-net-ajaxs-d-again/)

# c# - 我可以创建一个客户区透明的窗口（使用透明键）并点击吗？

> ID：10287829
> 
> 赞同：3
> 
> 时间：2012-04-23T20:33:22.447
> 
> 标签：c#, transparency

使用 C# 创建一个边框正常的窗口，但客户区是透明的（使用透明度键）。在 XP 上，我可以点击它（访问透明区域下方的项目）；但是，这不适用于 W7。有没有办法让它适用于 W7（和 XP）？

**更新：** 感谢大家的快速回复！看起来我的问题的关键是我碰巧使用黄色作为我的透明度键的不幸事实。我希望它在 Visual Studio 中脱颖而出，以便我记得它是透明的；正是这种颜色选择使点击无法正常工作。一旦我更改为灰色的背景色，它就可以正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T00:22:03.513

根据[这篇文章](http://social.msdn.microsoft.com/Forums/en-US/windowscompatibility/thread/2e9205b8-b78f-471e-8fed-dc07d7e5fdae)，解决方法是将 TransparencyKey 设置为`Gray`

```
 this.BackColor = Color.Gray;
  this.button1.BackColor = Color.Blue;
  this.TransparencyKey = Color.Gray; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T20:40:40.460

```
this.TransparencyKey = this.BackColor; 
```

这在 Windows 7 中对我来说很好。

![在此处输入图像描述](../Images/05c499ea86dd8079506b5f53402a31c8.png) ![在此处输入图像描述](../Images/178d01319f5bc620c44ad0ce293d9761.png)

# ios - MonoTouch：tmp 文件夹位置？

> ID：10287834
> 
> 赞同：6
> 
> 时间：2012-04-23T20:33:35.393
> 
> 标签：ios, xamarin.ios

在 MonoTouch 中使用 .NET 框架，我如何进入 /tmp 文件夹？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-23T20:55:26.100

这将返回您应用的 tmp 文件夹

```
System.IO.Path.GetTempPath(); 
```

# multithreading - 我应该使用大量用户实现多线程上传吗？

> ID：10287835
> 
> 赞同：1
> 
> 时间：2012-04-23T20:33:43.077
> 
> 标签：multithreading, asp.net-mvc-3, file-upload

在我的 MVC 3 项目中，实现了将文件上传到外部系统。

我开始想知道这种情况，例如同时有 100 个用户想要上传文件。

是否值得实现多线程上传？或者也许有任何理由不这样做？我的服务器的带宽约为 100down/60up mB/s，文件大小低于 100MB。关键在于服务所有上传请求的性能和时间

# wcf - WCF 服务方法实现到具有多个参数的存储库

> ID：10287841
> 
> 赞同：0
> 
> 时间：2012-04-23T20:34:01.570
> 
> 标签：wcf

我正在尝试设置 WCF 服务以在数据库表中创建一个条目并返回相同的条目以及一堆相关数据作为服务响应。

我正在使用带有存储库模式的 EF 来完成所有 DataAccess 工作。由于传递的参数是安静的巨大列表（15+）。

复杂类型（DTO）是更清洁的方式吗？或任何其他替代方案。

我正在寻找更清洁和简单的实现......

更多细节...

1）使用服务端和存储库端共享的所有参数信息创建 DTO 对象。

```
 Public class RecordDTO
    {
     public string param1;
     public string param2;
     .....
     public string param15;

    } 
```

2）使用 DTO 对象从 Service 方法传递到 Repository（两个项目都应该有权访问 DTo）

```
 Repository.CreateRecord(RecordDTO myRecordObj) 
```

3) Repository 接收到这个并解析数据并执行各种 DataAccess 逻辑并返回传递回的 Model 对象，该对象了解服务以及客户端。

我只是在探索并尝试看看这是否可能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T21:06:12.347

您可以添加 CreateRequest dto，并将所有参数封装在其中。这样做更好，原因有很多，其中一些是： - 更好的可读性 - 更简单的方法签名 - 防止破坏性更改..

如果这些参数必须与多个存储库方法调用一起保存，您可以在服务方法实现中添加事务范围。

我想所有这些参数在逻辑上都属于这个 CreateRecord 操作（一个事务）。如果他们不这样做，您可以将其拆分为多个服务方法..

# java - 河内塔柜台

> ID：10287847
> 
> 赞同：3
> 
> 时间：2012-04-23T20:34:19.400
> 
> 标签：java, towers-of-hanoi

我已经为河内塔游戏编写了代码。我不知道如何为这个程序实现一个计数器，它运行了多少次。任何帮助都感激不尽。

```
public class MainClass {
  public static void main(String[] args) {
    int nDisks = 3;
    doTowers(nDisks, 'A', 'B', 'C');
  }

  public static void doTowers(int topN, char from, char inter, char to) {
    if (topN == 1){
      System.out.println("Disk 1 from " + from + " to " + to);
    }else {
      doTowers(topN - 1, from, to, inter);
      System.out.println("Disk " + topN + " from " + from + " to " + to);
      doTowers(topN - 1, inter, from, to);
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-23T20:38:27.093

`doTowers`将from的返回类型更改`void`为`int`，并将返回值设置为：

1.  如果`topN == 1`, 返回 1;
2.  否则返回二`doTowers()`加 1 的总和。

逻辑类似于问题的算法。玩得开心！

您也可以使用静态全局变量，但这可以说是不好的编程风格。

# python - Mac/Windows 的跨平台 USB 开发 - 可以使用 Ruby/Python？

> ID：10287853
> 
> 赞同：1
> 
> 时间：2012-04-23T20:34:34.993
> 
> 标签：python, ruby, usb, native

我想为 Mac 和 Windows 开发一个本机运行的应用程序（自包含的可执行文件），它将检测/轮询插入的 USB 设备并因此发送 HTTP 调用。我主要是一名 Ruby 程序员，所以理想情况下我可以结合使用 Macruby/IronRuby 和共享库来做到这一点，但看起来 libusb 需要在 Windows 上安装一个特殊的驱动程序（我不能指望客户这样做）。

是否有图书馆/宝石可以促进这一点？是否可以使用 Python/Ruby 做我所描述的事情？共享代码并不像代码库是 Python/Ruby/单一语言那么重要。如果不需要在 Windows 上安装特殊驱动程序，libusb 将是理想的选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T22:09:51.407

好吧，这绝对是可能的；我不知道 pyUSB 在 ruby​​gems 中的等价物是一个易于使用的模块，您可以利用它来执行此操作，然后有许多用于 python 的 http 库。

至于让它自给自足，这是可能的，但并不理想。py2exe 是一个程序，它基本上复制了 python 解释器、程序和脚本中使用的所有依赖项，并将它们全部粘合到一个 exe 文件中，但默认情况下 py2exe 不会将其打包成 exe，但有关于维基

# c# - Cannot convert 'System.Object[]' to the type 'System.String[]'

> ID：10287855
> 
> 赞同：0
> 
> 时间：2012-04-23T20:34:40.447
> 
> 标签：c#, c#-4.0, .net

Have you got another idea to get this list of data?

I would like to show all my code because I think this can be much more easier for you. In this code you can see how I connect with role file.

```
using System;
using System.Data;
using System.Configuration;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Web.UI.HtmlControls;
using Microsoft.Interop.Security.AzRoles;
using System.Runtime.InteropServices;
using System.Security.Principal;
using System.Collections.Generic;

namespace Authman
{
    public partial class WebForm1 : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {   
            // See the following table for other sample connection strings.
            string connectionString = @"msxml://c:\plik.xml";

            AzAuthorizationStoreClass azStore = new AzAuthorizationStoreClass();
            azStore.Initialize(0, connectionString, null);

            IAzApplication2 azApplication = azStore.OpenApplication2("SatheeshApp", null);

            IAzClientContext3 clientContext = (IAzClientContext3)azApplication.InitializeClientContextFromToken((ulong)WindowsIdentity.GetCurrent().Token, null);

            // Use the default application scope.
            string[] roles = (string[])clientContext.GetRoles("");

            foreach (string role in roles)
            {
                Span3.InnerHtml += role.ToString() + "</br>";
            }

        }
    }
} 
```

![enter image description here](../Images/8808b69910b0c7212cc45620c19ef906.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T20:37:24.567

Use the `Cast<string>()` method. This is related to covariance/contravariance. You need to cast each item in the array (which is what the `Cast` method does) rather than the entire array. If you really need to convert it into another string array you can use the `ToArray` method, but since here you're just using a `foreach` on it there is no need.

```
foreach(string role in clientContext.GetRoles("").Cast<string>())
{
  //use role
} 
```

You'll need to add a `using System.Linq` to get the `Cast` extension method.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-23T20:37:37.533

```
string[] roles = clientContext.GetRoles("").Cast<string>().ToArray(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-23T20:37:39.970

```
using System.Linq;

string[] roles = someObjectArray.OfType<object>().Select(o => o.ToString()).ToArray(); 
```

Hope this helps.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-23T20:38:03.527

```
object[] roles=clientContext.GetRoles("");
foreach(object role in roles)
{
   Span3.InnerHtml + = role.ToString() + "</br>";
} 
```

Why you need to cast your array to `string[]`? You can use it without casting at all.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-23T20:43:53.110

You can just cast to the object[] the error indicates it to be instead;

```
object[] roles = (object[])clientContext.GetRoles("");

foreach(object role in roles)
{
    Span3.InnerHtml += role.ToString() + "</br>";
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-23T20:44:11.870

As others have pointed out, `clientContext.GetRoles("").Cast<string>().ToArray()` is the work around.

Lets say what happens if the conversion is legal. you have a List listOfAnimals.

```
List<Cow> listOfCows = GetListOfCows();

listOfAnimals = listOfCows;

//After some lines of code

List<Tiger> listOfTiger = GetListOfTigers();

listOfAnimals.Add(listOfTiger); //Epic fail. 
```

You might have accidentally added `Tiger` to a list of `Cow`. Which is wrong and dangerous. The CLR does not allow you to introduce such bugs in to the code.

# jquery - 通过 .html(...) 实现 jQuery 自动化内容

> ID：10287856
> 
> 赞同：0
> 
> 时间：2012-04-23T20:34:41.370
> 
> 标签：jquery, html

我有一个基本的 jQuery 网页，展示了一些基本功能，但也有一些不太基本的组件。我的某些页面部分需要通过外部 PHP 页面进行 SQL 查询。这些页面通过 GET 输入到主网页，然后插入到 div 中。执行此操作的代码设计如下所示：

```
function changeSystem(sysName)
{
    pageReq = "menu/"+group+"/"+sysName+".php";
    $("#thesys").load(pageReq);
    stylize();
} 
```

Stylize 被创建为一个函数来描述我的样式（通过上面的函数调用并通过页面创建）：

```
function stylize()
{
    $("#form").submit(function(event) {event.preventDefault();});
    $(".tabs").tabs();
    $("button").button();
    $(".radioset").buttonset();
    $(".sortable").sortable();
    $(".sortable").disableSelection();
    $(".accordion").accordion();
} 
```

响应根据页面创建返回一些按钮和字段。代码在一定程度上工作得很好。显示内容，但是返回的内容不像页面其余部分上的所有其他 jQuery 对象那样样式化。它们显示为传统的按钮和字段，会影响页面的外观和感觉。如果我用静态嵌入内容替换自动化内容，按钮就会出现适当的风格化。我是否需要调用一个专门的 jQuery 方法来为这个新内容更正这个页面的样式？

**编辑：**

我所指的样式是通过[http://jqueryui.com/](http://jqueryui.com/)获得的 jQuery 主题。边框样式、颜色和大小不会延续到生成的内容中。按钮的主题似乎类似于默认的 html 主题。

**第二次编辑：**

感谢 Pilotcam 提供的这些很棒的建议。我已经非常成功地实施了您的第二个建议，但是我仍在研究第二个建议。进度如上所示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T20:43:32.213

如果您使用 jQuery 函数来设置原始页面的样式，则需要对动态加载的内容执行相同的操作。例如：

```
$("#myButton").button(); 
```

您也可以考虑使用 jQuery load() 函数而不是直接使用 XMLHttpRequest。（尽管这无助于手头的问题）

```
$("#thesys").load("menu/"+group+"/"+sysName+".php"); 
```

如果您需要在加载完成后执行某些操作，可以向您的 stylize() 函数添加回调，如下所示：

```
$("#thesys").load("menu/"+group+"/"+sysName+".php", stylize); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T20:41:09.647

您如何设置页面样式？如果您以编程方式执行此操作，那么这只会设置现有元素的样式，如果之后添加新元素，则不会设置样式。所以我想你必须在新添加的元素上调用样式方法

# php - 如何在 PHP 中使用 RegEx 替换所有十六进制？

> ID：10287864
> 
> 赞同：3
> 
> 时间：2012-04-23T20:35:03.100
> 
> 标签：php, regex, hex

所以我一直在玩正则表达式，我的朋友挑战我写一个脚本来替换字符串中的所有十六进制。他给了我一个混合了不同字符的大文件，当然还有一些十六进制字符串。

每次出现的十六进制都以 开头`\x`，例如：`\x55`.

我认为这很容易，所以我在一些在线正则表达式测试器上尝试了这种模式：`/\\x([a-fA-F0-9]{2})/`

它工作得很好。

但是，当我将它放入一些 PHP 代码中时，它根本无法替换它。

任何人都可以帮助我朝着正确的方向前进吗？

这是我的代码：

```
$toDecode = file_get_contents('hex.txt');
$pattern = "/\\x(\w{2})/";
$replacement = 'OK!';

$decoded = preg_replace($pattern, $replacement, $toDecode);

$fh = fopen('haha.txt', 'w');
fwrite($fh, $decoded);
fclose($fh); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T20:41:59.937

```
<?php
  // grab the encoded file
  $toDecode = file_get_contents('hex.txt');

  // create a method to convert \x?? to it's character facsimile
  function escapedHexToHex($escaped)
  {
    // return 'OK!'; // what you're doing now
    return chr(hexdec($escaped[1]));
  }

  // use preg_replace_callback and hand-off the hex code for re-translation
  $decoded = preg_replace_callback('/\\\\x([a-f0-9]{2})/i','escapedHexToHex', $toDecode);

  // save result(s) back to a file
  file_put_contents('haha.txt', $decoded); 
```

作为参考，[preg_replace_callback](http://www.php.net/manual/en/function.preg-replace-callback.php)。此外，请勿使用`\w`它实际上已翻译为`[a-zA-Z0-9_]`. 十六进制是 base-16，所以你想要`[a-fA-F0-9]`（并且`i`标志使它不区分大小写）。

[工作示例](http://ideone.com/U16Je)，减去文件部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T20:38:44.537

您的问题是您没有转义 PHP 字符串中的反斜杠。它需要是：

```
$pattern = "/\\\\x(\\w{2})/"; 
```

~~...或者：~~

 ~~```
$pattern = '/\\x(\w{2})/'; 
```~~ 

~~...带单引号。~~ ^(-*这实际上遇到了同样的问题，需要完整的双转义序列*)

但是`\w`会匹配任何 perl 单词字符，而不仅仅是十六进制字符。我会改用字符类`[a-fA-F0-9]`。

# lucene - RavenDB 和 PredicateBuilder

> ID：10287876
> 
> 赞同：1
> 
> 时间：2012-04-23T20:36:04.587
> 
> 标签：lucene, ravendb, predicatebuilder

是否可以使用 PredicateBuilder 类来构建 RavenDB 可以解释和使用的 WHERE 子句？我尝试过 session.Query() 和 LuceneQuery，但它们都失败了：

**这是 session.Query() 尝试：**

```
public static List<T> GetObjectList<T>(Expression<Func<T, bool>> whereClause)
{
    using (IDocumentSession session = GetRavenSession())
    {
        return session.Query<T>().Where(whereClause).Take(int.MaxValue).ToList();
    }
} 
```

**这是*运行时*错误：**

Lucene.Net.QueryParsers.ParseException：无法解析'（OR）OR'：在第1行第2列遇到“”OR“”。期待以下之一：（此处的预期项目列表）。

**如果我尝试 LuceneQuery()：**

```
public static List<T> GetObjectList<T>(Expression<Func<T, bool>> whereClause)
{
    Func<T, bool> compiledWhereClause = whereClause.Compile();

    using (IDocumentSession session = GetRavenSession())
    {
        return session.Advanced.LuceneQuery<T>().Where(compiledWhereClause).Take(int.MaxValue).ToList();
    }
} 
```

我得到这个**编译时**错误：

错误 2 'Raven.Client.IDocumentQueryBase>.Where(System.Func)' 已过时：'您不能在 IDocumentQuery 上发出内存过滤器 - 例如 Where(x=>x.Name == "Ayende")。

**编辑：这是第一个示例中 whereClause 的样子：**

{f => ((False OrElse Invoke(x => (Convert(x).EquipmentId == value(ReadFromRaven.Logic.Readers.RavenReader `1+<>c__DisplayClassa[WriteToRaven.Data.Marker]).tempCoater.MarkerEquipmentId), f)) OrElse Invoke(x => (Convert(x).EquipmentId == value(ReadFromRaven.Logic.Readers.RavenReader`1+<>c__DisplayClassa[WriteToRaven.Data.Marker]).tempCoater.MarkerEquipmentId), F））}

**编辑 2：这就是我构建 WHERE 子句的方式**

这是电话：

```
List<T> newList = RavenDataAccess.GetObjectList<T>(BuildWhereClause(x => x.MarkerReadTime > timeChunk.StartTime && x.MarkerReadTime <= timeChunk.EndTime)); 
```

这是 BuildWhereClause() 方法签名和重要的方法部分：

```
private static Expression<Func<T, bool>> BuildWhereClause(Expression<Func<T, bool>> readTimeExpression)

    Expression<Func<T, bool>> innerWhereClause = PredicateBuilder.False<T>();

    foreach (Coater coater in coaters)
    {
        var tempCoater = coater;
        innerWhereClause = innerWhereClause.Or<T>(x => x.EquipmentId == tempCoater.MarkerEquipmentId);
    }

    Expression<Func<T, bool>> outerWhereClause = PredicateBuilder.True<T>();
    outerWhereClause = outerWhereClause.And<T>(readTimeExpression);
    outerWhereClause = outerWhereClause.And<T>(innerWhereClause);

    _whereClause = innerWhereClause;

    return _whereClause; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T22:49:58.013

我有同样的错误。我就是这样解决的：

我使用来自[http://www.albahari.com/nutshell/predicatebuilder.aspx](http://www.albahari.com/nutshell/predicatebuilder.aspx)的 predicateBulder并调用如下： Session.Query().Where(predicate.Compile()).ToList(); 请注意我称为 predicate.Compile() 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T04:09:58.943

您尝试传递给查询的实际表达式是什么？

如果要动态构建查询，请使用 Lucene Query，不要尝试使用 linq 动态构建某些内容。

# iphone - 在视图控制器的设置框架内显示前置摄像头

> ID：10287877
> 
> 赞同：0
> 
> 时间：2012-04-23T20:36:10.247
> 
> 标签：iphone, xcode, avcapturesession, avcapturedevice, facetime

我正在尝试将前置摄像头作为子视图添加到我现有的视图控制器中。我想为它设置一个框架，并能够模拟 FaceTime 通话的外观，前置摄像头显示在角落里。这是我到目前为止所尝试的。

```
AVCaptureSession *captureSession = [AVCaptureDeviceInput
                                    deviceInputWithDevice:[AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo]
                                    error:nil];;
AVCaptureVideoPreviewLayer *previewLayer = [AVCaptureVideoPreviewLayer layerWithSession:captureSession];
UIView *aView = self.view;
previewLayer.frame = aView.bounds; 
[aView.layer addSublayer:previewLayer]; 
```

但是，这会崩溃：

```
[AVCaptureDeviceInput setVideoPreviewLayer:]: unrecognized selector sent to instance 
```

有什么想法吗？我不需要实际记录，只需要在视图控制器内的较小屏幕上查看前置摄像头。

# title - Jcarousellite - 突出显示当前项目 + 标题

> ID：10287881
> 
> 赞同：0
> 
> 时间：2012-04-23T20:36:31.980
> 
> 标签：title, highlight, jcarousel, caption, jcarousellite

我也在使用 jcarousellite 和 jcarousel 但我想知道如何实现改进：

1.  突出显示当前项目 - 我显示 5 个拇指，我希望始终突出中间的那个（稍微大一点）。
2.  标题 - 如何仅显示突出显示项目的标题（中间）？

我没有一个最聪明的想法如何开始..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T11:40:42.937

你想做这样的事情吗.. [http://www.mako.co.il/](http://www.mako.co.il/)

为此，您可以使用两个不同的轮播。

并将相同的下一个和上一个按钮绑定到两个轮播。

对于具有 5 个拇指的较小轮播保持“可见”= 5 和“滚动”= 1 对于较大的图像轮播保持可见 = 1 和滚动= 1。

使用绝对定位将较大的图像轮播置于较小的图像轮播之上。

我认为这应该可以帮助您实现您打算做的事情

# build - Jenkins 矩阵配置工件

> ID：10287882
> 
> 赞同：7
> 
> 时间：2012-04-23T20:36:35.307
> 
> 标签：build, matrix, jenkins, artifacts

我目前正在试验詹金斯的矩阵投影。它运行良好，但我很好奇如何让工件显示在主页上最后成功的工件链接下。目前看起来工件是在每个轴配置的目标目录中构建的。

有没有办法通过詹金斯将工件聚合到一个地方？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T00:17:46.293

Collector 收集 Matrix 工件，但实际上是一项简单的“FreeStyle”工作。构建视图显示所有工件，然后是关于如何配置的提示。请注意，“扁平化”和“可选”功能允许从集合中丢失平台，但“删除工作区”首先确保您不会携带过时的工件。

构建视图： ![collect_build_view](../Images/b5703362b2df5a3df70836a36850cead.png)

配置视图：

![collect_config_view](../Images/bf31bf6b1d2f68255dd08ff46e7fd764.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T07:15:37.610

我不认为这是目前可能的“开箱即用”（我已经使用矩阵项目有一段时间了）。您可以使用以下解决方法：通过[参数化触发器插件](https://wiki.jenkins-ci.org/display/JENKINS/Parameterized+Trigger+Plugin)从另一个作业 ( *Collector ) 启动矩阵作业，将**收集器*工作区内放置工件的位置传递给它。矩阵子作业将把工件放在那里。*收集器*将等待矩阵作业完成并发布它们。

 **然后，您可以使用[Sidebar-Link 插件](https://wiki.jenkins-ci.org/display/JENKINS/Sidebar-Link+Plugin)在您的主作业页面上放置一个链接，该链接指向*Collector*的 Last Success Artifacts 永久链接。**

# python - 我需要帮助使用任何脚本解析 txt

> ID：10287884
> 
> 赞同：-4
> 
> 时间：2012-04-23T20:36:37.600
> 
> 标签：python, parsing, shell, csv

我需要它帮助 shell 脚本、python 脚本或任何可以做到这一点的东西。我想创建一个脚本，可以将以下信息从“txt”文件解析为 csv。我需要为我的在线成绩册解析的信息是获取用户名和实验室分数。实验室分数可以在这条线上找到

```
Your score for this lab: 20/20 
```

并且用户名可以在这一行找到

```
Student: username0 
```

感谢您阅读和帮助我！

这是文件 test.txt 的示例

```
Student: username0

Your score for this lab: 20/20

Score Breakdown:
info...

Part 1:

Part 2:

Part 3:

------------------------------------------------
------------------------------------------------
------------------------------------------------
Student: username1

Your score for this lab: 20/20

Score Breakdown:
info...

Part 1:

Part 2:

Part 3:

------------------------------------------------
------------------------------------------------
------------------------------------------------
Student: username2

Your score for this lab: 20/20

Score Breakdown:

Part 1:

Part 2:

Part 3:

------------------------------------------------
------------------------------------------------
------------------------------------------------ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T20:45:50.923

呸，这在 Python 中很容易做到，为什么不和你分享呢？

```
def filtered(lines):
    for line in lines:
        if line.startswith('Student:') or line.startswith('Your score for this lab:'):
            yield line.rstrip().split()[-1]

with open('test.txt', 'r') as f:
    for student, score in zip(*[filtered(f)]*2):
        print(student, score) 
```

# javascript - 获取javascript字符串中的字形字符数？

> ID：10287887
> 
> 赞同：8
> 
> 时间：2012-04-23T20:37:00.133
> 
> 标签：javascript, unicode, grapheme

我试图在用户可见的字素中获取 javascript 字符串的长度，即忽略组合字符（和代理对？）。这是可能的，如果是这样，我将如何去做？

我们在我们的项目中使用了 dojo 工具包，但是任何通用的 javascript 解决方案都会很棒。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-07-05T12:31:11.407

这是一个纯粹的 JavaScript 库，它可以做到这一点：

[https://github.com/orling/grapheme-splitter](https://github.com/orling/grapheme-splitter)

它在所有边缘情况下实现了 Unicode UAX-29 标准，您可能会在自制解决方案中错过这些情况，例如非拉丁变音符号、韩语（韩语）jamo 字符、表情符号、多个组合标记等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T17:37:48.063

对于组合字符，请查看列出所有组合字符（以及其他字符）的[派生组合类](http://www.unicode.org/Public/UNIDATA/extracted/DerivedCombiningClass.txt)。由于您只是对计数感兴趣，因此您可以将它们排除在外 - 让您得到更接近的估计。

在 Angus 链接的帖子[中，BMP 之外的 JavaScript 字符串](https://stackoverflow.com/questions/3744721/javascript-strings-outside-of-the-bmp#3759300)显示了处理代理的代码。但代码实际上与您想要的相反——它将 0x10000+ 代码点分成两个代码点。就 JS 而言，它是一个代码点——尽管是一个截断的代码点。谁在乎？您在数它们，而不是显示...

但是，您可能还想处理另一类代码点，即不可打印字符。当然，任何低于 0x20 的东西，但还有很多其他的——例如，看看 0x2000 范围。这些也不可见，不应计入您的计数中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-02T06:17:20.990

这个开源的 CoffeeScript 实现似乎工作得很好：[https](https://github.com/devongovett/grapheme-breaker) ://github.com/devongovett/grapheme-breaker （如果不是 CS 的话）

# html - 当有其他背景图像时，具有重复的背景图像必须停止

> ID：10287890
> 
> 赞同：0
> 
> 时间：2012-04-23T20:37:08.970
> 
> 标签：html, css, background-image

我网站的内容 div 具有独特的背景，具有各种图层样式。在 HTML/CSS 中，我可以从 photoshop 中获取背景并将其用作背景图像。我的问题是内容 div 的高度是可变的。为了解决这个问题，我将顶部像素设置在顶部，中心有一个像素行，其中有一个重复 y 和底部像素，并将它们放在底部。这可行，但中间背景图像必须在顶部背景图像之后和底部背景图像之前开始。

```
div#content{
    background: url('contentbghead.png') top center no-repeat, 
                url('contentbgfoot.png') bottom center no-repeat, 
                url('contentbgmid.png') 0px 10px repeat-y;
    width:680px;
    height:300px;
} 
```

我的结果可以在这里找到：[http ://tinypic.com?ref=30muazs](http://tinypic.com?ref=30muazs)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T20:44:10.140

CSS2 不支持多背景。你需要多个 div 来实现你想要的。

您还可以在以下位置查看一些适用于多种背景的 CSS3 方法：

[使用 CSS3 的多个背景](http://www.css3.info/preview/multiple-backgrounds/)

但是，该方法不适用于早于 IE9 的 IE 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T22:22:00.073

仅使用多个背景是不可能的，因为每个背景条目都与另一个背景条目无关。但是，您可以使用伪元素来实现此效果：

```
div#content{
    position:relative;
    background: url('contentbghead.png') top center no-repeat, 
                url('contentbgfoot.png') bottom center no-repeat;
    width:680px;
    height:300px;
}
div#content:before {
    content:"\0020"; font-size:0px;
    display:block; position:absolute; top:10px; left:0px; bottom:10px;
    width: /* Whatever your BG's width is */;
    background:transparent url('contentbgmid.png') repeat-y left top;
    pointer-events:none;
} 
```

您需要注意 z-index 分层，因为如果伪元素位于您的内容之上（对于不支持指针事件的浏览器），它可能会捕获点击事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T07:43:04.607

您好，您可以使用**:before**和**:after** **CSS 伪元素**来实现您的结果。

我制作了一个只有一个 div 的代码，并在一个 div 中使用了所有三个图像，并且中间图像在**y-axis**上也是可重复的。

**注意** **:before**和**:after** **伪元素** 支持到**IE-8**

**HTML**

```
<div id="content">
Dummy Content Dummy Content Dummy Content Dummy Content Dummy Content Dummy Content Dummy Content Dummy Content Dummy Content Dummy Content Dummy Content Dummy Content Dummy Content Dummy Content
</div> 
```

**CSS**

```
 #content:after {
    background: url("http://i.imgur.com/5agws.png") no-repeat 0 0;
    content: " ";
    height: 50px;
    left: 0;
    position: absolute;
    width: 680px;
}

#content:before {
    background: url("http://i.imgur.com/P7jL5.png") no-repeat 0 0;
    content: " ";
    height: 50px;
    position: absolute;
    top: -50px;
    width: 680px;
}

#content {
    background: url("http://i.imgur.com/vAqRU.png") repeat-y 0 0;
    color: white;
    position: relative;
    top: 50px;
    width: 680px;
    white-space: pre-wrap;

} 
```

请参阅演示以获得更好的理解：- [http://jsfiddle.net/5Lkmr/40/](http://jsfiddle.net/5Lkmr/40/)

# sql - 访问组合查询

> ID：10287895
> 
> 赞同：4
> 
> 时间：2012-04-23T20:37:25.203
> 
> 标签：sql, ms-access, pivot

我在名为 CombinedBomItems 的访问数据库中有一个表。它包含以下字段：

```
QuoteNumber
ReferenceNumber
MFG
MFGPN
QtyPer
UnitOfMeasure
ReDesignators
Description
PCB 
```

在表中有多个具有相同 MFG 和 MFGPN 的记录。我需要一个查询来合并具有匹配 MFG 和 MFGPN 的记录的 QtyPer。我想在查询的输出中包含以下字段：MFG、MFPGN、描述、UnitOfMeasure、PCB。谁能帮我创建这样的查询？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T20:41:01.800

以下查询将汇总 QtyPer 字段并提供您需要的字段。但是，为了组合在一起，分组中**的每个字段值必须相同。**

```
TRANSFORM Sum(QtyPer) AS SumOfQtyPer
SELECT MFG, MFGPN, Description, UnitOfMeasure, PCB
FROM CombinedBomItems
GROUP BY MFG, MfgPN, Description, UnitOfMeasure, PCB
PIVOT 'QtyPer' 
```

# forge - 如何更改使用 Trigger.io 构建的应用程序的启动画面？

> ID：10287903
> 
> 赞同：3
> 
> 时间：2012-04-23T20:37:43.513
> 
> 标签：forge, trigger.io

我已经开始使用 Trigger.io 构建一个应用程序，但在发布它之前，我想使用我们自己的启动屏幕来自定义它，而不是使用 Trigger.io Forge 促销出现的默认屏幕。那可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T22:43:22.793

是的。您可以通过更改配置文件中的启动图像并再次运行**forge build**来更改启动画面。

文档在这里： [http ://docs.trigger.io/en/v1.2/config.html#field-launch-images](http://docs.trigger.io/en/v1.2/config.html#field-launch-images)

# c - 无法显示视频，由 gstreamer 接收。不显示图片，只看到纯色

> ID：10287911
> 
> 赞同：0
> 
> 时间：2012-04-23T20:38:09.263
> 
> 标签：c, gstreamer

我正在尝试了解有关 gstreamer 的知识，并且对于 niw，我正在使用 gstreamer 接收视频流，该视频流由 vlc 播放器通过 udp 流式传输。为了做到这一点，我编写了以下代码。

```
playbin = gst_element_factory_make("playbin2", "play");
g_object_set(G_OBJECT(playbin), "uri", uri.c_str(), NULL);

bus = gst_pipeline_get_bus(GST_PIPELINE(playbin));
gst_bus_add_watch(bus, &bus_watcher, NULL);
gst_object_unref(bus);

gst_element_set_state(GST_ELEMENT(playbin), GST_STATE_PLAYING); 
```

问题是视频不显示。灰色（黑色/绿色/蓝色等）屏幕显示的唯一内容。有时可以看到一些人影在那儿移动。声音的情况要好一些。大多数时候它是可以识别的。我尝试设置像“buffer-duration”和“buffer-size”这样的属性，但我能提到的唯一效果是声音质量的提高。还有一件事情。我尝试使用通常的 playbin（意思不是 playbin2）并且效果更好。至少音质提高了。

也许有人知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T20:54:15.680

您可能希望在应用程序中添加一个视频接收器和一个音频接收器，并更好地控制正在发生的事情。

[示例 2.1](http://pygstdocs.berlios.de/pygst-tutorial/playbin.html)是一个 Python 应用程序，它显示了这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T20:36:59.593

好吧，我仍然无法显示视频，但这与程序或视频文件格式错误无关。在我通过 http 广播后，我设法用相同的 playbin 显示相同的视频。

# mediaelement.js - MediaElement.js 是否支持来自 Amazon S3 的流式传输？

> ID：10287912
> 
> 赞同：1
> 
> 时间：2012-04-23T20:38:13.917
> 
> 标签：mediaelement.js

我在 WordPress 网站上使用 MediaElement.js，它似乎在从亚马逊流式传输视频时遇到问题。WordPress 库中的所有视频都通过另一个插件发送到 Amazon S#。我得到音频但没有视频。为了让 MediaElement.js 从亚马逊 s3 流式传输视频，我需要做些什么不同的事情吗？谢谢你尽你所能的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T15:27:05.137

在我的 LinkedIn 网络研讨会视频中，我使用了 MediaElement.js Wordpress 插件来使用我的 Amazon S3 帐户玩球。你可以在这里看到它的实际效果：http: [//thoughtfaucet.com/making-things/how-to/linkedin-profile-training-video-and-transcript/](http://thoughtfaucet.com/making-things/how-to/linkedin-profile-training-video-and-transcript/)

对于简码，我使用了简单的 [video src=""] 并让它运行。也许您使用了错误的短代码？或者您上传的文件可能不是受支持的文件之一？

我的 LinkedIn 个人资料网络研讨会是一个 .mov，值得。我没有尝试过其他格式。

# python - 我应该什么时候实现 __call__

> ID：10287914
> 
> 赞同：16
> 
> 时间：2012-04-23T20:38:21.603
> 
> 标签：python

`__call__`在 python 中，您可以通过实现该方法使实例可调用。例如

```
class Blah:
    def __call__(self):
        print "hello"

obj = Blah()
obj() 
```

但我也可以实现自己的方法，比如“运行”：

```
class Blah:
    def run(self):
        print "hello"

obj = Blah()
obj.run() 
```

我应该什么时候实施`__call__`？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-23T20:45:29.917

这很难回答。`__call__`我的观点是，除非你的实际目标是创建一个函数，否则你永远不应该定义。在您已经创建了一个传统对象之后，您不会再做这件事。

换句话说，如果你开始思考“我要创建一个对象”，那么你永远不应该最终实现`__call__`. 另一方面，如果您开始思考“我要创建一个函数......但我希望我可以使用对象框架让我的函数具有某种状态”，那么您可以将函数创建为一个对象状态，并定义`__call__`使其像一个函数一样工作。

我想包括[@Paul Manta](https://stackoverflow.com/users/627005/paul-manta)在对该问题的评论中提供的最后一点建议，他在其中写道：

> 如果您不确定是否需要`__call__`，那么您不需要`__call__`

我认为这是中肯的建议。

# android - 在 Android UI 表库中更改背景（thiagolocatelli）

> ID：10287916
> 
> 赞同：6
> 
> 时间：2012-04-23T20:38:27.267
> 
> 标签：android, listview

我正在尝试找到一种方法来更改 Android 库的背景，例如： 1.row darkgrey; 2\. 行灰色；3.行深灰色；4.行灰色等

但它没有用。

**我试过了：**

```
 if(mIndexController%2 ==1){
            itemContainer.setBackgroundColor(R.color.grey);
            viewsContainer.setBackgroundColor(R.color.grey);
        }
        else{

            itemContainer.setBackgroundColor(R.color.darkgrey);
            viewsContainer.setBackgroundColor(R.color.darkgrey);
        } 
```

在库 UITableView 活动中，但它不起作用。

有人可以帮助我吗？

这里是图书馆： [https ://github.com/thiagolocatelli/android-uitableview](https://github.com/thiagolocatelli/android-uitableview)

我希望 ListView 看起来像这样：http: [//i.stack.imgur.com/Ls5bG.png](https://i.stack.imgur.com/Ls5bG.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T04:03:44.793

事实上`viewsContainer.setBackgroundColor(R.color.grey);`什么也没做。

你应该像这样更正它：

```
 viewsContainer.setBackgroundColor(getResources().getColor(R.color.grey)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T21:03:23.907

您可以创建自己的视图，然后应用您希望每行具有的背景颜色，然后将其添加为自定义视图。如果您想要奇数/偶数行使用不同的颜色，那是现在最好的方法。我正在更新这个库，将有一个函数返回 uitableview 的子元素，以便您可以在它们之间进行迭代并设置每行的背景颜色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T22:03:46.590

我这个你应该试试这个。

```
itemContainer.setBackgroundColor(Color.GRAY); 
```

# php - 使用 vim 的 Tabularize 插件仅匹配第一次出现的分隔符

> ID：10287919
> 
> 赞同：3
> 
> 时间：2012-04-23T20:38:33.553
> 
> 标签：php, mysql, vim, format

由于无法找到基于 linux 的 SQL 美化器来将我的 mySQL 片段传输到，我将满足于简单地将我的 mySQL 代码表格化。我想转这个：

```
CREATE TABLE IF NOT EXISTS GROUP
(
   ID INT NOT NULL AUTO_INCREMENT,
   GROUPNAME VARCHAR(15) UNIQUE,
   ACTIVE BOOLEAN DEFAULT TRUE,

   PRIMARY KEY(ID)
)ENGINE=InnoDB 
```

进入这个

```
CREATE TABLE IF NOT EXISTS GROUP
(
   ID         INT NOT NULL AUTO_INCREMENT,
   GROUPNAME  VARCHAR(15) UNIQUE,
   ACTIVE     BOOLEAN DEFAULT TRUE,

   PRIMARY KEY(ID)
)ENGINE=InnoDB 
```

但如果我这样做，`:Tabularize /\`我会得到

```
CREATE TABLE IF NOT EXISTS GROUP
(
        ID          INT           NOT        NULL         AUTO_INCREMENT,
        USERID      INT           NOT        NULL,
        GROUPNAME   VARCHAR(15)   UNIQUE,
        ACTIVE      BOOLEAN       DEFAULT    TRUE,

        PRIMARY     KEY(ID),
        FOREIGN     KEY           (USERID)   REFERENCES   USER(ID)
)ENGINE=InnoDB 
```

如何仅在标识符之后的第一个空格上对齐（或者，我在哪里可以找到命令行 SQL 美化器 = ）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T21:11:02.020

为避免 Tabularize 重复您的模式以匹配其他字段，您必须锚定它。在这种情况下，一开始更有意义，所以你可以尝试这样的事情：

```
:Tab /^\s*\w* 
```

您的行中只有一个具有此模式的字段。但要小心——它可能不会在您的示例中发生，但这与绝大多数行匹配，因此仅在一个范围内应用 Tabularize 可能是一个好主意（显式或通过在可视模式下选择行）。

# c++ - 对数字列表及其索引进行排序的最快方法

> ID：10287924
> 
> 赞同：9
> 
> 时间：2012-04-23T20:38:42.223
> 
> 标签：c++, algorithm, sorting, quicksort

我有一个看起来非常基本的问题，但它是在“每个 CPU 滴答计数”的上下文中（这是将在超级计算机上使用的更大算法的一部分）。

问题很简单：对 unsigned long long int 数字及其原始索引列表进行排序的最快方法是什么？（一开始，unsigned long long int 数字是完全随机的。）

```
Example :
Before
Numbers: 32 91 11 72
Indexes: 0 1 2 3
After
Numbers: 11 32 72 91
Indexes: 2 0 3 1 
```

通过“最快的方式”，我的意思是：使用什么算法：std::sort、C qsort 或网络上可用的其他排序算法？使用什么容器（C 数组、std::vector、std::map...）？如何同时对索引进行排序（使用结构、std::pair、std::map...）？

要排序多少个元素？-> 通常是 4Go 的数字

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-23T20:45:58.323

显而易见的起点是为其`operator<`定义的结构：

```
struct data { 
    unsigned long long int number;
    size_t index;
};

struct by_number { 
    bool operator()(data const &left, data const &right) { 
        return left.number < right.number;
    }
}; 
```

...和一个 std::vector 来保存数据：

```
 std::vector<data> items; 
```

并`std::sort`进行排序：

```
 std::sort(items.begin(), items.end(), by_number()); 
```

一个简单的事实是，普通容器（等）足够高效，使用它们不会使您的代码效率大大降低。通过以不同的方式编写某些部分，您*可能*会做得更好，但您可能很容易做得更糟。从可靠和可读开始，并测试——不要（试图）过早地优化。

编辑：当然在 C++11 中，你可以使用 lambda 表达式来代替：

```
std::sort(items.begin(), items.end(), 
          [](data const &a, data const &b) { return a.number < b.number; }); 
```

这通常写起来更方便一些。可读性取决于——对于像这样简单的事情，我会说它`sort ... by_number`非常可读，但这（很大程度上）取决于你给比较运算符起的名字。lambda 使实际的排序标准更容易找到，因此您无需仔细选择名称即可使代码可读。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-23T20:51:28.980

`std::pair`并`std::sort`理想地满足您的要求：如果您将值放入`pair.first`和 中的索引，您可以简单地在 s的向量上`pair.second`调用 a ，如下所示：`sort``pair`

```
// This is your original data. It does not need to be in a vector
vector<long> orig;
orig.push_back(10);
orig.push_back(3);
orig.push_back(6);
orig.push_back(11);
orig.push_back(2);
orig.push_back(19);
orig.push_back(7);
// This is a vector of {value,index} pairs
vector<pair<long,size_t> > vp;
vp.reserve(orig.size());
for (size_t i = 0 ; i != orig.size() ; i++) {
    vp.push_back(make_pair(orig[i], i));
}
// Sorting will put lower values ahead of larger ones,
// resolving ties using the original index
sort(vp.begin(), vp.end());
for (size_t i = 0 ; i != vp.size() ; i++) {
    cout << vp[i].first << " " << vp[i].second << endl;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-23T20:53:59.910

`std::sort``qsort`由于缺乏间接性和内联关键操作的可能性，已被证明比旧的更快。

的实现`std::sort`可能是高度优化的并且难以击败，但并非不可能。如果您的数据是固定长度和短的，您可能会发现[基数排序](http://en.wikipedia.org/wiki/Radix_sort)更快。[Timsort](http://en.wikipedia.org/wiki/Timsort)相对较新，并且为 Python 提供了良好的结果。

您可以将索引数组与值数组分开，但我认为额外的间接级别将被证明是速度杀手。最好将它们放在一个 struct 或`std::pair`.

与任何速度关键的应用程序一样，您必须尝试一些实际的实现并比较它们以确定哪个是最快的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-23T23:02:45.720

*可能*值得将数字和索引分开，然后**对索引进行排序**，如下所示：

```
#include <vector>
#include <algorithm>
#include <iostream>

void PrintElements(const std::vector<unsigned long long>& numbers, const std::vector<size_t>& indexes) {

    std::cout << "\tNumbers:";
    for (auto i = indexes.begin(); i != indexes.end(); ++i)
        std::cout << '\t' << numbers[*i];
    std::cout << std::endl;

    std::cout << "\tIndexes:";
    for (auto i = indexes.begin(); i != indexes.end(); ++i)
        std::cout << '\t' << *i;
    std::cout << std::endl;

}

int main() {

    std::vector<unsigned long long> numbers;
    std::vector<size_t> indexes;

    numbers.reserve(4); // An overkill for this few elements, but important for billions.
    numbers.push_back(32);
    numbers.push_back(91);
    numbers.push_back(11);
    numbers.push_back(72);

    indexes.reserve(numbers.capacity());
    indexes.push_back(0);
    indexes.push_back(1);
    indexes.push_back(2);
    indexes.push_back(3);

    std::cout << "BEFORE:" << std::endl;
    PrintElements(numbers, indexes);

    std::sort(
        indexes.begin(),
        indexes.end(),
        [&numbers](size_t i1, size_t i2) {
            return numbers[i1] < numbers[i2];
        }
    );

    std::cout << "AFTER:" << std::endl;
    PrintElements(numbers, indexes);

    return EXIT_SUCCESS;

} 
```

这打印：

```
BEFORE:
        Numbers:        32      91      11      72
        Indexes:        0       1       2       3
AFTER:
        Numbers:        11      32      72      91
        Indexes:        2       0       3       1 
```

这个想法是被排序的元素很小，因此在排序过程中可以快速移动。然而，在现代 CPU 上，间接访问`numbers`对缓存的影响可能会破坏这些收益，因此我建议在最终决定使用它之前对实际数据量进行基准测试。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-23T20:43:34.413

使用`std::vector`和`std::sort`。那应该提供最快的排序方法。要查找原始索引，请创建一个结构。

```
struct A {
    int num;
    int index;
} 
```

然后为比较结构中的 num 的排序创建自己的比较谓词。

```
struct Predicate {
    bool operator()(const A first, const A second) {
        return first.num < second.num;
    }
} 
```

`std::sort(vec.begin(), vec.end(), Predicate())`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-23T20:45:49.623

```
struct SomeValue
{
    unsigned long long val;
    size_t index;
    bool operator<(const SomeValue& rhs)const
    { 
       return val < rhs.val;
    }
}

 #include <algorithm>
 std::vector<SomeValue> somevec;
 //fill it...
 std::sort(somevec.begin(),somevec.end()); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-23T21:54:29.637

这将用于超级计算机？

在这种情况下，您可能需要研究并行排序算法。这仅对对大型数据集进行排序有意义，但如果你需要它，那将是巨大的胜利。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-23T22:45:08.943

您可能会发现[这](http://theory.stanford.edu/~amitp/rants/c++-vs-c/)是一本有趣的读物。我会从 STL 的排序开始，然后如果可以的话，我会尝试改进它。我不确定你是否可以在这台超级计算机上访问 C++11 编译器（如 gcc4.7），但我建议 std::sort 与 std::futures 和 std::threads 会让你很关于以可维护的方式并行化问题的一些方法。

这是[另一个](https://stackoverflow.com/questions/4708105/performance-of-qsort-vs-stdsort)将 std::sort 与 qsort 进行比较的问题。

最后，还有Dobb 博士的[这篇文章，比较了并行算法的性能。](http://www.drdobbs.com/go-parallel/article/228500262?pgno=3)

# asp.net - 在gridview中设置下拉列表selectedIndex

> ID：10287927
> 
> 赞同：0
> 
> 时间：2012-04-23T20:38:53.507
> 
> 标签：asp.net

我有一个由 ObjectDataSource 填充的 grideview。在 EditItemTemplate 中，我有一个下拉列表，它通过 RowDataBound 事件后面的代码填充：

```
 ddStates.DataSource = snm.getStates();
 ddStates.DataTextField = "State";
 ddStates.DataValueField = "StateID";
 ddStates.DataBind(); 
```

现在，我想做的是将我的下拉列表的选定索引设置为来自 objectDataSource 的行的当前值。如何从 ObjectDataSource 获取 StateID？

谢谢，我一直在这个圈子上跑来跑去。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T20:43:16.113

您总是可以使用行[`DataItem`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridviewrow.dataitem.aspx)来获取底层`DataSource`：

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow && e.Row.RowState == DataControlRowState.Edit))
    {
        // if this doesn't work, use the debugger to get the type of e.Row.DataItem
        DataRow row = ((DataRowView)e.Row.DataItem).Row;
        int StateID = row.Field<int>("StateID");
        var ddStates = (DropDownList)e.Row.FindControl("ddStates");
        ddStates.DataSource = snm.getStates();
        ddStates.DataTextField = "State";
        ddStates.DataValueField = "StateID";
        ddStates.DataBind();
        ddStates.SelectedValue = StateID.ToString();
    }
} 
```

# joomla - 如何将 recaptcha 插入我的自定义 joomla 2.5 模块？

> ID：10287929
> 
> 赞同：-2
> 
> 时间：2012-04-23T20:38:56.427
> 
> 标签：joomla

我有几个表单字段的简单模块，我想在提交之前验证“人性”。我尝试过 ReCaptcha::get('html'); 但我确信缺少一些东西。我将不胜感激任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-28T04:43:20.763

**尝试以下步骤：**

1) 从这里获取 Google Recaptcha 密钥[>>](http://www.google.com/recaptcha)

2）将这些键设置为recaptcha插件，如果不是则激活它。

3）将下面的代码放在你想显示recaptcha的地方：

```
//php code:

JPluginHelper::importPlugin('captcha');

$dispatcher = JDispatcher::getInstance();

$dispatcher->trigger('onInit','dynamic_recaptcha_1');

//html code inside form tag:

<div id="dynamic_recaptcha_1"></div> 
```

4）将此代码放在您验证/处理表单的位置

```
$post = JRequest::get('post');      
JPluginHelper::importPlugin('captcha');
$dispatcher = JDispatcher::getInstance();
$res = $dispatcher->trigger('onCheckAnswer',$post['recaptcha_response_field']);
if(!$res[0]){
    die('Invalid Captcha');
} 
```

**更多：**

请参阅[docs.joomla.org>>](http://docs.joomla.org/How_do_you_use_Recaptcha_in_Joomla_2.5?)

# jquery - 结合两个复选框以了解他们是否点击了

> ID：10287941
> 
> 赞同：0
> 
> 时间：2012-04-23T20:39:39.483
> 
> 标签：jquery, checkbox, selection

我想知道如何检查`combine`以下两个`checkboxes`要知道`both`的内容，并且我想将它们的值写在`hidden field`.

这些是我的复选框和一个隐藏字段：

```
<input type="checkbox" name="chkText" id="cbA" value="" />A
<input type="checkbox" name="chkText" id="cbB" value="B" />B
<input id="TextSelection" type="hidden" /> 
```

我想知道可以这样写，因为这不起作用

```
if ($('#cbA','#cbB').is('checked')) {
$('#TextSelection').val("A and B");
} 
```

[**演示**](http://jsfiddle.net/hxUf3/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T20:41:23.360

```
if ($('#cbA').is(':checked') && $('#cbB').is(':checked')) {
    $('#TextSelection').val("A and B");
} 
```

另一种方法：

```
if ($('#cbA,#cbB').filter(':checked').length==2) {
  $('#TextSelection').val("A and B");
} 
```

这是第二种方法的[演示](http://jsfiddle.net/tHcJC/1/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T20:47:54.700

编辑：尝试新功能`checkedResult`，它将在您选择时返回，

```
$.fn.checkedResult = function() {
    var result = '';
    $.each($(this), function() {
        if (this.checked) {
            result += this.value;
        }
    });

    return (result == '')?'No Effects': result;
};

var $chkboxes = $("input[name='chkTextEffects']");
$chkboxes.change(function() {
    alert($chkboxes.checkedResult());
}); 
```

[**演示**](http://jsfiddle.net/skram/hxUf3/2/)

* * *

要么像其他答案那样以更长的形式编写它，要么编写自定义函数并返回`&&`结果。

```
$.fn.isChecked = function () {
    var isChecked = true;
    $.each($(this), function() {
        isChecked = isChecked && this.checked;
    });

    return isChecked;
}; 
```

然后如下调用它，

```
$('input[name=chkText]').isChecked() 
```

[**演示**](http://jsfiddle.net/skram/5juEk/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T20:41:55.503

只需写更长的形式：

```
if ($('#cbA').is(':checked') && $('#cbB').is(':checked')){
    $('#TextSelection').val("A and B");
} 
```

[简化，工作，JS Fiddle 演示](http://jsfiddle.net/davidThomas/hxUf3/1/)。

### 最初发布，非工作，jQuery：

```
$(document).ready(function() {
    $("input[name='chkTextEffects']").change(function() {
        if ($("#cbSolid").val() == 'Solid') {
            alert('Solid');
        } else if ($("cbOutline").val() == 'Outline') {
            alert('Outline');
        } else if ($('#cbSolid').is(':checked') && $('#cbOutline').is(':checked')) {
            alert('SolidOutline');
        } else {
            aler('No Effects');
        }
    });
}); 
```

您发布的代码不起作用的原因是`if`/`else if`语句的顺序。

如果*两个*复选框都被选中，则这符合*第一个*评估`if`的要求；JavaScript 不会评估是否有另一个*更*`if`真实的，它只是执行它在*第一个*评估返回后发现的内容。**`true`**

 **要使结构保持该顺序，您可以添加`&& $(otherCheckbox).not(':checked')`，但这过于冗长。您所要做的就是将最难满足的评估移动到其他可以在多种情况下匹配的评估之前。**

# c# - 3 个表为一个数组

> ID：10287946
> 
> 赞同：-4
> 
> 时间：2012-04-23T20:40:14.320
> 
> 标签：c#, database

我试图将 3 个表放入一个数组中。存储过程有效。在第一行添加错误说对象引用未设置为对象的实例。有什么办法可以做到这一点？我不确定我是否完全错了。提前谢谢。

```
 public static ArrayList SearchContacts(string search)
    {
        Contacts C = new Contacts();
         ContactsAddress D= new ContactsAddress();
         ContactPhone E = new ContactPhone();
        ArrayList ret = new ArrayList();
        SqlDataSource ds = Database.GetDataSource();
        ds.SelectCommand="_ContactSearch";
        ds.SelectCommandType=SqlDataSourceCommandType.StoredProcedure;

         ds.SelectParameters.Add("FirstName", DbType.String,C.FirstName.ToString());
         ds.SelectParameters.Add("LastName", DbType.String,C.LastName.ToString());
         ds.SelectParameters.Add("EmailAddress", DbType.String,C.EmailAddress.ToString());
         ds.SelectParameters.Add("PostalCode", DbType.String,D.PostalCode.ToString());
         ds.SelectParameters.Add("PhoneNumber", DbType.String,E.PhoneNumber.ToString());

         IEnumerator i = ds.Select(System.Web.UI.DataSourceSelectArguments.Empty).GetEnumerator();
        while (i.MoveNext())
        {
            DataRowView d = (DataRowView)i.Current;

            fillSearch(d, ref C,ref D, ref E);
            ret.Add(C);
            ret.Add(D);
            ret.Add(E);
        }
        return ret;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T20:47:41.897

我的猜测是您的`Contacts`构造函数没有为该`FirstName`字段设置值。所以当你调用时`C.FirstName.ToString()`，它会抛出一个空引用异常。

# mongodb - 将现有的 MongoDB 字符串属性转换为 BSON::ObjectId

> ID：10287947
> 
> 赞同：2
> 
> 时间：2012-04-23T20:40:21.633
> 
> 标签：mongodb, mongoid

我在 MongoDB 中有一个文档集合，其中一个属性存储为字符串，如果将其保存为 BSON::ObjectId 会更好。

集合名称为`foo`，字段为`bar`。让每个字段`bar`将其现有值转换为 BSON::ObjectId 实例的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T23:11:49.773

你是这个意思吗？（你有一个字符串是 ObjectId 的十六进制，你想把它变成一个 ObjectId）

```
> db.foo.insert({bar:new ObjectId().str});
> db.foo.insert({bar:new ObjectId().str});
> db.foo.insert({bar:new ObjectId().str});
> db.foo.find();
{ "_id" : ObjectId("4f95e00d9060633ce7fbab94"), "bar" : "4f95e00d9060633ce7fbab93" }
{ "_id" : ObjectId("4f95e0119060633ce7fbab96"), "bar" : "4f95e0119060633ce7fbab95" }
{ "_id" : ObjectId("4f95e0119060633ce7fbab98"), "bar" : "4f95e0119060633ce7fbab97" }
> db.foo.find().forEach(function(doc) { db.foo.update({_id:doc._id},{$set:{bar:new ObjectId(doc.bar)}}); });
> db.foo.find();
{ "_id" : ObjectId("4f95e00d9060633ce7fbab94"), "bar" : ObjectId("4f95e00d9060633ce7fbab93") }
{ "_id" : ObjectId("4f95e0119060633ce7fbab96"), "bar" : ObjectId("4f95e0119060633ce7fbab95") }
{ "_id" : ObjectId("4f95e0119060633ce7fbab98"), "bar" : ObjectId("4f95e0119060633ce7fbab97") } 
```

或者这就是你的意思？（你有一个字符串，但你想把它吹走并在它的位置创建一个新的 ObjectId）

```
> db.foo.insert({bar:"some string id"});
> db.foo.insert({bar:"some string id2"});
> db.foo.insert({bar:"some string id3"});
> db.foo.find();
{ "_id" : ObjectId("4f95e1779060633ce7fbaba5"), "bar" : "some string id" }
{ "_id" : ObjectId("4f95e1799060633ce7fbaba6"), "bar" : "some string id2" }
{ "_id" : ObjectId("4f95e17b9060633ce7fbaba7"), "bar" : "some string id3" }
> db.foo.find().forEach(function(doc) { db.foo.update({_id:doc._id},{$set:{bar:new ObjectId()}}); });
> db.foo.find();
{ "_id" : ObjectId("4f95e1779060633ce7fbaba5"), "bar" : ObjectId("4f95e1819060633ce7fbaba8") }
{ "_id" : ObjectId("4f95e1799060633ce7fbaba6"), "bar" : ObjectId("4f95e1819060633ce7fbaba9") }
{ "_id" : ObjectId("4f95e17b9060633ce7fbaba7"), "bar" : ObjectId("4f95e1819060633ce7fbabaa") } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T20:49:47.853

I don't think you can change an objects ID, but you can do something like this:

```
db.whatevers.find().forEach(function(x) {
   x.oldId = x._id; // this can be handy :)
   x._id = new ObjectID();
   db.whatevers.insert(x);
})

db.whatevers.remove({oldId:{$exists:false}}}; 
```

# java - 是否可以在 Java 中创建自定义运算符？

> ID：10287952
> 
> 赞同：10
> 
> 时间：2012-04-23T20:40:45.983
> 
> 标签：java, operator-keyword

类似于[是否可以在 c# 中创建新运算符？](https://stackoverflow.com/questions/1040114/is-it-possible-to-create-a-new-operator-in-c)，是否可以为 Java 创建自己的运算符？我最初会说不，因为您不能重载，但话又说回来，String 支持 + 和 += （在执行时通过 StringBuilder 隐式等）。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-23T20:42:29.443

不，Java 不能以这种方式扩展。您不能添加运算符，甚至不能进一步重载内置运算符，例如`+`- 甚至像 BigInteger 这样的标准库类也必须使用`add()`诸如`+`.

Scala（另一种静态 JVM 语言）通过使用方法调用而不是内置运算符来解决这个问题，并允许方法名称中包含任何字符，因此您可以定义看起来是运算符的新方法，即

```
a + 1 
```

是语法糖：

```
a.+(1) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-23T20:48:13.443

Java 不允许这样做。

但是，如果您想实现这种语法，同时能够在 JVM（以及其他 Java 代码）上运行您的代码，您可以查看具有[运算符重载](http://groovy-lang.org/operators.html#Operator-Overloading)的 Groovy （您也可以简称为 DSL）与使用自定义运算符具有类似效果的语法）。

请注意，定义自定义运算符（不仅仅是重载）在任何语言中都是一件大事，因为您必须能够以某种方式更改词法分析器和语法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T20:42:34.283

不，您不能为 Java 中的运算符重载特殊符号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T20:48:29.320

正如所有其他人所说，您绝对不能在 Java 中添加新的运算符。但是，其他对 Java 友好的 JVM 语言（如 Groovy）将允许您从现有的操作符标记中定义新的操作符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T20:49:44.543

不。阅读这篇文章，了解为什么它们不应该是：http: [//java.dzone.com/articles/why-java-doesnt-need-operator](http://java.dzone.com/articles/why-java-doesnt-need-operator)

您可以使用不同的语言，如 Scala，在 java 平台上实现这一点。- [https://stackoverflow.com/a/1991348/1342121](https://stackoverflow.com/a/1991348/1342121)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-02-07T10:20:05.217

不，Java 不允许运算符重载。您可以在这里看到更多讨论：[https ://javarevisited.blogspot.com/2011/08/why-java-does-not-support-operator.html](https://javarevisited.blogspot.com/2011/08/why-java-does-not-support-operator.html)

# ios - 使用 ABPersonViewController 的正确方法？

> ID：10287954
> 
> 赞同：1
> 
> 时间：2012-04-23T20:40:59.937
> 
> 标签：ios, cocoa-touch, abaddressbook

我对 Objective-C 很陌生，所以如果我遗漏了一些你认为显而易见的东西，我很抱歉:)

我编写了一个简单的程序来显示地址簿，并选择一个用户（模仿 iOS 联系人列表）。

我有一个基本的控制器：

```
@interface BasicViewController : 
UIViewController<ABPersonViewControllerDelegate> 
```

控制器从先前的视图接收 ABRecordRef。在我的一种方法中，我使用：

```
ABPersonViewController* ctrl = [[ABPersonViewController alloc]init];

ctrl.allowsEditing = NO;
[ctrl setPersonViewDelegate:self];
[ctrl setDisplaydPerson:person];

[self setView:ctrl.view];
[self.navigationController pushViewController:ctrl animated:
YES]; 
```

当我到达实际视图时，我得到一个空白屏幕（背景与 ABPersonView 相关联）。我摆弄了一下displayedProperties：

```
ctrl.displayedProperties = [NSArray arraywithObjects:
     [NSNumber numberWithInt:kABPersonLastNameProperty],nil]; 
```

当我指定我只想查看姓氏时 - 同一视图上出现一条消息 - NO_VALUE_UNKNOWN

我检查了调试，我的 ABRecordRef 不为空，并且包含所有相关字符串。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T14:25:56.627

解决了 :) 我从 segue 中调用了一个包含上面显示的代码的方法。直到我的方法被调用之后，super 的 viewDidLoad 方法才被调用。

当我重新安排呼叫顺序时，它就像一个魅力:)

# perl - 使用 Perl 绑定到活动目录，其中 OU 是可变的

> ID：10287958
> 
> 赞同：0
> 
> 时间：2012-04-23T20:41:06.893
> 
> 标签：perl, login, ldap

我在内部应用程序上有一段遗留代码需要修改。在我重做整个事情之前，有一种简单的方法可以完成与 AD 的绑定，其中 OU 可以根据正在验证的用户而有所不同。设置非常标准：

```
my($mesg) = $ldap->bind ("cn=$uid,ou=Workers,ou=Domain Users,dc=something,dc=com", password => "$psswd"); 
```

并非所有用户都是“工人”OU。有些在不同的OU中......基本上我想知道是否有一个“if-then-else”例程用于从perl绑定到AD。如果可以避免的话，我宁愿不设置第三方帐户来搜索它......但我读过的几乎所有文档似乎都指向这种登录方法。有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T08:58:42.117

这被称为“简单”绑定请求，它将专有名称和专有名称的凭据作为参数。绑定请求可以包含零个或多个请求控件。构造一个`$distinguishedName`在传输绑定请求之前调用的变量，传输绑定请求，处理响应，并处理响应中包含的任何响应控件：

```
my $namingContext = "ou=domain users,dc=something,dc=com";
my $distinguishedName = sprintf "%s,%s,%s",$cn,$ou,$namingContext;
my $bindResult = $ldap->bind($distinguishedName,$credentials);
# handle any response controls attached to the bind response ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T20:47:47.620

您无需为 AD 指定完整的 DN。用户名应该足够了。

# javascript - 带有 javascript 的 Rail 3.2

> ID：10287962
> 
> 赞同：0
> 
> 时间：2012-04-23T20:41:23.727
> 
> 标签：javascript, ruby-on-rails-3.2

我是 Rails 3.2 的新手。我不知道如何在 Rails 3.2 中使用 javascript。其中有资产文件，资产文件中有一个名为javascript的文件。但是，在此文件中，文档名称为`controller_name.js.coffee`. 因此，我需要帮助。如何管理我的 javascript+jQuery 代码？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T00:34:48.273

在开箱即用的 Rails 3.1+ 应用程序中，该`application.js.coffee`文件会引入所有其他文件`.js`和`.js.coffee`文件

```
# require_tree . 
```

链轮指令。在开发模式下，这会分别为您的所有 JS 文件提供服务。在生产中，它将它们连接起来。

如果您想使用 JavaScript 而不是 CoffeeScript，只需将`.js.coffee`扩展名替换为`.js`. （不要忘记将`#`-style 注释替换为 -style 注释`//`。）

我希望这能给你足够的信息来开始。更多信息请查阅官方指南： http: [//guides.rubyonrails.org/asset_pipeline.html](http://guides.rubyonrails.org/asset_pipeline.html)

# c# - itextsharp PdfTextExtractor 拼写错误

> ID：10287964
> 
> 赞同：0
> 
> 时间：2012-04-23T20:41:34.880
> 
> 标签：c#, itextsharp, pdf-conversion, pdftotext

我们的数据库中有一个 PDF 格式的二进制文件。我将其流式传输并保存为 PDF 文件，并使用两个源进行了测试，最终得到相同的结果：PdfTextExtractor 拼错了一些单词。

例如，PDF 中有一个词“已确认”。PdfTextExtractor 转换后，拼写为“已确认”。

我在调试中逐步完成该过程，它在被 PdfTextExtractor 转换后立即拼写错误，所以我确信它不是不准确的，因为我正在做一些事情。

我能做些什么来提高 PdfTextExtractor 的准确性吗？

这是我目前正在使用的代码：

```
var reader = new PdfReader(myBinaryPdfData.ToArray());
var output = new StringWriter();

for (var i = 1; i <= reader.NumberOfPages; i++)
{
    output.WriteLine(PdfTextExtractor.GetTextFromPage(reader, i, new LocationTextExtractionStrategy()));
}

output.ToString(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T13:30:51.483

PDF 不一定以与文本的视觉表示相匹配的模式存储文本。“你好”这个词可以写成`draw "Hello" at 10,10`或`draw "H" at 10,10, "e" at 14,10, "l" at 18,10...`。也可以`draw "H" at 10,10, now draw a circle at 500,500, now show an image at 60,60, now draw "llo" at 18,10, now draw a square at 300,300, now draw "e" at 14,10`。

最后一个可能与您的实际情况相似。提取在文件中组合在一起的`PdfTextExtractor`文本块。在上面的最后一种情况下，它将按以下顺序返回三个字符串：“H”、“llo”、“e”。

允许大量格式化的 PDF 制作者（Adobe InDesign 和 Illustrator 是两个很好的例子）更有可能生成以非线性方式编写的 PDF。为什么？老实说，他们可能不太关心其中的数据，他们只关心 PDF 的视觉表示。（实际上，近年来，这两种产品在生成 PDF 方面都做得更好，尽管还不够完美。）

如果您想查看 PDF 的内部结构并让 Adob​​e Acrobat Pro 启动 Preflight（可能在工具或印刷制作中）。在打开的窗口中单击右上角的选项，然后单击浏览器内部 PDF 结构。单击顶部标有“BT”的拼图图标。打开给定页面并展开“内容”节点。每个文本条目都以 a 开头`BT`并以 . 结尾`ET`。展开每一个，你会看到类似`(test) Tj`. 括号标记要输出的实际文本的开始/停止。将此与您的实际期望进行比较。

如果你真的，真的必须在 iTextSharp 级别纠正这个问题，那么你就需要进行一些计算。您需要[子类`TextExtractionStrategy`](https://stackoverflow.com/questions/2375674/itextsharp-how-to-get-the-position-of-word-on-a-page/4866110#4866110)化或[实现`ITextExtractionStrategy`接口](https://stackoverflow.com/a/6884297/231316)。有关基本详细信息，请参阅这些链接。基本上，iTextSharp 的功能与以前完全相同，但除了文本之外，您将获得一些坐标，并且您必须弄清楚如何将它们拼凑在一起。您必须弄清楚字母的接近程度，以确定应该将字母注入单词的位置，或者该字母是否实际上构成了一个新单词/句子。祝你好运！

# php - textarea 的字段类型是什么？

> ID：10287965
> 
> 赞同：8
> 
> 时间：2012-04-23T20:41:39.280
> 
> 标签：php, mysql, types, textarea

我有一个表格，客户将在各种文本区域中输入几段。我应该为字段类型选择 varchar 还是 text？有关系吗？

谢谢。

埃里克

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-23T20:45:58.610

这取决于您接受的文本的可能长度。文本完全没有限制，但这意味着你最终可能会得到一个巨大的、巨大的、荒谬的响应大小。另一方面，如果您不担心这一点，文本就可以了。

Varchar 要求您了解您希望最大响应的大小，例如 256、1000、4000 个字符。上面的任何数据都将丢失。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-23T20:44:44.580

对于没有大小限制的文本，我通常使用**text**，当您定义了最大大小时使用**varchar 。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T20:46:13.197

依靠。varchar 和 text 之间的区别在于，当 text 是指针时，varchar 实际上存储在行中。

Varchar 通常更快。当语句不是很长并且有限制时，通常使用 varchar。文本用于大量数据。

# jquery - 如何使用 MVC3 和 jquery 创建树视图并获取修改后的树返回服务器端？

> ID：10287968
> 
> 赞同：0
> 
> 时间：2012-04-23T20:42:00.560
> 
> 标签：jquery, asp.net-mvc-3

我对 ASP .NET MVC3 很陌生，我似乎无法理解如何做到这一点。我希望能够采用我的模型并用它创建一个树视图。这部分很简单，我将模型传递给我的视图，然后遍历列表并生成 HTML。然后我使用其中一个 jquery 插件将 HTML 呈现为树视图。

下一部分是我遇到的麻烦。我希望能够使用 jquery 插件公开的任何方法来修改树视图。完成修改后，我希望能够回发并拥有该数据服务器端，以便我可以处理它。如何将此数据传递回我的控制器？

再说一次，我是 MVC 的新手，所以如果我遗漏了一些非常明显的东西，请原谅我。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T04:49:28.160

我认为您缺少的部分是您正在尝试以“矮胖”的方式来做。

逐个编辑发布您的更改。每个动作都应该发回，所以你正在记录操作。这很“健谈”，大多数网站都是这样操作的，为用户在幕后自动保存。

使用这种方法，您不需要解析整个树并找出发生了什么变化。您只需向服务器发送命令，如“CreateNode”、“DeleteNode”或“MoveNode”，您可以单独处理节点。

作为提示，请记住为每个节点分配一个 ID，以便您可以通过脚本轻松识别它们。

干杯。

# ruby-on-rails - 简单的 rspec 模型测试无法测试是否设置了属性

> ID：10287969
> 
> 赞同：0
> 
> 时间：2012-04-23T20:42:03.023
> 
> 标签：ruby-on-rails, rspec

我对 Rails 比较陌生，我不确定为什么这个 rspec 测试失败了。

模型类

```
class Invitation < ActiveRecord::Base
  belongs_to :sender, :class_name => "User"

  before_create :generate_token

  private 
  def generate_token
    self.token = Digest::SHA1.hexdigest([Time.now, rand].join)
  end
end 
```

测试

```
 it "should create a hash for the token" do
    invitation = Invitation.new
    Digest::SHA1.stub(:hexdigest).and_return("some random hash")
    invitation.token.should == "some random hash"
  end 
```

错误：

```
Failure/Error: invitation.token.should == "some random hash"
       expected: "some random hash"
            got: nil (using ==) 
```

邀请模型有一个 token:string 属性。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T20:48:34.120

`before_create`之前`save`在新对象上运行。所做的只是实例化一个`Invitation.new`新的邀请对象。您需要在调用 new 后保存，或者只需创建邀请对象即可。

```
Digest::SHA1.stub(:hexdigest).and_return("some random hash")
invitation = Invitation.new
invitation.save
invitation.token.should == "some random hash" 
```

或者

```
Digest::SHA1.stub(:hexdigest).and_return("some random hash")
invitation = Invitation.create
invitation.token.should == "some random hash" 
```

# jpa - Spring JPA 数据“或”查询

> ID：10287971
> 
> 赞同：21
> 
> 时间：2012-04-23T20:42:16.300
> 
> 标签：jpa, spring-data-jpa

我正在使用 Spring Data JPA 并尝试向我的存储库添加查询。我试图在没有 @Query 注释的情况下构建查询，例如：

```
List<Item> findByTypeAndStateOrStateAndStartDateBetween(Type type, State s, State s2, Date startDate, Date endDate); 
```

我的目标是建立一个这样的查询：

```
select * from item where type = ? and (state = ? or state = ?) and start_date between ? and ? 
```

我的问题是 OR 子句。有没有办法确保有括号？否则，逻辑不对。我在这里找到的例子：http: [//static.springsource.org/spring-data/data-jpa/docs/1.0.0.M1/reference/html/#jpa.query-methods.query-creation](http://static.springsource.org/spring-data/data-jpa/docs/1.0.0.M1/reference/html/#jpa.query-methods.query-creation)

没有超过 1 列的 or 子句。

另外，有没有办法传入对象列表。例如，如果我想查找具有 3 个状态的项目，我将不得不创建另一个查询，该查询不能很好地扩展。

谢谢。

编辑：

我想出了如何使用@Query 表示法传递状态列表。你这样做：

```
@Query("FROM item i WHERE i.type = ?1 AND i.state IN (?2)") 
```

然后，您可以将一个列表作为第二个参数传递给该方法。如果不使用 @Query 表示法，仍然不知道如何做到这一点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-12-06T16:31:05.867

我想做同样的事情来获取特定站点的所有数据，即在两个日期之间。

```
findByStartdateBetweenOrEnddateBetweenAndStation(start,end,start,end,station)
Gives you ==>
SELECT...WHERE (startdate between start,end) OR ( enddatebetween start,end AND station=station) 
```

和：

```
findByStationAndStartdateBetweenOrEnddateBetween(station, start,end,start,end)
Gives you ==>
SELECT...WHERE (station=station AND startdate between start,end) OR enddatebetween start,end 
```

两者都是我想要的错误：

```
 SELECT...WHERE station=station AND (startdate between start,end OR enddatebetween start,end) 
```

使用 @Query 非常具体，不要冒险将您的 AND/OR 与方法名称混合。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-09-16T12:24:03.413

嗯，你很亲密。要做到这一点，可以使用不`@Query`使用`In`or`IsIn`关键字（不确定在提出问题时是否支持这些关键字）：

```
List<Item> findByTypeAndStateInAndStartDateBetween(Type type, Collection<State> states, Date startDate, Date endDate); 
```

> In 和 NotIn 也将 Collection 的任何子类以及数组或可变参数作为参数。对于相同逻辑运算符的其他语法版本，请检查[存储库查询关键字](https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repository-query-keywords)。

这足以满足您为 OR 标准传递任意数量状态的需要。

[参考：表 4.查询创建](https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.query-methods.query-creation)文档中方法名称中支持的关键字

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-04T18:45:42.713

```
@Query("FROM item i WHERE i.type = :type AND i.state IN (:state1, :state2)")
List<Item> findByTypeAndTypeIn(@Param("type") Type type, @Param("state") State s1, @Param("state2") State s2); 
```

# c# - c#这条线是什么意思？

> ID：10287972
> 
> 赞同：3
> 
> 时间：2012-04-23T20:42:20.787
> 
> 标签：c#, return-value, null-coalescing-operator

有人可以解释一下下面的代码`return total ?? decimal.Zero`吗？

```
public decimal GetTotal()
{
    // Part Price * Count of parts sum all totals to get basket total
    decimal? total = (from basketItems in db.Baskets
                      where basketItems.BasketId == ShoppingBasketId
                      select (int?)basketItems.Qty * basketItems.Part.Price).Sum();
    return total ?? decimal.Zero;
} 
```

是以下的意思吗？

```
 if (total !=null) return total;
    else return 0; 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-23T20:43:40.207

是的，就是这个意思。它被称为[空合并运算符](http://msdn.microsoft.com/en-us/library/ms173224.aspx)。

这只是一个语法快捷方式。但是，它可能更有效，因为正在读取的值只评估一次。（请注意，在两次评估该值有副作用的情况下，也可能存在功能差异。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-23T20:47:32.710

在`??`C# 中称为[空合并运算符](http://msdn.microsoft.com/en-us/library/ms173224.aspx)。大致*相当于*下面的代码

```
if (total != null) {
  return total.Value;
} else {
  return Decimal.Zero;
} 
```

上述`if`语句扩展和`??`运算符之间的一个关键区别是如何处理副作用。在`??`示例中，获取值的副作用`total`仅发生一次，但在`if`语句中它们发生两次。

在这种情况下，这并不重要，因为`total`它是本地的，因此没有副作用。但如果说它是一个副作用属性或方法调用，这可能是一个因素。

```
// Here SomeOperation happens twice in the non-null case 
if (SomeOperation() != null) {
  return SomeOperation().Value;
} else { 
  return Decimal.Zero;
}

// vs. this where SomeOperation only happens once
return SomeOperation() ?? Decimal.Zero; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-23T20:44:03.253

它是空合并运算符。

实际上，这就像以这种方式重写代码：

```
 return (total != null) ? total.Value : decimal.Zero; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-23T20:45:48.090

你搞定了。它被称为空合并运算符。[在这里](http://msdn.microsoft.com/en-us/library/ms173224.aspx)查看。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-23T20:43:47.457

它返回第一个非空表达式（第一个表达式是`total`，第二个表达式是`decimal.Zero`）

所以如果`total`为null，`decimal.Zero`将返回。

# wpf - 启用、禁用某些列 WPF Toolkit 数据网格

> ID：10287976
> 
> 赞同：0
> 
> 时间：2012-04-23T20:42:35.383
> 
> 标签：wpf, datagrid, toolkit

我正在尝试创建具有以下格式的 WPF 工具包数据网格。我能够在数据网格的 LoadingRow 事件中隐藏列的内容。但最后一列是一个按钮，不知道如何隐藏它的内容。每个名称只应显示一次。关于如何做到这一点的任何建议？

![在此处输入图像描述](../Images/69730e99a227170141e5581dc53dc553.png)

谢谢DM

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T20:52:25.003

```
<DataGridTemplateColumn>
    <DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
        <Button Content="Delete"
               Visibility="{Binding CanDelete, Converter={StaticResource BoolToVisibility}}"/>
        </DataTemplate>
    </DataGridTemplateColumn.CellTemplate>
</DataGridTemplateColumn> 
```

CanDelete is a bool property on your Row Binding on your List , change it to true when needed PropertyChanged + Binding will do the rest.

# javascript - 在 SharePoint 2010 中使用 jQuery 有条件地隐藏内容

> ID：10287978
> 
> 赞同：0
> 
> 时间：2012-04-23T20:42:43.833
> 
> 标签：javascript, jquery, sharepoint-2010

我正在为 SharePoint 2010 开发一个博客。我已经设置了所有内容，但现在我需要安装验证码，然后用户才能对帖子发表评论。我有一个为验证码开发的 Web 部件。我在想我可以使用跨度 id 的文本值“ctl00_m_g_c9d562b9_1531_47ac_b0f0_24f06ecea4cc_MessageLabel”（你必须喜欢共享点命名哈哈）和 jQuery 来显示和隐藏基于是否有成功值的评论部分！。不幸的是，我在让它发挥作用方面收效甚微。这是我的代码...

```
<script type="text/javascript">
    $(document).ready(function(){
     $("#WebPartWPQ7").hide();
     if($("#ctl00_m_g_c9d562b9_1531_47ac_b0f0_24f06ecea4cc_MessageLabel").text() == success!) {
      $("#WebPartWPQ7").show();
     };
    });
</script> 
```

我对编码很感兴趣，可以使用任何指导或建议。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T20:48:35.367

```
<script type="text/javascript">
    $(document).ready(function(){
        var webPart = $("#WebPartWPQ7").hide();
        if($("#ctl00_m_g_c9d562b9_1531_47ac_b0f0_24f06ecea4cc_MessageLabel").text() == "success!") {
            webPart.show();
        };
    });
</script> 
```

你的“成功”是一个变量吗？也许你只是错过了报价。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T20:48:43.043

```
 if($("#ctl00_m_g_c9d562b9_1531_47ac_b0f0_24f06ecea4cc_MessageLabel").text() == "success!") { 
```

您错过了`success!`. 您还需要将此附加到某种事件，否则 jQuery 将在文档准备好时评估此代码一次，并且永远不会再次评估此代码。也许像这样？

```
$(document).ready(function(){
 $("#WebPartWPQ7").hide();
 $("#captcha_input").change(function(){
   if($("#ctl00_m_g_c9d562b9_1531_47ac_b0f0_24f06ecea4cc_MessageLabel").text() == success!) {
    $("#WebPartWPQ7").show();
 });
 };
}); 
```

每次更改验证码输入时都会检查是否成功。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T20:49:50.633

Rather than hiding your "WebPartWPQ7" element on the document ready, just give it the css style `display:none` (this will hide the element by default)

Also, you need to have quotes around your success!

```
<script type="text/javascript">
    $(document).ready(function()
    {
            if($("#ctl00_m_g_c9d562b9_1531_47ac_b0f0_24f06ecea4cc_MessageLabel").text() == "success!")
            {
                    $("#WebPartWPQ7").show();
            };
    });
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T20:51:46.653

Have you tried putting "success!" in quotes?

Usually with Recaptcha you will allow the user to type the comment, fill in the Recaptcha, and then click "Enter" or "Ok". Then the server would check the Recaptcha and either allow the comment or deny it. I don't really understand what you're trying to do.

# c++ - 压缩 switch 语句？

> ID：10287980
> 
> 赞同：0
> 
> 时间：2012-04-23T20:42:57.560
> 
> 标签：c++, switch-statement

我一直想知道的东西，因为它似乎出现在我没有经验的代码中。

我有一些代码经常使用 switch 语句，但它真正做的只是每次访问不同的队列。

```
void store(int toSwitchOn, float posx, float posy){ 
    myDataStruct newValue;
    newValue.psX = posx;
    newValue.psY = posy;

    switch(toSwitchOn){
        case 1:
            queue1.push(newValue);          
            break;
        case 2:
            queue2.push(newValue);          
            break;
        case 3:
            queue3.push(newValue);
            break;
        case 4:
            queue4.push(newValue);
            break;
        case 5:
            queue5.push(newValue);
            break;
    }

} 
```

每个语句中唯一改变的是队列变量。有没有一些巧妙的方法来压缩这种重复的代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T20:44:27.363

将队列存储在向量中。

```
std::vector<std::queue<someType> > queues (5);
//fill vector with your 5 queues

//this replaces the switch:
if (toSwitchOn >= 1 && toSwitchOn <= 5)
    queue [toSwitchOn - 1].push (newValue);
else
    //default switch case 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T20:51:24.037

```
std::vector<std::queue<someType> > queues (5); 
//toSwitchOn is of type size_t and zero indexed.
... 
if (toSwitchOn < queues.size())
   queue [toSwitchOn].push (newValue);  //0 - 1 = undefined land...     
else     //default switch case 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T21:09:44.873

显而易见的答案是`switch`用一个`vector`或`map`查找要打开的东西来替换。

但是，我认为整数和向量索引之间的耦合是一个泄漏接口。

我想知道这个函数的调用者如何知道要使用哪个整数值。谁告诉他们使用什么？他们可能只是被赋予了对一个`Storage`对象的引用吗？

代替：

```
int function_telling_which_index_to_use_for_storage(); 
```

和：

```
Storage* storage_to_use(); 
```

然后你可以说：

```
Storage* storage = storage_to_use();
// ...
storage->store(posx, posy); 
```

记住：封装，封装，封装。

# c# - DropDownList 在 example.com/Default.aspx 时发回，但在 example.com/ 时不发回

> ID：10287981
> 
> 赞同：2
> 
> 时间：2012-04-23T20:43:03.437
> 
> 标签：c#, asp.net, drop-down-menu, postback

**请参阅原始消息底部对此问题的更新**

我有一个页面 Default.aspx，其中包含一个下拉列表，其中 autopostback 设置为 true，onselectedindexchanged 设置为代码隐藏中的一个方法。这个问题是这样的：

1.  在 ASP.NET 2.0 中，它运行良好。（显示您选择的下拉项目的 URL）
2.  在 ASP.NET 4.0 Classic 中，它运行良好。
3.  在 ASP.NET 4.0 Integrated 中，如果您使用文件名（例如 www.example.com/test/Default.aspx）访问网站，它可以正常工作。
4.  在 ASP.NET 4.0 Integrated 中，如果您访问没有文件名的网站（例如 www.example.com/test/），它就不起作用。具体来说，它似乎第一次进入页面并显示“您在 Page_Load，而不是在 Postback 中”

注意：这个页面在 www.example.com 上并不存在，你知道的。

我需要它在 ASP.NET 4.0 Integrated 上工作。有谁知道世界上发生了什么？

我创建了一个简单的页面来演示这一点：

标记：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="Test_Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>
</head>
<body>
<form id="form1" runat="server">
<div>
 <asp:Panel ID="pSelectCourse" runat="server">
    Select Course:
    <asp:DropDownList ID="ddlNews" runat="server" AutoPostBack="True" 
        OnSelectedIndexChanged="ddlNews_SelectedIndexChanged">
        <asp:ListItem Text="-- Select a News Source --" Value="" ></asp:ListItem>
        <asp:ListItem Text="CNN" Value="http://www.cnn.com"></asp:ListItem>
        <asp:ListItem Text="New York Times" Value="http://www.nytimes.com"></asp:ListItem>
    </asp:DropDownList>
</asp:Panel>
</div>
</form>
</body>
</html> 
```

代码隐藏：

```
public partial class Test_Default : Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if (IsPostBack)
            Response.Write("You are in Page_Load on Postback");
        else
            Response.Write("You are in Page_Load, not on Postback");
    }

    protected void ddlNews_SelectedIndexChanged(object sender, EventArgs e)
    {
        Response.Write(ddlNews.SelectedValue);
    }
} 
```

**更新问题：**

此问题在[http://asp.net/whitepapers/aspnet4/breaking-changes的 ASP.NET 4 Breaking Changes 页面中进行了讨论](http://asp.net/whitepapers/aspnet4/breaking-changes). 这是列出的问题：“在 IIS 7 或 IIS 7.5 集成模式下的默认文档中可能不会引发事件处理程序”问题的底部有两个解决方案。第二种是将表单上的action值显式设置为Default.aspx页面。这可行（在上面的代码中尝试查看）但不是特别优雅，并且对于我们拥有的几个在默认文档中具有复杂表单的站点来说是一件痛苦的事情。我想要一个可以全局应用的解决方案，以便“/”和“Default.aspx”被视为相同，就像它们在 2.0 中一样。在 Breaking Changes 页面上还有另一个解决方案，我不明白如何实施，我希望能提供这个全球解决方案：

> 识别在默认文档请求期间访问请求实体主体的 HTTP 模块，并确定是否可以将其配置为仅对托管请求运行。在 IIS 7 和 IIS 7.5 的集成模式下，通过将以下属性添加到模块的 system.webServer/modules 条目，可以将 HTTP 模块标记为仅对托管请求运行：
> 
> 前提条件="managedHandler"
> 
> 对于 IIS 7 和 IIS 7.5 确定为非托管请求的请求，此设置会禁用该模块。对于默认文档请求，第一个请求是对无扩展名的 URL。因此，在初始请求处理期间，IIS 不会运行任何以托管 Handler 为前提条件的托管模块。因此，托管模块不会意外读取实体主体，因此实体主体仍然可用，并被传递给子请求和默认文档。

有人对如何实现这一点有任何想法吗？我真的不知道从哪里开始。

# python - 需要 django 的 gae 数据存储的详细工作示例

> ID：10287982
> 
> 赞同：0
> 
> 时间：2012-04-23T20:43:07.547
> 
> 标签：python, google-app-engine, google-cloud-datastore

我已经搜索和搜索，但我找不到一个有效的例子。

我是初学者，刚开始使用 gae 大约一个星期。

我使用bottle、jinja和sqlite3创建了一些页面。我知道如何使用 django 等创建页面，但我不知道如何使用数据存储。

请，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T22:04:52.063

您有权访问 Cloud SQL 吗？以下是一些说明：

[https://developers.google.com/cloud-sql/docs/django](https://developers.google.com/cloud-sql/docs/django)

否则，这很简单。只需通过 WSGI 连接 Django。

# c# - 对使用 Nhibernate 和 Castle 创建的重复记录进行故障排除

> ID：10287983
> 
> 赞同：0
> 
> 时间：2012-04-23T20:43:10.027
> 
> 标签：c#, nhibernate, inversion-of-control, castle-windsor

我们将 .Net 与 Nhibernate 和 Castle 用于 IOC（用于所有服务和存储库）。最近的部署开始发生一些奇怪的事情，我无法追踪问题。

我们在存储库中有以下代码块，在创建 ObjA 后从服务调用：

```
 public void Save(IList<ObjA> listA, IList<ObjB> listB, ObjC c, Objd d) {
        using (var session = GetSession()) {
            using (var tx = session.BeginTransaction()) {
                try {
                    session.Save(c);
                    foreach (var a in listA) {
                        session.Update(a);
                    }
                    foreach (var b in listB) {
                        // unrelated field updates here
                        session.Save(b);
                    }
                    session.Update(d);
                    if (!tx.WasCommitted) {
                        tx.Commit();
                    }
                } catch (Exception) {
                    if (tx != null) {
                        tx.Rollback();
                    }
                    throw;
                }
            }
        }
    } 
```

此代码称为在 listA 中传递 1 个 ObjA，在 listB 中传递 1 个 ObjB，再加上 ObjC 和 ObjD。

我们发现随机（大约有一半的时间）我们得到了重复的 ObjB 和 ObjC 记录（这里唯一被创建而不是更新的对象）。由于 ObjC 有一个 datetime 字段，我可以跟踪记录的创建时间，并且有时会在大约 12-18 小时内创建 5-100 条重复记录。这是在数据库中创建 ObjB 和 ObjC 记录的唯一代码。

我以前从未见过这样的事情，似乎有什么东西卡在了内存中并间歇性地调用这个函数（或 Nhibernate 调用）。我在其中一个似乎存在此问题的服务器上重新启动了 IIS，问题停止了，但第二天又在另一台服务器上启动。

有没有人对可能导致这种情况的原因有任何想法？Castle 或 Nhibernate 的配置中是否存在可能导致这些调用卡住并重复 12-18 小时（超过 100 次？）？

任何帮助表示赞赏:)

```
Service(){

    _saveLater = null;

    CalledByWS(){
        CreateObjA();
        CreateOtherObjs();  

    }   

    CreateObjA(){
        //Do a lot of stuff here

        var a = new ObjA{ };
        listToBeSaved.Add(a, SaveOrUpdate.Save);

        //Update other objects & add to the list

        if(xyz){
            _saveLater.ObjA = a
            _saveLater.ObjB = GetObjB(a);
            _saveLater.ObjC = GetObjC(a);   
        }

        _repo.SaveOrUpdate(listToBeSaved);
    }

    CreateOtherObjs(){
        if(_saveLater == null) return;

        Save(new List<ObjA> {_saveLater.ObjA}, new List<ObjB> {_saveLater.ObjB},
                _saveLater.Objc, _saveLater.ObjD);  //The original function posted
    }
}

Repo(){

  SaveOrUpdate(Dictionary<IEntity, SaveOrUpdate> objs){
    using (var session = GetSession()){
      using (var tx = session.BeginTransaction()) {
        try {
            foreach (var o in objs) {
                if (o.Key == null) continue;
                if (o.Value == SaveOrUpdate.Update)
                    session.Update(o.Key);
                else
                    session.Save(o.Key);
            }
            if (!tx.WasCommitted) {
                tx.Commit();
            }
        } catch (Exception) {
            if (tx != null) {
                tx.Rollback();
            }
            throw;
        }
      }
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T18:50:41.940

艾米，如果你看看发生的事情的最终结果，它会告诉你发生了什么。您传递的 ObjA 应该为每个唯一的 ObjA “创建”多个 ObjB 记录和 1 个 ObjC 记录。我猜您正在将您的 ObjA 与此函数范围之外的 ObjB 和 ObjC 相关联，然后依靠保存来保持该更改。这样想，最终会有很多不同的 ObjB 记录，外键指向同一个 ObjA 记录，而且大部分都不正确。 **出于某种原因，您的生产代码将 ObjA 与传递给此函数的 ObjB 和 ObjC 的相同 ID 相关联。关系代码甚至可以在设置传递给函数的 ObjA 之前将它们关联起来。在调用保存之前检查您对 ObjA 的更新并记录关联代码。您可能需要考虑调用该服务的第三方供应商之一可能会多次向您发送相同的数据。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T20:55:00.617

在我去寻找一个更复杂的问题之前，比如电话卡在内存中或者类似的东西，我会把钱花在保存功能本身被多次触发上。请注意，您注意到的唯一重复项是正在保存的对象。更新很可能也运行了多次，并且没有明显的副作用。

是否从 Web 应用程序调用此方法？提交按钮是否被双击？您可以通过添加日志记录机制并在调用 Save 方法以及调用它的参数时记录日志来测试这个理论。

# actionscript-3 - 使用 actionscript 3 为影片剪辑制作动画需要什么当前库？

> ID：10287990
> 
> 赞同：0
> 
> 时间：2012-04-23T20:43:29.620
> 
> 标签：actionscript-3, flash, actionscript

> **可能重复：**
> [AS3 的 Tween 库](https://stackoverflow.com/questions/2442191/tween-library-for-as3)

我已经离开 ActionScript 编程几年了，我正在尝试使用 AS3 创建一个简单的滑动门动画。我曾经使用 Tweener 来完成所有这些工作，但注意到该库自 2009 年以来一直没有更新，并且想知道当前哪些库允许 ActionScript 动画？（或者也许人们仍在使用旧图书馆......）

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T21:06:15.190

[Greensock 的 TweenMax、TweenLite 和 TweenNano](http://www.greensock.com/)在我看来是最好的。

# android - 检查手机时钟是否正确

> ID：10287994
> 
> 赞同：1
> 
> 时间：2012-04-23T20:43:38.543
> 
> 标签：android

正确设置手机时钟对我的 Android 应用程序很重要。有没有办法自动检查时间服务器是否设置正确，以便我可以提醒用户是否设置正确？如果没有，我只需要对其进行编码，以便它根据我的服务器时间检查电话时钟。

我在谷歌上看过，但找不到任何我需要的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T21:09:05.650

大多数电话都使用蜂窝网络提供的时间调整其内部时钟。AFAIK 没有内置 API 来检查某个时间服务器的时间，尽管查询您选择的服务器以获取当前时间应该相当简单。尽管您必须考虑由于查询和从服务器获得响应所需的时间而引入的错误。见[http://en.wikipedia.org/wiki/Network_Time_Protocol](http://en.wikipedia.org/wiki/Network_Time_Protocol)

如果您发现系统时间已关闭，您可以随时使用以下方法进行更正：`SystemClock.setCurrentTimeMillis()`虽然我不确定这是否会持续，或者手机是否最终会使用来自蜂窝网络的信息重新重置时钟。

# android - 未应用 Android setContentView

> ID：10287998
> 
> 赞同：1
> 
> 时间：2012-04-23T20:43:52.497
> 
> 标签：android

嗨，我这是对先前问题的重新提问，只是因为我以前不清楚。我有一个 json 提要，其中包含我在其中找到数组的长度。因为它应该产生一个。但我想要做的是，如果要添加第二个项目，则需要使用另一个布局。

所以我目前有一个字符串，其中包含 YES 的字符串值，然后将其发送到另一个活动的意图中，这被放置在一个 if 语句中，如果 x = 是，则使用 layout1，如果 x = no，则使用 layout2。

我遇到的问题是，当我在 if 语句中放入一个字符串并记录它时，它可以工作，但是当我放入 setContentView 并强制应用程序关闭时，为什么？

这是我的代码

在第一个活动中

```
HttpResponse response = client.execute(post);
BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent(), "UTF-8"));
String json = reader.readLine();

JSONObject obj = new JSONObject(json);

JSONObject objData = obj.getJSONObject("data");

JSONArray jArray = objData.getJSONArray("structure");

leagueCount = jArray.length();

if (leagueCount == 1){                   
   teamFeedStructure = "YES" ; 
}        
if (leagueCount == 2){
   teamFeedStructure = "NO" ; 
} 
```

现在发送的意图

```
Intent mainIntent = new Intent(firstActivity.this,secondActivity.class);

mainIntent.putExtra("leagueCount", teamFeedStructure);

firstActivity.this.startActivity(mainIntent);

firstActivity.this.finish(); 
```

现在在第二个活动中

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    //setContentView(R.layout.introact);

    String leagueCount = getIntent().getExtras().getString("leagueCount");

    //String leaguecount = String.valueOf(leagueCount);

    Log.v("lc", leagueCount);

    if (leagueCount == "YES"){

        String one = "one";
        setContentView(R.layout.introact);

        Log.v("lc", one);       
    }

    //if (leaguecount == "2"){

       //setContentView(R.layout.introact);
    //} 
```

错误

```
04-23 21:53:34.455: W/dalvikvm(954): threadid=1: thread exiting with uncaught exception (group=0x40015560)
04-23 21:53:34.465: E/AndroidRuntime(954): FATAL EXCEPTION: main
04-23 21:53:34.465: E/AndroidRuntime(954): java.lang.RuntimeException: Unable to start activity ComponentInfo{co.uk.fantasticmedia.TheEvoStikLeague/co.uk.fantasticmedia.TheEvoStikLeague.IntroActivity}: java.lang.NullPointerException
04-23 21:53:34.465: E/AndroidRuntime(954):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
04-23 21:53:34.465: E/AndroidRuntime(954):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
04-23 21:53:34.465: E/AndroidRuntime(954):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
04-23 21:53:34.465: E/AndroidRuntime(954):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
04-23 21:53:34.465: E/AndroidRuntime(954):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-23 21:53:34.465: E/AndroidRuntime(954):  at android.os.Looper.loop(Looper.java:130)
04-23 21:53:34.465: E/AndroidRuntime(954):  at android.app.ActivityThread.main(ActivityThread.java:3683)
04-23 21:53:34.465: E/AndroidRuntime(954):  at java.lang.reflect.Method.invokeNative(Native Method)
04-23 21:53:34.465: E/AndroidRuntime(954):  at java.lang.reflect.Method.invoke(Method.java:507)
04-23 21:53:34.465: E/AndroidRuntime(954):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-23 21:53:34.465: E/AndroidRuntime(954):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-23 21:53:34.465: E/AndroidRuntime(954):  at dalvik.system.NativeStart.main(Native Method)
04-23 21:53:34.465: E/AndroidRuntime(954): Caused by: java.lang.NullPointerException
04-23 21:53:34.465: E/AndroidRuntime(954):  at co.uk.fantasticmedia.TheEvoStikLeague.IntroActivity.onCreate(IntroActivity.java:45)
04-23 21:53:34.465: E/AndroidRuntime(954):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-23 21:53:34.465: E/AndroidRuntime(954):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
04-23 21:53:34.465: E/AndroidRuntime(954):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T20:52:13.997

您不能使用 == 比较字符串 == 将比较您需要执行的内存位置：

```
 if("1".equals(leaguecount)) 
```

[Java 程序员犯的十大错误](http://www.javacoffeebreak.com/articles/toptenerrors.html)（见第 7 条）

将您的硬编码字符串`"1"`与 equals 方法进行比较（而不是`something.equals("1")`还可以节省您必须进行空值检查\

* * *

我认为您的问题是您的发送`null`而不是实际初始化您的字符串。在你解析你的 JSON 之后，我会这样做：

这是一个重写：

```
teamFeedStructure = "NO";
if (leagueCount >= 2){
   teamFeedStructure = "YES" ; 
} 
```

然后你的其他活动

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    String leagueCount = getIntent().getStringExtra("leagueCount");
    Log.d("lc", "Received league count of:"+ leagueCount);

    if ("YES".equals(leagueCount){
        setContentView(R.layout.introact);
        Log.d("lc", "Using league count of 2 or more layout");
    }else{
        setContentView(R.layout.introact_something_else);
        Log.d("lc", "Using default layout");
    }
 } 
```