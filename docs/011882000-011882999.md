# StackOverflow 问答 11882000-11882999

# linq-to-sql - 我将如何在此 linq 语句中使用 GroupBy？

> ID：11882000
> 
> 赞同：0
> 
> 时间：2012-08-09T11:04:47.350
> 
> 标签：linq-to-sql

早上我想在这个 linq 语句中包含一个分组依据，我带回的一些记录有多个条目，所以我需要按 productAsin 对它们进行分组。所以我的表中没有重复项。

```
 var query = from a in dc.aProducts
                        join t in dc.tProducts on a.sku equals t.sku
                        join lp in dc.LowestPrices on a.asin equals lp.productAsin
                        orderby t.title
                        select new GetLowestPrices
                        {
                            productAsin = lp.productAsin,
                            sku = t.sku,
                            title = t.title,
                            tweprice = Convert.ToString(t.twePrice),
                            lowprice = Convert.ToString(lp.price),
                            amzprice = Convert.ToString(lp.tweAmzPrice),
                            lastupdated = Convert.ToDateTime(lp.priceDate)
                        };
            return query.ToList(); 
```

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T11:08:31.123

使用[GroupBy 扩展](http://msdn.microsoft.com/en-us/library/bb534501.aspx)方法：

```
 var query = from a in dc.aProducts
                            join t in dc.tProducts on a.sku equals t.sku
                            join lp in dc.LowestPrices on a.asin equals lp.productAsin
                            orderby t.title
                            select new GetLowestPrices
                            {
                                productAsin = lp.productAsin,
                                sku = t.sku,
                                title = t.title,
                                tweprice = Convert.ToString(t.twePrice),
                                lowprice = Convert.ToString(lp.price),
                                amzprice = Convert.ToString(lp.tweAmzPrice),
                                lastupdated = Convert.ToDateTime(lp.priceDate)
                            };

    var groupedData = query.GroupBy(d => d.productAsin);
                return groupedData; 
```

之后，您可以访问该组值并在它们上放置一些聚合函数，如下所示：

```
var groupedData = query.GroupBy(d => d.productAsin).Select( data => new {
productAsin = data.Key,
LowPriceSum = data.Sum(s => Convert.ToInt32(s.price))
}).ToList(); 
```

参考：
[组子句（C# 参考）](http://msdn.microsoft.com/en-us/library/bb384063.aspx)
[如何使用 LINQ GroupBy](http://www.codeproject.com/Articles/35189/How-to-Use-LINQ-GroupBy)

# actionscript-3 - AS3Eval 库抱怨“未定义变量编译”

> ID：11882008
> 
> 赞同：1
> 
> 时间：2012-08-09T11:05:08.490
> 
> 标签：actionscript-3, flash

我正在使用**FlashBuilder 4.6**并使用来自：[http ://eval.hurlant.com/ 的](http://eval.hurlant.com/)**AS3Eval v0.3 库**

该库在我的一个 Flex 4.6.0 项目中完全正常**工作****，****但**在**另一个**项目中没有（与 EvalES4.swc 库的相同库链接“合并到代码”）。

 ******在第**一个项目**中，以下代码有效：

```
private var compiler:CompiledESC = new CompiledESC;

public function compile(code: String) : ByteArray {
  return compiler.eval(code);
} 
```

在**另一个项目**中，它**失败**了： **ReferenceError: Error #1065: Variable compile is not defined。**

该错误是指 AS3Eval 库中的以下行（即 EvalES4.swc 文件）

```
var compile:Function = getDefinitionByName("ESC::compile") as Function; 
```

看起来图书馆在另一个项目中完全加载 Tamarin ESC 时遇到问题。

我已经检查了两个项目（它们使用相同的库......但仍然检查）通过成功加载 Tamarin ESC

```
 // inside CompiledESC.as
    private function loadESC():void {
        var a:Array = [
            new debug_abc as ByteArray,
            new util_abc as ByteArray,
            new bytes_tamarin_abc as ByteArray,
            new util_tamarin_abc as ByteArray,
            new lex_char_abc as ByteArray,
            new lex_scan_abc as ByteArray,
            new lex_token_abc as ByteArray,
            new ast_abc as ByteArray,
            new parse_abc as ByteArray,
            new asm_abc as ByteArray,
            new abc_abc as ByteArray,
            new emit_abc as ByteArray,
            new cogen_abc as ByteArray,
            new cogen_stmt_abc as ByteArray,
            new cogen_expr_abc as ByteArray,
            new esc_core_abc as ByteArray,
            new eval_support_abc as ByteArray,
            new esc_env_abc as ByteArray,
        ]
        ByteLoader.loadBytes(a, true);
    } 
```

这些 ByteArray 类使用 [Embed]（查看库代码）嵌入到 SWC 中，并且所有 ByteArray 在这两种情况下都通过 ByteLoader 进行初始化和加载。

到目前为止，我还没有找到任何线索，为什么编译对我的第一个项目有效，但对另一个项目无效。有没有人有类似的经历或一些提示可能导致问题？

最好的，雅库布

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:39:01.947

哈！

我太绝望了，找到了解决办法。

看来，**CompiledESC 不能在****创建**它的同一帧中使用。

* * *

所以换句话说，这样的事情是**行不通的**：

```
public function compile(code: String) : ByteArray {
    var compiler:CompiledESC = new CompiledESC();
    return compiler.eval(code);
} 
```

* * *

但是**下面的代码将起作用**（应用程序加载，初始化 CompileESC，然后用户单击 RUN! 按钮，这发生在与创建 CompileESC 的帧不同的帧中）：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600"
>
<fx:Script>
    <![CDATA[
        import com.hurlant.eval.CompiledESC;

        import mx.events.FlexEvent;

        private var compiler:CompiledESC = new CompiledESC();

        protected function button1_clickHandler(event:MouseEvent):void
        {
            compiler.eval("trace(\"hello!\")");
        }

    ]]>
</fx:Script>
<mx:Button label="RUN!" click="button1_clickHandler(event)" />
</s:Application> 
```

* * *

我不知道具体原因，但我怀疑这与 Flash 加载其字节码的方式有关。当您尝试将一些代码插入 VM 并在同一框架中使用它时，您是在自找麻烦，因为您的代码尚未加载。您必须“让出”线程并等待另一帧，在 Tamarin ESC 代码之间的某个地方被加载。

请注意，这同样适用于您通过 ByteBuffer 加载的编译代码！每当你做类似的事情

```
ByteLoader.load(compiler.eval(myAS3Code)); 
```

不要期望*myAS3Code*会立即执行。同样，只要您“让出”线程并让 VM 真正加载您的代码，代码就会被加载。

希望这对处于相同情况的人有所帮助。

最好的，雅库布

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T11:16:11.937

您应该检查权限是否与第一个项目相同。您正在合并（如果我理解正确的话）来自外部的图书馆，这是否允许？******

# windows - 禁用所有共享文件夹

> ID：11882014
> 
> 赞同：4
> 
> 时间：2012-08-09T11:05:21.017
> 
> 标签：windows, windows-xp

什么是在 Win XP 机器上禁用所有共享文件夹的 CMD 命令。

谢谢你

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-09T11:12:30.277

按此顺序传递命令

```
net share 
```

这将征用所有共享资源

```
net share DataShare /delete 
```

其中 datashare 是您要删除的选项

[http://technet.microsoft.com/en-us/library/bb490712.aspx](http://technet.microsoft.com/en-us/library/bb490712.aspx)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-01-02T11:12:54.183

（适用于 Win10）

1-以管理员身份运行cmd.exe

2-`wmic path Win32_Share delete`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-12-18T07:42:02.303

尝试以下步骤：

1.  单击开始，然后右键单击计算机，然后单击管理。

2.  在控制台树中，单击系统工具，然后单击共享文件夹，然后单击共享。

3.  在详细信息窗格中，右键单击共享文件夹，然后单击停止共享（此项目仅在您使用本地管理员组成员的帐户启动计算机管理时出现）。

4.  要停止共享多个文件，请在单击文件名的同时按住 CTRL 键，右键单击任一选定文件，然后单击停止共享。这将删除对选定文件的共享网络访问。

[https://technet.microsoft.com/en-us/library/cc753475(v=ws.11).aspx](https://technet.microsoft.com/en-us/library/cc753475(v=ws.11).aspx)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-01-28T09:53:25.193

```
wmic path Win32_Share delete 
```

（在win10上测试）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-09T11:08:32.093

不确定 cmd 命令以及是否要使其自动化。
但是，如果这是您需要做的 1 次事情，您始终可以运行 mmc.exe 并通过文件/添加删除管理单元添加共享文件夹管理单元。

在此屏幕中，您将获得所有共享的列表，您可以根据需要禁用它们。

# java - 任何人都可以在java中分享垃圾收集器算法吗

> ID：11882015
> 
> 赞同：0
> 
> 时间：2012-08-09T11:05:20.967
> 
> 标签：java, garbage-collection

假设我想开发自己的垃圾收集器，我需要采取哪些预防措施。另外请分享java中的垃圾收集算法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:17:51.630

这样做的人之一是[Tony Printezis](https://www.google.co.uk/search?q=Tony%20Printezis)，他在设计和开发 G1 收集器之前进行了多年的研究。

OpenJDK 源代码中提供了所有收集器的源代码，如果您想深入了解它们，可以阅读这些。

> 我这样做是为了锻炼

我会让你用十年的时间来解决这个问题。;)

# jquery - 如何在jquery中查找具有特定格式的字符串

> ID：11882018
> 
> 赞同：0
> 
> 时间：2012-08-09T11:05:35.837
> 
> 标签：jquery

我在我的 div 中显示了几个项目列表。我可以有这种格式的字符串数据。例如：12H-912

这里 12（前 2 位数字）代表年份的最后两个字符。（例如：2012 它将是 12）并且“H”代表月份。（对于 jan - “A”，feb - “B”.. Aug - “ H”）。“-”后面的9代表月份中的第几天。和 12（最后两个字符代表我生成的主键。这可以是任何字符，而不仅仅是两个我的意思是它可以是 2 或 1223 或 232323 ..）。

现在在 jquery 中，我想找到这种格式的字符串，并且我想将其作为超链接，并在其中调用一些函数。任何人都可以帮助找到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T11:11:57.967

您可以使用以下正则表达式来查找完全匹配

```
"12H-912".match(/^\d{2}[A-Z]\-\w+$/) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T11:35:33.890

工作数据：

```
<div>this is a div with 12H-912</div>
<table>
    <tr><td>7H-9123123</td></tr>
    <tr><td>08A-912234</td></tr>    
    <tr><td>08132A-912234</td></tr>    
</table>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

Javascript：

```
$('body').ready(function(){
    $('div').each(function(){
        var html = $(this).html();
        if (html.match(/[0-9]{2}[A-H]{1}-[0-9]+/g)) {
            $(this).html(html.replace(/([0-9]{2}[A-H]{1}-[0-9]+)/g, '"$1"')); 
        }
    });

    // easier and safer when in a td (alone)
    $('td').each(function(){
        var html = $(this).html();
        if (html.match(/^[0-9]{2}[A-H]{1}-[0-9]+$/g)) {
            $(this).html(html.replace(/([0-9]{2}[A-H]{1}-[0-9]+)/g, '"$1"'));         
        }
    });
});​​​​​ 
```

​ 输出：

```
this is a div with "12H-912"
7H-9123123
"08A-912234"
08132A-912234 
```

我会让你算出超链接。你可以在这里摆弄它：http: [//jsfiddle.net/fCJJb/](http://jsfiddle.net/fCJJb/)

# android - 我在 scrollView 中看不到复选框的文本

> ID：11882020
> 
> 赞同：1
> 
> 时间：2012-08-09T11:05:44.677
> 
> 标签：android, checkbox, scrollview

我在这个问题上被困了几个小时。

当我运行代码时，我看到了 scrollView 内的复选框，但我看不到它们的描述文本。

例如我需要这样的东西

![在此处输入图像描述](../Images/fa95537b0639178342c5063e9be9080f.png)

在我的应用程序中，我只能看到复选框，仅此而已。

我的xml文件

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#000000" >

    <ScrollView
        android:id="@+id/myScrollLayout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <LinearLayout
            android:id="@+id/linearStoScroll"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:isScrollContainer="true"
            android:orientation="vertical" >

            <CheckBox
                android:id="@+id/Sunday"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:text="@string/Sunday" />

            <CheckBox
                android:id="@+id/Monday"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:text="@string/Monday" />
            <CheckBox
                android:id="@+id/Tuesday"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:text="@string/Tuesday" />
            <CheckBox
                android:id="@+id/Wednesday"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:text="@string/Wednesday" />
            <CheckBox
                android:id="@+id/Thursday"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:text="@string/Thursday" />
            <CheckBox
                android:id="@+id/Friday"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:text="@string/Friday" />
            <CheckBox
                android:id="@+id/Saturday"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:text="@string/Saturday" />
        </LinearLayout>
    </ScrollView>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignBottom="@id/myScrollLayout">

        <Button
            android:id="@+id/ok_button_date"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:onClick=""
            android:text="OK" />

        <Button
            android:id="@+id/cancel_button_date"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
           android:layout_weight="1"
            android:onClick=""
            android:text="Cancel" />
    </LinearLayout>

</RelativeLayout> 
```

谢谢/mkounal

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T11:11:28.357

默认情况下，android 中的文本颜色为**黑色**。而且您也将布局*背景*色添加为黑色。那么它怎么可能是可见的。？

*请通过以下方式将复选框*的文本颜色更改为白色

```
android:textColor = "#FFFFFF" 
```

# mysql - MySQL不查询主键

> ID：11882022
> 
> 赞同：0
> 
> 时间：2012-08-09T11:05:50.630
> 
> 标签：mysql, primary-key

我对 MySQL 感到困惑。我正在查询一个主键字段名为`index`.

`SELECT * FROM content WHERE index = 7`

很简单吧？我不断收到语法错误`index = 7`，错误号 1064 左右（无法粘贴错误，因为它在 iPhone 模拟器上）。

该字段`index`包含一个 7。它是`PRIMARY_KEY`, 和 类型`int(6)`

数据库可以很好地查询其他字段等。

在查询此字段之前，是否需要确保设置到位？

非常感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T11:07:33.450

```
SELECT * FROM content WHERE `index` = 7 
```

`index`是 MySQL 中的保留字。你必须用反引号来逃避它。看[这里](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T13:58:00.773

另一种合适的解决方法（对于作为保留字的列标识符）是使用表名或表别名来限定列。我的偏好是始终使用表别名。在这个例子中，我们给表`content`一个别名`c`，然后我们可以在查询中引用它：

```
SELECT c.* FROM content c WHERE c.index = 7 
```

在这个例子中，列名周围不需要反引号，因为当它用表别名限定时，MySQL 将其视为标识符；保留字不能用表名限定。

使用表别名是我们在更复杂的语句中使用的一种模式，它引用多个表和/或多次引用同一个表。没有什么能阻止我们对简单的语句使用相同的模式。

并且始终允许标识符周围的反引号，即使它们是必需的：

```
SELECT `c`.* FROM `content` `c` WHERE `c`.`index` = 7 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T11:08:10.417

索引是保留字，使用

```
Select * from content 
where `index` = 7 
```

# css - 使用 -webkit-radial-gradient 进行发光

> ID：11882023
> 
> 赞同：0
> 
> 时间：2012-08-09T11:05:50.643
> 
> 标签：css, webkit

我正在尝试在自定义按钮上实现悬停发光（见下图）。我在 Chrome 中玩，无法使用 -webkit-radial-gradient 获得任何类似的外观。 ![在此处输入图像描述](../Images/6a53c682beb2c4d80dde2292ad085b23.png)

```
<html>
  <head>
    <style type="text/css">
      button {
        margin-top: 20px;
        width: 100px;
        height: 32px;
        border-style: solid;
        border-width: 1px;
        border-radius: 5px 5px 5px 5px;
        border-color:#D95D00;
        box-shadow: 0 0 4px #F3BB35 inset;
        background: -webkit-gradient(linear, left bottom, left top, from(#D95D00), to(#E6A200));
        background: -webkit-gradient(linear, left top, left bottom, from(#FFD266), to(#F28430));
        background: -webkit-gradient(linear, left bottom left top, from(#E97F2F), to(#F3BB35));
      }
      button:hover {
        background: -webkit-gradient(linear, left bottom, left top, from(#D95D00), to(#E6A200));
        background: -webkit-gradient(linear, left top, left bottom, from(#FFD266), to(#F28430));
        background-image: -webkit-radial-gradient(center, ellipse cover, #FFFFFF, #000);
      }
    </style>
  </head>
  <body>
    <button>Hello</button>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T11:25:08.523

它适用于线性渐变。径向渐变类似：[dabblet](http://dabblet.com/gist/3303362)。

你必须给你的`background-image`（渐变）一个大小（以任何单位）。然后更改以下一个或多个属性：

```
background-size: // to change the glow radius
background-position: // to change the center of the glow, pretty much analogue to linear gradient
background-color: // for partly transparent gradients 
```

# python - python中带有str的if语句的机制

> ID：11882024
> 
> 赞同：0
> 
> 时间：2012-08-09T11:05:58.550
> 
> 标签：python

我可以确定`''`总是会被考虑`False`，而其他任何事情都不会吗？

```
>>> if '':
...    print('bah')
...
>>> if 'x':
...    print('bah')
...
bah 
```

为什么或者为什么不？**Python 中的什么机制定义了这种行为？**

如果`''`被评估为`False`，为什么我会得到这个结果：

```
>>> if '' == False:
...    print('bah')
...
>>> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-09T11:08:20.217

从[文档](http://docs.python.org/library/stdtypes.html#truth-value-testing)中：

可以测试任何对象的真值，用于`if`or`while`条件或作为以下布尔运算的操作数。以下值被认为是错误的：

*   `None`

*   `False`

*   任何数字类型的零，例如 , `0`, `0L`, 。`0.0``0j`

*   任何空序列，例如`''`, `()`, `[]`.

*   任何空映射，例如`{}`.

*   用户定义类的实例，如果该类定义了一个`__nonzero__()`or`__len__()`方法，当该方法返回整数零或 bool 值时`False`。

所有其他值都被认为是真的——所以许多类型的对象总是真的。

# cakephp - 在 cakephp 中包含类文件

> ID：11882025
> 
> 赞同：0
> 
> 时间：2012-08-09T11:05:58.663
> 
> 标签：cakephp

我对 cakephp 很陌生。我必须在我的控制器中包含一个第三方类文件“class.googleHelper.php”。该文件位于 app/vendors/ 目录中。从我使用的 cakephp 教程中 -

```
App::import('Vendor', 'class.googleHelper'); 
```

但它不起作用。任何帮助都会得到帮助。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:16:14.390

您是否直接放在供应商目录中？最好创建一个像“Google”这样的子文件夹和

```
App::import('Vendor', 'googleHelper', array('file'=>array('Google/class.googleHelper.php'))); 
```

PS：这看起来像是一个写蛋糕的帮手——那为什么要把它当作一个供应商呢？

# matlab - 绘制的线（设置为特定值）在边框上以不同的粗细出现

> ID：11882026
> 
> 赞同：1
> 
> 时间：2012-08-09T11:06:02.300
> 
> 标签：matlab, plot

我想知道为什么我的简单网格图上的边界线的厚度在左上角和上角（比右下角）不同，并且它们都比内线更薄，下面的代码中我将厚度设置为相同对于所有（设置（Z，'LineWidth'，3））。我非常感谢您的评论：

PS：请注意，代码中拥挤的“Z=...”位只是为了定义线条和注视点。

```
set(gcf,'doublebuffer','on');
set(gcf,'units','normalized','outerposition',[0 0 1 1]);
set(gcf,'Color',[1 1 1]);

k=1;
rannum1(1)=0;
rannum2(1)=0;
x_min=0; x_max=600; y_min=0; y_max=600;

r=[0 600]; s=[600 600]; m= [0 0]; n= [600 0];
Z=plot([r(1) s(1)], [r(2), s(2)] , '-black', [r(1) m(1)], [r(2), m(2)] , '-black', [m(1) n(1)], [m(2), n(2)] , '-black', [s(1) n(1)], [s(2), n(2)] , '-black', [(r(1)+s(1))/2 (((r(1)+s(1)+m(1)+n(1))/4)+rannum1(k))], [(r(2)+s(2))/2 (((r(2)+s(2)+m(2)+n(2))/4)+rannum2(k))], '-black', [(((r(1)+s(1)+m(1)+n(1))/4)+rannum1(k))  (m(1)+n(1))/2], [(((r(2)+s(2)+m(2)+n(2))/4)+rannum2(k)) (m(2)+n(2))/2], '-black', [(r(1)+m(1))/2 (((r(1)+s(1)+m(1)+n(1))/4)+rannum1(k))], [(r(2)+m(2))/2 (((r(2)+s(2)+m(2)+n(2))/4)+rannum2(k))] , '-black', [(((r(1)+s(1)+m(1)+n(1))/4)+rannum1(k)) (s(1)+n(1))/2],  [(((r(2)+s(2)+m(2)+n(2))/4)+rannum2(k)) (s(2)+n(2))/2], '-black', 300, 300, 'o', 'MarkerEdgeColor','none','MarkerFaceColor','r', 'MarkerSize',12);

set(Z, 'LineWidth', 3);
axis([x_min x_max y_min y_max]);
axis square
axis off
set(gca, 'visible', 'off', 'units', 'normalized', 'position', [0.200 0.230 0.60 0.60]); 
```

非常感谢！

PS：玩弄渲染选项并没有完全帮助。

因奇

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T13:57:28.697

由于绘图限制，外框的线条较细，即尝试xmin=ymix=-5和xmax=ymax=605。这是因为线条比 1 px 粗并且以 0 或 600 为中心，因此限制会切断一些额外的像素。

# java - Youtube 视频 webview 与 android 中的其他布局重叠

> ID：11882028
> 
> 赞同：1
> 
> 时间：2012-08-09T11:06:15.263
> 
> 标签：java, android

我的应用程序中有一个 webview，它工作正常，但是当该 url 中嵌入了一个 youtube 视频时，webview 与另一个布局重叠并且该布局被覆盖。就我在这里所做的是代码：

```
web = (WebView) findViewById(R.id.webview01);
progressBar = (ProgressBar) findViewById(R.id.progressBar1);

web.getSettings().setLoadWithOverviewMode(true);
web.getSettings().setUseWideViewPort(true);
web.setWebViewClient(new myWebClient());
web.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);
web.getSettings().setPluginState(PluginState.ON);
web.getSettings().setJavaScriptEnabled(true);

web.loadUrl("http://savebigshopper.com/amazon"); 
```

这是我可以显示布局如何移位的图像：

![在此处输入图像描述](../Images/d18c8eaac3519474d6c3c2d70ef77631.png)

# javascript - html 表格在打印后错过了它们的边框颜色和背景颜色

> ID：11882032
> 
> 赞同：4
> 
> 时间：2012-08-09T11:06:23.773
> 
> 标签：javascript, asp.net, css, printing

```
<input type= "button" value="Print"  onclick="return PrintReport()" class="lbutton"/>
 <iframe frameborder="0" height="768px" width="95%" id="loader" src="" name="loader"/>
 function PrintReport()
        {
            document.getElementById('loader').contentWindow.document.execCommand('Print',false,null);
            return false;
         } 
```

包含 aspx 页面的 iframe 名称加载器（html 表格报告）

单击按钮**打印成功**，但是当我以 pdf 格式预览时。

然后**html 报告错过了它们的边框颜色和背景颜色**。

我检查了 ie 8 中的设置允许背景颜色和图像。

打印后如何获得表格边框颜色和背景颜色。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T16:23:21.043

尝试使用内联 CSS 作为边框颜色。

```
style="border: 5px solid #333" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T21:00:57.783

我无法确定您的场景，但是当我无意中“自我关闭”一个 iframe 元素时，我遇到了许多样式问题。它不是一个自闭合元素。值得一试...

代替 ：

```
 <iframe frameborder="0" height="768px" width="95%" id="loader" src="" name="loader"/> 
```

做这个：

```
 <iframe frameborder="0" height="768px" width="95%" id="loader" src="" name="loader"></iframe> 
```

# .htaccess - 重写 .htaccess 以返回 301 并重定向到父帖子

> ID：11882033
> 
> 赞同：1
> 
> 时间：2012-08-09T11:06:34.557
> 
> 标签：.htaccess, redirect, rewrite

在 Wordpress 中，由于某种原因，我有一个问题，当我发布新图片时，我会自动生成返回 404 的 URL。所以 post 可以工作文件，只有我们的系统还会添加类似 mysite.com/category/post1/IMAGE/49 这样的 URL /myimage.jpg

如何重写 mysite.com/category/post1/IMAGE/49/myimage.jpg 获取 301 并返回 mysite.com/category/post1/

我可以在 .thaccess 中说任何具有 /IMAGE 的 URL 都应该返回到父帖子，所以在上述情况下 mysite.com/category/post1/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T11:20:23.647

尝试将其放在文档根目录中的 htaccess 文件中的 wordpress 规则之上：

```
RewriteRule ^([^/]+)/([^/]+)/IMAGE/ /$1/$2/ [R=301,L] 
```

# excel - 如何将 Excel 工作表读入数据表

> ID：11882035
> 
> 赞同：1
> 
> 时间：2012-08-09T11:06:36.783
> 
> 标签：excel, datatable, ms-office, globals

我正在尝试解决我在应用程序中遇到的这个问题。

我正在为excel做一个加载项excel，我以前从未做过。

我需要做的是在 excel 中打开一个 excel 文件，然后我需要使用它`Globals.ThisAddIn.Application.ActiveWorkbook` 来访问工作簿并将 4 个工作表中的数据检索到数据表中。

与约束没有联系，我必须直接使用打开的书。
我一直在努力，但一无所获。
任何帮助或指示将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T22:32:37.433

我设法自己解决了它，这很棒。

# c++ - 数组值在 C++ 中自行更改

> ID：11882036
> 
> 赞同：0
> 
> 时间：2012-08-09T11:06:38.053
> 
> 标签：c++, arrays

在下面的程序中，我正在读取一个 6 长度的字符串 dd 并将其 ascii 代码存储在一个大小为 3x2 的整数数组 ipc 中。问题是存储在 ipc 中的值是错误的，稍后当我重新打印它们时它们会自行改变。我很惊讶这么简单的代码怎么会有这么明显的问题。（我在 Win7 x64 上使用 Code::Blocks 10.05）

```
#include<iostream>

using namespace std;

int main()
{ char dd[5];
  int ipc[2][1];
  cin.get(dd,6);
  for(int i=0;i<3;i++)
  { for(int j=0;j<2;j++)
    { ipc[i][j]=int(dd[j+2*i]);
      cout<<ipc[i][j]<<endl;
    }
  }
  cout<<"------"<<endl;
  for(int i=0;i<3;i++)
  { for(int j=0;j<2;j++)
    { cout<<ipc[i][j]<<endl; }
  }
} 
```

如果给定的输入为 123456，则输出为：

```
49
50
51
52
53
2
------
49
51
51
53
53
2 
```

任何形式的帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-09T11:08:37.257

数组声明不正确，代码超出数组范围，导致未定义的行为。声明应更改为：

```
int ipc[2][1]; 
```

至：

```
int ipc[3][2]; 
```

此外，[`cin.get()`](http://en.cppreference.com/w/cpp/io/basic_istream/get)将读取`count - 1`字符，因此：

```
cin.get(dd, 6); 
```

只会读取`5`字符，而不是`6`. 如果用户输入，`123456`只会`12345`被读取。`cin.get()`还将附加一个空字符（由tinman[评论](https://stackoverflow.com/users/583044/tinman)）。`dd`要正确增加要读取的字符的大小和数量：

```
char buf[7];
cin.get(buf, 7); 
```

# php - Xdebug 不适用于 var_dump()

> ID：11882037
> 
> 赞同：8
> 
> 时间：2012-08-09T11:06:43.047
> 
> 标签：php, xdebug, var-dump

我不知道为什么，但是 xdebug 没有突出显示 var_dump()。但是配置似乎很好。不知道为什么...有什么建议吗？

这是我的 phpinfo(); [http://pastebin.com/A45dqnWN](http://pastebin.com/A45dqnWN)

加上甚至 xdebug_var_dump() 也没有突出任何东西。它可以工作，但看起来像普通的 var_dump()。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-19T18:06:08.570

我在你的 php_info() 中找到了“xdebug.default_enable Off Off”选项。我还注意到，在 EasyPHP 的最新版本中，此选项已关闭。所以通过在 php.ini 中设置这一行来打开它：

```
xdebug.default_enable=1 
```

接下来是完全禁用 var_dump 和 HTML 输出中的其他错误的常见操作（不是您的情况，但可能对其他人有帮助）：

```
html_errors = On 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2021-01-21T07:18:04.820

对于 Xdebug 3，您需要在 php.ini 中启用开发模式：

```
xdebug.mode= develop 
```

[您还可以按照此处](https://xdebug.org/docs/all_settings#mode)的说明一次使用多种模式。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2021-05-25T15:53:38.407

正如@Shadoweb for Xdebug v3 所述，您希望`debug`允许在断点处停止，并`develop`格式化`var_dump`

因此，您可能会在 php.ini 中需要以下内容：

```
xdebug.mode=develop,debug 
```

顺便说一句，我还需要`xdebug.start_with_request=yes`替换重命名的`xdebug.xdebug.remote_enable=1`设置才能在我的 IDE 中进行步进调试。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-28T18:51:35.833

对于 php 7.0.2 和 xdebug 2.4.0

```
xdebug.default_enable=1 
```

+

```
html_errors = On 
```

仍然没有着色 xdebug_var_dump() 输出。

但这个补丁解决了我的问题。它仅适用于 xdebug.c 和 xdebug_var_dump()。我认为他们犯了一个错误，即 xdebug_var_dump 只有在需要重载函数时才有效。

```
@@ -2191,11 +2191,6 @@
    int     i, len;
    char   *val;

-   if (!XG(overload_var_dump)) {
-       XG(orig_var_dump_func)(INTERNAL_FUNCTION_PARAM_PASSTHRU);
-       return;
-   }
-
    argc = ZEND_NUM_ARGS();

 #if PHP_VERSION_ID >= 70000 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-17T09:57:14.183

在 php.ini 中关闭 xdebug.mode=debug 之类的

;xdebug.mode=调试

并重新启动 Apache。

# sql - 组合许多选择查询的结果集

> ID：11882039
> 
> 赞同：0
> 
> 时间：2012-08-09T11:06:50.937
> 
> 标签：sql, sql-server, sql-server-2005

我对四个不同的表有四个 Select 查询，每个表只提取一条记录。例如：

```
Select * from table where col1 = 'something' 
```

给出具有 3 列的一行.

第二个选择查询还给出了一条具有两列（字段）的记录。第三和第四个选择查询相同。

我想将所有四个结果集组合成一个有一行的结果集。这怎么可能？

我会为你写查询。

第一个：

```
Select Top 1 column1, column2
from table 1
where column 1 = 'something'
  and col1 = (Select max(col1) where column 1 = 'something') 
```

第二个查询：

```
Select Top 1 column1, column3
from table 2
where column 1 = 'something'
  and column3 = (Select max(column3) where column 1 = 'something') 
```

第三个查询使用从查询 2 获得的结果：

```
Select column4
from table 3
where column3 = (obtained from 2nd query)  (there is only one row) 
```

第四：

```
Select column5
from table 4
where column3 = (obtained from 2nd query) (there is only one row) 
```

这意味着我必须加入第 2、第 3、第 4 个查询，然后在第 1 个中设置结果。

我不能使用联合，因为列不同。

所以唯一的问题是加入结果集。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T12:10:11.413

您可以使用 CROSS JOIN 来完成此操作。

```
CREATE TABLE table1 (id int, column1 varchar(5), column2 varchar(15));

CREATE TABLE table2 (column3 varchar(5), column4 varchar(15));

CREATE TABLE table3 (id int, column5 varchar(5), column6 varchar(15));

INSERT INTO table1 VALUES (1, 'aaa', 'row1')
INSERT INTO table2 VALUES ('bbb', 'table2')
INSERT INTO table3 VALUES (1, 'ccc', 'table3')
INSERT INTO table1 VALUES (1, 'ddd', 'table1')

SELECT * FROM (SELECT * FROM table1) a
           CROSS JOIN (SELECT * FROM table2) b 
           CROSS JOIN (SELECT * FROM table3) c 
```

结果：

```
id    column1    column2   column3    column4    id    column5    column6
1     aaa        row1      bbb        table2     1     ccc        table3
1     ddd        table1    bbb        table2     1     ccc        table3 
```

* * *

澄清后更新：

```
CREATE TABLE table1 
(
        id int IDENTITY(1,1) 
        , searchstring nvarchar(25)
);

CREATE TABLE table2 
(
        id2 int IDENTITY(10, 10) 
        , searchstring2 nvarchar(25)
        , newsearchstring nvarchar(50)
);

CREATE TABLE table3
(
        id3 int IDENTITY(100, 100) 
        , id2 int
        , table3srow nvarchar(25)
)

INSERT INTO table1 VALUES ('something');
INSERT INTO table1 VALUES ('something else');
INSERT INTO table1 VALUES ('something'); -- ID = 3, this row will be selected by 1st query

INSERT INTO table2 VALUES ('something', 'newvalue1');
INSERT INTO table2 VALUES ('something else', 'this will not be shown');
INSERT INTO table2 VALUES ('something', 'this will be returned by query 2'); -- ID = 30, this row will be selected by 2nd  query

INSERT INTO table3 VALUES (10, 'not relevant');
INSERT INTO table3 VALUES (20, 'not relevant');
INSERT INTO table3 VALUES (30, 'This is from table 3'); -- This  row will be returned by 3rd query

SELECT * FROM 
    (SELECT TOP 1 id, searchstring FROM table1 WHERE searchstring = 'something'  and id =     (SELECT MAX(id) FROM table1 WHERE searchstring = 'something')) AS  query1,
    (SELECT TOP 1 id2, newsearchstring FROM table2 WHERE searchstring2 = 'something'  and id2 = (SELECT MAX(id2) FROM table2 WHERE searchstring2 = 'something')) AS  query2,
    (SELECT id2, table3srow FROM table3) as query3 
WHERE query3.id2 = query2.id2 
```

对 table4 使用与 table3 相同的方法。

# php - PHP Spreadsheet_Excel_Reader 始终读取日期为 1999 年 11 月 30 日

> ID：11882040
> 
> 赞同：0
> 
> 时间：2012-08-09T11:06:52.027
> 
> 标签：php, excel, spreadsheet

我正在使用 Spreadsheet_Excel_Reader 读取 PHP 中的 .xls 文件。

一切都很好，直到读取日期。如果我正在读取日期字段，它将始终返回日期为 1999 年 11 月 30 日（或此日期的变化，具体取决于格式）。我尝试设置 OutputEncoding 并给出相同的结果。我尝试转储库附带的“example.xls”，这也产生了相同的结果。

对此解决方法的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T12:58:27.033

您不需要在 excel 中格式化您的日期......如果您有日期格式，请用双引号括起来。例如“13/04/1987”格式（“DD/MM/YYYY”）；

Spreadsheet_Excel_Reader 会将其作为普通字符串读取，并带有双引号包装器。

然后在您的 PHP 中进行查询以删除双引号并将其替换为空。

```
$var = "13/04/1987";
 $removeQuote = str_replace('"','',$var); 
```

在此之后，您将不得不用连字符（-）替换所有出现的正斜杠（/）。

```
$removeSlashes = str_replace('/','-',$removeQuote); 
```

然后使用 PHP 中的 date 函数将其格式化为适合您的格式。

```
$format = date('Y-m-d', strtotime($removeSlashes));
echo $format; 
```

你已经完成了......完整的代码如下。

```
$var = "13/04/1987";
echo date('Y-m-d',strtotime(str_replace('/','-',str_replace('"','',$var)))); 
```

# jquery - jQuery 按键事件

> ID：11882041
> 
> 赞同：1
> 
> 时间：2012-08-09T11:07:05.807
> 
> 标签：jquery, html, css

我正在处理两个文本框 - 使用 jQuery 我希望每次用户更新第一个框中的值时，相同的值将出现在第二个框中。

```
​&lt;input type="text" class="pack"/ >
​&lt;input type="text" class="pack2"/>​​​​​​​​​​​​​​​​​​​​​​​​

​$(".pack").keypress(function(){
    $(".pack2").val($(this).val());
});​​​​​ 
```

问题是，如果我在 "pack" 中输入一个字母，它不会立即出现在 "pack2" 中——我必须输入另一个字母，然后第一个字母会出现在 pack2 中

你可以检查小提琴 - [http://jsfiddle.net/itamarperetz/jGXyA/](http://jsfiddle.net/itamarperetz/jGXyA/)

我有什么办法让 pack2 马上更新？

任何建议都会有所帮助，在此先感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T11:09:22.273

尝试将`keypress`事件更改为`keyup`.

```
​$(".pack").keyup(function() {
    $(".pack2").val($(this).val());
});​​​​​ 
```

## [jsFiddle 演示](http://jsfiddle.net/jGXyA/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T11:09:34.240

这是因为`keypress`在字符实际添加到输入字段之前触发。尝试使用`keyup`，它在字符添加到输入字段后触发。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T11:10:20.550

**看看这个[工作答案](http://jsfiddle.net/jGXyA/2/)。**

您应该使用`keyup`而不是`keypress`.

[在这里](http://api.jquery.com/keyup/)查看 API 。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T11:10:30.713

使用 keyup 事件

```
$(".pack").keyup(function(){
    $(".pack2").val($(".pack").val());
});​ 
```

# wpf - WINRT 文本框数字格式不尊重当前文化

> ID：11882042
> 
> 赞同：0
> 
> 时间：2012-08-09T11:07:07.307
> 
> 标签：wpf, microsoft-metro, windows-runtime, cultureinfo

我将浮动属性绑定到我的 TextBox 控件。如果我使用“en”作为我的语言首选项，那是正确的。输入数字“1.123”被正确解析。

如果我将 mur 文化切换为“de”，则 TextBox（和 TextBlocks）中没有任何变化。仍然所有内容都用“。”格式化。

通过 WinRT 的“数字”键盘输入数字是使用“，”作为分隔符。但是在 Focus 丢失后，Training Digits 将不会成为数字的一部分（并且绑定属性已更新。因此“1,234”应在内部解析为“1.234”。但它转换为“1”。

app.xaml.cs 包含更多初始化，以确保将文化设置为正确的语言。允许的语言是 ("en" 和 "de" (*,proj 文件。如果您闯入调试器，CultureInfo.CurrentCulture 会正确设置为 "de"。

```
public App()
{
    Windows.Globalization.ApplicationLanguages.PrimaryLanguageOverride =     CultureInfo.CurrentCulture.Name;
    CultureInfo.DefaultThreadCurrentCulture = CultureInfo.CurrentCulture;
    CultureInfo.DefaultThreadCurrentUICulture = CultureInfo.CurrentCulture; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T13:54:54.170

在构造函数中设置`PrimaryLanguageOverride`、`DefaultThreadCurrentCulture`和没有效果，因为它们只适用于新线程。但是，您的主 UI 线程已经创建，并且在输入构造函数时设置了其文化。`DefaultThreadCurrentUICulture``Application`

要强制更改现有 UI 线程，您必须`Thread.CurrentCulture`按照[CultureInfo.CurrentCulture](http://msdn.microsoft.com/en-us/library/windows/apps/system.globalization.cultureinfo.currentculture%28v=vs.110%29.aspx)中的说明进行设置；但是，WinRT 不支持`Thread`该类。

这就引出了一个问题，为什么需要任何手动的文化改变。应用程序应在启动时或从休眠状态恢复时自动获取用户的 Windows 文化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T06:35:03.610

要获得我们可以使用的 InvariantCulture 设置，

“ApplicationLanguages.PrimaryLanguageOverride = CultureInfo.InvariantCulture.TwoLetterISOLanguageName；”

这对我有用。

# fedora - getaddrinfo：启动名称解析中的临时失败打开指定端点“启动”服务器时出错，代码1退出

> ID：11882044
> 
> 赞同：0
> 
> 时间：2012-08-09T11:07:15.103
> 
> 标签：fedora, net-snmp, snmpd

启动 snmpd 时，我在 /var/snmpd.log 中收到此错误

**

**> * *getaddrinfo: start 名称解析中的临时故障 打开指定端点“start”服务器时出错，代码 1 退出****

** 使用 Fedora-14 和 net-snmp-5.7.1 供您参考。

在此先感谢..帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T11:27:44.323

```
Error opening specified endpoint "start" Server Exiting with code 1 
```

表示某个进程正在使用`port 161`.

例如 try `netstat -anp | grep 161`，然后停止该过程并重新开始`snmpd`。

# maven - 使用 maven 创建通用输出 zip 文件

> ID：11882058
> 
> 赞同：2
> 
> 时间：2012-08-09T11:08:19.770
> 
> 标签：maven, maven-2, maven-plugin, maven-assembly-plugin

我有 3 个模块链接到与此类似的父项目。

```
root (pom.xml)
   +--- mod1 (pom.xml)
   +--- mod2 (pom.xml)
   +--- mod3 (pom.xml) 
```

我在 mod1 的 config 文件夹中有一些配置文件。我在 mod2 的 config 文件夹中有其他配置文件。我想将所有这些配置文件放在输出 zip 文件中的一个公共文件夹中。

这可能吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T11:23:27.193

对的，这是可能的。您必须将[maven-assembly-plugin](http://maven.apache.org/plugins/maven-assembly-plugin/single-mojo.html)执行添加到构建过程中的最后一个模块（我假设在您的情况下它是 mod3）并添加程序集描述符，有点像这样：

```
<assembly>
  <formats>
    <format>zip</format>
  </formats>
  <fileSets>
    <fileSet>
        <directory>../mod1/config</directory>
        <outputDirectory>config</outputDirectory>
    </fileSet>
    <fileSet>
        <directory>../mod2/config</directory>
        <outputDirectory>config</outputDirectory>
    </fileSet>
  </fileSets>
</assembly> 
```

# wpf - XAML TextBlock 和运行绑定

> ID：11882066
> 
> 赞同：23
> 
> 时间：2012-08-09T11:08:35.643
> 
> 标签：wpf, xaml

我遇到了 Run 绑定不起作用的问题。这是我当前的代码。

```
<TextBlock
  x:Name="txtCompanyName"
  Text="{Binding Path=SelectedItem.CompanyName, ElementName=lbSourceList}"
  Foreground="White"
  FontSize="18.667"
  Height="33.667" 
  Margin="10,-0.5,0,-1.5">
  <Run Text=" : " Foreground="White"/>
  <Run Text=" "/>
  <Run Text=" " Foreground="White"/>
  <Run Text=" "/>
  <Run Text="{Binding Path=SelectedItem.RFQID, ElementName=lbSourceList}" />
</TextBlock> 
```

我得到公司名称出现，但额外的数据从未出现。任何想法为什么这种类型的绑定失败？

* * *

**替代答案和最终答案**

```
<TextBlock TextWrapping="Wrap" 
           Text="{Binding RFQID}" 
            FontWeight="Bold" 
            Foreground="#FFFFF504" 
            HorizontalAlignment="Left" Width="185"> 
            <Run Text=" ~ "/> 
            <Run Text="{Binding RFQNo}" FontWeight="Bold" Foreground="#FFFFF504"/> 
            <Run Text=" ~ "/> 
            <Run Text="{Binding Status}" FontWeight="Bold" 
                                         Foreground="#FF85F35F"/>
 </TextBlock> 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-09T11:23:10.373

您不能同时使用`Inlines`（`Run`子节点）和`TextBlock.Text`。

# javascript - 从扩展的 javascript 中获取 firefox 浏览器窗口句柄

> ID：11882070
> 
> 赞同：0
> 
> 时间：2012-08-09T11:08:47.040
> 
> 标签：javascript, firefox, browser, firefox-addon

我正在编写一个需要获取浏览器窗口句柄的扩展。该扩展将窗口句柄传递给本机 c++ 模块。

如何从扩展的 javascript 中获取浏览器窗口句柄？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T11:11:34.370

希望这可能会有所帮助:)

[https://developer.mozilla.org/en-US/docs/Code_snippets/Finding_Window_Handles](https://developer.mozilla.org/en-US/docs/Code_snippets/Finding_Window_Handles)

也许这个

[http://forums.mozillazine.org/viewtopic.php?f=19&t=2449775](http://forums.mozillazine.org/viewtopic.php?f=19&t=2449775)

问候，

# sql-server-2008 - 在sql中合并两个表

> ID：11882072
> 
> 赞同：0
> 
> 时间：2012-08-09T11:08:56.283
> 
> 标签：sql-server-2008

通过使用 Sql server 2008，我可以返回两个表结果，例如

```
College    Department   Course    Section   Passed

  X           CS         B.Sc        A        30
  X           CS         B.Sc        B        12 
```

和第二个结果

```
College    Department   Course    Section   Failed

  X           CS         B.Sc        A        23
  X           CS         B.Sc        B        42 
```

在这里，我加入了一个比第一个表多的表，如果我使用相同的查询来获取通过和失败的计数，计数会出错，这就是使用两个不同的查询。

我正在尝试将这两个表结合起来，以获得类似的结果

```
College    Department   Course    Section   Passed   Failed

  X           CS         B.Sc        A        30       23
  X           CS         B.Sc        B        12       42 
```

但我不知道如何做到这一点，任何人都可以在这里帮助我，在此先感谢。

注意：这里在两个查询中加入了大约 3 到 5 个表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T11:12:40.813

```
select a.*b.failed
from ([first result query]) a
INNER JOIN ([second result query]) b on a.college=b.college and a.Department=b.Department and a.Course=b.course and a.Section=b.Section 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T11:12:51.743

用**例**声明

```
select College,    Department ,  Course  ,  Section ,
       sum(case when <pass condition> then 1 else 0) as Passed  ,
       sum(case when <fail condition> then 1 else 0) as Failed
from <table1>
join <table2>
on (condition)
group by College,    Department ,  Course  ,  Section 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-15T18:35:39.853

您可以对所需的输出使用内部连接。

例如，

```
Select emp.name,emp.salary,Q.qualification from employee emp inner join qualification  Q.empid=emp.empid 
```

详情参考

[https://www.w3schools.com/sql/sql_join_inner.asp/](https://www.w3schools.com/sql/sql_join_inner.asp/)

[https://avtartime.com/sql-inner-join-with-examples/](https://avtartime.com/sql-inner-join-with-examples/)

# php - 触发“onchange”事件时如何调用PHP函数？

> ID：11882076
> 
> 赞同：0
> 
> 时间：2012-08-09T11:09:00.277
> 
> 标签：php, mysql, ajax

我使用 MySQL 数据填充了三个相同的下拉列表。如果其中一个更改索引（触发 onchange），我希望其他两个重新填充，以便它们排除已使用另一个下拉列表选择的项目。

在 ASP.NET 中，我只需在后面的代码中调用一个函数（传递所选项目的值）来重新填充另外两个。

我一直在闲逛一段时间，但我无法用 PHP 完成它。PHP 是否允许从此事件调用函数？我也尝试过使用 AJAX，但没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:14:06.743

OnChange() 是一个 js 函数，为了使用它来调用 php 函数，您必须使用 AJAX。使用 ajax，您将能够获取 php 的代码返回值，将其显示在页面中，或者进行任何您想要的操作。

祝你好运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T11:15:08.287

您不能（直接）从客户端调用服务器端函数。

您可以向运行调用该函数的服务器端脚本的 URL 发出 HTTP 请求。

ASP.NET 有（我相信，我从来没有使用过）一些东西，它们会设置一个 URL 并生成一些 JavaScript 来为你调用那个 URL。

PHP 核心中没有任何东西可以做到这一点。

一个非常粗略、快速和肮脏的大纲（没有试图成为 RESTful）关于你如何去做这样的事情是：

```
 callFunction.php:
 <?php
     include("myFunctions.php");
     if ($_GET['call'] == "functionA") {
         functionA();
     }
 ?> 
```

然后你的 JS 会向`callFunction.php?call=functionA`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T11:13:31.530

更改下拉列表时，ASP.NET 会执行回发，尽管您不必显式编写它。

如果您想在 PHP 中往返于服务器，则必须实现相同的逻辑（例如，在`onchange`事件中使用 JavaScript 发布表单）。

这也是使用 AJAX 的好情况，但是您没有提供任何有关您尝试过的内容或出错的细节，因此很难提供进一步的帮助。

# magento - Magento 多个商店视图 - 语言切换问题

> ID：11882077
> 
> 赞同：0
> 
> 时间：2012-08-09T11:09:02.220
> 
> 标签：magento, magento-1.4

我已经使用 magento 1.3.2.4 版设置了一个多语言站点，并且遇到了一些奇怪的问题。希望能得到一些帮助。

要求是添加新的商店视图（荷兰语）并维护当前的商店 url 结构，所以我不能在管理配置中使用“将商店代码添加到 url”，因为它会将当前 url 附加到默认商店代码（fr ）。所以，最终我需要以下 url 结构：

默认语言 (fr) url 样式： http: [//www.domainname.com](http://www.domainname.com) 荷兰语版本 url 样式： http: [//www.domainname.com/nl](http://www.domainname.com/nl)

为此，我执行了以下步骤：

1.  我创建了一个商店视图（代码 nl）
2.  我创建了一个名为 nl 的文件夹

    *   我从主 Web 根目录复制了 .htaccess 和 index.php 并将其粘贴到此文件夹中
    *   我在 index.php 中修改了如下代码：

    Mage::app()->getLocale()->setLocale('nl_NL');

    $mageRunCode = '荷兰';

    $mageRunType = '商店';

    法师::app()->setCurrentStore(1); // 1 是 nl store id

    法师::run($mageRunCode, $mageRunType);

当我启动该站点并转到[http://www.domainname.com/nl](http://www.domainname.com/nl)时，界面按预期使用荷兰语，但是当我执行以下任务时，我被重定向

回到默认语言：

1.  登录
2.  转到结帐/购物车
3.  转到新用户注册

在检查 DOM 的视图源时，我注意到一些 url 指向默认语言而不是 nl 语言。例如登录表单的操作属性是[http://www.domain.com/customer/account/loginPost/](http://www.domain.com/customer/account/loginPost/)而不是[http://www.domain.com/nl/customer/account/loginPost/](http://www.domain.com/nl/customer/account/loginPost/)

温暖的问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T10:51:12.843

嗨，而不是创建这样的东西。你可以使用这个[扩展](http://www.magentocommerce.com/magento-connect/googletranslate.html)。希望这对您有所帮助，您无需创建商店视图即可轻松切换语言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-01T00:56:47.993

我遇到了同样的问题，不能两次使用相同的商店代码，当我尝试新代码时，它想要链接到翻译包！

# three.js - 如何在three.js中创建平面中的透明孔

> ID：11882079
> 
> 赞同：1
> 
> 时间：2012-08-09T11:09:10.153
> 
> 标签：three.js

在 Three.js 中，如何在平面内创建透明孔，以便只有孔下方的对象可见。像画布的 clearRect 之类的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T22:26:20.867

我正在用 Blender 和 PSP 做这个。所以我的情况如下：

1.  在 PS 或 PSP 中创建带有孔的透明图像。
2.  打开 Blender 并创建你的飞机。使用您刚刚在其上创建的透明纹理。
3.  将 Blender 场景导出到 collada 文件中。
4.  使用示例 .html-s 来显示 collada 文件。

这是我的工作解决方案。如果你愿意，我可以给你工作代码。

或者，如果您不熟悉 Blender 和这个 collada 相关的东西，那么您应该使用他们使用透明图像的示例文件（例如：webgl_particles_billboards.html）。看看“textures/sprites/disc.png”它也是一个透明的图像。您可以将其替换为带有孔的透明图像。

# php - 如何为我的网站集成 Realex Payment 的 3D 安全流程？

> ID：11882085
> 
> 赞同：0
> 
> 时间：2012-08-09T11:09:22.370
> 
> 标签：php, codeigniter, payment-gateway, payment-processing, realex-payments-api

为了在我的网站中集成 Realex Payment（3D 安全），我使用了以下代码，这些代码是从一个示例中获得的。

为了为我们的客户付款，我可以**在 xml 文件中请求**带有商家 ID、订单 ID、持卡人姓名、到期日期、卡号、金额等：

```
<request type='auth' timestamp='123123123123'>
<merchantid>name of merchant</merchantid>
<account>internet</account>
<orderid>  order id </orderid>
<amount currency='GBP'>20</amount>
<card>
<number>1234567894561235</number>
<expdate>0912</expdate>
<type>Visa</type>
<chname>card holder name</chname>
</card>
<autosettle flag='1'/>
<md5hash>1bb4baxse4534g541sdw233c4ac20ba</md5hash>
<tssinfo>
<address type='billing'>
<country> country code </country>
</address>
</tssinfo>
</request> 
```

**在回复**中，我得到了这个：

```
<response timestamp="20120808063848">
<merchantid>Name Of Merchant</merchantid>
<account>internet</account>
<orderid>orderid</orderid>
<authcode>something</authcode>
<result>00</result>
<cvnresult>U</cvnresult>
<avspostcoderesponse>U</avspostcoderesponse>
<avsaddressresponse>U</avsaddressresponse>
<batchid> batchid </batchid>
<message>[ test system ] Authorised 111111 </message>
<pasref>14digit number</pasref>
<timetaken>1</timetaken>
<authtimetaken>1</authtimetaken>

<cardissuer>
<bank> name of bank </bank>
<country> country name </country>
<countrycode> country code </countrycode>
<region>EUR</region>
</cardissuer>

<md5hash>3656d456Hfgfdac45dsf453d96a08d7d9</md5hash>
</response> 
```

更进一步，我们需要添加**3D 安全流程进行验证**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T01:01:30.643

利用：

```
request type='3ds-verifyenrolled' 
```

代替：

```
request type='auth' 
```

# php - 如何使用 htaccess 更改 url

> ID：11882086
> 
> 赞同：-2
> 
> 时间：2012-08-09T11:09:22.937
> 
> 标签：php, wordpress, .htaccess

我想显示网址

[http://www.example.com/blog/feedback](http://www.example.com/blog/feedback) 为

[http://www.example.com/feedback](http://www.example.com/feedback)

如何使用 .htaccess 来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T11:15:10.020

您将需要[mod_rewrite](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)来执行此操作。

```
<IfModule mod_rewrite.c>
  RewriteEngine on
  RewriteRule ^/feedback$ /blog/feedback
</IfModule> 
```

[在这里](http://www.sitepoint.com/guide-url-rewriting/)查看有关 mod_rewrite 的教程信息。

**编辑**：

如果您尝试将 JUST 移动`/blog/feedback`到，`/feedback`那么您必须首先将您的基础从 移动`/app/webroot/blog/`到`/app/webroot/`，编辑您的所有规则以解决它，然后添加您的新规则。可以这样做：

```
<IfModule mod_rewrite.c> 
  RewriteEngine On
  RewriteBase /app/webroot/

  RewriteRule ^/blog/index\.php$ - [L]
  RewriteRule ^/blog/feedback$ /feedback [L]

  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule /blog /app/webroot/blog/index.php [L] 
</IfModule> 
```

注意：这应该可行，但我现在不在我的工作站，所以我无法检查它:(如果出现任何问题，它可能是某个地方的错字 - 让我知道。

# c# - 使用反射添加实体

> ID：11882087
> 
> 赞同：0
> 
> 时间：2012-08-09T11:09:23.913
> 
> 标签：c#, entity-framework-4

我想要实现的是在父实体上使用 add-method 来添加该实体类型的所有子实体的通用方法。必须这样做以将实体对象“链接”在一起，以便实体框架可以使用数据库键（它们都是身份列）来发挥其“魔力”。

这是我今天使用的那种代码：

```
EntityObject ParentEntityObject;
EntityObject ChildEntityObject;
((Application)ParentEntityObject).MessageLists.Add((MessageList)ChildEntityObject); 
```

我的程序中有“Application”和“MessageList”作为字符串。因此，我想做两件事：

1.  将 GetType 与字符串一起使用，以便可以动态转换 ParentEntityObject 和 ChildEntityObject。
2.  使用某种反射魔法来获取“MessageLists.Add”函数。再次; 假设我将“MessageLists”作为字符串。

我不确定如何做到这一点。任何意见是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T08:32:47.320

您可以尝试表达式树来做“神奇”的事情。例如：

```
class BaseEntity
{

}
class MessageList : BaseEntity
{

}
class Application:BaseEntity
{
    public List<BaseEntity> MessageLists { get; set; }
    public Application()
    {
        MessageLists = new List<BaseEntity>();
    }
}
class ExpressionHelper
{
    public static Action<object,object> GetMethod(string targetTypename,string targetMemberName,string sourceTypeName)
    {
        ParameterExpression targetExpression = Expression.Parameter(typeof(object));
        MemberExpression propertyExpression = Expression.PropertyOrField(Expression.TypeAs(targetExpression, Type.GetType(targetTypename)), targetMemberName);
        ParameterExpression sourceExpression = Expression.Parameter(typeof(object));
        Expression callExpression = Expression.Call(propertyExpression, "Add", null, Expression.TypeAs(sourceExpression, Type.GetType(sourceTypeName)));

        var lambda = Expression.Lambda<Action<object, object>>(callExpression, targetExpression, sourceExpression);
        var method = lambda.Compile();
        return method;
    }
} 
```

用法：

```
 var app = new Application();
    var messageList = new MessageList();
    var magicMethod = ExpressionHelper.GetMethod(/*type*/"Application",/*name of Property-Storage*/"MessageLists",/*type of element to store*/"MessageList");
    magicMethod(app, messageList);
    //now app.MessageLists has one element 
```

# actionscript-3 - 如何用 [ ] 解决这个算法（数组表示法）

> ID：11882090
> 
> 赞同：-1
> 
> 时间：2012-08-09T11:09:33.880
> 
> 标签：actionscript-3

在下面的代码中 ab 的值是多少？（它既不是未定义的，也不是空的，也不是空字符串）

```
var a = {} ;

a.b = [] ; 

//////////////////////a.b["hello"]="hello"; //comment, uncomment for testing it
trace( a.b )  // output is invisible, something like blank string
trace( (a.b).length ); // 0 , this could be used but the index is string ie. "hello" 

trace(a.b == undefined ) ; // false
trace(a.b == null) ; // false 
```

伪代码：

```
if ( a.b is not having any type of content inside )
{
     //How to get inside this part, when a.b is not having any value 
    // do this 
}
else
{
   //do this 
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:15:29.167

它是数组。

```
a.b = [] ; 
a.b = new Array(); //is similar 
```

你可以这样写：

```
a.b["hello"] = 1; 
```

因为 Array 是动态类。您只需创建字段*hello*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T11:47:27.783

如前所述，您刚刚在对象中创建了一个数组。数组应该用于存储索引基值而不是字符串之一，即：

`var a:Array=[]; a[0]=XXX, a[1]=YYYY;`

如果要存储字符串键，则应使用对象：

`var a:Object={}; a["foo"]=XXX, a["hello"]=YYYY;`

当您使用 Array 时，length 属性将仅反映您放入其中的所有索引基值，如果您添加了 String 基属性，它将不会被考虑在内。您可以做的是枚举 Array 的键并在至少有一个时中断：

```
var isEmpty:Boolean=true;
for (var s:String in a.b) { // enumerate keys that are into a.b
 isEmpty=false;
 break; // there is at least one key so exit the loop
} 

if (isEmpty) {
     //How to get inside this part, when a.b is not having any value 
    // do this 
} else {
   //do this 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T11:42:14.513

你可以这样做： `if(a.b == null || a.b == undefined || (a.b).length == 0)`

我不完全理解您要做什么，但是如果 ab 为空，那不会让您知道吗？

# r - 在R中的ff向量中将NA更改为零

> ID：11882091
> 
> 赞同：1
> 
> 时间：2012-08-09T11:09:41.590
> 
> 标签：r, na

我坚持使用 ff 包。这是一个数据样本。

```
 col1                col2
90                            
91 21-02-2012 00:00:00 27-02-2009 00:00:00
92 21-02-2012 00:00:00 17-02-2010 00:00:00
93 21-02-2012 00:00:00   
94 21-02-2012 00:00:00                    
95 21-02-2012 00:00:00 
```

计划是将这些日期转换为数字，然后找到日期之间的天数。我坚持的是，当我足够自然地将日期转换为数字时，我得到了一些 NA，这是可以的。我想做的是将 NA 转换为整数 0。这是我尝试过的代码：

```
tfd<-as.ffdf(tfd) #just to get a sample from my data frame
dats<-as.ff(as.numeric(as.Date(tfd[,1],"%d-%m-%Y")))
dats[is.na(dats)]<-0 
```

我得到错误：

```
Error in `[<-.ffdf`(`*tmp*`, is.na(dats), value = 0) : 
  value must be ffdf if only one index used 
```

我已经尝试过 na.count 功能，但我没有运气。我检查了`ffbase`和`ff`pdf，什么也没有。我通过网络很好地查看了所有内容，但对`ff`矢量没有任何帮助。

如果有人有任何建议，那就太好了。干杯，洛肯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:51:19.350

扩展上面的例子

```
# turn data.frame into ffdf
> F <- as.ffdf(Z)

# extract a complete column to RAM
> F[,1]
 [1] "2012-08-02" NA           "2012-08-10" "2012-08-18" "2012-08-01" NA           "2012-08-19" "2012-08-12"
 [9] "2012-08-11" NA

# assign zero to the NAs
> F[is.na(F[,1]),1] <- 0

# check the results
> F[,1]
 [1] "2012-08-02" "1970-01-01" "2012-08-10" "2012-08-18" "2012-08-01" "1970-01-01" "2012-08-19" "2012-08-12"
 [9] "2012-08-11" "1970-01-01"

# you tried to call is.na() directly on an ff object
> is.na(F[[1]])
logical(0)

# compare to 
> is.na(F[,1])
 [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE

# note that all this assumes that the complete column fits into RAM
# if not you need chunking, see ?chunk

> version
               _                            
platform       x86_64-w64-mingw32           
arch           x86_64                       
os             mingw32                      
system         x86_64, mingw32              
status                                      
major          2                            
minor          15.2                         
year           2012                         
month          10                           
day            26                           
svn rev        61015                        
language       R                            
version.string R version 2.15.2 (2012-10-26)
nickname       Trick or Treat 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T11:32:32.883

再次为帮助干杯，你的一切都好。一位同事给了我一个建议，关于在 R 中使用 ifelse 函数来用整数填充之前的空白。我无法用默认日期填充空白，比如说“2006-01-01”，但使用整数效果很好。这是代码：

```
ffdf1$dates1<-as.ff(ifelse(ffdf1[,3]=="",16000,as.numeric(as.Date(ffdf1[,3],"%d-%m-%Y"))))<br> 
```

ffdf1 是我使用的 ff 数据框。我决定使用 16,000 而不是 0。ffdf[,3] 是包含日期的列。此代码适用于我在原始问题示例中给出的日期。如果这个问题让人们感到困惑，希望这会有所帮助和抱歉，
干杯，
Lorcan

# java - 获取 ArrayList 值？

> ID：11882094
> 
> 赞同：0
> 
> 时间：2012-08-09T11:09:46.127
> 
> 标签：java

在下面的代码中

`queryCmisAdvance.getAdvanceKeywords()`返回类 AdvancePropertyKeywords 的 ArrayList

在类 AdvancePropertyKeywords

有三个参数`String Property Name , condition and value.`

有时值可能是“”（这不是空的）

**现在我想检索值不是 "" 的 propertyName 。**

我的代码

```
 for(AdvancePropertyKeywords apk : queryCmisAdvance.getAdvanceKeywords()){

                if (apk.getValue()!="" ) {
                    System.out.println(apk.getPropertyName() +" " +apk.getCondition() + " "+apk.getValue());
                }
            } 
```

**输出**

```
From =   

SentOn > Wed Aug 22 12:00:00 UTC+2 2012 

EmailSubject LIKE folder 

DocumentTitle NULL rgftre  

CarbonCopy LIKE 
```

* * *

```
From value is "" 

SentOn value is Wed Aug 22 12:00:00 UTC+2 2012

EmailSubject value is folder 

DocumentTitle value is rgftre 

CarbonCopy value is "" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:21:55.720

使用`equals()`方法而不是`!=`运算符。`equals()`方法比较对象内容，而`==`运算`!=`符比较`object reference values`. `Object Comparision`请参阅以下代码：

```
for(AdvancePropertyKeywords apk : queryCmisAdvance.getAdvanceKeywords()){
     if (!"".equals(apk.getValue()) {
         System.out.println(apk.getPropertyName() +" " +apk.getCondition() + " "+apk.getValue());
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T12:27:32.490

@DanGravell：谢谢，这行得通。

```
if (!(apk.getValue().equals(""))) {
                System.out.println(apk.getPropertyName() +" " +apk.getCondition() + " "+apk.getValue());
} 
```

# sql - 仅当 MS Access 2003 中的某个客户时才求和

> ID：11882099
> 
> 赞同：0
> 
> 时间：2012-08-09T11:10:00.217
> 
> 标签：sql, ms-access, if-statement

我想使用 case 语句（MS Access 无法识别），但这是我所拥有的：

```
Sum(if [Time Report].Cust_id=2
                          then ([Time Report].[Hrs P1]) 
                          ELSE 0 END IF) AS [SumOfHrs P1],  
Sum(if [Time Report].Cust_id=2
                          then ([Time Report].[Hrs P2]) 
                          ELSE 0 END IF) AS [SumOfHrs P2], 
Sum(if ([Time Report].Cust_id=2 )
                          then ([Time Report].[Hrs P3]) 
                          ELSE 0 END IF) AS [SumOfHrs P3], 
```

*等等*
。我想要的是一个新表，其中只有 cust_id = 2 的“Pn”摘要使用这种布局

```
Name    P1    P2    .....
Bob     0.23  0.45 
```

但是我收到错误消息`Syntax error (missing operator) in query expression 'query'`，然后它突出显示了`THEN`我的查询部分。

出了什么问题？

Ps：不幸的是，除了access 2003之外的任何东西都无法编写sql。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:17:14.160

我想你想要：

```
Sum(iif ([Time Report].Cust_id=2,[Time Report].[Hrs P1],0)) AS [SumOfHrs P1],  
Sum(iif ([Time Report].Cust_id=2,[Time Report].[Hrs P2],0)) AS [SumOfHrs P2], 
Sum(iif ([Time Report].Cust_id=2,[Time Report].[Hrs P3],0)) AS [SumOfHrs P3], 
```

请参阅[http://office.microsoft.com/en-us/access-help/iif-function-HA001228853.aspx](http://office.microsoft.com/en-us/access-help/iif-function-HA001228853.aspx)

# content-management-system - umbraco - 永久重定向网址

> ID：11882100
> 
> 赞同：1
> 
> 时间：2012-08-09T11:10:00.947
> 
> 标签：content-management-system, umbraco

我在 umbraco CMS 上有一个网站，我想重定向一些 url（不多，大约 10-15 个）。例如：现在我有 2 个 URL->

1）xyz.com/home-index.aspx（旧）

2) xyz.com/index.aspx（新）

我想做的是，home-index.aspx 将永久重定向到 index.aspx，也适用于 google（现在这 2 个链接在我的网站上有效，但 googlebot 仅索引其中一个 - “home-index.aspx”。我想要在谷歌搜索结果上只有“index.aspx”，没有“home-index.aspx”），我想要，如果用户继续使用“home-index.aspx”，他将被重定向到“index.aspx”。 aspx”（谷歌机器人也是）。正如我之前所说，现在示例中的这 2 个链接显示了相同的内容。我怎样才能做到这一点？

问候！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T17:08:00.997

我建议使用[301 Url Tracker](http://our.umbraco.org/projects/developer-tools/301-url-tracker/)包。该软件包允许您向跟踪器添加条目，当用户尝试访问“旧”网址时，他们将通过 301（永久重定向）重定向到您选择的节点。请记住，当搜索引擎（例如 Google）抓取页面并获得 301 时，它们会将索引中的 url 替换为 301 响应中返回的 url。

# java - 在 Android 中向日历添加一天在 31 日失败

> ID：11882102
> 
> 赞同：20
> 
> 时间：2012-08-09T11:10:05.673
> 
> 标签：java, android, calendar

假设当前日期是 5 月 28 日。如果我按顺序调用以下命令，输出变为

```
cal.add(Calendar.DATE, 1);  // Day = 29
cal.add(Calendar.DATE, 1);  // Day = 30
cal.add(Calendar.DATE, 1);  // Day = 31
cal.add(Calendar.DATE, 1);  // Day = 31
cal.add(Calendar.DATE, -1); // Day = 29 
```

为什么这不跳到下个月？为什么它停留在第 31 位（但是当你减一时它会跳到 29）？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-12-30T13:15:53.073

我的朋友，您可以通过两种简单的方式轻松做到这一点。第一个是：

```
Calendar cal = Calendar.getInstance();
cal.add(Calendar.DAY_OF_MONTH, 1); 
```

第二个是：

```
Calendar cal = Calendar.getInstance(); 
cal.add(Calendar.HOUR_OF_DAY, 24); 
```

我想你会想找到这个东西。谢谢。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-08-09T11:16:58.410

当您向该`Calendar.DATE`字段添加 1 时，它也应该在达到月底时增加月份（5 月的情况下为 31），这样您编写的内容就没有意义了。调试它并确保日期值确实是您认为的值

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-05-18T05:33:44.890

这也应该可以解决问题。

```
Calendar cal = Calendar.getInstance();
cal.add(Calendar.DAY_OF_YEAR, 1); 
```

您可以测试它是否适用：

```
for (int i = 0; i < 365; i++) {
    cal.add(Calendar.DAY_OF_YEAR, 1);
    System.out.println(cal.getTime().toString());
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-09T11:18:11.223

**看来我错了！根据 api，roll 只更新特定字段！**

如果您将天数添加到日历中，请尝试

```
cal.roll(Calendar.DATE, 1); 
```

这将在溢出时增加月份和年份

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T11:17:22.847

我检查了，它添加成功。看看我的代码和o/p：

```
Calendar  cal = Calendar.getInstance(); // today is 09-Aug-2012

for(int i=0;i<23;i++) {
    cal.add(Calendar.DATE, 1);  
}
System.out.println(cal.get(Calendar.DAY_OF_MONTH)); 
```

O/p

`1`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-28T18:37:08.613

这不是一个答案，只是一个线索：我发现它发生在 DST 在日期之间开始时。可能是你的情况...

例如：今年巴西夏令时开始于“Sun Oct 20 00:00:00 2013”

```
Calendar cal = Calendar.getInstance(); // today = Sat Oct 19 00:00:00 BRT 2013
cal.add(Calendar.DATE, 1); // = Sat Oct 19 23:00:00 BRT 2013 
```

不幸的是，我仍然不知道如何解决这个问题。

# sql - 我们可以将数据从一个列复制到另一个具有不同数据类型的列吗？

> ID：11882104
> 
> 赞同：0
> 
> 时间：2012-08-09T11:10:09.140
> 
> 标签：sql, sql-server

我正在尝试这样做，但我不确定这是否可能。

我正在尝试`tblRecords1(nvarchar) of table1 to tblRecords(bigint)`使用转换函数复制另一个表的数据。

但它给出了错误。是否可以这样做？

这确保了 tblRecords1 中的值都是数值。

**更新**

我这样做如下：

`INSERT INTO tblRecords (current_job_title,Highest_Education_Stream) SELECT convert(bigint,current_job_title),convert(bigint,Highest_Education_Stream) FROM tblRecords1`

那我在做什么错？

**更新** 我忘记了空值。他们正在制造问题。所以我按照以下方式完成了它：

```
INSERT INTO tblRecords (current_job_title,Highest_Education_Stream)

 SELECT current_job_title = case when current_job_title is null then 0 else convert(bigint,current_job_title) end,
               Highest_Education_Stream=case when Highest_Education_Streamis null then 0 else convert(bigint,current_job_title) end,
 FROM tblRecords1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T13:09:52.980

如下所示

> INSERT INTO tblRecords (current_job_title,Highest_Education_Stream) SELECT cast(bigint as "datatype of current_job_title"), cast(bigint as "datatype of Highest_Education_Stream") FROM tblRecords1

将“current_job_title 的数据类型”和“Highest_Education_Stream 的数据类型”替换为实际数据类型并用于空值检查

> ISNULL（变量，0）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T11:23:16.510

您可以转换，前提是您要转换的类型可以合理地匹配它要转换的类型。所以你可以这样做：

```
declare @from varchar(20) = '1000000'
declare @to bigint

select @to = convert(bigint, @from)
select @to 
```

请参阅[MSDN 上的 CAST 和 CONVERT](http://msdn.microsoft.com/en-us/library/ms187928.aspx)

# ios - iOS 将相机帧共享为图像

> ID：11882112
> 
> 赞同：0
> 
> 时间：2012-08-09T11:10:35.947
> 
> 标签：ios, image, cocoa-touch, uiimage

我正在开发一个图像处理原型，它需要我从相机中捕获帧并进行处理。我正在使用处理帧的第三方库，然后它们以该库定义的格式提供给我。我相信我将能够将其转换为 UIImage。我需要在 Twitter / FB 上分享这个捕获的图像。

我怎样才能做到这一点？我相信在上传之前我需要将 UIImage 转换为一些标准格式，如 JPEG / PNG，对吗？在这种情况下，如何将 UIImage 转换为标准格式？我是否需要为此目的使用任何其他第三方库？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T11:36:52.050

您是否将 UIImagaPickerController 用于相机？如果是，那么您有一种拍照方法，即

```
- (void)takePicture 
```

调用该方法后，将调用 UIImagePickerController 的以下方法

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info 
```

你可以在这里得到图像。

欲了解更多信息[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html#//apple_ref/doc/uid/TP40007070-CH3-SW24](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html#//apple_ref/doc/uid/TP40007070-CH3-SW24)

要将 UIImage 实例的数据获取为 png 或 jpg 格式，您可以使用函数

```
NSData * UIImageJPEGRepresentation (
UIImage *image,
CGFloat compressionQuality
); 
```

或者

```
NSData * UIImagePNGRepresentation (
UIImage *image
); 
```

# html - 如何解决这个html表格左对齐

> ID：11882113
> 
> 赞同：0
> 
> 时间：2012-08-09T11:10:49.067
> 
> 标签：html, jsp

这就是我为 html 表设置值的方式：

```
<table  width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#f9fae3" align="center" >
                                                <tr class='lightrow'>
                                                  <td width="12%" class="title_sub" align="center" >S.No</td>
                                                  <td width="12%" class="title_sub" align="left">EmployeeID</td>
                                                  <td width="32%" class="title_sub" align="left">Name</td>
                                                  <td width="20%" class="title_sub" align="left">Cardnumber</td>
                                                  <td width="12%" class="title_sub" align="left">Issued</td>
                                                  <td width="12%" class="title_sub" align="left">Status</td>
                                                </tr>
                                            </table>
                                            <%
                                            TempcardViewModel temporaycardDetails=null;
                                             String classname = "darkrow", noresults = "No Records Found ", space = "&nbsp;";
                                             int sno = 1,htmltablestatus = 0;
                                             String[] colorArray = {"lightrow","darkrow"};
                                             if(tempcardList.size() >0){
                                                 htmltablestatus = 1;
                                                 int i =0;
                                                 for (int iterator=0; iterator < tempcardList.size(); iterator++)
                                                    {
                                                     if(i == 0)  i = 1;
                                                        else i = 0;
                                                        classname = colorArray[i];
                                                        temporaycardDetails=(TempcardViewModel)tempcardList.get(iterator);
                                            %>
                                            <table  width='100%' align='center' border='0' cellpadding='0' cellspacing='0'>
                                                <tr class='<%=classname%>'>
                                                    <td width="12%" align="center" ><%=sno%></td>
                                                    <td width="12%" align="left"><%=temporaycardDetails.getEmpid()%></td>
                                                    <td width="32%" align="left"><%=temporaycardDetails.getEmpname()%></td>
                                                    <td width="20%" align="left"><%=temporaycardDetails.getTempcardnumber()%></td>
                                                    <td width="12%" align="left"><%=temporaycardDetails.getIssuedate()%></td>
                                                    <td width="12%" align="left"><%=temporaycardDetails.getTempcardstatus()%></td>
                                                </tr>
                                            <tr>
                                                <td colspan="6">&nbsp;</td>
                                            </tr>
                                           <% sno++;}//end of for loop 
                                             } // end of if loop
                                           %>
                                           </table>
                                                    <table width="100%" border="0" cellspacing="0" cellpadding="0" bgcolor="#FFFFF0">
                                                        <tr >
                                                        <% if(currentPage != 1){
                                                            currentPage=currentPage - 1;
                                                        %>
                                                                <td align="left" ><a href="#" onclick="gotoPage('<%=currentPage%>')">Previous</a></td>
                                                           <%}
                                                        for(int i=1;i<=noOfPages;i++){
                                                            if(currentPage==i){
                                                        %>
                                                            <td>${i}</td><% } else {%>
                                                                    <td align="left" ><a href="#" onclick="gotoPage('<%=i%>')"><%=i%></a></td>
                                                                <% }%>
                                                        <%} %>
                                                        <% if(currentPage < noOfPages){
                                                            currentPage=currentPage + 1;
                                                        %>
                                                                <td align="left" ><a href="#" onclick="gotoPage('<%=currentPage%>')">Next</a></td>
                                                           <%}%>
                                                        </tr>
                                                    </table> 
```

我已经为jsp页面中的分页做了这个。但它给了我结果我面临的问题是数字显示如下：（`1 2 3 4 5 6 Next`每个数字之间有很大的空间）

但我希望它们显示为`1 2 3 4 5 6 7 next`

谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:14:22.173

要调整页码之间的间距，您必须为显示页码的表格设置表格或列的宽度。

# mysql - 如何从 MySQL 表中查询复杂的布尔条件

> ID：11882115
> 
> 赞同：2
> 
> 时间：2012-08-09T11:10:56.040
> 
> 标签：mysql, boolean, conditional-statements

我有下表用于个人消息：

```
id*    sender*    recipient* del_by_rec del_by_send
-+----------+-------------+-----------+-----------+
 2     tom        beth            0          1
 5     tom        josh            0          1
 5     tom        chris           1          1
 7     ashley     burt            1          0
 8     jenna      tom             1          0
 8     jenna      ashley          0          0
 8     jenna      jenna           1          0
10     ashley     burt            0          0 
```

在哪里

*   `id`是消息ID，
*   `sender`并且`recipient`是用户登录，
*   `sender`对消息是唯一的`id`
*   `recipient`一条消息可以有多个`id`
*   `del_by_rec`如果邮件已被收件人从其收件箱中删除，则为 1，并且
*   `del_by_send`如果邮件已被发件人从他的发件箱中删除，则为 1。
*   `id`- `sender`-`recipient`是主键，并且
*   `id``id`引用包含该消息的另一个表中的主键。

一旦当前用户决定这样做，我需要确定**是否可以安全地从表中删除消息：**

*从收件人的收件箱*：

1.  如果发件人已经从他的发件箱中删除了邮件（`del_by_send`= 1）；和
2.  如果此用户是唯一尚未从其收件箱中删除此邮件的收件人（`del_by_rec`此用户 = 0，`del_by_rec`所有其他收件人 = 1。）

*或从发件人的发件箱*：

1.  如果所有收件人都已从其收件箱中删除了此邮件（`del_by_rec`= 1 表示此邮件的所有收件人）。

否则，当前用户将通过将其对应的`del_by_rec`or`del_by_send`标志设置为 1 来标记此消息以进行删除。

**有没有办法有效地查询这个标准**

1.  当前用户查看当前消息；或者
2.  当前用户大量删除多条消息（我正在考虑在这种情况下返回多行结果）。

返回一个 boolean/int 会很棒。

为了我的爱，我无法通过这个查询（假设用户是`ashley`并且她想`8`从她的收件箱中删除消息）：

```
SELECT (
    (SUM(del_by_send) > 0) # sender has deleted (at least 1)
    && ((SUM(del_by_rec) + 1) >= COUNT(id)) # only 1 recipient has not deleted yet
    && ((SELECT del_by_rec FROM msg_meta WHERE recipient = 'ashley' AND id = 8) = 0) # and that recipient is this user
)
FROM msg_meta
WHERE id = 8
GROUP BY id 
```

1.  这似乎完成了这项工作，但它有点矫枉过正吗？
2.  对于多个 message`id`避免昂贵的`foreach`. 我尝试`WHERE id IN (7,10)`了收件人`burt`，但我无法将其完全用于子查询..

帮助。谢谢大家。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:07:53.823

我的建议是使用子查询在消息级别获取您想要的信息，然后对此应用逻辑。以下查询接近：

```
select id, (case when sum_del_by_send > 0 and (num_rec - sum_del_by_rec) <= 1
                 then 'Y'
                 else 'N'
            end) as IsSafeToDelete
from (select id,
             sum(del_by_send) as sum_del_by_send,
             sum(del_by_rec) as sum_del_by_rec,
             count(*) as num_rec
      from msg_meta
      group by id
     ) m 
```

这不考虑当前收件人。此变体可以：

```
select id, (case when sum_del_by_send > 0 and (num_others - sum_del_by_others) = 1
                 then 'Y'
                 else 'N'
            end) as IsSafeToDelete
from (select id,
             sum(del_by_send) as sum_del_by_send,
             sum(case when recipient <> @RECIPIENT then del_by_rec end) as sum_del_by_others,
             sum(case when recipient <> @RECIPIENT then 1 else 0 end) as num_others,
             count(*) as num_rec
      from msg_meta
      group by id
     ) m 
```

这会一次处理所有消息。要处理特定的消息 id，只需将子查询中的“group by id”替换为：

```
where id = @ID 
```

（@RECIPIENT 和 @ID 是您要自定义查询的值。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T11:36:01.523

想法1：
反转布尔值（将列称为保持或保存），先更新用户的删除，然后执行：

```
SELECT id , SUM(del_by_send) + SUM(del_by_rec)
FROM msg_meta
WHERE id = 8
GROUP BY id 
```

第二列中所有为 0 的记录都是可删除的。

想法 2：
您可以分两步使用子查询（对于 1 个 id 可行，但可能会很慢）
第 1 步：更新删除标志（通过 rec 或通过发送）为 1 个或多个消息ID。
第2步 ：

```
SELECT id 
FROM msg_meta t
WHERE t.id = 8
AND NOT EXISTS(
  SELECT id
  FROM msg_meta t2
  WHERE t.id = t2.id
  AND (t2.del_by_rec = 0 OR t2.del_by_sent = 0)
) 
```

也许其中之一可能会给你你需要的想法或想法 3 的火花；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T12:06:10.773

What a well documented post... (I wiched they were all like yours.)...

I see that there can only be one sender per message... so why wouldn't you put the sender's login, and the del_by_send flag in the messages table ?

This will save quite a lot of time updating only one row when the sender decide to delete the message. and a lot of space by recording only once the sender name for each message...

This should already speed things up because your tables will be lighter, and the updates never change more then one row.

(this would be closer to what is recommended by normalisation standards. Check [http://en.wikipedia.org/wiki/Database_normalization](http://en.wikipedia.org/wiki/Database_normalization) for more info on database normalization)

to simplify your quest to safe-deletion, I would record in the message table the number of people involved with the message. (say, for message ID 5, people_count would be 3 (Tom, Josh and Chris). Each time a user (sender or receiver) deletes the message, decrement this counter. When the counter is down to 0, it is safe to delete de message.

Hope this heps...

# windows - APPCPATH 中的多个 JAR

> ID：11882116
> 
> 赞同：0
> 
> 时间：2012-08-09T11:11:01.837
> 
> 标签：windows, jar, batch-file

我需要在我的 .bat 文件的 appcpath 中指定多个 jar。假设我要添加两个罐子：a.jar、b.jar。

我指定：

```
SET A=a.jar
SET B=b.jar
SET APPCPATH=%A%;%B% 
```

但这不起作用（我收到一个空指针异常，显示来自 b.jar 的对象如何未导入到 APPCPATH 中）。

其他信息：如果我只指定

```
SET APPCPATH=%A% 
```

有用。

虽然如果我指定

```
SET APPCPATH=%A%;%B% 
```

仅加载来自 a.jar 的对象。

所以，我想添加“;” 两个罐子之间不是正确的方法。在谷歌上找不到任何东西......任何人都知道如何指定多个罐子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T18:37:50.953

由此看来[，](http://vlad-mi.livejournal.com/566.html)分隔符是冒号`:`

# actionscript-3 - 闪存 AS3.0 错误 1119

> ID：11882117
> 
> 赞同：0
> 
> 时间：2012-08-09T11:11:03.070
> 
> 标签：actionscript-3, flash-cs5

我有以下错误：

> 场景 1，图层“smashNow”，第 138 帧，第 1 行 1119：`onRelease`通过静态类型的引用访问可能未定义的属性`flash.display:SimpleButton`。

这是我的代码：

```
play_mc.onRelease= function ()
{
    GotoAndPlay ("Scene 3",1)
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:06:17.930

您的代码根本不是**AS3**！尝试这样的事情：

```
play_mc.addEventListener(MouseEvent.CLICK, function(event:MouseEvent):void {
    gotoAndPlay(1, "Scene 3");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-17T21:58:20.037

您正在使用 Actionscript 2 而不是 Actionscript 3。此外，您可能会考虑将 play_mc 重命名为类似 play_button 的名称，因为它不是一个影片剪辑，而是一个按钮 (SimpleButton)。

干净的方法是这样的：

```
play_mc.addEventListener(MouseEvent.CLICK, playMyScene, false, 0, true);

function playMyScene(event:MouseEvent):void
{
    gotoAndPlay(1,"Scene 3");
} 
```

# git - git 分支（无分支）

> ID：11882121
> 
> 赞同：8
> 
> 时间：2012-08-09T11:11:12.210
> 
> 标签：git

好吧，我刚刚犯了一个巨大的错误。

我正在做一个项目，并认为我在 master 分支工作。
所以我添加了我需要的文件，提交了它们，当我尝试推送到原点时，我得到了

```
Everything is up to date 
```

我使用`git branch`并得到了

```
* (no branch)
* master 
```

因此，在压力下，我将待处理的更改隐藏在（无分支）中并签出 master。现在我丢失了所有更改，因为我无法签出“不应命名”的分支。当我列出我只有的分支时

```
* master 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-09T11:16:06.537

如果更改已提交，您并没有丢失这些更改。您只是没有对它们的命名引用。

尝试运行`git reflog`并在顶部附近寻找一条类似`checkout: moving from <commit-id> to master`. 然后，您可以使用它`<commit-id>`创建一个临时分支来检查您的更改并将它们带到`master`分支：

```
git checkout -b temp-branch <commit-id> 
```

你可以合并这个分支，或者只是挑选必要的提交。

我希望这有帮助。

# python - 按颜色定义从绘图中排除点？

> ID：11882123
> 
> 赞同：2
> 
> 时间：2012-08-09T11:11:22.010
> 
> 标签：python, matplotlib

我正在尝试制作 3D 散点图并对符号进行颜色编码。如果 RGB 颜色由 定义`nan`，为什么点绘制为黑色？这个表达式没问题：

```
import numpy as np
import matplotlib.pyplot as plt
from mpl_toolkits.mplot3d import Axes3D

carr = np.array([[0,0,0,1],[0,0,1,1],[0,1,0,1]]) # RGBA color array

ax = plt.axes(projection='3d')
h = ax.scatter([1,2,3],[1,2,3],[1,2,3],
               c=carr)
plt.draw() 
```

带有 nan 的新颜色数组：

```
carr = np.array([[0,0,0,1],np.repeat(np.nan,4),[0,1,0,1]])

ax = plt.axes(projection='3d')
h = ax.scatter([1,2,3],[1,2,3],[1,2,3],
               c=carr)
plt.draw() 
```

颜色定义为的`nan`点显示为黑色，而不是没有任何颜色或其他颜色。有没有办法让它不显示？`NA`在 R 中，不绘制颜色定义为的点，这在您通过某种逻辑表达式指定颜色时很方便。

当然......我总是可以对数组进行子集化以进行绘图，但如果我可以使用颜色定义将其排除在外，那就更好了。

顺便说一句，为什么

```
carr[1:] = np.nan 
```

`carr`在给我的第一个定义之后

```
array([[                   0,                    0,                    0,
                           1],
       [-9223372036854775808, -9223372036854775808, -9223372036854775808,
        -9223372036854775808],
       [                   0,                    1,                    0,
                           1]]) 
```

代替

```
array([[  0.,   0.,   0.,   1.],
       [ nan,  nan,  nan,  nan],
       [  0.,   1.,   0.,   1.]]) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T13:46:08.453

这与 3D 绘图无关，同样的问题`matplotlib.scatter`也存在。确实有两个问题。首先是**不同`carr`的有不同的内部类型**。请注意，这将失败：

```
import numpy as np
import pylab as plt

# This fails since carr[0,0] is of type numpy.int64
carr = np.array([[0,0,0,1],[0,0,1,1],[0,1,0,1]]) # RGBA color array
carr[1] = np.repeat(np.nan,4)

pts = np.array([[1,2],[1,3],[2,2]]).T
plt.scatter(pts[0],pts[1],c=carr,s=500) 
```

在下一种情况下，如果我们强制`carr`成为 a`numpy.float`我们可以绘制，但如前所述`nan`'s 显示为黑点：

```
# This works but still puts a black dot for the nan point
carr = np.array([[0.0,0,0,1],[0,0,1,1],[0,1,0,1]]) # RGBA color array
carr[1] = np.repeat(np.nan,4)

pts = np.array([[1,2],[1,3],[2,2]]).T
plt.scatter(pts[0],pts[1],c=carr,s=500) 
```

如果我们改为定义一个掩码，我们可以索引我们想要的点。这是处理 numpy 数组时的首选方法：

```
carr = np.array([[0.0,0,0,1],[0,0,1,1],[0,1,0,1]]) # RGBA color array
carr[1] = np.repeat(np.nan,4)
pts = np.array([[1,2],[1,3],[2,2]]).T

idx = ~np.isnan(carr[:,0])
plt.scatter(pts[0][idx],pts[1][idx],c=carr[idx],s=500) 
```

并排显示两种情况：

![在此处输入图像描述](../Images/4db1bd91f5bd24ed9ac8fb10a413b143.png)

# asp.net-mvc-3 - 如何在 MVC3 中检查会话是否过期

> ID：11882130
> 
> 赞同：1
> 
> 时间：2012-08-09T11:11:41.173
> 
> 标签：asp.net-mvc-3

我无法处理 MVC 3 中的会话过期检查，最初我尝试使用 MVC 过滤器（操作执行）来检查会话，但我无法访问操作过滤器中的 request.session 变量，

我尝试在 global.asax 中使用 session_Start 方法，但问题是当会话过期时，它不会转到 session_start 方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T11:24:58.243

您可以像这样创建属性

```
public class SessionExpireFilterAttribute:ActionFilterAttribute 
{
    public override void OnActionExecuting( ActionExecutingContext filterContext ) {
        HttpContext ctx = HttpContext.Current;

       //  check if session is supported
        if(ctx.Request.IsAuthenticated)
        {

            if (ctx.Session != null)
            {

                // check if a new session id was generated
                if (ctx.Session.IsNewSession)
                {

                    // If it says it is a new session, but an existing cookie exists, then it must
                    // have timed out
                    string sessionCookie = ctx.Request.Headers["Cookie"];
                    if (null == sessionCookie)
                    {
                        FormsAuthentication.SignOut();

                        const string loginUrl = @"~/Login/Login";
                        var rr = new RedirectResult(loginUrl);
                        filterContext.Result = rr;

                    }
                    if ((null != sessionCookie) && (sessionCookie.IndexOf("ASP.NET_SessionId") <= 0))
                    {
                        FormsAuthentication.SignOut();
                        const string loginUrl = @"~/Login/Login";
                        var rr = new RedirectResult(loginUrl);
                        filterContext.Result = rr;
                    }
                }
            }

        }
        else
        {

            ctx.Response.Redirect(@"~/Login/Login");
        }

        base.OnActionExecuting ( filterContext );
    }
} 
```

# javascript - jquery .find 回调

> ID：11882131
> 
> 赞同：0
> 
> 时间：2012-08-09T11:11:50.900
> 
> 标签：javascript, jquery

我想知道有没有办法从 jquery .find 函数中获取回调。

所以它会是

```
$('#Div').find($('.items')).each(function () {}).Callback(function(){//Do stuff}); 
```

感谢任何能提供帮助的人

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T11:16:02.577

回调通常是传递给另一个函数的函数，该函数将执行长时间运行的任务，通常是非阻塞任务。然后在非阻塞任务完成时调用回调。

由于`.each`是阻塞的，您的代码将线性执行。你可以简单地写

```
$('#Div').find($('.items')).each(function () {})
// Do stuff 
```

# vb.net - Access 数据库的合并

> ID：11882133
> 
> 赞同：0
> 
> 时间：2012-08-09T11:11:56.010
> 
> 标签：vb.net, ms-access, merge

我正在尝试在**VB.net**中编写一个程序，这是一个“花式”数据库前端。该程序的目的是将数据库从“服务器”数据库所在的共享位置本地存储在用户计算机上。

本地副本和服务器副本都存储在数据集中，然后程序检查服务器副本以查看其最近是否有任何更新。如果是这样，它只会下载更新以减少带宽。

我想要做的是强制本地数据库承担服务器数据库的更改。但是，当使用 data-adapter.update 时，它​​没有注意到任何变化，因为它重新加载服务器数据集的方式是清除它，然后从头开始重新加载。

是否有任何有效的方法将服务器数据集强制到本地数据集，然后强制本地数据集在 BGW 中重写数据库？正如我之前所说，如果我只是清除本地服务器并将服务器一台复制到本地一台，则 data-adapter.update 似乎不会保存更改。

抱歉，如果我为此完全走错了路。任何建议或指导将不胜感激。

约翰

```
 dsLocalDB.Clear() 'Clear the local dataset
    dsLocalDB = dbServerDB.Copy 'copy the server dataset to the local dataset
    LoadData() 'let the application reload all the new records

    Dim cb As New OleDb.OleDbCommandBuilder(daLocalDB) 'Create a COmmand Builder
    For i = 1 To TableNames.GetUpperBound(0) 'Loop through all the tables which have been stored as an array
        For Each row As DataRow In dsLocalDB.Tables(TableNames(i)).Rows 'Loop through the rows, so we can see if it detects modified data. For testing purposes.
            If row.RowState = DataRowState.Modified Then 'Its found modified data!
                MsgBox("Found Modified Data Row!") 'Output a message
                Exit For 'exit the for loop
            End If
        Next
        daLocalDB.Update(dsLocalDB, TableNames(i)) 'Update the local database
    Next i 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T11:19:41.260

你可能想看看这个：

[http://www.codeproject.com/Articles/18027/Take-Data-Offline-Using-Microsoft-Synchronization](http://www.codeproject.com/Articles/18027/Take-Data-Offline-Using-Microsoft-Synchronization)

PS：
如果你愿意接受善意的建议：你做错了。永远不要保留两个数据库。
同步两个数据库是一个非常微妙的过程。
甚至集群应用程序也使用实时同步。
如果你没有几年的经验，你很快就会产生混乱。
阅读文章中的免责声明（无保证、明示、暗示或法定）。

# android - 如何显示巨大的类别和子类别列表？

> ID：11882137
> 
> 赞同：1
> 
> 时间：2012-08-09T11:11:59.090
> 
> 标签：android, if-statement, autocomplete, switch-statement

我正在构建一个`android`应用程序，我有一个巨大的类别列表（~50）要显示给用户，我目前正在使用`AutoCompleteTextView`它来允许用户选择。

但我的问题是我还有一个巨大的子类别列表（每个类别约 10 个），我必须显示并让用户选择一个，必须根据所选类别显示子类别。

所以除了写一个巨大的`switch-case`或`if-else`块，我该怎么做？

我不太确定，但可以使用反射来检查字段，`R.java`然后获取包含子类别的资源的 id 吗？假设我当然使用正确的命名约定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:45:20.233

我认为您不应该使用布局文件中的所有类别和子类别来实现这一点。我会通过 Java 代码生成布局，这样我就可以轻松添加一些巧妙的技巧。

例如，您可以以编程方式添加“标记”值，以帮助您识别所选项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T13:22:35.607

这是我基于@Jordi 回答的灵感的改进。

使用正则表达式的力量，我在这个巨大的`XML`文件中做了一些修改。

想法是创建一个`java.util.Map<String,String[]>`，键是类别，值是子类别。

所以我可以得到类别列表，`map.keySet()`然后根据我可以做的用户选择`map.get(selection)`来获取子类别列表。

# f# - F# 中更简单的 Seq.unfold

> ID：11882140
> 
> 赞同：2
> 
> 时间：2012-08-09T11:12:08.290
> 
> 标签：f#, sequences, seq

有没有更简单的`Seq.unfold`版本，只将前一个元素作为状态？我知道你可以很容易地适应`Seq.unfold`这样做，但结果不是很可读。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T12:14:08.620

我认为没有内置函数可以做到这一点。

重复使用相同的模式`Seq.unfold`会很烦人，但您可以轻松地使用它`unfold`来定义一个行为如您所愿的函数，然后只需使用新函数：

```
module Seq = 
  let generate f v = 
    Seq.unfold (fun v -> let r = f v in Some(r, r)) v 
```

顺便说一句，如果我想实现该模式，我可能会使用一个简单的递归序列表达式，这可能比使用`Seq.unfold`. 该`generate`功能可以这样实现：

```
let rec generate f v = seq {
  yield v
  yield! generate f (f v) } 
```

这有点不同，因为它也产生第一个值。不确定你想要什么行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T14:22:33.737

托马斯的回答很好，但就像你说的那样，`Seq.unfold`这样做很丑，而且，正如他所说，他的`generate`功能表现不同。

如果您想要与 相同的行为`Seq.unfold`，但使用前一个元素作为状态，则应该这样做：

```
let rec unfold f state = 
  seq {
    match f state with
    | Some x ->
      yield x
      yield! unfold f x
    | None -> ()
  } 
```

# android - 如何不显示来自 BaseAdapter 的视图

> ID：11882142
> 
> 赞同：0
> 
> 时间：2012-08-09T11:12:10.253
> 
> 标签：android, android-layout, baseadapter

我有一个 MultiAutoCompleteTextView，我在其上设置了一个自定义适配器。现在，这个适配器将显示一个选项列表供用户在用户输入一些文本时从中选择。

这在纵向模式下工作正常。但是在横向中，我不希望此适配器显示任何视图（选项列表）。我不想卸下适配器。

我已经尝试将视图设置为 GONE。并尝试将计数设置为 0，以便它根本不会显示视图，但由于这个原因，数据本身已经消失，这是不应该发生的。

如何让适配器加载数据但停止以横向模式显示视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T11:41:51.650

您可以像这样继承 ArrayAdapter。

```
public class MyArrayAdapter<T> extends ArrayAdapter<T> {

    public MyArrayAdapter(Context context, int resource, int textViewResourceId, List<T> objects) {
        super(context, resource, textViewResourceId, objects);
        // TODO Auto-generated constructor stub
    }

    @Override
    public int getCount() {
        if(isLandscapeMode())
            return 0;
        return super.getCount();
    }

    public boolean isLandscapeMode()
    {
        DisplayMetrics metrics = getContext().getResources().getDisplayMetrics();
        return metrics.xdpi > metrics.ydpi;
    }

} 
```

# svn - Reviewboard/SVN 审核后错误：存储库路径不在已知存储库列表中

> ID：11882143
> 
> 赞同：5
> 
> 时间：2012-08-09T11:12:17.220
> 
> 标签：svn, review-board

我在通过 Subversion (SVN) 中的签入自动在 Review Board 中创建新的评论条目时遇到了困难。我创建了一个提交后挂钩，当手动运行时会出现以下异常：

```
Failed to execute command: ['c:\\python25\\Scripts\\post-review', '--repository-   
url=file:///Repository/svn/TestProject', '--user
=reviewmanager', '--password=########', '-p', '--submit-as=mario', '--revision-    
range=44:45', '--server=http://172.16.4.175/reviewboard
--disable-proxy', '--summary=refs #2564 testcheckin for reviewboard', 
'--description=(In [45]) refs #2564 testcheckin for reviewboard. \npublish review', '']

There was an error creating this review request.

The repository path "http://sos35/svn/TestProject" is not in the list of known repositories on the server. 
```

我已经在评论板服务器中创建了具有此特定路径的存储库。`svn info`将此路径作为 svn 存储库的根路径。从 hooks 文件夹在 SVN 存储库服务器上运行此脚本。

因此，除了前面提到的例外，一切似乎都在为成功做好准备。

有没有人有任何线索来解决这个难题？尝试在项目根目录中签入 .reviewboardrc 文件，但没有成功。可能是因为这些信息在 post-review 的命令行中被覆盖。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-09T16:39:25.393

确保 ReviewBoard 设置中的存储库 URL 不以斜杠结尾。这对我有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T03:23:41.507

也许你应该让你的审查委员会管理员为你添加根 SVN 路径，我昨天遇到了这个问题，在管理员为我添加 SVN 路径后不久，post-review 命令就起作用了。

但是，我遇到了一个新问题，审核请求创建成功，但 diff 文件没有上传。我认为审查委员会与 SVN 或其他 SCM 的集成确实需要改进。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-10T21:59:54.310

我也有类似的问题，但从路径末尾删除勾号解决了这个问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T16:05:11.497

您是只在运行`post-review`脚本时看到这个问题，还是在通过 Web 界面执行相同操作时也出现错误？

请记住，`post-review`脚本使用`.reviewboardrc`文件中设置的变量以及您在命令行中传递的变量。确保您没有在这两个地方设置冲突的选项。

我看到您的脚本中有两种类型的 URL：一些使用`http://`格式，一些使用`file://`格式。您是否有一台机器同时提供 Subversion 和 ReviewBoard，或者它们在不同的服务器上？URL`http://sos35/svn/TestProject`与这些系统有何关系？

该选项是否`file:///Repository/svn/TestProject`描述了运行脚本的机器或托管 ReviewBoard 的机器上的路径？如果这是运行脚本的机器上的路径，请记住它不是任何其他服务器上的有效路径。当单独的 ReviewBoard 服务器解释该路径时，它将与您在配置存储库时使用的 URL 不匹配（这很可能使用`http://`或`svn://`格式 URL）。传递给`--repository-url=`选项的值应与 ReviewBoard 管理界面中存储库的“路径”字段中列出的值完全匹配。

# c++ - c++中获取目录

> ID：11882145
> 
> 赞同：1
> 
> 时间：2012-08-09T11:12:23.147
> 
> 标签：c++, windows

如果操作系统在另一个驱动器上，那么我想获得“C:\WINDOWs”路径，然后是“E:\WINDOWS”。我使用了 getenv("windir")，但我不想要这个解决方案。如果我更改环境变量的名称怎么办。变量

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T11:14:31.023

请参阅 Windows API`GetWindowsDirectory`

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms724454(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724454(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T11:39:11.470

传入[CSLID_WINDOWS](http://msdn.microsoft.com/en-us/library/bb762494%28v=vs.85%29.aspx "CSLID_WINDOWS")的 API [SHGetFolderPath](http://msdn.microsoft.com/en-us/library/bb762181%28VS.85%29.aspx "SHGetFolderPath")看起来像您需要的。

# node.js - Derbyjs：在应用程序路由或 x-bind 函数中访问会话

> ID：11882146
> 
> 赞同：0
> 
> 时间：2012-08-09T11:12:23.990
> 
> 标签：node.js, express, derbyjs

1.  德比新TestDerby

2.  取消注释 server/index.js

3.  添加`console.log(model.get(),model.session)`到 app/index.js - this.start

4.  model.session 未定义

    （快速浏览一下racer/lib/session/session.Store.js）

还是德比推荐使用`model.set('_session-item-key',value)`而不是会话？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T13:22:26.377

您可以通过 model.session 访问会话。编写一个自定义中间件以挂钩到您的 expressApp 的创建：`model = req.getModel(); model.set('_whatever', model.session.whatever);` [示例自定义中间件](https://github.com/lefnire/habitrpg/blob/master/src/server/index.coffee#L33)，[示例 model.session](https://github.com/lefnire/habitrpg/blob/master/src/app/index.coffee#L24)

# javascript - 如何在 OpenLayers 中从 GML 矢量图层升级到 VECTOR

> ID：11882159
> 
> 赞同：2
> 
> 时间：2012-08-09T11:13:21.713
> 
> 标签：javascript, vector, openlayers, gml

根据 OpenLayers 的说法，Openlayers.Layer.GML 已被贬值并且在版本中不受支持。2.12\. 我需要移动到矢量图层，但我无法弄清楚。

在我以前的版本中，我将其定义为：

```
 //Locations and UnitLocations layer - GeoJSON
            var LocationStyle = new OpenLayers.Style({
                strokeColor: "#5B5B5B",
                strokeWidth: 1,
                fillColor: "#F4FBA1",
                pointRadius: 10,
                strokeOpacity: 0.8,
                fillOpacity: 0.8,
                label: "${Location}",
                labelYOffset: "-20",
                labelAlign: "cc",
                fontColor: "#000000",
                fontOpacity: 1,
                fontFamily: "Arial",
                fontSize: 12,
                fontWeight: "300"
            });

            var LocationURL = "http://bit.ly/Nfe6IH?q=ICS_Locations&IncidentCode=" + "VAJA%20PSI%2012" + "&key=" + Math.random();
            Locations = new OpenLayers.Layer.GML("Locations", LocationURL, {
                format: OpenLayers.Format.GeoJSON,
                projection: new OpenLayers.Projection("EPSG:4326"), //4326 for WGS84
                styleMap: new OpenLayers.StyleMap(LocationStyle)
            }); 
```

在版本。Openlayers 2.12 不再支持此功能。你有什么例子我怎么能做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T18:16:26.797

```
// format use: new OpenLayers.Format.GPX

                var orange = new OpenLayers.Layer.Vector("gpx", { 
                    protocol: new OpenLayers.Protocol.HTTP({ 
                        url: "mGPX_123123123.gpx", 
                        format: new OpenLayers.Format.GPX
                    }), 
                    strategies: [new OpenLayers.Strategy.Fixed()], 
                    visibility: true,                                         
                    projection: new OpenLayers.Projection("EPSG:4326") 
                }); 
                myMap.addLayer(orange);    

// refer http://osgeo-org.1560.n6.nabble.com/PB-V-2-12-and-Layer-GML-td4984663.html 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T07:38:17.920

尝试调整以下代码：

```
Locations = new OpenLayers.Layer.Vector("Locations", {
                strategies: [new OpenLayers.Strategy.Fixed()], 
                protocol: new OpenLayers.Protocol.HTTP({
                     url: LocationURL,
                     format: new OpenLayers.Format.GeoJSON()

                }),
                displayInLayerSwitcher: false,

            }); 
```

# c++ - 在进行 OOP 状态机设计时如何避免单例？

> ID：11882160
> 
> 赞同：8
> 
> 时间：2012-08-09T11:13:25.940
> 
> 标签：c++, oop, singleton, fsm

我正在尝试自学编程。我以与大多数人相同的方式开始；制作小而杂乱的应用程序和游戏，以不那么简单的方式做简单的事情。最近，我一直在尝试通过编写一个稍微复杂一些的游戏来迈出下一步，该游戏使用 OOP 设计来编写更好、更模块化的代码！

*我遇到的主要问题是我的主要 StateManager (FSM) 类的设计（在介绍/菜单/游戏/等屏幕状态之间切换）。高高在上，我只见过两种设计方法：*

*   使用 switch/case 语句 + 枚举在状态之间切换..

*   制作一个单例 FSM 类来处理向/从向量推送/弹出状态。

现在，我的问题是，switch case 语句非常重复且笨拙，这与我使用这个项目来自学 OOP 的目标背道而驰。

*我的第二个也是更大的问题是“单身”建议。*

正如我之前所说，我正在努力自学，在编程方面我还有很多东西要学，尤其是在 OOP 和设计模式等领域。我遇到了一个问题，*对于我发现的每一个“单例都是邪恶的”线程和讨论，我发现人们在他们的代码中使用单例来制作“引擎”类和 FSM 的教程和参考资料一样多。*这是一个非常一致的混合信息。

我想我只是不明白为什么......即使你只想/打算拥有一个类的单个对象，为什么有必要/有益于将构造函数设为私有并创建一个单例？我读过很多关于单例有多糟糕，它们本质上是如何全局的，它们是如何阻碍多线程的，以及有多少程序员认为它们被过度使用或只是简单的糟糕设计......但我看到一个又一个例子使用它们的人，很少有反例显示替代方法。

普通班就不能做同样的事情吗？明确限制创建实例的目的是什么？我只听说过关于单例的负面消息，但人们似乎经常使用它们……我是否完全错过了单例和 OOP 的一些内容？

单例的使用只是一种趋势，还是人们称单例为“邪恶”的一种趋势？我该如何解决这个问题..？**开关/外壳 FSM 和单例 FSM 之间没有什么东西吗？有人不能以完全相同的方式设计他们的程序的状态系统而不使他们的任何类成为单例吗？那会改变什么吗？**[*困惑*]

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T11:19:51.057

> 普通班就不能做同样的事情吗？明确限制创建实例的目的是什么？我只听说过关于单例的负面消息，但人们似乎经常使用它们……我是否完全错过了单例和 OOP 的一些内容？

不，我相信您走在正确的轨道上：绝对没有理由阻止创建两个实例。宇宙不会因此而内爆。

这是一个完全不必要的限制。由于您必须手动编写该限制，因此拥有它非常愚蠢（如果您必须编写代码来*解除*它，那将是另一回事）。

我想如果创建第二个实例，可能会出现一些奇怪且罕见的情况，即宇宙确实会内爆，但这听起来很牵强。无论如何，这并不能证明单身人士在整个互联网上的盛行是合理的。

我无法真正解释为什么人们经常使用它们而不侮辱这些人的推理能力，所以我会避免这样做。

> 有人不能以完全相同的方式设计他们的程序的状态系统而不使他们的任何类成为单例吗？那会改变什么吗？

它唯一改变的是，通过使其成为单例，您可以防止自己为单元测试创​​建一次性实例。其他一切都一样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T12:09:30.693

通常情况下，没有一个简单的答案。在 C++ 中，单例模式还管理初始化问题的顺序，如果要在静态对象的构造函数中使用，这一点很重要。并且在某些类型的对象中，多个实例只能是编程错误；如果你能阻止他们，为什么不呢。

另一方面，我很难想象一个`StateManager`类应该是单例的情况。它绝不是管理某些独特的资源或某些元功能（例如日志记录），其本质上必须是独特的。而且我也无法想象它被用于静态对象的构造函数中。

诸如“单身人士不好”之类的说法非常具有误导性；对于某些事情，它们是最合适的解决方案。但仅仅因为它们绝对不坏并不意味着它们在任何地方都是合适的。它们解决了一个特定的、非常有限的问题。当你需要解决这个问题时，*不*使用单例是不好的。但是（几乎所有事情都是如此），在不合适的时候使用它是不好的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T11:50:55.490

我不明白为什么 FSM 类应该是单例的。有很多真实世界的 FSM 系统没有单例，见鬼，有一些状态实例在 SM 遍历状态时被创建和销毁，并且[状态](http://qt-project.org/doc/qt-4.8/statemachine-api.html)机本身就是一个状态，可以轻松组合分层状态机。

在一个复杂的应用程序中，您将拥有多个状态机，其中一些会突然出现或消失。例如，处理客户端-服务器交互的那些，必然有多个与客户端来来去去的实例。其他一些可能会受益于组合多个分层状态机，其中一些可能会在许多地方重复使用。因此，您将状态机作为单例*类*的想法对我来说是愚蠢的。例如，您可能在封装您的应用程序的单例应用程序类中拥有特定状态机的*实例*，但这远非单例类状态机。

要全面了解各种状态机实现技术，包括平面 FSM 和分层状态机 (HSM) 之间的对比，您需要查看 Miro Samek 的[PSICC2](http://www.state-machine.com/psicc2/index.php)书。他有大量可免费下载的[文章](http://www.state-machine.com/resources/articles.php)，其中解释了常用技术。

可用于 UI 的分层状态机的合理 C++ 实现[在 Qt 的状态机框架中](http://qt-project.org/doc/qt-4.8/statemachine-api.html)可用。

# jquery - 如何将标题设置为 jqplot 图形的 html

> ID：11882162
> 
> 赞同：-1
> 
> 时间：2012-08-09T11:13:31.803
> 
> 标签：jquery, mobile, jquery-mobile, cordova, jqplot

如何为 jqplot 图动态设置标题。如果我们设置标题： `'<b>My chart</b>'` 然后在渲染后 `'<b>My chart</b>'` 再次显示它应该是 **我的图表的位置**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T11:24:31.673

```
var plot2 = $.jqplot('chart2', [[3, 7, 9, 1, 4, 6, 8, 2, 5]], {
                // Give the plot a title.
                title: '<b>My Chart<b><br>Date From: 07/07/2012 &nbsp; Date To: 07/21/2012',
                // You can specify options for all axes on the plot at once with
                // the axesDefaults object.  Here, we're using a canvas renderer
                // to draw the axis label which allows rotated text.
                axesDefaults: {
                    labelRenderer: $.jqplot.CanvasAxisLabelRenderer
                },
                // An axes object holds options for all axes.
                // Allowable axes are xaxis, x2axis, yaxis, y2axis, y3axis, ...
                // Up to 9 y axes are supported.
                axes: {
                    // options for each axis are specified in seperate option objects.
                    xaxis: {
                        label: "X Axis",
                        // Turn off "padding".  This will allow data point to lie on the
                        // edges of the grid.  Default padding is 1.2 and will keep all
                        // points inside the bounds of the grid.
                        pad: 0
                    },
                    yaxis: {
                        label: "Y Axis"
                    }
                }
            }); 
```

# c# - 粘性页脚确实与需要滚动的页面上的文本重叠

> ID：11882165
> 
> 赞同：0
> 
> 时间：2012-08-09T11:13:51.960
> 
> 标签：c#, asp.net, css, sticky-footer

我有一个带有以下 CSS 的粘性页脚：

```
<style type="text/css">

.HeaderTBL
{
    width: 100%;
    height: 35px;
    min-width:960px;
    max-width:100%;
    background-color: #333333; 
}

.FooterTBL
{
    width: 100%;
    min-width:960px;
    max-width:100%;
    position:inherit;
    bottom:0;
}

.Footer
{
    position:absolute;
    height: 25px;
    bottom:0;
    width:100%; 
}

</style> 
```

我的代码如下：

```
<body style="margin: 0;">
<form id="form1" runat="server">            
<asp:ScriptManager ID="MasterSM" runat="server">
    </asp:ScriptManager>
      <table class="HeaderTBL">
                <tr>
                    <td width="75%">
                        &nbsp;</td>
                    <td width="25%" align="right">
                            <asp:TextBox ID="SearchTB" runat="server" 
                            ToolTip="Search" 
                            Width="216px" Height="25px" ForeColor="#333333" BorderColor="White" 
                                BorderStyle="None" Font-Names="Candara" Font-Overline="False" 
                                Font-Size="Medium"></asp:TextBox>

                            <asp:RoundedCornersExtender ID="SearchTBRCE" runat="server" Enabled="True" 
                                TargetControlID="SearchTB" BorderColor="White">
                                </asp:RoundedCornersExtender>

                    </td>
                </tr>
            </table>

            <table align="center" width="960px" style="min-height:100%;">
    <tr>
        <td width="150px" align="center" valign="top">
            <asp:Image ID="LogoIMG" runat="server" Height="150px" ImageAlign="Left" 
                ImageUrl="~/Images/Logo.gif" Width="150px" />
        </td>
        <td width="810px" rowspan="2" align="center" valign="top">
                   <asp:ContentPlaceHolder ID="Body" runat="server">
            </asp:ContentPlaceHolder>
                        </td>
    </tr>
    <tr>
        <td width="150px" align="center" valign="top">
            <asp:Label ID="LoginLBL" runat="server" Text="Login"></asp:Label>
        </td>
    </tr>
        </table>

<div class="Footer">
    <table class="FooterTBL" style="bottom: 100%">
    <tr>
        <td align="center" 

            style="font-family: Candara; font-size: medium; border-top-style: solid; border-top-width: medium; border-top-color: #333333; color: #333333;">
                Test Text</td>
    </tr>
</table>
</div>
</form>
</body> 
```

但是由于某种原因，当在我的内容页面（这是我的母版页）上的文本长度超过页面高度时，页脚保持在其位置并且不会在文本正文下方移动。

任何人都可以告诉我发生了什么以及任何解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T11:15:50.353

这是因为您正在使用`position: absolute`and`bottom: 0`告诉页脚始终位于屏幕底部，无论如何。如果你想让它在内容之后流动，`set position: relative`

# javascript - JavaScript - JSON 数据结构的构建 - 如何使用变量值更改键名

> ID：11882166
> 
> 赞同：0
> 
> 时间：2012-08-09T11:13:53.570
> 
> 标签：javascript, jquery, json, arrays

我正在动态构建 JSON 数据结构。我的代码工作正常，但我有一个问题，因为我需要设置数据，然后替换键名。

我需要用我的一个变量替换下面的键名——我存储在变量中的实际请求类型本身。

我需要为下面的“requestType”键执行此操作。它适用于值，但不适用于替换键名。

下面是我的代码：

```
// Create data array, used for building request message
var data = {
    requestType: { 
        item1 : null,
        item2 : null,
        item3 : null
    }
};

// Set the field array variables with data
$('input[name="item1"], [name="item2"], [name="item3"]').each(function(index) {
    if(index==0){
        data.requestType.item1 = this.value;
    } else if(index==1){
        data.requestType.item2 = this.value;
    } else if(index==2){
        data.requestType.item3 = this.value;
    }
}); 
```

请帮忙 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T11:19:52.330

如果您说这`requestType`是一个包含其他字符串的变量，那么您将使用以下语法：

```
data[requestType].item1 = this.value; 
```

基本原则是：

```
data.somePropertyName
// is equivalent to
data["somePropertyName"] // note the quotes
// is equivalent to
requestType = "somePropertyName"
data[requestType] 
```

如果您说要*更改*现有属性的名称，则：

```
data.newPropertyName = data.requestType;
delete data.requestType; 
```

根据需要结合上述`[]`语法。

顺便说一句，您处理的*不是*JSON，而是您通过对象文字创建的对象。JSON 始终是数据的字符串表示形式（通常用于数据交换目的），其语法类似于 JavaScript 的对象文字语法。

# html - 溢出：在绝对位置元素旁边时可见链接不可点击

> ID：11882170
> 
> 赞同：3
> 
> 时间：2012-08-09T11:14:11.693
> 
> 标签：html, css

我有两个绝对定位的 div 元素，它们彼此相邻放置。第一个 div 元素具有`overflow: visible`长内容的链接，该链接在相邻的 div 元素之上流动。我正在尝试单击相邻 div 中的链接，但在 Chrome 和 Firefox 中没有运气。这适用于 IE9。一些代码示例将解释我正在尝试做的事情-

```
<div>
  <a href="#">Reeeeeeeeeeeeeaallllllly Looooon Liiink Teeeext</a>
</div>
<div class="two">
</div>​ 
```

和样式表：

```
div{
position: absolute;
height: 50px;
width: 80px;
border: 2px solid;
overflow: visible;
white-space: nowrap;
z-index: 1;
}
.two{
left:82px;
}
a{
z-index: 2;
} 
```

jsfiddle：http: [//jsfiddle.net/yzSwL/1/](http://jsfiddle.net/yzSwL/1/)

有什么建议么？我认为 z-index 可能会有所帮助，但没有。当鼠标悬停在第二个 div 上时，链接文本也无法选择。

提前致谢。

**更新**

实际上，我的情况比我说的要复杂，因为我没有意识到答案会去哪里。指针事件看起来是最干净的解决方案，但不幸的是我不能使用它，因为所有 div 中可能都有链接。

更真实的 jsfiddle：http: [//jsfiddle.net/yzSwL/6/](http://jsfiddle.net/yzSwL/6/)

只是为了解释我想要了解的内容-我正在制作一个带有小时网格的日程安排应用程序，其中有很多彼此相邻的定位 div。每个 div 都可以有一个链接。链接的宽度是约会的长度。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-09T11:18:41.333

您可以通过设置`pointer-events:none;`class .two来做到这一点

指针想聚焦在最上面的 div 上，但如果你告诉它不要，它会转到后面的 div。

工作小提琴：http: [//jsfiddle.net/yzSwL/2/](http://jsfiddle.net/yzSwL/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T11:22:03.367

`pointer-events`在 IE 9 及更低版本以及 Opera 中使用会出现问题。

我稍微重组了你的 HTML CSS [http://jsfiddle.net/GVL5e/](http://jsfiddle.net/GVL5e/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T11:36:15.060

此规则无效：

```
a{
z-index: 2;
} 
```

定位的不是`a`那个，而是它的父级`div`。[`z-index`仅适用于定位元素。](http://www.w3.org/TR/CSS21/visuren.html#propdef-z-index)

你应该做的是：

```
div{
    ...
    z-index: 2;
}
.two{
    ...
    z-index: 1;
} 
```

[http://jsfiddle.net/yzSwL/4/](http://jsfiddle.net/yzSwL/4/)

另请注意，即使您要添加`position: absolute`到`a`为`z-index`它工作，它*仍然*不会在`.two`. 这只会导致它定位在其定位的父元素`div`（其堆叠上下文）内的其他元素之上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T11:22:05.520

有很多解决方案，但你必须改变风格：

1.  不要强迫你的 div 有固定的宽度
2.  放`overflow:hidden;`
3.  消除`white-space: nowrap;`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T11:22:46.760

在您的代码中，您将相同的 z-index 分配给两个 DIV。

相反，尝试将较低的 z-index 分配给第二个 DIV。

 `````
div{
position: absolute;
height: 50px;
width: 80px;
border: 2px solid;
overflow: visible;
white-space: nowrap;
z-index: 10;
}
.two{
left:82px;
    z-index: 5;
} 
`````

# c# - 在 C# 中给定变量之间的表中查找最小值和最大值

> ID：11882173
> 
> 赞同：1
> 
> 时间：2012-08-09T11:14:25.097
> 
> 标签：c#, linq, entity-framework

我有以下数据库表：

```
COL-A COL-B
1     $200
2     $100
4     $50
5     $40 
```

我需要做的是，如果我有值**1.5**，我需要找到介于它之间的两个数字，所以这将是**1**和**2**。

我需要将这些值输入到我正在研究的定价计算器的线性方程中。

这些值可能并不总是相同的，所以它甚至可能是这样的：

```
COL-A COL-B
    1     $200
    6     $100
    11     $50
    22     $40 
```

如果我有**9**，我会同时返回**6**和**11**因为**9**介于这两个值之间，等等

可视化这一点，我需要将它们放入单独的变量中：

```
double Min = the_lowest_value;
double Max = the_highest_value; 
```

我正在使用 EF 来执行此操作，因此它需要在 LINQ 中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T11:23:44.323

一个需要 2 个 DB 请求的简单解决方案：

```
double the_lowest_value = Ctx.YourEntities
        .Where(z => z.ColA <= 9)
        .OrderByDesc(z => z.ColA)
        .Select(z => z.ColA)
        .First();

double the_highest_value = Ctx.YourEntities
        .Where(z => z.ColA >= 9)
        .OrderBy(z => z.ColA)
        .Select(z => z.ColA)
        .First(); 
```

请注意，如果您的值（`9`在上面的示例中）在您的表中，则两个变量将具有相同的值（`9`）。

* * *

编辑：正如 Slauma 所注意到的，`InvalidOperationException`如果指定的值小于/大于 的任何值，这将崩溃（即抛出异常）`ColA`，因为`First()`在返回的序列中至少需要一个元素。如果序列为空，您可以使用`FirstOrDefault()`它返回默认值：`double`

对于正值：

照`default(double)`原样`0.0`，该值可以`the_lowest_value`（如果指定的输入值`0.5`与您的第二个示例相同）。对于`the_highest_value`，您可以在 DB 查询之后测试它实际上是否大于或等于指定的输入值。如果不是这种情况，您将知道您指定的值大于`ColA`列的每个值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T11:43:06.830

这将在一个查询中解决它，但同样，OP 必须确保给定值介于两个现有值之间。

```
using (var context = new YourContext()) {
    var val = 15;
    var query2 = context.Table
        .GroupBy(
            x => new {
                IsGreaterThan = x.Column > val,
                IsLessThan = x.Column < val
            },
            (key, data) => new { key = key, data = data.Select(x => x.Column) }
        )
        .Select(x => x.key.IsGreaterThan ? x.data.Min() : x.data.Max())
        .ToList();
    Console.WriteLine("First value larger than {0} = {1}", val, query2[0]);
    Console.WriteLine("First value smaller than {0} = {1}", val, query2[1]);
    Console.ReadLine();
    return;
} 
```

# ios - AFNetworking：多个文件上传问题

> ID：11882176
> 
> 赞同：0
> 
> 时间：2012-08-09T11:14:39.643
> 
> 标签：ios, xcode, cocoa, networking, afnetworking

我正在开发某些应用程序的某些部分。那部分是文件上传管理器。我已经实现了一个 UploadManager 类，它是一个继承自 NSObject 并具有方法的单例：

```
- (void)addNewUploadWithFileData:(NSData *)fileData
               withThumbnailData:(NSData *)thumbnailData
                      withUserId:(int32_t)userId
                        withType:(UploadType)uploadType
                   withMediaType:(MediaType)mediaType
                    withDelegate:(id<UploadDelegate>)delegate; 
```

此方法创建新的上传对象。Upload 对象是继承自 AFHTTPClient 的 BasicUpload 类的子类之一。

所有这些实现的目的是允许多个文件上传、控制它们和其他功能。

在我添加多次上传同一文件的情况下，一切正常，所有上传都同时上传。但是在一个场景中，当我添加一些要上传的文件，然后添加一些其他较小的文件要上传时，这个较小的文件会被上传，而其他的则不会。

我检查了发生了什么，发现当我添加新的其他文件要上传时，会创建新的请求（显然），在创建之后，之前添加的所有其他上传对象都被释放（释放）。它发生在 AFHTTPClient.m 的方法中：

```
- (NSMutableURLRequest *)multipartFormRequestWithMethod:(NSString *)method
                                                   path:(NSString *)path
                                             parameters:(NSDictionary *)parameters
                              constructingBodyWithBlock:(void (^)(id <AFMultipartFormData>formData))block 
```

当它到达零件时：

```
__block AFMultipartFormData *formData = [[[AFMultipartFormData alloc] initWithURLRequest:request stringEncoding:self.stringEncoding] autorelease]; 
```

之后，所有先前的上传对象（它们是 AFHTTPClient 的子类）都被释放。

我究竟做错了什么？？？或者可能有一些错误？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T11:17:25.873

您是否考虑将所有 AFRequestOperations 添加到[NSOperationQueue](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSOperationQueue_class/Reference/Reference.html)以便保留它们？

# css - 不使用 Photoshop 进行折叠

> ID：11882178
> 
> 赞同：0
> 
> 时间：2012-08-09T11:14:59.173
> 
> 标签：css, fold

我正在尝试仅使用 CSS 进行折叠，到目前为止，这就是我所拥有的：[JsFiddle](http://jsfiddle.net/Ka736/5/)

我不确定它是否看起来像折叠，我认为它可以做得更好。我怎样才能让这看起来更好？是否有解决此问题的教程？

ps 我更改了链接，因为我只有 webkit 影子，现在它很好

# facebook - “缺少隐私政策”来自 Facebook 的电子邮件

> ID：11882179
> 
> 赞同：-4
> 
> 时间：2012-08-09T11:15:00.380
> 
> 标签：facebook

即使我已经在我的 Facebook 应用程序中链接了条款和隐私政策。我通过我的电子邮件收到了 2 条添加政策链接的警告。我已经仔细检查过，链接工作正常。

其他任何人都会收到这些电子邮件，同时添加了链接。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T11:38:00.677

我刚刚收到我们的第二个通知，还说我们没有有效的策略 URL，实际上它完全有效，可以在 Auth 页面上看到，并返回正确的内容。我已经向 Facebook 提交了一个错误，因为我认为这是由于他们的内部重定向器无法正常工作造成的，因此有效的 URL 被测试为无效。您可以在此处订阅/添加它：

[http://developers.facebook.com/bugs/345349798879609](http://developers.facebook.com/bugs/345349798879609)

# php - 表格、表单和验证 - Symfony2、Twig、Doctrine

> ID：11882180
> 
> 赞同：0
> 
> 时间：2012-08-09T11:15:05.237
> 
> 标签：php, symfony, doctrine-orm, twig

我有一些问题都已连接，所以我会在这里问所有问题：

1.  [已解决] 我有可以为空的日期字段，当我不填写它们时，它们显示为 2012-08-09 - 今天的日期，尽管当我签入数据库时​​它们为空。我在它们上面都有**@ORM\Column(type="date", nullable=true)**和**@Assert\Date**。

2.  我有表单验证**@Assert\Date**和**@Assert\NotBlank()**但我违反了这个约束，尽管我有**{{ form_errors(form) }}** ，但什么也没发生。如何显示表单到底有什么问题？

3.  [已解决] 最后一个是我在一个名为 $currency 的字段上方有 NotBlank() 约束。这就是我添加它的方式：

    ```
    $builder->add('currency', 'choice', array(
        'choices' => array(
            'empty_value' => '--- Choose ---', 'USD' => 'USD', 'HKD' => 'HKD'))); 
    ```

    但如果我没有设置任何东西（它保持 --- 选择 ---- ）它会接受它，尽管它是空的。我希望默认选择为 --- 选择 ---，但不得允许以这种方式保留它并且表单同时有效。

我会很感激你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T11:43:35.867

对于第一个问题，取自 twig 文档：

如果传递给日期过滤器的值为空，则默认返回当前日期。如果需要空字符串而不是当前日期，请使用三元运算符：

```
{{ post.published_at is empty ? "" : post.published_at|date("m/d/Y") }} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T12:07:14.610

对于第二个问题，这里有信息[Symfony2 ：How to get form validation errors after binding the request to the form](https://stackoverflow.com/questions/6978723/symfony2-how-to-get-form-validation-errors-after-binding-the-request-to-the-fo)抱歉没有早点找到它并质疑已经被质疑的东西。

# python - 如何在 matplotlib 散点图中设置/获取符号边缘的脊？

> ID：11882184
> 
> 赞同：1
> 
> 时间：2012-08-09T11:15:10.947
> 
> 标签：python, matplotlib

我尝试了以下方法：

```
import numpy as np
import matplotlib.pyplot as plt
from mpl_toolkits.mplot3d import Axes3D

carr = np.array([[0,0,0,1],[0,0,1,1],[0,1,0,1]]) # RGBA color array
ax = plt.axes(projection='3d')
h = ax.scatter([1,2,3],[1,2,3],[1,2,3], c=carr)
h.set_edgecolor(carr) ## also tried h.set_edgecolor('none')
plt.draw() 
```

但标记边缘颜色保持黑色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:47:49.727

尝试将颜色指定为`edgecolors`kwarg to `scatter`。（注意复数。）

例如

```
import numpy as np
import matplotlib.pyplot as plt
from mpl_toolkits.mplot3d import Axes3D

carr = np.array([[0,0,0,1],[0,0,1,1],[0,1,0,1]]) # RGBA color array
ax = plt.axes(projection='3d')
h = ax.scatter([1,2,3],[1,2,3],[1,2,3], c=carr, edgecolors=carr)
plt.show() 
```

![在此处输入图像描述](../Images/37ebc02fc3733e94983aa9dc4f6ba8aa.png)

# c# - 发布到 FTP 复制文件失败

> ID：11882187
> 
> 赞同：1
> 
> 时间：2012-08-09T11:15:22.037
> 
> 标签：c#, visual-studio-2010

我正在尝试通过 FTP 将 WinForms 应用程序发布到 VPS。

对于部署中的每个文件，我都会收到以下错误。

```
 Error   40  Failed to copy file '\\webserver\AthenaData\Athena\bin\Debug\app.publish\Application Files\Athena_2_4_0_0\DevExpress.XtraWizard.v11.2.dll.deploy' to 'ftp://ftp.cityworksgroup.co.uk/install/Application Files/Athena_2_4_0_0/DevExpress.XtraWizard.v11.2.dll.deploy'. Unable to add 'Application Files/Athena_2_4_0_0/DevExpress.XtraWizard.v11.2.dll.deploy' to the Web site.  The system cannot find the path specified (550).       1   1   Athena 
```

发布到本地共享工作正常。我可以很好地连接到我在单独的 FTP 应用程序中使用的 FTP 详细信息，并对 FTP 帐户应用完全权限。该应用程序正在构建良好。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:32:52.193

您是否使用其他 ftp 程序将所有要访问的文件夹和文件设置为“777”？因为这将启用对这些目录的写入、读取和完全权限。

# django - 如何让 apache 为 django 提供静态文件

> ID：11882194
> 
> 赞同：0
> 
> 时间：2012-08-09T11:15:31.343
> 
> 标签：django, apache2

我有一个使用**mod_python在我们的****apache2**生产服务器上运行的 django web 应用程序，但没有找到静态文件（css，images ...）

 **我们所有的静态东西都在`/var/my.site/example/static`

```
/var/my.site/example/static/
                           |-admin/
                                  |-css/
                                  |-img/     
                           |-css/
                           |-js/
                           |-img/ 
```

现在我想我可以将所有请求别名为我的静态内容，如下所示：

这是apache2 conf：

```
<VirtualHost  123.123.123:443>
    ... SSL stuff ...
    RewriteEngine On    
    ReWriteOptions Inherit 
    <Location "/example">
        SetHandler python-program
        PythonHandler django.core.handlers.modpython
        SetEnv DJANGO_SETTINGS_MODULE example.settings
        PythonPath "[ \
            '/home/me/Envs/ex/lib/python2.6/site-packages',\
            '/var/my.site',\
            '/home/me/Envs/ex/lib/python2.6/site-packages/django',\
            '/home/me/Envs/ex/lib/python2.6/site-packages/MySQLdb',\
            '/var/my.site/example',\
            '/var/my.site/example/static'] + sys.path"
        PythonDebug Off

    </Location>

    Alias /example/static /var/my.site/example/static    
    <Directory /var/my.site/example/static>
        Order allow,deny
        Allow from all
    </Directory>

</VirtualHost> 
```

这是我的 settings.py

```
...
STATIC_ROOT = '/var/my.site'
STATIC_URL = '/example/static/'
STATICFILES_DIRS = (
    "/var/my.site/example/static",
)
... 
```

apache-error 日志中没有错误。但是这里的日志来自 apache-secure_access.log

```
[09/Aug/2012:12:37:55 +0200] "GET /example/admin/ HTTP/1.1" 200 6694
[09/Aug/2012:12:37:55 +0200] "GET /example/static/css/base.css HTTP/1.1" 301 468
[09/Aug/2012:12:37:55 +0200] "GET /example/static/img/logo.png HTTP/1.1" 403 766
[09/Aug/2012:12:37:55 +0200] "GET /example/static/css/base.css/ HTTP/1.1" 500 756
[09/Aug/2012:12:37:55 +0200] "GET /example/static/admin/css/dashboard.css HTTP/1.1" 301 622 
```

但这不起作用，我不确定，如果我什至，是否在正确的轨道上。当我设置时它确实有效`DEBUG = True`但这只是因为 django 提供所有静态文件。

**我究竟做错了什么？**

**有谁知道一个好的教程或例子？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T16:54:38.003

尝试逐步消除问题。

加载静态文件应该完全独立于 Django。`VirtualHost`尝试在您的配置中注释掉与 Django 相关的所有行。（更改配置后记得重新加载Apache）

如果这样可行，您可能需要采取更多步骤来避免 Django 践踏同一命名空间中的 URL（可能使用`SetHandler`？）。

如果不是，则静态文件存在更基本的问题。如果您无法解决它，也许[ServerFault](https://serverfault.com/)可以提供帮助？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T07:31:16.337

在@supervacuo 建议我从 django 中删除所有内容之后，我让 apache 提供静态文件并意识到出了什么问题。

问题是`<Location "/example">`优先级高于`Alias /example/static`. `Alias`我把（上面或下面）放在哪里都没有关系`<Location> - tag`。

为了解决这个问题，我更改了`STATIC_URL`and `STATIC_ROOT`，而不是我可以更改`Alias`不干扰 `<Location> - tag`

**从：**

```
STATIC_ROOT = '/var/my.site'
STATIC_URL = '/example/static/'

Alias /example/static /var/my.site/example/static 
```

**至：**

```
STATIC_ROOT = '/var/my.site/example'
STATIC_URL = '/static/'

Alias /static /var/my.site/example/static 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T07:44:06.187

我能看到的唯一问题是：

`"GET /example/static/css/base.css/ HTTP/1.1" 500 756`

由于`/base.css/`不是有效链接；它被传递给 django；并且由于它与 URL 模式不匹配，因此会引发 500。您应该修复具有 errant 的模板`/`。**

# android - 启动 logcat 时出现意外错误。尝试重新选择设备。] EO

> ID：11882195
> 
> 赞同：3
> 
> 时间：2012-08-09T11:15:37.083
> 
> 标签：android, android-emulator

当我运行我的模拟器设备时，我得到了模拟器的输出，但我收到了以下错误：

```
java.io.IOException: EOF
    at com.android.ddmlib.AdbHelper.read(AdbHelper.java:659)
    at com.android.ddmlib.AdbHelper.read(AdbHelper.java:632)
    at com.android.ddmlib.AdbHelper.readAdbResponse(AdbHelper.java:216)
    at com.android.ddmlib.AdbHelper.executeRemoteCommand(AdbHelper.java:378)
    at com.android.ddmlib.Device.executeShellCommand(Device.java:462)
    at com.android.ddmuilib.logcat.LogCatReceiver$1.run(LogCatReceiver.java:109)
    at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T05:44:27.767

我遇到了类似的错误。我只是通过执行以下步骤让它工作：

*   在 shell 或命令提示符下运行：`adb kill-server`
*   从设备上拔下 USB 电缆，然后重新插入。
*   打开设备视图（窗口 -> 显示视图 -> 其他 -> Android -> 设备）
*   单击 android 设备视图上的设备。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-13T11:54:11.093

这只是发生在我身上，我点击了 Android Monitor 中 logcat 下的小回收站图标。现在它再次记录。

# iphone - 如何使用 performSelectorOnMainThread 发送多个对象

> ID：11882196
> 
> 赞同：5
> 
> 时间：2012-08-09T11:15:39.627
> 
> 标签：iphone, ios5, selector

我有两个对象，一个是 NSData，另一个是 NSString。我想用`perfomSelectorOnMainThread`. 我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-09T11:28:43.600

如果您使用的是 XCode 4.4 及更高版本，您可以简单地执行以下操作：

```
[self performSelectorOnMainThread:@selector(myMethod:) withObject:@[objectA,objectB] waitUntilDone:NO]; 
```

如果您的 XCode 版本较旧，则使用 4.4

```
[self performSelectorOnMainThread:@selector(myMethod:) withObject:[NSArray arrayWithObjects:objectA, objectB, nil] waitUntilDone:NO]; 
```

这是您的选择器方法：

```
-(void)myMethod:(NSArray*)array{

   ObjectA *objA = [array objectAtIndex:0];
   ObjectB *objB = [array objectAtIndex:1];

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T11:27:38.767

您可以使用以下代码：

```
[self performSelector:@selector(yourSelectorMethod) withObject:[NSMutableArray arrayWithObjects:@"object1",@"object2", nil]]; 
```

# php - 在浏览器中强制“草稿”渲染

> ID：11882200
> 
> 赞同：0
> 
> 时间：2012-08-09T11:16:00.820
> 
> 标签：php, html, http, browser, rendering

是否可以强制网络浏览器降低渲染质量以提高速度？我想展示大的 html 结构（`document.getElementsByTagName("*").length`返回 661844 个元素）。

目前该网站需要大约 2.8 秒来加载内容（~13MB，但 gzip 压缩），但 DOMContentLoaded 事件在启动后大约 46 秒触发 - 这太长了。在按下“开始按钮”和 DOMContentLoaded 事件之间，浏览器没有响应，因此我想减少时间。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:25:43.013

没有“草稿”渲染之类的东西，但是有一些方法可以防止浏览器锁定：[防止长时间运行的 JavaScript 锁定浏览器](https://stackoverflow.com/questions/672732/prevent-long-running-javascript-from-locking-up-browser)

# javascript - 漂亮的 HTML 滑块

> ID：11882202
> 
> 赞同：-4
> 
> 时间：2012-08-09T11:16:04.593
> 
> 标签：javascript, jquery, html

我需要一个类似于[HP 页面](http://www.hp.com/)中的滑块。
有没有类似的脚本。我做了一些事情，但 jquery-1.7.2.min 但有点太简单了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T11:18:47.790

jQuery 自己的滑块怎么样：[Slider](http://www.designyourway.net/blog/resources/28-useful-jquery-sliders-you-need-to-download/)
应用于这样的元素`$("#slider").slider();`

或者这些滑块中的任何一个：[28 个有用的滑块](http://www.designyourway.net/blog/resources/28-useful-jquery-sliders-you-need-to-download/)

# c# - 如果我使用 MemoryStream 存储半 GB 的数据块然后丢弃它，它会有什么长期影响？

> ID：11882206
> 
> 赞同：6
> 
> 时间：2012-08-09T11:16:13.273
> 
> 标签：c#, .net, memory-management, large-object-heap

在我的 Azure 角色中，我想在 64 位进程中运行 C# 代码，我想下载一个 ZIP 文件并尽快解压缩它。我想我可以执行以下操作：创建一个`MemoryStream`实例，下载到该实例，`MemoryStream`然后将流传递到某个 ZIP 处理库进行解包，一旦解包完成，丢弃流。这样我就可以摆脱不必要地执行大量 I/O 的写-读-写序列。

但是我读过它[`MemoryStream`是由一个数组支持的](https://stackoverflow.com/a/1511671/57428)，半 GB 的数组肯定会被认为是一个“大对象”，并将分配[在一个不会在垃圾收集上压缩的大对象堆中](https://stackoverflow.com/a/8953503/57428)。这让我担心，也许这种使用`MemoryStream`会导致进程内存碎片化和负面的长期影响。

这可能会对我的流程产生任何长期的负面影响吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:35:23.663

答案在您链接到的问题的已接受答案中。感谢提供参考。

> 真正的问题是假设应该允许程序随时消耗所有虚拟内存。仅通过在 64 位操作系统上运行代码即可完全消失的问题。

我会说，如果这是一个 64 位进程，您无需担心。

创建的空洞只会导致 LOH 的虚拟地址空间产生碎片。这里的碎片化对你来说不是什么大问题。在 64 位进程中，由于碎片而浪费的任何整个页面都将变得未使用，并且它们被映射到的物理内存再次变得可用于映射新页面。很少有部分页面会被浪费，因为这些分配很大。并且引用的局部性（碎片整理的另一个优点）大部分都被保留了，同样因为这些是大分配。

# php - php preg_split，“没有重复”错误

> ID：11882210
> 
> 赞同：1
> 
> 时间：2012-08-09T11:16:19.820
> 
> 标签：php, regex, split, preg-split

我需要用多个可能的分隔符分割字符串

```
$output = preg_split( "/(\^|+)/", "54654561^uo_sgzg@zrgher.com" ); 
```

->（“54654561”，“uo_sgzg@zrgher.com”）

```
$output = preg_split( "/(\^|+)/", "54654561+ghkkgzg@zrgher.com" ); 
```

-> ("54654561", "ghkkgzg@zrgher.com")

但是这个正则表达式`"/(\^|+)/"`失败了：`PHP Warning: preg_split(): Compilation failed: nothing to repeat at offset 3`出于某种原因，但是它基于这个答案[Php multiple delimiters in explode](https://stackoverflow.com/questions/4955433/php-multiple-delimiters-in-explode)

这个正在工作`$output = preg_split("/[\^|+]/", "54654561^MYMED_sgzg@zrgher.com" );`是用多个分隔符分割的正确方法吗？

**编辑**：对不起，我刚刚意识到它是这样工作的`$output = preg_split("/(\^|\+)/", "54654561^MYMED_sgzg@zrgher.com" );`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T11:32:19.587

如果您要匹配的是单个字符，我实际上会选择该`[\^\+]`选项。

演示：http: [//ideone.com/ftXSS](http://ideone.com/ftXSS)

该`[]`语法称为字符类或字符集，它专门用于执行您需要的操作。

> “字符类”只匹配几个字符中的一个。要匹配 an`a`或 an `e`，请使用`[ae]`. 您可以使用它`gr[ae]y`来匹配`gray`或`grey`。

[http://www.regular-expressions.info/quickstart.html](http://www.regular-expressions.info/quickstart.html)

# sql - 按不在 Oracle 子查询中工作的顺序

> ID：11882214
> 
> 赞同：2
> 
> 时间：2012-08-09T11:17:05.363
> 
> 标签：sql, oracle

我正在尝试从今天的日期开始从表中返回 7 个事件，并将它们按日期顺序排列：

```
SELECT ID
FROM table
 where ID in (select ID from table
where DATEFIELD >= trunc(sysdate)
order by DATEFIELD ASC)
and rownum <= 7 
```

如果我删除了“order by”，它会很好地返回 ID，并且查询可以正常工作，但它的顺序不正确。将不胜感激任何帮助，因为我似乎无法弄清楚我做错了什么！

（编辑）为澄清起见，我之前使用过这个，返回的订单真的很糟糕：

```
select ID
from TABLE
where DATEFIELD >= trunc(sysdate)
and rownum <= 7
order by DATEFIELD 
```

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-09T11:22:41.680

`ROWNUM`“函数”的值在处理 ORDER BY*之前应用。*这就是为什么它不能按照您使用的方式工作（有关类似说明，[请参阅手册）](http://docs.oracle.com/cd/E11882_01/server.112/e26088/pseudocolumns009.htm#i1006297)

当使用限制查询`ROWNUM`并涉及 ORDER BY 时，必须在内部选择中进行排序，并且必须在外部选择中应用限制：

```
select *
from (
  select *
  from table
  where datefield >= trunc(sysdate)
  order by datefield ASC
)
where rownum <= 7 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T11:31:39.323

1.  您不能`order by`在`where id in (select id from ...)`子查询中使用。反正也没有意义。此条件仅检查是否`id`在子查询中。如果它影响输出的顺序，那只是偶然的。不同的数据查询执行计划可能不同，输出顺序也会不同。`order by`在主查询末尾使用显式。

2.  众所周知，Oracle 的“功能”`rownum`与`order by`. 有关详细信息，请参阅[http://www.adp-gmbh.ch/ora/sql/examples/first_rows.html](http://www.adp-gmbh.ch/ora/sql/examples/first_rows.html)。在你的情况下，你应该使用类似的东西：

    ```
    SELECT ID
    FROM (select ID, row_number() over (order by DATEFIELD ) r
        from table
        where DATEFIELD >= trunc(sysdate))
    WHERE r <= 7 
    ```

* * *

也可以看看：

*   [http://www.orafaq.com/faq/how_does_one_select_the_top_n_rows_from_a_table](http://www.orafaq.com/faq/how_does_one_select_the_top_n_rows_from_a_table)
*   [http://www.oracle.com/technetwork/issue-archive/2006/06-sep/o56asktom-086197.html](http://www.oracle.com/technetwork/issue-archive/2006/06-sep/o56asktom-086197.html)
*   [http://asktom.oracle.com/pls/asktom/f?p=100:11:507524690399301::::P11_QUESTION_ID:127412348064](http://asktom.oracle.com/pls/asktom/f?p=100:11:507524690399301::::P11_QUESTION_ID:127412348064)

另请参阅关于 SO 的其他类似问题，例如：

*   [Oracle SELECT TOP 10 记录](https://stackoverflow.com/questions/2498035/oracle-select-top-10-records)
*   [Oracle/SQL - 选择指定范围的连续记录](https://stackoverflow.com/questions/4858774/oracle-sql-select-specified-range-of-sequential-records)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T11:28:13.340

您的外部查询无法“看到”内部查询中的 ORDER，在这种情况下，内部查询中的顺序没有意义，因为它（内部）仅用于创建将在 WHERE 上使用的数据子集外部的，所以这个子集的顺序无关紧要。

也许如果你能更好地解释你想做什么，我们可以帮助你

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-02T20:29:54.340

**ORDER BY CLAUSE IN Subqueries**：子查询中不允许使用 order by 子句，内联视图除外。如果尝试包含 ORDER BY 子句，您会收到错误消息

内联视图是对 from 子句的查询。

`SELECT t.* FROM (SELECT id, name FROM student) t`

# android - Android谷歌地图Kml解析不起作用

> ID：11882216
> 
> 赞同：1
> 
> 时间：2012-08-09T11:17:10.007
> 
> 标签：android, google-maps, kml

我正在使用 Google KML 文件并对其进行解析以获取 Google 地图上的路径。

一切正常。但突然它停止工作。

我在某处读到谷歌已停止为 KML 提供服务。

只是想知道其他人知道这个事实吗？

如果谷歌真的停止了对 KML 文件的服务，而 xml 或 Json 是唯一的选择？

其次，如果是，那么任何人都可以建议我如何将我的代码从 kml 移动到 xml 或 json

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T13:48:43.390

我将尝试按照您发布问题的相同顺序回答：

*   是的，没错，不再支持 KML。
*   XML 和 JSON 是[Google Directions API](https://developers.google.com/maps/documentation/directions/#DirectionsResponses)支持的两个选项，（不确定是否有更多选项）。
*   有关如何从 KML 迁移到 XML 或 JSON 的**代码示例**，您可能需要阅读[本主题](https://stackoverflow.com/questions/11323500/google-maps-api-version-difference)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T11:54:48.737

KML 目前正在工作，但它的限制是 kml 、 json 、 xml。每天 1000 次使用 kml getdata。您每天只能使用 kml 并获取数据 1000 次..我的问题在于代码

Google 仍然支持 KML，获取 KML 轨迹或路线，像往常一样使用驾驶说明，然后保存到我的位置。然后，您可以节省行程。您的行程旁边有一个小的 KML 标签，可让您下载 KML 中的路线。

# progress-4gl - ABL 插入和显示表格数据

> ID：11882225
> 
> 赞同：1
> 
> 时间：2012-08-09T11:17:39.523
> 
> 标签：progress-4gl, openedge

我很抱歉这是一个非常简单的问题，但作为 ABL 开放边缘的第一次用户并且我被卡住了。我已经将值输入到这样的表中

```
METHOD PRIVATE VOID POPULATETABLE ( ):
    DEFINE VARIABLE I AS INTEGER. 
    DO I = 0 TO 100:
    CREATE TEST.

    ASSIGN TEST.CUSTOMER_NAME="SMITH"
    TEST.ORDER_NUMBER=I  
    TEST.ORDER="BOOKS" 
    TEST.COST=45.00  
    TEST.CUSTOMER_NAME = "JACKSON" 
    TEST.ORDER_NUMBER=I 
    TEST.ORDER="PAPER CLIPS"  
    TEST.COST=1.7\. 
    ASSIGN TEST.CUSTOMER_NAME="JONES"  
    TEST.ORDER_NUMBER =I 
    TEST.ORDER="PENCILS"
    TEST.COST=2.50
    TEST.CUSTOMER_NAME = "TURNER"
    TEST.ORDER_NUMBER = I  
    TEST.ORDER="PENS"
    TEST.COST=0.7\. 
    END.
    END METHOD. 
```

我正在尝试使用它来显示它们

```
 FOR EACH TEST:   
        DISPLAY TEST.COST TEST.CUSTOMER_NAME TEST.ORDER TEST.ORDER_NUMBER.
        RETURN.
END. 
```

然而，结果只显示输入的最后一行数据。谁能帮忙，我什至不确定显示功能是否正确或分配是否正确。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T12:58:44.153

FOR EACH 中的“返回”导致代码在第一条记录后离开循环。删除该语句，您将看到所有记录。

```
FOR EACH TEST:
DISPLAY TEST.COST 
        TEST.CUSTOMER_NAME 
        TEST.ORDER 
        TEST.ORDER_NUMBER. 
RETURN.   /* this is why you're only seeing one record -  */
          /* get rid of this and you'll see all the records */
END. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T12:13:26.573

我会避免将订单编号指定为 0。这只是为了让人们感到困惑。

```
define variable i as integer no-undo.

do i = 1 to 100:

  create test.

  assign
    test.order_number = i
    test.customer     = "smith"             /* you need some way to get   */
    test.order        = "books"             /* actual data for the rest   */
    test.cost         = random( 10, 100)    /* of the fields...           */
  .

end. 
```

然后通过以下方式查看订单：

```
for each test no-lock:
  display test.
end. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T09:14:38.337

是的，我所需要的只是为每条记录的每个分配创建一个声明，并且有效。谢谢大家，工作代码如下：

```
 CREATE TEST.

ASSIGN TEST.CUSTOMER_NAME="SMITH"
TEST.ORDER_NUMBER=I  
TEST.ORDER="BOOKS" 
TEST.COST=45.00\.  
CREATE TEST.
ASSIGN  TEST.CUSTOMER_NAME = "TAYLOR" 
TEST.ORDER_NUMBER=I 
TEST.ORDER="PAPER CLIPS"  
TEST.COST=1.7.
CREATE TEST.
ASSIGN TEST.CUSTOMER_NAME="THOMPSON"  
TEST.ORDER_NUMBER =I 
TEST.ORDER="PENCILS"
TEST.COST=2.50.
CREATE TEST.
ASSIGN TEST.CUSTOMER_NAME = "TURNER"
TEST.ORDER_NUMBER = 2 
TEST.ORDER="PENS"
TEST.COST=0.7\. 
```

对于 TEST.COST > 1.3 BY TEST.ORDER_NUMBER 的每个测试：显示测试。结尾。

# ejabberd - 如何在 ejabberd 中从自己的名册中添加/删除用户

> ID：11882228
> 
> 赞同：2
> 
> 时间：2012-08-09T11:17:58.940
> 
> 标签：ejabberd

我希望能够在不使用 xmpp 节的情况下处理用户名册（添加/删除好友），但使用 erlang 自己的 erlang 函数（或 ejabberd 函数）。

用例：我想添加`user2@myhost`到`user1@myhost`的名册：

是否可以执行以下操作：

```
User1 = "user1@myhost",
User2 = "user2@myhost",
mymodule:add_user_to_roster(User1, User2) 
```

如果是这样，我该如何实现该功能`add_user_to_roster(User1, User2)`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T06:38:43.377

您可以使用诸如 libstrophe 之类的库来实现该功能。但它确实

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-09T18:17:30.533

您可以使用 mod_roster 功能，特别是[https://www.process-one.net/docs/ejabberd/devdoc/trunk/mod_roster.erl.html#process_subscription-6](https://www.process-one.net/docs/ejabberd/devdoc/trunk/mod_roster.erl.html#process_subscription-6)

# windows - 如何使用 Win Vista 的任务计划程序在进入睡眠状态时触发操作

> ID：11882234
> 
> 赞同：1
> 
> 时间：2012-08-09T11:18:12.700
> 
> 标签：windows, scheduled-tasks, task, sleep, scheduler

我需要在睡觉前杀死一个程序。我创建了杀死进程的 .bat 文件，我想用任务计划程序触发它。我找到了论坛，家伙以某种方式实现了它。不幸的是，我找不到这样的触发器。这样的事情可能吗？

编辑：我已经能够设置它（在工作区锁定上）。问题是它在登录时被调用（为时已晚）。任务没有在睡觉前完成或在连接到互联网之前出发（这是我需要的）

# java - 为什么Java中相同的整数值具有不同的内存地址？

> ID：11882235
> 
> 赞同：5
> 
> 时间：2012-08-09T11:18:20.637
> 
> 标签：java, memory

今天是我第一次尝试Java语言。当我尝试这段代码时，我感到很奇怪：

```
int a =500;
System.out.println(System.identityHashCode(500));
System.out.println(System.identityHashCode(500));
System.out.println(System.identityHashCode(a));
System.out.println(System.identityHashCode(a)); 
```

所有这些结果都是不同的。但是当我将 500 更改为 50 时，它变成了相同的结果。

为什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-09T11:21:17.150

> 但是当我将 500 更改为 50 时，它变成了相同的结果。

自动装箱缓存原语到对象的转换。较小的值获得相同的对象，较大的值不会。

注意：虽然始终缓存 -128 和 127 之间的值，但可以缓存更高的值，具体取决于命令行设置。`Integer`有关更多详细信息，请参阅源代码。

这也称为[享元模式](http://en.wikipedia.org/wiki/Flyweight_pattern)

* * *

您可以设置整数缓存的最大大小

```
-Djava.lang.Integer.IntegerCache.high=NNNN
-XX:AutoBoxCacheMax=NNNN
-XX:+AggressiveOpts  // sets it higher depending on the version e.g. 10000 
```

[http://martykopka.blogspot.co.uk/2010/07/all-about-java-integer-cache.html](http://martykopka.blogspot.co.uk/2010/07/all-about-java-integer-cache.html)

[http://www.javaspecialists.eu/archive/Issue191.html](http://www.javaspecialists.eu/archive/Issue191.html)

> 我觉得很奇怪

我知道你读这个问题的意思。;)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T11:20:21.423

它缓存`int`值 -128 和 127（含），因此它将引用该范围内内存中的相同实例

当您将原始值传递给（此处`10`）

```
System.identityHashCode(10); 
```

它将它自动装箱为`Integer`对象，然后使用[`valueOf()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#valueOf%28java.lang.String%29)Integer 类的方法进行转换

**例如**

```
Integer a = 10; 
```

将转换为它使用的内部[`valueOf()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#valueOf%28java.lang.String%29)

```
1:   invokestatic    #2; //Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer; 
```

[`Integer.valueOf()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#valueOf%28java.lang.String%29)有缓存实现

```
public static Integer valueOf(int i) {
    if(i >= -128 && i <= IntegerCache.high)
        return IntegerCache.cache[i + 128];
    else
        return new Integer(i);
} 
```

因此，如果您将值从 -128 传递到 127（含），它将使用缓存版本，如您所见

```
 if(i >= -128 && i <= IntegerCache.high)
        return IntegerCache.cache[i + 128]; 
```

* * *

**也可以看看**

*   [整数包装类和 == 运算符 - 在哪里指定行为？](https://stackoverflow.com/questions/5581913/integer-wrapper-class-and-operator-where-is-behavior-specified)

# node.js - JSHTML 不适用于 Node.js 中的 Express.js

> ID：11882236
> 
> 赞同：3
> 
> 时间：2012-08-09T11:18:22.800
> 
> 标签：node.js, express

我似乎没有让 JSHTML 在 Node.js 中的 Express.js 上作为模板引擎工作。当我安装我的 Express.js 应用程序并为我创建了一个基本应用程序并运行它时，我收到以下错误消息：

```
500 TypeError: Property 'engine' of object #<View> is not a function
at View.render (/Users/blackbook/nodejs/ds/node_modules/express/lib/view.js:75:8)
at Function.app.render (/Users/blackbook/nodejs/ds/node_modules/express/lib/application.js:504:10)
at ServerResponse.res.render (/Users/blackbook/nodejs/ds/node_modules/express/lib/response.js:677:7)
at exports.index (/Users/blackbook/nodejs/ds/routes/index.js:7:7)
at callbacks (/Users/blackbook/nodejs/ds/node_modules/express/lib/router/index.js:165:11)
at param (/Users/blackbook/nodejs/ds/node_modules/express/lib/router/index.js:139:11)
at pass (/Users/blackbook/nodejs/ds/node_modules/express/lib/router/index.js:146:5)
at Router._dispatch (/Users/blackbook/nodejs/ds/node_modules/express/lib/router/index.js:173:5)
at Object.router (/Users/blackbook/nodejs/ds/node_modules/express/lib/router/index.js:33:10)
at next (/Users/blackbook/nodejs/ds/node_modules/express/node_modules/connect/lib/proto.js:190:15) 
```

我的 app.js 看起来像这样（这是 Express.js 为我创建的）：

```
/**
 * Module dependencies.
 */

var express = require('express')
  , routes = require('./routes')
  , http = require('http')
  , path = require('path');

var app = express();

app.configure(function(){
  app.set('port', process.env.PORT || 3000);
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jshtml');
  app.use(express.favicon());
  app.use(express.logger('dev'));
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(app.router);
  app.use(express.static(path.join(__dirname, 'public')));
});

app.configure('development', function(){
  app.use(express.errorHandler());
});

app.get('/', routes.index);

http.createServer(app).listen(app.get('port'), function(){
  console.log("Express server listening on port " + app.get('port'));
}); 
```

我有这个安装：

*   Node.js v.0.8.5
*   Express.js@3.0.0rc2
*   jshtml@0.2.3

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T07:48:55.510

JSHTML 目前与 Express.js 2 一起使用。计划让引擎与 Express.js 3 一起使用，但目前我忙于享受夏天！期待在冬天解决这个问题！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T14:45:29.413

根据[https://github.com/visionmedia/express/wiki/Migrating-from-2.x-to-3.x](https://github.com/visionmedia/express/wiki/Migrating-from-2.x-to-3.x)您可以使用 app.engine 来实现 2-x 兼容性。

例如

```
var fs = require("fs");
var jshtml = require("jshtml");
app.engine("jshtml", function (path, options, fn) {
    fs.readFile(path, 'utf8', function (err, str) {
        if (err) return fn(err);
        str = jshtml.compile(str,options)(options).toString();
        fn(null, str);
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T15:06:47.087

consolidate.js 被用作许多模板引擎和 express 之间的桥梁。如果您的引擎不受支持，请查看源代码。大多数引擎需要大约 15 行代码来实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-13T20:21:57.723

我让它在我的项目中工作，可能很快就会发出拉取请求，但现在看看我在 [https://github.com/elmerbulthuis/jshtml/issues/5中的评论](https://github.com/elmerbulthuis/jshtml/issues/5)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-17T04:44:23.903

试试下面的。它对我有用，就像你一样。

首先，通过 npm 安装 jshtml-express，然后执行以下操作。

```
var app = express();
**app.engine('jshtml', require('jshtml-express'));**

// All environments
app.set('port', process.env.PORT || 3000);
app.set('views', __dirname + '/views');
app.set('view engine', 'jshtml');
app.use(express.favicon());
app.use(express.logger('dev'));
app.use(express.bodyParser());
app.use(express.methodOverride());
app.use(app.router);
app.use(express.static(path.join(__dirname, 'public'))); 
```

我希望它也对你有用。

# asp.net - 如何打开消息框

> ID：11882246
> 
> 赞同：-4
> 
> 时间：2012-08-09T11:18:56.857
> 
> 标签：asp.net, asp.net-3.5

我在写代码：

```
string query = "Select * from AdminLogin where username='" + name + 
               "' and password='" +   password + "'";

DataSet ds = BusinessLogic.returnDataSet(query);
foreach (DataRow dr in ds.Tables[0].Rows)
{
    if (dr[0].ToString() == name && dr[1].ToString() == password)
    {
      Response.Redirect("~/Home.aspx");
    }
    else
    {
      //Here I want to write the code that will open a message box 
      //that will tell to user that username and password does not match.
     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:24:09.403

通过消息框，我假设您的意思是 javascript 警报。我不喜欢使用 javascript 函数回帖。我认为它很混乱，并且只应在处理客户端操作时使用 javascript。

我实际上建议为此使用占位符和文字控件。您的网络表单中可能包含以下内容：

```
<asp:placeholder id="phLoginFailed" runat="server" visible="false">
     <div class="loginfailed">
        Login failed
     </div>
</asp:placeholder> 
```

这个占位符的样式可以像弹出窗口一样，或者使用 CSS 显示在您的页面中。

然后将您的 C# 更改为：

```
else
{
    phLoginFailed.Visible = true;
} 
```

* * *

此外，值得一提的是，您的 SQL 查询很容易发生[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)。您应该使用[参数化查询](http://www.codinghorror.com/blog/2005/04/give-me-parameterized-sql-or-give-me-death.html)。

出于安全目的，您应该在将密码存储在数据库中时对其进行加密。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T11:24:59.177

这并不像听起来那么容易。基本上，您有两种选择：

*   将一些 JavaScript 发送到调用 JavaScript方法的客户端（例如，使用[RegisterClientScriptBlock ）。](http://msdn.microsoft.com/en-us/library/system.web.ui.clientscriptmanager.registerclientscriptblock.aspx)`alert(...);`

*   或者，使用“看起来像”弹出窗口的 ASP.NET 组件。一个示例是 ASP.NET Ajax Control Toolkit 中的[ModalPopup 组件](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/ModalPopup/ModalPopup.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T11:25:26.533

只需在您想要显示消息的地方写下这一行

```
this.Page.RegisterClientScriptBlock(Page.GetType(),"key", "alert('Wrong username or password')",true); 
```

**编辑代码**

```
 if (dr[0].ToString() == name && dr[1].ToString() == password)
     {
       Response.Redirect("~/Home.aspx");
     }
     else
     {
         this.Page.RegisterClientScriptBlock(Page.GetType(),"key", "alert('Wrong username or password')",true);

       //Here I want to write the code that will open a message box
        //that will tell to user that username and password does not match.
      } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T11:29:13.337

```
ClientScript.RegisterClientScriptBlock(Page.GetType(),"key", "alert('Wrong username or password')", true); 
```

或者如果它在页面范围之外使用，那么

```
 Page page = (HttpContext.Current.Handler as Page);
        if (page!=null)
        {
            page.ClientScript.RegisterClientScriptBlock(Page.GetType(), "key", "alert('Wrong username or password')", true);
        } 
```

# interface-builder - 使用界面生成器 Xcode 4

> ID：11882247
> 
> 赞同：0
> 
> 时间：2012-08-09T11:19:06.420
> 
> 标签：interface-builder, xcode4.2

使用界面构建器时，如果我选择布局中的按钮，界面构建器会立即放大该按钮。

有什么办法可以阻止这种行为。

即我希望界面生成器只选择按钮而不放大。

XCode 4.2 雪豹

后记。我认为答案是“你不能”。另一个建议是指制作缩放快捷方式，但这似乎也有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T13:15:32.673

回答我自己的问题。24 小时后，我认为答案是“你不能”。

在 StackOverFlow 中研究时发现的另一个建议是制作缩放快捷方式，但这似乎也有帮助。

# mysql - 无法在联接中正确组合 Group by 和 Order by

> ID：11882249
> 
> 赞同：0
> 
> 时间：2012-08-09T11:19:10.660
> 
> 标签：mysql

我有一个消息表 -

```
msg
_____
id                  int(11)
subject             varchar(255)
content             text
create_time         datetime
parent              int(11) 
```

*   `parent``msg`是表本身的外键。
*   `parent`只能引用已`parent`设置为的行，即*对话*`NULL`内的所有回复都有一个父级：对话的第一条消息。

 *我希望能够按 的降序选择**父**`create_time`邮件，同时考虑到`create_time`他们的回复，例如 Gmail 中分组对话的顺序。我还想加入对每位家长的最新回复（如果存在）。

我无法想出正确的 SQL。这是我到目前为止所做的 -

```
SELECT * FROM `msg` `parent`
LEFT JOIN `msg` `reply`
ON `reply`.`parent` = `parent`.`id`
WHERE `parent`.`parent` IS NULL
GROUP BY `parent`.`id`
ORDER BY `reply`.`create_time` DESC 
```

两个直接的问题是 -

1.  父创建时间不包含在该`ORDER BY`子句中。
2.  这不是给我最近对父母的答复。

我很感激朝正确的方向戳。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T04:51:08.047

这对我有用 -

```
SELECT  `parent`.`id` AS `pId`
    ,   `parent`.`create_time` AS `pTime`
    ,   `parent`.`subject`
    ,   `parent`.`content` AS `pContent`
    ,   `reply`.`id` AS `rId`
    ,   `reply`.`create_time` AS `rTime`
    ,   `reply`.`content` AS `rContent`
    ,   IF(`reply`.`create_time` IS NULL, `parent`.`create_time`, `reply`.`create_time`) AS `max_time`
FROM    `msg` `parent`
        LEFT JOIN
        `msg` `reply`
        ON `reply`.`parent` = `parent`.`id`
WHERE   `parent`.`parent` IS NULL
ORDER BY `max_time` DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T11:24:25.910

```
ORDER BY `reply`.`create_time` DESC, `parent`.`create_time` DESC 
```*

# visual-studio-2010 - 在 XP 中安装 Microsoft Visual Studio 失败

> ID：11882250
> 
> 赞同：0
> 
> 时间：2012-08-09T11:19:13.383
> 
> 标签：visual-studio-2010

尽管安装了 Microsoft windows xp service pack 3（从 SP-2 升级），但 Visual Studio 的安装并不成功！

日志说

存在阻塞组件，必须满足才能继续安装 [01/02/07,10:41:18] VS 场景：[2] 需要 Windows XP Service Pack 3 [01/02/07,10:41:19] VS 场景：[2] 阻塞组件列表结束 * [

可能是什么问题？：

# xslt - 输入参数可以转换成xml结构吗？

> ID：11882252
> 
> 赞同：1
> 
> 时间：2012-08-09T11:19:15.403
> 
> 标签：xslt, xslt-1.0

我需要将输入参数字符串（如“1-410000 54-420987 63-32000”）转换为 xslt 内部的结构（如下所示），以便稍后在 xslt 中使用其数据：

```
<config:categories>
  <category>
    <value>410000</value>
    <label>1</label>
  </category>
  <category>
    <value>420987</value>
    <label>54</label>
  </category>
  <category>
    <value>32000</value>
    <label>63</label>
  </category>
</config:categories> 
```

PS是否有任何其他选项来解析字符串，如“1-410000 54-420987 63-32000”，以便在输入文档中找到左侧部分时，使用 xslt 中的数据提取右侧部分（在“-”之后） ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T12:27:12.250

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:config="some:config" exclude-result-prefixes="config">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:param name="pData" select="'1-410000 54-420987 63-32000'"/>

 <xsl:template match="/*">
     <config:categories>
       <xsl:call-template name="gen"/>
     </config:categories>
 </xsl:template>

 <xsl:template name="gen">
  <xsl:param name="pGen" select="$pData"/>

  <xsl:if test="$pGen">
   <xsl:variable name="vChunk" select=
    "substring-before(concat($pGen, ' '), ' ')"/>
      <category>
        <value><xsl:value-of select="substring-after($vChunk,'-')"/></value>
        <label><xsl:value-of select="substring-before($vChunk,'-')"/></label>
      </category>
      <xsl:call-template name="gen">
       <xsl:with-param name="pGen" select="substring-after($pGen, ' ')"/>
      </xsl:call-template>
  </xsl:if>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于任何 XML 文档（未使用）时，会产生所需的正确结果**：

```
<config:categories xmlns:config="some:config">
   <category>
      <value>410000</value>
      <label>1</label>
   </category>
   <category>
      <value>420987</value>
      <label>54</label>
   </category>
   <category>
      <value>32000</value>
      <label>63</label>
   </category>
</config:categories> 
```

**说明**：

正确使用**[`substring-before()`](http://www.w3.org/TR/xpath/#function-substring-before)**和**[`substring-after()`](http://www.w3.org/TR/xpath/#function-substring-after)**加上递归。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T14:54:47.470

正如 Dimitre 所示，在 XSLT 1.0 中解析字符串非常麻烦。这是 XSLT 2.0 更胜一筹的领域。可以这样做：

```
<categories>
  <xsl:for-each select="tokenize($param, '\s+')">
    <category>
      <label><xsl:value-of select="substring-after(., '-')"/></label>
      <value><xsl:value-of select="substring-before(., '-')"/></value>
    </category>
  </xsl:for-each>
</categories> 
```

当然，在 XSLT 2.0 中，您可以将类别结构用作一流的节点值，而无需使用 node-set() 扩展来进入它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T11:58:10.363

从字符串生成 XML 我认为你必须使用 Java。我不知道实现这一点的 XSLT 功能。

对于您的第二个问题：有 substring()、string-length()、substring-before() 和 substring-after() 可能有助于您的请求。请参考：[http ://www.w3schools.com/xpath/xpath_functions.asp](http://www.w3schools.com/xpath/xpath_functions.asp)

# php - 包含日期php的打印数组

> ID：11882254
> 
> 赞同：0
> 
> 时间：2012-08-09T11:19:25.387
> 
> 标签：php, mysql, date

听起来不像我相信的那么简单，但我有以下内容并尝试从提供的日期打印月份名称。

```
public function convertEngDateToAr($engDate)
    {
        //SELECT MONTHNAME('2009-05-18');
        $connectionInstance = new ConnectionClass();
        $connection = $connectionInstance->connectToDatabase();
        $monthResult = $connection->query("SELECT MONTHNAME('$engDate')");
        //echo "Month: " . $monthResult;
        while($row = $monthResult->fetch_assoc())
        {
            print_r($row);
        }

    } 
```

以上为我提供了以下输出：

> 数组（ [MONTHNAME('2012-08-21')] => 八月）

如何将 August 单独从数组中取出并将其存储在变量中？这里唯一奇怪的是数组中的索引很奇怪。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T11:20:44.873

尝试更改`SELECT MONTHNAME('$engDate')"`为`SELECT MONTHNAME('$engDate') as monthName"`

然后你应该看到：

```
Array ( monthName => August ) 
```

然后你可以使用：

```
 while($row = $monthResult->fetch_assoc())
    {
        $myMonth=$row['monthName'];
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T11:24:19.767

您可以使用`SELECT MONTHNAME(xxxx) AS monthName`也可以返回索引数组而不是关联数组：

```
while($row = $monthResult->fetch_row())
  echo $row[0] . "\n"; 
```

# node.js - Derbyjs：如何使用无浏览器 socket.io-client 连接到它

> ID：11882263
> 
> 赞同：1
> 
> 时间：2012-08-09T11:19:44.577
> 
> 标签：node.js, express, socket.io, derbyjs

**步：**

1.  启动一个德比应用程序
2.  编写一个独立的节点客户端应用程序，设置 socket.io-client ，连接到 derby 商店的套接字

**问题：**

1.  客户端不在浏览器上运行，所以没有会话，能否通过 Racer 的 socket 授权？

2.  如何编写可以侦听来自客户端的消息的 Dery 服务，然后将其放入 derby 存储/模型中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T11:31:48.393

您可以通过在 /server/index.js 中进行以下操作来回退到 ajax

```
require('derby/node_modules/racer').io.set('transports', ['xhr-polling']); 
```

结帐[示例](https://github.com/lefnire/habitrpg/blob/master/src/server/index.coffee#L13)

# objective-c - 在ios中连接两个视频

> ID：11882276
> 
> 赞同：4
> 
> 时间：2012-08-09T11:20:38.320
> 
> 标签：objective-c, ios, xcode, avfoundation

我正在尝试合并两个视频，但它总是抛出这个异常：

> `-[NSURL tracksWithMediaType:]: unrecognized selector sent to instance 0x935cf10`
> 
> `2012-08-09 16:26:59.492 videoTest[3920:17903] Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[NSURL tracksWithMediaType:]:`

这是代码：

```
AVMutableComposition *mixComposition = [AVMutableComposition composition];
AVMutableCompositionTrack *compositionTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeVideo preferredTrackID:kCMPersistentTrackID_Invalid];
NSError * error = nil;
NSMutableArray * timeRanges = [NSMutableArray arrayWithCapacity:videoClipPaths.count];
NSMutableArray * tracks = [NSMutableArray arrayWithCapacity:videoClipPaths.count];
for (int i=0; i<[videoClipPaths count]; i++) {
    AVURLAsset *assetClip = [videoClipPaths objectAtIndex:i];
    AVAssetTrack *clipVideoTrackB = [[assetClip tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0];

    [timeRanges addObject:[NSValue valueWithCMTimeRange:CMTimeRangeMake(kCMTimeZero, assetClip.duration)]];
    [tracks addObject:clipVideoTrackB];
}
[compositionTrack insertTimeRanges:timeRanges ofTracks:tracks atTime:kCMTimeZero error:&error];

AVAssetExportSession *exporter = [[AVAssetExportSession alloc] initWithAsset:mixComposition presetName:AVAssetExportPreset1280x720];
NSParameterAssert(exporter != nil);
NSArray *t;
NSString *u;

t = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
u = [t objectAtIndex:0];
NSString *finalPath = [u stringByAppendingPathComponent:@"final.mov"];
NSURL *lastURL = [NSURL fileURLWithPath:finalPath];
exporter.outputFileType = AVFileTypeQuickTimeMovie;
exporter.outputURL = lastURL;
[exporter exportAsynchronouslyWithCompletionHandler:^(void){
    switch (exporter.status) {
        case AVAssetExportSessionStatusFailed:
            NSLog(@"exporting failed");
            break;
        case AVAssetExportSessionStatusCompleted:
            NSLog(@"exporting completed");
            //UISaveVideoAtPathToSavedPhotosAlbum(filePath, self, nil, NULL);
            break;
        case AVAssetExportSessionStatusCancelled:
            NSLog(@"export cancelled");
            break;
    }
}]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T07:37:44.273

我通过替换此代码来修复它：

```
AVAssetExportSession *exporter = [[AVAssetExportSession alloc] initWithAsset:mixComposition presetName:AVAssetExportPreset1280x720]; NSParameterAssert(exporter != nil); 
```

和：

```
AVAssetExportSession *exporter = [[AVAssetExportSession alloc] initWithAsset:mixComposition presetName:AVAssetExportPresetHighestQuality]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T12:19:16.307

`assetClip`是一个`AVURLAsset`。但看起来你正在`NSURL`为它分配一个对象。然后你调用`tracksWithMediaType`它，这是一个方法`NSURL`没有。这就是你得到“无法识别的选择器”的原因。

我对这个特定的类不是很熟悉，但如果你替换它*可能会*解决你的问题

```
 AVURLAsset *assetClip = [videoClipPaths objectAtIndex:i]; 
```

和

```
 AVURLAsset *assetClip = [AVURLAsset URLAssetWithURL:[videoClipPaths objectAtIndex:i] options:nil]; 
```

# javascript - 在异步函数中维护变量的状态

> ID：11882277
> 
> 赞同：0
> 
> 时间：2012-08-09T11:20:43.003
> 
> 标签：javascript, dojo, sametime

我不知道我问的事情是否有一个术语，所以我将尝试说明它：

我有一个函数，它需要一组联系人，然后循环访问以更新他们在网站上的状态。'something.getStatus' 函数不返回任何内容，但在成功完成后，它会给出用户的状态（在线/离线/等）。

这里的问题是，当调用里面的函数时，变量 user_id 是所有函数调用的数组中的最后一个，因此无法知道如何有什么状态。

```
function gotGroupContacts(contacts) {

 for ( i = 0; i < contacts.length; i++) {
  var user_id = contacts[i];
  something.getStatus(user_id, function(resp) {
   updateLinkStatus(user_id, resp.status, resp.statusMessage);
  }, getStatusErrorHandler);
 }
} 
```

有什么办法可以“锁定”变量，或者将其传递给内部的函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:23:13.040

将您的`getStatus`方法调用包含在一个闭包中，就像这样

```
for ( i = 0; i < contacts.length; i++) {
  var user_id = contacts[i];
  (function(uid) {
     something.getStatus(uid, function(resp) {
        updateLinkStatus(uid, resp.status, resp.statusMessage);
     }, getStatusErrorHandler);
  }(user_id))
} 
```

`user_id`被传递给匿名自执行函数，这确保具有正确的值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T09:24:53.243

如果你的脚本不需要兼容 IE <9，你可以这样写：

```
function gotGroupContacts(contacts) {
  contacts.forEach(function(user_id){
     something.getStatus(user_id, function(resp) {
        updateLinkStatus(user_id, resp.status, resp.statusMessage);
     }, getStatusErrorHandler);
  });
} 
```

注意：forEach 方法可以轻松移植到 IE，请参见：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach)

# api - 机票价格 API

> ID：11882279
> 
> 赞同：6
> 
> 时间：2012-08-09T11:21:00.927
> 
> 标签：api

是否存在航班价格 API？

我想知道像 www.skyscanner.com 这样的网站是如何运作的。

他们是否与航空公司签订了合同，或者这些信息是否公开？

我想要信息，例如 JSON 或 XML。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T13:05:26.067

我所知道的最长的一个是[Saber](http://www.sabretravelnetwork.com/home/solutions/developer/)。大约十年前，我集成了一个 IVR 系统。它处理航班和其他旅行信息。不过我觉得有点贵。[这是同一主题](https://stackoverflow.com/questions/4011123/is-there-an-api-for-booking-flights-and-or-cruises)的另一个QA 。

# php - 如何在 Javascript PHP 中从网络摄像头获取二进制图像

> ID：11882281
> 
> 赞同：0
> 
> 时间：2012-08-09T11:21:09.390
> 
> 标签：php, javascript, webcam

我是 Javascript 和 PHP 的新手。我正在努力创建一个访客管理系统，其中使用 Web 表单插入数据，当单击提交按钮时，数据存储在数据库中并打印通行证。但我的问题是我正在尝试使用网络摄像头拍摄访问者的快照，并希望将其作为 BLOB 保存在数据库中。我不知道，但尝试了[http://www.xarg.org/project/jquery-webcam-plugin/](http://www.xarg.org/project/jquery-webcam-plugin/)等，但找不到任何线索。请帮忙。

# ios - 如何在一个谓词中使用多个 ANY 运算符？

> ID：11882286
> 
> 赞同：0
> 
> 时间：2012-08-09T11:21:24.387
> 
> 标签：ios, core-data, nspredicate, nsfetchrequest

有两个实体 C 和 P 具有多对多关系。我正在尝试获取 C 实体，其中 C 包含至少一个 P，因此包含至少一个 C，其属性 a 具有特定值。

我正在尝试这样的事情：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"ANY p.c.a = %d ", someValue]; 
```

然而，这显然不起作用，因为 P 也与 C 有一对多的关系。我需要这样的东西：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"ANY p.ANY(c).a = %d ", someValue]; 
```

您将如何以正确的方式编写这样的谓词？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T16:55:39.983

如果您想获取与至少一个实体有关系的*所有* 实体，那么您可以使用`C``P`

```
NSFetchRequest* request = [[NSFetchRequest alloc] initWithEntityName:@"C"];
NSPredicate * predicate = [NSPredicate predicateWithFormat:@"count(p) != 0"];
request.predicate = predicate; 
```

假设这是从到`p`的一对多关系。`C``P`

# php - 宾果游戏逻辑

> ID：11882299
> 
> 赞同：1
> 
> 时间：2012-08-09T11:22:30.757
> 
> 标签：php

我正在使用 php, html, css 创建一个宾果游戏（会有`nxn`盒子。它将以随机顺序填充 2 个玩家。玩家必须一个一个选择数字。一个填充行或列或对角线五次的人赢得比赛）。

我创建了 player1.php 和 player2.php。我有 9 个盒子并从数据库中填充它。如果用户单击一个按钮，我会将相应的值更新为 0，这样当页面加载时，如果文本为 0，我将禁用该按钮。

如果 player1 单击 player1.php 中的按钮，它应该反映在 player2.php 中。我怎样才能做到这一点？可以通过每秒重新加载页面来实现吗？这样做好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T11:33:17.017

作为简短的回答：不，不是。

纯 PHP 不是最适合这样的交互式游戏，但您可以做的事情很少。

您可以使用带有 Ajax 的 javascript 来执行此操作。假设您有 X 个玩家（每个玩家都在使用，`playerX.php`尽管我会将其放入并通过参数或其他东西`player.php`确定每个玩家）。`GET`当其中一个玩家点击一个链接时，它会进入一个服务器端脚本，用 PHP 编写（如果你愿意，可以使用 Ajax）来更新你的数据库。

现在棘手的是，每个玩家页面每隔一定时间“询问”服务器游戏状态，并相应地更新页面。最简单的方法是创建一个脚本（让我们称之为`state.php`），它将使用 JSON 从您的数据库中输出数据。您可以使用 ajax 读取请求并使用 javascript 更新您的页面。

我建议您阅读有关[jQuery](http://jquery.com/)和[Ajax](http://en.wikipedia.org/wiki/Ajax_%28programming%29)（也可以[与 jQuery 一起使用](http://api.jquery.com/jQuery.ajax/)）的信息。

如果你想避免每次都刷新页面，学习 javascript 和 ajax 是你最好的选择。

# javascript - 三星智能电视模拟器无法识别 .jpg 图像

> ID：11882305
> 
> 赞同：0
> 
> 时间：2012-08-09T11:22:54.223
> 
> 标签：javascript, html

我使用这个html标签如下：

```
<img src="app\images\1.jpg" height="100px" width="100px"> 
```

但是模拟器不显示图像而是显示一个问号，并且调试器给出了一个错误，即在此服务器上找不到请求的 url，而该文件在该位置非常多。

是否有另一种方法可以在三星电视智能应用程序中插入图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:37:52.127

URI 中的“目录”分隔符是正斜杠，而不是反斜杠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T11:39:19.433

你试过这个吗？

```
<img src="app/images/1.jpg" height="100" width="100"> 
```

或者

```
<img src="/app/images/1.jpg" height="100" width="100"> 
```

看到斜线 / 而不是 \ ？

在服务器上它总是 /。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T11:39:19.780

用这个

```
<img src="app/images/1.jpg" height="100px" width="100px"> 
```

# html - 将字符串值传回父页面

> ID：11882308
> 
> 赞同：0
> 
> 时间：2012-08-09T11:23:05.763
> 
> 标签：html, database, asp-classic

我目前正在使用调色板。

我创建了一个 HTML 页面，它显示 3 个调色板，每个调色板有 15 种不同的颜色。

这是这样显示的 -

```
<table border="1" width="100%" cellspacing="0" cellpadding="0" align="right">
<%
    old = 9999
    do while not rs.eof
%>
<% if old <> rs("palid") then %> 
<tr>
    <td> 
         <a href="tagcolours.asp?palid=<%=rs("palid")%>&Edit=<%=rs("palid")%>"> 
           <%=rs("palid")%>
         </a>
    </td>
</tr>
<% old = rs("palid") 
end if %>
<tr>
     <td onclick="myFunction()" 
         style="background-color:<%=(rs("Name") )%>">
         <%=(rs("Name") )%> 
     </td>
</tr>

<%
 rs.movenext
   loop
    rs.close
 conn.close
'end if
    %>
</table> 
```

因此，根据调色板 ID ( `palid`)，这决定了显示的颜色。

当用户单击其中一种颜色 ( `Name`) 值时，将打开一个新窗口，其中包含所有可供选择的 HTML 颜色。

我的问题是当用户单击新窗口中的一种颜色时，我会提醒该选择，但是我如何获取该字符串值，并使用新选择更新父窗口中的第一个选择。例如，在第一页中`GREEN`需要更改颜色，并且必须`RED`将该值传递回第一页并更新数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T11:26:49.603

你可以使用`window.opener`方法。window.opener 属性返回对创建窗口的窗口的引用。

因此，您可以使用此方法访问父窗口元素。看看[例子](http://www.w3schools.com/jsref/prop_win_opener.asp)

# java - 如何从 Play 发送带有附件的电子邮件！框架 1.2.4

> ID：11882317
> 
> 赞同：2
> 
> 时间：2012-08-09T11:23:28.370
> 
> 标签：java, playframework, apache-commons-email

试图玩！发送带有附件的电子邮件的框架。如果我不将附件添加到邮件中，下面的代码可以正常工作。我已经尝试过使用 Play 的 Mailer 类和 Apache Commons 类（如下所示），但是在这两种情况下，页面都只是用微调器（Chrome）坐在那里，并且没有收到任何电子邮件。

```
EmailAttachment attachment = new EmailAttachment();
attachment.setURL(new URL(base + "public/images/triangles.png"));
attachment.setDisposition(EmailAttachment.ATTACHMENT);
attachment.setDescription("test");
attachment.setName("test");

emailaddress = "test@test.com";

MultiPartEmail email = new MultiPartEmail();
email.setDebug(true);
email.addTo(emailaddress);
email.setFrom("Testing <test@test.com>");
email.setSubject("Testing email");
try
{
    email.attach(attachment);
}
catch (EmailException ex)
{
    System.out.println(ex.getMessage());
}
email.setMsg("test email");
email.send(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T11:27:53.667

我猜您已经看过[Apache Commons](http://commons.apache.org/email/userguide.html)和[发送电子邮件的示例 - 玩！框架 1.1](http://www.playframework.org/documentation/1.1/emails) ?

IMO 我建议使用带有大量文档和示例的知名库，例如[JavaMail](http://www.oracle.com/technetwork/java/javamail/index.html)及其[api](http://javamail.kenai.com/nonav/javadocs/index.html)。

这里有一些教程可以让你立即开始：

*   [JavaMail 快速入门](http://www.javaworld.com/jw-10-2001/jw-1026-javamail.html)
*   [Java 邮件 SMTPClient 示例](http://www.roseindia.net/javamail/SMTPClient.shtml)
*   [使用 javamail 发送带有附件的邮件](http://home-1.worldonline.nl/~bmc88/java/sbook/043.html)

使用 JavaMail 通过 gmail 发送带有附件的电子邮件的示例是：

```
import java.util.Properties;

import javax.mail.Message;
import javax.mail.MessagingException;
import javax.mail.PasswordAuthentication;
import javax.mail.Session;
import javax.mail.Transport;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeMessage;

public class SendMailTLS {

public static void main(String[] args) {

    final String username = "username@gmail.com";
    final String password = "password";

    Properties props = new Properties();
    props.put("mail.smtp.auth", "true");
    props.put("mail.smtp.starttls.enable", "true");
    props.put("mail.smtp.host", "smtp.gmail.com");
    props.put("mail.smtp.port", "587");

    Session session = Session.getInstance(props,
            new javax.mail.Authenticator() {

                protected PasswordAuthentication getPasswordAuthentication() {
                    return new PasswordAuthentication(username, password);
                }
            });

    try {

        // Define message
        MimeMessage message =
                new MimeMessage(session);
        message.setFrom(
                new InternetAddress(from));
        message.addRecipient(
                Message.RecipientType.TO,
                new InternetAddress(to));
        message.setSubject(
                "Hello JavaMail Attachment");

        // create the message part 
        MimeBodyPart messageBodyPart =
                new MimeBodyPart();

        //fill message
        messageBodyPart.setText("Hi");

        Multipart multipart = new MimeMultipart();
        multipart.addBodyPart(messageBodyPart);

        // Part two is attachment
        messageBodyPart = new MimeBodyPart();
        DataSource source =
                new FileDataSource(fileAttachment);
        messageBodyPart.setDataHandler(
                new DataHandler(source));
        messageBodyPart.setFileName(fileAttachment);
        multipart.addBodyPart(messageBodyPart);

        // Put parts in message
        message.setContent(multipart);

        // Send the message
        Transport.send(message);

    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

}

高温高压

**参考：**

*   [JavaMail API – 通过 Gmail SMTP 发送电子邮件示例](http://www.mkyong.com/java/javamail-api-sending-email-via-gmail-smtp-example/)
*   [http://www.jguru.com/faq/view.jsp?EID=30251](http://www.jguru.com/faq/view.jsp?EID=30251)

# ios - 解析都柏林核心数据

> ID：11882322
> 
> 赞同：0
> 
> 时间：2012-08-09T11:24:07.660
> 
> 标签：ios

如何在 iOS 中解析都柏林核心数据？数据是这样的：

```
dc:contributor          Binder, Henry.
dc:creator          Crane, Stephen, 1871-1900.
dc:date         c1982
dc:description          This stirring tale of action in the American Civil War       captures the immediacies and experiences of actual battle and army life.
dc:format           ix, 173 p. ; 22 cm.
dc:identifier           0393013456
dc:identifier           9780393013450
dc:identifier           0380641135 (pbk.)
dc:identifier           9780380641130 (pbk.)
dc:language         eng
dc:publisher            Norton
dc:subject          Chancellorsville, Battle of, Chancellorsville, Va., 1863--Fiction.
dc:subject          Virginia--History--Civil War, 1861-1865--Fiction.
dc:title            The red badge of courage : an episode of the American Civil War
dc:type         War stories.
dc:type         Historical fiction.
dc:type         Text
oclcterms:recordCreationDate            811217
oclcterms:recordIdentifier           81022419
oclcterms:recordIdentifier          8114241 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-28T08:54:05.560

看起来您的数据结构结构具有可预测的格式，即每一行都有一个清晰的标签，然后是一个类似制表符的空间。

因此，如果您熟悉标签名称，您绝对可以创建一个小程序来相应地使用每一行。

# java - HTML.fromHtml 在文本末尾添加空格？

> ID：11882323
> 
> 赞同：8
> 
> 时间：2012-08-09T11:24:08.297
> 
> 标签：java, android

在我的应用程序中，我使用 Html.fromHtml(string).toString 方法来删​​除`<p>`在解析一些 JSON 时收到的一些标签。

如果我留下`<p>`标签，文本完全适合背景（背景是一个相对布局，高度和宽度都有 wrap_content。）但是，如果我使用 fromHtml 删除`<p>`标签，突然在文本下方有一个巨大的空间，我相信 fromHtml 方法最后会添加空格吗？

有任何想法吗？

编辑：

以下是截图：http: [//imgur.com/a/zIZNo](https://imgur.com/a/zIZNo)

带`<p>`标签的就是不使用fromHtml的，很明显！:)

编辑2：已找到解决方案，请参阅下面的答案。感谢 Andro Selva 帮助我告诉我`/n`正在添加的隐藏！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-09T11:59:20.107

找到了解决办法：

fromHtml 返回 Spanned 类型。因此，我将返回的内容分配给变量，将其转换为字符串，然后对其使用 .trim() 方法。

它在最后删除了所有空白。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-09T11:44:31.400

是的，您的想法确实是正确的。它增加了底部的空间。但在此之前，让我解释一下这是如何工作的。

您必须查看 HTML 类以了解它是如何工作的。

简单来说，它是这样工作的：每当你的`Html`类查看`<p>`标签时，它所做的只是在末尾附加两个“\n”字符。

在这种情况下，您在底部看到的空白实际上是因为在段落末尾附加了两个 \n 。

我添加了负责此操作的 Html 类的实际方法，

```
 private static void handleP(SpannableStringBuilder text) {
    int len = text.length();

    if (len >= 1 && text.charAt(len - 1) == '\n') {
        if (len >= 2 && text.charAt(len - 2) == '\n') {
            return;
        }
        text.append("\n");
        return;
    }

    if (len != 0) {

       text.append("\n\n");

    }
} 
```

如果要覆盖此操作，则必须覆盖 Html 类本身，这有点棘手，无法在此处完成。

**编辑**

这是 Html 类的链接，

[html类](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3.6_r1/android/text/Html.java#Html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-11-13T17:59:10.287

如果您尝试在对象中使用它或尝试将其安装在特定位置，请尝试使用`<a>`标签而不是 a `<p>`，`<p>`在末尾添加回车符，a 不写，但您必须记住`\n`自己用`<b>`, 和你可以保持风格

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-04T17:25:58.397

@Andro Selva 的解释是正确的，对此没有什么可做的。令人沮丧的是，API 24 及更高版本在调用中包含标志后情况变得更好

```
Spanned fromHtml (String source, 
                int flags, 
                Html.ImageGetter imageGetter, 
                Html.TagHandler tagHandler); 
```

我怀疑**FROM_HTML_SEPARATOR_LINE_BREAK_PARAGRAPH**标志会将标准段落终止的双“\n\n”减少到换行符的单个“\n”

鉴于 Android 版本的历史 ~ 我负担不起专门为 Android API 24+ 编写软件！所以...我找到了一个包含 2 个额外自定义标签的 kludge 解决方案。

```
1\. <scale factor="x.xx">... </scale>
2\. <default>... </default> 
```

都通过这个方法调用RelativeSizeSpan类

```
private void ProcessRelativeSizeTag(float scalefactor, boolean opening, Editable output) {
                int len = output.length();
                if (opening) {
                    System.out.println("scalefactor open: " + scalefactor);
                    output.setSpan(new RelativeSizeSpan(scalefactor), len, len,
                            Spannable.SPAN_MARK_MARK);
                } else {
                    Object obj = getLast(output, RelativeSizeSpan.class);
                    int where = output.getSpanStart(obj);
                    scalefactor = ((RelativeSizeSpan)obj).getSizeChange();
                    output.removeSpan(obj);
                    System.out.println("scalefactor close: " + scalefactor);
                    if (where != len) {
                        output.setSpan(new RelativeSizeSpan(scalefactor), where, len,
                                Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
                    }
                }
            } 
```

从提供给`Html.fromHtml`方法的自定义 TagHandler 调用，即：

```
private static class CustomTagHandler implements Html.TagHandler {

    private void ProcessRelativeSizeTag(float scalefactor, boolean opening, Editable output) {
            int len = output.length();
            if (opening) {
                //mSizeStack.push(scalefactor);
                System.out.println("scalefactor open: " + scalefactor);
                output.setSpan(new RelativeSizeSpan(scalefactor), len, len,
                        Spannable.SPAN_MARK_MARK);
            } else {
                Object obj = getLast(output, RelativeSizeSpan.class);
                int where = output.getSpanStart(obj);
                scalefactor = ((RelativeSizeSpan)obj).getSizeChange();

                output.removeSpan(obj);

                //scalefactor = (float)mSizeStack.pop();
                System.out.println("scalefactor close: " + scalefactor);
                if (where != len) {
                    output.setSpan(new RelativeSizeSpan(scalefactor), where, len,
                            Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
                }
            }
        }
...
        final HashMap<String, String> mAttributes = new HashMap<>();

        @Override
        public void handleTag(boolean opening, String tag, Editable output, XMLReader xmlReader) {
            String Attr;
            processAttributes(xmlReader);
            if ("default".equalsIgnoreCase(tag)) {
                ProcessRelativeSizeTag(mDefaultTextSize, opening, output);
                return;
            }

            if ("scale".equalsIgnoreCase(tag)) {
                Attr = mAttributes.get("factor");
                if (Attr != null && !Attr.isEmpty()) {
                    float factor = parseFloat(Attr);
                    if (factor > 0)
                        ProcessRelativeSizeTag(factor, opening, output);
                }
                return;
... 
            }

       } 
```

要使用，我将`Textview`对象的文本大小设置为1。即1像素！然后我在变量中设置所需的真实文本大小`mDefaultTextSize`。我在一个`htmlTextView`扩展`TextView`为：

```
public class htmlTextView extends AppCompatTextView {
    static Typeface mLogo;
    static Typeface mGAMZ;
    static Typeface mBrush;
    static Typeface mStandard;
    int GS_PAINTFLAGS = FILTER_BITMAP_FLAG | ANTI_ALIAS_FLAG | SUBPIXEL_TEXT_FLAG | HINTING_ON;
    static float mDefaultTextSize;
    static Typeface mDefaultTypeface;
etc 
```

}

其中包括公共方法

```
public void setDefaultTextMetrics(String face, float defaultTextSize) {
        mDefaultTypeface = mStandard;
        if (face != null) {
            if ("gamz".equalsIgnoreCase(face)) {
                mDefaultTypeface = mGAMZ;
            } else {
                if ("brush".equalsIgnoreCase(face)) {
                    mDefaultTypeface = mBrush;
                }
            }
        }
        setTypeface(mDefaultTypeface);
        setTextSize(1);
        mDefaultTextSize = defaultTextSize;
    } 
```

一个简单的`((htmlTextView)tv).setDefaultTextMetrics(null, 30);`调用设置我`htmlTextView`使用我的标准字体作为默认字体，文本大小为 30。

然后当我给它这个例子以在 fromHtml 中使用时：

```
<string name="htmlqwert">
<![CDATA[
        <p><default><scale factor="1.5"><box> qwertQWERT </box></scale></default></p>
        <p><default><scale factor="1.5"><box> qwertQWERT </box></scale></default></p>
        <p><default><scale factor="1.5"><box> qwertQWERT </box></scale></default></p>
        <p><default><scale factor="1.5"><box> qwertQWERT </box></scale></default></p>
]]>
</string> 
```

我的自定义标签`<box>`只是让我突出显示文本的背景。请参见附图，其中显示了一个使用`<default>`标签的结果，其中`TextView`文本大小设置为 1，`<default>`标签调用 a`RelevantSizeSpan`的因子为 30，其中一个具有：

```
<string name="htmlqwert">
    <![CDATA[
            <p><scale factor="1.5"><box> qwertQWERT </box></scale></p>
            <p><scale factor="1.5"><box>qwertQWERT</box></scale></p>
            <p><scale factor="1.5"><box>qwertQWERT</box></scale></p>
            <p><scale factor="1.5"><box>qwertQWERT</box></scale></p>
    ]]>
    </string> 
```

不使用`<default>`标签，而是将`TextView`文本大小设置为 30。在第一种情况下，额外的新行仍然存在，但它只有 1 个像素高！

`<scale factor="1.5">...</scale>`注意标签没有真正的意义。它们只是从其他测试中遗留下来的人工制品。

**结果：**下面的两个示例在段落之间都有 2 个换行符，但在左侧的那个中，其中一个行只有 1 个像素高。我将留给读者弄清楚如何将其减少到零，但不要使用 0 的文本大小 [![](../Images/c3a5ed7b9d80f0f97445e589624f6646.png)](https://i.stack.imgur.com/YGLjm.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-30T06:54:10.247

这个解决方案对我有用 创建一个辅助方法来替换所有段落的开始和结束标记，并用空字符替换所有。

```
@Nullable
public static String removeParagraphTags(@Nullable String input) {
    if (input == null) {
        return null;
    }
    return input.replaceAll("<p>", "").replaceAll("</p>", "");
} 
```

和用法

```
 String input = "<p>This is some text in a paragraph.</p>";
HtmlCompat.fromHtml(StringUtils.removeParagraphTags(input),HtmlCompat.FROM_HTML_MODE_COMPACT) 
```

# php - 在php中将函数声明为静态

> ID：11882327
> 
> 赞同：0
> 
> 时间：2012-08-09T11:24:19.493
> 
> 标签：php, static-methods

我有一组独立的函数，我想把它们放在一个类中。它们不依赖于类的任何对象，因此在调用它们时，所需的所有值都将作为参数传递。如果我将它们全部声明为静态这样我可以只用一个命令调用它们，`className::functionName(argument1,argument2,...)` 或者我将它们保持为普通的公共函数并通过类对象调用它们，这很好吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T11:30:43.677

你可以（但你不应该这样做）：

```
class YourClass {
   public static function yourMethod( ) {
      echo "method called";
   }
}

YourClass::yourMethod(); 
```

你不应该这样做的原因是因为当你在其他一些类/函数/任何你紧密耦合`YourClass`到其他类的东西中使用静态调用时。因此，您很难进行单元测试或简单地切换到另一个方法，而无需通过所有使用它的代码。也不要忘记你刚刚添加了一些东西`global`。

你还说：

> 我有一组独立的函数，我想把它们放在一个类中。

在我的书中，这是一个很大的代码气味。这听起来像是您的课程违反了SOLID[编程中的](http://en.wikipedia.org/wiki/SOLID_(object-oriented_design))[SRP 原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)。

因此，我只会实例化该类。

让我们看看为什么它使您的代码难以测试：

```
class SomeClassWithMethods
{
    public static function doSomething()
    {
    }
}

class SomeClassYouWantToTest
{
    public function doSomething()
    {
        return SomeClassWithMethods::doSomething(); // this is now tightly coupled and would be impossible to mock when unit testing it
    }
} 
```

这`SomeClassWithMethods::doSomething`也是现在全球定义的。

我们喜欢称之为银弹:)：

![super::$static 银弹](../Images/e4bccf49d69cef17111be2c53c5119dd.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T11:26:46.500

是的，这还不错。您可以将它们定义为静态函数，就像您说的那样 - 您可以只用一个语句调用它们。

```
class Foo {
   public static function bar( ) {
      echo "bar called";
   }
} 
```

# python - 最佳实践 - 观看目录的最佳方式是什么

> ID：11882330
> 
> 赞同：3
> 
> 时间：2012-08-09T11:24:27.183
> 
> 标签：python, directory, watch

我需要设置一个脚本来监视特定类型文件的文件夹。我已经制作了这段代码，但我想知道是否有更好的方法？

```
import os

def listAppleseedFiles(directory_path):
    directory_entities =  os.listdir(directory_path)
    files = []
    appleseed_files = []
    for entity in directory_entities:
        file_path = os.path.join(directory_path, entity)
        if os.path.isfile(file_path):
            if os.path.splitext(file_path)[1] == '.appleseed':
                appleseed_files.append(file_path)

    return appleseed_files

while True:
    for file in listAppleseedFiles('/dir_name'):

        doSomething() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T11:33:31.990

试试[看门狗](https://github.com/gorakhargosh/watchdog)！从他们的例子中：

```
import time
from watchdog.observers import Observer
from watchdog.events import LoggingEventHandler

event_handler = LoggingEventHandler()
observer = Observer()
observer.schedule(event_handler, path='/dir_name', recursive=True)
observer.start()
try:
    while True:
        time.sleep(1)
except KeyboardInterrupt:
    observer.stop()
observer.join() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T12:18:34.363

我已经`watcher`成功使用了 PyPi，它是 API 的包装器`ReadDirectoryChangesW`。这是一个示例（Py3，但它在 Py2 上运行）：

```
from watcher import *
import time

def callback(*stuff):
    if stuff[0] == FILE_ACTION_REMOVED:
        print(stuff[1],"deleted")
    else:
        print(stuff)

w = Watcher('C:\\' , callback)
w.flags = FILE_NOTIFY_CHANGE_FILE_NAME
w.start()

while True:  
    time.sleep(100) 
```

# objective-c - 如何在 Restkit 中执行没有正文、url 参数的 PUT 请求并取回对象

> ID：11882332
> 
> 赞同：0
> 
> 时间：2012-08-09T11:24:39.497
> 
> 标签：objective-c, rest, restkit

假设我必须执行此动态 PUT 请求：“http://mydomain.com/api/5?value=66”

身体是空的。我将返回一个 201（已创建）状态，并且在正文中我将返回一个 json 对象，我们称它为 MyObject，它具有字段 NSNumber* Id、NSString* 名称；

现在在 restkit 我有这些选项：

```
- [[RKObjectManager sharedManager]  putObject:nil mapResponseWith:MyMapping delegate:self]; 
```

MyMapping 映射 MyObject。问题是，如果我发送 nil，它不知道映射并抛出“无法为 HTTP 方法 'PUT' 找到类型为 '(null)' 的对象的可路由路径”

```
- [[RKClient sharedClient] put:putUrl params:nil delegate:self]; 
```

这里`putUrl = "http://mydomain.com/api/5?value=66"` 的问题是响应没有映射，所以只有 didLoadResponse 被回调，而 didLoadObjects 从未被调用

```
[objectManager.router routeClass:[MyObject class] toResourcePath:putUrl forMethod:RKRequestMethodPUT]; 
    MyObject *obj = [[MyObject alloc] init];

    [[RKObjectManager sharedManager]  putObject:obj mapResponseWith:MyMapping  delegate:self]; 
```

这里的问题是，首先我伪造了它（将 MyObject 作为参数发送，而它不是），它只在第一次工作。我第二次尝试使用此方法时遇到此异常：“已为类 'MyObject' 和 HTTP 方法 'PUT' 注册了路由”

有什么建议该怎么做吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T13:09:15.543

如果有人有兴趣，我在看到 restkit 在做什么后找到了答案。

```
putUrl = "http://mydomain.com/api/5?value=66";

MyMapping maps the returned MyObject that has fields NSNumber* Id, NSString* name; 
```

这是使它工作的代码：

```
void (^blockLoader)(RKObjectLoader *);

blockLoader = ^(RKObjectLoader *loader) {
    loader.delegate = self;
    loader.objectMapping = MyMapping;
};

NSString *resourcePath = putUrl;

[[RKObjectManager sharedManager] sendObject:nil toResourcePath:resourcePath usingBlock:^(RKObjectLoader *loader) {
    loader.method = RKRequestMethodPUT;
    blockLoader(loader);
}]; 
```

# matlab - 从命令窗口使用部署工具

> ID：11882335
> 
> 赞同：0
> 
> 时间：2012-08-09T11:24:44.727
> 
> 标签：matlab, matlab-deployment

目前我正在开发一个需要与外部软件交互的解决方案。因此，我只能在将解决方案构建为 dll 文件后才能对其进行正确测试。

目前我采取这些步骤

1.  输入“deploytool”（打开部署工具）
2.  单击“打开项目”按钮
3.  找到并选择我要打开的项目（总是在同一个位置同名但显然matlab不记得这个了）
4.  点击构建按钮

目前我每天这样做几次，这真的很简单，但很烦人。因此，我希望有人可以给我一种方法来自动化步骤 2-4，也许使用脚本？

如果这是不可能的，我也希望有一种方法可以更改部署工具的默认打开文件夹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:29:01.577

`help deploytool`说您可以指定项目名称和构建选项作为第二个参数：

```
deploytool -build projectname 
```

# jquery - 如何在具有固定列数的 jQuery Columnizer 中增加填充，而不会将最后一列向下踢到下一个“行”

> ID：11882337
> 
> 赞同：2
> 
> 时间：2012-08-09T11:24:56.397
> 
> 标签：jquery, css, padding

我已经为 jQuery columnizer 编写了脚本。一切正常，但有一个值得注意的例外：

我想将列数固定为 3 并将填充增加到 10px。就目前的布局而言，我对柱子在成型后的紧绷程度并不满意。

当我使用 CSS 调整填充时，最后一列被推出并踢下：

代码：

```
<script>
$(function(){
        $('#sectionID').columnize({ columns: 3 });
});
</script>
<style type="text/css">
.column{padding:10px; }
</style> 
```

有什么想法或提示吗？

谢谢！

/布莱恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T05:38:35.963

我发现解决此问题的最佳方法是将填充添加到列内的元素中。这取决于您拥有的内容。如果列内只有段落，那么将规则更改为`.column p`就足够了。

最简单的解决方案是使用子选择器并将填充添加到列内的项目中：

```
.column > * { padding: 10px } 
```

这应该适用于 90% 的人们对列填充的需求，但请注意，由于它已添加到列的子级，因此它也会将顶部/底部填充添加到每个元素，而不仅仅是添加到列 - 这可能不是我们所希望的。

另一种选择（需要额外的标记）是将 div 添加到您正在列化的容器中，然后将填充添加到该新 div。所以而不是：

```
<div id=sectionID>
... content to columnize ...
</div> 
```

你会有：

```
<div id=sectionID>
<div class=for_padding>
... content to columnize ...
</div>
</div> 
```

你的 CSS 将是：

```
.column .for_padding { padding: 10px; } 
```

您仍然需要对`sectionID`div 进行分列，并且 columnizer 会将其添加到`<div class=for_padding>`每个列的内部。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-17T14:40:45.353

你可以简单地使用

```
box-sizing: border-box;
padding: 0 4%; 
```

为您的专栏。如果您不喜欢容器左侧和右侧的间隙，请添加

```
margin: 0 -2%; 
```

到你的容器。

# jquery - 如何在 asp.net mvc 3 中为文本框使用时间掩码？

> ID：11882341
> 
> 赞同：0
> 
> 时间：2012-08-09T11:25:05.130
> 
> 标签：jquery, asp.net-mvc-3, razor

我正在尝试为我的一个文本框设置一个时间掩码：

@Html.TextBoxFor(x=>x.time, ..?)

我怎样才能设置一个面具，如：

18:00 => 存储为字符串 '1800'

# activerecord - 在 Rails 之外生成迁移

> ID：11882345
> 
> 赞同：9
> 
> 时间：2012-08-09T11:25:15.440
> 
> 标签：activerecord, migration

我在 Rails 之外使用 ActiveRecord。我想要一个程序来生成迁移的框架（以及一个收集和维护它们的系统）。

任何人都可以提出建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-08T18:10:17.273

还要看看新的[active_record_migrations](https://github.com/rosenfeld/active_record_migrations)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T08:20:15.630

有一个 gem 可以在非 Rails 项目中使用 Rails 数据库迁移。它的名字是“standalone_migrations”

这是一个链接

[https://github.com/thuss/standalone-migrations](https://github.com/thuss/standalone-migrations)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-08-09T22:43:05.987

如果您不喜欢使用 rake，但仍然获得 ActiveRecord::Migration 的系统部分，那么您可以使用以下内容来处理普通 ruby​​ 的起伏（没有任何轨道）：

```
require 'active_record'
require 'benchmark'

# Migration method, which does not uses files in db/migrate but in-memory migrations
# Based on ActiveRecord::Migrator::migrate
def migrate(migrations, target_version = nil)

  direction = case
    when target_version.nil?    
      :up 
    when (ActiveRecord::Migrator::current_version == target_version)
      return # do nothing
    when ActiveRecord::Migrator::current_version > target_version
      :down
    else
      :up
  end

  ActiveRecord::Migrator.new(direction, migrations, target_version).migrate

  puts "Current version: #{ActiveRecord::Migrator::current_version}"
end

# MigrationProxy deals with loading Migrations from files, we reuse it
# to create instances of the migration classes we provide
class MigrationClassProxy < ActiveRecord::MigrationProxy 
  def initialize(migrationClass, version)
    super(migrationClass.name, version, nil, nil)
    @migrationClass = migrationClass
  end

  def mtime
    0
  end

  def load_migration
    @migrationClass.new(name, version)
  end    
end

# Hash of all our migrations
migrations = {
  2016_08_09_2013_00 => 
    class CreateSolutionTable < ActiveRecord::Migration[5.0]
      def change          
        create_table :solution_submissions do |t|
          t.string :problem_hash, index: true
          t.string :solution_hash, index: true
          t.float :resemblance
          t.timestamps
        end
      end 
      self # Necessary to get the class instance into the hash!
    end,

  2016_08_09_2014_16 =>  
    class CreateProductFields < ActiveRecord::Migration[5.0]

      # ...

      self
    end
}.map { |key,value| MigrationClassProxy.new(value, key) }

ActiveRecord::Base.establish_connection(
  :adapter => 'sqlite3',
  :database => 'XXX.db'
)

# Play all migrations (rake db:migrate)
migrate(migrations, migrations.last.version)

# ... or undo them (rake db:migrate VERSION=0)
migrate(migrations, 0)

class ApplicationRecord < ActiveRecord::Base
  self.abstract_class = true
end

class SolutionSubmission < ApplicationRecord

end 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-01-04T09:12:32.873

我做了一个最小的例子来说明如何在 Rails 之外使用活动记录。非 Rails（和非 Ruby）项目中的 Rails 迁移（独立迁移）。

[https://github.com/euclid1990/rails-migration](https://github.com/euclid1990/rails-migration)

（支撑导轨 >= 5.2）

你可以在这个 repo 中引用 Rake 文件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-12-08T05:40:36.593

还有另一个 gem 叫做[otr-activerecord](https://rubygems.org/gems/otr-activerecord)。此 gem 提供以下任务：

*   `rake db:create`
*   `rake db:create_migration[name]`
*   `rake db:drop`
*   `rake db:environment:set`
*   `rake db:fixtures:load`
*   `rake db:migrate`
*   `rake db:migrate:status`
*   `rake db:rollback`
*   `rake db:schema:cache:clear`
*   `rake db:schema:cache:dump`
*   `rake db:schema:dump`
*   `rake db:schema:load`
*   `rake db:seed`
*   `rake db:setup`
*   `rake db:structure:dump`
*   `rake db:structure:load`
*   `rake db:version`

您需要做的就是安装它并添加`Rakefile`内容

```
load 'tasks/otr-activerecord.rake'
OTR::ActiveRecord.configure_from_file! 'config/database.yml' 
```

我更喜欢这个 gem 而不是`active_record_migrations`Standalone Migration 因为这两个 gem 依赖于`railties`几乎整个 Rails。例如，Nokogiri 编译需要很长时间，并且占用大量空间。

# windows - Windows 版本的预处理器和向后兼容的构建？

> ID：11882346
> 
> 赞同：3
> 
> 时间：2012-08-09T11:25:17.650
> 
> 标签：windows, boost, version, c-preprocessor, backwards-compatibility

我有两台机器，一台运行 Vista Ultimate 32，另一台运行 XP SP3。两台机器都安装了相同的VS2008版本。
我在第一台机器（vista）上构建了 boost 1.50.0，然后是依赖于 boost 的 libtorrent 库。
我在一些 libtorrent 构建指令中看到 win 版本是在预处理器中指定的，所以我做了目前似乎有意义的事情：

```
#define _WIN32_WINNT=0x0600  // being that the current OS is Vista 
```

构建成功，我能够在那台机器上运行应用程序。但是，当我尝试在另一个（XP）上运行它时，它失败并显示消息，例如：

> 无法在动态链接库 KERNEL32.dll 中找到过程入口点 SetFileInformationByHandle

现在，从逻辑上讲，我猜这与不兼容的版本有关，并且当这个变量以不同的值存在时，可能包含不同的 Windows 标头。

**要求：**我想在 Vista 或 7 上构建它，并且仍然能够在 XP 上运行它。
**问题：**我是否需要这个指令，如果需要，值应该是多少？如果我遗漏了什么，我还应该指定什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:20:19.267

尝试在 XP 上构建您的程序或设置`_WIN32_WINNT`为`0x0501`（如您的评论中所述）。[根据这份报告](http://upstream-tracker.org/compatibility/Windows_SDK_5.0_to_Windows_SDK_6.0/x86/compat_reports/kernel32.dll/abi_compat_report.html)，该`kernel32.dll`库是向后二进制兼容的，因此您可以使用该库的旧版本 (5.0) 构建程序并使用新版本 (6.0) 运行它，而无需重新编译。反之亦然，因为添加了一堆符号（其中之一）。`SetFileInformationByHandle`

# linq - Linq 中子查询中的 Sum 字段给出无法分配方法错误

> ID：11882350
> 
> 赞同：0
> 
> 时间：2012-08-09T11:25:32.387
> 
> 标签：linq, entity-framework, linq-to-sql

我希望能够对子 linq 查询进行分组，但 LinqPad 在这一行给出错误：

```
ratetocharge =rtc.rate.Sum 
```

错误是：无法将方法组分配给匿名类型属性。

任何人都可以建议我应该在该行中输入什么，以便给我费率表中的费率总和吗？

谢谢，

标记

```
var mtgRooms = RoomUnit
        .Where(r => r.building_id==1)
        .GroupBy(p => p.Type)
        .Select(g => new
            {
            TypeName = g.Key.type_name,
            TypeID = g.Key.type_id,
            TypeCount = g.Count(),
            rates = rates

        .Select (  rtc => 
                 new  
                 {
                    occ = rtc.occ, 
                    ratetocharge =rtc.rate.Sum  // this is the line which errors
                 }
                   )
                .GroupBy(pe => pe.occ)
             }
            );

            mtgRooms.Dump(); 
```

**编辑：添加更多细节**

表：

**桌房单位**

```
type_id (key - int)
type_name (string - eg. large room, small room, medium room)
building_id (int - denotes a number of buildings this room could be within) 
```

**费率**

```
rate_id
type_id (foreign key to RoomUnit)
occ (type of rate - ie. Desk, FullRoom) 
```

这个想法是我想提供一个看起来像这样的模型：

```
Type of Room
Number of Types of Room available
Type of Occ/Desks available
Sum of Rate (rate to charge) for each type of desk 
```

目前显示的是：

```
LargeRoom, Type 3049, Type Count 18 (or whatever is available)
    occ FullRoom, ratetocharge 250, numOfOcc 1
    occ FullRoom, ratetocharge 250, numOfOcc 1
    occ FullRoom, ratetocharge 250, numOfOcc 1
    occ Single Desk, ratetocharge 45, numOfOcc 1
    occ Single Desk, ratetocharge 45, numOfOcc 1

SmallRoom, Type 3093, Type Count 4 (or whatever is available)
    occ FullRoom, ratetocharge 150, numOfOcc 1
    occ FullRoom, ratetocharge 150, numOfOcc 1
    occ Single Desk, ratetocharge 45, numOfOcc 1
    occ Single Desk, ratetocharge 45, numOfOcc 1
    occ Single Desk, ratetocharge 45, numOfOcc 1 
```

而我希望模型在子表中按 Occ 对 rateToCharge 求和，例如：

```
LargeRoom, Type 3049, Type Count 18 (or whatever is available)
    occ FullRoom, ratetocharge 750, numOfOcc 3
    occ Single Desk, ratetocharge 90, numOfOcc 2

SmallRoom, Type 3093, Type Count 4 (or whatever is available)
    occ FullRoom, ratetocharge 300, numOfOcc 2
    occ Single Desk, ratetocharge 135, numOfOcc 3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T11:34:30.327

更改`ratetocharge =rtc.rate.Sum`为`ratetocharge =rtc.rate.Sum()`. 使用`Sum`编译器认为您正在尝试将 ratetocharge 变量分配给方法组；方法的方法集（包括重载）`Sum`。相反，您需要进行`Sum()`实际调用该方法的调用。

---编辑---查看您的更多信息，我将以此作为实施方式

```
var mtgRooms = RoomUnit
.Where(r => r.building_id==1)
.GroupBy(p => p.Type)
.Select(g => new
    {
    TypeName = g.Key.type_name,
    TypeID = g.Key.type_id,
    TypeCount = g.Count(),
    rates = Rates.Where(rt => rt.type_id == g.type_id).GroupBy(rt => rt.occ)
            .Select(proj => new  {
                occ = proj.Key,
                ratetocharge = proj.Sum(s => s.rate),
                numOfOcc = proj.count())                    
            })              
     }
); 
```

# ruby-on-rails-3 - 设计和 Facebook 自定义路由

> ID：11882353
> 
> 赞同：2
> 
> 时间：2012-08-09T11:25:53.767
> 
> 标签：ruby-on-rails-3, devise, routes

我正在尝试在我的网站上创建用户注册视图和模型，但我遇到了一个小问题：

我正在使用设计和omniauth来使facebook连接功能正常工作，但我希望我的facebook用户在他们第一次登录时创建他们的密码，这也有效，我将他们重定向到填写的注册表单和他们只需要输入密码。但我希望他们转到名为 /views/registrations/new_facebook.html.erb 的第二个“注册表格”，他们只能输入密码，我还将添加一些其他信息，

我创建了正确的视图并对其进行了测试，但我不知道如何创建正确的路由来绕过设计默认值

```
match '/facebook' => 'registrations#new', :as => 'new_facebook_user_registration' 
```

我相信问题在于匹配，因为那是不被认可的，

如果有人可以帮助我，那将是非常感谢，

我为 omniauth 添加了我的控制器代码：

```
class OmniauthCallbacksController < Devise::OmniauthCallbacksController
def all
user = User.from_omniauth(request.env["omniauth.auth"])
if user.persisted?
      flash[:success] = "Welcome back"
          sign_in_and_redirect user
else
  session["devise.user_attributes"] = user.attributes
  redirect_to new_facebook_user_registration_url
end
end
alias_method :facebook, :all 
```

结尾

如何使 redirect_to new_facebook_user_registration_url 真正起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:55:12.170

```
 devise_scope :user do 
 match "registrations/new_facebook" => "registrations#new_facebook" 
 end 
```

这就是我在注册控制器中复制新方法并将其命名为 new_facebook 的解决方案，现在一切都按预期工作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T11:41:20.713

我认为问题在于您没有覆盖重定向到该路径的设计方法。同样根据设计文档，您的路线应该使用“devise_for”调用设置。

这是描述如何执行您要求执行的操作的 wiki 页面，尽管您可能需要一些自定义逻辑来处理不是 facebook 注册的情况。

[https://github.com/plataformatec/devise/wiki/How-To:-Redirect-to-a-specific-page-on-successful-sign-up-](https://github.com/plataformatec/devise/wiki/How-To:-Redirect-to-a-specific-page-on-successful-sign-up-(registration) (注册)

该页面的一些示例代码：

```
class RegistrationsController < Devise::RegistrationsController
  protected

  def after_sign_up_path_for(resource)
    '/an/example/path'
  end
end 
```

和一个路线：

```
devise_for :users, :controllers => { :registrations => "registrations" } 
```

# facebook - 无法使用新的 FB 帐户注册/登录

> ID：11882356
> 
> 赞同：0
> 
> 时间：2012-08-09T11:26:12.717
> 
> 标签：facebook, cocoalibspotify-2.0

为了测试 CocoaLibSpotify 中的用户注册，我创建了一个新的 Facebook 帐户。创建帐户（并验证电子邮件地址）后，我尝试登录我的应用程序（使用 CocoaLibSpotify），但出现以下错误：“一般永久错误”（来自 CLS 的错误代码 10）。

有什么问题？

*笔记：*

*   我已经对登录凭据进行了三次检查，并在 Facebook 上登录了该帐户。
*   尝试使用无效凭据登录另一个帐户会给我另一个错误。
*   此外，使用有效凭据登录帐户也可以正常工作。
*   我没有使用任何其他 Spotify 客户端（台式机、常规 Spotify 客户端等）登录该帐户

**编辑：** 为了继续前进，我在桌面上登录了该帐户并接受了 Facebook 的内容并播放了一首曲目。之后，我再次尝试通过 CLS 登录，但出现错误：“需要高级帐户”。用户不是应该在首次移动登录时获得 48 小时免费试用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:39:16.577

> 用户不是应该在首次移动登录时获得 48 小时免费试用吗？

来自 Spotify 自己的客户，是的。libSpotify 应用程序目前没有资格创建新用户和试用版。

# facebook - 高级选项卡中不再有 Facebook 画布设置

> ID：11882357
> 
> 赞同：0
> 
> 时间：2012-08-09T11:26:13.530
> 
> 标签：facebook, facebook-canvas

我正在尝试查找 Facebook 页面选项卡的画布流体选项。不幸的是，它们不再出现在“高级”部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:57:40.767

facebook 页面选项卡的页面大小可以是窄的也可以是宽的，当您选择您的应用程序是一个页面选项卡时，您可以在基本选项卡上选择这些选项。这里有关于此的信息[https://developers.facebook.com/docs/appsonfacebook/pagetabs/](https://developers.facebook.com/docs/appsonfacebook/pagetabs/)。请参阅文档，因为这对于 stackoverflow 来说并不是一个真正合适的问题。标准应用程序可以使用此处概述的流体宽度[https://developers.facebook.com/docs/appsonfacebook/tutorial/](https://developers.facebook.com/docs/appsonfacebook/tutorial/)

# c# - 在特定条件下过滤 dll

> ID：11882358
> 
> 赞同：0
> 
> 时间：2012-08-09T11:26:17.037
> 
> 标签：c#, .net, dll

我有一堆用 C# 编写的 dll，我知道其中使用的命名空间名称。我只需要获取使用 sqlconnection.open() 方法或在其中使用命名空间 system.data.sqlclient 的 dll 列表。有什么方法可以用 C# 以编程方式完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:22:45.803

试试这个：

```
class Program
{
    static void Main(string[] args)
    {
        var methodsCallingDbConnectionOpen = AssemblyDefinition.ReadAssembly(typeof(Program).Assembly.Location)
            .MainModule
            .GetTypes()
            .SelectMany(type => type.Methods)
            .Where(method => method.HasBody &&
                method.Body.Instructions.Any(instruction =>
                    instruction.OpCode.Code == Code.Callvirt && instruction.Operand is MethodReference &&
                    ((MethodReference)instruction.Operand).FullName.Contains("System.Data.Common.DbConnection::Open")));

        foreach (var method in methodsCallingDbConnectionOpen)
        {
            Console.WriteLine(method);
        }

        Console.ReadLine();
    }

    static void Foo()
    {
        using (var connection = new SqlConnection())
        {
            connection.Open();
        }
    }
} 
```

产生：

> System.Void ConsoleApplication1.Program::Foo()

笔记：

*   此示例使用[`Mono.Cecil`](http://www.mono-project.com/Cecil).
*   此示例检测对 的调用`DbConnection.Open`。要检测正在使用的 DbConnection 的哪个后代，您必须查看以前的 IL 指令（例如，ctor 调用）。

# java - javax.xml.ws.WebServiceException：访问 WSDL 失败。响应：'401：未经授权'

> ID：11882360
> 
> 赞同：2
> 
> 时间：2012-08-09T11:26:20.760
> 
> 标签：java, wsdl, weblogic, jax-ws, webservice-client

我正在尝试访问我正在处理的项目的 Web 服务。我正在使用 JAX-WS 并且该应用程序部署在 weblogic 上。当我尝试访问 WS 时，出现以下异常：

```
javax.portlet.PortletException: javax.xml.ws.WebServiceException: Failed to access the WSDL at: http://xxx.xxxx.ro:40000/idm/ws/cup?wsdl. It failed with: 
Response: '401: Unauthorized' for url: 'http://xxx.xxxx.ro:40000/idm/ws/cup?wsdl'.
at com.bea.portlet.container.PortletStub.processAction(PortletStub.java:346)
at com.bea.portlet.container.AppContainer.invokeProcessAction(AppContainer.java:678)
........ 
```

我阅读了很多关于问题的帖子，并尝试了不同类型的身份验证。我尝试在不同的用例中使用 BindingProvider、basicHTTPAuth、禁用 HostnameVerifier 等，但仍然没有结果。

以下是我的代码片段，作为最后一次尝试的版本：

```
Authenticator.setDefault(new Authenticator() {
                    @Override
                    protected PasswordAuthentication getPasswordAuthentication() {
                        return new PasswordAuthentication(
                            username,
                            password.toCharArray());
                    }
                });

    ComputeUserProfileImplService computeUserProfileImplService = new ComputeUserProfileImplService(
    new URL(null, endpointURL, new sun.net.www.protocol.http.Handler()),
    new QName("http://xxx.xx.xxxxx.xxxxx.com/",
            "ComputeUserProfileImplService"));
    ComputeUserProfileImpl computeUserProfile = computeUserProfileImplService
    .getComputeUserProfileImplPort(); 
```

ComputeUserProfileImplService 代码如下所示：

```
private final static URL COMPUTEUSERPROFILEIMPLSERVICE_WSDL_LOCATION;
private final static Logger logger = Logger.getLogger(com.xxxxx.xxxxx.xx.xxxxx.cup.ComputeUserProfileImplService.class.getName());

static {
    URL url = null;
    try {
        URL baseUrl;
        baseUrl = com.xxxxx.xxxxx.xx.xxxxx.xxx.ComputeUserProfileImplService.class.getResource("");
        url = new URL(baseUrl, "http://xxxx.xxxxx.ro:40000/idm/ws/cup?wsdl");

    } catch (MalformedURLException e) {
        logger.warning("Failed to create URL for the wsdl Location: 'xxxxxxxxxxxxxxxx', retrying as a local file");
        logger.warning(e.getMessage());
    }
    COMPUTEUSERPROFILEIMPLSERVICE_WSDL_LOCATION = url;
} 
```

很抱歉替换链接，但我无权发布它们，因为它是一个非常知名的组织。如果你能帮助我提出一些建议，我将不胜感激。我一直在寻找解决方案，但我被卡住了..我想不通。它应该是适用于我的这个 weblogic 问题的解决方法......但我只是找不到它。如果你需要它，我会发布一些其他的片段。希望我对此很清楚。

提前致谢 ！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T08:58:58.693

不幸的是，Weblogic 有一种不同的方法，它使用自己的 URLStreamHandler，由于某种原因忽略了身份验证。

尝试使用 Sun 的实现：

代替

```
 url = new URL(address); // use WebLogic handler 
```

采用

```
 url = new URL(null, address, new sun.net.www.protocol.http.Handler()); // use Sun's handler 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-29T18:50:37.773

我在 Weblogic 中遇到了同样的问题。我可以向您确认 Paulius Matulionis 建议的解决方案在 Weblogic 11 中对我有用：

```
import my.MyPortType;

import javax.xml.namespace.QName;
import javax.xml.ws.BindingProvider;
import javax.xml.ws.Service;
import javax.xml.ws.handler.MessageContext;
import java.net.Authenticator;
import java.net.MalformedURLException;
import java.net.PasswordAuthentication;
import java.net.URL;
import java.util.Collections;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

public class MyWebServiceClient {

    public static void main(String[] args) {
        URL url = null;
        try {
            url = new URL("http://host:10001/mycontext/ws?WSDL");
        } catch (MalformedURLException e) {
            e.printStackTrace();
        }

        try {
            final String username = "some";
            final String password = "other";
            Authenticator.setDefault(new Authenticator() {
                @Override
                protected PasswordAuthentication getPasswordAuthentication() {
                    return new PasswordAuthentication(
                            username,
                            password.toCharArray());
                }
            });
            QName qname = new QName("http://whatevertheqname/", "whatevertheservicename");
            Service service = Service.create(url, qname);
            MyPortType proxy = service.getPort(MyPortType.class);
            Map<String, Object> requestContext = ((BindingProvider) proxy).getRequestContext();
            requestContext.put(BindingProvider.ENDPOINT_ADDRESS_PROPERTY, url.toString());
            requestContext.put(BindingProvider.USERNAME_PROPERTY, username);
            requestContext.put(BindingProvider.PASSWORD_PROPERTY, password);
            Map<String, List<String>> headers = new HashMap<String, List<String>>();
            headers.put("Timeout", Collections.singletonList("10000"));
            requestContext.put(MessageContext.HTTP_REQUEST_HEADERS, headers);
            String result = proxy.myMethod23");

            System.out.println("Result is: " + result);

        } catch (Exception e) {
            e.printStackTrace();
            throw new RuntimeException("Error occurred in operations web service client initialization", e);
        }

    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-11T12:50:39.033

我没有在 WebLogic 中尝试过，但是在 Tomcat、Glassfish、Apache Karaf 上，对需要基本身份验证的 Web 服务的 cliet 调用非常有效：

```
/**
 * Proxy.
 */
private OperationsService proxy;

/**
 * Operations wrapper constructor.
 *
 * @throws SystemException if error occurs
 */
public OperationsWrapper()
        throws SystemException {
    try {
        final String username = getBundle().getString("wswrappers.operations.username");
        final String password = getBundle().getString("wswrappers.operations.password");
        Authenticator.setDefault(new Authenticator() {
            @Override
            protected PasswordAuthentication getPasswordAuthentication() {
                return new PasswordAuthentication(
                        username,
                        password.toCharArray());
            }
        });
        URL url = new URL(getBundle().getString("wswrappers.operations.url"));
        QName qname = new QName("http://hltech.lt/ws/operations", "Operations");
        Service service = Service.create(url, qname);
        proxy = service.getPort(OperationsService.class);
        Map<String, Object> requestContext = ((BindingProvider) proxy).getRequestContext();
        requestContext.put(BindingProvider.ENDPOINT_ADDRESS_PROPERTY, url.toString());
        requestContext.put(BindingProvider.USERNAME_PROPERTY, username);
        requestContext.put(BindingProvider.PASSWORD_PROPERTY, password);
        Map<String, List<String>> headers = new HashMap<String, List<String>>();
        headers.put("Timeout", Collections.singletonList(getBundle().getString("wswrappers.operations.timeout")));
        requestContext.put(MessageContext.HTTP_REQUEST_HEADERS, headers);
    } catch (Exception e) {
        LOGGER.error("Error occurred in operations web service client initialization", e);
        throw new SystemException("Error occurred in operations web service client initialization", e);
    }
} 
```

我不认为 WebLogic 有什么不同。这应该有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-11T13:07:26.037

以下是可以解决您的问题的建议：

1) 更改 WEBLOGIC 脚本 setDomainEnv.sh 以强制 WEBLOGIC 使用`SunHttpHandler`.

或者

2) 使用 shell 脚本/批处理文件从命令提示符调用 web 服务。

或者

3) 在您的网络服务中尝试这个 url 对象`new URL(null, "http://...", new sun.net.www.protocol.http.Handler());`

或者

4) 编写自己的 sun http 处理程序。

或者

5) 尝试通过在其中添加新创建的 web 服务来更新 weblogic-webservice.xml。

或者

6) 尝试使用 jax-rpc 而不是 jax-ws。

希望前两个中的任何一个都可以解决您的问题，但是其他选项也很有帮助。

# c# - 与抽象类的可访问性不一致

> ID：11882363
> 
> 赞同：4
> 
> 时间：2012-08-09T11:26:42.227
> 
> 标签：c#, public, internal, protected, access-modifiers

我有一个内部抽象类`InternalClassBase`和两个（也是内部）类`InternalClass1`和`InternalClass2`，它们继承自`InternalClassBase`.

我还有一个公共抽象类`PublicClassBase`和两个（也是公共）类`PublicClass1`和`PublicClass2`，它们继承自`PublicClassBase`.

具有type的`PublicClassBase`受保护成员，因此两者都可以使用它。`XXX``InternalClassBase``PublicClass1``PublicClass2`

这是我的代码：

```
internal abstract class InternalClassBase { }
internal class InternalClass1 : InternalClassBase { }
internal class InternalClass2 : InternalClassBase { }

public abstract class PublicClassBase
{
    protected InternalClassBase XXX;  // this is where the error happens
}
public class PublicClass1 : PublicClassBase { }
public class PublicClass2 : PublicClassBase { } 
```

为什么在我的示例中不能`PublicClassBase`包含该`XXX`成员？我认为这`XXX`只会在`PublicClassBase`,`PublicClass1`和内可见`PublicClass2`，但不能在它之外。

我还认为我了解访问修饰符，但显然我不了解:)

编辑 - 错误发生在 PublicClassBase 中的 XXX 声明处，异常消息是：不一致的可访问性：字段类型 'ClassLibrary2.InternalClassBase' 比字段 'ClassLibrary2.PublicClassBase.XXX' 更难访问，但如何保护比内部更容易访问?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T11:32:34.493

想象一下，在声明了示例中的一种类型之外的程序集中*，*您声明`PublicClass3`了继承自`PublicClassBase`. 该字段`XXX`应该是可见的`PublicClass3`，因为它是受保护的，但该字段的类型是内部的，所以同时，它不应该*是*可见的`PublicClass3`。

显然，您不能同时拥有两者，因此会出现错误。

您可以通过制作您的字段`private`或制作`PublicClassBase`及其子项来解决此问题`internal`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T11:35:02.097

鉴于您提供给我的程序集，包含上述类，我可以继续`PublicClassBase`在引用您的程序集的不同程序集中创建一个子类。

在那个类中，我必须实现您的受保护`XXX`类型成员`InternalClassBase`- 显然我不能，因为`InternalClassBase`被标记为`internal`.

# android - 从列表视图中选择一个项目以及android中的一个按钮

> ID：11882368
> 
> 赞同：0
> 
> 时间：2012-08-09T11:26:52.587
> 
> 标签：android, button, onclick, android-listview

我有一个按钮以及 XML 中的列表视图

按钮用于新联系人，列表用于联系人列表。1.如何在这个List View上使用ArrayAdapter/OnListItemClick？

```
setListAdapter(new ArrayAdapter<String>(Contacts.this, R.id.ListView)); 
```

这个声明正确吗？

2.这个方法正确吗？

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/bAddContact"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="ADD CONTACT" />

    <ListView
        android:id="@+id/ListView"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </ListView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T11:38:13.763

试试这个来显示简单的列表

```
 String [] names = 
    { "a" , "b", "c", "d", "e", "f", "g", "h", "i", "j",
            "a1" , "b1", "c1", "d1", "e1", "f1", "g1", "h1", "i1", "j1",
            "a2" , "b2", "c2", "d2", "e2", "f2", "g2", "h2", "i2", "j2",
            "a3" , "b3", "c3", "d3", "e3", "f3", "g3", "h3", "i3", "j3","j4"
    }; 

     ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, names );
     yourList.SetListAdapter(adapter); 
```

这是使用适配器的方法。为了获得选定的项目，`listView`试试这个。

```
 listView.setOnItemClickListener(new OnItemClickListener() {

      public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
     long arg3) {
             // TODO Auto-generated method stub
        String  getSelectedItemOfList = yourList.get(pos); // here you can get selected item.
     }
   }); 
```

我想这就是你想要的。:)

# java - 编译算法 NetBeans Java

> ID：11882369
> 
> 赞同：0
> 
> 时间：2012-08-09T11:26:57.033
> 
> 标签：java, algorithm, windows-7, compilation, netbeans-7

这听起来可能很愚蠢，但我决定接受挑战，在 OOP NetBeans - Java 的帮助下编写翻译算法，只有 Java 的基本知识，并且只有翻译算法（编译器）中的理论。

我在这里寻求您的帮助，如果你们中的任何人以某种方式从一种编程语言翻译成另一种编程语言，我很高兴如果您能向我提供您使用过的信息的链接或让我朝着正确的方向前进，那么我可以正确开始！

先感谢您

最好的阿玛尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:32:12.773

编译理论是一个庞大的研究领域，其中包括[形式语言](http://en.wikipedia.org/wiki/Formal_language)、[图论](http://en.wikipedia.org/wiki/Graph_theory)、低级优化等。

开始学习它的好地方是**[龙书](https://rads.stackoverflow.com/amzn/click/com/0321486811)**。

如果您使用的是 java，一个可以帮助您完成编译器的大部分[前端任务的有用工具是](http://en.wikipedia.org/wiki/Compiler#Front_end)[JavaCC](http://javacc.java.net/)

# jquery - 编辑文本字段的按钮。将 jQuery 添加到组合中

> ID：11882370
> 
> 赞同：0
> 
> 时间：2012-08-09T11:27:04.953
> 
> 标签：jquery, button, input

一段时间以来，我的屏幕键盘工作正常。

我最近不得不将[jQuery](http://jquery.com/)添加到系统中，现在它不再工作了。按下按钮没有任何作用，因为按下按钮时文本输入不再具有焦点，我无法从我的 jscript 重新关注它。

输入 html（注意使用优秀的[jq_watermark](https://code.google.com/p/jq-watermark/) - 我需要 jQuery 的原因）：

```
<input class="search jq_watermark" id="barcode" name="barcode" type="text" title="Please enter search criteria."/> 
```

这是其中一个按钮的 html：

```
<td onclick="addChar('Q')"><button class="osk" id="Key_Q" value="Q">Q</button></td> 
```

这是 addChar 脚本。请注意关注该领域的许多尝试，现在都失败了 jQuery 存在：

```
// The field the keyboard should edit.
field = document.forms['main'].elements.item('barcode');

function addChar(c) {
  console.log("Char("+c+")");
  field.focus();
  if(field.maxLength == -1 || field.value.length < field.maxLength) {
    // Handle different browsers.
    if (field.selectionStart || field.selectionStart == '0') {
      var start = field.value.substr(0,field.selectionStart);
      var end = field.value.substr(field.selectionEnd,field.length);
      field.value = start + c + end;
    } else if (document.selection) {
      field.focus();
      var range = document.selection.createRange();
      range.text = c;
      range.moveStart('textedit',1);
      range.select();
    } else {
      field.value = field.value + c;
    }
    field.focus();
  }
  return false;
} 
```

我必须添加它以停止提交表单的按钮。我怀疑这是我需要放新东西的地方，但是对 jQuery 来说是新手，我不知道是什么：

```
$("button.osk").click(function(event){
  // Stop it submitting in case the keyboard is inside a form.
  event.preventDefault();
}); 
```

PS 我知道周围有整洁的 jQuery 弹出式键盘，我很想用他们的替换我的，但现在这不是一个选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T11:43:53.987

使用 Jquery 时，您必须将所有 jquery 脚本放在以下之间：

```
<script>
   $(document).ready(function()){
     //your jquery stuff here
   });
</script> 
```

我这么说的唯一原因是您没有提供所有代码。是否可以在 jsFiddle.net 或类似的东西上提供基础知识，以便有人可以为您测试它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T13:04:28.913

问题解决了：

问题似乎在这里：

```
field = document.forms['main'].elements.item('barcode'); 
```

显然 jQuery 的到来使得这行不通。我暂时将其替换为：

```
var field;
$(document).ready(function(){
   field = document.forms['main'].elements['barcode'];
}); 
```

请注意，我将它包装在一个`ready`函数中，而不是通过`items`. 这在 IE8 中不起作用。我将不得不解决这个问题。

# android - 无法在 android 中添加 Spongycastle 作为提供者

> ID：11882371
> 
> 赞同：1
> 
> 时间：2012-08-09T11:27:06.707
> 
> 标签：android, security, spongycastle

我正在尝试使用 spongycastle 并遵循我可以获得的所有[帮助来包含它，但是当应用程序执行时它在我将其添加为提供程序的代码处崩溃：](https://stackoverflow.com/questions/8390493/android-spongy-castle-archive-for-required-library)

```
static {
    Security.addProvider(new org.spongycastle.jce.provider.BouncyCastleProvider());
} 
```

我将 scprov-jdk15-1.46.99.3-UNOFFICIAL-ROBERTO-RELEASE.jar 作为外部 JAR 添加到我的项目中，并且 eclipse 不报告任何错误。

有任何想法吗？

堆栈跟踪：

```
08-11 12:41:56.653: W/ActivityThread(683): Application com.ljbrits.test4 is waiting for the debugger on port 8100...
08-11 12:41:56.723: I/System.out(683): Sending WAIT chunk
08-11 12:41:56.723: I/dalvikvm(683): Debugger is active
08-11 12:41:56.914: I/System.out(683): Debugger has connected
08-11 12:41:56.914: I/System.out(683): waiting for debugger to settle...
08-11 12:41:57.113: I/System.out(683): waiting for debugger to settle...
08-11 12:41:57.153: I/dalvikvm(683): threadid=3: reacting to signal 3
08-11 12:41:57.203: I/dalvikvm(683): Wrote stack traces to '/data/anr/traces.txt'
:
08-11 12:41:59.344: I/System.out(683): waiting for debugger to settle...
08-11 12:41:59.546: I/System.out(683): debugger has settled (1437)
08-11 12:41:59.693: I/dalvikvm(683): threadid=3: reacting to signal 3
08-11 12:41:59.824: I/dalvikvm(683): Wrote stack traces to '/data/anr/traces.txt'
08-11 12:42:00.173: I/dalvikvm(683): threadid=3: reacting to signal 3
08-11 12:42:00.183: I/dalvikvm(683): Wrote stack traces to '/data/anr/traces.txt'
08-11 12:42:00.193: D/dalvikvm(683): threadid=1: still suspended after undo (sc=1 dc=1)
08-11 12:42:00.283: E/dalvikvm(683): Could not find class 'org.spongycastle.jce.provider.BouncyCastleProvider', referenced from method com.ljbrits.test4.Test4Activity.<clinit>
08-11 12:42:00.283: W/dalvikvm(683): VFY: unable to resolve new-instance 417 (Lorg/spongycastle/jce/provider/BouncyCastleProvider;) in Lcom/ljbrits/test4/Test4Activity;
08-11 12:42:00.283: D/dalvikvm(683): VFY: replacing opcode 0x22 at 0x0000
08-11 12:42:00.363: D/dalvikvm(683): DexOpt: unable to opt direct call 0x07d8 at 0x02 in Lcom/ljbrits/test4/Test4Activity;.<clinit>
08-11 12:42:00.683: I/dalvikvm(683): threadid=3: reacting to signal 3
08-11 12:42:00.714: D/dalvikvm(683): threadid=1: still suspended after undo (sc=1 dc=1)
08-11 12:42:00.714: I/dalvikvm(683): Wrote stack traces to '/data/anr/traces.txt'
:
08-11 12:42:06.233: I/dalvikvm(683): Wrote stack traces to '/data/anr/traces.txt'
08-11 12:42:08.719: W/dalvikvm(683): Exception Ljava/lang/NoClassDefFoundError; thrown while initializing Lcom/ljbrits/test4/Test4Activity;
08-11 12:42:08.719: W/dalvikvm(683): Class init failed in newInstance call (Lcom/ljbrits/test4/Test4Activity;) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T13:59:29.623

此处抛出的 NoClassDefFoundError 表明 SpongyCastle 类未包含在您部署的 apk 文件中 - 尝试解压缩 apk 以检查这一点）。这可能是由一些原因引起的，请确保您进行了干净的构建（您是使用 ant 还是 eclipse 构建？），如果问题仍然存在，则可能是 proguard 问题 - ProGuard 可能会删除它认为未使用的类 - 可以你发布你的 proguard.cfg 吗？

# c++ - 作为 OuterClass 对象成员的 InnerClass 对象被创建两次

> ID：11882372
> 
> 赞同：0
> 
> 时间：2012-08-09T11:27:07.390
> 
> 标签：c++, constructor, destructor

我有两个类：OuterClass 和 InnerClass。InnerClass 是 OuterClass 的私有成员，应使用 InnerClass(int) 构造函数在 OuterClass 构造函数中创建，但仍会调用默认的 InnerClass 构造函数。

内部类.hpp：

```
#ifndef INNERCLASS_HPP_
#define INNERCLASS_HPP_

class InnerClass {
public:
    int a;
    InnerClass();
    InnerClass(int);
    ~InnerClass();
};

#endif /* INNERCLASS_HPP_ */ 
```

内部类.cpp：

```
#include "InnerClass.hpp"
#include <iostream>

InnerClass::InnerClass() {
    a = 1;
    std::cout << "inner class constructed, a = " << a << std::endl;
}
InnerClass::InnerClass(int x) {
    a = x;
    std::cout << "inner class constructed, a = " << a << std::endl;
    //automatically: object InnerClass (a=3) is destroyed here...
}
InnerClass::~InnerClass() {
    std::cout << "inner class destructed, a = " << a << std::endl;
} 
```

外部类.hpp：

```
#ifndef OUTERCLASS_HPP_
#define OUTERCLASS_HPP_

#include "InnerClass.hpp"

class OuterClass {
private:
    InnerClass blah;
public:
    OuterClass();
    ~OuterClass();
    void doSth();
};

#endif /* OUTERCLASS_HPP_ */ 
```

外部类.cpp：

```
#include "OuterClass.hpp"
#include <iostream>

OuterClass::OuterClass() {
    // automatically: blah = InnerClass();
    std::cout << "outer class constructing started, blah.a = " << blah.a << std::endl;
    blah = InnerClass(3);
    std::cout << "outer class constructed" << std::endl;
}

OuterClass::~OuterClass() {
    std::cout << "outer class destructed" << std::endl;
}

void OuterClass::doSth() {
    std::cout << "doSth: " << blah.a << std::endl;
} 
```

主要的：

```
#include "OuterClass.hpp"
#include <iostream>

int main(int argc, char** argv) {
    std::cout << "Compiled at " << __TIME__ << std::endl;

    OuterClass x = OuterClass();
    x.doSth();

    std::cout << "done" << std::endl;
} 
```

输出：

```
Compiled at 12:11:12
inner class constructed, a = 1 //this is unexpected
outer class constructing started, blah.a = 1 //this should be random data
inner class constructed, a = 3
inner class destructed, a = 3 //this is unexpected
outer class constructed
doSth: 3
done
outer class destructed
inner class destructed, a = 3 
```

问题：

1.  为什么在 OuterClass 构造函数的开头调用 InnerClass 的默认构造函数？
2.  什么以及为什么在 OuterClass 构造函数中被破坏（“内部类被破坏，a = 3 //这是意外的”）？
3.  似乎带有 a = 3 的 InnerClass 对象在 OuterClass 构造函数中被破坏了，为什么方法 doSth() 返回 3 而不是随机数据？
4.  为什么删除 InnerClass() 构造函数（从 InnerClass.hpp 和 InnerClass.cpp 文件中）会导致 OuterClass.cpp 文件中的 OuterClass 构造函数出现编译时错误？该错误表示未找到 InnerClass() 定义。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T11:29:25.953

在构造函数中使用初始化列表。

```
OuterClass::OuterClass() : blah(3) {
    // automatically: blah = InnerClass();
    std::cout << "outer class constructing started, blah.a = " << blah.a << std::endl;
    std::cout << "outer class constructed" << std::endl;
} 
```

自从你使用

```
OuterClass::OuterClass() {
    // automatically: blah = InnerClass();
    std::cout << "outer class constructing started, blah.a = " << blah.a << std::endl;
    blah = InnerClass(3);
    std::cout << "outer class constructed" << std::endl;
} 
```

首先初始化 blah 将被称为默认 c-tor 和 in `blah = InnerClass(3);`，创建临时对象并将其复制到 blah，之后此字符串将被称为临时对象的析构函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T11:31:53.753

> 1) 为什么在 OuterClass 构造函数的开头调用 InnerClass 的默认构造函数？

构建`blah`.

> 2）什么以及为什么在 OuterClass 构造函数中被破坏（“内部类被破坏，a = 3 //这是意外的”）？

你在`InnerClass(3)`构造函数的第二行构造的。您用来保存分配给 的值的那个`blah`。它被破坏，因为一旦分配完成，它就会超出范围`blah`。

> 3) 似乎带有 a = 3 的 InnerClass 对象在 OuterClass 构造函数中被破坏了，为什么方法 doSth() 返回 3 而不是随机数据？

因为您将值分配`3`给`blah`. 您的代码读取；

`blah = InnerClass(3);`

这将创建一个值为 3 的 InnerClass，然后将其值复制到`blah`. 所以两者`blah`和这个临时对象都具有相同的值。然后临时销毁。

如果您考虑一下，没有其他明智的方法可以实现这行代码。

> 4) 为什么删除 InnerClass() 构造函数（从 InnerClass.hpp 和 InnerClass.cpp 文件中）会导致 OuterClass.cpp 文件中的 OuterClass 构造函数出现编译时错误？该错误表示未找到 InnerClass() 定义。

因为那你一开始就没有办法建造`blah`。（正如其他人指出的那样，您可能希望`blah`首先正确构造一个初始化列表，而不是默认构造它，然后不得不去扭曲来修复它。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T11:30:33.867

```
OuterClass::OuterClass() /* default blah constructor is called here */ {
    std::cout << "outer class constructing started, blah.a = " << blah.a << std::endl;
    blah = InnerClass(3); /* a temporary InnerClass is created */
    std::cout << "outer class constructed" << std::endl;
} //temporary InnerClass destroyed (out of scope) 
```

用于`initializer list`防止调用默认构造函数，如 ForEveR 建议的那样

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T11:37:27.953

1.  当 OuterClass 的构造函数开始执行 body 时，必须构造所有成员。因为有一个`blah`InnerClass 成员，所以它被构造了。

2.  当您`blah`在 OuterClass::OuterClass() 中分配时，会创建一个临时实例。这是事情的顺序：

    *   构造了一个临时的 InnerClass(3)。
    *   它被分配给`blah`。
    *   临时值被破坏——这就是为什么有一个析构函数调用。
3.  从 2 开始： blah 在上面 #2 中提到的分配中设置为 3。

4.  有人会推断，在 C++ 中，如果您声明了一个专门的参数接受构造函数，则编译器不再在您背后创建默认构造函数。我现在懒得去研究标准中的相关地方，编辑们可以随时更正这一点。

如果您按以下方式检测 InnerClass，它会对您有所帮助：

1.  保留一个静态实例计数器，并将其复制到每个实例。这样你就知道哪个实例正在报告事情。

2.  手动写入`InnerClass & operator=(const InnerClass &)`以查看何时调用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T11:59:58.993

*（PS：你是从 Java World 到 C++ 的吗？）*

**输出解释：**

```
inner class constructed, a = 1 //this is unexpected 
```

首先使用默认构造函数构造 InnerClass

```
outer class constructing started, blah.a = 1 //this should be random data 
```

这是在上一步中使用默认 ctor 构造的 InnerClass 的值

```
inner class constructed, a = 3 
```

使用重载的 ctor 构造一个临时的 InnerClass 并分配给 blah 成员（调用隐式 operator= - 您可以通过重载 operator= 来检查）

```
inner class destructed, a = 3 //this is unexpected 
```

上一步创建的临时 InerClass 被销毁

```
outer class constructed
doSth: 3
done
outer class destructed
inner class destructed, a = 3 
```

**答案：**

*为什么在 OuterClass 构造函数的开头调用 InnerClass 的默认构造函数？*

因为你有 InnerClass 成员。您应该将其设为指针或使用初始化列表。

```
OuterClass::OuterClass() 
: blah(3)
{
    // automatically: blah = InnerClass();
    std::cout << "outer class constructing started, blah.a = " << blah.a << std::endl;
    // blah = InnerClass(3);
    std::cout << "outer class constructed" << std::endl;
} 
```

*什么以及为什么在 OuterClass 构造函数中被破坏（“内部类被破坏，a = 3 //这是意外的”）？*

临时的 InnerClass 在这里被销毁。

*似乎带有 a = 3 的 InnerClass 对象在 OuterClass 构造函数中被破坏了，为什么方法 doSth() 返回 3 而不是随机数据？*

blah 成员现在拥有一个值为 3 的 InnerClass 对象的副本

*为什么删除 InnerClass() 构造函数（从 InnerClass.hpp 和 InnerClass.cpp 文件中）会导致 OuterClass.cpp 文件中的 OuterClass 构造函数出现编译时错误？该错误表示未找到 InnerClass() 定义。*

您的意思是删除默认构造函数。是的，错误是预期的，因为 blah 成员首先使用默认 ctor 创建。

# jquery - 我可以在画布上添加 3 个图像，应用不透明度，然后在后面叠加另一个图像吗？

> ID：11882373
> 
> 赞同：0
> 
> 时间：2012-08-09T11:27:11.320
> 
> 标签：jquery, html5-canvas

我在画布上绘制了 3 张图像并使用此解决方案将它们混合，一切正常，我很高兴，但我想对画布上的像素应用不透明度 - 类似于此方法 - [http://www .patrick-wied.at/blog/how-to-create-transparency-in-images-with-html5canvas](http://www.patrick-wied.at/blog/how-to-create-transparency-in-images-with-html5canvas)已经尝试过但没有用。

一旦画布像素应用了不透明度，我就需要在半透明像素下方添加另一个图像，并将整个图像导出为 png。

这是我的图像和混合代码

```
 var img1 = document.getElementById("userImage")

  var img2 = document.getElementById('right_cheekImage');
  var img3 = document.getElementById('left_cheekImage');
  var img4 = document.getElementById('left_eyeImage');

  var canvas = document.getElementById("canvasID");
  var context = canvas.getContext("2d");

  var width = img1.width;
  var height = img1.height;
  canvas.width = 644;
  canvas.height = 490;

  context.drawImage(img1,0, 0, width, height);
  var image1 = context.getImageData(0, 0, width, height);
  var imageData1 = image1.data;
  context.drawImage(img2, img2.left, img2.top);
  context.drawImage(img3, img3.left, img3.top);
  context.drawImage(img4, img4.left, img4.top);

  var image2 = context.getImageData(0, 0, width, height);
  var imageData2 = image2.data;

  while (pixels--) {
        imageData1[pixels] = imageData1[pixels] * blendOne + imageData2[pixels] * blendTwo;
  }
  //apply opacity to pixels currently on the canvas
  for(var i=3; i < length; i+=4){
        imageData1[i] = 50;
  }

  image1.data = imageData1;

  //put in userimage again but under others
  context.drawImage(img1,newOffset, topPos, width, height);

  context.putImageData(image1, 0, 0); 
```

如您所见，我添加了一些代码来为画布上当前的像素添加不透明度，但它不起作用。

如果有人能对此有所了解，那就太棒了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T12:13:32.680

只是一个[快速的小提琴](http://jsfiddle.net/H27vg/)向您展示如何合并不同的画布。

一种常见的技术是在一个画布中进行图像处理，然后将这个*不可见*的画布绘制到您实际要显示的画布中。

# java - 在 javascript 中模拟 pbewithmd5anddes

> ID：11882379
> 
> 赞同：1
> 
> 时间：2012-08-09T11:27:34.797
> 
> 标签：java, javascript, encryption, md5, des

前段时间我用java做了一个密码生成程序。它根据输入字符串和密码生成密码。它使用：pbewithMD5andDES

现在我正在用 javascript 为移动设备制作一个新版本。我发现库 crypto-js 女巫允许我生成 MD5 哈希并使用 DES 加密

但我似乎无法生成相同的密码

我究竟做错了什么？

爪哇版：

```
 public static String generate(String password, String passphase) throws Exception {
    try {
        PBEKeySpec pbeKeySpec = new PBEKeySpec(passphase.toCharArray());
        PBEParameterSpec pbeParamSpec;
        SecretKeyFactory keyFac;
        // Salt
        byte[] salt = {(byte) 0xc8, (byte) 0x73, (byte) 0x61, (byte) 0x1d, (byte) 0x1a, (byte) 0xf2, (byte) 0xa8, (byte) 0x99};
        // Iteration count
        int count = 20;
        // Create PBE parameter set
        pbeParamSpec = new PBEParameterSpec(salt, count);
        keyFac = SecretKeyFactory.getInstance("PBEWithMD5AndDES");
        SecretKey pbeKey = keyFac.generateSecret(pbeKeySpec);
        // Create PBE Cipher
        Cipher pbeCipher = Cipher.getInstance("PBEWithMD5AndDES");
        // Initialize PBE Cipher with key and parameters
        pbeCipher.init(Cipher.ENCRYPT_MODE, pbeKey, pbeParamSpec);
        // Our cleartext
        byte[] cleartext = password.getBytes();
        // Encrypt the cleartext
        byte[] ciphertext = pbeCipher.doFinal(cleartext);
        return byteArrayToHexString(ciphertext).substring(0, 12);
    } catch (Exception ex) {
        throw new Exception(ex.getMessage());
    }
}

public static String byteArrayToHexString(byte[] b){
    StringBuilder sb = new StringBuilder(b.length * 2);
    for (int i = 0; i < b.length; i++){
        int v = b[i] & 0xff;
        if (v < 16) {
            sb.append('0');
        }
        sb.append(Integer.toHexString(v));
    }
    return sb.toString().toUpperCase();
} 
```

新的javascript版本（不竞争）：（我尝试了两个命令：首先散列然后DES，以及其他方式）

```
var hashedPassword = CryptoJS.MD5(password);
var encryptedPassword = CryptoJS.DES.encrypt(hashedPassword, passphrase).toString();
var result = encryptedPassword.toString().substring(0, 12).toUpperCase(); 
```

我走对了吗？

# ruby-on-rails - 寻找共同的朋友

> ID：11882380
> 
> 赞同：0
> 
> 时间：2012-08-09T11:27:38.303
> 
> 标签：ruby-on-rails, facebook-graph-api, koala

我正在使用来自 facebook graph api 的数据开发一个应用程序。用户登录并可以从他在 fb 上的数据生成东西。除其他数据外，我们使用`me/mutualfriends/friend_id`端点使用当前用户和他的每个朋友之间的共同朋友的数量。问题是，这是每个朋友的一个请求。即使我们批量处理请求，通常也至少有 4 个不那么快的请求。

所以我想知道：我们已经有了所有的朋友，我们只需要共同朋友的数量，而不是关于他们的任何数据（无论如何我们已经有了）：有没有更好的方法，使用更少的请求？

谢谢你们的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T16:02:51.123

如果你有每个用户的朋友，那么你可以只取两个用户的朋友数组的交集来获得共同的朋友。

```
user1_friends = ['a', 'b', 'c']
user2_friends = ['c', 'd', 'e']
mutual = user1_friends & user2_friends 
```

相互应该等于 ['c']

这应该比到达端点更有效。

# perl - 输出对于我的类型声明无效

> ID：11882384
> 
> 赞同：0
> 
> 时间：2012-08-09T11:27:50.757
> 
> 标签：perl, perl-module, mod-perl

下面的代码给出了一些奇怪的输出。任何人都可以解释这个问题吗？

```
use warnings;
my $P = 10;
print "My Var: $P\n";
display();

my $P = 12;
display();

sub display()
{
    print "My Var: $P\n";
} 
```

输出：

```
My Var: 10
My Var:
My Var: 12 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T12:05:36.323

您应该提供脚本的完整输出：

```
"my" variable $P masks earlier declaration in same scope at P line 6.
main::display() called too early to check prototype at P line 4.
main::display() called too early to check prototype at P line 7.
My Var: 10
Use of uninitialized value in concatenation (.) or string at P line 11.
My Var:
My Var: 12 
```

并阅读它...答案在警告中...
如果您`use strict;`在脚本的开头添加，您会收到额外的警告：

```
main::display() called too early to check prototype at P line 5.
main::display() called too early to check prototype at P line 8. 
```

这意味着您在声明它之前调用带有原型的子例程（在这种情况下`()`）......
所以首先声明子例程，或者更好的是，放弃原型。

将您的代码更改为：

```
use strict;
use warnings;

my $P = 10;
print "My Var: $P\n";

display();

$P = 12;

display();

sub display
{
    print "My Var: $P\n";
} 
```

它可以按您的预期工作。
*（但最好使用 $P 作为子例程的参数......）*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T13:00:05.773

首先，在 Perl 中，您*不需要*在调用子程序之前定义它；这样做会更好；因此您的代码会产生警告。但是，在这方面技术上并没有错。此警告也与您的问题无关。

我相信答案确实在你用“my”对同一个变量的两个声明中，再加上 Perl 解释器的具体行为。以下是[perldiag](http://www6.uniovi.es/perl/perldiag.html)对这个警告的解释：

> ``my'' 变量 %s 掩盖了同一范围内的先前声明 (S) 已在同一范围内重新声明了一个词法变量，从而有效地消除了对先前实例的所有访问。这几乎总是一个印刷错误。请注意，较早的变量将仍然存在，直到作用域结束或所有指向它的闭包对象都被销毁。

当您的 print 语句发生时，解释器仅处理了 $P 的第一个声明，因此它打印 10，正如您所期望的那样。

However, when you call the sub, Perl goes to look for the subroutine definition. It also has to find all of the other variable declarations preceding it, so that the sub can have access to lexical variables; it finds the second declaration, and thus your first $P is overwritten with a new $P. However, since this new $P hasn't been set to anything yet in your program, it is undefined.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T11:36:17.167

"my $P" 声明变量。你这样做了两次，你也应该得到一个错误。更改“我的 $P = 12;” 到“$P = 12;” 你会得到你想要的。

我建议您阅读一些关于 perl 的内容（查看“perldoc perl”和“perldoc perlintro”，或[http://www.perl.org/learn.html](http://www.perl.org/learn.html)）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-09T11:34:53.953

`my $P = 12;` 您已经在上面声明了 $P( `my $P = 10;`)，不应该再这样做了，删除 my，
`display();`像这样调用子例程：`&display();`

# c# - 类的组属性

> ID：11882387
> 
> 赞同：0
> 
> 时间：2012-08-09T11:28:09.323
> 
> 标签：c#, tabs, grouping, custom-attributes

我想知道是否可以对 ac# 类的属性进行分组。类似于以下内容：

```
public class Computer
{
    //First Group
    public string Name{get;set;}
    public string IPAddress{get;set;}

    //Second Group
    public string Driver1Name {get;set;}
    public string Driver1Port{get;set;}

} 
```

我拥有的模型返回 70 列左右（即模型有 ~ 70 个属性），我想返回所有这些以显示给用户。显然，70 个属性在一个页面上显示太多，因此该页面的内容将根据这些属性的分组（使用 jquery）进行选项卡。

我最初的想法是使用属性，并按属性分组。但我想打开它以获取其他建议。请让我知道您对如何实现这一目标的想法。

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T11:35:21.590

你可以使用属性。使用您自己的或对象浏览器使用的现有属性：

`System.ComponentModel.CategoryAttribute`.

# python - matplotlib：绘图时忽略异常值

> ID：11882393
> 
> 赞同：40
> 
> 时间：2012-08-09T11:28:33.003
> 
> 标签：python, plot, matplotlib, percentile, outliers

我正在绘制来自各种测试的一些数据。有时在测试中我碰巧有一个异常值（比如 0.1），而所有其他值都小三个数量级。

使用 matplotlib，我针对范围进行绘图`[0, max_data_value]`

我怎样才能放大我的数据而不显示异常值，这会弄乱我的绘图中的 x 轴？

我是否应该简单地取 95 个百分位数并`[0, 95_percentile]` 在 x 轴上有范围？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-08-09T15:16:03.727

对于异常值，没有单一的“最佳”测试。理想情况下，您应该合并先验信息（例如，“这个参数不应该超过 x，因为等等……”）。

大多数异常值检验使用中值绝对偏差，而不是第 95 个百分位或其他一些基于方差的测量。否则，计算的方差/标准差将被异常值严重扭曲。

这是一个实现更常见的异常值测试之一的函数。

```
def is_outlier(points, thresh=3.5):
    """
    Returns a boolean array with True if points are outliers and False 
    otherwise.

    Parameters:
    -----------
        points : An numobservations by numdimensions array of observations
        thresh : The modified z-score to use as a threshold. Observations with
            a modified z-score (based on the median absolute deviation) greater
            than this value will be classified as outliers.

    Returns:
    --------
        mask : A numobservations-length boolean array.

    References:
    ----------
        Boris Iglewicz and David Hoaglin (1993), "Volume 16: How to Detect and
        Handle Outliers", The ASQC Basic References in Quality Control:
        Statistical Techniques, Edward F. Mykytka, Ph.D., Editor. 
    """
    if len(points.shape) == 1:
        points = points[:,None]
    median = np.median(points, axis=0)
    diff = np.sum((points - median)**2, axis=-1)
    diff = np.sqrt(diff)
    med_abs_deviation = np.median(diff)

    modified_z_score = 0.6745 * diff / med_abs_deviation

    return modified_z_score > thresh 
```

作为使用它的示例，您将执行以下操作：

```
import numpy as np
import matplotlib.pyplot as plt

# The function above... In my case it's in a local utilities module
from sci_utilities import is_outlier

# Generate some data
x = np.random.random(100)

# Append a few "bad" points
x = np.r_[x, -3, -10, 100]

# Keep only the "good" points
# "~" operates as a logical not operator on boolean numpy arrays
filtered = x[~is_outlier(x)]

# Plot the results
fig, (ax1, ax2) = plt.subplots(nrows=2)

ax1.hist(x)
ax1.set_title('Original')

ax2.hist(filtered)
ax2.set_title('Without Outliers')

plt.show() 
```

![在此处输入图像描述](../Images/eec8b336cc8ecf0917b9c14c5d3213e4.png)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-09T15:23:20.093

如果您不介意拒绝 Joe 提到的异常值，并且这样做纯粹是出于审美原因，您可以设置绘图的 x 轴限制：

```
plt.xlim(min_x_data_value,max_x_data_value) 
```

这些值是您希望显示的限制。

`plt.ylim(min,max)`也可以在 y 轴上设置限制。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2019-11-21T17:55:38.550

我认为使用 pandas 分位数很有用，而且更灵活。

```
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt

fig = plt.figure()
ax1 = fig.add_subplot(121)
ax2 = fig.add_subplot(122)

pd_series = pd.Series(np.random.normal(size=300)) 
pd_series_adjusted = pd_series[pd_series.between(pd_series.quantile(.05), pd_series.quantile(.95))] 

ax1.boxplot(pd_series)
ax1.set_title('Original')

ax2.boxplot(pd_series_adjusted)
ax2.set_title('Adjusted')

plt.show() 
```

[![在此处输入图像描述](../Images/7009274c7ffef4da101a97178fd37392.png)](https://i.stack.imgur.com/Bk0Ao.png)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2019-07-05T17:29:43.190

我通常通过函数传递数据`np.clip`，如果您对数据的最大值和最小值有一些合理的估计，就使用它。如果您没有合理的估计，则裁剪数据的直方图将显示尾部的大小，如果异常值真的只是异常值，则尾部应该很小。

我运行的是这样的：

```
import numpy as np
import matplotlib.pyplot as plt

data = np.random.normal(3, size=100000)
plt.hist(np.clip(data, -15, 8), bins=333, density=True) 
```

如果您更改裁剪函数中的最小值和最大值，您可以比较结果，直到找到适合数据的正确值。

[![例子](../Images/22c67ee5eed105d38592ffde244c9fc8.png)](https://i.stack.imgur.com/87jIC.png)

在此示例中，您可以立即看到最大值 8 并不好，因为您正在删除大量有意义的信息。-15 的最小值应该没问题，因为尾巴甚至不可见。

您可能可以编写一些代码，基于此找到一些好的界限，根据一些容差最小化尾部的大小。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-29T05:41:32.307

在某些情况下（例如，在直方图中，例如 Joe Kington 的答案中的那个），重新缩放该图可能表明存在异常值，但它们已被缩放比例部分裁剪掉。删除异常值不会与重新缩放具有相同的效果。与检测和删除异常值相比，自动找到适当的轴限制似乎更可取和更容易。

这是一个使用百分位数和数据相关边距来实现漂亮视图的自动缩放想法。

```
# xdata = some x data points ...
# ydata = some y data points ...

# Finding limits for y-axis     
ypbot = np.percentile(ydata, 1)
yptop = np.percentile(ydata, 99)
ypad = 0.2*(yptop - ypbot)
ymin = ypbot - ypad
ymax = yptop + ypad 
```

示例用法：

```
fig = plt.figure(figsize=(6, 8))

ax1 = fig.add_subplot(211)
ax1.scatter(xdata, ydata, s=1, c='blue')
ax1.set_title('Original')
ax1.axhline(y=0, color='black')

ax2 = fig.add_subplot(212)
ax2.scatter(xdata, ydata, s=1, c='blue')
ax2.axhline(y=0, color='black')
ax2.set_title('Autscaled')
ax2.set_ylim([ymin, ymax])

plt.show() 
```

[![在此处输入图像描述](../Images/7e208f0319d469951ea1f512d9fcfbbd.png)](https://i.stack.imgur.com/fZD4k.png)

# php - 如何使用 php-postgresql 以表格格式获取查询结果？

> ID：11882394
> 
> 赞同：0
> 
> 时间：2012-08-09T11:28:39.760
> 
> 标签：php, xml, postgresql

我坚持将结果显示为表格格式。我尝试了所有选项，如“pg_fetch_row、pg_fetch_array、pg_fetch_all_columns”，但我没有得到表格格式的结果。

查询部分工作正常，我也得到了 XML 格式的结果，但我需要以表格格式显示它，它还应该包含一个列标题。

请任何人都可以建议我如何以表格格式获取结果。

我的 PHP_PostgreSQL 代码如下所示：

```
<?
$conn = pg_connect("user=postgres password=nkr@123 host=localhost dbname=test");
    if (!$conn) {
    echo "An error occured.\n";
    exit;
    }

$cat=$_POST['cat'];
$subcat=$_POST['subcat'];
echo "Value of \$cat = $cat <br>Value of \$subcat = $subcat \n";

$result = pg_query($conn, "SELECT * FROM $cat JOIN $subcat ON $cat.districtco=$subcat.districtcode");
if (!$result) {
echo "An error occured in result.\n";
exit;
}
echo $result;
if (!$result) {
echo "An error occured in xml_result.\n";
exit;
}
?> 
```

我正在使用此代码以 XML 格式获取结果：

```
$xml_result="<resultxml>";
$num = pg_num_fields($result);
while($row = pg_fetch_array($result)){
$xml_result.="<record>"; 
for ($i=0; $i < $num; $i++)
{   
  $xml_result .= "<".pg_field_name($result, $i).">".$row[$i]."</".pg_field_name($result, $i).">";      
} 
$xml_result.="</record>";
}
$xml_result.="</resultxml>";
echo $xml_result; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T18:01:13.033

您知道您应该使用 for() 循环处理结果集，不是吗？

尽管 psql 可以选择以 HTML 格式从查询中输出结果集，但这只是因为 psql 是专门为此而编写的。

# java - 如何在不使用其他集合的情况下比较单个 hashMap 的值

> ID：11882395
> 
> 赞同：-1
> 
> 时间：2012-08-09T11:28:39.557
> 
> 标签：java, collections, hashmap, compare

```
m.put("A", al); 
m.put("B", al1);
m.put("C", al2); 
```

我想比较这个 HashMap 的所有值。这是具有`String`类型键和`ArrayList<Integer>`类型值的 HashMap。

我不想使用其他集合类型。

* * *

```
 Integer a[] = { 1, 2, 3, 4 };
        Integer b[] = { 1, 2, 3, 4 };
        Integer c[] = { 9, 5, 3, 7 };
        Integer d[] = { 1, 2, 3, 2};
        List<Integer> l = Arrays.asList(a);
        List<Integer> m = Arrays.asList(b);
        List<Integer> n = Arrays.asList(c);
        List<Integer> o = Arrays.asList(d);
        Map<String, List<Integer>> m1 = new HashMap<String, List<Integer>();
        m1.put("A", l);
        m1.put("B", m);
        m1.put("C", n);
        m1.put("D", o); 
```

这是我的 hashmap m1，每个键都有一个元素的 ArrayList，因为我们知道键“A”和键“B”都具有相同的元素 A-{1,2,3,4} 和 B-{1,2, 3,4} 和其他键的其余部分具有不同的元素。所以我想要的是，让所有的键都具有相同的元素。例如 Key A 和 Key B 都有相同的元素所以我想打印 A 和 B

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T11:41:44.977

如果您使用哈希图，则不可能有两个重复项 - 如果您正确使用它，那就是。

例如，让我们使用您的示例。

```
HashMap<String, myClass> hash = new HashMap<String, myClass>();
myClass al = new myClass();
myClass al1 = new myClass();
myClass al2 = new myClass(); 
```

我们有两种方法可以从这里开始。一，是你在做什么。

```
hash.put("A", al);
hash.put("B", al1);
hash.put("C", al2); 
```

它看起来完美无瑕，但如果我现在这样做呢？

```
hash.put("D", al); 
```

这将完美地工作，但这不是你应该如何使用它。正确使用 hashmap 的最基本方法如下：

```
hash.put(al.toString(), al);
hash.put(al1.toString(), al1);
hash.put(al2.toString(), al2); 
```

即使您没有`toString()`在您的类中重新定义该方法，您也会获得该特定实例的唯一标识符。`al.toString()`并且`al1.toString()`不会返回相同的值，因为它取决于实例。

现在您也可以`@Override`使用该方法并让它返回您想要的任何字符串。

但是，无需搜索重复值。如果您正确使用哈希图，则地图本身会为您完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T07:20:03.737

```
 Map<String, ArrayList<Integer>> m= new HashMap<String, ArrayList<Integer>>();
    ArrayList<Integer> al = new ArrayList<Integer>();
    ArrayList<Integer> al1 = new ArrayList<Integer>();
    ArrayList<Integer> al2 = new ArrayList<Integer>();
    ArrayList<ArrayList<Integer>> all= new ArrayList<ArrayList<Integer>>();
    ArrayList<String> all1= new ArrayList<String>();
    al.add(1);al.add(2);al.add(3);al.add(4);al1.add(1);
    al1.add(2);al1.add(3);al2.add(1);
    al2.add(2);al2.add(3);al2.add(4);
    m.put("A", al);m.put("B", al1);m.put("C", al2);
    Map<String, ArrayList<Integer>> map = new HashMap<String, ArrayList<Integer>>();
    Map<String, ArrayList<Integer>> map1 = new HashMap<String, ArrayList<Integer>>();
    map.putAll(m);
    for(Entry<String, ArrayList<Integer>> entry : m.entrySet())
    {   
        for(Entry<String, ArrayList<Integer>> entry1 : map.entrySet())
        {
           if (!entry.getKey().equals(entry1.getKey())) 
           {
             if (entry.getValue().equals(entry1.getValue())) {

                 map1.put(entry1.getKey(), entry1.getValue());
            }
           }
           else {
               if (map1.isEmpty()) {
                       map1.put(entry.getKey(), entry.getValue());
                    }
                   else {
                       if (map1.containsValue(entry.getValue())) {
                       map1.put(entry.getKey(), entry.getValue());
                       }
                }
                }

        }
        } 
```

我得到了解决方案..谢谢大家:)

# java - Java多线程 - 无需等待即可锁定

> ID：11882398
> 
> 赞同：1
> 
> 时间：2012-08-09T11:28:43.607
> 
> 标签：java, multithreading, locking, wait

我有一个java多线程问题。我有 2 个线程访问一个内部有一个 for 循环的 methodA()，并且在循环中调用一个 methodB()。方法 A 应使用线程名锁锁定，方法 B 应锁定在方法 B 操作的对象 id 上。检查下面的代码。

**当前代码**

```
 private static final ConcurrentHashMap<Object, Object> LOCKS = new ConcurrentHashMap<Object, Object>();   
        private void methodA(){
         LOCKS.putIfAbsent(Thread.currentThread().getName(), new Object()))  
         synchronized (LOCKS.putIfAbsent(Thread.currentThread().getName(), new Object()))        {                
               for(loop through all objects) {
                       methodB(Object1);
               }
         }
        }

    private void methodB(Object1 object1) {      
      LOCKS.putIfAbsent(object1.getObjectId(), new Object()))    
      synchronized(LOCKS.putIfAbsent(object1.getObjectId(), new Object())){         
         //<Work on object1>
      }   
    } 
```

我已经完成了上面的代码，以确保 2 个不同的线程应该能够并行访问 methodA()，但不应该在 methodB()（由 methodA() 调用）中一次在同一个 Object1 上工作。IE; 虽然我希望线程 A 和线程 B 同时访问 methodA()，这反过来将遍历“for”循环中的所有对象，并通过调用 methodB() 对每个对象进行操作，但我不希望线程 A 和 B一次作用于相同的对象实例。因此，上面的代码根据对象实例 ID 锁定 methodB()。

**需要的改进。**

在上面的代码中，如果线程 A 和线程 B 来到 methodB() 并发现它们都想处理同一个对象 'obj1'，现在使用上面的代码线程 A 将等待或线程 B 将等待另一个一个完成取决于谁首先到达并锁定了 methodB()。

但想象一个情况，线程 A 先获得锁并执行 methodB() 需要 9 个小时才能完成处理“obj1”。在这种情况下，线程 B 需要等待整整 9 个小时，然后才有机会执行 methodB() 并因此处理“obj1”。

我不希望这种情况发生。线程 B，一旦发现 methodB() 被线程 A 锁定在 'obj1' 的名称中，就应该继续（稍后再回到 obj1）尝试锁定和处理其他对象。IE; 它应该尝试处理“for”循环中的其他对象，例如对象列表中的 obj1、obj2 等。

任何解决此“无需等待即可锁定”问题的输入将不胜感激。

非常感谢您的帮助。

**一些澄清以改进答案。**

1.  methodA() 和 methodB() 都在同一个类中。methodB() 不在 Object 类中。
2.  实际上线程 A 和线程 B 是调用包括 A 和 B 在内的许多方法的计时器线程。因此线程级锁（因为线程每 15 分钟左右调用一次，并且有可能之前不会完成 methodA() 的第一次执行第二次调用它）。
3.  methodB(Obj1) 始终采用 Object1 参数并且必须锁定它。原因是，在这个类中还有其他方法，比如 methodC(Obj1) 和 methodD(Obj1)，它们也接受 Object1 参数。对于 Object1 的同一实例，这些方法不应同时执行。因此需要锁定 Object1 参数。
4.  发现methodB(Obj1 obj) 已经被obj1 上的线程A() 锁定的线程B 需要以某种方式再次调用methodB() 但使用不同的对象，比如obj2。一旦与其他人一起完成，它应该回到 obj1 。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T11:31:07.083

你能做的最好的事情就是保持简单。

> 方法 A 应该使用线程名锁来锁定

只有锁定共享对象才有意义。锁一个线程本地锁是没有意义的。

> 同步（LOCKS.putIfAbsent（object1.getObjectId（），新对象（）））

`null`这将在第一次运行时返回并抛出 NullPointerException。

* * *

我会用

```
private void methodA(){  
    List<Object1> objects = new ArrayList<>(this.objectList);
    while(true) {
       for(Iterator<Object1> iter = objects.iterator() : objects)
          if(object1.methodB())
             iter.remove();
       if(objects.isEmpty()) break;
       Thread.sleep(WAIT_TIME_BEFORE_TRYING_AGAIN);
    }
}

// in class for Object1
final Lock lock = new ReentrantLock();

public boolean methodB() {          
    if (!lock.tryLock()) 
        return false;
    try {
       // work on this
       return true;
    } finally {
       lock.unlock();
    }
} 
```

根据您希望如何处理无法锁定的对象，您可以将它们添加到后台 ExecutorService。您可以让 methodA 重复调用失败的所有剩余对象。

理想情况下，您会找到一种方法来最大限度地减少锁定时间，甚至完全不需要锁定。例如，像 AtomicReference 和 CopyOnWriteArrayList 这样的类是线程安全和无锁的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T11:59:36.710

我不是 Java 人，但在我看来，您不会通过同步来实现这一点。我相信您将需要自己进行锁定。

如果你创建了一个 java.util.concurrent.locks.ReentrantLock 你可以使用 tryLock 进入锁，如果它还没有被锁定。methodA 需要知道哪个 methodB 调用是成功的，或者哪个被取消了，因为锁是不可能的。因此，您可以在 methodA 中进行锁定处理，让您在那里完全控制。或者您可以在方法 B 中进行锁定，但是如果方法 B 完成工作或没有获得锁定，您需要一些返回值或异常处理来向方法 A 发出信号。

当然，您还需要在 methodA 中保留您已经经历过的对象或您仍需要处理的对象的列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T13:18:34.517

如果一个线程偶尔通过传递时“错过”一个对象，这有关系吗？如果不：

将所有对象存储在可锁定的队列式容器中。让线程 A、B 等弹出一个，在其上调用方法，然后将其推回。线程不可能同时对同一个对象进行操作。唯一的锁是容器推送/弹出，没有线程需要阻塞任何延长的时间。

..或类似的东西。我总是尽量避免复杂的锁定方案——它们似乎总是搞砸:(

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T13:20:19.517

我建议采用不同的方法。不是直接调用该方法，而是将[命令对象](https://en.wikipedia.org/wiki/Command_pattern)放入队列中并让线程（或执行程序）处理命令。

当队列中出现命令时，尝试获取锁。如果这不起作用，请将命令添加到队列的末尾。这将确保最终再次尝试该命令。

缺点：如果某个线程在每次尝试执行时都碰巧锁定了命令，则该命令可能会被无限期推迟。

这里的解决方案是确保你只锁定你需要的东西。这样，当您看到“哦，这是锁定的”时，您就知道有人已经在处理该任务，您可以简单地忘记该命令（-> 不要工作两次）。

# javascript - 使用 JavaScript (jQuery) 随机显示五个图像中的两个

> ID：11882404
> 
> 赞同：2
> 
> 时间：2012-08-09T11:29:11.243
> 
> 标签：javascript, jquery, random

我有一个看起来像这样的 HTML 块：

```
<div id="banners">
    <a href="p1.html"><img src="img1.jpg" /></a>
    <a href="p2.html"><img src="img2.jpg" /></a>
    <a href="p3.html"><img src="img3.jpg" /></a>
    <a href="p4.html"><img src="img4.jpg" /></a>
    <a href="p5.html"><img src="img5.jpg" /></a>
</div> 
```

使用 JavaScript，我想随机选择其中两个图像及其相应的链接并显示它们，同时隐藏其他图像。此外，它们不需要重复，这意味着，我想避免同时显示类似 img1.jpg img1.jpg 的内容。

该站点上正在使用 jQuery，因此如果提议的解决方案是 jQuery 解决方案，那就太好了。

不幸的是，我无法访问该站点的后端，否则我将探索服务器端解决方案。在这种情况下这是不可能的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T11:33:12.550

```
var allBanners = $('#banners a');
allBanners.hide();

var index = Math.floor(Math.random() * allBanners.length);
allBanners.eq(index).show();

var index2 = Math.floor(Math.random() * allBanners.length - 1);
allBanners.not(allBanners.eq(index)).eq(index2).show(); 
```

[演示](http://jsfiddle.net/wVr4X/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T11:36:19.150

```
var elem = $("#banners a");
var img1 = Math.floor(Math.random() * elem.length), 
    img2 = Math.floor(Math.random() * elem.length);

while (img1===img2) {
  img2 = Math.floor(Math.random() * elem.length);
}

elem.hide();
elem.eq(img1).show();
elem.eq(img2).show(); 
```

[小提琴](http://jsfiddle.net/YGAm5/2/) ​</p>

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T11:38:36.587

```
$('a').hide();
var count = 0;
while(count < 2) {
var number = 1 + Math.floor(Math.random() * 5); 
if($('a[href="p' + number + '.html"]:visible').length == 0) {
 $('a[href="p' + number + '.html"]').show();
 count++;
}
} 
```

这确保了选择这两个图像时的无偏随机性。

# android - 如何停止测试位置提供程序

> ID：11882412
> 
> 赞同：3
> 
> 时间：2012-08-09T11:29:38.360
> 
> 标签：android, gps, mocking, location

目前，我正在开发一个将位置注入 Android 的应用程序。此应用程序应在特定时刻注入位置。前后应使用普通 GPS。

我的软件能够切换到模拟位置并成功注入位置。但我无法让 Android 再次收听正常的 GPS。

我的设置代码：

```
mLocationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
mLocationManager.addTestProvider(LocationManager.GPS_PROVIDER, false, false, false, false, true, true, true, 0, /*magic*/5);
mLocationManager.setTestProviderEnabled(LocationManager.GPS_PROVIDER, true); 
```

我的失败尝试停止：

```
mLocationManager.setTestProviderEnabled(PROVIDER_NAME, false);
mLocationManager.removeTestProvider(PROVIDER_NAME); 
```

我的问题：如何停止提供模拟位置并恢复默认的 Android GPS？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T14:08:36.193

我发现这是由于两个原因。

首先，`setTestProviderEnabled(PROVIDER_NAME, false)`不需要调用。其次，查看Android源代码时，显示正常的GPS不会自动激活。通过在通话后请求位置更新`removeTestProvider()`，将激活正常的 GPS 信号，一切正常。

# javascript - 将任意文本添加到图形图表

> ID：11882420
> 
> 赞同：0
> 
> 时间：2012-08-09T11:30:10.883
> 
> 标签：javascript, svg, graphael

我将如何在图形图表区域的左下角添加一些文本？我用谷歌搜索过，但 raphael 的文档不是很好:(

干杯! 约翰。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:42:03.817

假设您的绘图占位符定义为

```
var r = Raphael("holder"); 
```

所以你像这样在上面放置文字

```
r.text(320, 100, "Interactive Donut Chart").attr({ font: "20px sans-serif" }); 
```

看看我的jsfiddle

[g raphael js 交互式甜甜圈](http://jsfiddle.net/vedmack/HzMVV/)

# javascript - SyntaxError：检索 JSON 对象时标签无效

> ID：11882421
> 
> 赞同：6
> 
> 时间：2012-08-09T11:30:12.403
> 
> 标签：javascript, jquery, json

检索 JSON 对象时，我收到以下错误：

1.  SyntaxError：Mozilla 中的标签无效。
2.  Uncaught SyntaxError: Unexpected token : in Chrome

我的 JSON 对象是如下所示的格式：

```
{
   "userName" : "clevermeal835",
   "userRole" : "Participant",
   "userAccountStatus" : "Active"
} 
```

代码：

```
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<script src="Scripts/jquery-min.js"></script>
<script src="Scripts/jquery_validate.js"></script>
<script>
$(document).ready(function() {
    loadLatestTweet();  
});

function loadLatestTweet(){
var xhr = new XMLHttpRequest();
var uid = "clevermeal835";
var pwd = "Welcome_1";
var userType = "participant";
    var surl =      'http://localhost:8080/RESTlet_WS/MobiSignIn/{"userName":"'+uid+'","password":"'+pwd+ '","userType":"'+userType+'"}&callback=?';

    var jqxhr = $.getJSON(surl, function() {
        alert("success");
    }).success(function() { alert("second success");   }).error(function() { alert("error"); }).complete(function() { alert("complete"); });
    jqxhr.complete(function(){ alert("second complete"); });
 }
 </script>
</head>
<body>
<input id="jsonpbtn2" type="submit" value="button" />
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T04:52:31.450

你可以让代码看起来像这样

```
var params = { "Username": UserNameValue,"Password": PassValue};

        $.ajax({
            type: "POST",
            url: "http://localhost:8080/RESTlet_WS/MobiSignIn/",
            contentType: 'application/json',

            data: JSON.stringify(params),
            dataType: 'json',
            async: false,
            cache: false,
            success: function (response) {

            },
            error: function (ErrorResponse) {

            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T09:01:22.470

嘿，试试这个你正在使用的网址

```
var params = encodeURIComponent('{"userName":"'+uid+'","password":"'+pwd+ '","userType":"'+userType+'"}');
var surl = 'http://localhost:8080/RESTlet_WS/MobiSignIn?params='+params+'&callback=' 
```

像这样使用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-19T14:22:27.700

调用 asmx Web 服务 (.NET) 时，我遇到了完全相同的问题。

我通过用方括号括起来我的返回值来解决它，如下所示：

```
return @"[ {{ ""status"" : ""OK"", ""message"" : ""Success !!!"" }} ]"; 
```

然后因为讨厌的 d 参数而“评估”了我的 return var：

```
$.ajax({
            type: "POST",
            url: 'http://www.example.com/',
            contentType: 'application/json; charset=utf-8',
            data: '{name: "' + vName + '", target: "' + vTarget + '", phone: "' + vPhone + '", timeframe: ' + true + '}',
            dataType: 'json',
            success: function (msg) {

                jsonMsg = eval(msg.d);

                alert(jsonMsg.status);
                alert(jsonMsg.message);
            },
            error: function (xhr, msg) {
            }
        }); 
```

# uitableview - 在动态表格视图中获取文本字段值

> ID：11882428
> 
> 赞同：1
> 
> 时间：2012-08-09T11:30:35.753
> 
> 标签：uitableview, tags, uitextfield, nsindexpath

我有一个动态表格视图，它有 5 个原型单元格，在每个单元格内我有 6 个文本字段。我正在标记文本字段，但我无法理解**如何从**“ `textFieldDidEndEditing`”中的所有文本字段中获取值。在我的代码中，我有这个：

```
-(void) textFieldDidEndEditing:(UITextField *)textField
{
NSMutableArray *cellOneContentSave = [[NSMutableArray alloc] init];
NSString *cellOneTexfieldOneTxt;
if (textField == [self.view viewWithTag:1503])
{
cellOneTexfield1Txt = textField.text;
[cellOneContentSave addObject:cellOneTexfieldOneTxt];  
} 
```

**问题1：**但是！这只能让我从单元格一中的一个 texfield 获得值...我应该为每个单元格和 texfield 使用一个开关吗？

**问题 2：**我说这是一个动态表格视图，因此用户可以在输入提交编辑样式时按下左侧出现的绿色 + 按钮插入新闻行（每节）......当他进入时，应该newtexfields 的标签有不同的标签？一方面我认为不是，因为它是新的 texfields 但不同的 indepaxth.row ......但另一方面我不知道控制器是否需要新标签......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T15:03:19.973

```
-(void) textFieldDidEndEditing:(UITextField *)textField
{
    // assuming your text field is embedded directly into the table view
    // cell and not into any other subview of the table cell
    UITableViewCell * parentView = (UITableViewCell *)[textField superview];

    if(parentView)
    {
        NSMutableArray *cellOneContentSave = [[NSMutableArray alloc] init];
        NSString *cellOneTexfieldOneTxt;

        NSArray * allSubviews = [parentView subviews];
        for(UIView * oneSubview in allSubviews)
        {
            // get only the text fields
            if([oneSubview isKindOfClass: [UITextField class]])
            {
                UITextField * oneTextField = (UITextField *) oneSubview;

                if(oneTextField.text)
                {
                    [cellOneContentSave addObject: oneTextField.text];
                } else {
                    // if nothing is in the text field, should
                    // we simply add the empty string to the array?
                    [cellOneContentSave addObject: @""];
                }
            }
        }
    }

    // don't forget to actually *DO* something with your mutable array
    // (and release it, in case you're not using ARC), before this method
    // returns.
} 
```

# regex - 如何在asp.net mvc 3中对textboxvalue进行正则表达式有效范围检查

> ID：11882432
> 
> 赞同：0
> 
> 时间：2012-08-09T11:30:45.783
> 
> 标签：regex, asp.net-mvc-3, c#-4.0

我正在使用 asp.net mvc 3，并且我的模型中有这个正则表达式验证检查：

```
[RegularExpression(@"/^[1-7]$/", ErrorMessage = "Please enter a valid day number")]
public string DayNr {get;set;} 
```

但是验证检查不起作用:(上面的代码有什么不正确的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T11:32:29.667

它应该是什么

```
[RegularExpression(@"^[1-7]$", ErrorMessage = "Please enter a valid day number")]
public string DayNr {get;set;} 
```

对于号码验证，请查看此链接。 [Mvc验证正则表达式只有数字？](https://stackoverflow.com/questions/8839827/mvc-validation-regular-expression-only-numbers)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T13:58:52.650

这样做 - 更简单、更易读、更易于维护：

```
[Display(Name="Day Number")]
[Range(1, 7, ErrorMessage = "{0} value must be between {1} and {2}")]
public string DayNr { get; set; } 
```

希望这可以帮助

# visual-c++ - 禁用语言扩展，#ifndef 失败

> ID：11882435
> 
> 赞同：2
> 
> 时间：2012-08-09T11:30:53.253
> 
> 标签：visual-c++, pragma, precompiled-headers

这个问题是指 Visual Studio C++ 2010。如果我禁用语言扩展，即使是最简单的玩具程序也会在我包含一个空的 .h 文件时出现“发现意外的文件结尾”的错误。看来问题出在#ifndef HEADER_THING 技巧上，因为它两次不包含标题。如果我忽略它，错误消息就会消失。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T11:52:32.310

我通过谷歌搜索找到了它。这是 VC++ 2010 中的一个错误。解决方法是在头文件末尾的每个 #endif 之后添加一个换行符。

[http://connect.microsoft.com/VisualStudio/feedback/details/728179/unexpected-unexpected-end-of-file-found-found](http://connect.microsoft.com/VisualStudio/feedback/details/728179/unexpected-unexpected-end-of-file-found-found)

# c# - 在asp中弹出消息框，javascript无法识别？

> ID：11882438
> 
> 赞同：0
> 
> 时间：2012-08-09T11:30:56.967
> 
> 标签：c#, javascript, asp.net

我遇到了消息框用户控件的问题。我希望有一个可以给定消息的控件，并且用户可以通过单击按钮将其关闭，该按钮可以插入到许多地方。我已将 javascript 应用到消息框控件中，希望我可以集中处理与消息框有关的一切，但是当浏览到添加了消息框控件的页面时，我收到此错误：

```
CS1061: 'ASP.components_messagebox_ascx' does not contain a definition for 'HideBox' and no extension method 'HideBox' accepting a first argument of type 'ASP.components_messagebox_ascx' could be found 
```

控制是这样的：

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="Messagebox.ascx.cs" Inherits="FosterNetwork.Components.Messagebox" %>
<script type="text/Javascript">
    function HideBox() {
        document.getElementById("PNL_Messagebox").setAttribute("visible", false);
    }
</script>
<asp:Panel ID="PNL_Messagebox" runat="server">
    <asp:Label ID="LBL_Message" runat="server" />
    <asp:Button ID="BTN_Ok" Text="Ok" OnClick="HideBox()" runat="server" /> <!--Error happens on this line-->
</asp:Panel> 
```

我相当肯定我做对了，但如果它不起作用，显然我做错了什么。任何关于这种情况的线索都将是伟大的。

附录：如果我注释掉按钮控件，页面加载正常，脚本也加载正常（查看页面源）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:34:54.003

Onclick 寻找服务器端功能，而不是 javascript。或者，将您的按钮定义为`<input type='button' onclick='HideBox'`或将当前代码更改为：

```
<script type="text/Javascript">
function HideBox() {
    document.getElementById("<%= PNL_Messagebox.ClientID %>").setAttribute("visible", false);
    return false;
}
</script>
<asp:Button ID="BTN_Ok" Text="Ok" OnClientClick="return HideBox()" runat="server" /> 
```

返回 false in `OnClientClick`，防止 asp 按钮回发。

编辑：正如蒙蒂所说，您的面板控件的客户端 ID 未在代码中正确设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T11:35:23.173

您引用的控件 ID 不是客户端 ID，而是服务器 ID。因此，从 JavaScript 函数中的控件中检索“ClientID”，然后使用“OnClientClick”属性显示 JavaScript 消息。

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="Messagebox.ascx.cs" Inherits="FosterNetwork.Components.Messagebox" %>
<script type="text/Javascript">
    function HideBox() {
        document.getElementById("<%= PNL_Messagebox.ClientID %>").setAttribute("visible", false);
    }
</script>
<asp:Panel ID="PNL_Messagebox" runat="server">
    <asp:Label ID="LBL_Message" runat="server" />
    <asp:Button ID="BTN_Ok" Text="Ok" OnClientClick="HideBox()" runat="server" /> <!--Error happens on this line-->
</asp:Panel> 
```

# ruby-on-rails - Ruby on Rails - 在 Active Admin 中为具有重置密码的新用户设计欢迎电子邮件

> ID：11882439
> 
> 赞同：1
> 
> 时间：2012-08-09T11:30:58.527
> 
> 标签：ruby-on-rails, devise, activeadmin

我正在使用 RoR 3.2.3，并且 Devise and Active Admin 运行良好。但是，有些东西我没有得到。

在我的应用程序中，用户**无法**注册自己，只有管理员可以注册其他用户。这一切正常，管理员进入Active Admin面板->用户->新建并填写用户名和电子邮件，然后单击“创建”。为了让客户可以选择创建我在 mt AA 用户模型中使用的新密码：

```
after_create { |user| user.send_reset_password_instructions }

def password_required?
  new_record? ? false : super
end 
```

但是，我不希望电子邮件发送设计使用的文本，而是发送欢迎文本，而不是像“已请求更改密码的链接...”之类的内容，因为一开始没有密码。

简而言之，我想在*创建新用户*`send_reset_password_instructions`时使用devise 方法*而不*使用它的`devise/mailer/reset_password_instructions`视图。

 *然而，如果用户忘记了他的密码，那么他点击“忘记密码”链接，将发送一封电子邮件，其中包含 Devise 已经提供的默认文本。

关于如何完成这项工作的任何提示？

提前致谢， 问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T12:09:51.397

它实际上非常简单，`config.scoped_views = true`在 config/initializers/devise.rb 中设置

然后运行

```
  rails g 设计：查看用户

```

这将生成设计使用的所有视图文件，您可以对

`app/views/users/mailer/reset_password_instructions.html.erb`文件到您需要的文件或您希望更改的任何其他文件。*

# iphone - UITouch，拖放根本不起作用

> ID：11882443
> 
> 赞同：1
> 
> 时间：2012-08-09T11:31:17.000
> 
> 标签：iphone, objective-c, ios, xcode, uitouch

我有一个 UIView，在他上面我有 UIButton、UITableView 和 UINavigationBar。我想要做的是，当您单击 UIButton 并拖动它时，所有视图将仅移动到左侧，直到屏幕结束。我的意思是您可以将视图向左拖动，当您停止触摸时，视图将在您的手指停止触摸屏幕的位置停止。

我做不到，他只给我看“Touches Began 1”，仅此而已。我的问题似乎在这里？

非常感谢大家！

```
float oldX, oldY;
BOOL dragging;

- (void)touchesBegan:(NSSet*)touches withEvent:(UIEvent*)event
{
    NSLog("Touches Began 1");
    UITouch *touch = [[event allTouches] anyObject];
    CGPoint touchLocation = [touch locationInView:self.view];

    if (CGRectContainsPoint(btnOpen.frame, touchLocation))
    {
        NSLog("Touches Began 2");
        dragging = YES;
        oldX = touchLocation.x;
        oldY = touchLocation.y;
    }
}

- (void) touchesMoved:(NSSet*)touches withEvent:(UIEvent*)event
{
    UITouch *touch = [[event allTouches] anyObject];
    CGPoint touchLocation = [touch locationInView:self.view];

    if (dragging)
    {
        NSLog("Dragging!");
        CGRect frame = mainView.frame;
        frame.origin.x = mainView.frame.origin.x + touchLocation.x - oldX;
        frame.origin.y =  mainView.frame.origin.y + touchLocation.y - oldY;
        mainView.frame = frame;
    }
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    NSLog("Touches Ended!");
    dragging = NO;
}

- (void)viewDidLoad
{    
    [btnOpen addTarget:self action:@selector(touchesBegan:withEvent:) forControlEvents: UIControlEventTouchDown];
    [btnOpen addTarget:self action:@selector(touchesMoved:withEvent:) forControlEvents: UIControlEventTouchDragInside];
    [btnOpen addTarget:self action:@selector(touchesEnded:withEvent:) forControlEvents: UIControlEventTouchUpInside | UIControlEventTouchUpOutside];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T11:40:18.977

您正在询问相对于主视图框架的触摸坐标

```
CGPoint touchLocation = [touch locationInView:self.view]; 
```

然后你问 的位置`touchLocation`是否在按钮框架的框架内

```
if (CGRectContainsPoint(btnOpen.frame, touchLocation)) 
```

换句话说。您正在检查触摸是否在按钮的范围内，但您通过主视图而不是按钮上的触摸坐标进行检查。

所以这是你应该做的：

```
CGPoint touchLocation = [touch locationInView:btnOpen]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T12:00:24.963

```
- (void)touchesBegan:(NSSet*)touches withEvent:(UIEvent*)event
{
    NSLog("Touches Began 1");
for (UITouch *touch in touches) {
    //UITouch *touch = [[event allTouches] anyObject];
    CGPoint touchLocation = [touch locationInView:self.view];

    if (CGRectContainsPoint(btnOpen.frame, touchLocation))
    {
        NSLog("Touches Began 2");
        //dragging = YES;
        oldX = touchLocation.x;
        oldY = touchLocation.y;
    }
}
}

- (void) touchesMoved:(NSSet*)touches withEvent:(UIEvent*)event
{
   // UITouch *touch = [[event allTouches] anyObject];
for (UITouch *touch in touches) {
    CGPoint touchLocation = [touch locationInView:self.view];

    if (CGRectContainsPoint(btnOpen.frame, touchLocation))
    {
        NSLog("Dragging!");
        CGRect frame = mainView.frame;
        frame.origin.x = mainView.frame.origin.x + touchLocation.x - oldX;
        frame.origin.y =  mainView.frame.origin.y + touchLocation.y - oldY;
        mainView.frame = frame;
    }
}
} 
```

试试这样我认为它会对你有所帮助。

# javascript - 通过 AJAX 提交表单而不重新加载页面

> ID：11882444
> 
> 赞同：3
> 
> 时间：2012-08-09T11:31:16.953
> 
> 标签：javascript, jquery, ruby-on-rails, ruby, ajax

有没有办法在不重新加载页面的情况下将表单提交到服务器以获得 AJAX 响应。我可以使用提交按钮来做到这一点。但是当点击链接时我该怎么做。

我开始知道一个 javascript 方法来做到这一点，

```
var form = document.getElementById('myForm');
form.submit(); 
```

但是上面的代码会重新加载页面。我开始知道我们可以用 jquery 来做到这一点，但是怎么做呢？

请注意，我正在使用 Ruby on Rails 3.0.4 开发我的应用程序，并且我正在使用这样的 rails AJAX。

```
<%= form_for @search, :remote => true, :url => request_path, :html => {:method => :get, :id => :my_form} do |f| %> 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-09T11:39:25.323

您可以使用object的[`preventDefault()`](http://api.jquery.com/event.preventDefault/)方法：`event`

```
$('#myForm').submit(function(event){
   event.preventDefault(); 
   $.ajax({
     ...
   });
}) 
```

> 如果调用该方法，则不会触发事件的默认动作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T11:35:10.367

您可以使用[**.post()**](http://api.jquery.com/jQuery.post/)进行 ajax 发布。

取自文档：

```
$.ajax({
  type: 'POST',
  url: url,
  data: data,
  success: success,
  dataType: dataType
}); 
```

你也可以使用[**.submit()**](http://api.jquery.com/submit/)

取自文档：

```
$('#target').submit(function() {
  alert('Handler for .submit() called.');
  return false;
}); 
```

> 现在，当提交表单时，会提醒消息。这发生在实际提交之前，因此我们可以通过在事件对象上调用 .preventDefault() 或从我们的处理程序返回 false 来取消提交操作。

您可以将 2 组合起来，如下所示`Raminson`：

```
$('#target').submit(function() {
    .preventDefault()
    $.ajax({
        type: 'POST',
        url: url,
        data: data,
        success: success,
        dataType: dataType
    });
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T18:36:36.950

我知道我参加聚会有点晚了，作为上述答案的替代方案，您可以使用[jQuery Form 插件](http://jquery.malsup.com/form/#getting-started)来轻松更新 ajax 表单。

如果你使用它，你的 JS 代码最简单的版本应该是这样的。

```
$('#myform').ajaxForm(function() { 
  success: alert('success');
}); 
```

您可以使用更多选项来配置它。表单提交到的 url 与表单的`action`属性相同。

这也可以改变。

根据我的经验，您也不需要`preventDefault()`提交，它会为您完成。

无论如何，如果您觉得方便，这是您问题的另一种选择。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T11:39:51.827

如果问题是您使用 form.submit() 重新加载页面，请尝试：

```
var form = document.getElementById('myForm');
form.submit(function(e){

    e.preventDefault();

    //an ajax post as in François Wahl answer

}); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-30T09:15:39.500

我只需使用此代码即可使其正常工作。无需在提交中定义函数。

```
$('#myform').submit(); 
```

# php - Magento - getEntityTable() 指向哪个表？

> ID：11882445
> 
> 赞同：0
> 
> 时间：2012-08-09T11:31:23.310
> 
> 标签：php, magento, magento-1.5, magento-1.6

```
class Mage_Sales_Model_Entity_Order_Collection extends Mage_Eav_Model_Entity_Collection_Abstract
{

    protected function _construct()
    {
        $this->_init('sales/order');
    }

    public function addItemCountExpr()
    {
        $orderTable = $this->getEntity()->getEntityTable();

        $orderItemEntityTypeId = Mage::getResourceSingleton('sales/order_item')->getTypeId();
        $this->getSelect()->join(
            array('items'=>$orderTable),
            'items.parent_id=e.entity_id and items.entity_type_id='.$orderItemEntityTypeId,
            array('items_count'=>new Zend_Db_Expr('COUNT(items.entity_id)'))
        )
        ->group('e.entity_id');
        return $this;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T17:15:27.737

如**/code/core/Mage/Sales/etc/config.xml**中所定义：

```
<order><table>sales_flat_order</table></order> 
```

模型表`'sales/order'`是：**sales_flat_order**

# apache-flex - Flex：读取包含主机列表的文件

> ID：11882447
> 
> 赞同：0
> 
> 时间：2012-08-09T11:31:31.313
> 
> 标签：apache-flex, actionscript

我有一个连接到数据库的弹性应用程序。有几个运行数据库的服务器。目前，我有一个文本框“主机”和“端口”，用户可以在其中指定他们想要连接的数据库。我想将其更改为带有主机列表的 ComboBox。我知道如何在应用程序中对其进行硬编码，但我希望应用程序在启动时读取 xml（或其他）文件并使用其内容填充 ComboBox（以防数据库 IP 将来更改）。XML 看起来有点像：

```
<root>
   <host ip="123.123.123.123" port="1234"/>
   <host ip="255.255.255.123" port="2700"/>
   <host ip="18.12.65.123" port="1270"/>
</root> 
```

我怎么做？我想将文件与应用程序一起托管在服务器上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T12:00:50.753

您应该从服务器加载文件（使用`URLLoader`类）然后您可以读取加载器的数据。

例如：

```
private var loader:URLLoader;
private function init():void {
    loader=new URLLoader();
    loader.addEventListener(Event.COMPLETE, dataLoaded);
    loader.dataFormat=URLLoaderDataFormat.TEXT;
    var req:URLRequest=new URLRequest("http://my-server/path/to/file");
    loader.load(req);
}

private function dataLoaded(e:Event):void {
    loader.removeEventListener(Event.COMPLETE, dataLoaded);
    var data:String=loader.data;

    //If the file is a flat text file (with 123.123.123.123:1234 on each line)
    var lines:Array=data.split("\n");
    for each(var line:String in lines) {
        var i:Array=line.split(":");
        trace("ip: " + i[0]);
        trace("\nport: " + i[1]);
    }

    //If the file is an xml, do this
    var x:XML=new XML(data);
    for each(var host:XML in x.host) {
        trace("ip: " + host.@ip);
        trace("\nport: " + host.@port);
    }
} 
```

是的，您可以使用相对网址

# jpa - JPA 本机选择后跟本机更新 .. 触发附加更新

> ID：11882450
> 
> 赞同：2
> 
> 时间：2012-08-09T11:31:50.570
> 
> 标签：jpa, openjpa

我正在尝试以下操作，这会导致执行额外的更新并导致我的测试失败。我有一个这样的实体。

```
@Entity
@SqlResultSetMapping(name = "tempfilenameRSMapping",
        entities = { @EntityResult(entityClass = MyEntity.class) }, 
        columns = { @ColumnResult(name = "TEMPFILENAME") })
//The reason for this mapping is to fetch an additional field data through join.
@Table(name = "MY_TABLE")
public class MyEntity {

   @Id
   @Column(name="ID")
   private String id;

   @Column(name="NAME")
   private String name;

   @Column(name="DESC")
   private String description;

   @Column(name="STATUS")
   private String status;

   //follwed by getter setters

} 
```

我正在尝试使用本机查询进行检索。对于检索到的实体，我执行原生更新（原生更新的原因是我只想更新一个字段）。请注意，我没有直接更新检索到的实体。

我观察到的是我的更新没有正确执行。当我打开 TRACE 时，我注意到在刷新时 openJPA 正在执行一个额外的更新查询，因此覆盖了我原来的更新。

例如

```
SELECT M.ID, M.NAME, M.DESC, O.TEMPFILENAME FROM MY_TABLE M, OTHER_TABLE O WHERE M.ID = ?

UPDATE MY_TABLE SET STATUS = ? WHERE ID = ?

UPDATE MY_TABLE SET ID=?, NAME=?, DESC=?, STATUS=? WHERE ID = ? 
```

我该怎么做才能跳过自动更新？

编辑：这是我们用于执行查询的例程。

以下例程返回一个命名的本机查询 sql。

```
public String getNamedNativeQuerySql(EntityManagerFactory emf, String qryName) {
    MetamodelImpl metamodel = (MetamodelImpl) emf.getMetamodel();
    QueryMetaData queryMetaData = 
    metamodel.getConfiguration().getMetaDataRepositoryInstance().getQueryMetaData(null, qryName, null, true);
    String queryString = queryMetaData.getQueryString();
    return queryString;
} 
```

检索代码：

```
Query query = entityManager.createNamedQuery("retrieveQry");
query.setParameter(1, id);
Object[] result = (Object[]) query.getSingleResult();
MyEntity entity = (MyEntity) result[0];
String tempFileName = (String) result[1]; 
```

检索后的更新代码：

```
Query qry = entityManager.createNamedQuery("updateQry");
qry.setParameter(1, status);
qry.setParameter(2, entity.getId() );
qry.executeUpdate() 
```

编辑：

> 即使没有更新语句，我也看到了问题。即使我做了一个简单的查找，OpenJPA 也会执行一个额外的更新查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T11:47:46.467

问题在于运行时增强。OpenJPA 无法正确检测运行时增强实体的脏状态。

通过构建时间增强解决了它。

# php - 如何在 php 中使用 base64 对消息文本进行编码

> ID：11882452
> 
> 赞同：0
> 
> 时间：2012-08-09T11:31:52.663
> 
> 标签：php, base64, encode

```
 <?php eval(stripslashes(gzinflate(base64_decode("jVLLasMwELwX8g9LLkmh2NBj69q

EJpCWhIY0R0ORpY2lIktGUmLySf2NflnlR9s0caCnFbOzM8OukjhiYg9UEmsf0iGVSEw6jKPQo

/Hg6qf+i3RSuzHB/MxWa4f1kAeTkpcgFJU7hjDezJarxWQzW002cwggHYVWMMyIuQ08Lx1d30PyK3YpQ

0M4DnvkSrVyqJxnf37AREpYi5w7C2u0aPbIAmgjZVLnQm31OB0pUmBnDcLCFK3IF

TLIDhAR4Aa3Xp07V96FYVVVgVBMED9EHOUB1UU6BCecRM96alswJU6ofHDlY/yFo

pDEN34fQLWUJNPGo1pBJRzvN5OaEsm1LYUj8l1n9sRx3rXgkRhEY73jKdR69qo

X2uQ77JFdNg141hm8lKh88lq5B63FgSh2Kf1O2EvLWnw34dUrSawdzrBa/+zPNRe

syrf25OPu10RhptmheXBXyDhKvgA="))));?> 
```

当我们运行此代码时，将显示原始文本。我如何将我的消息编码为这种格式，以便我可以使用上面的代码。我能够做到

```
 gzdeflate(base64encode 
```

我想将我的文本转换为

```
 <?php eval(stripslashes(gzinflate(base64_decode("my encrypted text here"))));?> 
```

将提供输出我的“文本”。请帮忙。

注意：我想知道如何编码我的文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:36:46.020

```
<?php
echo base64_encode('This is an encoded string');
?> 
```

# javascript - 为什么 jQuery Cookie 插件在特定页面上不起作用？

> ID：11882453
> 
> 赞同：1
> 
> 时间：2012-08-09T11:31:56.563
> 
> 标签：javascript, jquery, cookies

我正在使用 jQuery Cookie 插件，它在除主页之外的所有页面上都可以正常工作，以运行该页面我正在敲我的头，但没有运气。

我的代码如下所示：

```
$.cookie('CA_txtKeywords', $("#CAT_txtKeywords").val(), { expires: 7, path: '/' }); 
```

在萤火虫它说：

未捕获的类型错误：对象函数 (a,b){return new e.fn.init(a,b,h)} 没有方法 'cookie'

有人可以指导这个错误是什么以及如何删除它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T11:47:36.100

您在脑海中包含 jQuery，然后包含 cookie 插件，但在页面底部您会看到：

```
 <script type="text/javascript" src="http://www.google.com/jsapi"></script>
        <script type="text/javascript">
  // You may specify partial version numbers, such as "1" or "1.3",  with the same result. Doing so will automatically load the latest version matching that partial revision pattern 
  // (e.g. 1.3 would load 1.3.2 today and 1 would load 1.4.1).
  google.load("jquery", "1");

  google.setOnLoadCallback(function() {
    // Place init code here instead of $(document).ready()
$(".euro").parseNumber({format:"#,###", locale:"it"});
$(".euro").formatNumber({format:"#,###", locale:"it"});

})
</script> 
```

它使用谷歌加载器再次加载 jQuery。因为您再次加载 jQuery，所以直接附加到文档头部的 jQuery 命名空间（而不是原型）的任何内容都会被删除。

所以归根结底，你到底为什么要加载 jQuery 两次？

解决方案：

删除 google 加载器并请求它从主页的页脚加载 jQuery。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T11:34:14.767

您确定插件已加载到您的主页上吗？你查过源头吗？你也可以在你的萤火虫中检查加载的脚本。

# ruby-on-rails - 继续循环通过 ResourceNotFound？

> ID：11882459
> 
> 赞同：1
> 
> 时间：2012-08-09T11:32:15.827
> 
> 标签：ruby-on-rails, ruby, api, activeresource

我正在遍历一组用户，作为其中的一部分，我正在调用第三方 API（通过[Intercom API Ruby 包装器](https://github.com/intercom/intercom-ruby)）。

`Intercom::ResourceNotFound`如果找不到用户，Intercom API 会抛出一个错误，这会停止整个过程。

如果找不到它，我只想让它跳过用户。

```
User.each do |user|
    user = Intercom::User.find_by_email(user.email) # Intercom::ResourceNotFound thrown if not found
    user.custom_data["Example"] = true
    user.save
end 
```

这是 Intercom Ruby 包装器的问题吗？或者是否有典型的 Ruby 或 Rails 方式来处理这类事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T11:36:14.540

只是捕捉异常怎么样？

```
User.each do |user|
  begin
   user = Intercom::User.find_by_email(user.email) # Intercom::ResourceNotFound thrown if not found
   user.custom_data["Example"] = true
   user.save
  rescue Intercom::ResourceNotFound
  end
end 
```

由于您只想在找不到用户时*跳过*该用户（并引发异常），因此`rescue`. 但是如果你想放一些调试信息或类似的东西，你可以写：

```
 rescue Intercom::Resource
    puts %{Could not work on user...}
  end 
```

# objective-c - 对关键事件作出反应

> ID：11882460
> 
> 赞同：1
> 
> 时间：2012-08-09T11:32:16.233
> 
> 标签：objective-c, macos, cocoa

我想这样做，如果用户按下键盘上的“return”键，应用程序必须做一些事情。我尝试以下方法：

```
- (void)keyDown: (NSEvent *) event {
        if ([event keyCode] == 36) {  
            [self doSmthFunction];
        }
} 
```

但是当我按“返回”时，我只听到哔声。

* * *

完整代码

关键事件控制器.m

```
#import "KeyEventController.h"
#include "myCustomClass.h"

@implementation KeyEventController
- (void)keyDown: (NSEvent *) event {
        if ([event keyCode] == 36) {
                NSLog(@"log");
        }
}
@end 
```

KeyEventController.h：

```
#import <Cocoa/Cocoa.h>

@interface KeyEventController : NSResponder 

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T06:09:16.260

您可能必须覆盖acceptsFirstResponder，并返回YES。此外，您可能需要单击您的视图（或任何您的子类）以使其不会发出哔哔声。我已经对此进行了测试，有时似乎有必要做这些事情，有时则不需要。

# xcode - 在 mac osx 中获取 usr/local 路径

> ID：11882467
> 
> 赞同：3
> 
> 时间：2012-08-09T11:32:30.640
> 
> 标签：xcode

我想在 mac 上获取“usr/local”路径。怎么走这条路。是否有任何标准功能。我需要为此使用环境变量还是有其他方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T06:39:32.767

/usr/local 只是一个 Unix 约定，而不是 OS X 识别的东西。`NSHomeDirectory`（定义在 中）如果您没有被沙箱化，则会为`NSPathUtilities.h`您提供用户的主目录（ ）。`~/`但如果你想要 /usr/local，只需使用 /usr/local。

# git - 永久修复任意位置问题

> ID：11882468
> 
> 赞同：1
> 
> 时间：2012-08-09T11:32:31.430
> 
> 标签：git, version-control

如何**永远**修复“任意位置”消息/问题？

...以及触发此消息的原因是什么？

# node.js - 测试 AngularJS express 节点应用程序

> ID：11882474
> 
> 赞同：4
> 
> 时间：2012-08-09T11:32:54.317
> 
> 标签：node.js, coffeescript, angularjs, mocha.js, zombie.js

`jasmine-node`我在使用and `mocha`(with )测试我的应用程序时遇到问题`zombie`。关键是`angular`不适用于此测试环境 - 当`browser.visit "http://localhost:3000/"`它仅显示布局并且不呈现任何模板[链接](https://gist.github.com/3303382)时。我猜javascript根本不能在浏览器中运行（我的意思是僵尸对象）。[我的测试](https://github.com/zishe/angular-express-coffee/blob/master/test/app_test.coffee)有什么办法让它起作用吗？还是问题不一样？

在我从另一个项目[规范](https://github.com/zishe/angular-express-coffee/blob/master/spec/app_spec.coffee)复制的茉莉花规范中发生错误：

```
/home/alder/Node/angular-express-coffee/spec/app_spec.coffee:12
        throw error;
              ^
ReferenceError: angular is not defined
    at /js/services.js:4:3
    at /js/services.js:6:4
    in /js/services.js 
```

所以我猜javascript也不起作用。

更新：我添加了调试选项，这里显示了什么：

```
➜  angular-express-coffee git:(master) ✗ mocha --require should --compilers coffee:coffee-script --colors  -R spec --ui bdd

  Given I am a new user
    When I visit the home page
Zombie: GET http://localhost:3000/newPost => 200
Zombie: GET http://localhost:3000/ => 200
Zombie: GET http://localhost:3000/js/lib/jquery-1.7.2.min.js => 200
Zombie: GET http://localhost:3000/js/lib/bootstrap.min.js => 200
Zombie: GET http://localhost:3000/js/lib/angular.min.js => 200
Zombie: GET http://localhost:3000/js/app.js => 200
Zombie: GET http://localhost:3000/js/controllers.js => 200
Zombie: Unexpected token ILLEGAL SyntaxError: Unexpected token ILLEGAL
    in /js/controllers.js
Zombie: GET http://localhost:3000/js/lib/jquery-1.7.2.min.js => 200
Zombie: Unexpected token ILLEGAL SyntaxError: Unexpected token ILLEGAL
    in /js/lib/jquery-1.7.2.min.js
Zombie: GET http://localhost:3000/js/filters.js => 200
Zombie: GET http://localhost:3000/js/directives.js => 200
Zombie: Unexpected token ILLEGAL SyntaxError: Unexpected token ILLEGAL
    in /js/directives.js
Zombie: Unexpected token ILLEGAL SyntaxError: Unexpected token ILLEGAL
    in /js/filters.js
Zombie: GET http://localhost:3000/js/lib/bootstrap.min.js => 200
Zombie: Unexpected token ILLEGAL SyntaxError: Unexpected token ILLEGAL
    in /js/lib/bootstrap.min.js
Zombie: GET http://localhost:3000/js/lib/angular.min.js => 200
Zombie: Unexpected token ILLEGAL SyntaxError: Unexpected token ILLEGAL
    in /js/lib/angular.min.js
Zombie: GET http://localhost:3000/js/services.js => 200
Zombie: GET http://localhost:3000/js/filters.js => 200
Zombie: GET http://localhost:3000/js/directives.js => 200
Zombie: GET http://localhost:3000/js/controllers.js => 200
Zombie: GET http://localhost:3000/js/app.js => 200
Zombie: Unexpected token ILLEGAL SyntaxError: Unexpected token ILLEGAL
    in /js/app.js
Zombie: Unexpected token ILLEGAL SyntaxError: Unexpected token ILLEGAL
    in /js/controllers.js
Zombie: Unexpected token ILLEGAL SyntaxError: Unexpected token ILLEGAL
    in /js/directives.js
Zombie: Unexpected token ILLEGAL SyntaxError: Unexpected token ILLEGAL
    in /js/filters.js
Zombie: GET http://localhost:3000/js/services.js => 200 
```

也许是coffeescript中的问题，但我已经添加了mocha选项。是否有任何方法可以在没有 Angular 团队传播的 JsTestDriver 的情况下测试 Angular 应用程序。

更新。我已将错误断言更改为`browser.errors.should.be.empty`，它向我显示了一个错误：

```
1) Given I am a new user When I visit the home page Then browser status shold be ok:
AssertionError: expected [ [Error: Unexpected token ILLEGAL],
  [Error: Unexpected token ILLEGAL],
  [Error: Unexpected token ILLEGAL],
  [Error: Unexpected token ILLEGAL],
  [Error: Unexpected token ILLEGAL],
  [Error: Unexpected token ILLEGAL],
  [Error: Unexpected token ILLEGAL],
  [Error: angular is not defined] ] to be empty
  at Object.empty (/home/alder/Node/angular-express-coffee/node_modules/should/lib/should.js:229:10)
  at Context.<anonymous> (/home/alder/Node/angular-express-coffee/test/app_test.coffee:31:40)
  at Test.Runnable.run (/usr/lib/node_modules/mocha/lib/runnable.js:184:32)
  at Runner.runTest (/usr/lib/node_modules/mocha/lib/runner.js:300:10)
  at Runner.runTests.next (/usr/lib/node_modules/mocha/lib/runner.js:346:12)
  at next (/usr/lib/node_modules/mocha/lib/runner.js:228:14)
  at Runner.hooks (/usr/lib/node_modules/mocha/lib/runner.js:237:7)
  at next (/usr/lib/node_modules/mocha/lib/runner.js:185:23)
  at Runner.hook (/usr/lib/node_modules/mocha/lib/runner.js:205:5)
  at process.startup.processNextTick.process._tickCallback (node.js:244:9) 
```

上次更新：问题出在资产管道中，所有浏览器都已`js`禁用。`Zombie`现在我从咖啡换成 js，它可以工作了。但我更喜欢咖啡，所以如果有人能解决它，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-28T17:13:49.153

难道是因为摩卡？我听说它可能会因为它的名字而引起问题......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T20:16:29.720

你试过[Angular Scenario Runner](http://docs.angularjs.org/guide/dev_guide.e2e-testing)吗？

# asp.net-mvc - 使用不显眼的验证处理占位符

> ID：11882475
> 
> 赞同：3
> 
> 时间：2012-08-09T11:33:05.500
> 
> 标签：asp.net-mvc, unobtrusive-validation

我有一个包含输入字段占位符的表单。它使用 html5 占位符属性和 javascript 占位符后备。我像这样使用不显眼的验证：

```
 [DisplayName("")]
    [Required(ErrorMessage = "Please enter a name")]
    [StringLength(maximumLength: 20, MinimumLength = 1, ErrorMessage = "max length is 20 chars.")]
    public string UserName { get; set; }

    [DisplayName("")]
    [Required(ErrorMessage = "Please enter a comment.")]
    [StringLength(maximumLength: 350, MinimumLength = 1, ErrorMessage = "max length is 350 chars.")]
    public string CommentText { get; set; } 
```

问题是在使用 IE 时，占位符在输入字段中被计为字符，因此没有验证，并且可以在不输入任何内容时提交表单。

有什么方法可以向限制指定字符串的 UserName 注释添加条件。例如“在此处输入用户名..”

如果可能的话，我想避免编写自定义属性验证器。

提前致谢。

编辑。使用正则表达式解决：

```
[RegularExpression("^((?!My_Placeholder_Text).|\n)*$", ErrorMessage = "Please enter text")] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T12:26:29.010

如何使用正则表达式属性来确保您要查找的字符串不在提交的字符串中？以下问题包含实现此目的的表达式示例： [RegEx to exclude a specific string constant](https://stackoverflow.com/questions/1395177/regex-to-exclude-a-specific-string-constant)

# c# - 触发按钮点击

> ID：11882480
> 
> 赞同：1
> 
> 时间：2012-08-09T11:33:24.110
> 
> 标签：c#, wpf, events, button

我是 C# 的新手。实际上，我几年前在大学学习过 Java，但显然学得不是很好！现在我非常热衷于从头开始学习 C#。我对绝对基础有一个不错的想法，但现在已经失败了。

我正在使用 WPF 构建一个相对简单的测验“游戏”应用程序。用户点击“加载测验”按钮，加载一个包含问题和答案的文本文件。用户然后单击“下一个问题”，这会将第一个问题和四个多项选择加载到文本框中。这一切似乎工作正常。

然后用户点击对应于正确答案的按钮1/2/3/4。当他们这样做时，如果选择了正确的答案，我希望“正确！做得好”文本显示在 tResult 中，或者如果答案不正确，则显示其他文本。

但是，单击按钮不会立即执行任何操作，直到单击 bNextQ_Click 时，最终在 tResult 中显示“对不起，这是不正确的”。

布尔标志似乎仍然为假，因此无法识别点击事件。

请注意：我意识到我的代码会一团糟，而且我确信我这样做的方式不好而且效率低下。任何建议都欣然接受！

无论如何，这是代码，非常感谢任何反馈：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using System.IO;

namespace QuizGame
{
/// <summary>
/// Interaction logic for MainWindow.xaml
/// </summary>
public partial class MainWindow : Window
{

    public MainWindow()
    {
        InitializeComponent();
    }

    private bool button1Clicked = false;
    private bool button2Clicked = false;
    private bool button3Clicked = false;
    private bool button4Clicked = false;

    private int score = 0;

    private void txtQuestion_TextChanged()
    {
        throw new NotImplementedException();
    }

    private void bNextQ_Click(object sender, RoutedEventArgs e)
    {
        questionIteration();

    }

    private void numQuestions_TextChanged(object sender, TextChangedEventArgs e)
    {

    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        button1Clicked = true;
    }

    private void button2_Click(object sender, RoutedEventArgs e)
    {
        button2Clicked = true;
    }

    private void button3_Click(object sender, RoutedEventArgs e)
    {
        button3Clicked = true;
    }

    private void button4_Click(object sender, RoutedEventArgs e)
    {
        button4Clicked = true;
    }

    private void txtQuestion_TextChanged(object sender, TextChangedEventArgs e)

    {
        //txtQuestion.Text = splitted[];

    }

    private void button_Load_Quiz_Click(object sender, RoutedEventArgs e)
    {
        int lineCount = File.ReadLines(@"C:\\Users\Morgan\Documents\Visual Studio 2010\Projects\QuizGame\QuizGame\Quiz.txt").Count();

        numQuestions.Text = lineCount.ToString();

        txtQuestion.Text = "Press 'Next Question' to start.";
    }

    private void questionIteration()
    {

        int i = 0;

        string[] questionArray = File.ReadAllLines(@"C:\\Users\Morgan\Documents\Visual Studio 2010\Projects\QuizGame\QuizGame\Quiz.txt");

        foreach (string qArrays in questionArray)
        {

            string question = questionArray[i];

            string[] splitted = question.Split('|');

            txtQuestion.Text = splitted[0];
            textBox1.Text = splitted[1];
            textBox2.Text = splitted[2];
            textBox3.Text = splitted[3];
            textBox4.Text = splitted[4];

            string correct = splitted[5];

            if (button1Clicked == true)
            {
                if (correct == textBox1.Text)
                {
                    score++;

                    tResult.Text = "Correct! Well done.";
                }
                else tResult.Text = "Sorry, that is incorrect.";

            }

            if (button2Clicked == true)
            {
                if (correct == textBox2.Text)
                {
                    score++;

                    tResult.Text = "Correct! Well done.";
                }
                else tResult.Text = "Sorry, that is incorrect.";

            }

            if (button3Clicked == true)
            {
                if (correct == textBox3.Text)
                {
                    score++;

                    tResult.Text = "Correct! Well done.";
                }
                else tResult.Text = "Sorry, that is incorrect.";

            }

            if (button4Clicked == true)
            {
                if (correct == textBox4.Text)
                {
                    score++;

                    tResult.Text = "Correct! Well done.";
                }
                else tResult.Text = "Sorry, that is incorrect.";

            }

            i++;
            button1Clicked = false;
            button2Clicked = false;
            button3Clicked = false;
            button4Clicked = false;
        }

    }

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:42:44.497

> 单击按钮不会立即执行操作，直到单击 bNextQ_Click

那是因为您已经编写了“动作”部分，而不是立即编写，而是在 questionIteration() 函数中编写了代码，当单击下一个问题的按钮时，该函数显然会触发。要解决此问题，请将这部分代码放在一个单独的函数中，并在每次单击答案按钮时调用它：

```
if (button1Clicked == true)
        {
            if (correct == textBox1.Text)
            {
                score++;

                tResult.Text = "Correct! Well done.";
            }
            else tResult.Text = "Sorry, that is incorrect.";

        }

        if (button2Clicked == true)
        {
            if (correct == textBox2.Text)
            {
                score++;

                tResult.Text = "Correct! Well done.";
            }
            else tResult.Text = "Sorry, that is incorrect.";

        }

        if (button3Clicked == true)
        {
            if (correct == textBox3.Text)
            {
                score++;

                tResult.Text = "Correct! Well done.";
            }
            else tResult.Text = "Sorry, that is incorrect.";

        }

        if (button4Clicked == true)
        {
            if (correct == textBox4.Text)
            {
                score++;

                tResult.Text = "Correct! Well done.";
            }
            else tResult.Text = "Sorry, that is incorrect.";

        } 
```

设置布尔标志 buttonxClicked 等后调用此函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T11:50:43.943

> 但是，单击按钮不会立即执行任何操作，直到单击 bNextQ_Click 时，最终在 tResult 中显示“对不起，这是不正确的”。

那是因为该代码是这样编写的。没有错误或其他东西，这是设计缺陷。您的按钮（1-4）点击，实际上只是设置标志。这就是为什么什么都没有发生。下一步按钮实际上运行设置一些消息的代码。您必须更仔细地考虑解决方案，考虑会发生什么以及以什么顺序。现在你的代码做这样的事情：

1 用户点击加载按钮 - 测验已加载

2 用户点击 1-4 - 设置标志

3 用户单击下一步 - 再次加载问题（为什么？），并为每个问题（为什么，如果用户回答一个问题）：

3A 答案已设置（再次 - 为什么？）

3B 检查用户是否回答正确

3C 复位标志

3D 检查下一个问题（带有重新设置的标志...）

它应该更像这样：

1 用户单击加载按钮 - 测验已加载，显示已准备就绪的消息

2 用户单击下一步 - 加载下一个问题

3 用户单击 1-4 - 检查答案是否正确，显示消息

4 用户单击下一步...

想想你的解决方案，在一张纸上写下一些顺序、一些“算法”和代码。

# python - 在 Python2.2（32 位）上加载 64 位 Dll

> ID：11882484
> 
> 赞同：0
> 
> 时间：2012-08-09T11:33:33.223
> 
> 标签：python, dll, 32bit-64bit, printers, python-2.2

我正在使用**Python 2.2**，一个**32 位进程**，但我需要从打印机加载一个**64 位 dll 。**这可能看起来很奇怪，但这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T12:13:25.973

一句话，没有。

`ctypes`using`LoadLibrary`用于连接到外部 DLL，但如果您是 32 位进程，那么您将使用 32 位地址，因此无法将 64 位二进制文​​件映射到您的地址空间。

# c# - vs2010无法打开vs2008项目

> ID：11882487
> 
> 赞同：0
> 
> 时间：2012-08-09T11:33:45.140
> 
> 标签：c#, windows

我正在尝试打开一个在 vs2008 中开发的项目，但出现以下错误。

“无法打开，因为此版本的应用程序不支持其项目类型 .csproj”。

我尝试选择打开方式-> Visual Studio 版本选择器，但它作为 vs2010 项目打开并给出相同的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T11:43:35.880

当我得到这个消息时，那是因为我正在打开一个“非本地”项目格式。比如MVC。您还必须为 VS2010 安装该项目类型扩展（如果这是正确的名称？为您提供项目模板的那个）。我认为它甚至需要是相同的版本......再次像 MVC2 而不是 MVC3。

与 XNA 类似。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T15:51:32.257

感谢大家的帮助。

我正在开发一个项目，它在 vs 2010 中，同时我尝试打开另一个项目以供参考，它在 vs 2008 中，即使我在新实例中打开它也无法打开它。

最后我关闭了所有的 VS 实例并首先打开了 vs 2008 项目，然后它要求版本规范。

无法纠正错误，但得到了解决方案。

“首先关闭所有打开的实例，然后打开较旧的实例”。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-08-09T11:42:42.850

只需尝试在文本编辑器中打开解决方案文件并更改

```
# Visual Studio 2008 
```

至

```
# Visual Studio 2010 
```

它有帮助吗？

PS：以下是列出的 VS 2008 和 VS 2010 sln 和 csproj 文件之间的区别：

[http://blogs.msdn.com/b/rextang/archive/2009/07/06/9819189.aspx](http://blogs.msdn.com/b/rextang/archive/2009/07/06/9819189.aspx)

您可以尝试手动移植。在你做之前做一个备份。

# sql - 如何显示与另一个表中的行不匹配的行？

> ID：11882488
> 
> 赞同：0
> 
> 时间：2012-08-09T11:33:50.507
> 
> 标签：sql, oracle

我想显示不是病房管理员的员工。

我有这个显示病房经理的查询：

```
SELECT Name, Grade, WardManager, StaffNo  
FROM STAFF, WARD   
WHERE WARD.WardManager = STAFF.StaffNo; 
```

但是我不知道如何显示不是病房经理的员工。我尝试了 IS NOT、NOT LIKE、NOT IN 等的组合，但它们似乎都不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:39:02.117

不确定我是否正确理解了您的表结构，但是当有人抱怨不`NOT IN`返回任何行时，几乎总是存在用于`IN`运算符的列中的 NULL 值的问题。

试试这个：

```
select *
from staff
where staffno not in (select wardmanager 
                      from ward 
                      where wardmanager IS NOT NULL) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T12:32:49.180

要替代 a_horse_with_no_name 的答案，也可以使用 a 来完成`left outer join`：

```
select s.*
  from staff s
  left outer join ward w
    on s.staffno = w.wardmanager
 where w.wardmanager is null 
```

这可以加入您想要的内容，然后要求*不*匹配的值。

至于哪个更快/更有效[，这取决于您的具体情况](https://stackoverflow.com/questions/1200295/sql-join-vs-in-performance)，因此您必须同时测试并查看。

由于表中没有相关数据`ward`（所有列都将为空），因此没有必要从该表中选择列。但是，a 的好处`join`是您可以根据需要进行操作。例如，假设您删除了`where`可以退回病房经理和非病房经理的员工的条款。区别在于，`ward`当它们不是经理时，来自的列将始终为空。

这样做的另一种方法是使用`where exists`，但`not in`只有当您不想从`ward`.

```
select s.*
  from staff s
 where not exists ( select 1
                      from ward w
                     where wardmanager = s.staffno ) 
```

速度和效率再次取决于您的情况以及表中有多少行。

# java - 如何在java中执行cmd命令？

> ID：11882489
> 
> 赞同：1
> 
> 时间：2012-08-09T11:33:56.097
> 
> 标签：java, cmd, gdal

我想执行这个命令

```
D:/Projects/GDAL/ogr2ogr.exe -f "MapInfo File" D:/Projects/GDAL/r/output_test.tab PG:"host=localhost user=postgres password=123456 dbname=postgis" -sql "SELECT * from filedata WHERE num=1" 
```

我试过这个：

```
Process process = Runtime.getRuntime().exec(new String[]{"cmd.exe", "D:/Projects/GDAL/ogr2ogr.exe -f \"MapInfo File\" D:/Projects/GDAL/r/output_test.tab PG:\"host=localhost user=postgres password=123456 dbname=postgis\" -sql \"SELECT * from filedata WHERE num=1\""}); 
```

我没有错误，但什么也没发生。我的错误在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T11:40:34.793

阅读此内容：[http](http://www.javaworld.com/jw-12-2000/jw-1229-traps.html) ://www.javaworld.com/jw-12-2000/jw-1229-traps.html并逐步完成每个建议。

Process API 因陷阱而臭名昭著。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T11:49:16.610

你应该添加'/C'：

```
Process process = Runtime.getRuntime().exec(new String[]{"cmd.exe", "/c", "D:/Projects/GDAL/ogr2ogr.exe -f \"MapInfo File\" D:/Projects/GDAL/r/output_test.tab PG:\"host=localhost user=postgres password=123456 dbname=postgis\" -sql \"SELECT * from filedata WHERE num=1\""}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T11:53:48.540

尝试检查您的返回值：

```
String command = ""; // Your command
Process installproc = installcommand.execute();

StringBuilder out = new StringBuilder();
StringBuilder err = new StringBuilder();

installproc.waitForProcessOutput(out, err);
if (out.length() > 0) System.out.println("out:\n$out".toString());
if (err.length() > 0) System.out.println("err:\n$err".toString());

if(installproc.exitValue() != 0) {
throw new Exception("");
} 
```

这只是示例代码，我没有以任何方式对其进行测试。

这应该你给出一些关于错误是什么的提示。

# macos - 以编程方式访问 PhotoStream

> ID：11882492
> 
> 赞同：2
> 
> 时间：2012-08-09T11:34:03.800
> 
> 标签：macos, cocoa

是否可以通过编程方式从 OS X 访问 PhotoStream？

我没有看到任何 API，而且 iCloud 只是用于应用程序级存储。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T21:40:18.537

查看`~/Library/Application Support/iLifeAssetManagement/assets/sub`mac 上所有图像的文件夹。

# javascript - javascript动态函数调用未定义

> ID：11882493
> 
> 赞同：0
> 
> 时间：2012-08-09T11:34:05.983
> 
> 标签：javascript, jquery

# 函数 savefromtextarea() & varialbe globe 未定义，在单击保存按钮时调用...

我的代码的这一部分...单击保存文本按钮时，我需要从 texarea 方法访问保存...当我尝试调用 saveFromTextArea 方法时，它的 throws 地球未定义，但地球变量是全局变量...

```
 ME.ZFP.annotaion.Text = function () { //function to annotate the text

var canvas = myscreen.getTempCanvas().ele;
var context = canvas[0].getContext('2d');
var global = this;

$(canvas).mousedown(function(e){ //on mouse down event 

    if ($('#textAreaPopUp').length === 0) {

        var mouseX = e.pageX - this.offsetLeft + $(canvas).position().left;
        var mouseY = e.pageY - this.offsetTop;

        //append a text area box to the canvas where the user clicked to enter in a comment
        var textArea = "<div id='textAreaPopUp' style='position:absolute;top:"+mouseY+"px;left:"+mouseX+"px;z-index:30;'><input type='text' id='textareaTest' ></input>";
     //Click on save buttom global.saveTextFromArea undefined
        var saveButton = "<input type='button' value='save' id='saveText' onclick='global.saveTextFromArea("+mouseY+","+mouseX+");'></div>";
        var appendString = textArea + saveButton;
        $("#container").append(appendString);
    } 
});
//Function to be called 
this.saveTextFromArea = function(y,x){
        //get the value of the textarea then destroy it and the save button
        var text = $('textarea#textareaTest').val();
        $('textarea#textareaTest').remove();
        $('#saveText').remove();
        $('#textAreaPopUp').remove();

}

   } 
```

谢谢阿杰恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T11:44:12.483

好吧，您的代码有一些错误，已在[此 fiddle](http://jsfiddle.net/kcweg/)中修复。
你在代码的最后忘记`});`了。
最后（挑剔）我更正
`if ($('#textAreaPopUp').length == 0)`了：
`if ($('#textAreaPopUp').length === 0)`

但是..这个更正的代码能解决你的问题吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T11:44:25.610

像您这样的内联事件处理程序`onclick='...'`只能引用全局范围的变量和函数，但是如果您的变量命名`global`是在函数内声明的（例如在 document.ready 处理程序内），那么它不是全局的并且内联属性事件处理程序不能看见。

# ruby-on-rails - 在 Rails 中处理多个根路径和范围

> ID：11882494
> 
> 赞同：6
> 
> 时间：2012-08-09T11:34:07.983
> 
> 标签：ruby-on-rails, routing

我们有以下路线设置：

```
MyApp::Application.routes.draw do
  scope "/:locale" do    
    ...other routes
    root :to => 'home#index'
  end
  root :to => 'application#detect_language'
end 
```

这给了我们这个：

```
root      /:locale(.:format)    home#index
root      /                     application#detect_language 
```

这很好。

但是，当我们想生成带有语言环境的路由时，我们遇到了麻烦：

`root_path`生成`/`正确的。

`root_path(:locale => :en)`生成`/?locale=en`不受欢迎的 - 我们想要`/en`

所以，问题是，这可能吗？怎么可能？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-09T12:53:32.437

默认情况下使用 root 方法来定义顶级/路由。所以，你定义了相同的路线两次，导致第二个定义覆盖第一个！

下面是根方法的定义：

```
def root(options = {})
  options = { :to => options } if options.is_a?(String)
  match '/', { :as => :root, :via => :get }.merge(options)
end 
```

很明显，它使用 :root 作为命名路由。如果您想使用 root 方法，只需覆盖所需的参数。例如

```
scope "/:locale" do    
  ...other routes
  root :to => 'home#index', :as => :root_with_locale
end
root :to => 'application#detect_language' 
```

并将其称为：

```
root_with_locale_path(:locale => :en) 
```

所以，这不是错误！

# linux-kernel - 在 Linux 中自动执行 USB 的热插拔事件

> ID：11882495
> 
> 赞同：0
> 
> 时间：2012-08-09T11:34:13.927
> 
> 标签：linux-kernel, hotplugging

我正在研究迷你路由器项目，并希望在设备插入路由时自动执行 USB 热插拔事件。

使用的内核版本是 2.6.30，并且配置了 CONFIG_HOTPLUG。

我用谷歌搜索并编写了热插拔脚本，但没有在 holplug 上获得事件。任何人都可以瞥见解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-26T14:24:00.953

确保文件中有热插拔脚本路径`/proc/sys/kernel/hotplug`：

```
echo /path/to/hotplug/script > /proc/sys/kernel/hotplug 
```

默认路径是`/sbin/hotplug`.

如果您使用 bash 脚本来调试热插拔，像这样

```
#!/bin/bash
env >> /your/log/file 
```

确保您已指定绝对路径`/your/log/file`并且脚本是可执行的（只需手动运行它，看看它是否有效）。

此外，如果您的设备上安装了 udev，请尝试使用 udev 捕获 uevent 并查看它们是否由内核生成：

```
udevadm monitor 
```

# ruby-on-rails - Rails 对自定义操作的验证

> ID：11882497
> 
> 赞同：3
> 
> 时间：2012-08-09T11:34:14.453
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我知道你可以这样做：

```
validates :cat_no, :presence => true, :on => :create 
```

我有一个自定义操作：

```
 def approve
    @product = Product.find(params[:id])
    @product.update_attribute :approved, true
    redirect_to product_path(@product)
 end 
```

我想做：

```
validates :cat_no, :presence => true, :on => :approve 
```

这似乎不起作用。有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-09T12:01:04.760

我认为您误解了验证的概念。*验证是由模型*的更改（通过或）触发的`save`，而不是由控制器操作触发的，因此在您的情况下让您的操作触发验证是没有意义的。`create``update``approved`

查看您的代码，在我看来，您真正想要做的是`cat_no`在模型*更新*时运行验证，条件是 的值`approved`刚刚变为`true`（即您的`approve`操作的第 2 行`@product.update_attribute :approved, true`）。

我认为下面的代码应该实现这一点：

```
validates :cat_no, :presence => true, :on => :update, :if => :just_approved?

def just_approved?
  changed.include?("approved") && approved?
end 
```

更新：

回想起来，上面的验证可能比你真正想要的更宽松。如果您有一个批准的记录并且您更改`cat_no`为`nil`，它将验证，因为`approved`没有更改（因此`changed.include?("approved")`将评估为`false`）。

更有可能这是您真正想要的：

```
validates :cat_no, :presence => true, :on => :update, :if => :approved? 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T11:58:26.860

validates 语句中指定的 :action 选项不是控制器操作，而是对模型本身的操作，这就是控制器的批准操作不会触发模型验证的原因。

在您的情况下，您应该做的是删除 :on 验证语句的选项：

```
validates :cat_no, :presence => true 
```

现在模型将在每次保存时验证 cat_no 是否存在。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T12:03:05.190

虽然不清楚，但您似乎正在尝试在控制器中使用 Active Record 验证，但事实并非如此。您可以改用 ActionController 过滤器，这很容易做到：

```
class FooController < ApplicationController
  before_filter :cat_no, :only => :approve

  def approve
    # your approve action code goes here.
  end

  private
  def cat_no
    #implement your 'validation' here.
  end

end 
```

查看[ActionController 过滤器指南](http://guides.rubyonrails.org/action_controller_overview.html#filters)以获取更多信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-26T09:26:49.053

试试这个：

```
validates_presence_of :cat_no, on: :approve

def approve
  @product = Product.find(params[:id])
  @product.attributes = product_params
  @product.save(context: :approve)
  redirect_to @product
end

private

def product_params
  params.require(:product).permit(:name, :description, :cat_no)
end 
```

# iphone - NSURL 向 fileURLWithPath 方法添加参数

> ID：11882501
> 
> 赞同：12
> 
> 时间：2012-08-09T11:34:47.340
> 
> 标签：iphone, ios, parameters, append, nsurl

我使用这行代码将本地 html 文件加载到 web 视图中：

```
NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"index" ofType:@"html" inDirectory:@"html"]]; 
```

但是，我想在 url 中添加一些 http 参数，但到目前为止还没有运气。

我试过这个：

```
url = [url URLByAppendingPathComponent:@"?param1=1"]; 
```

但在此之后，一个 html 不会在 webview 中加载。

有没有办法在 webview 中使用 params 加载本地 html 文件？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-09T11:43:58.250

做这个：

```
NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"index" ofType:@"html" inDirectory:@"html"]];

NSString *URLString = [url absoluteString];   
NSString *queryString = @"?param1=1"; 
NSString *URLwithQueryString = [URLString stringByAppendingString: queryString];  

NSURL *finalURL = [NSURL URLWithString:URLwithQueryString];
NSURLRequest *request = [NSURLRequest requestWithURL:finalURL cachePolicy:NSURLRequestReloadIgnoringCacheData timeoutInterval:(NSTimeInterval)10.0 ];

[web loadRequest:request]; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-06-09T01:48:02.950

**普林斯**最赞成的答案并不总是有效。

在 iOS 7 Apple 引入`NSURLComponents`的类中，我们可以利用它安全地将查询添加到`NSURL`.

```
NSURL *contentURL = ...;
NSURLComponents *components = [[NSURLComponents alloc] initWithURL:contentURL resolvingAgainstBaseURL:NO];
NSMutableArray *queryItems = [components.queryItems mutableCopy];
if (!queryItems) queryItems = [[NSMutableArray alloc] init];
[queryItems addObject:[NSURLQueryItem queryItemWithName:@"access_token" value:@"token_here"]];
components.queryItems = queryItems;
NSURL *newURL = components.URL; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T11:45:22.710

我这样使用：

```
NSURL *url=[NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"index" ofType:@"xml"]]; 
```

如果您的文件包含在项目导航器的资源文件夹中。否则你必须设置你的完整路径`NSString`并在你的路径中使用它`NSURL`。

# assembly - 使用 qemu 运行二进制文件

> ID：11882505
> 
> 赞同：5
> 
> 时间：2012-08-09T11:34:54.223
> 
> 标签：assembly, arm, qemu

我正在我的一门课程中学习 arm 汇编语言。我在开始时没有什么问题。我写了一个简单的c代码：

```
int main()
{
    int a = 10;
    int b = 20;
    int c = a+b;
} 
```

然后我通过给出命令使用 gnu arm 将其转换为汇编代码：

```
arm-elf-gcc -S first.c 
```

这会生成一个包含汇编代码的文件 first.s：

```
 .file   "first.c"
    .text
    .align  2
    .global main
    .type   main, %function
main:
    @ args = 0, pretend = 0, frame = 12
    @ frame_needed = 1, uses_anonymous_args = 0
    mov ip, sp
    stmfd   sp!, {fp, ip, lr, pc}
    sub fp, ip, #4
    sub sp, sp, #12
    mov r3, #10
    str r3, [fp, #-16]
    mov r3, #20
    str r3, [fp, #-20]
    ldr r2, [fp, #-16]
    ldr r3, [fp, #-20]
    add r3, r2, r3
    str r3, [fp, #-24]
    mov r0, r3
    sub sp, fp, #12
    ldmfd   sp, {fp, sp, pc}
    .size   main, .-main
    .ident  "GCC: (GNU) 3.4.3" 
```

然后我使用以下命令编译了汇编代码：

```
arm-elf-gcc -g first.s 
```

这生成了一个.out 二进制文件。然后我尝试使用 qemu 使用命令运行 a.out：

```
qemu-arm a.out 
```

但这会产生输出

```
Segmentation fault 
```

我找不到错误，我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T04:39:33.567

您正在尝试在用户模式下运行 qemu。您还需要链接对应于 arm 的库。

看看下面 pkg 中的脚本文件。

[http://wiki.qemu.org/download/linux-user-test-0.3.tar.gz](http://wiki.qemu.org/download/linux-user-test-0.3.tar.gz)

您将需要运行**qemu -L library_PATH_ARM ./a.out**

# php - Google 无法读取 URL 中包含特殊字符的站点地图

> ID：11882506
> 
> 赞同：0
> 
> 时间：2012-08-09T11:34:58.503
> 
> 标签：php, xml, character-encoding, sitemap

我有一个用 PHP 动态创建的大型站点地图，它有一个包含大约 230 个单独站点地图的站点地图索引，每个单独的站点地图有 3.000 到 15.000 个 URL。

在这 230 个站点地图中的大多数中，一切正常，但其中一些 URL 包含特殊字符并且 Google 返回错误，不接受此类站点地图。一个正常的、被接受的 URL 的例子：

```
http://www.site.com/Gentofte-Greve/Denmark 1 Badmintonligaen/12-fe-juice_a-1091627-1-33-1-odds/ 
```

损坏 Google 的整个站点地图文件的 URL 示例：

```
http://www.site.com/Team%20%C5rhus%20Elite-Solr%F8d%20Strand/Denmark 1 Badmintonligaen/12-fe-juice_a-1091631-1-33-1-odds/ 
```

任何特殊字符，例如北欧字符，都会破坏站点地图。这是北欧字符的示例：http: [//www.borgos.nndata.no/alfabet.htm](http://www.borgos.nndata.no/alfabet.htm)

我的问题是 - 我如何对这些特殊字符（和其他类似字符）进行编码，以便站点地图仍然可以正常检查。如果这是一个解决方案，我应该使用哪个 PHP 编码函数？是使用 str_replace 并用普通字符替换这些字符的唯一解决方案吗？这不是问题，无论您在它的第一部分写什么，该 URL 都有效，因为该部分仅用于 SEO，但这会很耗时。我希望能够以不会破坏 Google 站点地图的方式编写这些特殊字符。

关于我的站点地图的其他一切都很好，它们是用 UTF-8 编码的，或者至少它们应该使用这一行：

```
<?xml version='1.0' encoding='UTF-8'?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:50:22.867

`%C5`和序列是`%F8`用来表示字符 U+00C5 (Å) 和 U+00F8 (ø) 的吗？如果是这样，您需要使用它们的 UTF-8 编码，而不是它们的原始 Unicode 代码点编号。'Å' 应该是`%C3%85`，而 'ø' 应该是`%C3%B8`。

有关 URI 编码的更多信息，请参阅[RFC 3986](https://www.rfc-editor.org/rfc/rfc3986)。

* * *

在 PHP 中执行此操作很复杂，因为 PHP 字符串实际上是字节字符串，而不是 Unicode 字符串。它们不能存储抽象的 Unicode 字符；它们只能以特定编码（例如 UTF-8 或 UTF-16）存储这些字符的编码表示。您可以使用[mbstring](http://php.net/manual/en/book.mbstring.php)扩展来处理编码的 Unicode 字符串，但正确执行此操作可能意味着在整个应用程序中使用 mbstring 函数处理*所有Unicode 文本。*

您应该从源头上解决这个编码问题：您的程序是如何获得一个包含字节 0xC5 来表示字符 U+00C5 的字符串？某处某处必须假定 Unicode 代码点数字直接转换为字节，这是错误的。找到并修复它，以便您的数据首先以 UTF-8 格式读入 PHP 字符串，然后使用 mbstring 函数对字符串进行任何操作。

一旦你有一个包含 URL 的 UTF-8 表示的字符串，[`rawurlencode()`](http://www.php.net/manual/en/function.rawurlencode.php)应该会给你正确的百分比转义结果。

# caching - EJB weblogic.ejb20.cache.CacheFullException

> ID：11882509
> 
> 赞同：7
> 
> 时间：2012-08-09T11:35:05.767
> 
> 标签：caching, ejb, weblogic, weblogic8.x

我正在使用 EJB1.2 开发一个应用程序。以前运行良好，但从过去几天开始，我遇到了以下异常

```
Exception in ejbLoad:: weblogic.ejb20.cache.CacheFullException: size=85783, target=5000, incr=1 at weblogic.ejb20.cache.EntityCache$SizeTracker.shrinkNext(JI)Lweblogic.ejb20.cache.EntityCache$MRUElement;(EntityCache.java:438) at weblogic.ejb20.cache.EntityCache.put
(Ljavax.transaction.Transaction;Lweblogic.ejb20.cache.CacheKey;Ljavax.ejb.EntityBean;Lweblogic.ejb20.interfaces.CachingManager;)V(EntityCache.java:141) at weblogic.ejb20.manager.DBManager.getReadyBean(Ljavax.transaction.Transaction;Ljava.lang.Object;)Ljavax.ejb.EntityBean;(DBManager.java:332) at 
    weblogic.ejb20.manager.DBManager.preInvoke(Lweblogic.ejb20.internal.InvocationWrapper;)Ljavax.ejb.EnterpriseBean;(DBManager.java:249) at 
    weblogic.ejb20.internal.BaseEJBLocalObject.preInvoke(Lweblogic.ejb20.internal.InvocationWrapper;)Lweblogic.ejb20.internal.InvocationWrapper;(BaseEJBLocalObject.java:228) at weblogic.ejb20.internal.EntityEJBLocalObject.preInvoke(Lweblogic.ejb20.internal.MethodDescriptor;Lweblogic.security.service.ContextHandler;)Lweblogic.ejb20.internal.InvocationWrapper;(EntityEJBLocalObject.java:72) at com.nextjet.enterprise.locationcode.locationcode.LocationCode_v2epgs_ELOImpl.getLocationCodeData()Lcom.nextjet.enterprise.locationcode.LocationCodeData;(LocationCode_v2epgs_ELOImpl.java:28) at com.nextjet.enterprise.locationcode.locationcodemanager.LocationCodeManagerBean.loadShippingAddress(Ljava.lang.Long;Ljava.lang.String;)Lcom.nextjet.enterprise.locationcode.LocationCodeView;(LocationCodeManagerBean.java:538) at com.nextjet.enterprise.locationcode.locationcodemanager.LocationCodeManagerBean.doSearchShippingAddresses(Ljava.lang.String;)Lcom.nextjet.enterprise.locationcode.LocationCodeSearchResult;(LocationCodeManagerBean.java:514) at com.nextjet.enterprise.locationcode.locationcodemanager.LocationCodeManagerBean.lookupAccountShipping..... 
```

现在我正在改变`<max-beans-in-cache>`in`weblogic-ejb-jar.xml`

我将上述值更改为`<max-beans-in-cache>100000</max-beans-in-cache>`

它是这种异常的唯一解决方案，还是数据库中可能存在与数据相关的问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T08:34:52.063

10000 是一个相当高的值`max-beans-in-cache`，从日志看来，应用程序试图调用多达 85785 个 EJB 实例。

我建议在您的代码中进行一些重构。

你的代码正在做

```
com.nextjet.enterprise.locationcode.locationcode.LocationCode_v2epgs_ELOImpl
.getLocationCodeData() 
```

***这主要是读取操作吗？或者您正在同时进行写入和读取？***

如果它主要执行读取操作，您可以通过 2 种方式对其进行重构以减少 EJB 开销。

1) 阅读 Oracle 关于调整 EJB 设置和数据库选项以实现并发性的建议，尤其是 Read-Mostly 模式

[http://docs.oracle.com/cd/E13222_01/wls/docs81/ejb/entity.html#ChoosingaConcurrencyStrategy](http://docs.oracle.com/cd/E13222_01/wls/docs81/ejb/entity.html#ChoosingaConcurrencyStrategy)

2) 如果您主要是在进行读取 - 则根本不要使用实体 EJB。使用 FastLaneReader 模式，该模式使用直接 JDBC 调用来获取 SELECT 数据，并且您可以像目前一样使用 EJB 进行写入。这样可以减少max-beans-in-cache

Sun Design Patterns 网站上给出了一个非常详细的示例

[http://java.sun.com/blueprints/patterns/FastLaneReader.html](http://java.sun.com/blueprints/patterns/FastLaneReader.html)

# c++ - 在 C 程序中使用 C++ 库

> ID：11882514
> 
> 赞同：1
> 
> 时间：2012-08-09T11:35:16.623
> 
> 标签：c++, c, initialization

我正在尝试在单独的 C 程序中使用一些用 C++ 编写的软件。

我已经在 .lib 文件中编译了必要的组件，并使用了一些 C 代码

```
#ifdef __cplusplus
    extern "C" {
#endif 
```

此代码将 C++ 对象方法调用封装在 C 可调用函数中。对象是在文件范围内声明的，指向对象的指针最初被检索，然后用于引用要调用该方法的对象。例如：

```
const void *GetHandle() {
    return (void *) &obj;
} 
```

然后调用一个方法：

```
int GetInt(const void *handle) {
    Object *temp = (Object *) handle;
    return temp->getInt();
} 
```

这是解决问题的有效方法吗？目前，在我的 C 程序中仅使用 GetHandle() 方法时，当我尝试将它们的返回值分配给某些 const void * 变量时，我会收到错误消息“错误 C2099：初始化程序不是常量”。

* * *

## 编辑

修复了问题。我对标准 C 的无知在这里体现出来。我习惯了用于 dsPIC 的 Microchip C30，这有点不同。

我试图在任何函数之外声明和初始化指针。我确实将它们设置为 const 但这并不是真正必要的，所以我现在只需在外部声明，然后在 init 函数中初始化。我还把 extern "C" 放在 cpp 文件中所有函数的前面，现在都可以编译了。所以，感谢大家的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:53:52.197

这是一个有效的解决方案。

不过，您可能需要`const`更仔细地检查您的参数/返回值/强制类型转换。

例如，如果对象本身不是`const`，那么`GetHandle`应该返回`void *`，而不是`const void *`。同样，如果`getInt`是一个`const`函数，那么`GetInt`正确地得到一个`const void *`. 但是，它也应该将其转换为`const Object *`，而不是`Object *`。

为了进一步诊断，您应该提供您得到`initializer is not a constant`错误的确切行（以及调用函数的上下文）。我的猜测是错误与代码的其他部分有关，使用了这些错误的转换值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T11:54:05.467

您的代码有一个错误：您隐式地将 const void* 句柄转换为非常量 Object* 。您的方法是正确的 - 您应该将所有包装函数定义为 extern "C" 以强制 C 样式链接，并且您不能忘记异常 - 您应该在包装器中捕获它们以防止它们通过 C 堆栈。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T11:51:39.493

如果我是你，我会使用 COM 对象来包装所有 C++ 功能，请查看此代码项目演示：

[http://www.codeproject.com/Articles/13601/COM-in-plain-C](http://www.codeproject.com/Articles/13601/COM-in-plain-C)

如果您不熟悉 COM 对象，我想您可以先阅读这篇文章 [http://www.codeproject.com/Articles/633/Introduction-to-COM-What-It-Is-and-How-to-Use-它](http://www.codeproject.com/Articles/633/Introduction-to-COM-What-It-Is-and-How-to-Use-It)

# android - Andengine 为 sprite 中的每个像素设置 alpha

> ID：11882517
> 
> 赞同：3
> 
> 时间：2012-08-09T11:35:22.503
> 
> 标签：android, opengl-es, andengine, fragment-shader

我在场景中有一个大精灵 - 例如 200x200，在应用程序中我有一个数组 [200] [200]，我在其中为大精灵中的每个像素存储 0 或 1。

我想在现有的精灵之上再绘制一个纹理精灵（例如 10x10），但是我想为新精灵中的每个像素计算它是否需要在这个场景上绘制它取决于提供的数组（如果在像素的相应位置）数组中的新精灵是'1' - 我需要绘制这个像素，如果'0' - 我不想绘制它（可能设置 alpha = 0））。

我想我可以为每个新精灵使用片段着色器，但我不明白如何向着色器提供数组数据来计算每个像素的颜色。我认为也可以对整个场景使用片段着色器（如果渲染到纹理）。

我在opengl中很新，无法弄清楚以什么方式移动。

当我为场景创建资源时 - 我尝试创建我的面具：

```
 mask = new float[512*512*4];
    for (int i = 0; i < mask.length; i++)
    {
        mask[i] = 2f;
    }

    GLES20.glActiveTexture(GLES20.GL_TEXTURE1);
    GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, 1029384756);
    GLES20.glTexImage2D(GLES20.GL_TEXTURE_2D, 1, GLES20.GL_RGBA, 512, 512, 0, GLES20.GL_RGBA, GLES20.GL_FLOAT, FloatBuffer.wrap(mask));
    GLES20.glTexParameterf(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MIN_FILTER, GLES20.GL_LINEAR);
    GLES20.glActiveTexture(GLES20.GL_TEXTURE0); 
```

然后当我在场景上绘制新项目时，我使用着色器：

```
 setShaderProgram(ShaderProgram.getInstance());

    GLES20.glActiveTexture(GLES20.GL_TEXTURE1);
    GLES20.glUniform1i(RadialBlurExample.RadialBlurShaderProgram.sUniformMask, GLES20.GL_TEXTURE1);
    GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, 1029384756);
    GLES20.glActiveTexture(GLES20.GL_TEXTURE0); 
```

但我在现场看不到新项目（maskVal <0.5）。

我试图找到将数组作为纹理传递的工作方式，但我找不到它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T16:12:11.127

将您的数组作为与精灵相同尺寸的第二个纹理上传，然后在绘制精灵时，以相同的 texcoord 对第二个纹理进行采样。

如果第二个纹理不符合遮罩标准，则丢弃该片段

```
uniform sampler2d sprite;
uniform sampler2d mask;
in vec2 uv;
main() {

   float maskVal = texture2D(mask, uv).r;
   if(maskVal > 0.5) {
        gl_FragColor = texture2D(sprite,uv);
   } else {
        discard;
   }
} 
```

# maven - Creating an Eclipse RCP application and plugin repository from the same sources

> ID：11882521
> 
> 赞同：1
> 
> 时间：2012-08-09T11:35:40.117
> 
> 标签：maven, eclipse-plugin, eclipse-rcp, tycho

I'm trying to create an Eclipse (3.x) RCP application from plugins in such a way as to allow me to provide ordinary plugins for existing Eclipse installations, but also create an RCP application from those plugins.

My experimentation has led me to have the following layout:

*   `com.company.testapp.plugin`
*   `com.company.testapp.feature`
*   `com.company.testapp.updatesite`

Where each ID depends on the previous one. This works correctly and I can build an update site from the plugin via the feature. What I would now like to do is add something like

*   `com.company.testapp.rcp`

Containing just the required machinery to provide an RCP 'wrapper' around the feature. `com.company.testapp.rcp` contains a product definition, `testapp.product`.

However, I can't seem to make this link work; I'm getting "Product `com.company.testapp.rcp.product` could not be found" on trying to launch from the product configuration.

(Ultimately, I'd like to be able to drive the creation of both the update site and RCP application from Maven/Tycho—I have another `com.company.testapp.master` containing the master POM which I can again successfully build the update site from.)

I've found plenty of resources on building plugins with Tycho, and plenty on building RCP applications, but nothing on building both from the same source tree. I'm not an Eclipse or Tycho expert by any means, so it's possible I'm just not aware of what I should be searching for.

Is such a thing even possible?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T12:22:11.043

Instead of `com.company.testapp.updatesite` (and `com.company.testapp.rcp`) create a new module: `com.company.testapp.repository` that defines a product and p2 repository (a replacement for old update-site mechanism). The module should have the following files:

*   `category.xml` where you define features in p2 repository and their categories (in your case `com.company.testapp.feature`)
*   `*.product` - a product definition file
*   `pom.xml` file that defines `eclipse-repository` module; detailed configuration is explained at [Tycho Packaging Types - eclipse-repository](http://wiki.eclipse.org/Tycho/Packaging_Types#eclipse-repository)

# iphone - 确定iphone的大概位置

> ID：11882523
> 
> 赞同：0
> 
> 时间：2012-08-09T11:35:57.793
> 
> 标签：iphone, ios, ios5, geolocation, gps

有什么方法可以仅使用公共 API 而无需用户干预来了解用户的大致地理位置？

我知道 CLLocationManager 只能监控重大的位置变化，据我所知 - 手机信号塔发生变化，但这是否也需要打开位置服务？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:40:40.840

`CLLocationManager`将为您提供基于 GPS 和手机信号塔的位置。它也是唯一允许您获取用户位置的类。

但用户必须批准您的应用使用该位置。

是的，如果用户关闭位置服务`CLLocationManager`将不起作用。

# java - Flash AS3.0 - 错误 1180 调用可能未定义的方法 gotoAndPlay？

> ID：11882525
> 
> 赞同：-1
> 
> 时间：2012-08-09T11:36:05.440
> 
> 标签：java, actionscript-3, actionscript, actionscript-2, flash-cs5

这是我的代码：

```
play_mc.onRelease= function ()
{
    GotoAndPlay ("Scene 3",1)
} 
```

我收到以下错误：

> 错误 1180 调用可能未定义的方法 gotoAndPlay

为什么是这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:40:51.213

没有**GotoAndPlay**。但是有**gotoAndPlay** :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T13:39:23.650

您正在尝试调用 MovieClip 对象的方法。在这种情况下是“play_mc”。第一个字母是小写的，该方法的类型签名如下：

```
gotoAndPlay(frame:Object, scene:String = null):void 
```

所以你实际上应该有**gotoAndPlay(1, "Scene 3");** 最后，如果您使用的是 AS2，如果您希望**gotoAndPlay**在“play_mc”上运行，则应该使用**this**关键字来调用该方法。否则，如果您忽略它，该方法将在主时间线上运行。所以我会记住这一点。

 **此外，如果您使用的是 AS3，则应该使用 addEventHanlder。任何一种解决方案都可以更清楚地说明被调用方法的范围，并使代码更灵活。

这是[电影剪辑 AsDoc](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/MovieClip.html#gotoAndPlay%28%29 "使用此页面获取有关 AS3 下的类和方法的信息")

这是[对 AS3 事件处理的参考](http://www.adobe.com/devnet/actionscript/articles/event_handling_as3.html "这将 AS2 事件处理与 AS3 事件处理进行了比较")

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T12:02:11.990

参数顺序错误。必须改变顺序。

```
gotoAndPlay(1, "Scene 3"); 
```**

# html - 取决于文本行的自动 css 样式

> ID：11882527
> 
> 赞同：0
> 
> 时间：2012-08-09T11:36:12.160
> 
> 标签：html, css, browser, opera

我对不同浏览器的 css 样式有疑问。我认为它只与歌剧有关（发现这个问题只与歌剧有关，用歌剧、火狐和铬测试过）。所以我有一个页面，其中是无序列表，每个列表项目符号都是不同的图像（但大小相同）。我在每个 li 元素中对齐了图像和文本，该文本位于中心（按图像水平）。每个 li 都有一行或两行的文本。当有两行文本的 li 时，我不需要使用顶部填充，只需使用底部填充。当有一行文本 li 时，我同时使用顶部和底部填充，以正确对齐文本。

Opera 看起来不错，但是当我打开 chrome 和 firefox 时，一些 li 文本在 2 行中，而 li 文本在 1 行中。Opera 的问题在于，它会根据放大多少视图来更改文本间距。chrome 和 firefox 都不会改变文本间距，无论缩放多少页面。

为了更清楚起见，以下是它在歌剧中的外观示例，具体取决于缩放的程度： ![歌剧观](../Images/fac724ce50663281a43ecd8b2030797e.png)

我用于无序列表的 CSS 样式：

```
li.top{
padding-top:9px;
}
li.bottom0{
padding-bottom:6px;
}
li.bottom {
    padding-bottom: 13px;
}
    li.bottom2{
padding-bottom:15px;
}

.li-meetings {
    list-style-type: none;
    background:url(wp-content/uploads/2012/07/calendar.gif) no-repeat;
    padding-left: 50px;
} //all li element styles are the same, just differs uploaded image 
```

所以问题是有没有办法根据 li 有多少文本行来改变css样式（并在放大和缩小时动态改变它）。或者也许有一些更好更简单的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T15:14:42.783

您不应该依赖文本框的尺寸。尝试使用像这样的通用解决方案：http: [//jsfiddle.net/jhmVf/3/](http://jsfiddle.net/jhmVf/3/)

# html - 替代背景颜色

> ID：11882530
> 
> 赞同：1
> 
> 时间：2012-08-09T11:36:15.280
> 
> 标签：html, css

我有一个 WordPress 自定义主题，我希望有基于下拉菜单的各种替代背景颜色。我打算使用替代样式表来更改主题的背景颜色，但这似乎适得其反。我还打算使用类来更改背景颜色，只是我不太确定哪种方法是根据所选颜色更改背景颜色的最佳方法。

**示例**
如果我在我创建的下拉菜单中选择“蓝色”，它会将我网站的背景更改为蓝色。我已经准备好所有的CSS。我现在只是想知道这样做的最佳方法是什么。我为 Internet Explorer 准备了课程，所以如果我决定使用课程，我不确定如何使用课程。我想我可以使用 jQuery 吗？

很抱歉这个突然的问题，但我不太确定哪种方法是最有效的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T11:43:59.907

这是在 jQuery 中实现此目的的一种方法。如果您愿意，您可以选择向正文添加一个类，但请记住先删除其他类。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
  <meta http-equiv="content-type" content="text/html; charset=windows-1250">
  <meta name="generator" content="PSPad editor, www.pspad.com">
  <title></title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
  <script type="text/javascript">
    $(document).ready(function(){
      $('#colour').change(function(){
        $('body').css('background',$(this).val());
      });
    });
  </script>
  </head>
  <body>

    <select id="colour">
      <option value="">Please Select
      <option value="#00F">Blue</option>
      <option value="#F00">Red</option>
      <option value="#0F0">Green</option>
    </select>

  </body>
</html> 
```

或通过课程：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
  <meta http-equiv="content-type" content="text/html; charset=windows-1250">
  <meta name="generator" content="PSPad editor, www.pspad.com">
  <title></title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
  <script type="text/javascript">
    $(document).ready(function(){
      $('#colour').change(function(){
        $('body').removeClass('blue red green').addClass($(this).val());
      });
    });
  </script>
  <style type="text/css">
    .blue { background: #00F; }
    .green { background: #0F0; }
    .red { background: #F00; }
  </style>
  </head>
  <body>

    <select id="colour">
      <option value="">Please Select
      <option value="blue">Blue</option>
      <option value="red">Red</option>
      <option value="green">Green</option>
    </select>

  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T13:43:48.397

如果您对 jQuery 的了解不是那么好，这里有一个 javascript 方法。

**的HTML**：

```
<!DOCTYPE html>
<html>
    <body>
        <select id="bgChange" onChange="bgChange()">
            <option value="lavender">Lavender</option>
            <option value="steelblue">Steelblue</option>
            <option value="mintcream">Mintcream</option>
        </select>
    </body>
</html> 
```

**的JavaScript**：

```
function bgChange() {
    var theForm = document.getElementById("bgChange")
    var theValue = theForm.options[theForm.selectedIndex].value
    document.body.bgColor = theValue
} 
```

现场示例：http: [//jsfiddle.net/ANH4B/2/](http://jsfiddle.net/ANH4B/2/)

# knockout-mapping-plugin - 如果不存在则添加属性并使用淘汰映射选项同时创建

> ID：11882536
> 
> 赞同：0
> 
> 时间：2012-08-09T11:36:24.017
> 
> 标签：knockout-mapping-plugin

教室.manager 在服务器上可以为空。所以它可能不是来自服务器。如果它不是来自服务器，我想添加它并使用我自己的构造函数创建它。如果它来自服务器，我想用它自己的数据创建它。

```
 var mappingOption = {

      create: function (classroom) {
        var res = ko.mapping.fromJS(clasroom.data);

        if (res.manager == undefined)
            res.manager = ko.observable(new Manager());

        return res;
    },
    'manager': {
        create: function (args) {
            var res = ko.mapping.fromJS(args.data);
            var res2 = new Manager();
            $.extend(res2, res)
            return res2;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T23:36:08.787

教室模型

```
var Classroom = function(data) {
    self = this;
    data = data || {};
        self.manager = data.manager || new Manager();

    ko.mapping.fromJS(data, { 
        'manager': {
            function (managerData) {
                return new Manager(managerData);
                }
            }
        }, self);

}; 
```

经理模型

```
var Manager = function(data) {
    self = this;
    data = data || {};
    ko.mapping.fromJS(data, {}, self);
}; 
```

关键部分是`data || new Manager()`部分

# android - 包含 ListView 的对话框，其项目未获得触摸事件

> ID：11882541
> 
> 赞同：0
> 
> 时间：2012-08-09T11:36:54.390
> 
> 标签：android, listview, dialog

我有一个自定义对话框，它扩展了 Dialog 并在其布局中有一个 ListView。我通过扩展 ArrayAdapter 的自定义适配器填充我的 ListView。这是我的适配器，其中包含给定列表项的 onClick 事件：

```
public class PendingTimeslotArrayAdapter extends ArrayAdapter<PendingTimeslot> {
    private final Context context;
    private final PendingTimeslot[] values;
    private final View[] views;

    public PendingTimeslotArrayAdapter(Context context, PendingTimeslot[] values) {
        super(context, R.layout.mystuff_timeslot_picker_dialog_list_item, values);
        this.context = context;
        this.values = values;
        this.views = new View[values.length];
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        if(views[position] == null){
            LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

            View rowView = inflater.inflate(R.layout.mystuff_timeslot_picker_dialog_list_item, parent, false);
            rowView.setTag((Integer)position);

            ((TextView)rowView.findViewById(R.id.mystuff_timeslot_picker_list_item_date_time)).setText(values[position].getDateTime());
            ((TextView)rowView.findViewById(R.id.mystuff_timeslot_picker_list_item_stage_name)).setText(values[position].getStageName());

            rowView.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {
                    System.out.println("getting touch event");
                    PendingTimeslot t = values[(Integer)(v.getTag())];
                    CheckBox checkBox = (CheckBox) v.findViewById(R.id.mystuff_timeslot_picker_list_item_checkbox);
                    checkBox.setChecked(!checkBox.isChecked());
                    t.toggle();
                }
            });

            views[position] = rowView;
            return rowView;
        }
        else
            return views[position];
    }
} 
```

我的问题是，当单击列表项时，它们不会获得触摸事件，因此我的 onClick 不会被调用。有趣的是，ListView 是完全可滚动的，当一个项目离开可见区域并返回时，它变为可触摸并触发 onClick 事件。

我尝试覆盖 ListView 及其 onTouchEvent 方法；当一个项目被点击时，ListView 上的 onTouchEvent 真的没有被触发。我还尝试覆盖 dispatchTouchEvent 方法，它可以正常工作，按预期获取所有触摸事件。

我在其他地方（但不在对话框中）使用了类似的自定义 ArrayAdapter，它可以完美运行。我现在认为这是一个错误。我是否遗漏了某些东西，或者我应该以另一种方式执行此操作（ListView 与对话框内的可点击项目）？

**编辑：**

添加

```
rowView.setClickable(true);
rowView.setFocusable(true); 
```

绝对什么都不做。

**编辑2：**

为我的 ListView 设置 onItemClickListener 也不起作用，即使对于滚动出和回到可见区域的项目也是如此。

**编辑3：**

我还注意到，当 ListView 中有 16 个项目（不是特殊数字）时，最后 5 个项目在我膨胀的布局中没有达到我指定的高度（例如 100 像素），它们的行为类似于 wrap_content。总而言之，我开始相信 ListView 不应该在 Dialog 中使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T13:33:21.973

我发现的一种可能的解决方案是停止尝试使用 ListView，而是使用内部带有垂直 LinearLayout 的 ScrollView。这个 ScrollView 的布局是这样的：

```
<ScrollView
    android:layout_width="wrap_content"
    android:layout_height="0dp"
    android:layout_weight="1" >

    <LinearLayout
        android:id="@+id/mystuff_timeslot_picker_list"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical" >
    </LinearLayout>
</ScrollView> 
```

获得列表数据后，我为它们中的每一个添加一行并手动将它们添加到 LinearLayout：

```
LayoutInflater inflater = (LayoutInflater) getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
for(PendingTimeslot p : timeslots){
    View rowView = inflater.inflate(R.layout.mystuff_timeslot_picker_dialog_list_item, timeslotList, false);
    //((TextView)rowView.findViewById(R.id.mystuff_timeslot_picker_list_item_date_time)).setText(values[position].getDateTime());
    ((TextView)rowView.findViewById(R.id.mystuff_timeslot_picker_list_item_date_time)).setText("just testing");
    //((TextView)rowView.findViewById(R.id.mystuff_timeslot_picker_list_item_stage_name)).setText(values[position].getStageName());

    rowView.setClickable(true);
    rowView.setFocusable(true);

    rowView.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            System.out.println("just testing");
            //PendingTimeslot t = values[(Integer)(v.getTag())];
            CheckBox checkBox = (CheckBox) v.findViewById(R.id.mystuff_timeslot_picker_list_item_checkbox);
            checkBox.setChecked(!checkBox.isChecked());
        }
    });

    timeslotList.addView(rowView);
} 
```

timeslotList 就是我提到的LinearLayout。此解决方法按预期工作。尽管如此，当它们非常适合这项工作时，我不得不使用 ScrollViews 而不是 ListViews，我感到非常愚蠢。

# libxml2 - 在 cocos2d-x 上构建 build_native.sh 时出现 libxml2 错误

> ID：11882542
> 
> 赞同：0
> 
> 时间：2012-08-09T11:37:00.413
> 
> 标签：libxml2, cocos2d-x

我正在使用 cocos2d-x 作为游戏引擎创建一个混合 iOS/android 游戏。在 iOS 端，项目加载 libxml2 库没有任何问题。但是当我在 android 端构建 build_native.sh 时，脚本返回这样的错误

```
error: libxml2/libxml/tree.h: No such file or directory 
```

我已经尝试修改 android.mk 文件，但没有发生任何好事。我应该如何在 android 中链接 libxml2 库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T23:03:05.183

我认为正确的文件夹是

```
libxml2/include/libxml/tree.h 
```

检查原始文件中的

```
cocos2dx/platform/third_party/android/modules. 
```

我使用的版本是 0.12.0

# cakephp - CakePHP 1.3 - 添加额外的属性来选择菜单选项

> ID：11882543
> 
> 赞同：3
> 
> 时间：2012-08-09T11:37:01.257
> 
> 标签：cakephp, cakephp-1.3

如何向我的选择菜单选项标签添加其他属性？像这样：

```
<select class="test" name="data[Test][test]">
    <option value="1" data-price="100">My Option</option>
</select> 
```

如何添加`data-price="100"`？

我尝试了这样的事情，但没有奏效：

```
<?php
    echo $this->Form->select('test', $options, null, array(
        'class' => 'test',
        'options' => array(
            'data-price' => 100
        )
    ));
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T11:56:01.860

看看这个：http: [//www.dereuromark.de/2012/03/01/some-new-crazy-cakephp-tricks/](http://www.dereuromark.de/2012/03/01/some-new-crazy-cakephp-tricks/)

“为某些选择选项设置附加属性”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T20:55:54.007

```
you can try this
    echo $this->Form->input('test', array(
                        'options' => array(
                                            1=>array(
                                            'data-price' => 100, 
                                            'value' => '1', 
                                            'name' => 'My Option'
                                        )),'class' => 'test')
                                    ); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T05:06:51.060

你可以这样做：

```
$options = array(
    ...
    array('name' => 'United states', 'value' => 'USA', 'title' => 'the title that you want', 'class' => 'something'),
    array('name' => 'USA', 'value' => 'USA', 'title' => 'the other title that you want', 'class' => 'otherthing'),
 );

 echo $this->Form->input('test', array('type'=>'select', 'options'=>$options)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T11:52:08.557

您必须手动构建选择 HTML

你也可以参考[How to give select tag an attribute in cake php?](https://stackoverflow.com/questions/10881586/how-to-give-select-tag-an-attribute-in-cake-php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-26T14:50:27.297

在 cakephp 4

[寻找文件](https://book.cakephp.org/4/en/views/helpers/form.html#using-collections-to-build-options)

控制器

```
$countries = $this->Countries->find('all')->where([
            'active' => 1
        ]);

$options = $examples->map(function ($value, $key) {
    return [
        'value' => $value->id,
        'text' => $value->name,
        'data-flag' => $value->iso_code
    ];
}); 
```

在视图/模板中

```
<?= $this->Form->control('country_residence_id', [
                'label' => false,
                'options' => $countries,
                'class' => 'form-control select2-flag-search',
                'data-placeholde' => __('Select Country')
            ]) ?> 
```

# c# - TextMode="Password" 时如何验证密码

> ID：11882548
> 
> 赞同：-2
> 
> 时间：2012-08-09T11:37:25.143
> 
> 标签：c#, visual-studio-2010, .net-4.0, asna-visual-rpg

我正在使用 VS2010 中的默认主模板构建一个 Web 应用程序 - 这样做非常新。我也在使用 Login.aspx 页面，但不是使用内置的用户验证，而是我的用户信息位于数据库表中。因此，按照我发现的说明，我正在做与此类似的事情：

```
 protected void Login1_Authenticate(object sender, AuthenticateEventArgs e) 
{ 
    Boolean bauthenticated = false; 
    bauthenticated = isValidUser(Login1.UserName, Login1.Password); 
    if (bauthenticated) 
    { 
        e.Authenticated = true; 
    } 
    else 
    { 
        e.Authenticated = false; 
    } 
} 
```

问题是我将方法 isValidUser 放在 .dll 中，因此它可以在其他地方使用，并且它没有收到密码，因为默认行为是将其清空。我什至尝试将一个字符串变量设置为 Login1.Password，然后传递该变量但没有成功。我了解为什么会发生这种情况，但找不到有关如何正确执行此操作的任何信息。我是否需要将用户名和密码放入一个对象并将其传递给我的类构造函数？我真的不想从我创建的每个 Login.aspx 页面连接到我的数据库，以避免通过 http 发送密码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T11:53:30.640

尝试使用以下代码。

```
protected void LoginButton_Click(object sender, EventArgs e)
    {
        try
        {
            dtUserDetails = new DataTable();
            if (UserRepositoryBL.ValidateUser(LoginUser.UserName.Trim(), LoginUser.Password.Trim(), out dtUserDetails))
            {

                AuthUser au = new AuthUser();
                if (dtUserDetails.Rows.Count > 0)
                {
                    DataRow DR = dtUserDetails.Rows[0];
                    au.UserID = Convert.ToInt32(DR["UserID"].ToString());
                    au.UserNo = DR["UserNo"].ToString();
                    au.UserName = DR["UserName"].ToString();
                    au.Password = DR["Password"].ToString();
                }
                string userData = au.ToString();
                FormsAuthenticationTicket ticket = new FormsAuthenticationTicket(

             1,                             // Version number

             LoginUser.UserName.Trim(),      // Username

             DateTime.Now,                  // Issue date

             DateTime.Now.AddMinutes(60), // Expiration date

             false,                         // Persistent?

             userData                 // User data

         );

                string eticket = FormsAuthentication.Encrypt(ticket);

                HttpCookie cookie = new HttpCookie

                     (FormsAuthentication.FormsCookieName, eticket);

                Response.Cookies.Add(cookie);

                BasePage.ActivityLog("User Login", LoginUser.UserName.Trim(), true, Request.RawUrl);
                string url = FormsAuthentication.GetRedirectUrl(LoginUser.UserName, false);

                Response.Redirect(url);

                //  FormsAuthentication.RedirectFromLoginPage(LoginUser.UserName, false);

            }
            else
            {
                LoginUser.FailureText = "Your login attempt was not successful. Please try again.";
            }

        }
        catch (Exception ex)
        {
            throw ex;
        }
    } 
```

> dtUserDetails 是一个输出参数，其中包含用户详细信息，如密码、用户名等。成功登录时。如果登录无效，数据表返回空。在 userData 字符串中，所有这些信息都将可用。然后您可以使用 User 从任何页面检索这些信息认证车票

# iphone - 更改 SQLITE 限制复合选择

> ID：11882550
> 
> 赞同：0
> 
> 时间：2012-08-09T11:37:35.403
> 
> 标签：iphone, sqlite

如何在运行时更改 SQLITE_LIMIT_COMPOUND_SELECT。我需要知道如何使用该语句

```
int sqlite3_limit(sqlite3*, int id, int newVal); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T04:24:16.900

我看到您的问题被标记为 iPhone，即使您的问题中没有任何提及。在 Objective-C 中，你可以这样做：

```
#import <sqlite3.h>

...

NSString *pathToDatabase = @"Path to database file";
NSInteger limitAmount = 10; // or whatever number you want
sqlite3 *database;
if(sqlite3_open([pathToDatabase UTF8String], &database) != SQLITE_OK)
{
   NSLog(@"Unable to connect to the database...");
}
sqlite3_limit(database, SQLITE_LIMIT_COMPOUND_SELECT, limitAmount); 
```

# python - 搜索按钮中的狮身人面像问题

> ID：11882551
> 
> 赞同：1
> 
> 时间：2012-08-09T11:37:35.070
> 
> 标签：python, search-engine, python-sphinx

目前，我正在尝试学习 sphinx 以生成 html 格式的文档，但我发现一个问题是我无法使用搜索按钮来查找任何内容。我只是`search`一个关键字，结果将一事无成。我不知道为什么，我只是把所有的东西都默认了。有人知道如何解决吗？

我在 index.rst 中写的是：

```
Contents:

.. toctree::
   :maxdepth: 2

   test.rst
Indices and tables
==================

* :ref:`genindex`
* :ref:`modindex`
* :ref:`search` 
```

而 test.rst 是：

```
================
 eeeeeeeeadadadad
================
----------
 Subtitle
----------

Section Title ddadadada
==================================
.. [1] adadadadadadada" 
```

这是图片，它会搜索但没有结果，而且不能停止，继续搜索......

![在此处输入图像描述](../Images/bbc438d70ecc9c54f83f7e3ac98b9a28.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T17:10:26.030

默认情况下，Sphinx 不执行全文搜索。它只搜索基于索引条目、交叉引用等生成的索引。

从您在问题中发布的内容来看，您没有任何内容将被搜索机制索引。

尝试添加更多内容（尤其是 python 对象文档或索引条目）。

[如果你想要一个完整的测试搜索，这里](https://bitbucket.org/birkenfeld/sphinx-contrib/src/5f95add2ec31/whooshindex?at=default)有一个 Sphinx 扩展，它可以为 whoosh 全文搜索引擎建立一个索引，尽管这可能比你正在寻找的更复杂。

# ssh - 无法推入 gitolite-admin repo

> ID：11882552
> 
> 赞同：1
> 
> 时间：2012-08-09T11:37:45.793
> 
> 标签：ssh, gitolite

当我尝试推动时，gitolite 说

```
Counting objects: 7, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (3/3), done.
Writing objects: 100% (4/4), 339 bytes, done.
Total 4 (delta 1), reused 0 (delta 0)
remote: 
remote:         ***** ABORTING *****
remote:         bad username me,
To ssh://git@githost-adm/gitolite-admin
   32cfc9f..41ee58f  master -> master 
```

githost-adm 在我的 ~/.ssh/config 中描述为

```
Host githost-adm
HostName real.hostname.com
User git
IdentityFile ~/.ssh/gitolite-admin 
```

私钥加载在 ssh-agent 中，因此当我想连接到 gitolite-admin repo 时，这使 ssh 能够使用特定的身份密钥。有一个类似的 ssh 别名 githost-as-me 包含另一个用于连接到其他存储库的身份文件。

sshd 日志似乎证明了 pubkey 被接受了

```
Accepted publickey for git from real.hostname.ip port 38916 ssh2 
```

所以它可能在 gitolite 内部的某个地方隐藏了错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T12:54:06.400

此错误消息来自[`src/lib/Gitolite/Conf/Store.pm`](https://github.com/sitaramc/gitolite/blob/master/src/lib/Gitolite/Conf/Store.pm#L90-L97)：

```
sub parse_users {
    my $users = shift;
    my @users = split ' ', $users;
    do { _die "bad username '$_'" unless $_ =~ $USERNAME_PATT }
      for @users;

    return @users;
} 
```

和：

```
$USERNAME_PATT        =  qr(^\@?[0-9a-zA-Z][-0-9a-zA-Z._\@+]*$); 
```

[`src/lib/Gitolite/Conf.pm`](https://github.com/sitaramc/gitolite/blob/master/src/lib/Gitolite/Conf.pm#L43-L80)从您推`gitolite-admin`送到 repo的配置文件中存储新用户时调用。

```
} elsif ( $line =~ /^(-|C|R|RW\+?(?:C?D?|D?C?)M?) (.* )?= (.+)/ ) {
            my $perm  = $1;
            my @refs  = parse_refs( $2 || '' );
            my @users = parse_users($3); 
```

因此，请仔细检查您的配置文件语法（此处，如[Gitolite V3 或 'g3'](http://sitaramc.github.com/gitolite/admin.html#conf)中所述：如果您仍在 V2 中，请查看[此页面](http://sitaramc.github.com/gitolite/g2/exbac.html)）。
其中一定有某种语法错误。

无论如何，**这不是 ssh 问题**。

# django - Django South迁移错误

> ID：11882554
> 
> 赞同：9
> 
> 时间：2012-08-09T11:37:57.720
> 
> 标签：django, django-south

我在尝试应用第一次南迁移时遇到错误。我尝试了各种建议（例如删除迁移文件夹中的 .pyc 文件，转换应用程序以及尝试重新启动它，其他小提琴）。有人可以在这里建议我可以做什么吗？谢谢

```
(env)~/code/django/ssc/dev/ssc/ssc> python manage.py migrate
Traceback (most recent call last):
  File "manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/base.py", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "/usr/local/lib/python2.7/dist-packages/south/management/commands/migrate.py", line 108, in handle
    ignore_ghosts = ignore_ghosts,
  File "/usr/local/lib/python2.7/dist-packages/south/migration/__init__.py", line 166, in migrate_app
    Migrations.calculate_dependencies()
  File "/usr/local/lib/python2.7/dist-packages/south/migration/base.py", line 228, in calculate_dependencies
    migration.calculate_dependencies()
  File "/usr/local/lib/python2.7/dist-packages/south/migration/base.py", line 362, in calculate_dependencies
    for migration in self._get_dependency_objects("depends_on"):
  File "/usr/local/lib/python2.7/dist-packages/south/migration/base.py", line 342, in _get_dependency_objects
    for app, name in getattr(self.migration_class(), attrname, []):
  File "/usr/local/lib/python2.7/dist-packages/south/migration/base.py", line 314, in migration_class
    return self.migration().Migration
AttributeError: 'module' object has no attribute 'Migration'
(env)~/code/django/ssc/dev/ssc/ssc> python manage.py convert_to_south crewcal
This application is already managed by South.
(env)~/code/django/ssc/dev/ssc/ssc> python manage.py migrateTraceback (most recent call last):
  File "manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/base.py", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "/usr/local/lib/python2.7/dist-packages/south/management/commands/migrate.py", line 108, in handle
    ignore_ghosts = ignore_ghosts,
  File "/usr/local/lib/python2.7/dist-packages/south/migration/__init__.py", line 166, in migrate_app
    Migrations.calculate_dependencies()
  File "/usr/local/lib/python2.7/dist-packages/south/migration/base.py", line 228, in calculate_dependencies
    migration.calculate_dependencies()
  File "/usr/local/lib/python2.7/dist-packages/south/migration/base.py", line 362, in calculate_dependencies
    for migration in self._get_dependency_objects("depends_on"):
  File "/usr/local/lib/python2.7/dist-packages/south/migration/base.py", line 342, in _get_dependency_objects
    for app, name in getattr(self.migration_class(), attrname, []):
  File "/usr/local/lib/python2.7/dist-packages/south/migration/base.py", line 314, in migration_class
    return self.migration().Migration
AttributeError: 'module' object has no attribute 'Migration' 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-13T03:55:35.327

在我的情况下，*AttributeError: 'module' object has no attribute 'Migration'*错误只是在我的迁移文件夹中有一个额外的 .py 文件。

我的迁移目录中有一个额外的实用程序模块，导致 South 窒息。将模块移动到不同的目录（在我的应用程序迁移目录之上）为我解决了这个问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T14:34:22.133

也许有点晚了，但仍然......`__init__.py`您的迁移包中是否可能有任何其他包（带有 的文件夹）并且它会干扰结构？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-10T20:10:52.987

哇。我收到*AttributeError: 'module' object has no attribute 'Migration'*错误，原因与上述答案完全不同。

我有一个缩进错误的迁移文件：

```
class Migration(SchemaMigration):
    def forwards(self, orm):
        # 

    def backwards(self, orm):
        # 
        models = {...} 
```

相对于...

```
class Migration(SchemaMigration):
    def forwards(self, orm):
        # 

    def backwards(self, orm):
        # 

    models = {...} 
```

我不知道为什么会这样，但是当我修复错误时，错误就消失了。

# asp.net - 在 vista 或 XP 上进行 .Net 开发

> ID：11882556
> 
> 赞同：1
> 
> 时间：2012-08-09T11:38:01.917
> 
> 标签：asp.net, .net, visual-studio-2010, iis, windows-vista

我想知道与 Vista 相比，在 XP 上开发 .Net 2010 Web 应用程序是否更好？我已经在 XP 上开发了许多 .Net 应用程序，没有任何问题，并且个人喜欢 XP over vista。现在我开始了一份新工作，我们都主要使用 Vista Ultimate 32 位。

> **vista for VS2010 开发是否有任何已知问题？**

应用程序将在 Window Server 2003 或 2008 上发布，所以我主要关心的是本地开发和运行应用程序。

> **另外，Visual Source Safe 6.0 是否与 Vista 兼容？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T11:41:57.077

你会遇到一些困难，因为 XP 只有 32 位（除非你有 64 位版本，这有点古怪：驱动程序）。

此外，XP 开发环境不支持 XNA Game Studio、Windows Phone 7 开发、DirectX 11 等某些功能。

您可能还会遇到与 Azure 云平台集成相关的问题，因为它有一些不能在 XP 上完全运行的依赖项。

也就是说，如果您只需要一个简单的 Winforms/Console app/ASP.Net 站点，您可能永远不会注意到其中的区别

哦，[XP 不支持.Net 4.5](http://msdn.microsoft.com/en-us/library/8z6watww%28v=vs.110%29.aspx)

顺便说一句，请不要使用安全的视觉源——这真的很糟糕。它不保证一致性，没有分支和合并的概念，不允许多个用户处理同一个文件，并且通常不可靠（更不用说它依赖于每个客户端都能正常运行和单个恶意用户的事实可以删除整个数据存储，因为它实际上只是与某些文件的 Windows 共享，而不是实际的服务器）。请参阅本文：[Visual SourceSafe 版本控制：任何速度都不安全？](http://www.developsense.com/testing/VSSDefects.html)更多细节。

您应该使用 TFS 或开源替代方案（我也玩过 SVN 并使用 AnkhSVN 集成到 VS - 不完美但非常好）。如果您想使用 TFS，但没有自己设置服务器的服务器/经验，微软在[tfspreview.com](http://tfspreview.com)运行了一个（当前免费）测试版，它直接集成到 VS 2010 SP1 及更高版本中，并提供所有相同的功能以及一大堆其他功能，如错误/工作项跟踪、分析等......

# security - 自动登录 acegi 安全

> ID：11882557
> 
> 赞同：0
> 
> 时间：2012-08-09T11:38:04.937
> 
> 标签：security, login, spring-security

有没有办法在使用 acegi 安全模块的 servlet 应用程序中避免基于表单的登录？我想以某种方式将登录名和密码传递给 URL。我试着这样称呼：

```
GrantedAuthority[] grantedAuthorities = new GrantedAuthority[] {new GrantedAuthorityImpl("ROLE_ADMIN")};
UsernamePasswordAuthenticationToken authentication = new UsernamePasswordAuthenticationToken("admin", "passwordofadmin", grantedAuthorities);
WebAuthenticationDetails authdetails = (WebAuthenticationDetails) authentication.getDetails();
HttpSession session = event.getSession();
ProviderManager pm = (ProviderManager)WebApplicationContextUtils.getWebApplicationContext(session.getServletContext()).getBean("authenticationManager");
pm.doAuthentication(authentication);
SecurityContextHolder.getContext().setAuthentication(authentication); 
```

在事件处理程序中`HttpSessionCreatedEvent`，我收到了`AuthenticationSuccessEvent`事件，但随后`Failure`也收到了事件并显示了身份验证表单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T17:33:37.763

首先，您必须在 xml 中覆盖 UserDetailsS​​ervice。像这样的东西：

```
<bean id="userService" class="com.security.UserSecurityService" >
    ...
</bean> 
```

然后编写自己的 service.like：

```
public class UserSecurityService implements UserDetailsService {
public UserDetails loadUserByUsername(String username)
        throws UsernameNotFoundException, DataAccessException{

User user =userDAO.findByUsername(username);
GrantedAuthority[] grantedRoles = {new GrantedAuthorityImpl("ROLE_USER")};

        secUsr = new User(user.getUsername(), user.getPassword(), true, grantedRoles); 
```

我希望这对你有帮助

# objective-c - 在 GCD 中使用哪个队列

> ID：11882558
> 
> 赞同：2
> 
> 时间：2012-08-09T11:38:05.870
> 
> 标签：objective-c

我正在使用这段代码：

```
dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0ul);

dispatch_async(queue, ^{

//saving stuff to NSUserDefaults

}); 
```

只要代码没有被快速连续调用两次，它就可以工作，此时我会崩溃。它所说的只是`Thread 7: trace`崩溃，在一个屏幕上`CFRetain`。

我猜我的队列不应该允许重启这个例程，除非它已经完成。但我不确定要更改的众多参数中的哪一个。我不需要它是高优先级，我也不确定它需要是全局队列，老实说线程编程需要一些时间让我确定这一切，所以我希望有人能指出我正确的方向。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T13:41:22.953

全局队列*本质上是并发*的。当您`dispatch_sync()`进入这些队列时，这仅意味着该函数将在块执行完毕后返回。它不*保证*该队列上的块不会同时运行。

创建串行队列（`dispatch_queue_create()`使用串行选项）并将您的块分派到它上面。注意不要`disptch_sync()`从该队列中运行的块进入队列；出现僵局。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T14:32:06.423

如果您希望此操作异步运行但始终在同一个队列上运行（意思是：它在后台完成但不会同时执行两次），我建议您`dispatch_queue_t`在您的类中创建一个（或在方法之外*全局可访问的地方）：*

那会像：

```
@interface Foo : Bar {

    @private
    dispatch_queue_t _savingQueue = dispatch_queue_create("savingQueue", NULL);

}

-(void)saveStuff;

@end 
```

并始终保存在该队列中

```
-(void)saveStuff{

    dispatch_async(_savingQueue, ^{

    //saving stuff to NSUserDefaults

    });

} 
```

# php - 从网站获取空邮件

> ID：11882559
> 
> 赞同：0
> 
> 时间：2012-08-09T11:38:09.927
> 
> 标签：php, email, smtp, gmail, php4

我在服务器中安装了 php 4.x，我有一个发送邮件的脚本，通常我收到的 10 封邮件中有 1 封没有正文，但主题会在那里。邮件发送代码如下。

```
 $headers  = "MIME-Version: 1.0 \n";
 $headers .= "Content-type: text/html; charset=iso-8859-1 \n";
 $headers .= "From: Contact Form <contact_form@mycompany.com> \r\n";
 $headers .= "Request Form: $name ($contactid)";

 $subject = "Request: $name";

 $body = "Name:&nbsp;$name<br />Email:&nbsp;$email<br />Phone:&nbsp;$phone<br/>";

 mail("myname@gmail.com",$subject,$body,$headers); 
```

背后的原因是什么。这是我编写的脚本或 SMTP 服务器的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T13:46:13.187

根据[RFC 2822](http://www.faqs.org/rfcs/rfc2822.html)：
标题字段是由字段名称、后跟冒号 (":")、后跟字段正文并以 CRLF 终止的行组成的。字段名称必须由可打印的 US-ASCII 字符组成（即，值介于 33 和 126 之间的字符），冒号除外。

您的标题不遵循这种格式。一些接收邮件服务器可能会更严格，因此可能会拒绝您的邮件。将其更改为：

```
$headers  = "MIME-Version: 1.0\r\n";
$headers .= "Content-type: text/html; charset=iso-8859-1\r\n";
$headers .= "From: Contact Form <contact_form@mycompany.com>\r\n";
$headers .= "Request-Form: $name ($contactid)\r\n"; 
```

\r : 回车
\n : 换行

它解决了你的问题吗？

# sql - SQL SSRS 报表生成器 - 只能查看表？

> ID：11882562
> 
> 赞同：1
> 
> 时间：2012-08-09T11:38:29.850
> 
> 标签：sql, sql-server-2005, reporting-services, reportingservices-2005

我正在使用带有 SQL 2005 的 SSRS Report Builder，并且我正在尝试从我的数据源构建一些报告。

但是，当我调出数据源实体时，它只显示表而不是视图，这是我想要用来使编码更整洁和易于使用的。

我错过了什么吗？任何人都可以建议一种让视图显示在实体选项中的方法吗？

非常感谢任何帮助。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T03:18:07.527

根据以下帖子中的注释，如果您使用报告管理器创建模型，则它不会显示视图。您需要使用开发工作室。看到这个[链接](http://social.msdn.microsoft.com/Forums/en-US/sqlreportingservices/thread/ac2cb68f-84d9-4bcb-86c1-ea161082c2e9)

# c# - PostgreSQL 的 Dotconnect 未显示在数据源中

> ID：11882565
> 
> 赞同：1
> 
> 时间：2012-08-09T11:38:40.213
> 
> 标签：c#, database, visual-studio-2010, postgresql, dotconnect

我想使用 dotconnect 连接到现有的 postgresql 数据库

教程在这里： http: [//www.devart.com/dotconnect/postgresql/articles/tutorial_ef.html](http://www.devart.com/dotconnect/postgresql/articles/tutorial_ef.html)

唯一的问题是当我选择从数据库生成时，我在数据源中的任何地方都没有 PostgreSQL 选项（就像在教程中一样）。我安装了 dot connect 的快速版本，但它没有出现在任何地方。我该如何使用它？

我应该获得 30 天试用版还是有办法使用 Express 版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:17:11.803

实体框架支持在 dotConnect for PostgreSQL 的 Express Edition 中不可用。请参考[http://www.devart.com/dotconnect/postgresql/editions.html](http://www.devart.com/dotconnect/postgresql/editions.html)。我们建议您安装 dotConnect for PostgreSQL Professional Trial ( [http://www.devart.com/dotconnect/postgresql/download.html](http://www.devart.com/dotconnect/postgresql/download.html) ) - 此安装包包含实体框架支持。

# nginx - Nginx 在本地网络中不起作用

> ID：11882569
> 
> 赞同：0
> 
> 时间：2012-08-09T11:38:50.910
> 
> 标签：nginx, centos, localhost

os centos 6.3 Nginx 无法在本地网络中运行，但可以在 localhost 中运行。由 elinks 测试。

```
# ps -ef | grep nginx
root      1447     1  0 Aug07 ?        00:00:00 nginx: master process /usr/sbin/nginx -c /etc/nginx/nginx.conf
nginx     1448  1447  0 Aug07 ?        00:00:00 nginx: worker process

# netstat -napt | grep nginx
tcp        0      0 0.0.0.0:80                  0.0.0.0:*                   LISTEN      1447/nginx

# iptables --list
Chain INPUT (policy ACCEPT)
target     prot opt source               destination         
ACCEPT     all  --  anywhere             anywhere            state RELATED,ESTABLISHED 
ACCEPT     icmp --  anywhere             anywhere            
ACCEPT     all  --  anywhere             anywhere            
ACCEPT     tcp  --  anywhere             anywhere            state NEW tcp dpt:ssh 
REJECT     all  --  anywhere             anywhere            reject-with icmp-host-prohibited 

Chain FORWARD (policy ACCEPT)
target     prot opt source               destination         
REJECT     all  --  anywhere             anywhere            reject-with icmp-host-prohibited 

Chain OUTPUT (policy ACCEPT)
target     prot opt source               destination

# cat /etc/sysconfig/selinux

# This file controls the state of SELinux on the system.
# SELINUX= can take one of these three values:
#     enforcing - SELinux security policy is enforced.
#     permissive - SELinux prints warnings instead of enforcing.
#     disabled - No SELinux policy is loaded.
SELINUX=disabled
# SELINUXTYPE= can take one of these two values:
#     targeted - Targeted processes are protected,
#     mls - Multi Level Security protection.
SELINUXTYPE=targeted 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:00:03.693

听起来这不是 Nginx 的问题。您是否在 Nginx 访问或错误日志中看到任何访问尝试？如果这是 Nginx 问题，您应该这样做。

您的`netstat`输出显示 Nginx 正在运行并侦听所有 IP 的端口 80。

尝试使用`nmap`端口扫描自己并确认检测到在端口 80 上运行的东西：

```
nmap -vv -P0 (server IP address or DNS) 
```

如果它没有找到任何东西，听起来就像它被其他地方阻止了一样。与您的网络管理员交谈。

# php - 通过php发送邮件表单

> ID：11882570
> 
> 赞同：0
> 
> 时间：2012-08-09T11:38:51.463
> 
> 标签：php, html, forms

我已经制作了这个表格，我想问一下这是否足够安全。我尝试了很多次制作验证码，但它对我不起作用。我还是个学生请不要发硬的东西。

问题 1：mysql_real_escape_string 足够安全吗？问题 2：我需要一个非常简单的（数字）验证码，有人可以给我发一个示例（或其他堆栈帖子）

这将在信息站点上用作邮件表单。在该站点上没有数据库/登录名之类的。

```
<?php 

    include '../connect.php'; #db connection for mysql_real_escape_string
        $errors = array('');
        //valideren of er op de submit gedrukt is en of alle benodigde data is ingevuld
        if(isset($_POST['submit'])){
            if(!empty($_POST['naam']) && !empty($_POST['email']) && !empty($_POST['bericht'])){

                 $naam           = mysql_real_escape_string($_POST['naam']);
                 $email          = mysql_real_escape_string($_POST['email']);
                 $bericht        = mysql_real_escape_string($_POST['bericht']);
                 $telefoon       = mysql_real_escape_string($_POST['telefoon']);

                $regex = "/^[A-Za-z .'-]+$/";
                if(!preg_match($regex,$naam)) {
                    array_push($errors , 'De naam is niet geldig');
                }

                if(strlen($bericht) < 5) {
                    array_push($errors , 'Het bericht is te kort');
                }                   

                $email_regex = '/^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/';
                if(!preg_match($email_regex,$email)) {
                    array_push($errors , 'Uw email is niet geldig.');
                } 
```

这里是邮件部分。

```
 }else{
                array_push($errors , 'Een van de verplichte velden is niet ingevuld. Alle velden met * zijn verplicht.');
            }

        }
    ?>

    <form method="post">
        <p>
            <label>naam*</label>
            <input type="text" name="naam"/>
        </p>
        <p>
            <label>email*</label>
            <input type="text" name="email"/>
        </p>
        <p>
            <label>telefoon</label>
            <input type="text" name="telefoon"/>
        </p>
        <p>
            <label>Bericht*</label>
            <textarea  name="bericht" style="width:459px; height:187px;" ></textarea>
        </p>
        <p>
            <label> </label>
            <input type="submit" value="verstuur" name="submit"/>
        </p>
    </form>

    <?php 
        if (count ($errors > 0)){
            foreach($errors as $error){
                echo '<p class="error">'.$error.'</p>';
            }
        }
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T11:43:23.263

> mysql_real_escape_string 足够安全吗？

对于保护 MySQL 数据库来说，这是一个糟糕的解决方案。

发送电子邮件是完全不合适的。

无论您做什么来保护不良数据不损坏您的电子邮件，都应该在数据插入该电子邮件之前完成，而不是在您对其进行完整性检查之前完成。

# android - 将驱动程序添加到 android 设备内核

> ID：11882574
> 
> 赞同：2
> 
> 时间：2012-08-09T11:38:58.777
> 
> 标签：android, kernel, driver, usb-otg

我想在我的设备上使用 PCAN。我有它的程序和一根otg电缆，但我需要先安装驱动程序。我在制造商网站上找到了一个 linux[驱动程序。](http://www.peak-system.com/fileadmin/media/linux/index.htm)

我下载了内核源代码、arm 工具链，并阅读了一些关于构建和编译的站点，但我没有找到任何关于添加驱动程序的信息。

所以我的问题是，如何在 android 上添加或安装[此驱动程序？](http://www.peak-system.com/fileadmin/media/linux/index.htm)该设备是 Galaxy Tab 10.1 P7510。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T12:58:24.637

对，你需要做的是：

*   解压压缩包源
*   进入源的相应目录 -`cd peak-linux-driver-7.7/`如上述 PDF 所引用

> cd peak-linux-driver-xy
> 
> 打扫干净
> 
> make su -c “make install”</p>

构建完成后，发出此命令

> /sbin/modprobe pcan

然而，说了这么多，我没有看到任何关于使用 Android 构建的参考，所以看起来有点搞乱源代码才能让它在 Android 上实际工作。

据我所知，这更倾向于只面向台式电脑......

正如稍后在澄清这个答案的评论中提到的那样；内核需要从源代码重新编译为 arm v7 或 v8 目标。没有提到的部分是它还必须静态链接以避免在 Android 中需要 glibc 或在您的计算机中使用仿生 lib c。

# azure - Azure 上的 Hadoop

> ID：11882577
> 
> 赞同：-2
> 
> 时间：2012-08-09T11:39:00.963
> 
> 标签：azure, hadoop

我刚刚在 Azure 上创建了一个帐户并注册了 3 个月的试用期。有人可以指出我在 Azure 上启动 Hadoop 的正确方向吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T11:53:30.130

您可以通过观看将[数据上传到 Windows Azure 上的 Hadoop 并运行](http://www.youtube.com/watch?feature=player_embedded&v=BvssSmYJBoc)Brad Sarsfield 的 WordCount 示例视频，对 Azure 上的 Hadoop 进行简单介绍。

除此之外，TechNet 上的大型 wiki 包含许多操作方法文章：[Windows Azure 上基于 Hadoop 的服务操作指南](http://social.technet.microsoft.com/wiki/contents/articles/6206.hadoop-based-services-on-windows-azure-how-to-guide.aspx)。在 wiki 的末尾，您将看到在 Azure 上从事 Hadoop 工作的人员列表，我建议您在 Twitter 上关注他们并查看他们的博客。

# flash - 使用 speex 编解码器将 wav 转换为 flv

> ID：11882580
> 
> 赞同：1
> 
> 时间：2012-08-09T11:39:02.173
> 
> 标签：flash, ffmpeg, flv, wav, speex

如何将`wav`文件转换为`flv`，重新采样到 11kHz 的速率，并使用 speex 编码？

可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T13:33:39.423

是的，您可以使用 ffmpeg 来完成。Speex 在[ffmpeg 支持的音频编解码器](http://ffmpeg.org/general.html#Audio-Codecs)列表中。您将需要编译 ffmpeg 并`--enable-libspeex`添加到配置标志，或者您可以尝试查找添加了 libspeex 支持的预编译版本。

Ffmpeg 构建可在[zeranoe.com 获得](http://ffmpeg.zeranoe.com/builds/)，这是他们[最新的 Windows 构建](http://ffmpeg.zeranoe.com/builds/win32/static/ffmpeg-20120804-git-f857465-win32-static.7z)（它支持 speex）。

你的命令行应该是这样的：

```
ffmpeg -i myinputfile.wav -acodec libspeex -ar 11025 myoutputfile.flv 
```

# android - Android - 是否可以禁用长按主页按钮以避免任务管理器？

> ID：11882581
> 
> 赞同：11
> 
> 时间：2012-08-09T11:39:01.743
> 
> 标签：android, long-press, android-homebutton, taskmanager, long-click

一旦我长按主页按钮，我正在寻找一种禁用任务管理器窗口的方法。我设法禁用其他设备键（如音量、菜单等）和正常单击主页按钮，因为我是默认启动器，但我不知道如何禁用任务管理器！即使是幼儿锁儿童应用程序也会在长按后向您显示任务管理器屏幕，所以我认为这样做并不容易。我看到几个答案说我不应该禁用任务管理器，但我想从另一个键而不是长按主页按钮来获得它。如果需要并且可以解决我的问题，我可以扎根。请帮忙。

我找到了一种使用 Android 2.3.5 的方法： [Override home and back button is case a boolean is true](https://stackoverflow.com/questions/10025660/override-home-and-back-button-is-case-a-boolean-is-true/10025904#10025904) (我使用了 hotveryspicy 中的一段代码) 但是，正如在这个链接中所写的那样，这个解决方案不适用于 Android 4.0.3 你能帮我找到 4.0.3 的解决方案吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-29T11:54:30.140

为了避免在长按主页按钮上出现最近的应用程序对话框，您可以监听您的活动焦点。当你的活动失去焦点时，触发一个`Intent.ACTION_CLOSE_SYSTEM_DIALOGS`意图。

此处的示例代码：http: [//www.juliencavandoli.com/how-to-disable-recent-apps-dialog-on-long-press-home-button/](http://www.juliencavandoli.com/how-to-disable-recent-apps-dialog-on-long-press-home-button/)

我希望这能帮到您 ：）

# php - Magento：重写控制器时避免丢失翻译

> ID：11882584
> 
> 赞同：1
> 
> 时间：2012-08-09T11:39:10.893
> 
> 标签：php, magento, translation

我像这样重写一个控制器：

```
<frontend>
    <routers>
       <checkout>
       <args>
     <modules>
       <My_Foo before="Mage_Checkout">My_Foo</My_Foo>
     </modules>
       </args>
       </checkout>
    </routers> 
```

我只覆盖一个函数。`$this->__('A string');`当我在调试器中跟踪它时，控制器（左原始）调用的另一个函数到`Mage_Core_Controller_Front_Action::__()`翻译表达式（`$expr`）是

```
_text = 'A string',
_module = 'My_Foo' 
```

并且找不到翻译 - 因为它仅在`Mage_Checkout`.

我认为最好的解决方案是避免控制器重写和使用事件，但这并非在所有情况下都是可能的。

是否有任何干净的解决方案 - 除了使用事件 - 将原始翻译保留在覆盖的控制器中？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T13:17:48.940

解决方案非常简单。只需指定应该在控制器中用于翻译字符串的模块名称。

*   为类的 $_realModuleName 属性指定值。

例子：

```
class My_Foo_SomeController extends Mage_Checkout_SomeController 
{

    protected $_realModuleName = 'Mage_Checkout';

    // Some your code goes here
} 
```

In this case Magento will use value from this property to retrieve module translations instead of trying to detect module name from class name.

# visual-studio-2010 - 如何使用 tfs 在 VS 2010 中添加新页面

> ID：11882585
> 
> 赞同：0
> 
> 时间：2012-08-09T11:39:12.407
> 
> 标签：visual-studio-2010

我对 TFS 2010 完全陌生，并试图将其用于基本的源代码控制。我已经成功添加了一个现有项目，但是我不知道如何添加一个基本的新 .aspx 文件。我知道我在这里遗漏了一些完全明显的东西。

我应该完全考虑另一种产品吗？我的需求非常基本，而 TFS 对于我正在做的事情似乎很复杂。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:44:03.957

回答你的第二个问题：如果你认为 TFS 太复杂，那么谷歌一个替代方案并尝试它。但是，版本控制并不简单，而且您不一定会通过更改产品来使其变得更容易。

对于您的第一个问题：像往常一样将 aspx 文件添加到您的项目中。如果您在 Visual Studio 中执行此操作，则该文件将自动添加到 TFS 中的“待更改”列表中，您需要做的就是签入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-11T15:38:42.923

1.  在源代码管理资源管理器中右键单击 .soln ->“获取最新”
2.  打开.soln
3.  在解决方案资源管理器中，右键单击您的项目或文件夹 -->“添加”
4.  创建新文件后，右键单击它并“签入”

# java - JavaFX - 无法使用签名的应用程序访问文件系统

> ID：11882586
> 
> 赞同：1
> 
> 时间：2012-08-09T11:39:13.313
> 
> 标签：java, security, javafx-2

我正在开发一个需要访问用户系统上文件的 JavaFX 应用程序。我知道我的应用程序必须先签名才能获得此类访问权限，所以我签署了我的应用程序。但应用程序仍然抛出 java.security.AccessControlException

-应用程序

```
public class TestApp extends Application
{
    /**
    * @param args the command line arguments
    */
    public static void main(String[] args) 
    {
         launch(args);
    }

    @Override
    public void start(Stage primaryStage) 
    {
         primaryStage.setTitle("Hello World!"); 
         StackPane root = new StackPane();
         primaryStage.setScene(new Scene(root, 300, 250));
         primaryStage.show();
    }

    public void callJSFunc(JSObject func) 
    {
         File fleExample = new File("F:/myfile.xml");
         func.call("call", fleExample.exists());
    }
} 
```

然后我继续签署应用程序

```
keytool -genkey -keystore myKeyStore -alias me
keytool -selfcert -keystore myKeyStore -alias me  
jarsigner -keystore myKeyStore TestApp.jar me 
```

所以我从javascript调用了应用程序**callJSFunc**

```
function deployIt() 
{
      dtjava.embed(
      {
          id: "my2",
          url: "TestApp.jnlp",
          width: 300,
          height: 200,
          placeholder: "here"
       },
       { 
          javafx: "2.1+", 
           jvm: "1.6.0+" 
       },
       {
           onJavascriptReady: callApp
       });
}

function callApp(id) 
{
   var app = document.getElementById(id);
   app.callJSFunc(function(e){ alert(e); });
}

dtjava.addOnloadCallback(deployIt); 
```

但是我的应用程序在浏览器上输出了这个

```
Uncaught Error: java.security.AccessControlException: access denied ("java.io.FilePermission" "F:/myfile.xml" "read") 
```

另外，我在本地主机上测试了该应用程序。我不明白为什么它在对应用程序进行签名后抛出此异常。请问我做错了什么？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T18:50:28.493

不要使用 keytool 和 jarsigner 对应用程序进行签名。

[而是使用javafx 部署工具](http://docs.oracle.com/javafx/2/deployment/jfxpub-deployment.htm)（例如 javafxpackager 或 JavaFX ant 任务）打包、签名并准备好您的应用程序以进行部署。

确保您的[jnlp 文件请求提升的权限](http://docs.oracle.com/javase/7/docs/technotes/guides/javaws/developersguide/syntax.html#security)。[如果您使用的是 JavaFX ant 任务，则可以使用fx:permissions](http://docs.oracle.com/javafx/2/deployment/javafx_ant_task_reference002.htm#CIAHGJBH)子句请求 JavaFX 生成具有提升权限的适当 jnlp 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T12:57:16.477

试试这个（使用 doPrivileged 块）：

```
public class TestApp extends Application
{
    // ...

    public void callJSFunc(JSObject func) 
    {
         File fleExample = null;
         AccessController.doPrivileged(new PrivilegedAction() {
            public Object run() {
                fleExample = new File("F:/myfile.xml");
                func.call("call", fleExample.exists());
            }
         });

    }
} 
```

# mysql - 表上的 UNION 过程

> ID：11882594
> 
> 赞同：2
> 
> 时间：2012-08-09T11:39:30.800
> 
> 标签：mysql, union, procedure

如何将 stmtQuery 的所有结果联合**到**表 basia 和 Comments_11 ....等的一个结果示例结果

```
 DELIMITER $$
DROP PROCEDURE IF EXISTS SearchUserY $$
CREATE PROCEDURE `SearchUserY`(IN UserIdValue INT(11) )
BEGIN
       DECLARE done INT DEFAULT FALSE;
       DECLARE tableName VARCHAR(50);
       DECLARE stmtFields TEXT ; 
       DECLARE columnName VARCHAR(50) default 'UserId';

        DECLARE cursor1 CURSOR FOR
            SELECT table_name
            FROM information_schema.COLUMNS
            WHERE table_schema = 'comments' 
            AND column_name LIKE '%UserId';

        DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE;

        OPEN cursor1;
        read_loop: LOOP
        FETCH cursor1 INTO tableName;
        IF done THEN
            LEAVE read_loop;
        END IF;

      SET stmtFields = CONCAT('`',tableName,'`','.' , columnName ,'=', UserIdValue) ;

     SET @stmtQuery=CONCAT(@sql,'SELECT Nick, Title, Content FROM ' ,'`',tableName,'`', ' WHERE ', stmtFields ) ;
   select @stmtQuery;

        END LOOP;

       PREPARE stmt FROM @stmtQuery ;
       EXECUTE stmt ;

       DEALLOCATE PREPARE stmt;
       CLOSE cursor1;
END 
```

结果示例（**选择@stmtQuery**）：

```
 SELECT Nick, Title, Content FROM `basia` WHERE `basia`.UserId=0
     SELECT Nick, Title, Content FROM `Comments_11` WHERE `Comments_11`.UserId=0
     ... etc 
```

我想从所有这些查询中得到一个结果，但我知道我只得到一个结果

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T12:15:53.380

使用 CONCAT 函数在循环中生成查询，在它们之间添加“UNION”或“UNION ALL”子句，然后使用准备好的语句执行结果查询。

***没有光标的解决方案：***

```
SET @resultQuery = NULL;
SELECT
  GROUP_CONCAT(
    DISTINCT
    CONCAT('SELECT Nick, Title, Content FROM ', table_name, ' WHERE UserId = ', UserIdValue)
    SEPARATOR '\r\nUNION\r\n'
  )
INTO
  @resultQuery
FROM
  information_schema.COLUMNS
WHERE
  table_schema = 'comments' AND column_name LIKE '%UserId';

SELECT @resultQuery; 
```

它将产生如下结果：

```
SELECT Nick, Title, Content FROM table1 WHERE UserId = 10
UNION
SELECT Nick, Title, Content FROM table2 WHERE UserId = 10
UNION
SELECT Nick, Title, Content FROM table3 WHERE UserId = 10
UNION
SELECT Nick, Title, Content FROM table4 WHERE UserId = 10
... 
```

如果需要，增加`group_concat_max_len`变量。它是 GROUP_CONCAT() 函数允许的最大结果长度，默认值 = 1024。

# css - JSF 样式无效输入

> ID：11882595
> 
> 赞同：0
> 
> 时间：2012-08-09T11:39:31.533
> 
> 标签：css, jsf, jsf-2, richfaces

我试图在输入样式无效时更改输入样式，在它的消息之前。我找到[了这个](http://cagataycivici.wordpress.com/2011/04/04/styling-invalid-input-fields-with-jsf/)示例，并尝试了它，但看不到无效输入背景颜色的变化。当输入无效时，我看到它是无效消息，并且我可以看到它的 styleClass 已更改为 postValidationLisenter 中的样式。

有没有理由我看到正确的 styleClass 但输入样式没有改变？有没有另一种方法来改变输入的风格，但不是从客户端？我希望它对于每个无效输入都是自动的。

***更新*****：** 我现在尝试将 styleClass 添加到输入本身的输入中，但仍然无法查看边框和背景颜色。如果我将这些样式定义放在`style`输入中，我就能看到它们。这是某种错误吗？我知道它不可能是 css 文件，因为我还有其他显示的 css 定义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T13:27:28.927

原来是css定义中有一个缺失`!important`，这就是为什么我看不到边框颜色的原因。所以它甚至与无效问题无关。我在[这里](https://stackoverflow.com/questions/9589858/issues-in-applying-styleclass-to-inputtext-placed-on-column-of-datatable)找到了。

# c# - 委托 - 异常不要等到调用 EndInvoke()

> ID：11882596
> 
> 赞同：5
> 
> 时间：2012-08-09T11:39:33.850
> 
> 标签：c#, exception, delegates

我有这个代码：

```
using System;
using System.Runtime.Remoting.Messaging;

class Program {
    static void Main(string[] args) {
        new Program().Run();
        Console.ReadLine();
    }

    void Run() {
        Action example = new Action(threaded);
        IAsyncResult ia = example.BeginInvoke(new AsyncCallback(completed), null);
        // Option #1:
        /*
        ia.AsyncWaitHandle.WaitOne();
        try {
          example.EndInvoke(ia);
        }
        catch (Exception ex) {
          Console.WriteLine(ex.Message);
        }
        */
    }

    void threaded() {
        throw new ApplicationException("Kaboom");
    }

    void completed(IAsyncResult ar) {
        // Option #2:
        Action example = (ar as AsyncResult).AsyncDelegate as Action;
        try {
            example.EndInvoke(ar);
        }
        catch (Exception ex) {
            Console.WriteLine(ex.Message);
        }
    }
} 
```

在许多文章中，当我调用时`BeginInvoke`，所有`Exception`s （这里来自 method `threaded`）等到我调用`EndInvoke`并将被扔到那里。但它不起作用，`Exception`（“Kaboom”）“未处理”并且程序崩溃。你能帮助我吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T11:45:15.317

这很好用。当您说“程序崩溃”时，我想知道您是否只是将 IDE 设置为中断所有异常。我不会因此而崩溃 - 正如我们所期望的那样，它会将“Kaboom”写入控制台。尝试在 IDE 之外运行它或按`ctrl`+`f5`而不是`f5`.

我认为您只是看到 IDE “有用”：

![在此处输入图像描述](../Images/887a08ca2ef5c4aa4cdb0eb4cdf09a54.png)

忽略它；IDE 并不总是正确的。那还是要处理的。

# svn - 如何为结帐实施新的挂钩脚本

> ID：11882598
> 
> 赞同：0
> 
> 时间：2012-08-09T11:39:37.907
> 
> 标签：svn

我在 Windows 上使用 SVN。默认情况下，`hooks`存储库路径中的文件夹中有 9 个可用的钩子，例如`pre-commit`, `post-commit`, `pre-lock`...

有没有办法实现新的钩子脚本，比如`pre-checkout`and `post-checkout`？

我想检查用户是否有权签出相应的文件，如果有任何用户签出存储库中的任何文件或文件夹，我需要发送通知。

所以我需要结帐前和结帐后挂钩。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:32:43.637

您看到的钩子只是被识别的钩子的占位符。是否有人可以签出代码是服务器配置的一部分。

你没有说你的 Subversion 服务器是如何配置的，但是有 3 种通用方式`svnserve over ssh`，`svnserver`， 和`Apache http(s)`。每个都有自己的安全机制，我的偏好是使用 Apache 而不是 LDAP/ActiveDirectory。这允许用户使用他们的 Windows 凭据登录，并且我可以使用 Windows 组来确保结帐安全。我什至有一个处理提交的钩子脚本，它可以使用 Windows 组来查看是否允许用户更改文件。

我从来没有听说过要求在结账时发送电子邮件。（我有一个提交后脚本，可以在提交时发送电子邮件）。但是，我想可以查看 Apache 日志文件并基于此发送电子邮件。通常，您不关心结帐。你关心提交，这就是为什么大多数软件将允许*观察者*提交，而不是结帐。

* * *

对不起，令人失望的答案。基本上，它是*“不，你不能那样做”。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T16:13:28.633

就“检查权限”而言，您正在寻找的是基于路径的授权。[Subversion 手册中对如何实现它有很好的](http://svnbook.red-bean.com/en/1.7/svn.serverconfig.pathbasedauthz.html)解释。你不需要钩子函数，Subversion 的配置允许直接完成。

就“结帐通知”而言，您能否更具体地说明您要查找的内容？每次有人运行`svn checkout`命令时，您是否想要电子邮件提醒之类的东西？最终，你想用这个来完成什么？听起来可能有更好的方法来解决这个问题。

# hadoop - hadoop/HDFS：是否可以从多个进程写入同一个文件？

> ID：11882599
> 
> 赞同：0
> 
> 时间：2012-08-09T11:39:39.077
> 
> 标签：hadoop, hdfs

fe 创建文件 20bytes。
第一个进程将写入从 0 到 4
第二个从 5 到 9
等等

我需要这个来使用我的 MapReduce 并行创建一个大文件。

谢谢。

PS也许它还没有实现，但一般来说是可能的 - 请指出我应该挖掘的地方。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T22:59:32.297

您能否解释一下您在创建此文件后打算如何处理它。

如果您需要将其从 HDFS 中取出然后使用它，那么您可以让 Hadoop M/R 创建单独的文件，然后使用类似`hadoop fs -cat /path/to/output/part* > localfile`将这些部分组合成一个文件并保存到本地文件系统的命令。

否则，您无法让多个写入器打开同一个文件 - 对 HDFS 的读取和写入是基于流的，虽然您可以打开多个读取器（可能读取不同的块），但多次写入是不可能的。

Web 下载器在多个线程中使用[Range HTTP 标头](https://www.rfc-editor.org/rfc/rfc2616#section-14.35)请求文件的一部分，然后在稍后将这些部分合并在一起之前使用 tmp 文件（正如 Thomas Jungblut 建议的那样），或者他们可能能够利用随机 IO，缓冲下载的在将它们写入正确位置的输出文件之前，先将它们保存在内存中。不幸的是，您无法使用 Hadoop HDFS 执行随机输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-10T15:28:24.853

我认为简短的回答是否定的。完成此操作的方法是将多个“初步”文件写入 hadoop，然后将它们 M/R 写入单个合并文件。基本上，使用hadoop，不要重新发明轮子。

# php - PHP函数'mysql_fetch_Assoc'的错误结果

> ID：11882606
> 
> 赞同：1
> 
> 时间：2012-08-09T11:39:52.260
> 
> 标签：php, mysql, mysqli

我对 PHP 函数 'mysql_fetch_assoc()' 有疑问

```
public function result ($query) {
    $result = false;
    if (is_resource($this->resourceHandler)) {
        $result = array();
        while ($tempVar = @mysql_fetch_assoc($query)) {
            $result[] = $tempVar;
        }
    }else{
        throw new Exception ('Keine Verbindung zur Datenbank vorhanden!');
    }
    return $result;
} 
```

当我运行此函数时，返回的数组应如下所示：

```
[0] => Array
            (
                [id] => 1
                [description] => Test
                [date] => 2012-08-09
            )
[1] => Array
            (
                [nummer] => 2
                [beschreibung] => Test2
                [datum] => 2012-08-09
            )
[2] => Array
            (
                [nummer] => 3
                [beschreibung] => test3
                [datum] => 2012-08-10
            ) 
```

但它看起来像这样：

```
[0] => Array
            (
                [id] => 1
                [description] => Test
                [date] => 2012-08-09
            )
[1] => Array
            (
                [nummer] => 
                [beschreibung] => 
                [datum] => 1970-01-01
            )
[2] => Array
            (
                [nummer] => 3
                [beschreibung] => test3
                [datum] => 2012-08-10
            ) 
```

我的数组的第二个元素总是空的。无论使用哪个 sql-query。有人知道这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T12:04:26.783

出于测试目的，请尝试（这是您的代码，带有一些调试输出和一些样板）

```
<?php
$mysql = mysql_connect('localhost', 'localonly', 'localonly') or die(mysql_error());
mysql_select_db('test', $mysql) or die(mysql_error($mysql));

echo 'mysql_get_client_info: ', mysql_get_client_info(), "\n";
echo 'mysql_get_host_info: ', mysql_get_host_info($mysql), "\n";
echo 'mysql_get_server_info: ', mysql_get_server_info($mysql), "\n";
echo 'mysql_get_proto_info: ', mysql_get_proto_info($mysql), "\n";

setup($mysql);

$query = mysql_query('SELECT * FROM tmpspeisen', $mysql) or die(mysql_error($mysql));
$foo = new Foo($mysql);
var_dump ( $foo->result($query) );

class Foo {
    protected $resourceHandler;

    public function __construct($mysql) {
        $this->resourceHandler = $mysql;
    }

    public function result($query) {
        $result = false;
        if (is_resource($this->resourceHandler)) {
            $result = array();
            while ($tempVar = @mysql_fetch_assoc($query)) {
                $result[] = $tempVar;
            }
        }else{
            throw new Exception ('Keine Verbindung zur Datenbank vorhanden!');
        }
        return $result;
    }
}

function setup($mysql) {
    mysql_query('
        CREATE TEMPORARY TABLE tmpspeisen (
            id int auto_increment,
            description varchar(128),
            `date` Date,
            primary key(id)
        )
    ', $mysql) or die(mysql_error($mysql));

    mysql_query("
        INSERT INTO tmpspeisen (description, `date`) VALUES
        ('Test', '2012-08-09'), ('Test2', '2012-08-09'), ('test3', '2012-08-10')
    ", $mysql) or die(mysql_error($mysql));
} 
```

在我的机器上打印

```
mysql_get_client_info: mysqlnd 5.0.10 - 20111026 - $Id: b0b3b15c693b7f6aeb3aa66b646fee339f175e39 $
mysql_get_host_info: localhost via TCP/IP
mysql_get_server_info: 5.5.25a
mysql_get_proto_info: 10
array(3) {
  [0]=>
  array(3) {
    ["id"]=>
    string(1) "1"
    ["description"]=>
    string(4) "Test"
    ["date"]=>
    string(10) "2012-08-09"
  }
  [1]=>
  array(3) {
    ["id"]=>
    string(1) "2"
    ["description"]=>
    string(5) "Test2"
    ["date"]=>
    string(10) "2012-08-09"
  }
  [2]=>
  array(3) {
    ["id"]=>
    string(1) "3"
    ["description"]=>
    string(5) "test3"
    ["date"]=>
    string(10) "2012-08-10"
  }
} 
```

# jquery - Masonry jQuery：如何在右侧追加新项目？

> ID：11882609
> 
> 赞同：0
> 
> 时间：2012-08-09T11:39:54.107
> 
> 标签：jquery, jquery-plugins

使用 Masonry jQuery 如何在右侧而不是底部附加新项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T09:13:44.047

如果您阅读[了 Masonry 手册](http://masonry.desandro.com/demos/adding-items.html)，您会看到您可以*添加*或*附加*项目。如果您阅读[过 Isotope 手册](http://isotope.metafizzy.co/docs/adding-items.html)，您会看到您也可以*添加*或*添加*项目。

编辑然后，您可以使用附加[的这个版本的砌体水平。](http://isotope.metafizzy.co/tests/right-to-left.html)你只需要改变方向。它也在手册中，在测试下。

# sql - 使用子查询选择创建新表

> ID：11882610
> 
> 赞同：4
> 
> 时间：2012-08-09T11:39:58.157
> 
> 标签：sql, subquery

我正在尝试从子查询选择创建一个新表，但出现以下错误：
')' 附近的语法不正确。

```
SELECT * INTO foo 
FROM 
(
  SELECT DATEPART(MONTH,a.InvoiceDate) as CalMonth
        ,DATEPART(YEAR,a.InvoiceDate) as CalYear
        ,a.InvoiceDate
        ,a.StockCode
        ,a.QtyInvoiced
        ,a.Volume
  FROM sales a
  UNION ALL
  SELECT ds.CalMonth as CalMonth
        ,ds.CalYear as CalYear
        ,ds.InvoiceDate
        ,ds.StockCode
        ,ds.Cases as QtyInvoiced
        ,ds.Vol as Volume
  FROM sales1 ds
) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T11:52:06.950

您忘记`alias`在查询末尾添加。

您可以通过两种方法做到这一点：

**1.**如果您已经创建了一个表，那么您可以这样做`Insert Into`：

```
INSERT into foo (CalMonth,CalYear,InvoiceDate,StockCode,QtyInvoiced,Volume)
SELECT * FROM
(
SELECT 
    DATEPART(MONTH,a.InvoiceDate) as CalMonth
    ,DATEPART(YEAR,a.InvoiceDate) as CalYear
    ,a.InvoiceDate
    ,a.StockCode
    ,a.QtyInvoiced
    ,a.Volume
FROM sales a
UNION ALL
SELECT 
    ds.CalMonth as CalMonth
    ,ds.CalYear as CalYear
    ,ds.InvoiceDate
    ,ds.StockCode
    ,ds.Cases as QtyInvoiced
    ,ds.Vol as Volume
FROM sales1 ds
) AS table1 
```

例如[看到这个小提琴](http://www.sqlfiddle.com/#!3/23780/7)

**2.**如果您还没有创建表，那么您可以这样做`SELECT * INTO`：

```
SELECT * INTO foo from 
(
SELECT 
    DATEPART(MONTH,a.InvoiceDate) as CalMonth,
    DATEPART(YEAR,a.InvoiceDate) as CalYear,
    a.InvoiceDate,
    a.StockCode,
    a.QtyInvoiced,
    a.Volume
FROM sales a
UNION ALL
SELECT 
    ds.CalMonth as CalMonth,
    ds.CalYear as CalYear,
    ds.InvoiceDate,
    ds.StockCode,
    ds.Cases as QtyInvoiced,
    ds.Vol as Volume
FROM sales1 ds
) AS table1 
```

例如[看到这个小提琴](http://www.sqlfiddle.com/#!3/21c9c/1)

有关更多参考，请参阅[SQL SERVER – 将数据从一个表插入到另一个表 – INSERT INTO SELECT – SELECT INTO TABLE](http://blog.sqlauthority.com/2007/08/15/sql-server-insert-data-from-one-table-to-another-table-insert-into-select-select-into-table/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T11:43:39.910

试试这个

```
select * into foo from 
(
select 
    DATEPART(MONTH,a.InvoiceDate) as CalMonth,
    DATEPART(YEAR,a.InvoiceDate) as CalYear,
    a.InvoiceDate,
    a.StockCode,
    a.QtyInvoiced,
    a.Volume
from sales a
Union All
select 
    ds.CalMonth as CalMonth,
    ds.CalYear as CalYear,
    ds.InvoiceDate,
    ds.StockCode,
    ds.Cases as QtyInvoiced,
    ds.Vol as Volume
from sales1 ds
) as TAB 
```

只需`alias`向您的子查询表提供一个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T11:44:03.213

试试这个：

```
 INSERT into foo (CalMonth,CalYear, InvoiceDate,  StockCode, QtyInvoiced, Volume)
Select * From
    (select 
    DATEPART(MONTH,a.InvoiceDate) as CalMonth
    ,DATEPART(YEAR,a.InvoiceDate) as CalYear
    ,a.InvoiceDate
    ,a.StockCode
    ,a.QtyInvoiced
    ,a.Volume
    from sales a
    Union All
    select 
    ds.CalMonth as CalMonth
    ,ds.CalYear as CalYear
    ,ds.InvoiceDate
    ,ds.StockCode
    ,ds.Cases as QtyInvoiced
    ,ds.Vol as Volume
    from sales1 ds
    ) as t 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T12:00:30.487

我认为您要么需要添加已建议的别名，要么（更复杂）删除括号、 the `*`、 the `FROM`、第二个`SELECT`并移动`INTO foo`：

```
SELECT  
                                                      --- removed: FROM 
                                                      --- removed: (
                                                      --- removed: SELECT 
         DATEPART(MONTH,a.InvoiceDate) as CalMonth
        ,DATEPART(YEAR,a.InvoiceDate) as CalYear
        ,...
    INTO foo                                          --- moved

  FROM sales a
  UNION ALL
  SELECT ds.CalMonth as CalMonth
        ,...
  FROM sales1 ds ;
                                                      --- removed: ) 
```

# ruby-on-rails - Ruby on Rails form.object 不响应对象方法：nil:NilClass 的未定义方法

> ID：11882621
> 
> 赞同：2
> 
> 时间：2012-08-09T11:40:43.857
> 
> 标签：ruby-on-rails, ruby, class, methods

我正在为 Rails 3 使用 ryanb 的 nested_form gem，并尝试访问在表单中传递的对象，以便我可以标记表单生成器生成的字段。

我有以下基本结构：

```
Trainer has_many :clients, through: :relationships
Trainer has_many :schedules

Client has_many :trainers, through: :relationships
Client has_many :schedules 
```

我的 Client#edit 页面的查看代码：

```
<% provide(:title, @client.name) %>
<h2><%= link_to @client.name, @client %></h2>

<%= render :partial => 'shared/errors', :locals => { :user => @client } %>

<%= nested_form_for @client do |f| %>

<p><%= f.link_to_add "Add Schedule", :schedules %></p>

<%= f.fields_for :schedules do |schedule_form| %>

        <%= schedule_form.object.trainer.name %>

    <%= schedule_form.date_select :scheduled_date %> 
    <%= schedule_form.link_to_remove "Remove" %>

    <%= schedule_form.hidden_field :trainer_id %>
    <%= hidden_field_tag :trainer_id %>

    <% end %>

<br><%= f.submit "Create", class: 'btn btn-large btn-primary' %></br>
<% end %> 
```

该行`<%= schedule_form.object.trainer.name %>`引发`undefined method 'name' for nil:NilClass`错误。

这就是它变得奇怪的地方。我将在下面发布几个场景，我修改该行，然后在页面上发布输出：

```
<%= schedule_form.object.trainer %>
<Trainer:0x007fdcedf3f800>

<%= schedule_form.object.trainer.class %>
Trainer

<%= schedule_form.object.trainer.is_a?(Object) %>
true

<%= schedule_form.object.trainer.respond_to?(:name) %>
true

<%= schedule_form.object.trainer.name %>
undefined method 'name' for nil:NilClass

<%= t_id = schedule_form.object.trainer_id %>
1
<%= Trainer.find(t_id) %>

<%= t_id = schedule_form.object.trainer_id %>
1
<%= Trainer.find_by_id(t_id) %>
#<Trainer:0x007fdcedf09660>

<%= t_id = schedule_form.object.trainer_id %>
1
<%= Trainer.find_by_id(t_id).name %>
undefined method 'name' for nil:NilClass 
```

所以基本上 - 我可以使用表单构建器来检索 :schedule 对象并可以查询它来检索 :trainer 对象（`schedule.trainer`或`schedule.trainer_id`）；然而，:trainer 对象不会响应它的任何实例方法，尽管据我所知，它是 Trainer 类的对象。

我怎样才能返回`trainer.name`？这就是我想要的：一个标签。请帮忙。

编辑：添加了培训师模型

```
class Trainer < ActiveRecord::Base
  attr_accessible :email, :name, :password, :password_confirmation
  has_secure_password
  has_many :relationships
  has_many :clients, through: :relationships
  has_many :schedules

  validates :name, presence: true
  VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
  validates :email, presence: true, format: { with: VALID_EMAIL_REGEX }, 
                                                                uniqueness: { case_sensitive: false }
  validates :password, presence: true, length: { minimum: 6 }, on: :create
  validates :password_confirmation, presence: true, length: { minimum: 6 }, on: :create

  before_save { |trainer| trainer.email = email.downcase } 

end 
```

* * *

编辑 - 稍后添加。

我尝试使用以下代码，它按预期工作：

```
<%= t_id = 1 %>
<%= Trainer.find(t_id).name %> 
```

退货

```
Joe Trainer 
```

然而：

```
<%= t_id = schedule_form.object.trainer_id %>
  > 1
<%= Trainer.find(t_id) %>
  > Couldn't find Trainer without an ID
<%= Trainer.find_by_id(t_id) %>
  > #<Trainer:0x007fea86b9a168>
<%= Trainer.find_by_id(t_id).name %>
  > undefined method 'name' for nil:NilClass 
```

所以很明显，从 schedule_form.object 返回的任何东西都有一些“额外的包袱”。有没有办法对它进行`t_id = schedule_form.object.trainer_id`清理和清理，这样我所拥有的只是一个纯整数，不受任何先前历史的影响？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T11:21:58.460

您的代码在 Schedule 对象上失败，但您没有发布该模型。

很可能它会崩溃，因为您没有使用@trainer.schedules.create 创建计划，而是使用了 Schedule.create 或 Schedule.new... 然后 trainer 属性未初始化，因此为 nil。

# jsf - Is it possible to submit a action without closing a modalpanel?

> ID：11882623
> 
> 赞同：0
> 
> 时间：2012-08-09T11:40:56.837
> 
> 标签：jsf, richfaces, modal-dialog

I have the following inside a richfaces modalpanel:

```
<ui:repeat id="al11" var="albumslistvalue1" value="#{AlbumDetailBean.getAlbumImagesList()}"
varStatus="albumslistvalue1Index">
  <rich:modalPanel id="panel#{albumslistvalue1Index}" width="850" height="560">
    <f:facet name="header">
      <h:panelGroup>
        <h:outputText value="Fotos"/>
      </h:panelGroup>
    </f:facet>
    <f:facet name="controls">
      <h:panelGroup>
        <h:graphicImage value="/img/modal/close.png" styleClass="hidelink" id="hidelink"/>
        <rich:componentControl for="panel" attachTo="hidelink" operation="hide"
        event="onclick" />
      </h:panelGroup>
    </f:facet>
    <!-- content-->
    <center>
      <h:graphicImage value="img/cart/prior16.png" />
      <h:graphicImage value="albums/#{albumslistvalue1.albumImageId}/med_#{albumslistvalue1.albumimagename}"/>
      <h:graphicImage value="img/cart/next16.png" />
      <h:commandLink id="comp" action="#{AlbumDetailBean.getCartAlbums()}">
        <div>
          <h:outputText value="Comprar" />
          <f:param name="albumproductid" value="#{albumslistvalue1.id}" />
        </div>
      </h:commandLink>
    </center>
  </rich:modalPanel>
  <h:outputLink value="#" id="link">
    <!-- Show Modal Panel -->
    <h:graphicImage id="image" url="albums/#{albumslistvalue1.albumImageId}/mini_#{albumslistvalue1.albumimagename}"
    width="100px" height="auto" />
    <rich:componentControl for="panel#{albumslistvalue1Index}" attachTo="link"
    operation="show" event="onclick" />
  </h:outputLink>
</ui:repeat> 
```

and getCartAlbums() method:

```
public List getCartAlbums() {
  boolean status = false;
  AlbumImpl bean1 = new AlbumImpl();

  String productidval = ((HttpServletRequest) FacesContext.getCurrentInstance().getExternalContext().getRequest()).getParameter("albumproductid");

  AlbumDetailBean albums = (AlbumDetailBean) bean1.bo_getAlbumImageDetails(productidval);

  if(albums != null) {

    cartAlbumDetails.add(albums);
    setId(albums.getId());
    setAlbumname(albums.getAlbumname());
    setSchoolId(albums.getSchoolId());
    setAlbumImageId(albums.getAlbumImageId());
    setAlbumimagename(albums.getAlbumimagename());
    // setAlbumimage(albums.getAlbumimage());
    setListPrice(albums.getListPrice());
    setAvailableQty(albums.getAvailableQty());
    setTotalAmount(albums.getTotalAmount());
    setProductcode(albums.getProductcode());
    setListpricevalue(albums.getListpricevalue());
    setProductsize(albums.getProductsize());
    setQtyvalue(albums.getQtyvalue());
    setTotalpricevalue(albums.getTotalpricevalue());
    setProductid(albums.getProductid());
    setShipPrice(albums.getShipPrice());
  }
  return cartAlbumDetails;
} 
```

I'm using someone else's code, so i didn't write the getCartAlbums() method, but it basically add the select image to the cart, it's working, the images are added to the cart correctly, but the modalpanel still closes

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T14:24:50.727

I think you're using JSF 1/RF3? getCartAlbums() is returning a list, is this right? My JSF 1 knowledge is from the distant past but it doesn't look right.

However, the problem is that the h:commandLink is doing a full page submit, a POST request which reloads the page with the results of the postback (the response to the POST request). So after the button is pushed you see the screen redraw and what you're seeing is the page in the same state (albeit with updated values) as it was in when you first loaded it, which is without a modalPanel.

To remedy the problem you want to use a4j:commandLink to perform an ajax partial submit. I'm not sure if RF3 has execute= and render= attributes on the a4j:commandLink component or whether you have to use a4j:support as a child component, but I'm sure you can find out. You use execute= to specify which components values are submitted in the body of the ajax POST request, and render= to specify which components are updated after the postback is received.

# plugins - 詹金斯的声纳工作永远不会终止

> ID：11882626
> 
> 赞同：2
> 
> 时间：2012-08-09T11:41:03.987
> 
> 标签：plugins, jenkins, sonarqube, terminate

在 Jenkins/Sonar 中构建的特定项目中，构建作业永远不会终止。

在控制台中，我们可以看到：

`[INFO] ... ANALYSIS SUCCESSFUL, you can browse ....`

`[INFO] ... Executing post-job class org.sonar.plugins.core.batch.IndexProjectPostJob`

在每次运行中，构建都会在控制台的同一行停止。如果我们输入声纳报告，新版本中的所有信息似乎都是最新的。

其他项目就像一个魅力。

关于什么可能是错的任何想法？

# c# - C#中的SQL Server日期存储

> ID：11882631
> 
> 赞同：0
> 
> 时间：2012-08-09T11:41:23.820
> 
> 标签：c#, sql-server, date

我有一个查询，它在 datematch 上从 sql server 获取信息。

我已经搜索了很多关于 SQL Server 日期字符串的信息，我只想匹配日期并从数据库中获取数据。另外我正在使用 SQL Server 2005，我想获取日期并从中抽出时间？

任何人都可以帮助我...我是 C# 新手

这是我的查询。

```
return "select Timein, Timeout from Attendance where E_ID = " + E_ID + " and Date = " + DateTime.Now.ToShortDateString(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:56:58.257

使用 sql server CONVERT 函数将输入日期参数​​转换为时间更改查询以适应以下任何一种 CONVERT 函数

将时间格式转换为 hh:mm:ss 的 SQL 查询：

```
select convert(varchar, <<dateparam>>, 108) 
```

将时间格式转换为 hh:mi:ss:mmm(24h) 的 SQL 查询：

```
select convert(varchar, <<dateparam>>, 114) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T12:09:31.387

在查询数据库时，您应该**始终**使用参数——无论是否可以进行 SQL 注入，使用参数只是一个**很好的做法**，它解决了一些棘手的问题*，我需要多少引号和哪种类型才能使其成为有效的 SQL陈述*问题，也是。

所以尝试类似：

```
string sqlStmt = "SELECT Timein, Timeout FROM dbo.Attendance " + 
                 "WHERE E_ID = @ID AND Date = @Date";

using(SqlConnection conn = new SqlConnection("your-connection-string-here"))
using(SqlCommand cmd = new SqlCommand(sqlStmt, conn))
{
    // set up parameters
    cmd.Parameters.Add("@ID", SqlDbType.Int).Value = E_ID;
    cmd.Parameters.Add("@Date", SqlDbType.DateTime).Value = DateTime.Now.Date;

    // open connection, read data, close connection
    conn.Open();

    using(SqlDataReader rdr = cmd.ExecuteReader())
    {
       while(rdr.Read())
       {
          // read your data
       }

       rdr.Close();
    }

    conn.Close();
} 
```

# jquery - Json 在按钮单击时不起作用？

> ID：11882637
> 
> 赞同：0
> 
> 时间：2012-08-09T11:41:46.607
> 
> 标签：jquery, ajax, button

JSON 不工作。这是下面的代码。

ajax.aspx 文件：-

```
 <form id="form1" runat="server">
    <div id="dictionary">
</div>
 <div class="letters">
<div class="button" id="letter-a">
<h3>A</h3>
<button type="button">Load</button> 
</div>
<div class="button" id="letter-b">
<h3>B</h3>
<button type="button">Load</button> 
</div>
<div class="button" id="letter-c">
<h3>C</h3>
<button type="button">Load</button> 
</div>
<div class="button" id="letter-d">
<h3>D</h3>
<button type="button">Load</button> 
</div>
</div>
</form> 
```

这是 b.json 文件：_

```
[
{
"term": "BACCHUS",
"part": "n.",
"definition": "A convenient deity invented by the ancients as an
excuse for getting drunk.",
"quote": [
"Is public worship, then, a sin,",
"That for devotions paid to Bacchus",
"The lictors dare to run us in,",
"And resolutely thump and whack us?"
],
"author": "Jorace"
},
{
"term": "BACKBITE",
"part": "v.t.",
"definition": "To speak of a man as you find him when he can't
find you."
},
{
"term": "BEARD",
"part": "n.",
"definition": "The hair that is commonly cut off by those who
justly execrate the absurd Chinese custom of shaving the head."
},
] 
```

ajax.js 文件：-

```
$(document).ready(function () {
    $('#letter-a button').click(function () {
        $('#dictionary').load('html_ajax.htm');
        alert('Loaded!');
    });
    $('#letter-b button').click(function () {
        $.getJSON('b.json', function (data) {
            $('#dictionary').empty();
            $.each(data, function (entryIndex, entry) {
                var html = '<div class="entry">';
                html += '<h3 class="term">' + entry['term'] + '</h3>';
                html += '<div class="part">' + entry['part'] + '</div>';
                html += '<div class="definition">';
                html += entry['definition'];
                if (entry['quote']) {
                    html += '<div class="quote">';
                    $.each(entry['quote'], function (lineIndex, line) {
                        html += '<div class="quote-line">' + line + '</div>';
                    });
                    if (entry['author']) {
                        html += '<div class="quote-author">' + entry['author'] +
'</div>';
                    }
                    html += '</div>';
                }
                html += '</div>';
                html += '</div>';
                $('#dictionary').append($(html));
            });

        });
    });
}); 
```

单击按钮 A 有效，但 B 无效。我是 Ajax 的新手。所以我希望我遗漏了一些东西。

哪里可能是错误。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:47:13.290

根据[jsonlint](http://jsonlint.com)您的 b.json 文件无效。您应该删除最后一个逗号以使其有效。

# php - PHP CURL 登录到另一台服务器

> ID：11882640
> 
> 赞同：0
> 
> 时间：2012-08-09T11:41:49.163
> 
> 标签：php, curl

```
$cookie="cookie.txt"; 
$data = array();
$data['global_id'] = "raj";
$data['global_password'] = "raj";

foreach ($data as $key => $value){
    $post_items[] = $key . '=' . $value;
}

//create the final string to be posted using implode()
$post_string = implode ('&', $post_items);

$curl_connection = curl_init('http://somedomain.com/cgi-bin/login.pl');
curl_setopt($curl_connection, CURLOPT_CONNECTTIMEOUT, 30);
curl_setopt($curl_connection, CURLOPT_USERAGENT,"Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)");
curl_setopt($curl_connection, CURLOPT_RETURNTRANSFER, 0);
curl_setopt($curl_connection, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($curl_connection, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($curl_connection, CURLOPT_REFERER, 'http://somedomain.com/cgi-bin/login.pl');
curl_setopt($curl_connection, CURLOPT_POSTFIELDS, $post_string);
curl_setopt($curl_connection, CURLOPT_COOKIEJAR, $cookie);
curl_setopt($curl_connection, CURL_COOKIEFILE, '');
$result = curl_exec($curl_connection);

if($result == "success"){
    header("Location: http://somedomain.com/cgi-bin/index.pl");
}
else{
    echo "Login failed";
}

//close the connection
curl_close($curl_connection); 
```

有什么问题...我无法登录

执行此脚本后，如果我转到[http://somedomain.com/cgi-bin/index.pl](http://somedomain.com/cgi-bin/index.pl) 它应该登录。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:44:28.543

你应该设置`CURLOPT_RETURNTRANSFER`为`true`. 可能你的 $result 是空的。

此外，在设置时，`CURLOPT_REFERER`您显然使用了错误的变量。($ch)

编辑：

似乎缺少以下行：

```
curl_setopt($curl_connection, CURLOPT_POST, true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T12:06:48.577

试试这个：

```
curl_setopt($ch, CURLOPT_SSLVERSION, 3); // OpenSSL issue
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);  // Wildcard certificate
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2); 
```

否则，您应该了解`SSL`服务器的配置。这可能是一个问题。

您也可以将`POST`vars 设置为数组：

```
curl_setopt($ch, CURLOPT_POSTFIELDS, array('param1' => 'value1', 'param2' => 'value2')); 
```

**更新：**你正在尝试使用`SSL`over `HTTP`。

```
$curl_connection = curl_init('http://somedomain.com/cgi-bin/login.pl'); 
```

尝试更正您的`URL`to `HTTPS`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T20:08:45.727

尝试修复您的 curl opt 代码，如下所示：

```
curl_setopt($curl_connection, CURLOPT_POST, true);
curl_setopt($curl_connection, CURLOPT_RETURNTRANSFER, true);
curl_setopt($curl_connection, CURL_COOKIEFILE, $cookie);
curl_setopt($curl_connection, CURL_VERBOSE, true); 
```

希望这有帮助..

# xml - 在 XML 中对项目进行分组

> ID：11882645
> 
> 赞同：1
> 
> 时间：2012-08-09T11:42:02.070
> 
> 标签：xml

我正在尝试使用 XML 存储一些信息，对数据进行分组的正确方法是什么？我在三个房间中有多台计算机，我应该创建房间元素还是使用属性？

```
<rooms>
<room name="Room 1">
  <computer>
    <name>Student14</name>
    <ipaddress>00.00.00.01</ipaddress>
    <macaddress>00-0B-DB-74-12-AB</macaddress>
  </computer>
 </room>
<room name="Room 2">
  <computer>
    <name>Student15</name>
    <ipaddress>00.00.00.02</ipaddress>
    <macaddress>00-0B-DB-74-12-AC</macaddress>
  </computer>
 </room>
<room name="Room 3">
  <computer>
    <name>Student16</name>
    <ipaddress>00.00.00.03</ipaddress>
    <macaddress>00-0B-DB-74-12-AD</macaddress>
  </computer>
 </room>
</rooms> 
```

或者像这样：

```
<computers>
  <computer>
    <name>Student14</name>
    <ipaddress>00.00.00.01</ipaddress>
    <macaddress>00-0B-DB-74-00-AC</macaddress>
    <location>Room 1</location>
  </computer>
  <computer>
    <name>Student15</name>
    <ipaddress>00.00.00.02</ipaddress>
    <macaddress>00-0B-DB-74-00-AB</macaddress>
    <location>Room 2</location>
  </computer>
  <computer>
    <name>Student16</name>
    <ipaddress>00.00.00.03</ipaddress>
    <macaddress>00-0B-DB-74-00-AD</macaddress>
    <location>Room 3</location>
  </computer>
</computers> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T11:44:57.487

取决于您关心的数据。您想存储有关房间或计算机的信息吗？在您的第一个示例中，您正在存储有关房间的信息。这也可能包括沙发、灯等。在第二个中，您正在存储有关计算机的信息。这可能包括他们的位置、型号等。

这取决于您希望信息是关于什么的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T14:40:45.280

没有“正确”的表示。XML 没有像关系数据库那样的“标准形式”。通常，您系统中的对象将形成一个通用图，并且您的 XML 需要是该图的一些层次投影。为方便起见选择您的表示，并准备从一种表示转换为另一种表示。

（例如，MusicXML 定义了两种表示，一种是时间线中的事件位于顶层，另一种是乐器或人声部分位于顶层。这两种表示是等价的，并且对不同的目的有用.)

# jquery - 身体宽度可以被覆盖吗？

> ID：11882649
> 
> 赞同：0
> 
> 时间：2012-08-09T11:42:16.953
> 
> 标签：jquery, html, css

可以覆盖身体宽度，例如我有这个例子：

```
<body>
<table id="table1">
<tr><td></td></tr>
</table>
<table id="table2">
<tr><td></td></tr>
</table>
</body>

css:
body{width:970px;}
#table1{width:100%;}
#table2{width:100%;} 
```

我想为第一个表设置宽度：自动；可在整个浏览器宽度上展开，但正文宽度不允许。

我必须有那个 body:970px 所以我不能修改它，并且我必须有 100% 的第二个表才能以 970px 的主体宽度展开内部的所有元素。

我该如何解决这个问题？

[**小提琴示例**](http://jsfiddle.net/Vqmaw/2104/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:57:26.020

没有好的方法可以做到这一点；HTML 元素总是从其父元素继承属性。所以如果你给`body`一个固定的宽度，你基本上限制了孩子们可以做的事情。对他们来说，世界（即`width: 100%`）现在是有限的`body`宽度，没有办法说“请使用父宽度但跳过正文元素”。

使用 JavaScript，您可以尝试获取`html`元素的宽度，但即使您将其分配给`table1`，溢出规则也可能会剪切它。

要解决此问题，您将不得不摆脱固定的车身宽度。`div`将 body 替换为固定宽度的容器。这使您可以移动`table1`到容器之外`div`，它将看到`body`的自然宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T11:47:55.267

因为你说：我必须有那个 body:970px 所以我不能修改它，我想你不能修改 body CSS：你可以这样做：

CSS

```
#table1, #table2 {width:970px;} 
```

或者

jQuery

```
$(document).ready(function(){
$('body').css('width', '970px');
}) 
```

# javascript - Javascript/jQuery - 定义时“无法调用未定义的‘push’方法”

> ID：11882650
> 
> 赞同：4
> 
> 时间：2012-08-09T11:42:21.790
> 
> 标签：javascript, jquery, arrays

在一个通过一些表单字段的简单脚本中，获取用户输入并将其存储到数组中，我遇到了问题。

当我这样做时它有效：

```
var q1A = parseFloat($('#q1-1').val());
if(isNaN(q1A)) {
    var q1A = 0;
}
parameter.push(' ');
answers.push(q1A); 
```

但是现在我添加了另一个数组，在这种情况下，它应该只是存储相同的 q1A 变量。但不知何故，我最终得到一个“未捕获的类型错误”，说明变量未定义！新的代码块是：

```
var q1A = parseFloat($('#q1-1').val());
if(isNaN(q1A)) {
    var q1A = 0;
}
input.push(q1A);
parameter.push(' ');
answers.push(q1A); 
```

我在控制台中记录了变量，它工作得很好，它已经设置并且有一个值。知道为什么它说它是未定义的吗？'answers' 数组可以很好地存储值。

提前致谢！

编辑：

当然，我定义了变量。我只是没有发布那部分代码......

```
var groups = new Array();
var questions = new Array();
var input = new Array();
var parameter = new Array();
var answers = new Array();
var amounts = new Array(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T12:00:54.427

由于可以将未定义的变量推送到数组中而不会出错，因此问题一定是`input`在您尝试调用`push()`它时未定义。

这个问题的通常原因是在另一个地方`input`声明了变量并且它从未在意外的地方初始化。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T11:57:19.520

首先你必须定义为数组。

```
var   input=[]; 
```

然后尝试推动元素。

```
input.push(element); 
```

# shell - 是否有一个 shell 命令来选择第 n 行？

> ID：11882651
> 
> 赞同：2
> 
> 时间：2012-08-09T11:42:23.663
> 
> 标签：shell

是否有一个 shell 命令来选择字符串的第 n 行？

例子：

```
line1
line2
line3 
```

选择第 2 行。

**更新：**到目前为止谢谢。在您的帮助下，我想出了一个字符串的解决方案：

选择第二行：

```
echo -e "1\n2\n3" | head -2 | tail -1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T11:44:07.707

```
$ head -n filename | tail -1 
```

其中“n”是您的行号。但它的效率有点低，启动了 2 个进程。

或者`sed`可以这样做。要打印第 4 行：

```
$ sed -n 4p filename 
```

[该论坛答案](http://www.linuxquestions.org/questions/linux-software-2/sed-display-text-on-specific-line-of-text-file-397405/)详细说明了 3 种不同的方法`sed`

```
# print line number 52
sed -n '52p' # method 1
sed '52!d' # method 2
sed '52q;d' # method 3, efficient on large files 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T11:45:08.347

```
head -4 a.txt | tail -1 
```

要打印 a 中的第 4 行。文本文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T11:50:13.807

使用`gawk`：

```
gawk -v n=3 'n==NR { print; exit }' a.txt 
```

# geolocation - IPv6 的 IP 地理位置支持

> ID：11882652
> 
> 赞同：0
> 
> 时间：2012-08-09T11:42:30.933
> 
> 标签：geolocation, ipv6

我想知道是否有人知道或与已经支持 IPv6 的 IP 地理位置提供商（商业提供商）合作？有什么建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T14:35:56.690

[MaxMind](http://www.maxmind.com)说它们是 ipv6 兼容的，但我自己还没有验证过。请参阅他们的[ipv6 常见问题解答](http://www.maxmind.com/app/ipv6)。

# ruby-on-rails - rails select，查询受限

> ID：11882653
> 
> 赞同：0
> 
> 时间：2012-08-09T11:42:34.880
> 
> 标签：ruby-on-rails, activerecord

目前，我正在尝试将信息提要限制在选项选择字段中，以仅显示我选择的标准。使用下面的代码，这似乎有效

```
= select("schedule", :selected_players, User.where(:team_id => current_user[:team_id]) { |p| [full_name(p), p.id] }, {:include_blank => 'None', :prompt => 'Add Players to Lineup'}, :multiple => "multiple") 
```

问题是这段代码显示了一个数组字段类型，即#<User:0xa559830>。

如何让它显示实际用户名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T12:34:17.773

我建议以更大的分离度和清晰度重写代码，而不是试图将它们全部放在一行中。生成 SQL 的模型方法永远不应该从视图中调用。

在控制器中：

```
@players = User.where(:team_id => current_user[:team_id]).all 
```

在视图中：

```
= select :schedule, :selected_players, @players.map {|p| [full_name(p), p.id] }, {:include_blank => true}... 
```

我认为您代码中的原始错误似乎是您在`where`没有迭代器（`each`）的方法之后调用了一个块。

# unix - cygwin 帮助修剪输出

> ID：11882654
> 
> 赞同：2
> 
> 时间：2012-08-09T11:42:37.943
> 
> 标签：unix, cygwin, trim

```
ping google.com -n 10 | grep Minimum | sed s/^\ \ \ \ // 
```

将输出：

```
Minimum = 29ms, Maximum = 49ms, Average = 32ms 
```

我想从空间之后修剪`=`到`,`最小

那么它只会显示：

```
29ms 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T13:20:50.157

一种使用方式`awk`：

```
ping google.com -n 10 | awk '/Minimum =/ { sub(",","",$3); print $3 }' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T13:13:34.900

```
$ echo "Minimum = 29ms, Maximum = 49ms, Average = 32ms" | awk '{print $3}' | sed s/,//
29ms 
```

所以这应该可行，但可能不是您要求的最优雅的表达方式。

```
ping google.com -n 10 | grep Minimum | awk '{print $3}' | sed s/,// 
```

您也可以使用`cut`代替`awk`.

# c# - 没有访问令牌的本机 Facebook 应用程序注销

> ID：11882664
> 
> 赞同：3
> 
> 时间：2012-08-09T11:43:01.667
> 
> 标签：c#, facebook, logout

将 facebook C# SDK 用于在 kiosk 模式下使用的本机应用程序。

设想：

1.  用户登录到 Facebook。

2.  应用请求权限。

3.  用户拒绝权限。

4.  由于未授予访问令牌，因此无法以编程方式将用户从 facebook 注销。（见：[https](https://developers.facebook.com/docs/authentication/) ://developers.facebook.com/docs/authentication/ ）

在上述应用程序的下一个用户应该从头开始的情况下，最好的方法是什么？

# iphone - 单元格图像仅在滚动后出现

> ID：11882666
> 
> 赞同：1
> 
> 时间：2012-08-09T11:43:11.657
> 
> 标签：iphone, ios, ipad, uitableview, uiimageview

我有一个 UITableView ，其方法`cellForRowAtIndexPath`如下所示，问题是`cellImage`仅在完全向上滚动（因此没有行可见）然后释放后才出现。奇怪的是，我在另一个类中有相同的代码用于单独的表格视图，并且图像看起来很好。有任何想法吗？

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"CellIdentifier";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        cell.accessoryType = UITableViewCellAccessoryNone;
    }

    [cell.textLabel setText:[items objectAtIndex:indexPath.row]];
    [cell.textLabel setFont:[UIFont fontWithName:@"Helvetica" size:15.0f]];
    [cell.textLabel setTextColor:[UIColor whiteColor]];
    [cell setBackgroundColor:[[UIColor alloc] initWithRed:117.0/255.0 green:118.0/255.0 blue:121.0/255.0 alpha:1.0]];
    [self.tableView setBackgroundView:nil];
    [self.tableView setBackgroundView:[[UIView alloc] init]];
    [self.view setBackgroundColor:[[UIColor alloc] initWithRed:167.0/255.0 green:169.0/255.0 blue:172.0/255.0 alpha:1.0]];
    UIImageView *cellImage = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"next@2x.png"]];
    [cell addSubview:cellImage];
    [cellImage setFrame:CGRectMake(0, 0, 26, 24)];
    [cellImage setCenter:CGPointMake(cell.frame.size.width - 30, cell.frame.size.height/2)];

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T13:14:49.037

```
[self.tableView setBackgroundView:nil];
[self.tableView setBackgroundView:[[UIView alloc] init]]; 
```

这些行不属于该方法。每次滚动每个单元格时都会调用这些方法。创建表格视图后，将它们放入 viewDidLoad 方法中。

```
UIImageView *cellImage = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"next@2x.png"]];
[cell addSubview:cellImage]; 
```

这些行非常**糟糕**，可能会导致内存泄漏。

每次滚动表格视图时，都会向单元格添加一个图像视图。表视图重用单元格。这意味着当单元格被重用时，您向单元格添加一个新的图像视图。滚动更多次后，每个单元格上都有 x 次 imageview，除非您在代码中的某个位置删除它们。

另一点是，如果您想向单元格添加一些子视图（例如，在单元格的 init 方法中），然后将其添加到单元格的内容视图中，如下所示

```
[cell.contentView addSubview:someView]; 
```

否则，您的子视图可能会与附件视图重叠。当你的单元格被调整大小时，你可能会遇到问题。

我建议您阅读以下链接中的指南：http: [//developer.apple.com/library/ios/#documentation/userexperience/conceptual/tableview_iphone/TableViewCells/TableViewCells.html#//apple_ref/doc/uid/TP40007451- CH7-SW1](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/tableview_iphone/TableViewCells/TableViewCells.html#//apple_ref/doc/uid/TP40007451-CH7-SW1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T12:36:49.873

您面临的问题是由于单元格的重用标识符。此外，每次执行 cellForRowAtIndexPath 时，您都在创建 Imageview。

我会在这里为你推荐两个解决方案。

**第一个选项：-**只需替换此代码：

```
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:nil];
    cell.accessoryType = UITableViewCellAccessoryNone;
} 
```

当您处理动态图像时，这不是正确的方法，这意味着您正在从服务器下载缩略图并且数据内容更多，如果它是小型静态数据，那么它对您来说很好。

**第二个选项：-**只需使用此格式化代码，这不会每次只使用当前单元格中的对象和标签来创建图像视图。

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *CellIdentifier = @"CellIdentifier";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        cell.accessoryType = UITableViewCellAccessoryNone;
        UIImageView *cellImage = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 26, 24)];  
        cellImage.tag = 88;
        [cell addSubview:cellImage];
        [cellImage setCenter:CGPointMake(cell.frame.size.width - 30, cell.frame.size.height/2)];

    }
    [cell.textLabel setText:[items objectAtIndex:indexPath.row]];
    [cell.textLabel setFont:[UIFont fontWithName:@"Helvetica" size:15.0f]];
    [cell.textLabel setTextColor:[UIColor whiteColor]];
    [cell setBackgroundColor:[[UIColor alloc] initWithRed:117.0/255.0 green:118.0/255.0 blue:121.0/255.0 alpha:1.0]];
    [self.tableView setBackgroundView:nil];
    [self.tableView setBackgroundView:[[UIView alloc] init]];
    [self.view setBackgroundColor:[[UIColor alloc] initWithRed:167.0/255.0 green:169.0/255.0 blue:172.0/255.0 alpha:1.0]];
    UIImageView *cellImage = (UIImageView *)[cell viewWithtag:88];
    cellImage.image = [UIImage imageNamed:@"next@2x.png"];

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T12:38:08.143

正如许多评论中所捕获的那样，存在许多问题：

在 viewDidLoad 方法（或通过 XIB）中设置视图和 tableView 背景，而不是在 cellForRowAtIndexPath 中

使用 cell.imageView 属性设置左图标，或者，构建自定义单元格，您将使用 [cell.contentView addSubview:cellImage]。如果您执行后者，您还应该以与 UILabel 相同的方式添加您的 textLabel。

要设置表格视图单元格的背景，请使用此委托方法：

```
-(void) tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell*)cell forRowAtIndexPath:(NSIndexPath *)indexPath
{
 [cell setBackgroundColor:[[UIColor alloc] initWithRed:117.0/255.0 green:118.0/255.0 blue:121.0/255.0 alpha:1.0]]; 
} 
```

虽然为了提高效率，你应该在你的视图控制器中实例化一次这个 UIColor 并将其设置为 [cell setBackgroundColor:self.cellBackground];

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T14:51:09.230

使用以下代码修复：

```
UIImageView *cellImage = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"next@2x.png"]];
[cell setAccessoryView:cellImage]; 
```

# plugins - 如何使用插件 java 代码从内部访问 Confluence 页面标题和正文？

> ID：11882667
> 
> 赞同：2
> 
> 时间：2012-08-09T11:43:15.427
> 
> 标签：plugins, export, confluence

我正在尝试创建我的自定义插件，它可以帮助我提取 XML 格式的 Confluence 内容。我确实分析了高级下的 XML 导出选项，但是它生成的 XML 中充满了我不需要的数据。我的目标是创建一个类似的 XML

```
 <Title>Page Title :Test Title</Title>
 <Body>[CDATA]Page Body...[CDATA]</Body>
 <Version>1.0</Version> 
```

所以我在名为 Freeway Export 的高级选项卡中添加了我的自定义链接，例如[http://img844.imageshack.us/img844/4519/pagektg.jpg](http://img844.imageshack.us/img844/4519/pagektg.jpg)。我配置了自定义 Java 类，该类在 UI 中看到的 Submit 事件上调用。

```
public String doDefaultXmlFreeway() throws Exception
    {
        System.out.println("The call to doDefaultXmlFreeway has been made ");
        exportType = ImportExportManagerExtended.TYPE_FREEWAY;
        System.out.println("The contents to be exported >> " + getContentToBeExported().size());
        System.out.println("The contents available >> " + getContentTree().size());
        return doDefault();
   } 
```

控制台给出了这样的输出：

```
[INFO] [talledLocalContainer] The call to doDefaultXmlFreeway has been made
[INFO] [talledLocalContainer] The contents to be exported >> 2
[INFO] [talledLocalContainer] The contents available >> 3 
```

如 UI 图像所示，我的空间中列出了 3 个内容。如果我选​​中了 2 个内容复选框；getContentToBeExported() 显示了适当的数字。

现在我的下一步是以某种方式获取页面的标题和正文，以便我可以将其用于 xml 转换。我可以以任何方式从 contenTree 获取标题和正文详细信息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T19:38:04.910

安吉拉，

您似乎正在扩展类[ExportSpaceAction](http://docs.atlassian.com/confluence/latest/com/atlassian/confluence/importexport/actions/ExportSpaceAction.html)。

`getContentTree().getPages()`

是您要获取页面的 api。从那里获取 tile 和 body 应该很容易从 javadocs 中获取。

阿迪尔

# signature - 避免在运行时检查 APK 上的签名

> ID：11882669
> 
> 赞同：1
> 
> 时间：2012-08-09T11:43:25.600
> 
> 标签：signature, robotium

我想用 robotsium 测试第三方开发者应用程序。问题是两个 apk 都应该使用相同的密钥签名。因此，如果第三方开发人员对特定签名的运行时间进行了限制或检查，我该如何测试？

在这种情况下辞职不是解决办法吗？还有另一个我能想到的多符号解决方案。有没有更好的办法？

PS：我已经经历了相关的线程。如果我错过了任何内容，我深表歉意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T00:56:59.280

我也发生过类似的事情，而且解决起来并不容易。`Robotium`我为第三方构建的应用程序编写了一个程序，但他们使用加密签名对其进行了签名。我必须做的是编写一个`Ant`脚本，`KeySigner`其中包含使两个签名匹配的内部。尽管如此，为了启动测试应用程序，我仍然需要做 4 件事。

我想简短的回答是：不，除非你有签名或者可以创建一个新的，否则你的运气不好。

希望这可以帮助。

# c# - 仅处理消息队列中的一些消息

> ID：11882671
> 
> 赞同：3
> 
> 时间：2012-08-09T11:43:29.593
> 
> 标签：c#, .net, msmq

我有一个消息队列，我在其中添加了一些电子邮件。我想提取所有电子邮件，检查添加日期和优先级，然后只发送其中一封。我读过这样的消息：

```
private IList<Email> GetEmailsFromQueue(MessageQueue queue)
{
    queue.Formatter = new XmlMessageFormatter(new Type[] { typeof(Email) });
    IList<Email> emails = new List<Email>();
    Cursor cursor = queue.CreateCursor();
    Message m = PeekWithoutTimeout(queue, cursor, PeekAction.Current);
    if (m != null)
    {
        emails.Add((Email)m.Body);
        while ((m = PeekWithoutTimeout(queue, cursor, PeekAction.Next)) != null)
        {
            emails.Add((Email)m.Body);
        }
    }
    return emails;
}

private Message PeekWithoutTimeout(MessageQueue q, Cursor cursor, PeekAction action)
{            
    Message msgFromQueue = null;
    try
    {
        msgFromQueue = q.Peek(new TimeSpan(1), cursor, action);
    }
    catch(MessageQueueException ex)
    {
        if (!ex.Message.ToLower().Contains("timeout"))
        {
            throw;
        }
    }
    return msgFromQueue;
} 
```

Receive 方法将从队列中删除消息。有什么方法可以只读取和删除一些消息吗？

LE：我可能想到的一个解决方案是为每条消息添加一个 id，并使用 ReceiveById

还有其他提示吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T12:38:42.280

> 有什么方法可以只读取和删除一些消息吗？

我从来没有使用过 MSMQ（反正也没有生气），但我认为你应该能够将`Peek`和`ReceiveById`方法结合起来。

因此，您将继续`Peek`在队列中查看哪些消息可用，然后一旦您决定删除消息，请使用`ReceiveById`, 来处理/从队列中删除。

除此之外，也许另一个选择是使用 2 个队列。第一个用于所有入站消息，第二个用于添加您想要保留的消息。

所以回到你的例子（假设我理解你想要实现的目标）

*   第一个是您按照描述处理的入站电子邮件*提取所有电子邮件，检查它们的添加日期及其优先级*
*   第二个是用于您的出站电子邮件，即一旦您拥有要发送的电子邮件，将其推送到出站队列

# keyboard-shortcuts - 在 Visual Studio 2012 中向上/向下移动行快捷方式

> ID：11882672
> 
> 赞同：78
> 
> 时间：2012-08-09T11:43:30.400
> 
> 标签：keyboard-shortcuts, text-editor, visual-studio-2012

在 VS2010 中，我设置了一个快捷方式`Alt`+`Up/Down`来向上或向下移动代码行，就像我在 Java 时代在 Eclipse 中使用的那样。

现在由于电动工具和宏（这是我在 VS2010 中设置此快捷方式的方式）在 VS2012 中不可用，我该如何让它工作？

我看到有人提到 Resharper 可以做到这一点，但是出于对水火的热爱，我在可以做到这一点的命令列表中找不到命令名称。我已经尝试过 ReSharper_MoveUp/MoveDown 并且不会向上/向下移动线条：

![Move_Up 命令没有起到作用](../Images/b4a25d67cf703d5f013d06e916d8697a.png)

这会上下移动文本块。我只想逐行向上或向下，没有花哨的逻辑。前

![是）我有的](../Images/f30aae260e2c71e65a04f47d9cfd7e89.png)

在`ALT`+之后`Up`（当光标位于 WriteLine 行时）我想看到这个：

![行上移一格，在括号内，缩进](../Images/582d037e1f10baeac6c8e8f2b92f8cb7.png)

我看过这些线程：[Visual Studio 中 Eclipse 的 ALT+UP/DOWN (move line) 的等价物是什么？](https://stackoverflow.com/questions/4526715/whats-the-equivalent-for-eclipses-altup-down-move-line-in-visual-studio)，[Visual Studio：热键向上/向下移动和移动通过最近的变化](https://stackoverflow.com/questions/313462/visual-studio-hotkeys-to-move-line-up-down-and-move-through-recent-changes)，但建议的解决方案在 VS2012 中都不起作用。

还有其他想法吗？

**2012 年 11 月 7 日更新：** . 扩展正在赶上 Visual Studio 2012。现在我知道至少有 3 个提供此功能的扩展：

*   [移动线扩展](http://visualstudiogallery.msdn.microsoft.com/b3ee08dc-a28f-4aec-9efa-69215ab5ee52)。链接由[Carl G提供](https://stackoverflow.com/a/12696202/809357)
*   [移动线路扩展](http://visualstudiogallery.msdn.microsoft.com/814eb3c4-7d5e-4217-9711-e20117b20649)并修改到 2010 版本。由[gius](https://stackoverflow.com/a/12530141/809357)
*   [生产力电动工具 2012 年](http://visualstudiogallery.msdn.microsoft.com/3a96a4dc-ba9c-4589-92c5-640e07332afd)。实际上没有尝试过，但是[这篇博客文章](http://blogs.msdn.com/b/visualstudio/archive/2012/11/07/productivity-power-tools-2012.aspx)指出它确实向上/向下移动

**UPD 2012 年 11 月 15 日：**刚刚偶然发现另一个扩展，声称它可以满足此处的要求。虽然没有尝试过：[LineMan Extension](http://visualstudiogallery.msdn.microsoft.com/92ef7620-d7f6-493f-825a-ba52d07d56c2?SRC=VSIDE)

**UPD 2015 年 5 月 10 日**刚刚安装了 VS2015 RC，这已经是内置的： [![向上/向下移动线](../Images/040cb8fc0ff03bca5efb9e2688eceee2.png)](https://i.stack.imgur.com/VhhJt.png)

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2014-07-30T21:00:56.593

对于那些使用 Visual Studio 2013 或更高版本解决此问题的人，该功能已内置于程序中。只需使用`Alt``Up`和`Alt``Down`上下移动光标线或选定的线。

如果您想在*Tools* > *Options* > *Environment* > *Keyboard*中重新绑定它，键是`Edit.MoveSelectedLinesUp`和`Edit.MoveSelectedLinesDown`。您可能需要先从其他现有密钥中删除您的新组合。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-10-02T18:37:50.280

更新：huzzah，[Productivity PowerTools VS2012](http://visualstudiogallery.msdn.microsoft.com/3a96a4dc-ba9c-4589-92c5-640e07332afd)现在可用并提供此功能（以及另一个个人最爱，[`Tools.AddEndTokenAtTheEnd`](https://stackoverflow.com/a/12766988/39396).）

[MoveLine 扩展](http://visualstudiogallery.msdn.microsoft.com/b3ee08dc-a28f-4aec-9efa-69215ab5ee52)（与 VS 2012 兼容；我必须手动重新启动我的 VS 才能看到 VS 键盘快捷键工具中的命令。）

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-08-17T16:43:58.697

安装 ReSharper。

打开工具 -> 选项 -> 环境 -> 键盘（如图所示）

1.  找到“ReSharper.ReSharper_MoveUp”
2.  在“使用新快捷方式：”中选择：“文本编辑器”
3.  单击“按下快捷键：”并按下您的快捷键（例如 Alt+ArrowUp）
4.  按“分配”按钮 与“ReSharper.ReSharper_MoveDown”相同

PS 适用于单行和多行选定的行，但在移动 1 行后删除选择。希望有办法在一次选择中多次移动多行。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-08-20T21:41:51.873

如果你有 Resharper，那么你可以点击`Ctrl`+ `Shift`+ `Alt`+`↑`来移动当前行。或`Ctrl`+ `Shift`+ `Alt`+`↓`向下移动一行。

这适用于 VS 2012 Premium 和 Resharper 7 中的 Visual Studio 键盘方案（准确地说是 7.0.97.60）。

编辑：这映射到“ReSharper.ReSharper_MoveUp”/“MoveDown”命令。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-08-01T05:06:05.560

在 Visual Studio 2017（至少）中，我有以下

[![在此处输入图像描述](../Images/46f307483375afb0ad26987ed8616659.png)](https://i.stack.imgur.com/Ltt1X.png)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-09-21T11:58:19.520

您可以使用[移动线命令](http://visualstudiogallery.msdn.microsoft.com/814eb3c4-7d5e-4217-9711-e20117b20649)扩展。

只需按照公式 349 的评论：

> 我能够按原样使用 2012 年。
> 
> 将包重命名为 .zip 并将所有文件解压缩到一个文件夹中。编辑 extension.vsixmanifest 文件并查找 SupportedProducts XML 节点。将版本="10.0" 更改为版本="11.0"。
> 
> 重新压缩文件夹内容并重命名回 .vsix。效果很好！

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-12-11T20:55:49.443

虽然很多人似乎都在推荐misc。Visual Studio Extensions 和 Resharper，我想指出有一个***本机***热键可以实现这一目标。我来到这个问题试图找到答案，因为我的 Resharper 用他们的 MoveUp 和 MoveDown 版本替换了我的默认热键。

虽然 Resharper 的热键确实可以上下移动东西，但它们*不是*原始海报所要寻找的，也不是我想要的。这些热键移动方法和代码块，*而不是*单独的行。

Visual Studio 有两个热键命令来向上或向下移动您选择的行。这些热键是：

*   Edit.MoveSelectedLinesDown
*   Edit.MoveSelectedLinesUp

但是，我使用的是 Visual Studio 2013，所以我不知道这些是否存在于旧版本中。如果 2012 没有这些热键，那么扩展可能是唯一的解决方案。

无论哪种方式，我在 Visual Studio 的列表中找到确切的热键时遇到了问题，我花了很长时间才找到这些，所以我希望我的解决方案能够帮助遇到与我类似情况的其他人。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-01-02T12:15:54.507

**`Shift`+`Del`然后`Ctrl`+`V`**

`Shift`+`Del`对光标所在的当前行执行**剪切**`Ctrl`（与+相同`X`）操作。

然后您可以使用`Ctrl`+`V`将其粘贴到您喜欢的任何位置。

好处是您不需要选择*完整的当前行*，只需将光标定位在该行上。

使用此快捷方式的一个缺点是您将无法看到线在您眼前*生动地移动（向上或向下）。*

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-01-12T09:19:15.493

ReSharper 的上移和下移快捷方式很智能 - 它不仅会移动当前行（这很容易导致代码损坏），还会在构成方法体的语句列表中上下移动当前语句。这比仅仅移动一行代码要强大得多。

但这并不能帮助您将语句放入`if`块中。在这里，您需要做两件事之一。

首先，将语句移到块*上方*，`if`然后使用`Ctrl`++将其在范围内下推`Shift`。该语句现在将位于块内，您可以使用 up 和 down 在其中移动它。您也可以使用++ +在块外的范围内将其拉起。`Alt``Right``if``Ctrl``Shift``Alt``Left``if`

或者，您可以将文本插入符号放在`if`块的右大括号的外侧，并使用`Ctrl`+ `Shift`+ `Alt`+`Down`将大括号向下移动，跨过以下语句，包括在`if`块内的语句。

这些键可以做的不仅仅是移动单个语句。如果将文本插入符号放在方法或类声明上，`Up`则会`Down`上下移动整个方法或类声明。如果将文本插入符号放在方法的参数列表中，`Left`则会`Right`重新排列各个参数（然后`Alt`+`Enter`可以调用 Change Signature 重构）。

[帮助页面](https://www.jetbrains.com/help/resharper/2016.3/Coding_Assistance__Moving_Code_Elements.html)中的更多详细信息。

# html - 如何在css中给出两种不同的状态？

> ID：11882681
> 
> 赞同：0
> 
> 时间：2012-08-09T11:43:51.277
> 
> 标签：html, css

我在 css 中有这个问题，例如我在 css 中有两个不同的状态

```
#koolbutton .active {

   color: #fff

}

#koolbutton{

  color: #ccc   //not active

} 
```

当我尝试这个 html

```
<button id ="koolbutton" class="active"> 
```

它给了我正常的灰色 koolbutton，而不是白色的活动按钮！谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T11:44:51.170

您需要省略 和 之间的`#koolbutton`空格`.active`。

```
#koolbutton { /*not active*/ }
#koolbutton.active { /*active*/ } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T11:47:52.273

你也可以试试这个；

```
#koolbutton:active {
   color: #fff; //when user click the button
}
#koolbutton{
  color: #ccc; //normal display of button
} 
```

***[这](http://jsfiddle.net/blasteralfred/2wr9P/)***是工作现场演示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T11:55:57.330

问题在于您的第一个选择器：

```
#koolbutton .active 
```

由于 id 和 class 选择器之间有一个空格，因此这适用于每个具有 class 的元素`active`和具有 id 的祖先的元素`koolbutton`。你想要的是选择一个类`active` **和**一个 id 的每个元素`koolbutton`：

```
#koolbutton.active 
```

[尽管由于CSS 特定性规则](http://www.htmldog.com/guides/cssadvanced/specificity/)，选择器的顺序并不重要，但在创建更易于维护的 CSS 方面，我建议您首先放置默认样式，然后是该样式的任何变体：

```
#koolbutton { /* default styles */ }
#koolbutton.active { /* .active styles */ }
#koolbutton.foo { /* Another class styles */ } 
```

如果您真的想要设置活动/焦点状态的样式，您可能应该查看`:focus`和`:active`伪选择器。

# google-analytics - GA 仪表板中未跟踪自定义变量

> ID：11882690
> 
> 赞同：0
> 
> 时间：2012-08-09T11:44:14.877
> 
> 标签：google-analytics

我在我的 javascript 中使用了所有页面都可以访问的自定义变量，下面是我的 GA 跟踪代码，紧接在唯一页面 index.html 中的结束 head 标记之前。

```
 var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-33766550-1']);
        var currentCountry = 'N/A';
        if (localStorage.getItem('country')) {
            currentCountry = localStorage.getItem('country');
        }
        _gaq.push(['_setCustomVar', 1, 'Country', currentCountry]);
        _gaq.push(['_trackPageview']);

        (function () {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })(); 
```

GA 跟踪对我来说工作正常。到目前为止，我只能跟踪一个自定义变量，该变量已在 head 部分的主要跟踪代码中定义，称为 country（如上所示）。

我在 javascript 文件中使用的其余自定义变量（这个 js 始终可以在 index.html 中访问）似乎根本没有被调用。该 js 文件包含不同自定义变量的不同 _gaq.push 命令，如下所示。

_gaq.push(['_setCustomVar', 5, 'Page', 'app/index.html#portfolioDetailPage']);

问题：与我在主跟踪代码中传递的“国家”自定义变量不同，为什么我无法在 GA 中跟踪这些自定义变量？我是否需要在每个 _gaq.push 之后传递 _gaq.push(['_trackPageview']) 以进行自定义变量声明？

任何人都可以请建议，我一团糟:(

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T01:40:36.997

您缺少范围参数。仔细检查签名`_setCustomVar`。

[https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApiBasicConfiguration#_gat.GA_Tracker_._setCustomVar](https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApiBasicConfiguration#_gat.GA_Tracker_._setCustomVar)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T14:28:27.417

谢谢爱德华多。我可能打错了我实际上使用了正确的代码。我使用自定义变量进行跟踪，而在我的场景中，事件跟踪更有意义。

if(_gaq) _gaq.push(['_trackEvent', 'Page', 'Home_Page_Landing', 'app/index.html']);

谢谢

# python - 为“assertEqual”和“assertNotEqual”编写测试：我应该打扰吗？

> ID：11882691
> 
> 赞同：2
> 
> 时间：2012-08-09T11:44:16.733
> 
> 标签：python, unit-testing, tdd

我有一个`Coordinate`类，它有一个`add(Coordinate)`方法。在为此类编写单元测试时，我对`assertEqual`结果进行了测试：

```
 a = Coordinate(1,2,3)
b = Coordinate(5,6,7)

result = a.add(b) 

assertEqual(result.x, 6)
assertEqual(result.y, 8)
assertEqual(result.z,10) 
```

我可以很容易地“伪造”这个：

```
 def add(self, other):
    return Coordinate(6,8,10) 
```

这是测试失败的最简单的解决方案。下一步是编写第二个测试，以防止我以这种方式伪造它。我可以：

*   `assertEqual`用不同的数字编写另一个测试（所以假装`Coordinate(6,8,10)`不通过，或者
*   使用两个不同的输入编写`assertNotEqual`测试，确保结果不是`6,8,10`.

如果我编写一个`assertEquals`测试，我会得到两个看起来非常非常相似的测试。这是一个问题吗？如果我在项目中看到类似的代码，我会很想重构它。我是否也应该为测试代码这样做 - 如果是这样，这是否意味着**每**对测试最终都会被重构？

如果我写一个`assertNotEqual`，测试只是测试“假结果”——我很确定这永远不会来自算法错误。本质上，一旦我编写了测试，就停止伪造结果，这样两个测试都通过了，`assertNotEquals`测试*可以安全地删除*，我**仍然**对代码有信心——所以我会编写测试，修复假的，删除测试，这似乎很愚蠢。

在这种情况下我应该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T18:09:15.300

另一个不同数字的 assertEqual 测试就足够了。如果可能，请采用“边界”或不常见的情况，例如：

```
a = Coordinate(1,2,3)
b = Coordinate(-5,-6,-7)
... 
```

AssertNotEqual 测试对于 IMO 读者来说是荒谬且不直观的。

无论如何，我不会太担心这种测试。作为读者，很明显，编写它们的开发人员只是想测试几个案例，而想要重构它们需要一个真正的重构极端分子。我的意思是，它只有 2 次测试，几乎没有重复，意图很明显，而且当对象发生变化时，你不必重写 300 行代码......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T11:51:45.860

正如您所描述的那样，我不会太担心能够“假通过”测试-始终可以`if`在您的方法中编写一个复杂的语句以使您的每个测试用例都通过。相反，请查看您的方法中涉及的逻辑，`add`并确保您的测试用例涵盖所有代码分支——我认为这应该足够好了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T11:52:12.667

根据测试代码使用的特定情况编写测试来防止有人恶意编写代码以伪造测试代码是不可能的。所以你不应该尝试。

当我说“不可能”时，我的意思不仅仅是“非常难”，它可能是打破正式系统的[骗子悖论的一个实例。](http://en.wikipedia.org/wiki/Liar_paradox)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T05:48:06.503

注意：为了简单起见，我将 Coordinate 更改为 Int。下面的语法也是组成的..所以不会执行。但这应该让我明白我的意思

```
testAdd()
  assertThat(2.Add(2), isEqualTo(4)) 
```

然后，您可以通过始终使 Add return 4 来伪造这一点。在三角测量旁边（通过改变某些参数来驱动通用代码）。

```
testAdd()
  assertThat(2.Add(2), isEqualTo(4))
  assertThat(3.Add(5), isEqualTo(8)) 
```

现在你需要做一些实际的工作。一旦它是绿色的，你可以让这两个测试保持不变，或者你可以删除简单/琐碎的测试——只要它不会让你的信心下降。如果重复困扰您，您可以查看您的测试运行程序是否支持“参数化测试”

```
[2,2,4]
[3,5,8]
testAdd(operand1, operand2, expectedResult)
  assertThat(operand1.Add(operand2), isEqualTo(expectedResult)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T12:47:35.277

Coordinate.Add() 方法是什么样的？

似乎*该*方法应该处理如何添加（没有必要伪造它），然后您需要做的就是：

```
# In your test setUp code
testCoord = Coordinate(6, 8, 10)  # Explicitly setting the value you expect the test to return.
addCoord1 = Coordinate(1, 2, 3)
addCoord2 = Coordinate(5, 6, 7)

# The test
addCoord1.add(addCoord2)
assertEqual(testCoord, addCoord1, "Testing addition of coordinates using add() method.") 
```

如果我错了，请纠正我，但是您使用的是单元测试框架吗？我个人会将对象创建放在测试用例的 setUp 中`unittest`。

# javascript - 单击时将表格单元格从跨度更改为输入

> ID：11882693
> 
> 赞同：2
> 
> 时间：2012-08-09T11:44:27.970
> 
> 标签：javascript, jquery

我正在尝试将表格单元格从“跨度”类型更改为单击时的“输入”，然后在模糊时返回到“跨度”，但它不按此处给出的那样工作：

[使用 JQuery 将表格单元格转换为文本框](https://stackoverflow.com/questions/6445223/convert-table-cells-to-text-boxes-with-jquery)

这是javascript代码：

```
 <script type="text/javascript">
        $(document).ready(function() {
            $('#assets').click(function () {
                $('tr td:nth-child(3)').each(function () {
                    var html = $(this).html();
                    var input = $('<input type="text" />');
                    input.val(html);
                    $(this).html(input);
                });
            });
        });
    </script> 
```

这是文档正文

```
<body>
    <div id="content">
        <table id="assets">
            <tr>
                <td class="asset_name"><span>Name</span></td>
                <td class="asset_value"><span>ast1</span></td>
                <td class="asset_name"><span>Location</span></td>
                <td class="asset_value"><span>Loc-1</span></td>
            </tr>
            <tr>
                <td class="asset_name"><span>Name</span></td>
                <td class="asset_value"><span>ast2</span></td>
                <td class="asset_name"><span>Location</span></td>
                <td class="asset_value"><span>Loc-2</span></td>
            </tr>
        </table>​
    </div>
</body> 
```

使用 jQuery 1.7.2

这里有什么问题？请帮忙 ！

谢谢！！

更新：只需要更改具有 class='asset_value' 的单元格，并且一次只需要一个单元格，而不是全部。此外，它应该变回模糊范围。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T12:12:49.850

尝试这个 ：

```
$(document).ready(function() {
    $('#assets').on('click', 'span', function() {
        var $e = $(this).parent();
        if($e.attr('class') === 'asset_value') {
            var val = $(this).html();
            $e.html('<input type="text" value="'+val+'" />');
            var $newE = $e.find('input');
            $newE.focus();
        }
        $newE.on('blur', function() {
            $(this).parent().html('<span>'+$(this).val()+'</span>');
        });
    });
});​ 
```

这将在单击时更改单个单元格并在模糊时恢复为跨度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T12:01:12.987

希望这会对您有所帮助：http: [//jsfiddle.net/RBGME/19/](http://jsfiddle.net/RBGME/19/)

HTML：

```
<div id="content">
    <table id="assets">
        <tr>
            <td class="asset_name"><span>Name</span></td>
            <td class="asset_value"><span>ast1</span></td>
            <td class="asset_name"><span>Location</span></td>
            <td class="asset_value"><span>Loc-1</span></td>
        </tr>
        <tr>
            <td class="asset_name"><span>Name</span></td>
            <td class="asset_value"><span>ast2</span></td>
            <td class="asset_name"><span>Location</span></td>
            <td class="asset_value"><span>Loc-2</span></td>
        </tr>
    </table>
</div> 
```

示例 CSS：

```
td { border: 1px solid #aaa; height: 30px; text-align: center; width: 100px; }
input, input:hover, input:focus { width: 100px; height: 30px; box-sizing: border-box; outline: none; background-color: #eee; } 
```

jQuery：

```
$(document).ready(function() {
    $('#assets tr td:nth-child(3)').click(function () {
        var html = $(this).html();
        var input = $('<input type="text" />');
        input.val(html);
        $(this).replaceWith(input);
    });
});? 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T11:48:08.543

您可以使用该`replaceWith()`方法，该`html()`方法清空所选元素并将html标记附加到它，尝试以下操作：

```
 $(document).ready(function() {
        $('#assets').click(function () {
            $('tr td:nth-child(3)').each(function () {
                var html = $(this).html();
                var input = $('<input type="text" />');
                input.val(html);
                $(this).replaceWith(input);
            });
        });
    }); 
```

[演示](http://jsfiddle.net/RBGME/5/)

* * *

由于该`replaceWith`方法改变了标记的结构，您应该为生成的标记委托事件，您可以使用该`on`方法，尝​​试以下操作：

```
 $(document).ready(function() {
        $(document).on('click', '#assets td', function () {
                var html = $(this).text()
                var input = $('<input type="text" />');
                input.val(html);
                $(this).replaceWith(input);
                $('#assets input').focus();
        });

        $(document).on('blur', '#assets input', function(){
            $(this).replaceWith('<td class="asset_value"><span>'+this.value+'</span></td>')
        })
    }); 
```

[演示](http://jsfiddle.net/RBGME/34/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T11:50:21.723

我认为你是在正确的方式试试这个：

```
$(document).ready(function() {
   $('#assets').click(function () {
       $(this).find("span").replaceWith(input);
   });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T11:52:26.613

```
$('td').click(function(){
$(this).children('span').html('<input type="text">');
}) 
```

# iphone - 在 iOS 中创建 JsonString

> ID：11882696
> 
> 赞同：1
> 
> 时间：2012-08-09T11:44:38.233
> 
> 标签：iphone, objective-c, ios, xcode

我是 iOS 新手。我创建了一个`JSON NSDictionary`这样的：

```
NSArray *keys = [NSArray arrayWithObjects:@"User", @"Password", nil];
NSArray *objects = [NSArray arrayWithObjects:@"Ali", @"2020", nil];
NSDictionary *jsonDictionary = [NSDictionary dictionaryWithObjects:objects forKeys:keys]; 
```

然后我可以`NSString`通过两种机制将其转换为：

1)

```
NSError *error; 
NSData *jsonData = [NSJSONSerialization dataWithJSONObject:jsonDictionary options:0 error:&error];

NSString *jsonString = nil;
if (! jsonData) {
     NSLog(@"Got an error: %@", error);
} else {
     jsonString = [[NSString alloc] initWithData:jsonData encoding:NSUTF8StringEncoding];
} 
```

2)

```
NSString *jsonString = [jsonDictionary JSONRepresentation]; 
```

在第二种方式中，我得到了这个`warning`：

```
Instance method '-JSONRepresentation' not found (return type defaults to 'id') 
```

但是当我运行该项目时，两种机制都可以正常工作：

```
NSLog(@"Val of json parse obj is %@",jsonString); 
```

您知道如何以第二种方式删除警告吗？

**我的主要目标是`POST`使用 RESTful Web 服务将此 json 字符串传输到外部数据库。基本上考虑到我的主要目标，哪种方式更好？**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-09T12:44:39.063

`NSJSONSerialization`只要您的“目标受众”是 iOS5+，您就应该使用它，因为它更快并且直接与 iOS SDK 一起提供

要将数据发布到您的 Web 服务，您需要按照以下方式创建请求...

```
NSDictionary * postDictionary = [NSDictionary dictionaryWithObjects:[NSArray arrayWithObjects:@"value1", @"value2", nil]
                                                                  forKeys:[NSArray arrayWithObjects:@"key1", @"key2", nil]];

NSError * error = nil;
NSData * jsonData = [NSJSONSerialization dataWithJSONObject:postDictionary options:NSJSONReadingMutableContainers error:&error];

NSMutableURLRequest * urlRequest = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"your_webservice_post_url"]];
[urlRequest setValue:@"application/json" forHTTPHeaderField:@"Accept"];
[urlRequest setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
[urlRequest setHTTPMethod:@"POST"];
[urlRequest setHTTPBody:jsonData];

NSURLConnection * myConnection = [[NSURLConnection alloc] initWithRequest:urlRequest delegate:self startImmediately:YES]; 
```

请阅读[NSURLConnectionDelegate](https://developer.apple.com/library/ios/documentation/Foundation/Reference/NSURLConnectionDelegate_Protocol/) 协议。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T11:59:34.433

**对于 iOS 5.0 >**：

像这样使用[NSJSONSerialization](https://developer.apple.com/library/ios/documentation/Foundation/Reference/NSJSONSerialization_Class/index.html)：

```
NSError *error;
NSData *jsonData = [NSJSONSerialization dataWithJSONObject:dictionary options:NSJSONWritingPrettyPrinted error:&error];
NSString *resultAsString = [[NSString alloc] initWithData:jsonData encoding:NSUTF8StringEncoding];
 NSLog(@"jsonData as string:\n%@ Error:%@", resultAsString,error); 
```

**对于 < iOS 5**：

使用[json-framework](https://github.com/stig/json-framework/)第三方库，它使用 category`NSDictionary`来提供 json 字符串：

```
 NSString *jsonString = [dictionary JSONRepresentation];

 //with options
 NSString *jsonString = [dictionary JSONStringWithOptions:JKSerializeOptionNone error:nil] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T11:47:19.970

这将帮助您...[使用 SBJson 将 NSDictionary 转换为 JSON](http://www.lifeofatechdude.com/2011/06/convert-nsdictionary-to-json.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T11:59:35.777

用这种方式希望对你有帮助

```
 NSArray *keys = [NSArray arrayWithObjects:@"User", @"Password", nil];
 NSArray *objects = [NSArray arrayWithObjects:@"Ali", @"2020", nil];
 NSDictionary *jsonDictionary = [NSDictionary dictionaryWithObjects:objects forKeys:keys];

 NSError *error = nil;
 // NSError *error; 
 NSData *jsonData = [NSJSONSerialization dataWithJSONObject:jsonDictionary options:0 error:&error];

 id result = [NSJSONSerialization JSONObjectWithData:jsonData options:NSJSONReadingMutableContainers error:&error];

 NSLog(@"\n\n\n id for json==%@ \n\n\n\n\n",result); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-26T17:07:44.453

```
JSON DEFAULT METHOD......

+(NSDictionary *)stringWithUrl:(NSURL *)url postData:(NSData *)postData httpMethod:(NSString *)method { 

NSDictionary *returnResponse=[[NSDictionary alloc]init];

@try {
 NSMutableURLRequest *urlRequest = [NSMutableURLRequest requestWithURL:url cachePolicy:NSURLRequestReloadIgnoringCacheData timeoutInterval:180]; [urlRequest setHTTPMethod:method];

if(postData != nil)
{
    [urlRequest setHTTPBody:postData];
}

[urlRequest setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
[urlRequest setValue:@"application/json" forHTTPHeaderField:@"Accept"];
[urlRequest setValue:@"text/html" forHTTPHeaderField:@"Accept"];

NSData *urlData;
NSURLResponse *response;
NSError *error;
urlData = [NSURLConnection sendSynchronousRequest:urlRequest
                                returningResponse:&response
                                            error:&error];
returnResponse = [NSJSONSerialization
                  JSONObjectWithData:urlData
                  options:kNilOptions
                  error:&error];
} @catch (NSException *exception) { returnResponse=nil; } @finally { return returnResponse; } }

Return Method :

+(NSDictionary )methodName:(NSString)string { 
NSDictionary *returnResponse; NSData *postData = [NSData dataWithBytes:[string UTF8String] length:[string length]]; NSString *urlString = @"https//:..url...."; returnResponse=[self stringWithUrl:[NSURL URLWithString:urlString] postData:postData httpMethod:@"POST"];
return returnResponse; 
} 
```

# java - 实例属性的匿名内部类声明，使用另一个实例属性

> ID：11882704
> 
> 赞同：2
> 
> 时间：2012-08-09T11:45:16.850
> 
> 标签：java, spring, guava, scjp

在方法内部使用匿名内部类时，当我们要在匿名内部类内部使用方法参数时，必须将其标记为final。这里有一些细节： [为什么我们在匿名内部类中使用 final 关键字？](https://stackoverflow.com/questions/7076773/why-do-we-use-final-keyword-with-anonymous-inner-classes)

但是当使用类属性而不是方法本地属性时会发生什么？

简单用例：具有 Guava 功能的 Spring 服务：

```
protected LovValueDAO lovValueDAO;

private final Function<String,LovValue> LOV_ID_TO_LOV = new Function<String,LovValue>() {
    @Override
    public LovValue apply(String input) {
        return lovValueDAO.findById(input);
    }
};

@Required
public void setLovValueDAO(LovValueDAO lovValueDAO) {
    this.lovValueDAO = lovValueDAO;
} 
```

声明这样的 Guava 函数是否安全？根据我的测试，它工作正常，但引擎盖后面会发生什么？

初始化顺序为：

*   函数已初始化
*   lovValueDAO 由 spring 通过 setter 注入

因此我猜想，当函数首先被初始化时，函数内部使用的 lovValueDAO 属性将不是引用的副本，而是引用本身，因为一旦真正注入了 DAO，它就可以正常工作。

我对么？

* * *

如果我使用这段代码会发生什么：

```
private final Function<String,LovValue> LOV_ID_TO_LOV = new Function<String,LovValue>() {
    @Override
    public LovValue apply(String input) {
        return lovValueDAO = null;
    }
}; 
```

调用函数后，我的外部属性`protected LovValueDAO lovValueDAO;`会设置为 null 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T12:03:13.123

内部类包含`this`对其*封闭实例*的隐式引用（即，在其创建的上下文中其声明类的实例），因此对声明类的字段的访问被视为该引用的正常字段访问。

因此，您的内部类将看到该字段的当前值，并且也可以更改它。

# java - Google Go for Java 平台？

> ID：11882706
> 
> 赞同：11
> 
> 时间：2012-08-09T11:45:20.170
> 
> 标签：java, go, jvm, jvm-languages

JVM 提供了出色的性能——这是一方面。另一方面，Golang 听起来像是一种新的范式并且非常高效。如果我们能够将两个世界中最好的东西结合起来——JVM 性能和 golang 生产力——我们可以获得很多好处。有谁知道任何在java中提供golang实现的项目？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T11:49:57.963

快速搜索想出了

[http://code.google.com/p/jgo/](http://code.google.com/p/jgo/)

此链接表明这是主要或唯一的努力。

[http://en.wikipedia.org/wiki/List_of_JVM_languages](http://en.wikipedia.org/wiki/List_of_JVM_languages)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-09T19:53:09.043

对 Go 进行良好的 JVM 实现可能很困难。Go 的创造者之一[Rob Pike](http://en.wikipedia.org/wiki/Rob_Pike)[在 Changelog 播客](http://thechangelog.com/)的第 0.0.3 集中谈到了这一点：

> [时间码 17:05] 例如，使用 JVM 实现 Go 的接口模型非常困难：您可能必须添加一个字节码来处理一些类型的东西。因此，对于其中一些现有系统 [(JVM 和 CLR)]，Go 将如何与它们一起运行并不是很明显 […]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-11T19:49:09.187

您应该查看 JGO 网站：http: [//jgo.herokuapp.com/](http://jgo.herokuapp.com/)

JGO 文档：http: [//jgo.herokuapp.com/api/](http://jgo.herokuapp.com/api/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-05T09:17:50.613

另一条路线可能是使用提供 Go 最重要特性的 JVM 库，在我看来，这些特性可以体验到在 JVM 线程上多路复用的轻量级 Go 例程，以及用于通信和同步的通道。

Parallel Universe中有一个这样的库[Quasar](http://docs.paralleluniverse.co/quasar/) （例如，参见比较 Quasar 和 Go[的博客文章）。](http://blog.paralleluniverse.co/2016/05/03/skynet-go-quasar/)此外，它与[Kotlin](https://kotlinlang.org/)配合得很好，Kotlin现在作为官方支持的 Android 语言越来越流行，并且提供比 Java 更紧凑（高效？）的语法。

# jquery - 是否可以在切换时显示一个 div 并隐藏所有其他 div ..？

> ID：11882708
> 
> 赞同：2
> 
> 时间：2012-08-09T11:45:29.363
> 
> 标签：jquery

我有三个标题，三个标题都有一些描述。
当我点击第一个标题时，我可以看到它的描述。
当我点击第二个标题时，我可以看到它的描述。
我的代码在这里：
js：

```
<script type="text/javascript">
jQuery(document).ready(function() {
jQuery(".content").hide();
//toggle the componenet with class msg_body
jQuery(".heading").click(function()
{
jQuery(this).next(".content").slideToggle(500);
});
});
</script> 
```

CSS：

```
.layer1 {
margin: 0;
padding: 0;
width: 500px;
}

.heading {
margin: 1px;
color: #fff;
padding: 3px 10px;
cursor: pointer;
position: relative;
background-color:#c30;
}
.content {
padding: 5px 10px;
background-color:#fafafa;
}
p { padding: 5px 0; } 
```

html代码：

```
<div class="layer1">
    <p class="heading">Header-1 </p>
    <div class="content">Lorem ipsum dolor sit amet, consectetuer adipiscing elit orem ipsum dolor sit amet, consectetuer adipiscing elit</div>
    <p class="heading">Header-2</p>
    <div class="content">Lorem ipsum dolor sit amet, consectetuer adipiscing elit orem ipsum dolor sit amet, consectetuer adipiscing elit</div>
    <p class="heading">Header-3</p>
    <div class="content">Lorem ipsum dolor sit amet, consectetuer adipiscing elit orem ipsum dolor sit amet, consectetuer adipiscing elit</div>
</div> 
```

现在我希望当我单击一个 1 标题时，其他描述必须隐藏，并且只有第一个标题的描述可见。
这该怎么做..？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T11:48:52.603

隐藏`.content`所选的所有兄弟姐妹`.content`：

```
jQuery(".heading").click(function() {
    jQuery(this)
          .next(".content").slideToggle(500)
          .siblings(".content").slideUp(500);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T11:48:39.743

这不起作用吗？

```
jQuery(document).ready(function() {
    jQuery(".content").hide();
    //toggle the componenet with class msg_body
    jQuery(".heading").click(function() {
        jQuery(".content").slideUp();
        jQuery(this).next(".content").slideDown(500);
      });
});​ 
```

[http://jsfiddle.net/cUyhe/](http://jsfiddle.net/cUyhe/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T11:48:45.890

```
jQuery(document).ready(function() {
    jQuery(".content").hide();
    //toggle the componenet with class msg_body
    jQuery(".heading").click(function() {
        jQuery(".content").not(jQuery(this).next(".content")).slideUp(500);
        jQuery(this).next(".content").slideToggle(500);
    });
});​ 
```

[小提琴](http://jsfiddle.net/UxcwU/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T11:49:45.303

```
jQuery(document).ready(function() { 
   //toggle the componenet with class msg_body 
   jQuery(".heading").click(function() 
   {
      jQuery(this).parent().find(".opened").slideToggle(500, function(){
         $(this).removeClass('opened');
      });
      jQuery(this).next(".content").slideToggle(500, function(){
         $(this).addClass('opened');
      }); 
   }); 
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-09T11:51:00.820

在点击事件中试试这个..

```
jQuery(".heading").click(function()
    {
        jQuery(".content").hide();
        jQuery(this).next(".content").slideToggle(500);
    }); 
```

希望对你有用..

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-09T11:51:43.103

你必须识别它才能这样做。您可以通过创建具有另一个名称的克隆来使用类来识别，而不是可以按类获取标签并隐藏而不隐藏所有内容。

# specflow - Specflow 稳定性

> ID：11882712
> 
> 赞同：2
> 
> 时间：2012-08-09T11:46:13.043
> 
> 标签：specflow

随着我正在从事的项目越来越多，测试的数量也在增加。但是，就我而言，当正在测试的场景数量增加时，Specflow 的稳定性似乎正在下降。

让我试着澄清一下：例如，当我在 Visual Studio 2010 中分别运行一些测试列表（包含 5 到 10 个场景）时，所有场景都通过了。但是，当我一次运行所有测试列表时（总共有 70 个场景），某些场景失败，在“单独的测试列表运行”中通过了。当我立即再次运行“总测试运行”时，不同的场景失败，或者有时所有文件都通过了。换句话说，哪个场景的失败是完全随机的。

当要测试的场景数量增加时，是否有人熟悉这个问题和/或可以告诉我 Specflow 的（看起来是什么）稳定性？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T11:51:51.730

我认为这根本不是规范流问题，我们运行了大约 800 次测试并且每次都通过了。我期望的是您的测试之间会出现串扰。IE 您的测试失败，因为它们正在共享您不期望的数据。

这是一个很常见的问题。

# ruby-on-rails - FFmpeg 与 Ruby 联动

> ID：11882713
> 
> 赞同：1
> 
> 时间：2012-08-09T11:46:16.100
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ffmpeg

我收到此错误：

```
Failed encoding. Errors: no output file created. Full output: dyld: Library not loaded: /usr/local/lib/libogg.0.dylib
 Referenced from: /usr/local/bin/ffmpeg
 Reason: Incompatible library version: ffmpeg requires version 9.0.0 or later, but libogg.0.dylib provides version 6.0.0 
```

我已经通过 brew 安装了 ffmpeg，并安装了“ffmpeg”gem 和“streamio-ffmpeg”gem。

跑步：

```
otool -L /usr/local/lib/libogg.0.dylib 
```

给我这个输出：

```
/usr/local/lib/libogg.0.dylib:
    /usr/local/lib/libogg.0.dylib (compatibility version 9.0.0, current version 9.0.0)
    /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 159.1.0) 
```

我在其中使用 ffmpeg 的文件如下所示：

```
# lib/carrierwave/ffmpeg.rb
require 'streamio-ffmpeg'
module CarrierWave
  module FFMPEG
    module ClassMethods
      def resample( bitrate )
        process :resample => bitrate
      end
    end

    def resample( bitrate )
      directory = File.dirname( current_path )
      tmpfile   = File.join( directory, "tmpfile" )

      FileUtils.mv( current_path, tmpfile )

      file = ::FFMPEG::Movie.new(tmpfile)
      file.transcode( current_path, :audio_bitrate => bitrate)

      File.delete( tmpfile )
    end
  end
end 
```

# .net - 使用 LINQ 找到的 XElement 删除节点

> ID：11882714
> 
> 赞同：0
> 
> 时间：2012-08-09T11:46:26.520
> 
> 标签：.net, xml, vb.net, linq, linq-to-xml

我有一个 XElement 对象，它是通过从 word 文档中解析 XML 创建的。我想要做的是找到并删除我试图使用 LINQ 找到的特定节点。

XML 有几百行长，所以我不想在这里发布整个内容，我只显示前 20 行：

```
<w:body xmlns:w="http://schemas.openxmlformats.org/wordprocessingml/2006/main">
    <w:p w:rsidR="00CB3A3E" w:rsidP="00257CF7" w:rsidRDefault="008C1E91">
        <w:pPr>
            <w:pStyle w:val="Heading-Title" />
        </w:pPr>
        <w:r>
            <w:t>References</w:t>
        </w:r>
    </w:p>
    <w:sdt>
        <w:sdtPr>
            <w:alias w:val="Client" />
            <w:tag w:val="ClientName" />
            <w:id w:val="-1008363323" />
            <w:lock w:val="contentLocked" />
            <w:placeholder>
                <w:docPart w:val="DefaultPlaceholder_1082065158" />
            </w:placeholder>
            <w:dataBinding w:xpath="/project[1]/ClientName[3]" w:storeItemID="{1BDA6E50-A0B2-47FF-9929-1F045B6CF8AD}" />
            <w:text /> 
```

我要删除的节点是 : `<w:t>References</w:t>`。我目前遇到“`Sequence contains no elements"`异常。newBody 是 XElement。

```
newBody.Descendants.Where(Function(e) e.Name.Equals("<w:t>") AndAlso e.Value.Equals("References")).First().Remove() 
```

正如我所说，我得到了上面提到的异常。这是我应该尝试到达该节点的方式吗？有没有更好的办法？为什么我的查询没有得到指定的节点？非常感谢任何关于如何更好地做到这一点的建议，当谈到 .net 和 LINQ 本身中的 XML 遍历时，我仍在尝试学习最佳实践。非常感谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:53:26.660

我在这里做了一点猜测，因为这是 VB.net，而且我来自 C# 背景，但 LINQ 部分看起来是一样的。我认为你的问题出在`Name.Equals("<w:t>")`零件上。`Name`不是字符串而是 an[`XName`](http://msdn.microsoft.com/en-us/library/system.xml.linq.xname.aspx)并且它还有更多属性。您很可能需要查看`Name.LocalName.Equals("t")`：

```
.Where(Function(e) e.Name.LocalName.Equals("t")) AndAlso e.Value.Equals("References")) 
```

至于问题的第二部分，如果您只想删除一个节点，那么导航到该特定节点很可能比制定只有一个节点匹配的文档全局规则更有效。我对您的问题的处理方式更像是这样：

```
newBody.Element("p").Element("r").Element("t").Remove(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T13:28:34.497

您已经有了一个忽略命名空间的有效解决方案，但 LINQ to XML 支持访问命名空间中的元素，所以我将向您展示，您有两个选择：

```
Dim w As XNamespace = "http://schemas.openxmlformats.org/wordprocessingml/2006/main"
    newBody.Descendants(w + "t").First(Function(t) t.Value = "References").Remove()

 ' In Imports section
    Imports <xmlns:w="http://schemas.openxmlformats.org/wordprocessingml/2006/main">
    ' In code
    newBody...<w:t>.First(Function(t) t.Value = "References").Remove() 
```

# iphone - Twitter Widget忽略iPhone上的字体大小css

> ID：11882716
> 
> 赞同：0
> 
> 时间：2012-08-09T11:46:27.297
> 
> 标签：iphone, css, ios, twitter, widget

我的网站使用 Twitter 小部件来抓取推文，并使用“twtr-tweet-text”类来更改字体系列和大小。

不幸的是，在我的 iPhone（不是 iPad）上，它似乎完全忽略了字体大小，导致它与我的页脚重叠。仔细观察，似乎字体大小适合“回复转发最喜欢的”部分，但不适用于实际的推文。

[http://jshjohnson.com](http://jshjohnson.com)

我将如何阻止这种情况发生？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T13:31:07.737

twitter 小部件具有在链接的 widgit.css 中设置字体大小的代码。我不知道您是否有权更改该文件中的 CSS，但您可以通过使用自己的样式定位 div 来获得比 widget.css 更具体的内容。你可能有一个丑陋的 css 规则，但它是一个快速而肮脏的修复。

![在此处输入图像描述](../Images/c8979c23dc4d6320d19786f497cdcd9d.png)

如果您可以比 widget.css 更具体地定位它，则应应用该规则。如果我的目标是您想到的文本，以下可能会起作用。

```
div.twtr-tweet-wrap p {
    font-size: .75em; /* set whatever font size you want */
    ...
} 
```

无论如何，你有这个想法，只要找到你想要的 div 并得到具体的。您可以查看 twitter css 在[**这里**](http://widgets.twimg.com/j/2/widget.css)做什么。如果您真的想要，您可以尝试匹配规则并将其设置`font-size`为`inherit`，因此只有一个 font-size 规则具有特定大小，以方便将来的调整。

# python - 在python中查找最后一个午夜时间戳

> ID：11882718
> 
> 赞同：3
> 
> 时间：2012-08-09T11:46:47.470
> 
> 标签：python, python-2.7

我想找到最后一个午夜时间戳（只有输入是当前时间戳）。什么是最好的方法？

我正在为全球移动应用程序编写 python 脚本。具有当前时间戳的用户请求，并且在服务器端我想在不影响时区参数的情况下找到用户的最后一个午夜时间戳。

我搜索了一下，有解决办法

```
import time
etime = int(time.time())
midnight = (etime - (etime % 86400)) + time.altzon 
```

它对我有用。但我对`time.altzon`功能感到困惑，它是否会给不同时区的用户带来任何问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T12:51:06.757

要获取客户端（移动设备）的午夜时间戳，您需要知道客户端的时区。

```
from datetime import datetime
import pytz # pip install pytz

fmt = '%Y-%m-%d %H:%M:%S %Z%z'
tz = pytz.timezone("America/New_York") # supply client's timezone here

# Get correct date for the midnight using given timezone.

# due to we are interested only in midnight we can:

# 1\. ignore ambiguity when local time repeats itself during DST change e.g.,
# 2012-04-01 02:30:00 EST+1100 and
# 2012-04-01 02:30:00 EST+1000
# otherwise we should have started with UTC time

# 2\. rely on .now(tz) to choose timezone correctly (dst/no dst)
now = datetime.now(tz)
print(now.strftime(fmt))

# Get midnight in the correct timezone (taking into account DST)
midnight = tz.localize(now.replace(hour=0, minute=0, second=0, microsecond=0, tzinfo=None),
                       is_dst=None)
print(midnight.strftime(fmt))

# Convert to UTC (no need to call `tz.normalize()` due to UTC has no DST transitions)
dt = midnight.astimezone(pytz.utc)
print(dt.strftime(fmt))

# Get POSIX timestamp
print((dt - datetime(1970,1,1, tzinfo=pytz.utc)).total_seconds()) 
```

### 输出

```
2012-08-09 08:46:29 EDT-0400
2012-08-09 00:00:00 EDT-0400
2012-08-09 04:00:00 UTC+0000
1344484800.0 
```

注意：在我的机器上[@phihag 的答案](https://stackoverflow.com/a/11882798/4279)与上面`1344470400.0`的不同（我的机器不在纽约）。

# c# - 编程语言错误还是编译器错误？

> ID：11882723
> 
> 赞同：3
> 
> 时间：2012-08-09T11:47:21.187
> 
> 标签：c#, compiler-construction

最近，我看了一些关于 C# 异步错误的视频，并与朋友进行了讨论。

说编程语言有错误是否正确？还是只能说编译器有错误？

两者有什么区别？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T11:49:10.477

如果由于某种原因（例如，通过 Java 中的声明类型的表达式调用静态方法的能力，IMO）没有很好地设计该语言，则该语言存在*设计缺陷。*

如果规范相互矛盾或没有表达作者想要表达的内容，则该语言存在*错误（IMO）。*（例如，我相信 C# 语言规范中围绕类型推断存在一些错误。）

如果编译器未能正确实现规范，则会出现错误。

编辑：我发现了一个规范错误的例子，它比类型推断更简单......

在 C# 4 规范中，第 7.3.1 节指出：“除了赋值运算符，所有二元运算符都是左关联的”。

第 7.13 节指出：“空合并运算符是右结合的”

由于空合并运算符是非赋值二元运算符，因此这是一个矛盾，因此（IMO）是一个错误。（在[这个 Stack Overflow 问题](https://stackoverflow.com/questions/6238074)中也提到了这一点。）

空合并运算符还提供了我在回答该问题时发现[的编译器错误的示例...](https://stackoverflow.com/questions/6256847)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T11:49:39.837

也可以是。语言和编译器都可能有错误。语言错误是无论使用何种编译器都会出现的错误，而编译器错误只会出现在特定的编译器中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T11:51:27.450

实际上，错误被认为是规范和实际实现的差异。

所以是的，从这个意义上说，两者都可能有错误。

编程语言是语言的规范。有可能的是，语言规范中存在歧义或不规则，从这个意义上说，您可以说它有错误。

但是，C# 的规范和编译器之间可能存在差异。在这种情况下，错误在编译器内部。

# iphone - 如何在 iPhone 的 NSDictionary 中设置数组值和键？

> ID：11882729
> 
> 赞同：3
> 
> 时间：2012-08-09T11:47:33.523
> 
> 标签：iphone, ios, object, nsmutablearray, nsdictionary

在这里我使用 NSMutableArray 来存储日期，然后我尝试在字典中设置键并分配 ArrayValue 但应用程序崩溃了，请帮助我

提前致谢

```
 Here i tried the code for your reference:

  [DateArray addObject:dateString]; //NSMutablArray 
  NSMutableDictionary *myDictionary =[[NSMutableDictionary alloc]init];         
  [myDictionary setObject:DateArray forKey:@"Date"]; //put array value and set key in NSDictionary. 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-09T11:51:39.047

NSDictionary 类是不可变的。您必须转换为 NSMutableDictionary。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T11:56:00.043

如果您使用的是 XCode 4.4 或更高版本，您可以这样做：

```
[dateArray addObject:dateString]; //NSMutablArray 
NSDictionary *myDictionary = @{ @"Date", dateArray }; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T11:51:34.177

您正在使用 NSDictionary。你应该使用 NSMutableDictionary。NSDictionary 是不可变的。如果你想使用 NSDictionary 然后使用下面的方法：

```
- (id)initWithObjects:(NSArray *)objects forKeys:(NSArray *)keys; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T11:59:19.340

您正在使用`NSDictionary`您应该使用的时间`NSMutableDictionary`

试试这条线：

```
NSMutableDictionary *myDictionary = [[NSMutableDictionary alloc] init]; 
```

iOS 中的大多数集合类都有可变和非可变版本（即

```
NSArray -> NSMutableArray
NSSet -> NSMutableSet
NSDictionary -> NSMutableDictionary
(and others) 
```

可变版本将允许您修改内容。但是，如果您知道您不会更改它，那么使用非可变版本会稍微快一些。

您可以（通常）使用以下`mutableCopy`方法从非可变类中获取可变类，即

```
// This array can't be changed
NSArray *myArray = @[ @"A", @"B", @"C" ];

// This array contains everything from the previous array but can now be modified
MSMutableArray myArray2 = [myArray mutableCopy]; 
```

注意：还有其他类具有可变子类，即`NSURL`->`NSMutableURL`

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-08-09T11:51:20.383

像这样做：

```
for(int i=0;i<[DateArray count]; i++)
{
   [myDictionary addObject:[DateArray objectAtIndex:i] forKey:@"Date"];
} 
```

# php - 数组中的多个数组，数组中每个数组的新 div

> ID：11882732
> 
> 赞同：1
> 
> 时间：2012-08-09T11:47:41.700
> 
> 标签：php, arrays, foreach

好的，所以我在一个数组中有多个数组。对于数组中的每个数组，我希望内部数组在新的 div 中回显。我完全不知道如何做到这一点

此外，如果数组为空，则不应创建 div。

这是我用来 var_dump 以下输出的代码：

![代码](../Images/9bc825bf347b7f85813ad568d4ba6147.png)

这是输出： ![截屏](../Images/6e91778fec8a6d253ae8a10fd8aaa038.png)

我已经阅读了 php 数组文档并在 stackoverflow 上进行了搜索，但我似乎找不到答案，所以请帮忙。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T11:50:59.493

```
foreach($video_by_game as $game_video)
    if(count($game_video)) {
        echo '<div>';
        foreach($game_video as $game)
           echo $game->title.'<br />';
        echo '</div>';
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T11:50:59.197

不要做 foreach $game_video[]，做 foreach $game_video。

```
foreach($videos_by_game as $game_video) {
    foreach($game_video as $gv) {
        // do your output
    }
} 
```

$game_video 已经是一个数组。通过执行 $game_video[]，您正在尝试迭代它的第一个元素

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T11:58:54.043

```
<?php foreach($video_by_game as $videos): // foreach game ?>
<?php    foreach($videos as $video): // foreach video of the game ?>
<?php      if (empty($video)) continue; // if no videos -/> skip ?>
 <div>
   Title: <?php echo $video->title ?> <br>
   Added by: <?php echo $video->added_by ?> <br>
 </div>
<?php    endforeach ?>
<?php endforeach ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T12:02:13.083

您可以使用 array_walk 函数来处理 $game_video 数组的每个项目：

```
if (!empty($game_video)) {
    echo "<div>";
    array_walk($game_video, function($item,$key){ 
                               echo "The necessary output";
                            });
    echo "</div>";
} 
```

# java - SHEF 编辑器中的编码

> ID：11882740
> 
> 赞同：1
> 
> 时间：2012-08-09T11:48:10.297
> 
> 标签：java, html, swing, utf-8, internationalization

我正在尝试使用[SHEF](http://shef.sourceforge.net/)作为所见即所得的编辑器。在编辑器中使用`setText(String val)`后，每个字母`ó`都被替换为它的 html 替换：`&#243;`。

更糟糕的是 - 在`getText()`每个波兰字符被替换之后，不仅`ó`.

我可以通过对这些字符进行解码来解决第二个问题，但我不知道该怎么做才能使编辑器可用，并使其`ó`保持以前的状态。

我需要帮助如何使 SHEF 与 UTF-8 或至少 iso-8859-2 而不是 iso-8859-0 一起工作（因为我认为它是它使用的那个）。

# jquery - 如何让jQuery背景动画更流畅

> ID：11882742
> 
> 赞同：0
> 
> 时间：2012-08-09T11:48:20.773
> 
> 标签：jquery, animation, jquery-animate

我正在尝试使用 jQuery 做一个简单的背景动画。但是动画并不流畅。我怎样才能使它顺利？以下是代码，正在使用的图像大小为 4288 X 3216 px

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>bg</title>
    <style>
    #mydiv
    {
        background:url(bg2.jpg) repeat-x;
        height:900px;
        width:100%;
    }
    </style>

    </head>

    <body>

    <div id="mydiv">

    </div>
    <script type="text/javascript" src="js/jquery-1.7.1.min.js"></script>
    <script type="text/javascript" src="js/bgpos.js"></script>
    <script type="text/javascript">
    $(document).ready (function()
            {
                move();

    function move()
    {
        $('#mydiv').animate({"backgroundPosition":"+=5"},100,"linear",move);
    };

    });
    </script>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T12:18:23.637

您的图像文件大小可能过大，将质量降低到合理的网络大小（100kb）并且它应该运行流畅。

（我的小提琴，图片是 100kb） [http://fiddle.jshell.net/EuwGb/](http://fiddle.jshell.net/EuwGb/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T12:09:30.380

这是使用背景位置的平滑动画示例：

**[jsFiddle 示例。](http://jsfiddle.net/mjaA3/37/)**

```
$(document).ready (function() {
 $('div').bind({
  mouseenter: function() {
   $(this).stop().animate({'background-position-y':'-20px','height':'68px'},600);
  },
  mouseleave: function() {
   $(this).stop().animate({'background-position-y':'-58px','height':'30px'},600);
  }
 });​
}); 
```

## ---------

这是[animate()](http://api.jquery.com/animate/)结构示例：

```
.animate( properties [, duration] [, easing] [, complete] )
//i didn't use easing here

$('#mydiv').stop().animate({'background-position-y':'-2px','height':'6px'},200,  
   function() {
      $('#mydiv').stop().animate({'background-position-x':'-20px'},200);
      //this will initualise when animate complete
   }
); 
```

*   [.stop()](http://api.jquery.com/stop/)用于防止同时触发的同一事件发生冲突。
*   背景位置动画定义：'背景位置-y'和'背景位置-x'
*   您可以`,`用于多个动画声明。
*   end 200 持续时间，这对于流畅的动画很重要。

# ruby-on-rails - Ruby On Rails update_all 测试条件不相等

> ID：11882743
> 
> 赞同：1
> 
> 时间：2012-08-09T11:48:22.290
> 
> 标签：ruby-on-rails, update-all

我正在尝试更新一些最小和最大字段，以便将一个留空，然后将值从另一个复制。到目前为止，我有：

`Item.update_all({:min = :max}, {:min => nil, :max !=> nil})`

由于这两个字段都可能是`nil`我知道它们是否是但`!=>`不正确的。我将如何测试不等于使用这种条件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T11:53:25.663

这不是哈希的有效 ruby​​ 语法。

尝试：

```
Item.update_all("min = max", "min IS NULL AND max IS NOT NULL") 
```

或者：

```
Item.where("min IS NULL AND max IS NOT NULL").update_all("min = max") 
```

# android - 出色的用户界面 UI 示例？截图

> ID：11882744
> 
> 赞同：1
> 
> 时间：2012-08-09T11:48:26.857
> 
> 标签：android, android-layout

我正在寻找真正出色的 Android 用户界面示例。真的，所有的人都感兴趣。

我自己的应用程序有一堆不同的 ListViews。寻找主题背景、边框、listviewitem背景、字体等的灵感。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T11:53:40.570

看看[http://androidniceties.tumblr.com/](http://androidniceties.tumblr.com/)在我看来，最好的 UI 设计都在那里。很好的灵感。

# c# - 难以比较两个 DateTime 实例

> ID：11882745
> 
> 赞同：3
> 
> 时间：2012-08-09T11:48:29.697
> 
> 标签：c#, .net, unit-testing

我正在用 C# (.NET 4.5) 编写单元测试类。在其中一个测试中，我在`FeedbackDao`构造我们的类的实例后检查各种属性的值。在构造时， 的`FeedbackDate`属性`FeedbackDao`设置为`DateTime.Now`。

```
FeedbackDao feedbackDao = new FeedbackDao();
// a couple of lines go here then I set up  this test:
Assert.IsTrue(feedbackDao.FeedbackDate.CompareTo(DateTime.Now) < 0); 
```

我的假设是 feedbackDao.FeedbackDate 应该总是比返回的当前时间稍早一点`DateTime.Now`，即使它只有一毫秒，我的`IsTrue`测试应该总是通过，但有时它通过，有时它失败。当我添加这样的消息时：

```
Assert.IsTrue(feedbackDao.FeedbackDate.CompareTo(DateTime.Now) < 0,
                feedbackDao.FeedbackDate.CompareTo(DateTime.Now).ToString()); 
```

该消息有时显示为 -1（表示`FeedbackDate`早于`Now`），有时显示为 0（表示 DateTime 实例相等）。

为什么 `FeedbackDate`不**总是**早于`Now`？而且，如果我不能相信那个比较，我怎么能写一个严格的测试来检查`FeedbackDate`when`FeedbackDao`被构造的值？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T11:51:30.087

> 我的假设是 feedbackDao.FeebackDate 应该总是比 DateTime.Now 返回的当前时间稍早一点，即使它只是一毫秒。

什么让你有那个想法？这表明 1000 次调用*至少需要 1 秒*，这似乎不太可能。

`DateTime.Now`除此之外，IIRC 的实际粒度只有大约 10-15 毫秒，而且通常*如果*您`DateTime.Now`快速连续调用两次，您将获得两次相同的值。

出于可测试性的目的——以及清晰地表达依赖关系——我喜欢使用“时钟”接口 ( `IClock`)，它总是用于提取当前系统时间。然后，您可以编写一个假实现来控制时间，但您认为合适。

此外，这个断言是有缺陷的：

```
Assert.IsTrue(feedbackDao.FeebackDate.CompareTo(DateTime.Now) < 0,
                feedbackDao.FeebackDate.CompareTo(DateTime.Now).ToString()); 
```

它有缺陷，因为它评估`DateTime.Now`了两次......所以它*报告*的值不一定与它*检查*的值相同。最好是：

```
DateTime now = DateTime.Now;
Assert.IsTrue(feedbackDao.FeebackDate.CompareTo(now) < 0,
                feedbackDao.FeebackDate.CompareTo(now).ToString()); 
```

甚至更好：

```
DateTime now = DateTime.Now;
DateTime feedbackDate = feedbackDao.FeebackDate;
Assert.IsTrue(now < feedbackDate,
              feedbackDate + " should be earlier than " + now); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T08:01:51.163

我通常使用模拟数据来验证我的逻辑。我围绕模拟数据发展我的测试场景。正如 DBM 所建议的那样。模拟数据是一组通常是静态或可配置的已知数据。通常的做法是拥有一个包含所有测试数据的 XML 文件，并在需要时加载它们。我可以在我们的项目中给你一个例子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T11:52:36.577

您的测试**并没有那么有用**，您断言该值小于，`DateTime.Now`但这并不意味着它已正确设置为预期值。如果日期时间未初始化，它将具有`DateTime.MinValue`并且该**值将始终通过测试**。

该测试与测试一样有效，`feedbackDao.FeebackDate.CompareTo(DateTime.Now) <= 0`并且您不会遇到促使您编写此问题的问题。

您需要提取对`DateTime.Now`或使用支持模拟的模拟框架的依赖关系，`DateTime.Now`并断言该值已初始化为正确的值。您可以检查[Microsoft Moles](http://research.microsoft.com/en-us/projects/moles/)，现在在 VS 2012 中重命名为 Fakes，这是我所知道的唯一免费的模拟框架（有点适用于最新版本，因为它与 VS 一起提供，不知道它是否在速成版），这将让您替换对`DateTime.Now`.

## *更新：*

在不求助于模拟框架的情况下，您可以通过执行以下操作来改进您的测试：

```
var lowerBoundary = DateTime.Now;
var dao = new FeedbackDao();
var upperBoundary = DateTime.Now;

Assert.IsTrue(dao.Date >= lowerBoundary && dao.Date <= upperBoundary); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T12:37:18.553

在单元测试时，我认为`DateTime.Now`是外部依赖，因此需要模拟一些东西。`DateTime.Now`我过去在测试`Func<DateTime>`涉及`DateTime.Now`.

我更喜欢 Jon Skeet 的建议，即使用`IClock`接口之类的东西来包装`DateTime`属性，只是因为上次我这样做时，我觉得制作一个新的接口和类来包装单个属性很愚蠢。如果您需要测试多个静态`DateTime`属性，我绝对同意这个`IClock`建议。

例如，

```
public class Foo
{
    private readonly Func<DateTime> timeStampProvider;
    public Foo(Func<DateTime> timeStampProvider)
    {
        this.timeStampProvider = timeStampProvider;
    }

    public Foo() : this(() => DateTime.Now)
    {
    }

    public bool CompareDate(DateTime comparisonDate)
    {
        // Get my timestamp
        return comparisonDate > timeStampProvider();
    }
} 
```

然后，在测试过程中，

```
var testFoo = new Foo(() => new DateTime(1, 1, 2010)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T11:51:36.060

尝试

```
Assert.IsTrue(feedbackDao.FeebackDate.CompareTo(DateTime.Now) < 1); 
```

或者

```
Assert.IsTrue(feedbackDao.FeebackDate - DateTime.Now < someMarginOfError); 
```

时间通常是相当精细的——通常是 10 毫秒的 IIRC。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-09T11:52:00.493

根据您的系统，`DateTime.Now`不会每毫秒或每滴答一次更新，它只会定期更新。通常为 10 毫秒左右。请参阅此处：[DateTime.Now 更新的频率如何？还是有更精确的 API 来获取当前时间？](https://stackoverflow.com/questions/307582/how-frequent-is-datetime-now-updated-or-is-there-a-more-precise-api-to-get-the)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-09T11:53:19.207

DateTime.Now 不是 100% 准确的。它增加了大约 130 毫秒（根据每个滴答的个人经验）。因此，如果您的方法足够快，则很可能日期将等于 datetime.now 而不是更小。
如果你想要一个 100% 准确的计时器，你应该使用 StopWatch 类。
[秒表的 msdn 链接](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)

# javascript - 您如何阻止复制和粘贴阻止程序？

> ID：11882746
> 
> 赞同：3
> 
> 时间：2012-08-09T11:48:29.667
> 
> 标签：javascript, copy-paste

我有一个 JavaScript 按钮来删除烦人的 'autocomplete="off"'（因为这是我的决定，而不是你的决定）。我怎样才能对关闭复制/粘贴的网站做同样的事情？（我可以很容易地禁用 JavaScript，复制/粘贴并再次启用它，但这比单击按钮更麻烦）。我使用各种不同的浏览器，因此我更喜欢 JavaScript 解决方案，但如果存在特定于浏览器的版本，我很高兴被指出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:56:50.227

恐怕这不是您可以轻松完成的事情，因为它需要启发式方法来确定附加的事件处理程序是在过滤输入还是在做其他事情。

最简单的方法是关闭 javascript，如果网站做得足够好，它会优雅地降级并保持正常运行。但是你可以使用复制和粘贴

# android - 设备突然关闭时是否会调用 onPause

> ID：11882759
> 
> 赞同：0
> 
> 时间：2012-08-09T11:48:55.437
> 
> 标签：android, onpause

我有个疑问。假设我们正在运行一个 android 应用程序，并且设备会自动关闭电源，例如 - 如果电池被拔出。在这种情况下，设备将突然关闭，应用程序将被终止。那么在这种情况下会调用 onPause/onStop 吗？换句话说，当这种情况发生时，我们如何在应用程序中保存数据？谢谢， 安基特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T13:39:17.817

答案是否定的，在取出电池的情况下不会调用任何方法。

想想看……如果你拔掉电池，就没有电源来运行设备，所以什么都不会“被调用”。这一切都消失了。

基本上有两种选择可以保护您的数据。

1) 以某个（合理的）间隔
保存 2) 收到数据后立即保存

我通常选择选项 2，尽管我可以看到可能有理由选择选项 1。

# prolog - 密码算术难题（Prolog）

> ID：11882760
> 
> 赞同：4
> 
> 时间：2012-08-09T11:48:56.377
> 
> 标签：prolog, cryptarithmetic-puzzle

我被要求编写一个 Prolog 代码来解决密码难题，使用“生成和测试”。例如，我得到`solve([R,O,B],[B,E,R,T],[N,O,R,E,S])`并且我需要为这些字母找到一个分配。所以我写了这段代码：

```
sum(List1,List2,SumList) :-
    append(List1,List2,List3),
    append(List3,SumList,AllList),
    assign([0,1,2,3,4,5,6,7,8,9],AllList),
    add_zero(List1,List1Z),
    add_zero(List2,List2Z),
    add_zero(SumList,SumListZ),
    name(Num1,List1Z),
    name(Num2,List2Z),
    name(SumNum,SumListZ),
    SumNum is Num1+Num2,
    !.

remove(X,[X|Xs],Xs).
remove(X,[_|Ys],Res) :-
    remove(X,Ys,Res).

assign(Digits,[X|Tail]) :-
    nonvar(X),
    !,
    assign(Digits,Tail).
assign(Digits,[X|Tail]) :-
    remove(X,Digits,D1),
    assign(D1,Tail).
assign(_,[]) :-
    !.

add_zero([X|Tail1],[Y|Tail2]) :-
    !,
    Y is X+48,
    add_zero(Tail1,Tail2).
add_zero([],[]) :-
    !. 
```

但我有一个错误，我找不到它......你能帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T15:20:34.670

您的代码的问题是在您的第二个子句中`remove/3`没有保留未删除的项目。它应该是：

```
remove(X,[Y|Ys],[Y|Res]):-
    remove(X,Ys,Res). 
```

我用 SEND + MORE = MONEY 尝试了您的代码，并且在修复该过程后它运行良好。

但是它没有找到 ROB + BERT = NORES 的解决方案...根据[这个有很多求解器的站点](http://bach.istc.kobe-u.ac.jp/llp/crypt.html)，你的方程没有解。

# ios - 我可以显示 GameCenter 排行榜供玩家选择吗？

> ID：11882761
> 
> 赞同：0
> 
> 时间：2012-08-09T11:49:01.150
> 
> 标签：ios, xcode, game-center, gamekit

我正在制作一个游戏，它有 3 个排行榜，它们都可以正常工作并且分数显示正常。我有一个按钮，按下时会使用下面的代码显示排行榜。

```
 GKLeaderboardViewController *leaderboardController = [[GKLeaderboardViewController alloc] init];
if (leaderboardController != NULL)
{
    leaderboardController.category = self.easyLeaderBoard;
    leaderboardController.timeScope = GKLeaderboardTimeScopeWeek;
    leaderboardController.leaderboardDelegate = self;
    [self presentModalViewController: leaderboardController animated: YES];

} 
```

此代码仅加载 Easy 排行榜，是否可以加载 3 个排行榜的列表而不是加载特定的排行榜？然后用户可以选择他们想要的排行榜。

# asp.net-mvc-3 - FormsAuthentication.SetAuthCookie 在异步操作中抛出 NullReferenceException

> ID：11882762
> 
> 赞同：14
> 
> 时间：2012-08-09T11:49:04.977
> 
> 标签：asp.net-mvc-3, asp.net-mvc-4, asp.net-4.0, async-await

我发现这`FormsAuthentication.SetAuthCookie`是抛出 NullReferenceException - 对象引用未设置为天蓝色网站上的异步操作内的对象实例。

我发现了以下内容：

[http://connect.microsoft.com/VisualStudio/feedback/details/743350/formsauthentication-setauthcookie-throws-nullreferenceexception-if-called-in-an-async-action-in-mvc4](http://connect.microsoft.com/VisualStudio/feedback/details/743350/formsauthentication-setauthcookie-throws-nullreferenceexception-if-called-in-an-async-action-in-mvc4)

不过我已经有了

```
 <appSettings>
    <add key="aspnet:UseTaskFriendlySynchronizationContext" value="true" /> 
```

设置并且我的代码在本地运行良好我只在部署到天蓝色时遇到问题。我正在使用 Azure 网站（[https://www.windowsazure.com/en-us/home/scenarios/web-sites/](https://www.windowsazure.com/en-us/home/scenarios/web-sites/)），我的理解是这通常使用 web.config？我也尝试通过 Azure 控制面板添加 appsetting

![在此处输入图像描述](../Images/049803cac9a4681ce92aee9e815e1935.png)

并添加`.ConfigureAwait(false);`到我期待的方法中，但没有运气。

下面的代码会抛出异常

```
public class TestController : Controller
    {
        public async Task<ActionResult> Index()
        {
            var httpResponse = await new HttpClient().GetAsync("http://www.google.com");
            FormsAuthentication.SetAuthCookie("test", true);
            return View();
        }
    } 
```

**有谁知道我怎样才能让它工作？**

**更新：**

堆栈跟踪：

```
[NullReferenceException: Object reference not set to an instance of an object.]
   System.Threading.Tasks.<>c__DisplayClass1c.<GetRethrowWithNoStackLossDelegate>b__1b(Task task) +91
   System.Threading.Tasks.TaskHelpersExtensions.ThrowIfFaulted(Task task) +15
   System.Web.Mvc.Async.TaskAsyncActionDescriptor.EndExecute(IAsyncResult asyncResult) +77
   System.Web.Mvc.Async.<>c__DisplayClass3f.<BeginInvokeAsynchronousActionMethod>b__3e(IAsyncResult asyncResult) +16
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +50
   System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult) +29
   System.Web.Mvc.Async.<>c__DisplayClass39.<BeginInvokeActionMethodWithFilters>b__33() +59
   System.Web.Mvc.Async.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49() +240
   System.Web.Mvc.Async.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__36(IAsyncResult asyncResult) +12
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +50
   System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult) +31
   System.Web.Mvc.Async.<>c__DisplayClass2a.<BeginInvokeAction>b__20() +23
   System.Web.Mvc.Async.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult) +128
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +50
   System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeAction(IAsyncResult asyncResult) +26
   System.Web.Mvc.<>c__DisplayClass1d.<BeginExecuteCore>b__18(IAsyncResult asyncResult) +14
   System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +25
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +55
   System.Web.Mvc.Controller.EndExecuteCore(IAsyncResult asyncResult) +41
   System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +25
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +55
   System.Web.Mvc.Controller.EndExecute(IAsyncResult asyncResult) +28
   System.Web.Mvc.Controller.System.Web.Mvc.Async.IAsyncController.EndExecute(IAsyncResult asyncResult) +10
   System.Web.Mvc.<>c__DisplayClassb.<BeginProcessRequest>b__4(IAsyncResult asyncResult) +28
   System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +25
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +55
   System.Web.Mvc.<>c__DisplayClasse.<EndProcessRequest>b__d() +31
   System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f) +7
   System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action) +23
   System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +59
   System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) +9
   System.Web.CallHandlerExecutionStep.OnAsyncHandlerCompletion(IAsyncResult ar) +96 
```

**更新**

如果手动设置 Cookie，我发现它有效

```
FormsAuthenticationTicket ticket = new FormsAuthenticationTicket(1, "test", DateTime.Now, DateTime.Now.AddMinutes(30), true, null, FormsAuthentication.FormsCookiePath);
            string encTicket = FormsAuthentication.Encrypt(ticket);
            Response.Cookies.Add(new HttpCookie(FormsAuthentication.FormsCookieName, encTicket)); 
```

我不打算回答这个问题，因为我想知道为什么`FormsAuthentication.SetAuthCookie`抛出异常以及为什么它在 Azure 网站上的行为不同

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-16T09:36:44.140

此问题并非特定于 Azure - 在调用 FormsAuthentication.SetAuthCookie 之前调用 await 语句时，FormsAuthentication.SetAuthCookie 方法将在异步操作中引发空引用异常。

最简单的解决方案是使用以下内容：

```
 Response.Cookies.Add(FormsAuthentication.GetAuthCookie("user-1", true)); 
```

另一种方法是自己指定票证创建：

```
 var ticket = new FormsAuthenticationTicket(
            2,
            "user-1",
            DateTime.Now,
            DateTime.Now.AddDays(2),
            true,
            String.Empty,
            "/");

        var encTicket = FormsAuthentication.Encrypt(ticket);

        Response.Cookies.Add(new HttpCookie(".AUTH", encTicket)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T19:33:33.717

目前，Windows Azure 网站不支持 .NET 4.5。您需要将项目降级到 .NET 4.0，这也意味着您需要重写代码以不使用异步。

您可以尝试 bin 部署应用程序所需的 .NET 4.5 程序集

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-09T08:45:38.430

你可以改变这种方式也取决于你

```
public ActionResult Index()
{
    var t1 = Task.Run(() => HttpClient().GetAsync("http://www.google.com"));
    t1.Wait();
    FormsAuthentication.SetAuthCookie("test", true);
    return View();
} 
```

这种方式对我有用，我从 GlennMorton 第一个答案中得到了想法

谢谢。

# php - 有趣的 SQL 结构：主键的一部分可能是 NULL

> ID：11882769
> 
> 赞同：0
> 
> 时间：2012-08-09T11:49:33.020
> 
> 标签：php, mysql

这是我的桌子：

```
PRODUCT_ID (pk) | GROUP_ID (pk) | PRICE 
```

有了这个，我会为不同用户的产品设置不同的价格。如果价格适用于每个组，则 GROUP_ID 将为 NULL。但这是一个 PK - 它不能为 NULL。PRODUCT_ID 不能单独PK，因为可以有更多不同价格的产品。那怎么躲呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T11:53:02.280

正如您所说，不可能将表的主键设置为 NULL。我建议您有一些“特殊”值（很像 NULL 只是其他有效的值），这表明所述价格适用于所有组（例如`~0`，如果您将`INT UNSIGNED`其用作您的类型`GROUP_ID`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T11:57:47.070

我建议创建一个具有自己 ID 的“全局”组。即使您能够设置`group_id`为. 这感觉好多了`null`。所以每个组都有自己的奖品和“全球”组的价格作为加法。

```
1 | 1 | 10,50
2 | 2 | 15,50
2 | 3 | 15,70 
```

如果 group id`1`是“全局”组，则 group`1`和id 为产品`2`的价格。`10,50``1`

# android - 在 Google+ 中分享

> ID：11882775
> 
> 赞同：2
> 
> 时间：2012-08-09T11:49:59.383
> 
> 标签：android, google-plus

我需要通过 Android 应用在 Google+ 中分享链接。在文档中我看到了这段代码：

```
Button shareButton = (Button) findViewById(R.id.share_button);
shareButton.setOnClickListener(new OnClickListener() 
{
    @Override
    public void onClick(View v) 
    {
       // Launch the Google+ share dialog with attribution.
        Intent shareIntent = ShareCompat.IntentBuilder.from(ExampleActivity.this)
           .setType("text/plain")
           .setText("Welcome to the Google+ platform. https://developers.google.com/+")
           .getIntent()
           .setPackage("com.google.android.apps.plus");

        startActivity(shareIntent);
    } 
}); 
```

但如果我的手机上是官方客户端 Google+，它会起作用。我可以在不使用官方客户端的情况下在 Google+ 中共享链接吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T23:04:27.320

共享意图，显示在您提供的代码中。使用本机 Google+ 应用程序将内容共享到 Google+。这是在 Android 上将内容分享到 Google+ 的唯一方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T13:54:50.840

Google+ API 不支持分享。链接：[https ://developers.google.com/apis-explorer/#s/plus/v1/](https://developers.google.com/apis-explorer/#s/plus/v1/)

# ruby - ruby net-ssh 使用交互式提示调用 bash 脚本

> ID：11882776
> 
> 赞同：0
> 
> 时间：2012-08-09T11:50:02.113
> 
> 标签：ruby, net-ssh

我有一个问题希望你能帮助我

我正在尝试使用 ruby​​ ssh 到机器上并运行 bash 脚本，这部分相当简单，但是 bash 脚本要求我以交互方式输入用户名和密码，这就是我卡住的地方

因此，如果我手动运行脚本，我会看到：-

```
./run_file.sh
Enter username:
Enter password: 
```

所以在输入用户名提示我必须输入用户名等

我有一个简单的方法来建立连接，我的想法是传入一个由

```
[‘command to run’, ‘username’, ‘password’] 
```

但我不知道如何扩展 Net::SSH 调用以响应提示

```
 # ssh conectivity method
  def command_ssh(host, cmd)
    require 'net/ssh'
   user = LocalConfig::SSH_DETAILS[:user]
   pass = LocalConfig::SSH_DETAILS[:pass]

    Net::SSH.start(host, user, :password => pass, :paranoid => false, :auth_methods => ['password'], :timeout => 10 )do |ssh |
      output = (ssh.exec!(cmd[0]))
      return output
    end
  end 
```

任何人都有任何想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T11:35:05.953

设法通过使用通道功能解决了这个问题，这是我现在使用的方法

```
def connect(host,command)

  require 'rubygems'
  require 'net/ssh'

  user = LocalConfig::SSH_DETAILS[:user]
  pass = LocalConfig::SSH_DETAILS[:pass

    o = ""
    Net::SSH.start(host, user, :password => pass, :paranoid => false, :auth_methods => ['password'], :timeout => 30 )do |ssh |
      channel = ssh.open_channel do |ch|
    ch.exec(command) do |ch2, success|
      ch2.send_data "myUserName\n"
      ch2.send_data "mPassWord\n"

      ch.on_data do |ch2, data|
        o += data
      end
    end
      end
      channel.wait
      return o.to_s
    end
end 
```

# jquery - 更新面板 asp.net 中 jquery 选项卡内容消失的问题

> ID：11882778
> 
> 赞同：0
> 
> 时间：2012-08-09T11:50:12.333
> 
> 标签：jquery, asp.net, ajax

我有 3 个选项卡 - 最后一个选项卡有一个 updatepanel asp.net：

```
<div id='tab3' class="tab-panel">
            <h3>
                Filter</h3>
            <asp:UpdatePanel ID="updFilters" runat="server">
                <ContentTemplate>
                    <asp:DropDownList ID="ddlFilterSelect" runat="server" AutoPostBack="true" OnSelectedIndexChanged="ddlFilterSelect_SelectedIndexChanged"></asp:DropDownList>
                    <asp:ListBox ID="lstFilterSelect" runat="server" SelectionMode="Single" AutoPostBack="true" OnSelectedIndexChanged="lstFilterSelect_SelectedIndexChanged"></asp:ListBox>
                    <asp:Button ID="btnReset" runat="server" Text="Reset Filter" OnClick="btnReset_Click" />
                </ContentTemplate>
            </asp:UpdatePanel>
        </div> 
```

updatepanel 有一个过滤器功能，带有一个选择框，通过 ajax 调用更改选择列表框。发生的情况是，当我进行过滤时，内容消失并选择了第一个选项卡，但内容仍然丢失 - 一旦我再次点击 3 选项卡，内容就会重新出现。

请在此处找到标签 jquery 代码和 html：http: [//jsfiddle.net/zidski/LQKSt/](http://jsfiddle.net/zidski/LQKSt/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T12:38:53.003

您需要做的是在触发更新面板服务器端事件时再次注册 jquery 事件。

使用**ScriptManager.RegisterScript**重新注册事件，如

在按钮单击中使用 ScriptManager.RegisterScript 调用此 ReRegister() 以及下拉选择的索引更改它在那里。

```
function ReRegister()
{
// Tabs
$('ul.tabs').each(function () {
    // For each set of tabs, we want to keep track of
    // which tab is active and it's associated content
    var $active, $content, $links = $(this).find('a');

    // Use the first link as the initial active tab
    $active = $links.first().addClass('active');
    $content = $($active.attr('href'));

    // Hide the remaining content
    $links.not(':first').each(function () {
        $($(this).attr('href')).hide();
    });

    // Bind the click event handler
    $(this).on('click', 'a', function (e) {
        // Make the old tab inactive.
        $active.removeClass('active');
        $content.hide();

        // Update the variables with the new link and content
        $active = $(this);
        $content = $($(this).attr('href'));

        // Make the tab active.
        $active.addClass('active');
        $content.show();

        // Prevent the anchor's default click action
        e.preventDefault();
    });
});
} 
```

在触发点击事件后，您可能需要明确打开第三个选项卡。

在 ScriptManager 本身中，您可以调用它

```
// Open third tab
$('#tabs ul').tabs('select', 2); 
```

# c# - 服务器文件访问 XML

> ID：11882784
> 
> 赞同：0
> 
> 时间：2012-08-09T11:50:28.777
> 
> 标签：c#, asp.net, xml

我一直在测试我的代码以在本地保存到 XML 文件中，并且工作正常。但是我刚刚将它上传到我的服务器并且它无法正常工作。我将路径更改为 xml 文件的路径，但仍然没有运气。这是我的本地代码...

```
public void AddNodeToXMLFile(string XmlFilePath, string NodeNameToAddTo)
    {
        //create new instance of XmlDocument
        XmlDocument doc = new XmlDocument();

        //load from file
        doc.Load(XmlFilePath);

        //create main node
        XmlNode node = doc.CreateNode(XmlNodeType.Element, "Level", null);

        //create the nodes first child
        XmlNode mapname = doc.CreateElement("map");
        //set the value
        mapname.InnerText = mapsave.Value;

        // add childes to father
        node.AppendChild(mapname);

        // find the node we want to add the new node to
        XmlNodeList l = doc.GetElementsByTagName(NodeNameToAddTo);
        // append the new node
        l[0].AppendChild(node);
        // save the file
        doc.Save(XmlFilePath);
    }

protected void btnSave_Click(object sender, EventArgs e)
    {
        if (mapsave.Value.ToString() == "")
        {
            lblResult.Text = lblError.Value;
        }
        else
        {
            AddNodeToXMLFile("C:\\Users\\Glen.Robson\\Documents\\Visual Studio 2010\\Projects\\Project1\\Project1\\Scripts\\UserMaps.xml", "TileMaps");
        }

    } 
```

因此，当我上传到服务器时，我将 AddNodeToXMLFile() 的路径更改为：

```
"http://www.mydomain.com/Scripts/UserMaps.xml" 
```

但这不起作用......谁能告诉我文件路径应该是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T11:58:53.047

您无法更改 URL 的路径...服务器上的代码仍然需要知道服务器上文件的**物理路径**。它无法根据 URL 确定文件的位置。

为什么不使用特定于应用程序的路径...

```
AddNodeToXMLFile(VirtualPathUtility.ToAbsolute("~/Scripts/UserMaps.xml"),"TileMaps"); 
```

然后在您的功能中，您需要将虚拟路径“映射”到服务器上的实际物理路径......

```
public void AddNodeToXMLFile(string XmlFilePath, string NodeNameToAddTo)
{
   XmlFilePath = Server.MapPath(XmlFilePath);
   ... 
```

此外，您需要确保在服务器上正确设置了权限——这意味着 ASP.NET 应用程序在 IIS 上运行的进程能够直接写入

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T11:56:28.477

简而言之：您所要求的无法完成。如果您想更改服务器上的内容，您需要在服务器上有一个程序或脚本**来**处理您的请求。只有在服务器上执行的程序/脚本才能更改服务器上的文件。

# android - android 应用程序中的 process.waitFor() 返回“1”

> ID：11882785
> 
> 赞同：1
> 
> 时间：2012-08-09T11:50:30.993
> 
> 标签：android, process, runtime

我正在使用我找到的执行 shell 命令的示例。（[链接](http://madteam.co/news/2012/02/android-diy-making-a-shell-script-app/)）

当我运行示例时，它运行良好，

但是当我在我的应用程序中使用相同的代码时它不起作用，因为返回值是“1”而不是“0”。 **这就是问题开始的地方：**

```
try 
{
proc.waitFor();
}
catch (InterruptedException e){} 
```

manifest.xml 是相同的，两个应用程序都使用 jre1.6 我已经搜索了每一个差异，但我没有找到任何差异。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T05:52:15.173

检查您的应用程序是否已签名或未签名。未签名的应用无权评估运行时进程。

# c# - 导出到 Excel 时不保留时间格式

> ID：11882788
> 
> 赞同：1
> 
> 时间：2012-08-09T11:50:48.480
> 
> 标签：c#, excel, data-export

我尝试使用在我的表中包含一列 24 小时格式时间的数据集将 XML 数据导出到 Excel。

现在，当它导出到 Excel 时，它以 12 小时格式显示。我想保留 24 小时格式。

请建议我一个解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:27:25.537

这不是excel中的格式问题吗，换句话说，一旦您完成将数据导出为ex​​cel，通过突出显示要更改的单元格并右键单击并选择格式单元格来根据需要格式化单元格

# html - Iframe 中的 PDF 与其他元素重叠

> ID：11882792
> 
> 赞同：0
> 
> 时间：2012-08-09T11:50:56.613
> 
> 标签：html, internet-explorer, pdf, iframe

我有一个需要显示 pdf/html 的屏幕。所以我正在使用 iframe 内容来显示其中的 PDF 或 HTML。每当需要时，我需要在顶部显示一个弹出窗口来遮盖整个屏幕。这在所有地方都很酷。

问题是，仅在 Internet Explorer 中，如果 iframe 内容中存在 PDF，则屏蔽不会出现在 pdf 之上，而是 pdf 与屏蔽、弹出窗口、下拉菜单重叠。

请让我们知道如何解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T06:55:13.863

所以，我解决了这个问题。当您想在页面上显示遮罩时，您需要做的是隐藏 iframe 可见性。

# spring - weblogic + spring + eclipselink 的 JNDI 问题

> ID：11882800
> 
> 赞同：0
> 
> 时间：2012-08-09T11:51:12.287
> 
> 标签：spring, weblogic, eclipselink, jndi

我在 Spring 3.0 中有一个使用 eclipselink 作为持久性提供程序的应用程序。该应用程序在 Jetty 应用服务器中运行良好，但在 weblogic 中部署时出现错误。必要的细节如下

春天的xml文件

```
 <context:property-placeholder location="classpath:jdbc.properties"
    ignore-unresolvable="true" />
    <jee:jndi-lookup id="jndiDataSource" jndi-name="${jndi.name}"
    resource-ref="true" />

<bean id="pum"
    class="org.springframework.orm.jpa.persistenceunit.DefaultPersistenceUnitManager">
    <property name="persistenceXmlLocations">
        <list>
            <value>classpath*:META-INF/persistence.xml</value>
        </list>
    </property>
    <property name="defaultDataSource" ref="jndiDataSource" />
</bean>
        <bean id="entityManagerFactory"
    class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="persistenceUnitName" value="my-persistence" />
    <property name="persistenceUnitManager" ref="pum" />
    <property name="jpaDialect" ref="jpaDialect" />
    <property name="jpaVendorAdapter" ref="jpaAdapter" />
    <property name="loadTimeWeaver" ref="loadTimeWeaver" />
</bean>

<bean id="jpaAdapter"
    class="org.springframework.orm.jpa.vendor.EclipseLinkJpaVendorAdapter"
    p:databasePlatform="${toplink.database.platform}" p:showSql="true" />

<bean id="jpaDialect"
    class="org.springframework.orm.jpa.vendor.EclipseLinkJpaDialect" /> 
```

属性文件如下

```
 jdbc.driverClassName=org.postgresql.Driver
         jdbc.url=jdbc:postgresql://localhost:5432/myDB
         jdbc.username=***
         jdbc.password=***

         jndi.name=jndi/myDBjndi
         jndi.resourceRef=true
          jndi.enabled=true

        hibernate.database.platform=org.hibernate.dialect.PostgreSQLDialect
    toplink.database.platform=org.eclipse.persistence.platform.database.PostgreSQLPlatform 
```

我在 web.xml 中声明了一个标签

```
 <resource-ref>
    <descriptionMy DataSource Reference</description>
    <res-ref-name>jndi/myDBjndi</res-ref-name>
    <res-type>javax.sql.DataSource</res-type>
    <res-auth>Container</res-auth>
</resource-ref> 
```

以上在 Jetty 中有效，但在 Weblogic 10.3.4 中我得到以下异常

```
 ####<Aug 9, 2012 6:19:46 PM CST> <Info> <EclipseLink>  <AdminServer> <[ACTIVE] ExecuteThread: '5' for queue: 'weblogic.kernel.Default (self-tuning)'> <<anonymous>> <> <f637fb3f44bc7f84:-2787ac98:1390ae3403e:-8000-000000000000001e> <1344507586988> <BEA-2005000> <2012-08-09 18:19:46.988--ServerSession(57821834)--Connection(55507026)--connecting(DatabaseLogin(
platform=>PostgreSQLPlatform
user name=> ""
datasource URL=> "null"))> 
        ####<Aug 9, 2012 6:19:47 PM CST> <Alert> <EclipseLink> <AdminServer> <  [ACTIVE] ExecuteThread: '5' for queue: 'weblogic.kernel.Default (self-tuning)'> <<anonymous>> <> <f637fb3f44bc7f84:-2787ac98:1390ae3403e:-8000-000000000000001e> <1344507587003> <BEA-2005000> <2012-08-09 18:19:47.003--ServerSession(57821834)--Local Exception Stack: 
               Exception [EclipseLink-4021] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): 
            org.eclipse.persistence.exceptions.DatabaseException
            Exception Description: Unable to acquire a connection from driver [null], user  [null] and URL [null].  Verify that you have set the expected driver class and URL.  Check your login, persistence.xml or sessions.xml resource.  The jdbc.driver property should be set to a class that is compatible with your database platform
               at org.eclipse.persistence.exceptions.DatabaseException.unableToAcquireConnectionFromDriverException(DatabaseException.java:376)
at org.eclipse.persistence.sessions.DefaultConnector.connect(DefaultConnector.java:91)
at org.eclipse.persistence.sessions.DatasourceLogin.connectToDatasource(DatasourceLogin.java:162)
at org.eclipse.persistence.internal.databaseaccess.DatasourceAccessor.connectInternal(DatasourceAccessor.java:330)
at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.connectInternal(DatabaseAccessor.java:293) 
```

知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:35:22.663

这是因为像`weblogic`自动检测`persistence.xml`文件夹中分配的`/META-INF`文件并预加载`Persistence Unit`（使用内置实现）的 Java EE 容器但不知道在休眠级别设置的 JPA 属性。持久性单元只能由 引导`Spring`，因此将文件重命名为其他内容可以解决问题。

# hibernate - 从映射为数组的列中检索数据

> ID：11882801
> 
> 赞同：0
> 
> 时间：2012-08-09T11:51:16.843
> 
> 标签：hibernate, mapping, hql, hibernate-mapping

我正在使用休眠映射如下：

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD//EN"
        "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
    <hibernate-mapping>
      <class entity-name="TestClass.TestClass" table="TestClass">
        <id name="id" type="integer" unsaved-value="any">
          <column name="TestClassId" not-null="true" />
          <generator class="assigned" />
        </id>

        <array name="arrayProp " table="arrayProp ">
          <key column="id" />
          <index column="ordre" />
          <element column="arrayItem" type="string" />
        </array>

     </class>
    </hibernate-mapping> 
```

现在我想检索存储在 arrayProp 中的元素，我写了这个查询：

```
select arrayProp from TestClass 
```

我得到的只是：

```
 Wrapped Exception: No data type for node: org.hibernate.hql.ast.tree.IdentNode 
     \-[IDENT] IdentNode: 'arrayProp' {originalText=arrayProp} 
```

任何人都知道如何从 arrayProp 中检索数据，thanx 寻求帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T12:11:10.117

尝试使用查询：

```
String queryText = "select tableClass.arrayProp from TableClass";
Query query = session.createQuery(queryText); 
```

然后，当您使用 query.list() 时，我认为您会得到 List（或 JPA 中的 List，我不确定）。如果您将获取列表，那么 Object[] 数组的第一个元素将是您的字符串数组 String[]。

# blackberry - 错误开始 xxx：模块“xxx-4”有验证错误 3337。（Codfile 版本 78）在 Blackberry 中？

> ID：11882805
> 
> 赞同：0
> 
> 时间：2012-08-09T11:51:29.103
> 
> 标签：blackberry, rim-5.0

我已经使用 JRE5.0 实现了一个黑莓应用程序，它在任何具有 OS5.0 和 OS6.0 的设备上运行良好
当我尝试在具有 OS 7.0 的 9900 上打开相同的应用程序时，我收到以下错误：

> 启动 myAppName 时出错：模块“MyAppName-4”有验证错误 3337。（Codfile 版本 78）

其中 myAppName 是应用程序名称（cod 文件的名称）

，如下图所示：

![在此处输入图像描述](../Images/8b0e784d6f9ce5462d07e39d90ccb580.png)

我检查了事件记录器，这里包含的内容（从旧到新）：

*   一个系统 - VM:LINK MyAppName
*   一个系统 - VM:VECPs=my.Package.Name.Containing.Screens
*   系统 - VM:VECCs=oneOfMyScreenClassNames
*   一个系统 - VM:VECMm=functionInOneOfMyClasses()
*   模块“MyAppName-4”有验证错误 3337（codfile 版本 78）
*   链接器错误：MyAppName 的“VerifyError”
*   Error started myAppName: Module 'MyAppName-4' has verification error 3337 (codfile version 78)
    以下是内容：
    ![在此处输入图像描述](../Images/7e1b7a3ed3ed8862f96580ed0d51a3e3.png)
*   **E 系统 - JVM:INFOp=2100000a,a='7.0.0.296',o='4.0.0.127',h=7001204**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:45:47.170

对于那些感兴趣的人，我找到了解决方案。

在日志中有：

```
a System - VM:VECCs=oneOfMyScreenClassNames
a System - VM:VECMm=functionInOneOfMyClasses() 
```

我在日志中指示的整个班级“oneOfMyScreenClassNames”中做了接下来的步骤

以下是步骤：

1.  如果您从构建 Java Archive (JAR) 文件开始，然后使用 RIM 应用程序编译器 (RAPC) 创建 .cod 文件，请确保在构建 JAR 文件时关闭混淆。RAPC 编译器执行自己的混淆，如果代码已经被混淆，则可能会出现问题。

2.  删除任何 System.out.* 调用。这些通常在 BlackBerry 智能手机上不起作用，但它们可能会导致验证错误。

3.  删除未使用的导入语句。

4.  明确指定每个函数或变量的访问权限。例如，确保将每一项都指定为公共、私有或受保护。

5.  如果您正在使用 MIDlet，请确保将 MIDlet 类声明为公共的。

6.  如果 COD 文件已损坏或未正确签名，则可能会出现验证错误。确保您执行干净的重建并重新签署您的应用程序。在 BlackBerry 智能手机上重新安装应用程序。

7.  注释掉任何不可执行的代码。验证错误可能与主代码文件和库文件的大小有关。如果您注释掉不可执行的代码，文件大小会发生变化，这可能会纠正问题。

8.  如果您创建了从 RIM 类继承的任何类，请更改您在这些类中创建的任何自定义方法和成员的名称。这确保您没有在内部 RIM 类中命名任何方法或同名成员。

9.  如果您的应用程序使用的是 BlackBerry® Device Software 3.8 或更高版本，当使用 BlackBerry® Java® Development Environment (BlackBerry JDE) 4.0 之前的版本编译实现 javax.microedition.rms.RecordStore 类的应用程序时，会出现验证错误。如果应用程序使用 RecordStore 类的 addRecordListener 或 removeRecordListener 方法，就会发生这种情况。要解决此问题，请使用 BlackBerry JDE 4.0 或更高版本重新编译应用程序。

10.  BlackBerry® Java® Virtual Machine (BlackBerry JVM) 如何在另一个类的构造函数中直接处理一个类的引用存在问题。下面是一个例子： Class1 class1= new Class1(Class2.class.getName()); 要解决此问题，请不要在构造函数中进行类调用

11.  从内部类中删除对静态实例变量的引用。有几种方法可以删除这些引用，例如在外部类中为 var 创建 get/set 方法或修改逻辑以将 MyInnerClass 拉出 MyOuterClass。

12.  构建过程通常使用 javac 命令从 java 源文件编译，然后运行 ​​preverify.exe 文件，然后运行 ​​RAPC。将以下命令行参数添加到 javac 以帮助避免早期版本的 RAPC 中的问题： javac.exe -source 1.3 -target 1.1

13.  一些很长的方法可能会导致验证错误。通过将这些方法分解为辅助方法，您可以减少验证错误的可能性。

14.  虽然不太可能，但一些非常长的方法定义（具有 10 个或更多参数）和一些非常长的常量定义（长包结构和/或长名称）也可能导致验证错误。

来源：[http ://www.blackberry.com/knowledgecenterpublic/livelink.exe/fetch/2000/348583/800332/832062/Support_-_Preventing_verification_errors.html?nodeid=1499031&vernum=0](http://www.blackberry.com/knowledgecenterpublic/livelink.exe/fetch/2000/348583/800332/832062/Support_-_Preventing_verification_errors.html?nodeid=1499031&vernum=0)

PS，我还删除了代码中的“ **instanceOf** ”用法

# procobol - 执行错误：文件 'rm1p0018' 错误代码：114，pc=0，call=1，seg=0 114 尝试访问超出内存边界的项目（信号 11）

> ID：11882812
> 
> 赞同：0
> 
> 时间：2012-08-09T11:51:38.387
> 
> 标签：procobol

当我在 HP-UX 服务器上运行脚本时，出现以下错误。脚本正在调用由 cobol 文件生成的一个可执行文件（ rm1p0018 ）。

以下是日志中的错误消息：

```
Execution error : file 'rm1p0018' 
error code: 114, pc=0, call=1, seg=0 
114 Attempt to access item beyond bounds of memory (Signal 11) 

HP/MF COBOL Version: B.13.50 
HP-UX df2hp405 B.11.11 U 9000/800 
pid: 12766 gid: 20 uid: 9831 
Wed Aug 8 08:52:19 2012 
8:52am up 2 days, 11:04, 4 users, load average: 0.01, 0.01, 0.01 
Thread mode: No Threads 
RTS Error: COBOL 
Sync Signals: COBOL 
ASync Signals: COBOL 
cobtidy on exception: False 
```

最近oracle数据库从HP-UX迁移到AIX服务器，从9i升级到10g。

最初应用程序和数据库都驻留在 HP-UX 服务器上，但现在应用程序驻留在 HP-UX 上，而数据库驻留在 AIX 服务器上。

有人可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T22:31:34.090

有点难以猜测这种内存违规的原因。如果您能够重新编译 Cobol 程序，我建议您使用“就绪跟踪”来跟踪它。语句以及 $set 跟踪指令。然后，您将能够跟踪所有执行的 cobol 段落，并推断出程序停止并引发错误的段落。

# c# - 在 C# 中将表准备为 PHP？

> ID：11882815
> 
> 赞同：2
> 
> 时间：2012-08-09T11:51:44.720
> 
> 标签：c#, php

我有准备表的小问题。通常我通常在 PHP 中准备这个表：

```
array(2) {
  ["function"]=>
     string(14) "saveStats"
  ["data"]=>
  array(10) {
     ["id"]=>
         string(28) "6079f20ac3_1344412683016_427"
     ["stat"]=>
         array(2) {
             [461]=>
                 string(572) "1834!:!606113;2636701;2532259;8615557991;"
             [462]=>
                 string(664) "947679;1976657;1457921;1302869;2966923;2361071;6876943;5641369;560761;3469061;5438071;9646643;8575873;339307;9652169;2581441;5158451;6210209;6062971;2815237;3396139;2527643;2502571;7882529;536729;1171073;8825407;351427;1845373;8828471;1099463;6653011;5433293;86027;8258377;6748487;5237059;8006827;3996193;117389;7449523;9847147;3476761;7073981;7491493;1603837;8972801;699401;3354649;8120317;3405823;8545499;2672701;1373363;2397077;3417523;8772983;157999;6294929;6024589;6760669;5923937;4560691;8324143;824477;3575549;1372559;986287;4860203;5774323;1832353;4198973;3639841;9179101;718337;4949353;5745787;1608041;8169241;46549;3272723;7622267;"
    }
    ["userAgent"]=>
        string(67) "Mozilla/5.0 (Windows NT 6.1; rv:14.0) Gecko/20100101 Firefox/14.0.1"
    ["ip"]=>
        string(3) "::1"
    ["referer"]=>
        string(4) "Brak"
    ["limit"]=>
        int(1)
  }
} 
```

["stat"] 中的数据可以是数组 10 或 2 结尾，每个数组都有“随机”数字（查看 [461][462] 等）

我必须稍后将这些数据放入 JSON（我使用 newtonsoft.Json）。

我如何在 C# 中准备这个对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:33:34.723

试试这个（.NET 4）（见下文），唯一的问题是列 461 和 462，C# 不允许变量名以数字开头（我已将它们重命名为 n461 和 n462）但很容易弥补这一点使用 newtonsoft.Json[在这里看到类似的问题](https://stackoverflow.com/q/5404303/1045728)

```
var table =  new {
    function = "saveStats",
    data = new  {
        id = "6079f20ac3_1344412683016_427" , 
        stat = new List<dynamic>  {
                          new {  n461 = "1834!:!606113;263..." },
                          new {  n462 = "947679;1976657;14..." }
                        },
        userAgent = "Mozilla/5.0 (Windows NT 6.1; rv:14.0) Gecko/20100101 Firefox/14.0.1",
        ip = "::1",
        referer = "Brak",
        limit = 1
    }
 }; 
```

我使用了动态和匿名类，但您当然可以根据需要声明“真实”类。（如果您使用的是 .NET 3.5 或更早版本，这是必须的）

# php - 如何从查询中删除“LIMIT”之后的所有内容？（内有详情）

> ID：11882825
> 
> 赞同：1
> 
> 时间：2012-08-09T11:52:13.410
> 
> 标签：php

我得到了一些由我的脚本动态构建的查询。它们通常适合以下模板：

```
SELECT ... 
FROM ... 
JOIN ... 
WHERE ... (lots of filters, search conditions, etc. here) ... 
ORDER BY (optional) ... 
LIMIT (optional) ... OFFSET (optional) 
```

我想从查询中删除 LIMIT 和 OFFSET 部分。我用了

```
$sql_entitati = implode("LIMIT", explode("LIMIT", $sql_entitati, -1)); 
```

这样做，但它击中了我：如果查询中没有 LIMIT 怎么办，如果唯一的 LIMIT 在 where 子句中的某个地方怎么办？

所以我的问题是：如果没有 LIMIT 和/或 where 子句中的某处有“LIMIT”，我如何安全地删除 LIMIT 关键字之后的所有内容，而不会搞砸？所有这些都在 php.ini 中完成。

为了清楚起见，进行了一些编辑：

我使用的算法：

```
$sql = implode("LIMIT", explode("LIMIT", $sql, -1)); 
```

将适用于 99% 的案例。当末尾的“LIMIT”关键字丢失，并且条件中的某处写有“LIMIT”时，就会出现问题。例如：

```
 SELECT * FROM table WHERE bla = 'SPEED LIMIT' ORDER BY table.a 
```

这是我需要解决的问题。

使用以下算法解决（感谢 techfoobar）：

```
 $p = strrpos($sql, "LIMIT");
    if($p !== false) {
        $q = strpos($sql, ")", $p);
        $r = strpos($sql, "'", $p);
        $s = strpos($sql, "\"", $p);
        if($q === false && $r === false && $s === false)
            $sql = substr($sql, 0, $p);
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T12:13:35.193

您应该执行以下操作：

1.  获取*最后一个*“LIMIT”的位置 - 将此位置存储在say中，`p`
2.  确保后面没有`")"`字符`p`- 如果有，它是条件等内部查询的一部分。
3.  确保后面没有`"'"`字符`p`- 如果有，它是某些用户输入字符串的一部分
4.  如果通过了第 2 步和第 3 步，则在之后剥离所有内容`p`

更多提示：

*   对于第 1 步 -`strrpos`用于最后一次出现`LIMIT`
*   对于第 2 步和第 3 步，使用`strpos`with`p`作为搜索起始偏移量
*   对于第 4 步，使用`substr`剥离之后的所有内容`p`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T12:00:20.830

获取 LIMIT 的位置，用 !==FALSE 检查它是否存在，然后是子字符串。

```
$str = "SELECT X FROM Y JOIN WHERE CONDITIONS ORDER BY ORDERS LIMIT OFFSET";

$pos = strrpos($str,"LIMIT");
if ($pos!==false)
{
$newStr = substr($str,0,$pos);
echo $newStr;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T12:10:27.920

试试这个方法

```
$query = '';
$query .= 'SELECT...';
$query .= 'FROM ...';
$query .= 'JOIN ...';
$query .= 'WHERE...';
if ($limit)
{
    $query .= " LIMIT $limit";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T12:20:38.210

这可能会帮助你...

```
$str = " SELECT * FROM table WHERE bla = 'SPEED LIMIT' ORDER BY table.a";

$pos = strrpos($str,"LIMIT");
if ($pos!==false)
{
    $ok = 1;
    if(substr_count($str, '"', $pos) % 2 != 0)
    {
        $ok = 0;
    }
    if(substr_count($str, "'", $pos) % 2 != 0)
    {
        $ok = 0;
    }

    if(substr_count($str, ")", $pos) > 0)
    {
        $ok = 0;
    }

    if($ok == 1)
    $str = substr($str,0,$pos);
}

echo $str; 
```

# python - Celery 动态队列创建和路由

> ID：11882826
> 
> 赞同：8
> 
> 时间：2012-08-09T11:52:17.450
> 
> 标签：python, rabbitmq, celery

我正在尝试调用一个任务并为该任务创建一个队列，如果它不存在，然后立即将调用的任务插入该队列。我有以下代码：

```
@task
def greet(name):
    return "Hello %s!" % name

def run():
    result = greet.delay(args=['marc'], queue='greet.1',
        routing_key='greet.1')
    print result.ready() 
```

然后我有一个自定义路由器：

```
class MyRouter(object):

    def route_for_task(self, task, args=None, kwargs=None):
        if task == 'tasks.greet':
            return {'queue': kwargs['queue'],
                    'exchange': 'greet',
                    'exchange_type': 'direct',
                    'routing_key': kwargs['routing_key']}
        return None 
```

这会创建一个调用的交换`greet.1`和一个调用的队列，`greet.1`但队列是空的。应该只调用交换器`greet`，它知道如何将路由键路由`greet.1`到名为的队列`greet.1`。

有任何想法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-16T17:08:20.043

当您执行以下操作时：

```
task.apply_async(queue='foo', routing_key='foobar') 
```

然后 Celery 将从 CELERY_QUEUES 中的 'foo' 队列中获取默认值，或者如果它不存在，则使用 (queue=foo, exchange=foo, routing_key=foo) 自动创建它

因此，如果 CELERY_QUEUES 中不存在“foo”，您最终会得到：

```
queues['foo'] = Queue('foo', exchange=Exchange('foo'), routing_key='foo') 
```

然后生产者将声明该队列，但由于您覆盖了 routing_key，因此实际上使用发送消息`routing_key = 'foobar'`

这可能看起来很奇怪，但这种行为实际上对主题交换很有用，您可以在其中发布到不同的主题。

虽然很难做你想做的事，你可以自己创建队列并声明它，但这不适用于自动消息发布重试。如果 apply_async 的 queue 参数可以支持自定义`kombu.Queue`而不是声明并用作目的地会更好。也许你可以在[http://github.com/celery/celery/issues打开一个问题](http://github.com/celery/celery/issues)

# php - Facebook和图片帖子

> ID：11882833
> 
> 赞同：0
> 
> 时间：2012-08-09T11:52:37.863
> 
> 标签：php, facebook

我想发布到带有附加图片的社区墙帖。如果我使用`/page/feed`带有`picture`参数的简单 api 调用，它会插入一个小图像。但我想附加大图像，例如来自画廊。当我将照片上传到画廊时，它会自动发布到墙上。但是当我发布 >= 3 张照片时，所有这些帖子都会合并为一个包含所有插入图像的帖子。

问题是如何为每个上传的图像获取不同的帖子？或者，也许我不仅可以附加到`/page/feed`api `picture`，还可以附加到将上传到相册的图像？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T03:15:46.983

当您说“附加大图像”时，我假设您正在发布到 /PAGE_ID/photos，对吗？如果您上传 3 张或更多图片，是的，当它们显示在页面的提要中时，它们将被折叠起来。这是 Feed 的“功能”，可以组织和折叠一起上传的图像。

想象一下，如果您将 20 张照片上传到页面并且它们没有被折叠；提要将以照片为主，并且很难看到任何其他内容（例如在上传照片之前发布的内容）。

如果您可以提供您所看到的屏幕截图，我可以确认这一点。

是的`/PAGE_ID/feed`，`picture`是帖子的缩略图。示例：伴随包含一段文本（或链接）的帖子的缩略图。

[https://developers.facebook.com/docs/reference/api/page/](https://developers.facebook.com/docs/reference/api/page/)

# sql-server-2008 - 我正在尝试插入选定的项目，如果我需要使用光标或简单的插入与选择结合就足够了，我会感到困惑吗？

> ID：11882841
> 
> 赞同：1
> 
> 时间：2012-08-09T11:53:21.857
> 
> 标签：sql-server-2008, select, insert, cursor

我想出了这个查询，赞美时不会产生任何错误，但我不知道我是否可以使用这个 `select`语句作为`value`

```
insert into store(c1 ,artno, c3, c4, c5, c6, c7 )
           select '1', a.artno, 0,0.0,null,null,null 
           from art a
              left join store s on s.artno=a.artno
              inner join status b on a.artno = b.artno
    where b.state ='5'  
      and s.artno is null  
      and a.artgroup not in('63','280') 
```

我还看到了另一种可以使用的替代方法，但不确定它是否可以`insert`按照我的要求使用，我看到这是在存储过程中实现的，所以只是抓住了它是否可以使用的想法？

```
declare @artno as varchar(150); 
declare @count as tinyint

Declare cS CURSOR For
               select  a.artno
               from art a
              left join store s on s.artno=a.artno
              inner join status b on a.artno = b.artno
    where b.staus ='5'  
      and s.artno is null  
      and a.artgroup not in('63','280') 

Open cS
Fetch NEXT from cS into @artno

While @@FETCH_STATUS=0

select @count=COUNT(*) from store where artno=@artno
if @count=0 

 BEGIN

insert into store(c1 ,artno, c3, c4, c5, c6, c7 )
           values('1', a.artno, 0,0.0,null,null,null)                 

    fetch next from cS into @artno                 
 END 
 close cS
 deallocate cS 
```

一些解释哪些使用，哪些不使用以及为什么，也会对我的知识有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:00:36.663

光标是内存密集型和耗时的。而`SELECT INTO`会预先构建要插入的表格内容，并且可以一次性完成。同样在 情况下`SELECT INTO`，SQL 引擎有机会优化数据获取，而在情况下`cursor`，您将强制数据库按顺序获取行并且无法进行优化。

[http://blog.sqlauthority.com/2011/08/10/sql-server-use-insert-into-select-instead-of-cursor/](http://blog.sqlauthority.com/2011/08/10/sql-server-use-insert-into-select-instead-of-cursor/)

浏览上述支持我的声明的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T14:18:20.867

由于在其他任何地方都没有提到它，因此游标还有另一个问题。对数据库的每次插入/更新都需要从客户端到服务器的往返通信。

从性能的角度来看，这实际上比听起来更糟糕。数据库通常旨在有效地将数据批量插入表中。插入 100 行的努力很少是插入 1 行的努力的 100 倍。更典型的是，它只会更长一点。

当您使用游标时，您正在强制“序列化”操作。因此，必须先完成第一行的整个操作，然后才能移至第二行。这会从根本上降低性能。

正如其他人所提到的，尽可能使用基于集合的操作。如果你不能，考虑改变问题，这样你就可以;-)

# hyperlink - 如何通过批处理自动转到超链接

> ID：11882847
> 
> 赞同：0
> 
> 时间：2012-08-09T11:53:31.850
> 
> 标签：hyperlink, batch-processing, double-click

如何通过批处理自动转到超链接？

我对批处理有很好的了解，但我不知道是否有人可以通过 .bat 文件打开指定的链接...

**编辑：**我想制作一个批处理文件（.bat）并双击我想在我的浏览器中打开一个指定的链接..

那么有可能吗？请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T11:56:46.977

你可以试试 Wget for Windows - [http://gnuwin32.sourceforge.net/packages/wget.htm](http://gnuwin32.sourceforge.net/packages/wget.htm)，这很好用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T04:54:03.003

我们可以在以下帮助下做到这一点：

```
 "C:\Program Files\Internet Explorer\iexplore.exe" www.google.com 
```

-@Rainer.R 提供

# datetime - iCal 中的 ATTENDEE "RESPONDED-AT" 参数

> ID：11882849
> 
> 赞同：1
> 
> 时间：2012-08-09T11:53:34.587
> 
> 标签：datetime, outlook, icalendar, appointment

在 iCal 中是否有可能有点像这样？

参加者：回复-AT：20120728T050000Z：MAILTO：test@domain.com

iCal 规范似乎没有提供任何方法来跟踪与会者响应的日期时间。但是，当与 MS Outlook 同步时，它会成为一个问题，因为 Outlook 会显示“请回复”，直到您正确设置其 AppointmentItem.ReplyTime（如果您是活动的参与者）。当然，我可以将其设置为任意值（例如创建事件的时刻），但是当最终用户在 Outlook 的用户界面中看到它时，这对最终用户来说不会太友好。

目前我正在尝试手动添加 RESPONDED-AT，但我不确定其他 CalDAV/iCal 客户端不会清除它，因为它是非标准的。

# android - addAction 时通知不会自动取消

> ID：11882854
> 
> 赞同：1
> 
> 时间：2012-08-09T11:53:45.373
> 
> 标签：android, notifications, android-4.2-jelly-bean

我已经测试了正确显示的新 BigTextStyle 通知。但是，当我向通知添加操作时，它永远不会取消，并且单击操作时下拉通知区域永远不会关闭。我做错了什么？

```
 Drawable d = getResources().getDrawable(android.R.drawable.ic_menu_add);
    Bitmap b = ((BitmapDrawable)d).getBitmap();
    Notification noti = null;

    Intent notificationIntent = new Intent(MainActivity.this, MainActivity.class);

    String s = "Name: John \n"
            + "Surname: Doe\n"
            + "Vehicle: Honda Jazz TA-1234\n"
            + "Note: Good drifter";

    Builder builder = new Notification.Builder(MainActivity.this)
            .setContentTitle("New challenger arrived!")
            .setContentText(s)
            .setSmallIcon(R.drawable.ic_launcher)
            .setLargeIcon(b)
            .setTicker("New challenger arrived!")
            .setPriority(Notification.PRIORITY_HIGH)
            .setAutoCancel(true)
            .setDefaults(Notification.DEFAULT_ALL)
            .setNumber(5)
            .addAction(
                    android.R.drawable.ic_menu_add,
                    "Accept",
                    PendingIntent.getActivity(getApplicationContext(), 0,
                            notificationIntent, 0, null))
            .addAction(
                    android.R.drawable.ic_menu_delete,
                    "Refuse",
                    PendingIntent.getActivity(getApplicationContext(), 0,
                            notificationIntent, 0, null))
            .addAction(
                    android.R.drawable.ic_dialog_map,
                    "Map",
                    PendingIntent.getActivity(getApplicationContext(), 0,
                            notificationIntent, PendingIntent.FLAG_UPDATE_CURRENT, null));

    noti = new Notification.BigTextStyle(builder)
                        .setBigContentTitle("New challenger arrived!")
                        .bigText(s)
                        .setSummaryText("You will never win against me").build();

    NotificationManager nm = (NotificationManager) MainActivity.this
            .getSystemService(Context.NOTIFICATION_SERVICE);

    nm.notify(0, noti); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T18:48:11.313

如果您采取行动，我认为您必须手动取消通知。这可以通过调用来完成

```
notifMgr.cancel(0); 
```

单击通知本身应该将其关闭，但由于某种原因，操作似乎没有。您将 0 作为参数传递的原因是因为这是您在调用时提供的 ID：

```
notifMgr.notify(0, noti); 
```

这是我更新的答案，但是，我之前回答过这个：

看起来您正在尝试启动您当前显示的相同活动（来自您的 PendingIntent）（我假设这是一个 1-activity 应用程序，MainActivity 包含上面的代码）。创建另一个活动，构建您的 PendingIntent 以便启动该活动，然后它应该按照您的意愿进行操作。或者，运行您的活动，出现通知，导航到主屏幕或其他应用程序，然后对您的活动采取行动，您所需的行为应该会体现出来。

# c# - 在 C# 中销毁非托管对象

> ID：11882857
> 
> 赞同：2
> 
> 时间：2012-08-09T11:53:54.430
> 
> 标签：c#, unmanaged

我现在正在开发一个应用程序，它使用一堆外部 DLL 来连接到某处的服务器。奇怪的是，这些 DLL 的公开方法允许连接，但不允许断开连接或关闭。这些库工作正常，除非您在一个块中对服务器进行大量后续调用，所以我决定做的是在 X 次调用后断开连接并重新连接。

然而，问题就在这里。我无法断开连接，因为没有给出断开连接的方法。所以我的问题是，我怎样才能完全杀死这个非托管对象，以便我可以重新创建它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:57:24.357

如果您在 C# 中使用非托管资源，您应该让您的类使用非托管资源并与之交互，使用块实现[`IDisposable`](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)、创建和销毁它们[`using`](http://msdn.microsoft.com/en-us/library/yh598w02%28v=vs.80%29.aspx)。

如果您无法断开连接，取决于您所连接的具体内容，有时将包含非托管资源的变量设置为 null 会清除其中的一些内容。但实际上，如果没有适当的断开/处置方法，您将无能为力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T12:20:44.947

您可以手动关闭与服务器的底层连接。如果不了解更多关于您使用的服务（HTTP TCP 等？），我无法再帮助您如何做到这一点。您可以放置​​一个跟踪（如wireshark）并查看正在传输的内容。

底线是他们的软件坏了。不能联系卖家吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T10:35:35.090

我能找到的最佳解决方案是在它自己的线程中运行对外部 DLL 的每个调用，最终在线程结束时被杀死。这是唯一有效的解决方案，因为我无法访问更新的 DLL。

# dojo - 使用 Dojo 查询节点并设置样式

> ID：11882862
> 
> 赞同：0
> 
> 时间：2012-08-09T11:54:12.050
> 
> 标签：dojo

我的 HTML 中有以下节点结构：

```
<div id="widget1" class="dojoxFloatingPane dijitContentPane dojoxFloatingPaneFg" title=""     role="group" style="position: absolute; top: 82px; left: 231px; width: 984px; height: 276px; z-index: 102;" widgetid="widget1">
<div class="dojoxFloatingPaneTitle" dojoattachpoint="focusNode" role="button" tabindex="0">
<div class="dojoxFloatingPaneCanvas" dojoattachpoint="canvas" style="left: 0px; top: 0px; width: 984px; height: 249px;">
<iframe class="dijitBackgroundIframe" src="javascript:""" role="presentation" style="opacity: 0.1; width: 100%; height: 100%;" tabindex="-1"> 
```

我正在尝试使用 Dojo 设置此 FloatingPane 的大小，并使用以下代码。首先，我读入节点 widget1 节点，然后查找 dojoxFloatingPaneTitle 类并将这些节点存储在变量中。然后我读取了 cookie，它成功地在 paneNode 上设置了样式。

```
 var paneNode = dom.byId("widget1");
            var canvasNode = query(".dojoxFloatingPaneCanvas", paneNode);               

  function(){
                    var wid1saved = dojo.fromJson(cookie("widget1"));
                    domStyle.set(paneNode, {
                        left: wid1saved.x + "pt",
                        top: wid1saved.y + "pt", 
                        width: wid1saved.w + "px", 
                        height: wid1saved.h + "px",
                        position: "absolute"
                    });
                    domStyle.set(canvasNode, {
                        width: wid1saved.w + "px",
                        height: wid1saved.h + "px",
                        backgroundColor: "black"
                    });
                } 
```

它确实设置了外部节点（paneNode）的大小，但内部的画布（canvasNode）没有改变。在调试器中，我可以看到查询确实找到了正确的节点。为什么没有设置 canvasNode 样式的任何想法？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T12:04:10.367

dojo.query 通常返回找到的对象的数组。

你有没有尝试过：

```
var canvasNode = query(".dojoxFloatingPaneCanvas", paneNode)[0]; 
```

# c++ - throw关键字的使用

> ID：11882863
> 
> 赞同：3
> 
> 时间：2012-08-09T11:54:15.333
> 
> 标签：c++, try-catch, throw

我最近开始用 C++ 编码，我对以下代码有疑问。我在使用“throw”关键字时遇到问题。在中位数或等级函数中什么时候会报错？throw 和 domain_error 的具体用法是什么？我会从成绩或中位数函数中收到错误消息吗？

```
#include<iostream>
#include<string>
#include<vector>
#include<iomanip>
#include<ios>
#include<algorithm>
#include<stdexcept>

using std::cout; using std::cin;
using std::vector; using std::endl;
using std::string; using std::streamsize;
using std::setprecision; using std::domain_error;
using std::istream;

double grade(double midterm, double final, double homework)
{
   return 0.2*midterm+0.4*final+0.4*homework;
}

double median(vector<double> vec)
{
   typedef vector<double>::size_type vec_sz;
   vec_sz size= vec.size();
   if(size==0)
   {
       throw domain_error("Median of an empty vector"); //when will i get this error msg??
   }
   sort(vec.begin(),vec.end());
   vec_sz mid=size/2;

   return size%2==0?(vec[mid]+vec[mid-1])/2:vec[mid];
}

double grade(double midterm, double final, const vector<double>& hw)
{
   if(hw.size()==0)
   {
       throw domain_error("Student has done no homework");// when will i get this error?
   }
   return grade(midterm, final, median(hw));
}

istream& read_hw(istream& in, vector<double>& hw)
{
     if(in)
     {
         hw.clear();

         double x;
         while(in>>x)
         hw.push_back(x);

         in.clear();
     }
     return in;
}

int main()
{
    string name;
    cout<<"Please enter your name:";
    cin>>name;
    cout<<"Hello "<<name<<"!"<<endl;
    cout << "Please enter your midterm and final exam grades: ";
    double midterm, final;
    cin >> midterm >> final;
    cout << "Enter all your homework grades, "
                   "followed by end-of-file: ";
    vector<double> homework;
    read_hw(cin, homework);
    try {
        double final_grade = grade(midterm, final, homework);
        streamsize prec = cout.precision();
        cout << "Your final grade is " << setprecision(3)
        << final_grade << setprecision(prec) << endl;
    } catch (domain_error) {
        cout << endl << "You must enter your grades. "
        "Please try again." << endl;
        return 1;
    }

    return 0;

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T11:59:29.800

`catch`您可以从语句中的异常中获取消息。

```
try { 
    double final_grade = grade(midterm, final, homework); 
    streamsize prec = cout.precision(); 
    cout << "Your final grade is " << setprecision(3) << final_grade 
         << setprecision(prec) << endl; 
} catch (const domain_error& error) {

    cout << error.what();  // <-- Will print your message.

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T12:03:00.407

如果传递的函数不包含任何元素，该函数`double median(vector<double> vec)`将抛出一个。出于同样的原因，该函数将抛出它 - 如果一个向量为空。`domain_error``vec``double grade(double midterm, double final, const vector<double>& hw)``hw`

一旦`throw domain_error("...")`被执行，`median`或`grade`将停止执行，控制将立即传递给最近的相应catch块，它`catch (domain_error)`位于`main`. 可以使用对象的函数检索`what`消息`domain_error`。

```
} catch (const domain_error& ex) {
        cout << ex.what() << endl;
        return 1;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T12:04:04.753

想象一系列相互调用的函数：

```
A -> B -> C -> D -> E -> F -> G 
```

如果`G`抛出 type 的异常`X`，并且`D`是捕获 type 异常的最接近的函数`X`，或者它的父级之一，or `...`，则函数`G`, `F`and`E`将被关闭并`D`捕获异常。

在您的情况下，两个异常都将被捕获`main`：

```
} catch (domain_error) { 
```

然而，在这个捕手的主体中，你并没有做太多有用的事情：

```
cout << endl << "You must enter your grades. "
    "Please try again." << endl;
return 1; 
```

首先，您没有打印使用`domain_error`. 请参阅[Bo Persson](https://stackoverflow.com/a/11882962/912144)的回答。

其次，如果你想再试一次，你应该把整个 main 放在一个循环中，而不是`return`你`continue`.

最后，不要将异常视为一种出色的错误处理方式，[它们并不是那么好](https://stackoverflow.com/q/1744070/912144)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T12:07:02.610

`throw`关键字意味着如果到达这行代码（即 if 中的语句为真），那么它将向堆栈抛出一个错误，直到它被捕获。

那是什么意思？这意味着如果您调用该函数`grade`并引发错误，则有两种选择：

1）如果对函数的调用在`try and catch`块内，即：

```
try {
    grade();
} catch(domain_error) {
    cout << "An error occured" << endl;
} 
```

然后它将捕获它，执行 catch 子句中的内容，然后程序将继续。

2) 如果调用不在 try 和 catch 块内，那么它将递归地弹出调用这个函数的函数，直到到达 try 和 catch 块，或者堆栈中没有更多函数。在这种情况下，由于未捕获的异常，它很可能会崩溃（这就是它在 java 中所做的）。

希望这一切都清楚了。

另外请注意，catch 子句中的错误，应该与被抛出的错误相同，否则不会捕获它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T12:24:35.677

您的问题已经得到解答，但是关于您所写的内容，我想提几点。

*在我个人看来*，我认为您`exception`完全没有必要使用这里。

您重载了该函数`grade`，并使您的代码在这样做时感到困惑。

您的`median`函数采用`std::vector`参数 by `value`，其中不需要发生副本（在您的示例中）。

您正在检查**具有完全相同内容**的两个向量的长度两次，并抛出两个异常。在您的示例中`median`永远**不会抛出异常。**

这一切都可以避免。

```
double median(vector<double>& vec)
{       
   sort(vec.begin(),vec.end());
   vec_sz mid = size/2;
   return size%2==0?(vec[mid]+vec[mid-1])/2:vec[mid];
}

double grade(double midterm, double final, double homework)
{
  return 0.2*midterm+0.4*final+0.4*homework;
} 
```

在你的主要：

```
if(hw.size())
{
  double final_grade = grade(midterm, final, median(hw));
}
else
{
  cout << endl << "You must enter your grades. "
  "Please try again." << endl;
  return 1;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-08T10:33:09.790

@Aesthete。我认为中**值**函数应该按**值采用****std::vector**参数。在[Accelerated C++](https://rads.stackoverflow.com/amzn/click/com/020170353X)一书中，作者解释了原因。

 **> 中**值函数通过调用****sort**更改其参数的值。复制参数可防止 sort 所做的更改**传播**回调用者。这种行为是有道理的，因为**取向量**的**中位数**不应该改变 vecotr 本身。

 **如果不喜欢这个，我会在编译这个文件时得到以下错误信息（mingw32-g++.exe）

> 错误：从“const std::vector”类型的表达式中对“std::vector&”类型的引用进行无效初始化|
> 
> 错误：在传递“双中位数（std::vector&）”的参数 1|****

# android - 如何知道一个jar文件是否可以在Android上运行？

> ID：11882864
> 
> 赞同：0
> 
> 时间：2012-08-09T11:54:15.077
> 
> 标签：android, jar, hidden-markov-models

我问这个是因为我想在 android 应用程序中使用[这个隐马尔可夫模型分类器。](https://code.google.com/p/jahmm/)该库不使用任何图形用户界面，所以我猜我可以这样使用吗？

如何知道哪些罐子我们可以，哪些不能在 android 上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T11:58:31.110

大多数 jars 可以直接在 android 中使用，因为 Android SDK 包含大部分 Java 的标准实现。

如果您使用 eclipse，如果 jar 链接到 android 未知元素（最常见的元素之一是 awt 功能），您将在创建 .apk 时出错

# javascript - 当我按下按钮时，页面只是空白并永远加载

> ID：11882865
> 
> 赞同：2
> 
> 时间：2012-08-09T11:54:16.090
> 
> 标签：javascript, html, function, google-visualization

[http://jsfiddle.net/iansan5653/7EPjH/17/](http://jsfiddle.net/iansan5653/7EPjH/17/)

```
<head>
    <script type='text/javascript' src='https://www.google.com/jsapi'></script>
    <script type="text/javascript">
    function chart() {
        var pressure;
        var temperature;
        var humidity;
        var url = 'http://pipes.yahoo.com/pipes/pipe.run?_id=97c669df9c4795db96b39188000c1998&_render=json&lat=26.6403&lon=-81.8725';
        $.getJSON(url,
            function(data){
                pressure = data.value.items[0].data[1].parameters.pressure.value;
                temperature = data.value.items[0].data[1].parameters.temperature[0].value;
                humidity = data.value.items[0].data[1].parameters.humidity.value;
            }
        );

        google.load('visualization', '1', {
            packages: ['gauge']
        });
        google.setOnLoadCallback(drawChart);

        function drawChart() {

            pressure = eval(pressure);
            var barData = google.visualization.arrayToDataTable([
                ['Label', 'Value'],
                ['C/Precip', pressure]
                ]);

            var barOptions = {
                width: 400,
                redFrom: 28,
                redTo: 29,
                yellowFrom: 29,
                yellowTo: 30,
                greenFrom: 30,
                greenTo: 31,
                min: 28,
                max: 31,
                majorTicks: ["28","29","30","31"],
                minorTicks: 10
            };

            var barChart = new google.visualization.Gauge(document.getElementById('barometer_div'));
            barChart.draw(barData, barOptions);

            temperature = eval(temperature);
            var thermData = google.visualization.arrayToDataTable([
                ['Label', 'Value'],
                ['Temp (F)', temperature]
                ]);

            var thermOptions = {
                width: 400,
                redFrom: 80,
                redTo: 120,
                yellowFrom: 0,
                yellowTo: 40,
                yellowColor: '0099FF',
                greenFrom: 40,
                greenTo: 80,
                min: 0,
                max: 120,
                majorTicks: ["0","10","20","30","40","50","60","70","80","90","100","110","120"],
                minorTicks: 10
            };
            var thermChart = new google.visualization.Gauge(document.getElementById('thermometer_div'));
            thermChart.draw(thermData, thermOptions);

            humidity = eval(humidity);
            var humidData = google.visualization.arrayToDataTable([
                ['Label', 'Value'],
                ['Humidity', humidity]
                ]);

            var humidOptions = {
                width: 400,
                yellowFrom: 10,
                yellowTo: 40,
                greenFrom: 40,
                greenTo: 70,
                redColor: '0099FF',
                redFrom: 70,
                redTo: 100,
                min: 10,
                max: 100,
                majorTicks: ["10","20","30","40","50","60","70","80","90","100"],
                minorTicks: 10
            };
            var humidChart = new google.visualization.Gauge(document.getElementById('humidostat_div'));
            humidChart.draw(humidData, humidOptions);
        }
    }
    </script>
</head>
<body>
    <button onclick="chart()">Draw Chart</button>
    <div id='barometer_div'></div>
    <div id='thermometer_div'></div>
    <div id='humidostat_div'></div>
</body>
```

我设法让 Google Charts 代码在没有成为函数的情况下正常工作，但是当我将所有代码包装在一个函数中并尝试通过按下按钮调用该函数时，页面只会永远加载。我尝试运行 JSLint 来清理代码，但它仍然不起作用。此外，错误控制台（我使用的是 Firefox）不会给出任何错误或警告。我只是不明白为什么会这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T13:45:24.597

[给你](http://jsfiddle.net/7EPjH/26/)...`google.setOnLoadCallback(drawChart);`从来没有调用过，所以我在 google.load 中添加了一个回调函数：

```
google.load('visualization','1',{'packages':['gauge'],'callback':drawChart}) 
```

# mysql - MySQL Join 重复问题？

> ID：11882867
> 
> 赞同：0
> 
> 时间：2012-08-09T11:54:21.123
> 
> 标签：mysql

考虑以下 MySQL 表：

*死亡率*（包含哪些饲养者死亡的仔猪）

```
raiserID  |  issuedDate  |  rotationNo |  numberDead
-----------------------------------------------------
   0052      2012-08-03         1             3 
```

*PIGLET_PO*（包含饲养者购买仔猪交易）

~ raisers 可以在这里有多个记录

```
raiserID  |  deliveredDate  |  rotationNo  |  noOfDeliveredPigs  |  sellerID
------------------------------------------------------------------------------
   0052       2012-07-20          1                  10                1
   0052       2012-07-21          1                  15                1 
```

*SELLER_LIST*

```
sellerID |  sellerName  
------------------------
    1       Solar Farm 
```

预期结果：

```
sellerName  |  population  |  deceased
-----------------------------------------
Solar Farm         25            3 
```

*   饲养员是照顾/饲养猪/猪的人
*   rotationNo 是一个唯一标识符，表示饲养者已经进行或当前正在进行的饲养周期

到目前为止，我有以下查询，它给我的结果类似于预期的结果，唯一的问题是**我得到的值为 6 而不是 3 的已故列**。我不确定，但我的猜测是它与 piglet_po 有两个记录/行有关。我在这里想念什么？

```
SELECT s.sellerName AS sellerName, SUM(p.noOfDeliveredPigs) AS population, SUM(numberDead) AS heads
FROM mortality m

JOIN piglet_po p
ON m.raiserid = p.raiserid
AND m.rotationNo = p.rotationNo

JOIN seller_list s
ON p.sellerID = s.sellerID

// This WHERE condition and the given string value that follow came from and is based on
a select drop-down box and shouldnt be modified since this is how I display them in html
WHERE DATE_FORMAT(m.issuedDate, '%M %Y') = 'August 2012' 
GROUP BY sellerName
HAVING SUM(numberDead) != 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:58:20.043

这是因为您在 join for table 中使用的列的值重复`piglet_po(p.rotationNo)`。相反，试试这个，或者你也可以`DISTINCT`在语句中使用子句`SELECT`。

```
SELECT s.sellerName AS sellerName, SUM(p.noOfDeliveredPigs) AS population, 
       SUM(numberDead) AS heads
FROM mortality m
    JOIN (SELECT rotationNo, raiserid, sellerID, SUM(noOfDeliveredPigs) AS noOfDeliveredPigs
          FROM  piglet_po 
          GROUP BY rotationNo, raiserid, sellerID
         ) p
         ON m.raiserid = p.raiserid
            AND m.rotationNo = p.rotationNo
    JOIN seller_list s
         ON p.sellerID = s.sellerID
WHERE DATE_FORMAT(m.issuedDate, '%M %Y') = 'August 2012'
GROUP BY sellerName
HAVING SUM(numberDead) != 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T12:55:34.120

试试这个：

```
select sellername , population  , deceased 
from
    (select p.rotationno,p.raiserid,s.sellername as sellername
           , sum(p.noofdeliveredpigs) as population 
    from piglet_po p
    join seller_list s
    on p.sellerid = s.sellerid 
    group by p.rotationno,p.raiserid,sellername)p
join
    (select rotationno,raiserid,sum(numberdead) as deceased
    from mortality 
    where date_format(issueddate, '%m %y') = 'august 2012'
    group by rotationno,raiserid)m
on m.raiserid = p.raiserid
and m.rotationno = p.rotationno 
```

# java - 2 个不同的 InitialContextFacory 实现在一个 Tomcat 中

> ID：11882868
> 
> 赞同：0
> 
> 时间：2012-08-09T11:54:21.963
> 
> 标签：java, jakarta-ee, tomcat, web-applications, jndi

我有一个旧版 Web 应用程序，它使用自己的 InitialContextFacory 和 Context 实现，它使用一些自己的 xml 文件格式来定义资源。此应用程序部署到 Tomcat (6.0.29)。

为 tomcat 设置 InitialContextFacory impl 系统属性：

```
java.naming.factory.initial=mypack.MyContextFactoryImpl 
```

现在我想将另一个应用程序部署到从 context.xml 加载资源的同一个 tomcat。但是我得到了 mypack.MyContextFactoryImpl 的类未找到异常，这很好，因为我的其他应用程序不知道这个类，并且设置 InitialContextFactory 的环境变量是全局的，因此适用于所有部署的应用程序。

那么我该如何解决这个问题，从而为tomcat中的第一个应用程序指定initialContextFactory呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T12:13:27.010

在Tomcat配置中有两种类型

**全球水平**

在中指定您的配置`$CATALINA_BASE/conf/server.xml`

**每个网络应用程序**

每个 Web 应用程序上下文 XML 文件`(META-INF/context.xml)`。

有关更多详细信息，请参阅此链接[http://tomcat.apache.org/tomcat-6.0-doc/jndi-resources-howto.html](http://tomcat.apache.org/tomcat-6.0-doc/jndi-resources-howto.html)

# html - 查看配置文件需要在同一个地方有或没有内容

> ID：11882871
> 
> 赞同：0
> 
> 时间：2012-08-09T11:54:43.300
> 
> 标签：html, css, position

当所有数据都可用时，我如何让下面的视图配置文件链接保持在同一位置我不知道如何使用 css 尝试底部：0 但这没有任何帮助，不胜感激。例如，如果您以 Gary Bennett 为例，我希望视图配置文件对于所有配置文件都位于同一位置。

[http://east-belfast.wsini.com/staff](http://east-belfast.wsini.com/staff)

一如既往地非常感谢任何帮助。

```
 <div class="thumbnail">
    <div id"content"  style="font-size:14px;min-height:140px;position:          relative;">

  <img src="images/profile.png" align="left" style="padding-right:5px;">

  <span style="color:#3c79ba"><?php echo $item->name;?></span><br/>
  <span><?php echo $item->job_title;?></span><br/>
  <img src="images/line.png"><br />  <?php if ($item->phone !="" ) {?> 
  <img src="images/phone.png">&nbsp;&nbsp;
  <?php }else{?>
  <br />

  <img src="images/email.png">&nbsp;&n
  <span  style="color:#3c79ba"><?php echo $item->phone;?></span><br />
  <?php }?>
   <?php if ($item->email !="" ) {?> 
  <img src="images/email.png">&nbsp;&nbsp;<span  style="color:#5881b3"><?php echo $item->email;?> </span><br /> 
  <?php }else{?>
  <br />
  <?php }?>
  <br /> 
  <div style="height:10px;position: absolute; bottom: 0; left: 0;">
  <a href="<?php echo JRoute::_('index.php?option=com_staffdirectory&view=staff&id=' . (int)$item->id); ?>"> View profile
    </a>
        </div>
  </div>
 </div>
 <?php

 if($counter == 2) {?>

    <br class="clearboth">

    <?

 }?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T11:59:09.020

```
.thumbnail div { position:relative; height: 142px; } /* 142px is the height of your images, put in to make the box stretch in height if little content */
.thumbnail a { position: absolute; bottom: 0; } /* I'd add a class to this in case you want to link any other info from the container */ 
```

# javascript - 如何通过 javascript 将 ANSI char ID 转换为 Unicode char ID？

> ID：11882873
> 
> 赞同：1
> 
> 时间：2012-08-09T11:54:47.103
> 
> 标签：javascript, unicode, keyboard, ansi

函数`fromCharCode`不适用于国际 ANSI 字符。例如，对于 ID 为 192 到 223 的俄语 ANSI (cp-1251) 字符，它会返回特殊字符。如何解决这个问题？

我认为，需要将 ANSI 字符 ID 转换为 Unicode 字符 ID，然后使用`fromCharCode`. 但是如何将 ANSI 字符 ID 转换为 Unicode 字符 ID（取决于当前的语言环境/代码页）？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T12:58:24.903

考虑到您知道编码数据的代码页，只需设置一个映射对象，其中键是代码页中的代码，值是正确的 Unicode 符号或数字代码点，并使用它来转换数据。

```
mapFromCP1251 = {
   192: 'А',
   193: 'Б',
   194: 'В',
   197: 'Е',
   200: 'И',
   204: 'М',
   207: 'П',
   208: 'Р',
   210: 'Т'
   // etc, I don't feel like typing entire http://en.wikipedia.org/wiki/CP1251 here
}

var string = mapFromCP1251[192] + mapFromCP1251[192] + mapFromCP1251[192] + mapFromCP1251[193] + mapFromCP1251[193] + mapFromCP1251[194]
alert(string) // АААББВ
alert(mapFromCP1251[207]+mapFromCP1251[208]+mapFromCP1251[200]+mapFromCP1251[194]+mapFromCP1251[197]+mapFromCP1251[210]+", "+mapFromCP1251[204]+mapFromCP1251[200]+mapFromCP1251[208]+"!") // Hello, world! 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-14T15:50:30.163

这是我发现的唯一解决此问题的库： [https ://github.com/Niggler/js-codepage](https://github.com/Niggler/js-codepage)

但它需要 1.5 MiB。可能，如果您只需要几个字符集，则需要的时间会少得多。

# c# - Linq to SQL Designer：默认情况下使图像类型为 byte[]

> ID：11882875
> 
> 赞同：1
> 
> 时间：2012-08-09T11:54:49.623
> 
> 标签：c#, visual-studio-2010, linq-to-sql

我正在使用 Linq to Sql 来查询一些数据库表。`Image`在这些表中，数据类型有很多用途。

在使用 DBML 设计器时，我拖放我的表，并且任何使用该`Image`数据类型的字段都被映射为`System.Data.Linq.Binary`生成类时。但是，我希望这些是`Byte[]`.

目前，这是一个手动过程或在设计器中更改字段类型，而且公平地说，在大规模的事情中并不是那么耗时，但我更喜欢这对我来说是自动完成的。

有没有办法做到这一点？某种 Linq to Sql 设置？

对我来说主要的烦恼是当我对需要重新添加的表进行更改时，我必须将字段更改回`byte[]`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:01:45.103

[T4 工具箱](http://t4toolbox.codeplex.com/)有一个模板，该模板可以从易于定制的 DBML 生成 linq-to-SQL 类，包括更改默认类型映射。

# java - 如何在邮件会话中设置发送自

> ID：11882878
> 
> 赞同：0
> 
> 时间：2012-08-09T11:55:04.397
> 
> 标签：java, email, session, jakarta-mail

单击重置密码时，我想向收件人发送邮件。邮件发送正确，但发件人地址类似于 myname@SystemName 如何设置发件人地址？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T11:57:53.060

使用 setFrom() 方法：

```
Session mailSession = Session.getInstance(props, null);
MimeMessage message = new MimeMessage(mailSession);
message.setFrom(new InternetAddress("sendingaddress@company.com")); 
```

[JavaDoc 参考](http://javamail.kenai.com/nonav/javadocs/javax/mail/Message.html#setFrom%28javax.mail.Address%29)

# java - 使用 jcifs 库的 NoClassDefFoundError

> ID：11882880
> 
> 赞同：0
> 
> 时间：2012-08-09T11:55:12.567
> 
> 标签：java, noclassdeffounderror, ear, pom.xml, jcifs

我有一个需要使用 jcifs 库的 Maven 项目（ejb 容器）。我在 pom.xml 中输入了如下内容：

```
<dependency>
     <groupId>jcifs</groupId>
     <artifactId>jcifs</artifactId>
     <version>1.3.17</version>
     <type>jar</type>
</dependency> 
```

一切正常，我在 ear 包中看到了 jar 文件，在项目的依赖项中也看到了它，我可以使用这些类，但在运行时我得到：

```
javax.ejb.EJBException: java.lang.RuntimeException: java.lang.NoClassDefFoundError: jcifs/smb/SmbFile
at org.jboss.ejb3.tx.Ejb3TxPolicy.handleExceptionInOurTx(Ejb3TxPolicy.java:63) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T07:11:27.163

右键单击 web 项目并转到属性 -> Java EE 模块依赖项。检查 Maven 依赖项是否已检查。如果未检查并重新部署。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-20T10:44:49.460

我想帮助像我一样愚蠢的人。这与这个问题所要求的情况并不完全相同，但这个问题帮助我找出了我的问题。

我在临时文件中写了一些代码，在 Intellij 中。在此之前，我将 jcifs 依赖项添加到我的 maven 项目中，假设暂存文件会在那里找到它，事后看来有点愚蠢，因为暂存空间怎么知道。

所以我的提示是看看依赖项实际上会在哪里产生影响，即可用 - 编译时间、运行时、暂存空间？

我还想提一下，我使用了这个库，它对我来说非常好用[https://github.com/hierynomus/smbj](https://github.com/hierynomus/smbj)。

因此，在我的情况下，我编辑了运行配置，以便将 maven 模块配置带入类路径。

所以我的猜测是 @SANN3 的答案对于实际问题是正确的。

[![在此处输入图像描述](../Images/1e7365497296fc36887fdd4e0d6ab683.png)](https://i.stack.imgur.com/TXnwa.png)

# c++ - “接口对象”模式。合理的？

> ID：11882888
> 
> 赞同：1
> 
> 时间：2012-08-09T11:55:44.920
> 
> 标签：c++, design-patterns

最近我一直在使用一些模式，但我不知道它是否真的很好。

内容如下：我有一组函数，我们称它们为**ActionFoo**、**ActionBar**和**ActionZapper**。这些在实现上可能不同，但通常用于这些相同的事情。它们可以按顺序一起使用，也可以不一起使用（即其中一些可以单独使用），但在某些情况下，它们确实是组合在一起的。

如果我确实想按顺序使用它们，我通常有两个选择：

1）每次手动编写它们

2）创建类层次结构：

方法#1：

```
void SomeActionSequence1()
{
    ActionFoo1(1);
    ActionBar1("Moo");
    ActionZapper1("Moo", 42);
}

void SomeActionSequence2()
{
    ActionFoo4(1);
    ActionBar2("Moo");
    ActionZapper1("Moo", 42);
} 
```

这有缺点：

1）我将无法存储状态，并且必须将大量参数传递给这些操作

2）我不会真的有一个连贯的界面，也不能轻松地使用自动补全

方法#2

```
class Base
{
    public:
    Base(){}
    virtual ~Base(){}
    virtual void ActionFoo(int) = 0;
    virtual void ActionBar(string) = 0;
    virtual void ActionZapper(string, int) = 0;
    void ExecuteActionSequence();
};

void Base::ExecuteActionSequence()
{
    ActionFoo(1);
    ActionBar("Moo");
    ActionZapper("Moo", 42);
}

Derived1 : public Base
{
    void ActionFoo(int){/*some inplementation*/};
    void ActionBar(string){/*some inplementation*/};
    void ActionZapper(string, int){/*some inplementation*/};
}

Derived2 : public Base
{
    void ActionFoo(int){/*some inplementation*/};
    void ActionBar(string){/*some inplementation*/};
    void ActionZapper(string, int){/*some inplementation*/};
} 
```

并像这样使用它：

```
Base* actionSequence = new Derived1();
actionSequence->ExecuteActionSequence(); 
```

将使用正确的虚拟机，除了两件小事外，一切似乎都很好：

1) 可扩展性——我必须为每个复杂的动作编写一个类

2) 更重要的是——要么在这些类之间重复很多函数，要么我手上的层次树太复杂了

我有点用“**接口对象**”模式“规避”这两种方法的问题（注意，这个名字是我的，也许它有一个合适的名字）

我要做的是：

```
class InterfaceClass
{
    public:
    InterfaceClass(){};
    ~InterfaceClass(){};

    void ActionFoo(int i)
    {
        if(fooPlaceholder != 0)
            fooPlaceholder(i);
    }
    void ActionBar(string str)
    {
        if(barPlaceholder != 0)
            barPlaceholder(str);
    }
    void ActionZapper(string str, int i)
    {
        if(zapperPlaceholder != 0)
            zapperPlaceholder(str, i);
    };
    void ExecuteActionSequence();

    std::function<void(int)> fooPlaceholder;
    std::function<void(string)> barPlaceholder;
    std::function<void(string, int)> zapperPlaceholder;
};

void InterfaceClass::ExecuteActionSequence()
{
    ActionFoo(1);
    ActionBar("Moo");
    ActionZapper("Moo", 42);
} 
```

在我的应用程序中，我这样做：

```
InterfaceClass complexAction;
complexAction.fooPlaceholder = ActionFoo;
complexAction.barPlaceholder = ActionBar;
complexAction.zapperPlaceholder = ActionZapper;

complexAction.ExecuteActionSequence(); 
```

请注意，**ActionFoo**、**ActionBar**和**ActionZapper**是免费功能，但同时我在界面中使用它们。另外 - 我可以轻松地在这些函数的实现之间切换，即使在运行时（如果我需要这个）。

这种方法的优点是 - 不需要为新操作创建单独的类结构，并且没有**Action***函数的代码重复。此外 - 所有函数只能在 complexAction 被初始化的地方被带到范围内。

缺点是，我认为，在**InterfaceClass**对象中使用哪个**Action***函数并不明显。另外 - 没有能力对这样的类进行动态转换来确定它是什么。

 **我高度怀疑这些不仅是这种方法的缺点，所以我想对此发表评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:14:32.890

听起来你想要[责任链](http://en.wikipedia.org/wiki/Chain-of-responsibility_pattern)模式

```
abstract class Action {
    Action child;
    Action(Action child) { this.child = child; }
    Action() { }

    void doAction(StateContext context);

    void execute(StateContext context) {
       if (child) child.execute(context); 
       doAction(context); 
    } 
}

class ZapAction extends Action {
    ZapAction(String theString, int theValue, Action child) { ... }
    void doAction(Context context) { context.setZap(theString); } 
}

Action actionSequenceAlpha = new ZapAction("", 1, new FooAction()); 
Action actionSequenceBeta = new FooAction(new BarAction(new ZapAction)); 
```

优点 - 当你添加一个新的动作时，不需要用一套固定的[策略](http://en.wikipedia.org/wiki/Strategy_pattern)来改变这个基础对象，你可以以各种有趣和令人兴奋的方式映射动作，每个对象都有一个单一的职责，这是一个很好的标准模式所以每个人都知道发生了什么。

另一种选择是将序列与动作分开。有一个 Action 接口，三个 Action 继承它。然后有一个`Sequence`带有执行方法和一个列表`Action`的类

```
class Action { } 
class FooAction extends Action { }

class Sequence {
    List<Action> actions;
    void execute() {
       foreach (action : actions) action.execute();
    }
} 
```**

# asp.net - using 语句中的数据视图

> ID：11882892
> 
> 赞同：0
> 
> 时间：2012-08-09T11:55:55.857
> 
> 标签：asp.net

我正在使用带有 using 语句的 DataView，如下所示：

```
DataTable dt = /*Fetch data from database*/
using (DataView dv = dt.DefaultView)
{
  dv.RowFilter = “Filter string”;
} 
```

它在页面加载时工作正常。( `IsPostback = false`)。

当我的页面回发并执行相同的代码时，`dv`返回 null。（可能是因为`dv`在页面加载时被处理了？）

如果我删除 using 语句，那么即使在回发时一切正常。

我的理解是我们应该对每个继承“IDisposible”的对象使用 using 语句。

有人可以解释为什么`dv`在`using`声明中包装不起作用吗？

# java - 在 Web Pages 文件夹下的 WEB-INF 中使用 xml 文件

> ID：11882901
> 
> 赞同：0
> 
> 时间：2012-08-09T11:56:26.417
> 
> 标签：java, jsp

在 netbeans 中使用 JSP 进行基于 JAVA 的 Web 项目时，会在**Web Pages**文件夹下创建**WEB-INF**文件夹。在这个文件夹中有 3 个*xml 页面*，即。**sun-web.xml、web.xml 和 weblogic.xml**。当我单击 web.xml 页面时，它会显示不同的选项卡，例如，

1.  一般的
2.  小服务程序
3.  过滤器
4.  页面
5.  参考
6.  安全
7.  XML

这些有什么用途，如何为我的网页配置这些设置？

例如。*在 XML 选项卡中，我们可以设置会话超时值。这个 web.xml 和其他设置的其他用途是什么？*

请解释一下其他两个xml文件sun-web.xml & weblogic.xml的使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T12:07:54.407

XML 选项卡使您可以直接访问 xml 代码。其他选项卡为您提供了一个很好的用户界面，用于编辑 xml 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T12:52:24.297

是的，该`sun-web.xml`文件适用于 glassfish 服务器。此文件用于在 Glassfish 服务器中指定其他 Web 应用程序 (WAR) 配置。Now-a-days`sun-web.xml`文件称为`glassfish-web.xml`. [获得更多](http://docs.oracle.com/cd/E19798-01/821-1750/beaql/index.html)

关于该`weblogic.xml`文件的是 Weblogic Server 的部署描述符。如果您的 Web 应用程序不包含 weblogic.xml 部署描述符，WebLogic Server 会自动选择部署描述符元素的默认值。获取有关[Weblogic.xml的更多信息](http://docs.oracle.com/cd/E15051_01/wls/docs103/webapp/weblogic_xml.html)

# python - 终端中的python - 如何获取当前颜色？

> ID：11882906
> 
> 赞同：3
> 
> 时间：2012-08-09T11:56:38.553
> 
> 标签：python, colors, terminal

我已经阅读了几个关于在终端中设置颜色的 URL。但是经过一段时间的颜色更改后，我想重置为以前的颜色。如何获得当前颜色？（我想避免使用第三方库，只使用包含的电池；-)）尤其是（来自[（python）彩色打印与函数中的装饰器](https://stackoverflow.com/questions/6195877/python-colour-printing-with-decorator-in-a-function)）：

```
import sys
green = '\033[01;32m'
red = '\033[01;31m'

... remember current colours here ...
sys.stdout.write(green+"Hello ")
sys.stderr.write(red+"world!") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T12:02:04.087

您可以像为文本着色一样返回默认颜色：

```
native = '\033[m'
sys.stdout.write(native) 
```

因此，临时着色可以通过

```
print green + 'Hello' + native 
```

# vim - 在 VIM 中如何删除所有行，直到遇到正则表达式？

> ID：11882908
> 
> 赞同：12
> 
> 时间：2012-08-09T11:56:46.353
> 
> 标签：vim

我确信这已经得到解答，但查询对于谷歌来说有点太复杂了。

简而言之，我试图从一些代码中删除许多不推荐使用的方法。所以我正在浏览文件，当我看到一个我想要删除的方法时，我会删除每一行，直到我看到一行以制表符开头，然后是字符串“def”。

我在想 VIM 应该让我创建一个简单的宏来做到这一点，但诀窍是逃避我。

这是我要删除的那种东西。

```
def Method_to_Delete(self):
    """

    @return Control ID :
    @author
    """
    results = {}
    results['xx'] = "thingy"
    results['yy'] = 'thingy2'
    return results

def Method_to_Keep(self):
    """
     This is a method that does something wonderful!!!

    @return Control ID :
    @author
    """
    results = {}
    results['xxx'] = "WhooHoo!"
    results['yyy'] = 'yippee!!'
    return results 
```

我想将光标放在带有“def Method_to_Delete”的行上，并做一些删除直到但不包括“def Method_to_Keep”的事情

必须有比多个“dd”命令更好的方法。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-09T11:59:55.777

Vim 搜索实际上是文本对象！这意味着您可以简单地：

```
d/\s*def 
```

然后，只需`.`根据需要重复该命令。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-09T13:31:04.593

使用`:delete`带范围的 ex-command

```
:,/Keep/-1d 
```

解释

*   完整的命令是`:.,/Keep/-1delete`
*   `.,/Keep/-1`是`delete`命令将执行的范围
*   `.`表示当前行。
*   b/c 我们正在使用一个范围，并从当前位置开始，`.`可以假设和删除
*   `/Keep/`搜索匹配“保持”的行
*   `/Keep/-1`是搜索匹配的行然后减去一行
*   `:delete`可以短路到`:d`

如需更多帮助，请参阅

```
:h :range
:h :d 
```

# python - 带有 MS SQL 的 Python - 截断的输出

> ID：11882910
> 
> 赞同：4
> 
> 时间：2012-08-09T11:56:51.110
> 
> 标签：python, sql-server, odbc, pyodbc, pymssql

我尝试从 Linux 框*（**Python 2.7**、**Ubuntu 11.04**）*使用 python 连接到 MSSQL DB 。我收到的输出被截断为 500 个字符。请参阅下面的脚本和配置。怎么可能解决？我想在 ODBC 驱动程序中或附近的问题。

代码（pyodbc、pymssql）：

```
conn = pymssql.connect(host='my_remote_host', user='ro_user',
password='password', database='current', as_dict=True)
cur = conn.cursor()
cur.execute(sql)
for i in cur:
    print i
conn.close()

cnxn = pyodbc.connect(driver='FreeTDS', server='my_remote_host', database='current', uid='ro_user', pwd='password')
cursor = cnxn.cursor()
cursor.execute(sql)
rows = cursor.fetchall()
...
cnxn.close() 
```

我对 MS SQL DB 没有写入权限，它实际上是不属于我们系统的远程服务器。

### SQL：

```
sql = '''
        SELECT  Req.ID,
        ShReq.Summary AS [Short Name],
        ShReq.ALM_SharedText AS [Text],
        Req.ContainedBy,
        Req.DocumentID
FROM    CurMKS..ALM_Requirement Req
        JOIN CurMKS..ALM_SharedRequirement ShReq ON Req.[References] = ShReq.ID
        WHERE DocumentID = 1111111''' 
```

问题出在`ShReq.ALM_SharedText`场上。它被截断为 255 个字符，但使用像`convert(text,ShReq.ALM_SharedText) AS TEXT`和`CAST(ShReq.ALM_SharedText AS TEXT)`我这样的转换将截断增加到 500 个字符。但是，有些字段的文本长度超过 500 个字符，它们会被截断。

### ODBC 设置：

`/etc/odbc.ini`：

```
[MKS]
#Driver=FreeTDS
Driver=/usr/lib/odbc/libtdsodbc.so
Description=Database
Trace=No
Server=my_remote_host
Port=1433
Database=current
UID=ro_user
PWD=password
TDS Version=8.0 
```

`/etc/odbcinst.ini`：

```
[FreeTDS]
Description=FreeTDS
Driver=/usr/lib/odbc/libtdsodbc.so
UsageCount=1 
```

`/etc/freetds/freetds.conf`：

```
[global]
        tds version = 8.0
;       dump file = /tmp/freetds.log
;       debug flags = 0xffff
;       timeout = 10
;       connect timeout = 10
;       text size = 2097152

[mksserver]
      host = my_remote_host
      port = 1433
      tds version = 8.0
      client charset = UTF-8 
```

任何想法如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T15:50:37.387

`text size`将in`global`部分更改`freetds.conf`为最大值（4294967295 字节）：

```
[global]
    tds version = 8.0
    text size = 4294967295 
```

还必须`TEXTSIZE`在 SQL 中设置为最大值（2147483647 字节）：

```
sql = """
    SET TEXTSIZE 2147483647;
    SELECT  Req.ID,
            ShReq.Summary AS [Short Name],
            ShReq.ALM_SharedText AS [Text],
            Req.ContainedBy,
            Req.DocumentID
    FROM    CurMKS..ALM_Requirement Req
            JOIN CurMKS..ALM_SharedRequirement ShReq ON Req.[References] = ShReq.ID
    WHERE DocumentID = 111111;
      """ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T13:58:04.733

如果您使用的是旧版本的 pymssql (1.0.2)，则存在一定的限制。

varchar 和 nvarchar 数据限制为 255 个字符，较长的字符串会被静默修剪。这是 TDS 协议的已知限制。一种解决方法是将该行或表达式转换为能够返回 4000 个字符的文本数据类型。

来源： http: [//pymssql.sourceforge.net/limitations.php](http://pymssql.sourceforge.net/limitations.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-23T14:31:56.303

您可以使用以下逻辑来获取完整的输出`SQL Server`：

```
rows = connCursor.execute(spQuery).fetchall()
result = ''
result = result.join([row[0] for row in rows]) 
```

这`spQuery`是我们将为结果执行的完整 SQL 查询。
结果，我们返回的内容在 2033 个字符后被修剪，因此我们将把完整的输出合并成一个字符串并执行下一个操作

# asp.net-mvc-3 - 如何防止在 ASP.Net MVC 3 中提交表单时重定向，并且只停留在页面上？

> ID：11882912
> 
> 赞同：0
> 
> 时间：2012-08-09T11:57:04.650
> 
> 标签：asp.net-mvc-3, redirect, form-submit

我在一个视图中有两种形式。其中一个负责将图片上传到数据库。我需要整个页面——以及用户在“其他表单”中输入的数据——保持不变，同时用户也可以上传图片。但它不起作用。

问题是当用户提交照片时，整个页面都会发生变化。更糟糕的是，新页面只包含“照片上传”表单！因为在`Return View();`“上传图片”Action方法的作用下，它的View被渲染了。：/

看动作方法：

```
public ActionResult Upload(IEnumerable<HttpPostedFileBase> files)
        {
          //Upload the pictures .

            return View();
        } 
```

是否可以仅通过更改 Action 方法的返回类型来实现我需要的结果（也许？），以便不呈现任何内容并说只是向用户显示一条消息，例如“文件已上传！” ??

或者我应该改用 Ajax 吗？

提前感谢您的建议；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T12:04:46.363

如果视图是针对模型进行强类型化的，那么您始终可以将模型传回给用户以“重新填充”常量表单（可能是最糟糕的选择）。另一个选择（可能是最好的）当然是 ajax。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T17:10:44.543

您不能使用 AJAX 上传文件，但您可以使用一些第三方组件，这些组件将使用类似于 AJAX 的隐藏 iframe 上传文件。你可以google **jquery ajax上传插件**。

对于其他表单，您可以使用**Ajax.BeginForm/PartialView**来避免完全刷新。

# java - 在 Web 服务 java 中使用 JAXB

> ID：11882913
> 
> 赞同：0
> 
> 时间：2012-08-09T11:57:05.847
> 
> 标签：java, web-services, jaxb

我试图为 Java 的 JAXB 和 Web 服务做一些示例。在我的代码中，我想显示 XML 文件中的一些客户信息。我正在使用 JAXB 工具来读取/创建 XML，并将值分配给客户对象。当我尝试显示此客户类的值时，我得到空值。实际上，用于读取和显示客户信息的代码正在运行，但是当我在 Web 服务中使用它时，它无法正确显示。顺便说一句，我可以在 Web 服务中正确创建 XML，但是阅读是个问题。这是我的代码：

执行

旧版本 @Override public void displayXML(Customer customer) {

```
 try {

            File file = new File("C:\\Users\\ahmet.tanakol\\Desktop\\myfile.xml");
            JAXBContext jaxbContext = JAXBContext.newInstance(Customer.class);

            Unmarshaller jaxbUnmarshaller = jaxbContext.createUnmarshaller();
            customer = (Customer) jaxbUnmarshaller.unmarshal(file);
            customer.setAge(customer.getAge());
            customer.setId(customer.getId());
            customer.setName(customer.getName());

          } catch (JAXBException e) {
            e.printStackTrace();
          }

} 
```

新版本（正确的一个）

```
 public String displayXML() {
    String msg  = "";
     try {

            File file = new File("C:\\Users\\ahmet.tanakol\\Desktop\\myfile.xml");
            JAXBContext jaxbContext = JAXBContext.newInstance(Customer.class);

            Unmarshaller jaxbUnmarshaller = jaxbContext.createUnmarshaller();
            Customer customer = (Customer) jaxbUnmarshaller.unmarshal(file);

            msg +=  "Customer ID: " + customer.getId() + "Customer Age: " + customer.getAge() + "Customer Name: " + customer.getName();

          } catch (JAXBException e) {
            e.printStackTrace();
          }
    return msg;

} 
```

以及我运行程序时的结果

客户 ID：100 客户年龄：29 客户名称：ahmet Hello World JAX-WS ahmet

# php - 如何为 PHP 包含文件设置根文件夹

> ID：11882915
> 
> 赞同：16
> 
> 时间：2012-08-09T11:57:07.367
> 
> 标签：php, include, config, working-directory

我花了几天时间研究互联网，但找不到我能理解并能够实施的答案。

我已经有了要在其中使用`include_once`文件的网站，并且能够在 localhost 和实际服务器中正确查看该网站。

我以前用过`$_SERVER['DOCUMENT_ROOT']`，但它在本地主机上不起作用，所以我很难更新和更改网站。

我想要做的是创建某种 config.php 文件，我可以在其中告诉它根文件夹被调用`htdocs`或`public_html`“开始”从那里查找文件。

或者有没有其他方法可以让包含路径工作？

我看到过回复，例如`dirname(__FILE__)`，`__DIR__`等，但他们从未解释过它是如何工作的，在代码中的何处编写等。我有点厌倦了找到部分答案然后绕着圈子跑试着“填补”空白。我不是 PHP 专家，只是想通过使用它来让我的生活更轻松。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-08-09T12:42:59.463

`dirname(__FILE__)`两者`__DIR__`都相同，并`__DIR__`附带 PHP 5.3

这些用于指示“它们调用的文件的路径”。

```
网址：http://localhost/test/a.php

目录：--NIX
     /var/www/test/a.php
     - 赢
     D:\灯\www\test\a.php

// a.php 在里面
<?php
回声 __DIR__;

```

在 linux 上给你这个：`/var/www/test`

因此，如果您在所有项目中都需要一个配置参数，只需在您的 config.php 中定义它并在您想要包含的文件名的地方使用它。

```
./
  配置文件
  索引.php
  头文件.php
  页脚.php
  /lib
    foo.php
  /tmp
    酒吧.php

```

./config.php `define('ROOT', __DIR__ .'/');`

./index.php`include_once(ROOT .'header.php'); ... include_once(ROOT .'footer.php');`

即，在`tmp dir`

./tmp/bar.php`include_once(ROOT .'lib/foo.php');`

**更新**

```
// config.php
<?php
define("ROOT", __DIR__ ."/"); 
```

所以，我们用这个`index.php`来包含`banner.php`和`banner.php`等待`./banners/banner.php`；

```
// index.php and the very first line!
<?php
include_once("config.php");
?>
// some html stuff
// ...
<?php include_once(ROOT ."banners/banner.php"); ?>
// some more html stuff
// ... 
```

因此，您应该首先将 config.php 包含在您需要的位置。

我认为，就需要而言，这是基本的...

**更新**

所以你的问题不是PHP`include`系统，而是问题，无论如何...... :)

如果您的图像路径正在更改（因此不固定），您可以这样做；

```
// config.php
define("ROOT", __DIR__ ."/");
define("HTTP", ($_SERVER["SERVER_NAME"] == "localhost")
   ? "http://localhost/your_work_folder/"
   : "http://your_site_name.com/"
);

// banner.php
<img src="<?php print HTTP; ?>images/banner.gif"> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T12:01:50.140

我通常设置你提到的，一个包含目录中的 config.php，并在其中包含以下行：（`define('BASE_PATH', str_replace('/include', '', dirname(__FILE__)));`“/include 应该是你的 config.php 文件所在的任何目录，如果你在根目录中有它，你可以只使用`define('BASE_PATH', dirname(__FILE__));`)。当我想在此之后包含任何其他文件时，我使用`include_once(BASE_PATH . '/directory/file.php');`.

注意：这个概念无论如何都不是我的原创。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T12:01:24.760

有一个函数调用[`getcwd()`](http://php.net/manual/en/function.getcwd.php)，它将返回当前的工作文件夹。如果您在脚本的最开始调用它，您可以将它存储在一个常量中，通常带有`define()`.

```
define('PROJECT_ROOT', getcwd()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-30T20:07:54.017

要获取/显示当前工作目录，php 有一个内置函数

```
 echo getcwd() . "\n"; 
```

这将显示正在执行的 php 文件的当前目录。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-03T16:59:04.790

您还可以更改包含路径，例如，

```
$dir = dirname(__FILE__);
set_include_path($dir . '/../library' . PATH_SEPARATOR . $dir . '/../engine' . PATH_SEPARATOR . get_include_path()); 
```

# tsql - ISNULL()、NULLIF() 和 COALESCE() 背后的威胁/缺点

> ID：11882920
> 
> 赞同：1
> 
> 时间：2012-08-09T11:57:26.993
> 
> 标签：tsql, sql-server-2005, null, concatenation

我正在使用 Transact-SQL 开发 Microsoft SQL Server 2005。

我正在尝试连接来自处理 NULL 值的同一表的不同列的字符串值。

例如，表是，`Person`列是`FirstName`，，`SurnamePrefix``LegalSurname`

碰巧将字符串值与 NULL 值（来自两个不同的列）连接会在输出中返回 NULL 值。我尝试了不同的方案来防止输出中出现 NULL 值：

*   从...开始：
    *   `Person.FirstName + ' ' + COALESCE(RTRIM(LTRIM(Person.SurnamePrefix)) + ' ', '') + Person.LegalSurname`
*   我将我的声明更改为：
    *   `COALESCE(Person.FirstName + ' ', '') + COALESCE(Person.SurnamePrefix, '') + COALESCE(' ' + Person.LegalSurname, '')`

然后我遇到了诸如`ISNULL()`等之类的功能`NULLIF()`。

在输出中显示空字符串值而不是 NULL 值的最佳和有效方法是什么？解决方案是否受 SQL Server 版本的影响？（即 2005 年、2008 年等）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T12:34:04.433

`ISNULL`正如您所做的那样，它适用于默认值。 `COALESCE`具有接受两个以上论点的优势。 `NULLIF`完全不同，因为它返回 a`NULL`如果参数相等。

您可以对它们进行性能基准测试。我怀疑差异可以忽略不计，选择清晰的代码更为重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T12:40:18.767

这不是您问题的直接答案，但尽管在 SQL Server 的未来版本中已弃用它，但 SQL 2005 允许您[`CONCAT_NULL_YIELDS_NULL`](http://msdn.microsoft.com/en-us/library/ms176056.aspx)在连接级别启动。（也可以使用`ALTER DATABASE`命令在数据库级别设置它，但这可能会影响现有查询的行为）。您可以在运行查询之前设置它：

```
SET CONCAT_NULL_YIELDS_NULL OFF

SELECT 'a' + NULL 
```

产生结果

```
a 
```

从可维护性的角度来看，最好避免这样做——它会使粗心的人感到困惑——但它是你现在正在做的另一种选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T16:45:50.663

Aaron Bertrand进行了[比较](http://www.mssqltips.com/sqlservertip/2689/deciding-between-coalesce-and-isnull-in-sql-server/) `COALESCE`，`ISNULL`发现两者之间没有显着的性能差异。

# html - 在打印预览中检查页面时如何查看背景颜色或图像

> ID：11882921
> 
> 赞同：0
> 
> 时间：2012-08-09T11:57:26.403
> 
> 标签：html, css

众所周知，我们通常从 css 中调用背景（Div 背景、表格背景等）颜色或图像，但是当我们检查同一页面作为打印预览时，这些属性不会出现。

有人知道如何解决吗？

谢谢 AV

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:00:21.273

默认情况下不显示这些，但是用户可以在浏览器中更改此设置：

[http://support.microsoft.com/kb/296326](http://support.microsoft.com/kb/296326)

[http://malektips.com/firefox_0026.html](http://malektips.com/firefox_0026.html)

这将很有用，因为它解释了如何在打印时使用打印 css 显示一些项目：[如何在 FF 或 IE 中打印背景图像？](https://stackoverflow.com/questions/596876/how-can-i-print-background-images-in-ff-or-ie)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T11:59:29.660

背景颜色在某些浏览器的打印预览中被禁用，以更经济和节省墨水。

我不确定，但在 print-css 中明确声明它们可能会有所帮助（为此声明 mediatype print）：

```
<link rel="stylesheet" type="text/css" href="print.css" media="print" /> 
```

在任何情况下，用户都可以配置他的浏览器来打印背景颜色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T12:00:24.047

这些属性不会出现在打印预览中，因为打印机不打印它们。所以你会看到它是如何被打印出来的。

作为开发人员，您无法解决此问题。

根据他/她使用的浏览器，最终用户可以在打印对话框中编辑他/她的打印机选项以将其打印出来，但您无法控制它。

# ruby - 如何检测圆和块之间的碰撞？

> ID：11882922
> 
> 赞同：1
> 
> 时间：2012-08-09T11:57:26.587
> 
> 标签：ruby, math, geometry, rubygame

> **可能重复：**
> [Circle-Rectangle 碰撞检测（intersection）](https://stackoverflow.com/questions/401847/circle-rectangle-collision-detection-intersection)
> [如何确定圆与矩形的碰撞？](https://stackoverflow.com/questions/8029372/how-to-determine-the-collision-of-a-circle-with-a-rectangle)

我想检测一个圆与一个一般定位的块的交集或碰撞。该块是矩形的，可以是任何大小或旋转。

这背后的数学原理是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T15:58:15.330

编写一个函数来检查任意线段*ab*是否与圆*C*相交。编写第二个函数，检查点*p*是否在圆*C*内。然后对四个矩形边调用第一个函数四次，如果所有这些都失败，则在一个角上调用第二个函数（检查矩形是否完全在圆内）。根据您对“碰撞”的定义，您可能还必须检查圆是否完全在矩形内！

有多种方法可以加快计算速度，以防您要在实时模拟中调用数百万次。最明显的是首先检查与圆*C外接的正方形**S*，然后才进行（稍微）成本更高的圆测试。

# java - 如何从 Java 中的 Date 对象中减去 X 天？

> ID：11882926
> 
> 赞同：190
> 
> 时间：2012-08-09T11:57:32.057
> 
> 标签：java, date, datetime, calendar, java.util.date

我想做类似的事情：

```
Date date = new Date(); // current date
date = date - 300; // substract 300 days from current date and I want to use this "date" 
```

怎么做？

* * *

## 回答 #1

> 赞同：355
> 
> 时间：2012-08-09T11:59:32.217

# Java 8 及更高版本

随着 Java 8 的日期时间 API 更改，使用[`LocalDate`](https://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html)

```
LocalDate date = LocalDate.now().minusDays(300); 
```

同样，您可以拥有

```
LocalDate date = someLocalDateInstance.minusDays(300); 
```

有关 java.util.Date <--> java.time.LocalDateTime 之间的转换，请参阅[https://stackoverflow.com/a/23885950/260990](https://stackoverflow.com/a/23885950/260990)

```
Date in = new Date();
LocalDateTime ldt = LocalDateTime.ofInstant(in.toInstant(), ZoneId.systemDefault());
Date out = Date.from(ldt.atZone(ZoneId.systemDefault()).toInstant()); 
```

# Java 7 及更早版本

使用[`Calendar`](https://docs.oracle.com/javase/1.6/docs/api/java/util/Calendar.html)的[`add()`](https://docs.oracle.com/javase/1.6/docs/api/java/util/Calendar.html#add%28int,%20int%29)方法

```
Calendar cal = Calendar.getInstance();
cal.setTime(dateInstance);
cal.add(Calendar.DATE, -30);
Date dateBefore30Days = cal.getTime(); 
```

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2015-01-21T12:41:52.400

@JigarJoshi 这是一个很好的答案，当然还有@Tim 推荐使用。[乔达时间](http://www.joda.org/joda-time/)。

我只想添加更多的可能性来从 a 中减去天数`java.util.Date`。

### Apache-commons

一种可能性是使用[apache-commons-lang](http://commons.apache.org/proper/commons-lang/)。您可以使用[`DateUtils`](https://commons.apache.org/proper/commons-lang/javadocs/api-3.1/org/apache/commons/lang3/time/DateUtils.html)如下方式进行操作：

```
Date dateBefore30Days = DateUtils.addDays(new Date(),-30); 
```

当然，添加`commons-lang`依赖项只做日期减去它可能不是一个好的选择，但是如果你已经在使用`commons-lang`它是一个不错的选择。还有方便的方法`addYears`，等等`addMonths`，`addWeeks`看看[这里的api](https://commons.apache.org/proper/commons-lang/javadocs/api-3.1/org/apache/commons/lang3/time/DateUtils.html)。

### 爪哇 8

另一种可能性是利用*Java 8*[`LocalDate`](https://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html)中的new using方法：*[`minusDays(long days)`](https://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html#minusDays-long-)*

 *```
LocalDate dateBefore30Days = LocalDate.now(ZoneId.of("Europe/Paris")).minusDays(30); 
```

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2013-02-27T00:39:44.250

只需使用它来获取 300 天之前的日期，将 300 替换为您的天数：

```
Date date = new Date(); // Or where ever you get it from
Date daysAgo = new DateTime(date).minusDays(300).toDate(); 
```

这里，

`DateTime`是`org.joda.time.DateTime;`

`Date`是`java.util.Date`

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2016-11-26T10:02:21.310

Java 8 时间 API：

```
Instant now = Instant.now(); //current date
Instant before = now.minus(Duration.ofDays(300));
Date dateBefore = Date.from(before); 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2012-08-09T12:11:39.757

正如您在[**此处**](http://www.mkyong.com/java/how-to-modify-date-time-date-manipulation-java/)看到的，您可以进行很多操作。这是一个显示您可以做什么的示例！

```
DateFormat dateFormat = new SimpleDateFormat("yyyy/MM/dd HH:mm:ss");
Calendar cal = Calendar.getInstance();

//Add one day to current date.
cal.add(Calendar.DATE, 1);
System.out.println(dateFormat.format(cal.getTime()));

//Substract one day to current date.
cal = Calendar.getInstance();
cal.add(Calendar.DATE, -1);
System.out.println(dateFormat.format(cal.getTime()));

/* Can be Calendar.DATE or
*  Calendar.MONTH, Calendar.YEAR, Calendar.HOUR, Calendar.SECOND
*/ 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2016-06-06T13:32:34.103

使用 Java 8 现在真的很简单：

```
 LocalDate date = LocalDate.now().minusDays(300); 
```

可以在[此处](http://javarevisited.blogspot.com/2015/03/20-examples-of-date-and-time-api-from-Java8.html)找到有关新 API 的出色指南。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-02-04T18:46:55.840

在 Java 8 中，您可以这样做：

```
Instant inst = Instant.parse("2018-12-30T19:34:50.63Z"); 

// subtract 10 Days to Instant 
Instant value = inst.minus(Period.ofDays(10)); 
// print result 
System.out.println("Instant after subtracting Days: " + value); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-10-01T20:10:25.000

我创建了一个函数来简化任务。

*   dateString 后 7 天：`dateCalculate(dateString,"yyyy-MM-dd",7);`

*   要获得 7 天的最新日期字符串：`dateCalculate(dateString,"yyyy-MM-dd",-7);`

* * *

```
public static String dateCalculate(String dateString, String dateFormat, int days) {
    Calendar cal = Calendar.getInstance();
    SimpleDateFormat s = new SimpleDateFormat(dateFormat);
    try {
        cal.setTime(s.parse(dateString));
    } catch (ParseException e) {
        e.printStackTrace();
    }
    cal.add(Calendar.DATE, days);
    return s.format(cal.getTime());
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-04-23T06:00:15.877

您可以使用 SimpleDateFormat 轻松减去日历

```
 public static String subtractDate(String time,int subtractDay) throws ParseException {

        Calendar cal = Calendar.getInstance();
        SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm", Locale.ENGLISH);
        cal.setTime(sdf.parse(time));
        cal.add(Calendar.DATE,-subtractDay);
        String wantedDate = sdf.format(cal.getTime());

        Log.d("tag",wantedDate);
        return wantedDate;

    } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-08-05T19:45:24.993

您也可以使用该`Duration`课程。例如

```
Date currentDate = new Date();
Date oneDayFromCurrentDate = new Date(currentDate.getTime() - Duration.ofDays(1).toMillis()); 
```*

# android - 我们可以从适配器调用 startActivityForResult 吗？

> ID：11882927
> 
> 赞同：39
> 
> 时间：2012-08-09T11:57:34.980
> 
> 标签：android, adapter

是否可以`onActivityResume`在`adapter`& 调用中有方法`startActivityForResult`？

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2012-08-09T12:03:08.443

是的。只需在适配器的构造函数（此处存储为 mContext）中将活动的上下文传递给适配器。在 getView 中，只需调用

```
((Activity) mContext).startActivityForResult(intent,REQUEST_FOR_ACTIVITY_CODE); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-11-23T04:39:05.277

不一定要在适配器的构造函数中传递上下文。您可以从父 ViewGroup 获取上下文。RecyclerView 适配器的示例：

```
 Context mContext;
 @Override
    public RecyclerView.ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {
        mContext = parent.getContext();
        ...
    } 
```

ListView BaseAdapter 的示例

```
 Context mContext;
 @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        mContext = parent.getContext();
        ...
} 
```

随时随地使用

```
((Activity) mContext).startActivityForResult(intent, REQUEST_FOR_ACTIVITY_CODE); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-08-16T13:05:49.760

业余...

```
((Activity) context).startActivityForResult(intent, 911); 
```

小心！！

仅将**MyActivity.this**从活动传递到适配器作为上下文。

只通过**getActivity()**；从片段到适配器作为上下文。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-11-11T13:45:45.040

```
//First Do
public Activity context;
public int REQUEST_CODE = 111;

public Adapter(Activity context, Data data) {
    this.context = context;
}

///Second Do
public void onBindViewHolder(@NonNull ViewHolder holder, int position) {
    holder.button.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            Intent intent = new Intent(context, NextActivity.class);
            context.startActivityForResult(intent, REQUEST_CODE);
        }
    });
} 
```

如果您遵循此代码，那么您不需要每次都编写它 - ((Activity) context) - 之前 - .startActivityForResult(intent, REQUEST_CODE); - 当您在适配器中使用 startActivityForResult 时。

# objective-c - CoreAnimation 未提交的 CATransaction 警告

> ID：11882931
> 
> 赞同：1
> 
> 时间：2012-08-09T11:57:44.277
> 
> 标签：objective-c, macos, cocoa, core-animation, osx-mountain-lion

在 Mac OS 10.8 上，我的应用程序中收到以下警告：

`CoreAnimation: warning, deleted thread with uncommitted CATransaction;`

它建议在环境中打开 CA_DEBUG_TRANSACTIONS=1 以记录回溯，我这样做了。

这是我的回溯的顶部：

```
0 石英核心 0x00007fff88a84b95 _ZN2CA11Transaction4pushEv + 219
1 石英核心 0x00007fff88a8476d _ZN2CA11Transaction15ensure_implicitEv + 273
2 石英核心 0x00007fff88a8bb6a _ZN2CA5Layer12begin_changeEPNS_11TransactionEjRP11objc_object + 44
3 石英核心 0x00007fff88a8cb4e _ZN2CA5Layer10set_boundsERKNS_4RectEb + 452
4 石英核心 0x00007fff88a8c908 -[CALayer setBounds:] + 189

```

有谁知道这个警告是什么，以及如何避免它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T12:13:17.823

我发现在`CATransaction`禁用操作的情况下将有问题的代码包装起来会使警告消失。

IE

```
[CATransaction begin];
[CATransaction setDisableActions:YES];
layer.bounds = CGRectMake(0, 0, 1000, 1000);
[CATransaction commit]; 
```

# c - 关于 MISRA 的 C 中联合的想法

> ID：11882932
> 
> 赞同：6
> 
> 时间：2012-08-09T11:57:44.920
> 
> 标签：c, misra

[米斯拉](http://www.misra-c.com/Activities/MISRAC/tabid/160/Default.aspx)说要禁止所有工会。我也知道，只要彻底讨论和记录偏差是允许的。

我们有一个微控制器和一个外部 eeprom 来存储统计数据（事件/错误记录、参数设置等等）。

事件日志由大约 80 多个事件计数器组成，其中一些是 8、16 和 32 位（全部无符号）。参数存储由大约 200 个参数组成，还混合有 8、16 和 32 位值（无符号）。

我们正在重写所有代码以符合 MISRA，并且这些值之前定义如下：

```
typedef struct
{
  U16BIT eventLogVar1;
  U32BIT eventLogVar2;
  U8BIT  eventLogVar3;
  U8BIT  eventLogVar4;
  U32BIT eventLogVar5;
} EVENT_LOG;

typedef union
{
  EVENT_LOG log;
  U8BIT     array[sizeof(EVENT_LOG)];
} ELOG;

ELOG log; 
```

现在这并不真正符合 MISRA。参数日志也是如此。然而，这是从 eeprom 读取和写入的最简单方法，因为我只需通过数组读取/写入即可从 eeprom 读取/写入。

我们还有一些其他规则是不允许我们违反的。没有全局（外部）变量（通过头文件）。如果需要，所有局部变量只能通过 get/set 函数访问。

这意味着，如果我们需要完全写出所有这些参数，那么这些参数都应该有自己的 get/set 函数，以便在整个应用程序中更改它们。

我考虑过的解决方案如下：

```
#ifdef EITHER
enum
{
    eventLogVar1 = 0; /* 00 */
    pad01;            /* 01 */
    eventLogVar2;     /* 02 */
    pad03;            /* 03 */
    pad04;            /* 04 */
    pad05;            /* 05 */
    eventLogVar3;     /* 06 */
    eventLogVar4;     /* 07 */
    eventLogVar5;     /* 08 */
    pad09;            /* 09 */
    pad10;            /* 10 */
    pad11;            /* 11 */
}
#else /* OR */
#define eventLogVar1 0 /* 2 bytes */
#define eventLogVar2 2 /* 4 bytes */
#define eventLogVar3 6 /* 1 byte  */
#define eventLogVar4 7 /* 1 byte  */
#define eventLogVar5 8 /* 4 bytes */
#endif
#define eventLogLastLength 4

U8BIT eventLog[eventLogVar5 + eventLogLastLength];

U8BIT getU8BIT(U8BIT index){}
U16BIT getU16BIT(U8BIT index){}
U32BIT getU32BIT(U8BIT index){}

void setU8BIT(U8BIT index, U8BIT val){}  
void setU16BIT(U8BIT index, U16BIT val){}
void setU32BIT(U8BIT index, U32BIT val){} 
```

但是，如果添加或删除值，这会带来繁琐的重构。这也意味着不能使用数组类型的值（并且有一些），如果使用或多或少的某种类型（例如传感器），可以通过定义长度来改变这些值。

* * *

你对这个具体问题有什么看法。在这种特定情况下，我/我们是否会更好地记录我们与 MISRA 标准的偏差，并且只在这个特定的地方使用这种偏差，还是有更好的解决方案来解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T12:00:46.723

您的日志联合正是您应该被允许使用的那种联合，它正在做的是数据打包，这是 MISRA 明确指出的可接受偏差，所以偏差是您应该做的。几乎所有使用 MISRA 的人都以这种方式偏离了这条规则。（这是一个相当糟糕的规则，看起来它将在下一个 MISRA 版本中被降级为建议或完全删除。）

但您需要记录：

*   填充字节和对齐是否会成为问题。
*   如果代码需要可移植，是否字节序可能是一个问题。

要避免填充/对齐问题，您可以编写如下内容：

```
COMPILE_TIME_ASSERT( (sizeof(union_member1)+sizeof(union_member2)+...) ==
                     sizeof(union_type) ); 
```

其中 COMPILE_TIME_ASSERT 是一些宏，如果未传递正值，则会产生编译器错误。这确保不存在结构/联合填充。

* * *

进一步评论：

enum 是一个糟糕的解决方案，因为它本身有许多缺陷：枚举类型的变量具有实现定义的大小，而枚举常量具有带符号的 int 类型。这将与关于隐式类型转换的 MISRA 规则发生冲突，您将被迫添加大量类型转换。

> 如果需要，所有局部变量只能通过 get/set 函数访问。

还需要声明它们`static`以缩小其范围。我从你的片段中注意到你没有这样做。`static`由 MISRA:2004 8.11 强制执行。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-08T07:32:34.363

如果使用得当，联合是一个非常有用的结构。

当人们试图用它们做*聪明*的事情时，它们也会有未定义的行为。这是为了防止 MISRA 指南试图防止的未定义行为。但即使是规则（MISRA C:2004 中的 18.2）也给出了工会有用的情况。

您给出的示例就是这样一种*有用*的情况，并且正是 MISRA 偏差程序适用的那种情况。

* * *

免责声明：我是 MISRA C 工作组的成员，但我以个人身份发帖。我的观点不应被视为MISRA的*官方政策。*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T12:23:36.297

MISRA 对 memcpy 有什么看法？为什么不使用联合，而不是只使用 EVENT_LOG？当您向/从 EEPROM 序列化时，请使用如下临时数组：

```
EVENT_LOG log;

U8BIT array[sizeof(EVENT_LOG)];
// populate array

memcpy(&log, array, sizeof(EVENT_LOG));

// do similar thing when writing to eeprom 
```

union 将数据和序列化格式混合在一起，函数可能更适合哪里？

```
void EVENT_LOG_write_to_eeprom(const EVENT_LOG*);
void EVENT_LOG_read_from_eeprom(EVENT_LOG*); 
```

# c# - 如何在数据网格中添加新行（数据表中的源）

> ID：11882936
> 
> 赞同：0
> 
> 时间：2012-08-09T11:58:16.540
> 
> 标签：c#, wpf

```
private void button1_Click(object sender, RoutedEventArgs e)
{
  DataTable dt = new DataTable();
  dt.Columns.Add("id");
  dt.Columns.Add("Name");

  dt.Rows.Add("1","John");
  dataGrid1.ItemsSource = dt.DefaultView;
} 
```

我如何添加新行，点击我的按钮？谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T12:01:08.193

**示例代码：**

动态创建表，添加cloumn，添加行

**1-创建一个新的数据表**

```
DataTable dt = new DataTable ("Table_AX"); 
```

**2-向数据表添加列**

```
// Method 1 
dt.Columns.Add ("column0", System.Type.GetType ("System.String")); 
// Method 2 
DataColumn dc = new DataColumn("column1",System.Type.GetType("System.Boolean")); 
dt.Columns.Add (dc); 
```

**3-向数据表添加行**

```
// Initialize the row 
DataRow dr = dt.NewRow (); 
dr ["column0"] = "AX"; 
dr ["column1"] = true; 
dt.Rows.Add (dr); 
// Doesn't initialize the row 
DataRow dr1 = dt.NewRow (); 
dt.Rows.Add (dr1); 
```

* * *

```
private void button1_Click(object sender, RoutedEventArgs e)
{
  DataTable dt = new DataTable();
  dt.Columns.Add("id",System.Type.GetType ("System.String"));
  dt.Columns.Add("Name",System.Type.GetType ("System.String"));
  DataRow dr=dt.NewROw();
  dr[0]="a";
  dr[1]="abc";
  dt.Rows.Add(dr);
  dataGrid1.ItemsSource = dt.DefaultView;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T12:17:51.470

试试这个代码

```
private void button1_Click(object sender, RoutedEventArgs e)
{

    DataTable dt = new DataTable();
     dt.Columns.Add("id");
     dt.Columns.Add("Name");
     DataRow dr = dt.NewRow();

     dr["id"]="testid";
     dr["Name"] = "testname";

     dt.Rows.Add(dr);
     dataGrid1.ItemsSource = dt.DefaultView;

} 
```

# delphi - Deplhi：通过嵌入铬 (CEF VCL) 过滤加载的 HTML

> ID：11882945
> 
> 赞同：1
> 
> 时间：2012-08-09T11:58:47.203
> 
> 标签：delphi, interface, filter, chromium, chromium-embedded

我正在尝试创建一些浏览器原型（使用 CEF VCL for Deplhi – chromiumembedded），在将加载的内容转换为 DOM 之前对其进行过滤。

我决定处理 onResourceResponse 事件（对吗？）——它有参数*filter*。我不需要向现有数据添加一些内容或剪切，只需替换一些刚刚传输的 HTML 代码的字符。

我对 onResourceResponse 的处理：

```
procedure TForm1.Chromium1ResourceResponse(Sender: TObject;
  const browser: ICefBrowser; const url: ustring;
  const response: ICefResponse; var filter: ICefBase);
begin
if (url = 'http://some.path.to/file.html')
  begin
  // filter := some object using interface ICefBase here maybe?
  end;
end; 
```

这是 ICefBase 的声明：

```
ICefBase = interface
  ['{1F9A7B44-DCDC-4477-9180-3ADD44BDEB7B}']
  function Wrap: Pointer;
end; 
```

但我无法理解如何使用它。

感谢帮助！对不起我的英语不好:) 我希望我正确地解释了这个问题。

使用德尔福 7。

升级版：

此代码有效：

```
type
  TContentFilter = class(TCefContentFilterOwn)
  public
    procedure ProcessData(const Data: Pointer; Size: Integer;
        var SubstituteData: ICefStreamReader); override;
  end;
// --------
procedure TContentFilter.ProcessData(const Data: Pointer; Size: Integer;
        var SubstituteData: ICefStreamReader);
var c: PAnsiChar;
    i: integer;
begin
c := Data;

for i := 0 to Size-1 do
  begin
  if (c[i] = '<') or (c[i] = '>') then
        c[i] := ' ';
  end;

end;
// --------
procedure TForm1.Chromium1ResourceResponse(Sender: TObject;
  const browser: ICefBrowser; const url: ustring;
  const response: ICefResponse; var filter: ICefBase);
var f: TContentFilter;
begin
if (response.GetHeader('X-RemoveLTGT') <> '') then
  filter := TContentFilter.Create();
end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T15:06:27.967

您可以返回`TCefContentFilterOwn`实现`ProcessData`方法的后代。在那里，您可以设置`SubstituteData`一个实例，`TCefStreamReaderRef`浏览器将加载该实例，而不是接收到的数据。

# regex - VS2010 中是否存在特定格式的正则表达式？

> ID：11882946
> 
> 赞同：0
> 
> 时间：2012-08-09T11:58:51.947
> 
> 标签：regex, visual-studio-2010

我正在尝试使用正则表达式来搜索解决方案中的所有可选参数（我的所有参数都具有前缀 prm）。

```
AccessModifier NameOfMethod(sometype prmParam1, bool prmFlagOrSomething = false) 
```

我的 ER 是：**prm\w+\s=\s\w+**

在记事本++中工作正常并捕获“prmFlagOrSomething = true”，但是当我在VS2010中尝试时，“Ctrl + Shift + F”+“使用：正则表达式”没有找到任何东西。

我需要一个特定的格式？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T12:12:40.363

是的，Visual Studio 有自己奇怪的正则表达式方言，有关详细信息，请参见[msdn 上的此处](http://msdn.microsoft.com/en-us/library/2k3te2cs%28v=vs.100%29.aspx)

您的表达式中的问题是它不知道预定义的类`\w`和`\s`

尝试（未测试）

```
prm[a-zA-Z0-9]+:b=:b[a-zA-Z0-9]+ 
```

# regex - 将 ereg_replace 转换为 preg_replace 的奇妙之处

> ID：11882948
> 
> 赞同：0
> 
> 时间：2012-08-09T11:58:52.727
> 
> 标签：regex, preg-replace, ereg-replace

我需要将 4 个 ereg_replace 表达式转换为 preg_replace。我一直在尝试基于教程的各种组合，并没有让我的网站工作太远。

某个善良的灵魂可以帮助我解决这些问题吗？

```
$path = ereg_replace('\.[\.]+', '', $path); // remove any '..' (jumping up a directory)
$path = ereg_replace('/[/]+', '/', $path);
$back_url = ereg_replace('dir=[^\&]*', "dir=$back_directory", $this->current_url);
$dir_url = ereg_replace('dir=[^\&]*', "dir=$dirpath", $this->current_url); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-12T11:45:02.910

为了将 ereg 转换为 preg，你必须用分隔符包围你的正则表达式。
最常见的是`/`，但您可以使用除空格以外的任何字符。
您还必须注意您没有在正则表达式中选择分隔符，在这种情况下，您必须转义这些字符或使用另一个分隔符。

用你的例子：

```
ereg_replace('\.[\.]+', '', $path); 
```

变成

```
preg_replace('/\.[.]+/', '', $path); 
```

或者

```
preg_replace('/\.{2,}/', '', path); 
```

和

```
ereg_replace('/[/]+', '/', $path); 
```

变成

```
preg_replace('/\/[\/]+/', '/', $path); 
```

或者

```
preg_replace('~/[/]+~', '/', $path); 
```

或者

```
preg_replace(':/{2,}:', '/', $path); 
```

# antlr - 何时将美元符号 $ 放在 ANTLR 中对符号的引用处？

> ID：11882954
> 
> 赞同：3
> 
> 时间：2012-08-09T11:59:04.947
> 
> 标签：antlr, dollar-sign

我有两本 T.Parr 写的关于 ANTLR 的书，我看到到处都是美元符号和符号的引用。它也对我有用：

```
term : IDENT -> { new TokenNode($IDENT) }; 
```

或更复杂的东西：

```
type_enum : 'enum' name=IDENT '=' val+=IDENT (',' val+=IDENT)* ';' 
            -> { new EnumNode($name,$val) }; 
```

但是这条线给了我荒谬的错误：

```
not_expr :  term 
         | NOT ex=not_expr -> { new UnaryExpression($NOT,$ex) }; 
```

错误说`missing attribute access on rule scope: ex`。你知道修复是什么吗？删除“ex”上的美元符号。就是这样。

出于好奇，我检查了上面提到的规则并删除了美元符号——它们像以前一样工作（即我没有收到任何错误）。

**问题**：那么这个带有美元符号的故事是什么？我不应该使用它吗？或者我应该使用它直到出现错误？

*如果我没有看到这个约定几乎被用作 ANTLR 中的标准，我不会问这个问题。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T09:24:32.320

> 问题：那么这个美元符号的故事是什么？我不应该使用它吗？或者我应该使用它直到出现错误？

这取决于您要参考的内容。

了解有 3 种不同类型的“标签”：

1.  `name=IDENT`, 标签`name`引用 a `CommonToken`;
2.  `val+=IDENT`，标签`val`引用了一个`List`包含`CommonToken`实例，在这种情况下；
3.  `ex=not_expr`标签`ex`引用了[`ParserRuleReturnScope`](http://www.antlr.org/api/Java/classorg_1_1antlr_1_1runtime_1_1_parser_rule_return_scope.html)

我建议始终使用`$`. 我不知道它是否是设计上`NOT ex=not_expr -> { new UnaryExpression($NOT,$ex) };`不起作用的，但要掌握任何`not_expr`匹配的东西，我只需这样做：

```
not_expr : term 
         | NOT ex=not_expr -> { new UnaryExpression($NOT, $ex.tree) }
         ; 
```

我不明白您为什么要掌握整个`ParserRuleReturnScope`:`tree`包含您需要的所有信息。

高温高压

# c# - 创建对象后设置其属性

> ID：11882957
> 
> 赞同：0
> 
> 时间：2012-08-09T11:59:16.010
> 
> 标签：c#

我有一个具有 2 个属性的对象：

```
public class Request
{
    public int TypeId { get; set; }
    public bool isApproved { get; set; }
} 
```

我希望发生的是，如果`TypeId`equals `1`，我想`isApproved`equal `false`，否则我希望它`true`在创建新对象时相等。我尝试了以下方法，但它被设置`true`为我的两个对象，我在构造函数中执行规则：

```
public Request() {
    if(this.TypeId == 1) {
        this.isApproved = false;
    }
    this.isApproved = true;
}

var request = new Request() {
    TypeId = 1
}

var request2 = new Request() {
    TypeId = 2
} 
```

我知道为什么会发生这种情况，因为`TypeId`调用构造函数时没有设置，所以默认为`true`. 无论如何，一旦`TypeId`在新创建的对象上设置了它，我可以自动设置它吗？

## 编辑

我还希望可以选择`isApproved`在以后手动更改，因此如果将其设置为，`false`我可以将其更改为`true`不影响我设置的自动规则

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T12:03:07.280

我会将逻辑放在`IsApproved`getter 中，并将其设为只读值：

```
public class Request
{
    public int TypeId { get; set; }
    public bool IsApproved 
    { 
        get
        {
            return this.TypeId != 1;
        }
} 
```

哦，C# 代码标准通常也指定属性应该是 CamelCased。

编辑：

> 我还希望以后可以选择手动更改 isApproved，因此如果将其设置为 false，我可以将其更改为 true，而不会影响我设置的自动规则

你会想用构造函数来设置它。（正如亚历克斯已经建议的那样）

```
public class Request
{
    public int TypeId { get; set; }
    public bool IsApproved { get; set; }

    public Request(int typeId)
    {
        this.TypeId = typeId;
        this.IsApproved = typeId != 1;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T12:01:43.060

尝试改变

```
public int TypeId { get; set; } 
```

到

```
public int _typeId;

public int TypeId 
{
    get
    {
        return _typeId;
    }
    set
    {
        _typeId = value;
        isApproved = value != 1;
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T12:02:45.103

C# 4.0 允许您为方法参数分配默认值，并让您能够做到这一点：

```
public Request(int TypeId = 1)
{
    approved = TypeId != 1;
} 
```

用法：

```
var request = new Request(2); // approved = true
var request2 = new Request(1); //approved = false 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T12:02:15.027

```
public class Request
{
    private int _typeId;
    public int TypeId { 
        get { return _typeId; }
        set {
            _typeId = value;
            isApproved = _typeId != 1;
        }
    }
    public bool isApproved { get; private set; }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T12:02:07.053

```
public class Request
{
    private int _typeId;
    public int TypeId 
    get
    {
        return _typeId;
    }
    set
    {
        isApproved = value != 1;
        _typeId = value;
    }

    public bool isApproved { get; set; }
} 
```

# javascript - 如何通过 javascript 在网页上模拟 ESC 按键？

> ID：11882961
> 
> 赞同：1
> 
> 时间：2012-08-09T11:59:24.933
> 
> 标签：javascript, keyboard

如何通过 javascript 在网页上模拟 ESC 按键？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-08-16T07:40:21.130

由于该问题没有答案，因此这里有一个可能的解决[方案](https://stackoverflow.com/questions/28627860/onclick-element-simulate-esc-key)。

```
function invokeEscKey() {
    var ev = document.createEvent('KeyboardEvent');
    ev.initKeyEvent(
        'keydown', true, true, window, false, false, false, false, 27, 0);
    document.body.dispatchEvent(ev);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-20T14:57:41.820

使用 Javascript模拟`Esc`密钥（在 Firefox 和 Chromium 中测试）：

```
window.dispatchEvent(
            new KeyboardEvent("keydown", {
              altKey: false,
              code: "Escape",
              ctrlKey: false,
              isComposing: false,
              key: "Escape",
              location: 0,
              metaKey: false,
              repeat: false,
              shiftKey: false,
              which: 27,
              charCode: 0,
              keyCode: 27,
            })
          ); 
```

要找到任何键的正确值：

1.  在下面粘贴到开发工具：

```
document.addEventListener(
              "keydown",
              (e)=>{console.log(e)}
            ); 
```

2.  按所需的键。

3.  从日志中复制值。

参考：[https ://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-09T12:01:22.937

你的意思是这样的

```
$(document).delegate('input','keypress', function(e){
    code = e.keyCode ? e.keyCode : e.which;
    if(code=== 27){
        alert('esc pressed');
    }
}); 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-08-09T12:03:24.603

没有 jQuery：

```
document.onkeydown = checkKeycode;
function checkKeycode(e) {
var keycode;
  if (window.event) {
    keycode = window.event.keyCode;
  }
  else if (e) {
    keycode = e.which;
  }
  // enter
  if (keycode == 13) {

  }

  // escape
  if (keycode == 27) {
    //place your action here
  }
} 
```

# php - 限制每秒/分钟的联系表单电子邮件

> ID：11882968
> 
> 赞同：0
> 
> 时间：2012-08-09T11:59:47.203
> 
> 标签：php, javascript, jquery

我最近做了一个投资组合网站并将其放在网上`000webhost.com`。今天，当我登录时，该帐户被暂停，因为有人通过我的联系表格在一分钟内发送了超过 70 封电子邮件——这是虚拟主机不允许的。

我正在寻找一些方法来阻止这种情况再次发生。我使用 php 和 javascript/jquery 进行表单验证。

这是我当前的 php 验证代码。

```
$firstName = $_POST["firstName"];
$lastName = $_POST["lastName"];
$email = $_POST["email"];
$message = $_POST["message"];
$to = "fox.team001@gmail.com";
$subject = $firstName . " " . $lastName;
$headers = "From: " .$firstName . " " . $lastName . "\r\nReply-To:" . $email;

 if(validateEmail($email)){
     @mail($to , $subject , $message , $headers);

 }

validate($firstName , $lastName , $email , $message);
function validate ($firstName , $lastName , $email , $message){
    if(!empty($firstName) && !empty($lastName)  && !empty($email) && !empty($message)){
        if(validateEmail($email)){
            header("refresh:5; url=http://www.foxteam.net");
        }else{
           header("refresh:0; url=http://www.foxteam.net/contact.php");
        }
    }else{
       header("refresh:0; url=http://www.foxteam.net/contact.php");
    }
}   
function validateEmail($email) {
    $pattern = "^[A-Za-z0-9_\-\.]+\@[A-Za-z0-9_\-]+\.[A-Za-z0-9]+$";
    if(preg_match("/{$pattern}/", $email)) {
        return true;
    }else{
        return false;
    }
} 
```

谁能告诉我如何阻止垃圾邮件发送者发送垃圾邮件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T12:17:04.203

完全阻止通过联系表单发送垃圾邮件非常困难，但是您可以使用多种方法来减少垃圾邮件，其中包括：

1.  **使用蜜罐**- 这背后的想法是在表单上使用通用名称（例如`answer`）隐藏字段，如果此字段中有任何内容，则不要费心发送电子邮件（但仍然告诉用户电子邮件已发送） - 这显然是垃圾邮件，因为没有其他方法可以填写该字段。
2.  **IP 限制**- 将用户的 IP 地址存储在某处，并限制每个 IP 地址每分钟/小时可以发送的电子邮件数量。
3.  **单词过滤**- 有一个单词列表，如果找到，则不要发送电子邮件（通常是*viagra*、*penis*等单词）。
4.  **验证码**，对我来说，这是最后的手段。如果您确实使用了一个，请实施[recaptcha](http://www.google.com/recaptcha)，它是迄今为止最好的一个。但正如我所说，将此作为最后的手段，您可以使用许多其他方法而不会惹恼您网站的用户。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T12:02:03.633

您可以使用[CAPTCHA](http://en.wikipedia.org/wiki/CAPTCHA)阻止机器人垃圾邮件发送者

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T12:03:14.883

将您的**if()**条件放入包含范围 70 的 for 循环中，然后仅发送电子邮件。如果它将在 70 之前结束，则将其放在**else**部分并带有一些合适的消息

谢谢

# css - 使用 div 标签而不是表格时出现边框问题

> ID：11882971
> 
> 赞同：1
> 
> 时间：2012-08-09T11:59:54.667
> 
> 标签：css, html

我正在尝试使用 div 标签而不是 table 标签创建一个表

我在我的css文件中写了以下内容：

```
 .div-table{
 display:table;        
border-collapse:collapse; 
border:1px solid lightgray; 
 margin-right:1%; margin-left:1%; 
 width:99%;
 font-size:13px; font-family:Verdana;
}
.div-table-row1{
display:table-row; 
background-color:White;
 width:33%;
 clear:both;
}
.div-table-col{
float:left;
display:table-column;
border:1px solid lightgray;
width:33%;
} 
```

我将它应用于我的表格，但边框是根据每个单元格中内容的大小单独出现的。所以有时我会得到双边框......我不能在这里应用高度属性作为通过表格的数据，所以它的大小是动态的我不知道如何从单元格中删除这些双边框并使所有单元格的大小连续相等。

请帮忙 ！！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T12:03:13.220

我相信如果你申请

```
table-layout:fixed 
```

...到`.div-table`并设置单元格的宽度，它们应该按照您喜欢的方式运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T12:04:38.917

改变

> 边框折叠：折叠；

到

> 边框折叠：分开；

或者

> 删除边框折叠

**变化**

```
.div-table{
     display:table;        
    border-collapse:collapse; 
    border:1px solid lightgray; 
     margin-right:1%; margin-left:1%; 
     width:99%;
     font-size:13px; font-family:Verdana;
    } 
```

到

```
.div-table{
 display:table;        
border-collapse:separate; 
border:1px solid lightgray; 
 margin-right:1%; margin-left:1%; 
 width:99%;
 font-size:13px; font-family:Verdana;
} 
```

# facebook - 如何在我的网站上放置 facebook 和 twitter 的“like button”？

> ID：11882973
> 
> 赞同：1
> 
> 时间：2012-08-09T11:59:58.910
> 
> 标签：facebook, twitter

我想在我的网站上放 facebook 的“like”按钮，我用这个

```
<html>
    <head>
      <title>My Great Web page</title>
    </head>
    <body>
       <iframe src="http://www.facebook.com/plugins/like.php?href=https://www.google.com.sg/"
        scrolling="no" frameborder="0"
        style="border:none; width:450px; height:80px"></iframe>
    </body>
 </html> 
```

但是，如果我没有登录facebook，它就不起作用，有什么问题吗？以及如何在 twitter 中实现相同的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:19:12.720

在相应公司的网页上有免费提供 Twitter 和 Facebook 集成的生成器。

但是，正如您已经编写的那样，它仅在登录时才起作用。当您未登录时，它将显示 facebook 的登录页面，请参阅此处以获取带有您的代码的工作 jsfiddle：

[http://jsfiddle.net/Y5WAp/](http://jsfiddle.net/Y5WAp/)

这里是我在不登录 Facebook 的情况下尝试点赞时会发生什么（并且应该发生）的屏幕截图：

[http://i.imgur.com/U2Tgz.png](http://i.imgur.com/U2Tgz.png)

# mysql - MySQL：'EXPLAIN' 显示类似查询的不同解释

> ID：11882976
> 
> 赞同：1
> 
> 时间：2012-08-09T12:00:05.067
> 
> 标签：mysql, sql, key, explain

我在数据库中有一个表'posts'，它在user_id（键：MUL）上有非唯一索引。

```
mysql> show columns from posts;
+---------+--------------+------+-----+-------------------+----------------+
| Field   | Type         | Null | Key | Default           | Extra          |
+---------+--------------+------+-----+-------------------+----------------+
| id      | int(11)      | NO   | PRI | NULL              | auto_increment |
| user_id | int(11)      | YES  | MUL | NULL              |                |
| post    | varchar(140) | NO   |     | NULL              |                |
+---------+--------------+------+-----+-------------------+----------------+ 
```

对于此表，explain 给出了类型为“ **REF** ”的预期解释

```
mysql> explain select * from posts where posts.user_id=1;
+----+-------------+-------+------+---------------+---------+---------+-------+------+-------------+
| id | select_type | table | type | possible_keys | key     | key_len | ref   | rows | Extra       |
+----+-------------+-------+------+---------------+---------+---------+-------+------+-------------+
|  1 | SIMPLE      | posts | ref  | user_id       | user_id | 5       | const |   74 | Using where |
+----+-------------+-------+------+---------------+---------+---------+-------+------+-------------+ 
```

我有第二个表'followers'，其中'user_id'和'follower'是非唯一索引的一部分

```
mysql> show columns from followers;
+---------------+-----------+------+-----+---------------------+----------------+
| Field         | Type      | Null | Key | Default             | Extra          |
+---------------+-----------+------+-----+---------------------+----------------+
| id            | int(11)   | NO   | PRI | NULL                | auto_increment |
| user_id       | int(11)   | YES  | MUL | NULL                |                |
| follower      | int(11)   | YES  | MUL | NULL                |                |
+---------------+-----------+------+-----+---------------------+----------------+ 
```

但在此表中，类型为“ **ALL** ”。我希望它是“ **REF** ”，类似于上表中的“user_id”，这个“user_id”也有非唯一索引。对此有什么解释吗？

```
mysql> explain select * from followers where followers.user_id=1;
+----+-------------+-----------+------+---------------+------+---------+------+------+-------------+
| id | select_type | table     | type | possible_keys | key  | key_len | ref  | rows | Extra       |
+----+-------------+-----------+------+---------------+------+---------+------+------+-------------+
|  1 | SIMPLE      | followers | ALL  | user_id       | NULL | NULL    | NULL |    6 | Using where |
+----+-------------+-----------+------+---------------+------+---------+------+------+-------------+ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T12:09:11.333

我会把它作为答案发布，因为我很确定情况就是这样。

我认为你会有所不同，因为在`followers`表中你有一个来自`user_id`和`follower`字段的复合键，而不仅仅是一个`user_id`.

因此，索引将用于同时使用`user_id`AND `follower`in`WHERE`子句的查询。

在字段上添加单独的索引`user_id`，您将得到相同的解释。

# javascript - 为多个平台创建移动框架

> ID：11882982
> 
> 赞同：0
> 
> 时间：2012-08-09T12:00:22.797
> 
> 标签：javascript, android, jquery, ios, mobile

嘿，我一直在研究为多个移动平台开发应用程序的 javascript/jquery 方面。我遇到了这个框架：

[http://www.u360mobile.com/](http://www.u360mobile.com/)

有人可以向我解释一下这种东西是如何建造的吗？换句话说，构建可定制的移动应用程序需要哪些技术/编程语言/框架？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T12:07:25.740

如果你熟悉 ruby​​，你可以看看它：

[http://www.motorola.com/Business/US-EN/RhoMobile+Suite/Rhodes](http://www.motorola.com/Business/US-EN/RhoMobile+Suite/Rhodes)

# .net - 为什么 ServiceStack.Text 不默认日期为 iso8601？

> ID：11882987
> 
> 赞同：24
> 
> 时间：2012-08-09T12:00:37.957
> 
> 标签：.net, json, servicestack, json.net

如果我使用 Newtonsoft.Json.NET，它默认为 iso8601（即：）`2011-06-02T09:34:29+02:00`用于序列化/反序列化日期。

为什么 ServiceStack.Text 不默认为此而我需要将其指定为配置设置？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-08-09T16:12:50.670

ServiceStack 遵循 .NET DataContractSerializer 默认值，而不是 JSON.NET。我们不愿意进行这样的重大更改，尤其是当有一种简单的方法可以通过以下方式配置它时：

```
JsConfig.DateHandler = DateHandler.ISO8601; 
```

# python - Python：字节数组与数组

> ID：11882988
> 
> 赞同：27
> 
> 时间：2012-08-09T12:00:40.417
> 
> 标签：python, bytearray

`array.array('B')`和 和有什么不一样`bytearray`？

```
from array import array

a = array('B', 'abc')
b = bytearray('abc')

a[0] = 100
b[0] = 'd'

print a
print b 
```

有内存或速度差异吗？每个人的首选用例是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-09T12:06:59.773

`bytearray`是 Python 2.x`string`类型的继承者。它基本上是内置的字节数组类型。与原始`string`类型不同，它是可变的。

`array`另一方面，创建该模块是为了创建二进制数据结构以与外界通信（例如，读取/写入二进制文件格式）。

与 不同`bytearray`的是，它支持各种数组元素。它很灵活。

因此，如果您只需要一个字节数组，`bytearray`应该可以正常工作。如果您需要灵活的格式（例如，当需要在运行时确定数组的元素类型时），`array.array`是您的朋友。

如果不查看代码，我的猜测`bytearray`可能会更快，因为它不必考虑不同的元素类型。但有可能`array('B')`返回一个`bytearray`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-09T12:07:18.470

`bytearray`有所有常用的`str`方法。您可以将其视为可变的`str`（Python3 中的字节）

而 array.array 则适用于读取和写入文件。'B' 只是 array.array 的一个特例

你可以看到`dir()`每一个都有很大的不同

```
>>> dir(bytearray)
['__add__', '__alloc__', '__class__', '__contains__', '__delattr__',
 '__delitem__', '__doc__', '__eq__', '__format__', '__ge__', '__getattribute__',
 '__getitem__', '__gt__', '__hash__', '__iadd__', '__imul__', '__init__',
 '__iter__', '__le__', '__len__', '__lt__', '__mul__', '__ne__', '__new__',
 '__reduce__', '__reduce_ex__', '__repr__', '__rmul__', '__setattr__',
 '__setitem__', '__sizeof__', '__str__', '__subclasshook__', 'append',
 'capitalize', 'center', 'count', 'decode', 'endswith', 'expandtabs', 'extend',
 'find', 'fromhex', 'index', 'insert', 'isalnum', 'isalpha', 'isdigit', 'islower',
 'isspace', 'istitle', 'isupper', 'join', 'ljust', 'lower', 'lstrip', 'maketrans',
 'partition', 'pop', 'remove', 'replace', 'reverse', 'rfind', 'rindex', 'rjust',
 'rpartition', 'rsplit', 'rstrip', 'split', 'splitlines', 'startswith', 'strip',
 'swapcase', 'title', 'translate', 'upper', 'zfill']
>>> dir(array)
['__add__', '__class__', '__contains__', '__copy__', '__deepcopy__',
 '__delattr__', '__delitem__', '__doc__', '__eq__', '__format__', '__ge__',
 '__getattribute__', '__getitem__', '__gt__', '__hash__', '__iadd__', '__imul__', 
 '__init__', '__iter__', '__le__', '__len__', '__lt__', '__mul__', '__ne__',
 '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__rmul__', '__setattr__',
 '__setitem__', '__sizeof__', '__str__', '__subclasshook__', 'append',
 'buffer_info', 'byteswap', 'count', 'extend', 'frombytes', 'fromfile',
 'fromlist', 'fromstring', 'fromunicode', 'index', 'insert', 'itemsize', 'pop',
 'remove', 'reverse', 'tobytes', 'tofile', 'tolist', 'tostring', 'tounicode',
 'typecode'] 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-07-11T09:15:35.370

[Python Patterns - 优化轶事](https://www.python.org/doc/essays/list2str/)是一本很好的读物，它指出`array.array('B')`速度很快。使用`timing()`那篇文章中的函数确实表明它`array.array('B')`比`bytearray()`：

```
#!/usr/bin/env python

from array import array
from struct import pack
from timeit import timeit
from time import clock

def timing(f, n, a):
    start = clock()
    for i in range(n):
        f(a); f(a); f(a); f(a); f(a); f(a); f(a); f(a); f(a); f(a)
    finish = clock()
    return '%s\t%f' % (f.__name__, finish - start)

def time_array(addr):
    return array('B', addr)

def time_bytearray(addr):
    return bytearray(addr)

def array_tostring(addr):
    return array('B', addr).tostring()

def str_bytearray(addr):
    return str(bytearray(addr))

def struct_pack(addr):
    return pack('4B', *addr)

if __name__ == '__main__':
    count = 10000
    addr = '192.168.4.2'
    addr = tuple([int(i) for i in addr.split('.')])
    print('\t\ttiming\t\tfunc\t\tno func')
    print('%s\t%s\t%s' % (timing(time_array, count, addr),
          timeit('time_array((192,168,4,2))', number=count, setup='from __main__ import time_array'),
          timeit("array('B', (192,168,4,2))", number=count, setup='from array import array')))
    print('%s\t%s\t%s' % (timing(time_bytearray, count, addr),
          timeit('time_bytearray((192,168,4,2))', number=count, setup='from __main__ import time_bytearray'),
          timeit('bytearray((192,168,4,2))', number=count)))
    print('%s\t%s\t%s' % (timing(array_tostring, count, addr),
          timeit('array_tostring((192,168,4,2))', number=count, setup='from __main__ import array_tostring'),
          timeit("array('B', (192,168,4,2)).tostring()", number=count, setup='from array import array')))
    print('%s\t%s\t%s' % (timing(str_bytearray, count, addr),
          timeit('str_bytearray((192,168,4,2))', number=count, setup='from __main__ import str_bytearray'),
          timeit('str(bytearray((192,168,4,2)))', number=count)))
    print('%s\t%s\t%s' % (timing(struct_pack, count, addr),
          timeit('struct_pack((192,168,4,2))', number=count, setup='from __main__ import struct_pack'),
          timeit("pack('4B', *(192,168,4,2))", number=count, setup='from struct import pack'))) 
```

实际显示的[timeit](https://docs.python.org/2/library/timeit.html)度量`array.array('B')`有时是速度的两倍以上`bytearray()`

我对将 IP 地址打包成四字节字符串进行排序的最快方法特别感兴趣。看起来既没有`str(bytearray(addr))`也没有`array('B', addr).tostring()`接近的速度`pack('4B', *addr)`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-08-11T02:50:42.373

从我的测试来看，两者都使用了几乎**相同大小的内存**，但是当我创建一个**大缓冲区进行读写时，bytearry 的速度是数组的****1.5 倍。**

 **```
from array import array
from time import time

s = time()

"""
map = array('B')
for i in xrange(256**4/8):
        map.append(0)
"""

#bytearray
map = bytearray()
for i in xrange(256**4/8):
        map.append(0)
print "init:", time() - s 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-10T06:28:52.013

尚未提及的一个区别是，最终用户字符串表示对于 bytearrays 和具有 type 的数组是不同的`'b'`。

```
>>> import array
>>> arr = array.array('b', [104, 105])
>>> byte_arr = bytearray([104, 105])
>>> print(arr)
array('b', [104, 105])
>>> print(byte_arr)
bytearray(b'hi') 
```

这符合`bytearray`Python3 的（可变）“原始”字符串类型的概念，并假设其数据表示字符。

编辑：

另一个显着的区别是，它`array.array`有一种`tofile`方法可以有效地将数据转储到文件`bytearray`中`bytes`。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-08-09T12:18:52.303

您几乎不需要`array.array`自己使用模块。它通常用于为二进制文件格式或协议创建二进制数据，如`struct`模块。

`bytearray`通常用于处理编码文本（例如 utf-8、ascii 等），而不是用于 Unicode 文本`str()`的 Python 3 或 Python 2 。`unicode()`

大多数时候，在处理文本时应该使用 str()，或者在需要包含数字在内的项目集合时使用 list 和 tuple。**

# php - 标头参数发布请求php（curl）

> ID：11882989
> 
> 赞同：1
> 
> 时间：2012-08-09T12:00:40.340
> 
> 标签：php, http, curl

我正在尝试构建一个发布其他 web 服务的 php 脚本，如您所见，我正在使用 culr，问题出在 API webserver 文档中要求我发送一些标头参数，字面意思是“对于每个 http 调用，您需要添加以下标头参数：APIuserID、APIpassword 和 ResponseType"

所以我的问题是如何将自定义参数添加到我的标头请求中？谢谢

```
<?php 
function curl_post($url, array $post = NULL, array $options = array()) 
{ 
$defaults = array( 
    CURLOPT_POST => 1, 
    CURLOPT_HEADER => 0, 
    CURLOPT_URL => $url, 
    CURLOPT_FRESH_CONNECT => 1, 
    CURLOPT_RETURNTRANSFER => 1, 
    CURLOPT_FORBID_REUSE => 1, 
    CURLOPT_TIMEOUT => 4, 
    CURLOPT_SSL_VERIFYHOST=>0,
    CURLOPT_POSTFIELDS => http_build_query($post) 
); 

$ch = curl_init(); 
curl_setopt_array($ch, ($options + $defaults)); 
if( ! $result = curl_exec($ch)) 
{ 
    trigger_error(curl_error($ch)); 
} 
curl_close($ch); 
return $result; 
} 

$result=curl_post('https://www.serverPath/serverAPI',array('a'=>'a','b'=>'b'));

echo $result; 
```

?>

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T12:30:21.427

您是否尝试过将这些参数添加到 httpheader？

```
curl_setopt($tuCurl, CURLOPT_HTTPHEADER, array(
    "Content-Type: text/xml",
    "APIuserID: $id", 
    "APIpassword: $password", 
    "Content-length: ".strlen($data)
)); 
```

此外，您可以使用： http: [//php.net/manual/en/soapheader.soapheader.php](http://php.net/manual/en/soapheader.soapheader.php)

# batch-file - 从目录获取第一个文件名的批处理脚本

> ID：11882993
> 
> 赞同：14
> 
> 时间：2012-08-09T12:01:02.830
> 
> 标签：batch-file

我的函数需要来自特定目录的第一个文件名来使用第一个文件处理一些测试，在完成测试时从目录中删除第一个文件

我尝试如下

```
FOR /R \\<My Folder> %F in (*.zip*) do echo ~nF  >%test_list%
set /p firstline=%test_list%
echo %firstline% 

FOR /F "tokens=*" %%A IN ('dir %test_firmware_dir% /b/s ^| find /c ".zip"') DO SET 
 count=%%A
  echo %count%
 :test_execution
  if %count% NEQ 0 (
  echo ON
  dir /b %test_firmware_dir%\*.zip >%test_firmware_list%
 set /p firstline=<%test_firmware_list%
 set /a filename=%firstline:~0,-4%
  Echo %filename%
  Echo *********************************************************
 Echo "Now running batch queue tests with %filename%"
  Echo ******************************************************** 
```

它显示最后一个元素任何程序来获得第一个元素？？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-12T16:29:27.850

`goto`另一种方法是在您拥有第一个文件后使用（中断 FOR 循环）：

```
FOR %%F IN (%test_firmware_dir%\*.zip) DO (
 set filename=%%F
 goto tests
)
:tests
echo "%filename%" 
```

在某些情况下它可以运行得更快（一点点），因为它不必遍历整个目录。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-09T12:36:36.767

假设您指的是按字母顺序排序的第一个文件；然后假设您遍历列表覆盖最后一个值，您将如您所说捕获最后一个文件，而不是控制排序顺序；

```
for /f "delims=" %%F in ('dir %test_firmware_dir%\*.zip /b /o-n') do set file=%%F
echo 1st alpha file is %file% 
```